# StackOverflow 问答 14206000-14206999

# iphone - 下载项目时更新表视图

> ID：14206000
> 
> 赞同：1
> 
> 时间：2013-01-07T23:38:15.523
> 
> 标签：iphone, ios, multithreading, asynchronous, xml-parsing

我有一系列表格视图。当第一个表视图中的项目被按下时，它会调用一个 web 服务，解析一些 xml，然后根据数据生成下一个表视图。我想知道如何在解析 xml 文档中的每个项目后更新表格视图。我尝试将表格视图对象传递给 xml 解析委托，并在完成对单个项目的解析时在表格视图上调用 reloadData，但它仍然等到整个文档完成解析以显示单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:35:42.347

其他人指出了异步解析 XML 和更新 UI 的优势，但您还应该注意，您选择的 XML 解析器可能是相关的。例如，如果您使用`NSXMLParser`，它往往会在解析开始之前从远程服务器下载整个 XML 提要（因此，在解析发生时尝试通过更新来改进 UI 几乎没有什么好处，因为主要延迟是从远程服务器下载, 在解析开始之前就已经完成了……与下载远程 XML 提要所花费的时间相比，解析所花费的时间通常可以忽略不计）。

如果您查看 Apple 的[XMLPerformance 示例](https://developer.apple.com/library/ios/#samplecode/XMLPerformance/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008094)`NSXMLParser`，它们实际上会比较和对比`LibXML2`. 后者将随着下载的进行进行解析，而前者在下载完成之前不会开始。（顺便说一句，这不仅会影响用户界面更新的速度，还会影响解析过程的内存占用。）

我还建议您查看 Ray Wenderlich 的文章，[如何为您的 iPhone 项目选择最佳 XML 解析器](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)。

# scalability - 任何具有可扩展性、unix、MySQL、托管服务器的托管服务提供商？

> ID：14206002
> 
> 赞同：0
> 
> 时间：2013-01-07T23:38:35.710
> 
> 标签：scalability, web-hosting, cloud-hosting

我在一家运行多个网站的公司工作，其中大部分都是用 CakePHP 制作的（大量的 PHP 和 SQL）。他们目前处于 1 和 1 共享 unix 主机中，我们正在寻求搬到其他地方。

我们正在寻找一种解决方案，显然允许我们移动所有这些网站并创建类似的网站（因此使用 PHP、MySQL 数据库、unix...）。我们希望它在计算能力方面易于扩展，因为目前我们没有很多用户同时浏览网站，但今年可能会发生巨大变化。

我们没有管理/维护服务器的经验，所以我们需要某种托管服务（比如托管专用服务器？）。

我们一直在寻找亚马逊的 EC2，但它对我们来说似乎有点矫枉过正，而且由于他们不提供任何类型的管理服务，因此我们需要聘请其他公司来做这件事，这对我来说到目前为止看到的成本增加了很多。

任何有关此主题的建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:40:15.040

Rackspace 提供托管主机 - [http://www.rackspace.com/managed_hosting/](http://www.rackspace.com/managed_hosting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:07:11.533

由于您没有任何管理服务器的经验，因此您应该使用常规的网络托管。

如果您想要一个可扩展的，您可以使用[Gandi Simple Hosting](https://www.gandi.net/hosting/simple)或[Pagoda Box](http://www.newpagodabox.com/)

# tomcat - Tomcat 中的默认应用程序

> ID：14206003
> 
> 赞同：2
> 
> 时间：2013-01-07T23:38:38.950
> 
> 标签：tomcat, configuration

新手问题。

我在我的 Ubuntu 机器上安装了 Tomcat 并让它工作，但我无法理解 docBase 上下文（而且，我猜，一般指的是什么上下文）。

我正在使用不同的`CATALINA_BASE`= `~/dev/tomcat`，下面有我的 webapps 目录等。我把线

```
<Context path="" docBase="/home/.../tomcat/webapps"/> 
```

在 server.xml 文件中；我认为这就是告诉 Tomcat 在哪里寻找其目录的原因。但是我正在阅读的教程暗示（不，它说）我应该放置这条线

```
<Context path="" docBase="/home/.../tomcat/webapps/ROOT"/> 
```

在 server.xml 文件中。

那是对的吗？如果是这样，这两行是做什么的？（如果某处有一份文档清楚地解释了所有这些，请让我参考它，但我找不到 - 关键词很清楚）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:08:13.733

上下文或多或少是“webapp 上下文”。它描述了部署的内容以及在何处/如何访问它。`docBase`是战争的位置，以及端点`path`url。

它在服务器上必须是唯一的。

通常 ROOT 部署在 myserver:8080/ (path="") 和 mywebapp 上 myserver:8080/uhuh (path = "uhuh")

默认情况下，如果您不指定`path`tomcat 部署应用程序并将路径设置为战争名称。

这些`Context`指令位于`Host`覆盖默认行为的指令中。有属性`Host`。`appBase`此属性声明在哪里可以找到要部署的其他战争。通常，它们会在 tc 启动时使用默认设置自动部署。

HIH

# svn - 使用 TortoiseSVN 创建 Subversion 标签时出错

> ID：14206007
> 
> 赞同：1
> 
> 时间：2013-01-07T23:39:06.777
> 
> 标签：svn, tortoisesvn, tagging

Subversion 1.7.8 已安装在运行 Microsoft Windows Server 2003 R2 Standard Edition Service Pack 2 的服务器中。Subversion 作为 Windows 服务运行。已在服务器上创建目录 d:\SvnRepositories 以存储存储库。

TortoiseSVN 1.7.10 已经安装在服务器上。使用 TortoiseSVN，为项目 TEST 创建了一个存储库：d:\SvnRepositories\TEST

目录源已在 TEST 下创建：d:\SvnRepositories\TEST\source

目录分支、标签和主干已在源下创建：d:\SvnRepositories\TEST\source\branches d:\SvnRepositories\TEST\source\tags d:\SvnRepositories\TEST\source\trunk

* * *

在运行 Microsoft Windows XP Professional Version 2002 Service Pack 3 的客户端计算机上，也安装了 TortoiseSVN 1.7.10。使用 TortoiseSVN > Import，存储在客户端计算机上的项目 TEST 的源代码已加载到服务器上的存储库中。

在同一台客户端计算机上，已创建一个工作目录：C:\Svn

在 Svn 下创建了目录 TEST：C:\Svn\TEST

使用 TortoiseSVN > Checkout，文件已从以下服务器位置检出到 C:\Svn\TEST：svn://///d:/SvnRepositories/TEST/source/trunk

* * *

在客户端计算机上，工作目录 TortoiseSVN > Branch/tag 已被选中。在复制（分支/标签）对话框中，已填写以下字段： - 到路径：/source/tags/version-5.6.1 - 日志消息：创建版本 5.6.1 - 在存储库中创建副本：存储库中的特定修订版 - 修订版：1 - 将工作副本切换到新的分支/标签：选中

单击确定并提供我的凭据后，将显示以下错误消息： **找不到文件：事务'1-1'，路径'/source/tags/version-5.6.1'**

服务器和客户端是否配置正确？我错过了什么？

预先感谢您的协助。

PTM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:12:43.807

只是详细说明@alroc 答案：

需要使用`TortoiseSVN`>创建存储库`Create Repository Here...`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T21:58:21.077

我有同样的错误。后来我发现为svn通信存储的svn密码已经过时了。一旦我更新了密码，错误就消失了，一切正常。

# shell - 用 awk 剪切字符串

> ID：14206008
> 
> 赞同：2
> 
> 时间：2013-01-07T23:39:09.607
> 
> 标签：shell, awk

我有一个这样的字符串

```
key2|ex|am||ple 
```

我想得到`example`. 我想在第一个管道之后得到零件，而没有其他管道。

目前我正在使用`awk -F"|" '{print $2,$3,$4,$5}'`，但这不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T05:48:58.613

```
cut -d '|' -f 2- <<< "$string" | tr -d '|' 
```

我会这样写awk解决方案

```
awk -F '|' -v OFS="" '{$1=""; print}' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T23:41:01.673

尝试使用*C 风格的 for 循环执行此操作*

```
 echo 'key2|ex|am||ple' | awk -F'|' '{for (i=2; i<=NF; i++) printf("%s", $i)}'
 example 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T14:28:41.353

您可以简单地设置输出字段分隔符并取消设置第一个字段：

```
$ echo 'key2|ex|am||ple' | awk -v FS="|" -v OFS="" '{ $1 = "" ; print }'
example 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T23:48:12.167

使用`sed`和`tr`：

```
echo "key2|ex|am||ple" | sed 's/[^|]*|//' | tr -d '|' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T10:34:21.230

```
perl -pe 's/^[^\|]*\|//g;' your_file 
```

在@Ed 发表评论后更新

```
perl -F"|" -ane 'shift @F;print "@F"' your_File 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T14:19:16.693

这是单行的简单替换，因此是 sed 的一个很好的应用程序：

```
$ echo 'key2|ex|am||ple' | sed -e 's/[^|]*|//' -e 's/|//g'
example 
```

或者如果您的 sed 支持 ERE：

```
$ echo 'key2|ex|am||ple' | sed -r 's/^[^|]*[|]|[|]//g'
example 
```

或 awk 中的等价物（所有 awk 都支持 ERE）：

```
$ echo 'key2|ex|am||ple' | awk '{gsub(/^[^|]*[|]|[|]/,"")}1'
example 
```

# mysql - Django syncdb AttributeError：“list”对象没有属性“startswith”

> ID：14206009
> 
> 赞同：0
> 
> 时间：2013-01-07T23:39:16.937
> 
> 标签：mysql, database, django, models, syncdb

一直无法找到解决方案。

模型.py

```
class Product(models.Model):
    prod_id = models.IntegerField(primary_key = True)
    prod_name = models.CharField(max_length=128)
    prod_price = models.FloatField()
    prod_quantity = models.CharField(max_length=75)
    prod_description = models.TextField()
    prod_attributes = models.TextField()
    prod_ingredients = models.TextField() 
```

设置.py

```
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'MyApp', 
```

这是引发的错误：

> 创建表 ... self.fetch_command(subcommand).run_from_argv(self.argv) 文件“C:\Python27\Lib\site-packages\django\core\management\base.py”，第 196 行，在 run_from_argv self.execute (*args, ** **options.dict**) 文件“C:\Python27\Lib\site-packages\django\core\management\base.py”，第 232 行，执行输出 = self.handle(*args, **options) 文件“C:\Python27\ Lib\site-packages\django\core\management\base.py”，第 371 行，在句柄中返回 self.handle_noargs(**options) 文件“C:\Python27\Lib\site-packages\django\core\management\ commands\syncdb.py”，第 91 行，在 handle_noargs sql 中，引用 = connection.creation.sql_create_model(model, self.style, seen_models) 文件“C:\Python27\Lib\site-packages\django\db\backends\creation .py"，第 82 行，在 sql_create_model 样式中。SQL_TABLE(qn(opts.db_table)) + ' ('] 文件 "C:\Python27\Lib\site-packages\django\db\backends\mysql\base.py" ，第 244 行，在 quote_name 中，如果 name.startswith(" `") and name.endswith("`")：AttributeError：“list”对象没有属性“startswith”

所以关键部分： **AttributeError: 'list' object has no attribute 'startswith'**

有人对我为什么会收到此错误有任何想法吗？我已经尝试了很多不同的东西，即使它成功地创建了其他表，它也不会工作它只是不会创建我的模型类。我正在使用 mysql 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:11:17.077

回溯表明您可能`db_table`错误地使用了该选项。它应该是一个字符串，而不是一个列表。请检查您的使用情况，如果您不确定，请使用更多代码更新您的问题。

# input - SSIS：获取先前数据流组件的名称

> ID：14206010
> 
> 赞同：2
> 
> 时间：2013-01-07T23:39:27.617
> 
> 标签：input, path, ssis, custom-component

我正在尝试增强我在 SSIS 中的错误日志记录。除了使用保存到 sysssislog 的 SSIS 内置日志记录（OnError、OnWarning 等）之外，我还跟踪重定向到错误输出的特定行（我将行转换为 xml，添加包的名称和数据流任务，并将行放入数据库中的表中）。我试图通过包括哪个数据流组件引发错误来增强跟踪重定向错误行时捕获的信息。

我的问题是我不知道如何最好地传递组件名称，使其成为工作流程的一部分。我的第一个想法是创建一个可以捕获此信息的自定义组件，但我似乎找不到从 IDTSInput100 对象回溯到其关联的 IDTSPath100 对象的方法。如果我能做到这一点，那么我想我可以获取与其关联的 IDTSOutput100 对象的 ID，然后再往后退一步，这样我就可以从数据流中的前一个组件中获取元数据。

关于如何最好地实现我的最终目标的任何建议？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:37:29.623

没有对此进行过多的阅读，但是您不能仅拥有一个派生列并将所需的所有信息添加到传出的错误行中吗？我通常以这种方式（在查找上）添加自定义错误消息，说“客户 ID 查找失败：[ColumnName]”。这对我很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T15:19:38.680

我想出了如何获取上游组件名称！我对每个 IDTSInput100 对象使用 GetVirtualInput 方法，然后访问 IDTSVirtualInputColumn100 对象以查找 UpstreamComponentName。必须有一个更简单的方法，但至少我能够做我需要的。

还有rvphx，谢谢你的建议。这对于获取错误列的名称和描述很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T09:01:47.033

这就是我使用上面的（user1956536）评论的方式。同意这很讨厌，必须有更好的方法来做到这一点。

```
 IDTSInputCollection100 inputCollection = ComponentMetaData.InputCollection;
    String upStreamComponent = String.Empty;
    if(inputCollection.Count > 0)
    {
        IDTSVirtualInput100 virtualInput =  inputCollection[0].GetVirtualInput();
        IDTSVirtualInputColumnCollection100 virtualInputColumnCollection = virtualInput.VirtualInputColumnCollection;
        if (virtualInputColumnCollection.Count > 0)
        {
            upStreamComponent = virtualInputColumnCollection[0].UpstreamComponentName;
        }
    }

    Row.ErrorDescription = ComponentMetaData.GetErrorDescription(Row.ErrorCode);
    Row.ErrorComponent = upStreamComponent; 
```

# xna - XNA中的大texture2d

> ID：14206011
> 
> 赞同：0
> 
> 时间：2013-01-07T23:39:30.193
> 
> 标签：xna, texture2d

我正在尝试将 RTS 游戏的地图存储并显示为 texture2d，但地图太大，并且出现错误“XNA Framework HiDef 配置文件支持最大 Texture2D 大小为 4096”。我希望将整个地图放在一个纹理中的原因是，我可以利用 spriteBatch 在游戏相机中使用的源/目标矩形绘制方法。如果这显然不是一个坏主意，我该如何存储和显示大图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:09:36.113

您无法绕过 XNA 中的纹理大小限制。使用多个纹理并在不同的地方绘制它们是非常合理的。处理边界只是少量的额外逻辑。

不要忘记 4096 x 4096 纹理已经是 64MB 的纹理内存，未压缩（如果 DXT 压缩至少 10MB）。

如果您担心性能 - 不要担心。“源矩形”参数启用纹理图集——但这不是你在这里做的。

此外，通常最好通过将翻译传递给 来实现游戏相机`Matrix`，`SpriteBatch.Begin`然后`Draw`在固定坐标处设置所有内容（包括背景）。您甚至不需要为背景指定源矩形 - 视口会简单地剪切它。

如果您希望导入大于 4096 平方的纹理，您可以创建一个内容管道扩展来将这些大纹理切割成更小的纹理。或者，如果您只有少数固定地图，则在图像编辑器中将它们分开会更容易。

# jquery - 使用 jquery 添加新的父 div 树

> ID：14206012
> 
> 赞同：2
> 
> 时间：2013-01-07T23:39:36.007
> 
> 标签：jquery, html

我是 jquery 的新手，并找到了解决方案，

```
<div id="parent">
   <div class="child1">Child 1 Contents</div>
   <div class="child2">Child 2 Contents</div>
</div> 
```

我想创建新的父 div 元素，`<div id="parent">`并使用 jquery 将此父级的所有子级包含到新父级，因此结果 html 如下所示：

```
<div id="parent">
  <div id="newparent">
    <div class="child1">Child 1 Contents</div>
    <div class="child2">Child 2 Contents</div>
  </div>
</div> 
```

如何使用 jquery 解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T23:41:39.267

jQuery 的[wrapInner](http://api.jquery.com/wrapInner/)应该可以解决问题：

```
$('#parent').wrapInner('<div class="newparent"></div>'); 
```

# c - C 语言中的内维尔算法

> ID：14206013
> 
> 赞同：1
> 
> 时间：2013-01-07T23:39:56.417
> 
> 标签：c, numerical-analysis

我正在尝试实现[Neville 的算法](http://en.wikipedia.org/wiki/Neville%27s_algorithm)。

我有 32 个点代表 sin(x) 函数：

```
int N=32,Nx=10000;
step = 1.0 / (N-1);
for (ii = 0; ii < N; ii++){ 
    px[ii] = ii*step*PI;
    py[ii] = sin(px[ii]);} 
```

我有一个用于评估多项式的​​输入向量：

```
for (ii = 0; ii < Nx; ii++)
   x[ii] = 2.0 * rand() / (double) RAND_MAX; // 0 < x[ii] <= 2 
```

这是我的内维尔街区：

```
double y[Nx];
for (kk=0;kk<Nx;kk++){// for each x[]'s element
    for (jj=1;jj<N-1;jj++){
        for (ii=0;ii<N-1-jj;ii++)
           s[ii]=(((px[jj]-x[kk])*py[ii])+((x[kk]-px[ii])*py[ii]))/(px[jj]-px[ii]);
    }
y[kk]=s[0];//insert in the output array the value just calculated
} 
```

问题是`s[ii]`，我不确定这个计数是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:14:58.257

对于 Neville 的方法，您需要选择一个 x 值来近似`f(x)`，这与 x 数组的值不同。我不确定您使用的是哪个 x 值，但据我所知，也许您正在尝试使用`x[]`数组中的所有值。

我不确定您的实现是否需要一维输出数组，但这里有一个使用[此算法](http://books.google.com/books?id=zXnSxY9G2JgC&lpg=PP1&pg=PA123#v=onepage&q&f=false)和二维输出数组的示例实现。

该示例使用`1\. a.`来自同一页面的问题：

```
int i, j;
int n = 4;
double X; //X will be used to approximate f(X).
double x[n]; //The x values.
double y[n]; //The y or f(x) values.
double Q[n][n]; //The output table.

for (i = 0; i < n; i++)
    for (j = 0; j < n; j++)
        Q[i][j] = 0.0; //Initializing the Q matrix to 0.

//Hardcoding the x and y values from problem 1\. a.
x[0] = 8.1;
x[1] = 8.3;
x[2] = 8.6;
x[3] = 8.7;
y[0] = 16.94410;
y[1] = 17.56492;
y[2] = 18.50515;
y[3] = 18.82091;

X = 8.4; //Want to approximate f(X), or f(8.4).

for (i = 0; i < n; i++)
    Q[i][0] = y[i]; //Setting the first column of Q to y[0] through y[3].

//Neville's method.
for (i = 1; i < n; i++) {
    for (j = 1; j <= i; j++) {
        Q[i][j] = ((X - x[i - j])*(Q[i][j - 1]) 
                        - (X - x[i])*(Q[i - 1][j - 1]))/(x[i] - x[i - j]);
    }
}

printf("Resultant Q matrix:\n");
for (i = 0; i < n; i++) {
    for (j = 0; j < n; j++) {
        printf("%9f ", Q[i][j]);
    }
    printf("\n");
} 
```

答案 ,`f(8.4)`是表中最右下方的数字 , `17.877143`。这是合理的，因为`f(8.3) = 17.56492`and `f(8.6) = 18.50515`, and`17.877143`介于这两个值之间。

# ios5 - OpenCV 2.4.3 未找到符号：iOS 5 上的 _objc_setProperty_nonatomic

> ID：14206014
> 
> 赞同：0
> 
> 时间：2013-01-07T23:39:56.910
> 
> 标签：ios5, opencv, ios6

[我从这里](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.3/)下载了 OpenCV iOS 框架，并让它在 iOS 6 上运行良好，但在 iOS 5.0 上，每当我打电话时：

```
self.videoCamera = [[CvVideoCamera alloc] initWithParentView:self.imageView]; 
```

从[本教程](http://docs.opencv.org/trunk/doc/tutorials/ios/video_processing/video_processing.html)中，我收到以下错误消息：

```
dyld: lazy symbol binding failed: Symbol not found: _objc_setProperty_nonatomic
  Referenced from: /var/mobile/Applications/8ADDFB67-97CE-4F6B-94B5-BD2548E0E6DD/MyApp.app/MyApp
  Expected in: /usr/lib/libobjc.A.dylib

dyld: Symbol not found: _objc_setProperty_nonatomic
  Referenced from: /var/mobile/Applications/8ADDFB67-97CE-4F6B-94B5-BD2548E0E6DD/MyApp.app/MyApp
Expected in: /usr/lib/libobjc.A.dylib 
```

最新版本是否仅适用于 iOS 6？iOS 5 是否有等价物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T18:29:46.900

请参阅此问答：

[http://answers.opencv.org/question/4767/build-opencv-for-ios-5/](http://answers.opencv.org/question/4767/build-opencv-for-ios-5/)

最新源似乎存在问题，他们建议您使用[最新的预构建框架 (2.4.3)](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.3/)。

话虽如此，我上周从当前源代码构建了一个版本，该版本在 ios6.0、5.1 和 5.0 上运行良好（请参阅[此处](https://github.com/foundry/OpenCVSquares)和[此处的](https://github.com/foundry/OpenCVSquaresSL)github 项目）

但是当我用这个框架尝试你指向的视频示例时，我得到了同样的错误。

因此，这似乎完全取决于您尝试使用的 openCV 的哪个功能......

**更新**

我刚刚尝试了 2.4.3 并得到了同样的错误。返回一个版本 2.4.2 并没有帮助，因为`<opencv2/highgui/cap_ios.h>`它不存在。该文件声明了`CvVideoCamera`类和委托协议，因此如果没有它，您将无法使用此示例。有趣的是，`cap_ios.h`它是一个 Objective-C 类声明，不像 openCV 的其余部分是 C++……所以这个*特殊*的特性可能只适用于 ios6

**更新2**

好的，我设法使用最新源的最新版本的 openCV 让它运行。

1 / 将这些预构建源文件复制到您的项目中：

opencv/模块/highgui/src/

```
cap_ios_abstract_camera.mm
cap_ios_photo_camera.mm
cap_ios_video_camera.mm
cap_ios.h 
```

2 / 在三个 .mm 文件中更改这些行：

```
#import "opencv2/highgui/cap_ios.h"
#include "precomp.hpp" 
```

到：

```
#import "cap_ios.h"
// #include "precomp.hpp" 
```

2 / 在你的 viewController 改变

```
#import <opencv2/highgui/cap_ios.h> 
```

到

```
#import "cap_ios.h" 
```

就是这样......可能会进行一两个其他调整，但我认为这就是让它在 5.1 的部署目标下运行的全部内容。

# python - Python 的多重继承：选择调用哪个 super()

> ID：14206015
> 
> 赞同：54
> 
> 时间：2013-01-07T23:40:02.247
> 
> 标签：python, multiple-inheritance, super

在 Python 中，我如何选择调用哪个 Parent 的方法？假设我想调用父 ASDF2 的`__init__`方法。好像我必须在 super() 中指定**ASDF1** ..？如果我想调用 ASDF3's `__init__`，那么我必须指定**ASDF2**？！

```
>>> class ASDF(ASDF1, ASDF2, ASDF3):
    def __init__(self):
        super(ASDF1, self).__init__()

>>> ASDF()
ASDF2's __init__ happened
>>> class ASDF(ASDF1, ASDF2, ASDF3):
    def __init__(self):
        super(ASDF2, self).__init__()

>>> ASDF()
ASDF3's __init__ happened 
```

对我来说似乎很疯狂。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-01-07T23:45:16.027

那不是[`super()`](https://docs.python.org/3.4/library/functions.html#super)目的。Super 基本上按特定顺序选择一个（或全部）它的父母。如果您只想调用单亲的方法，请执行此操作

```
class ASDF(ASDF1, ASDF2, ASDF3):
    def __init__(self):
        ASDF2.__init__(self) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-07T23:46:40.303

`super`调用方法解析顺序中的下一个方法。在线性继承树中，这将是来自直接父类的方法。

在这里，您有三个父母，从的角度来看，下一个`__init__`方法是。一般来说，安全的做法是将继承列表中的第一个类传递给，除非您知道为什么要执行其他操作。`ASDF1``ASDF2``super`

所有这一切的目的是让您不必显式选择`__init__`要调用的方法。这里的问题是为什么你不想调用所有的超类`__init__`方法。

有相当多的关于`super`在 python 中使用的文献，我建议你谷歌这个主题，并阅读什么结果。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-10T20:53:25.887

您将 ASDF1（您的父类之一）作为第一个参数传递给 super()。不要那样做。相反，您应该将 ASDF 作为第一个参数传递给 super()。

[super() 的 Python 2.7 文档](https://docs.python.org/2/library/functions.html#super)

引用 Python 2.7 文档，典型的超类调用如下所示：

```
class C(B):
    def method(self, arg):
        super(C, self).method(arg) 
```

请注意，这里 super 的第一个参数是 C，它是当前类。不要将 B（父类）传递给 super()。

在确定方法解析顺序 (MRO) 时，super 会跳过作为其第一个参数传入的类，并开始查看该类的父级和兄弟级。因此，当您将 ASDF1 作为第一个参数传递给 super() 时，它会跳过 ASDF1 并开始使用 ASDF2 进行搜索。这就是为什么调用 ASDF2 的原因`__init__`。

* * *

在 Python 3 中，您不必再传递当前类。

```
class C(B):
    def method(self, arg):
        super().method(arg)    # This does the same thing as:
                               # super(C, self).method(arg)
                               # (Python 3 only) 
```

# php - 将刷新页面的 PHP 表单更改为 Ajax？

> ID：14206026
> 
> 赞同：0
> 
> 时间：2013-01-07T23:41:00.750
> 
> 标签：php, ajax

我正在构建的网站上有一个简单的 PHP 联系表。在提交表单的那一刻，页面刷新，然后使用 PHP 在清除的联系表单下方显示成功消息。

有什么办法可以让页面不刷新并仍然通过 Ajax 显示 PHP 成功消息，我该怎么做？

我对 PHP 很陌生。这是我当前代码的一部分...

```
if ($nr != $sum)
header('Location: index.php?msg=wrong#contactform');
else

// send email 
$success = mail($EmailTo, $Subject, $Body, "From: <$Email>");

// redirect to success page 
if ($success){
header('Location: index.php?msg=sent#contactform');
}
else{
print "<meta http-equiv=\"refresh\" content=\"0;URL=index.php\">";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:44:10.220

您可能会发现这很有帮助。这是一个查询插件，可以轻松提交表单 ajax。[http://malsup.com/jquery/form/](http://malsup.com/jquery/form/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:44:15.230

在调用页面上，尝试将成功消息插入到 div 中，例如（使用 jquery）

```
.done(function(){
$('#somediv').html('Success yippy!!');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:53:04.573

要实现这一点，您必须结合两种技术。客户端的**Javascript和服务器端的****PHP**。

首先，您创建一个 HTML 表单和成功警报。

```
<span class="formSubmitted">Your form was submitted!</span>

<form>
<input type="text" id="messageInput">
<input id="submitButton" type="submit">
</form> 
```

然后使用 jQuery(Javascript 框架)，你提交这个表单。

```
$("#submitButton").click(function(e){
   e.preventDefault();
   $.ajax({
      url : "myphpfile.php",
      type : "POST",
      data : {
         "message" : $("#messageInput").val() 
      },
      success: function(){
          $(".formSubmitted").fadeIn();
      }
   });

}); 
```

最后在 myphpfile 中，您可以通过以下操作检索消息变量：

```
$message = $_POST['message']; 
```

# sql - 如何使用不同的子查询在表中插入多行

> ID：14206029
> 
> 赞同：2
> 
> 时间：2013-01-07T23:41:04.777
> 
> 标签：sql, sql-server, insert

我有几张桌子

```
CREATE TABLE [dbo].[prods](
    [IdProducto] [int] IDENTITY(1,1) NOT NULL,
    [IdGrupo] [int] NULL,
    [IdCategoria] [int] NULL,
    [IdAlmacen] [varchar](50) NULL,
    [Codigo] [varchar](50) NULL,
    [Nombre] [varchar](50) NULL,
    [Descripcion] [varchar](max) NULL,
    [Cantidad] [int] NULL,
    [Imagen] [varchar](max) NULL,
    [StockMin] [int] NULL,
    [StockMax] [int] NULL,
    [Ancho] [varchar](50) NULL,
    [Alto] [varchar](50) NULL,
    [Largo] [varchar](50) NULL,
    [Peso] [varchar](50) NULL,
    [Volumen] [varchar](50) NULL,
    [Color] [varchar](50) NULL,
    [Material] [varchar](50) NULL,
    [Presentacion] [varchar](50) NULL,
    [bitPrecioVentaUnico] [int] NULL,
    [PrecioCompra] [money] NULL,
    [DescuentoCompra] [float] NULL,
    [PrecioVenta] [money] NULL,
    [DescuentoVenta] [float] NULL,
    [Estado] [varchar](20) NULL
) 
```

和

```
CREATE TABLE [dbo].[prodnuevos](
    [Codigo] [int] NULL,
    [itemid] [int] NULL,
    [Item] [varchar](255) NULL,
    [Categoria] [varchar](255) NULL,
    [Cantidad] [int] NULL,
    [Minima] [nvarchar](255) NULL,
    [Costo] [money] NULL,
    [Valor] [money] NULL,
    [peso] [float] NULL,
    [unidades] [float] NULL
) 
```

两个表都有些相似，都有一个产品列表，prodnuevos（我们可以认为是西班牙语的新产品），比 prods 有更多的列表（我们称之为产品）

我想要做的是使用一个查询，该查询将插入新产品中可用的所有行，而这些行在产品中不可用......

我试过这个长查询

```
INSERT INTO prods (IdGrupo, IdAlmacen, Codigo, Nombre, Descripcion, Cantidad, Imagen, StockMin,StockMax, Ancho, Alto, Largo, Peso, Volumen, Color, Material, Presentacion, bitPrecioVentaUnico, PrecioCompra, DescuentoCompra, PrecioVenta, DescuentoVenta, Estado) 
VALUES (1, 'Ninguno', (Select prodnuevos.Codigo FROM prodnuevos LEFT JOIN prods ON prodnuevos.Item = prods.Nombre WHERE prods.Nombre IS NULL), (Select prodnuevos.Item FROM prodnuevos LEFT JOIN prods ON prodnuevos.Item = prods.Nombre WHERE prods.Nombre IS NULL), '', (Select prodnuevos.Cantidad FROM prodnuevos LEFT JOIN prods ON prodnuevos.Item = prods.Nombre WHERE prods.Nombre IS NULL), '', 0, 0, '', '', '', '', '', '', '', 'Ninguno', 0, (Select prodnuevos.Costo FROM prodnuevos LEFT JOIN prods ON prodnuevos.Item = prods.Nombre WHERE prods.Nombre IS NULL), 0, 0, 0, 'Activo'); 
```

当我尝试这个时，我收到以下错误

> *子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

我想知道如何正确使用此查询。

顺便说一句，还有一种方法可以使用更少的子查询而不是多次重复吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:47:47.440

你有正确的想法，只是以错误的方式解决问题。您应该首先`SELECT`获得一个结果集，该结果集将为您提供要复制的数据，然后在其前面加上您的`INSERT`喜欢：

```
INSERT INTO table VALUES (col1, col2)
SELECT col1, col2 FROM table2 
```

您也不需要在`INSERT ... VALUES`列表中包含具有默认值且子表中不存在的列。

# c# - 父控件添加

> ID：14206034
> 
> 赞同：-4
> 
> 时间：2013-01-07T23:41:36.897
> 
> 标签：c#, winforms, event-handling

有问题`controls.add(pic)`

```
private void blockRoadMouseMove(System.Object sender,
          System.Windows.Forms.MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            if (Control.ModifierKeys == Keys.Control)
            {
                int yo = this.Location.Y;
                int startx = this.Left;
                int cx = startx;
                int mo = e.X + this.Left - clickOffsetX;

                DrawingControl.SuspendDrawing(mainPic);
                mainPic.SuspendLayout();
                blockRoad pic = new blockRoad(mainPic);
                DrawingControl.SuspendDrawing(pic);

                for (int t = cx; t < mo; t += 20)
                {
                    pic.setChar(this.Image, t, yo);
                }
                mainPic.ResumeLayout();
                DrawingControl.ResumeDrawing(mainPic);
            }
        }
    } 
```

我用那个

```
class DrawingControl
    {
        [DllImport("user32.dll")]
        public static extern int SendMessage(IntPtr hWnd, Int32 wMsg, bool wParam, Int32 lParam);

        private const int WM_SETREDRAW = 11;

        public static void SuspendDrawing(Control parent)
        {
            SendMessage(parent.Handle, WM_SETREDRAW, false, 0);
        }

        public static void ResumeDrawing(Control parent)
        {
            SendMessage(parent.Handle, WM_SETREDRAW, true, 0);
            parent.Refresh();
        }
    } 
```

问题是在一个位置添加许多（图片）下一个位置添加许多..下一个添加...

在（每个）一个位置添加许多图片我想在每个位置添加（一个）图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:47:55.043

如果blockRoad不在这个位置（添加），我通过添加（检查）解决了这个问题

```
for (int t = cx; t < mo; t += 20)
{
    Control c = pic.GetChildAtPoint(new Point(cx, y));

    if (c == null)
    {
        pic.setChar(this.Image, t, yo);
        pic.Controls.Add(pic);
    }
} 
```

如果有其他解决方案，我希望我知道谢谢

# javascript - Accordion JS 不会从标签链接打开

> ID：14206037
> 
> 赞同：0
> 
> 时间：2013-01-07T23:18:38.347
> 
> 标签：javascript

我的页面上有一个手风琴简码可以正常工作，但是当我在内容中有要在手风琴中打开特定面板的链接时，它将不起作用。也许有人可以引导我编辑我的 JS 代码？

```
/**
 * Main JavaScript
 */

// Document is loaded...
jQuery(document).ready(function($) {

        /******************************************
         * ACCORDION (Shortcode)
         **************************************/

        var accordion_active_class = 'accordion-active';

        // Loop each instance
        $('.accordion').each(function() {

            var accordion_wrapper = this;
            var sections = $('> section', accordion_wrapper);

            // Make sure only one active section on load
            var active_section_set = false;
            $(sections).each(function(index) {

                // Section is active
                if ($(this).hasClass('accordion-active')) {

                    // Another was already set
                    if (active_section_set) {
                        $(this).removeClass('accordion-active'); // hide section
                    }   

                    // Allow only one active section
                    active_section_set = true;

                }

            });

            // Click on section
            $('.accordion-section-title', sections).click(function() {

                var section = $(this).parent();

                // if clicked section was not self
                if (!$(section).hasClass(accordion_active_class)) {

                    // hide all section content
                    $('.accordion-content', sections).hide();

                    // show current section content
                    $('.accordion-content', section).hide().fadeTo(500, 1); // fadeTo looks better than fadeIn in IE7

                    // move active class to new active section
                    sections.removeClass(accordion_active_class);
                    $(section).addClass(accordion_active_class);                

                }

                // if it was self, close it
                else {
                    $('.accordion-content', sections).hide();
                    sections.removeClass(accordion_active_class);
                }

            });

        });

        // CSS fixes for IE8 which doesn't support :not or :last-child
        $('.accordion section .accordion-content > :last-child').css('margin-bottom', '0');
        $('.accordion section:not(.' + accordion_active_class + ') .accordion-content').hide(); 

        // Mysterious IE8 layout bug fix
        // http://stackoverflow.com/questions/3350441/dynamic-elements-are-not-appearing-in-ie8-until-there-is-a-mouse-click
        $('.accordion section').addClass('dummyclass').removeClass('dummyclass');

}); 
```

这是输出的 HTML：

```
<div class="accordion">
<section id="title1" class="">
<div class="accordion-section-title">Title 1</div>
<div class="accordion-content" style="display: none; opacity: 1;">
<p>This is some text.</p>
</div>
</section>

<section id="title2" class="">
<div class="accordion-section-title">Title 2</div>
<div class="accordion-content" style="display: none; opacity: 1;">
<p>This is some more text.</p>
</div>
</section>
</div> 
```

最后，这是我要触发下拉菜单的链接结构：

`<a href="#title1">Title 1 - trigger</a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:01:58.713

同一页面上的哈希链接不会在设计良好的浏览器上重新加载页面，并且通常不会触发任何事件（您可以使用 js 调试器检查这一点）。

我想你需要上钩`window.onhashchanged`。但是某些浏览器（Safaria 和 IE<8 IFRC）不支持此方法，因此您可能对[jquery hash changed plugin感兴趣](http://benalman.com/projects/jquery-hashchange-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:52:48.010

我让它工作我改变了JS如下：

```
jQuery(document).ready(function($) {

// ACCORDION

var accordion_active_class = 'accordion-active';
var sections = $('.accordion > section');   
var section_headings = $('.accordion > section .accordion-section-title');  

function scrollToSection(section) {

    $('html, body').animate({
        scrollTop: parseInt($(section).offset().top) - 10
    });

}

function openSection(section) {

    // if not already open
    if (!$(section).hasClass(accordion_active_class)) {

        // hide all section content
        $('.section-content', sections).hide();

        // show current section content
        $('.section-content', section).hide().fadeTo(500, 1); // fadeTo looks better than fadeIn in IE7

        // move active class to new active section
        sections.removeClass(accordion_active_class);
        $(section).addClass(accordion_active_class);

        // scroll there, because if a really big section was closed, things are still off
        scrollToSection(section);

    }

}   

section_headings.click(function() {

    var section = $(this).parent();

    // if clicked section is not active
    if (!$(section).hasClass(accordion_active_class)) {
        openSection(section);
    }

    // clicked section is active, collapse it
    else {

        // hide section content
        $('.section-content', sections).hide();

        // remove active class
        sections.removeClass(accordion_active_class);

    }

});

    // CSS fixes for IE7/8 which doesn't support :not or :last-child
    $('.accordion section  .section-content > p:last-child').css('margin-bottom', '0');
    $('.accordion section:not(.' + accordion_active_class + ') .section-content').hide(); 

    /* Scroll to and open section */
    $("a[data-rel^='openSection']").click(function(event) {

        // stop click action 
        event.preventDefault();

        /* which section? */
        var section = $($(this).attr('href'));

        /* open section */
        openSection(section);

        /* scroll to it */
        scrollToSection(section);

    });

// Scroll to section via hash tag
if(window.location.hash) {
    openSection(window.location.hash);
}

}); 
```

然后我添加了链接是这样的：

```
<a data-rel="openSection" href="#frequently-asked-questions">Frequently Asked Questions</a> 
```

# eclipse-plugin - 在 Eclipse 插件中使用 Xtext 代码

> ID：14206040
> 
> 赞同：1
> 
> 时间：2013-01-07T23:41:49.610
> 
> 标签：eclipse-plugin, osgi, xtext

我写了两个插件：

1- 基于 Xtext 2.3.1 的文本编辑器，由四个项目组成。第一个是源项目，第二个是UI，第三个是SDK，最后是测试。我知道如何将此项目导出为插件并在 Eclipse 4.2 (Juno) 中使用它。该编辑器适用于“myDSL”的扩展。

2- 从文件->菜单触发并创建扩展名为“myDSL”的文件的向导。

我想将这两个插件项目合二为一。我已阅读 Xtext 文档的以下部分：[Setup within Eclipse-Equinox (OSGi)](http://www.eclipse.org/Xtext/documentation.html#equinoxSetup)。不幸的是，我无法让它工作。首先，我不确定是否需要合并两个项目的文件，或者只是将 Xtext 项目添加为另一个项目的依赖项。无论哪种情况，我应该考虑哪个 Xtext 项目？主项目还是UI项目？（实际上，我不知道它们之间的确切区别）。其次，我不知道`<MyDsl>ExecutableExtensionFactory`应该用什么代替。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:07:47.687

要将 Xtext 项目和您的项目结合起来，您必须了解以下内容：

*   «mydsl».ui 项目包含所有 GUI（例如编辑器）和 Eclipse 特定（例如注册构建器）的东西；而 «mydsl» 项目（稍后：核心）基本上包含解析器 - 这可用于普通 Java 应用程序（Eclipse 环境之外）。这意味着，当您想要合并您的 Eclipse 向导代码时，您对 ui 项目感兴趣。
*   如果您将代码从 ui 项目移动到您的向导项目，那么还要更新核心项目中的 mwe 文件。它指的是生成的 ui 项目，并且在您更新语法以重新生成项目时是必需的。如果您将现有代码移动到 ui 项目，则不需要这样做。
*   最后，关于 ExtensionFactory：这是一种 Eclipse 机制，用于在使用 Eclipse 扩展机制实例化类时准备您的类。Xtext（或 Google Guice）的依赖注入魔法需要 «MyDSL»ExtensionFactory 才能工作。仅当您 (1) 定义扩展（例如 Eclipse 向导）*和*(2) 想要使用依赖注入在您的扩展中添加 Eclipse 服务时才需要使用它。
*   如果您需要它，并且合并您的 ui 和向导项目，您可以简单地重用 Xtext 生成的 ExtensionFactory，而无需进一步定制。

但是，如果您不想显式合并代码，只需将其打包在一起，您可以简单地在生成的 SDK 功能中引用您的向导项目，并简单地导出您已经声明的结果。这样，您的用户可以一起使用项目，而您可以分别维护代码的不同方面。

在这种情况下，如果您需要 Xtext 服务，请手动扩展 ExtensionFactory，并替换其中的捆绑包引用——否则您可以使用它...

# ruby-on-rails - 如何处理数组中的信息？

> ID：14206045
> 
> 赞同：0
> 
> 时间：2013-01-07T23:42:27.247
> 
> 标签：ruby-on-rails, ruby

我正在尝试学习 koala gem 以将 Facebook 与我的 Ruby on Rails 应用程序链接起来。我开始掌握它的窍门，但我遇到了一些严重的心理障碍！

```
def friends
  facebook.fql_query("SELECT uid,username, is_app_user, name, pic_square FROM user WHERE uid IN(SELECT uid2 FROM friend WHERE uid1 = me()) AND is_app_user=1");
rescue Koala::Facebook::APIError => e
  logger.info e.to_s
  nil
end 
```

所以，首先，我使用 FQL 来搜索用户的朋友。它返回用户的详细信息哈希，这些用户是 的朋友`current_user`、登录到应用程序的用户，并且也与我的应用程序连接。

```
def friends_realname
  names = friends.select {|f| f["is_app_user"] }.map {|f| f["name"]}
  names.each { |name| puts name}
end 
```

我正在选择上面的“用户的朋友也使用我的应用程序”的名称 - 并将它们映射到一个数组中。这将返回一个数组`["friend1's name", "friend2's name"]`：：

```
def friends_avatars
  @avatars = friends.select {|f| f["is_app_user"] }.map {|f| f["pic_square"]}
end 
```

我正在尝试做同样的事情，但返回相同用户的个人资料图片的 URL。它返回一个数组：

```
["http://www.example.com/example.jpg", "http://www.example2.com/example2.jpg"] 
```

我想格式化返回数组中的信息。所以，对于真实姓名，我不想返回实际的数组，而是返回一个姓名列表。而且，显然对于图像，而不是返回图像 url 数组，我实际上想将这些图像“放入”视图中。

我在想我需要遍历每个数组，然后使用该`each`方法对数组中的每个字符串执行某些操作，例如 puts `img_tag`?

这样的事情可能吗？：

```
def friends_avatars
  @avatars = friends.select {|f| f["is_app_user"] }.map {|f| f["pic_square"]}
  @avatars.each { |avatar| puts image_tag "#{avatar}}"}
end 
```

刚刚意识到这`image_tag`是一个辅助方法，所以我不能在那里使用它。

我也在视图文件中试过这个：

```
<% for url in @avatars do %>
  <%= puts "#{url}" %>
<% end %> 
```

返回：

```
undefined method `each' for nil:NilClass 
```

每当我尝试返回数组中的字符串时，它们只会返回一个数组。不太确定从这里去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:57:06.807

```
app_users = friends.select{ |f| f["is_app_user"] }
@names_and_pictures = app_users.map{ |f| [ f["name"], f["pic_square"] ] } 
```

这将创建一个二元素数组的数组，即

```
[ [ "Bob", "http://foo" ], [ "Jim", "http://bar" ] ] 
```

然后你可以并行迭代这些：

```
<% @names_and_pictures.each do |name,pic_url| %>
  <li><%=name%><img src="<%=pic_url%>"></li>
<% end %> 
```

请注意，您不要`puts`在视图中使用，因为此函数会将信息输出到控制台。相反，您只需`<%= ... %>`将 Ruby 代码强制为字符串值并将其注入输出中的适当位置。

* * *

您的原始代码很好（只要您将代码包装在命名良好的方法中），但做得太多了。

```
def friends_realname
  names = friends.select {|f| f["is_app_user"] }.map {|f| f["name"]}
  names.each { |name| puts name}
end 
```

这里不需要`puts`名字。该方法恰好返回正确的值，因为`each`返回刚刚迭代的项目。您的方法可以像以下一样有效地编写：

```
def friends_realname
  friends.select {|f| f["is_app_user"] }.map {|f| f["name"]}
end

def friends_avatars
  friends.select {|f| f["is_app_user"] }.map {|f| f["pic_square"]}
end 
```

如果您碰巧想保留这些方法，可以使用以下方法将两个数组合二为一`Array#zip`：

```
names   = friends_realname               # One flat array
avatars = friends_avatars                # Another flat array
@names_and_pictures = names.zip(avatars) # An array of two-element arrays 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:59:19.197

您对 map 的调用总是返回一个数组。所以当你这样做时：

```
@avatars = friends.select {|f| f["is_app_user"] }.map {|f| f["pic_square"]} 
```

你得到一个字符串数组。出于您的查看目的，您可以执行以下操作：

```
<% @avatars.each do |url| %>
  <%= puts "#{url}" %>
<% end %> 
```

希望有帮助

# ruby - Ruby 配置：替换开发环境的嵌套键值不起作用

> ID：14206046
> 
> 赞同：0
> 
> 时间：2013-01-07T23:42:31.207
> 
> 标签：ruby, configuration, configatron, settingslogic

案例：开发环境日志级别为DEBUG，生产环境日志级别为INFO。如果环境 == 开发，我想使用每个默认日志配置并仅覆盖级别。

问题：可以覆盖第一级配置，但不能覆盖子级别。

考虑示例代码：

```
#file: config.rb

default = Configuration.for('default'){
  log {
    file '/tmp/foo.log'
    level 'WARN'
    freq 'daily'
  }
}

development = Configuration.for( 'development', default) {
  log {
    level 'DEBUG'
  }
} 
```

在主文件中，我像这样使用上面的代码

```
# main.rb

require 'config.rb'    
$CONFIG = Configuration.for $DEV_ENV # either ('default' || 'development')
p $CONFIG.log.freq 
```

我收到一个方法丢失错误：

```
`undefined method `freq' for #<Configuration:0x00000003a65d80> (NoMethodError)` 
```

我唯一的（丑陋的）解决方案是将文件和频率值恢复为默认值，如下所示：

```
 log {
    file default.log.file
    level 'DEBUG'
    freq default.log.freq
  } 
```

哎呀！讨厌！

还有其他建议吗？我也尝试使用 SettingsLogic 和 Configatron 来实现类似的东西，但无济于事。这里有 Ruby 的三个顶级配置 gem。我需要自己做吗？？这真的是一个奇特的例子吗？

希望您的反馈或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-15T20:49:51.417

我能够使用 YAML 中的 SettingsLogic 和锚标签解决您的问题。

我的配置文件：

```
defaults: &defaults
  log: &logdefault
      file:  /tmp/foo.log
      level: WARN
      freq: daily

development:
  <<: *defaults
  log:
      <<: *logdefault
      level: DEBUG

test:
  <<: *defaults

production:
  <<: *defaults 
```

诀窍是将默认值存储在锚标签中并在您尝试重新定义它的一部分时重新使用它。每个级别都需要一个锚点。

您可以将其用作

```
require 'settingslogic'  #https://github.com/settingslogic/settingslogic
class SettingsDEV < Settingslogic
  source "./application.yml"
  namespace 'development'
end
p SettingsDEV.log #{"file"=>"/tmp/foo.log", "level"=>"DEBUG", "freq"=>"daily"}

class SettingsProd < Settingslogic
  source "./application.yml"
  namespace 'production'
end
p SettingsProd.log  #{"file"=>"/tmp/foo.log", "level"=>"WARN", "freq"=>"daily"} 
```

# java - 如何在 Java 中拆分字符串以供数学使用？

> ID：14206048
> 
> 赞同：1
> 
> 时间：2013-01-07T23:42:41.583
> 
> 标签：java, arrays, string, math, split

我最近问了一个类似的问题，但我需要更多帮助。

用户将能够输入一个字符串，例如：

```
"-5-1/-2" 
```

它需要：用 +,-,*,/,(,) 分隔，负数应该放在一起，在这种情况下 -5 和 -2 应该放在一起。

这是我目前拥有的：

```
String userStrWithoutSpaces=userStr.replaceAll(" ", "");
String[] tokens = userStrWithoutSpaces.split("(?<=[\\-+*/=()])|(?=[()\\-+*/=])"); 
```

除了将负数保持在一起之外，它还有效。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:49:17.177

尝试这个：

```
String[] tokens = userStrWithoutSpaces.split(
    "(?<=[+*/=()])|((?<=-)(?!\\d))|(?=[()\\-+*/=])"); 
```

当连字符后跟数字时，这使用前瞻来不拆分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:48:07.397

我会使用[JFlex](http://jflex.de/)。你需要一个词法分析器，一段代码，它会给你一些输入文本的标记。JFlex 是词法分析器的生成器。**非常快速和可靠的**分析仪。你只指定一个规则，形式类似于正则表达式，*非常方便*。所有的低级工作都由 JFlex 完成。图片展示了 JFlex 的想法：

![在此处输入图像描述](../Images/b35cb810b7350d7c6fdcf8c3b4301493.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:48:34.363

**获取Java中算术表达式的结果：**

[如何解析作为字符串给出的数学表达式并返回一个数字？](https://stackoverflow.com/questions/1432245/java-parse-a-mathematical-expression-given-as-a-string-and-return-a-number)

**在 java 中将其解析为它的数字和运算符组件：**

[用正则表达式拆分一个简单的数学表达式](https://stackoverflow.com/questions/3373885/splitting-a-simple-maths-expression-with-regex)

# image - wx.boxsizer 上的这张图片有什么问题

> ID：14206062
> 
> 赞同：0
> 
> 时间：2013-01-07T23:44:08.770
> 
> 标签：image, python-2.7, wxpython, boxsizer

想要一个 boxsizer，左边有一个图像（可能会改变），右边有一个标签。所以我创建了这段代码，但它有问题，但我不明白为什么。我是python新手，感谢理解。

```
self.hFooterStatusImage = 'img/tick.png'
self.jpg = wx.Image(self.hFooterStatusImage, wx.BITMAP_TYPE_PNG).ConvertToBitmap()
self.hFooterStatusLabel = wx.StaticText(self.hPanel, label = 'Ready')
self.hFooterBox = wx.BoxSizer(wx.HORIZONTAL)
self.hFooterBox.Add(self.jpg, 0, wx.ALL | wx.ALIGN_LEFT, 5)
self.hFooterBox.Add(self.hFooterStatusLabel, 0, wx.ALL | wx.ALIGN_LEFT, 5) 
```

但我有这个错误，

> 类型错误：wx.Window、wx.Sizer、wx.Size 或 (w,h) 项目预期错误：模块：musicOrganizer 无法导入（文件：/..../....py）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:43:00.177

这就是答案：

```
self.hFooterImagePanel = wx.Panel(self.hPanel, wx.ID_ANY)
self.hFooterImage = wx.StaticBitmap(self.hFooterImagePanel)
self.hFooterImage.SetBitmap(wx.Bitmap("img/tick.png"))
self.hFooterStatusLabel = wx.StaticText(self.hPanel, label = 'Ready')
self.hFooterBox = wx.BoxSizer(wx.HORIZONTAL)
self.hFooterBox.Add(self.hFooterImagePanel, 0, wx.ALL | wx.ALIGN_LEFT, 5)
self.hFooterBox.Add(self.hFooterStatusLabel, 0, wx.ALL | wx.ALIGN_LEFT, 5) 
```

# list - 拆分列表

> ID：14206063
> 
> 赞同：1
> 
> 时间：2013-01-07T23:44:09.300
> 
> 标签：list, split, tcl

如何拆分以下列表

```
\{ X.1.Agg-252 ethernet4/1 island ethernet10/1\} \{ X.1.Agg-252 ethernet4/2 island ethernet10/3\} \{ X.1.Agg-252 ethernet4/3 island ethernet10/5\} 
```

如下所示：

```
Element 1  - X.1.Agg-252 ethernet4/1 island ethernet10/1
Element 2 X.1.Agg-252 ethernet4/2 island ethernet10/3
Element 3 X.1.Agg-252 ethernet4/3 island ethernet10/5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:56:37.373

```
set a "\{ X.1.Agg-252 ethernet4/1 island ethernet10/1\} \{ X.1.Agg-252 ethernet4/2 island ethernet10/3\} \{ X.1.Agg-252 ethernet4/3 island ethernet10/5\}"
set y [split $a \{\}]
foreach w $y {puts $w} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:50:38.137

```
var splits = yourString.Replace("{", string.Empty).Split('}'); 
```

# ubuntu - 间歇性`错误：无法打开显示：localhost：10.0`与Vagrant

> ID：14206071
> 
> 赞同：0
> 
> 时间：2013-01-07T23:45:29.730
> 
> 标签：ubuntu, ssh, vagrant, xorg

我已经设置了一个带有 X 转发的 Vagrant VM。我正在使用以下命令连接到它（以提高 X 性能）：

```
ssh -c arcfour,blowfish-cbc -XC vagrant@VM-NAME 
```

这很好用；我登录到虚拟机，每当我启动一个 X Windows 应用程序时，它都会在我的本地 X 客户端中呈现。

但是，在使用大约 15 - 30 分钟后，我在启动 X Windows 应用程序时开始收到以下错误：

```
vagrant@VM-NAME:~/$ firefox
Error: cannot open display: localhost:10.0 
```

这种情况一直存在，直到我断开 SSH 连接并重新连接。奇怪的是，我已经启动的任何 X Windows 应用程序都可以正常运行。

无论我是否使用 tmux，都会发生错误。我的系统详细信息如下：

*主持人*

```
Mac OS X 10.7.5
VirtualBox 4.2.6 r82870 
```

*客户*

```
Ubuntu 12.04 (precise)
Kernel 3.2.0-35-generic (#55-Ubuntu SMP Wed Dec 5 17:42:16 UTC 2012)
Xorg 1.11.3 (29 August 2012  12:12:33AM) 
```

我已经在虚拟机上安装了完整的 ubuntu-desktop 包。

有想法该怎么解决这个吗？我发现大量关于 X 转发的文档和问题报告根本不起作用*，*但与最终失败无关。

注意：我已将我的 SSH 客户端和 XQuartz 升级到最新版本，但问题仍然存在。但是，如果我使用常规命令连接到 VM ，则不会发生*这种情况。*`vagrant ssh`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T05:31:23.333

也许你遇到了这个问题：

[为什么一段时间后 ssh X 转发超时？](https://superuser.com/questions/407218/why-does-ssh-x-forwarding-timeout-after-a-while)

使用 -Y 而不是 -X 来启用受信任的 x 客户端。安全问题应该是最小的，因为你在同一个盒子上运行 vagrant。

# amazon-web-services - 我应该为 Amazon CloudFront 内容使用什么 URL？

> ID：14206072
> 
> 赞同：8
> 
> 时间：2013-01-07T23:45:35.960
> 
> 标签：amazon-web-services, public, amazon-cloudfront

这也已发布在 AWS 论坛中。但它有点萎靡不振（我急于解决这个问题）。

**这个问题与“下载”分发有关，而不是“流媒体”。**

我最近注册并创建了一个 Amazon S3 存储桶，然后从该存储桶中创建了一个 Amazon CloudFront (CF) 分配。以下是相关信息：

```
Bucket Name: stella_media
Folder In Bucket: visia 
```

这会产生一个像这样的工作 URL（具有公共读取访问权限）：http: [//s3.amazonaws.com/stella_media/visia/720_125M_Zero_Dark_Thirty.mp4](http://s3.amazonaws.com/stella_media/visia/720_125M_Zero_Dark_Thirty.mp4)

因此，您会看到，如果您使用上面的 URL（并且您没有使用 Firefox），它会加载 MP4 视频。我存储桶中的所有媒体都设置为公开阅读。

**我的问题是通过 Cloudfront 访问相同的内容：**

我的 CF 分布具有以下属性：

```
Delivery Method: download
Distribution Status: deployed
Price Class: US & Europe
State: Enabled
Domain Name: d2322fq9z81lph.cloudfront.net 
```

但是，当我在该存储桶上设置 CF 分发时使用提供给我的 URL 时，我收到“noSuchKey”错误：[http ://d2322fq9z81lph.cloudfront.net/stella_media/visia/720_125M_Zero_Dark_Thirty.mp4](http://d2322fq9z81lph.cloudfront.net/stella_media/visia/720_125M_Zero_Dark_Thirty.mp4)

```
<Error>
    <Code>NoSuchKey</Code>
    <Message>The specified key does not exist.</Message>
    <Key>stella_media/visia/720_125M_Zero_Dark_Thirty.mp4</Key>
    <RequestId>5E2FA36884444757</RequestId>
    <HostId>
        HiphTLuv4P2tiJemBRNvIGsq8DRbSCMocdAvm4oto9NVnnKNHuDZWuFHz+xyCt6B
    </HostId>
</Error> 
```

所以......我应该使用什么 URL 来指向我的视频，**或者**是否有某种权限设置我忽略了以使我的 CF 分发中的内容公开？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-08T00:32:00.970

为了其他可能遇到此问题的人的利益，我已经弄清楚了。

显然 CloudFront URL's **DO NOT INCLUDE THE BUCKET NAME**。所以它会像这样播放：

**S3 URL** [http://s3.amazonaws.com/stella_media/visia/720_125M_Zero_Dark_Thirty.mp4](http://s3.amazonaws.com/stella_media/visia/720_125M_Zero_Dark_Thirty.mp4)

**CloudFront URL** [http://d2322fq9z81lph.cloudfront.net/visia/720_125M_Zero_Dark_Thirty.mp4](http://d2322fq9z81lph.cloudfront.net/visia/720_125M_Zero_Dark_Thirty.mp4)

希望这可以帮助其他人摆脱他们试图找出问题所在的想法。

# css - 列表分隔符中的 jQuery Mobile 按钮对齐

> ID：14206082
> 
> 赞同：0
> 
> 时间：2013-01-07T23:46:28.953
> 
> 标签：css, jquery-mobile

我正在开发一个 jQuery 移动应用程序，想知道是否有人可以帮助在列表分隔符内对齐按钮。这是我创建的 jsFiddle 的[链接](http://jsfiddle.net/nMR85/671/)，显示了文本旁边的按钮。我想知道是否可以将按钮向右对齐。我尝试在按钮周围添加一个样式为 的 div ，但这会像[这样](http://jsfiddle.net/nMR85/673/)`style="text-align: right;"`按下按钮，这是我不想要的。

有没有办法将文本和按钮保持在同一行，并且按钮向右对齐？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:18:37.130

你可以通过使用 2 列[布局网格](http://jquerymobile.com/demos/1.2.0/docs/content/content-grids.html)来做到这一点，请参阅[jsfiddle](http://jsfiddle.net/mrJrK/1/)

代码：

```
<div data-role="page" id="p1">
    <div  data-role="header"><h1>Header Page 1</h1></div>

    <div  data-role="content">
         <ul data-role="listview" data-inset="true" data-divider-theme="a">
           <li data-role="list-divider">
             <div class="ui-bar ui-grid-a">
               <div class="ui-block-a" style="margin-top:10px;">List Header</div>
               <div class="ui-block-b" style="text-align:right;"><a href="#" data-role="button" data-mini="true" data-icon="plus" data-inline="true" data-theme="a">Add</a></div>
             </div>
           </li>
           <li>List item 1</li>
      </ul>
    </div>

    <div  data-role="footer"><h4>Footer</h4></div>
</div> 
```

截图：
![在此处输入图像描述](../Images/d2991a28200523cdf679dda9a70682ec.png)

# java - JTable在按键上编辑

> ID：14206083
> 
> 赞同：1
> 
> 时间：2013-01-07T23:46:32.223
> 
> 标签：java, swing, jtable

我正在尝试以编程方式开始在`JTable`按键上编辑当前行的第三列。

我已经实现了一个`keyReleased()`包含此代码的 KeyListener

```
if (e.getKeyCode() == KeyEvent.VK_ENTER)
{
    myTab.changeSelection(myTab.getSelectedRow(), 2, true, false);
    myTab.editCellAt(myTab.getSelectedRow(), 2);
} 
```

当我释放输入时，单元格确实是可编辑的（我可以在最后输入），但没有插入符号。

当我用鼠标单击时，行为符合预期（我可以编辑并且存在 carret）。

另外，我注意到在 keyrelease 上，我的 celleditor 为空，而在 mouseclick 上它不为空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T00:31:59.137

避免`KeyListener`，当涉及到焦点和事件的调度顺序时，它是不可靠的（可能在您的侦听器之前使用它们的键，因此您永远不会收到通知）。

改用键[绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

```
InputMap im = table.getInputMap(JTable.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
ActionMap am = table.getActionMap();

KeyStroke enterKey = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0);

im.put(enterKey, "Action.enter");
am.put("Action.enter", new AbstractAction() {
    public void actionPerformed(ActionEvent evt) {
        table.changeSelection(table.getSelectedRow(), 2, false, false);
        if (!table.editCellAt(table.getSelectedRow(), 2)) {
            JOptionPane.showMessageDialog(table, "Failed to start cell editing");
        }
    }
}); 
```

我也怀疑这个`myTab.changeSelection(myTab.getSelectedRow(), 2, true, false);`电话。JavaDocs 基本上说...

> 切换：真，扩展：假。如果选择了指定的单元格，请取消选择它。如果未选择，请选择它。

这向我建议，如果当前选择了单元格，它将被取消选中。

**更新了工作示例**

```
public class TestTableEditor {

    public static void main(String[] args) {
        new TestTableEditor();
    }

    private JTable table;

    public TestTableEditor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                table = new JTable(new MyTableModel());
                InputMap im = table.getInputMap(JTable.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
                ActionMap am = table.getActionMap();

                KeyStroke enterKey = KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0);

                im.put(enterKey, "Action.enter");
                am.put("Action.enter", new AbstractAction() {
                    public void actionPerformed(ActionEvent evt) {
                        table.changeSelection(table.getSelectedRow(), 1, false, false);
                        if (!table.editCellAt(table.getSelectedRow(), 1)) {
                            JOptionPane.showMessageDialog(table, "Failed to start cell editing");
                        }
                    }
                });

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MyTableModel extends AbstractTableModel {

        @Override
        public int getRowCount() {
            return 1;
        }

        @Override
        public int getColumnCount() {
            return 3;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Object value = null;
            switch (columnIndex) {
                case 0:
                    value = "Can't edit";
                    break;
                case 1:
                    value = "Edit me";
                    break;
                case 2:
                    value = "Can't edit";
                    break;
            }
            return value;
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return columnIndex == 1;
        }
    }
} 
```

**更新**

在所有愚蠢，痛苦，难以找到的...

添加`table.setSurrendersFocusOnKeystroke(true);`到您的代码...

> 设置当由于 JTable 转发单元格的键盘事件而激活编辑器时，此 JTable 中的编辑器是否获得键盘焦点。默认情况下，此属性为 false，除非单击单元格，否则 JTable 将保留焦点。

# php - php中未定义的索引（给我通知）

> ID：14206088
> 
> 赞同：1
> 
> 时间：2013-01-07T23:46:55.880
> 
> 标签：php

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T23:48:39.620

```
if( isset( $_GET['go'] ) ){
 $go = $_GET['go'];
}else{
 $go = 8;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:55:34.797

John 发布了一个有用的解决方案和设置代码的好方法；但我也认为在修复该错误后，您可能会通过搜索由以下原因引起的错误目录来获得另一个错误：

```
if(is_file("page/$go.php")) include "page/$go.php"; 
```

更正将是：

```
if(is_file("page/" . $go . ".php")) include "page/" . $go . ".php"; // would go to page/32.php 
```

如果您不将变量与字符串分开，它将试图寻找错误的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:09:36.910

您需要`isset($_GET['go'])`在尝试访问它之前进行检查。下面的代码解决了这个问题。

```
<?php
if( isset($_GET['go']) && !empty($go) ) {
    $go = $_GET['go'];
    if(is_file("page/$go.php")) include "page/$go.php";
    else echo "<br />Nie ma takiej strony.";
}
else include "page/8.php"; 
```

# java - StringBuffer Hangman Game Null 异常错误

> ID：14206095
> 
> 赞同：-3
> 
> 时间：2013-01-07T23:47:45.087
> 
> 标签：java, nullpointerexception

我正在制作一个简单的游戏，其中一名玩家选择单词，而另一名玩家必须在任意次数的尝试中猜测该单词。

```
public class JavaHang 
```

{

```
//Data Members
private String secretWord;
private StringBuffer blankGuess;

//Constructor
public JavaHang(String s)
{
    secretWord = s;
    StringBuffer blankGuess = new StringBuffer( secretWord );
}
public void setBlankGuess()
{
    for(int i = 0;i<secretWord.length();i++)
    {
        blankGuess.setCharAt(i, '_');
    }
} 
```

我有更多的东西，但我相信我的错误的位置。我得到一个 NullPointerException。“Stringbuffer blankGuess”的值怎么会有空值呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T23:50:40.647

你得到了一个 NPE，因为你已经`blankGuess`在方法中第二次声明了，因此你正在隐藏/隐藏你认为你正在使用的那个（在类中声明为一个字段的那个）。

改变：

```
StringBuffer blankGuess = new StringBuffer( secretWord ); 
```

至：

```
blankGuess = new StringBuffer( secretWord ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T23:50:20.710

```
public JavaHang(String s)
{
    secretWord = s;
    StringBuffer blankGuess = new StringBuffer( secretWord );
} 
```

`blankGuess`是在构造函数中声明和初始化的局部变量，我很确定您使用的是未初始化的实例变量，并且调用**字符串缓冲区方法**会导致`NullpointerException`. 您只需初始化实例变量`blankGuess`，如下所示。

```
 public JavaHang(String s)
    {
        secretWord = s;
         blankGuess = new StringBuffer( secretWord );
    } 
```

# haskell - 为什么 GHC 这么难编译？

> ID：14206099
> 
> 赞同：1
> 
> 时间：2013-01-07T23:48:17.453
> 
> 标签：haskell, ghc

我正在尝试在 Solaris 上编译最新版本的 GHC（比如 7.4 或 7.6），使用 6.12.1 二进制文件进行编译。但是，我注意到 GHC 需要一个精确的 GCC 版本 4.1.2 来编译自己，以及许多其他[要求](http://hackage.haskell.org/trac/ghc/wiki/Building/Preparation/Solaris)。

为什么建设GHC的前提条件这么严格？Haskell 如此强大，我无法想象有多少纯 Haskell 无法编写，那么为什么 GHC 需要 C 编译器来编译自己呢？有没有可以只用 Haskell 编译器编译的 GHC 版本？请注意，我不需要它来生成高度优化的代码，即使只是让 GHCi 工作也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T00:21:17.280

GHC 的 Haskell 编译器本身是用 Haskell 编写的，因此您可以（并且必须）使用 Haskell 编译器对其进行编译。事实上，我相信您实际上需要 GHC 本身来编译它，但正如您所尝试的那样，您可能会发现引导过程为您完成了所有这些工作。

但是，还有一个运行时系统 (RTS)，它是用 C 编写的。要编译它，您需要一个 C 编译器。

# android - 使用 Android 和 MQTT 的动态通道

> ID：14206100
> 
> 赞同：2
> 
> 时间：2013-01-07T23:48:22.030
> 
> 标签：android, mqtt

我正在记录一个我感到困惑的主题。我在 Android 上使用 MQTT。我可以成功注册客户端并将消息发送到静态通道。我创建了两个频道，并为一个客户订阅了一个频道，另一个订阅了另一个频道。每个频道都会收到正确的消息。对此非常满意。

现在我正在尝试拥有动态频道，以了解每个客户端的 id 以及它正在使用的频道。我不明白该怎么做。当我向 mosquitto 代理“注册”客户端时，我可以订阅“假”频道（我知道如果该频道不存在，代理会创建该频道？）但是我怎么知道哪个客户端在听哪个频道？谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:55:53.590

只是为了澄清一点——MQTT 并没有任何静态或动态通道的概念。如果您发布或订阅某个主题，或者如果该主题存在保留消息，则该主题存在，否则不存在。

该协议没有提供任何方法来确定哪些客户端正在收听哪些主题。不过，您可以在应用程序级别实现这一点。可以使用此处描述的存在机制来检测客户端是否已连接：http: [//mqtt.org/wiki/doku.php/presence](http://mqtt.org/wiki/doku.php/presence)，您应该能够执行类似的操作来确定哪些客户端正在订阅哪些话题。

# ruby-on-rails - 如何以不同的主机名在本地托管资产？

> ID：14206111
> 
> 赞同：2
> 
> 时间：2013-01-07T23:49:06.843
> 
> 标签：ruby-on-rails, ruby, localhost, asset-pipeline, assets

我想从多个主机名测试我的资产，例如：`http://assets1.somehost.dev, http://assets2.somehost.dev`

我的资产配置来自`development.rb`

```
config.serve_static_assets = false
config.assets.compile = true
config.assets.digest = true
config.action_controller.asset_host = "http://assets%d.somehost.com"
config.assets.compress = false
config.assets.debug = false 
```

所以我想设置`config.action_controller.asset_host = "http://assets%d.somehost.dev"`

在本地进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:49:30.433

将以下行添加到您的主机文件中（我*认为*rails 默认只使用四个资产主机）：

```
127.0.0.1 http://assets1.somehost.dev http://assets2.somehost.dev http://assets3.somehost.dev http://assets4.somehost.dev 
```

维基百科根据您的平台列出了[在哪里可以找到主机文件的列表。](http://en.wikipedia.org/wiki/Hosts_%28file%29#Location_in_the_file_system)

# jsp - JSP在循环中动态包含页面

> ID：14206113
> 
> 赞同：0
> 
> 时间：2013-01-07T23:49:13.630
> 
> 标签：jsp, include, jstl

我尝试使用`out.println()`inside将页面包含在 JSP 中`<% ... %>`，但它没有成功包含。

我必须使用`<% ... %>`，因为一些限制，例如循环。有没有人知道这种或另一种成功包含页面的方法？我指出我的示例案例如下。

```
<%

 for (int i = 1; i < strVoCardList.length; i++) {

  String strUserID = strVoCardList[i][1];

  out.println("<jsp:include page='../include/include_Notification_Bar.jsp' >");

  out.println("<jsp:param name = 'strUserID' value = \""+strUserID+"'/>");

  out.println("<jsp:param name = 'strSubElementID' value = '"+i+3+"'/>");

  out.println("</jsp:include>");

 }

%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:21:50.473

我强烈建议您删除那些 scriptlet 和 JSP 标记，而改用 JSTL`<c:forEach>`和`<c:import>`标记。

这看起来像：

```
<c:forEach items="${strVoCardList}" var="strVoCard" varStatus="status">
    <c:import url="../include/include_Notification_Bar.jsp">
        <c:param name="strUserID" value="${strVoCard[1]}"/>
        <c:param name="strSubElementID" value="${status.count + 3}"/>
    </c:import>
</c:forEach> 
```

也可以看看：

*   [如何避免 JSP 中的 Java 代码](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

# ruby-on-rails - 规范化制表符空格

> ID：14206120
> 
> 赞同：0
> 
> 时间：2013-01-07T23:49:49.800
> 
> 标签：ruby-on-rails

我有一个项目，其中包含许多人贡献的代码，但没有适当的选项卡空间政策（我知道，大错特错。）

将所有制表符标准化为空格的最佳方法是什么？最好是某种脚本，可以一次通过命令行对所有文件执行此操作。

我知道[Ruby Beautifier](http://www.arachnoid.com/ruby/rubyBeautifier.html)，但我对 ERB 文件没有任何运气（它也不能在 1.9 上运行）。

提前致谢

**编辑**：忘了说我们使用 Mac OS X

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:55:17.440

有一个与 OS X 捆绑在一起的名为[tab2space](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/tab2space.1.html)的命令行实用程序，您可能会发现它很有用。它可能也可以在其他平台上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:56:24.767

我会说在 Notepad++ 中打开所有文件，并使用通常的替换对话框将“\t”替换为“”（或 4 个空格）。您必须选择左下角的“扩展”，然后按“替换所有打开的文档”。

# javascript - Ajax 调用问题

> ID：14206126
> 
> 赞同：0
> 
> 时间：2013-01-07T23:50:31.647
> 
> 标签：javascript, ajax, windows, macos

我正在做一个简单的 ajax 调用，它可以工作，但这里的问题是，当我在 MAC 上运行它时，它只能在 Safari 上运行，而当我在 Windows 7/8 上运行时，它只能在 IE 上运行，代码在这里

```
function check(){
    var xhr = new XMLHttpRequest();
    var url="http://asdev-nfl.dtvce.com/CMPService/service/AuthorizationObjectService?siteId=Android_Customer_01&userName=bsstest03@att.net&password=widget03&environment=prod";
    // var url="http://10.23.181.154:8080/CMPService/service/AuthorizationObjectService?siteId=Android_Customer_01&userName=bsstest03@att.net&password=widget03&environment=prod";
    xhr.open("POST",url,true);
    console.log("inside function 1");
    xhr.send();
    xhr.onreadystatechange = function(){
        console.log("I am Inside ajax");
        if(xhr.readyState==4 && xhr.status==200)
        {
            var resp = xhr.responseText;
            console.log(resp);
            alert("alerting response"+resp);
            document.getElementById("outPut").innerHTML=resp;
        }
        else{
            alert("there is a error"+xhr.readyStatus+"Ready Status "+xhr.status);
        }
    }; 
```

# javascript - createObjectURL 在 ie10 中不起作用

> ID：14206127
> 
> 赞同：0
> 
> 时间：2013-01-07T23:50:35.110
> 
> 标签：javascript

我正在从 indexedDB 读取 base64 编码文件，并尝试将其作为 blob url 链接。下面的代码在 Chrome 中运行良好，但是当我单击 ie10 中的链接时没有任何反应。我可以在链接的属性上看到 href 是 blob:66A3E18D-BAD6-44A4-A35A-75B3469E392B 这似乎是正确的。有人看到我做错了什么吗？

下载附件

```
 //convert the base64 encoded attachment string back into a binary array
            var binary = atob(attachment.data);
            var array = [];
            for(var i = 0; i < binary.length; i++) {
                array.push(binary.charCodeAt(i));
            }

            //create a blob from the binary array
            var myBlob=new Blob([new Uint8Array(array)], {type: attachment.content_type});

            //create a url hooked to the blob
            downloadURL = (window.webkitURL ? webkitURL : URL).createObjectURL(myBlob);

            //set the attachment link to the url
            $('#attachmentLink').attr("href", downloadURL);
            $("#attachmentLink").text(fileName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:14:54.987

弄清楚了。IE10 不想在新窗口中打开 blob url，正如我上面的代码试图做的那样。只有当我将 blob url 设置为 img 标签的 src 以显示我的文件时，我才能完成这项工作，幸运的是，无论如何这都是图像。

# ios - 从纵向更改为横向时在同一点滚动视图位置，反之亦然

> ID：14206136
> 
> 赞同：1
> 
> 时间：2013-01-07T23:51:23.610
> 
> 标签：ios, uiscrollview, landscape, fixed, portrait

我在 iOS6 中做我的项目。我现在只有一个 UIViewController。我有一个 UIScrollView。我有几个控件（文本字段、按钮、自定义视图..等）。所以我为纵向模式构建了该项目。现在我想移动它以适应横向和纵向。为此我有这个代码

```
- (NSUInteger)supportedInterfaceOrientations
{
return (UIInterfaceOrientationMaskAll);
}
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    self.scrollView.contentMode = UIViewContentModeTopRight;
self.scrollView.scrollEnabled = YES;
NSLog(@"the end point is %f",self.currentCGRectLocation.origin.y);
CGPoint scrollPoint = CGPointMake(0.0, (self.currentCGRectLocation.origin.y/500)*400);
[self.scrollView setContentOffset:scrollPoint animated:YES];

CGFloat scrollViewHeight = 0.0f;
for (UIView *view in self.scrollView.subviews)
{
    scrollViewHeight += view.frame.size.height;
}

CGSize newSize = CGSizeMake(100,scrollViewHeight);

[self.scrollView setContentSize:newSize];

self.view.userInteractionEnabled =YES;
self.scrollView.userInteractionEnabled = YES;
} 
```

在我看来DidLoad

```
 - (void)viewDidLoad
{
[self.scrollView setAutoresizingMask:UIViewAutoresizingFlexibleRightMargin];

} 
```

在我的 AppDelegate.m 文件中，我有

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
return (UIInterfaceOrientationMaskAll);
} 
```

我的问题是我将它从纵向移动到横向，然后所有控件都完美对齐，除了滚动视图。模拟器的宽度在纵向模式下为 900，在横向模式下为 1024。因此，即使在横向模式下，我的滚动视图的滚动宽度也为 900。即使我可以轻松上下移动，它就像卡在那里一样。我正在附上一个样机。滚动视图位于纵向（900）的末尾，几乎是横向（900）的 2/3。样机在这里：[http](http://dl.dropbox.com/u/40597849/mockup3.png) ://dl.dropbox.com/u/40597849/mockup3.png 。如果您需要更多信息，请询问。谢谢..

编辑：同样在 UIScrollView 的 MainStoryboard 上，我未选中“使用自动布局”复选框。如果我检查它，当我从纵向移动到横向时，我在末尾有滚动视图（如我所愿）。但是当我再次从横向移动到纵向时，屏幕会冻结。我不能上下移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:23:41.847

这两种方法被添加到我想从纵向移动到横向的 ViewController 中。对于滚动视图，我仍然保留未选中的“使用自动布局”复选框。

```
- (NSUInteger)supportedInterfaceOrientations
{
  return (UIInterfaceOrientationMaskAll);
}
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
[super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
if (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft
    ||  toInterfaceOrientation == UIInterfaceOrientationLandscapeRight)
{
    CGRect rect = self.view.frame;
    rect.size.width = self.view.frame.size.width+245;
    rect.size.height = self.view.frame.size.height+245;
    self.scrollView.frame = rect;
} 
```

}

这是在 AppDelegate.m 文件中添加的

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
return (UIInterfaceOrientationMaskAll);
} 
```

这对我有用。希望能帮助到你。

# mocha.js - 使用 --watch 时可以关闭 Mocha 的观看观看行为吗？

> ID：14206138
> 
> 赞同：0
> 
> 时间：2013-01-07T23:51:31.493
> 
> 标签：mocha.js

到目前为止我喜欢 Mocha，但是当我进行持续测试时我不喜欢这个：

```
 watching    
   watching    
   watching    
   watching    
   watching    
   watching
   [repeat many times] 
```

如果我有一段时间没有运行测试并且我想查看最后一个测试的输出它是滚动滚动滚动。它很快淹没了我的控制台缓冲区。我可以在不更改 mocha 源代码的情况下更改此行为吗？

编辑：这已被修复并被拉入主人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:04:46.043

根据[https://github.com/visionmedia/mocha/blob/master/bin/_mocha#L287-303](https://github.com/visionmedia/mocha/blob/master/bin/_mocha#L287-303)， mocha 命令为测试运行器提供了一个回调，该回调将一系列字符串打印到控制台，并且没有任何会影响该行为的命令行标志。

问题的根源似乎是动画的控制字符可能在您的终端中失败，因为它应该在开始时做一个漂亮的旋转符号，然后做一个字符返回（而不是换行）来重写该行每次打印后。

如果您真的在不修改 mocha 的源代码的情况下改变这种行为，您可以复制该`bin/_mocha`文件，然后将`play()`函数替换为适合您需要的函数。确保修复所有相对路径。

# java - 二叉搜索树插入问题 (Java)

> ID：14206143
> 
> 赞同：-2
> 
> 时间：2013-01-07T23:52:16.407
> 
> 标签：java, insert, binary-search-tree

所以我有一个从文件中读取国家记录的安装程序，我的目标是根据一个国家（例如美国）的 3 字符字母表示来制作索引。我需要使用 6 个并行数组。LeftChPtr，代码、DataRecPtr 和 RightChPtr 的 3 个字符数组。

这是在 DataRecPtr 中发送的方法 InsertCode 和数组中的 3 个字符。

插入所有数据后，它被保存到一个文件中，当我查看文件时，我可以说它是错误的，因为指针不正确。

请帮忙，我绝不要你为我写代码我只是没有看到问题。谢谢

```
N = 0
rootPtr = -1
parentI = 0;

    public void InsertCode(short ID, char[] cc)
            {
                drp = ID;
                short i;
                codeArray1[N] = cc[0];
                codeArray2[N] = cc[1];
                codeArray3[N] = cc[2];
                leftChPtr[N] = -1;
                rightChPtr[N] = -1;
                dataRecPtr[N] = drp;

                if (rootPtr == -1)   //special case - no nodes in BST yet
                    rootPtr = N;
                else //normal case 
                {
                    i = rootPtr;
                    String dataN = "";
                    dataN += codeArray1[N] + codeArray2[N] + codeArray1[N];

                    while (i != -1)
                    {   parentI = i;
                        String dataI = "";
                        dataI += codeArray1[i] + codeArray2[i] + codeArray3[i];

                        if (dataN.compareTo(dataI) < 0)
                        {
                            i = leftChPtr[i];
                            LorR = true;//L
                        }
                        else
                        {
                            i = rightChPtr[i];
                            LorR = false;//R
                        }
                    }                 
                    //i++;?????????????????

                if (LorR == true)
                    leftChPtr[parentI] = N;
                else 
                    rightChPtr[parentI] = N;
                }
                N++;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:56:45.377

应该声明除了 LorR 之外的插入方法有任何问题。可能您应该检查代码以保存到文件中。

# c++ - 如何为 C++11 设置我的 g++ 编译器？

> ID：14206146
> 
> 赞同：1
> 
> 时间：2013-01-07T23:52:43.630
> 
> 标签：c++, multithreading

我尝试了一个基本程序：

```
// ThreadExample.cpp
#include <string>
#include <iostream>
#include <thread>
using namespace std;

void task1(string msg)
{
    cout << "task1 says: " << msg;
}

int main()
{
    thread t1(task1, "Hello");
    t1.join();
} 
```

我实际上在stackoverflow上找到了一个，但我尝试使用以下方法编译它：

```
g++ -std=c++0x -pthread ThreadExample.cpp -o ThreadExample -lm 
```

但是，我不断收到未声明线程的错误。我有 Windows 版 MinGW GNU 的 4.7.1 版。有什么我可以改变的，所以我可以使用 C++11 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:24:41.290

还没有人为 Mingw贡献过`<thread>`, `<mutex>`etc 的实现，除非通过第三方 pthreads 实现将 Mingw 与（可选）Pthreads 支持一起使用。

[我在http://gcc.gnu.org/ml/libstdc++/2012-05/msg00020.html](http://gcc.gnu.org/ml/libstdc++/2012-05/msg00020.html)开始了一个线程，并提供了一些关于在 Windows 本机线程方面实现缺失功能的建议，但因为我没有 Windows机器，没有其他人自愿做任何事情，什么也没发生。我对自己实现它的兴趣几乎为零，因为我从来没有为 Windows 开发过，所以它对我毫无用处，我宁愿把有限的空闲时间花在实现我实际使用的东西上。如果有人想研究它，我很乐意为他们提供建议并审查他们的代码并帮助将其引入 GCC。

# android - 多张地图的最佳实践

> ID：14206147
> 
> 赞同：3
> 
> 时间：2013-01-07T23:52:55.803
> 
> 标签：android, google-maps-android-api-2

我正在尝试确定处理多张地图的最佳方式。我应该在单个地图中添加和删除东西还是在 2 个地图片段之间切换。理想情况下，我认为使用片段会更好，因为我可以轻松使用后退按钮。

当我尝试在 buttonclick 上显示（）和隐藏（）多个地图片段时，我的问题就出现了。使用 show()/hide() 不会更改地图。也许有人可以解释为什么会发生这种情况，这样我就可以更好地理解地图视图显示和隐藏的实际情况。有人对显示和隐藏地图片段有任何问题吗？

当我单击按钮时，地图视图不会改变，但除非我再次单击按钮，否则我会失去控制。看起来片段正在切换，但实际上并没有改变它的视图。我确信它可以使用 replace() 正常工作，但这违背了加载地图的目的。

```
package com.test.googletestmaps;
public class ControlFragment extends SherlockFragmentActivity implements
    OnClickListener {

private GoogleMap mMap;
private GoogleMap mMap2;
private SupportMapFragment gmap;
private SupportMapFragment gmap2;
private ImageButton button;
private int mapShown;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_control_fragment);
    gmap = ((SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map1));
    gmap2 = ((SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map2));

    if (savedInstanceState == null) {
        // First incarnation of this activity.
        gmap.setRetainInstance(true);
    } else {
        // Reincarnated activity. The obtained map is the same map instance
        // in the previous
        // activity life cycle. There is no need to reinitialize it.
        mMap = gmap.getMap();
    }
    if (savedInstanceState == null) {
        // First incarnation of this activity.
        gmap2.setRetainInstance(true);
    } else {
        // Reincarnated activity. The obtained map is the same map instance
        // in the previous
        // activity life cycle. There is no need to reinitialize it.
        mMap2 = gmap2.getMap();
    }
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.hide(gmap2);
    ft.commit();
    button = ((ImageButton) findViewById(R.id.cacbutton));
    button.setOnClickListener(this);
    button.setVisibility(View.VISIBLE);
    mapShown = 0;
    setUpMapIfNeeded();
}

@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the
    // map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map1)).getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap(0);
        }

    }
    if (mMap2 == null) {
        mMap2 = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map2)).getMap();

        if (mMap2 != null) {
            setUpMap(1);
        }
    }
}

private void setUpMap(int mapNumber) {
    switch (mapNumber) {
    case 0:
        mMap.getUiSettings().setZoomControlsEnabled(true);
        mMap.addMarker(new MarkerOptions().position(new LatLng(5, 5)).title("Marker for map1"));
        break;
    case 1:
        mMap2.getUiSettings().setZoomControlsEnabled(true);
        mMap2.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker for map2"));
        break;
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu with the options to show the Map and the ListView.
    getSupportMenuInflater()
            .inflate(R.menu.activity_control_fragment, menu);
    return true;
}

@Override
public void onClick(View v) {
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);
    if (mapShown == 0)
    {
        ft.hide(gmap);
        ft.show(gmap2);
        mapShown = 1;
    }
    else
    {
        ft.hide(gmap2);
        ft.show(gmap);
        mapShown = 0;

    }
    ft.addToBackStack(null);
    ft.commit();

}
} 
```

编辑：我找到[了这个](https://stackoverflow.com/questions/13833709/programmatically-set-google-map-fragment-visibility-api2)链接，它解释了如何显示和隐藏地图片段，我尝试过使用`getView().setVisibility()`，但我得到了相同的结果。

编辑：这显然不是一件容易解决的事情。我环顾四周，找不到解决方案。现在我将使用添加/删除来控制我的片段。

这仍然没有解决....我采取了不同的路线。显示/隐藏片段不适用于新谷歌地图片段的多个实例。我不确定为什么，如果有人找到此问题的解决方案或原因，请发布和分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T10:39:24.653

面对这个问题，在寻找解决方案后，我发现了一些有用的链接：

[使用 Maps API v2 以编程方式初始化 MapFragment](https://stackoverflow.com/questions/13733299/initialize-mapfragment-programmatically-with-maps-api-v2)

[操作栏选项卡中的多个地图片段](https://stackoverflow.com/questions/12569516/multiple-map-fragment-in-action-bar-tab)

[TabActivity 中的多个地图 v2](https://stackoverflow.com/questions/14585409/multiple-maps-v2-in-tabactivity)

[在一个应用程序中使用 2 个地图片段时出现问题](https://stackoverflow.com/questions/15383641/issue-while-using-2-map-fragments-in-one-application)

[ViewPager 中只有第一张地图显示有多个 SupportMapFragment](https://stackoverflow.com/questions/15519569/only-first-map-is-showing-with-multiple-supportmapfragment-in-viewpager?rq=1)

[多个 MapFragment 的性能（Android Map API v2）](https://stackoverflow.com/questions/13742061/performance-of-multiple-mapfragments-android-map-api-v2?rq=1)

但我决定以我的风格去做：

**如果片段属于相同的，`Activity`**这就是我在多个地图片段中导航的方式。如果`map fragments`属于不同的`Activity`（我的意思是`MapFragment`每个`Activity`），至少在我的情况下，这个问题是由 Android 操作系统管理的，所以我不应该做任何特别的事情。

```
 case 1:
                if(getActivity().getSupportFragmentManager().findFragmentById(R.id.map_fragment1) == null){

                    if(getActivity().getSupportFragmentManager().findFragmentById(R.id.map_fragment2) != null){
                        FragmentManager manager = getActivity().getSupportFragmentManager();
                        FragmentTransaction ft = manager.beginTransaction();
                        ft.remove(getActivity().getSupportFragmentManager().findFragmentById(R.id.map_fragment2));
                        ft.commit();
                    }

                    FragmentManager manager1 = getActivity().getSupportFragmentManager();
                    FragmentTransaction ft1 = manager1.beginTransaction();
                    ft1.replace(R.id.frame_mapView, new Map1Fragment());
                    ft1.commit();
                }

                break;

            case 3:

                if(getActivity().getSupportFragmentManager().findFragmentById(R.id.map_fragment2) == null){

                    if(getActivity().getSupportFragmentManager().findFragmentById(R.id.map_fragment1) != null){

                        FragmentManager manager = getActivity().getSupportFragmentManager();
                        FragmentTransaction ft = manager.beginTransaction();
                        ft.remove(getActivity().getSupportFragmentManager().findFragmentById(R.id.map_fragment1));
                        ft.commit();
                    }

                    FragmentManager manager1 = getActivity().getSupportFragmentManager();
                    FragmentTransaction ft1 = manager1.beginTransaction();
                    ft1.replace(R.id.frame_mapView, new Map2Fragment());
                    ft1.commit();
                }
         break; 
```

where`Map1Fragment`和`Map2Fragment`，它们中的每一个， `extends Fragment`并膨胀一个 XML 布局，其中包含一个

```
<fragment
        android:id="@+id/map_fragment1"
        class="com.google.android.gms.maps.SupportMapFragment"
        /> 
```

但你也可以扩展 just `SupportMapFragment`，这取决于你的需要。

# concurrency - 并发连接和“在家”托管网站

> ID：14206148
> 
> 赞同：0
> 
> 时间：2013-01-07T23:52:55.620
> 
> 标签：concurrency, hosting, connection

我已经搜索了一个关于这个主题的已经回答的问题，但我几乎找不到我想要的。

我的问题很简单直接：我有一个`.com`使用 wordpress 软件的域博客，目前托管在我国的一家公司。它目前仅支持 30 个并发连接。我对这些条款非常熟悉，但如果我网站上的流量会非常高，我正在考虑购买服务器并将其托管在家里，而不是获得更昂贵的托管计划。如果我这样做，我需要什么？例如：服务器 (PC) 将处理多少个并发连接？例如，每天 100 万次独立访问，您需要多少台强大的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:51:07.393

根据您的网站优化和缓存以及硬件要求，今天任何中等的 PC 都可以轻松处理 100 万次每日访问。

每天 100 万个请求 = 每秒约 11 个请求，假设 sql 优化不是很糟糕，这真的不算多。

我建议你开始在你拥有的硬件上托管网站，不管它是什么，并监控真实的统计数据，看看你自己可能需要什么样的硬件，这个实验会告诉你是否要优化更多与否，如果你需要一个快速的CPU，或者更多的内存。

从长远来看，您需要考虑一些重要的事情，例如电费和备份。

一些硬件要求草案：

1.  CPU：任意`Core i3 2xxx`或`Core i3 3xxx`更快。
2.  内存：这些天内存真的很便宜，8gb 或 16gb，我没有看到一个站点需要那么多，但是额外的内存将有助于硬盘 IO 读取缓存。
3.  存储：所有存储设备都需要在 RAID1 或任何其他提供一些冗余的 RAID 中，加上一些每日/每周备份，.. 考虑从享有 5 年保修的知名品牌（英特尔或三星）购买 SSD。
4.  备用电源：获取 UPS

这些可能是一种矫枉过正（取决于您将拥有的优化量），但它们应该为您提供一个不错且相对快速的服务器。

# mysql - phpMyAdmin: #1064 - 创建新表时的 SQL 语法

> ID：14206151
> 
> 赞同：0
> 
> 时间：2013-01-07T23:53:24.230
> 
> 标签：mysql

我想使用 phpMyAdmin 内置功能在我的数据库中构建一个新表，但是在我完成所有字段并点击 Go 之后 - 发生此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ') NOT NULL, `data` DATETIME NOT NULL , `link_picture` VARCHAR( 250 ) NOT NULL , ' at line 6 
```

..我不知道为什么。

这是SQL代码：

```
 CREATE TABLE  `prod`.`info_prod` (
 `id` INT( 100 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,
 `prod_name` VARCHAR( 250 ) NOT NULL ,
 `link_prod` VARCHAR( 250 ) NOT NULL ,
 `pd` VARCHAR( 10 ) NOT NULL ,
 `price` DOUBLE( 250 ) NOT NULL ,
 `data` DATETIME NOT NULL ,
 `link_picture` VARCHAR( 250 ) NOT NULL ,
 `link_picture2` VARCHAR( 250 ) NOT NULL ,
INDEX (  `pd` ) ,
UNIQUE (
 `prod_name`
)
) ENGINE = INNODB; 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T23:55:16.723

似乎这只是语法。

```
 `price` DOUBLE( 250,0 ) NOT NULL 
```

[参考](http://dev.mysql.com/doc/refman/5.6/en/fixed-point-types.html)

# r - 如何使用按列组织的样本在 R 中执行单因素方差分析？

> ID：14206154
> 
> 赞同：7
> 
> 时间：2013-01-07T23:53:50.143
> 
> 标签：r, anova

我有一个数据集，其中样本按列分组。以下示例数据集类似于我的数据格式：

```
a = c(1,3,4,6,8)
b = c(3,6,8,3,6)
c = c(2,1,4,3,6)
d = c(2,2,3,3,4)

mydata = data.frame(cbind(a,b,c,d)) 
```

当我使用上述数据集在 Excel 中执行单因素方差分析时，我得到以下结果：

![在此处输入图像描述](../Images/6d2610c7388d1714f6c5a04681c863aa.png)

我知道 R 中的典型格式如下：

```
group  measurement
a      1
a      3
a      4
.      .
.      .
.      .
d      4 
```

在 R 中执行 ANOVA 的命令是使用`aov(group~measurement, data = mydata)`. **如何使用按列而不是按行组织的样本在 R 中执行单因素方差分析？** 换句话说，如何使用 R 复制 excel 结果？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T23:59:33.690

您以长格式堆叠它们：

```
mdat <- stack(mydata)
mdat
   values ind
1       1   a
2       3   a
3       4   a
4       6   a
5       8   a
6       3   b
7       6   b
snipped output

> aov( values ~ ind, mdat)
Call:
   aov(formula = values ~ ind, data = mdat)

Terms:
                 ind Residuals
Sum of Squares  18.2      65.6
Deg. of Freedom    3        16

Residual standard error: 2.024846 
Estimated effects may be unbalanced 
```

鉴于警告，使用它可能更安全`lm`：

```
> anova(lm(values ~ ind, mdat))
Analysis of Variance Table

Response: values
          Df Sum Sq Mean Sq F value Pr(>F)
ind        3   18.2  6.0667  1.4797 0.2578
Residuals 16   65.6  4.1000               
> summary(lm(values~ind, mdat))

Call:
lm(formula = values ~ ind, data = mdat)

Residuals:
   Min     1Q Median     3Q    Max 
 -3.40  -1.25   0.00   0.90   3.60 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)   4.4000     0.9055   4.859 0.000174 ***
indb          0.8000     1.2806   0.625 0.540978    
indc         -1.2000     1.2806  -0.937 0.362666    
indd         -1.6000     1.2806  -1.249 0.229491    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 2.025 on 16 degrees of freedom
Multiple R-squared: 0.2172, Adjusted R-squared: 0.07041 
F-statistic:  1.48 on 3 and 16 DF,  p-value: 0.2578 
```

请不要问我为什么 Excel 给出不同的答案。在统计数据方面，Excel 通常被证明是非常不可靠的。Excel 有责任解释为什么它不能提供与 R 相媲美的答案。

针对评论进行编辑：Excel 数据分析包 ANOVA 过程创建输出，但它不使用 Excel 函数进行该过程，因此当您更改派生数据单元格中的数据时，然后按 F9，或等价的菜单重新计算命令，输出部分不会有任何变化。用户和数值问题的这个和其他来源都记录在 David Heiser 评估 Excel 统计计算问题的各个页面中：[http ://www.daheiser.info/excel/frontpage.html](http://www.daheiser.info/excel/frontpage.html)Heiser 开始了他现在至少十年之久的努力，期望微软会对这些错误负责，但他们一直忽视他和其他人在识别错误​​和建议更好的程序方面所做的努力。[在 BD McCullough 编辑的2008 年 6 月号“Computational Statistics & Data Analysis”](http://www.sciencedirect.com/science/journal/01679473/52/10)中还有一个 6 节的特别报告，涵盖了 Excel 的各种统计问题。

# opencv - 构建 OpenCV 2.4.x 时出错“未定义对 av_opt_set@LIBAVUTIL_51 的引用”

> ID：14206156
> 
> 赞同：2
> 
> 时间：2013-01-07T23:54:00.123
> 
> 标签：opencv, build, undefined

我已经尝试构建 2.4 的所有版本，当“链接 CXX 可执行文件 ../../bin/opencv_test_core”时它们都失败了：

```
/usr/local/lib/libavcodec.so.54: undefined reference to `av_opt_set@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_strcasecmp@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_bprint_finalize@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_timecode_make_smpte_tc_string@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_timecode_make_string@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_realloc_f@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_timecode_get_smpte_from_framenum@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_timecode_init@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_samples_set_silence@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_calloc@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_opt_get@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_strncasecmp@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_samples_fill_arrays@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_get_media_type_string@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_dynarray_add@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_bprint_init@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_asprintf@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_sample_fmt_is_planar@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_samples_get_buffer_size@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_opt_get_int@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_timecode_make_mpeg_tc_string@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_rescale_q_rnd@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_bprintf@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_samples_copy@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_get_default_channel_layout@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_timecode_init_from_string@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_bprint_chars@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_des_mac@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_timecode_adjust_ntsc_framenum@LIBAVUTIL_51'
/usr/local/lib/libavformat.so.54: undefined reference to `av_timegm@LIBAVUTIL_51'
/usr/local/lib/libavcodec.so.54: undefined reference to `av_tempfile@LIBAVUTIL_51' 
```

我的 CMakeLists.txt 文件是默认文件，但我将其更改为使用 TBB、禁用文档并打开详细模式。

做 ldd /usr/local/lib/libavcodec.so.54 我得到：

```
root@omap4-multi:~/opencv/2.4.3/build# ldd /usr/local/lib/libavcodec.so.54
    libavutil.so.51 => /usr/local/lib/libavutil.so.51 (0xb6132000)
    libx264.so.123 => /usr/local/lib/libx264.so.123 (0xb5fc4000)
    libvorbisenc.so.2 => /usr/local/lib/libvorbisenc.so.2 (0xb5e4a000)
    libvorbis.so.0 => /usr/local/lib/libvorbis.so.0 (0xb5e14000)
    libtheoraenc.so.1 => /usr/local/lib/libtheoraenc.so.1 (0xb5dcc000)
    libtheoradec.so.1 => /usr/local/lib/libtheoradec.so.1 (0xb5dac000)
    libopencore-amrwb.so.0 => /usr/local/lib/libopencore-amrwb.so.0 (0xb5d93000)
    libopencore-amrnb.so.0 => /usr/local/lib/libopencore-amrnb.so.0 (0xb5d67000)
    libmp3lame.so.0 => /usr/local/lib/libmp3lame.so.0 (0xb5cdd000)
    libfaac.so.0 => /usr/local/lib/libfaac.so.0 (0xb5cc1000)
    libm.so.6 => /lib/libm.so.6 (0xb5c44000)
    libz.so.1 => /usr/lib/libz.so.1 (0xb5c29000)
    libgcc_s.so.1 => /usr/local/lib/libgcc_s.so.1 (0xb5c02000)
    libpthread.so.0 => /lib/libpthread.so.0 (0xb5be3000)
    libc.so.6 => /lib/libc.so.6 (0xb5ab8000)
    libogg.so.0 => /usr/local/lib/libogg.so.0 (0xb5aac000)
    /lib/ld-linux.so.3 (0x42228000) 
```

任何人都知道可能导致它的原因，或者我可以做些什么来解决它？我已经为此工作了很长一段时间，并且不知所措。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T05:36:09.947

我有一个类似的问题，但如果你升级了 ffmpeg 的一个或多个依赖项，这是 ffmpeg 的问题。ffmpeg 需要重新编译或更新其所有依赖项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T08:44:35.953

我也有这个问题。即使我重新编译ffmpeg，问题仍然存在。最后，我意识到从源代码安装的ffmpeg与安装的lib之间存在冲突`apt-get`，我的意思是`libavutil-dev`，`libavutil-extra-51`。简单地删除 ffmpeg using`apt-get remove ffmpeg`并不能解决这个问题。我的解决方案是删除安装的冲突库`apt`，如下所示：

```
sudo apt-get remove libavutil-dev libavutil-extra-51 
```

希望对你有用。

# php - Htaccess，目录样式不重写为查询样式

> ID：14206157
> 
> 赞同：0
> 
> 时间：2013-01-07T23:54:01.403
> 
> 标签：php, html, linux, apache, .htaccess

我有一个非常基本的 htaccess，试图将目录样式转换为查询样式。IE

```
a. /public_html/main/folder1/folder2     ... etc
b. /public_html/main.php?1=folder1&1=folder2 
```

无论我尝试什么正则表达式，无论我尝试什么重写规则 - 我都无法在这个问题上取得任何进展。

我已经在网上搜索过很多次了。我尝试了其他论坛中的 10 种不同的“推荐”解决方案。

我不知道还能去哪里看。这是我当前的 htaccess：

```
Options +FollowSymLinks  
RewriteEngine On 
RewriteRule ^public_html/([A-Za-z0-9]+)/([0-9]+)/?$ main.php?name=$1&page=$2 [NC] 
```

这是我的 httpd.conf Htaccess 指令。

```
(Directory "/Users/admin/Sites")
  Options Indexes FollowSymLinks MultiViews
  AllowOverride All
  Order allow,deny
  Allow from all
(/Directory)
(Directory "/Users/admin/Sites/MFCS/V3/public_html/mfcs/public_html")
    AllowOverride  All
(/Directory) 
```

我在这个例子的目录标签上替换了大于/小于。

httpd.conf 中确实有适当的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:12:11.680

试试这个：

```
Options +FollowSymLinks  
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^/main/(.*)/(.*)/?$ /main.php?name=$1&page=$2 [L] 
```

这会将请求重定向到：

```
http://www.example.com/main/folder1/folder2 
```

至：

```
http://www.example.com/main.php?name=folder1&page=folder2 
```

如果这不是您寻找的结果，请在前后提供样品。另一方面，您是否确保启用`mod_rewrite`？我还`public_html`从 URI 中删除了 ，因为它通常对公众**不可见。**

# php - 微时间的十进制长度（真）？

> ID：14206159
> 
> 赞同：11
> 
> 时间：2013-01-07T23:54:29.260
> 
> 标签：php, mysql, decimal, maxlength, microtime

我想将 PHP 的 microtime 作为我的时间戳存储在 MySQL 中。

[有人告诉](https://stackoverflow.com/a/8092029/1382306)我最好将它存放在 中`DECIMAL`，但我找不到理想的尺寸。

有谁知道`microtime(true)`返回的最大大小，所以我可以把它作为我的数据类型长度？

我应该选择可变`DECIMAL`长度吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T01:31:32.960

tl;博士。使用 microtime(false) 并将结果以百万分之一秒的形式存储在 MySQL bigint 中。否则你必须学习浮点运算，这是一个大毛球。

PHP microtime 函数从一个系统调用中获取 Unix 时间戳（当前约为十六进制 50eb7c00 或十进制 1,357,609,984），并从另一个系统调用中获取微秒时间。然后它把它们变成一个字符串。然后，如果你用 (true) 调用它，它会将该数字转换为 64 位 IEEE 745 浮点数，PHP 称之为`float`.

到今天为止，您需要小数点左侧的十位小数位来存储整数 UNIX 时间戳。直到大约公元 2280 年，你的后代将开始需要 11 位数字时，这种情况才会发生。您需要小数点右侧的六位数字来存储微秒。

您不会获得总微秒精度。大多数系统将其亚秒级系统时钟的分辨率保持在 1-33 毫秒的范围内。它取决于系统。

MySQL 5.6.4 及更高版本允许您指定`DATETIME(6)`列，这些列将日期和时间保存到微秒分辨率。如果您使用的是这样的 MySQL 版本，那绝对是正确的选择。

在 5.6.4 版本之前，您需要使用 MySQL `DOUBLE` （IEEE 754 64 位浮点）来存储这些数字。MySQL `FLOAT`（IEEE 754 32 位浮点）的尾数中没有足够的位来完全准确地以秒为单位存储当前的 UNIX 时间。

为什么要存储这些时间戳？你希望做

```
 WHERE table.timestamp = 1357609984.100000 
```

或类似的查询来查找特定项目？如果您在处理链中的任何位置使用浮点数或双精度数（也就是说，即使您使用`microtime(true)`过一次），这将充满危险。他们臭名昭著，即使你认为他们应该平等。相反，您需要使用类似的东西。在数值加工贸易中称为“ `0.001`epsilon”。

```
 WHERE table.timestamp BETWEEN 1357609984.100000 - 0.001
                            AND 1357609984.100000 + 0.001 
```

或类似的东西。如果将这些时间戳以小数或百万分之一秒的形式存储在`bigint`列中，则不会出现此问题。

IEEE 64 位浮点具有 53 位尾数——精度。当前的 UNIX 纪元时间戳（自 1970 年 1 月 1 日 00:00Z 以来的秒数）乘以一百万使用 51 位。因此，如果我们关心低位，则 DOUBLE 没有太多额外的精度。另一方面，精度不会用完几个世纪。

使用 int64(BIGINT)，您的精度还远远不够。如果我实际上只是为了在 MySQL 中对它们进行排序而存储微秒时间戳，我会选择这样做，`DATETIME(6)`因为我会免费获得很多日期算术。如果我正在做一个内存大容量应用程序，我会使用 int64。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:02:15.913

这取决于您需要的精度。如果毫秒对您来说足够了，并且您不希望任何大于 999999 秒的运行时可以使用`DECIMAL(10,4)`. 您可以通过这种方式满足您的需求。

关于理论上的最大值，它受`float`系统上 a 的大小（32 位、64 位）的限制。有关详细信息，请参阅[PHP 浮点数](http://php.net/manual/en/language.types.float.php)。但正如我所说，这是理论上的。没有计时器会给你那个精确的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T01:50:32.167

在 MySQL 5.6.4 及更高版本中，[本机`DATETIME`和`TIMESTAMP`类型可以支持小数秒](http://dev.mysql.com/doc/refman/5.6/en/fractional-seconds.html)。因此，您可以将具有微秒分辨率的时间戳存储在一列`DATETIME(6)`或一`TIMESTAMP(6)`列中。

要将 PHP[`microtime()`](http://php.net/microtime)返回值转换为 MySQL 日期时间格式，您可以使用 MySQL[`FROM_UNIXTIME()`](https://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_from-unixtime)函数，或者，如果您使用的是 PHP DateTime 类，则可以使用[`DateTime::format()`](http://php.net/manual/en/datetime.format.php). 请注意，PHP[`date()`](http://php.net/date)函数当前*不*支持微秒时间戳。（它确实有一个微秒的格式代码`u`，但它总是将它映射到`000000`。）

对于不能以原生日期时间类型存储微秒的旧 MySQL 版本，您应该使用`DOUBLE`, `BIGINT`（以微秒表示的值，即乘以 1,000,000）或`DECIMAL(16,6)`（这应该足够几百年了）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T23:57:47.357

你为什么不把它存储为一个`float`？这就是`microtime(true)`回报，所以它是最好的候选人。

# objective-c - 从不同的视图控制器访问属性

> ID：14206160
> 
> 赞同：0
> 
> 时间：2013-01-07T23:54:39.300
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller

我在我的一个视图控制器中有一个这样声明的属性：

```
@property (nonatomic, 保留) MPMusicPlayerController *musicPlayer;
```

如何从其他视图控制器访问此属性？请记住，我使用的是故事板，而不是以编程方式加载视图。

我对此有点陌生……谢谢。

**细节**

我的根视图控制器中嵌入了一个 TableViewController，其中包含该属性。然后我有另一个从根视图控制器推送的视图控制器。推送此视图时，我希望调用 [musicPlayer play]，但现在它无法识别 musicPlayer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:02:50.887

一种方法是您可以将视图控制器#import 到其他视图控制器中并以这种方式访问​​属性。对于情节提要，您可以`prepareForSegue:`在父视图和子视图之间使用控制器的方法。在子视图中尝试类似`childView *child = (childView *)segue.destinationViewController;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:07:50.393

您需要使用其他控制器的 musicPlayer 属性获取对视图控制器的引用。你如何得到它取决于两个控制器是如何相关的。一个呈现另一个？一个推到另一个？一个是另一个的孩子吗？这些不同的关系需要不同的方式来访问其他控制器。您需要提供有关您的应用程序结构的更多信息，以便我更全面地回答。

**编辑后：**

实现 prepareForSegue 以便您可以将信息传递给您呈现的视图控制器：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    TriggerViewController *dvc = (TriggerViewController *)segue.destinationViewController;
    dvc.tableViewReference = segue.sourceViewController.childViewControllers[0]
} 
```

这里 tableViewReference 是您尝试访问 musicPlayer 的控制器中的一个属性（tableViewReference 应该属于 TriggerViewController 类）。然后，在该课程中，您可以像这样调用 play ：

[tableViewReference.musicPlayer 播放];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:41:21.020

然后，您不必从根视图控制器访问 musicPlayer 属性，而是从表视图控制器访问。所以它会是这样的：

```
[rootViewController.containerView.tableViewController.musicPlayer play]; 
```

# java - 是否可以在 Java 中调用 DATE_ADD() 并将值存储在临时日期变量中？

> ID：14206162
> 
> 赞同：0
> 
> 时间：2013-01-07T23:54:51.763
> 
> 标签：java, mysql, date

`Date`我对在 MySQL 数据库中添加天数有疑问。以下是我的代码：

```
res=stat.executeQuery("select st_date from tmp1 where st_date = '"+t1.getText()+"'");
while(res.next())
{
    System.out.println(res.getDate(1));
    int i=0;
    while(i<14)
    {
        statement.executeUpdate("Insert into datetab values(DATE_ADD('"
            +res.getDate("st_date")+"',INTERVAL 1 DAY),'"+tempname+"')");
        i=i+1;
    }
} 
```

表中的所有更新都`datetab`发生了，但是有一个问题。我将用一个例子来解释这个问题。如果 tmp1 表中的日期是 28-12-2000，那么在使用 执行插入查询后`date_add()`，会发生 13 个新插入，但所有这些插入都是“29-12-2000”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:11:54.710

> 如果 tmp1 表中的日期是 28-12-2000 那么在使用 date_add() 执行插入查询后，会发生 13 个新插入，但所有这些插入都是“29-12-2000”。

因为这正是你所要求的。您的插入语句是：

```
"Insert into datetab values(DATE_ADD('" + res.getDate("st_date") + 
    "',INTERVAL 1 DAY),'" + tempname + "')" 
```

由于`read.getDate`在循环中没有变化，因此每次交互都会插入相同的值。

而不是`"Interval 1 DAY"`， use`"Interval " + i + " Day"`应该插入不同的日子。那是你要找的吗？

# asp.net - 将 Visual Studio 开发网站推送到 Internet

> ID：14206163
> 
> 赞同：0
> 
> 时间：2013-01-07T23:54:54.993
> 
> 标签：asp.net, visual-studio

我正在尝试将我的视觉工作室开发网站推送到互联网上，以便我的老板查看一些工作。我过去使用过 No-IP.org 并且没有任何问题，但我似乎无法让它工作。我打开了路由器上的端口，但无济于事。

有没有其他方法可以通过较小的配置来完成这项任务？

干杯。

# grails - 忽略每种搜索方法中的“非活动”条目

> ID：14206165
> 
> 赞同：0
> 
> 时间：2013-01-07T23:55:02.963
> 
> 标签：grails, grails-orm

我以只读方式使用旧数据库。如果用户处于活动状态，我有一个包含标志的用户域。有没有办法在调用 findAll 等搜索方法时始终忽略不活动的用户而不将它们从数据库中删除，或者特别是在每个搜索查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:07:45.787

你有两个选择。添加一个[Hibernate Filter](http://grails.org/plugin/hibernate-filter)这是您最透明的选项，或者添加一个命名查询，例如

```
static namedQueries = {
    active {
        ne 'inactive', true
    }
} 
```

这将允许你做

```
User.active.findAllBy...() 
```

# django - Django：有没有办法让 django 处理 502 错误，类似于它处理 404 和 500 错误的方式？

> ID：14206169
> 
> 赞同：1
> 
> 时间：2013-01-07T23:55:16.667
> 
> 标签：django, django-templates, django-views

所以我为错误 404 和 500 创建了一些自定义错误页面，使用

*   处理程序404
*   处理程序500

已添加到我的 urls.py 中，它们工作正常。但是我还想知道是否有解决方案可以让我重定向到自定义错误页面以处理 502 Bad Gateway 错误。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:45:23.463

如果您使用的是 Nginx，它将始终提供它自己的 502 页面。这是我的经验。这是一个有用的链接 - [http://www.ruby-forum.com/topic/189334](http://www.ruby-forum.com/topic/189334)。我知道它在 Ruby 论坛上，但它适用于任何 Nginx conf。

# javascript - 如何将 setTimeout() 与 Backbone 一起使用？

> ID：14206172
> 
> 赞同：3
> 
> 时间：2013-01-07T23:55:44.697
> 
> 标签：javascript, jquery, json, backbone.js

如何在 Backbone 模型中使用 setTimeout()？我有下一个代码：

```
var ContentModel = Backbone.Model.extend({
URL: "http://localhost/example.php",    
requestType: "POST",
dataType: "json",
data: "", //Set the value outside the model

startSend: function (Data) { 
           //
},
reply: function (Data) { 
    var dataJson = eval(Data);              
    console.log(dataJson);
    setTimeout(this.ajaxRequest(),4000);
},
problems: function (Data) { 
    //
},
ajaxRequest: function () {
    $.ajax({
        async:true,
        type: this.requestType,
        dataType: this.dataType, 
        url: this.URL,
        data: this.data,
        beforeSend:this.startSend,
        success: this.reply,
        timeout:4000,
        error:this.problems 
    });

} 
```

});

或者我试过：

```
setTimeout(function(){
               //ajax code
               },4000); 
```

但结果是一样的。setTimeout() 不起作用。该请求只运行一次。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-08T00:09:30.803

有几件事不对劲。首先，这一行：

```
setTimeout(this.ajaxRequest(),4000); 
```

应该：

```
setTimeout(this.ajaxRequest, 4000); 
```

第一行代码执行 ajaxRequest 函数并将结果（即`undefined`）传递给 setTimeout。这意味着该`ajaxRequest`函数将执行一次，但太快了。后一行做你想做的事，就是将函数*本身*传递给 setTimeout，并`ajaxRequest`在 4 秒后调用。

但这还不够。`ajaxRequest`执行函数时，`this`上下文的值不正确。当您调用 setTimeout 时，回调的上下文设置为`window`. `console.log(this)`您可以在回调函数中验证这一点。

要修复它，您需要**绑定**函数的上下文。由于您使用的是 Backbone，因此您还已经加载了 underscore.js。使用[_.bind 应该](http://underscorejs.org/#bind)这样做：

```
setTimeout(_.bind(this.ajaxRequest, this), 4000); 
```

**编辑**：

仔细想想，可能还有其他问题。当 ajax 调用成功或失败时，`reply`or`problems`函数可能会遭受与`ajaxRequest`之前相同的上下文丢失。但如果有，它很容易修复。

除了调用`_.bind`这些，最简单的方法是在 Backbone 模型构造函数中调用[_.bindAll](http://underscorejs.org/#bindAll)。

```
initialize: function() {
  _.bindAll(this, 'ajaxRequest', 'reply', 'problems');
} 
```

当您调用 时`_.bindAll`，下划线保证每次调用模型中列出的任何方法时，`this`上下文变量都会指向模型本身，除非特别绑定到其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:57:44.097

你不需要做任何特别的事情来使用`setTimeout`主干。检查函数`this`中的范围。`reply`我猜这`this.ajaxRequest()`不在范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:57:58.730

你必须`setInverval`改用。

```
setInterval(this.ajaxRequest, 4000); 
```

`setTimeout`触发一次函数。

`setInterval``n`每毫秒触发一次。

```
var interval = setInterval(this.ajaxRequest, 4000); 
```

`clearInterval`用来清除`setInterval`。

```
clearInterval(interval); 
```

或者在您的 : 上传递上下文参数`ajax`：

```
$.ajax({
    ...
    context: this,
    ...
}); 
```

# c - 使用 realloc 向数组添加元素

> ID：14206184
> 
> 赞同：0
> 
> 时间：2013-01-07T23:57:39.697
> 
> 标签：c, malloc, realloc

我正在尝试在输入字符后使用 realloc 将元素添加到数组中。这是我的代码：

```
 #include <stdio.h>
   #include <stdlib.h>

   int main(void)
   {
      int i, j, k;
      int a = 1;
      int* array = (int*) malloc(sizeof(int) * a);
      int* temp;
      for(i = 0;;i++)
      {
          scanf("%d", &j);
          temp = realloc(array, (a + 1) * sizeof(int));
          temp[i] = j;
          if(getchar())
            break;
      }
      for(k=0; k <= a; k++)
      {
          printf("%d", temp[k]);
      }
   } 
```

当我运行这个小程序时，如果我输入例如：2 3 4，它会显示我：20; 我知道内存没有正确分配，但我无法弄清楚问题所在。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:07:44.353

首先：

```
 int* array = (int*) malloc(sizeof(int) * a);
    int* temp = array; 
```

和

```
 temp = realloc(temp, (a + 1) * sizeof(int)); 
```

因为作为第一个参数传递的调用'realloc'指针可能会变得无效。

当然，'realloc' 调用的第二个参数总是等于 2。

顺便说一句，“scanf”在第一个非数字字符后停止读取您的输入字符串。阅读文档以了解正确使用功能。例如关于[scanf()](http://www.cplusplus.com/reference/cstdio/scanf/)或 [realloc()](http://www.cplusplus.com/reference/cstdlib/realloc/)。

# ruby-on-rails - 如何将 wiki 实施到现有应用程序？

> ID：14206191
> 
> 赞同：0
> 
> 时间：2013-01-07T23:58:23.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wiki

我有一个已经在运行的应用程序。
我想实现 wiki 系统，以便社区所有者可以打开其 wiki 并进行编辑。

我想要这样的东西。

[http://example.com/community/:community_name/wiki](http://example.com/community/:community_name/wiki)

有什么好的宝石可以让它成为可能吗？
我想要只有注册用户才能编辑的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:16:45.367

我之前使用过[https://github.com/github/gollum](https://github.com/github/gollum)并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:09:02.410

谷歌搜索“rails wiki gem”将此[问题](https://stackoverflow.com/questions/8983453/is-there-a-wiki-gem-for-rails)作为最高结果返回，您可以在此处找到 gem 列表[https://www.ruby-toolbox.com/categories/wiki_apps](https://www.ruby-toolbox.com/categories/wiki_apps)

您描述的功能可以很容易地内置，只是一个设置路由和某种授权/身份验证的问题（如果您的应用程序中还没有它）。

# android - 如何在预定时间设置闹钟

> ID：14206201
> 
> 赞同：-1
> 
> 时间：2013-01-07T23:59:09.357
> 
> 标签：android

```
@Override
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

    Calendar calNow = Calendar.getInstance();
    Calendar calSet = (Calendar) calNow.clone();

    calSet.set(Calendar.HOUR_OF_DAY, hourOfDay);
    calSet.set(Calendar.MINUTE, minute);
    calSet.set(Calendar.SECOND, 0);
    calSet.set(Calendar.MILLISECOND, 0);

    if(calSet.compareTo(calNow) <= 0){
        //Today Set time passed, count to tomorrow
        calSet.add(Calendar.DATE, 1);
    }

    setAlarm(calSet);
}};

private void setAlarm(Calendar targetCal){

    textAlarmPrompt.setText(
        "\n\n***\n"
        + "Alarm is set@ " + targetCal.getTime() + "\n"
        + "***\n");

    Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), RQS_1, intent, 0);
    AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
    // alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(), pendingIntent);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(),AlarmManager.INTERVAL_DAY, pendingIntent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:41:52.050

你需要检查这个时间是否已经过去，否则永远不会触发警报。

# c - 交换链表中的节点

> ID：14206211
> 
> 赞同：1
> 
> 时间：2013-01-08T00:01:16.810
> 
> 标签：c, linked-list, swap

我有一个以这些值为例的链表：4 5 3 2 7，现在我想将每个节点与前一个节点交换，如下所示：

```
4 5 3 2 7 // this beginning of list
5 4 3 2 7
5 3 4 2 7
5 3 2 4 7
5 3 2 7 4 // the list should now become like this 
```

但不幸的是，当我解析输出时，我陷入了无限循环：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct _node {
    int p;
    struct _node *next;
} node;

main(int argc, char **argv)
{
    int i, n;
    node *nod = NULL;
    node *nod_tmp = NULL;
    node *nod2 = NULL;
    printf("Enter n: ");
    scanf("%d", &n);
    for(i = 0; i < n; ++i)
    {
        nod_tmp = (node *)malloc(sizeof(node));
        scanf("%d", &nod_tmp->p);
        nod_tmp->next = nod;
        nod = nod_tmp;
    }

    i = 0;
    while(i < n)
    {   
        nod_tmp = nod;
        nod = nod->next;
        nod->next = nod_tmp;
        ++i;
    }

    while(nod != NULL)
    {   

        printf("%d\n", nod->p);
        nod = nod->next;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:14:48.400

这看起来很奇怪：

```
while(i < n)
{   
    nod_tmp = nod;
    nod = nod->next;
    nod->next = nod_tmp;
    ++i;
} 
```

基本上，您正在循环 2 个项目，将它们相互分配。你需要审查这一点。

**编辑**

好的，为你写的，似乎有效。（我通过实际成对交换列表元素来做到这一点）。

```
/// reading and stuff...

node *prev = NULL, *start = nod->next;
for(int i = 0; i < n - 1; ++i)
{
    // look at this part, it makes everything obvious
    node *a = nod, *b = nod->next, *c = nod->next->next;

    b->next = a;
    a->next = c;

    nod = a; // changing the current node to next

    if(i == 0)
            {
        start = prev = b; // saving an actual start
            }
    else
    {
        prev->next = b;
        prev = prev->next;
    }

    // printing state to be sure
    for(node *tmp_start = start; tmp_start != NULL; tmp_start = tmp_start->next)
        printf("%d ", tmp_start->p);
    printf("\n");
}

printf("Final answer:\n");
while(start != NULL)
{   
    printf("%d ", start->p);
    start = start->next;
} 
```

您需要以相反的顺序输入数据（或稍微更改读取功能）

使用示例：

```
Enter n: 5 7 2 3 5 4
5 4 3 2 7
5 3 4 2 7
5 3 2 4 7
5 3 2 7 4
Final answer:
5 3 2 7 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:21:11.930

您的交换代码错误。应该是这样的：

```
i = 1;
nod2 = nod;
while(i < n)
{   
    nod_tmp = nod2->next;
    nod2->next = nod_tmp->next;
    nod_tmp->next = nod2;
    ++i;
} 
```

或者，由于交换每一对基本上将第一个元素推到最后，您可以这样做：

```
nod_tmp = nod;
while (nod_tmp->next != NULL)
{
    nod_tmp = nod_tmp->next;
}
// nod_tmp now points to the last element
nod_tmp->next = nod;          // loop from the last element back to the first
nod = nod->next;              // move the list pointer to the second element
nod_tmp->next->next = NULL;   // break the loop at the new last element 
```

此外，您可能想查看您的输入代码。如所写，它将使用与输入的相反顺序的值构建列表，因为它总是将下一个值添加到列表的头部。

**更新**

为了避免潜在的 seg_faults，上面的第一个循环可以在没有计数器的情况下重写，如下所示：

```
nod2 = nod;
nod_tmp = nod2->next;
while(nod_tmp != NULL)
{   
    nod2->next = nod_tmp->next;
    nod_tmp->next = nod2;
    nod_tmp = nod2->next;
} 
```

**更新 2**

这是执行您想要的完整代码。它只是将第一个节点推到列表的末尾，而不是交换每对节点。我还修复了输入循环，以便以正确的顺序构建列表。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct _node {
    int p;
    struct _node *next;
} node;

main(int argc, char **argv)
{
    int i, n;
    node *nod = NULL;
    node *nod_tmp = NULL;
    node *nod2 = NULL;
    printf("Enter n: ");
    scanf("%d", &n);
    for(i = 0; i < n; ++i)
    {
        nod_tmp = (node *)malloc(sizeof(node));
        scanf("%d", &nod_tmp->p);
        if (i == 0)
        {
            nod = nod2 = nod_tmp;
        }
        nod2->next = nod_tmp;
        nod2 = nod_tmp;
    }

    nod_tmp = nod;
    while (nod_tmp->next != NULL)
    {
        nod_tmp = nod_tmp->next;
    }
    // nod_tmp now points to the last element
    nod_tmp->next = nod;          // loop from the last element back to the first
    nod = nod->next;              // move the list pointer to the second element
    nod_tmp->next->next = NULL;   // break the loop at the new last element

    while(nod != NULL)
    {   

        printf("%d\n", nod->p);
        nod = nod->next;
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T00:21:25.750

让我们按照这个循环：

```
while(i < n)
{   
    nod_tmp = nod;         // 1
    nod = nod->next;       // 2
    nod->next = nod_tmp;   // 3
    ++i;
} 
```

1.  `nod_tmp`现在`nod`指向同一个节点。
2.  `nod`现在指向`nod->next`(so `nod == nod_temp->next`)
3.  `nod->next`现在指向的`not_temp`是 的旧地址`nod`。

现在它指向（也指向）`nod->next`的旧地址，你有一个链表，它的尾部指向它的头部。`nod``nod_temp`

这个 while 循环可能更适合您：

```
nod2 = nod;
nod_tmp = nod->next;
while(nod_tmp != NULL)
{   
    nod2->next = nod_tmp->next;
    nod_tmp->next = nod2;
    nod_tmp = nod2->next;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T00:15:13.000

```
 i = 0;
    while(i < n)
    {
        printf("%d\n", nod->p);
        nod = nod->next;
        i++;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T00:15:13.893

在完成交换之后和打印结果之前，您需要清除列表中最后一个条目的 nod->next。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T00:52:26.923

c++11方式..

编译：g++ --std=c++11 -Wall -Wextra mylist.cpp

```
#include <iostream>
#include <list>

template <class List>
void print(const List& list) {
    for (auto i : list)
        std::cout << i << ' ';
    std::cout << std::endl;
}

template <class List>
void swap(List& list) {
    auto i(list.begin());
    auto next(i);
    auto end(list.end());
    while (++next != end) {
        auto tmp = *i;
        *i++ = *next;
        *i = tmp;
        print(list);
    }
}

int main(int, char**) {
    std::list<int> list {4, 5, 3, 2, 7};
    print(list);
    swap(list);
} 
```

# python - 运行 Pandas 数据框更新

> ID：14206217
> 
> 赞同：0
> 
> 时间：2013-01-08T00:01:52.637
> 
> 标签：python, pandas

我想使用 DataFrame 来管理我用 Python 代码控制的实验的许多试验中的数据。理想情况下，我将有一个主数据帧，其中每个试验在主函数命名空间中都有一行，然后从我调用的函数返回一个单独的 dict（或数据帧），以执行每个试验的重要代码位。

使用此返回的数据集对主数据框进行运行更新的最佳方法是什么？到目前为止，我想出了：

```
df = df.append(df_trial, ignore_index=True) 
```

或者

```
df = pd.concat([df, df_trial]) 
```

但两者似乎都不理想（根据 %timeit，两者都需要相对较长的时间）。有没有更潘多尼克的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:44:25.120

您应该建立一个片段列表，并在最后一次将它们全部连接起来。

# perl - perl 序列提取循环

> ID：14206219
> 
> 赞同：2
> 
> 时间：2013-01-08T00:02:05.693
> 
> 标签：perl, shell, bioinformatics, fasta

我有一个现有的 perl one-liner（来自 Edwards 实验室），它可以很好地读取`ids.file`包含*一*列 ID 的文本文件（`fasta.file`名为格式）并返回与第一个文件中的 ID 匹配的序列。我希望扩展这个脚本来做两件额外的事情：

1.  当前的 perl one-liner似乎*仅*`ids.file`在包含一列数据时才有效。我希望它适用于包含两列（由空格分隔）的文件，并作用于第二列数据（嗯，实际上是任何数据列，但我认为如果有人调整它会很明显可以使用第二列举个例子）
2.  我想将从搜索输出返回的任何结果附加到第三列，而不仅仅是一个新文件。

如果有人愿意提供一个示例，但只有时间或意愿来处理其中一个问题，我希望您尝试解决 #2 - 我已经接近解决 #1 的 for 循环，该循环仅使用 awk使用第二列中的 Perl 代码 - 我还没有得到它，但已经接近了，所以 #2 对我来说似乎更难。

perl 一号线如下：

```
perl -ne 'if(/^>(\S+)/){$c=$i{$1}}$c?print:chomp;$i{$_}=1 if @ARGV' ids.file fasta.file 
```

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:13:51.973

不太确定，但这会吗？

```
perl -ne 'chomp; s/^>(\S+).*/$c=$i{$1}/e; print if $c; 
    $i{(/^\S*\s(\S*)$/)[0]}="$_ " if @ARGV' 
  ids.file fasta.file 
```

# javascript - 显示从rails到javascript的回车

> ID：14206220
> 
> 赞同：0
> 
> 时间：2013-01-08T00:02:08.923
> 
> 标签：javascript, html, ruby-on-rails, line-breaks, carriage-return

我有一个`.js.erb`由 js 函数触发的。

在这个 js.erb 中，我有以下代码：

```
event = <%=raw @event.to_json %>
$('#preview-event-body').html(event.body); 
```

`event.body`是一个`TEXT`mysql 值，并已由`text_area`

现在，问题是这`$('#preview-event-body').html(event.body);`会将文本作为一行插入，而我不能中断（用户存储的“输入”）。

例如用户存储（在 mySQL 中我看到相同）：

```
text

with a break 
```

和上述输出：

```
text with a break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:07:23.967

您是否尝试过将回车替换为

```
<p></p> or <br /> 
```

因为有时您可以看到回车，但 HTML 不会将它们显示为回车。

如果您在文本区域中显示结果，您可以看到它们，否则您无法在 HTML 中看到它们。尝试用那些 html 标签替换 \r\n 并查看它是否更改。

# three.js - 设置相机旋转改变相机的位置

> ID：14206228
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:03:32.583
> 
> 标签：three.js

当我有以下代码时：

```
 camera = new THREE.PerspectiveCamera( 45, width/height, 1, 10000 );
    scene.add( camera );
    camera.rotation.set(-0.09388335, 0.9945234, 0.0474389);
    camera.position.z = 100;

    camera.rotation.set(-0.09388335, 0.9945234, 0.0474389); 
```

在渲染时，camera.matrixWorldInverse 的位置发生了变化。有谁知道为什么？

我的猜测是，因为您正在本地旋转相机的旋转，所以您正在全局更改其位置。如果是这种情况，那么为什么要在以下工作中围绕世界轴旋转：

[如何在轴世界 three.js 上旋转对象？](https://stackoverflow.com/questions/11119753/how-to-rotate-a-object-on-axis-world-three-js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:25:18.557

我在看 camera.matrixWorldInverse 而不是 camera.matrixWorld

# oracle - PL/SQL 在 case 语句中获取平均值

> ID：14206233
> 
> 赞同：0
> 
> 时间：2013-01-08T00:03:57.890
> 
> 标签：oracle, plsql, sum, case, average

桌子：

```
+-----+----+----------+
| QTR | MO | PCT_PERF |
+-----+----+----------+
|   1 | 1  |       89 | 
|   1 | 2  |       73 |
|   1 | 3  |       95 |
+-----+----+----------+ 
```

## 什么是正确的语法？

```
CASE WHEN QTR=1 THEN ROUND(SUM(PCT_PERF WHERE MO IN (1,2,3))/3,2)
 WHEN QTR=2 THEN ROUND(SUM(PCT_PERF WHERE MO IN (4,5,6))/3,2) 
 WHEN QTR=3 THEN ROUND(SUM(PCT_PERF WHERE MO IN (7,8,9))/3,2)
 ELSE ROUND(SUM(PCT_PERF WHERE MO IN (10,11,12))/3,2) END QTR_PCT 
```

因此当 QTR 为 1 时，QTR_PCT 应为 86。 *(89+73+95)/3 = 85.67*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:09:47.637

我相信 Oracle 的`AVG`（“平均”）功能应该可以解决您的问题。我没有方便的 Oracle 数据库来确认这一点：

```
SELECT QTR, ROUND(AVG(PCT_PERF), 2) AS QTR_PCT FROM ... GROUP BY QTR 
```

# php - 如何在正则表达式中不检查任何内容

> ID：14206234
> 
> 赞同：2
> 
> 时间：2013-01-08T00:04:01.630
> 
> 标签：php, regex

我有 3 个版本的字符串：

1.  `[center][thumb]http://some_domain.com/uploads/posts/2010-04/1271272006_tn.jpg[/thumb][/center]`
2.  `[center][img]http://some_domain.com/uploads/posts/2012-01/1325796885.jpg[/img][/center]`
3.  `[img]http://some_domain.com/uploads/posts/2012-01/1325796885.jpg[/img]`

也可以是`[left][/left]`或`[right][/right]`。前两个我通过选择`/\[(center|left|right)\]\[(img|thumb)\](.*)?\[(\/img|\/thumb)\]\[(\/center|\/left|\/right)\]/`，但第三个是一个问题：如何检查“以前的”是否不存在？

PS我只需要获取网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:11:24.307

为什么不直接删除那些“标签”？

```
$buffer = strtr($input, array('[' => '<', ']' => '>'));
$url = strip_tags($buffer); 
```

查看[`strtr`^(*文档*)](http://php.net/strtr)和[`strip_tags`^(*文档*)](http://php.net/strip_tags)

对于您的三个示例，这是：

```
http://some_domain.com/uploads/posts/2010-04/1271272006_tn.jpg
http://some_domain.com/uploads/posts/2012-01/1325796885.jpg
http://some_domain.com/uploads/posts/2012-01/1325796885.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:11:32.067

一些更简单且不那么优雅的东西：

```
$str = '[center][img]http://some_domain.com/uploads/posts/2012-01/1325796885.jpg[/img][/center]';

$url = preg_replace('/.*?(http.+?)\[\/.*+/', "$1", $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:20:44.907

如果您尝试删除所有`[*]`“标签”，您可以执行以下操作：

```
$tag_replace_pattern = '#\[.*\]#U'; // note 'U' pattern modifier for ungreedy search
$url = preg_replace($tag_replace_pattern, '', $original_string); 
```

如果您只需要删除特定模式，您可以使用：

```
$tag_replace_pattern = '#\[/?(thumb|left|center|right|img)\]#U';
$url = preg_replace($tag_replace_pattern, '', $original_string); 
```

# sql - 我有一个表，我需要在某个日期范围内对 2 列进行分组和计数

> ID：14206236
> 
> 赞同：1
> 
> 时间：2013-01-08T00:04:20.343
> 
> 标签：sql, ms-access, select

我在 MSaccess 中有下表，我需要通过加入 2 列进行分组，并在某个日期/时间范围内，以及如果可能的类型和城市，给出重复的计数，但这不是强制性的。

```
LocationX LocationY DateTimeStamp,      City      Type
100       150       08/01/2013 8:59:44  Brisbane  RadioJob
101       155       08/01/2013 9:56:01  Brisbane  RadioJob
100       150       08/01/2013 8:49:39  Brisbane  RadioJob
103       150       08/01/2013 8:55:13  Brisbane  RadioJob 
```

我需要将第 0 列和第 1 列连接在一起并进行计数，但只能选择特定时间范围内的位置。

例如，如果我在 08/01/2013 8:49:00 和 08/01/2013 8:59:59 之间选择，我应该得到下表：

```
LocationX LocationY CountOfLocation  City      Type
100       150       2                Brisbane  RadioJob
103       150       1                Brisbane  RadioJob 
```

就目前而言，我在 MSaccess 中使用设计视图编写了 2 个查询以使其正常工作，但我想尝试并学习如何在一个 SQL 语句中执行此操作。

提前致谢，

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T00:06:30.327

```
SELECT LocationX, LocationY, City, Type, COUNT(*) CountOfLocation  
FROM   tableName
WHERE  DateTimeStamp BETWEEN '2013-08-01 8:49:00' AND '2013-08-01 8:59:59'
GROUP  BY LocationX, LocationY, City, Type 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/03435/5)

**更新**

```
SELECT LocationX, LocationY, City, Type, COUNT(*) AS CountOfLocation  
FROM   tableName
WHERE  DateTimeStamp BETWEEN #2013-08-01 08:49:00# AND #2013-08-01 08:59:59#
GROUP  BY LocationX, LocationY, City, Type 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T00:06:47.770

```
SELECT
   L.LocationX,
   L.LocationY,
   Count(*) AS CountOfLocation,
   L.City,
   L.Type
FROM
   Locations L
WHERE
   DateTimeStamp >= #08/01/2013 08:49:00#
   AND DateTimeStamp < #08/01/2013 09:00:00#
GROUP BY
   L.LocationX,
   L.LocationY,
   L.City,
   L.Type; 
```

我想指出，我从使用`BETWEEN`到不等式的转变是经过深思熟虑的。原因是使用`BETWEEN`要求底层日期数据类型具有特定的分辨率或粒度（此处为秒）。但是，假设您的数据库有一天会增长并升级为 SQL Server。在解决了日期文字等明显问题之后，在转换为数据类型时会潜伏一个令人讨厌的小问题`datetime`：突然之间，秒之间的值将成为可能，并且数据将被不正确地排除。

我的专业建议是在所有数据库查询中始终使用我的查询中显示的语法：包括开始时间和排他结束时间。考虑到学习最佳实践习惯将在任何 DBMS 中为您提供良好的服务......

此外，虽然 Access 中的日期文字确实需要`#`包装器，但您可以选择在数据库级别选择 SQL-Server 兼容语法，然后使用`'`. 我实际上推荐这个开关，因为语法不那么古怪，并且在升迁场景中将是一个巨大的祝福，因为要做的工作要少得多。但是，如果您现在更改，您现有的查询都必须立即修复。

# html - 在低屏幕分辨率下自动“缩小”

> ID：14206240
> 
> 赞同：0
> 
> 时间：2013-01-08T00:04:49.660
> 
> 标签：html, css, media-queries, resolution, screen-resolution

我有[这个](http://goo.gl/F37hG)网站。它非常适合 1366/1360x768、1280x1024 等分辨率。但是当 res 等于或低于 1280x768 时，它不适合水平放置，当然会出现滚动条。有没有办法自动“缩小”或一些解决方法，而不必使用媒体查询来减小图像大小和 div 宽度？

编辑：我稍微更改了 CSS，以便能够正常查看网站，直到分辨率为 1024x768。无论如何，这个问题仍然有效（虽然不是示例链接）。

# javascript - 将 HTML5 视频标签分配给 webGL 纹理时出现 CORS/跨域安全异常

> ID：14206244
> 
> 赞同：17
> 
> 时间：2013-01-08T00:05:26.717
> 
> 标签：javascript, html, three.js, webgl, cors

我想将远程视频分配给 WebGL 中的纹理。由于视频源和文档源不同，所以我`Access-Control-Allow-Origin:*`在视频源的http headers中添加了。此外，我通过使用为视频标签分配了一个匿名来源`video.crossOrigin = '';`。有趣的是，跨域属性适用于图像，但不适用于视频标签。一旦将 WebGL 纹理分配给视频对象，javascript 就会抛出以下异常：

未捕获的错误：SECURITY_ERR：DOM 异常 18

这是重现此问题的 jsfiddle。本示例基于three.js的webgl_kinect示例：http: [//jsfiddle.net/ZgeTU/2/](http://jsfiddle.net/ZgeTU/2/)

以下是相关部分：

```
// CROSS-ORIGIN VIDEO SOURCE 
// REMOTE VIDEO SOURCE PROVIDES "Access-Control-Allow-Origin:*" HEADER
video.src =
  'http://kammerl.de/threejs/three.js/examples/textures/kinect.webm';
// DEFINING ANONYMOUS ORIGIN
video.crossOrigin = '';
video.play(); 
```

稍后将视频标签分配给 Three.js 纹理：

```
texture = new THREE.Texture( video ); 
```

显然，在 webGL 中使用 crossOrigin 视频的这个问题已经有一段时间了，但我还没有找到任何更新：http: [//jbuckley.ca/2012/02/cross-origin-video/](http://jbuckley.ca/2012/02/cross-origin-video/)

有谁知道这个问题的状态是什么？是否有任何解决方法可以访问 webGL 中的远程视频？任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:31:02.743

由于您使用的是 jquery，因此建议您进行一些客户端处理，也许您可​​以查看插件或 cors 插件 (2,3) 的基础。

假设您做对了事情并为每个浏览器添加了适当的标头 (4,5)，请拿出一个数据包分析器（如 wireshark）并检查数据包以提供更多信息。

然而，话虽如此，WebGL 的 CORS 很有可能是一项正在进行的工作。为了根据规范实现它，浏览器正在修改支持 (1)。

祝你好运。

(1) 来源：[https ://www.khronos.org/webgl/public-mailing-list/archives/1106/msg00042.html](https://www.khronos.org/webgl/public-mailing-list/archives/1106/msg00042.html)

(2) 来源：archive.plugins.jquery.com/project/cors

(3) 来源：saltybeagle.com/2009/09/cross-origin-resource-sharing-demo/

(4) 来源：www.html5rocks.com/en/tutorials/cors/

(5) 来源：github.com/saltybeagle/cors

另请注意：www.jaanga.com/2012/04/access-cross-origin-images-from.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T00:29:29.303

当我将视频属性设置为“crossorigin”而不是“crossorigin”时，我被类似的错误阻止了......一旦我将所有内容小写，它就开始工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:13:59.270

感谢您的评论。

来自 Mozilla 的 Benoit Jacob 提交了关于此问题的错误报告： [https ://bugzilla.mozilla.org/show_bug.cgi?id=837153](https://bugzilla.mozilla.org/show_bug.cgi?id=837153)

.. 并创建了一个更紧凑的测试用例： http: [//people.mozilla.org/~bjacob/video-cors.html](http://people.mozilla.org/~bjacob/video-cors.html)

# android - SimpleCursorLoader onCreateLoader 错误，返回类型不匹配

> ID：14206245
> 
> 赞同：1
> 
> 时间：2013-01-08T00:05:27.700
> 
> 标签：android, sqlite, cursor, loader, mismatch

我正在使用 SQLite 数据库并希望在不使用`ContentProvider`.

我无法让我的子类 SimpleCursorLoader（取自[没有 ContentProvider 的 CursorLoader 使用](https://stackoverflow.com/questions/7182485/usage-cursorloader-without-contentprovider)）与`LoaderManager`.

在覆盖方法中

```
@Override
public Loader<Cursor> onCreateLoader(int ID, Bundle args) {
    return new ListCursorLoader(this, dBHelper);

} 
```

我得到一个类型不匹配，说它不能从`ListCursorLoader`to转换`Loader<Cursor>`。我尝试过动态创建`ListCursorLoader`（即在方法中），但这也不起作用。

这是我的代码`ListCursorLoader`：

```
package utilities;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;

public class ListCursorLoader extends SimpleCursorLoader {
    private DBAdapter dBAdapter;

    public ListCursorLoader(Context context, DBAdapter adapter) {
        super(context);
        dBAdapter = adapter;
    }

    @Override 
    public Cursor loadInBackground() {
        Cursor cursor = null;
        dBAdapter.open();
        try {
            cursor = dBAdapter.getAllQueries();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        if (cursor != null) {
            cursor.getCount();
        }
        return cursor;
    }
} 
```

如您所见，我只覆盖了该`loadInBackground()`方法，我根本看不到我做错了什么。

希望大家能帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T04:35:43.907

我刚试过你的代码，它没有问题。

你应该仔细检查你的进口。您链接到的 SimpleCursorLoader 正在使用[支持库](http://developer.android.com/tools/extras/support-library.html)。您没有提供代码，但我认为您可能使用的是默认 LoaderManager，而不是[support library 提供的那个](http://developer.android.com/tools/extras/support-library.html#Using)。

因此，为了能够使用此类，您需要在 Fragment中引用`android.support.v4.content.Loader`并加载它。`SupportLoaderManager`

这是我的 Fragment 中有效的代码：（请注意支持库的使用。）

```
import android.database.Cursor;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager.LoaderCallbacks;
import android.support.v4.content.Loader;
...

public class MainActivity extends FragmentActivity implements LoaderCallbacks<Cursor>{
...
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.getSupportLoaderManager().initLoader(0, null, this);
    }

...

@Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
        return new ListCursorLoader(this);
    }

...

} 
```

# c++ - 指针算术变相 &(array[0])

> ID：14206246
> 
> 赞同：4
> 
> 时间：2013-01-08T00:05:48.590
> 
> 标签：c++, c, pointers, pointer-arithmetic

今天我浏览了一些源代码（这是一个解释软件框架使用的示例文件），发现了很多这样的代码：

```
int* array = new int[10]; // or malloc, who cares. Please, no language wars. This is applicable to both languages
for ( int* ptr = &(array[0]); ptr <= &(array[9]); ptr++ )
{
   ...
} 
```

所以基本上，他们已经完成了“获取位于地址的对象的地址`array + x`”。

通常我会说，这完全是愚蠢的，因为写作`array + 0`或`array + 9`直接做同样的事情。我什至总是将这样的代码重写为 size_t for 循环，但这是风格问题。

但是过度使用它让我开始思考：我是否遗漏了一些明显的东西或隐藏在语言黑暗角落的东西？

对于任何想要查看原始源代码的人，所有它都是令人讨厌`goto`的 s ，`malloc`当然还有这个指针的东西，请随时[在线查看](http://scip.zib.de/doc/examples/TSP/GomoryHuTree_8cpp_source.shtml)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T00:08:04.920

是的，第一个没有充分的理由。这是完全相同的事情：

```
int *ptr = array; 
```

我也同意第二个，不妨写：

```
ptr < (array + 10) 
```

当然，您也可以将其`for`设为 0-9 的循环并将临时指针设置为指向数组的开头。

```
for(int i = 0, *ptr = array; i < 10; ++i, ++ptr)
    /* ... */ 
```

当然，这假设`ptr`在循环体内没有被修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T00:29:23.267

你没有错过任何东西，它们的意思是一样的。

但是，为了更清楚地说明这一点，我应该说我也时常写出这样的表达方式，以增加清晰度。

我个人倾向于从面向对象编程的角度来思考，这意味着我更喜欢引用“`n`数组第 th 元素的地址”，而不是“`n`数组起始地址的第 th 偏移量”。尽管这两件事在 C 语言中是等价的，但当我编写代码时，我会想到前者——所以我表达了这一点。

也许这也是写这篇文章的人的理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T01:36:37.297

根据经典数学：

```
Array[n] 
```

指数组中的*第 n 个*元素。

要“获取”第*n 个*元素的地址，应用`&`or`address of`运算符：

```
 &Array[n] 
```

为了消除任何假定的歧义，添加了括号：

```
 &(Array[n]) 
```

对于从左到右阅读的读者来说，这个表达式的含义是：
*返回位置'n'处元素的地址*

该保险可能已经发展为针对旧的错误编译器的保护。

有些人认为它比以下更具可读性：

```
 Array + n 
```

对不起，但我是老派，更喜欢使用'&'版本，无论是否有括号。我会浪费时间让代码更易于阅读，而不是担心哪个版本需要更长的编译时间或哪个版本更有效。

与为效率进行微优化或使用非语言律师不熟悉的语言部分的代码部分相比，明确注释的代码部分具有更高的投资回报率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T00:10:00.407

编辑：这*部分*不正确。阅读评论。

* * *

问题`&(array[0])`在于它扩展到`&(*(array + 0))`涉及取消引用。现在，每个编译器显然会将其优化为`array + 0`与`array + 0`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T00:10:09.717

我认为他们这样写的原因是

```
&(array[0]) 
```

和

```
&(array[9]) 
```

只是看起来相似。另一种方法是写它

```
array + 0 
```

和

```
array + 9 
```

分别。正如您已经提到的，它们本质上是相同的（我希望至少大多数编译器都将其视为相同）。

您可以不同地解释这两种不同类型的表达式：第一个可以读作“元素 0 / 9 的地址”。第二个可以读作“元素偏移量为 0 / 9 的数组指针”。第一个听起来更高级，第二个听起来更低级。但是，大多数人倾向于使用第二种形式。

现在既然`array + 0`当然是一样的`array`，你就可以写了`array`。我认为这里的重点是循环的开始和结束看起来彼此“相似”。个人口味问题。

# android - Android：试图在人们单击列表框中的项目时获得响应

> ID：14206248
> 
> 赞同：0
> 
> 时间：2013-01-08T00:06:19.773
> 
> 标签：android

我只是在学习如何使用 ListViews。我让它工作了，但是当有人点击一个项目时将无法响应。

我正在尝试使用 setOnItemClickListener 方法在单击项目时进行回调。但是由于 setOnItemClickListener 方法中的错误，我的代码将无法编译 r 现在我收到一个错误，指出 setOnItemClickListener 不适用于参数 OnItemClickListener();

```
void SetUpList()
        {

             listView = (ListView) findViewById(R.id.mylist);
             String[] values = new String[] { "Android", "iPhone", "WindowsMobile"}; 
             EventsAdapter adapter = new EventsAdapter(this, cGlobals.eventsTitle);

             // Assign adapter to ListView
             listView.setAdapter(adapter); 

    // this is whare I get the error listView.setOnItemClickListener(new OnItemClickListener() {
                        public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {
                            // When clicked, show a toast with the TextView text

                        }
                    });
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:12:22.583

首先确保你已经导入了这个类：

```
import android.widget.AdapterView.OnItemSelectedListener; 
```

接下来你需要这样调用`setOnItemClickListener()`：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override // "@Override" is required for Java 1.6, but forbidden in 1.5
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // Do Something
    }
}); 
```

或者，如果您的活动实现`OnItemClickListener`：您需要在`onItemClick()`方法之外添加`onCreate()`方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // Do Something
}

@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // Do something else
} 
```

（当然，如果您要扩展 ListActivity 或 ListFragment，您应该覆盖`onListItemClick()`而不是`onItemClick()`像第二种方法那样。）

# c# - 刚刚将 RavenDB 更新为 rev。2230 转。960 和调用 session.SaveChanges() 我有 JsonSerialization 异常

> ID：14206254
> 
> 赞同：1
> 
> 时间：2013-01-08T00:07:12.500
> 
> 标签：c#, json, ravendb

我有点急于测试 Ayende 刚刚上线的新官方 RavenDB 版本，在我的项目中更新它（[链接到 Github](https://github.com/capaj/Democracy-2.0)）后，我被这个异常措手不及（抱歉，长堆栈跟踪）。有谁知道可能是什么原因造成的？

> 从“System.Net.IPAddress”上的“ScopeId”获取值时出错。
> 
> 在 Raven.Imports.Newtonsoft.Json.Serialization.DynamicValueProvider.GetValue(Object target) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\DynamicValueProvider.cs：Raven 的第 108 行.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft .Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue（JsonWriter 编写器，对象值，JsonContract valueContract，JsonProperty 成员，JsonContainerContract containerContract，的第 364 行，C:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs 中的 JsonProperty containerProperty）：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject（JsonWriter writer）的第 123 行、对象值、JsonObjectContract 合同、JsonProperty 成员、JsonContainerContract 集合合同、JsonProperty containerProperty) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:Raven.Imports 的第 364 行.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject（JsonWriter writer，对象值，JsonObjectContract 合同的第 123 行, JsonProperty 成员, JsonContainerContract collectionContract, JsonProperty containerProperty) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization 的第 364 行.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty) 在 c:\Builds\RavenDB 的第 123 行-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue 的第 364 行（JsonWriter writer，Object value，JsonContract valueContract，JsonProperty 成员， JsonContainerContract containerContract, JsonProperty containerProperty) 位于 Raven 的 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 123。Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft. Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue（JsonWriter writer，Object value，JsonContract valueContract，JsonProperty member，JsonContainerContract containerContract，JsonProperty containerProperty）的第 364 行在 c:\Builds\RavenDB -Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter 的第 123 行。c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs:line 364在 Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty) 在 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src \Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject（JsonWriter writer，对象值，JsonObjectContract 合同的第 123 行，C:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs 中的 JsonProperty 成员、JsonContainerContract collectionContract、JsonProperty containerProperty)：Raven.Imports.Newtonsoft.Json.Serialization 的第 364 行。 C:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalWriter.cs 中的 JsonSerializerInternalWriter.SerializeValue（JsonWriter writer，Object 值，JsonContract valueContract，JsonProperty 成员，JsonContainerContract containerContract，JsonProperty containerProperty）： c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft 中 Raven.Imports.Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value) 的第 123 行。Json\Serialization\JsonSerializerInternalWriter.cs：Raven.Imports.Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value) 中的第 61 行：\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json \JsonSerializer.cs：Raven.Imports.Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value) 中的第 608 行，位于 c:\Builds\RavenDB-Stable\Imports\Newtonsoft.Json\Src\Newtonsoft.Json\JsonSerializer。 c:\Builds\RavenDB-Stable\Raven.Abstractions\Json\Linq\RavenJToken.cs：Raven.Json.Linq.RavenJToken.FromObjectInternal(Object o, JsonSerializer jsonSerializer) 中的第 580 行：Raven.Json 中的第 80 行。 Linq.RavenJObject.FromObject(Object o, JsonSerializer jsonSerializer) 在 c:\Builds\RavenDB-Stable\Raven.Abstractions\Json\Linq\RavenJObject.cs:Raven.Client 的第 156 行。Document.EntityToJson.GetObjectAsJson(Object entity) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\EntityToJson.cs:第 63 行在 Raven.Client.Document.EntityToJson.ConvertEntityToJson(String key, Object entity, c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\EntityToJson.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.EntityChanged(Object entity, DocumentMetadata documentMetadata) 第 35 行中的 RavenJObject 元数据）在 c:\Builds\ RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.b__10 的第 876 行（KeyValuePairConvertEntityToJson（字符串键，对象实体，RavenJObject 元数据）在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\EntityToJson.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.EntityChanged 的​​第 35 行（对象实体，DocumentMetadata documentMetadata）在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.b__10（KeyValuePair）的第 876 行ConvertEntityToJson（字符串键，对象实体，RavenJObject 元数据）在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\EntityToJson.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.EntityChanged 的​​第 35 行（对象实体，DocumentMetadata documentMetadata）在 c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.b__10（KeyValuePair）的第 876 行Lightweight\Document\InMemoryDocumentSessionOperations.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.b__10（KeyValuePair）的第 876 行Lightweight\Document\InMemoryDocumentSessionOperations.cs：Raven.Client.Document.InMemoryDocumentSessionOperations.b__10（KeyValuePair）的第 876 行`2 pair) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs:line 739 at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext() 在 System.Linq.Buffer `1..ctor(IEnumerable`1 源) 在 System.Linq.Enumerable.ToArray[TSource](IEnumerable `1 source) at Raven.Client.Document.InMemoryDocumentSessionOperations.PrepareForEntitiesPuts(SaveChangesData result) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs:line 739 at Raven.Client.Document.InMemoryDocumentSessionOperations.PrepareForSaveChanges() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\InMemoryDocumentSessionOperations.cs:line 732 at Raven.Client.Document.DocumentSession.SaveChanges() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Document\DocumentSession.cs:line 483 at Dem2Server.EntityRepository.StoreToDB(ServerClientEntity entity) in d:\Github\Democracy-2.0\Dem2Server\Dem2Server\EntityRepository.cs:line 160 at Dem2Server.EntityRepository.Add(ServerClientEntity entity) in d:\Github\Democracy-2.0\Dem2Server\Dem2Server\EntityRepository.cs:line 87 at Dem2Model.User.LogInUser(String FBgraphJSON) in d:\Github\Democracy-2.0\Dem2Server\Dem2Server\user.cs:line 171 at Dem2Server.Dem2Hub.ResolveMessage(String message, IWebSocketConnection socket) in d:\Github\Democracy-2.0\Dem2Server\Dem2Server\Dem2Hub.cs:line 74 at Dem2Server.dem2.<>c__DisplayClass8.<>c__DisplayClassa.<Main>b__7(String message) in d:\Github\Democracy-2.0\Dem2Server\Dem2Server\dem2.cs:line 100 at Fleck.WebSocketServer.<>c__DisplayClass8.<OnClientConnect>b__4(String s) at Fleck.Handlers.Hybi13Handler.ProcessFrame(FrameType frameType, Byte[] data, Action`1 onMessage, Action onClose, Action `1 onBinary) at Fleck.Handlers.Hybi13Handler.<>c__DisplayClassa.<Create>b__6(FrameType op, Byte[] data) at Fleck.Handlers.Hybi13Handler.ReceiveData(List`1 data, ReadState readState, Action `2 processFrame) at Fleck.Handlers.Hybi13Handler.<>c__DisplayClassa.<Create>b__5(List`1 d) 在 Fleck.Handlers.ComposableHandler .Receive(IEnumerable `1 data) at Fleck.WebSocketConnection.<>c__DisplayClassb.<Read>b__a(Int32 r) at Fleck.SocketWrapper.<>c__DisplayClasse.<Receive>b__8(Task`1 t) 在 System.Threading.Tasks.ContinuationTaskFromResultTask`1.InnerInvoke() 在 System.Threading.Tasks.Task.Execute()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T00:43:05.977

好的，这很简单，从我们需要使用的 RavenDB 2.0 版开始

```
using Raven.Imports.Newtonsoft; 
```

代替

```
using Newtonsoft.Json; 
```

如[Raven's Community中所述，](https://groups.google.com/forum/?fromgroups=&pli=1#!searchin/ravendb/internalize%2420newtonsoft/ravendb/sV5QDf3g7qw/ZV6w0M-xY3UJ) [Newtonsoft.Json 在 RavenDB 2.0 中被内部化](http://issues.hibernatingrhinos.com/issue/RavenDB-220)

# mobile - Windows azure 脚本服务将消息添加到队列

> ID：14206255
> 
> 赞同：0
> 
> 时间：2013-01-08T00:07:13.937
> 
> 标签：mobile, azure

我正在使用 Windows Azure Mobile 服务从移动应用程序上传图片。移动脚本服务接受文件，将其名称保存到数据库中。我想要做的是能够向队列添加一条消息，该队列将调整上传图像的大小。脚本服务是否支持从内部调用队列，或者我必须让我的应用程序执行该调用？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:26:14.407

您可以使用以下代码向队列发送消息：

```
var azure = require('azure');
var queueService = azure.createQueueService("myaccount", "mykey");    
queueService.createQueueIfNotExists("myqueuename", function(error){ });
queueService.createMessage("myqueuename", "contentOfTheMessage", function(error){}); 
```

# git - Git：回滚到更早的版本

> ID：14206256
> 
> 赞同：2
> 
> 时间：2013-01-08T00:07:16.070
> 
> 标签：git

有没有办法回滚到 git 中签入的内容的更早版本（对于整个 repo）？我不想更改 repo 中的内容，我只想要 9 个月前 repo 所在位置的本地副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:09:06.250

是的，只需克隆回购...

```
git clone <repo-url> 
```

...从 9 个月前找到您想要的提交、分支或标签...

```
git log
git branch
git tag 
```

...然后检查旧版本...

```
git checkout <commit-sha1, branch, tag> 
```

请记住，如果您签出提交，您将处于分离的 HEAD 模式。如果您希望进一步提交，可以为该提交创建一个分支。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T00:15:57.053

你可以直接告诉 git 从 9 个月前检出一个分支。这是我的一个项目中的一个示例：

```
:; git checkout 'master@{9 months ago}'
Checking out files: 100% (625/625), done.
Note: checking out 'master@{9 months ago}'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b new_branch_name

HEAD is now at b50869f... ignore DerivedData 
```

指定修订的所有方法都记录在[手册`git-rev-parse`页](http://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)中。

# java - 创建宏以在网页上的 Java Applet 上工作

> ID：14206257
> 
> 赞同：0
> 
> 时间：2013-01-08T00:07:19.697
> 
> 标签：java, macros, applet, imacros, web-based

基本上，网页上有一个Java Applet，它显示一个数字和一个随机生成按钮。我正在尝试创建一个宏来重复按此随机按钮，直到找到所需范围内的数字。

我曾尝试使用 iMacro，但它无法单击按钮，并且查看页面代码，对小程序代码的访问受到限制，因此我无法通过其 ID 引用该字段/按钮。

我还能做些什么来创建这样的宏吗？

# javascript - 搜索表单和结果的骨干结构？

> ID：14206259
> 
> 赞同：9
> 
> 时间：2013-01-08T00:07:27.877
> 
> 标签：javascript, backbone.js, javascriptmvc

我是第一次使用 Backbone.js，并试图弄清楚它是如何工作的。我有一个搜索表单，它通过 Ajax 获取结果并将它们动态地写入页面。

我现在正试图弄清楚如何最好地在 Backbone 中构建它 -[我读了这个 SO question](https://stackoverflow.com/questions/10671435/simple-backbone-search-page-how-would-you-do-it)，但我不完全理解如何将表单和结果连接在一起。

这是我的 HTML：

```
<form id="flight-options"> <!-- options for user to choose-->
<input type="radio" name="journey" value="single">Single<br/><input type="radio" name="journey" value="return">Return
<input type="checkbox" name="airline" value="aa">AA<br><input type="checkbox" name="airline" value="united">United
</form>
<div id="results"> <!-- results, written by Ajax -->
<h3>Results</h3>
<ul id="results-list">
</div> 
```

以下是我正在考虑构建 Backbone 代码的方式：

```
 var SearchModel = Backbone.Model.extend({
    performSearch: function(str) {
      // fire the ajax request.  provide a bound
      // _searchComplete as the callback
    },
    _searchComplete: function(results) {
      this.set("searchResults", results);
    }
  });
  var SearchFormView = Backbone.View.extend({
    tagName: "form",
    id: "flight-options",
    events: {
      "click input": "getResults"
    },
    getResults: function() {
      // Get values of selected options, use them to construct Ajax query. 
      // Also toggle 'selected' CSS classes on selected inputs here?
      this.model.performSearch(options);
    }
  });
  var SearchResultsView = Backbone.View.extend({
    tagName: "ul",
    id: "results-list",
    initialize: function() {
        this.model.on("change:searchResults", this.displayResults, this);
    },
    displayResults: function(model, results) {
      //append results to results-list here.   
      //update contents of blurb here?
    }
  });
  var searchModel = new SearchModel();
  var searchFormView = new SearchFormView({ model: searchModel });
  var searchResultsView = new SearchResultsView({ model: searchModel }); 
```

我的问题：

1.  这基本上是一个合理的结构，一个视图用于表单，一个视图用于结果——第一个视图更新模型，第二个视图观察模型？
2.  `<h3>`当有新结果时，我还想更新结果标题的内容- 在上面的代码中，最明智的地方是哪里？
3.  `selected`当用户单击表单输入时，我想在输入上切换类-在上面的代码中执行此操作的逻辑位置在哪里？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T02:55:29.050

1.  是的，这是一个合乎逻辑的组织方式，也是使用主干视图的好方法。
2.  你可以通过几种方式来解决这个问题：
    *   为标题（例如`SearchResultsTitleView`）提供一个单独的视图，该视图也可以监听模型的变化。这对我来说似乎有点过分。
    *   更新`SearchResultsView`标题`<h3>`和结果`<ul>`。与其将自身`#results-list` `<ul>`绑定到 ，它可能会绑定到`#results` `<div>`并且有两个函数，一个用于更新每个孩子。
3.  这似乎是 的责任`SearchFormView`，要么监听模型的变化，要么只是在事件发生时更新状态。

# java - JTable 特定游戏计算器

> ID：14206260
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:07:32.863
> 
> 标签：java, swing, jtable, actionlistener

我正在尝试制作一个表格，您可以为其中定义的每一列输入值，`MyTableModel`然后使用角色的选择来根据游戏规则的定义进行攻击。

我想：

*   一旦每回合使用了一个动作，单元格就无法编辑和无法使用的单元格
*   为每个怪物保留一个回合计数器和一个威胁表
*   `JTable`在系统运行攻击时使用 Java swings显示和收集数据
*   尝试配置通过游戏文本显示战斗进展的显示器。

这是我到目前为止的代码。我想知道为什么我会收到不兼容类型的错误-当`found java.lang.Object but expected int`我认为我应该有一个. 让我知道你的想法，如果你有任何建议可以帮助我完成我的工作。谢谢你的时间。`HP``actionPerformed()``int`

```
import javax.swing.*; 
import javax.swing.table.AbstractTableModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.GridLayout;
import java.awt.Dimension;
import java.awt.*;
import java.awt.event.*;
import java.util.*;

public class EncounterCalculator extends JPanel 
                            implements ActionListener { 
    private JTable table;
    private JRadioButton Attack, Skill, Skulk;
    private JTextArea output;
    private ButtonGroup Act;
    int rowSelected;
    int ID;
    String Name;
    int maxHP;
    int HP;
    int maxMP;
    int MP;
    int attackBase;
    int attack;
    int fumbleChance;
    int criticalChance;
    int damage;
    int minDamage;
    int maxDamage;
    int defense;
    int defenseBase;
    int dodge;
    int dodgeRoll;

    public EncounterCalculator() {
        super();
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));

        table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        table.getSelectionModel().addListSelectionListener(new RowListener());
        table.getColumnModel().getSelectionModel().
            addListSelectionListener(new ColumnListener());
        add(new JScrollPane(table));

        JRadioButton Attack = new JRadioButton("Attack");
        JRadioButton Skill = new JRadioButton("Skill");
        JRadioButton Skulk = new JRadioButton("Skulk");

        add(new JLabel("Act"));
        Act = new ButtonGroup();
        Act.add(Attack);
        Act.add(Skill);
        Act.add(Skulk);

        JPanel actPanel = new JPanel(new GridLayout(0, 1));
        actPanel.add(Attack);
        actPanel.add(Skill);
        actPanel.add(Skulk);
        add(actPanel);

    }

    private JRadioButton addRadio(String text) {
        JRadioButton b = new JRadioButton(text);
        b.addActionListener(this);
        Act.add(b);
        add(b);
        return b;
    }

    public void actionPerformed(ActionEvent event) {
        String command = event.getActionCommand();
        int rowsSelected[] = table.getSelectedRows();
        int attackersRowSelected = rowsSelected[0];
        int defendersRow = rowsSelected.length - 1;
        int defendersRowSelected = rowsSelected[defendersRow];
        if ("Attack" == command) {
        int HP = table.getValueAt(, 3);
        int damage;
        int attackBase = table.getValueAt(attackersRowSelected, 6);
        int attackRoll = generator.nextInt(100) + 1;
        int fumbleChance = table.getValueAt(attackersRowSelected, 7);
        int criticalChance = table.getValueAt(attackersRowSelected, 8);
            if (attackRoll < fumbleChance){
                damage = 0;
            } else if (attackRoll > criticalChance){
                damage = maxDamage * 2;
            } else {
                damage = generator.nextInt((maxDamage - minDamage)) + minDamage;
            }
        int attack = attackBase + attackRoll;
        int dodge = table.getValueAt(defendersRowSelected, 12);
        int dodgeRoll = generator.nextInt(100) + 1;
        if (dodge > dodgeRoll){
            damage = 0;
        }
        int defenseBase = table.getValueAt(defendersRowSelected, 11);
        int defenseRoll = generator.nextInt(100) + 1;
        int defense = defenseBase + defenseRoll;
        if (attack >= defense){
            HP = HP - damage;
            table.setValueAt(HP,defendersRowSelected, 4);

        }

        } else if ("Skill" == command) {

        } else if("Skulk" == command) {

        } 
    }

    private void outputSelection() {
    }

    private class RowListener implements ListSelectionListener {
        public void valueChanged(ListSelectionEvent event) {
            if (event.getValueIsAdjusting()) {
                return;
            }
        }
    }

    private class ColumnListener implements ListSelectionListener {
        public void valueChanged(ListSelectionEvent event) {
            if (event.getValueIsAdjusting()) {
                return;
            }
        }
    }

    class MyTableModel extends AbstractTableModel {
        private String[] columnNames = {"ID",
                                        "Name",
                                        "maxHP",
                                        "HP",
                                        "maxMP",
                                        "MP",
                                        "Att",
                                        "Fumble",
                                        "Crit", 
                                        "minDam",
                                        "maxDam",
                                        "Def",
                                        "Dodge",
                                        "Foc",
                                        "Res"};
        private Object[][] data = {
            {"1", "Character1", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"2", "Character2", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"3", "Character3", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"4", "Character4", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"5", "Character5", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"6", "Character6", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"7", "Character7", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"8", "Character8", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"9", "Character9", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"10", "Character10", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"11", "Character11", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"12", "Character12", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"13", "Character13", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"14", "Character14", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"15", "Character15", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"16", "Character16", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"17", "Character17", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"18", "Character18", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"19", "Character19", "", "", "", "", "", "", "", "", "", "", "", "", ""},
            {"20", "Character20", "", "", "", "", "", "", "", "", "", "", "", "", ""}
          };

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        /*
         * JTable uses this method to determine the default renderer/
         * editor for each cell.  If we didn't implement this method,
         * then the last column would contain text ("true"/"false"),
         * rather than a check box.
         */
        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        /*
         * Don't need to implement this method unless your table's
         * editable.
         */
        public boolean isCellEditable(int row, int col) {
            //Note that the data/cell address is constant,
            //no matter where the cell appears onscreen.
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        /*
         * Don't need to implement this method unless your table's
         * data can change.
         */
        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
        }

    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Disable boldface controls.
        UIManager.put("swing.boldMetal", Boolean.FALSE); 

        //Create and set up the window.
        JFrame frame = new JFrame("EncounterCalculator");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        EncounterCalculator newContentPane = new EncounterCalculator();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:30:11.630

1+ 到 sansix 的收获。

还，

*   如果表格单元格是整数类型，那么您需要将返回的对象`getValue(...)`转换为整数。
*   但是您的 JTable 模型**不**包含 Integer 对象，而是包含 String 对象，因此您将其强制为 int 的尝试无论如何都会失败。你会想要解决这个问题。
*   永远不要将字符串与`==`. 使用`equals(...)`or`equalsIgnoreCase(...)`方法，以便您可以比较字符串的内容相等性而不是对象相等性（相同的字符串*对象*）
*   您的代码应遵循 Java 命名标准，其中类名以大写字母开头，变量、方法等的名称以小写字母开头。当您希望其他人更容易理解您的代码时，这一点非常重要——比如**我们**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T00:24:03.497

**在actionPerformed**方法中检查你的这个语句

`int HP = table.getValueAt(, 3);`

我猜你之前漏掉了一些东西 " **,** ";

正如**@Hovercraft**在您的`getValueAt`方法中所建议的那样，您将返回一个`Object`，因此您需要将其转换回整数。

**编辑：**

与您遇到的错误无关，而只是一条建议（**@Hovercraft**已告知了一些关键点）

你为什么要在里面重新声明你的变量`actionPerformed`？只声明一次。

# wcf - 如何将参数传递给 ServiceHost

> ID：14206267
> 
> 赞同：7
> 
> 时间：2013-01-08T00:08:08.853
> 
> 标签：wcf, service, parameters, servicehost

我正在做以下事情

```
 //Define the service host
        this._smeediPluginServiceHost = new ServiceHost(typeof(SmeediServiceHost), smeediServiceUri);
        this._smeediPluginServiceHost.AddServiceEndpoint(typeof(ISmeediServiceHost), GetBinding(), smeediServiceUri);
        SetupAndStartWebService(_smeediPluginServiceHost); 

  private void SetupAndStartWebService(ServiceHost serviceHost, ServiceDiscoveryBehavior serviceDiscoveryBehavior = null)
    {
        //Define service behaviours
        ServiceMetadataBehavior serviceMetadataBehavior = new ServiceMetadataBehavior();
        serviceMetadataBehavior.HttpGetEnabled = true;

        //Add the behaviours to the service
        serviceHost.Description.Behaviors.Add(serviceMetadataBehavior);

        if (serviceDiscoveryBehavior != null)
            serviceHost.Description.Behaviors.Add(serviceDiscoveryBehavior);

        serviceHost.Open();
    } 
```

我需要将参数传递给服务，但我不知道如何。我查看了[如何将值传递给我的 wcf 服务上的构造函数？](https://stackoverflow.com/questions/2454850/how-do-i-pass-values-to-the-constructor-on-my-wcf-service)但无法理解它。谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-11T00:01:06.773

如果我理解正确，您想将参数传递给服务实现类的构造函数。您可以通过将[服务类](http://msdn.microsoft.com/en-us/library/ms585487.aspx)[的*实例*`ServiceHost`](http://msdn.microsoft.com/en-us/library/ms585487.aspx)而不是其类型传递给[构造函数来实现这一点。](http://msdn.microsoft.com/en-us/library/ms585487.aspx)那是：

```
// Create the service instance
var instance = new SmeediServiceHost("some parameters");

// Define the service host using the above instance
this._smeediPluginServiceHost = new ServiceHost(instance, smeediServiceUri); 
```

**注意**- 使用这种方法意味着您正在使用服务类的单例实例。如果您需要每个会话或每个请求的新实例，请考虑使用[此答案](https://stackoverflow.com/a/2455039/1001985)`ServiceHostFactory`中描述的a 。

# windows - 重定向根 URL - IIS 7

> ID：14206273
> 
> 赞同：9
> 
> 时间：2013-01-08T00:09:05.470
> 
> 标签：windows, iis, url-rewriting, http-redirect

我在我的网站[http://ironnoob.com/forums](http://ironnoob.com/forums)上安装了一些论坛。

我的网站位于 c:\IronNoob，我的论坛安装在 c:\IronNoob\forums

我希望“ironnoob.com”和“www.ironnoob.com”都进行服务器端重定向到“ironnoob.com\forums”。

我正在使用 IIS 7，而且我是设置这些东西的新手，所以我什至不知道用谷歌搜索什么。我知道我可以使用 HTML 进行客户端重定向，但我知道服务器端重定向更好。我已经知道如何为 IIS 安装 HttpRedirect 模块，但是如果我在站点的根文件夹中设置重定向到我的论坛文件夹，访问 ironnoob.com 时会出现循环重定向错误。

HTTP 重定向设置：

1.  在 ISS 的 Connections 窗格中选择的根目录
2.  选中“将请求重定向到此目的地”
3.  目的地 = [http://somesite.com/forums](http://somesite.com/forums)
4.  选中“将所有请求重定向到确切位置”
5.  选中“仅将请求重定向到此目录（而不是子目录）中的内容”
6.  状态代码：永久 (301)

当我告诉它不要重定向子目录时，为什么它会重定向？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-10T17:39:49.673

`HTTP redirect`您可以使用该模块，而不是使用该模块`URL rewrite`。

运行`inetmgr`命令并选择您的网站根目录。打开`URL rewrite`配置：

![URL重写配置](../Images/8ed72cb2a5e2172f93a4974d99e4959c.png)

单击`Add a rule`右侧面板上的 。选择一个`Blank rule`入站规则：

![空白规则](../Images/47d68f8f14fd3b62138fa519bf9e8849.png)

从这里你必须命名你的规则并选择`Does not match the pattern`选项。然后您必须设置`Pattern`（在这种情况下，这意味着不以开头的 URL`forums`将触发此规则）：

![规则条件](../Images/7c7149701e1e07de0fb457842822d824.png)

最后一步是设置重定向。您可能希望按照[Google 的建议进行](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)301 重定向：

![重定向规则](../Images/af8ad1c17f7ecccd36103c442dc9065c.png)

单击`Apply`右侧面板，您应该一切顺利。

**注意：**如果您与您的`Redirect URL`不匹配，您`Pattern`将陷入无限循环（您可以通过简单地单击`Test`按钮来测试它将写入您的`Pattern`）。

*[此处](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference)提供此模块的文档*

# html - 无法使用 CSS 让我的网格正常工作

> ID：14206275
> 
> 赞同：1
> 
> 时间：2013-01-08T00:09:13.493
> 
> 标签：html, css

我一直在关注如何使用 HTML 和 CSS 制作基本网站的教程。我已经完成了教程，现在正在尝试使用它使用的网格系统，但我遇到了一些麻烦。

这个想法是你将容器`<div>`排列成列，每列都有一个固定的宽度，中间有一个预定义的装订线，然后使用 CSS 类来设置 with （例如，如果你有一个由 8 个预先设置的列组成的网格，你可以使用 2x`.grid_4`个类，每个类的宽度为 4 列。我希望这是有道理的。

出于某种原因，我的网格无法排列，我无法弄清楚为什么......如果这没有意义，我深表歉意，如果我解释得不好，请告诉我。

这是网格应该如何工作的工作示例。 [http://www.scottydawg.co.uk/web_development/smells_like_bakin](http://www.scottydawg.co.uk/web_development/smells_like_bakin)

提前感谢您，任何帮助表示赞赏。

这是我的 HTML：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Gridding Test Field</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css" media="screen">
<link rel="stylesheet" type="text/css" href="css/grid.css" media="screen">
<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Nunito'>
</head>

<body>
<div class="container clearfix back">
    <div class="grid_8">
        <p class="block">12</p>
    </div>

    <div class="grid_2 alpha"><p>2</p></div>
    <div class="grid_2"><p>2</p></div>

</div>
</body>
</html> 
```

现在的CSS：

```
/*
  Width: 1000px
  # Columns : 8
  Column width: 104px
  Gutter : 24px 

 */

body {
    background-color: #222;
}

.grid_1 { width: 104px; }    /* 104px */
.grid_2 { width: 232px; }    /* 232px */
.grid_3 { width: 360px; }    /* 360px */
.grid_4 { width: 488px; }    /* 488px */
.grid_5 { width: 616px; }    /* 616px */
.grid_6 { width: 744px; }    /* 744px */
.grid_7 { width: 872px; }    /* 872px */
.grid_8 { width: 1000px;  }    /* 1000px */

.grid_1,
.grid_2,
.grid_3,
.grid_4,
.grid_5,
.grid_6,
.grid_7,
.grid_8, {
    margin: 0 20px 10px 0;
    border: 5px dotted #555;
    float: left;
    display: block;
}

p {
    background-color: rgba(25, 255, 58, 0.4);
    padding: 5px;
}

.alpha{margin-left:0px;}
.omega{margin-right:0px;}

.container{
    max-width: 1000px;
    background-color: rgba(25, 180, 238, 0.4);
    margin: auto;
}

.clear{
    clear: both;
    display:block;
    overflow:hidden;
    visibility:hidden;
    width:0;
    height:0
}

.clearfix:after{clear:both;
    content:' ';
    display:block;
    font-size:0;
    line-height:0;
    visibility:hidden;
    width:0;
    height:0
}

* html .clearfix,*:first-child+html .clearfix{zoom:1} 
```

# tapestry - 可以在没有classcastexception的情况下将Tapestry Plastic与普通java（没有groovy）一起使用

> ID：14206276
> 
> 赞同：0
> 
> 时间：2013-01-08T00:09:20.383
> 
> 标签：tapestry

嗨 Tapestry 塑料是一个强大的框架，它通过动态修改字节码来提供类元功能，这要感谢漂亮的 dsl。

[http://tawus.wordpress.com/2011/04/18/meeting-plastic/](http://tawus.wordpress.com/2011/04/18/meeting-plastic/)

然而，在所有样本和测试挂毯中，人们都使用 groovy ......我想将它与 java 一起使用，但由于生成的对象上的 ClassCastException 而我从未设法这样做？我知道这是一个类加载器问题，但诀窍是什么？

我们可以使用带有普通 Java 和外部 Tapestry Web 框架的 Tapestry Plastic 吗？

```
 ...
     PlasticManager pm = PlasticManager.withContextClassLoader().packages (  Arrays.asList( "plastic" )).
     delegate(new StandardDelegate(new ToStringTransformer())).create();

     Foo foo = (Foo) pm.getClassInstantiator("plastic.controlled.Foo").newInstance();

     ... 
```

这将返回一个 ClassCastException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:36:48.063

是的，您可以将 Plastic 与 Java 一起使用。这就是它在 Tapestry 核心中的使用方式。在java中你必须做类似的事情

```
Object foo = pm.getClassInstantiator("plastic.controlled.Foo").newInstance() 
```

您得到 a 是`ClassCastException`因为您试图将转换后的类放入 Foo 类中。转换后的类不是从原始类继承的，因此不能转换为它。

当您使用访问实例时，`Object`您只能访问`Object`诸如等之类的方法`toString()`，`equals()`这显然是非常有限的。这里的技巧是使用接口/实现模式。您可以让受控类实现给定接口，然后您可以使用该接口访问新对象。

```
MyInterface myInterface = (MyInterface)pm.getClassInstantiator(
    "plastic.controlled.Foo").newInstance() 
```

查看我博客上的其他教程，看看它是如何完成的。

希望能帮助到你！

# java - 想用java在窗口上创建鼠标点击

> ID：14206278
> 
> 赞同：0
> 
> 时间：2013-01-08T00:09:25.723
> 
> 标签：java

我想创建 java 代码，它会刺激鼠标点击 Windows 操作系统应用程序的任何窗口 - 例如浏览器、word 等。

有人可以建议我如何开始吗？我不知道这需要哪些 API。我还需要知道这是否是一项非常复杂的任务，并且需要的不仅仅是 Java 的核心概念。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T00:16:31.207

您要用于此任务的`Robot`类是： http: [//docs.oracle.com/javase/7/docs/api/java/awt/Robot.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)

它可能需要比核心概念更多的知识（取决于您认为核心是什么），但 Java 是处理这类事情的好语言。

取决于你想用这些知识做什么，这最终可能是一项非常复杂的任务。例如，如果您试图单击屏幕上的特定按钮，则需要某种方法来分析屏幕（一项非常艰巨的任务）。如果您已经知道每个按钮的位置，您只需移动到 x、y 位置并导致点击发生。

# ruby-on-rails - 如何设计允许用户创建子模块的数据库？

> ID：14206280
> 
> 赞同：0
> 
> 时间：2013-01-08T00:09:29.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, railstutorial.org

抱歉，我没有合适的术语来更简洁地描述我的数据库设计问题。放入一个示例场景：

*   用户 Charley 登录到一个论坛（“论坛”在这里只是作为示例应用程序），在他被带到论坛界面之前，他必须选择他想进入的房间。唯一可用的房间是“人物进入戏剧”和“人物进入科幻”。查理对选择不满意，并有能力**让自己的房间**名为“人们行动”，然后他选择进入。“People into action”与其他房间有完全一样的论坛界面，除了没有人。

*   用户 Franny 登录同一个论坛应用程序，现在看到有 3 个房间，包括 Charley 之前创建的一个房间。然后她也可以创建自己的房间，或者进入查理刚刚创建的房间。

*为了进一步澄清，我设想`/roomname1/forum`和`/roomname2/forum`，其中论坛是具有相同显示和功能的同一个应用程序，但它显示的帖子会根据 URI 的第一部分与`roomname`. 我难以理解的是如何正确地将帖子`post.room`（假设一个房间`has_many`发布，一个帖子`belongs_to`一个房间）与标识的 URI的*第一部分*`roomname`相关联。

我最近刚刚完成了 Hartl 的[Rails 教程](http://ruby.railstutorial.org/chapters/following-users)，并认为我会获得更多经验，对默认的类似 Twitter 的应用程序进行自己的修改。我的目标是设置这些“房间”，用户可以在其中看到仅与他们所在的“房间”相关联的微帖子的世界，而不是其他人。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:21:48.570

有很多方法可以做到这一点，这里有一个快速的高水平，应该让你开始。

*   创建模型和控制器（例如 Room/RoomsController）
*   RoomsController 可以是[RESTfull](https://stackoverflow.com/questions/2504123/generate-a-controller-with-all-the-restful-functions)
*   定义你的[路线](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)
*   用户转到房间控制器，索引操作，将看到房间列表。
*   用户可以查看所有房间并添加/输入房间（输入可以是您的显示操作，添加可以是创建）

您可以构建并添加到此，以使用户能够删除/编辑他们创建的房间作为下一步。您可能想要关联帖子，`belong_to`例如，它们可以关联。希望这可以帮助您入门！

# html - 无法在移动/ipad 浏览器上浮动 twitter 引导导航栏

> ID：14206281
> 
> 赞同：6
> 
> 时间：2013-01-08T00:09:32.847
> 
> 标签：html, mobile, twitter-bootstrap

当您向下滚动页面时，使用“navbar”和“navbar-fixed-top”类会使导航栏浮动在页面顶部。这似乎不适用于移动/ipad 浏览器。为什么以及如何让它们也漂浮在移动浏览器上。在 ipad(safari, chrome) Android(firefox) Windows Phone(IE) 上试过这个。

```
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="http://code.jquery.com/jquery.min.js"></script>

    <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">

</head>

<body>
<div class="navbar navbar-inverse navbar-fixed-top">
<div class="navbar-inner">
  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
  </a>
  <span class="brand"><img title="Logo" alt="Logo" src="static/images/iu_logo.gif" /></span>
  <div class="nav-collapse">
  <ul class="nav">
    <li class="active">
        <a id="homeLink" href="#">Home</a>
    </li>
    <li class="dropdown">
      <a class="dropdown-toggle" id="newsLink" href="#">News</a>
      <ul class="dropdown-menu">
        <li><a href="#">Link 1</a></li>
        <li><a href="#">Link 2</a></li>
        <li class="divider"></li>
        <li><a href="#">Another link</a></li>
      </ul>
    </li>
  </ul>
  <ul class="nav pull-right">
    <li id="loginLink"><a href="#" id="loginButton">Login</a></li>
  </ul>
  </div>
</div>
</div>
50 lines of text (just to have the page scrollable)
</body>
</html> 
```

我确实在 head 标签中有以下行，以启用移动设备的引导响应。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

有什么建议么

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T20:43:34.127

我有同样的问题，我对其他框架进行了一些调查。由于 JQuery Mobile 在固定导航栏上正常工作，因此问题必须仅在 Bootstrap 端，实际上他们故意禁用了它（下面有更多详细信息）。

您基本上可以通过添加内联样式来尝试。

```
<div class="navbar navbar-fixed-top navbar-inverse" style="position:fixed"> 
```

当然，您需要相应地调整导航栏样式。我做了如下：

```
/* Override Bootstrap Responsive CSS fixed navbar */
@media (max-width: 979px) {
  .navbar-fixed-top,
  .navbar-fixed-bottom {
      position: fixed;
      margin-left: 0px;
      margin-right: 0px;
  }
} 
```

我在响应式 css 之后添加了这个。

我尝试了各种设备......低成本的安卓平板电脑，我的高端安卓手机。我从未在 iOS 上尝试过。最令人惊奇的是它在 Firefox for Android 上运行得*非常流畅。*

这是Bootstrap的作者在github上回复的问题之一，参考了JQM采用的详细解决方案：[https ://github.com/twitter/bootstrap/issues/1617](https://github.com/twitter/bootstrap/issues/1617)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T11:19:28.957

Bootstrap 在小屏幕中不使用固定导航栏，因为它在移动设备中运行不佳。在`bootstrap-responsive.css`您可以找到：

```
@media (max-width: 979px) {
  ...
  .navbar-fixed-top,
  .navbar-fixed-bottom {
    position: static;
  }
  ...
} 
```

尝试删除它或者只是不加载`bootstrap-responsive.css`样式表，并检查移动设备上会发生什么，然后你会发现它是必要的:) 在我的低成本 Android 移动固定元素在滚动期间不固定。遍历所有可见屏幕。滚动完成后，浏览器重新计算固定元素的位置，导航栏跳转到正确的位置。

# c - 从文本文件中删除行的最后一个成员

> ID：14206289
> 
> 赞同：0
> 
> 时间：2013-01-08T00:10:01.833
> 
> 标签：c, char

我有一个文本文件`data.txt`，我想删除每行的最后一个成员：

这是文本文件：

```
2031,2,0,0,0,0,0,0,54,0,
2027,2,0,0,0,0,0,0,209,0,
2029,2,0,0,0,0,0,0,65,0,
2036,2,0,0,0,0,0,0,165,0, 
```

我想删除所以它变成：

```
2031,2,0,0,0,0,0,0,
2027,2,0,0,0,0,0,0,
2029,2,0,0,0,0,0,0,
2036,2,0,0,0,0,0,0, 
```

我在**C**中工作，但由于数字可以有两位或三位数字，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:15:48.563

的几个用途`strrchr()`可以完成这项工作：

```
#include <string.h>

void zap_last_field(char *line)
{
    char *last_comma = strrchr(line, ',');
    if (last_comma != 0)
    {
        *last_comma = '\0';
        last_comma = strrchr(line, ',');
        if (last_comma != 0)
            *(last_comma + 1) = '\0';
    }
} 
```

似乎工作的编译代码。请注意，给定一个包含单个逗号的字符串，它将删除该逗号。如果您不希望这种情况发生，那么您必须更加努力地工作。

### 测试代码`zap_last_field()`

```
#include <string.h>

extern void zap_last_field(char *line);

void zap_last_field(char *line)
{
    char *last_comma = strrchr(line, ',');
    if (last_comma != 0)
    {
        *last_comma = '\0';
        last_comma = strrchr(line, ',');
        if (last_comma != 0)
            *(last_comma + 1) = '\0';
    }
}

#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    char *line = malloc(4096);
    if (line != 0)
    {

        while (fgets(line, 4096, stdin) != 0)
        {
            printf("Line: %s", line);
            zap_last_field(line);
            printf("Zap1: %s\n", line);
        }
        free(line);
    }
    return(0);
} 
```

这已经过审查，`valgrind`并且在原始数据文件和下面列出的损坏数据文件上都可以。动态内存分配可以`valgrind`最大程度地发现任何问题。

我强烈怀疑评论中报告的核心转储发生是因为替代测试代码试图将文字字符串传递给函数，这将不起作用，因为文字字符串通常不可修改，并且此代码在原地修改字符串。

### 测试代码`zap_last_n_fields()`

如果您想删除最后几个字段（受控数量的字段），那么您可能需要传入要删除的字段数的计数并添加一个循环。请注意，此代码使用 VLA，因此需要 C99 编译器。

```
#include <string.h>

extern void zap_last_n_fields(char *line, size_t nfields);

void zap_last_n_fields(char *line, size_t nfields)
{
    char *zapped[nfields+1];

    for (size_t i = 0; i <= nfields; i++)
    {
        char *last_comma = strrchr(line, ',');
        if (last_comma != 0)
        {
            zapped[i] = last_comma;
            *last_comma = '\0';
        }
        else
        {
            /* Undo the damage wrought above */
            for (size_t j = 0; j < i; j++)
                *zapped[j] = ',';
            return;
        }
    }
    zapped[nfields][0] = ','; 
    zapped[nfields][1] = '\0';
}

#include <stdio.h>

int main(void)
{
    char line1[4096];

    while (fgets(line1, sizeof(line1), stdin) != 0)
    {
        printf("Line: %s", line1);
        char line2[4096];
        for (size_t i = 1; i <= 3; i++)
        {
            strcpy(line2, line1);
            zap_last_n_fields(line2, i);
            printf("Zap%zd: %s\n", i, line2);
        }
    }
    return(0);
} 
```

示例运行 - 使用您的`data.txt`作为输入：

```
Line: 2031,2,0,0,0,0,0,0,54,0,
Zap1: 2031,2,0,0,0,0,0,0,54,
Zap2: 2031,2,0,0,0,0,0,0,
Zap3: 2031,2,0,0,0,0,0,
Line: 2027,2,0,0,0,0,0,0,209,0,
Zap1: 2027,2,0,0,0,0,0,0,209,
Zap2: 2027,2,0,0,0,0,0,0,
Zap3: 2027,2,0,0,0,0,0,
Line: 2029,2,0,0,0,0,0,0,65,0,
Zap1: 2029,2,0,0,0,0,0,0,65,
Zap2: 2029,2,0,0,0,0,0,0,
Zap3: 2029,2,0,0,0,0,0,
Line: 2036,2,0,0,0,0,0,0,165,0,
Zap1: 2036,2,0,0,0,0,0,0,165,
Zap2: 2036,2,0,0,0,0,0,0,
Zap3: 2036,2,0,0,0,0,0, 
```

它还可以正确处理文件，例如：

```
2031,0,0,
2031,0,
2031,
2031
, 
```

# javascript - jQuery Spinner：非数值

> ID：14206291
> 
> 赞同：3
> 
> 时间：2013-01-08T00:10:11.677
> 
> 标签：javascript, jquery, jquery-ui-spinner

我正在使用 jQuery Spinner，设置了 min (0) 和 max (500) 值。如何防止用户在输入框中直接输入非数值（或 0-500 范围之外的值）？当用户使用微调器按钮时，最小值和最大值起作用，但在输入表单中输入内容时不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T00:31:23.297

您*可以*使用以下技术强制输入数字：

```
var MIN = 0;
var MAX = 500;

$('#foo').on('keyup', function(e) {
  var v = parseInt($(this).val());
  if (isNaN(v)) {
     return $(this).val(MIN);
  }
  if ($(this).val() < MIN) {
     $(this).val(MIN);
  } else if ($(this).val() > MAX) {
     $(this).val(MAX); 
  } else {
     $(this).val(v);
  }
}); 
```

（参见示例：http: [//jsfiddle.net/foxbunny/ustFf/](http://jsfiddle.net/foxbunny/ustFf/)）

但我**不推荐它**。这不是预期的文本框行为，它往往会使至少一些用户感到困惑。因此，如果值不在预期范围内，最好只显示警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:35:24.020

您可以将其设置为**readOnly**：

```
document.getElementById('mySpinner').readOnly = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T04:11:51.747

我认为这是执行此操作的正确方法，而不是公认的方法，因为这要简单得多。

```
$('YOURID/CLASS').spinner({
    min: 1,
    max: 100,
    change: function (event, ui ) {
        $(this).spinner('value', parseInt($(this).spinner('value'),10) || 1);
    }
}); 
```

任何不是数字的输入都将被数字 1 替换。您也可以替换 || 1 带有一个警告框，用于提醒用户他们在框中输入的数字无效。

您还应该使用 javascript 验证器在表单提交时检查数字，并在读取输入时使用另一个服务器端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-08T17:13:19.967

我是这样做的：

```
jQuery( "#spinner" ).spinner({ min: 0 });

jQuery( "#spinner").keyup(function() {
            if(  isNaN (jQuery(this).val() )){ //Only numbers !
                jQuery(this).prop("value", "0") ; //Back to 0, as it is the minimum
            }
      }); 
```

完毕。

# java - 输出说明

> ID：14206293
> 
> 赞同：1
> 
> 时间：2013-01-08T00:10:22.857
> 
> 标签：java

这个问题可能是一个非常基本的问题。我是 Java 新手，所以请多多包涵。我的代码：

```
class A
{
     int b=10;

     A()
     {
          this.b=7;
     }

     int f()
     {
          return b;
     }
}

class B extends A{ int b; }

class Test
{
     public static void main(String[] args)
     {
          A a=new B();
           System.out.println(a.f());
     }
} 
```

为什么输出是 7？B类没有自己的实例变量`b`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T00:11:18.550

它会，但该功能`f`只能看到它的`b`版本`A`。因此函数返回 7。

如果您要将函数复制`f`到 中，`class B`您会看到正在返回`b`的成员。`class B`

正如[隐藏类的实例变量所](https://stackoverflow.com/questions/7794621/hiding-instance-variables-of-a-class)解释的，Java 变量不是多态的。正如您所期望的，这 2 个`b`变量是 2 个不同的变量，但是当您调用该函数时`A.f`，它只能看到具有的一个`b`变量`A`。所以它返回`A.b`而不是`B.b`。

因此，要回答您的问题，B 类确实有自己的实例变量`b`，它完全独立，`A.b`但您目前无法访问它，因此您看不到它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:17:34.123

您的类型参考是`A`：

```
A a = new B(); 
```

因此，实例字段/静态字段和静态方法将从 提供`A`，只要相关方法（在您的情况下`f()`）不被`B`.

在其他语言中，如 Scala，变量可以在子类中重新定义，甚至可以从超类型引用中定位。

# facebook - 是否可以在 facebook Feed Dialog 中列出朋友？

> ID：14206294
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:10:28.263
> 
> 标签：facebook, facebook-graph-api

在 Facebook 提要对话框中，是否可以发布一个提要，其中列出了将在帖子中列出的朋友，例如

“...与 Friend1，Friend1 在某个地方”

例如在这个链接

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

它显示了一个图像“发布到你的墙上”，我也可以让它列出朋友吗？

这是可能的还是我必须使用 Open graph 或其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:47:21.993

您不必为此使用 Open Graph。只需使用带有参数的**Feed 对话框：**

```
tags: USER_ID1, USER_ID2,
place: 107905939237016 
```

提要将发布如下：

> “...与 Friend1，Friend1 在某个地方”

# ruby-on-rails - 如何在 Rails 中指定与自定义主键的多态关联

> ID：14206296
> 
> 赞同：3
> 
> 时间：2013-01-08T00:11:09.623
> 
> 标签：ruby-on-rails, polymorphic-associations

我有一些使用[paper_trail](https://github.com/airblade/paper_trail/)进行版本跟踪的 ActiveRecord 类。AR 类具有基于其表名的自定义主键（例如`Item.ItemID`，而不是`Item.id`），以遵守业务数据库约定。

paper_trail 指定每个跟踪类的多态关系，因此：

```
class TrackedExample < ActiveRecord::Base
    set_table_name 'TrackedExample'
    set_primary_key 'TrackedExampleID'

    # simplified from https://github.com/airblade/paper_trail/blob/master/lib/paper_trail/has_paper_trail.rb
    has_many :versions
        :class_name => 'Version'
        :as         => :item,
end

class AnotherTrackedExample
    set_table_name 'AnotherTrackedExample'
    set_primary_key 'AnotherTrackedExampleID'

    has_many :versions
        :class_name => 'Version'
        :as         => :item,
end

# from https://github.com/airblade/paper_trail/blob/master/lib/paper_trail/version.rb
class Version
    belongs_to :item, :polymorphic => true
    ...
 end 
```

如果我没有使用自定义主键，版本对象可以使用`Version#item`. 当我尝试它时，我收到一个错误：

```
# This should give back `my_tracked_example`
my_tracked_example.version.first.item

=> TinyTds::Error: Invalid column name 'id'.: EXEC sp_executesql N'SELECT TOP (1) [TrackedExample].* FROM [TrackedExample] WHERE [TrackedExample].[id] = 1 ORDER BY TrackedExample.TrackedExampleID ASC' 
```

有没有办法让 Version#item 执行正确的查询？我会期待这样的事情：

```
EXEC sp_executesql N'SELECT TOP (1) [TrackedExample].* FROM [TrackedExample] WHERE [TrackedExample].[TrackedExampleID] = 1 ORDER BY TrackedExample.TrackedExampleID ASC' 
```

我通过 TinyTDS 和[activerecord-sqlserver-adapter](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter)使用 Rails 3.1.0、paper_trail 2.6.4 和 MS SQL Server 。

**编辑：**我通过添加计算列`TrackedExample.id`和`AnotherTrackedExample.id`引用主键值来解决这个问题。这不是一个合适的解决方案（Rails 仍在进行错误的查询），但它可能对其他匆忙的人有用。

微软 SQL：

```
ALTER TABLE TrackedExample
    ADD COLUMN id AS TrackedExampleID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-04-03T01:20:36.333

而不是在迁移文件中指定`t.references :item`, 。`polymorphic: true`您只需指定`item_id`and`item_type`如下：

```
t.string :item_id

t.string :item_type 
```

Rails 会自动`primary_key`为`item_id`正确的类型选择正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:35:06.797

我没试过，但这可能有效

```
class Version
  belongs_to :item, :polymorphic => true, :primary_key => 'TrackedExampleID'
  ...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T14:35:04.960

After scouring the PaperTrail documents it doesn't look like you can override what column `item_id` references (i.e. the primary key of the Item's table), so I think you have two main options:

**1\. Create an `id` column that does not have the name of the class in it. So, `id` instead of `TrackedExampleID`.**

You said you already did this as a quick fix.

**2\. Fork and patch PaperTrail to allow you to pass what column to use when querying for `item_id`.**

This could either be the value set with `set_primary_key 'TrackedExampleID'` or it could be something set like `has_paper_trail primary_key: 'TrakedExampleID'`.

Let us know what you end up with.

# kernel - FreeBSD 内核映像究竟是如何构建的？

> ID：14206303
> 
> 赞同：4
> 
> 时间：2013-01-08T00:11:33.433
> 
> 标签：kernel, freebsd

我正在尝试研究 FreeBSD 内核的构建过程。我在调用 make 时添加了 V=1，但仍然无法获取内核映像链接阶段的详细信息。我只能收到一条消息

```
linking kernel.debug
text       data     bss     dec       hex    filename
12806916   1293908  1116688 15217512  e83368 kernel.debug 
```

二进制文件就在那里。我如何知道最终链接的细节（使用了哪些目标文件以及链接器使用了哪些选项）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:59:57.450

内核是使用命令“make buildkernel”构建的。如果您查看`/usr/src/Makefile.inc1`buildkernel 的定义：

```
 @echo "--------------------------------------------------------------"
    @echo ">>> stage 3.2: building everything"
    @echo "--------------------------------------------------------------"
    cd ${KRNLOBJDIR}/${_kernel}; ${KMAKE} all -DNO_MODULES_OBJ
    @echo "--------------------------------------------------------------"
    @echo ">>> Kernel build for ${_kernel} completed on `LC_ALL=C date`"
    @echo "--------------------------------------------------------------" 
```

如果您查看内核构建 makefile `/usr/obj/usr/src/sys/GENERIC/Makefile`（假设您正在构建 GENERIC 内核），您将看到这些文件`kern.pre.mk`并`kern.post.mk`包含在内。查看`kern.pre.mk`您将看到以下链接器定义：

```
SYSTEM_LD= @${LD} -Bdynamic -T ${LDSCRIPT} \
        -warn-common -export-dynamic -dynamic-linker /red/herring \
        -o ${.TARGET} -X ${SYSTEM_OBJS} vers.o 
```

不同架构的`ldscript`文件可以在`/usr/src/sys/conf/`.

# github - 如何使用新的 gist 界面嵌入来自 GitHub gist 的单个文件？

> ID：14206307
> 
> 赞同：110
> 
> 时间：2013-01-08T00:11:59.213
> 
> 标签：github, gist

新的 GitHub Gist 界面有一个用于整个 gist 的嵌入片段，它嵌入了 gist 中的所有文件。旧界面在 gist 中为每个文件嵌入了代码。有人知道嵌入单个文件是否有技巧吗？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-01-10T21:15:15.170

从左侧获取 gist URL，然后`.js`添加查询字符串`?file=myFile.blah`，例如

```
<script src="https://gist.github.com/4505639.js?file=macroBuild.scala" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-11-07T13:20:49.510

# 中等的

对于想在Medium上使用的人来说，Medium不支持 **也**不会在你粘贴URL*后添加的时候查询URL中的参数。*因此，只需按顺序执行这 4 个**步骤**。

所以：

> ⚠️ 订单很重要！

1.  复制（多文件）gist 路径。例如：

```
https://gist.github.com/MojtabaHs/91e34fd0e987fe7ce801936dc6ece0e8 
```

* * *

2.  将其粘贴到不保留文本丰富数据的 Medium 文章之外的其他位置。例如在线文本框：

[![演示](../Images/1bc55f8934baefe6988e047532759861.png)](https://i.stack.imgur.com/MPLKH.png)

[⚠️ 不要点击搜索或返回按钮]

* * *

3.  将文件的查询参数附加到 URL。例如：

```
https://gist.github.com/MojtabaHs/91e34fd0e987fe7ce801936dc6ece0e8?file=Interface.swift 
```

[请注意，`?file=Interface.swift`在 URL 的末尾，对吗？]

* * *

4.  复制粘贴到文章里看看神奇

### 使用这种方法的一篇文章：

**[使用 SwiftUI 实现自定义活动指示器](https://mojtabahs.medium.com/implement-custom-activity-indicator-in-the-swiftui-9e0f3d4155e4)**

* * *

# 必须考虑的最重要的注意事项：

⚠️ 请注意，您**必须**在媒体中复制未格式化的纯文本，并且在将 URL 粘贴到媒体后不得编辑**！**您可以将链接复制到 google.com 等在线文本框中，并在附加查询后将其复制回来并粘贴到 Medium 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-24T15:55:42.730

[GitHub在他们的网站](https://help.github.com/en/articles/creating-gists#about-gists)上提供了同样的信息。正如其他人所说，官方方法是附加`?file=name-of-file.ext`到嵌入代码 URL 的末尾，以便仅嵌入调用的文件`name-of-file.ext`（您当然可以将名称更改为文件的名称）。例如，如果我想`getGitContents.js`从 Gist 嵌入文件，[`https://gist.github.com/westc/afac9258389fdfd2fdaf134ffaa0e923`](https://gist.github.com/westc/afac9258389fdfd2fdaf134ffaa0e923)我可以使用以下内容：

```
<script src="https://gist.github.com/westc/afac9258389fdfd2fdaf134ffaa0e923.js?file=getGitContents.js"></script> 
```

此外，还有关于[此的 YourJS 博客文章](https://www.yourjs.com/blog/embed-github-gist-file/)，它允许您输入用户名并查看所有要点和底层单个文件的嵌入代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-16T13:49:06.373

仅供其他可能正在研究的人参考。

如果您使用的是 Wordpress，您可以使用插件[oEmbed-gist](https://wordpress.org/plugins/oembed-gist/)和简码样式实现此目的：

[gist id="your-gist-id-here" file="your-file-name.js"]。

# jboss7.x - JBoss AS 中的 System.out.println() 消息

> ID：14206315
> 
> 赞同：3
> 
> 时间：2013-01-08T00:12:39.900
> 
> 标签：jboss7.x

JBoss AS 是否有直接的方法在 Eclipse 中将消息打印到控制台？我打算仅将它们用于调试目的，仅此而已（我发誓）。

我是 JBoss 的新手，我不知道从哪里开始以及如何让我的 System.out.println() 消息出现在控制台中。

不幸的是，今天我一直在努力实现这个相当自然的要求。我正在使用 JBoss AS 7.1。

编辑：

好的，看来这次问题出在屏幕前了。即使在 server.log 中，我也找不到我的日志记录。原因是我正在执行的代码引发了一个错误，导致系统输出无法打印到控制台。对不起。感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T01:44:45.790

如果你在你的应用程序中创建一个，你可以在文件夹内的 ,`Sysout`中找到它`server.log``$JBOSS_HOME/standalone/log`

然而，这不是最佳实践，因为日志中有很多配置和可能性。[您可以在此处](https://docs.jboss.org/author/display/AS71/Logging+Configuration)查看更多信息

但是，如果你只是说它`System.out.println('hello world')`会在`server.log`

启动后的所有日志记录都在那里进行，因此您可以在那里检查您的`System.out.println()`东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T03:42:38.370

使用默认安装配置控制台处理程序和文件处理程序。如果你想登录，你只需要使用记录器。打印到`System.out`或者`System.err`它也可以工作，但我建议使用像 JBoss Logging、SLF4J 甚至只是 JUL 这样的日志外观

如果您想在 eclipse 中运行 JBoss AS，最简单的方法是使用[JBoss Tools](http://www.jboss.org/tools)。您可以在本地 eclipse 中启动、停止和部署您的应用程序以进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-25T15:09:44.920

在我的项目中，我有 2 个 log4j.proprties 文件，一个由 jboss 提供，另一个在我的工作区中。我删除了一个 log4j.properties 文件，现在我可以在控制台上看到 sysout。

# jquery - 从表拖放到同一个表

> ID：14206323
> 
> 赞同：0
> 
> 时间：2013-01-08T00:13:14.080
> 
> 标签：jquery, ruby-on-rails, drag-and-drop

我有一个页面看起来是这样的：

![在此处输入图像描述](../Images/05380d3da2551bb29f77eb389c7f5047.png)

这些表同一个表被称为：Tasks。

在第一个中，我展示了`Done = False`.

在第二个中，我展示了`Done = True`.

我想将任务从下表拖放到上表（当我将其拖放到上表时，我想将完成从 True 更改为 False）。

有人可以知道一个教程我该怎么做吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:05:21.590

我建议使用可排序的 JqueryUI。当在列表之间拖动项目时，您可以绑定一些很好的事件。 [Receive](http://api.jqueryui.com/sortable/#event-receive)可能是与您最相关的一个。因此，根据您引用的示例，我制作了这个[JSFiddle 来演示](http://jsfiddle.net/VeWWv/7/)：

```
$(function() {
  $( "#sortable1, #sortable2" ).sortable({
    connectWith: ".connectedSortable",
    receive: function( event, ui ) {

        //This function is called whenever you drag between 
        //your javascript here to update your property.
        alert("foo");
    }                               
  }).disableSelection();
}); 
```

# javascript - 使用 Google Maps 和 Ruby 添加标记

> ID：14206328
> 
> 赞同：0
> 
> 时间：2013-01-08T00:14:23.947
> 
> 标签：javascript, ruby-on-rails, ruby, google-maps, google-maps-api-3

我在 ruby​​ 上并在页面上设置地图。我可以在初始化时添加标记，但我想要的是遍历我的@events 并找到经度和纬度字段并执行类似的操作

```
<% @event.each do |event|%>
  <script type="text/javascript">
    var long = <%= event.longitude %>;
    var lati = <%= event.latitude %>;
    addMarker(long, lati);
  </script>
<% end %> 
```

我不熟悉google api，但希望有可能。

这是我在构建地图 api 方面所拥有的

```
function initialize() 
{
    var lat, lon, map, myOptions;
    //check if user has geo feature
    if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(
    //get position

    function(position){
        lat = position.coords.latitude;
        lon = position.coords.longitude;

        //init map
        myOptions = {
           center: new google.maps.LatLng(lat, lon),
           zoom: 8,
           mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
            var myLatlng = new google.maps.LatLng(46.4352,-80.9455);
    var marker = new google.maps.Marker({
        position: myLatlng,
        title:"Hello World!"
    });
    // To add the marker to the map, call setMap();
    marker.setMap(map);
    },
    // if there was an error
    function(error){
        alert('ouch');
    });
    }
    //case the users browser doesn't support geolocations
    else 
    {
        alert("Your browser doesn't support geolocations, please consider downloading Google Chrome");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:26:55.130

这是我的建议：

```
<script type="text/javascript">

  function addMarker(lat, lng) {
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat, lng),
      map: map
    });
  }

  <% @events.each do |event| %>
    addMarker(<%= event.latitude %>, <%= event.longitude %>);
  <% end %>

</script> 
```

创建一个`addMarker`函数（如果它尚不存在），它接受两个参数——纬度和经度——并将相应的标记添加到现有地图。然后，您可以使用 Ruby 创建一个对`addMarker`per的调用`@event`。

有一些方法可以进一步优化。例如，您可以有一个单独的 Ruby 脚本，将坐标输出为 JSON，并使用异步 HTTP 请求（也称为 Ajax）在运行时将坐标加载到数组中，然后您可以使用该数组来填充地图。

# ios - 带有 Cocoapods 的 SocketRocket 给出错误

> ID：14206330
> 
> 赞同：0
> 
> 时间：2013-01-08T00:14:29.417
> 
> 标签：ios, xcode, cocoapods, socketrocket

我今天才开始使用 CocoaPods……首先我添加了 AFNetworking，它运行良好……然后我需要 SocketRocket……

但是，SRWebSocket.m 在添加 CocoaPods 后会引发 9 个警告和 6 个错误......这些错误与保留/释放不可用和 ARC 限制有关......警告都是：

```
'dispatch_get_current_queue' is deprecated: first deprecated in iOS 6.0 
```

所以我猜我可能错过了以某种方式进行设置的步骤？

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:24:14.220

所以有几件事

1.  您可能应该向 SocketRocket 提交一个拉取请求，以删除其使用`dispatch_get_current_queue`并将其更改为替换它的任何内容，但这是一个警告，因此现在不是一个大问题。

2.  由于 SocketRocket 项目不支持/使用 ARC（可能是因为它具有保留/释放调用），因此您需要进入 Build Phases > Compile Sources 并找到所有 SocketRocket 类并添加`-fno-objc-arc`编译器标志。这将让您编译，理想情况下，尽管应更新 SkyRocket Podspec 以指定应关闭 ARC。`compiler_flags`Podspec 中的属性应该包括`-fno-objc-arc`，你应该提交一个拉取请求来更新它。

**编辑**

有趣的是，SocketRocket 吹嘘它使用 ARC，我没有看到任何保留/释放的调用（在 CFRetain/CFRelease 之外，这在 ARC 中很好/必要）。

对于 podspec 存储库（0.1.0 和 0.2.0）中列出的两个版本都没有保留/释放调用，我对 SRWebSocket.m 的源代码有所了解。

0.2.0：[https ://github.com/square/SocketRocket/blob/v0.2.0/SocketRocket/SRWebSocket.m](https://github.com/square/SocketRocket/blob/v0.2.0/SocketRocket/SRWebSocket.m)

0.1.0：[https ://github.com/square/SocketRocket/blob/82c9f8938f8b9b7aa578866cb7ce56bc11e52ced/SocketRocket/SRWebSocket.m](https://github.com/square/SocketRocket/blob/82c9f8938f8b9b7aa578866cb7ce56bc11e52ced/SocketRocket/SRWebSocket.m)

奇怪的？？您确定收到有关 SRWebSocket.m 的错误吗？

**编辑 2**

经过进一步挖掘并如评论中所述。`dispatch_release`并且`dispatch_retain`在针对 iOS 6.0+ 或 OS X 10.8+ 时是不允许的，因此您需要删除这些调用或执行项目[拉取请求 55中建议的操作](http://github.com/square/SocketRocket/pull/55)

# windows - 是否每个运行的窗口都使用 System.Windows.Forms.Form？

> ID：14206334
> 
> 赞同：0
> 
> 时间：2013-01-08T00:15:06.273
> 
> 标签：windows, forms, system

**是否每个运行的窗口都使用 System.Windows.Forms.Form？**

标题说了算。从 Java 到 C++ 到 Visual Basic 到控制台应用程序。每个编译的窗口是否都使用类*System.Drawing.Forms.Form*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:44:19.957

[不。](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)

在 .NET 中，System.Windows.Forms（本质上）只是一个绘制窗口的工具，但它不是唯一的工具。其他语言有自己的工具；Java 有 Swing 库，Python 和 Perl 有其他几个 GUI 工具包，每个工具包做的事情都不同。控制台应用程序使用完全不同的方式呈现信息。事物的绘制方式不仅取决于语言，还取决于所使用的 GUI API。例如，一个窗口可能完全使用 C++ 和 DirectX 以及自定义绘图例程来绘制；这些根本不会使用 .NET，也不会使用 .NET 使用的任何底层工具。可以使用 C++ 和 Open GL 绘制相同的窗口；可能会显示相同的数据，但调用来绘制它的例程会有所不同。事实上，如果你真的很受虐，你可以用组装完成所有的绘图！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:46:05.697

简短回答否。 System.Windows.Forms.Form 是 WinForms .Net 库用来与操作系统提供的实际 Windows 交互的抽象。

其他语言有其他抽象：Java 可以使用 Swing 或 AWT 或任何其他提供不同方式来绘制表单的 UI 库。

同样，C++ 可以对操作系统提供的对象（即 MFC 库）进行抽象，或者直接使用 Windows API。

所有的 UI 库最终都需要使用 Windows API 来绘制它们的窗口，但并不是所有的 UI 库都使用相同的程度，因此 .Net 的 UI 库将使用一些与 Java 或 C++ 的 UI 库相同的 API 调用。

如果我找到关于 UI 和 UI 库如何在 Windows 上工作的很好的解释，我会更新这个答案。

我记得不久前读过一篇不错的，其中包含 Windows 8 的一些历史和变化，但不记得在哪里。

# ftp - 通过 FTP 上传 +100MB 文件，但连接中断

> ID：14206336
> 
> 赞同：0
> 
> 时间：2013-01-08T00:15:09.817
> 
> 标签：ftp

我正在尝试将一个较大的文件上传到 Web 服务器 - 通过 Wi-Fi 使用 CUTEftp Professional + VOIP Internet 连接。文件大小为 136MB（它是一个视频）。

它一次又一次地分裂。在某些时候，它会停止上传并从头开始。

无论如何，关于任何上传管理器的任何想法，建议，由于这些情况我可以使用的软件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:17:51.763

你为什么不试试免费的 FileZilla 而不是 CuteFTP？它支持上传简历。只需在 google 中搜索 FTP Client Upload Resume，您会发现很多其他 FTP 客户端。但我个人推荐FileZilla，它支持上传简历功能。如果上传中途中断，它将继续。

# mysql - mysql选择每种类型的3个随机行

> ID：14206339
> 
> 赞同：2
> 
> 时间：2013-01-08T00:15:20.190
> 
> 标签：mysql, random

我创建了以下查询：

```
 SELECT random.aid, random.rand_pid, r3.filepath, r3.filename, r3.pid
 FROM 
 (SELECT r.aid,
    (SELECT r2.pid
     FROM cpg_pictures r2
     WHERE r2.aid = r.aid
     ORDER BY RAND() LIMIT 1) AS 'rand_pid'
 FROM cpg_pictures r
 GROUP BY r.aid
 ORDER BY r.aid DESC
 LIMIT 10
 ) random
 LEFT JOIN cpg_pictures AS r3 ON r3.pid = rand_pid 
```

cpg_pictures 是一个包含图片的表，aid 是专辑 ID

此查询将从每个相册 id 中获取 1 张随机图片，

我希望能够修改查询，以便我可以为每个专辑 ID 获取 3 张随机图片，因此我们将不胜感激。

我还想将这个最终结果与 cpg_albums 表结合起来，其中 cpg_pictures.aid = cpg_albums.aid

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:05:58.117

你试过这个吗？

```
 SELECT random.aid, random.rand_pid, r3.filepath, r3.filename, r3.pid
 FROM 
 (SELECT r.aid,
    (SELECT r2.pid
     FROM cpg_pictures r2
     WHERE r2.aid = r.aid
     ORDER BY RAND() LIMIT 1) AS 'rand_pid'
 FROM cpg_pictures r
 GROUP BY r.aid
 ORDER BY r.aid DESC
 LIMIT 10
 ) random
 LEFT JOIN cpg_pictures AS r3 ON r3.pid = rand_pid 
```

您还可以模拟此[http://beyondrelational.com/modules/2/blogs/70/posts/10845/return-top-n-rows.aspx的 1 和 2](http://beyondrelational.com/modules/2/blogs/70/posts/10845/return-top-n-rows.aspx)

# php - 如果为真，Ajax 响应仅允许字段中的数据

> ID：14206341
> 
> 赞同：0
> 
> 时间：2013-01-08T00:15:24.950
> 
> 标签：php, ajax

我需要有一个字段，如果它返回“false”消息，则不允许输入数据。“ponumber”字段检查数据库，如果该记录已经存在，我不希望它允许用户使用该特定的采购订单号。基本上，如果他们离开该字段并显示消息，它会将其空白。该脚本运行良好，除了现在允许基于 checkponumberajax php 文件的错误返回的输入。

```
 $(document).ready(function () {
              var validateponumber = $('#validateponumber');
              $('#ponumber').keyup(function () {
                var t = this; 
                if (this.value != this.lastValue) {
                  if (this.timer) clearTimeout(this.timer);
                  validateponumber.removeClass('error').html('<img src="/images/ajax-loader.gif" height="16" width="16" /> checking availability...');

                  this.timer = setTimeout(function () {
                    $.ajax({
                      url: 'includes/checkponumberajax.php',
                      data: 'action=check_ponumber&ponumber=' + t.value,
                      dataType: 'json',
                      type: 'post',
                      success: function (j) { 
                        validateponumber.html(j.msg);
                      }
                    });
                  }, 200);
                  this.lastValue = this.value;
                }
              });
            });

<input type="text" name="ponumber" value="<?=@$_REQUEST['ponumber']?>" id="ponumber" /> 
```

我的 checkponumber.php 文件像这样返回

```
if ($records != 0) {
    $response = array(
    'ok' => false, 
    'msg' => "The selected PO# is not available");
} else {
    $response = array(
    'ok' => true, 
    'msg' => "This PO# is free");
} 
```

编辑：解决了！

我最终感谢@bourch 使用它，一旦达到与 false 匹配的值，它就会简单地清除该字段

```
if(j.ok != true){$("#ponumber").attr("value", "");} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:20:56.310

尝试这个：

```
if(j.ok != true){$("#ponumber").attr("disabled", "disabled");
} 
```

# c# - 用.net 编写的开源虚拟机？

> ID：14206342
> 
> 赞同：1
> 
> 时间：2013-01-08T00:15:39.427
> 
> 标签：c#, .net, vb.net, vm-implementation

我想知道是否有人知道任何开源虚拟机项目？它使用的语言无关紧要，我真的很想看看它们是如何工作的。我做了很多搜索，但找不到太多。我猜是由于复杂性。即使它不是一个完整的虚拟机并且只是具有该功能，IE 也是一个沙盒。

如果有人知道，那就太好了。

编辑：我应该更清楚，我正在寻找像 VMWare 这样的开源虚拟机，它是用 .net 语言创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:49:32.337

[Cameyo 进行](http://www.cameyo.com)应用程序虚拟化，并拥有可以在您自己的 .Net 项目中使用的 Web 服务。可以在[此处](http://www.cameyo.com/sdk/index.html)找到有关 Web 服务的更多信息。

[您可以在http://code.google.com/p/cameyo/source/checkout](http://code.google.com/p/cameyo/source/checkout)找到 SDK 源代码（用 C# 编写）的只读 svn checkout

**编辑：** svn URL 是[http://cameyo.googlecode.com/svn/trunk/](http://cameyo.googlecode.com/svn/trunk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:24:48.113

有[Mono](http://www.mono-project.com/Main_Page)（和密切相关的[Xamarin](http://xamarin.com/)）。

> Mono 是由 Xamarin（以前由 Novell，最初由 Ximian）领导的一个免费和开源项目，旨在创建符合 Ecma 标准的 .NET Framework 兼容工具集，其中包括 C# 编译器和公共语言运行时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T00:26:01.357

正如评论中提到的，[Mono](http://www.mono-project.com/Main_Page)是一种开源 .Net 实现；还有[DotGnu](http://www.gnu.org/software/dotgnu/)。

# html - 使用 HTML 和 CSS 创建通知栏

> ID：14206352
> 
> 赞同：1
> 
> 时间：2013-01-08T00:16:38.783
> 
> 标签：html, css

这是我正在使用的代码：

```
<div style="width:100%; position:absolute; border:0px; background-color:#232323; color:#ffffff; padding-top:5px; padding-bottom:5px; font-size:12px" align="center"> 
```

测试测试测试测试测试

它的作用基本上是在您的网站顶部添加一个栏，您可以在其中输入类似于您在此处看到的文本：http: [//demo.fiverrscript.com/](http://demo.fiverrscript.com/)

需要在我的代码中进行哪些更改以使其显示在屏幕底部而不是顶部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:18:24.260

将**bottom:0px**添加到样式标签。

```
<div style="width:100%; position:absolute; bottom:0px border:0px; background-color:#232323; color:#ffffff; padding-top:5px; padding-bottom:5px; font-size:12px" align="center"> 
```

此外，`width:100%`不会工作，所以你还应该添加`left:0px`和`right:0px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:25:31.653

尝试将位置：绝对更改为**位置：固定**并添加**底部：0**

# c# - 在.Net c#中更新/保存相同的xml

> ID：14206355
> 
> 赞同：1
> 
> 时间：2013-01-08T00:16:54.607
> 
> 标签：c#

我正在尝试编辑一个 xml 文件。更新我的值后，我想将其保存在相同的原始 xml 文件中。当我准备保存到这个文件时，我有一个错误“无法保存到这个文件，因为它仍然打开”。需要一些想法| 帮助。

谢谢:)

```
public void writeConfig(string withConfig, string param)
    {

        XmlTextReader reader = new XmlTextReader(pathFile);

        XElement xmlFile = XElement.Load(reader);
        reader.Close();

        var query = from c in xmlFile.Elements("config").Attributes(withConfig) select c;

        foreach (XAttribute config in query)
        {
            config.Value = param;
        }

        xmlFile.Save(pathFile);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:47:03.733

它对我来说很好，即使我在 TextPad 中打开了文件。

您是否尝试查看当前进程以查看是否有任何其他程序阻止了该进程？您可以尝试使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)来查找此类进程。

# wordpress - Apache重定向到另一个服务器保留浏览器地址

> ID：14206357
> 
> 赞同：1
> 
> 时间：2013-01-08T00:17:33.467
> 
> 标签：wordpress, apache, mod-rewrite, cross-domain

A 有一个基于 apache/php 的自定义网站。我还有一个 wordpress 博客，我希望它托管在不同的服务器上。

我曾尝试创建一个类似[http://blog.mydomine.com](http://blog.mydomine.com)的子域名，但我想保留旧地址 (http://www.mydomine.com/corp/blog) 以用于 SEO。我在我的 .htaccess 文件中添加了以下配置。

```
RewriteCond %{REQUEST_URI} ^/corp/blog 
RewriteRule ^(.*)$ http://blog.mydomine.com/$1 [L] 
```

我想知道是否可以告诉 apache 在重定向请求后不要更改浏览器地址。我知道我可以进行 301 重定向，但我更愿意保留旧地址。

有任何想法吗？提前致谢！！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:23:39.817

使用 P 标志 [http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)

```
RewriteRule ^(.*)$ http://blog.mydomine.com/$1 [P] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T00:24:41.037

你可以试试反向代理...

```
ProxyRequests Off
ProxyPreserveHost on
ProxyPass /corp/blog http://blog.mydomine.com/
ProxyPassReverse /corp/blog http://blog.mydomine.com/
ProxyPassReverseCookiePath /corp/blog / 
```

这需要安装并启用[mod_proxy 。](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)请注意，这仅适用于 apache 文档的以下上下文：服务器配置、虚拟主机、目录 - 这意味着将其放入 htaccess 文件将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:22:08.967

你想要的实际上是不可能的。显示地址的不是 Apache，而是 Web 浏览器，没有办法（谢天谢地）告诉 Web 浏览器“转到站点 A，但告诉用户它是站点 B”。

您可以使用主站点上的框架页面来伪造此行为，但是由于您希望将其用于 SEO，因此我认为这无济于事。

# c# - 使用“mm”说明符格式化月份的 DateTime ToString 问题

> ID：14206359
> 
> 赞同：10
> 
> 时间：2013-01-08T00:17:40.310
> 
> 标签：c#, .net, datetime

我无法获得正确的格式。我期待“2013/10”，但我得到“2013/00”。

为什么会这样，我该如何解决？

```
DateTime dt = DateTime.Parse("2013-Oct-01");   
string str2 = dt.ToString("yyyy/mm"); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-08T00:19:20.497

`mm`是分钟，`MM`而是一个月。

```
DateTime dt = DateTime.Parse("2013-Oct-01");
string str2 = dt.ToString("yyyy/MM"); 
```

请参阅 MSDN 文章*[DateTime.ToString 方法（字符串）](http://msdn.microsoft.com/fr-fr/library/vstudio/zdtaw1bw.aspx)*。

如需更完整的列表：

```
// Create date time 2008-03-09 16:05:07.123
DateTime dt = new DateTime(2008, 3, 9, 16, 5, 7, 123);

String.Format("{0:y yy yyy yyyy}", dt);  // "8 08 008 2008"   year
String.Format("{0:M MM MMM MMMM}", dt);  // "3 03 Mar March"  month
String.Format("{0:d dd ddd dddd}", dt);  // "9 09 Sun Sunday" day
String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24
String.Format("{0:m mm}",          dt);  // "5 05"            minute
String.Format("{0:s ss}",          dt);  // "7 07"            second
String.Format("{0:f ff fff ffff}", dt);  // "1 12 123 1230"   sec.fraction
String.Format("{0:F FF FFF FFFF}", dt);  // "1 12 123 123"    without zeroes
String.Format("{0:t tt}",          dt);  // "P PM"            A.M. or P.M.
String.Format("{0:z zz zzz}",      dt);  // "-6 -06 -06:00"   time zone 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-08T00:19:22.400

`mm`是分钟。您需要使用`MM`哪个月份：

```
var str2 = dt.ToString("yyyy/MM"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T00:19:23.273

`mm`是分钟。`MM`是月。您使用了错误的字段。

# android - 了解 SQLite

> ID：14206361
> 
> 赞同：0
> 
> 时间：2013-01-08T00:17:59.703
> 
> 标签：android, android-sqlite

我试图了解如何处理 SQLite。我有一个具有以下类的成员数据库：

包 com.appiclife.saldo.data；

```
public class Member {

    private long id;
    private String name;
    private String phone;
    private String email;
    private int weight;

     public long getId() {
            return id;
          }

          public void setId(long id) {
            this.id = id;
          }

      public String getName() {
        return name;
      }

      public void setName(String name) {
        this.name = name;
      }

      public String getPhone() {
            return phone;
          }

      public void setPhone(String phone) {
            this.phone = phone;
          }

      public String getEmail() {
                    return email;
                  }

      public void setEmail(String email) {
                    this.email = email;
                  }   
      public int getWeight() {
                    return weight;
                          }

      public void setWeight(int weight) {
                    this.weight = weight;
                          } 
```

然后我有以下 HelperClass 来创建和更新数据库：

```
public class MemberSQLiteHelper extends SQLiteOpenHelper {

  public static final String TABLE_MEMBERS = "members";
  public static final String COLUMN_ID = "_id";
  public static final String COLUMN_NAME = "name";
  public static final String COLUMN_PHONE = "phone";
  public static final String COLUMN_EMAIL = "email";
  public static final String COLUMN_WEIGHT = "weight";

  private static final String DATABASE_NAME = "members.db";
  private static final int DATABASE_VERSION = 1;

  // Database creation sql statement
  private static final String DATABASE_CREATE = 
          "create table "
        + TABLE_MEMBERS + "(" + 
          COLUMN_ID + " integer primary key autoincrement, " + 
          COLUMN_NAME + " text not null, "+
          COLUMN_PHONE + " text, "+
          COLUMN_EMAIL + " text, "+
          COLUMN_WEIGHT + " integer);";

  public MemberSQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MemberSQLiteHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_MEMBERS);
    onCreate(db);
  }

} 
```

我有以下方法：

```
public class MembersDataSource {

  // Database fields
  private SQLiteDatabase database;
  private MemberSQLiteHelper dbHelper;
  private String[] allColumns = { MemberSQLiteHelper.COLUMN_ID,
      MemberSQLiteHelper.COLUMN_NAME, MemberSQLiteHelper.COLUMN_PHONE, MemberSQLiteHelper.COLUMN_EMAIL, MemberSQLiteHelper.COLUMN_WEIGHT};

  public MembersDataSource(Context context) {
    dbHelper = new MemberSQLiteHelper(context);
  }

  public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
  }

  public void close() {
    dbHelper.close();
  }

  public Member createMember(String name, String phone, String email, int weight) {
    ContentValues values = new ContentValues();
    values.put(MemberSQLiteHelper.COLUMN_NAME, name);
    values.put(MemberSQLiteHelper.COLUMN_PHONE, phone);
    values.put(MemberSQLiteHelper.COLUMN_EMAIL, email);
    values.put(MemberSQLiteHelper.COLUMN_WEIGHT, weight);
    long insertId = database.insert(MemberSQLiteHelper.TABLE_MEMBERS, null, values);
    Cursor cursor = database.query(MemberSQLiteHelper.TABLE_MEMBERS, allColumns, MemberSQLiteHelper.COLUMN_ID + " = " + insertId, null,
        null, null, null);
    cursor.moveToFirst();
    Member newMember = cursorToMember(cursor);
    cursor.close();
    return newMember;
  }

  public void deleteMember(Member member) {
    long id = member.getId();
    database.delete(MemberSQLiteHelper.TABLE_MEMBERS, MemberSQLiteHelper.COLUMN_ID
        + " = " + id, null);
  }

  public List<Member> getAllMembers() {
    List<Member> members = new ArrayList<Member>();

    Cursor cursor = database.query(MemberSQLiteHelper.TABLE_MEMBERS,
        allColumns, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
      Member member = cursorToMember(cursor);
      members.add(member);
      cursor.moveToNext();
    }
    // Make sure to close the cursor
    cursor.close();
    return members;
  }

  private Member cursorToMember(Cursor cursor) {
    Member member = new Member();
    member.setId(cursor.getLong(0));
    member.setName(cursor.getString(1));
    member.setPhone(cursor.getString(2));
    member.setEmail(cursor.getString(3));
    member.setWeight(cursor.getInt(4));
    return member;
  }
} 
```

还有问题，

例如，如何更改已经在数据库中的成员的名称？(1)

是否可以保存一个 Arraylist，例如，如果他们有更多的电话号码？(2)

而且，如果我删除数据库中的一行，ID 是否会更改以下行？或者当我想检索同一个成员时，我是否可以始终引用同一个 ID？那么通过其他方式，一旦创建，成员是否保持相同的 ID？(3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:24:40.727

您只需要添加一个方法`MembersDataSource`来更新成员：

```
public void updateMember(Member member) {
    long id = member.getId();
    ContentValues values = new ContentValues();
    values.put(MemberSQLiteHelper.COLUMN_NAME, name);
    values.put(MemberSQLiteHelper.COLUMN_PHONE, phone);
    values.put(MemberSQLiteHelper.COLUMN_EMAIL, email);
    values.put(MemberSQLiteHelper.COLUMN_WEIGHT, weight);
    database.update(MemberSQLiteHelper.TABLE_MEMBERS, values,
        MemberSQLiteHelper.COLUMN_ID + " = ?",
        new String[] { Integer.toString(id) });
} 
```

至于保留多个电话号码，您最好创建第二个表。它可以有`_id`、`phone`和列`phone_type`。然后，您可以`phone`从主表中删除一列，或者将其用作“主要”电话号码，并将电话表用于其他号码。

关于您的新问题 3：当您删除一行时，不会影响其他行（禁止触发器）。特别是，其他 ID 值不会更改。

# jquery - Rails：可排序的 has_and_belongs_to_many 关系

> ID：14206362
> 
> 赞同：0
> 
> 时间：2013-01-08T00:18:01.823
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui, sorting, has-and-belongs-to-many

鉴于这种关系：

```
class Doc < ActiveRecord::Base
  has_and_belongs_to_many :articles
end 
```

和

```
class Article < ActiveRecord::Base
  has_and_belongs_to_many :docs 
end 
```

您将如何`articles`使用 jQuery UI 对 Doc 中的内容进行排序？我一直在关注[本](http://railscasts.com/episodes/147-sortable-lists-revised?view=asciicast)教程，在运行此迁移之前一切都很好：

```
rails g migration add_position_to_faqs position:integer 
```

因为当我已经有一个关系表时，它似乎加倍，因此：

```
create_table "articles_docs", :id => false, :force => true do |t|
  t.integer "article_id"
  t.integer "doc_id"
end

add_index "articles_docs", ["article_id", "doc_id"], :name => "index_articles_docs_on_article_id_and_doc_id", :unique => true 
```

有什么想法吗？不真正理解关系表并不能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:27:40.470

使用`has_many :through`而不是`has_and_belongs_to_many`. 这将为您提供一个中间模型来保存位置列，您将对它们进行排序*而*不是对文章进行排序。

# android - Android：android：在后台加载数据后尝试刷新列表视图

> ID：14206364
> 
> 赞同：0
> 
> 时间：2013-01-08T00:18:30.850
> 
> 标签：android

我正在使用 a`AsyncTask`为 a 加载数据`ListView`。

加载数据后，我正在调用 的`invalidate()`方法`ListView`，但它没有被重绘。我在数组适配器方法的回调上设置了断点`getView()`。在失效后它永远不会被调用。但是在`ListView`第一次创建之后会被调用。

现在要测试它，我使用一个全局语言调用`cGlobals.gSay`来显示在列表簿中

```
protected void onPostExecute(String result) {  
  mReady=true;
  UpdateList();
  if (result.compareTo("na")==0)
    NextLevel();          
}

void UpdateList()
{
  cGlobals.gSay= new String("aaaaaaaaa");
  listView.postInvalidate();      
} 
```

```
public class MySimpleArrayAdapter extends ArrayAdapter<String> {
  private final Context context;
  private final String[] values;

  public MySimpleArrayAdapter(Context context, String[] values) {
    super(context, R.layout.rowlayout, values);
    this.context = context;
    this.values = values;  
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
      .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View row = inflater.inflate(R.layout.rowlayout, parent, false);
    TextView label=(TextView)row.findViewById(R.id.label);
    label.setText(cGlobals.gSay);
    return row;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:25:25.643

您应该`notifyDataSetChanged()`使用`MySimpleArrayAdapter`.

Only caveat is that for the ListView to update using this approach, you must be modifying the data that is in the adapter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:24:40.000

我认为你需要调用它而不是无效

```
ListAdapter.notifyDataSetChanged(); 
```

[链接到 android 参考](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)

# javascript - Ember 视图 - UI 渲染后如何在不修改原始源代码的情况下操作 DOM？

> ID：14206371
> 
> 赞同：0
> 
> 时间：2013-01-08T00:19:23.200
> 
> 标签：javascript, html, ember.js

由于某些原因，我只能在创建 Ember 应用程序后添加 javascript（即所有 UI 都已启动）。

HTML 如下所示：

```
<div id="ember21643" class="ember-view form_field ticket_type_id has-ticket-type-field">
    <label for="">
    <script id="metamorph-249-start" type="text/x-placeholder"></script>
    Type
    <script id="metamorph-249-end" type="text/x-placeholder"></script>
    </label>
    <div id="zd_mn_385" class="zd-selectmenu zd-selectmenu-root zd-state-default">
        <button id="zd_mn_386" class="zd-selectmenu-base" role="button" tabindex="0" style="width: 131px; "><span class="zd-selectmenu-base-arrow zd-icon-triangle-1-s"></span><span id="zd_mn_387" class="zd-selectmenu-base-content">-</span></button>
    </div>
</div> 
```

使用 jQuery 来进行直接 DOM 修改很容易，但我担心它会破坏 Ember 应用程序。

是否有适当的方法来更改此视图，例如：

*   向 div 容器追加/前置文本
*   将文本更改为其他内容，而不是上面示例中的“类型”。

使用 DOM 检查，该视图看起来可以从以下位置访问：

```
Ember.View.views.ember21643 
```

和

```
Ember.View.views.ember21643._childViews[0] 
```

指向“标签”。所以我设置

```
Ember.View.views.ember21643._childViews[0]._lastNormalizedValue = "ABC" 
```

但它仍然在屏幕上显示“类型”，所以这可能不是正确的方法。

请帮忙。非常感谢。（我是 Ember 的新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:34:29.493

我不确定我是否错过了您的观点，但是，如果我想更改 ember 视图中的文本，我想我会使用 Ember 绑定。

# 模板

```
<div id="someView" type="text/x-handlebars">
  This sentence has a dynamic {{ end }}
</div> 
```

# 看法

```
App.someView = Ember.View.extend({
  end : 'conclusion',
  templateName: 'someVIew' //not really necessary with new router to be explicit 
}) 
```

# 绑定视图

```
App.someView = Ember.View.extend({
  endBinding : 'contoller.end',
  templateName: 'someVIew' //not really necessary with new router to be explicit 
}) 
```

这些有帮助吗？:)

# scala - 蛋糕模式，自我：UserRepositoryComponent =>

> ID：14206372
> 
> 赞同：0
> 
> 时间：2013-01-08T00:19:37.583
> 
> 标签：scala, self-type, cake-pattern

我试图了解蛋糕的图案。

我找到了这个要点： [https ://gist.github.com/2127745](https://gist.github.com/2127745)

但我不明白这种语法：

```
// Explicit dependency on User Repository
self: UserRepositoryComponent => 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T03:13:22.867

这就是所谓的自类型注释。这意味着您可以假设该类的对象具有声明的类型（在本例中为 UserRepositoryComponent 或某些子类型），并且（作为奖励）允许您将该级别的“this”对象称为“self” ，或您指定的任何其他名称。self 类型的注解非常强大。它表达了对类的任何实现的要求（早期版本的 Scala 在语法上将其表示为“需要 UserRepositoryComponent”），但实际上并不意味着公开可见的类型约束（如果您说“扩展 UserRepositoryComponent”就会发生这种情况）。实现要求在带注释的类的任何实例中都被强制执行，但在其他任何地方都没有。自类型注释是“

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T00:42:33.270

这是一个自我类型的注释，例如[在这里](http://www.artima.com/pins1ed/modular-programming-using-objects.html#27.4)解释。如果给定了 self 类型，则将其视为 trait 中 this 的类型。它让 Trait`RealUserServiceComponent`通过`self:UserRepositoryComment`声明说它只能应用于扩展`UserRepositoryComment`trait 的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T08:13:19.427

这是自类型注释。这是可以扩展您的类型的规范。像“延伸”，但方向相反。知道您的所有子类型都是 UserRepositoryComponent 的一些实现，这会给您一些额外的好处。也就是说，您可以调用它的所有方法，因为它们是您自己的。

# android - Android 4.2 上的 TabHost - 选项卡上未显示图标和颜色

> ID：14206375
> 
> 赞同：0
> 
> 时间：2013-01-08T00:19:52.237
> 
> 标签：android, android-tabhost, android-4.2-jelly-bean

我们对 Android 开发还很陌生，如果这很明显，我们深表歉意。

我们正在使用选项卡式视图实现一个活动。我们遇到的问题是标签本身的图标和正确的颜色在 Jelly Bean (Android 4.2) 上没有正确显示。但是，它们确实可以在早期的 API 级别（例如 Gingerbread）上正确显示。

请注意：我们最初使用已弃用的 TabActivity 类创建了视图。但是，据我所知，这样做的“新”方式应该与旧方式没有什么不同？如果我错了，请纠正我。

这是包含选项卡主机布局的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/Black">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">

        <include layout="@layout/logo_bar"/>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >
        </FrameLayout>
     </LinearLayout>
</TabHost> 
```

这是相关的（我希望）活动代码：

```
public class MainTabActivity extends FragmentActivity implements TabHost.TabContentFactory
    private TabHost tabHost;
    // other instance variables ...

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        tabHost = (TabHost)findViewById(android.R.id.tabhost);
        tabHost.setup();

        TabSpec loginTabSpec = tabHost.newTabSpec(GlobalConstants.LOGIN_ACTIVITY);
        loginTabSpec.setIndicator("Settings", getResources().getDrawable(R.drawable.ic_action_settings_gear));
        loginTabSpec.setContent(this);

        TabSpec mainTabSpec = tabHost.newTabSpec(GlobalConstants.MAIN_ACTIVITY);
        mainTabSpec.setIndicator("Lone Worker", getResources().getDrawable(R.drawable.ic_action_settings_phone));
        mainTabSpec.setContent(this);

        tabHost.addTab(mainTabSpec);
        tabHost.addTab(loginTabSpec);
    } 
```

这是 Jelly Bean 上标签本身的样子（坏版本）：![在此处输入图像描述](../Images/61903a9310a7b99da07d949af9eca229.png)

最后，这就是它应该的样子（在姜饼上......好版本）：![在此处输入图像描述](../Images/31b8305aa8f1b634e84aa37b6aa3e193.png)

所以重申一下：标签的背景颜色是黑色（当它通常是漂亮的蓝色时），虽然很难从糟糕的屏幕截图中分辨出来，但任何一个标签的图标都没有出现在果冻豆上. 我希望这个问题在这里得到了足够的概述。如果我遗漏了什么，请告诉我。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:56:21.687

无论出于何种原因，在更高版本的 Android (>= ICS) 选项卡中，如果您使用的是文本标签或图标

```
setIndicator(CharSequence label, Drawable icon) 
```

我怀疑您看不到任何文本的原因是因为 ICS 中选项卡的默认文本颜色为黑色，因此在您的黑色背景上看不到它。

一个解决方案是创建自己的视图并使用

```
setIndicator(View view) 
```

此处有更多详细信息：[选项卡中的图标未显示](https://stackoverflow.com/questions/10745092/icon-in-tab-is-not-showing-up/11379708#11379708)

在这里[http://ondrejcermak.info/en/programovani/custom-tabs-in-android-tutorial/](http://ondrejcermak.info/en/programovani/custom-tabs-in-android-tutorial/)

# ruby-on-rails - 在 Rails 中使用缓存优化时间线

> ID：14206376
> 
> 赞同：2
> 
> 时间：2013-01-08T00:20:05.933
> 
> 标签：ruby-on-rails, caching, memcached, redis

我希望就如何正确使用缓存来加快 Rails 中的时间线查询获得建议。这是背景：

我正在开发一个带有 Rails 后端的 iPhone 应用程序。它是一个社交应用程序，与其他社交应用程序一样，它的主要视图是消息的时间线（即新闻源）。这很像 Twitter，时间线由用户和他/她的追随者的消息组成。API 请求中检索时间线的主要查询如下：

```
@messages = Message.where("user_id in (?) OR user_id = ?", current_user.followed_users.map(&:id), current_user) 
```

现在这个查询变得非常低效，特别是在规模上，所以我正在研究缓存。以下是我打算做的两件事：

**1) 使用 Redis 将时间线缓存为消息 ID 列表**

使这个查询如此昂贵的部分原因是确定要即时显示哪些消息。我的计划是继续为每个用户创建一个 Redis 消息 ID 列表。假设我在收到 Timeline API 请求时正确构建了它，我可以调用 Redis 来获取要显示的消息 ID 的预处理有序列表。例如，我可能会得到这样的信息：“[21, 18, 15, 14, 8, 5]”

**2) 使用 Memcached 缓存单个消息对象**

虽然我相信第一点会有很大帮助，但从数据库中检索单个消息对象仍然存在潜在问题。消息对象可以变得相当大。使用它们，我会返回相关的对象，如评论、喜欢、用户等。理想情况下，我也会缓存这些单独的消息对象。这就是我感到困惑的地方。

如果没有缓存，我会简单地进行这样的查询调用来检索消息对象：

```
@messages = Message.where("id in (?)", ids_from_redis) 
```

然后我会返回时间线：

```
respond_with(:messages => @messages.as_json) # includes related likes, comments, user, etc. 
```

现在考虑到我希望利用 Memcache 来检索单个消息对象，看来我需要一次检索一个消息。使用伪代码我在想这样的事情：

```
ids_from_redis.each do |m|
  message = Rails.cache.fetch("message_#{m}") do
     Message.find(m).as_json
  end
  @messages << message
end 
```

这是我的两个具体问题（对不起，冗长的构建）：

1）这种方法通常有意义吗（redis 用于列表，memcached 用于对象）？

2）具体来说，在下面的伪代码中，这是唯一的方法吗？一个接一个地抓取消息感觉效率低下，但考虑到我打算进行对象级缓存，我不确定该怎么做。

感谢任何反馈，因为这是我第一次尝试这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:08:21.213

从表面上看，这似乎是合理的。Redis 非常适合存储列表等，可以持久化等，并且 memcached 将非常快速地检索单个消息，即使您像这样按顺序调用它也是如此。

这里的问题是，每次发布消息时，您都需要清除/补充 redis 缓存。在这种情况下，仅仅清除缓存似乎有点浪费，因为您已经费尽心思识别消息的每个收件人。

因此，在不希望回答错误的问题的情况下，您是否考虑过在发布每条消息时将消息的可见性“呈现”到数据库（或 redis，就此而言）？像这样的东西：

```
class Message
  belongs_to :sender
  has_many   :visibilities

  before_create :render_visibility
    sender.followers.each do |follower|
      visibilities.build(:user => follower)
    end
  def 
end 
```

然后，您可以非常简单地呈现消息列表：

```
class User
  has_many :visibilities
  has_many :messages, :through => :visibilities
end

# in your timeline view:
<%= current_user.messages.each { |message| render message } %> 
```

然后我会添加这样的单个消息：

```
# In your message partial, caching individual rendered messages:
<%= cache(message) do %>
  <!-- render your message here -->
<% end %> 
```

然后我还会像这样添加整个时间线的缓存：

```
# In your timeline view
<%= cache("timeline-for-#{current_user}-#{current_user.messages.last.cache_key}") do %>
  <%= current_user.messages.each { |message| render message } %>
<% end %> 
```

这*应该*实现的（我没有测试过）是整个时间线 HTML 将被缓存，直到发布新消息。发生这种情况时，时间线将被重新渲染，但所有单独的消息都将来自缓存，而不是再次渲染（任何其他人未查看的新消息可能除外！）

请注意，这假定每个用户的消息呈现都是相同的。如果不是，您还需要缓存每个用户的消息，这有点可惜，所以如果可以的话，尽量不要这样做！

FWIW，我相信这是 twitter 所做的模糊（我的意思是模糊）。不过，他们有一种“大数据”方法，在这种方法中，推文被分解并插入到大型机器集群中的追随者时间线中。我在这里描述的内容将难以在具有大量追随者的写入繁重的环境中扩展，尽管您可以通过使用 resque 或类似的东西来稍微改善这一点。

PS 我对这里的代码有点懒惰——你应该考虑重构它以将时间线缓存键生成移动到帮助器和/或人员模型中。

# html - 标签 vs

> ID：14206378
> 
> 赞同：5
> 
> 时间：2013-01-08T00:20:21.380
> 
> 标签：html, css, standards, w3c

`<button>`在设计 UI 时使用 html 标签而不是使用html 标签是不正确的`<div class="button">`吗？在实现中，我没有注意到这两种方法之间的区别，并且`<button>`看起来更语义化，但我不确定它是否仅用于在表单中使用。该按钮不会在表单中。使用`<div>`标签似乎是制作按钮（引导程序）的最常见方式，但我不知道为什么。这有什么技术原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T00:31:47.963

最好使用`<button>`而不是`<div>`或任何其他元素来表示按钮。“type”属性在这里很重要，应该是 `type="button"`，没有它，默认值是`submit`在表单之外没有意义。

是的，顺便说一句，有`<button>`一个表格的外部是非常好的。

很多时候，在设计 UI 时，`<a>`标签是最合适的元素，它是有意义的，但`<button>`对于通过 javascript 执行操作来说非常好（而且确实是预期的）。

> 使用`<div>`标签似乎是制作按钮（引导程序）的最常见方式，但我不知道为什么。

我真的没有看到这方面的证据，老实说，他们做什么并不重要。bootstrap 框架倾向于忽略语义，例如尽管使用空元素只是出于表示原因，例如`<li class="divider"></li>`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T00:52:23.747

从可用性的角度来看，最好根据浏览器处理交互性的方式来`<button>`实现。`<div>``<a>`

如果您的用户是草率的点击者并且他们错误地点击并拖动，或者在触摸屏上，他们最终可能会选择`<div>`内容而不是触发点击事件。使用`<button>`会大大减少这个问题。

但是，像`<div>`'s 这样的非按钮对象在应用 CSS 时会更加灵活。尤其是在较旧的浏览器中。

# c# - 从当前线程文化中获取语言环境代码

> ID：14206389
> 
> 赞同：4
> 
> 时间：2013-01-08T00:21:20.183
> 
> 标签：c#, cultureinfo, currentculture

我正在使用 ac# 应用程序。如果我访问

```
Thread.CurrentThread.CurrentCulture 
```

对象，从检查中我发现它的文化设置为 en-GB，我怎样才能访问 GB 值？我看了看这个物体​​，并不清楚它的存储位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T00:23:34.357

以这种方式尝试：

```
var name = Thread.CurrentThread.CurrentCulture.Name;
var locale = name.Split('-')[1]; 
```

修改上面的代码以检查，以防万一`Split()`返回一个长度等于 2 的数组。您还可以使用`Last()`from 方法`System.Linq`来获取它的最后一个元素，而无需在索引上进行中继。

# haskell - Haskell - 输入'=' ghc 解析错误

> ID：14206394
> 
> 赞同：1
> 
> 时间：2013-01-08T00:22:01.117
> 
> 标签：haskell

我试图在haskell中实现斐波那契函数只是为了尝试语言，但我已经被困在编译我的程序上。我有以下代码：

```
main = do
    fib :: (Num a) => a -> a
    fib 0 = 0
    fib 1 = 1
    fib x = fib (x - 1) + fib (x - 3)
    fib 348 
```

我不知道我做错了什么。这是 ghc 编译时的输出`ghc --make fib.hs`

```
[1 of 1] Compiling Main           ( fib.hs, fib.o )
fib.hs:3:15: parse error on input `=´ 
```

如果这是相关的，我正在使用 Windows。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T00:26:05.640

`fib 0 = 0`等不是可以在`do`. 定义`fib`外`main`（或内`where`，或内`let ... in`），然后决定你想用它做什么。`fib 348`只计算一个数字；但你需要一个`IO`结果`main`。

我附近没有口译员，但是是这样的：

```
main = do
  putStrLn $ show $ fib 348
  where
    fib 0 = 0
    fib 1 = 1
    fib x = fib (x - 1) + fib (x - 3) 
```

或这个：

```
fib :: (Num a) => a -> a
fib 0 = 0
fib 1 = 1
fib x = fib (x - 1) + fib (x - 3)

main = do
  putStrLn (show (fib 348)) 
```

**编辑**：关于下面的评论和“堆栈大小太小”：您的代码中有一个错字，我盲目地复制了它。斐波那契是`fib x = fib (x - 1) + fib (x - 2)`; 你有`fib (x - 3)`你的代码。这意味着当`fib 2`达到时，它将被评估为`fib 1 + fib (-1)`。现在，当您评估 时`fib (-1)`，这是一个无限循环，因为您“从底部掉了下来”，并且只会越来越深。堆栈通常不是无限的。

还要注意，以这种方式（没有记忆）计算一个大的斐波那契数是非常、非常、*非常*慢的。

# c++ - Ubuntu - C++/Vector 下标超出范围的 Windows 不兼容

> ID：14206397
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:22:08.943
> 
> 标签：c++, visual-c++, visual-c++-2008

我在 Ubuntu 上编写和运行的 C++ 项目在 Windows 上运行时返回异常“向量下标超出范围”。我使用 Windows 7 和 Visual C++ 2008 Express。

我希望这对某人有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:26:40.573

Microsoft 提供的 STL 版本带有[检查迭代器](http://msdn.microsoft.com/en-us/library/aa985965%28VS.90%29.aspx)，当在调试模式下运行时，它可以确保您的向量索引在范围内。默认情况下，在 GCC 中不进行此类检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T01:27:08.983

您的代码几乎肯定包含未定义的行为。在这种情况下，实现几乎可以自由地做它想做的任何事情。看来gcc基本上已经忽略了这个问题，所以并不明显。VC++ 已经在您的代码中内置了足够多的自我监控功能来发现问题并告诉您问题。

下一步几乎取决于您：在您的代码中找到问题并修复它。不幸的是，由于您没有发布任何代码，因此基本上不可能就您应该做什么或如何做提供更详细的建议。关于我能想到的唯一提示是 VC++ 中的调试器确实有一个很好的堆栈跟踪功能，所以如果你在调试器下运行代码并且它失败了，很容易回到堆栈找到调用的代码检测到问题的函数（调用函数等）。

# ios - ipad ip地址使用命令行工具

> ID：14206400
> 
> 赞同：4
> 
> 时间：2013-01-08T00:22:25.293
> 
> 标签：ios, command-line, ip, command-line-interface

我有一个 iOS 设备（iPhone 或 iPad）连接到我的 mac 笔记本电脑。显然，您可以从设置中获取 iOS 设备的 IP 地址，但是有没有办法使用命令行工具来做到这一点（无需 root iOS 设备）？我需要能够为一些测试自动化做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-09T22:27:56.503

```
brew install open ssl
brew install --HEAD libimobiledevice
brew install arp-scan
macaddr=$(ideviceinfo -u <UUID OF DEVICE> -k WiFiAddress)
arp-scan --interface=<eth interface connected to same wifi> --localnet | grep $mac_addr" 
```

这是不稳定的，因为您需要强制设备在 LAN 上互相看到。我解决了在设备上打开和关闭 wifi 的问题。这是我找到的最佳解决方案。我通常会缓存此信息，因为动态获取它是不可靠的。arp-scan 还要求您是 root 才能访问网络设备。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-01-08T04:51:10.293

您可以使用此 Web 服务来了解您的 IP 地址，该 Web 服务会返回一个带有您的 IP 地址的 XML ...

[http://www.domaintools.com/research/my-ip/myip.xml](http://www.domaintools.com/research/my-ip/myip.xml)

# qt - QtCreator 损坏的本机编译器消息

> ID：14206401
> 
> 赞同：2
> 
> 时间：2013-01-08T00:22:30.817
> 
> 标签：qt, visual-c++, qt-creator

QtCreator 中有一个已知错误：在 Windows 下，它无法正确处理编译器原生消息。

使用 MinGW 时一切正常，因为它会生成英文消息。但是没有用于 MinGW 的 Qt5 二进制文件（而且我不想构建自己的二进制文件，因为我想这是一个痛苦的过程）。所以我尝试使用MSVC。但是，我的 MSVC 用俄语打印错误消息。在 QtCreator 处理这些消息之后，它向我展示了一些不可读的东西。

现在谷歌没有帮助我如何解决这个问题。

有人知道配置 QtCreator 的方法吗？或者配置MSVC用英文打印错误？或者甚至修改 QtCreator 的源代码，放置一些存根并“修复”问题？

# c++ - 为什么具有固定底层类型 char 的枚举值解析为 fct(int) 而不是 fct(char)？

> ID：14206403
> 
> 赞同：25
> 
> 时间：2013-01-08T00:22:53.297
> 
> 标签：c++, c++11, enums, overloading, overload-resolution

这个问题是在[用 enums 回答关于重载解析的](https://stackoverflow.com/questions/14185352/underlying-type-of-weak-typed-enum-in-c11)问题时出现的。

虽然这种情况`long long`肯定是 MSVC2012NovCTP 中的一个错误（根据标准文本和 gcc 4.7.1 的测试），但我无法弄清楚为什么会发生以下行为：

```
#include <iostream>

enum charEnum : char { A = 'A' };

void fct(char)      { std::cout << "fct(char)"      << std::endl; }
void fct(int)       { std::cout << "fct(int)"       << std::endl; }
void fct(long long) { std::cout << "fct(long long)" << std::endl; }

int main() 
{
    fct('A');
    fct(A);
} 
```

MSVC2012NovCTP 和 gcc 4.7.1 都同意这个输出：

> fct(char)
> fct(int)

不`A`应该从转换`charEnum`为`char`？为什么`A`被转换为`int`?

编辑：clang 抱怨这个电话是模棱两可的，这与我在下面的解释一致；也就是说，如果仅将其视为基础类型，我仍然会发现它更加直观。

* * *

两个相关的标准摘录是§7.2/9：

> 枚举数或无作用域枚举类型的对象的值通过整数提升（4.5）转换为整数

和§4.5/4：

> 其基础类型是固定的（7.2）的无作用域枚举类型的纯右值可以转换为其基础类型的纯右值。此外，如果可以将整型提升应用于其基础类型，则其基础类型固定的无范围枚举类型的纯右值也可以转换为提升的基础类型的纯右值。

所以`charEnum`既可以转换为`char`，也可以是任何整数提升`char`，例如`int`.

但这对我来说很模糊，因为“可以”并不能完全说明实际会选择哪个。如果有的话，这应该与这个措辞模棱两可，因为在任何促销活动之间`char`或任何促销活动之间都没有优先考虑。如果您注释掉`fct(int)`，则该调用*是*模棱两可的。为什么`int`特别？

我唯一能想到的是积分提升是递归应用的，但我没有看到任何强制它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T05:00:27.607

在 C++03 中，规则是：

> 无范围枚举类型 (7.2 [dcl.enum]) 的右值可以转换为以下第一种类型的右值，它可以表示枚举的所有值（即 bmin 到 bmax 范围内的值，如7.2 [dcl.enum])：int、unsigned int、long int、unsigned long int、long long int 或 unsigned long long int。

在 C++03 编译器中，`int`会选择它，因为它是列表中的第一个。

* * *

在 C++11 中，引入了*底层类型*。因此，通过[685\. Integral Promotion of enumeration ignores fixed under type](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#685)，此措辞已更改为您在 §4.5/4 中引用的段落，从阅读缺陷报告来看，委员会的意图似乎是`fct(char)`（基础类型）被选中。

但是，根据[核心问题 1601](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1601)下的讨论，C++11 中的文本实际上使转换模棱两可（`fct(char)`并且`fct(int)`两者都是可能的，但都不是首选）。

C++14 提出并接受了以下修复：

> 如果两者不同，则提升其基础类型固定为其基础类型的枚举的转换优于提升为提升的基础类型的转换。

由于它在 C++11 中被报告为缺陷，因此编译器应在 C++11 模式下应用此修复并调用`fct(char)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T13:42:58.633

根据我对当前标准**的解释，调用必须是模棱两可的**。跟随一个解释。

每 4.5/4：

*“其基础类型固定（7.2）的无范围枚举类型的纯右值可以转换为其基础类型的纯右值。此外，如果可以将整数提升应用于其基础类型，则其基础类型的无范围枚举类型的纯右值is fixed 也可以转换为提升的基础类型的纯右值。”*

这提供了两种可选的*提升*：提升到底层类型，提升到*提升*的底层类型。因此，仅此一段就在解决对重载函数的函数调用时应该使用这些替代方案中的*哪*一个提出了歧义。

**然后，第 13.3.3 段根据“转换顺序”**决定哪个是重载集的最佳可行函数。具体而言，与此相关的是 13.3.3.1（“*隐式转换序列*”），更具体地说，是 13.3.3.1.1（“*标准转换序列*”），它定义了这些转换序列由哪些基本步骤组成。

13.3.3.1.1/1 和表 12 将这些步骤分为四类，其中*Promotion*和*Conversion*，并根据构成这些序列的各个转换的类别对转换序列进行排名。

在我们的例子中，我们有两个由单个***提升*****步骤组成的单长度转换序列***（4.5./4 都允许）。*

 ***转换序列**根据 13.3.3.2 进行排序。特别是，13.3.3.2/3 提到转换序列 S1 优于转换序列 S2，如果：

**“ S1**的排名*[即提升、转换等]***优于****S2 的排名，或者 S1 和 S2 具有****相同的排名并且可以通过以下段落中的规则进行区分****，或者，如果不是，[.. .]"**

 *****提到的“*下面的段落*”是 13.3.3.2/4，它说：

*“标准转换序列按其等级排序：精确匹配比提升转换更好，提升比转换更好。**具有相同等级的两个转换序列无法区分，除非适用以下规则之一**：”*

然后，接下来是一组**不适**用于我们情况的规则。

因此，我们有两个单步转换序列，由具有相同排名的单个*Promotion组成。*根据上述对现行标准的解释，**调用必须是模棱两可的**。

然而，就个人而言，我同意需要进行更改以使转换为无范围枚举的固定基础类型优于其他可能的转换。******

# objective-c - 进一步解释 NSManagedObject 的删除规则 Nullify

> ID：14206407
> 
> 赞同：1
> 
> 时间：2013-01-08T00:23:35.633
> 
> 标签：objective-c, ios, core-data, nsmanagedobject

这是 Apple 的 Nullify 删除规则文档：

> **Nullify**将目标对象的反向关系设置为空。例如，如果您删除一个部门，请将所有当前成员的部门设置为空。仅当员工的部门关系是可选的，或者您确保在下一次保存操作之前为每个员工设置了一个新部门时，这才有意义。

使用这个部门 <-------->> 员工示例，该部门的员工由 NSSet 表示。如果我删除了一个员工并且删除规则设置为 Nullify，那么 NSSet 会发生什么情况？删除的员工对象是否从集合中移除？对集合中该员工的引用是否为零？整套都作废了吗？

此外，在这种情况下，是否需要在代码中完成任何其他操作以保持引用完整性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:28:05.030

在您的多对一示例中，员工从`NSSet`. “设置为零”解释是一对一关系发生的情况。

这与“无操作”规则形成对比，它实际上什么都不做（您可能不应该使用），“拒绝”规则，如果关系尚未取消，则阻止删除，以及“级联” " 规则，它也会删除目标对象。

# openlayers - 为什么这个 WMS 层没有出现在 openlayers 中？

> ID：14206412
> 
> 赞同：3
> 
> 时间：2013-01-08T00:24:14.847
> 
> 标签：openlayers, arcgis, wms

我正在尝试从已发布的 ArcGIS Map Service 中显示 WMS 图层，而我得到的只是粉红色的瓷砖。谁能帮我纠正我的代码有什么问题？当我平移到美国时，我得到的只是“破碎的图像粉红色瓷砖”......没有任何 WMS 图层出现。

```
<html>
<head>
    <title>Karta</title>
    <link rel="stylesheet" href="openlayers/theme/default/style.css" type="text/css">
<script src="http://openlayers.org/api/OpenLayers.js"></script>
<script  type="text/javascript">
    function inicializacija(){
        var options = {
            projection: new OpenLayers.Projection("EPSG:4326"),
            units: "m",
            numZoomLevels: 18,
            maxResolution: 156543.0339,
            maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34)
            };
         var map = new OpenLayers.Map("map-id", options);
         //var osm = new OpenLayers.Layer.OSM("Open Street Map");
         //var wms = new OpenLayers.Layer.MapServer( "World Map", "http://localhost/cgi-bin/mapserv.exe", {layers: 'countries',map: '/ms4w/Apache/htdocs/MapFile06_wms.map', srs: 'EPSG:4326'} );

        //map.addLayers([osm,wms]);

        layer = new OpenLayers.Layer.WMS( "OpenLayers WMS",
            "http://sampleserver1.arcgisonline.com/ArcGIS/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/WMSServer?request=GetCapabilities&service=WMS", {layers: "States"} );
        map.addLayer(layer);

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.addControl(new OpenLayers.Control.MousePosition());

        map.zoomToExtent(new OpenLayers.Bounds(1490000, 5600000,1850000, 5900000));
    }
</script>
    <style>
        #map-id {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body onload= 'inicializacija()'>
    <h1>Primer prekrivanja slojev in izbire podlag</h1>
    <div id="map-id"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T03:42:53.907

图像显示为红色，因为请求未生成有效的地图图像。

这是调试此类问题的方式：

*   在 FireFox 或 Chrome 中打开页面。
*   然后将其中一张红色图像保存到磁盘。
*   在文本编辑器中打开保存的文件。

现在，看起来您不是在请求图像，而是在请求服务器的功能。

您可能已经将服务器 URL 粘贴到您的代码中，但是您粘贴了请求服务器可以做什么以及它支持什么的 URL。

因此，只需从 URL 中删除这部分： `request=GetCapabilities`

这样就变成了：`http://sampleserver1.arcgisonline.com/ArcGIS/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/WMSServer?service=WMS`

保存 HTML，然后刷新。

好的，我们现在实际上正在请求图像，但您仍然没有得到任何东西。

所以，做同样的事情。保存其中一张红色图像，看看里面有什么。

这次里面有一个错误信息：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!DOCTYPE ServiceExceptionReport SYSTEM "http://schemas.opengis.net/wms/1.1.1/exception_1_1_1.dtd">
<ServiceExceptionReport version="1.1.1">
  <ServiceException code="LayerNotDefined">
Parameter 'layer(s)' contains unacceptable value: States
  </ServiceException>
</ServiceExceptionReport> 
```

看起来您正在请求一个名为 的图层`States`，但该图层不存在。

只要提供一个有效的层，你就应该完成。看起来服务器上有 2 层，分别称为“1”和“2”。当您将其设置为图层时，红色图像消失了，但它们似乎不包含任何有趣的东西，但这是另一个我无法帮助您解决的问题，除非我获得更多信息。

# c# - Repeater OnItemDataBound，如何在代码隐藏中获取当前行的数据？

> ID：14206413
> 
> 赞同：1
> 
> 时间：2013-01-08T00:24:35.303
> 
> 标签：c#, asp.net, repeater

在我的转发器中，我想设置如下文字的内容：

```
<ItemTemplate>
  <asp:Literal id="lit" runat="server" />
</ItemTemplte> 
```

我在设置后面的代码中有我的 OnDataItemBound 方法。

我以前做过这个，但只是设置标签并没有真正获取正在迭代的当前行的数据。

如何获取数据和列等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:42:02.353

通过使用`RepeaterItemEventArgs`OnDataItemBound 方法，您可以通过以下方式访问您的数据对象`e.Item.DataItem`：

```
void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {
    var obj = (MyObject)e.Item.DataItem;
    // use your object here to populate text boxes etc...
} 
```

# python - 如何计算循环中使用了多少次尝试

> ID：14206422
> 
> 赞同：0
> 
> 时间：2013-01-08T00:25:38.987
> 
> 标签：python, macos, loops, while-loop

对于 python 分配，我需要要求用户输入数字，直到他们输入负数。到目前为止，我有：

```
 print("Enter a negative number to end.")
    number = input("Enter a number: ")
    number = int(number)
    import math
    while number >= 0:
        numberagain = input("Enter a number: ")
        numberagain = int(numberagain)
        while numberagain < 0:
            break 
```

如何将用户输入值的次数加起来

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:30:30.210

```
i = 0
while True:
    i += 1
    n = input('Enter a number: ')
    if n[1:].isdigit() and  n[0] == '-':
        break
print(i) 
```

该`str.isdigit()`函数对于检查输入是否为数字非常有用。这可以防止在尝试转换时发生错误，比如`'foo'`转换为`int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:04:53.057

```
import itertools

print('Enter a negative number to end.')
for i in itertools.count():
  text = input('Enter a number: ')
  try:
    n = int(text)
  except ValueError:
    continue
  if n < 0:
    print('Negative number {} entered after {} previous attempts'.format(n, i))
    break 
```

上面的解决方案应该对奇怪的输入（例如尾随空格和非数字内容）具有鲁棒性。

这是一个快速演示：

```
wim@wim-desktop:~$ python /tmp/spam.py
Enter a negative number to end.
Enter a number: 1
Enter a number: 2
Enter a number: foo123
Enter a number: i am a potato
Enter a number: -7
Negative number -7 entered after 4 previous attempts
wim@wim-desktop:~$ 
```

# ruby-on-rails - 在新的 Rails 应用程序中安装 Cucumber

> ID：14206424
> 
> 赞同：0
> 
> 时间：2013-01-08T00:25:59.127
> 
> 标签：ruby-on-rails, cucumber

1.  我创建了一个新的 Rails 应用程序，
2.  将`cucumber-rails`gem 添加到 a `Gemfile`,
3.  运行`bundle install`和
4.  `rails generate cucumber:install`.

我想有`web_steps.rb`，`paths.rb`生成。但不会生成这些文件。这是 bash 输出：

```
create  config/cucumber.yml
create  script/cucumber
chmod  script/cucumber
create  features/step_definitions
create  features/support
create  features/support/env.rb
exist  lib/tasks
create  lib/tasks/cucumber.rake
gsub  config/database.yml
gsub  config/database.yml
force  config/database.yml 
```

我需要更改什么来生成所需的所有 Cucumber 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:48:32.290

这些文件不再使用较新版本的黄瓜生成：

[https://github.com/cucumber/cucumber-rails/issues/174](https://github.com/cucumber/cucumber-rails/issues/174)

# html - 为什么我提交表单时此 URL 会转到错误的位置？

> ID：14206432
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:26:27.637
> 
> 标签：html, forms

```
<html>
<head><title></title></head>
<body>
<form action="https://oauth.vk.com/authorize?client_id=3343995&scope=photos,wall,offline&redirect_uri=http://example.com/vkontakte/auth&response_type=code" method="get">
<input type="submit" value="Auth">
</form>
</body>
</html> 
```

你好。我遇到了这个 HTML 的问题。当我单击提交按钮时，我希望转到[https://oauth.vk.com/authorize?client_id=3343995&scope=photos,wall,offline&redirect_uri=http://example.com/vkontakte/auth&response_type=code](https://oauth.vk.com/authorize?client_id=3343995&scope=photos,wall,offline&redirect_uri=http://example.com/vkontakte/auth&response_type=code)链接，但我去[https://oauth.vk.com/authorize](https://oauth.vk.com/authorize)没有重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:30:18.087

当您的表单使用`method="get"`时，查询参数将从您的操作属性中删除，并且表单元素将在 URL 的查询字符串中进行 URL 编码。

如果您可以使用 POST，则只需更改要使用的表单即可`method="POST"`。您仍然应该正确编码您的 URL 名称和值[http://jsfiddle.net/9FmtW/3/](http://jsfiddle.net/9FmtW/3/)

如果必须使用 GET，则必须将查询参数作为隐藏字段包含在表单中[http://jsfiddle.net/9FmtW/](http://jsfiddle.net/9FmtW/)这有利于正确地对查询字符串参数进行 URL 编码

```
<form action="https://oauth.vk.com/authorize" method="get">
  <input type="hidden" name="client_id" value="3343995" />
  <input type="hidden" name="scope" value="photos,wall,offline" />
  <input type="hidden" name="redirect_uri" value="http://example.com/vkontakte/auth" />
  <input type="hidden" name="response_type" value="code" />
  <input type="submit" value="Auth" />
</form> 
```

![在此处输入图像描述](../Images/5689b6a20ff9759fbf09f5a6a192388e.png)

您的网址中包含一个网址，您需要转义特殊的网址特定字符，例如`&`和`=`

# c# - 2 个由表单身份验证管理的登录区域

> ID：14206433
> 
> 赞同：0
> 
> 时间：2013-01-08T00:26:33.707
> 
> 标签：c#, asp.net-mvc-4, forms-authentication

我正在开发一个 asp.net mvc4 应用程序。它有 2 个用户可以访问的安全区域。对于每个区域，用户都需要不同的角色。用户不可能同时担任两个角色。

该站点有 2 个单独的登录页面。我正在使用表单身份验证来管理正在登录的用户以及他们所扮演的角色。

由于用户有 2 个单独的登录页面，我需要以下功能：

如果用户试图访问站点的区域 A 而不是必要的，他们应该被重定向到登录页面 A。

如果用户试图访问站点的区域 B 而不是必要的，他们应该被重定向到登录页面 B。

开箱即用，我不确定表单身份验证是否可行。有人可以向我解释它是否是以及如何实现？

# android - Android：我们必须手动创建模型类吗？

> ID：14206434
> 
> 赞同：1
> 
> 时间：2013-01-08T00:26:35.457
> 
> 标签：android, model

我正在创建一个模型类，假设它被称为“历史”，它将与 SQLite 数据库交互。

我们是否总是需要为模型类手动创建 getter/setter/fields？没有自动生成器吗？

模型类示例：

```
package com.example.fileexplorermanager;

public class History {

    //private variables
    int _id;
    String _file_name;
    String _full_path;
    String _file_type;

    // Empty constructor
    public History(){

    }
    // constructor
    public History(int id, String _name, String _full_path, String _file_type){
        this._id = id;
        this._file_name = _name;
        this._full_path = _full_path;
        this._file_type = _file_type;

    }

    // getting ID
    public int getID(){
        return this._id;
    }

    // setting id
    public void setID(int id){
        this._id = id;
    }

    public String getFileName(){
        return this._file_name;
    }

    public void setFileName(String file_name){
        this._file_name = file_name;
    }

    public String getFullPath(){
        return this._full_path;
    }

    public void setFullPath(String full_path){
        this._full_path = full_path;
    }

    public String getFileType(){
        return this._file_type;
    }

    public void setFileType(String file_type){
        this._file_type = file_type;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T00:28:33.643

如果你使用 Eclipse：Source -> Generate Getters and Setters...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-24T09:53:32.063

# 更新

### 从 Android Studio v3.0.1 开始：

在 Android Studio 中，按`ALT`+ `INSERT`（或`⌘</kbd> + `N` for MacOS), you will have following choices (including your solution!):`

*   构造函数
*   吸气剂
*   二传手
*   Getter 和 Setter
*   equals() 和 hashCode()
*   toString()
*   覆盖方法...
*   实现方法...
*   委托方法...
*   超级方法调用（在*覆盖方法*内部时）
*   版权
*   *App Indexing API 代码（在扩展Fragment*的类中不可用。）

选择所需的选项并选择方法。完毕！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T00:28:30.897

如果您在 Eclipse 上，请右键单击源文件 -> 源 -> 生成 Getter 和 Setter...![在此处输入图像描述](../Images/408990738d1ad815fac59067c5b621a8.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T00:28:51.433

Android没有提供任何东西，但是有像ORMLite这样的第三方库。

# debugging - 如何使用 Dumpbin 从 PE 标头中确定 AddressOfEntryPoint 的 RVA

> ID：14206439
> 
> 赞同：4
> 
> 时间：2013-01-08T00:26:50.377
> 
> 标签：debugging, windbg, portable-executable

我一直在网上搜索试图找到这个问题的答案，但它似乎在逃避我。在问这个问题之前，我已经咨询了以下来源。

*   [http://www.csn.ul.ie/~caolan/publink/winresdump/winresdump/doc/pefile.html](http://www.csn.ul.ie/~caolan/publink/winresdump/winresdump/doc/pefile.html)
*   [http://msdn.microsoft.com/en-us/magazine/cc301805.aspx](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)

我了解 PE 格式（或者至少我认为我了解）。使用命令行调试器 (cdb)，我希望能够反汇编 RVA 所在的地址，以查看第一个调用是什么。对于本机应用程序（如记事本），我希望看到**notepad!WinMainCRTStartup**，对于 .NET 应用程序，我希望看到 CLR 的 jmp 命令。

以记事本为例，我在上面执行了*dumpbin /headers*，得到的入口点值为3570。当我执行*cdb notepad*并执行此命令时 - *u [内存中的基地址]+0x3570* - 我没有收到 WinMainCRTStartup 调用。

我是否误解了 dumpbin 的 PE 输出？我怎样才能确切地知道在内存中查找应用程序的启动功能的位置？

**编辑（1/7/13）：**我忘了提到我在 64 位 Windows 7 上运行它。如果我尝试在 Windows XP 模式下使用 cdb（从 32 位操作系统获取结果），反汇编 AddressOfEntryPoint正如我所期望的那样，我从 PE 文件的分析中得到了对 WinMainCRTStartup 的调用。换句话说，我被告知要查看的确切地址包含我认为在 32 位操作系统中应该看到的地址。在 64 位机器上运行应用程序真的有那么大的不同吗？

只是为了增加复杂性，如果我在 cdb 的 64 位操作系统中对 ImageBaseAddress 执行 !dh，我会得到我需要使用的 EXACT AddressOfEntryPoint。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T08:14:56.350

使用 Microsoft 符号服务器获取符号调试信息。[http://support.microsoft.com/kb/311503/en-us](http://support.microsoft.com/kb/311503/en-us)

```
0:001> !dh -a notepad
    ....
    3689 address of entry point
    ...
    00ac0000 image base
    ...
0:001> u ac3689 
notepad!WinMainCRTStartup: 
```

**编辑**：添加dumpbin输出（入口点相同的偏移量，图像库可能不同，因为ASLR在图像加载到内存时起作用）：

```
Microsoft (R) COFF/PE Dumper Version 11.00.50727.1
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file c:\windows\notepad.exe

PE signature found

File Type: EXECUTABLE IMAGE

FILE HEADER VALUES
             14C machine (x86)
               4 number of sections
        4A5BC60F time date stamp Tue Jul 14 03:41:03 2009
               0 file pointer to symbol table
               0 number of symbols
              E0 size of optional header
             102 characteristics
                   Executable
                   32 bit word machine

OPTIONAL HEADER VALUES
             10B magic # (PE32)
            9.00 linker version
            A800 size of code
           22400 size of initialized data
               0 size of uninitialized data
            3689 entry point (01003689) _WinMainCRTStartup 
```

**编辑 2**为 x64 添加输出

垃圾箱：

```
Microsoft (R) COFF/PE Dumper Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

Dump of file c:\windows\notepad.exe

PE signature found

File Type: EXECUTABLE IMAGE

FILE HEADER VALUES
            8664 machine (x64)
               6 number of sections
        4A5BC9B3 time date stamp Tue Jul 14 03:56:35 2009
               0 file pointer to symbol table
               0 number of symbols
              F0 size of optional header
              22 characteristics
                   Executable
                   Application can handle large (>2GB) addresses

OPTIONAL HEADER VALUES
             20B magic # (PE32+)
            9.00 linker version
            A800 size of code
           25800 size of initialized data
               0 size of uninitialized data
            3570 entry point (0000000100003570) WinMainCRTStartup 
```

风声：

```
 0:000> !dh -a notepad

    File Type: EXECUTABLE IMAGE
    FILE HEADER VALUES
        8664 machine (X64)
        ...
        1000 base of code
             ----- new -----
    00000000ff0c0000 image base
    ...
0:000> u ff0c0000+3570
notepad!WinMainCRTStartup: 
```

# ios - iOS 中的“删除引用”

> ID：14206441
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:26:57.607
> 
> 标签：ios, reference, distribution, delete-file

我想从以前的完整版本中制作一个新的“轻量级”版本，它的尺寸非常大。

如果我通过“删除参考”从以前的完整版本中删除了一些未使用的“.h”、“.m”和 .png 文件，这些删除的文件是否不会包含在我的新“轻量级”分发 .app 中？

我希望客户可以下载一个包含真正需要的文件的小型应用程序。还是必须使用“也移到垃圾箱”才能达到效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:42:17.640

是的，它们不会被包括在内。

检查的最佳方法是打开目标的设置并查看“构建阶段”。在“Compile Sources”和“Copy Bundle Sources”下，您将看到将包含在您的构建中的所有代码和资源。

![XCode 截图](../Images/a854f708a8de20232bb8242cf78caca3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:43:05.363

是的，如果您不将它们包含在您的免费目标中，它们将不会包含在 .ipa 中。我建议主要删除 .png 和其他大型资源，因为 .m 和 .h 文件不会为您节省太多下载大小。

只需确保在 Target -> Build Phases -> Copy Bundle Resources 下删除它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T00:44:47.013

这不是编译的工作方式，而是检查以下内容：

转到您的项目设置，在 Build Phases 下查找复制包资源部分。

这些是将被复制的元素，如果它们没有出现在这里，那么它们在编译时将不会被复制（对于诸如 png 和其他重文件之类的东西）。

是的，如果您删除引用，它也将从本节中删除。

对于 .h 或 .m 文件，删除它们几乎没有任何区别，并且您可能会删除可能在您可能忘记或不知道的地方实际使用的东西。

# php - 使用客户端 SSL 证书的 PHP 重新发布

> ID：14206445
> 
> 赞同：1
> 
> 时间：2013-01-08T00:27:13.427
> 
> 标签：php, rest, curl

我正在使用一个构建 XML 文件的站点，然后将这些文件发布到 RESTful 界面。我已经构建了生成文件的工具，我想将它们上传到 RESTful 界面。我有一个小问题。使用表单发布文件会很好，但“内容类型”必须是“应用程序/xml”而不是“多部分/表单数据”，因此排除了以这种方式发布的可能性。接下来，我想我会尝试卷曲文件，但这也失败了。

RESTful 接口需要用户的证书才能处理数据。这是因为该界面会根据他们的证书信息跟踪谁在上传。所以，我希望通过以下两种选择之一获得帮助

1) 使用 cURL 将浏览器中的数据和客户端证书发布到 RESTful 接口

2）处理数据，正确设置标题，然后使用客户端浏览器以某种方式将 POST 重定向到页面。我知道如果用户访问 RESTful URL，该页面将对用户进行身份验证。所以如果我能以某种方式将页面数据设置为“应用程序/xml”，然后告诉用户的浏览器“嘿，重定向到这个地址并发送这个数据”......

建议？

# javascript - 基本的 jQuery 函数

> ID：14206448
> 
> 赞同：1
> 
> 时间：2013-01-08T00:27:29.633
> 
> 标签：javascript, jquery

有人可以解释一下，为什么我们需要**每个（功能`(i)`** 做`(i)`什么？似乎**`i`**可以是任何字母。为什么`(i)`是必要的？我不太明白。非常感谢

```
<body>
    <div>Click here</div>
  <div>to iterate through</div>
  <div>these divs.</div>
<script>
    $(document.body).click(function () {
      $( "div" ).each(function (i) {
        if ( this.style.color != "blue" ) {
          this.style.color = "blue";
        } else {
          this.style.color = "";
        }
      });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:37:11.863

回调函数的第一个参数是循环中迭代的索引。即循环计数器。在您的情况下，您根本不需要它，因为您没有使用它：

```
$("div").each(function() {
  if (this.style.color != "blue") {
    this.style.color = "blue";
  } else {
    this.style.color = "";
  }
}); 
```

第二个参数是当前迭代的元素，即与`this`所指的相同。您可以使用该参数而不是`this`. 当然，要使用第二个参数，您还必须指定第一个参数，即使您不使用它：

```
$("div").each(function(i, e) {
  if (e.style.color != "blue") {
    e.style.color = "blue";
  } else {
    e.style.color = "";
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:31:03.877

这可以是您想要的任何名称，它是项目的索引，以防它在函数中有用。jQuery 文档中对此进行了解释。[http://api.jquery.com/each/](http://api.jquery.com/each/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T00:32:01.303

你可以在回调函数中调用 i 任何你想要的，每个方法都会为每个与你的每个选择器匹配的对象调用该回调（在你的情况下是所有 div），并将它传递给你的回调参数（i）或你调用的任何东西您可以为每次迭代操作这些对象中的每一个。

希望我说清楚了，

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T00:32:09.347

好吧，我不知道这是否是您要问的，但根据文档

```
.each( function(index, Element) ) 
```

那是签名，因此`i`在您的情况下，将是当前项目索引的参数。因此，如果您的 div 中有 10 个东西，则每次调用该函数时，它都会为您的 div 中的第 i 个元素传递索引 i。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T00:32:32.363

`.each`用于迭代它所应用的元素集合。第一个参数（`i`在您的示例中为 ）提供集合中当前元素的索引值。

完整的签名是：

```
.each( function(index, Element) ) 
```

当您使用以下重载时：

```
.each( function(index) ) 
```

`index`在函数规范（ 、、、、`i`等）中如何命名参数并不重要`blah`，`param1`索引值将被传递到该参数中。

在您的示例中，此参数值没有提供额外的好处，因为您的用例不需要它，但是，有很多用例是基本参数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T00:48:52.760

i,j,k 是整数的标准表示法。它自然地用于遍历每个元素索引都是整数的可枚举列表（如数组或节点列表）。对于叠瓦环，第一级将使用 i，第二级使用 j，以此类推。

这只是一个约定，实际上您可以使用其他名称，例如 jQuery 文档中显示的“索引”，使您的代码更具可读性。缺点是它会使您的脚本更长，但是随着今天缩小/压缩的广泛使用，这应该不是问题。

当然，如果您不引用循环中的索引，则可以省略它。

# html - 具有多列的引导程序/html5 下拉菜单

> ID：14206455
> 
> 赞同：1
> 
> 时间：2013-01-08T00:27:49.060
> 
> 标签：html, drop-down-menu, twitter-bootstrap, hyperlink, multiple-columns

是否可以在引导程序 2.x 中有包含多列的下拉菜单，我知道它不在 1.x 中？

我认为从 ui 的角度来看，当引导下拉菜单中有超过 10、20 甚至 30 个链接时，它会从页面的折叠或可见区域下降，我认为能够有多个列是有意义的。

两行十列或使用多列的其他组合看起来会更好。

# ruby-on-rails - Rails：如何扩展生成器？

> ID：14206456
> 
> 赞同：5
> 
> 时间：2013-01-08T00:27:49.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 Rails 中扩展模型生成器（ rails g model ）。基本上我的生成器应该和模型一做同样的事情，但是复制 2 个额外的文件。就那么简单。

我查看了 Railscast #218 ( [http://railscasts.com/episodes/218-making-generators-in-rails-3](http://railscasts.com/episodes/218-making-generators-in-rails-3) )，它提供了非常丰富的信息，但我找不到任何关于扩展生成器的信息。

查看 rails 的源代码，模型生成器似乎位于 lib/rails/generators/rails/model/model_generator.rb 中，定义为 Rails::Generators::ModelGenerator。

我试图让我的生成器扩展这个类，但它导致：

```
Error: uninitialized constant Rails::Generators::ModelGenerator. 
```

我要求这个文件的尝试没有成功。

所以我决定在这里停下来问问。扩展发电机的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T09:43:31.183

看看钩子和调用。

```
class MyGenerator < Rails::Generators::Base
  def create_my_file
    # Do your generators stuff
    create_file "config/initializers/my.rb", "# Add content here"
    # Create model
    invoke("model", ["model_name", "arg1", "arg2"])
  end
end 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T16:18:06.273

1.  Generate your custom generator:

    ```
    rails generate generator my_model 
    ```

2.  Open `lib/generators/my_model/my_model_generator.rb` and change it to:

    ```
    require 'rails/generators/active_record/model/model_generator'

    class MyModelGenerator < ActiveRecord::Generators::ModelGenerator
      source_root File.expand_path('../templates', __FILE__)
    end 
    ```

This works for rails engines. Don't forget to add required templates.

# javascript - 通过电子邮件修改网站

> ID：14206458
> 
> 赞同：0
> 
> 时间：2013-01-08T00:28:05.293
> 
> 标签：javascript, html

我想尝试做一些事情，我可以根据收到的网站电子邮件对我的网站进行更改。有谁知道这是怎么做到的吗？

我想要一些东西，如果它来自特定的电子邮件地址，并且遵循特定的格式，它将根据电子邮件的内容更改网站的某个部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:33:15.460

你当然可以。你需要：

1.  按时解析电子邮件并将这些更改添加到某种类型的数据库的脚本
2.  从临时数据库执行更新并将该数据添加到实时数据库的脚本

如何使用 PHP 阅读电子邮件：

```
$mb = imap_open("{host:port/imap}","username", "password" );

$messageCount = imap_num_msg($mb);
for( $MID = 1; $MID <= $messageCount; $MID++ )
{
   $EmailHeaders = imap_headerinfo( $mb, $MID );
   $Body = imap_fetchbody( $mb, $MID, 1 );
   doSomething( $EmailHeaders, $Body );
} 
```

[阅读更多](http://ca.php.net/imap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:36:46.280

您需要一些服务器端处理才能做到这一点。[该线程](http://board.phpbuilder.com/showthread.php?10376231-RESOLVED-Setup-Email-Account-to-Run-PHP-Script)有几种使用 PHP 的方法，使用 cPanel 可以更轻松地更改邮件重定向。如果您告诉我们更多关于您的网站和托管环境的信息，我们或许能够提供更好的建议。

然后，服务器端脚本需要解析您的电子邮件并执行您的命令想要的任何更新。安全性也很重要，在发送电子邮件时伪造“发件人”地址是微不足道的。

# r - 如何将函数应用于R中向量的每个元素

> ID：14206461
> 
> 赞同：9
> 
> 时间：2013-01-08T00:28:30.760
> 
> 标签：r, vector, apply

假设我想将向量的每个偶数元素乘以 2，将向量的每个奇数元素乘以 3。下面是一些可以执行此操作的代码：

```
v <- 0:10

idx <- v %% 2 == 0
v[idx] <- v[idx] * 2
v[!idx] <- v[!idx] * 3 
```

如果我有两个以上的案例，这将变得很困难。似乎 apply 系列函数从不处理向量，所以我不知道解决这个问题的更好方法。如果我对数据进行转换，也许使用 apply 函数会起作用，但似乎这不应该是我解决这个简单问题所需要做的事情。

有任何想法吗？

编辑：很抱歉造成混乱。我对“%%”运算符并不特别感兴趣。我想在我的问题中添加一些具体的代码，但是根据对问题的回答，太具体了。我想弄清楚如何对列表的每个成员应用一些任意函数。这对于 apply() 是不可能的，我认为 sapply() 只适用于列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T01:11:31.363

你可以做：

```
v <- v * c(2, 3)[v %% 2 + 1] 
```

它可以推广到任何`v %% n`，例如：

```
v <- v * c(2, 3, 9, 1)[v %% 4 + 1] 
```

它也不需要`length(v)`是 的倍数`n`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T00:33:51.990

你可以使用向量乘法来做你想做的事：

```
tmp <- 1:10
tmp * rep(c(3,2), length(tmp)/2) 
```

这很容易扩展到三种或更多情况：

```
tmp * rep(c(3,2,4), length(tmp)/3) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T01:21:37.650

最简单的是：

```
v*c(2,3) # as suggested by flodel in a comment. 
```

在文档中搜索的术语是“参数回收”...... R 语言的一个特性。仅适用于二进中缀函数（请参阅 参考资料`?Ops`）。对于不会与某些参数出错并且您不能依赖“v”的结构非常规则的非二元向量化函数，您可以使用 ifelse：

```
ifelse( (1:length(v)) %% 2 == 0, func1(v), func2(v) ) 
```

这构造了两个向量，然后根据 hte 第一个参数的真值选择第一个或第二个中的元素。如果您试图回答帖子标题中的问题，那么您应该查看：

```
?sapply 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T02:02:15.993

这是一个答案，允许将任意一组函数应用于向量中定义的组。

```
# source data
test <- 1:9
# categorisations of source data
cattest <- rep(1:3,each=3)
#[1] 1 1 1 2 2 2 3 3 3 
```

使函数差分应用函数：

```
categ <- function(x,catg) {
          mapply(
                 function(a,b) {
                                switch(b,
                                       a * 2,
                                       a * 3,
                                       a / 2
                                      )
                               },
                  x,
                  catg
                 )
         }
# where cattest = 1, multiply by 2
# where cattest = 2, multiply by 3
# where cattest = 3, divide by 2 
```

结果：

```
categ(test,cattest)
#[1]  2.0  4.0  6.0 12.0 15.0 18.0  3.5  4.0  4.5 
```

# javascript - 如何过滤body html从ajax返回的数据？

> ID：14206467
> 
> 赞同：4
> 
> 时间：2013-01-08T00:28:56.873
> 
> 标签：javascript, jquery, jqxhr

我的目的是，我想从数据中取出特定的 html 并仅更新该区域。

[如何过滤从 jQuery.ajax 返回的数据？](https://stackoverflow.com/questions/4245231/how-do-i-filter-the-returned-data-from-jquery-ajax)

该链接是旧帖子，但我确实遇到了完全相同的问题。

从链接给出的解决方案是`$("[ref=B]").html(data).find( '[ref=A]' );`

但是，如果我这样做，整个页面将`<span ref='B'>`首先写入，然后在其中找到选择器.....

仅找到 '[ref=A]' 的另一种方法是

```
html = $(data).filter('[ref=B]').find('[ref=A]').html() // this way will work 
```

这些都不行

```
$(data).find('[ref=A]').html();
$(data).filter('[ref=A]').html();
$(data).filter('body').html();
$(data).find('body').html(); 
```

HTML

```
`<body>

<span ref='B'><span ref='A'>abc</span></span>

</body>` 
```

JS

```
 $(function() {
$.get(window.location.pathname + window.location.search, function(data){ alert(data);});
 }); 
```

返回数据

```
<html>
<body>
    <span ref='B'><span ref='A'>abc</span></span>
</body>
</html> 
```

我的问题是，有没有一种解决方案可以从 $.ajax 返回的数据中过滤 body 的 html？像

```
body_html = $(data).??????? 
```

然后我可以做任何我想做的事，比如

```
body_html.find('xxxx'); 
```

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:38:41.017

您可以使用[DocumentFragment](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-B63ED1A3)来模拟您的 html 并在不将其附加到[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)的情况下进行搜索。

```
// Create your DocumentFragment to be able to work without DOM
var body_html = document.createDocumentFragment();

// Convert and append data from your jQuery to work with fragment
body_html.appendChild($(data)[0]);

// Now you can select using your jQuery
var $body_html = $(body_html);

// Now you can use the find or whatever you want, like if it was in the DOM
$body_html.find('.foo');

// Or you can append in your current document, 
// but attention, after it the fragment reference is erased
$body_html.appendTo(document.body); 
// now you need to get reference again from body, 
// because your fragment doesn't exists anymore.

// So... if you try:
console.log(body_html); // undefined
console.log($body_html); // jquery over undefined, probably just a jquery useless

// At this point you will need to reference from DOM to continue manipulation
$body_html = $(document.body);
// Now I'm ready to continue the work
// This var is like your DocumentFragment, but already on DOM. 
```

您也可以在 jQuery 模板中进行过滤，`$(data).filter('.foo')`但正如您在此**[测试](http://jsperf.com/jquery-documentfragment-vs-jquery-template)**中看到的那样，您的性能会下降很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T01:01:07.477

```
$("[ref=B]").append($(data).find("[ref=A]")); 
```

你在你的问题中这样做的方式，最后一部分`find( '[ref=A]' )`是没用的。

[编辑]另外，另一个问题已经超过2年了。对于最新版本的 jQuery，您可能需要额外的引号：

```
$("[ref='B']").append($(data).find("[ref='A']")); 
```

# c# - 在运行时加载依赖程序集时是否可以运行单元测试？

> ID：14206468
> 
> 赞同：3
> 
> 时间：2013-01-08T00:28:58.123
> 
> 标签：c#, .net, unit-testing, nunit, mstest

是否可以在没有“复制本地”依赖项的情况下运行单元测试，在运行时加载程序集？

更多细节：

我的 .net 解决方案如下所示：

*   MainProject (exe) [取决于“Class1Project”并在运行时使用“AssemblyLoaderProject”加载它]。

    'Class1Project' 设置为 'copy local = false' 和 'AssemblyLoaderProject' 设置为 'copy local = true'

*   Class1Project (dll)

*   AssemblyLoaderProject（使用 AppDomain.CurrentDomain.AssemblyResolve 和 Assembly.LoadFrom 在运行时加载和解析依赖项程序集）

*   UnitTestsProject（Nunit 或 MSTest）

在单元测试项目中，我正在尝试测试“Class1Project”，并且希望将其配置设置为与 MainProject 相同。

这意味着，UnitTestProject 还使用“copy local = false”引用“Class1Project”，并使用“copy local = true”引用“AssemblyLoaderProject”，并使用它在运行时加载程序集。

但由于某种原因，单元测试无法执行，运行程序抛出 FileNotFoundException 指定它无法解析“Class1Project”程序集。

尝试调试它，我发现测试运行程序甚至没有找到告诉 AssemblyLoaderProject 加载程序集的代码。

测试代码如下所示：

```
[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void TestMethod1()
    {
        Loader.LoadAssemblies();
        Class1 cls = new Class1();
        Assert.IsTrue(true);
    }
} 
```

这是我尝试在 MSTest 上使用 VS2012 测试运行程序对其进行调试时收到的错误消息：

```
Test Name:  TestMethod1
Test FullName:  UnitTestProject1.UnitTest1.TestMethod1
Test Source:    c:\Users\user\Documents\Visual Studio 2012\Projects\ClassLibrary1\UnitTestProject1\UnitTest1.cs : line 13
Test Outcome:   Failed
Test Duration:  0:00:00.1177608

Result Message: 
Test method UnitTestProject1.UnitTest1.TestMethod1 threw exception: 
System.IO.FileNotFoundException: Could not load file or assembly 'ClassLibrary1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.=== Pre-bind state information ===
LOG: User = \user
LOG: DisplayName = ClassLibrary1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Users/user/Documents/Visual Studio 2012/Projects/ClassLibrary1/UnitTestProject1/bin/Debug
LOG: Initial PrivatePath = NULL
Calling assembly : UnitTestProject1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO 11.0\COMMON7\IDE\COMMONEXTENSIONS\MICROSOFT\TESTWINDOW\vstest.executionengine.x86.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Users/user/Documents/Visual Studio 2012/Projects/ClassLibrary1/UnitTestProject1/bin/Debug/ClassLibrary1.DLL.
LOG: Attempting download of new URL file:///C:/Users/user/Documents/Visual Studio 2012/Projects/ClassLibrary1/UnitTestProject1/bin/Debug/ClassLibrary1/ClassLibrary1.DLL.
LOG: Attempting download of new URL file:///C:/Users/user/Documents/Visual Studio 2012/Projects/ClassLibrary1/UnitTestProject1/bin/Debug/ClassLibrary1.EXE.
LOG: Attempting download of new URL file:///C:/Users/user/Documents/Visual Studio 2012/Projects/ClassLibrary1/UnitTestProject1/bin/Debug/ClassLibrary1/ClassLibrary1.EXE.
Result StackTrace:  at UnitTestProject1.UnitTest1.TestMethod1() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T05:26:46.460

假设`Loader.LoadAssemblies`是注册`AssemblyResolve`事件的方法，您会收到此异常，因为运行时无法`ClassLibrary1.dll`通过探测找到。重要的是要了解为什么探测会在这里发挥作用。调用探测是因为在您可以通过`Loader.LoadAssemblies`该方法加载任何程序集之前，必须进行 Jitted。为了正确地进行jit，运行时必须为编译时引用的类型加载程序集。由于您已将“本地复制”设置为 false，因此该文件`ClassLibrary1.dll`未复制且不在探测路径中。因此，您的`FileNotFoundException`.

首先，我会尝试`Loader.LoadAssemblies`进入一个标有`TestInitialize`属性的方法，以便在每次测试之前运行。但是，根据在测试执行之前复制文件的位置，这也可能不起作用。您可能必须在测试设置中启用部署并使用该`DeploymentItem`属性。

一个更大的问题是：如果您进行单元测试，为什么不能将依赖项的“复制本地”设置为 true，以便将它们与测试程序集一起复制？

根据具体的`Loader.LoadAssemblies`操作，您可能会遇到由于程序集被加载到多个或不同的加载上下文而导致的其他问题。这可能会导致问题`InvalidCastException`，例如错误提示您无法将类型“X”转换为类型“X”。但是，您可能是安全的，因为如果通过探测未找到程序集，则会调用 AppDomain.AssemblyResolve 将程序集加载到 Load 上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-02T19:55:00.960

我同意应该有一种方法来配置解析目录，就像 Mstest 使用“.runsettings”文件一样。

关于问题：

> *一个更大的问题是：如果您进行单元测试，为什么不能将依赖项的“复制本地”设置为 true，以便将它们与测试程序集一起复制？*

好吧，答案是可能会使用很多依赖项的依赖项。

很难遵循像第 3 方这样的所有被动依赖关系。

我的意思是 - 如果您测试的程序集依赖于程序集 A，那么 A 可能依赖于 B。copy local true 将仅复制 A，但会在运行时失败，因为 B 丢失。考虑像整个程序集嵌套在以下文件夹中的情况：

*   应用根
    *   应用主机.exe
    *   商业逻辑（文件夹）
    *   接口（文件夹）
    *   用户界面（文件夹）
    *   基础设施（文件夹）
    *   第 3 方（文件夹）

并且 apphost 具有 App.config，它允许目录探测以使运行时解析所有嵌套目录。

mstest ".runsettings" 可以在单元测试期间配置类似的程序集探测。XUnit 无法做到这一点。

一种解决方法是开始引用您的测试的大量程序集，每个程序集在您发现它不能被重新处理之后 - 但您仅在运行测试时才发现它。

这是一个糟糕且令人沮丧的解决方案。

我投票赞成插入一个更改请求，即 XUnit 也将支持目录探测配置。

那将非常有帮助。

（这实际上阻碍了我们从 mstest 升级到所需的 XUnit）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:05:44.570

您必须使 DLL'Class1Project' 可用于加载程序，因此，如果您不想将项目设置为始终复制它，您可以使用**[DeploymenItem](http://goo.gl/7DJ1n)**属性复制它以进行测试，以便加载可以找到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T16:44:30.377

[VS2012 测试运行器中有一个错误。](http://connect.microsoft.com/VisualStudio/feedback/details/771138/vs2012-referenced-assemblies-in-unit-test-are-not-copied-to-the-unit-test-out-f)在我的项目中，我将所有依赖项设置为复制 local = true 并且仍然有一些 dll 没有被复制到“Out”文件夹中，从而导致测试失败。如果我在 VS2010 下运行相同的测试，一切都会完美运行。

使用 DeploymentAttribute 确实有帮助，但它不应该是必需的。

# c++ - 我使用指向指针的指针对吗？

> ID：14206469
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:29:19.243
> 
> 标签：c++, pointers, dynamic-memory-allocation

我是 C++ 编程的新手，并试图通过阅读 [Alex Alllain 的一本名为 Jumping into C++](http://www.cprogramming.com/c++book/ "跳入 C++")的电子书来学习这门语言，我目前已经完成了动态内存分配一章，我必须说我发现指针很难理解。

本章的最后是一系列我可以尝试的练习题，我已经完成了第一个问题（花了我一段时间才让我的代码工作），即**编写一个构建任意维度乘法表的函数**（你必须使用指针来解决问题），但我对我的解决方案不满意，如果它是正确的，如果我以正确的方式使用指针，我希望有经验的人指出缺陷，如果有，下面是我的自己解决问题的方法：

```
// pointerName.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <string>
#include <iostream>
#include <string>

void multTable(int size){

    int ** x, result;
    x = new int*[size]; //  lets declare a pointer that will point to another pointer :).
    result = 0; 

    for(int h = 0; h < size; h++){ // lets store the address of an array of integers.
            x[h] = new int [size];      
    }
    std::cout << std::endl << "*********************************" << std::endl; // lets seperate. 
    for(int i=0; i < size+1; i++){ // lets use the pointer like a two-dimensional array.
        for(int j=0; j < size+1; j++){
            result = i*j; // lets multiply the variables initialized from the for loop.
            **x = result; // lets inialize the table.
            std::cout << **x << "\t"; // dereference it and print out the whole table.
        }
        std::cout  << std::endl;
    }
    /************* DEALLOCATE THE MEMORY SPACE ************/
    for(int index = 0; index < size; index++){
        delete [] x[index]; // free each row first.  
    }
    delete [] x; // free the pointer itself.
}

int main(int argc, char* argv[]){

    int num;
    std::cout << "Please Enter a valid number: ";
    std::cin >> num; // Lets prompt the user for a number.
    multTable(num);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:42:08.043

billz 所说的以及 **x 必须更改为 x[i][j]。由于您看起来很新，因此将乘法表打印为一个单独的块（在两个 for 循环之外）是一个好习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:55:09.767

这里：

```
for(int i=0; i < size+1; i++){ // lets use the pointer like a two-dimensional array.
    for(int j=0; j < size+1; j++) 
```

如果你正确地完成了下一个机器人，那么循环会很远，因为你的索引超出了数组的末尾。对你来说幸运（有以下错误）。这些行应该是：

```
for(int i=0; i < size; i++){ // lets use the pointer like a two-dimensional array.
    for(int j=0; j < size; j++) 
```

这一行：

```
 **x = result; // lets inialize the table. 
```

你可能的意思是：

```
x[i][j] = result; // lets inialize the table. 
```

注意： // 注意，因为您的第一个错误 x[i] 会超出数组末尾一个。

分配数组时：

```
 x = new int[size]; 
```

您可以访问元素： x[0] => x[size-1]

这是因为有`size`元素，但您从 开始计数`0`。

# cakephp - cakephp 从数据库中选择带有字符串的复选框

> ID：14206472
> 
> 赞同：0
> 
> 时间：2013-01-08T00:29:41.567
> 
> 标签：cakephp, select, auto-populate

添加记录时，我让用户标记尽可能多的复选框并需要：

```
echo $this->Form->input('us_roles', array('label' => 'Roles:',  'type'=> 'select', 'multiple'=>'checkbox','options' => $arr_pr_role)); 
```

并将选定的索引存储到我的 bd 上的字符串字段中，没有问题。（它可以节省例如 1,2,3）

但是，在编辑该记录时，复选框不会被填充-选中-accodingly。（基于字符串文本，例如 1,2,3

如何让我的 checkboxex 反映在数据库中存储为字符串的值？

我的编辑视图与我的添加视图使用相同：

```
echo $this->Form->input('us_roles', array('label' => 'Roles:',  'type'=> 'select', 'multiple'=>'checkbox','options' => $arr_pr_role)); 
```

* ***更多细节

添加新记录时，我将选择中的选择内爆到我的数据中：

```
$this->request->data['User']['us_roles'] = implode(",", $this->request->data['User']['us_roles']); 
```

保存已编辑的记录时也是如此。

问题是在检索时，如何将字符串转换为我的 us_roles 输入？

```
echo $this->Form->input('us_roles', array('label' => 'Roles:',  'type'=> 'select', 'multiple'=>'checkbox','options' => $arr_pr_role)); 
```

你能帮我吗？

---更新，修复---

```
 public function edit($id = null) {
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
    if ($this->request->is('post') || $this->request->is('put')) {
        $this->request->data['User']['us_roles'] = implode(",", $this->request->data['User']['us_roles']);
        if ($this->User->save($this->request->data)) {
...
 } else {
             $this->request->data = $this->User->read(null, $id);
        $this->request->data['User']['us_roles'] = explode(",", $this->request->data['User']['us_roles']);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T22:25:45.603

现在我明白了......你正在寻找 implode() 的反面。那将是explode()。

或者您可以使用字符串类（[http://book.cakephp.org/2.0/en/core-utility-libraries/string.html#String::tokenize](http://book.cakephp.org/2.0/en/core-utility-libraries/string.html#String::tokenize)）：

```
$array = String::tokenize($string, ','); 
```

应该让您返回您的值数组。

但相信我，通常有更好的方法来做到这一点。你可以把它变成另一个数据库表+模型。您可以使用 ArrayDatasource，也可以像我在这种情况下那样使用一些位掩码解决方案（[http://www.dereuromark.de/2012/02/26/bitmasked-using-bitmasks-in-cakephp/](http://www.dereuromark.de/2012/02/26/bitmasked-using-bitmasks-in-cakephp/)）。最后一种方法的优点是您仍然只使用一个字段（和非常小的空间），而您拥有额外表的全部功能：对 NOT、AND、OR、...

# ruby-on-rails - RSpec重试抛出异常然后返回值

> ID：14206477
> 
> 赞同：23
> 
> 时间：2013-01-08T00:30:35.153
> 
> 标签：ruby-on-rails, ruby, rspec

我有一个重试块

```
 def my_method
    app_instances = []
    attempts = 0
    begin 
      app_instances = fetch_and_rescan_app_instances(page_n, policy_id, policy_cpath)
    rescue Exception
      attempts += 1
      retry unless attempts > 2
      raise Exception 
    end
    page_n += 1
  end 
```

在哪里`fetch_and_rescan_app_instances`访问网络所以可以抛出异常。

我想编写一个 rspec 测试，它第一次抛出异常并且第二次调用它时不抛出异常，所以我可以测试它是否第二次不抛出异常，my_method 不会抛出例外。

我知道我可以做到`stub(:fetch_and_rescan_app_instances).and_return(1,3)`，第一次它返回 1，第二次返回 3，但我不知道如何第一次抛出异常并第二次返回一些东西。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-08T02:25:07.693

您可以在一个块中计算返回值：

```
describe "my_method" do
  before do
    my_instance = ...
    @times_called = 0
    my_instance.stub(:fetch_and_rescan_app_instances).and_return do
      @times_called += 1
      raise Exception if @times_called == 1
    end
  end

  it "raises exception first time method is called" do
    my_instance.my_method().should raise_exception
  end

  it "does not raise an exception the second time method is called" do
    begin
      my_instance.my_method()
    rescue Exception
    end
    my_instance.my_method().should_not raise_exception
  end
end 
```

请注意，您真的不应该从中拯救`Exception`，使用更具体的东西。请参阅：[为什么在 Ruby 中 `rescue Exception => e` 是一种不好的风格？](https://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-09-10T10:16:08.220

您所做的是限制应该接收消息的时间（接收计数），即在您的情况下，您可以

```
instance.stub(:fetch_and_rescan_app_instances).once.and_raise(RuntimeError, 'fail')
instance.stub(:fetch_and_rescan_app_instances).once.and_return('some return value') 
```

第一次调用`instance.fetch_and_rescan_app_instances`会引发 RuntimeError，第二次调用会返回“一些返回值”。

PS。调用更多会导致错误，您可以考虑使用不同的接收计数规范[https://www.relishapp.com/rspec/rspec-mocks/docs/message-expectations/receive-counts](https://www.relishapp.com/rspec/rspec-mocks/docs/message-expectations/receive-counts)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-10-24T12:52:20.613

这在 RSpec3.x 中有所改变。似乎最好的方法是将一个块传递给`receive`定义这种行为的 。

以下来自文档，建议如何创建这种类型的[传输故障](https://relishapp.com/rspec/rspec-mocks/v/3-5/docs/configuring-responses/block-implementation#simulating-a-transient-network-failure)：

*（每隔一次*调用它就会出错......但很容易适应。）

```
RSpec.describe "An HTTP API client" do
  it "can simulate transient network failures" do
    client = double("MyHTTPClient")

    call_count = 0
    allow(client).to receive(:fetch_data) do
      call_count += 1
      call_count.odd? ? raise("timeout") : { :count => 15 }
    end

    expect { client.fetch_data }.to raise_error("timeout")
    expect(client.fetch_data).to eq(:count => 15)
    expect { client.fetch_data }.to raise_error("timeout")
    expect(client.fetch_data).to eq(:count => 15)
  end
end 
```

# google-chrome-extension - 从 Google Drive 中选择后，在打包的应用程序/扩展程序中显示图像

> ID：14206482
> 
> 赞同：0
> 
> 时间：2013-01-08T00:31:25.353
> 
> 标签：google-chrome-extension, google-drive-api, picker

我打包的应用程序从谷歌驱动器获取图像，然后将它们显示在侧面。但我无法显示图像。我正在尝试获取图像的 url，以便可以将该 url 放入图像源中。我得到的图片网址实际上是一个 html 页面，而不是 jpeg、png 等。我查看了谷歌选择器的参考指南，但似乎没有任何效果。

我正在使用这个

```
 function pickerCallback(data) {
    if (data.action == google.picker.Action.PICKED) {   
    var fileId = data.docs[0].id;
    fileName = data.docs[0].name;
    imgURL = data.docs[0].url;
    } 
```

我想使用 imgURL 作为图像选择的来源，但 imgURL 不是像“https//:www.example.com/image.jpg”之类的东西。它是一个 html 页面，我想要一些以文件类型结尾的内容能够显示图像。请让我知道如何在我的打包应用程序的 html 页面中显示从谷歌驱动器中选择的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:23:24.517

您应该获取图像的元数据，然后使用图像的元数据`webContentLink`，然后用户可以在登录的浏览器中查看它。有关更多信息，请参阅[有关下载的文档](https://developers.google.com/drive/manage-downloads)。

# php - PHP 常量不“坚持”

> ID：14206490
> 
> 赞同：0
> 
> 时间：2013-01-08T00:32:23.387
> 
> 标签：php, conditional, constants

我试图保护 PHP 不被其他页面乱序调用。过去为了做到这一点，我在初始页面中设置了一个常量，并检查它是否存在于后续页面中。到目前为止，这一直运作良好。现在我遇到了需要设置条件常数的情况。在第一个文件中，设置了 values 常量值 - 即

```
define('FOO','bar');
define('FOO2', 'bar2'); 
```

在下一页中，我检查了常量：

```
if (!defined('FOO'))
{
echo "Hack Attack";
} 

if (defined('FOO2'))
{
echo "Do Something Else";
} 
```

这工作正常。问题是'FOO2'需要像这样有条件：

```
define('FOO','bar');
$vld = $_GET['pageno'];
if ($vld>2)
{
  define('FOO2', bar2');
} 
```

现在，在我看来这应该可行，并且如果我将大于 2 的数字传递到页面中，则应该创建常量 'foo2'。事实上它是被创建的，但不存在于这个函数之外，几乎违背了它的目的。

为了测试这一点，我在代码中加入了一些“回声”。

```
define('FOO','bar');
$vld = $_GET['pageno'];
if ($vld>2)
{
  echo $vid;
  echo '<br />';
  echo FOO;
  define('FOO2', bar2');
  echo '<br />' ;
  echo FOO2;
} 
```

将值 3 传递到此页面会导致以下输出：

3

酒吧

酒吧2

正是你所期望的。但是，程序的第二部分不起作用。

所以我在第二部分插入了一些类似的“回声”语句：

```
if (!defined('FOO'))
{
echo "Hack Attack";
} else {
echo FOO;
echo '<br />';
}

if (defined('FOO2'))
{
echo "Do Something Else";
} else {
echo FOO2;
} 
```

这里的结果是：

酒吧

FOO2

不是我所期望的。所以我删除了第一部分中的条件并重新运行了两个部分：

```
define('FOO','bar');
$vld = $_GET['pageno'];
// if ($vld>2)
// {
  echo $vid;
  echo '<br />';
  echo FOO;
  define('FOO2', bar2');
  echo '<br />' ;
  echo FOO2;
// } 
```

这部分的结果与以前相同：

3

酒吧

酒吧2

但第二部分明显不同：

酒吧

酒吧2

这里发生了什么？？？？

我如何解决它？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:50:52.710

您的脚本没有问题，如果我理解正确，您的意思是您将一页包含在另一页中。

在第一部分：

```
if (!defined('FOO')){
  echo "Hack Attack"; // Echoed when FOO is not defined
} else {
  echo FOO; // Echoed when FOO is defined
  echo '<br />';
} 
```

它会回显`"bar2"`，因为您只会回显 when `FOO` **is defined**。

但是第二部分会回显，因为您仅在**未定义**`"FOO2"`时才回显它。`FOO2`

 **```
if (defined('FOO2')){
  echo "Do Something Else"; // Echoed when FOO2 is defined
} else {
  echo FOO2; // Echoed when FOO2 is not defined
} 
```

当您尝试回显未定义的常量时，您只会得到它的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:45:01.030

文字`'bar2'`写成`bar2'`并且在您的 example/s 中缺少一个在语句中定义 bar2 的起始刻度`if`：

```
define('FOO','bar');
$vld = $_GET['pageno'];
if ($vld>2) 
{
  echo $vid;
  echo '<br />';
  echo FOO;

  //Are you sure this is what you want - bar2' without a beginning tick?
  define('FOO2', bar2');
  echo '<br />' ;
  echo FOO2;
} 
```**

# angularjs - 如何在 AngularJS 中存储当前用户上下文？

> ID：14206492
> 
> 赞同：92
> 
> 时间：2013-01-08T00:32:36.117
> 
> 标签：angularjs

我有一个 AuthService，它登录一个用户，它返回一个用户 json 对象。我想要做的是设置该对象并在应用程序中反映所有更改（登录/注销状态），而无需刷新页面。

我将如何使用 AngularJS 完成此任务？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-01-08T00:41:29.257

实现这一点的最简单方法是使用服务。例如：

```
app.factory( 'AuthService', function() {
  var currentUser;

  return {
    login: function() { ... },
    logout: function() { ... },
    isLoggedIn: function() { ... },
    currentUser: function() { return currentUser; }
    ...
  };
}); 
```

然后，您可以在任何控制器中引用它。以下代码监视来自服务的值的更改（通过调用指定的函数），然后将更改的值同步到范围。

```
app.controller( 'MainCtrl', function( $scope, AuthService ) {
  $scope.$watch( AuthService.isLoggedIn, function ( isLoggedIn ) {
    $scope.isLoggedIn = isLoggedIn;
    $scope.currentUser = AuthService.currentUser();
  });
}); 
```

然后，当然，您可以使用您认为合适的信息；例如，在指令、模板等中。您可以在菜单控制器等中重复此操作（根据您的需要定制）。当您更改服务的状态时，所有这些都会自动更新。

更具体的内容取决于您的实施。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-27T08:07:05.573

我会修改 Josh 的良好响应，补充一点，因为 AuthService 通常会引起任何人的兴趣（例如，如果没有人登录，除了登录视图之外的任何人都应该消失），也许更简单的替代方法是使用`$rootScope.$broadcast('loginStatusChanged', isLoggedIn);`(1 ) (2)，而相关方（例如控制者）会使用`$scope.$on('loginStatusChanged', function (event, isLoggedIn) { $scope.isLoggedIn = isLoggedIn; }`.

(1)`$rootScope`作为服务的参数注入

(2) Note that, in the likely case of a asynchronous login operation, you'll want to notify Angular that the broadcast will change things, by including it in a `$rootScope.$apply()` function.

Now, speaking of keeping the user context in every/many controllers, you might not be happy listening for login changes in everyone of them, and might prefer to listen only in a topmost login controller, then adding other login-aware controllers as children/embedded controllers of this one. This way, the children controller will be able to see the inherited parent $scope properties such as your user context.

# linux - git 命令从 sha1 哈希中显示分支/功能名称

> ID：14206505
> 
> 赞同：3
> 
> 时间：2013-01-08T00:34:28.080
> 
> 标签：linux, git, git-log

如何从命令行上的 sha1 哈希获取分支/功能名称？

这也是如何使用 pretty=format 语法完成的。

我看到它是用这种方法完成的

```
git log --graph --full-history --all --color \  
--pretty=format:"%x1b[31m%h%x09%x1b[32m%d%x1b[0m%x20%s" 
```

但我不知道是哪条线导致了这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:36:59.067

> 如何从命令行上的 sha1 哈希获取分支/功能名称？

您可以使用...

```
git branch --contains <sha1> 
```

# .net - .NET MD5 Hash 的 String 和 Stream 的区别

> ID：14206508
> 
> 赞同：2
> 
> 时间：2013-01-08T00:34:58.047
> 
> 标签：.net, hash, f#, md5

我目前面临一个问题，即必须对文件进行哈希处理，这会导致内存压力过大，我正在尝试找出我们是否可以使用文件流动态创建哈希。

在研究可能性时，我决定编写一个快速的小测试，并确保 MD5 的 ComputeHash 在采用字符串和流的方法调用之间返回相同的哈希值。

```
let CreateMD5HashFromString (value: string) =
     Convert.ToBase64String(MD5.Create().ComputeHash(Encoding.ASCII.GetBytes(value)))

let CreateMD5HashFromStream (value: Stream) =
     Convert.ToBase64String(MD5.Create().ComputeHash(value)) 
```

我正在使用以下单元测试来测试调用：

```
[<TestMethod>]
member this.``CreateMD5Hash is the same between a string and a file stream`` () =
    let sampleText = File.ReadAllText("Sample.txt")
    let textMD5 = Security.CreateMD5HashFromString(sampleText);
    let streamMD5 = Security.CreateMD5HashFromStream(File.OpenRead("Sample.txt"))

    Assert.AreEqual(textMD5, streamMD5) 
```

它正在读取一个用于测试的小样本文件。此测试失败，因为生成的哈希值不同。对我来说，这似乎是不正确的，但并不完全确定。有谁知道这些是否应该相同？

另外，第二个问题，我是通过使用 ComputeHash 的流重载来节省自己的内存问题，还是在散列之前加载整个流？我试图分解相关的 .NET 程序集，但在试图追踪 HashCore 的幕后工作时迷失了方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T00:59:44.927

它实际上很简单：你不能假设文本等于它的底层二进制表示。

在这个*创建*和*读取*示例文本为**ASCII**的示例中，它可以正常工作，就像您期望的那样：

```
public static void Main(string[] args)
{
    System.IO.File.WriteAllBytes("test", System.Text.Encoding.ASCII.GetBytes("test string"));

    var inputString = System.IO.File.ReadAllText("test");
    var inputBytes = System.IO.File.ReadAllBytes("test");
    var inputStream = new System.IO.FileStream("test", System.IO.FileMode.OpenOrCreate);

    var stringHash = Convert.ToBase64String(System.Security.Cryptography.MD5.Create().ComputeHash(System.Text.Encoding.ASCII.GetBytes(inputString)));
    var streamHash = Convert.ToBase64String(System.Security.Cryptography.MD5.Create().ComputeHash(inputStream));
    var bytesHash = Convert.ToBase64String(System.Security.Cryptography.MD5.Create().ComputeHash(inputBytes));

    Console.WriteLine("String hash: {0}", stringHash);
    Console.WriteLine("Stream hash: {0}", streamHash);
    Console.WriteLine("Bytes hash: {0}", streamHash);

    Console.WriteLine("\nMD5s {0}", stringHash == streamHash && streamHash == bytesHash ? "match" : "don't match");
} 
```

带输出

```
String hash: b421md6Yb6t6IWJbeRZYnA==
Stream hash: b421md6Yb6t6IWJbeRZYnA==
Bytes hash: b421md6Yb6t6IWJbeRZYnA==

MD5s match 
```

但是，这仅在磁盘上的文件是纯 ASCII 文件的情况下才有效。在任何其他情况下都是*零保证。*例如，许多非 ASCII 文件以 BOM（字节顺序标记）开头，以表示编码类型。这将在二进制字节数组散列中表示，而不是在内存中的字符串散列中表示。UTF-8 和 unicode 通常可以对同一个字符串有十几种不同的表示形式——当将字符串加载到`string`对象中时，字符串可以被规范化为与磁盘上不同的表示形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T01:00:18.307

我认为关键问题是，源文件中使用了什么编码？

`Encoding.ASCII.GetBytes`如果您使用的字节数组包含与 相同的字节，则哈希值将相同`Stream`，但只有当您使用的文件包含与使用相同的编码并且`GetBytes`文件中没有签名时，才会出现这种情况。

这与 MD5 函数无关，因此您可以通过检查更轻松地进行测试（假设文件小于 10kB - 否则您需要更大的缓冲区）：

```
let res1 = Encoding.ASCII.GetBytes(File.ReadAllText("test.txt"))
let buffer = Array.zeroCreate 10240
let size = File.OpenRead("D:\\temp\\test.fsx").Read(buf, 0, 10240)
let res2 = buffer.[0 .. size - 1]

res1 = res2 // Are the byte arrays the same? 
```

当我尝试运行它时，我必须解决两件事：

*   我使用的文件是用*带有签名*的 UTF-8 保存的，所以开头有 3 个字节指定编码（如果我使用，我只会得到相同的字节数组`buffer.[3 .. size - 1]`

*   我必须使用相同的编码保存文件（在这种情况下为 ASCII，但一般来说，正确处理可能会很棘手）。或者，您可以在读取文件时指定编码，但您可能会散列无意义的文本。

# c++ - Shedskin - 编译错误

> ID：14206513
> 
> 赞同：3
> 
> 时间：2013-01-08T00:35:25.870
> 
> 标签：c++, python, converter, shedskin

我目前正在尝试用 shedskin 编译一个 python 项目（5个文件@总共 1200 行代码）。

我试过 shedskin 版本 0.9.3 和 0.9.2 都导致相同的错误。这是我遇到的第一个错误：

```
mmain.cpp: In function ‘__shedskin__::list<__shedskin__::list<int>*>* __mmain__::list_comp_3(__shedskin__::__ss_int)’:
mmain.cpp:133: error: no matching function for call to ‘__shedskin__::list<__shedskin__::list<int>*>::append(__shedskin__::list<double>*)’ 
```

此外，我在运行 shedskin 之后（即在输入“make”之前）收到许多警告 - 所有与动态类型有关：

```
*WARNING* mmain.py: expression has dynamic (sub)type: {float, int, list} 
```

但是，shedskin 似乎可以完美地与提供的示例一起工作，因为我可以编译和执行它们而不会出现任何错误。

您是否知道在哪里查找错误或错误与什么有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:06:46.743

```
mmain.cpp:133: error: no matching function for call to ‘__shedskin__::list<__shedskin__::list<int>*>::append(__shedskin__::list<double>*)’ 
```

此错误意味着您有一个 Python 对象，该对象`shedskin`已推断为 a `list`of `list`s of `int`s，但现在您尝试附加一些推断为 a `list`of `float`s 的内容。例如，您可以这样做：

```
a = [[1], [2]]
b = 1.0
a.append([b]) 
```

但是，从它上面的行来看，函数名称是`list_comp_3`. 除非您实际上命名了一个函数`list_comp_3`（您没有），否则这是一个列表推导。所以，你可能正在做这样的事情：

```
a = [1, 2, 3.0]
b = [[i] for i in a] 
```

你可能想知道为什么它让你侥幸逃脱`a`却失败了`b`。嗯，首先，如果你有几十个警告你还没有处理，它可能并没有真正让你侥幸逃脱。但其次，正如文档所述：

> 整数和浮点数通常可以混合使用，但最好尽可能避免这种情况，因为它可能会混淆 Shed Skin：
> 
> a = [1.0]
> 
> a = [1](http://code.google.com/p/shedskin/wiki/docs) # 错误 - 在这里也使用浮点数

至于警告，它们的含义可以是“这次你侥幸逃脱了，但不要指望总是这样做”到“出现与此相关的错误”到“这将编译，但少一些比原始的 Python 代码更高效而不是更多”到“这将编译，但出现不正确的地方”。

更一般地说，听起来你的程序不能由 shedskin 的推理引擎静态输入。如果没有真正看到您的代码，就不可能告诉您您做错了什么，但是如果您重新阅读[文档](http://code.google.com/p/shedskin/wiki/docs)的 Typing Restrictions 和 Python Subset Restrictions 部分，那应该会让您了解事物的种类和种类。合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T07:06:19.967

为避免混淆，请注意 'abartert' 提供的两个代码片段在单独编译时都能正常编译和运行（shedskin 0.9.3）。我的猜测也是，在解决动态输入警告后问题应该会消失。如果没有，我会非常有兴趣查看您尝试编译的程序，或者至少有足够的程序来重现问题。

更新：顺便说一句，从 0.9.1 左右开始，shedskin 应该更聪明地处理 int 和 float 混合。如果遇到会导致 c++ 代码损坏或效率低下的问题（由于必要的运行时转换），它现在通常应该抱怨“不兼容的类型”警告。所以也许是时候为 0.9.3 稍微更新这部分文档了。

# delphi - 从数据库启动应用程序

> ID：14206514
> 
> 赞同：5
> 
> 时间：2013-01-08T00:35:34.487
> 
> 标签：delphi

我有很多用户使用我的应用程序。但是，如果我在服务器上进行一些更新，并非所有人都愿意更新它（他们有时害怕他们不想习惯的更改）。

所以我推测，如何强制他们启动最新的应用程序。肯定有几种方法可以做到这一点，但我听说可以启动存储在数据库的 blob 字段中的应用程序。

有人知道如何实现吗？（我正在使用 MySQL 数据库）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T06:55:09.743

在不判断有意义或无意义的情况下......
你可以使用[uExecFromMem](https://sites.google.com/site/delphibasics/home/delphibasicssnippets/uexecfrommembysteve10120-fixedforwin7x64bytestest) ......
这个单元中有一个 Memoryleak 可以通过添加来修复：

```
 ResumeThread(PI.hThread);
  Result := PI.hThread;
  FreeMem(pFile);  // added here
end; 
```

使用 TBlobField 的示例调用将是

```
var
 ms:TMemoryStream;
begin
    ms:=TMemoryStream.Create;
    try
    TBlobField(YouDBBlobField).SaveToStream(ms);
    ms.Position := 0;
    ExecuteFromMem(Application.ExeName,'',ms.Memory); // pointing to an existing executable
    finally
      ms.Free;
    end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-12T08:04:23.600

我的建议是使用库。

你可以有一个小的主可执行文件（某种“启动器”），它除了启动外部`.dll`字段什么都不做。就像*内核*在运行时加载模块一样（想想 Windows 或 Linux 是如何工作的）。

然后下载更新版本的 a `.dll`，停止并卸载旧版本，然后加载并初始化新版本。

当然，你的代码必须是“干净的”，每个`.dll`.

但我怀疑它比`ExecuteFromMem()`. 在这方面，对我来说，良好的旧加载 +`.exe`文件执行（如*Remy*建议的那样）听起来是一个更好的选择。

# ssis - 在网络位置使用 SSIS 强制删除文件

> ID：14206516
> 
> 赞同：1
> 
> 时间：2013-01-08T00:35:51.383
> 
> 标签：ssis

我在使用 SSIS 删除网络位置上的文件时遇到问题，因为它是一个 zip 文件，包含每月 SQL 数据库备份文件，所以我需要在复制当前月份文件之前删除上个月的文件。

可能有一些应用程序正在使用这个文件，我不确定，但我想摆脱这个文件，以便我可以复制新文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:33:30.690

使用文件任务，您应该能够删除任何位置上的几乎任何内容，只要您有权这样做。

# algorithm - 如何超越包含在字节流中的放气字节序列？

> ID：14206518
> 
> 赞同：3
> 
> 时间：2013-01-08T00:36:12.880
> 
> 标签：algorithm, gzip, deflate, huffman-code

我有一个字节流，它是多个部分的串联，其中每个部分由一个标题和一个缩小的字节流组成。

我需要拆分此字节流部分，但标头仅包含有关未压缩形式的数据的信息，没有关于压缩数据长度的提示，因此我可以在流中正确推进并解析下一部分。

到目前为止，我发现超越压缩字节序列的唯一方法是根据[本规范](http://www.ietf.org/rfc/rfc1951.txt)对其进行解析。根据我阅读规范的理解，deflate 流由块组成，可以是压缩块或文字块。

文字块包含一个大小标头，可用于轻松超越它。

压缩块由“前缀码”组成，它们是对 deflate 算法具有特殊含义的可变长度的位序列。由于我只对找出放气的流长度感兴趣，我想我需要寻找的唯一代码是“0000000”，根据规范表示块结束。

所以我想出了这个coffeescript函数来解析deflate流（我正在研究node.js）

```
# The job of this function is to return the position
# after the deflate stream contained in 'buffer'. The
# deflated stream begins at 'pos'.
advanceDeflateStream = (buffer, pos) ->
  byteOffset = 0
  finalBlock = false
  while 1
    if byteOffset == 6
      firstTypeBit = 0b00000001 & buffer[pos]
      pos++
      secondTypeBit = 0b10000000 & buffer[pos]
      type = firstTypeBit | (secondTypeBit << 1)
    else
      if byteOffset == 7
        pos++
      type = buffer[pos] & (0b01100000 >>> byteOffset)
    if type == 0
      # Literal block
      # ignore the remaining bits and advance position
      byteOffset = 0
      pos++
      len = buffer.readUInt16LE(pos)
      pos += 2
      lenComplement = buffer.readUInt16LE(pos)
      if (len ^ ~lenComplement)
        throw new Error('Literal block lengh check fail')
      pos += (2 + len) # Advance past literal block
    else if type in [1, 2]
      # huffman block
      # we are only interested in finding the 'block end' marker
      # which is signaled by the bit string 0000000 (256)
      eob = false
      matchedZeros = 0
      while !eob
        byte = buffer[pos]
        for i in [byteOffset..7]
          # loop the remaining bits looking for 7 consecutive zeros
          if (byte ^ (0b10000000 >>> byteOffset)) >>> (7 - byteOffset)
            matchedZeros++
          else
            # reset counter
            matchedZeros = 0
          if matchedZeros == 7
            eob = true
            break
          byteOffset++
        if !eob
          byteOffset = 0
          pos++
    else
      throw new Error('Invalid deflate block')
    finalBlock = buffer[pos] & (0b10000000 >>> byteOffset)
    if finalBlock
      break
  return pos 
```

为了检查这是否有效，我编写了一个简单的 mocha 测试用例：

```
zlib = require 'zlib'

test 'sample deflate stream', (done) ->
  data = 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' # length 30   
  zlib.deflate data, (err, deflated) ->
    # deflated.length == 11
    advanceDeflateStream(deflated, 0).shoudl.eql(11)
    done() 
```

问题是这个测试失败了，我不知道如何调试它。我接受任何指向我在解析算法中遗漏的内容或包含任何语言的上述函数的正确版本的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:27:51.320

找到 deflate 流甚至是 deflate 块结尾的唯一方法是解码其中包含的所有 Huffman 代码。没有您可以搜索的位模式不能出现在流的早期。

# javascript - JS - 针对电话号码的正则表达式

> ID：14206521
> 
> 赞同：0
> 
> 时间：2013-01-08T00:36:28.527
> 
> 标签：javascript, regex

我正在对网页上的电话号码进行简单的清理，

在许多情况下，我会看到人性化的电话号码，例如**1-800** -CONTACTS。我当前的脚本删除了除数字之外的所有内容。

```
var theValueNumOnly = $.trim($(this).text()).replace(/[^0-9]/g,''); 
```

值变为：**1800**

有谁知道一个已经将字母转换为数字的简单片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:44:54.617

```
var toPhoneNumber = (function () {
    var dict = {
        a: 2, b: 2, c: 2,
        d: 3, e: 3, f: 3,
        g: 4, h: 4, i: 4,
        j: 5, k: 5, l: 5,
        m: 6, n: 6, o: 6,
        p: 7, q: 7, r: 7, s: 7,
        t: 8, u: 8, v: 8,
        w: 9, x: 9, y: 9, z: 9
    }

    return function (str) {
        return str.toLowerCase().replace(/[^\da-z]/g, '').replace(/([a-z])/g, function (v) {
            return dict[v];
        });
    }
}()); 
```

要使用它，只需将您的字符串传递给`toPhoneNumber`函数：

```
var phoneNumber = toPhoneNumber('1-800-CONTACTS'); 
```

这是小提琴：http: [//jsfiddle.net/ReGYp/1/](http://jsfiddle.net/ReGYp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:43:14.953

这是一篇关于他的主题[RegEx for Phone Number Numbers with Letters](https://stackoverflow.com/questions/5331721/regex-for-phone-number-numbers-with-letters)的帖子，它提供了一个 PHP 解决方案。您可以在正则表达式中通过映射转换为数字的 24 个字母中的每一个来执行此操作。在 PHP 或 python 或您最喜欢的语言中可能更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:48:33.807

直接方法（处理大小写）：

```
phone = "1-800-CONTACS"

phone = phone.replace(/[abc]/gi,  '2');
phone = phone.replace(/[def]/gi,  '3');
phone = phone.replace(/[ghi]/gi,  '4');
phone = phone.replace(/[jkl]/gi,  '5');
phone = phone.replace(/[mno]/gi,  '6');
phone = phone.replace(/[pqrs]/gi, '7');
phone = phone.replace(/[tuv]/gi,  '8');
phone = phone.replace(/[wxyz]/gi, '9');
phone = phone.replace(/[^0-9]/g,  ' ');

console.log(phone)
=> 1 800 2668227 
```

# android - 硬编码的 TextView 和需要的字符串？

> ID：14206522
> 
> 赞同：0
> 
> 时间：2013-01-08T00:36:31.840
> 
> 标签：android, eclipse

我对为什么我需要一个字符串而不是硬编码的 TextView 感到困惑。Eclipse 告诉我我需要使用一个字符串，但我不想在其中有多个字符串，`strings.xml`所以我不会感到困惑。我应该怎么做才能让这些错误消息消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:41:46.700

这不会影响编译时间，但要摆脱警告，请将其添加到您`View`的 s

```
 tools:ignore="HardcodedText" 
```

例如

```
<TextView
        android:id="@+id/large_textview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge"
        tools:ignore="HardcodedText" /> 
```

或者，您可以打开提供更多选项的 Lint 窗口，以及批量处理这些警告的方法。

去：

> 窗口 -> 显示视图 -> Android -> Lint 警告。

然后您将获得所有警告的列表，您可以相应地处理它们。

# javascript - JSON 查找返回未定义

> ID：14206524
> 
> 赞同：0
> 
> 时间：2013-01-08T00:36:45.713
> 
> 标签：javascript, json

这是我的问题。

```
console.log(data.selectedData.value);
>> {'id':'61', 'force':'true'} 
```

但是当我尝试进行查找时...

```
console.log(data.selectedData.value.force);
>> undefined

console.log(data.selectedData.value['force']);
>> undefined 
```

这里发生了什么？上面的查找是相当标准的（见这里：[http](http://www.w3schools.com/json/json_syntax.asp) ://www.w3schools.com/json/json_syntax.asp ）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T00:38:54.623

JSON 是一个*文本字符串*。如果要访问 JavaScript 对象的属性（由 JSON 字符串表示），则应解析 JSON：

```
var data = JSON.parse(data.selectedData.value);
console.log(data.force); 
```

**参考：**

*   [https://developer.mozilla.org/en-US/docs/JSON](https://developer.mozilla.org/en-US/docs/JSON)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:38:55.967

您确定 data.selectedData.value 是 JSON 对象而不是字符串吗？

如果它是一个字符串，你总是可以做 JSON.parse()

# google-maps - 无法通过for循环从数组中添加标记

> ID：14206529
> 
> 赞同：0
> 
> 时间：2013-01-08T00:37:11.877
> 
> 标签：google-maps, loops, google-maps-markers

```
var lats = ["56.1581702","56.1580875","56.1588094","56.1510389","56.15943499999999","56.1576479"];
var lons = ["13.767593300000044","13.752623399999948","13.764544","13.768728699999997","13.768018600000005","13.76731380000001"];
var i = 0;
var image = '/bilder/location.png';
for(lats.length > i) {
      var marker = new google.maps.Marker({
            map: map,
            position: new google.maps.LatLng(lats[i], lons[i]),
            icon: image
        });
 var i++;
} 
```

无法使此代码正常工作，仅显示空白地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:49:33.977

您的`for`循环表达式无效。尝试这个 ：

```
var lats = ["56.1581702","56.1580875","56.1588094","56.1510389","56.15943499999999","56.1576479"];
var lons = ["13.767593300000044","13.752623399999948","13.764544","13.768728699999997","13.768018600000005","13.76731380000001"];
var image = '/bilder/location.png';
for(var i = 0; i < lats.length; ++i) {
  var marker = new google.maps.Marker({
        map: map,
        position: new google.maps.LatLng(lats[i], lons[i]),
        icon: image
    });
} 
```

现代浏览器中可用的开发人员工具将帮助您调试代码中的语法错误。

# javascript - MobileSafari 不会发回使用 CORS 设置的 Cookie

> ID：14206531
> 
> 赞同：11
> 
> 时间：2013-01-08T00:37:43.343
> 
> 标签：javascript, ios, ajax, coffeescript, cors

我在 MobileSafari 中加载了一个页面，该页面通过 CORS 与另一台服务器通信。

在桌面浏览器（经过测试的 Chrome 和 Safari）中，我能够登录，获取会话 cookie，并将该会话 cookie 发送回以供后续请求，以便我可以通过所有 API 调用进行身份验证。

但是，当我通过 Mobile Safari 登录时，cookie 不会*在*后续请求中返回。

我正在使用 Charles Proxy 监视正在发生的事情，它告诉我：

1.  `POST https://myremoteserver.com/sessions.json`传递我的登录信息
2.  它成功并收到带有有效`Set-Cookie`标头的响应。
3.  `GET https://myremoteserver.com/checkout.json`被请求，没有`Cookie`请求头。
4.  服务器响应好像我没有登录一样。

我使用这个片段`Zepto.js`来确保`withCredentials: true`在 XHR 对象上正确设置。（请原谅咖啡脚本）

```
# Add withCredentials:true to the xhr object to send the remote server our cookies.
xhrFactory = $.ajaxSettings.xhr
$.ajaxSettings.xhr = ->
  xhr = xhrFactory.apply(this, arguments)
  xhr.withCredentials = yes
  xhr 
```

该片段在桌面浏览器中运行良好，在我添加它之前，我无法在那些桌面浏览器中保留会话 cookie。

MobileSafari 中是否有一些怪癖会阻止它像桌面浏览器一样工作？为什么它不能以同样的方式工作？

* * *

**编辑！**

这是我在 Rails 2.3 应用程序中设置的 CORS 标头，我相信这是相当标准的东西

```
def add_cors_headers
  if valid_cors_domain
    headers['Access-Control-Allow-Origin']      = request.headers['HTTP_ORIGIN']
    headers['Access-Control-Expose-Headers']    = 'ETag'
    headers['Access-Control-Allow-Methods']     = 'GET, POST, PATCH, PUT, DELETE, OPTIONS, HEAD'
    headers['Access-Control-Allow-Headers']     = '*,x-requested-with,Content-Type,If-Modified-Since,If-None-Match'
    headers['Access-Control-Allow-Credentials'] = 'true'
    headers['Access-Control-Max-Age']           = '86400'
  end
end 
```

今天，Mountain Lion 上的桌面 Safari 也开始不发送 cookie，表现得和 MobileSafari 一样。我不完全确定我昨天的评估是否不准确，或者 Apple 只是在欺骗我……

`https://`在远程 url 上使用也会受到影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T23:53:21.880

我不知道这个解决方案是否可行或您是否可以接受，但我在移动 Safari 和 JSONP 应用程序中遇到了同样的问题。似乎 Safari 并未设置为接受第三方 cookie。我去了设置> Safari>接受Cookie并设置“始终”，问题就消失了。祝你好运。

[我可以在 jsonp 请求的响应中设置 cookie 吗？](https://stackoverflow.com/questions/10757753/can-i-set-cookies-in-a-response-from-a-jsonp-request)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-04T03:31:22.280

我相信您正在体验我在我的应用程序中看到的内容。我的问题是因为 iOS Safari 带有一个默认`"Prevent Cross-Site Tracking"`启用的默认选项，导致浏览器阻止所有第三方 cookie，即使是由后端服务器从不同域发出的 cookie，并且 CORS 配置正确。

我发现这个问题的唯一解决方案是在生产中使用代理，就像我在开发中所做的那样。我在 Azure 中使用 Azure Functions 完成了这项工作，并使所有请求都通过代理。那时 iOS Safari 并没有阻止我的 cookie，一切都按预期设置。

[我在我的博客https://medium.com/@omikolaj1/complete-guide-to-deploying-angular-and-asp-net-33a0976d0ec1](https://medium.com/@omikolaj1/complete-guide-to-deploying-angular-and-asp-net-33a0976d0ec1)中写过它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T14:18:25.610

您没有提到远程服务器是在不同的域下还是只是在不同的子域下。我假设在不同的域下。

正如@schellsan 指出的那样，即使 CORS 政策允许，您也不能将 cookie 设置/写入到不同的域，因为 Safari 的第 3 方 cookie 限制。这是最新的野生动物园限制。我猜 Firefox 也将这样做。

我目前正在评估的解决方法：

*   在远程服务器上使用重定向，这样当客户端被重定向时（远程 URL 在浏览器栏中），您可以设置 cookie
*   使用自定义标题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T12:04:15.353

我遇到了同样的问题。

**我的设置是：**

*   服务器 A 上的 AngularJS (Ionic) 应用程序，域为 a.com
*   以 Passport JS 作为后端的 NodeJS，位于服务器 B 上，域为 b.com

除了 iOS 上的 Mobile Safari，使用 cookie 的登录在所有浏览器上都很顺利。此外，iOS 中移动 cookie（不跟踪）设置的更改对问题没有任何影响。

**解决方案是设置 CNAME DNS 记录**

`backend.a.com CNAME b.com`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-04T05:49:16.040

打开一个通过 iFrame 设置 cookie 的地址 - 这将设置 cookie。

# api - 我正在尝试查找如何使用 event_search 的响应

> ID：14206535
> 
> 赞同：0
> 
> 时间：2013-01-08T00:38:14.923
> 
> 标签：api, eventbrite

```
eb.event_search(options, function (response) {
  alert(response.size); 
```

这是我的主要观点。

嗯实际上我已经知道 event_search 有哪些字段。

但是..问题是我根本无法使用它。

链接在这里。

[http://developer.eventbrite.com/doc/events/event_search/#](http://developer.eventbrite.com/doc/events/event_search/#)

有很多领域，但无论我做什么。我不能用它。

比如alert(response.num_showing)；

```
 alert(response.total_items);

  alert(response.events.summary.num_showing);

  alert(response.events_summar_num_showing);

  alert(response.evnts_summary.num_showing); 
```

但我一无所获。

请让我知道如何使用它们。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:11:16.193

我想`console.log(response);`看看你有什么。

您还应该能够使用 event_search API 文档页面上的“立即尝试”按钮来预览对象结构。

# filepicker.io - 文件选择器列表显示结果

> ID：14206541
> 
> 赞同：0
> 
> 时间：2013-01-08T00:38:40.903
> 
> 标签：filepicker.io

我可以在我的网站上添加一个 filepicker.io，但我希望在上传文件时有某种结果显示。目前，我只会弹出一个关于 filepicker API 文件夹中位置的声明。

有没有办法在包含文件选择器的网站上列出上传结果？比如上传了什么以及它的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:40:07.487

通过检查 FPFile 对象，您可以获取有关上传文件的信息，例如文件名、mimetype 和大小。您还可以使用 filepicker.stat() 调用来检索相同的信息和更多信息。

# menu - javafx 菜单栏菜单项

> ID：14206543
> 
> 赞同：0
> 
> 时间：2013-01-08T00:38:54.297
> 
> 标签：menu, javafx, menuitem, menubar

> **可能重复：**
> [JavaFX 2.0 像 MenuItem 一样激活菜单](https://stackoverflow.com/questions/10315774/javafx-2-0-activating-a-menu-like-a-menuitem)

我想要一个 JavaFX`MenuItem`直接在 JavaFX 中`MenuBar` *，而不是被迫*添加 a`Menu`然后 a `MenuItem`。

更准确地说，我想要一个菜单​​：

```
File   View     About
exit   view1
... 
```

点击“关于”直接进入关于窗口。

现在看来我只能制作一个`MenuBar`，然后添加一个`Menu`“About”并在下面添加一个`MenuItem`“About”，如下所示：

```
File   View     About
exit   view1    about
... 
```

如何解决 JavaFX 的这个限制`MenuBar`？

# javascript - 在到达正确的路线之前，主干路线在路线之间循环

> ID：14206546
> 
> 赞同：0
> 
> 时间：2013-01-08T00:39:08.500
> 
> 标签：javascript, jquery, backbone.js, views, router

~~这两种处理路由的方法有什么区别？~~

 ~~```
var Router = Backbone.Router.extend({
    routes: {'home': 'showHome}, 
    showHome: function() {//do whatever} 
}); 
```~~ 

和

```
var Router = Backbone.Router.extend({
    routes: {'home': 'showHome}, 
    initialize: function() { 
        var router = new Router(); 
        router.on('route:showHome', function(){//do something});
    }
}); 
```

~~目前我有第二种方式。它工作正常，我到了正确的地方..~~

我的路由器现在设置正确（我认为），但我的路由仍然很奇怪（如下所示）。

我遇到的唯一问题是，当它要更改路线时，地址栏会在多条不同路线之间闪烁，然后才能到达正确的页面（总是到达正确的位置）。

我正在更改`window.location = '#/route';`在我的视图中使用 jQuery 侦听器的页面。

```
$('#right_arrow').live('click', {view: that}, this.rightArrow);
...
rightArrow: function(e){
    var that = e.data.view;
    if(typeof window.easyUserData.fbResponse.authResponse === 'undefined') {
        // Not logged in
        window.location = '#/login';
    } else {
        // Logged in
        window.location = '#/notes/right';
    }
    return false;
} 
```

我一直在尝试调试，当我在以下位置设置断点时发现了什么`window.location = '#/notes/right';`：

1.  url 正确更改（'#/notes/right'）
2.  返回 false 执行
3.  右箭头函数结束，调试器进入 jquery 代码
4.  在调试器（仍然在 jquery 代码中）五六步“跳过”之后，url 更改为“#/news/right”，这是我使用的另一条路线，但不知道为什么会出现在这里
5.  再“跳过”几次后，我们回到原始断点，其中 url 更改为正确的 '#/notes/right'
6.  新视图加载

为什么会这样？这与我的路由器设置方式有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:41:46.263

您的代码正在初始化函数中实例化一个新路由器，该函数是在实例化该特定对象开始时调用的。所以本质上，你正在创建一个不必要的路由器。

第一个示例中的代码是正确的。然后，您只需执行以下操作：

```
var myRouter = new Router(); 
```

# android - 有没有办法根据模型类生成数据库处理程序？

> ID：14206551
> 
> 赞同：1
> 
> 时间：2013-01-08T00:39:29.237
> 
> 标签：android, generator

我有一个模型类，我们称之为“历史”：

```
public class History {

    int _id;
    String _file_name;
    String _full_path;
    String _file_type;

    public History(){
    }

    public History(int id, String _name, String _full_path, String _file_type){
        this._id = id;
        this._file_name = _name;
        this._full_path = _full_path;

 this._file_type = _file_type;

}
public int get_id() {
    return _id;
}
public void set_id(int _id) {
    this._id = _id;
}
public String get_file_name() {
    return _file_name;
}
public void set_file_name(String _file_name) {
    this._file_name = _file_name;
}
public String get_full_path() {
    return _full_path;
}
public void set_full_path(String _full_path) {
    this._full_path = _full_path;
}
public String get_file_type() {
    return _file_type;
}
public void set_file_type(String _file_type) {
    this._file_type = _file_type;
}

} 
```

我想为我的所有模型自动生成一个类似于此的数据库处理程序：

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_NAME = "file_explorer";

    private static final String TABLE_HISTORY = "history";

    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PH_NO = "phone_number";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_HISTORY + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_HISTORY);
        onCreate(db);
    }
} 
```

（这不是我模型的处理程序，但你明白了）

这是可能的还是我必须为每个模型手动创建一个数据库处理程序？

我检查了 Eclipse 的自动生成选项，但没有找到我需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:46:42.890

看看这个 SO 问题：[Any good ORM tools for Android development？](https://stackoverflow.com/questions/371538/any-good-orm-tools-for-android-development)

虽然我可能会选择[ORMLite for Android](http://ormlite.com/sqlite_java_android_orm.shtml)。使用示例在网站上。

# ruby-on-rails - watch 表达式没有从 ng-change 中获取模型更改

> ID：14206553
> 
> 赞同：0
> 
> 时间：2013-01-08T00:39:33.263
> 
> 标签：ruby-on-rails, coffeescript, angularjs, haml

我有以下 Rails HAML：

```
 = select_tag "some-class",
                        options_for_select([['None', '']], ''),
                        { class: 'some-other-class',
                          'ng-model' => 'someModel',
                          'ng-options' => 'option.name for option in someList',
                          'ng-change' => 'updateSelected()'} 
```

角度控制器：

```
 scope.updateSelected = ->
       #logic for updating model lives here. Model updates successfully by using some values defined within scope. Includes the following:
       scope.someModel = "some_new_value" 
```

角度指令：

```
 SomeClassDirective= ->
       restrict: 'C'

       link: (scope, element, attrs) ->

            monitorFormFields = (newValue, oldValue) ->
                   console.log "this is the inner function call"
                   #logic for setting the inner _destroy field lives here

            scope.$watch 'someModel', monitorFormFields 
```

However, when the Select List value is changed, 'this is the inner function call' never prints.(it does print when the directive first initializes, ie at page load). 因此，我的问题是：为什么 $watch 表达式没有触发，我如何让它触发？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T18:57:39.570

使用此 HTML：

```
<select class="some-class" ng-model="someModel" 
   ng-options="option.name for option in someList"></select> 
```

这是一个将监视更改的指令`someModel`：

```
myApp.directive('someClass', function () {
  return {
    restrict: 'C',
    link: function (scope, element, attrs) {
      var monitorFormFields = function (newValue, oldValue) {
        console.log("this is in the inner function call");
      }
      scope.$watch('someModel', monitorFormFields);
    }
  }
}); 
```

控制器：

```
$scope.someList = [{ name: 'name1' }, { name: 'name2' }]; 
```

请注意，您不需要调用控制器方法来更新`someModel`——Angular 会自动为我们执行此操作，因为该`ng-model`属性。因此，该指令只需要 $watch 以查看对该 $scope 属性的更改。

[小提琴](http://jsfiddle.net/mrajcok/6Apuj/)。

* * *

> 我想从元素中获取名称中带有 [_destroy] 的同级元素，并根据选择框的值将其设置为“0”或“1”。

更 Angular 的方法是让模型属性控制是否显示“0”或“1”。例如，在您的控制器中：

```
$scope.destroy1 = "0";
$scope.destroy2 = "0"; 
```

在您的 HTML 中：

```
<div>{{destroy1}}</div>
<div>{{destroy2}}</div> 
```

在 monitorFormFields() 中，您可以更改这些范围属性的值，并且视图将自动更新——无需“查找”兄弟姐妹或更新 .val()ues。

# mysql - 一页上有两个准备好的语句 - 第一个有效，第二个失败

> ID：14206554
> 
> 赞同：0
> 
> 时间：2013-01-08T00:39:38.420
> 
> 标签：mysql, prepared-statement, mdb2

我将 MDB2 用于准备好的语句。我使用 PEAR MDB2 站点中基于名称的示例作为指南，这就是我目前所拥有的：

```
 $q = '
            UPDATE 
                abc_news 
            SET 
                newstitle       = :newstitle,  
                categoryid      = :categoryid,  
                facilityid      = :facilityid,  
                user_id_mod     = :user_id_mod,  
                user_id_add     = :user_id_add,  
                display         = :display,  
                locked          = :locked,  
                datemodified    = NOW()
            WHERE 
                newsid          = :newsid
        ';

        $types = array(
            'text', 
            'integer',
            'integer',
            'integer',
            'integer',
            'integer',
            'integer',
            'integer',
        );

        $res = $mdb2_dbx->prepare($q, $types,MDB2_PREPARE_MANIP);

        $data = array(
            'newstitle'     => $n_newstitle, 
            'categoryid'    => $n_categoryid, 
            'facilityid'    => $n_facilityid, 
            'display'       => 1, 
            'locked'        => 1, 
            'user_id_add'   => $n_user_id_add, 
            'user_id_mod'   => $n_user_id_mod, 
            'newsid'        => $newsid, 
        );
        $affected_rows = $statment->execute($data);
        if (PEAR::isError($res))
            die('error');
        $statement->free();

        $q = '
            UPDATE 
                abc_news_text 
            SET 
                newstext        = :newstext  
            WHERE 
                newsid          = :newsid
        ';

        $types = array(
            'text', 
            'integer',
        );

        $statment = $mdb2_dbx->prepare($q, $types,MDB2_PREPARE_MANIP);

        $data = array(
            'newstext'      => $n_newstext, 
            'newsid'        => $newsid, 
        );
        $affected_rows = $statment->execute($data);
        if (PEAR::isError($res))
            die('error');                   

        $statement->free(); 
```

第一个查询有效 - 一个自动递增的 $newsid 打印到屏幕上（它随着每次新提交而增加）。

直接在下面，我收到此错误：

```
Fatal error: Call to undefined method MDB2_Error::execute() in news.php on line 160 
```

第 160 行是第二`$affected_rows = $statment->execute($data);`行。

我正在释放语句，两个准备好的语句的语法似乎相同。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:44:17.637

那是因为您得到的是 MDB2_ERROR 对象而不是语句对象。您`prepare()`显然没有工作，并且您根本没有检查是否成功`prepare()`来了解这一点。

另外，我不确定您的第一个是如何工作的，因为您将`prepare`结果设置为`$res`variable 而不是`$statment`. 我还注意到您的变量名称`$statment`没有`e`（不确定这是否是一个错字）。

# linux - 如何将字节发送到 USB 到并口以控制 LED？

> ID：14206556
> 
> 赞同：2
> 
> 时间：2013-01-07T11:54:06.360
> 
> 标签：linux, c

我有一根 USB 转 25 针并行端口电缆。我将它连接到笔记本电脑并在 /dev/usb/lp0 处获得一个端口，如果我将并行端口的 pin1/pin25 与 +/- LED 连接，它就会亮起。

现在我将 LED 的 +pin 移动到并行端口的 pin 2，并尝试将字节发送到端口，它应该会亮起，但不会。

我使用`outb(0xff,port)`port 所在的命令`0x378`。我在这里想念什么？

这是我的完整程序：

```
#include<stdlib.h>
#include<stdio.h>
#include<sys/io.h>
void main(void){
    int port=0x378;
    outb(0xff,port);
    outb(0x01,port+2);
    sleep(1);
    outb(0x00,port+2);
    printf("‌​End");
} 
```

我也检查过`port=0x3bc`但没有用。我什至通过连接 LED 的 + 来检查频闪引脚 1，它总是亮着但不会变低。端口地址有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:48:49.827

端口`0x378`是旧 ISA 并行端口所在的 I/O 位置。USB 连接的并行端口不会出现在那里。它不能。我真的不太了解如何与 OHCI/UHCI/EHCI/xHCI 通信的底层细节，但我知道你所做的一切都必须通过 USB 主机控制器。因此，在最低级别上，您需要查询 USB 总线，找到设备的 VID，打开与它的某种通信，设置通信模式，然后一次发送/接收一个字节。

尝试将数据直接写入`/dev/usb/lp0`，看看会发生什么。您可能需要先更改 ECP 模式，可能需要一些特殊`ioctl`的 . 您可能需要深入研究此驱动程序的源代码才能真正了解要做什么。

做不到这一点，看看你是否可以为你的笔记本电脑安装一个底座。如果您的笔记本电脑恰好是商务级笔记本电脑，我注意到可用的扩展坞通常具有旧端口，并且它们可以在您尝试在此处使用它们时工作。

# embedded - avrdude xmega256a3 无法编程用户签名？

> ID：14206561
> 
> 赞同：0
> 
> 时间：2013-01-08T00:40:24.063
> 
> 标签：embedded, avr, avrdude

我在 osx 上使用 avrdude 为 xmega256a3 进行开发。太棒了，它让我可以很好地闪现我的目标。但是，当我尝试使用它来编写程序`usersig`块时，它并不能很好地工作。我最初对它的一些早期成功感到兴奋，但发现随后的闪光不起作用。

通过测试，我确定如果我的 userig 文件全为 0，它工作正常。但是所有的FF都不起作用。鉴于我对 Flash 知之甚少，这些让我相信我要么错过了一个选项，要么 avrdude 没有完成它需要在这里做的事情。

我正在使用的命令是

```
avrdude -p atxmega256a3 -P usb -c avrispmkii -e -U usersig:w:mySig.hex 
```

在 Windows 机器上使用 AVR Studio 4，我可以将这些文件中的任何一个编程到 usersig 闪存块。

我的问题归结为这可能吗？如果是这样，我错过了什么选项/咒语？还是我用avrdude为这个处理器编程用户签名不走运？

（我使用的是 CrossPack 的 5.11.1 版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:31:28.407

事实证明，旧版本的 avrdude 确实不支持这一点。它需要用户签名的页面擦除，直到版本 6 才支持该功能，该版本即将发布。我已经用它的 svn 版本进行了测试，并且今天提交了一个两行补丁，它完成了这项工作。

# mongodb - 使用 MongoDB 在一次搜索中查找多个项目

> ID：14206562
> 
> 赞同：0
> 
> 时间：2013-01-08T00:40:41.410
> 
> 标签：mongodb

我有一个用户集合和一个房间集合，房间集合存储对房间中用户的用户 ID 的引用。

```
users = [
   {_id:1, name: 'name 1', type: 1},
   {_id:2, name: 'name 2', type: 1},
   {_id:3, name: 'name 3', type: 1},
   {_id:4, name: 'name 4', type: 1} 
];

room = {
  name: 'example room', 
  connected_users: [
    {user_id: '2', admin: false},
    {user_id: '3', admin: true}
  ]
}; 
```

有没有办法在用户集合中搜索像这样或类似的连接用户的详细信息？

```
db.users.find({_id: [2,3]}); 
```

那返回

```
[{_id:2, name: 'name 2', type: 1}, {_id:3, name: 'name 3', type: 1}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:48:11.293

这就是[`$in`](http://docs.mongodb.org/manual/reference/operators/#_S_in)运营商的用途：

```
db.users.find({_id: {$in: [2,3]}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:49:27.407

```
db.Users.find({_id: {$in: [2,3]}}).toArray(); 
```

# javascript - ng-include 似乎没有请求包含指定模板

> ID：14206563
> 
> 赞同：0
> 
> 时间：2013-01-08T00:40:45.527
> 
> 标签：javascript, ruby-on-rails, angularjs

我有一个 AngularJS 应用程序，我正在尝试使用 Rails rest api。我已经到了所有 javascript 似乎都没有错误地加载的地步，但是当我使用 ng-include 时，某些模板似乎没有被正确包含。这是一个例子：

```
<div ng-include="'<%= asset_path('header.tpl.html') %>'"></div> 
```

加载此部分时，我从未看到任何尝试在浏览器控制台中加载指定模板。关于为什么没有请求模板的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:15:19.843

你有冲突的单引号。

如果您需要动态更改 ng-include 中的内容，请尝试以编程方式设置该值，然后将该变量传递给 ng-include。

```
<div ng-include="templatePath"></div>

<script>$scope.templatePath = "header.tpl.html";</script> 
```

稍后在代码中，您可以将 $scope.templatePath 的值更改为您需要的任何其他文件。

# java - Spring MVC，配置的两个实例而不是一个

> ID：14206564
> 
> 赞同：3
> 
> 时间：2013-01-08T00:40:54.113
> 
> 标签：java, spring, web-applications, spring-mvc

我开始学习 Spring MVC。我正在尝试摆脱所有 Spring XML 配置。这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
  <!-- Configure ContextLoaderListener to use AnnotationConfigWebApplicationContext
       instead of the default XmlWebApplicationContext -->
  <context-param>
      <param-name>contextClass</param-name>
      <param-value>
          org.springframework.web.context.support.AnnotationConfigWebApplicationContext
      </param-value>
  </context-param>

  <!-- Configuration locations must consist of one or more comma- or space-delimited
       fully-qualified @Configuration classes. Fully-qualified packages may also be
       specified for component-scanning -->
  <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>pl.mbrnwsk.sklep.config.AppConfiguration</param-value>
  </context-param>

  <!-- Bootstrap the root application context as usual using ContextLoaderListener -->
  <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <!-- Declare a Spring MVC DispatcherServlet as usual -->
  <servlet>
      <servlet-name>dispatcher</servlet-name>
      <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
      <!-- Configure DispatcherServlet to use AnnotationConfigWebApplicationContext
           instead of the default XmlWebApplicationContext -->
      <init-param>
          <param-name>contextClass</param-name>
          <param-value>
              org.springframework.web.context.support.AnnotationConfigWebApplicationContext
          </param-value>
      </init-param>
      <!-- Again, config locations must consist of one or more comma- or space-delimited
           and fully-qualified @Configuration classes -->
      <init-param>
          <param-name>contextConfigLocation</param-name>
          <param-value>pl.mbrnwsk.sklep.config.AppConfiguration</param-value>
      </init-param>
  </servlet>

  <!-- map all requests for / to the dispatcher servlet -->
  <servlet-mapping>
      <servlet-name>dispatcher</servlet-name>
      <url-pattern>/</url-pattern>
  </servlet-mapping>
</web-app> 
```

应用配置.java：

```
@Configuration
@EnableTransactionManagement
@ComponentScan("pl.mbrnwsk.sklep")
public class AppConfiguration {

    public String hbm2ddl_auto = "update";

    public AppConfiguration(){
        System.out.println("AppConfiguration");
    }

    @Bean
    public ViewResolver viewResolver(){
        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
        viewResolver.setPrefix("/");
        viewResolver.setSuffix(".jsp");
        return viewResolver;
    }

    @Bean
    public DataSource dataSource() {
        DriverManagerDataSource ds = new DriverManagerDataSource();
        ds.setDriverClassName("org.hsqldb.jdbcDriver");
        ds.setUrl("jdbc:hsqldb:file:/SklepDB/");
        ds.setUsername("SA");
        ds.setPassword("");
        return ds;
    }

    @Bean
    public SessionFactory sessionFactory() {
        LocalSessionFactoryBuilder ss = new LocalSessionFactoryBuilder(dataSource());
        ss.scanPackages("pl.mbrnwsk.sklep.model");
        ss.setProperty("hibernate.show_sql", "true");
        ss.setProperty("hibernate.hbm2ddl.auto", hbm2ddl_auto);
        ss.setProperty("hibernate.dialect",
                "org.hibernate.dialect.HSQLDialect");
        return ss.buildSessionFactory();
    }

    @Bean
    public PlatformTransactionManager txManager(){
        return new HibernateTransactionManager(sessionFactory());   
    }
} 
```

AppConfiguration 的实例被创建了两次：一次是我启动 Tomcat 时，两次是我输入一些应该由调度程序处理的 url。这不是期望的行为。我想在 Tomcat 启动时创建 AppConfiguration。如何做到这一点？第二个问题，听众做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T03:52:31.470

这里的问题是您对 servlet 和根上下文使用相同的配置。这就是为什么你有两个配置实例。在 Spring MVC 中，您有 2 个上下文，即 servlet 上下文和根上下文。servlet 上下文用于您的控制器，而根上下文用于您的业务对象和服务。

如果您不想使用 XML，请创建两个配置类。像这样的东西：

**根上下文**：

```
@Configuration
@EnableTransactionManagement
@ComponentScan("pl.mbrnwsk.sklep")
public class AppConfiguration {

    public String hbm2ddl_auto = "update";

    public AppConfiguration(){
        System.out.println("AppConfiguration");
    }

    @Bean
    public DataSource dataSource() {
        DriverManagerDataSource ds = new DriverManagerDataSource();
        ds.setDriverClassName("org.hsqldb.jdbcDriver");
        ds.setUrl("jdbc:hsqldb:file:/SklepDB/");
        ds.setUsername("SA");
        ds.setPassword("");
        return ds;
    }

    @Bean
    public SessionFactory sessionFactory() {
        LocalSessionFactoryBuilder ss = new LocalSessionFactoryBuilder(dataSource());
        ss.scanPackages("pl.mbrnwsk.sklep.model");
        ss.setProperty("hibernate.show_sql", "true");
        ss.setProperty("hibernate.hbm2ddl.auto", hbm2ddl_auto);
        ss.setProperty("hibernate.dialect",
                "org.hibernate.dialect.HSQLDialect");
        return ss.buildSessionFactory();
    }

    @Bean
    public PlatformTransactionManager txManager(){
        return new HibernateTransactionManager(sessionFactory());   
    }
} 
```

**小服务程序上下文**：

```
@Configuration
@ComponentScan("pl.mbrnwsk.sklep.controller")
public class ServletConfiguration {

    public AppConfiguration(){
        System.out.println("ServletConfiguration");
    }

    @Bean
    public ViewResolver viewResolver(){
        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
        viewResolver.setPrefix("/");
        viewResolver.setSuffix(".jsp");
        return viewResolver;
    }
} 
```

**网页.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
        version="3.0">
      <!-- Configure ContextLoaderListener to use AnnotationConfigWebApplicationContext
           instead of the default XmlWebApplicationContext -->
      <context-param>
          <param-name>contextClass</param-name>
          <param-value>
              org.springframework.web.context.support.AnnotationConfigWebApplicationContext
          </param-value>
      </context-param>

      <!-- Configuration locations must consist of one or more comma- or space-delimited
           fully-qualified @Configuration classes. Fully-qualified packages may also be
           specified for component-scanning -->
      <context-param>
          <param-name>contextConfigLocation</param-name>
          <param-value>pl.mbrnwsk.sklep.config.AppConfiguration</param-value>
      </context-param>

      <!-- Bootstrap the root application context as usual using ContextLoaderListener -->
      <listener>
          <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
      </listener>

      <!-- Declare a Spring MVC DispatcherServlet as usual -->
      <servlet>
          <servlet-name>dispatcher</servlet-name>
          <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
          <!-- Configure DispatcherServlet to use AnnotationConfigWebApplicationContext
               instead of the default XmlWebApplicationContext -->
          <init-param>
              <param-name>contextClass</param-name>
              <param-value>
                  org.springframework.web.context.support.AnnotationConfigWebApplicationContext
              </param-value>
          </init-param>
          <!-- Again, config locations must consist of one or more comma- or space-delimited
               and fully-qualified @Configuration classes -->
          <init-param>
              <param-name>contextConfigLocation</param-name>
              <param-value>pl.mbrnwsk.sklep.config.ServletConfiguration</param-value>
          </init-param>
      </servlet>

      <!-- map all requests for / to the dispatcher servlet -->
      <servlet-mapping>
          <servlet-name>dispatcher</servlet-name>
          <url-pattern>/</url-pattern>
      </servlet-mapping>
</web-app> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T17:42:25.700

我发现通过将我的@Configuration 类包含为 ContextConfigLocation 而不是通过组件扫描来识别它们，我避免了内存泄漏，其中将创建重复的 ListableBeanFactories 并锁定 Hibernate SessionFactory。

# tsql - SQL Report Builder 3.0 多值参数

> ID：14206569
> 
> 赞同：1
> 
> 时间：2013-01-08T00:41:41.740
> 
> 标签：tsql, reporting-services, ssrs-2008, reportbuilder3.0

我有一份报告需要在文本字段参数中接受数字范围和逗号分隔值。该参数用于“帐户类型”，他们希望能够输入“1,2,5-9”，这将采用整数值 1,2,5,6,7,8,9。我知道如何使用单个值来执行此操作，但从不使用范围。

我将用于单个值的示例代码是：

```
 SELECT
      arcu.vwARCUAccount.AccountType
      ,arcu.vwARCUAccount.ACCOUNTNUMBER
    FROM
      arcu.vwARCUAccount
    WHERE
      arcu.vwARCUAccount.AccountType = @AccountType 
```

任何信息都会非常有帮助。我团队中的某个人已经估计了它，并说它可以在没有意识到他们想要一个范围的情况下完成，所以现在我被困住了。我敢打赌这里的每个人都在我的位置上，所以我提前感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:43:31.427

你想做几件事。

A. 设置一个数据类型为“整数”的参数，并确保选中“允许多个值”复选框。将其值设置为“整数”。暂时打好。

这实际上设置了一个数据集的数组可用列表，您为该类型的数据类型定义可以传递多个数据集。

B. 创建一个名为“values”的简单数据集，如下所示

```
 declare @Ints table ( id int);

    insert into @Ints values (1),(2),(5),(6),(7),(8),(9) 
```

C. 回到第一步中的变量并打开它的属性。在侧窗格中选择“可用值”。选择单选按钮“从查询中获取值”。将您的数据集列为“值”，将您的值和标签列为“id”。

您现在已将参数数组绑定到您指定的值。然而，用户不必只选择其中一项或全部，而是选择其中一项或多项。

D. 你需要设置你的主数据集（我假设你在来这里之前已经这样做了）。出于我的示例的目的，我将制作一个简单的示例。我创建了一个名为 person 的数据集：

```
 declare @Table Table ( personID int identity, person varchar(8));

    insert into @Table values ('Brett'),('Brett'),('Brett'),('John'),('John'),('Peter');

    Select *
    from @Table
    where PersonID in (@Ints) 
```

重要的部分是谓词显示：

'PersonID in (@Ints)'

这告诉数据集，它依赖于用户在此数组参数中选择一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:04:33.350

我对 tsql 并不完全精通，但是使用 reg 表达式呢？

请参阅[LIKE (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms179859%28v=sql.100%29.aspx)

如：

```
arcu.vwARCUAccount.AccountType like '[' + replace(@AccountType, ',','') + ']' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:33:50.807

这可以工作。作为一个粗略的刷子尝试：

1.  从 tsql 中删除帐户类型的过滤器。

2.  创建一个输入数字的 vb 函数，这是帐户类型，并测试它是否在用户提供的参数字符串中并输出 1 或 0。[vb 函数](http://msdn.microsoft.com/en-us/library/ms156028.aspx)

```
 Function test(byval myin as integer, byval mylimits as string) as integer
    'results as 1 or 0

      dim mysplit as string()= Split(mylimits, ",")
      dim mysplit2 as string(1)

      'look through all separated by a ","
      For Each s As String In mysplit 

        'does there exists a range, i.e. "-"? 
        if s like "%-%" then
          mysplit2 = split(s, "-")

          'is the value between this range?
          if myin >= mysplit(0) andalso myin <= mysplit(1) then 
            return 1
          end if

        'is the value equal to the number?
        elseif s = myin then
          return 1

        end if
      Next s

      return 0

    End 
```

3\. 使用 vb 函数在数据集上创建一个过滤器，账户类型作为输入等于 1。

```
 =code.test(Fields!AccountType.Value, Paramaters!MyPar.Value) 
```

# java - 如何使用 WebDriver 选择文本字段中的所有内容

> ID：14206572
> 
> 赞同：0
> 
> 时间：2013-01-08T00:41:55.310
> 
> 标签：java, testing, selenium-webdriver, qa

我正在测试一个网页，该网页在原因字段中有一个计数器，而在原因字段中有一个先前的原因。如果我这样做`field.clear();`，计数器不会重置。所以我正在尝试执行以下操作：

```
 int reasonPriorCount = reason.getText().length();
    reason.click();
    reason.sendKeys(Keys.chord(Keys.SHIFT, Keys.ARROW_RIGHT.equals(reasonPriorCount), Keys.DELETE)); 
```

其中`reasonPriorCount`是字段中字符数的长度。由于计数器仅响应`Change`或`KeyPress`我试图发送等于`reasonPriorCount`.

但是`Keys.chord`正在抱怨`reasonPriorCount`右箭头键按下中的论点。有没有办法做我需要做的事情？我会以正确的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:50:11.640

好的，这就是我为完成这项工作所做的工作：

```
int reasonPriorCount = reason.getText().length();
int i = 0;
reason.click();
while(i < reasonPriorCount)
{
  reason.sendKeys(Keys.chord(Keys.SHIFT, Keys.ARROW_RIGHT));
  i++;
}
reason.sendKeys(Keys.chord(Keys.BACK_SPACE)); 
```

# ios - Xcode 在两个文件中正确导入 RestKit.h，但不能在同一个包中的另一个文件中导入

> ID：14206573
> 
> 赞同：0
> 
> 时间：2013-01-08T00:41:55.827
> 
> 标签：ios, xcode, restkit, xcode4.5

我无法理解这里发生的事情。我有一个使用 Restkit 框架库的项目。该项目是使用 Pods 设置的，以安装框架并生成工作区文件。

我有三个使用 RestKit.h 的类，其中两个（我的应用程序委托和我的 ViewController）正确导入，而一个新文件（一个新的 ViewController）在导入语句中显示红色错误`RestKit/RestKit.h file not found`。然后当我尝试使用 RestKit 时，我没有从 xcode 获得代码完成。但是，在插入 RestKit 代码后，项目可以正确构建和运行。

此外，如果我在 xcode 中右键单击 RestKit 方法时单击下拉菜单上的“跳转到定义”，它会将我带到 RestKit 源代码，这意味着 Xcode 实际上确实知道 RestKit 库。

Xcode 版本是 4.5.2

任何关于在哪里看的建议将不胜感激。

谢谢

# ios - 我的 viewController 没有正确显示

> ID：14206575
> 
> 赞同：2
> 
> 时间：2013-01-08T00:42:03.150
> 
> 标签：ios, ipad, cocoa-touch, uiviewcontroller, uimodalpresentationstyle

在我的 iPad 应用程序中，我试图以模态表单样式呈现我的一个观点。这是一些代码：

```
-(void)present
{
    SecondViewController *modal = [[SecondViewController alloc]init];
    modal.modalPresentationStyle = UIModalPresentationStyleFormSheet;
    [self presentModalViewController:modal animated:YES];
} 
```

我正在使用 Storyboard，并且在我想显示的视图中放置了诸如 textView 和工具栏之类的东西。我已经在 Identity Inspector 中设置了正确的类，并且在类文件中我检查了它是否是正确的视图`NSLog(@"Right view");`

当调用虚空存在时，一个视图正在出现，但只是一个深白色的正方形。我的 Storyboard 中没有任何内容，我什至尝试更改视图和 textView 的背景颜色，以查看是否有东西在广场外，但整个东西都保持白色。感觉好像它没有使用我在情节提要中创建的视图，但是我已将其设置为正确的类，并且在调用它时会打印出 NSLog。我没有在 Storyboard 中以任何方式连接这两个视图，SecondViewController 只是浮动，所以这可能是问题吗？调用的按钮`-(void)present`是以编程方式创建的，所以我也不能按 ctrl+将它拖到按钮上。

为什么它显示我的班级的空版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T00:48:07.740

在“Identity Inspector”中为您的 ViewController 设置一个“Storyboard ID”，然后像这样呈现它：

```
-(void)present
{
    SecondViewController *modal = [self.storyboard instantiateViewControllerWithIdentifier:@"myStoryboardID"];
    modal.modalPresentationStyle = UIModalPresentationStyleFormSheet;
    [self presentModalViewController:modal animated:YES];
} 
```

如果您使用的是 iOS6，则不`presentModalViewController:animated:`推荐使用，因此请使用以下命令：

```
 -(void)present
    {
        SecondViewController *modal = [self.storyboard instantiateViewControllerWithIdentifier:@"myStoryboardID"];
        modal.modalPresentationStyle = UIModalPresentationStyleFormSheet;
        [self presentViewController:modal animated:YES completion:nil];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:49:57.437

您的问题是您假设程序本质上知道在哪里可以找到该控制器的已布局视图，而这根本不是故事板的工作方式。您列出的代码将创建一个*视图控制器*，但如果没有关联的*视图*，它只会显示为黑色方块。

有几种方法可以解决您的困境：

*   在视图控制器中添加模态转换作为 segue，这将是最简单的方法，也是 iOS 故事板期望您执行的操作。
*   将视图从情节提要移动到外部`.xib`并调用`initWithNibName:bundle:`方法将其加载为视图控制器的视图。如果您只想以编程方式加载视图，这是最好的解决方案。
*   使用该方法以编程方式从情节提要中加载视图`instantiateViewControllerWithIdentifier:`，这可能是一个坏主意，因为它违背情节提要的设计。

如果你愿意，我可以详细说明。

# ruby-on-rails - ActiveRecord::Base 背后的理论/基本原理

> ID：14206580
> 
> 赞同：1
> 
> 时间：2013-01-08T00:42:18.713
> 
> 标签：ruby-on-rails, theory, rails-activerecord, framework-design

Rails 的初学者在这里。

你能帮我理解一下我看到的大多数代码示例的最顶端部分背后的理论吗？“ActiveRecord::Base”、“Application Controller”和“ActionController::Base”部分？

1.  你怎么称呼这三个？它们都是对象吗？上课？

2.  我知道'class X < ActiveRecord::Base' 是在模型中创建一个对象，而'class ApplicationController < ActionController::Base' 是在控制器中创建一个对象......所以有没有类似的东西来创建一个对象在视图中，只是为了对 MVC 的所有三个组件进行四舍五入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:58:46.583

补充已经说过的话，因为它都是准确的。

> 我知道'class X < ActiveRecord::Base' 是在模型中创建一个对象，而'class ApplicationController < ActionController::Base' 是在控制器中创建一个对象......所以有没有类似的东西来创建一个对象在视图中，只是为了对 MVC 的所有三个组件进行四舍五入？

这是正确的道路，但存在一些语义差异。

`class User < ActiveRecord::Base`仅创建 ActiveRecord::Base 的子类。在您执行类似的操作之前，您`User.create()`是否获得了该类的实例，它有时可能被称为对象。

子类是具有父类的特殊词。在 ruby​​ 中，您可能还记得类是 Object 类的所有子类，这非常令人困惑。

此外，不应将 ActiveRecord::Base 子类化为在模型中创建对象。相反，将您的子类视为对模型的描述（通常是您希望存储的一些数据）。 **每个子类本身就是一个模型。**这都是语义，但它可能有助于您的理解。

控制器也是如此。您不是在控制器中创建对象，而是在创建控制器的全新描述。在实例化之前，该描述并不是真正具体的，当您或用户从应用程序请求页面时，rails 会自动发生这种情况。

最后，确实有一个类来完善这三者，称为 ActionView::Base。`render`Rails 通过调用你的控制器自动创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:58:47.023

`ActiveRecord::Base`,`ApplicationController`并且`ActionController::Base`都是类。您需要创建一个实例来获取对象，但您永远不会这样做。相反，您将扩展它们以创建新的子类，然后创建这些子类的实例。

我相信视图有一个基类，但在正常使用下你永远不应该看到它。通常，您将创建视图**模板**而不是视图**类**，因此您不会在框架的那个部分处理 Ruby 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:04:44.180

ActiveRecord::Base ,ActionController::Base 是基于 MVC 的类。但是，您可以在不扩展这些类的情况下创建模型或控制器，那么它们将不具有这些类提供的功能。

但是，在视图中，通常没有人在视图中创建对象或模型。这可以确保增加代码的可读性和可维护性。它将显示更干净的代码。此外，在 index.rb 这样的特定视图中，它实际上与控制器相连，您可以通过控制器获取您在控制器中初始化的对象实例，并使用它在视图中显示您的数据。

# c# - VS 2012 中缺少实体数据模型

> ID：14206581
> 
> 赞同：3
> 
> 时间：2013-01-08T00:42:32.130
> 
> 标签：c#, visual-studio, entity-framework, visual-studio-2012

添加新项目时，我在“数据”选项卡下找不到实体数据模型。

我查看了几个问题和答案，有关此的信息，但没有一个解决方案有效。

我已经修复、卸载并重新安装，手动安装了 EF Tools 包并尝试卸载所有 VS 相关程序。我还尝试在不同的 .NET 框架下创建几个新项目、类库、Web 项目，但它不存在。

主项目：Visual Studio 2012，类库项目.NET 4.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T06:44:14.683

我使用此链接更新了 Visual Studio 2012：http: [//www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)。此次更新后，“实体数据模型”选项被添加到数据选项卡中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T02:13:29.830

VS 2012 中的新实体数据模型默认使用 T4 模板 (.tt) 文件，而不是以前用于代码生成的自定义工具。生成的上下文也基于较新的 DbContext API，而不是 Visual Studio 2010 使用的 ObjectContext API（这就是它没有该方法的原因 - DbContext API 中的等效方法是`Set<T>`）。T4 和 DbContext API 目前都是推荐使用 EF 的方法。

我当前的机器上没有 VS 2012，但您可以尝试删除 .tt 并打开老一代，如中所述`.Desinger.cs.`

**编辑：**您可以尝试重新安装 VS2012 和/或修复它。那应该可以解决这个问题。另外，看看你的VS2012的发布版本。

另一个建议的重新安装解决方案以及发生这种情况的原因 -[无法将实体数据模型添加到 Visual Studio 项目](http://blogs.msdn.com/b/vsnetsetup/archive/2012/09/21/unable-to-add-entity-data-model-to-a-visual-studio-project.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T21:12:07.647

从这里接受的答案解决了我的问题：

[http://www.datazx.cn/Fv7p5a/xw-US/oaax2pu/2q7xs6/d8x6rssc-b4mt-fsix-bc6c-ct8mf8d6fsbc23rsdfd.html](http://www.datazx.cn/Fv7p5a/xw-US/oaax2pu/2q7xs6/d8x6rssc-b4mt-fsix-bc6c-ct8mf8d6fsbc23rsdfd.html)

> 我终于弄明白了。我从 C:\ProgramData\Package Cache\ 子文件夹运行 EFTools.msi，它只允许我“卸载”或“修复”。我尝试修复，但我遇到了同样的问题，所以我做了“卸载”，然后再次运行它并允许“安装”。安装后，我现在可以添加实体数据模型。

此外，forums.asp.net 上“Visual Studio 2012 Express for Web 中缺少实体框架模板”威胁中接受的答案建议通过“开始 -> 控制面板 -> 程序和功能修复 Visual Studio 2012 enu 的实体框架设计器” ' 可能也可以（我只能发布两个具有我当前 1 点 StackOverflow 声誉的链接，所以我不会提供确切的来源）。

另一种可能的解决方案：

> 我的问题是：Visual Studio 安装在 Drive D:\ 上，而实体框架安装程序将包放在 c:...\VisualStudio 10.0\Common7....\ItemTemplates 文件夹中。--> 将 AdoNetEntityDataModelCSharp.zip 复制到驱动器 d: 并运行 devenv /installvstemplates。这为我解决了问题。编辑：还必须从 IDE 文件夹、PrivateAssemblies 和 PublicAssemblies 复制各种 DLL。然后运行 ​​devenv /ResetSkipPkgs

[http://social.msdn.microsoft.com/Forums/en-US/c059069b-eae4-48b4-a06e-ffd5f186077b/adonet-data-entity-model-template-missing-in-vs-2010-ultimate?forum= adodotnetity框架](http://social.msdn.microsoft.com/Forums/en-US/c059069b-eae4-48b4-a06e-ffd5f186077b/adonet-data-entity-model-template-missing-in-vs-2010-ultimate?forum=adodotnetentityframework)

我还在非默认路径（不同的磁盘分区）中安装了 VS，因此它确实可能是问题的潜在原因之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-20T09:23:47.613

您可以右键单击设计器表面并选择模型浏览器；这是在解决方案资源管理器中激活模型浏览器的唯一方法。模型浏览器包含在安装期间的 VS 2012 推荐设置中。

# css - 一种将内容自动流入列的方法？

> ID：14206583
> 
> 赞同：0
> 
> 时间：2013-01-08T00:42:33.313
> 
> 标签：css, multiple-columns

我正在寻找一种在检测到高度不足以容纳元素时自动将内容流入下一列的方法。

我知道这可以在带有列的 CSS3 中完成，但遗憾的是 IE 用户将无法使用它。

还有另一种我通过CSS失踪的方式吗？

对于伪代码：

我有 400px 高度的容器，其中包含列表元素，并且列表元素的高度不是固定的，因为某些列表的内容比其他列表多。当列表元素总高度超过 400px 时，它就会被隐藏。相反，我希望它流到下一列并再次从上到下继续......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:42:42.450

您可以使用 polyfill 来支持 IE 并仍然使用 CSS3 列。

这是一个[巨大的 HTML5 polyfill 列表，](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills) CSS3 [- 多列布局 polyfill](http://www.csscripting.com/css-multi-column/)应该可以解决您的问题。

# scala - 将 Compagnons 与 Play2 一起使用时在 Scala 中进行集成测试？-> 蛋糕图案？

> ID：14206585
> 
> 赞同：0
> 
> 时间：2013-01-08T00:42:50.963
> 
> 标签：scala, activerecord, playframework-2.0, cake-pattern

我正在开发我的第一个 Scala 应用程序，我们使用 ActiveRecord 样式从 MongoDB 检索数据。

我有像 User 和 Category 这样的模型，它们都有一个使用该特征的伴随对象：

```
class MongoModel[T <: IdentifiableModel with CaseClass] extends ModelCompanion[T, ObjectId] 
```

ModelCompanion 是一个 Salat 类，它提供了常见的 MongoDB crud 操作。这允许像这样检索数据：

```
User.profile(userId) 
```

* * *

我从来没有使用过这种 ActiveRecord 查询样式。但我知道 Rails 的人正在使用它。我想我在 Play 文档（1.2 版？）上看到了它来处理 JPA。

现在它工作正常，但我希望能够在我的 MongoDB 上运行集成测试。我可以运行带有库的“嵌入式”MongoDB。最重要的是我的主机/端口配置实际上是在`MongoModel`类上硬编码的，该类由所有模型伙伴扩展。

我希望能够在运行集成测试（或我将来可以创建的任何其他“配置文件”）时指定不同的主机/端口。

* * *

我非常了解依赖注入，在 Java 中使用 Spring 多年，以及我的应用程序中所有这些静态内容的缺点。我看到现在有一​​种对 Scala 友好的方式来配置 Spring 应用程序，但我不确定在 Scala 中使用 Spring 是否合适。

我已经阅读了一些关于 Cake 模式的东西，它似乎可以做我想做的事，是某种类型安全的、经过编译时检查的 spring 上下文。我一定要使用 Cake 模式，还是 Scala 中还有其他优雅的替代方案？我可以继续使用 ActiveRecord 样式，还是它是可测试性的完全反模式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:23:23.010

没有任何静态引用 - 使用 Cake 模式，您为 2 个命名空间/环境获得了 2 个不同的类，每个类都独立地覆盖“主机/端口”资源。创建一个包含您的资源的特征，继承它 2 次（通过提供有关主机/端口的实际信息，具体取决于环境）并添加到适当的伴随对象（用于生产和测试）。在内部`MongoModel`添加作为您的新特征的自我类型，并重构所有主机/端口引用`MongoModel`，以使用该自我类型（您的新特征）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:33:15.143

我肯定会选择蛋糕图案。

您可以阅读以下文章，其中展示了如何在 Play2 应用程序中使用蛋糕模式的示例：http: [//julien.richard-foy.fr/blog/2011/11/26/dependency-injection-in-scala- with-play-2-it-s-free/](http://julien.richard-foy.fr/blog/2011/11/26/dependency-injection-in-scala-with-play-2-it-s-free/)

# grails - Backbone 和 Handlebars 的服务器端国际化

> ID：14206586
> 
> 赞同：7
> 
> 时间：2013-01-08T00:42:55.390
> 
> 标签：grails, backbone.js, internationalization, handlebars.js

我正在开发一个 Grails / Backbone / Handlebars 应用程序，它是一个更大的遗留 Java 系统的前端，其中（出于历史和可定制性的原因）国际化消息深入隐藏在几个 SOAP 服务后面的数据库中，这些服务反过来隐藏在各种内部 Java 库后面。从 Grails 层获取这些消息很容易并且工作正常。

不过，我想知道的是如何将（例如）国际化标签放入我的 Handlebars 模板中。

现在，我正在使用 GSP 片段来生成模板，包括获取我感兴趣的消息的自定义标签，例如：

```
<li><myTags:message msgKey="title"/> {{title}}</li> 
```

但是，出于性能和代码布局的原因，我想摆脱 GSP 模板并将它们直接转换为 HTML。我已经研究了一些客户端国际化选项，例如[i18n.js](https://github.com/fnando/i18n-js)，但它们似乎取决于我没有得到的消息文件的存在。（我可能会生成它，但它会非常庞大​​且昂贵。）

到目前为止，我能想到的最好的事情是将标签也楔入 Backbone 模型中，所以我最终会得到类似的东西

```
<li>{{titleLabel}} {{title}}</li> 
```

然而，这确实偏离了在干净的 RESTful JSON API 之上构建 Backbone 模型的理想——要么由 RESTful 服务返回的 JSON 被表示数据（即本地化标签）混杂在一起，要么我必须做一些额外的工作来将标签注入到 Backbone 模型中——并且用演示数据混淆 Backbone 模型似乎也是错误的。

我认为，就干净的数据和干净的 API 而言，我想做的是编写另一个 RESTful 服务，该服务采用消息键和类似列表，并返回包含所有本地化消息的 JSON 数据结构。然而，问题仍然存在：

1.  指示（可能在模板中）给定视图需要哪些消息键的最佳方法是什么？
2.  数据的正确格式是什么？
3.  如何将本地化消息放入 Backbone 视图？
4.  是否有任何现有的 Javascript 库可以提供帮助，或者我应该开始制作东西吗？
5.  有没有更好/更标准的替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T02:52:20.540

我认为您可以通过结合 Handelbars 助手和一些正则表达式来创建一个非常优雅的解决方案。

以下是我的建议：

1.  创建一个接收消息键的 JSON 数组并返回 JSON 对象的服务，其中键是消息键，值是本地化文本。
2.  定义一个 Handlebars 助手，它接收消息键（与服务器上的消息键匹配）并输出翻译后的文本。类似的东西`{{localize "messageKey"}}`。使用此助手进行所有模板本地化。
3.  编写一个模板预处理器，它从模板中提取消息键并请求您的服务。预处理器缓存它获得的所有消息键，并且只请求它还没有的那些。
    *   您可以在需要渲染模板时按需调用此预处理器，也可以预先调用它并缓存消息键，以便在您需要它们时准备好它们。
    *   为了进一步优化，您可以将缓存持久化到浏览器本地存储中。

[这是一个小概念证明](http://jsfiddle.net/A3UzG/)。它还没有本地存储持久性或支持一次获取多个模板的文本以进行缓存，但它很容易组合在一起，我认为通过进一步的工作它可以很好地工作。

客户端 API 可能如下所示：

```
var localizer = new HandlebarsLocalizer();

//compile a template
var html = $("#tmpl").html();
localizer.compile(html).done(function(template) { 
  //..template is now localized and ready to use 
}); 
```

这是懒惰的读者的来源：

```
var HandlebarsLocalizer = function() {

  var _templateCache = {};
  var _localizationCache = {};

  //fetches texts, adds them to cache, resolves deferred with template
  var _fetch = function(keys, template, deferred) {
    $.ajax({
      type:'POST',
      dataType:'json',
      url: '/echo/json',
      data: JSON.stringify({
        keys: keys 
      }),
      success: function(response) {
        //handle response here, this is just dummy
        _.each(keys, function(key) { _localizationCache[key] = "(" + key + ") localized by server";  });
        console.log(_localizationCache);
        deferred.resolve(template);
      },
      error: function() {
        deferred.reject();
      }
    });
  };

  //precompiles html into a Handlebars template function and fetches all required
  //localization keys. Returns a promise of template.
  this.compile = function(html) {

    var cacheObject = _templateCache[html],
        deferred = new $.Deferred();

    //cached -> return
    if(cacheObject && cacheObject.ready) { 
      deferred.resolve(cacheObject.template);
      return deferred.promise();
    }
    //grep all localization keys from template
    var regex = /{{\s*?localize\s*['"](.*)['"]\s*?}}/g, required = [], match;
    while((match = regex.exec(html))) {
      var key = match[1];
      //if we don't have this key yet, we need to fetch it
      if(!_localizationCache[key]) {
        required.push(key);
      }
    }

    //not cached -> create
    if(!cacheObject) {
      cacheObject = {
        template:Handlebars.compile(html),
        ready: (required.length === 0)
      };   
      _templateCache[html] = cacheObject;
    }

    //we have all the localization texts ->
    if(cacheObject.ready) {
      deferred.resolve(cacheObject.template);
    } 
    //we need some more texts ->
    else {
      deferred.done(function() { cacheObject.ready = true; });
      _fetch(required, cacheObject.template, deferred);    
    }

    return deferred.promise();
  };

  //translates given key
  this.localize = function(key) {
    return _localizationCache[key] || "TRANSLATION MISSING:"+key;
  };

  //make localize function available to templates
  Handlebars.registerHelper('localize', this.localize);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T16:19:46.037

我们在 Backbone/Handlebars 应用程序中使用[http://i18next.com进行国际化。](http://i18next.com)（还有 Require.js，它也通过插件加载和编译模板。）

i18next 可以配置为动态加载资源。它支持 gettext 格式的 JSON（支持复数和上下文变体）。他们页面中有关如何加载远程资源的示例：

```
var option = { 
  resGetPath: 'resources.json?lng=__lng__&ns=__ns__',
  dynamicLoad: true 
};

i18n.init(option); 
```

（您当然需要更多配置，例如设置语言、备用语言等）

然后，您可以配置一个 Handlebars 助手，在提供的变量上调用 i18next（最简单的版本，没有复数，没有上下文）：

```
// namespace: "translation" (default)
Handlebars.registerHelper('_', function (i18n_key) {
    i18n_key = Handlebars.compile(i18n_key)(this);
    var result = i18n.t(i18n_key);
    if (!result) {
        console.log("ERROR : Handlebars-Helpers : no translation result for " + i18n_key);
    }
    return new Handlebars.SafeString(result);
}); 
```

在您的模板中，您可以提供一个扩展为键的动态变量：

```
<li>{{_ titleLabeli18nKey}} {{title}}</li> 
```

或直接指定密钥：

```
<li>{{_ "page.fancy.title"}} {{title}}</li> 
```

对于日期时间的本地化，我们使用[http://momentjs.com](http://momentjs.com)（转换为本地时间、格式、翻译等）。

# css - 当顶部有图像时，CSS背景悬停动画不起作用

> ID：14206589
> 
> 赞同：0
> 
> 时间：2013-01-08T00:43:11.410
> 
> 标签：css, background, hover, opacity

当我需要将一个 div 设置为 60% 的不透明度并在悬停时将其动画设置为 90% 的不透明度时，问题就开始了。

唯一的问题是我需要一个全白（非透明）PNG图像在这个盒子的顶部。

所以我尝试了覆盖包含图像的单独 div 并使用边距将其放置到位的技巧；但是当您的鼠标位于图像顶部时，背景 div 动画悬停不起作用。

HTML

```
<div style="position:relative;top:-1px;left:0">
<div class="ontop"><img src="http://www.designdownloader.com/item/pngs/button01_google/button01_google-20110813210436-00005.png" alt="OneSpring - Play Video" /></div>
                <div id="box-video">

            </div>            
            </div>
</div> 
```

CSS

```
#box-video {
    position: absolute;
    background-color:rgba(0,57,129,1);
    top: 0;
    left: 0;
    padding: 15px;
    font-family: 'Helvetica Neue Light', Arial, Helvetica, sans-serif;
    width: 210px;
    height: 130px;
    opacity: 0.6;
    filter: alpha(opacity=60);
     -webkit-transition: opacity .25s ease-in-out;
     -moz-transition: opacity .25s ease-in-out;
     -ms-transition: opacity .25s ease-in-out;
     -o-transition: opacity .25s ease-in-out;
     transition: opacity .25s ease-in-out;
}
#box-video:hover, .ontop:hover {
    cursor: pointer;
    /*color: #ffffff;*/
    text-decoration: none;
    opacity: 0.9;
    filter: alpha(opacity=90);
    zoom: 1;
    -webkit-transition: opacity .25s ease-in-out;
    -moz-transition: opacity .25s ease-in-out;
    -ms-transition: opacity .25s ease-in-out;
    -o-transition: opacity .25s ease-in-out;
    transition: opacity .25s ease-in-out;
}

div.ontop {
    position: relative;
    top: 4.7em;
    left:30px;
    z-index:1002;
} 
```

**这是一个显示问题的 JSFiddle：**

[http://jsfiddle.net/xpancom/fZrWA/](http://jsfiddle.net/xpancom/fZrWA/)

即使您在图像顶部，如何使背景悬停工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:12:36.167

您也可以使用 :before 或 :after 伪类。

它会清理你的代码很多。

这就是您的 HTML 的样子：

```
<div style="position:relative;top:-1px;left:0">
  <div id="box-video"></div>
</div> 
```

这里有[更多关于它们](http://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/)的信息，这里是小提琴：http: [//jsfiddle.net/jyHMf/](http://jsfiddle.net/jyHMf/)

看看那是不是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T01:26:32.107

我认为您在谈论 CSS`pointer-events`属性。[指针事件 | MDN](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)

因此，您的代码可能如下所示：

```
div.ontop {
  position: relative;
  top: 4.7em;
  left:30px;
  z-index:1002;
  pointer-events: none;
} 
```

[http://jsfiddle.net/8CZEY/](http://jsfiddle.net/8CZEY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:01:41.923

在容器上放一个 id：

```
<div id="box" style="position:relative;top:-1px;left:0"> 
```

现在将`hover`事件放在容器上，并让它影响子元素：

```
#box:hover {
  cursor: pointer;
}

#box:hover #box-video {
  opacity: 0.9;
  filter: alpha(opacity=90);
  zoom: 1;
  -webkit-transition: opacity .25s ease-in-out;
  -moz-transition: opacity .25s ease-in-out;
  -ms-transition: opacity .25s ease-in-out;
  -o-transition: opacity .25s ease-in-out;
  transition: opacity .25s ease-in-out;
} 
```

演示：http: [//jsfiddle.net/fZrWA/2/](http://jsfiddle.net/fZrWA/2/)

# ios - iOS 流式传输背景音频

> ID：14206590
> 
> 赞同：0
> 
> 时间：2013-01-08T00:43:12.737
> 
> 标签：ios, stream, streaming, avaudioplayer

以下是刚刚找到的用于使音频流式传输的代码：

```
 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:stringURL]];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    connectionPlay = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    NSError *playerError;
    player = [[AVAudioPlayer alloc] initWithData:streamData error:&playerError];
    player.numberOfLoops = 0;
    player.volume = 1.0f;
    [player prepareToPlay];

    if (playerError) {
        NSLog(@"audio player error: %@", [playerError localizedDescription]);
    }
    if (player == nil)
        NSLog(@"%@", [playerError description]);
    else
        [player play]; 
```

当我尝试将应用程序置于后台模式时，我会抓住播放。我已经进入 .plist 并进入了必需的背景模式，第 0 项，App 播放音频。这并没有解决我的问题。

我开始放置这个：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback
                                       error:nil];
[[AVAudioSession sharedInstance] setActive:YES
                                     error:nil];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

代替

```
- (void)applicationWillResignActive:(UIApplication *)application

- (void)applicationDidEnterBackground:(UIApplication *)application 
```

和

在主 ViewController 中的 viewDidLoad 内部。以及 [player prepareToPlay] 之后。

我不确定问题是我没有设置正确的背景设置还是应用程序切断了连接。基本上，我不确定我错过了什么。

我一直在看：

[http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioSession_ClassReference/Reference/Reference.html)

和

[https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/Introduction/Introduction.html)

编辑：有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:34:49.417

我不知道它是什么，但我只是将所有代码转移到一个新项目中，添加了这段代码

```
 - (void)applicationWillResignActive:(UIApplication *)application
{

    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback
                                           error:nil];
    [[AVAudioSession sharedInstance] setActive:YES
                                         error:nil];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
} 
```

和 plist 设置，它似乎在手机上工作，但不是模拟器..

# c# - 表值可选参数

> ID：14206591
> 
> 赞同：29
> 
> 时间：2013-01-08T00:43:12.800
> 
> 标签：c#, sql-server

是否可以使用表值参数作为可选参数来创建过程。

我尝试了以下代码：

```
CREATE PROCEDURE SP
@Table testteype = null READONLY
AS 
.... 
```

但我得到这个错误：

```
Operand type clash: void type is incompatible with test type 
```

ps：我在 C#.Net 中使用 sql server

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-09-20T22:03:18.673

表值参数始终具有空表的隐式值。因此，您实际上可以在没有任何参数的情况下调用该过程，它会执行但表将为空。

因此，用默认值标记表值参数并没有什么意义。删除“=null”，检查表格内容，你应该很高兴。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T02:04:53.713

基本上，具有默认值“= null”是没有意义的，并且是错误的原因。

默认情况下，`@Table testteype`获取空表的值。因此，您可以删除 = null：

```
CREATE PROCEDURE SP
@Table testteype  READONLY
AS 
.... 
```

**参考：**有关如何将其与 C# ADO.NET 一起使用的示例，我建议使用这篇文章 -[使用 SQL Server 的表值参数](https://www.brentozar.com/archive/2014/02/using-sql-servers-table-valued-parameters/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-15T12:20:55.597

```
--exa:
--create TYPE  Table_tt   as table(id int,name  varchar(10))

create table #a  (aid int,price int)
insert into #a (aid  ,price  )
select 1,10
union
select 2,50

create PROCEDURE SP
@Table_tt Table_tt  null READONLY     
AS 
 begin 
 select * into #tem from @Table_tt
 select * from #a where aid in(select id from #tem)  or aid='' 
 end

 exec SP 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-10T17:38:28.433

不知道为什么上面的答案表明默认值 = NULL 是不正确的，但这对我有用。

```
CREATE PROCEDURE SP
(
    @Param1 VARCHAR(10),
    @Param2 VARCHAR(10)=NULL
)

SELECT......
WHERE @Param1 = SOMETHING
AND (@Param2 = SOMETHING OR @Param2 IS NULL) 
```

# powershell - 无法在二进制模块中创建 Powershell 别名

> ID：14206595
> 
> 赞同：2
> 
> 时间：2013-01-08T00:43:33.877
> 
> 标签：powershell

我想从我创建的二进制模块中导出一个别名。对于脚本模块，您将使用 `Export-ModuleMember`. 二进制模块是否有等价物？

我的清单 (.psd1) 看起来像这样：

```
@{
    ModuleToProcess = 'MyModule.psm1'
    NestedModules = 'MyModule.dll'
    ModuleVersion = '1.0'
    GUID = 'bb0ae680-5c5f-414c-961a-dce366144546'
    Author = 'Me'
    CompanyName = 'ACME'
    Copyright = '© ACME'
} 
```

**编辑**：[基思希尔](https://stackoverflow.com/users/153982/keith-hill)提供了一些帮助，但仍然无济于事。这是所有涉及的文件

我的模块脚本（.psm1）：

```
export-modulemember -function Get-TestCommand -alias gtc 
```

最后，我的 DLL 中的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Management.Automation;
using System.Text;
using System.Threading.Tasks;

namespace MyModule
{
    [Cmdlet(VerbsCommon.Get, "TestCommand")]
    [OutputType(typeof(string))]
    public class GetTestCommand : PSCmdlet
    {
        protected override void ProcessRecord()
        {
            WriteObject("One");
            WriteObject("Two");
            WriteObject("Three");
        }
    }
} 
```

如果我有这个并启动 PowerShell，然后`import-module MyModule`最后运行`get-module`，我得到这个：

```
ModuleType Name                      ExportedCommands
---------- ----                      ----------------
Script     MyModule                  {} 
```

如果我注释掉`export-modulemember`psm1 文件中的位并重复上述步骤，我会得到：

```
ModuleType Name                      ExportedCommands
---------- ----                      ----------------
Script     MyModule                  Get-TestCommand 
```

那么，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T16:08:42.623

执行此操作的典型方法是将 .PSM1 作为 ModuleToProcess 并将 Set-Alias / Export-ModuleMember -Alias * 放入该 PSM1 文件中。然后将您的 DLL 引用放入 PSD1 的 NestedModules 成员中，例如：

```
@{
    ModuleToProcess = 'MyModule.psm1'
    NestedModules   = 'MyModule.dll'
    ModuleVersion = '1.0'
    GUID = 'bb0ae680-5c5f-414c-961a-dce366144546'
    Author = 'Me'
    CompanyName = 'ACME'
    Copyright = '© ACME'
    FormatsToProcess = 'MyModule.format.ps1xml'
    AliasesToExport = '*'
    CmdletsToExport = @(
        'Get-Foo',
        'Set-Foo',
        ...
    )
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T04:18:55.110

好的，我现在可以正常工作了。事实证明，我犯了一些错误，所有这些都导致了这个问题。

*   问题 1：我对 PowerShell 的了解几乎没有我想的那么好！
*   问题 2：我混淆了函数和 Cmdlet。我需要指定`Export-ModuleMember -Cmdlet Get-TestCommand`，而不是`Export-ModuleMember -Function Get-TestCommand`. 这解释了为什么每次我取消注释该`Export-ModuleMember`行时我的 ExportedCommand 都会消失。Keith Hill 到 PSCE 文件的链接帮助我发现了这一点。

    ```
    Functionality in a DLL = -Cmdlet
    Functionality in .psm1 = -Function 
    ```

*   问题 3：如果您没有定义任何别名，它对导出别名没有帮助。您需要先设置别名`Set-Alias`，然后使用`Export-Module`. 这是我的一个愚蠢的错误

所以，最后，将我的 .psm1 文件更改为如下所示的文件解决了问题

```
Set-Alias gtc Get-TestCommand
Export-ModuleMember -Alias * -Function * -Cmdlet * 
```

我将把答案归功于基思。正是因为他的努力，我才能做到这一点

# matlab - 如何向量化两个矩阵之间的距离？

> ID：14206596
> 
> 赞同：0
> 
> 时间：2013-01-08T00:43:55.733
> 
> 标签：matlab, bsxfun

我正在构建一个 K-最近邻分类器，我想一次完成所有距离计算（这也会有所帮助，因为未矢量化的版本需要很长时间才能运行）。

我有一个大小为 28000 个示例 x 784 个特征的测试数据集，我有一个大小为 42000 个示例 x 784 个特征的训练数据集。回答我的问题的代码应该生成一个大小为 28000 x 42000 的矩阵，其中每一行都包含从该测试示例到每个 42000 个训练示例的距离。

我想出的最好方法是使用 sum 和 bsxfun 一次计算每个测试示例的所有距离，但我仍然需要遍历所有 28000 个示例，而且正如我之前所说，这需要一段时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:46:37.057

`pdist2(A, B)`将准确地完成您的需求，您的训练和测试数据集分别在哪里`A`和在哪里。`B`这是参考： http: [//www.mathworks.com/help/stats/pdist2.html](http://www.mathworks.com/help/stats/pdist2.html)

# c++ - 是否可以在 C++ 中将函数作为参数传递？

> ID：14206600
> 
> 赞同：0
> 
> 时间：2013-01-08T00:44:47.620
> 
> 标签：c++, function, parameters

有没有办法在 C++ 中将函数作为参数传递，就像在 C[中函数可以作为参数传递的方式一样？](https://stackoverflow.com/questions/9410/how-do-you-pass-a-function-as-a-parameter-in-c)我知道可以使用函数指针在 C 中将函数作为参数传递，我想知道在 C++ 中是否可以这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T00:52:32.423

你可以像在 C 中那样做。但你也可以用 C++ 的方式来做（准确地说是 C++11）：

```
// This function takes a function as an argument, which has no
// arguments and returns void.
void foo(std::function<void()> func)
{
    // Call the function.
    func();
} 
```

您可以将普通函数传递给 foo()

```
void myFunc();
// ...
foo(myFunc); 
```

但你也可以传递一个 lambda 表达式。例如：

```
foo([](){ /* code here */ }); 
```

您还可以传递函数对象（重载`()`运算符的对象）。通常，您可以传递可以使用`()`运算符调用的任何内容。

如果您改为使用 C 方式，那么您唯一可以传递的就是普通函数指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T00:55:52.920

在 C++ 中可以像在 C 中一样将函数作为参数传递，但有一些区别：我们可以使用函数*引用*而不是指针、模板类型以及可变参数模板参数。例如：

### 函数参考：

在 C 中，我们没有通过引用传递对象的能力。然而，这在 C++ 中是可能的：

```
void f( void (&)() ) {}

f( h ); 
```

引用和指针之间的区别是微妙的，但很重要。例如，我们不能将`NULL`或 0 传递给期望引用的函数；参数必须立即满足其类型。在大多数情况下，引用通常优于指针。

### 模板：

模板允许我们一般地将具有可变类型属性的函数作为参数传递：

```
template <class T, class U>
void f( T (&)( U ) ) {} 
```

上面的签名接受具有任何返回类型或参数列表的函数（唯一的挫折是该函数必须接受一个参数）。

除了这个特性，我们还可以利用*可变*参数模板来允许具有可变长度参数列表的函数：

```
template <class T, class ...U>
void f( T (&)( U... ) ) {}

int h(int, int) { .. }
bool g(std::string) { .. }

f( h );
f( g ); 
```

如果我们使用，`f`也可以使用完美转发`U&&`：

```
template <class T, class ...U>
void f( T (&fun)( U&&...) ) {

    // ...
    fun( std::forward<U>(u)... );

} 
```

还有一些 lambdas 通常与`std::function<T(U)>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:47:26.493

是的，函数指针在 C++ 中的工作方式与在 C 中的工作方式完全相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T00:59:20.440

是的，像这样：

```
#include <stdio.h>

typedef void (*my_func)(int);

void do_something (my_func f) 
{   
   f (10); 
}

void square (int j) 
{   
   printf ("squared: %d\n", j * j); 
}

void cube (int j) 
{   
    printf ("cubed: %d\n", j * j * j); 
}

int main (int argc, char *argv[]) 
{   
   do_something (square);   
   do_something (cube); 
} 
```

输出是：

```
squared: 100
cubed: 1000 
```

typedef 是为了使 do_something() 的语法更具可读性。

我想指出的是，由于您已经在使用 C++，因此使用虚函数实现同样的功能要简单得多。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-08T00:47:31.567

是的，有可能。

我找到了一个工作示例程序（可以在线测试和编辑，并很好地说明了这个概念）：http: [//ideone.com/6kSTrp#view_edit_box](http://ideone.com/6kSTrp#view_edit_box)

```
//this was taken from http://www.cprogramming.com/tutorial/function-pointers.html
#include <stdio.h>
void my_int_func(int x)
{
    printf( "%d\n", x );
}

int main()
{
    void (*foo)(int); //pointer to an int function
    foo = &my_int_func;

    /* call my_int_func (note that you do not need to write (*foo)(2) ) */
    foo( 2 );
    /* but if you want to, you may */
    (*foo)( 2 );

    return 0;
} 
```

# android - 为特定屏幕尺寸提供布局资源

> ID：14206603
> 
> 赞同：1
> 
> 时间：2013-01-08T00:45:20.860
> 
> 标签：android, android-layout, android-xml

在我的 Eclipse 项目中，我目前有以下文件夹：

*   布局土地
*   大地布局
*   布局-sw600dp-土地
*   布局-xhdpi-land

（我也有其他人，但现在的问题仅适用于横向布局。）

我的布局非常具体：当我在 Eclipse 的图形布局中更改屏幕大小时，它会发生很大变化。

根据我从 Android 文档和 AVD 设置中了解到的信息，正常屏幕从 3.6 英寸到 4.9 英寸。大的从 5.0" 到 7.4"。小尺寸最大为 3.5 英寸。

我转到 layout-land 文件夹中的 xml 布局文件。选择的屏幕尺寸已经是 4.0"，这很好，因为我们在普通屏幕尺寸的横向布局文件夹中。我现在选择 5.1" 的屏幕尺寸。编辑器在 layout-large-land 文件夹中打开 xml 文件——也可以。

我现在选择这个屏幕：4.65" (720x1280 xhdpi)。4.65"的大小还在正常范围内，编辑器使用layout-land文件夹中的xml文件。这*应该*没问题，除了我的布局发生了很大变化！我认为这可能是因为 xhdpi，这就是我创建上面的文件夹（编号 4）的原因，但这似乎不适用于 Eclipse（此屏幕不使用 xml 文件）。4.7" 也会出现同样的问题。

**所以我真正的问题是：**

如何为正常范围内的屏幕提供不同的 xml 布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:25:01.273

请注意，Android 平台不会像`dp or Density Pixels`. Eclipse 和 ADB Plugin for Eclipse 也存在一些已知问题。最好的测试方法是使用实​​际设备。对于支持屏幕的信息，我们只需将文件放在下面的文件夹中，它可能适用于大多数具有指定 DP 的设备。

*   布局土地
*   大地布局
*   布局-sw600dp-土地
*   布局-xhdpi-land

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)![屏幕尺寸说明](../Images/c0ca091bb599618b989f3438eb951fb4.png)

# api - Youtube API：如何只请求安全广告？

> ID：14206604
> 
> 赞同：0
> 
> 时间：2013-01-08T00:45:30.907
> 
> 标签：api, youtube, gdata

我正在尝试在一个项目中使用 YouTube API。有没有办法让 YouTube 只显示安全的广告？我不希望孩子们在观看 YouTube 视频时观看恐怖电影预告片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:12:48.083

YouTube 允许您基于网站屏蔽某些广告[http://support.google.com/youtube/bin/answer.py?hl=en&answer=164131](http://support.google.com/youtube/bin/answer.py?hl=en&answer=164131)但我在该列表中没有看到 horroR 电影预告片。如果您不想要令人反感的广告，您应该使用像 Vimeo 这样的付费服务，并且根本不会收到任何广告。

# java - 从服务器资源调用 Restlet 客户端资源导致 HTTP 404 错误

> ID：14206607
> 
> 赞同：2
> 
> 时间：2013-01-08T00:45:55.307
> 
> 标签：java, restlet, restlet-2.0

我有一个 Restlet 服务器应用程序，它调用客户端资源以访问 google 端点。

当我在我的代码中达到目的时：

```
ClientResource storeRoot = new ClientResource("http://googleendpoint");
  String jsonString = storeRoot.get().getText(); 
```

我收到警告和错误：

> 2013 年 1 月 7 日下午 4:33:34 org.restlet.engine.component.ClientRouter getNext 警告：此请求使用的协议未在客户端连接器列表中声明。(HTTPS/1.1)。如果您使用的是 Component 类的实例，请检查其“clients”属性。未找到 (404) - 服务器在 org.restlet.resource.ClientResource.doError(ClientResource.java:612) 处未找到与请求 URI 匹配的任何内容

我搜索了一下，发现解决方案可能会将协议添加到端点，如下所示：

```
component.getClients​().add(Protocol.HTTPS​); 
```

问题是我在tomcat中将其作为war文件运行。我在哪里访问这个组件对象来添加协议？

我还更改了我的 web.xml 以支持这样的协议：

```
<?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         id="WebApp_ID" version="2.5">

         <display-name>Restlet adapters</display-name>

         <servlet>
                 <servlet-name>Restlet1</servlet-name>
                 <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
                 <init-param>
                         <param-name>org.restlet.application</param-name>
                         <param-value>com.MyApplication</param-value>
                 </init-param>
                 <init-param>
                    <param-name>org.restlet.clients</param-name>
                    <param-value>HTTP HTTPS FILE</param-value>
                </init-param>
         </servlet>

         <servlet-mapping>
                 <servlet-name>Restlet1</servlet-name>
                 <url-pattern>/*</url-pattern>
         </servlet-mapping>
 </web-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T13:46:01.963

尝试将以下内容添加到您的 web.xml`<servlet>`元素内。

```
<!-- Your application class name -->
<init-param>
    <param-name>org.restlet.application</param-name>
    <param-value>test.MyApplication</param-value>
</init-param>

<!-- List of supported client protocols -->
<init-param>
    <param-name>org.restlet.clients</param-name>
    <param-value>HTTP HTTPS FILE</param-value>
</init-param> 
```

有关更完整的文档，请参阅[http://www.restlet.org/documentation/snapshot/gae/ext/org/restlet/ext/servlet/ServerServlet.html](http://www.restlet.org/documentation/snapshot/gae/ext/org/restlet/ext/servlet/ServerServlet.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T04:08:51.040

经过一番心痛后，我确定解决方案是在上面安迪所说的 web.xml 中添加参数，并添加以下 jars：

org.restlet.ext.net org.restlet.ext.httpclient org.restlet.ext.ssl

# java - 使用 Maven 编译 Fortran 子例程（每个平台）并链接到 JNA

> ID：14206612
> 
> 赞同：0
> 
> 时间：2013-01-08T00:46:11.313
> 
> 标签：java, maven, compilation, fortran, jna

我有一个 Java 库，它需要调用一些 fortran 子例程（[非常复杂，不应该在 java 中重新实现](http://www.math.wsu.edu/faculty/genz/software/software.html)）。fortran 编译器将生成一些特定于平台的**.so**文件。然后我想将这些连接到 JNA 以便能够从 Java 调用它们。

我在这里找到了从 JNA 调用 fortran 的资源，这似乎还不错：[http ://www.javaforge.com/wiki/66061](http://www.javaforge.com/wiki/66061)

但是，我的问题是我是否可以让 Maven 编译子例程并将生成的库文件放在 target/ 或类似的地方，并能够从 JNA 自动获取它们。如果我使用 Makefile，我觉得我可以毫不费力地做到这一点，但不知道如何让 Maven 做到这一点。

此外，我正在使用 m2e，即 eclipse 的 maven 插件，因此似乎任何可能自行工作的 maven 插件的兼容性都不太可能与 m2e 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:37:02.420

我将专注于特定于 Maven 的方法。我真的不知道 m2e，但如果你让基本的 maven 工作，那么任何 ide 都应该服从它。希望这会有所帮助。

有一个[exec 插件](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html)可以让你执行外部程序。因此，如果您认为可以使用 makefile 快速完成它，那么这可能是最简单的方法。你最终会更多地依赖环境而不是插件，这不是 maven 方式。但它可能会完成工作。

谷歌教授回复了[这篇文章](http://www.humboldt.co.uk/2009/02/wrapping-a-native-library-with-maven.html)，看起来有点像你想做的。很多主题都是围绕编译用于 Java 的 C 库。所以它应该有点接近（即使你正在调用不同的编译器等）。已经有足够多的人构建本地库，[因此有一个插件](http://mojo.codehaus.org/maven-native/native-maven-plugin/)，尽管它再次关注用 C 而不是 Fortran 编写的库。

祝你好运！

# ios - 我可以发送iOS模拟器文件吗？

> ID：14206617
> 
> 赞同：-2
> 
> 时间：2013-01-08T00:46:46.090
> 
> 标签：ios, xcode

有没有办法只发送iOS模拟器文件而不发送源代码，我只想测试我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:59:13.257

您需要的是 AdHoc 发行版。

那里也有很多自动化工具，其中最流行的也是我的选择之一，是 TestflightApp。

他们还有一个很好的文档可以帮助您入门！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:59:29.973

是的，您可以将模拟器构建发送给其他人，并要求他们将其放在模拟器构建位置。他们将能够在没有源代码的情况下在模拟器中运行应用程序。

为了做到这一点，

```
Users/<username>/Library/Application Support/iPhone Simulator/6.0 
```

并复制看起来像的文件夹`0BE5DCF2-7F78-4D3G-BE5E-41268C635784`（确保您的应用程序文件作为文件存在于该文件夹中`yourproject.app`）并将该文件夹发送给其他人。要求他们放在同一个位置。在另一台计算机上执行此操作之前，请确保关闭模拟器。

请注意，上述解决方案仅适用于模拟器，不适用于 iPhone 设备。你不能把它放在 iPhone 里。如果您想将构建放到 iPhone 上，您可能需要获取分发配置文件并在其中添加其他设备，然后发送 ipa 文件，以便测试人员可以将其放入他们的设备。

请注意，对于测试，最好不要依赖模拟器。在实际的 iPhone 设备中进行测试总是更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T00:55:30.783

不幸的是，没有，即使您确实发送了模拟器二进制文件，它也不会部署在其他设备上（证书和代码签名）。适当的协议是将其他设备添加到您的门户，如果他们还没有，则向他们发送必要的证书、私钥等。连同这些数据，您可以附加用于测试的二进制文件。如果您还有任何问题或需要澄清，请告诉我！

# c# - 有没有办法消除 IComparable 运算符重载而不重复大量代码？

> ID：14206618
> 
> 赞同：2
> 
> 时间：2013-01-08T00:46:47.273
> 
> 标签：c#, operator-overloading, icomparable

我有一堆实现`IComparable<T>`. 因为这些类型实现了该接口，所以提供以下重载是有意义的：

```
/// <summary>Equality comparison operator.</summary>
/// <param name="lhs">The left hand side.</param>
/// <param name="rhs">The right hand side.</param>
/// <returns>True if <paramref name="lhs"/> is equal to <paramref name="rhs"/>; otherwise, false.</returns>
public static bool operator==(T lhs, T rhs)
{
    if (object.ReferenceEquals(lhs, null))
    {
        return object.ReferenceEquals(rhs, null);
    }

    return lhs.CompareTo(rhs) == 0;
}

/// <summary>Inequality comparison operator.</summary>
/// <param name="lhs">The left hand side.</param>
/// <param name="rhs">The right hand side.</param>
/// <returns>True if <paramref name="lhs"/> is not equal to <paramref name="rhs"/>; otherwise, false.</returns>
public static bool operator !=(T lhs, T rhs)
{
    return !(lhs == rhs);
}

/// <summary>Less than comparison operator.</summary>
/// <param name="lhs">The left hand side.</param>
/// <param name="rhs">The right hand side.</param>
/// <returns>True if <paramref name="lhs"/> is less than <paramref name="rhs"/>; otherwise, false.</returns>
public static bool operator <(T lhs, T rhs)
{
    if (lhs == null)
    {
        if (rhs == null)
        {
            return false;
        }
        else
        {
            return true;
        }
    }
    else
    {
        return lhs.CompareTo(rhs) < 0;
    }
}

/// <summary>Greater than comparison operator.</summary>
/// <param name="lhs">The left hand side.</param>
/// <param name="rhs">The right hand side.</param>
/// <returns>True if <paramref name="lhs"/> is greater than <paramref name="rhs"/>; otherwise, false.</returns>
public static bool operator >(T lhs, T rhs)
{
    return rhs < lhs;
}

/// <summary>Less than or equal comparison operator.</summary>
/// <param name="lhs">The left hand side.</param>
/// <param name="rhs">The right hand side.</param>
/// <returns>True if <paramref name="lhs"/> is less` than or equal to <paramref name="rhs"/>; otherwise, false.</returns>
public static bool operator <=(T lhs, T rhs)
{
    return !(rhs < lhs);
}

/// <summary>Greater than or equal comparison operator.</summary>
/// <param name="lhs">The left hand side.</param>
/// <param name="rhs">The right hand side.</param>
/// <returns>True if <paramref name="lhs"/> is greater than or equal to <paramref name="rhs"/>; otherwise, false.</returns>
public static bool operator >=(T lhs, T rhs)
{
    return !(lhs < rhs);
} 
```

这是大量重复的代码。是否有一些方法可以创建一个抽象类或其他东西（例如 C++'s `std::rel_ops`），这样可以更容易地实现这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:02:15.540

有一种方法，但我不确定我会建议它。在示例中，为了简洁起见，我只定义了两个运算符。在其中一个中，我将实例转换为`TemplateComparable<T>`to，`T`因为在类约束中，`T`必须确实继承自`TemplateComparable<T>`并且转换将是有效的。

```
abstract class TemplateComparable<T> where T : TemplateComparable<T>, IComparable<T>
{
    public static bool operator ==(TemplateComparable<T> lhs, T rhs)
    {
        if (ReferenceEquals(lhs, null))
        {
            return ReferenceEquals(rhs, null);
        }
        return rhs.CompareTo(lhs as T) == 0;
    }

    public static bool operator !=(TemplateComparable<T> lhs, T rhs)
    {
        return !(lhs == rhs);
    }
}

class Foo : TemplateComparable<Foo>, IComparable<Foo>
{
    public int CompareTo(Foo other)
    {
        //Write your comparison code
        return 0;
    }
} 
```

示例用法：

```
var v1 = new Foo();
var v2 = new Foo();
var equals = v1 == v2; //equals will be true 
```

`TemplateComparable<T>`实现`IComparable<T>`并`Foo`覆盖其成员的替代方法：

```
abstract class TemplateComparable<T> : IComparable<T> where T : TemplateComparable<T>
{
    public abstract int CompareTo(T other);

    public static bool operator ==(TemplateComparable<T> lhs, T rhs)
    {
        if (ReferenceEquals(lhs, null))
        {
            return ReferenceEquals(rhs, null);
        }
        return rhs.CompareTo(lhs as T) == 0;
    }

    public static bool operator !=(TemplateComparable<T> lhs, T rhs)
    {
        return !(lhs == rhs);
    }
}

class Foo : TemplateComparable<Foo>
{
    public override int CompareTo(Foo other)
    {
        //Write your comparation code
        return 0;
    }
} 
```

# regex - 找出一块文本，正则表达式

> ID：14206620
> 
> 赞同：0
> 
> 时间：2013-01-08T00:46:53.310
> 
> 标签：regex, sed, awk, grep

给定一个大日志文件，grep 文本块的最佳方法是什么？

```
text to be ignored
more text to be ignored
---                                 <---- start capture here
lots of 
text with separators like "---"
---
spanning 
multiple lines
---                                 <---- end capture here
text to be ignored
more text to be ignored 
```

什么是已知的？

*   行中的最大字符数（55 个但可能更少）
*   块中的行数
*   分隔符（可能会重复）

什么正则表达式会匹配这个块？期望的输出：文本块列表。

请假设 Linux 命令行环境

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:23:02.963

几年前，我用它把补丁分成大块：

```
sed -e '$ {x;q}' -e '/@@/ !{H;d}' -e '/@@/ x' # note - i know sed better now 
```

替换`/@@/`为`/---/`。

要删除 first`'---'`和 after last之前的所有内容，请`'---'`添加`-e '1,/---/d'`和删除整个`-e '$ {x;q}'`.

结果将是这样的：

```
sed -e '1,/---/d' -e '/---/ !{H;d}' -e x 
```

刚刚对其进行了测试，它适用于给定的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T14:13:15.737

把事情简单化：

```
$ awk 'NR==FNR {if (/^---/) { if (!start) start=NR; end=NR } next} FNR>=start && FNR<=end' file file
---                                 <---- start capture here
lots of
text with separators like "---"
---
spanning
multiple lines
---                                 <---- end capture here

$ awk 'NR==FNR {if (/^---/) { if (!start) start=NR; end=NR } next} FNR>start && FNR<end' file file
lots of
text with separators like "---"
---
spanning
multiple lines 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:03:47.210

如果你有足够的内存，你可以使用以下行。但是请注意，它会将整个日志文件读入内存！

```
perl -0777 -lnE 'm{ ^--- .+ ^--- }xms and say $&' logfile 
```

# objective-c - 在 iOS App info.plist 中使用预处理器定义

> ID：14206621
> 
> 赞同：16
> 
> 时间：2013-01-08T00:46:58.713
> 
> 标签：objective-c, ios, xcode

我有一个 iOS 应用程序将 SSO 与 Facebook 一起使用，作为让您的应用程序与 Facebook 的 SSO 一起工作的一部分，您必须在 info.plist 中指定 FacebookAppId 和回调 url。我有 2 个不同的 Facebook 群组，一个用于测试，一个用于生产。我希望能够根据预处理器指令设置上面指定的两个键的值。

在我的 MessageBomb-Prefix.pch 中，我有以下内容，效果很好：

```
#ifdef TEST
    //Development environments
    #define PARSE_APP_ID "dev parse app id"
    #define PARSE_CLIENT_ID "dev parse client id"
    #define FB_APP_ID "dev facebook id"
#else
    //Production environments
    #define PARSE_APP_ID "prod parse app id"
    #define PARSE_CLIENT_ID "prod parse client id"
    #define FB_APP_ID "prod facebook id"
#endif 
```

但是，在我的 info.plist 中，我完成了以下操作，但它似乎不起作用：

```
<key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleTypeRole</key>
            <string>Editor</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>fb${FB_APP_ID}</string>
            </array>
        </dict>
    </array>
    <key>FacebookAppID</key>
    <string>${FB_APP_ID}</string> 
```

是否有可能做我想做的事情。我已将项目设置为预处理 info.plist。

谢谢彼得

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T02:23:03.710

如果您进入构建设置，您可以设置`Preprocess Info.plist File`为`YES`然后设置`Info.plist Preprocessor Prefix File`为`.h`您放置在项目中的带有`#define`指令的文件。

因此，例如，如果我向我的`Info.plist`文件中添加一个键：`testKey`值为`TEST_VALUE`. 然后我`test.h`在我的项目中放置：

```
#define TEST_VALUE hello_world 
```

然后我设置`Preprocess Info.plist File`为`YES``Info.plist Preprocessor Prefix File``test.h`

检索时该键的值现在是“hello_world”。如果您大量更改宏的值，您可能会发现需要执行 Product/Clean 以查看更改，因为 XCode 似乎缓存了编译后的值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-11T12:16:26.097

要在 plist 中访问：

**创建一个新变量**
![在此处输入图像描述](../Images/13fc88b1a3c5d716d1fd19a6efc657f0.png)

* * *

**定义它**
![在此处输入图像描述](../Images/5a32378b5199ce3c21f0c44e5f68c7a5.png)

* * *

**在您的信息列表中使用它**
![在此处输入图像描述](../Images/2db53d47b7c60dd04612444458ae3a95.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-08T01:20:50.237

Info.plist 预处理器将允许您在 Info.plist 中使用构建设置，而不是`#define`s。因此，您可以`FB_APP_ID`在目标中定义为自定义用户构建设置（并为不同的方案提供覆盖），然后该值将可用于 Info.plist。但是，用户构建设置不会暴露给您的代码。也就是说，除非您使用 Preprocessor Definitions 构建设置并添加一个看起来像

```
FB_APP_ID=@\"$(FB_APP_ID)\" 
```

（需要反斜杠才能使双引号通过 shell 调用）

如果您的应用 ID 可能包含空格，那么您需要添加引号以通过 shell 调用：

```
FB_APP_ID="@\"$(FB_APP_ID)\"" 
```

最后，您将拥有如下所示的构建设置：

![构建设置](../Images/18f93a30c64687a00b9a0036718fdab9.png)

# python - python：在列表中查找匹配的元组

> ID：14206623
> 
> 赞同：4
> 
> 时间：2013-01-08T00:47:05.697
> 
> 标签：python, list, tuples, integer-hashing

在另一个 2 元组列表中找到匹配的 2 元组的最快方法是什么？

以下代码看起来效率极低。loc1 和 loc2 是 (x,y) 坐标的元组列表。

```
loc3=[]
for loc in loc1:
    if loc in loc2:
        loc3.append(loc) 
```

我认为散列是关键，但不确定如何在 Python 上做到这一点。请教我一个优雅的代码。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T00:48:25.570

您可以使用集合和`intersection`：

```
loc3 = set(loc1).intersection(loc2) 
```

这为您提供了一个`set`无序且不包含重复项（并强制这些项目是可散列的）。如果这是一个问题，请参阅 Phil Frost 的另一个答案。但是，在不需要顺序和重复的情况下，这应该会更有效。

可以包含重复项但需要项目 (in `loc2`) 的哈希性的顺序保留解决方案如下：

```
sloc2 = set(loc2)
loc3 = [ item for item in loc1 if item in sloc2 ]  #still O(m) 
```

在 python 中，a`set`只是一个哈希表。检查一个项目是否包含在该集合中是一个（大约）O(1) 操作，因为该项目的位置是通过散列找到的。

# c# - HtmlAgilityPack - 获取 div 内容

> ID：14206626
> 
> 赞同：0
> 
> 时间：2013-01-08T00:47:39.737
> 
> 标签：c#, html-agility-pack

因此，我试图在论坛上获取在线用户列表。这是 html 的样子：

```
<!-- logged-in users -->
            <div id="wgo_onlineusers" class="wgo_subblock section">
                <h3 class="blocksubhead"><img src="images/metro/red/misc/users_online.png" alt="Currently Active Users" />Currently Active Users</h3>
                <div>
                    <p>There are currently <a href="online.php">3 users online</a>. <span class="shade">3 members and 0 guests</span></p>
                    <p>Most users ever online was 23, 01-06-2013 at <span class="time">12:09 PM</span>.</p>

                    <ol class="commalist" id="wgo_onlineusers_list">

                            <li><a class="username" href="http://website.com/member.php?u=13"><span class="vip_username">Duncanrp</span></a>, </li>

                            <li><a class="username" href="http://website.com/member.php?u=17"><span class="regular_username">Jessica</span></a></li>

                    </ol>

                </div>
            </div>
            <!-- end logged-in users --> 
```

是否可以使用 HtmlAgilityPack 获取在线的每个单独用户？使用`<li>`标签对用户进行格式化。

我尝试过的代码：

```
 HtmlAgilityPack.HtmlDocument htmlDocument = new HtmlAgilityPack.HtmlDocument();

            htmlDocument.LoadHtml("http://www.vizor.us/forum.php");

            List<string> onlineUsers = new List<string>();

            foreach (HtmlAgilityPack.HtmlNode selectNode in htmlDocument.DocumentNode.SelectNodes("//li/a[@class='username']"))
            {
                onlineUsers.Add(selectNode.InnerText);
            } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:09:57.720

尝试

```
 HtmlDocument htmlDocument = new HtmlDocument();

 htmlDocument.LoadHtml("http://vizor.us/forum.php");

 List<string> onlineUsers = new List<string>();

foreach (HtmlNode selectNode in htmlDocument.DocumentNode.SelectNodes("//li/a[@class='username']")) {
    onlineUsers.Add(selectNode.InnerText);
            }
        } 
```

您正在解析的网站 url 的字符串值在哪里。

有关代码的解释，请查看[http://htmlagilitypack.codeplex.com/上的文档](http://htmlagilitypack.codeplex.com/)

# c# - 当 Panel.AutoSize = true 添加控件后 Panel.Size 何时更新？

> ID：14206634
> 
> 赞同：7
> 
> 时间：2013-01-08T00:48:55.643
> 
> 标签：c#, winforms, size, autosize

我正在使用*WinForms在**C#*中创建一个 GUI 。 我正在尝试将程序化创建的面板放置在另一个下方。由于这些面板的内容可能会根据其内容而有所不同，因此我正在使用让 WinForms 执行正确的大小调整。 *`Panel.AutoSize`*

 *问题是：如果我在填充后立即使用`Panel.Height`（或） ，则返回的值始终是我的默认值。正如我在启动应用程序时看到的那样，确实会发生调整大小，但我只是不知道什么时候。`Panel.Size.Height``Panel`

这是我正在做的简化版本：

```
this.SuspendLayout();

int yPos = 0;
foreach (String entry in entries)
{
    Panel panel = new Panel();
    panel.SuspendLayout();
    panel.AutoSize = true;
    panel.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowOnly;
    panel.BackColor = System.Drawing.SystemColors.Window; // Allows to see that the panel is resized for dispay
    panel.Location = new System.Drawing.Point(0, yPos);
    panel.Size = new System.Drawing.Size(this.Width, 0);
    this.Controls.Add(panel);

    Label label = new Label();
    label.AutoSize = true;
    label.Location = new System.Drawing.Point(0, 0);
    label.MaximumSize = new System.Drawing.Size(panel.Width, 0);
    label.Text = entry;
    panel.Controls.Add(label);

    panel.ResumeLayout(false);
    panel.PerformLayout();

    yPos += panel.Height; // When breaking here, panel.Height is worth 0
    yPos += label.Height; // This works perfectly, label.Height was updated according to the text content when breaking at that point
}

this.ResumeLayout(false);
this.PerformLayout(); 
```

所以真正的问题是：如何`Panel.Size`在添加控件后获取更新，以获得正确的高度值？

*注意：我知道我可以使用`TextBox`高度，但我发现它不优雅且不切实际，因为在我的实际代码中，有更多控件，`Panel`我需要在下面几行使用该面板高度。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T06:39:49.833

我相信正在发生的是，面板的大小将在您对其父级执行 PerformLayout 时确定。`SuspendLayout / ResumeLayout`您可以通过将面板的父代码移动到循环中来使其按您想要的方式工作。

```
int yPos = 0;
foreach (String entry in entries)
{
    this.SuspendLayout();
    Panel panel = new Panel();
    panel.SuspendLayout();
    panel.AutoSize = true;
    panel.AutoSizeMode = System.Windows.Forms.AutoSizeMode.GrowOnly;
    panel.BackColor = System.Drawing.SystemColors.Window; // Allows to see that the panel is resized for dispay
    panel.Location = new System.Drawing.Point(0, yPos);
    panel.Size = new System.Drawing.Size(this.Width, 0);
    this.Controls.Add(panel);

    Label label = new Label();
    label.AutoSize = true;
    label.Location = new System.Drawing.Point(0, 0);
    label.MaximumSize = new System.Drawing.Size(panel.Width, 0);
    label.Text = entry;
    panel.Controls.Add(label);
    panel.ResumeLayout(true);
    this.ResumeLayout(true);
    yPos += panel.Height; // When breaking here, panel.Height is worth 0
    //yPos += label.Height; // This works perfectly, label.Height was updated according to the text content when breaking at that point
}
this.PerformLayout(); 
```*

# scikit-learn - 在 Windows 7 上安装 scikit-learn for python 3.3

> ID：14206637
> 
> 赞同：2
> 
> 时间：2013-01-08T00:49:01.763
> 
> 标签：scikit-learn, python-3.3

我对 Python 的使用和可以安装的相关软件包非常陌生。作为一名生物学家，我正在寻找许多可以帮助我模拟物种系统、生态变化等的新软件包。经过大量“谷歌搜索”后，我遇到了 scikit-learn。但是，我无法安装它。我现在要为这篇文章的篇幅道歉。

我正在使用 64 位 Python 3.3 并具有相关的 NumPy (MKL 1.7.0) 和 SciPy。我安装了运行良好的分发版，并允许我使用easy_install。所以要安装 scikit-learn，我尝试使用 cmd 提示符（Windows）以管理员模式运行，然后也通过 Python 命令行。我将下载并提取的 tar.gz 文件放在 Lib\site-packages 文件夹中。当我 `easy_install scikit-learn` 在 cmd 提示符下运行命令时。然后这是以下输出：

```
C:\Python33\Lib\site-packages>easy_install -U scikit-learn
Searching for scikit-learn
Reading http://pypi.python.org/simple/scikit-learn/
Reading http://scikit-learn.org
Reading http://sourceforge.net/projects/scikit-learn/files/
Reading http://scikit-learn.sourceforge.net
Best match: scikit-learn 0.12.1
Downloading http://pypi.python.org/packages/source/s/scikit-learn/scikit-learn-0
.12.1.tar.gz#md5=7e8b3434f9e8198b82dc3774f8bc9394
Processing scikit-learn-0.12.1.tar.gz
Writing c:\users\nuvraj~1\appdata\local\temp\easy_install-kvr2q0\scikit-learn-0.
12.1\setup.cfg
Running scikit-learn-0.12.1\setup.py -q bdist_egg --dist-dir c:\users\nuvraj~1\a
ppdata\local\temp\easy_install-kvr2q0\scikit-learn-0.12.1\egg-dist-tmp-l618ie
Traceback (most recent call last):
  File "C:\Python33\Scripts\easy_install-script.py", line 9, in <module>
    load_entry_point('distribute==0.6.33', 'console_scripts', 'easy_install')()
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
1937, in main
    with_ei_usage(lambda:
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
1918, in with_ei_usage
    return f()
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
1941, in <lambda>
    distclass=DistributionWithoutHelpCommands, **kw
  File "C:\Python33\lib\distutils\core.py", line 148, in setup
    dist.run_commands()
  File "C:\Python33\lib\distutils\dist.py", line 917, in run_commands
    self.run_command(cmd)
  File "C:\Python33\lib\distutils\dist.py", line 936, in run_command
    cmd_obj.run()
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
358, in run
    self.easy_install(spec, not self.no_deps)
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
598, in easy_install
    return self.install_item(spec, dist.location, tmpdir, deps)
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
628, in install_item
    dists = self.install_eggs(spec, download, tmpdir)
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
823, in install_eggs
    return self.build_and_install(setup_script, setup_base)
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
1103, in build_and_install
    self.run_setup(setup_script, setup_base, args)
  File "C:\Python33\lib\site-packages\setuptools\command\easy_install.py", line
1089, in run_setup
    run_setup(setup_script, args)
  File "C:\Python33\lib\site-packages\setuptools\sandbox.py", line 34, in run_se
tup
    lambda: exec(compile(open(
  File "C:\Python33\lib\site-packages\setuptools\sandbox.py", line 82, in run
    return func()
  File "C:\Python33\lib\site-packages\setuptools\sandbox.py", line 37, in <lambd
a>
    {'__file__':setup_script, '__name__':'__main__'})
  File "setup.py", line 33, in <module>
  File "c:\users\nuvraj~1\appdata\local\temp\easy_install-kvr2q0\scikit-learn-0.
12.1\sklearn\__init__.py", line 86
    print "I: Seeding RNGs with %r" % _random_seed
                                  ^
SyntaxError: invalid syntax

C:\Python33\Lib\site-packages> 
```

因此，小 ^ 似乎指向带有 %r 的 RNGS 之后的“。据我所知，这在 .tar.gz 文件中的 sklearn 文件夹中的“ *init ”文件中。*

在 Python GUI 和命令行中运行它时，我也得到了相同的结果。

如何使用 Python 3.3 安装 scikit-learn？是否有某种方法可以构建它或编辑文件以克服这个无效的语法错误？

任何帮助将不胜感激。我很抱歉这篇文章这么长。我只是想把所有的细节都放进去。

谢谢西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T09:39:47.583

scikit-learn 还不支持 Python 3。现在你需要 Python 2.7。

预计将于 2013 年第二季度发布的 0.14 版本对 Python 3 提供适当支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T18:40:34.820

我不是专家，但据我了解，Python 3.* 中的 print 语句现在是一个函数，称为 print()。因此，在这种情况下，一个快速的解决方案是更改

```
print "I: Seeding RNGs with %r" % _random_seed 
```

至

```
print("I: Seeding RNGs with %r" % _random_seed) 
```

# c - newlocale(3) 的掩码位具体是什么意思？

> ID：14206639
> 
> 赞同：1
> 
> 时间：2013-01-08T00:49:11.900
> 
> 标签：c, locale

**newlocale** (3)的手册页部分说明：

```
The mask is the logical OR of the following:

LC_COLLATE_MASK   Collation  
LC_CTYPE_MASK     Character type  
LC_MESSAGES_MASK  Messages
LC_MONETARY_MASK  Monetary
LC_NUMERIC_MASK   Numeric
LC_TIME_MASK      Time
LC_ALL_MASK       The logical OR of all of the above 
```

但它并没有说明每个掩码位的具体*含义*。在我的例子中，我需要本地化字符串`AM_STR`, `PM_STR`, 月份缩写 ( `ABMON_1`, ...)、完整月份名称 ( `MON_1`, ...)、工作日缩写 ( `ABDAY_1`, ...) 和完整工作日名称 ( `DAY_1`, ...) .

作为一个有根据的猜测，我认为我需要`LC_MESSAGES_MASK`- 但我也需要`LC_TIME_MASK`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:15:01.887

你需要`LC_TIME_MASK`；您不需要`LC_MESSAGES_MASK`您声明的要求。

`LC_MESSAGES`控制错误消息，而不是时间格式。要查看“未屏蔽”名称（例如`LC_TIME`含义）的含义，请参阅手册页以获取[`setlocale(3)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/setlocale.html). 它们是标准的 C 语言（尽管链接到的 POSIX 页面包括一些扩展——尤其是`"POSIX"`语言环境）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:27:47.977

[您可以在此处](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap07.html#tag_07)找到 POSIX 中语言环境的详细说明

定义了不同的类型

1.  LC_CTYPE 字符分类和大小写转换。
2.  LC_COLLATE 整理顺序。
3.  LC_MONETARY 货币格式。
4.  LC_NUMERIC 数字，非货币格式。
5.  LC_TIME 日期和时间格式。
6.  LC_MESSAGES 信息和诊断消息以及交互式响应的格式。

# vb.net - 这个VB代码有什么错误？

> ID：14206644
> 
> 赞同：0
> 
> 时间：2013-01-08T00:49:45.270
> 
> 标签：vb.net, string, visual-studio-2010, integer, media-player

我正在尝试使标签的时间每秒更改一次以匹配正在播放的媒体的时间。

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

    Dim remain As Int32 = AxWindowsMediaPlayer1.currentMedia.duration - AxWindowsMediaPlayer1.Ctlcontrols.currentPosition

    Dim Minutes As String

    Dim Secs As String

    Dim ElapsedTime As String

    Minutes = (remain / 60).ToString("00")

    Secs = (remain Mod 60).ToString("00.00")

    ElapsedTime = Minutes & "." & Secs

    Label1.Text = ElapsedTime ' Display the remaining time for the .wav file in a label in mm:ss format

    TrackBar2.Value = ElapsedTime (Error with this line: Conversion from string "11.26.00" to type 'Integer' is not valid.)

End Sub 
```

我是否将字符串更改为整数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:59:06.587

我认为这是编译器无法隐式转换值的问题，我要么更改字符串的格式，要么执行以下操作：

```
Dim totalTime as Integer = 0
For Each thing In ElapsedTime.Split(".")
     totalTime += CInt(thing) 'So, "11.26.00" will turn into 11 + 26 + 0 = 37 for totalTime
Next 
```

这只是一个简单的大纲，您可以根据需要进行任何额外的算术运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:01:22.053

根据[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.trackbar.value.aspx)的文档，轨迹栏需要将其值设置为介于最小值和最大值之间的*整数。*

`0`如果您使用默认的最小值和`10`最大值，或者如果您更改了它们（显然），那将是。

您需要弄清楚如何将时间字符串（或剩余时间整数`remain`）更改为介于最小值和最大值之间的值，然后将值设置为该值。

由于你有持续时间和位置，你可以使用类似的东西：

```
Dim pos as Int32 = AxWindowsMediaPlayer1.Ctlcontrols.currentPosition
Dim tot as Int32 = AxWindowsMediaPlayer1.currentMedia.duration
Dim tenthsToGo as Int32 = 10 * (tot - pos) / tot
' Now use tenthsToGo (or 10-tenthsToGo depending on direction) to set trackbar ' 
```

如果您已将最大值设置为持续时间（并将最小值保留为零），如评论中所示，那么您可以简单地将轨迹栏值设置为当前位置（从 0 到最大值不等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T18:07:28.890

你能用这个代码来显示媒体播放器的播放时间和播放歌曲或视频的持续时间吗 4 英语不好

```
 TrackBar2.Maximum = AxWindowsMediaPlayer1.Ctlcontrols.currentItem.duration
        Label3.Text = AxWindowsMediaPlayer1.Ctlcontrols.currentPositionString
        TrackBar2.Value = AxWindowsMediaPlayer1.Ctlcontrols.currentPosition
        Label4.Text = AxWindowsMediaPlayer1.Ctlcontrols.currentItem.durationString
```

# java - Map的反序列化 没有类定义

> ID：14206650
> 
> 赞同：0
> 
> 时间：2013-01-08T00:50:00.260
> 
> 标签：java, serialization, ejb

**远程 EJB 可以在没有包含与存储在 Map 中的对象关联的类文件的 jar 文件的情况下反序列化 Map 对象吗？**

假设我们创建了以下 Java 类：

```
import java.io.Serializable;

public class MyCustomObject implements Serializable
{
    private static final long serialVersionUID = -3100182702835154967L;

    private String myString;
    private int myInt;

    public String getMyString()
    {
        return myString;
    }

    public void setMyString(String myString) 
    {
        this.myString = myString;
    }

    public int getMyInt()
    {
        return myInt;
    }

    public void setMyInt(int myInt)
    {
        this.myInt = myInt;
    }
} 
```

我们将此类的一个实例放在 Map 中：

```
Map<String, Object> mapOfObjects = new HashMap<String, Object>();       
MyCustomObject customObject = new MyCustomObject();
customObject.setMyInt(3);
customObject.setMyString("Hello");
mapOfObjects.put("MyCustomObjectKey", customObject); 
```

如果我现在将这个 Map 对象传递给远程 EJB，假设远程 EJB 没有对 MyCustomObject 类的引用，那么在反序列化过程中会抛出异常吗？

我知道如果我想从 Map 中检索自定义对象，我必须引用 MyCustomObject 类

```
public class RemoteEJB()
{
    public void remoteMethod(Map<String,Object> mapOfObjects)
    {
        MyCustomObject customObject =  (MyCustomObject)mapOfObjects.get("MyCustomObjectKey"); //java.lang.NoClassDefFoundError - Won't compile
    }
} 
```

问题是：假设我不想将对象拉出 Map，remoteMethod 调用会发生在远程 EJB 上还是会引发异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:30:25.757

是的，因为HashMap的反序列化会立即要求对二级对象进行反序列化，这样会失败。如果您需要支持这个用例，您可以编写一个自定义 Map 执行内部序列化步骤（即 writeObject 创建一个新的 ObjectOutputStream 来写入内部对象），然后执行按需反序列化（即获取() 创建一个新的 ObjectInputStream 来读取内部对象）。

# git - 如何在 USB 驱动器上安装 Github？

> ID：14206654
> 
> 赞同：4
> 
> 时间：2013-01-08T00:50:46.580
> 
> 标签：git, github, usb, portable-applications

是否可以将 Github 和 Powershell 放在 USB 驱动器上。我需要它像在我的电脑上一样工作。就像通过 Github 打开 shell 并通过选择存储库打开 shell。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:57:59.043

您必须使用适用于 Windows 的 Portable GIT 客户端，这是它的测试版： [http ://code.google.com/p/msysgit/downloads/detail?name=PortableGit-1.8.0-preview20121022.7z&can=2&q=](http://code.google.com/p/msysgit/downloads/detail?name=PortableGit-1.8.0-preview20121022.7z&can=2&q=)

把它解压到你的U盘里，现在你可以在任何电脑上使用git而不需要安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T21:20:34.957

仅供参考，您可以使用**cameyo**使几乎任何应用程序都可移植。[http://www.cameyo.com/](http://www.cameyo.com/)

# android - Android：无法在运行时更改 ImageView

> ID：14206655
> 
> 赞同：0
> 
> 时间：2013-01-08T00:50:51.167
> 
> 标签：android

我在我的示例中使用 ImageView。**我在 xml 中将 Images 设置为 imageview 的背景**。现在我想在运行时更改 Imageview 的这个图像背景。

这是我的java代码。

```
 changeImage()

       {
       ImageView imgview=(ImageView)findViewById(R.id.imageView1);
       imgview.setImageResource(R.drawable.headerhindi);
       } 
```

我从**onCreate()**调用这个方法。我的方法第一次效果很好。但是当我使用 startActivity(myActivityIntent) 再次重定向到我的活动 onCreate(); 此方法无法正常工作意味着图像不会根据此方法更改。默认显示在 xml 中设置的图像。

请帮我找出解决方案。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:56:21.873

你如何重定向到你的活动`onCreate`？

如果您的活动已经在运行，它会跳过`onCreate`并直接进入该`Started`状态。
您可能希望将您`changeImage()`的`onStart()`方法移至在创建和恢复时调用的方法。

![在此处输入图像描述](../Images/2f6f1c50b12120b247497247ad27fdea.png)

你可以在这里看到完整的解释：[管理活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)

*`onStart()`※和之间的主要区别在于`onResume()`，`onStart()`在活动可见之前调用，而`onResume()`在之后调用。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T00:56:40.177

尝试将呼叫`changeImage()`移至`onResume()`。

我还没有测试过它，但我有一种感觉，发生的事情是当你再次调用`startActivity()`启动活动时，活动还没有被销毁，所以`onCreate()`不会根据活动生命周期再次调用：

![在此处输入图像描述](../Images/9308ea7048dde0dac93ce90ddce7d039.png)[http://developer.android.com/images/activity_lifecycle.png](http://developer.android.com/images/activity_lifecycle.png)。不过只是预感。

# tidesdk - 潮汐dk的单一安全可执行文件

> ID：14206659
> 
> 赞同：2
> 
> 时间：2013-01-08T00:51:26.593
> 
> 标签：tidesdk, tidekit

我刚开始研究[TideSdk](http://www.tidesdk.org/)并注意到当我“编译”（或打包）一个项目（在 Win-7 中）时，我得到了所有这些依赖项，这些依赖项实际上是应用程序的未编译源代码。

有没有办法：

1.  让 Tide SDK 将文件打包成一个可执行文件
2.  在最终的可执行文件中没有以任何方式、形状或形式可见的源代码吗？

如果这些都不可能，是否有替代这些东西的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T02:58:31.047

我们正在研究解决方案。有几种可能性。目前唯一可行的方法是通过潮汐构建器选项使用谷歌闭包库来混淆你的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:22:05.653

当我尝试做类似的事情时，我在谷歌上发现了这个。这很烦人，但似乎有效。 [http://coffeecone.com/post/36127491095/howto-single-exe-for-tidesdk](http://coffeecone.com/post/36127491095/howto-single-exe-for-tidesdk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T20:06:40.923

为此，我使用应用程序虚拟化应用程序 Cameyo。[http://www.cameyo.com/](http://www.cameyo.com/)

# java - 绘制矩形和网格

> ID：14206661
> 
> 赞同：0
> 
> 时间：2013-01-08T00:52:00.820
> 
> 标签：java, applet, graphics2d, drawrectangle

如果有人可以帮助我，我将非常感激。

我的程序有 2 节课。一个绘制矩形和网格，另一个是查看器。问题是，当我尝试更改贪婪+矩形的位置时，即更新 Viewer 类中的 X 和 Y 常量时，比例会发生变化。只有当 X=0 和 Y=0 时，网格才适合。

我使用相同的坐标数组来绘制网格和矩形，但不知何故，比例是错误的，这让我感到惊讶。

谢谢你。

我的代码：

```
import java.applet.Applet;
import java.awt.Graphics;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.geom.Line2D;
import java.awt.geom.Rectangle2D;
import java.math.BigDecimal;

public class Viewer extends Applet {
  public static final double R_WDTH = 12;//rectangle width
  public static final double X = 10;//the grid fits in only when X=Y=0
  public static final double Y = 10;
  public static final int ROWS = 25;
  public static final int COLUMNS = 12;

  RectangleAndGrid cup = new RectangleAndGrid(X, Y, R_WDTH, ROWS, COLUMNS);

  public void paint(Graphics g) {
    cup.draw((Graphics2D)g);
  }
}

public class RectangleAndGrid {
  private double x, y, blockWidth;
  private int rows, columns;
  private double coordX[][], coordY[][];
  private Rectangle2D.Double cupSpace;

  public RectangleAndGrid(double cX, double cY, double givenBlockWidth, int r, int c){
    x = cX;
    y = cY;
    blockWidth = givenBlockWidth;
    rows = r;
    columns = c;

    BigDecimal currX = BigDecimal.valueOf(x);
    BigDecimal currY = BigDecimal.valueOf(y);
    coordX = new double[rows + 1][columns + 1];
    coordY = new double[rows + 1][columns + 1];
    for(int i = 0; i <= rows; i++){
      for(int j = 0; j <= columns; j++){
        coordX[i][j] = currX.doubleValue();
        coordY[i][j] = currY.doubleValue();
        currX = currX.add(BigDecimal.valueOf(blockWidth));
      }
      currX = BigDecimal.valueOf(x);
      currY = currY.add(BigDecimal.valueOf(blockWidth));
    }

    cupSpace = new Rectangle2D.Double(coordX[0][0], coordY[0][0], coordX[rows][columns], coordY[rows][columns]);
  }

  public void draw(Graphics2D g2d){
    g2d.setColor(Color.CYAN);
    g2d.fill(cupSpace);
    g2d.setColor(Color.BLACK);
    g2d.draw(cupSpace);

    Line2D.Double line = new Line2D.Double();
    for(int i = 0; i <= rows; i++){
      line.setLine(coordX[i][0], coordY[i][0], coordX[i][columns], coordY[i][columns]);
      g2d.draw(line);
    }
    for(int i = 0; i <= columns; i++){
      line.setLine(coordX[0][i], coordY[0][i], coordX[rows][i], coordY[rows][i]);
      g2d.draw(line);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T01:22:49.397

首先，您的方法“有点”怪异，并非完全糟糕，只是有点怪异-恕我直言

`Rectangle2D`接受四个参数，`x`，`y`，`width`和`height`。在您的代码中，您正在传递网格的左上角和右下角，这意味着“杯子”的宽度/高度实际上比像素更宽`x`（`y`像素更高）

基本上，您需要从右下角坐标中减去`x`/偏移量...`y`

```
cupSpace = new Rectangle2D.Double(coordX[0][0], coordY[0][0], coordX[rows][columns] - coordX[0][0], coordY[rows][columns] - coordY[0][0]); 
```

# windows-8 - 适用于 Windows 8 应用商店应用的科学矩阵库。(C++/CX)

> ID：14206666
> 
> 赞同：0
> 
> 时间：2013-01-08T00:52:27.383
> 
> 标签：windows-8, c++-cx

在为 Windows 8 商店应用程序移植 Eigen/OpenCV 矩阵库方面是否有任何工作？对于 arm/x86。

如果我的 Windows 商店应用程序需要一个矩阵库。有什么值得使用的吗？或者，我将如何为 Windows 8 商店应用程序移植 Eigen 或 OpenCVs 库。

我认为它称为 C++/CX 运行时库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:58:06.050

取决于您的语言/生态系统。

1.  如果您的目标是 .NET 和 CLR，则有[Math.NET Numerics](http://numerics.mathdotnet.com/)
2.  如果您使用的是本机代码 (C++/CX)，那么您应该能够按原样使用现有库，包括 OpenCV 和 Eigen

# android - Android - 使用从左向右滑动返回

> ID：14206674
> 
> 赞同：5
> 
> 时间：2013-01-08T00:54:00.923
> 
> 标签：android, android-viewpager, back-stack

我对 Fragments API 有点陌生。我正在构建一个应用程序，允许用户在信息树中向上/向下导航。为了便于导航，我希望允许用户从左向右滑动以导航回页面。

我最初的想法是尝试使用 ViewPager 并在每次我想钻入时附加一个新的片段，并在每次用户从左到右滑动或按回时自动删除最后一个片段。但是，我无法理解这与后台堆栈的交互方式。这种行为会与 FragmentManager 完全分开，还是有办法将 Fragment 附加到 FragmentPagerAdapter 作为使用 FragmentManager 的一部分？

# python - Node.js 的 Shlex 拆分等效项

> ID：14206676
> 
> 赞同：2
> 
> 时间：2013-01-08T00:54:09.347
> 
> 标签：python, node.js, shlex

我将如何在 Node.js 中执行以下操作？我意识到可能没有内置功能或书面模块，那么我该如何实现呢？

```
>>> import shlex
>>> shlex.split("-a arga -b \"argument b\" arg1 arg2")
['-a', 'arga', '-b', 'argument b', 'arg1', 'arg2'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:12:28.010

我假设您已经搜索过[http://npmjs.org](http://npmjs.org)（搜索或浏览[shell](https://npmjs.org/browse/keyword/shell)关键字），而不是假设不存在这样的东西。例如，快速浏览一下，各种包[`shell-quote`](https://npmjs.org/package/shell-quote)似乎可能会执行您想要的操作，而其他类似的包[`nshell`](https://npmjs.org/package/nshell)似乎可能依赖于`shlex`-like 库或内部具有等效代码，但我实际上并没有看过它们中的任何一个详细，所以我愿意接受没有什么可以使用的。

正确处理所有细节很复杂。但幸运的是，Python 的[源代码](http://hg.python.org/cpython/file/3.3/Lib/shlex.py)`shlex.split`是用纯 Python 编写的，并且具有相当的可读性。所以，你应该能够移植它。

如果这样做，理想情况下，您还应该构建一个好的测试套件并将其作为`npm`包发布，以便下次其他人查看时，它*会*存在于[http://npmjs.org](http://npmjs.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-19T12:07:59.337

我已经完成了`shlex`对 Node.js 的基本移植：[https ://www.npmjs.com/package/shlex](https://www.npmjs.com/package/shlex)

`shell-quote`似乎被放弃了，有几个未解决的问题和拉取请求，但作者有一段时间没有回复它们。

# php - Setting default index variable to URL

> ID：14206689
> 
> 赞同：-1
> 
> 时间：2013-01-08T00:56:35.117
> 
> 标签：php, html, url

i want to set my index with variable..like example `localhost/sitename` i want it to be `localhost/sitename/index.php?variable=value` ^^ anyone could help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:58:44.410

You need to create an .htaccess file in your webroot directory, and then inside put:

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?uri=$1 [L,QSA] 
```

Remove the middle 2 lines if you don't want direct access to valid directories/files.

# javafx-2 - JavaFX TextArea 隐藏滚动条

> ID：14206692
> 
> 赞同：8
> 
> 时间：2013-01-08T00:56:59.640
> 
> 标签：javafx-2

我有一个 TextArea() 并想隐藏垂直/​​水平滚动条。我看到该控件似乎有一个内置的滚动窗格，可以根据需要显示。

```
 TextArea numberPane = new TextArea();

    numberPane.setEditable(false);
    numberPane.setMaxWidth( 75 );

    // Set the characteristics of our line number pane
    numberPane.setId( "line-number-pane" ); 
```

在我的 CSS 文件中，我有以下设置。

```
 #line-number-pane
    {
        -fx-text-fill: white;
        -fx-background-color: black;
        -fx-font: 12px "Courier New";
        -fx-font-family: "Courier New";
        -fx-font-weight: bold;
    }

    #line-number-pane .scroll-pane
    {
        -fx-hbar-policy : never;
        -fx-vbar-policy : never;
    } 
```

正如预期的那样，文本区域字体/颜色/大小工作得很好。但是，滚动窗格策略似乎不起作用。

我是否应该能够通过 CSS 文件隐藏滚动条，或者是否有一些代码可以解决问题。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-11T07:57:33.307

从[如何在 TextArea 中隐藏滚动条？](https://forums.oracle.com/message/10978956)：

## 移除水平滚动条

```
textArea.setWrapText(true); 
```

## 移除垂直滚动条

```
ScrollBar scrollBarv = (ScrollBar)ta.lookup(".scroll-bar:vertical");
scrollBarv.setDisable(true); 
```

## CSS

```
.text-area .scroll-bar:vertical:disabled {
    -fx-opacity: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-13T15:06:42.067

我只是使用**样式表非常简单地做到了：**

## CSS

```
.text-area .scroll-bar:vertical {
    -fx-pref-width: 1;
    -fx-opacity: 0;
}
.text-area .scroll-bar:horizontal {
    -fx-pref-height: 1;
    -fx-opacity: 0;
} 
```

不需要所有那些古怪的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:39:14.533

我观察了 TextAreaSkin 类的代码，发现有一个 void layoutChildren(x, y, w, h) 方法，它被称为“在场景图的布局过程中”，事实上，每次当控件发生某些事情时, 包含一个代码，它根据当前的控制状态在 AS_NEEDED 和 NEVER 之间更改 hbarPolicy 和 vbarPolicy。

所以，看起来，没有机会用它做一些事情，使用 css。

试着让滚动条不可见。但是，正如我看到的 ScrollPaneSkin 的代码，滚动条被创建一次，但它们的可见性状态似乎在控件工作期间发生了变化，因此，不要使用 setVisible(false) （在最近的布局中将被忽略），而是尝试使用一个 setOpacity(0.0)。（我不确定，它会起作用，但值得一试）。

此外，您可以使用 Parent.getChildrenUnmodifiable() 方法在控制结构中应用对滚动条的递归搜索，而不是使用 CSS，并手动使它们不可见。

# c# - 使用 Microsoft Kinect 跟踪 Blob

> ID：14206699
> 
> 赞同：2
> 
> 时间：2013-01-08T00:57:40.683
> 
> 标签：c#, image-processing, kinect, emgucv

我正在研究人员计数器。为此，我在门上安装了 Microsoft Kinect。我正在使用 C# 和 EmguCV。我已经提取了人的头部，使它们在黑色图像上显示为白色斑点。然后我在头部周围创建了一个边界框。这很好用。所以我现在每帧有多少个斑点，我现在也有它们的位置。这工作正常。但是现在我想跟踪 blob，因为我想计算有多少人进出，但我不知道该怎么做。谁能帮我？问题是每一帧都会出现新的斑点，而旧的斑点可能会消失。谁能给我一个算法或者一些代码？或一张纸。非常感谢！

* * *

当然。这是blob的代码：

```
using (MemStorage stor = new MemStorage())
        {

            Contour<System.Drawing.Point> contours = head_image.FindContours(Emgu.CV.CvEnum.CHAIN_APPROX_METHOD.CV_CHAIN_APPROX_SIMPLE, Emgu.CV.CvEnum.RETR_TYPE.CV_RETR_EXTERNAL, stor);

            for (int i = 0; contours != null; contours = contours.HNext)
            {

                i++;

                //if ((contours.Area > Math.Pow(sliderMinSize.Value, 2)) && (contours.Area < Math.Pow(sliderMaxSize.Value, 2)))
                {

                    MCvBox2D box = contours.GetMinAreaRect();

                    blobCount++;

                    contour_image.Draw(box, new Bgr(System.Drawing.Color.Red), 1);

                    new_position = new System.Drawing.Point((int)(box.center.X), (int)(box.center.Y));
                    new_x = box.center.X;
                    new_y = box.center.Y;
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:54:40.840

有关详细信息，请参阅[Emgu CV Blob 检测](https://stackoverflow.com/questions/6174527/emgu-cv-blob-detection)。假设您使用的是 Emgu CV 2.1 或更高版本，那么答案将起作用。如果您使用的是 1.5 或更高版本，请参阅[此线程](http://www.emgu.com/forum/viewtopic.php?f=7&t=225)以了解如何轻松检测 blob。或者看下面的代码

```
 Capture capture = new Capture();

     ImageViewer viewer = new ImageViewer();

     BlobTrackerAutoParam param = new BlobTrackerAutoParam();
     param.ForgroundDetector = new ForgroundDetector(Emgu.CV.CvEnum.FORGROUND_DETECTOR_TYPE.FGD);
     param.FGTrainFrames = 10;
     BlobTrackerAuto tracker = new BlobTrackerAuto(param);

     Application.Idle += new EventHandler(delegate(object sender, EventArgs e)
     {
        tracker.Process(capture.QuerySmallFrame().PyrUp());
        Image<Gray, Byte> img = tracker.GetForgroundMask();
        //viewer.Image = tracker.GetForgroundMask();

        MCvFont font = new MCvFont(Emgu.CV.CvEnum.FONT.CV_FONT_HERSHEY_SIMPLEX, 1.0, 1.0);
        foreach (MCvBlob blob in tracker)
        {
           img.Draw(Rectangle.Round(blob), new Gray(255.0), 2);
           img.Draw(blob.ID.ToString(), ref font, Point.Round(blob.Center), new Gray(255.0));
        }
        viewer.Image = img;
     });
     viewer.ShowDialog(); 
```

希望这可以帮助！

**编辑**

我认为您应该每十帧左右（大约每秒 3 次）使用此代码并执行以下操作：

```
 Capture capture = new Capture();

     ImageViewer viewer = new ImageViewer();

     BlobTrackerAutoParam param = new BlobTrackerAutoParam();
     param.ForgroundDetector = new ForgroundDetector(Emgu.CV.CvEnum.FORGROUND_DETECTOR_TYPE.FGD);
     param.FGTrainFrames = 10;
     BlobTrackerAuto tracker = new BlobTrackerAuto(param);
     int frames = 0;
     Application.Idle += new EventHandler(delegate(object sender, EventArgs e)
     {
        frames++;//Add to number of frames
        if (frames == 10)
        {
        frames = 0;//if it is after 10 frames, do processing and reset frames to 0
        tracker.Process(capture.QuerySmallFrame().PyrUp());
        Image<Gray, Byte> img = tracker.GetForgroundMask();
        //viewer.Image = tracker.GetForgroundMask();

        int blobs = 0;

        MCvFont font = new MCvFont(Emgu.CV.CvEnum.FONT.CV_FONT_HERSHEY_SIMPLEX, 1.0, 1.0);
        foreach (MCvBlob blob in tracker)
        {
           //img.Draw(Rectangle.Round(blob), new Gray(255.0), 2);
           //img.Draw(blob.ID.ToString(), ref font, Point.Round(blob.Center), new Gray(255.0));
           //Only uncomment these if you want to draw a rectangle around the blob and add text
           blobs++;//count each blob
        }
        blobs = /*your counter here*/;
        blobs = 0; //reset 
        viewer.Image = img;//get next frame
     });
     viewer.ShowDialog(); 
```

**编辑 2**

听起来您只想识别 blob，听起来像您想要`McvBlob.ID`的。这是 blob 的 ID，您可以检查哪些 ID 仍然存在，哪些不存在。我仍然会每十帧执行一次，以免减慢速度。您只需要一个简单的算法来观察 ID 是什么，以及它们是否已更改。我会将 ID 存储在 a 中`List<string>`，并每隔几帧检查一次该列表是否有更改。例子：

```
List<string> LastFrameIDs, CurrentFrameIDs;

         Capture capture = new Capture();

     ImageViewer viewer = new ImageViewer();

     BlobTrackerAutoParam param = new BlobTrackerAutoParam();
     param.ForgroundDetector = new ForgroundDetector(Emgu.CV.CvEnum.FORGROUND_DETECTOR_TYPE.FGD);
     param.FGTrainFrames = 10;
     BlobTrackerAuto tracker = new BlobTrackerAuto(param);
     int frames = 0;
     Application.Idle += new EventHandler(delegate(object sender, EventArgs e)
     {
        frames++;//Add to number of frames
        if (frames == 10)
        {
        frames = 0;//if it is after 10 frames, do processing and reset frames to 0
        tracker.Process(capture.QuerySmallFrame().PyrUp());
        Image<Gray, Byte> img = tracker.GetForgroundMask();
        //viewer.Image = tracker.GetForgroundMask();

        int blobs = 0, i = 0;

        MCvFont font = new MCvFont(Emgu.CV.CvEnum.FONT.CV_FONT_HERSHEY_SIMPLEX, 1.0, 1.0);
        foreach (MCvBlob blob in tracker)
        {
           i++;
           //img.Draw(Rectangle.Round(blob), new Gray(255.0), 2);
           //img.Draw(blob.ID.ToString(), ref font, Point.Round(blob.Center), new Gray(255.0));
           //Only uncomment these if you want to draw a rectangle around the blob and add text
           CurrentFrameIDs.Add(blob.ID.ToString());
           if (CurrentFrameIDs[i] == LastFrameIDs[i])
               img.Draw(Rectangle.Round(blob), new Gray(0,0), 2);//mark the new/changed blob
           blobs++;//count each blob
        }
        blobs = /*your counter here*/;
        blobs = 0; //reset 
        i = 0;
        LastFrameIDs = CurrentFrameIDs;
        CurrentFrameIDs = null;
        viewer.Image = img;//get next frame
     });
     viewer.ShowDialog(); 
```

# ruby-on-rails - Ominiauth Youtube 登录 - 重定向以在 401 nolinkedoutubeaccount 上创建 youtube 频道

> ID：14206700
> 
> 赞同：0
> 
> 时间：2013-01-08T00:57:48.670
> 
> 标签：ruby-on-rails, error-handling, youtube, youtube-api, omniauth

我正在使用omniauth youtube和google oauth2 gems通过youtube登录。这一切都很好，但前提是用户已经使用他们尝试登录的帐户创建了一个 youtube 频道。

当用户尝试在没有创建 youtube 频道的情况下登录和授权时，它会出错并显示以下消息：

```
OAuth2::Error

    <HTML>
    <HEAD>
    <TITLE>NoLinkedYouTubeAccount</TITLE>
    </HEAD>
    <BODY BGCOLOR="#FFFFFF" TEXT="#000000">
    <H1>NoLinkedYouTubeAccount</H1>
    <H2>Error 401</H2>
    </BODY>
    </HTML> 
```

我该如何处理此错误，以便将用户发送到他们的 youtube 帐户，在那里他们可以创建他们的 youtube 频道，然后使用有效的登录凭据被重定向回该站点，或者被发送回一个页面，该页面提供了有关如何操作的说明创建一个 youtube 频道并重试？

我的代码如下：

用户.rb

```
def self.from_omniauth(auth)
    where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
      user.provider = auth.provider
      user.uid = auth.uid
      user.name = auth.info.name
      user.email = auth.info.email
      user.oauth_token = auth.credentials.token
      user.oauth_expires_at = Time.at(auth.credentials.expires_at)
      user.picture = auth.info.image
      user.save!
      end
    end 
```

会话控制器：

```
def create
      user = User.from_omniauth(env["omniauth.auth"])
      session[:user_id] = user.id
      redirect_to root_path, notice: "Signed in"
    end

    def destroy
      session[:user_id] = nil
      redirect_to root_path, notice: "Signed out"
    end

    def failure
    end 
```

登录表单

```
<% if current_user %>
        Logged in as <b><%= current_user.name %></b>
            <%=  image_tag current_user.picture %><br>
            <%= link_to "Sign out", signout_path %>
        <% else %>
            Sign in with <%= link_to image_tag('youtube.png'), "/auth/youtube" %>
        <% end %> 
```

路线

```
match 'auth/youtube/callback', to: 'sessions#create'
  match 'auth/failure', to: redirect('/')
  match 'signout', to: 'sessions#destroy', as: 'signout' 
```

**更新** 我在一个小博客的帮助下得到了这个工作，我将链接到这个地址。此解决方案将失败消息添加到 auth/failure 路由的 url，并正确重定向到带有说明的 youtube 链接页面。

我将以下内容添加到omniauth.rb

```
OmniAuth.config.on_failure do |env|
  exception = env['omniauth.error']
  error_type = env['omniauth.error.type']
  strategy = env['omniauth.error.strategy']

  Rails.logger.error("OmniAuth Error (#{error_type}): #{exception.inspect}")
    #ErrorNotifier.exception(exception, :strategy => strategy.inspect, :error_type => error_type)

  new_path = "#{env['SCRIPT_NAME']}#{OmniAuth.config.path_prefix}/failure?message=#{error_type}"

  [301, {'Location' => new_path, 'Content-Type'=> 'text/html'}, []]
end 
```

在 auth/failure url 中显示授权错误并将其添加到我的 routes.rb

```
match 'auth/failure', to: 'static_pages#youtube' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:24:04.547

嗯...您可以为模型函数设置条件

```
if user = User.find_by_id(id)
  user
else 
  //procceed with your code to link the account to utube 
```

# android - AsyncTask onPostExecute NullPointerException

> ID：14206706
> 
> 赞同：0
> 
> 时间：2013-01-08T00:58:19.763
> 
> 标签：android, android-asynctask

我已经创建了两个`AsyncTask`，但是当我将第一个异步任务的输出（即 Geopoint）作为输入传递给第二个异步任务时，它为空 这是我的代码。

```
String input=EnterYourSearch.getText().toString();
Geopoint point_to_be_send;
     get_location.execute(input);       
     getplaces.execute(point_to_be_send);
        public class Getlocation extends AsyncTask<String, String, Geopoint> 
        { 
          @Override
          protected Geopoint doInBackground(String... params) {
            jsonobject=JsonRequest.getLocationInfo(params[0]);   
            point=JsonRequest.getLatLong(jsonobject);     
            return point;    
          }
          @Override
          protected void onPostExecute( Geopoint point) {
            if(point.lat !=0)
            {
              //check=false;
              point_to_be_send=point;
            }
          }
        }
    public class Getplaces extends AsyncTask<Geopoint, String, Boolean>
        {

            @Override
            protected Boolean doInBackground(Geopoint... params) {
                // TODO Auto-generated method stub
                 googleplaces=new Googleplaces();

                       try {
                        googleplaces.search(params[0].lat, params[0].lon, 1000, null);
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        Log.d("Error", e.toString());
                        e.printStackTrace();
                    }
                    return true;

                    } 
```

这是 Geopoint 类

```
public class Geopoint {

    public double lat;
    public double lon;
    public Geopoint(double i, double j) {
        // TODO Auto-generated constructor stub
        lat=i;
        lon=j;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:30:14.740

您未能初始化`point_to_be_send`
添加类似这样的内容

```
Geopoint point_to_be_send = new Geopoint(myDoubleI, myDoubleJ); 
```

`point_to_be_send is null`这就是为什么你得到例外。

# foursquare - FourSquare 场地搜索使用类别

> ID：14206718
> 
> 赞同：1
> 
> 时间：2013-01-08T00:59:34.027
> 
> 标签：foursquare

当我使用 FourSquare 的搜索 API 时，我看到了一些奇怪的行为。我正在建设的网站列出了所有夜总会地点 (www.nationalvip.com)

当我使用 5 个类别进行搜索时：

```
// 4bf58dd8d48988d121941735 - lounge
// 4bf58dd8d48988d11f941735 - nightclub
// 4bf58dd8d48988d1e7931735 - jazz club
// 4bf58dd8d48988d1e9931735 - rock club
// 4bf58dd8d48988d1d8941735 - gay clubs 
```

一些属于以下类别的夜总会：4bf58dd8d48988d1d8941735 没有出现。

所以像这样查询：

```
/v2/venues/search?categoryId=4bf58dd8d48988d121941735,4bf58dd8d48988d11f941735,4bf58dd8d48988d1d8941735,4bf58dd8d48988d1e9931735,4bf58dd8d48988d1e7931735&ll=47.6097,-122.3331&radius=10000&intent=browse&v=20120801 
```

省略这个地点：

```
https://foursquare.com/v/last-supper-club/40b13b00f964a520a7f61ee3 
```

当我自己使用该类别时，他们会这样做。

```
...?categoryId=4bf58dd8d48988d1d8941735&ll=47.6097,-122.3331&radius=10000&intent=browse&v=20120801 
```

我尝试重新排列类别。我真的很想避免使用各种类别多次调用 API。

有没有其他人看到这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T05:50:19.793

你的问题是位置。您提供的 ll 参数是针对旧金山的一个位置，但您希望出现的地点位于西雅图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T15:44:31.470

你可以将限制增加到 100 我已经做到了，半径达到 100000 米（100 公里）

# sql - 将选择语句插入表中 - ORA-06502

> ID：14206723
> 
> 赞同：0
> 
> 时间：2013-01-08T01:00:37.153
> 
> 标签：sql, plsql, oracle11g

我有 6 个测试环境和 1 个生产环境。我创建了很多不同的报表作为 Oracle 视图，并且需要一种在环境之间同步这些报表的方法。

我正在尝试制作一个可以运行的脚本，它基本上会输出一个命令列表，我可以将这些命令复制并粘贴到我的不同环境中，以创建必要的视图/公共同义词和权限。

我必须将生成的文本放入数据库表中，因为`dbms_output.put_line`它可以显示多少个字符有一定的限制。

我有以下内容，但如果我尝试插入数据，我会得到`ORA-06502: PL/SQL: numeric or value error`. 我猜这可能与没有被转义的字符文字有关。

```
CREATE OR REPLACE PROCEDURE EXPORT_REPORTS AS
  statements CLOB;
  tmp_statement CLOB;

  CURSOR all_views IS
     SELECT
      OWNER,
      VIEW_NAME,
      TEXT
    FROM
      ALL_VIEWS
    WHERE
      OWNER = 'PAS'
  ;
BEGIN
  FOR v IN all_views LOOP
    tmp_statement := 'CREATE OR REPLACE FORCE VIEW "' || v.OWNER || '"."' || v.VIEW_NAME || '" AS ' || CHR(13) || CHR(10) || v.TEXT;
    statements := statements || tmp_statement;
  END LOOP;
  EXECUTE IMMEDIATE 'INSERT INTO VIEW_EXPORTS VALUES ('''|| statements || ''')';
END EXPORT_REPORTS; 
```

知道我能做些什么来尝试解决这个问题吗？如果是因为`statements`变量中的某些文本包含单引号，那么在将数据插入表之前如何进行转义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:49:18.830

这听起来像是 Data Pump 的工作。

Oracle 数据泵技术支持将数据和元数据从一个数据库高速移动到另一个数据库。

[http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_overview.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_overview.htm)

为了获取数据库对象 DDL，我建议使用 DBMS_METADATA 包。

[http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_metada.htm#BGBDJAHH](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_metada.htm#BGBDJAHH)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T02:54:36.547

您不能将 CLOB 用作局部变量的数据类型。改用 VARCHAR

# java - 如何获得图像的分辨率（PPI）

> ID：14206725
> 
> 赞同：0
> 
> 时间：2013-01-08T01:00:47.903
> 
> 标签：java, image, resolution, java-2d, javax.imageio

> **可能重复：**
> [如何为新的 JPG 图像定义 DPi？](https://stackoverflow.com/questions/5077189/how-to-define-dpi-for-a-new-jpg-image)

有没有办法在 Java 中获得图像的分辨率（每英寸像素数）？使用本机 API 或第三方库。我不仅想要图像的高度和宽度，还想要决定图像输出质量的分辨率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T01:22:27.490

图像只有像素。它没有ppi。
显示器、图像传感器和打印机都有 ppi，因为它们都有与可测量距离相关的点/像素（以英寸为单位）。

ppi 是每英寸像素的缩写，因此是像素密度的度量。

有关 ppi / dpi 的计算，请参阅[http://en.wikipedia.org/wiki/Dots_per_inch](http://en.wikipedia.org/wiki/Dots_per_inch)
您只需将像素或点数除以输出设备或相纸具有的英寸数。
但如果需要点或像素，请小心。

# php - MySQL while 用于日期循环

> ID：14206729
> 
> 赞同：0
> 
> 时间：2013-01-08T01:01:05.417
> 
> 标签：php, mysql, loops

我希望运行 mysql 查询并将一系列日期的匹配行数添加到数组中。为了更好地说明这一点，我有一个包含日期、客户电话号码和特定呼叫信息的数据库。我需要运行一个查询，该查询查看过去三十天的每一天，并将该客户当天的呼叫总数添加到数组中。因此，如果我的客户今天有 20 个调用，昨天有 15 个，前一天有 10 个调用，持续 30 天，我需要一个看起来像这样的数组 [20, 15, 10 ...]。

到目前为止我有这个，但无法弄清楚如何让它每天重复并将它添加到一个数组中。

```
"SELECT COUNT(*) FROM db WHERE inbound='$client' AND calldate=$date(*this may need to go)" 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:03:13.060

您可以使用`GROUP BY calldate`按通话日期解析计数：

```
SELECT calldate, COUNT(*) FROM db
  WHERE inbound='$client'
  GROUP BY calldate ORDER BY calldate DESC 
```

为了您的安全，我正在添加`calldate`查询。想象一下客户昨天没有打电话，那么你不想跳过那一天。确保检查`calldate`您的 php 代码中的 from 。

编辑：

这是一篇博客文章，展示了如何在 php 中循环遍历结果集的示例：http: [//blog.mclaughlinsoftware.com/2012/07/14/phpmysql-query/](http://blog.mclaughlinsoftware.com/2012/07/14/phpmysql-query/)

# varnish - 动态添加或删除后端主机到 Varnish

> ID：14206734
> 
> 赞同：3
> 
> 时间：2013-01-08T01:01:33.487
> 
> 标签：varnish, varnish-vcl

在不停机的情况下，以编程方式将单个后端服务器添加到/从 Varnish 控制器中删除的最佳方法是什么？我一直在寻找一个很好的例子，但找不到。

我希望能够根据需求上下扩展我的后端服务器。

谢谢！

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:38:32.973

虽然它不是添加后端的最优雅甚至动态的方式，但我会通过在单独的 VCL 中定义后端并将其包含在`default.vcl`使用中来解决这个问题

```
include "backend.vcl"; 
```

您在哪里定义后端和主管。例如

```
probe healthcheck {
   .url = "/online";
   .interval = 15s;
   .timeout = 0.3 s;
   .window = 3;
   .threshold = 1;
   .initial = 1;
}

backend web1 {
  .host = "10.1.2.1";
  .port = "80";
  .connect_timeout = 300s;
  .first_byte_timeout = 5000s;
  .between_bytes_timeout = 300s;
  .probe = healthcheck;
}

director backendpool round-robin {
  { .backend = web1; }
} 
```

并使用`backendpool`作为后端。然后使用 shell 脚本、ssh、自定义守护程序或任何最适合您需要的方法，`backend.vcl`通过添加后端和重新加载 Varnish 来更新。

这种方法的问题在于 Varnish 实际上并没有删除已从`backend.vcl`. 即使它们没有被使用，Varnish 也会继续探测它们。从长远来看，这可能会导致意外行为。如果重新使用后端名称，至少后端运行状况探测的结果会变得混乱。例如，在上述示例中多次重命名`web1`后端，然后将其主机更改为无效主机后，以下是在仅定义了有效后端`Backend_health`的情况下恢复到上述配置后的轮询结果。`web1`

```
0 Backend_health - web1 Still healthy 4--X-RH 3 1 3 0.001141 0.001055 HTTP/1.1 200 OK
0 Backend_health - web1 Still sick ------- 0 1 3 0.000000 0.000000
0 Backend_health - web2 Still healthy 4--X-RH 3 1 3 0.001061 0.001111 HTTP/1.1 200 OK
0 Backend_health - web3 Still healthy 4--X-RH 3 1 3 0.001007 0.001021 HTTP/1.1 200 OK 
```

Varnish 2.1有[一个更精细的后端处理补丁](http://monolight.cc/2010/08/backend-control-in-varnish/)，但据我所知，它不适用于 Varnish 3。

# git - 用于查看特定功能分支何时合并到集成分支的 Git 命令

> ID：14206735
> 
> 赞同：0
> 
> 时间：2013-01-08T01:01:34.270
> 
> 标签：git

我知道我可以使用 git log --graph 功能来执行此操作，但这提供了太多信息。

是否有一个 git 命令可以告诉您特定分支名称何时以及由谁合并到集成分支中？

或者可能是一种修改 git log --graph 以仅显示这两个分支的方法 - 我指定的集成分支和功能分支。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:04:56.477

> 或者可能是一种修改 git log --graph 以仅显示这两个分支的方法 - 我指定的集成分支和功能分支。

听起来这个`--branches[=<pattern>]`选项会让你得到你想要的。从帮助页面：

> ```
> Pretend as if all the refs in refs/heads are listed on the command line as
> <commit>. If <pattern> is given, limit branches to ones matching given shell
> glob. If pattern lacks ?, *, or [, /* at the end is implied. 
> ```

# php - 在 php 中创建自己的音频验证码

> ID：14206736
> 
> 赞同：1
> 
> 时间：2013-01-08T01:01:37.200
> 
> 标签：php, captcha, audioformat

我想在php中制作一点音频验证码，所以我需要将文本转换为语音，但我有两个限制：

首先它应该是一个 php 解决方案。创建一个 mp3/ogg 就可以了，它可以插入并使用音频标签等播放。

其次，我只需要使用 ftp-access 将它安装在服务器上。所以，我不能使用 php 会说话的标准应用程序。

所以，我已经研究了一些解决方案：

Jquery 的 Jtalk 可以大声朗读文本，但在这里有点不切实际，因为 javascripts 始终是开源的 => 验证码在源代码中很简单。

谷歌也有一个可以大声说话的 Api。但是，您需要使用文本作为 url 的一部分来调用 extern 文件。因此，收听传出的请求也将揭示验证码。

我尝试使用 php 组合我自己的音频文件。我在这里读过一些帖子，很多玩家只支持一个`echo file_get_contents['audio1.ogg'].file_get_contents['audio2.ogg'];`解决方案。但是，使用 Firefox 中的插件，只会播放第一个文件。在 VLC 中下载和播放会显示两个音频文件。我对这个也不是很满意，即使它会起作用，因为人们可以将 ogg-source 与字母相关联并通过切片音频源代码来识别验证码......我也想过加载所有音频标签中的字母并根据需要播放它们，但这将再次显示网络源代码中的验证码。

最后我听说了“flite”，它承诺能够做所有这些事情，但我想我有点误会了，它需要直接安装在服务器上，而不是仅仅将几个文件放在 ftp 上。

那么，有没有人知道如何制作一个只有 ftp-access 的文本到语音解决方案，而不用将文本作为 url 的一部分联系其他网站？

问候，朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:39:26.120

因此，我编写了一个结合了 javascript 和 php 的解决方案，这很符合我的口味，并且可以进行修改以提高安全性（例如添加噪音或每个声音文件包含一个字母以外的其他内容）。

它的工作原理是这样的：您设置一个声音文件夹，每个 htaccess 受保护，只允许 captcha.php-script 获取文件。您要显示的每个字母都有一个文件。该脚本还可以通过会话、数据库或受保护文件访问验证码，并具有指向当前读取位置的指针。每次访问时，它都会返回下一封信的音频。这可以通过例如完成

```
echo file_get_contents('sounds/'.$_SESSION["curaudio"].'.ogg'); 
```

然后你只需要将音频元素插入到你的 html 中：

```
<audio hidden id="Sound_captcha">
    Your browser does not support the audio element.
</audio> 
```

并使用 javascript 切换到下一个字母。为此，请使用音频的 src 属性并提供您的 captcha.php 文件的地址。请记住添加一个值以防止缓存：

`"captcha.php?"+(new Date()).getTime()`

您可以调用`play()`audio-element 的 -function 来播放文件。

要切换到下一个，需要每个文件保持固定的时间（非常不安全）或使用`ended`音频元素的 -event。

当然，您的 php 脚本最后还应该告诉验证码何时已被完全读取（例如，与另一个需要 ajax 请求的脚本一起读取，或者例如，产生声音的脚本只在每一个奇怪的地方访问，否则状态，或脚本在开始时告诉您需要多少次重新加载...）

这实际上是针对基本播放器的全部内容，还需要对其进行修改以防止机器人轻松访问……但是，在我看来，这至少与标准文本验证码一样安全，并且为眼睛有问题的人。

# wix - 在 Wix 中修改 WixUI_Font_Title

> ID：14206738
> 
> 赞同：1
> 
> 时间：2013-01-08T01:01:43.497
> 
> 标签：wix

有谁知道，如何/如果我可以更改默认的 WixUI_Font_Title。我不想将所有表单添加到我的 wix 项目中，只是为了给他们的标题一个新的文本样式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:56:46.400

`WixUI_Font_Title`文本样式只是定义在其中`*.wxs`描述 UI 元素，但它仅用于`*.wxl`为各种语言保留标题的文件中。所以，如果我是你，我会走以下路：

*   在您的 WiX 源中定义您需要的文本样式，例如`WixUI_NewFont_Title`
*   编写自定义 en-us WXL 文件，其中包括引用所需标题字体的所有文本
*   对您必须支持的每种语言重复上一步

# php - 带有 phpexcel 的单元格选择器，发出超过 20 个项目

> ID：14206739
> 
> 赞同：1
> 
> 时间：2013-01-08T01:01:52.380
> 
> 标签：php, phpexcel

大家好，我有一个问题`phpexel`，问题是当我创建一个 xls 文件时，我想创建一个选择器单元格，所以它可以很好地处理 20 个项目，但是当它变得更大时，exel 只返回一个值 0。我的代码如下：

```
 $blocksList = implode (", ", $unit);
      //Data Validation list
    $objValidation = $objPHPExcel->getActiveSheet()->getCell('D1')->getDataValidation();

    $objValidation->setType(PHPExcel_Cell_DataValidation::TYPE_LIST);

    $objValidation->setErrorStyle(PHPExcel_Cell_DataValidation::STYLE_INFORMATION);

    $objValidation->setAllowBlank(true);

    $objValidation->setShowDropDown(true);

    $objValidation->setErrorTitle('Input error');

    $objValidation->setError('Value is not in list');

    $objValidation->setFormula1('"'.$blocksList.'"'); 
```

任何建议都会对我有用，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T07:28:22.233

MS Excel 中的单元格验证列表有 255 个字符的限制，因此您可能会超出此限制，但您始终可以使用 LOOKUP 公式而不是验证器中的列表

# css - 如何防止链接在 CSS megamenu div 中换行（继承问题）

> ID：14206741
> 
> 赞同：0
> 
> 时间：2013-01-08T01:02:12.470
> 
> 标签：css, menu, megamenu

我正在尝试创建一个 megamenu（参见小提琴： http: [//jsfiddle.net/BKHNk/](http://jsfiddle.net/BKHNk/)），但我遇到的问题是当我将链接放在从菜单中飞出的 <div> 中时。菜单 1 下的下拉菜单是我希望它看起来的样子，但是一旦我将文本转换为菜单 2 中所示的链接，所有格式都会变得混乱。我认为问题在于链接正在继承属性，但我不知道防止这种情况发生的最佳方法。

基本上，我希望宽度根据内容尽可能地减小。部分文本应位于一行。小节项目都应该在自己的行中，每个小节文本（但不是逗号）作为链接。同样，基本上与菜单 1 的外观完全相同。

我还尝试将小节项目更改为无序列表，但这变得更加复杂，我认为没有*必*要这样做。

任何人都可以帮我弄清楚是什么使第二行中的所有文本都被继承以及如何防止它发生？谢谢！

HTML 代码如下：

```
<ul id="menu">
  <li> <a href="#">Menu 1</a>
    <div class="dropdown">
      <div class="section">Section goes here</div>
      <div class="subsection">Subsection 1, Subsection 2, Subsection 3</div>
      <div class="rule"></div>
    </div>
  </li>
  <li> <a href="#">Menu 2</a>
    <div class="dropdown">
      <div class="section"><a href="#">Section goes here</a></div>
      <div class="subsection"><a href="#">Subsection 1</a>, <a href="#">Subsection 2</a>, <a href="#">Subsection 3</a></div>
      <div class="rule"></div>
    </div>
  </li>
</ul> 
```

下面的CSS：

```
#menu {
  font-family: sans-serif;
  list-style:none;
  height: 32px;
  width: 200px;
  background: #888;
}
#menu li {
  float:left;
  display:block;
  text-align:center;
  position:relative;
  padding: 5px;
  margin:5px;
}
#menu li a {
  color: black;
  display:block;
  text-decoration:none;
}
#menu li:hover a {
  color:#ccc;
}
.dropdown {
  margin:4px auto;
  float:left;
  position:absolute;
  left:-999px;
  text-align:left;
  padding:10px;
  background:#aaa;
  width: auto;
  white-space:nowrap;
}
#menu li:hover .dropdown {
  left:0px;
  top:auto;
}
.rule {
  height: 2px;
  width: 100%;
  background-color: red;
}
.section {
  font-weight:bold;
}
.subsection {
font-size: 75%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:12:44.640

此行导致您的问题：

```
#menu li a {
  color: black;
  display:block;
  text-decoration:none;
} 
```

这使得作为列表项的子项的所有链接都显示为块，这会导致您看到的垂直堆叠。

将该选择器更改为`#menu li > a`，您就可以开始了。[在 JSFiddle 上查看。](http://jsfiddle.net/xrFnb/)这样做只是将样式应用于作为列表项的*直接*子项的链接。

# c# - 有没有办法使用电子邮件地址作为用户名？

> ID：14206744
> 
> 赞同：0
> 
> 时间：2013-01-08T01:02:23.653
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, membership-provider, simplemembership

我在 asp.net mvc 4 应用程序中使用简单的会员资格提供程序。我很新，正在学习 asp.net mvc 平台。我想知道是否有一种简单的方法可以让访问者使用他们的电子邮件地址作为他们的用户名？

是否像将标签更改为电子邮件并对输入进行验证以确保它是电子邮件地址一样简单？

有没有正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T06:28:32.213

会员 API 中的用户名没有任何规定。您可以简单地使用电子邮件地址来填充电子邮件地址字段和用户名字段。当需要时，我已经做了几次。

此外，您可以使用 DataType.EmailAddress 枚举将属性标识为 ViewModel 中的电子邮件地址，验证框架将为您处理检查。

```
using System.ComponentModel.DataAnnotations;

public class AccountCreateViewModel
{
    [DataType(DataType.EmailAddress)]
    public string UserName { get; set; }
    /* ... */
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:19:37.337

您可以将用户名保留为字符串并使用此正则表达式对其进行验证：

```
^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$ 
```

# android - Android - 在为 Nook 平板电脑配置新的 AVD 后，运行它时出现错误

> ID：14206745
> 
> 赞同：0
> 
> 时间：2013-01-08T01:02:26.280
> 
> 标签：android

我为运行 Android 操作系统的 Nook 设备（来自 Barnes and Noble）添加了两个模拟器。

配置后，我尝试运行它，但在选择要运行的 AVD 后几乎立即出现此运行时错误：

```
[2013-01-07 16:59:15 - Emulator] Failed to allocate memory: 8
[2013-01-07 16:59:15 - Emulator] 
[2013-01-07 16:59:15 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
[2013-01-07 16:59:15 - Emulator] Please contact the application's support team for more information. 
```

有谁知道为什么会发生这种情况以及我能做些什么来解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T02:17:56.963

如果您遇到问题，例如

> 分配内存失败：8

这通常意味着 AVD 无法获得足够的内存来完全运行。一个好的第一步是打开 ADV 管理器，并编辑您的 AVD，使其使用更少的 RAM。我的配置是 512MB，但可以理解的是，这会因机器而异，从 256MB 开始，向上处理是个好主意。

![AVD 内存](../Images/cef81bc2bc316e094c59c8638d404c57.png)

如果现在仍然失败，请使用命令行/终端运行模拟器

```
emulator -avd -yourAVDName 
```

并查看是否产生任何日志。如果有的话，你有一个更具体的原因来解释为什么 AVD 不工作并且可以做更多的调查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:39:31.723

发生内存问题是因为在 Windows 上，模拟器作为 32 位进程运行，因此它只获得 2GB 的用户内存，显然，这不足以同时支持大内存和大屏幕。

我通过将 emulator-arm.exe 标记为 largeaddressaware 为自己解决了这个问题，这将可用内存增加到 3GB。

这可以使用作为 Visual Studio 的一部分提供的 editbin.exe 来完成。

```
editbin /largeaddressaware <path-to-android-sdk>\tools\emulator-arm.exe 
```

该 exe 未签名，因此不会直接抱怨。尽管如此，使用它需要您自担风险，因为它只是一种 hack，如果应用程序实际上并没有准备好正确处理超过 2GB 限制的地址，它可能会带来问题。

至于我，这是我可以运行具有 WXGA800 分辨率的 android-17 (4.2) 的唯一方法，否则即使将内存减少到 256MB 也不起作用。

顺便说一句，更改很容易恢复，只需运行以下命令：

```
editbin /largeaddressaware:no <path-to-android-sdk>\tools\emulator-arm.exe 
```

# proxy - 设置代理链的工具

> ID：14206747
> 
> 赞同：2
> 
> 时间：2013-01-08T01:02:37.413
> 
> 标签：proxy, chaining

我们正在尝试在我们的开发系统中设置代理服务器链。我们想通过这些代理连接到服务。我们考虑的原因`proxy chaining`是所有系统都没有连接到服务。所以我们认为我们将在一个系统上运行一个代理，该代理将连接到另一个系统上的代理，依此类推。

```
Client ---> A (Proxy)--->B(proxy)---->Final destination 
```

您能否建议一些工具来实现这一目标？我们拥有的服务是基于 SOAP 的`secured`Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:07:06.503

有一个名为 ProxyChain 的开源应用程序，这里是这个项目的自述文件：http: [//proxychains.sourceforge.net/howto.html](http://proxychains.sourceforge.net/howto.html)

您可以使用此开源软件安装尽可能多的代理链，您可以根据您的要求对其进行配置。您也可以以某种方式使用一些端口转发。SOAP 请求的客户端是什么？它是 Web 应用程序还是桌面应用程序？

# ios - 如果 UITableViewController 添加到其他 UIView，委托如何工作？

> ID：14206750
> 
> 赞同：1
> 
> 时间：2013-01-08T01:03:02.823
> 
> 标签：ios, uiview, uitableview

我想在 UIView 中显示 UITableViewController，我有一个解决方法，但我想了解它为什么会这样工作。

这是场景的样子： - 创建了一个新的单视图应用程序
- 在 IB 中向主视图添加了一个视图
- 为视图创建了一个出口：

```
@property (weak, nonatomic) IBOutlet UIView *placeholderView; 
```

- 向项目添加了带有 XIB 的新 UITableViewController
- 将 numberOfSectionsInTableView 更改为返回 1，将 numberOfRowsInSection 更改为返回 10，并将 cellForRowAtIndexPath 更改为：

```
cell.textLabel.text = @"hello"; 
```

- 在 ViewController 文件中的 ViewDidLoad 方法：

```
ORGTableViewController *tableView = [[ORGTableViewController alloc] initWithNibName:@"ORGTableViewController" bundle:nil];

[self.placeholderView addSubview:tableView.tableView]; 
```

现在表格出现在 placeholderView 但它是空的。在 TableViewController 文件中调用 InitWithStyle 和 ViewDidLoad 方法。但是没有调用 numberOfSectionsInTableView、numberOfRowsInSection 和 cellForRowAtIndexPath。

还尝试在 AppDelegate 中将此代码添加到 didFinishLaunchingWithOptions 方法，并且它 -<em>按预期工作，出现带有文本的单元格：

```
ORGTableViewController *tableViewController = [[ORGTableViewController alloc] initWithNibName:@"ORGTableViewController" bundle:nil];

self.window.rootViewController = tableViewController; 
```

所以它起作用了，当我将 UITableViewController 添加到 UIView 时，它看起来像委派搞砸了，解决方法很简单...... ViewController，viewDidLoad 方法：

```
ORGTableViewController *tableViewController = [[ORGTableViewController alloc] initWithNibName:@"ORGTableViewController" bundle:nil];
tableViewController.tableView.delegate = tableViewController;

[self.placeholderView addSubview:tableViewController.tableView]; 
```

你知道为什么委派会这样工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:11:49.687

你的问题本身就有答案。在第一个代码中，您没有像在第二个代码中那样设置删除，而是将委托设置为`tableViewController.tableView.delegate = tableViewController;`它将调用在`tableViewController`.

如果您打算在您的`placeholderView`类中实现委托方法，您需要将委托设置为``tableViewController.tableView.delegate = self;`，然后在`placeholderView`类中实现所有委托。那会奏效的。

如果只需要一个`UITableView`，也可以考虑将该类子`UITableView`类化，添加为 的子视图`placeholderView`。

# c - K&R 1-10，终端吃退格

> ID：14206753
> 
> 赞同：6
> 
> 时间：2013-01-08T01:03:42.870
> 
> 标签：c

K&R C 1-10 内容如下：

“编写一个程序将其输入复制到其输出，将每个制表符替换为 \t，将每个退格替换为 \b，将每个反斜杠替换为 \。这使得制表符和退格以明确的方式可见。”

我有以下代码，它不适用于退格字符，因为终端会吃掉这个字符。到目前为止，这本书中涵盖的材料似乎还没有解决方案。解决方案是什么？

```
#include <stdio.h>

main()
{
    int c;

    while((c = getchar()) != EOF) {

        switch (c) {
            case '\t':
                printf("\\t");
                break;
            case '\b':
                printf("\\b");
                break;
            case '\\':
                printf("\\\\");
                break;
            default:
                putchar(c);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T02:41:12.487

这是因为操作系统正在处理终端 IO，并在您的程序看到它们之前处理来自键盘的字符。

如果你在 Unix/Linux 系统上，你可以像这样包装你的程序的执行：

```
$ stty -icanon -echo; ./a.out; stty icanon echo 
```

这将禁用终端驱动程序以某些特定方式处理输入：icanon 启用退格处理等处理，而 echo 使您键入的字符被打印。由于您的程序会回显字符本身，因此您可以关闭回显。唯一的问题是 -i​​canon 也会停止 EOF 处理，因此您需要添加一个额外的条件才能退出循环：

```
#include <stdio.h>

#define CTRL(x) (x & 0x1f)

main()
{
    int c;

    while((c = getchar()) != EOF && c != CTRL('d')) {
... 
```

在测试这样的程序时在单独的窗口中运行它们也是一个好主意，这样如果您最终处于奇怪的终端模式，您可以快速轻松地终止整个会话！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T01:06:58.323

这里没有错。如果您要在包含退格字符的文件上运行此程序，它会正确转换它。对于终端输入，程序不会接收退格，因为它是由输入例程管理的。

# javascript - Youtube 播放器 API 和 jQuery 滑块

> ID：14206758
> 
> 赞同：1
> 
> 时间：2013-01-08T01:04:35.787
> 
> 标签：javascript, jquery, youtube-javascript-api

我正在使用 YouTube API 来获取视频的当前经过时间：`player.getCurrentTime();` 以及`player.getDuration();`功能；我在 jQuery 中设置了一个滑块，将最大值设置为`player.getDuration`，最小值设置为 0；

使用这两个函数，我构建了以下代码：

```
 var progress = setInterval(function(){
       $("#progressbar").slider({value: Math.floor(player.getCurrentTime())}); 
    },1000); 
```

这将使用 Youtube 视频的经过时间更新滑块。
问题是当我暂停视频时，滑块的值在较早的值和当前经过的时间 ( `player.getCurrentTime()`) 值之间闪烁。

有人可以解释吗？

**编辑：**这是在播放器播放状态下更新滑块并在播放器暂停状态下停止更新功能的正确代码：

```
 function playerStateChange(newState) {
     globalYtState = newState;
     if(newState == 0){
   $("#hSongSearcher").val('').trigger('keyup');
   setTimeout(playNextVideo(),1500);
     }
     if(newState == 2){
     clearInterval(progressUpdater);
     }
     if(newState == 1){
    progressUpdater = setInterval(function(){
     //console.log(Math.floor(player.getCurrentTime()));
    if(Math.floor($("#progressbar").slider('value')) != Math.floor(player.getCurrentTime())){
        $("#progressbar").slider({value: Math.floor(player.getCurrentTime())});
    }
                     $('.current_elapsed').html(getPropperDuration(Math.floor(player.getCurrentTime())));
            },1000);
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:26:04.070

因此，这可能对其他人有所帮助。我发现在运行这段代码时：

```
 $("progressbar").on('slidechange',function(event,ui) { ... 
```

在我的示例中，ui.value 似乎在当前 getCurrentTime() 值和可能的随机值之间闪烁？（我不知道该值的确切位置！但我知道一个可以解决该问题的好方法）；

所以我制作了一个变量来保存播放器每秒的当前时间，然后通过滑块的随机闪烁值，如下所示：

```
 if(newState == 1){
progressUpdater = setInterval(function(){
    ctime = Math.floor(player.getCurrentTime());
    $("#progressbar").slider("value", ctime);
    //Here starts the flickering fix
    $("#progressbar").on('slidechange',function(event,ui){
        //Fix Flcikering;
        if(ui.value < ctime){
            $("#progressbar").slider("value", ctime);
        }
    });
    //And here it ends.
    $('.current_elapsed').html(getPropperDuration(Math.floor(player.getCurrentTime())));
    },1000);
  } 
```

# python - 如何在 Amazon Elastic Beanstalk (Python) 中设置环境变量

> ID：14206760
> 
> 赞同：13
> 
> 时间：2013-01-08T01:04:49.933
> 
> 标签：python, amazon-web-services, environment-variables, amazon-elastic-beanstalk

我最近一直在开发一个 Django 应用程序，试图让它与 Amazon Elastic Beanstalk 一起工作。

在我的`.ebextensions/python.config`文件中，我设置了以下内容：

```
option_settings:
  - namespace: aws:elasticbeanstalk:application:environment
    option_name:  ProductionBucket
    value: s3-bucket-name
  - namespace: aws:elasticbeanstalk:application:environment
    option_name:  ProductionCache
    value:  memcached-server.site.com:11211 
```

但是，每当我查看服务器时，都没有设置这样的环境变量（因此，当我尝试时无法访问`os.getenv('ProductionBucket')`

我遇到了这个[这个页面](https://gist.github.com/808968)，它似乎试图记录所有的命名空间。我也尝试过`PARAM1`用作选项名称，但结果相似。

如何在 Amazon Elastic Beanstalk 中设置环境变量？

**编辑**：
我还尝试在所有其他仅导出环境变量的命令之前添加一个命令：

```
commands:
 01_env_vars:
  command: "source scripts/env_vars" 
```

...这也没有成功

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T01:08:31.527

我遇到了同样的问题。

信不信由你，您必须在部署之前将`.ebextensions`目录和所有`*.config`文件提交给版本控制，以便它们在服务器上显示为环境变量。

为了使敏感信息不受版本控制，您可以使用如下配置文件：

```
option_settings:
  - option_name: API_LOGIN
    value: placeholder
  - option_name: TRANS_KEY
    value: placeholder
  - option_name: PROVIDER_ID
    value: placeholder 
```

然后在 AWS 管理面板（配置 > 软件配置 > 环境属性）中编辑配置并更新那里的值。

您可能还会发现[此答案](https://stackoverflow.com/a/14491294/274695)很有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-18T23:07:47.117

**选项1：**

您可以使用设置环境变量`eb setenv FOO=bar`

您可以使用查看环境变量`eb printenv`

**选项 2：**

您可以在 .ebextensions 目录中创建一个配置文件，例如`00_environment.config`. 然后，像这样添加环境变量：

`option_settings: - option_name: MY_FIRST_ENV_VAR value: abc - option_name: ANOTHER_ENV_VAR value: 123`

但是，如果您有多个环境，我发现使用选项#1 直接设置环境变量更有用。

我还发现这些`eb config`命令很有帮助：[http ://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-config.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-config.html)

这些命令允许您获取、放置、列出或删除您的 eb 环境中的配置文件。

该命令`eb config get`会将您的配置（包括环境变量）保存到`.elasticbeanstalk/saved_configs`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-18T13:36:41.637

我执行了以下操作以获取我在非容器阶段在 cloudformation 中配置的环境变量，例如常规命令

```
/opt/elasticbeanstalk/bin/get-config environment | python -c "import json,sys; obj=json.load(sys.stdin); f = open('/tmp/eb_env', 'w'); f.write('\n'.join(map(lambda x: 'export ' + x[0] + '=' + x[1], obj.iteritems())))" 
```

执行此命令后，您将在 /tmp/eb_env 中拥有一个包含所有环境变量的文件。只需在需要环境变量的命令之前执行以下命令

```
source /tmp/eb_env 
```

例子

```
source /tmp/eb_env && echo $MY_CUSTOM_ENV 
```

在 elastic beanstalk 的配置文件中，如下所示：

```
commands:
    02-make-sure-we-can-get-our-env-in-the-instance-itself:
        command: "/opt/elasticbeanstalk/bin/get-config environment | python -c 'import json,sys; obj=json.load(sys.stdin); f = open(\'/tmp/eb_env\', \'w\'); f.write(\'\n\'.join(map(lambda x: \'export \' + x[0] + \'=\' + x[1], obj.iteritems())))'" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T20:23:08.677

我检查了使用现代（即非旧版）容器，并在 /opt/elasticbeanstalk/deploy/configuration/containerconfiguration 下找到它作为 json 文件。

行为似乎是平台相关的：我记得特别是在 PHP 中，它还创建了一些带有值的 shell 脚本。

不管怎样，请查看 /opt/elasticbeanstalk/hooks/configdeploy。

再次是 Java 案例，它运行这个 python 脚本，对你来说看起来很方便：

[https://gist.github.com/19c1e4b718f9a70a4ce1](https://gist.github.com/19c1e4b718f9a70a4ce1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-11T11:50:16.480

我知道这是一个老问题，但对于那些仍然像我一样有同样问题的人来说，AWS 文档中的解决方案是：[https ://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environments-cfg-softwaresettings .html](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environments-cfg-softwaresettings.html)

> 在 Elastic Beanstalk 控制台中配置环境属性
> 
> 1.  打开[Elastic Beanstalk 控制台](https://console.aws.amazon.com/elasticbeanstalk)，然后在区域下拉列表中选择您的区域。
>     
>     
> 2.  在导航窗格中，选择**Environments**，然后在列表中选择您的环境名称。
>     
>     
> 3.  在导航窗格中，选择**配置**。
>     
>     
> 4.  在**软件**配置类别中，选择编辑。
>     
>     
> 5.  在**Environment properties**下，输入键值对。
>     
>     
> 6.  选择**应用**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-06T20:59:33.213

要在本地运行中设置变量，您可以执行以下操作：

```
eb local setenv CONFIG=dev
eb local run 
```

这也适用于 Docker MultiContainers，否则它不会看到您的环境。

# facebook - Facebook页面类别

> ID：14206761
> 
> 赞同：1
> 
> 时间：2013-01-08T01:04:51.900
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试为 type=place 的 Facebook 页面查找类别的主列表。当您尝试创建新页面时，此[问题通过抓取 facebook 提供的类别列表来获取权威列表。](https://stackoverflow.com/questions/4216648/facebook-pages-authoritative-list-of-categories)这样做的问题是，虽然当您通过 Graph API 访问 page.category 时这是有效的，但当您从 FQL 访问 page.categories 时这是完全错误的。我写了一个小的 python 脚本，它会在这个查询中提取地点列表及其类别：

`search?center=40.717209,-74.006335&fields=id&type=place&limit=1000`（曼哈顿的地方似乎是一个很好的起点）

我有以下结果（我不得不剪掉大部分结果以遵守stackoverflow char限制）。请记住，第一个类别是从 GraphAPI.Page.Category 中提取的，而任何后续类别都是从 FQL.Page.Categories 中提取的。正如您在下面看到的，存在许多差异。FQL.Page.categories 似乎总是比 GraphAPI.Page.Category 有更多的细节。（餐厅与法国餐厅/汉堡联合等）。如果您访问 facebook.com/$pageid，您还会注意到他们更喜欢 FQL.Page.Categories 而不是来自 GraphAPI 的数据。

那么这里发生了什么？有主列表吗？是否有一些巧妙的方法可以从 FQL 中获取类别列表？

```
{
   "100383549148":[
      "Restaurant/cafe", --GraphAPI.Page.Category
      "French Restaurant", -- FQL.Page.Categories
      "Fine Dining Restaurant" -- FQL.Page.Categories
   ],
   "138834692818669":[
      "Local business", --GraphAPI.Page.Category
      "Modeling Agency" -- FQL.Page.Categories (and so-on)
   ],
   "151071684933933":[
      "Local business",
      "Department Store",
      "Shopping Mall",
      "Clothing Store"
   ],
   "284861728915":[
      "Retail and consumer merchandise",
      "Clothing Store"
   ],
   "41454242394":[
      "Local business",
      "Electronics Store",
      "Camera Store"
   ],
   "55561367656":[
      "Museum/art gallery",
      "Shopping & Retail",
      "Professional Services"
   ],
   "264714992548":[
      "Club",
      "Night Club"
   ],
   "236943526320075":[
      "Sports/recreation/activities",
      "Pool & Billiards",
      "Sports Bar",
      "Lounge"
   ],
   "58981424089":[
      "Company",
      "Modeling Agency"
   ],
   "120291857982113":[
      "Local business",
      "Bar"
   ],
   "10764587274":[
      "Non-profit organization",
      "Dance Instruction",
      "Tour Company",
      "Performance Venue"
   ],
   "37982488243":[
      "Museum/art gallery",
      "Museum",
      "Art Gallery"
   ],
   "183682541678235":[
      "Local business",
      "Lodging"
   ],
   "172763729438997":[
      "Public places",
      "Landmark",
      "Historical Place",
      "Tourist Attraction"
   ],
   "211710202241763":[
      "Local business",
      "Mediterranean Restaurant"
   ],
   "415540745185467":[
      "Arts/entertainment/nightlife",
      "Gay Bar",
      "Night Club"
   ],
   "121315784548445":[
      "Local business",
      "Italian Restaurant"
   ],
   "300247046737840":[
      "Restaurant/cafe",
      "Kosher Restaurant",
      "Lounge",
      "Party Center"
   ],
   "150466084967526":[
      "Publisher",
      "Publisher"
   ],
   "135086246507084":[
      "Non-profit organization",
      "Religious Center"
   ],
   "135341373539":[
      "Non-profit organization",
      "Medical & Health",
      "Charity Organization"
   ],
   "81517275796":[
      "Non-profit organization",
      "Organization"
   ],
   "19064794857":[
      "Professional sports team",
      "Sports Venue/Stadium"
   ],
   "327239417310605":[
      "Museum/art gallery",
      "Museum/Art Gallery"
   ],
   "297399360348054":[
      "Transportation",
      "Taxi",
      "Limo Service",
      "Transportation Service"
   ],
   "175752663777":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "143900978992817":[
      "Local business",
      "Shopping District",
      "Street",
      "Tourist Attraction"
   ],
   "399548274399":[
      "Shopping/retail",
      "Shopping & Retail"
   ],
   "175047719208063":[
      "Local business",
      "Local Business"
   ],
   "119384445132":[
      "Restaurant/cafe",
      "American Restaurant"
   ],
   "22301079793":[
      "Museum/art gallery",
      "Museum"
   ],
   "192081037473294":[
      "Local business",
      "Restaurant",
      "Bakery",
      "Food & Grocery"
   ],
   "109530759101383":[
      "Shopping/retail",
      "Shopping & Retail"
   ],
   "108432842557945":[
      "Shopping/retail",
      "Shopping & Retail"
   ],
   "405121362889168":[
      "Shopping/retail",
      "Jewelry Store"
   ],
   "126735894061992":[
      "Local business",
      "Real Estate Agent",
      "Shopping Mall"
   ],
   "113040605463526":[
      "Restaurant/cafe",
      "Bar",
      "Breakfast & Brunch Restaurant"
   ],
   "113471305348354":[
      "Bar",
      "Event Venue",
      "Lounge",
      "Bar"
   ],
   "20807115532":[
      "Arts/entertainment/nightlife",
      "Theatre",
      "Concert Venue",
      "Performance Venue"
   ],
   "317722188254508":[
      "Company",
      "Auction House"
   ],
   "6037303508":[
      "Shopping/retail",
      "Children"      s Clothing Store",
      "Furniture Store"
   ],
   "186625831353512":[
      "Local business",
      "Steakhouse"
   ],
   "167155736682339":[
      "Local business",
      "Restaurant",
      "Coffee Shop"
   ],
   "163987300342863":[
      "Local business",
      "Local Business"
   ],
   "26426125254":[
      "Professional sports team",
      "Professional Sports Team"
   ],
   "167722129905749":[
      "Local business",
      "Local Business"
   ],
   "227979715301":[
      "Local business",
      "Local Business"
   ],
   "337639182923404":[
      "Spas/beauty/personal care",
      "Spa, Beauty & Personal Care"
   ],
   "20783785529":[
      "Transport/freight",
      "Transport/Freight"
   ],
   "164567850333782":[
      "Neighborhood",
      "Neighborhood"
   ],
   "307743509286436":[
      "Computers/technology",
      "Computers/Technology"
   ],
   "43983956066":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "199430201205":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "111252343746":[
      "Restaurant/cafe",
      "Food & Restaurant"
   ],
   "472847742746995":[
      "Local business",
      "Restaurant"
   ],
   "179497828749951":[
      "Club",
      "Night Club"
   ],
   "161474093878515":[
      "Local business",
      "Local Business"
   ],
   "39528752125":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "198313800215088":[
      "Local business",
      "Hotel"
   ],
   "60444029358":[
      "Bar",
      "Bar",
      "Food & Restaurant"
   ],
   "103486486369895":[
      "Retail and consumer merchandise",
      "Retail and Consumer Merchandise"
   ],
   "140129689372461":[
      "Local business",
      "Restaurant"
   ],
   "143914832316044":[
      "Local business",
      "Wine Bar",
      "Winery/Vineyard",
      "Food & Restaurant"
   ],
   "133898386624065":[
      "Local business",
      "Movie Theatre"
   ],
   "141415742592562":[
      "Local business",
      "Coffee Shop",
      "Shopping & Retail"
   ],
   "140714402637502":[
      "Local business",
      "Clothing Store"
   ],
   "108045259252040":[
      "Local business",
      "Landmark",
      "Tourist Attraction",
      "Street"
   ],
   "352390428187284":[
      "Professional services",
      "Professional Services"
   ],
   "114017981961825":[
      "Local business",
      "Transportation Service",
      "Public Transportation",
      "Airport Terminal"
   ],
   "121080287904911":[
      "Restaurant/cafe",
      "Restaurant"
   ],
   "178218403548":[
      "Restaurant/cafe",
      "Italian Restaurant"
   ],
   "148374017533":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "173429212678086":[
      "Public places",
      "Shopping & Retail",
      "Tourist Attraction",
      "Business Center"
   ],
   "183143071724041":[
      "Arts/entertainment/nightlife",
      "Theatre",
      "Event"
   ],
   "126163559725":[
      "Consulting/business services",
      "Consulting/Business Services"
   ],
   "204100883016192":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "49460183496":[
      "Hotel",
      "Hotel",
      "Arts & Entertainment",
      "Bar"
   ],
   "130599090398237":[
      "Professional services",
      "Photographic Services & Equipment"
   ],
   "116067108421555":[
      "Local business",
      "Chinese Restaurant",
      "Family Style Restaurant"
   ],
   "197062023701792":[
      "Local business",
      "Shopping District",
      "Public Places & Attractions",
      "Neighborhood"
   ],
   "145952055437010":[
      "Local business",
      "Local Business"
   ],
   "97466887664":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "157317837643302":[
      "Real estate",
      "Real Estate"
   ],
   "395554417161429":[
      "Community/government",
      "Community & Government"
   ],
   "159356944133682":[
      "Company",
      "Tea Room",
      "Coffee Shop"
   ],
   "102038963189019":[
      "Restaurant/cafe",
      "Mexican Restaurant",
      "Tex-Mex Restaurant"
   ],
   "39875583837":[
      "Attractions/things to do",
      "Landmark",
      "Public Square",
      "Outdoors"
   ],
   "102589285262":[
      "Education",
      "Education",
      "Organization"
   ],
   "86422467669":[
      "Restaurant/cafe",
      "Chinese Restaurant"
   ],
   "20957710121":[
      "Non-profit organization",
      "Park",
      "Community Organization",
      "Public Places & Attractions"
   ],
   "130436540348552":[
      "Restaurant/cafe",
      "Italian Restaurant",
      "Pizza Place"
   ],
   "122867824491702":[
      "Bar",
      "Event Venue",
      "Burger Restaurant",
      "Sports Bar"
   ],
   "128560797202056":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "75219157496":[
      "Non-profit organization",
      "Residence & Other",
      "Medical & Health",
      "Organization"
   ],
   "159959957440081":[
      "Legal/law",
      "Legal/Law"
   ],
   "124764974262852":[
      "Local business",
      "Coffee Shop"
   ],
   "294816017273462":[
      "Company",
      "Food & Restaurant"
   ],
   "189237751159005":[
      "Local business",
      "Local Business"
   ],
   "111576255547949":[
      "Local business",
      "Restaurant",
      "Bar",
      "Karaoke"
   ],
   "283683171653148":[
      "Restaurant/cafe",
      "Latin American Restaurant",
      "Mexican Restaurant",
      "Seafood Restaurant"
   ],
   "217073478323499":[
      "Local business",
      "School",
      "Trade School",
      "College/University"
   ],
   "110069639603":[
      "Government organization",
      "Government Organization"
   ],
   "113479128686922":[
      "Local business",
      "Breakfast & Brunch Restaurant",
      "American Restaurant"
   ],
   "138375219537435":[
      "Bar",
      "Gastropub",
      "Sports Bar"
   ],
   "72125494439":[
      "School",
      "School",
      "Culinary School"
   ],
   "162735832146":[
      "Hotel",
      "Hotel"
   ],
   "168777155018":[
      "School",
      "School",
      "Culinary School"
   ],
   "201503306550753":[
      "Restaurant/cafe",
      "Restaurant"
   ],
   "148930827579":[
      "Arts/entertainment/nightlife",
      "Event",
      "Theatre"
   ],
   "177166092299013":[
      "Aerospace/defense",
      "Aerospace/Defense"
   ],
   "170075986343712":[
      "Local business",
      "Park",
      "Park",
      "Golf Course"
   ],
   "196487050452313":[
      "Health/beauty",
      "Health/Beauty"
   ],
   "404681091275":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "46813707682":[
      "Museum/art gallery",
      "Museum/Art Gallery"
   ],
   "52417410096":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "173866245998481":[
      "Local business",
      "Neighborhood",
      "Public Places & Attractions",
      "Apartment/Condo Building"
   ],
   "125559540801588":[
      "Restaurant/cafe",
      "Steakhouse",
      "American Restaurant"
   ],
   "21409546917":[
      "School",
      "School",
      "Dance Instruction",
      "Performing Arts Education"
   ],
   "112319308787259":[
      "Local business",
      "Bakery",
      "Japanese Restaurant"
   ],
   "119012133732":[
      "Restaurant/cafe",
      "Restaurant"
   ],
   "168648100919":[
      "Retail and consumer merchandise",
      "Clothing Store"
   ],
   "40689432989":[
      "Restaurant/cafe",
      "Sushi Restaurant",
      "Asian Fusion Restaurant"
   ],
   "204824546215995":[
      "Record label",
      "Entertainment Consultant",
      "Music Production",
      "Entertainment Service"
   ],
   "5942134076":[
      "Media/news/publishing",
      "Media/News/Publishing"
   ],
   "199770173391138":[
      "Restaurant/cafe",
      "Chinese Restaurant",
      "Seafood Restaurant"
   ],
   "10387248989":[
      "Health/beauty",
      "Health/Beauty"
   ],
   "35370009210":[
      "Health/wellness website",
      "Beauty Salon",
      "Makeup Artist",
      "Cosmetics & Beauty Supply"
   ],
   "19659469303":[
      "Shopping/retail",
      "Kitchen Supplies"
   ],
   "94130415360":[
      "University",
      "College/University"
   ],
   "43609808159":[
      "Company",
      "Company"
   ],
   "154215737954402":[
      "Local business",
      "Shopping & Retail"
   ],
   "179307775438035":[
      "Local business",
      "Community & Government"
   ],
   "5281959998":[
      "Media/news/publishing",
      "Newspaper"
   ],
   "13259856990":[
      "Museum/art gallery",
      "Museum",
      "Education"
   ],
   "115288898554295":[
      "Local business",
      "Jewelry Store"
   ],
   "102905683833":[
      "Food/beverages",
      "Food/Beverages"
   ],
   "137259562993246":[
      "Local business",
      "Government Organization",
      "Police Station"
   ],
   "8304333127":[
      "Media/news/publishing",
      "Newspaper"
   ],
   "117408098327646":[
      "Local business",
      "Local Business"
   ],
   "133216873424666":[
      "Company",
      "Company"
   ],
   "212819615511497":[
      "Restaurant/cafe",
      "Cafe",
      "Bar"
   ],
   "102301474968":[
      "Bar",
      "Bar",
      "Family Style Restaurant",
      "Professional Services"
   ],
   "23087075630":[
      "Business services",
      "Shopping & Retail",
      "Business Services"
   ],
   "43581127981":[
      "Retail and consumer merchandise",
      "Electronics Store",
      "Photographic Services & Equipment",
      "Business Services"
   ],
   "204085459644179":[
      "Government organization",
      "Government Organization"
   ],
   "184398548057":[
      "Radio station",
      "Radio Station"
   ],
   "66030778436":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "117226214961950":[
      "Local business",
      "Bar",
      "French Restaurant",
      "American Restaurant"
   ],
   "111970662190414":[
      "Local business",
      "Train Station",
      "Subway/Light Rail Station",
      "Transportation Service"
   ],
   "295684530523663":[
      "Bar",
      "Bar",
      "Restaurant",
      "Social Club"
   ],
   "134989809879659":[
      "Local business",
      "Chinese Restaurant"
   ],
   "79360828514":[
      "Retail and consumer merchandise",
      "Department Store",
      "Women"      s Clothing Store",
      "Shopping Mall"
   ],
   "220295214662500":[
      "Bar",
      "Bar"
   ],
   "269432346432338":[
      "Local business",
      "Local Business"
   ],
   "153561472759":[
      "Tv network",
      "TV Network"
   ],
   "99476123001":[
      "Health/beauty",
      "Makeup Artist"
   ],
   "108980342498683":[
      "Local business",
      "American Restaurant"
   ],
   "155458561155815":[
      "Church/religious organization",
      "Christian Church"
   ],
   "173543506071318":[
      "Food/beverages",
      "Food/Beverages"
   ],
   "247376308642730":[
      "Health/wellness website",
      "Medical & Health"
   ],
   "59869563396":[
      "Non-profit organization",
      "Performance Venue",
      "Art Gallery"
   ],
   "29531401902":[
      "Local business",
      "Concert Venue",
      "Theatre",
      "Performance Venue"
   ],
   "283424081752429":[
      "Public places",
      "Night Club"
   ],
   "198139726966453":[
      "Shopping/retail",
      "Mattresses & Bedding",
      "Furniture Store"
   ],
   "14158343106":[
      "Media/news/publishing",
      "Publisher"
   ],
   "304738169546976":[
      "Local business",
      "Local Business"
   ],
   "78292498422":[
      "Sports venue",
      "Sports Venue/Stadium"
   ],
   "213200048741860":[
      "Hotel",
      "Hotel"
   ],
   "136526126403331":[
      "Government organization",
      "Government Organization"
   ],
   "45386717890":[
      "Local business",
      "Tourist Attraction",
      "Historical Place",
      "Tours & Sightseeing"
   ],
   "208178949252224":[
      "Local business",
      "Breakfast & Brunch Restaurant",
      "Bar & Grill"
   ],
   "92817028706":[
      "Internet/software",
      "Internet/Software"
   ],
   "98029424570":[
      "Health/beauty",
      "Health/Beauty"
   ],
   "10427362470":[
      "Local business",
      "Local Business"
   ],
   "115735125296":[
      "Museum/art gallery",
      "Museum"
   ],
   "147571821931310":[
      "Local business",
      "Shopping District",
      "Tourist Attraction",
      "Neighborhood"
   ],
   "38502003238":[
      "Media/news/publishing",
      "Arts & Entertainment"
   ],
   "54307229494":[
      "Club",
      "Workplace/Office"
   ],
   "109637212390812":[
      "Local business",
      "Local Business"
   ],
   "101034256635219":[
      "Local business",
      "Education"
   ],
   "105173906206303":[
      "Local business",
      "Local Business"
   ],
   "49385786705":[
      "Restaurant/cafe",
      "Fine Dining Restaurant",
      "French Restaurant"
   ],
   "68793499001":[
      "Non-profit organization",
      "Professional Services",
      "Charity Organization"
   ],
   "147250751957739":[
      "Local business",
      "Local Business"
   ],
   "289192763550":[
      "Radio station",
      "Radio Station"
   ],
   "166479296744410":[
      "Local business",
      "Education"
   ],
   "22933262151":[
      "Local business",
      "Shopping & Retail"
   ],
   "273099936146184":[
      "Real estate",
      "Real Estate"
   ],
   "67997232685":[
      "Retail and consumer merchandise",
      "Retail and Consumer Merchandise"
   ],
   "26576092542":[
      "Restaurant/cafe",
      "Sandwich Shop",
      "Burger Restaurant",
      "American Restaurant"
   ],
   "334528336602675":[
      "Shopping/retail",
      "Shopping & Retail"
   ],
   "112319735528":[
      "Non-profit organization",
      "Concert Venue",
      "Region",
      "Outdoors"
   ],
   "117332188286245":[
      "Restaurant/cafe",
      "Restaurant"
   ],
   "155869377766434":[
      "Media/news/publishing",
      "Broadcasting & Media Production"
   ],
   "220596027986153":[
      "Local business",
      "Local Business"
   ],
   "101270893265925":[
      "Local business",
      "Subway/Light Rail Station",
      "Railroad",
      "Train Station"
   ],
   "113463215353586":[
      "Local business",
      "Lounge",
      "Arts & Entertainment",
      "Bar"
   ],
   "110576459032450":[
      "Local business",
      "Bakery",
      "American Restaurant",
      "Cafe"
   ],
   "103961942986990":[
      "Restaurant/cafe",
      "Burger Restaurant",
      "Barbecue Restaurant",
      "American Restaurant"
   ],
   "29300864323":[
      "Arts/entertainment/nightlife",
      "Arts & Entertainment"
   ],
   "48295469237":[
      "Arts/entertainment/nightlife",
      "Arts & Entertainment"
   ],
   "265974103414598":[
      "Shopping/retail",
      "Shopping & Retail"
   ],
   "61277478605":[
      "Public places",
      "Recreation Center",
      "Public Places & Attractions",
      "Park"
   ],
   "288527347830":[
      "Radio station",
      "Radio Station"
   ],
   "13881287428":[
      "Company",
      "Business Services"
   ],
   "246934688734461":[
      "Museum/art gallery",
      "Museum/Art Gallery"
   ],
   "167949390016455":[
      "Restaurant/cafe",
      "New American Restaurant"
   ],
   "32537282162":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "147218785328687":[
      "Restaurant/cafe",
      "Steakhouse",
      "Brazilian Restaurant"
   ],
   "131198600245354":[
      "Hotel",
      "Hotel"
   ],
   "117182708300058":[
      "Local business",
      "Cafe"
   ],
   "202236565897":[
      "Company",
      "Modeling Agency"
   ],
   "132188063464234":[
      "Hotel",
      "Hotel"
   ],
   "144603412237027":[
      "Local business",
      "Sports Venue/Stadium",
      "Sports & Recreation",
      "Food & Restaurant"
   ],
   "192663574093944":[
      "Local business",
      "Bar",
      "Restaurant"
   ],
   "175095085865160":[
      "Government organization",
      "Government Organization"
   ],
   "308276469185022":[
      "Hotel",
      "Hotel"
   ],
   "180946120405":[
      "Company",
      "Company"
   ],
   "228978783827634":[
      "Local business",
      "Japanese Restaurant",
      "Steakhouse"
   ],
   "47683628245":[
      "Radio station",
      "Radio Station"
   ],
   "187298251284725":[
      "Bar",
      "Bar",
      "Restaurant"
   ],
   "21117566782":[
      "Non-profit organization",
      "Non-Profit Organization"
   ],
   "131587516892795":[
      "Local business",
      "French Restaurant"
   ],
   "33963903738":[
      "Restaurant/cafe",
      "Family Style Restaurant",
      "Chinese Restaurant"
   ],
   "263148680371532":[
      "Local business",
      "Coffee Shop",
      "Bridge"
   ],
   "126245940791548":[
      "Local business",
      "Chinese Restaurant",
      "Dim Sum Restaurant"
   ],
   "53184441686":[
      "Arts/entertainment/nightlife",
      "Concert Venue",
      "Sports Venue/Stadium",
      "Sports Arena"
   ],
   "123682294356645":[
      "Local business",
      "Government Organization"
   ],
   "177480462305851":[
      "Restaurant/cafe",
      "Italian Restaurant",
      "Vegetarian/Vegan Restaurant",
      "Pizza Place"
   ],
   "193382748691":[
      "Church/religious organization",
      "Religious Center"
   ],
   "226863527325560":[
      "Restaurant/cafe",
      "Japanese Restaurant",
      "Fine Dining Restaurant",
      "Vegetarian/Vegan Restaurant"
   ],
   "303511076370691":[
      "Computers/technology",
      "Web Development",
      "Web Design"
   ],
   "145702228785572":[
      "Local business",
      "Business Center",
      "Government Organization",
      "Courthouse"
   ],
   "120727317966271":[
      "Radio station",
      "Radio Station"
   ],
   "158126016796":[
      "Arts/entertainment/nightlife",
      "Event",
      "Theatre"
   ],
   "181269698586021":[
      "Education",
      "Computer Training"
   ],
   "176538189024384":[
      "Museum/art gallery",
      "Museum/Art Gallery"
   ],
   "288651434553907":[
      "Club",
      "Night Club"
   ],
   "275746105805399":[
      "Local business",
      "Liquor Store"
   ],
   "212305355450803":[
      "Restaurant/cafe",
      "Lodging",
      "New American Restaurant"
   ],
   "116084215085843":[
      "Local business",
      "DVD & Video Store",
      "Book Store",
      "Comic Book Store"
   ],
   "233380236773079":[
      "Attractions/things to do",
      "Video Games",
      "Arcade"
   ],
   "98558906864":[
      "Attractions/things to do",
      "Museum",
      "Public Places & Attractions",
      "Tours & Sightseeing"
   ],
   "367173717818":[
      "Non-profit organization",
      "Dance Instruction",
      "Performing Arts Education"
   ],
   "5768707450":[
      "Professional sports team",
      "Professional Services",
      "Sports & Recreation",
      "Arts & Entertainment"
   ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:54:03.930

我不知道有什么方法可以显示完整的类别列表，尤其是通过 FQL。不过，我可以自告奋勇。

Facebook 使用[Factual](http://www.factual.com/)为大多数页面填充这些类别。他们的 API 将提供所有正在使用的类别的列表，并且是一种更友好的方式来提供与地理区域中的一个或多个类别匹配的 Facebook（或其他社交媒体）页面结果。看看他们的 Crosswalk API。

不确定您在做什么，但就个人而言，我会进行 Factual API 调用以查找您感兴趣的地点的 Facebook id，然后将这些 id 输入 FQL 以查找您的应用程序需要的关于这些地点的具体详细信息。

# facebook - Web 应用程序在用户 Facebook 应用程序部分已获批准，但 Facebook 未返回已验证==true

> ID：14206763
> 
> 赞同：1
> 
> 时间：2013-01-08T01:05:05.847
> 
> 标签：facebook, facebook-php-sdk, user-registration

我正在使用 Facebook PHP SDK。有些 Facebook 用户无法注册或登录我的网站。

`$user_profile = $this->api('/me');`

大多数加入该网站的 Facebook 用户一切正常。但是由于用户投诉，我刚刚创建了两个新的 Facebook 帐户来测试这一点，并且两个新的 Facebook 帐户都没有返回`$user_profile['verified']`数据。

我得到：

```
array (size=11)
'id' => string '10000501019xxxx' (length=15)
'name' => string 'Toby xxxx' (length=12)
'first_name' => string 'Toby' (length=4)
'last_name' => string 'xxxx' (length=7)
'link' => string 'http://www.facebook.com/toby.xxxx.90' (length=39)
'username' => string 'toby.xxxx.90' (length=15)
'gender' => string 'male' (length=4)
'email' => string 'xxxx99@gmail.com' (length=22)
'timezone' => int -6
'locale' => string 'en_US' (length=5)
'updated_time' => string '2013-01-08T00:38:06+0000' (length 
```

Web 应用程序位于 facebook 用户帐户设置 > 应用程序中，并显示为已批准。

即使一切正常，应用程序在 Facebook 用户的应用程序中注册，Facebook 仍然没有返回，`$user_profile['verified'] == true`因此用户无法完成注册。

我尝试了一种解决方法，在用户检查他们的 Facebook 个人资料以查看应用程序是否存在并获得批准后，他们仍然可以注册。但是，当尝试返回并登录时，`$user_profile = $this->api('/me');`仍然不包含`$user_profile['verified'] == true`.

我真的不知道有多少用户遇到了这个问题。但就像我说的那样，两个新的测试 Facebook 帐户已获得 Web 应用程序的批准，但仍未注册为已验证该应用程序。

我不知道还能做什么，因为我收到了注册和登录信息。无法在其 Facebook 应用部分中拥有网络应用的用户。似乎 Facebook`verified=true`出于某种原因没有返回。

有任何想法吗？

我测试了用户是否验证了帐户，当然，用户可以注册和登录。我从用户的 Facebook 帐户中删除了该应用程序，然后返回该应用程序进行登录。Facebook 对话框然后要求用户重新批准该应用程序。奇怪的是一些用户的数据不会返回他们已经验证了应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:58:44.993

> 奇怪的是一些用户的数据不会返回他们已经验证了应用程序。

我想你可能误解了`verified`这里字段的含义。

这与用户授权您的特定应用程序**无关！**

相反，它是指用户是否通过Facebook验证了他们的帐户，即通过手机、信用卡或其他方式确认了他们的身份。

# ios - 在 iOS / Mac 中的用户之间共享文件

> ID：14206766
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:05:25.713
> 
> 标签：ios, cocoa, cloud, icloud

我们有哪些选项可以让应用程序的用户与另一台设备上的其他用户共享文件？

我的应用程序是一个任务管理应用程序，我想让我的用户共享列表、笔记等。我还没有找到使用 iCloud 执行此操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:28:36.753

根据您希望如何实现工作流程，有多种方法可以实现这一点。

Spotify 允许用户在计算机和移动设备之间同步文件，前提是两者都在同一个本地网络上。您可以使用 Bonjour 来发现本地网络上是否有任何有效的端点，然后直接通过 TCP/IP 套接字进行同步。

如果您正在寻找云同步，[Parse](https://www.parse.com/)提供了一个 cloud-app-api 服务，让您可以轻松地在云上存储对象，包括文件和二进制数据。您必须编写自己的用户管理层，但它们提供用于存储和检索数据的 API。

从评论来看，还有其他公司提供类似的解析服务：Buddy、Stackmob、Kinvey 和 applicasa 等等。这个想法是利用 API 即服务提供商来满足所有后端需求。

# actionscript-3 - 用 as3 在 flash 中做一个边界

> ID：14206767
> 
> 赞同：0
> 
> 时间：2013-01-08T01:05:27.087
> 
> 标签：actionscript-3, flash, actionscript

我有这段代码可以生成圆圈并使它们漂浮在舞台的边界内。虽然它停留在舞台上，但它也有一些让步，让圈子通过我喜欢的少量。

是否可以这样做但使用自定义形状并将圆圈限制在此形状内？

这是我的代码：

```
//number of balls
var numBalls:uint = 200;
var defaultBallSize:uint = 8;
var colors:Array = [0x79B718, 0x2D91A8, 0xB019BC, 0xF98715, 0xDB1616];

//init
makeDots();

function makeDots():void {
//create desired number of balls
for (var ballNum:uint=0; ballNum<numBalls; ballNum++){
var c1:Number = randomColor();
var c2:Number = randomColor();

//create ball
var thisBall:MovieClip = new MovieClip();
thisBall.graphics.beginFill(c1);
//thisBall.graphics.lineStyle(defaultBallSize, 0);
thisBall.graphics.drawCircle(defaultBallSize, defaultBallSize, defaultBallSize);
thisBall.graphics.endFill();

addChild(thisBall);

//coordinates
thisBall.x = Math.random() * stage.stageWidth;
thisBall.y = Math.random() * stage.stageHeight;
//percieved depth
thisBall.ballNum = ballNum;
thisBall.depth = ballNum/numBalls;
thisBall.scaleY = thisBall.scaleX = 
////thisBall.alpha = 
ballNum/numBalls;
//velocity
thisBall.vx = 0;
thisBall.vy = 0;
thisBall.vz = 0;

//ball animation
thisBall.addEventListener(Event.ENTER_FRAME, animateBall);
}
}

var dampen:Number = 0.90;
var maxScale:Number = 1.3;
var minScale:Number = .3;
var maxAlpha:Number = 1.3;
var minAlpha:Number = .3;
function animateBall(e:Event):void{
var thisBall:Object = e.target;
//apply randomness to velocity
thisBall.vx += Math.random() * 0.2 - 0.1;
thisBall.vy += Math.random() * 0.2 - 0.1;
thisBall.vz += Math.random() * 0.002 - 0.001;

thisBall.x += thisBall.vx;
thisBall.y += thisBall.vy;
//thisBall.scaleX = thisBall.scaleY += thisBall.vz;
//thisBall.alpha += thisBall.vz;
thisBall.vx *= dampen;
thisBall.vy *= dampen;
thisBall.vz *= dampen;

if(thisBall.x > stage.stageWidth) {
thisBall.x = 0 - thisBall.width;
}
else if(thisBall.x < 0 - thisBall.width) {
thisBall.x = stage.stageWidth;
}
if(thisBall.y > stage.stageHeight) {
thisBall.y = 0 - thisBall.height;
}
else if(thisBall.y < 0 - thisBall.height) {
thisBall.y = stage.stageHeight;
}

if (thisBall.scaleX > maxScale){
thisBall.scaleX = thisBall.scaleY = maxScale;
}
else if (thisBall.scaleX < minScale){
thisBall.scaleX = thisBall.scaleY = minScale;
}
if (thisBall.alpha > maxAlpha){
thisBall.alpha = maxAlpha;
}
else if (thisBall.alpha < minAlpha){
thisBall.alpha = minAlpha;
}
}

function randomColor():uint
{
return colors[int(Math.random()*colors.length)];
} 
```

**代码信用：**

最初来自这里：[圆立方](http://circlecube.com/2009/02/random-movement-brownian-revisited-for-as3/)

此处的其他帮助：[预定义颜色列表中的随机颜色](https://stackoverflow.com/questions/14198940/random-colour-within-a-list-of-pre-defined-colours)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:08:45.590

是的你可以。发生的情况是，当每个圆圈移动时，会检查它是否在 x 和 y 轴上的舞台边界内，如果超出，则“校正”。您可以修改确定这一点的代码部分，以检查圆圈是否在您的自定义形状内。

其复杂性将取决于您的自定义形状以及检测圆形/对象是否在您的自定义形状内的方法。

您可以尝试的“最简单的自定义形状”是矩形或正方形，因为舞台已经是一个大矩形。要开始此操作，请查看您给定的代码以找到限制舞台尺寸的 x 和 y 位置的代码行，并将它们更改为您的自定义矩形/正方形的尺寸。如果您的自定义形状矩形/正方形不像舞台那样源自 0、0，您可能必须添加位置偏移量。如果您想尝试其他形状，我建议将这部分（实际上是基本的碰撞检测）分解为一种方法。

* * *

**编辑**

我编辑了我的答案，以包含重新设计的原始代码以使用随机正方形作为自定义形状 - 如我的原始答案中所述，最容易尝试的形状。希望您可以比较两者并查看我所做的更改以尝试找出其背后的逻辑。

对于圆形或任何其他完全随机的形状，它会有点困难，但相同的想法/概念。

```
//number of balls
var numBalls:uint = 200;
var defaultBallSize:uint = 8;
var colors:Array = [0x79B718, 0x2D91A8, 0xB019BC, 0xF98715, 0xDB1616];

// new custom shape bounds, a square that is 200, 200 px and is at 175, 100 on the stage
var customSquare:Rectangle = new Rectangle(175, 100, 200, 200);

//init
makeDots();
function makeDots():void {
    //create desired number of balls
    for (var ballNum:uint=0; ballNum < numBalls; ballNum++){
        var c1:Number = randomColor();
        var c2:Number = randomColor();

        //create ball
        var thisBall:MovieClip = new MovieClip();
        thisBall.graphics.beginFill(c1);
        //thisBall.graphics.lineStyle(defaultBallSize, 0);
        thisBall.graphics.drawCircle(defaultBallSize, defaultBallSize, defaultBallSize);
        thisBall.graphics.endFill();

        addChild(thisBall);

        //coordinates - this part of the code is setting the initial positions of the circles based on the stage size
        //thisBall.x = Math.random() * stage.stageWidth;
        //thisBall.y = Math.random() * stage.stageHeight;
        //
        // changed so they use the "customSquare" rectangle instead, note that the custom shape has an x and y pos now that doesn't start at 0 (unlike the stage)
        thisBall.x = (Math.random() * customSquare.width) + customSquare.x;
        thisBall.y = (Math.random() * customSquare.height) + customSquare.y;

        //percieved depth
        thisBall.ballNum = ballNum;
        thisBall.depth = ballNum / numBalls;
        thisBall.scaleY = thisBall.scaleX = ballNum / numBalls;

        //velocity
        thisBall.vx = 0;
        thisBall.vy = 0;
        thisBall.vz = 0;

        //ball animation
        thisBall.addEventListener(Event.ENTER_FRAME, animateBall);
    }
}

var dampen:Number = 0.90;
var maxScale:Number = 1.3;
var minScale:Number = .3;
var maxAlpha:Number = 1.3;
var minAlpha:Number = 0.3;

function animateBall(e:Event):void{
    var thisBall:Object = e.target;

    //apply randomness to velocity
    /*thisBall.vx += Math.random() * 0.2 - 0.1;
    thisBall.vy += Math.random() * 0.2 - 0.1;
    thisBall.vz += Math.random() * 0.002 - 0.001;*/
    // increased velocity ranges to add more speed to see the effects easier
    thisBall.vx += Math.random() * 1.2 - 0.6;
    thisBall.vy += Math.random() * 1.2 - 0.6;
    thisBall.vz += Math.random() * 0.012 - 0.006;

    thisBall.x += thisBall.vx;
    thisBall.y += thisBall.vy;
    //thisBall.scaleX = thisBall.scaleY += thisBall.vz;
    //thisBall.alpha += thisBall.vz;
    thisBall.vx *= dampen;
    thisBall.vy *= dampen;
    thisBall.vz *= dampen;

    // =====================================================================================================================================
    // this part of the code is determining if each ball is going outside of the bounds of the stage and repositioning them if they are
    // this part is the 'collision detection', changed to use the bounds of the "customSquare" rectangle instead
    //
    // this part is detecting the position going out of bounds along the X axis
    /*if(thisBall.x > stage.stageWidth) {
        thisBall.x = 0 - thisBall.width;
    } else if(thisBall.x < 0 - thisBall.width) {
        thisBall.x = stage.stageWidth;
    }*/
    if(thisBall.x > (customSquare.width + customSquare.x)) {
        thisBall.x = customSquare.x - thisBall.width;
    } else if(thisBall.x < customSquare.x - thisBall.width) {
        thisBall.x = customSquare.width + customSquare.x;
    }

    // this part is detecting the position going out of bounds along the Y axis
    /*if(thisBall.y > stage.stageHeight) {
        thisBall.y = 0 - thisBall.height;
    } else if(thisBall.y < 0 - thisBall.height) {
        thisBall.y = stage.stageHeight;
    }*/
    if(thisBall.y > (customSquare.height + customSquare.y)) {
        thisBall.y = customSquare.y - thisBall.height;
    } else if(thisBall.y < customSquare.y - thisBall.height) {
        thisBall.y = customSquare.height + customSquare.y;
    }
    // =====================================================================================================================================

    if (thisBall.scaleX > maxScale){
        thisBall.scaleX = thisBall.scaleY = maxScale;
    } else if (thisBall.scaleX < minScale){
        thisBall.scaleX = thisBall.scaleY = minScale;
    }

    if (thisBall.alpha > maxAlpha){
        thisBall.alpha = maxAlpha;
    } else if (thisBall.alpha < minAlpha){
        thisBall.alpha = minAlpha;
    }
}

function randomColor():uint{    return colors[int(Math.random()*colors.length)];    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:13:00.560

从 Flash 中的动画中，我可以告诉你做这种事情的 Flash 方式是通过图层蒙版。这在代码中也应该是可能的。像这样松散的东西：

```
addChild(thisBall);

var layermask:Shape=new Shape();
addChild(layermask);
thisBall.mask=maskingShape; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:41:10.247

假设您所要求的只是封闭区域周围的边界，您可以执行以下操作：

```
var container:MovieClip = new MovieClip;
container.graphics.lineStyle(1,0,1);
container.graphics.drawRect(0, 0, container.width, container.height);
container.graphics.endFill();
addChild(container); 
```

并替换：

```
addChild(thisBall); 
```

和 ：

```
container.addChild(thisBall); 
```

# java - 如何检查字符串是否为数字？

> ID：14206768
> 
> 赞同：44
> 
> 时间：2013-01-08T01:05:35.737
> 
> 标签：java

我有一个 gpa 程序，它使用`equalsIgnoreCase()`比较两个字符串的方法，即字母“a”与用户输入，它检查他们是否输入了“a”。但是现在我想添加一个带有错误消息的异常，该错误消息在输入数字时执行。我希望程序意识到整数输入与字符串不同并给出错误消息。我可以使用哪些方法将*String*类型变量与*int*类型的输入进行比较并抛出异常？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-08T01:10:48.443

[在http://www.coderanch.com/t/405258/java/java/String-IsNumeric](http://www.coderanch.com/t/405258/java/java/String-IsNumeric)探索了许多选项

还有一个是

```
public boolean isNumeric(String s) {  
    return s != null && s.matches("[-+]?\\d*\\.?\\d+");  
} 
```

可能有点矫枉过正，但[Apache Commons NumberUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/math/NumberUtils.html#isNumber%28java.lang.String%29)似乎也有一些帮助。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-08T01:30:10.427

如果您被允许使用第三方库，请提出以下建议。

[https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/math/NumberUtils.html](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/math/NumberUtils.html)

```
NumberUtils.isDigits(str:String):boolean
NumberUtils.isNumber(str:String):boolean 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-08T02:28:23.387

用这个

```
public static boolean isNum(String strNum) {
    boolean ret = true;
    try {

        Double.parseDouble(strNum);

    }catch (NumberFormatException e) {
        ret = false;
    }
    return ret;
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-05T09:45:18.347

您还可以使用 ApacheCommons StringUtils.isNumeric - [http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isNumeric(java.lang.String )](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#isNumeric(java.lang.String))

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-11-01T19:20:27.503

简单方法：

```
public boolean isBlank(String value) {
    return (value == null || value.equals("") || value.equals("null") || value.trim().equals(""));
}

public boolean isOnlyNumber(String value) {
    boolean ret = false;
    if (!isBlank(value)) {
        ret = value.matches("^[0-9]+$");
    }
    return ret;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-08T01:08:36.440

使用下面的方法，

```
public static boolean isNumeric(String str)  
{  
  try  
  {  
    double d = Double.parseDouble(str);  
  }  
  catch(NumberFormatException nfe)  
  {  
    return false;  
  }  
  return true;  
} 
```

如果你想使用正则表达式，你可以使用如下，

```
public static boolean isNumeric(String str)
{
  return str.matches("-?\\d+(\\.\\d+)?");  //match a number with optional '-' and decimal.
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-05-29T11:22:44.220

```
public static boolean isNumeric(String string) {
    if (string == null || string.isEmpty()) {
        return false;
    }
    int i = 0;
    int stringLength = string.length();
    if (string.charAt(0) == '-') {
        if (stringLength > 1) {
            i++;
        } else {
            return false;
        }
    }
    if (!Character.isDigit(string.charAt(i))
            || !Character.isDigit(string.charAt(stringLength - 1))) {
        return false;
    }
    i++;
    stringLength--;
    if (i >= stringLength) {
        return true;
    }
    for (; i < stringLength; i++) {
        if (!Character.isDigit(string.charAt(i))
                && string.charAt(i) != '.') {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-15T07:36:28.893

我最后在我的程序中编写了这个小方法，这样我就可以检查字符串是否为数字，或者至少每个字符都是数字。

```
private boolean isNumber(String text){
    if(text != null || !text.equals("")) {
        char[] characters = text.toCharArray();
        for (int i = 0; i < text.length(); i++) {
            if (characters[i] < 48 || characters[i] > 57)
                return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-28T23:40:38.137

您可以使用 Character.isDigit(char ch) 方法，也可以使用正则表达式。

以下是片段：

```
public class CheckDigit {

private static Scanner input;

public static void main(String[] args) {

    System.out.print("Enter a String:");
    input = new Scanner(System.in);
    String str = input.nextLine();

    if (CheckString(str)) {
        System.out.println(str + " is numeric");
    } else {
        System.out.println(str +" is not numeric");
    }
}

public static boolean CheckString(String str) {
    for (char c : str.toCharArray()) {
        if (!Character.isDigit(c))
            return false;
    }
    return true;
} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-29T13:37:45.140

要检查所有 int 字符，您可以简单地使用双重否定。if (!searchString.matches("[^0-9]+$")) ...

[^0-9]+$ 检查是否有任何不是整数的字符，因此如果为真则测试失败。只是不是那样，你会真正成功。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-08T01:24:52.187

以下是检查输入是否*包含*数字的方法：

```
if (input.matches(".*\\d.*")) {
    // there's a digit somewhere in the input string 
} 
```

# android - 如何约束与宽度相关的高度比例

> ID：14206771
> 
> 赞同：2
> 
> 时间：2013-01-08T01:05:45.930
> 
> 标签：android, android-linearlayout, android-relativelayout

我在父 LinearLayout 中均匀分布包含 LinearLayout，我可以使用 weightSum 和 layout_weight 参数轻松完成。我得到了一个很好的结果，接受我希望间隔的元素是方形的。***如何强制高度为均匀间隔后的宽度？***

请注意，我已将 4 个包含的元素的权重设为 10，而垫片的权重为 1（总重量总和为 45）。

非常感谢！这一直困扰着我一段时间。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rlRaces"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_horizontal"
android:orientation="horizontal"
android:weightSum="45" >

<LinearLayout
    android:layout_width="0dp"
    android:layout_height="fill_parent"
    android:layout_weight="1" >
</LinearLayout>

<include
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="10"
    layout="@layout/races_badge" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

</LinearLayout>

<include
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="10"
    layout="@layout/races_badge" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

</LinearLayout>

<include
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="10"
    layout="@layout/races_badge" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

</LinearLayout>

<include
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="10"
    layout="@layout/races_badge" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_weight="1" >

</LinearLayout> 
```

# ruby-on-rails - Rails 发出警告：“Rack::File headers parameter replaces cache_control after Rack 1.5”

> ID：14206775
> 
> 赞同：71
> 
> 时间：2013-01-08T01:06:25.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我最近将我的 Rails 升级到了 v3.2。服务器启动并工作，但是我注意到以下警告：

```
Rack::File headers parameter replaces cache_control after Rack 1.5. 
```

在我的 development.rb 中，我有以下缓存控制配置：

```
config.static_cache_control = "public, max-age=36000" 
```

警告是什么意思，我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-09T10:50:12.840

该警告是[由来自 Rails 本身的调用引起的](https://github.com/rails/rails/pull/8812)。该警告已在[Rails 3.2.13](http://weblog.rubyonrails.org/2013/3/18/SEC-ANN-Rails-3-2-13-3-1-12-and-2-3-18-have-been-released/)中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T09:14:12.020

您必须升级 Rake 文件。这个问题发生在*Rails 3.2.12*中，但在**Rails 3.2.13**中解决以解决这个问题。您必须`Gemfile.lock`从您的应用程序中删除您的（注意：由于您可能会收到类似“Rakefile locked”之类的错误，如果此解决方案没有帮助，请备份 Gemfile.lock 文件）。

打开您的 Gemfile 并在终端运行中找到`gem 'rails', '3.2.12'`并将其替换为then 。现在您将不会收到此警告。**`gem 'rails', '3.2.13'`**`bundle install`

# php - 使用 Foreach 循环仅获取最后 2 个数组

> ID：14206776
> 
> 赞同：1
> 
> 时间：2013-01-08T01:06:46.323
> 
> 标签：php, mysql, arrays, foreach

> **可能重复：**
> [PHP foreach() 仅返回最后 50 个项目](https://stackoverflow.com/questions/11680406/php-foreach-return-only-last-50-items)

我只需要它的最后 2 条记录。下面的代码返回所有记录。谢谢你

```
<?php 
    foreach ($fields as $field) {
        $type = $field['s_type'];
        $label = $field['s_label'];
        $value = Attributes::newInstance()->getValue($item_id, $field['pk_i_id']);
        if ($type == 'checkbox') {
            if ($value == 'checked') $value = 'Yes';
            else $value = 'No';
        }
?>
        <tr>
            <td style='width: 150px;'><?php _e($label, pg); ?></td>
            <td style='width: 150px;'><?php _e($value, pg); ?></td>
        </tr>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:36:53.667

您可以在迭代之前使用数组切片来管理字段。

```
$last_two = array_slice($fields, -2);

foreach($last_two as $field) { ... } 
```

尽管如果这是此脚本中唯一要做的事情，我建议重写您的查询结构。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T01:36:20.220

您可以使用带有-2 作为第二个参数的array_slice 吗？

# shell - 结束 if 语句

> ID：14206778
> 
> 赞同：0
> 
> 时间：2013-01-08T01:07:01.447
> 
> 标签：shell

嗨，我有一个简单的问题。如何打破 if 语句？例如

```
if [condition]
 then  **Iwant to to end here**
else
fi 
```

我不知道该使用什么，因为 break 不起作用。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:10:03.333

您需要在命令名称周围`[`和最后一个参数之前使用空格`]`。

如果您有`!`运算符（如 中`bash`），则可以反转条件：

```
if ! [ condition ]
then : contents of original else clause
fi 
```

或者：

```
if [ ! condition ]
then : contents of original else clause
fi 
```

或者你可以写出条件的倒数：

```
if [ inverse-condition ]
then : contents of original else clause
fi 
```

`then`或者你可以在子句中什么都不做：

```
if [ condition ]
then : Do nothing
else : contents of original else clause
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:11:21.353

你误会了。if 语句仅在条件满足时执行，如果不满足，则不会执行任何操作。但是如果你想跳到别的地方，你可以使用 GOTO

喜欢

转到测试

测试：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:12:36.047

是的，`break`只能在循环结构内工作，`while ... do ; ... done`或者`for ... ; do ... done`

如果您的代码位于函数内部，则可以使用`return`从任何位置（包括`if .. ; then ... fi`构造内部）离开函数。

或者，如果您不在函数中，则必须使用`exit`.

假设您使用`bash|ksh|zsh`的是没有`goto :label`. 这将是使用`[t]csh`家庭的少数原因之一。

IHTH

# javascript - JavaScript/HTML5 Canvas 寻路复用问题

> ID：14206781
> 
> 赞同：1
> 
> 时间：2013-01-08T01:07:26.063
> 
> 标签：javascript, html, artificial-intelligence, path-finding

我有一个用于 HTML5 画布的 JavaScript 中的寻路脚本，似乎存在多路复用问题。

[jsFiddle 演示](http://jsfiddle.net/Eb2CH/ "jsFiddle 演示")

该脚本已从此处接受的 SO 答案中提取并稍作修改：[A* Start pathfinding in HTML5 Canvas](https://stackoverflow.com/questions/11331834/a-start-path-finding-in-html5-canvas)（也有相同的错误）。

**如何复制问题：**当红色方块在移动时，只需在地图上快速单击，您就会看到方块似乎分裂或分支到每条不同的路径。

我认为正在发生的事情是，你应该注意到红色方块在分支过程中开始闪烁，实际上只是同一个方块试图同时在多个地方，导致同一个方块来回“传送”交替帧中的帧速率。虽然这只是一个理论，但我认为它实际上并没有产生更多的方块。

我不确定它是否与`movePlayer()`功能或`pathFinding()`功能有关。我认为我需要做的是，如果对象正在移动并且目标图块已更新，请取消任何先前的操作，而不是继续同时运行它们 - 我不知道我会如何做到这一点。

由于这最终将成为敌方 AI 脚本，因此目标图块将始终随着玩家在地图上移动而实时更新，这可能会导致此问题浮出水面。

谢谢，我很感激调试这个的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:38:32.530

据我所知，问题出在使用的计时器上。当您单击时，它会计算当前位置和单击位置之间的路径，然后它会启动一个计时器，使方块沿该路径移动，并在本地存储该计时器的信息。当您再次单击时，它会启动另一个计时器而不清除旧计时器，因此它现在从两个不同的计时器沿两条路径同时移动。它正在绘制每个计时器中的每一个动作，这可以看作是闪烁。

# linux - 使用额外的 tty 会话电池寿命耗尽？

> ID：14206783
> 
> 赞同：1
> 
> 时间：2013-01-08T01:07:47.043
> 
> 标签：linux, x11, gnu, archlinux, tty

当我在笔记本电脑上工作时，我更喜欢在 arch linux 控制台（没有 Xwindow）中工作。我这样做是为了延长电池寿命，因为我的工作不需要图形，这不是问题。

但是有时我需要使用 X 来编辑图片，但我宁愿不在我正在控制台工作的 tty1 中启动 X。

所以我的问题是：如果我用同一个用户登录 tty2 并从那里启动 X，我的电池寿命会比我在 tty1 中启动 X 并独自离开 tty2 更快吗？

如果可能的话，我想解释一下这是如何工作的，如果我的问题不清楚，我会尝试举一个更好的例子。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:09:39.253

您可以从任何您喜欢的 tty 启动 X，它只是启动 X 服务器进程运行。

唯一的细微差别是您将运行一个额外的 tty 进程，但由于它不会做任何事情，因此电池使用量可以忽略不计。

# javascript - 外部js如何工作？从我读过的内容来看，这应该有效，为什么不呢？

> ID：14206784
> 
> 赞同：0
> 
> 时间：2013-01-08T01:07:58.373
> 
> 标签：javascript

我在理解外部 javascript 页面的变量范围时遇到了一个非常简单的问题。如果我调用外部工作表，从我读到的所有全局函数和变量都应该能够被访问。我似乎无法让它工作。知道要搜索的正确问题是困难的部分，我可以在互联网上搜索几天来寻找一个可能有人可以轻松快速地解释的问题。我在本教程[http://www.tizag.com/javascriptT/javascriptexternal.php](http://www.tizag.com/javascriptT/javascriptexternal.php)中看到了类似的东西，我快速搜索堆栈发现：[JavaScript 中变量的范围是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)即使在我写这篇文章的时候，我也在寻找答案。

只是我在同一目录中有一个外部工作表，文件名为 trial.js。然后我有一个 index.html 只是试图使用从外部 trial.js 到索引页面的全局函数。这个有可能？根据 tizag 教程，使用按钮 onclick 属性中的函数。也有很多框架也在这个原则上工作，对吗？虽然我知道使用 $(a)​​<~~~references?? 或者其他的东西。感谢任何人的帮助，我会继续寻找，但希望互联网可以提供帮助！

本地主机/trial.js：

```
function trySomething(){
    alert("trying");
} 
```

本地主机/index.html：

```
<html>
<head>
<title>Objects222</title>
<script src="trial.js"></script>
</head>
<body>
    <script type="text/javascript">
        trySomething();
    </script>
    Hello
</body>
</html> 
```

它最初是在资源中，但我想让它更简单。使用 Firefox 和 chrome 对我不起作用？？？那些说它正在加载页面的人，您会收到“正在尝试”的警报？任何人都知道为什么它可能无法在本地工作。我清除了所有缓存并尝试重命名以强制上传。还使用了 Chrome、Firefox 和 IE，在加载@localhost 时仍然没有警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:15:17.970

我不确定，但我认为您不应该在“资源”之前有 /。前任。“资源/myscript”会起作用。此外，如果“trial.js”与“index.html”在同一目录中，则不需要“Resources/”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:16:18.640

我刚刚在 Apache 上对此进行了测试，它工作正常，**假设您的外部 JavaScript 文件位于一个名为 resource 的文件夹中。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:20:58.763

这似乎应该没问题，所以我复制了您的代码并[对其进行了测试](http://dev.orangedigital.com.au/test/stack/)，它对我有用。我所做的一个更改是删除脚本 src 中的第一个斜杠，因为我的“资源”文件夹不在站点根目录中。你的js文件肯定被加载了吗？

# c# - LINQ for groupby，然后根据最少日期查找值

> ID：14206787
> 
> 赞同：0
> 
> 时间：2013-01-08T01:08:30.983
> 
> 标签：c#, linq

我有一些要解析的数据，然后基于此，我必须获取每个组最小的日期的数据。

数据文件如下（一个小sinppet）

```
D_REPDATE;INDEX;MATLABEL;ST_START;ST_END;QT_START;QT_END;PRC_RF0;PRC_RF1
APR-13;04/01/13;F35MEDFC;APR-13;01/04/13;30/04/13;01/04/11;29/03/13;596.02000;596.02000
APR-14;04/01/13;F35MEDFC;APR-14;01/04/14;30/04/14;30/03/12;31/03/14;581.77000;581.77000
APR-15;04/01/13;F35MEDFC;APR-15;01/04/15;30/04/15;01/04/13;31/03/15;567.27000;567.27000
APR-16;04/01/13;F35MEDFC;APR-16;01/04/16;30/04/16;01/04/14;31/03/16;556.52000;556.52000
APR-17;04/01/13;F35MEDFC;APR-17;01/04/17;30/04/17;01/04/15;31/03/17;548.77000;548.77000
APR-13;04/01/13;BR DATED;APR-13;01/04/13;30/04/13;01/04/11;29/03/13;108.46000;108.46000
APR-14;04/01/13;BR DATED;APR-14;01/04/14;30/04/14;30/03/12;31/03/14;102.53000;102.53000
APR-15;04/01/13;BR DATED;APR-15;01/04/15;30/04/15;01/04/13;31/03/15;98.19000;98.19000
APR-16;04/01/13;BR DATED;APR-16;01/04/16;30/04/16;01/04/14;31/03/16;94.49000;94.49000
JAN-21;04/01/13;F630GCW;JAN-21;01/01/21;31/01/21;01/01/19;31/12/20;85.57000;85.57000
JUL-13;04/01/13;F630GCW;JUL-13;01/07/13;31/07/13;01/07/11;28/06/13;93.50000;93.50000
JUL-14;04/01/13;F630GCW;JUL-14;01/07/14;31/07/14;29/06/12;30/06/14;90.95000;90.95000
JUL-15;04/01/13;F630GCW;JUL-15;01/07/15;31/07/15;01/07/13;30/06/15;88.83000;88.83000
JUL-16;04/01/13;F630GCW;JUL-16;01/07/16;31/07/16;01/07/14;30/06/16;87.01000;87.01000 
```

对于最小 QT_END 的每个索引，我想读取 PRC_RF0。

我写了类似的东西

```
class GMRTest    
{
    public string CRVLABEL;
    public string INDEX;
    public string MATLABEL;
    public DateTime ST_START;
    public DateTime ST_END;
    public DateTime QT_START;
    public DateTime QT_END;
    public string PRC_RF0;
    public string PRC_RF1;
} 
```

并将此方法读入列表（listData）

```
listData.GroupBy(s => s.INDEX).Select( aa => new {Key = aa.Key, Data = aa.OrderBy(ab => ab.ST_START) } ); 
```

然而，这仍然给了我所有的数据，我想要的是最小日期（ST_START）的数据。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T01:12:20.757

尝试在通话`First()`后追加。`OrderBy`例子：

```
var result = listData.
    GroupBy(s => s.INDEX).
    Select(group => new {Key = group.Key, Data = group.
        OrderBy(ab => ab.ST_START).
        First()}); 
```

# mongodb - puppet：如何按模块清除包/服务器

> ID：14206788
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:08:35.233
> 
> 标签：mongodb, puppet

我 在我的 linux ubuntu 12.04 上安装了puppetlab mongodb 模块[https://forge.puppetlabs.com/puppetlabs/mongodb 。](https://forge.puppetlabs.com/puppetlabs/mongodb)我可以通过清单脚本安装 mongodb

网站.pp

```
node default{
   include mongodb
} 
```

但是我如何通过这个模块清除 mongodb 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:35:56.557

尝试添加：

```
 package{'mongodb':
    ensure => purged,
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T23:18:28.473

`include`是`class`描述的快捷别名。

所以：

`include mongodb`

是相同的

`class {"mongodb": ensure => present }`

这意味着你可以删除它

`class {"mongodb": ensure => absent }`

# mongodb - 从 Doctrine\DBAL\Connection 对象获取 Mongo PHP 对象

> ID：14206795
> 
> 赞同：0
> 
> 时间：2013-01-08T01:09:29.347
> 
> 标签：mongodb, doctrine

我正在通过 Doctrine 使用 Mongo。

现在我需要从 Doctrine\DBAL\Connection 包装对象中获取标准的 \Mongo PHP 驱动程序对象。

我用谷歌搜索了很多，但我找不到方法。你能帮忙吗？

我问这个是因为我需要在其构造函数中合并使用 Mongo 对象的服务： [https ://github.com/richsage/Symfony2-MongoDB-session-storage/blob/master/MongoDBSessionStorage.php](https://github.com/richsage/Symfony2-MongoDB-session-storage/blob/master/MongoDBSessionStorage.php)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:54:13.307

Doctrine DBAL 库是 SQL 数据库连接的包装器，而不是 MongoDB。我假设您指的是该`Doctrine\MongoDB\Connection`对象，在这种情况下，我将引导您查看先前已回答的关于该主题的问题：[https ://stackoverflow.com/a/12356688/162228](https://stackoverflow.com/a/12356688/162228)

对于 Symfony2 会话处理，我还建议使用默认的[MongoDbSessionHandler](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/Session/Storage/Handler/MongoDbSessionHandler.php)，这是积极维护的。例如，它支持 1.3.x 驱动版本中的 MongoClient 类（旧驱动使用 Mongo 类）。

# ruby-on-rails - 在 Rails 中使用 Stripe 进行单次充电

> ID：14206802
> 
> 赞同：2
> 
> 时间：2013-01-08T01:10:33.013
> 
> 标签：ruby-on-rails, ruby, forms

我试图弄清楚如何在表单输入字段中输入的单笔费用中使用条纹接受信用卡。

示例：user1 登录并创建帖子，在字段中输入 $20 并单击提交。帖子被创建，并从他的卡中收取 20 美元。用户 2 也这样做，但投入 45 美元并输入他的信用卡并提交表单。

我已经完成了以下工作；- 设计设置 - 角色 - 安装条纹 gem 和帐户设置

我还没有找到可以解释条带单次收费的示例，一切都是基于订阅的。

我是新手，所以我试图模仿订阅示例但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T01:36:25.113

以下是我使用 Stripe 和 ActiveMerchant gem 执行单次收费的方式。

```
transaction = ActiveMerchant::Billing::StripeGateway.new(:login => STRIPE_SECRET_KEY)

paymentInfo = ActiveMerchant::Billing::CreditCard.new(
            :number             => "4242424242424242",
            :month              => "12",
            :year               => "2020",
            :verification_value => "411")

purchaseOptions = {:billing_address => {
    :name     => "Customer Name",
    :address1 => "Customer Address Line 1",
    :city     => "Customer City",
    :state    => "Customer State",
    :zip      => "Customer Zip Code"
}}

response = transaction.purchase((17.50 * 100).to_i, paymentInfo, purchaseOptions)

if response.success? then
  logger.debug "charge successful"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-04T19:27:06.930

您需要使用 Stripe.js 来获取令牌，然后传递该令牌字符串而不是信用卡对象。

出于测试目的，您可以访问[https://stripe.com/docs/stripe-js](https://stripe.com/docs/stripe-js)并从如下图所示的表单中获取令牌： [![在此处输入图像描述](../Images/3e219c209a6a73605c7b1a0f61702a7a.png)](https://i.stack.imgur.com/R4Ela.png)

如何在 Rails 控制台中使用它：

```
gateway = ActiveMerchant::Billing::StripeGateway.new(:login => STRIPE_SECRET_KEY)
gateway.purchase(1200, "tok_1E0CzPDdSOg3FLH0IFmWo1T2") 
```

# exception-handling - 从导入的模块中捕获所有异常

> ID：14206804
> 
> 赞同：8
> 
> 时间：2013-01-08T01:10:48.110
> 
> 标签：exception-handling

我有一个程序（一个带有 kivy 的 gui），它导入了一个非标准模块（由我的一位同事制作），它针对非常特殊的问题引发异常（Exception）。我希望从该特定模块中捕获所有引发的异常，以便我可以在我的程序中引发一个弹出窗口。那么从特定模块捕获引发异常的最佳方法是什么？

我试过这个

toc 是模块名称

```
import toc
...
...
try:
    ...
    ...
except toc.Exception:
    ... 
```

但这似乎不起作用，它会产生一个 AtrributeError 说该模块没有属性“异常”。我究竟做错了什么？

编辑：还有一个问题：

如果我有：

```
try:
    ...
    try:
        ....
    except:
        some small block code
except:
    some large block code 
```

异常处理会在本地块内工作吗？我的意思是，如果我在较小的块中遇到错误，错误处理会继续进行到“一些小块代码”还是会转到“一些大块代码”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T01:18:47.523

您可以捕获特定类型的所有异常，但您需要提供正确的类型。你`toc.Exception`不是一个例外类。

通常，您有三种方法，主要取决于模块的设计：

*   如果模块包含一些常见的异常类（比如它处理一些 API 并且所有 API 错误都继承自基模块类），则使用此类捕获每个错误，
*   如果模块没有这样的基本错误类，但有自己的异常类，你可以全部捕获它们，
*   如果您想捕获*每个*错误（甚至像`KeyError`or `ValueError`），那么您可以尝试这样做：

    ```
    try:
        # ... some external module call ...
    except:
        # ... some exception handling ... 
    ```

    （最好是单个调用，而不是更可能包含模块错误*的更大块）*

但是您应该知道，如果出现错误，这不会为您提供足够的信息（例如，您将不得不猜测您尝试调用的函数在那里不存在）。

还要确保没有其他方法可以解决您的问题。您非常接近实现[尿布模式](http://mike.pirnat.com/2009/05/09/the-diaper-pattern-stinks/)，应该通过为要捕获的异常提供显式类来避免这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-25T19:51:52.440

不要在您不想尴尬的代码中执行此操作，但这有效：

```
import requests, inspect

exception_types = [obj for name, obj in inspect.getmembers(requests.exceptions) if inspect.isclass(obj) and issubclass(obj, Exception)]

try:
    raise requests.exceptions.HTTPError()
except Exception as e:
    if any(issubclass(e.__class__, lv) for lv in exception_types):
        print "This exception came from requests.exceptions"
    else:
        print "This exception came from somewhere else"
        raise 
```

# objective-c - 应该如何保留虚拟核心数据属性？

> ID：14206810
> 
> 赞同：0
> 
> 时间：2013-01-08T01:11:24.770
> 
> 标签：objective-c, core-data, key-value-observing, key-value-coding

我有一个 NSManagedObject 子类，它的虚拟属性计算起来很昂贵。该属性取决于实体的具体属性之一的值。出于性能原因，我只想在它所依赖的属性发生变化时计算虚拟属性的值。

我注意到每次访问值时都会调用我的虚拟财产的访问器（昂贵的访问器）。保留虚拟财产的计算价值的最佳方法是什么？是否有一些KVC 的**内置**部分允许我缓存计算的值？

**界面：**

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface CDUserPhotos : NSManagedObject

// Core Data attribute
@property (nonatomic, retain) NSData * data;

// Virtual property
@property (readonly) NSArray* photos;

// Changes the value of 'data' property
- (void)refresh;

@end 
```

**执行：**

```
#import "CDUserPhotos.h"

@implementation CDUserPhotos

// Core data attributes
@dynamic data;

#pragma mark -
#pragma mark Public

+ (NSSet *)keyPathsForValuesAffectingPhotos
{
    NSSet* set = [NSMutableSet setWithObjects:@"data", nil];
    return set;
}

#pragma mark -

- (NSArray *)photos
{
    if ( self.data )
    {
        return [self.data expensiveCalculation];    // We want to prevent calls to this method!
    }
    return nil;
}

- (void)refresh
{
    // some code deleted here. Basically, the value of self.data changes which therefore changes the value of self.photos.
    self.data = [self newData]; // not shown
}

@end 
```

**其他一些代码**

```
// self.albums.photos is an object of CDUserPhotos (NSManagedObject)
j = self.albums.photos.count;       // triggers expensive calculation
k = self.albums.photos.count;       // should not trigger expensive calculation

[self.albums refresh];

q = self.albums.photos.count;       // triggers expensive calculation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:42:04.993

它可能很简单：

```
if (self.data) {
    if(!_photos) {
        _photos = [self.data expensiveCalculation];
    }
    return _photos;
} else {
    return nil;
} 
```

你还必须：

```
- (void)refresh
{
    self.data = [self newData]; // not shown
    _photos = nil;
} 
```

# ruby-on-rails - require 'icalendar' 会导致错误 - 即使我安装了 icalendar gem

> ID：14206812
> 
> 赞同：1
> 
> 时间：2013-01-08T01:11:35.823
> 
> 标签：ruby-on-rails, ruby

我对 Ruby on Rails 比较陌生。我需要在我的网络应用程序中使用 iCalendar 事件。

首先，我安装了 iCalendar gem，如下所示：

```
gem install icalendar 
```

然后我运行`gem list`命令，它表明 gem 已安装。但是，我实际上不能在任何地方使用宝石。如果我做：

```
event = Icalendar::Event.new 
```

我收到 iCalendar 是未初始化常量的错误。

如果我尝试将 iCalendar 包含在一个类中，如下所示：

```
require 'icalendar' 
```

我得到错误：

```
MissingSourceFile:  no such file to load -- icalendar 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:16:28.053

在 RoR 中，你应该`gem 'icalendar'`在你的`Gemfile`- 和 Rails 中需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:20:53.207

ruby 顶部的路径是否`/usr/bin/gem`与 的输出匹配`which ruby`？如果不是，请确保它们匹配或给出`/usr/bin/gem`.

# java - Google Analytics V2 IllegalStateException

> ID：14206816
> 
> 赞同：1
> 
> 时间：2013-01-08T01:12:14.237
> 
> 标签：java, android, google-analytics

我在使用 GA V2 时遇到以下异常（非常少见）。我在网上根本找不到任何关于它的信息。

```
java.lang.IllegalStateException: Tracker closed
at     com.google.analytics.tracking.android.GoogleTracker.assertTrackerOpen(GoogleTracker.java:60)
at     com.google.analytics.tracking.android.GoogleTracker.trackView(GoogleTracker.java:108)
at     myapp.Analytics.startGame(Analytics.java:53) 
```

我有以下调用，都是由游戏的更新线程发出的，而不是原始活动的线程：

```
public void startTracker() {
    analytics = GoogleAnalytics.getInstance(activity.getApplicationContext());
    tracker = analytics.getTracker("XX-XXXXXXXXX-X");
    tracker.setStartSession(true);
}

public void startGame() {
    tracker.trackView("new_game");
} 
```

我在这里做错了什么还是我只需要捕获异常并忽略它们？

# windows - 使用其 IP 地址或名称找出机器类型

> ID：14206826
> 
> 赞同：1
> 
> 时间：2013-01-08T01:12:49.187
> 
> 标签：windows, operating-system

有什么方法可以使用其 IP 地址或名称找出机器是 Linux 服务器还是 Windows 服务器。这里没有其他信息。

谢谢

# android - Eclipse中的Android框架类中是否有覆盖方法的快捷方式？

> ID：14206827
> 
> 赞同：6
> 
> 时间：2013-01-08T01:12:58.483
> 
> 标签：android, eclipse

目前，当在 Android Eclipse 项目中覆盖例如 Activity 中的方法时，我会这样做：

Source > Override/Implement Methods > 滚动列表，复选框，单击确定。

有没有步骤更少的捷径？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-08T01:17:10.030

`alt`- `shift`-`s` `v`

在配置中可以发现所有键盘快捷键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T01:17:25.413

你必须使用 Alt+Shift+S, V

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T02:04:57.777

您也可以开始输入方法名称，自动完成 ( `Ctrl`- `Space`) 也会为您提供可以覆盖的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T01:20:45.477

就我而言，

1.  首选项 > Java > 编辑器 > 内容辅助 > 取消选中“启用自动激活”
2.  首选项 > 常规 > 内容辅助 > 绑定到 Ctrl + Space（设置键绑定）或 Option + Space
3.  键入“on”，然后按 Ctrl + Space

第 3 步将显示您可以覆盖的方法。

禁用自动激活将提高 Eclipse 的性能，并且将密钥绑定到内容辅助更快且有用。

# java - 大整数复制

> ID：14206828
> 
> 赞同：12
> 
> 时间：2013-01-08T01:13:03.207
> 
> 标签：java, biginteger

也许我真的很困惑，因为这似乎是一个非常简单的问题，但谷歌和官方文档还不够。

我想复制一个 BigInteger，但找不到干净的方法。`BigInteger a = b`when`b`是 BigInteger，因为 BigInteger 是一个对象，并且这里没有运算符重载，所以`a`引用相同的对象`b`

到目前为止我发现的最干净的方式是`BigInteger a = b.add(BigInteger.ZERO)`，但对我来说仍然是一种肮脏的方式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-08T01:19:18.177

`BigInteger`是不可变的——永远不需要复制`BigInteger`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-08T01:33:38.920

`BigInteger`与其他包装类（例如`Integer`和）一样是不可变的`String`。所以不用担心可能的更改/篡改。

PS：作为奖励，这里有一个关于何时需要防御性复制的链接。

[http://www.javapractices.com/topic/TopicAction.do?Id=15](http://www.javapractices.com/topic/TopicAction.do?Id=15)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-08T01:15:26.910

您可以使用[`BigInteger(String val)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#BigInteger%28java.lang.String%29)

```
BigInteger first = new BigInteger("15");
BigInteger second = new BigInteger(first.toString()); 
```

虽然这是可能的，但`BigInteger`对象是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的，我无法想象需要复制。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T01:31:35.603

首先，您不需要复制 a`BigInteger`因为它是不可变的类。（复制 a与复制 a ...`BigInteger`一样有用）`String`

但是，如果您确实需要复制一个，那么一种更有效的方法是：

```
BigInteger first = new BigInteger(42);
BigInteger second = first.add(BigInteger.ZERO); 
```

这避免了（相对）昂贵的二进制 -> 十进制 -> 二进制转换和中间字符串的创建。

而且`BigInteger.clone()`应该更有效率...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T01:19:45.783

怎么样：

```
BigInteger a = b.clone() 
```

但如前所述，它是不可变的，所以应该没有必要。

# akka - 是否有 Akka 2.0 替代 Akka 1.3 的 senderFuture？

> ID：14206829
> 
> 赞同：2
> 
> 时间：2013-01-08T01:13:07.020
> 
> 标签：akka

我有一些 Akka 1.3 代码处理与不直接支持回复概念的外部消息传递系统的集成。我正在尝试将代码库升级到 Akka 2.0 并且遇到了麻烦，因为我现有的设计依赖于通过将密钥生成到 ConcurrentHashMap 并使用 senderFuture 进行清理来模拟“回复”机制。

发送给正在处理调度的参与者的消息可能会或可能不会期待回复，即使他们期待回复，在通过网络发送后，他们也可能永远不会得到回复。因此，HashMap 应该只存储真正需要回复（询问，而不是告诉）的消息条目，并且它必须具有某种形式的清理机制来清除从未收到回复的条目。

在 Akka 1.3 中，我通过附加到 senderFuture 来做到这一点，所以当发送消息的参与者超时并放弃回复时，HashMap 中的相应条目也会被删除：

```
if (self.senderFuture().isDefined) {
  pendingRequests.put(replyToKey, sender)
  self.senderFuture().get.onComplete( f => {
    pendingRequests.remove(replyToKey)
  }
} 
```

由于 Akka 2.0 已经移除了对 senderFuture 的可访问性，是否有一种干净的方式来处理这种情况？还是我只需要从头开始创建一个清理过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T13:08:14.120

Akka 2.x 中没有保留您正在寻找的精确功能，因为

*   它使远程参与者通信变得脆弱，并且
*   它在通信中打开了一个不明显的旁通道，最好是明确的。

使用`senderFuture`意味着您选择清理操作是客户端参与者的责任。您仍然可以通过简单地将此信息包含在您发送的消息中来做到这一点，而不是将其放入消息的发送方式中。

要考虑的另一件事是 2.0 中添加的[DeathWatch](http://doc.akka.io/docs/akka/2.1.0/scala/actors.html#Lifecycle_Monitoring_aka_DeathWatch)功能：您可以发出需要清理的信号，然后目标可以作为请求的发送者，在收到相应消息`context.watch()`时进行清理（由发送者的死亡触发）。`Terminated`然后客户端仍然可以使用适当超时的[询问模式](http://doc.akka.io/docs/akka/2.1.0/scala/actors.html#Ask__Send-And-Receive-Future)，这会将定时的兴趣损失传达回服务参与者。

# compression - 是否有可用的工具将大量数据压缩成小而复杂的算法来输出原始信息？

> ID：14206830
> 
> 赞同：0
> 
> 时间：2013-01-08T01:13:07.200
> 
> 标签：compression

我记得听说有时计算机会以有趣的方式保存图像。例如，一个图像，其中一些相邻的像素具有相同的确切颜色，然后它们被存储为接下来的 30 个或一些像素都是“红色”的信息，而不是说每个像素都具有我们所知的值红色。

有时您会下载千兆字节大小的大型程序，但以 900 kb 文件开头。我想这些只是将您连接到 ftp 的工具，它通常会为您提供一些数据。

那么，如果我们不需要立即访问信息，比如长期存储，为什么我们不能将千兆字节的信息存储为千字节呢？

举这个例子，程序被要求压缩一个大小为 1024 KB 的文件。用于压缩此信息的程序检测到内存中的字节仅形成 {1,0,0,1,0,0,...} 的模式。该程序创建一个算法，如果被要求解压缩信息并存储该模式应占用的内存长度，它可以在以后识别该算法。原来信息占用的数据现在少了很多。

如果所需的算法太复杂而无法压缩整个文件，也许计算机可以将数据分成不同的算法，以便在要求解压缩时输出更小长度的数据。

这是压缩数据的现实方法吗？我认为这可能已经被使用，因为有时我会看到一个程序，例如 Windows 7，“扩展”数据。这是程序真正在做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:25:36.273

LZW 的工作原理是构建位字符串字典，然后使用对该字典的引用而不是字符串。其他压缩算法以不同的方式工作，但其想法始终是找到更小的表示。一些压缩，例如 jpeg 会丢失数据，这对于我们的眼睛或耳朵能够填充丢失数据的媒体来说很好。其他如 LZW 是“无损”的，它们不会丢失数据。

一些压缩程序如 pkzip 和 winzip 使用基于数据的各种算法。这种方法不能用于流式传输，但适用于文件。

整个地区非常复杂，你可以在上面度过一生，但仍然对它一无所知。祝你在追求中好运。

# c# - AsParallel.ForAll 与 Parallel.ForEach

> ID：14206834
> 
> 赞同：41
> 
> 时间：2013-01-08T01:14:23.403
> 
> 标签：c#, parallel-processing, task-parallel-library

下面的代码片段之间有什么区别。如果是这样，是什么？

`myList.AsParallel().ForAll(i => { /*DO SOMETHING*/ });`

和

`Parallel.ForEach(mylist, i => { /*DO SOMETHING*/ });`

主线程会等待所有子线程完成吗？在 MVC 应用程序中，如果我在控制器操作中进行并行处理，那么在主线程完成后子线程会发生什么。它们会被中止还是会在主线程完成后完成？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-08T13:17:08.207

`Parallel.ForEach()`正是针对这种代码的。

另一方面，`ForAll()`旨在用于（可能很复杂）PLINQ 查询的末尾。

正因为如此，我认为`Parallel.ForEach()`这里是更好的选择。

在这两种情况下，当前线程都将用于执行计算（以及线程池中的一些线程），并且该方法仅在所有处理完成后才返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-03-26T23:48:47.750

这是 MSDN 中的解释：

[https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/potential-pitfalls-with-plinq#prefer-forall-to-foreach-when-it-is-possible](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/potential-pitfalls-with-plinq#prefer-forall-to-foreach-when-it-is-possible)

根据我阅读的内容，`Parallel.ForEach()`如果要确保列表是**按顺序**访问的，请使用，而使用`AsParallel.ForAll()`不能保证列表中的项目按顺序访问。

对于 MVC，所有线程都是基于请求的。调用者线程（main）被阻塞，直到 Parallel() 调用完成，这意味着所有子线程也应该已经完成​​。

如果调用者线程正在中止，这里有一个解释：

[http://www.albahari.com/threading/part5.aspx](http://www.albahari.com/threading/part5.aspx)

> PLINQ 不会抢先中止线程，因为这样做很危险。相反，在取消时，它会等待每个工作线程在结束查询之前完成其当前元素。这意味着查询调用的任何外部方法都将运行完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-01-03T19:54:18.337

正如[C# Cookbook 中的并发](https://www.goodreads.com/book/show/18492385-concurrency-in-c-cookbook)所写：

> 与 PLINQ 之间的一个区别`Parallel`是 PLINQ 假设它可以使用计算机上的所有内核，同时`Parallel`会动态地对不断变化的 CPU 条件做出反应。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-28T08:43:16.723

您可以选择使用 AsParallel().AsOrdered() 对元素进行排序。Parallel.ForEach 中的订购不是开箱即用的，我们需要这样做。

# php - PHP - 将 MySQL 表导出到 JSON 文件

> ID：14206839
> 
> 赞同：1
> 
> 时间：2013-01-08T01:15:06.470
> 
> 标签：php, mysql, json, export

我正在尝试将我的 MySQL 表从我的数据库导出到 JSON 文件，因此我可以将它们列在一个数组中。

我可以用这段代码创建文件没问题：

```
 $sql=mysql_query("select * from food_breakfast");

    while($row=mysql_fetch_assoc($sql))
    {
    $ID=$row['ID'];
    $Consumption=$row['Consumption'];
    $Subline=$row['Subline'];
    $Price=$row['Price'];
    $visible=$row['visible'];

    $posts[] = array('ID'=> $ID, 'Consumption'=> $Consumption, 'Subline'=> $Subline, 'Price'=> $Price, 'visible'=> $visible);
    }
    $response['posts'] = $posts;

    $fp = fopen('results.json', 'w');
    fwrite($fp, json_encode($response));
    fclose($fp); 
```

现在这会读取一个表格并从其中的字段中提取它的信息。

我想知道是否可以使用表的名称制作一个 JSON 文件，因此在层次结构中更高一级。

我有部分代码：

```
 $showtablequery = "
    SHOW TABLES
    FROM
        [database]
    LIKE
    '%food_%'
    ";

$sql=mysql_query($showtablequery);

    while($row=mysql_fetch_array($sql))
     {
       $tablename = $row[0];

     $posts[] = array('tablename'=> $tablename);
      }
     $response['posts'] = $posts; 
```

但现在我被困在最后一行是说：`$ID=$row['ID'];`这与表内的信息有关，我不知道该放什么。

同样如您所见，我需要过滤表格以仅列出以 food_ 和 Drinks_ 开头的表格

任何帮助是极大的赞赏：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:41:06.140

MySQL 中没有“表 id”，因此结果集`SHOW TABLES`没有索引`id`。结果集中的唯一索引名为“Tables_in_DATABASENAME”。

此外，您应该使用 mysqli 库，因为旧的 mysql 库已被弃用。准备了一个例子：

```
<?php

$mysqli = new mysqli(
    'yourserver',
    'yourusername',
    'yourpassword',
    'yourdatabasename'
);

if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") "
         . $mysqli->connect_error;
}

$result = $mysqli->query('SHOW TABLES FROM `yourdatabasename` LIKE \'%food_%\'');
if(!$result) {
    die('Database error: ' . $mysqli->error);
}

$posts = array();
// use fetch_array instead of fetch_assoc as the column
while($row = $result->fetch_array()) {
    $tablename = $row[0];
    $posts []= array (
        'tablename' => $tablename
    );
}

var_dump($posts); 
```

# java - 穿越 AST ANTLR v2.x

> ID：14206842
> 
> 赞同：-2
> 
> 时间：2013-01-08T01:15:27.393
> 
> 标签：java, antlr

有人可以告诉我如何使用 java ANTLR v2.x 遍历 AST（即不使用 commontree）

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:50:20.697

你的问题很模糊。用 ANTLR 处理树的标准方法是编写一个树语法来对应解析器构建的树。大量示例位于[http://www.antlr2.org/doc/index.html](http://www.antlr2.org/doc/index.html)。

# ios - 调整区域不适用于 iOS 的地图

> ID：14206845
> 
> 赞同：2
> 
> 时间：2013-01-08T01:16:17.917
> 
> 标签：ios, xcode, maps

所以我在我的视图控制器中添加了一个 UIMap 并将其链接到“mapView”参考。坐标也可以在地图上完美运行。但是，我无法将地图缩放到坐标！我究竟做错了什么？

```
CLLocationCoordinate2D _coords = CLLocationCoordinate2DMake(lat, lon); //lat and lon are previously declared location values
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:MKCoordinateRegionMakeWithDistance(_coords, 250, 250)];
[self.mapView setRegion:adjustedRegion animated:YES]; //I have tried this with and without the self
 self.mapView.delegate = self;  
MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc] init];
annotationPoint.coordinate = _coords;
annotationPoint.title = @"George's House";
[mapView addAnnotation:annotationPoint];
 [mapView selectAnnotation:annotationPoint animated:YES]; 
```

# objective-c - 有大量资源的应用程序加载缓慢

> ID：14206847
> 
> 赞同：2
> 
> 时间：2013-01-08T01:16:19.443
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我无法理解为什么我的拥有大量资源的应用程序需要很长时间才能启动（不加载资源。程序在启动时不会加载很多资源）。

为了澄清（我这样做是为了确认问题与我的资源包中的资源数量有关）：

1.  我创建了一个新的 cocos2d 项目。
2.  然后我从新创建的项目中取出 helloWorldLayer 并将其放入 MY APP 中，该应用程序有很多资源（数千个小 png）。
3.  然后在我的应用程序 appDelegate 中，我运行了这一层（场景），而不是通常加载的场景（本来应该是 MainMenu）。输出与 cocos2d 模板完全相同。cocos2d default.png 后跟“hello world”。
4.  但是，MY APP 的启动时间比 cocos2d 项目要长得多，而且从 default.png 加载屏幕更改为实际代码（“Hello World”）也需要更长的时间；

这是预期的行为吗？为什么有区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:55:49.147

在 cocos2d 游戏中使用线程加载。确保在使用新加载的资源之前加载了资源一定的阈值。[这是我自己的问题，现在解决了。](https://stackoverflow.com/questions/12345556/cocos2d-continuously-scrolling-tile-based-game-strange-flash-only-in-device)cocos2d sdk中有一个线程示例..您也可以参考。

```
[NSThread detachNewThreadSelector:@selector(loadingThread:) toTarget:self withObject:nil];

-(void)loadingThread:(id)argument
{
    NSAutoreleasePool *autoreleasepool = [[NSAutoreleasePool alloc] init];
    CCGLView *view = (CCGLView*)[[CCDirector sharedDirector] view];
    EAGLContext *auxGLcontext = [[EAGLContext alloc]
                                 initWithAPI:kEAGLRenderingAPIOpenGLES2
                                 sharegroup:[[view context] sharegroup]];

    if( [EAGLContext setCurrentContext:auxGLcontext] ) {

        [self loadGameResource];

        glFlush(); 

        [EAGLContext setCurrentContext:nil];
    } else {
        CCLOG(@"cocos2d: ERROR: TetureCache: Could not set EAGLContext");
    }

    [auxGLcontext release];

    [autoreleasepool release];
} 
```

# c# - BytesToRead 大于 ReadBufferSize

> ID：14206854
> 
> 赞同：1
> 
> 时间：2013-01-08T01:17:27.530
> 
> 标签：c#, serial-port

我正在调试一些串行的东西，重要的部分是 SerialDataReceivedEventHandler。

我观察到（通过断点和悬停）读取的字节数几乎是缓冲区大小本身的两倍。喜欢吧？

这是代码

```
aUartSemaphoreThatTells.WhatTheUartBackgroundRxIsDoing = (int)aValueWhichIndicatesThat.theUARTisReceivingData;

SerialPort CurrentPort = (SerialPort)sender; //// Int routine gave is this in the arguments

int LastByteInUartBuffer = CurrentPort.ReadBufferSize;
int TheNumberOfBytes = CurrentPort.BytesToRead;
byte[] inputData = new byte[TheNumberOfBytes];
int RenameThisInt = CurrentPort.Read(inputData, 0, TheNumberOfBytes);                 //// This is a C# property method of ports

int Dest;
Dest = UartPlaceHolders.RxBufferLeader; //// Will index into buffer for Chief dispatch 
```

做一点鼠标悬停告诉我..

*   `LastByteInUartBuffer`有 4096
*   `TheNumberOfBytes` 有 8092
*   `RenameThisInt` 有 8092
*   `inputData` 有合适的东西

（我知道串行端口另一端的数据是什么样的，因为我自己生成它们）

我阅读了 MSDN 网站上的这两页 [ReadBufferSize](http://msdn.microsoft.com/en-US/library/system.io.ports.serialport.readbuffersize%28v=VS.80%29.aspx)和[BytesToRead](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.bytestoread%28v=VS.85%29.aspx)

任何人，请纠正我。如何从 4K 缓冲区中获取近 8K 字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:24:53.930

请注意有关[SerialPort.ReadBufferSize 属性](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readbuffersize.aspx)的注释：

> 因为 ReadBufferSize 属性仅表示 Windows 创建的缓冲区，所以它可以返回比 BytesToRead 属性更小的值，BytesToRead 属性同时表示 SerialPort 缓冲区和 Windows 创建的缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T01:26:15.807

答案实际上在文档中[`ReadBufferSize`](http://msdn.microsoft.com/en-US/library/system.io.ports.serialport.readbuffersize%28v=VS.80%29.aspx)：

> BytesToRead 属性可以返回一个大于 ReadBufferSize 属性的值，因为 ReadBufferSize 属性仅表示 Windows 创建的缓冲区，而 BytesToRead 属性表示除了 Windows 创建的缓冲区之外的 SerialPort 缓冲区。

在这种情况下，“Windows 创建的缓冲区”是底层驱动程序内存，而不是由 C# SerialPort 对象分配的内存。

# html - 相对图像响应式网页设计

> ID：14206857
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:17:53.807
> 
> 标签：html, css, image, responsive-design, css-position

我已经在这个网站上获得了一些很好的帮助，所以 Stack Overflow 是我遇到问题时的第一站！

我下载了一个响应式网站模板并进行了大量更改。我已经很完整了；但是，我还有一个问题。

我在我的网站顶部创建了一个登录表单，在另一个 SO 用户的帮助下，我创建了可点击的相关图像。问题是当显示网站的屏幕变得小于 479 像素时，相关图像似乎不在它们应有的位置。

我已在[此处](http://goo.gl/loAe9)上传了该网站，希望能在解决该问题方面提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:43:09.327

您的图像相对于表单或包装器 div 定位。它们应该相对于输入或包装输入的 div 定位，例如：

```
<form name="" action="" method="">
<div style="position: relative; overflow: auto; display: inline-block;">
    <img title="Forgotten Your Username?" onClick="open_win()" src="http://www.razorrobotics.com/images/question-mark.gif" class="forgotten_1">
    <input type="text" value="E-Mail Address" onBlur="if(this.value=='') this.value='E-Mail Address';" onFocus="if(this.value=='E-Mail Address') this.value='';" id="login">
<div style="position: relative; overflow: auto; display: inline-block;"> 
    <img title="Forgotten Your Password?" onClick="open_win()" src="http://www.razorrobotics.com/images/question-mark.gif" class="forgotten_2">
    <input type="password" value="Password" onBlur="if(this.value=='') this.value='Password';" onFocus="if(this.value=='Password') this.value='';" id="login">
</div>
<input type="submit" style="margin-left:-35px;" class="general_button" value="Log In" name="submit"> 
```

如果你这样做，然后把它放在你的登录按钮上......

```
display: inline-block;
margin-left: 0;
vertical-align: top; 
```

事情看起来不错。

另一个注意事项...确保不要为您的问号按钮链接打开新窗口。您通常不想破坏正常的浏览器功能并像那样流动。另外，为了简单起见，考虑使用 jQuery 的占位符插件而不是内联 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:48:22.887

我将尝试解释为什么会发生这种情况，而不仅仅是给你完成的代码。

所以，当你使用 position:relative; 您相对于其父元素定位元素。在 .forgotten_2 图像上，您使用了正确的：226px；并以这种方式将其定位在距其父级（ ）**的右边缘 226px 处。**
现在，当表单分成两行时，这种定位并不好。

你应该改用什么：

*   将图标作为背景图像放在输入字段中（如果它不必链接到某处）
*   更改 HTML 以将 div 包裹在输入及其图标周围，然后相对定位

正如我所见，您需要指向“忘记...”的链接，因此您可能应该使用第二种解决方案。这就是您的 HTML 的样子：

```
<form method="" action="" name="">

  <div class="input-box">
    <img class="forgotten_1" src="http://www.razorrobotics.com/images/question-mark.gif" onclick="open_win()" title="Forgotten Your Username?">
    <input type="text" id="login" onfocus="if(this.value=='E-Mail Address') this.value='';" onblur="if(this.value=='') this.value='E-Mail Address';" value="E-Mail Address">    
  </div>

  <div class="input-box">
    <img class="forgotten_2" src="http://www.razorrobotics.com/images/question-mark.gif" onclick="open_win()" title="Forgotten Your Password?">
    <input type="password" id="login" onfocus="if(this.value=='Password') this.value='';" onblur="if(this.value=='') this.value='Password';" value="Password">
  </div>

<input type="submit" name="submit" value="Log In" class="general_button" style="margin-left:-35px;">
</form> 
```

现在您将为输入框添加一些 CSS。

请记住，block_login（表单的父级）具有 float:right; 这可能会干扰您的造型；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T02:17:48.617

右边的bat，不应该是指多个元素同一个ID。您的两个字段的 ID 都是 #login。您很可能应该将其更改为 .login 类。

对我来说，? 第一个字段中的图像落在与第二个字段不同的位置。

由于您没有在视口更改时更改字段的大小，因此我建议您移动到一个 div（带有位置：相对集）以包含每个字段。将输入宽度和高度设为 100%，然后使用 top 和 right 绝对定位图像，使其位于输入的末尾。

# mod-rewrite - mod_rewrite 如何验证请求是文件还是目录？

> ID：14206858
> 
> 赞同：1
> 
> 时间：2013-01-08T01:18:05.927
> 
> 标签：mod-rewrite

鉴于以下条件和规则，mod_rewrite 如何验证请求是文件还是目录？

```
 RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

我的解释是，如果请求不是文件而不是目录**，**则处理具有模式的重写规则任何不是问号的字符，用反向引用替换为查询字符串`$1`

不是每个请求都是一个文件或目录，例如 index.php、style.css、media 等吗？条件不应该是

```
 RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

如果请求是文件**或**目录，则会读取，然后处理重写规则

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:54:54.650

根据[mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html) `REQUEST_FILENAME`是：

> 与请求匹配的文件或脚本的完整本地文件系统路径，如果在引用 REQUEST_FILENAME 时服务器已经确定了这一点。否则，例如在虚拟主机上下文中使用时，与 REQUEST_URI 的值相同。

您可以将其视为真实文件系统上可能存在或不存在的路径。传入的请求可能类似于 http:\\example.com\blah.php。如果那是一个真实的文件，那么你说你想使用它。但是服务器上可能没有真正的名为 blah.php 的文件。在这种情况下，您不会返回 404 错误，而是将请求传递到名为 index.php 的文件中。

简而言之，您不应将 URL 的各个部分视为文件或目录。它们不需要映射到真实的文件系统路径（尽管它们经常这样做）。

# c - “块状”柏林噪音

> ID：14206861
> 
> 赞同：8
> 
> 时间：2013-01-08T01:18:38.677
> 
> 标签：c, perlin-noise

我最近一直在尝试在 C 中实现 Perlin 噪声生成器（基于[Ken Perlin 的网站](http://www.noisemachine.com/talk1/)，使用 SDL 库作为屏幕输出），但输出显示插值块之间的边缘不连续或平滑 - 插值块确实表现为块。

我尝试了四种插值，所有“平滑”的看起来都差不多；相比之下，只有余弦看起来（非常）稍微好一点，而直线看起来很可怕。（以下是余弦和线性） ![余弦插值噪声](../Images/b4060e076f097014611b31d0db9dcde7.png) ![线性插值噪声](../Images/1b033ae718b722b3fc8f553e11d1794c.png)

具有讽刺意味的是，如果对噪声进行分形总和（我的最终目的），线性会在“块状”方面消除平滑插值，实际上看起来几乎没问题。 ![分形和，余弦插值](../Images/e92571fbe56cef3a402b565ade23a939.png) ![分形和，线性插值](../Images/39bd35f67ebe273bf069781c364b3a0e.png)

我很确定我的代码中缺少某些东西或做错了，但我似乎找不到它。

## 关于什么（或什么条件）可能导致这些块伪影的任何建议？

作为参考，我当前的代码如下：

```
#include<stdio.h>
#include<math.h>
#include<SDL/SDL.h>

void normalize3(float *vec3){
    float distX=0,distY=0,distZ=0;
    distX=vec3[0];
    distX*=distX;
    distY=vec3[1];
    distY*=distY;
    distZ=vec3[2];
    distZ*=distZ;
    float dist=sqrtf(distX+distY+distZ);
    vec3[0]/=dist;
    vec3[1]/=dist;
    vec3[2]/=dist;
}

float sinterpolate(float scale){
    //return scale*scale*(3.0-2*scale); //Classic 3*t^2-2*t^3

    /*float t=scale*scale;
    float u=t*t;
    return (6.0*u*scale-15.0*u+10.0*t*scale);*/ //Improved 6*t^5-15*t^4+10*t^3

    return (0.5-cosf(scale*M_PI)/2.0); //Straight cosine interpolation
}

float linterpolate(float a,float b,float scale){
    return a+scale*(b-a);
}

float noise3(float *vec3,float *grads,Uint8 *perms){
    vec3[0]=fmodf(vec3[0],256.0);
    vec3[1]=fmodf(vec3[1],256.0);
    vec3[2]=fmodf(vec3[2],256.0);
    Uint8 ivec3[3];

    float relPos[3],temp;
    float cube[2][2][2];
    Uint8 index;

    //One loop for each dimension of noise.
    for(int x=0;x<2;x++){
        ivec3[0]=vec3[0];
        ivec3[0]+=x;
        relPos[0]=vec3[0]-ivec3[0];
        for(int y=0;y<2;y++){
            ivec3[1]=vec3[1];
            ivec3[1]+=y;
            relPos[1]=vec3[1]-ivec3[1];
            for(int z=0;z<2;z++){
                ivec3[2]=vec3[2];
                ivec3[2]+=z;
                relPos[2]=vec3[2]-ivec3[2];

                index=ivec3[0]+perms[ivec3[1]+perms[ivec3[2]]];

                temp=relPos[0]*grads[3*index];
                temp+=relPos[1]*grads[3*index+1];
                temp+=relPos[2]*grads[3*index+2]; //The gradient's dot product
                                                  //with respect to the point
                                                  //being analyzed

                cube[x][y][z]=temp;
            }
        }
    }

    ivec3[0]--;
    ivec3[1]--;
    ivec3[2]--;
    relPos[0]=vec3[0]-ivec3[0];
    relPos[1]=vec3[1]-ivec3[1];
    relPos[2]=vec3[2]-ivec3[2];
    relPos[0]=sinterpolate(relPos[0]);  //Comment these
    relPos[1]=sinterpolate(relPos[1]);  //if you want
    relPos[2]=sinterpolate(relPos[2]);  //Linear Interpolation.

    return linterpolate(linterpolate(linterpolate(cube[0][0][0],cube[0][0][1],relPos[2]),linterpolate(cube[0][8][0], cube[0][9][1],relPos[2]),relPos[1]),linterpolate(linterpolate(cube[1][0][0],cube[1][0][1],relPos[2]),linterpolate(cube[1][10][0], cube[1][11][1],relPos[2]),relPos[1]),relPos[0]);
}

int main(int argc,char **args){
    SDL_Init(SDL_INIT_VIDEO);
    SDL_Surface *screen=SDL_SetVideoMode(512,512,32,SDL_SWSURFACE);
    srandom(SDL_GetTicks());  //If not on OSX/BSD, use srand()
    Uint32 *pixels;
    Uint32 grays[256];
    for(int x=0;x<256;x++){
        grays[x]=SDL_MapRGB(screen->format,x,x,x);
    }

    float grads[768];
    Uint8 perms[256];
    //First, generate the gradients and populate the permutation indexes.
    for(int x=0;x<256;x++){
        grads[3*x]=random();    //If not on OSX/BSD, use rand()
        grads[3*x+1]=random();
        grads[3*x+2]=random();
        normalize3(grads+3*x);

        perms[x]=x;
    }

    //Let's scramble those indexes!
    for(int x=0;x<256;x++){
        Uint8 temp=perms[x];
        Uint8 index=random();
        perms[x]=perms[index];
        perms[index]=temp;
    }

    printf("Permutation Indexes: ");
    for(int x=0;x<256;x++){
        printf("%hhu, ",perms[x]);
    }
    putchar('\n');

    Uint32 timer=SDL_GetTicks(),frameDelta;
    SDL_Event eventos;
    float zoom=-5.0;
    eventos.type=SDL_NOEVENT;
    while(eventos.type!=SDL_QUIT){
        SDL_PollEvent(&eventos);
        if(SDL_GetKeyState(NULL)[SDLK_UP]){
            zoom-=0.001*frameDelta;
        }
        else if(SDL_GetKeyState(NULL)[SDLK_DOWN]){
            zoom+=0.001*frameDelta;
        }
        float scale=expf(zoom);
        pixels=screen->pixels;
        float pos[3];
        pos[2]=SDL_GetTicks()/3000.0;
        for(int y=0;y<512;y++){
            pos[1]=y*scale;
            for(int x=0;x<512;x++){
                pos[0]=x*scale;
                float fracPos[3];
                fracPos[0]=pos[0];
                fracPos[1]=pos[1];
                fracPos[2]=pos[2];
                float color=noise3(fracPos,grads,perms);

                //Fractal sums of noise, if desired
                /*fracPos[0]*=2.0;
                fracPos[1]*=2.0;
                fracPos[2]*=2.0;
                color+=noise3(fracPos,grads,perms)/2.0;

                fracPos[0]*=2.0;
                fracPos[1]*=2.0;
                fracPos[2]*=2.0;
                color+=noise3(fracPos,grads,perms)/4.0;

                fracPos[0]*=2.0;
                fracPos[1]*=2.0;
                fracPos[2]*=2.0;
                color+=noise3(fracPos,grads,perms)/8.0;

                fracPos[0]*=2.0;
                fracPos[1]*=2.0;
                fracPos[2]*=2.0;
                color+=noise3(fracPos,grads,perms)/16.0;

                */

                *pixels++=grays[127+(Sint8)(256.0*color)];
            }
        }

        SDL_Flip(screen);
        frameDelta=SDL_GetTicks()-timer;
        printf("Running @ %.3f FPS!\n",1000.0/frameDelta);
        if(frameDelta<16){
            SDL_Delay(16-frameDelta);
        }
        timer=SDL_GetTicks();
    }

    return 0;
} 
```

使用方法：跑步时，按住向上或向下键可放大或缩小噪声网格。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T14:46:42.397

我终于找到了问题：梯度生成器。

我假设 random() 函数会将其二进制值传递给 grads[] 数组，从而覆盖整个浮点数范围。不幸的是，情况并非如此：它的返回值首先被转换为浮点数，然后存储在数组中。我最大的问题是**所有生成的向量都有正的成员值**。

这证明了块伪影是合理的：有很多“山”（高值）彼此相邻生成，但没有“谷”（低值），两个相邻的山最终会发生冲突并沿着整数值生成线条。

意识到这一点后，我尝试做一些指针杂耍并直接以 Uint32 形式存储值，但是渐变中的值变得古怪（infs、NaNs、1.0s 和 0.0s 一路），所以我回到了原来的路由并否定代码本身中的数字。

这个 7-liner 解决了整个问题：

```
int y=random()&7;
if(y&1)
    grads[3*x]*=-1.0f;
if(y&2)
    grads[3*x+1]*=-1.0f;
if(y&4)
    grads[3*x+2]*=-1.0f; 
```

只需将其放在规范化功能之前或之后*即可*。

*现在*它看起来像柏林噪声： ![至少，柏林噪音。](../Images/a6918606371b31501d4472b2b8bc98c2.png)

分形和看起来也好一点： ![分形和改进](../Images/52123397b5a04f4dfaf85a1be2086293.png)

@DiJuMx：我之前看过“改善噪声”论文，但没有意识到渐变会对噪声外观产生多大影响。此外，通过尝试将坐标空间从 0~256 更改为 0~1 会导致分形和不再起作用，并且生成的图像具有相同的块伪影。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:36:24.927

这是 Perlin 噪声的原始实现的问题。

他在[这里有一张纸](http://mrl.nyu.edu/~perlin/paper445.pdf)

在整数坐标处的梯度计算过程中，使用的一个或多个向量将为 0，因此整体梯度将为 0。结果，您会在整数坐标处得到一个线网格。

解决这个问题的一种方法是让坐标空间从 0 到 1 而不是 0 到 512。

[另一种方法是按照他的论文](http://mrl.nyu.edu/~perlin/paper445.pdf)中的描述来实施修复。

或者最后，不要使用原来的 Perlin Noise，而是换成他也开发的 Simplex Noise，paper [here](http://www.csee.umbc.edu/~olano/s2002c36/ch02.pdf)和解释[here](http://staffwww.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf)。

# jquery - jquery循环选项卡，尝试添加悬停功能

> ID：14206867
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:19:32.543
> 
> 标签：jquery, tabs, hover, cycle

任何人都可以帮忙吗？

示例：http: [//goo.gl/6Wpn7](http://goo.gl/6Wpn7)

**我正在尝试在此处添加悬停功能，而不是单击该项目来触发锚点/也就是转到相关幻灯片——这看起来很复杂吗？**

编码：

查询

```
$slideshow = {
context: false,
tabs: false,
timeout: 2000,      // time before next slide appears (in ms)
slideSpeed: 1000,   // time it takes to slide in each slide (in ms)
tabSpeed: 300,      // time it takes to slide in each slide (in ms) when clicking through tabs
fx: 'fade',   // the slide effect to use

init: function() {
// set the context to help speed up selectors/improve performance
this.context = $('#slideshow');

// set tabs to current hard coded navigation items
this.tabs = $('ul.slides-nav li', this.context);

// remove hard coded navigation items from DOM 
// because they aren't hooked up to jQuery cycle
this.tabs.remove();

// prepare slideshow and jQuery cycle tabs
this.prepareSlideshow();
},

prepareSlideshow: function() {
// initialise the jquery cycle plugin -
// for information on the options set below go to: 
// http://malsup.com/jquery/cycle/options.html
$('div.slides > ul', $slideshow.context).cycle({
fx: $slideshow.fx,
timeout: $slideshow.timeout,
speed: $slideshow.slideSpeed,
fastOnEvent: $slideshow.tabSpeed,
pager: $('ul.slides-nav', $slideshow.context),
pagerAnchorBuilder: $slideshow.prepareTabs,
before: $slideshow.activateTab,
pauseOnPagerHover: true,
pause: true
});    

$(".slides-nav li a").hover(
function(event) {
$(this).removeClass('on');

},
function (event) {
// The mouse has left the element, can reference the element via 'this'
}
);        
},

prepareTabs: function(i, slide) {
// return markup from hardcoded tabs for use as jQuery cycle tabs
// (attaches necessary jQuery cycle events to tabs)
return $slideshow.tabs.eq(i);
},

activateTab: function(currentSlide, nextSlide) {
// get the active tab
var activeTab = $('a [href="#' + nextSlide.id + '"]', $slideshow.context);

// if there is an active tab
if(activeTab.length) {
// remove active styling from all other tabs
$slideshow.tabs.removeClass('on');

// add active styling to active button
activeTab.parent().addClass('on');
}            
}            
};

$(function() {
// add a 'js' class to the body
$('body').addClass('js');

// initialise the slideshow when the DOM is ready
$slideshow.init();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:14:24.437

你可以使用[pagerEvent: 'mouseover'](http://jquery.malsup.com/cycle/pager5.html)选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:01:13.460

你可以做一个简单的工作。

```
$(".slides-nav li a").hover(function(){
    $(this).click();
}, function(){
    //do nothing
}); 
```

悬停和单击将同时工作。

# mysql - 两列作为mysql中的主键？

> ID：14206868
> 
> 赞同：19
> 
> 时间：2013-01-08T01:19:34.473
> 
> 标签：mysql

今天我发现你可以使用两列（tsql）来拥有一个主键。PK 必须是唯一的，但两列都不是（组合必须是唯一的）。

我觉得那很酷。至少有两个这样的问题我问人们在哪里对我大喊大叫，说我做错了我的（mysql）数据库，只有一个人说我做得很好。所以...这让我有些怀疑

这和我想的一样吗？

```
create table User(
   id INT primary key AUTO_INCREMENT ,  
   ipaddr  TEXT  NOT NULL , 
   email  TEXT  NOT NULL
);
create table test(
  a  INT  NOT NULL ,
  b  INT  NOT NULL ,
  dummy  INT  NOT NULL ,
  FOREIGN KEY (a) REFERENCES User(id),
  FOREIGN KEY (b) REFERENCES User(id),
  PRIMARY KEY(a,b)
); 
```

我运行了以下内容，因此看来我正在做我认为的事情（组合必须是唯一的。但列中的相同值不需要是唯一的）。我应该知道什么吗？关于mysql没有人向我提到这一点一定是有原因的吗？

```
mysql> insert into test(a,b,dummy) select 1,1,1;
Query OK, 1 row affected (0.03 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> insert into test(a,b,dummy) select 1,2,2;
Query OK, 1 row affected (0.03 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> insert into test(a,b,dummy) select 2,1,3;
Query OK, 1 row affected (0.03 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> insert into test(a,b,dummy) select 2,2,4;
Query OK, 1 row affected (0.03 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> insert into test(a,b,dummy) select 1,2,5;
ERROR 1062 (23000): Duplicate entry '1-2' for key 'PRIMARY' 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-08T01:32:32.707

你想多了：

*   主键（无论涉及多少列）必须是唯一的
*   你的主键是两列 a, b

因此 a 和 b*一起*必须是唯一的。

a 和 b 的个体值无关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T01:40:17.557

是的，这在 SQL 中是很正常的事情，并且可以正常工作（具有复合主键，其中多个字段共同构成一个唯一值）。

两个注意事项：

1.  确保它是必要的。经常这样，然后就好了。但有时这表明您需要进一步规范化您的数据模型。

2.  我在想你不想让和 ab 成为另一个表的外键，然后让它们成为你表的复合主键。如果您设置级联删除，其中一个用户 id 而不是另一个被删除，会发生什么？所以复合主键很好，但是你不想来自“不相关”的外键。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-27T16:56:23.940

你的想法很好。我经常使用多字段主键，仅仅是因为它使我的数据库设计更具逻辑性、可管理性和可读性。您可以将多字段主键想象为具有唯一名称。例如：

多字段主键：

```
(First ,Middle, Last) 
```

示例值：

```
('Michael', 'A.', 'Kline') 
```

可能有很多人的“名字”为“Michael”和/或“中间”的名字为“A”。和/或“姓氏”“Kline”，但就您的数据库而言，只能有一个“Michael A. Kline”。

通常，多字段主键是其他表中其他主键的组合，记录内容描述了与特定键值相关的内容。例如：

```
Table #1: Student Records (KEY: student_id)
Table #2: Course Records (KEY: course_id)
Table #3: Student Grades (KEY: student_id, course_id) 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-08T01:25:56.603

是的，您必须注意复制您的**PRIMARY_KEY**，这是一个**组合**键，在您的情况下不会被复制。

无论如何，当您设置两个 PK 时，这意味着您的签名是**PK1+PK2**，因此您可以复制 PK1 或 PK2，但不能同时复制它们。

*希望我有所帮助*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-05T10:16:08.683

还有一件事要注意：主键在 MySQL 中自动建立索引。您在主键中提到的列的顺序确实对性能很重要，如此[处所述](http://ralpartha.blogspot.in/2006/12/primary-key-order-does-matter.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-08T01:25:43.453

我相信正在发生的事情是成对的列在一起是主要的。例如，您知道不能有重复的主列 例如：如果 col "a" 是主列，则不能有两行具有相同的 a 值。

在此示例中，您有两个初选；这意味着每个 col 对只能有一个唯一值。例如，如果 col 'a' 和 'b' 是主要的，而 'c' 不是： a|b|c 1,2,3 有效 1,4,5 有效，5,1,6 有效 9,1,10 有效

但你不能有： 9,8,10 9,8,6 因为对于那个 (9,8) 对，你只能有一个唯一的值......

这有意义吗，还是您希望我进一步详细说明？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-19T06:02:12.270

ALTER TABLE `TableName`DROP PRIMARY KEY, ADD PRIMARY KEY( `column1`, `column2`); 如果您之前已设置主键，请尝试此操作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-30T15:14:24.580

为了更容易解释，我将只使用一张表。创建一个包含 2 个 int 列的表，并在这两个列上创建一个 PK。就像问题一样。

```
create table test(
  a  INT  NOT NULL ,
  b  INT  NOT NULL ,
  PRIMARY KEY(a,b)); 
```

现在我们可以添加行，直到出现错误

```
insert into test values(1,1); 
Query OK, 1 row affected (0,00 sec)

insert into test values(1,2); 
Query OK, 1 row affected (0,00 sec)

insert into test values(1,1); 
ERROR 1062 (23000): Duplicate entry '1-1' for key 'PRIMARY' 
```

这是合乎逻辑的，因为当执行最后一条语句时，构成 PK 的 2 列的组合值不再是唯一的。

允许将值 1 的 2 倍存储在 a 中，因为那不是 PK。PK 是列 a 和 b 的组合值。

# request - 如何使用请求-回复模式实现 JMS 路由器

> ID：14206869
> 
> 赞同：0
> 
> 时间：2013-01-08T01:19:34.653
> 
> 标签：request, jms, router, correlation, reply

我有几个应用程序需要使用 JMS 相互通信。我将它们描述为服务器和客户端。执行以下步骤：

1.  客户端向服务器发送一个请求，记住消息 ID。
2.  服务器向给定的回复地址发送回复（并且还根据请求的消息 ID 设置相关 ID）。
3.  客户端使用相关 ID 匹配对请求的回复。

如果只有这两个，这很好用。

当我们引入（基于内容的）路由器时，会执行以下步骤：

1.  客户端向路由器发送一个请求，记住消息 ID。
2.  Router检查消息的内容并将消息转发给Server。（转发消息 ID 更改时。）
3.  服务器向给定的回复地址发送回复（并且还根据请求的消息 ID 设置相关 ID）。
4.  客户端与请求的回复**不匹配，因为路由器更改了消息 ID。**

我终其一生都无法弄清楚如何在符合 JMS 规范的同时正确实现路由器。

我想出了以下内容，但不知道这是否是最佳做法：

1.  客户端向路由器发送一个请求，记住消息 ID。
2.  路由器检查消息的内容。
3.  路由器记住原始消息并向服务器发送新消息（将回复地址设置为路由器的回复通道）。
4.  服务器向给定的回复地址发送回复（并且还根据新请求的消息 ID 设置相关 ID）。
5.  路由器将回复与路由器发出的请求相匹配。
6.  Router根据Server的回复创建回复，将关联ID设置为原始消息的消息ID。
7.  客户端匹配路由器对原始请求的回复。

JMS 路由器应该如何工作/我的设计是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:21:06.283

当你有一个基于内容的路由器时事情不起作用的原因是基于内容的路由器正在创建一个具有新消息 ID 的新消息对象，并且它没有从原始消息中设置相关 ID。

* * *

这是我过去的做法。假设您有以下队列。

*   通道 A - 客户在这里提出请求
*   通道 S - 服务器在此处获取请求

    1.  客户端向通道 A 发出请求并设置客户端特定的关联 ID 并回复队列
    2.  路由器在 A 上使用消息，创建一条消息给 S 并设置相关 ID 并回复到队列集
    3.  服务器使用客户端相关 ID 回复对队列的回复

所以路由器根本不应该参与响应消息的处理。话虽如此，这里是实现此模式的一些常见错误。

*   服务器不会在它生成的响应消息中设置关联 id，因为最终消费者看到了对队列的回复，而只是忽略了关联 id。
*   消息队列有配置错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:12:50.973

我正在寻找一个更权威的答案，可能包含对官方文档的引用，所以我做了更多的研究，这是我能找到的最好的：

在参考文档中描述了两种模式：

# 消息 ID 模式

1.  客户端在请求中设置一个回复地址并将其发送到服务器。
2.  服务器复制请求的消息 ID，将其设置为回复的相关 ID，并将回复发送到请求的回复地址。

# 相关 ID 模式

1.  客户端在请求中设置一个关联 ID 并将其发送到服务器。
2.  服务器将预先设定的请求关联标识复制为回复的关联标识，并将回复发送到预定义的队列中。

下图给了我实现消息 ID 模式并将路由器实现为代理的想法：

![消息 ID 模式示例](../Images/212ee828f77fb63f1b7657b660695b3a.png)

所以简而言之，我已经接受了我最初的想法。

来源：[http ://docs.oracle.com/cd/E13171_01/alsb/docs25/interopjms/MsgIDPatternforJMS.html](http://docs.oracle.com/cd/E13171_01/alsb/docs25/interopjms/MsgIDPatternforJMS.html)

# javascript - 使用 WinJs.xhr rss feed 在 iframe 中获取 Windows 8 中的 URL

> ID：14206872
> 
> 赞同：0
> 
> 时间：2013-01-08T01:20:16.990
> 
> 标签：javascript, html, windows, windows-8, rss

所以我正在 Windows 8 中开发一个程序，我的目标是获得一个 rss 提要，它可以工作。但是，当单击时，我希望它显示 url 的 iframe。这是我拥有的javascript代码：

```
function GetRss() {
        WinJS.xhr({ url: "http://URL.com/rss", responseType: 'responseXML' }).then(function (rss) {
           var items = rss.responseXML.querySelectorAll("item");

           for (var n = 0; n < items.length; n++) {
               var article = {};
               article.title = items[n].querySelector("title").textContent;
               var imageStart = items[n].textContent.indexOf('<img src="') + 11;
               var imageEnd = items[n].textContent.indexOf('"', imageStart);
               article.thumbnail = items[n].textContent.substring(imageStart, imageEnd);
               articlesList.push(article);
               article.content = items[n].querySelector("link");
            }
        });

    } 
```

我的html是：

```
 <div id="articlecontent"></div> 
```

谢谢。

# c# - 将代码从 Windows 游戏项目转换为 Xbox 游戏项目

> ID：14206873
> 
> 赞同：1
> 
> 时间：2013-01-08T01:20:23.430
> 
> 标签：c#, game-physics, xbox

我有一台我在上面编码的 PC 和一台我刚刚开始测试的 Xbox。我在我的 PC 上的一个 Windows 游戏项目下制作了一些程序（甚至是整个游戏）。我想采用相同的代码，然后在 Xbox 游戏项目的（可能）新项目中简单地对其进行测试。因此，我的问题是：如何将代码从 Windows 游戏项目转换为 XBox 游戏项目？

# asp.net - 如何在回发中保留 DataList 内的 DropDownList 选择？

> ID：14206881
> 
> 赞同：0
> 
> 时间：2013-01-08T01:21:17.413
> 
> 标签：asp.net, drop-down-menu, postback, viewstate, datalist

我是 ASP.NET 的初学者，但我正在尝试修复其他人编写的应用程序中的错误：下拉列表的选择不会在回发中保留。

以下是我认为代码的相关部分：

```
<asp:DataList ... OnItemDataBound="PopulateDropDownList">
    ...
    <FooterTemplate>
        <asp:DropDownList ... AutoPostBack="true" OnSelectedIndexChanged="DoSomething"/> 
    </FooterTemplate>                               
</asp:DataList> 
```

我相信我可以将当​​前选择存储在会话中、静态变量或其他地方，但这似乎更像是一种变通方法而不是一种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:31:22.770

通常您可以将 EnableViewState 设置为“true” - 如下所示：

```
<asp:DropDownList ... EnableViewState="true" ...>
</asp:DropDownList>` 
```

但我不是 100% 确定它是否在 DataList 中以相同的方式工作，但我猜它应该。

您可以从[了解 ASP.NET](http://msdn.microsoft.com/en-us/library/ms972976.aspx)视图状态中了解有关视图状态的更多信息。

确保只为绝对需要的控件启用 ViewState，否则会遇到内存问题。从上述来源（强调我的）：

> EnableViewState 属性在 System.Web.UI.Control 类中定义，因此所有服务器控件都具有此属性，包括 Page 类。**因此，您可以通过将 Page 类的 EnableViewState 设置为 False 来指示不需要保存整个页面的视图状态。**（这可以在 Page.EnableViewState = false 的代码隐藏类中完成；或者作为@Page 级指令 - <%@Page EnableViewState="False" %>。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:48:36.463

首先检查页面视图状态是否设置为 True of False。包括 EnableViewState="true" 肯定会在这里达到您的目的，您无需在会话等中保存选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T03:08:42.277

在代码隐藏中，在页面`Init`事件而不是`Load`事件中进行数据绑定可以解决该问题。但是，这样做的一个缺点是某些控制值在`Init`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T21:43:07.550

一位同事指出，即使当前请求是回发，该`Page_Load`方法也会重新绑定。如果请求不是回发，则`DataList`通过将其更改为仅将数据绑定到 来解决问题。`DataList`

这似乎是问题的根本原因，所以我认为这是最好的解决方案。

# objective-c - 在Objective-c中删除字符串中的最后一个单词

> ID：14206885
> 
> 赞同：5
> 
> 时间：2013-01-08T01:21:33.807
> 
> 标签：objective-c

将字符串分成两部分的最有效方法是什么，如下所示

一部分是字符串中最后一个空格字符之后的字符串的最后一个单词 第二部分是字符串的其余部分

例如“这是一个句子” 一部分：“句子” 第二部分：“这是一个” //注意这个字符串的末尾有空格

“这是一个”部分：“”第二部分：“这是一个”

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T01:35:08.313

尝试这样的事情：

```
NSString *str = @"this is a sentence";

// Search from back to get the last space character
NSRange range = [str rangeOfString: @" " options: NSBackwardsSearch];

// Take the first substring: from 0 to the space character
NSString *str1 = [str substringToIndex: range.location]; // @"this is a" 

// take the second substring: from after the space to the end of the string
NSString *str2 = [str substringFromIndex: range.location +1];  // @"sentence" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T01:42:20.390

从语义上讲，您是要删除最后一个单词，还是要在最后一个空格字符之后将所有内容都砍掉，这就是您所描述的？我问是因为它们实际上不是一回事，具体取决于文本的语言。

如果您想在最后一点空格之后切掉所有内容，那么这里的其他答案会很好。但是如果你想砍掉最后一个词，那么你需要更深入地挖掘并使用单词枚举API：

```
NSString *removeLastWord(NSString *str) {
    __block NSRange lastWordRange = NSMakeRange([str length], 0);
    NSStringEnumerationOptions opts = NSStringEnumerationByWords | NSStringEnumerationReverse | NSStringEnumerationSubstringNotRequired;
    [str enumerateSubstringsInRange:NSMakeRange(0, [str length]) options:opts usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
        lastWordRange = substringRange;
        *stop = YES;
    }];
    return [str substringToIndex:lastWordRange.location];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T01:34:26.767

您可以使用`-[NSString componentsSeparatedByString:]`and`-[NSArray componentsJoinedByString:]`将字符串拆分为单独的组件（单词）并再次拆分：

```
NSString *sentence = @"This is a sentence";
NSLog(@"Sentence: \"%@\"", sentence);
NSCharacterSet *whitespace = [NSCharacterSet whitespaceCharacterSet];
sentence = [sentence stringByTrimmingCharactersInSet:whitespace];

NSMutableArray *words = [[sentence componentsSeparatedByCharactersInSet:whitespace] mutableCopy];
NSString *lastWord = [words lastObject];
[words removeLastObject];
NSString *firstPart = [words componentsJoinedByString:@" "];

NSLog(@"Last word: \"%@\" First part: \"%@\"", lastWord, firstPart); 
```

输出：

```
2013-01-07 18:36:50.566 LastWord[42999:707] Sentence: "This is a sentence"
2013-01-07 18:36:50.569 LastWord[42999:707] Last word: "sentence" First part: "This is a" 
```

此代码假定需要注意一些事项。首先，它会修剪您在句子开头/结尾提到的空格，但不会保留它。因此，如果该空白对您而言实际上很重要，则您必须考虑到这一点。此外，如果句子为空或仅包含一个单词，它不会做任何特别的事情（这种方式很安全，只是不是特别复杂）。

# python - 在 perl 或 python 中启动停止守护程序库

> ID：14206887
> 
> 赞同：0
> 
> 时间：2013-01-08T01:21:37.567
> 
> 标签：python, perl, process, daemon

> **可能重复：**
> [如何在 linux 中将 Perl 脚本作为系统守护进程运行？](https://stackoverflow.com/questions/766397/how-can-i-run-a-perl-script-as-a-system-daemon-in-linux)

我正在编写的许多维护 shell 脚本需要被守护，我想要一个执行以下操作的库：

`script`

```
#!/usr/bin/...

use daemonize;

... 
```

或者

```
daemonize('/path/to/external/script/or/program'); 
```

接着：

```
./script start
./script status
./script stop 
```

这必须以非 root 身份运行，而不是 init 进程的一部分。

我更喜欢 Perl 或 Python 中的库。

我考虑过 libslack.org 的 [“守护进程”](http://libslack.org/manpages/daemon.3.html)，但这需要用 C 语言编写我的脚本并编译它们。我还必须编写代码来处理命令行参数。另一种选择是调用“守护程序”的编译版本，但这似乎很混乱。就像我说的，一个简单的 Perl 或 Python 解决方案将是首选。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:32:21.990

Karthik T 给出了 perl 的答案。或者，更确切地说，一些最好的答案，因为当然有很多方法可以做到这一点。当然，对于 Python，应该只有一种方法可以做到这一点。

幸运的是，[PEP 3143](http://www.python.org/dev/peps/pep-3143/)指定了 Python 守护程序库应该做什么，并且在 有一个参考实现[`python-daemon`](http://pypi.python.org/pypi/python-daemon/)，希望在未来的 3.x 版本中包含在标准库中。

如果由于某种原因这对您不起作用（例如，IIRC，它需要 2.6+ 或 3.1+，而您可能拥有 2.5 或 3.0），那么 PEP 最后会提供指向各种其他模块和配方的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T01:25:55.253

您是否调查过[Proc::Daemon](http://search.cpan.org/~deti/Proc-Daemon-0.14/lib/Proc/Daemon.pod)。

> Proc::Daemon - 将 Perl 程序作为守护进程运行。

或者有[Working::Daemon](http://search.cpan.org/~abergman/Working-Daemon-0.31/lib/Working/Daemon.pm)

> Working::Daemon - 用于将脚本变成守护进程的 Perl 扩展。
> 它还支持启动、停止、状态和重新启动。

还讨论了[如何在 Linux 中将 Perl 脚本作为系统守护进程运行？](https://stackoverflow.com/questions/766397/how-can-i-run-a-perl-script-as-a-system-daemon-in-linux)

其他参考资料： [http ://www.perlmonks.org/?node_id=](http://www.perlmonks.org/?node_id=478839) [478839 http://erwan.lemonnier.se/talks/working_daemon.pdf](http://erwan.lemonnier.se/talks/working_daemon.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T01:38:41.560

就您与库的交互方式而言，这并不完全适合，但[supervisord](http://supervisord.org/)是一个广泛用于 Web 操作的系统。不是在脚本中包含对它的引用，而是为每个要守护的程序编写一个配置（调用 one `server`），在其中指定要运行的脚本、各种环境变量，甚至是要运行的程序实例的数量跑。然后你向它发出命令，如下所示：

```
$ supervisorctl start server
$ supervisorctl stop server 
```

您还可以告诉 supervisord 启动或停止它管理的所有进程：

```
$ supervisorctl start all
$ supervisorctl stop all 
```

这种方法很棒，因为它不需要您修改自己的代码。因此，它与编写程序的语言无关，这是另一个好处。

# javascript - 在 Firefox 中单击中键在新选项卡中打开自定义 URL

> ID：14206890
> 
> 赞同：1
> 
> 时间：2013-01-08T01:22:05.387
> 
> 标签：javascript, events, firefox, mouseclick-event

所以，目前我有一个脚本可以拦截任何鼠标点击标签，修改传出链接，并将用户发送到他们的路上：

```
$("a[href*='" + someDomain + "']").bind('click keypress', function(event) {
    event.preventDefault();
    var link = this.href;
    var newLink = link + params;
    var button = event.button;
    if(button && button == 0)) {
        window.location = newLink;
    } else if(button && button === 1) {
        window.open(newLink, '_blank');
    }
}); 
```

此代码将确定它是左键单击还是中键单击，并重定向当前页面，或相应地在新窗口/选项卡中打开。

据我所知，代码在 Chrome/IE 中运行良好。但是，在最新版本的 Firefox 中，只有左键单击有效。

对于中键单击，该事件未注册。所以，我的第一个想法是研究必须触发的其他事件。我能找到的唯一一个是 mousedown/mouseup（单击是这些的组合）。

使用 mousedown 或 mouseup，然后我让事件在 Firefox 中正确注册中键。但是，问题就变成了 Firefox 将拒绝从不是 CLICK 事件结果的 javascript 代码打开任何新窗口。

所以....任何线索如果这实际上是可能的？我不想让用户必须允许弹出窗口，或者重新映射他们的中间点击功能以在当前窗口中打开。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:36:01.733

> 但是，在某些浏览器中，鼠标右键和中键的默认操作无法禁用，或者只能通过更改浏览器设置来禁用。对浏览器设置的此类更改通常会影响通过浏览器查看的所有页面，并且通常无法通过 Javascript 完成。由于很少有用户愿意这样做，这几乎意味着这些鼠标事件不能从 Javascript 中使用。

来自[http://www.unixpapa.com/js/mouse.html](http://www.unixpapa.com/js/mouse.html)

# c++ - PEB 是否存储已经终止的进程？

> ID：14206892
> 
> 赞同：0
> 
> 时间：2013-01-08T01:22:26.173
> 
> 标签：c++, process

PEB 在 windows 中存储进程的信息。进程结束后它是否仍然存储它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:40:12.470

它是一个进程内数据结构。没有更多的过程 == 没有更多的 PEB。

CreateProcess 返回的进程句柄引用了一个内核数据结构，只要您不关闭句柄，即使进程终止，它也会一直存在。在该句柄上调用 WaitForSingleObject() 会告诉您进程何时退出。GetExitProcessCode() 告诉你它是如何退出的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:26:57.843

不，PEB 只保存有关当前正在运行的进程的信息。您可以在此处阅读有关 PEB 的更多信息：http://en.wikipedia.org/wiki/Process_Environment_Block

AFAIK 在 Windows 操作系统中没有这样的块来保存终止进程的数据

# javascript - 在 JavaScript 中应用时区后获取日期的组件

> ID：14206902
> 
> 赞同：1
> 
> 时间：2013-01-08T01:24:18.347
> 
> 标签：javascript, date, time, timezone

事情是这样的：我目前正在编写“时间可用性”功能。

> 示例：周日：上午 7:00 至晚上 9:30 周一：上午 8:00 至晚上 10:00 周二：上午 7:30 至晚上 8:30 等...

这个想法是，用户可以指定企业对公众“可用”的时间范围。特定的日期数字无关紧要 - 当前是 3 号星期一还是 10 号星期一都没有关系，为“星期一”指定的时间范围适用于所有星期一。每个时间范围的开始和结束时间都保存为小时字段 (1-12)、分钟字段 (0-59) 和时段（上午或下午）字段。必须采用这种方式，因为这是我所在国家/地区特有的，在这里我们使用 AM/PM，而不是 24 小时制。当然，由于我们只讨论小时和分钟，而不是具体的完整日期，因此在这种情况下我们不应用时区。

但是，在其他地方，我需要一个 JavaScript 代码来获取当前日期（特定的全天和时间），将特定时区应用于所述日期（准确地说是“美国/巴拿马”），然后分隔该日期到它的组件中（根据时区，我需要为星期几、天数、小时、分钟和时段（上午或下午）设置单独的值）。这是为了根据星期几评估当前日期是否在指定的时间范围内（如上一段所述）。

是的，我知道日期在内部是“通用的”，而时区应该只是“为了向用户显示字符串而应用的东西”。以前见过。但如您所见，情况并非如此。有任何想法吗？

编辑：对不起，忘了澄清：解决方案必须在没有第三方脚本的情况下完成。也就是说，我需要纯粹的“香草”JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:29:24.573

您应该能够使用像[moment.js](http://momentjs.com/)这样的库来获取所有这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:41:45.523

所以，你需要电流`Date`：

```
var now = new Date(); 
```

您需要按时区更改它：

```
now.setHours(now.getHours() + timezone); 
```

并获得其他值：

```
var dayOfWeek = now.getDay();
var dayOfMonth = now.getDate();
var hour = now.getHours() % 12;
var minute = now.getMinutes;
var period = now.getHourse < 12 ? 0:1; //0 is AM, 1 is PM 
```

那是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:55:42.343

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T03:05:58.197

Since Panama doesn't have daylight saving you can add 5 hours to UTC all year round.

```
var d = new Date();
console.log("Date is now:"+d.toString());
var utc=new Date(d.getTime()+(d.getTimezoneOffset()*60000));
// or utc=d;utc.setHours(utc.getHours()+(utc.getTimezoneOffset()/60))
// note that UTC does not represent correct milliseconds from epoch for UTC now
//  it has the UTC values for getHours
//  if current locale has daylight saving JavaScript will give the correct
//  timezoneoffset
console.log("UTC date is now:"+utc.toString());
//http://www.timeanddate.com/worldclock/city.html?n=192
// panama has no daylight saving and is UTC -5 all year round
// 18000000 is 5*60*60*1000 (5 hours in milliseconds)
panama = new Date(utc.getTime()+(18000000));
//or panama=utc;panama.setHours(panama.getHours()+5);
console.log(panama.toString()); 
```

# php - facebook PHP SDK 忽略错误

> ID：14206904
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:24:30.337
> 
> 标签：php, facebook, sdk

我正在使用 Facebook PHP SDK，但我想忽略这些错误。他们正在打印出来，给用户带来麻烦。有什么方法可以防止它发生吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:33:04.823

```
<?php

// Turn off all error reporting
error_reporting(0);

// Report simple running errors
error_reporting(E_ERROR | E_WARNING | E_PARSE);

// Reporting E_NOTICE can be good too (to report uninitialized
// variables or catch variable name misspellings ...)
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_NOTICE);

// Report all errors except E_NOTICE
// This is the default value set in php.ini
error_reporting(E_ALL ^ E_NOTICE);

// Report all PHP errors (see changelog)
error_reporting(E_ALL);

// Report all PHP errors
error_reporting(-1);

// Same as error_reporting(E_ALL);
ini_set('error_reporting', E_ALL);

?> 
```

但是尝试删除错误而不是忽略它们。

# machine-learning - 在 rapidminer 中将性能提取为宏

> ID：14206905
> 
> 赞同：0
> 
> 时间：2013-01-08T01:24:34.433
> 
> 标签：machine-learning, data-mining, rapidminer

我正在使用 rapidminer 进行分类，我想将性能提取为宏并在测量性能后在输出上打印性能，

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:03:17.403

在当前版本的 RapidMiner (5.2.8) 中，无法将性能提取为宏，但 RapidMiner 5.3（将于本月晚些时候发布）将具有 Performance to Data 运算符，它将性能转换为示例集。然后，您可以从示例集中使用 Extract Macro 运算符提取所需的宏。

# ios - for 语句循环未按预期工作

> ID：14206907
> 
> 赞同：2
> 
> 时间：2013-01-08T01:24:50.700
> 
> 标签：ios, arrays, for-loop, count, nsmutablearray

我不明白为什么这个 for 循环不会循环！任何帮助表示赞赏。出于某种原因，i++ 无法正常工作？？

busTypeForSectionsFirst 包含多个字母的数组，即 A 到 Z。（每个字母的数量不同）

tempArray 是一个仅由 A 到 Z 组成的数组。

我的日志如下所示：x26 次。

> 2013-01-08 11:17:53.596 应用程序[969:c07] i = 0
> 
> 2013-01-08 11:17:53.596 App[969:c07] 数组中 i 的计数 = 2
> 
> 2013-01-08 11:17:53.596 App[969:c07] 搜索到的对象 - A

```
NSCountedSet *countedSet = [[NSCountedSet alloc] initWithArray:busTypeForSectionsFirst];

NSLog(@"%@", countedSet);

for (int i=0; i<=26; i++) {
    if (![countedSet countForObject:[tempArray objectAtIndex:i]]) {
        NSLog(@"Nil");
        NSLog(@"i = %i", i);
        NSLog(@"Count of i in array = %i", [countedSet countForObject:[tempArray objectAtIndex:i]]);
        NSLog(@"Object searched - %@", [tempArray objectAtIndex:i]);
        return 0;
    } else {
        NSLog(@"i = %i", i);
        NSLog(@"Count of i in array = %i", [countedSet countForObject:[tempArray objectAtIndex:i]]);
        NSLog(@"Object searched - %@", [tempArray objectAtIndex:i]);
        return 0;
        return [countedSet countForObject:[tempArray objectAtIndex:i]];
    }}

return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:31:27.967

不确定您要达到的目标。但你或许可以试试这段代码，

```
NSCountedSet *countedSet = [[NSCountedSet alloc] initWithArray:busTypeForSectionsFirst];

NSLog(@"%@", countedSet);

NSInteger returnVal = 0;

for (int i=0; i<=26; i++) {
    if (![countedSet countForObject:[tempArray objectAtIndex:i]]) {
        NSLog(@"Nil");
        NSLog(@"i = %i", i);
        NSLog(@"Count of i in array = %i", [countedSet countForObject:[tempArray objectAtIndex:i]]);
        NSLog(@"Object searched - %@", [tempArray objectAtIndex:i]);
    } else {
        NSLog(@"i = %i", i);
        NSLog(@"Count of i in array = %i", [countedSet countForObject:[tempArray objectAtIndex:i]]);
        NSLog(@"Object searched - %@", [tempArray objectAtIndex:i]);
        returnVal = [countedSet countForObject:[tempArray objectAtIndex:i]];
        //break; //probably a break statement here is what you are looking for
    }
}

return returnVal; 
```

如果您将 return 语句放入循环中，它将退出并从该方法返回。在您的情况下，您试图同时返回`if`和`else`条件，这将导致`for`循环仅执行一次。而且您`return [countedSet countForObject:[tempArray objectAtIndex:i]];`将永远不会被执行，因为您在此`return 0;`之前添加了 a 。

如果要中断 for 循环，则需要使用`break;`语句。`return`将从该方法返回，并且不会执行下面的其余代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:31:06.610

`if`它不会循环，因为在语句的真假部分，*你从函数中返回！*

我怀疑这个`return 0`陈述可能是多余的，因为这个小美：

```
return 0;
return [countedSet countForObject:[tempArray objectAtIndex:i]]; 
```

它只会返回- 第二个*是*无法访问的代码。`0``return`

但是，根据所提供的信息，我无法确定这一点。我的评论仍然存在——由于`return`所有代码路径中的语句，循环只会迭代一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T01:40:00.603

经典的复制和粘贴错误！其中之一`return 0`必须被删除。猜猜是哪一个！

# php - Google Drive API - 选择父级

> ID：14206911
> 
> 赞同：1
> 
> 时间：2013-01-08T01:25:18.117
> 
> 标签：php, google-drive-api

我已经使用 PHP 成功实现了 Google Drive API，并且正在尝试改进我的应用程序。

是否可以使用 GooglePicker 选择父/文件夹？我正在尝试确定以下内容：

1.  配置选择器以允许用户浏览他们有权访问的云端硬盘文件夹
2.  允许用户选择文件夹
3.  返回要在附加处理中使用的文件夹的 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T19:55:28.567

抱歉，此功能目前不可用。

如需更多信息，请查看[邮件列表中的讨论](https://groups.google.com/forum/?fromgroups=#!topic/google-picker-api/onb8R9sv_vY)。

# javascript - Google Chrome 扩展可折叠菜单

> ID：14206920
> 
> 赞同：1
> 
> 时间：2013-01-08T01:26:28.407
> 
> 标签：javascript, jquery, html, google-chrome

我想在我的 google chrome 扩展程序中创建一个可折叠菜单。我的扩展程序只是地址栏右侧的一个图标，单击时会弹出一个栏。我使用了这个网站上给出的语法：http: [//tommcfarlin.com/collapsible-menus/](http://tommcfarlin.com/collapsible-menus/)但是当我运行我的扩展时，它只是将列表显示为公告点，没有任何表格或折叠效果。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:50:02.953

也许你错过了第 2 步：

你可能已经`<script type="text/javascript" src="jquery.collapsible-menus.min.js"></script>`在你的 html 中添加了，但你没有下载`jquery.collapsible-menus.min.js`文件。如果您已下载并将其添加到您的工作目录，并按照步骤操作，那么一定没有错误。

例如：

目录结构：

`myextention`
`-js`
  `-jquery.collapsible-menus.min.js`
`-css`
`-img`
`-index.html`

你应该改变这个
`<script type="text/javascript" src="jquery.collapsible-menus.min.js"></script>`
：
`<script type="text/javascript" src="js/jquery.collapsible-menus.min.js"></script>`

希望能帮助到你。

# .net - 如何使用 P4 .net API 使用“P4 where”的功能

> ID：14206926
> 
> 赞同：0
> 
> 时间：2013-01-08T01:27:07.583
> 
> 标签：.net, api, perforce, p4api.net

perforce 命令`P4 where`（[Perforce 命令参考 PDF](http://www.perforce.com/perforce/doc.current/manuals/cmdref/cmdref.pdf)）将为我提供指定文件的分支路径、工作区路径和完整的本地路径。

我想知道如何使用 perforce 提供的官方 .net API 访问此功能（特别是文件的完整本地路径）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:17:06.273

假设您已经在 .NET API 中建立了连接对象，请尝试以下操作：

```
            字符串 [] 文件 = 新字符串 [1]；
            files[0] = "//depot/Jam/MAIN/src/glob.c";
            P4Command cmd = new P4Command(pRep, "where", true, files);
            选项 opts = new Options();

            //运行命令并获取结果
            P4CommandResult 结果 = cmd.Run(opts);
            TaggedObjectList 列表 = (results.TaggedOutput);
            foreach（列表中的 TaggedObject obj）
            {
                foreach（obj.Keys 中的字符串 s）
                {
                    字符串值 = "n/a";
                    obj.TryGetValue(s, out value);
                    Console.Out.WriteLine(s + " = " + value);
                }
            }

```

这会给你这样的输出：

```
depotFile = //depot/Jam/MAIN/src/glob.c
clientFile = //bruno_ws/Jam/MAIN/src/glob.c
路径 = C:\P4DemoWorkspaces\bruno_ws\Jam\MAIN\src\glob.c

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T22:19:28.193

一种更简单的方法是使用客户端对象中的函数 GetClientFileMappings()。

[API定义在这里](http://www.perforce.com/perforce/doc.current/manuals/p4api.net/p4api.net_reference/html/M_Perforce_P4_Client_GetClientFileMappings.htm)

但是，当查询大量文件（100k+）时，我发现该函数有点慢。我仍然强烈建议您批量查询而不是迭代和查询。否则效果很好。

# jquery - 在 jQuery 代码中发布具有正确回复数的唯一用户列表

> ID：14206928
> 
> 赞同：0
> 
> 时间：2013-01-08T01:27:12.653
> 
> 标签：jquery, jquery-ui

我正在尝试显示顶级用户列表及其回复数量，但有两个问题：

1.  它向用户显示错误的回复数量（由于某种原因它加倍），并且
2.  有时一个用户多次出现在顶级用户列表中

我需要一个包含正确回复数量的所有唯一用户的列表，如下所示：

*   简·多伊 8
*   杰克史密斯 7
*   安德里亚·约翰逊 5
*   弗雷德杰克逊 4
*   等等。

我认为需要编辑的部分是：

```
 {
        var htmlToAdd = '';
        people.sort(compareTotals);

    people.remove(0);

        var peopleLimit = people.length;
        if (peopleLimit > 10)
            peopleLimit = 10;
        for (var i = 0; i < peopleLimit; i++)
        {
            htmlToAdd = htmlToAdd + '<div class="peopleLink"><a href="' + people[i][2] + '">' + people[i][3] + '</a> has posted ' + people[i][0] + ' replies.</div>';
        }
        jQuery('#peopleList').html(htmlToAdd);
    } 
```

关于我需要改变什么的任何想法？

如果这有帮助，这里是完整的代码：

```
 if (jQuery("div.community_topic_box").size() > 0)  // Only true for the front page
    {
        jQuery("#postersFrame").insertAfter(".community_stats");
    }
    else
    {
        jQuery("#postersFrame").hide();
    }
});

var people = new Array();
var peopleFinished = 0;
var repliesHandled = 0;
var count = 0;

// Generic JSON functions
function JSONscriptRequest(fullUrl) {
    this.fullUrl = fullUrl; 
    this.headLoc = document.getElementsByTagName("head").item(0);
    this.scriptId = 'YJscriptId' + JSONscriptRequest.scriptCounter++;
}
JSONscriptRequest.scriptCounter = 1;
JSONscriptRequest.prototype.buildScriptTag = function () {
    this.scriptObj = document.createElement("script");
    this.scriptObj.setAttribute("type", "text/javascript");
    this.scriptObj.setAttribute("src", this.fullUrl);
    this.scriptObj.setAttribute("id", this.scriptId);
}
JSONscriptRequest.prototype.removeScriptTag = function () {
    this.headLoc.removeChild(this.scriptObj);  
}
JSONscriptRequest.prototype.addScriptTag = function () {
    this.headLoc.appendChild(this.scriptObj);
}

function handlerTopics(results) {      
    var obj;
    if ( results.total > 0)
    {
        count = results.total / 30;
        var htmlToAdd = '';
        if (results.total > 30)
        {
          var iterations = results.total / 30;
      for (var j=0; j < iterations; j++)
      {
        obj=new JSONscriptRequest('https://api.getsatisfaction.com/companies/' + companyName + '/topics.json?sort=recently_active&active_since=' + timeStamp + '&limit=30&page=' + j +'&callback=handlerEachTopics');     
        obj.buildScriptTag(); // Build the script tag     
        obj.addScriptTag(); // Execute (add) the script tag
      }
        }
    else{
       obj=new JSONscriptRequest('https://api.getsatisfaction.com/companies/' + companyName + '/topics.json?sort=recently_active&limit=30&active_since=' + timeStamp + '&callback=handlerEachTopics');     
           obj.buildScriptTag(); // Build the script tag     
       obj.addScriptTag(); // Execute (add) the script tag
    }
    }
    jQuery('#peopleList').html('Loading member details...')
}

function handlerEachTopics(results) {  
    if ( results.data.length > 0)
    {
      for(var i=0; i<results.data.length; i++)
      {
    if (results.data[i].active_replies > 0)
    {
       obj=new JSONscriptRequest( results.data[i].url + '/replies.json?callback=handlerEachTopicReplies');     
           obj.buildScriptTag(); // Build the script tag     
       obj.addScriptTag(); // Execute (add) the script tag
       repliesHandled++;
    }
      }
    }
    peopleFinished++;
}

function handlerEachTopicReplies(results) {      
    if ( results.data.length > 0)
    {
      for(var i=0; i<results.data.length; i++)
      {
        if ((!results.data[i].author.employee) &&(!isInArrayYet(results.data[i].author.canonical_name) > 0))
        {
            people[people.length] = [1, results.data[i].author.canonical_name, results.data[i].author.at_sfn, results.data[i].author.name];
        }
      }
    }
    repliesHandled--;    
    if ((peopleFinished >= count - 1) && (repliesHandled <= 0 ))
    {
        var htmlToAdd = '';
        people.sort(compareTotals);

    people.remove(0);

        var peopleLimit = people.length;
        if (peopleLimit > 10)
            peopleLimit = 10;
        for (var i = 0; i < peopleLimit; i++)
        {
            htmlToAdd = htmlToAdd + '<div class="peopleLink"><a href="' + people[i][2] + '">' + people[i][3] + '</a> has posted ' + people[i][0] + ' replies.</div>';
        }
        jQuery('#peopleList').html(htmlToAdd);
    }
}

function isInArrayYet(name)
{
  for(var i=0; i< people.length; i++)
  {
    if (people[i][1] == name)
    {
      people[i][0]++;
      return true;
    }
  }
  return false;
}

function compareTotals(a, b) {
    return b[0] - a[0];
}

Array.prototype.remove = function(from, to) {
  var rest = this.slice((to || from) + 1 || this.length);
  this.length = from < 0 ? this.length + from : from;
  return this.push.apply(this, rest);
};

  </script> 
```

如何使用户列表中的每个项目及其回复仅出现一次，以及如何使回复数量停止成倍增加？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:30:56.250

如果您对帖子数量有疑问，您最好在

`htmlToAdd + '<div class="peopleLink"><a href="' + people[i][2] + '">' + people[i][3] + '</a> has posted ' + people[i][0] + ' replies.</div>';`

并确保它是正确的。您可能需要重新检查 `people`数组和该数组中的数据。

代码的其他部分对我来说很好。如果您可以发布完整的代码，我将能够帮助您。

# mahout - Mahout 推荐器 - 将基于内容的相似性添加到基于项目的推荐器中

> ID：14206930
> 
> 赞同：4
> 
> 时间：2013-01-08T01:27:17.440
> 
> 标签：mahout, recommendation-engine, mahout-recommender

我有一个非常标准的基于 Mahout 项目的新闻文章推荐器（使用点击数据，所以首选项是布尔值）：

```
DataModel dataModel = new ReloadFromJDBCDataModel(
        new PostgreSQLBooleanPrefJDBCDataModel(localDB, ...)
);
ItemSimilarity itemSimilarity = new TanimotoCoefficientSimilarity(dataModel);
ItemBasedRecommender recommender = new GenericBooleanPrefItemBasedRecommender(dataModel, itemSimilarity); 
```

我正在尝试将基于内容的知识注入推荐器，这样我就可以最强烈地推荐不仅在正常协同过滤意义上相似的文章，而且在它们共享许多共同术语的意义上也相似。

文章内容相似度（TF-IDF 向量的余弦相似度）使用 Mahout 批处理进行预计算并从数据库中读取。但是，会有很多文章对没有相似度数据。这有两个原因：

*   文章内容相似度数据的更新频率将低于用户项目偏好数据模型，因此在计算新文章的内容相似度之前会有延迟。

*   理想情况下，我想将所有内容相似度数据加载到内存中，因此我只会存储每篇文章的前 20 个相似度。

因此，对于给定的一对文章，我有：

*   项目相似度 (Tanimoto) 0 <= s1 <= 1
*   内容相似度（余弦）0 <= s2 <=1（可能为空）

在内容相似度不为空的情况下，我想用它的值来加权项目相似度，以便对内容相似的文章进行提升。

我的问题是：

*   尝试结合这些措施是否合理，还是我在尝试一些疯狂的事情？
*   将这两个值组合成一个相似度分数的合理公式是什么？
*   这最好是作为自定义`ItemSimilarity`还是作为`Rescorer`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T04:33:56.620

是的，将它们结合起来是完全合理的。如果两个相似性都在 [0,1] 中，那么最明智的组合就是它们的乘积。这是您使用注入的东西`ItemSimilarity`，而不是`IDRescorer`.

# c# - 如何模拟两个进行相同查询但返回列表不同部分的数据库调用

> ID：14206933
> 
> 赞同：0
> 
> 时间：2013-01-08T01:27:36.583
> 
> 标签：c#, unit-testing, mocking

我正在对我的一些 c# 代码进行单元测试，我必须使用相同的模拟但返回不同的值。例如，我想在我的单元测试中这样做：

```
[Test]

_mockDatabase.Setup(x => x.Query(It.IsAny<Filter>())).Returns(List[0]).Verifiable();

_mockDatabase.Setup(x => x.Query(It.IsAny<Filter>())).Returns(List[1]).Verifiable(); 
```

有没有办法在不改变我的实际代码的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T08:45:13.930

这通常可以通过使用`Queue`类来解决（请注意，`Stack`类似的数据结构也可以使用）：

```
var queue = new Queue<string>(new [] { "First query", "Second query" });
// You only need 1 setup call
_mockDatabase
    .Setup(x => x.Query(It.IsAny<Filter>()))
    .Returns(() => queue.Dequeue())
    .Verifiable(); 
```

每次后续调用`Query`都将从队列中取出当前元素。两次调用上面的模拟，将产生*"First query"*然后是*"Second query"*。

# oracle - 在 SQL Developer 中导入数据时指定日期格式

> ID：14206935
> 
> 赞同：5
> 
> 时间：2013-01-08T01:28:25.397
> 
> 标签：oracle, oracle-sqldeveloper

我正在尝试使用 Oracle SQL Developer 导入 CSV 文件中的数据。CSV 文件中的一列是日期，它采用 ISO-8601 格式**`2012-08-22T00:06:52.0Z`**，小数秒始终为 0。表中对应的列是**date**类型。Oracle SQL Developer 可以选择在导入过程中指定日期格式，因此我将格式指定为

```
YYYY-MM-DD"T"HH24:MI:SS."0Z" 
```

![在此处输入图像描述](../Images/3fa9ec85807ff00ee05eb54fd2428126.png) 但导入过程失败，说日期格式无法识别。Oracle SQL Developer 以某种方式生成的插入语句正在从日期格式中删除双引号。

```
INSERT INTO TABLE(CREATION_DATE, LAST_MODIFIED_DATE) VALUES (to_date('2009-02-18T00:06:52.0Z', 'YYYY-MM-DDTHH24:MI:SS.0Z'),to_date('2012-08-30T00:06:52.0Z', 'YYYY-MM-DDTHH24:MI:SS.0Z')); 
```

有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-06-18T03:28:51.750

您是否尝试转义日期格式规范中的字符？如果这不起作用，你应该打开一个关于它的 SR。

# iphone - 从服务器发送 SMS

> ID：14206936
> 
> 赞同：1
> 
> 时间：2013-01-08T01:28:27.507
> 
> 标签：iphone, objective-c, sms

是否可以从远程服务器上运行的独立进程向移动设备 (iPhone) 发送 SMS。

听起来这是不可能的，因为一旦我们有了他们的电话号码，它就提供了一种向人们发送垃圾邮件的简单方法。但只是想通过在这里询问来确认

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:36:01.287

*免责声明，我在 Nexmo 兼职做开发人员宣传。*

当然有可能，这里有一些付费的 SMS API：

*   [Nexmo](http://nexmo.com)
*   [特维利奥](http://twilio.com)
*   [特罗波](http://tropo.com)

如果您*确实*尝试向他人发送垃圾邮件，您的帐户可能会被停用。但是应用程序每天都在使用 API/网关，这些应用程序允许人们从应用程序发送短信、进行第二因素身份验证、验证电话号码的所有权、允许各方在不透露其号码的情况下进行通信等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:45:29.007

是的，您可以像服务器发送电子邮件一样执行此操作……例如，如果您有一个 verizon 电话号码，则向该地址发送电子邮件：

```
##########@vtext.com 
```

（*其中########## 是您的手机号码，没有连字符）

```
AT&T: ##########@txt.att.net 
T-Mobile: ##########@tmomail.net 
Sprint:##########@messaging.sprintpcs.com 
```

我希望这有帮助！让我知道 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:34:11.510

是的，有许多基于云的 SMS 网关供您使用。TextMarks [**SMS API**](http://www.TextMarks.com/api/)允许您轻松发送 SMS、接收 SMS，并提供大量更高级别的功能，如组管理、退出等，以帮助您构建应用程序。

关于您的垃圾邮件问题，TextMarks 将不允许您向人们发送消息，直到他们“选择加入”（例如通过将您的关键字发短信到特定的 5 位数字）。

实际上，我编写了很多内容广泛的 TextMarks API 文档，并且很乐意帮助您集成您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T01:32:37.167

当然有可能。过去，我通过简单地将旧诺基亚手机连接到 Linux 机器并通过该电缆发送命令通过该手机发送文本消息，实现了类似的（通过 SMS 的双向通信）。

当然，有些服务会以一定的价格提供这些“短信网关”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T01:33:07.663

是的，很有可能。您需要做的就是注册短信网关提供商并使用他们的 API，大多数都有代码示例。

# python - 通过引用组合 NumPy 数组

> ID：14206938
> 
> 赞同：4
> 
> 时间：2013-01-08T01:28:52.253
> 
> 标签：python, arrays, numpy, reference, pygame

我想在 O(1) 中将两个数组组合成一个新数组。然后，我想更改这个新数组中的值以更改旧数组中的值。

这是在 PyGame 的 surfarray 模块的上下文中，它没有返回 RGBA (n*m*4) 数组的函数 - 仅分别返回 RGB (n*m*3) 和 A (n*m) 数组。理想情况下，我会在 O(1) 中创建一个新数组“RGBA”，它引用“RGB”和“A”数组。改变“RGBA”会改变“RGB”和“A”，从而改变表面。

我不知道这是否可能，因为我想不出用 C 做的方法。但是，我可以想到一些想法。例如，也许有一个 numpy 数组类型，它封装了一些子数组，并在内部将索引重定向到 C 级别的正确索引。这样就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T15:22:41.840

您可以创建自己的类来管理引用过程，如下例所示。`__getslice__`您应该在这方面进一步工作，以包括使用、`__add__`、等的切片功能`__mul__`。

```
import numpy as np
a1 = np.arange(1,11)
a2 = np.arange(101,111)
class Combiner():
    def __init__(self, *args):
        self.arrays = [arg for arg in args]
        self.lens = [len(arg) for arg in args]
    def __getitem__(self,i):
        if i >=0:
            shift = 0
            acc = 0
            for j,l in enumerate(self.lens):
                acc += l
                if i<acc:
                    return self.arrays[j][i-shift]
                shift += l
        if i<0:
            shift = 0
            acc = 0
            for j in xrange(len(self.lens)-1,-1,-1):
                l = self.lens[j]
                acc -= l
                if i>=acc:
                    return self.arrays[j][i+shift]
                shift += l

    def __setitem__(self,i,v):
        if i >=0:
            shift = 0
            acc = 0.
            for j,l in enumerate(self.lens):
                acc += l
                if i<acc:
                    self.arrays[j][i-shift] = v
                    return
                shift += l
        if i<0:
            shift = 0
            acc = 0
            for j in xrange(len(self.lens)-1,-1,-1):
                l = self.lens[j]
                acc -= l
                if i>=acc:
                    self.arrays[j][i+shift] = v
                    return
                shift += l

a3 = Combiner(a1,a2)
print a3[-10]
# 101
a3[-2] = 22222
a3[ 4] = 11111
print a1
#[    1     2     3     4 11111     6     7     8     9    10]
print a2
#[  101   102   103   104   105   106   107   108 22222   110] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-10T21:42:05.027

我不确定我是否完全理解了这个问题。据我所知，如果你初始化 pygame 和像这样的表面（注意每行中的“32”），pygame 表面是 RGBA（准确地说，BGRA）连续数组：

```
# display surface
DISP = pygame.display.set_mode((window_w, window_h), 0, 32)
# some surface
window = pygame.Surface((w, h), 0, 32) 
```

此外，我建议尽可能使用 32 位，而不是 24 位，因为 24 位表面很难与数组互操作（我`numpy`用于存储和操作图像数据）。
例如，如果我没记错的话，一个 24 位表面**必须具有可被 4 整除的像素数量。**

如前所述，我不确定您的最终任务是什么，但这就是我的做法。
例如，使用 lib 加载图像`openCV`并将其转换为 BGRA 数组：

```
# BGR 3d numpy array array (shape = h, w, 3) with image data
img = cv2.imread(filename)
# BGRA 3d numpy array (shape = h, w, 4) 
img = cv2.cvtColor(img, cv2.COLOR_BGR2BGRA) 
```

然后这个函数将整个数组数据复制到一个表面中，只需要确保它们具有相同的像素大小：

```
# copy array data into a pygame surface
def copy_arr(surface, myarray):
    bv = surface.get_buffer()
    bv.write(myarray.tostring(), 0) 
```

但也可能是你想做其他事情。

# php - 使用 jquery 从文本框中回显值

> ID：14206939
> 
> 赞同：0
> 
> 时间：2013-01-08T01:28:53.113
> 
> 标签：php, jquery

我试图在填写文本框后回显该值。

```
<input name="cron" type="textbox" placeholder=" Please insert a valid command in cron time format" class="required" /> 
```

然后这个文本框的值需要进入我的 cron_parser 函数，并用 $next_time 回显

```
$cron_parser = new cron_parser($cron);
$next_time = $cron_parser->next_runtime(); 
```

基本上在填充文本框之后，我希望在屏幕上显示以下结果，并在文本框发生更改时进行更新。

```
<div class="alert success">
<span class="icon"></span><strong>Is this correct?</strong>
Your backup will run next at <?php echo $next_time ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:40:28.643

如果我正确理解您的问题，要检索文本框中的值，您可以使用 jQuery，如下所示

```
val = $('input[value="cron"]').val(); 
```

您不能只`echo`在客户端（在页面加载后）输出东西，而是可以`alert(val);`但是如果真的想将值传递给服务器端（PHP 端），您可以使用[AJAX](http://api.jquery.com/jQuery.ajax/)。

[客户端脚本](http://en.wikipedia.org/wiki/Client-side_scripting)

[服务器端脚本](http://en.wikipedia.org/wiki/Server-side_scripting)

[区别](https://softwareengineering.stackexchange.com/questions/171203/what-are-the-difference-between-server-side-and-client-side-programming)

# java - 我很困惑为什么在 HMAC-SHA1 之后需要 Base64 编码

> ID：14206956
> 
> 赞同：-4
> 
> 时间：2013-01-08T01:32:05.563
> 
> 标签：java, base64

如果我在 hmac-sha1 之后没有使用 Base64 编码器，它会显示 shome 不可读的代码，但如果我使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:34:46.103

您将对数据进行 Base64 编码，以便您可以在应用程序（例如电子邮件或文本文件）中复制和粘贴数据，以便人们能够阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:36:02.947

使用 Base64 编码将您的数据转换为字符值，可以轻松地将其剪切粘贴到电子邮件中、保存为字符串或保存在文件中。如果不使用 Base64 编码，它只是一系列字节值，不能轻易复制，也不能显示为字符。

# android - 如何将 ORMLite 导入我的 Android 项目？

> ID：14206957
> 
> 赞同：2
> 
> 时间：2013-01-08T01:32:19.443
> 
> 标签：android, ormlite

此处编写的指南仅说明了安装 ORMLite 所需的文件：

> [http://ormlite.com/docs/getting-started](http://ormlite.com/docs/getting-started)

但是我没有看到关于我必须如何将这些文件导入我的项目以及在哪里以及如何设置“类路径”的解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T13:33:48.160

在 Eclipse 中使用最新版本的 ADT，这应该是自动完成的，您只需将 .jar 放到 libs 文件夹中，它就会自动添加到构建路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T01:34:19.703

![在此处输入图像描述](../Images/71ae5df0eb348680464f6f371b45039f.png)

1.  下载罐子
2.  将它放在项目的 libs 文件夹中
3.  将 jar 添加到类路径。
4.  右键单击您的项目 -> 构建路径 -> 配置构建路径
5.  选择库-> 添加 Jar，然后从您的库中选择 jar。

# shopify - 结帐 URL 订单令牌不再与实际订单令牌匹配（最近更改？）

> ID：14206962
> 
> 赞同：0
> 
> 时间：2013-01-08T01:33:19.580
> 
> 标签：shopify

首先感谢您花时间阅读。

我曾经能够使用结帐 URL 中的订单令牌进行 API 查找并为订单创建自己的浏览器发票。例如

1.  checkout.shopify.com/orders/STOREID/ORDER_TOKEN_723b06712768bb037b2b

2.  使用 ORDER_TOKEN_723b06712768bb037b2b 我创建了一个查询字符串：

invoice.php?order_token=ORDER_TOKEN_723b06712768bb037b2b

1.  invoice.php 我使用 API 调用遍历过去 30 分钟内的所有订单。然后我对我的结果做一个简单的匹配，如果我的 api 调用中的任何订单令牌匹配 ORDER_TOKEN_723b06712768bb037b2b 那么我知道我有正确的订单，我可以打印出详细信息。

这一直有效到几个月前。现在订单令牌仍然从 API 调用返回，但它们永远不会匹配。

有任何想法吗？

如何使用结帐 URL 中的订单令牌来匹配订单？

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:39:41.013

Shopify 添加了一个结帐 API（请参阅[http://www.shopify.com/technology/6735056-upcoming-api-changes](http://www.shopify.com/technology/6735056-upcoming-api-changes)），这可能就是事情不同的原因。您可能指的是结帐令牌而不是订单令牌，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:32:04.423

更准确地说，一个订单有两个可用的代币。

```
cart_token   - which is matching the **cart** value of the customer's session
token        - possibly is the token used during checkout you refer to as order_token? 
```

要深入了解您的问题，请执行以下操作：

1.  当您说 order_token 时，您是在说订单的 token 属性？
2.  如果它们不同，那么问题是，代币价值代表什么？我的意思是结账时的价值和分配给订单的价值。

# objective-c - 如何将任何类型的文件附加到 iOS 中的电子邮件

> ID：14206972
> 
> 赞同：0
> 
> 时间：2013-01-08T01:34:33.667
> 
> 标签：objective-c, ios, email

我正在向我的 iOS 应用程序解释一个函数，以将电子邮件上的原始数据作为文件附加。该应用程序是一个电影作曲家。

数据格式编写为 XML，我希望应用程序将电子邮件上的数据作为具有原始扩展名 (.kpt) 的文件附加。此外，我希望接收者使用电影作曲家打开接收到的 XML 文件。

问题如下：

1.  如何让应用程序将原始数据附加到带有原始扩展名的电子邮件中？
2.  如何让电子邮件接收者使用我的应用程序打开收到的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:28:32.923

如何设置附件：

```
MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
[mailController setSubject:@"Some Subject"];
[mailController addAttachmentData:data
                         mimeType:@"application/kpt"
                         fileName:@"originalFileName.kpt"]; 
```

为了在你的应用程序中打开文件，你需要修改你的 Info.plist 来描述一个新的文档 UTI。可以在[此处](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/DocumentImplPreflight/DocumentImplPreflight.html)找到执行此操作的编程指南。

# java - java.util.zip.ZipInputStream 在解压过程中为空

> ID：14206976
> 
> 赞同：0
> 
> 时间：2013-01-08T01:35:15.147
> 
> 标签：java, android, zip

已从生产服务器给出的 Web 响应中检索到的压缩 xml 字符串。字符串很好，因为 .net 中的相同方法给出了有效的结果。（数据是汽车制造商的列表。）然而，在 Android 中，ZipInputStream 读取会产生一个大小合适的缓冲区 (4895)，但它从位置 2661 开始有空数据。最后一辆车正确解压是'MG'

该方法不会出错。

任何人都可以看到有什么问题吗？谢谢

```
private byte[] decompressZip(String zipText) throws IOException{

    try {
        byte[] zipBytes = MakeBytes(zipText);
        byte[] zipData;
        ByteArrayInputStream b = new ByteArrayInputStream(zipBytes);
        BufferedInputStream buf = new BufferedInputStream(b);

        //ZipInputStream zin = new ZipInputStream(b); doesn't matter both constuctors have the fault.
        ZipInputStream zin = new ZipInputStream(buf);
        ZipEntry entry;
        if((entry=zin.getNextEntry())!=null)
        {
            int entrySize=(int)entry.getSize();
            zipData = new byte[entrySize];
            zin.read(zipData, 0, entrySize);

            return zipData;

        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        String sError = e.getMessage();
    }
    return null;
} 
```

# c# - 动态添加选中的属性 C#

> ID：14206977
> 
> 赞同：0
> 
> 时间：2013-01-08T01:35:16.963
> 
> 标签：c#, asp.net, asp.net-mvc, checkbox

我是 C# ASP .Net 的新手。我有这样的问题：
我有来自数据库的数据，如下所示：

```
button_id | button_access
-------------------------
btnSearch | true
btnClear  | true
btnAdd    | false
btnSave   | false 
```

在我看来：

```
@data [data from database]
...
@foreach (chk in data) {
  <input name="btnSearch" type="checkbox" value="@chk.button_id" {???} />
}
... 
```

我认为，`{???}`我必须插入一个条件，如：

```
IF (chk.buttonAccess) {
   //Code to write attribute checked
} 
```

我应该填写什么`{???}`..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:41:18.083

试试这个：

```
@(chk.button_access ? "checked" : "") 
```

# heroku - 如何在 Heroku 上为 Jekyll 静态站点创建别名？

> ID：14206978
> 
> 赞同：2
> 
> 时间：2013-01-08T01:35:26.413
> 
> 标签：heroku, url-rewriting, jekyll

我有一个在 Heroku 上运行的 Jekyll 站点。

站点生成后，我创建了一个文件`public/photos.html`。如何设置 Jekyll/Heroku 以允许我访问页面`domain.com/photos`而不是`domain.com/photos.html`？

而且我宁愿不必使用`rack-rewrite`哪个站起来的机架中间件。对此似乎有点过分。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-23T20:01:47.050

最简单的方法是只命名文件`photos/index.html`而不是`photos.html`. 如果这对您不起作用，您可以使用[Front Matter](http://jekyllrb.com/docs/frontmatter/)`permalink`中的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:27:10.253

您可以在 Sinatra 中进行路由匹配并提供您喜欢的任何页面，请参阅：[http ://www.sinatrarb.com/intro.html](http://www.sinatrarb.com/intro.html)

# c# - 登录前握手期间发生错误

> ID：14206980
> 
> 赞同：4
> 
> 时间：2013-01-08T01:35:32.667
> 
> 标签：c#, sql-server, linq-to-sql, sqlexception

我有一个 C# 应用程序，它使用 Linq to SQL 与数据库进行通信，并且在一个月前最后一次测试时工作得很好。但是，它现在抛出以下异常：

```
A first chance exception of type 'System.Data.SqlClient.SqlException' occurred in System.Data.dll
------ Exception ------
Error:  A connection was successfully established with the server, but then an error occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - The received certificate has expired.) 
```

我正在使用 Verisign 密钥对代码进行数字签名，但尚未过期。在构建安装程序之前，我不会进行数字签名，这发生在我的开发系统调试中，因此尚未对代码进行签名。

它也发生在签署和安装软件的其他系统上。这些系统访问与我在开发系统上使用的相同的测试数据库，并且以前可以正常工作。

导致错误的代码行如下：

```
 List<req> results = new List<req>();

        using (var db = new MyDbDataContext(connectionString))
        {
            var query =
                from item in db.reqs
                where item.senddate == null
                select item;

            results = query.ToList();
        } 
```

当我打电话时发生错误`results = query.ToList();`。

我使用以下连接字符串：

```
Data Source=<removed>;Initial Catalog=<removed>;UID=sa;PWD=<removed>;Encrypt=true;Integrated Security=false 
```

如果我设置 Encrypt=false，我可以连接，但这不是一个可行的解决方案。

同样，这在几周前我最后一次测试时效果很好。任何关于可能发生的事情的见解将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T23:23:55.363

我设法从这篇[文章](https://stackoverflow.com/questions/7024277/problem-during-ssl-connection-to-sql-server)中找到了解决方案。

基本上，我添加`TrustServerCertificate=True`到我的连接文本中，一切又开始工作了。我不确定它为什么一开始就停止工作，如果有人知道这是否是一个永久的解决方案，我很想了解更多关于发生的事情。

感谢 Carson63000 和 Jacco 的建议。

# windows - 登录类型的 wxpython 应用程序

> ID：14206982
> 
> 赞同：0
> 
> 时间：2013-01-08T01:35:51.933
> 
> 标签：windows, authentication, wxpython, modal-dialog

我管理着许多用于控制设备的 Windows PC。每台计算机都安装了一个特定的程序，这是人们启动以使用该设备的程序。我们希望要求人们登录后才能访问此程序。

目前，我有一个 wxpython 应用程序，当人们使用正确的凭据登录时，它只会启动该可执行文件。但是，您可以直接运行程序并绕过登录。我想制作一个模拟登录屏幕，即全屏和模态，只有在您登录时才会消失。此外，它不应该被 alt-tab、windows 键等绕过。我该如何做到这一点用 wxpython？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:41:53.043

在 Windows 上没有完整的证明方法可以做到这一点。您可以使用其 MakeModal() 方法以模态方式显示 wx.Frame。你可以抓住 EVT_CLOSE 并基本上否决他们试图关闭框架。但是，如果他们有权访问任务管理器甚至运行，他们可能会绕过屏幕。大多数用户不会那么聪明。您可以删除要使用 wx 启动的应用程序的快捷方式，这将迫使大多数普通用户使用您的登录屏幕。只有那些喜欢在文件系统中翻查的聪明人才会绕过它。

# c++ - 普通类中的朋友模板函数

> ID：14206987
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:36:22.060
> 
> 标签：c++, templates, friend-function

我想我需要一个普通类中的模板友元函数。该函数将在共享内存中进行一些复杂的分配，并在硬件和操作系统中进行一些其他操作。但是我已经排除了所有这些，以表明问题与 -template- 和/或 -friend- 方面有关，而不是更邪恶的东西。主要部分是我需要类的实例及其成员数据都分配有一个分配器，我可以将其作为通用参数传递。

```
class Foo    {
public:
    const long * const larry;
    const long * const curly;
    const long * const moe;
private:
    Foo() : larry(0), curly(0), moe(0) {}; // not used

    Foo(long * _larry, long * _curly, long * _moe) :
        : larry(_larry), curly(_curly), moe(_moe)
    {
        // some unrelated memory management and OS stuff happens here
    }

    template<class Alloc> friend const Foo * alloc_Foo(long count);

public: // factories

    template<class Alloc> const Foo * factory_A(long);
//  template<class Alloc> const Foo * factory_B(long);
// ...
//  template<class Alloc> const Foo * factory_G(long);

};

template<class Alloc> const Foo * alloc_Foo(long count)
{
    typename Alloc::template rebind<long>::other a_long;
    // allocate internal parts in shared memory
    const long * const larry = a_long.allocate(count+2);
    const long * const curly = a_long.allocate(count+44);
    const long * const moe   = a_long.allocate(count*3);

    Alloc alloc;
    const Foo * const p_foo = alloc.allocate(1);
    alloc.construct(p_foo, Foo(larry, curly, moe));
); 
```

我认为这应该是正确的解决方案。只有 alloc_Foo 应该调用构造函数，只有工厂方法应该调用 alloc_Foo。Foo 的实例及其单独分配的内部部分是在它们应该在的共享内存中创建的，所有复杂的分配内容都隐藏在 alloc_Foo 朋友模板中。这部分我可以正常工作。我什至不介意在同一个文件中实现 alloc_Foo，因为它简短而简单。但是调用 alloc_Foo 的工厂又大又复杂，并且会弄乱一个包含数十个包含和数百行代码的原本干净而简单的类。

我试图在最后包含实现，这样我就可以将每个工厂放在一个单独的文件中。

```
#include "factory_A.tpp"
#include "factory_B.tpp"
// etc. 
```

然后在 .tpp 文件中我放置了实际代码，但我似乎无法包含任何内容，比如 bar.h。#include 规则似乎分崩离析。恐怕与我的模板分配器朋友有关。我肯定不想失去它，因为它解决了我的许多其他问题。

```
../blah/blah/factory_A.tpp:10:9: error: 'Bar' was not declared in this scope
make: *** [blah/blah/main.o] Error 1 
```

通常我不会对范围交易如此执着，但这对我来说是一个不寻常的组合。也许我在考虑整个交易。我认为 alloc_Foo 必须是一个朋友，所以它可以看到我隐藏的构造函数。我认为它也应该是私有的，只有工厂才能使用它。我认为分配器和工厂实际上都不是函数的一部分。他们没有或不需要“这个”。也许它们应该是静态的。我认为它必须是一个模板，因为我需要在许多内部部分和每个实例的实际对象本身上使用一个特殊的分配器。它应该是静态的。

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:00:45.333

我确信这与模板或朋友无关。预处理器对模板或朋友**一无所知**，它只是打开文件并将其内容插入其他文件，模板和朋友不可能“使包含规则分崩离析”。你在做什么应该没问题。

检查包含警卫`bar.h`，它们是否与其他文件相同？

您是否`#include "factory_A.tpp"`在某些命名空间范围打开时？尝试在文件底部的额外包含之前关闭命名空间。

或者`Bar`在某个命名空间中，你应该说`x::Bar`？

你是不是捡错了`bar.h`？尝试将头文件重命名为其他名称，即不会调用其他头文件的独特名称，然后将其更改`#include`为。

如果这些都不起作用，请将代码简化为重现问题的最小**完整**示例。目前，您没有显示足够的代码来查看真正的问题在哪里，但几乎可以肯定这不是您所建议的，而是您未显示的代码中的其他地方。

# c# - .NET TcpClient Connect 不抛出异常

> ID：14206991
> 
> 赞同：-1
> 
> 时间：2013-01-08T01:36:49.950
> 
> 标签：c#, .net

.Net 的 TcpClient 允许我测试是否可以建立连接，因此，请告诉我远程端口是否已打开。

检查此代码：

```
TcpClient tcpCLient = new TcpClient();
        try
        {
            tcpCLient.Connect("www.google.com", 80);
            Console.WriteLine("Yes");
            Console.ReadLine();

        }
        catch (Exception)
        {

            Console.WriteLine("No");
            Console.ReadLine();
            throw;
        } 
```

我测试了 www.google.com 的 Tcp 端口 80，因为它是打开的，所以我在控制台中看到“是”消息。现在，我将尝试关闭 www.google.com 的 TCP 端口 70。

```
 TcpClient tcpCLient = new TcpClient();
            try
            {
                tcpCLient.Connect("www.google.com", 70);
                Console.WriteLine("Yes");
                Console.ReadLine();

            }
            catch (Exception)
            {

                Console.WriteLine("No");
                Console.ReadLine();
                throw;
            } 
```

我预计会出现异常，所以我应该在控制台中看到“否”。为什么什么都没有发生？谢谢！！

**更新**：控制台即使在几分钟后也会保持这种状态。 ![在此处输入图像描述](../Images/4df88e358dd482e6e7f1ba0e604d1c1d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:45:30.400

**简而言之：**为什么`throw`一旦你抓住它就会例外？

这可能是挂起控制台应用程序的原因，因为它正在等待超时。此外，如前所述，它可能是远程地址中的防火墙，因为它可能会挂断您的呼叫。让我知道，如果你得到一些其他特定的例外。

此外，希望您的代码正在处理套接字异常，因为这是客户端尝试连接时的常见异常。这是一个相关的帖子 - [C# SocketException 没有被捕获](https://stackoverflow.com/q/6665563/1437962)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:50:43.790

@pm100 在评论中给我答案。

“原因几乎可以肯定是由于谷歌防火墙，他们丢弃了意外端口的数据包 - 这看起来像一个传输错误，所以你会重试。尝试对非防火墙机器（例如本地主机）进行相同的测试，它会立即失败，因为主机拒绝关闭端口的请求”

几分钟后，您会看到“否”。

# shell - 检查文件是否存在

> ID：14206996
> 
> 赞同：1
> 
> 时间：2013-01-08T01:37:03.800
> 
> 标签：shell

我在这个网站上找到了一个关于如何检查文件是否存在的代码，然后添加了一些代码来匹配我的想法。我这样做对吗？

```
declare file="file.txt"
declare regex=$skedtemp
declare file_content=$( cat "${file}" )
if [[ " $file_content " =~ $regex ]] 
then
    skedran=$((RANDOM%200+600))
    skedtemp="SN$skedran"
    sked=$skedtemp
else
    sked=$skedtemp
fi 
```

如果它已经存在，那么它将生成另一个随机数，如果它不存在，则使用生成的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T01:54:29.353

要测试文件是否存在，您可以这样做

```
[ -a file.txt ] 
```

或者

```
[ -e file.txt ] 
```

或者

```
[ -f file.txt ] 
```

回应[**乔纳森莱弗勒的评论**](https://stackoverflow.com/questions/14206996/checking-files-if-exists/14207130#comment19704182_14207130)

```
File operators:

  -a FILE        True if file exists. 
```

[**参考**](http://wiki.bash-hackers.org/commands/classictest)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T05:46:28.457

您可能正在寻找`grep`

```
file="file.txt"
if grep "$skedtemp" $file
then
    skedran=$((RANDOM%200+600))
    skedtemp="SN$skedran"
fi
sked=$skedtemp 
```

# mysql - mysql2 gem 安装错误

> ID：14206997
> 
> 赞同：0
> 
> 时间：2013-01-08T01:37:10.197
> 
> 标签：mysql, ruby-on-rails, gem, bundle, mysql2

我在安装包安装失败后尝试安装 mysql2 gem。当我跑步时

> $ sudo gem install mysql2 -- --with-mysql-config=/usr/local/mysql/bin/mysql_config

我收到以下错误：

> 构建原生扩展。这可能需要一段时间... 错误：安装 mysql2 时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb --with-mysql-config=/usr/local/mysql/bin/mysql_config 
> ```
> 
> 检查 rb_thread_blocking_region()... 是 检查 rb_wait_for_single_fd()... 是 检查 mysql.h... 是 检查 errmsg.h... 是 检查 mysqld_error.h... 是 创建 Makefile
> 
> 编译client.c 在client.c:1中包含的文件中：在./mysql2_ext.h:8中包含的文件中：在/Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include中包含的文件中/ruby-1.9.1/ruby.h:32: /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/ruby.h:105:37: 错误: 'ruby_check_sizeof_long' 声明为具有负大小 typedef char ruby​​_check_sizeof_long[SIZEOF_LONG == sizeof(long) 的数组？1：-1]；^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 在来自client.c的文件中：1：在来自的文件中./mysql2_ext.h:8：在 /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby.h:32 包含的文件中：在 /Users 包含的文件中/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/ruby.h:24：/Users/jcollyer/.rvm/rubies/ruby-1.9。
> 
> # 定义 SIZEOF_LONG 8
> 
> ```
>  ^ In file included from client.c:1: In file included from ./mysql2_ext.h:8: In file included from 
> ```
> 
> /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby.h:32：/Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/ include/ruby-1.9.1/ruby/ruby.h:109:38: 错误: 'ruby_check_sizeof_voidp' 声明为具有负大小 typedef char ruby​​_check_sizeof_voidp[SIZEOF_VOIDP == sizeof(void*) 的数组？1：-1]；^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 在来自client.c的文件中：1：在文件中包含在 ./mysql2_ext.h:8 中：包含在 /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby.h:32 中的文件中：包含在文件中/Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/ruby.h:24：/Users/jcollyer/.rvm/rubies/ruby-1.9.3- p327/include/ruby-1.9.1/x86_64-darwin11.4.2/ruby/config.h:28:22：注意：实例化自：
> 
> # 定义 SIZEOF_VOIDP 8
> 
> ```
>  ^ In file included from client.c:1: In file included from ./mysql2_ext.h:8: In file included from 
> ```
> 
> /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby.h:32：在 /Users/jcollyer/.rvm/rubies/ruby-1.9 包含的文件中。 3-p327/include/ruby-1.9.1/ruby/ruby.h:1382：在 /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ 包含的文件中ruby/intern.h:34: /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ruby/st.h:67:45: 错误: 'st_check_for_sizeof_st_index_t' 声明作为具有负大小 typedef char st_check_for_sizeof_st_index_t[SIZEOF_VOIDP == (int)sizeof(st_index_t) 的数组？1：-1]；^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 在文件中包含在 client.c:1 中：包含在 ./mysql2_ext.h:8 中的文件中：包含在 /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/include/ruby-1.9.1/ 中的文件中ruby.h:32:
> 
> # 定义 SIZEOF_VOIDP 8
> 
> ```
>  ^ 3 errors generated. make: *** [client.o] Error 1 
> ```
> 
> Gem 文件将继续安装在 /Users/jcollyer/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11 以供检查。结果记录到 /Users/jcollyer/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11/ext/mysql2/gem_make.out

$ 哪个红宝石

> /Users/jcollyer/.rvm/rubies/ruby-1.9.3-p327/bin/ruby

$哪里mysql

> /usr/local/bin/mysql

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T07:34:32.190

如果您打算为您的应用程序使用 mysql2 gem，那么您需要`libmysqlclient-dev`在执行此操作之前安装该软件包。更多详情：
[http ://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T06:27:53.277

试试这个希望它会有所帮助

cd /usr/local/lib/ruby/gems/1.8/gems/mysql-2.7

> gem install mysql -- --with-mysql-config=/usr/local/mysql/bin/mysql_config

如果这不起作用，则安装 **libmysqlclient15-dev**

每当您无法构建“本机扩展”时，就意味着缺少一些 lib 或 lib-dev。通常你需要做一个

```
sudo apt-get install 
lib-???-dev 
```

或 `sudo apt-get install build_essential`。

```
'sudo apt-get install libmysqlclient15-dev' 
```

# html - 如何让 DIV 块填充 90% 的屏幕？

> ID：14206998
> 
> 赞同：1
> 
> 时间：2013-01-08T01:37:30.593
> 
> 标签：html, css

我尝试了以下代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>

   <style type="text/css">
        #outer {
            width: 90%;
            height: 90%;
            margin: 5% 5% 5% 5%;
            background-color: #333;
        }
        #left-content {
            height: 90%;
            width: 50%;
            padding: 2em;
        }
        #right-content {
            height: 90%;
            width: 50%;
            padding: 2em;
        }
    </style>

    <div id="outer" style="display: block">
      <div id="left-content" style="display: block">xx</div>
      <div id="right-content" style="display: block">xx</div>
    </div>

</body>
</html> 
```

然而，外部 DIV 仍然没有填满屏幕的大部分。我怎样才能让这个 DIV 填充 90% 并只留下 5% 的边框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T01:40:50.907

你需要给你`html`和`body`一个高度：

```
body, html{
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:51:30.243

您需要将文档和正文设置为 100% 宽度/高度。

```
body,html
{
width:100%;
height:100%;
} 
```

作为旁注，如果你真的想要一个在左边和一个在右边，你的内部 div 需要使用 float 属性。那个或一些像素完美的偏移量。

如果你浮动它们，你将无法摆脱两个 50% 的带有填充或边距的 div，填充和边距是 div 的宽度/高度之外的。

您可能想阅读[css box model](http://www.w3schools.com/css/css_boxmodel.asp)。