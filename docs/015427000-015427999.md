# StackOverflow 问答 15427000-15427999

# c# - 当保存按钮用于更新功能时，如何防止保存按钮调用javascript验证

> ID：15427006
> 
> 赞同：-1
> 
> 时间：2013-03-15T07:34:59.747
> 
> 标签：c#, asp.net

我正在使用一个用于保存和更新数据的按钮。我想在用于保存而不是用于更新数据时调用 javascript 验证函数。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:48:52.960

可以执行保存和更新的按钮？在后面的代码中？当您的按钮执行保存功能时，您可以调用您的脚本

这是这样的

```
//save function - with javascript validation
Page.ClientScript.RegisterStartupScript(
GetType(), 
"MyKey", 
"Myfunction();", 
true);
//update function
without javascript validation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:56:52.920

你还没有真正指定你的验证是如何工作的；但是，如果您使用 jQuery Validate，您可以通过添加 `class="cancel"`到您的输入标签来阻止对“稍后保存”类型按钮的验证。

# python - 使用 mysql 创建图表

> ID：15427012
> 
> 赞同：3
> 
> 时间：2013-03-15T07:35:18.463
> 
> 标签：python, mysql, mysql-python

所以，摆在我面前的是这个有趣的问题，我有两张表，一张是用户信息，其中包含网络上的主机配置文件和网站中提到的其他商店配置文件，例如：在 www.abc.com 上，我提到了 www.xyz。 com 所以 abc.com 将成为：

```
source table
+----------+--------------+------+-----+---------+----------------+
| Field    | Type         | Null | Key | Default | Extra          |
+----------+--------------+------+-----+---------+----------------+
| id       | int(11)      | NO   | PRI | NULL    | auto_increment |
| website  | varchar(255) | YES  |     | NULL    |                |
| user_id  | varchar(25)  | YES  | MUL | NULL    |                |
| web_name | varchar(255) | YES  |     | NULL    |                |
+----------+--------------+------+-----+---------+----------------+ 
```

提及表将有条目（如上面提到的 xyz.com）

```
+----------+--------------+------+-----+---------+----------------+
| Field    | Type         | Null | Key | Default | Extra          |
+----------+--------------+------+-----+---------+----------------+
| id       | int(11)      | NO   | PRI | NULL    | auto_increment |
| web_link | varchar(255) | YES  |     | NULL    |                |
| user_id  | varchar(25)  | YES  | MUL | NULL    |                |
| web_name | varchar(255) | YES  |     | NULL    |                |
+----------+--------------+------+-----+---------+----------------+ 
```

user_id 是这些表的外键，**现在我想生成一个基于节点的图，以便我选择 source.web_name 和mention.webname 并为它们分配 id，使它们都是唯一的，例如：0-> 1 因为有机会1->0**

我想知道实现这一目标的最佳方法是什么，我应该更改架构以完成它还是使用 python 选择可以完成。当 source.web_name 和mention.webname 驻留在不同的表中时，我无法弄清楚它们的唯一ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:40:14.977

如果我正确理解了这一点，那么您的网页可以包含其他网页的 url，并且您想要对引用进行建模。您可以创建所有网页的表格和引用表格

web_pages 表：

```
id
website
etc. 
```

和参考或“提及”表：

```
source_id (refers to id in web pages table)
target_id (also refers to id in web pages table) 
```

# wicket - Wicket框架中ListView内按钮的点击功能

> ID：15427020
> 
> 赞同：0
> 
> 时间：2013-03-15T07:36:01.957
> 
> 标签：wicket, wicket-1.5, wicketstuff

我使用 wicket 中的 ListView 组件填充表格。表格的最后一列是按钮。因此，对于每一行，我将在最后一列中有一个按钮。我想要实现的是我需要删除相应行的按钮的 onlick。因此，为此我需要在单击按钮时获取列表的当前索引。如何实现/得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:53:33.493

查看转发器 Wicket 示例页面以了解如何使用`ListView`和其他转发器：

[http://www.wicket-library.com/wicket-examples/repeater/](http://www.wicket-library.com/wicket-examples/repeater/)

您可以从中获取列表的当前索引`item.getIndex()`

```
protected void populateItem(final ListItem<T> item) {
    int index = item.getIndex();
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:34:23.813

我会扩展 Ajax 按钮并在构造函数中传递行引用（项目）......然后你可以做任何你想做的事情......通过覆盖 onSubmit 方法

例子：

```
private class SpecialButton extends AjaxButton {
    final Item<Object> rowItem;

    public SpecialButton(final String id, final Item<Object> rowItem) {
        super(id);

        this.rowItem = rowItem;
    }

    @Override
    protected void onSubmit(final AjaxRequestTarget target, final Form<?> form) {
        // here you cand do everything you want with the item and the model object of the item.(row)
        Object object = rowItem.getModelObject();
    }

} 
```

您应该将 Object from 替换为`Item<Object>`您的中继器模型。创建此私有类后，您可以将其重复用于转发器中的每一行。

如果要删除该行，您只需从用于生成转发器的列表中删除模型并刷新转发器容器（Wicket 不允许您通过将转发器添加到目标来刷新转发器......相反，您必须添加中继器。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:44:48.430

在此处查找有关如何正确执行此操作的灵感（无索引）：

[Wicket ListView 不刷新](https://stackoverflow.com/questions/4353732/wicket-listview-not-refreshing)

# regex - PowerShell 脚本使用 RegEx 替换字符串之间的行

> ID：15427021
> 
> 赞同：0
> 
> 时间：2013-03-15T07:36:18.797
> 
> 标签：regex, powershell

我想替换之间的任何线条

```
<? and <Arguments> 
```

并且

```
</Arguments> and </Task> 
```

通过 powershell 和正则表达式

这是整个字符串

```
<?xml version="1.0" encoding="UTF-16"?>
<Task version="1.1" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
  <RegistrationInfo>
    <Author>administrator</Author>
  </RegistrationInfo>
  <Triggers>
    <CalendarTrigger>
      <Enabled>true</Enabled>
      <StartBoundary>2013-03-13T00:34:00</StartBoundary>
      <ScheduleByDay>
        <DaysInterval>1</DaysInterval>
      </ScheduleByDay>
    </CalendarTrigger>
  </Triggers>
  <Settings>
    <Enabled>true</Enabled>
    <ExecutionTimeLimit>PT259200S</ExecutionTimeLimit>
    <Hidden>false</Hidden>
    <WakeToRun>false</WakeToRun>
    <DisallowStartIfOnBatteries>false</DisallowStartIfOnBatteries>
    <StopIfGoingOnBatteries>false</StopIfGoingOnBatteries>
    <RunOnlyIfIdle>false</RunOnlyIfIdle>
    <Priority>5</Priority>
    <IdleSettings>
      <Duration>PT600S</Duration>
      <WaitTimeout>PT3600S</WaitTimeout>
      <StopOnIdleEnd>false</StopOnIdleEnd>
      <RestartOnIdle>false</RestartOnIdle>
    </IdleSettings>
  </Settings>
  <Principals>
    <Principal id="Author">
      <RunLevel>HighestAvailable</RunLevel>
      <UserId>SMETEST\Administrator</UserId>
      <LogonType>InteractiveTokenOrPassword</LogonType>
    </Principal>
  </Principals>
  <Actions Context="Author">
    <Exec>
      <Command>C:\Program Files\NetApp\SnapManager for Exchange\SMEJobLauncher.exe</Command>
      <Arguments>new-backup -Server 'SME' -ManagementGroup 'Standard' -RetainBackups 8 -RetainUtmBackups 20 -Sto
rageGroup 'testingDB1' -UseMountPoint  -MountPointDir 'C:\Program Files\MgrMountPoi
nt' -RemoteAdditionalCopyBackup $False</Arguments>
      <WorkingDirectory>C:\Program Files\NetApp\SnapManager for Exchange\</WorkingDirectory>
    </Exec>
  </Actions>
</Task> 
```

我只希望输出看起来像

```
new-backup -Server 'SME' -ManagementGroup 'Standard' -RetainBackups 8 -RetainUtmBackups 20 -StorageGroup 'testingDB1' -UseMountPoint  -MountPointDir 'C:\Program Files\MgrMountPoint' -RemoteAdditionalCopyBackup $False 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:08:38.310

与其在使用 XML 的正则表达式上浪费时间，不如使用 Select-Xml 和 XPath：

```
Select-Xml -Path .\Test.xml -Namespace @{ 
    t = "http://schemas.microsoft.com/windows/2004/02/mit/task" 
} -XPath //t:Arguments | foreach { $_.node.InnerText -replace '\n' } 
```

假设这是您想要的，我已经删除了换行符。

# java - 更改 actionBar 下拉背景颜色

> ID：15427025
> 
> 赞同：4
> 
> 时间：2013-03-15T07:36:35.983
> 
> 标签：java, android, xml, android-actionbar

![在此处输入图像描述](../Images/58e3badac73aecc327790da03ca9935a.png)

如何更改显示“添加联系人”和“关于”的背景颜色。现在它有点灰色，但我希望它是白色的！这是一个带有下拉菜单的 actionBar，而不是一个微调器。而且我没有使用那个actionbarsherlock的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T07:49:46.770

例如，在您现有的父`Style`定义中，仅添加`android:popupMenuStyle`如下所示的属性：

```
<style name="Theme.Example" parent="@android:style/Theme.Holo.Light">
    <item name="android:popupMenuStyle">@style/PopupMenu.Example</item>
    .......
    .......
</style> 
```

`android:popupMenuStyle`并通过定义您的样式来覆盖该属性：

```
<style name="PopupMenu.Example" parent="@android:style/Widget.Holo.Light.ListPopupWindow">
    <item name="android:popupBackground">@drawable/menu_dropdown_panel_example</item>
</style> 
```

是这样的`@drawable/menu_dropdown_panel_example`：

![在此处输入图像描述](../Images/7953163cb3c5100478b8dd18b24489d8.png)

您可以选择使用与上述类似的图像，也可以使用`Color`资源。

这是默认的*ActionBar*。不是`ActionBarSherlock`. ;-)

`ActionBar`使用这个很酷的网站可以轻松创建样式：http: [//jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)。在决定风格之前，我通常会在这里做一些实验。此外，它还可以让您下载样式和所有必要的资源。只需将它们插入您的应用程序，您就可以开始使用了。:-)

**更新：**我认为我造成了一些混乱，导致您的应用下拉菜单中的阴影丢失。`<items>`您可能已经替换了`Style`我在原始建议中列出的所有内容。编辑应该解决这个问题。

**更新 2：**

使用这些图像资源而不是`@android:color/white`您当前使用的值。它们的顺序是 XHDPI、HDPI 和 MDPI。保存它们并在样式定义中使用它们。

![在此处输入图像描述](../Images/d3d7c774544d9fe0d125d6048fed36f7.png) ![在此处输入图像描述](../Images/3e2830cd5353d452e374355621016c16.png) ![在此处输入图像描述](../Images/aa4c81509876f3839d616b6bc7e50b3c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:53:08.467

尝试从[ActionBarStyleGenerator](http://jgilfelt.github.com/android-actionbarstylegenerator/)服务获取样式。它具有预览功能，并使所有必要的可绘制、xml 和样式。在那里，您可以轻松找到并更改所需的颜色，然后在源中找到它（在您的情况下，它是 android:popupBackground）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-16T08:13:59.327

您可以简单地覆盖主题中的 itemBackground 项目：

```
<style name="AppTheme" parent="Theme.AppCompat.Light">
    <item name="android:itemBackground">@color/skyBlue</item>
</style> 
```

# php - PHP如何在静态类中使用魔术方法？

> ID：15427029
> 
> 赞同：6
> 
> 时间：2013-03-15T07:36:43.683
> 
> 标签：php, class, static

我正在尝试将数组转换为对象。我想使用具有静态属性的魔术方法 - __get 和 __set。

我的代码：

```
class UserData {
    private static  $id, $name, $login;

    public function __get($var)
    {
        return self::$var;
    }
    public function __set($var, $val)
    {
        self::{$var} = $val;
    }
} 
```

并设置：

```
foreach($userArray as $key => $val) 
    {
        DaneBilingowe::${$key} = $val;
    } 
```

错误：致命错误：无法访问私有属性 UserData::$id

是否可以使用具有静态属性的魔术方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T07:40:23.287

简而言之，没有。

`__get()`并且`__set()`是实例方法。它们本质上`stdClass()`是构成实例的函数。

如果你必须以这种方式设置静态内容，你可以给类一个 stdClass 参数和一个允许你神奇地设置和获取数据的单例结构。

例如：

```
class UserData {
    protected static $_instance;
    protected $_data = array();

    public static function get_instance() {
        static $initialized = FALSE;

        if ( ! $initialized) {
            self::$_instance = new UserData;
            $initialized = TRUE;
        }

        return self::$_instance;
    }

    public function __get($var) {
        $self = self::get_instance();

        return isset($self->_data[$var]) ? $self->_data[$var] : NULL;
    }

    public function __set($var, $val) {
        $self = self::get_instance();

        $self->_data[$var] = $val;
    }
} 
```

然后你可以去：

```
 $UserData =& UserData::get_instance();
 $UserData->var = 'val';

 echo $UserData->var; // prints 'val' 
```

但是，我不建议在 PHP 中使用 Singleton，因为它们毫无意义。[您可以在 PHP 单例类的最佳实践一](https://stackoverflow.com/questions/8776788/best-practice-on-php-singleton-classes)文中阅读一些原因。

使用静态类或实例类。

魔术 getter 和 setter 是捷径。您可以使用普通的 setter 和 getter 实现相同的行为。下面的示例提供了相同的功能，但意图更加清晰：

```
class UserData {
    protected $id, $name, $login;

    public static function set_name($name) {
        self::$name = $name;
    }

    public static function set_login($login) {
        self::$login = $login;
    }

    public static function get_id() {
        return self::$id;
    }

    public static function get_name() {
        return self::$name;
    }

    public static function get_login() {
        return self::login;
    }
} 
```

注意在上面的代码中 $id 是如何不可写的。它只是可读的。$name 和 $login 是可读写的。使用普通的 setter 和 getter 来控制读写更容易，错误更少。魔术方法就是这样，魔术，通常魔术不是具体的，在代码中也不太容易理解。

我要说的最后一点是，为什么 UserData 是静态的？除非您的整个代码中只有 1 个用户，否则将其设为静态是没有意义的。也许我没有得到全貌，但是应该实例化具有 id 和 name 的东西，以便您可以拥有多个实例。否则，为什么要有id，因为类本身是唯一的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T07:58:28.123

如果你真的想在静态属性上使用魔法方法，你可以，但你需要一个实例。虽然看起来不合理，但作为程序员本身是不合理的:)

用户定义的类和对象在 php 中也不是动态的。你不能那么容易地向它们添加变量......所以你可以使用下面的模式：

```
class UserData {
    private static  $id, $name, $login, $arr = [];

    public function __get($var){
        return (array_key_exists(self::$arr, $var)? self::$arr[$var]:null;
    }

    public function __set($var, $val){
        self::$arr[$var] = $val;
    }
} 
```

和设置：那么 DaneBilingowe 是什么？我现在不在这里...但是：

```
$inst = new UserData();

foreach($userArray as $key => $val){
    $inst->$key = $val;
} 
```

将工作。

但请注意，它仅适用于类（静态）内存。此外，由于没有对设置名称进行适当的过滤，因此可能会发生奇怪的事情。（这意味着你应该添加它们）

# entity-framework - 在 SaveChanges() 调用实体框架后看不到数据库中的变化

> ID：15427034
> 
> 赞同：2
> 
> 时间：2013-03-15T07:37:05.267
> 
> 标签：entity-framework, savechanges

我有一个`Device`只有一列的表`UID nvarchar(128)`，这是我的实体：

```
[Table( Name="Device" )]
public class Device
{
    [Key]
    public string UID { get; set; }
} 
```

当我尝试插入实体并向数据库提交更改时一切正常。但是在数据库中没有添加新行。如果我尝试使用相同的 UID 重复此操作 - 我会出错

> *违反主键约束“PK_dbo.Devices”。无法在对象“dbo.Devices”中插入重复键。重复的键值是...*

怎么了？

*编辑：*

这是我的背景：

```
public class DeviceContext :  BaseDbContext, IDbContext
{
    public DbSet<Entity.Device> Device { get; set; }

    public new IDbSet<T> Set<T>() where T : class
    {
        return base.Set<T>();
    }

    public int SaveChanges()
    {
        return base.SaveChanges();
    }

    public void Dispose()
    {
        base.Dispose();
    }
} 
```

方法失败`SaveChanges()`。`BaseDbContext`只是“连接字符串层”。

```
DeviceContext context = new DeviceContext();
context.Device.Add(new Device() { UID = id });
context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:53:29.797

错误表示数据已保存。所以我认为你正在查看错误的数据库。验证您的`DbContext`.

`context.Database.Connection.ConnectionString`顺便说一句，您可以通过查看调试器中的属性来查看使用了哪个连接。

# neo4j - Neo4j 密码查询性能缓慢

> ID：15427039
> 
> 赞同：5
> 
> 时间：2013-03-15T07:37:28.550
> 
> 标签：neo4j, cypher

在进行了一些小的修改后，我尝试了[这里](http://docs.neo4j.org/chunked/milestone/tutorials-cypher-java.html)给出的示例——主要是我添加了一个没有匹配的 where 子句——用于实验目的。

在我的系统（1.9.M04 - java 6u43 - ubuntu 12.04 - AMD phenom II -X6 1090T ）上的简单查询

数据库中只有 1 个节点（也是嵌入的）需要 262 毫秒。显然出了点问题。可能是什么问题呢 ？

谢谢

```
public void test()
    {
        GraphDatabaseService db = g = new GraphDatabaseFactory().newEmbeddedDatabase("./neo4j1test" );

        long id;
        Transaction tx = db.beginTx();
        try
        {
            Node refNode = db.createNode();
            id = refNode.getId();
            refNode.setProperty( "name", "reference node" );
            tx.success();
        }
        finally
        {
            tx.finish();
        }

        ExecutionEngine engine = new ExecutionEngine( db );
        ExecutionResult result = engine.execute( "start n=node("+id+") where ( n.name = \"reference node\") return n.name" );
        long time = System.currentTimeMillis();
        result = engine.execute( "start n=node("+id+") where ( n.name = \"reference node\") return n.name" );
        time = (System.currentTimeMillis() - time);
        System.out.println("Time taken : " + time + " ms.");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:22:48.703

您可能想要索引您的 name 属性（请参阅[indexing](http://docs.neo4j.org/chunked/milestone/indexing.html)）。之后，您可以像这样查询：

```
START n=node:your_index_name("name:the_indexed_name") RETURN n; 
```

通过索引查找节点比通过 WHERE 子句过滤要快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T20:16:10.923

我对 Cypher 查询技术有类似的问题。处理 Cypher 声明式查询的开销导致性能不佳。我同意你的观点，开销是不允许的。

我们应该使用 Core Java API 来获得 neo4j 的全部功能。

请参阅这篇文章：[使用 Core Java API 获得完整的 neo4j 功能](http://www.rene-pickhardt.de/get-the-full-neo4j-power-by-using-the-core-java-api-for-traversing-your-graph-data-base-instead-of-cypher-query-language/)

还有这个：[图形查询语言的性能：Neo4j 中 Cypher、Gremlin 和 Native Access 的比较](http://www.edbt.org/Proceedings/2013-Genova/papers/workshops/a29-holzschuher.pdf)

# php - Facebook喜欢按钮重定向？

> ID：15427045
> 
> 赞同：1
> 
> 时间：2013-03-15T07:37:47.420
> 
> 标签：php, facebook, redirect, modx

是否可以在您的 Facebook 页面上添加一个类似按钮功能，该功能会重定向到另一个页面并为用户提供免费的电子书？

我正在通过 PHP 运行的 MODx 中创建一个网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T07:46:02.233

**仅用于喜欢按钮：**

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div id="fblike">
  <div class="fb-like" data-href="site name" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false"></div>
</div> 
```

**点击Like按钮后重定向：**

这可以通过 Facebook javascript 事件来处理，[`edge.create`](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)：

```
FB.Event.subscribe('edge.create',
    function(response) {
        location.href = 'http://yourdomain.com/post/id';
    }
); 
```

这可以帮助你。

# c# - Azure Table SDK 2 EntityResolver 使用反射

> ID：15427049
> 
> 赞同：0
> 
> 时间：2013-03-15T07:38:02.033
> 
> 标签：c#, reflection, azure, azure-table-storage

我正在尝试使用`EntityResolver`从 Azure 动态填充一个空对象，除非您省略调用，否则`TableResult.Execute`调试不会进入该方法。它抛出一个异常，说明如下。实际的天蓝色表请求很好，在调试中我可以看到列值等，我只需要将它映射到本地类中，最好使用泛型和反射。`Test``match.SetValue`

```
Method not found: 'System.Nullable`1<Int32> Microsoft.WindowsAzure.Storage.Table.EntityProperty.get_Int32Value()'. 
```

我认为问题与反思有关，但需要帮助。

```
public T RetrieveRow(string partitionKey, string rowKey)
    {
        EntityResolver<IObTable> resolver = (pk, rk, ts, props, etag) => Test(props);
        CloudTable table = base.TableClient.GetTableReference(TableName);
        TableOperation operation = TableOperation.Retrieve<IObTable>(partitionKey, rowKey, resolver);
        TableResult retrievedResult = table.Execute(operation);
        return (T)retrievedResult.Result;
    }

public IObTable Test(IDictionary<string, EntityProperty> storageProps)
    {
        IObTable objectToReturn = (IObTable)Activator.CreateInstance(typeof(T));
        if (storageProps != null)
        {
            var emptyObjectProps = objectToReturn.GetType().GetProperties();
            foreach (var prop in storageProps)
            {
                PropertyInfo match = emptyObjectProps.FirstOrDefault(v=> v.Name==prop.Key);
                if (match!=null)
                {
                    if (match.PropertyType == typeof(Int32))
                    {
                        match.SetValue(prop, storageProps[match.Name].Int32Value);
                    }
                }
            }
        }
        return objectToReturn;
    } 
```

`IObTable`只是我本地实体上的标记界面。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T18:35:11.140

改变这个：match.SetValue(prop, storageProps[match.Name].Int32Value);

对此：match.SetValue(objectToReturn, storageProps[match.Name].Int32Value);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T22:23:42.590

这是一个相当长的路要走，但它有效：

```
 //TEntity is any class derived from TableEnitity 
    public IEnumerable<TEntity> TestingGetPartitionEntities(string PartitionKey)
    {

        TableQuery<DynamicTableEntity> query = new TableQuery<DynamicTableEntity>().Where(
              TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, PartitionKey));

            EntityResolver<TEntity> resolver = (pk, rk, ts, props, etag) => 
            {
                //MUST create the 'reflected' instance in the 'EntityResolver', so resolver can create new instance foreach entity in query execution loop.
                TEntity objectToReturn = (TEntity)Activator.CreateInstance(typeof(TEntity));
                var objectProperties = objectToReturn.GetType().GetProperties();

                foreach (var prop in props)
                {
                    PropertyInfo match = objectProperties.FirstOrDefault(v => v.Name == prop.Key);
                    if (match != null)
                    {
                    if (match.PropertyType == typeof(Int32))
                    {
                        match.SetValue(objectToReturn, props[match.Name].Int32Value);
                    }
                    if (match.PropertyType == typeof(object))
                    {
                        match.SetValue(objectToReturn, props[match.Name].PropertyAsObject);
                    }
                    if (match.PropertyType == typeof(bool))
                    {
                        match.SetValue(objectToReturn, props[match.Name].BooleanValue);
                    }
                    if (match.PropertyType == typeof(byte[]))
                    {
                        match.SetValue(objectToReturn, props[match.Name].BinaryValue);
                    }
                    if (match.PropertyType == typeof(DateTimeOffset))
                    {
                        match.SetValue(objectToReturn, props[match.Name].DateTimeOffsetValue);
                    }
                    if (match.PropertyType == typeof(double))
                    {
                        match.SetValue(objectToReturn, props[match.Name].DoubleValue);
                    }
                    if (match.PropertyType == typeof(Guid))
                    {
                        match.SetValue(objectToReturn, props[match.Name].GuidValue);
                    }
                    if (match.PropertyType == typeof(int))
                    {
                        match.SetValue(objectToReturn, props[match.Name].Int32Value);
                    }
                    if (match.PropertyType == typeof(long))
                    {
                        match.SetValue(objectToReturn, props[match.Name].Int64Value);
                    }
                    if (match.PropertyType == typeof(string))
                    {
                        match.SetValue(objectToReturn, props[match.Name].StringValue);
                    }
                }
            }
            return objectToReturn as TEntity;
        };

        //This is the list that is returned to caller.
        List<TEntity> results = new List<TEntity>();
        foreach (TEntity entity in table.ExecuteQuery(query, resolver, null, null))
        {
            results.Add(entity as TEntity);
        }
        return results;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T09:00:55.563

Azure 存储程序集本身 (Microsoft.WindowsAzure.Storage.dll) 中有一个 EntityResolver 委托的实现，称为`EntityUtility.ResolveEntityByType<T>`，您可以根据自己的需要进行调整。该类是内部的，因此您必须反汇编 dll，但是有很多工具可以做到这一点（Reflector 很棒，ILSpy 是免费的）。

# ios - 仅在 google maps api v3 中保持路线相同并更改当前位置标记

> ID：15427053
> 
> 赞同：0
> 
> 时间：2013-03-15T07:38:39.313
> 
> 标签：ios, google-maps-api-3, uiwebview, gps

我是 stackoverflow 的新手，我目前正在使用集成在 iOS 的 UIWebView 中的**谷歌地图 API V3 。**它作为一个**GPS 应用程序**工作，每 2 秒在 ios 设备的 GPS 提供的位置上更新一次。所以基本上它显示了从你现在所在的地方到你要去的地方的方向（你可以将目的地放在文本字段中并将其传递给谷歌地图）。

**我面临**的问题是，当我使用它驾驶我的汽车时，它会不断重新计算路线，我希望它保持在从 A 点到 B 点的路线上。**但我目前的位置应该会不断更新。**

 **例如，如果我经过一条街道，它表明您应该向左转，然后前往您的目的地。

**它应该做**的是它应该保持在我开始旅程时设置的路径上（初始化地图并设置方向），并且只更改当前位置的标记。方向路线（显示为折线）应保持静态。

我已经检查了很多网站，但找不到以这种方式实现的确切功能。

**我的地图代码：**

```
 var directionsDisplay;
var directionsService = new google.maps.DirectionsService();
var map;
var start ;
var end;
function initialize(mylat,mylng,jobLat,jobLng) {

    var latto=mylat;
    var longo=mylng;

    var joblatto=jobLat;
    var joblongo=jobLng;

    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(joblatto, joblongo);
    var mapOptions = {
    zoom:7,
    zoomControl: true,
    zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE,
    position: google.maps.ControlPosition.TOP_left
    },

    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: chicago
    }
    document.getElementById("map_canvas").innerText="";
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    directionsDisplay.setMap(map);
    document.getElementById("panel").innerText="";

   //==== traffic  ================

    var controlDiv = document.createElement('DIV');
    $(controlDiv).addClass('gmap-control-container')
    .addClass('gmnoprint');

    var controlUI = document.createElement('DIV');
    $(controlUI).addClass('gmap-control');
    $(controlUI).text('Traffic');
    $(controlDiv).append(controlUI);

    var trafficLayer = new google.maps.TrafficLayer();

    google.maps.event.addDomListener(controlUI, 'click', function() {
                                     if (typeof trafficLayer.getMap() == 'undefined' || trafficLayer.getMap() === null) {
                                     $(controlUI).addClass('gmap-control-active');
                                     trafficLayer.setMap(map);
                                     } else {
                                     trafficLayer.setMap(null);
                                     $(controlUI).removeClass('gmap-control-active');
                                     }
                                     });

    map.controls[google.maps.ControlPosition.TOP_RIGHT].push(controlDiv);

    //====

    directionsDisplay.setPanel(document.getElementById("panel"));

    end = new google.maps.LatLng(joblatto, joblongo);

    calcAsyncRoute(latto,longo);

} 
```

请指导我以任何方式保持路线静态并每 2 秒更改一次当前位置。

```
**My Map code:**
function calcAsyncRoute(mylatoo,mylongo)
 {
  var platto=mylatoo;
    var plongo=mylongo;

     start = new google.maps.LatLng(platto, plongo);

    var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.TravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
                            if (status == google.maps.DirectionsStatus.OK) {

                            directionsDisplay.setDirections(response);

                            }else
                            {
                            document.getElementById("panel").innerHTML="<h4 style='margin:8px; font-family:Helvetica Neue;font-size: 14px;'>Sorry, No Driving Directions Found For This Address </h4>";

                            }
                            });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:50:58.897

`directionService.route()` 如果您只想更新当前位置，则路线已更改，因为您每 2 秒调用一次。然后不要调用该路由（）！**

# c# - 如何确保传入的对象是基本类型（String、Int16、Int32、Double ...）？

> ID：15427058
> 
> 赞同：2
> 
> 时间：2013-03-15T07:39:03.150
> 
> 标签：c#, .net, reflection

所以我有方法：

```
public Boolean IsItABaseType(object obj)
{
    // How to make sure that this incoming obj
    // is a base type (String, Int32, Double, Int16, Decimal...).
    Boolean isBaseType = obj...
    Console.WriteLine(typeof(obj).Name);
    Console.WriteLIne("obj is base type"+isBaseType);
} 
```

如何确保这个传入的 obj 是基本类型（String、Int32、Double、Int16、Decimal...）？

**编辑**

作为“基本类型”，我指的是 C# 已知的所有原始类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T07:43:34.647

运行时中没有“内置”类型的自动列表，因为不同的语言可以对类型有不同的内置支持。

> 作为“基本类型”，我指的是 C# 已知的所有原始类型。

所以我们可以使用[内置类型表（C#参考）](http://msdn.microsoft.com/en-gb/library/ya5y69ds%28v=vs.110%29.aspx)来推断：

```
switch(Type.GetTypeCode(obj.GetType()) {
    case TypeCode.Boolean:
    case TypeCode.Byte:
    case TypeCode.SByte:
    case TypeCode.Char:
    case TypeCode.Decimal:
    case TypeCode.Double:
    case TypeCode.Single:
    case TypeCode.Int32:
    case TypeCode.UInt32:
    case TypeCode.Int64:
    case TypeCode.UInt64:
    case TypeCode.Int16:
    case TypeCode.UInt16:
    case TypeCode.String:
      // do stuff for "built in" types
      ...
      break;
   default:
      // do stuff for all other types
      ...
      break;
} 
```

注意我省略`object`了，希望是显而易见的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T07:41:20.157

```
bool isBaseType = obj is string || obj is int || obj is double || obj is decimal ...; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T10:43:54.510

似乎每个人都做得很复杂，有很长的条件列表或大`switch`语句。

您认为的原始类型有多种可能的解释。

### 1\. .NET 原始类型

.NET 有一个它认为是原始类型的类型列表。在[`Type`类](http://msdn.microsoft.com/en-us/library/42892f65.aspx)上，有一个属性[`IsPrimitive`属性](http://msdn.microsoft.com/en-us/library/system.type.isprimitive.aspx)将为`true`任何这些原始类型和`false`任何其他类型返回。

> 基本类型是 Boolean、Byte、SByte、Int16、UInt16、Int32、UInt32、Int64、UInt64、IntPtr、UIntPtr、Char、Double 和 Single。

请注意，`IntPtr`并且`UIntPtr`也在那里。它们代表特定于平台的整数类型（例如，32 位计算机上的 32 位整数，64 位计算机上的 64 位）。另请注意，.NET 不考虑`String`也不`Decimal`是原语。

你可以像这样测试它：

```
public static bool IsPrimitiveType(Type type)
{
    return type.IsPrimitive;
} 
```

### 2\. .NET 原始类型以及字符串和十进制

在您的问题中，您在原始类型的定义中包含了`String`and`Decimal`类型。让我们也测试一下，如下所示：

```
public static bool IsPrimitiveType(Type type)
{
    return type.IsPrimitive
        || type == typeof(decimal)
        || type == typeof(string);
} 
```

由于不可能扩展`String`or `Decimal`，简单的类型相等在这里就足够了。

### 3\. 内置 C# 类型

如果您对原始类型的定义是 MSDN 上的[内置类型表（C# 参考）](http://msdn.microsoft.com/en-gb/library/ya5y69ds.aspx)列表，我们必须排除`IntPtr`，`UIntPtr`因为它们不在该列表中。

```
public static bool IsPrimitiveType(Type type)
{
    return (type.IsPrimitive
         && type != typeof(UIntPtr)
         && type != typeof(IntPtr))
        || type == typeof(decimal)
        || type == typeof(string);
} 
```

### 4\. 完全不同的东西

根据前面的示例，您可以了解如何根据需要在*基本类型*的定义中排除或包含其他类型。

* * *

在上述所有示例中，您可以`IsPrimitiveType`像这样调用该方法：

1.  如果您有一个对象实例`obj`：

    ```
    bool isPrimitive = IsPrimitiveType(obj.GetType()); 
    ```

2.  如果你有一个类型`someType`：

    ```
    bool isPrimitive = IsPrimitiveType(someType); 
    ```

3.  如果你有一个泛型类型参数`T`：

    ```
    bool isPrimitive = IsPrimitiveType(typeof(T)); 
    ```

4.  如果您有一个在编译时已知的类型，例如`Int32`：

    ```
    bool isPrimitive = IsPrimitiveType(typeof(Int32)); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:43:15.477

你可以..... `if (obj == typeof(double)) blablblabl; if (obj == typeof(int)) blablablaaa2;`

希望能帮助你思考

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T07:52:56.403

使用 instanceof 运算符

```
assert (obj instanceof Integer || obj instanceof Boolean|| obj instanceof String|| obj instanceof Double|| obj instanceof Short|| obj instanceof Long|| obj instanceof Float|| obj instanceof Chracter) : "input is not a valid datatype"; 
```

上面的代码会抛出一个断言错误是类型不是原始类型或 null。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T08:12:23.657

所以我知道该怎么做！

```
 var t = obj.GetType();
    Boolean isInSystemNameSpace = t.Namespace == "System";
    var result = t == typeof(string) || t.IsValueType && isInSystemNameSpace; 
```

这会做我想要的。感谢那些试图帮助我的人！

# mysql - 在 MySQL 中自动复制数据库结构

> ID：15427064
> 
> 赞同：1
> 
> 时间：2013-03-15T07:39:24.210
> 
> 标签：mysql, database

我在 MySQL 中有两个数据库：“ **dbjava** ”是生产数据库“ **fake_db_java** ”是测试数据库。

我想配置**fake_db_java**（测试），以便**dbjava**（生产）结构（不是内容）中的每个修改都在测试数据库中自动完成。

这可以通过配置实现还是我应该考虑编写脚本来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:59:18.493

您可以使用 PHP 检查给定的值是否已经在数据库中。如果不是，您可以获取这些值并将它们放入另一个数据库中。这需要不时运行脚本或将其放在 VPS 上。

# android - WebView 不显示标准浏览器选项菜单

> ID：15427066
> 
> 赞同：0
> 
> 时间：2013-03-15T07:39:33.720
> 
> 标签：android, browser, menu, webview, option

早上好，我希望当用户打开我的自定义 WebView 时，当他点击菜单按钮时，**标准浏览器的菜单会出现**（下一个、上一个、共享链接、书签等）。

如何？:-)

这是我的代码：

```
 public class WebViewActivity extends Activity {

    private static final String TAG = "WebViewActivity";

    WebView mWebView;
    ProgressBar loadingProgressBar, loadingTitle;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.webview);

        Shared.openedActivities.add(this);

        String url = this.getIntent().getExtras().getString("url");

        mWebView = (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.loadUrl(url);
        mWebView.setWebViewClient(new MyWebViewClient());

        WebSettings webSettings = mWebView.getSettings();
        webSettings.setPluginState(PluginState.ON);

        loadingProgressBar = (ProgressBar) findViewById(R.id.progressbar_Horizontal);

        mWebView.setWebChromeClient(new WebChromeClient() {

            // this will be called on page loading progress
            @Override
            public void onProgressChanged(WebView view, int newProgress) {

                super.onProgressChanged(view, newProgress);

                loadingProgressBar.setProgress(newProgress);

            // hide the progress bar if the loading is complete
                if (newProgress == 100) {
                    loadingProgressBar.setVisibility(View.GONE);

                } else {
                    loadingProgressBar.setVisibility(View.VISIBLE);

                }

            }

        });

    }

    public void onDestroy() {
        super.onDestroy();
        Trace.w(TAG, "onDestroy()");

        Shared.unbindDrawables(findViewById(R.id.rootWebViewActivity));
        System.gc();
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_BACK) {
            finish();
        }
        return super.onKeyDown(keyCode, event);
    }

    private class MyWebViewClient extends WebViewClient {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            view.loadUrl(url);
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:46:39.987

抱歉，这不起作用，您必须自己实现此功能。WebView 不是浏览器，它只是一个呈现网页的视图。其他一切都是浏览器应用程序的功能，而不是 WebView。
不过，您可以按照此处所述访问浏览器的书签：[Get browser history and search result in android](https://stackoverflow.com/questions/7626084/get-browser-history-and-search-result-in-android)

# facebook-graph-api - Fb Graph API - 每次使用 Java 时都希望在不手动记录的情况下发布

> ID：15427068
> 
> 赞同：0
> 
> 时间：2013-03-15T07:39:42.947
> 
> 标签：facebook-graph-api

我手动登录 facebook，创建 accesstoken，注销。

尝试使用我的 java 应用程序在我的时间轴中发布，我得到了

```
java.lang.Exception: {"error":{"message":"Error validating access token: The session is invalid because the user logged out.","type":"OAuthException","code":190,"error_subcode":467}} 
```

我至少在创建访问令牌时`publish_stream`勾选了复选框。`offline_access`

我怎么能在我的时间线中发布而不每次都手动记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:23:13.197

已`offline_access`弃用。最简单的方法是使用页面令牌，因为这是一个无限制的会话令牌。看看那里如何得到它：[Facebook Access Token for Pages](https://stackoverflow.com/questions/8231877/facebook-access-token-for-pages)

# ruby-on-rails - Rails：视图中的方法

> ID：15427071
> 
> 赞同：0
> 
> 时间：2013-03-15T07:39:52.603
> 
> 标签：ruby-on-rails, ruby, methods, instance

所以，我尝试搜索（很多 :( ）并且找不到任何帮助。

我觉得这是我以前做过的事情，但我似乎无法弄清楚。

我已经安装了一个 gem（推荐，耶！），它允许我访问一堆方法（？）：

> > user.like(电影) => true

在一个视图中，我尝试将 <%= link_to "Like", @user.like(@movie) %>... 但是，这似乎实际上只是在页面加载时运行 @user.like(@movie) ...自动设置该用户喜欢该电影。

我错过了什么？:\

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:40:26.307

我猜你想要一个 LikesController 来处理这样的事情。然后你可以远程链接到创建动作，在这个创建动作中你可以做你想做的事情：

```
class LikesController < ApplicationController
  def create
    # assuming you have some method to get you the current_user
    # and assuming you just want to like movies
    movie =  Movie.find_by_id(params[:id])
    current_user.like(movie) if movie  
    # maybe check for success and return some meaningfull message
  end
end 
```

然后在视图中您可以执行以下操作：

```
<%= link_to "Like", likes_path(@movie), remote: true %> 
```

这应该触发类似。

不要忘记在 routes.rb 中为 LikesController 创建一个路由。

您应该始终牢记，对于用户应该能够执行的操作，您需要在控制器中执行操作。视图总是只向用户呈现给定的状态，并提供采取行动的选项。

# asp.net - 在 web 应用程序上使用 Ajax

> ID：15427075
> 
> 赞同：0
> 
> 时间：2013-03-15T07:40:06.800
> 
> 标签：asp.net, asp.net-ajax

我正在开发一个应用程序，我想使用 Ajax 来部分呈现网页的一部分而不是完整的回发。所以我使用`scriptManager`and`updatepanel`但我在 JS 中有一个错误`sys is not defined`。我查看了生成的 JS 代码，似乎 scriptmanager 没有加载任何 Ajax 客户端框架，在 scriptressource 中没有参考。

我使用 vs2010 模板创建了一个网站来测试 ajax，一切正常，但`web.config`我没有发现任何区别。这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:05:42.377

解决方案：

在注释和取消注释我的代码的不同部分后，我发现这是我的 objectdatasource 导致问题... ObjectDataSource 使用函数实例来检索业务对象，但由于我使用类属性作为我的“select”objectdatasource 函数的参数，我需要定义当前我的页面实例作为对象实例 (1)，但是当工作完成时，objectdatasource 也会处理 .... :) 我使用事件“ObjectDisposing”(2) 停止处理过程...

(1)

```
protected void OdsRecordObjectCreating(object sender, ObjectDataSourceEventArgs e)
        {
            e.ObjectInstance = this;
        } 
```

(2)

```
protected void OdsRecordObjectDisposing(object sender, ObjectDataSourceDisposingEventArgs e)
{
    e.Cancel = true;
} 
```

再见 ！

# java - 获取字符串数组项的相似部分

> ID：15427084
> 
> 赞同：1
> 
> 时间：2013-03-15T07:40:37.663
> 
> 标签：java, string

我有一个字符串数组：

```
qTrees[0] = "023012311312201123123130110332";
qTrees[1] = "023012311130023103123130110332";
qTrees[2] = "023013200020123103123130110333";
qTrees[3] = "023013200202301123123130110333"; 
```

使用这个循环，我试图从他们那里检索类似的部分：

```
String similarPart = "";
    for (int i = 0; i < qTrees[0].length(); i++){
        if (qTrees[0].charAt(i) == qTrees[1].charAt(i) &&
                qTrees[1].charAt(i) == qTrees[2].charAt(i) &&
                qTrees[2].charAt(i) == qTrees[3].charAt(i) ){

            similarPart += qTrees[0].charAt(i);
        } else {
            break;
        }
    } 
```

但这是错误的。如您所见，它将仅返回“02301”，但更深层次的相似性是可能的。

请建议我一个更好的方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:57:18.187

你需要更好地定义你想要达到的目标。你想要_____吗：

*   找到数组中任意两个条目之间最长的公共起始序列；
*   在数组中的所有条目中找到最长的公共起始序列；
*   找到任意两个条目之间的最长公共序列（即相同位置的相同字符）；
*   在数组中的所有条目中找到最长的公共序列。

所有这些都会给出稍微不同的方法，但归结为正确使用`break`和`continue`在你的循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:06:31.627

删除代码中的 else 部分。然后它将检查直到字符串的末尾。

编码 ：

```
 for (int i = 0; i < qTrees[0].length(); i++){
        if (qTrees[0].charAt(i) == qTrees[1].charAt(i) &&
                qTrees[1].charAt(i) == qTrees[2].charAt(i) &&
                qTrees[2].charAt(i) == qTrees[3].charAt(i) ){

            similarPart += qTrees[0].charAt(i);
        }
    } 
```

# python - 排序 WTForms form.errors dict

> ID：15427092
> 
> 赞同：4
> 
> 时间：2013-03-15T07:41:13.530
> 
> 标签：python, google-app-engine, python-2.7, wtforms

forms.errors 字典似乎是按字段名称排序的，而不是按它们在表单本身中声明的顺序。

例如

```
class ProductForm(Form): 
    code = TextField('Code', validators=[Required()]) 
    description = TextField('Description', validators=[Required(), Length(max=100)]) 
    amount = DecimalField('Amount', validators=[Required(), NumberRange(min=0.00, max=1000000.00)]) 
    vat_percentage = DecimalField('VAT %', validators=[Required(), NumberRange(min=0.00, max=100.00)]) 
    inactive_date = DateField('Inactive date', validators=[Optional()]) 
```

这会产生 form.errors，例如：

```
{'amount': ['Amount is required'], 'code': ['Code is invalid.'], 
'description': ['Description is required'], 'vat_percentage': ['VAT % is required']} 
```

我想做的是按照表格中的顺序打印错误。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:18:03.143

字典本质上是无序的（在 Python 中）。但是，WTForms 将每个字段的错误包括在字段和表单上，并且它*确实*保证可以按声明的顺序枚举字段。`form.errors`因此，您可以遍历`form`然后遍历每个`field.errors`以按顺序获取它们，而不是枚举：

```
for field in form:
    for error in field.errors:
        # Display error 
```

# qt - 重启后 QSettings IniFormat 文件变空

> ID：15427095
> 
> 赞同：2
> 
> 时间：2013-03-15T07:41:19.320
> 
> 标签：qt, restart, ini, qsettings

我使用 QSettings 使用 Linux 将参数保存到/从 ini 文件中加载：

写：

```
QSettings settings("setup.ini", QSettings::IniFormat);
settings.beginGroup("Setup_Parameter");
settings.setValue("Parameter1",parameter1_value);
settings.sync();
settings.endGroup(); 
```

读：

```
QSettings settings("setup.ini", QSettings::IniFormat);
settings.beginGroup("Setup_Parameter");
parameter1_value = settings.value("Parameter1","0").toInt();
settings.endGroup(); 
```

setup.ini 在系统开启时工作正常。如果我通过关闭电源然后重新打开来重新启动系统，setup.ini 文件有时会完全为空。我会说 5 次尝试中的 3 次。

我已经尝试将文件保存在应用程序和根/设置路径中。以及写入后复制文件，但断电后副本也是空的。

为什么 setup.ini 文件会丢失其内容？重启时需要保留参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:49:36.673

在 write 函数之后需要一个 sync() ：

```
QSettings settings("setup.ini", QSettings::IniFormat);
settings.beginGroup("Setup_Parameter");
settings.setValue("Parameter1",parameter1_value);
settings.endGroup();
settings.sync();
sync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T18:46:11.823

我遇到了同样的问题。我的 QSettings 文件有时会在电源重置后消失。该文件仍然存在，但它的大小为零字节。QT 应用程序在 ARM 处理器上的 Debian Squeeze 上运行。文件系统、操作系统和应用程序都位于 4G SD 卡上。

在对设置文件进行任何更改后，我已修改应用程序以调用同步功能。但是我们昨晚进行了电源重置，其中一个单元（我们正在运行大约 60 个）失去了设置。我们正在运行 QTEmbedded-4.8.2，我不知道如何解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T10:21:52.703

我们已经修复了在 QSettings 的 'sync' 功能之后调用 'sync' linux 命令的相同问题。

# javascript - 提交表单后不完整的 Ajax 请求

> ID：15427096
> 
> 赞同：0
> 
> 时间：2013-03-15T07:41:19.910
> 
> 标签：javascript, ajax, xmlhttprequest

我目前正在运行一个以移动为中心的站点，该站点支持文件上传，而我正在尝试做的是在用户将文件上传到表单时为他们节省大量空闲时间。

我的目标如下：

```
 xhr = new XMLHttpRequest();

 xhr.open("POST", "http://myServer/myEndpoint");
 xhr.setRequestHeader("Cache-Control", "no-cache");
 xhr.setRequestHeader('Content-Type', 'text');
 xhr.setRequestHeader('foo', "bar");
 xhr.send( myData );

 //PseudoCode
 if( xhr.DataIsSent ) myForm.submit(); 
```

如您所见，我的目标是防止用户在提交表单之前必须等待 ajax 响应，理想情况下，无论用户做什么，我都希望它在后台运行。

我对 ajax 的理解是，一旦请求发出，除非手动取消，否则会完成，但是，我遇到过到达服务器的数据不完整的情况

任何关于我如何可靠地实现这一目标的建议将不胜感激。到目前为止，似乎一旦提交表单，部分完成的请求就会终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:47:20.030

正如我在 Mozilla 开发人员页面上看到的那样，XmlHttpResponses 也是有状态的。

我建议您使用 jQuery： 1\. 为您的 ajax 请求创建一个承诺 2\. 在表单提交之前使用 when().then() 3\. 捕获错误

你需要任何代码示例吗？

# c# - 如何将 Var 从 C# 转换为 VB？

> ID：15427098
> 
> 赞同：0
> 
> 时间：2013-03-15T07:41:28.857
> 
> 标签：c#, asp.net, vb.net

我发现以下对我有用的 C# 代码：

```
public partial class Default2 : System.Web.UI.Page 
  { 
    protected void Page_Load(object sender, EventArgs e) 
    { 
        if (Session["EID"] != null) 
        { 
            int EmpID = (int)Session["EID"]; 

            DataClassesDataContext dc = new DataClassesDataContext(); 
            var empInfo = from emp in dc.EmployeeLogins 
                          where emp.EmployeeID == EmpID 
                          select new
                          { 
                                     emp.EmployeeLoginKey, 
                                     emp.EmployeeID, 
                                     emp.username, 
                                     emp.passwd 
                          }; 

           foreach (var v in empInfo) 
           { 
               lblID.Text = v.EmployeeID.ToString(); 
               lblLoginKey.Text = v.EmployeeLoginKey.ToString(); 
               lblPassword.Text = v.passwd.ToString(); 
               lblUserName.Text = v.username.ToString(); 

            } 
       } 
       else 
       { 
           Response.Redirect("Default.aspx"); 
        } 
    } 
} 
```

之前用在线转换器转成vb，编译程序的时候报错如下一句：

```
For Each v As var In empInfo 
```

如何将var从c#转换为vb？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:44:00.113

只需跳过类型声明：`For Each v In empInfo`.

你必须`Option Infer On`设置。

正式的[`For Each`语句语法](http://msdn.microsoft.com/en-us/library/5ebk1751%28v=vs.110%29.aspx)在 MSDN 上描述如下：

```
For Each element [ As datatype ] In group
    [ statements ]
    [ Continue For ]
    [ statements ]
    [ Exit For ]
    [ statements ]
Next [ element ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:43:37.133

试试这个代码：

```
For Each Dim item In empInfo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T07:48:41.487

```
For Each v In empInfo 
```

要让 VB 推断变量类型，只需省略`As`子句，例如

```
Dim a = b + c 
```

**注意：**这仅在`Option Infer`is时有效`On`。当`Option Infer`is时`Off`，没有类型说明符的变量将默认为`Object`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:56:12.377

尝试

```
foreach (Dim v in empInfo) 
                lblID.Text = v.EmployeeID.ToString()
                lblLoginKey.Text = v.EmployeeLoginKey.ToString()
                lblPassword.Text = v.passwd.ToString()
                lblUserName.Text = v.username.ToString()
 Next 
```

不要忘记在页面顶部添加以下行

```
Option Strict On
Option Infer On 
```

# asp.net - 使用 VB 在 ASP.NET 中反序列化 JSON

> ID：15427100
> 
> 赞同：2
> 
> 时间：2013-03-15T07:41:29.160
> 
> 标签：asp.net, vb.net, json, deserialization

我在 ASP.NET 中使用 VB，我一直在考虑尝试反序列化下面的 JSON 大约 4 天，但没有成功。

问题是我下面的代码返回空值。我想获得我声明的每个班级成员的 JSON 结果，包括每个产品的价格和运费值。

谁能指出我正确的方向

1.) 为什么我不断得到空值和

2.) 如果我声明的类对我试图反序列化的 json 有效？

任何帮助是极大的赞赏！

**这是我正在使用的 JSON 示例：**

```
{
 "kind": "shopping#products",
 "items": 
   [{
   "kind": "shopping#product",
   "id": "tag:google.com,2010:shopping/products/8040/8382012077897342942",
   "product": {
    "googleId": "8382012077897342942",
    "title": "LEGO Star Wars™: Jabba's Palace™ (9516)",
    "description": "Rescue Han Solo from Jabba the Hutt's desert palace!",
    "inventories": [
     {
      "price": 119.99,
      "shipping": 12.95,
      "currency": "USD"
     }
    ]
   }
  }
 ]
} 
```

**这是我目前拥有的代码：**

```
Imports System.Web.Script.Serialization
Imports Newtonsoft.Json.Linq

Public Class inventories
    Public Property price As Double
    Public Property shipping As Double
End Class

Public Class product
    Public Property googleid As String
    Public Property title As String
    Public Inventories As inventories()
End Class

Public Class Items
    Public Property product As product()
    Public Property kind As String
    Public Property id As String
End Class

Partial Class JSON_Test
    Inherits System.Web.UI.Page

    Protected Sub getbutton_Click(sender As Object, e As System.EventArgs) Handles getbutton.Click

        ' 1\. Get JSON string from Google
        Dim google_json_string As String
        google_json_string = json_text.Text

        '2\. Deserialize JSON - Method 1
        Dim jss As New JavaScriptSerializer
        Dim ds_results = jss.Deserialize(Of List(Of Items))(google_json_string)
        result1.Text = ds_results.Count
        result2.Text = ds_results(0).kind

    End Sub
End Class 
```

**（更新）我更新了代码以包含结构如下的类（感谢 Dan-o）：**

```
Public Class g_JSON
    Public Property items As List(Of Items)
End Class

Public Class Items
    Public Property product As product()
    Public Property kind As String
    Public Property id As String
End Class

Public Class product
    Public Property googleid As String
    Public Property title As String
    Public Inventories As inventories()
End Class

Public Class inventories
    Public Property price As Double
    Public Property shipping As Double
End Class 
```

**我还更新了代码，如下所示：**

```
Partial Class JSON_Test
    Inherits System.Web.UI.Page

    Protected Sub getbutton_Click(sender As Object, e As System.EventArgs) Handles getbutton.Click

        ' 1\. Get JSON string from Google
        Dim google_json_string As String
        google_json_string = json_text.Text

        '2\. Deserialize JSON - Method 1
        Dim jss As New JavaScriptSerializer
        Dim ds_results = jss.Deserialize(Of g_JSON)(google_json_string)
        result1.Text = ds_results.items(0).id
        result2.Text = ds_results.items(0).kind

    End Sub
End Class 
```

**现在，代码将毫无问题地编译，但是当我启动点击事件时，我收到以下错误：**

*没有为“product[]”类型定义无参数构造函数。*

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.MissingMethodException：没有为“product []”类型定义无参数构造函数。

**源错误：第 38 行：Dim ds_results = jss.Deserialize(Of g_JSON)(google_json_string)**

这是什么意思，如何为 product() 创建一个无参数的构造函数？

谢谢参观！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:12:28.633

根据[jsonlint](http://jsonlint.com/) ，您的 json 无效（“库存”数组后的逗号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:02:38.003

你忘记了容器……容纳一切的类……

```
Class something
  Public property kind as string = String.Empty

  Public property items as list(of Item) = Nothing
End Class 
```

然后你反序列化为`something`，而不是 list(of item)

# xcode - “无法识别的选择器发送到实例” UINavigationController

> ID：15427108
> 
> 赞同：2
> 
> 时间：2013-03-15T07:42:05.987
> 
> 标签：xcode, setter

我的 Xcode 应用程序收到以下异常错误消息。

```
-[UINavigationController setDeals:]: unrecognized selector sent to instance 0x8338d40 
```

异常在`prepareForSegue:`方法的以下上下文中引发，可能与`destination`项目有关。抛出异常的关键行标有此注释。`//**********exception`

BSViewController.h

```
#import <UIKit/UIKit.h>
@class BSData;
@interface BSViewController : UIViewController <UITextViewDelegate, UITextFieldDelegate>
{
    }
@property (nonatomic) NSInteger iboard;
@property (nonatomic, strong) NSArray *deals;
@property (nonatomic, strong) BSData *data;
@end 
```

BSViewController.m

```
#import "BSViewController.h"
#import "BSdealViewController.h"
#import "BSData.h"

@interface BSViewController ()
@end

@implementation BSViewController
@synthesize iboard, deals;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // The identifier here must match the one you assigned to the segue in the storyboard.
    NSLog(@"identifier=%@ destination=%@", segue.identifier, segue.destinationViewController);
    if ([segue.identifier isEqualToString:@"UrlToDeal"]) {
        BSData *data;
        BSdealViewController *destination = segue.destinationViewController;
        data = [[BSData alloc] initWithNumber:self.iboard array:self.deals];
        NSLog(@"segue iboard:%d", self.iboard);
        NSLog(@"segue deals:%@", self.deals);
        destination.deals = self.deals;    //**********exception
        destination.iboard = self.iboard;
    }
}
@end 
```

BSData.h

```
#import <Foundation/Foundation.h>

@interface BSData : NSObject
@property (nonatomic) NSInteger iboard;
@property (nonatomic, copy) NSArray * deals;
- (id)initWithNumber:(NSInteger)iboard array:(NSArray *)deals;

@end 
```

BSData.m

```
#import "BSData.h"

@implementation BSData
- (id)initWithNumber:(NSInteger)iboard array:(NSArray *)deals
{
    self = [super init];
    if (self) {
        NSLog(@"self initWithNumber");
        _iboard = iboard;
        _deals = deals;
        return self;
    }
    return nil;
}
@end 
```

BSdealViewController.h

```
#import <UIKit/UIKit.h>
#import <Accelerate/Accelerate.h>
#include "BSParam.h"
@class BSData;

@interface BSdealViewController : UIViewController <UINavigationControllerDelegate>

@property (nonatomic, strong) BSData *data;
@property (nonatomic) NSInteger iboard;
@property (nonatomic, weak) NSArray *deals;

@end 
```

BSdealViewController.m

```
#import "BSData.h"
#import "BSdealViewController.h"
#import "BSViewController.h"

@interface BSdealViewController ()
@end 
```

# javascript - 如何使用 javascript 或 jquery 在 html div 标签中加载 url

> ID：15427109
> 
> 赞同：3
> 
> 时间：2013-03-15T07:42:06.897
> 
> 标签：javascript, jquery, html

在这里，我编写了以下内容，用于通过我附上的“url”加载 div 标签内的网页。但它不起作用。谁能知道。请帮忙。

```
<html>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<a href="#" onClick="lurl();">Click Here</a>
<br/>
<br/>
<br/><div id="durl">
</div>
<script type="text/javascript">
function lurl(){
$('#durl').load('http://www.tndte.com/Result/');
}
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:51:26.360

您不能使用 jQuerys ajax 方法从外部域获取数据，而无需使用`Proxy, YQL, JSONP`或等效技术来解决此问题。浏览器限制，大多数 Ajax 请求都受制于“[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)”。

您可以使用[https://github.com/padolsey/jQuery-Plugins/blob/master/cross-domain-ajax/jquery.xdomainajax.js](https://github.com/padolsey/jQuery-Plugins/blob/master/cross-domain-ajax/jquery.xdomainajax.js)并将 js 文件包含在您的页面中。下面是我用来加载外部页面的函数。

```
function test () {
         $.ajax({
           url: 'http://www.tndte.com/Result/',
           type: 'GET',
           success: function(res) {
             var content = $(res.responseText).text();
             alert(content);
           }
         });
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T07:52:18.050

没错，出于安全原因，ajax 调用无法检索外部页面。

将外部页面放到您的页面上的唯一方法是使用 iframe，或者您可以使用 ajax 调用的简单服务器端代理。

我们不能这样做，除非内容来自同一个域，并且原因 javaScript 的同源策略。

你仍然可以这样做

1.  使用 iframe 加载内容
2.  使用服务器端脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T07:48:48.153

除非您在与您的页面相同的服务器上访问文件，否则这将不起作用。如果您尝试嵌入外部内容，则需要使用 iframe。

[http://www.w3.org/TR/html4/present/frames.html](http://www.w3.org/TR/html4/present/frames.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:02:23.777

在尝试答案之前..您必须在您的 src 路径中添加 http:。

# oracle - 如何在 pl/sql 中的单次插入中获取更新的值？

> ID：15427114
> 
> 赞同：1
> 
> 时间：2013-03-15T07:42:26.300
> 
> 标签：oracle, plsql

我有一个插入命令，它将从一个临时表中获取记录并插入到 oracle 10g 中的实际事务表中。在此插入期间，我想增加事务表中的一列值，而不管暂存区域中存在的值如何。

sql编程有没有这样的“i++”选项？这样我就可以从实际事务表中获得最大值并将其递增。

或者，还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:15:25.320

你可以使用序列！在 Oracle 文档中阅读有关序列[的更多信息。](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6015.htm)

序列是独立的数据库对象，以指定的序列生成新数字。

例如，如果你只是说

```
CREATE SEQUENCE tblid_seq; 
```

将创建一个名为的新序列`tblid_seq`，从 1 开始值并以 1 递增。

您可以对序列使用`nextval`和`currval`方法。

例如，每次使用`tblid_seq.nextval`时，都会得到一个递增的值。当你使用时`tblid_seq.currval`，你会得到最后一个由 提取的值`tblid_seq.nextval`。

如何使用它？简单的。在 SQL 中：

```
INSERT INTO (tblid, val1) VALUES (tblid_seq.nextval, 'Some value'); 
```

在 PL/SQL 触发器、过程、函数或匿名块中，您可以使用：

```
var1 := tblid_seq.nextval; -- var1 is of INTEGER data type. 
```

序列独立于任何其他数据库对象，包括您使用序列生成值的表。序列也独立于事务，您不能回滚序列值。因此，如果您可以在生成的值中有间隙，请使用序列。

# ruby - 在 heroku 上访问您的网站时遇到较长的加载时间是否正常？

> ID：15427116
> 
> 赞同：0
> 
> 时间：2013-03-15T07:42:39.697
> 
> 标签：ruby, ruby-on-rails-3, heroku

当我尝试访问[https://boiling-bastion-xxxx.herokuapp.com/](https://boiling-bastion-xxxx.herokuapp.com/)时，加载大约需要 5 秒或更长时间。这正常吗？

加载后，它运行良好。我说的是第一次实际访问该链接。其他人也一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T07:48:24.617

是的，这是完全正常的。

devcenter.heroku.com 上有关于它的信息：[https ://devcenter.heroku.com/articles/dynos#dyno-idling](https://devcenter.heroku.com/articles/dynos#dyno-idling)

如果您的应用程序有一小时不活动，您的网络测功机将闲置。如果您在一小时后访问您的应用程序，web dyno 将再次唤醒，导致几秒钟的延迟。

**重要提示**：只有当您拥有一个（免费）网络测功机时，这才是一个问题。如果您运行 1 个以上的网络测功机，您将永远不会遇到这些麻烦。

# iphone - 为 iPhone SDK 检测图像中的颜色比例

> ID：15427117
> 
> 赞同：1
> 
> 时间：2013-03-15T07:42:43.320
> 
> 标签：iphone, ios, xcode, image-processing

我想从图像中检测颜色，我在 AVFoundation 的实时相机类的帮助下逐帧获取图像。现在我想从图像中检测红色并在得到红色后进行操作。我读了这篇[文章](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)，但找不到任何健康的解决方案。这可能不使用外部库吗？任何教程或帮助材料都会对我有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:04:12.013

试试这个代码。当屏幕发生触摸移动和触摸开始时调用此方法：

```
-(void) getPixelColorAtLocation:(CGPoint)point {

unsigned char pixel[4] = {0};
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(pixel, 1, 1, 8, 4, colorSpace, kCGImageAlphaPremultipliedLast);
CGContextTranslateCTM(context, -point.x, -point.y);
[self.layer renderInContext:context];
CGContextRelease(context);
CGColorSpaceRelease(colorSpace);
        if((pixel[0]=255) && (pixel[1] = 0) && (pixel[2] = 0)){
     //if pixel are red then this condition become true

} 
```

使用此方法获取图像：

```
- (UIImage *)drawLineFromPoint:(CGPoint)fromPoint toPoint:(CGPoint)toPoint image:(UIImage *)image
{

} 
```

你可以这样称呼它：

```
self.image = [self drawLineFromPoint:previousPoint  toPoint:point image:self.image]; 
```

# matlab - Matlab访问目录

> ID：15427120
> 
> 赞同：1
> 
> 时间：2013-03-15T07:43:05.757
> 
> 标签：matlab

我想计算我的 Ground Truth 和 Segmentation 结果之间的比较，两者都保存在不同的目录中`main_folder`，我想访问它，但似乎我无法访问目录内的数据。有人可以帮我代码有什么问题吗？

这是代码：

```
addpath('main')
currentDir=pwd; % current directory in main_folder 
cases=dir('Casos_img');
interp=1;
ori=1;
ASMvGT=zeros(0,1);
for c=3:size(cases,1)
     caseName=cases(c).name;
     gt_case=[currentDir '\Casos_combine\' cases(c).name]; %'
     % ground truth combined
     [~,~,~,volumeL,volumeR]=load_file(gt_case,0,ori);
     ind= volumeR>0;volumeGT=volumeL;volumeGT(ind)=1;
     [GT1 GT2 GT3]=ind2sub(size(volumeGT),find(volumeGT>0));GT=[GT1 GT2 GT3];

     segm_case=[currentDir '\Casos_img\' cases(c).name]; %'
     [~,~,~,volumeL,volumeR]=load_file(segm_case,0,0);
     ind= volumeR>0;volumeS=volumeL;volumeS(ind)=1;
     [ASM1 ASM2 ASM3]=ind2sub(size(volumeS),find(volumeS>0));ASM=[ASM1 ASM2 ASM3];

     [hd,~]=HausdorffDist(GT,ASM);
     ASMvGT=[ASMvGT;hd];%/numel(volumeGT)];

end
save resultshd ASMvGT 
```

我无法使用 load_file 函数获取卷，因为当我调试它时，问题是我无法访问目录内的数据。请帮我解决这个问题，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:55:22.360

使用`chdir`和`fullfile`命令创建具有完整路径的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:57:38.903

利用`addpath(genpath("___address of main_folder___"))`

将主文件夹的地址放在上面。用上面的行替换代码的第一行。你只写了`addpath('main')`. 因此，它不会添加子文件夹，这就是您可能会出错的原因。`genpath`创建子文件夹列表，因此如果您组合`addpath`and `genpath`，当前文件夹及其所有子文件夹将被添加。

# css - 如何使中心圆居中？

> ID：15427125
> 
> 赞同：3
> 
> 时间：2013-03-15T07:43:23.000
> 
> 标签：css, vertical-alignment, centering, alignment

如何使中心圆居中（仅限 CSS）？   *[假设最新的 CSS3 浏览器支持。]*

当父 w/h 动态变化时，必须保持 v/h 居中。

实验性的 CSS 盒子模型规范在这里会有所帮助吗？

谢谢。

[http://jsfiddle.net/dragontheory/VdJFa/5/](http://jsfiddle.net/dragontheory/VdJFa/5/)

```
<div class="parent">
    <div class="middle">
        <div class="circle">
            <div class="circle"></div>
        </div>
    </div>
</div>

.parent         {display: table; 
                margin: 50px auto;
                background: lightgray;
                height: 100px;
                width: 100px;}

.middle         {display: table-cell; 
                vertical-align: middle;}

.circle         {margin: auto;
                border: solid 10px blue;
                border-radius: 50%;
                opacity: 0.3;
                width: 50px;
                height: 50px;}

.circle .circle {width: 15px;
                height: 15px;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:28:12.117

您需要适当地提供中间容器，`padding`这将有助于将内容带到中心。

您可以通过给出一个`left`ie来实现相同的效果`.middle`：

```
.middle {
    vertical-align: middle;
    text-align:center;
    left:10%;
    position:relative; /*makes left effective*/
    display:table-cell;
} 
```

此外，你必须给你的孩子`div.circle`一个特定的`width`并`height`结合`border-radius`它来对齐它并给它一个圆形的形状。

最后，您需要使用内圆的边距来对齐它。

看到这个[小提琴](http://jsfiddle.net/manishmishra256/VdJFa/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T07:54:50.793

这不是完美的解决方案，但它对我有用。应该使用的居中标签在这里没有改变任何东西，所以我希望任何人都能提供更好的解决方案。

```
.circle .circle{
    width: 15px;
    height: 15px;
    margin-top: 15%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:07:01.847

要将小圆圈居中在大圆圈中，只需在以下位置使用`.circle .circle`：

```
margin-top: 7px; 
```

您使用 水平对齐内圆`margin: auto`。为了让这个东西垂直居中，计算上边距，因为外圆的大小也是固定的。它基本上是这样的：

```
( outer circle (height) - inner circle (height + 2 x border) ) / 2
( 50 - 15 + 10 + 10 ) / 2 = 7.5px 
```

[先试后买](http://jsfiddle.net/zkNHz/)

## 第一个答案

**即使大圆圈变大，也能将小圆圈居中在大圆圈内**

如果`parent`增加的大小，大圆圈应该缩放，小圆圈应该保持在中间。那是对的吗？然后这可以工作 - 尝试改变父母的宽度：

**演示**

[先试后买](http://jsfiddle.net/UhBLC/]

**HTML**

```
<div class="parent">
    <div class="circle">
        <div class="tiny_circle"></div>
    </div>
</div> 
```

**CSS**

```
.parent{
    display: table; 
    margin: 50px auto;
    background: lightgray;
    height: 200px;
    width: 200px;
}

.circle {    
    display: table-cell;
    vertical-align: middle;
    background: blue;
    border-radius: 50%;
    opacity: 0.3;
    width: 100%;
    height: 100%;
}

.tiny_circle {
    margin: auto;
    border-radius: 50%;
    width: 15px;
    height: 15px;
    background: red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-01T23:01:27.643

您可以使用`place-items`of `grid`。外圈在这里定义为网格。

```
.parent {
  display: table;
  margin: 50px auto;
  background: lightgray;
  height: 100px;
  width: 100px;
}

.middle {
  display: table-cell;
  vertical-align: middle;
}

.circle {
  margin: auto;
  border: solid 10px blue;
  border-radius: 50%;
  opacity: 0.3;
  width: 50px;
  height: 50px;
  /* Two lines below added */
  display: grid;
  place-items: center;
}

.circle .circle {
  width: 15px;
  height: 15px;
}
```

```
<div class="parent">
  <div class="middle">
    <div class="circle">
      <div class="circle"></div>
    </div>
  </div>
</div>
```

# php - if else 条件语句仅包含特定字符串

> ID：15427127
> 
> 赞同：0
> 
> 时间：2013-03-15T07:43:31.970
> 
> 标签：php, wordpress, if-statement

我想在 wordpress 标题中加载我的样式表和脚本，以在我的首页/主页中显示文档，以通过 wordpress 选项设置提供特定条件`get_option('my_main_scripts')`。

此选项设置的值池是`javascript library, javascript yui, javascript jquery, javascript dojo`等等。所有选项值均由常用词组成`javascript`。如果从包含 word 的池中选择任何一个值，则希望加载 css `javascript`。

因此，使用 OR (||) 为每个选项编写条件，我认为最好从值中获取常用词并写下条件。`javascript`我怎样才能得到这个？

```
<?php if ( is_home() || is_front_page()  ) { ?>

<?php if (get_option('my_main_scripts') == "javascript library"): ?>

<link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/css/javadoc.css" type="text/css" media="screen" />
<link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/js/javadoc.dojo.css" type="text/css" media="screen" />

<link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/js/javadoc.yui.css" type="text/css" media="screen" />

<link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/js/javadoc.jquery.css" type="text/css" media="screen" />

<?php get_template_part('documation'); ?>
<?php endif; ?>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:46:25.897

使用[strpos](http://php.net/manual/en/function.strpos.php)。

```
if(strpos(get_option('my_main_scripts'),'javascript') !== false ) 
```

也看看[preg_match](http://php.net/manual/en/function.preg-match.php)。

```
if(preg_match('/javascript/',get_option('my_main_scripts'))) 
```

# java - 为什么 setSkew 增加文本大小？

> ID：15427128
> 
> 赞同：0
> 
> 时间：2013-03-15T07:43:34.030
> 
> 标签：java, itext

我正在使用 iText 5.2.1 版。为了完全理解对象的`setSkew`方法`Chunk`，我开始用下面的代码来玩它：

```
 for (int i=0; i <= 90; i+=5) {
    Chunk c = new Chunk("A" + i);
    c.setSkew((float)i, (float)-i);
    document.add(c);
  } 
```

令我惊讶的是，当接近 90 度时，文本逐渐变大。我无法理解这种行为：根据“itext in action 2nd ed”。book，setSkew 的第一个参数是文本基线的倾斜度，第二个参数是字符与（原始）基线之间的角度。

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:19:37.533

您基本上缺少的是，您希望参数的倾斜只是像简单的旋转一样，可以保持大小不变​​。这**不是**倾斜的情况。相反，倾斜的工作方式如下：

![解释倾斜的草图](../Images/ac34fa4acb86c500ef37e8f3c4dc2f90.png)

*[（无耻地抄袭PDF 规范 ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)中的“图 13 – 坐标变换的影响” ）*

保持不变的是倾斜基线在文本行的常规基线上的*投影*长度：

![带有基线投影 x0 和 x1 的草图](../Images/16dbf27ce8afa23b4bb9c83fb0bb06c8.png)

这里 x0 和 x1 的长度相同，但倾斜的基线更长。角度越陡，倾斜的基线和那里的字形宽度就越长。

模拟用于 y 轴。因此，您的样本结果如下：

![在此处输入图像描述](../Images/aa651be293dccd644648bd28339623e4.png)

如果您更喜欢数学推理，请考虑倾斜变换矩阵的值 [1 tan(a) tan(b) 1 0 0]。所以 (1, 0) 偏斜到 (1, tan(a))，(0, 1) 偏斜到 (tan(b), 1)，其他一切都根据线性度对应。

# javascript - 当您尝试下载它们时，为什么javascript库只链接到文本页面

> ID：15427133
> 
> 赞同：-2
> 
> 时间：2013-03-15T07:43:44.073
> 
> 标签：javascript, download

我似乎看到许多 javascript 库，当您选择他们的 DOWNLOAD 选项时，它们实际上会将我引导到一个以文本形式编写的 js 网页。

然后我必须复制/粘贴到我自己的文本编辑器中，并“另存为”我选择的任何名称，这意味着成千上万的人都携带同一个库，但可能有许多不同的文件名。

例如，查看 Raphaeljs: [raphael 主页](http://raphaeljs.com/)

当您单击其下载按钮时，它会将我定向到[raphael js 文件](https://raw.github.com/DmitryBaranovskiy/raphael/master/raphael-min.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:47:59.000

右键单击链接->将链接另存为...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:18:29.840

只需单击下载按钮>>您的文件 xyz.js 将在浏览器中打开。

按 Ctrl + S 保存页面并选择`*.*`（所有文件类型）

这将自动将文件保存为 .js

和 >> 将链接另存为 >> 也适用于此。如果您选择文件类型。

一些旧版本具有默认文件类型，不会自动更改文件类型。所以你可能有其中之一。（我不确定，只是猜测）

我希望这个能帮上忙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:04:24.877

右键单击并以正确的方式保存链接，但您可以使用一些工具，例如 firebug for firefox。 [nhac在线](http://xapxinh.com)

# c# - 我可以在另一个班级画模型吗？

> ID：15427134
> 
> 赞同：0
> 
> 时间：2013-03-15T07:43:48.897
> 
> 标签：c#, visual-studio, xna, drawablegamecomponent

我正在尝试在另一个班级中绘制模型。我试图在另一个班级中绘制模型。但是，我的模型根本无法使用我所做的代码进行渲染。

这里是 Game1 的代码**：（**注意**：**这些代码适用于 Game1）

```
private Vector3 position = new Vector3(0, 0, 0);
private Matrix world;
private Matrix view;
private Matrix projection = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45), 800f / 600f, 0.1f, 100f);
private Model car;
SpriteBatch spriteBatch;
GraphicsDeviceManager graphics;
public Game1()
{

    graphics = new GraphicsDeviceManager(this);
    Content.RootDirectory = "Content";
    Vector3 transformedReference = Vector3.Transform(new Vector3(0, 5, 15), Matrix.CreateRotationY(0f));
    view = Matrix.CreateLookAt(position + transformedReference, position, Vector3.Up);
}
protected override void Initialize()
{
    Components.Add(new Car(this, view, projection));
    world = Matrix.CreateTranslation(position);
    Vector3 transformedReference = Vector3.Transform(new Vector3(0, 5, 15), Matrix.CreateRotationY(0f));
    view = Matrix.CreateLookAt(position + transformedReference, position, Vector3.Up);
    base.Initialize();
}
protected override void LoadContent()
{
    spriteBatch = new SpriteBatch(GraphicsDevice);
    car = Content.Load < Model > ("car\\car");
}
public void DrawModel(Model model, Matrix world, Matrix view, Matrix projection)
{

    foreach(ModelMesh mesh in model.Meshes)
    {
        foreach(BasicEffect effect in mesh.Effects)
        {

            effect.EnableDefaultLighting();
            effect.PreferPerPixelLighting = true;
            effect.World = mesh.ParentBone.Transform * world;
            effect.View = view;
            effect.Projection = projection;
        }

        mesh.Draw();
    }
}
protected override void Update(GameTime gameTime)
{
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        this.Exit();
    world = Matrix.CreateTranslation(position);
    base.Update(gameTime);
}
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    DrawModel(car, world, view, projection);
    base.Draw(gameTime);
} 
```

这里是我的**另一个类的代码：（**注意**：**这些代码不能正常工作或模型无法在 Game1 图形上渲染）

```
 public class Car: DrawableGameComponent
{
    public Model CarModel
    {
        get;
        set;
    }
    private Vector3 position = new Vector3(0, 0, 0);
    private Matrix World = Matrix.CreateTranslation(new Vector3(0, 0, 0));
    public Matrix Camera
    {
        get;
        set;
    }
    public Matrix Projection
    {
        get;
        set;
    }
    public Game1 GameParent
    {
        get;
        set;
    }
    public Car(Game1 game, Matrix view, Matrix projection): base(game)
    {
        view = Camera;
        Projection = projection;
        Camera = view;
        GameParent = game;

        World = Matrix.CreateTranslation(position);
        base.Initialize();
    }

    public static void DrawModel(Model model, Matrix world, Matrix view, Matrix projection)
    {
        foreach(ModelMesh mesh in model.Meshes)
        {
            foreach(BasicEffect effect in mesh.Effects)
            {

                effect.EnableDefaultLighting();
                effect.PreferPerPixelLighting = true;
                effect.World = mesh.ParentBone.Transform * world;
                effect.View = view;
                effect.Projection = projection;
            }

            mesh.Draw();
        }
    }
    protected override void LoadContent()
    {
        CarModel = GameParent.Content.Load < Model > ("car\\car");
        base.LoadContent();
    }
    public override void Update(GameTime gameTime)
    {
        base.Update(gameTime);
    }
    public override void Draw(GameTime gameTime)
    {
        DrawModel(CarModel, World, Camera, Projection); //DOESN'T WORK WELL!!
        base.Draw(gameTime);
    }
} 
```

好的，我的观点只是想在另一个类中绘制 3D 模型，，

好吧，我该怎么做才能解决这个问题？

我希望你不介意帮助我，你能理解我的意思..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:26:54.743

很难看出您的代码有什么问题，因为它包含两个版本。稍微清理一下。以下是一些提示：

根据我的经验，您不想将 DrawableGameComponent 用于单个对象。坚持编写自己的类并将它们放入集合或类似的东西中。这样，您就不必处理 XNA 启动更新并为您绘制的巫术。最好自己控制。

您不希望您的 CAR 处理视图矩阵和投影矩阵。将它们留在你的游戏类中（现在应该有一个相机类）并将它们传递给你的 Car.Draw 方法。我看到您在构造函数中传递了它，但据我所知，矩阵是值类型，因此代码其他部分中对视图的更改不会传播到您的汽车。

所以将 Car.Draw 更改为：

```
public void Draw(Matrix view, Matrix projection)
{
    DrawModel(view, projection);
} 
```

正如您可能从我对绘图的更改中得到的那样，您还应该使 DrawModel 成为一个普通方法（删除静态），这样它就不必接收模型和世界。

你的汽车应该有一个四元数或类似的旋转。Car.World 可以这样写：

```
Matrix World = Matrix.Identity;

//In update:
World = Matrix.FromQuaternion(Rotation) * Matrix.CreateTranslation(Position); 
```

让 Car 的构造函数将 Model 作为参数。这样你也可以放弃“GameParent”和 LoadContent-Method。

在你的游戏级：

抛弃静态的 DrawModel 方法。抛弃田野世界和汽车。他们现在属于汽车级。

为您的汽车创建一个字段（不是属性的类级变量）：

```
Car MyCar = null; 
```

在 Game1.LoadContent 中：

```
MyCar = new Car(Content.Load<Model>("car//car")); 
```

在 Game1.Update 中：

```
MyCar.Update(gameTime); 
```

在 Game1.Draw 中：

```
GraphicsDevice.Clear(Color.CornFlowerBlue);
MyCar.Draw(View, Projection); 
```

编辑;

对于游戏引擎，您通常会有一些当前缺少的“部分”：

*   游戏状态系统（Menu 是一种状态，NormalLevel 和 BossLeve 是其他的例子）
*   相机服务（因此您可以从任何地方获取当前视图/投影矩阵） - 计时服务（因此您可以从任何地方获取 (float)gameTime.ElapsedGametime.TotalSeconds）
*   输入服务（因此您可以从任何地方获取每次更新的输入值）

一个相机系统可以很简单：

```
public interface ICamera
{
    Vector3 Position { get; }
    Matrix View { get; }
    Matrix Projection { get; }

    void Update(float deltaTime);
    void Target(Vector3 targetPosition);
}

public class CameraService
{
    public static ICamera ActiveCamera { get; private set; }

    public static void ActivateCamera(ICamera camera)
    {
        if (ActiveCamera != null)
            camera.Target(ActiveCamera.Target);

        ActiveCamera = camera;
    }

    public static Update(float deltaTime)
    {
        if (ActiveCamera != null)
            ActiveCamera.Update(deltaTime);
    }
}

public class BasicCamera: ICamera
{
    public Vector3 Position { get; protected set; }
    public Matrix View { get; protected set; }
    public Matrix Projection { get; protected set; }

    public void Target(Vector3 targetPosition)
    {
        View = Matrix.CreateLookAt(Position, targetPosition, something something);
    }

    public BasicCamera(Vector3 position, Vector3 target)
    {
        //Set shit up
    }
} 
```

# c - 如何测量一个程序的用户/系统 cpu 时间？

> ID：15427137
> 
> 赞同：2
> 
> 时间：2013-03-15T07:43:56.353
> 
> 标签：c, unix

在经典 APUE（UNIX 环境中的高级编程）的第 3.9 节中，作者测量了在他的示例程序中消耗的用户/系统时间，该示例程序针对不同的缓冲区大小（一个 I/O 读/写程序）运行。

结果表有点像（所有时间都以秒为单位）：

```
BUFF_SIZE  USER_CPU   SYSTEM_CPU  CLOCK_TIME  LOOPS
1          124.89     161.65      288.64      103316352
...        
512        0.27       0.41        7.03        201789
... 
```

我很好奇并且真的想知道如何测量一个程序的用户/系统 CPU 时间？

在这个例子中，这`CLOCK TIME`意味着什么以及如何衡量它？

显然，它不仅仅是用户 CPU 时间和系统 CPU 时间的总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T07:54:39.007

`time`您可以使用以下命令轻松测量程序的运行时间`*nix`：

```
$ time myprog

real        0m2.792s
user        0m0.099s
sys         0m0.200s 
```

`real`or指的`CLOCK_TIME`是挂钟时间，即从程序开始到完成所花费的时间，甚至包括其他进程在内核上下文切换它们时所占用的时间片。它还包括任何时间，进程被阻塞（在 I/O 事件等上）

`user`or`USER_CPU`是指在用户空间（即内核之外）花费的 CPU 时间。与`real`时间不同，它仅指特定进程占用的 CPU 周期。

`sys`or是指在内核空间中花费的`SYSTEM_CPU`CPU 时间（作为系统调用的一部分）。同样，这只是代表进程计算在内核空间中花费的 CPU 周期，而不是它被阻塞的任何时间。

在该`time`实用程序中，`user`and是根据系统调用中的一个或系统调用`sys`计算得出的。通常使用在程序开始和结束时使用系统调用收集的 2 个时间戳中的时间差来计算。[`times()`](http://linux.die.net/man/2/times)[`wait()`](http://man7.org/linux/man-pages/man2/wait.2.html)`real`[`gettimeofday()`](http://linux.die.net/man/2/gettimeofday)

您可能还想知道的另一件事是`real != user + sys`。在多核系统上，`user`或`sys`或它们的总和很容易超过`real`时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T07:49:31.643

部分答案：

好吧，CLOCK_TIME 与时钟显示的时间相同，时间流逝在所谓的“现实世界”中。

衡量这一点的一种方法是使用[gettimeofday](http://linux.die.net/man/2/gettimeofday) POSIX 函数，该函数将时间存储到调用者的时间`struct timeval`，包含 UNIX 秒字段和微秒字段（实际准确度通常较低）。在典型基准代码中使用它的示例（忽略错误等）：

```
struct timeval tv1, tv2;
gettimeofday(&tv1, NULL);

do_operation_to_measure();

gettimeofday(&tv2, NULL);

// get difference, fix value if microseconds became negative
struct timeval tvdiff = { tv2.tv_sec - tv1.tv_sec, tv2.tv_usec - tv1.tv_usec };
if (tvdiff.tv_usec < 0) { tvdiff.tv_usec += 1000000; tvdiff.tv_sec -= 1; }

// print it
printf("Elapsed time: %ld.%06ld\n", tvdiff.tv_sec, tvdiff.tv_usec); 
```

# asp.net - asp.net MVC 4 显示 unicode 文本字段

> ID：15427139
> 
> 赞同：0
> 
> 时间：2013-03-15T07:44:00.627
> 
> 标签：asp.net, asp.net-mvc-4

我有这个模型命名`News`：

```
NewsId int,
Subjet nvarchar(100),
Content text 
```

创建时，`news instance`我尝试为内容字段输入 unicode 文本。问题是这个 unicode 内容字段显示如下：

```
????? ???? ??? 400 ????? ???? ???? 
```

**注意：**要显示内容字段，我这样做`view`：

```
 @Html.DisplayFor(modelItem => item.Content) 
```

我尝试在 web.config 中设置 unicode 选项：

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" fileEncoding="utf-8" /> 
```

但它没有用！

我也试过`@Html.Encode(item.Content)`，但没有结果！

**编辑：**在 head 部分使用这个标签对我没有帮助： `<meta charset="utf-8" />`

有什么建议吗？

**编辑：**我刚刚发现`News Instances`保存在数据库中的内容字段的数据已损坏。正如我所提到的，数据库中内容字段的类型是`text`，我使用此代码创建一个`News Instance`：

```
[HttpPost]
[Authorize]
public ActionResult Create(News news)
{
    if (ModelState.IsValid)
    {
        db.News.Add(news);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(news);
} 
```

但内容字段的值是这样保存的：

```
????? ???? ??? 400 ????? ???? ???? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:45:15.620

`<head>`尝试通过在布局部分放置以下元标题来制作您的页面 utf-8 ：

```
<meta charset="utf-8" /> 
```

另一种可能性是文本已经在您的数据库中存储损坏，在这种情况下，您必须修复负责该问题的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:15:56.710

我终于想出了这个解决方案：

我将`content`字段类型从`text`to更改为`nvarchar(max)`，一切顺利。

# jquery - 如何使用 Jquery 追加和删除逗号分隔值（字符串）

> ID：15427142
> 
> 赞同：-4
> 
> 时间：2013-03-15T07:44:15.243
> 
> 标签：jquery

基本上我正在尝试创建类似 Jquery Input Token 的东西。我将通过自动完成（自定义）将值添加到逗号分隔的字符串中，并且还想提供一个删除选项。

我正面临这个问题，任何形式的帮助将不胜感激..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T07:48:03.990

我不会为此使用逗号分隔的字符串。我会使用一个数组，然后在必要时将其*转换*为逗号分隔的字符串（通过`join`）。

但：

*添加*当然很容易（假设`data`和`newEntry`都是字符串）：

```
data += "," + newEntry; 
```

或者如果您想避免使用前导逗号：

```
data = data ? (data + "," + newEntry) : newEntry; 
```

*删除*更具挑战性，这也是我不为此使用字符串的部分原因。但是你可以这样做：

```
var tmp = data.split(',');
var index = tmp.indexOf(entryToRemove);
if (index !== -1) {
    tmp.splice(index, 1);
    data = tmp.join(',');
} 
```

...它使用了一个中间数组。或者，您可以使用 找到条目`String#indexOf`并通过`String#substring`抓取它之前和之后的位并将它们放在一起来删除它。

# javascript - JQuery - 单击时切换文本无法正常工作

> ID：15427144
> 
> 赞同：1
> 
> 时间：2013-03-15T07:44:18.267
> 
> 标签：javascript, jquery

如果您在[此处查看此页面，](http://mountainfoodstorage.com/index.php/media)您会看到我有一个 Youtube 画廊设置，它在大多数情况下都有效。当您单击缩略图时，它会切换视频，但不会正确切换右侧的文本。它似乎正在加载视频后面的文本，在某些情况下需要单击两次才能切换右侧的文本。

看看我下面的 jQuery，有人可以帮我确定问题吗？

谢谢！

```
<script>
function replaceVideo(id) {
  originalSrc = jQuery("iframe", "#" + id).attr("src");
  autoPlay = originalSrc + "&autoplay=1";
  jQuery("iframe", "#" + id).attr("src", autoPlay);
  video = jQuery(".video-content", "#" + id).html();
  text = jQuery(".video-description").html();
  jQuery(".vid_desc").html(text);
  jQuery(".flex-video").html(video);
  jQuery("iframe", "#" + id).attr("src", originalSrc);
}

jQuery(".video-list li").click(function() {
  id = jQuery(this).attr("id");
  replaceVideo(id);
});

jQuery(window).load(function() {
  if(window.location.search.substring(1)) {
        element = window.location.search.substring(1).split('&');
        if (document.getElementById(element[0])) {
            document.onload = replaceVideo(element[0]);
        }
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:58:15.783

在处理程序中包装代码`document.ready`。

```
$(function(){
jQuery(".video-list li").click(function() {
  id = jQuery(this).attr("id");
  replaceVideo(id);
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:05:47.880

我认为问题在于您如何选择要显示的文本。

这条线

```
text = jQuery(".video-description").html(); 
```

正在使用“video-description”类抓取每个元素。您可能只想从单击的项目中获取视频描述。所以像：

```
text = jQuery("#" + id + " .video-description").html(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:17:09.663

我能够使用以下代码修复它。:-)

```
<script>
function replaceVideo(id) {
  originalSrc = jQuery("iframe", "#" + id).attr("src");
  autoPlay = originalSrc + "&autoplay=1";
  jQuery("iframe", "#" + id).attr("src", autoPlay);
  video = jQuery(".video-wrap", "#" + id).html();
  jQuery(".flex-video").html(video);
  text = jQuery(".video-description", "#" + id).html();
  jQuery(".vid_desc").html(text);
  jQuery("iframe", "#" + id).attr("src", originalSrc);
}

jQuery(".video-list li").click(function() {
  id = jQuery(this).attr("id");
  replaceVideo(id);
});

jQuery(window).load(function() {
  if(window.location.search.substring(1)) {
        element = window.location.search.substring(1).split('&');
        if (document.getElementById(element[0])) {
            document.onload = replaceVideo(element[0]);
        }
    }
});
</script> 
```

# boost-asio - 如何在 boost asio 中为 unix 域套接字设置 MSG_MORE？

> ID：15427145
> 
> 赞同：0
> 
> 时间：2013-03-15T07:44:22.637
> 
> 标签：boost-asio

我正在使用带有 unix 域套接字的 boost asio，我对如何设置`MSG_MORE`发送消息时感到困惑。我在 boost 代码中做了一个 grep，没有找到任何对`MSG_MORE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:39:37.157

`send`对您正在使用的任何接受`flags`参数的套接字成员函数使用重载。例如，这里是 的重载之一[`local::datagram_protocol::socket::async_send()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_datagram_socket/async_send/overload2.html)：

```
template<
    typename ConstBufferSequence,
    typename WriteHandler>
void async_send(
    const ConstBufferSequence & buffers,
    socket_base::message_flags flags,
    WriteHandler handler); 
```

该`flags`参数是一个[位掩码](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/socket_base/message_flags.html)，指定如何进行发送调用。由于这些是特定于套接字的，因此自由函数不会提供接受这些标志的重载。

# php - 不同的用户类型，不同的数据

> ID：15427147
> 
> 赞同：2
> 
> 时间：2013-03-15T07:44:25.477
> 
> 标签：php, mysql, propel

我有一个项目，要建立一个模特经纪公司 cms。后端和其他部分对我来说还可以，我不熟悉的是不同的用户，我被逻辑困住了。

我的逻辑是这样的

创建具有以下名称和级别的组表

```
id |    group_id     | level
1  |    Admin        | 20
2  |    Moderator    | 10
3  |    Model        | 1
4  |    Photographer | 1
5  |    Stylist      | 1
6  |    Agency       | 1 
```

组 ID 和用户 ID 将保存在这样的用户组表中

```
group_id | user_id
1        |       1
1        |       5
1        |       6
3        |       10 
```

这就是我所坚持的，所以由于这些用户有不同的数据，我正在考虑为他们创建多个表单，其中一些字段隐藏了实际用户类型不需要的内容，当有人浏览配置文件时，切换将进行组检查，并显示不同的配置文件

例子

```
switch ($user->groupId) {
    case 3:
        // model profile
        break;

    case 4:
        // photographer profile
        break;

    // and others
} 
```

在某种程度上这是一个很好的逻辑吗？有人可以给我一些例子或给我一个提示吗？

谢谢

**编辑**

我没有使用框架，我基于[推进制作了自己的基本 cms](http://propelorm.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-06T06:33:21.703

IMO 实现这一目标的最佳方法是尝试在 Propel 中使用单表继承或具体表继承。你可以在这里阅读[http://propelorm.org/Propel/documentation/09-inheritance.html](http://propelorm.org/Propel/documentation/09-inheritance.html)

# jsf - org.primefaces.extensions.component.remotecommand.RemoteCommandRenderer.decode 的 java.lang.NullPointerException

> ID：15427152
> 
> 赞同：0
> 
> 时间：2013-03-15T07:44:40.483
> 
> 标签：jsf, primefaces, primefaces-extensions

在 Facelet 上，我尝试使用`<pe:remoteCommand>`更新 backingbean 值：

```
<pe:remoteCommand name="saveMapArea" process="@this" actionListener="#{defineMapArea.createMapArea}">
    <pe:assignableParam name="areaString"  assignTo="#{defineMapArea.tagMapArea.mapArea}"/>  
    <pe:assignableParam name="areaName" assignTo="#{defineMapArea.tagMapArea.name}" />
    <pe:assignableParam name="castId" assingTo="#{defineMapArea.tagMapArea.castId}" />           
</pe:remoteCommand> 
```

`castId`当用户单击提交按钮时，jQuery 从下拉列表中检索值，下拉列表的代码是：

```
<h:selectOneMenu id="area_assign_device">
    <f:selectItem itemLabel="Select Icast" itemValue="" />
    <f:selectItems value="#{defineMapArea.castList}" var="cast" itemLabel="#{cast.name}" itemValue="#{cast.castId}"/>
</h:selectOneMenu> 
```

提交按钮的代码是：

```
<p:commandButton value="Submit" type="button" onclick="CreateArea.saveArea()"/> 
```

调用 remotecommand 'saveMapArea' 的代码是：

```
saveArea : function() {
    if(CreateArea.validate()) {
        // ...some other code to init map area...

        var name=jQuery('#area_name_text').val();
        var castId=jQuery('#area_assign_device').val();
        saveMapArea(mapArea, name, castId);
        CreateArea.points = [];
    }              
} 
```

我的支持豆是：

```
@ManagedBean
@RequestScoped
public class DefineMapArea extends BaseJsfBean {

    private static final long serialVersionUID = 1L;
    private static Log log = LogFactory.getLog(DefineMapArea.class);
    private TagMapArea tagMapArea;
    private List<TagMapArea> areaList;
    private String areaListJson;

    @ManagedProperty(value="#{tagCustomService}")
    private ITagCustomService tagCustomService;  

    @Override
    protected void init() throws Exception {
        // ..some initializations...
    }  

    public void createMapArea() {
        log.info("Area Persisting : " + tagMapArea.getMapArea());               
        tagMapArea.setTagMapImageId(2);
        tagMapArea.setMapAreaType("test");
        tagMapArea.setDescription("test");
    }

    // ....all the getters and setters....
} 
```

`TagMapArea`是 JPA 实体，包括`castId`字段的部分是：

```
@Column(name = "cast_id", nullable = false)
protected Integer castId;

@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="cast_id", nullable=false, insertable=false, updatable=false)
protected TagCast cast; 
```

问题是当我点击提交按钮时，它会抛出`NullPointerException`这样的：

```
java.lang.NullPointerException
    at org.primefaces.extensions.component.remotecommand.RemoteCommandRenderer.decode(RemoteCommandRenderer.java:82)
    at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1377)
    at org.apache.myfaces.context.servlet.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:731)
    at org.apache.myfaces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:214)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:932) 
```

我很确定这是由`castId`远程命令中的字段引起的，因为如果我删除该字段，它就可以正常工作。我很困惑为什么从下拉列表中检索到的选定值没有发送到远程命令。有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:01:59.123

仍然不确定哪里出了问题，但我发现了一个四处走走，而不是在 primefaces 扩展中使用远程命令，我尝试了 primefaces 中的原始远程命令并且它有效。

修改后的代码为：

```
<p:remoteCommand name="saveMapArea" actionListener="#{defineMapArea.createMapArea}" /> 
```

对于 javascript 部分，它变为：

```
saveMapArea([{name:'mapArea', value:mapArea},{name:'name',value:name},{name:'castId',value:castId}]); 
```

在支持 bean 的 createMapArea 方法中，获取值的代码片段是：

```
 FacesContext context = FacesContext.getCurrentInstance();
    Map map = context.getExternalContext().getRequestParameterMap();
    String mapArea = (String)map.get("mapArea");
    String name = (String)map.get("name");
    String castId = (String)map.get("castId");
    log.info("Area Persisting : " + mapArea);
    log.info("name: " + name + " castId: " + castId); 
```

# c - “DisplayMenu”的静态声明遵循非静态声明

> ID：15427153
> 
> 赞同：0
> 
> 时间：2013-03-15T07:44:42.673
> 
> 标签：c, static, defined

为什么我不断收到此错误？帮帮我，这是家庭作业。我对编程帮助非常陌生。$ gcc homework.c homework.c：在函数'main'中：homework.c:32:6：错误：'DisplayMenu'的静态声明遵循非静态声明homework.c:11:7：注意：'的先前声明DisplayMenu' 在这里

```
#include <stdio.h>

void DisplayMenu();
void numberPlus10();
void numberTimes2();
void numberMinus1();
void numberTimesnumber();

int main (void)
{
    int choice;
    void DisplayMenu();
    scanf("%i", &choice);   

    switch (choice)
    {
        case 1:
            numberPlus10();
            break;
        case 2:
            numberTimes2();
            break;
        case 3:
            numberMinus1();
            break;
        case 4:
            numberTimesnumber();
            break;
        default:
            break;
    }

void DisplayMenu()
{
    printf("1\. Number + 10\n");
    printf("2\. Number * 2\n");
    printf("3\. Number - 1\n");
    printf("4\. Number * Number\n");
}

void numberPlus10()
{
    int x;
    printf("Please enter a number:\n");
    scanf("%i", &x);

    printf("Your number + 10 is %i\n", x + 10);
}

void numberTimes2()
{
    int x;
    printf("Please enter a number:\n");
    scanf("%i", &x);

    printf("Your number * 2 is %i\n", x * 2);
}

void numberMinus1()
{
    int x;
    printf("Please enter a number:\n");
    scanf("%i", &x);

    printf("Your number - 1 is %i\n", x - 1);
}

void numberTimesnumber()
{
    int x;
    printf("Please enter a number:\n");
    scanf("%i", &x);

    printf("Your number squared is %i\n", x * x);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:01:26.053

在 C 中，我们不在任何块内实现函数。相反，功能应在全局范围内实现。

去掉最后一个右括号，放在`switch`in的末尾`int main(void)`，就不会再有错误了。

**编辑：**

首先..我确定以上是您的源代码无法编译的原因。

另外，请检查大卫的回答，因为我们都认为您在打算调用它时做了一个函数声明——尽管这个错误并没有触发编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:01:53.707

陈鹏宇当然是对的！但！你那里还有另一个错误。

```
 int choice;
 void DisplayMenu();  // You should not declare a function here.
 scanf("%i", &choice); 
```

我猜你打算调用这个函数 - 所以只需从行首删除“void”。

```
 int choice;
 DisplayMenu();   // Call DisplayMenu
 scanf("%i", &choice); 
```

并且...请阅读语言规范

# javascript - 第一个空格后的jquery跨度

> ID：15427159
> 
> 赞同：2
> 
> 时间：2013-03-15T07:45:12.063
> 
> 标签：javascript, jquery, tags

我有三个词我想在第一个空格之后的内容周围添加一个跨度，所以

```
hello world 
```

变成：

```
hello <span>world</span> 
```

和：

```
hello world again 
```

变成：

```
hello <span>world again</span> 
```

这是我的 JavaScript 代码：

```
 $( "#main-nav li a" ).each(function( index ) {
   $(this).html( $(this).text().replace(/([\S]*)\s(.*)/, "$1 <span>$2</span>") );
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T07:52:35.540

你可以用一些正则表达式来做到这一点：

```
text = text.replace(/([\S]*)\s(.*)/, "$1 <span>$2</span>"); 
```

如果`text`是`hello world`，上面的代码会将其转换为`hello <span>world</span>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T07:55:33.433

也许更容易理解（对我来说肯定），

1.  对空白字符使用 find 方法，获取字符串中的第一个位置。
2.  获取第一个子字符串，从索引 0 到特定位置。
3.  从特定位置获取子字符串到 string.length 并包装它们
4.  再合并两个字符串。

# javascript - 如何在 Firefox 运行时访问 JavaScript 执行跟踪？

> ID：15427161
> 
> 赞同：3
> 
> 时间：2013-03-15T07:45:14.527
> 
> 标签：javascript, firefox, firefox-addon, firebug, javascript-engine

我想知道如何在运行时访问 JavaScript 执行跟踪。我看到 Firebug 可以做这样的事情：

![在此处输入图像描述](../Images/41f1de5d993c2d0e0b454a52b4154d8e.png)

参考上图，所有执行的行号都以绿色突出显示。它们是在运行时实现的。我想一定有某种方法可以从浏览器使用的 JavaScript 引擎访问这些信息。

现在说我想构建一个萤火虫插件来访问这些信息并在运行时检查每个执行行中的所有变量，我应该如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:16:28.360

显然你在 Firebug 论坛上问了[同样的问题。](https://groups.google.com/forum/?fromgroups=#!topic/firebug/MQJCrYSwT9k)

复制 Honza 的答案：

> Firebug 目前正在使用 JSD (jsdIDebuggerService) 来确定哪一行是可执行的。但是，计划是切换到 JSD2（正在进行中）[https://wiki.mozilla.org/Debugger](https://wiki.mozilla.org/Debugger)
> 
> 您还应该将您的扩展基于 JSD2
> 
> 在 Debugger 文档中查找`getLineOffsets(line)`和。`getOffsetLine(offset)`我没有测试它，但我认为如果getLineOffset返回null，则该行是不可执行的。

塞巴斯蒂安

# c# - 时间：2019-05-10 标签：c#wp7checkablelist

> ID：15427164
> 
> 赞同：3
> 
> 时间：2013-03-15T07:45:24.043
> 
> 标签：c#, windows-phone-7, checkbox

创建一个可以检查的列表的最简单方法是什么，就像 Windows Phone 中的链接收件箱（附图片）一样？我希望列表最初没有复选框，然后单击按钮，每个项目旁边都会出现一个复选框，就像收件箱一样。

任何想法将不胜感激

![在此处输入图像描述](../Images/83e75d80572c311858e8c55525881e4e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:07:22.753

您应该使用[Windows Phone 工具包](http://phone.codeplex.com/) `MultiselectList`

示例截图：

![](../Images/eecf57038a9c37120c3e5d5bc5dfdb90.png)

# docbook - Docbook 网络帮助

> ID：15427165
> 
> 赞同：2
> 
> 时间：2013-03-15T07:45:26.750
> 
> 标签：docbook

我一直在使用 Docbook 5 并使用 webhelp 生成 2 窗格输出。我想使用不同的主题而不是雷德蒙德。任何人都可以提出一种可以做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-02T17:59:27.837

如果您自定义 webhelp-common.xsl 模板，您可以完全更改由 webhelp HTML 文件导入的 JavaScript。这是模板，以及一些导入 Jquery JavaScript 的行：

[https://github.com/docbook/xslt10-stylesheets/blob/master/xsl/webhelp/xsl/webhelp-common.xsl#L159](https://github.com/docbook/xslt10-stylesheets/blob/master/xsl/webhelp/xsl/webhelp-common.xsl#L159)

Webhelp 包括它在其模板目录中导入的 Jquery：

[https://github.com/docbook/xslt10-stylesheets/tree/master/xsl/webhelp/template/common/jquery](https://github.com/docbook/xslt10-stylesheets/tree/master/xsl/webhelp/template/common/jquery)

上次我定制 DocBook webhelp 时，我请一位 Web 开发人员给我一个 HTML 页面设计，然后我定制了 webhelp-common.xsl 来生成那个 HTML 结构。我在模板目录中添加和删除了文件，以包含我们想要使用的 JavaScript 和 CSS。我并不觉得这太难，但我对 XSLT 相当满意。

我对 Jquery 和主题知之甚少，无法帮助切换到不同的主题。但如果你是，你可以尝试调整模板/common/jquery 目录中包含的主题，并在 webhelp-common.xsl 中的导入中进行相应的调整。

祝你好运！

# java - main() 方法的 Java 类的包约定

> ID：15427170
> 
> 赞同：2
> 
> 时间：2013-03-15T07:45:52.923
> 
> 标签：java, naming-conventions, packages

我正在构建一个独立的 Java 应用程序。

在那，我必须使用带有`main()`方法的类。由于这是所有执行开始的类，我通常放在包结构之一中

```
com.<company-name>.<project-name>.init
com.<company-name>.<project-name>.main
com.<company-name>.<project-name>.server
com.<company-name>.<project-name>.initializer 
```

我的问题是，

*   以上用于特定目的的包名称是否有意义？如果没有，那么有什么建议吗？
*   有命名这个的标准吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:30:57.557

当我创建一个带有主类的项目时，我通常将它放在应用程序“com.acmeglobal.killerapplication”的最顶层包中，并给它一个简单的名称，如“App”、“Main”或“Start”。

我尽量保持我的主要课程尽可能小；它只引导应用程序。如果解析应用程序参数甚至有点不重要，我什至为此创建了一个单独的类。

Of your suggested package names I prefer 'main', after that either 'init' or 'initialization' although I think initialization should not be the concern of the main class. The package called 'server' seems misleading to me because it suggests that there is also a client, which I don't think you intended.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T07:50:16.847

> 以上用于特定目的的包名称是否有意义？如果没有，那么有什么建议吗？

我认为这是有道理的。如果您的 main 仅包含 Main 类，则合并 main 和 init 对我来说也很好。

> 有命名这个的标准吗？

不。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T07:50:30.977

您建议的软件包看起来不错，但为了彻底起见，它们应该以相反的域名作为前缀。因此，如果公司`Acme`有域`www.acmeglobal.com`，他们的包结构将以前缀`com.acmeglobal`而不是`com.acme`.

遵守这个标准可以减少开发人员创建冲突类的可能性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:52:22.683

定义包结构供您自己使用。如果您将代码放置在正确的包结构中，那么它将有助于将来的维护并提高可读性。

# bazaar - 如何获取 bzr 服务器中所有分支名称的列表

> ID：15427193
> 
> 赞同：2
> 
> 时间：2013-03-15T07:47:46.243
> 
> 标签：bazaar

我忘记了bzr的一个分支的名字，有什么办法可以得到bzr服务器上所有分支的名字

**更新：**例如 bzr 服务器上分支的路径是：

```
bzr+ssh://bzr@192.168.7.171/~/branches/proj_name 
```

现在我想获取服务器上存在的所有项目名称

一旦在这个问题上可用，我保证提供 300 点赏金。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:02:48.233

使用**Bazaar Explorer**，转到**文件 > 打开位置**并记下您的存储库。

```
bzr://MyServer/path/to/MyRepo/ 
```

然后您将看到此存储库中的所有分支。

**编辑。**

例如，只需浏览 emacs 项目：`bzr://bzr.savannah.gnu.org/emacs` ![在此处输入图像描述](../Images/48082399c2eb4d1b8d080c9eb89d0ec6.png)

# jsf-2 - JSF 2.0 验证可与 bean 解耦的多个字段的最佳实践

> ID：15427194
> 
> 赞同：3
> 
> 时间：2013-03-15T07:47:48.410
> 
> 标签：jsf-2

似乎使用 postValidate 事件验证 JSF2 中的多个字段不是最佳实践。

`<f:event type="postValidate" listener="#{bean.validate}" />`

因为这与 bean 紧密耦合，我们可以在另一个页面中重用这个验证。

您能否建议我另一种验证实现方式，该方式将被重用、更通用并与 bean 解耦。

# iphone - NSTimer 有时会在开火日期之前被解雇？

> ID：15427195
> 
> 赞同：0
> 
> 时间：2013-03-15T07:47:50.430
> 
> 标签：iphone, cocoa-touch, cocoa, nstimer

我正在设置一个计时器，以 13 分钟的间隔触发。但是计时器似乎以不规则的间隔被触发。这是一个间歇性问题。一些用户报告了这个问题，我无法重现相同的问题。

```
- (void)resetIdleTimer
{
    if (_idleTimer)
    {
        [_idleTimer invalidate];
        [_idleTimer release];
        _idleTimer = nil;
    }

    _idleTimer = [[NSTimer scheduledTimerWithTimeInterval:13*60.0
                                                   target:self
                                                 selector:@selector(idleTimerExceeded)
                                                 userInfo:nil
                                                  repeats:NO] retain];
}

- (void)idleTimerExceeded
{
        // do some processing
    [_idleTimer release];
    _idleTimer = nil;
} 
```

定时器将根据某些条件被重置（resetIdleTimer），但无论如何都会将定时器重置为 13 分钟。

当我查看代码时，我只能看到没有将计时器参数传递给选择器的问题。我不确定这是否是这个问题的原因？有没有人遇到过这种怪事？（我将如何更新代码以将计时器作为参数）。一位用户报告说它只是在 4 分钟后发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:55:43.710

让我们确认一件事，不将计时器参数传递给选择器不会导致任何问题。

这是工作正常的更新代码

```
@property(nonatomic,strong)NSTimer *myTimer; 
```

或者

```
 @property(nonatomic,retain)NSTimer *myTimer; 
```

**方法**

```
- (void)resetIdleTimer
{

  if ([self.myTimer isValid]) 
        [self.myTimer invalidate];

   self.myTimer = [NSTimer scheduledTimerWithTimeInterval:13*60.0
                                 target:self
                               selector:@selector(idleTimerExceeded)
                               userInfo:nil
                                repeats:NO];
} 
- (void)idleTimerExceeded
{
  NSLog(@"tiggered");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:19:21.083

我在你的代码中没有发现任何错误，唯一的想法是用户进入你的类创建一个实例，我们称之为实例“A”，然后启动计时器，然后在 13 分钟前退出你的类，然后再次输入有了一个新的实例“B”，一个新的计时器开始......

此时用户希望您的计时器方法在 13 分钟后触发......但“A”的计时器仍在等待中（因为您关闭课程的方式可能存在错误）并执行......

您可以尝试添加一些日志并尝试按照我说的做，并检查所有日志（特别是如果您输入了 dealloc，并且 idleTimerExceeded 打印实例中的日志等于 resetIdleTimer 中打印的最后一个实例）：

```
 -(void)resetIdleTimer  {
            if (_idleTimer)
            {
                [_idleTimer invalidate];
                [_idleTimer release];
                _idleTimer = nil;
            }

            NSLog(@"...resetIdleTimer: instance: %p", self);
            _idleTimer = [[NSTimer scheduledTimerWithTimeInterval:13*60.0
                                                           target:self
                                                         selector:@selector(idleTimerExceeded)
                                                         userInfo:nil
                                                          repeats:NO] retain];
             NSLog(@"...resetIdleTimer: _idleTimer: %p", _idleTimer);
       }

        - (void)idleTimerExceeded
        {
                // do some processing
            NSLog(@"...idleTimerExceeded: instance: %p", self);
            NSLog(@"...idleTimerExceeded: _idleTimer: %p", _idleTimer);

            [_idleTimer release];
            _idleTimer = nil;
        }

        -(void) dealloc 
        {
            NSLog(@"...dealloc: instance: %p", self);
            [super dealloc];

        } 
```

只是一个想法...但是您可能忘记了计时器保留了传入`target:`参数的实例（您传递了“self”，因此保留了您的类实例），因此一个常见的错误是在关闭类实例时忘记关闭计时器.

正确的方法应该是：

-a 根类 (AAA) 使用计时器实例化您的类 (BBB) -BBB 启动它的计时器 -AAA 想要 dealloc/resetIdleTimer 类 BBB：在释放之前它必须停止/使 BBB.timer 无效（如果不是计时器，则保留 BBB，并且 BBB 获胜'直到计时器触发/执行其方法才被释放）

因此，如果是您的情况...添加一个可以从 AAA 类调用的方法，该方法可以停止/使计时器无效，例如：

```
-(void)stopTimer{
                if (_idleTimer)
                {
                    [_idleTimer invalidate];
                    [_idleTimer release];
                    _idleTimer = nil;
                }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:37:34.527

如果您希望计时器在 13 分钟内准确触发，也许这会有所帮助：

[https://stackoverflow.com/a/3519913/1226304](https://stackoverflow.com/a/3519913/1226304)

# tfs - 我从源代码管理打开我的应用程序，但其中 2 个项目未锁定

> ID：15427199
> 
> 赞同：0
> 
> 时间：2013-03-15T07:48:00.623
> 
> 标签：tfs

我从源代码管理中打开了我的应用程序，但解决方案资源管理器显示我的 2 个项目（SCD4.Model 和 SCD4.Repository）未锁定。我找不到解决此问题的方法。

![在此处输入图像描述](../Images/527893b4eb2411e4fbcfb7ed15b94f01.png)

![在此处输入图像描述](../Images/09d283308d9cf49d84d7dbc1cef8a284.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:35:48.160

我找到了解决方案。选择需要绑定源码控制的项目。然后选择 File -> Source Control -> Change Source Control

然后绑定丢失的项目。

# android - 自定义列表视图中特定行的复选框

> ID：15427202
> 
> 赞同：0
> 
> 时间：2013-03-15T07:48:10.800
> 
> 标签：android, checkbox

我在该复选框中有一个自定义列表视图，并且存在文本视图..

如果我单击第 1 行复选框，则仅选中该行咀嚼框。如果我单击第二行，则选中第二行复选框，未选中第一行。如果单击第三行，则选中第三行复选框，未选中第二行...

所以只需要选择特定的行点击项目复选框......

但是这里所有的复选框都在选择...如何解决这个问题..

包 com.example.testdata;

```
public class Newcard extends Activity {
 MyAdapter adapter; 
CheckBox check=null;
ListView listView;
LayoutInflater lay;
MyApplication app;

@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);

setContentView(R.layout.newcard);
app = ((MyApplication) getApplicationContext());

listView = (ListView) findViewById(R.id.cardlist);

adapter =new MyAdapter(this, app.arryList);

listView.setAdapter(adapter);

 listView.setChoiceMode(listView.CHOICE_MODE_SINGLE);
}

public class MyAdapter extends BaseAdapter {

Context context = null;
 ArrayList<String> items= null;

public MyAdapter(Newcard newcard, ArrayList<String> items,
    ArrayList<String> items1) {
// TODO Auto-generated constructor stub     
this.items = items;         
}

@Override
public int getCount() {
// TODO Auto-generated method stub
return items.size();
}

@Override
public Object getItem(int position) {
// TODO Auto-generated method stub
return items; 

}

@Override
public long getItemId(int position) {
// TODO Auto-generated method stub
return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
// TODO Auto-generated method stub

View layout = null;
TextView produ = null;  

TextView desc = null;
Button edit = null;

if (convertView == null) {

    lay = LayoutInflater.from(getApplicationContext());
    layout = lay.inflate(R.layout.customlist, null);
} else {
    layout = convertView;
}

produ = (TextView) layout.findViewById(R.id.card);
produ.setText("" +app.arryList.get(position));

check = (CheckBox) layout.findViewById(R.id.radioButton1);

check.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    //  System.out.println("data "+app.arryList.get(position)); 

    }
});

return layout;

}

}

}

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<CheckBox
      android:id="@+id/radioButton1"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerVertical="true"
      android:layout_alignParentLeft="true"
      android:text=""

       />

  <TextView
      android:id="@+id/card"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:paddingLeft="10dip" android:layout_centerVertical="true"
      android:layout_toRightOf="@+id/radioButton1"
      android:text=""
      android:textColor="#000000"
      android:textSize="15dip"
      android:textStyle="bold" />

  </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:58:13.970

上面的代码不完整，我看不到您创建表单/复选框的位置。但是，我看到这一行：`check = (CheckBox) layout.findViewById(R.id.radioButton1);` 您可能正在使用单选按钮并将它们转换为复选框？单选按钮用于仅选择多个选项之一，例如您的行为。您需要确保创建了复选框而不是单选按钮来解决问题。

# iphone - iPhone / iPad上的洪水填充性能问题

> ID：15427205
> 
> 赞同：3
> 
> 时间：2013-03-15T07:48:18.800
> 
> 标签：iphone, xcode, ios6, flood-fill

我正在开发一个绘画应用程序并实现洪水填充算法。这是我正在实现的代码： [https ://github.com/OgreSwamp/ObjFloodFill/blob/master/src/FloodFill.m](https://github.com/OgreSwamp/ObjFloodFill/blob/master/src/FloodFill.m)

和 viewController.h 文件

```
 #import <UIKit/UIKit.h>
 #import "AppDelegate.h"

 typedef struct {
 int red;
 int green;
 int blue;
 int alpha;
 } color;

 @interface ViewController : UIViewController
 {
   AppDelegate *appDelegate;
   UIImageView *mainImage;
   UIView *loadingView;
   unsigned char *imageData;
   UIActivityIndicatorView *activityIndicator;
   color selColor;
   color newColor;
   BOOL boolVariable;
   int maxByte;

}
- (IBAction)fn_btnRed:(id)sender;
- (IBAction)fn_btnGreen:(id)sender;
- (IBAction)fn_btnBlue:(id)sender;
- (IBAction)fn_btnSave:(id)sender;
-(void)alertActivityClose;
@end 
```

视图控制器.m 文件

```
 #import "ViewController.h"
 #import "FloodFill.h"

 @implementation ViewController

 #pragma mark - View lifecycle
 - (void)didReceiveMemoryWarning
 {
   [super didReceiveMemoryWarning];
   // Release any cached data, images, etc that aren't in use.
 }

 - (void)setupImageData
 {
    CGImageRef imageRef = mainImage.image.CGImage;
    if (imageRef == NULL) { return; }
   NSUInteger width = CGImageGetWidth(imageRef);
   NSUInteger height = CGImageGetHeight(imageRef);
   CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
   NSUInteger bytesPerPixel = 4;
   NSUInteger bytesPerRow = bytesPerPixel * width;
   NSUInteger bitsPerComponent = 8;

   maxByte = height * width * 4;
   imageData = malloc(height * width * 4);

   CGContextRef context = CGBitmapContextCreate(imageData, width, height,   bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast |     kCGBitmapByteOrder32Big);
  CGColorSpaceRelease(colorSpace);
  CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
  CGContextRelease(context);
 }

 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
     mainImage = [[UIImageView alloc]initWithImage:[UIImage   imageNamed:@"scaledWhite.png"]];
     [self.view addSubview:mainImage];

      newColor.red = 255;
      newColor.green = 94;
      newColor.blue = 0;
      [self setupImageData];
}
  return self;
}

- (void)updateImage 
{
   CGImageRef imageRef = mainImage.image.CGImage;
   if (imageRef == NULL) { return; }
   NSUInteger width = CGImageGetWidth(imageRef);
   NSUInteger height = CGImageGetHeight(imageRef);
   CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
   NSUInteger bytesPerPixel = 4;
   NSUInteger bytesPerRow = bytesPerPixel * width;
   NSUInteger bitsPerComponent = 8;

   CGContextRef context = CGBitmapContextCreate(imageData, width, height, bitsPerComponent, bytesPerRow, colorSpace, kCGImageAlphaPremultipliedLast ); 

   imageRef = CGBitmapContextCreateImage (context);
   mainImage.image = [UIImage imageWithCGImage:imageRef];  

   CGContextRelease(context);  
   if (boolVariable==YES)
   {
       UIImageWriteToSavedPhotosAlbum(mainImage.image, nil, nil, nil);
   }
   boolVariable=NO;
  }

 - (void)setPixel:(NSUInteger)byte toColor:(color)color 
  {
    imageData[byte] = color.red;
    imageData[byte+1] = color.green;
    imageData[byte+2] = color.blue;
  }

- (BOOL)testByte:(NSInteger)byte againstColor:(color)color 
{
   if (imageData[byte] == color.red && imageData[byte+1] == color.green && imageData[byte+2] == color.blue) {
   return YES;
} 
 else
 {
    return NO;
 }
}

   // This is where the flood fill starts. Its a basic implementation but crashes when  filling large sections.
 - (void)floodFillFrom:(NSInteger)byte bytesPerRow:(NSInteger)bpr {
  int u = byte - bpr;
  int r = byte + 4;
  int d = byte + bpr;
  int l = byte - 4;
  if ([self testByte:u againstColor:selColor]) {
    [self setPixel:u toColor:newColor];
    [self floodFillFrom:u bytesPerRow:bpr];
  }
  if ([self testByte:r againstColor:selColor]) {
    [self setPixel:r toColor:newColor];
    [self floodFillFrom:r bytesPerRow:bpr];
  }
 if ([self testByte:d againstColor:selColor]) {
     [self setPixel:d toColor:newColor];
    [self floodFillFrom:d bytesPerRow:bpr];
 }
 if ([self testByte:l againstColor:selColor]) {
    [self setPixel:l toColor:newColor];
    [self floodFillFrom:l bytesPerRow:bpr];
 }
}
  -(void)shiftingOnMainThread
  {
    [self performSelectorOnMainThread:@selector(updateImage) withObject:nil waitUntilDone:YES];
  }

 - (void)startFillFrom:(NSInteger)byte bytesPerRow:(NSInteger)bpr 
 {
   if (imageData[byte] == 0 && imageData[byte+1] == 0 && imageData[byte+2] == 0) 
   {
     return;
   } 
   else if ([self testByte:byte againstColor:newColor]) 
   {
     NSLog(@"Same Fill Color");
   }
   else 
   {
     // code goes here
     NSLog(@"Color to be replaced");
     [self floodFillFrom:byte bytesPerRow:bpr];
     [self updateImage];
   }
 }
 - (void)selectedColor:(CGPoint)point 
 {
   CGImageRef imageRef = mainImage.image.CGImage;
   if (imageRef == NULL) { return; }
   if (imageData == NULL) { return; }
   NSInteger width = CGImageGetWidth(imageRef);
   NSInteger byteNumber = 4*((width*round(point.y))+round(point.x));
   selColor.red = imageData[byteNumber];
   selColor.green = imageData[byteNumber + 1];
   selColor.blue = imageData[byteNumber + 2];
   NSLog(@"Selected Color, RGB: %i, %i, %i",selColor.red, selColor.green, selColor.blue);
   NSLog(@"Byte:%i",byteNumber);
 }

 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:mainImage];
    [self selectedColor:location];
    CGImageRef imageRef = mainImage.image.CGImage;
    NSInteger width = CGImageGetWidth(imageRef);
    NSInteger height = CGImageGetHeight(imageRef);

   int x = 0;
   x |= (selColor.red & 0xff) << 24;
   x |= (selColor.green & 0xff) << 16;
   x |= (selColor.blue & 0xff) << 8;
   x |= (selColor.alpha & 0xff);

  int y = 0;
  y |= (newColor.red & 0xff) << 24;
  y |= (newColor.green & 0xff) << 16;
  y |= (newColor.blue & 0xff) << 8;
  y |= (newColor.alpha & 0xff);

  [NSThread detachNewThreadSelector:@selector(shiftingOnMainThread) toTarget:self withObject:nil];
 }
 -(void)alertActivityClose
 {
   [activityIndicator stopAnimating];
   [activityIndicator hidesWhenStopped];
    loadingView.hidden=YES;
 }

- (void)viewDidLoad
{
   [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

 - (void)viewDidUnload
 {
    [super viewDidUnload];
 // Release any retained subviews of the main view.
 // e.g. self.myOutlet = nil;
  }

 - (void)viewWillAppear:(BOOL)animated
 {
   [super viewWillAppear:animated];
 }

 - (void)viewDidAppear:(BOOL)animated
 {
  [super viewDidAppear:animated];
 }

 - (void)viewWillDisappear:(BOOL)animated
 {
[super viewWillDisappear:animated];
 }

 - (void)viewDidDisappear:(BOOL)animated
 {
[super viewDidDisappear:animated];
  }

  - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
  {
   // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
  }

   - (IBAction)fn_btnRed:(id)sender 
   {
    newColor.red = 255;
    newColor.green = 0;
    newColor.blue = 0;

   }

  - (IBAction)fn_btnGreen:(id)sender 
  {
    newColor.red = 0;
    newColor.green = 255;
    newColor.blue = 0;

  }

 - (IBAction)fn_btnBlue:(id)sender
 {
    newColor.red = 0;
   newColor.green = 0;
   newColor.blue = 255;

 }

 - (IBAction)fn_btnSave:(id)sender 
 {
   boolVariable=YES;
   [self updateImage];

 }
  @end 
```

如果用户持续使用该应用程序并且需要大约 20-30 秒来填充一小部分，则会出现性能问题，也会因内存错误而崩溃。

有没有人遇到过这种洪水填充问题以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:58:34.440

性能方面，您正在使用索引并强制在几乎每个像素访问时重新计算绝对地址（因为实际像素访问是在对（递归）子例程的下一次调用中）。直接使用像素地址通常要快得多（尤其是水平（左<->右）运行）。

我不知道 ObjC 方法调度增加了多少开销，但我会考虑将 floodFillFrom:bytesPerRow:、testByte:againstColor: 和 setPixel:toColor: 重写为海峡 C 函数。（测试并设置为静态内联。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:34:56.337

崩溃：我没有看到任何代码阻止填充环绕图像的左/右端或像素数据的顶部或底部。不限制左/右泛洪可能会产生意想不到的结果。超出顶部/底部很可能会导致非法内存访问（崩溃）。

颜色结构可能应该定义为四个 uint8_t（不是 int）。我还将 imageData 定义为指向此（属性大小）结构的指针，并让编译器处理 .red、.green 和 .blue 组件，而不是硬编码 +0、+1、+2 偏移量。

几乎在您硬编码（假定）值的任何地方，我都会使用“sizeof(x)”来代替。

```
 NSUInteger bytesPerPixel = sizeof(color); 
```

# xslt - 我们如何在 xslt 中执行条件增量

> ID：15427206
> 
> 赞同：0
> 
> 时间：2013-03-15T07:48:23.877
> 
> 标签：xslt

在 Shipment 中存在订单数量。对于每个订单，都有多个订单行项目。订单行项目包含项目。对于每次迭代，我们都在维护层次结构级别。在 orderLine Items 部分中，如果前一个项目等于当前项目，则无需增加层次结构。

要点：

1.  只有一件货物
2.  每批货物的订单数量。
3.  每个订单的 orderLineItem 数。
4.  对于订单和 orderlineItems 的每次迭代，我们必须维护一个层次结构级别（增量值），但是对于 orderLineItems，如果前一个项目等于当前项目，则存在一个条件，不需要增加层次结构级别。否则我们应该增加像下面我们需要的输出的层次结构级别。

    下面是输入。
    输入：

* * *

```
 <shipment>
 <order><!-- unbounded -->
  <value>value 4</value>
  <other>item1</other>
 <OrderLineItems><!-- unbounded -->(conditions comes under this section only not in Order section)
         <Lineitem>3</LineItem>
</OrderLineItems>
<OrderLineItems>
         <Lineitem>3</LineItem>
</OrderLineItems>
<OrderLineItems>
         <Lineitem>2</LineItem>
</OrderLineItems>        
         </order>

 <order>
  <value>value 98</value>
  <other>item2</other>
 <OrderLineItems>
         <Lineitem>8</LineItem>
</OrderLineItems>
<OrderLineItems>
         <Lineitem>3</LineItem>
</OrderLineItems>
<OrderLineItems>
         <Lineitem>4</LineItem>
</OrderLineItems>
 </order>

  <order>
  <value>value 98</value>
  <other>item2</other>
  <OrderLineItems>
         <Lineitem>8</LineItem>
</OrderLineItems>
<OrderLineItems>
         <Lineitem>3</LineItem>
</OrderLineItems>
<OrderLineItems>
         <Lineitem>4</LineItem>
</OrderLineItems>
 </order>
</shipment> 
```

下面是我们需要的输出。

输出：

```
<ns1:Shipment>
   <ns1:Shipment1>1</ns1:Shipment1>
   <ns1:ShipmentValue>S</ns1:ShipmentValue>
   <ns1:Order>
      <ns1:Orderlevel1>2</ns1:Orderlevel1>
      <ns1:Orderlevel2>1</ns1:Orderlevel2>
      <ns1:Orderlevel3>O</ns1:Orderlevel3>
      <ns1:OrderLineItems>
         <ns1:Level1>3</ns1:Level1>
         <ns1:Level2>2</ns1:Level2>
         <ns1:Level3>I</ns1:Level3>
         <ns1:Item>Item59</ns1:Item>
      </ns1:OrderLineItems>
      <ns1:OrderLineItems>
         <ns1:Item>Item59</ns1:Item>
      </ns1:OrderLineItems>
       <ns1:OrderLineItems>
        <ns1:Level1>4</ns1:Level1>
         <ns1:Level2>2</ns1:Level2>
         <ns1:Level3>I</ns1:Level3>
         <ns1:Item>Item63</ns1:Item>
      </ns1:OrderLineItems>
   </ns1:Order>
   <ns1:Order>
      <ns1:Orderlevel1>5</ns1:Orderlevel1>
      <ns1:Orderlevel2>1</ns1:Orderlevel2>
      <ns1:Orderlevel3>O</ns1:Orderlevel3>
      <ns1:OrderLineItems>
         <ns1:Level1>6</ns1:Level1>
         <ns1:Level2>5</ns1:Level2>
         <ns1:Level3>I</ns1:Level3>
         <Item>Item74</Item>
      </ns1:OrderLineItems>
       <ns1:OrderLineItems>
       <ns1:Level1>7</ns1:Level1>
         <ns1:Level2>5</ns1:Level2>
         <ns1:Level3>I</ns1:Level3>
        <Item>Item78</Item>
      </ns1:OrderLineItems>   
      <ns1:OrderLineItems>
         <ns1:Item>Item78</ns1:Item>
      </ns1:OrderLineItems>
 </ns1:Order>
</ns1:Shipment> 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:56:28.113

我已经简化了您的问题（假设我理解正确，但我不确定）。

无论如何，对于这个 XML：

```
<shipment>
 <order>
  <value>value 4</value>
  <other>item1</other>
 </order>
 <order>
  <value>value 98</value>
  <other>item2</other>
 </order>
 <order>
  <value>value 98</value>
  <other>item3</other>
 </order>
 <order>
  <value>another value</value>
  <other>item4</other>
 </order>
</shipment> 
```

我得到以下输出（注意`<counter>`每次递增的元素都`<value>`在变化）：

```
<shipment>
   <order>
      <counter>1</counter>
      <value>value 4</value>
      <other>item1</other>
   </order>
   <order>
      <!-- counter incremented, because value changed
           from "value 4" to "value 98" -->
      <counter>2</counter>
      <value>value 98</value>
      <other>item2</other>
   </order>
   <order>
      <!-- counter not incremented, value still "value 98" -->
      <counter>2</counter>
      <value>value 98</value>
      <other>item3</other>
   </order>
   <order>
      <!-- counter incremented, because value changed
           from "value 98" to "another value" -->
      <counter>3</counter>
      <value>another value</value>
      <other>item4</other>
   </order>
</shipment> 
```

如果这对您有用，请查看此样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

<xsl:template match="/">
  <shipment>
    <!-- call template for first <order> only. All subsequent <order>
         elements will be called recursively by this template itself -->
    <xsl:call-template name="order">
      <xsl:with-param name="prevValue" select="string('')"/>
      <xsl:with-param name="counter" select="0"/>
      <xsl:with-param name="self" select="/shipment/order[1]"/>
    </xsl:call-template>
  </shipment>
</xsl:template>

<xsl:template name="order">
  <xsl:param name="prevValue"/>
  <xsl:param name="counter"/>
  <xsl:param name="self"/>

  <xsl:variable name="selfCounter">
    <xsl:choose>
      <!-- if the <value> is the same as in previous <order>, 
           do not increment <counter> -->
      <xsl:when test="$prevValue = $self/value">
        <xsl:value-of select="$counter"/>
      </xsl:when>
      <!-- if the value is different, increment <counter> by one -->
      <xsl:otherwise>
        <xsl:value-of select="$counter + 1"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <order>
    <!-- copy all the original children of <order>,
         and add <counter> -->
    <counter><xsl:value-of select="$selfCounter"/></counter>
    <xsl:copy-of select="$self/node()" />
  </order>

  <!-- if there is another <order>, call this template -->
  <xsl:if test="$self/following-sibling::order[1]">
        <xsl:call-template name="order">
          <xsl:with-param name="prevValue" select="$self/value"/>
          <xsl:with-param name="counter" select="$selfCounter"/>
          <xsl:with-param name="self" select="$self/following-sibling::order[1]"/>
        </xsl:call-template>
  </xsl:if>
</xsl:template>

</xsl:stylesheet> 
```

# android - 用于 GridView 的 EnldlessAdapter

> ID：15427208
> 
> 赞同：0
> 
> 时间：2013-03-15T07:48:31.917
> 
> 标签：android, android-gridview

任何人都可以建议如何在 gridview 到达末尾并需要使用现有的无限适配器库或自定义实现加载另一块数据时显示“加载”视图吗？

这里的主要问题是添加视图以填充底行所有列的空间，这在 GridView 中似乎是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:22:02.383

我在这里发布了一个答案，其中集成了 Endless Scrolling List 的分页：

[https://stackoverflow.com/a/13265776/450534](https://stackoverflow.com/a/13265776/450534)

它太大了，不能重新发布，所以我链接到原来的答案。

# c - 与 Geforce 相比，Tesla 的内核开销要少多少？

> ID：15427213
> 
> 赞同：2
> 
> 时间：2013-03-15T07:49:18.250
> 
> 标签：c, cuda, kernel, nvidia

与具有 WDDM 的 Geforce（同代）相比，具有 TCC 模式的特斯拉（费米或开普勒）？

我编写的程序在内核开销方面存在一些非常严重的问题，因为它必须反复启动内核，开销如此之大，我必须将许多内核合并在一起并交换内存空间以减少内核启动，但是它只能工作到目前为止谢谢到 GPU 内存存储的庞大规模。

我听说 TCC 模式可以减少开销，但它可以将开销性能提升到 CPU 级别吗？

由于我阅读了一些基准，至少对于 Geforce 280 GTX，内核调用开销比 CPU 的函数调用开销长数千倍，并且对于需要大量重复迭代的方法，它在这里产生了巨大的性能差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:15:46.663

WDDM 驱动程序将一起批量启动内核以减少开销。因此，如果您能够将内核合并在一起以减少启动开销，那么 WDDM 驱动程序也将如此（除非您在两者之间使用 CUDA 调用来防止批处理）。因此，在这个特定用例中，切换到 TCC 模式不会给您带来太多好处。

您确定问题是启动开销而不是其他问题吗？您要启动多少个单独的内核，这需要多长时间？
很可能（特别是在启动开销非常小的内核的情况下）将内核合并在一起允许编译器更好地优化内核，例如消除将中间结果写出和读回全局内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:45:54.537

我正在启动 16 个内核，当我合并所有要立即启动的内核时速度为 X，速度为 10X，合并内核也增加了开销，但结果非常好。

这是多核架构，如果您不能利用它（启动最大的作业大小），那么您就是在浪费启动内核所花费的开销。

我希望这可以帮助你。

# jsf - 带有 CDI bean 和 @ConversationScoped 的 AJAX 页面

> ID：15427217
> 
> 赞同：2
> 
> 时间：2013-03-15T07:49:41.650
> 
> 标签：jsf, jsf-2, cdi

我很感兴趣当我使用 CDI 时，将 JSF 页面与 AJAX 一起使用的正确方法是什么。我测试了配置 CDI bean，`@SessionScoped`但我发现 AJAX 有问题。

将 AJAX 与配置为的 CDI bean 一起使用是否合适`@ConversationScoped`？

而且我发现我必须在会话完成时`conversation.begin();`放入 Bean 构造函数和`conversation.end();`Java 方法。我可以以某种方式自动执行此操作吗？

PS我可以使用此代码在用户关闭页面时自动释放资源吗？

```
@Remove
public void finishIt(){
     conversation.end();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:13:16.943

> *而且我发现我必须在会话完成时`conversation.begin();`放入 Bean 构造函数和`conversation.end();`Java 方法。*

这是正确的。有关具体代码示例，另请参阅[如何在 JSF 2.0/2.1 中用 CDI 替换 @ManagedBean / @ViewScope 。](https://stackoverflow.com/questions/14384369/how-to-replace-managedbean-viewscope-by-cdi/14384824#14384824)

> *我可以以某种方式自动执行此操作吗？*

如果您想要一个只要您在单个视图上回发就必须存在的 bean，那么至少升级到 JSF 2.2。它[提供](https://arjan-tijms.omnifaces.org/p/jsf-22.html#1087)[`@ViewScoped`](https://javaee.github.io/javaee-spec/javadocs/javax/faces/view/ViewScoped.html)了开箱即用的 CDI 兼容。

但是，如果您想要一个只要您在视图中引用它就必须存在的 bean，无论您坐在哪个视图中，然后考虑[`@ViewAccessScoped`](https://deltaspike.apache.org/javadoc/1.4.1/org/apache/deltaspike/core/api/scope/ViewAccessScoped.html)改用[DeltaSpike](https://deltaspike.apache.org/)。一旦你导航到一个在任何地方都没有引用 bean 的视图，它将被丢弃。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:14:46.283

默认情况下，对话对象处于瞬态。调用 begin 方法将其标记为长时间运行（当真正的对话开始时）。结束对话（通过调用 end 方法）将对话对象标记为瞬态。

一个瞬态会话范围的 bean 将在单个请求的生命周期中存在。

除非调用了 conversation.end，否则长期对话（由 conversation.begin 发起）将运行。

# javascript - 如何在 node.js 中处理 POST 请求

> ID：15427220
> 
> 赞同：47
> 
> 时间：2013-03-15T07:49:54.550
> 
> 标签：javascript, html, node.js, dom-events

我正在尝试处理发送到我的 node.js 服务器的发布请求。名为 server.js 的 JavaScript 文件在浏览器上显示一个表单。我想在表单值发布到 node.js 后端后访问它们。

该表单包含用户名、存储库和分支。提交表单后，我想将此数据显示回给用户。

server.js 代码：

```
var http = require('http');

http.createServer(function (request, response) {
response.writeHead(200, {'Content-Type': 'text/html'});
response.end('<html><body>'
    + '<h1>XYZ Repository Commit Monitor</h1>'
    + '<form method="post" action="." enctype="application/x-www-form-urlencoded"><fieldset>'
    + '<div><label for="UserName">User Name:</label><input type="text" id="UserName" name="UserName" /></div>'
    + '<div><label for="Repository">Repository:</label><input type="text" id="Repository" name="Repository" /></div>'
    + '<div><label for="Branch">Branch:</label><input type="text" id="Branch" name="Branch" value="master" /></div>'
    + '<div><input id="ListCommits" type="submit" value="List Commits" /></div>'
    + '</fieldset></form>'
    + '</body></html>');
}).listen(8124);

console.log('Server running at http://127.0.0.1:8124/'); 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-10-04T14:36:30.980

我将使用您提供的代码，并提供比您的问题中所涵盖的内容更全面的答案，以适应遥远的未来中的人们。我还将提供一个使用“Vanilla JS”（[http://www.vanilla-js.com/](http://www.vanilla-js.com/)）的答案，因为我认为当您尝试了解其工作原理时，太多时髦人士会说“使用框架”。我认为他们这样做的原因是因为有人告诉他们在学习框架的工作原理时要“使用框架”。因为他们不是黑客，所以他们不关心尝试和理解这个过程，所以很多时候他们中的许多人不知道如何在没有框架的情况下自己做到这一点（因此无处不在的“使用框架”）。通过了解什么，您将成为更好的黑客

既然您想通过您正在输出的表单接受 POST（表单）数据，则有必要在您的服务器中提供一个路由机制。这意味着您将告诉您的服务器将表单提供给访问您网站的人，但是如果用户提交表单，Node 会将 POST 数据路由到一个小处理函数。我首先提供了完整的答案，然后进一步剖析它，以适应想要从代码中学习的人。

```
var http = require('http');
var qs = require('querystring');
var formOutput = '<html><body>'
  + '<h1>XYZ Repository Commit Monitor</h1>'
  + '<form method="post" action="inbound" enctype="application/x-www-form-urlencoded"><fieldset>'
  + '<div><label for="UserName">User Name:</label><input type="text" id="UserName" name="UserName" /></div>'
  + '<div><label for="Repository">Repository:</label><input type="text" id="Repository" name="Repository" /></div>'
  + '<div><label for="Branch">Branch:</label><input type="text" id="Branch" name="Branch" value="master" /></div>'
  + '<div><input id="ListCommits" type="submit" value="List Commits" /></div></fieldset></form></body></html>';
var serverPort = 8124;
http.createServer(function (request, response) {
  if(request.method === "GET") {
    if (request.url === "/favicon.ico") {
      response.writeHead(404, {'Content-Type': 'text/html'});
      response.write('<!doctype html><html><head><title>404</title></head><body>404: Resource Not Found</body></html>');
      response.end();
    } else {
      response.writeHead(200, {'Content-Type': 'text/html'});
      response.end(formOutput);
    }
  } else if(request.method === "POST") {
    if (request.url === "/inbound") {
      var requestBody = '';
      request.on('data', function(data) {
        requestBody += data;
        if(requestBody.length > 1e7) {
          response.writeHead(413, 'Request Entity Too Large', {'Content-Type': 'text/html'});
          response.end('<!doctype html><html><head><title>413</title></head><body>413: Request Entity Too Large</body></html>');
        }
      });
      request.on('end', function() {
        var formData = qs.parse(requestBody);
        response.writeHead(200, {'Content-Type': 'text/html'});
        response.write('<!doctype html><html><head><title>response</title></head><body>');
        response.write('Thanks for the data!<br />User Name: '+formData.UserName);
        response.write('<br />Repository Name: '+formData.Repository);
        response.write('<br />Branch: '+formData.Branch);
        response.end('</body></html>');
      });
    } else {
      response.writeHead(404, 'Resource Not Found', {'Content-Type': 'text/html'});
      response.end('<!doctype html><html><head><title>404</title></head><body>404: Resource Not Found</body></html>');
    }
  } else {
    response.writeHead(405, 'Method Not Supported', {'Content-Type': 'text/html'});
    return response.end('<!doctype html><html><head><title>405</title></head><body>405: Method Not Supported</body></html>');
  }
}).listen(serverPort);
console.log('Server running at localhost:'+serverPort); 
```

现在来解释为什么我做了我所做的事情。

```
var http = require('http');
var qs = require('querystring'); 
```

首先，您将添加 Node 的内置“querystring”模块来解析实际的表单数据。

```
var formOutput = '<html><body>'
  + '<h1>XYZ Repository Commit Monitor</h1>'
  + '<form method="post" action="/inbound" enctype="application/x-www-form-urlencoded"><fieldset>'
  + '<div><label for="UserName">User Name:</label><input type="text" id="UserName" name="UserName" /></div>'
  + '<div><label for="Repository">Repository:</label><input type="text" id="Repository" name="Repository" /></div>'
  + '<div><label for="Branch">Branch:</label><input type="text" id="Branch" name="Branch" value="master" /></div>'
  + '<div><input id="ListCommits" type="submit" value="List Commits" /></div></fieldset></form></body></html>';
var serverPort = 8124; 
```

我已经将表单输出移到了我们的服务器/路由/表单处理机制之上，因为这样逻辑更容易阅读。我还将服务器侦听端口信息移到了这里，因为您只需在一个地方更改它，而不是在下面的许多地方。

```
http.createServer(function (request, response) { 
```

（我通常将此函数的参数缩短为“req”和“res”，但这只是我的偏好。）

```
 if(request.method === "GET") {
    if (request.url === "/favicon.ico") {
      response.writeHead(404, {'Content-Type': 'text/html'});
      response.write(notFound);
      response.end(); 
```

这里我包含了一个简单的路由示例。在这种情况下，我们让我们的服务器监听对“favicon.ico”的请求——该请求与几乎所有主要浏览器对网页的初始请求一起发出。该文件是您可以在您访问的每个网页的选项卡中看到的小图标。出于我们的目的，我们不需要提供 favicon，但我们将处理入站请求以显示一些基本的路由机制。

```
 } else {
      response.writeHead(200, {'Content-Type': 'text/html'});
      response.end(formOutput);
    } 
```

如果您的访问者使用默认的 GET 方法（除了我们刚刚在上面处理的“favicon.ico”）将他们的浏览器指向您服务器上的任何其他资源，我们将为他们提供表单。

```
 } else if(request.method === "POST") { 
```

否则，如果您的访问者将 POST 指向您的服务器，那么他们很可能已经提交了使用之前的 GET 请求检索到的表单。

```
 if (request.url === "/inbound") { 
```

在这里，我们正在侦听称为“/inbound”的入站请求——如果你抓住了上面的小细节——就是我们 HTML 表单的“动作”。您可能知道，表单的“动作”告诉浏览器将表单数据发送到哪里。

```
 var requestBody = '';
      request.on('data', function(data) {
        requestBody += data;
        if(requestBody.length > 1e7) {
          response.writeHead(413, 'Request Entity Too Large', {'Content-Type': 'text/html'});
          response.end('<!doctype html><html><head><title>413</title></head><body>413: Request Entity Too Large</body></html>');
        }
      });
      request.on('end', function() {
        var formData = qs.parse(requestBody); 
```

这可能看起来有点令人困惑，但我保证不是。POST 请求可以从客户端浏览器作为多部分消息发送。对于表单中的一些变量，您可能永远不会看到这一点，但是当您扩展您处理的数据量时，您会看到这一点。如果您细心，您还会看到`if()`询问 POST 数据长度的语句。恶意的人可以通过上传无休止的文件来杀死您的服务器，但如果我们采取行动则不会。这将 POST 数据主体限制为大约 10 兆字节，但您应该相应地进行调整。知道这些事情可以防止未来的头痛，我不希望你头痛。

```
 response.writeHead(200, {'Content-Type': 'text/html'});
        response.write('<!doctype html><html><head><title>response</title></head><body>');
        response.write('Thanks for the data!<br />User Name: '+formData.UserName);
        response.write('<br />Repository Name: '+formData.Repository);
        response.write('<br />Branch: '+formData.Branch);
        response.end('</body></html>');
      }); 
```

这是我们使用表单数据的地方。由于 Javascript 的性质，这些变量名区分大小写（例如“用户名”而不是“用户名”）。当然，你可以对这些数据做任何你想做的事情（记住 Node 的事件循环和异步特性）。

```
 }
    response.writeHead(404, 'Resource Not Found', {'Content-Type': 'text/html'});
    return response.end('<!doctype html><html><head><title>404</title></head><body>413: Request Entity Too Large</body></html>'); 
```

继续我们的路由示例，我们在这里所做的是在语句下面包含一个包罗万象的`if()`语句，该语句向客户端发送一个通用的 404“未找到”回复我们尚未处理的任何 POST 请求。

```
 } else {
    response.writeHead(405, 'Method Not Supported', {'Content-Type': 'text/html'});
    return response.end('<!doctype html><html><head><title>405</title></head><body>405: Method Not Supported</body></html>');
  }
}).listen(serverPort);
console.log('Server running at localhost:'+serverPort); 
```

现在我们刚刚完成了代码，包括一些处理带有奇怪方法的请求的代码。有几件事我没有解决（函数结构、空表单数据等），但确实有很多方法可以实现您的目标。正如我的一位 CS 教授多年前曾经说过的那样，编写程序的方法有很多，通过分享作业很容易看出谁在作弊。

我希望您（和其他任何人）可以看到，在 Node 中使用内置模块而不是依赖外部第三方库（例如 Express）来做事并不是什么深奥甚至有点困难的过程。这些库在世界上占有一席之地，但不要随波逐流：对您的代码做出明智的决定，因为归根结底，您是负责它的人（而不是 Stack Overflow 上的某些人）。

# java - Oracle JDBC 自动提交

> ID：15427222
> 
> 赞同：1
> 
> 时间：2013-03-15T07:50:05.207
> 
> 标签：java, sql, oracle, jdbc

假设我的代码大致类似于这样：（使用 oracle 10G jdbc）。在这种特定场景下会提交事务吗？

```
 public void someMethod(){
    try {
    OracleConnection connection = getConnectionFromPool();
    connection.setAutoCommit(false);

    // Do some transaction here - complete transaction, no errors occurred

    ...

    //Throw my own exception here
    throw new Exception("Custom Exception");

    } catch (Exception e}
    {
      ...
    }
    finally {
      connection.setAutoCommit(true);
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:15:45.557

[根据 JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#setAutoCommit%28boolean%29)，它*应该*提交：

> *注意：如果在事务期间调用此方法并且更改了自动提交模式，则提交事务。如果调用了 setAutoCommit 并且未更改自动提交模式，则该调用是无操作的。*

**但是**：如果你依赖这个，这意味着你依赖驱动程序来遵守这个要求 - 这是我不会做的事情（我永远不会依赖隐含的事情）

如果您想确保您的事务已提交，请调用`commit()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:56:34.943

否。删除`connection.setAutoCommit(false);`或

```
finally {
      connection.commit();
    } 
```

# ruby-on-rails - 如何将用户名大写但不区分大小写？

> ID：15427223
> 
> 赞同：0
> 
> 时间：2013-03-15T07:50:12.080
> 
> 标签：ruby-on-rails, authentication

在 Rails 中，如何允许用户在其用户名中包含大写字母（例如 GreatestOneEver），但在搜索（例如 User.find_by_username "greatestoneever"）或执行其他任务时仍然不区分大小写？基本上，我希望我的用户看到他们的用户名看起来大写，但在幕后，在所有代码中使用小写版本。

我有一个想法：向模型添加一个新字段，称为 display_name 或其他名称。有没有更好的办法？

编辑：我不想使用正则表达式或其他东西进行搜索，因为那效率低下。我真的需要按用户名索引！但是也有不区分大小写的查找。也许 display_name 是最好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:59:45.237

这是一种可能性

```
name = "GreatestOneEver"
User.find(:first, :conditions => [ "lower(name) = ?", name.downcase ]) 
```

但是我猜如果您搜索不区分大小写，那么您可能会得到多个结果。因此，您可以删除 :first。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:56:35.507

`humanize`如果您的字符串带有下划线（_）或对于搜索过程尝试，请尝试以下正则表达式：

```
{username: /#{Regexp.escape(search)}/i} 
```

搜索是您的价值所在。

# php - 如何使用 Google API 客户端从 Google Drive 中永久删除文件

> ID：15427225
> 
> 赞同：1
> 
> 时间：2013-03-15T07:50:20.213
> 
> 标签：php, google-drive-api, google-api-php-client

我使用库 google-api-php-client 下载和删除 Google Drive 中的文件。
要删除，以下功能（文件已共享）：

```
public function removeFile($fileId) {
    try {
        $this->service->files->delete($fileId);
    } catch (Exception $e) {
        return "Error: " . $e->getMessage();
    }
    return true;
} 
```

在这种情况下，文件的网页界面 Google Drive 仍然存在，但无法打开或移动垃圾箱。

如何删除文件，使其从 Web 界面中消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T20:26:02.903

好吧，我认为这是 Drive SDK 中的错误。如果您无法删除此文件，请稍等，它应该稍后会消失。您可以使用`trash()`，这将立即删除文件，但它仍会在云端硬盘回收站中。

# clojure - Clojure 反向展平列表。例如'（1 2 3 4 5 6）到'（（1 2）（3 4）（5 6）

> ID：15427226
> 
> 赞同：3
> 
> 时间：2013-03-15T07:50:22.660
> 
> 标签：clojure

是否有核心功能或一些惯用的方式来对集合进行“反向展平”？例如，我想要以下内容：

```
(by-two '(1 2 3 4 5 6)) ; evals to '( (1 2) (3 4) (5 6) ) 
```

当然，上述情况下的表单需要偶数个元素，或者如果呈现奇数个集合，该函数应该做一些明智的事情。当然，广义*的 by-n*函数会更好。我不清楚尝试深入概括这个概念是否有任何优点，或者这样做的最佳形式是什么：

```
(by [2 2] '(1 2 3 4 5 6 7 8)) ; evals to '( ( (1 2) (3 4) ) ( (5 6) (7 8) ) )
(by [3 2 1 1 1] '(1 2 3 4 5 6)) ; evals to '(((((1 2 3) (4 5 6))))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T09:09:20.597

您可以使用`reduce`和`partition`：

```
(reduce #(partition %2 %1) '(1 2 3 4 5 6 7 8) [2 2]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:00:39.043

有`partition`：

```
(partition 2 [1 2 3 4 5])
> ((1 2) (3 4)) 
```

如果你想包括小尾巴，有`partition-all`：

```
 (partition-all 2 [1 2 3 4 5])
 > ((1 2) (3 4) (5)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:02:18.400

我知道没有这样的标准功能。但[分区](http://clojuredocs.org/clojure_core/clojure.core/partition)很有帮助：

```
(defn by [sizes coll]
  (if sizes
    (by (next sizes) (partition (first sizes) coll))
    coll)) 
```

# javascript - 使用正则表达式javascript匹配带有点符号的单词

> ID：15427229
> 
> 赞同：3
> 
> 时间：2013-03-15T07:50:37.063
> 
> 标签：javascript

我有一个搜索功能。我想检查用户是否输入了带有点 (.) 的文本单词/句子。

```
Example:
-anyword.anyword.
-.
-.anyword 
```

一旦我检测到他/她输入了一个带有点的值，我就会认为这是无效的。

我知道我可以使用正则表达式来做到这一点，但我仍在学习它的过程中。因此，任何人都可以在这里为我提供启发，将不胜感激:)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T07:52:53.270

您可以使用`String#indexOf`：

```
if (theString.indexOf(".") !== -1) {
    // It has a dot
} 
```

但是，如果您真的想使用正则表达式（仅查找 a 就过分了`.`）：

```
if (/\./.test(theString)) {
    // It has a dot
} 
```

该`/\./`部分是正则表达式。开头和结尾`/`是正则表达式分隔符，例如`"`和`'`用于字符串。正则表达式的*内容*是`\.`我们需要在 the 之前加上反斜杠，`.`因为否则，在正则表达式中，`.`表示“匹配任何字符”。它之前的反斜杠“转义”它并告诉正则表达式从字面上匹配一个点。`String#indexof`（我们在示例中不需要它，因为`indexOf`没有对 . 进行任何特殊处理`.`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T07:55:39.397

最好为此使用then的`indexOf`函数，因为在这个 scnerio 中将是一个过度杀伤：`String``Regexp``Regexp`

**`MyString.indexOf('.')`如果它返回 -1**则使用字符串中没有点。如果返回值是一些整数，如 0,1,2 等，它给出了字符串中点的位置。所以 -1 表示没有 Dot

例子：

```
if(MyString.indexOf('.') === -1)
{
   //No Dot is there, continue search
}
else
{
   //Invalid string, dot is present
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T07:56:08.390

**试试这个**

该`indexOf()`方法返回指定值在字符串中第一次出现的位置。

`-1`如果要搜索的值从未出现，则此方法返回。

```
var str = "test.test";
if(str.indexOf('.') === -1){
  alert("no dot found.");
}
else{
    alert("dot found.");
} 
```

# java - JSON 数据的 Ajax 响应

> ID：15427242
> 
> 赞同：0
> 
> 时间：2013-03-15T07:51:42.303
> 
> 标签：java, ajax, json, response

我正在使用 AJAX 来调用我的 struts 动作类，它在会话中存储了一些数据。

```
public String myMethod(){
     session.put("DATA", JSON_STRING); //JSON formatted string
     return "forward";
} 
```

我正在转发到我正在打印此数据的 jsp 页面

```
<%@taglib prefix="s" uri="/struts-tags"%>
<s:property value="#session['DATA']" /> 
```

所以最后我收到了 AJAX 呼叫响应

```
[{&quot;title&quot;: &quot;OFP LALOUV0042/ODF96-02 PD/FP16 (L)&quot;, &quot;key&quot;: &quot;551&quot;}] 
```

我期待的是

```
[{"title": "OFP LALOUV0042/ODF96-02 PD/FP16 (L)", "key": "551"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:59:22.133

试试这个：

```
<s:property value="#session['DATA']" escapeHtml="false" /> 
```

# primefaces - commandButton 执行操作但不执行更新

> ID：15427259
> 
> 赞同：0
> 
> 时间：2013-03-15T07:53:01.833
> 
> 标签：primefaces

我有一个 commandButton 作为表中行的一部分。它从列表中删除元素。这个列表是一个表的值。我知道该元素已成功删除，但表没有更新。如何使它工作。按钮标签：

```
<p:column style="width:1%">
                    <p:commandButton id="deleteButton" title="Del"
                        icon="ui-icon-close"                                                                    
                        update="attachmentsTable" immediate="true"
                        action="#{myBean.attachTable.deleteAttachment(attachment.id)}">
                    </p:commandButton>
                </p:column> 
```

表格标签：

```
<p:dataTable id="attachmentsTable" var="attachment"
                style="width:100%;"
                value="#{myBean.attachTable.attachmentsList}"
                emptyMessage="Empty"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:56:41.563

尝试使用表单限定名，即`update=":formWithTable:attachmentsTable"`. 还要检查浏览器中的 javascript 错误，它通常会提示出现问题...

# javascript - 切换 div 后缺少过度效果（jquery 可拖动/可放置）

> ID：15427264
> 
> 赞同：4
> 
> 时间：2013-03-15T07:53:31.113
> 
> 标签：javascript, jquery, draggable, droppable

我正在使用 jquery 的可拖动和可放置来实现拖放功能：有两个选项卡，每个选项卡都包含一个带有可拖动的可放置区域。现在我可以选择一个可拖动的并将其移动到另一个选项卡 - 当我在拖动过程中移动选项卡时选项卡会发生变化。（就像 MS WinExplorer，如果您将文件从一个目录移动到另一个目录......）。为了表明用户位于可放置区域之上，我使用了 hoverClass 选项。

问题：在拖动过程中多次更改选项卡后，悬停效果丢失。如果浏览器大小需要滚动条，并且我将带有可拖动的指针移动到浏览器边框之一（以便浏览器滚动），则会显示悬停效果...。我已经将过度事件添加到 droppable 以检查它是否总是被触发 - 但事实并非如此。

```
$('.drag').draggable({
    revert: 'invalid',
    helper: function () {
        return $('<div></div>').addClass('drag-dragging').appendTo('body').text($(this).text());
    }
});

$('#panel-1-droppable,#panel-2-droppable').droppable({
    accepts: 'drag',
    hoverClass: 'panel-dropover',
    over: function () {
        // just to check the over-event
        $('#over-state').text('Mouseover with draggable [' + $(this).attr('id') + ']');
    }
});

$('.panel-tab').droppable({
    over: function () {
        // changing tab...
    }
}); 
```

我创建了一个测试场景来重现问题：http: [//jsfiddle.net/CKYJs/5/](http://jsfiddle.net/CKYJs/5/)

我希望我已经提供了所有必要的信息......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:58:24.797

问题已解决，将 refreshPositions 设置为 TRUE。

[http://api.jqueryui.com/draggable/#option-refreshPositions](http://api.jqueryui.com/draggable/#option-refreshPositions)

# vb.net - 使用 vb.net 更改 dns 地址

> ID：15427269
> 
> 赞同：0
> 
> 时间：2013-03-15T07:54:13.640
> 
> 标签：vb.net, dns

![在此处输入图像描述](../Images/8ce559605af664308c06b3682662d5d8.png)

如何在 visual basi.net 中更改这两个值。我不想使用 vbscript 来做到这一点。

我搜索并得到了这个 -[如何使用 C# 中的代码更改网络设置（IP 地址、DNS、WINS、主机名）](https://stackoverflow.com/questions/209779/how-can-you-change-network-settings-ip-address-dns-wins-host-name-with-code)

^ 转换后的代码：

```
''' <summary>
''' Set's a new IP Address and it's Submask of the local machine
''' </summary>
''' <param name="ip_address">The IP Address</param>
''' <param name="subnet_mask">The Submask IP Address</param>
''' <remarks>Requires a reference to the System.Management namespace</remarks>
Public Sub setIP(ByVal ip_address As String, ByVal subnet_mask As String)

    Dim objMC As New ManagementClass("Win32_NetworkAdapterConfiguration")
    Dim objMOC As ManagementObjectCollection = objMC.GetInstances()

    For Each objMO As ManagementObject In objMOC
        If CBool(objMO("IPEnabled")) Then
            Try
                Dim setIP As ManagementBaseObject
                Dim newIP As ManagementBaseObject = objMO.GetMethodParameters("EnableStatic")

                newIP("IPAddress") = New String() {ip_address}
                newIP("SubnetMask") = New String() {subnet_mask}

                setIP = objMO.InvokeMethod("EnableStatic", newIP, Nothing)
            Catch generatedExceptionName As Exception
                Throw

            End Try
        End If
    Next
End Sub
''' <summary>
''' Set's a new Gateway address of the local machine
''' </summary>
''' <param name="gateway">The Gateway IP Address</param>
''' <remarks>Requires a reference to the System.Management namespace</remarks>
Public Sub setGateway(ByVal gateway As String)
    Dim objMC As New ManagementClass("Win32_NetworkAdapterConfiguration")
    Dim objMOC As ManagementObjectCollection = objMC.GetInstances()

    For Each objMO As ManagementObject In objMOC
        If CBool(objMO("IPEnabled")) Then
            Try
                Dim setGateway As ManagementBaseObject
                Dim newGateway As ManagementBaseObject = objMO.GetMethodParameters("SetGateways")

                newGateway("DefaultIPGateway") = New String() {gateway}
                newGateway("GatewayCostMetric") = New Integer() {1}

                setGateway = objMO.InvokeMethod("SetGateways", newGateway, Nothing)
            Catch generatedExceptionName As Exception
                Throw
            End Try
        End If
    Next
End Sub
''' <summary>
''' Set's the DNS Server of the local machine
''' </summary>
''' <param name="NIC">NIC address</param>
''' <param name="DNS">DNS server address</param>
''' <remarks>Requires a reference to the System.Management namespace</remarks>
Public Sub setDNS(ByVal NIC As String, ByVal DNS As String)
    Dim objMC As New ManagementClass("Win32_NetworkAdapterConfiguration")
    Dim objMOC As ManagementObjectCollection = objMC.GetInstances()

    For Each objMO As ManagementObject In objMOC
        If CBool(objMO("IPEnabled")) Then
            ' if you are using the System.Net.NetworkInformation.NetworkInterface you'll need to change this line to if (objMO["Caption"].ToString().Contains(NIC)) and pass in the Description property instead of the name 
            If objMO("Caption").Equals(NIC) Then
                Try
                    Dim newDNS As ManagementBaseObject = objMO.GetMethodParameters("SetDNSServerSearchOrder")
                    newDNS("DNSServerSearchOrder") = DNS.Split(","c)
                    Dim setDNS As ManagementBaseObject = objMO.InvokeMethod("SetDNSServerSearchOrder", newDNS, Nothing)
                Catch generatedExceptionName As Exception
                    Throw
                End Try
            End If
        End If
    Next
End Sub
''' <summary>
''' Set's WINS of the local machine
''' </summary>
''' <param name="NIC">NIC Address</param>
''' <param name="priWINS">Primary WINS server address</param>
''' <param name="secWINS">Secondary WINS server address</param>
''' <remarks>Requires a reference to the System.Management namespace</remarks>
Public Sub setWINS(ByVal NIC As String, ByVal priWINS As String, ByVal secWINS As String)
    Dim objMC As New ManagementClass("Win32_NetworkAdapterConfiguration")
    Dim objMOC As ManagementObjectCollection = objMC.GetInstances()

    For Each objMO As ManagementObject In objMOC
        If CBool(objMO("IPEnabled")) Then
            If objMO("Caption").Equals(NIC) Then
                Try
                    Dim setWINS As ManagementBaseObject
                    Dim wins As ManagementBaseObject = objMO.GetMethodParameters("SetWINSServer")
                    wins.SetPropertyValue("WINSPrimaryServer", priWINS)
                    wins.SetPropertyValue("WINSSecondaryServer", secWINS)

                    setWINS = objMO.InvokeMethod("SetWINSServer", wins, Nothing)
                Catch generatedExceptionName As Exception
                    Throw
                End Try
            End If
        End If
    Next
End Sub 
```

但在 ManagementClass() 和其他项目中给出错误。我导入了 System.Management。但是vb显示没有找到的错误。

这是我转换为 pc 中可用的打印 nic 的代码。这是正确的吗？：

```
 For Each nic As NetworkInterface In NetworkInterface.GetAllNetworkInterfaces()
        If nic.OperationalStatus = OperationalStatus.Up Then
            Debug.Print(nic.GetPhysicalAddress().ToString())
            Exit For
        End If
    Next 
```

但是提供 nic 名称吗？或使用它的示例演示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:29:46.513

您已经找到[了一些人很好，他们可以为您编写大部分代码](https://stackoverflow.com/questions/209779/how-can-you-change-network-settings-ip-address-dns-wins-host-name-with-code)，现在您所要做的就是将其转换为 VB.NET。考虑到这两种语言之间的广泛相似性，这对任何真正的 .NET 程序员来说都不难。但是，如果您需要一些额外的帮助，请尝试使用免费的在线翻译器[之一，例如 Developer Fusion 中的这个](http://www.developerfusion.com/tools/convert/csharp-to-vb/)。

那么，剩下的唯一问题是您如何知道要提供哪个 NIC 名称，因为链接代码接受`string`指定 NIC 的参数。

不幸的是，这不是我们（或任何人）可以为您提供准确答案的问题。问题是一台计算机可以安装多个 NIC，每个 NIC 都可以有不同的 DNS 设置。这就是为什么该函数需要该参数，以便您可以选择配置哪一个。

简单直接的方法是枚举所有已安装的 NIC，然后

*   如果只有一个，就使用那个。
*   如果有多个，则显示一个对话框，列出每个的名称并要求用户选择。

观察链接代码使用类的`Caption`属性`Win32_NetworkAdapterConfiguration`作为 NIC 的“名称”。这可能与您应该向用户显示的名称相同，以及您认为可能包含有助于他们做出决定的有用信息的任何其他属性值。

考虑到用户不关心并且很可能不知道答案，[询问用户几乎总是一种逃避的方法。](http://blogs.msdn.com/b/oldnewthing/archive/2004/04/26/120193.aspx)良好的 UI 设计将这样的东西保持在最低限度。但在这里，你真的没有太多选择。合理化选择的逻辑是，如果用户在她的计算机上安装了多个 NIC，那么她可能是一位知道如何回答您的问题的高级用户。

修改代码以枚举所有已安装的 NIC 相对简单。从[Marc 的重构代码](https://stackoverflow.com/a/7926134/366904)开始：

```
foreach (var managementObject in networkConfigs.Cast<ManagementObject>().Where(objMO => (bool)objMO["IPEnabled"] && objMO["Caption"].Equals(nic))) 
```

我们只需要删除应用于`Caption`属性的相等测试：

```
foreach (var managementObject in networkConfigs.Cast<ManagementObject>().Where(objMO => (bool)objMO["IPEnabled"])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T01:34:56.677

您需要引用 System.management 并导入它。

# php - 正则表达式，在模式前查找 10 个字符

> ID：15427270
> 
> 赞同：1
> 
> 时间：2013-03-15T07:54:15.220
> 
> 标签：php, regex

我不擅长正则表达式，所以我需要一些帮助。

我试图找到如何在模式之前获取例如 10 个字符和之后获取 10 个字符。像：

```
dskjgh kdsfhgl:ks;dhfl\kgh.sldfgdfgsd<pattern1.fso[wpe;x,/c,zasdfsdg

(10 chars before pattern1) var1 = "ldfgdfgsd<"
(10 chars after pattern1)  var2 = ".fso[wpe;x" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:17:09.983

```
$str = "dskjgh kdsfhgl:ks;dhfl\\kgh.sldfgdfgsd<pattern1.fso[wpe;x,/c,zasdfsd";
preg_match( "/(.{10})(pattern1)(.{10})/", $str, $matches);

$var1 = $matches[1];
echo $var1;

$var2 = $matches[3];
echo $var2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T07:59:07.200

这应该可以解决问题：

```
var str = "lasdjfl askjdfl askjdf kljlajpattern1lakjsdflajsdlfkj";
var match = str.match(/(.{10})pattern1(.{10})/i);
var text1 = match[1];
var text2 = match[2];
alert(text1);
alert(text2); 
```

结果：

```
text1 = jdf kljlaj

text2 = lakjsdflaj 
```

# nlp - 如何在情感分析中使用上下文相关语法？

> ID：15427280
> 
> 赞同：3
> 
> 时间：2013-03-15T07:54:59.410
> 
> 标签：nlp, sentiment-analysis, context-sensitive-grammar

是否可以在情感分析中使用上下文相关的语法？如果是，那么如何？基本上，我想做一些短语级别的分析。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:00:27.043

短语结构和句法分析（通过上下文无关或上下文敏感的语法、依赖解析器等）通常会在较早阶段执行并用作情感分析的输入。您通常会从解析树中提取特征并在情绪分类阶段使用（例如特征，请参阅下面引用的论文）。

短语结构（以解析树的形式）已被证明对其他下游任务有效（例如，参见 Fisher 和 Roark，2008，“解析派生特征用于自动话语分割的实用性”和 Punyakanok 等人。 , 2008 年，“句法解析和推理在语义角色标签中的重要性”）。

我不知道解析结构对情感分析有多大的影响，但直观地说，它似乎应该有所帮助。

一个问题：你为什么对上下文相关的语法感兴趣？即使是对上下文敏感的形式，其处理成本也要高得多（通常是数量级），而且——在我看来——通常似乎不足以提高下游性能以保证额外的费用。但是，如果您的应用程序可以从上下文相关分析与无上下文分析中受益，那将是一个有价值且有趣的目标。

如果您认为上下文无关的短语结构足以满足您的需求，我建议您看看[Stanford Parser](http://nlp.stanford.edu/software/lex-parser.shtml)和[BUBS Parser](https://code.google.com/p/bubs-parser/)。斯坦福工具包更灵活，BUBS 更快（完全公开——我是 BUBS 的主要开发人员之一）。我对任何上下文相关的实现都没有足够的经验来在那里提出建议。

# xcode - 被缩短的文本

> ID：15427283
> 
> 赞同：1
> 
> 时间：2013-03-15T07:55:33.803
> 
> 标签：xcode, jquery-mobile, mobile, ios-simulator

我有以下代码，但我不确定为什么当我使用 Xcode iPhone 模拟器时它显示...为什么？还是因为我用的是模拟器

我正在使用 jQuery 石墨主题

**问题：**

![截图如果问题](../Images/0659eaf2189917cea005c590704053e5.png)

**HTML：**

```
 <div data-role="header">
            <h1 class="appTitle">Birthday Reminders</h1>
        </div><!-- Header --> 
```

**CSS：**

```
@media only screen and (min-device-width : 320px) and (max-device-width : 480px)
{
.appTitle { max-width:100%; font-size:12px; text-align: center;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:38:53.187

这是一个工作示例：http: [//jsfiddle.net/Gajotres/GFfAt/](http://jsfiddle.net/Gajotres/GFfAt/)

**使用的 CSS：**

```
.appTitle {
    margin: 0.6em 15% 0.8em !important;
    white-space: normal !important;
} 
```

边距内的 15% 是文本和应用标题限制之间的左/右空间。

不要降低字体大小，因为标题高度会降低，以应对它增加边距。

# linux - 函数 ibv_get_cq_event() 在销毁后不返回

> ID：15427289
> 
> 赞同：0
> 
> 时间：2013-03-15T07:55:57.143
> 
> 标签：linux, infiniband, rdma

函数 ibv_get_cq_event() 阻塞并且即使在销毁所有资源后也永远不会返回。

我初始化所有 InfiniBand 资源，在单独的线程中启动 ibv_get_cq_event，然后销毁所有 InfiniBand 资源，但 ibv_get_cq_event 永远不会返回。

什么是正确的初始化和销毁​​ IB (RDMA)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:06:13.833

阻塞`ibv_get_cq_event()`然后试图破坏你的资源大致相当于创建一个套接字，阻塞`read()`然后`close()`在不同的线程中调用套接字。实际上，在内部，完成通道实际上只是一个文件描述符，并且`ibv_get_cq_event()`几乎只是`read()`. 在这两种情况下，`read()`保存对文件的引用，内核不会`read()`仅仅因为其他人调用`close()`.

至少有两种合理的方法可以处理您的情况：

*   在尝试清理 IB 资源之前，向被阻塞的线程发送信号以`read()`唤醒它。

*   用于`fcntl`设置`O_NONBLOCK`，`comp_channel->fd`然后使用事件循环，`poll()`或`epoll`知道完成通道何时可读。仅`read()`在事件存在时调用，并在拆除 RDMA 资源时停止事件循环。

# scala - Intellij Scala 多种导入样式格式设置

> ID：15427290
> 
> 赞同：9
> 
> 时间：2013-03-15T07:55:59.540
> 
> 标签：scala, coding-style, formatting, intellij-idea

我们有一个约定要写

```
import akka.actor.{ Actor, Props } 
```

代替

```
import akk.actor.{Actor, Props} 
```

就像 Intellij 格式化功能现在正在做的那样。但是我在代码样式设置中没有找到这样的选项，有什么办法可以改变这种行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T09:13:28.147

我刚刚为此创建了一个问题，我希望它会尽快实施，很简单：http: [//youtrack.jetbrains.com/issue/SCL-5471](http://youtrack.jetbrains.com/issue/SCL-5471)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-31T05:41:47.870

首选项 > 代码风格 > Scala > 空格 > ☑ 导入大括号

# javascript - 多选功能无法正常工作

> ID：15427291
> 
> 赞同：2
> 
> 时间：2013-03-15T07:56:02.493
> 
> 标签：javascript, jquery, mysql, html

我正在使用 javascript`multi select`函数`listbox`和`php`代码。在界面中我们可以选择多个元素，但是当我使用 php 代码从中获取值时，它只检索一个值。有人可以告诉我有什么问题吗？

javascript:

```
 <script type="text/javascript">
$(function(){
    $("select").multiselect();
});
</script> 
```

HTML 代码：

```
<select title="Basic example" multiple="multiple" name="example-basic" size="5">
    <option value="Sgoop">Sgoop</option>
    <option value="Monet">Monet</option>
    <option value="Hive">Hive</option>
    <option value="Mahout">Mahout</option>
    <option value="R">R</option>
    <option value="Storm">Storm</option>
    <option value="Flume">Flume</option>
    <option value="Solr">Solr</option>
    <option value="Python">Python</option>
    <option value="Splunk">Splunk</option>
    <option value="Ruby">Ruby</option>
    <option value="perl">perl</option>
    </select> 
```

mysql代码：

```
$sql="INSERT INTO details (name, type, domain, rights, description, author, version, download)
VALUES
('$_POST[compname]','$_POST[examplebasic]','$_POST[examplebasic2]','$_POST[examplebasic3]','$_POST[textarea]','$_POST[name]',1,0)"; 
```

将 examplebasic 更改为 examplebasic[] 现在我得到一个数组到字符串的转换错误。我能做些什么来解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:57:35.987

编辑

* * *

将名称更改为

```
name="example-basic[]" 
```

并在您的 php 代码中：

```
$options = json_encode( $_POST['example-basic'] );

// and for populating you can use `json_decode` to get the array again 
```

* * *

或者您可以拆分数组项，`,`然后将其插入数据库字段：

```
$options = implode( ',', $_POST['example-basic'] ); 
```

有关更多描述，请参见[implode php 手册](http://php.net/manual/en/function.implode.php)

```
// then for populating use `explode` to convert it to array

$sql="INSERT INTO details (name, type, domain, rights, description, author, version, download)

VALUES ('$_POST[compname]','$options','example','example2','$_POST[textarea]','$_POST[name]',1,0)"; 
```

# php - php分页[1-last page]，当按下“2”或“3”按钮时返回当前页面

> ID：15427295
> 
> 赞同：1
> 
> 时间：2013-03-15T07:56:30.963
> 
> 标签：php, html

在这里，我编写了查询以显示 3 行数据，它从 mysql 数据库中获取数据。它显示“1、2、3”按钮。当我按下 2 按钮时，它不会转到下一页。我认为我的 sql 查询不正确..请帮助我。

```
<?php
    $connection = mysql_connect("localhost","root","");
    $gender1=$_POST['gender'];
    if (!$connection) {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("nursingcarein",$connection);
    $city=$_POST['city'];
    $gender=$_POST['gender'];
    $profession=$_POST['profession'];
    $state=$_POST['state'];

    if (isset($_GET["page"])) { 
        $page  = $_GET["page"]; 
    } else { 
        $page=1; 
    };
    $start_from = ($page-1) * 3;

    /*HERE IN WHERE IT MATCHES THE GIVEN "GENDER" in the textbox*/
    $sql = "SELECT age,description,name FROM nursereg WHERE gender='$gender' LIMIT 
    $start_from, 3";
    $rs_result = mysql_query ($sql,$connection);
?>

<table>
    <tr>
        <td>Image</td>
        <td>Description</td>
    </tr>
    <?php
    while($row=mysql_fetch_array($rs_result)) {
    ?>
    <tr>
        <td><? echo $row['name']; ?></td>
        <td><? echo  $row['age']; ?></td>
        <td><? echo  $row['description']; ?></td>
    </tr>
    <?php
    };
    ?>
</table>
    <?php
        $sql = "SELECT COUNT(Name) FROM nursereg";
        $rs_result = mysql_query($sql,$connection);
        $row = mysql_fetch_row($rs_result);
        $total_records = $row[0];
        $total_pages = ceil($total_records / 5);
        for ($i=1; $i<=$total_pages; $i++) {
            echo "<a href='ind1.php?page=".$i."'>".$i."</a> ";
        };
    ?> 
```

# sitecore - Sitecore 工作框 - 将“消息框”弹出框从单行文本框修改为多行文本框

> ID：15427299
> 
> 赞同：1
> 
> 时间：2013-03-15T07:56:37.093
> 
> 标签：sitecore

Sitecore 工作箱显示当前状态下可用的工作流操作。对于关闭“禁止消息”的操作，它会显示一个消息框以输入操作的原因。

可以定制这个吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:56:24.220

它似乎`<websiteroot>/sitecore/shell/feeds/Views/WorkflowComment.ascx`是所使用的控件的文件。
所以虽然它看起来*可以*修改，但我以前没有这样做过，所以我不完全确定当它更改为不同的类型时会发生什么。例如，该文件`<websiteroot>/sitecore/shell/feeds/workflow.js`似乎也使用了该字段。

如果您确实尝试更改它，您也必须更改`Sitecore.Shell.Feeds.Views.WorkflowComment`类，因为它需要一个文本框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:48:11.283

如果您想要一个多行文本框而不是单行文本框，只需将该`TextMode="MultiLine"`属性添加到 Trayek 在其答案中描述的位置的 WorkflowComment.ascx 文件中。

您可能还需要修改 CSS 以使其更适合。

如果这是您需要的唯一更改，则不必更改课程。

# jquery - jquery自动完成结果出现在其他输入元素上

> ID：15427300
> 
> 赞同：3
> 
> 时间：2013-03-15T07:56:38.413
> 
> 标签：jquery, css, autocomplete

在输入框上使用 jquery 自动完成功能。这是 100% 的工作，但认为造型需要一些工作。

目前，jquery 建议显示在其他输入元素的文本后面。如果我单击选择框下方的 jquery 选项，则会触发选择框，而不是选择自动完成选项。

如何将 jquery 自动完成配置为顶部？这是js问题还是css问题？

我尝试使用以下代码禁用另一个名为 period 的输入元素，但它不起作用：

```
<script type="text/javascript">
      $(function(){
        $("#customer").autocomplete({
          minlength: 5,
          source: "get_customers",
           open: function(event, ui) { // disable other inputs
        $("input#period").attr("disabled", "disabled");
    },
      close: function(event, ui) { // re-enable other inputs
        $("input#period").removeAttr("disabled");
    },
          messages: {
          noResults: '',
          results: function() {}
      }

        });
      });
</script> 
```

任何关于获取 jquery 列表“ontop”或禁用其他表单工作的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T08:01:49.250

尝试

```
.ui-autocomplete{
   z-index:50;       //Where 50 is just an arbitrary number superior to your form's z-indexes
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T07:58:44.207

我看不到您的 html 标记，因此无法提供示例，但您需要使用[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp) css 属性来解决此问题。

您需要在包含所有建议的容器上使用它。您甚至可能需要在一些背景元素上设置它，但如果您还没有使用它，这不太可能。

我通常将我的设置为 999，如下所示：

```
z-index: 999; 
```

只是为了确保它保持在顶部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T08:39:00.383

使用 z-index 属性

```
 .ui-autocomplete
{
       z-index:50;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T06:37:16.003

> 使用 appendTo:YourContainerDiv

```
$("#TextBox").autocomplete({
                appendTo: '.ContainerDiv',
                source: function (request, response) {
                    $.ajax({
                        url: '@Url.Action("Action","Controller")',
                        type: "POST",
                        dataType: "json",
                        data: { Prefix: request.term },
                        success: function (data) {
                            response($.map(data, function (item) {
                                return { label: item.Name, value: item.Name };
                            }));

                        }
                    })
                }

            }); 
```

# ios - 相机模式下的 UIImagePickerView 在 iPad 上的 dismissViewController 上显示全黑

> ID：15427305
> 
> 赞同：6
> 
> 时间：2013-03-15T07:57:14.217
> 
> 标签：ios, objective-c, uiviewcontroller, camera, uiimagepickercontroller

我有一个应用程序，它使用 UIImagePickerView 来允许用户使用他们的相机拍照或使用 UIImagePickerView 从相机胶卷中选择一张。

获取图片后，我在选择器顶部使用`[picker presentViewController:myViewController animated:YES completion:nil]`.

如果我将我的应用程序作为 iPhone 应用程序运行（在我的 iPad 上），当我关闭`myViewController`使用`[myviewController.presentingViewController dismissViewControllerAnimated:YES completion:nil]`它时，会返回显示 CameraRoll 或 CameraFeed 以拍摄另一张照片。

但是在 iPad 上，如果我选择一张图片，它可以工作，但如果我使用相机源拍照，我只是得到一个黑屏。

知道为什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T14:43:49.317

在 iPad 上，当您使用不同于相机源的源时，您会在弹出窗口中显示 UIImagePickerController，您可以根据需要使用它。但是，当您决定选择源时`UIImagePickerControllerSourceTypeCamera`，选择器窗口将全屏显示，您有两种情况：

1.  如果您使用自定义控件 (showsCameraControls = NO)，您可以使用同一个控制器拍摄尽可能多的照片。
2.  如果您使用默认控件（showsCameraControls = YES），则在拍摄一张照片后，您必须关闭控制器，因为它再次无法使用，我想这是您的情况。拍摄照片后，您将下一个控制器放入堆栈，之后您尝试返回选择器控制器，但它不再可用，您可以看到黑屏。

苹果文档`imagePickerController:didFinishPickingMediaWithInfo:`：

> If you set the image picker’s showsCameraControls property to NO and provide your own custom controls, you can take multiple pictures before dismissing the image picker interface. However, if you set that property to YES, your delegate must dismiss the image picker interface after the user takes one picture or cancels the operation.

If you want to take another picture in this case you have to go back to your base controller and create the UIImagePickerController instance one more.

I hope this will help.

Edit: The easiest way IMO to rebuild your view controllers stack is to dismiss the picker after taking a photo without animation and after that show the next controller with animation. It will give the user feeling, that the next controller is displayed just after the picker controller without any "flashing".

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    [self dismissViewControllerAnimated:NO completion:^{
        [self presentViewController:<newController> animated:YES completion:nil];
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T18:37:14.290

您可以尝试正常关闭 UIImagePicker，并且当 Pre-viwer View Controller 激活 viewWillDesapear 时，您对前一个 viewController “说”当它 viewWillAppear 时，它会再次显示 UIImagePicker。我认为它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T02:34:15.887

我在一个应用程序中遇到了类似的问题。我最终在弹出式控制器中呈现相机的图像选择器，而不是在 iPad 上模态显示。我不确定这是否适用于您的应用，但这是一种不同的方法。我这样做没有问题，并且更喜欢它。

# python - 有人可以解释一下 python 守护程序如何也可以与自身正在运行的实例进行通信吗？

> ID：15427308
> 
> 赞同：0
> 
> 时间：2013-03-15T07:57:19.827
> 
> 标签：python, interface, ipc, daemon

我想实现一个 Python 模块，该模块用作守护程序并作为该守护程序的接口。例如，当我运行时：

> python daemon.py do_something

`daemon`模块应尝试与守护进程通信，`do_something`如果不存在，则启动守护进程，然后`do_something`.

**注意：**我更喜欢在 Python 3中使用[daemon包。](http://www.python.org/dev/peps/pep-3143)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:25:04.193

在符合 POSIX 的系统上，可以使用 unix 域套接字在本地传递进程任意数据。[您可以使用套接字模块](http://docs.python.org/library/socket.html)创建客户端和服务器套接字。解析命令行选项（例如，使用 optparse 或 argparse 模块），您可以决定是否应该启动守护程序或打开客户端套接字连接以传递命令。

# ios - 以循环格式显示UIButtons ios？

> ID：15427309
> 
> 赞同：-1
> 
> 时间：2013-03-15T07:57:34.437
> 
> 标签：ios, objective-c, uibutton

我们如何以圆形格式显示 UIButton，以便当我们单击某个特定按钮时`UIButton`它会移动到中间位置？

![圆形按钮](../Images/1a63df23ef753766c619f20602898b7c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:04:03.363

您可以使用`touch recognition gesture`，也可以简单地将自定义设置和使用**clearcolor**背景`UIImage`的少数自定义设置。`UIButton`

 **对于该**中心图像**，您可以根据**所选**按钮简单地更改**图像。**`UIImageView`

 ****编辑：**

**解决方案2：**

```
#import <QuartzCore/QuartzCore.h>
myButton.layer.cornerRadius = 8; 
```

也看看这个帖子。 [在 iphone sdk 中将固定大小的圆形按钮设置为图像](https://stackoverflow.com/questions/11431983/make-fix-size-round-button-as-image-in-iphone-sdk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:31:08.963

创建按钮：

```
double perAngle = 2 * M_PI / BUTTONS_COUNT;

for (int i = 0; i < BUTTONS_COUNT; i++) {
    UIButton *btn = [[UIButton alloc] initWithFrame:CGRectMake(sin(perAngle * i) + basePoint.x, cos(perAngle * i) + basePoint.y, yourWidth, yourHeight)];

    [btn addTarget:self action:@selector(moveButton:) forControlEvents:UIControlEventTouchUpInside];

    [yourView addSubView:btn];
} 
```

移动按钮：

```
- (void)moveButton:(UIButton *)btn
{
    [UIView animateWithDuration:2.0 animations:^{
        btn.center = basePoint;
    }];
} 
```

这`basePoint`是您的通告中心点。它只是一个演示代码，您应该处理后退和异常等。

PS：这段代码是一个整圆，如果你的是半圆，你自己计算角度，很容易****

# html - 在电子邮件正文中显示和隐藏内容（outlook 2010）

> ID：15427316
> 
> 赞同：1
> 
> 时间：2013-03-15T07:58:17.360
> 
> 标签：html, css, email, outlook, show-hide

我们喜欢在电子邮件正文中展开和折叠一些内容。（显示/隐藏或切换）

我们尝试使用**CSS-Tags**和**DIV**来做到这一点。但 Outlook HTML/CSS 渲染引擎似乎不支持 'display:none / display:block' 和 'onclick' CSS-Tags。

有机会做这样的事情吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:03:15.890

Onclick 不是 CSS 标签。而且您将无法在电子邮件中添加一些 javascript。

要显示电子邮件，您需要使用表格而不是 div 来处理您的内容，以允许大多数用户正确查看它。

# iphone - 如何在不拉伸中心的情况下拉伸 UIImageView？

> ID：15427317
> 
> 赞同：15
> 
> 时间：2013-03-15T07:58:18.767
> 
> 标签：iphone, ios

![在此处输入图像描述](../Images/29f25cf965ffa9a5fbba203f39ab3ef4.png)

我想拉伸上图的左右两边，中间的箭头不拉伸。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T23:15:16.903

如果你不想打扰 Photoshop 并且图像没有动态调整大小，你可以使用我在 UIImage 上的类别方法。

您名为“17maA.png”的示例图像为 124 像素宽。因此，您可以使用以下命令轻松创建 300 px 宽的版本：

```
UIImage *image = [UIImage imageNamed:@"17maA"];
UIImage *newImage = [image pbResizedImageWithWidth:300 andTiledAreaFrom:10 to:20 andFrom:124-20 to:124-10]; 
```

这是分类方法：

```
- (UIImage *)pbResizedImageWithWidth:(CGFloat)newWidth andTiledAreaFrom:(CGFloat)from1 to:(CGFloat)to1 andFrom:(CGFloat)from2 to:(CGFloat)to2  {
    NSAssert(self.size.width < newWidth, @"Cannot scale NewWidth %f > self.size.width %f", newWidth, self.size.width);

    CGFloat originalWidth = self.size.width;
    CGFloat tiledAreaWidth = (newWidth - originalWidth)/2;

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(originalWidth + tiledAreaWidth, self.size.height), NO, self.scale);

    UIImage *firstResizable = [self resizableImageWithCapInsets:UIEdgeInsetsMake(0, from1, 0, originalWidth - to1) resizingMode:UIImageResizingModeTile];
    [firstResizable drawInRect:CGRectMake(0, 0, originalWidth + tiledAreaWidth, self.size.height)];

    UIImage *leftPart = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(newWidth, self.size.height), NO, self.scale);

    UIImage *secondResizable = [leftPart resizableImageWithCapInsets:UIEdgeInsetsMake(0, from2 + tiledAreaWidth, 0, originalWidth - to2) resizingMode:UIImageResizingModeTile];
    [secondResizable drawInRect:CGRectMake(0, 0, newWidth, self.size.height)];

    UIImage *fullImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return fullImage;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T08:01:20.017

使用 Photoshop 或其他图像编辑工具将图像分成两部分：边缘和中心。边缘图像可以是一个像素宽，用于左右边缘；然而，中心是捕获箭头的许多像素宽。然后，您可以将三个`UIImageView`实例彼此相邻放置：左边缘、中心和右边缘。左右边缘调整为所需宽度，而中心保持其原始尺寸。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-29T18:59:30.973

[Klaas](https://stackoverflow.com/users/292145/klaas)的回答真的帮助了我，在 Swift 3.0 中也是如此：

```
static func stretchImageSides(image: UIImage, newWidth: CGFloat) -> UIImage? {
    guard image.size.width < newWidth else {
        return image
    }

    let originalWidth = image.size.width
    let tiledAreaWidth = ceil(newWidth - originalWidth) / 2.0;

    UIGraphicsBeginImageContextWithOptions(CGSize(width: originalWidth + tiledAreaWidth, height: image.size.height),
                                           false, image.scale)

    let firstResizable = image.resizableImage(withCapInsets: UIEdgeInsets(top: 0,
                                                                          left: 0,
                                                                          bottom: 0,
                                                                          right: originalWidth - 3),
                                              resizingMode: .stretch)
    firstResizable.draw(in: CGRect(x: 0, y: 0, width: originalWidth + tiledAreaWidth, height: image.size.height))

    let leftPart = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    UIGraphicsBeginImageContextWithOptions(CGSize(width: newWidth, height: image.size.height),
                                           false, image.scale)

    let secondResizable = leftPart?.resizableImage(withCapInsets: UIEdgeInsets(top: 0,
                                                                              left: tiledAreaWidth + originalWidth - 3,
                                                                              bottom: 0,
                                                                              right: 0),
                                              resizingMode: .stretch)
    secondResizable?.draw(in: CGRect(x: 0, y: 0, width: newWidth, height: image.size.height))

    let fullImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return fullImage
} 
```

*   您只需要提供具有所需新宽度的图像，它就会为您进行水平拉伸。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T08:01:51.007

（没有多大帮助，但有相反的支持：拉伸图像的中心并保持边缘部分的大小相同：请参阅[在保留角的同时拉伸 UIImage](https://stackoverflow.com/questions/8879817/stretching-an-uiimage-while-preserving-the-corners)。）

**要编写自己的解决方案，**您可以创建一个包含三个部分的组件：左图、中心图、右图。然后，您可以通过确保中心部分保持相同的宽度来处理组件的大小更改，而左/右组件（图像）会拉伸。

**替代策略：**创建一个组件，将两个图像堆叠在一起。下图是扁条钻头（没有三角形），水平拉伸以填充可用空间。上图为三角形中心部分，以可用空间为中心。这将给出您正在寻找的效果。

此外，还有一个应用程序（不是免费的！）可以帮助您创建具有可拉伸特性的漂亮组件：[PaintCode](http://www.paintcodeapp.com/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-21T23:37:41.073

基于@Arashk 的回答，一个带有参数的 Swift`UIImage`扩展。`size`

拉伸图像的中心仍然居中。

```
extension UIImage {

  func strechedImageSides(newSize: CGSize) -> UIImage? {
    guard size.width < newSize.width || size.height < newSize.height else {
      return self
    }

    let originalWidth = size.width
    let originalHeight = size.height

    let tiledAreaWidth  = ceil(newSize.width  - originalWidth)  / 2.0
    let tiledAreaHeight = ceil(newSize.height - originalHeight) / 2.0

    UIGraphicsBeginImageContextWithOptions(CGSize(width: originalWidth + tiledAreaWidth,
                                                  height: originalHeight + tiledAreaHeight),
                                           false,
                                           scale)

    let bottomRightResizable = resizableImage(withCapInsets: UIEdgeInsets(top: 0,
                                                                                left: 0,
                                                                                bottom: originalHeight - 1,
                                                                                right: originalWidth - 1),
                                                    resizingMode: .stretch)
    bottomRightResizable.draw(in: CGRect(x: 0,
                                         y: 0,
                                         width: originalWidth + tiledAreaWidth,
                                         height: originalHeight + tiledAreaHeight))

    let topLefthPart = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    UIGraphicsBeginImageContextWithOptions(newSize,
                                           false,
                                           scale)

    let topLeftResizable = topLefthPart?.resizableImage(withCapInsets: UIEdgeInsets(top: tiledAreaHeight + originalHeight - 1,
                                                                                    left: tiledAreaWidth + originalWidth - 1,
                                                                                    bottom: 0,
                                                                                    right: 0),
                                                        resizingMode: .stretch)

    topLeftResizable?.draw(in: CGRect(origin: .zero, size: newSize))

    let fullImage = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return fullImage
  }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-06-11T09:01:18.610

我们可以使用下面的代码拉伸图像：- 这里我们需要箭头标记部分必须是相同的大小，所以我们拉伸箭头标记开始下方的中间部分（假设它将是 2 px）

```
UIImage *image = [UIImage imageNamed:@"img_loginButton.png"];
    UIEdgeInsets edgeInsets;
    edgeInsets.left = 0.0f;
    edgeInsets.top = 2.0f;
    edgeInsets.right = 0.0f;
    edgeInsets.bottom = 0.0f;
    image = [image resizableImageWithCapInsets:edgeInsets];
//Use this image as your controls image 
```

# php - 如何像浏览器在 PHP 中一样将 utf8 编码为 url？

> ID：15427321
> 
> 赞同：3
> 
> 时间：2013-03-15T07:58:27.437
> 
> 标签：php, utf-8, urlencode

在浏览器中输入此 url 时：`http://www.google.com/?q=ä`

发送的 url 实际上是`http://www.google.com/?q=%C3%A4`

我想用 Php 做同样的转换——怎么做？

我尝试了什么：

```
$url = 'http://www.google.com/?q=ä'; //utf8 encoded

echo rawurlencode($url);
//gives http%3A%2F%2Fwww.google.com%2F%3Fq%3D%C3%A4

$u = parse_url($url);
echo $url['scheme'].'://'.$url['host'].$url['path'].'?'.rawurlencode($url['query']);
//gives http://www.google.com/?q%3D%C3%A4 
```

上面的网址只是一个简单的例子，我需要一个通用的解决方案，也适用于

```
http://www.example.com/ä
http://www.example.com/ä?foo=ä&bar=ö
http://www.example.com/Περιβάλλον?abc=Περιβάλλον 
```

这里提供的答案不够通用： [How to encode URL using php like browsers do](https://stackoverflow.com/questions/5441667/how-to-encode-url-using-php-like-browsers-do)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T08:07:34.140

好的，花了我一些时间，但我认为我有通用的解决方案：

```
function safe_urlencode($txt){
  // Skip all URL reserved characters plus dot, dash, underscore and tilde..
  $result = preg_replace_callback("/[^-\._~:\/\?#\\[\\]@!\$&'\(\)\*\+,;=]+/",
    function ($match) {
      // ..and encode the rest!  
      return rawurlencode($match[0]);
    }, $txt);
  return ($result);
} 
```

基本上，它使用*URL 保留字符*（[http://www.ietf.org/rfc/rfc3986.txt](http://www.ietf.org/rfc/rfc3986.txt)）+*更多*字符（因为我认为“点”也应该单独留下）分割字符串，并在rawurlencode **()**其余的部分。

```
echo safe_urlencode("https://www.google.com/?q=ä");
// http://www.google.com/?q=%C3%A4

echo safe_urlencode("https://www.example.com/Περιβάλλον?abc=Περιβάλλον");
// http://www.example.com/%CE%A0%CE%B5%CF%81%CE%B9%CE%B2%CE%AC%CE%BB%CE%BB%CE%BF%CE%BD?abc=%CE%A0%CE%B5%CF%81%CE%B9%CE%B2%CE%AC%CE%BB%CE%BB%CE%BF%CE%BD
// ^ This is some funky stuff, but it should be right 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T08:09:35.610

Looks that you want encode the `query` part of the URI without modify schema and host.

**Preamble**

There are no generic functions shipped by the language to achieve that because is not possible for the language to know if you will use the encoded string for a `redirect` or as `query argument` (?url=http%3A%3A....)

So the developer have to extract the part to encode as you did.

**Answer**

Encapsulate your own code as a function.

```
function encodeUrlQuery($url) {
  $u = parse_url($url);
  return $u['scheme'].'://'.$u['host'].$u['path'].'?'.rawurlencode($u['query']);
}

echo encodeUrl('http://www.google.com/?q=ä'); 
```

# mongodb - Mongo 是否按降序排序 _id 是利用自动索引还是？

> ID：15427325
> 
> 赞同：3
> 
> 时间：2013-03-15T07:58:55.030
> 
> 标签：mongodb

我试图弄清楚按 _id 字段按降序排序是否利用了系统自动创建的索引。我试图使用 explain() 来解决这个问题，但我不确定。我应该按降序在 _id 上创建一个附加索引以更快地恢复数据吗？

```
> db.foo.insert({ name: 'foo' });
> db.foo.insert({ name: 'bar' });
> db.foo.find();
{“_id”：ObjectId（“5142d30ca4a8b347cb678c1a”），“名称”：“foo”}
{“_id”：ObjectId（“5142d310a4a8b347cb678c1b”），“名称”：“酒吧”}
> db.foo.find().sort({ _id: -1 });
{“_id”：ObjectId（“5142d310a4a8b347cb678c1b”），“名称”：“酒吧”}
{“_id”：ObjectId（“5142d30ca4a8b347cb678c1a”），“名称”：“foo”}
> db.foo.find().sort({ _id: -1 }).explain();
{
    "cursor" : "BtreeCursor _id_ reverse",
    “isMultiKey”：假，
    “n”：2，
    “nscannedObjects”：2，
    “nscanned”：2，
    “nscannedObjectsAllPlans”：2，
    “nscannedAllPlans”：2，
    “scanAndOrder”：假，
    “indexOnly”：假，
    “nYields”：0，
    “nChunkSkips”：0，
    “毫”：0，
    “索引边界”：{
        “_ID” ： [
            [
                {
                    “$ 最大元素”：1
                },
                {
                    “$minElement”：1
                }
            ]
        ]
    },
    “服务器”：“本地主机：27017”
}

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:48:18.553

`_id`由于属性下的第一行，说明确实提供了一个很好的指标，说明它是否能够反向使用默认索引`cursor`：`BtreeCursor _id_ reverse`。

表明`BtreeCursor`它是一个使用索引的游标，而`_id_ reverse`表明它正在`_id_`反向使用索引。

从所有意图和目的来看，它应该`_id`正确地反向使用索引。

另外，MongoDB 还没有索引交集（[https://jira.mongodb.org/browse/SERVER-3071](https://jira.mongodb.org/browse/SERVER-3071)），这意味着它仍然（对于大多数查询）为条件和排序使用单个索引因此，如果您希望使用查找条件，您会发现您可能还需要`_id`在未来的索引中包含。

# wpf - 从数据网格、WPF 添加和检索数据

> ID：15427337
> 
> 赞同：0
> 
> 时间：2013-03-15T07:59:53.337
> 
> 标签：wpf, c#-4.0, datagrid, wpf-controls, wpfdatagrid

我想在按钮单击时将数据添加到数据网格。假设一个数据网格有 3 个标题，即 ITEM、QUANTITY、PRICE。现在，当用户第一次单击时，我会像这样在第一行中获取数据。

```
1   1   1 
```

然后在第二次点击总数据将是

```
1   1   1
2   2   2 
```

等等

```
1   1   1
2   2   2
3   3   3
4   4   4
.   .   .
.   .   .
.   .   .
.   .   .
n   n   n 
```

当我点击一个按钮说数组时，我应该在arraylist中获取datagrid数据。这在WPF中可能吗？我已经在使用 jquery 和后端方法的 Web 应用程序中完成了这项工作。无论如何，我希望这在 WPF 中也很容易。我已经搜索了网络，但是所有示例似乎都与数据绑定很复杂，我不想进行数据绑定，并且想采用我在上面尝试解释的简单方式，希望它清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:43:25.710

为了展示使用 DataBinding 实现这一点是多么容易，我很快敲开了这个小应用程序。这花了我大约 10 分钟，但使用 Resharper 和其他工具的更有经验的程序员几乎可以在几分钟内完成。

这是我的 InventoryItemViewModel.cs

```
public class InventoryItemViewModel : ViewModelBase
{
    private int _itemid;

    public int ItemId
    {
        get { return _itemid; }
        set { _itemid = value; this.OnPropertyChanged("ItemId"); }
    }

    private int _qty;

    public int Qty
    {
        get { return _qty; }
        set { _qty = value; this.OnPropertyChanged("Qty"); }
    }
    private int _price;

    public int Price
    {
        get { return _price; }
        set { _price = value; this.OnPropertyChanged("Price"); }
    }

} 
```

正如您所看到的，它没有太多内容，只有您的 3 个属性。实现简单 UI 更新的神奇之处在于我实现了 ViewModelBase。

这是 ViewModelBase.cs

```
/// <summary>
/// Abstract base to consolidate common functionality of all ViewModels
/// </summary>
public abstract class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        this.OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        var handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }
} 
```

您几乎可以将此类复制到所有 WPF 项目中并按原样使用它。

这是我的主窗口的视图模型：MainWindowViewModel.cs

```
public class MainWindowViewModel : ViewModelBase
{
    public MainWindowViewModel()
    {
        this.InventoryCollection = new ObservableCollection<InventoryItemViewModel>();
        this.AddItemCommand = new DelegateCommand((o) => this.AddItem());
        this.GetItemListCommand = new DelegateCommand((o) => this.GetInventoryItemList());
    }

    public ICommand AddItemCommand { get; private set; }
    public ICommand GetItemListCommand { get; private set; }

    public ObservableCollection<InventoryItemViewModel> InventoryCollection { get; private set; }

    private void AddItem()
    {
        // get maxid in collection
        var maxid = InventoryCollection.Count;
        // if collection is not empty get the max id (which is the same as count in this case but whatever)
        if (maxid > 0) maxid = InventoryCollection.Max(x => x.ItemId);

        InventoryCollection.Add(new InventoryItemViewModel
        {
            ItemId = ++maxid,
            Price = maxid,
            Qty = maxid
        });
    }

    private List<InventoryItemViewModel> GetInventoryItemList()
    {
        return this.InventoryCollection.ToList();
    }
} 
```

如您所见，我有一个 InventoryItemViewModels 的 ObservableCollection。这是我从 UI 绑定到的集合。您必须使用 ObservableCollection 而不是 List 或数组。为了使我的按钮工作，我定义了 ICommand 属性，然后将这些属性绑定到 UI 中的按钮。我使用 DelegateCommand 类将操作重定向到相应的私有方法。

这是 DelegateCommand.cs，这是另一个可以包含在 WPF 项目中并相信它可以工作的类。

```
public class DelegateCommand : ICommand
{
    /// <summary>
    /// Action to be performed when this command is executed
    /// </summary>
    private Action<object> executionAction;

    /// <summary>
    /// Predicate to determine if the command is valid for execution
    /// </summary>
    private Predicate<object> canExecutePredicate;

    /// <summary>
    /// Initializes a new instance of the DelegateCommand class.
    /// The command will always be valid for execution.
    /// </summary>
    /// <param name="execute">The delegate to call on execution</param>
    public DelegateCommand(Action<object> execute)
        : this(execute, null)
    {
    }

    /// <summary>
    /// Initializes a new instance of the DelegateCommand class.
    /// </summary>
    /// <param name="execute">The delegate to call on execution</param>
    /// <param name="canExecute">The predicate to determine if command is valid for execution</param>
    public DelegateCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
        {
            throw new ArgumentNullException("execute");
        }

        this.executionAction = execute;
        this.canExecutePredicate = canExecute;
    }

    /// <summary>
    /// Raised when CanExecute is changed
    /// </summary>
    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    /// <summary>
    /// Executes the delegate backing this DelegateCommand
    /// </summary>
    /// <param name="parameter">parameter to pass to predicate</param>
    /// <returns>True if command is valid for execution</returns>
    public bool CanExecute(object parameter)
    {
        return this.canExecutePredicate == null ? true : this.canExecutePredicate(parameter);
    }

    /// <summary>
    /// Executes the delegate backing this DelegateCommand
    /// </summary>
    /// <param name="parameter">parameter to pass to delegate</param>
    /// <exception cref="InvalidOperationException">Thrown if CanExecute returns false</exception>
    public void Execute(object parameter)
    {
        if (!this.CanExecute(parameter))
        {
            throw new InvalidOperationException("The command is not valid for execution, check the CanExecute method before attempting to execute.");
        }
        this.executionAction(parameter);
    } 
```

我的 MainWindow.xaml 上的 UI 代码如下所示：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctlDefs="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>

</Window.Resources>

<StackPanel>
    <Button Command="{Binding Path=GetItemListCommand}" Content="Get Item List" />
    <Button Command="{Binding Path=AddItemCommand}" Content="Add Item" />
    <DataGrid ItemsSource="{Binding Path=InventoryCollection}" />
</StackPanel> 
```

为了将它们粘合在一起，我重写了 App.xaml.cs OnStartUp 方法。

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        var mainvm = new MainWindowViewModel();
        var window = new MainWindow
        {
            DataContext = mainvm
        };
        window.Show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:34:36.500

我同意这两位评论者的观点，数据绑定是做到这一点的方法，我知道一开始它看起来很复杂，但是一旦你得到一个很好的转换器和命令库，它就可以一次又一次地重复使用，一个简单的上面的数据绑定示例如下所示。

XAML，创建一个新项目并在主窗口中粘贴此代码，它所做的只是添加一个具有 3 列的数据网格和一个将添加新行的按钮。请注意，此窗口的数据上下文设置为自身，这意味着 MainWindow 类的属性将默认使用 {Binding} 公开。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" HorizontalAlignment="Left" Margin="432,289,0,0" VerticalAlignment="Top" Width="75" Command="{Binding AddCommand}"/>
        <DataGrid HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Height="274" Width="497" AutoGenerateColumns="False" ItemsSource="{Binding Items}">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Field1}"/>
                <DataGridTextColumn Binding="{Binding Field2}"/>
                <DataGridTextColumn Binding="{Binding Field3}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

现在是 MainWindow 背后的代码，在这里我创建了 2 个可以绑定的属性，一个是 Items，它包含一个将显示为行的数组，另一个是可以调用以添加另一行的命令。

此处的 ObservableCollection 具有在行更改时告诉绑定引擎的方法，因此您不必费心自己更新网格。

```
 public partial class MainWindow : Window
    {
        public ObservableCollection<Item> Items
        {
            get { return (ObservableCollection<Item>)GetValue(ItemsProperty); }
            set { SetValue(ItemsProperty, value); }
        }
        public static readonly DependencyProperty ItemsProperty = DependencyProperty.Register("Items", typeof(ObservableCollection<Item>), typeof(MainWindow), new PropertyMetadata(null));

        public SimpleCommand AddCommand
        {
            get { return (SimpleCommand)GetValue(AddCommandProperty); }
            set { SetValue(AddCommandProperty, value); }
        }
        public static readonly DependencyProperty AddCommandProperty = DependencyProperty.Register("AddCommand", typeof(SimpleCommand), typeof(MainWindow), new PropertyMetadata(null));

        public MainWindow()
        {
            InitializeComponent();
            Items = new ObservableCollection<Item>();
            AddCommand = new SimpleCommand(para =>
            {
                string nextNumber = Items.Count.ToString();
                Items.Add(new Item() { Field1 = nextNumber, Field2 = nextNumber, Field3 = nextNumber });
            });
        }
    } 
```

Item 类，这只是一个非常简单的类，它具有与您的数据网格匹配的 3 个属性，field1、2 和 3 这里的依赖属性也意味着您不必在数据更改时自己更新网格。

```
public class Item : DependencyObject
{
    public string Field1
    {
        get { return (string)GetValue(Field1Property); }
        set { SetValue(Field1Property, value); }
    }
    public static readonly DependencyProperty Field1Property = DependencyProperty.Register("Field1", typeof(string), typeof(Item), new PropertyMetadata(null));

    public string Field2
    {
        get { return (string)GetValue(Field2Property); }
        set { SetValue(Field2Property, value); }
    }
    public static readonly DependencyProperty Field2Property = DependencyProperty.Register("Field2", typeof(string), typeof(Item), new PropertyMetadata(null));

    public string Field3
    {
        get { return (string)GetValue(Field3Property); }
        set { SetValue(Field3Property, value); }
    }
    public static readonly DependencyProperty Field3Property = DependencyProperty.Register("Field3", typeof(string), typeof(Item), new PropertyMetadata(null));
} 
```

最后是命令类，它可以在您的所有项目中反复重用，以将某些内容链接到后面的代码。

```
public class SimpleCommand : DependencyObject, ICommand
{
    readonly Action<object> _execute;
    readonly Func<object, bool> _canExecute;
    public event EventHandler CanExecuteChanged;

    public SimpleCommand(Action<object> execute, Func<object, bool> canExecute = null)
    {
        _canExecute = canExecute == null ? parmeter => { return true; } : canExecute;
        _execute = execute;
    }
    public virtual void Execute(object parameter)
    {
        _execute(parameter);
    }
    public virtual bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }
} 
```

# php - 简单的php程序不起作用

> ID：15427339
> 
> 赞同：1
> 
> 时间：2013-03-15T08:00:02.490
> 
> 标签：php

该复选框无法正常工作。它有 3 个复选框。当我选择所有三个复选框时，我没有收到任何错误。但是当我选择 1 或 2 复选框时，我收到如下错误：

**注意：未定义的索引：第 16 行 C:\wamp\www\test\secpage.php 中的 chke**

```
<html>
<body>
<table>
    <form method="post" action="secpage.php">
        <tr>
            <td colspan="2"><center><h4>Registartion Form</h4></center></td>
        </tr>

        <tr>
            <td>Username : </td>
            <td><input type="text" name="txtname" value=""/></td>
        </tr>

        <tr>
            <td>Password : </td>
            <td><input type="password" name="txtpass" vale=""/></td>
        </tr>

        <tr>
            <td>Email : </td>
            <td><input typ="text" name="txtemail" value=""/></td>
        </tr>

        <tr>
            <td>Address : </td>
            <td><textarea name="add" /></textarea></td>
        </tr> 

        <tr>
            <td>Subjects : </td>
            <td><input type="checkbox" name="chkm" value="Maths"</td>Maths
            <td><input type="checkbox" name="chks" value="Science"</td>Science
            <td><input type="checkbox" name="chke" value="English"</td>English 
        </tr>

        <tr>
            <td>Gender : </td>
            <td><input type="radio" name="gen" value="Male"/>Male
                <input type="radio" name="gen" value="Female"/>Female
             </td>
         </tr>

         <tr>
            <td colspan="2"><center><input type="submit" value="Submit"/></center></td>
         </tr>

</body>
</html> 
```

**这是php页面：**

```
<html>
<body>
<?php
    $uname=$_POST["txtname"];
    $pass=$_POST["txtpass"];
    $email=$_POST["txtemail"];
    $add=$_POST["add"];
    $subm=$_POST["chkm"];
    $subs=$_POST["chks"];
    $sube=$_POST["chke"];   
    $gen=$_POST["gen"];
?>

<table>
<tr>
    <td>Username : </td>
    <td><?php echo $uname; ?></td>
</tr>

<tr>
    <td>Password : </td>
    <td><?php echo $pass; ?></td>
</tr>

<tr>
    <td>Email : </td>
    <td><?php echo $email; ?></td>
</tr>

<tr>
     <td>Address : </td>
     <td><?php echo $add; ?></td>
</tr>

<tr>
    <td>Subject Selected : </td>
    <td><?php echo $subm." ".$subs." ".$sube; ?></td>
</tr>

<tr>
    <td>Gender : </td>
    <td><?php echo $gen ?></td>
</tr>

</table>
</body>
</html> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:02:47.747

你忘记关闭`checkbox.`

而且，如果您在未选中复选框的情况下发布表单，那么它会给您带来错误，就像您现在得到的一样。

您可以使用`@`忽略此错误，但这不是最佳做法。

**还**

```
if(isset($_POST["chkm"]))
{
  $subm=$_POST["chkm"];
} 
```

您可以`if`使用上述条件检查是否设置了值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:13:07.860

在您的 html 中，您将要为每个复选框设置相同的名称

```
<td><input type="checkbox" name="chk[]" value="Maths"</td>Maths
<td><input type="checkbox" name="chk[]" value="Science"</td>Science
<td><input type="checkbox" name="chk[]" value="English"</td>English 
```

然后，在您的 php 文件中，您可以执行此操作

```
$checkbox = $_POST['chk']; 
```

$checkbox 现在将是每个选中的复选框的数组。

类似的问题在这里 [PHP 和 HTML Checkboxes using POST](https://stackoverflow.com/questions/5145252/php-and-html-checkboxes-using-post)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:02:06.357

未选中的复选框不会在帖子中发送其值。所以`$_POST["chke"]`实际上并不存在。在从帖子中获取价值之前，您应该检查是否存在。

```
if(isset($_POST["chke"]))
  $sube = $_POST["chke"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:02:44.347

您的输入复选框标签不完整。因此 PHP 无法读取您的帖子值。

此外，如果未“选中”，则不会发送 POST 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T08:06:38.357

类似以下内容将解决您的`undefined index`错误：

```
<?php
  $uname = array_key_exists("txtname", $_POST)  ? $_POST["txtname"]  : NULL;
  $pass  = array_key_exists("txtpass", $_POST)  ? $_POST["txtpass"]  : NULL;
  $email = array_key_exists("txtemail", $_POST) ? $_POST["txtemail"] : NULL;
  $add   = array_key_exists("add", $_POST)      ? $_POST["add"]      : NULL;
  $subm  = array_key_exists("subm", $_POST)     ? $_POST["subm"]     : NULL;
  $subs  = array_key_exists("subs", $_POST)     ? $_POST["subs"]     : NULL;
  $sube  = array_key_exists("sube", $_POST)     ? $_POST["sube"]     : NULL;
  $gen   = array_key_exists("gen", $_POST)      ? $_POST["get"]      : NULL;
?> 
```

但是，通常最好创建一个函数来为您处理这个问题：

```
<?php

  function get_expected_post( $expected = array() ){
    $ret = (object) NULL;
    foreach ( $expected as $key ) {
      $ret->{$key} = array_key_exists($key, $_POST) ? $_POST[$key] : NULL;
    }
    return $ret;
  }

  $post = get_expected_post(array(
    'txtname', 
    'txtpass',
    'txtemail', 
    'add',
    'subm',
    'subs',
    'sube',
    'get'
  ))

?> 
```

这样，您可以更轻松地扩展表单中的项目，并且无论何时访问以下内容，您都可以确定它的存在——因此不会出错：

```
<?php echo $post->subm; ?> 
```

如果您希望将帖子名称转换为脚本中的不同名称，则可以扩展上述内容。另外，您还可以添加额外的安全性，例如解析期望值的值等等。

# wpf - 带有包含的 WPF 组合框文本搜索

> ID：15427341
> 
> 赞同：6
> 
> 时间：2013-03-15T08:00:18.533
> 
> 标签：wpf, search, combobox

`contains`我如何使用而不是实现我的 Combobox TextSearch`StartsWith`

```
<rf:ComboBox Grid.Row="1"
                         Grid.Column="5"
                         Width="200"
                         ItemsSource="{Binding Source={StaticResource AccountProvider}}"
                         DisplayMemberPath="Description"
                         SelectedValuePath="IndRekId"
                         IsEmptyItemVisible="True"
                         SelectedValue="{Binding Id, UpdateSourceTrigger=PropertyChanged}"
                         IsTextSearchEnabled="True"
                         TextSearch.TextPath="Description"
                         IsEditable="True"/> 
```

搜索功能有效，但我需要匹配子字符串

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-07-07T14:27:21.917

这里我有一个 MVVM 框架的例子。

我的 xml 文件：

```
<ComboBox Name="cmbContains" IsEditable="True" IsTextSearchEnabled="false" ItemsSource="{Binding pData}"  DisplayMemberPath="wTitle" Text="{Binding SearchText ,Mode=TwoWay}"  >
  <ComboBox.Triggers>
      <EventTrigger RoutedEvent="TextBoxBase.TextChanged">
          <BeginStoryboard>
              <Storyboard>
                  <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsDropDownOpen">
                      <DiscreteBooleanKeyFrame Value="True" KeyTime="0:0:0"/>
                  </BooleanAnimationUsingKeyFrames>
              </Storyboard>
          </BeginStoryboard>
      </EventTrigger>
  </ComboBox.Triggers>
</ComboBox> 
```

我的cs文件：

```
//ItemsSource - pData
//There is a string attribute - wTitle included in the fooClass (DisplayMemberPath)
private ObservableCollection<fooClass> __pData;
public ObservableCollection<fooClass> pData {
    get { return __pData; }
    set { Set(() => pData, ref __pData, value);
        RaisePropertyChanged("pData");
    }
}

private string _SearchText;
public string SearchText {
    get { return this._SearchText; }
    set {
        this._SearchText = value;
        RaisePropertyChanged("SearchText");

        //Update your ItemsSource here with Linq
        pData = new ObservableCollection<fooClass>{pData.ToList().Where(.....)};
    }
} 
```

您可以看到可编辑的组合框正在绑定到字符串 (SearchText) 一旦出现 TextChanged 事件，就会显示下拉菜单，并且双向绑定会更新值。在进入 set{} 时，cs 文件中的 ItemsSource 发生了变化；句法。

[https://gist.github.com/tonywump/82e66abaf71f715c4bd45a82fce14d80](https://gist.github.com/tonywump/82e66abaf71f715c4bd45a82fce14d80)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-14T08:19:44.190

此示例看起来像“TextSearch”

在 XAML 文件中，您应该只向组合框“TextContainSearch.Text”添加一个属性：

```
<ComboBox ItemsSource="{Binding Model.formListIntDeviceNumbers}" SelectedItem="{Binding Path=Model.selectedDeviceNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="DeviceNumber" IsEditable="True" c:TextContainSearch.Text="DeviceNumber"> 
```

我们应该在 XAML 文件的头文件中添加 using：

```
xmlns:c="clr-namespace:Adaptive.Controls.Extension" 
```

*.cs 文件中的 C# 代码：

```
using System;
using System.Windows;
using System.Windows.Controls;
namespace Adaptive.Controls.Extension
{
 public sealed class TextContainSearch : DependencyObject {
        public static void SetText(DependencyObject element, string text) {
            var controlSearch = element as Control;
            if (controlSearch != null)
                controlSearch.KeyUp += (sender, e) =>
                {
                    if (sender is ComboBox){
                        var control = sender as ComboBox;
                        control.IsDropDownOpen = true;
                        var oldText = control.Text;
                        foreach(var itemFromSource in control.ItemsSource){
                            if (itemFromSource != null)
                            {
                                Object simpleType = itemFromSource.GetType().GetProperty(text).GetValue(itemFromSource, null);
                                String propertOfList = simpleType as string;
                                if (!string.IsNullOrEmpty(propertOfList) && propertOfList.Contains(control.Text))
                                {
                                    control.SelectedItem = itemFromSource;
                                    control.Items.MoveCurrentTo(itemFromSource);
                                    break;
                                }
                            }
                        }
                        control.Text = oldText;
                        TextBox txt = control.Template.FindName("PART_EditableTextBox", control) as TextBox;
                        if (txt != null)
                        {
                            txt.Select(txt.Text.Length, 0);
                        }
                    }
                };
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-15T08:24:55.380

尝试这个：

```
 <ComboBox Padding="3,5" MinWidth="150" SelectedItem="{Binding NewBoxRequest}"
 ItemsSource="{Binding Requests}" DisplayMemberPath="SN" IsEditable="True"
 StaysOpenOnEdit="True"
 Text="{Binding SnFilter,UpdateSourceTrigger=PropertyChanged}">
 </ComboBox> 
```

查看模型：

```
 private string snFilter;

    public string SnFilter
    {
        get { return snFilter; }
        set
        {
            snFilter = value;
            RaisePropertyChanged();
            RaisePropertyChanged(nameof(Requests));
        }
    }
    private List<Request> requests;

    public List<Request> Requests
    {
        get => string.IsNullOrEmpty(SnFilter) || requests.Any(r => r.SN == SnFilter)
            ? requests
            : requests.Where(r => r.SN.Contains(SnFilter)).ToList();
        set
        {
            requests = value;
            RaisePropertyChanged();
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-17T10:16:36.650

没有办法用 string.Contains() 替换 string.StartsWith()。您必须编写自定义 ComboBox。

本文可能对您有所帮助：http: [//www.codeproject.com/Tips/631196/ComboBox-with-Suggest-Ability-based-on-Substring-S](http://www.codeproject.com/Tips/631196/ComboBox-with-Suggest-Ability-based-on-Substring-S)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-27T22:46:20.300

我无法让“Set”语法在我的 C# 系统中工作，所以这里是 Wu 上面答案的一个小起飞（这是在自定义控件中）：

```
 <ComboBox IsEditable="True" 
      IsTextSearchEnabled="false" 
      ItemsSource="{Binding pData, RelativeSource = {RelativeSource TemplatedParent}}"  
      DisplayMemberPath="description" 
      Text="{Binding SearchText , RelativeSource = {RelativeSource TemplatedParent}, Mode=TwoWay}"  >
     <ComboBox.Triggers>
                                    <EventTrigger RoutedEvent="TextBoxBase.TextChanged">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="IsDropDownOpen">
                                                    <DiscreteBooleanKeyFrame Value="True" KeyTime="0:0:0"/>
                                                </BooleanAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </ComboBox.Triggers>
                            </ComboBox> 
```

在自定义控件中：

```
private async void _Loaded(object sender, RoutedEventArgs e)
        {
            var n = await InitializeLabTests;

            allTests = new ObservableCollection<CommonProcedure>(n);
            pData = new ObservableCollection<CommonProcedure>(n);
        }

//ItemsSource - pData
        //There is a string attribute - wTitle included in the fooClass (DisplayMemberPath)
        private ObservableCollection<CommonProcedure> __pData;
        public ObservableCollection<CommonProcedure> pData
        {
            get { return __pData; }
            set { __pData = value; RaisePropertyChanged(); }
        }

        private string _SearchText;
        public string SearchText
        {
            get { return _SearchText; }
            set
            {
                _SearchText = value; RaisePropertyChanged();

                //Update your ItemsSource here with Linq
                pData = new ObservableCollection<CommonProcedure>
               (
                    allTests.Where(q => q.description.Contains(SearchText))
               );
            }
        } 
```

唯一显着的区别在于 SearchText 设置器。

# javascript - Safari 和 IE 面临“字段必须是日期”问题

> ID：15427343
> 
> 赞同：2
> 
> 时间：2013-03-15T08:00:30.057
> 
> 标签：javascript, jquery, asp.net-mvc-3, asp.net-mvc-4, safari

我正在使用强类型 DateTime？我的 ViewModels 中的属性在我的项目中，并应用了关于不显眼验证的自定义验证属性。在自定义属性之前它一切正常，但现在我在从 safari 浏览我的应用程序时得到“完成日期字段必须是日期”。这是 safari 唯一的问题我已经在 ie、chrome 和 ff 中测试了我的应用程序，但没有发现任何问题。特别是在遵循日期时间的格式参数之后。

```
@Html.TextBoxFor(m => m.ProjectCompletionDate, "{0:d}", 
    new { @class = "input-large", size = "16",id="inputDatepicker2" }) 
```

我的观点是强类型的..我不知道下一步该看什么...请帮助

oki 这不仅是 safari，IE 也在做同样的事情...... ff 和 chrome 工作得很好。我实际上正在使用引导日期选择器扩展。这看起来像……

```
 <div class="date" id="datepicker1" data-date-format="M/d/yyyy">                
            Html.TextBoxFor(m => m.ProjectCommencementDate,"{0:d}", new { @class = "input-large", size = "16",id="inputDatepicker1" })
            <span class="add-on"><i class="icon-th"></i></span>                                
            Html.ValidationMessageFor(m => m.ProjectCommencementDate)
        </div>

    $('#datepicker1').datepicker({
        autoclose:true
    }).on('changeDate', function (ev) {                    
         //$('#inputDatepicker2').focus();          
    }); 
```

我遇到了这个问题链接

[http://connect.microsoft.com/VisualStudio/feedback/details/705643/a-data-val-date-attribute-is-generated-for-time-fields-in-asp-net-mvc-4](http://connect.microsoft.com/VisualStudio/feedback/details/705643/a-data-val-date-attribute-is-generated-for-time-fields-in-asp-net-mvc-4)

这更令人震惊..仍然希望能找到出路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:04:45.340

您正在研究哪个 HTML 标准？尝试清楚地将 HTML5 设置为文档头，并将您的字段的输入类型设置为日期。

# android - 如何将我的电脑模拟为 USB 主机？

> ID：15427344
> 
> 赞同：2
> 
> 时间：2013-03-15T08:00:32.047
> 
> 标签：android, usb

有没有可能使用 android usb api 将我的电脑模拟为 usb 主机和我的 android 设备。如果是这样，如何设置初始配置？请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:42:44.573

如果您试图让您的手机将您的 PC 视为`UsbAccessory`，它必须通过 AOA（Android 开放式附件）协议进行通信。

在 PC 上，您必须检测并确定您的手机是哪个设备。然后通过它的接口；通常，附件是 0​​xFF 类和 0xFF 子类。

一旦确定了这一点，就必须确定它的读取和写入端点。通常，附件接口只有一个读取和写入，它们都是批量传输（0x02）类型。

最后，使用 write 端点，向手机发送特定的控制请求数据包以将其激活为“附件模式”。这些数据包都在这里概述：

[http://source.android.com/tech/accessories/aoap/aoa.html](http://source.android.com/tech/accessories/aoap/aoa.html)

发送后，手机将能够将您的 PC 视为一个`UsbAccessory`对象（在 Android API 中）。您可以枚举连接的附件并通过 a`FileInputStream`和开始通信`FileOutputStream`，所有这些都记录在此：

[http://developer.android.com/guide/topics/connectivity/usb/accessory.html](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)

# java - 该类的消息文件夹不是来自“页面”和“组件”包

> ID：15427346
> 
> 赞同：1
> 
> 时间：2013-03-15T08:00:47.843
> 
> 标签：java, properties, tapestry

在 Tapestry 中，`.properties`带有本地化消息的文件位于`page`和`component`应用程序消息目录中。我有类不是来自`pages`和`components`包，我想以通常的方式在其中注入消息：

```
@Inject
private Messages messages; 
```

稍后获得本地化消息

```
String msg = messages.get("message-key"); 
```

我试图将`.properties`文件定位到相应的文件夹（即，对于 class `src/main/java/nonPageOrComponentPackage/Foo.java`to `scr/main/resources/nonPageOrComponentPackage/Foo.properties`），因为它是为`page`and `component`classes 完成的，但它不起作用。

我需要在某处指定此`.properties`文件的路径吗？我试着用方法来做

```
public void contributeValidationMessagesSource(@NotNull Configuration<String> configuration) {
  configuration.add("/scr/main/resources/nonPageOrComponentPackage/Foo.properties");
} 
```

在`AppModule`，但它也没有工作。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:08:25.163

消息检索机制设计为仅在页面/组件内部使用。您有应用程序消息目录，它可以被一些基本页面/组件目录覆盖，然后被最终页面/组件目录覆盖。所有这些仅适用于页面和组件。

如果您的类不是页面或组件，您只能使用`@Inject`注释注入应用程序消息目录。您还可以为`ComponentMessageSource`服务添加一些额外的消息包到应用程序目录。

```
@Contribute(ComponentMessagesSource.class)
public void contributeComponentMessagesSource(@Value("context:WEB-INF/mail") Resource mailMessages, OrderedConfiguration<Resource> configuration) {
  configuration.add("mail", mailMessages);
} 
```

但是您应该了解，此消息包将可用于所有页面/组件和服务。

访问某些特定消息包的另一种方法是使用 MessageImpl。但这种方式很棘手。它使用挂毯内部类。

```
messages = MessagesImpl.forClass(Foo.class); 
```

# java - 将字符串转换为日期 - 无法解析的日期：“03/26/2012”

> ID：15427348
> 
> 赞同：0
> 
> 时间：2013-03-15T08:01:02.247
> 
> 标签：java, jasper-reports, ireport

我正在尝试使用 Jasper Reports 的 Java 程序。当我发现“日期”采用字符串格式并因此被排序时，报告的（据说）简单的“按降序排列日期”任务开始变得更加复杂，尽管是以错误的方式进行排序. 例子：

*   2012 年 3 月 26 日
*   2012 年 3 月 26 日
*   2012 年 8 月 11 日
*   2012 年 8 月 26 日
*   2011 年 10 月 26 日

我只能猜测 10/26/11 只是因为前面的 10 而放在底部。

我使用 iReport 3.0.0 查看了 Jasper 报告，发现以下内容：

*   字段下的相关日期（名称：DTEEFFEC）设置为字符串。
*   textField 也设置为 String。

这不会产生任何错误，只会使按降序排列“日期”变得困难，如果不是不可能的话。

所以我做了以下事情：

*   保留 DTEEFFEC 原样（字符串）。
*   将 textField 从 Java.Lang.String 更改为 Java.Util.Date
*   在新字段表达式中添加了以下内容：

    新的 SimpleDateFormat("MM-dd-yyyy").parse($F{DTEEFFEC}.toString())

在对我的问题进行一些研究后，我发现了那段代码。很多回应都是“有效”的，但对我来说并非如此。

```
Caused by: java.text.ParseException: Unparseable date: "03/26/2012" 
```

这就是 Java 程序返回的内容。我尝试过修改字段和 textField（在字符串或日期值之间交替），但它完全给了我其他错误。

我可以帮忙吗？

谢谢。

其他信息：我正在使用 iReports 3.0.0 来修改 JRXML 文件，以及用于 Java 程序的 Eclipse。如果相信 Eclipse 下的引用库，我使用的是 JasperReports 3.5.2。整个东西在 Windows 7 上运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T08:06:32.997

看看你的代码：

```
new SimpleDateFormat("MM-dd-yyyy").parse(...) 
```

这显然是在期待“MM-dd-yyyy”形式的东西，例如“03-26-2012”。

现在查看您的*实际*数据：“03/26/2012”。（显然，即使您早期的样本是两位数的年份......）

那是斜线，不是破折号。所以你需要适当地改变你的模式：

```
new SimpleDateFormat("MM/dd/yyyy").parse(...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:07:46.103

`new SimpleDateFormat("MM-dd-yyyy")`改成_`new SimpleDateFormat("mm/dd/yyyy")`

因此解析器可以正确解析您的日期输入

# oracle - http://127.0.0.1:8080/apex/f?p=4950 64 位加载问题

> ID：15427350
> 
> 赞同：0
> 
> 时间：2013-03-15T08:01:11.183
> 
> 标签：oracle, oracle11g, oracle-apex, oracle11gr2

我使用的是 64 位笔记本电脑，但我似乎遇到了无法加载 oracle“入门”服务的常见问题 - 这是 11g 速成版的一部分。

它在端口 8080 上，我尝试了一些方法，例如重新安装。SP2-0640 未连接。

OracleXEClrAgent 未启动。

我浏览过oracle论坛似乎找不到答案。遇到此类问题或知道如何解决此问题的任何人都可以提供帮助。

平台：Windows x32 的 WINDOWS 7 Oracle Database Express Edition 11g 第 2 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:12:46.710

Windows 7 64 位不支持 Oracle 11G Express 版本。

适用于 Windows x32 的 Oracle Database Express Edition 11g 第 2 版 - 不适用于 Windows x64

它在甲骨文网站上说。

[http://www.oracle.com/technetwork/products/express-edition/downloads/index.html](http://www.oracle.com/technetwork/products/express-edition/downloads/index.html)

# facebook-graph-api - Facebook Graph api - 发布给朋友的时间线问题

> ID：15427355
> 
> 赞同：1
> 
> 时间：2013-03-15T08:01:22.657
> 
> 标签：facebook-graph-api

当我尝试使用 facebook graph api 发布到我的朋友时间轴时，我得到了

{"error":{"message":"(#200) 此应用程序禁止向其他用户发布动态消息","type":"OAuthException","code":200}}

在创建 access_token 时启用某些东西会解决这个问题吗？

如果是这样，我应该启用什么。

谢谢，

帕德玛帕萨德 G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:16:08.577

此功能已于 2 月 6 日删除：http: [//developers.facebook.com/roadmap/completed-changes/](http://developers.facebook.com/roadmap/completed-changes/)

看看这里怎么做[Facebook 应用程序：fb.api 方法会在朋友的墙上张贴吗？](https://stackoverflow.com/questions/15415701/facebook-app-will-fb-api-method-post-on-friends-wall)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T05:45:11.220

是的，这是几个月前宣布的，并于 2 月 6 日生效 - [http://developers.facebook.com/roadmap/completed-changes](http://developers.facebook.com/roadmap/completed-changes)

```
Removing ability to post to friends walls via Graph API
We will remove the ability to post to a user's friends' walls via the Graph API. Specifically, posts against [user_id]/feed where [user_id] is different from the session user, or stream.publish calls where the target_id user is different from the session user, will fail. If you want to allow people to post to their friends' timelines, invoke the feed dialog. Stories that include friends via user mentions tagging or action tagging will show up on the friend’s timeline (assuming the friend approves the tag). For more info, see this blog post. 
```

解决方法是使用 Feed Dialog，它允许用户发布相同的内容，但选择他们想要发布的用户。

# ios - 如何在 iOS 中播放 .m3u8 或 .ts 文件？

> ID：15427360
> 
> 赞同：3
> 
> 时间：2013-03-15T08:01:38.313
> 
> 标签：ios, objective-c, cocoa-touch, mpmovieplayercontroller, http-live-streaming

我已经`iOS`在`xCode 4.5.1`.

此应用程序的主要目的是播放`.m3u8`视频文件。

我在本地资源包中添加了一个包含所有段（.ts）的 .m3u8 文件。那么，如何在 iPhone 本地使用`MPMoviePlayerController`or播放这个文件`UIWebView`呢？

而且，从服务器下载后我们可以修改这个文件吗？

如果可能，那么该怎么做？

请告诉我，有谁知道...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:46:34.830

只有通过 HTTP 提供 HLS 内容，您才能播放它。所以你应该在一个线程中运行一个简单的 http 服务器，然后将本地 URL 传递给`MPMoviePlayerController`. URL 看起来像这样`http://localhost:8080/file.m3u8`，视频播放器将从您在另一个线程中运行的 http 服务器读取流。

这是一个关于在 iOS 上运行网络服务器的问题，可能会对您有所帮助：[iPhone HTTP Server](https://stackoverflow.com/questions/2485533/iphone-http-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-29T14:36:23.797

您可以在本地服务器上托管 .m3u8 文件，例如 GCDWebServer。只需创建它的实例并在该服务器中传递 .m3u8 文件的路径。然后使用服务器生成的本地主机路径并将其传递给您的播放器它会根据 .m3u8 文件中写入的内容自动获取密钥和 .ts 文件。

# python - 如何使用上下文管理器避免在python中使用__del__？

> ID：15427361
> 
> 赞同：13
> 
> 时间：2013-03-15T08:01:38.987
> 
> 标签：python, contextmanager

众所周知，python`__del__`方法不应该用于清理重要的东西，因为不能保证调用此方法。另一种方法是使用上下文管理器，如几个线程中所述。

但是我不太明白如何重写一个类来使用上下文管理器。详细地说，我有一个简单的（非工作）示例，其中包装类打开和关闭设备，并且在类的实例超出其范围（异常等）的任何情况下都应关闭设备。

第一个文件`mydevice.py`是用于打开和关闭设备的标准包装类：

```
class MyWrapper(object):
    def __init__(self, device):
        self.device = device

    def open(self):
        self.device.open()

    def close(self):
        self.device.close()

    def __del__(self):
        self.close() 
```

这个类被另一个类使用`myclass.py`：

```
import mydevice

class MyClass(object):

    def __init__(self, device):

        # calls open in mydevice
        self.mydevice = mydevice.MyWrapper(device)
        self.mydevice.open()

    def processing(self, value):
        if not value:
            self.mydevice.close()
        else:
            something_else() 
```

我的问题：当我在`mydevice.py`with`__enter__`和`__exit__`方法中实现上下文管理器时，如何处理这个类`myclass.py`？我需要做类似的事情

```
def __init__(self, device):
    with mydevice.MyWrapper(device):
        ??? 
```

但是如何处理呢？也许我忽略了一些重要的事情？或者我可以只在函数中使用上下文管理器，而不是作为类范围内的变量吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T08:37:48.913

我建议使用 contextlib.contextmanager 类，而不是编写实现`__enter__`和`__exit__`. 以下是它的工作原理：

```
class MyWrapper(object):
    def __init__(self, device):
        self.device = device

    def open(self):
        self.device.open()

    def close(self):
        self.device.close()

    # I assume your device has a blink command
    def blink(self):
        # do something useful with self.device
        self.device.send_command(CMD_BLINK, 100)

    # there is no __del__ method, as long as you conscientiously use the wrapper

import contextlib

@contextlib.contextmanager
def open_device(device):
    wrapper_object = MyWrapper(device)
    wrapper_object.open()
    try:
        yield wrapper_object
    finally:
        wrapper_object.close()
    return

with open_device(device) as wrapper_object:
     # do something useful with wrapper_object
     wrapper_object.blink() 
```

以 at 符号开头的行称为*装饰器*。它修改下一行的函数声明。

当`with`遇到该语句时，该`open_device()`函数将执行到该`yield`语句。语句中的值在作为可选子句`yield`目标的变量中返回，在本例中为. 此后，您可以像使用普通 Python 对象一样使用该值。*当控制通过任何*路径从块中退出时——包括抛出异常——函数的剩余部分将执行。`as``wrapper_object`*`open_device`*

 *我不确定（a）您的包装类是否正在向较低级别的 API 添加功能，或者（b）是否只是您要包含的内容，以便您可以拥有一个上下文管理器。如果是 (b)，那么您可能完全可以不用它，因为 contextlib 会为您处理这些。以下是您的代码可能的样子：

```
import contextlib

@contextlib.contextmanager
def open_device(device):
    device.open()
    try:
        yield device
    finally:
        device.close()
    return

with open_device(device) as device:
     # do something useful with device
     device.send_command(CMD_BLINK, 100) 
```

99% 的上下文管理器使用可以通过 contextlib.contextmanager 完成。它是一个非常有用的 API 类（如果你关心这些事情，它的实现方式也是对底层 Python 管道的创造性使用）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T08:21:15.903

问题不在于你在课堂上使用它，而在于你想以一种“开放式”的方式离开设备：你打开它，然后让它保持打开状态。上下文管理器提供了一种打开某些资源并以相对较短、包含的方式使用它的方法，确保它在最后关闭。您现有的代码已经不安全，因为如果发生崩溃，您无法保证`__del__`会调用您的代码，因此设备可能处于打开状态。

在不确切知道设备是什么以及它是如何工作的情况下，很难说更多，但基本的想法是，如果可能的话，最好只在需要使用时才打开设备，然后立即关闭。所以你`processing`可能需要改变，更像是：

```
def processing(self, value):
     with self.device:
        if value:
            something_else() 
```

如果`self.device`是一个适当编写的上下文管理器，它应该`__enter__`在`__exit__`. 这确保了设备将在`with`块的末尾关闭。

当然，对于某些类型的资源，这是不可能的（例如，因为打开和关闭设备会丢失重要状态，或者是一个缓慢的操作）。如果这是你的情况，你就会被困在使用它的陷阱中`__del__`并生活在它的陷阱中。基本问题是没有万无一失的方法可以让设备“开放”，但即使在某些异常程序故障的情况下仍能保证将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:21:52.143

我不太确定你在问什么。上下文管理器实例可以是类成员 - 您可以在任意多个`with`子句中重复使用它，并且每次都会调用`__enter__()`and方法。`__exit__()`

因此，一旦您将这些方法添加到 中`MyWrapper`，您就可以像上面那样构建它`MyClass`。然后你会做类似的事情：

```
def my_method(self):
    with self.mydevice:
        # Do stuff here 
```

这将调用您在构造函数中创建的实例的`__enter__()`and方法。`__exit__()`

但是，该`with`子句只能跨越一个函数 - 如果您`with`在构造函数中使用该子句，那么它将`__exit__()`在退出构造函数之前调用。如果您想这样做，唯一的方法是使用`__del__()`，正如您已经提到的那样，它有其自身的问题。您可以在需要时打开和关闭设备，`with`但我不知道这是否满足您的要求。*

# git - 是否有与 gits no-fast-forward 合并的等价物？

> ID：15427370
> 
> 赞同：8
> 
> 时间：2013-03-15T08:02:13.490
> 
> 标签：git, mercurial, merge

与 gits no-fast-forward merge 等效的 mercurial 是什么（如果可以进行快进）？

*编辑*

假设您在 master/default 的头部/提示处有一个分支/书签：

```
 o feature
 |
 o
 |
 o master/default
 |
 ... 
```

一个简单的快进合并将导致：

```
 o feature/master/default
 |
 o
 |
 o
 |
 ... 
```

非快进合并看起来像：

```
 o merge commit - feature/master/default
 | \
 |  o     
 |  |
 |  o
 | /
 o
 |
 ... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T12:52:32.603

这取决于您如何提交功能分支。

如果该功能是在命名分支上开发的，那么您可以获得相当于无快进合并的效果。事实上，命名分支不能以任何其他方式合并。

```
hg update default
hg branch feature-1
...work...
hg commit -m "implemented feature on named branch"
hg update default
hg merge feature-1
hg commit -m "merged feature-1 to default" 
```

这将产生如下图：

```
o   merged feature-1 to default
|\
| o feature-1: implemented feature on named branch
|/
o
| 
```

这仅适用于命名分支（即使用[`hg branch`](http://www.selenic.com/hg/help/branch)命令创建的分支）。它不适用于匿名分支或书签。

您可能还对讨论该问题的 Mercurial 邮件列表上的[此线程](http://thread.gmane.org/gmane.comp.version-control.mercurial.general/33319/focus=33328) *（死链接）感兴趣。*

# javascript - 如果选中，如何调整此脚本以包含复选框检查

> ID：15427372
> 
> 赞同：0
> 
> 时间：2013-03-15T08:02:15.783
> 
> 标签：javascript, javascript-events

我是 javascript 的菜鸟。我在我的标签之间使用这个脚本，这将强制用户在点击提交按钮之前`head`滚动`textarea`

```
<script language="JavaScript">
<!--

function textareaAtEnd(textareaObj)
{
    return ((textareaObj.scrollTop + textareaObj.offsetHeight) > textareaObj.scrollHeight);
}

function formValidation(formObj)
{
    if (textareaAtEnd(formObj.licenseAgreement))
    {
        return true;

    } else {
        alert ("Please scroll to the end to move on.")
        return false;
    }

}

// -->
</script> 
```

我的`<form>`样子是这样的：

```
<form action="step2.php" method="post" onSubmit="return formValidation(this);">
    <textarea name="licenseAgreement" rows="20" cols="90">Very long license agreement text</textarea>
    <br />
    <input name="agree" type="checkbox" value="yes" /> I have read and agreed the above license agreement
    <br />
    <input type="submit" value="CONTINUE">
</form> 
```

如何调整此 javascript 以检查是否`<input name="agree" type="checkbox" value="yes" />`已检查以及是否不向用户回显消息？我是个菜鸟，这是我第一次使用 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:05:01.133

干得好：

```
if (document.getElementById('agree').checked == false) { 
    alert('Check the agree box dummy!');
} 
```

使用 ID 是一种最佳实践，我始终建议将其用于客户端代码。

因此，您可以将验证功能更改为：

```
function formValidation() {
    if (textareaAtEnd(document.getElementById('licenseAgreement')) == false) {
        alert ("Please scroll to the end to move on.")
        return false;
    } 
    else if (document.getElementById('agree').checked == false) {
        alert('Check the agree box dummy!');
        return false;
    }
    else {
        return true;
    }
} 
```

还要确保在`id="agree"`您的`<input type="checkbox"`和`id="licenseAgreement"`您的文本区域中添加一个...

所以它应该是这样的：

```
<input name="agree" id="agree" type="checkbox" value="yes" />

...

<textarea name="licenseAgreement" id="licenseAgreement" rows="20" cols="90"> 
```

而你的表单标签，你可以删除`this`参数：

```
onSubmit="return formValidation();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:06:09.370

做

```
function formValidation(formObj) {
    if(!formObj.agree.checked) {
        alert ("Please agree to terms.")
        return false;
    } else if (textareaAtEnd(formObj.licenseAgreement)) {
        return true;
    } else {
        alert ("Please scroll to the end to move on.")
        return false;
    }

} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qc3UN/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:06:24.563

使用`checked`属性：

```
var checkbox = document.getElementsByName("agree")[0];

if(checkbox.checked) 
  alert("Check that"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:11:44.373

**代替**

```
<input name="agree" type="checkbox" value="yes" /> 
```

**和**

```
<input name="agree" id="agree" type="checkbox" value="yes" /> 
```

为复选框添加`id=agree`属性。

```
if(document.getElementById("agree").checked == false)
{
    alert("Checkbox is not checked , please select checkbox");
} 
```

# titanium - 在 Titanium 中从本机调用 JavaScript 函数

> ID：15427379
> 
> 赞同：1
> 
> 时间：2013-03-15T08:02:43.480
> 
> 标签：titanium, titanium-modules, titanium-proxy

如何从 Titanium 中的原生 Android 模块调用 JavaScript 函数。我想在应用程序视图中注册一个 JavaScript 函数来监听本机模块中的一些事件，并在该事件发生时从本机回调该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T23:36:58.190

Appcelerator 的 ModDevGuide 是学习如何执行此类操作的好地方。它适用于 iOS 和 Android：

[https://github.com/appcelerator/titanium_modules/tree/master/moddevguide/mobile](https://github.com/appcelerator/titanium_modules/tree/master/moddevguide/mobile)

“KrollDemoProxy”是您想要仔细查看的内容。

在 Android 上，原生端在这里： [https ://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/android/src/ti/moddevguide/KrollDemoProxy.java](https://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/android/src/ti/moddevguide/KrollDemoProxy.java)

在 iOS 上，原生端在这里： [https ://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/ios/Classes/TiModdevguideKrollDemoProxy.m](https://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/ios/Classes/TiModdevguideKrollDemoProxy.m)

这被 JavaScript 这样消耗，对于两个平台： [https ://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/android/example/demos/krollCallbacksAndEventsDemo.js](https://github.com/appcelerator/titanium_modules/blob/master/moddevguide/mobile/android/example/demos/krollCallbacksAndEventsDemo.js)

在这些文件中搜索“成功”一词，您将能够弄清楚它是如何将“成功”事件触发回 JavaScript 领域的。

希望这可以帮助。

# java - 进行 RSA 解密时出错

> ID：15427383
> 
> 赞同：1
> 
> 时间：2013-03-15T08:02:51.303
> 
> 标签：java, android, cryptography

加密`public_key.der`完美无瑕，但解密`public_key.der`却不行。`String`被解密的 base64_encoded是通过我的服务器`Java`生成的。`openssl``private_key.pem`

我收到 LogCat 错误：RSA 块的数据过多。我很确定情况并非如此，因为我的加密数据`private_key.pem`是文本“你好”。

这是我的MainActivity.class（应该和Java解密很相似）

```
public class Main extends Activity {

    // Decrypt tester

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String plainText = "hello";
        // Base64 Encoded
        String encryptedText = "SWfL6wpS87SsvByIfLO1W5Gg/gOMqtplNtqBrDELfQav0ipCy0BddHpTlmlgQO+6HRY2JWsw6hp5rlmmBJG722Ujc4Rm5MZr8BbKWMgX89rvmvUG/YeswTjHZsrzbx6k6krChM55dsJCU3JSXPMIcTTgRxVValgLeCfX1SwoOpNZ2m4WQAhX6NrSYwSXGLUHfrguQogTpU5wEcDQ0HR4vBlQO5fU8z2MwoP50Vs8f+4EysEwSy9ezsYHWDtW8M9t3EuF8Roq++/Y8GLASrYZxuAA0IPHGvR9Qufa04i7HlAAsDu9LQuOGUf35KkpFoCx0XyuA0qppccGdqHuK5IIoQ==";
        try {
            String encrypted = encrypt(getAssets().open("public_key.der"), plainText);
            Log.d("Encrypted", encrypted);
            // Returns a base64 encoded string.

            Log.d("TAG", "Decryption start");

            String decrypted = decrypt(getAssets().open("public_key.der"), encryptedText);
            Log.d("Decrypted", decrypted);
        } catch (Exception e) {
            Log.e("TEST", Log.getStackTraceString(e));
        }
    }

    public static String encrypt(InputStream stream, String plaintext) throws IOException, NoSuchAlgorithmException, InvalidKeySpecException,
            NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {

        byte[] encodedKey = new byte[stream.available()];
        stream.read(encodedKey);
        X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(encodedKey);
        KeyFactory kf = KeyFactory.getInstance("RSA");
        PublicKey pkPublic = kf.generatePublic(publicKeySpec);

        Cipher pkCipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
        pkCipher.init(Cipher.ENCRYPT_MODE, pkPublic);
        byte[] encryptedInByte = pkCipher.doFinal(plaintext.getBytes());

        String encryptedInString = new String(Base64Coder.encode(encryptedInByte));

        return encryptedInString;
    }

    public static String decrypt(InputStream stream, String encrypted) throws IOException, NoSuchAlgorithmException, InvalidKeySpecException,
            NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {

        byte[] encodedKey = new byte[stream.available()];
        stream.read(encodedKey);
        X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(encodedKey);
        KeyFactory kf = KeyFactory.getInstance("RSA");
        PublicKey pkPublic = kf.generatePublic(publicKeySpec);

        Cipher pkCipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
        pkCipher.init(Cipher.DECRYPT_MODE, pkPublic);
        byte[] decryptedInByte = pkCipher.doFinal(encrypted.getBytes());
        String decryptedInString = new String(Base64Coder.encode(decryptedInByte));
        return decryptedInString;
    }
} 
```

这是我的 Base64Decoder

```
public class Base64Coder {

    private static char[] map1 = new char[64];
    static {
        int i = 0;
        for (char c = 'A'; c <= 'Z'; c++)
            map1[i++] = c;
        for (char c = 'a'; c <= 'z'; c++)
            map1[i++] = c;
        for (char c = '0'; c <= '9'; c++)
            map1[i++] = c;
        map1[i++] = '+';
        map1[i++] = '/';
    }

    private static byte[] map2 = new byte[128];
    static {
        for (int i = 0; i < map2.length; i++)
            map2[i] = -1;
        for (int i = 0; i < 64; i++)
            map2[map1[i]] = (byte) i;
    }

    public static String encodeString(String s) {
        return new String(encode(s.getBytes()));
    }

    public static char[] encode(byte[] in) {
        return encode(in, in.length);
    }

    public static char[] encode(byte[] in, int iLen) {
        int oDataLen = (iLen * 4 + 2) / 3;
        int oLen = ((iLen + 2) / 3) * 4;
        char[] out = new char[oLen];
        int ip = 0;
        int op = 0;
        while (ip < iLen) {
            int i0 = in[ip++] & 0xff;
            int i1 = ip < iLen ? in[ip++] & 0xff : 0;
            int i2 = ip < iLen ? in[ip++] & 0xff : 0;
            int o0 = i0 >>> 2;
            int o1 = ((i0 & 3) << 4) | (i1 >>> 4);
            int o2 = ((i1 & 0xf) << 2) | (i2 >>> 6);
            int o3 = i2 & 0x3F;
            out[op++] = map1[o0];
            out[op++] = map1[o1];
            out[op] = op < oDataLen ? map1[o2] : '=';
            op++;
            out[op] = op < oDataLen ? map1[o3] : '=';
            op++;
        }
        return out;
    }

    public static String decodeString(String s) {
        return new String(decode(s));
    }

    public static byte[] decode(String s) {
        return decode(s.toCharArray());
    }

    public static byte[] decode(char[] in) {
        int iLen = in.length;
        if (iLen % 4 != 0) throw new IllegalArgumentException("Length of Base64 encoded input string is not a multiple of 4.");
        while (iLen > 0 && in[iLen - 1] == '=')
            iLen--;
        int oLen = (iLen * 3) / 4;
        byte[] out = new byte[oLen];
        int ip = 0;
        int op = 0;
        while (ip < iLen) {
            int i0 = in[ip++];
            int i1 = in[ip++];
            int i2 = ip < iLen ? in[ip++] : 'A';
            int i3 = ip < iLen ? in[ip++] : 'A';
            if (i0 > 127 || i1 > 127 || i2 > 127 || i3 > 127) throw new IllegalArgumentException("Illegal character in Base64 encoded data.");
            int b0 = map2[i0];
            int b1 = map2[i1];
            int b2 = map2[i2];
            int b3 = map2[i3];
            if (b0 < 0 || b1 < 0 || b2 < 0 || b3 < 0) throw new IllegalArgumentException("Illegal character in Base64 encoded data.");
            int o0 = (b0 << 2) | (b1 >>> 4);
            int o1 = ((b1 & 0xf) << 4) | (b2 >>> 2);
            int o2 = ((b2 & 3) << 6) | b3;
            out[op++] = (byte) o0;
            if (op < oLen) out[op++] = (byte) o1;
            if (op < oLen) out[op++] = (byte) o2;
        }
        return out;
    }
} 
```

这是 Logcat 的输出。第 82 行是`byte[] decryptedInByte = pkCipher.doFinal(encrypted.getBytes());`

```
03-15 01:02:23.855: E/TEST(16749): java.lang.ArrayIndexOutOfBoundsException: too much data for RSA block
03-15 01:02:23.855: E/TEST(16749):  at com.android.org.bouncycastle.jce.provider.JCERSACipher.engineDoFinal(JCERSACipher.java:457)
03-15 01:02:23.855: E/TEST(16749):  at javax.crypto.Cipher.doFinal(Cipher.java:1111)
03-15 01:02:23.855: E/TEST(16749):  at com.example.testing.app.Main.decrypt(Main.java:82)
03-15 01:02:23.855: E/TEST(16749):  at com.example.testing.app.Main.onCreate(Main.java:46)
03-15 01:02:23.855: E/TEST(16749):  at android.app.Activity.performCreate(Activity.java:5163)
03-15 01:02:23.855: E/TEST(16749):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-15 01:02:23.855: E/TEST(16749):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
03-15 01:02:23.855: E/TEST(16749):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2122)
03-15 01:02:23.855: E/TEST(16749):  at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-15 01:02:23.855: E/TEST(16749):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1228)
03-15 01:02:23.855: E/TEST(16749):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 01:02:23.855: E/TEST(16749):  at android.os.Looper.loop(Looper.java:137)
03-15 01:02:23.855: E/TEST(16749):  at android.app.ActivityThread.main(ActivityThread.java:4895)
03-15 01:02:23.855: E/TEST(16749):  at java.lang.reflect.Method.invokeNative(Native Method)
03-15 01:02:23.855: E/TEST(16749):  at java.lang.reflect.Method.invoke(Method.java:511)
03-15 01:02:23.855: E/TEST(16749):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-15 01:02:23.855: E/TEST(16749):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-15 01:02:23.855: E/TEST(16749):  at dalvik.system.NativeStart.main(Native Method) 
```

public_key.pem

```
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0fri4+tn5BAVBGXXpPjn
rwtHJD2K9JCexyuE1+xPlPIDTvHrY4SefBIKoTdFljLgZPOXVrA+p9Qmv5YnVwa/
WAwLCQG8YjbqjJDTRWiV5RN/gidFuFQS7e5P10uy8rY3XUAI8J3poYPTjmSowDmw
JkBholrybC17zmXlUjlfSry+1ts48ijW6Mq6q3n08uFPtUJGLS8NXApkR0sftPm0
dI+DlLIOHsFnPBfBwcAUlf/JVBgAm/C6sQXuCjLkFu9wVbmyG3ht8TjO/Q9xeqGQ
jY8Tu+if7mQd6xXVDP3b1x+CQ4DhQ6iZETEXj0GxOBugISZxBx0KLug0dhBliES7
TQIDAQAB
-----END PUBLIC KEY----- 
```

private_key.pem

```
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA0fri4+tn5BAVBGXXpPjnrwtHJD2K9JCexyuE1+xPlPIDTvHr
Y4SefBIKoTdFljLgZPOXVrA+p9Qmv5YnVwa/WAwLCQG8YjbqjJDTRWiV5RN/gidF
uFQS7e5P10uy8rY3XUAI8J3poYPTjmSowDmwJkBholrybC17zmXlUjlfSry+1ts4
8ijW6Mq6q3n08uFPtUJGLS8NXApkR0sftPm0dI+DlLIOHsFnPBfBwcAUlf/JVBgA
m/C6sQXuCjLkFu9wVbmyG3ht8TjO/Q9xeqGQjY8Tu+if7mQd6xXVDP3b1x+CQ4Dh
Q6iZETEXj0GxOBugISZxBx0KLug0dhBliES7TQIDAQABAoIBAQCjTraLgJgqPX+7
DeHrQlIeR20q+FpL3vY9/NCyhe1W7+o2ydvCaHBCGl3+CFiseiEfInw/RY9VQ6Bn
PMaX3n2OYr9qX9k9oWxFqpVF1BNQOBvhA94rf+fA+KlLzmn8bk8czSKm0InVvgsZ
IZxE9BjVhxjoBkeobq9tVL5HdqtwGXaaLga95LQDvyYpFqTTTCzcDAB1GaUsdAJq
tqqojk2+p49zECnWJRcdytaXH+FA8zkIwK/fyejoFW37sZn52aZYJSKs2Yg7pm1E
GjFE94rtfxdn1oPCD2QBAmyKKQKk2LJJ/JPFoZ98nnOXaSdjklEwgf3OAbA8wAuY
U23Ny1LBAoGBAO8zZbf85gLEsUve8QYxaq0qXhZX1+ZMbIGVLuhGBpzXf7ldyO5e
PWR4mwTlhddnVhZNlF++BX+A8tXkVvvBXyS3YcTuzoC/rXP9YuSDYHgp64ic2Qhb
1iRtBGwHmB6AS5UyxAZMjHqoMki1WLN5eVP+emFQzwuzWv+oyhb9VawVAoGBAOC6
ILApFi22DJXnR/Ds/nRLLkwYRUVYuB54fGbZrJgTaCLhMpHIYFgh+NAtXqFtrwDT
NxJDjniVaHpAww69T8O4FOlMEFTF3grWAnMdKRaD/nzK1TtgHLxOOyFBesUiiUZn
PfJJ/DMm8FywZmFmEU1ge9+Tbje1Hmgj/8TwPkhZAoGAHO6zlACT9avC4jFyJ9Sc
WZuxS7SOWb3OthHMXa3yqM/sFAjDAAoIFPn9jicQ/E/0erghhT8fvR9kv/hhiQwH
rRI9UiuscKg+m7P/XTKC3aX8ZkbKfZdWHIvPKB33CWFtQvuj+DsUFtX3VxIQS40a
3sz+En1KvdiQ3jGVWBiGX00CgYEA21jRTyDLZRKsdiSpM6AfPaOkLOIDuww9qoAv
7LPKoyVOH71vfpv2bg+6rHecRjSo/EUtG8aU6V3r/Gf5/AkMMh0bTBvSVOxNLoZ1
Hab40+FCJMxWFP5bDfHOBUfEbWaoVu+upy9P2x3GvrHvPGJDwSLLxg5BJl7CryN0
IuXb5QECgYAk8/J3p30MVVwXdRYqg79h4itBZS62oL6//dchD58SubWiSTIahsR5
5v56BzkHC0VLow3eiKE4+tO94G0Gvnw74TgpWOCwEQvneJv5eEHzi9CvmyzJ+hIX
N1o7nPr6GWav+m1JRCqdU1Dh/wDV5grw0kBQ0fhT/GaMwWkBXWumEQ==
-----END RSA PRIVATE KEY----- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:36:33.837

我在解密方法中有错误的调用。正确的调用如下...

```
public static String decrypt(InputStream stream, String encrypted) throws IOException, NoSuchAlgorithmException, InvalidKeySpecException,
        NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {

    byte[] encodedKey = new byte[stream.available()];
    stream.read(encodedKey);
    X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(encodedKey);
    KeyFactory kf = KeyFactory.getInstance("RSA");
    PublicKey pkPublic = kf.generatePublic(publicKeySpec);

    Cipher pkCipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
    pkCipher.init(Cipher.DECRYPT_MODE, pkPublic);

    byte[] decoded = Base64Coder.decode(encrypted);
    byte[] decryptedInByte = pkCipher.doFinal(decoded);
    return new String(decryptedInByte);
} 
```

# php - 删除级联不起作用

> ID：15427384
> 
> 赞同：0
> 
> 时间：2013-03-15T08:02:56.507
> 
> 标签：php, mysql, mysqli

我有两张桌子：`users`和'账单'。在`bills`作为外键`users`。

`bills`当我从表中删除时，我想自动从表中删除行`users`。为此，我使用以下查询更改表，但它仍然不会从 bills 表中删除条目。

我的变更声明是：

```
ALTER TABLE bills
ADD CONSTRAINT fk_pid
FOREIGN KEY (pid)
REFERENCES users(id)
ON DELETE CASCADE 
```

这`pid`是 bills 表中的外键，而用户表中的 id 主键

请帮我解决上述问题，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:22:48.957

用create代替alter，否则你的语法没问题

```
Create TABLE bills(
Your columns details
------
------
ADD CONSTRAINT fk_pid
FOREIGN KEY (pid)
REFERENCES users(id)
ON DELETE CASCADE
) 
```

试试这个..

如果它不起作用，那么也试试这个东西。如果您的两个表都有不匹配的主键和外键问题，那么您无法添加删除级联。为此，您需要修复该键问题。就像您的用户表中没有主键值并且您在中使用相同的 id你的账单表作为外键，那么你不能在账单表中添加级联。为此从账单表中删除该键，然后尝试使用 Alter 添加级联脚本。我有同样的问题，但我使用这种方式并且它有效。希望它会也为你工作。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:24:15.507

我认为[这个**create**](https://stackoverflow.com/a/2917374/1206052)解决方案 可以帮助您弄清楚您实际上缺少什么。

通过它并尝试根据您的需要对其进行自定义，因为您没有提供足够的详细信息以及您的问题。

我怀疑它与您的 create table 语句有关

或者试试这个[ALTER1](http://www.java2s.com/Code/Oracle/Table/Usealtertabletoaddforeignkeywithcascadedeleteformorethanonecolumn.htm) 或[ALTER2](http://www.techonthenet.com/oracle/foreign_keys/foreign_delete.php)

# jquery - jQuery 是否支持跨浏览器 hashchange 事件处理而无需额外的插件？

> ID：15427385
> 
> 赞同：1
> 
> 时间：2013-03-15T08:02:59.637
> 
> 标签：jquery, hash, event-handling

jQuery 是否支持`$(window).bind('hashchange')`没有额外的插件？

如果有，什么版本的 jQuery 实现了这个操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:04:16.360

`hashchange`当且仅当浏览器支持时，jQuery 才支持该事件。

[**浏览器兼容性**](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange#Browser_compatibility)

# arrays - 在 d3.js 中显示数组列表的奇怪行为

> ID：15427386
> 
> 赞同：0
> 
> 时间：2013-03-15T08:03:04.970
> 
> 标签：arrays, d3.js

**有人知道为什么我在输入或更新5 到 9 之间且大于 100 的**数组值时在我的 d3 比例尺中有一个完全扭曲的布局？

我在这里设置了示例：[http ://bl.ocks.org/vertighel/5149663](http://bl.ocks.org/vertighel/5149663)

![条形图](../Images/92539f3b18693427dfa0672868f38508.png)

从代码和这张图片中可以看出，条形图的宽度不得超过 500 像素，颜色不得超过橙色……但尝试插入介于 5 和 9 之间或大于 100 的值，您会看到。让我们把“9”中的“11”改一下：

![搞砸了](../Images/03b3f0411fe85bfa7fb4f5f3a7c6a6e3.png)

宽度和色阶完全搞砸了！

这是代码：

```
<!doctype html>
<meta charset="utf8"></meta>
<title>Test</title>
<style type="text/css">
  li{border: 1px solid white; background-color: steelblue; color: white}
  li{width: 50px; text-align:right; }
  li:hover{opacity:0.7;}
  .clicked{background-color: green}
  :invalid{background-color: pink}
</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<input id="inp" value="1,23,42,20,11,33,21" pattern="(\d+)(,\s*\d+)*" required>
<label for="inp">change me</label>
<h1>click on the bars</h1>

<script>

var list = d3.select("body").append("ul");

update()
d3.select("input").on("change",update)

function update(){
var array = d3.select("input").property("value").split(",")
console.log(array);

var cscale = d3.scale.linear()
.domain(d3.extent(array))
.range(["steelblue","orange"])

var wscale = d3.scale.linear()
.domain(d3.extent(array))
.range(["10px","500px"])

var elem = list.selectAll("li").data(array);

elem.enter()
.append("li")

elem.text(function(d){return d})
.transition()
.style("width", function(d){return wscale(d)})
.style("background-color", function(d){return cscale(d)})

elem.on("click",function(d,i){d3.select("h1").text("list item "+i+" has value "+d)})

elem.exit().remove()

}

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:57:24.723

您看到这一点是因为您的数字实际上不是数字，而是字符串。特别是，“9”只有一个字符长，而所有其他“数字”都是两个字符长（类似于“100”）。

解决方案是将字符串转换为整数。一种方法是使用`map()`如下函数。代替

```
var array = d3.select("input").property("value").split(",") 
```

到

```
var array = d3.select("input").property("value").split(",")
              .map(function(d) { return(+d); }); 
```

该`map()`功能可能会或可能不会在您的设置中实现，请参阅[此处](http://www.tutorialspoint.com/javascript/array_map.htm)了解更多信息和您可以使用的实现。

# websocket - WebDAV 和 socket.io 之间的区别（哪个更好？）

> ID：15427389
> 
> 赞同：0
> 
> 时间：2013-03-15T08:03:11.530
> 
> 标签：websocket, socket.io, webdav

这是我的故事：

我有一个繁忙的服务器（每分钟查询太多），我正在尝试在该服务器上上传图像，问题是我不知道使用什么来获得良好的性能。

有人可以告诉我以下之间的性能差异：

*   使用 WebDAV 协议上传文件。
*   使用 WebSocket 协议 (socket.io) 上传文件。

是什么方法`faster + consumes less resources + better`。

例如，您能告诉我`YouTube`上传使用什么方法吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:18:25.060

如果套接字被重复用于多个通信请求，Websocket 可以节省资源。但是，如果您使用它来促进单次上传，那么它与普通的 HTTP PUT 之间没有区别。

那是因为创建 websocket 连接的步骤与启动普通 HTTP 连接的步骤相同，但最后会更改模式，以便连接准备好并等待传输。因此，如果用户要使用 websocket 连接进行 10 次上传，则可能会有优势，因为只有一次握手，而对于正常的 HTTP PUT，将有 10 次握手。

但是要进行 websocket 上传，您需要“自己动手”，因为作为 websocket 标准的一部分，没有标准的文件上传语义，就像 HTTP 一样。这意味着潜在的错误和效率低下。

因此，要回答哪种方法“更好”，我认为使用 websockets 进行文件上传的性能提升会很小，可能无法衡量，但这样做会带来错误和效率低下的风险。

# rspec - 添加“spec_helper”时堆栈级别太深（SystemStackError）

> ID：15427390
> 
> 赞同：0
> 
> 时间：2013-03-15T08:03:12.660
> 
> 标签：rspec, ruby-on-rails-2

我正在升级旧的`Rails 2.3 application`，发现大多数规格都失败了。我正在努力让他们通过。

到目前为止，大多数规范文件都没有包含 require `'spec_helper'`，但需要添加。（不知道为什么它以前不存在）。

当我添加`spec_helper`到一些控制器时，我得到错误堆栈级别太深`(SystemStackError).`

我目前运行如下，但我相信这可能是一个 Rails 2.1 应用程序开始。

*   导轨 2.3.17
*   Rspec-rails 1.3.2
*   红宝石 1.9.3

文件的顶部看起来像这样。堆栈太深错误会导致测试集根本没有真正运行。如果我注释掉前三行，那么测试至少会运行，尽管都失败了。

```
require 'spec_helper'
require 'active_merchant'
include ActiveMerchant::Billing

describe 'AccountsController' do
... 
```

这是我经过一番摆弄后能够起床的堆栈跟踪。

```
2)
stack level too deep
../bin/ruby_noexec_wrapper:14:in `<main>'
../gems/activesupport-2.3.17/lib/active_support/dependencies.rb:170:in `load_with_new_constant_marking'
../gems/ruby-1.9.3-p392@project/gems/rspec-1.3.2/lib/spec/runner/example_group_runner.rb:15:in `block in load_files'
../rspec-1.3.2/lib/spec/runner/example_group_runner.rb:14:in `each'
../gems/rspec-1.3.2/lib/spec/runner/example_group_runner.rb:14:in `load_files'
../gems/rspec-1.3.2/lib/spec/runner/options.rb:134:in `run_examples'
../gems/rspec-1.3.2/lib/spec/runner.rb:61:in `run'
../gems/rspec-1.3.2/lib/spec/runner.rb:45:in `block in autorun'
../gems/activesupport-2.3.17/lib/active_support/dependencies.rb:186: stack level too deep (SystemStackError) 
```

从这里到哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:29:16.723

尝试`include ActiveMerchant::Billing`按如下方式进入描述块：

```
require 'spec_helper'
require 'active_merchant'

describe 'AccountsController' do
  include ActiveMerchant::Billing
  ... 
```

### 参考：

*   [以前的堆栈溢出答案](https://stackoverflow.com/a/9255879/429758)

*   Dave Chelimsky 的博客文章标题为[RSpec 向隐式模块包含挥手“再见”](http://blog.davidchelimsky.net/2008/05/29/rspec-waving-bye-bye-to-implicit-module-inclusion/)

# java - 部署到tomcat时出错

> ID：15427392
> 
> 赞同：10
> 
> 时间：2013-03-15T08:03:17.327
> 
> 标签：java, spring, tomcat, spring-mvc, catalina

我使用了 apache-tomcat-7.0.37

Git：[https ://github.com/IRus/jMusic](https://github.com/IRus/jMusic)

应用部署时：

```
[2013-03-15 10:52:11,542] Artifact jMusic:war exploded: Artifact is being deployed, please wait...
Mar 15, 2013 10:52:17 AM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1553)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:792)
    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:622)
    at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:569)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:792)
    at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1486)
    at javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:96)
    at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1327)
    at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1419)
    at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:847)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
    at sun.rmi.transport.Transport$1.run(Transport.java:177)
    at sun.rmi.transport.Transport$1.run(Transport.java:174)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: org/springframework/web/context/request/async/CallableProcessingInterceptor
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2317)
    at java.lang.Class.getDeclaredFields(Class.java:1762)
    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:106)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:140)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 40 more
Caused by: java.lang.ClassNotFoundException: org.springframework.web.context.request.async.CallableProcessingInterceptor
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    ... 54 more 
```

完整错误：[https ://gist.github.com/IRus/3fa810b33af7fca09f1b#file-gistfile1-txt](https://gist.github.com/IRus/3fa810b33af7fca09f1b#file-gistfile1-txt)

我急于解决这个问题，花了大约一天的时间就决定了。

有什么想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-15T08:08:33.437

`org.springframework.web.context.request.async.CallableProcessingInterceptor`根据[文档](http://static.springsource.org/spring-framework/docs/3.2.0.RC1/api/org/springframework/web/context/request/async/CallableProcessingInterceptor.html)，从 Spring 3.2 开始可用。工件是spring-web。

在您的 上定义以下内容`pom.xml`：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.2.1.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T08:08:33.303

您的工件缺少课程`CallableProcessingInterceptor`。我猜它在spring-web中。

# javascript - 从列表中获取属性

> ID：15427395
> 
> 赞同：1
> 
> 时间：2013-03-15T08:03:30.350
> 
> 标签：javascript, html

我有这个带有 3 个列表项的侧边栏：

HTML：

```
<div id="sideMenu" >
    <ul class="bmenu">
        <li id="f1" onclick="style1()">Style 1</li> <!--turn sidebar on/off-->
        <li id='f2' onclick="style2()">Style 2</li> <!--randomize vidcontain border-->
        <li id='f3' onclick="style3()">Style 3</li>
    </ul>
</div> 
```

我需要设置一个 var，其中包含我选择的列表项的 ID，以便我可以存储它以供以后使用。

我可以使用javascript完成这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:05:11.310

你声明它：

```
var selectedStyle; 
```

...然后在你的`styleX`函数中，你设置它：

```
function style1() {
    selectedStyle = "f1";
} 
```

但请注意，如果您不想这样做，则不必拥有单独`style1`的`style2`、 和`style3`函数。如果您更改`onclick`为：

```
onclick="setStyle(this)" 
```

...然后你的`setStyle`函数可以使用传递给它的 DOM 元素，它有一个`id`包含元素的属性`id`（因为我注意到你的所有元素都使用了`onclick`值`id`）：

```
function setStyle(elm) {
    selectedStyle = elm.id;
} 
```

# php - 如何从递归函数返回数组

> ID：15427397
> 
> 赞同：5
> 
> 时间：2013-03-15T08:03:40.743
> 
> 标签：php, arrays, recursion

我找不到解决方案，也没有太多时间。所以我想要的是创建一个函数，我给出类别 ID，它返回所有类别的 ID，它们是它的子类别。

```
function getID($var) {
    $categories = array();

    function getChildren($id) {
        $result = mysql_query("SELECT * FROM categories WHERE parentID = '$id'");
        echo "<ul>";
        while ($row = mysql_fetch_array($result)) {
            echo "<li><a>{$row['ID']}</a>";
            $categories[] = $row['ID'];
            getChildren($row['ID']);
            echo "</li>";
        }
        echo "</ul>";
    }

    getChildren($var);
    return $categories;
} 
```

我不想将所有内容都存储在 $categories 数组中。$var 是我赋予函数的类别 ID。当我调用这个函数时，它会打印出我想要的列表，但数组是空的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T08:07:30.790

看来你有一个范围问题。尝试这个：

```
function getChildren(&$categories, $id) {
  $result = mysql_query("SELECT * FROM categories WHERE parentID = '$id'");
  echo "<ul>";
  while ($row = mysql_fetch_array($result)) {
    echo "<li><a>{$row['ID']}</a>";
    $categories[] = $row['ID'];
    getChildren($categories, $row['ID']);
    echo "</li>";
  }
  echo "</ul>";
}

function getID($var) {
  $categories = array();

  getChildren($categories, $var);
  return $categories;
} 
```

[这](http://php.net/manual/en/language.references.pass.php)是描述如何通过引用而不是按值传递的 PHP 参考页面。基本上它说任何`&`前面有 a 的函数参数都将通过引用而不是值传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:09:45.680

$categories only exists in the scope of get children. You could either pass it by reference as second parameter or create get children as a closure with `use (&$categories)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:06:46.593

`function getChildren($id, $categories)`

应该管用。

该数组超出范围，因此该函数没有触及您要返回的那个。它在函数内部创建了一个新的本地 $categories。

# android - 动作吧sherlock：两个吧？（底部菜单/顶部搜索栏）

> ID：15427399
> 
> 赞同：2
> 
> 时间：2013-03-15T08:03:47.353
> 
> 标签：android, search, android-actionbar, actionbarsherlock, searchbar

在我的应用程序中，我创建了一个扩展 SherlockFragmentActivity 的 Base_Activity 类，在其中我以这种方式定义了一个操作栏（它是一个包含三个不同项目的菜单栏）：

```
public class Base_Activity extends SherlockFragmentActivity {
private ActionBar mActionBar;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.main, menu);
    mActionBar = getSupportActionBar();
    mActionBar.setDisplayUseLogoEnabled(false);
    mActionBar.setDisplayShowCustomEnabled(true);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.home:
        Intent i = new Intent(this, MainActivity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(i);
        return true;
    case R.id.map:
         Intent ii = new Intent(this, MainActivity.class);
            ii.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(ii);
        return true;
    case R.id.favorites:
         Intent iii = new Intent(this, FavoritesListView.class);
            iii.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(iii);
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} } 
```

然后我添加了这一行来在我的应用程序底部设置这个栏：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

它运行良好，到目前为止我没有任何问题：我的底部操作栏有每个按钮的侦听器。
我现在想添加一个顶部操作栏，其中包含一个 SearchBar（或 SearchWidget）和一个在右上角打开子菜单的项目。

我现在的问题是：在每个活动的顶部，而不是每个活动名称的无用栏，我想要另一个顶部栏：
1 / 搜索栏
2 / 在向上打开子菜单的图标-右上角。

不幸的是，我经常读到这不是真的可能，但许多应用程序确实使用它。我真的很难找到如何添加我的搜索栏，这没有意义：我知道如何编写我的查询方法，我有我的 databaseAdapter 和 Helper 类，所以基本上它只是显示一个简单的搜索栏顶部，放置一个监听器并将我的查询发送到数据库，然后显示一个列表视图。

有谁知道可以将操作栏保持在底部并在顶部也有搜索栏的技巧？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:10:52.880

See [my question](https://stackoverflow.com/questions/15422505/android-actionbar-collapsible-searchview-with-action-button). I think will answer for your first question. Second is very similar to this what I need.

# nhibernate - 持久化未保存的实体时，会话刷新不显示 SQL

> ID：15427408
> 
> 赞同：1
> 
> 时间：2013-03-15T08:04:40.260
> 
> 标签：nhibernate, persistence, flush

该场景是以下内容的（更复杂的）版本：

```
IList<T> ts = Session.QueryOvery<T>().List();

// modify data of multiple objects
ts[0].Foo = "foo0";
ts[1].Foo = "foo1";

using (ITransaction trx = Session.BeginTransaction())
{
   // save only one object
   Session.Save (ts[0]);
   trx.Commit();
} 
```

随着 NH 的发展，这也会`ts[1]`默认保存，以防止过时状态（旁注：我们喜欢控制我们的 SQL，所以我们通过设置将其关闭`Session.FlushMode=FlushMode.Never`）。

真正让我烦恼的是，即使`Show_SQL`被激活，也没有为`ts[1]`通过刷新确定发送到数据库的更新显示 sql。

有什么办法可以让那些出现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:22:03.443

如[https://stackoverflow.com/a/9403516/1236044](https://stackoverflow.com/a/9403516/1236044)中所述，您只需将`adonet.batch_size`设置值添加`0`到您的配置中：

```
<property name="adonet.batch_size">0</property> 
```

# ruby-on-rails - 我如何重构这个案例语句才能工作？

> ID：15427418
> 
> 赞同：1
> 
> 时间：2013-03-15T08:05:11.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

所以我想做的是根据`current_user`.

这就是我所拥有的：

```
 path = case current_user.roles.where(:name => "vendor")
    when :vendor
      dashboard_path
    when :guest
      home_path
    else
      home_path
  end

  redirect_to path 
```

我正在使用`cancan`，并且据我所知，找出用户角色的唯一方法是执行`current_user.has_role? :admin`或`current_user.roles.where(:name => role_name)`.

鉴于这些限制（或告诉我另一种方式来确定用户的角色），我如何让这个案例陈述起作用？

**编辑 1**

假设我正在检查多个角色，而不仅仅是我这里的 2 个 - 可能是 4 个或 5 个。

**编辑 2**

需要明确的是，这是我目前的设置。

我正在使用 Devise、CanCan 和 Rolify。Rolify 允许用户拥有多个角色，但我的应用程序不会有那个用例。一个用户将只有一个角色。它们可以是`vendor, buyer, guest, superadmin`.

如果他们是 a `vendor`，他们只能看到`dashboard_path`属于他们的那个。他们看不到`vendor storefront`属于其他任何人的任何其他人。他们也不应该能够看到其他供应商的产品。因此，一旦他们登录，他们不`root_path`应该是其他所有角色的角色。`dashboard_path``home_path``root_path`

如果他们是`guest`，他们可以看到除价格之外的所有内容 - 我已经有了这个逻辑。我是这样实现的：

```
if user.has_role? :guest
    can :read, [Product, Vendor, Banner]
    cannot :view_prices, Product
end 
```

然后在我看来，我只是做了这样的事情：

```
<% if can? :view_prices, Product %>
    <div class="price pull-right">
      <%= number_to_currency(@product.price) %> ea
    </div>      
<% else %>
   <span class="no-price pull-right"><%= link_to "Log In To See Price", login_path %></span>
<% end %> 
```

所以，基本上......我的真正目标是尝试`root_path`根据用户的角色来改变。我基本上是在尝试实现[这个问题](https://stackoverflow.com/questions/4753871/how-can-i-redirect-a-users-home-root-path-based-on-their-role-using-devise)的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T08:24:20.387

**最终答案** *（对于早期的答案，见下文）*

如果您的用户只能拥有一个角色，我会说*您当前的实现并不完全合适*。但是，如果您确实需要保留此实现，则可以执行以下操作：

```
class User < ActiveRecord::Base
  # this will return the name of the first (so the only one) 
  # role that your user has, or nil. 
  def role_name
    roles.first.try( :name ) 
  end
end 
```

所以现在您的案例陈述将起作用：

```
path = case current_user.role_name
         when 'vendor' ; dashboard_path
         when 'guest'  ; home_path
         when 'foo'    ; bar_path
         else home_path
       end 
```

我仍然鼓励您将案例语句包装在帮助程序中，以实现可重用性和更易于维护。

**较早的答案**

我不确定我是否理解您的问题，但我认为您在这里不需要案例陈述：

```
redirect_to (current_user.has_role? :vendor ? dashboard_path : home_path) 
```

另一种方法是将部分责任推给用户类（或演示者）：

```
class User < ActiveRecord::Base
  def home_page
    # here some logic to return a symbol like :home or :dashboard,
    # depending on your roles implementation. Your User could even use
    # a state machine to do this, or have multiple decorators.
  end
end 
```

然后有一个帮手

```
 def home_path_for( user )
   case user.home_page
     when :home      ; home_path
     when :dashboard ; dashboard_path
     when :foo       ; bar_path
     else home_path
   end
 end 
```

**第一次编辑**

如果您的用户一次可以拥有多个角色，我会说 case 语句不合适。`case`是一个分支语句，当您在一组可能的结果中只有**一个且只有一个输入**和**一个且只有一个结果时，它是合适的。**

因此，您必须将角色列表减少到中间状态，例如：

```
 DASHBOARD_ROLES = [:vendor, :admin]
 CLIENT_ROLES    = [:client, :prospect]
 BASIC_ROLES     = [:logged_visitor]

 if (DASHBOARD_ROLES & user_roles).any?
   :admin_dashboard
 else if (CLIENT_ROLES & user_roles).any?
   :client_dashboard
 # additionnal, different logic is possible
 else if (BASIC_ROLES & user_roles).any? && user_logged_in? && user_roles.first != :prospect
   :logged_dashboard
 else
   :home
 end 
```

这是一种完全不同的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:23:50.670

首先，如果可能的话，您可能需要解决用户具有多个角色的情况。

假设一个用户有一个角色（尽管如果需要我们可以添加更多条件）你能考虑一个哈希吗？

就像是 -

```
path = {:vendor => dashboard_path, :guest => home_path} [current_user.active_role] || default_path 
```

我做了一些假设——

1.  `current_user.active_role`可能是用户的当前角色，您可以根据该角色重定向答案。
2.  `default_path`是不言自明的。

# css - CSS选择器名称修改？

> ID：15427421
> 
> 赞同：6
> 
> 时间：2013-03-15T08:05:29.217
> 
> 标签：css, css-selectors

我一直在研究 SMACSS 和 OOCSS 等 CSS 编码方法。在做了一些功课并检查了大型网站（例如 Google、Facebook）的样式后，我注意到选择器名称非常混乱，例如 ._50x4 没有样式或内容语义。

我想知道这些较大的站点是否使用某种类型的名称修饰来为其 css 选择器命名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T14:53:32.380

重新指定您指定的特定选择器：`._50x4`在问题中。

这个选择器看起来确实很奇怪，但实际上它并没有无效或损坏。

类（或 ID）选择器以数字开头是无效的，因此`.55x4`无效。但是下划线是类的有效第一个字符。

因此，选择器`._55x4`实际上只是拥有一个名为 的类的一种方式`55x4`，但在它的开头带有下划线以使其有效。

你为什么想要一个名为 的类`55x4`？好吧，如果您想要真正的答案，您必须询问您在哪里找到它的网站的开发人员，但您提到了 Facebook 和 Google，所以我们可以推测一下。

Facebook 和 Google 都是流量*极高的网站。*因此，就他们而言，即使减少一个字符的 HTML/CSS/JS 代码大小也会对他们的带宽成本产生很大影响。

你或我可能用一个更易读的名字来命名这个类，但是当你试图节省每一个可能的带宽字节时，合理的名字就会消失。就像他们将 Javascript 代码缩小到不可读的程度一样，他们还将优化 HTML 和 CSS 代码以使其尽可能小。结果就是这样疯狂的类名。

这并不是说这个类名完全是疯狂的——你完全断章取义地引用了它，所以数字 55 和 4 很有可能适用于页面上的某些内容。我不知道，没有任何背景，其他人也不知道。

但我可以这么说：这是复制 Facebook 和 Google 不一定是最好的主意的一种情况。您没有与他们相同的流量级别，并且从您的代码中删除每个最后一个字节不应该对您具有与他们相同的优先级。当然你可以优化东西，但没有必要写出那样的类名。

要说的另一件事是，出于 SEO 的目的，合理的类名非常有帮助。Facebook 和（尤其是）谷歌可以忽略他们的 SEO 排名，但我们其他人不能。

所以不管你的方法是什么，类名都应该是语义的——即它们应该有意义，并帮助读者理解元素的用途。

通过查看知名站点以了解它们的功能，您正在做正确的事情，但我的建议是尝试查看与您自己的站点更接近的其他站点。Facebook 和 Google 在做事方式上总是会有些“不同”；他们并不总是最好的例子。

# c# - 没有 null XMLArray 的 XML 序列化

> ID：15427422
> 
> 赞同：3
> 
> 时间：2013-03-15T08:05:39.540
> 
> 标签：c#, xml, serialization

让我直说吧。如果 XMLArray 元素为空，是否可以不序列化它？如下使用 XML“详细信息”。如果它为空，是否可以不在 XML 中使用它。请检查我的代码，并会欣赏一些想法。

```
<agr:InvoiceNo>99999</agr:InvoiceNo>
    <agr:Header>
      <agr:LineNo>1</agr:LineNo>
      <agrlib:InvoiceDate>2013-02-13</agrlib:InvoiceDate>
      <agrlib:DueDate>2013-03-15</agrlib:DueDate>
      <agr:ArchiveRef>27624642</agr:ArchiveRef>
      <agr:ArchivePath>Images\20130315\10_00000030_00000</agr:ArchivePath>
      <agr:Currency>SEK</agr:Currency>
      <agr:Seller>
        <agrlib:CompRegNo>999999</agrlib:CompRegNo>
      </agr:Seller>
      <agr:Buyer>
        <agrlib:CompanyCode>10</agrlib:CompanyCode>
        <agr:Accountable />
      </agr:Buyer>
      <agr:PaymentInfo>
        <agr:AccountNumber>99999</agr:AccountNumber>
        <agrlib:BacsId />
      </agr:PaymentInfo>
      <agrlib:ReferenceCode>
        <agrlib:Code>AA</agrlib:Code>
        <agrlib:Value>AAAA</agrlib:Value>
        <agrlib:Description />
      </agrlib:ReferenceCode>
    </agr:Header>
    <Details />                    <!-- this one -->
    <agr:Summary>
      <agr:TotalTax>170.36</agr:TotalTax>
      <agr:TotalInclTax>1590.00</agr:TotalInclTax>
    </agr:Summary>
  </agr:Invoice> 
```

* * *

```
[Serializable]
public class Invoice
{
    private Header _header = new Header();
    private Summary _summary = new Summary();
    private List<Detail> _details = new List<Detail>();

    [XmlElement("InvoiceNo")]
    public string InvoiceNo { get; set; }

    [XmlElement("Header")]
    public Header Header
    {
        get { return _header; }
        set { _header = value; }
    }

    [XmlArray("Details"), XmlArrayItem("Detail", typeof(Detail), IsNullable=false)]
    public List<Detail> Details
    {
        get { return _details; }
        set { _details = value; }
    }

    [XmlElement("Summary")]
    public Summary Summary
    {
        get { return _summary; }
        set { _summary = value; }
    }
}

[XmlType(TypeName = "Detail"), Serializable]
public class Detail
{
    private Product _product = new Product();
    static CultureInfo ci = CultureInfo.InvariantCulture;
    private float _lineTotExclTax = 0;

    [XmlElement("LineNo")]
    public int LineNo { get; set; }

    [XmlIgnore]
    public float LineTotExclTax
    {
        get { return _lineTotExclTax; }
        set { _lineTotExclTax = value; }
    }

    [XmlElement("LineTotExclTax")]
    public string CustomLineTotExclTax
    {
        get { return LineTotExclTax.ToString("#0.00", ci); } 
        set { float.TryParse(value, NumberStyles.Float, ci, out _lineTotExclTax); }
    }

    [XmlElement("Products")]
    public Product Product
    {
        get { return _product; }
        set { _product = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:14:51.117

如果列表确实是*，*`null`则将其忽略。要获得您显示的输出，它必须是一个空的非列表，可能是由于字段初始化器：*`null`*

 *```
private List<Detail> _details = new List<Detail>(); 
```

如果你做不到`null`，那么考虑`ShouldSerialize*`：

```
[Browsable(false), EditorBrowsable(EditorBrowsableState.Never)]
public bool ShouldSerializeDetails()
{
    return _details != null && _details.Count != 0;
} 
```

这定义了何时`Details`应该/不应该序列化属性的自定义规则。*

# c# - 如何使用取决于语言的“取消”文本创建按钮？

> ID：15427426
> 
> 赞同：0
> 
> 时间：2013-03-15T08:06:11.180
> 
> 标签：c#, .net, winforms, localization

我想在表单中添加一个通用的“取消”按钮。通用是指在具有不同于英语语言环境的系统上，它将显示本地化的“取消”字符串。如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T08:15:19.240

您需要使用 .NET 和 Visual Studio 提供的本地化支持。例如，请参阅此处的演练：[本地化 Windows 窗体](http://msdn.microsoft.com/en-us/library/y99d1cd3%28v=vs.110%29.aspx)。

# javascript - 如何从计时器停止按钮？

> ID：15427431
> 
> 赞同：1
> 
> 时间：2013-03-15T08:06:29.007
> 
> 标签：javascript, jquery

单击它时我有一个按钮开始计数，所以现在我希望它在再次单击时停止计数。所以我可以点击任何其他按钮，并且该按钮必须与第一个按钮完全一样，我们将不胜感激。

这就是按钮的创建方式

```
 function createButtons(tbID, tbClass, tbType, tbValue, onClick) {
      return '\n<input '
            + (tbID ? ' id=\'' + tbID + '\'' : '')
            + (tbClass ? ' class=\'' + tbClass + '\'' : '')
            + (tbType ? ' type=\'' + tbType + '\'' : '')
            + (tbValue ? ' value=\'' + tbValue + '\'' : '')
            + (onClick ? ' onclick=\'toggle(this);' + onClick + '\'' : '')
            + '>';
     }

      function (i, item) {
       newContent += createButtons("tb" + item.CommonCable, null, "submit",         item.CommonCable, toggle);
        }); 
```

以下代码正在计算按钮单击的时间。并将其显示在 HTML 页面中。功能切换（ths）{

```
 $(ths).toggleClass("btnColor");
       $("#tb").toggleClass("btnColorR");
       var clicked = $(ths).val();

      $("#setCount").html(" DOWNTIME TYPE : " + clicked + " MINUTES : " + minutes + "         SECONDS : " + count );
       count = count + 1;

        if (count % 60 == 0) {
           minutes += 1;
            count = 0;
        }
           timer = setTimeout("toggle()", 1000);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:30:41.167

您需要做的就是向停止按钮添加一个 onClick 处理程序，其中包含以下行：

```
timer = null; 
```

# sql - 检索 SQL 表同一行中的值

> ID：15427437
> 
> 赞同：0
> 
> 时间：2013-03-15T08:06:39.760
> 
> 标签：sql, postgresql

我有一个用于计算价格的表格，该表格查找表格以获取每个零件的价格，然后将其乘以订购的零件数量。

但是，订购的零件数量在同一个表中，并且在添加值时，我似乎无法找到访问表中同一行中的值的方法。

这是不可能的，还是有更好的方法来做到这一点？

这是与此有关的表格：

```
CREATE TABLE PartOrder 
(
    OrderID     INTEGER NOT NULL,
    CustomerID  INTEGER NOT NULL,
    PartID          INTEGER NOT NULL, 
    NumParts    INTEGER NOT NULL,
    Status      CHAR(1) NOT NULL 
                CHECK (Status IN ('R', 'H',
                'E', 'C')
    OrderTime TIMESTAMP NOT NULL,
    TotalCost   DECIMAL,
    CONSTRAINT partOrder_pk PRIMARY KEY (OrderID),
    CONSTRAINT partOrder_fk1 FOREIGN KEY (CustomerID) REFERENCES Customer ON DELETE CASCADE,
    CONSTRAINT partOrder_fk2 FOREIGN KEY (FlightID) REFERENCES Part ON DELETE CASCADE
); 
```

我想要它，以便它将 numParts 值乘以零件表中引用的每个零件的价格。但是，我不能坚持硬值，因为订购的数字可能会在以后发生变化，这意味着总价格会发生变化。

目前我的插入语句只是：

```
INSERT INTO PartOrder VALUES (001, 001, 001, 4, 'R', NOW(), (4*(SELECT PricePerPart FROM Part WHERE PartID = 001))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:32:00.900

您可能还想看看 SELECT INTO [http://www.postgresql.org/docs/8.1/static/sql-selectinto.html](http://www.postgresql.org/docs/8.1/static/sql-selectinto.html)

或者你可以和

```
INSERT INTO PartOrder
    SELECT (1,1,1,4,'R',NOW, (4*Part.PricePerPart)) 
    FROM Part 
    WHERE Part.PartId = 1; 
```

# asp.net - Directory.GetFiles 中没有绝对路径的文件名

> ID：15427438
> 
> 赞同：0
> 
> 时间：2013-03-15T08:06:42.973
> 
> 标签：asp.net, directory

```
string[] arrVideos = Directory.GetFiles(MapPath("~\\video\\"));

ddlVideos.DataSource = arrVideos;
ddlVideos.DataBind(); 
```

输出下拉列表 ddlVideos：

```
C:\video\movie.mp4 
```

但我想要这个作为输出：

```
movie.mp4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:12:10.963

您可以使用[`Path.GetFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)摆脱完整路径：

```
var arrVideos = Directory.GetFiles(MapPath("~\\video\\"));

var withExtension = arrVideos.Select(p => Path.GetFileName(p));
var withoutExtension = arrVideos.Select(p => Path.GetFileNameWithoutExtension(p)); 
```

**旁注：**您可以省略`ToArray`以避免将整个列表重新复制到新数组中。`Select`扩展方法返回一个`IEnumerable<String>`我猜对`ddlVideos`.

# rss - 从任何博客获取数据的通用标准是什么？

> ID：15427440
> 
> 赞同：1
> 
> 时间：2013-03-15T08:06:52.097
> 
> 标签：rss, xml-rpc, atom-feed

我想从各种博客中提取数据，并且正在通过各种方式来做到这一点：

> 1.  需要用户认证的API
> 2.  XML RPC(不知道哪个都支持)
> 3.  RSS（同样，不确定哪些博客支持它，即使他们支持，从 RSS 提要中可以获得多少。）
> 4.  原子

我知道这不是一个严格与编程相关的问题，但我继续提出这个问题，因为对于使用什么以及哪个更好服务存在很多困惑？

最好不要将 API 与身份验证一起使用，因为您不仅必须处理各种身份验证实现，还必须处理各种 API 限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:39:19.073

RSS 是最早投入使用的。它有局限性。Atom 旨在成为它的替代品，克服了 RSS 的局限性。Atom 只是 XML RPC 的一种特殊形式。换句话说，XML RPC 还有其他用途，而 Atom 就是您想要的它的变体。以上都是API的一种。因此，理想情况下，您要做的是支持 RSS 和 Atom。遗憾的是 Atom 和 RSS 不向后兼容。引用[维基百科上的“Atom”](http://en.wikipedia.org/wiki/Atom_%28standard%29)：

> 特别是，许多博客和 wiki 站点以 Atom 格式提供其 Web 提要。

不推荐@porneL 的解决方案（目前）。然而，在未来，HTML 标记将发生变化，以改进赋予块的语义含义，例如新`<article>`标签。这将是另一种解析文档的方式。它将是最通用的，但在我看来，它还需要很长时间才能变得可靠，因为许多（如果不是大多数）网站都患有“标签汤”综合症。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:08:22.417

最*通用*的“标准”是抓取和解析 HTML。

```
wget -m http://example.com/ 
```

你如何做到这一点取决于你想要完成什么以及你想要成为多么普遍。

您可以使用类似于 Readability 使用的启发式方法在网站上查找文章。您可以检测和特例流行的博客平台。

# django - models.Meta.ordering vs ModelAdmin.ordering – 如何在 Meta.ordering 测试后恢复性能？

> ID：15427441
> 
> 赞同：3
> 
> 时间：2013-03-15T08:06:59.150
> 
> 标签：django, sorting, django-models, django-admin

**设置**

我有两个 Django (1.4.2) 模型，如下所示：

```
class CoreData(models.Model):
   cdid = models.AutoField(primary_key=True,editable=False)
   name = models.CharField(max_length=100,db_index=True,unique=True)
   # etc

class DetailData(models.Model):
    cdid = models.OneToOneField(CoreData,primary_key=True)
    detl = models.CharField(max_length=100)
    # etc 
```

以及以下管理员定义：

```
class CoreDataAdmin(admin.ModelAdmin):
    ordering = ['name']
    readonly_fields = ('etc', )
admin.site.register(CoreData, CoreDataAdmin)

class DetailDataAdmin(admin.ModelAdmin):
    ordering = ['cdid__name']
    readonly_fields = ('etc', )
admin.site.register(DetailData, DetailDataAdmin) 
```

在 Django 的管理界面中，这会导致在概览中对`CoreData`和进行预期的排序`DetailData`，换句话说，两个列表都按`CoreData` `name`字段的升序排序。

但是，*没有*`DetailData`排序的是入口页面的下拉列表。它按升序`cdid`排列。

总有一天你想改变这一点。

由于这个简化插图范围之外的原因，我像这样扩展了模型：

```
class CoreData(models.Model):
    cdid = models.AutoField(primary_key=True,editable=False)
    name = models.CharField(max_length=100,db_index=True,unique=True)
    # etc
    class Meta:
        ordering = ['name']

class DetailData(models.Model):
    cdid = models.OneToOneField(CoreData,primary_key=True)
    detl = models.CharField(max_length=100)
    # etc
    class Meta:
        ordering = ['cdid__name'] 
```

而且我相信我`ordering`在第一次测试中保留了管理员定义。

**观察**

我所做的更改导致 Django 测试服务器上的处理时间增加（按数量级）。*即使是项目概览页面*也是如此。我什至看到了损坏的管道（由于我要说的是浏览器重试），在修改之前几乎没有延迟。所有 CPU 内核保持不变；大概是由于数据库请求的急剧增加而发生了减速。（我们这里不是在谈论数万条数据库记录，此外，受影响的管理项目概览页面显示的项目数量有限。）

到目前为止，一切都很好：*如果我能恢复那个效果*就好了。但即使改回原来的定义也不能改善这种情况。

**问题**

*   如何恢复测试服务器的“旧”性能？我需要在哪里清理？我已经恢复到原始定义并尝试（希望不大，但谁知道）一些`manage.py`没有任何结果的命令。DB 结构不受影响；那里没有任何改变。
*   是否有关于这两种`ordered`机制应该如何互操作的文档？到目前为止还没有发现。
*   您对此有何其他经验，或者每个人都只是使用[`ModelForm`“ModelChoiceField”和`queryset`方法](https://stackoverflow.com/a/1474175)？

# html - 边框折叠和 colspan 的奇怪行为

> ID：15427442
> 
> 赞同：6
> 
> 时间：2013-03-15T08:06:59.220
> 
> 标签：html, css, html-table

我正在尝试用 HTML 制作组织结构图。代码相当简单，但我在 Chrome/Safari 和 Opera 中的渲染存在一些问题。

结果应该是这样的，因为它适用于 Firefox 和 IE：

![期望的结果，Firefox 和 IE](../Images/4a574463c6d096b856e2232b5cda9b21.png)

这是在 Chrome 和 Safari 中

![Chrome 和 Safari](../Images/6833586417f76b1e621104f7319007c0.png)

这是在 Opera 中：

![歌剧](../Images/de071c353da81bbefced84dca382c08d.png)

问题来自`border-collapse: collapse`CSS 中的属性。如果我使用旧的编码风格`cellspacing="0" cellpadding="0"`，它或多或少地工作，但在 HTML5 中无效。

我创建了一个 jsFiddle 来显示问题：http: [//jsfiddle.net/aGVp4/7/](http://jsfiddle.net/aGVp4/7/)

我的 HTML：

```
<table cellspacing="0" cellpadding="0">
    <tr>
        <td colspan="3"></td>
        <td colspan="2" class="case"></td>
        <td colspan="3"></td>
    </tr>
    <tr>
        <td colspan="3"></td>
        <td colspan="2" class="case"></td>
        <td colspan="3"></td>
    </tr>
    <tr>
        <td></td>
        <td colspan="3" class="right bottom"></td>
        <td colspan="3" class="bottom"></td>
        <td></td>
    </tr>
    <tr> <!-- No colspan here, to make the layout symmetrical -->
        <td class="right"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td class="right"></td>
        <td></td>
    </tr>
    <tr>
        <td colspan="2" class="case"></td>
        <td colspan="4"></td>
        <td colspan="2" class="case"></td>
    </tr>
</table> 
```

还有我的 CSS：

```
.orgchart {
    border-spacing: 0;
    border-collapse: collapse;
}

td {
    width: 3em;
    height: 1em;
}

td.case {
    border: 1px solid black;
}

td.right {
    border-right: 1px solid black;
}

td.bottom {
    border-bottom: 1px solid black;
}

td.top {
    border-top: 1px solid black;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T22:20:46.240

这些问题似乎是由浏览器中折叠边框模型的不同解释引起的。[边界冲突解决](http://www.w3.org/TR/CSS21/tables.html#border-conflict-resolution)是根据单元格而不是插槽定义的，当您使用 时，`colspan=3`一个单元格跨越 3 个插槽。

第 2 行的第 2 个单元格有实心底边框，第 3 行的第 2 个单元格没有顶边框。当边界崩溃时，固体不会获胜。但是这些单元格只是部分相邻，因为它们跨越不同的列。浏览器对此的处理方式不同。Chrome 使边框跨越上部单元格的所有列，而 Firefox 使边框仅跨越一列，即单元格共享的那一列——这更合理，但 CSS 2.1 似乎没有解决这个问题。

我尝试使用`border: hidden`，这对 Chrome 有帮助，但会在 Opera 上引起新问题。

似乎有两种选择。您可以使用 HTML 属性，如果它们可以完成这项工作。尽管在 HTML5 CR 中宣布过时和禁止，但同一文档还需要在浏览器中继续支持它们。

但是一种更简洁、或许更健壮的方法是通过添加更多空单元格来避免该问题。这意味着将两个第 3 行的单元格分成两个单元格，以便其中只有一个与第 2 行的单元格共享边界。这使得表格更像网格，但本质上并不复杂：

```
<table class="orgchart">
<tr>
    <td colspan="3"></td>
    <td colspan="2" class="case"></td>
    <td colspan="3"></td>
</tr>
<tr>
    <td colspan="3"></td>
    <td colspan="2" class="case" ></td>
    <td colspan="3"></td>
</tr>
<tr>
    <td></td>
    <td colspan="2" class="bottom"></td>
    <td class="right bottom"></td>
    <td  class="bottom" ></td>
    <td colspan="2" class="bottom" ></td>
    <td></td>
</tr>
<tr> <!-- No colspan here, to make the layout symmetrical -->
    <td class="right"></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td class="right"></td>
    <td></td>
</tr>
<tr>
    <td colspan="2" class="case"></td>
    <td colspan="4"></td>
    <td colspan="2" class="case"></td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T05:10:41.793

在 colspan 下添加一个新的空行将`<tr></tr>`解决这个问题（不是一个漂亮的解决方案，但有效）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:54:19.520

我玩了你的 jsfiddle，并找到了解决 Chrome 和 Safari 问题的方法。

也适用于 FF 和 IE，但未在 Opera 上测试。

试试这个（[jsfiddle](http://jsfiddle.net/aGVp4/5/)）：

```
td.bottom {
  border-top: 1px solid white; // this is the hack
  border-bottom: 1px solid black;
}
td.right.bottom {
  border-top: none; // fix for IE
} 
```

由于这是一个 hack，随着您的图表变得复杂，它可能无法正常工作，但希望这在短期内有所帮助。

# sql - SQL Server 转换十进制

> ID：15427445
> 
> 赞同：0
> 
> 时间：2013-03-15T08:07:11.210
> 
> 标签：sql, sql-server, stored-procedures, type-conversion

我需要将 Bacice Salary 转换为十进制值，我想在其中给出

```
SELECT CONVERT(DECIMAL(10,2) 
```

这是我的程序：

```
ALTER Procedure [dbo].[buson_getEMPLOYEEIDNAME_s]       
(  
    @Month INT,
    @Year INT
)  
As        
Begin        
   SELECT 
      EmpId, Name,
      (BUSON_SALARYSTR.BASICSALARY / dbo.GetNoofDaysPerMonth(@Month, @Year)) *   
 (dbo.GetNoofDaysPerMonth(@Month, @Year) - dbo.NoofdaysAbsent(EmpId,@Month,@Year)) as Basicsalary ,BUSON_SALARYSTR.CODE  
   FROM 
      BUSON_EMP        
   INNER JOIN 
      BUSON_SALARYSTR ON BUSON_SALARYSTR.CODE = BUSON_EMP.SalaryStructure 
      AND BUSON_EMP.EmpId IN (SELECT DISTINCT T1.EmpId 
                              FROM BUSON_ATTENDANCE T0 
                              JOIN BUSON_ATTENCHILD T1 ON T0.DocEntry = T1.DocEntry AND Year(T0.DateofAttendance) = @Year AND MONTH(T0.DateofAttendance) = @Month)     
End 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T08:25:56.860

只需`convert`在您的选择查询中使用

```
Select EmpId,Name,
convert(decimal(10,2),(BUSON_SALARYSTR.BASICSALARY / dbo.GetNoofDaysPerMonth(@Month, @Year)) *   
 (dbo.GetNoofDaysPerMonth(@Month, @Year) - dbo.NoofdaysAbsent(EmpId,@Month,@Year))) 
 as Basicsalary ,... rest of your code 
```

# linux - Unix 域套接字辅助数据

> ID：15427447
> 
> 赞同：1
> 
> 时间：2013-03-15T08:07:27.733
> 
> 标签：linux, process, ipc

对于linux上使用fork()的多进程实现程序，socketpair()用于父子进程之间的通信。

在上面的场景中，在进程之间发送辅助数据有什么用？socketpair() 已经提供了父子之间的双向通信。是在 2 个子进程之间共享文件描述符吗？

澄清，

1.  当我们总是可以使用 socketpair() 连接的套接字来回传递有效负载时，为什么需要辅助数据传递？什么是用例场景？
2.  我们可以在父进程中创建 pipe() 或 socketpair()，然后 fork 来创建子进程。然后父母和孩子可以通过创建的文件描述符进行通信。辅助数据（通过 unix 套接字）是否有助于两个*子*进程之间的通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:20:25.993

如果不了解您正在检查的软件的设计，这很难说。 `socketpair()`是一种创建两个套接字连接并将每个描述符传递给另一个进程的简单方法，这样您就可以跳过 bind()、accept()、connect() 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-01T03:16:25.833

套接字对是在父子之间传递消息（数据报）或流数据的好方法。但它们绝不是进程间通信 (IPC) 的唯一手段。同一主机上进程的 IPC 机制的其他示例包括：共享内存、信号、锁定文件，甚至 Internet 套接字。特定的应用程序要求和通信的性质（即需要发生多少来回）将决定哪种方法最合适。

您将使用套接字对在两个进程之间交换数据报或流数据。辅助数据函数允许您发送其他无法通信的有趣内容，例如文件描述符。Unix 进程要么在创建它们时继承文件描述符，要么随时使用辅助数据传递它们（参见`man cmsg`和`man sendmsg`）。

**通讯示例：**

辅助数据的另一个有用功能是验证连接的远程端（[例如：传递凭据](http://www.oocities.org/margineantm/syspp/background/ancillary.html)）——操作系统可以通过辅助数据告诉您，哪个用户在消息或连接的另一端对等。（诚​​然，当父母和孩子在套接字对的各自末端作为同一个有效用户运行时，后者的用处不大）。

辅助数据允许进程交换在调用 fork() 时还不存在的东西。例如，子工作进程可以在 fork() 之后几分钟创建一个新的临时文件，并使用它在出生时收到的套接字对的一端将其文件描述符传递回父级。然后父进程可以再次将此文件描述符向下传递给不同的子进程。

父级拥有比子级更多的权限也很常见，因此父级中提升的权限可以允许`open()`在受保护的文件上成功，运行一些不基于 Unix 权限的授权算法，并将描述符传递给子级工人。

要传递辅助数据，您需要事先有某种方式进行通信。我所说的“某种方式”是指任何你可以调用`sendmsg()`的东西。

[示例：通过 Unix 套接字传递文件描述符](http://poincare.matf.bg.ac.rs/~ivana/courses/tos/sistemi_knjige/pomocno/apue/APUE/0201433079/ch17lev1sec4.html)

# vlc - libvlc 和 sout 选项

> ID：15427452
> 
> 赞同：4
> 
> 时间：2013-03-15T08:07:43.603
> 
> 标签：vlc, libvlc

我想在 libvlc 中使用 sout 选项，就像在相应的命令行中一样：

```
vlc rtsp://address --sout '#duplicate{dst=display,dst=standard{access=file,mux=ts,dst=/tmp/go.mpg}}' 
```

但不幸的是，它没有被考虑在内。有人告诉我，在 libvlc 中（还）没有实现 sout。知道如何找到解决方案吗？我基本上只是想将在屏幕上播放的 rtsp 流转储到文件中。这里实际上没有任何转码 - 只是一个转储。如果不可能，是否有一个好地方可以修补 libvlc 并简单地将流转储到文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T06:16:47.913

启用 sout 后，libvlc 中的神奇行变成了：

```
libvlc_media_add_option(p_md, ":sout=#stream_out_duplicate{dst=display,dst=std{access=file,mux=ts,dst=/sdcard/go.mpg}}"); 
```

# c# - 异步等待和共享对象

> ID：15427460
> 
> 赞同：1
> 
> 时间：2013-03-15T08:08:12.347
> 
> 标签：c#, wpf, multithreading, asynchronous, async-await

我正在使用 async / await 模式对对象执行一些 CPU 繁重的操作（我的方法是可等待的），它按预期工作而不会阻塞 UI 线程。

但是，当我将对象作为参数传递给新窗口的 ctor 时（新窗口是需要访问已处理对象的日志记录窗口），我的 UI 线程阻塞（我有点理解为什么）。

为了解决这个问题，我可以将计算的执行包装在

```
Task.Run(async () => { await _myObject.PerformCalculations(); }); 
```

然后只需调用

```
var logWindow = new LogWindow(_myObject);
logWindow.Show(); 
```

这可行（当然），但是当对象引发事件时，我有很多调度程序调用，如果没有 Task.Run 调用，我就不必处理这些调用。

所以，我的问题是，我可以在没有 Task.Run 调用的情况下以某种方式将对象传递到日志记录窗口而不阻塞我的 UI 线程吗？

**编辑**

我很抱歉这个精简的例子，我实际上是想让这个问题尽可能简单易懂并且惨遭失败。

以更一般的方式：我有一个在某些条件下引发事件的对象。引发事件时，我想在 UI 上执行更新。事件总是从使用 Task.Run(...) 创建的线程触发。因此，调度程序调用 UI 线程。所以，我想使用 async / await 执行计算（已经工作）并将对象传递到我的日志窗口（块）。

当我使用 Task.Run 时，当然一切正常，但无论我从 UI 线程订阅对象的事件，我都必须使用调度程序调用 UI 线程，因为该事件是从 Task.Run 创建的线程触发的。我想避免这些调度程序调用。**事实上，如果我不将对象传递到日志记录窗口并调用 Show() 方法，UI 线程就不会阻塞，一切都会按预期工作。事件处理程序中不需要调度程序调用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:22:21.703

很难清楚地了解您的情况。但在我看来，你可以做一些重构。

考虑一下`PerformCalculations`：这是一个返回的方法`Task`（因此将自己宣传为`async`- 友好的），它会占用大量 CPU （因此实际上*不是* `async`- 友好的）。我首先要看的是划分逻辑，`PerformCalculations`以便受 CPU 限制的部分使用它们自己的`Task.Run`，`PerformCalcuations`作为一种`async`不会（直接）影响 CPU 的方法：

```
public async Task PerformCalculationsAsync()
{
  while (...)
  {
    await Task.Run(<next calculations>);
    RaiseEvent();
  }
} 
```

这种重构的重点是将 CPU 代码`Task.Run`与 UI-ish 代码引发事件分开。`IProgress<T>`如果您的事件在逻辑上是进度更新，或者这种重构对您的代码来说太难了，也可以考虑使用标准方法；`IProgress<T>.Report`可以从任何线程调用。

[`async`您可能还会发现我关于构造函数](http://blog.stephencleary.com/2013/01/async-oop-2-constructors.html)和[`async`属性](http://blog.stephencleary.com/2013/01/async-oop-3-properties.html)（尤其是数据绑定部分）的帖子很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:11:33.660

```
// awaitable as well - await this in another async void/Task method (e.g. commanding)
public async Task MyAsyncProcess()
{
    await _myObject.PerformCalculations();
    var logWindow = new LogWindow(_myObject);
} 
```

`Task.Run()`同步执行异步方法，因此在这种情况下，您几乎不需要使用 async/await 模式。在执行代码的地方创建方法`async`并在其他地方等待它。或者使用一些`FireAndForget`逻辑。

# jquery - 如何在 jQuery mobile 中循环元素？

> ID：15427462
> 
> 赞同：1
> 
> 时间：2013-03-15T08:08:19.667
> 
> 标签：jquery, jquery-mobile

我有 3 个字段：

```
<input type="datetime" name="input-data" id="datetime-start">
<input type="datetime" name="input-data" id="datetime-end">
<input type="text" name="input-data" id="text-basic"> 
```

而且我需要检查是否输入了某些内容，所以我首先喜欢它`jQuery.each('[name="input-data"]', function()`并`this`在循环中使用，但会出现一些错误。经过小调试后，我找到了类似的方法`jQuery.each(jQuery('[name="input-data"]'), function(key, value)`，但是当我尝试这样做时，`console.log(value.val());`我得到了错误。所以我决定看看里面有什么`value`，很惊讶——只有一根绳子`<input type="datetime" name="input-data" id="datetime-start">`。那么我如何循环遍历所有输入值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:10:49.480

You use [`each`](http://api.jquery.com/each/) on a jQuery instance, e.g.:

```
jQuery('[name="input-data"]').each(function() {
    // Here, `this` is the DOM element. If you want to use jQuery methods,
    // wrap the element in a jQuery instance:
    var input = jQuery(this);

    // Now, input.val() will give you the value
}); 
```

jQuery's API is sometimes a bit confusing. This is one of those times. jQuery has two similar but different functions: The `each` you call on jQuery instances (see above), and [`jQuery.each`](http://api.jquery.com/jQuery.each/), which you can use to loop through arrays, objects, and array-like objects.

Your code using `jQuery.each(jQuery('[name="input-data"]', function...` does work, because jQuery instances are array-like, but then within the function you weren't wrapping the DOM element, which is why `val()` didn't work. But the above is the normal way to loop through a set of matched elements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:11:01.863

Try

```
$('input[name="input-data"]').each(function(el){
    console.log($(this).val());
}) 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/X6vhg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:11:41.087

```
$(document).ready(function(){
   $('input').each(function(){
     console.log($(this).val());
    });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:12:33.430

你使用`.each()`不正确。尝试这个：

```
jQuery('[name="input-data"]').each(function() {
    // Use $(this) to access current object
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-15T08:13:07.557

您正在研究 HTML5，不是吗？为什么不使用给定的 html5 验证？只需设置属性“required='true'”就可以了；-)

在 jquery mobile 中也有一个很好的方法来做到这一点。如果我没记错的话，您必须将“必需”类设置为所需的输入属性。以供参考：

[http://www.raymondcamden.com/index.cfm/2012/7/30/Example-of-form-validation-in-a-jQuery-Mobile-Application](http://www.raymondcamden.com/index.cfm/2012/7/30/Example-of-form-validation-in-a-jQuery-Mobile-Application)

# ruby-on-rails - 部署到 Heroku 时资产编译失败

> ID：15427467
> 
> 赞同：0
> 
> 时间：2013-03-15T08:08:34.613
> 
> 标签：ruby-on-rails, ruby, coffeescript, asset-pipeline

我想将我的 Rails 应用程序部署到 heroku，但资产编译失败。在本地环境中，它运行良好。

```
 Your bundle is complete! It was installed into ./vendor/bundle
       Cleaning up the bundler cache.
-----> Writing config/database.yml to read from DATABASE_URL
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       Error: Parse error on line 13: Unexpected 'INDENT'
       (in /tmp/build_iztv4ybnwpqh/app/assets/javascripts/require_dir/view_after
_key_recieve.js.coffee) 
```

日志说第 13 行有意外缩进，但我找不到任何错误。

```
root = exports ? this
class root.ViewAfterKeyRecieveViewModel
  constructor: ->
    @isDecoded = ko.observable false
    @encryptedKey = ko.observable ''
    @personalPassword = ko.observable ''
    @decodePassword = ''

    # do when @personalPassword is changed
    ko.computed =>
      if @personalPassword() isnt ''
        @decodePassword = sjcl.decrypt(@personalPassword(), @encryptedKey())
      simg = new ScrambledImage044 "/assets/image61.png" # THIS IS LINE 13
        height: 16
        width:  12
        canvasId: 'original'
        seed:   @decodePassword
      simg.fix()
      simg.paint()

  createEncryptedKey: ->
    # create key and set to @encryptedKey
    @encryptedKey sjcl.encrypt("todo", "hirakegoma") 
```

谢谢你的好意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:20:08.647

试试这个 ：

```
simg = new ScrambledImage044 "/assets/image61.png",  # notice the comma
    height: 16
    width:  12
    canvasId: 'original'
    seed:   @decodePassword 
```

或这个 ：

```
simg = new ScrambledImage044( "/assets/image61.png"
    height: 16
    width:  12
    canvasId: 'original'
    seed:   @decodePassword
) # notice the parens 
```

# sql - Play2 和 Anorm，我如何让一对多关系中的一个意识到它是多数

> ID：15427469
> 
> 赞同：2
> 
> 时间：2013-03-15T08:08:39.207
> 
> 标签：sql, scala, playframework-2.1, anorm

我在用户和 LinkedAccount 之间有一对多的关系，一个用户可以有多个关联的帐户。

`LinkedAccount(id, provider_user_id, salt, provider_id, auth_method, avatar_url, User.findBy(user))` 我通过在解析器中加载 LinkedAccount 和它的用户没有问题：

我不知道如何用它的 LinkedAccounts 加载用户。我想我需要让用户知道 LinkedAccounts .. 但是如何？

每次我想查找用户是否有给定类型的链接帐户时，我都希望摆脱对数据库的额外 sql 调用。目前我喜欢这样：

```
def findLinkedAccountByUserAndProvider(userId: Pk[Long], providerId : String) = {
    DB.withConnection {
      implicit connection =>
        SQL("select * from linked_account la where la.user_id = {userId} and la.provider_id = {providerId}")
          .on("userId" -> userId, "providerId" -> providerId).as(LinkedAccount.simple.singleOpt)
    }
  } 
```

或者当用户知道它的 LinkedAccounts 并且 LinkedAccount 知道它的用户时，这会导致问题吗？

**用户：**

```
case class User(id: Pk[Long] = NotAssigned,
                firstName: String,
                lastName: String,
                email: String,
                emailValidated: Boolean,
                lastLogin: DateTime,
                created: DateTime,
                modified: DateTime,
                active: Boolean)

object User {
  val simple = {
    get[Pk[Long]]("id") ~
      get[String]("first_name") ~
      get[String]("last_name") ~
      get[String]("email") ~
      get[Boolean]("email_validated") ~
      get[DateTime]("last_login") ~
      get[DateTime]("created") ~
      get[DateTime]("modified") ~
      get[Boolean]("active") map {
      case id ~ first_name ~ last_name ~ email ~ email_validated ~ last_login ~ created ~ modified ~ active =>
        User(id, first_name, last_name, email, email_validated, last_login, created, modified, active)
    }
  }
} 
```

**关联账户：**

```
case class LinkedAccount(id: Pk[Long] = NotAssigned,
                         providerUserId: String,
                         salt: Option[String],
                         providerId: String,
                         authMethod: Option[String],
                         avatarUrl: Option[String],
                         user: User
                         )

object LinkedAccount {
  val simple = {
    get[Pk[Long]]("id") ~
    get[String]("provider_user_id") ~
    get[Option[String]]("salt") ~
    get[String]("provider_id") ~
    get[Option[String]]("auth_method") ~
    get[Option[String]]("avatar_url") ~
    get[Pk[Long]]("user_id") map {
      case id ~ provider_user_id ~ salt ~ provider_id ~ auth_method ~ avatar_url ~ user  =>
        LinkedAccount(id, provider_user_id, salt, provider_id, auth_method, avatar_url, User.findBy(user))
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:58:55.390

由于我没有得到答案，我将提供我自己的：

在我定义的案例类中：

```
case class User(id: Pk[Long] = NotAssigned,
                firstName: String,
                lastName: String,
                email: String,
                emailValidated: Boolean,
                lastLogin: DateTime,
                created: DateTime,
                modified: DateTime,
                active: Boolean) {

lazy val linkedAccounts: Seq[LinkedAccount] = DB.withConnection("test") { implicit connection =>
    SQL(
      """
        select * from linked_account la
        join users on la.user_id = users.id
        where la.id = {id}
      """
    ).on(
      'id -> id
    ).as(LinkedAccount.simple *)
  }
} 
```

然后通过以下方式获取帐户：

```
val linkedAccounts = user.linkedAccounts 
```

[在这里](https://gist.github.com/guillaumebort/2788715)找到这个

# javascript - 使用paperjs在画布中翻译坐标系

> ID：15427471
> 
> 赞同：1
> 
> 时间：2013-03-15T08:08:54.637
> 
> 标签：javascript, html, canvas, paperjs

我有必要在 paperjs 中翻译画布的坐标系，以便根据具体情况，画布的左上角不是 (0,0)。通过更改坐标，我希望翻译整个视图。可以在paperjs中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:43:38.713

你是想使用canvas API 做自己的绘图，还是想为paperjs 转换坐标空间？`context.save()`第一种情况可以通过使用和包围您的转换和绘图来处理`restore()`。后者可以由[layer](http://paperjs.org/reference/layer)中的转换 API 处理。

# php - Why variable can not start with a Number?

> ID：15427476
> 
> 赞同：5
> 
> 时间：2013-03-15T08:09:53.473
> 
> 标签：php, variables, numbers

I am working in PHP, I have to define variables in sequence to save in Mysql. Both field name and variable name must be same in my case.

Can I declare a variable like this

```
$1 OR $2 etc 
```

If not why not and if yes why yes?

I tried:

```
$id = 0;
$6  = $_REQUEST['6'];
$7  = $_REQUEST['7'];
$8  = $_REQUEST['8'];

$xary = array('6','7','8','9')

$oAppl->save_record("tablename", $id, "id"); 
```

which give me error.

Also can I create and use fields in Mysql with the same name?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T08:15:11.027

这就是 PHP 的设计方式。您不能以数字开头的变量名称。

你可以做的是使用下划线：

```
$_6 = $_REQUEST['6']; 
```

**编辑：** 由于 PHP 中的变量以**$**开头，因此变量可能以数字开头，但这对大多数人来说会有点混乱，因为没有其他语言允许变量以数字开头（或者至少我没有不知道）。

但是让我们假设允许以数字开头的变量。

你能想象一个同事对你说：**23 等于 74？**这有点令人困惑。听到**n23 等于 74**更有意义。您知道**n23**是一个变量，而无需明确说明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-27T15:03:32.553

是的，您可以在 PHP 中声明以数字开头的变量：

```
${'1'} = 'hello'; 
```

`"1"`这用PHP 中的变量名声明了变量。

要访问它，您需要再次使用大括号语法：

```
echo ${'1'}; 
```

这是必要的，因为在 PHP 代码中您不能逐字编写：

```
echo $1; 
```

那会产生语法错误。

* * *

> 我也可以在 Mysql 中创建和使用同名的字段吗？

是的，你可以，它的工作方式与 PHP 类似。在 Mysql 中，您还需要引用列的仅数字标识符，引用不同：

```
mysql> create table test (`0` INT);
mysql> describe test;
+-------+---------+------+-----+---------+-------+
| Field | Type    | Null | Key | Default | Extra |
+-------+---------+------+-----+---------+-------+
| 0     | int(11) | YES  |     | NULL    |       |
+-------+---------+------+-----+---------+-------+ 
```

这里使用了反引号（默认 Mysql 配置）。PHP 手册和 Mysql 手册都解释了这方面的细节，在 Stackoverflow 网站上也有许多关于引用 PHP 和 Mysql 标识符的相关问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-20T14:10:49.877

它没有任何意义。但是您仍然可以使用变量的动态名称。

```
<?php

$name = 1;

$ $name = 'name';
// $ 1 = 'name'; // the same, but syntax not allowed

var_dump($ $name); // value of $1
var_dump(${$name});
var_dump($$name); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T08:14:53.930

好好想想这个：

```
$2d = 42;
$a = 2d; 
```

什么是一个？2.0？还是42？

提示，如果你不明白，数字后的 d 表示它之前的数字是双字面量

难以明确地确定编译单元中的数字字符是表示文字还是标识符。

由于这个原因，空间不重要的语言（如 ALGOL 和原始 FORTRAN，如果我没记错的话）不能接受数字来开始标识符。

这可以追溯到 - 在表示存储或数字基数的特殊符号之前。

有关更详细的讨论，请访问[为什么变量名不能以数字开头？](https://stackoverflow.com/questions/342152/why-cant-variable-names-start-with-numbers)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-23T08:45:14.887

为了增加@hakre的答案，您还可以为了简洁而丢失引号

`${1}`

但唉，你不能将它与字符串值结合起来。我做了一些实验，显然 PHP 需要一个字符串或一个数字值。你可以在大括号内做任何事情，最终返回一个数字或一个字符串值，或者隐式转换为任何一个。

```
<?php
function eight (){
   return 8;
}
${7+'fr'} = ${7*'fr'+1} = ${'hi'.((string)8).'hi'} = ${7.8910} = ${eight()} = ${(eight()==true)+4} = 'hi';

var_dump(get_defined_vars()); 
```

输出

```
array(8) { ["_GET"]=> array(0) { } 
["_POST"]=> array(0) { } 
["_COOKIE"]=> array(0) { } 
["_FILES"]=> array(0) { } 
["7.891"]=> string(2) "hi" 
["7"]=> string(2) "hi" 
["1"]=> string(2) "hi" 
["hi8hi"]=> string(2) "hi"
["8"]=> string(2) "hi" 
["5"]=> string(2) "hi" } 
```

另外我发现了一些有趣的东西：

```
<?php
${false} = 'hi';
${true} = 'bye';

var_dump(get_defined_vars()); 
```

输出

```
array(6) { ["_GET"]=> array(0) { } 
["_POST"]=> array(0) { } 
["_COOKIE"]=> array(0) { }
[""]=> string(2) "hi" 
["1"]=> string(3) "bye" } 
```

这意味着`false`计算为空字符串，而不是 0 和`true`1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T08:15:23.873

这是某种遗产，从 C、Fortran 等早期开发的语言开始。此外，一些 shell 脚本语言对以数字开头的标识符（即输入参数）有特殊的方法。PHP 标准只是决定遵守这个一般规则。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T08:12:28.567

正如[php 文档](http://php.net/manual/en/language.variables.basics.php)所说，您不能：

> 基本
> 
> *PHP 中的变量由一个美元符号后跟变量名表示。变量名区分大小写。*
> 
> 变量名称遵循与 PHP 中其他标签相同的规则。有效的变量名称以**字母或下划线开头**，后跟任意数量的字母、数字或下划线。
> 
> 作为一个正则表达式，它可以这样表达： `[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*`

关于 MySQL，[文档](http://dev.mysql.com/doc/refman/5.1/en/identifiers.html)说：

> 标识符可以以数字开头，但除非引用，否则标识符可能不仅仅由数字组成。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-15T08:13:56.400

您不能在 PHP 中定义以数字开头的变量。看看下面的链接。它具有定义变量的基础知识。

[**PHP 变量 - 基础**](http://www.php.net/manual/en/language.variables.basics.php)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-15T08:48:19.353

您不能命名以数字开头的变量（或者只是一个数字）。您可以做的是使用另一个字符开始（例如，和下划线，或 3 个字母组合，说明它是什么类型的变量：

```
$_1 = $_REQUEST['1']; 
```

或者

```
$str1 = $_REQUEST['1']; 
```

您还可以使用数组：

```
$retrievedValuesFromDB = array();
$retrievedValuesFromDB['1'] = $_REQUEST['1']; 
```

这样你就可以同时遍历两者：

```
$i=1;
while ($i<mysql_num_rows())
{
    $retrievedValuesFromDB[$i] = $_REQUEST[$i];
    $i++;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-10T09:33:16.277

首先`PHP`设计为`a variable can't start with a number`. 大多数语言都遵循相同的命名规则。这主要用于`better readability`和`compiling performance optimisation`。编译时在词法分析中避免回溯。

假设变量如下：

```
test = 12;
123test = 12; 
```

`test`当它遇到字母't'时，编译器会立即知道它是一个标识符。

如果是`123test`，编译器将无法确定它是数字还是标识符，直到它在 't' 之后命中`3`，因此它需要回溯。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-29T13:59:26.500

**所有说您可以在 PHP 中成功创建 NUM 变量的答案都是错误的！**

所有说 {num} 实际上创建一个名为 num 的变量的答案都是错误的。

如果我们使用 {1} 创建一个数字变量，则 $GLOBALS 变量将没有它。

但是返回的数组`get_defined_vars()`可能会有它（我有时不明白）......

现在如果我以另一种方式应用这个逻辑，通过使用 $GLOBALS 来定义一个变量，同样的事情肯定会发生。

绝对不建议使用这种（脏/不稳定）逻辑（如文档中直接描述的那样），我很确定您在编程时永远不会缺少变量名，除非您过于注重语法简洁。

因此，请避免在开始时使用数字/作为变量名，就像您在其他语言中所期望的那样

# javascript - Autoplaying and manual playing youtube video on iphone not working by using javascript

> ID：15427477
> 
> 赞同：1
> 
> 时间：2013-03-15T08:09:56.577
> 
> 标签：javascript, youtube-api

```
 function onYouTubeIframeAPIReady() {

      players = new YT.Player('player1', {
      height: '640',
      width: '640',
      videoId: 'E_fXGeg_UA4',
     events: 
     {
        'onReady': onPlayerReady
       }
    });

   function onPlayerReady(event) {
    event.target.playVideo();
  } 
  } 
```

`players.playVideo();` also not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T21:55:58.883

我在使用本机查看器的 iOS 应用程序上遇到了同样的问题，在这种情况下，可以使用属性[强制](https://stackoverflow.com/a/9050215/1271086)UIWebView自动播放视频。`mediaPlaybackRequiresUserAction`

```
self.webViewer.mediaPlaybackRequiresUserAction = NO; 
```

你可以走了。两者都`player.playVideo()`很好`event.target.playVideo()`。从 iOS 6.1 开始，无法诱使 Safari 启用 autoplay/`playVideo()`方法

# error-handling - In Nginx, it has to be autoindex or directory forbidden error?

> ID：15427480
> 
> 赞同：1
> 
> 时间：2013-03-15T08:10:03.397
> 
> 标签：error-handling, nginx

I kept getting "directory forbidden error" on image directory /images/upload.

By adding autoindex on that directory, I can remove this error. But I don't want people to see what are under that directory.

How do I remove this error?

Nginx config

```
server
{
  listen       80;
  server_name  www.no-dev.com;
  index        index.php index.html index.htm;
  root         /opt/www/no_web;

  location ~ .*\.(php|php5)?$
  {
    #fastcgi_pass unix:/tmp/php-cgi.sock;
    fastcgi_pass  127.0.0.1:9000;
    fastcgi_index index.php;
    include       fastcgi.conf;
  }

  #location /images {
  #  autoindex on;
  #}

  location ~* \.(css|js)$ {
              add_header  Last-Modified: $date_gmt;
              expires 1y;
              access_log off;
  }

  location ~* \.(jpg|jpeg|gif|png|ico|bmp|swf)$ {
              expires max;
              access_log off;
  }
  access_log logs/no-dev.log main;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-11T10:09:28.520

返回索引页或 403 错误并不是目录的唯一选择。例如，有时，404 错误更合适。特别是当您想隐藏文件夹时。

在这种情况下，有一种优雅的方式可以做任何你想做的事情：

```
# Create a fictive location which does what you want (404 here) 
location /404/ {
    internal;
    return 404;
}

# Use this fictive location as a folder index. That's all.
index /404/; 
```

目录索引请求将由（虚构的）“/404/”内部位置处理，并将导致 404 错误。请注意，这是一个*内部*位置。**客户端浏览器不会以任何方式重定向**。它只是为他的请求获得一个 404 返回码。

这里，404 错误只是一个例子。当您重定向到内部位置时，您可以做任何您想做的事情。

因此，与其返回 403 错误代码、使用自动索引或试图用虚假页面隐藏您的问题，您可以完全按照您的期望做 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:51:23.720

您有以下设置：

```
index        index.php index.html index.htm; 
```

这意味着当自动索引关闭时，您的网络服务器将对目录路径的每个请求：

1.  在该目录中查找 index.php，如果找到则返回
2.  如果未找到 index.php，它将查找 index.html 并返回
3.  如果 index.html 也没有找到，它将返回 index.htm
4.  如果没有找到，它将返回 403

因此，如果您想避免 403 错误页面，您需要在该目录中设置 index.php、index.html 或 index htm。

或者，您可以设置`error_page 403 some_page.html;` 返回看起来不同的 403 结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T01:11:36.963

这将返回 403 目录禁止，没有错误，仅适用于[http://example.com/](http://example.com/)：

```
location = / {
    return 403;
} 
```

所以，在你的情况下：

```
location = /images/upload/ {
    return 403;
} 
```

这将只为 /images/upload/ 目录返回 403 目录禁止，没有错误。

# android - how to define different activity's attribute for phone and tablet in AndroidManefist.xml?

> ID：15427482
> 
> 赞同：1
> 
> 时间：2013-03-15T08:10:06.093
> 
> 标签：android, android-manifest

I have a activity, it has attribute in `AndroidManefest.xml`:

```
android:windowSoftInputMode="adjustResize" 
```

but this attribute will introuce some performance in tablet, so I want change it to:

```
android:windowSoftInputMode="adjustPan" 
```

I think if we can define a variable in res/values, which is different for phone and tablet. then apply this value AndroidManefist as below:

```
android:windowSoftInputMode="someVlaueDefineInResources" 
```

# javascript - getting content of when it is clicked

> ID：15427485
> 
> 赞同：0
> 
> 时间：2013-03-15T08:10:17.350
> 
> 标签：javascript, prototypejs

I have a list. And am trying to get the context of the list when the user clicks the text using prototype. But this code doesn't not alert the message. What is the wrong with the code?

The code can be seen here: [www.modernarapca.com/test.php](http://www.modernarapca.com/test.php)

JavaScript:

```
$$('ul#myList2 li').each(function(elmt) { 
    elmt.observe('click', function(ev) {
        var  tab;
        tab = elmt.down('a').readAttribute('href');
        alert("entered");    
    });  
}); 
```

Markup:

```
<ul id="myList2">
    <li>
     <a href="javascript:;" class="" >text1</a>
    </li>
    <li>
     <a href="javascript:;" class="" >text2</a>
    </li>
    <li>
     <a href="javascript:;" class="" >text3</a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T08:29:59.670

或者也许这个...

```
$('document').ready(function() {
    $('#myList2 li').on('click', function(el) {
        console.log(el.target);
        var cont = $(el.target).html();
        alert(cont);
    });
}); 
```

# python - webapp2 是否提供某种机制来从 html 表单调用 DELETE 和 PUT 操作

> ID：15427488
> 
> 赞同：2
> 
> 时间：2013-03-15T08:10:37.573
> 
> 标签：python, google-app-engine, python-2.7, webapp2

鉴于以下路线：

```
Route(r'/app/product/<id:\d+>', handler='app.handlers.ProductHandler:show', 
methods=['GET'], name='show-product'), 
Route(r'/app/product/<id:\d+>', 
handler='app.handlers.ProductHandler:delete', methods=['DELETE'], 
name='delete-product'), 
```

和以下形式：

```
<form action="{{ uri_for('delete-product', id=product.key.id()) }}" 
method="DELETE"> 
```

提交此表格由 show-product 路线提取。

大多数浏览器不支持 DELETE 和 PUT 操作，但许多 Web 框架都支持一些魔法来支持它们。例如，提供一个隐藏的 _method 参数。

webapp2 是否有开箱即用的东西来支持 DELETE 和 PUT 操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:51:37.103

webapp2 可以接收此方法，但在浏览器中支持此参数没有任何魔法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T15:31:25.707

将此功能添加到 WebApp2 中相对简单。

此装饰器在参数中查找值`http_verb`，如果找到，则调用适当的请求处理程序方法。

```
def spoof_rest(func):
    """ Decorator to handle spoofing RESTful verbs """
    def inner(handler):
        params = handler.request.params
        if 'http_verb' in params:
            if params['http_verb'] == 'PUT':
                handler.put()
            elif params['http_verb'] == 'DELETE':
                handler.delete()
    return inner

class MyRoute(RequestHandler):

    @spoof_rest
    def get(self):
        self.response.write("GET request")

    @spoof_rest
    def post(self):
        self.response.write("POST request")

    def put(self):
        self.response.write("PUT request")

    def delete(self):
        self.response.write("DELETE request") 
```

# taocp - The Art of Computer Programming (2nd ed.): Mathematical Induction

> ID：15427489
> 
> 赞同：0
> 
> 时间：2013-03-15T08:10:38.653
> 
> 标签：taocp

In 1.2.1 Mathematical Induction section, Knuth presents mathematical induction as a two steps process to prove that P(n) is true for all positive integers n:

> a) Give a proof that P(1) is true;
> 
> b) Give a proof that "if all P(1), P(2),..., P(n) are true, then P(n+1) is also true";

I have serious doubt about that. Indeed, I believe that point b) should be:

b) Give a proof that "if P(n) is true, then P(n+1) is also true". The major difference here is that you are only assuming that P(n) is true, not P(n-1), etc.

However, these books are old and have been read by many people (most of them being much more clever than I am^^).

**So what is my confusion here?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:17:30.310

The entire point here is that the choice of `n` is arbitrary. Since `P(n)` implies `P(n+1)` is the conerstone of induction, then all the intermediate values between 1 and `n` will also hold under the assumption of `P(n)`. You are supposed to show that if `P(0)` implies `P(1)` and `P(n)` implies `P(n+1)` then **all** conditions hold by the nature of `n` being arbitrary.

# jquery - create template for backbone to fill it with json data in view

> ID：15427490
> 
> 赞同：1
> 
> 时间：2013-03-15T08:10:45.163
> 
> 标签：jquery, backbone.js, jquery-events

I have template in html as:

```
 <script type="text/template" id="table-template">
     <div id="table-body"></div>                        
 </script> 
```

My backbone view look like this:

```
var app = app || {};
$(function ($) {
    'use strict';
    info = [
        {
            "id": 1,
            "Age": 70,
            "salary": 700000,
            "name": "Mike",
        },
        {
            "id": 2,
            "Age": 18,
            "salary": 30000,
            "name": "Mike",
        },
    ];
    app.infoView = Backbone.View.extend({
        initialize: function () {
            console.log('initialize');
        },
        drawinfoTable: function () {
            console.log('create datatable');
            $('#test').dataTable({
                "aaData": groupdata,
                "aoColumns": [
                    { "mDataProp": "id" },
                    { "mDataProp": "age" },
                    { "mDataProp": "sal" },
                    { "mDataProp": "active" },
                    { "mDataProp": "name" }
                ]
            });
        }
        render: function () {
            console.log('render');
            var template = _.template($("#-template").html(), {});
            this.$el.html(template);
        }
    });
}); 
```

Actually with above JSON data, I want to create datatable with column name id, sal, active & sal. I am using jquery.dataTables.min.js to create datatable. Then, I want to insert that datatable inside "table-body" div, which is present inside "table-template". Your help will be greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:25:46.770

您的模板应类似于：

```
<script type="text/template" id="table-template">
     <div id="table-body">
         <table>
             <tr>
                 <th>id</th>
                 <th>age</th>
                 <th>salary</th>
                 <th>name</th>
             </tr>
             <% _.each(info, function(data, index) { %>
             <tr>
                  <td><%= data.id %></td>
                  <td><%= data.Age %></td>
                  <td><%= data.salary %></td>
                  <td><%= data.name %></td>
             </tr>
             <% }); %>
         </table>
     </div>                        
</script> 
```

和渲染方法：

```
render: function () {
    console.log('render');
    var template = _.template($("#-template").html(), { info : info });
    this.$el.html(template);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:36:59.470

@Sylvanus 已经回答了如何渲染视图。您只需要激活数据表。

尝试对他的渲染函数进行以下修改

```
render: function () {
    console.log('render');
    var template = _.template($("#-template").html(), { info : info });
    this.$el.html(template);
    //initialize datatable
    this.$el.find('#table-body').find('table').dataTable();
} 
```

您只需要在模板渲染完成后初始化数据表。

# php - PHP session variable expiration

> ID：15427495
> 
> 赞同：0
> 
> 时间：2013-03-15T08:11:09.167
> 
> 标签：php, wordpress, session

Hi Guys I declared a variable session in php wordpress site, but after 5 minutes of no navigation it lost the value, but the session it's still active, and the session.gc_maxlifetime in php.ini is set to defaults 1440 seconds (24 minutes). here is my code:

```
public function __construct() { 

    echo '<script>console.log("0: '.session_status().'")</script>'; 

    if ( ( $_SESSION['logged'] != null ) && (isset($_SESSION['logged'])) )
    {

        self::$profile = $_SESSION['logged'];   
        self::$favoriteTeam = self::$profile->favorite_team;

        echo '<script>console.log("1: '.self::$profile->fb_user_id.'")</script>';   
        echo '<script>console.log("2: '.self::$profile->favorite_team.'")</script>';    
        echo '<script>console.log("3: '.self::$favoriteTeam.'")</script>';      

    } 

}

public function(){ $_SESSION['logged'] = self::$profile = $user;    } 
```

UPDATE: I forgot to mention that this is a wordpress project and yes the content it's saved into session variable if i try to debug:

```
echo '<script>console.log("1: '. $_SESSION['logged'].'")</script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:15:17.610

这可能是因为 cookie 生命周期设置为低。检查[此链接](http://us3.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)

也不要忘记`session_start()`。

尝试不强制设置为 $user in `()`：

```
if (isset($user) || !isset(self::$profile)) {
  $_SESSION['logged'] = self::$profile = $user;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:14:44.023

在使用该值之前是否先开始会话

```
public function __construct() { 

    session_start();

    echo '<script>console.log("0: '.session_status().'")</script>'; 

    if ( ( $_SESSION['logged'] != null ) && (isset($_SESSION['logged'])) )
    {

        self::$profile = $_SESSION['logged'];   
        self::$favoriteTeam = self::$profile->favorite_team;

        echo '<script>console.log("1: '.self::$profile->fb_user_id.'")</script>';   
        echo '<script>console.log("2: '.self::$profile->favorite_team.'")</script>';    
        echo '<script>console.log("3: '.self::$favoriteTeam.'")</script>';      
    } 
}

public function()
{ 
        $_SESSION['logged'] = self::$profile = $user;    
} 
```

# php - Date conversion and updating mongodb document using PHP

> ID：15427498
> 
> 赞同：0
> 
> 时间：2013-03-15T08:11:26.247
> 
> 标签：php, mongodb

Progress :
1\. I retireved date from a collection. Example format : Fri Oct 05 14:59:31 +0000 2012
2\. I was able to change its format.

CODE USED :

```
 $cur=$col->find(array(),array("created_at"=>1,"_id"=>0));
          // created_at = contains Date value
$cur_all=$col->find();
while($doc=$cur_all->getNext())
{
        $doc2=$cur->getNext();
        $pieces = implode(" ", $doc2);
                    //converted the array to string with space delimiting
        if($pieces!=NULL)
        {
            $date1 = date_create_from_format("D M d G:i:s +O Y", $pieces);
            echo date_format ( $date1 ,  'Y-m-d G:i:s' );
            //This is the format i  would like to update in mongodb..

            $filter = array('_id'=>new MongoId($doc['_id']));
            $update = array('$set'=>array('created_at'=> newMongoDate($date2)));
            $col->update($filter,$update);
        }
} 
```

QUESTION :

Where to create a date object so that it could be updated to the documents in the collection in the expected format? (format : Y-m-d G:i:s )

P.S : I did a lot of research on Stackoverflow (And other places, as well.) but I could not come to any conclusions. That is why this question. Let me know if there are any clarifications

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:05:29.873

嗯，即使你已经很好地解释了你的背景，你的实际问题：

> 在哪里创建一个日期对象，以便它可以以预期格式更新到集合中的文档？（格式：Ymd G:i:s）

有点混乱。

MongoDB 将始终以一种格式保存日期，并且仅在使用以下格式时才保存一种格式`ISODate`：[http](http://en.wikipedia.org/wiki/ISO_8601) ://en.wikipedia.org/wiki/ISO_8601 （在 PHP 中也称为`MongoDate`），最好不要混淆这种现状。

所以我建议你`Y-m-d G:i:s`只使用格式作为显示，即：

```
$date1 = new MongoDate();
var_dump(date('Y-m-d G:i:s', $date1->sec)); 
```

并且您使用原始`$date1`对象实际保存到数据库。

当然，如果您要以指定格式创建日期，这会改变，但是这里有一段代码作为示例：

```
$date1 = new MongoDate();
$date2 = new MongoDate(strtotime(date ( 'Y-m-d G:i:s', $date1->sec )));
var_dump(date('Y-m-d G:i:s', $date2->sec)); 
```

您可以使用`$date2`作为日期保存到由您想要的特定格式形成的 MongoDB 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:07:31.423

看看[http://php.net/manual/en/class.mongodate.php](http://php.net/manual/en/class.mongodate.php)

您的代码应使用 unix 时间戳创建日期

```
$date2 = ('23rd April 2013');
$update = array('$set'=>array(
                        'created_at'=> new MongoDate(strtotime($date2))
          )); 
```

[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)

# android - How to implement a more flexible AsyncTask?

> ID：15427501
> 
> 赞同：2
> 
> 时间：2013-03-15T08:11:38.863
> 
> 标签：android, multithreading, android-asynctask, ui-thread

while it is very convenient to use, from my understanding, `AsyncTask` has two important limitations:

1.  `doInBackground` of any instances will share the same worker thread, i.e. one long running `AsyncTasks` can block all others.

2.  `execute`, `onPostExecute` and other "synchronizing" methods must/will always be executed on the UI-thread, i.e. not on the Thread, which wants to start the task.

I ran into trouble, when I tried to reuse some existing AsyncTasks in a background `IntentService` that are responsible for the client-server communication of my app. The tasks of the service would fight over time in the worker thread with those of the UI activities. Also they would force the service to fall back onto the UI-thread, although that service should perform its work quietly in the background.

How would I go about removing/circumventing these limitations? I basically want to achieve:

1.  A framework that closely resembles AsyncTask (because I need to migrate a lot of critical code there).

2.  Each instance of such a task should run its `doInBackground` on its own thread instead of a single worker thread for all instances.

    Edit: Thx to VinceFR for pointing out this can be achieved by simply calling `executeOnExecutor` instead of `execute`.

3.  The callbacks like `onPostExecute` should be called on the same thread that started the task by calling `execute`, which should not need to be the UI-thread.

I figure, I'm not the first person to require something like this. Therefore I wonder: Is there already some third-party library that can be recommended to accomplish this? If not, what would be a way to implement this?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:32:25.497

解决方案如下所示：

所有产生`AsyncTask`可能相互干扰的类都有自己的`Executor`类（如您喜欢使用线程池等进行详细说明）：

```
private Executor serviceExecutor = new Executor() {
    public void execute(Runnable command) {
        new Thread(command).start();
    }
}; 
```

正如 VinceFR 所指出的，您可以通过这样调用它来运行一个`AsyncTask`给定的（您会定期传递给任务的参数在哪里）：`Executor``payload`

```
task.executeOnExecutor(serviceExecutor, payload); 
```

但是，这破坏了对 Gingerbread 和更早版本的向后兼容性。另外，如果你想支持 Honeycomb，你需要确保这个调用发生在 UI 线程上。Jelly Bean 会自动处理这个问题。

现在更棘手的部分是：让服务在自己的线程上运行。与 Android 中的许多事情一样，这似乎比它需要的更难（或者我可能在这里缺少一些信息）。你不能使用 an ，因为它会在 an 第一次接管`IntentService`时自动关闭，让回调完成。`AsyncTask``onHandleIntent`

您需要在服务上设置自己的线程和事件循环：

```
public class AsyncService extends Service {

private static final String TAG = AsyncService.class.getSimpleName();
private class LooperThread extends Thread {
    public Handler threadHandler = null;

    public void run() {
        Looper.prepare();
        this.threadHandler = new Handler();
        Looper.loop();
    }
}
private LooperThread serviceThread = null;
private Handler serviceThreadHandler = null;

@Override
// This happens on the UI thread
public void onCreate() {
    super.onCreate();
}

@Override
// This happens on the UI thread
public int onStartCommand(Intent intent, int flags, int startId) {
    this.serviceThread = new LooperThread();
    this.serviceThread.start();
    while(this.serviceThread.threadHandler == null) {
        Log.d(TAG, "Waiting for service thread to start...");
    }
    this.serviceThreadHandler = this.serviceThread.threadHandler;
    this.serviceThreadHandler.post(new Runnable() {
        @Override
        public void run() {
            doTheFirstThingOnTheServiceThread();
        }
    });
    return Service.START_STICKY;
}

// doTheFirstThingOnTheServiceThread

} 
```

不，您需要确保每次`AsyncTask`返回 UI 线程时，您最终都会进入服务线程：

```
// This happens on the serviceThread
private void doTheFirstThingOnTheServiceThread() {
    // do some stuff

    // here we can reuse a class that performs some work on an AsyncTask
    ExistingClassWithAsyncOperation someUsefullObject = new ExistingClassWithAsyncOperation();
    // the existing class performs some work on an AsyncTask and reports back via an observer interface
    someUsefullObject.setOnOperationCompleteListener(new OnOperationCompleteListener() {
        @Override
        // This happens on the UI thread (due to an ``AsyncTask`` in someUsefullObject ending)
        public void onOperationComplete() {
            serviceThreadHandler.post(new Runnable() {
                @Override
                public void run() {
                    doTheSecondThingOnTheServiceThread();
                }
            });
        }
    }
    someUsefulObject.performOperation();
}

// This happens on the serviceThread
private void doTheSecondThingOnTheServiceThread() {
    // continue working on the serviceThread
} 
```

所以，这对我有用。我很高兴看到一个更简单的解决方案。请注意，该解决方案要求服务知道将由`ExistingClassWithAsyncOperation`UI 线程回调。我不是特别喜欢这种依赖，但现在不知道如何做得更好。但是，我不必重写许多使用`AsyncTask`.

# rest - Simplest QoS strategy for my RESTful Web Service

> ID：15427506
> 
> 赞同：0
> 
> 时间：2013-03-15T08:11:52.910
> 
> 标签：rest, spring-mvc, qos

My RESTful Spring based Web Service receives differentiated user requests, say Gold, Silver and Bronze, where Gold requests have maximum priority, Bronze lowest one. So I want to implement some simple type of differentiated service provisioning. Which could be the simplest (I would say almost mocked) strategy to implement?

I'm thinking about blocking less priority for some amount of time if i'm serving more priority one. Something like this

```
@Controller
public class MyController {
    @Autowired
    private MyBusinessLogic businessLogic;

    private static final int GOLD=0;
    private static final int SILVER=1;
    private static final int BRONZE=2;
    private volatile int [] count = new int[3];

    @RequestMapping
    public String service(@RequestBody MyRequest request) {
        count[request.getType()]++;
        for(int i=0; i<request.getType(); i++)
            if(count[i]>0)
                Thread.sleep(500);
        String result = businessLogic.service(request);
        count[request.getType()]--;
        return result;
    }
} 
```

Is it reasonable? Or has it some undesirable side-effect? Do you recommend a better strategy?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T20:29:09.700

这看起来不是一个好的策略。基本上，当您在控制器内部时，已经为您分配了一个线程：通过调用 sleep() 您当前持有这样的线程，防止其他请求得到服务并限制整个服务器可以执行的并发请求的数量。sleep() 调用还有一个缺点是不释放任何持有的锁，所以这是一个潜在的并发问题。

目前，我还在为我的 REST API 寻找一个不错的 QoS 解决方案，不幸的是我无法为您提供明确的更好的答案，但如果您的服务真的很安静，您可能可以使用加载了 mod_qos 等模块的 Apache 代理（[http ://opensource.adnovum.ch/mod_qos/](http://opensource.adnovum.ch/mod_qos/) )

# iphone - How to find out carrier signal strength programmatically

> ID：15427507
> 
> 赞同：4
> 
> 时间：2013-03-15T08:12:01.060
> 
> 标签：iphone, ios, ipad, ios6, core-telephony

Here is the code that I have used to find out carrier signal strength:

```
int getSignalStrength()
{
    void *libHandle = dlopen("/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony", RTLD_LAZY);
    int (*CTGetSignalStrength)();
    CTGetSignalStrength = dlsym(libHandle, "CTGetSignalStrength");
    if( CTGetSignalStrength == NULL) NSLog(@"Could not find CTGetSignalStrength");
    int result = CTGetSignalStrength();
    dlclose(libHandle);
    return result;
} 
```

It is giving me values between 60 to 100, but when I test the signal strength in device by calling to this `*3001#12345#*` number it showed me as `-65`. Below I have attached the screenshot. Is the value coming from `getSignalStrength()` accurate? Then why is it returning positive values always?

![enter image description here](../Images/993dc7675cfe5e1533b7fa8e427e6119.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T18:26:15.927

`getSignalStrength()`正在显示否定的 dB 衰减，例如 -(-60) == 60。调用更常规地将其显示为小于零的测量值。是的，这些变化是典型的。即使在严格控制的条件下，您也可以获得 +/- 20 分贝。解决此问题的一种方法是随着时间的推移进行一系列测量，比如每秒进行一次测量，并保留最近 10 次左右测量的运行列表。然后报告平均值或中位数或其他一些统计数据。以我的经验，这大大减少了变化。您还可以使用标准差来衡量可靠性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-05T04:58:06.320

我对`CTGetSignalStrength()`CoreTelephony 的观察是，它返回 `RSSI(Received Signal Strength Indication)`运营商信号强度的值。我对此的实验返回的值介于 0 到 100 之间，我相信这是根据[this](http://www.tomshardware.com/forum/9692-43-rssi-received-signal-strength-indication)的载波的“信号强度百分比” 。

iOS也不会根据[这个以线性方式测量信号强度](http://www.tested.com/tech/smartphones/510-cell-phone-reception-explained-what-the-bars-mean/)

我还注意到，即使状态栏中有 5 个条，RSSI 值也可能不是 100。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-23T05:33:26.537

`getSignalStrength()`提供负比例的结果。可以使用高通滤波器控制差异。

您应该收集最近 10 次观察的结果。在添加新观测值时，取最后 10 个观测值的平均值。乘以 0.1。取当前读数并乘以 0.9。两者都加。如果总观测值大于 10，则删除最旧的观测值以进行下一次计算。

这将使您的结果更加可靠，您还可以有效地处理信号强度的突然变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T18:47:10.193

至于很多信号`getSignalStrength()`应该联合使用一个高通滤波算法。

还要确保在一段时间内进行平均测量（10-15 次连续测量）。它给出负面结果是正常的，电话的dB信号就是这样;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T13:05:15.217

我建议阅读分贝测量。以下链接应该有所帮助。 [如何读取信号强度](http://www.tomshardware.com/forum/9782-43-read-signal-strength)

# jquery - jQuery Selector for visible element with id like

> ID：15427508
> 
> 赞同：1
> 
> 时间：2013-03-15T08:12:06.763
> 
> 标签：jquery, selector

Getting elements with a partial attribute match in jQuery is pretty easy. For instance

```
section[id^="sect_"] 
```

would get all elements with ids bearing the form sect_xxxx. However, I need to to a step further and fetch - this is in a jQuery Mobile application - the section that is currently visible and bears an id with that form. I have tried combining the :visible modifier in various ways but drawn a blank. I'd be grateful to anyone who could suggest the right format.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T08:15:09.077

尝试这个

```
$('section[id^="sect_"]').filter(':visible'); 
```

实际上，该`filter`方法允许您在当前 DOM 选择中设置选择器。请参阅[jQuery 过滤器](http://api.jquery.com/filter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:14:28.993

尝试这个

检查元素是否可见使用 `is()`

```
 $('section[id^="sect_"]').is(':visible'){  //to check if it is visible..
      //your stuff if visible
  } 
```

要获得所有可见的元素，您可以使用..也可以`:visible`使用过滤器..

```
$('section[id^="sect_"]:visible') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:18:08.383

Another solution is to see if it's not hidden :

```
$('section[id^="sect_"]').not(':hidden').hide(); 
```

See on this [fiddle](http://jsfiddle.net/soyuka/RWR7N/1/) for example.

# c++ - 对 C++ 中的非纯虚拟类感到困惑，它们有什么用？

> ID：15427516
> 
> 赞同：1
> 
> 时间：2013-03-15T08:12:39.100
> 
> 标签：c++, hyperlink, virtual, vtable

我有一个声明如下的类：

```
class TestFoo {
public:
    TestFoo();
    virtual void virtualFunction();
    void nonVirtualFunction();
}; 
```

我尝试以这种方式实现

```
TestFoo::TestFoo(){}
void TestFoo::nonVirtualFunction(){} 
```

编译时返回错误：

```
undefined reference to vtable for TestFoo 
```

我试过 ：

```
TestFoo::TestFoo(){}
void TestFoo::nonVirtualFunction(){}
void TestFoo::virtualFunction(){} 
```

编译好这与这些帖子的答案一致：

[对 vtable 的未定义引用](https://stackoverflow.com/questions/3065154/undefined-reference-to-vtable)

[对 vtable 的未定义引用](https://stackoverflow.com/questions/5511973/undefined-reference-to-vtable)

让我感到困惑的是，我认为声明虚函数的全部意义在于我不需要定义它。在此示例中，我不打算创建任何 TestFoo 实例，而是创建从 TestFoo 继承的（具体）类的实例。但是，我仍然想为 TestFoo 的每个子类定义函数 nonVirtualFunction。

我做错了什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:16:48.173

> 声明虚函数的重点是我不需要定义它

不完全是，它说“我可能想用派生类中的其他东西替换这个函数的实现。”

我可能误解了你的问题，但你似乎暗示你不认为你可以在 C++ 中定义纯虚成员函数，你可以。您可以如下*声明一个。*

```
virtual void virtualFunction() = 0; 
```

通常，不会*定义*纯虚函数，但当然可以。那就是说“这个函数没有默认实现，因为它并不总是有意义的，但我会为你提供一个你可以选择加入的实现。”

顺便说一句，如果一个类有*任何*虚函数，你还应该定义一个*虚析构函数*，因为拥有一个指向派生类的基类（智能）指针是完全合法的（并且经常被推荐）——没有虚析构函数，对象可能不`delete`正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T08:21:31.077

> ...我认为声明虚函数的全部意义在于我不需要定义它...

对于该设施，您有一个称为**纯虚拟**方法的功能：

```
virtual void virtualFunction() = 0;  // no linking error now 
```

请注意，`virtual`方法不能保持未实现。原因是对于在主体中*声明*`virtual`的每个方法都必须有一个条目。未能找到它的主体会导致链接错误。*`class``vtable`*

 ***这个限制的目的**：
除非一个类是抽象的——也就是说它至少有一个虚函数——否则你无法向编译器保证你不会声明一个对象`TestFoo`。当您执行以下操作时会发生什么：

```
DerivedOfTestFoo obj1;
TestFoo obj2 = obj1, *p = &obj2; // object slicing
p->virtualFunction(); // where is the body? 
```

其他情况；在构造函数中没有`virtual`机制：

```
TestFoo::TestFoo () {
  this->virtualFunction(); // where is the body?
} 
```

我们可以得出结论，编译器遵循“安全胜于抱歉”的规则。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:25:24.030

您的描述与抽象类的情况完美匹配。将您的虚函数声明为：

```
 virtual void VirtualFunction () = 0; 
```

这意味着您没有在此类中实现该功能。结果，类变得抽象。也就是说，不能实例化此类的任何裸对象。

此外，您应该提供一个虚拟析构函数。

**更新：**一些澄清......

该语言允许您重新定义非虚拟功能。但是，在某些情况下可能会调用错误的版本：

```
derived D;    // rB is a reference to base class but it
base & rB=D;  // points to an object of the derived class

rB.NonVirtualFunction ();  // The base-class version is called 
```

出于这个原因，现在强烈反对重新定义一个非虚拟函数。请参阅 Scott Meyers 的“Effective C++，第三版：55 种改进程序和设计的特定方法”，第 36 项：“永远不要重新定义继承的非虚拟函数”。

另见第 7 项：“在多态基类中声明虚拟析构函数”。一个例子：

```
base * pB = new derived;
delete pB;                // If base's destructor is not virtual,
                          // ~derived() will not be called. 
```

如果您想知道为什么默认情况下并非所有内容都是虚拟的，原因是调用虚拟函数比调用非虚拟函数稍慢。哦，具有虚函数的类的对象每个占用更多的字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:21:55.227

如果你想让这个虚函数为纯虚函数，不想定义它，virtual void virtualFunction() = 0;*

# python - 从 wsgi 导入 python 失败

> ID：15427519
> 
> 赞同：0
> 
> 时间：2013-03-15T08:12:50.857
> 
> 标签：python, apache2, flask, mod-wsgi

我在 apache2/flask 服务器上有一个文件夹结构，它是这样的：

```
/var/www/myapp
/var/www/myapp/routing.py
/var/www/myapp/__init__.py
/var/www/wsgi-scripts/myapp.wsgi 
```

我的应用程序文件（routing.py）在 myapp 中，如下：

```
from flask import Flask, render_template
app = Flask(__name__)

@app.route('/')
def welkom():
    return render_template('welkom.html')

if __name__ == '__main__':
    app.debug = 'True'
    app.run() 
```

我在 wsgi-scripts 中的 myapp.wsgi 是这样的：

```
import sys
sys.path.insert(0, '/var/www/myapp')
from myapp import routing as application 
```

但是，当我加载页面时，这在我的日志中：

```
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23574): Target WSGI script '/var/www/wsgi-scripts/myapp.wsgi' cannot be loaded as Python module.
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23574): Exception occurred processing WSGI script '/var/www/wsgi-scripts/myapp.wsgi'.
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] Traceback (most recent call last):
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11]   File "/var/www/wsgi-scripts/myapp.wsgi", line 3, in <module>
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11]     import myapp.routing as application
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] ImportError: No module named myapp.routing
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23575): Target WSGI script '/var/www/wsgi-scripts/myapp.wsgi' cannot be loaded as Python module.
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23575): Exception occurred processing WSGI script '/var/www/wsgi-scripts/myapp.wsgi'.
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] Traceback (most recent call last):
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11]   File "/var/www/wsgi-scripts/myapp.wsgi", line 3, in <module>
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11]     import myapp.routing as application
[Fri Mar 15 08:06:32 2013] [error] [client 192.168.1.11] ImportError: No module named myapp.routing
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23577): Target WSGI script '/var/www/wsgi-scripts/myapp.wsgi' cannot be loaded as Python module.
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23577): Exception occurred processing WSGI script '/var/www/wsgi-scripts/myapp.wsgi'.
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] Traceback (most recent call last):
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11]   File "/var/www/wsgi-scripts/myapp.wsgi", line 3, in <module>
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11]     import myapp.routing as application
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] ImportError: No module named myapp.routing
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23573): Target WSGI script '/var/www/wsgi-scripts/myapp.wsgi' cannot be loaded as Python module.
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] mod_wsgi (pid=23573): Exception occurred processing WSGI script '/var/www/wsgi-scripts/myapp.wsgi'.
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] Traceback (most recent call last):
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11]   File "/var/www/wsgi-scripts/myapp.wsgi", line 3, in <module>
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11]     import myapp.routing as application
[Fri Mar 15 08:06:33 2013] [error] [client 192.168.1.11] ImportError: No module named myapp.routing 
```

WSGI 工作正常，我用 testapp 验证了这一点。出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:18:33.440

So you intend to import a module `routing` from package `myapp` and call it as `application`.

1.  That is not matching your structure. If you have `/var/www/myapp` in your path, you have to directly import the module `routing`.

2.  An application is not a module, it is a callable defined in the module. It seems you'll have to do something like

    ```
    def theapp(<don't remember the argumets by heart>):
        app.debug = 'True'
        app.run() 
    ```

    and then the wsgi script can do

    ```
    from routing import theapp as application 
    ```

    But maybe I'm wrong here and you just have to do

    ```
    from routing import app as application 
    ```

    as I have no experience with Flask.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T02:19:34.423

我遇到了同样的问题，使用以下代码段解决了它：

```
ALLDIRS = ['/var/www/MarkerDB/']

import sys 
import site 

# Remember original sys.path.
prev_sys_path = list(sys.path) 

# Add each new site-packages directory.
for directory in ALLDIRS:
  site.addsitedir(directory)

# Reorder sys.path so new directories at the front.
new_sys_path = [] 
for item in list(sys.path): 
    if item not in prev_sys_path: 
        new_sys_path.append(item) 
        sys.path.remove(item) 
sys.path[:0] = new_sys_pat 
```

来源：[http ://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Application_Environments](http://code.google.com/p/modwsgi/wiki/VirtualEnvironments#Application_Environments)

# javascript - Javascript 和表单的多个实例

> ID：15427528
> 
> 赞同：4
> 
> 时间：2013-03-15T08:13:15.147
> 
> 标签：javascript, dynamics-crm-2011, dynamics-crm

我有一个名为产品的实体。有一个字段称为项目价格。

现在我已经创建了 100 个产品。我想对所有产品的“项目价格”字段求和（数学运算）并将其显示在另一个名为“项目总价格”的机会字段的实体中。

除此之外，如果我创建 101 个产品，并且机会中的“项目价格”、“项目总价格”字段自动更新自身。

所以因为我已经对表单的字段求和了。例如，有字段 A 和字段 B，将字段 A 乘以 3.14 并在字段 B 中显示结果。

这是代码。

```
function SumField() {  
   var price = Xrm.Page.getAttribute("new_price");   
   var total_price = Xrm.Page.getAttribute("new_total_price");

   if(price.getValue() != null) {
      var newValue = price.getValue() * 3.14;
      total_price.setValue(newValue);

      // Make sure the changes are saved back to the server - in CRM 4.0, this was     crmForm.new_fieldname.ForceSubmit = true;
      Xrm.Page.getAttribute("new_total_price").setSubmitMode("always"); 
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:03:11.350

您有一些可能性，最佳选择取决于您的技术专长：

*   工作流程 - 当字段 new_total_price 更改并更新相关机会时启动工作流程。为此，您不需要任何已知的编程语言
*   插件 - 在更新您的产品实体时，您可以更新相关机会。您需要了解 C# 或 VB .NET
*   Javascript - 一种解决方案是加载机会，您检查是否与产品相关（例如，您使用 FetchXML 或 OData）填充了 new_total_price，使用该信息可以更新您的机会。

还有更多选择，但您有一些选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:19:08.213

JavaScript 在这种情况下不起作用，至少它不是最优化的解决方案。

与其使用 JavaScript 处理它，不如编写一个插件，该插件会在产品实体的更改时触发并更新所需的机会实体记录。（我正在考虑与一个机会相关的产品很少，即1：N关系）

如果您希望一种产品的更改将更新所有记录中的值，机会创建另一个实体，说“配置”，它将保存该值并使用 JavaScript 在机会表单上显示它（原因是：如果一个产品记录创建更新所有记录影响 CRM 绩效的机会）

# postgresql - postgres中不区分大小写的字母数字排序

> ID：15427529
> 
> 赞同：23
> 
> 时间：2013-03-15T08:13:20.207
> 
> 标签：postgresql, postgresql-9.1

我是 postrges 的新手，想对 varchar 类型的列进行排序。想用下面的例子来解释这个问题：

表名：testsorting

```
 order       name
    1            b
    2            B
    3            a
    4            a1
    5            a11
    6            a2
    7            a20
    8            A
    9            a19 
```

**区分大小写的排序（在 postgres 中是默认的）给出：**

```
select name from testsorting order by name;

    A
    B
    a
    a1
    a11
    a19
    a2
    a20
    b 
```

**不区分大小写的排序给出：**

按 UPPER(name) 从测试排序顺序中选择名称；

```
 A
      a
      a1
      a11
      a19
      a2
      a20
      B
      b 
```

**如何在 postgres 中进行字母数字大小写不敏感排序以获得以下顺序**：

```
 a
          A
          a1
          a2
          a11
          a19
          a20
          b
          B 
```

我不介意大写或小写字母的顺序，但顺序应该是“aAbB”或“AaBb”，而不应该是“ABab”

如果您在 postgres 中对此有任何解决方案，请提出建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T09:16:31.720

我的 PostgreSQL 按你想要的方式排序。PostgreSQL 比较字符串的方式是由语言环境和排序规则决定的。当您使用创建数据库时`createdb`，可以`-l`选择设置语言环境。您还可以使用以下命令检查它在您的环境中的配置方式`psql -l`：

```
[postgres@test]$ psql -l
List of databases
 Name    |  Owner   | Encoding |  Collate   |   Ctype    |   Access privileges
---------+----------+----------+------------+------------+-----------------------
 mn_test | postgres | UTF8     | pl_PL.UTF8 | pl_PL.UTF8 | 
```

如您所见，我的数据库使用波兰排序规则。

如果您使用其他排序规则创建数据库，那么您可以在查询中使用其他排序规则，就像：

```
SELECT * FROM sort_test ORDER BY name COLLATE "C";
SELECT * FROM sort_test ORDER BY name COLLATE "default";
SELECT * FROM sort_test ORDER BY name COLLATE "pl_PL"; 
```

您可以通过以下方式列出可用的排序规则：

```
SELECT * FROM pg_collation; 
```

**编辑：**

哦，我错过了'a11'必须在'a2'之前。

我不认为标准排序规则可以解决字母数字排序。对于这种排序，您必须像在 Clodoaldo Neto 响应中一样将字符串拆分为多个部分。如果您经常必须以这种方式订购，另一个有用的选项是将名称字段分成两列。您可以在 INSERT 和 UPDATE 上创建触发器，该触发器`name`分为`name_1`然后`name_2`：

```
SELECT name FROM sort_test ORDER BY name_1 COLLATE "en_EN", name_2; 
```

（我将排序规则从波兰语更改为英语，您应该使用您的母语排序规则对 aącć 等字母进行排序）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T11:24:20.053

如果名称始终采用以下`1 alpha followed by n numerics`格式，则：

```
select name
from testsorting
order by
    upper(left(name, 1)),
    (substring(name from 2) || '0')::integer 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-26T10:36:56.877

PostgreSQL 使用 C 库语言环境工具对字符串进行排序。C 库由主机操作系统提供。在 Mac OS X 或 BSD 系列操作系统上，UTF-8 语言环境定义被破坏，因此结果按照排序规则“C”。

[附上以 ubuntu 15.04 作为主机操作系统的整理结果的图像](http://i.stack.imgur.com/IlCOS.png)

查看 postgres wiki 上的常见问题解答以获取更多详细信息：[https ://wiki.postgresql.org/wiki/FAQ](https://wiki.postgresql.org/wiki/FAQ)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-06T09:13:22.153

就我而言，我使用了 PostgreSQL 模块`citext`并使用数据类型`CITEXT`而不是`TEXT`. 它使这些列的排序和搜索不区分大小写。

该模块可以使用 SQL 命令安装`CREATE EXTENSION IF NOT EXISTS citext;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T05:45:28.857

我同意 Clodoaldo Neto 的回答，但也不要忘记添加索引

```
CREATE INDEX testsorting_name on testsorting(upper(left(name,1)), substring(name from 2)::integer) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-06T22:48:55.473

[答案深受此](https://stackoverflow.com/a/11418231/1431079)启发。
通过使用一个函数，如果您在不同的查询中需要它，它会更容易保持清洁。

```
CREATE OR REPLACE FUNCTION alphanum(str anyelement)
   RETURNS anyelement AS $$
BEGIN
   RETURN (SUBSTRING(str, '^[^0-9]*'),
      COALESCE(SUBSTRING(str, '[0-9]+')::INT, -1) + 2000000);
END;
$$ LANGUAGE plpgsql IMMUTABLE; 
```

然后你可以这样使用它：

```
SELECT name FROM testsorting ORDER BY alphanum(name); 
```

测试：

```
WITH x(name) AS (VALUES ('b'), ('B'), ('a'), ('a1'),
   ('a11'), ('a2'), ('a20'), ('A'), ('a19'))
SELECT name, alphanum(name) FROM x ORDER BY alphanum(name);

 name |  alphanum   
------+-------------
 a    | (a,1999999)
 A    | (A,1999999)
 a1   | (a,2000001)
 a2   | (a,2000002)
 a11  | (a,2000011)
 a19  | (a,2000019)
 a20  | (a,2000020)
 b    | (b,1999999)
 B    | (B,1999999) 
```

# asp.net-mvc - 如何将两个变量从一个控制器传递到一个视图

> ID：15427533
> 
> 赞同：1
> 
> 时间：2013-03-15T08:14:02.703
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我希望这两种方法传递给一个视图：

```
public IEnumerable<ProfitAndCostViewModel> getProfitSum()
{
    var profBalance = db.Profits
                        .Where(x => x.IdUser.UserId == WebSecurity.CurrentUserId)
                        .GroupBy(x => x.IdUser.UserId)
                        .Select(x => new ProfitAndCostViewModel { ProfitSum = x.Sum(y => y.Value) })
                        .ToList();
    return profBalance;
}

public IEnumerable<ProfitAndCostViewModel> getCostSum()
{
    var costBalance = db.Costs
                        .Where(x => x.IdUser.UserId == WebSecurity.CurrentUserId)
                        .GroupBy(x => x.IdUser.UserId)
                        .Select(x => new ProfitAndCostViewModel { CostSum = x.Sum(y => y.Value) })
                        .ToList();
    return costBalance;
} 
```

在我的 ActionResult 我有这个：

```
ProfitAndCostViewModel pcv = new ProfitAndCostViewModel();
            pcv.ProfModel =getProfitSum();
            pcv.CostModel =getCostSum();

             return View(pcv); 
```

在 ProfitAndCostViewModel 代码中是这样的：

```
public double ProfitSum { get; set; }
        public double CostSum { get; set; }
        public double FinalBalance { get; set; }
        public IEnumerable<ProfitAndCostViewModel> ProfModel { get; set; }
        public IEnumerable<ProfitAndCostViewModel> CostModel { get; set; } 
```

这是错误：

```
The model item passed into the dictionary is of type 'WHFM.ViewModels.ProfitAndCostViewModel', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[WHFM.ViewModels.ProfitAndCostViewModel]'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:15:51.230

创建一个同时拥有它们的视图模型；

```
public class BigViewModel
{
    public List<ProfitsModel> ProfModel { get; set; }
    public List<CostsModel> CostModel { get; set; }
} 
```

和控制器

```
public ActionResult Index()
{
    BigViewModel model =  new BigViewModel();
    model.costBalance = db.Costs...;
    model.profBalance = db.Profits...;

    return View(model)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:15:39.510

您可以将参数包装到 ViewModel 或使用 ViewBag

# asp.net - ASP MVC - 安全地将数据返回给客户端？

> ID：15427534
> 
> 赞同：0
> 
> 时间：2013-03-15T08:14:21.203
> 
> 标签：asp.net, asp.net-mvc

在我的应用程序中，我的客户在我的数据库中有敏感数据。现在，当我的客户提出请求时，我怎样才能安全地将这些数据返回给他？`[RequireHttps]`这样做就够了吗？Mvc 会自动通过 ssl 将页面返回给用户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:31:24.780

是的，这就是你需要的一切。如果将 [RequireHttps] 添加到控制器动作 MVC 将确保动作数据传输使用 ssl 保护。

如果你想默认需要 Https，你可以使用 IIS URL Rewrite ( [https://stackoverflow.com/a/3290382/665689](https://stackoverflow.com/a/3290382/665689 "在此处查看 CodeGrue 的答案") )

也看看

[http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx "Scott Hanselmans 博客")

了解更多关于在开发中使用 SSL 的信息。

# crm - Sugar CRM - 使用模块构建器创建新模块

> ID：15427535
> 
> 赞同：1
> 
> 时间：2013-03-15T08:14:21.767
> 
> 标签：crm, sugarcrm

我想在我的 Sugar CRM 副本中创建一个新模块。我选择了一个包，然后去创建一个新模块（使用模块生成器）。表单中的最后一个字段要求选择模块类型。如果我们选择模块类型，比如用户，那么模块中会出现大约 10-15 个字段。这些无法编辑。但我想创建一个只包含我想要的元素的模块。那么有没有办法在没有这些字段的情况下创建一个新模块呢？

例如，我想创建一个名为“捐赠”的模块，其中包含用户所做的所有捐赠的列表（1 个“用户”可以进行很多“捐赠”）。由于用户字段将始终包含所有用户详细信息（例如，名字、姓氏、电子邮件等），因此我们不会为用户所做的每次捐赠重复它们。所以捐赠模块应该只包含类似的字段

```
["user-id", "donation-amount", "payment-method", "cc-number"]. 
```

任何 Sugar 用户都可以在这个问题上帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:35:42.180

只需简单地隐藏各种视图上不需要的字段。其中一些字段基本上是框架以一种或另一种方式要求的（名称、日期修改等）。但这并不意味着您需要使用它们。如果需要，可以从 vardefs.php 中删除其他附加字段，但通常不值得麻烦。

# xml - 将整个 xml 文件复制到特定的工作表中

> ID：15427540
> 
> 赞同：0
> 
> 时间：2013-03-15T08:14:39.817
> 
> 标签：xml, vba, excel

我有一个工作簿，其中有多个工作表 sheet1、sheet2.. 等。我知道`Workbooks.OpenXML`打开一个新工作簿然后列出来自 xml 的所有数据的函数。我想做类似的事情，但我想将 xml 数据复制到 sheet2 中的工作簿中，而不是新工作簿中。VBA 中是否有此功能或任何更简单的方法在 VBA 中执行此操作。任何帮助将不胜感激。

# authentication - 具有基本身份验证的 Solr 4

> ID：15427546
> 
> 赞同：3
> 
> 时间：2013-03-15T08:14:58.227
> 
> 标签：authentication, solr, jetty, basic-authentication, jetty-8

我正在尝试使用 solrj 连接到 solr。我的 solr 实例在码头中运行，并受到基本身份验证的保护。我发现这些链接包含相关信息。

[http://grokbase.com/t/lucene/solr-user/1288xjjbwx/http-basic-authentication-with-httpsolrserver](http://grokbase.com/t/lucene/solr-user/1288xjjbwx/http-basic-authentication-with-httpsolrserver)

[使用 Apache HttpClient 4 进行抢先式基本身份验证](https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4/11868040#11868040) 但是，我仍然遇到以下异常：

```
Caused by: org.apache.http.client.ClientProtocolException
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:822)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:352)
... 5 more
 Caused by: org.apache.http.client.NonRepeatableRequestException: Cannot retry request with a non-repeatable request entity.
at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:625)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:464)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
... 8 more 
```

我还附上了我正在使用的代码片段。

```
public static void main(String[] args) throws SolrServerException, IOException {

    HttpSolrServer server = new HttpSolrServer("http://localhost:8983/solr/");

    DefaultHttpClient m_client =(DefaultHttpClient)server.getHttpClient(); 
    UsernamePasswordCredentials credentials = new UsernamePasswordCredentials(USERNAME, PASSWORD);

    m_client.addRequestInterceptor(new PreemptiveAuthInterceptor(),0);
    (((DefaultHttpClient)m_client).getCredentialsProvider()).setCredentials(new AuthScope("localhost",8983), credentials);

    SolrInputDocument document = new SolrInputDocument();
    document.addField("id",123213);
    server.add(document);
    server.commit();

} 
```

}

```
class PreemptiveAuthInterceptor implements HttpRequestInterceptor {

    public void process(final HttpRequest request, final HttpContext context) throws HttpException, IOException {
        AuthState authState = (AuthState) context.getAttribute(ClientContext.TARGET_AUTH_STATE);

        // If no auth scheme avaialble yet, try to initialize it
        // preemptively
        if (authState.getAuthScheme() == null) {
            AuthScheme authScheme = (AuthScheme) context.getAttribute("preemptive-auth");
            CredentialsProvider credsProvider = (CredentialsProvider) context.getAttribute(ClientContext.CREDS_PROVIDER);
            HttpHost targetHost = (HttpHost) context.getAttribute(ExecutionContext.HTTP_TARGET_HOST);
            if (authScheme != null) {
                Credentials creds = credsProvider.getCredentials(new AuthScope(targetHost.getHostName(), targetHost.getPort()));
                if (creds == null) {
                    throw new HttpException("No credentials for preemptive authentication");
                }
                authState.setAuthScheme(authScheme);
                authState.setCredentials(creds);
            }
        }

    } 
```

谁能指出我正确的方向？谢谢 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-26T08:14:02.823

我在实施部分文档更新时遇到了同样的问题。我通过实现 PreemptiveAuthInterceptor 解决了这个问题。见下面的代码

```
PoolingClientConnectionManager cxMgr = new PoolingClientConnectionManager(
                        SchemeRegistryFactory.createDefault());
                cxMgr.setMaxTotal(100);
                cxMgr.setDefaultMaxPerRoute(20);

                DefaultHttpClient httpclient = new DefaultHttpClient(cxMgr);
                httpclient.addRequestInterceptor(
                        new PreemptiveAuthInterceptor(), 0);
                httpclient.getCredentialsProvider().setCredentials(
                        AuthScope.ANY,
                        new UsernamePasswordCredentials(solrDto.getUsername(),
                                solrDto.getPassword()));

                HttpSolrServer solrServerInstance = new HttpSolrServer(solrDto.getUrl(),
                        httpclient);
                solrServerInstance.setRequestWriter(new BinaryRequestWriter());
                solrServerInstance.setAllowCompression(true); 
```

您还需要：

```
 private class PreemptiveAuthInterceptor implements HttpRequestInterceptor {

            public void process(final HttpRequest request, final HttpContext context)
                    throws HttpException, IOException {
                AuthState authState = (AuthState) context
                        .getAttribute(ClientContext.TARGET_AUTH_STATE);

                // If no auth scheme avaialble yet, try to initialize it
                // preemptively
                if (authState.getAuthScheme() == null) {
                    CredentialsProvider credsProvider = (CredentialsProvider) context
                            .getAttribute(ClientContext.CREDS_PROVIDER);
                    HttpHost targetHost = (HttpHost) context
                            .getAttribute(ExecutionContext.HTTP_TARGET_HOST);
                    Credentials creds = credsProvider.getCredentials(new AuthScope(
                            targetHost.getHostName(), targetHost.getPort()));
                    if (creds == null)
                        throw new HttpException(
                                "No credentials for preemptive authentication");
                    authState.setAuthScheme(new BasicScheme());
                    authState.setCredentials(creds);
                }

            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:16:47.643

根据 Solr Wiki 上的[Solr Security - SolrJ](http://wiki.apache.org/solr/SolrSecurity#SolrJ)部分，您应该能够执行以下操作：

```
 public static void main(String[] args) throws SolrServerException, IOException {

     HttpSolrServer server = new HttpSolrServer("http://localhost:8983/solr/");

     HttpClientUtil.setBasicAuth(server.getHttpClient(), USERNAME, PASSWORD);

     SolrInputDocument document = new SolrInputDocument();
     document.addField("id",123213);
     server.add(document);
     server.commit();

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T10:23:28.013

您需要为 HttpClientUtil 添加 JAR [solr-solrj-4.0.0.jar](http://www.java2s.com/Code/Jar/s/Downloadsolrsolrj400jar.htm)。

然后使用下面的代码：

```
HttpSolrServer solrServer = new HttpSolrServer("http://localhost:8080/solr/"+url);     
HttpClientUtil.setBasicAuth((DefaultHttpClient) solrServer.getHttpClient(), "USERNAME", "PASSWORD"); 
```

这在 Jdk 1.6 和 tomcat 6 上对我有用

# android - 如何在样式为 Widget.ProgressBar.Large 的进度条上使用 setprogressbar()

> ID：15427549
> 
> 赞同：1
> 
> 时间：2013-03-15T08:15:02.910
> 
> 标签：android, android-layout, android-widget, widget

我想通过滚轮进度条（不是水平的）在小部件中显示进度。这是 xml 布局文件中的进度条，向用户显示内容：

```
<ProgressBar
    android:id="@+id/progressBar1"
    style="@android:style/Widget.ProgressBar.Large"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:indeterminateOnly="false"/> 
```

在 appwidget_provider 实现中，我想像这样设置进度条：

`RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.sample_widget); views.setProgressBar(R.id.progressBar1, 2, 1, false); appWidgetManager.updateAppWidget(appWidgetId, views);`

（sample_widget 是向用户显示的布局）

现在，如果progressBar1 是一个水平progressBar，一切都会如你所愿地显示。但是，如果我使用任何其他样式，例如此处，则只要 setProgressBar() 将不确定设置为 false，进度条就不会显示。

我认为这是因为车轮进度条显然设计为仅显示不确定的行为，因此不存在用于确定行为的可绘制对象，这导致进度条不显示。（“如果您将使用进度条来显示实际进度，您必须使用单杠。”，根据[此处](http://developer.android.com/reference/android/widget/ProgressBar.html)的文档）

我现在的问题是如何制作一个能够显示实际进度的车轮进度条？此外，我希望能够根据用户偏好或当前取得的进度自定义进度条（可能动态更改进度条的颜色，使其更亮/更暗、更粗/更细等）。

如果有人能指出我正确的方向，我将不胜感激，因为我认为我现在想得太多了。我相信必须有一种简单的方法，我只是没有找到任何关于此事的方法。

# mysql - 结果集列的值为 BLOB

> ID：15427551
> 
> 赞同：0
> 
> 时间：2013-03-15T08:15:05.760
> 
> 标签：mysql, blob

我正在从一个表中连接一些 5 个字段。但是该连接字段的结果集显示的是 BLOB。请。建议我如何解决这个问题。

在此先感谢，克里希纳！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:17:34.327

使用带有字符名称的 CONVERT 或 CAST 函数来获取字符串，例如 -

```
SELECT CONVERT(column_name USING latin1) FROM table_name; 
```

[转换/转换](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_convert)功能。

# android - 在android中使用itext将pdf转换为图像

> ID：15427555
> 
> 赞同：0
> 
> 时间：2013-03-15T08:15:17.530
> 
> 标签：android, itext

我搜索将pdf文件转换为android中的图像，尝试使用itextpdf-5.3.1.jar

但我的申请有例外。我在 libs 文件夹中添加了库。

这是我的代码

```
 package com.example.zakiexemple;

import java.io.File;

import java.io.FileOutputStream;

import android.app.Activity;
import android.os.Bundle;

import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;

import android.widget.Toast;

import com.itextpdf.text.pdf.PRStream;
import com.itextpdf.text.pdf.PdfName;

import com.itextpdf.text.pdf.PdfObject;

import com.itextpdf.text.pdf.PdfReader;

import com.itextpdf.text.pdf.PdfStream;

public class MainActivity extends Activity {

    PdfReader reader;

    @Override

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        Button bt = (Button) findViewById(R.id.Button);

        //final WebView wb = (WebView) findViewById(R.id.webView1);

       bt.setOnClickListener(new  OnClickListener() {

@Override

        public void onClick(View arg0) {

            File file = new File("/sdcard/003_overview.pdf");
            try{
                reader = new PdfReader(file.getAbsolutePath());

                for (int i = 0; i < reader.getXrefSize(); i++) {
                    PdfObject pdfobj= reader.getPdfObject(i);
                    if (pdfobj == null || !pdfobj.isStream()) {
                        continue;
                    }

                    PdfStream stream = (PdfStream) pdfobj;
                    PdfObject pdfsubtype = stream.get(PdfName.SUBTYPE);

                    if (pdfsubtype != null && pdfsubtype.toString().equals(PdfName.IMAGE.toString())) {
                        byte[] img = PdfReader.getStreamBytesRaw((PRStream) stream);
                        FileOutputStream out = new FileOutputStream(new 
                        File(file.getParentFile(),String.format("%1$05d", i) + ".jpg"));
                        out.write(img); out.flush(); out.close();
                        Toast.makeText(getBaseContext(), "howa hadak", Toast.LENGTH_SHORT).show();
                    }
                }
            }
            catch (Exception e) { }

        }
    })   ; 
    } 

    } 
```

和日志错误

`03-15 08:12:35.835: E/dalvikvm(937): Could not find class 'org.bouncycastle.cert.X509CertificateHolder', referenced from method com.itextpdf.text.pdf.PdfReader.readDecryptedDocObj 03-15 08:12:35.835: W/dalvikvm(937): VFY: unable to resolve new-instance 1533 (Lorg/bouncycastle/cert/X509CertificateHolder;) in Lcom/itextpdf/text/pdf/PdfReader; 03-15 08:12:35.835: D/dalvikvm(937): VFY: replacing opcode 0x22 at 0x030e 03-15 08:12:35.946: D/dalvikvm(937): DexOpt: unable to opt direct call 0x318a at 0x318 in Lcom/itextpdf/text/pdf/PdfReader;.readDecryptedDocObj 03-15 08:12:35.946: D/dalvikvm(937): DexOpt: unable to opt direct call 0x31a5 at 0x33d in Lcom/itextpdf/text/pdf/PdfReader;.readDecryptedDocObj 03-15 08:12:36.505: D/dalvikvm(937): GC_CONCURRENT freed 743K, 14% free 5345K/6212K, paused 71ms+85ms, total 216ms`

我想我还没有适用于 android 的好的 itext 库。

能给个好的链接吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:44:12.900

在大多数情况下，iText 不能直接在 Android 上使用。我们对 Android 和 App Engine 进行了特定更改。其中一项更改是使用 SpongyCastle 代替 BouncyCastle。

您可以在此处下载试用版：http: [//demo.itextsupport.com/newslicense/](http://demo.itextsupport.com/newslicense/)

# php - 如何更新 MySql 和 PHP 中的日期时间单元格？

> ID：15427560
> 
> 赞同：0
> 
> 时间：2013-03-15T08:15:25.680
> 
> 标签：php, mysql

我正在尝试更新保存在一个单元格中的事件日期和时间，除了日期未更新外，我一切正常。除活动日期和时间外，我的更新有效。

```
$id            = $_POST['id']; 
$package       = $_POST['package']; 
$type          = $_POST['type']; 
$shortdesc     = $_POST['shortdesc']; 
$vanue         = $_POST['vanue'];
$event_start   = $_POST['fmt_date'] . ' ' . $_POST['fmt_time'] . 'Y-m-d H:i:s';

$sql="UPDATE event_table SET package='$package', type='$type', 
shortdesc='$shortdesc', vanue='$vanue', 
event_start= '$event_start'  WHERE id ='$id' LIMIT 1";
$result=mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:17:38.127

```
// You should properly format the date for validity in insertion
$id            = $_POST['id']; 
$package       = $_POST['package']; 
$type          = $_POST['type']; 
$shortdesc     = $_POST['shortdesc']; 
$vanue         = $_POST['vanue'];

// if date formatted well used this...
$event_start   = $_POST['fmt_date'] . ' ' . $_POST['fmt_time'];

//if not format date
$event_start = date_format($event_start, 'Y-m-d H:i:s');

// or if it comes to be a string..
$event_start = strtotime($event_start);

$sql="UPDATE event_table SET package='$package', type='$type', 
shortdesc='$shortdesc', vanue='$vanue', 
event_start=now()  WHERE id ='$id' LIMIT 1";
$result=mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:19:38.257

MySQL support the datetime format as follows

```
YYYY-MM-DD HH:MM:SS 
```

So you need to format your datetime variable in PHP accordingly which mysql accept.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:22:23.793

我很确定，你会在这个网站上找到你搜索的内容：[https ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# jquery - nextSelector 没有在无限滚动中更新

> ID：15427563
> 
> 赞同：3
> 
> 时间：2013-03-15T08:15:39.510
> 
> 标签：jquery, infinite-scroll

我的页面上有 2 个选项卡，每个选项卡都有针对不同内容的[无限滚动。](https://github.com/paulirish/infinite-scroll)切换选项卡时，会像这样调用函数：

```
function callInfScroll(newlink){
var $container = '#main';
$('#page-nav').find('a').attr('href',newlink);
$container.load(newlink, function(){
  $container.infinitescroll({
    loading: {
        finishedMsg: "This is it"
    },

    navSelector  : '#page-nav',
           // selector for the paged navigation 
    nextSelector : '#page-nav a',
                   // selector for the NEXT link (to page 2)
    itemSelector : '.item',
                   // selector for all items you'll retrieve
    errorCallback: function(){
        $('#page-nav').html("Congratulations! You have reached the end of internet.");
        $('#page-nav').css({display: 'block'});
    }
  });

});
} 
```

问题是，即使 的值在`#page-nav a`变化，这种变化并没有反映在无限滚动中，它仍然从第一个选项卡中获取旧值。

编辑：我的 HTML：

```
 <div id="main-container" class="span8">
        <div id="main">
        </div>
        <div id="page-nav">
            <a href=""></a>
        </div>    

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T20:43:27.087

我知道你已经很久没有遇到这个问题了。但是我今天遇到了同样的问题，花了一段时间才通过它。但我终于做到了。

该插件将路径和当前页面存储在某个变量中......因此，如果您更改 page_nav href 并不重要。

因此，您不仅需要更改 url，还需要更改插件存储的变量。

首先，您需要了解无限滚动将您的 URL 分成两部分，即 URL 和 NEXT PAGE NUMBER。

将其视为您的 page_nav。

```
<div id="page_nav" style="display: none;">
    <a href="http://localhost/trunx/blog/page/all/4">Próxima Página »</a>
</div> 
```

在这种情况下，插件将我的 URL 存储到**opts.path[0]**

```
http://localhost/trunx/blog/page/all/ 
```

并将当前页面存储到**opts.state.currPage**

假设您的新网址如下：

```
http://localhost/trunx/blog/page/programing/1 
```

您可以看到，在这个新 URL 中，我将类别从**全部**更改为**编程**，并将页面从**4**更改为**1**

我所做的是：

```
var newPath = 'http://localhost/trunx/blog/page/programing/';
var newPage = 1;

// Changes the page_nav href.
$('#page_nav a').attr('href', newPath+newPage);

// Changes the plugin's stored variables
$('.postsBlog').infinitescroll({path:[newPath,''],state: {currPage:newPage-1}});

// This resets the pagination binder so if you had reached the end,it will now start paginating again.
$('.postsBlog').infinitescroll('bind'); 
```

考虑到**.postsBlog**是应用了我的 infiniteScroll 的容器。

您可以看到，当我设置新的 currPage 时，我从中减去 1。那是因为Infinity Scroll在设置下一页时会自动求和1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:30:58.270

没有页面来试验很难说，但是......

除非您从第一个选项卡中删除内容，否则看起来您最终会在页面上使用相同 id (" `#page-nav`") 的多个元素，这在 CSS 中是非法的。您可能会发现 jQuery 只是返回第一个。您可能会考虑使用基于类的解决方案而不是 id。

# php - 获取 json 数组中的条目数

> ID：15427569
> 
> 赞同：5
> 
> 时间：2013-03-15T08:16:01.023
> 
> 标签：php, html, file-get-contents, json

我使用以下代码从 json 页面中提取信息。

```
$str = file_get_contents('http://fantasy.mlssoccer.com/web/api/elements/498/');
$jsonarray = json_decode($str, true);

$week1 = $jsonarray['fixture_history']['summary'][0][2];
$week2 = $jsonarray['fixture_history']['summary'][1][2]; 
```

这是它的摘录

```
{ "summary" : 
    [ 
        [ 1, "PHI (A)", 14 ]
        [ 2, "TOR (A)", 8 ]
    ]
} 
```

目前只有 2 周。每周将添加 1 个新条目。我如何编写一些代码来表示“循环存在多少周/条目”？

我想要做的几乎就是将此信息放入 HTML 表中，并且我希望代码知道那里有多少周。每周将有 1 行数据。

如果不清楚，请告诉我..谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:17:11.737

采用`.length`

**在 Javascript 中**

```
jsonObj['summary'].length 
```

**在 PHP 中**

```
echo count($jsonarray['fixture_history']['summary']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:23:50.477

您需要的是[`count()`](http://us3.php.net/manual/en/function.count.php)，它为您提供了数组的长度。在 for 循环中使用它作为条件，你应该有你的答案。

```
$arr_length = count($arr); 
```

# c - Gwan 包含脚本

> ID：15427572
> 
> 赞同：0
> 
> 时间：2013-03-15T08:16:15.370
> 
> 标签：c, include, pragma, g-wan

我目前正在尝试将一些库导入到我的 Gwan C 脚本中。我已通读手册并使用`#pragma include`包含我的库所在的文件夹，然后用于`#pragma link`实际包含库，但是当我运行脚本时出现错误并说`/usr/bin/ld: cannot find -lxxxx.a`

继承人当前代码

```
#pragma include "/opt/Gwan/libraries/xxx"
#pragma link "xxxx.a" 
```

当前 Gwan 版本 4.3.11。谢谢，任何帮助将不胜感激

[编辑] 现在一切正常，将我所有的库更改为共享并将它们放在 /usr/lib

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:51:13.733

虽然您可以使用 G-WAN 脚本链接*目标代码*和*静态库*，但您应该使用*动态库*，因为它只会在内存中加载一次。

您是否成功运行了（许多）使用第三方库的 G-WAN 示例？（libsqlite、libcairo、libmySQL、libcURL、liboauth、libmemchached、ImageMagick 等）

不要忘记您必须指明库文件名*，不带*开头的“lib”前缀（即：`sqlite3`for `libsqlite3.so`）。

此外，为 64 位编译的库不适用于 G-WAN 32 位（反之亦然）。

如果这有帮助，有一个[专门针对库的 G-WAN 常见问题解答，](http://gwan.com/faq#use_libraries)它提供了检查可能存在的问题的提示和工具。

也许您应该给出整个库名称而不是`xxx`示例中的。

# android - 如何使用android启动应用程序对象？通过添加一些键（代码）帮助我理解这个概念

> ID：15427574
> 
> 赞同：0
> 
> 时间：2013-03-15T08:16:23.063
> 
> 标签：android

```
package com.example.activitylifecycle;
import android.app.Application;
import android.content.res.Configuration;
import android.util.Log;
public class MyApplication extends Application {
static final String TAG = "MyApplication";
@Override
public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);
}
@Override
public void onCreate() {
super.onCreate();
Log.d(TAG, "onCreate");
}
@Override
public void onLowMemory() {
super.onLowMemory();
Log.d(TAG, "onLowMemory");
}
@Override
public void onTerminate() {
super.onTerminate();
Log.d(TAG, "onTerminate");
} 
```

通过添加一些键（代码）帮助我理解这个概念。我是 android 新手，使用 Application 对象的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:27:47.013

如果您想学习 Android，我必须推荐 google 文档：
还有生命周期和应用程序本身的描述 [http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

她也是扩展应用程序的教程

[http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

# objective-c - cocos2d游戏中的nextpeer

> ID：15427578
> 
> 赞同：0
> 
> 时间：2013-03-15T08:16:54.637
> 
> 标签：objective-c, cocos2d-iphone, nextpeer

我已经 在 cocos2d 游戏中集成[了 nextpeer 。](http://nextpeer.com)

我用下面的调用结束游戏。但是如果游戏在 60 秒内结束，nextpeer 不会显示游戏结束视图。

```
-(void)callNextPeerTournamentOverWithScore:(int)score
{
    if ([Nextpeer isCurrentlyInTournament])
    {
        [Nextpeer reportControlledTournamentOverWithScore:score];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:37:59.783

比赛的类型是什么？如果您想随时结束比赛，比赛类型应为“游戏控制”。您可以使用他们的网站编辑锦标赛类型。

注意：默认锦标赛类型为 60 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:39:40.833

我从 shahid-rasheed 那里得到了解决方案。谢谢。我们需要做的只是在 next peer.com 而不是代码中将锦标赛类型更改为“游戏控制”。

![在此处输入图像描述](../Images/2b35f14b6a2066c9b36dd21ba7f8c308.png)

# .htaccess - mod_rewrite Replace dashes with underscores in subdomain then redirect

> ID：15427583
> 
> 赞同：3
> 
> 时间：2013-03-15T08:17:10.583
> 
> 标签：.htaccess, mod-rewrite

Here is what i want to do:

*   I want to replace all dashes (-) with underscores (_) but only in subdomains.
*   After all dashes are replaced i want to redirect into a subdirectory with the name of the rewritten subdomain

For example: [http://subdomain-with-dashes.rotarytest.de/a-directory/an-image.png](http://subdomain-with-dashes.rotarytest.de/a-directory/an-image.png) after rewrite should be [http://rotarytest.de/subdomain_with_dashes/a-directory/an-image.png](http://rotarytest.de/subdomain_with_dashes/a-directory/an-image.png)

Here is what i have right now, please see comments in code

```
RewriteEngine on

# replace dashes with underscores
# this works, but only for the last dash
RewriteCond %{HTTP_HOST} ^(.*)-(.*)$
RewriteRule ^(.*)$ http://%1_%2/$1 [L,R=301]

# if a subdomain is called, redirect to subdirectory
# this code works but only when i have one dash in my subdomain
RewriteCond %{HTTP_HOST} ^(.*)\.rotarytest\.de$
RewriteRule ^(.*)$ http://rotarytest.de/%1%{REQUEST_URI} [L,R=301] 
```

I tried almost every solution i found here on stackoverflow or on the web, but none of them worked correctly.

Can someone help me out? Thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:09:06.637

您必须允许浏览器不断重定向以删除破折号。如果您不需要将破折号替换为 URI 中的下划线，那么您不需要前两个规则，它们不会应用于主机名。将前两条规则替换为：

```
RewriteCond %{HTTP_HOST} ^(.*)-(.*)$
RewriteRule ^(.*)$ http://%1_%2/$1 [L,R=301] 
```

# javascript - Ajax IE7 non stop reloading issues

> ID：15427590
> 
> 赞同：2
> 
> 时间：2013-03-15T08:17:33.577
> 
> 标签：javascript, ajax, internet-explorer-7

I am using AJAX and at the same time executing some javascripts/jquery. I am using .load(). Right now I am having issues on IE7, every browser works fine. Somehow IE7 keeps reloading the same content again and again non stop.

I have tried using

```
$.ajaxSetup({
   cache: false
}); 
```

and

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" /> 
```

None is working.

I really have no idea what is going on and can't find any solutions.

Hope you guys can help me out. Thanks in advance.

My AJAX code:

```
$('#ir_content').load(pageurl + ' #ir_inner_content'); 
```

And because the other file was using a manually coded javascript with backend language so I run the script by using onload on 1 of the img tag:

```
<img src="/images/icon_loadingLarge.gif" width="32" height="32" alt="loading..." id="loading_indicator" style="display: none;" onload="var script_text = $('#webchart_js').html(); eval(script_text);" /> 
```

script_text:

```
<div id="webchart_js">
    (function($){
      var interactive_chart_config = {
        zoom_historical_default: [% chart_config.chart.chart_interactive.zoom_historical_default %],
        zoom_intraday_default: [% chart_config.chart.chart_interactive.zoom_intraday_default %],
        quotes_delay: [% ir.var.Config.format.quotes_delay %],
        news_on_chart: {
          [% news_types = chart_config.chart.chart_interactive.news_on_chart.keys %]
          [% FOREACH news_type = news_types %]
            [% news_type %]: {
              [% news_options = chart_config.chart.chart_interactive.news_on_chart.${news_type}.keys %]
              [% FOREACH news_option = news_options %]
                [% news_option %]: [% chart_config.chart.chart_interactive.news_on_chart.${news_type}.${news_option} ? 'true' : 'false' %][% IF news_option != news_options.last %],[% END %]
              [% END %]
            }[% IF news_type != news_types.last %],[% END %]
          [% END %]
        },
        modify_news: [
          [% FOREACH news = chart_config.chart.chart_interactive.modify_news.news %]
            {
              [% FOREACH key = news.keys %]
                [% key %]: '[% news.${key} %]'[% IF key != news.keys.last %],[% END %]
              [% END %]
            }[% IF news != chart_config.chart.chart_interactive.modify_news.news.last %],[% END %]
          [% END %]
        ]
      };

      $(document).ready(function(){
        $('#content_container').web_chart($.extend({}, {
          theme : Highcharts.theme,
          counter_code : "[%= stock_ids.first %]",
          plot_on_load : true,
          always_reload : true,
              loading_indicator_id  : 'loading_indicator',
              chart_setting_id      : 'chart_setting',
              counter_list_form_id  : 'counter_list_form',
              chart_container_id    : 'chart_container',
              css_class_for_flags    : {'N' : 'news_tooltip', 'I' : 'insider_trades_tooltip', 'C' : 'corporate_actions_tooltip'}
        }, interactive_chart_config));
      });
    })(jQuery);

  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:47:35.263

是什么`always_reload`？通过将其传递给 true，它是否有可能重新加载 IE7？

```
$(document).ready(function(){
        $('#content_container').web_chart($.extend({}, {
          theme : Highcharts.theme,
          counter_code : "[%= stock_ids.first %]",
          plot_on_load : true,
         /*
          * HERE
          */
          always_reload : true,
              loading_indicator_id  : 'loading_indicator',
              chart_setting_id      : 'chart_setting',
              counter_list_form_id  : 'counter_list_form',
              chart_container_id    : 'chart_container',
              css_class_for_flags    : {'N' : 'news_tooltip', 'I' : 'insider_trades_tooltip', 'C' : 'corporate_actions_tooltip'}
        }, interactive_chart_config));
      });
    })(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:15:48.347

尝试在 ajax URL 的末尾添加一个随机字符串。这将停止 IE 缓存内容。像这样：

`$('#ir_content').load(pageurl + '?r=' + Math.Random() + '#ir_inner_content');`

# android - Creating my own tracking analytics for my android app

> ID：15427591
> 
> 赞同：2
> 
> 时间：2013-03-15T08:17:34.217
> 
> 标签：android, sqlite, google-analytics, mobile-application

I used to use Google Analytics for tracking of my application's different features on my users device but since I need to get more information, I'd rather create this analytics on my own so that I can have many other features like how often my users are using the app and other stuff.

The solution I have in my mind is to add a **jar** file to my application where it retreives the data whenever user is using the app and stores the in the SQLite database of phone and when user is connected to the internet, the data are sent to my webservices on my server-side. I need to know have a feedback, that what drawbacks this method has. Does it affect the quality of the app in terms of its speed etc ?

Anyone has any other suggestions for solving this issue?

# objective-c - Know What UINavigationController the User is Inside UITabBarController

> ID：15427596
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:17:48.470
> 
> 标签：objective-c, xcode, uiviewcontroller, uinavigationcontroller, uitabbarcontroller

I have a `UITabBarController` that has 3 UINavigationControllers in my AppDelegate and I want to know how to determine the active `UINavigationController` where the user is. How can I determine this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:25:18.457

`UITabBarController`有一个名为 的属性`selectedViewController`。只需检查它是否有适当的值（例如，通过检查它的类或它的主视图的标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:50:41.787

我自己想通了。

我只是使用这段代码来使我的代码工作。它可能看起来与我原来的问题有点远，但这使它起作用，因为我只是想在我的当前视图上显示我的自定义通知视图。

```
if (self.tabBarController.selectedIndex == 0)
{
    [self displayNotificationWhenOnline:self.navController1.visibleViewController.view];
}
else if (self.tabBarController.selectedIndex == 1)
{
    [self displayNotificationWhenOnline:self.navController2.visibleViewController.view];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T10:53:59.260

您可以使用此代码获取 perticuler 视图控制器，

```
[(UINavigationController*)[[(AppDelegate*)[[UIApplication sharedApplication]delegate] tabBarController] selectedViewController]visibleViewController] 
```

# jquery - jQuery在ajax发布之前更改输入名称

> ID：15427597
> 
> 赞同：1
> 
> 时间：2013-03-15T08:17:50.190
> 
> 标签：jquery

我有输入字段。

我想在 ajax 发布之前更改输入名称。

例如：

```
 <input name="one" id="input_id" >
 var input_data = $('#input_id').serialize();

$.ajax({
                        type: "POST",
                        url:  "other.php",
                        data: input_data,
                        success: function(msg){
                        }
                    }); 
```

我想加入的不是 $_POST["one"]，而是 $_POST["another_name"]。

对不起英语不好...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:20:36.273

尝试

```
$.ajax({
    type: "POST",
    url:  "other.php",
    data: {
       "xxx": $('#input_id').val()
    },
    success: function(msg){
    }
}); 
```

替换`xxx`为任何名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:20:52.513

你只需要这个输入吗？只需像这样发送您的 ajax 数据：

```
var myData = $('input_id').val();
$.ajax({
   type: "POST",
    url:  "other.php",
    data: {another_name : myData},
    success: function(msg){
    }
}); 
```

# opengl - OpenGL multisample enabling

> ID：15427598
> 
> 赞同：1
> 
> 时间：2013-03-15T08:18:05.633
> 
> 标签：opengl

I am trying to use multisampling.

I'm calling `glutInitDisplayMode()` with `GLUT_MULTISAMPLE` flag, then I'm checking if multisampling is available and I received following values: `GL_SAMPLE_BUFFERS` = 0 and `GL_SAMPLES` = 1\. I suppose it means that multisampling isn't available.

How to solve this issue and make multisampling available?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T06:12:40.817

如果您的 GPU 不支持多重采样，那么您无能为力，当然除了购买更好的 GPU...

# java - a confusion about java String literal pool and String's concatenation

> ID：15427599
> 
> 赞同：5
> 
> 时间：2013-03-15T08:18:06.220
> 
> 标签：java, string

all, i faced a problem when a write the code below

```
String hello = "Hello";
String str5 = "Hel" + "lo";
String str8 = "Hel";
String str9 = "lo";
String str10 = str8 + str9;
System.out.println("str10==hello?" + (str10 == hello)); 
System.out.println("str5==hello?" + (str5 == hello));
System.out.println("str10==str5?" + (str10 == str5)); 
```

then i run my code and the console print this

```
str10 == hello ? false
str5 == hello ? true
str10 == str5 ? false 
```

this confused me a lot. why the second print TRUE but the first print FALSE?? in my comprehension of String literal pool,when a string defined and JVM will check if the pool contains that string,if not ,put the string into the pool.
in my code,variable **hello** exists in string pool,"**Helo**" and "**lo**" also in the pool,my question is

1.  if the result of the concatenation of "**Helo**" and "**lo**" exists in the pool.
2.  what's the difference between the definition about str5 and str10s',and why they are not "=="? does str5 and str10 refer to the diffrent "**Hello**” that in the string pool？("==" seems to mean the reference is the same object)

my jdk version :1.6.0_29
my IDE:Intellij Idea 11.2

anyone can point it out? thank you very much

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:23:43.993

它的行为应有尽有。它在 JLS 的两个部分中得到解决。

[JLS #3.10.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)：

> 作为常量表达式的值的字符串（第 15.28 节） - 使用 String.intern 方法“内部”以便共享唯一实例。

[JLS #15.28](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)列出了被视为常量表达式的内容。特别是，字符串文字是常量表达式（“Hel”和“lo”），但要使变量被视为常量，它必须是最终的。

在您的情况下，如果您将代码稍微更改为 make`str8`和`str9`constant，您将获得`true`三倍：

```
final String str8 = "Hel";
final String str9 = "lo"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T17:30:47.263

```
String hello = "Hello";       // at compile time string is known so in String Constant Pool

String str5 = "Hel" + "lo";   // at compile time string is known so in String Constant Pool same object as in variable hello

String str8 = "Hel";          // at compile time string is known so in String Constant Pool

String str9 = "lo";           // at compile time string is known so in String Constant Pool

String str10 = str8 + str9;   // at runtime don't know values of str8 and str9 so in String Constant Pool new object different from variable hello

str10 == hello ? false        // as str10 has new object and not the same as in hello

str5 == hello ? true          // both were created at compile time so compiler know what's the result in str5 and referenced the same object to str5 as in hello

str10 == str5 ? false         // str10 is a different object, hello and str5 are referenced same object as created at compile time. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:30:19.960

代码有以下几点需要考虑：

```
String hello = "Hello"; 
```

这里“Hello”是分配给引用 hello 的文字，因此文字有自己的哈希码

```
String str5 = "Hel" + "lo"; 
```

这里 "Hel"+"lo" 是 2 个文字组合并分配给引用 hello 因此新文字与第一个文字相同，因此哈希码相同

```
String str8 = "Hel";
String str9 = "lo"; 
```

这里 str8 + str9 是 2 个引用，它们组合并指向一个新的引用 hello，因此新的文字有自己的哈希码

```
String str10 = str8 + str9;
System.out.println("str10==hello?" + (str10 == hello)); 
System.out.println("str5==hello?" + (str5 == hello));
System.out.println("str10==str5?" + (str10 == str5)); 
```

当您使用 == 时，它通过哈希码和值匹配。因此不匹配。

尝试使用

> string_1.equals(string_2)

代替

> 字符串_1 ==字符串_2

你只会得到价值匹配。因此都是真的

另请参阅以下答案（来自[Java中== vs equals（）之间的区别是什么？](https://stackoverflow.com/questions/7520432/java-vs-equals-confusion)）：

equals() 方法比较 String 实例（在堆上）内的“值”，无论两个（2）对象引用是否引用相同的 String 实例。如果任何两 (2) 个 String 类型的对象引用引用同一个 String 实例，那就太好了！如果两（2）个对象引用引用了两（2）个不同的字符串实例..它没有区别。它是每个被比较的 String 实例中的“值”（即：字符数组的内容）。

另一方面，“==”运算符比较两个对象引用的值，以查看它们是否引用同一个 String 实例。如果两个对象的值引用“引用”同一个 String 实例，那么布尔表达式的结果将是“true”..duh。另一方面，如果两个对象引用的值“引用”不同的 String 实例（即使两个 String 实例具有相同的“值”，即每个 String 实例的字符数组的内容相同），则布尔表达式的结果将是“假”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T08:25:57.377

如果您比较两个字符串，请使用`string.equals`not`string1 == string2`

试试看：

```
System.out.println("str10==hello?" + (str10.equals(hello)); 
```

# javascript - XML RESPONSE:[object Text] is getting from the xml response?how to convert [object Text]?

> ID：15427601
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:18:11.990
> 
> 标签：javascript, xml

I have `js` page. I need to get values from xml as,

> 37.220941081285 -76.650414191206 37.222866 -76.689166 37.221250370692 -76.69331520088 37.222969 -76.693565 37.226402 -76.694478 37.225778 -76.693886 37.223506 -76.693278 37.223218 -76.69235 37.22261 -76.678494 37.222866 -76.663581 37.221186 -76.650973 37.220941081285 -76.650414191206

but now i get values as,

> [object Text]

How can I convert my `[object Text]` values to `37.220941081285 -76.650414191206 37.222866 -76.689166 37.221250370692 -76.69331520088 37.222969 -76.693565 37.226402 -76.694478 37.225778 -76.693886 37.223506 -76.693278 37.223218 -76.69235 37.22261 -76.678494 37.222866 -76.663581 37.221186 -76.650973 37.220941081285 -76.650414191206`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:19:14.230

It sounds like you're getting back a `Text` element. You can access the textual content of that element using [`.nodeValue`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-F68D080).

E.g., assuming `data` is whatever variable you were outputting that gave you `[object Text]`, you'd use:

```
var theText = data.nodeValue; 
```

...to get the text within it.

# java - 内容的延迟加载

> ID：15427602
> 
> 赞同：1
> 
> 时间：2013-03-15T08:18:18.963
> 
> 标签：java, javascript, json, hibernate, lazy-loading

我有两个实体：`User`和`Post`（关系一对多）。`Post`字段：`id`, `creationDate`, `title`, `content`, `user`.

数据存储在数据库中并通过 Hibernate 访问。

我有一个控制器将 Post 对象作为 JSON 传递给 JavaScript。然后显示在网页上。但并不总是需要通过所有`Post`字段。例如，我只需要向用户显示标题和创建日期，如果用户按下按钮`Show content`，我才需要显示帖子内容（我只想在需要显示时从服务器请求）。

所以这里有一个问题：如何实现Post 对象中内容字段的*延迟初始化？*我是否应该在我的控制器中编写两种方法：一种用于生成带有 Posts 列表的 JSON 并将内容字段设置为`null`或为空`String`，另一种仅传递内容字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:50:29.000

使帖子内容成为数据库中的对象和单个表。

它在 java 中如下所示：

```
public class Post {

  ...

  PostContent postContent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:55:33.023

首先，您可以尝试通过`Hibernate.initialize(lazyCollection)`. 如果它不起作用，则`FetchType.EAGER`在请求期间使用或保持会话打开，并且应在需要时获取集合。

# java - C++, Java connection. Big Data

> ID：15427605
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:18:39.140
> 
> 标签：java, c++, connection, bigdata

I need to connect two System which are hosting in differents machines. One of them is coded in Java and the other in C++. The systems have to send files in both directions.

Some requeriments: - Size File: More than 20MB

Some Possibilities: WebService, Corba, NFS, ...

Any Suggestion? Example?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:24:51.047

尝试托管 FTP 服务器并尝试通过 FTP 文件传输发送接收文件

对于 C++ 中的 FTP 文件传输，请参阅上一篇文章 **[Designing a file transfer protocol in c++](https://stackoverflow.com/questions/8993306/designing-a-file-transfer-protocol-in-c)**

对于 Java FTP 文件传输，请参阅... **[如何使用 java 将文件从 url 传输到 ftp？](https://stackoverflow.com/questions/11616611/how-to-transfer-a-file-from-url-to-ftp-using-java)**

如果您打算使用 Web 服务进行文件传输[此 IBM 博客应该会有所帮助](http://www.ibm.com/developerworks/xml/library/x-tippass/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:24:02.653

带有[MTOM](http://www.w3.org/TR/soap12-mtom/)的 Web 服务。 [Axis C](http://axis.apache.org/axis2/c/core/)在支持 MTOM 的 c/c++ 端是一个很好的 WS 实现。

# jquery-mobile - 在单页 Web 应用程序中使用 Ember 1.0RC1 和 jQuery mobile 有意义吗？

> ID：15427607
> 
> 赞同：2
> 
> 时间：2013-03-15T08:18:42.827
> 
> 标签：jquery-mobile, ember.js

我一直试图找出使用 Rails、Ember 1.0RC 和 jQuery mobile 的最佳方式，但没有成功。

我正在使用 Rails 作为提供简单 JSON 的后端构建一个简单的单个 Web 应用程序。现在我知道 Ember 和 JQM 彼此不喜欢，您必须编写自定义助手来呈现 Ember 视图。这使事情变得相当复杂。

我知道那里有一些例子，但它们已经过时了，因为 Ember 正在大力开发并且发生了很多变化。

我想听听经验丰富的开发人员在我的情况下是否将 Ember 与 JQM 一起使用是个好主意？

也许我应该选择其他 MVC 框架（哪个？）？

很抱歉这个问题很开放，但我在网上找不到任何可靠的资源。

// 3月20日编辑

我看过 2 个 Ember 截屏视频（来自 Peepscode 和 Railscasts），它们对此事有所了解。现在我知道的多了一点。但是，让我解释一下我所追求的。

我正在基于功绩系统构建一个内部“荣誉”应用程序。也就是说，每个星期一，一名员工都会收到 20 个“荣誉”来给予其他同事。设计如下：首页展示了所有员工的列表，在顶部，也作为一个列表项，有属于自己的职位。例如，它显示了要给予多少荣誉以及他或她从其他人那里获得了多少荣誉。主人？不知道其他员工获得了多少荣誉。但我认为会有一个“Top 3 kudoers”页面。

当您点击/按住某个项目时，会出现一个模式对话框，询问您是否要给点赞。

它完成了。但剩下的就是将其移植到 Ember。

现在，在观看了截屏视频后，我有点知道该怎么做了，但让我烦恼的是如何让 JQM 内部散列页面和 Ember 路由器变得轻而易举。

我看到 Ember 中的一个页面应用程序使用了这样的 url：myapp/#/users/user

而 JQM 使用这样的内部页面：myapp/#somepage

我想让应用程序尽可能简单（遵循 Ember 的“约定优于配置”）并使用 JQM 内部页面。

所以我的问题是他们怎么能一起去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:03:43.583

> 我想听听经验丰富的开发人员在我的情况下是否将 Ember 与 JQM 一起使用是个好主意？

我一直在询问这个问题，几乎所有尝试将 JQuery Mobile 与 ember 一起使用的人都反对它。

并不是说做不到。只是大多数人都认为挑战大于好处。特别是如果您是一个或两个框架的新手。

我见过的 JQM + Ember 集成的最佳示例是 TOMASZ，可以在这里找到：[https ://coderwall.com/p/ylogzg](https://coderwall.com/p/ylogzg)

问题是，该应用程序根本不使用 ember 路由器。当然，它不会帮助您**使 JQM 内部哈希页面和 Ember 路由器变得轻而易举**

# asp.net - How do I decide on a buffer size when downloading a file using HttpWebRequest and HttpWebResponse?

> ID：15427609
> 
> 赞同：1
> 
> 时间：2013-03-15T08:18:46.537
> 
> 标签：asp.net, vb.net, httpwebrequest, httpwebresponse, getresponsestream

I'm using HttpWebRequest / HttpWebResponse to download an image file from a remote server to my own web server. The code is working fine, but I don't know if the buffer size I've chosen is the optimum size for best performance.

How would I go about choosing the right buffer size?

My code is below - you can see it's currently using a buffer size of 4096 - that's just an arbitrary number I chose:

```
 ' Create the web request
    Dim myWebRequest As HttpWebRequest = HttpWebRequest.Create("http://www.petiquettedog.com/wp-content/uploads/2010/04/sadpug-300x225.jpg")

    ' Automatically decompress gzip/deflate compressed images. This line sets the Accept-Encoding header to "gzip, deflate"
    myWebRequest.AutomaticDecompression = DecompressionMethods.GZip or DecompressionMethods.Deflate

    Using myWebResponse As HttpWebResponse = myWebRequest.GetResponse()
        ' Download the image to disk
        Using streamIn As Stream = myWebResponse.GetResponseStream()
            Using streamOut As FileStream = File.Create(localFilePhysical)
                Dim bufferSize As Integer = 4096
                Dim bytes(bufferSize) As Byte
                Dim numBytes As Integer
                numBytes = streamIn.Read(bytes, 0, bufferSize)
                While numBytes > 0
                    streamOut.Write(bytes, 0, numBytes)
                    numBytes = streamIn.Read(bytes, 0, bufferSize)
                End While
            End Using
        End Using
    End Using 
```

# nhibernate - 保存被其他会话删除的实体时出现 StaleStateException（并发）

> ID：15427612
> 
> 赞同：1
> 
> 时间：2013-03-15T08:19:10.983
> 
> 标签：nhibernate, concurrency

我正在使用 NHibernate 来访问数据层。我以前加载了内存中的一个实体，并且我进行了更改以便在数据库上保存之后。当我的应用程序同时在某些机器上运行时，问题就出现了，而其他用户从数据库中删除了我在内存中想要保存的同一个对象。当我尝试保存更改或删除此实体时，会触发 StaleStateException。

我以这种方式检查数据库调用中是否存在实体`session.Get<T>`（它成功获得空值）：

```
using (var session = NHibernateSessionHelper.OpenSession())
{
   using (var transaction = session.BeginTransaction())
   {
       var entity = session.Get<T>(persistObject.Id);
       return entity == null ? false : true;
   }
} 
```

当我无法区分实体已被其他会话/用户删除（因此我在内存中的实体已过时）或实体最近创建并能够保存时，问题就出现了。我认为唯一的解决方案是实施一种机制来检查实体是否已经从数据库中保存或加载，以便在继续时丢弃实体或保存。

有没有办法通过使用 nhibernate 来检查这种行为？我试过了，`session.Refresh() and session.Get<T>`但我仍然不知道该对象是新的并且准备好保存还是过时。

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:28:13.883

您遇到的情况是典型的错误处理。因为一个用户决定删除数据库中的一个对象，而另一个用户想要保存对同一个对象的更改，所以你不能说正确的状态应该是什么。用户是应该决定如何处理情况的人。通过给他一些选择，你可以让你的错误处理更聪明。对于您有多个用户写入同一个对象的情况，您还应该实现像乐观锁定这样的机制，以防止其他用户覆盖他没有看到的更改。如果你有很多这样的情况，你应该考虑重新设计你的数据库/对象结构以一次编辑更少的数据，或者重新考虑你的用户对系统所做的工作/流程。

# php - 如何从不同的文本字段登录到页面

> ID：15427616
> 
> 赞同：1
> 
> 时间：2013-03-15T08:19:26.587
> 
> 标签：php, javascript, html

总而言之，我有一个`ownCloud`平均水平的页面，`login-page,`但我最近在我的 HTML 网站上创建了一个新的登录字段，其中包含`"username"`“ `password`”字段+`login button.`

我想做的是让他们填写`login field`并点击登录时，它会自动将他们登录到`ownCloud`.

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:24:51.157

```
<form action="http://url.to.owncloud.login.page" method="post">
[your fields]
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:24:53.197

您可以使用 cURL 将它们自动记录到 ownCloud。

试试这个 ：

[http://www.codekites.com/remote-login-with-curl-php/](http://www.codekites.com/remote-login-with-curl-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:25:02.240

如果您在同一服务器中同时托管文件“ ***ownCloud page*** ”和“ ***Your HTML page ”，那么您只需在成功登录后使用 PHP******标头函数***重定向用户。

# php - Customizing a Wordpress-generated breadcrumb link

> ID：15427620
> 
> 赞同：0
> 
> 时间：2013-03-15T08:19:45.400
> 
> 标签：php, jquery, wordpress

Good Day

I am using Wordpress, and I am using a breadcrumbs plugin (Breadcrumb NavXT). Now it works great, exept that I would like to customize the way it links to a **specific** link:

**Now here is the scenario:**

I have a page, and on the page are links to posts. So when you click on one of the links on the page, it takes you to the post. Now this posts belongs to a category named Drill Rigs, and Drill Rigs is a child category of Products.

Now on the post page, which has category 'products>drill rigs' (parent/child), the breadcrumb shows the following way:

```
Home>products>drill rigs>postname 
```

Problem is, that of you click on the products link above, it takes you to the category page of products:

```
siteurl/category/products 
```

and not the actual wordpress page that is called products (that contains the links linking to the posts mentioned above:

siteurl/absolute link to the page, which is a unique link eg. siteurl/803-2

Now as far as I know, you cannot change the path from a category (which are unique to posts) to a page, neither in wordpress nor the plugin.

The best way I can think of is to add custom jquery or php to the posts php page (or index/header pages) that looks for the container div containing the anchor tags that hosts the title 'products'...and then replacing that anchor tag with my custom unique page url...

How would I do this...?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:39:05.173

```
function the_breadcrumb() {

$sep = '/';

if (!is_front_page()) {

    echo '<div class="breadcrumbs">';
    echo '<a href="';
    echo get_option('home');
    echo '">';
    bloginfo('name');
    echo '</a>' . $sep;

    if (is_category() || is_single() ){
        the_category('title_li=');
    } elseif (is_archive() || is_single()){
        if ( is_day() ) {
            printf( __( '%s', 'text_domain' ), get_the_date() );
        } elseif ( is_month() ) {
            printf( __( '%s', 'text_domain' ), get_the_date( _x( 'F Y', 'monthly archives date format', 'text_domain' ) ) );
        } elseif ( is_year() ) {
            printf( __( '%s', 'text_domain' ), get_the_date( _x( 'Y', 'yearly archives date format', 'text_domain' ) ) );
        } else {
            _e( 'Blog Archives', 'text_domain' );
        }
    }

    if (is_single()) {
        echo $sep;
        the_title();
    }

    if (is_page()) {
        echo the_title();
    }

    if (is_home()){
        global $post;
        $page_for_posts_id = get_option('page_for_posts');
        if ( $page_for_posts_id ) { 
            $post = get_page($page_for_posts_id);
            setup_postdata($post);
            the_title();
            rewind_posts();
        }
    }

    echo '</div>';
} 
```

}

试试这个希望这可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-07T12:02:35.487

此代码适用于您的帖子的异步内容：（复制到 functions.php 中）

```
function ariane() {
    $cat_id         = get_the_category()[0]->term_id;
    $breadcrumb     = '<li>' . get_the_title() . '</li>';

    $if_parent = TRUE;

    while($if_parent == TRUE) :
        $cat_object     = get_category($cat_id);
        $cat            = $cat_object->term_id;
        $categoryURL    = get_category_link($cat);
        $name           = $cat_object->name;
        $cat_id         = $cat_object->parent;              

        $add_link       = '<li><a href="' . $categoryURL . '">' . $name . '</a></li>';

        $breadcrumb     = substr_replace($breadcrumb, $add_link, 0, 0);

        if($cat_id  == 0) :
            $if_parent = FALSE;
        endif;
    endwhile;

    echo '<ul>' . $breadcrumb . '</ul>';    
} 
```

在您的archive.php 或循环中的WP_QUERY

```
<div class="ariane"><?php ariane(); ?></div> 
```

在 CSS 中：

```
.ariane ul{
    display: flex;
    justify-content: flex-start;
    align-items: center;
}  
.ariane li:not(:last-child):after {
    content: '>';
    margin: 0 5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:50:53.127

您可以使用该功能通过编码设置您的面包屑：

```
function the_breadcrumb() {
if (!is_home()) {
    echo '<a href="';
    echo get_option('home');
    echo '">';
    echo "Home";//bloginfo('name');
    echo "</a> / ";
    if (is_category() || is_single()) {
        the_category('title_li=');
        if (is_single()) {
            echo " / ";
            the_title();
        }
    } elseif (is_page()) {
        echo the_title();
    }
} 
```

}

把上面的代码放到function.php文件中

您只需调用要显示 bredcrumb 的函数

```
<?php the_breadcrumb(); ?> 
```

希望对你有帮助 ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:55:05.400

```
<script type="text/javascript">
$('#breadcrumbs .category[href="http://mysite.com/category/products"]').attr('href','http://mysite.com/803-2');
</script> 
```

在哪里：

```
http://mysite.com/803-2 
```

是我要链接到的页面的 url [年龄...

# vba - 在 Power Point 演示文稿中添加计数器

> ID：15427622
> 
> 赞同：2
> 
> 时间：2013-03-15T08:19:57.093
> 
> 标签：vba, powerpoint, counter

我想在 Power Point 演示文稿中添加一个计数器。有人向我提到这在 VBA 中可能是可行的。你知道这是否可以在 VBA 中完成以及如何完成？

基本上这就是我想做的事情：显示一个计数器，例如代表自我的演示开始以来租用的汽车数量。例如，开始时计数器为 0，每分钟增加 2000（这只是一个示例）。我们可以在每张幻灯片上看到柜台，所以在我的演讲结束时，人们可以看到（我会告诉他们）自从演讲开始以来，已经租用了 X（大量）汽车。

我试图在互联网上找到一些东西但没有成功......我希望有人能够帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:45:39.163

我给你一些想法。即使我不提供任何代码，它们也可能会有所帮助。

1.  通常，您需要在演示文稿中使用“计时器”之类的东西，它会从您的演示文稿开始并计算所用时间。不幸的是，在 PowerPoint 中没有这样的东西。您可以使用一些外部解决方案，例如 C# COM 插件，但它相当复杂。

2.  您可以使用 PP 应用程序事件，但汽车的价值不会每分钟都发生变化，但您输入的每张新幻灯片或任何其他事件都会触发（如反向移动等）。这有点复杂，但在我们（StackOverflow 用户）的知识范围内。

您可以在该[链接](http://www.pptfaq.com)下搜索或询问我曾经在哪里找到很多有趣的想法。

**我承诺**提供解决方案，因此即使问题已解决，我也愿意这样做。因此，我通过重新编辑我希望允许的答案来做到这一点。

1.  我们必须确保有一个“文本框”，其中“计数值”将放置在每张幻灯片上。将以下代码添加到 Module1 并运行它。

    ```
    Sub Add_CarValue_Text()

    Dim SLD As Slide, SHP As Shape, shCarValue As Shape
    Dim boCarValue As Boolean

    For Each SLD In ActivePresentation.Slides
        For Each SHP In SLD.Shapes
            If SHP.Name = "CarValue" Then
                boCarValue = True
                Exit For
            End If
        Next

        If Not boCarValue Then
            Set shCarValue = SLD.Shapes.AddTextbox(msoTextOrientationHorizontal, 0, 0, 150, 50)
            With shCarValue
                .Name = "CarValue"
                .TextFrame.TextRange.Text = "Cars counter: "
            End With

        End If
        boCarValue = False
    Next
    End Sub 
    ```

2.  添加新的类模块并将下面的代码放在那里。必要时进行更改。

    ```
    Public WithEvents PPApp As Application

    Private TimerStart As Long
    Private Const increasePerMinute = 1000

    Private Sub PPApp_SlideShowBegin(ByVal Wn As SlideShowWindow)
        TimerStart = Int(Timer)
    End Sub

    Private Sub PPApp_SlideShowNextSlide(ByVal Wn As SlideShowWindow)
        If Not Wn.View.Slide.Shapes("CarValue") Is Nothing Then
            Dim Lap As Integer
            Lap = (Int(Timer) - TimerStart) / 10 'change for 60 to change from 10sec to 1 min
            Wn.View.Slide.Shapes("CarValue").TextFrame.TextRange = "Cars volume: " & Lap * increasePerMinute
        End If
    End Sub 
    ```

3.  将以下代码添加到 Module2 并运行该过程。

    ```
    Public tmpPPApp As New AppClass
    Sub StartUp()
        Set tmpPPApp.PPApp = PowerPoint.Application
    End Sub 
    ```

4.  开始您的演示。

重要的！如果您更改代码中的任何内容，请再次运行第 3 步。此外，为了以防万一，您需要在午餐演示文稿之前运行程序 3。

# java - 无法在 Java 中使用 List 类进行向下转换

> ID：15427624
> 
> 赞同：9
> 
> 时间：2013-03-15T08:20:08.100
> 
> 标签：java, generics, collections, downcast

我一直在为此寻找答案，但无济于事。我的问题是为什么不可能对泛型感到沮丧。我有一个名为 Job 的类并扩展了一个名为 Model 的类

```
Job extends Model 
```

现在我从生成模型列表的可重用代码中获取作业集合

```
// error: Cannot cast from List<Model> to List<Job>
List<Job> jobs = (List<Job>) jobMapper.fetchAll(); 
```

其中 jobMapper.fetchAll() 返回一个 List ，其中每个模型都是一个 Job 对象。

我认为这会起作用，因为我可以这样做：

```
EditText mUsername = (EditText) findViewById(R.id.editUserName); 
```

这是一个简单的向下转换。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T08:25:46.143

你不能这样做，因为 Java 不允许这样做。[读这个。](https://stackoverflow.com/questions/1292109/generics-get-and-put-rule)你应该做的伎俩：

```
 List<Job> jobs = (List<Job>) ((List<?>)jobMapper.fetchAll()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T08:31:43.827

您可以执行以下操作：

```
List<Job> jobs = (List) (jobMapper.fetchAll()); 
```

**（如果您确信它在您的情况下是安全的，请**取消警告）

编译器不允许您尝试进行强制转换，因为一旦您有一个 List<Job> 和一个 List<Model> 指向同一个列表，您可以将 Model 实例添加到后者，并使 List<Job> 有一个 Model项目，这破坏了类型安全。

因此，在允许这种技巧时要小心——它稍后会以 ClassCastException 的形式返回给您，而您不希望它发生。

关于您的最后一个问题：请注意，虽然 Job**是**Model 而 Job[]**是**Model[]，但集合并非如此：List<Job>**不是**List<Model>。这有点令人惊讶，但它遵循我上面的解释。在没有警告/错误的情况下允许这种转换会破坏类型安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:38:36.753

```
List<Job> jobs = jobMapper.fetchAll(); 
```

错了，它永远不是明确的工作列表。

利用

```
List<? super Job> jobs = jobMapper.fetchAll(); 
```

反而。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:40:55.637

不允许这样做，因为它会/可能导致运行时错误。如果列表已经包含不属于类的对象`Job`怎么办？

您应该：

1.  变`jobMapper.fetchAll()`回`List<Job>`。

2.  投射对象而不是列表，即。`Job job = (Job) jobs.get(0)`.

# vb.net - 设置连接字符串抛出 InvalidOperationException

> ID：15427628
> 
> 赞同：0
> 
> 时间：2013-03-15T08:20:22.873
> 
> 标签：vb.net

`C#`我已经有效地复制了我用来从项目连接到我们的数据库的第一步，`VB.NET`但我`VB 2010 Express`很不高兴。

我有一个带有空 DataGridView 的 winForms。在此表单后面，我添加了以下代码：

![在此处输入图像描述](../Images/8d07390251cbab14b1c42f45191ec914.png)

在`App.config`文件中，我有以下内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name ="WH" connectionString="USER ID=xxx;PASSWORD=xxx;PERSIST SECURITY INFO=True;Data Source=xxx;Initial Catalog=WH" />
  </connectionStrings>
</configuration> 
```

在这一点上，我想我会调试，但我已经收到了一个错误：

![在此处输入图像描述](../Images/780059af3f20e1bba3971578d3152831.png)

这个错误的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:04:29.997

作为替代方案，您可以尝试创建一个新的设置文件而不是使用`ConfigurationManager`该类。

假设您使用名为 WH 的设置创建了一个名为 ConnectionStrings.settings 的文件，您可以通过`ConnectionStrings.Default.WH`.

# python - openerp：简单函数

> ID：15427634
> 
> 赞同：0
> 
> 时间：2013-03-15T08:20:48.033
> 
> 标签：python, openerp

我正在尝试创建一个简单的函数来返回 active_ids 中的 Id 串联列表。但我不断收到此错误：

```
TypeError: 'builtin_function_or_method' object has no attribute '__getitem__' 
```

代码如下：

```
def _test(self, cr, uid, context=None):
    if context is None:
        return False
    result = 'Sel: '
    for id in context.get['active_ids']:
        result = result + '[' + id + ']'
    return result

_columns = {
    'test': fields.text('Test')
}

_defaults = {
    'test': _test
} 
```

我想我无法理解的是函数中的返回类型。当我查看现有代码时，有时会看到返回数组 ([])，有时会返回 {}，有时会看到 res[0][0] 之类的东西，我认为它们是单个值。

请协助。

谢谢

**编辑**：工作代码：

```
def _test(self, cr, uid, context=None):
    if context is None:
        return False
    result = 'Sel: '
    if context.get('active_ids'):
        for id in context.get('active_ids'):
            result = result + '[' + str(id) + ']'
    return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:22:21.890

错误消息表明`context.get`是一种方法，而不是字典。因此，以下

```
for id in context.get['active_ids']: 
```

应该读

```
for id in context.get('active_ids'): 
```

# magento - Magento 管理面板产品图片无法查看或上传图片

> ID：15427643
> 
> 赞同：0
> 
> 时间：2013-03-15T08:21:24.463
> 
> 标签：magento, magento-1.6

管理面板（目录/管理器产品）中的“TypeError：Flex.Uploader 不是构造函数”我在产品图像选项卡中出现此错误上传按钮。上面提到的是（使用萤火虫在控制台中显示的错误）之一。代码方面什么也没做，它刚刚开始出现，我们尝试从最新版本的 magento 或并行（带备份）更新文件。

# windows-8 - 任何具有 40 层以上嵌入式控制的程序都会导致 Windows 8 崩溃

> ID：15427644
> 
> 赞同：1
> 
> 时间：2013-03-15T08:21:26.717
> 
> 标签：windows-8, kernel, stack-overflow, bsod

在windows 8下开发程序时，我们团队发现如果在UI程序中使用过多的控件层会导致**windows蓝屏死机**，错误号为0x7f(0x00000008, xxx, 0x00000000, 0x00000000)。在参考[了这篇文章](http://msdn.microsoft.com/en-us/library/ff559244%28v=VS.85%29.aspx)和[这篇文章](http://blogs.msdn.com/b/ntdebugging/archive/2008/02/01/kernel-stack-overflows.aspx)之后，我们确认我们遇到了内核堆栈溢出问题。并且方法**win32k!xxxDCEWindowHitTest** /2 消耗了 75% 的内核堆栈。我们确信这只会在 Windows 8 下发生。欢迎任何想法。谢谢。

Spy++ 结果是这样的： ![在此处输入图像描述](../Images/e132b9e4b1fc33fc5530566082d43eb7.png)

内核栈是这样的：

0: kd> !analyze -v ****************************************** ************************************* * * * 错误检查分析 * * * ***** ****************************************************** ************************

```
UNEXPECTED_KERNEL_MODE_TRAP (7f)
This means a trap occurred in kernel mode, and it's a trap of a kind
that the kernel isn't allowed to have/catch (bound trap) or that
is always instant death (double fault).  The first number in the
bugcheck params is the number of the trap (8 = double fault, etc)
Consult an Intel x86 family manual to learn more about what these
traps are. Here is a *portion* of those codes:
If kv shows a taskGate
        use .tss on the part before the colon, then kv.
Else if kv shows a trapframe
        use .trap on that value
Else
        .trap on the appropriate frame will show where the trap was taken
        (on x86, this will be the ebp that goes with the procedure KiTrap)
Endif
kb will then show the corrected stack.
Arguments:
Arg1: 00000008, EXCEPTION_DOUBLE_FAULT
Arg2: 803f6000
Arg3: 00000000
Arg4: 00000000

Debugging Details:
------------------

BUGCHECK_STR:  0x7f_8

TSS:  00000028 -- (.tss 0x28)
.tss 0x28
eax=c635fd8e ebx=825f1120 ecx=b241e0a0 edx=ffd014b8 esi=00000000 edi=b241e144
eip=80e1e16a esp=b241e000 ebp=b241e08c iopl=0         nv up ei ng nz na pe nc
cs=0008  ss=0010  ds=0023  es=0023  fs=0030  gs=0000             efl=00010286
hal!HalpInterruptSendIpi+0x1c:
80e1e16a 56              push    esi
.trap
Resetting default scope

DEFAULT_BUCKET_ID:  WIN8_DRIVER_FAULT

PROCESS_NAME:  GCPHost.exe

CURRENT_IRQL:  2

MANAGED_STACK: !dumpstack -EE
!dumpstack -EE
No export dumpstack found

LAST_CONTROL_TRANSFER:  from 80e1dcaa to 80e1e16a

STACK_TEXT:  
b241e08c 80e1dcaa 000000e1 810781c8 00000000 hal!HalpInterruptSendIpi+0x1c
b241e0ac 80e1dbdb 00000000 b241e144 000000e1 hal!HalRequestIpiSpecifyVector+0x78
b241e0c0 80f189d9 00000000 b241e144 81066120 hal!HalRequestIpi+0x15
b241e0d4 80fe9e0e 81066120 86d4f138 00000000 nt!KiIpiSend+0x31
b241e154 80ec35fb 83f7cb88 b241e224 00000000 nt!KiDeferredReadyThread+0x336
b241e1a8 81009a19 00fb3660 00000000 86d4f040 nt!KeReleaseSemaphoreEx+0x309
b241e244 810170ff 83f7cb88 840f54c0 93f8a2a6 nt!ExpReleaseResourceForThreadLite+0x6dd
b241e250 93f8a2a6 df695373 00000000 00000084 nt!ExReleaseResourceAndLeavePriorityRegion+0xd
b241e2c8 93f8a0bf 00000000 00000000 00000000 win32k!SfnDWORD+0x111
b241e31c 93f7c2f7 a746bef8 00000084 00000000 win32k!xxxSendMessageToClient+0xb4
b241e3c8 93f7c7c2 a746bef8 00000084 00000000 win32k!xxxSendMessageTimeout+0x115
b241e3f0 93f71226 a746bef8 00000084 00000000 win32k!xxxSendMessage+0x2c
b241e494 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x287
b241e4d0 93f711bd a746bef8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241e584 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241e5c0 93f711bd a746a0c8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241e674 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241e6b0 93f711bd a74662b8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241e764 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241e7a0 93f711bd a74631d8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241e854 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241e890 93f711bd a7463100 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241e944 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241e980 93f711bd a7463030 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241ea34 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241ea70 93f711bd a7462f60 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241eb24 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241eb60 93f711bd a742cc90 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241ec14 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241ec50 93f711bd a7462e90 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241ed04 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241ed40 93f711bd a7462dc0 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241edf4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241ee30 93f711bd a746bba8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241eee4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241ef20 93f711bd a746bad8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241efd4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f010 93f711bd a7414db8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f0c4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f100 93f711bd a746ba08 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f1b4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f1f0 93f711bd a746b500 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f2a4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f2e0 93f711bd a746a4c8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f394 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f3d0 93f711bd a7414f58 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f484 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f4c0 93f711bd a7414e88 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f574 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f5b0 93f711bd a7465f18 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f664 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f6a0 93f711bd a7465e48 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f754 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f790 93f711bd a74643c8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f844 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f880 93f711bd a74642d8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241f934 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241f970 93f711bd a7464208 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241fa24 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241fa60 93f711bd a7462b98 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241fb14 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241fb50 93f711bd a745f9d8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241fc04 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241fc40 93f711bd a74660e8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241fcf4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241fd30 93f711bd a745f838 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241fde4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241fe20 93f711bd a745ee60 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241fed4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b241ff10 93f711bd a744c0b0 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b241ffc4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b2420000 93f711bd a74193b8 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b24200b4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e
b24200f0 93f711bd a7417520 00000200 00000000 win32k!xxxDCEWindowHitTest+0x6b
b24201a4 93f449bd 00000200 00000000 00e20253 win32k!xxxDCEWindowHitTest2+0x21e

STACK_COMMAND:  .tss 0x28 ; kb

FOLLOWUP_IP: 
win32k!SfnDWORD+111
93f8a2a6 8b350c801194    mov     esi,dword ptr [win32k!_imp__PsGetCurrentThreadWin32Thread (9411800c)]

SYMBOL_STACK_INDEX:  8

SYMBOL_NAME:  win32k!SfnDWORD+111

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: win32k

IMAGE_NAME:  win32k.sys

DEBUG_FLR_IMAGE_TIMESTAMP:  50f77916

BUCKET_ID_FUNC_OFFSET:  111

FAILURE_BUCKET_ID:  0x7f_8_win32k!SfnDWORD

BUCKET_ID:  0x7f_8_win32k!SfnDWORD

Followup: MachineOwner
--------- 
```

# fancybox - 内容更改后 Fancybox 重新加载

> ID：15427649
> 
> 赞同：0
> 
> 时间：2013-03-15T08:22:06.600
> 
> 标签：fancybox, visualization

问题是我不知道在内容完全加载后如何调整fancybox的大小。

也许有一种方法可以将某种 changelistener 添加到 fancybox 内的内容 div 中，您可以在其中调用某种 fancybox.resize 函数。

我已经尝试过一些事情，但之前在花式框中使用自动完成功能遇到了一些问题。

然后我使用了 .live 函数并绑定了一个事件。

这是fancybox里面的代码：

```
<div id="fancy_chart_div"></div> 
```

因此，在将图表加载到此 div 后，fancybox 应根据内容调整大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T17:26:03.140

您可以使用 API 手动调用 fancybox 调整大小：

```
$.fancybox.update() 
```

加载图表后调用它。

# http - 浏览器何时自动发送 Authorization 标头？

> ID：15427650
> 
> 赞同：15
> 
> 时间：2013-03-15T08:22:08.207
> 
> 标签：http, browser, http-headers, authorization

我想知道`Authorization`浏览器何时自动发送标头，何时不自动发送。

通过阅读几篇文章和实验，我发现浏览器只发送凭据：

*   使用`Basic`身份验证时，并且仅当用户直接在浏览器窗口中输入用户名和密码时（例如，如果它们是在 XMLHttpRequest 中提供的）。
*   使用`NTLM`身份验证时

我想找到一个说明浏览器何时应该和不应该自动发送标题的文档（类似于规范文档）。我对标头类型特别`OAuth`感兴趣`Bearer` `Authorization`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-13T13:23:39.630

通常，Web 浏览器在收到 401 响应时会发送 Authorization 标头。RFC 7235“超文本传输​​协议（HTTP/1.1）：身份验证”说：

> “Authorization”头域允许用户代理通过源服务器验证自己——通常但不一定，在收到 401（未授权）响应后。

如果您正在查找 HTTP 身份验证规范，请参阅提供身份验证方案列表和参考的[“超文本传输​​协议 (HTTP) 身份验证方案注册表”](http://www.iana.org/assignments/http-authschemes/http-authschemes.xhtml)。

# f# - 从 F# DU 访问特定案例

> ID：15427651
> 
> 赞同：5
> 
> 时间：2013-03-15T08:22:14.533
> 
> 标签：f#, discriminated-union

假设我有以下 DU：

```
type Something =
| A of int
| B of string * int 
```

现在我在这样的函数中使用它：

```
let UseSomething = function
| A(i) -> DoSomethingWithA i
| B(s, i) -> DoSomethingWithB s i 
```

这行得通，但我必须解构 DU 才能将其传递给 DoSomethingWith* 函数。尝试将 DoSomethingWithA 定义为：

```
let DoSomethingWithA (a: Something.A) = .... 
```

但编译器抱怨没有定义类型 A。

想要将参数限制为Something.A，而不仅仅是任何旧的int，这似乎完全符合F#的哲学，所以我只是走错了路吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:15:22.217

需要注意的重要一点是`A`和`B`是*相同*类型的构造函数`Something`。因此，如果您尝试单独使用`A`和`B`案例，您将收到不详尽的模式匹配警告。

IMO，解构所有 DU 案例是一个好主意，因为它是类型安全的，并且即使您不想这样做，也会迫使您考虑处理这些案例。如果您必须以相同的方式重复解构 DU，则可能会出现问题。在这种情况下，在 DU 上定义`map`和`fold`函数可能是一个好主意：

```
let mapSomething fa fb = function
| A(i) -> fa i
| B(s, i) -> fb s i 
```

请参阅 @Brian 的优秀[Catamorphism 系列](http://lorgonblog.wordpress.com/2008/04/06/catamorphisms-part-two/)以了解有关 DU 的折叠。

这也说明你的例子很好。你真正处理的是解构后`string`的`int`价值观。

您可以使用[Active Patterns](http://msdn.microsoft.com/en-us/library/dd233248.aspx)分别消费两种情况：

```
let (|ACase|) = function A i -> i | B _ -> failwith "Unexpected pattern B _"
let (|BCase|) = function B(s, i) -> (s, i) | A _ -> failwith "Unexpected pattern A _"

let doSomethingWithA (ACase i) = .... 
```

但是推断的类型`doSomethingWithA`仍然相同，并且在传递`B _`给函数时会出现异常。所以做IMO是错误的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T15:20:41.570

其他答案是准确的：在 F#中`A`，并且`B`是构造函数，而不是类型，这是强类型函数语言（如 Haskell）或 ML 家族中的其他语言所采用的传统方法。但是，还有其他方法 - 例如，我相信在 Scala 中，`A`并且`B`实际上是 的子类`Something`，因此您可以在有意义的情况下使用那些更具体的类型。我不完全确定设计决策中涉及哪些权衡，但一般来说，继承使类型推断更难/不可能（Scala 中的原型类型推断比 Haskell 或 ML 语言更糟糕）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T10:16:15.743

`A`不是类型，它只是`Something`. 没有办法避免模式匹配，这不一定是坏事。

也就是说，F# 确实提供了一种叫做*活动模式*的东西，例如

```
let (|AA|) = function 
    | A i -> i 
    | B _ -> invalidArg "B" "B's not allowed!" 
```

然后您可以像这样使用它：

```
let DoSomethingWithA (AA i) = i + 1 
```

但是，您没有真正的理由要这样做！您仍然在后台执行相同的旧模式匹配，而且您可能会遇到运行时错误。

无论如何，您的实现`UseSomething`对于 F# 来说是非常自然的。

# jpa - 在 JPA 中分组

> ID：15427657
> 
> 赞同：1
> 
> 时间：2013-03-15T08:22:41.810
> 
> 标签：jpa

我的问题是为什么`GROUP BY`没有显示在 glassfish 日志中。我在下面添加了以下数据，因为有人想看到它

```
 public List<Message> listAllMessageBySender(String currentUserID) {
    EntityManagerFactory emf = Persistence.createEntityManagerFactory("PersistenceUnit");
    EntityManager entityManager = emf.createEntityManager();

    TypedQuery<Message> eq = entityManager.createQuery("SELECT m FROM Message m WHERE m.sendBy.userId = :userid GROUP BY m.sendTo.userId", Message.class);
    eq.setParameter("userid", Integer.parseInt(currentUserID));
    List<Message> message = eq.getResultList();
    return message;
} 
```

Glassfish 3.1.2.日志

```
FINE: SELECT id, message, send_date, send_by, send_to FROM message WHERE (send_by = ?)
    bind => [50]

Data: 
User A : sendBy.userId = 50
User B : sendTo.userId = 44
User C : sendTo.userId = 43

id      send_date               send_by      send_to            message 

1   2013-03-14 14:58:46         44           50             50 send message to 44
2   2013-03-14 14:58:46         50           44             reply from 44 to 50
3   2013-03-14 17:38:52         44           50             2nd reply to 50
6   2013-03-14 18:22:10         50           44             44 reply to 50
7   2013-03-14 18:22:10         50           43             new

in the query above is i want to list all the user sent from User A. it causes duplication because there is two send_to 44\. the xhtml below shows :

<ui:repeat value="#{messageController.items}" var="messageItem"> 
  <br />
  <div onclick="loadMessage()">
    <h:panelGroup layout="block" >
      <p:graphicImage height="50" width="50" value="#{messageItem.sendTo.profilePicture}"/>
    </h:panelGroup>

   <h:panelGroup layout="block" style="width: 270px;">                                        
     <h:outputText value="#{messageItem.sendTo.registerName}"/>
     <h:panelGroup layout="block" style="float:right;">
       <h:outputText value="#{messageItem.sendDate}" >
         <f:convertDateTime pattern="HH:mm"/>
       </h:outputText>
     </h:panelGroup>
   </h:panelGroup>

  </div>
   <p:remoteCommand name="loadMessageBean" action="#{messageController.loadMessage(messageItem.id)}" /> </ui:repeat>    

ERD 

User Table                        Message Table

user_id                            message_id
register_name                      send_date
                                   send_to     ----> referenced by user_id User Table
                                   send_by     ----> referenced by user_id User Table 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:32:12.470

这个要求没有意义。`group by`当 select 子句包含至少一个聚合函数（sum、avg、min、max 等）时使用。并且所有其他列必须出现在`group by`子句中。

因此，例如，以下查询将是有意义的：

```
SELECT max(m.length), sender.userId from Message m
inner join m.sendBy sender
GROUP BY sender.userId 
```

对于每个消息发送者，它将返回其最长消息的长度。

通过示例数据告诉我们您希望查询返回什么。

如果您想获取用户 A 向其发送消息的所有不同用户，则查询应该是

```
select distinct m.sendTo from Message m 
where m.sendBy.userId = :userid 
```

# android - 在android中获取整个sqlite记录

> ID：15427658
> 
> 赞同：-2
> 
> 时间：2013-03-15T08:22:43.687
> 
> 标签：android, eclipse, sqlite

如何在不使用循环的情况下获取所有记录。循环不是获取 1000 多条记录的好方法。

例如：

```
public List<Contact> getAllContacts() {
    List<Contact> contactList = new ArrayList<Contact>();
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    if (cursor.moveToFirst()) {
        do {
            Contact contact = new Contact();
            contact.setID(Integer.parseInt(cursor.getString(0)));
            contact.setName(cursor.getString(1));
            contact.setPhoneNumber(cursor.getString(2));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }
    return contactList; 
```

但这不是最好的方法。想想你有 5000 多条记录。完成这项任务需要多少时间！

你怎么想 ？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:25:07.437

```
Select * from table; 
```

就这样...

在安卓中：

```
Cursor cursor = database.query(SQLiteHelper.TABLE_YOURTABLE,
    allColumns, null, null, null, null, null); 
```

我认为迭代结果的更清晰方法：

```
cursor.moveToFirst();
while (!cursor.isAfterLast()) {
  Contact contact = new Contact();
        contact.setID(Integer.parseInt(cursor.getString(0)));
        contact.setName(cursor.getString(1));
        contact.setPhoneNumber(cursor.getString(2));
        // Adding contact to list
        contactList.add(contact);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:11:49.767

避免加载数千条记录的唯一方法是减少加载。（无论如何，您将无法在屏幕上放置数千个条目。）

您可能想为您的列表实现某种形式的[延迟加载](https://stackoverflow.com/questions/10696530/android-listview-lazy-loading)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:13:09.913

它`Cursor`本身代表项目的“列表”。这就是为什么我问你从数据库中检索数据后你需要做什么......

如果您只需要将其溅到 上`ListView`，则使用`CursorAdapter`. 即使您需要解析“列表”并在网络上发送一些项目或在 a 中显示以外的其他内容`ListView`，您仍然不需要实际的列表。只需直接从中提取您需要的物品`Cursor`并将它们发送出去。

由于重复自己的缺点，我应该再次指出：这实际上取决于您想对数据做什么。

# samsung-smart-tv - 三星智能电视上传文件

> ID：15427663
> 
> 赞同：1
> 
> 时间：2013-03-15T08:23:06.307
> 
> 标签：samsung-smart-tv

在 samsung dforum 上，我找到了解释功能的[URL](http://www.samsungdforum.com/Guide/ref00011/deviceapi_download_onuploadprogress.html)`startUpload()`。

但也在论坛中，我发现人们说以任何方式上传文件都是不可能的。如果是这样，为什么三星提供该`startUpload()`功能？

有人试过文件上传吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:03:19.643

文档不正确。我在 UE46ES8000 上对其进行了测试，并成功从连接到电视的 USB 闪存驱动器上传了文件。 `OnComplete`调用回调而不是`OnUploadComplete`.

到上传数据的末尾附加字符串`--END_OF_PART--`。如果你从文件中剥离它，你会得到你的原始文件。

```
function OnUploadComplete (msg) {
    alert('***OnUploadComplete***' + msg );
}
function OnUploadProgress (msg) {
    alert('***OnUploadProgress***' + msg );
}

function fnDnStatus (msg) {
    alert('fnCallback' + msg );
    var tArrResult = msg.split("?");
    for (var i=0; i < tArrResult.length; i++) {
        alert("tArrResult[" + i + "] = " + tArrResult[i]);
    }
    // DownResult: If res=1 success, otherwise ERROR (see end of this file)
}

var DownloadPlugin = document.getElementById("pluginObjectDownload");
DownloadPlugin.OnUploadComplete = OnUploadComplete;
DownloadPlugin.OnUploadProgress = OnUploadProgress;
DownloadPlugin.OnComplete = fnDnStatus;
var sever = '192.168.137.1',
    port = 80,
    header = 'Header-name: Header value',
    body = '[[[FILE_BINARY]]]',
    filePath = '$USB_DIR/sda1/textfile.txt',
    uploadRatio = '10',
    serverType = 1;

DownloadPlugin.StartUpload(sever, port, header, body, filePath, uploadRatio, serverType); 
```

我不知道`header`参数的含义。而且我不知道如何指定除服务器根目录之外的 url。数据通过 POST 请求发送到`http://192.168.137.1:80/`。

在服务器端，我用简单的脚本（`http://192.168.137.1:80/index.php`）保存了它：

```
<?php
    $t = file_get_contents('php://input');
    if(strlen($t) > 1){
        echo 'some data arrived';
    }
    file_put_contents('input.txt', $t);
?> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-04-26T21:00:58.440

我刚刚通过 smartthings 将一个视频文件上传到我的三星 uhd。按住视频。点击分享。发送到设备。完成后，您将在右上角看到刚刚共享的视频。点击观看视频。我现在正在看，但无法弄清楚它在电视上的存储位置

# java - 在没有循环引用的情况下使用 Spring IOC 连接 MVP？

> ID：15427664
> 
> 赞同：2
> 
> 时间：2013-03-15T08:23:11.033
> 
> 标签：java, spring, inversion-of-control, mvp

在我的 MVP 应用程序中，我使用如下代码来连接我的 Presenter 和 View：

```
View view = new View();
Presenter presenter = new Presenter(view);
view.setPresenter(presenter); 
```

类在临时无效状态下`View`构造，调用`setPresenter`纠正。如果在没有配置 Presenter 的情况下使用 View ，我在类中有一些代码`View`会抛出一个。`IllegalStateException`

我希望 Spring 可以将这种关系与如下配置联系起来：

```
<bean id="presenter" class="com.foo.Presenter">
  <constructor-arg ref="view" />
</bean>

<bean id="view" class="com.foo.View">
  <property name="presenter" ref="presenter" />
</bean> 
```

这失败了一个冗长的循环依赖异常。

有没有办法告诉 Spring 构造`view`bean，然后`presenter`在最终调用 setter 之前构造 bean `view`？

* * *

一个相关的问题是[创建所有 bean 之后的 Spring setter 依赖注入](https://stackoverflow.com/questions/11655530/spring-setter-dependency-injection-after-all-beans-have-been-created)。但是，[建议的解决方案](https://stackoverflow.com/a/11655638/474189)之一是通过使用基于设置器的连接来解决循环依赖关系，这正是我在这里没有做的。最新的[手册](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-dependency-resolution)似乎也同意——见题为“循环依赖”的方框：

> 一种可能的解决方案是编辑某些类的源代码以由设置器而不是构造器配置。或者，避免构造函数注入并仅使用 setter 注入。也就是说，虽然不推荐，**但是可以通过setter injection来配置循环依赖**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:49:14.997

我确信有更好的解决方案，但如果一切都失败了，你可以“手动”做：

配置：

```
<bean id="presenter" class="com.foo.Presenter">
</bean>

<bean id="view" class="com.foo.View" init-method="init">
</bean> 
```

查看类：

```
public class View implements ApplicationContextAware {

    private ApplicationContext applicationContext;
    private Presenter presenter;

    public void init(){
        presenter = (Presenter)applicationContext.getBean("presenter");
    }

    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        this.applicationContext = applicationContext;
    }
} 
```

作为一个额外的说明，如果你有`annotation-driven`你的配置，你可以做`@Autowired private ApplicationContext applicationContext;`而不是实现 ApplicationContextAware 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T09:32:25.570

一些进一步的研究发现了一个解决方案。最初，我尝试颠倒 XML 配置文件中 bean 定义的顺序，它起作用了：

```
<bean id="view" class="com.foo.View">
  <property name="presenter" ref="presenter" />
</bean>

<bean id="presenter" class="com.foo.Presenter">
  <constructor-arg ref="view" />
</bean> 
```

但是，这感觉不对，因为我相信我不应该依赖文件排序来确保事情不会中断。这导致意识到`depends-on`可以解决问题：

```
<bean id="presenter" class="com.foo.Presenter" depends-on="view">
  <constructor-arg ref="view" />
</bean>

<bean id="view" class="com.foo.View">
  <property name="presenter" ref="presenter" />
</bean> 
```

我欢迎评论这是否是一个好方法。很有可能我以一种非故意的方式使 Spring 屈服于我的意愿。

# c++ - SFINAE 以返回类型工作，但不作为模板参数

> ID：15427667
> 
> 赞同：42
> 
> 时间：2013-03-15T08:23:21.553
> 
> 标签：c++, templates, c++11, sfinae

我已经多次使用 SFINAE 成语，并且习惯于将我`std::enable_if<>`的放在模板参数中而不是返回类型中。但是，我遇到了一些它不起作用的琐碎案例，我不知道为什么。首先，这是我的主要内容：

```
int main()
{
    foo(5);
    foo(3.4);
} 
```

这是`foo`触发错误的实现：

```
template<typename T,
         typename = typename std::enable_if<std::is_integral<T>::value>::type>
auto foo(T)
    -> void
{
    std::cout << "I'm an integer!\n";
}

template<typename T,
         typename = typename std::enable_if<std::is_floating_point<T>::value>::type>
auto foo(T)
    -> void
{
    std::cout << "I'm a floating point number!\n";
} 
```

这是一段据说可以正常工作的等效代码：

```
template<typename T>
auto foo(T)
    -> typename std::enable_if<std::is_integral<T>::value>::type
{
    std::cout << "I'm an integrer!\n";
}

template<typename T>
auto foo(T)
    -> typename std::enable_if<std::is_floating_point<T>::value>::type
{
    std::cout << "I'm a floating point number!\n";
} 
```

我的问题是：为什么第一个实现`foo`会触发该错误，而第二个不会触发它？

> ```
> main.cpp:14:6: error: redefinition of 'template<class T, class> void foo(T)'
>  auto foo(T)
>       ^
> main.cpp:6:6: note: 'template<class T, class> void foo(T)' previously declared here
>  auto foo(T)
>       ^
> main.cpp: In function 'int main()':
> main.cpp:23:12: error: no matching function for call to 'foo(double)'
>      foo(3.4);
>             ^
> main.cpp:6:6: note: candidate: template<class T, class> void foo(T)
>  auto foo(T)
>       ^
> main.cpp:6:6: note:   template argument deduction/substitution failed:
> main.cpp:5:10: error: no type named 'type' in 'struct std::enable_if<false, void>'
>           typename = typename std::enable_if<std::is_integral<T>::value>::type>
>           ^ 
> ```

**编辑**：

[工作代码](http://coliru.stacked-crooked.com/a/69673770917ff0e6)和[错误代码](http://coliru.stacked-crooked.com/a/e43f8c05fecb9b50)。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-15T08:51:18.397

您应该查看`14.5.6.1 Function template overloading`定义函数模板等效性的（C++11 标准）。简而言之，不考虑默认模板参数，因此在第一种情况下，您定义了两次相同的函数模板。在第二种情况下，您有表达式引用返回类型中使用的模板参数（再次参见 14.5.6.1/4）。由于这个表达式是签名的一部分，你会得到两个不同的函数模板声明，因此 SFINAE 有机会工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-07-06T03:27:28.367

模板中的值有效：

```
template<typename T,
         typename std::enable_if<std::is_integral<T>::value, int>::type = 0>
auto foo(T)
    -> void
{
    std::cout << "I'm an integer!\n";
}

template<typename T,
         typename std::enable_if<std::is_floating_point<T>::value, int>::type = 0>
auto foo(T)
    -> void
{
    std::cout << "I'm a floating point number!\n";
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-15T09:10:49.320

模板的`= ...`只是给出了一个默认参数。这不是看起来像的实际签名的一部分

```
template<typename T, typename>
auto foo(T a); 
```

对于*这两个*功能。

根据您的需要，此问题最通用的解决方案是使用标签调度。

```
struct integral_tag { typedef integral_tag category; };
struct floating_tag { typedef floating_tag category; };

template <typename T> struct foo_tag
: std::conditional<std::is_integral<T>::value, integral_tag,
                    typename std::conditional<std::is_floating_point<T>::value, floating_tag,
                                               std::false_type>::type>::type {};

template<typename T>
T foo_impl(T a, integral_tag) { return a; }

template<typename T>
T foo_impl(T a, floating_tag) { return a; }

template <typename T>
T foo(T a)
{
  static_assert(!std::is_base_of<std::false_type, foo_tag<T> >::value,
                 "T must be either floating point or integral");
  return foo_impl(a, typename foo_tag<T>::category{});
}

struct bigint {};
template<> struct foo_tag<bigint> : integral_tag {};

int main()
{
  //foo("x"); // produces a nice error message
  foo(1);
  foo(1.5);
  foo(bigint{});
} 
```

# android - css ul li layout android 2.3 兼容性

> ID：15427668
> 
> 赞同：1
> 
> 时间：2013-03-15T08:23:40.923
> 
> 标签：android, css, layout, browser, compatibility

我做了这个小网络画廊 [http://chocochomp.com/](http://chocochomp.com/) 我有两个主要问题：

*   在我的旧 Android 2.3 功能手机网络浏览器（手机随附的浏览器）上，div 没有正确包装。

    实际上，不同的 LI 块像楼梯一样漂浮在页面的右侧，从不换行。

*   另一个问题可能与fancybox 2 相关。所以，这部分无需回答：在智能手机上，fancybox 2 弹出库不是以屏幕为中心，而是以页面为中心！

**问题：**当页面高度较大时，画廊不会出现在屏幕上..

这是源代码：[https ://github.com/mime29/Choco](https://github.com/mime29/Choco)

谢谢你的帮助

# python - Python中的正则表达式或表达式

> ID：15427683
> 
> 赞同：0
> 
> 时间：2013-03-15T08:24:28.770
> 
> 标签：python, regex

我是正则表达式和 python 的新手。如何在 python 中编写脚本，在其中找到多个空格或制表符并将它们替换为单个空格.. 我如何编写`or`表达式？

我为多个空格写了下面的行，我如何也包含选项卡？

```
ModCon = re.sub('\s{2,}', ' ', content) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:44:37.700

对于 OR 字符，您可以只使用一个字符类：

```
content = re.sub("[ \t]{2,}", " ", content) 
```

您可以使用括号和竖线或任意表达式：

```
content = re.sub("( |\t){2,}", " ", content) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:26:57.987

尝试这个

```
ModCon = re.sub('(\ |\t)+', ' ', content) 
```

如果有一个或多个空格或制表符，则变为只有一个

# ruby - 如何在 ruby 1.8 中获取 ruby 2.0 Module#prepend？

> ID：15427684
> 
> 赞同：1
> 
> 时间：2013-03-15T08:24:31.407
> 
> 标签：ruby, ruby-2.0

ruby 1.8 中 Module#prepend 的等价物是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:57:36.380

请参阅`alias_method_chain`Rails 中的实现。

[http://codelevy.com/2013/02/26/ruby2.0-vs-alias_method_chain.html](http://codelevy.com/2013/02/26/ruby2.0-vs-alias_method_chain.html)

# r - 执行 Shapiro-Wilk 正态性检验

> ID：15427692
> 
> 赞同：33
> 
> 时间：2013-03-15T08:25:01.590
> 
> 标签：r, statistics, normal-distribution

我想进行夏皮罗-威尔克正态性检验。我的数据是`csv`格式。它看起来像这样：

```
 heisenberg
    HWWIchg
1    -15.60
2    -21.60
3    -19.50
4    -19.10
5    -20.90
6    -20.70
7    -19.30
8    -18.30
9    -15.10 
```

但是，当我执行测试时，我得到：

```
 shapiro.test(heisenberg) 
```

> `[.data.frame`(x, complete.cases(x))中的错误：选择了未定义的列

为什么 R 不选择正确的列，我该怎么做？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-15T08:28:43.010

**shapiro.test 有什么作用？**

`shapiro.test`检验“样本来自正态分布”的*空假设***与备择***假设*“样本不来自正态分布”。

**如何在 R 中执行 shapiro.test？**

给出的 R 帮助页面`?shapiro.test`，

```
x - a numeric vector of data values. Missing values are allowed, 
    but the number of non-missing values must be between 3 and 5000. 
```

也就是说，`shapiro.test`需要一个*数字向量*作为输入，它对应于您要测试的样本，并且它是唯一需要的输入。由于您有一个*data.frame*，因此您必须将所需的列作为输入传递给函数，如下所示：

```
> shapiro.test(heisenberg$HWWIchg)
#   Shapiro-Wilk normality test

# data:  heisenberg$HWWIchg 
# W = 0.9001, p-value = 0.2528 
```

**解释 shapiro.test 的结果：**

首先，我**强烈**建议您阅读Ian Fellows 的[**这篇出色的回答**](https://stackoverflow.com/questions/7781798/seeing-if-data-is-normally-distributed-in-r/7788452#7788452)`testing for normality`。

如上所示，`shapiro.test`测试样本来自正态分布的 NULL 假设。这意味着如果您的*p 值 <= 0.05*，那么您将*拒绝*样本来自正态分布的 NULL 假设。正如 Ian Fellows 所说，*您正在测试“正态**性**假设*”。换句话说（如果我错了，请纠正我），如果测试样本*不*来自正态分布的 NULL 假设会*更好*. 为什么？因为，拒绝 NULL 假设*与*接受备择假设不同。

 **在 的零假设的情况下`shapiro.test`，p 值 <= 0.05 将拒绝样本来自正态分布的零假设。简单地说，样本*很少有机会*来自正态分布。这种假设检验的副作用是这种*罕见的机会**很少*发生。为了说明，举个例子：

```
set.seed(450)
x <- runif(50, min=2, max=4)
shapiro.test(x)
#   Shapiro-Wilk normality test
# data:  runif(50, min = 2, max = 4) 
# W = 0.9601, p-value = 0.08995 
```

因此，根据该测试，这个（特定）样本`runif(50, min=2, max=4)`来自正态分布。我想说的是，在很多情况下，“极端”要求（p < 0.05）不满足，这导致大多数时候接受“空假设”，这可能会产生误导。

我想在这里引用@PaulHiemstra 的另一个问题，来自关于对大样本量的影响的评论：

> Shapiro-Wilk 检验的另一个问题是，当您提供更多数据时，拒绝原假设的机会会变得更大。所以发生的情况是，对于大量数据，甚至可以检测到与正态性的非常小的偏差，从而导致拒绝零假设事件，尽管出于实际目的，数据已经足够正常了。

尽管他还指出 R 的数据大小限制对此有所保护：

> 幸运的是 shapiro.test 通过将数据大小限制为 5000 来保护用户免受上述影响。

如果 NULL 假设相反，即样本*不*来自正态分布，并且您得到*p 值 < 0.05*，那么您得出结论，这些样本*不*来自正态分布的情况*非常罕见*（拒绝零假设）。这大致翻译为：样本很可能是正态分布的（尽管一些统计学家可能不喜欢这种解释方式）。我相信这也是 Ian Fellows 在他的帖子中试图解释的。如果我做错了什么，请纠正我！

 *@PaulHiemstra 还对遇到此正态性测试问题时的实际情况（示例回归）进行了评论：

> 在实践中，如果分析假设正态性，例如 lm，我不会做这个 Shapiro-Wilk 检验，而是做分析并查看分析结果的诊断图，以判断分析的任何假设是否违反了太多。对于使用 lm 的线性回归，这是通过查看使用 plot(lm()) 获得的一些诊断图来完成的。统计数据不是一系列计算出几个数字的步骤（嘿，p < 0.05！），但需要大量经验和技能来判断如何正确分析数据。

在这里，我发现 Ian Fellows 对 Ben Bolker 在上面已经链接的同一问题下的评论的回复同样（如果不是更多）信息丰富：

> 对于线性回归，
> 
> 1.  不要太担心正常性。CLT 会很快接管，如果除了最小的样本量和看起来很合理的直方图之外，你还可以。
>     
>     
> 2.  担心不等方差（异方差）。我担心这一点（几乎）默认使用 HCCM 测试。比例位置图将给出一些关于这是否被破坏的想法，但并非总是如此。此外，在大多数情况下，没有先验理由假设方差相等。
>     
>     
> 3.  异常值。厨师距离 > 1 是值得关注的合理原因。
>     
>     
> 
> 这些是我的想法（FWIW）。

希望这能澄清一点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-23T21:53:32.050

您正在申请`shapiro.test()`a`data.frame`而不是列。尝试以下操作：

```
shapiro.test(heisenberg$HWWIchg) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T06:24:45.503

您未能指定准确的列（数据）来测试正态性。改用这个

```
shapiro.test(heisenberg$HWWIchg) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-03-09T21:03:29.403

将数据设置为向量，然后放入函数中。***

# .net - 从 Visual Studio 外部安装 NuGet 包

> ID：15427694
> 
> 赞同：0
> 
> 时间：2013-03-15T08:25:05.837
> 
> 标签：.net, visual-studio, dll, nuget, nuget-package

我正在开发一个项目，该项目将为新网站创建样板，并且根据您在界面/GUI 中选择的内容，它将某些模块安装到新网站。

因此，我想在 Visual Studio 的“外部”使用 NuGet 来添加此模块和对项目/解决方案文件的**引用。**

我将软件包安装到某个路径没有问题，这只是我需要添加到解决方案中的引用。

我想知道是否有人做过类似的事情并可以提供一些指导？

问候，哈莉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:06:12.397

如果 NuGet 包仅包含一个或多个添加到项目引用的程序集，那么使用自定义代码添加引用可能是最简单的方法。

如果 NuGet 包包含内容文件，例如脚本，那么您也需要添加这些内容。

如果 NuGet 包依赖 PowerShell 脚本，那么您可能会使用[SharpDevelop](http://community.sharpdevelop.net/blogs/mattward/archive/2011/06/12/InstallingNuGetPackagesOutsideVisualStudio.aspx)的自定义构建。这是一个重量级的解决方案，因为它需要大部分 SharpDevelop 来完成这项工作。

还有“nuget update”应该更新到最新版本的软件包，但它不会从头开始将它们安装到项目中。

# mysql - 1 年月度汇总，含份额百分比

> ID：15427701
> 
> 赞同：1
> 
> 时间：2013-03-15T08:25:29.563
> 
> 标签：mysql

我正在尝试为我的应用程序制作一份预先报告。现在我遇到了一些查询的麻烦。

这是详细信息：

表产品

```
 id  | name
-----+---------
 1   | Book
 2   | Pen
 3   | Ruler
 4   | Calendar
 5   | Scissors 
```

表事件

```
 id  | name
-----+---------
 1   | Launching
 2   | Sale
 3   | Roadshow
 4   | Presentation
 5   | Normal 
```

表交易

```
---+------------+-------+-----------+---------+-----------+---------+-----------+---------+----------+
id | date       | event | product_1 | share_1 | product_2 | share_2 | product_3 | share_3 |  amount  |
---+------------+-------+-----------+---------+-----------+---------+-----------+---------+----------+
 1 | 2013-01-12 |   1   |    3      |   50    |     2     |    50   |           |         |  5000    |
 2 | 2013-02-13 |   3   |    2      |   50    |     1     |    25   |     4     |   25    |  10000   |
 3 | 2013-01-13 |   5   |    5      |   50    |     4     |    50   |           |         |  7000    |
 4 | 2013-04-13 |   2   |    1      |   100   |           |         |           |         |  5000    |
---+------------+-------+-----------+---------+-----------+---------+-----------+---------+----------+ 
```

我想显示的是这样的

```
--------------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+
Product Name  |  Jan  |  Feb  |  Mar  |  Apr  |  May  |  Jun  |  Jul  |  Aug  |  Sep  |  Oct  |  Nov  |  Dec  |
--------------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+
 Book         |       | 2500  |       | 5000  |       |       |       |       |       |       |       |       |
 Pen          | 2500  | 5000  |       |       |       |       |       |       |       |       |       |       |
 Ruler        | 2500  |       |       |       |       |       |       |       |       |       |       |       |
 Calendar     | 3500  | 2500  |       |       |       |       |       |       |       |       |       |       |
 Scissors     | 3500  |       |       |       |       |       |       |       |       |       |       |       |
--------------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+ 
```

我尝试过的：我使用以下查询成功生成了事件名称分组的输出

```
SELECT t1.name as sort_name, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 1, t2.amount, 0)) as total_jan, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 2, t2.amount, 0)) as total_feb, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 3, t2.amount, 0)) as total_mar, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 4, t2.amount, 0)) as total_apr, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 5, t2.amount, 0)) as total_may, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 6, t2.amount, 0)) as total_jun, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 7, t2.amount, 0)) as total_jul, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 8, t2.amount, 0)) as total_aug, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 9, t2.amount, 0)) as total_sep, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 10, t2.amount, 0)) as total_oct, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 11, t2.amount, 0)) as total_nov, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 12, t2.amount, 0)) as total_dec, 
    sum(IF(YEAR(t2.date) = 2013, t2.amount, 0)) as event_total 
FROM events t1 
LEFT JOIN transactions t2 ON t2.event_id = t1.id 
GROUP BY sort_name 
```

但我不知道按产品分组。我试过玩 union 但仍然返回 SQL 语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:30:44.010

使用相同的查询，并使用子查询创建规范化版本`table_product`：

```
SELECT t1.name as sort_name, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 1, t2.amount, 0)) as total_jan, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 2, t2.amount, 0)) as total_feb, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 3, t2.amount, 0)) as total_mar, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 4, t2.amount, 0)) as total_apr, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 5, t2.amount, 0)) as total_may, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 6, t2.amount, 0)) as total_jun, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 7, t2.amount, 0)) as total_jul, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 8, t2.amount, 0)) as total_aug, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 9, t2.amount, 0)) as total_sep, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 10, t2.amount, 0)) as total_oct, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 11, t2.amount, 0)) as total_nov, 
    sum(IF(YEAR(t2.date) = 2013 AND MONTH(t2.date) = 12, t2.amount, 0)) as total_dec
FROM table_product t1
LEFT OUTER JOIN
(
    SELECT product_1 AS product_id, 
        amount * share_1 / (share_1 + COALESCE(share_2,0) + COALESCE(share_3,0))
            AS amount
    FROM table_transaction
    WHERE product_1 IS NOT NULL
    UNION ALL
    SELECT product_2 AS product_id, 
        amount * share_2 / (share_2 + COALESCE(share_1,0) + COALESCE(share_3,0))
            AS amount
    FROM table_transaction
    WHERE product_2 IS NOT NULL
    UNION ALL
    SELECT product_3 AS product_id, 
        amount * share_3 / (share_3 + COALESCE(share_2,0) + COALESCE(share_1,0))
            AS amount
    FROM table_transaction
    WHERE product_3 IS NOT NULL
) t2 ON t2.product_id = t1.id 
GROUP BY sort_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:39:25.567

你必须加入产品表而不是事件

# java - 创建阻挡玻璃窗格显示方法

> ID：15427708
> 
> 赞同：0
> 
> 时间：2013-03-15T08:25:46.330
> 
> 标签：java, blocking, glasspane

我使用玻璃窗格在 JFrame 内创建了一个模式对话框。我的显示方法非常简单：它创建一个 JPanel 作为带有一些 alpha 背景的玻璃窗格，并添加 JLabel 和一个确定和关闭按钮。然后通过 设置和显示玻璃窗格`frame.getGlassPane().setVisible(true);`。

一切正常：如果我调用该方法，窗格将显示，我可以单击确定或取消，玻璃窗格将隐藏。但是该方法在显示玻璃窗格后直接返回。但我希望它表现得像`JOptionPane`方法：它们一直阻塞，直到对话框关闭。

但是每次我试图在我的显示方法结束时插入任何类型的忙等待时，如果我单击打开按钮，GUI 就会被冻结。我也尝试从中获取机制，`JDialog#show()`但这对我来说有点复杂。

那么如何在玻璃窗格可见时阻止 show 方法呢？

这是一个简单的例子：

```
public class GlassPaneSSCE extends JPanel {

    private JFrame parentFrame;

    public GlassPaneSSCE(JFrame parent) {
        parentFrame = parent;
        addKeyListener(new KeyAdapter() {});
        addMouseListener(new MouseAdapter() {});
        setBackground(new Color(0, 0, 0, 100));
        initGui();
    }

    @Override
    protected void paintComponent(Graphics g) {
        g.setColor(getBackground());
        g.fillRect(0, 0, getWidth(), getHeight());
        super.paintComponent(g);
    }

    private void initGui() {
        setLayout(new FlowLayout(FlowLayout.CENTER));
        setOpaque(false);

        final JPanel content = new JPanel(new BorderLayout(4, 4));
        content.setOpaque(true);
        content.setBorder(new EmptyBorder(8, 8, 8, 8));

        JLabel top = new JLabel("Title of this little modal dialog");
        content.add(top, BorderLayout.NORTH);

        JPanel inner = new JPanel(new BorderLayout());
        content.add(inner, BorderLayout.CENTER);

        inner.add(new JScrollPane(new JList(new String[] {
            "Item 1                                        ", 
            "Item 2", "Item 3"
        })));

        Box ctrlButtons = Box.createHorizontalBox();
        ctrlButtons.setBorder(new EmptyBorder(0, 4, 4, 4));
        ctrlButtons.add(Box.createHorizontalGlue());
        ctrlButtons.add(new JButton(new AbstractAction("OK") {

            @Override
            public void actionPerformed(ActionEvent e) {
                parentFrame.getGlassPane().setVisible(false);
                parentFrame.setGlassPane(new JPanel());
            }
        }));
        content.add(ctrlButtons, BorderLayout.SOUTH);

        add(content);
    }

    public void display() {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                parentFrame.setGlassPane(GlassPaneSSCE.this);
                parentFrame.getGlassPane().setVisible(true);

                // Set the focus on the glass pane
                requestFocus();
                setFocusCycleRoot(true);
            }
        });

        // The next line should be executed only if
        // the ok button is clicked and not before
        System.out.println("End of display()");
    }

    public static void main(String[] args) {
        final JFrame f = new JFrame();
        f.setLayout(new FlowLayout(FlowLayout.CENTER));
        JTextArea tp = new JTextArea(10, 10);

        for (int i = 0; i < 20; i++) {
            JButton b = new JButton("Open");
            b.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    GlassPaneSSCE gp  = new GlassPaneSSCE(f);
                    gp.display();
                }
            });
            f.add(b);

            tp.append("Item " + (i+1) + "\n");
        }
        f.add(new JScrollPane(tp));
        f.setSize(600, 600);
        f.setVisible(true);
    }

} 
```

# javascript - 删除锤子事件

> ID：15427715
> 
> 赞同：5
> 
> 时间：2013-03-15T08:26:04.783
> 
> 标签：javascript, hammer.js

我使用hammer.js 库创建一个事件，如下所示：

```
Hammer(myElement).on("doubletap", function(evt){
            evt.preventDefault();
        }); 
```

我怎样才能删除注册的事件？我也可以使用 Jquery 吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T08:30:23.950

简直了`Hammer(myElement).off(eventName);`

如果你想使用 jQuery，那么语法是：

```
$(myElement).hammer().on(eventName, callback) 
```

如果你想为事件指定“命名空间”，那么你声明例如。

```
$(myElement).hammer().on("tap.namespace", callback);
$(myElement).hammer().on("tap.anotherNamespace", callback2); 
```

这使得可以仅分离所需的事件，例如：

```
$(myElement).hammer().off("tap.anotherNamespace"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-02T15:16:20.403

在hammer.js API 的文档中，声明它不会删除dom 事件，使用$(element).off() 不会解决您的问题，解决方法是使用hammer.js jquery 包装器，它们的使用 bind 函数在元素上注册事件。使用 unbind 删除所有或特定事件。

$(元素).hammer().unbind();

$(element).hammer().bind('swipeleft', 'swiperight', function(){});

包装器在这里：[https ://github.com/hammerjs/jquery.hammer.js/blob/master/jquery.hammer.js](https://github.com/hammerjs/jquery.hammer.js/blob/master/jquery.hammer.js)

# android - 如何将内容长度和图像数据作为正文的图像发送到服务器？

> ID：15427720
> 
> 赞同：1
> 
> 时间：2013-03-15T08:26:39.110
> 
> 标签：android, http-headers, httpwebrequest, http-content-length

我正在开发一个 android 应用程序，在我的应用程序中我想将图像数据发送到我的服务器。所以我正在使用 put 请求。我不想用 json 对象发送图像数据。我只想将图像数据作为 HTTP put 请求的正文发送。并且还想设置标题内容长度。所以我尝试了以下方式。

```
@Override
      protected Void doInBackground(Void... unused) {

         HttpClient hc = new DefaultHttpClient();
            String message;
            HttpPut p = new HttpPut("abc.com");

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            bitmap.compress(CompressFormat.JPEG, 100, bos);
            byte[] data = bos.toByteArray();

    try {

              p.setEntity(new StringEntity(data.toString()));
              p.setHeader("Content-Length", Long.toString(data.length));
                //p.setHeader("Content-Length", "0");

                HttpResponse resp = hc.execute(p);
                if (resp != null) 
                {
                    if (resp.getStatusLine().getStatusCode() == 204)
                    {

                    }
                }

                Log.d("Status line", "" + resp.getStatusLine().getStatusCode());
            } catch (Exception e) {
                e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(Void... unsued) {

    }

    @Override
    protected void onPostExecute(Void result) {
        try {
            if (dialog.isShowing())
                dialog.dismiss();
            Log.i("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@", "before exception "+result);

        } catch (Exception e) {
            Log.i("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@", "inside catch ");
            Toast.makeText(getApplicationContext(),"Error"+e,
                    Toast.LENGTH_LONG).show();
            Log.e(e.getClass().getName(), e.getMessage(), e);
        }
    }
} 
```

所以我有两个不清楚的问题。1）我想在不使用多部分和不使用 json 对象的情况下将图像数据发送到我的服务器。只需将其设置为请求正文即可。怎么做？2）我想将内容长度设置为标题部分。怎么做？当我尝试设置内容长度时，它给了我系统错误`client protocol exception`

在这两个问题上需要帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T23:37:00.297

作为上述评论者之一，您不想将 byte[] 更改为字符串。您很可能会损坏您尝试发送的图像（我自己试过）。

您应该尝试改用 ByteArrayEntity（而不是 StringEntity）：

```
p.setEntity(new ByteArrayEntity(data)); 
```

# c# - 具有精度和比例的休眠映射小数

> ID：15427728
> 
> 赞同：4
> 
> 时间：2013-03-15T08:27:11.747
> 
> 标签：c#, nhibernate

在 db 里面我有字段是`decimal(9, 6)`

Nhibernate 保存此数据并丢失格式中的最后一位`decimal(9, 5)`

问题是如何使用 nhib 映射字段。按代码映射以使用精度 9,6

```
Property(
   x=>x.Longitude
   // precision and scale                  
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T08:38:09.813

您可以像这样显式设置此类型的精度和比例

```
Property(
    x => x.Longitude,
    m =>
        {
            m.Precision(9);
            m.Scale(6);
        }
 ); 
```

或者您可以设置约定以匹配应用程序中的所有小数，这不在这个问题范围内（只是一个想法）。

希望这可以帮助

# php - CRUD 应用程序上的错误号 1054

> ID：15427729
> 
> 赞同：0
> 
> 时间：2013-03-15T08:27:22.660
> 
> 标签：php, codeigniter, model, error-handling

我收到这个错误有人知道这可能是什么原因吗？我认为它与模型有关，但无法弄清楚。

> 错误号：1054
> 
> “订单子句”中的未知列“id”
> 
> `SELECT * FROM (`tblquestions `) ORDER BY` id `asc LIMIT 5`
> 
> 文件名：C:\wamp\www\Surva\system\database\DB_driver.php
> 
> 行号：330

**模型**

```
private $primary_key = 'QID';
private $table_name = 'tblquestions';

function get_paged_list($limit=10, $offset=0, $order_column='', $order_type='asc')
{
    if (empty($order_column) || empty($order_type)) {
        $this->db->order_by($this->primary_key, 'asc'); 
    }
    else {
        $this->db->order_by($order_column, $order_type);
        return $this->db->get($this->table_name, $limit, $offset);
    }
}

function count_all()
{
    return $this->db->count_all($this->table_name); 
}

function get_by_id($id)
{
    $this->db->where($this->primary_key, $id);
    return $this->db->get($this->table_name);
}

function save($question)
{
    $this->db->insert($this->table_name, $question);
    return $this->db->insert_id();  
}

function update($id,$question)
{
    $this->db->where($this->primary_key, $id);  
    $this->db->update($this->table_name, $question);
}

function delete($id)
{
    $this->db->where($this->primary_key, $id);
    $this->db->delete($this->table_name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:26:14.733

请将 id 更改为 qid 为：

```
 SELECT * FROM (tblquestions) ORDER BY qid asc LIMIT 5 
```

您在查询中给出了错误的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:34:04.233

`order by, having, group by`包括使用子句时要选择的所有列。说——`SELECT ID FROM (tblquestions) ORDER BY ID asc LIMIT 5`
或者如果你也想这样做`SELECT * FROM (tblquestions) ORDER BY tblquestions.ID asc LIMIT 5`

必须在应用`order by, having, group by`子句之前专门选择 ColumnName。

```
Here you can change this---
$this->db->order_by($this->primary_key,'asc');  to
$this->db->order_by("tblquestions".$this->primary_key,'asc'); 
```

# objective-c - 在 iOS 6 中哪里定义 -shouldAutorotate 方法？

> ID：15427731
> 
> 赞同：1
> 
> 时间：2013-03-15T08:27:32.867
> 
> 标签：objective-c, ios6, autorotate

我正在尝试定义 shouldAutorrotate 方法，但我不知道在哪里定义它，因为它从未被调用过。我有一个 UITabBarController，在我的项目中有三个选项卡（每个选项卡都有一个根导航控制器）。我的目标是在某些特定情况下禁用自动旋转。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:09:52.533

好的，解决了。我做了什么：在我最顶层的导航控制器中，我定义了

```
-(BOOL)shouldAutorotate {return [self.visibleViewController shouldAutorotate];} 
```

然后，在我的下一个 viewController

```
-(BOOL)shouldAutorotate {return NO;} 
```

多谢你们！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:39:36.110

你可以在文件中写这个方法`viewcontroller.m`，你想禁用自动旋转这是iOS 6的代码：

```
#ifdef IOS_NEWER_OR_EQUAL_TO_6
-(BOOL)shouldAutorotate
{
   return NO;
}
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:42:35.480

阅读[iOS 6.0 发行说明](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)：

> iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，不推荐使用 UIViewController 的 shouldAutorotateToInterfaceOrientation: 方法。取而代之的是，您应该使用 supportedInterfaceOrientationsForWindow: 和 shouldAutorotate 方法。
> 
> 更多的责任正在转移到应用程序和应用程序委托身上。现在，iOS 容器（例如 UINavigationController）不会咨询它们的子容器来确定它们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。
> 
> 视图控制器支持的界面方向会随着时间而改变——甚至应用程序支持的界面方向也会随着时间而改变。每当设备旋转或视图控制器以全屏模式呈现样式呈现时，系统都会向最顶层的全屏视图控制器（通常是根视图控制器）询问其支持的界面方向。此外，仅当此视图控制器从其 shouldAutorotate 方法返回 YES 时，才会检索支持的方向。系统将视图控制器支持的方向与应用支持的方向（由 Info.plist 文件或应用委托的 application:supportedInterfaceOrientationsForWindow: 方法确定）相交以确定是否旋转。
> 
> 系统通过将应用程序的supportedInterfaceOrientationsForWindow: 方法返回的值与最顶部全屏控制器的supportedInterfaceOrientations 方法返回的值相交来确定是否支持方向。
> 
> setStatusBarOrientation:animated: 方法并未完全弃用。它现在仅在最顶层全屏视图控制器的 supportedInterfaceOrientations 方法返回 0 时才有效。这使调用者负责确保状态栏方向一致。

所以我会首先尝试在应用程序委托中实现该行为。如果这对您的用例来说太粗糙了，我会尝试为各个内容视图控制器实现`-shouldAutorotate`（注意单个！）方法。`r`如果这不起作用（参见上面的引用），请在您的容器控制器中实现此方法，即。标签栏控制器或导航控制器。

另请参阅 WWDC 2012 Session #236，[iOS 上视图控制器的演变](https://developer.apple.com/videos/wwdc/2012/?id=236)。

# arrays - 外向内二维数组算法

> ID：15427732
> 
> 赞同：3
> 
> 时间：2013-03-15T08:27:38.477
> 
> 标签：arrays, algorithm, math

我得到了一系列非负整数。

```
43 18 5 67 1 72 16 17 15 93 38 6 83 10 49 98 7 47 61 52 71 79 82 52 8 
```

我需要将其存储在**Outside-In的****m * n**数组中。如下：

 **```
m = 5
n = 5 
```

![由外而内](../Images/228872b59c17d7c4df9115e8840fdbca.png)

然后，我需要计算二维数组某些部分的总和。*（我已经完成了这部分）*。

我存储数字的理想方法：

```
 1\. Initialize starti,startj = 0.
 2\. Initialize endi = m , endj = n.
 3\. Store the remaining numbers in array[starti][j], where j starts from startj and ends at endj.
 4\. Store the remaining numbers in array[i][endj], where i starts from starti and ends at endi.
 5\. Store the remaining numbers in array[endi][j], where j starts from endj and ends at startj.
 6\. Store the remaining numbers in array[i][endj], where i starts from endi and ends at starti.
 7\. Decrement endi and endj by 1\. 
 8\. Increment starti and start j by 1.
 9\. Repeat the steps 3 - 8 until the last number is stored. 
```

**问题：**有没有更好的方法来解决这个问题？

**附加：**我一直在尝试（*但失败）*`formula to find where the last element is stored before doing all these operation.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:12:33.433

这是一种方法。

首先你可以开始递归思考

有一个方法，它的签名像 `fill(m,n,starting_position, direction)

递归版本看起来像

```
fill(m,n, starting_position, direction) {

// If m=0 or n=0 you have a base case.
// Start at starting position, and fill in the direction.
// Decrement m or n, depending on the direction
// Compute new starting position and direction
// Recursively call fill with the updated m,n, starting_pos, direction
} 
```

现在请注意，此方法是尾递归的，因此您可以摆脱递归并将其替换为 while 循环，而 while 循环的条件源自基本情况。**

# php - 未捕获的 FacebookApiException：抛出不支持的操作

> ID：15427737
> 
> 赞同：0
> 
> 时间：2013-03-15T08:28:05.467
> 
> 标签：php, facebook-apps

我刚刚使用 facebook graph API 构建了一个应用程序，它运行到现在一直很顺利。

**每当我访问我的网站时，我都会收到错误消息**

```
Uncaught FacebookApiException: Unsupported operation thrown on line 1254 
```

**这是第 1254 行**

```
$e = new FacebookApiException($result); 
```

**当我运行调试时，这就是我得到的**

```
Open Graph Warnings That Should Be Fixed

Inferred Property:
The 'og:url' property should be explicitly provided, even if a value can be inferred from other tags.

Inferred Property:  
The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags.

Inferred Property:  
The 'og:description' property should be explicitly provided, even if a value can be inferred from other tags. 
```

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:57:02.547

您必须先登录 facebook 应用程序，然后才能调用图形 API。我在外部进行了 API 调用

```
if ($user_is_logged_in) 
    do this 
```

应该知道，但这是一个诚实的错误！

# url-rewriting - 如何使用查询字符串进行 lighttpd 重定向

> ID：15427738
> 
> 赞同：1
> 
> 时间：2013-03-15T08:28:07.313
> 
> 标签：url-rewriting, query-string, lighttpd, friendly-url

以下网址工作正常：

```
http://www.domain.com/address 
```

但是当我传递任何查询字符串时，例如：

```
http://www.domain.com/address?back=order-opc.php?step=1 
```

它显示404页面

我的重写：

```
"^/address" => "/address.php", 
```

我尝试了这么多不同的重写似乎没有任何工作......我应该如何重写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T09:24:44.403

您应该计算规则中其余的查询字符串。

```
"^/address(\?.*)?" => "/address.php$1", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:29:14.913

您的查询字符串应该是：

```
http://www.domain.com/address/?back=order-opc.php?step=1 
```

注意斜线`/`作为`/address`手段`/address/index.php`或`/address/index.html`（或任何您的默认文档）

# android - String.xml 未在 Android 中更新

> ID：15427743
> 
> 赞同：0
> 
> 时间：2013-03-15T08:28:20.030
> 
> 标签：android, xml, string, textview

当我将此代码添加到 activity_main.xml 时，我收到一个错误，因为 in 中的值`string.xml`不存在..

除了手动更改中的值之外，我应该怎么做`string.xml`？

```
<TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/unknown"
        android:textSize="20dip" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:32:36.223

您在 strings.xml 中引用了一个字符串 Hello **wolrd** **，**而该字符串不在 strings.xml 文件中。

 **您不能以编程方式更改 strings.xml 中的值。

您可以执行以下操作以编程方式更改 textview 中的文本。

```
TextView tv= (TextView) findViewById(R.id.TextView02);
tv.setText("hello");

or
tv.setText(getResources().getString(R.string.my_string));// refer to the string in strings.xml programatically. 
```

您可以在xml中设置文本

```
 <TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="hello"
    android:textSize="20dip" > 
```

在 Strings.xml 中

```
 <string name="my_String">Hello World</string> 
```

在 xml 文件中，您可以引用上面的字符串

```
 <TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/my_string"
    android:textSize="20dip" > 
```

[http://developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)。看看链接。

上面链接中的一个例子。

保存在 res/values/strings.xml 的 XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
  <resources>
    <string name="hello">Hello!</string>// hello is defined here in strings.xml
  </resources> 
```

此布局 XML 将字符串应用于视图：

```
 <TextView
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="@string/hello" />// resource hello is refered here. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-06T01:18:01.883

听起来很简单，但我遇到了同样的问题。我通过重启 Android Studio 解决了这个问题。**

# android - 安装和卸载应用程序时在 SDCARD 中创建和删除外部文件夹

> ID：15427745
> 
> 赞同：2
> 
> 时间：2013-03-15T08:28:28.853
> 
> 标签：android, android-emulator, android-sdcard

我正在制作一个音乐播放器应用程序。

我想在安装过程中在`sd-card`（外部存储）中创建一个文件夹，并在卸载应用程序时删除。

我试图找到很多。卸载应用程序时没有办法。`delete external storage`然后我决定创建一个函数来创建一个目录，并且只有在安装应用程序时才会创建它。

我在应用程序类中尝试过，但这是不可能的，因为每次应用程序启动时都会调用它。

我应该把它放在哪里，`code(Create new directory)`所以它只能被调用并且只有安装时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:57:39.517

你为什么不在创建之前检查目录是否已经存在，我认为这可以满足你的要求。

虽然每次都会调用代码但没有任何伤害。

```
 public class MyActivity extends Activity {
        /** Called when the activity is first created. */

    Boolean isFirstTime;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

              addDirectory();

           }
    }

       public void addDirectory(){

            File direct = new File(Environment.getExternalStorageDirectory() + "/mDirectory");
            if(!direct.exists())
             {
                 if(direct.mkdir()); //directory is created;

             }

        } 
```

# java - 哪个将加载第一个静态变量或静态块？

> ID：15427747
> 
> 赞同：16
> 
> 时间：2013-03-15T08:28:52.313
> 
> 标签：java, static, stack, core

我的一个朋友问我哪个会加载第一个静态变量或静态块。

我的答案指向静态变量。

所以他给了我两个方程并说区分它们
**第一个方程**

```
public class Some {
    public static void main(String args[])
    {
        System.out.println(Some.x);
    }
    static {
        System.out.println(Some.x);
    }
    static int x=90;
} 
```

开/关：0 90

**第二个方程**

```
public class Some {
    public static void main(String args[])
    {
        System.out.println(Some.x);
    }
    static int x=90;
    static {
        System.out.println(Some.x);
    }
} 
```

开/关：90 90

我试图反编译字节码，发现上面两个方程都是一样的。请帮助我区分它们。当静态变量初始化时我很困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T08:33:28.303

静态块按照它们在源文件中出现的顺序进行初始化。关于堆栈溢出已经有几个与此相关的问题......这个问题对你有一个很好的答案：[Java：静态最终字段的初始化顺序是什么？](https://stackoverflow.com/questions/4446088/java-in-what-order-are-static-final-fields-initialized)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:37:20.603

静态变量和静态块按照它们出现的顺序执行。

这里先 O/P: 0 90 作为在`System.out.println(Some.x);`静态变量初始化语句之后执行的静态块的语句`static int x=90;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T08:40:08.370

静态变量在 JVM 加载类时执行，类在实例化或调用其静态方法时被加载。

static Initializer 块在类被实例化之前或在其静态方法被调用之前被初始化，甚至在其静态变量被使用之前。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T08:51:57.117

我给出了一个简单的例子来说明静态和实例内容的控制流：

假设您有 2 个类 A 和 B。A 类扩展到 B 类。B 类有一个 main 方法。在 cmd 上成功编译两个命令后，如下所示：

```
java B 
```

现在会发生什么一步一步看：

1.  将加载 A 类和 B 类
2.  A类的静态成员和块将被识别并顺序执行（一个接一个）（但在类加载时只执行一次）
3.  B类的静态成员和块将被识别并执行（一个一个）（但在类加载时只执行一次）
4.  将调用 B 类的 main 方法（如果 B 类没有 main 方法，则将调用 A 类的 main 方法）
5.  一旦您创建了 A 类的对象：所有实例成员的初始化和实例块的执行都将在 A 类中完成
6.  将执行 A 类的构造函数（用于创建对象）
7.  如果创建B类的对象：所有实例成员的初始化和实例块的执行都将在A类中完成。
8.  A类的构造函数（默认构造函数或任何其他，如果你从B的构造函数调用它）将被执行

9.  那么所有实例成员的初始化和实例块的执行都将在 B 类中完成

10.  之后将执行 B 类的构造函数（用于创建对象）

注意：静态成员和块在第一次加载类时只执行一次，而实例成员和实例块在每次创建类的对象时执行。如果我不正确，请告诉我。

# c# - 实体框架调用存储过程并映射到对象

> ID：15427753
> 
> 赞同：0
> 
> 时间：2013-03-15T08:29:15.110
> 
> 标签：c#, asp.net, entity-framework

我在应用程序中有以下数据模型

```
public class User
{
    public string Id {get;set;}
    public string Name {get;set;}
    public Job AtJob {get;set;}
}

public class Job
{
    public string Id {get;set;}
    public sting Title {get; set;}
} 
```

我用以下语法调用 SQL Query

```
context.ExecuteStoreQuery<User>("SELECT Id, Name FROM dbo.[User]").ToList(); 
```

它有效。问题是当我想从 Job 返回字段并将它们映射到对象数据模型时。例如

```
context.ExecuteStoreQuery<User>
("SELECT U.Id, U.Name, J.Title 
  FROM dbo.[User] U 
  INNER JOIN dbo.[Job] J 
  ON U.JobId = J.JobId).ToList(); 
```

那么，有没有什么好的/简单的方法可以将作业列映射到对象模型中的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:52:54.977

为什么不使用`Include()`并这样做？：

```
var user = context.Users.Include(u => u.Job); 
```

# qt - 如何在 QAbstractTableModel::data() 中正确访问 QMap

> ID：15427754
> 
> 赞同：1
> 
> 时间：2013-03-15T08:29:15.870
> 
> 标签：qt, qabstracttablemodel, qmap, qmodelindex

我得到了一个带有标识符和相应对象的 QMap。子类化 QAbstractTableModel::data() 时，您将分别获得带有行和列的 QModelIndex。每行应该代表一个对象（QAbstractTableModel::rowCount() 是 myMap->size()）。

通过以下方式获取当前对象是否合法

```
myMap->values().at(index.row()) 
```

由于（未排序的）地图的标识符被绕过了，这是否意味着（排序、插入）？我的意思是对于 QAbstractTableModel::setData() 我需要绕过相同的地图标识符？！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-05T15:57:30.213

很晚的答案，但仍然有用：

```
(myMap->constBegin() + index.row()).key();
(myMap->constBegin() + index.row()).value(); 
```

将避免复制`values()`方法的技巧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T14:50:33.957

当您说“标识符”时，我假设您的意思是**key**，而“相应的对象”是**value**。`QMap`是按定义按键排序的。

如果您从不打算使用`QMap`键值功能，您应该考虑将您的值存储在一个`QList`容器中，并按照您的建议根据行索引访问它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T08:41:29.777

`QMap::values`按其键的升序返回所有值，因此您的代码可能会起作用。不过，我会使用以下内容：

```
myMap[this->index(index.row(), 0).data().toString()] 
```

前提是您从 QAbstractTableModel 调用它，并且您的密钥位于第 0 列。

# javascript - 在安卓手机上，当访问market://下载网址时，得到“无法加载网页”

> ID：15427758
> 
> 赞同：3
> 
> 时间：2013-03-15T08:29:29.077
> 
> 标签：javascript, android, web, google-play

表单上的 Android 市场 URL`market://details?id...`可用于启动 Google Play 应用程序和下载其他应用程序。
但是，当使用未附带 Google Play 应用程序或已被删除的 Android 设备时，尝试打开`market:// ...`URL 会导致“无法加载页面”。

有没有办法**使用 javascript**检测 Google Play 应用程序的缺失，以便向用户建议他/她安装 Google Play 应用程序，而不是显示一般错误消息？

**对不起，没有说清楚，我在网页中使用“market://..” url下载，而不是原生的android应用程序，所以Raghav Sood的答案不是我想要的，谢谢。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:33:12.413

您可以通过尝试以虚拟意图启动它来使用它来检查是否安装了 Google Play：

```
public boolean hasGooglePlayInstalled() {
    Intent market = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=dummy"));
    PackageManager manager = mContext.getPackageManager();
    List<ResolveInfo> list = manager.queryIntentActivities(market, 0);

    if (list != null && list.size() > 0) {
        for (int i = 0; i < list.size(); i++) {
            if (list.get(i).activityInfo.packageName.startsWith("com.android.vending") == true) {
                return true;
            }
        }
     }
    return false;
} 
```

只需在您的代码中使用它：

```
if(hasGooglePlayInstalled()) {
    //Open Google Play
} else {
    //Open browser/show message
} 
```

# php - PHP 每 X 分钟执行一次操作

> ID：15427760
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:29:37.950
> 
> 标签：php, api

我制作了一个 PHP 脚本，它从 twitter 获取推文并将它们保存到一个文件中以供使用（作为 JSON）。问题是我在执行脚本时只得到一次推文，但我想大约每 4-5 分钟得到一次。

我已经调查过了`sleep`，但这只会延迟浏览器并执行一次操作。我希望**每**4 分钟执行一次，而不是延迟后执行一次。

我也研究了 cron，但是我要运行我的应用程序的服务器不允许我使用 cron。

TL;DR：有人知道第一次执行后每 X 分钟执行一次 php 脚本的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:31:23.647

最好的办法是安排一个任务每隔 x 分钟调用一次 PHP 页面，而不是试图保持线程打开。看一下[CRON JOB](http://en.wikipedia.org/wiki/Cron)。

如果您使页面可公开访问，则不需要从服务器执行计划任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:34:09.567

您可以设置一个 Web 监控服务（有些是免费的，例如 Pingdom），每 X 分钟向您的页面发出一次 HTTP 请求，这应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:34:27.660

有些供应商只为您提供运行 cron 作业。调查他们，他们可以每隔 x 分钟调用一次你的 php 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T09:04:29.953

我自己设法解决了这个问题。正如我的问题所述，Javascript 和 Jquery 也是可行的解决方案。我使用 a`setInterval`每隔 X 分钟在我的 twitter.php 文件上执行一次 $.get 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T08:37:19.890

在没有 cron 的情况下，你所做的一切都是 hack。

你*可以*去

```
while (1) {
  process(...)
  sleep(4*60)
} 
```

但是您会遇到 PHP 执行时间限制的问题。

也许可以让您的脚本执行一次操作，然后每 4 分钟从支持 cron 的主机调用一次？

# c# - 使用委托的可访问性不一致

> ID：15427761
> 
> 赞同：1
> 
> 时间：2013-03-15T08:29:38.537
> 
> 标签：c#, winforms, delegates

我正在尝试使用 a 将 a `string`from发送`form SettingsMenu`到我的 Main 表单`Delegate`，结构如下所示：

以 SettingsMenu 形式代表：

```
delegate void ClocknameReceivedEventHandler(object sender, SettingsMenu.ClocknameReceivedEventArgs e); 
```

SettingsMenu 类中的内部类 ClocknameReceivedEventArgs：

```
public partial class SettingsMenu : Form
{
    internal class ClocknameReceivedEventArgs : EventArgs
    {
        string _clockname;
        public string Clockname
        {
            get { return _clockname; }
        }

        public ClocknameReceivedEventArgs(string clockname)
        {
            _clockname = clockname;
        }
    }
} 
```

还有更多的代码`SettingsMenu`：

```
public event ClocknameReceivedEventHandler ClocknameReceived;

// Invoke the Changed event; called whenever list changes
protected void OnClocknameReceived(SettingsMenu.ClocknameReceivedEventArgs e)
{
    ClocknameReceived(this, e);
} 
```

`SettingsMenu`我`Main form`使用以下命令捕获来自我的传入数据`Event`：

```
_settings.ClocknameReceived += new ClocknameReceivedEventHandler(ClockClocknameReceived); 
```

我的主窗体上实际从 SettingsMenu 接收字符串的方法：

```
private void ClockClocknameReceived(object sender, SettingsMenu.ClocknameReceivedEventArgs e)
{
    string ClockName;
    ClockName = e.Clockname;
    lblClockname.Text = ClockName;
} 
```

现在我在 SettingsMenu 类中收到以下错误：

```
Error   2   Inconsistent accessibility: parameter type 'LivePigeonClient.Forms.SettingsMenu.ClocknameReceivedEventArgs' is less accessible than method 'LivePigeonClient.Forms.SettingsMenu.OnClocknameReceived(LivePigeonClient.Forms.SettingsMenu.ClocknameReceivedEventArgs)'    D:\SVN\sentul\Livepigeonflights\trunk\LivePigeonClientSolution\LivePigeonClient\Forms\SettingsMenu.cs   54  24  LivePigeonClient 
```

和

```
Error   1   Inconsistent accessibility: field type 'LivePigeonClient.Forms.ClocknameReceivedEventHandler' is less accessible than field 'LivePigeonClient.Forms.SettingsMenu.ClocknameReceived' D:\SVN\sentul\Livepigeonflights\trunk\LivePigeonClientSolution\LivePigeonClient\Forms\SettingsMenu.cs   51  52  LivePigeonClient 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T11:28:00.197

我需要使用 a`public delegate`和 a`public class`来解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:42:10.480

您的事件参数被标记为内部，这意味着它不会在您的程序集之外共享：

```
internal class ClocknameReceivedEventArgs 
```

但是然后你在一个被保护的方法上使用它（它在程序集之外可用）：

```
protected void OnClocknameReceived(SettingsMenu.ClocknameReceivedEventArgs e) 
```

如果编译器允许这样做，那么如果他们无法创建参数，那么应该如何调用您的方法？

要修复，可能将它们更改为公共或都受保护，或者都是内部的，具体取决于您希望如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T12:48:49.680

如果您对委托使用公共访问说明符，则将其删除。！它对我很有用。！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:36:19.190

是的，只需将访问修饰符切换为 public 就可以了...

# android - 使用 Facebook SDK 3.0 在 Android 中进行 Facebook 身份验证后未收到用户电子邮件

> ID：15427762
> 
> 赞同：1
> 
> 时间：2013-03-15T08:29:43.537
> 
> 标签：android, facebook, email

我在我的 android 应用程序中使用以下代码登录 Facebook。在权限屏幕登录后没有询问电子邮件权限，而且我也没有在 onSessionStateChange 方法中收到电子邮件。我的代码有什么问题..请帮助我谢谢进步..

> OpenRequest openRequest = new OpenRequest(this); 列出 readPermissions = new ArrayList(); readPermissions.add("email"); openRequest.setPermissions(readPermissions); openRequest .setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK); mCurrentSession.openForRead(openRequest);

```
private void onSessionStateChange(Session session, SessionState state,
            Exception exception) {

        Log.e("OnsessionStateChange", "------");
        // Only make changes if the activity is visible
        // Get the number of entries in the back stack
        if (state.isOpened()) {
            Log.e("OnsessionStateChange", "--State opened----");

            Request.executeMeRequestAsync(session,
                    new Request.GraphUserCallback() {

                        public void onCompleted(GraphUser user,
                                Response response) {
                            Session session = Session.getActiveSession();
                            Log.w("myConsultant",
                                    user.getId() + " " + user.getFirstName()
                                            + " " + user.getFirstName() + " "
                                            + user.getInnerJSONObject());
                            Log.d("user email",
                                    (String) user.getProperty("email") + "link"
                                            + user.getLink());

                        }
                    });
        } else if (state.isClosed()) {
            Log.e("OnsessionStateChange", "--State closed----");

        }
    } 
```

日志猫

```
03-15 14:02:28.804: E/signInWithFacebook(1168): ------->>1.1
03-15 14:02:28.914: I/dalvikvm(1168): threadid=3: reacting to signal 3
03-15 14:02:28.994: I/dalvikvm(1168): Wrote stack traces to '/data/anr/traces.txt'
03-15 14:02:29.434: I/dalvikvm(1168): threadid=3: reacting to signal 3
03-15 14:02:29.494: I/dalvikvm(1168): Wrote stack traces to '/data/anr/traces.txt'
03-15 14:02:29.654: D/FacebookSDK.WebDialog(1168): Webview loading URL: https://m.facebook.com/dialog/oauth?type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess&display=touch&client_id=366325773475096
03-15 14:02:33.424: D/dalvikvm(1168): GC_CONCURRENT freed 133K, 3% free 9854K/10119K, paused 6ms+6ms
03-15 14:02:33.865: D/FacebookSDK.WebDialog(1168): Redirect URL: http://m.facebook.com/login.php?app_id=366325773475096&skip_api_login=1&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&fbconnect=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D366325773475096%26client_id%3D366325773475096%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26fbconnect%3D1%26from_login%3D1&rcount=1&_rdr
03-15 14:02:33.874: D/FacebookSDK.WebDialog(1168): Webview loading URL: http://m.facebook.com/login.php?app_id=366325773475096&skip_api_login=1&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&fbconnect=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D366325773475096%26client_id%3D366325773475096%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26fbconnect%3D1%26from_login%3D1&rcount=1&_rdr
03-15 14:02:42.003: D/FacebookSDK.WebDialog(1168): Webview loading URL: http://m.facebook.com/login.php?app_id=366325773475096&skip_api_login=1&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&fbconnect=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D366325773475096%26client_id%3D366325773475096%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26fbconnect%3D1%26from_login%3D1&rcount=1&_rdr
03-15 14:04:11.173: W/webcoreglue(1168): updateFrameCache: pending style recalc, ignoring.
03-15 14:04:53.154: D/FacebookSDK.WebDialog(1168): Webview loading URL: https://m.facebook.com/login.php?fbconnect=1&skip_api_login=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D366325773475096%26client_id%3D366325773475096%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26fbconnect%3D1%26from_login%3D1&refsrc=http%3A%2F%2Fm.facebook.com%2Flogin.php&app_id=366325773475096&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&refid=9
03-15 14:04:57.024: D/FacebookSDK.WebDialog(1168): Redirect URL: https://m.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=366325773475096&client_id=366325773475096&redirect_uri=fbconnect%3A%2F%2Fsuccess&display=touch&type=user_agent&fbconnect=1&from_login=1&refid=9&_rdr
03-15 14:04:57.024: D/FacebookSDK.WebDialog(1168): Webview loading URL: https://m.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=366325773475096&client_id=366325773475096&redirect_uri=fbconnect%3A%2F%2Fsuccess&display=touch&type=user_agent&fbconnect=1&from_login=1&refid=9&_rdr
03-15 14:04:57.114: W/chromium(1168): external/chromium/net/spdy/spdy_session.cc:1058: [0315/140457:WARNING:spdy_session.cc(1058)] Received data frame for invalid stream 1
03-15 14:05:19.424: D/dalvikvm(1168): GC_CONCURRENT freed 353K, 5% free 9890K/10375K, paused 6ms+24ms
03-15 14:05:39.163: D/FacebookSDK.WebDialog(1168): Webview loading URL: https://m.facebook.com/dialog/permissions.request
03-15 14:05:40.604: D/FacebookSDK.WebDialog(1168): Redirect URL: fbconnect://success#access_token=AAAFNK92ZAnRgBAGkKgfOETJuxdfpZAta6DAiZCM1RNZCLzgq6XNhDNG9dPAtx0bZBskLW6jtdhx7cDi1ENlmfiBjbdEzuZC5s8933VlcE0cQZDZD&expires_in=5184000&code=AQCo4tQ-KYAZVHSkZZlECsJADz5SnYH4PSlJROB6LQL2OssTrtOFYQc80znkbJFX0zFYS73qFHF-w52QJvFVajwOqmlbe8UcIslhggk77b63IILQ-pKNgdUuxzZbXRQQvd31kAoB7CRSeW9ImNPPwPD2-lI_l2UlyA6sbtRERMzZncHwKoKyWnwsfsGFiAh6CPyVPoFFYUAWrTVK5pTsp8EB
03-15 14:05:41.313: I/dalvikvm(1168): threadid=3: reacting to signal 3
03-15 14:05:41.483: I/dalvikvm(1168): Wrote stack traces to '/data/anr/traces.txt'
03-15 14:05:41.873: E/signInWithFacebook(1168): ------->>1.1
03-15 14:05:41.873: E/OnsessionStateChange(1168): ------
03-15 14:05:41.873: E/OnsessionStateChange(1168): --State opened----
03-15 14:05:42.913: I/dalvikvm(1168): threadid=3: reacting to signal 3
03-15 14:05:43.083: I/dalvikvm(1168): Wrote stack traces to '/data/anr/traces.txt'
03-15 14:05:43.324: D/FacebookSDK.WebDialog(1168): Webview loading URL: https://m.facebook.com/dialog/oauth?display=touch&client_id=366325773475096&scope=email&type=user_agent&redirect_uri=fbconnect%3A%2F%2Fsuccess
03-15 14:05:43.423: I/dalvikvm(1168): threadid=3: reacting to signal 3
03-15 14:05:43.483: I/dalvikvm(1168): Wrote stack traces to '/data/anr/traces.txt'
03-15 14:05:43.743: D/FacebookSDK.WebDialog(1168): Redirect URL: http://m.facebook.com/login.php?app_id=366325773475096&skip_api_login=1&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&fbconnect=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D366325773475096%26client_id%3D366325773475096%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26perms%3Demail%26fbconnect%3D1%26from_login%3D1&rcount=1&_rdr
03-15 14:05:43.933: I/dalvikvm(1168): threadid=3: reacting to signal 3
03-15 14:05:44.045: I/dalvikvm(1168): Wrote stack traces to '/data/anr/traces.txt'
03-15 14:05:44.283: D/FacebookSDK.WebDialog(1168): Webview loading URL: http://m.facebook.com/login.php?app_id=366325773475096&skip_api_login=1&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&fbconnect=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D366325773475096%26client_id%3D366325773475096%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26perms%3Demail%26fbconnect%3D1%26from_login%3D1&rcount=1&_rdr
03-15 14:05:45.323: D/dalvikvm(1168): GC_CONCURRENT freed 293K, 5% free 10019K/10439K, paused 6ms+7ms
03-15 14:05:47.924: D/FacebookSDK.WebDialog(1168): Webview loading URL: http://m.facebook.com/login.php?app_id=366325773475096&skip_api_login=1&cancel=fbconnect%3A%2F%2Fsuccess%3Ferror_reason%3Duser_denied%26error%3Daccess_denied%26error_description%3DThe%2Buser%2Bdenied%2Byour%2Brequest.&fbconnect=1&next=https%3A%2F%2Fm.facebook.com%2Fdialog%2Fpermissions.request%3F_path%3Dpermissions.request%26app_id%3D366325773475096%26client_id%3D366325773475096%26redirect_uri%3Dfbconnect%253A%252F%252Fsuccess%26display%3Dtouch%26type%3Duser_agent%26perms%3Demail%26fbconnect%3D1%26from_login%3D1&rcount=1&_rdr
03-15 14:06:01.764: W/myConsultant(1168): 100003532434600 Nest Nest {"hometown":{"id":"111955358823868","name":"Thiruvananthapuram, Kerala"},"location":{"id":"111955358823868","name":"Thiruvananthapuram, Kerala"},"locale":"en_US","link":"http:\/\/www.facebook.com\/iosdev.nest","updated_time":"2013-03-15T08:23:37+0000","id":"100003532434600","languages":[{"id":"106059522759137","name":"English"},{"id":"112969428713061","name":"Hindi"},{"id":"105692839465644","name":"Malayalam"}],"first_name":"Nest","timezone":5.5,"username":"iosdev.nest","bio":"Developer","verified":true,"name":"Nest Dev","favorite_teams":[{"id":"107844962567241","name":"Chennai Super Kings"}],"last_name":"Dev","gender":"male","favorite_athletes":[{"id":"113041012044041","name":"P. T. Usha"}]}
03-15 14:06:01.764: D/user email(1168): nulllinkhttp://www.facebook.com/iosdev.nest 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T19:50:12.040

不要提交单独的 ME 请求，而是使用 Facebook 的 LoginButton，并添加一个钩子来拦截用户信息：

```
// Intercept the facebook user returned from login
facebookLoginButton.setUserInfoChangedCallback(new LoginButton.UserInfoChangedCallback() {

    @Override
    public void onUserInfoFetched(GraphUser user) {
        mFacebookUser = user;

        if (user != null) {
            LogUtils.LOGFB(TAG, "Got a Facebook user: " + user.getFirstName() +
                    " " + user.getLastName() + ", email: " + user.getProperty("email"));
        }
        else {
            LogUtils.LOGFB(TAG, "No Facebook user");
        }
    }
}); 
```

您还需要添加电子邮件作为额外的阅读权限：

```
facebookLoginButton.setReadPermissions(Arrays.asList(
        "email", "user_birthday", ...)); 
```

# sql-server-2008 - Sql Server 迭代

> ID：15427764
> 
> 赞同：0
> 
> 时间：2013-03-15T08:29:52.143
> 
> 标签：sql-server-2008

我正在使用`while`循环来检索 5 个值。

在循环结束时，我想将所有值相加以产生总数。

例如

*   ITERATION_1 = 5
*   ITERATION_2 = 8
*   ITERATION_3 = 2
*   ITERATION_4 = 3
*   ITERATION_5 = 2

所以总数是20

这是我到目前为止所拥有的：

```
WHILE(@PROJECT_SEQ>0)
BEGIN

    SELECT @PROJ_ID=PROJECT_ID FROM #TmpProjects WHERE SEQ_NO=@PROJECT_SEQ

    SELECT COUNT(idDP_Entity_Activity)AS COUNT1 FROM DP_Project_Details PD
    INNER JOIN DP_Initiation I
        ON I.FK_Project_ID=PD.Project_ID
    INNER JOIN DP_Entities E
        ON E.FK_Project_ID=PD.Project_ID
    INNER JOIN DP_Entity_Activity EA
        ON EA.FK_idDP_Entities=E.idDP_Entities
    WHERE PD.Project_ID=@PROJ_ID

    --SET @COUNT=@COUNT+@COUNT
    --SELECT @COUNT,@PROJ_ID

    SET @PROJECT_SEQ=@PROJECT_SEQ-1

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:38:43.740

当然，更简单的方法是像这样计算项目数？

```
SELECT COUNT(idDP_Entity_Activity)AS [TOTAL_PROJECT_COUNT]
    FROM DP_Project_Details PD
    INNER JOIN DP_Initiation I
        ON I.FK_Project_ID=PD.Project_ID
    INNER JOIN DP_Entities E
        ON E.FK_Project_ID=PD.Project_ID
    INNER JOIN DP_Entity_Activity EA
        ON EA.FK_idDP_Entities=E.idDP_Entities
    WHERE PD.Project_ID in (Select Project_ID From #TmpProjects 
                            Where Seq_No <= @PROJECT_SEQ) 
```

# codeigniter - Codeigniter URL 应根据页面更改

> ID：15427767
> 
> 赞同：0
> 
> 时间：2013-03-15T08:29:59.743
> 
> 标签：codeigniter, codeigniter-2

我有这个控制器功能：

```
public function login()
{
                            .......
        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('login');
        }
        else
        {
            if(isset($username) && isset($password))
            {

                if(isset($result) && $result->num_rows() > 0)
                {
                    $result = $result->result_array(); 
                    $data['result'] = $result;

                    $this->session->set_userdata($data);
                            $this->load->view('profile', $data);
                }else{
                    show_error('Authentication was not successful!');
                }   
            }
        }

    }else{
        $this->load->view('login');
    }
} 
```

成功后，它会转到个人资料页面并显示数据。唯一的问题是，在用户输入凭据之前显示的 URL 和加载 profile.php 后的 URL 是相同的，即 domain.com/profile/login。我希望登录成功后，登录用户的用户名显示为：domain.com/profile/username。这可能吗？如果没有，至少我可以从 URL 中删除登录段吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:36:33.760

您可以在检查数据后使用重定向。如果输入正确，则页面重定向到`/profile/username`如果不保留在同一页面上。

```
if(<success input check>)
    redirect(base_url().'profile/'.$username);
else{
    $this->load->view('login');
} 
```

我假设您检查每个页面的授权。

# jquery - 我可以移动选择列表末尾的选项吗？

> ID：15427768
> 
> 赞同：6
> 
> 时间：2013-03-15T08:29:59.573
> 
> 标签：jquery, html

我有这个选择：

```
<select id="mySelect">
    <option value="Test 1">Test 1</option>
    <option value="Test 2">Test 2</option>
    <option value="Test 3">Test 3</option>
    <option value="Test 4">Test 4</option>
    <option value="Test 5">Test 5</option>
    <option value="Test 6">Test 6</option>
    <option value="Test 7">Test 7</option>
    <option value="Test 8">Test 8</option>  
</select> 
```

我想在这个选择列表的末尾移动第二个选项（测试 2）。我可以使用 jQuery 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T08:32:28.027

```
var $select = $('#mySelect');
$select.find('option:eq(1)').appendTo($select); 
```

[**现场演示**](http://jsfiddle.net/F73G3/)

将选项放在第五位：

```
var $select = $('#mySelect');
var desiredIndex = 5;
$select.find('option').eq(desiredIndex).before($select.find('option:eq(1)')); 
```

[**现场演示**](http://jsfiddle.net/F73G3/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:38:08.587

```
var sel = $('#mySelect');
sel.find('option:eq(1)').appendTo(sel);  // insert to last position 
```

[演示](http://jsfiddle.net/BzP4G/)

```
sel.find('option:eq(1)').insertAfter('option:eq(5)');  // insert to a specified position 
```

[演示2](http://jsfiddle.net/BzP4G/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T05:57:32.773

$("#select_id option[value=thevalue]").insertAfter($("#select_id option:last"));

# c++ - 是否有可能在 C++ 中枚举枚举？

> ID：15427771
> 
> 赞同：18
> 
> 时间：2013-03-15T08:30:07.580
> 
> 标签：c++, enums

是否有可能在 c++ 中有枚举枚举。我必须有类似的东西：

错误类型：

*   类型1
*   类型2
*   类型3

类型1：

*   原因1
*   原因2

类型2：

*   原因3
*   原因4

类型 3：

*   原因5
*   原因6

其中每一个都是整数值。它们应该用于通信协议栈。在接收端，接收器必须从接收到的值中解码错误的类型和原因。如果不能使用枚举，最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T09:41:56.613

我什至不确定枚举的枚举是什么意思。但通常的处理方式是在单个枚举中定义范围：

```
enum Errors
{
    type1 = 0x000,
    cause1,
    cause2,

    type2 = 0x100,
    cause3,
    cause4,
    ...
    causeMask = 0xFF,
    typeMask  = 0xFF00
}; 
```

或者简单地定义单独的枚举，用单独的词，并使用 `unsigned`（或`unsigned short`，或其他任何东西）和一些针对不同原因的转换。

无论采用什么解决方案，我都会将它封装在一个类中，这样客户端代码只需要处理`errorType()` and `errorCause()`; `errorCause()`甚至可以是错误类型值的模板。（但在某个地方，您需要对每个类型值进行显式特化，因为编译器将不知道如何将值映射到导致类型。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T08:52:51.517

正如杰里所说，这是不可能的。解决这个问题的一种方法是有两个枚举。一个用于类别，一个用于子类别。

然而，正如 georgesl 所说，在协议中这样做可能很危险。您绝对应该明确定义枚举值：

```
struct Error
{
   enum Type {
      UNKNOWNTYPE = 0,
      TYPE1 = 1,
      TYPE2 = 2,
      TYPE3 = 3
   };
   enum Subtype {
      UNKNOWNSUBTYPE = 0,
      // subtype for error type 1
      CAUSE1 = 1001,
      CAUSE2 = 1002,
      CAUSE3 = 1003,
      // subtype for error type 2
      CAUSE4 = 2001,
      CAUSE5 = 2002
   };

   Type type;
   Subtype subtype;
};

int main()
{
   Error error;
   error.type = Error::TYPE1;
   error.subtype = Error::CAUSE1;
} 
```

确保为将来的扩展明智地选择数字。

更新：使示例真正起作用。

替代的，更类型安全的解决方案：

```
struct ErrorType
{
   enum type {
      UNKNOWNTYPE = 0,
      TYPE1 = 1,
      TYPE2 = 2,
      TYPE3 = 3
   };
};

struct ErrorSubtype
{
   enum type {
      UNKNOWNSUBTYPE = 0,
      // subtype for error type 1
      CAUSE1 = 1001,
      CAUSE2 = 1002,
      CAUSE3 = 1003,
      // subtype for error type 2
      CAUSE4 = 2001,
      CAUSE5 = 2002
   };
};

struct Error
{
   ErrorType::type type;
   ErrorSubtype::type subtype;
};

int main()
{
   Error error;
   error.type = ErrorType::TYPE1;
   error.subtype = ErrorSubtype::CAUSE1;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T09:53:56.717

我不建议这样做。更喜欢使用明确的错误类型，包含有关错误的信息（您可以添加字符串等）。这也不是很安全的类型。另见詹姆斯的回答。

但无论如何这里是邪恶的宏版本：

```
#define DECL_ERROR_TYPE(errorType, value) , errorType = value << 16
#define DECL_ERROR(errorType, cause, value) , errorType##_##cause = (errorType + value)

#define GET_ERROR_TYPE(error) (error & 0xFFFF0000)

enum Error
{
NoError = 0
DECL_ERROR_TYPE(Type1, 1)
DECL_ERROR(Type1, Cause1, 1)
DECL_ERROR(Type1, Cause2, 2)

DECL_ERROR_TYPE(Type2, 2)
DECL_ERROR(Type2, Cause1, 1)

DECL_ERROR_TYPE(Type3, 3)
DECL_ERROR(Type3, Cause1, 1)
DECL_ERROR(Type3, Cause2, 2)
}; 
```

这使您可以像这样使用它：

```
Error err1 = Type1_Cause1;

if(Type1 == GET_ERROR_TYPE(err1))
    return 0; // Works 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:26:03.210

我只是无法忍受使用枚举。所以我有另一个使用显式类型的答案。它不完整但显示了正确的方向，并且包含添加描述等可能的扩展。

这是声明的代码：

```
struct Error
{
public:
    struct ErrorType
    {
        int _code;
        ErrorType(int code) : _code(code << 16) {}
    };
private:
    friend struct Errors;
    ErrorType _type;
    int _code;

    Error(ErrorType type, int causeCode)
        : _type(type), _code(causeCode)
    {
    }

    static std::map<int, Error> _errors;
public:
    Error() : _type(-1), _code(-1) {}
    static Error FromCode(int code) { return _errors[code]; }

    bool IsOfType(const ErrorType& type )
    {
        return _type._code == type._code;
    }

    operator int()
    {
        return _code | _type._code;
    }

    bool operator == (Error const& other) const
    {
        return _code == other._code && _type._code == other._type._code;
    }

    bool operator != (Error const& other) const
    {
        return _code != other._code || _type._code != other._type._code;;
    }
};

std::map<int, Error> Error::_errors;

struct Errors
{
#define BEGIN_TYPE(type, code) struct type : Error::ErrorType { type() : ErrorType(code) {} typedef Errors::##type CurrentType;
#define CAUSE(cause, code) struct cause : Error { cause() : Error(CurrentType(),code) { Error::_errors[*this] = *this; } };
#define END_TYPE() };

    // first type is coded manually to show what the macros do...
    struct Type1 : Error::ErrorType
    {
        Type1() : ErrorType(1) { }
        typedef Errors::Type1 CurrentType;

        struct Cause1 : Error
        {
            Cause1() : Error(CurrentType(),1) { Error::_errors[*this] = *this; }
        };

        struct Cause2 : Error
        {
            Cause2() : Error(CurrentType(),2) { Error::_errors[*this] = *this; }
        };
    };

    BEGIN_TYPE(Type2, 2)    
    CAUSE(Cause1, 1)
    CAUSE(Cause2, 2)
    END_TYPE()
}; 
```

以下是一些示例用法：

```
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    Error err = Errors::Type1::Cause1();

    Q_ASSERT( err.IsOfType(Errors::Type1()) );
    Q_ASSERT( Errors::Type1::Cause1() == Errors::Type1::Cause1() );
    Q_ASSERT( Errors::Type1::Cause1() != Errors::Type2::Cause1() );

    int code = err;
    qDebug() << code;
    Q_ASSERT( Error::FromCode(code) == Errors::Type1::Cause1() );
    Q_ASSERT( Error::FromCode(code) != Errors::Type2::Cause1() );
    Q_ASSERT( Error::FromCode(code).IsOfType(Errors::Type1()) );

    return a.exec();
} 
```

这不是一个完美的解决方案，但显示了如何以更明确的方式处理它。有很多改进可以做...

# ruby-on-rails - Rails数据远程表单，显示隐藏后不起作用

> ID：15427773
> 
> 赞同：0
> 
> 时间：2013-03-15T08:30:19.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我看来，我有一个表格：

```
<%= form_tag '/offer.js', :id => 'offer', :remote => true do %>
// some inputs
<% end %> 
```

远程表单可以正常工作，直到我使用 jQuery 显示隐藏它不会创建 ajax 调用。为什么会这样以及如何解决这个问题？

在报价部分：

```
$('#next').click(function(){
        $.ajax({
             url: $('#next').data('link'), //your server side script
             type: 'GET',
             success: function (data) {
                $("#step2").html(data);
            },
                error: function (responseObject) {
                    alert("der opstod en fejl");
                }
         });
}); 
```

在我点击下一个按钮后，报价单不再进行 ajax 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:20:17.743

似乎在使用 jQuery 进行 ajax 调用时，应将操作设置为`render :layout => false`否则它将加载布局并且您的 form_form 数据远程将不起作用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:45:18.760

尝试这个

```
$('#next').live('click', function () {

   //Place your ajax request code here

}); 
```

# c# - 日期时间选择器中的日期设置

> ID：15427777
> 
> 赞同：0
> 
> 时间：2013-03-15T08:30:30.430
> 
> 标签：c#, .net, winforms

我正在使用`DateTimePicker`控制。当我选择日期时，我希望日期为`20 Feb 2013`，而不是我得到`20-2-2013`or `2/20/2013`。

我尝试了不同的功能`DateTimePicker`。

我保留了as`Format`的选项。`DateTimePicker``Short`

```
dtpSaudaDate.value.Date.ToShortDateString();    
dtpSaudaDate.value.Date.ToOADate(); 
```

没有一个功能起作用。是否有任何特定方法可以获取该格式的日期？[ 2013 年 2 月 28 日 ]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:33:58.483

1.  将`Format`属性设置`DateTimePicker`为`Custom`
2.  将`CustomFormat`属性设置为`dd MMM yyyy`

* * *

UPDATE（日期时间的月份格式）

*   `M`是一个月，从 1 到 12 (2)
*   `MM`是一个月，从 01 到 12 (02)
*   `MMM`是月份的**缩写名称（Feb）**
*   `MMMM`是月份的**全**名（二月）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:34:35.127

你有没有尝试过

```
dtpSaudaDate.value.Date.ToString("dd MMM yyyy"); 
```

更多格式：

[http://www.dotnetperls.com/datetime-format](http://www.dotnetperls.com/datetime-format)

# java - 在android中启动新线程时出错

> ID：15427787
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:31:12.290
> 
> 标签：java, android

我试图在调用函数时启动新线程，但它给了我

```
Android: java.lang.IllegalMonitorStateException: object not locked by thread before wait() 
```

这是我的代码

```
public class webcam_audio_record_V1_4 extends webcam_audio_record implements Command {

    private static final int TLV_EXTENSIONS = 20000;
    private static final int TLV_TYPE_AUDIO_DURATION = TLVPacket.TLV_META_TYPE_UINT | (TLV_EXTENSIONS + 1);
    private static final int TLV_TYPE_AUDIO_DATA = TLVPacket.TLV_META_TYPE_RAW | (TLV_EXTENSIONS + 2);

    public int execute(Meterpreter meterpreter, TLVPacket request, TLVPacket response) throws Exception {

        int duration = request.getIntValue(TLV_TYPE_AUDIO_DURATION);

        Thread thread = new Thread(new Runnable() { public void run() { record(); } });
        thread.start();

        try { wait(duration * 1000); } catch (InterruptedException e) {}
        try { thread.join(); } catch (InterruptedException e) {}
        play(); 
        return ERROR_SUCCESS;
}

    public void record() {
    }

    public void play() {
    } 
```

我怎样才能在android中成功启动一个线程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:40:14.500

您似乎`Object.wait()`对`Thread.sleep()`. `sleep()`习惯于无所事事一段时间，然后醒来。`wait()`用于等待某些条件发生，并被另一个线程调用`notify()`or唤醒`notifyAll()`。并且您必须持有您所在对象的监视器`wait()`。

查看他们的 javadoc 以了解他们的工作以及如何使用它们。`wait()`无论如何，通常应该避免。您应该改用信号量等更高级别的抽象。

另外，请注意您的代码没有多大意义。您正在盯着一个线程，然后阻止当前线程等待启动的线程完成。你最好在当前线程中做所有事情。它会更简单、更清晰、更高效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:34:12.007

在使用 wait() 时使用以下

```
 synchronized (lock) {
        try {
        lock.wait();
            } catch (InterruptedException e) {
        return;
    } 
```

在哪里

`Object lock = new Object();`

并在通知时使用相同的锁对象

```
 synchronized (lock) {
        lock.notify();                  
    } 
```

# iphone - Obj-C 的 ZXing 无法编译

> ID：15427789
> 
> 赞同：0
> 
> 时间：2013-03-15T08:31:22.490
> 
> 标签：iphone, ios, objective-c, xcode, zxing

我正在尝试为我的 iOS 项目实现 ZXing[的Objective-C 端口。](https://github.com/TheLevelUp/ZXingObjC)我已按照所有说明进行操作，但编译器找不到任何链接文件。有没有人尝试实现这个版本？readme.txt 是否遗漏了一些内容。我正在拔头发试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:18:16.383

我建议你使用 Cocoapods 来安装 Zebra Xing。
Xcode 的最新版本在 c++ 中添加了更多错误检查，您也可以[在此处](https://stackoverflow.com/questions/14593291/xcode-4-6-zxing-compile-error-after-xcode-update-4h127)尝试这种方式来删除这种检查。
您还应该检查： [这里](https://github.com/TheLevelUp/ZXingObjC)

# symfony - Symfony2 的最大数据大小

> ID：15427794
> 
> 赞同：0
> 
> 时间：2013-03-15T08:31:30.633
> 
> 标签：symfony, doctrine-orm

所以我有一个包含 3500 个元素的数据库表。当我尝试显示此数据时，我收到此消息：

> 致命错误：C:\Program Files\EasyPHP-5.3.8.0\www\Symfony\vendor\doctrine\lib\Doctrine\ORM\Mapping\ClassMetadata.php 中允许的内存大小为 134217728 字节已用尽（试图分配 77 个字节）第 344 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:40:37.793

我认为您正在寻找一个迭代器。
[本文](http://www.doctrine-project.org/blog/doctrine2-batch-processing.html#mass-object-processing)将向您展示如何处理大数据。

```
$q = $this->_em->createQuery("<DQL to select the objects I want>");
$iterableResult = $q->iterate();
while (($row = $iterableResult->next()) !== false) {
        // do stuff with the data in the row, $row[0] is always the object
        $this->_em->detach($row[0]); // detach from Doctrine, so that it can be GC'd immediately
 } 
```

此代码不是将所有数据加载到单个数组中，而是创建了一个迭代器来防止大加载和此类错误。

但是，如果您只是想了解如何增加 PHP 的内存大小，请查看[此答案](https://stackoverflow.com/a/12770179/1607098)

```
ini_set('memory_limit', '1G'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:34:19.990

谷歌的“分页” :) 通常没有理由一次获取每个实体，因为（例如）谁想要等待并阅读单个页面上包含 3500 个条目的巨大列表？如果您确实需要它们（例如用于进一步处理），请分块读取和处理它们。

顺便说一句：这不是 S2 的错，内存有限 :)

# android - 选中ToggleButton时Android在AsyncTask中播放声音

> ID：15427797
> 
> 赞同：0
> 
> 时间：2013-03-15T08:31:45.703
> 
> 标签：android, loops, audio, android-asynctask, togglebutton

当检查切换按钮时，我正在尝试设置将以1秒钟的间隔循环的声音。我试图为此制作异步任务，但是当我打开此活动时它崩溃了，为什么？选中切换按钮时，我应该怎么做才能让它以 1 秒的间隔循环声音？

由 AlexanderFox 解决

我当前的java代码：

```
 final ToggleButton metronomepp = (ToggleButton) findViewById (R.id.metronomepp);
    metronomepp.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                Log.i("Metronome", "InWhile");

                if(isChecked) {
                    currentTask = new TimerTask() {
                        @Override
                        public void run() {
                            if (metronome.isPlaying()) { metronome.pause(); }
                            metronome.seekTo(0);
                            metronome.start();
                        }
                    };
                    myTimer.schedule(currentTask, 0, 1000); 
                } else {
                    currentTask.cancel();
               }   
        }
    }); 
```

我现在在更改等待时间时遇到问题。我有双变量 timetw 并将 1000 更改为 timetw 并强制转换为 long 但如果我根据应用程序中的选择更改了时间，当我检查切换按钮时应用程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:53:20.117

我认为使用无限“while”循环是非常糟糕的主意。更好地使用Timer 类的[schedule](http://developer.android.com/reference/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)方法来实现。当您不再需要重复此任务时，只需调用 Timer 的“取消”方法。

例如（更正）：

```
private TimerTask currentTask;

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    if(isChecked) {
        currentTask = new TimerTask() {
            @Override
            public void run() {
                if (metronome.isPlaying()) { metronome.pause(); }
                metronome.seekTo(0);
                metronome.start();
            }
        };
        myTimer.schedule(currentTask, 0, 1000); //in this line we tell to repeat sound every second without start delay
    } else {
        currentTask.cancel();
    }
} 
```

# knockout.js - 使用映射插件时敲除绑定的初始评估

> ID：15427798
> 
> 赞同：1
> 
> 时间：2013-03-15T08:31:46.763
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试使用单页应用程序示例（淘汰教程）和映射插件来创建用户可以单击（选择）的项目列表。我需要从一开始就选择一个默认项目，这是映射插件不起作用的地方，尽管它适用于裸淘汰赛。我错过了什么吗？或者你如何驯服映射插件？

HTML部分：

```
<ul data-bind="foreach: gamePlayers">
    <li class="clickable" data-bind="
              text: playerName, 
              css: { selected: playerId == $root.chosenPlayerId() },                              
              click: $root.selectPlayer">
    </li>
</ul> 
```

JS 常用部分：

```
var dataJS = {
    gamePlayers: [{playerId:1, playerName:"Sun"},{playerId:2,playerName:"Moon"}],
    playerActive:1
}; 
```

确实有效的JS：

```
function GameViewModel(data) {
    // Data
    var self = this;
    self.gamePlayers = ko.observableArray(data.gamePlayers);
    self.chosenPlayerId = ko.observable();

    // Behaviours    
    self.selectPlayer = function (player) { self.chosenPlayerId(player.playerId); };
    self.selectPlayer(data.gamePlayers[0]);
}

ko.applyBindings(new GameViewModel(dataJS)); 
```

JS不起作用：

```
my.vmPlayers = {};

function MyViewModel (data) {
    var self = this;
    ko.mapping.fromJS(data, {}, self);
    self.chosenPlayerId = ko.observable();
    self.selectPlayer = function (player) { self.chosenPlayerId(player.playerId); };
    self.selectPlayer(data.gamePlayers[0]);
}

var mapping = {
    create: function (options) {
        return new MyViewModel(options.data);
    }
};

my.vmPlayers = ko.mapping.fromJS(dataJS, mapping);
ko.applyBindings(my.vmPlayers); 
```

它如何不起作用的示例[http://jsfiddle.net/HeroEja/43AtS/](http://jsfiddle.net/HeroEja/43AtS/)

所以这个绑定**css: { selected: playerId == $root.chosenPlayerId() }**不会在初始页面加载时评估。知道为什么非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:48:46.150

主要问题是由这一行引起的：

```
self.chosenPlayerId(data.playerActive); 
```

因为在这种情况下`data`不会是 JS 对象，而是**`data`持有 JSON 字符串本身**，因此`data.playerActive`将返回 undefined 并且您的初始选择将不起作用。

你需要的是：

```
self.chosenPlayerId(self.playerActive()); 
```

因为无论如何您将数据映射到`self`with`ko.mapping.fromJS(data, {}, self);`

并且由于映射插件`playerId`将是可观察的，因此您需要相应地更改您的用法以使其工作

所以在你的css绑定中：

```
css: { selected: playerId() == $root.chosenPlayerId() } 
```

在你的`selectPlayer`方法中：

```
self.selectPlayer = function (player) {
    self.chosenPlayerId(player.playerId());
}; 
```

一个固定的演示[JSFiddle](http://jsfiddle.net/ukRB9/)。

# html - 如何覆盖用户代理 CSS

> ID：15427799
> 
> 赞同：0
> 
> 时间：2013-03-15T08:31:56.513
> 
> 标签：html, css, user-agent

我想在它的项目旁边有一个没有项目符号的无序列表。我创建了 CSS 属性**list-style-type**并将其设置为**none**。当我把它放在 html 元素中时它工作正常：

```
<ul style="list-style-type: none;">
    <li> item1 </li>
    <li> item2 </li>
</ul> 
```

**但是当我把它放在一个单独的 CSS 文件中时，由于用户代理属性list-style-type: disk;**它不起作用

 **我尝试使用**!important**覆盖它，但它再次未被覆盖。这是谷歌浏览器检查元素的图像，显​​示用户代理规则被描边，但此属性的计算值是用户代理值！

![在此处输入图像描述](../Images/a0494850a1345e569383c9e174f58449.png)

更新：css文件链接正确。我添加了另一个图像，显示用户代理属性已被描边，但它仍用作最终值：

![在此处输入图像描述](../Images/63c898e7a132cefdc1f89ee36309bc52.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:37:18.270

即使没有`!important`CSS，也应该覆盖用户代理。此问题可能是由于未在 HTML 中正确链接到 CSS 造成的。

另请查看此[样式重置](http://meyerweb.com/eric/tools/css/reset/)。在您的文档中包含此内容将减少浏览器的不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:39:14.987

您的样式表实际上是否通过[`link`元素](http://www.w3.org/TR/html5/document-metadata.html#the-link-element)包含在您的页面中？

```
<head>
    <link rel="stylesheet" href="MyStylesheet.css" type="text/css">
</head> 
```

用户代理样式表不应该优先于您网站的样式表。此外，`!important`正如此处其他答案所建议的那样，这是不好的做法，在这里根本没有必要。

编辑：我上面引用的另一个答案已被删除。较新的答案建议使用“样式重置”，但这实际上并不需要 - 您已经知道您要覆盖哪个属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T08:49:47.917

从外观上看，您正在尝试`list-style-type`根据此选择器将该属性应用于跨度元素`span.form-error`。该属性对元素无效`span`，但应直接应用于`ul`您的情况。

作为一个实验，您可以将此规则添加到您的 CSS 文件中，以查看这是实际问题：

```
ul { list-style-type: none; } 
```

如果可行，那么您可以通过向您的 ul 添加一个类来使您的规则更加具体，并将该类用于您的 css-selector。**

# linux - 如何将两个文件（列）粘贴到第三个文件递增行+1？

> ID：15427809
> 
> 赞同：0
> 
> 时间：2013-03-15T08:32:50.487
> 
> 标签：linux, bash, awk, paste

我想使用命令 linux 粘贴两个文件`paste`（也欢迎任何其他选项）但增加第二个文件的行。最好举个例子：

文件 1

```
a
b
c
d
e
f 
```

文件2

```
1
2
3
4
5
6
7
8
9
10
11
12 
```

我想创建 file3 为：

```
a 1
b 3
c 5  
d 7
e 9
f 11 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:55:28.417

用于仅`awk`打印文件二中的奇数行：

```
$ awk 'NR%2' file2 | paste -d' ' file1 -
a 1
b 3
c 5
d 7
e 9
f 11

# Using process substitution 
$ paste -d' ' file1 <(awk 'NR%2' file2)
a 1
b 3
c 5
d 7
e 9
f 11 
```

# android - Android：将数据插入 html 输入

> ID：15427812
> 
> 赞同：3
> 
> 时间：2013-03-15T08:33:01.767
> 
> 标签：android, html, webview

我在将保存的数据从 Android 应用程序插入 html 输入时遇到问题。站点已加载到 WebView 组件中，因此我可以在我的应用程序中访问我的站点，但我仍然无法将保存的数据（来自以前的活动）插入到 html 文本输入中......我找到了一些代码 -`webview.loadUrl("javascript:document.getElementById('pass_id').value = 'y2Yb2q2ckM'");` 并尝试使用来自此链接 - [https://stackoverflow.com/a/12450427/1196540](https://stackoverflow.com/a/12450427/1196540)但这些代码对我不起作用......有人可以提供建议或帮助我解决我的问题吗？

**UPD** ，这是我的网络表单：

```
<form method="post" action="">
<input name="pass" id="pass_id" type="password" autocomplete="off" value="" class="keyboardInput" onkeyup="$('#warn2').show();"/> 
```

**更新 2**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_browser_screen);

    Intent intent = getIntent();
    CLIENT_ID = intent.getExtras().getString("CLIENT_ID");
    lang = intent.getExtras().getString("LANGUAGE");
    CLIENT_PWD = intent.getExtras().getString("PASSWORD");

    if (lang.equals("English"))
        url = link.getEng();
    else if (lang.equals("Russian"))
        url = link.getRussian();
    else if (lang.equals("Dutch(German)"))
        url = link.getDeutch();
    else if (lang.equals("French"))
        url = link.getFrance();
    else if (lang.equals("Italian"))
        url = link.getItalian();
    else if (lang.equals("Spanish"))
        url = link.getSpanish();

    //go to the website
    WebView webview = new WebView(this);
    setContentView(webview);
    WebSettings webSettings = webview.getSettings();
    webSettings.setJavaScriptEnabled(true);

    webview.setWebViewClient(new WebViewClient());

    data = "client_id=" + CLIENT_ID;
    webview.postUrl(url, EncodingUtils.getBytes(data, "base64"));

    //insert pass
    //webview.loadUrl("javascript:document.getElementById('pass_id').value = 'y2Yb2q2ckM'");
    webview.loadUrl("javascript:document.getElementById('pass_id').focus()");
} 
```

# ios - 是否可以列出当前在应用程序中的所有 RemoteIO 音频单元？

> ID：15427813
> 
> 赞同：5
> 
> 时间：2013-03-15T08:33:02.690
> 
> 标签：ios, audio, core-audio, audiounit

我想通过`AudioUnitAddRenderNotify`将音频输出到扬声器的当前活动的 RemoteIO 单元添加一个输出渲染回调。我无权访问实际的 RemoteIO 实例变量，但我想在应用程序中获取音频单元列表并以这种方式找到 RemoteIO 单元。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:41:37.337

如果您可以获得访问权限，`AUGraph`那么这是可能的。根据[AUGraph 文档](http://developer.apple.com/library/ios/Documentation/AudioToolbox/Reference/AUGraphServicesReference/AUGraphServicesReference.pdf)，有几种方法可以帮助您。

`AUGraphGetNodeCount`- 获取图中的节点数 `AUGraphGetIndNode`- 获取索引节点 `AUGraphNodeInfo`- 获取有关节点的信息

一旦你有了正确的节点，你就可以得到 remoteIO 单元并添加你的回调。获得访问权限`AUGraph`实际上是真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:01:51.190

只有一个 RemoteIO。我从来没有尝试过获得指向它的指针，而不是“创建”它的人。你为什么不尝试这样的事情，它应该给你一个指向 RemoteIO 的指针：

```
OSStatus status;
AudioComponentInstance audioUnit;

    // Describe audio component
AudioComponentDescription desc;
desc.componentType = kAudioUnitType_Output;
desc.componentSubType = kAudioUnitSubType_RemoteIO;
desc.componentFlags = 0;
desc.componentFlagsMask = 0;
desc.componentManufacturer = kAudioUnitManufacturer_Apple;

// Get component
AudioComponent outputComponent = AudioComponentFindNext(NULL, &desc);

// Get audio units
status = AudioComponentInstanceNew(outputComponent, &audioUnit);
checkStatus(status); 
```

# ios - UIPageViewController 页面转到另一个不处理旋转的场景

> ID：15427814
> 
> 赞同：0
> 
> 时间：2013-03-15T08:33:03.920
> 
> 标签：ios, ios6, modal-dialog, viewcontroller, uipageviewcontroller

我正在使用具有滚动样式的 UIPageViewController 构建一个应用程序，确实实现了用户可以在它们之间滑动的许多页面，在每个页面上，他们可以单击一个按钮，以模态方式打开另一个带有额外信息的场景，但是在这个场景中，旋转不起作用，看起来像屏幕一样试图做一些事情来重新定位元素，但它们最终指向侧面（例如与纵向模式相同的方向）。如果我直接从父根控制器转移到这个场景，那么它工作正常，但我需要来自页面的信息才能包含在场景中，所以这就是我试图从页面转移的原因。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:10:54.850

原来我不小心删除了一条语句：

```
[self addChildViewController:self.pageViewController]; 
```

这是在原始生成的代码中，我必须以某种方式将其删除。现在它添加回来显示工作正常。有趣的是这个问题并没有影响子页面的滚动，而是模态场景

# html - 使用 HTML 5 Player 和 Asp.net MVC4 在 Azure 上流式传输视频

> ID：15427818
> 
> 赞同：1
> 
> 时间：2013-03-15T08:33:25.130
> 
> 标签：html, azure, asp.net-mvc-4, streaming

我有一个 Asp.Net MVC 4 网页。我想使用 HTML5 播放 mp4 类型的流视频。我在带有媒体服务的 Windows Azure 上的视频。

我在谷歌上深入搜索 HTML5 播放流视频但没有正确的答案，

每个人都可以建议我使用 HTML 5 从 Azure 播放流视频的任何代码。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:52:22.047

最好的办法是使用 Windows Azure 媒体服务。

您应该从那里转码并发布您的视频。将标准 HTML5 视频元素与发布提供给您的 URL 一起使用。

您需要将视频自动播放设置为关闭并启用缓冲。如果您遇到困难，我建议您从媒体服务预览视频并点击查看源代码并以这种方式获取您的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T14:58:28.710

您需要将格式指定为 MPEG DASH 以使其将 MP4 文件平滑流式传输到 HTML5 视频播放器。这是通过向清单 URL 添加格式参数来完成的，如下所示：

[http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=mpd-time-csf)](http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=mpd-time-csf))

请注意URL 末尾的**(format=mpd-time-csf) 。**

我也很难找到这个，很高兴我终于找到了。这是来自 Microsoft 的源 URL：

[https://azure.microsoft.com/en-us/documentation/articles/media-services-deliver-content-overview/](https://azure.microsoft.com/en-us/documentation/articles/media-services-deliver-content-overview/)

# facebook - Facebook 功能（响应）

> ID：15427821
> 
> 赞同：0
> 
> 时间：2013-03-15T08:33:28.413
> 
> 标签：facebook

我在网页上使用一个功能，人们可以点击一个按钮并在 facebook 上发布内容。在 Facebook 上成功发布后，我尝试在 `function(response) {`. 但我无法让它工作。可能吗？这是我到目前为止得到的：

```
function(response) {
    if (response && response.post_id) {
        response.name here, but how - and possible???
    } 
```

谢谢帮助，尼尔

# c# - 如何将命令行参数传递给 MonoMac 应用程序？

> ID：15427822
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:33:44.047
> 
> 标签：c#, macos, mono, monodevelop, monomac

我有一个使用 Monodevelop 3 和 MonoMac 库创建的带有 GUI 的 C# 应用程序。构建后，我得到了一个带有嵌入式单声道 v3 运行时的 mac 应用程序。

应用程序运行良好，但它没有收到我传递给它的任何命令行参数。

```
static void Main (string[] args)
{
 // args are always empty
} 
```

我试过通过他们使用

```
open -a /Applicaitons/MyApp.app --args my_command_line_arg 
```

甚至直接运行生成的可执行文件

```
/Applicaitons/My.app/Contents/MacOS/MyApp my_command_line_arg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:44:27.313

在 MonoMac 应用程序包中，实际的“应用程序”通常是一个 shell 脚本，AFAIK 它不会将它的参数传递给可执行文件。

我认为目前这是不可能的；我听说有人通过使用环境变量来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T13:36:33.907

我用最新版本的 Xamarin Studio（4.2.2，build 2）和 MonoMac 尝试了这个，它工作得很好。似乎 MonoMac 曾经有一个错误，现在已修复。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-18T14:04:57.397

如果通过 shell 脚本调用 MonoMac 应用程序，则可以将命令行参数传递给它。从[运行 Mono 应用程序](http://www.mono-project.com/Guide%3aRunning_Mono_Applications)：

> (...) 如果您有“myprogram.exe”，您可以创建一个名为“myprogram”的 shell 脚本，其中包含以下内容：
> 
> **#!/bin/sh**
> **/usr/bin/mono /usr/lib/APPLICATION/myprogram.exe "$@"**
> 
> 当您运行“myprogram”时，shell 会将 $@ 替换为您提供的任何参数。

这适用于我在 Xamarin Studio 中构建的 MonoMac 应用程序。

# javascript - 如何将javascript值分配给临时数据

> ID：15427825
> 
> 赞同：3
> 
> 时间：2013-03-15T08:34:00.657
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我想将 java scrip var 保存到 asp.net mvc Temp-data 但它给出了语法错误

```
$(".PopReviewNo").click(function () {
            if (($('textarea').val().length == 0)) {
                $('.comm').addClass("layout");
            }
            else {
                $(".comm").removeClass("layout");
                var comment = $("#comme").val();
                **@TempData["CommentForPop"]= $("#comme").val();** ///Check this one 

                $.fancybox({
                    'transitionIn': 'elastic',
                    'transitionOut': 'elastic',
                    'easingIn': 'easeOutBack',
                    'easingOut': 'easeInBack',
                    'width': 850,
                    'height': 394,
                    href: "/Stores/PopReview/@Model.Company.id?comment=" + comment,
                    'type': 'iframe'
                });
            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:08:33.250

您可以这样做，将数据发送到端点进行保存：

```
$(".PopReviewNo").click(function () {
        if (($('textarea').val().length == 0)) {
            $('.comm').addClass("layout");
        }
        else {
            $(".comm").removeClass("layout");
            var comment = $("#comme").val();

            var myVariableToSave = $("#comme").val(); 

            //Send the variable to be saved              
            $.getJSON('@Url.Action("myendpoint")', { dataToSave: myVariableToSave}, function(data) {
                 //show a message if you want
            });

            $.fancybox({
                'transitionIn': 'elastic',
                'transitionOut': 'elastic',
                'easingIn': 'easeOutBack',
                'easingOut': 'easeInBack',
                'width': 850,
                'height': 394,
                href: "/Stores/PopReview/@Model.Company.id?comment=" + comment,
                'type': 'iframe'
            });
        }

    }); 
```

请记住 TempData 用于请求之间的持久性，因此将在请求结束时被清除。因此，为您的变量寻找一些其他存储空间来保存。

```
public ActionResult MyEndPoint(string dataToSave)
{
    if(string.IsNullOrEmpty(dataToSave))
    {
         return Json(new { message = "Empty data to save"}, JsonRequestBehaviour.AllowGet);
    }

    //Save it to session or some other persistent medium
    Session["dataToSave"] = dataToSave;

    return Json(new { message = "Saved"}, JsonRequestBehaviour.AllowGet);
} 
```

您还可以执行 ajax 发布而不是获取和检查表单令牌，以提高安全性，就像[这里](https://stackoverflow.com/questions/14473597/include-antiforgerytoken-in-ajax-post-asp-net-mvc)建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-08T19:51:01.667

我尝试使用 gdp 的答案，但不断收到“路径中的非法字符”。相反，我对其进行了一些修改以使用 AJAX：

```
$(".PopReviewNo").click(function () {
    if (($('textarea').val().length == 0)) {
        $('.comm').addClass("layout");
    }
    else {
        $(".comm").removeClass("layout");
        var comment = $("#comme").val();

        var myVariableToSave = $("#comme").val(); 

          $.ajax({
          // alert(myVariableToSave); // Check the value.
          type: 'POST',
          url: '/mycontroller/myendpoint',
          data: "dataToSave=" + myVariableToSave,
          success: function (result) {
        //show a message if you want
            },
         error: function (err, result) {
         alert("Error in assigning dataToSave" + err.responseText);
          }

        $.fancybox({
            'transitionIn': 'elastic',
            'transitionOut': 'elastic',
            'easingIn': 'easeOutBack',
            'easingOut': 'easeInBack',
            'width': 850,
            'height': 394,
            href: "/Stores/PopReview/@Model.Company.id?comment=" + comment,
            'type': 'iframe'
        });
    }

}); 
```

和我的行动：

```
 public ActionResult myendpoint(string dataToSave)  
    {
        if (string.IsNullOrEmpty(dataToSave))
        {
            return Json(new { message = "Empty data to save" },  JsonRequestBehavior.AllowGet);
        }

        //Save it to session or some other persistent medium
          ...

        //return Json(new { message = "Success" }, JsonRequestBehavior.AllowGet);
    // or
        return new EmptyResult();
    } 
```

我对此不以为然，如果不是@gdp，我永远不会想到这个方向

# css - 在子 div 内容水平居中的同时保留 div 父高度

> ID：15427831
> 
> 赞同：0
> 
> 时间：2013-03-15T08:34:16.590
> 
> 标签：css, html, centering

因此，我一直在寻找如何使父 div 的高度等于其最大子级的高度，同时使所有子级都具有相同的最大高度，并在所有可能包含图像的子级上强制水平垂直中心。简而言之，使用具有两列和一行的表格的结果，其中 align 和 valign 设置为 center。

对于以下html，

```
<div class="outer">
    <div class="inner">
        <div class="col1">
        </div>
        <div class="col2">
        </div>
    </div>
</div> 
```

用于使所有子级具有相同（最大）高度的CSS，以便在扩展父级以包含而不隐藏其子级数据的同时，可以使每列的内容居中是......？

最初我尝试使用[它](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)，但它没有正确地将每列扩展到最大高度，从而阻止了每个子项内容的所需垂直居中。

有些人还建议使用`overflow: overlay;`or `overflow:auto;`css 属性，但这会在各处产生滚动条。

任何帮助都会很棒......现在桌子看起来非常好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:39:51.793

你试过`display:inline-block;`吗？

```
.col1,.col2
{
    display:inline-block;
    vertical-align:middle;
    width:200px;
    border-style:solid;
}
.inner
{
    border-style:solid;
    text-align:center;
}
.col1
{
    height:300px;

}
.col2
{
    height:200px;
} 
```

两根柱子将彼此相邻，并且 的高度`.inner`将由最高的柱子决定，在这种情况下，`.col1`。看看：**[演示](http://jsfiddle.net/68Lrb/)**

# c++ - 静态初始化命令惨败：同一个编译单元？

> ID：15427837
> 
> 赞同：2
> 
> 时间：2013-03-15T08:34:34.643
> 
> 标签：c++, static-order-fiasco

所以我正在用 ANTLR 构建一个语法编译器，一些生成的代码如下所示：

```
const int ExampleClass::EXAMPLEVAR = OtherExample::OTHEREXAMPLEVAR; 
```

如您所见，这符合“静态初始化顺序惨败”的描述。

问题是这个项目的目标之一是生成的 C++ 代码可以作为基础，尽可能容易地进行进一步的语法编译。

这就是为什么“首次使用时构造”范式在这种情况下可能会出现问题：区分静态变量或静态函数会更加困难。

现在我已经多次阅读，如果这些静态变量在单个编译单元中初始化，则不存在问题。

所以我有这个想法，将所有这些冲突的情况移到一个单独的.cpp 文件中，这些文件由它们的依赖项排序。

为这些冲突情况生成的代码如下所示：

```
//StaticInitializations.cpp
#include "ExampleClass.h"
#include "OtherExample.h"
const int OtherExample::OTHEREXAMPLEVAR = 3; 
const int ExampleClass::CHANNEL_TYPE_TV = OtherExample::OTHEREXAMPLEVAR; 
```

我的问题是：这行得通吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T09:01:57.453

> 所以我有这个想法，将所有这些冲突的情况移到一个单独的.cpp 文件中，这些文件由它们的依赖项排序。

那将是您需要为其他部分的代码更新的文件，以及您需要手动跟踪和保持最新的代码中的依赖项（基本上是错误的来源）。

不要那样做。

可以通过使用静态函数来强制静态初始化的顺序：

```
/* static */
int ExampleClass::EXAMPLEVAR()
{
    static const int value = OtherExample::OTHEREXAMPLEVAR();
    return value;
} 
```

这保证了值将根据初始化顺序依赖关系返回/初始化。

# ember.js - Ember.js 在数据加载之前渲染模板

> ID：15427841
> 
> 赞同：1
> 
> 时间：2013-03-15T08:34:38.910
> 
> 标签：ember.js, ember-data

目前我正在使用 ember rc-1 和 ember-data rev-11。

我想知道在从子路由获得ajax成功之前是否可以渲染父路由模板。

我有一个路由器：

```
-index
      -objects 
```

索引模板：

```
<!-- some html that i would like to display on page load event -->
{{outlet}} 
```

对象模板：

```
{{#each item in controller }}
<!-- data from item -->
{{/each}} 
```

对象路由模型方法：

```
model: function(){
    return App.Object.find({limit: 0}) //this request is really heavy for backend and takes a lot of time
} 
```

因此，当我导航到对象 url 时，我会看到一个空白页面，直到我从服务器获得所有对象的响应。

也许我在前面，但它在 ember pre2 或 pre-3 中运行良好。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:35:17.433

默认情况下，如果您将查询传递给`model.find`它将返回一个承诺。如果你的路由的模型钩子返回一个承诺，则 ember 路由器进入加载状态并等待承诺被解决。

如果改为使用 App.Object.find()，则 ember 会返回一个没有承诺的实时查询。如果这是第一次为模型调用 f​​ind，store 将启动一个没有参数的异步查询来加载初始数据集。

> 有任何想法吗？

如果您可以摆脱 {limit: 0} 参数，理想情况下会很棒。否则，请考虑从 setupController 挂钩设置模型：

```
App.PostRoute = Ember.Route.extend({
  setupController: function(controller, model) {
    controller.set('content', App.Object.find({limit: 0}));
  }
}); 
```

# fortran - 数据集的最小二乘抛物线方程。（福特兰）

> ID：15427846
> 
> 赞同：-2
> 
> 时间：2013-03-15T08:34:52.287
> 
> 标签：fortran, fortran90, least-squares

原始问题：

> 求抛物线方程
> 
> y = A + Bx + Cx^2
> 
> 如果最适合一组 n 个数据点，则必须确定 A、B 和 C 的值，其中观察到的 y 值与使用方程预测的 y 值的偏差的平方和为尽可能小。这些值是通过求解线性系统找到的：
> 
> nA + (Ex)B + (E(x^2))C = Ey
> 
> (Ex)A + (Ex^2)B + (Ex^3)C = E(xy)
> 
> (Ex^2)A + (Ex^3)B + (Ex^4)C = E((x^2)y)
> 
> ***E = sumation notaion = 大写 sigma***
> 
> 求以下一组数据点的最小二乘抛物线方程：
> 
> 数据 X / 0.05, 0.12, 0.15, 0.30, 0.45, 0.70, 0.84, 1.04 /
> 
> 数据 Y / 0.957,0.851,0.832,0.720,0.583,0.378,0.295,0.156 /

我的代码中有几个错误，我只是不太确定哪里出错了。我从线性方程组手动计算了“数据权重（A，B，C）”。

错误日志是：

> --------------------配置：FIT - Win32 调试--------------------
> 
> 正在编译 Fortran...
> 
> C:\MSDEV\FIT.f​​90
> 
> C:\MSDEV\FIT.f​​90(34)：警告 FOR4265：符号 M 已引用但未设置
> 
> 正在链接...
> 
> FIT.obj：错误 LNK2001：未解析的外部符号 _GAUSS@24
> 
> FIT.exe：致命错误 LNK1120：1 个未解决的外部问题
> 
> 执行 link.exe 时出错。
> 
> FIT.exe - 2 个错误，1 个警告

这是我当前的程序代码：

```
 PROGRAM FIT
    REAL X(8),Y(8),LIN,QUAD,WEIGHTS(3)
    EXTERNAL LIN,QUAD
    DATA X / 0.05, 0.12, 0.15, 0.30, 0.45, 0.70, 0.84, 1.04  /
    DATA Y / 0.957,0.851,0.832,0.720,0.583,0.378,0.295,0.156 /
    DATA WEIGHTS / -0.245866582919757, 4.19120539122495, 3.92469397298994 /
    CALL GENLSQ(X,Y,8,LIN,QUAD,WEIGHTS)
    PRINT *,'THE WEIGHTS ARE'
    PRINT *, WEIGHTS
    STOP
    END

    SUBROUTINE GENLSQ(X,Y,N,F,G,WEIGHTS)
    INTEGER N
    REAL X(N), Y(N), MATRIX(3,4),WEIGHTS(3)
    EXTERNAL F,G
    DATA MATRIX / 12*0.0 /
    MATRIX(1,1) = FLOAT(N)
    DO 1 I = 1, M
    MATRIX(1,2) = MATRIX(1,2) + F(X(I))
    MATRIX(1,3) = MATRIX(1,3) + G(X(I))
    MATRIX(1,4) = MATRIX(1,4) + Y(I)
    MATRIX(2,2) = MATRIX(2,2) + F(X(I)) ** 2
    MATRIX(2,3) = MATRIX(2,3) + F(X(I))*G(X(I))
    MATRIX(2,4) = MATRIX(2,4) + F(X(I))*Y(I)
    MATRIX(3,3) = MATRIX(3,3) + G(X(I)) ** 2
    MATRIX(3,4) = MATRIX(3,4) + G(X(I))*Y(I)
1       CONTINUE
    MATRIX(2,1) = MATRIX(1,2)
    MATRIX(3,1) = MATRIX(1,3)
    MATRIX(3,2) = MATRIX(2,3)
    CALL GAUSS(MATRIX,3,4,3,WEIGHTS,SINGUL)
    RETURN
    END

    REAL FUNCTION LIN(X)
    LIN=X
    RETURN
    END

    REAL FUNCTION QUAD(X)
    QUAD=X*X
    RETURN
    END 
```

非常感谢任何和所有的帮助！谢谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:25:00.263

您最好使用`implicit none`并将您的过程放入一个模块和`use`该模块中。而不是`external`. 第一个将导致编译器通知您未声明的变量。第二个将使编译器能够检查过程调用中参数的一致性。

```
module my_subs

implicit none

contains

   SUBROUTINE GENLSQ
   ....
   end SUBROUTINE GENLSQ

   FUNCTION LIN(X)
   real :: LIN
   real, intent (in) :: x
   LIN = X
   end FUNCTION LIN(X)

   FUNCTION QUAD(X)
   real :: QUAD
   real, intent (in) :: x
   QUAD=X*X
   end FUNCTION QUAD

end module my_subs

program fit

use my_subs

implicit none

.....

END program fit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:52:35.207

`C:\MSDEV\FIT.f90(34): warning FOR4265: symbol M referenced but not set`

AFAICT，你永远不会定义你的循环限制 M。那肯定会引起各种恶作剧。

# android - Android在btn点击时隐藏键盘

> ID：15427847
> 
> 赞同：13
> 
> 时间：2013-03-15T08:34:52.850
> 
> 标签：android, android-keypad

我想在按钮的单击事件上隐藏键盘。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T08:35:59.483

隐藏虚拟键盘：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(editView.getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T08:37:22.180

```
InputMethodManager inputManager = (InputMethodManager)
                                  getSystemService(Context.INPUT_METHOD_SERVICE); 

inputManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),
                                     InputMethodManager.HIDE_NOT_ALWAYS); 
```

我把它放在 onClick(View v) 事件之后。你需要`import android.view.inputmethod.InputMethodManager;`

单击按钮时键盘会隐藏。

# java - Bitly 缩短 url java / android

> ID：15427848
> 
> 赞同：-1
> 
> 时间：2013-03-15T08:34:53.370
> 
> 标签：java, android

我正在按照此示例使用 bitlyj 库缩短 url。

要获取我的 api 密钥：我在 bitlyj 官方网站上注册了一个免费帐户。

然后我点击这个链接[http://bitly.com/a/your_api_key](http://bitly.com/a/your_api_key)来获取我的 api 密钥。

这是我的实现。

```
import com.rosaloves.bitlyj.Url;
import static com.rosaloves.bitlyj.Bitly.*;

Url url = as("bitlyapidemo", 
"MY_API_KEY").call(shorten("http://rosaloves.com/stories/view/13"));
String ul = url.getShortUrl();
System.out.println("art bitfly:"+ url); 
```

当我运行这个示例时，我得到了这个错误。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{….. com.rosaloves.bitlyj.BitlyException: INVALID_APIKEY 
```

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:41:12.877

如您的 Runtime Exception: You have an Invalid API Key 中所示，这意味着您当前的 API Key 不起作用。您可以请求新的 API 密钥并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-21T17:40:14.667

Bitly 已弃用 API 密钥身份验证。请在此处查看：[https](https://dev.bitly.com/authentication.html) ://dev.bitly.com/authentication.html 。您现在可以使用 OAuth。

# android - 仅显示图块的 Android 地图

> ID：15427850
> 
> 赞同：0
> 
> 时间：2013-03-15T08:35:10.630
> 
> 标签：android, google-maps, grid, maps, tiles

嗨，我是 android 编程的新手，我遵循了许多教程中的步骤，但我只设法显示了谷歌地图，它只在模拟器和设备上显示瓷砖。提前谢谢了！

这是我的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
     <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="bi.com.biosensors"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-feature        
        android:glEsVersion="0x00020000"        
        android:required="true"/>

    <uses-permission android:name="bi.com.biosensors.mapdemo.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />  

         <activity
            android:name=".SplashScreen"
            android:label="@string/app_name"  >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
        <activity android:name=".BiMain"
            android:configChanges="keyboardHidden|orientation"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >

</activity>
        <activity android:name=".Products" >
</activity>
 <activity android:name=".ContactUs" >
</activity>
<activity android:name=".WebMapViewActivity" >
</activity>
<activity android:name=".WebViewActivity" >
</activity>
<activity android:name=".openAccuActivity" >
</activity>
<activity android:name=".BusesNearby" >
</activity>
<activity android:name=".openBiotransActivity" >
</activity>

<activity android:name=".openMultiLuActivity" >
</activity>
<activity android:name=".openThermoActivity" >
</activity>
<activity android:name=".openBiotrayActivity" >
</activity>
<activity android:name=".openBipolarActivity" >
</activity>
<activity android:name=".openEmboActivity" >
</activity>
<activity android:name=".openBioflexActivity" >
</activity>
<activity android:name=".openAxxessActivity" >
</activity>
<activity android:name=".openGazelleActivity" >
</activity>
<activity android:name=".openPowerlActivity" >
</activity>
<activity android:name=".AlertCaution" >
</activity>
<activity android:name=".BusRoutes" >
</activity>
<activity android:name=".AllBuses" >
</activity>
<activity android:name=".bus5route" >
</activity>
<activity android:name=".bus15route" >
</activity>
<activity android:name=".bus58route" >
</activity>
<activity android:name=".bus59route" >
</activity>
<activity android:name=".bus87route" >
            </activity>
               <activity android:name=".mrtMap" android:screenOrientation="portrait" >
               </activity>
               <meta-data    android:name="com.google.android.maps.v2.API_KEY"
    android:value="AIzaSyCFLLz6m3N1WEKNG6KnwvoQvMBTC4r9AzA"/>
          </application>
    </manifest> 
```

还有我的 xml（我很确定我有正确的 API 密钥）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent">

 <com.google.android.maps.MapView 
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="***************"
    />

 </RelativeLayout> 
```

和我的java代码：

```
 public class WebMapViewActivity extends MapActivity {

 @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mapview);
        getActionBar();
        ActionBar actionBar = getActionBar();
        actionBar.setIcon(R.drawable.ic_menu_mapmode);
        actionBar.setTitle("Map");

 MapView mapView = (MapView) findViewById(R.id.mapView);
 mapView.setBuiltInZoomControls(true);

 List<Overlay> mapOverlays = mapView.getOverlays();
 Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
 HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
 GeoPoint point = new GeoPoint(133339,-10390584);
 OverlayItem overlayitem = new OverlayItem(point, "Hello!","This is Biosensors Interventional Singapore !");

 itemizedoverlay.addOverlay(overlayitem);
 MapController mapController = mapView.getController();
 mapController.setCenter(point);

 mapOverlays.add(itemizedoverlay);
 }
 @Override
 protected boolean isRouteDisplayed()
 {
 return false;
 }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:41:22.200

据我所知，您在这段代码中混合了 API v1 和 v2。

在您的布局中删除地图视图并添加：

```
 <fragment xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/map"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:name="com.google.android.gms.maps.MapFragment"/> 
```

并扩展 Activity 而不是 MapActivity （或 FragmentActivity 如果您使用支持库）。

[您可以在Maps API 页面](https://developers.google.com/maps/documentation/android/start)查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:33:32.450

正如@DavidBriggs 所说，您正在混合来自 API V1 和 V2 的代码。

如果您想使用所有清单配置所显示的 Google Maps API V2，那么这是我写的关于如何添加的博客文章：

[Google Map API V2 到您的应用程序。](https://blog-emildesign.rhcloud.com/?p=435)

# javascript - 如何在添加一行后重置表行的类别

> ID：15427851
> 
> 赞同：0
> 
> 时间：2013-03-15T08:35:23.210
> 
> 标签：javascript, jquery, css

每次用户添加新行而不刷新页面时，我都会添加一行。并重置我正在使用的行类 .each() 但它无法正常工作。它为每个新行添加了奇怪的类。

```
$("#tbadver").prepend("<tr id='tr_"+advID+"'>"
    +"<td >"+advName.val()+"</td>"
    +"<td >"+email.val()+"</td>"
    +"<td >"+phone.val()+"</td>"
    +"<td >"+mobile.val()+"</td>"
    +"<td >"+contactName.val()+"</td>"
    +"<td >"+contactEmail.val()+"</td>"
    +"<td >"+contactMobile.val()+"</td>"
    +"</tr>");
jQuery(".tbl-grid tr").each(function(e)
{
    $(e).find("tr:odd").addClass("odd");
    $(e).find("tr:even").addClass("even");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:39:22.040

您应该首先重置所有表类：

```
$("tbl-grid tr").removeClass("odd even");
$("tbl-grid tr:odd").addClass("odd");
$("tbl-grid tr:even").addClass("even"); 
```

您不需要解析所有 tr `each`，只需解析 dom。

此外，请确保您在“现场”活动中这样做，例如`on`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:40:56.043

每个功能都不是必需的............

`$(".tbl-grid tr:odd")``.tbl-grid`选择行下所有匹配的“奇数”

`$(".tbl-grid tr:odd").addClass("odd");`足够的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:36:41.957

```
$('table tr').removeClass("odd").removeClass("even");
$('table tr:odd').addClass('odd');
$('table tr:even').addClass('even'); 
```

# ibm-mobilefirst - WL 5.0.5 EdgeToEdgeList 第一个元素不在标题下，而是在页面中间

> ID：15427853
> 
> 赞同：0
> 
> 时间：2013-03-15T08:35:42.983
> 
> 标签：ibm-mobilefirst

在主视图中使用 EdgeToEdgeList 可以正常工作，如果我从第一个 EdgeToEdgeList 转到其他视图并且在第二个视图 (ScrollableView) 中还有其他 EdgeToEdgeList，则第二个列表中的项目出现在“页面中间”，这是标题和第一个列表项之间有一个空格。

使用 firebug 对其进行调试，第二个视图是 dojox.mobile.ScrollableView，将 css 属性 margin-top 设置为 115px 并将 position 设置为 absolute。在萤火虫中，如果我删除了 margin-top 属性并将位置设置为相对，一切都会很好地显示。

在 WL 工作室中，我无法设置此属性，因为它们似乎已被覆盖，因此我在第二个 EdgeToEdgeList 样式中设置了 margin-top: -70px。

这是html：

```
<body id="content" style="display: none;" >
    <div data-dojo-type="dojox.mobile.ScrollableView" id="view0" data-dojo-props="selected:true">
        <div data-dojo-type="dojox.mobile.EdgeToEdgeList" id="mylist" >
            <div data-dojo-type="dojox.mobile.ListItem" data-dojo-props="moveTo:'Carreteras'">Testing</div>
            <div data-dojo-type="dojox.mobile.ListItem" data-dojo-props="moveTo:'Carreteras'">Testing</div>
        </div>
    </div>

    <div data-dojo-type="dojox.mobile.ScrollableView" id="Carreteras" data-dojo-props="selected:false,scrollDir:'v'" >
        <h1 data-dojo-type="dojox.mobile.Heading" data-dojo-props="label:'Carreteras',back:'Atras',moveTo:'view0',fixed:'top'"></h1>
        <div data-dojo-type="dojox.mobile.EdgeToEdgeList" id="infoViewContent" style="margin-top: -70px;'">
        <div data-dojo-type="dojox.mobile.ListItem" >Testing1</div>
            <div data-dojo-type="dojox.mobile.ListItem" >Testing1</div>
            </div>
    </div>

    <!--application UI goes here-->
    <script src="js/initOptions.js"></script>
    <script src="js/Repsol.js"></script>
    <script src="js/messages.js"></script>
    <script src="js/adapter.js"></script>
</body> 
```

从一开始就显示一切正常的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:29:03.157

有两件事会导致此类问题：

*   dojox/mobile/deviceTheme 模块的加载方式。此模块应使用脚本标签加载，如下所述：[https](https://dojotoolkit.org/reference-guide/1.8/dojox/mobile/deviceTheme.html#loading-devicetheme-with-a-script-tag) ://dojotoolkit.org/reference-guide/1.8/dojox/mobile/deviceTheme.html#loading-devicetheme-with-a-script-tag 。
*   主体上的“显示：无”样式会阻止 dojox/mobile 在启动时正确计算大小。这应该更改为“可见性：隐藏”。

更改这两件事应该可以解决您的问题。

# hadoop - HBase 中的恢复

> ID：15427857
> 
> 赞同：0
> 
> 时间：2013-03-15T08:35:59.797
> 
> 标签：hadoop, hbase

HBase 支持单行原子事务。
用于实际检查。我写了以下代码

```
 Increment inc=new Increment();//For writing it to WAL
    inc.getWritetoWAL(); 
    Put p = new Put(Bytes.toBytes("name10"));
    p.add(Bytes.toBytes("cf"), Bytes.toBytes("name"),Bytes.toBytes("Some Value 10"));
    table.setAutoFlush(false);
    table.put(p);
    table.close(); 
```

**为了检查恢复情况，我在执行（在 eclipse 中调试） table.put(p)**后立即停止了 hbase，当我重新启动 hbase 时，表中没有更新新行。根据 HBase 中的文档，一旦它写入 memstore(cache)，尽管发生崩溃，它可以恢复，但在这里它没有恢复，尽管 WAL 已启用.....
我的理解有什么问题.....
谢谢提前回复。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:28:52.273

上面的代码发生的情况是客户端永远不会将 put 提交到服务器，因此 HBase 永远不会将其写入 WAL，它无法恢复......

您`table.setAutoFlush(false)`在看跌期权上方的行中。如果您[查看文档](http://hbase.apache.org/book/perf.writing.html)，它会说：

> “执行大量 Puts 时，请确保在 HTable 实例上将 setAutoFlush 设置为 false。否则，Puts 将一次发送一个到 RegionServer。通过 htable.add(Put) 和 htable.add( Put) 在同一个写入缓冲区中结束。如果 autoFlush = false，则在写入缓冲区被填满之前不会发送这些消息。要显式刷新消息，请调用 flushCommits。在 HTable 实例上调用 close 将调用 flushCommits。

因此，虽然在这种情况下通常将 AutoFlush 设置为 false 是好的，但这意味着 put 尚未发送到服务器。

# jsf-2 - 在 JSF 托管 bean 的构造函数中访问会话 bean 数据

> ID：15427859
> 
> 赞同：0
> 
> 时间：2013-03-15T08:36:05.280
> 
> 标签：jsf-2, managed-bean, managed-property

我正在尝试访问托管 bean 构造函数中的会话 bean 数据。为此，我使用`@ManagedProperty`如下注释。当我尝试在构造函数中访问它时，它会给出 `java.lang.NullPointerException`并且可以在另一个函数中访问同一段代码。可能我需要为构造函数做一些不同的事情。有人可以指导我我需要做什么。

```
@ManagedProperty(value="#{sessionBean}")
private SelectCriteriaBean sessionData; 

// This is contructor
public ModifyBusinessProcessBean() {
  logger.debug(getSessionData().getSelectedBusinessProcessLevelZero());     
}

// Another Function where the same code doesn't give error
public anotherFunction() {
  logger.debug(getSessionData().getSelectedBusinessProcessLevelZero());     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:48:24.760

您不应该使用`@ManagedProperty`内部构造函数，因为它尚未设置。首先创建托管 bean 时，会调用其构造函数，然后使用 setter 设置托管属性。您应该使用带有注释的方法，`@PostConstruct`因为它在设置属性后被调用：

```
@PostConstruct
public void init() {
  logger.debug(getSessionData().getSelectedBusinessProcessLevelZero());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T08:50:59.077

这是预期的行为。

`@PostConstruct`方法在 bean 的构造和依赖注入发生后立即执行，例如`@ManagedProperty`。因此，您的依赖项在构造函数中根本不可用。

您需要用`@PostConstruct`一种标准方式来注释方法并引用您的依赖项：

```
@PostConstruct
public void init() {
    injectedDependency.performOperation();
} 
```

# ruby - 我可以同时加入两个加入资源吗？

> ID：15427863
> 
> 赞同：1
> 
> 时间：2013-03-15T08:36:12.510
> 
> 标签：ruby, ruby-datamapper, sqlite3-ruby

我实施它的方式似乎不是。

在 data_mapper 术语中 - 我有一个加入资源条目，它加入了 Driver、Team 和 Season

我有一个加入 Track and Season 的加入资源 Race

我有一个加入 Entry 和 Race 的加入资源放置。

当我尝试做类似“向我展示某个特定参赛者参加的所有比赛时，例如

```
@entry_a.races.all 
```

我收到这个错误

> DataObjects::SyntaxError: no such column: INNER (code: 1, sql state: , query: SELECT "races"."track_id", "races"."season _id", "races"."race_no" FROM "races" INNER JOIN "配售" ON INNER JOIN "entrys" ON "配售"."entry_team_id" = "entries"."team_id" AND "配售"."entry_driver_id" = "entries"."driver_id" WHERE ("配售". "entry_team_id" = 'FER' AND " placements"."entry_driver_id" = 'MAS') GROUP BY "races"."track_id", "races"."season_id", "races"."race_no" ORDER BY "races" ."track_id", "races"."season_id", uri:sqlite3:C/devProjects/formula1../spec/resources/test.db?scheme=sqlite3&user=&pas Sword=&host=C&port=&query=&fragment=&adapter=sqlite3&path=/devProjects/formula1../spec/resources/test。 D b）

很容易看到这里发生了什么，由 .all 方法包装的查询并不期望在连接时连接。

我设法通过编写一些自定义 sql 来解决这个问题。虽然不理想，但它确实可以完成这项工作。不过，这似乎不是红宝石方式。也许我的数据库架构很烂？

这是我的模型（对代码转储感到抱歉。我被一个 SO 因为我没有引用完整的代码而决定对我投反对票的同事烧死了）

```
require "rubygems"
require "sqlite3"
require "data_mapper"
require "bigdecimal"

#note that Dir.pwd refers to the location of the file that calls
if ENV["run_mode"] == "prod"
    DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/data/prod.db")
else
    DataMapper::setup(:default, "sqlite3://#{Dir.pwd}../spec/resources/test.db")
end

class Entry

    include DataMapper::Resource

    belongs_to :team,   :key => true
    belongs_to :driver, :key => true
    belongs_to :season, :key => true

    has n, :placings
    has n, :races, :through => :placings

    def find_races

        return repository.adapter.select('SELECT races.track_id, races.season_id, races.race_no FROM races INNER JOIN placings ON races.track_id = placings.race_track_id INNER JOIN entries ON placings.entry_driver_id = entries.driver_id WHERE (entries.team_id = ? AND entries.driver_id = ?)', self[:team_id], self[:driver_id])

    end

end

class Track

    include DataMapper::Resource

    property :id, String, :key => true

    has n, :races

end

class Race

    include DataMapper::Resource

    property :race_no, Integer

    belongs_to :track,  :key => true
    belongs_to :season, :key => true

    has n, :placings
    has n, :entries, :through => :placings

end

class Placing

    include DataMapper::Resource

    property :id, Serial #put this in because dm was complaining that foreign keys from entry object were not unique
    belongs_to :race    
    belongs_to :entry

end

class Season

    include DataMapper::Resource
    property :id, Integer, :key => true

    has n, :races
    has n, :entries

end

class Driver

    include DataMapper::Resource
    property :id, String, :key => true
    property :team, String
    property :ptd, Integer
    property :races, Integer
    property :grid, Object
    property :race, Object
    property :cumulativePoints, Object #the number of points accumulated at a particular point in the season
    property :hcScore, Integer
    property :domScore, Integer
    property :nation, String
    property :wins, Integer
    property :podiums, Integer

    has n, :entries
    has n, :teams, :through => :entries

end

class Team
    include DataMapper::Resource
    property :id, String, :key =>  true
    property :name, String
    property :ptd, Integer
    property :domScore, Integer
    property :nation, String

    has n, :entries
    has n, :drivers, :through => :entries

    def initialize(team_id)
        self[:id] = team_id
        self.save!
    end

    def add_driver(driver_id)
        @driver = Driver.create(:id => driver_id)
        Entry.create(:driver => (Driver.get driver_id), :team => self, :season =>  Season.last)
        return @driver
    end

end

class Nation
    include DataMapper::Resource
    property :id, String, :key => true
    property :ptd, Integer
    # could possibly have the drivers, teams and engines here as well
end

if ENV["run_mode"] == "test"
    DataMapper.finalize.auto_migrate!
else
    DataMapper.finalize.auto_upgrade!
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:38:53.890

经过一些测试，我认为您看到的错误与组合键有关；尝试为 Race 更改单个 Serial 密钥。我认为这是DM中的一个错误。

尝试使用复合键时出现了相同的错误`Driver.first.races`，但仅使用串行键就可以了：

```
$KCODE='u'

require 'rubygems'
require 'dm-core'
require 'dm-migrations'

DataMapper::Logger.new($stdout, :debug)
DataMapper.setup(:default, "sqlite::memory:")

class Entry
  include DataMapper::Resource
  #property :id, Serial # maybe also here? Although everything seems to work without
  property :grid, Integer
  property :position, Integer
  belongs_to :driver, :key => true
  belongs_to :race, :key => true
end

class Driver
  include DataMapper::Resource
  property :name, String, :key => true
  has n, :entries
  has n, :races, :through => :entries
  def podiums; entries(:position => (1..3)) end
  def wins; entries(:position => 1) end
end

class Race
  include DataMapper::Resource
  property :id, Serial
  belongs_to :track
  belongs_to :season
  has n, :entries
  has n, :drivers, :through => :entries
end

class Season
  include DataMapper::Resource
  property :year, Integer, :key => true
  has n, :races
end

class Track
  include DataMapper::Resource
  property :name, String, :key => true
  has n, :races
end

DataMapper.finalize.auto_migrate!

Entry.create(
  :driver => Driver.new(:name => "Kimi Räikkönen"),
  :grid   => 7, :position => 1,
  :race   => Race.new(
    :track  => Track.new(:name => "Albert Park"),
    :season => Season.new(:year => 2013))) 
```

# php - 如何用数组计算 for 循环中的多行？

> ID：15427869
> 
> 赞同：4
> 
> 时间：2013-03-15T08:36:34.353
> 
> 标签：php, mysql, database, session, for-loop

如何用数组计算 for 循环中的多行？当新行进入 mysql 数据库进行循环计数时，新行计数为 0 当两个新行进入 mysql 数据库进行循环计数时，两行都为 1？我不知道为什么`for loop escape first row count start from second row?`以及如何使用数组进行多行会话？

**Function.php & Mysql 查询**

```
function get_wid($id){
    $result=mysql_query("SELECT id AS wid FROM mywishlist where pid='$id'") 
                or die("Id Problem"."<br/><br/>".mysql_error());
    $results= array();
    while($row=mysql_fetch_array($result)){
        $results[] = $row['wid'];
    }
    return $results;
} 
```

**我正在调用的页面功能 $wid=get_wid($id);**

```
$wid=get_wid($id);
$max1= count($wid);
for($i>0; $i<$max1; $i++)
{
    $wid1=$wid [$i].'<br />';   
    $_SESSION['wid2']=$wid1;
    echo $_SESSION['wid2'];
} 
```

**现在我正在使用这个函数现在这个函数没有回显或打印 count 0 值没有显示但值在 count 1 之后显示？**

```
function get_wid($id){
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid='$id'") or die("Id     Problem"."<br/><br/>".mysql_error());
$results= array();
$i=1; // add the new line
while($row=mysql_fetch_array($result)){
$results[$i] = $row['wid'];
$i++;
}
return $results;
}

$wid=get_wid($id);
$max1= count($wid);
for($i=1; $i<=$max1; $i++) // changes made here
{
$wid1=$wid [$i].'<br />';   
$_SESSION['wid2']=$wid1;
echo $_SESSION['wid2'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T22:43:34.613

正如您在“我正在调用 $wid=get_wid($id);”的页面函数中已经指出的那样：

```
for($i>0; $i<$max1; $i++)
{
    $wid1=$wid [$i].'<br />';   
    $_SESSION['wid2']=$wid1;
    echo $_SESSION['wid2'];
} 
```

$i>0 应该是 $i=0

我确定这只是一个错字，但您没有声明迭代的开始，这就是为什么它只在第一次之后才开始处理。我个人会按照标准保持一切从 0 开始。

只是看一遍我也可以告诉你，这件作品：

```
$results=array();
$i=1; // add the new line
while($row=mysql_fetch_array($result)){
$results[$i] = $row['wid'];
$i++;
} 
```

会好很多，因为：

```
$results=array();
while($row=mysql_fetch_array($result)){
$results[] = $row['wid'];
} 
```

这将使其更紧。另一个“整洁”的技巧是将“_arr”添加到所有数组变量中，以便您知道何时引用字符串或数组，例如

```
while($row=mysql_fetch_array($result)){
$results_arr[] = $row['wid'];
} 
```

虽然我不知道你想要达到什么目的，但我可以说你应该使用 foreach 来循环 $wid。如前所述，当迭代从 0 开始时，一切都会变得更容易，因为您可以这样做：

```
$wid=get_wid($id);

foreach($wid as $newWid) // changes made here
{  
$_SESSION['wid2']=$newWid.'<br />';
echo $_SESSION['wid2'];
} 
```

如果您想获取任何索引或特定值，您可以使用[array_keys](http://www.php.net/array_keys)、[array_search](http://www.php.net/manual/en/function.array-search.php)等。最后，就像您对函数“get_wid”所做的那样，我将从函数中调用其他代码。这是我总共要做的事情：

```
function get_wid($id){
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid='$id'") or die("Id     Problem"."<br/><br/>".mysql_error());
$results_arr= array();
while($row=mysql_fetch_array($result)){
$results_arr[] = $row['wid'];
}
return $results_arr;
}

function sessionWid($id) {
$wid_arr=get_wid($id);
foreach($wid_arr as $wid) // changes made here
{  
$_SESSION['wid2']=$wid.'<br />';
echo $_SESSION['wid2'];
}

// call sessionWid($id) where you want
sessionWid($id); 
```

我打算把它留在那里，但不知道你为什么要`<br />`在你的会话中分页。你知道如果你想在每个数组值之间有一个分页符，你可以像这样输出它：

```
echo implode('<br />',get_wid($id)); 
```

通过保持清洁，您肯定会从可能杀死一个人的小错误中节省时间！_g

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:40:47.643

尝试这个：

```
for($i=0; $i<count(get_wid($id)); $i++)
{
   $wid1=$wid[$i].'<br />';   
   $_SESSION['wid2']=$wid1;
   echo $_SESSION['wid2'];
} 
```

`$i>0`变成`$i=0`

`$wid [$i]`我把它改成了`$wid[$i]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:41:29.747

使用 foreach 除了

```
$wids = get_wid($id);
foreach($wids as $wid )
{
  $wid1=$wid.'<br />';   
  $_SESSION['wid2']=$wid1;
  echo $_SESSION['wid2'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:42:46.670

检查是否在外部声明了 $i 变量

```
$wid=get_wid($id);

$max1= count($wid);

for($i=0; $i<$max1; $i++)

{

$wid1=$wid [$i].'<br />';  

$_SESSION['wid2']=$wid1;

echo $_SESSION['wid2'];

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-11T22:08:16.367

只需从您以前的代码中签出即可

```
$wid=get_wid($id);
$max1= count($wid);
for($i=0; $i<=$max1; $i++)
{
    $wid1=$wid [$i].'<br />';   
    $_SESSION['wid'.($i+1)]=$wid1;
}

print_r($_SESSION); 
```

我想在这里提一下，在您的代码中，您总是用新的会话替换以前的会话。所以你的会话总是显示你的 mysql 数据的最后一行。希望这段代码对您有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T08:44:23.130

```
function get_wid($id){
$result=mysql_query("SELECT id AS wid FROM mywishlist where pid='$id'") or die("Id Problem"."<br/><br/>".mysql_error());
$results= array();
$i=1; // add the new line
while($row=mysql_fetch_array($result)){
$results[$i] = $row['wid'];
$i++;
}
return $results;
}

$wid=get_wid($id);
$max1= count($wid);
for($i=1; $i<=$max1; $i++) // changes made here
{
$wid1=$wid [$i-1].'<br />';   
$_SESSION['wid2'][$i]=$wid1;
echo $_SESSION['wid2'];
} 
```

查询返回 3 条记录意味着现在，

```
$results[1]='1';
$results[2]='2';
$results[3]='3';
echo count($wid);

print_r($_SESSION['wid2']);
Array ( [1] => 1 [2] => 2 [3] => 3)

$_SESSION['wid2'][1]='1';
$_SESSION['wid2'][2]='2';
$_SESSION['wid2'][3]='3'; 
```

并返回所有值。如果您需要 $_SESSION['wid2'] 的计数

```
echo count($_SESSION['wid2']); 
```

计数=>3

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-22T16:12:53.660

在 for 循环中设置 $i = 0 它将开始在 0 处显示数组中的记录

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-12T04:52:29.700

```
for($i=1; $i<=$max1; $i++) // changes made here
{
$wid1=$wid [$i].'<br />';   
$_SESSION['wid2']=$wid1;
echo $_SESSION['wid2'];
} 
```

我猜你是从第二行开始的，这就是为什么它没有显示第一行（第 0 行）

改变

```
for($i=1; $i<=$max1; $i++) 
```

至

```
for($i=0; $i<=$max1; $i++) 
```

可能会解决您的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-15T08:55:59.397

它不清楚你在这里想要做什么

尝试这个

```
for($i=0; $i<count(get_wid($id)); $i++)
{
echo $i;
 } 
```

它会回显 0,1,2,3,……最多 1-count(get_wid($id)

$wid[0],$wid[1],$wid[2] 的数组中还有什么？

每次都会回显该索引处的任何内容。希望这可以帮助。

# vb.net - NumericUpDown 上的 MouseWheel 事件

> ID：15427872
> 
> 赞同：2
> 
> 时间：2013-03-15T08:36:48.307
> 
> 标签：vb.net

我只是找到了一种根据表单的字体大小调整表单（winforms）大小的方法。
为此，我在表单的 MouseWheel 事件处理程序中进行了例程：

```
Private Sub myfrm_MouseWheel(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseWheel

     If controlpressed Then
        fs = Me.Font.Size
        If e.Delta < 0 Then
            If fs < 16 Then fs += 1
        Else
            If fs > 8 Then fs -= 1
        End If
        Me.Font = New Font("Arial", fs, FontStyle.Regular, GraphicsUnit.Point)
    End If 
```

如果按下控制键，则使用 MouseWheel 调整我的表单大小，类似于浏览器的行为。
这在用户看不到好并且显示器分辨率高的情况下非常有用。

但问题在于 NumericUpDown 控件。他们从表单中捕获鼠标滚轮事件，并且不会像文本框那样调整大小。我将“增量”属性设置为 0，但这没有帮助。

这里有什么方法可以告诉 NumericUpDown 控件它们不会以我不需要在鼠标滚轮处理程序中为表单上的每个 NumericUpDown 控件执行一些特殊代码的方式捕获鼠标滚轮事件？

编辑：基于 Cody Gray 的简短教程，我为 winforms 应用“缩放”功能提供了完整的代码。

在启动窗体的 _Load 事件处理程序中：

```
Application.AddMessageFilter(New MouseWheelMessageFilter()) 
```

班级：

```
Public Class MouseWheelMessageFilter
Implements IMessageFilter
Public Function PreFilterMessage(ByRef m As Message) As Boolean Implements IMessageFilter.PreFilterMessage
    Const WM_MOUSEWHEEL As Integer = &H20A
    If m.Msg = WM_MOUSEWHEEL And My.Computer.Keyboard.CtrlKeyDown Then
        If Form.ActiveForm IsNot Nothing Then
            Try 'this solves too fast wheeling
                Dim delta As Integer = m.WParam.ToInt32() >> 16
                Dim fs As Single = Form.ActiveForm.Font.Size
                If delta < 0 Then
                    If fs < 16 Then fs += CSng(0.25)
                Else
                    If fs > 8 Then fs -= CSng(0.25)
                End If
                Form.ActiveForm.Font = New Font("Microsoft Sans Serif", fs!, FontStyle.Regular, GraphicsUnit.Point)
            Catch
            End Try
        End If
        Return True
    End If
    Return False
End Function
End Class 
```

这将适用于项目中的所有形式。出乎意料的好用！

请注意，为了在调整文本框大小时实现完全缩放效果，因此需要打开 form.Designer 文件并删除每个控件的“.font”属性。然后字体将从表单继承。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:38:46.127

你有一个更大的问题，不仅仅是 NUD 抓住了 MouseWheel 事件。对于许多用户来说，处理 Windows 消息的方式是不寻常且不直观的：

*   无论鼠标光标位于何处，Windows 都会将 WM_MOUSEWHEEL 消息发送到具有焦点的控件。这难倒了许多用户和程序员，他们已经习惯了滚动在浏览器或 Word 等程序上的工作方式，这些程序不使用任何控件。与鼠标位置无关的程序，滚轮总是滚动页面。

*   发生的下一个不寻常的事情是消息*冒泡*，如果具有焦点的控件不处理消息，则将其传递给其父级。如果父母不处理它，那么它将被传递给父母的父母。等等。这就是表单的 MouseWheel 事件触发的原因，即使表单从未获得焦点。消息冒泡在 Windows 和 Winforms 中非常不寻常。但在浏览器或像 WPF 这样的 GUI 类库中并不少见。

所以这就解释了为什么 NUD 会吃掉这个消息，它有一个用途。您还没有遇到其他的，当您将任何从 ScrollableControl 派生的控件放在窗体上时，您的程序也会出现异常，例如 NumericUpDown、Panel、UserControl、SplitContainer、PropertyGrid 或 ToolStrip。或者当控件自然具有滚动用途时，例如 TreeView、ListView、TrackBar、RichTextBox、多行 TextBox。

这在 Winforms 中是完全可以修复的，冒着破坏所有其他控件的预期行为的风险，您可以在 WM_MOUSEWHEEL 消息到达具有焦点的控件之前拦截它并将其传递给您的表单。您可以通过在表单中​​实现 IMessageFilter 来做到这一点。您可以在[我的答案](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/eb922ed2-1036-41ca-bd15-49daed7b637c/)中找到示例代码。

* * *

更新：当心 Windows 10 中的新行为，它现在具有“当我将鼠标悬停在它们上时滚动非活动窗口”选项，并且默认情况下它是打开的。这会导致将鼠标滚轮消息发送到悬停的控件而不是具有焦点的控件。很少有用户会关闭它，这使得使用鼠标滚轮更加直观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:25:38.230

您的问题与[这个人](https://stackoverflow.com/q/15383040/366904)遇到的问题类似，即您的表单上有一个子控件（N​​umericUpDown 控件）正在窃取事件通知，因为它当前是焦点。因此，父级（您的表单）没有收到这些事件通知，因为子控件正在处理它们而不是将它们转发给其父级。如果这对您来说不完全有意义，我强烈建议您阅读[我对他的问题的回答，](https://stackoverflow.com/a/15383659/366904)直到您觉得您了解这里到底发生了什么。重要的是要了解所有 Windows 编程都是事件驱动的，事件通知被传递到焦点窗口/控件，并且一次只能有一个窗口/控件具有焦点。

您的问题的解决方案也与我向其他人提出的解决方案相同。您需要将 MouseWheel 事件通知的处理提高到更高的级别，以确保它不会被“窃取”并由当前聚焦的控件处理。

不过，您的事情比他容易得多，因为您使用的是 WinForms 而不是原始 C++。WinForms 将所有凌乱的 Win32 东西都很好地包装在一个面向对象的 API 中。您正在寻找的称为*消息过滤器*，并在 WinForms 中根据[`IMessageFilter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.aspx)接口实现。您可以通过调用[`Application.AddMessageFilter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.addmessagefilter.aspx)函数并指定消息过滤类（实现`IMessageFilter`接口）来添加消息过滤器。在您的消息过滤类中，您将实现该[`IMessageFilter.PreFilterMessage`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.prefiltermessage.aspx)函数，该函数决定是否应将消息传递给它所指定的特定控件。你要做的是检查消息是否是[`WM_MOUSEWHEEL`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645617.aspx)，如果是，你自己处理而不是让它传递。这将防止*所有*子控件（不仅仅是 NumericUpDown 控件）处理 MouseWheel 事件，并确保此事件在整个应用程序中的行为一致。

一点点示例代码：

```
Public Class MouseWheelMessageFilter : Implements IMessageFilter
    Public Function PreFilterMessage(ByRef m As Message) As Boolean
      ' Filter out WM_MOUSEWHEEL messages, which raise the MouseWheel event,
      ' whenever the Ctrl key is pressed. Otherwise, let them through.
      Const WM_MOUSEWHEEL As Integer = &H20A
      If m.Msg = WM_MOUSEWHEEL && My.Computer.Keyboard.CtrlKeyDown Then
         ' Process the message here.
         If Form.ActiveForm IsNot Nothing Then
            ' TODO: Insert your code here to adjust the size of the active form.
            ' As shown above in the If statement, you can retrieve the form that
            ' is currently active using the static Form.ActiveForm property.
            ' ...
         End If
         Return True  ' swallow this particular message
      End If
      Return False    ' but let all other messages through
   End Function
End Class 
```

在显示第一个表单之前，您还需要确保将调用添加`Application.AddMessageFilter`到应用程序的函数中：`Main`

```
Application.AddMessageFilter(New MouseWheelMessageFilter()) 
```

[（是的，还有其他 hacky 解决方案涉及修改 NumericUpDown 控件处理 MouseWheel 事件的方式。但是，正如我上面暗示的那样，这些方法只会影响*NumericUpDown*控件，而不影响其他可能也处理此事件的控件，从而防止它冒泡到您的父表单。我认为安装消息过滤器是迄今为止最干净的解决方案。）]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T09:09:33.147

我为此找到的最佳解决方案是 codeproject.com 中的一个小项目。还有一个解释如何做到这一点。 [扩展 NumbericUpDown 控件](http://www.codeproject.com/Articles/30899/Extended-NumericUpDown-Control)

我想不出一个全局解决方案，因为您无法在早期阶段取消鼠标事件（您将无法单击按钮，因为您取消了事件）。而且只禁用鼠标事件的mouseWheel部分似乎也几乎是不可能的。

# javascript - javascript中的空值

> ID：15427882
> 
> 赞同：1
> 
> 时间：2013-03-15T08:37:12.250
> 
> 标签：javascript, jquery

这是我的 javascript

```
<script type="text/javascript">
jQuery = $.noConflict();
function onCheck(){
  var rowvalues=jQuery(".rowvalues").val();
  alert(rowvalues);

}  
</script> 
```

我的页面是

```
<type input="hidden" value="{!rowNum}" class="rowvalues" name="rowvalues" /> 
```

在 rowNum 我的值为 100。但在我的警报中它显示为空值。不知道为什么。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T08:39:06.863

你有你的HTML错误的方式：

```
<type input="hidden" 
```

应该

```
<input type="hidden" 
```

此外，不清楚您`onCheck`从哪里调用该函数。您确定在调用之前页面已完全加载吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:42:23.697

也许尝试在不设置变量的情况下打印值以减少问题中的因素。

我知道在 JQuery 中有三种方法可以实现这一点

```
alert($('input#foo').val()); # If you add an ID
alert($('input[name=row values]').val());
alert($('input[type=hidden]').val()); 
```

# java - 如果无法将其传递给参数/返回列表，则访问对象引用

> ID：15427888
> 
> 赞同：1
> 
> 时间：2013-03-15T08:37:31.173
> 
> 标签：java, object, reference

让我们假设，我们有一个使用类`A`、`B`和`C`的漂亮的小 Java 项目`D`。要访问一个对象、它的方法或属性，需要一个指向它的链接：实例 ID 或引用。如果我只是在 vm 当前类中创建了一个类的实例，这很容易：

在课堂上`A`：

```
B bi = new B(); 
```

使用`bi`，我可以访问类`B`中类提供的所有属性和方法`A`。

但是，当我现在上课时`B`：

```
C ci =  new C(); 
```

当然，在课堂上`B`我可以访问`C`/提供的所有内容`ci`。但是如何利用`C`/ `ci`in`A`呢？没有可用的对象引用。只是创建一个新的没有帮助：一个额外的实例`C`，不同的工作数据集。

我找到了两种方法。

1.  `C`by所需的所有内容都`A`必须被封装`B`并通过`B`/调用`bi`。缺点很明显。

2.  我回到了我早期`FORTRAN`的经验并创建了一个`Common`区域。一个纯粹的静态类。如果`B`创建`ci`，它会将它的引用复制到区域中，例如：

    C ci = 新 C(); Common.ci = ci;

现在很容易`A`使用 `C`/ `ci`：

在课堂上`A`：

```
Common.ci.setValue("Value"); 
```

在著名的绘画方法中，我遇到了一个非常相似的问题：

```
protected void paintComponent(Graphics g) 
```

到目前为止，我发现的所有示例都在绘制方法本身中仔细创建了数据。但是，如果要绘制的数据来自外部，如何处理？没有参数可以为paint 方法提供数组。我决定像我的解决方案一样使用静态参考`2`

在我看来，这两个潜在的解决方案都没有灵感或 Java 风格。有经验的 Java 人解决问题的方法是什么？

# html - 响应式布局高度不均匀

> ID：15427890
> 
> 赞同：5
> 
> 时间：2013-03-15T08:37:34.567
> 
> 标签：html, css, responsive-design

在过去的几天里，我一直在努力思考如何解决某个网页设计问题，但到目前为止，我还没有想出任何优雅的解决方案。

为了简要总结设计，有 3 列容器，其中容器的高度不均匀（动态生成）但宽度相同（流体）。它们需要按从左到右的数字顺序排列；即顶行的1-2-3，其次是第二行的4-5-6，依此类推。

现在，真正让我崩溃的是试图让这条线整齐排列，而在容器之间没有太多不必要的“垂直间距”。我创建了以下模型代码（也可用作代码块下方的 JSFiddle）来说明：

**HTML**

```
<div class="wrapper" id="wrapper">
    <div class="container small"  id="container_1">1</div>
    <div class="container large"  id="container_2">2</div>
    <div class="container small"  id="container_3">3</div>
    <div class="container medium" id="container_4">4</div>
    <div class="container small"  id="container_5">5</div>
    <div class="container medium" id="container_6">6</div>
    <div class="container large"  id="container_7">7</div>
    <div class="container medium" id="container_8">8</div>
    <div class="container large"  id="container_9">9</div>
    <div class="clearfix"></div>
</div> 
```

**CSS**

```
.wrapper {
    width: 100%;
    padding: 5%;
}
.clearfix {
    clear: both;
}
.container {
    display: block;
    float: left;
    width: 25%;
    margin: 2.5%;
    color: white;
    font-weight: bold;
    text-transform: uppercase;
}
.small {
    height: 100px;
    background: red;
}
.medium {
    height: 150px;
    background: green;
}
.large {
    height: 200px;
    background: blue;
} 
```

JSFiddle：http: [//jsfiddle.net/tzikas/MYgNx/](http://jsfiddle.net/tzikas/MYgNx/)

注意：由于列布局本身最终会根据设备宽度分解为两列/一列，因此我在 JSFiddle 中包含了一个简单的“切换布局”按钮来模拟这一点。

我想帮助弄清楚的内容如下：

1.  如何摆脱例如“1”和“5”或“2”和“6”之间的过度垂直间距？
2.  如何让“4”将自己定位在“1”下方而不是“3”下方（同时也解决了前一点）？

最好我想在不通过任何类型的脚本操作 DOM 的情况下解决这个问题，但如果我必须这样做，那么 mooTools 是我的“首选毒药”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:29:40.757

根据您的要求。您可以为此使用[http://masonry.desandro.com/ 。](http://masonry.desandro.com/)

# jquery - 选中单选按钮时复选框淡入

> ID：15427891
> 
> 赞同：1
> 
> 时间：2013-03-15T08:37:45.293
> 
> 标签：jquery, checkbox, hidden, fade

我有一段代码可以在 Jquery 1.7.2 中使用，但它似乎在 1.9.1 中不起作用。

现在我很好奇发生了什么变化。

谁能帮我吗？

[http://jsfiddle.net/an9dV/](http://jsfiddle.net/an9dV/)

```
$(document).ready(function () {
$("#ikga-akkoord").hide();
$("#verzekeringen").click(function () {
    if ($("#verzekeringen").attr('checked')) {
        $("#ikga-akkoord").fadeIn();
    }

}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:45:58.320

看到这个：

[http://jsfiddle.net/an9dV/6/](http://jsfiddle.net/an9dV/6/)

```
$(document).ready(function () {
$("#ikga-akkoord").hide();
    $(".verzekeringen").on('click', function () {

        if ($(this).is(':checked')) {
            $("#ikga-akkoord").fadeIn();
        }
    });
}); 
```

同一页面上不能有多个 id，这就是我将 id 更改为类的原因。

```
<div class="kiesbundelblokken">
<div id="belsms">
    <p>Verzekeringen</p>
    <div class="radiobuttonsverzekeringen">
        <label>
            <input class="verzekeringen" type="radio" name="verzekeringen" value="normaal"
            />ACE Toestelverzekering</label>
        <label>
            <input class="verzekeringen" type="radio" name="verzekeringen" value="plus"
            />ACE Toestelverzekering Plus</label>
        <label id="ikga-akkoord">
            <input id="akkoordvoorwaarden" type="checkbox" name="akkoordvoorwaarden"
            value="akkoordvoorwaarden" />Ik ga akkoord met deze voorwaarden</label>
    </div>
</div> 
```

**编辑**

根据@soyuka 评论，我将 attr('checked') 更改为 .is(':checked')。一种更好更清洁的方法。.attr('checked') 如果未检查某些内容，将返回 undefined，因此这是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:45:14.263

你应该使用`is`而不是你的`attr`：

```
$("#verzekeringen").click(function () {
    if ($("#verzekeringen").is(':checked')) {
        $("#ikga-akkoord").fadeIn();
    }

}); 
```

查看您更新的[小提琴](http://jsfiddle.net/soyuka/an9dV/5/)。

# python - 如何在谷歌应用引擎中使用 twitter 引导图标？

> ID：15427898
> 
> 赞同：0
> 
> 时间：2013-03-15T08:38:14.480
> 
> 标签：python, google-app-engine, twitter-bootstrap

```
<i class="icon-search"></i> 
```

试图将上述行放在谷歌应用引擎中。显然，它不起作用，因为我没有将图像文件链接到 app.yaml 文件。app.yaml 文件已包含以下代码：

```
- url: /static/images/(.*\.(gif|ico|jpeg|jpg|png))
  static_files: static/images/\1
  upload: static/images/(.*\.(gif|ico|jpeg|jpg|png)) 
```

我应该怎么做才能使用 Twitter Bootstrap 图标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:41:46.190

您所要做的就是正确指出 Bootstrap 附带的两个精灵图像在哪里。

如果您使用的是 LESS，请在以下内容中找到这些行`variables.less`：

```
@iconSpritePath:          "../img/glyphicons-halflings.png";
@iconWhiteSpritePath:     "../img/glyphicons-halflings-white.png"; 
```

并将它们更改为以下内容：

```
@iconSpritePath:          "/static/images/glyphicons-halflings.png";
@iconWhiteSpritePath:     "/static/images/glyphicons-halflings-white.png"; 
```

如果这些图像位于`static/images`目录中。

否则，如果您使用的是 CSS 版本的 Bootstrap，那么只需找到对这些图像的引用并输入正确的路径：

```
background-image: url("../img/glyphicons-halflings.png"); 
...
background-image: url("../img/glyphicons-halflings-white.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:47:23.753

你的CSS看起来不错？这就是我正在使用的东西

```
- url: /img/(.*\.(gif|png|jpg))
  static_files: static/img/\1
  upload: static/img/(.*\.(gif|png|jpg))

- url: /css
  static_dir: static/css

- url: /js
  mime_type: text/javascript
  static_dir: static/js 
```

然后这应该工作等

```
<i class="icon-search icon-white"></i> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:38:48.367

我需要再添加一个步骤，以使 Lipis 的答案对我有用。

我的 bootstrap.css 文件中的第 2285 行最初如下所示，但图标仍然没有出现。

```
background-image: url("../img/glyphicons-halflings.png"); 
```

然后我把这个相对路径改成绝对路径，如下图，图标立马出现了！

```
background-image: url("http://www.mywebsite.com/img/glyphicons-halflings.png"); 
```

至于为什么相对路径没有正确解析，那是明天的事情。同时，至少绝对路径解决方案适用于我（也许也适用于其他人）。

非常感谢 Lipis，为您提供上述解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-26T20:38:55.597

这个话题很老，但也许有人正在寻找类似问题的答案。就我而言，添加就足够了

```
- url: /fonts
  static_dir: fonts 
```

在 app.yaml 中并保留 bootstrap.css 原样。Glyphicons 应该自然地位于根目录的字体文件夹中。

# javascript - 孩子排序时如何获取父ID

> ID：15427899
> 
> 赞同：0
> 
> 时间：2013-03-15T08:38:17.610
> 
> 标签：javascript, jquery

这个问题与此有关：[排序后如何显示父级的新顺序？](https://stackoverflow.com/questions/15425213/how-to-display-the-new-order-of-the-parent-after-sorting)

我已经解决了上面的问题。现在是我想在孩子排序时获取父 ID。

示例：当我将水换成电时，

```
 <li id="1">
            <span class="cat-title">Utilities</span>
            <ul class="dropenv mt">
                <li class="innerList">Electricity</li>
                <li class="innerList">Water</li>
                <li class="innerList">Trash</li>
                <li class="innerList">Television</li>
            </ul>
         </li> 
```

输出必须是，

```
 1_Electricity
   1_Water
   1_Trash
   1_Television 
```

因为 1 是 Utilities 的 id

**以下是代码：**

```
 [.............]
        var parentID;
        var origColor;
        $(".dropenv").sortable({
            connectWith: "ul.env-data",
            dropOnEmpty: true,
            start: function(event, ui) {
                origColor = ui.item.text();

                //this is the id that produce undefined value
                parentID = ui.item.parent().siblings('li').attr('id');
            },
            stop: function(event, ui) {
                var order = [];

                ui.item.closest('ul').children('li').each(function() {
                    order.push($(this).data('position'));
                    var c = $(this).text();
                    var z = parentID;
                    //if (c === origColor) {
                    //    var z = origTitle;
                    //} else {
                    //    var z = $(this).parent().siblings('.cat-title').text();
                    //}
                    $("#cl").append(z + "_" + c + "<br /\>");
                });
            }
        });

[.............] 
```

上面的代码产生未定义的值：

```
 undefined_Electricity
   undefined_Water
   undefined_Trash
   undefined_Television 
```

如何获得确切的父母ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:44:14.547

尝试

```
parentID = ui.item.closest('li[id]').attr('id'); 
```

另一个完整的解决方案

```
$("#sortable").sortable({
    connectWith: "ul.env-data",
    dropOnEmpty: true,
    stop: function(event, ui) {
        var parentId = ui.item.parent().closest('li').attr('id');
        // Or this
        //var parentId = ui.item.closest('li[id]').attr('id');
        ui.item.closest('ul').children('li').each(function() {
            var $this = $(this);
            var text = $this.data('text');
            if(!text){
                text = $this.text();
                $this.data('text', text);
            }
            $this.text(parentId + '_' + text)
        });
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ygG8u/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:41:12.753

你这里的物品是`<ul class="dropenv mt">`..`parent(li)`去拿`id`..不需要`sibling()`;

试试这个

```
var parentID ="";
parentID = ui.item.parent('li').attr('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:42:11.527

使用默认值初始化 parentID。 `var parentID ='';`

然后搜索父级。

```
 parentID = ui.item.parent().parent('li').attr('id'); 
```

# javascript - 拆分json响应单独的数组

> ID：15427900
> 
> 赞同：1
> 
> 时间：2013-03-15T08:38:19.080
> 
> 标签：javascript, json

我的 json 响应是

`["2013,1,10,'Test Holiday'", "2013,1,31,'Staff Trip'", "2013,2,8,'Poya'"]`

我想将此隐蔽为多个数组，由主逗号分隔，例如

`[Array[4], Array[4], Array[4]]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:43:03.383

假设所有字符串中都没有额外的逗号，您可以这样做：

```
response.map( function(x) { return x.split(",") } ) 
```

`map`将函数应用于数组的每个元素。在这种情况下，它会拆分逗号上的每个字符串。

如果确实您的字符串中可能包含逗号，那么您需要进行更多解析以确定要排除哪些字符串。

# javascript - 在javascript中着色字符串的中间

> ID：15427902
> 
> 赞同：1
> 
> 时间：2013-03-15T08:38:20.803
> 
> 标签：javascript, html, string, colors, pre

我将其作为 javascript 文档中的字符串（取自我的 HTML 中的 pre 标记）：

```
sqlString = "UPDATE galleria SET image_description = @image_description WHERE id = " + image.Id + " AND image_id = " + @image_id; 
```

并且我希望为引号（“）内写的文本着色。我知道我可以这样做

```
<span style="color:red;">*text here*</span> 
```

但我不知道该怎么做。到目前为止，我已经制作了一个算法来获取引号字符串中的位置（例如，在这个字符串中，我有 2 个值为 12 和 83 的变量），但是要操作字符串并将其发回以便上面的字符串变成

```
sqlString = <span style="color:red;">"UPDATE galleria SET image_description = @image_description WHERE id = "</span> + image.Id + <span style="color:red;">" AND image_id = "</span> + @image_id; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:40:52.603

你会使用`substring`和连接。假设`indexOfStartQuote`和`indexOfEndingQuote`，则：

```
sqlString = sqlString.substring(0, indexOfStartQuote) +
            '<span style="color: red">' +
            sqlString.substring(indexOfStartQuote + 1, indexOfEndingQuote + 1) +
            '</span>' +
            sqlString.substring(indexOfEndingQuote + 2); 
```

...然后使用它来设置`innerHTML`元素。

您可能希望在其中使用`+ 1`s，具体取决于您是否希望引号为红色。

* * *

旁注：我提倡使用`<span class="error">`或类似的东西，并使用`style`元素或样式表进行样式设置。

# ios - iPhone的m3u8文件--如何将其保存在本地以供以后播放

> ID：15427907
> 
> 赞同：5
> 
> 时间：2013-03-15T08:38:42.827
> 
> 标签：ios, streaming, playback, http-live-streaming, m3u8

谁能指导我，如何从 url 本地存储 m3u8 文件，以便以后离线播放。EXT-X-ALLOW-CACHE 会在这件事上帮助我吗？

```
NSURLRequest* request = [NSURLRequest requestWithURL:url   cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
NSURLConnection *connection=[[NSURLConnection alloc]initWithRequest:request delegate:self];
NSLog(@"connection %@",connection);` 
```

我可以直接从 url 流式传输和播放 m3u8。但无法将其存储在本地并解析 .ts 文件并播放...请指导。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-27T08:20:57.730

**第 1 步：下载文件并保存**

```
NSError *err = nil;
NSString *url = [[NSString stringWithFormat:@"http://www.example.com/playlist.m3u8"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *the_file = [NSString stringWithContentsOfURL:[NSURL URLWithString:url] encoding:NSUTF8StringEncoding error:&err];
if(err != nil) {
    // do some error handling, e.g. NSLog(@"Fail: %@", [err localizedDescription]);
} else {
    // save the file ( see Step 2 )
} 
```

**第 2 步：保存文件**

您可以将其保存为文件，也可以将其保存为对象。

```
// save as file
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDirectory = [paths objectAtIndex:0];
NSString *fileName = [NSString stringWithFormat:@"%@/playlist.m3u8", docDirectory];
[the_file writeToFile:fileName atomically:NO encoding:NSASCIIStringEncoding error:nil];

// OR, save as object
[[NSUserDefaults standardUserDefaults] setObject:the_file forKey:@"MY_M3U8"]; 
```

**第三步：读取文件**

```
// read from file 
NSString *textPath = [docDirectory stringByAppendingPathComponent:@"playlist.m3u8"];
// the FILE is loaded

// OR, read from object
NSString *content = [[NSUserDefaults standardUserDefaults] stringForKey:@"MY_M3U8"];
// it will contain the CONTENT of file 
```

**第 4 步：在播放器中播放**

你应该这样做的。不用我写了吧？

# javascript - Literally Canvas - 设置画布图像

> ID：15427911
> 
> 赞同：0
> 
> 时间：2013-03-15T08:38:59.927
> 
> 标签：javascript, canvas, html5-canvas, litterallycanvas.js

我想将 Literally Canvas 小部件的画布设置为图像，类似于使用下面的代码，但 API 中似乎没有任何内容可以执行此操作。有任何想法吗？我不能在literally.js 文件中使用下面的代码...

```
imageObj.onload = function () {
  ctx.drawImage(imageObj, 0, 0);
};
imageObj.src = '<?php echo $path . $image_name; ?>'; 
```

**编辑：**

我现在拥有的代码（见下面的评论）：

```
$(document).ready(function () {
  $('.literally').literallycanvas();
  var ctx = document.getElementsByTagName('canvas')[0].getContext('2d');
  var imageObj = new Image();
  imageObj.onload = function () {
    ctx.drawImage(imageObj, 0, 0);
  };
  imageObj.src = '<?php echo $path . $image_name; ?>'; 
```

请注意，我没有在literallycanvas.js 文件中使用此代码，也没有修改该文件。我应该在那里使用代码吗？如果是这样，那么 Javascript 文件中的 PHP 代码呢，是否应该将其更改为 PHP 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T17:44:19.720

一个可能适用于许多人的简单解决方案是将背景设置为透明并将图像放在画布后面。

```
var myLC = $('.literally').literallycanvas({backgroundColor: 'transparent'}); 
```

通过绘制到“缓冲区上下文”，您可以完全实现您的想法。您必须编辑“LiterallyCanvas.prototype.repaint”函数并执行以下操作：

```
var img = new Image();
img.src = "photo.jpg";

this.bufferCtx.drawImage(img, 90, 0, 269, 336); 
```

我删除了检查“drawBackground”布尔值的 IF，但我不完全确定这是必要的。使用这种技术，在您开始绘制之前不会显示图像。这就是您从外部 JS 访问缓冲区上下文的方式。

```
myLC[0].literallycanvas.bufferCtx.drawImage(img, 90, 0, 269, 336); 
```

请注意，我没有对此进行性能测试，但它似乎工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:29:02.330

它应该工作。您应该首先获取画布的上下文...

```
var ctx = document.getElementsByTagName('canvas')[0].getContext('2d');
var imageObj = new Image();
imageObj.onload = function() {
   ctx.drawImage(imageObj, 0, 0);
};
imageObj.src = '<?php echo $path . $image_name; ?>'; 
```

我在 Literally Canvas 本身的示例页面上对其进行了测试，并且运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T17:03:17.567

该文档现在有几个与添加图像相关的示例，特别是关于将它们用作背景的示例。

[http://literallycanvas.com/examples/index.html](http://literallycanvas.com/examples/index.html)

# zend-framework - 在 Zend Server CE 上切换 Zend Framework 版本

> ID：15427925
> 
> 赞同：0
> 
> 时间：2013-03-15T08:39:42.227
> 
> 标签：zend-framework, zend-framework2, zend-server-ce

所以，我最近安装了新的 Zend Server CE 6.0.0。

现在，如果我去，`localhost:10081/ZendServer/ServerInfo/`我会在上面得到以下信息：

*   PHP 版本 5.4.11

*   Zend 服务器版本：6.0.0

*   Zend 框架：1.12.1、2.1.1**

*   Zend 服务器网关：0.9.0.201301302347

*   建造：68518

如您所见，安装了两个 Zend Framework 版本，1.12.1 和 2.1.1。

如果我`echo Zend_Version::VERSION;`在我的应用程序中使用它会显示我`1.12.1`。

**问题：**如何切换这些不同的版本？我怎样才能添加更多版本（例如另外 1.12.3）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:32:15.520

> 如何切换这些不同的版本？

如果您使用的是非命名空间代码，则您使用的是 Zend Framework 1：

```
echo Zend_Version::VERSION;//this is ZF1 style code 
```

如果代码被命名为 Zend Framework 2：

```
echo Zend\Version::VERSION;//this would be ZF2 style code 
```

你不可能不小心用错了。

对于 Zend Server，两个版本的 Zend Framework 都位于`/ZendServer/share`目录 (windows) 中并包含在`php.ini include_path`. 如果您不希望其中一个或另一个可用，请从您那里编辑它`php.ini include_path`。

**注意：**`include_path` Zend Server 中的条目通常`php.ini`位于文档的末尾，而不是通常的位置。

```
 And how am I able to add even more versions (e.g. additionally 1.12.3)? 
```

这是简单的部分;

将新版本添加到`Zendserver/share`目录，然后将新路径添加到`php.ini include_path`.

```
include_path=".;C:\Zend\ZendServer\bin\pear;C:\Zend\ZendServer\share\ZendFramework\library;C:\Zend\ZendServer\share\ZendFramework2\library" 
```

小路

```
 /Zend
        /ZendServer
            /share
                /Zendframework
                /Zendframework2 
```

祝你好运

# javascript - 用javascript缩短大数字

> ID：15427929
> 
> 赞同：3
> 
> 时间：2013-03-15T08:40:07.930
> 
> 标签：javascript, algorithm, math

我有这么大的数字：
**21212202382541035306949186015338569645685453497668055588619610488832**

Javascript 会自动为我缩短它，如下所示：
**2.1212202382540943e+67**

但是因为我把它放在一个固定的表格单元格中，所以我需要这个数字小于或等于总共 11 位数字。

所以在例子中，如果我有前面提到的数字，它应该转换为：
**~2.1212e+67**

而且，如果数字是：

**128330558031338336**它应该显示**~1.2833e+17**

所以基本上，如果一个数字的长度超过 11 位，它应该开始添加 10 的幂并开始对数字进行四舍五入。

如何使用 JavaScript 做到这一点？

我尝试使用`substring()`，但在确定要显示的确切权限时遇到问题。

* * *

*编辑*

结束脚本如下所示：

```
if ( num.length > 11 ) {
    num = parseFloat( num );
    var n = '~'+ num.toExponential( 4 );
} else {
    var n = num;
} 
```

非常感谢[黑玛姬](https://stackoverflow.com/users/2003208/black-maggie)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T08:42:17.893

来源：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toExponential](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toExponential)

javascript中有一个toExponential()

因此，如果您希望在指数表示中总共保留 11 个字符，您可以传递小数点后剩余的位数

`toExponential(5)`可能会`2.12122e+67`为您的号码提供结果`21212202382541035306949186015338569645685453497668055588619610488832`

更新：从 mozilla 而不是 w3school 中选择了更好的来源。谢谢@TJ克劳德

更新 2：来源：[http ://www.php.net/manual/en/language.types.float.php](http://www.php.net/manual/en/language.types.float.php)

对于 php，使用`round()`似乎可能会强制对数字进行科学记数法转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T08:48:07.000

我认为在你的情况下[toPrecision](http://www.w3schools.com/jsref/jsref_toprecision.asp)会更合适。

如果您的数字偏差很大，您可能需要一些技巧来适应您的表格单元格。例如尝试使用 8 位有效数字，测试字符串长度，如果太长，请再次尝试使用 7，甚至可能使用 6 和 5。

更新：好的，我玩了一下下面的代码：

```
num = new Number(<your num>);
alert("prec: " + num.toPrecision(5) + " exp: " + num.toExponential(4)); 
```

样本输出：

```
prec: 364.00 exp: 3.6400e+2
prec: 3.6435e+13 exp: 3.6435e+13 
```

我会说这取决于您是想始终看到指数数字还是仅在需要时才看到。在前一种情况下， toPrecision() 更好，因为它尽可能保留数字固定点，这样您就可以在相同的字符串长度下获得更高的精度。如果你总是想要指数数字，那么 toExponential() 更好。如果你的数字总是大到足以成指数，那没关系。

# c# - 在我的编辑和页脚模板中使用来自数据库的数据填充 gridview 中的下拉列表

> ID：15427933
> 
> 赞同：0
> 
> 时间：2013-03-15T08:40:18.767
> 
> 标签：c#, asp.net

我试图在我的子嵌套网格视图上有一个下拉列表，但无济于事。我的 asp.net 4 Web 应用程序有代码。下面是我的gridview的代码。

```
<asp:TemplateField HeaderText="Status" SortExpression="Status">
                                            <ItemTemplate><%# Eval("Status")%></ItemTemplate>
                                            <EditItemTemplate>
                                                <asp:DropDownList ID="DropDownListStatus" runat="server">
                                                </asp:DropDownList>

                                            </EditItemTemplate>
                                            <FooterTemplate>
                                                <asp:DropDownList ID="DropDownListStatus" runat="server" >

                                                </asp:DropDownList> 
```

我正在使用 SqlDataSource。下面是我删除了一些导致错误的代码后的代码。

```
protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    //Check if this is our Blank Row being databound, if so make the row invisible
    if (e.Row.RowType == DataControlRowType.DataRow)
    {

        if (((DataRowView)e.Row.DataItem)["CertificateNo"].ToString() == String.Empty) e.Row.Visible = false;

    }
} 
```

我试图 FindControl 为我的下拉列表，使用查询并将其绑定到我的下拉列表，但我没有做这么简单的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:00:22.333

在您后面的代码中：

```
protected void GridView2_RowDataBound(object sender, GridViewRowEventArgs e)
{
    //Check if this is our Blank Row being databound, if so make the row invisible
    if (e.Row.RowType == DataControlRowType.DataRow)
    {

        if (((DataRowView)e.Row.DataItem)["CertificateNo"].ToString() == String.Empty) e.Row.Visible = false;
        //Check if is in edit mode
        if ((e.Row.RowState & DataControlRowState.Edit) > 0)
        {
            DropDownList DropDownListStatus = (DropDownList)e.Row.FindControl("DropDownListStatus");
            //Bind status data to dropdownlist
            DropDownListStatus.DataTextField = "Status";
            DropDownListStatus.DataValueField = "Status";
            DropDownListStatus.DataSource = RetrieveStatus();
            DropDownListStatus.DataBind();
            DataRowView dr = e.Row.DataItem as DataRowView;
            DropDownListStatus.SelectedValue = dr["Status"].ToString();
         }

    }
} 
```

然后对于 RetrieveStatus：

```
private DataTable RetrieveStatus()
{
    //fetch the connection string from web.config
    string connString = ConfigurationManager.ConnectionStrings["sb_cpdConnectionString"].ConnectionString;
    //SQL statement to fetch entries from products
    string sql = @"Select distinct Status from cpd_certificates";
    DataTable dtStatus; = new DataTable();
    //Open SQL Connection
    using (SqlConnection conn = new SqlConnection(connString))
    {
        conn.Open();
        //Initialize command object
        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            SqlDataAdapter adapter = new SqlDataAdapter(cmd);
            //Fill the result set
            adapter.Fill(dtStatus;);
        }
    }
    return dtStatus;
} 
```

经过测试和工作最终。

# java - MySQL 无法识别日期列中的时间

> ID：15427935
> 
> 赞同：3
> 
> 时间：2013-03-15T08:40:25.820
> 
> 标签：java, mysql, date, datetime, timestamp

所以，我想在我的表中插入一个日期变量，其中包含发布消息的日期和时间（分钟、小时、秒）。我的问题是，无论我`DATE_POSTED`是什么类型的数据（`DATETIME`或`TIMESTAMP`），它仍然会保存我当时的信息`00:00:00`。

这是我的 Java 代码，它获取当前时间然后发布消息。

```
 Calendar calendar = Calendar.getInstance();
    Date date = calendar.getTime();

    Message msg = new Message(user, message, date);
    hibernateTemplate.saveOrUpdate(msg); 
```

这是结果（由于某种原因我无法上传我的图片）：

```
_____________________________________
|ID|USER|MESSAGE|DATE_POSTED        |
| 1|asd |qwery  |2013-03-15 00:00:00|
| 2|asd |321tgg |2013-03-15 00:00:00|
------------------------------------- 
```

我想提一下我的 Java 代码很好，因为在断点处，它有时间值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T08:45:25.467

您可能使用 DATE 作为该字段的类型。如果您关心时区，请尝试使用 DATETIME，如果您不关心时区，请尝试使用 TIMESTAMP。

# arrays - 如何将 ActiveRecord 结果转换为哈希数组

> ID：15427936
> 
> 赞同：134
> 
> 时间：2013-03-15T08:40:27.103
> 
> 标签：arrays, activerecord, hash

我有一个查找操作的 ActiveRecord 结果：

```
tasks_records = TaskStoreStatus.find(
  :all,
  :select => "task_id, store_name, store_region",
  :conditions => ["task_status = ? and store_id = ?", "f", store_id]
) 
```

现在我想把这个结果转换成这样的哈希数组：

```
[0] ->  { :task_d => 10, :store_name=> "Koramanagala", :store_region=> "India" }

[1] -> { :task_d => 10, :store_name=> "Koramanagala", :store_region=> "India" }

[2] ->  { :task_d => 10, :store_name=> "Koramanagala", :store_region=> "India" } 
```

这样我就可以遍历数组并向哈希添加更多元素，然后将结果转换`JSON`为我的 API 响应。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2013-03-25T19:40:24.197

## as_json

您应该使用`as_json`将 ActiveRecord 对象转换为 Ruby 哈希的方法，尽管它的名称

```
tasks_records = TaskStoreStatus.all
tasks_records = tasks_records.as_json

# You can now add new records and return the result as json by calling `to_json`

tasks_records << TaskStoreStatus.last.as_json
tasks_records << { :task_id => 10, :store_name => "Koramanagala", :store_region => "India" }
tasks_records.to_json 
```

## 可序列化的哈希

您还可以将任何 ActiveRecord 对象转换为 Hash`serializable_hash`并且您可以将任何 ActiveRecord 结果转换为 Array `to_a`，因此对于您的示例：

```
tasks_records = TaskStoreStatus.all
tasks_records.to_a.map(&:serializable_hash) 
```

如果你想在 v2.3 之前为 Rails 提供一个丑陋的解决方案

```
JSON.parse(tasks_records.to_json) # please don't do it 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-07-19T07:36:06.393

或许？

```
result.map(&:attributes) 
```

如果您需要符号键：

```
result.map { |r| r.attributes.symbolize_keys } 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-06-20T19:33:45.203

对于当前的 ActiveRecord (4.2.4+) ，对象`to_hash`上有一个方法`Result`可以返回一个哈希数组。然后，您可以对其进行映射并转换为符号化哈希：

```
# Get an array of hashes representing the result (column => value):
result.to_hash
# => [{"id" => 1, "title" => "title_1", "body" => "body_1"},
      {"id" => 2, "title" => "title_2", "body" => "body_2"},
      ...
     ]

result.to_hash.map(&:symbolize_keys)
# => [{:id => 1, :title => "title_1", :body => "body_1"},
      {:id => 2, :title => "title_2", :body => "body_2"},
      ...
     ] 
```

[有关更多信息，请参阅 ActiveRecord::Result 文档](http://api.rubyonrails.org/classes/ActiveRecord/Result.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-29T13:13:59.593

**试试这个：-**

*数据*=**模型名称**。*最后的*

*数据属性*

# jquery - mvc jquery 发布表单数据并分配表单数据

> ID：15427942
> 
> 赞同：-2
> 
> 时间：2013-03-15T08:40:49.753
> 
> 标签：jquery, asp.net-mvc

我使用 mvc 4，

我想在 jquery 中发布表单数据并将 json 数据设置为表单。

```
function DoAjaxPostAndMore(btnClicked) {
var $form = $(btnClicked).parents('form');

$.ajax({
    type: "POST",
    url: $form.attr('action'),
    data: $form.serialize(),
    accept: 'application/json',
    error: function (xhr, status, error) {

    },
    success: function (response) {            

    }
});

return false;// if it's a link to prevent post} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:29:42.450

像这样试试----

```
$.each(data, function(name, val){
    var $frm = $('[name="'+name+'"]'),
        type = $frm.attr('type');

    switch(type){
        case 'checkbox':
            $frm.attr('checked', 'checked');
            break;
        case 'radio':
            $frm.filter('[value="'+val+'"]').attr('checked', 'checked');
            break;
        default:
            $frm.val(val);
    }
}); 
```

在此处查看示例：http: [//jsfiddle.net/2xdkt/](http://jsfiddle.net/2xdkt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:48:08.930

那是什么`parents()`功能？？？
试试这个

```
$.ajax({
    type: 'POST',
    url: $('form').attr('action');
    data: $('form').serialize(),
    accept: 'application/json',
    error: function (xhr, status, error) {

    },
    success: function (response) {            

    }
}); 
```

# iphone - 如何停止从 iphone 到服务器的 HTTP 发布

> ID：15427951
> 
> 赞同：0
> 
> 时间：2013-03-15T08:41:24.243
> 
> 标签：iphone, ios, http, file-upload

我正在使用 HTTP Posting 将视频发布到服务器。

如何在发布时停止此过程。我正在获取写入的字节，如果我希望在按钮上停止此发布，请单击如何实现

我搜索了很多，但没有明确的想法

我在上传类中添加我的代码

```
 @implementation UploadClass

 -(void)uploadVideoToServer:(NSDictionary *)bits file:(NSData *)file {

appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;

 NSString *urlString =@"http://sampleurl.com/upload_video";
NSMutableURLRequest *request= [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

  NSString *boundary = @"---------------------------14737809831466499882746641449";
  NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
 [request addValue:contentType forHTTPHeaderField: @"Content-Type"];
 NSMutableData *postbody = [NSMutableData data];
 [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

//posting userid 

 [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"user_id\"\r\n\r\n%@", appDelegate.userid] dataUsingEncoding:NSUTF8StringEncoding]];
 [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

//发布标题

```
[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"video_title\"\r\n\r\n%@", sharedclass.vdoTitle] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

//posting video data

[postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"video\"; filename=\"%@\"\r\n", @"a.mov"] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postbody appendData:[NSData dataWithData:file]];
[postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:postbody];

conn = [[NSURLConnection alloc] initWithRequest:request delegate:self];
if (conn) {
    webData = [[NSMutableData data] retain];
}    

}

 -(void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *)  response 

    {
    [webData setLength: 0];

     }

-(void) connection:(NSURLConnection *) connection didReceiveData:(NSData *) data 

   {
[webData appendData:data];

    }

 -(void) connection:(NSURLConnection *) connection didFailWithError:(NSError *) error
    {
[webData release];
[conn release];
     }

  -(void)connection:(NSURLConnection *)connection didSendBodyData:(NSInteger)bytesWritten totalBytesWritten:(NSInteger)totalBytesWritten totalBytesExpectedToWrite:(NSInteger)totalBytesExpectedToWrite

   {

    appDelegate.isVideoUploading=@"YES";
     NSDictionary *uploadStatus=[[NSDictionary alloc]initWithObjectsAndKeys:
                            [NSString stringWithFormat:@"%i",totalBytesWritten],@"bytesWritten",
                            [NSString stringWithFormat:@"%i",totalBytesExpectedToWrite],@"totalBytes",
                            nil];

 if (totalBytesWritten/totalBytesExpectedToWrite == 1) {

  }
   [uploadStatus release];
  }

 -(void) connectionDidFinishLoading:(NSURLConnection *) connection 
    {

      NSString *jsonString = [[NSString alloc] initWithData:webData encoding:NSUTF8StringEncoding] ;

NSString *theXML = [[NSString alloc]
                    initWithBytes: [webData mutableBytes] 
                    length:[webData length] 
                    encoding:NSUTF8StringEncoding];
//---shows the XML---

[theXML release];   
if (xmlParser)
   {
     [xmlParser release];
   }    
    xmlParser = [[NSXMLParser alloc] initWithData: webData];
    [xmlParser setDelegate: self];
    [xmlParser setShouldResolveExternalEntities:YES];
    [xmlParser parse];

    [conn release];
[webData release];
   }

  -(void) parser:(NSXMLParser *) parser didStartElement:(NSString *) elementName namespaceURI:(NSString *) namespaceURI qualifiedName:(NSString *) qName attributes:(NSDictionary *) attributeDict 
    {
if( [elementName isEqualToString:@"status"])
    {
    if (!postStatus)
    {
        postStatus = [[NSMutableString alloc] init];
    }
    postStatusFound = YES;
   }
   }

  -(void)parser:(NSXMLParser *) parser foundCharacters:(NSString *)string
  {
    if (postStatusFound)
  {
 postStatusFound=NO;
    [postStatus appendString: string];
   }    
  }

 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
 {

  sharedclass = [SharedClass sharedInstance];
   if ([elementName isEqualToString:@"status"])
{   
  if([postStatus isEqualToString:@"true" ]){
        appDelegate.isVideoUploading=@"NO";
        [[NSNotificationCenter defaultCenter] postNotificationName:@"UPLOADFINISHED"  object:@"true"];
        NSLog(@"upload finished;");
        sharedclass.cameraBtn=YES;

        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

    }else{
        appDelegate.isVideoUploading=@"NO";
        [[NSNotificationCenter defaultCenter] postNotificationName:@"UPLOADFINISHED"  object:@"false"];

        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

    }

      }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:44:21.760

声明`NSURLConnection`为类属性，您可以在类中的任何位置或单击按钮时使用取消操作

```
-(IBAction)cancelPostOperation:(id)sender{
    [self.conn cancel];
} 
```

# node.js - 在翡翠中，传递给“mixin”的参数具有未评估的变量

> ID：15427964
> 
> 赞同：1
> 
> 时间：2013-03-15T08:42:12.237
> 
> 标签：node.js, pug

当 a 的参数`mixin`包含变量时，显然不会对其进行评估。

例如，

```
mixin js（出，lcl）
  如果后缀 == 'out'
    脚本（src=净）
  别的
    脚本（src=lcl）

mixin js（“http://cdnjs.cloudflare.com/ajax/libs/headjs/0.99/head.load.min.js”，“http://trailsandtribulations.#{suffix}/scripts/head.load.min .js");

```

产量

```
<script src="http://trailsandtribulations.#{suffix}/scripts/head.load.min.js">

```

但该变量`suffix`正常工作

例如，

```
脚本（ src="http://trailsandtribulations.#{suffix}/scripts/head.load.min.js" ）

```

产量

```
<script src="http://trailsandtribulations.nat/scripts/head.load.min.js">

```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:59:05.830

跟随@user1737909 领导，

变成

```
脚本（ src="http://trailsandtribulations."+suffix+"/scripts/head.load.min.js" ）

```

它奏效了

这可能是有道理的，但在对我来说有意义的宇宙中它没有意义

例如，生成 <script> 片段之类的东西`mixins`会很酷，但远远超出我的能力和理解范围

# c++ - 将二维数组赋值表示为指针数学？

> ID：15427967
> 
> 赞同：0
> 
> 时间：2013-03-15T08:42:25.387
> 
> 标签：c++, c, arrays, pointers

我有一个数组前：

```
int array[3][5]; 
```

如果我想为该数组中的元素赋值，这很简单......例如：

```
array[1][2] = 8; 
```

但是，我想用指针数学来表示它，这是否正确？

```
**(array + 5 * 1 + 2) = 8; 
```

在这两种情况下，它都在寻找第 7 个位置...我只是不确定是否需要在 (code) 之外包含第 2 个 *

```
**(code) 
```

编辑：只是有点跟进。感谢所有帮助我的人。我的困惑来自讲师笔记中的错误，在我展示了您提供的信息后，他意识到了错误并同意

```
*(*(array+row)+col) 
```

或者

```
*(*array+MAX_COL*row+col) 
```

是二维数组的精确指针数学表示。

`**(array+MAX_COL*row+col)`is like ，用于多维数组的`array[MAX_COL*row+col]`一维数组实现，就像**James Kanze**在这篇文章的一个回复中提到的（第二个比第一个快）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T08:53:58.973

您需要知道的第一件事是二维数组不是指向指针的指针。它们在内存中是连续的，因此您可以通过指向`T`(`T`是基本类型) 的指针来表示它们：

```
int arr[3][5];
int *p = &arr[0][0];

int array_1_2 = *(p + 5 * 1 + 2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T08:56:40.803

`array[1][2]`等于`*( *(array + 1) + 2)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T09:06:08.390

演示与访问数组同义的指针算术运算的示例。

```
#include<stdio.h>

int main()
{
int array[3][5] = {0};
array[2][3] = 5;
printf( "%d\n",array[2][3]);
printf( "%d\n",*(*(array+2)+3) );
return 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T09:30:36.003

您的问题中有几个错误的假设：例如，`array[1][2]`不看第 7 位；它正在查看 的第二个数组元素中的第三个位置 `array`。的类型`array`是array[3] of array[5] of `int`; 当它转换为指针时，结果类型是指向数组 [5] 的指针`int`，*而不是*指向 的指针`int`。so`array + 5 * 1 + 2)`指数组的第 8 个元素，只有 5 个元素；即 35 * sizeof(int) 超出开头`array` （并且表达式仍然具有指向 array[5] of 的类型指针`int`）。

作为一般规则，如果你想模拟对多维数组的访问，你应该声明一个单维数组：

```
int array[columns * rows]; 
```

如果你这样做，那么`*(array + i * columns + j)`将有效地执行二维索引。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T11:35:55.993

另一种表示是

```
*(array[1]+5)=8 
```

* * *

让我解释一下简单的类似代码。

```
int *p[5]; 
```

这`p`是一个指向第一个元素地址的指针，`p`它等价于`&p[0]`.

为了理解这一点，举个例子

```
#include<iostream.h>    
void main()
{    
int *p[2];
int a=0,b=1;
p[0]=&a;p[1]=&b;
cout<<*p<<endl<<&a<<endl;
cout<<*(p+1)<<endl<<&b<<endl;
cout<<p<<endl<<p+1<<endl;
cout<<**p<<endl<<**(p+1);    
} 
```

上面代码的输出是

```
0x8fbdfff0
0x8fbdfff0
0x8fbdffee
0x8fbdffee
0x8fbdfff2
0x8fbdfff4
0
1 
```

* * *

在我们的例子`int array[3][5]`中相当于`int *p1[5]` `int *p2[5]` `int *p3[5]`。其中`p1`, `p2`,`p3`分别表示指向第一行第二行和第三行第一个元素的指针。

所以实际上我们可以将`array[3]`其视为一个指针，类似地`array[1]`等价于`p1`数组 [2] 和 3 因此，我们可以使用or *(* (array+1)+2) 或考虑它以行主要形式实现的*值*来获得你得到`array[1][2]``*(array[1]+2)`*`*(array+1)``array+1*5`
`*(array+1*5+2)`*

 ** * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-15T09:05:54.697

使用以下数组：

```
const int ROWS = 3;
const int COLS = 5;
int arr[ROWS][COLS]; 
```

尽管`arr`指向第一个元素所在的内存，但它的类型不是`int*`因此增加这个指针不会将你移动到第二个`int`。所以这一行：

```
arr[1][2] = 8; 
```

可以替换为：

```
*((int*)arr + 1*COLS + 2) = 8; 
```

或者您可以使用该数组驻留在连续内存块中的事实，其大小等于`ROWS * COLS * sizeof(int)`，因此您可以简单地检索指向第一个元素的指针并将其用于此目的：

```
int* pFirstEle = &arr[0][0];
*(pFirstEle + 1*COLS + 2) = 8; 
```

但请注意，这是错误的：

```
**(arr + 1*COLS + 2) = 8; 
```*

# ios4 - 如何在 iOS 4 中更改 UITabBarItem 中文本的颜色

> ID：15427973
> 
> 赞同：0
> 
> 时间：2013-03-15T08:42:50.940
> 
> 标签：ios4, uitabbar, uicolor, uitabbaritem

我知道 iOS 5 及更高版本有更改属性的方法，`UITabBarItem`但我不知道如何`UITabBarItem`在低于 5.0 的 iOS 中更改标题颜色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:46:34.233

据我所知，它不能在 iOS4 中设置。但是，您可以自定义 tabBar 来执行此操作。你可以试试[这个](https://github.com/boctor/idev-recipes/tree/master/CustomTabBar)。它工作得很好。;)

还有一个有趣的帖子：[自定义 UITabBarController 的外观](http://praxisstalled.blogspot.com.es/2010/08/customising-appearance-of.html)

# css - 引导菜单上的 CSS Slaint 边缘

> ID：15427974
> 
> 赞同：0
> 
> 时间：2013-03-15T08:42:53.903
> 
> 标签：css, twitter-bootstrap

我正在尝试使用菜单在引导程序中创建[它，我将如何在 css 中获得那些倾斜的边缘？](http://s16.postimage.org/6xshxdzhx/menu.png)

到目前为止，这是一个[JsFiddle](http://jsfiddle.net/dawidvdh/BWM8c/)，我已经让一个角倾斜，但我似乎无法在相反的方向上得到另一个。

这是我用于 on Edge 的 CSS：

```
 .navbar .nav {
        float: right;
        right: 0;
/*Slant Edges*/
        height:0;
        border-bottom: 40px solid #000;
        border-right: 40px solid white;
/*Slant Edges*/
    } 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:58:21.047

我会完全使用`pseudo-element`

CSS：

```
 .nav-collapse:before {
    content:'';
        border-top: 40px solid white;
    border-right: 40px solid #000;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    height:40px;
    position: absolute;
    top: 0;
    left: 0;
    height:100%;
    width: 40px;
}
.nav-collapse:after {
    content:'';
    position: absolute;
    right: 0;
    height:0;
    border-top: 40px solid #000;
    border-right: 40px solid white;
}
.nav-collapse{
    padding:0 40px 0 0 ;
} 
```

演示：http: [//jsfiddle.net/pavloschris/BWM8c/5/](http://jsfiddle.net/pavloschris/BWM8c/5/)

# django - 通过 select_for_update 记录中的两个 ForeignKey 优化访问

> ID：15427980
> 
> 赞同：2
> 
> 时间：2013-03-15T08:43:14.390
> 
> 标签：django, query-optimization

我有一个 Django (1.4.2) 数据模型，如下所示：

```
class CoreData(models.Model):
    cdid = models.AutoField(primary_key=True,editable=False)
    atr1 = # whatever
    atr2 = # whatever

class EnvironData(models.Model):
    cdid = models.ForeignKey(CoreData)
    # etc

class TransactionData(models.Model):
    edid = models.ForeignKey(EnvironData)
    # etc 
```

我需要一个原子事务，在其中更新`etc`事务数据：

```
tdo = TransactionData.objects.select_for_update().get(etc=criteria)
# process transaction
# modify tdo object
tdo.save() 
```

到目前为止，一切都很好。但是，在 的过程中`process transaction`，我需要检查`CoreData.atr1`和`CoreData.atr2`。

如果我通过这些访问，`tdo.edid.cdid.atr{1,2}`那么我的理解是我会有一个额外的读取数据库查询，因为 Django 会获取丢失的数据。（老实说，我不能 100% 确定它只是一个；也可能是两个——甚至是六个，但我对此表示怀疑。）

另一方面，如果我结合`select_related()`使用，`select_for_update()`我不仅会锁定不需要（也不应该）锁定的数据，还会为`tdo.save()`.

第三种方法可能是通过独立查询（与 无关`tdo`）获取数据，如果使用该查询，则可以保证是单个数据库查询`select_related()`。另外，它可以使用`values()`.

我认为最后一种方法是最有效的，也是因为查询可以从我已经拥有 as的`EnvironData`对象开始。`edid``tdo.edid_id`

我的观点合理吗？有没有更好的方法？

*更新：*完全可以`tdo.edid.cdid.atr{1,2}`独立访问，甚至可以在交易期间更改它们，因为它们彼此独立，并且不需要它们在整个交易过程中保持其价值。（谢谢@Uszy Wieloryba）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:28:36.233

如果您`# process transaction`依赖`CoreData.atr1`and `CoreData.atr2`，也许它们应该被锁定。

# c - Telnet 处理 wc 和任何从键盘读取输入的命令

> ID：15427983
> 
> 赞同：1
> 
> 时间：2013-03-15T08:43:27.913
> 
> 标签：c, unix, telnet, systems-programming, unix-socket

我是 UNIX 新手，也是使用 C 语言编程的新手。

我想做的是简单的实现`telnet`。

我在双方（服务器和客户端）都建立了所有必需的连接。

在服务器上：我收到的任何请求，我都会`fork`有一个新进程来处理它

```
void createProcess() {
    int pid = fork();
    if( pid == CHILD ) {
        transferHandling(s);
        close(s);
        _exit(0);
    }
} 
```

这种处理来自客户端的命令的方法：

```
int transferHandling(int socket) {
    char buf[20];
    char command[1024];
    int n, pid, fd[2];
    char *shell, *ps1;
    if( checkLogin(socket) == 0 ) { // Used to check user account
        send(socket, "Login Succeeded\n", 16, 0);
        if( setupENV(info->name) == 0 ) {  // setuid and setgid for the user
            if( pipe(fd) == ERROR ) {
                send(socket, "Server Busy\n", 12, 0);
                return 1;
            }
                    // Here I make a process to run the default shell for the user
                    // and make pipe between them
            if((pid = fork()) > 0) {
                dup2(fd[0], STDOUT_FILENO);
                close(fd[1]);

                //read commands from socket
                while(1) {
                    n = recv(socket, command, 1024, 0);
                                    // send the commands received to the child which contains the default shell
                    write(fd[0], command, n);
                }
            } else {
                dup2(fd[1], STDIN_FILENO);
                dup2(socket, STDOUT_FILENO);
                dup2(socket, STDERR_FILENO);
                close(fd[0]);

                //run default shell
                shell = getpwnam(info->name)->pw_shell;
                execlp(shell, shell, NULL);
            }
        } else {
            return 1; // setup ENV error
        }
    } else {
        send(socket, "Login Failed\n", 13, 0);
    }
} 
```

该程序可以使用任何命令成功运行，但是当客户端编写任何命令时，例如：`wc, cd, bash (to run any other shell)`. 程序挂了。

这是建立连接后的客户端。

```
if(login(soc)) { // send the user information for the server
        char cmd[2024], cc[1024];
        int n;
        while(1) {
            printf("Reading\n");
            write(1, "username@hostname> ", 19);
            n = read(0, cmd, 2024);  // read the command from the STDIN, and send it to server
            send(soc, cmd, n, 0);

            printf("Receiving Now\n");
            n = recv(soc, cmd, 2024, 0); // getting back the command output
            write(1, cmd, n);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:14:36.817

您的管道文件描述符错误。你应该：

```
write(fd[1], ...); 
```

和：

```
dup2(fd[0], STDIN_FILENO); 
```

顺便说一句，中间进程不需要从套接字读取命令并通过管道将它们发送到外壳。您可以直接从套接字重定向 shell 的输入。此外，不需要`dup2()`if 直接写入管道。最后，执行此操作的无限循环似乎是一个非常糟糕的主意，因为它会在 shell 死亡时旋转。

# ios - 用于 ios 上复杂数据结构的 sqlite 或 coredata

> ID：15427986
> 
> 赞同：4
> 
> 时间：2013-03-15T08:43:48.650
> 
> 标签：ios, sqlite, core-data

我将在 iPhone/Ipad 应用程序中使用相当复杂的数据结构。在摆脱了许多不需要的表并尽可能地扁平化数据结构之后。– 即，如果我在真实结构中有一个调用表和地址表，因为我根本不需要更新地址信息，我已经扩展了 IOS 调用表以包含地址信息而不是链接表 – 基本上是 de-尽可能标准化以降低表的复杂性。

总而言之，我还有 15 张桌子。

我可以轻松地将表编写到 SQLlite 中，并快速使用 IOS 中的 SQLlite C API 并让它正常工作。

我的问题是——对于一个包含大量相关表的失败的大型数据捕获应用程序，我应该坚持我的 SQL 技能并使用 SQLite 和 C API，还是将其全部转换为 coredata？

我对 coredata 的主要担心是 a) 设置时间——有没有办法从现有的数据库模式（SQL Server、SQLite 或脚本）创建 coredata 数据映射 b）如果我在一个表中有几千行（这是一个用于作业的库存物品清单）。我的理解是 coredata 检索该对象的所有项目，然后使用谓词过滤它们。这真的是它的工作原理，还是我误解了？如果它确实表现得像这样，这是否有效？c) 虽然我已经尽可能地扁平化了结构，但我仍然需要将 3 或 4 个表连接在一起——在核心数据中使用这样的关系是否有效？

我没有问题重新阅读 coredata 书籍然后应用它，如果它确实是这种场景的更好解决方案，只是我读过的所有书籍和示例都是 1 或 2 个具有单个关系的几个属性的实体. 我的数据库模式，所以我的 coredata 数据模型会比这复杂得多。另一个考虑因素是 - 与 sqllite 相比，核心数据在消耗休息服务或 JSON 以从服务器获取数据并将传输完成详细信息返回服务器方面是否提供任何优势？

* * *

请在下面查看我的经验：以防有人阅读这篇文章并想知道我作为 SQL Server/ASP.net 人员的经验....

我开始使用 SQLite，我发现它使用起来又快又容易。API 不是很好，但作为一个 SQL 人，这根本没有让我失望。

我能够通过对生成的脚本的小修改轻松地从 SQL Server 编写表结构脚本，让我很快就可以在 SQLite 中使用我的表结构

我开始在 asp.net 中访问，所以我对编写脚本和创建动态 SQL 字符串并不陌生。然而，我不再想使用这种方法，因为我觉得它已经过时了，所以虽然我使用 SQLite 检索数据可能有点矫枉过正，但我​​想将数据放入适当的对象中。我想创建对象数组并编辑对象的属性。它在目标 C 中对我来说更有意义。在 asp.net 中，我仍然不为我的数据创建对象，我使用 SQL Server 存储过程，因为我有一个非常复杂的数据结构，并且希望完全控制我查询的所有内容。

然而，创建用于包装表格的类需要 AGES数据表/实体/无论您喜欢如何称呼它们。

我在这里选择了核心数据。

您可能需要使用类别来扩展生成的类，但这实际上非常简单，而且非常酷，

coredata 的一大优势是 fetchedresults 控制器自动在表格视图中显示更改。因为我的应用程序有 2 或 3 个表视图，它们是分层的——比如在视图 2 中更改数据，然后返回到表视图、视图 1 并查看视图 1 中所做的更新，而无需手动重新加载数据非常酷。

谓词没问题。它们有足够的意义，请记住，无论您要获取什么对象，您都可以从该对象中横向关系-也很酷，如果有时有点混乱-我觉得这是一种完全倒退的 sql 思维方式。一旦你习惯了它，它就足够简单和强大了。一开始只是有点奇怪

NSManaged 对象（您存储在核心数据中的任何对象）及其子类都有自己的 managedobjectcontext - 即`self.managedObjectContext`轻松地显式保存任何更改，即：

```
self.name=@"james"
self.favouriteColour=@"blue"

NSError * error;
if ([self.managedObjectContext  save:&error]) {
    NSLog(@"saved");
} 
```

这比必须设置 sqlite 连接、命令和执行它们等要干净得多。

核心数据 API 比 SQLite API 干净得多（它是 c）。

猜我是一个皈依者！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:40:09.423

首先（你可能以前听说过）：*Core Data 不是数据库*。它是一个“具有生命周期、搜索和持久性功能的对象图管理器”，这篇文章比我更好地描述了这些差异：http: [//www.cocoawithlove.com/2010/02/differences-between-core-data-and。 .html](http://www.cocoawithlove.com/2010/02/differences-between-core-data-and.html) _

另请参阅[在 iPhone 上使用 CoreData 或 SQLite？](https://stackoverflow.com/questions/1318467/use-coredata-or-sqlite-on-iphone)以及其中的链接以获取可能有帮助的更多信息。

现在回答你的具体问题：

> a) 设置时间——有没有办法从现有的数据库模式（SQL Server、SQLite 或脚本）创建 coredata 数据映射

不，你必须首先创建一个 Core Data “模型”（使用 Xcode 模型编辑器）。模型由具有属性和与其他实体的关系的实体组成。Core Data 具有“持久存储”，可以是 SQLite 文件（但也可以是“内存中存储”）。Core Data 使用的模式和表没有正式记录。您*可以*尝试直接创建 SQLite Core Data 存储（格式不太复杂），但从 SQLite 迁移到 Core Data 最简单的方法可能是编写自己的代码来读取 SQLite 表并创建相应的 Core Data 对象.

> b）如果我在一个表中有几千行（这是用于工作的库存项目列表）。我的理解是 coredata 检索该对象的所有项目，然后使用谓词过滤它们。这真的是它的工作原理，还是我误解了？如果它确实表现得像这样，这是否有效？

你的理解不正确。Core Data 使用“获取请求”来获取数据，可选地由“谓词”过滤并按“排序描述符”排序。对于基于 SQLite 的存储，获取请求被转换为 SQL 查询并在 SQLite 级别执行。（这对可能的谓词施加了限制，并不是所有的 SQL 查询都可以通过获取请求进行。）只有获取的对象被加载到内存中。

> c) 虽然我已经尽可能地扁平化了结构，但我仍然需要将 3 或 4 个表连接在一起——在核心数据中使用这样的关系是否有效？

是的。

> ...与 sqllite 相比，核心数据在使用休息服务或 JSON 以从服务器获取数据并将传输完成详细信息放回服务器方面是否具有任何优势？

也许看看[RestKit](http://restkit.org)，它支持核心数据。但我对此并不熟悉，因此无法提供有关此问题的更多信息。

# php - 在 html 标签中使用 PHP 变量

> ID：15427989
> 
> 赞同：3
> 
> 时间：2013-03-15T08:43:57.697
> 
> 标签：php, html

我从 PHP 代码中得到一个变量，它是一个网页链接，并希望在 html 标记中使用它。例如：

```
<?php 
  $link;

  ...
  $link = $client->api();
?>
 <a href= "<?php $link ?>" > LINK </a> 
```

如何获取 html 标签中的链接值？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T08:47:57.527

您必须回显该值...另外，不要忘记转义它：

```
<a href="<?php echo htmlspecialchars($link, ENT_QUOTES, 'UTF-8'); ?>">LINK</a> 
```

从 PHP 5.4 开始，使用[短的开放标签](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)也是安全的：

```
<a href="<?= htmlspecialchars($link, ENT_QUOTES, 'UTF-8'); ?>">LINK</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T08:44:48.123

尝试这个 ：

```
<a href= "<?php echo $link; ?>" > LINK </a> 
```

呼应它`echo $link;`

或者，短手将是：

```
<a href= "<?= $link; ?>" > LINK </a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T09:20:39.403

如果您有 html 文件，则首先更改扩展名 .php 代替 .html

例如。你有 test.html 然后将其更改为 test.php

之后你使用相同的代码

```
<?php $link='http://stackoverflow.com' ?>

<a href= "<?php echo $link; ?>" > LINK </a> 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:47:03.757

或者简而言之：

```
<a href="<?= $link; ?>">LINK</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T08:51:09.850

这对我来说是工作，你必须在 HTML 标记中调用函数 (echo) ......那一切，祝你好运。

```
enter <a href= "<?php echo $link; ?>" > LINK </a> here 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T08:56:11.143

```
<a href= "<?php echo $link; ?>" > LINK </a> 
```

或者

```
<?php

echo '<a href= "'.$link.'"> LINK </a>';

?> 
```

# c# - 从 html 页面导航到 windows 8 xaml 页面

> ID：15427996
> 
> 赞同：0
> 
> 时间：2013-03-15T08:44:33.827
> 
> 标签：c#, windows-8, webview

Prolog：我有 c#/xaml 项目。在这个项目中，我有两个页面（**MainPage.xaml 和 SecondExamplePage**），MainPage 上有 MainWebView。在 mainPage.xaml.cs 我有简单的代码：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        MainWebView.Source = new Uri("ms-appx-web:///assets/physics/index.html");
    } 
```

当用户启动应用程序时，他会看到 html 页面（index.html），例如一张图片，仅此而已。（我现在，这是错误的方式，但客户想要这个）。

我需要做什么：当用户单击图像（在 index.html 页面上）时，**我需要在 SecondExamplePage.xaml 上导航我该怎么做？**我对 WebView.ScriptNotify 和 WebView.InvokeScript 很感兴趣，但我不明白这些方法是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:25:58.107

在您的 HTML 页面中，您的图像标签将如下所示：

```
<img src="./image.png" onclick="external.notify('gotoPage2')" /> 
```

在您的 C# 代码中：

```
 public MainPage()
    {
        this.InitializeComponent();
        MainWebView.ScriptNotify += WebView_ScriptNotify;
    }

    void MainWebView_ScriptNotify(object sender, NotifyEventArgs e)
    {
        if (e.Value == "gotoPage2")
            this.Frame.Navigate(typeof(Page2));
    } 
```

[XAML Web 视图控件](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)示例也可以在这里为您提供帮助。