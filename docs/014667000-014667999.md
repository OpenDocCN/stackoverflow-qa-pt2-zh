# StackOverflow 问答 14667000-14667999

# python - 了解 Python 的虚拟环境

> ID：14667005
> 
> 赞同：8
> 
> 时间：2013-02-02T22:03:43.593
> 
> 标签：python, unix, virtualenv

我一直在阅读虚拟环境，它似乎是一个非常有用的工具，但现在我质疑到目前为止我是如何设置整个 python 环境的。现在，我安装的所有模块和包都驻留在这个目录中：

```
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages 
```

但是 virtualenv 文档似乎暗示这种通用系统安装是一件坏事。如果是这种情况，那么我应该如何处理我当前的模块以及我应该如何安装未来的模块？例如，我最近使用以下命令从我的用户目录安装了烧瓶：

```
pip install flask 
```

它现在驻留在站点包中。我应该做一些不同的事情吗？我的文档有问题，这似乎表明我需要进入项目目录，设置虚拟环境，并使用 virtualenv 安装我需要的所有模块。是这样吗？有什么办法可以让事情变得不那么麻烦吗？似乎为每个项目目录安装潜在的几十个包会有点多。

还是我只需要为使用旧版本模块的项目创建虚拟环境，而不是我在系统目录中安装的那些？但是，如果是这种情况，那么似乎阻止所有系统安装的 virtualenv 口头禅是怎么回事？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T22:18:28.023

如果您已经像这样安装了 virtualenv：

```
pip install virtualenv 
```

然后，您需要设置一个特定的 virtualenv 文件夹：

```
virtualenv [your project folder name] 
```

这将创建包含一些重要子目录的项目文件夹。

在安装任何新东西之前，您将首先激活您的 virtualenv，新安装的模块只有在“源”到您的 virtualenv 时才对您可用。从您的项目文件夹类型：

```
source bin/activate 
```

然后，您将在每个终端行的括号中看到您的 virtualenv 名称。这表明您已被“采购”。现在使用 pip 或 easy_install 安装东西。

```
pip install flask 
```

virtualenv 基本上将您的路径设置为在 [venv 文件夹]/bin 中查找可执行文件，而不是 /usr/local/bin 或其他任何内容。因此，您可以将文件直接复制到您的虚拟环境 bin 文件夹中。（例如，MongoDB 文件只是一个 zip/tar 文件，您可以将它们解压缩到您的 venv bin 文件夹中，当“来源”进入时，您将可以访问该特定版本的 MongoDB。）自己尝试，运行此命令你的虚拟环境，然后是默认环境，看看它是如何变化的。

```
echo $PATH && echo $PYTHONPATH 
```

要退出您的 virtualenv：

```
deactivate 
```

键入此内容将使您回到默认环境。

如果你还没有读过这篇文章，这是一个很好的资源。

[https://python-guide.readthedocs.org/en/latest/dev/virtualenvs/](https://python-guide.readthedocs.org/en/latest/dev/virtualenvs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:53:37.453

在您将任何东西投入/支持生产之前，virtualenv 的好处是微乎其微的。这只是激活virtualenv的一个额外步骤，当然你必须在每个virtualenv中安装你的标准环境..并没有那么多额外的努力......

但是，当您将某些东西投入生产时，当事情在晚上发生颠簸时，这可能是一个巨大的胜利:-)

# actionscript-2 - 如何在 Actionscript 2.0 中让一个简单的弹跳球从墙上弹起

> ID：14667008
> 
> 赞同：0
> 
> 时间：2013-02-02T22:04:05.200
> 
> 标签：actionscript-2

这对我来说似乎很简单，但我的解决方案不起作用。我做了一个小程序，我最大和最先进的程序，但仍然是一个小程序。它只是一个从地板弹起并慢慢耗尽能量的球。我让它能够通过按 SPACE 重新开始弹跳，并且可以通过按箭头键改变方向，使用非常简单的速度计算（实际上非​​常简单）。

这是我的问题，我对编程很陌生，这只是我的第二天，我需要一种方法来将球从舞台的侧壁反弹。

```
onClipEvent(load){
velocity = 0 //Vertical Velocity, is increased and decreased by the effects of gravity and bouncing with SPACE
sideVel =0 //Side Velocity, increases when the arrow keys are pressed, decreases over time
gravity = 2 //Gravity, constant force that never changes
}
onClipEvent(enterFrame){
_x += sideVel //Moves the ball the value of Side Velocity
if (Key.isDown(Key.LEFT)) {
    sideVel -= 2 //Technically decreases Side Velocity, but really increases it in another direction
}
else {
    if(sideVel<0) { //If the button isn't being pressed Side Velocity returns to 0 over time
    sideVel += 1
    }
}
if (Key.isDown(Key.RIGHT)) {
    sideVel += 2 //Increases Side Velocity
}
else {
    if(sideVel>0) //If the button isn't being pressed Side Velocity returns to 0 over time
    sideVel -= 1
}
if (sideVel < -20){ //Side Velocity isn't allowed to go below this number
    sideVel +=2 //So we add 2
}
if (sideVel > 20) { //Same as above
    sideVel -=2
}
velocity += gravity //Regular Velocity increases by 2 every frame
_y += velocity //mcMain moves at the speed of its velocity
if(_y>=Stage.height){
if(Key.isDown(Key.SPACE)){
    velocity=-28 //Sets Velocity to -28, pretty much the same as doing a jump
}
else {
_y = Stage.height
velocity *= -0.9 //Reverses mcMain's velocity, so it bounces back into the air at a slightly slower speed
}
/*Here's the problem
if(_x>=Stage.width - 25){
    _x=Stage.width - 25
sideVel *= -1
}
if(_x<=Stage.width - 550){
    _x=Stage.width - 550
sideVel *= -1
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:12:39.033

当 MC（等等）撞到墙上时，您必须手动更改它的位置，`MC.x++`以免碰撞多次发生。此外，使用`while`语句代替`if`墙壁碰撞将确保球不会穿过墙壁。

# javascript - 限制事件监听器每秒可以触发的次数

> ID：14667010
> 
> 赞同：7
> 
> 时间：2013-02-02T22:04:52.933
> 
> 标签：javascript

我正在使用 Gamepad API - 特别是使用控制器上的操纵杆的轴。这些位置经常更新 - 因此，我正在听的事件（棒上的移动）也发生了很多。有没有办法将它限制在每秒 25 次以减少延迟？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T22:08:49.183

您无法限制触发 JavaScript 事件的速率，但您的事件处理程序可以选择对某些调用不执行任何操作。这是一个使用示例`mousemove`（我不知道您在谈论哪个 Gamepad API）：

```
var lastMove = 0;
document.addEventListener('mousemove', function() {
    // do nothing if last move was less than 40 ms ago
    if(Date.now() - lastMove > 40) {
        // Do stuff
        lastMove = Date.now();
    } 
}); 
```

[http://jsfiddle.net/jk3Qh/](http://jsfiddle.net/jk3Qh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:19:17.323

你可以做这样的事情，检查你的事件在 1 秒间隔内被调用的频率以及你是否处理它。代码示例，我在想什么的粗略轮廓（没有保证（像那个拼写））。

```
function process_event() {
var curr = new Date().getTime();
if ((curr - timeObj.last) < 1000) { //One Second 
     if (timeObj.counter > 25) {
        for (var x=0;x<timeObj.times;x++) {
             if ((curr - timeObj.times[x]) >= 1000) {
                   timeObj.times.splice(x, 1);
                   timeObj.counter -= 1;
             }
        }
     }
     else { 
         timeObj.counter += 1;
         timeObj.times[timeObj.times.length()-1] = curr;
     }
}
else {
    timeObj.counter = 0;
    timeObj.times = [];
}
if (timeObj.counter > 25) {
    return False
 }  
 else {
   return True
 } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T22:07:43.453

初始化一个变量，该变量在每次事件侦听器激活时递增。使事件侦听器输出的函数仅在变量低于 25 时发生。

# c++ - Qt LNK2019 基本 Qt5 应用程序出错

> ID：14667011
> 
> 赞同：4
> 
> 时间：2013-02-02T22:04:53.983
> 
> 标签：c++, qt, compiler-errors, qt5, lnk2019

我正在尝试在线学习教程并使用 QtCreator 2.6.1 学习 Qt5

但是，我尝试按照本教程编写一个基本应用程序，但每当我尝试构建项目时，我都会收到链接错误：

```
#include <QtWidgets/QApplication>
#include <QtWidgets/QLabel>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QLabel *label = new QLabel("Hello World");
    label->show();

    return app.exec();
} 
```

单击“构建”后，我会收到大约 50 个错误，结果类似于以下内容：

```
main.obj:-1: error: LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall QApplication::~QApplication(void)" (__imp_??1QApplication@@UAE@XZ) referenced in function _main
main.obj:-1: error: LNK2019: unresolved external symbol "__declspec(dllimport) public: static int __cdecl QApplication::exec(void)" (__imp_?exec@QApplication@@SAHXZ) referenced in function _main
main.obj:-1: error: LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall QWidget::show(void)" (__imp_?show@QWidget@@QAEXXZ) referenced in function _main 
```

有没有办法通过链接库等来解决这个问题（假设它们没有正确链接）？如果没有，我还能做些什么来尝试解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T11:15:17.470

this a linker fault that can't link object files together, first delete all the `build directory`, then check that this line was added to your `.pro` file:

```
QT += core gui widgets 
```

this should work, if gets fail again, you must give more information about your compiler and their `search path`, plus post your `.pro` file content here.

# html - 如何在 HTML 的下标中使用预定义的变量

> ID：14667013
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:05:18.693
> 
> 标签：html, google-maps, variables

我有这个代码：

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">          
</script>
<script type="text/javascript">
var directionDisplay;
var map;

function initialize() {
directionsDisplay = new google.maps.DirectionsRenderer();
var copenhagen = new google.maps.LatLng(55.6771, 12.5704);
var myOptions = {
    zoom:12,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: copenhagen
}

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
directionsDisplay.setMap(map);
}

var directionsService = new google.maps.DirectionsService();

function calcRoute() {
var start = document.getElementById("start").value;
var end = document.getElementById("end").value;
var distanceInput = document.getElementById("distance");

var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        distanceInput.value = response.routes[0].legs[0].distance.value / 1000;
    }
});
}
</script>

<title>Distance Calculator</title>

<style type="text/css">

        body {
            font-family:Helvetica, Arial;
        }
        #map_canvas {
            height: 50%;
        }
</style>
</head>
<body>

<body onload="initialize()">
<p>Enter your current location and desired destination to get the distance</p>
    <div>
        <p>
            <label for="start">Start: </label>
            <input type="text" name="start" id="start" />
<br>
            <label for="end">End:  </label>
            <input type="text" name="end" id="end" />

            <input type="submit" value="Calculate Route" onclick="calcRoute()" />
        </p>
        <p>
<script>

                 var cost=distance*2-(distance*2*0.20)

                 document.write("Cost: ");
                 document.write(cost + "<br>");

</script>
    </p>
    </div>
    <div id="map_canvas"></div>
</body>
</html> 
```

问题中的代码是这样的：

```
<script>

                 var cost=distance*2-(distance*2*0.20)

                 document.write("Cost: ");
                 document.write(cost + "<br>");

</script> 
```

此代码要求用户提供起始地址和目标地址，并使用 Google Maps API 计算两点之间的距离。然后，我添加了功能，使用他们的区域统一费率公式（距离以公里为单位）*2-20% 计算出租车行驶该距离所需的费用。

我的问题在于“距离”变量是在 API 代码中定义的，所以当我在计算成本时引用它时，它似乎并没有延续......就像它甚至不存在一样。我知道这与它在与尝试使用它的下标不同的下标中定义有关。任何和所有的建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:32:36.670

我想这就是你要找的。希望能帮助到你。

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">          
</script>
<script type="text/javascript">
var directionDisplay;
var map;

function initialize() {
directionsDisplay = new google.maps.DirectionsRenderer();
var copenhagen = new google.maps.LatLng(55.6771, 12.5704);
var myOptions = {
    zoom:12,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: copenhagen
}

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
directionsDisplay.setMap(map);
}

var directionsService = new google.maps.DirectionsService();

function calcRoute() {
var start = document.getElementById("start").value;
var end = document.getElementById("end").value;
var distanceInput = document.getElementById("distance");

var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        distanceInput.value = response.routes[0].legs[0].distance.value / 1000;

        var cost=distanceInput.value*2-(distanceInput.value*2*0.20)
        var costDiv = document.getElementById("cost");
        costDiv.style.display = "";
        costDiv.innerHTML = "Cost: "+cost + "<br>";
    }
});
}
</script>

<title>Distance Calculator</title>

<style type="text/css">

        body {
            font-family:Helvetica, Arial;
        }
        #map_canvas {
            height: 50%;
        }
</style>
</head>
<body>

<body onload="initialize()">
<p>Enter your current location and desired destination to get the distance</p>
    <div>
        <p>
            <label for="start">Start: </label>
            <input type="text" name="start" id="start" />
<br>
            <label for="end">End:  </label>
            <input type="text" name="end" id="end" />
            <input type="hidden" name="distance" id="distance" >
            <input type="submit" value="Calculate Route" onclick="calcRoute()" />
            <div style="display:none;" id="cost"></div>
        </p>
        <p>

    </p>
    </div>
    <div id="map_canvas"></div>
</body>
</html> 
```

**编辑：**这是获得最小距离和与之相关的成本的方法。首先，您必须向 Google Maps API provideRouteAlternatives = true 发出请求，否则您将只能获得一条路线作为响应。其次，我确实认为谷歌正在返回按距离升序排序的路线 - 对此并不完全确定，但您可以假设第一条路线**是**距离最短的路线。无论如何，这是做你想做的事情的一种方法。

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">          
</script>
<script type="text/javascript">
var directionDisplay;
var map;

function initialize() {
directionsDisplay = new google.maps.DirectionsRenderer();
var copenhagen = new google.maps.LatLng(55.6771, 12.5704);
var myOptions = {
    zoom:12,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: copenhagen
}

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
directionsDisplay.setMap(map);
}

var directionsService = new google.maps.DirectionsService();

function calcRoute() {
var start = document.getElementById("start").value;
var end = document.getElementById("end").value;
var distanceInput = document.getElementById("distance");

var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING,
    provideRouteAlternatives: true
};

directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        if(response.routes[0] != undefined && response.routes[0].legs[0] != undefined) {
            /* Take the min distance route */
            / * Assume the first distance is the shortest */
            var lowestDistance = response.routes[0].legs[0].distance.value;
            for(var i =0; i<response.routes.length;i=i+1) {
            console.log(response.routes[i].legs[0].distance.value);
                if(lowestDistance <= response.routes[i].legs[0].distance.value) {
                    lowestDistance = response.routes[i].legs[0].distance.value;
                    directionsDisplay.setDirections(response);
                    distanceInput.value = response.routes[i].legs[0].distance.value / 1000;

                    var cost=distanceInput.value*2-(distanceInput.value*2*0.20)
                    var costDiv = document.getElementById("cost");
                    costDiv.style.display = "";
                    costDiv.innerHTML = "Cost: "+cost + "<br>";
                }
            }
        }
    }
});
}
</script>

<title>Distance Calculator</title>

<style type="text/css">

        body {
            font-family:Helvetica, Arial;
        }
        #map_canvas {
            height: 50%;
        }
</style>
</head>
<body>

<body onload="initialize()">
<p>Enter your current location and desired destination to get the distance</p>
    <div>
        <p>
            <label for="start">Start: </label>
            <input type="text" name="start" id="start" />
<br>
            <label for="end">End:  </label>
            <input type="text" name="end" id="end" />
            <input type="hidden" name="distance" id="distance" >
            <input type="submit" value="Calculate Route" onclick="calcRoute()" />
            <div style="display:none;" id="cost"></div>
        </p>
        <p>

    </p>
    </div>
    <div id="map_canvas"></div>
</body>
</html> 
```

# iphone - 绘制在末端消失的 UIBezierPath（渐变）

> ID：14667014
> 
> 赞同：8
> 
> 时间：2013-02-02T22:05:22.937
> 
> 标签：iphone, ios, ipad, drawing, uibezierpath

我正在尝试绘制一个`UIBezierPath`在两端淡出的 - 从 alpha`0`到`1`然后回到`0`. 我基本上希望能够**从内部在 UIBezierPath 中绘制渐变`drawRect`**。

编辑：这是我想要达到的效果：

![在此处输入图像描述](../Images/7ebfc023fba1d56f74cfcbd99b5e8b97.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:16:36.210

怎么用`-strokeWithBlendMode:alpha:`？

结合某种不断增加/减少 alpha 值直到达到 1 的循环（并且增量确定“褪色”段的长度）应该可以工作。

看[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)

# java - 复合组件背景/透明度

> ID：14667017
> 
> 赞同：2
> 
> 时间：2013-02-02T22:05:38.610
> 
> 标签：java, swing

我正在开发的这个组件有视觉问题。它`JPanel`带有 2 个 JTextField 和 2 个 JLabels。我无法制作坚实的背景。我尝试了几种不透明/背景颜色组合，但没有成功。

我不允许附加图片，所以示例图片在[这里](http://postimage.org/image/7t89j9wl7/)！：

请问有什么帮助吗？

```
package javaapplication1;

import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FontMetrics;
import java.awt.Rectangle;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class JavaApplication1 {

public static void main(String[] args) {
    try {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (Exception e) {
    }
    JFrame testFrame = new JFrame("Test Frame");
    testFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    JDecimal decimal = new JDecimal();
    decimal.setPreferredSize(new Dimension(300, 100));
    testFrame.setLayout(null);
    testFrame.getContentPane().add(decimal);
    decimal.setSize(80, 25);
    testFrame.setLocationRelativeTo(null);
    testFrame.setSize(300, 200);
    testFrame.setVisible(true);
}

public static class JDecimal extends JPanel {

    private String currencyString = "00";
    private java.text.DecimalFormat format = (java.text.DecimalFormat) java.text.DecimalFormat.getInstance();
    JTextField integerField = new JTextField();
    JLabel comaLabel = new JLabel();
    JTextField fractionField = new JTextField();
    JLabel plusMinusLabel = new JLabel();
    JDecimalLayout JDecimalLayout = new JDecimalLayout();

    public JDecimal() {
        init();
    }

    public String getText() {
        return integerField.getText() + "." + fractionField.getText();
    }

    private void init() {
        this.setLayout(JDecimalLayout);
        this.add(integerField);
        this.add(fractionField);
        this.add(comaLabel);
        this.add(plusMinusLabel);
        integerField.setText("0");
        integerField.setHorizontalAlignment(JTextField.RIGHT);
        comaLabel.setText(format.getDecimalFormatSymbols().getDecimalSeparator() + "");
        fractionField.setText(currencyString);
        plusMinusLabel.setText("");
        format.setDecimalSeparatorAlwaysShown(true);
        // borders
        javax.swing.border.Border b = integerField.getBorder();
        integerField.setBorder(null);
        fractionField.setBorder(null);
        comaLabel.setBorder(null);
        plusMinusLabel.setBorder(null);
        this.setBorder(b);
    }

    public void reshape() {
        invalidate();
        validate();
    }

    private class JDecimalLayout implements java.awt.LayoutManager {

        public void addLayoutComponent(String name, Component comp) {
        }

        public void layoutContainer(Container parent) {
            Rectangle r = parent.getBounds();
            FontMetrics fm = parent.getFontMetrics(integerField.getFont());
            int sirinaSlova = fm.stringWidth("0");
            plusMinusLabel.setBounds(new Rectangle(r.width - sirinaSlova - 2, 2, sirinaSlova, r.height - 4));
            fractionField.setBounds(new Rectangle(r.width - sirinaSlova - 2 - sirinaSlova * 2, 2, sirinaSlova * 2 + 1, r.height - 4));
            comaLabel.setBounds(new Rectangle(r.width - 2 - sirinaSlova - sirinaSlova * 2 - sirinaSlova, 0, sirinaSlova, r.height));
            integerField.setBounds(new Rectangle(2, 2, comaLabel.getBounds().x - 2, r.height - 4));
        }

        public Dimension minimumLayoutSize(Container parent) {
            return parent.getPreferredSize();
        }

        public Dimension preferredLayoutSize(Container parent) {
            return parent.getPreferredSize();
        }

        public void removeLayoutComponent(Component comp) {
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T23:48:54.177

您不能只设置 JLabel 的背景，因为默认情况下它是不透明的。因此，您需要执行以下操作：

```
label.setOpaque(true); 
label.setBackground(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T22:27:12.530

1.  要在 a 上拥有扎实的背景`JPanel`，您所需要的只是调用`setBackground()`它。例如在您的`init()`, 调用中`setBackground(Color.WHITE);`（默认情况下所有`JPanel`都是不透明的）
2.  不要使用`null`布局。
3.  不要`setPreferredSize()`在任何地方打电话
4.  如果`LayoutManager`在方法中实现 a ，`preferredLayoutSize()`则无法返回，`parent.getPreferredSize();`因为它正是需要计算的（它会创建一个无限循环）。
5.  您可以使用 a[`JFormattedTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)来实现完全相同的行为并且减少 100 行。
6.  始终在 EDT 中启动您的 UI（使用`SwingUtilities.invokeLater`）

无论如何，这是您的代码的固定版本：

```
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class JavaApplication1 {

    public static void main(String[] args) {
        try {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
        }
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame testFrame = new JFrame("Test Frame");
                testFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                JDecimal decimal = new JDecimal();
                testFrame.setLayout(new GridBagLayout());
                testFrame.getContentPane().add(decimal, new GridBagConstraints());
                testFrame.pack();
                testFrame.setLocationRelativeTo(null);
                testFrame.setVisible(true);
            }
        });
    }

    public static class JDecimal extends JPanel {

        private String currencyString = "00";
        private java.text.DecimalFormat format = (java.text.DecimalFormat) java.text.DecimalFormat.getInstance();
        JTextField integerField = new JTextField();
        JLabel comaLabel = new JLabel();
        JTextField fractionField = new JTextField();
        JLabel plusMinusLabel = new JLabel();

        public JDecimal() {
            init();
        }

        public String getText() {
            return integerField.getText() + "." + fractionField.getText();
        }

        private void init() {
            this.setLayout(new GridBagLayout());
            integerField.setColumns(10);
            fractionField.setColumns(2);
            this.add(plusMinusLabel, new GridBagConstraints());
            this.add(integerField, new GridBagConstraints());
            this.add(comaLabel, new GridBagConstraints());
            this.add(fractionField, new GridBagConstraints());
            integerField.setText("0");
            integerField.setHorizontalAlignment(JTextField.RIGHT);
            comaLabel.setText(String.valueOf(format.getDecimalFormatSymbols().getDecimalSeparator()));
            fractionField.setText(currencyString);
            plusMinusLabel.setText(" ");
            format.setDecimalSeparatorAlwaysShown(true);
            // borders
            javax.swing.border.Border b = integerField.getBorder();
            integerField.setBorder(null);
            fractionField.setBorder(null);
            comaLabel.setBorder(null);
            plusMinusLabel.setBorder(null);
            this.setBorder(b);
            setBackground(Color.WHITE);
        }

    }
} 
```

# colors - 使 VimOrganizer 中的链接可见（vimscript 和颜色）

> ID：14667018
> 
> 赞同：0
> 
> 时间：2013-02-02T22:06:03.727
> 
> 标签：colors, vim

VimOrganizer 似乎工作正常，除了所有链接都是黑屏上的黑色文本。至少，我认为它们是——我在 using 中输入它们`[[wikiword brackets]]`，然后在离线时，只有在我视觉上突出显示它们时才能看到它们。

我想我需要[对此文件](https://github.com/hsitz/VimOrganizer/blob/master/ftplugin/org.vim)进行调整，但我没有看到任何明显的将链接设置为黑色的东西。所以也许我走错了树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:10:34.547

这不是颜色问题——而是压缩链接问题。`<leader>lx`使链接“未压缩”，因此可见。

# java - 捕获字符串和数字的正则表达式

> ID：14667019
> 
> 赞同：0
> 
> 时间：2013-02-02T22:06:20.270
> 
> 标签：java, regex, json

我正在尝试为以下内容获取正则表达式：

`{"Place": "DENMARK", "ID": "9513436", "trains_used": 3, "Current": "_ ___ ____"}`

得到这样的输出：

`DENMARK 9513436 3 "_ ___ ____"`

但我不知道如何捕捉整个单词。任何人都可以给我这个正则表达式吗？

编辑：是的，它是一个 JSON 字符串。但我不知道 JSON 编辑：我正在尝试在 Java 中使用 string.split()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:32:56.847

```
String teststr = "{\"Place\": \"DENMARK\", \"ID\": \"9513436\", \"trains_used\": 3, \"Current\": \"_ ___ ____\"}";

String regex = ".*?: \"(.*?)\".*?: \"(.*?)\".*?: (.*?),.*?: (\".*?\")";
Pattern p = Pattern.compile(regex);
Matcher m = p.matcher(teststr);

if (m.find()) {
    System.out.println(m.group(1) + " " + m.group(2) + " " + m.group(3) + " " + m.group(4));
} 
```

# iphone - XCode iO6：UIWebView从选择照片返回后返回黑屏

> ID：14667023
> 
> 赞同：1
> 
> 时间：2013-02-02T22:07:04.560
> 
> 标签：iphone, ios, xcode, uiwebview, ios6

以下是导致我的应用程序返回黑屏的事件序列：

1.) 我通过应用程序的 UIWebView 在我的网站上选择一个按钮，该按钮允许我更改我的个人资料图片。

2.) 应用程序从屏幕底部拉出三个标准选项：“拍照或录像”、“选择现有”、“取消”

3.) 如果我选择前两个选项中的任何一个，然后选择或拍照，我的应用程序将返回并显示黑屏。个人资料图片未更改。我还注意到控制台窗口中出现以下消息：“对 UIFileUploadFallbackRootViewController 的开始/结束外观转换的不平衡调用：0x1c590e60。”

奇怪的是，当从我的应用程序的 UIWebView 访问时，这个移动网站的“加载照片”功能可以正常工作。我在升级到 iOS6 后第一次注意到这个问题。关于可能发生的变化或我现在需要从我的网站或应用程序中适应的任何想法？

提前感谢您提供的任何帮助！

2/17/13 更新：

移动网站上用于加载照片的 HTML 代码：

```
<form class="appnitro" enctype="multipart/form-data" method="post" action="mysite.php">
<input id="file1" name="file1" class="button_text" type="file" size="50px"/> <br />
<input id="submitpic" class="button_text" type="submit" name="submit" value="Save Picture" />
</form> 
```

注意：使用 jquery 移动。此外，如果使用 Safari 访问移动网站，上传照片功能也可以正常工作。仅当尝试从应用程序中使用 UIWebView 上传新照片时才会显示黑屏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T16:14:41.840

似乎是因为未设置 rootViewController。

你可能有一个警告：“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”

确保你有这样的东西：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 

// Override point for customization after app launch 

_window.rootViewController = myViewController;

...
} 
```

# r - 如何在 R 中指定决策树中的叶节点或终端节点的数量

> ID：14667025
> 
> 赞同：-2
> 
> 时间：2013-02-02T22:07:06.193
> 
> 标签：r, tree, decision-tree, party

**有没有办法使用R**中的派对包来限制最大节点或树的复杂性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:13:58.147

快速谷歌搜索找到了[该`party`包的文档，其中一页描述了如何限制深度](http://cran.r-project.org/web/packages/party/party.pdf#page=10)（使用`maxdepth`参数）。

希望这可以帮助！

# meteor - Meteor：在开发服务器上将多个 CSS 和 Javascript 文件聚合为一个？

> ID：14667028
> 
> 赞同：4
> 
> 时间：2013-02-02T22:07:46.543
> 
> 标签：meteor

Meteor 在开发服务器上使用单独的 CSS 和 JS 文件，并在生产服务器上合并和缩小它们。有没有办法强制它组合和缩小开发服务器（localhost）上的所有 JS/CSS，至少在部署之前检查组合文件是否正常工作？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-02T17:25:06.297

```
> meteor run --production 
```

[`meteor run`](http://docs.meteor.com/#meteorrun)现在有一个`production`标志：

```
Usage: meteor run [options]
Options:
  --port, -p    Port to listen on. NOTE: Also uses port N+1 and N+2\.         [default: 3000]
  --production  Run in production mode. Minify and bundle CSS and JS files.  [boolean] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:58:51.323

Presently, no. You can `meteor deploy --debug` to leave the files unminified in production, but there is no 'combine but don't minify' command within meteor at this time.

Per the [docs](http://docs.meteor.com/#commandline):

> You can deploy in debug mode by passing --debug. This will leave your source code readable by your favorite in-browser debugger, just like it is in local development mode.

If you simply want to combine multiple javascript files into one, [here are some ideas](https://stackoverflow.com/questions/5511989/combine-multiple-javascript-files-into-one-js-file).

# jquery - jQuery UI - 如何计算可拖动的“包含”的自定义值？添加了jsfiddle

> ID：14667029
> 
> 赞同：2
> 
> 时间：2013-02-02T22:07:59.360
> 
> 标签：jquery, jquery-ui

我有一个小容器和一个大的、可变大小的（图像是用户提交的）图像，我希望它是可拖动的。我正在使用 jQuery UI 的“可拖动”功能进行垂直拖动并且效果很好，但我遇到的唯一问题是您可以将图像向上或向下拖动得足够远，以便显示其边缘并且您可以看到上面的空白区域或在容器下方。我希望它能够工作，例如，当图像的底部边缘碰到容器的底部边框时，您不能再将其向上拖动。

我正在尝试使用

```
{ containment:[x1, y1, x2, y2] } 
```

使这项工作的选项，经过大量试验和错误后，我可以计算出不同大小图像的正确值，但我无法弄清楚图像大小与包含值之间的函数关系。任何人都可以帮助我，或者指出正确的方向，图像大小和包含应该有什么样的关系？容器的大小固定为 360x240。非常感谢。

JSfiddle： http: [//jsfiddle.net/Ey74c/](http://jsfiddle.net/Ey74c/)我不希望容器内的任何空白区域显示 - 即，您不能将图像向上或向下拖动到足够远的地方来让这种情况发生。我尝试设置遏制：“父母”，它不再滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:39:57.427

要解决此问题，您应该使用：`{ containment:[x1, y1, x2, y2] }`

```
$("#container img").draggable({
    containment: [(parseInt($("#myImage").width()) - parseInt($("#container").width())) * -1, 
                  (parseInt($("#myImage").height()) - parseInt($("#container").height())) * -1, 0, 0]
}); 
```

[jsFiddle](http://jsfiddle.net/Ey74c/6/)

`x1`= - (img.width - container.width)

`y1`= - (img.height - container.height)

`x2`= 0

`y2`= 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:58:38.473

添加`id`您的图像并`containment`像这样使用：http: [//jsfiddle.net/Ey74c/2/](http://jsfiddle.net/Ey74c/2/)

```
<div id="container">
    <img id="myImage" src="http://www.petfinder.com/wp-content/uploads/2012/11/99059361-choose-cat-litter-632x475.jpg"
    />
</div>

$("#container img").draggable({
    containment: [$('#myImage').width() * -1, $('#myImage').height() * -1, 0, 0]
}); 
```

# java - System.out.printf 带有十进制坐标和多个文本

> ID：14667030
> 
> 赞同：0
> 
> 时间：2013-02-02T22:08:03.177
> 
> 标签：java, printf

我一直在这里搜索，似乎找不到什么可以帮助我修复我的代码。

当用户输入 2 和 2 时，我试图输出 pring (2.0, 2.0)。我注释掉了需要帮助的代码。我想使用 printf 来获得我的结果。除了错误，我什么也得不到。
我的假设是问题出在我必须在文本之间打印 (2.0, 2.0) 的位置，但是我无法解决我的错误。

```
import java.util.Scanner;

public class prtest {

    // checks to see if radom point entered by user is within rectangle
    // rectangle is centered at (0,0) and has a width of 10 and height of 5

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);

        System.out.print("Enter a point with two coordinates: ");
        int x = input.nextInt();
        int y = input.nextInt();

        double hDistance = Math.pow(x * x, 0.5f);// heigth distance

        double vDistance = Math.pow(y * y, 0.5f);// vertical distance

        if ((hDistance <= 10 / 2) && (vDistance <= 5.0 / 2))

            System.out
                    .print("Point (" + x + ", " + y + ") is in the rectangle");

        // System.out.printf("Point ( %1f", ", " + y + ") is in the rectangle");

        else
            System.out.print("Point (" + x + ", " + y
                    + ") is not in the rectangle");

        // System.out.printf("Point ( %1f", ", " + y +
        // ") is not in the rectangle");

    }// end main
}// end prtest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:11:57.333

您`System.out.printf`以错误的方式使用该方法。您的方法应该像这样使用它：

```
System.out.printf("Point (%.1f, %.1f) is in the rectangle", x*1.0, y*1.0);
//...
System.out.printf("Point (%.1f, %.1f) is not in the rectangle", x*1.0, y*1.0); 
```

或者更好的是，您可以将点作为整数处理

```
System.out.printf("Point (%d, %d) is in the rectangle", x, y);
//...
System.out.printf("Point (%d, %d) is not in the rectangle", x, y); 
```

了解 og 用法的更多信息`System.out.printf`：[格式化字符串语法](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:21:18.853

以下似乎对我有用。

System.out.printf("Point , ('%1.1f', '%1.1f') 在矩形内", (double) x, (double) y);

# eclipse - 在 Eclipse 中保存文件时自动运行应用程序

> ID：14667034
> 
> 赞同：0
> 
> 时间：2013-02-02T22:08:22.193
> 
> 标签：eclipse, mysqldump

每次我在 eclipse 中的项目中保存文件时，我都希望能够运行应用程序。

在我的情况下，我希望能够运行 mysqldump 在项目目录中制作数据库转储文件（包括模式），以便 GIT 可以跟踪它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:19:00.567

做这样的事情的最简单方法：

1.  创建一个 ant 脚本，其中包含要运行的命令的任务。把它放在你的项目中
2.  右键单击项目
3.  `Builders`在左侧选择
4.  点击`New`
5.  选择`Ant Builder`并按下`Ok`
6.  对于`Buildfile`，用于`Browse Workspace...`查找脚本。
7.  用于`Base Directory`选择`Browse Workspace...`项目目录
8.  如果脚本修改了项目中的任何资源，切换到`Refresh`Tab 并选择受影响的资源/目录
9.  切换到`Targets`选项卡 - 为每个构建阶段选择要运行的目标
10.  切换到`Build Options`- 选择应该触发脚本的资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:14:40.793

有一个旧线程涵盖了它： [Eclipse：保存时执行程序](https://stackoverflow.com/questions/1012230/eclipse-on-save-execute-a-program)

TL;DR：让建造者来做这件事。它不像在程序自动构建时那样在“保存”上做一些事情，在大多数情况下应该是同一件事。

它还包括制作一个简单的插件来做到这一点，但这可能是矫枉过正

# excel - VBA For Excel AfterRefresh 事件

> ID：14667035
> 
> 赞同：3
> 
> 时间：2013-02-02T22:08:25.380
> 
> 标签：excel, vba

我正在使用以下 QueryTable 查询。执行后`.Refresh`，VBA 过程结束。查询有效，但我需要在完成后执行代码。

该`.AfterRefresh`事件似乎是我需要的，但我无法执行。

```
With ActiveSheet.QueryTables.Add(Connection:="URL;" & sUrl, Destination:=ActiveSheet.Range("a1"))

             .RefreshStyle = xlOverwriteCells
             .SaveData = True
             .Refresh
             .AfterRefresh (Success)
End With 
```

这是不执行的 AfterRefresh 子程序。

```
Sub QueryTable_AfterRefresh(Success As Boolean)

        If Success Then
                 Debug.Print "Success"
        Else
                 Debug.Print "Failed"
        End If
End Sub 
```

查询完成后触发子程序需要什么？我尝试在 End With 之后和之后调用子例程，`.Refresh`但都没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T23:04:53.393

请确保您的`QueryTable_AfterRefresh`子不是放在模块中，而是放在工作表/工作簿下，与此处相同：[https](https://stackoverflow.com/a/14646261/1953175) ://stackoverflow.com/a/14646261/1953175此外，您不需要调用事件，`.AfterRefresh (Success)`从您的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-09T00:26:41.457

我最近遇到了同样的问题，很难找到一个好的答案。我意识到这个线程很旧，但是对于发布的其他解决方案有一个不错的替代方案。

您可以利用的一种模式是将 QueryTable 回调事件保存在单独的**类模块**中，而不是嵌入工作表中。这允许更多模块化、可重用的代码。当您的 Excel 工作簿有多个 QueryTables 时，它变得特别有用。

**这是类模块在名为CQtEvents**的类模块中的样子

 **```
Option Explicit

Private WithEvents mQryTble As Excel.QueryTable
' Add variables you may want to cache here such at the query or connection settings

' Properties
Public Property Set QryTble(ByVal QryTable As QueryTable): Set mQryTble = QryTable:
End Property
Public Property Get QryTble() As QueryTable: Set QryTble = mQryTble:
End Property
' Add other potential properties here

Private Sub Class_Initialize()
    ' Constructor
    MsgBox "CQtEvents init"
End Sub

Private Sub mQryTble_BeforeRefresh(ByVal Cancel as Boolean)
    'Insert logic you want to run before a refresh
End Sub   

Private Sub mQryTble_AfterRefresh(ByVal Success As Boolean)
    'Insert logic you want to run after a refresh

End Sub 
```

上面要注意的关键是**WithEvents**关键字以及 BeforeRefresh 和 AfterRefresh 的声明/定义。

下面是利用上面定义的类模块的代码的样子

```
Option Explicit

Sub RefreshDataQuery()
'Dependencies: Microsoft Scripting Runtime (Tools->References) for Dictionary (HashTable) object

Dim querySheet As Worksheet
Dim classQtEvents As CQtEvents

Set querySheet = Worksheets("QTable")
Set interface = Worksheets("Interface")
Set classQtEvents = New CQtEvents ' Instantiate the Class

Dim qt As QueryTable
Dim qtDict As New Scripting.Dictionary

Set qtDict = UtilFunctions.CollectAllQueryTablesToDict
Set qt = qtDict.Item("Query from fred2")

''' Building SQL Query String '''
qt.CommandText = "Select * From someTable" 

If Not qt Is Nothing Then
    qt.Refresh False ' See link at bottom of post for alternatives to this
Else
    ' ... Error handling code here... 
End If

''' CLEAN UP '''

' Free the dictionary
Set qtDict = Nothing

End Sub 
```

这种方法的一个警告是，如果异步运行并保持原样，则不会调用 AfterRefresh。这样做的原因是当模块完成执行时对查询表的引用将消失，这很可能在查询完成执行之前完成。为了解决这个问题，您可以通过设置同步运行它

```
 qt.Refresh False 
```

但是，这不是最好的方法，但如果您不介意在子模块中的任何其他代码运行之前等待查询，这将起作用。有关此[Excel VBA 的替代方案的非常好的答案，请参阅此帖子 - KazJaw 完成刷新后未调用 QueryTable AfterRefresh 函数](https://stackoverflow.com/questions/18136069/excel-vba-querytable-afterrefresh-function-not-being-called-after-refresh-comp)。

希望这会有所帮助，因为这是编写嵌入工作表中的这些事件处理程序的一个很好的替代方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T14:29:36.210

[可以在此处](https://github.com/mcw0933/StackOverflowQuestion32974553/tree/master)找到一个 github 存储库，该存储库演示了实现此工作所需的最少代码。

正如其他答案中提到的，确保您赶上事件的关键因素是：

1.  在文件顶部的任何子例程/方法*之外*声明事件处理类模块类型的全局变量（我选择了`ThisWorkbook`文件）。

2.  添加一个`Workbook_Open`事件处理程序并在那里实例化该变量，以便它立即可用并*保持在范围内*（因为它是全局的）。

3.  那时，或者在您有一个感兴趣的 QueryTable 的任何下游点，将该 QueryTable 传递给全局实例以连接其事件。

（当有人向我指出这个方向作为[这个问题](https://stackoverflow.com/questions/32974553/how-can-i-post-process-the-data-from-an-excel-web-query-when-the-query-is-comple)的答案时，我自己花了几次尝试才弄清楚这一点。）**

# c++ - c++异常访问冲突与int变量

> ID：14667043
> 
> 赞同：0
> 
> 时间：2013-02-02T22:10:15.920
> 
> 标签：c++, exception, access-violation

我有一个非常奇怪的错误。我有一个 int 类型的对象属性，称为 currentState

这是声明

```
class WorkerAgent : public BaseAgent {

private:
    int currentState; 
```

下面的代码在游戏的循环中运行了很多次，但有时（在随机时间）代码会在行 (270)

*OBS: currentState 在运行这行代码时已经初始化（270）！

```
if (currentState == REPAIRING) {

    if (!unit->isRepairing()) {

        setState(GATHER_MINERALS);
        BaseAgent* base = AgentManager::getInstance()->getClosestBase(unit->getTilePosition());

        if (base != NULL) {

            unit->rightClick(base->getUnit());
            return;
        }
    } else {

        return;
    }
}

int cur = currentState; // (line 270) 
bool b = cur == FIND_BUILDSPOT; 
```

我有一个 EXCEPTION_ACCESS_VIOLATION 并且程序 chashes.. 我不知道会发生什么，因为`currentState`也不是指针`cur`

错误

```
VERSION: 1.16.1.1
BWAPI:
  REVISION: 4160
  BUILD: RELEASE
  ERROR: None
  LOCATION: Single Player 
MAP: Stepping Stones
     (3)Stepping Stones.scm

EXCEPTION: 0xC0000005    EXCEPTION_ACCESS_VIOLATION
FAULT:     0x10044217    BWAPI.dll
REGISTERS:
  EDI: 00000140
  ESI: 00000003
  EBX: 00000000
  EDX: C208C483
  ECX: 5B46A60C
  EAX: 035F0001
  EBP: 0018EEE8
  EIP: 10044217
  ESP: 0018E4C4
STACK:
  BWAPI.dll         0x10044217      ----
  BWAPI.dll         0x10046C38      ----
  BWAPI.dll         0x10047A43      ----
  BWAPI.dll         0x100408C6      ----
  DUMB.DLL          0x5B4254A0    WorkerAgent::computeActions
    d:\programming\mestrado\bots\dumb\bthaimodule\source\workeragent.cpp:270 
```

关于案件的其他信息，请询问我！我对这个问题感到疯狂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:16:34.190

`currentState`是你的类的成员`WorkerAgent`，这意味着你必须有一个有效的类型对象`WorkerAgent`才能`currentState`存在。

您可能使用了一个无效（null、未初始化、已删除或其他垃圾）指针，指向`WorkerAgent`您未向我们展示的代码。

# algorithm - 如何在 Rabin-Karp 算法中选择模值？

> ID：14667046
> 
> 赞同：3
> 
> 时间：2013-02-02T22:10:33.393
> 
> 标签：algorithm, math, string-matching, rabin-karp

我有一个关于[在 Rabin-Karp 算法中选择](http://www.cs.mun.ca/~kol/courses/6783-w12/scribe-rabin-karp.pdf)*q*和*d* 来搜索字符串的问题。该算法使用值*q*作为模数和*d*作为散列函数。

 **如果我选择*q*作为 2 的幂数并且 d=q-1 或 d=q+1

*   这些选择如何影响虚假命中？

*   在 d=q+1 和 d=q-1 的情况下，哪些模式会确保虚假命中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:48:20.260

X mod (2^n +1) 可以描述为交替的和/差，例如

X= 0x11223344, n=8, X mod 257 == 0x44 - 0x33 + 0x22 - 0x11 mod 257。这里的问题是任何重复的字母都会自行取消——不太实用——当然n不必是8.

X mod (2^n -1) 将是所有 n 位模式的*总和，例如*

X= 0x11223344, n=8, X mod 255 ==( 0x44 + 0x33 +0x22 +0x11 ) mod 255

这里的问题是切换字节会自行取消：Hash('ab') = Hash('ba')。**

# c++ - C++ - 在成员函数中初始化成员变量？

> ID：14667049
> 
> 赞同：1
> 
> 时间：2013-02-02T22:10:53.283
> 
> 标签：c++

这似乎是不好的编码习惯，但这是给我的指导方针。我想先说我不知道​​这将如何实际实现，我只是在编写课程。

```
class Example
{
  private:
     static int total;
  public:
    void initalizeTotal();
}

Example::initalizeTotal()
{
   total = 0;
} 
```

total 将（我猜）用于计算该类的对象数。这基本上就是我的意思。问题是我如何弄清楚如何实际调用该函数。我不能只在构造函数中调用它，感觉每次都会重置总数。我已经尝试过“检查”变量是否有值但失败了，如果没有，则调用该函数。

有没有人可以提供任何建议？

编辑：我忘了包括那个总数是静态的。而且我必须有一个初始化总计的函数。那是任务的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T22:17:31.337

由于`total`每个对象都应该是相同的变量，因此您应该使它`static`：

```
class Example {
    private:
        static int total;
} 
```

要初始化静态变量，您可以将此行放在 .cpp 文件中：

```
int Example::total = 0; 
```

您不需要调用任何函数来执行此初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T22:13:50.723

您可以将`total`变量设为静态：

```
class Example
{
  private:
     void addObject();
  public:
     static int total;
     Example();
}

Example::Example()
{
   addObject();
}

void Example::addObject()
{
   total++;
} 
```

这样它就不会属于任何特定的对象。如果您随后`addObject()`在构造函数中调用的方法中增加它的值，您将获得对象计数。

要访问它，您不会使用任何`Example`对象，而是可以像这样使用它：

```
std::cout << "Objects count:" << Example::total; 
```

如果你想初始化它，你可以在代码中的某处执行相同的操作：

```
Example::total = 0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T22:17:41.847

您必须使用`'total'`字段作为`static`变量才能与所有创建的类型对象共享`Example`。并且任何时候实例化一个新对象都会增加该`total`字段。希望这有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T22:18:24.653

尝试以下操作：

```
#include <iostream>

class Example {
   static int total;

   public:
     Example() { total++; }
     static int getTotal() { return total; }
};

int Example::total = 0;

int main() {
    Example a, b, c, d;

    std::cout << Example::getTotal(); // 4
} 
```

# c# - 重定向到新的 LoginPage 失败

> ID：14667050
> 
> 赞同：3
> 
> 时间：2013-02-02T22:10:58.927
> 
> 标签：c#, asp.net, asp.net-mvc

继续[我为什么会收到此 404 错误？](https://stackoverflow.com/questions/14666122/why-do-i-get-this-404-error)

我很奇怪，一旦我单击链接访问 AdminLogin 页面，它会将我定向到登录页面（在我的情况下，AdminLogin 和登录页面不同）。URL 后来变成 `http://localhost:1390/Account/Login?ReturnUrl=%2fAccount%2fAdminLogin`

我认为应该是`http://localhost:1390/Account/AdminLogin`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:37:37.173

如果您的 AdminLogin 操作方法使用 [Authorize] 属性“关闭”，则任何用户都无法登录。

使此操作方法可供任何用户使用。

# ubuntu - Ubuntu 上的 Less CSS 编译器：如何查看依赖项并在保存时编译

> ID：14667052
> 
> 赞同：3
> 
> 时间：2013-02-02T22:11:24.740
> 
> 标签：ubuntu, less

我刚刚从 Windows 切换到 Ubuntu (12.04)，我正在努力寻找一个解决方案来编译我的 .less 文件，就像我过去使用“Winless”应用程序所做的那样。这个应用程序的美妙之处在于我只需要监视一个文件夹，保存主文件......并且依赖文件中更改的所有内容也会被编译。

我用谷歌搜索了一个小时，看到了很多答案，但没有一个是直截了当的。而且我是一个ubuntu noob，所以事情很难理解。最接近的是[ubuntu 的较少 css （并自动编译）？](https://stackoverflow.com/questions/11862846/less-css-for-ubuntu-and-compilation-automatically)，但它根本没有按预期工作。

有人可以指出我正确的方向吗？我想清楚地说明我需要安装和配置什么才能获得“WinLess”程序的类似行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T09:26:14.833

如果您的 less 文件存储在 的子文件夹中`less/`，您可以使用 inotifywait 观察更改：

```
sudo apt-get install inotify-tools 
```

然后创建一个`autocompile.sh`文件：

```
#! /bin/bash
while inotifywait -r less/*
do
  lessc less/main.less > css/main.css # your compile command
done 
```

不要忘记赋予它执行权：

```
chmod u+x autocompile.sh 
```

并运行它：

```
./autocompile.sh 
```

每次`less/`修改文件时都会运行您的编译命令。

# java - 将源代码转换为 LaTeX

> ID：14667053
> 
> 赞同：5
> 
> 时间：2013-02-02T22:11:27.057
> 
> 标签：java, math, latex, expression, documentation-generation

我经常遇到很多用 Java 和 Fortran 实现的物理方程。在大多数情况下，这些方程是直接从高级物理教科书或出版物中复制而来的。原始形式的方程式很容易阅读，因为它们通常在 LaTeX 中排版。然而，当这些方程被翻译成代码时，它们看起来就像是胡言乱语。[即使使用此处建议](https://softwareengineering.stackexchange.com/questions/176582/is-there-an-excuse-for-short-variable-names)的短域特定变量名称，或者将等式分解为多行，也不会使它看起来像排版版本那样直观。

是否有任何工具可以解析 Java/Fortran 源文件并将其输出到 LaTeX 中，将所有数学表达式转换为它们的 LaTeX 等价物。例如，

```
Math.sqrt(Math.pow(a,2) + Math.pow(b,2)) 
```

被转化为

```
\sqrt{a^2 + b^2} 
```

只是要清楚。我不是在寻找允许将 LaTeX 作为注释/javadoc 的一部分包含在内的解决方案。因为那只会创建我的评论的 LaTeX 输出，而不是源代码中的表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:29:16.027

我想我已经看到了类似您要求使用[jetbrains mps](http://www.jetbrains.com/mps/)的投影编辑器完成的操作。它曾经将源代码中的算术表达式显示为类似乳胶的渲染方程。虽然不记得具体是在哪里看到的。也许是[mbeddr](http://mbeddr.wordpress.com/)。

但是您对从源到乳胶的方式更感兴趣，所以这是我的建议： [ATL](http://www.eclipse.org/atl)提供了模型到模型的转换。您可以使用它将 Java 表达式转换为乳胶表达式。因此，您需要 Java 的[EMF 模型](http://www.eclipse.org/modeling/emf/)。[MoDisco](http://www.eclipse.org/MoDisco)已经附带了 Java 1.5 模型。我不知道乳胶 EMF 模型。要将模型序列化为乳胶源，您可以使用[Xtext](http://www.eclipse.org/Xtext/)。

# c# - 为什么找不到我的 BasicAuthenticationModule？

> ID：14667055
> 
> 赞同：1
> 
> 时间：2013-02-02T22:11:33.217
> 
> 标签：c#, asp.net, asp.net-mvc-4, basic-authentication

我正在尝试创建自己的基本身份验证实现。

我已经`BasicAuthenticationModule.cs`存储在 my 中`solution\Modules`，它的命名空间是：

```
namespace Web_API.Modules
{
public class BasicAuthenticationModule2 : IHttpModule 
```

我已将其添加到我的 web.config 中，如下所示：

```
<system.webServer>
    <modules>
      <add name="BasicAuthenticationModule" type="Web_API.Modules.BasicAuthenticationModule, BasicAuthenticationModule"/> 
```

运行这个让我：`HTTP Error 500.19 - Internal Server Error - Cannot add duplicate collection entry of type 'add' with unique key attribute 'name' set to 'BasicAuthenticationModule'`

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-13T03:52:32.267

**`BasicAuthorizationModule`**原因是因为.NET中已经有一个名为的内置模块。

您需要：

*   使用不同的`Name` *（例如`BasicAuthModule`）*
*   删除现有的`BasicAuthorizationModeule`模块条目

# file - 批处理文件中的exe引用

> ID：14667057
> 
> 赞同：1
> 
> 时间：2013-02-02T22:11:39.997
> 
> 标签：file, batch-file, reference

我开始学习批处理文件的乐趣，但在尝试找到使用批处理文件在文件夹中运行程序的方法时需要一些帮助，批处理文件将立即位于文件夹之外，批处理文件的位置和文件夹在分发时会有所不同（尽管两者都处于相同的相对位置）。我找不到以前的问题，希望有办法。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:37:03.417

`%~dp0`是您的批处理文件的位置。所以你会这样做：

```
%~dp0\some_directory\exe_name.exe 
```

# python - Django 项目 - 无法同步数据表 - syncdb（错误：没有名为 XYZ 的模块）

> ID：14667059
> 
> 赞同：0
> 
> 时间：2013-02-02T22:11:51.473
> 
> 标签：python, django, django-syncdb, syncdb

我正在关注关于 Django 的教程，该教程基本上是一系列简短的待办事项，可导致构建 Web 应用程序来管理书签。

到目前为止，我已经： - 正确安装了 Django 1.4.2 - 创建了项目及其文件夹（我的问题与此相关......） - 设置数据库引擎（sqlite3） - 定义 views.py 以显示一个简单的网页上的消息（恭喜您创建了网页...） - 在 urls.py 中为主页定义了一个条目。见下文：

```
from django.conf.urls.defaults import *
from bookmarks.views import *
urlpatterns = patterns('',
(r'^$', main_page),
) 
```

所以，所以，一切都像一个魅力。

然后我不得不处理数据库。我有：

- 通过在 models.py 中键入以下内容创建数据模型：

```
from django.db import models

class Link(models.Model):
    url = models.URLField(unique=True) 
```

-在 settings.py 中定义了 INSTALLED APPS 如下：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django_bookmarks.bookmarks',
) 
```

这是棘手的部分。我必须同步数据表。所以我输入：

```
manage.py syncdb 
```

但我收到一条错误消息：没有书签模块

所以我检查了文件夹结构，如下所示

```
django_bookmarks
├── bookmarks
│   ├── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── django_bookmarks
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── manage.py 
```

所以，那时，我将“书签”文件夹移动到 django_bookmarks （子文件夹之一）。当我执行“syncdb”时，它运行良好。然后我将“书签”替换为原来的位置，就像上面树上显示的那样。所以我继续认为我胜利了......

然后我必须处理数据书签数据模型。我按照教程的指示在bookmarks/models.py 中输入了以下内容：

```
from django.contrib.auth.models import User

class Bookmark(models.Model):
    title = models.CharField(maxlength=200)
    user = models.ForeignKey(User)
    link = models.ForeignKey(Link) 
```

要创建表，我必须再次输入“manage.py syncdb”。但是随后出现错误消息：没有书签模块。所以我在“django_bookmarks”（子文件夹之一）中再次剪切粘贴了“书签”文件夹，认为它可以工作..但它没有..它打印了大约 17 行（Python 回溯）第 15 行（或 16 ..）是关于 models.py (models.CharField(maxlength=200)) 和行

```
Python27/lib/site-packages/django/db/models/fields/__init__ 
```

最后一条消息是：

```
TypeError: __init__() got an unexpected keyword argument 'maxlength' 
```

我看不出有什么问题。我按照教程进行了操作（除非我无法同步表格并且我求助于将“书签”文件夹粘贴到其他地方......）......并且文件夹树看起来很标准。为什么它没有找到“书签”模块？

任何帮助都可以:-)谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:14:27.567

CharField没有`maxlength`属性。但是有`max_length`。你错过了下划线

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T22:27:54.090

该教程可能适用于旧版本，其中 startapp 在项目 app 目录中创建了 app 文件夹。现在它已在项目目录（外部 django_bookmarks 文件夹）中创建，因此您的 SETTINGS.py 应如下所示：

```
INSTALLED_APPS = (
     'django.contrib.auth',
     'django.contrib.contenttypes',
     'django.contrib.sessions',
     'django.contrib.sites',
     'bookmarks',
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:27:28.987

内`INSTALLED_APPS`，只放`bookmarks`而不放`django_bookmarks.bookmarks`。由于 Django 1.4 中的新布局，一年前我遇到了同样的问题......

# excel - 监视单元格值并将其复制到另一个单元格

> ID：14667060
> 
> 赞同：0
> 
> 时间：2013-02-02T22:11:53.953
> 
> 标签：excel, excel-formula

我想知道如何监视单元格值并使该值始终在其他单元格上更新。

到目前为止，我一直在使用 = 符号，然后选择要监视的单元格。

问题是我正在监视的行/单元格由于另一个 vba 脚本而不断更新，当发生这种情况时我会`REF`出错。

例如

在`M8`单元格（sheet1）上，我有这个简单的公式来监控`A3`单元格摘要表中的值：

`=summary!A3`（工作正常显示单元格值）

但是在删除或更新行之后..我`M8`在 sheet1 的单元格上得到了这种行为。

`=summary!#REF!`

有谁知道我怎样才能锁定公式，使其永远不会改变？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:16:05.917

试试`=INDIRECT("summary!A3")`- 这将始终参考 A3，无论任何工作表更改。

# c - 对于这种特殊情况，我应该使用 spin_lock 还是 mutex_lock？

> ID：14667063
> 
> 赞同：1
> 
> 时间：2013-02-02T22:12:00.970
> 
> 标签：c, pthreads, mutex, spinlock

在我的 Linux 应用程序中，我有两个线程都尝试使用相同的客户端套接字发送`UDP`广播数据包（大约 50-500 字节） 。`UDP`他们大约每 2-3 秒执行一次。在这种情况下，围绕“send(...)”子句，我可以放置`pthread_mutex_lock`or `pthread_spin_lock`。理论上说，如果它是一个非常小的操作，那么 a`pthread_spin_lock`会更有效（尽管 CPU 消耗量很小）。但如果是更大的手术，那就`pthread_mutex_lock`更好了。

发送一个`UDP`数据包是否被认为“足够小”以保证使用 a `pthread_spin_lock`，或者我仍然应该坚持使用`pthread_mutex_lock`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:23:41.867

如果唯一需要锁定是因为它们都在同一个套接字上发送，那么根本不需要锁定 - 两个线程同时调用`send()`同一个 UDP 套接字是可以接受的。发送的数据不会交错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:19:49.613

通过使用自旋锁而不是互斥锁来避免的是避免在发生拥塞时进入系统调用。如果您在关键部分使用网络层，无论如何您将进入系统调用。据我所知，在这里使用自旋锁没有多大意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:37:33.120

将系统调用包装在自旋锁中是一个坏主意。在任何情况下，在用户空间应用程序中使用自旋锁的优点都是值得怀疑的。Linux 的互斥锁实现（使用[futexes](http://en.wikipedia.org/wiki/Futex)）非常有效——尤其是当锁没有竞争时，在精心设计的 MT 应用程序中几乎总是如此。

其他人指出该`send`函数本身是线程安全的。

# html - 基本的 CSS 布局问题，底部有空白

> ID：14667070
> 
> 赞同：0
> 
> 时间：2013-02-02T22:12:47.270
> 
> 标签：html, css, layout

很抱歉这个愚蠢的问题，但出于某种原因，HTML/CSS 布局的这一部分总是让我...

我在[http://kdmalikdesign.com/test/LinguisticPeers/index.html](http://kdmalikdesign.com/test/LinguisticPeers/index.html)有一个网站。只是练习 HTML/CSS/jQuery 和最终的 PHP/数据库。

在 chrome 中，页脚最终会太长。在 Firefox 中，页脚大约是我想要的页脚的三倍，在 Safari 中也是如此。现在我在 html 和 body 上有 100% 的高度，以便背景图像扩展到显示的所有内容。

为了补偿页脚（现在太长），我是否必须将主容器设置为最小长度，以便页脚可以容纳空间？对此有一般的设计规则吗？还是 CSS 规则？

基本上发生的事情是我喜欢页眉和主容器的外观，但由于它没有填满整个浏览器窗口，它最终会使页脚太长，或者如果 html,body 100% 不存在，就会变成一个页脚下方的空白区域。如果您想快速检查它，我的 CSS 代码如下。

html,body 上唯一的高度是 100%。Header 的高度为 100px，每个容器为 160px。页脚也是 55px。

```
html, body, div, header, footer, article, h2 {
    margin: 0px;
    padding: 0px;
}

html, body {
    height: 100%;
    background-image: url('images/bkg-img.jpg');
    background-repeat: repeat;
}
header {
background: #6888fd; /* Old browsers */
background: -moz-linear-gradient(top, #6888fd 0%, #1c46e9 55%, #0330e4 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6888fd), color-stop(55%,#1c46e9), color-stop(100%,#0330e4)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #6888fd 0%,#1c46e9 55%,#0330e4 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #6888fd 0%,#1c46e9 55%,#0330e4 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #6888fd 0%,#1c46e9 55%,#0330e4 100%); /* IE10+ */
background: linear-gradient(to bottom, #6888fd 0%,#1c46e9 55%,#0330e4 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6888fd', endColorstr='#0330e4',GradientType=0 ); /* IE6-9 */
height: 100px;
}

#background-container {
    padding-top: 50px;
    padding-bottom: 25px;
}

#container {
    margin: 0 auto;
    background-color: #587DFF;
    height: 230px;
    width: 830px;

    text-align: center;
    padding-top: 100px;

    -moz-border-radius: 25px;
    border-radius: 25px;
}

#article-container {
    width: 960px;
    margin: 0 auto;
}

article {
    border: 4px solid #9AADFA;
    background-color: #002DE2;
    color: #fff;
    width: 280px;
    height: 160px;

    float: left;
    margin-left: 30px;
    margin-top: 25px;
    /* 
            display:-moz-inline-stack;
display:inline-block;
zoom:1;
*display:inline;
    */
}

.clear {
    clear: both;
}

span {
    display: block;
    padding-top: 10px;
    color: #6D8EFF;
}

h2 {
    padding-left: 10px;
    padding-top: 5px;
}

p {
    padding-left: 5px;
    padding-right: 5px;
}

footer {
    text-align: center;
    border-top: 1px solid #7493FF;
    background-image: url('images/bkg-img.jpg');
    background-repeat: repeat;

    height: 55px;
}

nav {
    float: right;
    color: #84A0FF;
    position: relative;
    top: 60px;
    left: -75px;
}

nav ul {
    list-style-type: none;
}

nav ul li {
    display: inline;
    padding-left: 10px;
}

#login-container {
    float: right;
    padding-right: 50px;
    padding-top: 25px;
    color: #fff;
    position: relative;
    left: 450px;
}

#header-container {
margin: 0 auto;
    width: 960px;
    height: 100px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:25:43.110

如果您希望页脚贴在页面底部，类似[这样](http://ryanfait.com/sticky-footer/)的操作可能会有所帮助。

# spring-webflow - 我可以遍历 webflow 中的表达式吗？

> ID：14667071
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:12:46.897
> 
> 标签：spring-webflow

我是春季网络流的新手。我有一个列表，我希望表达式的评估次数与列表的大小一样多。示例代码是 -

```
<evaluate expression="myController.save(itemController.selectedList)" result="flowScope.item"/> 
```

这里 selectedList 是一个项目列表。我希望它是这样的——

```
for(Item item: selectedList) {
    <evaluate expression="myController.save(item)" result="flowScope.item"/>
} 
```

在这里，我想遍历列表并在每次迭代时评估表达式。这可以在xml文件中这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:30:47.887

这真的没有意义。你应该做的是调用服务方法或在你的控制器中创建一个方法，myController。saveItemList(List itemList) 对列表的每个项目调用 saveItem 方法，也可能返回项目列表。然后你可以从 XML 中调用它

# jquery - 避免不断寻找属于jquery的dom 多表单唯一id

> ID：14667072
> 
> 赞同：0
> 
> 时间：2013-02-02T22:12:51.410
> 
> 标签：jquery, dom, find

我的页面有多个放置在其中的表单，`<li>`我为它们分配了一个唯一 ID，然后在我的 jquery 中我感到疲倦并且在继续查找属于该 ID 的 dom 时使代码混乱。像下面

```
var id = $(this).parent().closest('li').attr('id');
var $formID = ('#' + id);

$form.find('foo').addClass('bar');
     .find('foox').hide('barx');
     .find('fooy').etc('bary');
     .find('fooz').etc('barz');
etc..... 
```

知道我可以让代码看起来更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:24:58.757

在 jQuery 中，您可以使用 find 从 jQuery 对象中搜索 dom 的子集。您还可以在完整选择器中使用空格来查找子项。因此，以下内容与您的代码相同：

```
$(formID + ' foo').addClass('bar');
$(formID + ' foox').hide('barx');
$(formID + ' fooy').etc('bary');
$(formID + ' fooz').etc('barz'); 
```

这是你要问的吗？

# angularjs - AngularJS 不能在旧的移动设备上编译

> ID：14667073
> 
> 赞同：1
> 
> 时间：2013-02-02T22:12:54.090
> 
> 标签：angularjs

我已经使用 angularjs 一个月了，我非常喜欢它。过去我总是能够自己解决问题，但现在有一个问题我想请你帮助我。

我的主页适用于 IE、Chrome 和 Firefox。即使在所有新手机上。但不适用于较旧的。我用不同浏览器的 HTC Desire (Android 2.2) 对其进行了测试。

索引.html：

```
<!doctype html>
<html lang="de" ng-app="myapp">
    <head>
    <meta charset="utf-8">
    <title>My App</title>
    <link rel="stylesheet" href="css/app.css"/>
    </head>
    <body>
    <div id="wrapper">
        <div id="header" ng-controller="HeaderCtrl">
        <ng:include src="'partials/header.html'"></ng:include>
        </div>
        <div id="content">
        <ng:view></ng:view>
        </div>

        <div id="footer" ng-controller="FooterCtrl">
        <ng:include src="'partials/footer.html'"></ng:include>
        </div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false" ype="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>
    <script src="lib/angular/angular-resource.js"></script>
    <script src="lib/angular-ui/angular-ui.js"></script>
    <script src="js/app.js"></script>

    <!-- Controller -->
    <script src="js/ctrl/PageCtrl.js"></script>
    <script src="js/ctrl/HeaderCtrl.js"></script>
    <script src="js/ctrl/FooterCtrl.js"></script>

    </body>
</html> 
```

app.js：（我的模块）

```
'use strict';

angular.module('myapp', ['myapp.directives']).
  config(['$routeProvider', function($routeProvider) {
    $routeProvider.when('/', {templateUrl: 'partials/page1.html', controller: PageCtrl, reloadOnSearch: false});

    $routeProvider.when('/listing', {templateUrl: 'partials/page2.html', controller: PageCtrl, reloadOnSearch: false});

    $routeProvider.otherwise({redirectTo: '/'});
  }]); 
```

我测试了很多案例，我的猜测是移动设备不执行 angular.module('myapp', ['myapp.directives']) 。

我还测试了一个用于编译网页端的 manuell 引导程序。

这可能是同一个问题，但就我而言，没有电话间隙。 [angular.js 在 PhoneGap 中不起作用 ng-view 标签](https://stackoverflow.com/questions/12436659/angular-js-doesnt-work-ng-view-tag-in-phonegap)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T14:38:55.867

我正在使用 AngularJS 开发一个站点，它在 Android 2.1 上的 HTC Desire 以及黑莓粗体和带有 Android 2.2 的三星 Galaxy 上运行良好。

我还使用了 Will Vincent 提到的技术，以确保更好地与浏览器兼容。我不明白为什么它对你不起作用。

也许问题来自属性 '['myapp.directives']' 如果您使用混淆器，它可以被重命名？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T19:41:44.533

如果不使用 ng:include 和 ng:view 标签而是使用属性方法，它是否有效：

```
<div ng-include> and <div ng-view></div> 
```

# jquery - 林肯电影网站页面滑块

> ID：14667075
> 
> 赞同：0
> 
> 时间：2013-02-02T22:13:13.807
> 
> 标签：jquery, css, css-animations

我正在寻找一种类似于可以在 thelincolnmovie.com 网站上找到的效果的效果。我尝试使用 CSS3 过渡重新创建它，但它并不是我想要的。

我的尝试可以在这里找到：http: [//jasenpeterson.com/12-Years/v4/](http://jasenpeterson.com/12-Years/v4/)

问题是我不希望当前页面滑出而下一页滑入（在此过程中显示主页）。我希望页面像林肯网站一样相互滑动。

我希望我可以用 CSS3 完成这个，但我没有任何运气。我假设我必须用 jQuery 充实它。

我的谷歌搜索教程或文章让我开始失败。我不断得到不符合我需要的内容滑块的结果。

任何帮助，将不胜感激！如果有任何问题，我可以澄清事情。

谢谢。

*   杰森MP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:05:40.327

我会使用 Jquery 平滑滚动器（请参阅[此示例](http://css-tricks.com/snippets/jquery/smooth-scrolling/)）。它与那种效果非常相似，尽管我认为它实际上是通过 DIV 简单地堆叠在一起完成的。但这只是对源代码的快速浏览。

因此，当 Lincon 更改 URL 时：

```
example.com/?about 
```

这项工作使用页面锚点，因此使用：

```
example.com/#about 
```

值得注意的是，我看到一些人说这很糟糕，因为谷歌只选择了一个页面，而且它的格式不太好，但我想这是有争议的。

# c++ - 军用时间的C++时差

> ID：14667076
> 
> 赞同：1
> 
> 时间：2013-02-02T22:13:22.180
> 
> 标签：c++

我正在尝试创建一个程序，该程序需要两个军事时间的差异并获得它的时间差异。

`Example:`

`**AM to PM**`

`Time 1: 0900`

`Time 2: 1730`

`Time Difference: 8 hours 30 minutes`

`**PM to AM**`

`Time 1: 1200`

`Time 2: 1100`

`Time Difference: 23 hours 0 minutes`

使用几个 if than else 语句，我能够弄清楚如何将军事时间转换为标准时间，但我不知道如何去减去时间。我试图想出一种只用加法和减法在纸上处理的方法，但我还没有开发出一种适用于所有情况的方法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:27:14.073

一种选择可能是将时间分成两个元素，小时和分钟。

首先，花点时间，即。1730除以100。如果是整数或类似的，应该是17小时（它会自动向下取整）。

然后取 1730 并将其修改为 100 以获得 30 分钟。

```
int time1 = 900;
int time2 = 1730;
int diffHours = time2 / 100 - time1 / 100;
int diffMinutes = time2 % 100 - time1 % 100; 
```

如果您不熟悉模数 (%)，它只会返回两个数相除后的余数，因此 7 % 3 将是 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:30:16.550

假设您的军事时间存储为`int`0000..2400 范围内的值，那么以下函数将返回两个此类值之间的差。

```
#include <cassert>

extern int timediff_minutes(int t1, int t2);

int timediff_minutes(int t1, int t2)
{
    assert(t1 >= 0 && t1 <= 2400);
    assert(t2 >= 0 && t2 <= 2400);
    assert(t1 % 100 < 60 && t2 % 100 < 60);
    int t1_mins = (t1 / 100) * 60 + (t1 % 100);
    int t2_mins = (t2 / 100) * 60 + (t2 % 100);
    return(t2_mins - t1_mins);
} 
```

请注意，2400 可用于表示一天的结束 - 并且 ISO 8601:2004 认可使用 2400*数据元素和交换格式 - 信息交换 - 日期和时间的表示*。

> ### 4.2.3 午夜
> 
> 根据 4.2.2，午夜的基本和扩展格式的完整表示应以下列两种方式之一表示：

```
 Basic format    Extended format
 a) 000000          00:00:00       (the beginning of a calendar day)
 b) 240000          24:00:00       (the end of a calendar day) 
```

> 根据 4.2.2.3，表示可能具有降低的精度，或者可以根据 4.2.2.5 指定为时间表达式。为了表示午夜，可以根据 4.2.2.4 用仅包含零的小数来扩展表示。
> 
> 注 1 午夜通常表示为 [00:00] 或 [24:00]。
> 注 2 一个日历日的结束 [24:00] 与下一个日历日的开始 [00:00] 重合，例如 1985 年 4 月 12 日的 [24:00] 与 13 日的 [00:00] 相同1985 年 4 月。如果与日期或时间间隔没有关联，则 a) 和 b) 在 24 小时计时系统中表示相同的本地时间。
> 注 3 表示 a) 或 b) 的选择将取决于与日期或时间间隔的任何关联。[hh] 具有值 [24] 的表示仅优选表示根据 4.4 的时间间隔的结束或根据 4.5 的重复时间间隔。

# java - 我似乎无法找到使用 slick2d 找到两个对象之间的碰撞点的答案

> ID：14667077
> 
> 赞同：-2
> 
> 时间：2013-02-02T22:13:40.143
> 
> 标签：java, slick2d, collision

我可以找到如果两个对象发生碰撞，但不是它们发生碰撞的点，我看到其他帖子提出了类似的问题，但答案总是太神秘/对用户的知识做出了很大的假设，并且总是针对其他语言。我正在开发一个程序，其中一个人发射管状炸弹，速度和位移考虑了旋转速度、重力、空气阻力和质量。在我的场景中，目前只有两次可能发生实际碰撞：第一次是管状炸弹击中四个墙壁之一，第二次是物体击中另一个管状炸弹的爆炸。

从理论上讲，我可以弄清楚如何对管状炸弹和墙壁进行碰撞（管状炸弹的碰撞是正方形），因为管状炸弹只能在完全垂直于墙壁、平行或撞击其中一个时发生碰撞四个角（我可以使用管炸弹的旋转来解决这个问题）。当我试图弄清楚当管状炸弹击中另一个管状炸弹的圆形爆炸时，我被难住了，因为理论上它可能在管状炸弹的任何一侧的任何地方，因为圆形没有平坦的边缘。

我的计划是找到管状炸弹上与任何东西相交的点，从管状炸弹的质心得到半径，并从爆炸施加的力中找到扭矩（半径随着时间的增加而增加，但是力会减小，直到它达到零，然后消失），或者从墙上弹射出来的反作用力。

下面的图像显示了我的程序中的两个碰撞时刻以表明我的观点，但我显然还不能这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:18:04.200

由于墙壁基本上是一条垂直线，因此您可以将[其](http://active.tutsplus.com/tutorials/actionscript/predicting-collision-points-with-math-in-as3/)用作预测碰撞点的指南。

# jquery - Jquery-这有点难以解释，但如何添加行跨度

> ID：14667081
> 
> 赞同：1
> 
> 时间：2013-02-02T22:13:53.983
> 
> 标签：jquery, html-table

这是表格：

```
<table>
<tr><td rowspan=2>---A----</td></tr>
<tr><td>Not to this td</td></tr>
<tr><td>Not to this td</td></tr>

<tr><td>-----B ---ADD here</td></tr>
<tr><td>Not to this td</td></tr>

<tr><td rowspan=3>---C---</td></tr>
<tr><td>Not to this td</td></tr>
<tr><td>Not to this td</td></tr>
<tr><td>Not to this td</td></tr>
</table> 
```

本质上，我要检查的是 td 是否具有行跨度，并且它是否确实根据行跨度的数量跳过了接下来的 n 行。例如检查第一个 td (A) 并且由于它的行跨度为 2，因此跳过接下来的 2 行并检查 B 是否具有行跨度，如果没有，则添加行跨度为 1 并跳过下一行并继续C，由于 C 的行跨度为 3，因此我们跳过以下 3 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:40:01.870

您可以使用以下脚本实现此目的：

```
 var rowspan = 0;
    $("table").find("tr").each(function(){
        var row = $(this);
        var firstCell = row.children().first(); // cell containing rowspan
        if (rowspan == 0){ // do not skip, determine new rowspan
            rowspan = firstCell.attr("rowspan"); // read rowspan
            if(!rowspan){ // not found, so add it
                rowspan = row.nextUntil("tr:has(td[rowspan])").length; 
                firstCell.attr("rowspan", rowspan);
            }
        }else{
            rowspan--; // decrease the number of rows to skip
            firstCell.hide(); // skip/hide this cell
        }        
    }); 
```

这是一个[Fiddle](http://jsfiddle.net/Ru6QY/)。

*要改进生成的 html，您实际上必须将每个行跨度增加 1！两行跨度不定义跳过两行，而是跨越两行。这包括定义单元格的行。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:41:53.703

如果你可以在标题 td 上添加一个特殊的类，你可以这样做：

```
$(document).ready(function(){
    $('td.-main').not('[rowspan]').each(function(){
        $(this).attr('rowspan',2);
    });
});

<table>
<tr><td class="-main" rowspan=2>---A----</td></tr>
<tr><td>Not to this td</td></tr>
<tr><td>Not to this td</td></tr>

<tr><td class="-main">-----B ---ADD here</td></tr>
<tr><td>Not to this td</td></tr>

<tr><td class="-main" rowspan=3>---C---</td></tr>
<tr><td>Not to this td</td></tr>
<tr><td>Not to this td</td></tr>
<tr><td>Not to this td</td></tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T22:44:18.080

此函数将遍历表行的所有第一个子项，然后检查它是否具有行跨度。如果是，它会跳过下一个 X 行跨度。如果不是，它将行跨度更改为 1。

```
$("tr td:first-child").each(function() {
  if (i > 0) {
    i--;
    return true;
  }
  if ($(this).attr("rowspan")) {
    i = $(this).attr("rowspan");
    return true;
  } else {
    $(this).attr("rowspan","1");
  }
} 
```

# macos - i386 x86_64 组合架构？

> ID：14667083
> 
> 赞同：0
> 
> 时间：2013-02-02T22:14:12.720
> 
> 标签：macos, 32bit-64bit

我来自Windows开发。我知道二进制可以是 32 位或 64 位。但不是两者兼而有之。而且在 64 位平台上，我可以运行 32 位二进制文​​件，反之则不行。

在 mac 中，我看到了像 i386 x86_64 这样的组合架构，这让我有点惊讶。为什么以及何时我们针对这种架构的 mac osx 上的应用程序，这样做有什么好处？为什么不是只有 32 位，根据我对 Windows 的理解，它可以在 32 位和 64 位上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:18:53.687

这并不是说代码是为“混合”架构编译的——只是[它是为多个架构编译的。](http://en.wikipedia.org/wiki/Fat_binary#Mach-O_and_Mac_OS_X)

为 32 位和 64 位编译它的原因是 64 位程序在 64 位架构（大多数现代 Mac）上的性能通常比 32 位程序更好。

# r - 同时简洁地分配名称和值

> ID：14667088
> 
> 赞同：6
> 
> 时间：2013-02-02T22:14:35.853
> 
> 标签：r, assign

我发现自己经常写以下两行。有没有简洁的替代方案？

```
 newObj  <- vals
names(newObj) <- nams

# This works, but is ugly and not necessarily preferred
'names<-'(newObj <- vals, nams) 
```

我正在寻找与此类似的东西（这当然不起作用）：

```
newObj <- c(nams = vals) 
```

将它包装在一个函数中也是一种选择，但我想知道该功能是否已经存在。

*样本数据*

```
vals <- c(1, 2, 3)
nams <- c("A", "B", "C") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T22:17:32.547

你想要的`setNames`功能

```
# Your example data
vals <- 1:3
names <- LETTERS[1:3]
# Using setNames
newObj <- setNames(vals, names)
newObj
#A B C 
#1 2 3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T05:20:54.207

The `names<-` method often (if not always) copies the object internally. `setNames` is simply a wrapper for `names<-`,

If you want to assign names and values succinctly in code and memory, then the `setattr` function, from either the `bit` or `data.table` packages will do this by reference (no copying)

eg

```
library(data.table) # or library(bit)
setattr(vals, 'names', names) 
```

Perhaps slightly less succinct, but you could write yourself a simple wrapper

```
name <- function(x, names){ setattr(x,'names', names)}

val <- 1:3
names <- LETTERS[1:3]
name(val, names)
# and it has worked!
val
## A B C 
## 1 2 3 
```

Note that if you assign to a new object, both the old and new object will have the names!

# jquery - 使用 MVC 进行模态弹出式 Jquery 验证

> ID：14667092
> 
> 赞同：0
> 
> 时间：2013-02-02T22:15:12.210
> 
> 标签：jquery, asp.net-mvc, jquery-validate, unobtrusive-validation

我正在使用 PartialView 加载模态弹出表单

编码

```
 $("#modalContainer").load('@Url.Action("NewRefill","Car",new {car=@Model.Id})');

                        $.validator.unobtrusive.parse($("#modalContainer form"));

                        $("#addNewEntryModal").modal('show'); 
```

在我的控制器中，我有

```
[HttpPost]
        public ActionResult NewRefill(Car car,int car)
        {
            if (ModelState.IsValid)
            {

            }
            return Json(new { Success = false });

        } 
```

这是一个模态弹出窗口。每次您点击提交时，它都会自动将您转发到一个新页面。我想做的是保持模式打开并显示发生的错误。我尝试绑定到 Submit 事件并停止它无济于事。验证确实有效，因为我看到红色边框但我被转发并看到 Success=false

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T23:26:55.913

您没有在正确的位置解析 jQuery 不显眼的验证。在成功回调中加载部分内容后，您应该这样做：

```
var url = '@Url.Action("NewRefill", "Car", new {car = @Model.Id})';
$('#modalContainer').load(url, function() {
    $.validator.unobtrusive.parse($("#modalContainer form"));
    $("#addNewEntryModal").modal('show');
}); 
```

此外，如果在此部分中您正在使用`Ajax.BeginForm`帮助程序生成表单，请确保您已将`jQuery.unobtrusive-ajax.js`脚本包含到您的页面中以使其正常工作。如果它是正常的`Html.BeginForm`，如果您希望它通过 AJAX 请求而不是普通请求提交，则应该对其进行 AJAXify：

```
var url = '@Url.Action("NewRefill", "Car", new {car = @Model.Id})';
$('#modalContainer').load(url, function() {
    var form = $("#modalContainer form");
    $.validator.unobtrusive.parse();
    $("#addNewEntryModal").modal('show');
    form.submit(function() {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function(result) {
                ...
            }
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T20:52:41.763

```
 $.validator.unobtrusive.parse($('#' + popupID)); 
```

# c# - “ThenBy”排序的有效实现

> ID：14667093
> 
> 赞同：4
> 
> 时间：2013-02-02T22:15:19.817
> 
> 标签：c#, performance, linq, sorting

我必须编写 Linq 的“立即”模式实现（由于 Unity/Mono 的内存分配限制 - 长篇大论，并不是很重要）。

在我来到`ThenBy`. 显然，我的应用方法是有缺陷的，因为我的性能下降到比实际交易慢 4 倍。

所以我现在正在做的是——

对于每个`OrderBy`,`ThenBy`子句

*   为每个选择器的结果创建一个列表，将选择器评估的所有结果添加到列表中
*   创建一个使用默认比较器的 lambda，该比较器使用从两个参数索引的列表

它看起来像这样：

```
public static IEnumerable<T> OrderByDescending<T,TR>(this IEnumerable<T> source, Func<T,TR> clause, IComparer<TR> comparer = null)
{
    comparer = comparer ?? Comparer<TR>.Default;
    var linqList = source as LinqList<T>;
    if(linqList == null)
    {
        linqList = Recycler.New<LinqList<T>>();
        linqList.AddRange(source);
    }
    if(linqList.sorter!=null)
        throw new Exception("Use ThenBy and ThenByDescending after an OrderBy or OrderByDescending");
    var keys = Recycler.New<List<TR>>();
    keys.Capacity = keys.Capacity > linqList.Count ? keys.Capacity : linqList.Count;
    foreach(var item in source)
    {
        keys.Add(clause(item));
    }
    linqList.sorter = (x,y)=>-comparer.Compare(keys[x],keys[y]);
    return linqList;

}

public static IEnumerable<T> ThenBy<T,TR>(this IEnumerable<T> source, Func<T,TR> clause, IComparer<TR> comparer = null)
{
    comparer = comparer ?? Comparer<TR>.Default;
    var linqList = source as LinqList<T>;
    if(linqList == null || linqList.sorter==null)
    {
        throw new Exception("Use OrderBy or OrderByDescending first");
    }
    var keys = Recycler.New<List<TR>>();
    keys.Capacity = keys.Capacity > linqList.Count ? keys.Capacity : linqList.Count;
    foreach(var item in source)
    {
        keys.Add(clause(item));
    }
    linqList.sorters.Add((z,x,y)=>z != 0 ? z : comparer.Compare(keys[x],keys[y]));
    return linqList;

} 
```

然后我在 sort 函数中所做的是创建一个按顺序应用排序的 lamda - 所以我最终得到一个看起来像 a`Comparer<int>`并返回正确排序的函数。

它开始了这种非常糟糕的表现。我已经尝试过使用柯里化和不同签名的版本`OrderBy`和`ThenBy`函数，但没有什么能更快地工作，我想知道我是否只是错过了一个关于多键排序的技巧。

排序变量和函数：

```
 public List<Func<int,int,int,int>> sorters = new List<Func<int, int, int, int>>();
    public Func<int,int,int> sorter;
    public List<int> sortList = new List<int>();
    bool sorted;
    private List<T> myList = new List<T>();

    void ResolveSorters()
    {
        if(sorter==null)
            return;

        Func<int,int,int> function = null;

        if(sorters.Count==0)
        {
            function = sorter;
        }
        else
        {
            function = sorter;
            foreach(var s in sorters)
            {
                var inProgress = function;
                var current = s;
                function = (x,y)=>current(inProgress(x,y), x,y);
            }
        }
        sortList.Capacity = sortList.Capacity < myList.Count ? myList.Count : sortList.Capacity;
        sortList.Clear();
        sortList.AddRange(System.Linq.Enumerable.Range(0,myList.Count));
        //var c = myList.Count;
        /*for(var i =0; i < c; i++)
            sortList.Add(i);*/
        sortList.Sort(new Comparison<int>(function));
        sorted = true;
        sorters.Clear();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:40:54.370

我需要猜测，但我仍在尝试。我认为我们应该尝试摆脱嵌套的 lambda 东西和委托转换。我不确定它的表现如何。排序函数应该是这样的：

```
Func<int, int, int>[] sorters = ...; //fill this. it really should be an array!
Comparison<int> = (a, b) => {
 foreach (var s in sorters) {
  var cmp = s(a, b);
  if(cmp != 0) return cmp;
 }
 return 0;
}; 
```

所以我们摆脱了嵌套调用。现在都是一个简单的循环。您可以为小循环尺寸构建专门的版本：

```
Func<int, int, int>[] sorters = ...; //fill this. it really should be an array!
switch (sorters.Length) {
 case 2: {
   var s0 = sorters[0], s1 = sorters[1];
   Comparison<int> = (a, b) => {
     var cmp = s0(a, b);
     if(cmp != 0) return cmp;
     var cmp = s1(a, b);
     if(cmp != 0) return cmp;
     return 0;
   };
} 
```

展开循环，以便在排序期间不再出现数组。

所有这些实际上都是在解决我们对排序函数的结构没有静态知识的事实。如果比较函数只是调用者提交的，那会快得多。

**更新：Repro（吞吐量比 LINQ 多 100%）**

```
 Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.High;

        Func<int, int, int>[] sorters = new Func<int, int, int>[]
            {
                (a, b) => (a & 0x1).CompareTo(b & 0x1),
                (a, b) => (a & 0x2).CompareTo(b & 0x2),
                (a, b) => (a & 0x4).CompareTo(b & 0x4),
                (a, b) => a.CompareTo(b),
            };

        Func<int, int, int> comparisonB = sorters[0];
        for (int i = 1; i < sorters.Length; i++)
        {
            var func1 = comparisonB;
            var func2 = sorters[i];
            comparisonB = (a, b) =>
                {
                    var cmp = func1(a, b);
                    if (cmp != 0) return cmp;
                    return func2(a, b);
                };
        }
        var comparisonC = new Comparison<int>(comparisonB);

        Comparison<int> comparisonA = (a, b) =>
        {
            foreach (var s in sorters)
            {
                var cmp = s(a, b);
                if (cmp != 0) return cmp;
            }
            return 0;
        };

        Func<int, int, int> s0 = sorters[0], s1 = sorters[1], s2 = sorters[2], s3 = sorters[3];
        Comparison<int> comparisonD = (a, b) =>
            {
                var cmp = s0(a, b);
                if (cmp != 0) return cmp;
                cmp = s1(a, b);
                if (cmp != 0) return cmp;
                cmp = s2(a, b);
                if (cmp != 0) return cmp;
                cmp = s3(a, b);
                if (cmp != 0) return cmp;
                return 0;
            };

        {
            GC.Collect();
            var data = CreateSortData();
            var sw = Stopwatch.StartNew();
            Array.Sort(data, comparisonC);
            sw.Stop();
            Console.WriteLine(sw.Elapsed.TotalSeconds);
        }

        {
            GC.Collect();
            var data = CreateSortData();
            var sw = Stopwatch.StartNew();
            Array.Sort(data, comparisonA);
            sw.Stop();
            Console.WriteLine(sw.Elapsed.TotalSeconds);
        }

        {
            GC.Collect();
            var data = CreateSortData();
            var sw = Stopwatch.StartNew();
            Array.Sort(data, comparisonD);
            sw.Stop();
            Console.WriteLine(sw.Elapsed.TotalSeconds);
        }

        {
            GC.Collect();
            var data = CreateSortData();
            var sw = Stopwatch.StartNew();
            foreach (var source in data.OrderBy(x => x & 0x1).ThenBy(x => x & 0x2).ThenBy(x => x & 0x4).ThenBy(x => x))
            {

            }
            sw.Stop();
            Console.WriteLine(sw.Elapsed.TotalSeconds);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-01T20:10:32.633

我以这种方式按 [Type] 然后按 [Price] 对我的项目进行排序

```
Items = Items.OrderBy(i => i.Type).ToList();

for (var j = 0; j < Items.Count - 1; j++) // ordering ThenBy() AOT workaround
{
    for (var i = 0; i < Items.Count - 1; i++) 
    {
        if (Items[i].Type == Items[i + 1].Type && Items[i].Price > Items[i + 1].Price)
        {
            var temp = Items[i];

            Items[i] = Items[i + 1];
            Items[i + 1] = temp;
        }
    }
} 
```

# ios - CLLocationDistance 返回完全错误的值

> ID：14667103
> 
> 赞同：0
> 
> 时间：2013-02-02T22:16:30.153
> 
> 标签：ios, objective-c, cllocation, cllocationdistance

我正在使用这个函数来获取从一个 CLLocation 到另一个的距离

这里的venue.lat是NSNumber

```
GeoAddress *address = [[GeoAddress new] init];

CLLocationCoordinate2D coord;
coord.longitude = (CLLocationDegrees)[venue.lat doubleValue];
coord.latitude = (CLLocationDegrees)[venue.lng doubleValue];

address.latlng = [[CLLocation alloc] initWithLatitude:coord.latitude longitude: coord.longitude];

if (curUserLocation.coordinate.latitude){
    address.distance = [address.latlng distanceFromLocation:curUserLocation];
    NSLog(@" DISTANCE %f", address.distance);
    NSLog(@" LOC1 %f lat %f lng", address.latlng.coordinate.latitude, address.latlng.coordinate.longitude);
    NSLog(@" ME %f lat %f lng", curUserLocation.coordinate.latitude, curUserLocation.coordinate.longitude);
} 
```

这是地理地址：

```
//  GeoAddress.h
@interface GeoAddress : NSObject
{        
    CLLocation * latlng;
   CLLocationDistance  distance;
}
@property  CLLocationDistance  distance;
@property (nonatomic, retain)  CLLocation * latlng;

//  GeoAddress.m
#import "GeoAddress.h"

@implementation GeoAddress
@synthesize distance;
@synthesize  latlng; 
```

这是日志：

```
DISTANCE 15106456.105786
LOC1 -73.986357 lat 40.702645 lng
ME 40.702082 lat -73.984775 lng 
```

数字完全偏离实际距离约为 0.17 公里

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T22:24:49.357

你有几行说：

```
coord.longitude = (CLLocationDegrees)[venue.lat doubleValue];
coord.latitude = (CLLocationDegrees)[venue.lng doubleValue]; 
```

显然应该是：

```
coord.longitude = (CLLocationDegrees)[venue.lng doubleValue];
coord.latitude = (CLLocationDegrees)[venue.lat doubleValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:24:54.657

从`coord`开始`venue`，纬度和经度被向后分配。

这给了你意想不到的距离。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:30:30.113

看看你的输出：

```
LOC1 -73.986357 lat 40.702645 lng
ME 40.702082 lat -73.984775 lng 
```

你在我交换了经纬度

# c# - 使用 ExpressionVisitor 是否有任何性能注意事项？

> ID：14667106
> 
> 赞同：0
> 
> 时间：2013-02-02T22:16:48.400
> 
> 标签：c#, linq

我目前正在阅读 MSDN 文章“演练：创建 IQueryable LInQ 提供程序”，并且有很多使用 ExpressionVisitor。ExpressionVisitor 使用访问者模式遍历表达式树。

[http://msdn.microsoft.com/en-us/library/bb546158.aspx](http://msdn.microsoft.com/en-us/library/bb546158.aspx)

在我看来，像这样一遍又一遍地遍历表达式树对性能的影响很大。真的吗？在创建 IQueryProvider 时我应该关心这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:29:45.273

基本上，是的。表达式树可能会变得非常大，因此遍历它们并可能由于更改而创建副本可能需要一段时间。LINQ to SQL 和 EF 在客户端上使用的 CPU 通常比在 SQL Server 上多，因为它们过度操纵表达式 AST。它真的很严重，并且在探查器跟踪中出现了很长时间。

是否重要取决于您执行此操作的频率以及您的提供商还做了什么。不知道还能说什么。没有操作本身是慢的或快的。这取决于您需要什么以及执行它的频率。

也就是说，表情访问者是一种优雅的模式，并且有自己的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:30:50.237

并不真地。使用访问者模式解析抽象语法树是非常标准的。通常，在制作 IQueryable 提供程序时，解析表达式树中的少数节点所花费的时间与获取数据所花费的时间相比完全相形见绌。

# responsive-design - 作为 CSS sprite 的移动友好替代方案

> ID：14667113
> 
> 赞同：0
> 
> 时间：2013-02-02T22:17:23.750
> 
> 标签：responsive-design, sprite

CSS 翻转精灵很酷，但是对于响应式设计，我们现在使用图像（响应式）而不是 CSS 背景（不是）。响应式基于图像的链接是否有与 CSS sprites 等效的方法？或者，是否只有 Javascript 可以在悬停链接时从正常状态图像切换到悬停状态图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T22:36:04.657

由于我是[LazyLou](https://github.com/ozanmuyes/lazylou)的开发者，我可以建议你使用它。它支持响应式页面设计以及预加载功能。它可能会帮助你。

# jquery - jQuery load() 来自同一个文件的多个元素

> ID：14667117
> 
> 赞同：0
> 
> 时间：2013-02-02T22:17:44.967
> 
> 标签：jquery, ajax, jquery-load

有没有一种更简单的方法可以从同一个文件中获取元素而无需多次加载页面？

目前使用这种方法

```
$('.side-article-title').load(thisURL+' #item-title');
$(".side-article-subtitle").load(thisURL+' #item-subtitle');
$(".side-article-detail").load(thisURL+' #item-detail'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T22:22:34.170

```
//Load data
var temp = $('<div/>');
temp.load(thisURL);

//Display data
$('.side-article-title').html($('#item-title',temp));
$(".side-article-subtitle").html($('#item-subtitle',temp));
$(".side-article-detail").html($('#item-detail',temp)); 
```

# javascript - 根据另一个排列 1 个数组

> ID：14667119
> 
> 赞同：2
> 
> 时间：2013-02-02T22:17:53.403
> 
> 标签：javascript, arrays, sorting

尝试根据另一个数组的顺序排列一个数组

```
function Sort(old, new){
  var temp = [];
   for(var i=0; i<old.length; i++){
        temp[i] = old[new[i]];
   }
  return temp;
} 
```

是否可以在不使用`temp[]`额外数组的情况下实现相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:44:33.837

首先，我想指出，这`new`是一个可能应该避免作为变量名的关键字。

jQuery`map`将允许您这样做，尽管很有可能在内部使用临时变量。该项目的好处是它将继续改进，即使该功能目前效率低下，以后也可能会更有效，而不必以不同的方式调用它。

如果您不反对使用 jQuery，这里有一个单线：

```
var oldArray = ['a', 'b', 'c', 'd'],
    newOrder = [1, 3, 0, 2];

oldArray = jQuery.map(newOrder, function(val) { return oldArray[val]; }); 
```

那应该重新排序`oldArray`到`['b', 'd', 'a', 'c']`. 但是，您仍然要替换`oldArray`为新的数组对象。这实际上取决于您要完成的工作。我认为您无法完全避免临时变量，但根据您是为了简单、速度效率、内存效率还是其他原因，有不同的解决方案。

# git - 如何在推送时自动结帐？

> ID：14667128
> 
> 赞同：3
> 
> 时间：2013-02-02T22:18:41.907
> 
> 标签：git, githooks

考虑以下情况：

我有一个包含 javascript 项目代码的 git 存储库 foo.git。在此存储库中，有一个分支*生产*，其中包含由 Web 服务器提供的代码状态，该服务器从`/var/www/foo`. 此存储库是项目的主存储库。每个人都从/向它推拉。

每当有人推送到该特定分支时，是否可以`/var/www/foo`更新到*生产结帐？*您可以假设 git 守护进程（或用户 git，即所有人登录以通过 SSH 连接的用户）有权写入所述目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T07:11:21.890

您必须使用`git init --bare`. 然后使用`post-receive`钩子触发您的部署。如何部署取决于您。

## 我的部署策略

我通常会在`deploy`合乎逻辑的地方安排一个导演。然后每次结帐，我将最新的分支解压到最新推送的哈希`deploy/COMMIT_ID`所在的位置。`COMMIT_ID`签出完成后，您可以将符号链接重新指向最新的部署目录。

我常用的目录结构：

```
deploy.git/
deploy/
    a7922231/
    b2f0a2af/
    latest -> b2f0a2af 
```

### 解压更新

`git-checkout`我通常不使用 a ，而是`git-archive`将分支解压缩到目录中。

```
# Assuming current directory is deploy.git
HEAD=`cat refs/heads/master`
mkdir -p ../deploy/${HEAD}
git archive master | tar -x -C ../deploy/${HEAD} 
```

您的网络服务器可以指向`deploy/latest`，更新将或多或少是原子的。

我经常在生产中使用它，并且与在同一目录上解包相比有一些好处。

1.  回滚很容易
2.  您可以在不中断当前部署的情况下执行解包后程序，例如编译或安装依赖项

### 尖端

1.  每次更新，附加到**部署日志**，说明更新发生的时间，以及它们的哈希 id 是什么。这使得回滚*更*容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T04:18:45.547

您必须创建一个`post-receive`在您的文件中调用的文件`/git/foo.git/hooks directory`（基于我上面的评论）。像这样的东西（带有一些调试日志）：

```
#!/bin/sh

echo 'Hook called'
pullneeded=false

while read oldrev newrev refname
do
    echo "OLDREV $oldrev NEWREV $newrev REFNAME $refname"
    if [ "$refname" == "refs/heads/production" ]; then
        echo 'Pull needed'
        pullneeded=true
    fi
done

if [ $pullneeded ]; then
    echo 'Pull'
    cd /var/www/foo
    git --git-dir=/var/www/foo/.git pull
fi

echo 'Hook done' 
```

您必须设置您的 git 存储库`/var/www/foo`以跟踪其他存储库的*生产*分支。如果它在那里被称为*起源*，那么它是：

```
git branch --set-upstream production origin/production 
```

当然，*生产*分支必须在您的`/var/www/foo`存储库中签出。

**更新**

也许`post-update`钩子更合适（示例来自这里[https://stackoverflow.com/a/6597728/299788](https://stackoverflow.com/a/6597728/299788)）：

```
#!/bin/bash    

case " $* " in
*' refs/heads/production '*)
    cd /var/www/foo
    git --git-dir=/var/www/foo/.git pull
    ;;
esac 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:40:11.420

您可以使用以下命令将 git 存储库签出`foo.git`到目录中：`dir`

```
git archive | tar x dir 
```

# pagination - 如何在 PagedDataSource 中突出显示页码以对 Repeater 进行分页

> ID：14667143
> 
> 赞同：0
> 
> 时间：2013-02-02T22:20:55.290
> 
> 标签：pagination, repeater, linkbutton

我正在使用 PagedDataSource 来分页中继器，它工作正常，但有没有办法突出显示选定的页码或使其粗体。我尝试了 css、itemcommand 和 click 事件，但没有运气。

提前致谢

中继器：

```
<asp:Repeater ID="repeaterPager" runat="server" OnItemCommand="repeaterPager_ItemCommand">
      <ItemTemplate>
        <asp:LinkButton  CssClass="sayfaNo" ID="btnPage" CommandName="Page" CommandArgument="<%#Container.DataItem %>" runat="server">
<%# Container.DataItem %></asp:LinkButton>
      </ItemTemplate>
    </asp:Repeater> 
```

代码隐藏：

```
 private void MakeleleriGetir()
        {
          SqlConnection cnn = new SqlConnection(ConfigurationManager.ConnectionStrings[0].ConnectionString);
          SqlDataAdapter da = new SqlDataAdapter("SELECT p.PostID,p.Title,p.DateTime,p.PostShort,p.CategoryID,i.SmallFileName,c.CategoryName From Posts as p inner join Resimler as i ON p.PostID = i.PostID inner join Categories as c On p.CategoryID = c.CategoryID", cnn);

          DataTable dt = new DataTable();
          da.Fill(dt);

          PagedDataSource pds = new PagedDataSource();
          pds.DataSource = dt.DefaultView;
          pds.AllowPaging = true;
          pds.PageSize = 4;
          pds.CurrentPageIndex = CurrentPage;

          PageCount = pds.PageCount;

          btnPrevious.Enabled = !pds.IsFirstPage;
          btnNext.Enabled = !pds.IsLastPage;

          if (pds.PageCount > 1)
          {
            repeaterPager.Visible = true;
            ArrayList pages = new ArrayList();
            for (int i = 0; i < pds.PageCount; i++)
            {
              {
                pages.Add((i + 1).ToString());

              }
            }

            repeaterPager.DataSource = pages;
            repeaterPager.DataBind();
          }
          else
          {
            repeaterPager.Visible = false;

          }
          RepeaterPosts.DataSource = pds;
          RepeaterPosts.DataBind();
        }
 protected int CurrentPage
    {
      get
      { // look for current page in ViewState

        object o = this.ViewState["_CurrentPage"];

        if (o == null)
        {
          return 0;   // default to showing the first page
        }

        else
        {
          return (int)o;
        }

      }

      set
      {
        this.ViewState["_CurrentPage"] = value;
      }
    }

    public int PageCount
    {
      get
      {
        if (ViewState["_PageCount"] != null)
          return Convert.ToInt32(ViewState["_PageCount"]);
        else
          return 0;
      }
      set
      {
        ViewState["_PageCount"] = value;
      }

    }

    protected override void OnInit(EventArgs e)
    {
      base.OnInit(e);
      repeaterPager.ItemCommand += new RepeaterCommandEventHandler(repeaterPager_ItemCommand);
    }

    protected void repeaterPager_ItemCommand(object source, RepeaterCommandEventArgs e)
    {

      CurrentPage = Convert.ToInt32(e.CommandArgument) - 1;
      MakeleleriGetir();

    }

    protected override void OnLoad(EventArgs e)
    {
      base.OnLoad(e);

      MakeleleriGetir();
    }

    protected void btnNext_Click(object sender, EventArgs e)
    {
      CurrentPage += 1;
      MakeleleriGetir();
    }

    protected void btnPrevious_Click(object sender, EventArgs e)
    {
      CurrentPage -= 1;
      MakeleleriGetir();
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:47:36.003

逻辑：使用 ItemDataBound 事件并将 currentpage 与 btnPage 的当前值进行比较。您可以使用 FindControl 来获取当前的 btnPage 值。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T11:15:18.857

```
 protected void repeaterPager_ItemDataBound(object sender, RepeaterItemEventArgs e)
{

    //Enabled False for current selected Page index
    LinkButton lnkPage = (LinkButton)e.Item.FindControl("btnPage");
    if (lnkPage.CommandArgument.ToString() == (CurrentPage+1).ToString())
    {
        lnkPage.Enabled = false;
        lnkPage.BackColor = System.Drawing.Color.FromName("#FFCC01");
    }

} 
```

# python - Ipython raw_input 可以解决吗？

> ID：14667144
> 
> 赞同：2
> 
> 时间：2013-02-02T22:20:57.897
> 
> 标签：python, ipython, ipython-notebook

我正在运行一个 Python 程序，它想要接受 Ipython 笔记本不做的 raw_input。（一个已知的限制）

实现该功能的推荐方法是什么？（解决方法？）我想做的是能够运行程序，接受输入并响应..（将根据检索到的信息确定选择），并提示输入用户 ID 和密码信息..

当然，我希望尽可能少地对现有代码施加暴力。

我在 Ipython 文档中找到了 IPython.utils.io.raw_input_ext(prompt='', ps2='... ') 但它调用 raw_input 并得到相同的未实现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T06:07:20.063

IPython 的最后一个开发版本现在支持 notebook 中的 raw_input。（自 2013 年 5 月开始，供未来读者使用）

# c++ - 权重转换 C++

> ID：14667145
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:20:58.957
> 
> 标签：c++

嘿，所以我正在尝试一个提出这个问题的问题，请记住我只是在学习，但我不知道该怎么做，所以任何帮助都将不胜感激。

Q. 编写一个程序，根据用户输入将重量以 KG 为单位转换为磅和盎司，反之亦然。使用以下简单菜单： 重量转换选项：A) 公斤到磅和盎司。B) 磅和盎司到公斤。输入选项 A 或 B。

到目前为止，我有以下内容，但这就是我在卡住之前所能做的。

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
float kg, ounces;
int pounds;
char option;

    cout << "WEIGHT CONVERSION OPTIONS \n" << "     " << "A) KG to pounds: \n" << "     " << "B) Pounds to KG: \n " <<"Enter option A or B: \n";
    cin.get(option);

if(option == A)
    kg = option*2.2046;
    cout << kg;
else if(option == B)
    pounds = option/2.2046;
    cout << pounds;

system("PAUSE");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:29:59.363

几个问题：

*   您忘记在选项周围加上单引号。
*   你没有要求用户输入任何关于他们自己体重的信息。
*   您正在使用`system("PAUSE")`暂停屏幕，这不是一个好方法。
*   您有一个未使用的变量`ounces`.

> [可能的解决方案](http://ideone.com/AqrnZO)

# python - 使用python绘制相关矩阵

> ID：14667146
> 
> 赞同：2
> 
> 时间：2013-02-02T22:21:00.950
> 
> 标签：python

我想使用 python 绘制相关矩阵。我尝试过使用以下脚本

```
 corr_matrix=np.corrcoef(vector)
  imshow(corr_matrix, interpolation='bilinear')
  colorbar()
  show() 
```

矩阵的尺寸为 2500X2500。上面的代码产生了一个充满点的矩阵。但我想要光滑的表面。我怎么得到那个。

最佳修行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T22:37:08.987

“光滑表面”是什么意思，*为什么*要以这种方式可视化相关矩阵？

以下是可视化 [相关] 矩阵的两个有用示例。两者都包含解释以及 matplotlib 的示例代码。

1.  方格伪彩图 [http://glowingpython.blogspot.com/2012/10/visualizing-correlation-matrices.html](http://glowingpython.blogspot.com/2012/10/visualizing-correlation-matrices.html)

2.  Hinton 图 [http://www.scipy.org/Cookbook/Matplotlib/HintonDiagrams](http://www.scipy.org/Cookbook/Matplotlib/HintonDiagrams)

**更新：** 为了补充我的评论，这是一个 1000x1000 相关矩阵的伪彩色可视化，它在我简陋的笔记本电脑上没有遇到内存问题：

![在此处输入图像描述](../Images/008a3b62b0d81a6ad4718cdbcca440b5.png)

请注意，虽然第 20 行与其他变量相关，第 40 行与第 80 行相关，但在 GlowingPython 示例的风格中，此信息被矩阵的绝对大小所掩盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T10:12:45.430

您可以根据相关矩阵中获得的值对列进行排序。

# php - PHP $_GET 方法 URL

> ID：14667152
> 
> 赞同：-3
> 
> 时间：2013-02-02T22:22:22.080
> 
> 标签：php, mysql

> **可能重复：**
> [Php $_GET 方法](https://stackoverflow.com/questions/14666908/php-get-method)

当我进入这个链接

```
http://www.LiveChat.com/php/chatBody.php?chat_members_code=9BYELZ0WxdQr4An 
```

我收到此错误，但我不知道为什么：

```
Unknown column '9BYELZ0WxdQr4An' in 'where clause' 
```

这是代码：

```
$sql = "SELECT * FROM chat WHERE chat_members_code = " . mysql_real_escape_string($_GET['chat_members_code']);
$chat = mysql_query($sql);
if(!$chat) {
echo mysql_error();
}else {

while($row = mysql_fetch_array($chat)) {

$chat_id = $row['id'];
$user_1_id = $row['user_1_id'];
$user_1_fullname = $row['user_1_fullname'];
$user_1_username = $row['user_1_username'];
$user_2_id = $row['user_2_id'];
$user_2_fullname = $row['user_2_fullname'];
$user_2_username = $row['user_2_username'];
$chat_body = $row['chat_body'];
$chat_members_code = $row['chat_members_code'];
$chat_time = $row['chat_time'];
$chat_date = $row['chat_date'];
$chat_datetime = $row['chat_datetime'];
}
} 
```

有谁知道错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T22:23:45.283

您忘记将您的价值用引号括起来：

```
$sql = "SELECT * FROM chat WHERE chat_members_code = '" . mysql_real_escape_string($_GET['chat_members_code']) . "'"; 
```

# jquery - 管理从父框架提交的 iframe 表单？

> ID：14667158
> 
> 赞同：1
> 
> 时间：2013-02-02T22:23:20.420
> 
> 标签：jquery, forms, iframe, submit

我想从父框架更改 iframe 中表单的提交功能。下面的代码应该做到这一点，但没有任何结果。并且在 chrome 的调试器中没有显示错误。怎么了？

```
<iframe src="test.php" id="frame"></iframe>

<script type="text/javascript">
$("#frame").contents().find("form").submit(function(){
    return true;
});
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T22:36:03.103

确保在加载此 iframe 的内容后，通过将调用包装在`.load`回调中来操作它的 DOM：

```
<iframe src="test.php" id="frame"></iframe>

<script type="text/javascript">
    $('#frame').load(function() {
        $(this).contents().find('form').submit(function() {
            return false;
        });
    });
</script> 
```

# jquery - 停止以下 JQuery 函数的旋转

> ID：14667163
> 
> 赞同：0
> 
> 时间：2013-02-02T22:24:30.317
> 
> 标签：jquery, html, css

我希望旋转（setInterval）在 p:last-child 之后停止，但我做不到。谁能帮帮我吗？主要目的是只旋转一次，然后在 div 中的 p 的最后一个孩子处停止。

```
$(document).ready(function(){
$('.fadein').delay(4000).fadeIn(1000);
$('#container p:gt(0)').hide();
    setInterval(function(){
    $('#container p:first-child').fadeOut('slow')
     .next('p').slideDown('slow')
     .end().appendTo('#container');
           },
     3000
    );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:31:53.757

我不确定你真正想做什么，但我可以建议你迭代`p` `children`并使用`setTimeout()`instead`setInterval()`函数，并检查你迭代的元素是否是`last`元素，然后停止迭代..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:35:44.100

使用变量来保存计时器，当您到达最后一项时，清除计时器。另一种方法是运行 .each() 内部有延迟。这将允许您只运行一次循环。

```
 var all_p_elements = $('#container p');
    all_p_elements.each(function(){
       $(this).fadeout().next().slideDown().end().appendTo().delay(3000);
     }); 
```

类似的东西，未经测试......只是伪代码。

**更新：**

对stackoverflow的一点研究会带来好处......

你的答案就在这里：[如何在 jquery 上一一显示每个 div？](https://stackoverflow.com/questions/2173227/how-to-show-each-div-one-by-one-on-jquery)

这是 jsFiddle [http://jsfiddle.net/syGVW/4/中的一个简单示例](http://jsfiddle.net/syGVW/4/)

只需继续修改它，直到它完成您想要的所有效果。

# ocaml - 大小为 7 且高度为 3 的二叉搜索树

> ID：14667164
> 
> 赞同：0
> 
> 时间：2013-02-02T22:24:31.583
> 
> 标签：ocaml

我正在构建一个大小为 7、高度为 3 的二叉搜索树。我只需要对其进行硬编码，而不是通过函数生成它。

这是我硬编码的树

```
Node (Node (Node (Empty, 0, Empty), 1, 
Node (Empty, 3, Empty)), 5
Node (Empty, 7, Node (8, 9, Empty)))) 
```

我想要的是节点 9 有两个孩子（8 和空）。但是，我在 8 上不断收到错误消息，提示“此表达式的类型为 int，但预期的表达式为 int 树类型”。我该如何纠正？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:56:47.527

你不能`8`为叶子写作。你必须写`Node (Empty, 8, Empty)`。

```
type tree = Empty | Node of tree * int * tree

(* the tree

           5
         /  \
        /    \
       1      7         
     /  \      \
    0    3      9
               /
              8
*)
let t =
  Node (
    Node (Node (Empty, 0, Empty),
          1, 
          Node (Empty, 3, Empty)),
    5,
    Node (
      Empty,
      7,
      Node (Node (Empty, 8, Empty),
            9,
            Empty)
    )
  )

(* With an auxliary function we can do this to get the same tree: *)

let leaf k = Node (Empty, k, Empty)

let t' =
  Node (
    Node (leaf 0, 1, leaf 3),
    5,
    Node (Empty, 7, Node (leaf 8, 9, Empty))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T22:28:55.257

Node 的第一个元素必须是树，而不是像`int`.

因此，您不能将 8 放在预期有一棵树的地方。可能，您的意思是拥有`Node (Empty, 8 Empty)`而不是`8`.

# android - Android：位图内存不足错误

> ID：14667171
> 
> 赞同：2
> 
> 时间：2013-02-02T22:25:00.460
> 
> 标签：android, memory, bitmap, heap-memory

我面临以下问题：当我的应用程序被破坏并重新创建多次（例如通过锁定和解锁屏幕）时，它会崩溃并出现以下错误：

```
02-01 19:24:12.000: E/AndroidRuntime(22362): java.lang.OutOfMemoryError: (Heap Size=62755KB, Allocated=55237KB)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at android.graphics.Bitmap.nativeCreateScaledBitmap(Native Method)
02-01 19:24:12.000: E/AndroidRuntime(22362):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:744) 
```

现在，我已经阅读了几篇关于这个错误以及如何修复它的帖子，但到目前为止似乎都没有帮助。所以这就是我在我的应用程序中处理图像的方式： 我的应用程序只有一个看起来有点像这样的活动：

```
public class MainActivity extends Activity {

static MenuView mv;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    [...]
    mv = (MenuView) findViewById(R.id.menuview);
    mv.setOnClickListener(new KlickLauscher());
}

public void onDestroy() {
    super.onDestroy();
    mv.destroy(); 
    System.gc();
} 
```

MenuView 看起来有点像这样：

```
public class MenuView extends View {

MyBitmap button;

public MenuView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initialize();
}

public void initialize() {
     button = new MyBitmap("R.drawable.bitmap1");
}

public void onDraw(Canvas c) {
    c.drawBitmap(button.getBmp(),0,0,mPaint);
}   

public void destroy() {
    button.destroy();
} 
```

最后但并非最不重要的一点是，MyBitmap 类看起来像这样：

```
class MyBitmap {

Bitmap bmp;

 public MyBitmap(int r) {
  bmp = MyBitmap.createBmp(r);
 }

 public Bitmap getBmp() {
  return bmp;
 }

 static Bitmap createBmp(int r) {
  // Some irrelevant code
  return Bitmap.createScaledBitmap(BitmapFactory.decodeResource(mv.getContext().getResources(),r), width, height, true);
 }

 public void destroy() {
  bmp.recycle();
 }
} 
```

我的应用程序中的每一个 Bitmap 都是使用这个 MyBitmap 类实现的，并且当调用 onDestroy() 时，它们中的每一个都会被回收。长话短说：有谁知道还有什么可能导致错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T22:33:47.863

尝试对位图进行下采样，并根据您的需要使用正确的位图格式，如此[处](http://developer.android.com/training/displaying-bitmaps/index.html)所述。

另外，我认为其中的代码`createBmp`实际上创建了 2 个位图，因此您可以回收不使用的位图。

为什么首先要缩放位图？您可以将 设置`imageView`为缩放它。

# php - 整个站点的单个类别表或不同用例的不同类别表

> ID：14667172
> 
> 赞同：0
> 
> 时间：2013-02-02T22:25:05.937
> 
> 标签：php, mysql, sql, database

`product`表有分类，`media`表有分类，`ticket`表有分类。

其中每一个都与`category`表有 HasMany 关系。有两种方法：

1.  有一个可能带有类型列的**通用类别表，并有像 MediaCategory 等中间表。**
2.  拥有像 MediaCategory 这样的**单独表格**，每个表格都具有与类别相同的结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:42:30.033

第一个更好，我认为就完整性而言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:24:15.783

如果类别不共享，那么最好（在大多数情况下）为每个类别类型提供单独的表。

理由如下：

数据库是数据关系完整性的看门人。在编写良好的程序中不应该有任何外键违规异常，即代码不依赖数据库来保持数据的关系完整性。但是，如果出现错误，数据库中的关系会使错误不太可能导致数据损坏。

当对媒体、产品等及其有效类别使用单独的表时，可以通过外键关系轻松维护关系完整性；基本上媒体表中的任何记录都可以属于媒体类别表中的任何类别。确保关系：

```
"Records in media table can belong to any category of type 'media' in 
the categories table" 
```

在数据库级别不太直接。

话虽如此，解决数据结构重复的问题会使整个底层结构变得可疑。在您的情况下可能并非如此，但您应该查看需要引入类别的基础用例，并查看它们是否以不同的方式更好地服务（例如自由文本搜索索引关键字。）

# python - Python IO：使用格式说明符读取文件

> ID：14667179
> 
> 赞同：0
> 
> 时间：2013-02-02T22:26:24.120
> 
> 标签：python, format

我想读取一个非常糟糕的文本文件，因为每行中的值有时没有用空格或逗号分隔（所以我不能使用 .split()）。我想像在 FORTRAN 中那样阅读它，在那里我准确地告诉它每个值在哪里。这就是我正在尝试的。有谁知道更好的方法来做到这一点？谢谢 ！

```
f=open('f.out','r')

lines = f.readlines()

nLines = len(lines)
data = {}

keys = {'SPE':[0, 2, np.int],              #I2
      'SPEISO':[2, 3, np.int],         #I1
      'wnum':[3,15, np.float64],       #F12.6
      'S':[15, 25, np.float64],     #E10.3
      'Ecoeff':[25, 35, np.float64],     #E10.3
      'AGA':[35, 40, np.float64],     #F5.5
      'SGA':[40, 45, np.float64],     #F5.4
      'ELO':[45, 55, np.float64],     #F10.4
      'N'  :[55, 59, np.float64],     #F4.2
      'FSH':[59, 67, np.float64],     #F8.6
      'TRS':[67, 127, np.str],
      'IERR': [127, 133, np.int],
      'IEFF': [133, 145, np.str],
      'other': [145,160, np.str]  }

for k in keys:
  data[k] = np.zeros(nLines)

for i, l in enumerate(lines):
 print i
  for k in keys:
    print k
    data[[k][i]] = l.format(keys[k]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:36:13.107

您也许可以使用[pandas](http://pandas.pydata.org/)库中的[read_fwf](http://pandas.pydata.org/pandas-docs/dev/io.html#files-with-fixed-width-columns)函数。

就像是：

```
import pandas
pandas.read_fwf('f.out', 
   colspecs=[x[:2] for x in keys.values()],
   dtype=[x[2] for x in keys.values()]
   ) 
```

# php - 在 localhost 上设置 Facebook 登录

> ID：14667180
> 
> 赞同：4
> 
> 时间：2013-02-02T22:27:08.540
> 
> 标签：php, facebook, localhost, facebook-apps, facebook-login

我一直按照此处概述的步骤创建 Facebook 应用登录：http: [//developers.facebook.com/docs/howtos/login/server-side-login/](http://developers.facebook.com/docs/howtos/login/server-side-login/)

我在第 3 步。我在 localhost 上设置它以进行开发，然后我将使用不同的 App ID 发布到 Azure 网站。不过，我想先在 localhost 上运行它。（我还没有尝试使用非本地主机域。）

在我的 Facebook 应用程序配置页面上，我设置了几个相关字段：站点 URL：http://localhost：8052/（添加空间以允许提交到 Stack Overflow）应用程序域：localhost

如果没有设置 Facebook 代码，main.php 将重定向到登录页面。这工作正常。

```
<head>
<?php
   if(!isset($_SESSION['code'])) {
      echo ('<meta http-equiv="REFRESH" content="0;url=/login.php" />');
   }
?>
</head> 
```

login.php 使用从他们的示例中复制的代码重定向到 Facebook 的登录页面。

```
<?php

   include '/lib/url.php';

   $app_id = "XXXXX";
   $app_secret = "XXXXX";
   $my_url = CreateUrlForPage('welcome.php');

   session_start();

   $code = '';
   if(!isset($_REQUEST["code"])) {
     $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
     $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . $_SESSION['state'];

     echo $my_url.'<br/>';
     echo $dialog_url.'<br/>';
     echo("<script> top.location.href='" . $dialog_url . "'</script>");
   }
?> 
```

显然，我在上面混淆了我的 App ID。

我的“CreateUrlForPage”函数生成的 URL 看起来很好，就像 facebook 登录 URL 一样：

```
http://localhost:8052/welcome.php
https://www.facebook.com/dialog/oauth?client_id=XXXX&redirect_uri=http%3A%2F%2Flocalhost%3A8052%2Fwelcome.php&state=XXXX 
```

（同样，这里有些混淆。实际值看起来不错。第一个是整数，第二个是长十六进制字符串。）

当我导航到 http:// localhost : 8052/login.php 时，页面重定向到 Facebook 并给出一个完全无用的错误：“发生错误。请稍后再试。”

我查看了 Stack Overflow 上的其他一些帖子，但它们并没有解决我的问题。

我得到的错误看起来就像这里描述的错误： [本地主机上的 Facebook 应用程序登录错误](https://stackoverflow.com/questions/9654396/facebook-application-login-error-on-localhost) 提供的建议是设置域和站点 URL，我已经这样做了。

这个问题也有一个链接：[Running Facebook application on localhost](https://stackoverflow.com/questions/5133075/running-facebook-application-on-localhost) 同样，他们建议使用 Site URL。他们还谈到了 app-canvas，这不是我正在使用的东西，我看不出它与登录有什么关系。

值得一提的是，在我设置站点 URL 和域之前，我遇到了一个不同的错误 - 告诉我需要设置站点 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:19:42.067

这段代码对我有用。仔细检查您的 facebook 应用程序 ID，并且我的网站 url 设置为 http://localhost:8052/ 不需要设置登录域名谢谢

[http://gamma.owlweb.com.ua/index.php/?route=account/register/fb](http://gamma.owlweb.com.ua/index.php/?route=account/register/fb)

```
<?php

$app_id = "xxx";    $app_secret = "xxx"; 
$my_url ="http://localhost:3080/abc.php";

session_start();

$code = '';    

if(!isset($_REQUEST["code"])) {
  $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
  $dialog_url = 
    "https://www.facebook.com/dialog/oauth?client_id=".$app_id
    ."&redirect_uri=".urlencode($my_url)
    ."&state=".$_SESSION['state'];

  echo $my_url.'<br/>';
  echo $dialog_url.'<br/>';
  echo("<script> top.location.href='" . $dialog_url . "'</script>");
} 
?> 
```

# ruby-on-rails - rake db:migrate 给出“意外\n”错误

> ID：14667183
> 
> 赞同：8
> 
> 时间：2013-02-02T22:27:15.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我曾经`Rails scaffolding`使用终端的命令制作模型：

```
rails generate scaffold Venue venueid:string, venueName:string, venueAddress:string, venueCity:string, venueState:string, venueZip:integer, venuePhone:string, venueAge:int 
```

一切似乎都可以安装或生成，但是当我运行时`rake db:migrate`出现以下错误：

```
rake aborted!
/Users/Banderson/Documents/demo/db/migrate/20130202222224_create_venues.rb:5: syntax error, unexpected '\n'

      t.string, :venueName
^
org/jruby/RubyKernel.java:1062:in `require'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activesupport-3.2.10/lib/active_support/dependencies.rb:251:in `require'
/Users/Banderson/Documents/demo/db/migrate/20130202222224_create_venues.rb:537:in `load_migration'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:533:in `migration'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:528:in `migrate'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:720:in `migrate'
org/jruby/RubyProc.java:270:in `call'
org/jruby/RubyProc.java:220:in `call'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:775:in `ddl_transaction'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/transactions.rb:208:in `transaction'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:775:in `ddl_transaction'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:719:in `migrate'
org/jruby/RubyArray.java:1620:in `each'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:700:in `migrate'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:570:in `up'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/migration.rb:551:in `migrate'
/Users/Banderson/.rvm/gems/jruby-1.6.8/gems/activerecord-3.2.10/lib/active_record/railties/databases.rake:179:in `(root)'
org/jruby/RubyProc.java:270:in `call'
org/jruby/RubyProc.java:220:in `call'
org/jruby/RubyArray.java:1620:in `each'
org/jruby/RubyArray.java:1620:in `each'
org/jruby/RubyKernel.java:1087:in `load'
Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

我做错了什么，或者我该如何解决？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-02T22:31:03.367

尝试

```
rails generate scaffold Venue venueid:string venueName:string venueAddress:string venueCity:string venueState:string venueZip:integer venuePhone:string venueAge:int 
```

反而。您不应该在每个字段之间使用逗号。

使用逗号，您将在其中生成迁移：

```
create_table :venues do |t|
  t.string, :venueid
  t.string, :venueName
  t.string, :venueAddress
  t.string, :venueCity
  t.string, :venueState
  t.integer, :venueZip
  t.string, :venuePhone
  t.int :venueAge

  t.timestamps
end 
```

如您所见，每个 t.string/integer/etc. 方法调用在给出任何参数之前有一个逗号，这是无效的。如果这样做：

```
puts, "hi" 
```

我得到错误

```
syntax error, unexpected '\n', expecting tCOLON2 or '[' or '.' 
```

这与您遇到的错误相似。

tldr：不要在生成器中使用逗号

# security - 为什么需要同源策略的简单示例

> ID：14667189
> 
> 赞同：39
> 
> 时间：2013-02-02T13:19:22.983
> 
> 标签：security, web, same-origin-policy

我读过关于`Same Origin Policy`，但为了更好地理解这个问题：任何人都可以写一个简单的代码（用任何语言）来演示 SOP 停止的攻击吗？

在 SOP 出现之前，怎么可能攻击某人？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-02T21:22:12.163

```
<iframe id="bank" src="https://yourbank.com"></iframe>

<script>
    window.onload = function() {
        document.getElementById('bank').contentWindow.document.forms[0].action =
            'http://example.com';
    };
</script> 
```

Javascript 代码更改了表单的操作属性（可以说是目的地），因此当您提交表单时，您会将凭据发送给我，而不是您的银行。

如果我在我的服务器上设置一个 PHP 脚本将您重定向到您的银行，您甚至不会注意到它。

使用同源策略，这种攻击是不可能的。我域中的站点无法读取或修改银行网站的内容。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-11-08T16:13:00.653

**攻击示例 1：使用 HTML 表单的跨站请求伪造 (CSRF)**

在`evil.com`攻击者的页面上放了：

```
<form method="post" action="http://bank.com/trasfer">
    <input type="hidden" name="to" value="ciro">
    <input type="hidden" name="ammount" value="100000000">
    <input type="submit" value="CLICK TO CLAIM YOUR PRIZE!!!">
</form> 
```

如果没有进一步的安全措施，这将：

*   请求确实被发送。SOP 不禁止发送此请求。
*   `bank.com`它包括您从中登录的身份验证 cookie

它是同步器令牌模式，单独，即使没有 SOP，也阻止了它的工作。

**同步器令牌模式**

对于 上`bank.com`的每一个表单，开发者都会生成一个一次性随机序列作为隐藏参数，并且只有在服务器获取到参数时才接受请求。

例如，Rails 的 HTML 助手会自动向`authenticity_token`HTML 添加一个参数，因此合法的表单如下所示：

```
<form action="http://bank.com/transfer" method="post">
  <p><input type="hidden" name="authenticity_token"
            value="j/DcoJ2VZvr7vdf8CHKsvjdlDbmiizaOb5B8DMALg6s=" ></p>
  <p><input type="hidden" name="to"      value="ciro"></p>
  <p><input type="hidden" name="ammount" value="100000000"></p>
  <p><button type="submit">Send 100000000$ to Ciro.</button></p>
</form> 
```

如前所述：[了解 Rails Authenticity Token](https://stackoverflow.com/questions/941594/understanding-the-rails-authenticity-token/26895980#26895980)

所以如果`evil.com`发出一个单次请求，他永远猜不到那个令牌，服务器会拒绝交易！

另请参阅：[OWASP 的同步器令牌模式](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#General_Recommendation:_Synchronizer_Token_Pattern)。

**攻击示例 2：使用 JavaScript AJAX 的跨站请求伪造 (CSRF)**

但是，是什么阻止了`evil.com`使用 JavaScript 发出 2 个请求，就像合法浏览器会做的那样：

1.  令牌的 XHR GET
2.  包含好令牌的 XHR POST

所以`evil.com`会尝试这样的事情（jQuery 因为懒惰）：

```
$.get('http://bank.com/transfer')
// Parse HTML reply and extract token.
$.post('http://bank.com/transfer', {
  to: 'ciro',
  ammount: '100000000',
  authenticity_token: extracted_token
}) 
```

**这**就是 SOP 发挥作用的地方。尽管`$.get`和`$.post`确实像 HTML 表单一样发送经过身份验证的请求，但发送者的浏览器阻止 JavaScript 代码读取 HTML 回复，因为请求被发送到单独的域！

Chromium 开发者控制台显示一个错误类型：

> 从源“http://evil.com”访问“http://bank.com”中的 XMLHttpRequest 已被 CORS 策略阻止：请求的资源上不存在“Access-Control-Allow-Origin”标头。

已在以下位置询问：[为什么我的 JavaScript 代码会收到“请求的资源上不存在“访问控制允许来源”标头”错误，而邮递员却没有？](https://stackoverflow.com/questions/20035101/why-does-my-javascript-code-get-a-no-access-control-allow-origin-header-is-pr)

**为什么不直接发送交叉请求 cookie 呢？**

我在问自己：但是如果实现有这样的规则：“允许任何请求，但只在当前域 XHR 上发送 cookie”怎么办？

但这仍然允许另一种类型的攻击：当身份验证不是基于 cookie，而是基于请求的源 (IP) 时。

例如，您在公司的 Intranet 中，您可以从那里访问内部服务器，该服务器从外部不可见并提供秘密数据。

**是否禁止所有跨域请求？**

即使忘记 CORS，**不**，我们每天都在做！

来自[MDN](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)：

*   通常允许跨域写入：链接、重定向和表单提交。

*   通常允许跨域嵌入：图像、外部 CSS 和 Javascript、iframe。

*   通常不允许跨域读取：XHR（上面的示例），`iframe`读取。

    但是，读取访问权限通常会因嵌入而泄露。例如，您可以读取嵌入图像的宽度和高度、嵌入脚本的操作或[嵌入资源的可用性](https://bugzilla.mozilla.org/show_bug.cgi?id=629094)（因此可能会在用户登录或未登录给定域的情况下）

**其他预防方法**

*   检查是否存在某些标头，例如`X-Requested-With`： - [X-Requested-With 标头有什么意义？](https://stackoverflow.com/questions/17478731/whats-the-point-of-the-x-requested-with-header) - [https://security.stackexchange.com/questions/23371/csrf-protection-with-custom-headers-and-without-validating-token](https://security.stackexchange.com/questions/23371/csrf-protection-with-custom-headers-and-without-validating-token) - [X-Requested-With 标头服务器检查是否足以防止 CSRF ajax 驱动的应用程序？](https://stackoverflow.com/questions/3315914/is-an-x-requested-with-header-server-check-sufficient-to-protect-against-a-csrf)
*   检查`Origin`标头的值：[https ://security.stackexchange.com/questions/91165/why-is-the-synchronizer-token-pattern-preferred-over-the-origin-header-check-to](https://security.stackexchange.com/questions/91165/why-is-the-synchronizer-token-pattern-preferred-over-the-origin-header-check-to)
*   重新认证：再次询问用户密码。对于每个关键操作（银行登录和转账、大多数网站中的密码更改）都应该这样做，以防您的网站被 XSSed。缺点是用户必须多次输入密码。

**其他预防方法：智威汤逊**

[JSON Web Token](https://jwt.io)是 2020 年左右 cookie + 同步器令牌模式的相当流行的替代方案。

这个方法的作用是：

*   将签名令牌存储在`window.localStorage`
*   每当您想向服务器发出经过身份验证的请求时，请发送一个 header `Authentication: <token>`。请注意，这只能通过 JavaScript 完成。

此方法之所以有效，是因为与 cookie 不同，`localStorage`它仅在您从网站本身（通过 JavaScript）发出请求时可用，从而分配同步器令牌。

然后，当用户第一次访问该网站时，他们最初会被注销，并显示一个虚拟加载页面。

然后浏览器运行刚刚从服务器接收到的 JavaScript，读取`localStorage`（现在我们已经在正确的域中）并向 API 路径发送经过身份验证的 GET 请求，以仅获取没有 HTML 的数据，通常为 JSON。

最后，JavaScript 在浏览器上呈现该数据。

[由于单页应用程序](https://en.wikipedia.org/wiki/Single-page_application)的流行，这种方法变得特别流行，其中最简单的实现方法是这个两步获取虚拟页面，然后用 API 数据填充它。

所以这基本上进行了权衡：

*   好处：
    *   更容易实现，因为每个表单上都没有同步器
    *   通常的 SPA 优势：在初始请求后您只获得数据，而不是 HTML 标记
*   缺点：
    *   通常的SPA缺点：
        *   在第一次加载期间，用户可能会看到令人讨厌的加载虚拟页面元素
        *   没有 JavaScript 网站是不可见的

**也可以看看**

*   [https://security.stackexchange.com/questions/8264/why-is-the-same-origin-policy-so-important](https://security.stackexchange.com/questions/8264/why-is-the-same-origin-policy-so-important)
*   [为什么 XMLHttpRequest 的同源策略](https://stackoverflow.com/questions/1830050/why-same-origin-policy-for-xmlhttprequest)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-29T03:11:56.120

除了上面的答案，浏览器实际上对不同的跨域请求采取了不同的操作。

对于不进行潜在危险更改的请求（那些所谓的**“简单”请求**，例如，带有允许标头的 GET 请求），浏览器将继续向跨域站点发出请求并检查响应标头如果`Access-Control-Allow-Origin`存在。否则，脚本将无法访问该响应的任何内容。

对于这种情况，一个示例可能是，SOP 阻止攻击者向您发送网络钓鱼网页，并使用您的 cookie 从那里向您的银行网站发出 GET 请求，以获取访问您帐户的令牌。

对于可能进行潜在危险更改的请求（那些所谓的**“预检”请求，例如 PUT 请求），浏览器将首先尝试使用**[OPTIONS 方法](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/OPTIONS)向跨域站点发出请求。如果允许发出实际请求，此请求将与跨域站点进行检查。如果没有，浏览器甚至不会发送实际请求。

对于这种情况，一个示例可能是，SOP 阻止攻击者使用您的 cookie 向您的银行网站发出 PUT 请求以修改您的密码。

有关浏览器如何确定请求是否“简单”等详细信息，请参阅[https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)。

Also, since both scenarios involve using cookies from cross-domain website, why not just ban cookie usage when cross domain requests are made? 1\. As pointed out by Ciro, the authentication may be based on IP address, instead of cookies. In that case, ban cookie usage won't help. 2\. In other scenarios, for example, you actually own both sites, it may be useful to set cookies using one site, and make requests from another site using those cookies.

# javascript - 在选择器中使用 :nth-child 忽略不可见元素

> ID：14667198
> 
> 赞同：1
> 
> 时间：2013-02-02T22:28:51.313
> 
> 标签：javascript, jquery

我有一个`<li>`元素列表，我用`:nth-child`它来定位每个 3rd 和 4th 元素的特定子元素，并给它们一个额外的 class `.right`。

但是，当我隐藏一些元素（比如说，第一个或第二个列表项）时，它不能正常工作。我只想将“正确”类添加到*可见*列表项的子项。我怎样才能做到这一点？

这是我正在使用的代码：

```
$(".ilist:visible:nth-child(4n+3)").find(".window").addClass("right");
$(".ilist:visible:nth-child(4n+4)").find(".window").addClass("right"); 
```

我`.right`用这个删除所有类：

```
$(".ilist .window.right").removeClass("right"); 
```

HTML结构：

```
<ul>
   <li class="ilist">
      ...
      <div class="name">Name (Search works with it)</div>
      <div class="window"></div>
   </li>

   ...
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:10:32.317

要将类添加到每个可见列表项的子项，您可以首先找到所有可见列表项，然后按它们在集合中的排名过滤它们：

```
$(".ilist:visible").filter(function(index){
    return (index % 4 == 0) || (index % 4 == 3);
}).find(".window").addClass("right"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:58:19.050

隐藏元素这一事实不会改变其在 DOM 树中的位置，因此`nth-child(4n+3)`如果隐藏任何同级列表项也不会改变。

当您切换某些元素列表项的可见性时，您必须重置您的`right`类，并重新应用到适当的元素。

您可以通过将函数传递给`addClass`，而不是新的类名来做到这一点。此函数将接收匹配元素的索引作为第一个参数，您可以使用它来检查它是第 3 个还是第 4 个。如果是，则返回您要应用的新类名：

```
$(".ilist .window.right").removeClass("right");
$(".ilist:visible .window").addClass(function(i, currentClass){
    return (i == 2 || i == 3) ? "right" : "";
}); 
```

现场演示[http://jsfiddle.net/6TMmJ/](http://jsfiddle.net/6TMmJ/)

# python - python & twain : 使用 TWAIN 逐行访问扫描仪 CCD

> ID：14667208
> 
> 赞同：0
> 
> 时间：2013-02-02T22:30:18.800
> 
> 标签：python, twain

我想使用台式扫描仪的 CCD 作为检测器来构建分光光度计。

TWAIN 应该允许我通过扫描仪的现有 USB 接口来做到这一点（即从扫描仪单元中移除 CCD，并在没有扫描硬件的情况下使用它）。

任何现有的 python twain 包是否足够细粒度以重复访问桌面扫描仪 CCD 的单行输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T21:25:12.420

TWAIN 不允许您从设备读取单行，它是一个比这更高级别的 API。即使当 TWAIN 正在传输图像数据的缓冲区时，驱动程序也会假设它必须对数据应用各种校正 - 例如，校正整个条形的非均匀照明，您必须对其进行建模和撤消。

我认为您最好搜索 CCD 的 USB 接口，或某种可以让您更直接地与传感器对话的采集卡。那里有很多爱好者在做这些事情。

# java - 在游戏中使用图形的最佳方式

> ID：14667210
> 
> 赞同：4
> 
> 时间：2013-02-02T22:30:34.867
> 
> 标签：java, swing, animation, awt, java-2d

我是Java和一般编程的新手，我正在尝试用宇宙飞船和外星人编写一个小型射击游戏，但在图形方面遇到了很多麻烦。似乎我混合了很多不同类型的组件。

我该怎么做才对？
- 我应该使用 Swing`JFrame`然后添加一个`Graphics`对象吗？
- 我应该先制作一个面板然后在上面添加图形吗？
- 或者也许我应该使用画布而不是 JPanel？

有很多选择，在网上搜索答案让我很困惑。有些人建议使用该`paint()`方法，而其他人则在使用`paintComponent()`...

以正确顺序放置图形的首选方式是什么？我应该使用哪些类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T22:41:24.097

对于*严肃*的游戏，不要使用 Swing，而是使用其他更特定于游戏的 GUI 库，例如[LWJGL](http://www.lwjgl.org/)。对于简单的游戏，Swing 是可以的，但请务必先阅读图形教程，因为您对如何绘制的假设可能需要更改（我知道我的假设是这样）。例如，您不会使用 Graphics 类字段，但*通常会*`paintComponent`在 JComponent 的方法中被动绘制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T22:42:23.693

对于简单的游戏，Swing 很好，您可以依赖以下内容：

1.  使用 Swing 并忘记 AWT。使用更少的代码，您将获得更好的结果。
2.  使用 Swing Timer 调整游戏节奏
3.  对于您的每个组件，扩展`JComponent`或`JPanel`覆盖`paintComponent`。仅`paintComponent`执行绘图操作（不要更新模型或修改组件的状态）。
4.  每当你想画东西时，修改你的组件状态然后调用`repaint()`
5.  要处理图层，您可以随时使用`JLayeredPane`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T03:19:43.923

我可以看到@Hovercraft 建议的使用游戏 API 的感觉，但感觉很多简单的游戏都可以没有它。

我同意@Guillaume 的前两点，但之后往往会朝着不同的方向发展。

让我们假设游戏：

1.  是固定大小（即不可调整大小）。
2.  没有组件出现在它上面。

在这种情况下，我倾向于`BufferedImage`在标签中显示的中进行渲染。

## 具体问题的答案

> 我应该使用 Swing JFrame 而不是将其添加为 Graphics 对象吗？

那不会编译。所以不行。

> 我应该先制作一个面板然后在上面添加图形吗？

这基本上是纪尧姆的建议，尽管我更喜欢使用图像作为画布。

> 或者也许我应该使用画布而不是 JPanel？

如果你的意思是“画布”，`java.awt.Canvas`那么没有。
如果你的意思是，`java.awt.image.BufferedImage`那么是的。

> 有些人建议使用该`paint()`方法，而其他人则在使用`paintComponent()`...

这是一个常见的混淆，因为万维网上有太多旧的和糟糕的代码。

唯一可以使用覆盖`paint(Graphics)`的组件是 AWT 和 Swing***顶级***容器的组件，例如`JFrame`、`JApplet`或`JWindow`.

*   AWT 是上个千年的 GUI 组件工具包。我们应该在这个千年使用 Swing。
*   自定义绘制整个 GUI 是不寻常的。相反，它可能会被添加为报告玩家健康、剩余生命、得分等的主要组件。出于这个（和其他）原因，最好渲染到“非顶级容器”，这会让我们看到在`JComponent`or中进行自定义绘画`JPanel`。

对于扩展面板或组件中的自定义绘画，覆盖`paintComponent(Graphics)`. 这是为这些组件进行自定义绘制的*正确方法。*

## 其他提示

游戏的每个对象（例如`Ship`、`Enemy`、`Missile`）都应该知道如何绘制自己。在绘画例程中保留对每个游戏元素的引用，并简单地调用`gameElement.paint(Graphics)`（或`Graphics2D`）它正在绘画的图形实例。

如果游戏元素是从基于 Java-2D 的`Shape`实例中绘制的，或者如果`Shape`可以从现有的精灵图像中定义，那么碰撞检测就变得简单了。详情见：

1.  使用动态形状获取[鼠标检测的](https://stackoverflow.com/q/13795236/418556)[答案](https://stackoverflow.com/a/13796268/418556)
    ![](../Images/e4c4ebd75697645fc433b69e3c849be4.png)
2.  复杂形状的[碰撞检测的](https://stackoverflow.com/q/14574045/418556)[答案](https://stackoverflow.com/a/14575043/418556)
    ![](../Images/0dc44c2cefa19d1a596ea1c17e41616b.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T23:27:56.410

我不得不为一个课程项目实现一个迷失的维京人游戏，并且不知道如何去做，心里有完全相同的问题。

我最终编写了负责绘制不同元素的方法（即，一种用于绘制敌人，一种用于绘制导弹等），然后在 paint() 方法中调用它们。我在主循环中调用了 repaint() 方法来重绘所有内容。

我不确定这是否是一个好习惯，但它确实有效。你可以在[这里](https://github.com/ayberk/Jet-Fighter)查看代码，不过，我必须警告你这是一个“该死的，我必须完成它”的项目。你应该专门看看 GameFrame.java。

# linux - 在 Python 3 中查找给定套接字和 inode 的进程 ID

> ID：14667215
> 
> 赞同：4
> 
> 时间：2013-02-02T22:30:56.317
> 
> 标签：linux, sockets, python-3.x, python-3.2, procfs

/proc/net/tcp 为我提供了套接字的本地地址、端口和 inode 编号（例如，0.0.0.0:5432 和 9289）。

鉴于上述信息，我想找到特定进程的 PID。

可以打开 /proc 中的每个编号文件夹，然后使用诸如“$ sudo ls -l /proc/*/fd/ 2>/dev/null | grep socket”之类的 shell 命令检查符号链接是否匹配套接字/inode 编号。然而，这似乎比必要的计算成本更高，因为在任何给定系统上，<5% 的进程具有打开的 TCP 套接字。

找到打开给定套接字的 PID 的最有效方法是什么？我更喜欢使用标准库，我目前正在使用 Python 3.2.3 进行开发。

**编辑：**从问题中删除了代码示例，因为它们现在包含在下面的答案中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T19:52:39.620

下面的代码实现了最初的目标：

```
def find_pid(inode):

    # get a list of all files and directories in /proc
    procFiles = os.listdir("/proc/")

    # remove the pid of the current python process
    procFiles.remove(str(os.getpid()))

    # set up a list object to store valid pids
    pids = []

    for f in procFiles:
        try:
            # convert the filename to an integer and back, saving the result to a list
            integer = int(f)
            pids.append(str(integer))
        except ValueError:
            # if the filename doesn't convert to an integer, it's not a pid, and we don't care about it
            pass

    for pid in pids:
        # check the fd directory for socket information
        fds = os.listdir("/proc/%s/fd/" % pid)
        for fd in fds:
            # save the pid for sockets matching our inode
            if ('socket:[%d]' % inode) == os.readlink("/proc/%s/fd/%s" % (pid, fd)):
                return pid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T23:29:28.670

我不知道如何在 python 中执行此操作，但您可以使用`lsof(1)`：

```
lsof -i | awk -v sock=158384387 '$6 == sock{print $2}' 
```

`158384387`是套接字的 inode。然后使用`subprocess.Popen`.

如果您想查看其他用户打开的套接字，则必须使用 sudo(8)。

# python - Python，分解字符串

> ID：14667218
> 
> 赞同：0
> 
> 时间：2013-02-02T22:31:19.980
> 
> 标签：python, string

我需要制作一个程序，用户在其中输入一个单词，我需要对该单词中的每个字母做一些事情。他们不能一次输入一个字母，只输入一个单词。

IE 有人输入“测试”我怎样才能让我的程序知道它是一个四个字母的单词以及如何分解它，比如让我的程序制作四个变量，每个变量设置为不同的字母。它还应该能够处理更大和更小的单词。

我可以使用 for 语句吗？像 For letter ste 那个字母到一个变量的东西，但是它是什么样的一个 20 个字符的字母，程序如何获得所有的变量名等等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:36:28.703

你的意思是这样的吗？

```
>>> s = 'four'
>>> l = list(s)
>>> l
['f', 'o', 'u', 'r']
>>> 
```

附录：

即使这（显然）是您认为自己想要的，也可能没有必要，因为字符串几乎可以保存任何大小的单词——所以像`s`上面这样的单个字符串变量应该足以让您的程序诗句尝试创建每个字符的一堆单独命名的变量。一方面，很难编写程序的其余部分，因为您不知道要使用哪些有效的变量名。

可以不为每个字符使用单独的变量的原因是因为单个字符串可以包含任意数量的字符，也可以为空。`len()`如果应用于 1，Python 的内置函数将返回字符串中字母数量的计数，因此`len(s)`上面的结果将是`4`.

字符串中的任何字符都可以通过在方括号之间`0`和`len(s)-1`方括号内的整数对其进行索引来随机访问，因此要引用第三个字符，您将使用`s[2]`. *将索引视为字符串开头的偏移量*或字符很有用。

即便如此，在 Python 中通常不需要使用索引*，*因为您也可以在`for`循环中迭代处理字符串中的每个字符，而无需使用它们，如下面的简单示例所示：

```
num_vowels = 0
for ch in s:
    if ch in 'aeiou':
        num_vowels += 1
print 'there are', num_vowels, 'vowel(s) in the string', s 
```

Python 还具有许多其他工具和内置程序，可以在处理字符串时提供进一步帮助（实际上可以简化上面的示例），随着您对语言及其许多库的熟悉，您最终会学到这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:33:02.180

当您迭代一个字符串时，它会返回单个字符，例如

```
for c in thestring:
    print(c) 
```

如果您确实需要，您可以使用它来将字母放入列表中，这将保留其顺序，但这`list(string)`是一个更好的选择（请注意，像 dict 或 set 这样的无序类型不保证任何顺序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:52:47.503

你不必做任何这些；在 Python 中，您可以使用方括号访问字符串的字符：

```
>>> word = "word"
>>> print(word[0])
w
>>> print(word[3])
d
>>> print(len(word))
4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:04:12.810

您不想将每个字母分配给单独的变量。然后，您将编写程序的其余部分，甚至不知道您定义了多少变量！这是一个比一次处理整个字符串更糟糕的问题。

相反，您想要做的是只有*一个*变量保存字符串，但您可以通过索引来引用其中的单个字符。假设字符串在 中`s`，然后`s[0]`是第一个字符，`s[1]`是第二个字符，等等。您可以通过检查找出数字上升了多远`len(s) - 1`（因为索引从 0 开始，长度为 1 的字符串的最大索引为 0，a长度为 2 的字符串具有最大索引 1 等）。

这比弄清楚如何生成`len(s)`变量名、将它们全部分配给一段字符串、然后知道需要引用哪些变量要容易得多。

但是，字符串是不可变的，因此您不能*分配*to`s[1]`来更改第二个字符。如果您需要这样做，您可以使用 eg 创建一个列表`l = list(s)`。然后`l[1]`是第二个字符，您可以指定`l[1] = something`更改列表中的元素。然后，当你完成后，你可以得到一个新的字符串，通过将作为参数传递的一系列字符串连接在一起来`s_new = ''.join(l)`构建`join`一个字符串，使用左边调用它的字符串作为每个元素之间的分隔符序列；在这种情况下，我们使用空字符串作为分隔符连接单字符串列表，因此我们只需将所有单字符串连接到一个字符串中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T23:10:46.817

```
x = 'test'   
counter = 0   
while counter < len(x): 
    print x[counter]  # you can change this to do whatever you want to with x[counter]
    counter += 1 
```

# php - 如何使用 AWS PHP sdk 以 JSON 格式检索 Amazon S3 存储桶的内容？

> ID：14667226
> 
> 赞同：2
> 
> 时间：2013-02-02T22:32:17.350
> 
> 标签：php, json, amazon-web-services, amazon-s3

我想从我的 PHP 服务器获取我的 Amazon S3 存储桶中的所有文件名的列表。Amazon PHP sdk 有可能吗？如果没有，还有其他方法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T16:47:00.787

使用[官方 AWS SDK for PHP v2](https://github.com/aws/aws-sdk-php/)，您可以执行以下操作：

```
<?php

require 'vendor/autoload.php';

use Aws\Common\Aws;

// Instantiate an S3 client
$s3 = Aws::factory('/path/to/config.php')->get('s3');

$objects = $s3->getIterator('ListObjects', array(
    'Bucket' => $bucket
));

foreach ($objects as $object) {
    echo $bucket['Name'] . '/' . $object['Key'] . PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T11:31:34.787

1.  它对我来说很好，只是`MaxKeys`被忽略了。
2.  使用上面的方法和下面的方法有区别吗？虽然我无法在`$result`.

    ```
    use Aws\Common\Aws;
    use Aws\S3\S3Client;

    // Prepare S3 Client to speak with AWS
    $s3client;
    $s3client = S3Client::factory(array(
        'key' => '',
        'secret' => '',
        'region' => Region::US_EAST_1
    ));

    // List objects from a bucket
    $result = $s3client->listObjects(array(
        'Bucket' => $aws_bucket,
        'MaxKeys' => 25,
        'Marker' => 'docs/'
    ));

    $objects = $result->getIterator();

    foreach ($objects as $wo)
    {
        // Prints junk
        echo $wo['Key'] . ' - ' . $wo['Size'] . PHP_EOL;
    } 
    ```

# php - str_replace 不替换邮件发送上的字符串

> ID：14667227
> 
> 赞同：0
> 
> 时间：2013-02-02T22:32:32.630
> 
> 标签：php, str-replace

我正在尝试`str_replace()`在发送电子邮件时插入用户名。它不起作用，我错过了什么吗？电子邮件已处理但未`<!--{Username}-->`替换为`$en['user']`变量

```
 $text_content = file_get_contents('emails/welcome_txt.tpl');
        $html_content = file_get_contents('emails/welcome.tpl');

        $body = "--$mime_boundary\n";
        $body.= "Content-Type: text/plain; charset=\"charset=us-ascii\"\n";
        $body.= "Content-Transfer-Encoding: 7bit\n\n";
        $body.= str_replace("<!--{Username}-->",$en['user'],$text_content);
        $body.= "\n\n";

        $body.= "--$mime_boundary\n";
        $body.= "Content-Type: text/html; charset=\"UTF-8\"\n";
        $body.= "Content-Transfer-Encoding: 7bit\n\n";    
        $body.= str_replace("<!--{Username}-->",$en['user'],$html_content);
        $body.= "\n\n";
        $body.= "--$mime_boundary--\n"; 
```

# java - substring 和 substr php 到 java

> ID：14667231
> 
> 赞同：0
> 
> 时间：2013-02-02T22:33:11.530
> 
> 标签：java, php, substring, substr

嗨，我目前正在尝试将我正在制作的 java 应用程序链接到我拥有的网站。基本上我希望在网站上创建的帐户可以在 java 应用程序上访问。在我的登录页面上，我有一段代码可以提取保存在 sql 数据库中的部分密码。这里是：

```
 $username = $_POST['username']; //gets the username that is posted from the login page
$password = hash(sha256, md5(sha1($_POST['password']))); //encrypts the password posted from the login page

//get the requested user's password
$details = $database->processQuery("SELECT `password` FROM `users` WHERE `username` = ?", array($username), true); //gets the password from the sql database
$db_password = substr(substr($details[0]['password'], 54), 0, -3); //extracts characters from the saved password from 54 to -3 from the end 
```

在注册页面我有这个：

```
 //generate a salt
    $salt = substr(hash(sha256, sha1(time())), 10);
    $password = $salt.hash(sha256, md5(sha1($_POST['password']))).substr($salt, 0, -51);

    $_SESSION['salt'] = $salt;
    $_SESSION['password'] = $password;
    $base->redirect('done.php'); 
```

我相信这会在当时生成的密码之前添加盐。所以我只需要提取密码，显然在登录页面中，它可以通过将密码从 54 开始并在结束前 3 个字符结束来完成此操作。我制作了一个密码器来加密用户在 java 应用程序中输入的密码（sha1 > md5 > sha254），然后我尝试匹配密码。我用了：

```
substring(54, pass.length()-3) 
```

这与我在网站“d1ck30ng1”上输入的随机生成的密码完美配合。但是，当我使用密码“test123”创建另一个帐户时，我在与它匹配的密码之前得到一个额外的字符，这是一个示例：

```
d1ck30ng1:
Password that is read from the database before parts are removed:
5a3a59efb7d2085d12a2fe5298a7795c85b99dc7b3bcabc60d9e4c6469fe4370d1bd7f2b4ff0151698e3911a97f326f1fc1409a8d5430e7d283cbf5a3

Password that is entered in the application:
6469fe4370d1bd7f2b4ff0151698e3911a97f326f1fc1409a8d5430e7d283cbf

Password that is read from the database after the parts are removed:
6469fe4370d1bd7f2b4ff0151698e3911a97f326f1fc1409a8d5430e7d283cbf

matches perfectly

test123: 
Password that is read from the database before parts are removed:
fb1c94c4ab1b104badff98261269856aca8d34575c7114124aebbd068dc28e9d998bee17cdb25f5b1501710d4a629ad37f762478eeb01f465bc24bfb1

Password that is entered in the application:
68dc28e9d998bee17cdb25f5b1501710d4a629ad37f762478eeb01f465bc24b

Password that is read from the database after parts are removed
068dc28e9d998bee17cdb25f5b1501710d4a629ad37f762478eeb01f465bc24b

does not match! 
```

所以我的问题是......我怎样才能让它工作，为什么它不工作:) 提前谢谢你！哦，顺便说一句，我是新来的，所以如果我没有在这篇文章中提供足够的细节或者在发布时做错了什么，我很抱歉。

# c# - 如何将多个双打输入以逗号分隔的文本框并存储在包含双打的数组中？

> ID：14667234
> 
> 赞同：0
> 
> 时间：2013-02-02T22:33:46.237
> 
> 标签：c#, arrays, winforms

我正在尝试在文本框中输入多个值，当我按下按钮时，它们将存储在一个数组中。像这样： 1.1, 2.2, 3.3, 4.4, 5.5 然后按下按钮，它们存储在索引 0, 1, 2, 3, 4

我知道这些值是一个字符串，需要转换，我想我已经接近答案了，但我不确定，这是我一直在尝试的：

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        //five values entered from textbox
        string values = textBox1.Text;
        string[] EmailArr = values.Split(',');
        double[] yArray = new double[5] = Array.ConvertAll(values.Split(','), Double.Parse);
    } 
```

我知道这是错误的，但它是正确的吗？任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:36:45.677

linq方式：

```
var yArray = textBox1.Text
                     .Split(',')
                     .Select(m => Double.Parse(m.Trim()))
                     .ToArray(); 
```

顺便说一句，不要将它与 TextChanged 事件一起使用，而应与 Validated 或 Clicked 一起使用。

**编辑**

请按照以下步骤操作：

双击“YourForm”.cs（获得“设计”）。

选择您的文本框。

右键单击，选择“属性”。

请参阅“事件列表”。

删除“TextChanged”行上的任何内容

DoubleClick on line **Validated**（这将在此行上添加文本）

这应该打开“代码”部分。

将我的答案代码添加到新方法“private void textBox1_Validated(...)”中

删除问题中存在的所有代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T22:38:31.320

或较旧的时尚方式：

```
 string values = textBox1.Text;
    string[] EmailArr = values.Split(',');
    double[] dlbArr = new double[EmailArr.Length];
    int index = 0;
    foreach (string item in EmailArr)
    {
        dlbArr[index] = Convert.ToDouble(item[index]);
        index++;
    } 
```

# php - 在输出 php 脚本后替换 html 字符？

> ID：14667237
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:33:54.730
> 
> 标签：php, html

我在我的网站上使用评级系统，并在 php.ini 中调用值“4_5”。

例子：

`<span class="rating"><?php echo $meta['rating']; ?></span>`

有什么办法可以用这个...

`$name = str_replace('_', '.', $name);`

调用后替换下划线？

PS。我对 php 和 html 很陌生，但到处都在搜索这个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:40:36.243

回显后，您无法修改 PHP 中的值。但是您甚至不需要，因为您可以像这样在 $meta['rating'] 周围使用 str_replace ：

```
<span class="rating"><?php echo str_replace('_', '.', $meta['rating']); ?></span> 
```

这会将 4_5 显示为 4.5

# android - 为什么在我的精灵上尝试使用旋转（度）时出现空指针异常？

> ID：14667239
> 
> 赞同：0
> 
> 时间：2013-02-02T22:34:29.190
> 
> 标签：android, libgdx

我有一个 GameScreen 类，里面有一个触摸板。我在 GameScreen 类中有一个方法 (setTouchpadY()) 可以获取触摸板的 getKnobPercentY。

```
public float setTouchpadY() {
  return touchpad.getKnobPercentY(); 
```

}

在我的 WorldRenderer 类的 render() 方法中，我试图用触摸板旋转一个精灵。gs 是 GameScreen 类

```
public void render() {
  //render stuff
  moveCamera(leon.getPosition().x, CAMERA_HEIGHT / 2);
  spriteBatch.setProjectionMatrix(cam.combined);
  spriteBatch.begin();
  drawVillage();
  drawTile();
  drawLeon();
  spriteBatch.end();

            if (leon.isAiming()) {
     leonAimArmSpriteR.rotate(gs.setTouchpadY());         //This line causing crash
  } 
```

}

我已将触摸板和按钮放入 Gamescreen 类，因为它实现了屏幕和输入处理器。尝试将它们放入 WorldRenderer 到目前为止没有运气。这是我的 logcat/console，这是尝试运行桌面版本，如果我需要发布 android，我会

```
Exception in thread "LWJGL Application" com.badlogic.gdx.utils.GdxRuntimeException: java.lang.NullPointerException
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:113)
Caused by: java.lang.NullPointerException
at com.me.RE4.view.WorldRenderer.render(WorldRenderer.java:142)
at com.me.RE4.screens.GameScreen.render(GameScreen.java:151)
at com.badlogic.gdx.Game.render(Game.java:46)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:191)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:110) 
```

编辑所以我发现我没有实例化GameScreen，当我这样做时它说WorldController 是空的。所以我在 WorldRenderer 中实例化了 WorldController，但是它说 GameScreen 中的 TouchpadY() 方法为空，设置断点，这给了我各种变量为空。

![在此处输入图像描述](../Images/41a239b08ff7f3970d504c58b4fc2cb1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:05:32.023

好吧，我最初试图在 WorldRenderer 中的 render 方法中进行旋转，以便将触摸板稳定地保持在某个点将保持旋转到那个程度。我必须在 WR 中实例化/引用很多项目才能工作，所以我最终在 WR 中创建了游戏屏幕，然后引用了我想在 GS 中旋转的精灵，然后触摸板值在渲染方法中工作GS。太邋遢

# database - 学习 PL/SQL 中的绑定变量以及计算输入和输出 DBMS_OUTPUT.PUT_LINE

> ID：14667242
> 
> 赞同：0
> 
> 时间：2013-02-02T22:34:49.097
> 
> 标签：database, oracle, plsql, oracle11g

我正在为学校执行一个非常简单的 PL/SQL 程序。这很容易，但我认为我缺少一个概念。我将展示我一直在做的事情，而不仅仅是要求一个简单的答案。我想了解 DBMS_OUTPUT.PUT_LINE 的概念以及我已声明用于计算矩形棱柱或池的体积的 BIND 变量。我只是没有将它正确地声明给用户。我无法为用户找到关于 OUTPUT 的正确信息，我正在学习更多关于 INPUT 和 put_line 的信息。

所以要计算 v=lwh。我已经声明了这些变量，放在 put_line 中，并在 PL/SQL 中内置了 dbms_output 函数。我应用了这些变量的计算。我正在处理 dbms put line 语句，以显示计算和显示可变维度的 concact 语句以及如何最好地做到这一点。我在 C 语言和 Ruby 中看到过这个程序，但在 Oracle Developer 和 PL/SQL 中没有看到。

[C语言计算表面积](http://idrispedia.blogspot.com/2011/10/simple-program-with-c-calculating.html)

[矩形棱镜的Java程序](http://www.dreamincode.net/forums/topic/189503-rectangular-prism/)

我会展示我的脚本，看看我做错了什么，只是不确定我是否走在正确的轨道上以更好地学习。我无法显示尺寸和正确的 conc 语句来显示这些。如何专门向用户显示输出。

感谢您的时间。

~ 编写一个 PL/SQL 块来计算一个矩形棱柱游泳池的体积。维度应该在绑定（替换）变量的帮助下提供。计算出棱镜的体积后，在屏幕上显示尺寸和体积。

v=lwh

```
 SET SERVEROUTPUT ON
 DECLARE
     d_length    NUMBER(7);
     d_height    NUMBER(7);  
     d_width     NUMBER(7);
     d_volume    NUMBER(15);  

BEGIN

    DBMS_OUTPUT.PUT_LINE('The length dimension is: ' || (&d_length));

    DBMS_OUTPUT.PUT_LINE('The height dimension is: ' || (&d_height));

   DBMS_OUTPUT.PUT_LINE('The width dimension is: ' ||  (&d_width));  

   d_volume := d_length * d_height * d_width;

   DBMS_OUTPUT.PUT_LINE(
   'The rectangular prism volume for the swimming pool is: ' 
   || (d_volume));   ---don't know how to get output to user

   DBMS_OUTPUT.PUT_LINE(
   'The dimensions of the swimming pool are ' || ;    ---missing code here 

 END;
 / 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:23:21.637

[绑定变量](http://docs.oracle.com/cd/E14072_01/server.112/e10823/ch_five.htm#insertedID12)和[替换变量](http://docs.oracle.com/cd/E14072_01/server.112/e10823/ch_five.htm#insertedID9)是不同的东西，所以问题的措辞具有误导性。这只是绑定变量的 SQL*Plus 版本；它对解析器的含义可能略有不同（或至少不太明显）。

本质上，您将 PL/SQL 变量与 SQL*Plus 替换变量混淆了。当您引用时，`&d_length`您正在定义一个替代变量，此时将提示用户输入其值。但它完全独立`d_length`于 PL/SQL`DECLARE`块中的。

在开始阻止之前，您可以查看[`ACCEPT`](http://docs.oracle.com/cd/E14072_01/server.112/e10823/ch_five.htm#sthref498)命令以找到一种从用户获取值的简洁方法，但您也可以这样做：

```
SET SERVEROUTPUT ON
DECLARE
    d_length    NUMBER := &q_length;
    d_height    NUMBER := &q_height;
    d_width     NUMBER := &q_width;
    d_volume    NUMBER;
BEGIN
    DBMS_OUTPUT.PUT_LINE('The length dimension is: ' || d_length);
    DBMS_OUTPUT.PUT_LINE('The height dimension is: ' || d_height);
    DBMS_OUTPUT.PUT_LINE('The width dimension is: ' || d_width);  

    d_volume := d_length * d_height * d_width;

    DBMS_OUTPUT.PUT_LINE(
        'The rectangular prism volume for the swimming pool is: ' 
           || d_volume);

   DBMS_OUTPUT.PUT_LINE(
       'The dimensions of the swimming pool are ' || '?');
END;
/ 
```

不确定您希望输出的最后一行显示什么；这与已经显示的三个维度有什么不同吗？

您也可以通过使用以下[`VARIABLE`命令](http://docs.oracle.com/cd/E14072_01/server.112/e10823/ch_twelve050.htm#sthref2464)定义绑定变量来执行此操作：

```
SET SERVEROUTPUT ON
VARIABLE d_length NUMBER;
VARIABLE d_height NUMBER;
VARIABLE d_width NUMBER;

DECLARE 
    d_volume    NUMBER;
BEGIN
    :d_length := &q_length;
    :d_height := &q_height;
    :d_width := &q_width;

    DBMS_OUTPUT.PUT_LINE('The length dimension is: ' || :d_length);
    DBMS_OUTPUT.PUT_LINE('The height dimension is: ' || :d_height);
    DBMS_OUTPUT.PUT_LINE('The width dimension is: ' || :d_width);  

    d_volume := :d_length * :d_height * :d_width;

    DBMS_OUTPUT.PUT_LINE(
        'The rectangular prism volume for the swimming pool is: ' 
           || d_volume);

   DBMS_OUTPUT.PUT_LINE(
       'The dimensions of the swimming pool are ' || '?');
END;
/ 
```

请注意，在此版本中`d_length`，`d_height`和`d_width`以冒号为前缀，因为它们是绑定变量。但这`d_volume`不是因为它仍然在 PL/SQL 块中声明。并且实际值仍然作为替换变量从用户那里检索。这有点令人费解。让它们绑定变量实际上并没有在这里添加任何东西。

# symfony - Symfony Newb 路由问题

> ID：14667243
> 
> 赞同：0
> 
> 时间：2013-02-02T22:34:54.397
> 
> 标签：symfony

我刚刚开始使用 Symfony，但遇到了路由问题。这是来自控制器的路由：

```
/**
 * @Route("/social/{name}/", name="_speed1")
 * @Route("/social/drivers/")
 * @Route("/social/drivers/{name}/", name="_driver")
 * @Route("/social/", name="_speed")
 * @Template()
 */
public function unlimitedAction()
{ 
```

如果我去 speed/social/ 或 speed/social/bob 或 speed/social/drivers/ 或 speed/social/drivers/bob 所有这些页面都可以毫无问题地呈现。但是我需要传入的名字所以我改变了

```
public function unlimitedAction()
{ 
```

到

```
public function unlimitedAction($name)
{ 
```

如果我去 speed/social/drivers/ 或 speed/social/drivers/bob 它返回正常。但是，如果我转到 speed/social/，则会收到以下错误：

```
Controller "MyBundle\Controller\DefaultController::unlimitedAction()" 
requires that you provide a value for the "$name" argument (because there is 
no default value or because there is a non optional argument after this one). 
```

我不明白为什么它适用于一条路线而不适用于另一条路线。

所以我的问题是，我怎样才能实现我的路由，以便我可以去：

```
speed/social/
speed/social/drivers/
speed/social/drivers/bob 
```

并且能够将变量传递给动作而不会出错。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:36:30.117

要回答您的问题：您必须为每个在 url 中`name`没有参数的路由提供参数的默认值。`{name}`我现在无法测试它，我不记得使用注释时的语法，但应该是这样的：

```
/**
 * @Route("/social/{name}/", name="_speed1", defaults={"name"=null})
 * @Route("/social/drivers/{name}/", name="_driver", defaults={"name"=null})
 * @Template()
 */
public function unlimitedAction($name)
{
} 
```

这样，您应该可以调用`/social/`and`/social/foo`以及`/social/drivers/`and `/social/drivers/foo`。

**但是，真的，这不是正确的方法**。只需定义更多操作，每个操作都绑定到单个路由：

```
/**
 * @Route("/social", name="social_index")
 * @Template()
 */
public function socialIndexAction() { } // /social

/**
 * @Route("/social/{name}", name="social_show")
 * @Template()
 */
public function socialShowAction($name) { } // /social/foo 
```

作为一般规则，每个方法（每个动作）都应该专注于做一件事，并且应该尽可能短。使用服务并让你的控制器做他们应该做的事情：理解用户输入、调用服务和显示视图。

# linux - 如何编写一个 bash 脚本来“滑动”文件中的一些变量？

> ID：14667245
> 
> 赞同：0
> 
> 时间：2013-02-02T22:35:13.870
> 
> 标签：linux, bash, parsing, shell, config

我正在为计算机实验室编写 bash 脚本。通常，当我们更新计算机时，我们会使用为所有计算机克隆的单个映像。问题是所有计算机都获得相同的主机名。

所以我决定写一个 bash 脚本，读取 PC 的 mac 地址，然后根据一张表更改主机名。

我正在使用 case 语句，但我想使用单独的配置文件。我怎样才能做到这一点？

这是脚本（见不舒服的情况）：

```
#!/bin/bash

if [[ $(/usr/bin/id -u) -ne 0 ]]; then
    echo 'Errore, non sei root!'
    exit 1
else
        mac=$(cat /sys/class/net/eth0/address)
        basename='Lab121Pc'

        case $mac in
                'c8:9c:dc:d2:82:2c') id='01';;
                'c8:9c:dc:d2:81:f4') id='02';;
                'c8:9c:dc:d2:46:3e') id='03';;
                'c8:9c:dc:d2:82:33') id='05';;
                'c8:9c:dc:d2:81:96') id='06';;
                'c8:9c:dc:d2:83:55') id='07';;
                'c8:9c:dc:d2:2f:14') id='09';;
                'c8:9c:dc:d2:82:45') id='10';;
                'c8:9c:dc:d2:82:2f') id='11';;
                'c8:9c:dc:d2:51:2e') id='12Hp';;
                'c8:9c:dc:d2:7e:43') id='13';;
                'c8:9c:dc:d2:49:ba') id='14';;
                'c8:9c:dc:d2:81:f3') id='15';;
                'c8:9c:dc:d2:7e:3c') id='17';;
                'c8:9c:dc:d2:7e:33') id='18';;
                'c8:9c:dc:d2:83:62') id='19';;
                'c8:9c:dc:d2:4a:db') id='21';;
                'c8:9c:dc:d2:e3:d4') id='22Hp';;
                'c8:9c:dc:d2:7e:e7') id='23';;
                'c8:9c:dc:d2:b0:f4') id='24Hp';;
                'c8:9c:dc:d2:49:e8') id='25';;
                'c8:9c:dc:d2:82:31') id='26';;
                'c8:9c:dc:d2:81:2f') id='27';;
            'c8:9c:dc:d2:48:5c') id='28';;
            'c8:9c:dc:d2:81:e6') id='29';;
            'c8:9c:dc:d2:81:36') id='30';;
     esac

        hostname=$basename$id

        if [ $(cat /etc/hostname) == $hostname ]; then
                echo 'Hostname e'' gia'' corretto'
                exit 0
        else
                echo 'Hostname errato, correzzione in corso...'
                echo $hostname > /etc/hostname
                echo 'Aggiornamento riuscito'
                exit 0
        fi
fi 
```

* * *

谢谢大家。我使用的是 Linux，我不能使用 DHCP，但无论如何，谢谢你，它可能在其他时候会很有用。但是，我找到了 cut 命令，所以我创建了包含 mac 地址的 i 文件：

```
xx:xx:xx:xx:xx:xx 01
xx:xx:xx:xx:xx:xx 02
xx:xx:xx:xx:xx:xx 03
xx:xx:xx:xx:xx:xx 04
xx:xx:xx:xx:xx:xx 05 
```

所以，我可以滚动文件的行，然后使用 cut

```
cut -d ' ' -f 1 macs 
```

分隔符是空格，所以如果我想要 mac 地址，我将 -f 值设置为 1，或者如果我想要 id 为 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:43:45.307

如果您像这样格式化文件：

```
c8:9c:dc:d2:81:e6 29
c8:9c:dc:d2:81:36 30 
```

然后您可以执行以下操作：

```
id=$(grep "^$mac " | awk '{print $2}') 
```

（但我同意您对问题的评论：最好的方法是通过 DHCP。）

# jquery - jQuery插件冲突——组合脚本不冲突？

> ID：14667252
> 
> 赞同：0
> 
> 时间：2013-02-02T22:36:25.273
> 
> 标签：jquery, fancybox

我已经搜索了高和低的解决方案，但无法弄清楚。我是一个javascript菜鸟，所以我提前为我的无知道歉。我非常感谢您提供的任何帮助。

无论如何，我在一个页面上运行了两个 jquery 插件。一个是同位素，另一个是 Fancybox。它们都可以单独工作，但在一起时，当单击图像并激活 Fancybox 时，图像不会自动调整大小以适应屏幕。关于插件的其他一切工作正常。

我将这些 .js 脚本链接到：

```
https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js
/js/jquery.isotope.js
/js/jquery.fancybox.js
/js/jquery.mousewheel-3.0.6.pack.js
/js/jquery.fancybox-buttons.js 
```

然后这个脚本在文档中跟随它：

```
$(function(){

  var $container = $('#container');

  $container.isotope({
    itemSelector: '.project'
  });

});

$(".fancybox")
.attr('rel', 'gallery')
.fancybox({
    padding : 0 ,
    minWidth : 215 ,
    maxWidth : 900 ,
    autoSize : true ,
}); 
```

我尝试了各种方法，例如 no.conflict ，但要么我做错了，要么它不起作用。如果有人可以就如何分离这些脚本提供一些建议，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:00:36.160

好的，我找到了解决方法。这有点奇怪，但是……无论如何。

我已将文档内脚本分成两个单独的脚本，并将链接的 .js 文件移动到每个脚本上方。然后，我为每个添加了对 jquery 库的单独调用。所以现在有两个对 jquery 的调用。它看起来像这样：

```
https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js
/js/jquery.fancybox.js
/js/jquery.mousewheel-3.0.6.pack.js
/js/jquery.fancybox-buttons.js

$(".fancybox")
     .attr('rel', 'gallery')
     .fancybox({
        padding : 0 ,
        minWidth : 215 ,
        maxWidth : 900 ,
        autoSize : true ,
     });

https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js
/js/jquery.isotope.js

$(function(){
   var $container = $('#container');
      $container.isotope({
      itemSelector: '.project'
  });    
}); 
```

我敢肯定这并不理想，但它确实有效，所以我不太在意。感谢蒂姆 B 詹姆斯的帮助。

# ruby - Ruby如何检查一个数组中的字符串是否是另一个数组中的对象属性？

> ID：14667258
> 
> 赞同：0
> 
> 时间：2013-02-02T22:36:45.760
> 
> 标签：ruby, arrays

我有两个数组。

一个被命名为foods，它是一个字符串数组。

另一个名为dataList。它是一个包含名为 name 的属性的对象数组。

我需要做的是检查数组 foods 中的名称是否存在于 dataList 中。这意味着 food 中的所有项目都需要等于 dataList 中的名称属性之一。

如果两个数组都包含相同类型的数据，我知道如何检查数组。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:07:09.970

由于我们不关心元素的顺序，也不关心元素出现的次数，我们可以使用 Set 轻松做到这一点。

```
require 'set'

foods_set = Set.new(foods)

attribute_names_set = Set.new
dataList.each do |d|
  attribute_names_set << d.name
end

return foods_set == attribute_names_set 
```

# android - 使用框架布局来渲染多个视图

> ID：14667260
> 
> 赞同：1
> 
> 时间：2013-02-02T22:36:51.483
> 
> 标签：android, android-layout

我通常通过代表一种布局的片段来组织我的代码/逻辑。现在我需要一些相对简单的表单来从用户那里获取输入数据，这些表单在目的上有些相关。

假设我有 3 个屏幕，我可以创建 3 个片段来处理它们（显示视图、读取输入、提交......）。或者我应该使用一个片段，并使用 FrameLayout 创建一堆布局。我在想，堆叠所有 3 个视图并隐藏/显示我喜欢的视图。但是[文件](http://developer.android.com/reference/android/widget/FrameLayout.html)说

> 通常，应该使用 FrameLayout 来保存单个子视图，因为很难以一种可缩放到不同屏幕尺寸的方式组织子视图，而不会使子视图相互重叠

有什么好的方法可以做到这一点，或者我应该为此创建多个片段（这样做的缺点是很多小类和重复的代码。我可能会使用基类，但仍想探索其他选项）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:52:37.277

听起来您并不真正关心视图是否在 中相互重叠`FrameLayout`，或者实际上它们**应该**重叠，因为您希望一次只显示一个。 `FrameLayout`当然可以显示堆叠的子视图，每个视图都占据其全部宽度和高度，并且如果您将未使用视图的可见性设置为`INVISIBLE`or `GONE`，如果它们恰好位于可见视图上方，它们将不会拦截屏幕按下或聚焦用户正在与之交互。

在可读性和代码维护方面，我认为交换片段更有意义，即使有更多的内存开销。布局管理可以封装在各个片段中，您无需担心显示/隐藏视图，因为片段事务会处理这方面的问题。

# asp.net-mvc-4 - ASP.NET MVC ViewModel 继承问题

> ID：14667263
> 
> 赞同：3
> 
> 时间：2013-02-02T22:37:00.310
> 
> 标签：asp.net-mvc-4, viewmodel

我有以下 ViewModels ：

```
public class MyViewModel
{
  public BaseViewModel mySubViewModel;
}

public class ChildViewModel: BaseViewModel
{} 
```

然后我创建了一个 MyViewModel 模型，它包含一个 ChildViewModel 类型的属性。在视图中，它显示得很好。

然后我点击保存按钮以提交对我的模型的更改并调用以下控制器：

```
 [HttpPost]
    public ActionResult Edit(MyViewModel model)
    {
        return null;
    } 
```

令我惊讶的是，属性 mySubViewModel 现在是 BaseViewModel 而不是 ChildViewModel 类型！我不知道这里发生了什么。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T22:39:40.763

> 令我惊讶的是，属性 mySubViewModel 现在是 BaseViewModel 而不是 ChildViewModel 类型！我不知道这里发生了什么。我究竟做错了什么 ？

你不应该对此感到惊讶。你没有做错什么。这是设计使然。默认模型绑定器*看到*您的控制器操作正在接受一个`MyViewModel`参数，并试图将 POST 请求的内容绑定到它。默认模型绑定器绝对无法知道您可能已经编写了一些派生类（例如`ChildViewModel`在您的情况下）并且您希望在此处实例化这些派生类。您已将这个具体的视图模型实例从 GET 操作传递到视图这一事实对 POST 操作没有影响。根据 HTTP 和默认模型绑定器看到的内容来考虑它。例如，可以从一些完全不同的客户端而不是从表单提交中调用此 POST 操作。例如，可能是一个 iPhone 应用程序对 POST 操作执行 HTTP 请求。看，现在它很有意义。默认模型绑定器只能看到 POST 请求的有效负载和您指定为操作参数的类型。这就是他所做的 => 它实例化此类型并从 POST 有效负载数据绑定其属性。

因此，一种可能性是编写一个自定义模型绑定器，它将实例化您希望的视图模型的具体实例。我已经在[`this post`](https://stackoverflow.com/a/6485552/29407). 在此示例中，我在表单中包含了一个隐藏字段，该字段将包含我们希望实例化的视图模型的具体类型，然后自定义模型绑定器只需使用此信息在运行时创建此类型。

# api - Shopify 液体：如何有条件地在 Shopify 液体中包含片段？

> ID：14667270
> 
> 赞同：10
> 
> 时间：2013-02-02T22:37:27.160
> 
> 标签：api, include, code-snippets, shopify, liquid

我想在模板中包含一个片段，但前提是片段文件存在。有什么办法可以做到吗？

现在我只是在使用：

```
{% include 'snippetName' %} 
```

但这会引发错误：

```
Liquid error: Could not find asset snippets/snippetName.liquid 
```

我需要这样一个功能的原因是因为我有一个后台进程，稍后会添加代码片段。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-26T11:08:41.007

我自己也有这个问题。这是我的解决方案：

```
{% capture the_snippet_content %}{% include the_snippet %}{% endcapture %}
{% unless the_snippet_content contains "Liquid error" %}
  {% include reviews_snippet %}
{% endunless %} 
```

基本上将片段的内容捕获为变量。如果没有片段 Shopify 会生成错误：

> Liquid 错误：找不到资产片段/caroline-flint-reviews.liquid

所以检查它是否生成......如果是这样，请不要打印代码段：D

当然，如果您希望您的代码段包含“液体错误”或者 Shopify 曾经更改错误消息，这将中断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-08T09:33:15.173

扩展乔恩的答案；

创建一个名为 snippet.liquid 的文件

```
{% capture snippet_content %}{% include snippet %}{% endcapture %}
{% unless snippet_content contains "Liquid error" %}
  {{ snippet_content }}
{% endunless %} 
```

然后，当您只想包含一个文件时，如果它存在

```
{% include 'snippet' with 'filename_of_include' %} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-03T07:38:22.647

好的，**2021年**来这里。

**包含**语法已弃用且很少使用，也扩展了@a.wmly 答案，这应该是用渲染替换包含的最新语法：

```
{% capture snippet_content %}{% render 'your-snippet-name' %}{% endcapture %}
{% if snippet_content contains "Could not find asset" %}
    {% comment %} do nothing {% endcomment %}
{% else %}
    {% render 'your-snippet-name' %}
{% endif %} 
```

包含与渲染的参考：[https ://shopify.dev/docs/themes/liquid/reference/tags/deprecated-tags#include](https://shopify.dev/docs/themes/liquid/reference/tags/deprecated-tags#include)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-11T03:54:03.670

或者，您可以创建自己的标签，在尝试处理文件之前检查文件是否存在。

[https://github.com/Shopify/liquid/wiki/Liquid-for-Programmers#create-your-own-tags](https://github.com/Shopify/liquid/wiki/Liquid-for-Programmers#create-your-own-tags)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T22:08:37.030

@vovafeldman 不知道为什么你不能有一个空白片段，但不存在文件。

我能想到的唯一其他选择是因为您使用 BG 流程来生成片段（我假设上传它），您始终可以使用模板 API 来上传包含片段的模板版本同时.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-19T13:25:09.797

使用 Jon 或 a.wmly 上面列出的代码仍然给我错误。然而，简单地写

```
{% include 'snippet_name' %} 
```

工作得很好。

请注意，这只适用于位于“snippets/”文件夹中的文件。因此，例如，模板不能使用这种方法工作。

# ruby-on-rails - 用于在 Rails 中序列化数据的语法

> ID：14667272
> 
> 赞同：0
> 
> 时间：2013-02-02T22:37:42.140
> 
> 标签：ruby-on-rails

根据 Rails 文档[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)，我可以使用 serialize 方法将数组存储在数据库中

```
 class User < ActiveRecord::Base
      serialize :preferences, Hash
    end

    user = User.create(:preferences => %w( one two three )) 
```

在我极小的应用程序中，我对 Question 模型的 answers 列进行了序列化，因为会有多种可能的答案选择

```
class Question < ActiveRecord::Base
  attr_accessible :question, :link, :answers, :correctanswers

  serialize :answers

end 
```

试图为数据库播种以对其进行测试，我这样做了...

```
Question.create!( question: "what is R's favorite color", answers: "a" => %w( red green blue ), correctanswer: "blue", link => "http://janesblog.com") 
```

但是，rake db.seed 因各种错误而中止，表明我的语法错误

```
/Users/mm/Sites/ljk/db/seeds.rb:17: syntax error, unexpected tASSOC, expecting ')'
...avorite color", answers: "a" => %w( red green blue ), correc...
...                               ^
/Users/mm/Sites/ljk/db/seeds.rb:17: syntax error, unexpected ',', expecting $end
...s: "a" => %w( red green blue ), correctanswer: "blue", link ... 
```

任何人都可以帮助使用正确的语法吗？桌子

```
class CreateQuestions < ActiveRecord::Migration
  def change
    create_table :questions do |t|

      t.string :question
      t.string :link
      t.text   :answers
      t.string :correctanswer

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:43:00.837

这不是有效的红宝石：

```
answers: "a" => %w( red green blue ) 
```

你可以这样做：

```
answers: { "a" => %w( red green blue ) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T22:45:50.433

我想你想要：

```
Question.create!(
  question: "what is R's favorite color",
  answers: %w( red green blue ),
  correctanswer: "blue",
  link: "http://janesblog.com"
) 
```

# javascript - ASP.NET MVC 部分视图 ajax 帖子？

> ID：14667274
> 
> 赞同：15
> 
> 时间：2013-02-02T22:37:53.793
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

**Index.html（查看）**

```
<div class="categories_content_container">
    @Html.Action("_AddCategory", "Categories")
</div> 
```

**_AddCategory.cshtml（部分视图）**

```
<script>
    $(document).ready(function () {
        $('input[type=submit]').click(function (e) {
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: '@Url.Action("_AddCategory", "Categories")',
                dataType: "json",
                data: $('form').serialize(),
                success: function (result) {
                    $(".categories_content_container").html(result);
                },
                error: function () {

                }
            });
        });
    });
</script>

@using (Html.BeginForm())
{
    // form elements
} 
```

控制器

```
[HttpPost]
public ActionResult _AddCategory(CategoriesViewModel viewModel)
{
    if(//success)
    {
        // DbOperations...
        return RedirectToAction("Categories");
    }
    else
    {
        // model state is not valid...
        return PartialView(viewModel);
    }
} 
```

问题：如果操作成功，我希望重定向到另一个页面（类别）。但没有行动，没有错误信息。如果操作不成功，它就像我预期的那样工作。

我怎样才能做到这一点？如何使用 AJAX 发布路由另一个页面？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-02T23:10:49.380

不要从使用 AJAX 调用的控制器操作重定向。没用的。您可以将要重定向到的 url 作为 JsonResult 返回：

```
[HttpPost]
public ActionResult _AddCategory(CategoriesViewModel viewModel)
{
    if(//success)
    {
        // DbOperations...
        return Json(new { redirectTo = Url.Action("Categories") });
    }
    else
    {
        // model state is not valid...
        return PartialView(viewModel);
    }
} 
```

然后在客户端测试此 url 的存在并采取相应措施：

```
$.ajax({
    type: "POST",
    url: '@Url.Action("_AddCategory", "Categories")',
    data: $('form').serialize(),
    success: function (result) {
        if (result.redirectTo) { 
            // The operation was a success on the server as it returned
            // a JSON objet with an url property pointing to the location
            // you would like to redirect to => now use the window.location.href
            // property to redirect the client to this location
            window.location.href = result.redirectTo;
        } else {
            // The server returned a partial view => let's refresh
            // the corresponding section of our DOM with it
            $(".categories_content_container").html(result);
        }
    },
    error: function () {

    }
}); 
```

另请注意，我已经从您的电话中删除了`dataType: 'json'`参数。`$.ajax()`这非常重要，因为我们并不总是返回 JSON（在您的情况下，您从未返回 JSON，因此此参数绝对错误）。在我的示例中，我们仅在成功的情况下返回 JSON，在`text/html`失败的情况下返回 (PartialView)。所以你应该让jQuery简单地使用`Content-Type`服务器返回的HTTP响应头来自动推断类型并相应地解析传递给你的成功回调的结果参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T23:04:24.547

您进行的 ajax 调用不应该能够重定向整个页面。它仅将数据返回给您的异步调用。如果你想执行重定向，我

重定向的javascript方式是window.location

所以你的 ajax 调用应该是这样的：

```
<script>
    $(document).ready(function () {
        $('input[type=submit]').click(function (e) {
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: '@Url.Action("_AddCategory", "Categories")',
                dataType: "json",
                data: $('form').serialize(),
                success: function (result) {
                    window.location='@Url.Action("Categories")';
                },
                error: function () {

                }
            });
        });
    });
</script> 
```

在您的操作方法中，不是返回部分或重定向，而是返回 Json(true);

```
public ActionResult _AddCategory(CategoriesViewModel viewModel)
{
    if(//success)
    {
        return Json(true);
    }
    else
    {
        return Json(false);
    }
} 
```

# javascript - 使用对象表示法向对象添加方法

> ID：14667276
> 
> 赞同：3
> 
> 时间：2013-02-02T22:38:29.967
> 
> 标签：javascript, prototype, meteor, javascript-objects

我有以下代码：

```
Template.leaderboard.players = function() {
    return Players.find({}, {sort: {score: -1, name: 1}});
};

Template.leaderboard.selected_name = function() {
    var player = Players.findOne(Session.get("selected_player"));
    return player && player.name;
}; 
```

我想更清楚地组织它：

```
Template.leaderboard = {
    players: function() {
        return Players.find({}, {sort: {score: -1, name: 1}});
    },
    selected_name: function() {
        var player = Players.findOne(Session.get("selected_player"));
        return player && player.name;
    }
}; 
```

问题是（我相信控制台中的错误）这会覆盖`Template.leaderboard`对象的所有现有方法并替换它。

是否有可能将这些方法添加到对象中，同时使用上面显示的符号保留现有方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:44:00.387

您可以像在第一个示例中所做的那样一次添加它们，也可以使用将对象与另一个对象合并的方法，例如 jQuery 的`.extend`：

```
$.extend(Template.leaderboard, {
    newMethod1: function() {
        ...
    },
    newMethod2: function() {
        ...
    }
}); 
```

使用后一种方法，您还需要首先确定它`Template.leaderboard`确实存在！

```
var Template = Template || {};
Template.leaderboard = Template.leaderboard || {}; 
```

如果实际上跨多个 JS 文件定义，则上述代码将是典型`Template`的，并且允许您继续添加方法而无需考虑文件实际加载的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T22:48:53.610

我认为您正在寻找[模板助手](http://docs.meteor.com/#template_helpers)

```
Template.leaderboard.helpers({
    players: function() {
        return Players.find({}, {sort: {score: -1, name: 1}});
    },
    selected_name: function() {
        var player = Players.findOne(Session.get("selected_player"));
        return player && player.name;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:01:14.850

这里有一篇文章在不使用 jquery 或任何其他库的情况下回答了这个问题。

```
function merge_options(obj1,obj2){
    var obj3 = {};
    for (var attrname in obj1) { obj3[attrname] = obj1[attrname]; }
    for (var attrname in obj2) { obj3[attrname] = obj2[attrname]; }
    return obj3;
} 
```

来源：（[如何动态合并两个 JavaScript 对象的属性？](https://stackoverflow.com/questions/171251/how-can-i-merge-properties-of-two-javascript-objects-dynamically)）。

在你的情况下：

```
var newObject = {};

var tempObject = {
    players: function() {
        return Players.find({}, {sort: {score: -1, name: 1}});
    },
    selected_name: function() {
        var player = Players.findOne(Session.get("selected_player"));
        return player && player.name;
    }
};

for (var attrname in Template.leaderboard) {
    newObject[attrname] = Template.leaderboard[attrname];
}

for (var attrname in tempObject) {
    newObject[attrname] = tempObject[attrname];
}

Template.leaderboard = newObject; 
```

# java - 如何在 JAVA 中将数据从服务器发送到客户端套接字

> ID：14667278
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:38:32.963
> 
> 标签：java, database, sockets, derby, serversocket

对不起这个愚蠢的问题。问题已解决。正确的问题是我想在套接字中发送数据库连接。这实际上意识到不可能发生，因为套接字之间的信息是作为消息传递的。再次，我为这个愚蠢的问题道歉。如果您撤回反对票，将不胜感激。

```
package Controller;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

import View.LoginInChat;

public class ChatServer {

    private static final int PORT = 51000;
    private static String dbURL = "jdbc:derby:DesktopChatDatabase";
    public static String tableName = "APP.USERS";
    // jdbc Connection
    public static Connection conn = null;
    private static Statement stmt = null;
    private ServerSocket serverSocket = null;

    public static void main(String[] args) {
        ChatServer s = new ChatServer();
        try {
            s.run();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    public void run() throws IOException{
        serverSocket = new ServerSocket(PORT);
        createConnection();
        boolean running = true;
        while(running){
            LoginInChat.setConnectionDatabase(getConn());
            System.out.println(getConn());

            Socket client = serverSocket.accept();
            System.out.println(client);

        }

        serverSocket.close();
    }

    public static boolean createConnection()
    {
        boolean exceptionFlag = true;
        try
        {
            Class.forName("org.apache.derby.jdbc.ClientDriver").newInstance();
            //Get a connection
            setConn(DriverManager.getConnection(dbURL)); 
        }
        catch (Exception except)
        {   
            except.printStackTrace();
        }

        return exceptionFlag;
    }

    public static void shutdown()
    {
        try
        {
            if (getStmt() != null)
            {
                getStmt().close();
            }

            if (getConn() != null)
            {
                DriverManager.getConnection(dbURL + ";shutdown=true");
                getConn().close();
            }           
        }
        catch (SQLException sqlExcept)
        {

        }

    }

    public static Statement getStmt() {
        return stmt;
    }

    public static void setStmt(Statement stmt) {
        ChatServer.stmt = stmt;
    }

    public static Connection getConn() {
        return conn;
    }

    public static void setConn(Connection conn) {
        ChatServer.conn = conn;
    }

} 
```

这是开始的客户

```
package View;

import java.io.File;
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;
import java.sql.Connection;

import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.layout.FormLayout;
import org.eclipse.swt.widgets.Text;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FormData;
import org.eclipse.swt.layout.FormAttachment;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Button;
import Controller.LoginInInterChat;

public class LoginInChat {

    protected static Shell shell;
    private Text UsernameText;
    private Text PasswordText;
    private final static String ImageLabel = "InterChatIcons" + File.separator + "ChatIconLogin.png";
    protected final static String ImageProgram = "InterChatIcons" + File.separator + "chatIcon.ico";
    protected Display display;

    private static final int PORT = 51000;
    private static final String HOST = "localhost";
    private static Socket clientSocket = null;
    public static Connection connectionDatabase;

    /**
     * Launch the application.
     * @param args
     */
    public static void main(String[] args) {
        try {
            LoginInChat window = new LoginInChat();
            window.open();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /**
     * Open the window.
     */
    public void open() {
        display = Display.getDefault();
        connectUser();
        createContents();

        System.out.println("Client Socket = " + getClientSocket());
        shell.open();
        shell.layout();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }

        System.out.println(getConnectionDatabase());
    }

    /**
     * Create contents of the window.
     */
    protected void createContents() {
        shell = new Shell(SWT.MIN);
        shell.setSize(450, 300);
        shell.setText("InterChat");
        shell.setLayout(new FormLayout());
        shell.setImage(new Image(display, ImageProgram));

        UsernameText = new Text(shell, SWT.BORDER);
        FormData fd_UsernameText = new FormData();
        fd_UsernameText.right = new FormAttachment(0, 223);
        fd_UsernameText.top = new FormAttachment(0, 51);
        fd_UsernameText.left = new FormAttachment(0, 10);
        UsernameText.setLayoutData(fd_UsernameText);

        Label UsernameLabel = new Label(shell, SWT.NONE);
        FormData fd_UsernameLabel = new FormData();
        fd_UsernameLabel.bottom = new FormAttachment(UsernameText, -8);
        fd_UsernameLabel.left = new FormAttachment(0, 10);
        UsernameLabel.setLayoutData(fd_UsernameLabel);
        UsernameLabel.setText("Username");

        PasswordText = new Text(shell, SWT.BORDER);
        FormData fd_PasswordText = new FormData();
        fd_PasswordText.right = new FormAttachment(0, 223);
        fd_PasswordText.top = new FormAttachment(UsernameText, 38);
        fd_PasswordText.left = new FormAttachment(0, 10);
        PasswordText.setLayoutData(fd_PasswordText);

        Label PasswordLabel = new Label(shell, SWT.NONE);
        FormData fd_PasswordLabel = new FormData();
        fd_PasswordLabel.bottom = new FormAttachment(PasswordText, -6);
        fd_PasswordLabel.left = new FormAttachment(UsernameText, 0, SWT.LEFT);
        PasswordLabel.setLayoutData(fd_PasswordLabel);
        PasswordLabel.setText("Password");

        Button LoginButton = new Button(shell, SWT.NONE);
        FormData fd_LoginButton = new FormData();
        fd_LoginButton.top = new FormAttachment(PasswordText, 41);
        fd_LoginButton.right = new FormAttachment(UsernameText, 0, SWT.RIGHT);
        LoginButton.setLayoutData(fd_LoginButton);
        LoginButton.setText("Login");
        LoginButton.addSelectionListener(new LoginInInterChat());

        Label LogoInterChat = new Label(shell, SWT.NONE);
        FormData fd_LogoInterChat = new FormData();
        fd_LogoInterChat.bottom = new FormAttachment(LoginButton, 0, SWT.BOTTOM);
        fd_LogoInterChat.top = new FormAttachment(UsernameText, -41, SWT.TOP);
        fd_LogoInterChat.left = new FormAttachment(UsernameText, 35);
        fd_LogoInterChat.right = new FormAttachment(100, -2);
        LogoInterChat.setLayoutData(fd_LogoInterChat);
        LogoInterChat.setImage(new Image(display, ImageLabel));

        System.out.println("Conne is " + getConnectionDatabase());

    }

    public static Connection getConnectionDatabase() {
        return connectionDatabase;
    }

    public static void setConnectionDatabase(Connection connectionDatabase) {
        LoginInChat.connectionDatabase = connectionDatabase;
    }

    public static void connectUser()
    {
        try {
            setClientSocket(new Socket(HOST, PORT));
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void setClientSocket(Socket clientSocket) {
        LoginInChat.clientSocket = clientSocket;
    }

    public static Socket getClientSocket() {
        return clientSocket;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:39:34.270

您正在尝试使用 Derby**客户端**JDBC 驱动程序，但您的连接 URL 采用 derby**嵌入式**JDBC 语法。

使用 Derby 嵌入式 JDBC 驱动程序，或者将连接 URL 语法更新为正确的客户端语法格式 (jdbc:derby://host:port/databaseName)。

[这些文档](http://db.apache.org/derby/docs/10.9/getstart/cgsquck70629.html)将帮助您了解其中的区别。

# linux - Git推送更改文件的所有权导致500服务器错误

> ID：14667279
> 
> 赞同：4
> 
> 时间：2013-02-02T22:38:36.097
> 
> 标签：linux, git, terminal

git push 问题导致 500 服务器错误。根据服务器错误，似乎是文件权限问题。每次我从本地机器执行 git push 时，文件的所有权都会发生变化。

为了让事情再次正常运行，我必须进入 public_html 文件夹并`chown potter.potter * -R`

有人可以帮我吗？我在下面展示了我是如何设置的......

我在 /home/username/gitrepos 的网站开发服务器上建立了一个名为 potter.git 的存储库

```
ssh root@potter.com

git config --global user.email "harry@potter.com"  
git config --global user.name "harry" 
```

在 /home/potter/gitrepos 内

```
mkdir potter.git  
cd potter.git  
git init --bare 
```

设置挂钩以允许部署

```
cd hooks  
pico post-receive 
```

在接收后挂钩中输入以下内容以允许部署

```
#!/bin/bash
#
docroot="/home/potter/public_html"
while read oldrev newrev ref
do
branch=`echo $ref | cut -d/ -f3`

if [ "master" == "$branch" ]; then
git --work-tree=$docroot checkout -f $branch
fi

done 
```

使接收后可执行

```
chmod 755 post-receive 
```

在 .bash-profile 中设置工作目录

```
# GIT  
export GIT_DIR=/home/potter/potter.git  
export GIT_WORK_TREE=~/public_html 
```

现在在我的本地机器上，我设置远程连接如下：

```
git remote add website ssh://root@potter.com/home/potter/potter.git 
```

为了推动，我执行以下操作：

```
git push website master 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:05:20.850

文件所有者是执行结帐的人，因此这将是您连接的用户。而且由于您连接到root，所有文件都归root所有。

首先，我不会使用 root 作为 git 用户。我会专门为该任务创建一个新用户。

其次，我将通过 ssh 禁用 root 登录。使用`su`或`sudo`如果你想扮演上帝。

第三，如果您想以不同的用户身份运行脚本（例如结帐脚本），您可以使用 ssh 连接到 localhost ( `potter@localhost`) 上的正确用户，并使用公钥身份验证无需密码即可登录。您可以指定 ssh 应在登录后立即执行的命令。所以在你的 homedir 的某个地方，你可以创建一个脚本来更改到正确的目录并运行 git checkout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T15:25:36.480

我注意到在 Centos 上使用 cPanel 时，如果文件所有权设置不正确，那么 apache 会抛出 500 错误。代码或文件权限设置可能没有问题。

你可以像我一样创建一个钩子。

运行任何拉取运行此文件以快速重置任何文件所有权后。当您运行它时，请确保您在要更新的目录中。

```
 #!/bin/bash
    for file in `ls -a | grep -v '^\.'`
    do
            if [[ -d $file ]]
            then
                    fowner=`ls -ld $file | awk '{print $3}'`
                    fgroup=`ls -ld $file | awk '{print $4}'`
                    chown -R $fowner:$fgroup $file
            fi
    done 
```

# tortoisehg - TortoiseHg Workbench：清单窗口，弹出而不是主窗口的一部分

> ID：14667280
> 
> 赞同：0
> 
> 时间：2013-02-02T22:38:39.627
> 
> 标签：tortoisehg

我今天一定很傻，但是...

在 TortoiseHg Workbench 中，当我右键单击一个修订并选择“Browse at rev”时，会弹出一个单独的 Manifest 窗口，显示所有文件。这个窗口曾经是主窗口的子窗口。我希望它重新弹出，但是如何？我试着把它拖进去，希望它能找到它的方式（就像存储库窗口一样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:50:22.737

可以单独窗口和**预期**

如果要在 Workbench 中获取清单，则必须在“任务”工具栏中选择“清单”按钮

![工具栏](../Images/540bb338ea55b8b2897857dd473a9bfb.png)

或`Main Menu`- `View`-`Manifest`

# json - JSON编码器/解码器的不同结构属性“发布”

> ID：14667281
> 
> 赞同：2
> 
> 时间：2013-02-02T22:38:47.280
> 
> 标签：json, encoding, go, decoding

我需要通过 JSON 导出一些大型结构，并取回 JSON 字符串以**仅**更新它的一些属性。

让我们有以下结构：

```
type House struct {
    Name   string  `json:"name"`
    Rooms  int     `json:"rooms_count"`
    Owner  *Owner  `json:"-"`
} 
```

对其进行编码`encoding/json`将产生一个 JSON 字符串，如

```
{"name":"some name", "rooms_count":5} 
```

我现在得到这个 JSON 字符串：

```
{"name":"some other name", "rooms_count":7, Owner:{something...}} 
```

用户想要更改每个属性。`Owner`不允许，因为它没有被导出。但我只想只允许`rooms_count`. 有没有办法说某些属性应该与 一起导出`Encoder`，但不被 使用`Decoder`？不得不手动编写所有这些检查将是非常不愉快的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:54:36.400

在您的确切情况下，只需解组到新结构并执行 a`currentStruct.Rooms = newStruct.Rooms`正是您想要的。

对于这种类型的自定义编组，没有一种完全直接的方法可以做到这一点。你能得到的最好的结果是两个相同的结构，在不同的场合具有不同的标签，并进行一些反射来执行它们之间的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T13:27:51.270

我为 encoding/json 包创建了一个补丁并打开了[一张票](https://code.google.com/p/go/issues/detail?id=4747)。

`Encoder`它只是为结构添加了 2 个标记选项，用于分别忽略和中的结构字段`Decoder`。所有两个字段都被编码/导出但仅`Name`被解码/更新的示例：

```
type House struct {
    Name    string    `json:"house_name"`
    PubDate time.Time `json:"pub_date,nodecode"`
} 
```

# php - php else 如果不匹配则回显

> ID：14667282
> 
> 赞同：0
> 
> 时间：2013-02-02T22:39:05.613
> 
> 标签：php

我有一个数组，如果找到特定字符串，我正在尝试更改输出。

正如您在下面看到的那样，当条件发生时，它成功地将 Upper Captiva 更改为 Captiva，但我的 else 语句被忽略，如果条件不发生，它应该只显示 $row['SUBDIVISION'] 值。

我尝试将 $mycodes 和 $row['SUBDIVISION'] 添加到 else 行，但没有成功。

```
<?php
    $mycodes = explode(",", $row['SUBDIVISION']);
    $arr = array(   "Upper Captiva" => "Captiva",);
    $printedsomething=0;
    foreach($mycodes as $code) {
        if ($arr[$code] != '' ) {
            if ($printedsomething==1)  echo ", " . $arr[$code];
            else echo $mycodes;
            $printedsomething=1;
        }
    }  //end for loop
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:20:00.240

*这是您在评论中要求的代码示例。如果这不起作用，请告诉我，以便我删除此答案。*

```
<?php
  $mycodes = explode(',', $row['SUBDIVISION']);
  $arr = array('Upper Captiva' => 'Captiva');

  $printedsomething = false;

  foreach($mycodes as $code) {
    if ( !empty($arr[$code]) ) {
      /*******************************
      * This would be your original code refactored.
        $mycodes should probably be $arr[$code]     */

      echo $printedsomething ? ', ' . $arr[$code] : $mycodes;

      /*******************************/
      $printedsomething = true;
    }
  }  //end for loop
?> 
```

但我不认为这是你想要的。据我了解，您想查看是否有任何代码在 中`$arr`，如果是，则将它们回显，用逗号分隔。

除了不能回显数组 ( `$mycodes`)（我猜您想在`$arr[$code]`那里输出）这一事实之外，可能还有一种更优雅的方法，即*在循环之前*定义一个空的结果数组：

```
$results = array(); 
```

然后你可以把相关的值放在那里，所以*星星之间的*代码会是这样的：

```
$results[] = $arr[$code]; 
```

所以你可以在循环之后这样做：

```
implode(', ', $results); 
```

所以最终的代码看起来像这样：

```
<?php
  $mycodes = explode(',', $row['SUBDIVISION']);
  $arr = array('Upper Captiva' => 'Captiva');

  $results = array();    

  foreach($mycodes as $code) {
    if ( !empty($arr[$code]) ) {
       $results[] = $arr[$code];
    }
  }

  echo implode(', ', $results);
?> 
```

另一种更优雅的方法是使用 PHP 提供的无数数组函数中的一些。例如，如果您只想输出**不同的代码**并通过另一个数组过滤它们，您可以使用[array_flip()](http://www.php.net/manual/en/function.array-flip.php) on`$mycodes`将值转换为键。之后，您可以使用[array_intersect_key()](http://www.php.net/manual/en/function.array-intersect-key.php)仅过滤也存在于`$arr`. 这样，您可以在一行中表达整个循环及其输出：

```
<?php
  $mycodes = explode(',', $row['SUBDIVISION']);
  $arr = array('Upper Captiva' => 'Captiva');

  echo implode(', ', array_intersect_key($arr, array_flip($mycodes)));
?> 
```

我不知道这是否适合您，因为我不确切知道您的阵列是什么样的。另外我不确定这是否符合您的要求。

# node.js - 从 NodeJS 更新 MongoDB 不起作用

> ID：14667283
> 
> 赞同：0
> 
> 时间：2013-02-02T22:39:19.870
> 
> 标签：node.js, mongodb

我可以从命令行运行以下更新命令：

```
db.Camera.update({_id:ObjectId("51059ca49c7b280809a2a81e")}, {$set: {"Selected":0}}); 
```

但是 NodeJS 中的以下代码不起作用。当我记录 item.Selected 时，我得到一个非零值。

```
exports.findById = function(req, res) {
    var ids = req.params.id.split(",");
    db.collection('Camera', function(err, collection) {
        for(var i = 0; i < ids.length; i++){
            collection.findOne({'_id':idArray[i]}, function(err, item) {
                item.Selected += 1;
                console.log('Selected: ' + item.Selected);
                collection.update({'_id':new BSON.ObjectID(ids[i])}, item,function(err, updated) {
                  if( err || !updated ) console.log("Not updated");
                  else console.log("Updated");
                });
            });
        }
    });

}; 
```

在控制台中，我总是看到“未更新”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:10:39.100

我遇到的问题是项目 ID，如果您尝试记录该消息，您会收到一条错误消息，说明有关 ID 的唯一性 blah bla :) 所以我所做的是我保存了现有项目的 ID，然后在更新之前将其删除被调用。mongodb 开发人员也提出了同样的建议。所以你的代码看起来像：

```
id = item._id
delete item._id
collection.update(_id: id, item, function(err, updated){...} 
```

希望这会有所帮助。我也建议使用猫鼬。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:00:50.170

由于您使用了变量，循环内的 id 不是您所期望的`i`。这些是回调，在闭包内。因此，当`findOne`返回时，循环已经完成，这意味着对于每个“相机” ，它实际上并不是您所期望的，因为`i`它将等于。`ids.length`

当您的代码调用更新时，您可以直接使用项目的`_id`属性（或任何其他您想要的，只是不要依赖循环索引，除非您将代码全部包装在循环中，这可能不是必需的）。

像这样的东西......要`update`调用的查询参数发生了变化：

```
{'_id':item._id)} 
```

完整代码：

```
exports.findById = function(req, res) {
    var ids = req.params.id.split(",");
    db.collection('Camera', function(err, collection) {
        for(var i = 0; i < ids.length; i++){
            collection.findOne({'_id':ids[i]}, function(err, item) {
                item.Selected += 1;
                console.log('Selected: ' + item.Selected);
                collection.update({'_id':item._id)}, item,function(err, updated) {
                  if( err || !updated ) console.log("Not updated");
                  else console.log("Updated");
                });
            });
        }
    }); 
```

};

# jquery - 更改nested_form 的link_to_add 函数的行为

> ID：14667286
> 
> 赞同：0
> 
> 时间：2013-02-02T22:39:44.080
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, nested-forms

使用 Ryan Bates 的nested_form 时，您可以添加该字段的另一个条目

```
<%= f.link_to_add "Add another Qualification", :qualifications %> 
```

所以如果我的表格有这个

```
<%= f.fields_for :qualifications do |build| %>
<%= build.label :qualification, "Add Qualification" %>
<%= build.text_field :name, :placeholder => 'Add Qualification Here' %>
<%= build.link_to_remove "Remove this Qualification" %>
<% end %> 
```

单击添加另一个资格时，我得到标签和 text_field 重复，我怎么能只重复 text_field 所以即使有 5 个文本字段，我也只有一个标签

有没有办法修改正在使用的Jquery，因为我现在通过它调用它

```
//= require jquery_nested_form 
```

在我的 application.js

谢谢

# c++ - 可变大小和类型队列的类结构

> ID：14667288
> 
> 赞同：1
> 
> 时间：2013-02-02T22:39:54.347
> 
> 标签：c++

我更像是一个硬件人，但我使用的芯片设计工具需要我编写一些 C++ 代码。我不熟悉面向对象的编程；虽然我对 C 有很好的掌握。我要问的是如何构造我的类（称为`cq`）以完成手头的任务。

我希望能够生成指定数据类型和指定大小的队列（生成后不应更改）。理想情况下，这将像这样完成......

```
my_queue = new cq(uint8_t, 6); 
```

...这将生成一个由六个 8 位无符号整数组成的数组（或向量）。

然后，我想要一种方法来将元素插入到末尾并返回队列头部的元素，如下所示。

```
uint8_t front;
front = my_queue.advance(28); 
```

我需要什么样的结构来完成这个？由于数据类型是可变的，我需要模板吗？或者我应该有一个泛型类并让每个数据类型的类继承其结构？

谢谢！

**编辑：**使用以下答案的输入，我想出了以下内容：

```
template <class type>
template <class size>
class CQ {

    private:
        // Allocates a queue with type and size
        // specified by template arguments.
        std::queue<type> cycle_queue(size, 0);

    public:
        // Inserts input to the end of the queue;
        // removes and returns the front element.
        type advance(type in){
            type out = cycle_queue.front();
            cycle_queue.push_back(in);
            cycle_queue.pop_front();
            return out;
        }

} 
```

然后我的问题变成了......我如何在我的主 C++ 程序中实例化它？我试过这个，但没有奏效：

```
CQ<uint8_t><6> my_queue;
my_queue.advance(28); 
```

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:44:49.590

考虑使用`stl containers`，例如`std::vector`（此处：[http](http://www.cplusplus.com/reference/vector/vector/) ://www.cplusplus.com/reference/vector/vector/ ）或`std::list`（此处：[http](http://www.cplusplus.com/reference/list/list/) ://www.cplusplus.com/reference/list/list/ ）。这些集合已经完成了您想要实现的目标，您的类只需要实现对该集合的访问器即可。

原型看起来像这样：

```
std::vector Variable<uint8_t>; 
```

或者，您需要使用`Templates`. 可以在这里找到关于它们是什么以及它们如何工作的全面解释：[http ://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)

本质上，您将声明您的对象

```
cq<uint8_t>(6); 
```

在构造函数中你会放：

```
template <class T>
cq::cq(int amount) {
    Buffer = new T[amount];
} 
```

请不要忘记在使用“free”完成后释放内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:43:17.397

这看起来像是[STL 容器的完美应用程序。](http://www.cplusplus.com/reference/stl/) 您可以编写自己的队列类（作为模板类，因为您希望能够指定数据类型），但为什么要重新发明轮子呢？

您可能正在寻找：[`std::list`](http://www.cplusplus.com/reference/list/list/)，对于 FIFO 队列。对于您的特定示例：

```
std::list<uint8_t> my_queue;
my_queue.push_back(28);            // push an element
uint8_t front = my_queue.front();  // get the element on the front of the queue
my_queue.pop_front();              // and then pop it 
```

* * *

如果您还不太熟悉 OOP 和 C++，那么现在编写自己的模板类可能有点遥不可及。如果您想尝试，整个网络都有很好的参考：例如[http://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:43:32.633

尝试：

```
#include <cstdio>
#include <queue>

int main(int argc, char * argv[])
{
    std::deque<int> myQueue;

    myQueue.push_back(1);
    myQueue.push_back(2);
    myQueue.push_back(3);

    for (int i = 0; i < 3; i++)
    {
        int j = myQueue.front();
        printf("%d ", j);
        myQueue.pop_front();
    }

    getchar();
} 
```

* * *

**编辑：**回应评论

我想到的最简单的解决方案是：

```
myQueue.push_back(newValue);
while (myQueue.size > 6)
    myQueue.pop_front(); 
```

事实上，您可以轻松地将这段代码包装在您自己的类中，例如：

```
template <class T>
class SixItemsQueue
{
private:
    std::deque<T> data;

public:
    void Push(T value)
    {
        data.push_back(value);
        while (data.size() > 6)
            data.pop_front();
    }

    T Pop()
    {
        T result = data.front();
        data.pop_front();
        return result;
    }
}; 
```

# - QGraphicsTextItem

> ID：14667291
> 
> 赞同：0
> 
> 时间：2013-02-02T22:40:19.600
> 
> 标签：

QGraphicsTextItem 类是 Qt 框架的一部分，它提供了一个文本项，您可以将其添加到 QGraphicsScene 以显示格式化文本。

# ruby - 如何用 Nokogiri 换行元素

> ID：14667292
> 
> 赞同：0
> 
> 时间：2013-02-02T22:40:33.143
> 
> 标签：ruby, nokogiri

**我需要的**

执行 Nokogiri 查询，添加一个换行符，以便在输出数据时不会将其捆绑在一起。

```
data = doc.css('div#specifications div#spec-area ul.product-spec')[0].text 
```

**我试过这个**

```
data = doc.css('div#specifications div#spec-area ul.product-spec')[0].css('li').each{ |li| li.replace '\n' }.text 
```

**我的完整代码**

```
require 'Nokogiri'
require 'open-uri'
require 'spreadsheet'

doc = Nokogiri::HTML(open("http://www.asus.com/Notebooks_Ultrabooks/ASUS_TAICHI_21/#specifications"))

#Grab our product specifications - we only need the text not HTML
data = doc.css('div#specifications div#spec-area ul.product-spec')[0].text 

#Create the Spreadsheet
Spreadsheet.client_encoding = 'UTF-8'
book = Spreadsheet::Workbook.new

sheet1 = book.create_worksheet
sheet1.name = 'My First Worksheet'

#Output our data  to the Spreadsheet
sheet1[0,0] = data
book.write 'C:/Users/Barry/Desktop/output.xls' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:54:03.150

您不想替换列表元素，只想将它们映射到它们的文本，然后将它们连接在一起，用换行符分隔。

如果你用这个抓取元素：

```
data = doc.css('div#specifications div#spec-area ul.product-spec li') 
```

[`map`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)然后，您可以使用and获取由换行符分隔的所有列表元素的列表[`join`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)，如下所示：

```
lines = data.map(&:text).join("\n") 
```

（来自评论）我以前从未使用过 ruby​​ 电子表格，但这应该允许您输入数据：

```
data = doc.css('div#specifications div#spec-area ul.product-spec li')
data.each_with_index { |line, i| sheet1[i,0] = line.text } 
```

希望有帮助。

ps "nokogiri" in`require "nokogiri"`应该全部小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:42:37.440

在每个 li 之后添加一个换行符：

```
ul = doc.at('div#specifications div#spec-area ul.product-spec')
ul.search('li').each{|li| li.after "\n"}
puts ul.text 
```

# c# - 在 Mono 中将 C++ 暴露给 C#：函数的无效转换？

> ID：14667294
> 
> 赞同：2
> 
> 时间：2013-02-02T22:40:44.173
> 
> 标签：c#, c++, mono, cil, void

我正在通过将 Mono 嵌入到我的 Windows 的 C++ 程序中来编写插件系统。现在我正在尝试向 C# 运行时公开一个 C++ 函数，以便脚本可以从主程序调用 C++ 函数。

这样做是这样的：

```
 mono_add_internal_call("Hello::MonoMsg",MonoMsg); 
```

我除了煮熟了两个例子的copypasta之外，都遇到了同样的错误：

```
C:\Projects\MonoTestBed\main.cpp|34|error: invalid conversion from 'void (*)(MonoString*)' to 'const void*'|
C:\Projects\MonoTestBed\main.cpp|34|error:   initializing argument 2 of 'void mono_add_internal_call(const char*, const void*)'| 
```

现在，我找到了一个人关于这个 /somewhere/ 的帖子，但我没有找到解决方案，只有一种让它编译的方法 - 将 MonoMsg 转换为 (void*)MonoMsg。这会让它编译，但是当你运行它时它会中断，崩溃 kerblam - 它会报告找不到该函数。

这是相关代码，包括以防万一。

```
#include <iostream>
#include <stdio.h>
#include <string>

#include<mono/jit/jit.h>
#include<mono/metadata/assembly.h>
#include <mono/metadata/mono-config.h>
#include <mono/metadata/mono-debug.h>
#include <mono/metadata/debug-helpers.h>
#include <mono/metadata/appdomain.h>
#include <mono/metadata/object.h>
#include <mono/metadata/threads.h>
#include <mono/metadata/environment.h>
#include <mono/metadata/mono-gc.h>
using namespace std;

 __declspec(dllexport) void MonoMsg(MonoString *msg)
{
        cout<<msg;
}

int main(int argc, char *argv)
{
//    mono_set_dirs(NULL,NULL);

//    mono_config_parse(NULL);

    MonoDomain *domain = mono_jit_init("C:\\herro.exe");

    MonoAssembly *assembly= mono_domain_assembly_open(domain,"C:\\herro.exe");
    cout<<assembly;
    //mono_jit_exec(domain,assembly,0,NULL);

    mono_add_internal_call("Hello::MonoMsg",MonoMsg);

    . . . 
```

> 编辑：我差点忘了提到这是某种 erm P/invoke 方法？或者其他的东西。：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:29:51.200

使您的代码工作所需的更改：

1.  的`argv`论点`main`是`char**`
2.  你应该通过`argc`并且`argv`到`mono_jit_exec`
3.  **您应该在调用之前**添加内部调用`mono_jit_exec`

像这样的东西：

```
int main(int argc, char **argv)
{
    MonoDomain *domain = mono_jit_init("C:\\herro.exe");

    MonoAssembly *assembly= mono_domain_assembly_open(domain,"C:\\herro.exe");
    cout<<assembly;

    mono_add_internal_call("Hello::MonoMsg",MonoMsg);
    mono_jit_exec(domain,assembly,argc,argv); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T02:13:03.417

您忘记指定命名空间。假设您在命名空间中编译了`Hello`类`YourAssembly`，以下更正将修复它。

`mono_add_internal_call("YourAssembly.Hello::MonoMsg",MonoMsg);`

# c++ - c++ 在类头中声明一个带有 ostream 的函数

> ID：14667300
> 
> 赞同：0
> 
> 时间：2013-02-02T22:41:52.150
> 
> 标签：c++, class, istream, ostream

我在从头文件中声明类函数时遇到问题，我不确定应该如何在头文件中对其进行格式化。这样做的目的是将类对象数据保存到文件中，以便以后能够读回。

雇员.h

```
void writedata(ofstream); 
```

雇员.cpp

```
void Employee::writedata(ofstream& employeewrite)
{
} 
```

Employeewrite 是我在 main 中声明的 ostream 对象

主文件

```
ofstream employeewrite("c:\\test\test.txt"); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:46:39.620

您*声明* `writedata`在您的标头中采用 a `ofstream`，但将其*定义*为在源文件中采用`ofstream&`（对 an 的引用）。`ofstream`让他们匹配。

# windows - 批处理文件对文件夹进行排序

> ID：14667302
> 
> 赞同：0
> 
> 时间：2013-02-02T22:41:58.740
> 
> 标签：windows, batch-file

我正在尝试构建简单的批处理 windows 文件，该文件确实根据她的名字将文件夹移动到位置。例如，如果文件夹包含 new.work.directory-abc，基于单词“work”，我希望将其移动到 h:\work。如果文件夹名称包含 old.school.stuff-1s2 基于单词“school”，则应将其移动到 h:\school。

扫描的目录将始终有新文件夹，因此我将 cron 批处理以每 1 小时运行一次。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:32:28.447

If you cannot predict at what position the keyword will appear in the name....

```
@echo off
setlocal

:: path to hourly folders:
pushd "c:\temp\hourly"

for /d %%I in (h:\*) do (
    for /d %%x in (*) do (
        for /f %%A in ('echo %%~nx ^| find /i "%%~nI"') do (
            set /p a="Moving %%x to %%I... "<NUL
            move "%%x" "%%I" >NUL
            echo Done.
        )
    )
)
popd 
```

**Assumtions:**

*   You already have folders on `H:\` into which to move the hourly folders

**How it works**

*   Take the name of the first directory on `H:\`
*   For each hourly directory, see whether the name of first `H:\` directory is contained within the name of the hourly directory
*   If it is, move that hourly directory to the first directory on `H:\`
*   Loop to the second directory on `H:\` and repeat.

**Example output**

```
C:\Temp\Hourly>dir *.
 Volume in drive C has no label.
 Volume Serial Number is CE09-0D42

 Directory of C:\Temp\Hourly

02/06/2013  08:57 AM    <DIR>          .
02/06/2013  08:57 AM    <DIR>          ..
10/20/2011  01:17 PM    <DIR>          99 Windows 7 Shortcuts
01/24/2013  02:00 PM    <DIR>          A sysinternals folder
06/18/2012  02:45 PM    <DIR>          funny
01/14/2013  12:47 PM    <DIR>          PortableApps
01/16/2013  09:44 AM    <DIR>          songs
02/06/2013  08:33 AM    <DIR>          This is a temp directory
01/24/2013  02:01 PM    <DIR>          user prompts
06/20/2012  08:00 AM    <DIR>          We Are Anonymous
               0 File(s)              0 bytes
              10 Dir(s)  176,419,254,272 bytes free

C:\Temp\Hourly>dir h:\*.
 Volume in drive C has no label.
 Volume Serial Number is CE09-0D42

 Directory of h:\

08/02/2011  02:24 PM    <DIR>          52bb3510d8007c2f356572
08/16/2011  06:35 AM    <DIR>          ATI
11/07/2012  01:22 AM    <DIR>          Desktop Document
09/20/2011  01:50 PM    <DIR>          Documentum
02/23/2011  08:07 AM    <DIR>          Drivers
01/04/2013  01:17 PM    <DIR>          ffe
12/19/2012  11:19 AM    <DIR>          flex_renamer
01/11/2012  02:44 PM    <DIR>          Games
01/08/2013  12:14 PM    <DIR>          gnuwin32
03/03/2011  09:32 AM    <DIR>          Intel
07/13/2009  10:20 PM    <DIR>          PerfLogs
09/17/2010  01:08 PM    <DIR>          PortableFrozenBubble
08/28/2012  02:27 PM    <DIR>          portaputty
11/13/2012  10:40 AM    <DIR>          Program Files
01/22/2013  02:30 PM    <DIR>          Program Files (x86)
06/01/2012  01:08 PM    <DIR>          SpamBayes
02/24/2011  04:21 PM    <DIR>          Symantec
01/24/2013  01:56 PM    <DIR>          Sysinternals
04/19/2011  08:35 AM    <DIR>          Tcl
04/19/2011  08:30 AM    <DIR>          TclDevKit
02/06/2013  08:52 AM    <DIR>          temp
02/19/2010  05:42 PM    <DIR>          universal print driver
11/07/2012  01:11 AM    <DIR>          Users
02/06/2013  08:56 AM    <DIR>          Windows
               0 File(s)              0 bytes
              24 Dir(s)  176,419,254,272 bytes free

C:\Temp\Hourly>movedir.bat
Moving A sysinternals folder to h:\Sysinternals... Done.
Moving This is a temp directory to h:\temp... Done.
Moving 99 Windows 7 Shortcuts to h:\Windows... Done.

C:\Temp\Hourly>dir *.
 Volume in drive C has no label.
 Volume Serial Number is CE09-0D42

 Directory of c:\Temp\Hourly

02/06/2013  09:00 AM    <DIR>          .
02/06/2013  09:00 AM    <DIR>          ..
06/18/2012  02:45 PM    <DIR>          funny
01/14/2013  12:47 PM    <DIR>          PortableApps
01/16/2013  09:44 AM    <DIR>          songs
01/24/2013  02:01 PM    <DIR>          user prompts
06/20/2012  08:00 AM    <DIR>          We Are Anonymous
               0 File(s)              0 bytes
               8 Dir(s)  176,419,254,272 bytes free

C:\Temp\Hourly> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T05:17:52.227

我在看到 rojo 的答案之前制作的另一个版本（使用变量“查找和替换”）......：

```
@echo off
for /f "tokens=*" %%i in ('dir %~dp0 /b /ad') do call :match %%i
goto continue
    :match
    set dirname=%1
    if "%dirname%"=="work" goto :eof
    if "%dirname%"=="school" goto :eof
    if "%dirname:work=m%" neq "%dirname%" move "%~dp0%dirname%" "%~dp0%work\"
    if "%dirname:school=m%" neq "%dirname%" move "%~dp0%dirname%" "%~dp0%school\"
    goto :eof
:continue 
```

对于您需要的每个不同类别，您必须制作另一个

```
if "%dirname%"=="category" goto eof 
```

和另一个

```
if "%dirname:category=m%" neq "%dirname%" move "%~dp0%dirname%" "%~dp0%category\" 
```

'm' in`"%dirname:category=m%"`只是任意的，你可以将其更改为其他任何内容。

# c++ - 根据项目定义不同的功能

> ID：14667305
> 
> 赞同：0
> 
> 时间：2013-02-02T22:42:32.663
> 
> 标签：c++, preprocessor-directive

我目前有两个 c++ 项目，它们共享许多相同的源文件和头文件。其中一个是游戏服务器，另一个是客户端。我的一些类具有客户端或服务器独有的功能，因此只能为其中之一编译。但是，我不确定该怎么做。到目前为止，我的尝试是：

1.  在Client.h `#define IS_CLIENT`（包括 main 函数）和`#define IS_SERVER`Server.h 中使用。这失败了，因为其他头文件必须使用`#include`它们（所以当我想编译某些东西时，我最终不得不修改所有头文件）

2.  使用`#include "CompileType.h"`where CompileType.h 定义 IS_CLIENT 或 IS_SERVER。这是与以前的方法不同的一项重大改进，但仍然让我在想要编译时更改文件。

两种尝试都使用`#ifdef`并`#endif`围绕 .cpp 文件中的选择函数定义。

如果可能的话，一个可能的解决方案是`#define`在全球范围内（因此它会影响所有源文件和头文件）。我的 IDE (Code::Blocks) 设置中可能还有一些我还没有看到的东西。

对此问题的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:08:28.350

最好的方法是完全分离你的功能，这样所有的“服务器”功能都在一个或多个只用于服务器的文件中，而你的所有“客户端”都在它自己的文件中。所以，基本上，你有三个目录，一个是“服务器”文件，一个是“客户端”文件，一个是“普通”文件。

不应该在源文件中使用`#if`or ，除非解决这个问题的努力真的非常巨大。`#ifdef`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:08:02.427

对于我从事的一个项目，我们有一个具有核心功能和几个可选模块的程序。然后，属于一个模块的每个文件都写在一些`#ifdef MODULENAME / #endif`块中，然后可以通过`MODULENAME`在项目规模上定义来决定编译哪个模块（在带有属性表的 Visual Studio 中，但代码块有一些等价物）。并且在磁盘上，每个模块文件都位于不同的文件夹中，这样它就不会变得太乱，这个解决方案也可以为你工作。

# forms - MS Access 打开一个特定 ID 的表单

> ID：14667308
> 
> 赞同：0
> 
> 时间：2013-02-02T22:42:40.837
> 
> 标签：forms, ms-access

我有一张有 5 种表格（form1、form2、form3、form4、form5）的表格。我想要做的是根据前一个表单的 id 打开一个特定记录的表单。假设我打开记录 id 为 15 的 form1，我想单击打开 form2 以记录 id 15 的按钮。记录 id 是指主表中的 ID。我正在使用下面的代码，但它不断将 form2 打开到新记录，而不是与 form1 相同的记录 ID。任何人都可以帮忙吗？

```
Private Sub Command110_Click()
Dim recordID As Integer

   recordID = Me.ID
   MsgBox (recordID)

   DoCmd.OpenForm "Form2", , , "ID = " & recordID

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:45:46.237

如果通过记录ID，您的意思是屏幕底部显示的记录号，它不会起作用。您需要使用字段名称，因此：

```
 DoCmd.OpenForm "Form2", , , "ID = " & AFieldThatMatchesID 
```

要进行测试，您可以使用您确定是 form2 中的 ID 的数字：

```
 DoCmd.OpenForm "Form2", , , "ID = " & 7 
```

在尝试打开下一个表单之前，您将保存以保存新记录：

```
 Me.Dirty = False 
```

# parameter-passing - 将函数作为参数传递

> ID：14667312
> 
> 赞同：0
> 
> 时间：2013-02-02T22:43:03.983
> 
> 标签：parameter-passing, javascript

如何将一个函数传递给另一个函数并在特定时刻在另一个脚本中调用它？例如，我想做这样的事情：

```
var interval;   
var parallaxElements = function(elementSet,operacija){
    clearInterval(interval);
    var parallax = [];
    if(elementSet!=null){
        elementSet.find(".parallax").each(function(index) {
            parallax.push($(this));
        }); 
    }   
    parallaxTiming = 30;
    parallax = _.shuffle(parallax);

    interval = setInterval(function(){
        var elem = parallax.shift();        
        if(typeof(elem)!="undefined"){
             elem.stop().transition({
                y: "0px",
                z: "0px",
                duration:"850ms"
             })  
        }else{
            clearInterval(interval); 
```

这是我希望调用传递函数的地方

```
 return operacija;
            };          
        }, parallaxTiming); 
    } 
```

然后像这样调用函数：

```
parallaxElements(container,function(){ alert(123); }); 
```

任何帮助都会更有用。提前感谢所有答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:49:18.700

只要打电话`operacija()`。

小演示代码：

```
var foo = function(operacija) {

  interval = setInterval(function(){
    clearInterval(interval);
    return operacija();
  }, 1000);
};

foo(function() { alert("123"); } ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T22:49:36.230

更改`return operacija;`为`return operacija();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T22:48:03.910

在我看来，您只是将函数作为函数返回，而不是其执行结果。

尝试这个：

```
return operacija.call(); 
```

# - QMenu

> ID：14667317
> 
> 赞同：0
> 
> 时间：2013-02-02T22:43:47.547
> 
> 标签：

QMenu 类是 Qt 框架的一部分，它提供了一个用于菜单栏、上下文菜单和其他弹出菜单的菜单小部件。

# c - 仅从第 30 行到第 50 行打印的程序

> ID：14667325
> 
> 赞同：0
> 
> 时间：2013-02-02T22:44:26.537
> 
> 标签：c, operators

我正在尝试编写一个程序来读取文件并打印从第 30 行到第 50 行但无法实现的程序。

主要的（） {

```
FILE *fp;
char ch;

int nol = 0;
fp = fopen ("test.txt","r");

while (1){
    ch = fgetc(fp);

    if (ch == '\n')
        nol++;

    if (nol > 30 || nol < 50){
        printf ("value of NOL is %d\n", nol);
    }

    if (ch == EOF)
        break;

}
fclose (fp);
printf ("\nNumber of line in file: %d\n", nol); 
```

我尝试使用 if nol >=30 和 nol <=50 条件并尝试打印，但这不起作用。任何输入都会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:47:08.450

"and" 运算符是`&&`, not`||`

...

```
if (ch == '\n')
{    nol++;
     if (nol >= 30 && nol =< 50) 
         printf ("value of NOL is %d\n", nol);
} 
```

如果要打印行本身而不仅仅是数字，则需要收集字符或其他内容以在找到`'\n'`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T22:48:27.083

首先，逻辑部分。

通常我们认为行号从 1 而不是 0 开始。所以初始化`nol`为 1。

如果要显示第 30 到 50 行，则需要将它们包含在测试中。使用`>=`代替`>`（与 相同`<`）。

当然你需要使用`&&`而不是`||`，否则你的条件总是正确的。

如果你想实际显示这些线条，你需要这样的东西：

```
if( nol >= 30 && nol <= 50 ) putc(ch);
if (ch == '\n') nol++; 
```

注意语句的顺序。

但实际上，`fgets`如果要显示行，则应该考虑使用，而不是一次读取一个字符。

# python - pygame.quit() 挂起，即使在 IDLE 之外

> ID：14667327
> 
> 赞同：2
> 
> 时间：2013-02-02T22:44:39.330
> 
> 标签：python, pygame

我在 Debian 上使用 Pygame 1.9.1 和 Python 2.7.3，

在我变得更高级之前，我正在尝试让一个小型测试程序正常工作；
在我告诉 Pygame 退出之前，一切似乎都很好。

我读过你需要`pygame.quit()`，至少在 IDLE 中（以确保它干净地退出，）
所以我明白了 - 但**它仍然冻结了**。

相关代码如下所示：

```
def mainLoop():                                                                                                                 
    running = True                                                                                                              
    clock = pygame.time.Clock()                                                                                                 
    while running:                                                                                                              
        gameMode()                                                                                                              
        render()                                                                                                                
        key = pygame.key.get_pressed()                                                                                          
        for event in pygame.event.get():                                                                                        
            if event.type == QUIT or key[K_ESCAPE]:                                                                             
                running = False                                                                                                 
                print 'finished'                                                                                                
                return                                                                                                          
        clock.tick(30)

if __name__=='__main__':                                                                                                        
    mainLoop()                                                                                                                  
    print 'exiting after main loop'                                                                                             
    pygame.quit() 
```

我运行它，它打印出“完成”和“主循环后退出”，
但即便如此，窗口仍然存在。

更奇怪的是，
我把它缩减为一个**仍然挂起的最小程序（就是这样，全部）：**

```
import pygame
pygame.init()
pygame.quit() 
```

有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T15:14:29.017

`pygame.init` will try to initialise all of PyGame's modules, whether needed or not. `pygame.quit` will quit all active modules, and is called automatically when the interpreter quits (which is why the issue still remains when the explicit call to `pygame.quit` is removed).

The `pygame.mixer.quit` method currently hangs on Debian Wheezy (as of 2013-06-12). If you are not using the mixer, you can just replace calls to `pygame.init` with calls to the `init` methods of the modules which you are using (a list of modules which require `init` calls can be found under 'I' in the [PyGame documentation index](http://www.pygame.org/docs/genindex.html#I)). In my case, initialising the `display` module was sufficient. So, your example becomes:

```
import pygame
pygame.display.init()
pygame.quit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:00:54.537

您是否尝试在 IDLE 中运行该程序？我听说你不应该这样做，因为 IDLE 不喜欢 pygame

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T00:30:06.363

该命令`pygame.quit()`基本上只是关闭您打开的窗口。然后代码将继续执行，直到出现错误，即屏幕不存在。如果您想真正停止程序，请使用`sys.exit()`，程序将停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-05T23:02:29.667

即使使用 IDLE，我也做了两个：

```
# other code ^
pygame.quit()
sys.exit() 
```

这似乎奏效了

# jasmine - Jasmine.js 错误处理

> ID：14667328
> 
> 赞同：1
> 
> 时间：2013-02-02T22:44:47.530
> 
> 标签：jasmine

当 Jasmine 测试中出现错误时，它只是打印堆栈并隐藏它，有没有办法重新抛出它，以便可以从 JavaScript 控制台调试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:12:53.880

这很明显，Jasmine 规范运行器在左上角有一个 no try/catch 复选框

# python - python collections.Counter中的对象平等

> ID：14667332
> 
> 赞同：4
> 
> 时间：2013-02-02T22:45:39.747
> 
> 标签：python, dictionary, counter, object-equality

我有 collections.Counter 类的实例，也有一些对象，例如：

```
p1 = Person(name='John')
p2 = Person(name='John')
p3 = Person(name='Jane') 
```

我想在 Counter 的实例中保存这个人对象的计数，考虑到具有相同名称的人对象必须增加相同的人数，所以如果我有一个包含所有人对象的列表：

```
people = [p1, p2, p3] 
```

我用它填充我的计数器：

```
c = Counter(people) 
```

我想得到以下信息：

```
c[p1] #prints 2
c[p2] #prints 2
c[p3] #prints 1 
```

我的第一次尝试是为 person 对象实现一个新`__eq__`方法

```
def __eq__(self, other):
  return self.name == other.name 
```

我认为这可能会起作用，因为计数器对象似乎会根据键对象的相等性来增加键的计数，例如：

```
c = Counter(['A', 'A', 'B'])
c['A'] #prints 2
c['B'] #prints 1 
```

另一种尝试可能是从 Counter 继承并覆盖 Counter 用于测量对象之间相等性的底层方法，我不确定，但我认为 Counter 使用`__contains__`方法。

我的问题是，是否有任何方法可以在不使用继承的情况下获得这种行为，如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T22:53:22.747

您还必须实施`__hash__`：

```
class Person(object):
    def __init__(self, name=None, address=None):
        self.name = name
        self.address = address

    def __eq__(self, other):
        return self.name == other.name and self.address == other.address

    def __hash__(self):
        return hash((self.name, self.address)) 
```

现在您的代码有效：

```
>>> Counter(people)
Counter({<__main__.Person object at 0x24a7590>: 2, <__main__.Person object at 0x24a75d0>: 1}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T22:58:47.863

如果您的对象像您的示例中那样简单，请使用`collections.namedtuple`

```
from collections import Counter, namedtuple
Person = namedtuple('Person','name')

n1 = Person(name='John')
n2 = Person(name='John')
n3 = Person(name='Jane')
Counter((n1,n2,n3))
# Counter({Person(name='John'): 2, Person(name='Jane'): 1}) 
```

# django - 如何使用 Django 制作网站？

> ID：14667333
> 
> 赞同：0
> 
> 时间：2013-02-02T22:45:40.963
> 
> 标签：django

我学习了 HTML/CSS/JS 并练习用它制作一些静态网站，只是离线，没有服务器/数据库......现在，我已经在 djangoproject 上完成了 Django 的教程（所以我有一个民意调查应用程序），但我我不知道我应该如何将两者混合起来制作一个网站。

Django 模板如下所示：

```
{% if latest_poll_list %}
    <ul>
    {% for poll in latest_poll_list %}
        <li><a href="/polls/{{ poll.id }}/">{{ poll.question }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No polls are available.</p>
{% endif %} 
```

但是当我查看 django 页面的来源时，例如：http: [//www.michael54.com/hallway](http://www.michael54.com/hallway)

没有什么看起来像这个模板，没有 {% %}

所以... 这个模板适合页面的什么位置？

我只是想看看我打算如何正确地组合一个页面，所以我知道基本框架，然后我可以从那里发展我的能力。现在，我什至不知道从哪里开始..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:53:23.597

> 所以... 这个模板适合页面的什么位置？

是模板！

一般概念是您的站点可能有许多 html 页面，它们都包含相同的内容 - 标题栏、导航、常见的 css 包含等。模板机制的概念是提供一个基本模板，以便新页面可以使用这并且只需要最少的 html 来填充内容。

模板引擎的另一面是您可以替换模型来格式化和显示数据。例如，用户个人资料页面可能会传入对象`person`，您可能会输出：

```
<p>Person's Name: {% person.name %}</p> 
```

这将产生html：

```
<p>Person's Name: Fred</p> 
```

这让我想到了如何处理模板。模板通过模板处理器传递——它根据其内容查找`{{`和标记并执行适当的操作。`{%`

这是[MVC](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)概念的一部分。在此架构中，您将项目分为三个部分 - 模型（数据，通常包括操作这些对象的逻辑），控制器（在 Django 中，这些是视图），它们确定要显示的内容和视图（在 Django 中，模板），这决定了如何显示它。这个想法是分离有助于扩展项目。

您可以在没有模型的情况下启动 Django 项目——您只需要一个返回`HttpResponse`对象的视图。通常你会`render_to_response`为此使用辅助函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:02:15.433

您提供的那部分代码是 Django 模板 - Django 将其编译为简单的 html 代码。

这些`{% %}`标记只是 Django 的指令，所以它应该知道它应该对它做一些事情，即检查一些`if`语句或执行`for`循环内的代码。

让我们再看看这个模板：

```
{% if latest_poll_list %}
    <ul>
    {% for poll in latest_poll_list %}
        <li><a href="/polls/{{ poll.id }}/">{{ poll.question }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No polls are available.</p>
{% endif %} 
```

现在，假设您`latest_poll_list`包含 2 个项目的列表，Django 模板系统将上面的代码编译为如下所示：

```
 <ul>
        <li><a href="/polls/1/">Here is first poll's question</a></li>
        <li><a href="/polls/2/">Here is second poll's question</a></li>
    </ul> 
```

或者，如果变量内没有民意调查`latest_poll_list`，则应显示：

```
<p>No polls are available.</p> 
```

我相信您应该了解更多有关服务器端渲染的信息，但我不能推荐任何资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T22:55:16.350

您可以查看 (github) 上 Mezzanine A Django CMS 的源代码，了解 css 和 JS 等静态文件的排列方式（它使用引导程序，但主体）对于自定义是相同的

# asp.net - 为什么它找不到我的模块？

> ID：14667338
> 
> 赞同：0
> 
> 时间：2013-02-02T22:45:59.747
> 
> 标签：asp.net, asp.net-mvc-4, basic-authentication

> **可能重复：**
> [为什么找不到我的 BasicAuthenticationModule？](https://stackoverflow.com/questions/14667055/why-cant-it-find-my-basicauthenticationmodule)

我正在尝试创建自己的基本身份验证实现。

我已经`BasicAuthenticationModule.cs`存储在 my 中`solution\Modules`，它的命名空间是：

```
namespace Web_API.Modules
{
    public class BasicAuthenticationModule : IHttpModule 
```

我已将其添加到我的 web.config 中，如下所示：

```
 <system.webServer>
    <modules>
      <add name="MyBasicAuthenticationModule" type="Web_API.Modules.BasicAuthenticationModule, BasicAuthenticationModule" /> 
```

运行此程序时出现以下错误：

```
Server Error in '/' Application.

Could not load file or assembly 'BasicAuthenticationModule' or one of its dependencies. The system cannot find the file specified.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.IO.FileNotFoundException: Could not load file or assembly 'BasicAuthenticationModule' or one of its dependencies. The system cannot find the file specified. 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:54:26.470

您似乎为您的模块指定了错误的程序集名称。当你写：

```
type="Web_API.Modules.BasicAuthenticationModule, BasicAuthenticationModule" 
```

这意味着`BasicAuthenticationModule`在`Web_API.Modules`名为`BasicAuthenticationModule`. 您定义此类的项目是否称为`BasicAuthenticationModule`？我猜不是。这就是 ASP.NET 无法加载您的模块的原因。您应该指定定义此模块的正确程序集名称。

例如，如果您的 ASP.NET MVC 应用程序被调用`MvcAPplication1`，则定义可能如下所示：

```
type="Web_API.Modules.BasicAuthenticationModule, MvcApplication1" 
```

type 属性的格式是这样的：

```
type="Namespace.ClassName, AssemblyName" 
```

# html - 元素不会停留在顶部。浮动问题？

> ID：14667339
> 
> 赞同：0
> 
> 时间：2013-02-02T22:46:06.240
> 
> 标签：html, css

在此页面上：[http://greengoosemarketing.com/index2.html](http://greengoosemarketing.com/index2.html)，右侧的登录应该位于屏幕顶部，而是显示在底部附近。我认为这是一个 CSS 问题。可能与 float: left 或 display: inline-block 有关吗？

CSS： http: [//greengoosemarketing.com/style2.css](http://greengoosemarketing.com/style2.css)

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:50:35.703

假设父 div 有一个固定的宽度（它看起来）

```
#rightColumn{
    float: right;
    margin-left: 0;
    margin-right: 15px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:51:57.477

扩展 CSS 中的 #rightColumn 选择器，如下所示：

```
#rightColumn {
    margin-left: 10px;
    width: 250px;
    font-size: 16px;
    float: right;
} 
```

# android-fragments - ViewPager + Fragments 开始新的活动

> ID：14667342
> 
> 赞同：3
> 
> 时间：2013-02-02T22:46:40.857
> 
> 标签：android-fragments, android-activity, actionbarsherlock, android-viewpager

如果我有一个 viewpager，其中每个页面都是一个片段。其中一些片段想要启动其他视图/活动，所有这些请求都必须传递给父活动。因此，对于视图分页器中的每个页面，启动新活动的所有请求以及需要传递回片段的所有结果都通过一个主要活动进行。这似乎会变得混乱。有没有更好的方法来处理这个？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:08:01.457

> 因此，对于视图寻呼机中的每个页面，启动新活动的所有请求以及需要传递回片段的所有结果都通过一个主要活动进行。

由于您的`Fragments`生死与父母的生命周期有关`Activity`，是的，他们必须使用父母来开始并从其他人那里接收结果`Activities`。

从 API 11 开始，在最新的支持库中，您可以从您的内部调用这些方法`Fragments`，它们将从它们的父级`Activity`为您执行。

```
 Intent intent = new Intent(getActivity(), SomeActivityToStart.class);
    startActivity(intent); 
```

你也可以`Activity`在你的`Fragments`.

```
 Intent intent = new Intent(getActivity(), SomeActivityToStart.class);
    startActivityForResult(intent, REQUEST_CODE); 
```

`onActivityResult(int requestCode, int resultCode, Intent data)`然后在你的重写`Fragment`从 parent 获取结果`Activity`。

> 这似乎会变得混乱。有没有更好的方法来处理这个？

由于您不必自己管理父母`Activity`与孩子之间的沟通`Fragment`，因此我认为这应该不会太混乱。

结帐[http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)以获取有关这些方法的参考。

# mysql - MySql 自动 TIME_STAMP 不工作

> ID：14667346
> 
> 赞同：3
> 
> 时间：2013-02-02T22:47:09.120
> 
> 标签：mysql, timestamp

我创建了一个表，我在创建表时设置了一个列`payment_time`, `TIMESTAMP DEFAULT CURRENT_TIMESTAMP`。

当我插入值时，我`payment_time`用`''`. 但是，当我检查 payment_time 上的表格时，我正在寻找当前时间的 0000-00-00 00:00:00 。我在这里犯错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:01:38.503

尝试这个

```
 payment_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

并像这样修改您的插入语句

```
 INSERT INTO TB (`payment_time`) VALUES ('NOW()' ); 
--dont specifie the id column  it will be automatically inserted 
```

编辑。

```
 INSERT INTO TB (`col1`, `col2`,`payment_time`) VALUES ('somevalue1','somevalue2','NOW()' ); 
 -- dont use the id column just the other columns , and be sure that columns are in right ORDER 
```

由于您编辑的问题，这里是解决方案

```
INSERT INTO donors (firstName,lastName,gender,email,amount,currency)VALUES(  'MD.Borhan', 'Safa', 'm', 'borhansafa@yahoo.com', '5', 'GBP' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-18T12:22:15.293

```
payment_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

使用这个然后不要`payment_time`在插入语句中使用。当前日期将自动分配给您各自的条目。

# jquery - jQuery脚本中的Tumblr变量

> ID：14667349
> 
> 赞同：1
> 
> 时间：2013-02-02T22:47:28.637
> 
> 标签：jquery, variables, themes, tumblr

我正在尝试为 Tumblr 制作自己的自定义主题（实际上是在尝试创建某种以博客为基础的作品集）并且遇到了一个问题：

我正在使用 jQuery 并希望将 Tumblr 变量插入到该脚本中，以便能够从 Tumblr 网站上的外观面板更改颜色。但这似乎不起作用。也许语法有一些我不考虑的特殊之处。这是插入变量的脚本。

```
<script>
    $("#Home").hover(
        function(over){
            $("#Home").css('background-color','{color:Home-hover}');
            $("#title").css('color','{color:Home-hover}');
        },
        function(out){
            $("#Home").css('background-color','{color:Buttons}');
            $("#title").css('color','{color:Buttons}');
        }
    );
</script> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:53:50.637

当您放置`{color:buttons}`在单引号中时，您就是将这些字符放入 CSS 中。您想访问存储在页面对象中的值吗？也许有一个`color`具有 key 的对象，`Buttons`您可以将其传递给 jQuery 的 css 处理程序，例如：

```
$("#title").css('color',document.color.Buttons) 
```

或者：

```
 $("#title").css('color',document.color["Buttons"]) 
```

也就是说，假设这些 Tumblr 变量存在于文档全局范围内。如果它们是在像这样的闭包内创建的`(function() { ... })`，那么您将无法在闭包之外访问它们。

# 编辑

jQuery 的真正强大之处在于您可以访问和操作页面上的几乎所有内容，包括元数据。在这里玩[我的 jsfiddle](http://jsfiddle.net/vAkDQ/8/)。基本思想是将`{color:Buttons}`变量存储在 javascript 变量中，然后根据该变量设置 css。

## 里面`$(document).ready()`

```
$("#Home").on("mouseenter", function() {
   var metaColorButtons = $("meta[name='color:Buttons']").prop("content");
   $("#title").css('color', metaColorButtons);
 });

$("#Home").on("mouseleave", function() {
  $("#title").css('color', '#000');
}); 
```

# eclipse - Eclipse RCP 与 Eclipse

> ID：14667351
> 
> 赞同：6
> 
> 时间：2013-02-02T22:47:40.180
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我开始开发基于 GUI 的插件，并通过插件指南等来完成我的作业。但我注意到 Eclipse 插件和 Eclipse RCP 插件有不同的指南。但是我无法在两者之间得到直接的区别，所以我想知道我应该走哪条路线，我应该使用标准 Eclipse 还是使用 Eclipse 进行 RCP 开发？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-03T14:32:34.400

如果你想扩展 Eclipse IDE，就像[本教程](http://www.vogella.com/articles/EclipsePlugIn/article.html)一样，一个简单的经典 Eclipse 就足以开发“ [Eclipse 插件](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/firstplugin.htm)”。

> Eclipse 平台被构建为一个核心运行时引擎和一组作为平台插件安装的附加特性。
> 插件通过**提供预定义的扩展点**来为平台提供功能。工作台 UI 由一个这样的插件提供。
> 当您启动工作台时，您并没有启动一个 Java 程序。您正在激活一个平台运行时，它可以动态发现已注册的插件并根据需要启动它们。
> 
> 当您想要提供扩展平台的代码时，您可以通过在插件中定义系统扩展来做到这一点。
> 该平台有一组定义明确的**扩展点**——您可以在这些地方连接到平台并贡献系统行为。
> 从平台的角度来看，您的插件与资源管理系统或工作台本身等基本插件没有什么不同。

* * *

但是如果你想做一个*独立*的应用，基于Eclipse*平台*，那么它就是一个[RCP（“Rich Client Platform”）](http://wiki.eclipse.org/RCP)，你可以按照[这个教程](http://www.vogella.com/articles/EclipseRCP/article.html)。

> 不主要用作软件开发工具的基于 Eclipse 的应用程序称为 Eclipse RCP 应用程序。
> Eclipse 4 RCP 应用程序通常使用 Eclipse 平台的基本组件并添加额外的应用程序特定组件。

然后，您需要一个“用于 RCP 和 RAP 开发人员的 Eclipse”（来自[下载页面](http://www.eclipse.org/downloads/)）。

# php - Symfony Twig For 循环

> ID：14667354
> 
> 赞同：0
> 
> 时间：2013-02-02T22:47:57.500
> 
> 标签：php, symfony

嗨，我有一个三列布局，如下所示：

```
<div class="container">
 <div id="col1">
 </div>
 <div id="col2">
 </div>
 <div id="col3">
 </div>
<div> 
```

所以我有数据要使用树枝中的 for 循环填充列。除了将每一列的数据传递给控制器​​中每一列的数组并将其传递给视图然后循环遍历每个数组之外，我想不出一种方法来做到这一点。

我对 PHP 和 Symfony 都比较陌生，我认为我在考虑这个问题。我不希望任何人为我做这项工作，只是一个正确方向的想法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:01:45.427

你说的是最好的做法。但是通常使用对象而不是第二个数组。

我不知道您在谈论什么数据以及如何获取这些数据。但是您很可能从数据库中获取这些信息。你读过[书中的教义文章](http://symfony.com/doc/current/book/doctrine.html)吗？他们向你展示了如何处理这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:28:46.013

我猜数据是按照条件在列之间拆分的。您应该尝试在控制器中应用这些条件并将 3 个数组发送到 twig。如果您对数据库和查询进行更多解释（可能使用一些代码），将会有所帮助。

# sql - SELECT * FROM people、people_emails、members 或 INNER JOIN

> ID：14667358
> 
> 赞同：0
> 
> 时间：2013-02-02T22:48:11.387
> 
> 标签：sql, inner-join

> **可能重复：**
> [INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)

我有以下两个代码：

```
SELECT * FROM people,people_emails,members
WHERE people_emails_person=people_id
AND members_person=people_id

SELECT * FROM people
INNER JOIN people_emails ON people_id = people_emails_person
INNER JOIN members ON people_id = members_person 
```

它们都产生相同的结果，但哪个是正确/更好的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:51:28.473

就目前而言，这两个查询完全相同。第一个使用连接的“旧样式”。

使用第一种样式非常“过时”。我认为这种风格不是很清楚，当这种风格用于表达外部和右连接时就会变得很清楚。

有些人总是以第一种风格来做，我相信他们会说这样的风格更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:01:43.333

它们在技术上是等效的，但是如果您要连接多个表（特别是如果它们是大表）并且您遇到查询需要很长时间才能完成，有时它有助于控制计划顺序，这可以通过显式连接（第二个，使用`INNER JOIN`s）和一些设置调整来完成。

例如，如果您使用的是 PostgreSQL，您可以设置`join_collapse_limit=1`以确保查询按照您指定的确切顺序连接。这仅在使用显式连接时才有效。有时，计划会做一些奇怪的、意想不到的事情，使查询变得非常慢，但如果你知道你的方式会更快，并且想要告诉计划者按照你的方式去做，你可以指定它。阅读[这篇关于 postgres 中显式连接的文章以](http://www.postgresql.org/docs/8.2/static/explicit-joins.html)获取更多信息。当然，这取决于您使用的 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:53:48.433

第二个是两者中的佼佼者，但都留有改进的余地。通过选择 *，您会自动选择比您需要的更多的字段。在您的情况下，由于 people_emails_person、people.people_id 和 members_person.people_id 将始终具有相同的值，因此您只需要其中一个。

回到你的问题，第二个更好的原因是它可能会运行得更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T22:55:04.633

都是正确的，但第一个查询应该更好，因为 WHERE 语法更面向关系模型。无论如何，隐式 JOIN ANSI 语法较旧，不​​太明显，不推荐使用。

# vb.net - 比较 3 个列表

> ID：14667361
> 
> 赞同：-3
> 
> 时间：2013-02-02T22:48:27.160
> 
> 标签：vb.net

我有`Listbox1`文件名，
`Listbox2`还有`Listbox3`其他一些文件名。

现在我需要检查是否`Listbox1`在 Listbox2 中找到了项目

*   如果发现`Listbox2`什么都不做
*   `Listbox2`如果在然后搜索中找不到`Listbox3`，
*   仍然没有找到然后将项目添加到 Listbox2

中的下一项`Listbox1`，做同样的事情，依此类推。

怎么做最聪明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:56:45.980

因此，您想要添加既不在 in也不在 in 的`ListBox1`文件名。列出和使用 ：`ListBox2``ListBox2``ListBox3`[`Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx)[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

```
Dim otherPaths = Listbox2.Items.Cast(Of String).Concat(Listbox3.Items.Cast(Of String))
Dim onlyInListbox1 = Listbox1.Items.Cast(Of String).Except(otherPaths)
For Each path In onlyInListbox1
    Listbox2.Items.Add(path)
Next 
```

# javascript - 使用 DOM 创建的未排序列表中的未排序列表

> ID：14667362
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:48:28.277
> 
> 标签：javascript

所以我用 Javascript 创建了一个 UL 列表，但是层次结构不正确……而且我真的不知道如何相互嵌入 dem……

这是我挣扎的样子。

```
<div class="dice-toolbar-wrapper">
<ul>
<li class="add"></li>
<li class="remove"></li>
 <li class="roll"></li>
 <li>
 <ul class="dice-toolbar-counter-wrapper">
 <li class="zero"></li>
 <li class="zero"></li>
 </ul>
 </li>
 </ul>
 </div> 
```

这就是我创建列表的方式。

```
 dice_toolbar_wrapper_close = createElementWithClass('div', 'dice-toolbar-wrapper');
    outerDiv.appendChild(dice_toolbar_wrapper_close);
    document.getElementById("page-content-wrapper");

     add_remove_roll = createElementWithOutClass('ul');
    dice_toolbar_wrapper_close.appendChild(add_remove_roll);
    document.getElementById("dice-content-wrapper"); 
```

但这是我在渲染页面后得到的。

```
<div class="dice-toolbar-wrapper">
<ul>
<li class="add"></li>
<li class="remove"></li>
<li class="roll"></li>
</ul>
<ul class="dice-toolbar-counter-wrapper">
<li class="zero"></li>
</ul>
</ul>
</div> 
```

关于如何更改 li 标签的任何提示？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:55:13.677

当您处理 DOM 时，您不是在处理*标记*，因为您似乎正在考虑（从变量 name `dice_toolbar_wrapper_close`），您正在处理*objects*。没有“打开”和“关闭”标签，有元素。

所以要创建一个`ul`：

```
var ul = document.createElement('ul'); 
```

`li`在里面放一个：

```
var li = document.createElement('li');
ul.appendChild(li); 
```

如果您想创建一个内部并将其**放入**：`ul``li`

```
var innerUl = document.createElement('ul');
li.appendChild(innerUl); 
```

完整示例：[Live Copy](http://jsbin.com/arasog/1) | [资源](http://jsbin.com/arasog/1/edit)

```
(function() {

  var outerUL, li, innerUL, thirdLI, index;

  outerUL = document.createElement('ul');
  for (index = 0; index < 5; ++index) {
    li = document.createElement('li');
    li.innerHTML = "Outer li #" + index;
    if (index === 2) {
      thirdLI = li;
    }
    outerUL.appendChild(li);
  }

  innerUL = document.createElement('ul');
  for (index = 0; index < 3; ++index) {
    li = document.createElement('li');
    li.innerHTML = "Inner li #" + index;
    innerUL.appendChild(li);
  }
  thirdLI.appendChild(innerUL);

  document.body.appendChild(outerUL);

})(); 
```

# java - 彩虹表 - 哈希减少 - Java

> ID：14667368
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:49:44.813
> 
> 标签：java, hash, rainbowtable

你能给我一些关于在 Java 中实现彩虹表哈希的良好归约函数的建议吗？我在 C++ 中看到的归约函数大多使用无符号 64 位整数，这是 Java 现在本机无法提供的，我想找到另一个解决方案。（应该在 Java 8 中可用。）

或者：如果有人知道 Java 中的一个库支持 - 至少不是低效的 - 彩虹表的使用（可能还有 cration），请告诉我。最好不要自己实施。

可悲的是，我将 Java 作为一个平台绑定，所以我不能使用市场上好的 C++ 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:12:22.217

`long`如果您使用的算法由加法、减法、乘法和按位运算组成，那么将其转换为使用 Java而不是无符号是一件容易的事。

# html - HTML 进度条

> ID：14667369
> 
> 赞同：0
> 
> 时间：2013-02-02T22:49:56.087
> 
> 标签：html, progress-bar

我如何在我的网站上添加一个进度条，看起来就像这个网站上的一样？ [进度示例](http://www.evasi0n.com/)

它看起来像苹果的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:35:31.353

您可以改用 jQuery。没有 HTML5 的限制。您也可以应用样式

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Progressbar - Custom Label</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  .progress-label {
    float: left;
    margin-left: 50%;
    margin-top: 5px;
    font-weight: bold;
    text-shadow: 1px 1px 0 #fff;
  }
  </style>
  <script>
  $(function() {
    var progressbar = $( "#progressbar" ),
      progressLabel = $( ".progress-label" );

    progressbar.progressbar({
      value: false,
      change: function() {
        progressLabel.text( progressbar.progressbar( "value" ) + "%" );
      },
      complete: function() {
        progressLabel.text( "Complete!" );
      }
    });

    function progress() {
      var val = progressbar.progressbar( "value" ) || 0;

      progressbar.progressbar( "value", val + 1 );

      if ( val < 99 ) {
        setTimeout( progress, 100 );
      }
    }

    setTimeout( progress, 3000 );
  });
  </script>
</head>
<body>

<div id="progressbar"><div class="progress-label">Loading...</div></div>

</body>
</html> 
```

此处提供源代码[http://jqueryui.com/progressbar/](http://jqueryui.com/progressbar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:53:25.423

`<progress max="Maximum Value" value="Initial Value" />`

有关更多详细信息，请参阅[此](http://www.useragentman.com/blog/2012/01/03/cross-browser-html5-progress-bars-in-depth/)内容。

请注意，这只适用于支持 HTML5 的浏览器。

# c# - 是否有一个锁允许多个线程访问，直到一个线程请求独占访问

> ID：14667372
> 
> 赞同：1
> 
> 时间：2013-02-02T22:50:53.623
> 
> 标签：c#, synchronization

我有一个聊天连接类，一旦与该`Connect`方法连接，就可以使用该方法发送消息`SendMessage`。用户完成后，他们会调用`Disconnect`.

我想要一个允许无限数量的`SendMessage`操作获取锁的锁，但只允许`Connect`/操作`Disconnect`在它们拥有独占锁并且所有其他`SendMessage`/ `Connect`/`Disconnect`操作已退出并释放锁时开始。

使用这种类型的锁，我可以确保对internal和classes 的`SendMessage`安全访问`Socket`，并且可以确保它们都不会被并行调用处理。`SocketReader``SocketWriter``Disconnect`

它还具有排队所有`Connect`/的好处`Disconnect`，这显然不能同时运行。

.NET 框架中是否存在这样的锁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:55:01.450

听起来您想要.Net 4 中的`ReaderWriterLock`或更好`ReaderWriterLockSlim`的。要使用 SendMessage，您将获得读取器锁，但调用`Connect`或`Disconnect`需要写入器锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T22:55:00.173

看来您正在寻找[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx).

# python - Python：在类 Foo: x = MyClass() 中，MyClass 可以知道分配给它的变量的名称吗？

> ID：14667373
> 
> 赞同：1
> 
> 时间：2013-02-02T22:50:54.330
> 
> 标签：python, serialization, metaclass

我希望能够做到以下几点：

```
class PrintName:
    def __init__( self, obj ):
        print obj._name

class SetName:
    def __init__( self, name = None ): # Default name is None
        self._name = name

class Test:
    f = SetName( ) # No explicit name given
    g = PrintName( f ) 
```

在这一点上，我希望 python 打印'f'，所以在执行 PrintName( f ) 时 f 应该知道它的名称。

我发现的每个自动命名解决方案都在创建后为属性命名。我一直在尝试用元类解决这个问题，但即使这样似乎也不起作用。

我想这样做是为了能够“保存”和“重新加载”python代码以供以后使用（有点像原始脚本语言，可以在使用时评估的程序中进行更改）

例如：

```
x = 0
y = 0
p = ( x, y ) 
```

打印 p 导致 (0,0)，然后对 x 和 y 执行某些操作导致

```
x = 124
y = -32
p = ( x, y ) 
```

打印 p 变为 (124,-32)。

最简单的方法是使用

```
p = ( 'x', 'y' ) 
```

但是在这种情况下，我们怎么知道'x'是变量的名称而不是字符串'x'

我已经尝试为此目的编写一种简单的脚本语言，但工作量很大，如果上述方法可行，那么整个 python 语言都可以在脚本中使用。

我正在尝试为我的问题找到一个简单灵活的解决方案。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T08:32:20.403

我设法使用**__ *prepare* __**在 Python 3.x 中找到了解决方案。这是一个解释我想要做什么的工作代码。

```
from collections import MutableMapping

class MDict(MutableMapping):
    def __init__(self, *args, **kwargs):
        self._d = dict(*args, **kwargs)
    def __getitem__(self, key):
        return self._d[key]
    def __setitem__(self, key, value):
        self._d[key] = value
        try:
            self._d[key]._key = key # Let's set the name of the object
        except AttributeError: # Not a good way to handle immutable objects
            pass
    def __delitem__(self, key):
        del self._d[key]
    def __iter__(self):
        return iter(self._d)
    def __len__(self):
        return len(self._d)

class MBase(type):
    @classmethod
    def __prepare__(metacls, name, bases, **kwargs):
        return MDict()
    def __new__(metacls, name, bases, mdct):
        return super().__new__(metacls, name, bases, dict(mdct))
    def __str__( self ):
        return "class {0}(CSub, metaclass=MBase):".format( self.__name__ )

class CSub: # An empty class so we know when to go deeper int print_code
    pass

class Integer:
    def __init__( self, value ):
        self._value = value
    def __str__( self ):
        try: # See if it's a reference
            return "{0} = Integer( {1} )".format( self._key, self._value._key )
        except: # Not it's a number
            return "{0} = Integer( {1} )".format( self._key, self._value )

class Point:
    def __init__( self, x, y ):
        if type( self ) == type( x ): # Check to see if initializing with a reference
            self._x, self._y = x._key, y._key
        else: # It's not reference
            self._x, self._y = x, y
    def __str__( self ):
        try:
            return "{0} = Point( {1}, {2} )".format( self._key, self._x._key, self._y._key )
        except:
            return "{0} = Point( {1}, {2} )".format( self._key, self._x, self._y )

def print_code( cls, indent = 2 ):
    # Print the header
    if indent == 2:
        print( "class Main(metaclass=MBase):" )
    for attr, value in cls.__dict__.items():
        if not attr.startswith( "_" ): # Ignore hidden attributes
            print( " " * indent + str( value ) ) # Use indentation
            if isinstance( value, CSub.__class__ ): # If it's a subclass then process that too
                print_code( value, indent + 2 )

class Main(metaclass=MBase):
    x = Integer( 0 )
    y = Integer( 100 )
    z = Integer( x )
    p1 = Point(x,x)
    p2 = Point(y,y)
    class Sub(CSub, metaclass=MBase):
        p = Point(1,1)
print_code( Main ) 
```

这样，如果我更改对象 x，那么引用 x 的所有其他对象也会更改。更重要的是，我可以轻松地将代码保存到文本文件中以备后用。

这仍然需要工作，但这是一个好的开始。我希望这会帮助其他人寻找类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:21:26.890

不可能从一个对象向后工作到保存它的变量的名称，除非遍历当前上下文中的每个变量并检查哪些变量（如果有）具有等于给定对象的值。那将是相对缓慢和混乱的。

也许更好的选择（尽管我不确定它是否适合您的目的）将使用*名称*本身，因此例如，您传递字符串而不是传递`f`给`PrintName`（或其他），而不是传递。`'f'`如果您需要在构造函数中访问变量的值，则`PrintName`可以访问当前堆栈帧上方的堆栈帧并选择具有给定名称的变量。您可以使用[检查模块](http://docs.python.org/2/library/inspect.html)来执行此操作，如下所示：

```
class PrintName:
    def __init__(self, name):
        # of course you can just print the name
        last_frame = inspect.stack()[1]
        if name in last_frame.f_locals:
            value = last_frame.f_locals[name]
        elif name in last_frame.f_globals:
            value = last_frame.f_globals[name]
        # do stuff with value 
```

不用说，这是相当骇人听闻的，而不是你应该在任何正常程序中做的事情。它旨在用于调试器之类的东西。

# c++ - 如何有效地将结构向量写入文件？

> ID：14667376
> 
> 赞同：1
> 
> 时间：2013-02-02T22:51:30.960
> 
> 标签：c++, vector, struct

我有将大小大于 1000 万的向量写入文本文件的代码。我使用 clock() 来计时 writefile 函数及其程序中最慢的部分。有没有比我下面的方法更好的写入文件的方法？

```
void writefile(vector<fields>& fieldsvec, ofstream& sigfile, ofstream& noisefile)
/* Writes clean and noise data to respective files
 *
 * fieldsvec: vector of clean data
 * noisevec: vector of noise data
 * sigfile: file to store clean data
 * noisefile: file to store noise data
 */
{
    for(unsigned int i=0; i<fieldsvec.size(); i++)
    {
        if(fieldsvec[i].nflag==false)
        {
            sigfile << fieldsvec[i].timestamp << ";" << fieldsvec[i].price << ";" << fieldsvec[i].units;
            sigfile << endl;
        }
        else
        {
            noisefile << fieldsvec[i].timestamp << ";" << fieldsvec[i].price << ";" << fieldsvec[i].units;
            noisefile << endl;
        }
    }
} 
```

我的结构在哪里：

```
struct fields
// Stores a parsed line of a file
{
public:
    string timestamp;
    float price;
    float units;
    bool nflag; //flag if noise (TRUE=NOISE)
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T23:18:12.017

我建议摆脱`endl`. 这每次都有效地刷新缓冲区，从而大大增加了系统调用的数量。

写`'\n'`而不是`endl`应该是一个很好的改进。

顺便说一句，代码可以简化：

```
ofstream& files[2] = { sigfile, noisefile };
for(unsigned int i=0; i<fieldsvec.size(); i++)
  files[fieldsvec[i].nflag] << fieldsvec[i].timestamp << ';' << fieldsvec[i].price << ";\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:14:27.830

[您可以按照此 SO 问题的第一个答案中的](https://stackoverflow.com/questions/13335749/writing-a-lot-of-txt-files-90-5mb-per-file-takes-up-to-1400s)建议，以二进制格式而不是文本格式编写文件以提高写入速度：

```
file.open(filename.c_str(), ios_base::binary);
...
// The following writes a vector into a file in binary format
vector<double> v;
const char* pointer = reinterpret_cast<const char*>(&v[0]);
size_t bytes = v.size() * sizeof(v[0]);
file.write(pointer, bytes); 
```

从同一个链接，OP 报告：

*   用 \n 替换 std::endl 将他的代码速度提高了 1%
*   将所有要写入的内容连接到一个流中，最后将所有内容写入文件中，代码速度提高了 7%
*   将文本格式更改为二进制格式使他的代码速度提高了 90%。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:23:38.187

一个重要的速度杀手是您将数字转换为文本。

至于原始文件输出，`ofstream`默认情况下，an 上的缓冲应该非常有效。

您应该将数组作为 const 引用传递。这可能没什么大不了的，但它确实允许某些编译器优化。

If you think the stream is messing things up because of repeated writes, you could try creating a string with `sprintf` of `snprintf` and write it once. Only do this if your timestamp is a known size. Of course, that would make extra copying because the string must be then put in the output buffer. Experiment.

Otherwise, it's going to start getting dirty. When you need to tweak out the performance of files, you need to start tailoring the buffers to your application. That tends to get down to using no buffering or cache, sector-aligning your own buffer, and writing large chunks.

# c++ - 当一个类型有额外的修饰符时会发生什么？

> ID：14667379
> 
> 赞同：0
> 
> 时间：2013-02-02T22:51:43.090
> 
> 标签：c++

> **可能重复：**
> [参考崩溃？](https://stackoverflow.com/questions/3771208/reference-collapsing)

```
template<
    class T = const std::vector<int> &
> void f(const T &); 
```

如果`T`已经是`const`和参考，会发生什么？为什么这段代码会编译呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:57:16.953

这将等效于`const (const std::vector<int>&)`&，在这种情况下，`const`将被忽略，因为您不能有对 const T 的 const 引用，只能引用 const T。由于无法重新定位引用，因此`const`无论如何都是多余的。此外，忽略`const`您拥有的`(T&) &`，并且由于 C++11 中的引用折叠规则，这将变为`T&`. 所以最终结果是`const T&`或`const std::vector<int>&`在你的情况下。

如果你有`const T*`，那么它会有所作为，因为那将是`const (const std::vector<int>&)* p`指针`const`。

# xml - XSLT 文件不显示任何 XML 数据

> ID：14667383
> 
> 赞同：-1
> 
> 时间：2013-02-02T22:52:26.473
> 
> 标签：xml, xslt

我正在使用 C# 处理使用 XML 数据的 XSLT 工作表。

在我的 XSLT 工作表上，我正在应用一个模板，该模板通过 XML 数据，并假设根据传递给它的参数抛出数字。

当我运行 XSLT 表并将参数传递给它时，没有输出。XSLT 的 html 端似乎运行良好。

这是我的 XSLT 代码：

[http://pastebin.com/eL9wnRgK](http://pastebin.com/eL9wnRgK)

这是我的 XML 文件：

[http://pastebin.com/B3eqbd6K](http://pastebin.com/B3eqbd6K)

我正在使用 Visual Studio 2012 来处理上述内容，如果我们排除我用来处理 xslt 的 C# 类，即使在 VS 的内置 XSLT 调试器中它似乎也没有做任何事情（没有数据输出）。

我已经花了几个小时进行检查，但无法真正找出我哪里出错了，也没有任何以红色突出显示的语法或显示任何错误。这种语言比c#难多了……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:02:23.603

您的 XSLT 需要进行一些认真的清理工作。记住要牢记[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。通过避免使用重复的部分，我能够将 XSLT 的长度减少 100 多行。一旦你弄清楚如何正确传递参数值，这应该可以工作：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!--Search parameter to store the search string entered-->
  <xsl:param name="SearchRecipe" />
  <!--Search type parameter to store the type of search selected-->
  <xsl:param name="SearchType" select="'Start'" />
  <xsl:param name ="IsVegetarian" />

  <!--First part of code to capture values from user and then store them 
        in the variables above-->
  <xsl:template match="/">
    <html>

      <head>
        <!--Sets Title of Page (within our Master template)-->
        <a>
          <title>Recipe Headquarters</title>
        </a>
        <!--Reference to the stylesheet we are using-->
        <link href="Cafesheet.css" rel="stylesheet" type="text/css" />
      </head>

      <body>
        <form  id="banner" name="content" method="get" action="Commercial.aspx">
          <h1 >Recipe Book</h1>
          <div id="content">
            <p>
              <label id="h2" for="txtFilter">Search Recipe Book </label>

              <input type="text" name="txtFilter" 
                     id="txtFilter" value="{$SearchRecipe}"/>

              <!--Creates a simple submit button-->
              <input type="submit" name="btnSearch" 
                     id="btnSearch" value="Submit" />
              <br />
              <br />

              <!--Label of text for our set of radio buttons-->
              <label for="rdoSearchType">Select a Search Type  </label>

              <!--Behold, the radio buttons themselves-->
              <xsl:call-template name="SearchTypeRadio">
                <xsl:with-param name="value" select="'Start'" />
                <xsl:with-param name="text" select="'Starts with'" />
              </xsl:call-template>
              <xsl:call-template name="SearchTypeRadio">
                <xsl:with-param name="value" select="'Contains'" />
                <xsl:with-param name="text" select="'Contains'" />
              </xsl:call-template>
              <xsl:call-template name="SearchTypeRadio">
                <xsl:with-param name="value" select="'RecipeType'" />
                <xsl:with-param name="text" select="'Recipe Type'" />
              </xsl:call-template>
              <br />
              <br />
              <br />

              <!--Applys the template from the second part-->
              <xsl:apply-templates 
                select="CafeRecipes[$SearchType = 'Start' or 
                                    $SearchType = 'Contains' or
                                    $SearchType = 'RecipeType']" />

            </p>
            <!--End our of Search input text box and the Type of search 
                   we want to do Div-->
          </div>

          <!--Our self closing footer div, yayyyy. Single line madness-->
          <h1>Made by Jagga ^_^</h1>
        </form>
      </body>
    </html>
  </xsl:template>

  <xsl:template name="SearchTypeRadio">
    <xsl:param name="value" />
    <xsl:param name="text" />
    <input type="radio" name="rdoSearchType" value="{$value}">
      <xsl:if test="$SearchType = $value">
        <xsl:attribute name="checked">checked</xsl:attribute>
      </xsl:if>
      <xsl:value-of select="$text"/>
    </input>
  </xsl:template>

  <!--This will be the second part of the xsl code to manipulate the data 
          based on our chosen values from above-->
  <!--Declares new xsl template-->
  <xsl:template match="CafeRecipes">
    <!--Creates a small table to display the data output produced-->
    <table id="content" border="5">
      <tr>
        <th>Recipe #</th>
        <th>Recipe Name</th>
        <th>Ingredients Required</th>
        <th>Instructions</th>
        <th>Recipe Type</th>
        <th>Vegetarian?</th>
      </tr>

      <xsl:variable name="matchedRecipes"
         select="ARecipe[
               ($SearchType = 'Start' and starts-with(ItemName, $SearchRecipe)) or
               ($SearchType = 'Contains' and contains(ItemName, $SearchRecipe)) or
               ($SearchType = 'RecipeType' and 
                            contains(RecipeInfo/RecipeType, $SearchRecipe))
                          ]" />

      <xsl:if test="$SearchType = 'Start' or $SearchType = 'Contains'">
        <xsl:apply-templates select="$matchedRecipes">
          <xsl:sort select="RecipeInfo/RecipeType" order="ascending" />
        </xsl:apply-templates>
      </xsl:if>
      <xsl:if test="$SearchType = 'RecipeType'">
        <xsl:apply-templates select="$matchedRecipes">
          <xsl:sort select="ItemName" order="ascending" />
        </xsl:apply-templates>
      </xsl:if>
    </table>
  </xsl:template>

  <xsl:template match="ARecipe">
    <tr>
      <xsl:apply-templates select="*[not(*)] | RecipeInfo/*" />
    </tr>
  </xsl:template>

  <xsl:template match="ARecipe/* | ARecipe/*/*">
    <td width="300">
      <xsl:apply-templates select="." mode="content" />
    </td>
  </xsl:template>

  <xsl:template match="Vegetarian[. = 'Yes']" mode="content">
        YesThisWorks and it's vegetarian
  </xsl:template>

  <xsl:template match="Vegetarian[. = 'No']" mode="content">
    YesThisWorks and it's NOT vegetarian
  </xsl:template>
</xsl:stylesheet> 
```

`AddParameter()`我在您的 ASPX 代码中看到的唯一调用是`MyXMLConduit.AddParameter("TheFilter", AFilter);`. 由于 XSLT 中的参数名称是“SearchRecipe”，因此您需要使用它作为参数名称，而不是“TheFilter”。您还需要获取`rdoSearchType`查询参数的值并将其添加为 XSLT 的参数之一。

```
string searchType = Request["rdoSearchType"];
if(searchType != null)
{
    MyXMLConduit.AddParameter("SearchType", searchType);
} 
```

# c - 指向 C 中函数的指针

> ID：14667387
> 
> 赞同：3
> 
> 时间：2013-02-02T22:53:08.670
> 
> 标签：c, pointers

以下两种说法有什么区别？

```
char *(*myfunc1)(char*, int)
char *myfunc2(char*, int) 
```

我知道第二个语句定义了一个函数，它接收一个指向 char 和一个 int 的指针并返回一个指向 char 的指针。我也知道`char (*myfunc2)(char*, int)`, 会返回一个字符。`*`第一条语句中的额外含义是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T22:54:59.913

第一个定义指向函数的指针，第二个是函数....

这样你就可以做...`myfunc1 = myfunc2`

每当您看到看起来像函数的东西，但函数的名称在括号中并带有 * like void (*blah)( void ) 时，这意味着您正在定义一个指向函数的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T23:03:12.457

这个问题已经回答了，只是想我会为没有看过它的人指出[这个非常有用的网站；](http://cdecl.org/)它有你的答案。

*   [字符 *(*myfunc1)(char*, int)](http://cdecl.ridiculousfish.com/?q=char+%2A%28%2Amyfunc1%29%28char%2A%2C+int%29)。
*   [char *myfunc2(char*, int)](http://cdecl.ridiculousfish.com/?q=char+%2Amyfunc2%28char%2A%2C+int%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T22:56:15.890

第一条语句中的 extra`*`意味着指针指向`myfunc1`返回的函数`char *`。

所以：

```
char *(*func1)(char*, int)  // pointer to a function that returns 'char*'
char (*func2)(char*, int)   // pointer to a function that returns 'char' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T23:03:45.793

第一种情况定义了一个函数指针 myfunc1，它返回一个 char * 变量。第二种情况定义了一个函数，而不是一个返回 char * 变量的函数指针。

函数指针需要在函数名 (*name) 周围加上括号

# c# - 模拟鼠标向下/单击多个窗口（4 个窗口）

> ID：14667391
> 
> 赞同：1
> 
> 时间：2013-02-02T22:53:26.637
> 
> 标签：c#

我们有 4 个在同一台机器上运行的 3rd 方应用程序。

在所有 4 个窗口上，我们每次都需要手动单击一些按钮。

窗户大小相同，从不改变位置。

我们如何在这些窗口上模拟鼠标单击/鼠标按下？我们不能使用 SetCursorPos/mouse_event 因为我们想实时“模拟”点击和鼠标拖动。用户的鼠标光标不能移动，它必须模拟点击。

我可以使用 Spy++ 来获取必要的窗口句柄/类，但我想知道需要将什么发送到窗口才能使其工作。

# c - 创建 argv[] 以将 args 发送到另一个函数

> ID：14667396
> 
> 赞同：2
> 
> 时间：2013-02-02T22:53:54.167
> 
> 标签：c, function, malloc, argv

我知道有一些关于此的条目，我浏览了它们，并不能完全到达我想去的地方。

我正在构建函数，它可以读取目录的内容并将常规文件传递给另一个函数以构建存档。

我正在尝试制作一个名为 items 的 argv[] 项目，我可以将其传递给我的函数，问题是我需要用文件名填充它。而不是静态声明它（我在很多示例中看​​到）我想根据文件数使用 malloc 。

这是快速的函数头：

```
void quick(int argc, char *argv[]) 
```

这是附加功能：

```
void append(char* argv[]){
    struct dirent *dp;
    int count, i = 3;
    char *files;
    char items [*files][255];
    DIR *dirp = opendir(".");
    if(dirp == NULL){
        fail('f');
    }

    printf("ar: adding files in current directory to archive: %s", argv[2]);

    while((dp = readdir(dirp)) != NULL){
        if(dp->d_type == DT_REG){
            count++;
        }
    }

    rewinddir(dirp);
    files = malloc(count*sizeof(char));

    //copy argv[2] archive name, into files, so we can pass to quick
    strcpy(items[2], argv[2]);

    while((dp = readdir(dirp)) != NULL){
        errno = 0;
        dp = readdir(dirp);

        //leave is dir is empty
        if(dp == NULL)
            break;

        // Skip . and ..
        if (strcmp(dp->d_name, ".") == 0 || strcmp(dp->d_name, "..") == 0)
            continue;

        //if file is not the archive and a regular file add to list
        if(strcmp(dp->d_name, argv[2]) != 0 && dp->d_type == DT_REG){
            strcpy(items[i], dp->d_name);
            i++;
        }
    }
    closedir(dirp);

    quick(i, items);
} 
```

我在项目 arg 上遇到错误，因为指针类型不兼容，我猜我没有正确执行 malloc（可能还有我的数组），因为我仍然没有掌握这些奥秘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:13:57.053

您的声明`char items [*files][255]`不正确。

基本上，你想`files`成为一个数组数组；因此它需要是指针到指针（即`char**`）类型。然后您需要分配该数组中的每个数组来保存实际的字符串，如下所示：

```
char** files;
files = malloc(count * sizeof(char*));      // allocate the array to hold the pointer
for (size_t i = 0; i < count; i += 1)
    files[i] = malloc(255 * sizeof(char));  // allocate each array to hold the strings 
```

完成后适当释放内存：

```
for (size_t i = 0; i < count; i += 1)
    free(files[i]);
free(files); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:24:24.337

以下是如何增长“字符串”的“数组”：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int AddString(char*** strings, size_t* count, const char* newStr)
{
  char* copy;
  char** p;

  if (strings == NULL ||
      newStr == NULL ||
      (copy = malloc(strlen(newStr) + 1)) == NULL)
    return 0;

  strcpy(copy, newStr);

  if ((p = realloc(*strings, (*count + 1) * sizeof(char*))) == NULL)
  {
    free(copy);
    return 0;
  }

  *strings = p;

  (*strings)[(*count)++] = copy;

  return 1;
}

void PrintStrings(char** strings, size_t count)
{
  printf("BEGIN\n");
  if (strings != NULL)
    while (count--)
      printf("  %s\n", *strings++);
  printf("END\n");
}

int main(void)
{
  char** strings = NULL;
  size_t count = 0;
  PrintStrings(strings, count);
  AddString(&strings, &count, "Hello World!");
  PrintStrings(strings, count);
  AddString(&strings, &count, "123");
  AddString(&strings, &count, "ABCDEF");
  PrintStrings(strings, count);
  return 0;
} 
```

输出（[ideone](http://ideone.com/JQChwT)）：

```
BEGIN
END
BEGIN
  Hello World!
END
BEGIN
  Hello World!
  123
  ABCDEF
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:01:08.383

看这里：

```
char *files;
char items [*files][255]; 
```

你最好在初始化`malloc`之后使用。`files`

据我了解，这应该是例如

```
char items [count][255]; 
```

诠释 C99 风格。

顺便说一句，`count`使用未初始化。在开始时将其设置为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:31:06.437

静态知道列的长度，您还可以分配

```
char (*items )[255];
// obtain row count
items = malloc(rowCount * sizeof(*items)); 
```

内存指向的指针`char[255]`。这样，您将获得一个连续的内存块，这可能会提供更好的局部性，并且您只需要`free`一个指针。

如果行数不太大，使用变长数组，

```
rowCount = whatever;
char items[rowCount][255]; 
```

但是，如果支持 C99 或更高版本，则可能是最佳选择。

# java - Android 粘贴点击

> ID：14667398
> 
> 赞同：0
> 
> 时间：2013-02-02T22:53:58.020
> 
> 标签：java, android, onclick

这里很简单的问题，但我似乎找不到任何东西。无论如何，Android上有一个游戏，你可以用键盘输入一个喜欢使用的作弊ID（个人使用不上传到市场）。好吧，我创建了一个静态按钮，它始终位于所有活动之上。我想只需单击我的按钮并将其粘贴到游戏中，以便输入作弊。无论如何粘贴onclick？我看不出这很难

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:26:05.717

你不能让其他应用程序的行为方式与它们不同，因为它违反了 android 的整个沙盒理念（当然，除非应用程序本身以某种方式允许它）。

您可以做的是将内容复制到剪贴板，并允许用户将其粘贴到任何他可以粘贴的地方。

更多关于它的信息：

[http://developer.android.com/guide/topics/text/copy-paste.html](http://developer.android.com/guide/topics/text/copy-paste.html)

可能有根解决方案，但像许多根操作一样，我真的缺乏如何做到这一点的知识。

# d3.js - 在 d3.js 中单击拖拽后未触发的事件（有时）

> ID：14667401
> 
> 赞同：3
> 
> 时间：2013-02-02T22:54:08.970
> 
> 标签：d3.js

## 观察到的行为

我正在使用 d3.js，我想根据[`drag`](https://github.com/mbostock/d3/wiki/Drag-Behavior#wiki-on)事件更新一些数据，并在事件发生后重绘所有内容[`dragend`](https://github.com/mbostock/d3/wiki/Drag-Behavior#wiki-on)。可拖动项目也有一些`click`行为。

可拖动项目只能沿 x 轴移动。当一个项目被拖动，并且光标在 上的可拖动项目的正上方时`dragend/mouseup`，该项目必须在重新绘制后单击两次`click`才能触发事件。当一个项目被拖动但`dragend/mouseup`没有直接出现在该项目上方时，该`click`事件会在重绘后按预期触发（在第一次尝试时）。

## 期望的行为

我希望`click`事件总是在拖动后第一次单击时触发，无论光标在哪里。

如果我用事件替换`click`可拖动项目上的`mouseup`事件，一切都会按预期工作，但这`click`是我真正想要处理的事件。

## 一个示范

这是一个独立的示例：http: [//jsfiddle.net/RRCyq/2/](http://jsfiddle.net/RRCyq/2/)

这是相关的javascript代码：

```
var data, click_count,did_drag;
// this is the data I'd like to render
data = [
    {x : 100, y : 150},
    {x : 200, y : 250}
];
// these are some elements I'm using for debugging
click_count = d3.select('#click-count');
did_drag = d3.select('#did-drag');

function draw() {
    var drag_behavior,dragged = false;

    // clear all circles from the svg element
    d3.select('#test').selectAll('circle')
        .remove();

    drag_behavior = d3.behavior.drag()
        .origin(Object)
        .on("drag", function(d) {
            // indicate that dragging has occurred
            dragged = true;
            // update the data
            d.x = d3.event.x;
            // update the display
            d3.select(this).attr('cx',d.x);
        }).on('dragend',function() {
            // data has been updated. redraw.
            if(dragged) { draw(); }
        });

    d3.select('#test').selectAll('circle')
        .data(data)
        .enter()
        .append('circle')
        .attr('cx',function(d) { return d.x; })
        .attr('cy',function(d) { return d.y; })
        .attr('r',20)
        .on('click',function() {
            did_drag.text(dragged.toString());
            if(!dragged) {
                // increment the click counter
                click_count.text(parseInt(click_count.text()) + 1);
            }
        }).call(drag_behavior);
}

draw(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-26T16:57:38.117

派对有点晚了，buuuut...

文档建议您`d3.event.defaultPrevented`在`click`事件中使用来了解元素是否刚刚被拖动。如果你将它与你的`drag`和`dragend`事件结合起来，一个更简洁的方法是在必要时调用你想要的确切函数（查看何时以及如何`flashRect`调用）：

[http://jsfiddle.net/langdonx/fE5gN/](http://jsfiddle.net/langdonx/fE5gN/)

```
var container,
    rect,
    dragBehavior,
    wasDragged = false;

container = d3.select('svg')
    .append('g');

rect = container.append('rect')
    .attr('width', 100)
    .attr('height', 100);

dragBehavior = d3.behavior.drag()
    .on('dragstart', onDragStart)
    .on('drag', onDrag)
    .on('dragend', onDragEnd);

container
    .call(dragBehavior)
    .on('click', onClick);

function flashRect() {
    rect.attr('fill', 'red').transition().attr('fill', 'black');
}

function onDragStart() {
    console.log('onDragStart');
}

function onDrag() {
    console.log('onDrag');

    var x = (d3.event.sourceEvent.pageX - 50);

    container.attr('transform', 'translate(' + x + ')');

    wasDragged = true;
}

function onDragEnd() {
    if (wasDragged === true) {
        console.log('onDragEnd');

        // always do this on drag end
        flashRect();
    }

    wasDragged = false;
}

function onClick(d) {
    if (d3.event.defaultPrevented === false) {
        console.log('onClick');

        // only do this on click if we didn't just finish dragging
        flashRect();
    }
} 
```

我不喜欢全局变量，所以我修改了使用数据：http: [//jsfiddle.net/langdonx/fE5gN/1/](http://jsfiddle.net/langdonx/fE5gN/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T18:26:01.967

在观察到在我的 svg 圈子开始再次响应点击事件之前所需的点击可能发生在文档的*任何地方*之后，我决定采用一个 hack 来模拟文档上的点击事件（感谢[https://stackoverflow.com/a /2706236/1015178](https://stackoverflow.com/a/2706236/1015178) ) 拖动结束后。这很丑陋，但它有效。

这是模拟事件的函数（再次感谢[https://stackoverflow.com/a/2706236/1015178](https://stackoverflow.com/a/2706236/1015178)）

```
function eventFire(el, etype){
  if (el.fireEvent) {
    (el.fireEvent('on' + etype));
  } else {
    var evObj = document.createEvent('Events');
    evObj.initEvent(etype, true, false);
    el.dispatchEvent(evObj);
  }
} 
```

这是更新的拖动行为：

```
drag_behavior = d3.behavior.drag()
    .origin(Object)
    .on("drag", function(d) {
        // indicate that dragging has occurred
        dragged = true;
        // update the data
        d.x = d3.event.x;
        // update the display
        d3.select(this).attr('cx',d.x);
    }).on('dragend',function() {
        // data has been updated. redraw.
        if(dragged) { draw(); }
        // simulate a click anywhere, so the svg circles
        // will start responding to click events again
        eventFire(document,'click');
    }); 
```

这是我的骇人听闻的“修复”的完整工作示例：

[http://jsfiddle.net/RRCyq/3/](http://jsfiddle.net/RRCyq/3/)

# java - Eclipse for Mac 中的 JOGL

> ID：14667402
> 
> 赞同：1
> 
> 时间：2013-02-02T22:54:09.310
> 
> 标签：java, eclipse, macos, jogl

我试图让 JOGL 在我的 Mac 上的 Eclipse 中工作，但我遇到了一些问题；只是为了澄清我以前从未使用过 JOGL，所以这整件事对我来说是非常新的。我尝试寻找一些教程，但它们都已过时/在我访问的每个网站上使用不同的文件。

因此，我已经从 JOGL 站点 (jogamp-all-platforms.7z) 下载了最新版本并解压了它。我在 Eclipse 中有一个刚刚创建的新项目，当我在用户库中选择“添加 JAR ...”时，我只选择了“.classpath”或“.project”，这似乎不是问题在任何编写的教程上。我只是想知道我此时是否做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T19:53:53.637

在官方 JogAmp wiki 中对此进行了[解释](http://jogamp.org/wiki/index.php/Setting_up_a_JogAmp_project_in_your_favorite_IDE#Eclipse_IDE_project)。

# javascript - 如何通过 HTML5 将视频添加到 3D Cube

> ID：14667409
> 
> 赞同：0
> 
> 时间：2013-02-02T22:54:53.793
> 
> 标签：javascript, html, 3d

我试图用带有视频的图像替换 3D 立方体以在每个面上添加，我在试图弄清楚如何用 html 视频元素标记替换 html 标记时遇到问题。

我的jsfiddle可以在下面看到

[http://jsfiddle.net/sean3200/W4pGa/](http://jsfiddle.net/sean3200/W4pGa/)

这是创建图像的代码的开头......

```
 function start3d(texture_image) {
       var screen_canvas = document.getElementById('canvas'); 
```

这是加载图像的代码的底部

```
 var img = new Image();
      img.onload = function() { start3d(img); };
      img.src = 'http://content.bitsontherun.com/thumbs/3XnJSIm4-640.jpg';</script> 
```

我知道如何通过 html5 创建和加载视频，但是将它放在每个立方体上有点不同.. 对此的任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:34:33.993

将此代码放入您的 div

```
<object width="400" height="400"><param name="movie"    value="http://www.youtube.com/v/YLorLVa95Xo?fs=1&amp;hl=en_GB&amp;rel=0"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/YLorLVa95Xo?fs=1&amp;hl=en_GB&amp;rel=0" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="400" height="400"></embed></object> 
```

或使用 javascript 在 html 正文中设置多维数据集类的第二个 div 上的视频：

```
$('.cube > div').eq(1).html('<object width="360" height="360"><param name="movie" value="http://www.youtube.com/v/YLorLVa95Xo?fs=1&amp;hl=en_GB&amp;rel=0"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/YLorLVa95Xo?fs=1&amp;hl=en_GB&amp;rel=0" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="360" height="360"></embed></object>'); 
```

它在 chrome 中运行良好，如果在 safari 和 firefox 中运行，请回复。

# java - ejb2中通过jndi的ejbcontext

> ID：14667414
> 
> 赞同：0
> 
> 时间：2013-02-02T22:55:05.133
> 
> 标签：java, jakarta-ee, jboss, jboss5.x, ejb-2.x

如何`EJBContext`通过 jndi 在 ejb2 无状态 bean 中获取实例？

我试过以下：

```
Object o = new InitialContext().lookup("java:comp/EJBContext"); 
```

但它失败了，因为该名称未找到 ejbcontext。然而，这段代码在 ejb3 bean 中工作。

可能我需要向 bean 描述符添加资源引用，但以下也不起作用：

```
<resource-ref>
     <res-ref-name>java:comp/EJBContext</res-ref-name>
     <res-type>javax.ejb.EJBContext</res-type>
     <res-auth>Container</res-auth>
</resource-ref> 
```

# cordova - Javascript 在 Phonegap 和 jQuery Mobile 中的第二个 html 文件中不起作用

> ID：14667420
> 
> 赞同：3
> 
> 时间：2013-02-02T22:55:41.327
> 
> 标签：cordova, jquery-mobile

我正在开发一个 Phonegap jQuery 移动 Android 应用程序。该应用程序从默认的 index.html 页面开始，在其中我使用 $.mobile.changePage 加载 demo.html 文件。demo.html 被正确加载和显示，但 javascript 无法在其中工作。我想我搞砸了 jQuery Mobile 的 'pageinit' 事件，或者我不知道如何使用它。

这是我的代码：

这发生在 index.html ：

```
 $.mobile.changePage("demo.html", {
                                transition: "slideup",
                                reverse: false,
                                changeHash: false
                            }); 
```

demo.html 的代码：

```
<!DOCTYPE HTML>
<html>
  <head>
  <script type="text/javascript">
    $('#demo-page').live('pageinit', function(){
    alert("Welcome");
  });
  </script>
    </head>
    <body>
    <div data-role="page" id="demo-page" >
    <div data-role="header">
    <h1>Take a tour</h1>
    </div>
        <div data-role="content" id="demo-content">
            <h2>This is the demo page.</h2>
        </div>
    </div>
    </body>
</html> 
```

因此，当 demo.html 显示时，“欢迎”警报不会被执行。我不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T22:58:48.660

它不起作用，因为仅加载了第二页的正文部分。

把这部分：

```
<script type="text/javascript">
    $('#demo-page').live('pageinit', function(){
        alert("Welcome");
    });
</script> 
```

进入 index.html。

可以从 demo.html 执行此代码的唯一方法是将其作为外部链接加载。

# javascript - 对象创建函数

> ID：14667422
> 
> 赞同：6
> 
> 时间：2013-02-02T22:55:53.090
> 
> 标签：javascript, memory-management

前几段描述了我想要实现的目标，实际问题在最后。谢谢

以前，我只是简单地使用`new`关键字来创建对象，并使用原型来分配方法和处理继承。然而，最近（部分受到 CoffeeScript 生成的 JS 的启发）我决定使用一个看起来像这样的对象创建函数：

```
var Test = function(a) {
    function Test(a) {
        this.a = a;
    }
    var numCalls = 0;
    Test.prototype.output = function() {
        alert('I was initialized with ' + this.a);
        numCalls++;
    };
    Test.prototype.called = function() {
        alert('You called the output ' + numCalls + ' times');
    };
    return new Test(a);
}; 
```

然后我会像这样创建一个新对象：

```
var obj = Test('string'); 
```

`new`与用于每个实例的典型方法相比，这种方法有几个优点。首先，我不太可能忘记使用这个词`new`（我知道还有其他避免的方法`new`，但据我所见，它们与我在下面描述的问题有类似的问题），其次，我可以很容易地看到 '构造函数在现在属于类的任何函数中看到的私有变量。不过，我在测试时确实遇到了警告。`instanceof`不再起作用，因为它看不到内部范围的对象 Test。为了解决这个问题，我尝试使用构造函数属性：

```
var a = Test('one');
var b = Test('two');
a.constructor == b.constructor              // false
a.constructor.name == b.constructor.name    // true 
```

这就是让我感到困惑的原因。在不使用对象创建函数的情况下创建相同的对象会导致它们的构造函数相等，但在这种情况下它们是不同的。我的猜测是，每次函数运行时都会生成一个全新的对象类型（对象结构相同，但原型的实例不同）。

如果我对问题的理解是正确的，这是否也意味着代码为每个对象实例分配额外的内存给我的 JavaScript 用于应该在实例之间共享的函数，方法是欺骗它为每个实例创建相同的对象原型（击败整个使用原型的目的）？如果是这样，是否有一种避免这种情况的好方法，同时仍然保持这种模式的好处（能够在内部函数之间共享私有变量并且不必使用`new`关键字）？

如果我误解了这个问题，有人可以告诉我实际发生的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:03:48.713

> 如果是这样，是否有一种避免这种情况的好方法，同时仍然保持这种模式的好处......

尝试使用模块方法：

```
var Test = (function TestModule() {

  function Test(a) {
    this.a = a;
  }

  Test.prototype = {

  };

  return function(a) {
    return new Test(a);
  };

}());

var a = Test('foo');
var b = Test('baz');

a.constructor == b.constructor; // true
a.constructor.name == b.constructor.name; // true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T07:23:48.290

现在我努力搜索以完成此任务：具有完全封装且无需“新”实例化它的完美类。经过一段时间的搜索，我想出了这个：

```
function Test(x){

    var innerFunction = function(y){
        var variable = y;

        this.getA = function(){
            return variable;
        }

        this.setA = function(x){
            variable = x;
        }
    }
    return new innerFunction(x);
} 
```

但测试结果证明是错误的：

```
var a = Test("foo");
var b = Test("baz");

alert(a.constructor == b.constructor);             //false, not good!
alert(a.constructor.name == b.constructor.name);   //true 
```

所以似乎有错误的范围，所以我使用了一个*公共内部函数*：

```
function Test(x){

    function innerFunction(y){
        var variable = y;

        this.getA = function(){
            return variable;
        }

        this.setA = function(x){
            variable = x;
        }
    }
    return new innerFunction(x);
} 
```

并且运行一些广泛的测试证明它是正确的：

```
var a = Test("foo");
var b = Test("baz");

alert(a.constructor == b.constructor);             //true, made it!
alert(a.constructor.name == b.constructor.name);   //true

alert(a.getA());                        //"foo" as expected
alert(a.getA() == b.getA());            //false as expected

a.variable = "whatever";
alert(a.getA());                       //"foo" as expected
alert(a.variable);                     //"whatever", doesn't seem preventable

a.setA("somewhere");
alert(a.getA());                       //"somewhere", as expected
alert(a.variable);                     //"whatever", doesn't seem preventable 
```

但是，我们可以这样使用几个函数吗？这是我的第一种方法：

```
function Test(x){

    function innerFunction(y){
        var variable = y;

        this.getA = function(){
            return variable;
        }

        this.setA = function(x){
            variable = x;
        }
    }
    return new innerFunction(x);
}

function TestToo(x){

    function innerFunction(y){
        var variable = y;

        this.getA = function(){
            return variable;
        }

        this.setA = function(x){
            variable = x;
        }
    }
    return new innerFunction(x);
}

var a = Test("foo");
var b = Test("baz");

var c = TestToo("foo");
var d = TestToo("baz");

alert(a.constructor == b.constructor);             //true, as expected
alert(a.constructor.name == b.constructor.name);   //true, as expected

alert(c.constructor == d.constructor);             //true, as expected
alert(c.constructor.name == d.constructor.name);   //true, as expected

alert(a.constructor == c.constructor);             //false, as expected
alert(a.constructor.name == c.constructor.name);   //true, as NOT expected 
```

所以这是它？我们真的总是需要知道`a.constructor.name`与字符串比较的内部类结构吗？不，因为在 Javascript 中你可以做任何事情（你只需要知道如何做，而不是为什么），我找到了这个**最终解决方案：**

```
function Test(x){

    function Test(y){
        var variable = y;

        this.getA = function(){
            return variable;
        }

        this.setA = function(x){
            variable = x;
        }
    }
    return new Test(x);
}

function TestToo(x){

    function TestToo(y){
        var variable = y;

        this.getA = function(){
            return variable;
        }

        this.setA = function(x){
            variable = x;
        }
    }
    return new TestToo(x);
}

var a = Test("foo");
var b = Test("baz");

var c = TestToo("foo");
var d = TestToo("baz");

alert(a.constructor == b.constructor);             //true, as expected
alert(a.constructor.name == b.constructor.name);   //true, as expected

alert(c.constructor == d.constructor);             //true, as expected
alert(c.constructor.name == d.constructor.name);   //true, as expected

alert(a.constructor == c.constructor);             //false, as expected
alert(a.constructor.name == c.constructor.name);   //false, q.e.d.! 
```

我是认真的，我不知道为什么会这样。但它确实 100% 有效，具有 100% 的对象封装，以及与 Java 类的 1:1 相等性。;-)

# mysql - 如何修复数据以便可以将外键添加回数据库

> ID：14667435
> 
> 赞同：0
> 
> 时间：2013-02-02T22:57:33.077
> 
> 标签：mysql, foreign-keys

我刚刚发现我的数据库在过去几个月中在几台服务器之间移动，在其中一个数据库转储中，转换为 myisam 并且所有外键约束都被删除（没有留下深刻印象）。我已经使用 php 脚本将所有表转换回 innodb，但现在我发现有一半的约束无法添加。

```
Error Code: 1452\. Cannot add or update a child row: a foreign key constraint fails (`identicar2`.<result 2 when explaining filename '#sql-2a7_c0'>, CONSTRAINT `#sql-2a7_c0_ibfk_1` FOREIGN KEY (`feature_sk`) REFERENCES `tbl_feature_list` (`feature_sk`)) 
```

我现在迷路了，我无法手动浏览数千条记录。为了使我的数据库恢复正常，最好的方法是什么？

如果您愿意，我可以提供表格结构，但我想任何解决方案都将独立于确切的结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:03:00.153

最简单的解决方案：（包含丢失您可能想要保留的数据的明显危险）

```
UPDATE table
SET fkColumn = NULL
WHERE fkColumn NOT IN (SELECT referenceColumn FROM referencedTable) 
```

如果您只想找到它们：

```
SELECT *
FROM table
WHERE fkColumn NOT IN (SELECT referenceColumn FROM referencedTable) 
```

# android - Android：以编程方式拍照不起作用

> ID：14667436
> 
> 赞同：0
> 
> 时间：2013-02-02T22:57:35.223
> 
> 标签：android, android-camera

我对 Android 中的相机功能没有太多经验。我需要通过我计划发送回服务器的代码拍照。我的逻辑基于[这篇](https://stackoverflow.com/a/8327263/804503)文章，只要我不添加`mCamera.takePicture(null, null, mPictureCallback);`到 surfaceChange 方法的末尾（这是我想我猜的），它就可以很好地工作。当我添加该行时，它有时会起作用，但大多数时候，我只是返回一个**black screen**。这是主要问题。我不认为该设备存在兼容性问题，因为我至少提前 3-4 次获得了此功能。

我正在测试的设备是 Galaxy Nexus

```
public class CameraView extends Activity implements SurfaceHolder.Callback, OnClickListener
{
    private static final String TAG = "CameraTest";
    Camera mCamera;
    boolean mPreviewRunning = false; 

    public void onCreate(Bundle icicle) 
    {
        super.onCreate(icicle);
        Log.e(TAG, "onCreate");

        getWindow().setFormat(PixelFormat.TRANSLUCENT);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_camera_view);
        mSurfaceView = (SurfaceView) findViewById(R.id.surface_camera);
        mSurfaceView.setOnClickListener(this);
        mSurfaceHolder = mSurfaceView.getHolder();
        mSurfaceHolder.addCallback(this);
        mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) 
    {
        super.onRestoreInstanceState(savedInstanceState);
    }

    Camera.PictureCallback mPictureCallback = new Camera.PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            // TODO Auto-generated method stub
            if (data != null) 
            {
                //Intent mIntent = new Intent();
                //mIntent.putExtra("image",imageData);

                mCamera.stopPreview();
                mPreviewRunning = false;
                mCamera.release();

                 try
                   {
                   BitmapFactory.Options opts = new BitmapFactory.Options();
                   Bitmap bitmap= BitmapFactory.decodeByteArray(data, 0, data.length,opts);
                   bitmap = Bitmap.createScaledBitmap(bitmap, 480, 480, false);
                   CameraProjectActivity.image.setImageBitmap(bitmap);
                   }
                   catch(Exception e)
                   {
                         e.printStackTrace();
                   }
                //StoreByteImage(mContext, imageData, 50,"ImageName");
                //setResult(FOTO_MODE, mIntent);
                setResult(585);
                finish();
            }       
        }
    };

    protected void onResume() 
    {
        Log.e(TAG, "onResume");
        super.onResume();
    }

    protected void onSaveInstanceState(Bundle outState) 
    {
        super.onSaveInstanceState(outState);
    }

    protected void onStop() 
    {
        Log.e(TAG, "onStop");
        super.onStop();
    }

    public void surfaceCreated(SurfaceHolder holder) 
    {
        Log.e(TAG, "surfaceCreated");
        mCamera = Camera.open();
        mCamera.setDisplayOrientation(90);

    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        Log.e(TAG, "surfaceChanged");

        // XXX stopPreview() will crash if preview is not running
        if (mPreviewRunning) 
        {
            mCamera.stopPreview();
        }

        Camera.Parameters p = mCamera.getParameters();

        List<Camera.Size> previewSizes = p.getSupportedPreviewSizes();

        Camera.Size previewSize = previewSizes.get(3);
        p.setPreviewSize(previewSize.width, previewSize.height);

        mCamera.setParameters(p);
        try 
        {
            mCamera.setPreviewDisplay(holder);
        } 
        catch (Exception e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mCamera.startPreview();
        mPreviewRunning = true;

    // THIS IS THE CODE THAT BREAKS IT. IS THERE ANY OTHER WAY TO DO THIS??? ********
    // mCamera.takePicture(null, null, mPictureCallback);

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        Log.e(TAG, "surfaceDestroyed");
//        mCamera.stopPreview();
//        mPreviewRunning = false;
//        mCamera.release();
    }

    private SurfaceView mSurfaceView;
    private SurfaceHolder mSurfaceHolder; 

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        mCamera.takePicture(null, mPictureCallback, mPictureCallback);
    }
} 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:43:51.413

我不确定这是否是一个好的解决方案，但我只是通过同步 surfaceChanged() 方法并在调用 takePicture 之前让线程等待一秒钟来修复它。

```
try {
    this.wait(1000);
    mCamera.takePicture(null, null, mPictureCallback);
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:28:25.200

我相信建议在`startPreview()`之前调用`setPreviewDisplay()`，但这应该不会产生重大影响。

您看到的是相机初始化需要时间，并且在准备好之前无法拍照。最好使用来自相机的回调来确定它已准备好，而不是等待任意 1000 毫秒。

您可以使用的回调是[Camera.PreviewCallback](http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html)。您可以在**CameraView**类中实现它。要触发回调，只需将[setOneShotPreviewCallback(this)](http://developer.android.com/reference/android/hardware/Camera.html#setOneShotPreviewCallback%28android.hardware.Camera.PreviewCallback%29)添加到**CameraView.surfaceChanged()**：

```
mCamera.startPreview();
mCamera.setPreviewDisplay(holder);
mCamera.setOneShotPreviewCallback(this); 
```

# javascript - requestAnimationFrame 是否与其他脚本同时运行？

> ID：14667440
> 
> 赞同：0
> 
> 时间：2013-02-02T22:58:04.583
> 
> 标签：javascript, requestanimationframe

*requestAnimationFrame 是否与其他正常*运行的javascript（即来自用户输入或来自setTimeout/setInterval）同时运行排队的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:00:03.730

它像其他所有东西（除了工人）一样在同一个线程上运行，所以是的。

# javascript - Ajax响应上的JQuery无法识别的表达式

> ID：14667441
> 
> 赞同：2
> 
> 时间：2013-02-02T22:58:06.740
> 
> 标签：javascript, jquery, ajax

我有这个 JQuery Ajax 表单。

```
$('#modal-body-sign-in').on('submit', '#sign-in', function(e) {
        e.preventDefault();
        var data = $(this).serialize();
        var url = $(this).attr('action');
        $.ajax({
            //this is the php file that processes the data and send mail
            url : url,
            type : "POST",
            data : data,
            dataType: "html",
            //Do not cache the page
            cache : false,
            //success
            success : function(data) {
                //console.log(data.content);

                console.log($(data));
                //$('#modal-body-sign-in').html(data);
            }
        });
    }) 
```

在响应中，当`console.log(data); in the console it shows me the responded html`我这样做时，`console.log($(data));`它给了我这个错误

未捕获的错误：语法错误，无法识别的表达式：

```
<html>
<head>
<style>
ul {
    margin: 0%;
}

ul li {
    display: inline;
    list-style-type: none;
    float: left;
}
</style>
<title>Insert title here</title>
</head>
<body>
    <!--  Ajax Container. DO NOT REMOVE THE DIV CONTENT  FOR AJAX ACCESS! -->
    <div id="content">
        <div id="modal-body">

            <form id="doLogin" name="doLogin" action="/HitPlay/doLogin" method="post">

                <fieldset>
                    <ul id="doLogin_" class="errorMessage">
            <li><span>Incorrect username or password</span></li>    </ul>

                <br/>           

                <br/>

                    <label>Username</label>                 
                    <input type="text" name="userBean.username" value="" id="doLogin_userBean_username"/>
                    <br/>
                    <label>Password</label>
                    <input type="password" name="userBean.password" id="doLogin_userBean_password"/>
                    <br />

                    <input type="submit" id="doLogin_0" value="Submit"/>

                </fieldset>
            </form>

        </div>

    </div>
</body>
</html> jquery-1.9.0.min.js:2
a.error jquery-1.9.0.min.js:2
f jquery-1.9.0.min.js:2
x jquery-1.9.0.min.js:2
a jquery-1.9.0.min.js:2
st.fn.extend.find jquery-1.9.0.min.js:2
st.fn.st.init jquery-1.9.0.min.js:1
st jquery-1.9.0.min.js:1
$.ajax.success localhost:59
f jquery-1.9.0.min.js:1
p.fireWith jquery-1.9.0.min.js:1
r jquery-1.9.0.min.js:3
r 
```

我在做这个

```
 $(data) 
```

因为我想获取响应的 HTML 页面的片段

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T12:50:02.020

自从升级到 jQuery 1.9.x 后，我遇到了完全相同的问题。实际上，简单的 $(data) 会导致崩溃，仅此而已。我之前遇到过几次这个问题（没有 1.9 之前的版本），但我不记得它的问题了......

无论如何，这是一个完全阻塞的麻烦......仍在寻找原因和修复。

编辑：

如果我这样做：

```
$.ajax('/',function(html){
  html = $('<div></div>').append(html);
  $(html);
}); 
```

它工作正常。如果我做 ：

```
$.ajax('/',function(html){
  $(html);
}); 
```

它给了我一个（通过 FF 错误控制台）：

```
Erreur : Error: Syntax error, unrecognized expression: <div id="...">(...)
jquery.min.js - line : 4 
```

编辑2：

好的找到了解决方案......经过长时间的搜索和测试： [http ://stage.jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring](http://stage.jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring)

所以我现在做类似的事情：

```
$.ajax('/',function(html){
  $($.parseHTML(html));
}); 
```

无论如何，jQuery 总是把我的第一个元素和第一个元素混淆，但至少它有效

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T17:49:20.590

如果您使用的是 jQuery1.9，问题可能在于正在加载的内容。有一个新的更新要求响应中的第一个字符是**<** [AKA*小于符号*]。甚至空格也会导致它中断并抛出可怕的“未捕获的错误：语法错误，无法识别的表达式：”错误。

我建议在使用上面建议的解决方法之前检查一下。它不是一个错误，而是一项安全工作。

[http://jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring](http://jquery.com/upgrade-guide/1.9/#jquery-htmlstring-versus-jquery-selectorstring)

# android - Titanium Android 应用程序中的推送通知

> ID：14667443
> 
> 赞同：1
> 
> 时间：2013-02-02T22:58:30.817
> 
> 标签：android, push-notification, google-cloud-messaging, titanium, appcelerator

我有适用于 Android 的 Titanium 应用程序，现在我想在 Titanium 中实现适用于 Android 的推送通知。我有我的后端服务，它为我获取所有通知，但我不了解 Google Cloud Messaging 以及它们之间的关系（即推送通知和 GCM）。请为我提供指导方针和方法。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:52:31.963

对于 Titanium，您可以使用此模块（开源）：[https](https://github.com/liccowee/Google-Cloud-Messaging--Titanium-) ://github.com/liccowee/Google-Cloud-Messaging--Titanium- 。

在示例中，您将了解如何在您的应用程序中实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:32:03.443

使用 Titanium 进行推送通知可能需要第三方服务，大多数（如果不是全部）基于订阅费。

我自己一直在寻找一些使用 Titanium 或 Apache Cordova（Phone Gap）的计划未来项目。

我得到的最受欢迎的推荐是[Urban Airship](http://urbanairship.com/)看起来它们有一些非常不错的功能，但我并没有比这更深入。

# javascript - 使菜单保持在顶部，但在向下滚动侧滚动网站时不保持

> ID：14667449
> 
> 赞同：0
> 
> 时间：2013-02-02T22:58:55.883
> 
> 标签：javascript, jquery, html, css

我正在开发一个滚动到侧面的网站，并且我使用固定位置将菜单保持在顶部，但我意识到当我向下滚动时，菜单也会向下滚动。我想知道当我滚动到侧面时是否有办法将菜单保持在顶部，但是当我向下滚动时它不会下降。

所以我尝试使用相对于身体的绝对位置，但是当我侧滚动时，这并没有使菜单保持在顶部。

```
#menu
{   
background          : url(images/banner5.gif) no-repeat;
height              : 60px;
margin-top          : 20px;
position            : absolute; 
left                : 450px;
}

#menuFloat li
{   
display             : inline;
float               : left; 
padding             : 8px 20px 0px 30px;
}

#menuFloat li a
{   
    color               : #9d0c10;
    font-family         : Erato;
    font-size           : 12pt;
    font-style          : italic;
    text-decoration     : none; 
} 
```

* * *

```
$(document).ready(function() {
 $("#menuFloat a").bind("click",function(event){ event.preventDefault();
  var target = $(this).attr("href");
   $("html, body").stop().animate({ scrollLeft: $(target).offset().left, scrollTop:    $(target).offset().top }, 1200);
 }); }); 
```

* * *

```
<div id="menu">
    <ul id="menuFloat">
        <li><a class="nav1" href="#nav1">Home</a></li>
        <li><a class="nav2" href="#nav2">About Us</a></li>
        <li><a class="nav3" href="#nav3">Members</a></li>
        <li><a class="nav4" href="#nav4">Events</a></li>
        <li><a class="nav5" href="#nav5">Media</a></li>
        <li><a class="nav6" href="#nav6">Contact Us</a></li>    
    </ul>
</div> 
```

* * *

第一部分是菜单的 CSS，第二部分是关于如何水平滑动的 jquery 代码，第三部分是菜单的 html。

如果您对我的问题感到困惑，请在此处查看：http: [//permika-montreal.tk/new.php](http://permika-montreal.tk/new.php) 当您向下滚动时，您会看到菜单也是如此，我希望不要发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:05:57.913

您可以通过`left`在用户使用 JavaScript/jQuery 水平滚动时更新 CSS 属性来完成此操作。

请参阅：[https ://stackoverflow.com/a/9423822/1718121](https://stackoverflow.com/a/9423822/1718121)

```
$(window).scroll(function(event) {
  var x = $(this).scrollLeft();
  $("#menu").css("left", x + offset); //Change offset to be the default margin-left of your menu.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:36:56.163

看这里

```
#menu
{   
background          : url(images/banner5.gif) no-repeat;
height              : 60px;
top                 : 20px;
position            : absolute; 
left                : 50px;
} 
```

jQuery

```
$(document).ready(function(){

 var lastScrollLeft = 0;
$(window).scroll(function() {
    var documentScrollLeft = $(document).scrollLeft();
    if (lastScrollLeft != documentScrollLeft) {
        console.log('scroll x');
        lastScrollLeft = documentScrollLeft;
        $("#menu").css("left", lastScrollLeft+50);

    }
});   

}); 
```

# ios - 应用内购买 - 如何确定是否已购买？

> ID：14667456
> 
> 赞同：1
> 
> 时间：2013-02-02T23:00:06.223
> 
> 标签：ios, in-app-purchase, storekit

为什么很难找到如何做到这一点超出了我的能力 - 所以也许我试图以错误的方式做到这一点 - 谁知道 - 希望你们中的一个，哈哈。

我有一个按钮，上面写着“购买”（用于非消耗品）。如果购买成功，则更新 NSUserDefaults purchase = YES 并移除该按钮。到这里为止一切顺利。

现在，当用户删除应用程序并想要在新设备上重新安装或安装时，我想展示的，在这些情况下，代替“购买”按钮的是“恢复”按钮。将单击“恢复”按钮并调用 restoreCompletedTransactions。对我来说似乎是合乎逻辑的——用户不想看到“购买”按钮——他们已经购买了。

问题是购买的 NSUserDefaults = YES 在重新安装或新安装时将不可用。所以我的问题是如何确定该应用程序之前是否已购买，以便我可以显示“购买”按钮或“恢复”按钮。有没有办法确定用户是否已经进行了此应用内购买？

在此先感谢，拜伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T15:45:25.927

将来没有将状态从一个应用安装转移到另一个应用安装的好方法。您可能可以为此滥用钥匙串，但您不应该这样做。

只需始终显示“购买”。在 iOS 上，这是处理这种情况的标准方法。人们习惯于看到一个购买按钮，即使他们以前购买过，他们也会明白这意味着什么。当然，您仍然需要某个地方的恢复按钮。

根据您使用的商店类型，您有两个选项来放置恢复按钮。

如果您有类似商店的界面，例如列出所有产品的 tableView，请在 tableView 的末尾放置一个“恢复购买”单元格。下面以 PCalc Lite 的界面为例：

![在此处输入图像描述](../Images/438755f4176c27f9b3e4c5bdcb390981.png)

如果您没有类似商店的界面，请在应用程序的设置部分放置一个按钮。这就是迪斯科动物园的做法：

![在此处输入图像描述](../Images/297fbcc9cd05d67b16fb868c87611fa5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T13:26:10.427

我知道这是一个老问题，您可能已经解决了，但是在为购买机制设计用户友好界面时我遇到了类似的问题，并找到了这样的解决方案：

```
-(IBAction) purchase
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil
                                                    message:<# A brief explanation #>
                                                   delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:@"Restore",@"Purchase", nil];
    alert.delegate = self;
    alert.tag = _IAPTAG;
    [alert show];
} 
```

然后在警报视图委托函数中：

```
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(alertView.tag == _IAPTAG)
    {
        if(buttonIndex == 0)
        {
            //cancel
        }
        else if(buttonIndex == 1)
        {
            //restore
        }
        else if(buttonIndex == 2)
        {
            //purchase
        }
    }
} 
```

因此，恢复选项将恢复，购买最终将购买。如果用户是第一次购买，那么他/她无论如何都不会担心购买两次。如果用户之前购买并正在另一台设备上安装应用程序，那么他/她将知道购买按钮将提供恢复选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:43:42.220

您可以使用应用程序询问的后端服务器来确定用户是否已通过登录设备上的帐户进行购买。出于您指出的原因，Apple 将要求您拥有某种检查工具……用户不必在新设备或他们可能拥有的其他设备上重新购买。您必须使帐户注册对用户来说是可选的，Apple 将再次要求这样做。

# xml - 生成文件夹内容的 XML 表示

> ID：14667459
> 
> 赞同：0
> 
> 时间：2013-02-02T23:00:30.160
> 
> 标签：xml, language-agnostic, ide, directory

我有一个名为 MainFolder 的充满文本文件的文件夹，我想将该文件夹转换为 XML 表示形式，以便文件夹中的每个文件都可以作为单个文本文件进行编辑。是否可以生成文件夹结构的 XML 表示形式，如此处所示，标签内有文件，`<file>`标签内有文件夹`folder`？

```
<folder name = "MainFolder">
    <file name = "README.txt">
        This is a text file inside a folder called MainFolder. This is the content
        of README.txt.
    </file>
    <folder name = "Java samples">
        <file name = "HelloWorld.java">
            public class HelloWorld{
                public static void main(String[] args){
                    System.out.println("Hello World!");
                }
            }
        </file>
    </folder>
</folder> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T08:52:37.513

试试这个实用程序：

[http://code.google.com/p/xml-dir-listing/](http://code.google.com/p/xml-dir-listing/)

（填充因为 Stackoverflow 不喜欢简短的答案）

# php - Kohana 3.2 外部验证

> ID：14667463
> 
> 赞同：0
> 
> 时间：2013-02-02T23:01:12.967
> 
> 标签：php, kohana

我不确定如何显示外部错误消息。

场地

```
<?php echo Form::input('membername', $username, array('id' => 'username')); ?><?php echo Arr::get($errors, 'membername');?> 
```

控制器

```
try 
{       
    $extra_rules = Validation::factory($this->request->post())
        ->rule('membername', 'not_empty');

    $username->update($extra_rules);
}
catch (ORM_Validation_Exception $ex) 
{
    $errors = $ex->errors('models/user');
} 
```

/models/user/_external.php

```
return array(
    'membername' => array(
        'not_empty' => 'You must provide a member name.',
    ),
); 
```

当该字段为空时，不会出现错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:30:46.780

我猜 Kohana 找不到正确的消息，因此什么也没显示。

如果`membername`是您的模型的成员，`user`则应在中定义错误消息`/models/user.php`而不是`/models/user/_external.php`.

* * *

编辑：如果`membername`不是模型的成员，错误应该可以通过：`<?php echo Arr::path($errors, '_external.membername'); ?>`

# python - Python 对象的多个实例表现得像同一个实例

> ID：14667465
> 
> 赞同：1
> 
> 时间：2013-02-02T23:01:18.143
> 
> 标签：python, arguments, default, behavior, mutable

我在这里有我的课程模板：

```
 import sqlite3

class Patron(object):
    #Let's set some basic attributes
    attributes = { "patron_id" : None,
    "name" : None,
    "address" : None,
    "phone" : None,
    "email" : None,
    "fee_balance" : None,
    "fees_per_day" : None,
    "books_checked_out" : [],
    "books_overdue" : []}

    def __init__(self):
        #Create a empty instance
        pass

    def new(self, patron_id, name, address, phone, email):
        #Create an instance with new values
        self.attributes["patron_id"] = patron_id
        self.attributes["name"] = name
        self.attributes["address"] = address
        self.attributes["phone"] = phone
        self.attributes["email"] = email

    def retrieve(self, patron_id):
        #Connect to database and prepare patron id
        self.attributes["patron_id"] = patron_id
        patron_database = sqlite3.connect('patrons.db')
        cursor = patron_database.cursor()
        t = (str(patron_id),)

        #Get data from database
        cursor.execute("SELECT * FROM patrons WHERE id =?", t)
        data = cursor.fetchone()

        #Now close your database connection
        patron_database.close()

        #Parse tuple into attributes
        self.attributes["name"] = data[1]
        self.attributes["address"] = data[2]
        self.attributes["phone"] = data[3]
        self.attributes["email"] = data[4]
        self.attributes["fee_balance"] = data[5]
        self.attributes["fees_per_day"] = data[6]
        self.attributes["books_checked_out"] = data[7]
        self.attributes["books_overdue"] = data[8]

    def save(self):
        #Connect to the database
        patron_database = sqlite3.connect('patrons.db')
        cursor = patron_database.cursor()

        #Compile the data into a list
        attributes = []
        for value in self.attributes.itervalues():
            attributes.append(value)

        #Insert the values and save them
        cursor.execute("INSERT INTO patrons VALUES(?,?,?,?,?,?,?,?,?)", attributes)
        patron_database.commit()

        #Close the connection
        patron_database.close() 
```

然后我在这里有我的测试代码：

```
'''
Created on Feb 2, 2013

@author: Zach
'''
from Patron import Patron

zach = Patron()
braden = Patron()

zach.retrieve(1187277)

print zach.attributes
print braden.attributes 
```

我的控制台说“zach”和“braden”实例都具有完全相同的属性，即使我没有为“braden”实例设置任何内容。如果我为“braden”实例分配了一些东西，那么它们都共享该实例的属性。

我认为这是与可变默认参数行为有关的问题，但我无法弄清楚我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T23:03:33.220

您已经创建了`attributes`一个`class`级别变量，并且因为`dict`s 是可变的。将它的定义移到里面，`__init__`它应该可以工作。

```
class demo(object):
    class_level = {'a': 0}
    class_level_nm = 0
    class_level2 = 0
    def __init__(self, v):
        self.instance_level = v 
        self.class_level['a'] += 1
        self.class_level_nm += 1
        demo.class_level2 += 1
    def __str__(self):
        return 'class level (mut): %d  class level (unmut): %d  instance level: %s  class level2: %d' % (self.class_level['a'],
                                                                                     self.class_level_nm,
                                                                                     self.instance_level,
    self.class_level2)

a = demo('a')
b = demo('b')

print a
print b

c = demo('c')

print a
print b
print c 
```

给出：

```
class level (mut): 2  class level (unmut): 1  instance level: a  class level2: 2
class level (mut): 2  class level (unmut): 1  instance level: b  class level2: 2
class level (mut): 3  class level (unmut): 1  instance level: a  class level2: 3
class level (mut): 3  class level (unmut): 1  instance level: b  class level2: 3
class level (mut): 3  class level (unmut): 1  instance level: c  class level2: 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:27:33.703

这不是*直接*的“可变默认参数”问题，因为您根本没有默认函数参数。问题在于您实际上`zach`并没有设置任何属性`braden`！

当你调用时`zach.retrieve(1187277)`，`retrieve`执行这个

```
self.attributes["patron_id"] = patron_id 
```

您似乎对它的工作原理有一些误解，因此让我们逐步了解 Python 将如何评估此语句。

第一步是查找`self.attributes`. `self`这首先在named中寻找一个属性`attributes`，但没有这样的属性。

当读取一个属性时，这会回退到查看*类*（`self`和任何基类，但这在这里不相关）。所以回退是寻找一个名为`attributes`in的属性`Patron`。这成功并找到了一个字典，因此该对象是查找的结果。

下一步是对查找的结果执行“项目分配”操作。项目分配是`object[key] = value`语法的作用；在您的情况下`self.attributes`是对象，`"patron_id"`是键，`patron_id`是值。因此，这最终将键设置`"patron_id"`为存储在*class的**属性中*`person_id` *的字典中`attributes``Patron`*。

So then it's completely unsurprising that `print zach.attributes` and `print braden.attributes` show the same thing. Neither of them has an `attributes` attribute, so both are going to find the `attributes` attribute in the class `Patron`. And if you keep storing all your attributes by assigning to that dictionary, then obviously any change made in one will affect what you see from the other.

# matlab - 尝试绘制墨西哥帽子功能。但得到错误“？？错误使用==> mtimes 内矩阵尺寸必须一致。”

> ID：14667466
> 
> 赞同：1
> 
> 时间：2013-02-02T23:01:19.360
> 
> 标签：matlab

我尝试使用 Matlab 绘制墨西哥帽函数。

![在此处输入图像描述](../Images/1f24498c819a8ad7e9df4366b3e527cb.png)

```
x=-20:20;
y=-20:20;
z=(1 - x.^2 -y.^2) * exp(-1/2 * (x.^2 + y.^2)) 
```

但我得到了错误：

```
??? Error using ==> mtimes
Inner matrix dimensions must agree. 
```

我该怎么做才能修复它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:02:09.267

这里有两个错误。首先，你想创建你的`x`和`y`使用类似的东西`meshgrid`，所以它们是数组而不是向量（当我们在这里的时候，让我们看一下这个函数的一个更有启发性的范围......）

```
>> [x y] = meshgrid(-5:0.5:5, -5:0.5:5); 
```

其次，您需要逐元素乘法而不是矩阵乘法（`.*`而不是`*`）。

```
>> z = (1 - x.^2 -y.^2) .* exp(-1/2 * (x.^2 + y.^2)); 
```

这应该够了吧：

```
>> surf(z) 
```

![在此处输入图像描述](../Images/4a7aea4e8c1eec0eeab9570b15708205.png)

# python - 尝试构建 Cython 文件 - 出现错误（Python 2.7，Windows 7 64 位）

> ID：14667478
> 
> 赞同：0
> 
> 时间：2013-02-02T23:02:20.917
> 
> 标签：python, cython

我在 Windows Powershell 中使用 Python 2.7（我设置了环境，以便可以使用 Python）。

我安装了 Cython（使用 Windows 安装程序）。

我正在尝试通过制作一个简单的“Hello World”扩展来遵循 Cython 网站上的教程，但是当我尝试构建扩展时，我收到了这个错误：

```
dllwrap: gcc exited with status 1
error: command 'dllwrap' failed with exit status 1 
```

如何解决这个问题，以便我可以通过 C 扩展优化我的 python 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:49:21.083

这是错误代码的其余部分：

```
Windows PowerShell
Copyright (C) 2009 Microsoft Corporation. All rights reserved.

PS C:\Users\Pinky> cd Programming
PS C:\Users\Pinky\Programming> python setup.py build_ext --inplace
running build_ext
skipping 'helloworld.c' Cython extension (up-to-date)
building 'helloworld' extension
C:\MinGW\bin\gcc.exe -mdll -O -Wall -IC:\Python27\include -IC:\Python27\PC -c helloworld.c -o build\temp.win32-2.7\Relea
se\helloworld.o
writing build\temp.win32-2.7\Release\helloworld.def
C:\MinGW\bin\dllwrap.exe -mdll -static --output-lib build\temp.win32-2.7\Release\libhelloworld.a --def build\temp.win32-
2.7\Release\helloworld.def -s build\temp.win32-2.7\Release\helloworld.o -LC:\Python27\libs -LC:\Python27\PCbuild -lpytho
n27 -lmsvcr90 -o C:\Users\Pinky\Programming\helloworld.pyd
helloworld.exp: file not recognized: File format not recognized
collect2: ld returned 1 exit status
dllwrap: gcc exited with status 1
error: command 'dllwrap' failed with exit status 1
PS C:\Users\Pinky\Programming> 
```

# actionbarsherlock - 一直无法将 Sherlock Action Bar 添加到 Android 项目

> ID：14667480
> 
> 赞同：0
> 
> 时间：2013-02-02T23:02:35.783
> 
> 标签：actionbarsherlock

按照有关如何使用 Sherlock 操作栏下载、添加和创建 Android 项目的教学视频，我总是无法将库添加到新的 Android 项目中。我按照信中的说明进行操作，但是在 Android 项目的属性中，在“Android”下，当我添加对操作栏的引用时，会发生以下情况：

1.  一切看起来都很好，在“参考”下方有一个漂亮的绿色“V”标志，图书馆的位置
2.  按 OK 并重新打开同一个窗口后，文件位置有一个红色的“X”，“项目”行显示“？” 为项目名称。

同样，我按照信中的说明进行操作，但我不明白这个问题。如果有人有想法...我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:11:15.653

你删除了android-support-v4吗？因为我在libs文件夹中删除了我的android-support-v4然后没有错误，如果不是我认为你的问题是你的jdk它应该是jdk1.6我在我的项目中使用了slidingmenu + abs..我花了2天时间来设置... 哈哈

# javascript - 具有重复数组元素的奇怪循环行为

> ID：14667482
> 
> 赞同：0
> 
> 时间：2013-02-02T23:02:46.887
> 
> 标签：javascript, arrays, for-loop

我想要制作`[1,2,3,4,5].duplicated()`作品，但是当我写道：

```
Array.prototype.duplicator = function (){
    var a = [];
    for(var i=0;i<10;i+=2){
    a[i]=this[i];
    a[i+1]=this[i];
}
return a;
};
 [1,2,3,4,5].duplicator(); 
```

它返回`[1, 1, 3, 3, 5, 5, undefined, undefined, undefined, undefined]`而不是`[1,1,2,2,3,3,4,4,5,5]`. 谁能告诉我为什么它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-20T15:26:11.483

```
Array.prototype.duplicator=function()
{
    return  this.concat(this)
}

alert([1,2,3,4,5].duplicator()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:14:39.363

您可以将`map`其展平以获得更实用的方法：

```
Array.prototype.duplicate = function() {
  return [].concat.apply([], this.map(function(v) {
    return [v,v];
  }));
};

console.log([1,2,3].duplicate()); //=> [1,1,2,2,3,3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-05T12:06:24.723

最简单的答案应该是：

```
Array.prototype.duplicator=function () {
    return this.concat(this).sort();
}

console.log([1,2,3,4,5].duplicator());//[1,1,2,2,3,3,4,4,5,5] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:06:56.890

因为您在每次迭代中添加 2，因此超出了数组边界。试试这个：

```
for (var i=0; i<this.length; i++) {
    a.push(this[i]);
    a.push(this[i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T23:07:08.833

您可能希望将每个值放在`i*2`and`i*2+1`而不是`i`and`i+1`中，并一次循环一个步骤：

```
Array.prototype.duplicator = function (){
  var a = [];
  for(var i = 0; i < this.length; i++){
    a[i*2] = this[i];
    a[i*2+1] = this[i];
  }
  return a;
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T23:09:36.473

这是一个修复：

```
Array.prototype.duplicator = function() {
  var dup = [];
  for (var i = 0; i < this.length; i++) {
    dup[2 * i] = dup[2 * i + 1] = this[i];
  }
  return dup;
};

console.log([1,2,3,4,5].duplicator()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-26T23:11:14.300

```
Array.prototype.duplicator = function () {
    var a = [], k = 0;
    for(var i=0;i<this.length;i++) {
       a[k]=this[i];
       k++;
       a[k]=this[i];
       k++;
    }
    return a;
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-21T22:02:47.847

```
duplicator = val => val.concat(val); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-06T14:47:43.837

这适用于我遵循[https://github.com/h5bp/Front-end-Developer-Interview-Questions/blob/master/src/questions/javascript-questions.md](https://github.com/h5bp/Front-end-Developer-Interview-Questions/blob/master/src/questions/javascript-questions.md)中的案例，其中所需的结果是 [1， 2、3、4、5、1、2、3、4、5]。希望对你有帮助！

```
const duplicate = (...nums) => [].concat(...nums, ...nums);

console.log(duplicate([1, 2, 3, 4, 5])); 
```

# php - 检查用户是否存在 php 和 mysql stmt

> ID：14667490
> 
> 赞同：-1
> 
> 时间：2013-02-02T23:03:43.557
> 
> 标签：php, mysql, authentication

我正在使用 php 和 mysql 创建一个身份验证文件，但我在这一行中有这个错误：

```
$stmt2->bind_param('ss',$twitter_id, $name); 
```

错误信息是

> 在...中的非对象上调用成员函数 bind_param()

我的错在哪里？

*   我的数据库中的 $name 是`VARCHAR`
*   我数据库中的 $twitter_id 是`VARCHAR`
*   $bd 是我的数据库连接

如果用户已经注册，它应该向我显示一条消息“用户已经注册”，如果用户没有注册，它应该在我的数据库中插入一个新的 ID 和名称。

```
session_start();
if (!isset($_SESSION['userdata'])) {
    header("location: index.php");
} else {
    $userdata = $_SESSION['userdata'];
    $name = $userdata->name;
    $twitter_id = $userdata->id;
    $stmt = $bd->prepare("SELECT ID_TWITTER FROM USERS");
    $stmt->execute();                
    $stmt->bind_result($checkUser);
    if ($stmt->fetch()) {
    if($checkUser!==$twitter_id){
            $cSQL = "INSERT INTO USERS (ID_TWITTER, FULL_NAME) VALUES(?,?)";
            $stmt2 = $bd->prepare($cSQL);
            $stmt2->bind_param('ss',$twitter_id, $name);
            $stmt2->execute();
            $stmt2->close();
    } else {
        echo "User already exits";
    }
    }
    $stmt->close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:14:34.540

[无耻的插件：我在 github 上](https://github.com/HirotoKun/admin-panel/blob/master/admin/private.php)的一个项目中做这件事。随意使用这些课程来做任何你喜欢的事情；它们大多是可复制粘贴的。

您*真正的*问题是[`$bd->prepare()`](http://php.net/manual/en/mysqli.prepare.php)返回错误。
检查您是否正确调用它并将其设置为`new mysqli(*params)`

该错误`Call to a member function ... on a non-object in ...`意味着它`$db`不是一个对象，这意味着它没有被实例化为一个对象。因此，`$this->method()`是不可能的。`bind_param(string $format, mixed &*vars);`使用传递引用，如果失败，则会引发错误。把它贴在那里自己试试：

```
$stmt->bind_param("ss", "string", "string"); 
```

要解决这个可能失败的问题，请检查是否`$db->prepare()`返回 true：

```
if ($query = $bd->prepare($sql)) {
    //stuff
} 
```

此外，在您执行的第一个查询中，为仅检查行数而无需用户输入的单个查询添加准备开销可能不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:59:54.107

会不会是笔误？$bd 存在还是应该是 $db ？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-03T22:37:56.857

已解决：现在可以使用

```
 $stmt = $bd->prepare("SELECT ID_PROVIDER FROM USERS WHERE ID_PROVIDER = ?");
        $stmt->bind_param('s', $twitter_id);
        $stmt->execute();
        $stmt->bind_result($checkUser);
        while ($stmt->fetch()) {
            $result = $checkUser;
        }
        if (empty($result)) {
            $cSQL = "INSERT INTO USERS (ID_TWITTER, FULL_NAME) 
           VALUES(?,?)";
            $stmt2 = $bd->prepare($cSQL);
            $stmt2->bind_param('ss', $twitter_id, $name);
            $stmt2->execute();
            $stmt2->close();
        }else {
    echo "User already exits";
} 
```

# ios - 获取用枚举值填充的 NSMutableArray 属性

> ID：14667493
> 
> 赞同：0
> 
> 时间：2013-02-02T23:03:57.607
> 
> 标签：ios, properties, nsmutablearray, enumerated-types

尝试通过索引从 NSMutableArray 属性中获取枚举值，该属性填充了枚举值。

我想要的只是设置一个动态属性并在类实例中重新设置。

因此，我编写了一个暴露问题的清晰示例。

**问题是这样的。示例中的 WriteByType 方法永远不会获得正确的值。它应该记录“你得到正确的箭头”，但它没有**

```
//----------------------------------------------------------
//  CCMyClass.h
#import <Foundation/Foundation.h>

typedef enum {
    aLeft,
    aRight
} Arrow;

@interface CCMyClass : NSObject
{
    NSMutableArray *_arrowsPkg;
}
@property(nonatomic,copy) NSMutableArray *arrowsPkg;
@property (nonatomic)int nextPkgIndex;
-(void)GetItemOne;
@end
//-------------------------------------------------------------
//  CCMyClass.m
#import "CCMyClass.h"

@implementation CCMyClass
@synthesize arrowsPkg=_arrowsPkg;

-(void)WriteByType:(Arrow)AArrow
{
switch (AArrow) {
    case aLeft:
        NSLog(@"You Get Left Arrow");
        break;
    case aRight:
        NSLog(@"You Get Right Arrow");
        break;
    }
}

-(void)GetItemOne
{
    Arrow a =(Arrow)[[self arrowsPkg]objectAtIndex:1];
    [self WriteByType:a];

}
@end
//---------------USAGE EXAMPLE----------------------------------------------
//  CCAppDelegate.m
- (IBAction)btn1Clicked:(id)sender {

    CCMyClass *c1=[[CCMyClass alloc]init];
    NSNumber *v1=[NSNumber numberWithInt:aLeft];
    NSNumber *v2=[NSNumber numberWithInt:aRight];

    NSMutableArray *arr1=[NSMutableArray arrayWithObjects:v1,v2, nil];
    [c1 setArrowsPkg:arr1];
    [c1 GetItemOne];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:07:13.527

`[[self arrowsPkg]objectAtIndex:1]`是一个`NSNumber`，而不是`Arrow`枚举的成员。就像在`NSNumber`对象的初始化过程中一样，您应该通过调用它来在对象及其封闭值之间进行转换`intValue`。

（真的，重新阅读 C 和 Objective-C 教程。这很**简单。**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:24:24.490

代替

```
Arrow a = (Arrow)[[self arrowsPkg] objectAtIndex:1]; 
```

和

```
Arrow a = (Arrow)[[[self arrowsPkg] objectAtIndex:1] intValue]; 
```

或者，写得更清楚

```
NSNumber *arrowNumber = [[self arrowsPkg] objectAtIndex:1];
Arrow a = [arrowNumber intValue]; 
```

您将`Arrow`枚举类型存储在`NSNumber`in 中`btn1Clicked:`，因此您需要将这些值`GetItemOne`从`NSNumber *`类型中拆箱为较早的`int`值。

# python - Python：如何将函数作为参数传递给另一个函数？

> ID：14667495
> 
> 赞同：0
> 
> 时间：2013-02-02T23:04:05.920
> 
> 标签：python, function, arguments

我有 2 个自定义函数：

```
f(), g() 
```

我想将所有月份传递给他们，并传递给他们另一个函数，如下所示：

```
x(f("Jan"), g("Jan"), f("Feb"), g("Feb"), f("Mar"), g("Mar"), ...) 
```

它是如何在短时间内完成的？

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T23:06:32.483

因此，首先，我们要在列表的每个项目上调用`f()`和`g()`。我们可以通过[列表推导](http://www.youtube.com/watch?v=pShL9DCSIUw)来做到这一点：

```
[(f(month), g(month)) for month in months] 
```

这会产生一个元组列表，但我们想要一个扁平列表，所以我们使用[`itertools.chain.from_iterable()`](http://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable)它来扁平化它（或者在这种情况下，只是一个生成器表达式）：

```
from itertools import chain

chain.from_iterable((f(month), g(month)) for month in months) 
```

然后我们将这个可迭代对象[解包](http://docs.python.org/3.3/tutorial/controlflow.html#unpacking-argument-lists)到参数中`x()`：

```
x(*chain.from_iterable((f(month), g(month)) for month in months)) 
```

编辑：如果您希望传递准备好使用该参数执行的函数，而不执行它们，那么这[`functools.partial()`](http://docs.python.org/3/library/functools.html#functools.partial)是救援：

```
from functools import partial

[(partial(f, month), partial(g, month)) for month in months] 
```

这意味着参数 to`x()`将是函数，当调用时，运行`f()`或`g()`在适当的情况下，按给定的部分填充月份。当然，这可以像以前一样扩展。

# php - 如何获得合适的付款金额？

> ID：14667496
> 
> 赞同：0
> 
> 时间：2013-02-02T23:04:07.293
> 
> 标签：php, mysql

我有一个 mysql 查询来获取要接收的发票付款总额：

```
SELECT
SUM(amount * ((vat / 100) + 1)) AS total
FROM invoices
WHERE status = 'send' AND date_paid = 0 
```

我还有一张存储收到的金额的表格。如何处理部分支付的发票，以便我可以看到收到的真实金额？我正在使用一个表来存储名为 payment_rev 的付款以及列 invoice_id 和金额。

我努力了：

```
SELECT
SUM(amount * ((vat / 100) + 1)) AS total,
SUM(pd.amount) AS total_paid
FROM invoices AS inv
LEFT JOIN 11_invoices_paid AS pd
ON pd.inv_id = inv.id
WHERE inv.status = 'send' AND inv.date_paid = 0
GROUP BY inv.id 
```

结果它给出了 total_paid = 0 ??

```
CREATE TABLE IF NOT EXISTS `invoices` (
  `id` int(6) NOT NULL AUTO_INCREMENT,
  `dossier_id` int(6) NOT NULL,
  `invoice_no` int(5) NOT NULL,
  `amount_excl` decimal(8,2) NOT NULL,
  `vat` int(2) NOT NULL,
  `date_send` date NOT NULL,
  `date_pay` date NOT NULL,
  `date_paid` date NOT NULL,
  `status` varchar(10) NOT NULL
  PRIMARY KEY (`id`) 
```

)

```
CREATE TABLE IF NOT EXISTS `invoices_paid` (
  `id` int(6) NOT NULL AUTO_INCREMENT,
  `invoice_id` int(6) NOT NULL,
  `amount` decimal(8,2) NOT NULL,
  `date` date NOT NULL
  PRIMARY KEY (`id`) 
```

)

# mysql - 如何将 asp.net mvc 连接到非本地 mySQL 数据库？

> ID：14667498
> 
> 赞同：0
> 
> 时间：2013-02-02T23:04:14.357
> 
> 标签：mysql, asp.net-mvc, asp.net-mvc-3, visual-studio-2010

我已将此连接信息添加到与视图文件夹相同的文件级别的 Webconfig 和视图文件夹中。它也在 Web.Debug.config 中。

```
<connectionStrings>
<add name="MySqlServer"
connectionString="Datasource=foo.bar.net;Database=testasp;uid=Slendy;pwd=istall;"
    providerName="MySql.Data.MySqlClient"/>
 </connectionStrings> 
```

然后我有这个函数，我从一个在adapter.Fill（ds）上崩溃的方法中复制粘贴，因为MySqlException“无法连接到任何指定的MySQL主机”。当我打开 /data/details/1

```
//
    // GET: /Data/Details
    public string Details()
    {
        // Get the MySQL connection string stored in the Web.config
        string cnnString = ConfigurationSettings.AppSettings["ConnectionString"];

        // Create a connection object and data adapter
        MySqlConnection cnx = new MySqlConnection(cnnString);
        MySqlDataAdapter adapter = new MySqlDataAdapter();

        // Create a SQL command object
        string cmdText = "select '3232' as ah;";
        MySqlCommand cmd = new MySqlCommand(cmdText, cnx);

        // Set the command type to StoredProcedure
        cmd.CommandType = CommandType.StoredProcedure;

        // Create and fill a DataSet
        DataSet ds = new DataSet();
        adapter.SelectCommand = cmd;
        adapter.Fill(ds);

        return "::::";
    } 
```

我的测试sql表在我的网站上而不是本地主机上，如下

```
a   b   c
1   2013-02-02 14:08:53 324
2   2013-02-02 14:08:53 342234 
```

我在这里遵循了指南：http: [//dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-asp-roles.html](http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-asp-roles.html)但不确定我是否找到了要编辑的正确文件。我还在 Dreamhost 上设置了权限，以便我的计算机可以访问它。

更新：cnnString 即将出现 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:10:57.100

发现 ConfigurationSettings 应该是 ConfigurationManager 并将代码行设置为

```
string cnnString = ConfigurationManager.ConnectionStrings["MySqlServer"].ToString(); 
```

其中“MySqlServer”与配置文件中的连接字符串名称匹配。

这是一个很好的帮助： [C# Configuration Manager。连接字符串](https://stackoverflow.com/questions/2828060/c-sharp-configuration-manager-connectionstrings)

# python - Matplotlib - 添加与轴底部对齐的标签

> ID：14667502
> 
> 赞同：2
> 
> 时间：2013-02-02T23:04:35.657
> 
> 标签：python, matplotlib

我想在图表上的垂直线上添加标签（在本例中为洋红色线 - 'TEXT TO GO HERE'）。

问题是我不知道 Y 轴的最小值，因为该轴是自动的，并且 text() 函数需要 x 和 y 值。

我希望能够将文本与绘图底部对齐，或者找到最小 Y 轴值（在本例中，似乎 matplotlib 正在获取最小轴值并将其向下舍入主轴值）

我目前正在尝试使用 text()

垂直线是用 axvline() 创建的

屏幕截图显示我在下面尝试做的事情；

（请注意，图像上的文本已添加到我的屏幕捕获软件中，以显示我希望文本出现的位置）

![在此处输入图像描述](../Images/0b4f1f6a2c987c3f2e1572b63b2712a0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T23:31:39.357

您可以使用混合变换来做到这一点：

```
import matplotlib.transforms as transforms

fig = plt.figure()
ax = fig.add_subplot(111)

trans = transforms.blended_transform_factory(
    ax.transData, ax.transAxes)

ax.plot(range(50))
ax.axvline(20)

ax.text(20, 0.05, 'test', transform=trans, rotation='vertical', ha='right') 
```

[变换教程](http://matplotlib.org/users/transforms_tutorial.html)

# ruby - 如何使用更少的内存生成数组排列？

> ID：14667503
> 
> 赞同：1
> 
> 时间：2013-02-02T23:04:37.540
> 
> 标签：ruby

所以我需要得到一个字符串的所有可能的排列。

我现在拥有的是这样的：

```
def uniq_permutations string
  string.split(//).permutation.map(&:join).uniq
end 
```

好的，现在我的问题是什么：这种方法适用于小字符串，但我希望能够将它与大小为 15 甚至 20 的字符串一起使用。使用这种方法，它使用大量内存（> 1gb ) 我的问题是我可以改变什么不使用那么多内存？

有没有更好的方法来产生排列？我是否应该将它们保存在文件系统中并在需要时检索它们（我希望不会因为这可能会使我的方法变慢）？

我能做些什么？

更新：

我实际上不需要将结果保存在任何地方，我只需要在表中查找每个结果以查看它是否存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T05:21:00.850

您的调用[`map(&:join)`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)是在内存中创建数组，因为`map`实际上将 Enumerator 变成了数组。根据您想要执行的操作，您可以避免使用以下内容创建数组：

```
def each_permutation(string)
  string.split(//).permutation do |permutaion|
    yield permutation.join
  end
end 
```

然后像这样使用这个方法：

```
each_permutation(my_string) do |s|
  lookup_string(s) #or whatever you need to do for each string here
end 
```

这不会检查重复项（不调用`uniq`），但会避免创建数组。对于大字符串，这仍然可能需要很长时间。

但是，我怀疑在您的情况下，有更好的方法可以解决您的问题。

> 我实际上不需要将结果保存在任何地方，我只需要在表中查找每个结果以查看它是否存在。

看起来您正在寻找现有单词列表中可能的字符串字谜。如果你取任意两个字谜并对其中的字符进行排序，得到的两个字符串将是相同的。您是否可以更改您的数据结构，以便您拥有一个哈希，其中键是已排序的字符串，值是作为该字符串的字谜的单词列表。然后，无需根据列表检查新字符串的所有排列，您只需对字符串中的字符进行排序，并将其用作键来查找作为该字符串排列的所有字符串的列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-08T19:00:45.397

也许您不需要生成集合的所有元素，而只需要生成随机或受约束的子集。我编写了一个算法来在 O(n) 时间内生成第 m*个*排列。

首先将键转换为[阶乘数字系统](http://en.wikipedia.org/wiki/Factorial_number_system#Permutations)中自身的列表表示。然后迭代地在新列表和*旧列表指定**的*每个索引处提取项目。

 *```
module Factorial
  def factorial num; (2..num).inject(:*) || 1; end

  def factorial_floor num
    tmp_1 = 0
    1.upto(1.0/0.0) do |counter|
      break [tmp_1, counter - 1] if (tmp_2 = factorial counter) > num
      tmp_1 = tmp_2     #####
    end                # # 
  end                 #   #
end                        # returns [factorial, integer that generates it]
                            # for the factorial closest to without going over num

class Array; include Factorial
  def generate_swap_list key   
    swap_list = []              
    key -= (swap_list << (factorial_floor key)).last[0] while key > 0
    swap_list
  end

  def reduce_swap_list swap_list
    swap_list = swap_list.map   { |x|       x[1]                    }
    ((length - 1).downto 0).map { |element| swap_list.count element }
  end

  def keyed_permute key
    apply_swaps reduce_swap_list generate_swap_list key
  end

  def apply_swaps swap_list
    swap_list.map { |index| delete_at index }
  end
end 
```

现在，如果你想随机采样一些排列，ruby 自带`Array.shuffle!`，但这会让你复制和保存排列或遍历[permutohedral 空间](http://en.wikipedia.org/wiki/Permutohedron)。或者，也许有一种方法可以根据您的目的限制排列空间。

```
constrained_generator_thing do |val|
    Array.new(sample_size) {array_to_permute.keyed_permute val}
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-02T23:34:41.583

只是重申一下Sawa所说的。你了解范围吗？`n`任何元素的排列数是`n!`。这是关于你能得到的最激进的数学级数运算。`n`1-20 之间的结果是：

```
[1, 2, 6, 24, 120, 720, 5040, 40320, 362880, 3628800, 39916800, 479001600, 
 6227020800, 87178291200, 1307674368000, 20922789888000, 355687428096000,
 6402373705728000, 121645100408832000, 2432902008176640000] 
```

最后一个数字大约是 2 quintillion，即 20 亿。

那是 2265820000 GB。

您可以整天将结果保存到磁盘 - 除非您拥有世界上所有的 Google 数据中心，否则您将在这里非常不走运:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:19:39.677

也许我错过了明显的，但为什么不这样做

```
['a','a','b'].permutation.to_a.uniq! 
```*

# google-maps - 自定义 Google Maps JavaScript API 的规模？

> ID：14667504
> 
> 赞同：1
> 
> 时间：2013-02-02T23:04:49.877
> 
> 标签：google-maps

我们正在使用 Google Maps API 来显示一张带有绘图的大地图。地图使用大电视显示在墙上。

有没有办法增加字体大小？电视每英寸有很多像素，因此地图中的字体显示非常小。

*   我知道有可用于 Android 浏览器的高 dpi 图像。（地图应用不算）
*   我知道您可以将静态地图 API 图像的比例翻倍。

我不知道我是否可以在交互式谷歌地图上获得这些高分辨率图像。我可以这样做，还是我只是坚持使用缩放功能（我不喜欢缩放的想法，因为放大时它看起来很模糊）

# android - 如何从 Android 上的 Graph API 获取朋友的 Facebook ID 列表？

> ID：14667507
> 
> 赞同：0
> 
> 时间：2013-02-02T23:05:12.910
> 
> 标签：android, facebook

我发现[了这个问题](https://stackoverflow.com/questions/11197229/facebook-get-friends-id)，它完全符合我的要求，但 Facebook 类已被弃用，取而代之的是 Facebook Graph API。我无法理解 Facebook 提供的文档，所以如果有人可以提供帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:18:33.627

```
public void getIds(){
    Session session = Session.getActiveSession();
    String fqlQuery = "select uid from user where uid in (select uid2 from friend where uid1 = me())";
    Bundle params = new Bundle();
    params.putString("q", fqlQuery);
    Request request = new Request(session, "/fql", params, HttpMethod.GET,
            new Callback() {

                @Override
                public void onCompleted(Response response) {

                    Log.d("List of id's", "response = "+response);
                }
            });
    Request.executeBatchAsync(request); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T10:15:01.017

```
public void getIds(){
            Session session = Session.getActiveSession();
            String query = "select uid from user where uid in (select uid2 from friend where uid1 = me())";
            Bundle params = new Bundle();
            params.putString("q", query);
            Request request = new Request(session, "/me/friends", params, HttpMethod.GET, new Request.Callback() {

                        @Override
                        public void onCompleted(Response response) {

                            Log.d("Id's :", "Response = "+response);
                        }
                    });
            Request.executeBatchAsync(request); 
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T10:45:50.270

我建议查看支持 Graph API 的[Facebook Android SDK](https://github.com/facebook/facebook-android-sdk) （由 Facebook 支持）。

它有一个可以满足您需求的 Android FriendPicker 示例。

# javascript - 通过修改 HTTP 标头使用没有 CORS 的 XMLHttpRequest？

> ID：14667512
> 
> 赞同：5
> 
> 时间：2013-02-02T23:05:36.340
> 
> 标签：javascript, ajax, http-headers, cross-domain, cors

我正在用（已弃用的）Twitter API 1.0 做一些测试

例如，我想从 API 获取数据，客户端使用来自任何跨域网页的 AJAX 浏览器请求。它可以是新的空白选项卡、本地 HTML 页面或任何现有网站。

我试过 JSONP，效果很好，但我想使用默认的 XMLHttpRequest，即使 Twitter 服务器不支持 CORS [http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)。

例如，在 google.com 主页上，我创建了一个使用 Firebug 执行的对 Twitter API 的简单 AJAX 调用：

```
var xhr = new XMLHttpRequest();
xhr.open("GET", "https://api.twitter.com/1/friends/ids.json?screen_name=baptx", false);
xhr.send(); 
```

由于相同的来源策略，这将不起作用并在 Firebug 上打印错误：

```
Error: Failure
xhr.send(); 
```

它返回 HTTP 200 OK 代码，但未从服务器接收到 JSON 数据。

我已经看到来自 google.com 网页和 api.twitter 网页的请求之间的两个区别（因为它是 API 域名，所以它适用于 Twitter API 请求，同源）。

已添加带有当前域名的 Origin HTTP 标头：

```
Origin  https://www.google.com 
```

Referer HTTP 标头不是 [https://api.twitter.com/](https://api.twitter.com/)像来自 api.twitter.com 页面的请求，但在我的情况下：

```
Referer https://www.google.com/webhp?hl=en 
```

这就是为什么我试图删除 Origin HTTP 标头并将当前的 Referer HTTP 标头修改为[https://api.twitter.com/](https://api.twitter.com/)

我已经使用 Firefox ModifyHeaders 扩展完成了这项工作，它可以工作，我可以在 Firebug“Net”选项卡中检查这些更改是否正确。

现在，我从来自 google.com 网页和 api.twitter.com 网页的请求中获得了相同的请求标头。它仍然无法从 API 以外的其他域发出 AJAX 请求，即使 HTTP 标头被覆盖，为什么？

顺便说一句，你知道为什么从 Firefox“新标签”向 Twitter API 发出的 AJAX 请求会起作用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T21:37:16.230

如果 web 服务器不允许跨域资源共享，我们必须手动添加 HTTP 响应头 Access-Control-Allow-Origin: *

我认为问题出在请求标头中。没有 Firefox 插件来修改 HTTP 响应标头，ModifyHeaders 或 TamperData 仅支持请求标头： [在 Firefox 中修改 HTTP 响应标头](https://stackoverflow.com/questions/2537262/modifying-http-response-headers-in-firefox)

我的问题实际上与此类似：[我可以在任何浏览器上禁用 SOP（同源策略）以进行开发吗？](https://stackoverflow.com/questions/330427/can-i-disable-sop-same-origin-policy-on-any-browser-for-development)

解决方案：有人开发了一个 Firefox 插件来强制 CORS：[https](https://addons.mozilla.org/en-US/firefox/addon/forcecors/) ://addons.mozilla.org/en-US/firefox/addon/forcecors/ 。或者我们可以在 GreaseMonkey 脚本中使用 GM_xmlhttpRequest，它会绕过 XMLHttpRequest 的同源策略。还有一个名为 Header Editor 的新插件，它是开源的，可以编辑请求和响应头：[https](https://addons.mozilla.org/en-US/firefox/addon/header-editor/) ://addons.mozilla.org/en-US/firefox/addon/header-editor/ 。

在 Chrome 中，没有插件可以修改 HTTP 请求/响应标头，因为浏览器不提供 API，但有一个禁用 SOP 的标志（--disable-web-security）

# php - 从没有 $_GET 的 URL 获取参数

> ID：14667513
> 
> 赞同：1
> 
> 时间：2013-02-02T23:05:56.603
> 
> 标签：php, get, mysqli

基本上试图为我的 mysql 中的每个条目创建一个页面，并且一旦单击每个条目，都将被重定向到一个页面，在该页面中深入显示数据。页面示例： ....www.example.com/examplepage.php/3 3 是 $row[0] 这是条目的 ID #

```
 while ($row = $result->fetch_row()) {

$article_page = "http://localhost/MCA/testpage.php/$row[0]";

echo '<tr><td><a href=' . "$article_page" .'>' . $row[1] . '</a></td><td>' .
                            $row[2] . '</td><td>' .
                            $row[3] . '</td><td>' . 
                            $row[4] .'</td><td>' . 
    date("l jS \of F Y h:i:s A", strtotime($row[5])) .'</td></tr>';

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:07:50.033

您需要通过`.htaccess`文件或其他方式应用 URI 重定向规则。

更改示例如下：

**.htaccess**：

```
Options +FollowSymLinks
IndexIgnore */*

RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

**PHP**：

```
$uri_segments = explode('/', $_SERVER['REQUEST_URI']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:08:53.167

您必须使用 URL 重写以干净的方式来执行此操作。（参见 httpd mod_rewrite）。

# actionscript-3 - 使用 ActionScript 3.0 从库中加载包含网络摄像头视频的对象

> ID：14667517
> 
> 赞同：0
> 
> 时间：2013-02-02T23:06:42.200
> 
> 标签：actionscript-3, flash

我想用 Actionscript 创建一个简单的气球射击游戏。气球应该从舞台的底部漂浮到顶端。会有两种气球。一个人将携带一个框架，其中附有网络摄像头的图像。如果您拍摄没有图像的那张，您将获得 100 分。如果你用图像拍摄，你就输了。

到目前为止，我的解决方案分别解决了每个元素（图形和视频）。这意味着，我必须为每个应该升起的气球编写几次代码。这似乎不是很有效。此外，气球的数量是有限的。

```
import flash.media.Camera;
import flash.media.Video;
import flash.display.MovieClip;

var camera:Camera = Camera.getCamera();

if (camera != null)
{

    videoFrame1.attachCamera(camera);
}
else
{
    trace("You need a camera.");

}

stop();

Score.appendText("Your Score: ");

//Balloon1 

var directionY1;

video1.addEventListener(Event.ENTER_FRAME, float1);
function float1(event:Event)
{
    if (video1.y > 0)
    {
        richtungY1 = 1;
    }
    video1.y -=  3 * directionY1;
}

videoFrame1.addEventListener(Event.ENTER_FRAME, Framefloat1);
function Framefloat1(event:Event)
{
    if (videoFrame1.y > 0)
    {
        directionY1 = 1;
    }
    videoFrame1.y -=  3 * directionY1;
}

clickFrame1.addEventListener(Event.ENTER_FRAME, clickFramefloat1);
function clickFramefloat1(event:Event)
{
    if (clickFrame1.y > 0)
    {
        directionY1 = 1;
    }
    clickFrame1.y -=  3 * directionY1;
}
balloon1.addEventListener(Event.ENTER_FRAME, Balloonfloat1);
function Balloonfloat1(event:Event)
{
    if (balloon1.y > 0)
    {
        directionY1 = 1;
    }
    balloon1.y -=  3 * directionY1;
}

tv1.addEventListener(Event.ENTER_FRAME, TVfloat1);
function TVfloat1(event:Event)
{
    if (tv1.y > 0)
    {
        directionY1 = 1;
    }
    tv1.y -=  3 * directionY1;
}

function clicked(event:MouseEvent):void
{
    removeChild(videoFrame1);
    removeChild(tv1);
    removeChild(balloon1);
}
clickFrame1.addEventListener(MouseEvent.CLICK, clicked);

//Counter;

clickFrame1.addEventListener(MouseEvent.CLICK, count);
var counter = 0;
function count( e:MouseEvent ):void
{

    counter +=  100;
    Score.appendText(counter);
    trace( counter );

} 
```

现在，我的想法是为每个气球构建一种，然后将其从库中加载出来。我考虑过使用 addChild。如果你射击一个气球，应该会生成一个新的气球，并且速度会提高。但我无法解决。

似乎我无法将视频放入movieClip 并将其与其他元素组合到一个对象中。

有谁知道，我如何创建一个包含所有元素的movieClip，并将其从库中加载出来？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:30:56.107

本教程介绍了如何将资源从库加载到时间线：http: [//www.adobe.com/devnet/flash/quickstart/loading_images_library_as3.html](http://www.adobe.com/devnet/flash/quickstart/loading_images_library_as3.html)。它会让你开始。

# visual-studio-2012 - 如何为 IIS Express、Web API 和 MVC Web 项目设置本地开发环境？

> ID：14667526
> 
> 赞同：3
> 
> 时间：2013-02-02T23:07:50.997
> 
> 标签：visual-studio-2012, asp.net-web-api, iis-express

我正在寻找一种解决方案来促进运行具有 ASP.NET MVC Web 项目和 Web API REST 服务项目的本地解决方案。

设置多个启动项目保存在 .suo 文件中，由于它是特定的用户设置文件，因此不会检入存储库。此外，IIS Express 是在当前用户目录中的解决方案之外配置的。

有关如何在团队场景中支持这种多启动项目场景的任何建议，以确保将相同的端口分配给从源代码控制中关闭存储库的每个人？

**注意**：我*不想*将 Web API 控制器移至 Web 解决方案。这两个项目的分离在这个架构中很重要。

# php - 来自 URL 的 PHP 中的键值

> ID：14667531
> 
> 赞同：-1
> 
> 时间：2013-02-02T23:08:41.433
> 
> 标签：php, arrays, key, key-value

> **可能重复：**
> [如何将 URL 参数列表字符串分解为成对的 [key] => [value] 数组？](https://stackoverflow.com/questions/9046279/how-to-explode-url-parameter-list-string-into-paired-key-value-array)

快速提问

我有一个 URL 字符串，我希望将键值作为数组输出，例如

$url ="www.domain.com?test=1&test2=2&test3=3";

并希望将输出作为数组

key => value 所以我可以调用任何键

例如

```
array (
    test => 1,
    test1 => 2,
    test2 => 3,
) 
```

不能使用explode & 只是想我是否必须在& 和= 之间做一个循环并匹配键

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:17:23.910

我会使用[parse_url()](http://php.net/manual/en/function.parse-url.php)和[parse_str()](http://php.net/parse_str)：

```
$url = parse_url('www.domain.com?test=1&test2=2&test3=3');
parse_str($url['query'], $keyvalue);

var_dump($keyvalue); 
```

`$keyvalue`应该包含您想要的数组。

# android - 将包含 10 个 mp3 文件的文件夹从 Assets 复制到 SD 卡

> ID：14667535
> 
> 赞同：0
> 
> 时间：2013-02-02T23:08:54.023
> 
> 标签：android, assets, android-sdcard

我正在为`Electrum Drum Machine/Sampler`.

我需要将包含`10-20`mp3 文件的文件夹从 Assets 复制到`SD-card`. 我需要包含文件的文件夹到这里“sdcard/electrum”，我也需要在代码中插入路径“sdcard/electrum”！

我是编码新手，但速度很快我可以编码我的 UI、按钮、页面，但我只需要一点帮助，谢谢！

这是我的代码...

```
package com.example.newsampletest;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.app.Activity;
import android.content.res.AssetManager;
import android.os.Bundle;
import android.util.Log;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        copyAssets();

    }

    private void copyAssets() {
        AssetManager assetManager = getAssets();
        String[] files = null;
        try {
            files = assetManager.list("files");
        } catch (IOException e) {

        }
        for(String filename : files) {
            InputStream in = null;
            OutputStream out = null;
            try {
                in = assetManager.open(filename);
                out = new FileOutputStream("files/"+filename);
                copyFile(in, out);
                in.close();
                in = null;
                out.flush();
                out.close();
                out = null;
            } catch(Exception e) {
                Log.e("tag", e.getMessage());
            }
        }
    }

    private void copyFile(InputStream in, OutputStream out) throws IOException {
        byte[] buffer = new byte[1024];
        int read;
        while((read = in.read(buffer)) != -1){
            out.write(buffer, 0, read);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:17:45.277

> 我的设备出现错误“安装失败。请检查文件并确保手机有足够的空间进行安装”

这表明您的 APK 文件太大，并且您的设备缺少足够的内部存储空间。

你可以：

*   卸载现有应用程序以尝试腾出空间，或
*   尝试使用较短的音频片段，或
*   降低音频剪辑质量（例如，降低比特率），或
*   使用更少的音频片段，或
*   不要将部分或全部剪辑与您的应用一起打包，而是在首次运行时将一些剪辑下载到外部存储中，或者
*   玩弄[应用程序安装位置](http://developer.android.com/guide/topics/data/install-location.html)，尽管我不完全确定这会对您的情况有所帮助

# django - Django ORM m2m 限制为 1

> ID：14667536
> 
> 赞同：0
> 
> 时间：2013-02-02T23:08:54.773
> 
> 标签：django, django-orm

```
# models.py
class Gallery(models.Model):
    images = models.ManyToManyField(Image, null=True, blank=True)

class Image(models.Model):
    image = models.ImageField()

# views.py
class GalleryIndex(ListView):
    model = Gallery 
```

我需要为每个画廊获取缩略图，这是第一个/最后一个/任何图像。如何在`Gallery.images`不调用第二个 SQL 查询的情况下将任何图库的图像限制为 1 作为自定义属性（不覆盖）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:13:34.630

多对多充当普通查询集的描述符，因此您可以`my_gallery.images.all()[0]`将查询限制为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:14:13.773

我认为我没有正确理解您想要做什么，但是下面的代码不适合您吗？

```
class Gallery(models.Model):
    images = models.ManyToManyField(Image, null=True, blank=True)

    def get_thumb(self):
        return self.images.all()[0] 
```

或者可能是其他概念：

```
class Gallery(models.Model):
    images = models.ManyToManyField(Image, null=True, blank=True)
    thumbnail = models.ImageField()

    def save(self, *args, **kwargs):
        self.thumbnail = self.images.all()[0].image 
```

（虽然这里需要一些异常捕获）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T13:29:48.777

我应该更好地阅读文档。标准 QuerySet API 不能有效地处理这种情况（为每个父字段`annotate()`生成`GROUP BY`子句很慢）所以我提供了`extra()`方法和原始子查询。

```
class GalleryIndex(ListView):
    queryset = Gallery.objects.extra(select={'thumb':
        """
        SELECT "image"
        FROM "app_image", "app_gallery_images"
        WHERE (
            "app_gallery"."id" = "app_gallery_images"."gallery_id"
            AND "app_gallery_images"."image_id" = "app_image"."id"
        )
        AND "app_image"."image" IS NOT NULL
        LIMIT 1
        """
    }) 
```

这个查询集完全符合我的要求，因为 SorlImageField（和 ImageField）只需要文件名来表示模板中的缩略图。

# android - Mediaplayer NullPointerException 问题

> ID：14667537
> 
> 赞同：0
> 
> 时间：2013-02-02T23:09:21.560
> 
> 标签：android, android-mediaplayer

我在我的应用程序中使用媒体播放器。我的应用程序工作正常，但我在 google play 开发者控制台上看到错误报告（对于某些用户）问题出在哪里，谢谢

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    soundname= new String[]  {"Sound1","Sound2","Sound3","Sound4","Sound5","Sound6"}; 
    soundfile= new int[] {R.raw.sound1,R.raw.sound2,R.raw.sound3,R.raw.sound4,R.raw.sound5,R.raw.sound6};

    this.setContentView(R.layout.single_list_item_view);

    TextView txtProduct = (TextView) findViewById(R.id.product_label);
    Intent intent = getIntent();
    int position = intent.getExtras().getInt("position");

    txtProduct.setText(soundname[position]);
    mediaPlayer = MediaPlayer.create(this, soundfile[position]); 

    Button btnplay= (Button) findViewById(R.id.btnoynat);
    btnplay.setOnClickListener(new View.OnClickListener(){

        public void onClick(View arg0) { 
                mediaPlayer.start();         
        }
        }); 
```

错误日志；(mediaPlayer.start();-->SingleListItem.java:60)

```
java.lang.NullPointerException
at com.zilsesleri.SingleListItem$1.onClick(SingleListItem.java:60)  
at android.view.View.performClick(View.java:2538)
at android.view.View$PerformClick.run(View.java:9152)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3693)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:13:53.403

错误就在这一行 `mediaPlayer.start();`，你的 mediaPlayer 对象在这里是空的，有一个空检查，并弄清楚在什么情况下它应该是空的。

# ruby-on-rails - ActiveModel::MassAssignmentSecurity::UsersController#create 中的错误

> ID：14667542
> 
> 赞同：0
> 
> 时间：2013-02-02T23:09:49.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在使用 Rails 3.2.2 并收到以下错误。下面的表格使用嵌套模型，我无法找到我几天来一直试图定位的错误来源。

* * *

```
ActiveModel::MassAssignmentSecurity::Error in UsersController#create

Can't mass-assign protected attributes: blog

app/controllers/users_controller.rb:17:in `new'
app/controllers/users_controller.rb:17:in `create' 
```

**表格变量**

```
class HomeController < ApplicationController

  def index
    @user = User.new
    @blog = @user.blogs.build
  end
end 
```

**用户表单**

```
<%= form_for @user do |f| %>
 <%= f.text_field :email, :class => 'textbox', :value => 'Email' %><br/><br/>
 <%= f.password_field :password, :class => 'textbox', :value => 'Password' %><br/><br/>
   <%= f.fields_for :blog do |b|%>
     <%= b.text_field :url, :class => 'textbox', :value => 'Blog URL' %></br></br>
   <% end %>

 <%= image_submit_tag("signup.png") %> <br/>
<% end %> 
```

**用户控制器**

```
class UsersController < ApplicationController

  def create
     @user = User.new(params[:user])   ############## << RUNTIME ERROR #############

     if @user.save 
       flash[:success] = "Welcome!"
       render 'user/success'             
     else
       render 'home/index'
     end
   end 
```

**博客模型**

```
class Blog < ActiveRecord::Base

   belongs_to :user
   attr_accessible :url, :type, :blog_id
   validates :url, :presence => true 

end 
```

**用户模型**

```
class User < ActiveRecord::Base

  has_many :blogs
  has_many :posts

  accepts_nested_attributes_for :blogs, :allow_destroy => true
  attr_accessible :email, :password, :user_id, :blogs_attributes 
end 
```

**模式**

```
 create_table "blogs", :force => true do |t|
    t.integer  "user_id"
    t.string   "url"
    t.string   "type"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "email"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.string   "password_digest"
    t.string   "remember_token"
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:22:34.377

尝试在这样的博客上添加 s。应该是博客。

```
<%= f.fields_for :blogs do |b|%>
     <%= b.text_field :url, :class => 'textbox', :value => 'Blog URL' %></br></br>
<% end %> 
```

# perl - 用于计算 pi 的 Perl 代码

> ID：14667543
> 
> 赞同：2
> 
> 时间：2013-02-02T23:09:56.723
> 
> 标签：perl

有人可以在 Perl 中逐步解释这段代码：

```
$.=.5;
$\=2/$.++-$\for$...1e6;
print 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T23:25:11.157

添加空格：

```
$. = .5;
$\ = (2 / $.++) - $\ for $. .. 1e6; 
```

用更健全的 var 名称替换：

```
$x = .5;
$pi = (2 / $x++) - $pi for $x .. 1e6; 
```

不要将相同的 var 用于两个目的：

```
$x = .5;
$pi = (2 / $x++) - $pi for 0 .. 1e6; 
```

转换为公式：

```
pi = 2/1000000.5 - ( ... - (2/2.5 - (2/1.5 - (2/0.5))))

   = 2/1000000.5 - ... + 2/2.5 - 2/1.5 + 2/0.5

   = 4/2000001 - ... + 4/5 - 4/3 + 4/1

   = 4/1 - 4/3 + 4/5 - ... + 4/2000001 
```

在 Wikipedia 中被[列为Gregory-Leibniz 系列。](http://en.wikipedia.org/wiki/Pi)

`print;`is `print($_);`，打印`$_`(unused, so undef, stringifying to empty string) 后跟`$\`(通常是空字符串，但在原始代码中用作累加器)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T23:36:24.177

让我们首先将代码分解成一些更易读的东西，并带有一些空格。空白在 Perl 中相对不重要。

```
$. = .5;
$\ = 2 / $.++ - $\ for $. .. 1e6;
print 
```

此代码使用 Perl 的特殊内置全局变量来使事情看起来很短（`man perlvar`有关此代码使用的特定变量的更多详细信息）。让我们通过将它们替换为人类可读的名称来使其更具可读性。

```
$denominator = .5;
$pi = 2 / $denominator++ - $pi for $denominator .. 1e6
print $pi 
```

为了提供帮助，让我们将内联 for 循环移动到更详细的循环中。

```
$denominator = .5;
foreach my $i ($denominator .. 1e6) {
  $pi = 2 / $denominator - $pi;
  $denominator += 1;
}
print $pi 
```

因此，这使得它更容易破译，并且它是计算 pi 的标准收敛例程。有许多[不同的](http://en.wikipedia.org/wiki/Pi#Continued_fractions)，但基本上，如果你单步执行，你会看到它收敛到著名的 3.14159... 分母可以用作序列生成器的第一个元素，因为它会下降到整数 0。

```
Pass 1: 2 / 0.5 - 0 = 4
Pass 2: 2 / 1.5 - 4 = -2.666...
Pass 3: 2 / 2.5 - (-2.666...) = 3.4666...
Pass 4: 2 / 3.5 - 3.4666... = -2.895...
Pass 5: 2 / 4.5 - (-2.895...) = 3.339... 
```

你明白了。代码运行 1,000,001 次，以达到最终的近似值。只要它运行奇数个近似值，它就应该收敛到 pi（偶数个近似值收敛到负 pi）。

print 语句起作用的原因`$\`是输出记录分隔符。 `print`它本身将 print `$_`，默认变量，将为空。pi 的值将在`$\`value 中，这实际上是行尾，因此它会打印出一个空白值，然后是计算出的 pi 值（不是传统的行尾）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T00:10:02.320

Wow, that's a beauty. Someone was trying to make that look as convoluted as possible. Here's a more readable version:

```
my $pi = 0;
for (my $i=0.5; $i < 1e6+1; $i++)
{
    $pi=2/$i - $pi;
}
print $pi."\n"; 
```

This is the mathematical representation of the [*Gregory-Leibnitz Formula*](http://en.wikipedia.org/wiki/Leibniz_formula_for_%CF%80)

The original version uses a few [Perl special variables](http://perldoc.perl.org/perlvar.html) to confuse you. The `$.` is entirely unnecessary here and purely for obfuscation. The `$\` is the **output record separator**. That means this variable will be appended after a `print` statement. Therefore, the single `print` at the end simply prints the result of the calculation that was stored in `$\`. Finally, the code uses a post-fix `for` loop and the `..` operator instead of the more explicit for loop in my version. I hope that clears things up a bit.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:31:14.940

这可以重写为：

```
use strict;
use warnings;

my $divisor = 0.5;
my $pi = 0;
for my $i (0..1e6)
{
    $pi = 2 / $divisor++ - $pi
}
print "$pi\n"; 
```

所以它使用一些数学级数展开来计算 pi（参见@ikegami 的回答）

# sql - Ruby on Rails：按标签列表过滤所有产品的最佳方法

> ID：14667547
> 
> 赞同：0
> 
> 时间：2013-02-02T23:10:20.250
> 
> 标签：sql, ruby-on-rails

我有 2 个模型 Product 和 Tag 具有多对多关系。

```
class Product < ActiveRecord::Base
  has_many :product_tags
  has_many :tags, through: :product_tags
end

class Tag < ActiveRecord::Base
  has_many :product_tags
  has_many :products, through: :product_tags
end 
```

和关系模型：

```
class ProductTag < ActiveRecord::Base
  belongs_to :product
  belongs_to :tag
end 
```

通过给定标签列表搜索产品的最佳方式是什么？产品必须具有所有标签，而不仅仅是其中一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:15:20.873

尝试

```
products = Product.joins(:tags)
tags.each do |tag|
  products = products.where(tags: { name: tag })
end 
```

`tags`包含您要搜索的标签列表，我假设该标签有一个`name`属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:51:48.957

我在这里找到了答案[https://stackoverflow.com/a/11887362/808175](https://stackoverflow.com/a/11887362/808175)。所以在我的情况下是：

```
tags = ['1', '2', '3']
Product.joins(:tags)
       .where(:tags => {:id => tags})
       .group('products.id')
       .having("count(product_tags.tag_id) = #{tags.count}") 
```

# r - R - 如何将不同的功能应用于列中的某些行

> ID：14667549
> 
> 赞同：6
> 
> 时间：2013-02-02T23:10:48.590
> 
> 标签：r

我正在尝试根据相邻列中字符串的值将不同的函数应用于不同的行。我的数据框如下所示：

```
type    size
A       1
B       3
A       4
C       2
C       5
A       4
B       32
C       3 
```

我想将不同的函数应用于类型 A、B 和 C，以给出第三列“size2”。例如，假设以下函数适用于 A、B 和 C：

```
for A: size2 = 3*size
for B: size2 = size
for C: size2 = 2*size 
```

我可以使用此代码分别为每种类型执行此操作

```
df$size2 <- ifelse(df$type == "A", 3*df$size, NA)
df$size2 <- ifelse(df$type == "B", 1*df$size, NA)
df$size2 <- ifelse(df$type == "C", 2*df$size, NA) 
```

但是，如果不删除所有其他值，我似乎无法对所有类型执行此操作。我尝试使用此代码将函数的应用限制为仅那些 NA 值（即，保留现有值并仅填写 NA 值），但使用此代码不起作用：

```
df$size2 <- ifelse(is.na(df$size2), ifelse(df$type == "C", 2*df$size, NA), NA) 
```

有没有人有任何想法？是否可以在“is.na(df$size2)”和“ifelse(df$type == "C"" 中使用某种 AND 语句？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:31:27.420

This might be a might more R-ish (and I called my dataframe 'dat' instead of 'df' since `df` is a commonly used function.

```
> facs <- c(3,1,2)
> dat$size2= dat$size* facs[ match( dat$type, c("A","B","C") ) ]
> dat
  type size size2
1    A    1     3
2    B    3     3
3    A    4    12
4    C    2     4
5    C    5    10
6    A    4    12
7    B   32    32
8    C    3     6 
```

The `match` function is used to construct indexes to supply to the extract function `[`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T23:14:54.607

如果你愿意，你可以嵌套`ifelse`s：

```
df$size2 <- ifelse(df$type == "A", 3*df$size,
                       ifelse(df$type == "B", 1*df$size,
                           ifelse(df$type == "C", 2*df$size, NA)))

#    > df
#  type size size2
#1    A    1     3
#2    B    3     3
#3    A    4    12
#4    C    2     4
#5    C    5    10
#6    A    4    12
#7    B   32    32
#8    C    3     6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:37:41.963

这可以这样做，为每种类型创建单独的逻辑向量：

```
As <- df$type == 'A'
Bs <- df$type == 'B'
Cs <- df$type == 'C'
df$size2[As] <- 3*df$size[As]
df$size2[Bs] <- df$size[Bs]
df$size2[Cs] <- 2*df$size[Cs] 
```

但更直接的方法是创建一个单独的查找表，如下所示：

```
df$size2 <- c(A=3,B=1,C=2)[as.character(df$type)] * df$size 
```

# php - 如果 URL 是这样的：这样做 [.. 并在页面标题中包含 slug？]

> ID：14667551
> 
> 赞同：0
> 
> 时间：2013-02-02T23:10:52.153
> 
> 标签：php, wordpress, if-statement

[http://alexmasters.is/a/photographer](http://alexmasters.is/a/photographer)

如果您在新选项卡/窗口中打开其中一个类别（或直接访问：[http](http://alexmasters.is/shooting/weddings) ://alexmasters.is/shooting/weddings ），您会注意到最近条目的标题显示在 Portfolio 所在的位置，并且类别标题应该在哪里。

是否可以使用这样的东西：

```
<div id="page_title" class="page_title_portfolio border_bottom">
<h1 style="<?php if($_SERVER['HTTP_HOST'] != '/shooting/'){echo 'display:none;'; } ?>">Cindy &#038; Akbar : </h1> 
```

这样 /shooting/ 类别就会触发 display:none; 作为H1的属性？如果这可行，是否也可以有相同的条件取 /shooting/ 之后的内容并在它的位置使用它？

有点像

```
<div id="page_title" class="page_title_portfolio border_bottom">
<h1 style="<?php if($_SERVER['HTTP_HOST'] != '/shooting/'){echo 'display:none;'; } ?>">Cindy &#038; Akbar : </h1>
<?php if($_SERVER['HTTP_HOST'] != '/shooting/'){echo '<h1 style="{text-transform:capitalize;}">SLUG AFTER SHOOTING HERE</h1>'; } ?>"> 
```

^ 这显然是因为它可能比尝试修复它更容易：

```
<div id="page_title" class="page_title_portfolio border_bottom">
<h1><?php echo $title; ?></h1>
<?php if (strlen(trim(get_post_meta(get_the_ID(), '_page_extra_description', true))) > 0): ?>
<span>|</span> <p><?php echo trim(get_post_meta(get_the_ID(), '_page_extra_description', true)); ?></p>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:43:11.863

此代码将获取当前页面 url 并将在[http://alexmasters.is/](http://alexmasters.is/)之后创建一个 uri 项目数组，例如，如果 url 是[http://alexmasters.is/a/b/c](http://alexmasters.is/a/b/c)，您可以像这样 echo 打印 b $零件[1]；您可以检查 $parts[1] 是否为空，以便打印 $parts[0]

```
 <?php

function full_url()
{
    $s = empty($_SERVER["HTTPS"]) ? '' : ($_SERVER["HTTPS"] == "on") ? "s" : "";
    $protocol = substr(strtolower($_SERVER["SERVER_PROTOCOL"]), 0, strpos(strtolower($_SERVER["SERVER_PROTOCOL"]), "/")) . $s;
    $port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);
    $uri = $protocol . "://" . $_SERVER['SERVER_NAME'] . $port . $_SERVER['REQUEST_URI'];
    $segments = explode('?', $uri, 2);
    $url = $segments[0];
    return $url;
}

$uri = parse_url(full_url());

print_r($uri);
$parts = explode("/",substr($uri["path"],1));
print_r($parts);
echo $parts[0];
echo $parts[1];
?> 
```

# image - Node.JS 将可变长度二进制数据转换为 jpeg 或 png？

> ID：14667553
> 
> 赞同：0
> 
> 时间：2013-02-02T23:11:14.020
> 
> 标签：image, node.js, binary, variable-length

我想知道如何将`Variable-length binary data`( `255216255224016747073700110010100255`) 转换为 jpeg 或 png 到网络浏览器？

**示例代码：**

```
var Connection = require('tedious').Connection;

    var config = {
        "userName": "user@server.database.windows.net",
        "password": "pswd",
        "server": "server.database.windows.net",
        "options": {
                "database": "db",
                "encrypt": true,
        }
    };

    var connection = new Connection(config);

    connection.on('connect', function(err) {
            console.log("Connected");
        }
    );

var Request = require('tedious').Request;
var result,
    resG;

    function sendResponse() {
        var vals;
            // Convert to string then array
        var resultA = result.toString().split(',');
            // Now I can loop through the data returned
        resultA.forEach(function(val, index, ar) {
            if(vals == null) {
                vals = val;
            } else {
                vals += val;
            }   
        });
        resG.writeHead(200, {'Content-Type': 'text/html', 'Content-Length': vals.length});
        //console.log(vals);
        //resG.end("<img src=\"data:image/jpg;base64," + vals + "\" />");
            // Output data returned from db as string
        resG.end("" + vals);
    }

    function executeStatement() {
         request = new Request("SELECT Photos FROM dbo.tbl WHERE FarmerFirstName='someName' AND FarmerLastName='someLastName'", function(err, rowCount) {
                if (err) {
                    console.log(err);
                } else {
                    console.log(rowCount + ' rows');
                }
            });

            request.on('row', function(columns) {
                columns.forEach(function(column) {
                    result = column.value;
                });
            });

        request.on('doneInProc', function(rowCount, more) {
                    // Got everything needed from db move on to sending a response
            sendResponse();
        });

            connection.execSql(request);
    }

var http = require('http'),
    director = require('director');

var router = new director.http.Router({
    "/": {
        get: executeStatement
    }
});

var server = http.createServer(function (req, res) { 
  // set global res var
  resG = res;
  router.dispatch(req, res, function (err) {
    if (err) {
      res.writeHead(404);
      res.end();
    }
 });
});

server.listen(80); 
```

我将db 连接器和**director**用作路由器，这很**乏味。**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T01:35:20.563

The `result` is already an array of bytes for the Image. You do not need to do any fancy transformations on it. This should work.

```
function sendResponse() {
    resG.writeHead(200, {'Content-Type': 'image/jpeg', 'Content-Length': result.length});

    resG.end(new Buffer(result));
} 
```

or if you want to serve it as part of an HTML page, this:

```
function sendResponse() {
    resG.writeHead(200, {'Content-Type': 'text/html'});

    var vals = (new Buffer(result)).toString('base64')

    resG.end("<html><body>" +
        "<img src=\"data:image/jpg;base64," + vals + "\" />" +
        "</body></html>");
} 
```**

# r - 使用 ggplot 在 R 中添加误差线

> ID：14667554
> 
> 赞同：0
> 
> 时间：2013-02-02T23:11:19.477
> 
> 标签：r, hmisc

我想在 R 中通过 LWP 绘制两个分类变量（处理）。

我想更改点（填充）的颜色以对应于变量 rootpath（每次处理一个点）。

如果差异显着与否，我还想添加一个符号..

```
Plants.means<-aggregate(Plants[10:44],Plants[c(6,9)],mean,na.rm=TRUE)

SE<-function(x)(sd(x,na.rm=TRUE)/ (length(x)-sum(is.na(x)))^0.5)

ggplot(Plants.means, aes(x=Treat, y=Yield, group=1)) +
geom_errorbar(width=.1, aes(ymin=Yield-SE(Plants.means$Yield), ymax=Yield+SE(Plants.means$Yield))) +
geom_point(shape=21, size=3, fill="white") +
ylim(0,1750) 
```

我还想将误差线更改为代表 95% CI 而不是 SE。

Treat 是分类 rootpath 是分类 LWP_meas2 是连续的

![在此处输入图像描述](../Images/ecdb61a37212a087a3ea82a711f26c4c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:19:46.413

正如本所说，您可能想要这样的东西（由于没有提供数据，因此必须未经测试：

```
with( Plants.means,
               errbar(x =Treat, y = LWP_Meas2, 
                                yplus =  LWP_Meas2 + SE( LWP_Meas2), 
                                yminus = LWP_Meas2 - SE( LWP_Meas2), 
       add=T,na.rm=TRUE, col=c("blue", "hotpink"))
      ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:44:37.490

```
error <- function(x)(qt(0.975,df=length(x)-1)*sd(x)/sqrt(length(x)))

ggplot(Plants.means,aes(x=Treat, y=Yield, colour=rootpatH, group=rootpatH)) +
geom_errorbar(aes(ymin=Yield-error(Plants.means$Yield),ymax=Yield+error(Plants.means$Yield)), colour="black",width=.1, position=pd) +
geom_point(position=pd, size=4) 
```

# c# - 使用 FlipView 进行捏合和缩放的简单相册

> ID：14667556
> 
> 赞同：1
> 
> 时间：2013-02-02T23:12:18.133
> 
> 标签：c#, xaml, microsoft-metro, windows-store-apps, .net-4.5

我正在尝试使用 Flip View 创建一个简单的相册（Windows Store App）。

我在 ScrollViewer 中嵌入了 Image 元素。我可以浏览照片，但我想做以下事情。

*   图像应该均匀地填充屏幕的高度[当图像未缩放时]。我得到几个项目的垂直滚动条。当所有图像的高度相同时，我没有这个问题。
*   当我改变屏幕的方向时，图像的一部分被剪裁在右侧。
*   当我在页面之间移动时，滚动查看器应该忘记缩放级别（将缩放系数重置为 1）。

这是我现在拥有的代码。我究竟做错了什么？我应该在 EventHandler 中添加什么来重置 ScrollViewer 的缩放因子。

```
<FlipView 
    Name="MainFlipView"
    Margin="0"
    Height="{Binding ActualHeight, ElementName=pageRoot, Mode=OneWay}"
    Width="{Binding ActualWidth, ElementName=pageRoot, Mode=OneWay}"
    Background="Black">
         <FlipView.ItemTemplate>
              <DataTemplate>
                  <ScrollViewer Name="myScrollViewer" ZoomMode="Enabled"
                                Height="{Binding ActualHeight, ElementName=pageRoot, Mode=OneWay}"
                                Width="{Binding ActualWidth, ElementName=pageRoot, Mode=OneWay}"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                HorizontalScrollBarVisibility="Auto"
                                VerticalScrollBarVisibility="Auto"
                                MinZoomFactor="0.5"
                                MaxZoomFactor="2.5"
                                Margin="0" >
                       <Image Source="{Binding Path=Image}"
                              Name="MainImage" Stretch="Uniform" />
                  </ScrollViewer>
            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T03:57:55.047

user2199147[所说](https://stackoverflow.com/users/2199147/user2199147)的应该解决你的第一个要点，另外两个我必须以编程方式修复，但应该注意我还必须使用`VisualTreeHelper`你必须导入的类，以及帮助我​​使用帮助器的扩展方法班级。

首先，我必须从`VisualTreeHelper`扩展中找到一个方法，它可以找到任意类型的第一个元素`FlipView`：

```
private T FindFirstElementInVisualTree<T>(DependencyObject parentElement) where T : DependencyObject
{
    if (parentElement != null)
    {
        var count = VisualTreeHelper.GetChildrenCount(parentElement);
        if (count == 0)
            return null;

        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(parentElement, i);

            if (child != null && child is T)
                return (T)child;
            else
            {
                var result = FindFirstElementInVisualTree<T>(child);
                if (result != null)
                {
                    return result;
                }
            }
        }
    }
    return null;
} 
```

**为了进入纵向模式**，我添加了一个回调处理程序，并简单地将翻转视图中的`WindowSizeChanged`所有 s 重置为默认值。`ScrollViewer`

```
private void WindowSizeChanged(object sender, Windows.UI.Core.WindowSizeChangedEventArgs e)
{
    //Reset scroll view size
    int count = MainFlipView.Items.Count;
    for(int i = 0; i < count; i++)
    {
        var flipViewItem = MainFlipView.ItemContainerGenerator.ContainerFromIndex((i));
        var scrollViewItem = FindFirstElementInVisualTree<ScrollViewer>(flipViewItem);
        if (scrollViewItem is ScrollViewer)
        {
            ScrollViewer scroll = (ScrollViewer)scrollViewItem;
            scroll.Height = e.Size.Height; //Reset width and height to match the new size
            scroll.Width = e.Size.Width;
            scroll.ZoomToFactor(1.0f);//Zoom to default factor
        }
    }
} 
```

然后在您的构造函数`Window.Current.SizeChanged += WindowSizeChanged;`中，您需要调用回调。

**现在，要将每个`ScrollViewer`回到其默认位置**，我们做了类似的过程，只有在`FlipView`更改选择时，我们只能重置`ScrollViewer`返回其默认变焦因子

```
private void FlipViewSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (sender is FlipView)
    {
        FlipView item = (FlipView)sender;
        var flipViewItem = ((FlipView)sender).ItemContainerGenerator.ContainerFromIndex(((FlipView)sender).SelectedIndex);
        var scrollViewItem = FindFirstElementInVisualTree<ScrollViewer>(flipViewItem);
        if (scrollViewItem is ScrollViewer)
        {
            ScrollViewer scroll = (ScrollViewer)scrollViewItem;
            scroll.ScrollToHorizontalOffset(0);
            scroll.ScrollToVerticalOffset(0);
            scroll.ZoomToFactor(1.0f);
        }
    }
} 
```

再一次，我们必须在构造函数中调用，看起来像`MainFlipView.SelectionChanged += FlipViewSelectionChanged;`

我知道这些方法看起来真的很笨拙和迂回，因为它们确实如此，但这对我有用，我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T12:15:47.153

尝试将滚动查看器的高度和宽度绑定更改为图像。

```
<FlipView 
    Name="MainFlipView"
    Margin="0"
    Height="{Binding ActualHeight, ElementName=pageRoot, Mode=OneWay}"
    Width="{Binding ActualWidth, ElementName=pageRoot, Mode=OneWay}"
    Background="Black">
         <FlipView.ItemTemplate>
              <DataTemplate>
                  <ScrollViewer Name="myScrollViewer" ZoomMode="Enabled"

                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                HorizontalScrollBarVisibility="Auto"
                                VerticalScrollBarVisibility="Auto"
                                MinZoomFactor="0.5"
                                MaxZoomFactor="2.5"
                                Margin="0" >
                       <Image Source="{Binding Path=Image}"
                                      Height="{Binding ActualHeight, ElementName=pageRoot, Mode=OneWay}"
                                      Width="{Binding ActualWidth, ElementName=pageRoot, Mode=OneWay}"
                                      Name="MainImage" Stretch="Uniform" />
                  </ScrollViewer>
            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-29T19:51:01.190

WinRT 的良好做法是：

**1) 为 ScrollViewer 制作附加属性，这将改变 ZoomFactor**

```
public class ScrollViewerExtension : DependencyObject
{
    public static readonly DependencyProperty ScrollViewerZoomFactorProperty = DependencyProperty.RegisterAttached(
        "ScrollViewerZoomFactor", typeof(double), typeof(ScrollViewerExtension), new PropertyMetadata(default(double), OnZoomFactorChanged));

    public static void SetScrollViewerZoomFactor(DependencyObject element, double value)
    {
        element.SetValue(ScrollViewerZoomFactorProperty, value);
    }

    public static double GetScrollViewerZoomFactor(DependencyObject element)
    {
        return (double)element.GetValue(ScrollViewerZoomFactorProperty);
    }

    private static void OnZoomFactorChanged(DependencyObject depObject, DependencyPropertyChangedEventArgs args)
    {
        if (depObject is ScrollViewer)
        {
            var scrollViewer = (ScrollViewer)depObject;
            var zoomValue = (double)args.NewValue;
            if (!Double.IsNaN(zoomValue))
                scrollViewer.ZoomToFactor((float)zoomValue);
        }
        else
        {
            throw new Exception("ARE YOU KIDDING ME ? ITS NOT SCROLLVIEWER");
        }
    }
} 
```

**2) 更换 FlipViewItem 模板**

```
<Style TargetType="FlipViewItem">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Grid Width="1040">
                    <ScrollViewer HorizontalAlignment="Stretch"
                                  HorizontalScrollBarVisibility="Auto"
                                  MaxZoomFactor="4"
                                  MinZoomFactor="1"
                                  Tag="{Binding IsSelected}"
                                  VerticalScrollBarVisibility="Auto"
                                  VerticalScrollMode="Auto"
                                  ZoomMode="Enabled"
                                  extension:ScrollViewerExtension.ScrollViewerZoomFactor="{Binding  RelativeSource={RelativeSource TemplatedParent}, Path=IsSelected, Converter={StaticResource IsSelectedToZoom}}">
                        <ContentPresenter />
                    </ScrollViewer>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**3) 创建转换器，如果未选择项目，它将更改 ScrollViewerZoomFactor 为默认值。**

```
public class IsSelectedToZoomConverter :DependencyObject, IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, string language)
    {
        var val = (bool) value;
        return val ? Double.NaN : 1.0;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

**4) FlipView 代码如下所示：**

```
<FlipView x:Name="FlipView"
          Grid.Row="5"
          Width="1040"
          MinHeight="392"
          MaxHeight="600"
          ItemsSource="{Binding Path=CurrentSession.Photos}"
          Visibility="{Binding CurrentSession.HasContent,
                               Converter={StaticResource BoolToVisibility}}">
  <FlipView.ItemContainerStyle>
    <Style TargetType="FlipViewItem">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate>
            <Grid Width="1040">
              <ScrollViewer HorizontalAlignment="Stretch"
                            HorizontalScrollBarVisibility="Auto"
                            MaxZoomFactor="4"
                            MinZoomFactor="1"
                            Tag="{Binding IsSelected}"
                            VerticalScrollBarVisibility="Auto"
                            VerticalScrollMode="Auto"
                            ZoomMode="Enabled"
                            extension:ScrollViewerExtension.ScrollViewerZoomFactor="{Binding RelativeSource={RelativeSource TemplatedParent},
                                                                                             Path=IsSelected,
                                                                                             Converter={StaticResource IsSelectedToZoom}}">
                  <ContentPresenter />
              </ScrollViewer>
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    </FlipView.ItemContainerStyle>
    <FlipView.ItemTemplate>
      <DataTemplate>
        <Image HorizontalAlignment="Stretch" Source="{Binding Path=Path}" />
      </DataTemplate>
    </FlipView.ItemTemplate>
</FlipView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:28:00.940

为什么你的 FlipViewItemTemplate 中有一个 ScrollViewer？Thie 模板将用于每个项目，因此对于您添加到项目列表的每个图像。也就是说，在模板中包含 Image 元素就足够了。这至少应该避免比屏幕大的图像的滚动条，因为然后 Stretch="Uniform" 应该处理调整大小......

# sql-server - 从 PostgreSQL 查询 SQL Server

> ID：14667557
> 
> 赞同：7
> 
> 时间：2013-02-02T23:12:29.810
> 
> 标签：sql-server, postgresql, sql-server-2008-r2, odbc, postgresql-9.2

Windows下有SQL Server 2008 R2和PostgreSQL 9.2（目前是XP SP3）。如何从 PostgreSQL 查询 SQL Server？SQL Server->PostgreSQL via Linked Server 没有问题。
搜索网络我发现[odbc_fdw](http://pgxn.org/dist/odbc_fdw/)[无法](http://www.mentby.com/Group/pgsql-general/cannot-compile-wwwfdw-foreign-data-wrapper.html)为9.2 编译。

有没有可行的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T03:27:42.833

In addition to the standard but immature SQL/MED and foreign data wrappers mentioned by @vyegorov, the traditional solution to this problem has been DBI-Link, a set of foreign data mapping functions that use Perl DBI via plperl.

[http://pgfoundry.org/projects/dbi-link/](http://pgfoundry.org/projects/dbi-link/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T23:38:09.207

有一个[SQL/MED 扩展](http://wiki.postgresql.org/wiki/SQL/MED)描述了数据库如何访问外部数据。

[PostgreSQL 通过Foreign Data Wrappers](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)支持这部分标准。链接页面描述了现在可用的所有（好吧，我想几乎所有）FDW。我认为您在 odbc_fdw 上的发现是正确的，但我承认，让 FDW 工作并不总是那么简单，尤其是在 Windows 上。

如果你熟悉 Python，你可以看看[Multicorn 。](http://multicorn.org/)

# windows - 为什么最大化的 Delphi 表格比 GetSystemMetrics 值宽和高 8 像素？

> ID：14667558
> 
> 赞同：9
> 
> 时间：2013-02-02T23:12:31.160
> 
> 标签：windows, delphi, winapi

如果我最大化 Delphi 表单的宽度和高度值是否比相应的 GetSystemMetrics SM_CXSCREEN 和 SM_CYSCREEN 大 8 个像素？

**例如：**

当我右键单击我的屏幕并获取属性时，我的屏幕分辨率为 1680 X 1050。这些与 GetSystemMetrics(SM_CXSCREEN) 和 GetSystemMetrics(SM_CYSCREEN) 返回的值相同。

当我在我的 Delphi 应用程序中最大化表单时，我得到 1688 的宽度和 1058 的高度。有 8 个像素的差异。是什么导致了这种差异？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-02T23:19:32.000

最初实现最大化窗口时，设计人员希望删除调整大小的边框。他们没有删除它们，而是决定将这些边框绘制到屏幕边缘之外，在那里它们不会被看到。因此，最大化窗口的相当令人惊讶的窗口矩形。

随着多显示器系统的出现，这种实施决策成为一个问题。到那时，有一些应用程序依赖于这种行为，因此 Windows 团队决定为了兼容性而保留这种行为。这意味着最大化的窗口会泄漏到相邻的屏幕上。随着时间的推移，窗口管理器获得了能够抑制这种泄漏的能力。

[Raymond Chen](https://stackoverflow.com/users/902497/raymond-chen)和往常一样，有一篇文章涵盖了细节：[为什么最大化的窗口有错误的窗口矩形？](http://blogs.msdn.com/b/oldnewthing/archive/2012/03/26/10287385.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T23:23:19.057

我写了一个简单的程序，它可以捕获[WM_GETMINMAXINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632626%28v=vs.85%29.aspx)。此消息允许在实际最大化发生之前修改最大化窗口的位置和大小。系统提供的默认值为：

```
Position.x: -8
Position.y: -8
Size.x: 1456 (= 8 + width of screen + 8)
Size.y: 916 (= 8 + height of screen + 8) 
```

我的屏幕分辨率是 1440x900。

看起来，Windows 在最大化之后以这样的方式定位窗口，即客户区覆盖了最多的可用空间，并且窗口的镶边隐藏在屏幕区域之外。

# java - 在外接圆的中心显示标记

> ID：14667560
> 
> 赞同：1
> 
> 时间：2013-02-02T23:12:56.020
> 
> 标签：java, android, android-mapview, itemizedoverlay

我正在尝试在**圆圈内画几个圆圈**并将它们显示在 Google 地图上。当前位置应该在所有圆圈的中心。意思是在圆圈的中间。

一切正常。但不知何故，我的标记没有显示在所有圆圈的中心。标记大小为`36 by 36`。

我尝试了一些打击和试验，但仍然是同样的问题。有什么办法可以将标记放在所有外接圆的中心？我的代码有什么问题，因为它没有显示在圆心？可能是我画圆圈的方式不对？

```
@Override
    public void onLocationChanged(Location location) {
        if (location != null) {
        GeoPoint point = new GeoPoint((int) (location.getLatitude() * 1E6),
            (int) (location.getLongitude() * 1E6));

        mapController.animateTo(point);
        mapController.setZoom(15);

        if (mapOverlay == null) {
            mapOverlay = new MapOverlay(this, R.drawable.mark_blue);

            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.add(mapOverlay);
        }

        mapOverlay.setPointToDraw(point);
        mapView.invalidate();
        }
    } 
```

下面是我的 MapOverlay 类，我在其中画圈内圈

```
class MapOverlay extends Overlay {
    private GeoPoint pointToDraw;
    int[] imageNames = new int[6];
    private Point mScreenPoints;
    private Bitmap mBitmap;
    private Paint mCirclePaint;

    public MapOverlay(GPSLocationListener gpsLocationListener, int currentUser) {
        imageNames[0] = currentUser;
        imageNames[1] = R.drawable.tenm;
        imageNames[2] = R.drawable.twentym;
        imageNames[3] = R.drawable.thirtym;
        imageNames[4] = R.drawable.fourtym;
        imageNames[5] = R.drawable.fiftym;

        mCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mCirclePaint.setColor(0x10000000);
        mCirclePaint.setStyle(Style.FILL_AND_STROKE);
        mBitmap = BitmapFactory.decodeResource(getResources(), imageNames[0]);
        mScreenPoints = new Point();
    }

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);
        mScreenPoints = mapView.getProjection().toPixels(pointToDraw, mScreenPoints);

        int totalCircle = 5;
        int radius = 40;
        int centerimagesize = 13;

        for (int i = 1; i <= totalCircle; i++) {
        canvas.drawCircle(mScreenPoints.x, mScreenPoints.y, i * radius, mCirclePaint);
        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), imageNames[i]),
            ((mScreenPoints.x) + (i * radius)), (mScreenPoints.y), null);
        }

        canvas.drawBitmap(mBitmap, (mScreenPoints.x - (centerimagesize / 2)),
            (mScreenPoints.y - (centerimagesize / 2)), null);
        super.draw(canvas, mapView, shadow);

        return true;
        }
    } 
```

下面是我的通讯器的截图，你可以清楚地看到，它不是在圆圈的中心——

![在此处输入图像描述](../Images/d2fe2fe34cb0d2ed864351dc57f2efca.png)

任何人都可以提供一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:32:39.810

在我看来，标记图形的左上角位于圆圈的中心。因此，您需要通过从左上角到标记实际点的位移来调整标记位置。我猜这将是 18 水平和 36 垂直。

# ember.js - Ember 数据和脏记录

> ID：14667571
> 
> 赞同：4
> 
> 时间：2013-02-02T23:14:40.590
> 
> 标签：ember.js, ember-data

丢弃对记录所做的更改的推荐方法是什么？

我有以下逻辑将脏记录恢复到原始状态。

```
if controller.get('isDirty')
  controller.get('content').rollback() 
```

**除非**尝试提交记录失败，否则此方法有效。

如果我尝试提交更改并且服务器以错误响应，则不再可能以这种方式回滚记录。在这种情况下，Ember Data 或 RESTAdapter 是否提供了将记录恢复到其原始状态的内置方法？

* * *

我正在使用`DS.RESTAdapter`Ember Data 修订版 11打包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:12:26.203

我发现了一些显然有效的东西，尽管我不知道为什么。这是我在模型中所做的：

```
App.User = DS.Model.extend({

  becameInvalid: function(errors) {
    this.get('transaction').rollback();
    //this.rollback(); <- This doesn't work. You get becameClean error.
  }
}); 
```

[sly7-7](https://github.com/sly7-7)对该[问题](https://github.com/emberjs/data/issues/640)的评论给了我这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:02:00.373

通过路由器中的事务创建/更新您的记录。[在此处查看](https://stackoverflow.com/questions/14633564/prevent-an-arraycontroller-from-adding-a-model-which-failed-validation/14638492#14638492)有关如何执行此操作的更多详细信息。

```
var transaction = App.store.transaction()
transaction.createRecord(App.Foo);
transaction.commit()
transaction.rollback() 
```

# android - 安卓sdk设置

> ID：14667572
> 
> 赞同：0
> 
> 时间：2013-02-02T23:14:53.947
> 
> 标签：android, intellij-idea

> **可能重复：**
> [如何为 Android 应用程序设置 IntelliJ IDEA？](https://stackoverflow.com/questions/5271182/how-do-i-set-up-intellij-idea-for-android-applications)

我只是安装 IntelliJ IDEA 社区 12。

第一次，当我创建一个 Android 时，我创建了一个新的项目 SDK。

选择项目 SDK 文件夹后，我没有找到 Java SDK。

我在哪里可以设置所有项目 SDK？我浏览了配置，找不到。

# ruby-on-rails - 嵌套表单：“除非保存父级，否则无法调用创建”错误

> ID：14667576
> 
> 赞同：0
> 
> 时间：2013-02-02T23:15:26.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model

我有一个嵌套表单，其中每个帖子都有并属于许多位置。使用嵌套表单向帖子添加位置就可以了。但是，当我单击“编辑”并更改除位置以外的任何内容时，我得到了`cannot call create unless the parent is saved`错误。

我猜这与我的模型中的一些代码有关，它贯穿`location_attributes`提交并检查它们的唯一性，但我不知道如何解决这个问题。我刚刚`@post.save!`在`find_or_initialize_by_name`控制器中尝试过，但得到了同样的错误。

代码如下。我知道这对我来说非常独特，但任何建议都会很棒！

**post_controller.rb**

```
...
def update
   location_set = params[:post].delete(:locations_attributes) unless params[:post][:locations_attributes].blank?
  @post = Post.find(params[:id])
  @post.locations = Location.find_or_initialize_location_set(location_set) unless location_set.nil?

  if @post.update_attributes(params[:post])
    redirect_to @post, notice: 'Blog post was successfully updated.'
  else
    render action: "edit"
  end
end
... 
```

**location.rb (model)** 包括 PublicActivity::Model tracked tracked owner: Proc.new{ |controller, model| 控制器.current_user }

```
include FriendlyId
friendly_id :name

after_save { |location| location.destroy if location.name.blank? }
after_save { |venue| venue.destroy if venue.name.blank? }

has_many :location_post, :order => "position"
has_many :posts, :through => :location_post, :order => 'location_posts.position'

attr_accessible :latitude, :longitude, :name, :post_id, :notes, :asset, :assets_attributes, :venues_attributes
attr_accessor :_destroy, :position, :location_post_id

def self.find_or_initialize_location_set(location_set)
  #create a locations array
  locations = []

  locations = locations.delete_if { |elem| elem.flatten.empty? }
  location_set.each do |key, location|
    if location.delete(:_destroy) == "1"
      locations.delete_if {|elem| elem[:name] == location[:name]}
    else
  locations << find_or_initialize_by_name(location)  
  #REMINDER In rails 4 this must be written as where(...).first_or_create
    end
end
locations
end 
```

**编辑 - 错误 **

```
app/models/location.rb:10:in `block in <class:Location>'
app/controllers/blogit/posts_controller.rb:97:in `update' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T15:14:02.600

这是一个愚蠢的错误造成的。

该行`after_save { |venue| venue.destroy if venue.name.blank? }`不再相关。

我是个白痴，没有正确阅读错误。感谢所有帮助过的人。

# c++ - 有没有办法将 winapi 错误标志作为字符串获取？

> ID：14667577
> 
> 赞同：0
> 
> 时间：2013-02-02T23:15:29.630
> 
> 标签：c++, winapi, error-code

我的意思是这些： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms681382 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx)

以下是每个错误的三个数据：

```
0 (0x0)
ERROR_SUCCESS
The operation completed successfully.

1 (0x1)
ERROR_INVALID_FUNCTION
Incorrect function.

2 (0x2)
ERROR_FILE_NOT_FOUND
The system cannot find the file specified. 
```

因此，错误号是从 GetLastError() 返回的，我也知道如何使用 FormatMessage [http://msdn.microsoft.com/en-us/library/windows/desktop/ms679351(v=vs.85)获取描述.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679351(v=vs.85).aspx)。但我的问题是如何获取这些错误标志：ERROR_INVALID_FUNCTION, ERROR_FILE_NOT_FOUND - 作为字符串。我知道我可以自己创建一个地图，但我想知道这些是否还没有像错误描述一样存储在 Windows 中的某个位置。

[OT] 这里是错误描述的片段。

```
char *err_msg;
int num_chars = FormatMessage(
  FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM,
  NULL,
  errCode,
  MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), // default language
  (LPTSTR) &err_msg,
  0,
  NULL
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T18:20:55.470

Windows 中没有内置这样的方法。

#define 标识符特定于 C 和 C++ 语言，不用于例如 C#。另一件需要注意的是，根据所使用的 API，对于相同的错误代码可以有多个不同的#define，例如 ERROR_INVALID_HANDLE (Win32) 和 WSA_INVALID_HANDLE (Winsock)。

# python - 检查python列表中是否已经存在一个数字

> ID：14667578
> 
> 赞同：36
> 
> 时间：2013-02-02T23:15:39.850
> 
> 标签：python, list, data-structures, set, append

我正在编写一个 python 程序，我将在其中将数字附加到一个列表中，但我不希望列表中的数字重复。那么如何在我做之前检查一个号码是否已经在列表中`list.append()`？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-02T23:18:47.700

你可以做

```
if item not in mylist:
     mylist.append(item) 
```

但是你真的应该使用一个集合，像这样：

```
myset = set()
myset.add(item) 
```

**编辑：**如果顺序很重要但您的列表非常大，您可能应该同时使用列表*和*集合，如下所示：

```
mylist = []
myset = set()
for item in ...:
    if item not in myset:
        mylist.append(item)
        myset.add(item) 
```

这样，您可以快速查找元素是否存在，但您可以保持排序。如果您使用简单的解决方案，您将获得 O(n) 的查找性能，如果您的列表很大，这可能会很糟糕

或者，正如@larsman 指出的那样，您可以使用 OrderedDict 达到相同的效果：

```
from collections import OrderedDict

mydict = OrderedDict()
for item in ...:
    mydict[item] = True 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-02T23:17:42.770

如果您想在列表中拥有独特的元素，那么为什么不使用集合，当然，如果顺序对您来说并不重要：-

```
>>> s = set()
>>> s.add(2)
>>> s.add(4)
>>> s.add(5)
>>> s.add(2)
>>> s
39: set([2, 4, 5]) 
```

如果订单是一个问题，那么您可以使用：-

```
>>> def addUnique(l, num):
...     if num not in l:
...         l.append(num)
...     
...     return l 
```

您还可以找到一个配方，在[Python 文档](http://docs.python.org/2/library/collections.html)[`OrderedSet`](http://code.activestate.com/recipes/576694/)中提到

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T00:27:29.247

如果您希望您的数字按升序排列，您可以将它们添加到一个集合中，然后将该集合排序到一个升序列表中。

```
s = set()
if number1 not in s:
  s.add(number1)
if number2 not in s:
  s.add(number2)
...
s = sorted(s)  #Now a list in ascending order 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T23:17:45.953

您可能可以改用 set 对象。只是`add`数字到集合。它们本质上不会复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-21T13:29:31.600

要检查一个数字是否在列表中，可以使用`in`关键字。

让我们创建一个列表

```
exampleList = [1, 2, 3, 4, 5] 
```

现在让我们看看它是否包含数字 4：

```
contains = 4 in exampleList

print(contains)
>>>> True 
```

当您想在元素不在列表中时追加时，`not in`也可以提供帮助

```
exampleList2 = ["a", "b", "c", "d", "e"]

notcontain = "e" not in exampleList2

print(notcontain)
>>> False 
```

但是，正如其他人所提到的，您可能需要考虑使用不同的数据结构，更具体地说，[`set`](https://docs.python.org/3/tutorial/datastructures.html#sets). 请参见下面的示例（[来源](https://docs.python.org/3/tutorial/datastructures.html#sets)）：

```
basket = {'apple', 'orange', 'apple', 'pear', 'orange', 'banana'}
>>> print(basket)                      # show that duplicates have been removed
{'orange', 'banana', 'pear', 'apple'}

'orange' in basket                 # fast membership testing
True

'crabgrass' in basket
False

# Demonstrate set operations on unique letters from two words
...
a = set('abracadabra')
b = set('alacazam')
a                                  # unique letters in a
>>> {'a', 'r', 'b', 'c', 'd'}

a - b                              # letters in a but not in b
>>> {'r', 'd', 'b'}

a | b                              # letters in a or b or both
>>> {'a', 'c', 'r', 'd', 'b', 'm', 'z', 'l'}

a & b                              # letters in both a and b
>>> {'a', 'c'}

a ^ b                              # letters in a or b but not both
>>> {'r', 'd', 'b', 'm', 'z', 'l'} 
```

# mysql - 为什么 SQL Server 不支持 LIMIT 子句？

> ID：14667580
> 
> 赞同：-3
> 
> 时间：2013-02-02T23:15:42.970
> 
> 标签：mysql, sql, sql-server, oracle, postgresql

通过使用 LIMIT x,y 子句，使用 mysql 或 postgresql 很容易进行分页。但是，Oracle 或 MSSQL 不支持它。关于为什么的任何见解？

我不是要求替代品，我知道它们（顺便说一句，SQL-SERVER 的 TOP 功能不提供相同的功能）。我想知道是否有任何技术或许可原因，为什么 LIMIT x,y 子句对 Web 开发（分页）非常有用，并且在 MySQL 和 PostgreSQL 中具有非常干净和简单的语法，并且具有复杂的语法，有时涉及子查询, 在其他 RDBMS 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:17:09.527

`MS SQL Server`有`TOP (n)`子句。因为`Oracle`你可以使用`ROWNUM`. 示例来自`SQL Server`

```
SELECT TOP 5 * FROM Table 
```

您也可以将其与`ORDER BY clause`as一起使用

```
SELECT TOP 5 * FROM Table ORDER BY col1 
```

从`Oracle`

```
SELECT * FROM Table WHERE ROWNUM <= 5 
```

也为`Oracle`

```
SELECT * FROM 
(SELECT * FROM Table ORDER BY col1) A WHERE ROWNUM <= 5 
```

# c# - 如何使用数据网格进行搜索

> ID：14667581
> 
> 赞同：-3
> 
> 时间：2013-02-02T23:15:44.850
> 
> 标签：c#, datagridview

我想在按下搜索按钮时从文本框中获取字符串，然后我希望突出显示放置该数据网格的行。我相信这是可能的。我不知道如何做到这一点。请帮帮我。

```
string query = " SELECT * FROM suboffice where so_id like '%" + sor_id.Text + "%' ";
            SqlConnection objConn = new SqlConnection(connectionString);
            objConn.Open();
            SqlDataAdapter   subofficeTableAdapter1 =new SqlDataAdapter(query,objConn);
            SqlCommandBuilder cBuilder = new SqlCommandBuilder(subofficeTableAdapter1);
            DataTable dTable = new DataTable();
            subofficeTableAdapter1.Fill(dTable);
            dataGridView1.DataSource = dTable;
            subofficeTableAdapter1.Update(dTable); 
```

当我在运行时将任何内容放入其中时，sor 是一个搜索选项卡，我的数据网格视图被更新。这个程序是用c#制作的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:06:27.977

如果您使用的是 Windows 窗体，这里是一个开始。如果您要实现某种功能，例如“查找下一个”、“查找上一个”、“查找全部”等，您可能需要根据您的目的修改代码。

下面假设您有一个名为 SearchButton 的 Button、一个名为 SearchTextBox 的文本框和一个名为 MyDataGridView 的 DataGridView。以下代码将在您的搜索按钮的单击事件中。

```
 private void SearchButton_Click(object sender, EventArgs e)
    {
        MyDataGridView.ClearSelection(); //this will clear any currently selected cells
        string searchstring = SearchTextBox.Text;
        foreach (DataGridViewRow r in MyDataGridView.Rows)
            foreach (DataGridViewCell c in r.Cells)
            if (c.Value.ToString().Contains(searchstring))
            {
                r.Selected = true; //this will highlight the entire row
                break; //if you want to "Select All" that are found, take this line out
            }
    } 
```

# api - 来自 Twitter API 的 oauth 令牌的最大长度是多少？

> ID：14667585
> 
> 赞同：2
> 
> 时间：2013-02-02T23:16:01.973
> 
> 标签：api, twitter, oauth

我需要存储每个授予访问我的网络应用程序的用户的 oauth_token 和 oauth_token_secret 并且我想知道这些令牌是否有最大长度以便我可以使用`varchar(n)`. 我知道 Facebook 是 255。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T23:56:19.387

查看这个 Quora 线程：[http ://www.quora.com/OAuth-1/Whats-the-maximum-length-of-an-OAuth-access-token-key-secret-pair](http://www.quora.com/OAuth-1/Whats-the-maximum-length-of-an-OAuth-access-token-key-secret-pair)

摘要：对于 Oauth 令牌/秘密的长度显然没有官方限制，但似乎 Twitter 使用了 50 个字符的内部限制。

我的建议：不要限制大小。使用“varchar”（不带数字）。

# algorithm - 任何最先进的最大流量算法是否实用？

> ID：14667586
> 
> 赞同：4
> 
> 时间：2013-02-02T23:16:15.270
> 
> 标签：algorithm, graph, mathematical-optimization, max-flow, network-flow

对于[最大流量问题](http://en.wikipedia.org/wiki/Maximum_flow_problem)，似乎有许多非常复杂的算法，至少有一种算法是在去年才开发出来的。Orlin 的[Max 在 O(mn) 时间或更短的时间内流动，](http://jorlin.scripts.mit.edu/docs/papersfolder/O%28nm%29MaxFlow.pdf "O(mn) 时间内的最大流量或更好")给出了在 O(VE) 中运行的算法。

另一方面，我最常看到实现的算法是（我并没有声称已经进行了详尽的搜索；这只是偶然的观察）：

*   埃德蒙兹-卡普，O(VE^2)
*   Push-relabel, O(V^2 E), or O(V^3) 使用 FIFO 顶点选择
*   Dinic 算法，O(V^2 E)

具有更好渐近运行时间的算法对于现实世界中的问题规模是否不实用？另外，我看到很多算法都涉及“动态树”；这些曾经在实践中使用过吗？

# spring - NoUniqueBeanDefinitionException 即使没有找到重复项

> ID：14667589
> 
> 赞同：5
> 
> 时间：2013-02-02T23:17:18.260
> 
> 标签：spring, spring-mvc

SpringMVC 应用程序使用最新的 jars。花了很长时间试图找出这篇文章失败的问题。感谢您是否可以回复是否有人遇到此问题

错误堆栈

```
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from ServletContext resource [/WEB-INF/spring/appServlet/servlet-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
Feb 2, 2013 6:07:17 PM org.apache.catalina.core.ApplicationContext log
SEVERE: StandardWrapper.Throwable
java.lang.NoClassDefFoundError: org/springframework/beans/factory/NoUniqueBeanDefinitionException
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:106)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:617)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1274)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1081)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5033)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5320)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.springframework.beans.factory.NoUniqueBeanDefinitionException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 30 more
Feb 2, 2013 6:07:17 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /springmvc threw load() exception
java.lang.ClassNotFoundException: org.springframework.beans.factory.NoUniqueBeanDefinitionException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:159)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:106)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:617)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1274)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1081)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5033)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5320)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

context.xml 文件。

```
 <?xml  version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:jee="http://www.springframework.org/schema/jee"
        xmlns:lang="http://www.springframework.org/schema/lang"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:util="http://www.springframework.org/schema/util"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
            http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

        <context:annotation-config />
        <context:component-scan base-package="com.srisris.springmvc" />

        <bean id="jspViewResolver"
            class="org.springframework.web.servlet.view.InternalResourceViewResolver">
            <property name="viewClass"
                value="org.springframework.web.servlet.view.JstlView" />
            <property name="prefix" value="/WEB-INF/jsp/" />
            <property name="suffix" value=".jsp" />
        </bean>

        <bean id="messageSource"
            class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
            <property name="basename" value="classpath:messages" />
            <property name="defaultEncoding" value="UTF-8" />
        </bean>
        <bean id="propertyConfigurer"
            class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
            p:location="/WEB-INF/jdbc.properties" />

        <bean id="dataSource"
            class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
            p:driverClassName="${jdbc.driverClassName}"
            p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
            p:password="${jdbc.password}" />

        <bean id="sessionFactory"
            class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="configLocation">
                <value>classpath:hibernate.cfg.xml</value>
            </property>
            <property name="configurationClass">
                <value>org.hibernate.cfg.AnnotationConfiguration</value>
            </property>
            <property name="hibernateProperties">
                <props>
                    <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                    <prop key="hibernate.show_sql">true</prop>
                </props>
            </property>
        </bean>

        <tx:annotation-driven />

        <bean id="transactionManager"
            class="org.springframework.orm.hibernate3.HibernateTransactionManager">
            <property name="sessionFactory" ref="sessionFactory" />
        </bean>

    </beans> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-02T23:29:17.073

它不是`NoUniqueBeanDefinitionException`被抛出，它是：

```
ClassNotFoundException: org.springframework.beans.factory.NoUniqueBeanDefinitionException 
```

请添加[`spring-beans-3.2.1.RELEASE.jar`](http://repo1.maven.org/maven2/org/springframework/spring-beans/3.2.1.RELEASE/spring-beans-3.2.1.RELEASE.jar)到您的 CLASSPATH 中。请注意，这个类是在 3.2.1 版本中引入的（目前最新鲜）。确保所有 Spring JAR 都在同一个版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T12:47:29.237

我在本地运行时遇到了同样的异常[`spring petclinic sample`](https://github.com/SpringSource/spring-petclinic "春季宠物诊所 github 项目")。

浏览我发现的问题后[`this one : issue 28`](https://github.com/SpringSource/spring-petclinic/issues/28 "spring-petclinic/issues/28 关闭")

解决方案是使用 maven3^([`doc`](http://www.mkyong.com/maven/how-to-install-maven-in-ubuntu/ "如何在 Ubuntu 上安装 maven 3"))而不是 maven2 ！

希望这能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T12:46:01.323

我遇到了相同的异常（`org/springframework/beans/factory/NoUniqueBeanDefinitionException`），它通过添加以下 maven 依赖项来解决`spring-beans.3.2.2.RELEASE`

[在此链接中，您将找到更多数据](https://stackoverflow.com/questions/15921641/java-lang-noclassdeffounderror-org-springframework-beans-factory-nouniquebeande)

# ios - 通过 cocoapods 的 Restkit 无法在新项目上构建，未找到 RKLog

> ID：14667599
> 
> 赞同：1
> 
> 时间：2013-02-02T23:18:20.603
> 
> 标签：ios, ios6, restkit, cocoapods

我第一次尝试通过 CocoaPods 在一个全新的项目中使用 Restkit，但是一旦引入了 Restkit，我在构建项目时遇到了一些问题：

![在此处输入图像描述](../Images/a6afb479fe53cb2be6b8cc8167da98ce.png)

我已遵循以下确切步骤：

1.  创建了一个全新的 Xcode 项目，默认选项。
2.  创建了一个包含以下内容的 podfile：

    平台 :ios, '6.1' pod 'RestKit/Testing', '~> 0.20.0pre' pod 'RestKit/Search', '~> 0.20.0pre'

3.  运行`pod install`然后打开工作区

4.  [按照此处](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-v0.20.x-via-CocoaPods)的说明更新了前缀文件。

我正在运行这些版本，根据 Restkit 文档均有效：

*   Git 版本 1.8.1.2
*   CocoaPods 0.16.2
*   Xcode 4.6

谁能建议我可能做错了什么，或者我能做些什么来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:29:07.220

您还必须包括 Restkit 的基础。添加

```
pod 'RestKit', '~> 0.20.0pre' 
```

到你的 Podfile。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T23:02:33.503

[找到了此处描述的解决方案](https://github.com/RestKit/RestKit/issues/832)。

它涉及在项目中搜索 #import 并将其替换为 #import 。项目编译！

```
//#import <RestKit/RestKit.h>
#import <RestKit/CoreData.h> 
```

在这种情况下，有问题的文件是`RKOperationStateMachine`

# coordinates - 如何获取对象在另一个对象的坐标系中的位置 THREE.js

> ID：14667602
> 
> 赞同：1
> 
> 时间：2013-02-02T23:19:05.263
> 
> 标签：coordinates, three.js, webgl

我创建了一个 THREE.Scene，在场景中有一个 THREE.Object3D()，它是一个新的“坐标系”。在这个物体内部有一个具有特定位置的粒子。我知道从对象的“坐标系”获取这个粒子的位置到场景的“坐标系”需要以下内容

```
//Gives particle position in scene coordinates
particle.position.applyMatrix4(Object.matrixWorld) 
```

但是，逆变换会是什么？

（又名，粒子在场景的“坐标系”中，我想找到它在对象“坐标系”中的位置）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T00:39:26.600

您提到的变换的逆变换可以这样计算：

```
var mInverse = new THREE.Matrix4().getInverse( object.matrixWorld );
particle.position.applyMatrix4( mInverse ); 
```

三.js r.55

# layout - UICollectionView 自定义布局

> ID：14667608
> 
> 赞同：2
> 
> 时间：2013-02-02T23:19:40.083
> 
> 标签：layout, ios6, uicollectionview

嗨，我正在开始 iOS 开发，并且正在玩 UICollectionView。我只是想知道如何实现这种类型的布局。如下图所示： 这个想法是在大单元格中拥有一条主要的新闻文章。只是混淆了我如何在第二列中获得两个单元格。非常感激！

![UICollectionView 布局](../Images/5c55050c73a9634ed2f6d98ed2825319.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:13:43.540

创建自定义类，它将作为您的集合视图的布局。这个类将是 UICollectionViewFlowLayout 的子类。

然后您可以覆盖以下两种方法，并可以根据需要创建自己的自定义布局。

```
 - (NSArray*)layoutAttributesForElementsInRect:(CGRect)rect
  - (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)path 
```

UICollectionViewLayoutAttributes 是处理单元格位置、框架、Zindex 等的类

您还可以使用以下属性。

```
 collectionView:layout:minimumInteritemSpacingForSectionAtIndex:
 collectionView:layout:minimumLineSpacingForSectionAtIndex: 
```

# iphone - ARC 在块内捕获 self... 块并在执行前释放引用

> ID：14667610
> 
> 赞同：1
> 
> 时间：2013-02-02T23:19:53.943
> 
> 标签：iphone, ios, ipad, objective-c-blocks

我有这个问题：块内的块。

```
 self.createStuff = ^ (NSString *text) {       
        self.post.onCompletion = ^(NSURLResponse *response, NSData *data, NSError *error){
                [self doStuff];  // error here
        };
        [self doMoreStuff];  // error here
  }; 
```

我会在 [self doStuff] 和 [self doMoreStuff] 中出现错误。错误是**在此块中强烈捕获“自我”可能导致保留周期**

你说的简单，只需添加

```
id mySelf = self; 
```

在第一个块之前并使用 mySelf 代替。

没有。这不会解决我的问题，仅仅是因为 mySelf 是一种 id 不会给我第二行需要的 post 属性。所以我需要像这样声明它

```
MyClass *mySelf = self; 
```

使它像：

```
MyClass *mySelf = self;

  self.createStuff = ^ (NSString *text) {       
        mySelf.post.onCompletion = ^(NSURLResponse *response, NSData *data, NSError *error){
                [self doStuff];  // error here
        };
        [mySelf doMoreStuff];  
  }; 
```

好的，你说，现在 self.post.onCompletion 行和 doMoreStuff 不再抱怨了，但是我们在 onCompletion 内还有另一个 self... 因为这是块内的块。我可以重复创建另一个弱引用的过程，这必须是对弱引用的弱引用

```
MyClass *internalMyself = mySelf; 
```

并使用

```
 [internalMyself doStuff]; 
```

在我看来，这似乎是一种非常可悲的方法，而且当此方法运行时，应用程序会挂起。在方法执行之前，像引用这样的东西正在被释放......

我该如何解决这个字谜？

谢谢。

* * *

注意：这是正在编译到 iOS 6+

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T23:36:01.347

你很接近。只需更换您的解决方案

```
MyClass *mySelf = self;

self.createStuff = ^ (NSString *text) {       
     mySelf.post.onCompletion = ^(NSURLResponse *response, NSData *data, NSError *error) {
          [self doStuff];  // error here
     };
     [mySelf doMoreStuff];  
}; 
```

和

```
__weak MyClass *mySelf = self;

self.createStuff = ^ (NSString *text) {       
     mySelf.post.onCompletion = ^(NSURLResponse *response, NSData *data, NSError *error) {
          [self doStuff];  // error here
     };
     [mySelf doMoreStuff];  
}; 
```

第一个解决方案的问题`mySelf`是没有指定`weak`，所以它的所有权限定符是隐式的`__strong`（[参见 LLVM 的文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#property-declarations)）。我不确定为什么这会消除第一个块中的警告，但指定引用`__weak`将完全删除保留周期。

# python - 在 CSV 文件中获取特定范围的数据（Python）

> ID：14667612
> 
> 赞同：1
> 
> 时间：2013-02-02T23:20:09.473
> 
> 标签：python, csv, dictionary

基本上，我在这里要做的是读取特定范围的数据（例如，10,000 个值），看看它是否包含我正在寻找的匹配项。如果它不包含该匹配项，那么它会抛出这些值并取下一个 10,000。

例如，如果我有 MD5 哈希“fac2a47adace059aff113283a03f6760”（其值为堆栈），我将从 CSV 文件中加载 10,000 个值并检查该行中的 MD5 哈希是否与我给定的哈希匹配。如果是，那么我打印出该行逗号后面的值，如果不是，则将这 10,000 个值从内存中抛出，然后取出 10,000 个值，直到我得到一个值。

对此的道歉有点不清楚......我想不出一种清晰的解释方式。我目前的处理方法是通过 JSON 将包含所有字符组合（最多 5 个）的字典转储到文本文件中，然后将其加载回内存中进行搜索，这不适用于 5 个字符（引发 MemoryError） .

提前感谢您的帮助，如果您需要澄清，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:17:09.137

假设匹配行看起来像'fac2a47adace059aff113283a03f6760,stack'，你基本上想要这样做：

```
for row in csv.reader(csvfile):
    if row[0] == "fac2a47adace059aff113283a03f6760":
        print row[1]
        break 
```

如果您的哈希不在第一列或您的预哈希值不在第二列，请将 [0] 和 [1] 调整为正确的索引。

# scroll - mootools 可滚动不起作用

> ID：14667613
> 
> 赞同：0
> 
> 时间：2013-02-02T23:20:16.967
> 
> 标签：scroll, mootools

我在我的页面上使用了 mootools 可滚动（[http://mootools.net/forge/p/scrollable](http://mootools.net/forge/p/scrollable)），但它不起作用。我的页面： http: [//neyriz.net/moo/](http://neyriz.net/moo/) 我将它用于 id="right" 的 div 为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:23:19.923

你犯了2个错误。第一个是您尝试在 DOM 准备好之前实例化 Scrollable，因此您的元素不存在。因此，您必须将脚本标签移动到正文的末尾，或者将其包装在事件侦听器中。IE：

```
window.addEvent('domready', function() {
    var myScrollable = new Scrollable($('right'));
}); 
```

第二个问题是插件有一些依赖。在这种情况下，您需要更多地包括 MooTools 中的 Slider、Element.Measure、Element.Shortcuts。您可以访问[http://mootools.net/more/](http://mootools.net/more/)并选择这 3 个模块。下载文件并将其包含在 mootools-core 和可滚动之间：

```
<script type="text/javascript" src="mootools-core.js"></script>
<script type="text/javascript" src="mootools-more.js"></script> INSERT MOOTOOLS MORE HERE!
<script type="text/javascript" src="scrollable.js"></script> 
```

一般来说，在正文之前定义和加载 JS 文件会更好。所以它看起来像：

```
<html>
    <head><title>My awesome page</title></head>
    <body>
        <h1>My awesome page</h1>
        <p>Some text</p>
        <script type="text/javascript" src="mootools-core.js"></script>
        <script type="text/javascript" src="mootools-more.js"></script> INSERT MOOTOOLS MORE HERE!
        <script type="text/javascript" src="scrollable.js"></script>
    </body>
</html> 
```

# c++ - 从字节到十六进制的令人困惑的基本转换

> ID：14667614
> 
> 赞同：2
> 
> 时间：2013-02-02T23:20:48.383
> 
> 标签：c++, qt, pointers

我在处理这段代码时遇到了一些问题。QByteArray::number 应该从哈希中获取 QByteArray 并将其转换为十六进制，但结果比我预期的要短得多。我在想两个输出应该是一样的。我认为这与指针转换有关，但我不明白该转换做得好到足以看到如何进行价值。

**谁能解释为什么这两行输出不同的结果？最好在数学方面。**

代码

```
QCryptographicHash hash(QCryptographicHash::Sha1);
hash.addData("some string to hash");
qDebug() << QByteArray::number(*(qlonglong*)hash.result().data(), 16);
qDebug() << hash.result().toHex(); 
```

输出：

```
"89bde3ca56c83c47" 
"473cc856cae3bd89e43ff9f62963d6f38372ccbd" 
```

预期输出：

```
"473cc856cae3bd89e43ff9f62963d6f38372ccbd" 
"473cc856cae3bd89e43ff9f62963d6f38372ccbd" 
```

注意：我的实际问题是以 36 为基数，而不是 16，但是有一个方便的 .toHex 方法可以使这更容易显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T00:07:27.577

在您的 160 位（20 字节）数据处的代码`hash.result().data()`点。A`qlonglong`是您平台上的 64 位（8 字节）数据。

`*(qlonglong*)hash.result().data()`将哈希结果的前 8 个字节重新解释为数字。您的平台是一个小端平台，因此哈希数据的第一个字节被解释为结果数字的低字节。

因此，64 位数字（以十六进制形式查看）以相反的顺序显示哈希数据的前 8 个字节。您可以在输出中看到：

```
89 bd ... 3c 47 
```

是初始部分的倒数

```
47 3c ... bd 89    e4 3f ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-02T23:54:22.917

You're essentially casting a `string` (as a `const char*`) to a `long long*`, then dereferencing it, and giving whatever numeric value you get back to the constructor of `QByteArray`. Without using `qt` classes, you're doing this:

```
std::string s = "1b3";
const char* cc = s.c_str();

std::cout<<cc<<std::endl;
std::cout<<*(long long*)cc<<std::endl; 
```

Do you get the same string back? No, you do not.

```
output:
1b3
3367473 
```

It isn't a math thing... it's a problem with casting a `char*` to a `long long*` and expecting to have a valid numeric value as a result.

# java - 如何将此代码移植到 Java？

> ID：14667615
> 
> 赞同：-3
> 
> 时间：2013-02-02T23:20:48.687
> 
> 标签：java, networking, udp, protocols, sliding-window

我正在实现 2 个使用滑动窗口协议作为数据链路协议和 UDP 套接字进行通信的应用程序。我正在尝试使用 Tanembaum 的书作为参考来实现滑动窗口协议。这是我在书中找到的代码。

```
/* Protocol 4 (sliding window) is bidirectional and is more robust than protocol 3\. */

    #define MAX_SEQ 1   /* must be 1 for protocol 4 */
    typedef enum {frame_arrival, cksum_err, timeout} event_type;
    #include "protocol.h"

    void protocol4 (void)
    {
    seq_nr next_frame_to_send;  /* 0 or 1 only */
    seq_nr frame_expected;  /* 0 or 1 only */
    frame r, s; /* scratch variables */
    packet buffer;  /* current packet being sent */
    event_type event;

    next_frame_to_send = 0; /* next frame on the outbound stream */
    frame_expected = 0; /* number of frame arriving frame expected */
    from_network_layer(&buffer);    /* fetch a packet from the network layer */
    s.info = buffer;    /* prepare to send the initial frame */
    s.seq = next_frame_to_send; /* insert sequence number into frame */
    s.ack = 1 - frame_expected; /* piggybacked ack */
    to_physical_layer(&s);  /* transmit the frame */
    start_timer(s.seq); /* start the timer running */

    while (true) {
    wait_for_event(&event); /* could be: frame_arrival, cksum_err, timeout */
    if (event == frame_arrival) { /* a frame has arrived undamaged. */
            from_physical_layer(&r);    /* go get it */

            if (r.seq == frame_expected) {
                    /* Handle inbound frame stream. */
                    to_network_layer(&r.info);  /* pass packet to network layer */
                    inc(frame_expected);    /* invert sequence number expected next */
            }

            if (r.ack == next_frame_to_send) { /* handle outbound frame stream. */
                    from_network_layer(&buffer);    /* fetch new packet from network layer */
                    inc(next_frame_to_send);    /* invert sender's sequence number */
            }
    }

    s.info = buffer;    /* construct outbound frame */
    s.seq = next_frame_to_send; /* insert sequence number into it */
    s.ack = 1 - frame_expected; /* seq number of last received frame */
    to_physical_layer(&s);  /* transmit a frame */
    start_timer(s.seq); /* start the timer running */
  }
  } 
```

我把它翻译成java有点困惑。我不知道线程是如何在这里应用的。我正在寻找任何可以帮助我实现这一点的提示和策略。

编辑

我最困惑：

*   在实现函数 wait_for_event() 和 start_timer() 时。
*   我应该把 UDP 套接字部分放在哪里？我认为 UDP 套接字部分在 to_physical_layer() 和 from_physical_layer() 内。如果我错了，请纠正。
*   由于协议是双向的，两个应用程序是否应该具有相同的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:47:02.073

> 在实现函数 wait_for_event() 和 start_timer() 时。

你不需要它们。分别使用`DatagramSocket.setSoTimeout()`和`catch (SocketTimeoutException)`。

> 我应该把 UDP 套接字部分放在哪里？我认为 UDP 套接字部分在 to_physical_layer() 和 from_physical_layer() 内。如果我错了，请纠正。

`recv()`与现在和`send()`电话相同的地方。

> 由于协议是双向的，两个应用程序是否应该具有相同的代码？

是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:20:30.197

首先：在将时间和精力投入到 UDP 之上的滑动窗口层之前，请检查您是否需要这种奇特的解决方案。TCP 已经在做这种事情，许多人已经投入了大量时间来使其正确和强大。但是当然有充分的理由来实施这样的解决方案。下一步应该是谷歌，可能已经有几十个非常相似的程序了。尤其是因为您似乎对 Java 的网络 API 没有太多经验，所以从一段 Java 代码开始可能比从一本更适合学习人际网络概念的书中的示例开始更有效率。

无论如何，如果你想重新实现上面的协议，首先阅读[DatagramSocket](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html)类的 Javadoc。它有一个[setSoTimeout](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html#setSoTimeout%28int%29)方法，可以替换上面代码中的计时器，主要区别在于[接收](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html#receive%28java.net.DatagramPacket%29)超时时 会抛出 SocketTimeoutException，这可能会使您的程序流程稍微复杂化。忘记 from_physical 和 to_physical 位，所有这些东西都由 Socket 类包装。

# node.js - socket.connect 上的 NodeJS errno 37

> ID：14667617
> 
> 赞同：3
> 
> 时间：2013-02-02T23:21:08.257
> 
> 标签：node.js, sockets, connect

我正在尝试连续连接到多个主机，这是将 ip 地址和 socket.connect() 解析为每个域名（行 [1]）的代码。这可以自行运行，但在与不同主机快速连续运行时会返回 errno 37 错误。我对错误的最佳信息是：

“代码：'EPROTO'，描述：'协议错误'”

代码：

```
$.connect(port, line[1], function() {
  this.write(request);   
}); 
```

错误：

```
{ [Error: connect Unknown system errno 37]
  code: 'Unknown system errno 37',
  errno: 'Unknown system errno 37',
  syscall: 'connect' } 
```

我该如何解决这个问题/为什么会这样？

提前致谢。

编辑：删除手动 dns 查找代码并添加错误报告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T21:53:12.183

[与https://stackoverflow.com/questions/14672743/nodejs-crash-when-calling-socket-connect-in-quick-succession](https://stackoverflow.com/questions/14672743/nodejs-crash-when-calling-socket-connect-in-quick-succession)重复

在我看来，快速连续打开套接字是自找麻烦。

尝试在打开套接字之间等待，并根据需要等待的时间进行游戏。

# javascript - 内容更改时jquery刷新div

> ID：14667619
> 
> 赞同：0
> 
> 时间：2013-02-02T23:21:50.967
> 
> 标签：javascript, jquery

我有 index.php 和 images.php。我想要的是 index.php 上的某个 div 自动从 images.php 获取它的内容，并在 images.php 上出现新内容时刷新。我目前有这个：

```
$(document).ready(function() {
$.ajaxSetup({ cache: false });
setInterval(function() {
    $('#images').load('images.php');
}, 500);
}); 
```

这工作正常，但它每 .5 秒刷新一次 div，这是我不想要的，我希望它检测何时将新内容插入到 images.php 中，然后将其加载。

但问题是，在 images.php 上我有一些时间戳（1 分钟前等）。jQuery 会将这些检测为更改，然后刷新。

有没有办法统计`<img>`images.php页面上的图片标签（索引.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:37:15.783

```
var imageWrapper = $('#images'),
    imageCount = $imageWrapper.find('img').length;

setInterval(function() {
    $.get('images.php', function (html) {
        html = $(html);
        if ( html.find('img').length > imageCount ) {
            $imageWrapper.html( html );
        }
    });
}, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:31:30.420

最简洁的答案是不。

你应该明白，你的代码有服务器端和客户端。每当浏览器发送请求时，它都会获得一个格式化的 html 页面（不是要执行的 php 脚本）并获得所有嵌入的资源（图像、css、js 文件等）。

之后，客户端（浏览器）和服务器（您的 Web 服务器）之间不会进行任何通信。为了让您获得更新的“images.php”页面，您需要从服务器向当前正在查看您的页面的所有浏览器发送通知（您不知道 - 您需要与它们建立固定连接，但是 html协议是**无状态**的，这意味着没有简单的方法来完成它）。

因此，最简单的方法是让浏览器及时 ping 服务器 - 每 n 秒一次。不过，最好不要每 n 秒获取一次所有图像，而是最后一次更改日期 - 并且有一些逻辑可以在具有较新更改日期时获取新数据 - 这将减少您的应用程序发送的流量。

# performance - ZF2 针对高流量进行优化

> ID：14667621
> 
> 赞同：31
> 
> 时间：2013-02-02T23:22:15.833
> 
> 标签：performance, optimization, zend-framework2

当超过 3 个用户同时使用我的 ZF2 应用程序时，它似乎非常慢。

我用 xdebug 和 webgrind 分析我的代码，我的函数中的非函数似乎很慢，所以它必须是 zf2 中的一个优化问题。

对于缓存，我使用了 EvanDotPro 的 EdpSuperluminal 模块，这似乎提高了应用程序的性能。

我们使用 nginx 反向代理，但也没有任何意义。

我需要一些好的建议来增加对高流量的响应。我同时谈论大约 30 多个连接用户。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-03T12:28:09.670

有几个非常简单的步骤可以实现更快的应用程序。总是可以考虑三件事。

1.  [ZF2 Performance QuickTipp #1 - ViewModels](http://samminds.com/2012/11/zf2-performance-quicktipp-1-viewmodels/) 始终手动分配完全限定的脚本以进行渲染。这将稍微提高性能。它是这样完成的：

    ```
    public function someAction()
    {
        $viewModel = new ViewModel();
        $viewModel->setTemplate('MODULE / CONTROLLER / ACTION.phtml');
        // In this given example: $viewModel->setTemplate('foo/bar/some.phtml');

        // Do some other Controller-logic as used to

        return $viewModel->setVariables(array(
            //key-value-paired view-variables
        ));
    } 
    ```

2.  [ZF2 Performance QuickTipp #2 - Classmap Autoloading](http://samminds.com/2012/11/zf2-performance-quicktipp-2-classmap-autoloading/) 这可能是加快应用程序速度的最重要部分之一。就我个人而言，我看到加载时间增加了高达 40%。实现这一点非常简单：

    ```
    class Module 
    {
        public function getAutoloaderConfig()
        {
            return array(
               'Zend\Loader\ClassMapAutoloader' => array(
                    __DIR__ . '/autoload_classmap.php',
               ),
            );
        }
    } 
    ```

    then 是一个简单的`autoload_classmap.php`数组`'FQ-CLASSNAME' => 'FQ-FILEPATH'`。这可以很容易地[使用 ZF2 的 classmap_generator-utility 自动化](http://samminds.com/2012/11/using-the-zf2-classmap_generator-utility/)

3.  ZF2 Performance QuickTipp #3 - 保持 Module.php 轻巧！可悲的是，这是一篇我还没来得及写的帖子。这`Module.php`是一个在每个请求上加载的文件。很多人忘记了这一点，在里面写了很多很多的工厂。在某一时刻，[ZfcUser-Module.php](https://github.com/ZF-Commons/ZfcUser/blob/5026f489cf8b25674d46ad9ed3aa5b78311cae72/Module.php)是一个不该做的例子。闭包或匿名函数也会在每个请求上执行。如果整个项目中有太多的人，这是相当多的工作要做。更好的方法是简单地编写**Factory-Classes**。ZfcUser 后来[更新了 Module.php](https://github.com/ZF-Commons/ZfcUser/blob/de2f1fc8d47363ab8b8834c79ce4bb3685d12eb5/Module.php)来使用这个策略。

这几乎是一个人可以做的所有简单的事情（我知道 - 我知道的不多！：D）。然而，有趣的是，开始使用 3 个用户时，您的应用程序运行缓慢。根据我的经验，这与脚本本身无关，而是服务器问题。这是来自登台机器还是本地？

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-05-11T18:42:32.367

如果您使用 Doctrine，请不要忘记为注释添加缓存。这极大地提高了性能（当我激活这个缓存时，我几乎将加载时间除以二）。如果你使用 DoctrineORMModule：

```
'doctrine' => array(
    'driver' => array(

        'cache' => array(
            'class' => 'Doctrine\Common\Cache\ApcCache'
        ),

        'configuration' => array(
            'orm_default' => array(
                'metadata_cache' => 'apc',
                'query_cache'    => 'apc',
                'result_cache'   => 'apc'
            )
        ),
    )
) 
```

但是，在开发过程中非常不方便，因为您必须在映射更改时清除缓存。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-02-08T16:25:47.167

如果您有一个大型项目，ZF2 类映射生成器将为您提供很大的帮助：

[http://framework.zend.com/manual/2.0/en/modules/zend.loader.classmap-generator.html](http://framework.zend.com/manual/2.0/en/modules/zend.loader.classmap-generator.html)

或者，如果您正在使用 composer（您应该这样做），那么您也可以使用 composer 为您的所有模块和依赖项生成类映射，这样会更好：

```
php composer.phar install --optimize-autoloader

php composer.phar update --optimize-autoloader 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-05T19:01:20.740

以上所有内容并使用某种操作码缓存（如 APC / Opcache）将加快速度。但是是的，ZF 2 似乎很慢，不幸的是比 ZF 1 更慢 :(

模块配置缓存也加快了速度，但你不能有任何闭包来使它工作；）

[http://hounddog.github.io/blog/performance-in-zend-framework-2/](http://hounddog.github.io/blog/performance-in-zend-framework-2/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-17T21:12:38.747

首先要加速您的 zf2 应用程序，您应该使用**ZendOptimizerPlus**。大部分执行时间用于读取和预编译 php 代码。典型的 ZF2 应用程序有很多文件，因此处理它们需要很长时间。

ZendOp+ 将您的 php 应用程序的字节码保存在共享内存中，因此服务器不会读取大量文件，也不会在每个请求中解析它。ZendOp+ 将默认为 php5.5，因此了解它并使用它很有用。

基准测试使简单框架应用程序的性能提高了 9 倍（symfony2 测试 - [http://www.ricardclau.com/2013/03/apc-vs-zend-optimizer-benchmarks-with-symfony2/](http://www.ricardclau.com/2013/03/apc-vs-zend-optimizer-benchmarks-with-symfony2/)）。

我将它用于我的 zf2 + 学说 2 + zfcUser 应用程序。Memcached 用于学说 2 的目的，它只提供大约 5% 的性能提升。因此，使用 ZendOp+，简单页面增加了 6 倍（0.2 -> 0.03 秒），具有大量表单、实体和视图的复杂页面增加了 3 倍（0.2 - 0.06）。如果我使用类图生成器，我会更新答案。

另一个问题是使用 nginx + php-fpm 而不是 apache2+module。它节省了服务器资源。

# php - 使用 javascript 从 xml 文件中加载一系列随机图像

> ID：14667627
> 
> 赞同：1
> 
> 时间：2013-02-02T23:23:25.333
> 
> 标签：php, javascript, xml

这是我到目前为止的代码，目前它根据需要使用 javascript 从 xml 文件中加载信息。我已将其设置为循环 4 次以选择 4 个图像，但这些显然只是 xml 文件中的前 4 个。

有谁知道让它从 xml 文件中随机选择 4 个不重复的图像的最佳方法。

```
<script>
if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","include/photoLibrary.xml",false);
    xmlhttp.send();
    xmlDoc=xmlhttp.responseXML;

var x=xmlDoc.getElementsByTagName("photo");
    for (i=0; i<4; i++)
    { 
    document.write('<a href="');
    document.write(x[i].getElementsByTagName('path')[0].childNodes[0].nodeValue);
    document.write('" class="lytebox" data-lyte-options="group:vacation" data-title="');
    document.write(x[i].getElementsByTagName('description')[0].childNodes[0].nodeValue);
    document.write('"><img src="');
    document.write(x[i].getElementsByTagName('thumb')[0].childNodes[0].nodeValue);
    document.write('" alt"');
    document.write(x[i].getElementsByTagName('title')[0].childNodes[0].nodeValue);
    document.write('"/></a>');                      
    }
</script> 
```

如果它有任何帮助，这是 xml 的一个例子，你会看到 photo 有一个属性，它给它一个唯一的 id。

```
<gallery>

<photo id="p0001">
<title>Pergola</title>
<path>photos/Pergola.jpg</path>
<thumb>photos/thumbs/Pergola.jpg</thumb>
<description>Please write something here!</description>
<date>
    <day>04</day>
    <month>04</month>
    <year>2006</year>
</date>
</photo>

</gallery> 
```

我愿意使用 php 作为 javascript 的替代品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:49:33.240

你可以添加

```
x = Array.prototype.slice.call(x).sort( function () {
    return Math.random() > 0.5 ? 1 : -1 
} ); 
```

紧接着

```
var x = xmlDoc.getElementsByTagName("photo"); 
```

这将创建一个随机排序的元素数组，其中前四个将由 for 循环迭代。

**编辑**

请注意，此方法不会产生正确随机的数组洗牌，请参阅[使用 JavaScript Array.sort() 方法进行洗牌是否正确？](https://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling)，我不推荐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T00:52:22.820

第一件事。尽量不要使用`document.write`这种方法，因为当 DOM 准备好和仍在初始化时，这种方法的行为会反复无常。它被认为是一种不好的做法。

我还建议使用函数来分解代码的复杂性并使其更具可读性。

您应该知道 XHR 对象不是同步的。您需要等待通过`readystatechange`事件检索 xml 数据。

最后，您不必在浏览器中构建 html 字符串。DOM API 允许您将锚点和图像标签创建为可以附加到 DOM 树的适当节点。

希望有帮助。

```
(function() {

    //fetch the gallery photos
    getXML('include/photoLibrary.xml', function(xml) {
        var photos, pI, photo, anchor, image, anchors = [];

        //pick four photos at random
        photos = getRandom(makeArray(xml.getElementsByTagName('photo')), 4);

        //build out each photo thumb
        for(pI = 0; pI < photos.length; pI += 1) {
            photo = photos[pI];

            //create the anchor
            anchor = document.createElement('a');
            anchor.setAttribute('href', photo.getElementsByTagName('path')[0].childNodes[0].nodeValue);
            anchor.setAttribute('class', 'lytebox');
            anchor.setAttribute('data-lyte-options', 'group:vacation');
            anchor.setAttribute('data-title', photo.getElementsByTagName('description')[0].childNodes[0].nodeValue);

            //create the image
            image = document.createElement('img');
            image.setAttribute('src', photo.getElementsByTagName('thumb')[0].childNodes[0].nodeValue);
            image.setAttribute('alt', photo.getElementsByTagName('title')[0].childNodes[0].nodeValue);

            //insert the image into the anchor
            anchor.appendChild(image);

            //insert the anchor into the body (change this to place the anchors else were)
            anchors.push(anchor);
        }

        //when the DOM is loaded insert each photo thumb
        bind(window, 'load', function() {
            var aI;

            for(aI = 0; aI < anchors.length; aI += 1) {
                //replace document.body with whatever container you wish to use
                document.body.appendChild(anchors[aI]);
            }
        });
    });

    /**
     * Fetches an xml document via HTTP method GET. Fires a callback when the xml data
     * Arrives.
     */
    function getXML(url, callback) {
        var xhr;

        if(window.XMLHttpRequest) {
            xhr = new XMLHttpRequest();
        } else if(window.ActiveXObject) {
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        } else {
            throw new Error('Browser does not support XML HTTP Requests.');
        }

        //attach the ready state hander and send the request
        xhr.onreadystatechange = readyStateHandler;
        xhr.open("GET","photos.xml",false);
        xhr.send();

        function readyStateHandler() {

            //exit on all states except for 4 (complete)
            if(xhr.readyState !== 4) { return; }

            //fire the callback passing the response xml data
            callback(xhr.responseXML);
        }
    }

    /**
     * Takes array likes (node lists and arguments objects) and converts them
     * into proper arrays.
     */
    function makeArray(arrayLike) {
        return Array.prototype.slice.apply(arrayLike);
    }

    /**
     * Extracts a given number of items from an array at random.
     * Does not modify the orignal array.
     */
    function getRandom(array, count) {
        var index, randoms = [];

        //clone the original array to prevent side effects
        array = [].concat(array);

        //pull random items until the count is satisfied
        while(randoms.length < count) {
            index = Math.round(Math.random() * (array.length - 1));
            randoms.push(array.splice(index, 1)[0]);
        }

        return randoms;
    }

    function bind(element, eventName, callback) {
        if(typeof element.addEventListener === 'function') {
            return element.addEventListener(eventName, callback, false);
        } else if(typeof element.attachEvent === 'function') {
            return element.attachEvent('on' + eventName, callback);
        }
    }
})(); 
```

编辑：修复了三个错误。在插入节点之前需要加载 DOM。XML 节点没有 innerHTML 属性。Array.concat 不会将 DOM NodeList 对象视为数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:50:26.717

在 PHP 中，这是解析文件的方式：

索引.php

```
<?php
$doc = new DOMDocument();
  $doc->load( 'book.xml' );

  $books = $doc->getElementsByTagName( "book" );
  foreach( $books as $book )
  {
  $authors = $book->getElementsByTagName( "author" );
  $author = $authors->item(0)->nodeValue;

  $publishers = $book->getElementsByTagName( "publisher" );
  $publisher = $publishers->item(0)->nodeValue;

  $titles = $book->getElementsByTagName( "title" );
  $title = $titles->item(0)->nodeValue;

  echo "$title - $author - $publisher\n";
  }?> 
```

书本.xml

```
<books>
  <book>
  <author>Jack Herrington</author>
  <title>PHP Hacks</title>
  <publisher>O'Reilly</publisher>
  </book>
  <book>
  <author>Jack Herrington</author>
  <title>Podcasting Hacks</title>
  <publisher>O'Reilly</publisher>
  </book>
  </books> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:17:10.970

在php中你随机选择这样的东西

```
<?php

$xml_string = 
'<gallery>
<photo id="p0001">
<title>t1</title>
<path>photos/Pergola.jpg</path>
</photo>
<photo id="p0002">
<title>t2</title>
<path>photos/Pergola.jpg</path>
</photo>
<photo id="p0003">
<title>t3</title>
<path>photos/Pergola.jpg</path>
</photo>
</gallery>';

$xml  = simplexml_load_string($xml_string);
$arr = (array) $xml;
shuffle($arr['photo']);
for($i =0; $i < 2; $i++){
  $picture = array_pop($arr['photo']);
  print_r($picture);
} 
```

# c++ - 函数递归的最大数量c ++

> ID：14667632
> 
> 赞同：0
> 
> 时间：2013-02-02T23:23:53.757
> 
> 标签：c++, recursion, segmentation-fault

假设我们有函数：

```
void foo(int x)
{
foo(x); 
} 
```

在我的机器（i7）上将运行大约 260k 次并产生分段错误。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T23:25:45.253

每次调用函数时，它都需要运行时堆栈上的空间。这是该函数的本地变量分配内存的地方。正在发生的事情是你递归了很多次，以至于你的堆栈空间用完了——堆栈溢出。（这个网站的名字！）

另见：[http ://en.wikipedia.org/wiki/Stack_overflow](http://en.wikipedia.org/wiki/Stack_overflow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T20:38:56.733

每次调用函数时，系统都会将其调用存储在堆栈中，在这种情况下，系统将继续存储函数调用，直到系统堆栈变满。这种状态称为堆栈溢出。

# html - 使页脚粘在底部

> ID：14667639
> 
> 赞同：-1
> 
> 时间：2013-02-02T23:24:56.317
> 
> 标签：html, css, positioning, footer, sticky-footer

我有一些严重的问题使我的页脚粘在页面底部。我已经尝试了很多我在互联网上找到的教程，但都没有成功？！无论我做什么，即使我将页脚放在容器 div 之外，我的页脚也将始终位于内容 div 中的内容下方？！？！

这是我的代码。我希望你能看到并告诉我我做错了什么......

我也试过用清洁剂，但也没有用...

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Untitled</title>
</head>
<style>
/*=============== HTML ============*/
html
{
    min-height: 100%;
}
/*=============== Body ============*/
body { 
    font-family: Verdana, Tahoma, Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #FFFFFF;
    min-height:100%;
    height: auto;
    width: 100%;
}

/*=============== Container  ============*/
.container
{
    width: 98%;
    margin: 0px auto 0px auto;
    padding: 5px 0 0 0;
    background-color: #F5F5F5;
    height: 100%;
    position:relative;
}

/*=============== Højre/reklame ============*/
.commercial
{
    width:200px;
    height:90%;
    float:right;
    background-color:inherit;
    margin: 0px 5px 5px 5px;
    padding:5px 5px 5px 5px; 
}

/*=============== Venstre ============*/
.lefty
{
    width:150px;
    height:90%;
    float:left;
    margin:5px 5px 5px 5px;
    padding:5px 5px 5px 5px;
}

/*=============== Indhold1 ============*/
.content
{

    background-color: inherit;
    margin:5px 220px 5px 170px;
    padding:0px 5px 5px -3em;
    float:none;
}

/*=============== Footer ============*/
.footer
{
    width:98%;
    border-top: 2px solid #242F24;
    background-color: #F5F5F5;
    text-align: center;
    position: relative;
    bottom:0;
    z-index: 10;
    height: 3em;
    margin: auto;

</style>

<body>

<div class="container">
<div class="lefty">
Left
</div>
<div class="commercial">
Right
</div>
<div class="content">
Indhold<br>og hvad så hvis vi putter en masse ekstra indhold på?<br>og hvad så hvis vi putter en masse ekstra indhold på?<br>og hvad så hvis vi putter en masse ekstra indhold på?<br>og hvad så hvis vi putter en masse ekstra indhold på?<br>og hvad så hvis vi putter en masse ekstra indhold på?<br>og hvad så hvis vi putter en masse ekstra indhold på?<br>og hvad så hvis vi putter en masse ekstra indhold på?<br>

</div><!—End Content—&gt;
<div class="footer">
Footer
</div>
</div><!—End Container—&gt;

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T23:27:45.420

将页脚设置为固定位置：

```
.footer {
  bottom:0;
  position:fixed;
} 
```

# opencv - 视差图颜色在opencv中是向后的

> ID：14667645
> 
> 赞同：2
> 
> 时间：2013-02-02T23:25:50.107
> 
> 标签：opencv, stereo-3d, disparity-mapping

我的问题是我的视差图中的颜色是向后的。因为距离较远的东西比靠近相机的东西要轻。

我尝试了很多东西（即 convertTo、convertScaleAbs 以及其中的各种值组合等），但似乎无法让视差图中的颜色反转（即正常 - 靠近的东西比远离的东西更轻） .

我需要一些帮助才能做到这一点。

另外，出于好奇，我怎样才能将视差图的颜色空间更改为我在网上看到的 MATLAB 中的彩色空间？

这是我的代码以及pastebin。[http://pastebin.com/E3vVN6UU](http://pastebin.com/E3vVN6UU)

```
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/calib3d/calib3d.hpp>
#include <iostream>
#include <string>

using namespace cv;
using namespace std;

void show(const char* windowname, Mat image)
{
    namedWindow(windowname, CV_WINDOW_AUTOSIZE);
    imshow(windowname, image);
}

int main()
{ 
    Mat image1, image2;

    Mat camMat1 = (Mat_<double>(3,3) << 793.1338, 0, 337.2309, 0, 792.0555, 256.9991, 0, 0, 1);
    Mat camMat2 = (Mat_<double>(3,3) << 799.1271, 0, 319.8581, 0, 797.2460, 243.4638, 0, 0, 1);
    Mat dispCoeffs1 = (Mat_<double>(1,5) << 0.0033, -0.1320, -0.0019, 0.0026, 0);
    Mat dispCoeffs2 = (Mat_<double>(1,5) << -0.0109, -0.0188, -0.0014, -0.0055, 0);
    Mat RotMat = (Mat_<double>(3,3) << 0.9998, -0.0023, 0.0221, 0.0022, 1, 0.0031, -0.0221, -0.0031, 0.9998);
    Mat TransMat = (Mat_<double>(3,1) << 374.2306, -1.8319, 5.5745);

    //Rectify 
    Mat R1, R2, P1, P2, Q;
    stereoRectify(camMat1, dispCoeffs1, camMat2, dispCoeffs2, Size(640,480), RotMat, TransMat, R1, R2, P1, P2, Q, CV_CALIB_ZERO_DISPARITY, 1, Size(640,480));

    //Define the mapping to the done
    Mat rx1, ry1;
    Mat rx2, ry2;
    initUndistortRectifyMap(camMat1, dispCoeffs1, R1, P1, Size(640,480), CV_16SC2, rx1, ry1);
    initUndistortRectifyMap(camMat2, dispCoeffs2, R2, P2, Size(640,480), CV_16SC2, rx2, ry2);

    //SET THE BM STATE VARIABLES BEGIN - DONE GLOBALLY
    StereoBM bm;
    bm.state->preFilterSize = 31;
    bm.state->preFilterCap = 63;
    bm.state->SADWindowSize = 9;
    bm.state->minDisparity = -128;
    //bm.state->disp12MaxDiff = 2;
    bm.state->numberOfDisparities = 128;
    bm.state->textureThreshold = 50;
    bm.state->uniquenessRatio = 15;
    bm.state->speckleWindowSize = 100;
    bm.state->speckleRange = 16;
    //SET THE BM STATE VARIABLES END

    VideoCapture cap3 = VideoCapture(0);
    VideoCapture cap4 = VideoCapture(1);

    //cap3.set(CV_CAP_PROP_FRAME_WIDTH, 320);
    //cap3.set(CV_CAP_PROP_FRAME_HEIGHT, 240);
    //cap4.set(CV_CAP_PROP_FRAME_WIDTH, 320);
    //cap4.set(CV_CAP_PROP_FRAME_HEIGHT, 240);

    cap3 >> image1;
    cap4 >> image2;
    Size imageSize = image1.size();

    Mat gray_image1;
    Mat gray_image2;
    Mat frame1r;
    //frame1r.create(image1.size(), CV_8U);
    Mat frame2r;
    //frame2r.create(image2.size(), CV_8U);
    Mat frame1rf;
    Mat frame2rf;
    //Mat disp(image1.size(), CV_16S);
    //Mat vdisp(image1.size(), CV_8U);
    Mat disp, vdisp;
    //Mat image3d(image1.size(), CV_32FC3);
    Mat image3d;
    Mat rectified_pair;
    rectified_pair.create(imageSize.height, (imageSize.width)*2, CV_8UC3);

    //Actually do the mapping -- based on the mapping definition

    while(1)
    {
        bm.state->preFilterSize = 31;
        bm.state->preFilterCap = 63;
        bm.state->SADWindowSize = 21;
        bm.state->minDisparity = -128;
        //bm.state->disp12MaxDiff = 2;
        bm.state->numberOfDisparities = 64;
        bm.state->textureThreshold = 20;
        bm.state->uniquenessRatio = 10;
        bm.state->speckleWindowSize = 100;
            bm.state->speckleRange = 32;

        cvtColor(image1, gray_image1, CV_BGR2GRAY);
        cvtColor(image2, gray_image2, CV_BGR2GRAY);
        remap(gray_image1, frame1r, rx1, ry1, CV_INTER_LINEAR);
        remap(gray_image2, frame2r, rx2, ry2, CV_INTER_LINEAR);
        bm(frame1r, frame2r, disp);
        normalize(disp, vdisp, 0, 255, NORM_MINMAX, CV_8U);
        //convertScaleAbs(vdisp, vdisp, 1, 0);
        disp.convertTo(vdisp, CV_8U, 255/(64*16.));
        show("disparity", vdisp);
        //reprojectImageTo3D(disp, image3d, Q, true);
        //show("depth map", image3d);

        //display image side by side for rectified window
        //copy frame1r to the left side
        cvtColor(frame1r, frame1rf, CV_GRAY2BGR);
        frame1rf.copyTo(rectified_pair(Rect(0,0,imageSize.width, imageSize.height)));
        //copy frame2r to the right side
        cvtColor(frame2r, frame2rf, CV_GRAY2BGR);
        frame2rf.copyTo(rectified_pair(Rect(imageSize.width,0,imageSize.width, imageSize.height)));
        for(int i=0; i<imageSize.height; i+=32)
            line(rectified_pair, Point(0,i), Point((imageSize.width)*2, i), CV_RGB(0,255,0));
        show("rectified", rectified_pair);

        cap3 >> image1;
        cap4 >> image2;
        if(waitKey(15) == 27)
            break;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T16:45:52.380

我没有使用立体声对，但使用 Kinect 获得相同的结果 - 远 = 亮，近 = 暗 要改变这一点，我使用了以下内容：

```
 double min, max;
  minMaxLoc(depthImage, &min, &max);

  depthImage.convertTo(rImage, CV_8U, -255.0/max, 255); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T16:22:00.123

我遇到了同样的问题，然后我尝试交换左右图像，它奏效了！现在我得到了正确的图像。

# c# - WPF 可以与 where 子句绑定吗？

> ID：14667649
> 
> 赞同：2
> 
> 时间：2013-02-02T23:26:07.043
> 
> 标签：c#, wpf, linq, xaml, data-binding

如果我有这样的`Observable`收藏：

```
public ObservableCollection<SpecialPriceRow> SpecialPriceRows = new ObservableCollection<SpecialPriceRow>(); 
```

`SpecialPriceRow`班级 ：

```
public class SpecialPriceRow : INotifyPropertyChanged
{
    public enum ChangeStatus
    {
        Original,
        Added,
        ToDelete,
        Edited
    }

    public ChangeStatus Status { get; set; }
    public string PartNo { get; set; }

    private decimal _price;
    public decimal Price
    {
        get
        {
            return _price;
        }
        set
        {
            if (value != _price)
            {
                _price = value;
                Status = ChangeStatus.Edited;
                OnPropertyChanged("Status");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

我是否可以将 XAML 中的标签绑定到说...添加的对象的计数？所以我可以得到这样的东西：

![在此处输入图像描述](../Images/b68c9212c9bca7327b2505a2b9ca6629.png)

其中绿色是集合中“已添加”对象的计数。我将如何去做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:36:09.470

I'm not aware of any builtin functionality to do this. I would create a custom property in your data context class that does the counting and bind to this.

Something like this:

```
public int AddedCount
{
    get
    {
        return SpecialPriceRows.Where(r => r.Status == ChangeStatus.Added).Count();
    }
} 
```

Then whenever an item is changed or added you need to explicitly raise the property changed for this:

```
public void AddItem()
{
    ...
    OnPropertyChanged("AddedCount");
} 
```

Then you only need to bind in your XAML code like:

```
<TextBlock Text="{Binding AddedCount}" /> 
```

You may need to subscribe to the change events in your collection to know when an item changes.

**Alternative:**

You can also create a `ListCollectionView` with a specific filter and bind to its `Count` property:

```
 AddedItems = new ListCollectionView(TestItems);
    AddedItems.Filter = r => ((SpecialPriceRow)r).Status == ChangeStatus.Added; 
```

In your XAML you would then bind to the `Count` property of this:

```
<TextBlock Text="{Binding AddedItems.Count}" /> 
```

This has the advantage that it will automatically keep track of added and removed items in the collection and update itself. You have to refresh it manually though when the property of an item changes which affects the filter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:58:13.477

我已经编写了一个 ViewModel，它将执行您正在寻找的所需功能。

```
 class VM : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        public ObservableCollection<SpecialPriceRow> _SpecialPriceRows = new ObservableCollection<SpecialPriceRow>();
        private int _Original = 0;
        private int _Added = 0;
        private int _ToDelete = 0;
        private int _Edited = 0;

        public VM()
        {
            PropertyChanged = new PropertyChangedEventHandler(VM_PropertyChanged);

            //The following lines in the constructor just initialize the SpecialPriceRows.
            //The important thing to take away from this is setting the PropertyChangedEventHandler to point to the UpdateStatuses() function.
            for (int i = 0; i < 12; i++)
            {
                SpecialPriceRow s = new SpecialPriceRow();
                s.PropertyChanged += new PropertyChangedEventHandler(SpecialPriceRow_PropertyChanged);
                SpecialPriceRows.Add(s);
            }
            for (int j = 0; j < 12; j+=2)
                SpecialPriceRows[j].Price = 20;
        }

        private void VM_PropertyChanged(object sender, PropertyChangedEventArgs e)
        {
        }

        private void SpecialPriceRow_PropertyChanged(object sender, PropertyChangedEventArgs e)
        {
            if (e.PropertyName == "Status")
                UpdateStatuses();
        }

        public ObservableCollection<SpecialPriceRow> SpecialPriceRows
        {
            get
            {
                return _SpecialPriceRows;
            }
        }

        private void UpdateStatuses()
        {
            int original = 0, added = 0, todelete = 0, edited = 0;
            foreach (SpecialPriceRow SPR in SpecialPriceRows)
            {
                switch (SPR.Status)
                {
                    case SpecialPriceRow.ChangeStatus.Original:
                        original++;
                        break;
                    case SpecialPriceRow.ChangeStatus.Added:
                        added++;
                        break;
                    case SpecialPriceRow.ChangeStatus.ToDelete:
                        todelete++;
                        break;
                    case SpecialPriceRow.ChangeStatus.Edited:
                        edited++;
                        break;
                    default:
                        break;
                }
            }
            Original = original;
            Added = added;
            ToDelete = todelete;
            Edited = edited;
        }

        public int Original
        {
            get
            {
                return _Original;
            }
            set
            {
                _Original = value;
                PropertyChanged(this, new PropertyChangedEventArgs("Original"));
            }
        }

        public int Added
        {
            get
            {
                return _Added;
            }
            set
            {
                _Added = value;
                PropertyChanged(this, new PropertyChangedEventArgs("Added"));
            }
        }

        public int ToDelete
        {
            get
            {
                return _ToDelete;
            }
            set
            {
                _ToDelete = value;
                PropertyChanged(this, new PropertyChangedEventArgs("ToDelete"));
            }
        }

        public int Edited
        {
            get
            {
                return _Edited;
            }
            set
            {
                _Edited = value;
                PropertyChanged(this, new PropertyChangedEventArgs("Edited"));
            }
        }
    } 
```

注意构造函数中的注释。您需要将每个 SpecialPriceRow 的 PropertyChanged 事件指向 UpdateStatuses 函数，以使其正常工作。现在您需要做的就是将您的标签绑定到 ViewModel 中的适当属性。如果您的 SpecialPriceRows 列表变得非常大，您可能需要考虑稍微不同地计算状态计数。目前，每次更新一个实例时，它都会遍历整个列表。为了更好地执行此操作，您可能希望在 SpecialPriceRow 类中保留旧的状态值，并且每次发生更新时，增加新的状态计数并减少旧的状态计数。

# listbox - 方法在 ListBox 类中执行

> ID：14667656
> 
> 赞同：0
> 
> 时间：2013-02-02T23:27:43.050
> 
> 标签：listbox, c++builder

有人可以告诉我（或给我一个正确的链接）**ListBox**类中的方法**Perform**用于什么？提前致谢。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:43:57.030

[该`Perform()`方法](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TControl.Perform)将窗口消息直接发送到控件，`WindowProc`而无需通过调用线程的消息队列。它类似于 Win32 API`SendMessage()`功能，但不通过 API 来传递消息。**

# c++ - 从文件读取时出现分段错误

> ID：14667660
> 
> 赞同：0
> 
> 时间：2013-02-02T23:28:28.510
> 
> 标签：c++, file-io

我对以下代码有疑问：

```
#include <iostream>
#include <stdio.h>
#include "ISBNPrefix.h"
using namespace std;

int main() {

    FILE* file = NULL;
    int area = 0, i = 0;
    long s;

    file = open("swagger.txt");
    fscanf(file, "%ld", &s);
    cout << s << endl;
} 
```

这是 ISBNPrefix.cpp：

```
#include <iostream>
#include <stdio.h>
#include "ISBNPrefix.h"
using namespace std;

FILE* open(const char filename[]) {

    FILE* file = NULL;
    file = fopen("filename", "r");

    if (file != NULL)
        return file;
    else return NULL;
} 
```

我的 ISBNPrefix.h

```
FILE* open (const char filename[]); 
```

而swagger.txt的内容是：`123456789`

当我尝试运行它来测试它是否将 123456789 复制到我的变量中时，我遇到了分段错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:32:49.250

打开文件的功能有问题：

```
FILE* open(const char filename[]) {
    FILE* file = NULL;
    file = fopen("filename", "r"); <-- here 
```

它应该是`file = fopen(filename, "r");`

您还设计了在没有文件`open`时返回的函数，但是一旦调用它就不会检查它的返回值：`NULL`

```
file = open("swagger.txt");
if (file == NULL) ...        <-- you should check the return value
fscanf(file, "%ld", &s); 
```

另请注意，`fopen`and`fscanf`是 C 风格的函数。由于您使用的是 C++，因此还有其他更方便的方法可以从文件中读取数据。看看[`std::ifstream`](http://www.cplusplus.com/reference/fstream/ifstream/)。此外，当您在 C++ 中使用 C 头文件时，您应该包含它们的 C++ 包装器：`cstdio`、`cstdlib`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:34:09.370

你需要[fopen](http://linux.die.net/man/3/fopen)作为开始。出现在哪里`ISBNPrefix.cpp`？

# svn - 如何删除 SVN 修订版？

> ID：14667661
> 
> 赞同：0
> 
> 时间：2013-02-02T23:28:29.130
> 
> 标签：svn, revision

> **可能重复：**
> [如何从 Subversion 存储库中删除意外放置的大文件 (4GB)？](https://stackoverflow.com/questions/1648115/how-to-remove-an-accidentally-put-large-file-4gb-from-subversion-repository)

我正在使用 SVN 托管服务提供商。我签入了一些大型二进制文件并超过了我的 2GB 配额。我显然不需要将它们置于源代码控制之下，所以我删除了它们。

存储库的大小仍然超过限制。托管公司的人说这是因为大型二进制文件仍在那个版本中。

托管服务提供商的人对此非常满意，但如果可能的话，我想删除该修订。我在添加和删除之间进行了多次提交。

我在主干的一个分支上（我认为这是正确的术语？）。

我不认为我可以进入历史并删除修订。我唯一能想到的另一件事是：

一种。将我所在的分支合并回主干，然后删除该分支。湾。删除存储库，创建一个新存储库，然后重新导入所有内容。

我不确定其中任何一个都行得通。你们有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:55:44.863

您只能通过一种方式重写 Subversion 中的历史记录

*   创建存储库的转储（`svnadmin dump`或提供者的 Web UI 中的*某种方式*），它会跳过错误的修订
*   删除旧存储库（可选）
*   创建新的存储库，使用正确的数据进行负载转储

# haskell - Haskell 类型强制

> ID：14667662
> 
> 赞同：2
> 
> 时间：2013-02-02T23:28:36.557
> 
> 标签：haskell

我试图绕开 Haskell 类型的强制。意思是，什么时候可以将一个值传递给一个函数而不进行强制转换以及它是如何工作的。这是一个具体的例子，但我正在寻找一个更一般的解释，我可以用它来尝试理解发生了什么：

```
Prelude> 3 * 20 / 4
15.0
Prelude> let c = 20
Prelude> :t c
c :: Integer
Prelude> 3 * c / 4

<interactive>:94:7:
    No instance for (Fractional Integer)
      arising from a use of `/'
    Possible fix: add an instance declaration for (Fractional Integer)
    In the expression: 3 * c / 4
    In an equation for `it': it = 3 * c / 4 
```

(/) 的类型是小数 a => a -> a -> a。所以，我猜测当我使用文字执行“3 * 20”时，Haskell 会以某种方式假设该表达式的结果是分数。但是，当使用变量时，它的类型根据赋值预定义为 Integer。

我的第一个问题是如何解决这个问题。我是否需要转换表达式或以某种方式转换它？我的第二个问题是，这对我来说似乎很奇怪，因为你不能做基本的数学，而不必太担心 int/float 类型。我的意思是有一种明显的方法可以在这些之间自动转换，为什么我不得不考虑这个并处理它？我一开始是不是做错了什么？

我基本上是在寻找一种方法来轻松编写简单的算术表达式，而不必担心整洁的细节并保持代码整洁。在大多数顶级语言中，编译器对我有用——而不是相反。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-03T00:01:24.477

如果你只是想要解决方案，请看最后。

你几乎已经回答了你自己的问题。Haskell 中的文字被重载：

```
Prelude> :t 3
3 :: Num a => a 
```

由于`(*)`也有一个`Num`约束

```
Prelude> :t (*)
(*) :: Num a => a -> a -> a 
```

这延伸到产品：

```
Prelude> :t 3 * 20
3 * 20 :: Num a => a 
```

因此，根据上下文，可以根据需要将其专门化为`Int`、`Integer`、`Float`、`Double`等类型`Rational`。特别是，作为`Fractional`的子类`Num`，它可以在除法中毫无问题地使用，但是约束将变得更强并适用于类`Fractional`：

```
Prelude> :t 3 * 20 / 4
3 * 20 / 4 :: Fractional a => a 
```

最大的区别是标识符`c`是一个`Integer`. GHCi 提示符中的简单 let 绑定未分配重载类型的原因是可怕的[单态限制](http://www.haskell.org/haskellwiki/Monomorphism_restriction)。简而言之：如果您定义一个没有任何显式参数的值，那么除非您提供显式类型签名，否则它不能具有重载类型。然后数字类型默认为`Integer`.

一旦`c`是`Integer`，乘法的结果`Integer`也是：

```
Prelude> :t 3 * c
3 * c :: Integer 
```

并且`Integer`不在`Fractional`课堂上。

这个问题有两种解决方案。

1.  确保您的标识符也具有重载类型。在这种情况下，就像说

    ```
     Prelude> let c :: Num a => a; c = 20
      Prelude> :t c
      c :: Num a => a 
    ```

2.  用于`fromIntegral`将整数值转换为任意数值：

    ```
     Prelude> :t fromIntegral
      fromIntegral :: (Integral a, Num b) => a -> b
      Prelude> let c = 20
      Prelude> :t c
      c :: Integer
      Prelude> :t fromIntegral c
      fromIntegral c :: Num b => b
      Prelude> 3 * fromIntegral c / 4
      15.0 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T00:04:39.270

当您将一种类型传递给函数时，Haskell*永远不会自动将其转换为另一种类型。*要么它已经与预期的类型兼容，在这种情况下不需要强制，要么程序无​​法编译。

如果您编写了一个完整的程序并对其进行编译，那么事情通常会“正常工作”，而无需您*过多*考虑 int/float 类型；只要你是一致的（即你不试图在一个地方把某个东西当作一个 Int 而在另一个地方当作一个 Float ），约束就会流过程序并为你找出类型。

例如，如果我把它放在一个源文件中并编译它：

```
main = do
    let c = 20
    let it = 3 * c / 4
    print it 
```

然后一切正常，运行程序打印`15.0`。你可以从`.0`GHC 成功地找出它`c`必须是某种小数，并让一切正常工作，而无需我提供任何明确的类型签名。

`c`不能是整数，因为该`/`运算符用于数学除法，它没有在整数上定义。整数除法的运算由`div`函数表示（以运算符方式用作`x `div` y`）。我认为这可能是在你的整个程序中绊倒你的原因？不幸的是，如果您习惯了许多其他语言中`/`有时是数学除法，有时是整数除法的情况，那么这只是您必须通过被它绊倒来学习的那些东西之一。

当您在解释器中玩耍时，事情会变得一团糟，因为您倾向于在没有任何上下文的情况下绑定值。在解释器中，GHCi 必须自己执行`let c = 20`，因为您还没有进入`3 * c / 4`。它无法知道您是否打算将`20`其变为`Int`, `Integer`, `Float`, `Double`,`Rational`等

Haskell 将为数值选择默认类型；否则，如果您从不使用仅适用于一种特定类型数字的任何函数，您*总是*会收到关于模棱两可类型变量的错误。这通常可以正常工作，因为在读取整个模块时会应用这些默认规则，因此要考虑到类型的所有其他约束（例如您是否曾经使用过它`/`）。`c`但是这里没有它可以看到的其他约束，因此默认类型会从排名中挑选第一辆出租车并生成`Integer`.

然后，当您要求 GHCi 评估`3 * c / 4`时，为时已晚。`c`是`Integer`，所以必须`3 * c`是 ，并且`Integer`s 不支持`/`。

因此，在解释器中，是的，有时如果您不为`let`绑定 GHC 提供显式类型，则会选择不正确的类型，尤其是数字类型。在那之后，你会被选择的具体类型 GHCi 支持的任何操作所困扰，但是当你遇到这种错误时，你总是可以重新绑定变量；例如`let c = 20.0`。

但是我怀疑在您的实际程序中，问题只是您想要的操作实际上是`div`而不是`/`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T23:51:37.930

Haskell 在这方面有点不寻常。是的，您不能一起除以整数，但这很少有问题。

原因是如果你查看`Num`类型类，有一个函数`fromIntegral`可以让你将文字转换为适当的类型。这与类型推断一起缓解了 99% 的问题。快速示例：

```
newtype Foo = Foo Integer
    deriving (Show, Eq)
instance Num Foo where
   fromInteger  _  = Foo 0
   negate          = undefined
   abs             = undefined
   (+)             = undefined 
   (-)             = undefined 
   (*)             = undefined 
   signum          = undefined 
```

现在如果我们把它加载到 GHCi

```
*> 0 :: Foo
   Foo 0

*> 1 :: Foo
   Foo 0 
```

所以你看我们可以用 GHCi 如何解析一个原始整数来做一些很酷的事情。这在 DSL 中有很多实际用途，我们不会在这里讨论。

下一个问题是如何从 Double 变为 Integer，反之亦然。有一个功能。

在从 Integer 到 Double 的情况下，我们也会使用`fromInteger`。为什么？

那么它的类型签名是

```
(Num a) => Integer -> a 
```

由于我们可以使用`(+)`Doubles，我们知道它们是一个`Num`实例。从那里开始很容易。

```
*> 0 :: Double
    0.0 
```

最后一块拼图是`Double -> Integer`。好吧，对 Hoogle 节目的简短搜索

```
truncate
floor
round
-- etc ... 
```

我把它留给你去搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:50:53.423

Haskell 中的类型强制不是自动的（或者更确切地说，它实际上并不存在）。当您编写文字 20 时，它被推断为类型`Num a => a`（无论如何在概念上。我认为它不会像那样工作）并且将根据使用它的上下文（即您传递给它的函数）被实例化使用适当的类型（我相信如果没有应用进一步的约束，这将默认为`Integer`您在某个时候需要具体类型）。如果您需要不同类型的`Num`，则需要转换数字，例如`(3* fromIntegral c / 4)`在您的示例中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-03T00:11:44.027

> (/) 的类型是小数 a => a -> a -> a。

要划分整数，请使用`div`而不是`(/)`. 请注意，类型`div`是

```
div :: Integral a => a -> a -> a 
```

> 在大多数顶级语言中，编译器对我有用——而不是相反。

我认为 Haskell 编译器对你的工作与你使用的其他语言一样多，如果不是更多的话。Haskell 是一种与您可能习惯的传统命令式语言（如 C、C++、Java 等）截然不同的语言*。*这意味着编译器的工作方式也不同。

正如其他人所说，Haskell*永远不会*自动从一种类型强制转换为另一种类型。如果您有一个需要用作浮点数的整数，则需要使用`fromInteger`.

# javascript - 如何从 Javascript 中的参数访问对象中的对象？

> ID：14667664
> 
> 赞同：1
> 
> 时间：2013-02-02T23:28:46.423
> 
> 标签：javascript, oop, object, syntax

> **可能重复：**
> [使用字符串键访问嵌套的 JavaScript 对象](https://stackoverflow.com/questions/6491463/accessing-nested-javascript-objects-with-string-key)

我有这个功能

```
function _get(name) {
return plugin._optionsObj[name] !== undefined ? 
    plugin._optionsObj[name] : plugin._defaults[name];
} 
```

我希望能够在我的 _defaults 对象中包含对象，但是我不知道如何检索它们，但只使用一组方括号。

IE

```
plugin._defaults = {
    val1: 1,
    val2: 2,
    obj1: {
        someVal: 3
    }
} 
```

是否可以从我上面的功能访问“someVal”？我尝试为参数传递'obj1.someVal'，但它没有用。想法？

**编辑：**我找到了一个解决方案，并将其发布在下面作为答案。我编写了一个非常好的小函数来通过字符串遍历嵌套值，并且我不必更改我的函数来实现它。我希望这可以帮助任何处于类似情况的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:38:44.150

我怀疑你不会总是有一个一级嵌套对象可以访问，所以更简洁的方法是使用一个基于字符串路径遍历对象的函数。[这](https://gist.github.com/3208381#file__.deep.js)是一个被编码为 Underscore 的 mixin。然后你可以像这样使用它：

```
_.deep(plugin._defaults, 'obj1.someVal'); 
```

[这个线程](https://stackoverflow.com/questions/6491463/accessing-nested-javascript-objects-with-string-key)也有一些非下划线的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:48:50.540

传递多个参数，并迭代`arguments`对象。

```
function _get(/* name1, name2, namen */) {
    var item = plugin._optionsObj,
        defItem = plugin._defaults;

    for (var i = 0; i < arguments.length; i++) {
        item = item[arguments[i]];
        defItem = defItem[arguments[i]];

        if (item == null || defItem == null)
            break;
    }
    return item == null ? defItem : item;
} 
```

* * *

```
var opt = _get("obj1", "someVal") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:39:03.267

我找到了解决这个问题的方法，至少可以解决我自己的问题，我想分享它，以防它可以帮助其他人解决这个问题。我最大的困难是我不知道嵌套值的深度，所以我想找到一个适用于深度嵌套对象并且不需要重新设计任何东西的解决方案。

```
/* Retrieve the nested object value by using a string. 
   The string should be formatted by separating the properties with a period.
   @param   obj             object to pass to the function
            propertyStr     string containing properties separated by periods
   @return  nested object value. Note: may also return an object */

function _nestedObjVal(obj, propertyStr) {
var properties = propertyStr.split('.');
if (properties.length > 1) {
    var otherProperties = propertyStr.slice(properties[0].length+1);    //separate the other properties
        return _nestedObjVal(obj[properties[0]], otherProperties);  //continue until there are no more periods in the string
} else {
    return obj[propertyStr];
}
}

function _get(name) {
    if (name.indexOf('.') !== -1) {
    //name contains nested object
        var userDefined = _nestedObjVal(plugin._optionsObj, name);
        return userDefined !== undefined ? userDefined : _nestedObjVal(plugin._defaults, name);
    } else {
        return plugin._optionsObj[name] !== undefined ?
        plugin._optionsObj[name] : plugin._defaults[name];
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-02T23:32:54.113

要检索 _defaults 对象内的对象，您需要改进**_get**函数。

例如，您可以将一个字符串数组（每个字符串代表一个属性名称）传递给**_get**以允许访问深度嵌套的对象。

# c# - NUnit如何测试传递给对象构造函数的参数

> ID：14667665
> 
> 赞同：1
> 
> 时间：2013-02-02T23:29:00.447
> 
> 标签：c#, unit-testing, nunit, moq

我有看起来像这样的方法：

```
public A Method(int a, int b){
    return new A().AMethod(a, b);
} 
```

现在我正在通过测试我得到的对象在对 AMethod 操作“a”和“b”后具有预期值进行测试，但对我来说，这看起来像一个集成测试，我正在测试第一个方法和里面的 AMethod . 我想知道如何在创建新对象 A 后测试隔离的方法以知道“a”和“b”被传递给 AMethod，并且它们按该顺序传递，而不是例如倒置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:55:07.663

您始终可以使用模拟框架对其进行测试。使用 ie MOQ 框架创建模拟。比你可以测试的参数。会是这样的

这不是确切的代码，它有一些错误，但可以给你一个想法。

```
 var mocmethod = new Mock<IMethodA>(pass your parameters here)
mockmethod.setup=(x=>x.a(It.Isany<int>)......).Returns(A), 
mockmethod.Verify(r=>r.a(It.Is<int>(r=>r.b == "Something"), It.Is<int>(i=>i > 17))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T08:30:32.400

我可以在这里提出 2 个解决方案：

1.  **引入`A`工厂依赖。**
    创建新`A`实例的责任可以委托给第三方接口。例如，它可能是`IAFactory`。`Method()`应该使用这个工厂来创建新`A`实例而不是`A`直接创建。
    在这种情况下，您可以存根`IAFactory`：它应该返回`A`模拟。您可以测试`AMethod`使用适当参数调用的方法。

2.  **断言`AMethod()`执行结果。**
    例如：如果`AMethod()`初始化实例的 2 个属性 (`PropA`和`PropB`) `A`，则测试应检查这些属性是否包含有效值。
    在那种情况下，测试不会考虑属性的实际初始化方式。它只是检查最终结果是否符合预期。

# mysql - MYSQL 时间戳问题

> ID：14667671
> 
> 赞同：0
> 
> 时间：2013-02-02T23:30:34.590
> 
> 标签：mysql, timestamp

我有一个名为“用户”的表，在该表中每个帐户都有一行。在每一行中都有一个名为“created”的列，在此我需要添加创建帐户时的时间戳？所以就像用户注册时一样，时间戳是自动添加的。此外，当行中的值更新时，我希望时间戳保持不变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:37:35.800

创建表，并为您创建的列应用默认值。

```
CREATE TABLE IF NOT EXISTS `Users` (
  `User_ID` int(11) NOT NULL,
... all other columns ...
  `Created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) 
```

用户更新信息时无需更新 Created（时间戳）。

只需更新需要更改的列（例如电子邮件、地址等）

> 我会说，对 Created 列使用触发器有点矫枉过正。最好改用默认值。我认为触发器会更好，例如 LastUpdated 列。即每次修改用户/帐户时都会更新此列。

# mysql - 如何将 mySQL 数据库中的数据相乘以模拟规模？

> ID：14667674
> 
> 赞同：1
> 
> 时间：2013-02-02T23:30:47.723
> 
> 标签：mysql, database, query-optimization, scalability

输入：

一个数据库，包括

*   不随用户数量或时间扩展的静态表
*   当用户与应用程序交互时增长的动态表（因此随着用户数量和时间而扩展）
*   包含 x 个用户的真实数据的数据库

任务：

*   扩展数据库以模拟更多用户

例子：

```
Tables: 

t_user (scale target)
UserId , Name
1 , John
2, Terry

t_post (dynamic)
AuthorId, PostId, TagId
1, 1 , 1
1, 2 , 2
1, 3 , 2
2, 4 , 1

t_tag (static)
TagId, Name
1, C#
2, Java 
```

比例因子 = 2 的所需输出

```
t_user
UserId , Name
1 , John
2, Terry
3 , John
4, Terry

t_post (dynamic)
AuthorId, PostId, TagId
1, 1 , 1
1, 2 , 2
1, 3 , 2
2, 4 , 1
1, 5 , 1
1, 6 , 2
1, 7 , 2
2, 8 , 1

t_tag (static)
TagId, Name
1, C#
2, Java 
```

当然，对于这么小的数据库，这可以在 MySQL 中完成，但我需要一个适用于具有 150 多个表的数据库的解决方案（为每个表编写扩展例程不是解决方案）和将数据库从 100 变为多达 10 000 个用户。

有谁知道可以做到这一点的专用工具或黑客？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:47:10.153

[Benchmark Factory for Databases](http://www.softpedia.com/get/Internet/Servers/Database-Utils/Benchmark-Factory-for-Databases-Freeware.shtml)看起来可以满足您的需求，或者您可以尝试使用[MySQL Benchmark Tool 。](http://dev.mysql.com/downloads/benchmarks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:53:21.233

我最终编写了自己的脚本。您将在下面找到一个简化版本（为清楚起见，省略了表格中的许多列）。这工作得很好。我能够非常有效地将数据库扩展 100 倍。希望这可以帮助

```
SET autocommit = 0;

START TRANSACTION;

SET @UMAX = (SELECT MAX(UserID) AS MX FROM t_user);
SET @QSMAX = (SELECT MAX(QuestionSetID) AS MX FROM t_question_set);
SET @QGMAX = (SELECT MAX(QuestionGroupID) AS MX FROM t_question_group);
SET @QMAX = (SELECT MAX(QuestionID) AS MX FROM t_question);
SET @TMAX = (SELECT MAX(TestID) AS MX FROM t_test);

DROP TABLE IF EXISTS t_seq;
CREATE table t_seq AS
    (
    SELECT
        1 S
    );
INSERT INTO t_seq (S) VALUES (2),(3),(4),(5),(6),(7),(8),(9),(10);    

INSERT INTO `t_user`
    (
        `UserID`,
        `Login`,
        `Password`,
    )
SELECT
    `UserID` + 1000000 + @UMAX * t_seq.S,
    concat(if(Login is null, '', Login), `UserID` + 1000000 + @UMAX * t_seq.S),
    `Password`,
FROM t_user,
    t_seq;

INSERT INTO `t_question_set`(`QuestionSetID`) 
SELECT `QuestionSetID` + 1000000 + @QSMAX * t_seq.S 
FROM t_question_set,t_seq;   

INSERT INTO `t_question_group`(
    `QuestionGroupID`, 
    `QuestionSetID`
    )
SELECT 
  `QuestionGroupID` + 1000000 + @QGMAX * t_seq.S,  
  `QuestionSetID` + 1000000 + @QSMAX * t_seq.S, 
FROM t_question_group,t_seq;

INSERT INTO `t_question`(`QuestionID`, `QuestionGroupID`)
SELECT
  `QuestionID` + 1000000 + @QMAX * t_seq.S, 
  `QuestionGroupID` + 1000000 + @QGMAX * t_seq.S, 
FROM t_question, t_seq;

INSERT INTO `t_test`
    (
        `TestID`,
        `QuestionSetID`,
        `UserID`,
            )
SELECT
    `TestID` + 1000000 + @TMAX * t_seq.S,
    `QuestionSetID` + 1000000 + @QSMAX * t_seq.S,
    `UserID` + 1000000 + @UMAX * t_seq.S,
FROM t_test,t_seq;

INSERT INTO `t_question_answer`(
    `QuestionID`, 
    `TestID`
    )
SELECT 
  `QuestionID` + 1000000 + @QMAX * t_seq.S,
  `TestID` + 1000000 + @TMAX * t_seq.S,
FROM t_question_answer,t_seq;

COMMIT; 
```

# android - Android ViewPagerIndicator 错误

> ID：14667679
> 
> 赞同：0
> 
> 时间：2013-02-02T23:31:06.100
> 
> 标签：android

Chcęzrobić Android Viewpager 作为图像幻灯片库。

我有这个（不幸的是，我有错误。）：

[代码 + LogCat](http://pastebin.com/1mpbGDbH)

致版主：请在此处粘贴代码，因为我不能……我有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:42:45.000

你肯定要启动一个片段作为一个活动

```
<activity
        android:name="com.test.PlaceDetailsFragment"
</activity> 
```

片段*包含*在活动中；您**不能**将 Fragment 作为 Activity 启动 - 它们不可互换。这意味着您必须创建一个包含 Fragment 的 SherlockActivity（调用 Activity `MainActivity`- 简单而有意义的名称），然后您应该能够启动所有内容（不保证 Fragment 代码是正确的，有太多代码要看） . [从本教程开始](http://developer.android.com/training/basics/firstapp/index.html)，然后继续[阅读本教程](http://developer.android.com/training/basics/fragments/support-lib.html)。它们都为您提供了大量有关如何正确构建 android 应用程序的信息。然后，一旦您掌握了主题，请不要忘记更改您的清单，使其指向 Activity。

```
<activity
    android:name="com.test.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

例如，在你的 main.xml 布局中，你应该有：

```
<fragment   android:name="com.test.PlaceDetailsFragment"
            android:id="@+id/fragment"
            android:layout_width="match_parent"
            android:layout_height="match_parent" /> 
```

# algorithm - 霍夫曼压缩中的最后一个字节

> ID：14667681
> 
> 赞同：8
> 
> 时间：2013-02-02T23:31:22.583
> 
> 标签：algorithm, compression, ascii, eof, huffman-code

我想知道在 Huffman Copression 中处理最后一个字节的最佳方法是什么。我在 C++ 中有一些不错的代码，可以很好地压缩文本文件，但目前我必须向我的编码文件写入编码字符的数量（嗯，它等于输入文件的大小），因为不知道如何处理最后一个字节更好的。

例如，要压缩的最后一个字符是“a”，代码是 011，我刚刚开始写入新字节，所以最后一个字节看起来像：011 + 大约 5 位垃圾，我将它们设为零，例如结束。当我对这个编码文件进行编码时，可能会发生代码 00000（或更少的零）是某些字符的代码，所以我的编码文件末尾会有一些垃圾字符。

正如我在第一段中所写的那样，我通过在编码文件中保存输入文件的字符数来避免这种情况，并且在编码时，我正在读取编码文件以达到该数字（而不是 EndOfFile，不要到达那些示例5 个零）。这不是很有效，编码文件的大小会增加很长的数字。

我怎样才能更好地处理这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T23:39:41.493

您的方法（将编码字节数写入文件）是一种完全合理的方法。如果你想尝试不同的途径，你可以考虑发明一个新的“伪EOF”字符来标记输入的结束（我将它表示为□）。每当您想压缩字符串*s*时，您都可以压缩字符串*s* □。这意味着当您构建编码树时，您将包含 □ 字符的一份副本，以便您拥有 □ 的唯一编码。然后，当您将字符串写入文件时，您将照常写出字符串的位字符，然后写出□的位模式。如果有剩余位，您可以任意设置它们。

这种方法的优点是，当您解码文件时，如果在任何时候发现 □ 字符，您可以立即停止解码位，因为您知道您已经到达文件末尾。这不需要您存储在任何地方写出的字节数——编码隐含地标记了它自己的端点。

此设置的缺点是它可能会增加某些字符使用的位模式的长度，因为除了所有其他字符之外，您还需要为 □ 分配一个位模式。

我教授一门入门编程课程，我们使用霍夫曼编码作为我们的任务之一。我们让学生使用上述方法，因为它比在文件内容之前写出位数或字节数要容易一些。有关更多详细信息，您可以查看[此讲义](http://www.stanford.edu/class/archive/cs/cs106b/cs106b.1126/handouts/220%20Huffman%20Encoding.pdf)或课程中的[这些讲座幻灯片](http://www.stanford.edu/class/archive/cs/cs106b/cs106b.1126/lectures/22/Slides22.pdf)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-16T20:38:17.470

我知道这是一个老问题，但仍然有一个替代方案，所以它可能会对某人有所帮助。

当您将压缩文件写入输出时，您可能有一些整数来跟踪您在当前字节中的位置（用于位移）。

```
char c, p;
p = '\0';
int curr = 7;
while (infile.get(c))
{
    std::string trav = GetTraversal(c);
    for (int i = 0; i < trav.size(); i++)
    {
        if (trav[i] == '1')
            p += (1 << curr);
        if (--curr < 0)
        {
            outfile.put(p);
            p = '\0';
            curr = 7;
        }
    }
}
if (curr < 7)
    outfile.put(p); 
```

在此块的末尾，`(curr+1)%8`等于最后一个数据字节中的垃圾比特数。然后，您可以将其存储为最后一个额外的字节，并在解压缩时记住它。

# c# - 为 MVC4 网站编写自己的会员处理程序是否常见？

> ID：14667691
> 
> 赞同：4
> 
> 时间：2013-02-02T23:32:02.493
> 
> 标签：c#, asp.net-mvc-4, simplemembership

我最近回到了 ASP.NET，我正在学习所有关于 MVC4 等的知识。让我烦恼的一件事是这些`SimpleMembership`东西。据说它是为了节省你的时间，一个很好的小会员系统都是为你制作的，但我除了让它工作的问题外什么都没有。

我宁愿只拥有自己的表、自己的身份验证代码、自己的处理程序。

这是常见的事情吗？很多人使用或丢弃 SimpleMembership 吗？

我不想成为一个必须使用 SimpleMembership 却不能让它工作的 Web 开发人员，这会很尴尬，但另一方面，它看起来又很麻烦和繁琐。

所有意见，事实和想法都受到赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T23:34:50.633

> 这是常见的事情吗？很多人使用或丢弃 SimpleMembership 吗？

如果 SimpleMembershipProvider 不符合您的应用程序的特定要求，那么滚动您自己的提供程序而不使用内置的提供程序是完全可以的。

> 很多人使用或丢弃 SimpleMembership 吗？

我不能谈论其他人，但我个人会根据具体的项目要求以及 SimpleMembershipProvider 是否适合他们或我是否应该实现自定义提供程序来决定。

另一方面，排除 SimpleMemeberhsipProvider 因为您不知道如何使用它或无法使其工作，是的，那会很尴尬。在这种情况下，我建议您开始阅读有关它的文献。当然，如果你遇到一些具体的问题，不要犹豫，展示你的代码到目前为止和你已经取得的进展，解释你遇到的确切困难，StackOveflow 上的人会非常愿意帮你。

# imagemagick - ImageMagick pdf转黑白pdf

> ID：14667700
> 
> 赞同：5
> 
> 时间：2013-02-02T23:32:55.033
> 
> 标签：imagemagick, imagemagick-convert, pdf-manipulation

我想使用 ImageMagick 将 pdf 文件转换为黑白 PDF 文件。但是我有两个问题：我使用这个命令：

```
convert -colorspace Gray  D:\in.pdf D:\out.pdf 
```

1.  但是这个命令只转换第一页......如何转换所有页面？
2.  使用此命令后，分辨率很糟糕......但如果我使用`-density 300`选项，文件大小增加了一倍以上。所以我想用同样的DPI设置，但是怎么用呢？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T14:15:02.750

假设您安装了所有必要的命令行工具，您可以执行以下操作：

1.  `pdfseparate`使用和`pdfunite`（[Poppler](http://poppler.freedesktop.org/)工具）拆分和连接 PDF 。
2.  `pdfinfo`使用加`grep`/提取原始密度`egrep`，例如`sed`. 这不能保证 PDF 文件的大小相同，只是 DPI 相同。

将它们放在一起，您可以拥有一系列 bash 命令，如下所示：

```
pdfseparate in.pdf temp-%d.pdf; for i in $(seq $(ls -1 temp-*.pdf | wc -l)); do mv temp-$i.pdf temp-$(printf %03d $i).pdf; done
for f in temp-*.pdf; do convert -density $(pdfinfo $f | egrep -o 'Page size:[[:space:]]*[0-9]+(\.[0-9]+)?[[:space:]]*x[[:space:]]*[0-9]+(\.[0-9]+)?' | sed -e 's/^Page size:\s*//'| sed -e 's/\s*x\s*/x/') -colorspace Gray {,bw-}$f; done
pdfunite bw-temp-*.pdf out.pdf
rm {bw-,}temp-*.pdf 
```

注意 1：对于 10-999 页 PDF 的正确排序，有一个肮脏的解决方法（`for`/ `wc`/ `seq`/ `printf`）（我不知道如何在 中放置前导零`pdfseparate`）。

注意 2：我猜 ImageMagick 将 PDF 视为另一个二进制图像文件，因此例如主要是文本文件，这将导致巨大的 PDF。因此，这是将基于文本的 PDF 转换为黑白的非常糟糕的方法。

# arrays - 三通表的计算比例

> ID：14667701
> 
> 赞同：0
> 
> 时间：2013-02-02T23:32:58.293
> 
> 标签：arrays, r, percentage

> **可能重复：**
> [如何为三维表创建 prop.table()？](https://stackoverflow.com/questions/13151394/how-to-create-a-prop-table-for-a-three-dimension-table)

我是**R**新手，我一直在研究三通表，需要一些帮助。以下是表格描述`dput`：

```
mytable <- structure(c(42L, 151L, 313L, 69L, 22L, 46L, 47L, 24L, 17L, 36L, 108L, 16L), .Dim = c(2L, 2L, 3L), .Dimnames = list(c("0", "1" ), c("female", "male"), c("adult", "child", "unknown")), class = "table") 
```

我想通过使用属性名称来访问该表的元素。例如： `mytable["0"]["female"]["adult"]`可以这样做吗？

另外，我正在尝试计算比例。这是我的桌子......

```
, , adult

      female male
    0     42  313
    1    151   69

    , , child

      female male
    0     22   47
    1     46   24

    , , unknown

      female male
    0     17  108
    1     36   16 
```

我想计算年龄组-sex-0|1 的比例。当我运行`prop.table(mytable)`它时，它正在计算细胞的比例，但它正在考虑所有三个年龄组。

```
, , adult

          female       male
    0 0.04713805 0.35129068
    1 0.16947250 0.07744108

    , , child

          female       male
    0 0.02469136 0.05274972
    1 0.05162738 0.02693603

    , , unknown

          female       male
    0 0.01907969 0.12121212
    1 0.04040404 0.01795735 
```

我想要每个年龄组和性别的比例。例如：在所有成年人中，有 1 的女性占 78%。我们如何做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:05:02.293

这就是你所追求的吗？

数据：

```
test <- structure(c(42L, 151L, 313L, 69L, 22L, 46L, 47L, 24L, 17L, 36L, 108L, 16L), .Dim = c(2L, 2L, 3L), .Dimnames = list(c("0", "1" ), c("female", "male"), c("adult", "child", "unknown")), class = "table") 
```

`2`获取每个子表 ( ) 中的列百分比 ( `3`)：

```
prop.table(test,c(2,3)) 
```

结果是：

```
, , adult

     female      male
0 0.2176166 0.8193717
1 0.7823834 0.1806283

, , child

     female      male
0 0.3235294 0.6619718
1 0.6764706 0.3380282

, , unknown

     female      male
0 0.3207547 0.8709677
1 0.6792453 0.1290323 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:44:48.587

一种更简单的方法可能是使您的表成为 data.frame：

```
df <- as.data.frame(mytable) 
```

然后根据需要获取零值：

```
df[df$Var1 == 0,] 
```

对于比例，你可以这样做：

```
df <- transform(df,total = ave(Freq, Var3, FUN = sum))
# get totals within adult/child/unkown

df <- transform(df,props = Freq/total)
# make proportions

#    > df
#   Var1   Var2    Var3 Freq total      props
#1     0 female   adult   42   575 0.07304348
#2     1 female   adult  151   575 0.26260870
#3     0   male   adult  313   575 0.54434783
#4     1   male   adult   69   575 0.12000000
#5     0 female   child   22   139 0.15827338
#6     1 female   child   46   139 0.33093525
#7     0   male   child   47   139 0.33812950
#8     1   male   child   24   139 0.17266187
#9     0 female unknown   17   177 0.09604520
#10    1 female unknown   36   177 0.20338983
#11    0   male unknown  108   177 0.61016949
#12    1   male unknown   16   177 0.09039548 
```

# html - Bootstrap 响应式列表定位

> ID：14667708
> 
> 赞同：-1
> 
> 时间：2013-02-02T23:33:49.857
> 
> 标签：html, css, twitter-bootstrap

我正在使用响应式功能使用最新的 Twitter Bootstrap 构建一个站点。

我的问题是我有两个并排显示的列表，但是当视口宽度小于 768px 宽时，尽管有足够的空间容纳它们，但它们看起来是堆叠的。我怎样才能解决这个问题？

另外，还有一些小事情：在页脚中，版权符号之前出现了一个奇怪的 A 符号……我该如何解决？此外，在 IE 中，两个元素不会像在所有其他浏览器上那样显示为内联。

HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGHicks Homepage</title>
    <link href="css/stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="container-fluid">

<!-- Header -->
    <div class="row-fluid">
        <div class="span5 logo">
            <a href="index.html"><img src="images/Logo.png" class="logo"></a>
        </div>
        <div class="span4 offset3 phone_numbers">
                    <img src="images/Phone_icon.png" class="pull-left phone_icon hidden-phone hidden-tablet">
                    <h4 class="pull-right align_right">Northampton <span>01604786464</span><br><br>Mobile <span>07710537685</span></h4>
        </div>
    </div>

    <!-- Navbar -->
    <div class="navbar">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="navbar_link navitem1"><a href="index.html"><strong>HOME</strong></a></li>
                            <li class="divider-vertical navitem2"></li>
                            <li class="navbar_link navitem3"><a href="http://www.google.com"><strong>GALLERY</strong></a></li>
                            <li class="divider-vertical navitem4"></li>
                            <li class="navbar_link navitem5"><a href="http://www.google.com"><strong>ABOUT US</strong></a></li>
                            <li class="divider-vertical navitem6"></li>
                            <li class="navbar_link navitem7"><a href="http://www.google.com"><strong>CONTACT</strong></a></li>
                        </ul>
                    </div>
                </div>
            </div>
    </div>

    <!-- Content -->
    <div class="row-fluid content">
        <div class="span6">
            <div id="homepage_carousel" class="carousel slide">
                <div class="carousel-inner">
                    <div class="active item"><img src="images/Homepage/640x480px-City-&-Guilds.png" /></div>
                    <div class="item"><img src="images/Homepage/640x480px-Domestic-&-Commercial.png" /></div>
                    <div class="item"><img src="images/Homepage/640x480px-Small-One-Off-Jobs.png" /></div>
                </div>
             </div>
        </div>
        <div class="span6">
            <div class="row-fluid homepage_text">
                <div class="span12">
                    <h5 class="text_justify">Welcome to AGHicks Building Services website! We are a Northampton based, family run company with over 20 years experience. Hardwork, efficiency and reliability are instilled throughout the workforce and we have gained a strong reputation through word of mouth.</h5>
                </div>
            </div>
            <div class"row-fluid">
                <div class="span12 icon_container">
                    <img src="images/Homepage/Map_pin.png" class="grid_item grid_item1" >
                    <h5 class="redtext grid_item grid_text">Northampton Based</h5>
                    <img src="images/Homepage/Quote.png" class="grid_item grid_item2" >
                    <h5 class="redtext grid_item grid_text">Free Quotes</h5>
                </div>
                <div class="span12 icon_container2">
                    <img src="images/Homepage/Tools.png" class="grid_item grid_item3" >
                    <h5 class="redtext grid_item grid_text">No Job Too Small</h5>
                    <img src="images/Homepage/Piggybank.png" class="grid_item grid_item4" >
                    <h5 class="redtext grid_item grid_text">Competitive Prices</h5>
                </div>                    
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <h5 class="redtext centered">OUR SERVICES INCLUDE</h5>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span5">
                    <ul>
                        <li><strong>Conservatories</strong></li>
                        <li><strong>Extensions</strong></li>
                        <li><strong>Window & Door Refits</strong></li>
                        <li><strong>Bricklaying</strong></li>
                        <li><strong>Driveways</strong></li>
                        <li><strong>Carpentry</strong></li>
                        <li><strong>Patios</strong></li>
                        <li><strong>Stonework</strong></li>
                    </ul>
                </div>
                <div class="span6 offset1 lists">
                    <ul>
                        <li><strong>Plastering</strong></li>
                        <li><strong>Kitchen & Bathroom Refits</strong></li>
                        <li><strong>Tiling</strong></li>
                        <li><strong>Fencing</strong></li>
                        <li><strong>Fascias</strong></li>
                        <li><strong>Garages & Carports</strong></li>
                        <li><strong>Guttering</strong></li>
                    </ul>
                </div>  
            </div> 
   </div>

   <!-- Footer -->
   <div class="row-fluid footer_wrapper">
        <div class="span12">
            <div class="row-fluid footer">
            <div class="span5">
                <p class="footer_text"><strong>Copyright © AGHicks Building Services 2012 - All rights reserved.<br>Registered Address - 19 Bentley Close, Rectory Farm, Northampton, NN3 5JS.</strong></p>
            </div>
            <div class="span4 offset3 align_right">
                <p class="footer_text"><strong>Web Design Services and SEO from <a href="http://www.benmil.tumblr.com/me">Ben Mildren</a></strong></p>
            </div>
            </div>
        </div>

   </div>     
</div>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
       $('.carousel').carousel({
           interval: 3500
        })
    </script>
</body> 
```

CSS 在这里： http: [//gw.gd/Ooky](http://gw.gd/Ooky)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:03:26.740

正如@Omega 所指出的，<768px 的列堆叠是默认的引导行为。不过，您可以使用一些自定义 CSS 覆盖它。这里有一个类似问题的帖子：[Stack elements in twitter bootstrap media grid different](https://stackoverflow.com/questions/14548957/stack-elements-in-twitter-bootstrap-media-grid-differently)

关于页脚中的奇怪符号，首先检查您的页眉是否包括：

`<meta charset="UTF-8">`

祝你好运！

# c++ - 使用字符串键初始化结构映射

> ID：14667710
> 
> 赞同：0
> 
> 时间：2013-02-02T23:34:03.507
> 
> 标签：c++, map, static, struct, init

我有一个

```
struct OpDesc {
        std::string  OPName;
        size_t       OPArgsMin;
        bool         IsVaribaleArgsNum;
        bool         IsOPChange;
        std::string  ChangeNodeOP;
        std::string  ChangeNodeLabel;
        bool         IsOPDelete;
        const char*  ErrMsg;
    }; 
```

并想初始化一个`std::map<string, OpDesc>`.

我试过这样做：

```
typedef std::map<std::string,struct OpDesc> OpDescMap;
OpDescMap opDesc;
opDesc["StoreOp"] = {"StoreOp",2,false,false,"","",false,""};
/// etc. 
```

我无法用 VS10 编译它。我得到：`error C2059: syntax error : '{'`

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:44:33.457

可以通过为`OpDesc`

```
OpDesc(const std::string&  oPName="StoreOp",
      size_t oPArgsMin = 0,
      bool  isVaribaleArgsNum = false,
      bool  isOPChange=false,
      const std::string&  changeNodeOP = "",
      const std::string&  changeNodeLabel = "",
      bool  isOPDelete = false,
      const char*  errMsg= "" )
  :OPName(oPName),
  OPArgsMin(oPArgsMin),
  IsVaribaleArgsNum(isVaribaleArgsNum),
  IsOPChange(isOPChange),
  ChangeNodeOP(changeNodeOP),
  ChangeNodeLabel(changeNodeLabel),
  IsOPDelete(isOPDelete),
  ErrMsg(errMsg)
{
}

OpDescMap opDesc;
opDesc["StoreOp"] = OpDesc("StoreOp", 2, false, false, "", "", false, ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:45:36.673

An alternative to @billz's solution is to construct the object and insert it into the map in two separate steps:

```
OpDesc od = { "StoreOp",2,false,false,"","",false,"" };
opDesc["StoreOp"] = od; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T23:45:46.463

Your syntax is valid C++11 (see [Uniform Initialization](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)), however, VS10 does not support it. It was only added to VS12 (see [C++ features in VS2012](https://stackoverflow.com/questions/7421825/c11-features-in-visual-studio-2012)). One option is to upgrade your compiler to one that has better conformance to C++11.

If you can't upgrade, you'll have to fallback to C++03 syntax. You can either use an intermediate variable:

```
OpDesc op = {"StoreOp", 2, false, false, "", "", false, ""};
opDesc[op.OPName] = op; 
```

Or add a constructor to your structure:

```
struct OpDesc {
   // ... all fields
   OpDesc(std::string const& opName, size_t opArgsMin, bool isVariableArgsNum,
          bool isOpChange, std::string const& changeNameOp,
          std::string const& changeNodeLabel, bool isOpDelete,
          char const* errMsg)
   : OPName(opName), OPArgsMin(opArgsMin), IsVariableArgsNum(isVariableArgsNum),
     IsOpChange(isOpChange), ChangeNameOp(changeNameOp),
     ChangeNodeLabel(changeNodeLabel), IsOpDelete(isOpDelete),
     ErrMsg(errMsg) {}
};

opDesc["StoreOp"] = OpDesc("StoreOp", 2, false, false, "", "", false, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:48:00.527

You can use another compiler: Your source code works with clang++ V 3.3 and gcc 4.7.2.

# typescript - 如何在 TypeScript 中将字符串转换为数字？

> ID：14667713
> 
> 赞同：1291
> 
> 时间：2013-02-02T23:34:18.517
> 
> 标签：typescript

给定一个数字的字符串表示形式，如何将其转换为`number`TypeScript 中的类型？

```
var numberString: string = "1234";
var numberValue: number = /* what should I do with `numberString`? */; 
```

* * *

## 回答 #1

> 赞同：1980
> 
> 时间：2013-02-03T01:19:52.857

[就像](https://stackoverflow.com/questions/1133770/convert-a-string-to-an-integer) [在 JavaScript](https://stackoverflow.com/questions/17106681/parseint-vs-unary-plus-when-to-use-which/17106702#17106702)中一样，您可以使用[`parseInt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt)or[`parseFloat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseFloat)函数，或者简单地使用一元运算`+`符：

```
var x = "32";
var y: number = +x; 
```

所有提到的技术都将具有正确的键入并正确解析简单的十进制整数字符串`"123"`，`"123.45"`如`null`

[![换算表](../Images/daaf450527c89817227c306894929323.png)](https://i.stack.imgur.com/QNMfI.png) 取自 [这个答案的表格](https://stackoverflow.com/a/17106702/1483676)

* * *

## 回答 #2

> 赞同：1374
> 
> 时间：2016-03-21T14:44:16.827

执行此操作的 Typescript 方法是：

```
Number('1234') // 1234
Number('9BX9') // NaN 
```

在这里回答：[https ://stackoverflow.com/a/23440948/2083492](https://stackoverflow.com/a/23440948/2083492)

* * *

## 回答 #3

> 赞同：131
> 
> 时间：2017-02-08T20:07:31.170

对于我们的 Angular 用户：

在**模板**内，`Number(x)`并`parseInt(x)`引发错误，并且`+x`没有效果。有效的转换将是`x*1`or `x/1`。

* * *

## 回答 #4

> 赞同：115
> 
> 时间：2017-06-10T19:31:22.877

如此处的其他答案所示，有多种方法可以进行转换：

```
Number('123');
+'123';
parseInt('123');
parseFloat('123.45') 
```

不过，我想再提一件事`parseInt`。

使用时，**总是传递 radix 参数**`parseInt`是有意义的。对于十进制转换，即. 这是参数的默认值，因此*可以*省略它。对于二进制，它是一个和十六进制。实际上，任何介于 2 和 36 之间的基数都可以。**`10`*`2``16`***

 ***```
parseInt('123')         // 123 (don't do this)
parseInt('123', 10)     // 123 (much better)

parseInt('1101', 2)     // 13
parseInt('0xfae3', 16)  // 64227 
```

在一些 JS 实现中，`parseInt` **将前导零解析为八进制**：

> 尽管 ECMAScript 3 不鼓励并且 ECMAScript 5 禁止，但许多实现将以前导 0 开头的数字字符串解释为八进制。以下可能有八进制结果，也可能有十进制结果。**始终指定一个基数以避免这种不可靠的行为。**
> 
> — [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt#Octal_interpretations_with_no_radix)

代码变得更清晰的事实是指定 radix 参数的一个很好的副作用。

由于`parseFloat`仅解析基数 10 中的数字表达式，因此此处不需要基数参数。

更多关于这个：

*   [为什么我们需要使用基数？（所以问题）](https://stackoverflow.com/questions/6611824/why-do-we-need-to-use-radix)
*   [所以回答“parseInt() 和 Number() 有什么区别？”](https://stackoverflow.com/a/4090577/3861083)

* * *

## 回答 #5

> 赞同：65
> 
> 时间：2013-02-05T13:43:38.247

在阐述 Ryan 所说的内容时，TypeScript 总体上包含了 JavaScript 习语。

```
var n = +"1"; // the unary + converts to number
var b = !!"2"; // the !! converts truthy to true, and falsy to false
var s = ""+3; // the ""+ converts to string via toString() 
```

[JavaScript 类型转换](http://jibbering.com/faq/notes/type-conversion/)中所有有趣的深入细节。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2018-11-03T12:02:57.660

## 字符串到数字的转换：

在 Typescript 中，我们通过以下方式将字符串转换为数字：

*   `parseInt()`: 这个函数有 2 个参数，第一个是要解析的字符串。第二个是基数（数学数字系统中的基数，例如十进制为 10，二进制为 2）。然后返回整数，如果第一个字符不能转换成数字，`NaN`则返回。
*   `parseFloat()`：将我们要解析的值作为参数，并返回一个浮点数。如果该值不能转换为数字，`NaN`则返回。
*   `+`运算符：适当使用的运算符可以将字符串值强制转换为数字。

## 例子：

```
/*    parseInt   */

// note that a whole number is returned, so it will round the number
console.log(parseInt('51.023124'));

// parseInt will 'cut off' any part of the string which is not a number
console.log(parseInt('5adfe1234'));

// When the string starts with non number NaN is returned
console.log(parseInt('z123'));

console.log('--------');

/*    parseFloat   */

// parses the string into a number and keeping the precision of the number
console.log(typeof parseFloat('1.12321423'));

// parseFloat will 'cut off' any part of the string which is not a number
console.log(parseFloat('5.5abc'));

console.log('--------');

/*   + operator   */

let myString = '12345'

console.log(typeof +myString);

let myOtherString = '10ab'

// + operator will not cut off any 'non number' string part and will return NaN
console.log(+myOtherString);
```

## 使用哪个？

1.  `parseInt()`当您希望将字符串转换为**整数**时使用。但是，数据类型仍然是浮点数，因为**TS 中的所有数值都是浮点值**。当您需要指定要解析的数字的基数时，也可以使用此方法。
2.  `parseFloat()`当您需要将字符串解析为**浮点数时**使用。
3.  您可以`+`在字符串前使用运算符将​​其强制转换为**浮点数**。这样做的好处是语法很短。

* * *

## 回答 #7

> 赞同：29
> 
> 时间：2017-11-21T05:51:09.663

您可以按照以下任一方式进行操作。

```
var str = '54';

var num = +str; //easy way by using + operator
var num = parseInt(str); //by using the parseInt operation 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2019-12-10T08:20:16.003

最简单的方法是使用 +strVal 或 Number(strVal)

例子：

```
let strVal1 = "123.5"
let strVal2 = "One"
let val1a = +strVal1
let val1b = Number(strVal1)
let val1c = parseFloat(strVal1)
let val1d = parseInt(strVal1)
let val1e = +strVal1 - parseInt(strVal1)
let val2a = +strVal2

console.log("val1a->", val1a) // 123.5
console.log("val1b->", val1b) // 123.5
console.log("val1c->", val1c) // 123.5
console.log("val1d->", val1d) // 123
console.log("val1e->", val1e) // 0.5
console.log("val2a->", val2a) // NaN
```

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2017-05-31T07:56:41.127

有一些内置函数，例如，`parseInt()`在Typescript 中，您可以使用这些函数。`parseFloat()``Number()`

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-08-30T16:51:21.933

```
var myNumber: number = 1200;
//convert to hexadecimal value
console.log(myNumber.toString(16)); //will return  4b0
//Other way of converting to hexadecimal
console.log(Math.abs(myNumber).toString(16)); //will return  4b0
//convert to decimal value
console.log(parseFloat(myNumber.toString()).toFixed(2)); //will return  1200.00
```

[在线号码转换工具](https://www.rapidtables.com/convert/number/index.html,)

[数字转换器](https://unitconverter.net/number-converter)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-12-13T10:12:45.103

使用 => convertstring('10.00') 调用函数

parseFloat(string) => 可以用来转换成浮点数，toFixed(4) => 转换成多少小数

parseInt(str) => 可以用来转换成整数

```
convertstring(string){
    let number_parsed: any = parseFloat(string).toFixed(4)
    return number_parsed
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-05-11T06:23:09.850

打字稿需要知道我们`var a`将要以太`Number || String`

```
export type StringOrNumber = number | string;

export function toString (v: StringOrNumber) {
 return `${v}`;
}

export function toNumber (v: StringOrNumber) {
 return Number(v);
}

export function toggle (v: StringOrNumber) {
 return typeof v === "number" ? `${v}` : Number(v);
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-08-09T10:21:21.947

有三种方式

```
 let a = + '12'; 
 let b = parseInt('12' , 10); // 10 means decimal number
 let c = Number('12'); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-08-13T23:50:25.797

如果您只是在谈论类型，正如其他人所说， parseInt() 等将返回正确的类型。此外，如果出于某种原因该值可能是数字或字符串并且您不想调用 parseInt()，则 typeof 表达式也将转换为正确的类型：

```
function f(value:number|string){
  if(typeof value==='number'){
   // value : number
  }else {
   // value : string
  }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-08-24T17:21:30.210

这是 StrToNumber 函数的修改版本。和以前一样，

1.  它允许可选符号出现在数值的前面或后面。
2.  它执行检查以验证字符串的头部或尾部只有一个符号。
3.  如果发生错误，则返回“通过”默认值。

这个回复是一个可能的解决方案，比我之前的帖子更适合最初的问题。

```
 static StrToNumber(val: string, defaultVal:number = 0): number
   {        
      let result:number = defaultVal;      
      if(val == null) 
         return result;            
      if(val.length == 0) 
         return result;      
      val = val.trim();
      if(val.length == 0) 
         return(result);
      let sign:number = 1;     
      //
      // . obtain sign from string, and place result in "sign" local variable. The Sign naturally defaults to positive
      //     1 for positive, -1 for negative.
      // . remove sign character from val. 
      //      Note, before the function returns, the result is multiplied by the sign local variable to reflect the sign.
      // . error check for multiple sign characters
      // . error check to make sure sign character is at the head or tail of the string
      //              
      {  
         let positiveSignIndex = val.indexOf('+');
         let negativeSignIndex = val.indexOf('-');
         let nTailIndex = val.length-1;
         //
         // make sure both negative and positive signs are not in the string
         //
         if( (positiveSignIndex != -1) && (negativeSignIndex != -1) ) 
             return result;
         //
         // handle postive sign
         //
         if (positiveSignIndex != -1)
         {
            //
            // make sure there is only one sign character
            //
            if( (positiveSignIndex != val.lastIndexOf('+')) )
             return result;     
             //
             // make sure the sign is at the head or tail
             //
             if( (positiveSignIndex > 0) && (positiveSignIndex < nTailIndex )  )
                 return result;
             //
             // remove sign from string
             //
             val = val.replace("+","").trim();                 
         }    
         //
         // handle negative sign
         //
         if (negativeSignIndex != -1)
         {
            //
            // make sure there is only one sign character
            //
            if( (negativeSignIndex != val.lastIndexOf('-')) )
             return result;     
             //
             // make sure the sign is at the head or tail
             //
             if( (negativeSignIndex > 0) && (negativeSignIndex < nTailIndex )  )
                 return result;
             //
             // remove sign from string
             //
             val = val.replace("-","").trim();  
             sign = -1;                 
         }               
         //
         // make sure text length is greater than 0
         //       
         if(val.length == 0) 
            return result;                             
      }   
      //
      // convert string to a number
      //
      var r = +(<any>val);
      if( (r != null) && (!isNaN(r)) )
      {          
         result = r*sign;         
      }
      return(result);    
   }
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-11T07:57:55.653

有很多人在 ionic 编程情况下遇到数据类型转换很难解决的问题，因为这种语言是新的，这里我将详细说明如何让用户知道如何将数据 ionic 类型转换为字符串数据输入整数。

在java、php、c、c++等编程语言中...都可以轻松移动数据，那么在ionic中也可以为我们创建数据转换也是一种简单的方法，尤其是在其他编程语言中。

```
this.mPosition = parseInt(""); 
```

* * *

## 回答 #17

> 赞同：-4
> 
> 时间：2021-07-26T08:14:24.217

在您可以使用的最新版本中`as`，示例如下：

```
var numberString: string = "1234";
const numberValue = numberString as number; 
```***

# mvvm-light - ICommand 不使用 ItemTemplate 中的按钮触发

> ID：14667714
> 
> 赞同：1
> 
> 时间：2013-02-02T23:34:36.783
> 
> 标签：mvvm-light

我目前正在使用 ICommand 进行测试，我想知道为什么 ICommand 不使用 ListBox.ItemTemplate 中的按钮触发。但是在模板之外使用时，它可以工作。

这是窗口 xaml

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1" x:Class="WpfApplication1.Window2"
        Title="Window2" Height="300" Width="300">
    <Window.DataContext>
        <local:W2VM/>
    </Window.DataContext>

    <Grid>
        <ListBox x:Name="listHistory" BorderThickness="0" Margin="0" Padding="0" HorizontalContentAlignment="Stretch" ItemsSource="{Binding History}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <TextBlock Text="{Binding ''}" />
                        <Button 
                            Grid.Column="1" 
                            HorizontalAlignment="Right" 
                            x:Uid="btnDeleteHistoryItem" 
                            x:Name="btnDeleteHistoryItem" 
                            Content="r" 
                            FontFamily="Marlett" 
                            Visibility="Hidden" Command="{Binding MeClick}" 

                            />
                    </Grid>

                    <DataTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Visibility" TargetName="btnDeleteHistoryItem" Value="Visible" />
                        </Trigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <Button Content=" exit " VerticalAlignment="Bottom" Command="{Binding ExitCommand}" />
    </Grid>
</Window> 
```

这是完整的 ViewModel 代码

```
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for Window2.xaml
    /// </summary>
    public partial class Window2 : Window
    {
        public Window2()
        {
            InitializeComponent();
        }
    }

    public class W2VM : ViewModelBase
    {
        public List<string> _History = new List<string>();
        public List<string> History
        {
            get { return this._History; }
        }

        public ICommand MeClick
        {
            get;
            internal set;
        }

        public ICommand ExitCommand
        {
            get;
            internal set;
        }

        public W2VM()
        {
            this.History.AddRange(new string[] {
                "jayson", "hello", "world"
            });

            this.MeClick = new RelayCommand(Test);
            this.ExitCommand = new RelayCommand(Exit);
        }

        void Exit()
        {
            Application.Current.Shutdown();
        }

        void Test()
        {
            Debug.WriteLine("hello world");

            MessageBox.Show("do something incredible");
        }
    }
} 
```

Test() 不触发

* * *

好的，我得到了它的工作..

```
<Window.Resources>
    <me:W2VM x:Key="local" />
</Window.Resources> 
```

代替

```
<Window.DataContext>
    <local:W2VM/>
</Window.DataContext> 
```

和我的窗格

```
<Grid DataContext="{StaticResource local}">
    <ListBox x:Name="listHistory" BorderThickness="0" Margin="0" Padding="0" HorizontalContentAlignment="Stretch" ItemsSource="{Binding History}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <TextBlock Text="{Binding ''}" />
                    <Button 
                        Grid.Column="1" 
                        HorizontalAlignment="Right" 
                        x:Uid="btnDeleteHistoryItem" 
                        x:Name="btnDeleteHistoryItem" 
                        Content="r" 
                        FontFamily="Marlett" 
                        Visibility="Hidden" Command="{Binding MeClick, Source={StaticResource local}}"  />
                </Grid>

                <DataTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Visibility" TargetName="btnDeleteHistoryItem" Value="Visible" />
                    </Trigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>

    <Button Content=" exit " VerticalAlignment="Bottom" Command="{Binding ExitCommand}" />
</Grid> 
```

现在这将提出另一个问题。

刚刚路由 btnDeleteHistoryItem 命令时，我如何知道单击了哪个 ListViewItem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:20:33.690

Are you using the relaycommand of mvvm-light? I use command parameters to pass information to the command method:

```
<Button 
                        Grid.Column="1" 
                        HorizontalAlignment="Right" 
                        x:Uid="btnDeleteHistoryItem" 
                        x:Name="btnDeleteHistoryItem" 
                        Content="r" 
                        FontFamily="Marlett" 
                        Visibility="Hidden" Command="{Binding MeClick, Source=StaticResource local}}" 
                        CommandParameter="YourUniqueIdentifyingVariable"  /> 
```

and then in your view model:

```
public RelayCommand<string> MeClick{
    get { return _MyClick; }
    private set { _MyClick = value; }
}

public New()
{

    MeClick = new RelayCommand<string>(MySub, MySubIsEnabled);
}

private void MySub(string sParam)
{
    //do stuff here, YourUniqueIdentifyingVariable is sParam
}

private bool MySubIsEnabled(string sParam)
{
    return true;
} 
```

you can bind "YourUniqueIdentifyingVariable" to the ID of the record or some other value that you can process in your command method

Code is untested but should work

# android-fragments - 片段的任何类似功能，例如 onActivityResult()

> ID：14667715
> 
> 赞同：1
> 
> 时间：2013-02-02T23:34:39.687
> 
> 标签：android-fragments, fragment, android-lifecycle, onresume

在我的应用程序中，我有这样的场景，当用户单击 FragmentA 中的按钮时，它将显示 FragmentB。当一个按钮单击 FragmentB 时，它将转到 FragmentC。

从 A->B->C 导航时，我会将我的活动标题分别设置为“A”、“B”和“C”。我使用的这个流程，

```
public class FragmentC
   onCreateView(){
      mTxtHeaderTitle.setText(getString(R.string.fragC));
   } 
} 
```

现在的问题是，如何在用户按下后退键并导航回 B 时将标题栏设置为“C”（ C -> B ）？

是否有任何方法回调可用于执行此操作？

```
onFragmentResult() as like onActivityResult() in Activity? 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:25:07.920

您可以使用 Fragment 的[onResume()](http://developer.android.com/reference/android/app/Fragment.html)回调方法来设置标题。

每当 Fragment 处于焦点并与用户交互时，系统都会调用 onResume()。

# qt - QTabWidget 在顶部和右侧都有选项卡。

> ID：14667720
> 
> 赞同：0
> 
> 时间：2013-02-02T23:35:17.907
> 
> 标签：qt, qt4, qt5, qtabwidget, qtstylesheets

我有`QTabWidget`两个标签。我希望一个在东边，另一个在顶部。

我已经尝试过这些样式表，但到目前为止我还无法做到。

```
#tab_basic::top{
}

#tab_advanced::right{
} 
```

或者

```
#tab_basic{
position:top;
}

#tab_advanced{
position:right;
} 
```

或者

```
#tab_basic::top{
}

#tab_advanced::east{
} 
```

或者

```
#tab_basic{
position:top;
}

#tab_advanced{
position:east;
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:36:45.727

`QTabWidget`据我所知，你无法做到这一点。您可以做的是创建两个 QTabBar 小部件并在`QGridLayout`. 作为中心小部件，您可以使用 a`QStackedWidget`并且根据激活的选项卡，您可以控制要`QStackedWidget`显示的小部件。

# asp.net - Chrome 和 Firefox 中的单页应用程序错误？

> ID：14667721
> 
> 赞同：1
> 
> 时间：2013-02-02T23:35:32.240
> 
> 标签：asp.net, html, css, asp.net-mvc, asp.net-mvc-4

**更新：** 201202 更新的新版本修复了它。

我尝试了以下，

1.  创建一个新的SPA项目（Asp.Net MVC 4.0 2012.2更新）
2.  使用 NuGet 升级所有引用。
3.  运行 Web 应用程序。为默认的“Todo”应用程序创建一个测试帐户并登录。

在右上角，页面显示“Hello, test | Log off”。但是，这两个链接不响应鼠标悬停在 Chrome 和 Firefox 中。实际上，当您将鼠标光标移动到单词“off”的“ff”时，注销会起作用。

有什么快速解决办法吗？如何向 Microsoft 报告该错误？

**更新：**

我发现删除以下样式将使两个链接起作用。

```
#userSettings {
float: right;
}

<div id="userSettings">

    Hello, <a class="username" href="/Account/Manage" title="Manage">test</a>
<form action="/Account/LogOff" id="logoutForm" method="post" novalidate="novalidate">
  <input name="__RequestVerificationToken" type="hidden" value="xKY5UfTGZG8gx3NVn6fHLGcV_LgdR9Hyk0dqxJm3GzHY02_WXxHoxDI00RdvWQagTvthHaH6vcuDTN-Fu_us7T2V08fJXyoePjOmLOZzX3M1">       
  <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
</form>    

</div>
<div id="body">...</div> 
```

<Div id="userSettings"> 的计算样式

```
color: rgb(51, 51, 51);
display: block;
float: right;
font-family: 'Segoe UI', Verdana, Helvetica, sans-serif;
font-size: 19px;
height: 25px;
width: 157px; 
```

<div id="body> 的计算样式

```
color: rgb(51, 51, 51);
display: block;
font-family: 'Segoe UI', Verdana, Helvetica, sans-serif;
font-size: 19px;
height: 476.71875px;
width: 980px; 
```

似乎 div “body” 覆盖了 div “userSettings”。但是，不确定为什么鼠标光标悬停在“注销”的“ff”上后会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:52:26.930

只是大胆猜测，但这听起来像是一个 boxmodel 问题，可能通过 clearfix 解决。

# heroku - 将 github 应用克隆到 heroku

> ID：14667722
> 
> 赞同：2
> 
> 时间：2013-02-02T23:35:36.237
> 
> 标签：heroku, github, push, git-clone

我是新手，我想将一个应用程序从 github 克隆到 heroku。我试过这个命令

```
heroku git:clone git@github.com:[Creator]/[APPname].git [HerokuappDirectory] 
```

但我明白了 `Resource Not Found`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T03:26:44.297

像往常一样克隆 repo `git clone git@github...` 。然后 cd 进入目录并运行`heroku create [an optional app name]`. 然后，您将设置两个 Git 遥控器，一个用于 repo（原点），一个用于 heroku 应用程序（heroku）。然后'git push heroku master'将部署到heroku。

# windows - 如何在 Windows 8 中打开 Windows 应用商店应用程序

> ID：14667726
> 
> 赞同：0
> 
> 时间：2013-02-02T23:36:10.567
> 
> 标签：windows, windows-store

所以我习惯于编写windows窗体应用程序。在桌面应用程序中，我可以通过以下方式打开它们：

```
 Dim p As New System.Diagnostics.Process
    p.StartInfo.FileName = "notebook.exe"
    p.Start() 
```

如果我想为 Windows 商店打开天气应用程序之类的东西，那么这种方法不起作用。有人可以指导我获取有关如何完成此任务的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:51:27.760

看看 IApplicationActivationManager::ActivateInstance。 [http://msdn.microsoft.com/en-us/library/windows/desktop/hh706902.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh706902.aspx)

如果您的目标是支持自动测试，请查看此博客条目[http://blogs.msdn.com/b/windowsappdev/archive/2012/09/04/automating-the-testing-of-windows-8-apps.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/09/04/automating-the-testing-of-windows-8-apps.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:42:02.193

我没明白，你想从其他 Metro 应用程序中打开 Metro 应用程序吗？或来自桌面应用程序的 Metro 应用程序或 Metro 应用程序的桌面应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T09:53:38.710

检查这是否回答了您的问题@ [http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/79092f3f-917d-41e5-a67f-c25e851bbb14/how-to-start-and-end-metro-applications -来自-c-code](http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/79092f3f-917d-41e5-a67f-c25e851bbb14/how-to-start-and-end-metro-applications-from-c-code)

# ember.js - 在 Ember 中多次渲染部分

> ID：14667727
> 
> 赞同：4
> 
> 时间：2013-02-02T23:36:12.513
> 
> 标签：ember.js

我试图在模板中多次渲染视图，每次使用不同的数据，具体如下：

```
<script type="text/x-handlebars" data-template-name="foobar">
    {{render "_people" peopleArray}}
    <!-- ... -->
    {{render "_people" anotherPeopleArray}}
</script>

<script type="text/x-handlebars" data-template-name="_people">
    {{#each person in controller}}
       {{person.name}}
    {{/each}}
</script> 
```

我收到 JS 错误：“断言失败：此视图已呈现”。

如果我将其更改为`{{render "_people"}}`，`{{partial "people"}}`它将呈现多次，但我不知道如何将不同的数据传递到那里。

为了澄清，我能够创建一个部分/视图，我可以将数据传递给它，并且可以多次调用。我确定这很简单，我只是缺少了一些东西。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:40:08.830

您只能使用`{{render}}`一次。如果您需要多次执行，请`{{control}}`改用，例如：

`{{control "people" peopleArray}}`

这将创建一个`people`模板，`PeopleView`并将`PeopleController`其`content`设置为`peopleArray`

# c - C将浮点数组打印成列

> ID：14667732
> 
> 赞同：0
> 
> 时间：2013-02-02T23:36:42.030
> 
> 标签：c, loops, multiple-columns, modulus, output-formatting

我正在尝试将 100 个 lf 值的数组打印成十列。我计划在每行中达到第十个数据值时插入一个新行，但是我的 if 语句有问题。“左操作数必须是 1 值”是我一直遇到的错误。这是代码：

```
for (x=0; x<100; x++)
    {
    if (x % 10 = 0)
        {
        printf("\n");
        }
    printf("|%-6.2lf|", i[x]);  
    } 
```

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:38:43.557

问题是这一行：

```
if (x % 10 = 0) 
```

那应该是双等号：

```
if (x % 10 == 0) 
```

一个常见的错字。

# javascript - 鼠标悬停时根据方向翻转图像

> ID：14667735
> 
> 赞同：0
> 
> 时间：2013-02-02T23:37:03.087
> 
> 标签：javascript, image, animation, onclick

有没有办法让这个脚本根据指针的方向切换图像？

例如，如果您有一条鱼，并且将鼠标移到鱼的右侧，它会切换到面向该方向的图像。当您将指针移到鱼的左侧时，它会指向另一个方向。

[演示](http://jsfiddle.net/vhDpG/ "演示")

**JAVASCRIPT**

```
$("#foo").mousemove(function(event) {
    $("#bee1").stop().animate({left: event.pageX, top: event.pageY}, 300)
}); 
```

**HTML**

```
<div id="foo">
<div id="bee1">MoveMe</div>
</div> 
```

**CSS**

```
#foo{
  height:500px;
  width:400px;
}
#bee1{
  position:absolute;
  border:1px solid #ccc;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:53:58.703

```
$("#foo").mousemove(function(event) {
        var bee = $("#bee1");
        var position = bee.position();
        var mousey = event.pageX;

    if(position.left > mousey) {
        $("#bee1").html("left");
    } else {
        $("#bee1").html("right");
    }

        $("#bee1").stop().animate({left: event.pageX, top: event.pageY}, 300);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:54:12.883

只需检查当前鼠标位置 x 是否大于图像位置并`src`相应地更改图像：

```
$("#foo").mousemove(function(event) {
    var mousePos = {x: event.pageX, y: event.pageY},
        elPos = imgEl.offset();
    if(mousePos.x > elPos.left){
        direction = '-->';
    }
    else{
        direction = '<--';
    }
    imgEl.text(direction);
    imgEl.stop().animate({left: event.pageX, top: event.pageY}, 300)
}); 
```

[http://jsfiddle.net/WfQwZ/](http://jsfiddle.net/WfQwZ/)

# jquery - 如何只滑动某些元素？

> ID：14667736
> 
> 赞同：3
> 
> 时间：2013-02-02T23:37:07.983
> 
> 标签：jquery, jquery-mobile, swipe

我有几个`divs`，但它们在语义上没有联系。因此，我想拥有几套`divs`.

例子：

我希望能够在 {1,2,3,4,5} 之间左右滑动。其中一些页面有一个按钮，它应该打开（与`slideup`页面转换）子页面。例如，4 中的按钮将向上滑动页面 4.1。然后我希望能够在 4.1、4.2 和 4.3 之间再次左右滑动。

![例子](../Images/5e7ec87cb10735f5b18853e00cff7743.png)

我的`divs`样子是这样的：

```
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">
            <strong>Page 1</strong>
        </h2>
    </div>
    <div data-role="content">
        <strong>You are in page one.</strong>
    </div>
</div>
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">
            <strong>Page 2</strong>
        </h2>
    </div>
    <div data-role="content">
        <strong>You are in page two.</strong>
        <a href=#third data-transition="slideup">Go to page 3</a>
    </div>
 </div>
<div data-role="page" id="third">
    <div data-role="header">
        <h2 class="ui-title">Page three</h2>
    </div>
    <div data-role="content">
        <strong>You are in page three.</strong>
    </div>
</div> 
```

使用以下 Javascript，我可以在`data-role="page"`div 之间很好地左右滑动，但是，我无法区分子页面和主页面。我可以为主页面定义一个滑动（基本上使用我已经拥有的那个）然后为子页面定义另一个（也许通过使用`ids`或其他东西来区分它们？）？

```
$(document).ready( function() {
    $(document).on('swipeleft', 'div.ui-page', function () {
        var nextpage = $(this).next('div[data-role="page"]');
    if (nextpage.length >= 0) {
        $.mobile.changePage(nextpage, {
            transition: "slide",
            reverse: false,
            allowSamePageTransition: true
        });
    }
     });

    $(document).on('swiperight', 'div.ui-page', function () {
    var prevpage = $(this).prev('div[data-role="page"]');
    if (prevpage.length >= 0) {
        $.mobile.changePage(prevpage, {
            transition: "slide",
            reverse: true, 
            allowSamePageTransition: true
        });
    }
    });
}); 
```

也许在[https://stackoverflow.com/questions/14688983/using-javascript-in-subpages-loaded-with-jquerys-changepage](https://stackoverflow.com/questions/14688983/using-javascript-in-subpages-loaded-with-jquerys-changepage)中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:38:18.090

试试这个代码，它似乎工作正常=）。

HTML：

```
<!--PAGE 1-->
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">
            <strong>Page 1</strong>
        </h2>
    </div>
    <div data-role="content">
        <strong>You are in page one.</strong>
        <a href="#subpage1_1" name="lnk" data-transition="slideup">Go to page 1.1</a>
    </div>
</div>
<!--PAGE 2-->
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">
            <strong>Page 2</strong>
        </h2>
    </div>
    <div data-role="content">
        <strong>You are in page two.</strong>
        <a href="#subpage2_1" name="lnk" data-transition="slideup">Go to page 2.1</a>
    </div>
 </div>
 <!--PAGE 3-->
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">Page 3</h2>
    </div>
    <div data-role="content">
        <strong>You are in page three.</strong>
    </div>
</div>
<!--PAGE 4-->
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">Page 4</h2>
    </div>
    <div data-role="content">
        <strong>You are in page four.</strong>
        <a href="#subpage4_1" name="lnk" data-transition="slideup">Go to page 4.1</a>
    </div>
</div>
<!--PAGE 5-->
<div data-role="page">
    <div data-role="header">
        <h2 class="ui-title">Page 5</h2>
    </div>
    <div data-role="content">
        <strong>You are in page five.</strong>
    </div>
</div>
<!--SUBPAGE 1.1-->
<div data-role="page" id="subpage1_1">
    <div data-role="header">
        <h2 class="ui-title">Page 1.1</h2>
    </div>
    <div data-role="content">
        <strong>You are in page 1.1.</strong>
    </div>
</div>
<!--SUBPAGE 1.2-->
<div data-role="page" id="subpage1_2">
    <div data-role="header">
        <h2 class="ui-title">Page 1.2</h2>
    </div>
    <div data-role="content">
        <strong>You are in page 1.2.</strong>
    </div>
</div>

 <!--SUBPAGE 2.1-->
 <div data-role="page" id="subpage2_1">
    <div data-role="header">
        <h2 class="ui-title">Page 2.1</h2>
    </div>
    <div data-role="content">
        <strong>You are in page 2.1.</strong>
    </div>
</div>
<!--SUBPAGE 4.1-->
<div data-role="page" id="subpage4_1">
    <div data-role="header">
        <h2 class="ui-title">Page 4.1</h2>
    </div>
    <div data-role="content">
        <strong>You are in page 4.1.</strong>
    </div>
</div>
<!--SUBPAGE 4.2-->
<div data-role="page" id="subpage4_2">
    <div data-role="header">
        <h2 class="ui-title">Page 4.2</h2>
    </div>
    <div data-role="content">
        <strong>You are in page 4.2.</strong>
    </div>
</div>
<!--SUBPAGE 4.3-->
<div data-role="page" id="subpage4_3">
    <div data-role="header">
        <h2 class="ui-title">Page 4.3</h2>
    </div>
    <div data-role="content">
        <strong>You are in page 4.3.</strong>
    </div>
</div> 
```

JAVASCRIPT：

```
var num_pages = 5;
var curr_subpage = 0;
var subpage = false;
var curr_subnum = 0;
var curr_url;

$(document).ready( function() {

    var links = document.getElementsByName("lnk");

    links[0].onclick = function(e) { curr_subpage = 1; curr_subnum = 1; };
    links[1].onclick = function(e) { curr_subpage = 2; curr_subnum = 1; };
    links[2].onclick = function(e) { curr_subpage = 4; curr_subnum = 1; };

    $(document).on('swipeleft', 'div.ui-page', function () {
        var nextpage = $(this).next('div[data-role="page"]');
        var url = $(this).next('div[data-role="page"]').attr('data-url');
        console.log("1: "+url);

        curr_url = $('div.ui-page').attr('data-url');
        console.log("2: "+curr_url);

        if (nextpage.length >= 0)
        {
            if(curr_url == url)
            {
                $.mobile.changePage(nextpage, {
                    transition: "slide",
                    reverse: false,
                    allowSamePageTransition: true
                });
            }else{
                var subpage_url = "subpage"+curr_subpage+"_"+(curr_subnum+1);
                if( url == subpage_url)
                {
                    curr_subnum++;
                    $.mobile.changePage(nextpage, {
                        transition: "slide",
                        reverse: false,
                        allowSamePageTransition: true
                    });
                }
            }
        }
     });

    $(document).on('swiperight', 'div.ui-page', function () {
        var prevpage = $(this).prev('div[data-role="page"]');
        var url = $(this).prev('div[data-role="page"]').attr('data-url');
        console.log(url);

        curr_url = $('div.ui-page').attr('data-url');

        if (prevpage.length >= 0)
        {
            if(curr_url == url && curr_subnum == 0)
            {
                $.mobile.changePage(prevpage, {
                    transition: "slide",
                    reverse: true, 
                    allowSamePageTransition: true
                });
            }else{
                var subpage_url = "subpage"+curr_subpage+"_"+(curr_subnum-1);
                if( url == subpage_url)
                {
                    curr_subnum--;
                    $.mobile.changePage(prevpage, {
                        transition: "slide",
                        reverse: false,
                        allowSamePageTransition: true
                    });
                }
            }
        }
    });
}); 
```

# perl - Perl 在声明期间使用哈希

> ID：14667749
> 
> 赞同：1
> 
> 时间：2013-02-02T23:38:17.133
> 
> 标签：perl, hash, reference

我想将所有项目`cflags`自动放入`cppflags`. 我如何？以下失败代码：

```
my %conf = (
    'cflags'   => ['-g', '-O0'],
    'cppflags' => [ @{$conf{cflags}} ],
    'bindir'   => $PWD . "/bin",
); 
```

抱歉这个愚蠢的问题，我是 perl 的新手：P。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:42:02.163

您仍在构建要分配给的列表`%conf`，因此尚未分配任何内容`%conf`，因此尝试从中读取`$conf{cflags}`将是徒劳的。

选项1：

```
my @cflags = qw( -g -O0 );
my %conf = (
    cflags   => [ @cflags ],
    cppflags => [ @cflags ],
    bindir   => "$PWD/bin",
); 
```

选项 2：

```
my %conf;
$conf{cflags  } = [qw( -g -O0 )];
$conf{cppflags} = [ @{ $conf{cflags} } ];
$conf{bindir  } = "$PWD/bin"; 
```

选项 3：

```
my %conf = (
    cflags => [qw( -g -O0 )],
    bindir => "$PWD/bin",
);
$conf{cppflags} = [ @{ $conf{cflags} } ]; 
```

（按个人喜好递减顺序。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T04:49:33.943

为了跟进 ikegami 的回答，这里有另一个建议，它的用例略有不同：

```
my @cflags = qw( -g -O0 );
my %conf = (
    cflags   => \@cflags,
    cppflags => \@cflags,
    bindir   => "$PWD/bin",
); 
```

这与他的 #1 不同，因为`@cflags`数组和键的值`cflags`都`cppflags`与同一个数组相关。更改其中任何一个，其他将反映更改。也许这就是你想要的行为，或者它不是，或者它对你没有任何影响，但它确实存在。

# python - 打印与另一个列表匹配的列表的定义项

> ID：14667750
> 
> 赞同：0
> 
> 时间：2013-02-02T23:38:24.353
> 
> 标签：python, list

我有两个清单。一个有标题，另一个有细节。我在每个项目前放了一个数字，以帮助我知道哪个细节属于标题。我想打印标题，然后是详细信息。我怎样才能做到这一点？

在这个例子中，我只想打印单词，而不是数字（索引）

我的代码：

```
header=  ['1', 'header1', '2', 'header2', '3', 'header3', 4, 'header4']
detail= ['1', 'detailA', '1', 'detailB', '2', 'detailA', '3', 'detailA', '4', 'detailA']

for item1 in header:
    index=item1
    i+=i
    print "Header: ", header[i*2-1]
    for item2 in detail:
        j+=1
        print j
        if item1==item2:
            print "Detail:\n"
            print "     ", detail[j*2-1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:59:59.723

You should probably create a dictionary here:

```
In [5]: header=  ['1', 'header1', '2', 'header2', '3', 'header3', 4, 'header4']
In [6]: detail= ['1', 'detailA', '1', 'detailB', '2', 'detailA', '3', 'detailA', '4', 'detailA']

In [7]: it=iter(header)                                                        
In [8]: dic={}             #or use collections.defaultdict(list)
                           #to preserve order use collections.OrderedDict()

In [9]: for ind in it:                                                                   
    head=next(it)
    indexes=[i for i,x in enumerate(detail) if x==ind]
    for index in indexes:
        dic.setdefault(head,[]).append(detail[index+1])
   ...:         

In [10]: dic
Out[10]: 
{'header1': ['detailA', 'detailB'],
 'header2': ['detailA'],
 'header3': ['detailA']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T04:21:16.797

如果列表来自第三方，那么您可以将它们转换为更有用的东西：

```
header=  ['1', 'header1', '2', 'header2', '3', 'header3', '4', 'header4']
detail= ['1', 'detailA', '1', 'detailB', '2', 'detailA', '3', 'detailA', '4', 'detailA']

header = [ (header [i], header [i + 1] ) for i in range (0, len (header), 2) ]
detail = [ (detail [i], detail [i + 1] ) for i in range (0, len (detail), 2) ]

for k, v in header:
    print ('Header: {}'.format (v) )
    print ('Details:')
    print ('\n'.join (dv for dk, dv in detail if dk == k) )
    print () 
```

我在标题列表中更改`4`为`'4'`. 我不使用字典来维护标题的顺序。

# c - 使用 C 预处理器生成两个函数

> ID：14667753
> 
> 赞同：0
> 
> 时间：2013-02-02T23:38:48.690
> 
> 标签：c, c-preprocessor

我有一个项目，还有一个案例，我有一些经常更改`#define`的预处理器来控制它的工作方式——例如：

```
void myfunction(int num, mystruct* content) {
    doSomethingTo(content);
    //...
    #ifdef FEATURE_X
    feature_x(content);
    #endif
} 
```

这很好用，虽然每次都必须重新编译，所以它在“每次都必须重新编译的东西”文件中。我想将其推送到 [静态] 库中。我可以更改它的调用方式（已经有一个用于 pick 的函数指针`myFunction`），所以我希望它变成

```
void myfunction(int num, mystruct* content) {
    doSomethingTo(content);
    //...
}
void myfunction_featureX(int num, mystruct* content) {
    doSomethingTo(content);
    //...
    feature_x(content);
} 
```

我需要在几个地方执行此操作，因此`-D FEATURE_X`为每个地方使用一个单独的库（一个有一个没有 ）不是一个可接受的选择。我*可以*通过复制/粘贴来做到这一点，但这会导致代码重用，这会带来修复一个副本而不是另一个副本的错误的风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:49:13.193

如果您将 myfeature_x 放在函数表中会有所帮助吗？

```
#include <stdio.h>
#include <string.h>

typedef struct {
  int x,y;
} mystruct;

typedef void (*fn_ptr)(mystruct* content);
fn_ptr vtable[10];
#define FEATURE_X_INDEX 0

void feature_x(mystruct *content)
{
  printf("y: %d\n", content->y);
}

void myfunction(int num, mystruct* content) {
  printf("x: %d\n", content->x);

  //...
  if (vtable[FEATURE_X_INDEX]) {
    vtable[FEATURE_X_INDEX](content);
  }
}

int main(void)
{
  bzero(vtable, sizeof(vtable));
  mystruct s;
  s.x = 1;
  s.y = 2;
  myfunction(0, &s);
  if (1) {
    //Of course you'd use a more sensible condition.
    vtable[FEATURE_X_INDEX] = feature_x;
  }
  myfunction(0, &s);
  return 0;
} 
```

输出：

```
x: 1
x: 1
y: 2 
```

然后，您需要做的就是在`NULL`不使用该功能时用 s 填充虚函数表，如果要使用它，则用函数指针填充。您可以从任何地方执行此操作 - 例如静态库.. 或者您可以编译`feature_x`成动态库，在运行时加载它，如果加载成功填充函数表，并在卸载动态链接库时清除表.

我认为与 Jonathan Leffler 的方法相比，这真正给您带来的唯一好处是 feature_x 的代码实际上不需要与您的其他代码链接到相同的二进制文件中。如果您只需要一个运行时开关来打开或关闭该功能`if`，那么正如 Jonathan Leffler 所建议的那样，一个简单的语句应该可以解决问题。（顺便说一下，`if`这里也有一个 - 它检查函数表的内容:)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:42:26.880

让 featureX 版本的函数调用主线函数。在您的示例`myfunction_featureX`中会调用`myfunction`然后做自己的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T00:02:50.433

当然，这就是您将 Feature X 的激活从编译时问题更改为运行时问题的地方：

```
void myfunction(int num, mystruct* content)
{
    doSomethingTo(content);
    //...
    if (FeatureX_Enabled())
        feature_x(content);
} 
```

测试可能是一个完整的`FeatureX_Enabled()`函数，也可能只是测试一个在函数外部定义的适当范围的变量——文件中的静态变量或外部变量。这避免了必须使用函数指针；它与现在调用的函数相同。更改函数指针表相当于更改单个变量 - 它涉及更改存储在函数外部的某些内容的值以更改函数的行为。

# c# - 在 C# 中使用日期对字符串列表进行排序

> ID：14667754
> 
> 赞同：17
> 
> 时间：2013-02-02T23:39:08.207
> 
> 标签：c#, list, sorting, date

我有一个`List<string>`日期。
我的清单是：

```
{"01/01/2013","10/01/2013","20/01/2013"} 
```

我想对列表进行排序，如下所示：

```
{"20/01/2013","10/01/2013","01/01/2013"} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-02T23:43:46.243

使用 linq：

```
var list = new List<string> {"01/01/2013", "10/01/2013", "20/01/2013"};
var orderedList = list.OrderByDescending(x => DateTime.Parse(x)).ToList(); 
```

**更新（根据评论中的问题）：**

您可以这样处理无效日期（无效日期被视为`default(DateTime)`）：

```
var list = new List<string> { "01/01/2013", "10/01/2013", "N/A" , "20/01/2013"  };
var orderedList2 = list.OrderByDescending(x =>
            {
                DateTime dt;
                DateTime.TryParse(x, out dt);
                return dt;
            }); 
```

或者，如果您想将无效的日期时间作为列表中的第一项：

```
var orderedList3 = list.OrderByDescending(x =>
            {
                DateTime dt;
                if (!DateTime.TryParse(x, out dt)) return DateTime.MaxValue;
                return dt;
            }); 
```

您还可以过滤掉无效的日期：

```
var filteredList = list.Where(x =>
            {
                DateTime dt;
                return DateTime.TryParse(x, out dt);
            }).Select(DateTime.Parse).OrderByDescending(x => x); 
```

甚至更好：

```
var filteredList = list.Select(x =>
        {
            DateTime dt;
            return new {valid = DateTime.TryParse(x, out dt), date = dt};
        }).Where(x => x.valid).Select(x => x.date).OrderByDescending(x => x); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T23:43:25.417

您不应该使用数据的字符串表示形式——我们都生活在面向对象的世界中 :)

最好的方法是将这些字符串转换为实际的 DateTime 对象并通过 linq 以相反的顺序对它们进行排序：

```
var dates = Array.ConvertAll(dateStrings, x => DateTime.Parse(x));
return dates.OrderByDesc(x => x); 
```

另一种方法是实现自定义排序功能，请参阅[此链接](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)。然后你只需在排序函数中使用它：

```
DateAsStringComparer myComparer = new DateAsStringComparer();
dateStrings.Sort(myComparer); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-02T23:48:02.277

试试这个：

```
List<string> s = new List<string>() { "01/01/2013", "10/01/2013", "20/01/2013" };
var d = s.OrderByDescending(i => DateTime.ParseExact(i, "dd/MM/yyyy", null)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T23:47:30.493

为什么要使用`List<string>`而不是`List<DateTime>`？

```
List<DateTime> dates = ...

dates.OrderByDescending(c => c).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T23:43:29.370

因为它们是英国/澳大利亚格式（日/月/年），您可以使用以下方式对它们进行排序`OrderByDescending`：

```
List<string> dates = new List<string>() { "01/01/2013", "10/01/2013", "20/10/2013" };

foreach (var date in dates.OrderByDescending(x => x))
    Console.WriteLine(date); 
```

我个人会`DateTime`先将它们转换为对象..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-16T04:16:11.880

要将自定义格式的 DateTime 字符串转换`string`为统一格式的，可​​以采用以下简单和`safe`片段。

```
 string formatStr = "yyyyMMddHHmmss";
    string result = Convert.ToDateTime(inputStr).ToString(formatStr); 
```

在代码中，`formatStr`可以是`DateTime`类可以接受的任何可能的形式，您可以将其设置为您需要的格式，这里您可以使用`dd/MM/yyyy`与您的目标格式字符串匹配的格式，例如“20/01/2013”​​。

因此，对于您的情况，代码可以很简单，如下所示：

```
 List<string> list = new List<string> { "01/01/2013", "10/01/2013", "20/01/2013" };
    var listAfterSorting = list.OrderByDescending(t => 
        Convert.ToDateTime(t).ToString("dd/MM/yyyy")
            .ToList()); 
```

虽然在某些情况下，使用`ParseExact`解析数据时间字符串，它会抛出错误/异常`String was not recognized as a valid DateTime`，在这种情况下，如果你转向使用`TryParseExact`，结果可能是`default(DateTime)`= `1/1/0001 12:00:00 AM`，因为解析失败。因此，我不推荐`ParseExact`or `TryParseExact`。

# android - 在Android中将数据从Activity A传递到Activity D

> ID：14667757
> 
> 赞同：0
> 
> 时间：2013-02-02T23:39:53.367
> 
> 标签：android, android-edittext, save

这是我的问题：

活动 A 有 en EditText。我需要从这个 EditText 中保存用户的输入，以便在 Activity D 中将其拉出，在 Activity 层次结构中的 3 个活动中将其放入我在那里设置的 TextView 中。我尝试了几种方法，但都没有奏效。我遇到的示例实现了某些方法，例如 Intent 中的 Bundle，将数据推送到层次结构中的下一个 Activity。我相信这些方法对我不起作用，因为我不得不将数据推送到层次结构更靠下的 Activity。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:19:56.453

我建议数据库是一个不错的主意。但是，如果它太过分了，您可能会考虑在自定义 Application 对象中使用静态变量（甚至可能是列表或地图）。将 android:name=".MyApplication" 属性添加到清单中的应用程序元素，然后创建一个新类 MyApplication，它扩展了 Application。一旦你这样做了，活动 A 可以调用：

```
((MyApplication) getApplication()).setUserText(editText.getText().toString()) 
```

...和活动 D 可以调用：

```
editText.setText(((MyApplication) getApplication()).getUserText()). 
```

您必须弄清楚消息传递协议的语义：如果 D 在 A 之前启动会发生什么，依此类推，但这会将字符串从一个地方传递到另一个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:21:42.973

如果只是稍后要拉到 TextView 的文本（EditText）。我会考虑设置一个 SQLite 数据库类以将文本保存在数据库中，然后将文本拉到任何 Activity 中的 TextView 中。这是一个很好的设置链接：[SQLite for Android](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T05:02:44.257

如果你想走 Bundle 路线，你可以不断地通过你的活动层次结构传递同一个 Bundle，或者将数据从一个 Bundle 存储到下一个。您还可以使用 SharedPreferences。这取决于如果应用程序被杀死，数据是否需要持久化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:08:03.760

最简单的事情是使用 SharedPreferences，它可以从应用程序的每个活动或服务中访问。

您正在尝试传输简单的数据，因此放入键值对将非常简单。

要将数据保存到 Sharedprefs 中，只需输入保存用户数据的 Activity

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
SharedPreferences.Editor editor = prefs.edit();

editor.putString("key", "value");
editor.commit(); 
```

在要检索数据的活动中，使用以下命令：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
String userValue =  prefs.getString("key", "ValueIfKeyDoesNotExist"); 
```

当然还有更多关于 SharedPreferences 的内容 - 最好的来源是官方来源[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)

您也可以尝试使用 SQLite 之类的数据库，但在您的情况下，应该存储的数据非常简单，因此不会注意到 DB 的任何优点。通过 Intent.putExtra() 通过许多活动传递数据也不是很有用

# c++ - 在另一个头文件c ++中创建一个类的实例

> ID：14667758
> 
> 赞同：1
> 
> 时间：2013-02-02T23:39:56.190
> 
> 标签：c++, oop, header

我是 C++ 编程的新手……一年前我开始用 C# 编程，所以我在一些非常基本的东西上失败了……我想……我创建了一个名为 vector 的类，它是 3d 中的一个点空间的标题如下所示：

```
class vec3
{
    double x, y, z;
public:
    vec3();
    vec3(double x, double y, double z);
    double calculateLLength(void);
    double distance(double x1, double y1, double z1);
    double distance(const vec3 &vec);
    ~vec3(void);
}; 
```

在此之后，我应该编写一个名为 sphere 的类，其中心点是来自我的向量类的向量，它看起来很简单（球体标题）：

```
#pragma once
#include "vec3.h"
class Sphere
{
    vec3 center1;
    double x, y, z;
    double radius1;
    static const double PI;

public:

    //constructs
    Sphere(double x, double y, double z, double radius);
    Sphere(vec3 center1, double radius);
    //Methods
    bool inside(const vec3 &center);
    bool overlap(const Sphere &sphere);
    double area();
    double volume();
    ~Sphere(void);
}; 
```

我得到的错误是：

> 错误 LNK1120：1 未解决的外部

我试着用谷歌搜索这个，周六的大部分时间都在试图修复它，但不能....

（如果有人需要，这里是 cpp 文件！）

球体.cpp：

```
#include "StdAfx.h"
#include "Sphere.h"
#include "vec3.h"
#include <math.h>

const double Sphere::PI = 3.1415926535;
Sphere::Sphere(double centerX, double centerY, double centerZ, double radius)
{
    vec3 center(centerX, centerY, centerZ);
    radius1 = radius;
}

Sphere::Sphere(vec3 center, double radius)
{
    center1 = center;
    radius1 = radius;
}
bool Sphere::inside(const vec3 &center)
{
    if(radius1 < center1.distance(center))
        return false;
    else
        return true;
}
bool Sphere::overlap(const Sphere &sphere)
{
    if(this->center1.distance(sphere.center1) < radius1 + sphere.radius1)
        return true;
    else 
        return false;
}
double Sphere::area()
{
}

double Sphere::volume()
{
}

Sphere::~Sphere(void)
{
} 
```

vec3.cpp：

```
#include "StdAfx.h"
#include "vec3.h"
#include <math.h>

vec3::vec3(double x, double y, double z)
{
    this->x=x;
    this->y=y;
    this->z=z;
}

double vec3::calculateLLength()
{
    return sqrt((x*x) + (y*y) + (z*z));
}

double vec3::distance(double x1, double y1, double z1)
{
    return sqrt( ((this->x - x1)*(this->x - x1)) + ((this->y - y1)*(this->y - y1)) + ((this->z - z1)*(this->z - z1)) );
}

double vec3::distance(const vec3 &vec)
{
    return sqrt( ((this->x - vec.x)*(this->x - vec.x)) + ((this->y - vec.y)*(this->y - vec.y)) + ((this->z - vec.z)*(this->z - vec.z)) );
}

vec3::~vec3(void)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:59:01.387

如果您发布的代码是实际代码，那么您会收到该消息，因为编译较早失败 -`Sphere::area`并且`Sphere::volume` *必须*返回一些内容，但您的内容是空的。

自编译以来`Sphere.cpp`失败，因此没有“Sphere.o”文件，并且链接器抱怨将在那里定义的所有内容。

在构建 C++ 时，从第一个错误开始检查错误很重要，因为这个错误通常会在以后导致更多错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:51:52.377

问题是您已经声明了 vec3 的默认构造函数，但您没有为它提供定义。将以下代码添加到 vec3.cpp：

vec3.cpp：

```
vec3::vec3()
:x(0),y(0),z(0)
{
} 
```

旁注，`Sphere::area`并且`Sphere::volume`需要在声明返回时返回值`double`：

```
double Sphere::area()
{
   return 0.0;
}

double Sphere::volume()
{
   return 0.0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T23:43:01.660

在编译实际程序时，您可能忘记将*所有*源文件链接在一起。`cpp`

通过在头文件 (*.h) 中*声明*类，您只是在描述类的外观。您还需要*定义*这些类的实现；这些是写在源文件 (*.cpp) 中的内容。当您将最终程序全部链接在一起时，请确保您正在链接所有已编译的源文件，否则链接器将无法解析您已*声明的内容的**定义*。

 *我不知道您的构建环境是如何设置的，但典型 IDE 中的解决方案是确保您的所有源都标记为用于创建最终可执行文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T23:43:07.387

看看这个帖子，看看它是否对你有帮助......

[C++ 致命错误 LNK1120：1 个未解决的外部](https://stackoverflow.com/questions/7410798/c-fatal-error-lnk1120-1-unresolved-externals)

据我了解，当您设置项目时，您没有指定您将使用 Windows 应用程序，因此它没有将 Windows api 与您的应用程序相关联。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T23:47:55.800

Without seeing the exact error you get it's hard to say exactly what the problem is. The error you are getting is caused by your linker complaining that it can not find the implementation of one "symbol" (=function, class...) you defined. This kind of error could be caused by a wrong usage of the precompiled headers in Visual Studio ("stdafx.h"). You should try to create a new project and deactivate precompiled headers, you don't need them for small projects. And by the way in C++ you should rather include `<cmath>` which wraps the C library `<math.h>` in the `std` namespace.*

# sql - 舞台设计策略

> ID：14667761
> 
> 赞同：1
> 
> 时间：2013-02-02T23:40:16.387
> 
> 标签：sql, database-design

我正在构建数据仓库（DW），我有一个关于加载数据的问题；如果你们提供您对此的想法，我将不胜感激。

我打算先将所有表一对一地加载到临时数据库中，然后将数据从临时数据库加载到 DW 中。我曾考虑过直接使用 OLTP 系统（无分段），但我不是 100% 确定从性能角度来看这将是最好的方法。

让我举个例子：在我们的 OLTP 数据库中，我们有一个名为“客户”的视图，我将把它拉入我们的 DW。OLTP 数据库的视图相当复杂，一个 select 语句需要 8 分钟。因此，如果我将此表直接加载到 DW 并进行增量加载，我认为这将比首先将视图加载到临时表中花费更多时间。此外，由于加载需要时间，DW 的可用性也会受到影响，因为数据将无法供用户查询。

你们有什么建议？分期方法现在过时了吗？我想了解优点和缺点。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:07:23.093

我帮助维护数据仓库，虽然我们不使用暂存数据库，但我们确实使用暂存/工作/中间/whatever_you_want_to_call_it 表。

我们所做的事情的要点是这样的。我们以一系列分隔文件的形式接收原始数据。然后，我们对这些文件执行我们认为必要的任何操作来生成加载文件。然后，我们从加载文件中填充我们的工作表，并做我们必须做的任何事情来进一步准备数据。然后我们从工作表中填充真实表。

我们还按计划完成所有工作，在人们上班前的清晨，以尽量减少人们在加载数据时尝试查询仓库的可能性。

# html - 在表格行内对齐标签和输入

> ID：14667762
> 
> 赞同：2
> 
> 时间：2013-02-02T23:40:58.873
> 
> 标签：html, css, html-table, vertical-alignment

我一开始遇到一个简单的问题，但我无法解决。我有一个表格，代表一个包含多行的表格（在我的示例中为简化），有两列：第一列包含标签，第二列包含输入字段。

```
<table>
  <tr>
    <td class="labelcell">
      <div class="label">
        <label>Name</label>
      </div>
    </td>
    <td>
      <div class="control">
        <div class="input">
          <input type="text" value="John" />
        </div>
        <div class="more">+</div>
      </div>
    </td>
  </tr>
</table> 
```

我的问题是标签的文本和输入的文本没有垂直对齐。这是一个重现我的问题的示例：http: [//jsfiddle.net/KBz8g/](http://jsfiddle.net/KBz8g/)

标签太低了。我不知道如何正确解决这个问题。我不想更改前两个 css 规则（从 meyer 和框大小重置），尽管设置为基线的属性 vertical-align 似乎值得怀疑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:51:23.163

这个小提琴有帮助吗？[http://jsfiddle.net/HujQN/1/](http://jsfiddle.net/HujQN/1/)

我只是重置零件的填充和边距。

```
div {
    margin: 0;
    padding: 0;
} 
```

# javascript - 在 contenteditable 中，如何在按 Enter 键的块引用后添加段落？

> ID：14667764
> 
> 赞同：13
> 
> 时间：2013-02-02T23:41:22.307
> 
> 标签：javascript, html, contenteditable, paragraph

我有以下问题。一旦我添加了一个`blockquote`in `contenteditable`，通过按 Enter 键它移动到一个新行并添加另一个`blockquote`元素。它永远持续下去，我无法逃避格式。所需的功能将是无序列表的功能。当您按 Enter 键时，它会添加一个新的空`<li>`元素，但如果您再次按 Enter，它会转义格式，删除先前创建的`<li>`并添加一个`<p>`.

查看演示：http: [//jsfiddle.net/wa9pM/](http://jsfiddle.net/wa9pM/)

我发现的一个技巧是`<p>`在`blockquote`创建`blockquote`. 但是有没有办法用 JavaScript 打破这种格式化行为？不知道我会如何检查：如果光标在哪里，它是行尾，如果它是一个块引用并且在 Enter 键上，不要添加一个新的`blockquote`.

我正在使用此代码`blockquote`在 JS 中生成一个：

```
document.execCommand('formatBlock', false, 'blockquote'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T02:12:17.993

在为 iOS 应用程序创建富文本编辑器时，我遇到了同样的问题。每次我`<blockquote>`在文本字段中插入标签并按下`Enter`时，都无法摆脱块引用。

经过一番研究，我找到了一个可行的解决方案。

**查找内部 HTML 标签：**

```
function whichTag(tagName){

    var sel, containerNode;
    var tagFound = false;

    tagName = tagName.toUpperCase();

    if (window.getSelection) {

        sel = window.getSelection();

        if (sel.rangeCount > 0) {
            containerNode = sel.getRangeAt(0).commonAncestorContainer;
        }

     }else if( (sel = document.selection) && sel.type != "Control" ) {

         containerNode = sel.createRange().parentElement();

     }

     while (containerNode) {

         if (containerNode.nodeType == 1 && containerNode.tagName == tagName) {

             tagFound = true;
             containerNode = null;

         }else{

             containerNode = containerNode.parentNode;

         }

     }

     return tagFound;
 } 
```

**检查块引用标签的出现：**

```
function checkBlockquote(){

    var input = document.getElementById('text_field_id');

    input.onkeydown = function() {

        var key = event.keyCode || event.charCode;

        if( key == 13){

            if (whichTag("blockquote")){

                document.execCommand('InsertParagraph');
                document.execCommand('Outdent');

            }

        }

    };

} 
```

**触发按键事件：**

```
<body onLoad="checkBlockquote();">
<!-- stuff... -->
</body> 
```

我相信上面的代码可以轻松调整以满足您的需求。如果您需要进一步的帮助，请随时提出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T13:21:43.470

像这样的东西对我有用（至少在 Chrome 和 Safari 上）。

演示在[http://jsfiddle.net/XLPrw/](http://jsfiddle.net/XLPrw/)

```
$("[contenteditable]").on("keypress", function(e) {
    var range = window.getSelection().getRangeAt();
    var element = range.commonAncestorContainer;
    if(element.nodeName == "BLOCKQUOTE") {
        element.parentElement.removeChild(element);   
    }
}); 
```

没有进行任何广泛的测试，但如果块引用包含文本，它看起来`range.commonAncestorElement`返回当前文本节点，或者如果它不包含文本节点，则返回块引用元素本身（在 Chrome 上，`<br>`添加 a 并将插入符号定位在它之后）。在这种情况下，您可以删除新创建的块引用。无论如何，在删除元素后，插入符号看起来像是定位在 contenteditable 上的某个位置，尽管键入确认它就在原始黑引号之后。希望这会为您提供一个更有说服力的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-11T21:38:51.547

超级迟到的答案，但这对我来说是一个更简单的解决方案。希望它可以帮助其他人寻找。浏览器兼容性可能会有所不同。

```
YOUR_EDITABLE_ELEMENT.addEventListener('keyup', e => {
  if (e.which || e.keyCode === 13) {
    if (document.queryCommandValue('formatBlock') === 'blockquote') {
      exec('formatBlock', '<P>')
    }
  }
}) 
```

# r - Rcpp - 在 sourceCpp 引用的文件中使用多个 C++ 函数？

> ID：14667766
> 
> 赞同：11
> 
> 时间：2013-02-02T23:41:36.987
> 
> 标签：r, rcpp

我希望这不是太明显，因为我已经搜索了一整天并且找不到答案。

假设我有以下 R 文件：

```
library(Rcpp)
sourceCpp("cfile.cpp")

giveOutput(c(1,2,3)) 
```

它编译以下 C++ 文件：

```
#include <Rcpp>
using namespace Rcpp;
// [[Rcpp::export]]

NumericVector plusTwo(NumericVector x){
  NumericVector out = x + 2.0;

  return out;
}

NumericVector giveOutput(NumericVector a){

NumericVector b = plusTwo(a);
return b;
} 
```

无论我尝试什么，Rcpp 预处理器都`plusTwo()`可用，`giveOutput()`但根本不可用。我能够找到的文档说这是一个应该创建一个包的点，但是在阅读包小插图之后，它似乎比我需要的要复杂一个数量级。

没有明确定义`plusTwo()`inside `giveOutput()`，我能做什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-03T00:00:20.717

您应该在要导出的每个函数前使用*export 属性*。因此，通过将文件更正为

```
#include <Rcpp.h>

using namespace Rcpp;

// [[Rcpp::export]]
NumericVector plusTwo(NumericVector x){
  NumericVector out = x + 2.0;
  return out;
}

// [[Rcpp::export]]
NumericVector giveOutput(NumericVector a){
  NumericVector b = plusTwo(a);
  return b;
} 
```

我得到了想要的行为：

```
R> sourceCpp("/tmp/patrick.cpp")
R> giveOutput(1:3)
[1] 3 4 5
R> plusTwo(1:3)
[1] 3 4 5
R> 
```

哦，创建一个包就像调用一样简单`Rcpp.package.skeleton()`（但请阅读它的帮助页面，特别是关于`attributes`参数的）。我知道至少有一个 CRAN 包，它开始了你从这里开始的方式，并且*显然*是通过`Rcpp.package.skeleton()`...

# mysql - QMYSQL 驱动程序可用但未加载

> ID：14667768
> 
> 赞同：8
> 
> 时间：2013-02-02T23:41:52.753
> 
> 标签：mysql, qt, qt5

如何`qmysql`在 Qt 中加载驱动程序？我有以下代码产生这些结果：

```
("QSQLITE", "QMYSQL", "QMYSQL3") 
QSqlDatabase: QMYSQL driver not loaded
QSqlDatabase: available drivers: QSQLITE QMYSQL QMYSQL3 
```

关于如何加载它的任何建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-07T19:37:10.530

我们应该先检查我们的驱动程序

```
$ cd /opt/Qt5.2.1/5.2.1/gcc_64/plugins/sqldrivers 
```

然后我们可以找到一些文件

使用以下命令检查库

```
$ ldd libqsqlmysql.so 
```

如果您发现问题`libmysqlclient_r.so.16 => not found`，则可能是库依赖问题。

在我在互联网上做了一点研究之后，有一种方法很简单。

```
$ cd /usr/lib/x86_64-linux-gnu 
```

如果你发现`libmysqlclient_r.so.18`，

```
$ cp libmysqlclient_r.so.18 libmysqlclient_r.so.16 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T14:26:44.203

好的，只需将`sqldrivers`文件夹复制到我的调试文件夹就可以了！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T23:47:51.917

您可以尝试诊断问题`strace`- 似乎 QMYSQL 驱动程序可能需要一些运行时库依赖项才能工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-30T16:36:53.390

在 Windows 上（参见目录结构）：

```
the_qt_app.exe
libmysql.dll
sqldrivers/qsqlmysql4.dll 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-03T20:28:38.767

您可以使用`QPluginLoader`来获得一些更好的错误消息。

当我遇到与 MySQL 驱动程序相同的问题时，消息类似于“该版本是使用此 Qt 版本以外的其他选项编译的”。

当时与 Qt SDK 一起提供的 Qt 源代码似乎与其二进制文件不兼容。

下载 Qt 源代码并编译我自己的 Qt 版本和 MySQL 驱动程序后，问题就消失了。

编辑：一些示例代码。

```
QPluginLoader loader;
loader.setFileName("/Users/niklaswulf/QtSDK/Qt/4.8.4/plugins/sqldrivers/libqsqlite_debug.dylib");
qDebug() << loader.load();
qDebug() << loader.errorString();

loader.setFileName("/Users/niklaswulf/QtSDK/Qt/5.0.1/5.0.1/clang_64/plugins/sqldrivers/libqsqlite_debug.dylib");
qDebug() << loader.load();
qDebug() << loader.errorString(); 
```

针对 5.0.1 进行编译时，输出如下：

```
false 
"The file '/Users/niklaswulf/QtSDK/Qt/4.8.4/plugins/sqldrivers/libqsqlite_debug.dylib' is not a valid Qt plugin." 
true 
"Unknown error" 
```

我还找到了旧消息：

```
The plugin '/path/to/some/libqsqlmysql.dylib' uses incompatible Qt library. Expected build key "macosx macx-cocoa g++-4 full-config", got "macosx macx-cocoa g++-4 no-pkg-config" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-27T05:14:13.317

```
QSqlDatabase: QMYSQL driver not loaded
QSqlDatabase: available drivers: QSQLITE QMYSQL QMYSQL3 
```

我在使用 Qt-5.2.0 的 fedora20（64 位）中遇到了同样的问题，然后按照以下步骤操作：

```
$ cd /opt/Qt5.2.0/5.2.0/gcc_64/plugins/sqldrivers
$ ls
libqsqlite.so  libqsqlmysql.so 
```

使用以下命令检查库依赖关系：

```
$ ldd libqsqlmysql.so 
```

我发现问题：

```
libmysqlclient_r.so.16 => not found 
```

这可能是库依赖问题。所以解决这个问题：

链接库文件：

```
 $ ln -s libmysqlclient_r.so.16.0.0        libmysqlclient_r.so 
```

然后再次：

```
$ ln -s libmysqlclient_r.so.16.0.0         libmysqlclient_r.so.16 
```

现在它为我工作。祝一切顺利

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-31T21:05:25.090

遇到了同样的问题，谷歌的一些研究和直觉终于解决了它。使用 Qt5.9.1 和 Ubuntu 17.10

首先，检查是否存在`libmysqlclient.so.18 => not found`错误

```
 :~/Qt5.9.1/5.9.1/gcc_64/plugins/sqldrivers$ ldd libqsqlmysql.so 
```

二、搜索libmysqlclient在哪里

```
 :/$ locate libmysqlclient 
```

第三，转到 libmysqlclient 所在的文件夹并在那里创建链接

```
 :/usr/lib/x86_64-linux-gnu$ sudo ln -s libmysqlclient.so.20 libmysqlclient.so.18 
```

并检查之前制作的链接

```
 ls -alh | grep libmysql 
```

在那一刻，这些都没有为我解决，我决定进一步查看突触包，并意识到`libqt5sql5-mysql`没有安装 5.9.1 版本，所以安装它解决了问题，但我在做 ldd 时仍然有一条消息

> ./libqsqlmysql.so：/usr/lib/x86_64-linux-gnu/libmysqlclient.so.18：找不到版本“libmysqlclient_18”（./libqsqlmysql.so 需要）

在那之后，找到了一些指导我找到真正解决方案的链接，如果你想知道发生了什么，这里就是它们

我下载了第三个链接中所述的库，并且工作起来很吸引人。希望能帮助到你！

[https://www.unix.com/unix-for-advanced-and-expert-users/107611-difference-between-libsqlclient-so-libsqlclient_r-so.html](https://www.unix.com/unix-for-advanced-and-expert-users/107611-difference-between-libsqlclient-so-libsqlclient_r-so.html)

[http://www.tango-controls.org/community/forum/c/general/installation/ubuntu-1604-problem-installing-from-source-code-libmysqlclient-replaces-libmysqlclient_r/](http://www.tango-controls.org/community/forum/c/general/installation/ubuntu-1604-problem-installing-from-source-code-libmysqlclient-replaces-libmysqlclient_r/)

[https://superuser.com/questions/1101426/installing-libmysqlclient18-on-ubuntu-16-04?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa&newreg=9c558283c488461aaf597ef1132e4ca0](https://superuser.com/questions/1101426/installing-libmysqlclient18-on-ubuntu-16-04?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa&newreg=9c558283c488461aaf597ef1132e4ca0)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-07T22:22:29.170

这里有几个关于这个问题的非常好的链接：

1.  在基于 Unix 的系统上手动制作插件（来自 Qt 文档）：http: [//qt-project.org/doc/qt-5/sql-driver.html](http://qt-project.org/doc/qt-5/sql-driver.html)

2.  一个写得很好的链接，专门针对这个问题（不要忘记从源代码安装 Qt，这可以通过在从 .run 可执行文件安装时在第一步中选中相应的（隐藏）框来完成，或者通过下载“ qt-everywhere-opensource-src' 版本）： [http ://adamcavendish.is-programmer.com/posts/40431.html](http://adamcavendish.is-programmer.com/posts/40431.html)

享受吧，佩曼

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-02-27T19:31:27.613

我的答案：

```
QSqlDatabase db(QSqlDatabase::addDatabase("QMYSQL"));
db.setDatabaseName("dbname");
db.setHostName("localhost");
db.setUserName("usernm");
db.setPassword("password");

if (db.open())
{
    qDebug() << "SUCCESS!";
    db.close();
} 
```

# java - 在 Android 中打包

> ID：14667769
> 
> 赞同：0
> 
> 时间：2013-02-02T23:41:56.217
> 
> 标签：java, android, package

```
The declared package "com.google.zxing.common" does not match the expected package "zxing. 
```

我得到这个消息。我创建了一个名为“Zxing”的包，在每个类中都有一条错误消息说明上述消息。在解决此问题之前，我无法运行我的应用程序。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:03:26.270

您有一个或多个课程，其中：

`package com.google.zxing.commmon`

不居住在`src/com/google/zxing/common/`，而是居住在`src/zxing/`。

# javascript - iframe完成加载后如何调用javascript函数？

> ID：14667770
> 
> 赞同：18
> 
> 时间：2013-02-02T23:41:56.957
> 
> 标签：javascript, html, iframe

谁能告诉我如何检测 iframe 是否已完成加载，以便我可以调用 javascript 函数并提醒用户 iframe 已完成加载并在 javascript 函数中执行一些其他过程？（注意我的 iframe 是我自己的网站）我可以从 iframe 中触发回调，因为我可以控制它吗？如果是的话怎么办？

```
<iframe id ='myframe' src='http://www.example.com/doit.php'></iframe> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-02T23:48:53.117

尝试这个

```
<iframe id ='myframe' src='http://www.mysite.com/doit.php' onload="onLoadHandler();"></iframe>

<script type="text/javascript">
function onLoadHandler() {
    alert('loaded');
}
</script> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-02T23:45:16.640

Handle it just like anything loading:

```
$('#myframe').on('load', function() {
    // Handler for "load" called.
}); 
```

Obsolete answer:

```
$('#myframe').load(function() {
  // Handler for .load() called.
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-01T22:29:58.807

只用普通的 javascript

```
document.querySelector('#myframe').addEventListener("load", ev => {
    // your stuff
}) 
```

# iphone - UITabelView 根本不会滚动

> ID：14667776
> 
> 赞同：0
> 
> 时间：2013-02-02T23:42:26.787
> 
> 标签：iphone, objective-c, uitableview

我在 UIView 的底部有一个 UItableView ，我在表格顶部有一个按钮，可以将它向上拖动。但是，在将其向上拖动后，表格不会对任何触摸做出响应。有什么支持吗？我试过把它带到视图的前面。我的表是以编程方式创建的。我可以完美地看到它，并且有 30 个单元格。

![在此处输入图像描述](../Images/60c891614b348ef5dd5819dcf262cee6.png) ![在此处输入图像描述](../Images/421ee561abedb978d085287b1c92425a.png)

```
songTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 460, 320, 440)];
[self.view addSubview:songTable];
songTable.dataSource = self;
songTable.delegate = self;
[self.view bringSubviewToFront:songTable]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:18:04.697

回复您的评论作为答案。

查看您的应用程序屏幕截图（顺便说一下，UI 不错！）我推断该设计由两个垂直滑动的视图组成。表格视图滚动的问题在于您的表格视图被添加到其父视图的边界之外，因此没有接收到触摸事件。以下是我将如何设置视图层次结构来解决此问题：

```
[self view]
    [container view]
        [current song album art view]
        [song playing view]
        [song controls view]
        [table view] 
```

要实现滑动效果，您可以只更改“容器视图”的 y 原点，也可以对其应用垂直变换。只需让“容器视图”的高度为 900 点或元素的总高度为任何值，然后您就设置好了，因为每个子视图都布置在其父视图的范围内。

# sublimetext2 - 如何在 Sublime Text 中进入 Vintage Command 模式

> ID：14667778
> 
> 赞同：3
> 
> 时间：2013-02-02T23:42:27.130
> 
> 标签：sublimetext2

我在 OSX 上。我很确定 Vintage 模式已启用（我在状态栏中看到 INSERT MODE），但我无法进入 COMMAND 模式。我怎么做？正如我在一些教程中看到的那样，转义键不起作用。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T20:20:58.043

从[文档](http://www.sublimetext.com/docs/2/vintage.html)-

```
Vintage starts in insert mode by default. This can be changed by adding:

"vintage_start_in_command_mode": true

to your User Settings. 
```

接着 -

```
if you'd like to bind "jj" to exit insert mode, you can add this key binding:

{ "keys": ["j", "j"], "command": "exit_insert_mode",
    "context":
    [
        { "key": "setting.command_mode", "operand": false },
        { "key": "setting.is_widget", "operand": false }
    ]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T16:25:28.550

我发现以下内容很方便，`Preferences -> Key Bindings - User`因为它也退出了可视模式。请注意大写的 J 和 K，因为在可视模式下，您需要使用 j 和 k 来移动。

```
 { "keys": ["J", "K"], "command": "exit_insert_mode",
    "context":
    [
      { "key": "setting.command_mode", "operand": false },
      { "key": "setting.is_widget", "operand": false },
      { "key": "setting.vintage_ctrl_keys" }
    ]
  },
  { "keys": ["J", "K"], "command": "exit_visual_mode",
      "context":
      [
          { "key": "setting.command_mode"},
          { "key": "num_selections", "operand": 1},
          { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": false },
          { "key": "setting.vintage_ctrl_keys" }
      ]
  }, 
```

# java - 每个屏幕方向的不同文本大小？

> ID：14667779
> 
> 赞同：4
> 
> 时间：2013-02-02T23:42:30.540
> 
> 标签：java, android

我正在使用计算器，在横向上我正在添加更多按钮，因此每个按钮都会变得更小以适应额外的按钮。

在这一点上，我只是使用较小的字体大小，因此它们在横向模式下适合较小的按钮，但是我希望纵向上的文本比横向上的文本更大。

我一直在尝试找出一种简单的方法来根据屏幕方向使用不同的主题，但我还没有找到一种简单的方法来做到这一点。为横向样式创建不同的文件夹`/values-land/style.xml`不起作用，因为主题仅在重新启动应用程序时应用。

如何根据屏幕方向使用不同的字体大小/主题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T04:31:29.877

我建议使用为纵向和横向定义字体大小的目录。例如：

```
values/dimen.xml
values-land/dimen.xml 
```

在每个 dimen.xml 文件中，您都会为按钮定义字体大小。

```
values/dimen.xml:
    <dimen name="button_fontSize">12sp</dimen>

values-land/dimen.xml
    <dimen name="button_fontSize">24sp</dimen> 
```

当启动活动或旋转设备时，您的 xml 布局将获取适合当前方向的字体大小。

**编辑：**为了响应您使用`android:configChanges`捕获计算器显示，我想提供一个更容易实现和简化编码的替代方案。

在下面的示例中，我假设您的计算屏幕包含一个`TextView`名为`calcDisplay`.

```
protected void onSaveInstanceState(Bundle outState) {
    // Save the calculator display text.
    outState.putString("displayText", calcDisplay.getText());
}

protected void onCreate(Bundle savedInstanceState) {

    // ...

    // Restore the calculator display text.
    if (savedInstanceState != null) {
        String displayText = savedInstanceState.getString("displayText");
        calcDisplay.setText(displayText);
    }
} 
```

使用此代码，设备不仅会在旋转时自动恢复计算器显示文本，而且由于 Activity 被销毁并重新创建，因此也会加载您想要的字体大小。

# java - ANTLR 4 和 AST 访客

> ID：14667781
> 
> 赞同：11
> 
> 时间：2013-02-02T23:42:44.753
> 
> 标签：java, antlr, visitor-pattern, abstract-syntax-tree, antlr4

我正在尝试将 AST 与 ANTLR4 一起使用，并带有以下文件：

生成器.java

```
import org.antlr.v4.runtime.ANTLRInputStream;
import org.antlr.v4.runtime.CharStream;
import org.antlr.v4.runtime.CommonTokenStream;
import org.antlr.v4.runtime.TokenStream;

public class Builder
{

    public static void main(String[] args)
    {
        CharStream input = new ANTLRInputStream("ON M1==2 && M3 == 5 && (M2 > 1 || M5 <= 5.0) "
                                              + "DO P5:42 P4:10");
        ExprLexer lexer = new ExprLexer(input);
        TokenStream tokens = new CommonTokenStream(lexer);
        ExprParser parser = new ExprParser(tokens);
        parser.addParseListener(new ExprTestListener());
        ExprParser.ExpressionContext uu = parser.expression();
    }

} 
```

ExprTestListener：

```
import org.antlr.v4.runtime.ParserRuleContext;
import org.antlr.v4.runtime.Token;
import org.antlr.v4.runtime.tree.TerminalNode;
import org.antlr.v4.runtime.tree.ErrorNode;

public class ExprTestListener extends ExprBaseListener {
    @Override public void enterExpression(ExprParser.ExpressionContext ctx)
    {
        System.out.println(ctx);
    }
    @Override public void exitExpression(ExprParser.ExpressionContext ctx)
    {
        System.out.println(ctx);
    }

    @Override public void enterActionexpr(ExprParser.ActionexprContext ctx)
    {
        System.out.println(ctx);
    }
    @Override public void exitActionexpr(ExprParser.ActionexprContext ctx)
    {
        System.out.println(ctx);
    }

    @Override public void enterCondexpr(ExprParser.CondexprContext ctx)
    {
        System.out.println(ctx);
    }
    @Override public void exitCondexpr(ExprParser.CondexprContext ctx)
    {
        System.out.println(ctx);
    }

    @Override public void enterCond(ExprParser.CondContext ctx)
    {
        System.out.println(ctx);
    }
    @Override public void exitCond(ExprParser.CondContext ctx)
    {
        System.out.println(ctx);
    }

    @Override public void enterEveryRule(ParserRuleContext ctx)
    {
        System.out.println(ctx);
    }
    @Override public void exitEveryRule(ParserRuleContext ctx)
    {
        System.out.println(ctx);
    }
    @Override public void visitTerminal(TerminalNode node)
    {
    }
    @Override public void visitErrorNode(ErrorNode node)
    {
    }
} 
```

表达式：

```
grammar Expr;
options
{
  // antlr will generate java lexer and parser
  language = Java;

}
WS      : [ \t\r\n]+ -> skip ;
OP      : '&&' | '||';
COMP    : '==' | '<' | '>' | '<=' | '>=' | '!=';
fragment INT     : [0-9]+;
REAL    : INT '.' INT | INT;

ACTION  : 'P' INT ':' INT;
MEASURE : 'M' INT;

// ***************** parser rules:
cond       : MEASURE COMP REAL;
condexpr   : '(' condexpr ')' | cond OP condexpr | cond;
actionexpr : ACTION actionexpr | ACTION;
expression : 'ON' condexpr 'DO' actionexpr; 
```

我有这个输出：

```
[]
[]
[29]
[29]
[16 29]
[16 29]
[16 29]
[16 29]
[18 29]
[18 29]
[16 18 29]
[16 18 29]
[16 18 29]
[16 18 29]
[18 18 29]
[18 18 29]
[13 18 18 29]
[13 18 18 29]
[16 13 18 18 29]
[16 13 18 18 29]
[16 13 18 18 29]
[16 13 18 18 29]
[18 13 18 18 29]
[18 13 18 18 29]
[20 18 13 18 18 29]
[20 18 13 18 18 29]
[20 18 13 18 18 29]
[20 18 13 18 18 29]
[18 13 18 18 29]
[18 13 18 18 29]
[13 18 18 29]
[13 18 18 29]
[18 18 29]
[18 18 29]
[18 29]
[18 29]
[29]
[29]
[31]
[31]
[24 31]
[24 31]
[24 31]
[24 31]
[31]
[31]
[]
[] 
```

我发现使用 ANTLR4 很难理解访问者。

我有树目标：

*   获取 MEASURE 和 ACTION 的收集 INT（在两个不同的集合中）
*   替换一些 OP（例如 != by <>）
*   获取替换了 OP 的 condexpr（顶部项目）字符串（参见我的前一点）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T00:35:23.320

**首先，我将解释您在上面观察到的内容：**

首先，请阅读您调用的方法的文档。该[`Parser.addParseListener`](http://antlr.org/api/Java/org/antlr/v4/runtime/Parser.html#addParseListener%28org.antlr.v4.runtime.tree.ParseTreeListener%29)文档包括以下注释：

> 这仅适用于高级用户。请将您的 ParseTreeListener 交给 ParseTreeWalker 而不是交给解析器！！！！

`toString()`类的实现`ParserRuleContext`只是在创建上下文时打印规则调用堆栈。当侦听器进入规则时打印一次，退出时打印一次。对于`actionexpr`, `cond`, 并`condexpr`再次打印，为每个上下文产生总共 4 个相同的输出行。

**现在对你的目标做一些说明：**

*   在`enterCond`and`exitCond`中，`MEASURE`文本可通过调用`ctx.MEASURE().getText()`.
*   在`enterActionexpr`and`exitActionexpr`中，`ACTION`文本可通过调用`ctx.ACTION().getText()`.
*   您可以`COND`通过为更新的令牌创建一个新的`TerminalNodeImpl`和来更改令牌，并使用访问者或侦听器`CommonToken`将其分配给字段中的正确索引。`CondContext.children`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T13:11:34.323

您可以使用树标签来设置解析的上下文，然后使用访问者类和触发方法遍历观察到的图的叶子，以便从语言源代码中的表达式创建操作。因此，在初始访问时，监听器不会处理实际的访问者模式。实际的访问者模式和访问处理是由表达式库侦听器类扩展的方法完成的。

**侦听器识别表达式：**

```
@Override public void enterListener(ExprParser.EXPR_CONTEXTContext ctx) { 
  //some code to view the compilation process
} 
```

**表达式规则获得一个名称标签：**

```
'EXPR_CONTEXT' expression             # EXPR_CONTEXT //the tree label 
```

**表达式walker的实现：**

```
public class ExprWalker extends ExprBaseListener {

  @Override 
  public void enterListener(ExprParser.EXPR_CONTEXTContext ctx) { 

    java.util.List<ExprParser.ExpressionContext> e = ctx.expression();

    System.out.println("EXPRESSION: " //print action
    + e.get(0).getText() + ", " //first element
    + e.get(1).getText() //second element
    + ", " + ... + ", " //number of elements
    + e.get(N).getText()); //last element

} 
```

**然后主文件与步行者一起步行：**

```
ParseTree tree = parser.parse(); //parse the tree 
```

间奏曲：在应用步行者访问模式之前，可以想象树段优化或处理模式。解析的树可以在这里作为源代码树的单独归纳来处理。这种方法支持更复杂的代码和树处理模式。

```
ParseTreeWalker walker = new ParseTreeWalker(); //get the walker
walker.walk(new ExprWalker(), tree); //start visiting 
```

# php - 在 joomla 2.5 中发送帖子请求

> ID：14667791
> 
> 赞同：0
> 
> 时间：2013-02-02T23:44:26.140
> 
> 标签：php, post, joomla

我创建了一个将用户信息发送到数据库的新模块。但是我在发布请求时遇到了麻烦！

```
<form action="send.php" id="send_c" method="post" >
<p>1</p>
<input type="text" name="pib_u" />
<p>2</p>
<input type="text" name="email_u" />
<p>3</p>
<input type="text" name="phone_u" />
<p>4</p>

<select>
<?php
foreach ($list as $item) {
    echo '<option>'.$item->cat_name.'</option>';
}
?>   
</select>

<p></p>
<input type="submit" value="Go" />

</form> 
```

当我尝试从表单发送信息时，我收到 send.php 的 404 错误 PS：模块文件夹中的 send.php

请帮我解决这个问题！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T04:38:34.797

尝试

```
<form action="<?php echo JURI::root().'modules/your_modname/send.php';?>" id="send_c" method="post" > 

get request your with

$_POST['var_name'] or JRequest::getVar ('var_name'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T10:12:57.460

如果您将请求发送到加载模块的同一页面，请将操作属性留空。

```
<form action="" id="send_c" method="post" > 
```

您编写它的方式会查找 {current url}send.php 并没有找到它。

# jquery - 使用 jQuery 在层次结构中查找标签

> ID：14667797
> 
> 赞同：0
> 
> 时间：2013-02-02T23:44:55.270
> 
> 标签：jquery

给定以下html：

```
<dt><span class="q-num">1</span>. What is one plus one?</dt>

<dd><input type="radio" value="a" name="1" required /> 4</dd>
<dd><input type="radio" value="b" name="1" required /> 7</dd>
<dd><input type="radio" value="c" name="1" required /> 2</dd>
<dd><input type="radio" value="d" name="1" required /> 8</dd>

<dt><span class="q-num">2</span>. What is two plus two?</dt>

<dd><input type="radio" value="a" name="2" required /> 4</dd>
<dd><input type="radio" value="b" name="2" required /> 7</dd>
<dd><input type="radio" value="c" name="2" required /> 2</dd>
<dd><input type="radio" value="d" name="2" required /> 8</dd>

<dt><span class="q-num">3</span>. What is three plus three?</dt>

<dd><input type="radio" value="a" name="3" required /> 4</dd>
<dd><input type="radio" value="b" name="3" required /> 7</dd>
<dd><input type="radio" value="c" name="3" required /> 2</dd>
<dd><input type="radio" value="d" name="3" required /> 6</dd> 
```

单击任何时，我想要`alert()`最近的前一个值。我试过了，但我得到的只是一个空白警报..`span[class='q-num']``input[type='radio']``closest()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T23:46:26.770

[`prevUntil`](http://api.jquery.com/prevUntil/)是你的朋友：

```
$(this).parent().prevUntil('dt').last().prev().find('span[class="q-num"]').text(); 
```

这是小提琴：http: [//jsfiddle.net/UPRBT/](http://jsfiddle.net/UPRBT/)

* * *

如果您发布的标记是您的真实代码，则只需使用`name`单击的单选按钮的属性：

```
$('input[type="radio"]').click(function () {
    alert(this.name);
}); 
```

这是小提琴：http: [//jsfiddle.net/b4Sj8/](http://jsfiddle.net/b4Sj8/)

* * *

一种更有效的方法是使用[这种自定义遍历方法](https://stackoverflow.com/questions/11617226/is-there-a-fancier-way-to-get-a-previous-item-with-the-same-class)：

```
$.each({
    'prevFind' : 'previousSibling',
    'nextFind' : 'nextSibling'
}, function(method, dir) {

    $.fn[method] = function (selector) {

        var elems = [];

        this.each(function(i, item) {
            while (item = item[dir]) {
                if (item.nodeType == 1) {
                    if ( $.find.matches(selector, [item]).length ) {
                        elems.push(item);
                        break;
                    }
                }
            }
        });

        return this.pushStack(elems, method, selector);
    };
}); 
```

然后您可以像这样使用它：

```
$(this.parentNode).prevFind('dt').find('.q-num').text() 
```

这是小提琴：http: [//jsfiddle.net/b4Sj8/1/](http://jsfiddle.net/b4Sj8/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:51:07.777

尝试

```
alert($(this).parent().prevAll('dt:first').find('span[class="q-num"]').text()); 
```

[http://jsfiddle.net/mowglisanu/PkMGN/](http://jsfiddle.net/mowglisanu/PkMGN/)

# ios - Where is the iOS caret when the keyboard is shown?

> ID：14667800
> 
> 赞同：0
> 
> 时间：2013-02-02T23:45:20.527
> 
> 标签：ios, ibaction

I have custom `UIToolbar`'s that sit ontop of my keyboard when it displays and that I use to insert pre-formatted text. My problem is that I have one `UITextView` and two `UITextField`'s that are potential users of my pre-formatted text.

When the buttons call an `IBAction`, how can I tell which element has focus and is the `firstResponder`?

**Attempt #2 at asking my question smartly:**

I need to call `[textElement selectedRange];` on the `UITextField` or `UITextView` that has focus. How can I declare `textElement` in a way that it doesn't matter which of the view `UIText*` classes it is?

If I do the following...

```
UIView *textElement = [self my_method_of_getting_first_responder];
NSRange range = [textElement selectedRange]; 
```

I of course get the

> UIView does not declare selector 'selectedRange'

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:00:08.530

如果我理解了问题，您想单击某个按钮，然后获取指向您当前活动文本字段的链接吗？然后你必须使用 UIView 上的类别：

```
@implementation UIView (FindFirstResponder)
- (BOOL)findFirstResponder
{
    if (self.isFirstResponder) {
        return YES;     
    }
    for (UIView *subView in self.subviews) {
        if ([subView findFirstResponder]) {
            return YES;
        }
    }
    return NO;
}
@end 
```

您可以从视图控制器调用 UIWindow 上的此类别方法。获取窗口使用`UIWindow *window= self.view.window;`

# c# - httphandler not working correctly

> ID：14667803
> 
> 赞同：2
> 
> 时间：2013-02-02T23:45:36.760
> 
> 标签：c#, asp.net, httphandler

I'm trying to redirect a user only if the user is logged in to a different page. I'm using `HTTPHandler` to intercept this request and redirect. After the user is logged in the control does not return to this `HTTPHandler`. Any ideas or suggestions

```
namespace NES.HiLo.Security
{
    public class PallativeAuthenticationHandler : IHttpHandler, IRequiresSessionState
    {
        /// <summary>
        /// You will need to configure this handler in the web.config file of your 
        /// web and register it with IIS before being able to use it. For more information
        /// see the following link: http://go.microsoft.com/?linkid=8101007
        /// </summary>

        public bool IsReusable
        {
        // Return false in case your Managed Handler cannot be reused for another request.
        // Usually this would be false in case you have some state information preserved per request.
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {

        string UserName = "";
        int TSecUserID = 0;

        HttpContext context2 = HttpContext.Current;

        if (string.IsNullOrEmpty(context2.User.Identity.Name))
            UserName = "UNKNOWN";
        else
            UserName = context2.User.Identity.Name.ToString();

        if (UserName != "UNKNOWN")
        {

            string connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["NES.HiLo.Data.Properties.Settings.HiLoConnectionString"].ConnectionString;
            using (SqlConnection connection = new SqlConnection(connectionString))
            {

                connection.Open();
                SqlCommand command = new SqlCommand("Select tSec_UserId from dbo.HiLoUser where Username='" + HttpContext.Current.User.Identity.Name.ToString() + "'", connection);

                TSecUserID = (Int32)command.ExecuteScalar();
                connection.Close();
                HttpContext.Current.Response.Redirect("http://www.google.com?retUrl=" + TSecUserID);

            }

        }
        else
        {
            HttpContext.Current.Response.Redirect("~/Login.aspx?retUrl=" + HttpUtility.UrlEncode(context2.Request.Url.ToString()));

        }

    }
} 
```

Httphanlder entries in web.config

```
<httpHandlers>
        <!--<add path="*.pdf" type="HttpSecurity.HttpHandlerAuthentication, HttpSecurity"  verb="*"/>-->

        <!--<add verb="GET" path="/calderdale/*/*.pdf" type="NES.HiLo.Security.CalderDaleAuthenticationHandler, NES.HiLo.Security" />-->
        <add verb="*" path="/calderdale/*.pdf" type="NES.HiLo.Security.CalderDaleAuthenticationHandler, NES.HiLo.Security" />
        <remove verb="*" path="*.asmx" />
        <!-- ASPNETAJAX -->
        <add verb="*" path="*.asmx" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add verb="*" path="*_AppService.axd" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
        <!-- UMBRACO CHANNELS -->
        <add verb="*" path="umbraco/channels.aspx" type="umbraco.presentation.channels.api, umbraco" />
        <add verb="*" path="umbraco/channels/word.aspx" type="umbraco.presentation.channels.wordApi, umbraco" />
        <add verb="*" path="umbraco/clt/ajaxCommunityAdministrators.aspx" type="NES.HiLo.UserControls.DataTypes.AjaxCommunityAdministrators, NES.HiLo" />
        <!-- ELMAH -->
        <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
        <!-- WIDGET AJAX HANDLER -->
        <add verb="*" path="umbraco/WidgetLibrary/WidgetAjaxHandler.aspx" type="NES.WidgetLibrary.WidgetAjaxHandler" />
        <add verb="GET" path="umbraco/WidgetLibrary/SubjectSelectorAjaxHandler.aspx" type="NES.WidgetLibrary.MetaDataControls.ChildControls.SubjectSelectorControl.AjaxSelector" />
        <add verb="*" path="/FilterByDevice.ashx" type="NES.HiLo.Web.Handlers.DeviceFilterHandler" />
        <add verb="GET" path="/Pallative/*.xml" type="NES.HiLo.Security.PallativeAuthenticationHandler, NES.HiLo.Security" />
    </httpHandlers>

 <authentication mode="Forms">
        <forms name="KFCSAUTH" loginUrl="login.aspx" protection="All" slidingExpiration="true" path="/" domain=".scot.nhs.uk" />
    </authentication>
    <authorization>
        <allow users="?" />
    </authorization>

 <system.webServer>
    <!--<validation validateIntegratedModeConfiguration="false" />-->
    <handlers>
        <add name="Pallative Handler" path="/Pallative/*.xml" verb="GET" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
        <add name="Calderdale Handler" path="/calderdale/*.pdf" verb="GET" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" />
        <!--<add name="Pallative Handler" path="Pallative/pallative_doc.html" verb="GET" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll" resourceType="Unspecified" requireAccess="Script" preCondition="classicMode,runtimeVersionv2.0,bitness32" />-->
    </handlers>
    <!--<handlers  accessPolicy="Read, Write, Script, Execute">
      -->
    <!--<add name="PictHandler" preCondition="integratedMode" verb="*" path="*.pictx" type="PictHttpHandler,PictHandler"/>-->
    <!--
      <add name="Pdfhandler" verb="*" path="/calderdale/*.html" type="NES.HiLo.Security.CalderDaleAuthenticationHandler, NES.HiLo.Security" preCondition="integratedMode" />
  </handlers>-->

</system.webServer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:36:19.843

The problem you are facing has something to do with the fact that the authentication cookie is valid only for the domain specified:

```
<forms name="KFCSAUTH" 
    loginUrl="login.aspx" 
    protection="All" 
    slidingExpiration="true" 
    path="/" 
    domain=".scot.nhs.uk" /> 
```

Maybe this problem occurs only when you are running the web application in some other domain. Try removing the `domain` attribute and see if the issue persists.

# php - sql join 显示不正确

> ID：14667804
> 
> 赞同：0
> 
> 时间：2013-02-02T23:45:46.253
> 
> 标签：php, mysql, join

我目前正在尝试使用左连接加入两个表：

- 门户网站 -

*   id_portal（索引）
*   id_venue
*   name_portal

* * *

- 使用权 -

*   id_access（索引）
*   id_event
*   id_portal
*   id_tickets
*   扫描访问

* * *

'access' 包含每个活动的每个门户的多种票证类型。我需要将这些组合起来以获得每个门户的 scan_access 列的总和，但包括具有“null”scan_access 的门户以得出“0”。为了实现这一点，我使用了左连接：

```
SELECT portal.name_portal, SUM(access.scan_access) AS total_scan 
FROM portal LEFT JOIN access ON portal.id_portal = access.id_portal 
WHERE portal.id_venue = $venueId 
GROUP BY portal.id_portal 
ORDER BY portal.id_portal ASC 
```

这意味着我得到以下信息：

*   传送门 1 - 空
*   传送门 2 - 40
*   传送门 3 - 33
*   传送门 4 - 空

但是当我在考虑事件（id_event）时还需要获得上述结果时，我遇到了一个问题，因为当我使用以下内容时：

```
SELECT portal.name_portal, SUM(access.scan_access) AS total_scan 
FROM portal LEFT JOIN access ON portal.id_portal = access.id_portal 
WHERE portal.id_venue = $venueId AND access.id_event = 20 
GROUP BY portal.id_portal 
ORDER BY portal.id_portal ASC 
```

我得到：

*   传送门 2 - 40
*   传送门 3 - 33

这是有道理的，因为它们是仅有的两行具有 id_event 值。但是我怎样才能在不丢失其他门户的情况下考虑这个 col 呢？另外，sql中是否有办法在返回结果时使“null”为零？（我可以用 php 修复 null 但想看看是否可能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:59:29.840

将 NULL 转换为 0 使用这个

```
 COALESCE(col, 0) 
```

在你的例子中，它将是

```
 SUM(COALESCE(access.scan_access, 0)) AS total_scan 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:04:17.993

通过放入`access.id_event = 20`你的`WHERE`子句，你把你的`LEFT JOIN`变成一个`INNER JOIN`. 进入`access.id_event = 20`您的加入标准以保留您的`LEFT JOIN`. 正如@echo_me 提到的，您可以`COALESCE()`用来摆脱零。我会把它放在 周围`SUM()`，而不是里面。

```
SELECT portal.name_portal, COALESCE( SUM(access.scan_access), 0 ) AS total_scan 
FROM portal LEFT JOIN access ON portal.id_portal = access.id_portal AND access.id_event = 20 
WHERE portal.id_venue = $venueId
GROUP BY portal.id_portal 
ORDER BY portal.id_portal ASC 
```

# xml - XSD to define an element with attributes and required content

> ID：14667807
> 
> 赞同：3
> 
> 时间：2013-02-02T23:46:03.940
> 
> 标签：xml, xsd

Ok, this has to be easy, but I can't find a decent explanation or example of how to do it...

I want to specify that one of my XML elements can have some attributes, and that the element content must be non-blank text. For example, this is valid:

```
<person age="30">Bob</person> 
```

but these constructs are invalid because the element text is missing:

```
<person age="30"></person>
<person age="30" /> 
```

FWIW, my existing schema (fragment), which does NOT enforce the "required text content" rule, looks like this. I assume that I want to add an xs:restriction block somewhere in this model, but I can't figure out where it belongs.

```
<xs:element name="person">
  <xs:complexType>
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="age" type="xs:int" use="optional" />
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:21:09.467

定义一个具有所需内容的类型，如下所示：

```
<xs:simpleType name="textType">
  <xs:restriction base="xs:string">
    <xs:pattern value=".+"/>
  </xs:restriction>
</xs:simpleType> 
```

之后，您可以将其用作元素的基本类型：

```
<xs:element name="person">
  <xs:complexType>
    <xs:simpleContent>
      <xs:extension base="textType">
        <xs:attribute name="age" type="xsd:int"></xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:element> 
```

# facebook - Problems configuring an application in Facebook (website with Facebook login)

> ID：14667812
> 
> 赞同：0
> 
> 时间：2013-02-02T23:46:26.847
> 
> 标签：facebook, heroku, web-hosting

all:

We have a software developer building a web site with Facebook login for our company. They have told us to register a Facebook application.

For the moment, the beta application is hosted in a development environment. I would like to start testing also the Facebook integration. But when I access to the application page in Facebook, I get an [error](http://i.stack.imgur.com/NXOmd.png).

I think it might be related to an attribute I find in the first page of the app configuration. The attribute is called "[Hosting URL](http://i.stack.imgur.com/fcuQv.png)".

The option seems to be linked to some kind of hosting service provided by Heroku. I don't know exactly what is that, but I would say we do not need it. We will use our own hosting server and, what's more, our application is developed in a language different that the one Heroku supports.

Could somebody confirm us which is the problem and, if it is possible, give us a hint to solve it?

Thank a lot in advance, -The SportPoket team

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:57:12.420

“托管 URL”是指完成的生产应用程序的公共 Web 地址。但是，在开发过程中，您只需提供可从 Web 浏览器访问的应用程序的 URL。如果您在端口 5000 上运行本地 Web 服务器，`http://127.0.0.1:5000/`则可以使用。

Heroku 只是 Facebook 推荐的托管服务之一，您不必使用它，但文档可能会有所帮助。可以在此处找到有关设置 Facebook 应用程序开发环境的更多信息：[https ://devcenter.heroku.com/articles/facebook#1-creating-a-development-facebook-app](https://devcenter.heroku.com/articles/facebook#1-creating-a-development-facebook-app)

# c++ - 循环中未初始化的局部变量每次迭代是否具有相同的值？

> ID：14667813
> 
> 赞同：-3
> 
> 时间：2013-02-02T23:46:28.450
> 
> 标签：c++

考虑以下代码：

```
int l;
int k;
for (int i=0; i < 2; ++i)
{
    int j;
    if (i == 0) l = j;
    if (i == 1) k = j;
}
assert (l == k); 
```

断言成立吗？有趣的是，未初始化的变量是否可以在不同的迭代中取不同的值。

一些玩弄 LLVM 的人表明断言实际上确实成立：*这实际上是由标准保证的，还是它是未定义的，并且它以 LLVM 编译器实现它的方式发生？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:48:29.957

至于你*想要*做什么： 的价值`j`是不确定的。它只是声明时发生在堆栈上的任何内容，因此断言*不一定*成立。

* * *

**编辑**：有人指出，由于`j`每次分配时都可能在堆栈上的同一个位置，该值的预期行为是什么？

相同的事实只是实现的事实。该标准规定：

> **6.2.4**对于这样一个没有可变长度数组类型的对象，它的生命周期从进入与其关联的块开始，直到该块的执行以任何方式结束。（进入封闭的块或调用函数会暂停，但不会结束当前块的执行。）如果递归地进入块，则每次都会创建一个新的对象实例。**对象的初始值是不确定的。如果为对象指定了初始化，则在执行块时每次到达声明时都会执行该初始化；否则，每次达到声明时，该值变得不确定。**

这是不确定的。

**编辑2**：那是C标准。从 C++：

> **6.7**具有自动存储持续时间（3.7.2）的变量在每次执行其*声明语句*时都会被初始化。在块中声明的具有自动存储持续时间的变量在退出块时被销毁（6.6）。

# symfony - Symfony2登录ajax翻译错误信息

> ID：14667816
> 
> 赞同：1
> 
> 时间：2013-02-02T23:47:14.960
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我想翻译我的 ajax 登录错误消息。我正在使用 FOSUserBundle，我会利用我正确覆盖文件夹 Resources/translations 的翻译文件。

我的 AthenticationHandler.php：

```
class AuthenticationHandler
implements AuthenticationSuccessHandlerInterface,
       AuthenticationFailureHandlerInterface
{

protected $router;
protected $security;
protected $userManager;
protected $service_container;

public function __construct(RouterInterface $router,SecurityContext $security, $userManager, $service_container)
{
    $this->router = $router;
    $this->security = $security;
    $this->userManager = $userManager;
    $this->service_container = $service_container;

}
public function onAuthenticationSuccess(Request $request, TokenInterface $token) {
    if ($request->isXmlHttpRequest()) {
        //...
    }
    return new RedirectResponse($this->router->generate('anag_new'));
}
public function onAuthenticationFailure(Request $request, AuthenticationException $exception) {

    if ($request->isXmlHttpRequest()) {
        $error = $exception->getMessage();
        $result = array('success' => false, 'message' => $request->get('translator')->trans($error, array(), 'FOSUserBundle'));
        $response = new Response(json_encode($result));
        $response->headers->set('Content-Type', 'application/json');
        return $response;
    } else {
        //...
    }
} 
```

}

但返回此错误：

```
Fatal error: Call to a member function trans() on a non-object in /var/www/MyBusiness/src/My/UserBundle/Handler/AuthenticationHandler.php 
```

如何翻译错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:03:11.403

[`$request->get(string $key, mixed $default = null, type $deep = false)`](http://api.symfony.com/2.0/Symfony/Component/HttpFoundation/Request.html#method_get)用于从 GET、PATH、POST、COOKIE 获取参数。您正在尝试获取可能不存在的“翻译器”参数。所以`null`返回，你调用`trans()`一个非对象。

`AuthenticationHandler`只需在您的（可能在构造函数中）注入“翻译器”服务。或者从服务容器中获取它，因为它在您的课程中可用：

```
$translator = $this->service_container->get('translator');

// ...
$result = array(
    'success' => false,
    'message' => $translator->trans($error, array(), 'FOSUserBundle')
); 
```

# java - Signal one Java process from another

> ID：14667817
> 
> 赞同：1
> 
> 时间：2013-02-02T23:47:25.253
> 
> 标签：java

I need to send wakeup signal to a java process from another java process. Can I do it using signals? I tried to find some stuff on internet but couldnt get. Can anyone please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:10:27.003

I am confused on two process in same JVM part (Two class loaders ?). Either way, easiest way is to communicate over the shared local socket or a file.

You can even look at shared memory map.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:29:45.620

假设您的意思是两个 java 线程，最简单的方法可能是使用 javas 等待/通知机制。您可以在 javadoc 中阅读有关它如何工作的更多信息：http: [//docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

这是一个示例程序，它演示了它是如何工作的。当每个线程运行时，它将交替打印线程 ID。

```
public class Main {

  public static void main(String[] args) {
    final Object notifier = new Object();                       //the notifying object
    final long endingTime = System.currentTimeMillis() + 1000;  //finish in 1 s

    Runnable printThread = new Runnable(){
      @Override
      public void run() {
        synchronized (notifier){
          while(System.currentTimeMillis() < endingTime){
            try {
              notifier.wait();
              System.out.println(Thread.currentThread().getId());
              notifier.notify();  //notifies the other thread to stop waiting
            } catch (InterruptedException e) {
              e.printStackTrace();  //uh-oh
            }
          }
        }
      }
    };

    //start two threads
    Thread t1 = new Thread(printThread);
    Thread t2 = new Thread(printThread);
    t1.start();
    t2.start();

    //notify one of the threads to print itself
    synchronized (notifier){
      notifier.notify();
    }

    //wait for the threads to finish
    try {
      t1.join();
      t2.join();
    } catch (InterruptedException e) {
      e.printStackTrace();  //uh-oh
    }
    System.out.println("done");
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:00:16.360

取决于线程的相关程度。如果它们是相关的，那么像上一个问题的答案之一中建议的那样的等待/通知设置就可以解决[问题](https://stackoverflow.com/questions/289434/how-to-make-a-java-thread-wait-for-another-threads-output)。

如果您有更多发布/订阅方法，那么我推荐使用 Guava 的[EventBus](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/eventbus/package-summary.html)作为线程间通信的简单方法。

# java - 开始免费游戏开发

> ID：14667820
> 
> 赞同：0
> 
> 时间：2013-02-02T23:47:34.303
> 
> 标签：java, android, game-engine

我正在开始在 android 上开发一个免费的游戏。

我对架构设计有点困惑。

我应该使用 android 框架上可用的网格/表格布局，还是只通过指定位置和要绘制的对象来绘制我自己的对象。

我为每个对象创建了类：POINT、EMPTY、SQUARE。

我想在这些链接上创建一个原型：

[http://forums.gamesalad.com/discussion/48641/my-flow-free-inspired-game-development-thread](http://forums.gamesalad.com/discussion/48641/my-flow-free-inspired-game-development-thread)

![一只忙碌的猫](../Images/fb98c0d6ea1fd8b9bf9cec821ed2d186.png)

目前，我不必设计 IA，我只需要专注于游戏架构和物理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:29:14.993

> 我应该使用 android 框架上可用的网格/表格布局，还是只通过指定位置和要绘制的对象来绘制我自己的对象。

你不应该使用网格/表格布局。

对于需要性能的 2D 游戏，请使用 OpenGL 或查看 andengine 库。

由于这将是一个简单的 2D 游戏，因此您应该查看`Canvas`. 看看 Android Sample Project > TicTacToeLib 和 Android Sample Project > TicTacToeMain （你需要同时使用它们）。TicTacToeLib 中的 GameView 向您展示了如何在游戏中使用 Canvas。

当你用 TicTacToeLib 编译 TicTacToeMain 时你会看到什么：

![在此处输入图像描述](../Images/7ba76428a3ea989290fc24773b669e50.png)

# c# - EF 代码中一对多关系的隐式密钥优先

> ID：14667824
> 
> 赞同：1
> 
> 时间：2013-02-02T23:47:52.543
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

我有一个聚合类，它将包含另一个类的集合，但该类只会存在于该聚合的集合中，因此我的代码中不需要它的 ID，也不需要引用总计的。例如：

```
public class SalesListing 
{
    public Guid Id { get; set; }
    public ICollection<LocalizedDescription> Descriptions { get; set; }
}

public class LocalizedDescription
{
    public string CultureCode { get; set; }
    public string Title { get; set; }
} 
```

我只想将`LocalizedDescription`类的键声明为组合`SalesListingId`和`CultureCode`不创建`SalesListingId`属性或引用回`SalesListing`. 有什么办法可以用 EF 5.0 做到这一点？

例如，这是一个示例，如果存在这样的 API，我会如何想象它：

```
modelBuilder.Entity<LocalizedDescription>().BelongsTo<SalesListing>(s => s.Description)
            .WithKey((s, ld) => new { s.Id, ld.CultureCode }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:53:56.870

不，您仍然需要指定一个 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:01:52.933

您可以使用以下语法定义复合键：

```
modelBuilder.Entity<LocDesc>().HasKey(ld => new { ld.CultureCode, ld.Title }); 
```

也就是说，我认为您会后悔没有定义整数主键。如果您需要导出内容（例如用于外部审阅或翻译），按 ID 匹配记录将比按标题匹配更快且更不容易出错。拥有 ID 并没有什么坏处，而且现在比以后改装更容易。

我认为您可以通过不在映射定义中为关系提供特定属性来隐式指定 FK 映射：

```
modelBuilder.Entity<SalesListing>().HasMany( e => e.Descriptions ).WithRequired(); 
```

如果您需要指定外键属性，`SalesListingID`请为该值引入一个属性并改用以下映射：

```
modelBuilder.Entity<SalesListing>().HasMany( e => e.Descriptions ).WithRequired()
    .HasForeignKey( r => r.SalesListingID ); 
```

# javascript - How to create a sticky navigation bar that becomes fixed to the top after scrolling

> ID：14667829
> 
> 赞同：41
> 
> 时间：2013-02-02T23:48:28.747
> 
> 标签：javascript, html, css, twitter-bootstrap, nav

I'm attempting to make a nav bar that appears at the bottom of the viewable page when the site is first loaded, then as the user scrolls down, the nav bar scrolls up, and eventually becomes fixed to the top. I'm using Bootstrap, just like this site, but I can't figure out how this site did it. Any help?

Here's the site with the nav bar I'm trying to emulate: [http://www.blastprocessor.co.uk/](http://www.blastprocessor.co.uk/)

Here's my navigation html and css code:

HTML:

```
<div class="navbar navbar-fixed-top" id="navbar">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </a>
            <div class="nav-collapse">
                <ul class="nav nav-pills">
                    <li class="active"><a href="#home">Home</a></li>
                    <li><a href="#service-link">Services</a></li>
                    <li><a href="#contact-link">Contact</a></li>
                </ul><!-- /.nav -->
            </div><!--/.nav-collapse -->
        </div><!-- /.container -->
    </div><!-- /.navbar-inner -->
</div><!-- /.navbar --> 
```

And here's my CSS:

```
.navbar-fixed-top,.navbar-fixed-bottom{position:fixed; -webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;}
.navbar .nav > li a{
    color:white; background:rgba(0,0,0,0.2); text-shadow:none; font-size:1.7em; font-family: marvel, serif; padding:.5em 1.3em; margin:1em 2em;
}
.navbar .nav > .active a:hover, .navbar .nav > li a:hover, .navbar .nav > .active a {
    color:white; ; background:#F90; text-shadow:none; font-size:1.7em; font-family: marvel, serif; padding:.5em 1.3em; margin:1em 2em;
}
.navbar .nav > li {padding:2em;}
.navbar.navbar-fixed-top .navbar-inner{background: rgba(255, 255, 255, 0);}
.navbar .nav, .navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
    padding:0 2em;
}
.navbar-inner {text-align:center;}
.navbar .navbar-inner, .navbar .navbar-inner {border: none; box-shadow: none; filter: none;} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-10-02T18:28:35.010

我正在寻找同样的东西。我读过这在 Bootstrap 3.0 中可用，但我在实际实现它时没有运气。这就是我想出的，而且效果很好。非常简单的 jQuery 和 Javascript。

这是可以玩的 JSFiddle... [http://jsfiddle.net/CriddleCraddle/Wj9dD/](http://jsfiddle.net/CriddleCraddle/Wj9dD/)

该解决方案与 web 和 StackOverflow 上的其他解决方案非常相似。如果您不觉得这个有用，请搜索您需要的内容。祝你好运！

这是HTML...

```
<div id="banner">
  <h2>put what you want here</h2>
  <p>just adjust javascript size to match this window</p>
</div>

  <nav id='nav_bar'>
    <ul class='nav_links'>
      <li><a href="url">Sign In</a></li>
      <li><a href="url">Blog</a></li>
      <li><a href="url">About</a></li>
    </ul>
  </nav>

<div id='body_div'>
  <p style='margin: 0; padding-top: 50px;'>and more stuff to continue scrolling here</p>
</div> 
```

这是CSS...

```
html, body {
  height: 4000px;
}

.navbar-fixed {
  top: 0;
  z-index: 100;
  position: fixed;
  width: 100%;
}

#body_div {
  top: 0;
  position: relative;
  height: 200px;
  background-color: green;
}

#banner {
  width: 100%;
  height: 273px;
  background-color: gray;
  overflow: hidden;
}

#nav_bar {
  border: 0;
  background-color: #202020;
  border-radius: 0px;
  margin-bottom: 0;
  height: 30px;
}

//the below css are for the links, not needed for sticky nav
.nav_links {
  margin: 0;
}

.nav_links li {
  display: inline-block;
  margin-top: 4px;
}

.nav_links li a {
  padding: 0 15.5px;
  color: #3498db;
  text-decoration: none;
} 
```

现在，只需添加 javacript 即可根据滚动位置添加和删除修复类。

```
$(document).ready(function() {
  //change the integers below to match the height of your upper div, which I called
  //banner.  Just add a 1 to the last number.  console.log($(window).scrollTop())
  //to figure out what the scroll position is when exactly you want to fix the nav
  //bar or div or whatever.  I stuck in the console.log for you.  Just remove when
  //you know the position.
  $(window).scroll(function () { 

    console.log($(window).scrollTop());

    if ($(window).scrollTop() > 550) {
      $('#nav_bar').addClass('navbar-fixed-top');
    }

    if ($(window).scrollTop() < 551) {
      $('#nav_bar').removeClass('navbar-fixed-top');
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-03T10:37:39.243

**注意（2015）：下面的问题和答案都适用于旧的、已弃用[的 Twitter Bootstrap 2.x 版本](http://getbootstrap.com/2.3.2)。**

这种制作和元素“粘性”的功能内置在 Twitter 的 Bootstrap 中，称为[Affix](http://getbootstrap.com/2.3.2/javascript.html#affix)。您所要做的就是添加：

```
<div data-spy="affix" data-offset-top="121">
  ... your navbar ...
</div> 
```

围绕您的标签，不要忘记按照[手册](http://twitter.github.com/bootstrap/getting-started.html#html-template)中的说明加载 Bootstrap 的 JS 文件。数据属性`offset-top`告诉页面滚动了多少像素（从顶部）以修复您的菜单组件。通常它只是页面顶部的空间。

注意：修复菜单时，您必须注意缺少的空间。修复意味着将其从页面图层中删除并粘贴到不滚动的不同图层中。我正在执行以下操作：

```
<div style="height: 77px;">
  <div data-spy="affix" data-offset-top="121">
    <div style="position: relative; height: 0; width: 100%;">
      <div style="position: absolute; top: 0; left: 0;">
        ... my menu ...
      </div>
    </div>
  </div>
</div> 
```

`77px`我的附加组件的高度在哪里。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-06-16T12:31:08.430

//在html中

```
<nav class="navbar navbar-default" id="mainnav">
<nav> 
```

//在jquery中添加

```
$(document).ready(function() {
  var navpos = $('#mainnav').offset();
  console.log(navpos.top);
    $(window).bind('scroll', function() {
      if ($(window).scrollTop() > navpos.top) {
       $('#mainnav').addClass('navbar-fixed-top');
       }
       else {
         $('#mainnav').removeClass('navbar-fixed-top');
       }
    });
}); 
```

> 这是 jsfiddle 玩： - [http://jsfiddle.net/shubhampatwa/46ovg69z/](http://jsfiddle.net/shubhampatwa/46ovg69z/)

编辑：如果您只想将此代码应用于移动设备，您可以使用：

```
 var newWindowWidth = $(window).width();
    if (newWindowWidth < 481) {
        //Place code inside it...
       } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-02T19:02:27.007

**引导程序 4 - 2020 年更新**

Bootstrap 4 中不再存在 Affix 插件，但现在大多数浏览器`position:sticky`都支持在 scoll 之后创建一个粘性导航栏。Bootstrap 4 包括这个`sticky-top`类......

[https://codeply.com/go/oY2CyNiA7A](https://codeply.com/go/oY2CyNiA7A)

**Bootstrap 3 - 原始答案**

这是一个不需要额外 jQuery 的 Bootstrap 3 示例。它使用`Affix`Bootstrap 3 中包含的插件，但导航栏标记自 BS2 以来发生了变化……

```
<!-- Content Above Nav -->
<header class="masthead">

</header>           

<!-- Begin Navbar -->
<div id="nav">
  <div class="navbar navbar-default navbar-static">
    <div class="container">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="glyphicon glyphicon-bar"></span>
        <span class="glyphicon glyphicon-bar"></span>
        <span class="glyphicon glyphicon-bar"></span>
      </a>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li class="divider"></li>
          <li><a href="#">Link</a></li>
          <li><a href="#">Link</a></li>
        </ul>
        <ul class="nav pull-right navbar-nav">
          <li>
            ..
          </li>
          <li>
            ..
          </li>
        </ul>
      </div>        
    </div>
  </div><!-- /.navbar -->
</div> 
```

工作演示/模板：[http ://bootply.com/69848](http://bootply.com/69848)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-01T10:36:53.847

这对我很有用。不要忘记在导航栏原来的位置放一个填充 div，否则每次固定/不固定时内容都会跳转。

```
function setSkrollr(){
    var objDistance = $navbar.offset().top;
    $(window).scroll(function() {
        var myDistance = $(window).scrollTop();
        if (myDistance > objDistance){
            $navbar.addClass('navbar-fixed-top');
        }
        if (objDistance > myDistance){
            $navbar.removeClass('navbar-fixed-top');
        }
    });
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-01-16T19:42:18.863

使用引导词缀：

```
/* Note: Try to remove the following lines to see the effect of CSS positioning */
  .affix {
      top: 0;
      width: 100%;
  }

  .affix + .container-fluid {
      padding-top: 70px;
  }
```

```
<!DOCTYPE html>
<html>
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>

<div class="container-fluid" style="background-color:#F44336;color:#fff;height:200px;">
  <h1>Bootstrap Affix Example</h1>
  <h3>Fixed (sticky) navbar on scroll</h3>
  <p>Scroll this page to see how the navbar behaves with data-spy="affix".</p>
  <p>The navbar is attached to the top of the page after you have scrolled a specified amount of pixels.</p>
</div>

<nav class="navbar navbar-inverse" data-spy="affix" data-offset-top="197">
  <ul class="nav navbar-nav">
    <li class="active"><a href="#">Basic Topnav</a></li>
    <li><a href="#">Page 1</a></li>
    <li><a href="#">Page 2</a></li>
    <li><a href="#">Page 3</a></li>
  </ul>
</nav>

<div class="container-fluid" style="height:1000px">
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
  <h1>Some text to enable scrolling</h1>
</div>

</body>
</html>
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-04-24T14:07:15.547

对于 Bootstrap 4，为此发布了一个新类。根据实用程序[文档](https://getbootstrap.com/docs/4.0/utilities/position/#sticky-top)：

应用类sticky-top。

```
<div class="sticky-top">...</div> 
```

有关更多导航栏位置选项，[请访问此处](https://getbootstrap.com/docs/4.0/utilities/position/#sticky-top)。另外，请记住，`position: sticky;`并非每个浏览器都支持它，因此如果您需要支持旧版浏览器，这可能不是您的最佳解决方案。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-10-17T11:38:37.277

你可以使用`position: sticky`

```
#navbar {
  position: sticky;
  top: 0px;
} 
```

#navbar 应该是 body 的直接子元素。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-22T10:24:24.270

作为对 Shubham Patwa 的回答：这样，一旦应用“navbar-fixed-top”类，页面就会“跳跃”。那是因为#mainnav 被扔进和扔出文档的DOM 流。如果页面具有“临界高度”，在固定和不固定的#mainnav 位置之间跳转，这可能会导致丑陋的用户体验。

我以这种方式更改了代码，这似乎工作正常（不是像素完美，但很好）：

```
$(document).ready(function() {
  var navpos = $('#mainnav').offset();
  var navheight = $('#mainnav').outerHeight();

$(window).bind('scroll', function() {
  if ($(window).scrollTop() > navpos.top) {
   $('#mainnav').addClass('navbar-fixed-top');
   $('body').css('marginTop',navheight);
   }
   else {
     $('#mainnav').removeClass('navbar-fixed-top');
     $('body').css('marginTop','0');
   }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-08T13:43:32.370

我发现这个简单的 javascript 片段非常有用。

```
$(document).ready(function()
{
    var navbar = $('#navbar');

    navbar.after('<div id="more-div" style="height: ' + navbar.outerHeight(true) + 'px" class="hidden"></div>');
    var afternavbar = $('#more-div');

    var abovenavbar = $('#above-navbar');

    $(window).on('scroll', function()
    {
        if ($(window).scrollTop() > abovenavbar.height())
        {
            navbar.addClass('navbar-fixed-top');
            afternavbar.removeClass('hidden');
        }
        else
        {
            navbar.removeClass('navbar-fixed-top');
            afternavbar.addClass('hidden');
        }
    });
}); 
```

# google-app-engine - App Engine Search API - 排序结果

> ID：14667831
> 
> 赞同：1
> 
> 时间：2013-02-02T23:48:37.813
> 
> 标签：google-app-engine, full-text-search

我有几个要搜索的实体，包括日期，搜索 API 在所有实体上都很好用，除了一件事 - 排序。

这是我的一个实体的数据模型（当然是简化的）：

```
class DepositReceipt(ndb.Expando):
    #Sets creation date
    creation_date = ndb.DateTimeProperty(auto_now_add=True) 
```

* * *

创建`search.Document`where的代码`de`是实体的一个实例：

```
document = search.Document(doc_id=de.key.urlsafe(),
    fields=[search.TextField(name='deposit_key', value=de.key.urlsafe()),
            search.DateField(name='created', value=de.creation_date),
            search.TextField(name='settings', value=de.settings.urlsafe()),
            ]) 
```

这将返回一个有效的文档。

* * *

最后是问题线。我从官方 GAE 搜索 API 教程中获取了这个片段，只是将排序方向`DESCENDING`更改为并将搜索表达式更改为`created`（上面的日期属性`Document`）。

```
expr_list = [search.SortExpression(
    expression="created", default_value='',
    direction=search.SortExpression.DESCENDING)] 
```

* * *

我认为这并不重要，但搜索代码的其余部分如下所示：

```
sort_opts = search.SortOptions(expressions=expr_list)

query_options = search.QueryOptions(
    cursor=query_cursor,
    limit=_NUM_RESULTS,
    sort_options=sort_opts)  

query_obj = search.Query(query_string=query, options=query_options)

search_results = search.Index(name=index_name).search(query=query_obj) 
```

* * *

在生产中，我收到以下错误消息：

```
InvalidRequest: Failed to parse search request "settings:ag5zfmdoaWRvbmF0aW9uc3IQCxIIU2V0dGluZ3MYmewDDA"; failed to parse date 
```

将其更改`expression="created"`为其他任何东西都可以正常工作。这也发生在我使用日期的其他实体类型中，所以我不知道发生了什么。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:20:47.000

我认为`default_value`需要是一个有效的日期，而不是`''`你所拥有的。

# objective-c - Missing context for method declaration?

> ID：14667832
> 
> 赞同：3
> 
> 时间：2013-02-02T23:48:37.950
> 
> 标签：objective-c

I am trying to create an app and when I added this IBAction, it gave me the error Missing context for method declaration. I have looked up how to fix this but I am a bit confused since I am a beginner. The errors appear in my .m file:

```
#import "QRscannerSecondViewController.h"

@end

@interface QRscannerSecondViewController ()

@end

@implementation QRscannerSecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.title = NSLocalizedString(@"Info", @"Info");
    self.tabBarItem.image = [UIImage imageNamed:@"second"];
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end

-(IBAction)button1
{
[input resignFirstResponder];
l11 = input.text;
line11.text = [[NSString alloc] initWithFormat:@"%2.f", l11];
} 
```

but I though that it would help if I included my .h file, also.

```
#import <UIKit/UIKit.h>

@interface QRscannerSecondViewController : UIViewController

@end

@interface TextGameViewController : UIViewController
{
IBOutlet UITextField *input;
IBOutlet UILabel *line11;
NSString *l11;
}
-(IBAction)button1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T01:28:38.097

你需要把代码：

```
-(IBAction)button1
{
[input resignFirstResponder];
l11 = input.text;
line11.text = [[NSString alloc] initWithFormat:@"%2.f", l11];
} 
```

之前`@end`。

# json - Zend Framework 2 认证/ACL 通过 JSON 请求

> ID：14667840
> 
> 赞同：0
> 
> 时间：2013-02-02T23:49:24.380
> 
> 标签：json, authentication, zend-framework2

鉴于文档中提供的示例，我了解数据库表身份验证或摘要身份验证或 HTTP 身份验证如何工作。我想使用 Zend 的 \Authentication\Adapter 对我的应用程序的用户进行身份验证，但我不确定如何通过访问 JSON 服务器而不是本地数据库来做到这一点。

我们的用户将通过网络帖子将他们的凭据传递给应用程序，应用程序将通过 JSON 将任何和所有请求发送到单独的服务以进行身份​​验证、查询等。我可以毫无问题地连接到 JSON 服务器并编写请求等。

我想做的是使用 Zend 内置的身份验证机制来挂钩 JSON 服务器返回的结果。有没有办法使用 JSON 而不是数据库表身份验证或摘要身份验证等来做到这一点？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:21:52.377

您应该编写自己的适配器，实现：

```
Zend\Authentication\Adapter\AdapterInterface 
```

查看其他适配器以获取启发

# delphi - 在网络计算机之间传输文件

> ID：14667842
> 
> 赞同：-3
> 
> 时间：2013-02-02T23:49:31.400
> 
> 标签：delphi

我想编写一个用于在网络计算机之间传输文件和文档的程序。许多文件可能正在传输。每台计算机都可以接收和发送文件，这意味着系统必须准备好发送文件并监听接收文件。我可以根据需要在每个系统上配置程序（例如，提供已连接计算机的 ip 列表以供程序选择用于将文件传输到的目标系统）我是否必须制作服务器客户端类型的应用程序，或者我可以只运行一个程序在电脑上？我知道问题很大，但帮助我选择最佳方式将不胜感激。

> > 我想用 Delphi 2010 编写这个程序，网络计算机操作系统是 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:55:58.393

You can do it peer-to-peer. The very same program can both listen for requests to transfer or receive files from other computers and issue its own requests to transfer or receive files to other computers.

# unit-testing - 从客户端登录 facebook 测试用户

> ID：14667844
> 
> 赞同：1
> 
> 时间：2013-02-02T23:49:39.560
> 
> 标签：unit-testing, facebook-graph-api, facebook-javascript-sdk

我想使用 facebook 做一些单元测试`Test User API`。

`login_url`问题是使用客户端提供的 API记录用户帐户。

的 url 协议`login_url`是`https`所以我无法使用 AJAX 访问它，如果我到达`login_url`服务器端，然后我返回客户端并尝试连接 facebook，它不会记录我的测试用户帐户，这是正常的。

所以我的问题是，如何在客户端登录测试用户？为了尝试启动一个`connect with facebook`事件并观察应用程序的行为。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T05:34:29.080

我终于使用 iframe 打开链接。

# asp.net-web-api - 为 ASP.NET Web API 应用程序生成特定于版本的帮助文档页面

> ID：14667846
> 
> 赞同：15
> 
> 时间：2013-02-02T23:49:51.350
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我正在使用 WebAPI[版本控制包](http://nuget.org/packages/SDammann.WebApi.Versioning/)通过 X-Api-Header 使用“VersionHeaderVersionedControllerSelector”对我的 API 进行版本控制。我还使用[Microsoft.AspNet.WebApi.HelpPage](http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage)自动生成 API 文档。为了使控制器 versionign 工作，它们需要以 VersionXYZ 作为命名空间中的后缀进行命名空间，以便“VersionHeaderVersionedControllerSelector”能够将请求路由到适当版本的控制器，如下所示：

```
namespace WEBAPI.Api.Controllers.Version1
{ public class ProductsController : ApiController {} }

namespace WEBAPI.Api.Controllers.Version2
{ public class ProductsController : ApiController {} } 
```

这按预期工作，但是当我查看生成的帮助页面时，[ApiDescription包含来自 ID (](http://msdn.microsoft.com/en-us/library/system.web.http.description.apidescription%28v=vs.108%29.aspx) **GETapi/Version1.Products** ) 和 RelativePath( **api/Version1.Products** ) 属性中命名空间的“VersionXYZ”后缀。理想情况下，我想做的是有一个顶级帮助页面，其中只有 API 版本号和钻取会以正常方式显示 API，即 ApiDescription.ID = GETapi/Products 和 ApiDescription.RelativePath = api/Products

有没有办法使用开箱即用的 API 来实现这一点，还是我需要推出自己的[ApiExplorer实现](http://msdn.microsoft.com/en-us/library/system.web.http.description.apiexplorer%28v=vs.108%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-23T13:23:25.977

查看此答案[获取帮助页面适用于 Api 版本控制](https://stackoverflow.com/questions/14830391/how-do-i-get-asp-net-web-api-working-with-versioning-and-the-help-page-extension)

确保您已经配置了版本控制权，并且您需要从您的项目 XXXX.Api.v1 项目中获取一个文档 XML 文件并将其放置在 XXXX.Api 项目的 bin 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T15:26:53.350

不幸的是 ApiExplorer 不支持重复的控制器名称。因此，通过这种方式实现控制器版本控制，您的（或包代码）不能很好地与系统配合使用。

考虑另一种实际更改控制器名称的替代方案（是的，您将必须实现自己的解决方案，但老实说它并不复杂）。例如，使版本成为控制器名称本身（而不是其名称空间）的一部分。

例如 Ver1_ProcuctsController

现在这些将开始显示在您的帮助页面上，并且由于帮助页面只是内容包，您可以更改逻辑以使以 verxxx_ 开头的名称发生变异。

# php - _html 返回一个空字符串？

> ID：14667848
> 
> 赞同：-1
> 
> 时间：2013-02-02T23:50:09.170
> 
> 标签：php, wordpress, wordpress-theming

所以我遇到了一个奇怪的问题，我知道它在数组值方面按我期望的那样工作，但是 _html 变量返回类似 string(29) " " 之类的东西，据我所知，这意味着 29 个空格，因为空格算作字符（请随时纠正我）。

任何方式，类：

```
<?php

class AisisCore_Template_Helpers_Loop{

    protected $_options;

    protected $_wp_query;

    protected $_html = '';

    public function __construct($options = array()){
        global $wp_query;

        if(isset($options)){
            $this->_options = $options; 
        }

        if(null === $this->_wp_query){
            $this->_wp_query = $wp_query;
        }
    }

    public function init(){}

    public function loop(){
        if(isset($this->_options)){
            if(isset($this->_options['query'])){
                $this->_query_post($this->_options['query']);
            }elseif(isset($this->_options['type']) && $this->_options['type'] == 'single'){
                $this->_single_post();
            }else{
                $this->_general_wordpress_loop();
            }
        }else{
            $this->_general_wordpress_loop();
        }
    }

    protected function _general_wordpress_loop(){
        if($this->_wp_query->have_posts()){
            while($this->_wp_query->have_posts()){
                $this->_wp_query->the_post();
                the_excerpt();
            }
        }
    }

    protected function _query_post($query){
        $empty_query = $this->_wp_query;
        $wp_query = new WP_Query($query);

        if($wp_query->have_posts()){
            while($wp_query->have_posts()){
                $wp_query->the_post();
                the_excerpt();
            }
        }

        next_posts_link('&laquo; Older Entries'); 
        previous_posts_link('Newer Entries &raquo;');

        $wp_query = $empty_query;
    }

    protected function _single_post(){
        if($this->_wp_query->have_posts()){
            while($this->_wp_query->have_posts()){
                $this->_wp_query->the_post();

                if(isset($this->_options['wrapper'])){
                    $this->_html .= '<div ';

                    if(isset($this->_options['wrapper']['class'])){
                        $this->_html .= 'class="'.$this->_options['wrapper']['class'].'"';
                    }elseif(isset($this->_options['wrapper']['id'])){
                        $this->_html .= 'class="'.$this->_options['wrapper']['id'].'"';
                    }

                    $this->_html .= ' >';
                }

                if(isset($this->_options['title_header'])){
                    $this->_html .= '<'.$this->_options['title_header'].'>';
                    the_title();
                    $this->_html .= '</'.$this->_options['title_header'].'>';
                }else{
                    the_title();
                }

                $this->_html .= '<a href="'.get_author_posts_url(get_the_author_meta( 'ID' )).'">'.the_author_meta('display_name').'</a>';
                the_date();
                if(isset($this->_options['image'])){
                    if(isset($this->_options['size']) && isset($this->_options['args'])){
                        the_post_thumbnail($this->_options['image']['size'], $this->_options['image']['args']);
                    }else{
                        the_post_thumbnail('medium');
                    }
                }

                the_content();

                if(isset($this->_options['wrapper'])){
                    $this->_html .= '</div>';
                }
            }
        }
    }

} 
```

要关注的函数是 _single_post() 函数。要实例化和使用此类，我们执行以下操作：

```
$array = array(
    'wrapper' => array(
        'class' => 'span12'
    ),
    'title_header' => 'h1',
    'image' => array(
        'size' => 'type',
        'args' => array(
            'align' => 'centered', 
            'class' => 'thumbnail marginBottom20 marginTop20'
        )
    ),
    'type' => 'single'
);

$loop = new AisisCore_Template_Helpers_Loop($array);
$loop->loop(); 
```

如您所见，我们设置了一个包装器 div、一个 title_header、图像属性和一个类型。*问题是，如果这是一个包装器并且类键设置为一个值*，我会进入每个if 语句。但 $this->_html 返回空。

当我 var_dump($this->_html); 我得到一个空字符串。有人可能会问“你是否进入了你在做什么 $this->_html .= 'some content'; ？答案是肯定的，我是，但字符串看起来是空的。

所以我求助于你们来帮助我看看我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T02:32:07.157

好吧，所有你称之为`the_title()`and`the_author_meta('display_name')`和`the_post_thumbnail`and的地方`the_content()`都是错误的。这些导致输出，它们不返回字符串。

而且，如果不知道你在哪里 var_dumping 数据，就不可能说出预期的结果是什么。

# php - 为 PHP 表单插入查询

> ID：14667853
> 
> 赞同：0
> 
> 时间：2013-02-02T23:50:34.800
> 
> 标签：php, mysql, sql, insert-query

我正在使用 PHP 和 MySQL，但遇到了一个小问题。我试图研究并弄清楚该怎么做，但是，我就是想不通。我将不胜感激任何帮助。这是我的问题...

我有 3 个 SQL 表：

```
Customers
    cID (primaryKey)
    email
    name
    password
    ...etc.

Products
    pID (primaryKey)
    Pname
    Ptype

CustomerRequests
    requestID(primarykey)
    cID (foreign key references customer table)
    pID (foreign key references products table)
    quantityRequested 
```

我有一个用 PHP 处理的 HTML 表单。这就像申请表一样，所以用户登录并填写申请表。此表单上的字段如下：

选择产品名称，选择数量等。这是为了例如`$quantity=$_POST['quantity']`......所以基本上表单数据存储在变量中。

现在，这是我坚持的部分。如何执行 SQL`INSERT`查询，以便数据库知道`cID`和`pID`是什么？即外键值是什么？

例如：

```
$insert = mysql_query(INSERT INTO CustomerRequests VALUES ('THIS WOULD BE BLANK AS ITS AUTOINCREMENTED PROMARY KEY FOR REQUEST ID','HOW WOULD I GET THE cID AUTOMATICALLY HERE','HOW WOULD I GET THE pID HERE','".$quantity."')) 
```

查询使用查询将用户输入存储到数据库中`INSERT`。但是，由于 customerID 和 productID 是不同表中的外键，我该如何编写 PHP 查询？

感谢您的帮助，如果您需要更多信息，请与我联系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:54:36.093

我认为您应该在显示表单之前检索产品和客户 ID。然后，从表单中获取 ID 并将它们插入到第三个表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:56:01.787

我不知道你为什么认为你有问题。`cID`应该是已知的，因为客户已登录。 应该是已知的，`pID`因为您的表单应该使用产品的下拉列表，`pID`并且用作`value`.

然后使用这些值是一件简单的事情`INSERT`，即

```
<select id="product">
    <option value="pid001">Product One</option>
    <option value="pid002">Product Two</option>
    ... etc. ...
</select> 
```

换句话说，这些值在它们到达您的表单*之前都是已知的。*

事后不要将产品名称与 ID 匹配；那只是增加了额外的工作。如果您有可用的值，那么您应该使用它。您的表单应该已经包含该关联。

`SELECT`根据Products 表中的查询创建下拉列表。使用`pID`for the`value`和`pName`for 内容。这样，表单中发送的数据就是您在`INSERT`.

```
<?php
    /* 
     * $arrProducts is the result from a query like
     * SELECT * FROM Products;
     */
    print '<select id="products">';
    foreach ($arrProducts as $arrProduct) {
        printf('<option value="%s">%s</option>', $arrProduct['pID'], $arrProduct['pName']);
    }
    print '</select>';
?> 
```

同样，当您登录用户时，获取他们`cID`并将其插入会话中。

另一个注意事项，**停止使用 PHP 的`mysql_`函数系列**。这些已被弃用，并将从未来的版本中删除。它们很容易发生 SQL 注入。您应该`mysqli_`在应用程序中使用其中一个或 PDO。两者都提供参数化查询和准备好的语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T03:00:06.100

“约翰尼，如果您使用 Dreamweaver，您的插入语句需要如下所示：if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "insertForm")) { $insertSQL = sprintf(INTO CustomerRequests (productName, qty, cID) values (%s, %s, %s)" etc.

然后使用带有隐藏字段的表单提交您的信息，例如：<form name="insertForm" type="post" action="placeOrder.php"> <input type="hidden" type="text" id="qty " value="<php?echo $row_Recordset1['qty']; ?>" /> <input type="hidden" type="text" name="productName" value="<php?echo $row_Recordset1['productName ']; ?>" /> <input type="hidden" type="text" name="cID" value="<php?echo $cID; ?>"/> <input type="hidden" name=" MM_insert" value="insertForm" /> <input type="submit" name="send" id="Submit" value="提交表单" /> </表格>

否则，只需忘记 Dreamweaver 的内容并使用：插入 CustomerRequests (productName, qty, cID) 值（bananas, 2, 1044）并在表单中使用相同的隐藏字段。您还需要捕获表单中提交的数据并将其保存为变量，就像您已经完成的那样：$quantity=$_POST['quantity'] 等。

由于“代码提交的格式不正确”，即使提交此信息我也遇到了很多麻烦，所以我希望你能得到这个！将 < 更改为 < 并将 > 更改为 > 以理解此代码。祝你好运！

# c# - 使用自定义字符集进行 Base64 编码

> ID：14667857
> 
> 赞同：2
> 
> 时间：2013-02-02T23:51:07.490
> 
> 标签：c#, base64, unity3d, mixpanel

我 [认为我] 需要在 C# 中使用自定义字符集进行 base 64 编码，但我不知道如何。

具体来说，我正在尝试在 Unity3D 项目中使用 Mixpanel HTTP 规范 - [https://mixpanel.com/docs/api-documentation/http-specification-insert-data](https://mixpanel.com/docs/api-documentation/http-specification-insert-data)。Mixpanel 说它具有 Base64 编码的自定义“风格”，实际上，当我使用允许我指定字符集的 Web 服务对相同的 JSON 进行编码时（[http://www.motobit.com/util/base64-decoder -encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp) )，Mixpanel 报告成功。

（因此，我知道失败在于编码，而不是正在编码的数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:30:03.987

页面为 URL 提供的示例与 JSON 结构的示例不匹配。

这是一个工作示例：

```
var json = "{\"event\": \"game\", \"properties\": {\"ip\": \"123.123.123.123\", \"token\": \"e3bb4100330c35722740fb8c6f5abddc\", \"time\": 1245613885, \"action\": \"play\"}}";

var result = Convert.ToBase64String(Encoding.UTF8.GetBytes(json));

// result == "eyJldmVudCI6ICJnYW1lIiwgInByb3BlcnRpZXMiOiB7ImlwIjogIjEyMy4xMjMuMTIzLjEyMyIsICJ0b2tlbiI6ICJlM2JiNDEwMDMzMGMzNTcyMjc0MGZiOGM2ZjVhYmRkYyIsICJ0aW1lIjogMTI0NTYxMzg4NSwgImFjdGlvbiI6ICJwbGF5In19" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T00:08:47.087

Since it's encoding to Base64, but being used for web, it's custom set is based on that. See: [C# Byte[] to Url Friendly String](https://stackoverflow.com/questions/1886686/c-sharp-byte-to-url-friendly-string)

Edit: Perhaps not... it seems they allow '+' and '/'. Strange.

# jquery - .hover() 功能有效，但应隐藏的元素仍然可见

> ID：14667861
> 
> 赞同：0
> 
> 时间：2013-02-02T23:51:28.757
> 
> 标签：jquery, jquery-hover, hoverintent

我对 jquery / javascript 很陌生，但我创建了一个主导航元素。这个想法是用户将鼠标悬停在特定的`<li>`（分为 2 `divs`）上。只有 div1 可见以启动。当悬停发生时，div1 上的高度动画为 0 以显示 div2。

但是，当高度动画为 0 时，div1 的内容（特别是寻找白色的 h2 和 h3 类型）仍然在 div2 类型后面可见（间歇性地）。如果你弄乱了`<li>`'s，你可以让它停止发生，但我无法记录错误或弄清楚它为什么会在某些时候消失。

[见http://jsfiddle.net/pappley/BGy6R/3/](http://jsfiddle.net/pappley/BGy6R/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:52:32.460

您必须设置`overflow`为`hidden`：

```
.main-link-title {
    height: 200px;
    overflow: hidden;
} 
```

这是你的小提琴：http: [//jsfiddle.net/BGy6R/4/](http://jsfiddle.net/BGy6R/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:00:54.303

我回答了一个[类似的问题](https://stackoverflow.com/questions/14653809/jquery-json-fadein-not-working/14653849#14653849)，你应该在后台使用`hide()`时隐藏`<div>`它。

查看您的代码，您似乎可以这样做：

```
$('li').hoverIntent(function() {
    $(this).children(':first').stop(true, false).animate({height: '0'}, 1000, 'easeOutQuad').hide();
}, function() {
    $(this).children(':first').stop(true, false).show().animate({height: '200px'}, 1000, 'easeOutQuad');
}); 
```

我刚刚`.hide()`在第一次调用的末尾添加了一个似乎将高度设置`<div>`为`0`? 然后在第二个`show()`之前添加一个？`animate()`

基本上，测试一下。基本概念是基于预期的行动和行为`hide`。`show``<div>`

# jquery - jQuery 验证器 addmethod 不会显示适当的错误消息

> ID：14667863
> 
> 赞同：0
> 
> 时间：2013-02-02T23:51:52.703
> 
> 标签：jquery, error-handling, jquery-validate

我正在使用[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来验证我的表单，并且我还使用该`addmethod`函数来创建我自己的验证方法。这就是我设置 jQuery Validator 的方式：

```
$(document).ready(function() {
    if ($("#validation_json").length > 0) {
        var validationJSON = JSON.parse(decodeURIComponent($("#validation_json").val()));
        $(".form-horizontal").validate({
            rules: validationJSON.rules,
            messages: validationJSON.messages
        });
    }
}); 
```

我有一个带有idvalidation_json的输入标签，并将值设置为jQuery验证器插件的一组规则和消息；这些规则和消息在表单构建器的帮助下输出到服务器端。唯一的问题是，每当我添加自己的验证方法时，就像这样：

```
jQuery.validator.addMethod("uniqueemail", function(email) {
    return false; //just for testing
}, "This email is already in use"); 
```

jQuery 验证器将在提交字段之前使用此方法检查它是否有效（除了上面设置的规则），但是如果其中一个`addMethod`validate 为 false，它将使用上面在 validate 中设置的该项目的消息方法，而不是传递给`addMethod`. 有谁知道我可以让它显示实际传递给 addMethod 函数的消息的方法？谢谢！

**更新：**

这是一个显示问题的[jsFiddle](http://jsfiddle.net/UH6Va/)链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:47:54.493

你的设置方式有问题...

```
$(document).ready(function() {
    if ($("#validation_json").length > 0) {
        var validationJSON = JSON.parse(decodeURIComponent($("#validation_json").val()));
        $(".form-horizontal").validate({
            rules: validationJSON.rules,
            messages: validationJSON.messages
        });
    }
}); 
```

[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)用于*在*DOM 就绪时*初始化*插件。您已将其放在条件语句中，因此仅在满足条件时才在表单上*初始化*插件。验证将无法在所有其他时间初始化。用于触发验证测试，而不是重新初始化插件...**`if`[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)**

 **```
$(document).ready(function() {

    $(".form-horizontal").validate({
        rules: validationJSON.rules,
        messages: validationJSON.messages,
        // any other options
    });

    if ($("#validation_json").length > 0) {
        var validationJSON = JSON.parse(decodeURIComponent($("#validation_json").val()));
        $(".form-horizontal").valid();  // trigger a validation test
    }

    jQuery.validator.addMethod("uniqueemail", function(email) {
        return false; //just for testing
    }, "This email is already in use");

}); 
```

**基本演示：http:** [//jsfiddle.net/AYvmg/](http://jsfiddle.net/AYvmg/)

该演示显示您的自定义消息`addMethod`按预期工作。

然后可以`.validate()`使用该[`.rules('add')`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)方法动态更改自定义消息，而无需再次调用。

```
$('#yourfield').rules('add', {
    messages: {
        uniqueemail: "this is a new message"
    }
}); 
```

**另一个基本演示：http:** [//jsfiddle.net/5RnLM/](http://jsfiddle.net/5RnLM/)

第二个演示与第一个演示一样。然后，当您单击`#test`按钮时，规则的消息将更改为其他内容。您可以在需要时使用此`.rules('add')`方法更改自定义消息，也可以使用任何其他功能。

否则，也许您可​​以显示相关的 HTML 并构建一个 jsFiddle 演示，以更清楚地显示您遇到的问题。**

# string - F#，字符序列 -> 字符串

> ID：14667866
> 
> 赞同：29
> 
> 时间：2013-02-02T23:52:24.233
> 
> 标签：string, f#, char, seq

一个可能更像是咆哮的快速问题（但我希望得到启发）。

在 F# 中，字符串与 Seq 兼容，因此 "abcd" |> Seq.map f 将适用于字符串。

这是处理字符串的绝佳工具，例如从字符串中获取前 5 个字符：

```
"abcdef01234567" |> Seq.take 5 
```

或删除重复字符：

```
"abcdeeeeeee" |> Seq.distinct 
```

问题是一旦你得到 char seq 结果，再次将其转换回字符串变得非常尴尬， String.concat "" 要求成员是字符串，所以我最终做了很多：

```
"abcdef01234567" 
|> Seq.take 5
|> Seq.map string
|> String.concat "" 
```

如此之多，以至于我在 90% 的项目中都使用了一个函数：

```
let toString : char seq -> string = Seq.map string >> String.concat "" 
```

我觉得这太过分了，但是在我寻找替代方案的任何地方，我都会遇到令人发指的事情，例如 StringBuilder 或内联 lambda 并使用 new：

```
"abcdef01234567" 
|> Seq.take 5
|> Seq.toArray 
|> fun cs -> new string (cs) (* note you cannot just |> string *) 
```

我希望在语言中看到的（也许是疯狂的）期望是，当 Seq 用于字符串时，结果表达式的类型签名应该是字符串 -> 字符串。意思是进去的就是出来的。"abcd" |> Seq.take 3 = "abc"。

在这种情况下，我对高级字符串操作的期望是错误的吗？

有没有人建议以一种很好的方式解决这个问题，我觉得我一定错过了一些东西。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-05-09T19:22:47.090

我自己只是在研究这个。我发现 System.String.Concat 工作得很好，例如

```
"abcdef01234567" |> Seq.take 5 |> String.Concat;; 
```

假设你已经打开`System`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-03T00:13:14.220

模块中的函数`Seq`只处理序列——即，当你用 a 调用它们时`string`，它们只“看到” a`Seq<char>`并相应地对其进行操作。即使他们进行了特殊检查以查看参数是否为 a`string`并采取了一些特殊操作（例如，仅针对字符串的函数的优化版本），他们仍然必须将其作为 a 返回`Seq<char>`以安抚 F# 类型系统 - - 在这种情况下，您需要到处检查返回值，看看它是否真的是`string`.

好消息是 F# 为您正在编写的某些代码提供了内置快捷方式。例如：

```
"abcdef01234567" |> Seq.take 5 
```

可以缩短为：

```
"abcdef01234567".[..4]  // Returns the first _5_ characters (indices 0-4). 
```

其他一些你仍然必须使用`Seq`，或者编写你自己的优化实现来操作字符串。

这是一个获取字符串中不同字符的函数：

```
open System.Collections.Generic

let distinctChars str =
    let chars = HashSet ()
    let len = String.length str
    for i = 0 to len - 1 do
        chars.Add str.[i] |> ignore
    chars 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-03T00:37:22.470

F# 有一个[String 模块](http://msdn.microsoft.com/en-us/library/ee353758.aspx)，其中包含一些`Seq`专门用于字符串的模块功能。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-13T16:56:22.577

自从 5 年前提出这个问题以来，F# 已经获得了将构造函数用作函数的能力。我会使用[String(Char[])](https://docs.microsoft.com/en-us/dotnet/api/system.string.-ctor?view=netframework-4.7.1#System_String__ctor_System_Char___)将字符转换为字符串。您可以在 F# 序列或 F# 列表之间进行转换，但我也可能只使用使用[String.ToCharArray](https://docs.microsoft.com/en-us/dotnet/api/system.string.tochararray)方法的 F# 数组模块。

```
printfn "%s" ("abcdef01234567".ToCharArray() |> Array.take 5 |> String) 
```

如果您真的想使用 a`char seq`那么您可以将其通过管道传递给 String ，如下所示：

```
printfn "%s" ("abcdef01234567" |> Seq.take 5 |> Array.ofSeq |> String) 
```

# jquery - jquery在droppable中添加了类，如果在drop事件之外，则不会变得可调整大小

> ID：14667867
> 
> 赞同：1
> 
> 时间：2013-02-02T23:52:27.837
> 
> 标签：jquery, draggable, addclass, droppable, resizable

在此放置区域中放置东西时，对象将被克隆并获得零件类。

```
$('.drop').droppable({
    tolerance: 'fit',
    accept: '.drag, .part',
    drop: function (event, ui) {
        var top = ui.position.top;
        var left = ui.position.left;
        var posizione = ui.position;

        if ($(ui.helper).hasClass('drag') ) {
            $(this).append($(ui.helper).clone());
            $('#board .drag').addClass("part");
            $('.part').removeClass("drag");
        };
       ....
)}; 
```

有一种方法可以为“part”类提供可移动/可拖动/可调整大小的属性，而无需在放置事件内部执行此操作，而是在外部定义它？因为使其工作的唯一方法是提供内部 drop 功能。

工作

```
$('.drop').droppable({
    tolerance: 'fit',
    accept: '.drag, .part',
    drop: function (event, ui) {
        var top = ui.position.top;
        var left = ui.position.left;
        var posizione = ui.position;

        if ($(ui.helper).hasClass('drag') ) {
            $(this).append($(ui.helper).clone());
            $('#board .drag').addClass("part");
            $('.part').removeClass("drag");
        };

        $('.part').resizable({
            containment: "#board",
            aspectRatio: true
        });
        ....
)}; 
```

不行

```
$('.drop').droppable({
    tolerance: 'fit',
    accept: '.drag, .part',
    drop: function (event, ui) {
        var top = ui.position.top;
        var left = ui.position.left;
        var posizione = ui.position;

        if ($(ui.helper).hasClass('drag') ) {
            $(this).append($(ui.helper).clone());
            $('#board .drag').addClass("part");
            $('.part').removeClass("drag");
        };

        ....
)};
$('.part').resizable({
            containment: "#workarea",
            aspectRatio: true
}); 
```

我是 javascript 和 jquery 的新手，所以如果您发现其他错误，请报告。感谢您的帮助。

编辑：完整代码[http://jsfiddle.net/funnydj/qtBfJ/2/](http://jsfiddle.net/funnydj/qtBfJ/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T01:58:59.140

`$('.part')`通过处理处理程序中的 jQuery 集合`drop`，您将影响*文档中的所有*元素`class="part"`。

通常，只需要处理刚刚删除/克隆的元素，并且鉴于该元素是 given `class="part"`，我猜只有它需要处理。所有先前删除/克隆的元素都应该已经接受了适当的处理。

如果我是对的，那么您可能想要这样的东西：

```
$('.drop').droppable({
    tolerance: 'fit',
    accept: '.drag, .part',
    drop: function (event, ui) {
        var top = ui.position.top;
        var left = ui.position.left;
        var posizione = ui.position;

        if(ui.helper.hasClass('drag') ) {
            var $part = ui.helper.clone().removeClass("drag ui-draggable-dragging").addClass("part");
            $part.appendTo($(this));
            $part.resizable({
                containment: "#board",
                aspectRatio: true
            });
            $part.draggable({
                tolerance: 'fit',
                revert: 'invalid', //resterà non valido finchè non droppo in un punto valido
                containment: "#workarea",
                stop: function () {
                    var top2 = ui.position.top;
                    var left2 = ui.position.left;
                    $("#workarea").append('<div>spostata</div>');
                    $(this).draggable('option', 'revert', 'invalid'); //quando lo lascio torna indietro perche' il revert è invalid'
                }
            });
            $part.droppable({
                greedy: true,
                //tolerance: 'intersect',
                drop: function (event, ui) {
                    if (!$(ui.helper).hasClass('part')) {
                        ui.draggable.draggable('option', 'revert', true);
                    }
                }
            });
        };
        inserite++;
        $("#workarea").append('<div>' + top + '-' + left + '--' + inserite + '</div>');
    }
}); 
```

您可以通过在外部范围中定义选项映射来显着整理事物，但它们必须在内部应用。

我可能会做这样的事情：

```
var inserite = 0;

part_options = {
    resizable: function(ui) {
        return {
            ...
        }
    },
    draggable: function(ui) {
        return {
            ...
        }
    },
    droppable: function(ui) {
        return {
            ...
        }
    }
};

$('.drop').droppable({
    tolerance: 'fit',
    accept: '.drag, .part',
    drop: function (event, ui) {
        var top = ui.position.top;
        var left = ui.position.left;
        var posizione = ui.position;

        if(ui.helper.hasClass('drag') ) {
            var $part = ui.helper.clone().removeClass("drag ui-draggable-dragging").addClass("part");
            $part.appendTo($(this));
            $part.resizable(part_options.resizable.call(this, ui));
            $part.draggable(part_options.draggable.call(this, ui));
            $part.droppable(part_options.droppable.call(this, ui));
            //or one long chained command if you prefer.
        };
        inserite++;
        $("#workarea").append('<div>' + top + '-' + left + '--' + inserite + '</div>');
    }
}); 
```

# c++ - How to subscribe to events raised within a Windows Runtime Component in C++/CX?

> ID：14667871
> 
> 赞同：2
> 
> 时间：2013-02-02T23:53:02.470
> 
> 标签：c++, windows-8, windows-runtime, windows-store-apps

I have an class in a Windows Runtime Component (written in C#) that raises events.
I cannot work out how to subscribe to these events in a C++/CX app that references the component.

The C# code (in the Windows Runtime Component):

```
public sealed class Messenger {

    private EventRegistrationTokenTable<EventHandler<MessageReceivedEventArgs>> messageReceivedTokenTable;

public event EventHandler<MessageReceivedEventArgs> MessageReceived
{
    add
    {
        return EventRegistrationTokenTable<EventHandler<MessageReceivedEventArgs>>
            .GetOrCreateEventRegistrationTokenTable(ref this.messageReceivedTokenTable)
            .AddEventHandler(value);
    }

    remove
    {
        EventRegistrationTokenTable<EventHandler<MessageReceivedEventArgs>>
            .GetOrCreateEventRegistrationTokenTable(ref this.messageReceivedTokenTable)
            .RemoveEventHandler(value);
    }
}

internal void OnMessageReceived(string message, string location)
{
    EventHandler<MessageReceivedEventArgs> temp =
        EventRegistrationTokenTable<EventHandler<MessageReceivedEventArgs>>
        .GetOrCreateEventRegistrationTokenTable(ref this.messageReceivedTokenTable)
        .InvocationList;

    temp(this, new MessageReceivedEventArgs(message, location));
}

} 
```

`MessageReceivedEventArgs` is:

```
public sealed class MessageReceivedEventArgs : object
{
    public MessageReceivedEventArgs(string message, string location)
    {
        this.Message = message;
        this.SenderLocation = location;
    }

    public string Message { get; set; }

    public string SenderLocation { get; set; }
} 
```

Note that as per [MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/br230301.aspx#DeclaringRaisingEvents) this descends from object and not EventArgs.

Then in C++:

```
msngr = ref new Messenger();

msngr->MessageReceived += ????????? 
```

What should go after the `+=` and in the relevant method (and anywhere else - in C# and/or C++) so that I can receive the messages in the C++ app?

I've tried various things and the various compiler warnings I've encountered have been unable to point me to a solution.

All examples I've found of using a Windows Runtime Component written in C# but consumed in a C++ app have been trivial and only show using properties and calling methods. Both of which I can do without problem. I'm after an example of subscribing to an event in C++ that is raised in C#.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T21:30:45.720

> 有必要创建一个代理来使用这些类型。

这确实是您的问题，需要一个 COM 代理/存根将您的 MessageReceivedEventArgs 类从 C# 编组为 C++/CX。是的，记录很差。我会尝试解释这个过程。开始使用此[WinRT 示例](http://code.msdn.microsoft.com/windowsapps/Creating-a-Windows-Runtime-367fada2/sourcecode?fileId=64078&pathId=1913178704)，它演示了设置解决方案以获取您需要的代理并执行您想要做的事情的方法。

起点是 ProxyStubForWinRTComponents_server 项目，这是一个声明共享类的 C# 项目。该项目的重要部分是 Post-Build 事件，它看起来像这样：

```
call "$(DevEnvDir)..\..\VC\vcvarsall.bat" x86
winmdidl /outdir:"$(ProjectDir)\" "$(TargetPath)" 
```

第一条语句设置运行 SDK 工具的环境。第二步运行 winmdidl.exe，这是一个完全未记录的构建工具，它将项目生成的 .winmd 文件反编译为 IDL 文件，然后对其进行编译。此构建步骤的输出是：

*   Microsoft.SDKSamples.Kitchen.idl - IDL 格式的反编译 .winmd 文件，用于生成其余文件
*   Microsoft.SDKSamples.Kitchen.h - 包含 C++ 格式的 C# 类型的声明，适合在您的 C++/CX 项目中#included
*   Microsoft.SDKSamples.Kitchen_i.c - 包含 C# 类型的 GUID，用于构建代理
*   Microsoft.SDKSamples.Kitchen_p.c - 包含从中生成代理和存根的 goo
*   dlldata.c - 用于构建代理。

接下来看看 ProxyStubsForWinRTComponentsPS 项目，它是构建代理/存根 DLL 的项目。它使用由 winmdidl.exe 生成的文件，唯一添加的是 .def 文件，该文件声明从 DLL 导出。COM 调用那些使用代理，您可以按原样使用文件。最好按原样使用这个项目，只更改文件的名称，这样您就可以正确设置所有编译器和链接器设置。

毫无疑问，令人不快并且有很多方法可以弄错。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:33:39.880

假设您在 C++ 引用类中编写此代码，比方说 CPPClass，您的代码将如下所示：

```
CPPClass::MyEventHandler(Platform::Object^ obj, MessageReceivedEventArgs^ args)
{
    // handler code
}

CPPClass::SomeMethod()
{
    msngr = ref new Messenger(this->SpecifedServer->Text);
    msngr->MessageReceived += ref new EventHandler<MessageReceivedEventArgs^>(this, &CPPClass::MyEventHandler);
} 
```

==================

顺便说一句，下面是一个类似的示例代码，对我来说很好用：

在 C# 中定义类和事件：

```
namespace WindowsRuntimeComponent3
{
    public sealed class MyEventsArgs
    {
    }

    public sealed class Class1
    {
        public Class1()
        {
        }

        public event EventHandler<MyEventsArgs> MyEvent;
    }
} 
```

在 C++ 中使用事件：

```
App::App()
{
    InitializeComponent();
    Suspending += ref new SuspendingEventHandler(this, &App::OnSuspending);

    auto obj = ref new WindowsRuntimeComponent3::Class1();
    obj->MyEvent += ref new EventHandler<WindowsRuntimeComponent3::MyEventsArgs^>(this, &App::MyEventHandler);
} 
```

==================

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T17:47:01.250

可以在此处的 MSDN 上找到此方案的官方文档：[在 Windows 运行时组件中引发事件](http://msdn.microsoft.com/en-us/windows/apps/dn169426%28v=vs.94%29.aspx)

# actionscript-3 - Load flex module on new browser tab

> ID：14667873
> 
> 赞同：0
> 
> 时间：2013-02-02T23:53:12.710
> 
> 标签：actionscript-3, apache-flex, flex4.5

I need to know if there's a way to load a Flex module on new browser tab. I wonder something like the settings interface of Dropbox...

I tried to use URLRequest to call the flex module, but no success. Any ideas?

[]'s

# windows-phone-7 - ListBox alternating rows background in Windows Phone becoming separated

> ID：14667874
> 
> 赞同：0
> 
> 时间：2013-02-02T23:53:20.517
> 
> 标签：windows-phone-7, xaml

It seems when applying alternating row background colours today on Windows Phone 7, if you have a large set of items to be displayed in the ListBox, the row colours eventually drift out, double up and skip rendering.

Anyone had problems with this, is this a bug in Windows Phone? My code can't get much simpler. I followed this article precisely: [http://chillijam.co.uk/2012/01/11/alternating-listbox-item-background-colours-in-wp7/](http://chillijam.co.uk/2012/01/11/alternating-listbox-item-background-colours-in-wp7/)

**Starting off well:**

![Starting good](../Images/c3afb35b089754b60594a3d2f3a9ae8e.png)

**After about 6 flicks of the scrollbar:**

![enter image description here](../Images/308110a8d084dbb1bb2519e796afd4c4.png)

As you can see, pretty shocking, and it only gets worse and more separated. Thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:31:30.500

windows phone 中没有错误，您尝试使用的蹩脚的 3-rd 方代码中没有错误。

他们的做法是完全错误的。没有人保证框架会按顺序调用 IValueConverter.Convert。如您所见，当上下滚动时，框架确实以任意顺序调用 IValueConverter.Convert。

它可能仅在列表框不重用其项目时起作用（您可以通过设置列表框的 ItemsPanel 属性来禁用重用。默认情况下，它使用 VirtualizingStackPanel 导致您的项目被重用。用常规 StackPanel 替换它）。但是：(1) RAM 使用 (2) 它仍然依赖于未记录的行为，可能很容易因操作系统升级而中断。

有很多正确的方法可以实现你想要的。

例如，您可以为您的项目类别添加背景颜色。

或者，从 ListBox 继承，覆盖 PrepareContainerForItemOverride 方法，在您的实现中调用 ItemContainerGenerator.IndexFromContainer 方法来获取行索引，并根据需要为 ListBoxItem 对象着色。注意两件事 (1) 不要忘记调用 base.PrepareContainerForItemOverride (2) 您对 ListBoxItem 属性的更改可能会被项目容器模板中的可视状态管理器覆盖。

# php - HTML form not working with image submit button?

> ID：14667875
> 
> 赞同：0
> 
> 时间：2013-02-02T23:53:25.517
> 
> 标签：php, html, forms

I have the following html form i am testing out.

```
<html>

<head>
<link href = "style.css" rel = "stylesheet" type = "text/css">
</head>

<form action = "test1.php" enctype = "multipart/form-data" method = "POST">
<input type = "hidden" name = "playno" value = "testing">
<input type = "image" src = "uploads/defb.png"  name = "submit" value = "submit"/>
</form>

</html> 
```

The following is saved in "test1.php":

```
<?php

$hiddenvalue = $_POST['playno'];

if (isset($_POST['submit'])){
echo "OK";
}
else
{
echo "error";
}

?> 
```

In the broswer i am returned the value "testing" when i print $hiddenvalue. However each and every time it outputs "error" as well, not "OK".

I would greatly appreciate any help. It is driving me mad!!! Many thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:04:58.507

使用 时`input type="image"`，浏览器会发送`submit_x`和`submit_y`。

所以在 PHP 中，`$_POST['submit']`将不可用，但`$_POST['submit_x']`将`$_POST['submit_y']`被定义（包含单击图像的 X/Y 坐标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T23:51:29.673

只需在表单中添加以下内容：

```
<input type="hidden" name="submit" value="submit"/> 
```

以便它`$_POST['submit']`在您的 PHP 中接收。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-03T00:00:16.523

```
<input type = "image" src = "uploads/defb.png"  name = "submit" value = "submit"/> 
```

改成：

```
<input type = "submit"  name = "submit" value = "submit"/> 
```

因为输入 didint 有这种类型

为输入 HTML 创建样式

```
<input type = "submit"  name = "submit" value = "submit" id="button" /> 
```

CSS

```
#button {

background:url("uploads/defb.png");
border:0;
outline:0;

} 
```

# html - Single&Double Column Dynamic Interface

> ID：14667879
> 
> 赞同：0
> 
> 时间：2013-02-02T23:53:42.547
> 
> 标签：html, css

I'm trying to create an interface that includes both single and double column buttons. You can see the fiddle here: [http://jsfiddle.net/SZwQC/](http://jsfiddle.net/SZwQC/)

As you can see in the fiddle, the actual width of the elements (with margins) is 130px; however, I had to give +2 additional pixels to be able to cover up the margins between double-column elements.

```
.single{
    width: 130px;
}

.double{
    width: 64px;
    margin-right: 2px;
} 
```

The result is just like how I want it to be, however, it is +2 pixels wider. Without the additional pixels, I could not find a way to do the 2 column items (by only adding the margin between the two).

I know this probably does not need a guru to solve, but I just could not find a perfect solution.

Any help will be appreciated.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:23:32.057

只添加`margin-right`到第一列：

```
<div class="double" style="margin-right:2px;">item</div>
<div class="double">item</div> 
```

CSS：

```
.double{
    width: 64px;
} 
```

**编辑：**这是通过在 CSS 文件中添加样式而不是使用标签硬编码来实现此目的的方法：

```
<div class="double1">item</div>
<div class="double2">item</div> 
```

CSS：

```
.double1{
    width: 64px;
    margin-right: 2px;
}
.double2{
    width: 64px;
} 
```

这行得通，或者您可以`id`在第一个 上使用`div`，并`id`在您的 CSS 中使用`margin-right:2px;`. 然后，您可以通过样式将两者保持`div`在同一个类 ( `double`) 中。*如果*您不打算多次重复此 HTML 代码，`width:64px;`这确实是最佳选择。

# c++ - the simplest way to play two sounds at the same time (c++ winapi)

> ID：14667889
> 
> 赞同：0
> 
> 时间：2013-02-02T23:54:45.267
> 
> 标签：c++, winapi

Can somebody help me with making simple win32 gui application (i'm using code::blocks) in which I can play two sounds at the same time. When message loop receives WM_CREATE i want to start playing music.wav, and everytime user clicks window (WM_LBUTTONDOWN) i want to play click.wav (without interrupting music.wav). I searched for it and I found that it can be done with directsound (directx), but it was too complicated because it has a lot of more functions. Is it possible to do it in more simple way (something like playsound api function or something - I know it can not play two sounds at the same time, but is there anything similar). And if possible, I would like to play wave files from resources.

Thank you in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T22:32:05.297

您可以使用 XAudio2，因为 DirectSound 已被弃用。

[XAudio2 简介](http://msdn.microsoft.com/en-us/library/windows/desktop/ee415813%28v=vs.85%29.aspx)

阅读“入门”部分，有阅读和播放音频的示例代码。您只需要创建一个“主控声音”并添加一些声源。

# scheme - about data definitions scheme

> ID：14667893
> 
> 赞同：0
> 
> 时间：2013-02-02T23:55:01.370
> 
> 标签：scheme, racket

I am being asked to provide a data definition for a list of images. That's it. I am confused. This seems a bit vague to me. What exactly do they mean by this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:15:50.130

这是一个例子：

```
A list-of-numbers is
    either   empty      
    or       (cons n lon),
where n is anumber and lon is a list-of-numbers. 
```

# csv - 将 * 带有标题行 * 的 CSV 文件转换为 Excel 或 ODS 电子表格的命令

> ID：14667897
> 
> 赞同：0
> 
> 时间：2013-02-02T23:55:33.117
> 
> 标签：csv, spreadsheet, google-docs-api, libreoffice, file-conversion

什么传统的 shell 脚本工具允许我将**带有标题行**的 .csv 文件转换为 LibreOffice .ods 格式？

我尝试过的东西忽略了我的标题：

*   `soffice --headless --convert-to ods GPW.99.csv`
*   `unoconv -f ods -o dir dir/GPW.99.csv` *# 找不到 csv 过滤器的任何 -i 参数文档*
*   `google docs upload dir/GPW.99.csv`

最后一个例子更好，直接发送到谷歌驱动器，这样我就不必从`bash`外壳通过电子邮件发送附件，但是，列名仍然是 A、B、C 等，而不是第 1 行中列出的，而是作为数据行导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:48:20.047

[csv2odf](http://csv2odf.sourceforge.net)可以做到这一点：

```
csv2odf -H GPW.99.csv template.ods output.ods 
```

-H 选项告诉它使用 csv 文件中的标题行。

# cakephp - CakePHP 中的跨控制器安全性

> ID：14667899
> 
> 赞同：0
> 
> 时间：2013-02-02T23:55:47.497
> 
> 标签：cakephp, controllers, rights

我有以下情况：多个视图使用可以上传文件并通过 AJAX 检索以前上传的列表的内容编辑器。为此，我最终为每个控制器添加了两个操作。相反，我只想拥有一个通用的、单一用途的 EditorController 来为我处理编辑器交互。

问题在于访问权限：我希望 EditorController 检查请求是否来自有效来源（这意味着当前用户有权访问的已知操作）。具体来说，检查请求是否来自类似“/posts/edit/1”的内容，并且这是我被允许使用的操作。

这可以做到吗？实现相同结果的更好方法是什么？我目前已经将功能打包到我重用的组件中。但我仍然重复自己向所有控制器添加相同的两个操作。

编辑：从下面的评论中，我指向了[http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#restricting-cross-controller-communication](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#restricting-cross-controller-communication)。我想要实现的东西与 and 非常相似`SecurityComponent::$allowedControllers`，`SecurityComponent::$allowedActions`只是我宁愿不明确地将允许的控制器或操作列入白名单，而是从调用者那里继承访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:21:50.130

使用 Security 组件可能会给您想要的东西；

[http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)

[更新] 虽然安全组件会检查发布的表单是否为*有效*表单，但它**不会**检查当前用户是否有权访问控制器/操作。

为此，您需要结合访问控制实施授权系统。这可以是针对某些操作（“用户是否登录？”）的简单“访问”控制，或者是使用访问控制列表 (ACL) 的更精细的方法。

cakephp 手册有一些例子。我会发布一些链接：

身份验证 [http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

访问控制列表 [http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html](http://book.cakephp.org/2.0/en/core-libraries/components/access-control-lists.html)

[还有一个关于http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html) [http://book.cakephp.org/2.0/en/tutorials-](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)的教程 [and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)

# zend-framework - nginx日志中的奇怪错误

> ID：14667905
> 
> 赞同：0
> 
> 时间：2013-02-02T23:56:24.993
> 
> 标签：zend-framework, nginx, rewrite

有使用zend框架的网页。网络实际上使用重写。我用谷歌搜索了如何设置 zend 框架 win nginx 的解决方案。他们说没有必要将那些默认的重写 .htaccess 转换为 nginx 一个。

无论如何这里是 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]

RewriteRule ^robots\.txt$ robots.txt 
```

这是网页的nginx配置：

```
server {
    listen   80; ## listen for ipv4; this line is default and implied
    #listen   [::]:80 default_server ipv6only=on; ## listen for ipv6

    root /var/www/vhosts/domain.lt/httpdocs;
    index index.php;

    # Make site accessible from http://localhost/
    server_name domain.lt;
    server_name www.domain.lt;

    location / {
        if (-f $request_filename) {
                root /var/www/vhosts/domain.lt/httpdocs;
            }   
    }

    location ~* ^/(favicon.ico|robots.txt)$ {
            access_log off;
            log_not_found off;
    }

    error_page  404 = /index.php;   

    # redirect server error pages to the static page /50x.html
    #
    #error_page 500 502 503 504 /50x.html;
    #location = /50x.html {
    #   root /usr/share/nginx/www;
    #}

    location ~ \.php$ {
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
    #   # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        #fastcgi_param  SCRIPT_FILENAME /var/www/vhosts/domain.lt/httpdocs/index.php;
        include fastcgi_params;
    }

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    location ~ /\.ht {
        deny all;
    }

    location ~* \.(css|js|jpeg|jpg|gif|png|ico|xml)$ {
         access_log off;
         expires 30d;
    }
} 
```

最后是错误本身：

```
2013/02/03 01:52:13 [error] 12293#0: *29 open() "/var/www/vhosts/domain.lt/httpdocs/daiktai/kategorija/slaugos-ir-higienos-priemones/page/147" failed (2: No such file or directory), client: 66.249.75.237, server: domain.lt, request: "GET /daiktai/kategorija/slaugos-ir-higienos-priemones/page/147 HTTP/1.1", host: "www.domain.lt" 
```

正如您所看到的，nginx 将每次重写都视为文件条目，这当然 - 不存在。我该如何解决这个问题？网页实际上无需重写就可以很好地工作。我的问题是：如何从 error.log 中删除这些错误，我是否需要将该 htaccess 文件转换为 nginx 重写？如果可以，请转换它吗？我尝试了一些在线转换器-`RewriteCond`完全`RewriteRule`忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T21:05:31.023

找到解决方案：

这整个部分是错误的

```
 location / {
        if (-f $request_filename) {
                root /var/www/vhosts/domain.lt/httpdocs;
            }   
    } 
```

我刚刚添加到`server`

```
 try_files $uri $uri/ /index.php; 
```

这要`location ~ \.php$`

```
 try_files $uri =404;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_param PATH_INFO $fastcgi_script_name; 
```

# c# - 获取未设置为实例的对象引用

> ID：14667907
> 
> 赞同：1
> 
> 时间：2013-02-02T23:57:06.373
> 
> 标签：c#, oop

```
 [DataContract]
        [Serializable]
        public class WSAccount
        {
            [DataMember]
            public string AccountNumber { get; set; }
            [DataMember]
            public string Pin { get; set; }        
        }

 [DataContract]
    [Serializable]
    public class WSUser
    {
       [DataMember]
        public WSAccount wsAccount { get; set; }
        [DataMember]
        public bool IsValidUser { get; set; }
    } 
```

执行时出错

```
WSUser user = new WSUser();
 user.wsAccount.AccountNumber = userNameresponse.account.ID; 
```

但解决时

```
 WSUser user = new WSUser();
 user.wsAccount = new WSAccount();
 user.wsAccount.AccountNumber = userNameresponse.account.ID; 
```

我需要实例化子类 WSAccount 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T23:59:57.167

是的，如果您想访问它的任何属性或方法，您需要`wsAccount`是有效的`WSAccount`（例如 not ）。`null`默认情况下，它被初始化`null`为任何对象引用的默认值。

你当然可以在 的构造函数中对其进行初始化`WSUser`，例如：

```
public WSUser() {
    wsAccount = new WSAccount();
} 
```

最有可能的是，您不能或不想这样做，因为您可能希望单个`WSAccount`实例被多个其他实例（其他类）使用。要么将帐户作为参数传递给`WSUser`构造函数，要么让调用者在构造后设置它。前者可能更可取，因为您的构造函数可以对输入进行一些完整性检查，并且您不能忘记在构造后设置帐户（因为构造函数会强制您事先传递一个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T23:59:58.360

是的你是。

这是因为您的默认构造函数（如果没有重新定义，也没有）对它拥有的每个字段或自动属性使用默认值。意思是，每个 int 都获得 '0' 作为值，并且每个引用类型 (wsAccount) - null。

因此，您必须将 wsAccount 属性实例化为正确的对象，否则它为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T00:08:20.687

所有类型都有其默认值：

*   引用类型（包括字符串）=> null

*   值类型 => (int=> 0, float=> 0 , Guid => Guid.Empty, etc..)

这就是您需要显式实例化 WSAccount 类的原因。您还可以在 WSUser 的构造函数中实例化 WSAccount

```
public WSUser()
{
  this.wsAccount = new WSAccount();
} 
```

或者你可以延迟加载 wsAccount

```
private WSAccount _wsAccount;

public WSAccount WsAccount
{
  get 
  { 
    if (_wsAccount==null)
      _wsAccount= new WSAccount();
    return _wsAccount;
  }
  set { _wsAccount = value }            
} 
```

最后，

`Lazy<T>`您可以使用C# 4.0中的可用变量来实现延迟加载的变量

但是，在反序列化期间，反序列化器将在后台调用默认构造函数，然后相应地设置属性，因此这样做：

```
WSUser user = new WSUser();
user.wsAccount = new WSAccount();
user.wsAccount.AccountNumber = <value> 
```

# forms - 提交表单后，Dropbox 选择器链接未发送到服务器

> ID：14667910
> 
> 赞同：0
> 
> 时间：2013-02-02T23:57:31.817
> 
> 标签：forms, post, dropbox, pug

提交表单时，保管箱选择器的值在服务器上是一个空字符串。所有其他输入的值在服务器上显示良好。此外，当为 Dropbox 选择器触发成功事件时，正确的链接会出现在`alert`.

为什么链接没有到达后端？

这是我在 Jade 中的客户端代码：

```
extends layout

block styles
block content
    .container
        div#alertStage
        form#shareForm.form-horizontal(method='post', action='/share', enctype='multipart/form-data')
            .control-group
                input(type='text', placeholder='enter class code', name='classCode', required='required')
            .control-group
                input(type='text', placeholder='enter professor', name='professor', required='required')
            .control-group
                textarea(rows='3', placeholder='enter description', name='description', required='required')
            .control-group
                input#db-chooser(type='dropbox-chooser', name='dropboxLink', style='visibility: hidden', data-link-type='preview')
            .control-group
                input#shareSubmit.btn-primary(type='submit', value='Upload')
block scripts
    script(src='https://www.dropbox.com/static/api/1/dropbox.js', id='dropboxjs', data-app-key='kkobu9cjygmh6js')
    script
        $(document).ready(function()
        {
            $('#shareSubmit').on('click', function(e)
            {
                var message = '';
                e.preventDefault();
                //TODO: Validate data
                $('#shareForm').submit();
            });
            document.getElementById("db-chooser").addEventListener("DbxChooserSuccess", function(e) 
            {
                alert("Here's the chosen file: " + e.files[0].link)
            }, false);
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T01:06:49.497

将此问题报告为错误，现在已解决。

# asp.net-mvc-4 - Unit Testing ASP.NET MVC4 Controller with Kendo

> ID：14667911
> 
> 赞同：3
> 
> 时间：2013-02-02T23:58:00.197
> 
> 标签：asp.net-mvc-4, nunit, kendo-ui

I am trying to unit test an ASP.NET MVC 4 controller that is returning Kendo.UI.Mvc DataSource result wrapped as Json. The problem is that I cannot get to the returned the actual data .. it is always null.

The question is, how do I validate the JSON coming back from a Controller that wraps the Kendo.UI DataSourceResult.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T03:17:55.113

这个问题令人恼火，因为我可以在调试时在 VS 中看到我想要的数据集合。我已经更新了测试夹具 - 可以对模型数据执行断言。

基本上我做了以下事情：

1.  将 ActionResult 转换为 JsonResult
2.  使用动态类型，从返回 Kendo.Mvc.UI.DataSourceResult 的 JsonResult 中获取“数据”。在使用动态类型之前，仅返回 null。（注意自己，了解更多关于动态类型）
3.  将 step2 的结果转换为您要测试的数据类型。

**控制器：**

```
 public ActionResult EditRead([DataSourceRequest] DataSourceRequest request)
    {      
        return Json(GetViewModel().ToDataSourceResult(request));           
    } 
```

**单元测试：**

```
 [Test]
    public void EditRead_Should_Read_List_Or_Pharmacies()
    {
        //Create test db
        var db = new FakePharmacyDirectoryDb();
        db.AddSet(TestData.PharmacyLocations(10));

        //setup controller, we need to mock a DataSourceRequest
        //that Kendo.Mvc uses to communicate with the View
        var controller = new DirectoryController(db);
        var kendoDataRequest = new DataSourceRequest();

        //get the result back from the controller
        var controllerResult = controller.EditRead(kendoDataRequest);

        //cast the results to Json
        var jsonResult = controllerResult as JsonResult;

        //at runtime, jsonRsult.Data data will return variable of type Kendo.Mvc.UI.DataSourceResult
        dynamic kendoResultData = jsonResult.Data;

        //... which you can then cast DataSourceResult.Data as
        //the return type you are trying to test
        var results = kendoResultData.Data as List<PharmacyLocation>;

        Assert.IsInstanceOf<List<PharmacyLocation>>(results);
        Assert.AreEqual(10,results.Count);
    } 
```

# java - 如何从 main() 访问字符串数组的元素

> ID：14667912
> 
> 赞同：0
> 
> 时间：2013-02-02T23:58:08.713
> 
> 标签：java, arrays, string

我很难从字符串数组中检索值。

我需要让它输出星期几的名称.. 即数字 0 的星期日。我的代码非常适合输出数字，但我无法从我的日期名称数组中提取它。

```
import java.util.Scanner;

public class FutureDateJava {
    String[] dayStrings = { "Sunday", "Monday", "Tuesday", 
                            "Wednesday", "Thursday", "Friday", 
                            "Saturday" };

    public static void main (String[] args) {
        Scanner input = new Scanner(System.in);

        System.out.println("Enter today's day: ");
        int today = input.nextInt();

        System.out.println("Enter a day in the future ");
        int future = input.nextInt();

        int futureDay = (today + future) % 7;

        System.out.print("Today is " + today + 
            " and the future day is " + futureDay);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T23:59:52.327

实际访问数组：

```
System.out.print("Today is " + dayStrings [today % 7] + " and the future day is " + dayStrings [futureDay]); 
```

这`%7`是为了确保一天（例如 10 天）不会导致越界异常。然而，这并不完全是最优的，它假设星期一是第 0 天，但想法就在那里。

# c - Getting multiple ints from user as input

> ID：14667913
> 
> 赞同：2
> 
> 时间：2013-02-02T23:58:15.150
> 
> 标签：c, arrays, input, integer

I know C++ but I am trying to write my first C program and I'd like to be able to get one line of input from a user and convert it to 10 different numbers. For example, a user will be prompted to enter some numbers and they will enter up to 10 numbers:

> Input up to 10 numbers:
> 
> > 34412 12455 435234 44 199 4735890 034001 154595

Then I'd like to store them an in array and do stuff with them later. I've searched for how to get input but most of what I've found isn't clear to me. Any help would be appreciated, thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:22:54.143

如果您确定用户总是输入由空格/制表符和换行符分隔的整数，并且不超过 10 个，您可以使用这一行来解决问题：

```
int arr[10];
int count = 0;

while(scanf("%d",&(arr[count++])))
   ; 
```

它利用了[`scanf`](http://en.cppreference.com/w/c/io/fscanf)返回匹配项的数量这一事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:21:25.130

您可以从用户输入中读取行，对其进行标记，然后使用以下方法直接从标记中检索数字 [`sscanf`](http://www.cplusplus.com/reference/cstdio/sscanf/)：

```
// array big enough to hold 10 numbers:
int numbers[10] = {0};

// read line from users input:
char inputString[200];
fgets(inputString, 200, stdin);

// split input string into tokens:
char *token = strtok(inputString, " ");

// retrieve a number from each token:
int i = 0;
while (token != NULL && i < 10) {
    if (sscanf(token, "%d", &numbers[i++]) != 1)
        ; // TODO: ERROR: number hasn't been retrieved
    token = strtok(NULL, " ");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-03T00:06:10.483

您需要阅读一些关于 C 函数的内容：

1.  **[fgets()](http://www.kernel.org/doc/man-pages/online/pages/man3/gets.3.html)**读取整行。删除末尾的换行符。
2.  **[strtok()](http://www.kernel.org/doc/man-pages/online/pages/man3/strtok.3.html)**对行进行标记。
3.  [**strtol()**](http://www.kernel.org/doc/man-pages/online/pages/man3/strtol.3.html)将每个字符串转换为整数。
4.  将它们存储在一个数组中。

如果您不担心无效输入，可以使用**[sscanf()](http://www.kernel.org/doc/man-pages/online/pages/man3/scanf.3.html)**从 C 字符串中读取。

# php - PHP Not Executing from Webpage [but is fine from PHP-CLI] on a Raspberry Pi

> ID：14667916
> 
> 赞同：7
> 
> 时间：2013-02-02T23:58:20.030
> 
> 标签：php, nginx, raspberry-pi

Setup:

*   Raspberry Pi
*   nginx web server
*   PHP5 & PHP-CLI installed

My Python script "lights.py" is really cool because it turns on/off lights in my living room through a relay connected to an Arduino Uno [then connected to the Pi via USB]. I know I could've used the Pi's GPIO pins, I just didn't. That doesn't matter here anyway.

I wanted to be able to activate the script from a web browser through the site hosted by my Pi, so I have /var/wwww/test/lights.php containing this code:

```
<?php
 exec('python lights.py');
?> 
```

Simple, no? Well, when I browse to that page in a browser, nothing shows up (expected) but the lights don't change state (unexpected). **However**, at the command line, logged in as user Pi, I can run "php /var/wwww/test/lights.php" and it works just fine!

I imagine this is because nginx seems to use this user called www-data to do stuff, so maybe its a permissions issue? Now I'm wandering into unknown territory for me ... I tried "su - www-data" to see if I could attempt the script as that user, but it asks for a password, which I never set up (and a blank password didn't work).

Any help here is greatly appreciated.

**UPDATE** - Here is "ls -la /var/www/test/lights*"

```
-rw-r--r-- 1 www-data root  37 Feb  1 23:56 /var/www/test/lights.php
-rwxr-xr-x 1 www-data root 129 Feb  1 23:51 /var/www/test/lights.py 
```

**SECOND UPDATE** - Check it:

```
pi@raspberrypi ~ $ sudo su - www-data
$ pwd
/var/www
$ php ./test/lights.php
python: can't open file 'lights.py': [Errno 2] No such file or directory
$ python ./test/lights.py
Traceback (most recent call last):
  File "./test/lights.py", line 4, in <module>
    ser = serial.Serial('/dev/ttyACM0', 9600)
  File "/usr/local/lib/python2.7/dist-packages/serial/serialutil.py", line 260, in __init__
    self.open()
  File "/usr/local/lib/python2.7/dist-packages/serial/serialposix.py", line 276, in open
    raise SerialException("could not open port %s: %s" % (self._port, msg))
serial.serialutil.SerialException: could not open port /dev/ttyACM0: [Errno 13] Permission denied: '/dev/ttyACM0' 
```

That '/dev/ttyACM0' device is my Arduino connection, so it appears the user "www-data" doesn't have access to run that Python script, since it can't output to that file. Am I able to "chmod" that device?

**THIRD UPDATE** - I feel like we're almost at the end!

Using "ls -g /dev/ttyACM0" I found that it is owned by group "dialout." Using "grep dialout /etc/group" I found that only user "Pi" is assigned to it. Therefore, I added www-data to that group with "usermod -a -G dialout www-data"

Now, check it:

```
pi@raspberrypi ~ $ sudo su - www-data
$ cd test
$ php lights.php
$ python lights.py
$ 
```

Both the PHP and Python script work, and the lights went on and off! *BUT* loading the web page "lights.php" from a browser still doesn't do anything!

**FOURTH UPDATE** I changed the PHP file to this:

```
<?php

exec('python lights.py', $output, $return);

print "Output:";
print $output;
print "<br />";
print "Return:";
print $return;

?> 
```

From what I gather, that's the proper way to get some debug info from the exec() statement. Here's the output when I refresh the webpage:

```
Output:Array
Return:1 
```

Does that help me at all?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:02:33.817

None of the given answers helped me... in fact, my updates to my posts log what was ultimately the answer, which I found through my own trial/error and Googling.

I needed to assign user www-data into the dialout group in order to have access to /dev/ACM0, and a reboot was required (of the whole server, not just nginx for some reason).

I don't know why everybody kept answering that this was a path issue, WHEN I KEPT SAYING THE PYTHON SCRIPT RAN FINE FROM SHELL, AND THE PHP FILE RAN FINE FROM PHP-CLI.

Anyway, that's what solved it in the end. Thanks to everyone for trying.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T00:03:26.753

PHP 可能在您的网站配置中配置为以[安全模式运行。](http://php.net/manual/en/function.exec.php)在安全模式下运行时，某些功能`exec`会被禁用。尝试禁用安全模式。

另一种可能性是`lights.py`在您的 Web 服务器运行的目录中找不到该脚本。要解决这个问题，请使用脚本的完整路径，例如`exec("/usr/bin/python /home/armani/lights.py")`.

另一种可能性是，当您登录时，Web 服务器正在以与您不同的用户身份运行（可能是`nouser`）。并且该用户可能无权访问某些资源。

而且可能还有更多这样的可能错误。请提供有关您遇到的错误的更多信息（尝试在 PHP 中启用调试以获取回溯）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:38:58.773

您将必须检查哪个是当前工作目录，如果它不是您想要更改的目录，或者更简单，只需使用 python 执行具有完整路径的脚本

> exec('python /var/www/test/lights.py');

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T00:00:16.623

您的 light.py 文件的 chmod 是什么？您可以尝试以下命令吗？

```
chmod +x lights.py 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-03T00:04:47.187

请检查您的路径是否正确，php 脚本将从 /var/wwww/test 目录中运行。lights.py 文件是否也位于该目录中？如果不是，请指定文件的完整路径

# java - 如何使用 Java 中的 Calendar 对象获取特定日期信息？

> ID：14667918
> 
> 赞同：0
> 
> 时间：2013-02-02T23:59:06.633
> 
> 标签：java, date, calendar

我目前正在尝试使用 Calendar 对象来获取有关当前日期的信息。具体来说，我需要知道星期几、时间 (h/m/s) 和 AM/PM。我最初打算使用 Date 对象，但其他问题的答案表明使用 Calendar 会更好。但是，通过查看 API，我不确定如何从 Calendar 对象中获取各个部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T00:03:08.347

> 但是，通过查看 API，我不确定如何从 Calendar 对象中获取各个部分。

您[`get`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#get%28int%29)与相关领域一起使用，例如：

```
int months = yourCalendar.get(Calendar.MONTH); 
```

* * *

话虽如此，我看到人们在 SO 上推荐[Joda Time](http://joda-time.sourceforge.net/)**很多**，所以如果你没有被绑定`Calendar`（从你的问题听起来好像你没有），那可能值得一看。（我当然打算下次在 Java 中做约会时看看它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:02:57.863

[http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html)

有什么不清楚的地方？它充满了例子。以下是您命名的一些人：

```
System.out.println("DAY_OF_WEEK: " + calendar.get(Calendar.DAY_OF_WEEK));

DateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
Calendar cal = Calendar.getInstance();
System.out.println(dateFormat.format(cal.getTime())); 
```

# c++ - Pass lvalue to rvalue

> ID：14667921
> 
> 赞同：10
> 
> 时间：2013-02-02T23:59:34.003
> 
> 标签：c++, c++11, lvalue, rvalue

I made a small 'blocking queue' class. It irritates me that I have created redundant code for values passed into the `enqueue` member function.

Here are the two functions that do the same exact thing (except the rvalue uses std::move to move the rvalue into the actual queue collection), except handles lvalue and rvalue respectively:

```
 void enqueue(const T& item)
    {
        std::unique_lock<std::mutex> lock(m);
        this->push(item);
        this->data_available = true;
        cv.notify_one();
    }

    void enqueue(T&& item)
    {
        std::unique_lock<std::mutex> lock(m);
        this->push(std::move(item));
        this->data_available = true;
        cv.notify_one();
    } 
```

My question is, is there a way to combine these two functions, without losing support for rvalue references.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-03T00:36:26.507

这是一个需要完美转发的经典例子。通过模板函数来做到这一点（如果这是成员函数，则为成员模板）：

```
template <class U>
void enqueue(U&& item)
{
    std::unique_lock<std::mutex> lock(m);
    this->push(std::forward<U>(item));
    this->data_available = true;
    cv.notify_one();
} 
```

说明：如果您将左值传递`T`给`enqueue`，`U`将推导出`T&`，并且`forward`将其作为左值传递，您将获得所需的复制行为。如果您将右值传递`T`给`enqueue`，`U`将推断为`T`，并且`forward`会将其作为右值传递，您将获得所需的移动行为。

这比“按值传递”方法更有效，因为您永远不会进行不必要的复制或移动。“按值传递”方法的缺点是该函数接受任何内容，即使它是错误的。您可能会或可能不会在`push`. 如果这是一个问题，您可以`enable_if enqueue`限制它将实例化的参数。

**根据评论更新**

根据下面的评论，这就是我理解的情况：

```
#include <queue>
#include <mutex>
#include <condition_variable>

template <class T>
class Mine
    : public std::queue<T>
{
    std::mutex m;
    std::condition_variable cv;
    bool data_available = false;
public:

    template <class U>
    void
    enqueue(U&& item)
    {
        std::unique_lock<std::mutex> lock(m);
        this->push(std::forward<U>(item));
        this->data_available = true;
        cv.notify_one();
    }
};

int
main()
{
    Mine<int> q;
    q.enqueue(1);
} 
```

这一切都很好。但是，如果您尝试将双精度排入队列怎么办：

```
q.enqueue(1.0); 
```

这仍然有效，因为 double 可以隐式转换为 int。但是，如果您不希望它工作怎么办？然后你可以`enqueue`像这样限制你：

```
template <class U>
typename std::enable_if
<
    std::is_same<typename std::decay<U>::type, T>::value
>::type
enqueue(U&& item)
{
    std::unique_lock<std::mutex> lock(m);
    this->push(std::forward<U>(item));
    this->data_available = true;
    cv.notify_one();
} 
```

现在：

```
q.enqueue(1.0); 
```

结果是：

```
test.cpp:31:11: error: no matching member function for call to 'enqueue'
        q.enqueue(1.0);
        ~~^~~~~~~
test.cpp:16:13: note: candidate template ignored: disabled by 'enable_if' [with U = double]
            std::is_same<typename std::decay<U>::type, T>::value
            ^
1 error generated. 
```

但`q.enqueue(1);`仍然可以正常工作。即限制您的成员模板是您需要做出的设计决定。你`U`想`enqueue`接受什么？没有正确或错误的答案。这是一个工程判断。还有其他一些可能更合适的测试可用（例如 std::is_convertible、std::is_constructible 等）。就像上面最初的原型一样，对于您的应用程序来说，也许正确的答案是完全没有约束。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T00:06:00.170

在我看来，`enqueue(const&)`这`enqueue(&&)`只是`enqueue_emplace`. 任何好的类 C++11 容器都具有这三个功能，前两个是第三个的特例。

```
void enqueue(const T& item) { enqueue_emplace(item); }
void enqueue(T&& item)      { enqueue_emplace(std::move(item)); }

template <typename... Args>
void enqueue_emplace(Args&&... args)
{
    std::unique_lock<std::mutex> lock(m);
    this->emplace(std::forward<Args>(args)...); // queue already has emplace
    this->data_available = true;
    cv.notify_one();
} 
```

这是一个简单但有效的解决方案，它的行为应该与您的原始界面相同。它也优于模板方法，因为您可以将初始化列表排入队列。

* * *

旧帖子：只需做好旧的价值传递：

```
void enqueue(T item)
{
    std::unique_lock<std::mutex> lock(m);
    this->push(std::move(item));
    this->data_available = true;
    cv.notify_one();
} 
```

`enqueue`“拥有”它的参数并希望将其移动到队列中。通过价值传递是正确的概念。

它只做一个副本和一个动作。`T`不幸的是，对于没有优化移动构造函数的 s 来说，这可能会很慢。我认为出于这个原因，标准库中的容器总是有两个重载。但另一方面，一个好的编译器可能会优化它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-03T00:33:05.553

你看过[`std::forward`](http://en.cppreference.com/w/cpp/utility/forward)吗？如果您在函数中加入一些模板，它可能会按照您的要求进行...

# variables - Doskey macro with spaces in passed variable?

> ID：14667922
> 
> 赞同：6
> 
> 时间：2013-02-02T23:59:33.517
> 
> 标签：variables, macros, spaces

I am creating some common doskey commands I use on a regular basis. I am trying to have multiple variables in the doskey macro and sometimes a variable will have spaces in it. I have tried quoting the variable values but it won't work. The only thing that does work is just adding more vars to the end of the macro string.

What I would like to do is: doskey keycmd=plink -l user -pw password $1 -batch $2 And then execute it as follows: c:> keycmd hostname "dir /p /users"

What doskey sees when executed though is: $1=hostname, $2="dir, and "dir isn't a command and /p and /users is completely dropped.

To get this to work I had to define it this way: doskey keycmd=plink -l user -pw password $1 -batch $2 $3 $4 And execute as follows: c:> keycmd hostname dir /p /users

Is there a way I can group "dir /p /users" into a single $2 variable? For doskey variable parameters you only get 9, $1..$9\. Eventually I could run out on complicated commands. I tried single and double quotes to no avail...but single and/or double quotes seem to work everywhere else in Windows cmd command.

Is there a solution to this or am I just trying to do too much with doskey?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-29T18:47:44.920

这应该这样做。告诉最后一个 var 是其他一切

```
keycmd=echo plink -l user -pw password $1 -batch $* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-06T07:16:18.837

虽然最后一个参数中可能有空格（`$*`在[wild2010](https://stackoverflow.com/users/2117378/wild2010)的[答案](https://stackoverflow.com/a/19081900/6309)中使用），但通常**不可能**在 doskey 命令中包含带空格的参数。

请参阅[使用 Doskey](http://www.lagmonster.org/docs/DOS7/u-doskey0.html)：

> 不幸的是，尽管参数可以是长文件名，但它不能包含空格，即使用引号括起来。
> **如果文件名包含空格，则必须**[使用 8.3 版本的名称](http://en.wikipedia.org/wiki/8.3_filename)**。我知道没有解决方法**。
> 
> DosKey 宏也可以使用`$*`被称为“全局可替换参数”。
> 这必须是宏的最后一部分，并被命令行上不是宏名称或分配给编号参数的任何内容替换。
> 如果上面的例子被改写为：

```
DOSKEY D2F=DIR $1 $g $* 
```

> 那么 long filenames-with-spaces 可以用作最后一个参数 - 但用作替代的路径名`$1`仍然不能包含带空格的目录名。

# ruby-on-rails - Array.delete(object) removes from database?

> ID：14667924
> 
> 赞同：3
> 
> 时间：2013-02-02T23:59:43.467
> 
> 标签：ruby-on-rails, ruby

So I was trying to just get an array of posts that do not include @post. To my surprise the code below resulted in @post being deleted from the database!

```
@post = Post.find(2)
@posts = Post.where(:text => "title")
@posts.delete(@post) 
```

Why does an Array function delete @post from the database? Does Rails extend or overwrite this function? I thought only the .destroy function can delete objects from the database? I guess I am confused on what exactly the .where function returns and the consequences of using @ and not using @ for variables.

Thanks in advance!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T00:09:07.830

What is stored in `@posts` after you do `Post.where(:text => 'title')` is not an array. It's a type of `ActiveRecord::Relation` object.

When you call delete with `@post` as a parameter, you're telling Rails to delete that object from the database.

# c++ - Search a string for an anagram of another string?

> ID：14667925
> 
> 赞同：4
> 
> 时间：2013-02-02T23:59:50.990
> 
> 标签：c++, string, algorithm, hash, anagram

I'm trying to find a substring from a string `text` that is an anagram to a string `pattern`.

My Question: **Could the [Rabin-Karp algorithm](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm) be adjusted to this purpose? Or are there better algorithms?**

I have tried out a brute-force algorithm, which did not work in my case because the text and the pattern can each be up to one million characters.

**Update:** I've heard there is a worst-case O(n²) algorithm that uses O(1) space. Does anyone know what this algorithm is?

**Update 2:** For reference, here is pseudocode for the Rabin-Karp algorithm:

```
function RabinKarp(string s[1..n], string sub[1..m])
    hsub := hash(sub[1..m]);  hs := hash(s[1..m])
    for i from 1 to n-m+1
       if hs = hsub
          if s[i..i+m-1] = sub
              return i
       hs := hash(s[i+1..i+m])
    return not found 
```

This uses a rolling hash function to allow calculating the new hash in O(1), so the overall search is O(nm) in the worst-case, but with a good hash function is O(m + n) in the best case. Is there a rolling hash function that would produce `few collisions` when searching for anagrams of the string?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T01:27:42.763

计算不依赖于模式中字母顺序的模式哈希（例如，使用每个字母的字符代码之和）。然后以“滚动”方式对文本应用相同的散列函数，就像在 Rabin-Karp 中一样。如果哈希匹配，您需要针对文本中的当前窗口执行模式的完整测试，因为哈希也可能与其他值发生冲突。

* * *

通过将字母表中的每个符号与质数相关联，然后将这些质数的乘积计算为哈希码，您将减少冲突。

但是，如果您想计算这样的运行乘积，有一些数学技巧可以帮助您：每次跨窗口时，将运行的哈希码乘以符号代码的*乘法*[*倒数*](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)，即离开窗口，然后*乘以*进入窗口的符号的代码。

例如，假设您将字母“a”-“z”的哈希值计算为无符号的 64 位值。使用这样的表：

```
符号 | 代码 | 代码-1
--------+------+---------
   一个 | 3 | 12297829382473034411
   乙 | 5 | 14757395258967641293
   c | 7 | 7905747460161236407
   d | 11 | 3353953467947191203
   电子| 13 | 5675921253449092805
  ...
   z | 103 | 15760325033848937303

```

n的乘法逆元是乘以*n*时产生 1 的数，对*某个*数取模。这里的模数是 2 ^(64)，因为您使用的是 64 位数字。所以，`5 * 14757395258967641293`应该是1，例如。这行得通，因为您只是在[**GF**](http://en.wikipedia.org/wiki/Finite_field) [(2](http://en.wikipedia.org/wiki/Finite_field) [^(64)](http://en.wikipedia.org/wiki/Finite_field) [)中](http://en.wikipedia.org/wiki/Finite_field)[相乘。](http://en.wikipedia.org/wiki/Finite_field)

 **计算第一个素数的列表很容易，您的平台应该有一个库来[有效地](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)计算这些数字的乘法倒数。

从数字 3 开始编码，因为 2 是整数大小的互质数（在您正在处理的任何处理器上都是 2 的幂），并且不能反转。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-03T00:08:49.207

One option would be to maintain a sliding window holding a histogram of the letters contained within the window. If that histogram ever ends up equal to the character histogram for the string whose anagram should be found, then you know that what you are looking at is a match and can output it. If not, you know that what you have cannot possibly be a match.

More concretely, create an associative array A mapping from characters to their frequencies. If you want to search for an anagram of string P, then read the first |P| characters from the text string T into A and build the histogram appropriately. You can slide the window one step forward and update A in O(1) associative array operations by decrementing the frequency associated with the first character in the window, then incrementing the frequency associated with the new character that has slid into the window.

If the histograms of the current window and the pattern window are very different, then you should be able to compare them rather quickly. Specifically, let's say that your alphabet is Σ. In the worst case, comparing two histograms would take time O(|Σ|), since you'd have to check each character/frequency pair in the histogram A with the reference histogram. In the best case, though, you'd immediately find a character that causes a mismatch between A and the reference histogram, so you would not need to look at many characters overall.

In theory the worst-case runtime for this approach is O(|T||Σ| + |P|), since you have to do O(n) work to build the initial histogram, then have to do worst-case Σ work per character in T. However, I'd expect that this is probably a lot faster in practice.

Hope this helps!

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T15:51:13.660

1.  创建一个包含 26 个整数（设置为零）的数组 letter_counts 和一个变量 missing_count 来保存丢失字母的计数。

2.  对于子字符串中的每个字母，将 letter_counts 的相关 int 递减 1，并将 missing_count 递增 1（因此 missing_count 最终将等于子字符串的大小）。

3.  假设子串的大小为 k。查看字符串的前 k 个字母。将 letter_counts 的关联 int 增加 1。如果在增加后，值 <= 0，则将 missing_count 减 1。

4.  现在，我们像这样沿着字符串“前滚”。一个。删除最接近窗口开头的字母，减少 letter_counts 的关联成员。如果在递减之后，我们有一个 int < 0，那么将 missing_count 增加 1。将字符串的第一个字母添加到窗口之外。增加 letter_counts 的关联成员。如果在递增之后我们有一个 int <= 0，那么将 missing_count 减 1。

如果在任何时候missing_count == 0，我们的窗口中有一个搜索字符串的字谜。

我们维护的不变量是 missing_count 保存我们的子字符串中不在我们窗口中的字母数。当它为零时，我们窗口中的字母与我们的子字符串中的字母完全匹配。

这是 Theta(n) - 线性时间，因为我们只查看每个字母一次。

- - 编辑 - -

letter_counts 只需要存储子串的不同字母，并且只需要保存与子串大小（有符号）一样大的整数。因此，内存使用量在子字符串的大小上是线性的，但在字符串的大小上是恒定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T15:02:49.247

提出这个建议可能对我来说很愚蠢，但一种替代方法可能是将两个字符串分解为数组，然后逐个字符地递归搜索它们。

为了避免重复的字符匹配，如果在`text`数组中找到一个字符，则删除其各自的数组索引，有效地缩短每次匹配的完成数组扫描时间，同时确保`text`包含 2x 'B' 的 a 获胜'不匹配 a`pattern`与 3x 'B'。

为了提高性能，您可以在逐个字符计数之前扫描两个字符串，并列出每个字符串中存在哪些字母，然后比较这些列表以查看是否存在任何差异（例如尝试查找“apple”中的字母“z”），如果有则将该字符串标记为“Anagram not possible”。**

# xcode - 升级到 xcode 4.6 - 本地 Git 不再可用

> ID：14667931
> 
> 赞同：1
> 
> 时间：2013-02-03T00:00:00.210
> 
> 标签：xcode, git, svn

xCode 升级蓝调。除 Git 外，升级进展顺利。当我尝试提交时，我收到以下消息：

> “无法访问存储库“项目名称”。请验证存储库是否在线且可访问，然后重试。”

以下是一些数据点：
1\. 我正在运行 Mac OS X Lion 10.7.5 (11G63)
2\. 我从文件下载列表（相对于应用商店）下载了 xCode 4.6 - 以防万一这与某些钥匙串开发者帐户或3.
我一直在使用本地 git。
4\. xcode 升级后仓库中的项目名称现在是红色的
5\. 我可以看到 xcode 仓库中除了分支之外的所有内容，我什至看不到“master”。我也无法添加任何分支（显然无法提交）
6\. 我在终端上检查过，我的 git 很好，我也可以看到所有分支：命令是“git branch”
7\. 我尝试了通常的重启 xCode/重启无济于事。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:11:45.720

经过几个小时的头痛，我发现了问题：

在存储库的目录链中，我的一个文件夹的名称包含“/”正斜杠：

> /Users/username/Desktop/.../directorynamewithforwardslash/项目目录

在 xCode 升级后，这似乎阻碍了 gits 的重新建立。

我更改了目录名称（删除了“/”）并且它起作用了。我希望这可以帮助别人。

谢谢

# django - 使用 Django 中的表单从文件存档中创建多个数据库条目

> ID：14667932
> 
> 赞同：0
> 
> 时间：2013-02-03T00:00:03.743
> 
> 标签：django

我有一个 Django 表单，它引用了一个名为 AutoPart 的模型，该模型有一个用于存储文本文件的字段。

然后，我尝试使用此表单上传文本文件的存档，而不仅仅是一个文本文件。我的脚本解压缩存档，然后将每个文本文件添加到数据库中。

我的问题是整个档案中只有一个文本文件被保存，而不是全部。我想知道这是否是因为我正在覆盖某些东西？

这是我的代码：

在`views.py`

```
def mass_upload(request):
    tmpdir = tempfile.mkdtemp() 
    if request.method == "POST":
        formtoadd = massform(request.POST, request.FILES)
        if formtoaddpart.is_valid():
            zipped = zipfile.ZipFile(request.FILES['content'], 'r')
            zipped = zipped.extractall(tmpdir)
            for (dirpath, dirnames, filenames) in os.walk(tmpdir):
                if "__MACOSX" in dirnames:
                    dirnames.remove("__MACOSX")
                for filename in filenames:     
                    new_model = formtoaddpart.save(commit=False)                    
                    file = open(dirpath + "/" + filename, 'rb')                                                                                                      
                    filecontent = file.read()                                                                                                                              
                    file.seek(0)                                                                                                                                           
                    new_model.modelname = os.path.splitext(filename)[0]#.replace(" ", "")                                                                                      
                    modelname = new_model.modelname                                                                                                                          
                    manufacturer = new_model.manufacturer                                                                                                                  
                    new_model.adder = request.user                                                                                                                         
                    filetype = new_model.type                                                                                                                                  
                    format = new_model.format                                                                                                                              
                    adder_id = new_model.adder.id                                                                                                                          
                    new_model.content=store_in_s3(filename, filecontent, filetype, modelname, format, manufacturer, adder_id)                                                  
                    new_model.save() 
```

在`forms.py`

```
class massform(ModelForm):
    def __init__(self, *args, **kwargs):
        super(massform, self).__init__(*args,**kwargs)
        self.is_update=False
        choices = UniPart.objects.all().values('manufacturer').distinct()
    modelname = forms.CharField (label="AutoPart", max_length=80, required= False)
    manufacturer = forms.CharField (label="Manufacturer", max_length=80, required= False)
    type = forms.TypedChoiceField (label="Type", choices = (("type1", "type1"), ("type2", "type2")), widget = forms.RadioSelect, required= True)
    format = forms.TypedChoiceField (label="Format", choices = (("format1", "format1"), ("format2", "format2")),widget = forms.RadioSelect, required= True)
    content = forms.FileField()

def __init__(self, *args, **kwargs):
    super(massform, self).__init__(*args, **kwargs)
    self.is_update = False
    # self.fields['mychoicefield'].choices = \
    #   list(self.fields['mychoicefield'].choices) + [('new stuff', 'new')]

def clean(self):
    if self.cleaned_data and 'modelname' not in self.cleaned_data:
        raise forms.ValidationError("Some error message")
        if not self.is_update:
            return self.cleaned_data
        return self.cleaned_data
    if not self.is_update:
        return self.cleaned_data
class Meta:
    model = AutoPart 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:49:28.613

I'm pretty sure the line:

```
new_model = formtoaddpart.save(commit=False) 
```

doesn't return a new python instance of the model class.

Your best bet would be to output the newmodel.pk in the loop and see if it changes.

From experience, I know that if you want to edit an existing instance and save it as a new one, you can just do `newmodel.pk = None` and Django will create a new instance.

# java - Overflowing of text in android TextView

> ID：14667939
> 
> 赞同：0
> 
> 时间：2013-02-03T00:00:25.537
> 
> 标签：java, android, animation, textview, css

I am experiencing a rather strange bug with TextView on Android. The text can flow over TextView's top border at random times then user interacts with it. It looks like this happens when TextView changes it height with animation (it expands and shrinks on click).

So here how it looks (views borders drawing enabled with android dev tools, and I've marked TextView's borders with red ) [http://s7.postimage.org/c1ynrbwjv/so_full.png](http://s7.postimage.org/c1ynrbwjv/so_full.png)

I've tried calling *invalidate()* (*postInvalidate()* either), *requestLayout()* and resetting *gravity* of TextView.
I also tried to rewrite expanding and shrinking animation, to use *getLayoutParams().height* to set height, instead of *setMaxHeight()*.
At the end I've put TextView into LinearLayout (setting TextView height to layout_height="wrap_content"), and expanding/shrinking LinearLayout instead of TextView (so TextView's bounds doesn't change directly). But that, as you can guess, didn't help.

TextView layout (BoardPostText extends TextView):

```
<my.package.view.BoardPostText
    android:id="@+id/postText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/postTitle"
    android:clickable="true"
    android:linksClickable="true"
    android:longClickable="true"
    android:maxHeight="@dimen/post_image_max_height"
    android:paddingLeft="5dp"
    android:textColor="@color/post_data_text_color"
    android:textSize="@dimen/post_data_text_size"
    android:textColorLink="@color/post_link_color" /> 
```

TextView's code [https://gist.github.com/d47e8eafb1bcff7c8db1](https://gist.github.com/d47e8eafb1bcff7c8db1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:18:45.113

我发现这种行为发生了，然后 MotionEvent 发生在超链接上。因为我只需要可以点击跨度，所以我做了这样的解决方法：

```
public static class JustClickableMethod extends LinkMovementMethod {

    public static MovementMethod getInstance() {
        return new JustClickableMethod();
    }

    @Override
    public boolean onTouchEvent(TextView widget, Spannable buffer, MotionEvent event) {

        int action = event.getAction() & MotionEvent.ACTION_MASK;

        if( action != MotionEvent.ACTION_UP ) {

            return true;
        }

        return super.onTouchEvent(widget, buffer, event);
    }

} 
```

将此移动方法设置为 TextView 可点击跨度后，仍然会获得 onClick() 事件，但文本流动的错误消失了。

我认为这是因为 LinkMovementMethod 是“一种遍历文本缓冲区中的链接并**在必要时滚动**的移动方法。支持使用 DPad Center 或 Enter 来单击链接。”

# c# - Linq query taking a long time to query a table with 6000 records

> ID：14667942
> 
> 赞同：1
> 
> 时间：2013-02-03T00:01:05.117
> 
> 标签：c#, linq, entity-framework, linq-to-entities

I am having trouble with the performance of a query I am trying to write. I have a table with about 6000 records within it.

Currently its taking about 15 seconds to run on my development machine. A win8 machine with 32gb ram quadcore running vs2012 & sql2012\. So its not my machine its my bad code.

```
 public IEnumerable<Customer> GetByStoreIdAndContainingName(Guid storeId, string containing)
    {
        using (var context = new Entities())
        {
            var store = context.Stores.FirstOrDefault(b => b.StoreId == storeId);
            if (store == null) return null;
            var business = store.Business;
            var consumers = new List<Consumer>();

            consumers =
                business.ConsumerIdentities.Select(ci => ci.Consumer)
                        .Distinct()
                        .Where(x => x.FirstName.ToLower().Contains(containing.ToLower()))
                        .ToList(); 
```

The layout of the database tables are

**Business**

BusinessId
Name
etc

**StoreId**

StoreId
StoreName
BusinessId

**Consumer**

ConsumerId
FirstName
LastName

**ConsumerIdentities**

BusinessId
ConsumerIdentityType
ConsumerIdentityValue

Can anyone see any obvious things I am doing wrong that would be taking so long to return the query results?

Turning on SQL Profiler was scary. The first query made was to select everything from ConsumerIdentity table where the business Id matched. Great that's perfect then gets the business table table.

However then seems to make a call for every single record like

```
exec sp_executesql N'SELECT 
[Extent1].[ConsumerId] AS [ConsumerId], 
[Extent1].[UserID] AS [UserID], 
[Extent1].[FirstName] AS [FirstName], 
[Extent1].[LastName] AS [LastName], 
[Extent1].[IsMale] AS [IsMale], 
[Extent1].[DateOfBirth] AS [DateOfBirth], 
FROM [dbo].[Consumer] AS [Extent1]
WHERE [Extent1].[ConsumerId] = @EntityKeyValue1',N'@EntityKeyValue1     uniqueidentifier',@EntityKeyValue1='952ED7B8-2123-49E2-BAE3-69FBD713BACB' 
```

So it looks like my where statement isn't getting applied

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:51:12.050

我将从 Customer 开始（如果属性存在），因为它`Distinct`首先保存 a 并且它应该在一个 SQL 语句中完成所有事情：

```
from c in Customer
where c.FirstName.ToLower().Contains(containing.ToLower())
      && c.ConsumerIdentity.Business.StoreId == storeId
select c 
```

这并没有带走`where`on `c.FirstName.ToLower()`。这样的结构总是会影响性能，因为它们不是[sargable](http://en.wikipedia.org/wiki/Sargable)（它们消除了任何索引）。EF 目前没有工具来进行不区分大小写的搜索（它不接受`Contains`带有 的重载`IEqualityComparer`），因此从技术上讲，您无法避免这种情况。但是很可能数据库排序规则不区分大小写，因此`x.FirstName.Contains(containing.ToLower()`可能会给出相同的结果，*索引*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:40:49.317

如果您在 Where 之后执行 Select 是否有帮助？

```
 consumers =
            business.ConsumerIdentities
                    .Where(x => x.FirstName.ToLower().Contains(containing.ToLower()))
                    .Distinct()
                    .Select(ci => ci.Consumer)
                    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T12:14:00.290

有几种优化方法可能会减少处理时间（其他人告诉过），但您查询的任何方式都是在具有 6000 条记录的数据库上执行搜索过程。但是对于 6000 条记录，它应该比 15 秒快。

这可能是因为您的内存缓存。我建议清除您的 VS 和系统缓存，然后重试。（您可以使用 C-Cleaner 应用程序进行系统缓存）

您也可以在 ADO 中使用异步启动。它对减少处理时间有很大的作用。（您可以使用支持异步的 IDataReadables 和 IDataReaders 来完成）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:07:30.603

我只看到一件事可以改进：

*   在( is a O(n log n) in O(n))`Distinct`之后使用`Where``Distinct``Where`

    ```
     consumers =
            business.ConsumerIdentities.Select(ci => ci.Consumer)
                    .Where(x => x.FirstName.ToLower().Contains(containing.ToLower()))
                    .Distinct()
                    .ToList(); 
    ```

但我怀疑您的性能问题来自 LINQ 查询（无论如何，6000 条记录应该非常快）。

# backbone.js - Can't bind events in Backbone.js view

> ID：14667943
> 
> 赞同：1
> 
> 时间：2013-02-03T00:01:21.107
> 
> 标签：backbone.js

I am trying to create a view for a piece of HTML that has already rendered on the page. I can see that the view is being instantiated, but I can't bind to any events. Here is an example:

```
<html>
<head><!-- backbone, etc --></head>
<body>
  <div id="myElement">
    <button id="myButton">Click me</button>
  </div>
  <script>
    new MyApp.Views.ExampleView()
  </script>
</body>
</html> 
```

My View (coffeescript):

```
class MyApp.Views.ExampleView extends Backbone.View

  el: $('#myElement')

  initialize: ->
    console.log 'initialized'

  events:
    'click #myButton': 'alertMe'

  alertMe: ->
    alert('hello!') 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:11:25.497

感谢[@muistooshort](https://stackoverflow.com/questions/14667943/cant-bind-events-in-backbone-js-view#comment20502313_14667943)和[@JayC](https://stackoverflow.com/questions/14667943/cant-bind-events-in-backbone-js-view#comment20503129_14667943) ，我意识到事件没有绑定的原因是因为我的视图是在文档准备好之前定义的（并且`el`在元素实际呈现之前定义）。要解决此问题，您可以在文档准备好后定义视图，或者您可以在实例化视图时将元素作为选项传递：

```
<script>
  new MyApp.Views.ExampleView({el: $('#myElement')})
</script> 
```

或者您可以将选择器指定为字符串，它将正常工作：

```
class MyApp.Views.ExampleView extends Backbone.View

  el: '#myElement' 
```

# c++ - 如何解决 Direct3DCreate9 的 LNK2019？

> ID：14667945
> 
> 赞同：3
> 
> 时间：2013-02-03T00:01:24.210
> 
> 标签：c++, visual-c++, directx, directx-9

在编译期间，我收到以下错误：

> RAT_RendererDX9.obj：错误 LNK2019：未解析的外部符号 _Direct3DCreate9@4 在函数“public: void __thiscall RAT_ENGINE::RAT_RendererDX9::Init(class RAT_ENGINE::RAT_WindowManager *)”(?Init@RAT_RendererDX9@RAT_ENGINE@@QAEXPAVRAT_WindowManager@2@ @Z)

我唯一使用的地方`Direct3DCreate9`是在我`Init()`的渲染器函数中，它具有以下代码：

```
void RAT_RendererDX9::Init(RAT_WindowManager* argWMan)
{
    wMan = argWMan;

    g_pD3D = (LPDIRECT3D9)Direct3DCreate9( D3D_SDK_VERSION );

    D3DPRESENT_PARAMETERS d3dpp;
    ZeroMemory( &d3dpp, sizeof( d3dpp ) );
    d3dpp.Windowed = TRUE;
    d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;
    d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;

    g_pD3D->CreateDevice( D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd,
                              D3DCREATE_SOFTWARE_VERTEXPROCESSING,
                              &d3dpp, &g_pd3dDevice );
} 
```

这个错误来自哪里，我该如何解决？
我已经尝试了 LNK2019 的其他答案，但它们并没有解决我的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T21:43:51.923

我不得不将 d3d9.lib 文件添加到链接器的附加依赖项中，就像 GSerg 所说的那样。

# javascript - javascript - 检查页面上至少选择了一个单选按钮

> ID：14667947
> 
> 赞同：0
> 
> 时间：2013-02-03T00:01:28.940
> 
> 标签：javascript, html, radio-button

我正在尝试检查页面上是否至少检查了我的一个单选按钮，它们位于不同的组中，因此我尝试创建所有组的数组并运行它们，但我似乎看不出有什么问题代码有人知道我在做什么错吗？

```
function atLeastOneRadio() { 
      var chx = document.getElementsByTagName('input');
      var day = new array();
      day[0] = "monday";
      day[1] = "tuesday";
      day[2] = "wednesday";
      day[3] = "thursday";
      day[4] = "friday";
      for (var i=0; i<chx.length; i++) {
        if (chx[i].type == 'radio' chx[i].name == day[i] && chx[i].checked) {
          return true;
        } 
      }
      return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:04:17.930

```
for (var i=0; i<chx.length; i++) {
   for (var x=0; x< day.length;x++) {
        if (chx[i].type == 'radio' chx[i].name == day[x] && chx[i].checked) {
          return true;
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:16:23.013

如果你有 jQuery，它可能会更短一些。

就像是：

```
//returns number of elements checked
$("input:checked").size();

//if you need to check if the name of the element is equal to something
$("input:checked").each(function(i){
    return($.inArray(this.name, days));
}); 
```

# csrf - 如何在美味派帖子中关闭 csrf？

> ID：14667951
> 
> 赞同：2
> 
> 时间：2013-02-03T00:01:43.883
> 
> 标签：csrf, tastypie

当我开启会话身份验证时，根据： [https](https://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html) : //django-tastypie.readthedocs.org/en/latest/authentication_authorization.html 我需要 csrf。我怎样才能暂时关闭它？我看到类似[https://django-tastypie.readthedocs.org/en/latest/cookbook.html?highlight=csrf#determining-format-via-url](https://django-tastypie.readthedocs.org/en/latest/cookbook.html?highlight=csrf#determining-format-via-url) 我想我需要覆盖除 wrap_view 之外的另一种方法并且什么都不做有@csrf_exempt。谷歌真的没有给我任何回报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:07:09.053

我有同样的问题，我通过覆盖方法 SessionAutentication 解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-05T08:44:43.773

我通过创建一个像@UnLiMiTeD这样的身份验证子类来实现它：

```
from tastypie.resources import ModelResource
from tastypie.authentication import Authentication

class BaseAuthentication(Authentication):

    def is_authenticated(self, request, **kwargs):
        return request.user.is_authenticated()

class YourResource(ModelResource):
    class Meta:
        authentication = BaseAuthentication() 
```

# graphics - 在 3D 引擎中显示普通应用程序

> ID：14667952
> 
> 赞同：1
> 
> 时间：2013-02-03T00:01:51.107
> 
> 标签：graphics

所以我一直在想象这个 3D 环境，我可以在其中打开我的应用程序并在那里做一些事情。我在想这可能吗？我注意到谷歌搜索比我想象的要难。我确实遇到了[http://awesomium.com/](http://awesomium.com/)

我确实有一个计算机图形课程，我用 OpenGL3 创建了我自己的 3D 世界，所以我知道我的问题可能有点“外面”。但是话又说回来，拖放式 Web 界面也与最初的几种互联网技术一样“存在”。

所以我的问题是：是否可以在 3D 环境中打开应用程序？有没有 3D 引擎可以做到这一点？如果没有 3D 引擎，那么我需要采取哪些开始步骤才能对其进行编程（即使它只是针对一个程序，例如记事本）。

我很好奇。我注意到当显示 3D 全息投影成为可能时，这将是一个非常相关的问题。现在我只是好奇，我想编写自己的空间，在树附近打开一些应用程序。我知道编程和 OpenGL 的基础知识，但我无法完全弄清楚如何将它们结合起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T00:19:25.223

有可能的。您需要捕获应用程序窗口的输出并将其渲染为纹理。为此，您需要钩子来拦截 WM_PAINT 窗口消息，并在代码中钩子以捕获在该窗口上绘制的内容。

如果要捕获使用 DirectX 或 OpenGL 进行渲染的窗口的输出，则需要（再次使用钩子）拦截翻转后台缓冲区并显示输出的方法。这要实现起来要困难得多，因为您需要知道每个应用程序该方法是什么。

您的问题的答案应该遵循这些思路，但正如您所见，您的问题没有万能的解决方案。

有关挂钩的更多信息：[如何在 C/C++ 中挂钩 Windows 函数？](https://stackoverflow.com/questions/873658/how-can-i-hook-windows-functions-in-c-c)

# r - 如何计算已知缺失数据的平均值

> ID：14667955
> 
> 赞同：0
> 
> 时间：2013-02-03T00:02:11.347
> 
> 标签：r

我有一个跨越多年的大型数据集，其中包含许多变量（年份、站点、位置、图片编号、分类和计数）。Year、Site、Location 的唯一变量在整个数据集中都是稳定的，拍摄的照片数量也基本稳定（我偶尔会忘记拍摄某个位置的所有照片）。但是，由于我已经设置了分类变量，如果一组照片中不存在某个分类单元，则它不会包含在该站点的位置数据中（没有零数据）。

但是，当需要计算多年来的平均密度时，重要的是在计算中表示零数据。

这是我的数据表的示例。

```
Year<-c(2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005,2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005 ,2005, 2005, 2005, 2005 ,2005 ,2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005, 2005 ,2005, 2005 ,2005, 2005, 2005 ,2005 ,2005 ,2005, 2005 ,2005 ,2005, 2005, 2005, 2005, 2005 ,2006, 2006, 2006, 2006, 2006, 2006 ,2006 ,2006, 2006, 2006, 2006 ,2006 ,2006 ,2006 ,2006 ,2006 ,2006 ,2006, 2006, 2006, 2006, 2006 ,2006 ,2006, 2006 ,2006, 2006, 2006,2006, 2006, 2006 ,2006 ,2006, 2006 ,2006, 2006 ,2006 ,2006, 2006, 2006, 2006 ,2006, 2006, 2006, 2006, 2006 ,2006,2006,2006,2006,2006)

Site<- c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,2,2,2,2)

Location<-c(1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3,3, 3, 3, 3, 3, 3,3,3,3,3)

Photo<-c(1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4 ,1 ,2, 3, 4, 1, 2 ,3 ,4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1 ,2 ,3 ,4 ,1 ,2 ,3 ,4 ,1 ,2 ,3 ,4 ,1 ,2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 4,1,2,3,4)

Taxonomy<-c('B' ,'B' ,'B' ,'B', 'C', 'C', 'C', 'C', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'C', 'C', 'C', 'C', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'C','C', 'C', 'C', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'C', 'C', 'C', 'C', 'A', 'A', 'A', 'A','B', 'B', 'B', 'B', 'C', 'C', 'C', 'C', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'C', 'C', 'C', 'C', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B','A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'A', 'A', 'A', 'A', 'B', 'B', 'B','C', 'C', 'C', 'C')

Count<-rnorm(119,mean=5)

DF<-data.frame(Year,Site,Location,Photo,Taxonomy,Count) 
```

我在这个示例数据集中添加了两个问题。我在 2006 年倒数第二个站点/位置（第 115 行）中缺少一张图片。并且分类群 C 不会出现在 2005 年的第一个位置，而仅出现在 2006 年的最后一个位置。

如果生活是完美的，并且所有零数据都包含在我的数据集中，我可以做到

```
aggregate(Count~Year+Site+Location+Photo+Taxonomy,DF,mean) 
```

或者

```
aggregate(Count~Year+Site+Taxonomy,DF,mean) 
```

如果我想看看这些年来的网站。

但是如果没有“零”数据，我所有的手段都将失效。

我尝试编写一些代码来添加所有零数据，但是数据集变得非常庞大，我宁愿不走那条路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:09:56.400

由于 Pandas 或 R :-) 在均值计算中明确排除了缺失的数据，因此，您需要在框架工作之外通过合计有问题的项目并将其除以所有项目的计数来完成...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T01:12:13.390

```
aggregate(Count~Year+Site+Location+Photo+Taxonomy,DF, function(ct) mean(ct[ct != 0]) ) 
```

这将根据每个组中的非零条目返回平均值。

# php - Codeigniter set_value() 并填充表单值

> ID：14667959
> 
> 赞同：8
> 
> 时间：2013-02-03T00:02:54.210
> 
> 标签：php, forms, codeigniter, retain

我的表单字段看起来像这样

```
 echo form_label('Quantity', 'quantity');
    echo form_input('quantity', $quantityx); 
```

我对其进行了修改以保留表单值

```
 echo form_label('Quantity', 'quantity');
    echo form_input('quantity', $this->input->post('quantity')); 
```

我在后面的代码中设置了上面的 $quantityx，以便从数据库中填充一个值，以便用户可以编辑一行。

如何保留验证值，并同时从数据库中填充变量？

我试过这口井

```
 echo form_label('Quantity', 'quantity');
    echo form_input('quantity', set_value($quantityx)); 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T00:16:25.367

您可以像这样设置它们，如果`set_value('columnanme')`返回`false`则没有发生表单`$_POST`，所以它将做的是从数据库示例中获取数据 `$profile->firstname`

```
$firstname = set_value('firstname') == false ? $profile->firstname : set_value('firstname');
$lastname = set_value('lastname') == false ? $profile->lastname : set_value('lastname'); 
```

像这样使用它：

```
echo form_label('Firstname', 'fname');
echo form_input('firstname', $firstname);
echo form_label('Firstname', 'lnamey');
echo form_input('firstname', $lastname); 
```

在你的情况下，你可以这样做：

```
$quantity = set_value('Quantity') == false ? $quantityx : set_value('Quantity'); 
```

在你的表格上：

```
echo form_label('Quantity', 'quantity');
    echo form_input('quantity', $quantity); 
```

***假设它`$quantityx`保存了数据库中的数据***

**编辑**
**===============================================**

只需使用`set_values()`第二个参数作为默认值。即`set_value('name_of_input_field',$data_from_databse_as_default);` 如果这不起作用，那么使用我的第一个答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-24T05:05:54.690

填充下面的代码对我有用。

```
form_input('cat_name','{YOUR VALUE}',array('id' => 'cat_name', ''placeHolder'' => 'Enter Cat Name')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T09:42:57.997

您可以尝试使用此代码在验证并从数据库中获取值时设置文本字段中的值。

```
form_input(array('id' => 'cat_name', 'name' => 'cat_name','value'=>set_value('cat_name',$cat_name))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-08T19:28:20.363

输入有 3 种基本类型。以下是如何重新填充它们中的每一个。

# 文本输入

```
$quantity = getValueFromDb();
echo form_input(
    ['name' => 'textInput',],
    set_value('textInput', $quantity, false)
); 
```

用作`false`第三个参数`set_value`以避免双重 html 转义，这也是由`form_input`。

# 下拉菜单

```
$quantity = getValueFromDb();
$quantities = getQuantitiesList();
echo form_dropdown(
    [ 'name' => 'formDropdown'],
    [''=>'-- Select Quantity --'] + $quantities,
    set_value('formDropdown', $quantity, false)
); 
```

# 单选按钮

```
$quantity = getValueFromDb();
echo form_radio(
    ['name'=>'formRadio'],
    5,
    set_radio('formRadio', 5, $quantity === 5)
), 5;
echo form_radio(
    ['name'=>'formRadio'],
    10,
    set_radio('formRadio', 10, $quantity === 10)
), 10; 
```

对于无线电输入，使用循环替换文字。

# 复选框

复选框可以通过用 和 替换以类似`form_radio`的`form_checkbox`方式`set_radio`制作`set_checkbox`。

```
$values = [ 5 => 'Five', 10 => 'Ten', 15 => 'Fifteen',];
$selectedValues = [5, 15];
foreach ($values as $value => $label) {
    echo form_checkbox(
        ['name' => 'formCheckbox[]'],
        $value,
        set_checkbox(
            'formCheckbox[]', 
            $value,
            in_array($value, $selectedValues, true)
        )
    ), $label;
} 
```

# parsing - 是否有在您键入时解析的解析器？

> ID：14667969
> 
> 赞同：3
> 
> 时间：2013-02-03T00:03:35.660
> 
> 标签：parsing, dynamic, ide, computer-science, concept

语境：

当我了解解析器时，编译代码（比如 C++）的过程是这样解释的：

1.  将代码写入文件并保存。
2.  将文件放入编译器。
3.  编译器首先将代码解析成抽象语法树，
4.  然后生成机器码。
5.  运行代码来测试它。
6.  重复。

Bret Victor 想要一种在您键入时评估代码的编程环境。( [http://worrydream.com/#!/InventingOnPrinciple](http://worrydream.com/#!/InventingOnPrinciple) )

我想他不是第一个，将这个概念转换为 2D 游戏编程之外的通用编程可能存在一些概念问题，而且我知道有些系统已经做了类似的事情：例如 preadsheets（如 Excel），短暂聊天。

这不是我想讨论的。

* * *

问题：（有点宽泛，抱歉——主要问题是**粗体字**）

编辑时如何解析文本？我的想法是，每当编辑器发送一个事件，指示文本的某些部分被更改时，只有一部分 AST 会被重新评估，并且受 AST 的这一部分影响的值也会被重新评估。

我考虑编写一个解析器生成器，它像往常一样采用语法，但生成一个解析器来处理文本的增量更改，而不是整个文本。

**1\. 这是一个合理的概念吗？**（对于任何晦涩难懂的编程语言/环境。可能是“功能反应式”的东西。或者只是 html。）

(2.) 它甚至可能使用过吗？

(3.) 解析整个文件的速度是否足以让复杂的方法变得不必要？

(4.) Eclipse 等 IDE 中的语法高亮显示或类型检查器是否像这样工作？它们是如何工作的？我认为它们不如编译器解析器强大，无法让它们工作得足够快，对吗？

(5.) 在 Stackoverflow 中，有样式文本的实时预览。它会在每次击键后解析整个问题吗？它是否有一些“我的”概念可以解决的限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T01:22:45.673

tab-completion（或“intellisense”）需要与解析非常相似的东西，以便找出合理的完成/跟随可能是什么。您可能在某些 IDE 中对此有一些经验。如果是这样，您也会注意到它的一些限制。

像 SO 的预览功能这样的系统会定期解析输入，但不一定在每次击键时解析。您可能会注意到语法突出显示有点滞后，尤其是在缓冲区已满时。一个典型的策略是让一个进程重复重新解析，直到在解析过程中输入没有改变，然后等待下一次改变。

vim 和 emacs 等文本编辑器在每次击键时都会重新解析，但它们会通过在行尾缓存上下文来优化（通常），因此重新解析只针对几个字符。（当然，他们不做完整的解析，所以更容易。）

已经对抽象语法树的增量解析和就地编辑进行了一些研究，但它变得相当棘手。一种自然适用于这种风格的解析策略是“packrat 解析”（可[在此处](http://bford.info/packrat/)获得广泛的参考书目）。

众所周知，C++ 很难正确解析。确实，要弄清楚给定`<`是模板括号还是小于号，这并非易事。一般来说，如果不阅读所有头文件就无法做到这一点，并且在某些情况下，如果不实例化模板就无法弄清楚；交互式地做太多的工作。许多其他语言更容易解析，并且定期重新解析的简单解决方案对于所有实际目的来说都足够快。

希望这能解决你的大部分问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T04:28:14.663

这绝对是一个有趣的问题。我使用的解析器有点类似于您在我的 GoWorks 演示 IDE 中描述的解析器。这是一个显示解析器运行的视频（从 5 分钟开始）：

[Tunnel Vision Labs 的 GoWorks IDE 简介（预览版 7）](http://www.youtube.com/watch?v=l5QW0EDAa1o&t=301s)

解析器不会每次都解析整个文件，因为必要的解析信息只能来自输入的一个子集。解析比这更多有几个缺点，包括以下主要项目。

1.  如果您解析文件的不必要部分，并且这些部分包含语法错误（用户正在积极编辑时的常见情况），则解析器可能无法准确地从错误中恢复。
2.  解析比必要更多的信息，即使速度足够快以使用户看起来“流畅”，也会对移动用户的电池寿命产生重大影响。

据我所知，我们最新的 IDE 是唯一积极使用他们使用的特定样式的解析器（这是您所描述的为在 IDE 中使用而设计的一个非常具体的子集）作为多种语言的通用方法的唯一IDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:22:35.563

它主要通过以下两种方式之一完成：

*   使用一个更简单的原始解析器，它只包含足够的信息来着色。足够快，因为它很简单，可能会绊倒复杂的语言功能。
*   将位置信息放在 AST 中，然后修复树。如果您保留一些历史记录，则可以避免将当前错误之后的所有内容都标记为错误。

Smalltalk 当然一次只解析一个方法。这使得解决方案更快更简单，错误解释的可能性也更少。打字时的重新分析可能会受到限制。只要标识符未被识别，在它之后重新解析部分就没有多大意义。

很久以前，有一个用于 mac（以及 ac one）的 think pascal 编译器，它运行得非常好。

# perl - HTML::FormHandler 子类字段

> ID：14667970
> 
> 赞同：0
> 
> 时间：2013-02-03T00:03:41.577
> 
> 标签：perl, subclass, catalyst

我正在使用[HTML::FormHandler](https://metacpan.org/module/HTML::FormHandler)，为了不重复代码，我想利用它的子类化功能。目前我有两种形式：

```
myapp::Form::Account::Base
myapp::Form::Account::Register 
```

`myapp::Form::Account::Register`继承自`myapp::Form::Account::Base`。`myapp::Form::Account::Base`有一个电子邮件字段，定义如下：

```
has_field 'email' => (
    label            => 'Email',
    type             => 'Text',
    apply            => [ Email ],
    element_class    => [qw/email/],
    required         => 1,
    unique           => 1,
    element_attr => {autocomplete=>"off"}, #for register page
); 
```

在`myapp::Form::Account::Register`中，我想要定义完全相同的电子邮件字段，但我想向其中添加“uniqueemail”类。但是，每当我这样做时：

```
has_field 'email' => (
    element_class    => [qw/uniqueemail/],
); 
```

在`myapp::Form::Account::Register`，它只是完全覆盖了父表单对电子邮件字段的定义，并创建了一个新的。无论如何，只是将父表单字段子类化或添加到它，还是我只需要再次重新定义电子邮件字段以获得我想要的更改？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:19:32.127

您可以通过在字段名称前使用“+”来提供覆盖父定义的字段定义：

```
has_field '+email' => (
    element_class    => [qw/uniqueemail/],
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:26:59.403

您可以制作自定义字段类型。查看 HTML::FormHandler::Field::Text 或 HTML::FormHandler::Field::Email 的定义：

*   [https://metacpan.org/source/GSHANK/HTML-FormHandler-0.40017/lib/HTML/FormHandler/Field/Text.pm](https://metacpan.org/source/GSHANK/HTML-FormHandler-0.40017/lib/HTML/FormHandler/Field/Text.pm)
*   [https://metacpan.org/source/GSHANK/HTML-FormHandler-0.40017/lib/HTML/FormHandler/Field/Email.pm](https://metacpan.org/source/GSHANK/HTML-FormHandler-0.40017/lib/HTML/FormHandler/Field/Email.pm)

然后使用您想要的默认值设置您的电子邮件类型。然后在 myapp::Form::Account::Base 中，您的电子邮件字段将如下所示：

```
has_field 'email' => (
    type             => '+myapp::Form::Account::CustomEmail'
); 
```

然后在 myapp::Form::Account::Register 中：

```
has_field 'email' => (
    type             => '+myapp::Form::Account::CustomEmail',
    element_class    => [qw/uniqueemail/],
); 
```

# html - 防止浮动 div 在小窗口中分解

> ID：14667971
> 
> 赞同：0
> 
> 时间：2013-02-03T00:03:47.190
> 
> 标签：html, css, css-float

我有三个`div`并排放置的 s 通过`float: left`在所有三个上使用：

```
<div id="wrapper">
    <div id="left">...</div>
    <div id="center">...</div>
    <div id="right">...</div>
</div> 
```

left 和 center`div`的宽度是固定的，而 right`div`的宽度会根据其内容而变化。

我遇到的问题是，当我使浏览器的窗口小于`div`s 的组合宽度（从而使包装器`div`太窄）时，它们会分开并且不再看起来是并排的。
我知道使用静态/绝对定位将是一个简单的解决方法，但根据我的经验，它比使用更难维护`float`，我宁愿避免使用它。

**有没有办法在不切换到不同的定位技术的情况下解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:09:55.087

Do you want to keep the divs on the same row even if forces a scroll ball on the bottom? If so you can set a min-width: on the container div or the right div.

You could also use an @media rule in your style sheet to only give the right div a fixed width when the screen is below a certain size. Something like

```
@media only screen and (max-width: 600px) { 
 #div-right {  width:150px    }
} 
```

# android - 从另一个类访问 Canvas

> ID：14667981
> 
> 赞同：0
> 
> 时间：2013-02-03T00:04:52.143
> 
> 标签：android, android-canvas, android-view

我创建了一个扩展 SurfaceView 的类 XYZ。在 onDraw 方法中，我创建了一个包含图像的位图数组，然后使用方法 drawBitmap 将图像放置在我的画布上。这看起来或多或少是这样的：

```
public class Board extends SurfaceView{

   public BitmapFactory myBitmapFactory = new BitmapFactory();
   public  Bitmap myBitmap = new Bitmap();
   protected void onDraw(Canvas canvas) {
           myBitmap = Bitmap.createScaledBitmap(myBitmapFactory.decodeResource(getResources(), R.drawable.image), size, size, false);

Paint paint = new Paint();
canvas.drawBitmap(myBitmap, x, y, paint); 
```

我还有第二节课，它是 MyActivity，单击按钮后我想更改画布上的图像：

```
public class MyActivity extends Activity {
public Context context = this;
     public Board myGameBoard;
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_start_game);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Show the Up button in the action bar.
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
}

public void changeImage(View view){
   //here I want to change the image
   }
} 
```

（我只发布了最重要的代码行，我认为它们负责添加图像）。

但我不知道如何到达我在 onDraw 方法中使用的画布，因为它是一个局部变量。我应该怎么做才能改变图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:36:29.117

为您的班级添加一个新的二传手`Board`，例如`setBitmap(Bitmap)`. 将位图引用保存在那里并使视图无效，以便`onDraw()`再次调用。在`onDraw`读取设置的位图。完毕！

# php - 从时间戳计算年龄

> ID：14667986
> 
> 赞同：-1
> 
> 时间：2013-02-03T00:05:47.840
> 
> 标签：php, mysql, timestamp

我有一个名为“用户”的 MYSQL 表。在此表中，每个用户都有一行。在每一行中，我都有一个名为“created”的列，其中包含创建帐户时的时间戳，这是模板“0000-00-00 00:00:00”。我还有一个专栏叫“年龄”。我想要的是，当用户登录时，可以显示他/她的年龄。处理这种情况的最佳方法是什么，以便可以将用户年龄（以天为单位）放置在列中并显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:29:41.150

要检索以天为单位的“年龄”（即当前日期时间的午夜和存储在列中的日期时间（或时间戳）值的午夜之间的整数天数之差`created`：

```
SELECT DATEDIFF(NOW(),u.created) AS age_in_days
     , ...
  FROM users u
 WHERE ... 
```

要使用相同的计算填充`age`列：

```
UPDATE users u
   SET u.age = DATEDIFF(NOW(),u.created)
 WHERE ... 
```

如果您想通过包含时间分量来稍微不同地计算“年龄”，

```
SELECT TIMESTAMPDIFF(DAY,u.created,NOW()) AS age_in_days 
```

请注意，结果略有不同，它在计算天数时考虑了时间分量。考虑：

```
SELECT TIMESTAMPDIFF(DAY,'2013-02-02 18:59','2013-02-03 14:00') AS age0
     , DATEDIFF('2013-02-03 14:00','2013-02-02 18:59') AS age1 
```

假设您想保留此值，将“年龄”值存储在列中似乎有点多余。任何有谓词的查询`age`，例如

```
WHERE u.age > 100 
```

可以同样有效地针对`created`列编写：

```
WHERE u.created > NOW() + INTERVAL -100 DAY 
```

但这确实会返回稍微不同的结果，因为它考虑了时间分量。仅对日期部分进行比较，效率会降低：

```
WHERE DATE(u.created) > CURDATE() + INTERVAL -100 DAY 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:09:52.707

Assuming that your creation date really is a timestamp, and that it's called `creationdate`:

```
SELECT YEAR(NOW()) - YEAR(creationdate) - (DATE_FORMAT(NOW(), '%m%d') < DATE_FORMAT(creationdate, '%m%d')) AS age FROM whatever 
```

This runs inside MySQL so you can return it as part of the SELECT where you obtain the user's information.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T00:10:24.540

Try using [DateTime](http://www.php.net/manual/en/book.datetime.php) for this:

```
$now      = new DateTime();
$birthday = new DateTime('1973-04-18 09:48:00');
$interval = $now->diff($birthday);
echo $interval->format('%a days'); 
```

[See it in action](http://3v4l.org/7EYsB)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T00:15:05.647

您可以使用 strtotime() 函数将 TIMESTAMP 转换为 unix 时间，使用 time() 获取当前 unix 时间，从当前时间中减去生日时间并将其转换为年。

# php - 谷歌图表颜色变化

> ID：14667994
> 
> 赞同：2
> 
> 时间：2013-02-03T00:07:02.627
> 
> 标签：php, html, google-visualization

我需要帮助将谷歌图表的轴颜色更改为黑色，将背景颜色更改为透明......我已经在整个网络上都没有运气我也尝试过使用 css，但仍然没有运气我正在使用以下脚本：

```
 //Set-up the values for the Axis on the chart
    $maxWeeks = count($priceResults);
    //Set chd parameter to no value
    $chd = '';
    //Limit in my example represents weeks of the year
    $limit = 52;

    //Start to compile the prices data
    for ($row = 0; $row < $limit; $row++) {
        //Check for a value if one exists, add to $chd
        if(isset($priceResults[$row]['price']))
        {
            $chd .= $priceResults[$row]['price'];
        }
        //Check to see if row exceeds $maxWeeks
        if ($row < $maxWeeks) {
            //It doesn't, so add a comma and add the price to array $scaleValues
            $chd .= ',';
            $scaleValues[] = $priceResults[$row]['price'];
        } else if ($row >= $maxWeeks && $row < ($limit - 1)) {
            //Row exceeds, so add null value with comma
            $chd .= '_,';
        } else {
            //Row exceeds and is last required value, so just add a null value
            $chd .= '_';
        }
    }

    //Use the $scaleValues array to define my Y Axis 'buffer'
    $YScaleMax = round(max($scaleValues)) + 5;
    $YScaleMin = round(min($scaleValues)) - 5;
    //Generate the number of weeks of the year for A Axis labels
    $graphSequence = generateSequence(1, 10, "|");

    $cht = 'lc';//Set the chart type
    $chxl = '';//custom axis labels
    $chxp = '';//Axis Label Positions
    $chxr = '0,' . $YScaleMin . ',' . $YScaleMax . '|1,1,52|3,1,12|5,' . $YScaleMin . ',' . $YScaleMax . '';//Axis Range
    $chxtc = '0,5|1,5|5,5';//Axis Tick Mark Styles
    $chxt = 'y,x';//Visible Axes
    $chs = '500x200';//Chart Size in px
    $chco = '76E32C';//Series Colours
    $chds = '' . $YScaleMin . ',' . $YScaleMax . '';//Custom Scaling
    $chg = '-1,-1,1,5';//Grid lines
    $chls = '2';//line styles
    $chm = '';//Shape Markers

    //Build the URL
    $googleUrl = 'http://chart.apis.google.com/chart?';
    $rawUrl = $googleUrl . 'cht=' . $cht . '&chxl=' . $chxl . '&chxp=' . $chxp . '&chxr=' . $chxr . '&chxs=' . $chxs . '&chxtc=' . $chxtc . '&chxt=' . $chxt . '&chs=' . $chs . '&chco=' . $chco . '&chd=t:' . $chd . '&chds=' . $chds . '&chg=' . $chg . '&chls=' . $chls . '&chm=' . $chm;

    $output = $rawUrl;

    return $output;
}

/**
 * A nicer way to test arrays
 */
function displayArray($val)
{
    echo "<pre>";
    print_r($val);
    echo "</pre>";
    return;
}

/**
 * a simple numeric sequence generator. requires a min and max for the sequence, and can take an optional seperator
 */
function generateSequence($min, $max, $seperator = "")
{
    $output = '';
    for ($i = $min; $i <= $max; $i++)
    {
        $output .= $i . $seperator;
    }
    return $output;
}

$chart = generateGoogleChart();

$html = '<div id="chart">';
$html .= '<img src="' . $chart . '" />';
$html .= '</div>';

echo $html;
?> 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:43:42.907

我过去使用过 Image Charts API 并实现了构建器模式来生成我的图表 URL。[在我们的应用程序](https://play.google.com/store/apps/details?id=com.oceanlife)中使用了透明背景和彩色轴，方法调用提供了如下所示的透明度；

```
/**
 * Remove any background fill colours. The #chco parameter is used for {@link ChartType#BAR}
 * fills.
 * 
 * @return this.
 * @see https://developers.google.com/chart/image/docs/chart_params#gcharts_solid_fills
 */
public GoogleImageChartBuilder withTransparentBackgroundFill() {
 stringBuilder.append("&chf=bg,s,00000000");
 return this;
} 
```

所以在重新阅读上面链接的文档时，我已经用`chf`参数说了；“给我一个透明的实心背景填充”......也许更明智的说法是“给我一个透明的背景填充”！IE

```
 stringBuilder.append("&chf=bg,t,00000000"); 
```

轴着色由`chxs`参数定义。看看[这里](https://developers.google.com/chart/image/docs/chart_params#axis_label_styles)记录的最后一个可选参数名为`<opt_axis_color>`.

希望对您有所帮助。请记住，图像图表 API 现在已弃用。JavaScript 版本没那么可怕 :)