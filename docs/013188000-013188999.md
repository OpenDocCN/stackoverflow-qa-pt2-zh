# StackOverflow 问答 13188000-13188999

# mysql - ERROR 1093 (HY000): 您不能在 FROM 子句中指定目标表 'a' 进行更新

> ID：13188002
> 
> 赞同：3
> 
> 时间：2012-11-02T01:26:09.223
> 
> 标签：mysql, sql, hql

我有这个查询

```
UPDATE trh_adminLoginDate SET superseded = true WHERE EXISTS 
 (SELECT * FROM trh_adminLoginDate AS a2 WHERE a2.adminId = a.adminId AND a2.loginDate > a.loginDate AND a2.clientPlatform = a.clientPlatform) 
```

和桌子看起来像这样。

```
+----------------+--------------+------+-----+---------+----------------+
| Field          | Type         | Null | Key | Default | Extra          |
+----------------+--------------+------+-----+---------+----------------+
| id             | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| dateCreated    | datetime     | NO   |     | NULL    |                |
| version        | int(11)      | NO   |     | NULL    |                |
| dateModified   | datetime     | NO   |     | NULL    |                |
| adminId        | bigint(20)   | NO   | MUL | NULL    |                |
| clientPlatform | varchar(255) | YES  |     | NULL    |                |
| loginDate      | datetime     | YES  |     | NULL    |                |
| superseded     | tinyint(1)   | NO   |     | NULL    |                |
+----------------+--------------+------+-----+---------+----------------+ 
```

当我执行此查询时，我收到以下错误：

```
ERROR 1093 (HY000): You can't specify target table 'a' for update in FROM clause 
```

我可以创建临时表并保留子查询的结果，然后执行 UPDATE。但我不想这样做。有人可以建议我这样做的更好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:58:39.970

您正在使用别名“a”，但您从未定义它。

也许这会起作用：

```
UPDATE  trh_adminLoginDate a

        JOIN trh_adminLoginDate AS a2 
        ON a2.adminId = a.adminId 
        AND a2.loginDate > a.loginDate 
        AND a2.clientPlatform = a.clientPlatform

SET a.superseded = true 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T02:06:25.953

或者也许这可以解决问题：

```
UPDATE trh_adminLoginDate a

SET    superseded = true 

WHERE EXISTS 
      (SELECT * FROM trh_adminLoginDate WHERE adminId = a.adminId AND loginDate > a.loginDate AND clientPlatform = a.clientPlatform) 
```

# c# - Datagrid中不同组合框的不同项目源

> ID：13188006
> 
> 赞同：0
> 
> 时间：2012-11-02T01:26:42.573
> 
> 标签：c#, wpf, datagrid

> **可能重复：**
> [Datagrid 中不同组合框的不同值](https://stackoverflow.com/questions/13182777/different-values-for-different-comboboxes-in-datagrid)

我`DataGrid`使用下面的代码添加了两个组合框：

```
<DataGrid x:Name="dData" HorizontalAlignment="Left" Margin="76,105,0,0" VerticalAlignment="Top" Height="191" Width="313" Grid.ColumnSpan="2" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{x:Null}" ClipboardContentBinding="{x:Null}" Header="Hello"/>
        <DataGridTemplateColumn Header="Status" Width="100">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <ComboBox Name="Combo1" Height="22"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
    <ComboBox Name="Combo1"/>
    <ComboBox Name="Combo2"/>
</DataGrid> 
```

现在，如何将两个不同的 itemsources 添加到这两列？

![在此处输入图像描述](../Images/fc98f8a93beb744d9c52695c0b9aa5e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:40:03.373

**在 Xaml**中，您可以直接定义`ItemSource`这种方式：

```
<ComboBox Name="Combo1" ItemsSource="{Binding Homes, Mode=OneWay}" 
   DisplayMemberPath="Name" /> 
```

where`Homes`对应于与当前/相关联的 中`Property`定义的。`ViewModel``DataContext``window``control`

**在 Code-Behind**中，您可以`ItemSource`这样定义：

```
Combo1.ItemSource = Homes; 
```

参考：[WPF 组合框和数据绑定：DataContext、ItemsSource、DisplayMemberPath、SelectedItem、SelectedValue 和 SelectedValuePath](http://blog.cylewitruk.com/2010/09/wpf-combobox-and-databinding-datacontext-itemssource-displaymemberpath-selecteditem-selectedvalue-selectedvaluepath/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:33:31.633

只需按名称获取组合框并向其添加不同的 itemsource

```
Combo1.ItemsSource = listSource1;
Combo2.ItemsSource = listSource2; 
```

# forms - 使用输入 onchange 的 Umbraco XSLT 搜索页面导航

> ID：13188008
> 
> 赞同：1
> 
> 时间：2012-11-02T01:27:17.143
> 
> 标签：forms, xslt, pagination, umbraco, onchange

我创建了一个分页输入，在更改时将转到输入到输入中的值。

![在此处输入图像描述](../Images/d55e69cdbe83bdeeb34b7c40e7b34760.png)

它将检测页面范围并允许在该范围内的这些页面之间导航。例如**/image-gallery-album-1.aspx?page=3**

```
<form type="get" onchange="return false">
  <div class="pagerUI">
    <table border="0" cellspacing="0" cellpadding="0">
      <tr> 
        <!-- previous page -->
        <xsl:if test="$page &gt; 1">
          <td class="pager-prev"><a class="previous" href="{concat('?page=', $page - 1, $qs)}" title="Previous page">&#8249;</a></td>
        </xsl:if>
        <td>Page</td>
        <td><input type="number" name="page" id="page" min="1" >
          <xsl:choose>
            <xsl:when test="$page=1">
              <xsl:attribute name="value">1</xsl:attribute>
            </xsl:when>
            <xsl:otherwise>
              <xsl:attribute name="value"> <xsl:value-of select="$currentPageNumber" /> </xsl:attribute>
            </xsl:otherwise>
          </xsl:choose>
          <xsl:attribute name="max"> <xsl:value-of select="$numberOfPages"/> </xsl:attribute>
          </input></td>
        <td>of <xsl:value-of select="$numberOfPages"/></td>
        <!-- next page -->
        <xsl:if test="$page * $resultsPerPage &lt; count($matchedNodes)">
          <td class="pager-next"><a class="next" href="{concat('?page=', $page + 1, $qs)}" title="Next page">&#8250;</a></td>
        </xsl:if>
      </tr>
    </table>
  </div>
</form> 
```

但是，当我将它添加到 XSLTSearch 代码时，它不起作用，因为 URL 丢失了搜索字符串。

所以不要导航到：**/image-search.aspx?search=football&page=3**

它导航到：**/image-search.aspx?page=3**没有在该页面上显示任何结果，因为它缺少显示搜索结果的搜索条件。

我尝试更改表单并包含一个“操作”，该操作将更改 URL 以包含搜索值，但我无法包含输入值，因为它是动态的。

例如，如果我在输入中输入任何值，则 URL 会更新为以下表单：**/image-search.aspx?search=otbra&page=**它缺少输入值的输入数字。

具有 onchange 和 action 和 method post 属性的搜索表单：

```
<form type="get" onchange="return false">
  <xsl:attribute name="method"> <xsl:text>post</xsl:text> </xsl:attribute>
  <xsl:attribute name="action"> <xsl:text>?search=</xsl:text> <xsl:value-of select="$search"/><xsl:text>&amp;</xsl:text>page= (input value)</xsl:attribute> 
```

是否有一些 javascript 或某种方式来检测提交的值并将其解析为 URL 的搜索字符串？

任何援助将不胜感激。干杯，合资企业

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:40:52.057

*注意：正如对您帖子的评论所说，可能的问题是 $qs 变量，但是这里解释了如何在 Umbraco 中获取查询字符串值，以供参考。*

* * *

在 Umbraco 中，您可以使用 XSLT 检索查询字符串值`umbraco.library`

因此，要检索 search 的值，您可以调用如下内容：

```
<xsl:variable name="searchValue" select="umbraco.library:RequestQueryString('search')"/> 
```

这将创建一个名为 searchValue 的变量，然后您可以使用该变量在您的 url 中重新注入查询字符串值。

像这样的东西：

```
<a class="next" href="{concat('?page=', $page + 1, '&amp;search=', $searchValue)}" title="Next page">&#8250;</a> 
```

[有关 umbraco.library 的更多信息，请访问](http://our.umbraco.org/wiki/reference/umbracolibrary)our.umbraco.org[网站](http://our.umbraco.org/)。

# visual-studio - 是否可以判断 .net 应用程序是否是使用未经许可的 Visual Studio 开发的？

> ID：13188009
> 
> 赞同：0
> 
> 时间：2012-11-02T01:27:20.763
> 
> 标签：visual-studio, build, licensing, build-process

我们聘请了一个人来构建 .net 应用程序。他的团队在印度，恐怕他们可能没有授权软件，这最终可能会给我们带来麻烦。

他们无论如何我可以判断他提供的最终产品是否是使用许可的 Visual Studio 开发的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:35:40.050

我不确定是否真的存在 - 特别是因为 Visual Studio 本身不编译代码，如果它是 C#，那么它的 CSC.exe（Visual Basic 的 VBC.exe）文件可以完成工作，并且它本身带有 . Net 框架并且是免费的。

# php - 数据库：将用户和管理员保存在同一张表中（优点/缺点）？

> ID：13188010
> 
> 赞同：0
> 
> 时间：2012-11-02T01:27:28.193
> 
> 标签：php, mysql, database, roles, user-management

我对您的意见很感兴趣：目前我的数据库中只有一个用户表，但我考虑添加一个新的用户表来将公共帐户与管理员帐户分开。

Pro：我不必检查“角色”表来验证尝试登录的用户。

缺点：管理员帐户不能成为社区的一部分，仅用于后端。如果您将某人提升为版主，那就太多了：他不能用他的公共帐户写帖子。

我目前检查用户是否是队友（伪代码）的解决方案：

```
$needed_role = "admin";
if ($User->is_in_team($user_id)) { // SELECT id FROM user WHERE team=1 AND user_id=$user_id
    $roles = $User->getRoles($user_id);
    if (in_array($needed_role, $roles)) {
        // login...
    }
} 
```

这是一个简单的例子。角色被划分为“blog_post_write”、“blog_post_delete”等权限。

我目前的解决方案并不完美，所以请帮我拉皮条我的数据库！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:34:43.647

你能不能简单地拥有一个带有 is_admin 和 is_moderator 布尔变量的用户表。然后，当您要查找团队中的人员时，您只需查看一张表即可。除非您真的希望他们成为不同类型的用户，而不仅仅是具有管理员或版主权限的用户，否则我不会考虑将它们分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:45:14.000

有什么特殊的理由有单独的表格吗？也许更多额外的领域？必须检查其他表作为安全措施？

```
..+---------+-----------+-----------+-------------+
..|             User                              |
..+---------+-----------+-----------+-------------+
..| UserID  | UserAlias | UserPwd   | UserIsAdmin |
..+---------+-----------+-----------+-------------+
..| 87      | johndoe   | sdsd<ds33 | false       |
..+---------+-----------+-----------+-------------+
..| 88      | janesmith | sd456656h | true        |
..+---------+-----------+-----------+-------------+
..| 89      | annethmps | s34ddd545 | true        |
..+---------+-----------+-----------+-------------+
..| 90      | mikekane  | s34ddd545 | false       |
..+---------+-----------+-----------+-------------+

..+---------+-----------+-----------+
..|             Admin               |
..+---------+-----------+-----------+
..| UserID  | Extra1    | Extra2    |
..+---------+-----------+-----------+
..| 88      | sdfsds3   | s2323h    |
..+---------+-----------+-----------+
..| 89      | sdsds2    | s3ghgh5   |
..+---------+-----------+-----------+ 
```

干杯。

# php - Bcrypt问题破坏网站

> ID：13188015
> 
> 赞同：0
> 
> 时间：2012-11-02T01:28:36.147
> 
> 标签：php, mysql, bcrypt

所以我正在尝试实现 Bcrypt，我可以让它很好地加密密码，但不能让它从数据库中检索密码。它破坏了网站。

这是我知道它不是最安全的代码，但我将在完成此工作后实施 PDO 准备好的语句。

check_login.php：

```
<?php
session_start();
require 'functions.php';

ob_start();
$host="localhost"; // Host name 
$username="user"; // Mysql username 
$password="XXXXX"; // Mysql password 
$db_name="DB"; // Database name 
$tbl_name="CLL_users"; // Table name 
// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 
$myusername=$_POST['myusername']; 

$mypassword = $bcrypt->verify($_POST['mypassword'], "$Hash");

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$myusername = mysql_real_escape_string($myusername);
$sql="SELECT * FROM $tbl_name WHERE user_name='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
    $_SESSION['myusername'] = $myusername;
    session_is_registered("myusername");
    session_is_registered("mypassword"); 
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
ob_end_flush();
?> 
```

main_login.php：

```
<html>
    <head>
        <title> Welcome</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <LINK href="CLL.css" rel="stylesheet" type="text/css">
    </head>
 <body>
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<form name="form1" method="post" action="check_login.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1">
<tr>
<td colspan="3"><strong>Member Login </strong></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td>:</td>
<td><input name="mypassword" type="text" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Login"></td>
</tr>
</table>
</td>
</form>
</tr>
</table>
     <?php $_SESSION['myusername'];?>
    </body>
</html> 
```

登录_成功.php：

```
<?php
session_start();
session_is_registered(myusername);
$userCurrent = $_SESSION['myusername'];
$host="localhost"; // Host name 
$username="user"; // Mysql username 
$password="XXXXX"; // Mysql password 
$db_name="DB"; // Database name 
$tbl_name="CLL_users"; // Table name 
date_default_timezone_set('America/Chicago');
$dateCreated = date('m/d/Y h:i:s a', time());

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$sql="UPDATE CLL_users SET last_login= '$dateCreated' WHERE user_name= '$userCurrent'";
$result=mysql_query($sql);

if(!session_is_registered(myusername)){
header("location:main_login.php");
}
?>

<html>
    <head>
        <title> Welcome</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <LINK href="CLL.css" rel="stylesheet" type="text/css">
    </head>
 <body>
     <?php echo $userCurrent ?>
<p>Login Successful</p>
</body>
</html> 
```

函数.php：

```
 <?php

class Bcrypt {
  private $rounds;
  public function __construct($rounds = 12) {
    if(CRYPT_BLOWFISH != 1) {
      throw new Exception("bcrypt not supported in this installation. See http://php.net/crypt");
    }

    $this->rounds = $rounds;
  }

  public function hash($input) {
    $hash = crypt($input, $this->getSalt());

    if(strlen($hash) > 13)
      return $hash;

    return false;
  }

  public function verify($input, $existingHash) {
    $hash = crypt($input, $existingHash);

    return $hash === $existingHash;
  }

  private function getSalt() {
    $salt = sprintf('$2a$%02d$', $this->rounds);

    $bytes = $this->getRandomBytes(16);

    $salt .= $this->encodeBytes($bytes);

    return $salt;
  }

  private $randomState;
  private function getRandomBytes($count) {
    $bytes = '';

    if(function_exists('openssl_random_pseudo_bytes') &&
        (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')) { // OpenSSL slow on Win
      $bytes = openssl_random_pseudo_bytes($count);
    }

    if($bytes === '' && is_readable('/dev/urandom') &&
       ($hRand = @fopen('/dev/urandom', 'rb')) !== FALSE) {
      $bytes = fread($hRand, $count);
      fclose($hRand);
    }

    if(strlen($bytes) < $count) {
      $bytes = '';

      if($this->randomState === null) {
        $this->randomState = microtime();
        if(function_exists('getmypid')) {
          $this->randomState .= getmypid();
        }
      }

      for($i = 0; $i < $count; $i += 16) {
        $this->randomState = md5(microtime() . $this->randomState);

        if (PHP_VERSION >= '5') {
          $bytes .= md5($this->randomState, true);
        } else {
          $bytes .= pack('H*', md5($this->randomState));
        }
      }

      $bytes = substr($bytes, 0, $count);
    }

    return $bytes;
  }

  private function encodeBytes($input) {
    // The following is code from the PHP Password Hashing Framework
    $itoa64 = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    $output = '';
    $i = 0;
    do {
      $c1 = ord($input[$i++]);
      $output .= $itoa64[$c1 >> 2];
      $c1 = ($c1 & 0x03) << 4;
      if ($i >= 16) {
        $output .= $itoa64[$c1];
        break;
      }

      $c2 = ord($input[$i++]);
      $c1 |= $c2 >> 4;
      $output .= $itoa64[$c1];
      $c1 = ($c2 & 0x0f) << 2;

      $c2 = ord($input[$i++]);
      $c1 |= $c2 >> 6;
      $output .= $itoa64[$c1];
      $output .= $itoa64[$c2 & 0x3f];
    } while (1);

    return $output;
  }
}

function valid_email($email) {
    return filter_var($email, FILTER_VALIDATE_EMAIL);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:16:12.317

在 check_login.php 中包含 functions.php 但我看不到您在此行之前声明 $bcrypt 的位置，

```
$mypassword = $bcrypt->verify($_POST['mypassword'], "$Hash"); 
```

如果它是一个静态函数，你可以尝试

```
$mypassword = Bcrypt::verify($_POST['mypassword'], "$Hash"); 
```

# android - 尝试在 gridview 中显示图像的 onPostExecute 错误

> ID：13188017
> 
> 赞同：0
> 
> 时间：2012-11-02T01:29:00.603
> 
> 标签：android, json, image, gridview

我制作了从 json 获取图像路径的 gridview 应用程序。我第一次在 SimpleAdapter 上创建我只想让我的 gridview 以可绘制的形式显示图像。但是当我运行我的应用程序时，它会在 onPostExecute 中显示一个错误。

如何使用可绘制图像或来自 json 的图像在 gridview 中显示图像？

```
public class MainActivity extends Activity {

String strUrl = "http://192.168.10.104/adchara1/";
GridView gridView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Creating a new non-ui thread task to download json data
    DownloadTask downloadTask = new DownloadTask();

    // Starting the download process
    downloadTask.execute(strUrl);

    gridView = (GridView) findViewById(R.id.lv_countries);        
    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int positon,
                long id) {
             HashMap<String, Object> hm = (HashMap<String, Object>) gridView.getAdapter().getItem(positon);
             String imgPath = (String) hm.get("photo"); //get downloaded image path
             Intent i = new Intent(MainActivity.this, DisplayActivity.class);
             i.putExtra("ClickedImagePath", imgPath ); //put image link in intent.
             startActivity(i);
        }
    });
}

/** A method to download json data from url */
private String downloadUrl(String strUrl) throws IOException{
  String data = "";
  InputStream iStream = null;

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(strUrl);
    ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(param));
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        iStream = httpEntity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    }
    try {
        BufferedReader br = new BufferedReader(new InputStreamReader(iStream));
        StringBuilder sb = new StringBuilder();
        String line = "";
        while((line = br.readLine()) != null){
            sb.append(line + "\n");
        }
        iStream.close();
        data = sb.toString();
    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }
    return data;
}

/** AsyncTask to download json data */
private class DownloadTask extends AsyncTask<String, Integer, String>{
     String data = "";
     InputStream iStream = null;
    @Override
    protected String doInBackground(String... url) {
        try{
            data = downloadUrl(url[0]);
        }catch(Exception e){
            Log.d("Background Task",e.toString());
        }
        return data;
    }

    @Override
    protected void onPostExecute(String result) {

        // The parsing of the xml data is done in a non-ui thread
        GridViewLoaderTask gridViewLoaderTask = new GridViewLoaderTask();

        // Start parsing xml data
        gridViewLoaderTask.execute(result);
    }
}

/** AsyncTask to parse json data and load ListView */
private class GridViewLoaderTask extends AsyncTask<String, Void, SimpleAdapter>{

    JSONObject jObject;
    // Doing the parsing of xml data in a non-ui thread
    @Override
    protected SimpleAdapter doInBackground(String... strJson) {

        try{
            jObject = new JSONObject(strJson[0]);
            CountryJSONParser countryJsonParser = new CountryJSONParser();
            countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("JSON Exception1",e.toString());
        }

        // Instantiating json parser class
        CountryJSONParser countryJsonParser = new CountryJSONParser();

        // A list object to store the parsed countries list
        List<HashMap<String, Object>> countries = null;

        try{
            // Getting the parsed data as a List construct
            countries = countryJsonParser.parse(jObject);
        }catch(Exception e){
            Log.d("Exception",e.toString());
        }

        // Keys used in Hashmap
        String[] from = { "frame","photo"};

        // Ids of views in listview_layout
        int[] to = { R.id.iv_frame,R.id.iv_photo};

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item
       // SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), countries, R.layout.lv_layout, from, to);
        SimpleAdapter adapter = new SimpleAdapter(getApplicationContext());
        return adapter;

    }

    /** Invoked by the Android on "doInBackground" is executed */
    protected void onPostExecute(SimpleAdapter adapter) {

        gridView.setAdapter(adapter);

        for(int i=0;i<adapter.getCount();i++){
            HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(i);
            String frameUrl = (String) hm.get("frame_path");
            String imgUrl = (String) hm.get("photo_path");
            ImageLoaderTask imageLoaderTask = new ImageLoaderTask();

            HashMap<String, Object> hmDownload = new HashMap<String, Object>();
            hm.put("frame_path", frameUrl);
            hm.put("photo_path",imgUrl);
            hm.put("position", i);

            // Starting ImageLoaderTask to download and populate image in the listview
            imageLoaderTask.execute(hm);
        }
    }
} 

public class SimpleAdapter extends BaseAdapter{
    Context myContext;
    public SimpleAdapter(Context _myContext){
        myContext = _myContext;
    }

    @Override
    public int getCount() {
        return 6;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if(view == null){
            LayoutInflater li = getLayoutInflater();
            view = li.inflate(R.layout.lv_layout, null);

            ImageView iv = (ImageView) view.findViewById(R.id.iv_photo);
            iv.setImageResource(R.drawable.ic_launcher);
        }
        return view;
    }

}

    /** AsyncTask to download and load an image in ListView */
    private class ImageLoaderTask extends AsyncTask<HashMap<String, Object>, Void, HashMap<String, Object>>{

        @Override
        protected HashMap<String, Object> doInBackground(HashMap<String, Object>... hm) {

            InputStream iStream = null;
            String imgUrl;
            String frameUrl;
            imgUrl = (String) hm[0].get("photo_path");
            frameUrl = (String) hm[0].get("frame_path");
            int position = (Integer) hm[0].get("position");

            URL url;
            URL urlFrame;
            try {
                url = new URL(imgUrl);
                urlFrame = new URL(frameUrl);
                // Creating an http connection to communicate with url
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                // Connecting to url
                urlConnection.connect();

                // Reading data from url
                iStream = urlConnection.getInputStream();

                // Getting Caching directory
                File cacheDirectory = getBaseContext().getCacheDir();

                // Temporary file to store the downloaded image
                File tmpFile = new File(cacheDirectory.getPath() + "/wpta_"+ position + ".png");

                // The FileOutputStream to the temporary file
                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                // Creating a bitmap from the downloaded inputstream
                Bitmap b = BitmapFactory.decodeStream(iStream);

                // Writing the bitmap to the temporary file as png file
                b.compress(Bitmap.CompressFormat.PNG, 100, fOutStream);

                // Flush the FileOutputStream
                fOutStream.flush();

                // Close the FileOutputStream
                fOutStream.close();

                // Create a hashmap object to store image path and its position in the listview
                HashMap<String, Object> hmBitmap = new HashMap<String, Object>();

                // Storing the path to the temporary image file
                hmBitmap.put("photo", tmpFile.getPath());
                hmBitmap.put("frame", tmpFile.getPath());

                // Storing the position of the image in the listview
                hmBitmap.put("position", position);

                // Returning the HashMap object containing the image path and position
                return hmBitmap;
            } catch (MalformedURLException e) {
                return null;
            } catch (FileNotFoundException e) {
                return null;
            } catch (IOException e) {
                return null;
            }
        }

    @Override
    protected void onPostExecute(HashMap<String, Object> result) {
        // Getting the path to the downloaded image
        String path = (String) result.get("photo");
        String framePath = (String) result.get("frame");
        // Getting the position of the downloaded image
        int position = (Integer) result.get("position");

        // Getting adapter of the listview
        SimpleAdapter adapter = (SimpleAdapter ) gridView.getAdapter();

        // Getting the hashmap object at the specified position of the listview
        HashMap<String, Object> hm = (HashMap<String, Object>) adapter.getItem(position);

        // Overwriting the existing path in the adapter
        hm.put("photo",path);
        hm.put("frame", framePath);
        // Noticing listview about the dataset changes
        adapter.notifyDataSetChanged();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

JSONParser.java

```
public class CountryJSONParser {

// Receives a JSONObject and returns a list
public List<HashMap<String,Object>> parse(JSONObject jObject){

    JSONArray jsonArray = null;
    try {
        // Retrieves all the elements in the 'countries' array
        jsonArray = jObject.getJSONArray("countries");
    } catch (JSONException e) {
        e.printStackTrace();
    }

    // Invoking getCountries with the array of json object
    // where each json object represent a country
    return getCountries(jsonArray);
}

private List<HashMap<String, Object>> getCountries(JSONArray jCountries){
    int countryCount = jCountries.length();
    List<HashMap<String, Object>> countryList = new ArrayList<HashMap<String,Object>>();
    HashMap<String, Object> country = null;

    // Taking each country, parses and adds to list object
    for(int i=0; i<countryCount;i++){
        try {
            // Call getCountry with country JSON object to parse the country
            country = getCountry((JSONObject)jCountries.get(i));
            countryList.add(country);

        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    return countryList;
}

// Parsing the Country JSON object
private HashMap<String, Object> getCountry(JSONObject jCountry){

    HashMap<String, Object> country = new HashMap<String, Object>();

    String photo="";
    String frame ="";

    try {
        photo = jCountry.getString("photo");
        frame = jCountry.getString("frame");

        country.put("frame", R.drawable.blank);
        country.put("frame_path", frame);

        country.put("photo", R.drawable.blank);
        country.put("photo_path", photo);

    } catch (JSONException e) {
        e.printStackTrace();
    }
    return country;
}

} 
```

logcat 中的错误

```
11-02 08:26:48.118: W/dalvikvm(11384): threadid=1: thread exiting with uncaught exception (group=0x40bee1f8)
11-02 08:26:48.141: E/AndroidRuntime(11384): FATAL EXCEPTION: main
11-02 08:26:48.141: E/AndroidRuntime(11384): java.lang.NullPointerException
11-02 08:26:48.141: E/AndroidRuntime(11384):    at com.myapp.MainActivity$GridViewLoaderTask.onPostExecute(MainActivity.java:187)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at com.myapp.MainActivity$GridViewLoaderTask.onPostExecute(MainActivity.java:1)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at android.os.AsyncTask.finish(AsyncTask.java:602)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at android.os.Looper.loop(Looper.java:137)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at android.app.ActivityThread.main(ActivityThread.java:4514)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at java.lang.reflect.Method.invokeNative(Native Method)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at java.lang.reflect.Method.invoke(Method.java:511)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
11-02 08:26:48.141: E/AndroidRuntime(11384):    at dalvik.system.NativeStart.main(Native Method) 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.myapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:configChanges="orientation|screenSize" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity 
        android:name=".DisplayActivity">

    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:03:49.350

这是由于 GridView 引发的 NullPointerException。因为您在创建 gridview 对象之前开始下载任务，并且在创建对象时，onPostExecute() 被调用并且它正在引发错误。您首先创建 gridview 对象并调用 DownloadTask。我从您的代码中发现了该错误，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:06:58.400

写在下面的代码行

```
// Creating a new non-ui thread task to download json data
DownloadTask downloadTask = new DownloadTask();

// Starting the download process
downloadTask.execute(strUrl); 
```

后

```
gridView = (GridView) findViewById(R.id.lv_countries); 
```

它会解决你的问题。

# javascript - 使用 Kinetic Js 画圆

> ID：13188021
> 
> 赞同：3
> 
> 时间：2012-11-02T01:29:33.267
> 
> 标签：javascript, html, kineticjs

我正在尝试使用动态 js 框架构建一个非常基本的绘画应用程序。一切进展顺利，直到我尝试合并一个形状函数，该函数允许用户单击舞台以指定圆的中心点，拖动并释放鼠标以计算半径，然后将变量传递给构造函数并输出形状。

我的代码似乎运行良好，我将圆形对象打印到控制台，它的变量是我期望的，但由于某种原因它没有出现在我的舞台上！

下面是我的全部代码。关于圆的方法是朝向底部的。谁能明白为什么它没有出现在舞台上？！

```
 <script src="kinetic-v4.0.4.js"></script>
<script src="utils.js"></script>
<script>

    //variables
    var stage;
    var canvas;
    var context;
    var mouse;
    var startX, startY, endX, endY;
    var rad;
    var dx, dy;

    //run when the page is loaded
    function init(){

        //Create a stage object
        stage = new Kinetic.Stage({
            container: 'canvas',
            height: 400,
            width: 400,
            draggable: true,
            });

        //References
        //get references to elements within the body
        canvas = document.getElementById("canvas");
        context = canvas.getContext("2d");

        //Capture the coordinates of the mouse in relation to the canvas
        mouse = utils.captureMouse(canvas);

        //Add listener to stage.
        stage.getContainer().addEventListener("mousedown", mouseDown, false);
    }

    function mouseDown(){
        console.log("mousedown");
        stage.getContainer().addEventListener("mousemove", mouseMove, false);
        context.beginPath();
    }

    function mouseMove(){
        console.log("mousemove");
        stage.getContainer().addEventListener("mouseup", mouseUp, false);
        context.lineTo(mouse.x, mouse.y);
        context.stroke();
    }

    function mouseUp(){
        console.log("mouseup");
        stage.getContainer().removeEventListener("mousemove", mouseMove, false);
        context.closePath();
    }

    function circle(){
        //add listeners.
        stage.getContainer().addEventListener("mousedown", getCircleStart, false);
    }

    function getCircleStart(){
        startX = mouse.x;
        startY = mouse.y;
        console.log("START POINTS: X: " + startX + " " + "Y: " + startY);
        stage.getContainer().addEventListener("mouseup", getCircleEnd, false);
    }

    function getCircleEnd(){
        endX = mouse.x;
        endY = mouse.y;
        console.log("END POINTS: X: " + endX + " " + "Y: " + endY);
        dx = endX - startX;
        dy = endY - startY;
        console.log(dx + " " + dy);
        rad = Math.pow(dx, 2) + Math.pow(dy, 2);
        rad = Math.sqrt(rad);
        console.log("radius: " + rad);

        //create layer for circle
        var layer = new Kinetic.Layer();

        //draw circle
        var circle = new Kinetic.Circle({
            x: startX,
            y: startY,
            radius: rad,
            fill: 'red',
            stroke: 'black',
            strokeWidth: 4,
            visible: true
            });

        //add to layer
        layer.add(circle);
        //add layer to stage
        stage.add(layer);

        console.log(circle);
    } 
```

![Javascript 控制台](../Images/b0970f29f503641295777f394ce24330.png)

utils.js -> [http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:01:28.063

尝试添加此代码：`circle.getParent().draw()` 这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:19:45.820

JSFiddle 会很好，但乍一看，当您将形状添加到图层时，您似乎并没有重绘图层。尝试在 getCircleEnd 方法的底部调用 layer.draw()。

# html - 我有一个在弹出窗口上方的图像，我希望它在它下方

> ID：13188022
> 
> 赞同：1
> 
> 时间：2012-11-02T01:29:36.030
> 
> 标签：html, css, z-index

我有一个图像显示在弹出的窗口上，它不应该那样做。图像应位于弹出窗口下方。

我想我需要在css中做点什么？

这是图像的css：

```
.ribbon{
    background:url(../images/ribbon.png) no-repeat;
    position:absolute;
    width:152px;
    height:132px;
    z-index:999999999;
    margin:-4px 0 0 -4px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:33:02.013

只需删除或更改那个非常巨大的`z-index`，它可能比*弹出窗口*的更大`z-index`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:33:58.140

您应该设置 CSS "z-index:9999999;" 将图像上的属性设置为低于弹出窗口的 z-index 的值。

看看是否将其更改为 z-index:1; 也许修复它。

也没有窗口 css，尽管我不知道使图像出现在弹出窗口后面的数字是多少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T01:35:20.353

我认为你的 z-index 太高了。尝试将其设置为低于此值。

# sql - 此查询中 distinct 的目的是什么？

> ID：13188023
> 
> 赞同：2
> 
> 时间：2012-11-02T01:29:43.217
> 
> 标签：sql, sql-server

今天，我在这里遇到了一个关于 W3Schools 的查询：http: [//www.w3schools.com/sql/sql_view.asp](http://www.w3schools.com/sql/sql_view.asp)，它的写法如下：

```
CREATE VIEW [Category Sales For 1997] AS
SELECT DISTINCT CategoryName,Sum(ProductSales) AS CategorySales
FROM [Product Sales for 1997]
GROUP BY CategoryName 
```

我想知道`DISTINCT`在这个查询中使用的目的是什么？查询已经有结果集，所以在做之后和做之前`GROUPed BY`没有相同的机会。如果不使用，此查询的行为会有所不同吗？我的意思是如果简单地写成这样会发生什么：`CategoryName``GROUP BY``SELECT``DISTINCT`

```
CREATE VIEW [Category Sales For 1997] AS
SELECT CategoryName,Sum(ProductSales) AS CategorySales
FROM [Product Sales for 1997]
GROUP BY CategoryName 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:35:27.820

你可以删除它。它是多余的，对输出没有影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T01:39:55.893

正如您正确指出的那样， GROUP BY 已经为 group-by-columns 返回不同的值。由于该列包含在您的示例中的选择列列表中，因此 DISTINCT 不提供任何附加功能。

但是，根据查询（在这种情况下可能不是），不必要的 DISTINCT 可能会严重损害性能，因此检查 DISTINCT 在任何查询中是否真的必要总是一个好主意。

# c# - 使用 LuaInterface 将 C# 类映射到 LUA 函数

> ID：13188024
> 
> 赞同：1
> 
> 时间：2012-11-02T01:29:59.617
> 
> 标签：c#, lua, integration, luainterface

有没有办法通过加载类将类直接映射到 C# 函数？而不是制作 100 多个`RegisterFunctions`并映射它们？

例：类似的东西

```
this.lua = new LuaInterface.Lua();
RegisterAll(Class1.MainClass);
lua.DoFile(this.filePath); 
```

lua内部：

```
function Start
    MainClass.MappedPrintFunc("hihi");
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T03:27:37.527

您可以通过将 LUA 中的变量设置为导出 func 或 props 的函数来实现。

前任：

```
Class Manager()
public static GameLocalPlayer LocalPlayer { get; set; }

LuaInterace lua = new LuaInterface;
lua["variablename"]=Manager.LocalPlayer;  

---lua----
variablename.Health;
variablename:AttackTarget(target); 
```

# php - 将字符串插入字符串？

> ID：13188025
> 
> 赞同：2
> 
> 时间：2012-11-02T01:30:04.880
> 
> 标签：php

我有许多图像被上传到具有随机文件名的站点，例如

```
http://www.mysite.com/uploads/images/apicture23.jpg
http://www.mysite.com/uploads/images/anotherpicture203.jpeg
http://www.mysite.com/uploads/images/another.picture203.png
http://www.mysite.com/uploads/images/athird-picture101.gif 
```

是否有可能在 PHP 中以某种方式在 url 的文件扩展名（或）部分之前立即插入`.jpg`另一个`.jpeg` `.png`字符串`.gif`，例如`-300x200`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T01:31:57.660

```
$out = preg_replace('/\.[a-z]+$/i','-300x200\0',$in); 
```

这基本上是这样做的，从左到右阅读：

它替换以点 ( `\.`) 开头的任何内容，后跟`+`范围内的一个或多个 ( ) 字符，字符串`a-z`的末尾 ( `$`)，不区分大小写 ( `i`)，`-300x200`后跟字符串中刚刚匹配的部分 ( `\0`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:40:25.127

如果您希望在上传图像时重命名文件名，下面的类将帮助您：

```
<?php

    function thumbnail( $img, $source, $dest, $maxw, $maxh ) {      
        $jpg = $source.$img;

        if( $jpg ) {
            list( $width, $height  ) = getimagesize( $jpg ); //$type will return the type of the image
            $source = imagecreatefromjpeg( $jpg );

            if( $maxw >= $width && $maxh >= $height ) {
                $ratio = 1;
            }elseif( $width > $height ) {
                $ratio = $maxw / $width;
            }else {
                $ratio = $maxh / $height;
            }

            $thumb_width = round( $width * $ratio ); //get the smaller value from cal # floor()
            $thumb_height = round( $height * $ratio );

            $thumb = imagecreatetruecolor( $thumb_width, $thumb_height );
            imagecopyresampled( $thumb, $source, 0, 0, 0, 0, $thumb_width, $thumb_height, $width, $height );

            $path = $dest.$img."-300x200.jpg";
            imagejpeg( $thumb, $path, 75 );
        }
        imagedestroy( $thumb );
        imagedestroy( $source );
    }

?> 
```

在哪里

```
 $img         => image file name
      $source      => the path to the source image
      $dest        => the path to the destination image
      $maxw        => the maximum of the image width you desire
      $maxh        => the minimum one 
```

# c++ - 鼠标右键单击时如何获取快捷方式显示名称（c ++ / c＃）

> ID：13188027
> 
> 赞同：4
> 
> 时间：2012-11-02T01:30:10.387
> 
> 标签：c++, shell32

我正在构建一个关于filecontextmenu的dll，我需要在鼠标右键单击时获取执行路径和快捷方式displaynem。现在我可以获取路径，但不知道如何获取显示名称。EX：桌面中的IE快捷方式，我需要用户可以编辑的名称“IE”，而不是“iexplore.exe”。

这是一个非常相似的[参考](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/20/188696.aspx)，但我找不到我应该做的，当桌面上的快捷方式

如果有任何建议我将不胜感激，这是我的代码，谢谢。

```
IFACEMETHODIMP FileContextMenuExt::Initialize(
LPCITEMIDLIST pidlFolder, LPDATAOBJECT pDataObj, HKEY hKeyProgID)

if (NULL == pDataObj)
    return E_INVALIDARG;

HRESULT hr = E_FAIL;

FORMATETC fe = { CF_HDROP, NULL, DVASPECT_CONTENT, -1, TYMED_HGLOBAL };
STGMEDIUM stm;

// The pDataObj pointer contains the objects being acted upon. In this 
// example, we get an HDROP handle for enumerating the selected files and 
// folders.
if (SUCCEEDED(pDataObj->GetData(&fe, &stm)))
{
    // Get an HDROP handle.
    HDROP hDrop = static_cast<HDROP>(GlobalLock(stm.hGlobal));

    if (hDrop != NULL)
    {
        UINT nFiles = DragQueryFileW(hDrop, 0xFFFFFFFF, NULL, 0);
        if (nFiles > 0)
        {
            vecSelectFiles.clear();
            std::vector<std::wstring> vecTotalFiles;
            vecTotalFiles.clear();
            for(int i=0; i<(int)nFiles; ++i)
            {
                wchar_t wszThisFile[MAX_PATH];
                memset(wszThisFile, 0, MAX_PATH*2);
                // Here get excution path
                if(DragQueryFileW(hDrop, i, wszThisFile, MAX_PATH) != 0)
                {
                    vecTotalFiles.push_back(wszThisFile);
                    hr = S_OK;
                }
            }
        }
        GlobalUnlock(stm.hGlobal);
    }
    ReleaseStgMedium(&stm);
}

// If any value other than S_OK is returned from the method, the context 
// menu item is not displayed.
return hr; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:37:31.407

正如 MSDN 中提到的，“建议处理程序使用 Shell 项目数组，而不是像 CF_HDROP 和 CFSTR_SHELLIDLIST（也称为 HIDA）这样的剪贴板格式，因为它可以简化代码并提高性能。”

因此，首先在 pDataObj 上调用 SHCreateShellItemArrayFromDataObject() 并检索 IShellItemArray 接口。用 IShellItemArray::Count() 和 IShellItemArray::GetItemAt() 枚举它。

每个 IShellItem 对象都有一个出色的 GetDisplayName() 方法！您可以指定显示类型：

```
SIGDN_NORMALDISPLAY = 0x00000000,
SIGDN_PARENTRELATIVEPARSING = 0x80018001,
SIGDN_PARENTRELATIVEFORADDRESSBAR = 0x8001c001,
SIGDN_DESKTOPABSOLUTEPARSING = 0x80028000,
SIGDN_PARENTRELATIVEEDITING = 0x80031001,
SIGDN_DESKTOPABSOLUTEEDITING = 0x8004c000,
SIGDN_FILESYSPATH = 0x80058000,
SIGDN_URL = 0x80068000, 
```

你有 SIGDN_FILESYSPATH 和 SIGDN_NORMALDISPLAY ids :-)

# kinect - Kinect - 跟踪人群中的人 - 运动运动跟踪

> ID：13188033
> 
> 赞同：3
> 
> 时间：2012-11-02T01:30:38.763
> 
> 标签：kinect, tracking, processing

我有兴趣对 Kinect 进行编程以跟踪较大区域内的人员。

特别是，我希望使用手势来跟踪小型运动场上的运动员，以记录体育比赛中的事件。

到目前为止，除了在录制的视频上跟踪播放器的处理示例之外，我还没有找到任何这样的示例。

任何人都可以提供任何将 Microsoft 的 Kinect 技术应用于运动的示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:24:53.217

这不是 Kinect 的设计初衷，它也不会为你做任何事情。

Kinect 一次只能跟踪不超过 6 人，并且只能主动跟踪 2 人。它最适合 6 到 8 英尺外的人，并且不会再进一步​​追踪任何人。

因为你提出的 Kinect 对你没有好处。它可能会妨碍您，因为它是为有限距离内的 1-2 人设计的。使用更高质量的相机会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:14:00.437

我从未使用或尝试过 Kinect（但我真的很想买一个：）。所以我不知道它是否适合你的需要。但是Amnon Owed 提供了关于 Kinect 和处理的[精彩教程](http://www.creativeapplications.net/processing/kinect-physics-tutorial-for-processing/)。该示例是针对一个人的，但您可能会感兴趣。视频非常酷。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T05:26:05.090

有可能的。您需要脱离 Kinect SDK 中可用的骨架跟踪，并自己处理深度数据。您将需要多个 Kinect 来处理更大的区域。从天花板自上而下安装将让您使用侧视图更轻松地区分将被组合成一个多人斑点的个人。

# c++ - C++ 指针声明

> ID：13188035
> 
> 赞同：0
> 
> 时间：2012-11-02T01:30:43.617
> 
> 标签：c++, pointers

> **可能重复：**
> [在 C 中，声明指针的正确语法是什么？](https://stackoverflow.com/questions/3280729/in-c-what-is-the-correct-syntax-for-declaring-pointers)

在 C++ 中有什么区别：

```
int* a; 
```

和

```
int *a; 
```

是一样的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:32:16.993

他们是一样的。没有区别。也一样

```
int * a; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T01:32:54.240

是的。这两个构造是相同的。`int *a;`更多的是 C 风格，因为它符合 C 中“声明遵循使用”的规则。这条规则意味着你可以阅读`*a`，并且知道它给了你一个`int`.

在 C++ 中，类型更常单独使用，因此`int* a;`更典型，因为它强调它们的类型是`int*`. 在 C++ 中，“声明遵循使用”的一致性不太重要，因为无论如何都不能在任何地方工作（例如，它不适用于引用）。

请注意，如果您写`int* a, b;`（与 相同`int *a, b;`），则只有`a`一个指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T01:32:19.653

那些是一样的。您可以将星号 (*) 放在任何位置。

# python - 加载字典对象导致内存峰值

> ID：13188036
> 
> 赞同：5
> 
> 时间：2012-11-02T01:30:54.380
> 
> 标签：python, django

我有一个字典对象，其中包含我在 Django 视图中缓存和访问的大约 60,000 个键。该视图提供了基本的搜索功能，我在字典中查找搜索词，如下所示：

```
projects_map = cache.get('projects_map')
projects_map.get('search term') 
```

然而，仅仅抓取缓存的对象（在第 1 行中）会导致服务器上的内存使用量出现巨大的峰值 - 有时超过 100MB - 并且即使在返回值并渲染模板之后内存也不会释放。

我怎样才能不让记忆像这样膨胀？此外，我在获取值后尝试显式删除对象，但即使这样也不会释放内存峰值。

任何帮助是极大的赞赏。

## 更新：我最终实施的解决方案

我决定实现我自己的索引表，在其中存储键和它们的腌制值。现在，我没有`get()`在字典上使用，而是使用：

`ProjectsIndex.objects.get(index_key=<search term>)`

并取消价值。这似乎解决了内存问题，因为我不再将巨大的对象加载到内存中。它向页面添加了另一个小查询，仅此而已。似乎是完美的解决方案......现在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:40:51.810

..如何使用一些适当的缓存服务，例如[redis](http://redis.io/)或[memcached](http://memcached.org/)，而不是在内存python端加载巨大的对象？这样，如果字典增长得更多，您甚至可以在额外的机器上进行扩展。

无论如何，100MB 内存包含所有数据 + 哈希索引 + 杂项。高架; 前几天我注意到自己在退出 Python 进程之前，很多时候内存都没有被释放（我从 Python 解释器中填充了几个 gig 的内存，加载了一个巨大的 json 对象.. :)）；如果有人对此有解决方案会很有趣..

## 更新：用很少的内存缓存

只有 512MB 内存的选项是：

*   使用 redis，看看这里[http://redis.io/topics/memory-optimization](http://redis.io/topics/memory-optimization)（但我怀疑 512MB 还不够，甚至优化）
*   使用具有更多内存的单独机器（或集群，因为 memcached 和 redis 都支持分片）来保留缓存
*   使用[数据库缓存后端](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#database-caching)，速度更慢但内存消耗更少，因为它将所有内容都保存在磁盘上
*   使用[文件系统缓存](https://docs.djangoproject.com/en/dev/topics/cache/#filesystem-caching)（尽管我没有看到比数据库缓存更喜欢它的意义）

并且，在后两种情况下，请尝试拆分对象，这样您就不会一次从缓存中检索兆字节的对象。

## 更新：跨越多个缓存键的惰性字典

你可以用这样的东西替换你缓存的字典；这样，您可以继续像使用普通字典一样处理它，但只有在您真正需要时才会从缓存中加载数据。

```
from django.core.cache import cache
from UserDict import DictMixin

class LazyCachedDict(DictMixin):
    def __init__(self, key_prefix):
        self.key_prefix = key_prefix

    def __getitem__(self, name):
        return cache.get('%s:%s' % (self.key_prefix, name))

    def __setitem__(self, name, value):
        return cache.set('%s:%s' % (self.key_prefix, name), value)

    def __delitem__(self, name):
        return cache.delete('%s:%s' % (self.key_prefix, name))

    def has_key(self, name):
        return cache.has_key(name)

    def keys():
        ## Just fill the gap, as the cache object doesn't provide
        ## a method to list cache keys..
        return [] 
```

然后替换这个：

```
projects_map = cache.get('projects_map')
projects_map.get('search term') 
```

和：

```
projects_map = LazyCachedDict('projects_map')
projects_map.get('search term') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:51:19.930

我不知道 Windows 是如何工作的，但在 Linux 中，进程实际上无法将内存返回给系统。这是因为进程地址空间是连续的，并且增加内存的唯一可用系统调用是`brk()`，它只是增加了一个指针，该指针标记了进程可用的最后一个地址。

应用程序使用的所有分配器（`malloc`等）在用户空间中定义为库。它们在字节块级别上运行，`brk()`仅用于增加内部内存池。在一个正在运行的应用程序中，这个内存池被请求的块弄乱了。将内存返回给系统的唯一可能性是当池的最后一部分没有使用块时（这不太可能很大，因为即使是简单的应用程序也会分配和释放数千个对象）。

因此，由内存峰值引起的膨胀会一直持续到最后。解决方案：

*   通过优化内存使用来避免峰值，即使是由临时对象引起的（例如：逐行处理文件而不是一次读取全部内容）
*   将缓存放在另一个进程中（memcached，如第一个答案中所建议）
*   使用序列化字典 ( ) 或与进程的私有内存 ( ，共享内存)`gdbm`分离的其他存储`mmap`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:38:35.713

如果`get`在特定键上是您执行的唯一操作，为什么不将所有键分别保存在缓存中？这样一来，所有条目都将在单独的文件中结束，django 将能够[快速](https://github.com/django/django/blob/master/django/core/cache/backends/filebased.py#L131)访问它们。

更新当然会更痛苦，但你可以很好地抽象它。我能想到的第一件事是一些缓存键前缀。

代码可能看起来像`cache.get('{prefix}search_term')`那时。

**编辑：**

我们试图在这里解决错误的问题。你不需要缓存。数据得到更新，而不是转储（大约 5 分钟后）。

您需要创建一个包含所有条目的数据库表。

如果您无法通过设置访问任何数据库服务器，请尝试使用 sqlite。它是基于文件的，应该可以很好地满足您的目的。

# php - 如何在 Laravel 中为控制器添加过滤器参数？

> ID：13188040
> 
> 赞同：2
> 
> 时间：2012-11-02T01:32:06.377
> 
> 标签：php, laravel

我想在 Laravel 框架中的过滤器中添加一些参数。
问题是，我从控制器的构造函数调用我的过滤器，而不是路由。

我的代码如下所示：

**控制器**

```
public function __construct()
{
    $this->filter('before','test');
} 
```

**筛选**

```
Route::filter('test',function(){
    // echo parameters passed to filter in controller.
}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T02:07:01.650

对于其他人来说，这很简单..

**控制器**

```
$this->filter('before','test',array('value')); 
```

**筛选**

```
Route::filter('test',function($label){
    echo $label; // Outputs the 'value'
}); 
```

# bash - 如何在bash中的循环中传递变量

> ID：13188041
> 
> 赞同：0
> 
> 时间：2012-11-02T01:32:10.003
> 
> 标签：bash

我在 Internet (https://calomel.org/youtube_wget.html) 上找到了一个 wgets youtube 视频的脚本。

因此，通过简单的键入，该脚本就可以完美地用于单个剪辑`./yt.pl youtubeLink`。但我想扩大它并从文本文档 (download.txt) 中的链接中使用它。所以我在 bash 中创建了一个循环。循环看起来像这样。

`

```
 #!/bin/bash
wordCount=$(cat download.txt | wc -l)

for (( number=$wordCount; $number-lt$wordCount;number--))
do
        link=$(sed -n $number"p" download.txt)
        "./yt.pl "$link
        sleep 3
done 
```

唯一的问题是它不起作用。它给了我以下错误消息。

```
/auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4: No such file or directory 
```

如果我只是运行这部分错误消息`./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4`，它工作正常。

这是 ssh 窗口的完整输出

```
./auto.sh: line 7: ./yt.pl : No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=XEAL23g2V6g: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=IaADyDhg-CY: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=JmY4RCCCll4: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=D0p5RKzuJLU: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=sY6-PY9wWQ8: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=TRwcozVntTE: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=ft5hp90FV74&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=DB1E4M7bmeM: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=t6w4yeT6OTg&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=t-m88UZXn_8&feature=related: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=iix8NxDN6mQ&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=O3DvUKEZP_0&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=IKVdSNfbilo: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=V3kjn1zM7OI&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=EhJheZepqqY&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=59Oj_xpxh_g&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=DLP8XMMEG0A: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=pCY5ZRXQ3u0&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=a8CHv8n6qpI&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=afJXLpC95lQ&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=6q4dPeUjmu8&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=0BY5V56ZW3w&feature=relmfu: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=9CO__3nHsg8: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=bzgZlV3LzFA&feature=fvst: No such file or directory
./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=FgS1UQvYtcU&feature=fvst: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:35:54.643

尝试这样做：

```
#!/bin/bash

while read link; do
    ./yt.pl "$link" && sleep 3
done < download.txt 
```

# python - Python MP3 ID3 标签编辑器

> ID：13188043
> 
> 赞同：7
> 
> 时间：2012-11-02T01:32:17.177
> 
> 标签：python, id3

为我朋友的 MP3 播放器重新组织一个大型 MP3 库，我需要将 Title ID3 标签命名为与文件名相同，并且通过 Windows 属性执行此操作需要很长时间，所以我想知道是否有人知道如何制作一个 Python 脚本，快速连续地对目录中的所有 MP3 执行此操作。或者至少是一个可安装在 Windows 上的库的链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T03:01:19.970

看这个：

*   [Python 中的 ID3 标记](http://id3-py.sourceforge.net/)
*   [id3reader](http://nedbatchelder.com/code/modules/id3reader.html)

[Dive Into Python](http://www.diveintopython.net/object_oriented_framework/index.html)也以 MP3 ID3 标签为例。

不要忘记[PyPI](http://pypi.python.org/pypi) - Python 包索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-24T23:04:02.673

这是我为此编写的一个 python 脚本[https://gitlab.com/tomleo/id3_folder_rename](https://gitlab.com/tomleo/id3_folder_rename)

```
#! /usr/bin/python

import os
import re
import glob
import subprocess

from mutagen.easyid3 import EasyID3

path = os.getcwd()
fpath = u"%s/*.mp3" % path
files = glob.glob(fpath)

for fname in files:
    _track = EasyID3(fname)
    track_num = _track.get('tracknumber')[0]
    track_title = re.sub(r'/', '_', _track.get('title')[0])
    if '/' in track_num:
        track_num = track_num.split('/')[0]
    if len(track_num) == 1:
        track_num = "0%s" % track_num
    _valid_fname = u"%s/%s %s.mp3" % (path, track_num, track_title)
    if fname != _valid_fname:
        subprocess.call(["/bin/mv", fname, _valid_fname]) 
```

它使用 mutagen python 库来解析 ID3 信息。您必须调整子进程调用它以使其与 Windows 一起工作，但这应该让您知道如何做到这一点。希望这可以帮助。

# c++ - 子类无法访问父类的变量

> ID：13188045
> 
> 赞同：1
> 
> 时间：2012-11-02T01:32:19.333
> 
> 标签：c++, pointers, inheritance, virtual-functions

我正在制作一个程序，其中我有一个`Square`类是类的子`Shape`类

但是当子类尝试从父类访问变量时，我的程序崩溃了。

这是我的代码：

```
class Shape2D
{
public:
    string shape;
    void setShape(string newShape);
    string getShape();

    string specialType;
    void setSpecialType(string newSpecialType);

    vector <int> shapeXCoordi;
    void setshapeXCoordi(int newshapeXCoordi);

    vector <int> shapeYCoordi;
    void setshapeYCoordi(int newshapeYCoordi);
    void toString();

    virtual int computeArea()
    {
        return 0;
    }
    void displayArea();
}; 
```

出于测试目的，我只让它`computeArea()`返回 x 坐标。

```
class Square : public Shape2D
{
public:
    int computeArea()
    {
        return shapeXCoordi[0];
    }
};

int main()
{
    if (aShape2D[0].getShape() == "Square")
    {
        Shape2D *pShape2D;
        pShape2D = &aSquare;

        cout << "Area: " << pShape2D -> computeArea()  << endl;
    } 
} 
```

我做了几个测试，如果我要更改`return shapeXCoordi[0];`为`return 123;`，它工作正常。

我也试过`return shape;`，但它不会显示任何东西，虽然这一次，它不会崩溃。

所以我猜想`SquareClass`从`shapeXCoordi[0]``ShapeClass`

任何人都可以在这种情况下启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:22:38.373

您需要先调用 setshapeXCoordi 在构造函数中初始化 shapeXCoordi。由于您正在访问 shapeXCoordi（一个未初始化的向量），因此其中没有任何元素。因此，当您使用 [0] 访问它时，它会返回错误。

您可以向 computeArea() 添加完整性检查，以确保在访问之前 shapeXCoordi 中有一个元素：

```
int computeArea()
{
    assert(shapeXCoordi.size() != 0);
    return shapeXCoordi[0];
} 
```

此外，我建议使用 .at(0) 而不是 [0]，这样您可以获得实际的错误处理而不是崩溃。

# javascript - VideoJS/HTML5 视频 - 停止所有视频？

> ID：13188046
> 
> 赞同：1
> 
> 时间：2012-11-02T01:32:19.203
> 
> 标签：javascript, jquery, html, wordpress, html5-video

我正在使用 VideoJS 的 WordPress 插件 (http://wordpress.org/extend/plugins/videojs-html5-video-player-for-wordpress/) 在网站上显示自托管视频。视频列在图库中，单击时每个视频都会在模式窗口中打开。这很好用，但是当模式窗口关闭时，视频会继续在后台播放。

有没有办法使用 jQuery 停止或终止页面上的所有 HTML5 视频？我的想法是，当模式窗口关闭时，我将运行这个“停止”功能（如果它存在的话）。

谢谢。

# cuda - 如何在 Linux 中使用 NVIDIA Nsight 分析 PyCUDA 代码？

> ID：13188049
> 
> 赞同：2
> 
> 时间：2012-11-02T01:32:47.843
> 
> 标签：cuda, profiling, profiler, nvidia

[这个问题与如何使用 Visual Profiler 分析 PyCuda 代码](https://stackoverflow.com/questions/6857384/how-to-profile-pycuda-code-with-the-visual-profiler?rq=1)几乎相同？除了用于 Linux 的带有 CUDA 5 的新 NVIDIA Nsight IDE。

我有一个 PyCUDA Python 脚本，我想使用精美的 Nsight 对其进行分析。

我设置了一个构建外部工具配置，指向示例脚本（具有可执行权限，包括在下面）。然后我可以运行它，并在控制台中查看打印输出。然后我进入 Profile 模式并单击 Run -> Profile---我在控制台中看到打印输出，但看不到分析器信息。当我在 Nsight 中运行 C/CUDA 程序时，如何获得时序图和占用计算器以及 NVIDIA 对我的代码的建议？

这里的总 IDE 菜鸟（主要是命令行），如果我的问题不包含关键信息，对不起。Ubuntu 11.10，PyCUDA 2012.1。

![Nsight 截图](../Images/73c06b663f5a26e39646b23b9ad54d5e.png)

例子.py：

```
#!/usr/bin/env python
import pycuda.autoinit
import pycuda.driver as drv
import numpy

from pycuda.compiler import SourceModule

mod = SourceModule("""
__global__ void multiply_them(float *dest, float *a, float *b)
{
  const int i = threadIdx.x;
  dest[i] = a[i] * b[i];
}
""")

multiply_them = mod.get_function("multiply_them")

a = numpy.random.randn(400).astype(numpy.float32)
b = numpy.random.randn(400).astype(numpy.float32)

dest = numpy.zeros_like(a)
multiply_them(
        drv.Out(dest), drv.In(a), drv.In(b),
        block=(400,1,1), grid=(1,1))

print "error:", numpy.sum(numpy.abs(dest - a*b).ravel())
print "Done"
#pycuda.autoinit.context.detach() # seems to break PyCUDA 2012.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T00:12:41.450

Nsight Eclipse 版目前不支持调试 PyCUDA 应用程序。

您可以尝试的一件事（我自己没有尝试过）：

1.  在主菜单上，选择 Run->Profile Configurations...
2.  输入您的 Python 解释器（例如“/usr/bin/python”）作为“C/C++ 应用程序”
3.  在“项目”列表中指定任何现有项目。
4.  在“参数”选项卡上指定脚本文件的路径。
5.  按右下角的“个人资料”。

我没有安装 pycuda，所以分析你的脚本失败了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:31:25.430

我曾经`nvvp`得到时间线和程序分析。只是`chmod 755`脚本并`#!/usr/bin/env python`在顶部添加一个并将其提供给 nvvp。

# java - 将 ArrayList 从 Servlet 传递到 JSP 时出错

> ID：13188051
> 
> 赞同：3
> 
> 时间：2012-11-02T01:32:54.627
> 
> 标签：java, mysql, jsp, servlets, arraylist

我有一个重要的问题，但对我的英语感到抱歉，我只知道基本的。好吧，我的问题是我将 ArrayList 从 servlet 传递到 jsp 页面时出错：

```
<% ArrayList<Usuario> u= (ArrayList<Usuario>)session.getAttribute("listado");%>
<table align="left" cellpadding="0" cellspacing="1">
    <tr bgcolor="blue">
        <td>Usuario</td><td>Nombre</td>
        <td>Apellido</td><td>Clave</td> 
    </tr>
<% for(int i=0;i<u.size();i++){ %>
<% Usuario usuario = u.get(i); %>
<tr>
<td> <%= usuario.getUsuario() %></td>
<td> <%= usuario.getNombre() %></td>
<td> <%= usuario.getApellido() %></td>
<td> <%= usuario.getClave() %></td>
</tr>
<%} %>

</table> 
```

这就是我这样做的方式，但我收到以下错误：

```
<% for(int i=0;i<u.size();i++){ %> 
```

我做错了什么？我的servlet方法也是这样的：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    RequestDispatcher rd;

    try {
        Connection cn = MySQLConnection.obtenerConexion();
        String sql = "select * from tb_usuario";
        PreparedStatement ps = cn.prepareStatement(sql);
        ResultSet rs = ps.executeQuery();
        ArrayList<Usuario> listado = new ArrayList<Usuario>();
        while (rs.next()){
            Usuario usu = new Usuario(rs.getString(1),rs.getString(2),rs.getString(3),rs.getString(4));
            listado.add(usu);
        }
        request.setAttribute("listado", listado);
        request.getRequestDispatcher("/listado.jsp");
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我希望你能帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:37:14.753

您不应该在 JSP 中使用 scriptlet。您应该在 JSP 中使用 EL 和标签。

例如

```
${listado} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T01:38:28.197

您在`request`从 检索时在对象中设置变量`session`，因此该问题不存在。

您正在将属性设置`doPost`如下“：

```
 request.setAttribute("listado", listado); 
```

您正在检索 JSP 中的属性，如下所示：

```
 <% ArrayList<Usuario> u= (ArrayList<Usuario>)session.getAttribute("listado");%> 
```

请使用相同的范围`session`或`request`在两个地方使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T01:37:08.683

`scriptlets`不鼓励在 ajsp 页面中使用，请`JSTL tags`改用。用于`c-foreach tag`在您的jsp 页面中迭代您的arrayList。并且您正在请求范围内设置一个属性，并尝试在您的 jsp 的会话范围内获取它。

这是解释 c-foreach 标签[的链接](http://www.crazysquirrel.com/computing/java/jsp/jstl-forEach.jspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T01:41:53.193

您正在将值设置为请求范围

```
 request.setAttribute("listado", listado); 
```

但随后尝试在会话范围内访问它。

```
 session.getAttribute("listado"); 
```

由于这个你可能会得到一个空指针异常

```
 u.size()... 
```

尝试在请求范围内访问它

```
 request.getAttribute("xxxxxx") 
```

尽量避免在 JSP 中添加 java 代码，这是一种不好的做法。请改用 EL 和 JSTL。你也可以到代码中的铸造部分..

# ruby-on-rails - Rails 控制器方法执行

> ID：13188055
> 
> 赞同：2
> 
> 时间：2012-11-02T01:33:40.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, refresh

假设我有一个 Rails 控制器方法，该方法在用户提交表单时执行。现在，用户提交表单，当方法运行时（并且没有向用户呈现下一页），用户点击“刷新”。会发生什么？该方法会停止运行并重新启动，还是会有另一个线程再次运行该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:48:57.447

我必须自己找到答案，这就是我发现的（使用 chrome 检查器上的网络选项卡）

浏览器发送以下请求：

*   GET /profile/123/edit（用户打开编辑表单）
*   PUT /profile/123（用户提交表单）

用户点击刷新，导致：

*   获取 /profile/123/编辑

换句话说，它不会重新提交表单，而是重新调出编辑表单。

现在......如果他们没有点击刷新他们第二次点击提交，那将发送第二次

*   放置 /profile/123

这将再次调用您的控制器方法。

如果这是一个问题，您可能需要添加一些逻辑来忽略或以其他方式处理后续提交（简单状态机？）。还记得那些电子商务网站在你买东西后会有“不要点击提交两次”之类的消息的日子......他们没有那个逻辑:)

# jquery - 使用 JQuery 的水平页面动画

> ID：13188057
> 
> 赞同：0
> 
> 时间：2012-11-02T01:33:48.093
> 
> 标签：jquery

我正在尝试做一个带有水平页面动画的网站。目前，我正在使用在此站点上找到的插件。[http://manos.malihu.gr/horizo​​ntal-page-animation-to-id-with-jquery/](http://manos.malihu.gr/horizontal-page-animation-to-id-with-jquery/)

这是我的问题：

我决定添加更多页面，例如#c7 和#c8。我还将容器的宽度调整为 13500px 以适应 8 个页面。现在，如果您单击内容 7 和内容 8，则滑动可以工作。但是，如果您从第 8 页单击第 1 - 7 页，它将捕捉到这些页面。我怎样才能有一个干净的页面过渡？例如，如果您从第 6 页单击第 4 页，则过渡是平滑的。

我已经浏览了 js 文件，并使用了 css，但我似乎无法解决我遇到的问题。希望能有一双新的眼睛来研究这个谢谢。

希望你能帮忙。

编辑：添加了指向示例页面的链接。尝试单击第 8 页或第 9 页。在该页面中，单击第 1 -7 页。它有那个活泼的动画，并且过渡并不平滑。

[http://dl.dropbox.com/u/57617407/Websites/horizo​​ntal-animate-page-to-id-jquery.html](http://dl.dropbox.com/u/57617407/Websites/horizontal-animate-page-to-id-jquery.html)

非常感谢。

*   哈基莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T00:09:33.850

### 我对此进行了调查。*很快：使用您那里拥有的更新版本的库。*

### “有点”更长的解释：

**首先 - 这是什么？**发生“活泼”动画是因为单击（在动画开始时）它会立即将容器上的“左”降至 0（无论您选择什么）。然后它平滑地将“左”属性设置为您选择的条目（从零开始）。而且因为它必须滚动浏览所有条目（就像选择了第一个条目一样），这看起来很尴尬。人眼无法注意到这种快速变化。调试器是我们的朋友。

**接下来 - 什么时候发生？**通过反复试验，我发现了一个条件：如果在动画开始时“左”甚至小于-10000px（或者可能是-11000，不确定）。

**最后 - 为什么会发生？**答案很简单。这是一个错误。这已经被修复了。因此，请尝试将支持此页面的所有脚本更新为最新版本。[这就是我发现的变化（可点击）。](https://github.com/jquery/jquery/commit/4eeae8b0bc789ad525e98568cffb37b04b27ae84)

我是如何发现的：

*   如果您选择了一个已经被选中的条目怎么办？大多数行为正常 - 保持空闲状态。但是最后一个会下降到第一个，然后自己制作动画。
*   Chrome 开发者工具可以创造奇迹（Chrome 中的 F12）。类似的东西：Opera 中的 Dragonfly（基于 Presto，即 12.XX 或更早版本，在 v15 中与 Chrome 中的相同）和 Firefox 中的 Firebug。
*   我[在 jQuery bug tracker (clickable as well) 上偶然发现了这个条目](http://bugs.jquery.com/ticket/7287)，它可能包含立即修复的信息，无需更新。如果您不介意挖掘缩小的 JS，这很难。
*   选择具有第一个活动的最后一个条目会产生与您正在谈论的“活泼动画”完全相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:45:09.100

它似乎在演示页面[http://manos.malihu.gr/tuts/horizo​​ntal](http://manos.malihu.gr/tuts/horizontal-animate-page-to-id-jquery.html) -animate-page-to-id-jquery.html 上工作得很好（我用 firefox 10 和 chromium 22 测试过），所以我怀疑问题是与您页面中的其他脚本有冲突..

我的建议是，尽量禁用其他可能干扰的东西，然后（如果滑动效果正常）重新启用它们，以找出导致故障的原因。

# c# - HttpWebRequest 底层连接已关闭

> ID：13188058
> 
> 赞同：4
> 
> 时间：2012-11-02T01:33:57.067
> 
> 标签：c#, post, httpwebrequest

我正在通过网络服务使用`HttpWebRequest`字节`POST`数组图片，图片大小类似于`byte[4096]`

代码：

```
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(wsHost);
webRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip,deflate");
webRequest.Headers.Add(HttpRequestHeader.KeepAlive, "true"); 
```

我收到一个错误：

```
The underlying connection was closed. A connection that was expected to be kept alive was closed by the server 
```

是服务器问题，还是我发帖问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T01:41:03.813

这可能是很多事情。否则可以连接到服务器吗？

如果是这样，请尝试通过以下方式关闭 Expected 100 Continue（在您发布 POST 之前）

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

> 根据 HTTP 1.1 协议，当发送这个 header 时，表单数据不会随初始请求一起发送。相反，如果实施正确，此标头会发送到 Web 服务器，该服务器会响应 100（继续）。但是，并非所有 Web 服务器都能正确处理此问题，包括我尝试向其发布数据的服务器。

通过[http://haacked.com/archive/2004/05/15/http-web-request-expect-100-continue.aspx](http://haacked.com/archive/2004/05/15/http-web-request-expect-100-continue.aspx)

如果这不起作用另一个资源：[http](http://geekswithblogs.net/Denis/archive/2005/08/16/50365.aspx) ://geekswithblogs.net/Denis/archive/2005/08/16/50365.aspx表明许多人已经通过将他们的请求制作为 HTTP 1.0 请求来解决：

```
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(wsHost);
webRequest.KeepAlive = false;
webRequest.ProtocolVersion=HttpVersion.Version10; 
```

# c# - C# 合并两个 SortedLists (Union?)

> ID：13188060
> 
> 赞同：7
> 
> 时间：2012-11-02T01:34:35.080
> 
> 标签：c#, c#-4.0, sortedlist

我正在寻找加速合并两个`SortedLists`.

C# 4.0 通用`SortedList`： http: [//msdn.microsoft.com/en-us/library/ms132319 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms132319(v=vs.100).aspx)

```
public Trait getTrait(decimal thisValue)
{       
    if (ParentStructure != null && ParentStructure.RankedTraits.Count > 0)
    {
        SortedList<decimal, Trait> tempTraits = this.RankedTraits;

        // Improve here (union?)
        foreach (KeyValuePair<decimal, Trait> kvp in (ParentStructure.RankedTraits))
        {
            if (!tempTraits.ContainsKey(kvp.Key)) 
            { 
                tempTraits.Add(kvp.Key, kvp.Value); 
            }
        }
        return _getTrait(tempTraits, thisValue);
        }
    }
    return _getTrait(_rankTraits, thisValue);
} 
```

我认为联合而不是`foreach`循环会更快，但我不知道如何在`SortedList`. 如果有人可以帮助我解决这个问题，我将不胜感激。

此外，如果总体上有更好的方法，我愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:36:37.297

我能想到合并两个实例的唯一方法是`SortedList`将它们合并，然后转换为查找，然后获取查找集合的第一个元素以制作字典。

我需要制作一本字典，因为`SortedList`它只支持一一添加。因此，唯一的其他选择是将字典注入`SortedList`构造函数。

底线：我认为您当前的代码相当不错。LINQ 可以帮助将代码减少到大约 2 行（如果您是受虐狂，则可以减少 1 行）。

```
SortedList<decimal, Traits> listA = new SortedList<decimal, Traits>();
SortedList<decimal, Traits> listB = new SortedList<decimal, Traits>();

listA.Add(1m, new Traits { FieldName = "One" });
listA.Add(2m, new Traits { FieldName = "Two" });
listA.Add(3m, new Traits { FieldName = "Three" });

listB.Add(1m, new Traits { FieldName = "One" });
listB.Add(4m, new Traits { FieldName = "Four" });
listB.Add(5m, new Traits { FieldName = "Five" });

var listUnion = listA.Union(listB).ToLookup(k => k.Key, v => v.Value)
                     .ToDictionary(k => k.Key, v => v.First());
var listMerged = new SortedList<decimal, Traits>(listUnion); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T01:40:21.173

SortedSet 有一个 UnionWith 方法，可以满足您的要求。我创建了自己的 SortedSet 实现，它执行得非常快。

[http://msdn.microsoft.com/en-us/library/dd411939.aspx](http://msdn.microsoft.com/en-us/library/dd411939.aspx)

没关系，我重新阅读了您的问题，您正在使用列表实现；但是，如果您可以找到一种方法来创建 EqualityComparer 而不是使用特定的键，则可以使 SortedSet 适应您的目的。

# javascript - document.body.style.backgroundImage 不能跨浏览器工作

> ID：13188065
> 
> 赞同：4
> 
> 时间：2012-11-02T01:35:05.833
> 
> 标签：javascript, css, cross-browser, styles, background-image

我正在编写一个函数来在明暗之间切换身体背景，包括平铺图像和备用背景颜色。在 index.html 中，我的 body 标签是：

```
<body style="background-color:#111111; background-image:url('dvsup.png');"> 
```

看来我必须将我想通过 javascript 更改的样式*放在*index.html 中，否则它不起作用。至少，不是在 IE9 中。

这是我的 script.js 中的代码片段：

```
function _(el){return document.getElementById(el);}
// this just acts as shorthand

//here's the problematic function:
function light(){
    _("lights").className=
    (_("lights").className==="deselected")?
    "selected":"deselected";

    document.body.style.backgroundColor=
    (document.body.style.backgroundColor==="#111111")?
    "#EFEFEF":"#111111";

    document.body.style.backgroundImage=
    (document.body.style.backgroundImage==="url('dvsup.png')")?
    "url('dvsupw.png')":"url('dvsup.png')";} 
```

这一切都在工作计算机上的 IE9 中完美运行。当一个按钮调用“light()”时，它会改变背景图像和颜色，以及按钮本身的类。在 Chrome 和 Chromium（在家）中，它分崩离析。将 className 从“selected”更改为“deselected”有效，但其余部分无效。

奇怪的是，如果我将“===”标识符更改为“style.backgroundColor”和“style.backgroundImage”的“=”分配器，在 Chrome 中，调用“light()”时背景图像*将更*改为“dvsupw.png” ，但不会变回来。

我错过了一些明显的东西吗？这怎么行不通？

如果我不清楚，请告诉我。

谢谢。铝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:01:41.310

为什么不尝试使用 CSS 设置背景颜色，然后使用调用它的 jQuery 创建一个函数。像这样的东西：

```
background-color:#111;
var color = $(this).css("background-color");
/* here put your conditional for the color */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:56:15.627

假设您不希望与影响相同属性的其他函数发生冲突而产生奇怪的行为，只需使用一个 if。这也避免了奇怪的 URL 问题。

```
function light(){
    var lights = _('lights');
    if('selected' === (lights.className = (lights.className==='deselected'?'selected':'deselected')) ){
        document.body.style.backgroundColor = '#111111';
        document.body.style.backgroundImage = 'url(\'dvsup.png\')';
    }else{
        document.body.style.backgroundColor = '#EFEFEF';
        document.body.style.backgroundImage = 'url(\'dvsupw.png\')';
    }
    // ...
} 
```

或者正如其他人建议的那样，将 css 保留在 css 中，然后更改类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T01:56:24.197

我不能谈论 IE，因为我没有在这里测试，但我在 Chrome 和 Firefox 中测试了您的代码，并且存在差异：

*   Chrome 似乎忽略了引号（单引号或双引号），并将您的网址更改为完整的网址，以`http://...`. 所以你必须检查`=== url(http://domain.com/path/to/dvsup.png)`.

*   Firefox 不会更改您的 url，但无论您使用什么引号（或根本没有引号），它都会用双引号替换它。所以在 Firefox 上你必须检查`=== url("dvsup.png")`.

正如我所说，我不了解 IE，但只是比较 Chrome 和 Firefox，它看起来已经很乱了。我会遵循@epascarello 的好建议。您正在切换类`#lights`，那么为什么不也设置类`<body>`，并在 CSS 上为这两个类定义背景颜色和图像呢？

# php - 使用 Zend 事务时无法从非活动的 MySql 服务器捕获 PHP 异常

> ID：13188070
> 
> 赞同：0
> 
> 时间：2012-11-02T01:35:26.820
> 
> 标签：php, zend-framework, transactions, try-catch

我正在尝试在 Zend 框架中使用事务并拥有一个工作脚本。

然而，在测试中，我注意到一个 try/catch 函数将捕获任何异常，除了由 Mysql 服务器不活动引起的异常。

这应该发生吗？如果我的服务器崩溃了，我担心会返回一个丑陋的 Zend 异常，并且应用程序将停止优雅地失败。

我的代码如下所示：

```
function insertInbox ($userId, $mail_id )
{   

    $db = Zend_Db_Table::getDefaultAdapter();  

    $table = new Application_Model_DbTable_Inbox; 

    try {
        $db->beginTransaction();

        $data = array (
                   'user_id'    => $userId,
                   'mail_id'    => $mail_id
                   );

        $insertedId[] = $table -> insert($data);

        $db -> commit();

        return $insertedId;
        }

    catch(exception $e){ 
        $db->rollback();
        return "insert failed";//.$e;
        }   
}

$tt = insertInbox ( 666,666);   
print_r($tt); 
```

捕获到类似异常的重复条目，并返回临时自定义错误消息 -*插入失败*。但是如果我关闭数据库服务器，php catch 不会捕获这个错误：

```
**Message:** SQLSTATE[HY000] [2002] No connection could be made because the target machine actively refused it. 
```

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:11:40.927

PHP 的一些数据库扩展尝试在没有建立数据库连接并调用函数时创建数据库连接，这需要一个。在这种情况下`$db->rollback()`，它本身会引发异常。

# parsing - Flex中#define不完整时如何显示错误？

> ID：13188081
> 
> 赞同：0
> 
> 时间：2012-11-02T01:36:20.627
> 
> 标签：parsing, lex, flex-lexer, lexical-analysis

当用户输入不完整的定义时，我试图向屏幕显示错误输出，例如：

```
#define A  // this is wrong , error message should appear

#define A 5 // this is the correct form , no error message would be presented 
```

但它不起作用，这是代码：

```
%{
#include <stdio.h>
#include <string.h>
%}

%s FULLCOMMENT
%s LINECOMMENT
%s DEFINE
%s INCLUDE
%s PRINT
%s PSEUDO_C_CODE

STRING [^ \n]*

%%

<FULLCOMMENT>"*/"   {  BEGIN INITIAL; }
<FULLCOMMENT>.      { /* Do Nothing       */ }

<INCLUDE>"<stdio.h>"|"<stdlib.h>"|"<string.h>"  { BEGIN INITIAL;  }
<INCLUDE>.      { printf("error\n");    return 0 ;  }

<DEFINE>[ \t]       {  printf("eat a space within define\n"); } 
<DEFINE>{STRING}    {  printf("eat string %s\n" , yytext);}
<DEFINE>\n      {  printf("eat a break line within define\n"); BEGIN INITIAL; }

"#include"      {   BEGIN INCLUDE;  }
"#define"       {   printf("you gonna to define\n");   BEGIN DEFINE;    }
"#define"+.             {   printf("error\n");  }                                                                                                                                   

%%

int yywrap(void)  { return 1;  }  // Callback at end of file
int main(void)  { 
    yylex(); 
    return 0 ; 
} 
```

我哪里做错了 ？

这是输出：

```
a@ubuntu:~/Desktop$ ./a.out
#define A 4
error
A 4
#define A
error
A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:40:21.973

规则“#define”+。即使输入正确，它也更长并且优先于早期的#define。你可以这样说：-

"#define"[:space:]*$ {printf("error\n"); }

考虑使用带有 flex 的 -dvT 选项来获得详细的调试输出。此外，我不确定您是否需要如此广泛地使用状态来处理除了评论之外的任何事情。但你会更清楚。

# ios - 获取 UIView/MapKit 视图的实际大小

> ID：13188082
> 
> 赞同：0
> 
> 时间：2012-11-02T01:36:23.707
> 
> 标签：ios, uiview, mkmapview

如何获得 MKMapView 的实际高度（不是界面生成器中指定的高度）。

这是我的例子。我在包含地图的界面构建器中创建了一个视图，引用为**IBOutlet MKMapView* worldmap**。

![在此处输入图像描述](../Images/999eabde7823367bf19dcb01dcd6e50b.png)

这个视图的实际大小（见右图）与 Interface Builder 中指定的不同（见左图），因为我还添加了一个导航栏（通过代码），并且地图/视图的高度根据设备屏幕（4 或 3,5"）。

但是，当我使用...

```
worldmap.frame.size.height 
```

...我总是在 Interface Builder 中设置大小，而不是经过调整*的真实*大小。

如何获得实际尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T19:21:21.847

I found the answer [here](https://stackoverflow.com/questions/6018818/why-doesnt-my-root-views-height-take-account-of-its-navigation-bar). I tried to get the height in the **viewDidLoad** function which gets called before the navigation bar is added. The solution is to get the frame height in the **viewWillAppear** function instead.

# c# - 如果两个锯齿状数组相等，您如何进行单元测试？

> ID：13188088
> 
> 赞同：3
> 
> 时间：2012-11-02T01:37:12.593
> 
> 标签：c#, c#-4.0

我有一个手动提取日期的功能。

```
[TestMethod]
public void TestRemoveTwoDates()
{
    String test = "at 06/2/2012 to 12/10/2012";
    int[][] actual = String_Parser.RemoveTwoDates(test, "to");
    int[][] expected = new int[2][];
    expected[0] = new int[3] { 6, 2, 2012 };
    expected[1] = new int[3] { 12, 10, 2012 };

    CollectionAssert.AreEqual(expected, actual);
} 
```

PS 浏览 SO，我意识到返回数组不是一个好习惯，因为它们是可变的。但我仍然想知道如何测试这个，而不是使用循环断言数组中的每个元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:12:36.530

由于您不能使用使用引用而不是数组内容的哈希码，因此要采取的方法是在嵌套循环中迭代所有值，逐个比较值（如[stackoverflow.com/questions/2893297/iterate- multi-dimensional-array-with-nested-foreach-statement](http://stackoverflow.com/questions/2893297/iterate-multi-dimensional-array-with-nested-foreach-statement) ），使用您在第一次不匹配时设置为 false 的布尔值，并在单元测试中断言该布尔值为*true 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:40:19.703

查看[https://fluentassertions.com/introduction](https://fluentassertions.com/introduction)中的 Collection 部分，它可能会对您有所帮助

# python - 使用装饰器在 Python 中注入函数

> ID：13188091
> 
> 赞同：2
> 
> 时间：2012-11-02T01:37:27.920
> 
> 标签：python, function, decorator, inject

```
import functools
import logging
def logDeprecated( msg=None, *args, **kwargs ):
    """Log a message at level 'WARNING'

    Args:
        msg=None : (str)
            The message you wish to log.
            If no msg is passed, default to 'This function has been deprecated.'
            All other args are passed directly to logging.Logger.log().

    Keyword Args:
        category : (str)
            The category for the message to be logged.  If not
            specified, then an appropriate category will be
            determined based on the calling context.

        All other keyword args are passed directly to logging.Logger.log().

    Raises:
        n/a

    Returns:
        n/a

    """
    if not msg:
        msg = "This function has been deprecated."

    # Make sure category is stripped from kwargs before passing to log().
    cat = kwargs.pop('category', None)
    if not cat:
        cat = _getLoggingCategory()
    cat = "{0}.DEPRECATED".format(cat)

    logging.getLogger( category=cat ).log( logging.WARNING, msg, *args, **kwargs )

def decoratedLogDeprecated(func):
    def thisFunc(*args, **kwargs):
        func(*args, **kwargs)
        logDeprecated()
    return wraps(func)(thisFunc)

@decoratedLogDeprecated
def somefunc():
    print "This used to work"

def main():
    somefunc()

if __name__ == 'main':
    main() 
```

正在记录的行号是 main 中的行号。实际上，它应该在实际功能中报告行号。

有没有办法使用装饰器将该函数注入到装饰函数中？所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:02:34.087

这是获取定义行号和调用行号的方法

```
from functools import wraps
def decoratedLogDeprecated(func):
    import inspect
    l = inspect.stack(1)[1][2]
    def thisFunc(*args, **kwargs):
        print "Defined at line", l
        func(*args, **kwargs)
        logDeprecated()

    return wraps(func)(thisFunc)

def logDeprecated():
    import inspect
    print "Called at line", inspect.stack(2)[2][2]

@decoratedLogDeprecated
def f():
    pass

@decoratedLogDeprecated
def g():
    pass

f()
g() 
```

# java - 通过属性或正文将 XML 文档传递给 JSP 自定义标记

> ID：13188092
> 
> 赞同：2
> 
> 时间：2012-11-02T01:37:49.703
> 
> 标签：java, xml, jsp, jakarta-ee, jstl

我想知道是否可以将 xml 文档传递给*纯*jstl 定义的 JSP 自定义标记：自定义标记的主体，例如：

```
<mt:mytag>
    <people>
        <person name="bob" age="23" />
        <person name="sue" age="45" />
        <person name="moe" age="35" />
    </people>
<mt:mytag> 
```

或作为标签的属性，如下所示：

```
<mt:mytag message="http://link.to.document.xml" /> 
```

这是标签本身

```
<%@tag description="xml parser" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>
<%@attribute name="message"%> OR <jsp:doBody var="message" />
<x:parse var="a" doc="${message}" />
<x:forEach var="current" select="$a/people/person">
    <ul>
        <li>
            Name <x:out select="$current/@name" /> age <x:out select="$current/@age" />
        </li>
    </ul>
</x:forEach> 
```

可以从 jsp 页面内部使用 jstl 处理 xml，基本上是在 forEach 之后复制代码并粘贴到 jsp 中。它甚至可以将 xml 作为页面请求中的 POST/GET 参数获取并在页面中处理它。

否则，在做上面的例子时，就会出现各种这样的错误：

```
PWC6197: An error occurred at line: 9 in the jsp file: /WEB-INF/tags/test2.tag
PWC6199: Generated servlet error:
cannot access javax.servlet.jsp.jstl.core.LoopTagSupport
class file for javax.servlet.jsp.jstl.core.LoopTagSupport not found

PWC6197: An error occurred at line: 9 in the jsp file: /WEB-INF/tags/test2.tag
PWC6199: Generated servlet error:
cannot find symbol
symbol:   method setPageContext(javax.servlet.jsp.PageContext)
location: variable _jspx_th_x_forEach_0 of ....... 
```

请注意，在非纯 JSTL（使用 java 代码）中处理正文内容或属性链接是完全可能的，只是想知道 JSTL+EL 是否有这样的功能。

编辑：分辨率

看起来 Netbeans IDE 有一个[错误](http://netbeans.org/bugzilla/show_bug.cgi?id=188765 "下一次，我会在不同的IDE中测试")，默认情况下它不添加 JSTL 库。您可以通过 Libraries->Add Library->Import->Jstl 1.1->Add Library 修复它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:00:36.293

这行得通。

```
<%@ taglib tagdir="/WEB-INF/tags" prefix="mt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>
<c:set var="message">
    <people>
        <person name="bob" age="23" />
        <person name="sue" age="45" />
        <person name="moe" age="35" />
    </people>
</c:set>
<mt:mytag message="${message}" /> 
```

实际上，您的第一个代码块（使用正文）也适用于我。如果要使用文件，请使用以下内容。

```
<%@ taglib tagdir="/WEB-INF/tags" prefix="mt" %>
<mt:mytag messageUrl="http://link.to.document.xml" /> 
```

和标签文件；

```
<%@tag description="xml parser" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>
<%@attribute name="messageUrl"%>
<c:import url="${messageUrl}" var="message" />
<x:parse var="a" doc="${message}" />
<x:forEach var="current" select="$a/people/person">
    <ul>
        <li>
            Name <x:out select="$current/@name" /> age <x:out select="$current/@age" />
        </li>
    </ul>
</x:forEach> 
```

关于您的错误信息，请告诉我们您使用的是哪个网络服务器。还请告诉我们您下载了哪些 JSTL jar 以及从何处下载。

# qt - 获取调用槽的 QObject

> ID：13188099
> 
> 赞同：1
> 
> 时间：2012-11-02T01:38:40.440
> 
> 标签：qt

我需要一种方法来找出哪个小部件负责通过信号调用插槽。这是假设我有多个小部件的信号连接到我的应用程序中的同一个插槽。

QSignalMapper 似乎是一个有效的答案，但我无法弄清楚如何让触发信号的对象传递到我的插槽中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T02:19:21.883

从任何插槽处理程序中，[`QObject::sender()`](http://doc.qt.io/qt-5/qobject.html#sender)将返回一个指向发送信号的对象的指针。

# ruby - 使用 Ruby 从 REST 服务器响应中获取 XML 元素的值

> ID：13188101
> 
> 赞同：1
> 
> 时间：2012-11-02T01:38:50.130
> 
> 标签：ruby, xml, rest

n00b REST 问题。我正在向 API 的端点发出 GET 请求并获得正确的 XML 响应。我的问题是，如何使用 Ruby 在服务器 REST 响应中获取特定 XML 元素的值？

假设其中一个元素是“Body”，我想将其值“Blah blah blah”分配给一个变量

XML 响应的一部分：

```
<Body>Blah blah blah</Body> 
```

我将如何处理响应？基本上我想做这样的事情

```
variable = params["Body"] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:00:30.167

最好的解决方案是使用[RestClient](https://github.com/archiloque/rest-client)或[HTTParty](https://github.com/jnunemaker/httparty)并让它为您解析响应。

否则，您将不得不使用诸如 Nokogiri 之类的库来解析响应本身：

```
doc = Nokogiri.XML(response)
variable = doc.at("body").text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:01:04.647

您将需要使用某种 XML 解析器。

听起来您想要[XmlSimple 之](http://xml-simple.rubyforge.org/)类的东西，它将 XML 文档转换为 ruby​​ 数组和散列。在已链接的页面上有大量如何使用它的示例。

需要注意的一件事是 XML 到本机容器的映射是不完善的。如果您正在处理复杂的文档，您可能希望使用更强大的解析器，例如[Nokogiri](http://nokogiri.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T02:04:42.587

如果您想要完整的 XML 对象映射，[HappyMapper](https://github.com/jnunemaker/happymapper)是一个不错的库，尽管它不再很活跃。它可以与任何来源的 XML 一起使用，因此您仍然需要 @Fitzsimmons 或 @MarkThomas 提到的库来执行 HTTP 请求。

# python - 重新索引或重新排序组

> ID：13188114
> 
> 赞同：4
> 
> 时间：2012-11-02T01:41:04.363
> 
> 标签：python, pandas

我正在寻找一种干净的方法来重新排序组中的索引。
示例代码：

```
import numpy as np
import pandas as pd

mydates = pd.date_range('1/1/2012', periods=1000, freq='D')
myts = pd.Series(np.random.randn(len(mydates)), index=mydates)
grouped = myts.groupby(lambda x: x.timetuple()[7])
mymin = grouped.min()
mymax = grouped.max() 
```

以上给出了我想要的，一年中朱利安日的汇总统计信息，但我想重新排序该组，以便将后半部分（183 天）放在第一半部分的前面。使用普通的 numpy 数组：

```
myindex = np.arange(1,367)
myindex = np.concatenate((myindex[183:],myindex[:183])) 
```

但是我不能用 groupby 做到这一点，它会引发一个未实现的错误。

*[注意：这是来自google-groups](https://groups.google.com/forum/?fromgroups=#!topic/pydata/XS_nEy853aw)的交叉帖子。我也一直在阅读 comp.lang.python，不幸的是人们倾向于忽略一些帖子，例如来自谷歌群组的帖子。*

在此先感谢，
贝文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T14:46:13.087

为什么不只是重新索引结果？

```
In [7]: mymin.reindex(myindex)
Out[7]: 
184   -0.788140
185   -2.206314
186    0.284884
187   -2.197727
188   -0.714634
189   -1.082745
190   -0.789286
191   -1.489837
192   -1.278941
193   -0.795507
194   -0.661476
195    0.582994
196   -1.634310
197    0.104332
198   -0.602378
...
169   -1.150616
170   -0.315325
171   -2.233139
172   -1.081528
173   -1.316668
174   -0.963783
175   -0.215260
176   -2.723446
177   -0.493480
178   -0.706771
179   -2.082051
180   -1.066649
181   -1.455419
182   -0.332383
183   -1.277424 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:15:40.027

我不知道为此有一个特定的 Pandas 函数，但你可以考虑 np.roll() 函数：

```
myindex = np.arange(1,367)
myindex = np.roll(myindex, int(len(myindex)/2.)) 
```

# asp.net - 如何从 asp.net 页面启动和轮询 Windows 服务

> ID：13188116
> 
> 赞同：0
> 
> 时间：2012-11-02T01:41:07.107
> 
> 标签：asp.net, windows-services, long-polling, long-running-processes

客户想要一个 asp.net 页面，该页面有一个按钮，可以从具有数百条记录的外部源触发数据库更新。这个过程需要很长时间。他还希望在流程运行时更新状态，例如“处理 1000 条记录中的 10 条”。在阅读各种文章时，我正在考虑将数据库更新代码放在 Windows 服务中。我以前从未使用过 Windows 服务，也找不到很多关于如何启动 Windows 服务并从 asp.net 页面轮询它的教程。我的问题是这是处理此过程的最佳方式吗？而且，有没有人有任何例子说明他们是如何做到这一点的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:10:49.540

有几种方法可以解决这个问题。

你是对的，在 Web 的工作进程中执行一个长时间运行的任务通常不会很好地结束：它会占用资源，应用程序池可以被回收等等。在我的大多数复杂项目中，我通常会结束最多有 4 个部分：数据库、包含我的模型的 DLL、作为 Windows 服务的“Worker”和 ASP.NET 网站。

“Worker”是一个始终运行的 Windows 服务，它使用[Quartz.net](http://quartznet.sourceforge.net/)执行计划任务，使用的模型与网站使用的模型相同。这些可以是在维护任何复杂的网站时似乎突然出现的各种周期性任务：`VacuumExpiredPickTicketsJob`、、、`BackupAndFtpDatabaseJob`等等`SendBackorderReminderEmailsJob`。

在 C# 中编写 Windows 服务并不困难（Visual Studio 中有一个内置模板，但您几乎可以继承[`ServiceBase`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.aspx)并参加比赛），并且[TopShelf](http://topshelf-project.com/)等库使部署它们变得更加容易。

剩下的就是从网站触发更新并将结果传回给用户。这可以像您希望的那样简单或复杂。如果这需要扩展到大量用户，您可能会使用[MSMQ](http://en.wikipedia.org/wiki/Microsoft_Message_Queuing)之类的东西将更新命令排队到 Windows 服务，然后 Windows 服务会响应该队列。我的印象是，这可能是矫枉过正。

对于少数用户，您可以覆盖服务的`OnCustomCommand(int command)`方法作为触发器。[`ExecuteCommand()`](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.executecommand.aspx)然后，您的网站将使用[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类来启动该过程。您的网站和服务会同意参数值，即“进行更新” `142`（因为历史原因，它必须是 128 到 255 之间的数字）。

至于将进度反馈给客户端，最简单的方法可能是让网页使用计时器和 AJAX 调用来轮询更新的进度数据。你可以喜欢新的东西，比如[WebSockets](http://en.wikipedia.org/wiki/WebSocket)（我写这篇文章时最前沿的东西）和[长轮询](http://en.wikipedia.org/wiki/Push_technology)，但常规轮询只适用于不需要扩展的东西。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:32:01.440

除了 Nicholas 的彻底回答之外，另一种选择是将后端进程部署为命令行脚本，并安排它们通过 Window 的内置任务调度程序运行，这在 Windows Server 2008+ 中得到了相当大的改进。或者，您可以使用任何其他主机的任务调度程序应用程序。

我发现与标准 Windows 服务相比，命令行方法更容易让 MIS 员工理解和配置，以及迁移到新服务器。

# ruby-on-rails - send_file 返回值

> ID：13188117
> 
> 赞同：2
> 
> 时间：2012-11-02T01:41:44.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`send_file`Rails中的方法有返回值吗？如果发送成功，我想做一件事，如果发送不成功，我想做另一*件事*。我查看了[此链接](http://apidock.com/rails/ActionController/Streaming/send_file)上的文档，但没有找到任何相关内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:37:33.887

不，没有办法确认下载完成或成功`send_file`。从这个问题：[我们可以找出回形针下载完成的时间吗？](https://stackoverflow.com/questions/4787625/can-we-find-out-when-a-paperclip-download-is-complete)：

> `send_file`创建文件，然后传递一个特殊的标头来告诉网络服务器告诉它要发送什么。Rails 实际上根本不发送文件，它设置了这个标头，告诉网络服务器发送文件，然后立即返回，然后继续处理另一个请求。为了能够跟踪下载是否完成，您必须占用 Rails 应用程序进程发送文件并阻止直到用户下载它，而不是将其留给网络服务器（这是它的设计目的）。这是超级低效的。

您可以在客户端使用 cookie 和 JavaScript 做一些事情。看到这个问题：[Rails 文件下载和查看更新 - Howto？](https://stackoverflow.com/questions/3945422/rails-file-download-and-view-update-howto)

# xaml - 检测哪个子控件收到了 Pointer* 事件

> ID：13188123
> 
> 赞同：0
> 
> 时间：2012-11-02T01:42:24.463
> 
> 标签：xaml, windows-runtime

我有一个处理 PointerPressed 和 PointerMoved 事件的容器控件。

该容器包含一组按钮。

在处理事件时，我如何确定哪个按钮实际收到了它？

```
 mainPage.AddHandler(PointerPressedEvent, new PointerEventHandler(pointerPressedHandler), true);        
    private void pointerPressedHandler(object sender, PointerRoutedEventArgs e)
    {
        var p = e.GetCurrentPoint(null); // maybe can be done using position info?
        var s = e.OriginalSource as Border; // OriginalSource is a Border, not the Button, and I don't seem to be able to get to the Button from the Border

        // todo - determine which button was clicked
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:00:32.133

这有效：

```
 private void pointerPressedHandler(object sender, PointerRoutedEventArgs e)
    {
        var p = e.GetCurrentPoint(null);
        var elements = VisualTreeHelper.FindElementsInHostCoordinates(p.Position, mainPage, false);

        Button foundButton;
        foreach (var item in elements)
        {
            foundButton = item as Button;
            if (foundButton != null)
            {
                System.Diagnostics.Debug.WriteLine("found button: " + foundButton.Name);
            }
        }
    } 
```

# xaml - 全景图片标题（绑定图片路径）

> ID：13188124
> 
> 赞同：1
> 
> 时间：2012-11-02T01:26:18.987
> 
> 标签：xaml, windows-phone

我想知道在使用图像作为全景标题时是否可以绑定图像路径，我需要为源绑定的原因是当用户将手机背景设置为“白色”时，徽标将为黑色，并且反之亦然。

这是我正在使用的代码：

```
<controls:Panorama.TitleTemplate>  
<DataTemplate>
    <Image Source="/PanoramaApp5;component/Images/logo.png"  Margin="14,105,0,10" HorizontalAlignment="Left" Name="logo" Stretch="Fill" VerticalAlignment="Top" Width="700" Height="70"/>
    <!--<TextBlock Text="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}" FontSize="100" Margin="10,50,0,0" />-->
    </DataTemplate> 
</controls:Panorama.TitleTemplate> 
```

如果我让默认标题（即文本），它会工作得很好，但我需要它作为图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T00:11:34.083

只需为您的图像源设置一个空绑定，然后使用`Title`全景图的属性对其进行分配：

```
<controls:Panorama x:Name="Panorama">
    <controls:Panorama.TitleTemplate>
        <DataTemplate>
            <Image Source="{Binding}" />
        </DataTemplate>
    </controls:Panorama.TitleTemplate>
</controls:Panorama> 
```

然后从后面的代码：

```
this.Panorama.Title = new Uri("uri of your picture"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T03:08:25.003

只是为了提供一个工作版本的示例，Facebook 在其 Windows Phone 应用程序的标题中使用了相同的方法，而不是用户绑定，它们会自动拉取用户的照片以粘在一起并在全景图中使用

# javascript - d3添加多个具有功能的类

> ID：13188125
> 
> 赞同：46
> 
> 时间：2012-11-02T01:42:50.627
> 
> 标签：javascript, jquery, d3.js

我的svg为：

```
<g class="user" title="Michael" rel="tooltip" transform = "rotate(-12.364052661705784)translate(360)" style="fill: #9467bd; "></g> 
```

我想添加一个与标题相同的类。我试过了

```
d3.selectAll('.user').attr('class','Michael'); 
```

但它取代了原来的类。然后我尝试了

```
d3.selectAll('.user').classed('Michael',true); 
```

有用！但现在我想用类似的函数返回类名

```
d3.selectAll('.user').classed(function(){return this.attr('title');},true); 
```

它不起作用。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-05T17:12:16.677

您可以通过简单地用空格分隔它们的名称来为元素分配多个类：

```
d3.selectAll(".user").attr("class", "user Michael"); 
```

但似乎您真正需要的是为您的元素分配一个数据属性，使用[HTML5 数据属性](http://ejohn.org/blog/html-5-data-attributes/)要好得多。所以你可以这样做：

```
d3.selectAll(".user").attr("data-name", function(d,i) { return "Michael #" + i; }); 
```

稍后获取用户名：

```
d3.select(".user").attr("data-name") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-24T17:24:30.320

为什么要使用 HTML5 数据属性，复制标题属性中已经存在的数据？HTML5 数据属性确实很有用，但复制数据不是一件好事。

在没有数据重复的情况下很容易做到这一点，与您最初的想法很接近。

```
d3.selectAll('.user').each(
    function(){
        var elt = d3.select(this);
        elt.classed(elt.attr("title"), true);
    }
) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-17T08:51:38.250

如果只是想添加一个类，可以跳出d3，使用类列表：

```
d3.selectAll('.user').node().classList.add("mynewclass"); 
```

可能无法在非常旧的浏览器中运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-17T14:28:20.607

Ilya 的回答很好，但如果你想留在`d3.select().classed()`盒子里，从数据中添加类的最佳方法是使用`attr`添加类：

```
.attr('class', function (d) { return d.class }) 
```

但是，这将用该类替换该类，因此如果要添加多个类，则必须在一行中完成。

```
.attr('class', function (d) { return d.class + " " + d.otherclass}) 
```

这是有限的，因为你不能真正*附加*类，但我相信它也解决了 OPs 问题。

# backbone.js - 使用默认的 Backbone.Model 初始化函数可以获得什么？

> ID：13188126
> 
> 赞同：0
> 
> 时间：2012-11-02T01:43:09.507
> 
> 标签：backbone.js

对于上下文，我使用咖啡脚本。如果我创建一个扩展 Backbone.Model 的基本模型并创建另一个类（即 App.Models.Project 扩展 App.Models.Base）.. 一切都按预期工作.. 如果在我写的这个基类：

```
initialize: ->
  super
  console.log 'hi' 
```

而且很简单

```
initialize: ->
  console.log 'hi' 
```

无需花费太多时间，在我的控制台中，实例化对象似乎在两种情况下都按预期运行。我听说你应该在这里“总是调用超级”，但我不知道我得到了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:08:18.733

Backbone.Model.initialize 什么都不做。

从带[注释的源代码](http://documentcloud.github.com/backbone/docs/backbone.html#section-35)中可以看到[Backbone.Model中定义的空函数](http://documentcloud.github.com/backbone/docs/backbone.html#section-27)

```
initialize: function(){} 
```

由您的模型来覆盖。通常，在这里设置模型变量。每当您创建模型对象时，都会在内部调用初始化。

在创建视图和集合时，同样的原则也适用。

# dart - Dart HttpServer 耗尽堆空间

> ID：13188127
> 
> 赞同：5
> 
> 时间：2012-11-02T01:43:16.273
> 
> 标签：dart, heap-memory, httpserver

我一直在修改一些示例代码以用于 Web 服务器，这样我就可以在服务器和客户端上运行 dart。但是，我决定要检查 Web 服务器的性能，除了崩溃之外，我印象最深。我在 Ubuntu 上使用“围攻”软件包，使用少数 URL 为网站生成大量流量。

我已经看到它每秒发送 1000 个事务，这对我来说是非常可接受的，但是在运行两到三分钟后，它要么崩溃要么挂起（如果我增加 new_gen_heap_size）。

```
#import('dart:io');

class FCServer {

String basePath;

void send404(HttpResponse response)
{
    response.statusCode = HttpStatus.NOT_FOUND;
    response.outputStream.close();
}

void handleRequest(HttpRequest request, HttpResponse response)
{
  final String path = request.path == '/' ? '/index.html' : request.path;
  final File file = new File('${basePath}${path}');
  file.exists().then((bool found) {
      if (found)
      {
          file.fullPath().then((String fullPath) {
              if (!fullPath.startsWith(basePath))
              {
                  send404(response);
              }
              else
              {
                  //print("delivering $fullPath");
                  response.headers.add("Cache-Control", "max-age=3600");
                  //file.openInputStream().pipe(response.outputStream);
                  var file = new File("$fullPath");
                  //response.headers.set(HttpHeaders.CONTENT_TYPE, "$contentType; charset=UTF-8");
                  response.outputStream.write(file.readAsBytesSync());
                  response.outputStream.close();
              }
         });
        }
        else
        {
            send404(response);
        }
    }); 
}

void startServer(String basePath)
{
    this.basePath = basePath;
    var server = new HttpServer();
    print("Starting server with basePath: $basePath");
    server.listen('192.168.0.14', 8080);
    server.listen('127.0.0.1', 8080);
    server.defaultRequestHandler = handleRequest;
}
}

FCServer webServe;
main()
{
    // Compute base path for the request based on the location of the
    // script and then start the server.
    webServe = new FCServer();
    File script = new File(new Options().script);
    script.directory().then((Directory d) {
        webServe.startServer(d.path);
    });
} 
```

Dart 退出前打印的错误如下：

```
Exhausted heap space, trying to allocate 128096 bytes.
Exhausted heap space, trying to allocate 112 bytes.
Exception 'Instance of 'OutOfMemoryException'' thrown:
Exiting the process 
```

这是否意味着某处存在内存泄漏？或者有人可以解释发生了什么吗？

编辑：当 new_gen_heap_size 增加到 1024 时，它会在一段时间后挂起，并且无论请求是否传入，单个线程都处于 100%。此时，在运行上述堆大小后，RAM 高达 1.5GB，所以我假设垃圾收集器已经踢了桶，可以这么说。

**编辑 2：我修改了代码，以便在初始化时创建一个由 4 个字节组成的列表，然后每次发出请求时，它只是将该列表写入响应并关闭响应。内存使用量仍在快速增长，这表明 Dart 内部存在更深层次的问题。这让我厌倦了将 Dart 用于完整的项目。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T17:44:17.263

为什么注释掉“file.openInputStream().pipe(response.outputStream);” 并将其替换为“response.outputStream.write(file.readAsBytesSync());”？这样做存在三个问题：

*   读取完文件后，它不会关闭文件。
*   它不是异步的。
*   它同时读取所有字节，而不是将它们流式传输到客户端。

如果您碰巧在服务一个非常大的文件，并且您有大量的并发请求，那么您将在内存中拥有该文件的大量副本。

是否使用“file.openInputStream().pipe(response.outputStream);” 让问题消失？

我对“response.outputStream.write(file.readAsBytesSync());”充满信心 是问题所在。另外，请记住 .write 不会立即写入字节。它缓冲它们以供写入。因此，您有一个缓冲的要写入的整个文件的副本。

**更新**：Mads Ager 确认这是内存泄漏，他已经提交了修复程序。[这是](http://code.google.com/p/dart/issues/detail?id=6550)他提交的错误。

# php - 带有 mysqli 类的 PHP OOP

> ID：13188128
> 
> 赞同：0
> 
> 时间：2012-11-02T01:43:18.727
> 
> 标签：php, class, properties, mysqli

好的，我到处寻找答案，但不是任何真正的答案，我认为这对于那里的任何人来说都是一个不错的要求：

我的班级成员函数使用 mysqli 的“mysqli_query”成员函数：

```
 class mysqlidbconn extends mysqli {

        protected $conn;  //Or private $conn;  
        function dbconnect(){
            $localHost = false;
            $link = new mysqli("server","database username","password","databasename")   
               or ($die = true);
            if ($link->connect_error){
                die("Database selection failed: " . $link->connect_error);
            }else{
                $this->conn = $link;
            }

         } 
```

以及用于执行插入/更新/删除/截断查询的成员函数：

```
 // To Execute Sql Query with no return result
    function xQuery($sql) {
        $this->conn->query($sql) or die("MySQL Query Execute Error: " . 
            $this->invDBConn->errorno . "<br>" . $this->conn->error . "<br>" . $sql 
            . "<br>");
    } 
```

在对表进行插入和截断时，上述情况完美适用于将 $conn 初始化为类 mysqlidbconn 的 PRIVATE 或 PROTECTED 成员变量，如下面代码中使用 mysqlidbconn 类的示例，不会产生错误，但也不会更新发生在 mysql 表中：

```
 <?php
      require('path to php file containing mysqlidbconn class');
      $msqli = new mysqlidbconn;
      $msqli->dbconnect();

      //This works
      $sqlinsert = "insert into foo (foo_id, foo_field1...) values ('foo_id value',  
          'foo_field1 value',...);    
      $msqli->xQuery($sqlinsert);  

      //As does this
      $sqltruncate = "truncate foo"; 
      $msqli->xQuery($sqltruncate);

      //But the below does not work, giving no error, result, etc.
      $sqlupdate = "update foo set foo_field1='another foo_field1 value'";
      $msqli->xQuery($sqlupdate); 
```

但是，当使用 $conn 变量作为 PUBLIC 编写类时，上述

```
 $sqlupdate = "update foo set foo_field1='another foo_field1 value'";
    $msqli->xQuery($sqlupdate); 
```

成功更新表。

在编写我的 mysqlidbconn 类时，我在 OOP 方面丢失了什么？

感谢您的帮助，对于未根据论坛规则发布的任何代码，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:50:16.480

尝试：

```
$link = new mysqli("server","database username","password","databasename") or
             ($die = true);

// To Execute Sql Query with no return result
     function xQuery($sql) {
         $result = $this->conn->query($sql);
         if(!empty($result))
         {
             return $result->fetch_assoc();
         } else {
             return $this->conn->errno;
         }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T08:11:56.123

没有什么是面向对象的，问题也不是真正的问题，因为它仅仅是由测量误差引起的，就像这里有几十万个问题一样。

没有任何与 OOP 相关的东西可以干扰 SQL，从而使一些查询运行而另一些则不运行。然而，许多 PHP 用户在更新查询、更新已更新的数据或检查错误数据库的结果等方面存在困难。

# racket - Lazy Racket 中的动态编程

> ID：13188129
> 
> 赞同：4
> 
> 时间：2012-11-02T01:43:18.963
> 
> 标签：racket, lazy-evaluation

我试图记住如何在懒惰的球拍中进行动态编程。在我解决了 Project Euler 的一个问题后，我开始怀疑这一点：

> 通过从下方三角形的顶部开始并移动到下方行中的相邻数字，从上到下的最大总数为 23。
> 
> ```
>  3
>   7 4
>  2 4 6
> 8 5 9 3 
> ```
> 
> 也就是说，3 + 7 + 4 + 9 = 23。
> 
> 求下面三角形从上到下的最大总数：...

我用下面的代码解决了这个问题。然而，我在学校里被教过惰性球拍（实际上是一般的编程语言），我似乎记得在惰性语言中，解决动态编程问题要容易得多。例如，在其他 eulerists 发布的解决方案中，一个人发布了他用来解决问题的 haskell 代码，而实际上只需要一行代码就可以指定问题中的数据（三角形中的内容是什么）本身）。但是，我不理解代码，所以我仍然感到困惑。

概括：

1.  如何解决惰性球拍中的动态编程问题？例如，答案可能会解决上面给出的 4 级三角形示例（而不是完整的 15 级三角形）问题，或者发布一些以前制作的编辑距离代码（这就是我学习 DP 的方式）。
2.  为什么用惰性语言（例如惰性球拍）做动态编程更容易？

下面给出了我用来解决*常规球拍*中 DP 问题的 80 行代码。

```
#lang racket
(define (triangle-ref x y)
  (let ((triangle
       (vector-immutable
         (vector-immutable 04 62 98 27 23 09 70 98 73 93 38 53 60 04 23)
         (vector-immutable 63 66 04 68 89 53 67 30 73 16 69 87 40 31)
         (vector-immutable 91 71 52 38 17 14 91 43 58 50 27 29 48)
         (vector-immutable 70 11 33 28 77 73 17 78 39 68 17 57)
         (vector-immutable 53 71 44 65 25 43 91 52 97 51 14)
         (vector-immutable 41 48 72 33 47 32 37 16 94 29)
         (vector-immutable 41 41 26 56 83 40 80 70 33)
         (vector-immutable 99 65 04 28 06 16 70 92)
         (vector-immutable 88 02 77 73 07 63 67)
         (vector-immutable 19 01 23 75 03 34)
         (vector-immutable 20 04 82 47 65)
         (vector-immutable 18 35 87 10)
         (vector-immutable 17 47 82)
         (vector-immutable 95 64)
         (vector-immutable 75))))
    (vector-ref (vector-ref triangle y) x)))
(define triangle-size 15)
(define (problem18)
  (let ((table (let fill-table ((table (hash))
                                (current-x 0)
                                (current-y 0))
                 (cond ((>= current-y triangle-size) table)
                       ((>= current-x (- triangle-size current-y))
                        (fill-table table 0 (add1 current-y)))
                       (else (let ((reference (cons current-x current-y))
                                   (triangle-value (triangle-ref current-x
                                                                 current-y)))
                               (if (= current-y 0)
                                 (fill-table (hash-set table
                                                       reference
                                                       (cons triangle-value
                                                             empty))
                                             (add1 current-x)
                                             current-y)
                                 (let* ((left-entry (hash-ref
                                                      table
                                                      (cons
                                                        current-x
                                                        (sub1 current-y))))
                                        (left-cost (car left-entry))
                                        (left-path (cdr left-entry))
                                        (right-entry (hash-ref
                                                       table
                                                       (cons
                                                         (add1
                                                           current-x)
                                                         (sub1
                                                           current-y))))
                                        (right-cost (car right-entry))
                                        (right-path (cdr right-entry)))
                                   (if (> left-cost right-cost)
                                     (fill-table (hash-set table
                                                           reference
                                                           (cons
                                                             (+ triangle-value
                                                                left-cost)
                                                             (cons
                                                               triangle-value
                                                               left-path)))
                                                 (add1 current-x)
                                                 current-y)
                                     (fill-table (hash-set table
                                                           reference
                                                           (cons
                                                             (+ triangle-value
                                                                right-cost)
                                                             (cons
                                                               triangle-value
                                                               right-path)))
                                                 (add1 current-x)
                                                 current-y))))))))))
    (car (hash-ref table (cons 0 (sub1 triangle-size))))))
(problem18)
(provide problem18) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T05:46:30.657

对于某些类型的问题，惰性允许您以一种很好的模块化方式组织您的解决方案，您可以首先像生成所有可能的解决方案一样编写代码（即使有无限的可能性），然后单独编写代码来测试是否解决方案是有效的解决方案。在惰性语言中，这样的算法只会检查足够多的可能解决方案来计算最终结果，而所有其他可能性自然不会被计算，因此它与更复杂的策略（如回溯）一样有效。

一个典型的例子是解决数独谜题的算法（谷歌搜索会找到很多例子）。您可能还对 John Hughes 的一篇名为“为什么函数式编程很重要”的论文感兴趣。

话虽如此，在这种特定情况下，懒惰并没有多大帮助。使用 Eager 或惰性语言的动态编程风格的解决方案都可以正常工作（并且看起来大致相同）。

在解决这样的问题时，首先计算一个简单的解决方案然后改进它通常很有帮助。天真的解决方案将计算所有可能的总数，然后取最大值。对于小三角形示例，您将计算 3+7+2+8、3+7+2+5 等，但仅将其写下来即可发现可能的改进，因为重复了 3+7+2。避免这些重复计算正是动态规划所做的。动态算法将只计算一次这些中间结果，然后多次重复使用。

我们通过增量计算最大总数来做到这一点，一次一行。以这种方式计算最大总数的函数可能如下所示：

（注意：您需要安装最新的夜间版本才能运行此 Racket 代码。）

```
;; A Row is a list of at least one number.

;; A Triangle is a list of at least one Row,
;;  where each row has one more number than the previous row.

;; ----------------------------------------------------------------------------
;; top-down solution

;; max-tri-route : Triangle -> Number
;; Computes the maximum total when moving from top of triangle to bottom.
(define/match (max-tri-route tri)
  [((list a-single-row)) 
   (apply max a-single-row)]
  [((list-rest row1 row2 rest-rows))
   (max-tri-route (cons (process-row row1 row2) rest-rows))]) 
```

我假设一个三角形用一个列表列表表示，其中每个子列表代表一行。我们假设三角形的第一行代表我们增量计算的总数。该函数表示如果只有一行，则取该行的最大值。否则，使用第一行（到目前为止的总数）和第二行调用 process-row 函数。process-row 函数将第二行合并到中间总计中，可能看起来像这样：

```
;; process-row : Row Row -> Row
;; Takes a list of intermediate maximum values and a row, and incorporates
;;  the given row into the intermediate values.
;; - new-row always has one more element than tmp-maxes
;; - produces list of length new-row
(define/match (process-row tmp-maxes new-row)
  [((list x) (list y z)) 
   (list (+ x y) (+ x z))]
  [((list-rest x rest-maxes) (list-rest y z rest-row)) 
   (define res (process-row rest-maxes (cons z rest-row)))
   (cons (+ x y) (cons (max (+ x z) (first res)) (rest res)))]) 
```

此函数假定第二个给定行总是比第一个给定行多一个数字。如果给定的两行分别只有一个和两个数字，则只需将第一行中的数字添加到第二行中的每个数字。否则，我们通过一次考虑三个数字来计算新的中间总数：一个来自第一个给定行，两个相邻数字来自第二个给定行。当然，第二行中的每个数字（末端除外）都有两个与第一行相邻的数字，所以我们只想取较大的一个。例如，在小三角形示例中，对前两行调用 process-row 会产生中间值 10 和 7。然后如果使用 10 7 和下一行 2 4 6 调用 process-row，它首先会考虑 10 和 2和 4，产生 12 和 14。但它也必须考虑 7 和下面的 4。由于 7+4=11 小于 14，所以我们保留的中间总数是 14。合并第三行后得到的中间总数是 12 14 13。

上面的解决方案将有效地产生正确的答案，即使对于问题 67 中的三角形也是如此。但感觉有点尴尬，尤其是在我们必须考虑重叠情况的过程行的第二部分。让我们看看我们是否可以使解决方案更好。

采取＃2：

在第一个解决方案中，由于我们从上到下处理三角形，所以我们的中间总数列表随着每一行而增长。但最后我们必须计算所有中间值的最大值。但是没有什么说我们必须从上到下处理三角形。因为我们只对总数感兴趣，所以我们会自下而上得到相同的答案。让我们看看这会是什么样子：

```
;; ----------------------------------------------------------------------------
;; bottom-up solution

(define (max-tri-route2 tri) (max-tri/bottom-up (reverse tri)))

;; Computes total starting from bottom row.
(define/match (max-tri/bottom-up tri)
  [((list (list the-max-total))) 
   the-max-total]
  [((list-rest row1 row2 rest-rows))
   (max-tri/bottom-up (cons (process-row/bottom-up row2 row1) rest-rows))])

;; - tmp-maxes always has one more element than new-row
;; - produces list of length new-row
(define/match (process-row/bottom-up new-row tmp-maxes)
  [((list x) (list y z))
   (list (+ x (max y z)))]
  [((list-rest x rest-row) (list-rest y z rest-maxes))
   (cons (+ x (max y z)) (process-row/bottom-up rest-row (cons z rest-maxes)))]) 
```

使用自下而上的方法，我们最后只有一个值，即最终答案。此外，process-row/bottom-up 比 process-row 更简单，因为我们现在可以直接保留这两个数字中的较大者。

但是，我们可以做得更好。

采取＃3：

这种遍历列表并累积中间值的模式非常普遍，因此有内置函数可以做到这一点：foldr 和 foldl。这些函数中的每一个都需要一个要遍历的列表、一个初始中间值以及一个将列表中的下一个值与当前中间值组合的函数。但是我们需要的组合函数是什么？事实证明，这正是我们的 process-row 函数。这是 foldl 的解决方案：

```
;; ----------------------------------------------------------------------------
;; bottom-up, with foldl

(define (max-tri-route3 tri)
  (define rev-tri (reverse tri))
  (first (foldl process-row/bottom-up (first rev-tri) (rest rev-tri)))) 
```

foldl 从列表的左侧开始，但是由于我们要自下而上，所以我们首先反转列表。我们使用第一行（即底部）作为初始中间值，其余行作为三角形。完成后，我们将得到一个值列表，即答案。

采取＃4：

最后的改进。为什么我们要反转三角形，然后从左边开始。为什么我们不直接从 foldr 开始，使用最后一行作为初始累加器？foldr 的问题是我们必须显式指定一个初始累加器，但是像 Haskell 这样的一些语言有一个内置函数 foldr1，它自动使用列表的最后一个元素作为初始中间值。Racket 没有它，但我们可以轻松实现它。

```
;; ----------------------------------------------------------------------------
;; bottom-up, with foldr1

(define/match (foldr1 f lst)
  [(_ (list x)) x]
  [(_ (list-rest x rest)) (f x (foldr1 f rest))])

(define (max-tri-route4 tri) (first (foldr1 process-row/bottom-up tri))) 
```

当然， foldr1 函数假定您给它的列表至少有一个元素。使用 foldr1 函数并使用我们之前的 process-row/bottom-up 函数，我们的解决方案现在是一个单行函数。这可能也是您看到的 Haskell 解决方案的样子。

有关此代码的完整程序，请参见[此处](https://github.com/stchang/euler/blob/master/18%2B67.rkt)。

# html - 如何更改css文本的“内部”行高

> ID：13188130
> 
> 赞同：6
> 
> 时间：2012-11-02T01:43:51.823
> 
> 标签：html, css, fonts, font-face

我正在尝试使用一种名为 entypo 的图标字体。字体很棒，但是开发人员选择的填充是可怕的，并且使这种字体令人恼火。这些图标真的很好，我只是想让它工作。

归结为使字体看起来“正常”，字体大小需要很大（例如 40px+）。

如果您尝试将图标放入高度为 15 像素的空间中，则字体大小将为 40 像素，然后您需要处理所有额外的空间。

我尝试在每个可以想象的组合中设置显式高度、显式行高、垂直对齐，结果在 PC 和 mac 之间是不同的。

我唯一能想到的是，不同操作系统对“剩余空间”的处理方式不同。

是否有一些我不知道的 CSS 属性可以解决这个问题？

个人电脑

![在此处输入图像描述](../Images/b18f825285b89eb62c5f2931500e37cd.png)

苹果电脑

![在此处输入图像描述](../Images/e7891b3cf21cc08a60885c989ff8746a.png)

这是我曾经尝试过的非常骇人听闻的 CSS，尽我所能将其归零。请记住，我已经尝试过使用 height 和 lineheight，它总是同样的问题，PC 总是把它放在 mac 放置它的下面。

```
.icon {
    font-family: 'entypo';
    display: inline-block;
    color: #000;
    font-size: 40px;
    line-height: 0;
    height: 0;
    vertical-align: middle;   
} 
```

为了向你们演示上面的这些图像，这些是我添加的属性： `height: 20px; width: 20px; background: red;`只是为了演示它如何呈现如此不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:42:26.737

我一直有同样的问题。我不确定我的解决方案是否很棒，但我会发布它，看看我们是否可以开始一些讨论。

```
.icon {
  font-family: 'Entypo';
  position: absolute;
  font-size: 40px;
  height: 20px;
  width: 20px;
  margin-left: -20px;  /* This will force it to live before the containing element, so the container may need 20px of padding-left */
  margin-top: -1px;    /* Just because it was still sitting one pixel to low for my eye */
  text-align: center; 
```

}

我希望有人知道如何在不必将填充添加到包含元素的情况下完成此操作。然而，这是我可以使用绝对定位完成这项工作的唯一方法，这似乎允许我们“修剪”图标字符上的额外填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T19:03:02.317

错误已用 jquery 修复；）

只需在页面上添加：

```
<script>
$(document).ready(function(){
var isMacLike = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)?true:false;
var isIOS = navigator.platform.match(/(iPhone|iPod|iPad)/i)?true:false;

if(isMacLike || isIOS)
    {    
        //alert("mac!!!");
        $(".entypoclass").css("margin-top","11px");
    }
    else
        {
           // alert("pc!");
        }
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T02:17:06.710

[Entypo 的](http://www.entypo.com)默认行高被搞砸了。

幸运的是，[Fontello](http://fontello.com)的某个人花了一些时间来修复它。有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-17T16:47:16.400

我的解决方案是：

```
icon{
    line-height:0px;
    overflow:hidden;
    display:inline-block;
    font-size:75px;
    font-family:'entypo';
    text-align:center;
    height:37px;
    width:37px;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-02T01:51:49.537

很高兴看到 HTML，但也许填充会有所帮助，比如`padding:3px;`.

# python - 如何让函数接受两个参数？

> ID：13188134
> 
> 赞同：0
> 
> 时间：2012-11-02T01:44:41.573
> 
> 标签：python, list, function, arguments, main

蟒蛇新手。所以我有这个函数，我不知道如何让它接受两个参数并将其返回到另一个列表中，并附上它们的位置。在主程序中，我希望它调用 x 在列表中搜索，并打印它出现的位置。我会以正确的方式解决这个问题吗？这就是我想出的。非常感谢您的帮助。

```
def find_multiple():
    arg1 = input(" L: " )
    arg2 = input(" x: ")

    return L

def main():
    L = [4, 10, 4, 2, 9, 5, 4 ]
    x = int(input("Enter an element to search for in the list: "))
    if (len(L_indexes) == 0):
        print(x, " does not occur in L.")
        L =[]
        results = L    

print("enter an element to search for in the list: " )
if(len(L) == 0):
    print("element does not occur in the list")
else:
    print("the number of occurrences in L: ", x)

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:50:19.753

```
def add(a, b):
    return a + b 
```

**编辑：根据您发布的内容，这就是我认为您正在尝试做的事情。**

```
def search(myBigFancyX, myBigFancyList):

    counter = 0
    for number in myBigFancyList:
        if number == myBigFancyX:
            counter += 1
    return counter

if __name__ == "__main__":

    l = [4, 10, 4, 2, 9, 5, 4 ]
    x = int(input("Enter an element to search for in the list: "))

    occurances = search(x, l)
    if occurances == 0:
        print("element does not occur in the list")
    else:
        print("the number of occurrences in L: ", occurances) 
```

# git - 使用 Git 作为 Git 和 SVN 存储库之间的桥梁？

> ID：13188135
> 
> 赞同：5
> 
> 时间：2012-11-02T01:44:44.513
> 
> 标签：git, svn, git-svn

**问题**

我的团队使用 git 对 bitbucket 进行源代码控制，我们的客户在内部使用 Subversion。我们的团队如何在将代码签入 Subversion 的同时继续使用 git？而且，不，我认为 git-svn 不会起作用。

**要求**

我的团队想使用纯 git 解决方案，而不是 git-svn。原因是我们的客户只允许我们在办公室局域网内访问他们的 svn 环境；在办公室工作时，我们不能对 svn 进行提交。

**我的方法**

我认为我可以使用 git-svn 检查 subversion 存储库，然后将我们的 bitbucket git 实例作为远程添加到同一个 git 包装的 svn 存储库。然后，一个 cron 作业可以`git pull`从我们的 bitbucket 存储库中执行，然后`git svn dcommit`将 bitbucket 中的更改推送到我们客户的 subversion 存储库。

这是有问题的，因为在拉取、svn dcommit 过程完成后，git 总是会在 git bitbucket 存储库之前显示“x”个修订版本。

虽然目前还没有任何奇怪的事情发生，但在某些时候，我相信我们的客户将开始签入他们的 subversion 存储库，我最终将不得不推送到我们的 bitbucket 实例。

**技术细节**

这是我一直用来尝试使其正常工作的一系列粗略步骤：

```
git svn clone -s http://svn.my-client.us/my-proj/
cd my-proj
git remote add origin path-to-bitbucket-repo
git fetch origin
git checkout -b develop remotes/develop
git branch --set-upstream develop origin/develop
git pull
#add merge comment here
git svn rebase
git svn dcommit #takes a while to transfer all the individual commits 
```

综上所述，执行`git status`：

```
[me@dev myDir]$ git st
# On branch develop
# Your branch is ahead of 'origin/develop' by 59 commits.
#
nothing to commit (working directory clean) 
```

鉴于我需要能够从任何位置进行签到，而不仅仅是在我在办公室时，是否有任何策略可以将其用作执行此操作的桥梁？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T00:22:31.820

您的方法是正确的，但您必须意识到`dcommit`重写历史比正常情况更具破坏性`rebase`。例如，它`git-svn-id`在每个提交到 svn 的提交后附加一行。这就是为什么你的`develop`分支出现在前面的`origin/develop`原因——因为它有 59 个提交都包含`git-svn-id`在消息中，而这些都不存在于`origin/develop`. 因此，您必须在每次 dcommit 之后或至少在下一次 dcommit 之前重新调整您的 git 分支。这意味着强制改写上游的历史：

```
git push -f origin develop 
```

如果任何其他分支基于此上游，它们现在必须重新基于它。

[`git-svn`手册页](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)的 CAVEATS 部分更详细，因此您绝对应该阅读它。

您的客户端在 svn 端所做的更改将自动通过 合并到您的开发分支中`git svn rebase`，并最终通过`git push -f`上述到达 bitbucket。

如果这种工作流程不能让您满意，那么可能值得一看[SubGit](http://subgit.com/documentation/gitsvn.html)。我从未尝试过，但他们声称在两个 SCM 之间提供的集成要少得多。

# windows-phone-7 - Microsoft 手机应用程序在电子邮件中附加图像

> ID：13188136
> 
> 赞同：2
> 
> 时间：2012-11-01T15:26:28.910
> 
> 标签：windows-phone-7, email, windows-phone

7.5开发的windows手机应用程序可以附加图片文件吗？我搜索了很多网站，但找不到任何解决方案。如果有的话请帮助我。我已经下载了这个代码 [http://www.xdevsoftware.com/blog/post/File-Upload-in-Silverlight-3.aspx](http://www.xdevsoftware.com/blog/post/File-Upload-in-Silverlight-3.aspx) 但无法运行。我遇到了silverlight转换的问题。他们说我需要安装一些与他们匹配的组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:16:31.490

这是不可能的。
唯一的解决方案是使用您可以创建的一些专用 Web 服务发送电子邮件，或者将图像编码为 Base64 并将其直接添加到电子邮件正文中。
遗憾的是，Windows Phone 8 在这件事上没有任何改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:18:48.273

您可以采取的另一条路线（可能不适用于您的情况，因为您没有提供有关您的应用程序功能的详细信息）是使用 Live SDK。如果您将您的应用程序集成到 Skydrive 中，您可以通过代理（SkyDrive 链接）发送图像和视频。

这就是我在我的应用视频日记中处理该问题的方式。

# cocoa - 图像叠加建议

> ID：13188139
> 
> 赞同：0
> 
> 时间：2012-11-02T01:45:15.107
> 
> 标签：cocoa, layer, drawrect, nsimage, nsbezierpath

我正在寻找一些关于如何进行的建议。

我正在开发一个可可程序（Objective-C），我希望能够在位图图像上绘制，定义可以用来从底层图像获取信息的区域。

例如，我想创建一个盒子（或椭圆形）并能够从底层图像中获取平均像素值。最终，我想指定一些这样的区域，我在这些区域中对底层图像进行采样以提供各种统计信息。

目前我正在使用 NSImage 类来绘制我的图像，但我不确定如何在该图像上绘制 NSBezierPath。使用 NSImage 以外的东西会更好吗？

我是否只是重写 NSImage drawRect 方法，以便它绘制一系列 NSBezierPath 对象？

我希望能够将这些轮廓区域保存为一个图层，以便将来可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:02:59.460

您可以使用 a `CGBitmapContext`（用于位图）、`CGImageMask`s（用于遮罩）和`CGPath`s 或`CGContext*`绘制线条和曲线的图元。

一个完整的答案会很长，但这给了你一个起点。

# clojure - Clojure 符号等式

> ID：13188140
> 
> 赞同：4
> 
> 时间：2012-11-02T01:45:17.327
> 
> 标签：clojure, symbols, equality

我在使用 clojure 项目时遇到了问题，我似乎找不到答案。我正在尝试比较两个符号：

```
'x  'y 
```

但是当我使用：

```
(= ('x 'y)) 
```

它返回真。与以下相同：

```
(identical? 'x 'y) 
```

我发现相同的比较内存地址，但我还没有找到为什么'x和'y在比较时返回true？我还没有看到这样的问题，其他大多数帖子都比较数字。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T02:18:48.867

您正在将符号列表与任何内容进行比较。如果只向 = 传递一个参数，则默认返回 true。只需删除符号周围的括号，然后您将比较符号本身。`(= 'x 'y)`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T13:33:03.950

```
(= nil) ; => true

('x 'y) ; => nil

('x #{'x}) ; => 'x

('x #{'z} :one) ; => :one

(instance? clojure.lang.IFn 'x) ; => true 
```

# windows-runtime - protobuf-net 是否支持 Windows RT？

> ID：13188142
> 
> 赞同：1
> 
> 时间：2012-11-02T01:45:24.920
> 
> 标签：windows-runtime, protobuf-net

是否可以在针对 Windows RT 的应用程序中使用[protobuf-net库？](http://code.google.com/p/protobuf-net/)我尝试通过 NuGet 将其添加到我的项目中，但收到此错误：

```
Successfully installed 'protobuf-net 2.0.0.480'.
Successfully uninstalled 'protobuf-net 2.0.0.480'.
Install failed. Rolling back...
Could not install package 'protobuf-net 2.0.0.480'. You are trying to install this package into a project that targets '.NETCore,Version=v4.5', but the package does not contain any assembly references that are compatible with that framework. For more information, contact the package author. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:11:17.093

您需要更新的版本。594 版支持 4.5。在包管理器控制台（工具->库包管理器->包管理器控制台）中运行：

PM> Install-Package protobuf-net -Version 2.0.0.594

或从项目网站下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T06:54:25.043

是的，较新的版本完全支持 .NETCore（又名“WinRT”、“Windows 应用商店应用程序”或“Metro”或“现代 UI”，或者他们今天想称呼它的任何名称）。正如 Eli 所说，您可以*通过特定版本*获取它，也可以从 google-code 下载中获取。

请注意，为了获得最佳性能，建议使用[“预编译”，新的预编译器](http://marcgravell.blogspot.co.uk/2012/07/introducing-protobuf-net-precompiler.html)，因为 .NETCore 不支持元编程：没有这个，它将在运行时使用反射，并且不会像任何地方一样快有可能。这包含在谷歌代码下载中。

# android - Android 应用程序出现错误“无法启动活动 ComponentInfo”

> ID：13188144
> 
> 赞同：0
> 
> 时间：2012-11-02T01:46:01.273
> 
> 标签：android, android-activity, runtime-error

我是android开发的初学者。我编写了从 Web 服务获取数据的应用程序。首先它可以工作，但是当我在我的应用程序中编辑并添加一列数据时，它显示了一些像这样的异常 -

```
11-02 07:56:47.721: D/AndroidRuntime(686): Shutting down VM
11-02 07:56:47.721: W/dalvikvm(686): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
11-02 07:56:47.741: E/AndroidRuntime(686): FATAL EXCEPTION: main
11-02 07:56:47.741: E/AndroidRuntime(686): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.app.possampleproject/com.app.possampleproject.WelcomeActivity}: java.lang.NullPointerException
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.os.Looper.loop(Looper.java:137)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.ActivityThread.main(ActivityThread.java:4340)
11-02 07:56:47.741: E/AndroidRuntime(686):  at java.lang.reflect.Method.invokeNative(Native Method)
11-02 07:56:47.741: E/AndroidRuntime(686):  at java.lang.reflect.Method.invoke(Method.java:511)
11-02 07:56:47.741: E/AndroidRuntime(686):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-02 07:56:47.741: E/AndroidRuntime(686):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-02 07:56:47.741: E/AndroidRuntime(686):  at dalvik.system.NativeStart.main(Native Method)
11-02 07:56:47.741: E/AndroidRuntime(686): Caused by: java.lang.NullPointerException
11-02 07:56:47.741: E/AndroidRuntime(686):  at com.app.possampleproject.WelcomeActivity.onCreate(WelcomeActivity.java:30)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.Activity.performCreate(Activity.java:4465)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-02 07:56:47.741: E/AndroidRuntime(686):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
11-02 07:56:47.741: E/AndroidRuntime(686):  ... 11 more 
```

第一个意图我可以运行，但是当我进入下一个意图时它会出错

**MainActivity.java**（我可以运行的第一个意图）

```
package com.app.possampleproject;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    final String TAG = "boolean";
    EditText username,password;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        username = (EditText)findViewById(R.id.username);
        final String user = new String(username.getText().toString());
        password = (EditText)findViewById(R.id.password);
        final String pass = new String(password.getText().toString());

        Button login = (Button)findViewById(R.id.button1);
        final String trueuser = new String("myusername");
        final String truepass = new String("mypassword");
        login.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                if(username.getText().toString().equals(trueuser) && password.getText().toString().equals(truepass)){
                    Toast.makeText(MainActivity.this, "Login success", Toast.LENGTH_SHORT).show();
                    changepage();

                }else{
                    Toast.makeText(MainActivity.this, "Wrong username or password !!", Toast.LENGTH_SHORT).show();

                }

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void changepage(){
        Intent i = new Intent(this,WelcomeActivity.class);
        startActivity(i);
    }
} 
```

**WelcomeActivity.java**（第二个意图，此时我无法运行并出现错误）

```
package com.app.possampleproject;

import java.util.Calendar;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class WelcomeActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.welcome_page);
        // set status update label.
        SharedPreferences prefs = getSharedPreferences("date", MODE_PRIVATE);
        String dateText = prefs.getString("date", "");
        TextView date = (TextView) findViewById(R.id.textupdate);
        date.setText(dateText);
        // button activity
        Button sale_but = (Button) findViewById(R.id.sale);
        Button request_but = (Button) findViewById(R.id.request);
        Button update_but = (Button) findViewById(R.id.update);
        sale_but.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                changepage();

            }
        });

        request_but.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                changepageRequest();

            }
        });

        update_but.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                setdate();

            }
        });

    }

    public void changepage() {
        Intent i = new Intent(this, SaleActivity.class);
        startActivity(i);
    }

    public void changepageRequest() {
        Intent i = new Intent(this, RequestActivity.class);
        startActivity(i);
    }

    public void setdate() {
        Calendar c = Calendar.getInstance();
        int seconds = c.get(Calendar.SECOND);
        int min = c.get(Calendar.MINUTE);
        int hour = c.get(Calendar.HOUR);
        int day = c.get(Calendar.DATE);
        int mouth = c.get(Calendar.MONTH);
        int year = c.get(Calendar.YEAR);
        SharedPreferences prefs = getSharedPreferences("date", MODE_PRIVATE);
        Editor mEditor = prefs.edit();
        mEditor.putString("date", day + "/" + mouth + "/" + year + "  " + hour
                + ":" + min + ":" + seconds);
        mEditor.commit();
        TextView date = (TextView) findViewById(R.id.textupdate);
        date.setText(day + "/" + mouth + "/" + year + "  " + hour + ":" + min
                + ":" + seconds);

    }

} 
```

在出现错误之前，我在此意图下编辑了相同的活动

```
package com.app.possampleproject;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class SaleActivity extends Activity {
    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sale_page);

        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                    .permitAll().build();
            StrictMode.setThreadPolicy(policy);
        }

        Button cancel_but = (Button) findViewById(R.id.cancel);
        Button submit_but = (Button) findViewById(R.id.submit);

        cancel_but.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                changeToWelcome();

            }
        });

        final Button btn1 = (Button) findViewById(R.id.button1);
        // Perform action on click
        btn1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                SearchData();
            }
        });

    }

    public void changeToWelcome() {
        Intent i = new Intent(this, WelcomeActivity.class);
        startActivity(i);
    }

    public void SearchData() {
        // listView1
        final ListView lisView1 = (ListView) findViewById(R.id.listView1);

        // editText1
        final EditText inputText = (EditText) findViewById(R.id.editText1);

        String url = "http://lab.richma.net/getJSONR.php";

        // Paste Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("txtKeyword", inputText.getText()
                .toString()));

        try {
            JSONArray data = new JSONArray(getJSONUrl(url, params));

            final ArrayList<HashMap<String, String>> MyArrList = new ArrayList<HashMap<String, String>>();
            HashMap<String, String> map;

            for (int i = 0; i < data.length(); i++) {
                JSONObject c = data.getJSONObject(i);

                map = new HashMap<String, String>();
                map.put("ProductID", c.getString("ProductID"));
                map.put("Size", c.getString("Size"));
                map.put("Colour", c.getString("Colour"));
                map.put("Price", c.getString("Price"));
                map.put("Quantity", c.getString("Quantity"));
                MyArrList.add(map);

            }

            // item list want to sale

            SimpleAdapter sAdap;
            sAdap = new SimpleAdapter(SaleActivity.this, MyArrList,
                    R.layout.activity_column, new String[] { "ProductID",
                            "Size", "Colour", "Price", "Quantity" }, new int[] {
                            R.id.ColProductID, R.id.ColSize, R.id.ColColour,
                            R.id.ColPrice, R.id.ColQuantity });
            lisView1.setAdapter(sAdap);

            final AlertDialog.Builder viewDetail = new AlertDialog.Builder(this);
            // OnClick Item
            lisView1.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> myAdapter, View myView,
                        int position, long mylng) {

                    String strProductID = MyArrList.get(position)
                            .get("ProductID").toString();
                    String sSize = MyArrList.get(position).get("Size")
                            .toString();
                    String strColour = MyArrList.get(position).get("Colour")
                            .toString();
                    String strPrice = MyArrList.get(position).get("Price")
                            .toString();
                    String strQuantity = MyArrList.get(position)
                            .get("Quantity").toString();

                    viewDetail.setIcon(android.R.drawable.btn_star_big_on);
                    viewDetail.setTitle("Product Detail");
                    viewDetail.setMessage("ProductID : " + strProductID + "\n"
                            + "Size : " + sSize + "\n" 
                            + "Colour : " + strColour + "\n" 
                            + "Price : " + strPrice + "\n"
                            + "Quantity : " + strQuantity);
                    viewDetail.setPositiveButton("OK",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    dialog.dismiss();
                                }
                            });
                    viewDetail.setNegativeButton("Cancel",
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    dialog.dismiss();
                                }
                            });
                    viewDetail.show();

                }
            });

            // sale list retrieve

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public String getJSONUrl(String url, List<NameValuePair> params) {
        StringBuilder str = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(params));
            HttpResponse response = client.execute(httpPost);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) { // Download OK
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    str.append(line);
                }
            } else {
                Log.e("Log", "Failed to download file..");
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return str.toString();
    }

} 
```

如果您想要更多信息代码，请告诉我.. 非常感谢

编辑：这是我的welcome_page.xml，感谢您的回答

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/wood">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="branch :"
            android:textSize="20dp" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="branch1"
            android:textSize="20dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/sale"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="sale" />

        <Button
            android:id="@+id/request"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:text="request" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="update list"
            android:textSize="20dp" /> 

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="300dp"
            android:ems="10"
            android:inputType="textMultiLine" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/update"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="update" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="vertical" >    

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_weight="1"
                android:text="Recently update" />    

            <TextView
                android:id="@+id/textupdate"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:text="27/10/55" />

        </LinearLayout>   
    </LinearLayout>    
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:50:06.417

线条

> 引起：com.app.possampleproject.WelcomeActivity.onCreate(WelcomeActivity.java:30) 处的 java.lang.NullPointerException

表示根本原因在 WelcomeActivity.java 的第 30 行，您在其中使用了一个为空的变量。

可能`findViewById(R.id.sale);`返回 null 因为它找不到按钮。你确定它存在并且有那个ID吗？

# mysql - 如何在数据库字段中按升序排列内容 (SQL)

> ID：13188145
> 
> 赞同：0
> 
> 时间：2012-11-02T01:46:03.470
> 
> 标签：mysql, sql

我在下面有这个查询：

```
 SELECT q.QuestionId,GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer
   FROM Question q
   INNER JOIN Answer an ON q.QuestionId = an.QuestionId
   GROUP BY an.QuestionId 
```

现在你可以在我的选择语句中看到我有这个字段`(DISTINCT Answer SEPARATOR '') AS Answer`。现在让我们在输出中说它在下面输出：

```
Answer

ECB
FDA 
```

我希望按字母顺序排列答案，以便它显示如下：

```
Answer

BCE
ADF 
```

有谁知道我需要在 SQL 中更改什么才能实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:48:27.117

您应该可以添加

```
ORDER BY ANSWER 
```

到查询的末尾以获得所需的结果。

注意：您可能希望将列别名为 COLLATED_ANSWER 以消除混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:36:59.717

阅读文档有时很有用。MySQL [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
 SELECT q.QuestionId,GROUP_CONCAT(DISTINCT Answer
                                   ORDER BY Answer
                                   SEPARATOR '') AS Answer
    FROM Question q
    JOIN Answer an ON q.QuestionId = an.QuestionId
GROUP BY an.QuestionId 
```

一定要看看使用合理的东西作为分隔符而不是''（什么都没有），否则你的答案会被混在一起。

# windows-phone - Windows phone 绘制矩形

> ID：13188147
> 
> 赞同：2
> 
> 时间：2012-11-01T14:49:53.277
> 
> 标签：windows-phone, image

我只想在 Windows Phone 画布中绘制一个矩形。我尝试了一些技巧，但每次我都未能完成我的工作。我想绘制这个矩形并像在桌面版本的 windows 的绘制应用程序中一样使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:32:19.753

有两个示例供您使用，您可以从以下链接下载。

[示例项目 1](http://windowsphonegeek.com/tips/drawing-in-wp7-2-drawing-shapes-with-finger)

[示例项目](http://fingerpaint.codeplex.com/)

# jquery - 如何将鼠标悬停在图像上以显示第二张图像？

> ID：13188148
> 
> 赞同：0
> 
> 时间：2012-11-02T01:46:46.137
> 
> 标签：jquery, animation, hover

我最近开始学习jquery，我想问以下问题。

假设我想做这个[http://jsfiddle.net/gnVud/172/](http://jsfiddle.net/gnVud/172/)。

基本上，当我将鼠标悬停在主图像上时，我希望第二张图像与缩放图标一起出现。我所做的是工作，但我 100% 确定这不是正确的方法。所以

1）现在我正在做

```
zoom.on('mouseenter',function() {
    image.stop(true,true).fadeTo(100,1);
});
zoom.on('mouseleave',function() {
    image.stop(true,true).fadeTo(100,0.5);
}); 
```

所以当它在缩放图像上时，主图像就像悬停在它之外。如果我将 mouseenter 事件放在主图像上，那么当我将鼠标悬停在缩放上时它会闪烁。那么正确的方法是什么？我写的东西很有效，但我很确定这一定是一种更好的方法。

2）现在我正在使用 find 两次。一个在 mouseenter 一个在 mouseeleave 上。有没有办法让它们全球化？

3）现在我在主 div 上有一个事件，最后我使用了一个选择器。这比拥有更好`$('.cont').on`吗？是一样的吗？

# c++ - 使用查找表在链表中查找圆

> ID：13188149
> 
> 赞同：1
> 
> 时间：2012-11-02T01:47:14.747
> 
> 标签：c++, map, linked-list, hashmap

我试图在链表中找到一个圆圈，并返回圆圈开头的节点。例如，如果列表是 A -> B -> C -> D -> C - 我们将返回 C

这是我的代码：

```
ListNode<T> * findCircle()
{
  map<ListNode<T>*, bool> addresses;

  ListNode<T>* node = head;

  if(addresses.find(node)->second)
    cout << " wtf " << endl;

  while(node)
  { 
    if((addresses.find(node))->second)
    {
      return node;
    } 
    else
      addresses.insert(pair<ListNode<T>*,bool>(node, 1));

    node = node->next;
  }

  return NULL;

} 
```

我有几个问题：

1）这是解决问题的正确方法吗

2）我是否使用最有效的方法在表中查找/插入键和值

3）为什么它不起作用？当我在地图中检查 head 时，在我插入 head 之前，它仍然执行 if 语句并打印“wtf”。我的算法是如果在地图中找不到节点，则将其作为具有真值的键插入，否则如果该键已经在地图中，则返回该节点。

我尝试使用 std::set 执行此操作，但它给我带来了麻烦，所以我切换到 map。令我困惑的是，以下代码使用完全相同的方法工作（使用查找表删除链表中重复项的代码）。

```
 void removeDuplicates()
    {
      map<T, bool> listData;

      ListNode<T> *node;
      ListNode<T> *prev = node;
      for(node = head; node; node = node->next)
      {
        if(listData.find(node->data)->second)
        {
          prev->next = node->next;
          delete node;
        }
        else
        {
          listData.insert( pair<T, bool>(node->data, 1));
        }
        prev = node;
      }
    } 
```

第二个代码块完成了它应该做的事情，而第一个代码块却没有，这只是侥幸吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:01:46.550

您需要检查 find 操作是否真的找到了数据

```
auto iterator itr = address.find(node);
if(itr != address.end()){
    if(itr->second == true){ cout << "WTF" << endl; }
} 
```

while 循环类似。至于您的方法，我认为它具有 O(n) 的最佳运行时间。你所能做的就是降低常数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:02:17.653

```
addresses.find(node)->second 
```

当前在`find()`失败时会产生未定义的行为，因为您正在尝试访问`second`结束迭代器的字段。相反，使用

```
addresses.find(node) != addresses.end() 
```

另外：找到一个循环的确切位置是否重要（这就是它通常所说的），或者你只是想看看一个循环是否存在？如果是后者，那么一个非常聪明的算法可以仅使用两个指针在线性时间和恒定空间中解决问题，其中一个指针的移动速度是另一个指针的两倍 :)

# ruby-on-rails-3 - 循环日期并垂直列出

> ID：13188154
> 
> 赞同：1
> 
> 时间：2012-11-02T01:47:53.140
> 
> 标签：ruby-on-rails-3

我正在尝试垂直列出月份的日期，到目前为止，我的表格如下所示：

![在此处输入图像描述](../Images/bfeb5828d8174229da3e2a4e6a8383a4.png)

我有今天的日期，但是我需要垂直列出从今天开始的 18 天。以及针对这些日期生成单元格。从我的 index.html.erb 我了解到`@dates`我的控制器中没有正确设置以下变量。

> `@dates`变量设置不正确，如果您将语句 <%= debug @dates %> 添加到您的视图中，您可以检查它是什么

控制器：[Gist - Controller.rb](https://gist.github.com/3998126)

索引：[要点 - Index.html.erb](https://gist.github.com/3998129)

型号：[Gist - Model.rb](https://gist.github.com/3998134)

我知道我需要更改我的控制器的索引操作，以便它能够列出从今天起 18 天的内容。我正在考虑做一些类似的事情.. -`Time.now+18.days`但是我不确定这样的事情是否能解决我的问题？因为我不完全确定如何在我的控制器中实现它。最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:29:18.197

```
t1 = Date.today
t2 = Date.today.end_of_month
@dates = (t1..t2).to_a 
# (t1..t2) is a Range object - .to_a call will change it to an array object with values in the range as elements 
```

# c# - XNA(C#) 中 Vector2.Transform() 和 Vector2.TransformNormal() 有什么区别

> ID：13188156
> 
> 赞同：4
> 
> 时间：2012-11-02T01:48:17.397
> 
> 标签：c#, xna, game-engine, game-physics

我正在用 XNA (C#) 开发游戏，我想知道如何使用 2 个版本的转换。在我的想法中，这个函数的作用是：

（假设向量来自`Matrix.Identity`）

*   `Vector2 resultVec = Vector2.Transform(sourceVector, destinationMatrix);`用于**位置向量**变换。

*   `Vector2 resultVec = Vector2.TransformNormal(sourceVector, destinationMatrix);`用于变换**速度向量**。

真的吗？。谁知道详细解释，请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T16:29:56.123

简单的答案是——

`Vector2.Transform()`将整个应用于`Matrix`向量，而

`Vector2.TransformNormal()`仅将 的 Scale 和 Rotational 部分应用于`Matrix`向量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T02:19:02.727

通过变换，函数将源向量与生成的矩阵相乘。

*   `Transform()`用于表示 2D 或 3D 空间中的位置的向量。详细地说，这将采用 Invert 矩阵的 Transpose（T 运算符）表示您的坐标。

在数学：`retVec = T(M ^ -1) x srcVec`。

*   `TransformNormal()`用于方向、切线向量。这保留了矩阵。

在数学：`retVect = srcVec x M`。

*要将向量从一个矩阵/坐标转换为另一个（例如 M1 到 M2）* **`retVec = Transform by M1 -> then transform by invert of M2`**：

```
 Vector2 retVec = Vector2.Transform(vectorInSource, M1);

        Matrix invertDestMatrix = Matrix.Invert(M2);
        outVect= Vector2.Transform(retVec , invertDestMatrix); 
```

# sql - 将不同的行属性转置/旋转为列并将另一个属性分组？

> ID：13188158
> 
> 赞同：4
> 
> 时间：2012-11-02T01:48:26.760
> 
> 标签：sql, sql-server, pivot

> **可能重复：**
> [SQL Server 动态 PIVOT 查询？](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)

是否可以对下表执行查询：

```
Game    Player  Goals
-----   ------  ------
Game1   John    1
Game1   Paul    0
Game1   Mark    2
Game1   Luke    1
Game2   John    3
Game2   Paul    1   
Game2   Luke    1
Game3   John    0
Game3   Mark    2 
```

这给出了这样的结果：

```
Game    John    Paul    Mark    Luke
-----   ----    ----    ----    ----
Game1   1       0       2       1
Game2   3       1       -       1
Game3   0       -       2       - 
```

它将每个不同的玩家变成一列，并将游戏分组，为每位玩家提供每场比赛的目标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T02:26:19.670

您可以使用该`PIVOT`功能。如果您有已知数量的列，则可以对这些值进行硬编码：

```
select *
from
(
  select game, player, goals
  from yourtable
) src
pivot
(
  sum(goals)
  for player in ([John], [Paul], [Mark], [Luke])
) piv
order by game 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e069c/2)

如果您有未知数量的列，那么您可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(player) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT game, ' + @cols + ' from 
             (
                select game, player, goals
                from yourtable
            ) x
            pivot 
            (
                sum(goals)
                for player in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/99a96/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T02:18:38.430

```
select game,
  sum(case when player = 'john' then goals else 0 end) as john,
  sum(case when player = 'paul' then goals else 0 end) as paul,
  sum(case when player = 'mark' then goals else 0 end) as mark,
  sum(case when player = 'luke' then goals else 0 end) as luke
from t
group by game
order by game 
```

# android - 升级生产 Android 应用程序的 SQLite 数据库，这是正确的吗？

> ID：13188161
> 
> 赞同：5
> 
> 时间：2012-11-02T01:49:11.780
> 
> 标签：android, database, sqlite, upgrade

正如标题所说，我有一个安装了大约 1000 次的生产 Android 应用程序。我必须在 SQLite 中进行数据库更改，到目前为止，SQLite DB 的版本已设置为版本“1”。

希望我在评论中充分解释了下面的代码，此代码位于我的 SQLiteOpenHelper 类中，因此 onUpgrade 方法是该类的一部分：

```
// Provides an upgrade path for the DB when the apps version is updated.
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        // First version of the DB was 1\. Logic: each if statement will
        // alter the DB cumulatively based on the version code. So, if the
        // newVersion was version 3, there would be two if statements, one
        // for oldVersion 1 and one for oldVersion 2\. oldVersion 2 will
        // contain the logic for upgrading from version 2 to 3, while
        // oldVersion 1 will contain a combination of alter statements
        // allowing the database to upgrade from version 1 directly to
        // version 3.
        if (oldVersion == 1) {
            db.execSQL("ALTER TABLE plans ADD COLUMN " + App.CURRENCYCODE
                    + " TEXT");
            Locale locale = Locale.getDefault();
            ContentValues content_values = new ContentValues();
            content_values.put(App.CURRENCYCODE, locale.toString());

            db.update(App.DBPLANS, content_values, App.ID + " > ?", new String[] {
                    "0"
            });
        }

        if (oldVersion == 2) {
            // Placeholder for next database upgrade instructions.
        }
    } 
```

如果这里有任何陷阱，请告诉我。到目前为止，它的测试很好，尽管我非常担心会搞砸我的第一次数据库升级。我有大约 1,000 个用户，我不想失去所有用户。

再次感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T02:05:42.910

当我需要像这样更新数据库时，我通常使用 switch 语句来完成，这样情况就会相互影响，例如：

```
switch (oldVersion) {
    case 1:
        // update to version 2
        // do _not_ break; -- fall through!
    case 2:
        // update to version 3
        // again, do not break;
    case 3:
        // you're already up to date 
```

这样做的好处是，当您继续更改数据库时，您最终不会在多个 if 语句中重复更新语句，并且添加数据库更新只需要添加新的 case 语句，而不是更新多个代码块。

有时也有例外，例如在一个版本中添加了一个列，但在以后的版本中删除了，所以你需要在使用时注意。

# ruby-on-rails-3 - Rails 路由配置

> ID：13188163
> 
> 赞同：0
> 
> 时间：2012-11-02T01:49:40.237
> 
> 标签：ruby-on-rails-3

我有一系列想要编辑的项目。编辑我的 URL 的当前格式时，显示如下：

```
http://mysite/items <---- Lists the items
http://mysite/items/1/ <------ more detailed view of items
http://mysite/items/1/edit <----- Ability to edit the item 
```

我想尝试并应用于我的结构的路由配置如下所示：

```
http://mysite/items <---- Lists the items
http://mysite/item <---- Detailed view of the item by sending the item ID as POST data
http://mysite/item/edit <---- Edits the item by sending the item ID as POST data 
```

这严格来说是rails路由配置的一个事件，还是我必须配置`items`页面中的链接来专门构建URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:42:55.417

尝试这个：

```
#config/routes.rb
#assuming your actions are in ItemsController
match 'items' => 'items#index', :via => :get
match 'item' => 'items#show', :via => :post
match 'item/edit' => 'items#edit', :via => :post 
```

请注意，这更适用于遗留应用程序/URL，因为 Rails 约定遵循 RESTful 映射。[路由指南](http://guides.rubyonrails.org/routing.html)中的更多信息。

# jquery - Object [object Object] 没有方法 'button' ，使用 Asp.Net MVC4 和 nuget 包中的 JQuery 和 JQuery UI

> ID：13188165
> 
> 赞同：1
> 
> 时间：2012-11-02T01:49:52.917
> 
> 标签：jquery, asp.net-mvc

我不明白为什么我不能让我的按钮工作。

```
Object [object Object] has no method 'button' 

<button id="bt">Button with icon only</button>

<script type="text/javascript">
    $(document).ready(function () {
        $("#bt").button();
    });
</script> 
```

我有：

```
 @Scripts.Render("~/bundles/jquery")
 @Scripts.Render("~/bundles/jqueryui")

 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));

 bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                    "~/Scripts/jquery-ui-{version}.js")); 
```

加载页面时，我看到 jquery-ui-1.9.0.js jquery-1.8.2.js 加载正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:20:49.087

JQuery 被加载了两次，一次是在 JQuery UI 之前和之后，这就是它不起作用的原因。

# c# - 如果集合为空，如何返回默认值？

> ID：13188172
> 
> 赞同：1
> 
> 时间：2012-11-02T01:50:31.563
> 
> 标签：c#, .net, linq

（`Fees`是`Fee`对象的集合。）

如果 Fees 集合为空，我想分配一个默认值`0`to `FeeValue`。

以下是我目前所做的。但是，我不希望*新建*一个费用实例。有什么替代方法可以写这个？谢谢！

```
from w in Widgets
select new {
  FeeValue = w.Fees.DefaultIfEmpty(new Fee()).First().Value, // Value is a Double
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:55:50.890

你的问题有点混乱，但我想我知道你在问什么......

像这样的东西：

```
Widgets
    .Select(w => 
        new 
        {
            FeeValue = w.Fees.Select(f => f.Value).DefaultIfEmpty(yourDefaultValue)
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:33:39.220

如果你想避免空的 Select() 这也应该工作：

```
Widgets
.Select(w => 
    new 
    {
        FeeValue = w.Fees.DefaultIfEmpty(yourDefaultValue).First()
    }); 
```

# vb.net - List.add 覆盖列表 VB.NET 中的先前项目

> ID：13188174
> 
> 赞同：2
> 
> 时间：2012-11-02T01:50:48.520
> 
> 标签：vb.net, list

嗨，我写的自定义对象列表有一点问题。当我使用 list.add(xxx) 方法时，它不会简单地将 xxx 对象附加到我的列表中，而是将每个项目都转换为 xxx，我不知道如何修复它。这是我的自定义类的声明：

```
Public Class User

Private Shared n As String
Public Shared Property Name() As String
    Get
        Return n
    End Get
    Set(ByVal value As String)
        n = value
    End Set
End Property
Sub New(ByVal name As String)
    User.Name = name
End Sub

End Class 
```

这就是我调用 list.add 方法的地方

```
Public Class Form1
    Private Sub subname
        Dim temp As New User
        Dim data As New List(Of User)
        For Each item As String In ListBox1.Items
            data.Add(New User(item))
        Next
    End Sub
End Sub 
```

PS 是的，我已经阅读了一些关于人们遇到同样问题但不了解如何将他们的解决方案应用于我的项目的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:54:08.087

你的问题是`Shared`财产和私人成员。`Shared`成员在类的所有实例之间共享。如果您在一个实例中设置它，则所有实例都将相同。

```
Private Shared n As String
Public Shared Property Name() As String
  ...
End Property 
```

删除关键字`Shared`，它应该可以按预期工作。

```
Private n As String
Public Property Name() As String
  ...
End Property 
```

# ruby-on-rails - Ruby on rails：可变数量的输入框

> ID：13188178
> 
> 赞同：0
> 
> 时间：2012-11-02T01:51:08.927
> 
> 标签：ruby-on-rails, ruby, web

我正在开发一个应用程序，用户需要能够在提交表单中一次上传多个文件。理想情况下，我会从三个文件上传字段开始，其中包含一个“添加其他文件”按钮，可以动态添加输入字段。我当然可以使用 Javascript 来处理这个问题，但是我将如何访问我的控制器中的这个文件“数组”呢？

我查看了一些罐装解决方案，但它们比我需要的要华丽得多，而且我也不需要 ajax 上传 - 只需常规的旧提交就可以了。

所以，总结一下：在 Rails 应用程序中访问零个或多个上传文件的最佳方式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:49:41.163

没关系，我通过“nested_form”红宝石宝石找到了我想要的东西。

# jquery - 无法在弹出式灯箱上输入文本字段

> ID：13188183
> 
> 赞同：0
> 
> 时间：2012-11-02T01:52:08.350
> 
> 标签：jquery, html, css, textinput

我在 jQuery 中创建了一个灯箱，它显示了一个文本输入字段，但由于某种原因我无法在输入字段中输入，它会自动取消选择。如果我按住鼠标按钮并开始输入，那么它会起作用，但是一旦我松开它，它就会删除所有文本。知道为什么会发生这种情况吗？

这是我的代码（对不起，我知道很多，但灯箱没有出现在 jsfiddle 中）

HTML

```
<div id="submitanswerbutton">
<a href="#answer-box" class="login-window"><div class="btn btn-primary">Ask a Question</a></div>
<div id="answer-box" class="answer-popup">

</div>
</div>​ 
```

CSS

```
 #submittextbutton{
float:right;
margin-top:5px;
margin-right:12px;
}

 #mask {
display: none;
background: #000; 
position: fixed; left: 0; top: 0; 
z-index: 10;
width: 100%; height: 100%;
opacity: 0.5;
z-index: 999;
 }

 .answer-popup{
display:none;
font-size:14px;
background: #333;
padding: 10px;     
width:250px;
height:300px;
border: 1px solid black;
float: left;
font-size: 1.2em;
position: fixed;
top: 50%; left: 50%;
z-index: 99999;
box-shadow: 0px 0px 20px #333333; /* CSS3 */
    -moz-box-shadow: 0px 0px 20px #333333; /* Firefox */
    -webkit-box-shadow: 0px 0px 20px #333333; /* Safari, Chrome */
border-radius:13px 13px 13px 13px;
    -moz-border-radius: 13px; /* Firefox */
    -webkit-border-radius: 13px; /* Safari, Chrome */
 }

 .answer-popup a {
color:white;
font-size:14px;
text-decoration:none;
background:#333;
} 
```

​</p>

JS

```
// Clicking on Ask a Question button on Answers page
$(document).ready(function() {
    $('body').on('click', '#submitanswerbutton', function(event){

                //Getting the variable's value from a link 
        var answerBox = $(this).attr('href');

        //Fade in the Popup
        $('.answer-popup').fadeIn(300);

        //Set the center alignment padding + border see css style
        var popMargTop = ($(answerBox).height() + 24) / 2; 
        var popMargLeft = ($(answerBox).width() + 24) / 2; 

        $(answerBox).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);

        return false;
    });

    // When clicking on the mask layer the popup closed    
    $('#mask').live('click', function() { 
      $('#mask , .answer-popup').fadeOut(300 , function() {
        $('#mask').remove();  

    }); 
    return false;
    });
});

// load Answers when click questions via Ajax
// load Answer when clicking question
$(document).ready(function() {
    var url;
    $('.question a').click(function(ev) {
        url = $(this).attr('href');
        $('.answers').load('http://127.0.0.1:8000'+url, function(response){
        });
    return false;
    });

    $('body').on('click', '#submitanswerbutton', function(ev) {
        var pathname = window.location.pathname;
        $('.answer-popup').load(url+'add_answer/');
    });
    return false;
});    ​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:37:20.217

将#answer-box div 移到#submitanswerbutton div 之外：

```
<div id="submitanswerbutton">
    <a href="#answer-box" class="login-window"><div class="btn btn-primary">Ask a Question</a></div>
</div>
<div id="answer-box" class="answer-popup"></div>​ 
```

如果答案框 div 在第一个 div 中，那么每次单击答案框（例如将光标放入文本框）时，您最终都会调用 body click 事件，该事件会打开另一个答案框！

看到这个工作小提琴：http: [//jsfiddle.net/manishie/2vmCy/](http://jsfiddle.net/manishie/2vmCy/)

# javascript - 创建 HTML 表单并返回用户输入的 JavaScript 函数

> ID：13188185
> 
> 赞同：4
> 
> 时间：2012-11-02T01:52:34.153
> 
> 标签：javascript, forms, return, wait

我想创建一个 JavaScript 函数，该函数将创建一个 HTML 表单并返回用户在表单中输入的输入。我愚蠢的第一次尝试是这样的：

```
function getInput() {
    $('#somediv').html( "<input type='button' id='mybutton' name='Click Me'></input>" );
    $('#mybutton').click( function() { return "result"; } );
}

result = getInput();

alert( result ); 
```

（实际情况比较复杂，用户必须先输入一些文字，然后在几个不同的按钮之间进行选择，返回值取决于输入的文字和选择的按钮，但我认为这些都是外围问题，所以我把它们省略了）。如果我按照书面方式运行它，我会收到警报“未定义”，我想要的是警报“结果”。本质上，我希望该函数在被明确告知之前不要返回。有什么办法可以做到这一点？如果不是，那么在精神上与上述类似的最简单的解决方法是什么？

这里提出了一个非常相似的问题：[JavaScript 暂停执行函数以等待用户输入](https://stackoverflow.com/questions/5551378/JavaScript-pausing-execution-of-function-to-wait-for-user-input)。恐怕我只是无法很好地理解这些反应以适应我的特殊情况。也许有人可以建议如何这样做，或者从头开始也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:27:12.453

以这样的形式等待用户输入是不可能的。您需要将其分成两部分来处理异步请求。

```
function getInput(callback) {
    $('#somediv').html( "<input type='button' id='mybutton' name='Click Me'></input>" );
    $('#mybutton').click( function() { callback("result"); } );
}

function processInput (result) {
    alert(result);
}

getInput(processInput); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:41:56.580

我认为您正在寻找的是事件委托，使用事件委托您可以在按钮添加到表单之前将您的函数*绑定*到您的函数。`#mybutton`

例如使用[.on()](http://api.jquery.com/on/)

```
 $(document).on('click', '#mybutton', function() {
  //your code here
}); 
```

事件委托背后的基本思想是利用 JavaScript 事件冒泡这一事实，因此您所做的是将事件绑定到*更高级别*的元素，`DOM`然后检查它的来源，只要更高级别在您绑定事件时存在。

# c - C 中的运算符：不大于等于。

> ID：13188186
> 
> 赞同：4
> 
> 时间：2012-11-02T01:52:42.253
> 
> 标签：c, operators

只是一个快速的问题：

我正在尝试测试一个变量是否不大于或等于另一个变量。

我将其编码为：

```
if (f!>=i){
print ("True");} 
```

但我的 c 编译器无法识别它。我在网上找不到，可以吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T01:54:27.443

只需将其更改为`(f < i)`is `!(f >= i)`。

*注意：如果`f`或`i`是则不是这种情况`NaN`。这是因为`f >= i`将评估 to`false`如果其中任何一个`NaN`导致`!(f >= i)`评估到`true`where`f < i`评估到`false`。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T01:54:01.373

你想做：`if (!(f>=0))...`

具体到你正在做什么，使用`<`更有意义。我在这里的建议只是为了在任何 if 语句上反转极性的通用方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T01:54:34.150

不大于或等于等于小于。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-29T00:08:27.513

使用 aliter ie 而不是`!>`反向思考并使用`f<i` ，你不能使用！对于多个运算符，即 !+= 无效

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-11T16:39:17.800

你可以这样写：

```
if(!(anyvariablename<0)) 
```

# perl - Windows 7 上的 ActivePerl ppm 问题，无法验证已安装的模块

> ID：13188187
> 
> 赞同：1
> 
> 时间：2012-11-02T01:52:52.590
> 
> 标签：perl, cpan, activeperl

几天前，当我安装了许多与电子邮件相关的模块时，我的 ppm 正在工作，它可以很好地安装和验证每个模块。但是现在它有一个问题，让我举个例子：

> ppm 安装电子邮件::简单
> 
> 没有要安装的软件包
> 
> ppm 验证电子邮件::简单
> 
> ppm 验证失败：未安装包 'email::simple'

我用我编写的使用这个模块的脚本进行了测试，它编译和运行得很好。但是，它不适用于我后来安装的另一个模块。

> ppm 安装电子邮件::received
> 
> 没有要安装的软件包
> 
> ppm 验证电子邮件::received
> 
> ppm 验证失败：未安装包 'email::received'
> 
> perl test.pl "文件"
> 
> 无法在 test.pl 第 17 行的 @INC 中找到 Eamil/Received.pm（@INC 包含：C:/Perl64/site/lib C:/Perl64/lib。）BEGIN failed-compilation 在 test.pl 中止第 17 行。

我自己验证了文件 received.pm 安装在 Perl64/site/lib/email/ 下。为什么编译器无法识别此模块？

PS：我还可以看到 email::received 模块是使用 GUI ppm 安装的。我尝试重新安装 ActivePerl 但问题仍然存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:57:42.463

```
Can't locate Eamil/... 
```

“埃米尔”应该是“电子邮件”。修正你的错误`use`陈述。

* * *

至于您无法验证安装，`verify`预计`ppm verify Email-Received`.

# ios - 隐藏一个导航栏时，NavigationBar 与嵌套 UINavigationController 的状态栏重叠

> ID：13188188
> 
> 赞同：2
> 
> 时间：2012-11-02T01:52:53.980
> 
> 标签：ios, uinavigationcontroller

我遇到了看起来像错误的行为。我有一个 UINavigationController，其中包含一个 tabBarController。那个tabBarController有5个以上的tab，所以有一个more按钮，用来加载MoreController的navigationController。当然，这会创建嵌套的导航控制器，所以我想隐藏其中一个导航栏。

我通过使我的 ApplicationDelegate 成为 UINavigationControllerDelegate 来做到这一点：

```
 [[tabBarController moreNavigationController] setDelegate:[UIApplication sharedApplication].delegate]; 
```

并实施：

```
(void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
   navigationController.navigationController.navigationBarHidden = YES;
} 
```

但是，我最终将状态栏重叠：

![重叠的](../Images/fcfeb5daea402c2093748afa6745fa61.png)

现在，如果我添加一些代码来手动修复框架，状态栏上仍然有一些奇怪的颜色覆盖，现在导航栏下方有一个黑色间隙。是什么赋予了？

![还是错了](../Images/f30acf34b05e5e37b7ca2c7dd7c0de20.png)

# c++ - 在 Qt 中编辑富文本时遇到问题

> ID：13188192
> 
> 赞同：0
> 
> 时间：2012-11-02T01:53:21.093
> 
> 标签：c++, qt, rte

我正在尝试将富文本编辑添加到我的应用程序中，但我似乎无法让它工作。这只是一个例子，但我无法让它工作。谁能告诉我我错过了什么？

这是我到目前为止的代码......这是在`.h`文件中

```
private slots:
void newFile();
void open();
bool save();
bool saveAs();
void about();
void documentWasModified();
void bold(); 
```

这是在`.cpp`文件中......我也有`#include <QTextEdit>`

```
 void MainWindow::bold()
{
} 
```

再加上这一页

```
boldAct = new QAction(tr("&Bold"), this);
    boldAct->setCheckable(true);
    boldAct->setShortcut(QKeySequence::Bold);
    boldAct->setStatusTip(tr("Make the text bold"));
    connect(boldAct, SIGNAL(triggered()), this, SLOT(bold())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:55:29.650

QAction 信号的签名不正确。它应该是

```
connect(boldAct, SIGNAL(triggered(bool)), this, SLOT(bold())); 
```

甚至

```
connect(boldAct, SIGNAL(triggered(bool)), SLOT(bold())); 
```

[QObject::connect()](http://qt-project.org/doc/qt-4.8/qobject.html#connect)也返回一个布尔值，描述连接成功。

[QMetaObject::checkConnectArgs()](http://qt-project.org/doc/qt-4.8/qmetaobject.html#checkConnectArgs)用于验证信号和槽是否可以连接。

# objective-c - UITableView - 当滚动太快时，最后一个单元格的内容会替换第一个单元格

> ID：13188193
> 
> 赞同：5
> 
> 时间：2012-11-02T01:53:31.567
> 
> 标签：objective-c, ios, uitableview

这可能是由于设计不佳造成的，但是当我滚动表格太快，然后滚动回顶部时，放置在最后一个表格单元格中的视图也会放在 tableView 中的第一个表格单元格上。

我认为这可能是由于我使用 if 语句将一些静态内容放在第一部分而将动态内容放在第二部分造成的。

任何帮助表示赞赏。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...

    if (indexPath.section == 0) {

        if (indexPath.row == 0) {

            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            UITextField *textField = [[UITextField alloc]initWithFrame:CGRectMake(10, 13, 282, 20)];
            textField.clearsOnBeginEditing = NO;
            textField.placeholder = @"enter template name";
            textField.font = [UIFont systemFontOfSize:15.0];
            textField.clearButtonMode = UITextFieldViewModeWhileEditing;
            textField.delegate = self;
            textField.text = [selectedTemplate name];
            [textField addTarget:self action:@selector(nameDidChange:) forControlEvents:UIControlEventEditingChanged];
            [cell.contentView addSubview:textField];

        } else {

            cell.textLabel.text =  @"Add a new question";
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        }

    } else {

        NSString *label = [[sortedQuestions valueForKey:@"questionText"] objectAtIndex:indexPath.row];
        CGSize stringSize = [label sizeWithFont:[UIFont boldSystemFontOfSize:15] constrainedToSize:CGSizeMake(230, 9999) lineBreakMode:NSLineBreakByWordWrapping];

        UITextView *textV=[[UITextView alloc] initWithFrame:CGRectMake(5, 5, 230, stringSize.height+10)];
        textV.font = [UIFont systemFontOfSize:15.0];
        textV.text=label;
        textV.textColor=[UIColor blackColor];
        textV.editable = NO;
        textV.userInteractionEnabled = NO;
        textV.backgroundColor = [UIColor colorWithRed:0.97f green:0.97f blue:0.97f alpha:1.00f];
        [cell.contentView addSubview:textV];

        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T03:12:28.633

这是我根据 Wienke 的建议最终做的事情。我在情节提要中添加了 3 个原型单元，名为 Cell、Cell2、Cell3。

相关代码：

```
static NSString *CellIdentifier = @"Cell";
static NSString *CellIdentifier2 = @"Cell2";
static NSString *CellIdentifier3 = @"Cell3";

UITableViewCell *cell;

if (indexPath.section == 0 && indexPath.row == 0) {

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

} else if (indexPath.section == 0 && indexPath.row == 1) {

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier2 forIndexPath:indexPath];

} else if (indexPath.section == 1) {

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier3 forIndexPath:indexPath];

} 
```

我还添加了这个来检查我的动态单元格，并在添加新子视图之前删除任何可能存在的挥之不去的子视图。

```
 if ([cell.contentView subviews]){
        for (UIView *subview in [cell.contentView subviews]) {
            [subview removeFromSuperview];
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-25T16:01:18.007

我知道这已经有一个公认的答案，但我想我会更深入地了解发生这种情况的“原因”和解决方案。

用外行的话来说，`UITableView`刷新速度落后于要求的演示速度。换句话说，由于快速滚动，预计表格视图重新填充内容的速度要快于它对预期单元格进行排序以重用于其各自的索引（行）的速度。

[Wienke](https://stackoverflow.com/users/471678/wienke)提到的最简单的解决方案是为第一个单元创建**不同**的单元标识符，比如说三 (3) 个单元。这将使表格视图能够清楚地区分 3 个单元格，防止任何单元格错位。

也许这里最好的方法是为每个单元分配相关的单元标识符（取决于上下文和单元的数量）。通过这种方式，表格视图可以准确地知道哪个单元格（带有各自的 ID）去哪里。像下面这样简单的东西：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *cellID = [NSString stringWithFormat:@"cell%lu", indexPath.row];
    __kindof UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];

    if (!cell) {

        // Create your cell here.
        cell = [...allocate a new cell...] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];

    }

    return cell;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T02:02:47.067

它看起来像一个为第 0 行第 0 行布置的单元格正在出列并用于例如第 0 行第 1 行，它不会替换在它保存第 0 行时为其所做的所有设置第 0 行材料。

您可能需要考虑使用 3 个单独的单元格标识符，一个用于第 0 行第 0 行，一个用于第 0 行第 1 行，一个用于所有其余部分。您将需要一组初步的 if 语句（或 switch-case 语句），以便在调用时使用正确的标识符`dequeueReusableCellWithIdentifier:`。

# http-status-code-404 - Mechanize/Ruby读取404页面源码

> ID：13188195
> 
> 赞同：3
> 
> 时间：2012-11-02T01:53:37.463
> 
> 标签：http-status-code-404, mechanize

我所做的只是加载 mechanize，并获得一个返回 404 的页面。但这正是我想要的。404 页面有很多我想在我的示例中使用的 html。

```
a = mechanize.new
a.get('http://www.youtube.com/watch?v=e4g8jriw4rg')
a.page
=> nil 
```

我似乎无法找到有关此的任何进一步信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T03:56:57.413

您需要处理异常：

```
begin
  page = a.get 'http://www.youtube.com/watch?v=e4g8jriw4rg'
rescue Mechanize::ResponseCodeError => e
  puts e.response_code # the status code as a string, e.g. "404"
  page = e.page
end

puts page.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T18:16:25.240

*写答案时可能*是这种情况（代码大约在 5 年前更改），但现在不再如此。您现在可以`allowed_error_codes`在代理实例上设置整数或字符串数​​组，并将值设置为您希望无异常处理的 HTTP 响应代码。文档（在撰写本文时）指出“将在不检查此列表的情况下处理 2xx、3xx 和 401 状态代码。”

# python - 如何确定用户输入python的最大值和最小值之间有多少个数字

> ID：13188200
> 
> 赞同：0
> 
> 时间：2012-11-02T01:54:06.850
> 
> 标签：python, max, min

```
 for line in file:
    line = int(line)
    if line <= maximumValue:
        counter = counter + 1
    if line >= minimumValue:
        counter = counter + 1
    print (int(line))
file.close() 
```

我正在获取一个数字列表的文件，比如从 1 到 10。我想列出最大值和最小值，以及最小值和最大值之间的值。当我让我的程序打开文件时，它只打印出数字的总数，并不会消除那些高于最大值或低于最小值的数字。我在这里遗漏了什么，我能做些什么来纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:01:19.870

Python 支持正常（可读）不等式：

```
numbers = []
counter = 0

with open('filename.txt', 'r') as handle:
    for line in handle:
        number = int(line)

        if minimumValue <= number <= maximumValue:
            numbers.append(number)
            counter += 1

print(counter)
print(numbers) 
```

此外，用于`with`打开文件。您不必担心事后关闭它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:07:15.783

使用方便属性的示例`xrange`：

```
MIN = 3
MAX = 7

valid_range = xrange(MIN, MAX+1)
with open('file') as fin:
    nums = (int(line) for line in fin)
    valid_vals = [num for num in nums if num in valid_range]
    # or if you just want count of valid values
    count = sum(1 for num in nums if num in valid_range)

print valid_vals, len(valid_vals) 
```

# php - 预订日期的酒店预订查询

> ID：13188204
> 
> 赞同：0
> 
> 时间：2012-11-02T01:54:37.380
> 
> 标签：php, mysql, sql

如何将查询的结果放入数组中，结果应该比较每个结果并合并到一个数组中。

我有 3 个查询，我不知道我的编码有什么问题，我最好的还不够，所以请大家帮助我，尤其是 sql 和 php 专家。

这是我的代码：

```
 <?php
        $a = $p['id'];
        $query1 = mysql_query("SELECT id FROM prereservation where '$arrival' BETWEEN arrival and departure and room_id ='$a' and status = 'active'");
        $rows1 = mysql_fetch_array($query1);  

        $query2 = mysql_query("SELECT id FROM prereservation where '$departure' BETWEEN arrival and departure and room_id ='$a' and status = 'active'");
        $rows2 = mysql_fetch_array($query2);

        $query3 = mysql_query("SELECT id FROM prereservation where arrival > '$arrival' and departure < '$departure' and room_id ='$a' and status = 'active'");
        $rows3 = mysql_fetch_array($query3);

        $sample = array_unique(array_merge($rows1, $rows2, $rows3));             
        ?> 
```

显示是这样的：

```
 <select id="select" name="qty[]" style=" width:50px;" onchange="checkall()">
        <option value="0"></option>
        <? $counter = 1; ?>
        <? while ($counter <= ($p['qty']) - $????????) { ?>
        <option value="<?php echo $counter ?>"><?php echo $counter ?></option>
        <? $counter++;
        }?>
        </select> 
```

我想要的例如输出是这样的：

```
$rows1 = array(id= 48, 55, 51, 53)
$rows2 = array(id= 48, 49, 51, 52)
$rows3 = array(id= 48, 49, 50, 51)
$sample = array_unique(array_merge($rows1, $rows2, $rows3)) 
```

所以样本的输出是这样的：

```
$sample = array(id= 48, 49, 50, 51, 52, 53) 
```

然后在表格预订中，列是：“ **id** ”、“**到达**”、“**离开**”、“ **room_id** ”、“**数量**”和“**状态**”。

在我的表保留中，每个**id**都有***不同的**** *qty* *，所以我想要每个**id**的**qty****总和**，如下所示：

 ****```
 id    |   qty
    48    |    2
    49    |    1
    50    |    1
    51    |    3   
    52    |    1
    53    |    3  

$total = sum(qty); which is 11 
```

你们能帮我如何创建一个查询来获取每个***id***的这些***qty的******总和***吗？还请检查前**3 个**查询，因为我知道每个查询都有**错误**。获取**array_merge**和**array_unique**。非常感谢你们。

 ********```
 <select id="select" name="qty[]" style=" width:50px;" onchange="checkall()">
            <option value="0"></option>
            <? $counter = 1; ?>
            <? while ($counter <= ($p['qty']) - $total) { ?>
            <option value="<?php echo $counter ?>"><?php echo $counter ?></option>
            <? $counter++;
            }?>
            </select> 
```

这是我的数据库：

```
table rooms
id |  type   |  qty
---|---------|-----
11 | single  |  50
12 | double  |  50
13 | deluxe  |  20

table preservation
id |   arrival   |  departure  | room_id | qty | status
---|-------------|-------------|---------|-----|-------
48 | 05/11/2012  | 11/11/2012  |    11   |  2  | active 
49 | 06/11/2012  | 11/11/2012  |    11   |  1  | active 
50 | 06/11/2012  | 08/11/2012  |    11   |  1  | active 
51 | 05/11/2012  | 07/11/2012  |    11   |  3  | active 
52 | 06/11/2012  | 09/11/2012  |    11   |  1  | active 
53 | 07/11/2012  | 07/11/2012  |    11   |  3  | active 
```

所以在我的显示中，我有一个来自**桌子房间的选择标签（id = 11）**，选项是**数量**，并从桌子**保存（room_id = 11** **）**中**扣除****总**数量

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:07:34.583

使用一条 SQL 语句供您选择，

```
"SELECT id, SUM(qty) FROM prereservation GROUP BY qty WHERE ( ( '$arrival' BETWEEN arrival and departure and room_id ='$a' ) OR ( '$departure' BETWEEN arrival and departure and room_id ='$a' ) OR ( arrival > '$arrival' and departure < '$departure' and room_id ='$a' ) ) AND status = 'active'"; 
```

编辑：

好的，这样的事情呢？

```
SELECT *, (SELECT SUM(preservation.qty) as sum FROM preservation WHERE rooms.id = preservation.room_id GROUP BY preservation.room_id ) as qty_reserved, rooms.qty - (SELECT SUM(preservation.qty) as sum FROM preservation WHERE rooms.id = preservation.room_id GROUP BY preservation.room_id ) as qty_available  FROM rooms; 
```

访问数据库一次，获取所需的所有信息并在整个应用程序中重用这些信息，效率要高得多。如果只是显示这些变量，则您的 php 中不需要任何逻辑。****************

# java - 需要 Java 正则表达式的线索

> ID：13188205
> 
> 赞同：0
> 
> 时间：2012-11-02T01:54:40.373
> 
> 标签：java, regex

我需要从字符串中提取一些信息。

这是我收到的字符串（JAVA）： `45056 <LIGNE> 164 336 143 191 </LIGNE>`

这是我使用的正则表达式： `Pattern p = Pattern.compile("<(.*)>(.*)</\\1>");`

输出 ：`LIGNE 164 336 143 191`

我也想要5位数字，我不知道如何提取它。我试过了

`(\\d+)<(.*)>(.*)</\\1>`

但是，它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:58:39.513

尝试`(\\d+)\\s*<(.*)>(.*)</\\1>`注意`\\s*`数字组之后。这应该有助于匹配数字和括号之间的任何空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:58:46.633

不确定您到底想要什么，但这也应该打印出 5 位数字：

```
\\d{5}\\s+<([A-Z]+)>([^<]+)</\\1> 
```

# git - 同一台服务器上的生产、登台、开发网站和 git 存储库：如何设置 GIT_DIR 和 GIT_WORK_TREE

> ID：13188212
> 
> 赞同：3
> 
> 时间：2012-11-02T01:55:26.617
> 
> 标签：git, deployment, version-control, github, agile

我已经阅读了许多似乎让我接近但并非完全达到我想要的帖子的帖子。我有一台服务器。在它上面，我有 3 个网站：www.domain.com、staging.domain.com 和 dev.domain.com。我也在 local.domain.com 上进行开发，并使用 GitHub 作为我的中央存储库。

我想让我的 git 存储库远离我的网络根目录。我对如何做到这一点持开放态度。我正在尝试的是：

```
/home/user/git/production.git 
/home/user/git/staging.git
/home/user/git/development.git 
```

如果通过设置 GIT_DIR 和 GIT_WORK_TREE（我在 .bash_profile 中导出路径），我知道如果只有 1 个站点和 repo 该怎么做。

看来我可以在每个存储库中设置工作树`config`，例如：

```
[core]
    bare = false
    worktree = /home/user/domains/www.domain.com/public_html 
```

**但是我该如何设置`GIT_DIR`？**

因此，如果我在 /home/user/domains/ **www** .domain.com/public_html 并执行`git status`等等，它指的是**生产**git repo。如果我在 /home/user/domains/ **staging** .domain.com/public_html 中，它与**staging** .git 相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:08:27.373

而不是设置`$GIT_DIR`你可以使用 gitlink 文件。为此，只需进入每个工作树的根并运行：

```
echo "gitdir: /home/user/git/production.git" > .git 
```

这将`.git`在您的 Web 根目录中生成一个文件，但如果有人访问该文件，唯一会泄漏的就是存储库的路径。`$GIT_DIR`这将避免需要根据您所在的目录设置变量来玩游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:19:32.407

你想做什么？

在您的工作目录中时，`/home/user/git/production.git`它应该检测到工作目录，`/home/user/domains/www.domain.com/public.html`并且 push/pull/checkout 应该在那里正常工作。不幸的是，git 不是通灵的——从没有`.git`文件夹的随机目录中，git 甚至不知道在哪里寻找配置文件（没有[“gitdir”文件](http://www.kernel.org/pub/software/scm/git/docs/gitrepository-layout.html)，正如我刚刚从另一个答案中了解到的那样）。

你总是可以通过`git --git-dir=~git/production.git checkout ...`等等，但我敢打赌你正在寻找一个自动化的解决方案。

也许尝试将 git 包装在 shell 脚本中？如果你把它写成`~/bin/autogit`：

```
#!/bin/bash
DIR=$(pwd)
if (fgrep -q domains/www.domain.com <<< "$DIR"); then
  git --git-dir=/home/user/git/production.git $@
elif (fgrep -q domains/staging.domain.com <<< "$DIR"); then
  git --git-dir=/home/user/git/staging.git $@
elif (fgrep -q domains/local.domain.com <<< "$DIR"); then
  git --git-dir=/home/user/git/development.git $@
fi
echo "Autogit failed from directory $DIR."
exit 1 
```

（旁注：为什么你有三个存储库？我发现拥有一个具有三个不同分支名称的存储库以及将每个分支签出到其相应目录的脚本更为常见。）

# opengl - 平面阻塞多分辨率体绘制

> ID：13188213
> 
> 赞同：2
> 
> 时间：2012-11-02T01:55:31.013
> 
> 标签：opengl, graphics, 3d, volume-rendering

为了将大量数据加载到我的光线投射体积渲染系统中，我想实现**平面阻塞多分辨率策略**- 将体积分成许多大小相等但分辨率或 LOD（细节级别）不同的子块子块的重要性。

我读了一篇论文，上面说我可以这样做：

通过分析内部数据的变化率，我们可以确定每个块的特殊LOD，以显示块的重要性。

*图 1：带有 2D 纹理的平面块*

![在此处输入图像描述](../Images/d5e6d814938de47b6994a150e4387c27.png)

根据平分块策略，块的维度必须是2的幂，即用2^n * 2^n * 2^n大小划分体积，因此对于每个块，有n+1个细节层次( 0-n)。由于内部数据的变化是区块重要性的数学基础，区块的每个细节层次可以用下面的公式来限定

*公式1 ：*

![在此处输入图像描述](../Images/da46d8863143ef8f813d3418b9a6167c.png)

这是第 i 个块的变化，avgi 表示某个父块的第 i 个子块中 2^(3 * max_l) 标量值的平均值，max_l 表示父块的最高细节层次， l 表示正在分析当前的详细程度。Sj 表示标量值。最后使标量值在约束条件下变化到[0,1]范围内。

我的问题是：正如它所说，在某个父块的第 i 个子块中有 2^(3 * max_l) 个体素，图像 1 中的子块和父块是什么？另外，按照公式，好像有2^(3 * (max_l - l))体素。看不懂~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:15:01.040

> 平面分块多分辨率策略——将卷分成许多大小相等的子块

“八叉树细分”将是更传统的术语，而不是“阻止多分辨率策略”。事实上，min|max octree 已经使用了几十年来加速体积光线投射，关于这个主题有大量的出版物和专利......

> 正如它所说，在某个特定的第 i 个子块中有 2^(3 * max_l) 个体素

如果（从根到叶的八叉树级别数为：0 -> max_l）

然后

2^(3 * max_l) 是所有体积中所有体素的数量。

和

2^(3 * (max_l - l)) 是级别“l”的细分体积（子体积）中的体素数

> 是区块重要性的数学基础

好吧，如果您这样定义它，那么它确实是一个“基础”；o）您应用的启发式方法确实是任意的；在这种情况下，您使用“标准偏差”作为衡量标准；显然，您可以对每个子卷应用其他措施，例如： (max-min)>>(max_l-l) 或 ((max-avg)*(avg-min))>>(max_l-l) 等...

# .htaccess - 带有子域和 zend 模块的 Htaccess

> ID：13188214
> 
> 赞同：0
> 
> 时间：2012-11-02T01:55:45.510
> 
> 标签：.htaccess

我有一个使用模块的 Zend Framework 应用程序设置。EG 我有一个“股票”模块和一个“交易”模块。我希望这些子域有多个子域，即 stock.website.com、transaction.website.com（因此 DocumentRoot 将是每个子域的同一目录）。问题是，因为它们是 Zend 应用程序“模块”，所以我必须访问 stock.website.com/stock 或 transaction.website.com/transaction。

我想知道是否有办法使用 rewriteCond 规则来识别子域，然后将该页面上加载的所有 URL 视为来自 stock.website.com/stock，但只有 stock.website.com 在地址栏？

目前，我有一个 zend 应用程序的标准 htaccess 规则。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:45:19.673

我建议您可以将 Zend Route Hostname 用于您的解决方案，因为 Zend 会根据主机名将请求（而不是 htaccess）路由到特定模块，因此您强调查询字符串 url 将不是问题。

基本上，您可以像下面这样添加到您的 application.ini 中（仅适用于模块）：

```
resources.router.routes.stock.type = "Zend_Controller_Router_Route_Hostname"
resources.router.routes.stock.route = "stock.yourwebsite.com"
resources.router.routes.stock.defaults.module = "stock"

resources.router.routes.transaction.type = "Zend_Controller_Router_Route_Hostname"
resources.router.routes.transaction.route = "transaction.yourwebsite.com"
resources.router.routes.transaction.defaults.module = "transaction" 
```

然后剩下的就让 Zend 来处理。

希望这会对你有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T01:34:54.377

```
RewriteCond %{HTTP_HOST} ^(.*)\.website\.com$ [NC]
RewriteRule ^(.*)$ /%1$1 
```

RewriteCond 应该与`whatever.website.com` RewriteRule 匹配，然后将 URL 从 映射`whatever.website.com/path`到`whatever.website.com/whatever/path`。

此规则集将在您现有的 RewriteRules 之间进行，并且您不会终止它，`[L]`以便 index.php 规则可以作用于结果 URL。

# ios - 模拟器和设备给出不同的结果

> ID：13188218
> 
> 赞同：6
> 
> 时间：2012-11-02T01:56:18.957
> 
> 标签：ios, ios-simulator

你们中是否有人遇到过您所做的更改仅反映在模拟器上而不反映在设备上的问题？

例如，如果我想为表格单元格设置选定的背景图像视图，则模拟器中的选择状态将显示更改，但在测试期间不会显示在设备上。

这种不一致开始让我担心，因为当需要部署到生产环境时，我怎么知道应用商店中的应用可以正常工作？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:03:14.503

> 你们中是否有人遇到过您所做的更改仅反映在模拟器上而不反映在设备上的问题？

是的，这已经发生在我身上很多次了。

> 这种不一致开始让我担心，因为当需要部署到生产环境时，我怎么知道应用商店中的应用可以正常工作？

当我第一次开始为 iPhone 开发时，我曾经不得不重写很大一部分代码，因为虽然它在模拟器中运行良好，但在 iPhone 上却不能正常运行。然后我意识到模拟器不是模拟器，也就是说，它不能完全复制 iPhone。

您需要经常在 iOS 设备上进行测试，以确保您的代码正常工作。那是 App Store 评论者将使用的以及您的用户将使用的，而不是模拟器。

在您的日常开发过程中，您可以使用模拟器以及您最快的设备，例如第 5 代 iPod Touch 和 iPhone 5。定期在开发结束时，最好在较旧、速度较慢、内存有限的设备上进行测试，尤其是可以运行您所定位的 iOS 版本的最旧版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:15:50.457

发生这种情况时您可以做的最好的事情是卸载您正在开发的应用程序，（额外措施）重新启动设备以清理任何应用程序缓存，最后从 XCode 进行干净的构建。像这样的事情经常发生在我身上，卸载我的应用程序然后进行干净的构建似乎一直都能解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T02:17:03.220

不一致会发生，这就是您需要在实际设备上进行测试的原因（以及为什么它是模拟器，而不是模拟器）。在这种情况下，很可能是由于 XCode 未能正确更新程序，尤其是笔尖。从手机中删除您的应用程序并重新安装。应用商店和 iTunes 使用不同的安装方法，因此您不必在商店中担心它。

# c# - 夜间模式的自定义 XAML 样式

> ID：13188223
> 
> 赞同：0
> 
> 时间：2012-11-02T01:57:58.567
> 
> 标签：c#, silverlight, xaml, windows-8

我有一个 XAML 应用程序（特别是 Windows 8 XAML 应用程序），我想为其添加夜间阅读模式。这将是用户可以切换的设置，它将主题颜色更改为黑底白字，而不是我的标准黑底白字。

我的问题是，我该怎么做？我想积极地做（意思是，当用户切换时，我会显示新版本，而不必让他们重新启动他们的应用程序）。

我对 XAML 还是很陌生，所以我不知道我是否忽略了某些东西。目前，我正在路由我所有的样式以通过我的主题文件中的静态资源。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:55:16.533

您正在寻找的是一个[主题](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.resourcedictionary.themedictionaries.aspx)。基本上，它是一组全局可用的资源，您可以将它们作为一组进行交换。有关示例，请参见[此处。](http://code.msdn.microsoft.com/windowsapps/XAML-control-and-app-494840f7/sourcecode?fileId=63706&pathId=2050113133)

编辑：我猜你不能在不重新启动的情况下更改它：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f91a11d6-6e56-4978-8acd-21ae9f3c3a6e/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f91a11d6-6e56-4978-8acd-21ae9f3c3a6e/)

# java - 返回java中元音最多的单词

> ID：13188225
> 
> 赞同：2
> 
> 时间：2012-11-02T01:58:04.120
> 
> 标签：java, methods

我想知道是否有人对如何通过获取句子列表来返回具有最多元音的单词有任何想法。

我知道如何计算带有元音的单词并返回计数。只是无法返回元音最多的单词..

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:35:49.800

```
String myString = "Java is magical";

// 1\. Split your string into an array of words.
String[] words = myString.split(" ");

// 2\. Initialise a max vowel count and current max count string variable
int maxVowelCount = 0;
String wordWithMostVowels = "";

// 3\. Iterate over your words array.
for (String word : words) {
    // 4\. Count the number of vowel in the current word
    int currentVowelCount = word.split("[aeiou]", -1).length;

    // 5\. Check if it has the most vowels
    if (currentVowelCount > maxVowelCount) {

        // 6\. Update your max count and current most vowel variables
        wordWithMostVowels = word;
        maxVowelCount = currentVowelCount;
    }
}

// 6\. Return the word with most vowels
return wordWithMostVowels; 
```

您可能希望将此功能包装在一个方法中，并将您的“myString”值传递给该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T03:54:26.433

以下是我认为简单、易读且正确的内容：

```
public static String findMaxVowels(Collection<String> text) {
    String best = null;
    int max = 0;
    for (String line : text) {
        // may need a better definition of "word"
        for (String word : line.split("\\s+")) {
            int count = countChars(word.toLowerCase(), "aeiou");
            if (count > max) {
                max = count;
                best = word;
            }
        }
    }
    return best;
}

public static int countChars(String text, String chars) {
    int count = 0;
    for (char c : text.toCharArray())
        if (chars.indexOf(c) >= 0)
            count += 1;
    return count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T02:15:37.243

您可以将每个句子拆分（这个词是一个提示）成一个`List`词，并获得具有最大元音数量的词。
您最终将得到每个句子一个单词（“最大”），`List`再次处理这些单词（您可以在这里进行简洁的递归调用），您将获得文本中元音数量最多的单词。

我建议你看看[Collections](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection)提供的静态方法，尤其是：

```
public static <T> T max(Collection<? extends T> coll, Comparator<? super T> comp) 
```

最终

```
public static <T> void sort(List<T> list, Comparator<? super T> c) 
```

您所要做的就是实现一个[比较](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)器，它可以在两个单词之间确定哪个单词的元音数量最多。这几乎是两行代码，听起来像是一项家庭作业。

编辑：最后因为他到处都有剧透，所以有那个解决方案。有了记忆，就有一种方法可以让交易者表现得更好，但这不是我想的重点

```
final static Comparator <String> vowelComparator = new Comparator<String>() {
    @Override
    public final int compare(final String word1, final String word2) {
        return vowelCount(word1) - vowelCount(word2);
    }

    private final int vowelCount(final String word) {
        int count = 0;
        for (final char c : word.toCharArray()) {
            if (c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u')
                count++;
        }
        return count;
    }
};

public static void main(String...args) {
    //Sentences
    final List<String> sentences = new ArrayList<String>(3){{
        add("This is my first line");
        add("Hohoho is my second astonishing line");
        add("And finally here is my last line");
    }};

    //Store the words with highest number of vowels / sentence
    final List<String> interestingWords = new LinkedList<>();
    for (final String sentence : sentences) {
        interestingWords.add(Collections.max(Arrays.asList(sentence.split(" ")), vowelComparator));     
    }

    System.out.println(Collections.max(interestingWords, vowelComparator));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T02:24:19.737

```
String[] words = yourString.split(" ");
int max = 0;
for(String myStr: words)
    max = Math.max(max,myStr.split("[aeiou]").length);
for(String myStr: words)
    if(myStr.split("[aeiou]").length == max)
        return myStr; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T02:01:10.250

将单词存储在字符串变量中，循环完成后返回字符串。

# c++ - 如何格式化数组并输出？

> ID：13188227
> 
> 赞同：1
> 
> 时间：2012-11-02T01:58:08.883
> 
> 标签：c++, arrays, format

好的需要一些帮助。我已将文件读入数组。我需要获取数组并对其进行格式化，以便格式化数字。文本文件只是一个数字列表。例如，我需要获取前两个数字并对其进行格式化，以便将其打印到控制台，如下所示：“1-0”。到目前为止，这是我的代码。请注意应该进行格式化的不完整函数。

```
#include<iostream>
#include<cmath>
#include<cstdlib>
#include<string>
#include<fstream>

using namespace std;

string ArrayFormat(int array[]);

int main() {

const int ARRAY_SIZE = 21;
string filename;
ifstream inputfile;

int score[ARRAY_SIZE];

cout <<"\nPlease enter the name of a file: ";
cin >> filename;

inputfile.open(filename.c_str());
if (inputfile.fail()){
    perror(filename.c_str());
    exit(1);
}// end of error test

for (int i=0;i<20;i++){
    inputfile >> score[i];
   // cout << score[i] << endl;
}// end of for loop to read into array
inputfile.close();

}// end of main

string ArrayFormat(int array[]){

for(int i=0; i<=21; i++){

}

}// end of ArrayFormat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:03:20.013

```
for(int i = ; i < 21; i++)
{
   if(i%2 == 1) 
      std::cout << "-" << array[i] << "\t";
   else
      std::cout << array[i];
} 
```

这将以正确的格式以 2 对打印数组。

编辑：如果您需要打印成对的数字，为什么数组是奇数？

# mysql - MySQL变量表命名创建

> ID：13188228
> 
> 赞同：4
> 
> 时间：2012-11-02T01:58:19.073
> 
> 标签：mysql

我正在为 minecraft 的一组服务器创建一个数据库，并且我设置它的方式是，我希望在添加每个服务器时为其创建一个表。目前，除了我无法获取正在创建的包含 IP 地址的表之外，我一切正常。我希望该表类似于 [IP]_Players，其中 [IP] 被实际 IP 地址替换，该地址将通过创建它的函数发送。这是我到目前为止所拥有的：

```
DELIMITER $$

CREATE PROCEDURE `minecraft`.`AddServer` (ip Text)
BEGIN
DECLARE play TEXT;
DECLARE tran TEXT;
SET play = ip + '_Players';
SET tran = ip + '_Transactions';
INSERT INTO `minecraft`.`Server_Data` (`Server_IP`) VALUES (ip);
CREATE TABLE `minecraft`.play (
  `Player` TEXT NOT NULL ,
  `Balance` DOUBLE NOT NULL DEFAULT 100 ,
  `Warnings` INT NOT NULL DEFAULT 0 ,
  `Offences` INT NOT NULL DEFAULT 0 ,
  UNIQUE INDEX `Player_UNIQUE` (`Player` ASC) );
CREATE  TABLE `minecraft`.tran (
  `Time` TIMESTAMP NOT NULL ,
  `Player` TEXT NOT NULL ,
  `Destination` TEXT NOT NULL ,
  `Amount` DOUBLE NOT NULL ,
  `Description` TEXT NOT NULL ,
  PRIMARY KEY (`Time`) );
END 
```

它不是在执行时将其创建为 192.168.001.107_Players `CALL minecraft.AddServer('192.168.001.107');` ，而是创建一个名为`play`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:24:28.957

我猜你必须使用准备好的陈述

[SQL 语法准备语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:12:45.973

我在玩，让这个工作。请注意，表名中不能有句点。因此，您可能希望使用 REPLACE 函数将句点替换为下划线。

```
DELIMITER $$

CREATE PROCEDURE `minecraft`.`AddServer` (ip Text)
BEGIN
DECLARE play varchar(500);
DECLARE STMT varchar(500);
SET play = CONCAT(ip, '_Players');
SET @sql_stmt = CONCAT('CREATE TABLE minecraft.', play, ' (
  `Player` VARCHAR(50) NOT NULL ,
  `Balance` DOUBLE NOT NULL DEFAULT 100 ,
  `Warnings` INT NOT NULL DEFAULT 0 ,
  `Offences` INT NOT NULL DEFAULT 0 ,
  UNIQUE INDEX `Player_UNIQUE` (`Player` ASC) );');
PREPARE STMT FROM @sql_stmt;
EXECUTE STMT;
END$$

Delimiter ; 
```

# android - 如何在 Android 中更改上下文菜单的 textSize

> ID：13188231
> 
> 赞同：1
> 
> 时间：2012-11-02T01:58:21.623
> 
> 标签：android, contextmenu

我想在 Android 中更改上下文菜单的文本大小，谁能给我最简单的解决方案？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:48:22.207

尝试在 string.xml 而不是在 context_menu.xml 中创建上下文菜单的值

# javascript - 在 Javascript IF 语句中引用原始条件值

> ID：13188234
> 
> 赞同：0
> 
> 时间：2012-11-02T01:58:46.117
> 
> 标签：javascript, conditional

我经常发现我编写的 IF 语句会立即引用条件语句的值。例如，假设我需要检查字符串是否与模式匹配：

```
if (mystring.match(/mypattern/) {
    var mymatch = mystring.match(/mypattern/)[1];
    ...
}; 
```

我怀疑我正在寻找的东西不存在，但我想知道您是否可以在 if 块中引用条件语句的值，就像在函数中引用“参数”一样。当然，在很多情况下，我可以这样重写它：

```
var mymatch = mystring.match(/mypattern/)[1];
if (mymatch) { ... }; 
```

但如果调用了一系列方法，这通常是不可能的。例如：

```
var mymatch = $('.myclass')[0].text().match(/mypattern/)[1]; 
```

...如果没有可调用 .text() 的项目 [0]，则会引发异常。我错过了一些方便的速记吗？或者更好的组织事物的方式？只是好奇，真的——如果答案是否定的，我会继续生活。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:04:00.777

在相关的情况下，您可以使用赋值运算符在 JavaScript 中返回一个值的事实，例如，您可以编写如下内容：

```
if (assignedTest = testedValue) {
   //value of assignedTest is now available 
   //and conditional will only be executed if true 
```

如果 RHS 兼容或设置正确，则可以使用此方法，**但**它也是一个巨大的可读性问题，因为很容易将赋值`=`与比较`==`/混淆`===`。

如果您特别有动力去追求这一点，您可以将这种类型的功能提取到一个以可靠方式运行的函数中：例如将闭包的结果分配给命名变量，并且您可以进一步调整行为以执行其他操作（例如在测试中可选地评估为不同的值）。最终，它主要是使一个简单的结构变得更复杂。

# android - 如何编辑 ActionBarSherlock 导航选项卡大小

> ID：13188237
> 
> 赞同：0
> 
> 时间：2012-11-02T01:59:11.120
> 
> 标签：android, android-actionbar, actionbarsherlock

![截屏](../Images/3af587f87249fc410b12eb51b4dff775.png)

请看一下上面的图片。您可以看到 Google Play 市场截图中的导航选项卡大约是Samples/Styled 应用程序`Actionbar`大小的 2/3 。`ActionbarSherlock`我已经搜索和搜索，但找不到可以改变这一点的属性。那么如何减小这些导航选项卡的大小。它看起来像是一种节省一些屏幕空间的简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:14:38.990

那不是操作栏选项卡。这是一个与 a 一起使用的指标`ViewPager`。

在支持库 ( ) 中有一个基本的实现，`PagerTitleStrip`但它还有很多不足之处。您应该查看[http://viewpagerindicator.com](http://viewpagerindicator.com)以获得更全面的实现。

# c++ - 使用默认构造函数指向对象的指针数组

> ID：13188240
> 
> 赞同：1
> 
> 时间：2012-11-02T02:00:07.203
> 
> 标签：c++, object, pointers

我今天在阅读 C++ 中类的默认构造函数时在想，假设我们有这个类 SortedArray 的代码：

```
class SortedArray
{

private:
    struct arrayCell
    {
        int pageID;                
        int totalNeighbors;   
    };
}; 
```

我们分配一个指向此类对象的指针数组，然后使用默认构造函数初始化指针。会发生什么？是否会为结构存储内存？如果是 int 将被初始化为什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:19:55.890

如果您在谈论类型的指针，`SortedArray*`那么没有。

`SortedArray`是具有私有嵌套类型的空类。

如果您分配嵌套类型的实例，`SortedArray::arrayCell`则整数将被默认初始化（未指定值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T02:05:27.250

旧答案：我很确定为该元素创建了内存，如果您编译并运行它，访问该内存时不会出现分段错误。整数将设置为默认值 0。

默认构造函数信息可以在[这里](http://www.cplusplus.com/doc/tutorial/classes/)找到。

***编辑：***上面的答案是**不正确**的。代码不会为整数元素提供内存，因为定义了结构，但不会创建使用该结构的对象，除非您手动创建一个，在这种情况下，将为这些整数创建内存。

至于创建的整数的值：

它们不会被初始化为任何有意义的东西，它们只会包含创建之前内存中的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T02:03:28.357

我很确定它将为您在数组中初始化的每个对象分配内存，并将整数设置为其默认值 (0)。

# python - python摆脱unicode和`\r\n`字符

> ID：13188244
> 
> 赞同：3
> 
> 时间：2012-11-02T02:00:59.953
> 
> 标签：python

我想删除字符串中的 `\r\n' 字符，我尝试了这个：

```
s1.translate(dict.fromkeys(map(ord, u"\n\r")))
    lists1=[]
    lists1.append(s1)
    print lists1 
```

我收到了这个：

```
[u'\r\nFoo\r\nBar, FooBar'] 
```

如何摆脱`\r\n`字符串中的字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:03:26.453

使用`str()`and`replace()`删除`u`and `\r\n`：

```
In [21]: strs = u'\r\nFoo\r\nBar'

In [22]: str(strs).replace("\r\n","")
Out[22]: 'FooBar' 
```

或者只是`replace()`为了摆脱`\r\n`：

```
In [23]: strs.replace("\r\n","")
Out[23]: u'FooBar' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:03:22.353

```
cleaned = u"".join([line.strip() for line in u'\r\nFoo\r\nBar, FooBar'.split("\r\n")]) 
```

或者只是使用`replace()`：

```
cleaned = u'\r\nFoo\r\nBar, FooBar'.replace("\r\n", "") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T02:05:29.857

你可以做

```
'this is my string\r\nand here it continues'.replace('\r\n', '') 
```

# parallel-processing - MPI：主从与主也做工作

> ID：13188246
> 
> 赞同：3
> 
> 时间：2012-11-02T02:01:06.160
> 
> 标签：parallel-processing, mpi

我正在实现一个标准的 MPI 主/从系统：有一个分配工作的主系统，还有一个请求块和处理数据的从站。

但是......如果以一种简单的方式实现（rank==0 是主服务器，其余的是从服务器），主服务器最终不会做任何实际工作，但仍然需要一个核心来完成几乎不需要真正计算能力的任务。所以我尝试在主控中实现一个单独的“调度程序”线程，但这涉及向自身发送 MPI 消息，并没有真正起作用......

你有什么想法如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:28:25.503

正如我在谷歌搜索后意识到的那样：您可以使用**tags**向自己发送消息。标签是一种过滤器：如果您只为 tag==1 执行*接收*，那么您将只收到那些，后面的消息能够超过早期的消息。

所以，至于解决方案：

*   使用不同的 id 标记“调度程序到工作人员”和“工作人员到调度程序”消息
*   if rank==0: 启动调度线程
*   事后，不论职级，要求工作。

这样，排名 0 的工作人员将不会收到自己的“让我们给我工作”消息，因为它们将具有“仅由调度程序接收”标签。

**编辑**：虽然这东西似乎并不是真正的*线程安全*......（=即使它是用 Python 编写的，它有时也会在“free（）”中崩溃......）所以我仍然对真正的 & 感兴趣行之有效的解决方案:)

# emacs - 可以使一个缓冲区透明/暗淡吗？

> ID：13188252
> 
> 赞同：3
> 
> 时间：2012-11-02T02:01:28.077
> 
> 标签：emacs

我通常在两列视图中使用 emacs，两个缓冲区垂直并排。我想制作我不专注于暗淡/透明或其他东西的缓冲区 - 某种方式可以更轻松地将其与当前关注的缓冲区区分开来。

我发现了这个片段，当它失去焦点时，我可以使用它来使所有 emacs 透明：

```
(set-frame-parameter (selected-frame) 'alpha '(100 80))
(add-to-list 'default-frame-alist '(alpha 100 80)) 
```

但是当它失去焦点时，我只想让一个缓冲区透明/变暗。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:10:15.090

我不使用透明功能，但[黄金比例](https://github.com/roman/golden-ratio.el.git)可以做一些事情，比如在窗口中聚焦。

# css - 一个固定的背景全屏可调整大小，然后添加第二个不固定/或包装的图像

> ID：13188258
> 
> 赞同：1
> 
> 时间：2012-11-02T02:02:10.607
> 
> 标签：css, background, wrapper

我已经应用了背景图像，全屏并固定为任何分辨率：

```
body {

background:url('http://upload.wikimedia.org/wikipedia/commons/e/e7/Sky_with_puffy_clouds.JPG') no-repeat center center fixed;
-webkit-background-size: cover;
 -moz-background-size: cover;
 -o-background-size: cover;
 background-size: cover;

} 
```

但是，我现在需要的是在中心放置另一个图像，如果调整浏览器大小，它将重复向下（可滚动）并跟随主体。（图片在[这里](http://1.bp.blogspot.com/-fcyW3-zf_QU/UJMiLfDY44I/AAAAAAAAAIg/wA9ZVtJ3aLM/s1600/innertest.jpg)）。

当我尝试在正文 html 中添加带有逗号的第二张图片时，第一张图片中的“无重复中心中心固定；-webkit-background-size:cover;....”操作将应用于新图片.

有没有办法按照我描述的方式添加另一张图片并保持原样？

基本上我想用这个图像作为一切的包装，身体等。

我很抱歉，我是新手，我刚刚开始熟悉事物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:53:20.797

HTML：

```
<div class="main">
<p>I think your problem solved.
   I think your problem solved.
   I think your problem solved.
   I think your problem solved.
   I think your problem solved.
   I think your problem solved.
   I think your problem solved.
   I think your problem solved.
   I think your problem solved.
   I think your problem solved.</p>
   </div> 
```

CSS：

```
body {
width:100%;
background:url('http://upload.wikimedia.org/wikipedia/commons/e/e7/Sky_with_puffy_clouds.JPG') no-repeat center center fixed;
-webkit-background-size: cover;
 -moz-background-size: cover;
 -o-background-size: cover;
 background-size: cover;

}

.main{
  margin:0 auto;
  width:960px;
  background:url('http://1.bp.blogspot.com/-fcyW3-zf_QU/UJMiLfDY44I/AAAAAAAAAIg/wA9ZVtJ3aLM/s1600/innertest.jpg') no-repeat;

} 
```

# c++ - 未定义的引用

> ID：13188260
> 
> 赞同：0
> 
> 时间：2012-11-02T02:02:22.650
> 
> 标签：c++

这是我不断收到的错误。对我的班级的未定义引用。我不确定。我想我正在链接它们。这就是我的主要外观。

```
 #include <iostream>
    #include "randomNumberMagnifier.h"

    using namespace std;

     int main()
      {
        randomNumberMagnifier r1, r2;

      cout << "Random Number "<< r1.getRandomNumber();
       cout << endl;

      } 
```

我不确定我做错了什么。这就是它的样子。当我编译

```
 [singha1@cs1 p4]$ g++ -c randomNumberMagnifier.cpp
       [singha1@cs1 p4]$ g++ -o p4Driver.cpp
        g++: no input files
        p4Driver.cpp:(.text+0x8c): undefined reference to `randomNumberMagnifier::getRandomNumber
     collect2: ld returned 1 exit status

      #ifndef RANDOMNUMBERMAGNIFIER_H
#define RANDOMNUMBERMAGNIFIER_H

class randomNumberMagnifier
{
  int addFactor;
  int multFactor;
  bool addOn;
  bool multOn;
  int randomNumber;
  static const int MAX_ADD_FACTOR = 100;
  static const int MAX_MULT_FACTOR = 20;
  static const int MAX_RANDOM = 200;

 public:
  randomNumberMagnifier();

  //~randomNumberMagnifer();

  randomNumberMagnifier& operator=(const randomNumberMagnifier& rhs);

  randomNumberMagnifier(const randomNumberMagnifier& arandom);

  randomNumberMagnifier(bool aState, bool mState);

  int randomMagnifier();

  int getAdd();
  int getMult();

  bool getAddState();
  bool getMultState();

  int getRandomNumber();

};
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:10:51.670

```
g++ -o p4Driver.cpp 
```

这并没有说明它应该编译*成*什么，而这应该是什么`-o`。你要：

```
g++ -c randomNumberMagnifier.cpp
g++ -c p4Driver.cpp
g++ randomNumberMagnifier.o p4Driver.o -o p4Driver 
```

要不就：

```
g++ randomNumberMangifier.cpp p4Driver.cpp -o p4Driver 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T02:03:45.363

您需要将 randomNumberMagnifier.o 提供给 g++ 命令，以便它可以找到函数定义。我用下面的命令进行了测试并且我工作了

```
g++ -o p4Driver p4Driver.cpp randomNumberMagnifier.o 
```

# php - 在javascript意外结果中遍历数组

> ID：13188263
> 
> 赞同：0
> 
> 时间：2012-11-02T02:02:35.100
> 
> 标签：php, javascript

我以为我正确地接近了这个，但似乎不是。

我有以下功能：

```
function oMain(){
    var allMyData = <? echo htmlspecialchars($jsData, ENT_NOQUOTES, 'utf-8')?>;
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'x');
    data.addColumn('number', 'mid');
    var i=0;
    alert(allMyData.length);
    for(i=0;i<allMyData.length;i++){

    }

    alert(allMyData[i+1,0] + "," + allMyData[i+1,1]);
} 
```

`allMyData`看起来像这样 ：`[["20121031095013","1.315"],["20121031095029","1.315"],["20121031095046","1.315"],["20121031095102","1.315"],["20121031095118","1.315"],["20121031095134","1.315"],....`

这对我来说似乎没问题。

现在：我的警报向我显示如下内容： `20121031095013,1.315,20121031095029,1.315`

我期待的地方：20121031095029,1.315

有人可以帮我看看我犯的错误吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:06:05.520

`allMyData[i+1,0]`返回另一个巨大数组中的第一个数组。我想你的意思是：

`alert(allMyData[i+1][0] + "," + allMyData[i+1][1]);`

这样，您将选择数组`i+1`，以及其中的单独值。

如果要为数组中的每个数组单独设置警报，则需要将警报语句放在 for 循环中：

```
function oMain(){
    var allMyData = <? echo htmlspecialchars($jsData, ENT_NOQUOTES, 'utf-8')?>;
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'x');
    data.addColumn('number', 'mid');
    var i=0;
    alert(allMyData.length);
    for(i=0;i<allMyData.length;i++){
        alert(allMyData[i+1][0] + "," + allMyData[i+1][1]);
    }
}​​​​ 
```

# android-asynctask - canvas.DrawBitmap() 在 AsyncTask 中的 onPostExecute 处执行，但位图未显示

> ID：13188264
> 
> 赞同：2
> 
> 时间：2012-11-02T02:02:36.973
> 
> 标签：android-asynctask, ondraw

我在打电话`invalidate()`，哪个在打电话`onDraw()`。我希望在屏幕上显示的位图在运行后没有显示`doInBackGround()`。任何人都可以帮忙吗？

这是我到目前为止测试的内容。

当我放置同一行代码时

```
canvas.drawBitmap(); 
```

在`onPreExecute()`它工作，但在`onPostExecute()`它不显示预期的结果。

这是我的代码：

```
public class FloorAppActivity extends Activity {
private Context globalContext;

private Point displaySize;
private int displayWidth;
private int displayHeight;

private String floorID;
private String floorName;
private String floorGridNumStr;
private int floorGridNum;
private String floorNumStr;
private int positionX;
private int positionY;
private int XCoord;
private int YCoord;
private int ZCoord;
private float signalStr;
private Integer dBm;

private Bitmap floorPlan;
private Bitmap userMark;
private Bitmap redPin;

private FloorView floorView;
private Connection conn = null;

private Canvas canvas=null;
private int newScrollRectX=0;
private int newScrollRectY=0;
private Paint paint;
private boolean a = false;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    globalContext = this;

    floorID = getIntent().getStringExtra("floorID");
    floorName = getIntent().getStringExtra("floorName");
    positionX = getIntent().getIntExtra("userPositionX",-1);
    positionY = getIntent().getIntExtra("userPositionY",-1);
    dBm = getIntent().getIntExtra("BestSignal", -1);
    //Get the grid number
    if(Integer.parseInt(floorName.substring(floorName.lastIndexOf("_")+1))<10)
        floorGridNumStr = floorName.substring(8, 9);
    else
        floorGridNumStr = floorName.substring(8, 10);
    floorGridNum = Integer.parseInt(floorGridNumStr);
    floorNumStr = floorName.substring(5,7);
    Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    displaySize = new Point();

    try {
        // GetSize is not available in older models of Android
        display.getSize(displaySize);
    } catch (java.lang.NoSuchMethodError ignore) { // Older device
        displaySize.x = display.getWidth();
        displaySize.y = display.getHeight();
    }

    try {
        InputStream source = getAssets().open(floorID);
        floorPlan = BitmapFactory.decodeStream(source);

        displayWidth = Math.min(displaySize.x, floorPlan.getWidth());       
        displayHeight = Math.min(displaySize.y, floorPlan.getHeight());

        userMark = BitmapFactory.decodeResource(getResources(),R.drawable.star);
        redPin = BitmapFactory.decodeResource(getResources(),R.drawable.redpin);

        floorView = new FloorView(this);
        setContentView(floorView);
    } 
    catch (IOException e) {
        MapServerAPI server = new MapServerAPI(globalContext,"Retrieving floor plan. Please wait...") {
            @Override
            protected void onPostExecute(Bitmap bitmap) {
                super.onPostExecute(bitmap);

                if (bitmap == null)
                    Toast.makeText(globalContext, "Error in retrieving floor plan!", Toast.LENGTH_LONG).show();
                else {
                    floorPlan = bitmap;

                    displayWidth = Math.min(displaySize.x, floorPlan.getWidth());       
                    displayHeight = Math.min(displaySize.x, floorPlan.getHeight());

                    userMark = BitmapFactory.decodeResource(getResources(),R.drawable.star);
                    redPin = BitmapFactory.decodeResource(getResources(),R.drawable.redpin);

                    floorView = new FloorView(globalContext);
                    setContentView(floorView);
                }
            }
        };
        server.execute(floorID);
    }
}

@Override
public void onResume() {
    super.onResume();   
    registerReceiver(broadcastReceiver,new IntentFilter("FingerPrint_LOCATION_UPDATE"));
}

@Override
public void onPause() {
    super.onPause();
    unregisterReceiver(broadcastReceiver);
}

// listen for user location change
private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String result = intent.getStringExtra("location");
        Toast.makeText(context,result,Toast.LENGTH_LONG).show();

        String floorId = intent.getStringExtra("floorID");
        floorName = intent.getStringExtra("name");
        dBm = intent.getIntExtra("BestSignal", -1);
        int userLocationX = intent.getIntExtra("userPositionX",-1);
        int userLocationY = intent.getIntExtra("userPositionY",-1);
        //Get the grid number
        if(Integer.parseInt(floorName.substring(floorName.lastIndexOf("_")+1))<10)
            floorGridNumStr = floorName.substring(8, 9);
        else
            floorGridNumStr = floorName.substring(8, 10);
        floorGridNum = Integer.parseInt(floorGridNumStr);
        floorNumStr = floorName.substring(5,7);
        if(!floorId.equals(floorID)){
            positionX = userLocationX;
            positionY = userLocationY;
            InputStream source=null;
            try {
                source = getAssets().open(floorID);
            } catch (IOException e) {

            }
            floorPlan = BitmapFactory.decodeStream(source);
            floorView.postInvalidate();
        }
    }
};
private class FloorView extends View {
    private Rect displayRect; //rect we display to
    private Rect scrollRect; //rect we scroll over our bitmap with

    private int scrollRectX = 0; //current left location of scroll rect
    private int scrollRectY = 0; //current top location of scroll rect
    private float scrollByX = 0; //x amount to scroll by
    private float scrollByY = 0; //y amount to scroll by
    private float startX = 0; //track x from one ACTION_MOVE to the next
    private float startY = 0; //track y from one ACTION_MOVE to the next

    public FloorView(Context context) {
        super(context);

        // Destination rect for our main canvas draw. It never changes.
        displayRect = new Rect(0, 0, displayWidth, displayHeight);
        // Scroll rect: this will be used to 'scroll around' over the 
        // bitmap in memory.
        if (positionX + displayWidth / 2 > floorPlan.getWidth()) 
            scrollRectX = floorPlan.getWidth() - displayWidth;
        else 
            scrollRectX = positionX - displayWidth / 2;
        if (scrollRectX < 0)
            scrollRectX = 0;

        if (positionY + displayHeight / 2 > floorPlan.getHeight()) 
            scrollRectY = floorPlan.getHeight() - displayHeight;
        else 
            scrollRectY = positionY - displayHeight / 2;
        if (scrollRectY < 0)
            scrollRectY = 0;

        scrollRect = new Rect(scrollRectX, scrollRectY, displayWidth, displayHeight);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // Remember our initial down event location.
                startX = event.getRawX();
                startY = event.getRawY();
                break;

            case MotionEvent.ACTION_MOVE:
                float x = event.getRawX();
                float y = event.getRawY();
                // Calculate move update. This will happen many times
                // during the course of a single movement gesture.
                scrollByX = x - startX; //move update x increment
                scrollByY = y - startY; //move update y increment
                startX = x; //reset initial values to latest
                startY = y;
                invalidate(); //force a redraw
                break;
        }
        return true; //done with this event so consume it
    }

    @Override
    protected void onDraw(Canvas canvas1) {

        canvas=canvas1;
        // Our move updates are calculated in ACTION_MOVE in the opposite direction
        // from how we want to move the scroll rect. Think of this as dragging to
        // the left being the same as sliding the scroll rect to the right.
        newScrollRectX = scrollRectX - (int)scrollByX;
        newScrollRectY = scrollRectY - (int)scrollByY;

        // Don't scroll off the left or right edges of the bitmap.
        if (newScrollRectX < 0)
            newScrollRectX = 0;
        else if (newScrollRectX > (floorPlan.getWidth() - displayWidth))
            newScrollRectX = (floorPlan.getWidth() - displayWidth);

        // Don't scroll off the top or bottom edges of the bitmap.
        if (newScrollRectY < 0)
            newScrollRectY = 0;
        else if (newScrollRectY > (floorPlan.getHeight() - displayHeight))
            newScrollRectY = (floorPlan.getHeight() - displayHeight);

        // We have our updated scroll rect coordinates, set them and draw.
        scrollRect.set(newScrollRectX, newScrollRectY, 
            newScrollRectX + displayWidth, newScrollRectY + displayHeight);
        paint = new Paint();
        canvas.drawBitmap(floorPlan, scrollRect, displayRect, paint);

        // Update user position
        if (positionX >= newScrollRectX && positionX - newScrollRectX <= displayWidth
                && positionY >= newScrollRectY && positionY - newScrollRectY <= displayHeight)
            canvas.drawBitmap(userMark,positionX-newScrollRectX-userMark.getWidth()/2,positionY-newScrollRectY-userMark.getHeight()/2,paint);

        class AsyncTaskToConnect extends AsyncTask <Void, Void, Void>{      
            @Override
            protected Void doInBackground(Void... cmd) {
                // connect to database and retrieve values
                return null;
            }
            @Override
            protected void onPostExecute(Void v) 
            {//PE
                if (positionX >= newScrollRectX && positionX - newScrollRectX <= displayWidth
                        && positionY >= newScrollRectY && positionY - newScrollRectY <= displayHeight)
                {
                    canvas.drawBitmap(redPin,480-newScrollRectX-userMark.getWidth()/2,90-newScrollRectY-userMark.getHeight()/2,paint);
                }

                    //return null;
                    // Reset current scroll coordinates to reflect the latest updates, 
                    // so we can repeat this update process.
                    scrollRectX = newScrollRectX;
                    scrollRectY = newScrollRectY;
            }//PE       
        }
        AsyncTaskToConnect[] asyncTaskC = null;
        asyncTaskC = new AsyncTaskToConnect[1];
        asyncTaskC[0] = new AsyncTaskToConnect();           
        asyncTaskC[0].executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);    
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        // Cache our new dimensions; we'll need them for drawing.
        displayWidth = Math.min(w, floorPlan.getWidth());       
        displayHeight = Math.min(h, floorPlan.getHeight());

        // Destination rect for our main canvas draw.
        displayRect = new Rect(0, 0, displayWidth, displayHeight);
        // Scroll rect: this will be used to 'scroll around' over the
        // bitmap in memory.
        if (positionX + displayWidth / 2 > floorPlan.getWidth()) 
            scrollRectX = floorPlan.getWidth() - displayWidth;
        else 
            scrollRectX = positionX - displayWidth / 2;
        if (scrollRectX < 0)
            scrollRectX = 0;

        if (positionY + displayHeight / 2 > floorPlan.getHeight()) 
            scrollRectY = floorPlan.getHeight() - displayHeight;
        else 
            scrollRectY = positionY - displayHeight / 2;
        if (scrollRectY < 0)
            scrollRectY = 0;
        scrollRect = new Rect(scrollRectX, scrollRectY, displayWidth, displayHeight);

        super.onSizeChanged(w, h, oldw, oldh);
    }
}
} 
```

PS这是我第一次发帖。如果我在帖子中犯了错误，请原谅我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:48:24.197

我认为问题在于您正在存储`Canvas`传递给`onDraw`方法的对象。`onDraw`方法返回后，对象可能无效。

看起来您正在尝试`Bitmap`在后台线程上准备 a ，然后在准备好后将其绘制在屏幕上。你这样做的方式是 - 准备`Bitmap`并调用`invalidate`in方法。然后在该方法中，您可以获取该对象并使用`View``onPostExecute``onDraw``Bitmap``canvas.drawBitmap`

# db4o - 通过 db4o 重命名 api 使类名独立

> ID：13188265
> 
> 赞同：0
> 
> 时间：2012-11-02T02:02:42.757
> 
> 标签：db4o, oodb

我是 Db4o 的新手

据我检查，当我重构类名或路径（包）时，db4o 不再识别该类并创建一个新的“类别”。

我想制作一个 API，这样我的应用程序中的任何类重构都不会影响数据库。我创建了以下功能...

```
public void saveClassAs(Class objClass, String nameInDB){
   configuration.common().objectClass(objClass).rename(nameInDB);
} 
```

并让它为我的每一堂课打电话。由于 nameInDB 对于每个类都是常量，无论该类位于何处或它的名称如何。

问题是我不确定这是否可行，而且我不知道这在速度方面是否是一个好主意......我没有找到关于重命名 API 如何工作的 db4o 文档的任何详细信息。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:20:45.763

如果您想使用常量类名（与真实类名无关），我最好的选择是使用[aliases](http://community.versant.com/documentation/reference/db4o-7.12/java/reference/Content/configuration/common/alias.htm)。

关于重命名配置，您可以在[此处](http://community.versant.com/documentation/reference/db4o-7.12/java/reference/Content/implementation_strategies/refactoring_and_schema_evolution.htm)找到详细信息。

# wpf - 更多绑定到 ListView

> ID：13188268
> 
> 赞同：-1
> 
> 时间：2012-11-02T02:02:55.517
> 
> 标签：wpf, xaml

原始问题在这里。 [绑定到 ListView](https://stackoverflow.com/questions/13150067/binding-to-a-listview)

我已经解决了一个问题，现在可以看到列名。但是，我无法弄清楚绑定。

输出窗口的错误：

```
 System.Windows.Data Error: 4 : Cannot find source for binding with reference 
'ElementName=This'. BindingExpression:Path=LogView.LogEntries; DataItem=null; target 
element is 'ListView' (Name='LoggingListView'); target property is 'ItemsSource' (type     'IEnumerable') 
```

我最近从 LogFileWindow.XAML 尝试的 XAML 片段。我可以发布更多内容，但尽量保持混乱：

```
 <ListView Name="LoggingListView" ItemsSource="{Binding ElementName=This,  Path=LogView.LogEntries}  ">
                        <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Date" DisplayMemberBinding="{Binding Path=Date}"></GridViewColumn>
                            <GridViewColumn Header="Time" DisplayMemberBinding="{Binding Path=Time}"></GridViewColumn>
                            <GridViewColumn Header="Event" DisplayMemberBinding="{Binding Path=Event}"></GridViewColumn>
                        </GridView>
                        </ListView.View>
                    </ListView> 
```

C# 视图模型：

```
public class LogEntryViewModel : INotifyPropertyChanged
{
   public LogEntryViewModel(LogFileEntry le)
    {
        _date = le.Date;
        _time = le.Time;
        _event = le.Event;
    }     
    #region Members
    private string _date;
    public string Date
    {
        get { return _date; }
        set {_date = value;
        RaisePropertyChanged("Date");           
        }
    }

    private string _time;
    public string Time
    {
        get { return _time; }
        set
        {
            _time = value;
            RaisePropertyChanged("Time");

        }
    }

    private string _event;
    public string Event
    {
        get { return _event; }
        set { _event = value;
        RaisePropertyChanged("Event");
        }
    }
    private LogFileEntry _le;
    #endregion

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    private void RaisePropertyChanged(string propertyName)
    {
        // take a copy to prevent thread issues
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}

public class LogViewModel :ObservableCollection<LogEntryViewModel>
{
       private ObservableCollection<LogEntryViewModel> _LogEntries;
    public ObservableCollection<LogEntryViewModel> LogEntries = new    
  ObservableCollection<LogEntryViewModel>();

} 
```

我尝试使用它的部分类声明和代码隐藏：

```
public partial class LogFileWindow : Window
{
    public  LogViewModel LogView = new LogViewModel(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:36:20.590

Visual Studio 错误是不言而喻的：您正在尝试使用 ElementName 进行绑定并使用 Name="This" 搜索可视元素（假设在您的 XAML 可视树中定义）。没有这样的事情（显然，我无法确定，因为您没有发布完整的 XAML 树）。

如果要将可视元素属性绑定到同一元素中的另一个属性，请使用[RelativeSource Self](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.self.aspx)

# css - 在 panelGrid 中对齐 p:dataList 组件

> ID：13188270
> 
> 赞同：0
> 
> 时间：2012-11-02T02:02:58.487
> 
> 标签：css, jsf-2

我正在尝试对齐 panelGrid 中的两个列表由于一个列表比另一个列表短，因此我将在面板和较短的列表顶部之间留出空间。

我只想对齐面板顶部之间没有空间，并且它们都将具有相同的宽度（50%、50%）

```
 <h:panelGrid columns="2" >
    <p:dataList value="#{disBean.productList}" var="prod" itemType="circle"> 
        <f:facet name="header">p</f:facet>
        <p:column>#{prod.name} </p:column>
        <p:column>#{prod.Version}</p:column>
    </p:dataList>
    <p:dataList value="#{disBean.custList}" var="cust" itemType="circle"> 
        <f:facet name="header">c</f:facet>
        <p:column>#{cust.name} </p:column>
        <p:column>#{cust.Version}</p:column>
    </p:dataList>   
</h:panelGrid> 
```

我尝试使用 css（不在此示例中），但没有找到正确的组合。

任何例子都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:12:04.563

您需要将 CSS属性`vertical-align`设置`top`为由. 您可以通过属性设置它，该属性采用逗号分隔的字符串和 CSS 样式类名称，应按顺序应用于每个元素。`<td>``<h:panelGrid>``columnClasses``<td>`

所以，这应该做，

```
<h:panelGrid ... columnClasses="align-top, align-top"> 
```

有了这个 CSS

```
.align-top {
    vertical-align: top;
} 
```

# macros - 引用阅读器宏调用

> ID：13188272
> 
> 赞同：4
> 
> 时间：2012-11-02T02:03:16.520
> 
> 标签：macros, lisp, common-lisp

有没有办法引用阅读器宏的调用？更具体地说，我想创建一个宏，一旦评估，它将生成一个 defclass 语句和一个相应的 XML 文件。这可能吗？

我考虑过使用`#.( ... )`阅读器宏，但我认为宏参数未绑定在阅读器宏中使用。它是否正确？

因此，我的第二个想法是尝试生成一个包含阅读器宏的语句，但我不确定是否有办法做到这一点。

在扩展宏调用时生成 XML 文件有什么建议吗？

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:59:09.933

“阅读器宏”和“宏”是完全不同的野兽，用来做非常不同的事情。

“阅读器宏”通常是一个函数，首先。它们绑定到一个（或两个特定序列）字符，并改变读取源代码的方式。它们不是关于代码，而是关于对象创建。

对于“阅读器宏”，“宏参数”将是什么没有明显的定义（可能除了首先导致阅读器宏被调用的字符序列之外，对于作为例如，当您阅读列表时将a`(`与 a匹配）。`)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:35:14.883

类似于以下内容：

```
(defmacro def-wsdl-class (name (&rest supers)
                           (&rest slots)
                           &rest options)
  `(progn
     (eval-when (:compile-toplevel :execute)
       (with-open-file (xml-file (make-pathname :name (string-capitalize name)
                                                :type "wsdl"
                                                :defaults (or *compile-pathname*
                                                              *load-pathname*))
                                 :direction :output
                                 :if-exists ,(getf options :if-wsdl-exists :error))
         (when xml-file
           (spit-xml xml-file ',name ',supers ',slots ,@options))))
    `(defclass ,name (,@supers)
       (,@slots)
       ,@(chew options))))) 
```

编辑：要回答您的原始问题，您通常不能（反）引用阅读器宏。它们在读取语法的地方执行，我们称之为读取时间。阅读器宏不参与正常的宏扩展，它们在宏扩展之前起作用。

您可能可以创建一个阅读器宏，该阅读器宏知道它在反引号阅读器宏中被调用以使用它，但它需要知道或更改反引号阅读器宏的实现相关行为。

但是，您可以从阅读器宏返回反引号表单。

# c# - 如何播种 GUID 生成？

> ID：13188280
> 
> 赞同：10
> 
> 时间：2012-11-02T02:03:48.557
> 
> 标签：c#, .net, random, guid

在 .NET 中编写函数以基于种子生成 GUID 以便我对其唯一性更有信心的最简单方法是什么？

```
string GenerateSeededGuid(int seed) { /* code here */ } 
```

理想情况下，种子将来自[CryptGenRandom](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379942%28v=vs.85%29.aspx)，它描述了它的随机数生成如下：

> 此函数生成的数据是加密随机的。它比典型的随机数生成器（例如 C 编译器附带的随机数生成器）生成的数据要随机得多。
> 
> 此函数通常用于生成随机*初始化向量* 和*盐值*。
> 
> 软件随机数生成器的工作方式基本相同。它们从一个称为种子的随机数开始，然后使用一种算法根据它生成一个伪随机位序列。这个过程中最困难的部分是得到一个真正随机的种子。这通常基于用户输入延迟或一个或多个硬件组件的抖动。
> 
> 对于 Microsoft CSP，**CryptGenRandom**使用与其他安全组件相同的随机数生成器。这允许许多进程为系统范围的种子做出贡献。CryptoAPI 为每个用户存储一个中间随机种子。为了形成随机数生成器的种子，调用应用程序提供它可能具有的位（例如，鼠标或键盘计时输入），然后将这些位与存储的种子以及各种系统数据和用户数据（如进程 ID 和线程 ID、系统时钟、系统时间、系统计数器、内存状态、空闲磁盘集群、散列用户环境块。该结果用于播种伪随机数生成器 (PRNG)。[...] 如果一个应用程序可以访问一个好的随机源，它可以填充***在调用CryptGenRandom**之前带有一些随机数据的 *pbBuffer*缓冲区。然后，CSP 使用该数据进一步随机化其内部种子。**在调用CryptGenRandom**之前省略初始化 *pbBuffer*缓冲区的步骤是可以接受的。*

 **** * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T03:18:34.697

**tldr;** 使用[`Guid.NewGuid`](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)而不是试图发明另一种“更随机”的方法。（我能想到从种子创建 UUIDvX 的唯一原因*是需要可预测、可重置的序列*。但是，GUID 也可能不是最好的方法^(2。)）

根据对有限范围的定义——128位*减去*6 个版本控制位，因此[v4 的唯一性为 122 位](http://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_.28random.29)——*只有这么多*（[尽管数量巨大！](http://bugcharmer.blogspot.com/2012/06/how-big-is-2128.html) [天文数字！](http://www.economist.com/blogs/johnson/2011/01/big_numbers)）“唯一”标识符。

由于[鸽笼原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)，鸽笼只有这么多。如果鸽子最终继续繁殖，那么每只鸽子都不会有足够的洞。由于[生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)，假设完全随机，两只鸽子会在它们都被填满之前尝试争夺同一个鸽子洞。因为没有 Master Pigeonhole List ¹，所以这是无法避免的。此外，并非所有动物都是鸽子³。

虽然[无法*保证*将使用*哪个*GUID 生成器](https://stackoverflow.com/questions/2621563/how-random-is-system-guid-newguid-take-two)，但 .NET 使用底层操作系统调用，它是[自 Windows 2k 以来的 GUIDv4（又名](https://stackoverflow.com/questions/2757910/how-are-net-4-guids-generated)*随机 UUID*）生成器。据我所知 - 或关心，真的 - 这是一个随机的，因为它得到了这样一个目的。*它经过十多年的*严格审查，从未被取代。

 ** * *

来自维基百科：

> .. 仅在接下来的 100 年每秒生成 10 亿个 UUID 之后，仅创建一个副本的概率约为 50%。如果地球上每个人都拥有 6 亿个 UUID，那么出现重复的概率约为 50%。

¹虽然仍然存在一组有限的 Pigeonholes，[但 UUIDv1](http://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_.28MAC_address.29)（又名*MAC UUID*）——假设是唯一的时空——保证生成确定性唯一的数字（在给定的机器上每秒生成一些“相对较小”的理论最大 UUID 数）。生活在不同平行维度的不同鸽群——太棒了！

² [Twitter](https://github.com/twitter/snowflake)在其自己的分布式唯一 ID 方案中使用并行维度的雪花。

³兔子喜欢住在洞穴，而不是鸽子洞。GUID的*使用*还充当隐式并行分区。只有当重复的 GUID*用于相同目的*时，才会出现与冲突相关的问题。想想有多少重复的自增数据库主键！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-02T02:22:27.947

您在`GenerateSeededGuid`方法中真正需要做的就是创建一个 128 位随机数并将其转换为 Guid。就像是：

```
public Guid GenerateSeededGuid(int seed)
{
  var r = new Random(seed);
  var guid = new byte[16];
  r.NextBytes(guid);

  return new Guid(guid);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-26T14:33:48.967

```
 public static Guid SeededGuid(int seed, Random random = null)
    {
        random ??= new Random(seed);
        return Guid.Parse(string.Format("{0:X4}{1:X4}-{2:X4}-{3:X4}-{4:X4}-{5:X4}{6:X4}{7:X4}",
            random.Next(0, 0xffff), random.Next(0, 0xffff),
            random.Next(0, 0xffff),
            random.Next(0, 0xffff) | 0x4000,
            random.Next(0, 0x3fff) | 0x8000,
            random.Next(0, 0xffff), random.Next(0, 0xffff), random.Next(0, 0xffff)));
    }

    //Example 1
    SeededGuid("Test".GetHashCode());
    SeededGuid("Test".GetHashCode());

    //Example 2
    var random = new Random("Test".GetHashCode());
    SeededGuid("Test".GetHashCode(), random);
    SeededGuid("Test".GetHashCode(), random); 
```

此方法基于 php v4 uui [https://www.php.net/manual/en/function.uniqid.php#94959](https://www.php.net/manual/en/function.uniqid.php#94959)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-13T14:14:55.867

这有点旧，但不需要随机生成器。但是是的，这对于测试目的很有用，但不适用于一般用途

```
 public static Guid GenerateSeededGuid<T>(T value)
    {
        byte[] bytes = new byte[16];
        BitConverter.GetBytes(value.GetHashCode()).CopyTo(bytes, 0);
        return new Guid(bytes);
    } 
```****

# javascript - Jquery 切换无法正常工作？

> ID：13188285
> 
> 赞同：1
> 
> 时间：2012-11-02T02:04:52.707
> 
> 标签：javascript, jquery, jquery-ui

我有一个我想点击的按钮（在我的例子中是'.circle'）。当我单击它时，我希望#data div 淡入然后使用“margin-top:50px”进行动画处理。然后，当用户第二次单击切换按钮时，它会动画到“margin-top:0px”，然后淡出。

但是我遇到的问题是，当我第三次单击切换时，我希望它再次运行第一个功能。但相反，它做了一些奇怪的事情，并在第一个函数再次运行之前重置为 50px 的边距顶部。

我真的很感激这方面的一些帮助。这是我用相同的代码编写的 JSFiddle，您会在多次单击后看到我遇到的问题。还有一个问题是当你第一次点击它时它不起作用，但在第二次点击时起作用。

[http://jsfiddle.net/sN8Tn/](http://jsfiddle.net/sN8Tn/)

我还将在下面发布一些 jquery：

```
$(".button").click(function(){

        $(".button").toggle(

        function(){  
            $("#showme").fadeIn(500, 
            function(){
              $("#showme").animate({ "margin-top" : "50px" }, 500, 'linear');
            }
          );

        },

        function(){

          $("#showme").animate({ "margin-top" : "0px" }, 500, 'linear',
            function(){
              $("#showme").fadeOut(500);
            }
          );

        });

});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:15:01.700

删除该`.click()`功能。该`.toggle()`功能暗示了点击。[jQuery .toggle()](http://api.jquery.com/toggle-event/) [jsFiddle](http://jsfiddle.net/TheJoeFletch/sN8Tn/2/)

```
$(".button").toggle(
function() {
    $("#showme").fadeIn(500, function() {
        $("#showme").animate({
            "margin-top": "50px"
        }, 500, 'linear');
    });
}, function() {
    $("#showme").animate({
        "margin-top": "0px"
    }, 500, 'linear', function() {
        $("#showme").fadeOut(500);
    });
});​ 
```

# html - Internet explorer 9 制作不应该存在的线条和框

> ID：13188287
> 
> 赞同：0
> 
> 时间：2012-11-02T02:04:56.307
> 
> 标签：html, css, internet-explorer, internet-explorer-9

在我的主页上，出于某种原因，它在内容的右侧和面包屑栏的正下方划了一条大约 3px 高的线。[例子](http://stonerhideout.com)。

第二个问题，是它还在这个页面 [示例上制作了一个框](http://www.stonerhideout.com/index.php?/forum/4-introduce-yourself/)

在第二个示例中，它与用户照片混淆，将其移动到不应该存在的框中。连同关注论坛按钮。它也应该在盒子的正下方。要查看它的外观，请在除 ie 之外的任何浏览器中检查这些页面。我真的可以为此使用修复程序。如果它是一个 css 的东西，我有一个 ie 特定的 css 文件，我可以将代码放入我只是无法弄清楚我需要在那里放入什么。也可以有人在 ie 8 中检查它，因为我不再拥有它，如果有不同的修复方法，你也可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:27:18.980

看起来您正在根据浏览器更改 HTML 或 DOM。您可能有一些客户端或服务器端代码以浏览器变体的方式操作事物。

例如，在 IE 中，您有两个 ID 为“boardindex”的 DIV，但我在 Chrome 中只看到一个。使用 F12 和/或 Firebug 进一步调查差异。如有必要，使用二进制搜索方法隔离导致差异的代码。

# css - CSS 中的 -0.5px 字母间距在 Chrome 中不起作用

> ID：13188294
> 
> 赞同：2
> 
> 时间：2012-11-02T02:05:39.573
> 
> 标签：css, letter-spacing

我安装了@font-face，并且将字母间距减少了

```
letter-spacing: -0.5px 
```

这在 Firefox 中运行良好，但在 Chrome 中似乎不起作用。如何让负字母间距在 Chrome 中工作？

# ios - 为什么在 iOS 上 EXIF GPS 坐标会被截断？

> ID：13188297
> 
> 赞同：1
> 
> 时间：2012-11-02T02:06:16.237
> 
> 标签：ios, gps, exif

我在 JPG 的 EXIF 标头中添加 GPS 坐标，并将它们保存到相机胶卷中。并且由于某种奇怪的原因，当我之后使用第三方应用程序查看 JPG EXIF 信息时，十进制纬度/经度坐标已被截断，并且我的位置精度丢失了。

例子：

```
[GPSDictionary setObject:[NSNumber numberWithDouble:12.34567890]
                      forKey:(NSString*)kCGImagePropertyGPSLatitude]; 
```

结果是：

```
"{GPS}" = {
     Latitude = "12.3456789";
}; 
```

但这实际上是 JPG 文件***的 EXIF 标头中的内容：***

```
Latitude = "12.34566667"; 
```

其他时候情况更糟。

```
iPhone GPS: Longitude = 79.78598345
EXIF   GPS: Longitude = 79.786 
```

如何防止 iOS 破坏我的坐标位？

因为这会影响以后计算的准确性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-13T21:47:11.047

最可能的解释是，罪魁祸首是您用来*编写*Exif 信息的应用程序，而不是您后来用来读取 Exif 信息的应用程序。

Exif v2.3 标准 ( [http://www.cipa.jp/std/documents/e/DC-008-2012_E.pdf](http://www.cipa.jp/std/documents/e/DC-008-2012_E.pdf) ) 说 GPS 纬度和经度存储为 3 个 RATIONAL 类型的值，一个用于度数，一分钟，一秒。RATIONAL 类型的值表示两个无符号 32 位整数的比率。因此，十进制的纬度或经度必须转换为度、分和秒，并且每一个都必须表示为一个比率，这意味着必须为它们选择一个特定的分母。使用的最小单位的分母决定了分辨率，并由编写 Exif 标头的应用程序的设计者选择。

您提到的经纬度截断与选择以弧分的 1/100 为单位表示坐标的选择是一致的。您的纬度 12.3456789 度对应于 12 度和 20.740734 角分，四舍五入为 12 度和 2074/100 角分，对应于您得到的 12.3456666... 度。您的经度 79.78598345 度对应于 79 度和 47.159007 角分，四舍五入为 79 度和 4716/100 角分，对应于您得到的 79.786 度。

如果您需要更高的分辨率，那么您应该查看您一直用于编写 Exif 标头的应用程序是否可以配置为使用更高的分辨率，或者使用不同的应用程序来编写使用更高分辨率的 Exif 信息。例如，如果我使用 exiftool ( [http://owl.phy.queensu.ca/~phil/exiftool/](http://owl.phy.queensu.ca/~phil/exiftool/) ) 将原始 GPS 经纬度写入图像的 Exif 标头，然后再次使用 exiftool 提取和打印坐标，然后我分别得到 12.3456789000111 和 79.7859834499989 度，其中相对于原始坐标的差异意味着分辨率比您使用的应用程序提供的分辨率高约一百万倍。

# javascript - 如何将文档中所有锚点的 id 附加到数组中？

> ID：13188298
> 
> 赞同：-1
> 
> 时间：2012-11-02T02:06:18.653
> 
> 标签：javascript, jquery

鉴于此代码

```
<body>
<a id="id_1">Link1</a>
<a id="id_2">Link2</a>
<a id="id_3">Link3</a></body>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

如何使用 jQuery 创建包含 id1、id2、id3 的数组？

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T02:08:19.403

```
var idArray=$('a').map(function(){
  return this.id;
}).get() 
```

该`map()`方法将返回包装为 jQuery 对象的数组。使用`get()`从返回原生数组的 jQuery 解包它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:08:02.803

```
var arr = [];
$("a").each(function(){
     arr.push($(this).attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:04:11.027

我认为在纯js中更容易：

```
function getLinkIds() {
    var ids = [], links = document.links, i = links.length;
    while (i--) ids[i] = links[i].id;
    return ids;
} 
```

请注意，这只会获取链接 ID，任何基于 A 标签的内容也将返回目标，它们不是链接。

# php - 计数器的 PHP 脚本

> ID：13188299
> 
> 赞同：-2
> 
> 时间：2012-11-02T02:06:25.190
> 
> 标签：php, counter

我目前正在研究 USHAHIDI 平台上的一个项目。这是一个打击几内亚共和国腐败的网站。用户可以通过网站报告腐败事件，从而为国家创建数据地图。

我想添加一个功能，因为用户可以选择添加所涉及的金额（以货币计），并且网站可以执行该条目并将其显示在报告页面的某处，并且每次有新条目时该金额都会增加. 我想要达到的目的是从经济角度展示腐败的成本。

我给你举两个例子：

1.  X 先生被迫行贿 100 美元才能获得执照。他访问我们的网站并填写报告表。他输入金额并提交报告。现在，当报告在网站上显示时，在标题腐败成本下，它将显示 100 美元。

2.  Y 先生是同类型腐败的受害者，但他支付了 200 美元。他去我们的网站上报告他的金额。现在在网站上，我们有 2 份报告，标题为腐败成本：金额为 300 美元。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:15:57.917

有两种基本方法可以将值保存在数据库或平面文件中。当有人发布新新娘时，将其添加到当前值并重写。每次站点出现时，从文件或数据库中读取值。这真的是这里的基本内容。

# c - Why is my BST root pointer changing for some unknown reason?

> ID：13188313
> 
> 赞同：2
> 
> 时间：2012-11-02T02:08:53.627
> 
> 标签：c, pointers, binary-search-tree

I am trying to implement a Binary Search Tree data structure in C, and I have run into a bug. My pointer value changes for a reason I do not understand. (Please see bottom of post for strange output [Delete function and main functions clarify where output comes from] ) My Test function below:

```
int main(void)
{
    Bst *bst = ( Bst* ) calloc( 1, sizeof( Bst ) );
    BstInsert( bst, 7 );
    BstInsert( bst, 8 );
    BstInsert( bst, 2 );
    BstInsert( bst, 1 );
    BstTraverse( bst );
    BstRemove( bst, 7); 
    printf("=========================\n");
    printf("Root Key: %d\n", bst->key );
    printf("Left Key: %d\n", bst->left->key );
    printf("Right Key: %d\n", bst->right->key );
    printf("Location: %p\n", &bst);
    BstTraverse( bst );

    return 0;
} 
```

My Delete Node function below:

```
void BstRemove( Bst *root, int key ){
    //Seems like recursive algorithm would need doubly linked bst implementation
    Bst *temp_node = BstFind( root, key );
    Bst *parent_node = BstGetParent( root, key );
    Bst *replacement_node = ( Bst* ) calloc( 1, sizeof( Bst ) );
    if ( temp_node->key == root->key )
    {   
        if (root->left) replacement_node = BstMax( root->left );
        else if ( root->right ) replacement_node = BstMin( root->right );
        else replacement_node = NULL;
    }
    else if ( temp_node->left )
    {
        replacement_node = BstMax( temp_node );
        Bst *parent_replacement_node = BstGetParent( root, replacement_node->key );
        parent_replacement_node->right = NULL;
    }
    else if ( temp_node->right )
    {
        replacement_node = BstMin( temp_node );
        Bst *parent_replacement_node = BstGetParent( root, replacement_node->key );
        parent_replacement_node->left = NULL;
    }
    else
        replacement_node = NULL;

    if ( parent_node && key < parent_node->key )
        parent_node->left = replacement_node;
    else if ( parent_node )
        parent_node->right = replacement_node;

    if ( replacement_node )
    {
        if ( root->left->key != replacement_node->key ) replacement_node->left = temp_node->left;
        if ( root->right->key != replacement_node->key ) replacement_node->right = temp_node->right;
    }
    root = replacement_node;
    printf("Root Key: %d\n", root->key );
    printf("Left Key: %d\n", root->left->key );
    printf("Right Key: %d\n", root->right->key );
    printf("Location: %p\n", &root);
    free(temp_node);
} 
```

Output Below:

```
1
2
7
8
Root Key: 2
Left Key: 1
Right Key: 8
Location: 0x7fffc5cf52e8
=========================
Root Key: 0
Left Key: 2
Right Key: 8
Location: 0x7fffc5cf5338
1
2
8
0
8 
```

The reason this confuses me so much is because I am using a pointer. I see no reason for the root->key value to change when it is 2 within the delete function, and once it is processed
root->key becomes 0\. I am grateful for anybody who can point out my problem or help me in the right direction. You can see my current BST implementation at [https://github.com/PuffNotes/C/blob/master/data_structures/binary_tree.c](https://github.com/PuffNotes/C/blob/master/data_structures/binary_tree.c) if necessary. I recently started trying to program everyday to gain some skills, and consider myself to be a beginner in C ( for reference ). Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:51:34.327

You're not changing your root node pointer. It is passed by value to the remove function, and since it is certainly a viable target of the delete, it should be passed by address since it might change to a different node. Note: if I missed a `root` in there somewhere I apologize, but your compile should catch it).

Note: I made **no** validation pass on whether this code is correct or even works; but the real hint something was wrong was the `root =` at the bottom, followed by the print-out, then the caller (`main()`) doing the same print-out and showing a different root pointer value.

```
void BstRemove( Bst **root, int key )
{
    //Seems like recursive algorithm would need doubly linked bst implementation
    Bst *temp_node = BstFind( *root, key );
    Bst *parent_node = BstGetParent( *root, key );
    Bst *replacement_node = ( Bst* ) calloc( 1, sizeof( Bst ) );
    if ( temp_node->key == (*root)->key )
    {   
        if ((*root)->left) replacement_node = BstMax( (*root)->left );
        else if ( (*root)->right ) replacement_node = BstMin( (*root)->right );
        else replacement_node = NULL;
    }
    else if ( temp_node->left )
    {
        replacement_node = BstMax( temp_node );
        Bst *parent_replacement_node = BstGetParent( (*root), replacement_node->key );
        parent_replacement_node->right = NULL;
    }
    else if ( temp_node->right )
    {
        replacement_node = BstMin( temp_node );
        Bst *parent_replacement_node = BstGetParent( (*root), replacement_node->key );
        parent_replacement_node->left = NULL;
    }
    else
        replacement_node = NULL;

    if ( parent_node && key < parent_node->key )
        parent_node->left = replacement_node;
    else if ( parent_node )
        parent_node->right = replacement_node;

    if ( replacement_node )
    {
        if ( (*root)->left->key != replacement_node->key ) replacement_node->left = temp_node->left;
        if ( (*root)->right->key != replacement_node->key ) replacement_node->right = temp_node->right;
    }
    *root = replacement_node;

    printf("Root Key: %d\n", (*root)->key );
    printf("Left Key: %d\n", (*root)->left->key );
    printf("Right Key: %d\n", (*root)->right->key );
    printf("Location: %p\n", root);
    free(temp_node);
} 
```

Invoke it like this:

```
BstRemove( &bst, 7); 
```

And get used to passing the root in by address, as you will do *plenty* of it when you start writing balancing algorithms.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T03:40:19.827

@WhozCraig has provided a suitable answer to the main thrust of the question, but I'd really like to help a bit more with some other issues you have.

## First Steps

OK, first off, a couple of really important things about your [code](https://github.com/PuffNotes/C/blob/master/data_structures/binary_tree.c) :

*   Braces. For the love of God, use braces on your `if..else` syntax. See your `BstInsert` below.

    ```
    void BstInsert( Bst *root, int key )
    {
        if( !root->key )
            root->key = key;
        else if ( key <= root->key)
            if( root-> left )
                BstInsert( root->left, key );
            else
                root->left = NewNode( key );
        else
            if ( root -> right )
                BstInsert( root->right, key);
            else
                root->right = NewNode( key );
    } 
    ```

*   When you are writing functions to walk your BST based on whether one key is less than or greater than another, above all else you must be consistent. Using `A < B` in one place and `A <= B` can be disastrous. It also helps readability if you choose a side to stick the target node (the one you are looking for) and always do the comparisons the same way around.

## Technical Problems

Memory allocation can fail. When it does, the various allocation methods (`malloc`, `calloc`, etc) will return `NULL`. You should check for this. Note that `calloc` initialises memory to zero (clears it), while `malloc` does not. For this sort of situation (writing a basic data structure as a practice exercise), I like to wrap my allocation methods like this:

```
void *ecalloc(size_t n, size_t s) {
    void *o = calloc(n, s);
    if (NULL == o) {
    fprintf(stderr, "Memory allocation failed!\n");
    exit(EXIT_FAILURE);
    }
    return o;
} 
```

This means a) I don't have to type out annoying `if (NULL == thing)` allocation checks all the time and b) that the program will quit after printing a message if allocation fails. The latter may not always be desirable (well, the quitting part, at least, although you don't have a ton of options if you have run out of memory), but will be more than sufficient in this case.

## Design Problems

Warning: The term `Design` is used loosely here.

Let's say we want a BST to store some integers. You decide that a node in your BST will store an integer and two pointers (to nodes). That is fine. However, it means you can't sensibly use the key as a sentinel value to determine whether or not a node is used.

Luckily, we don't need to. Instead of using a node as the root when the tree is empty, just use a pointer to a node. When there is no node, the pointer is `NULL`. This is related to the problem you hit with your remove method.

A BST is a tree, made up of linked nodes, right? Or is it? You can also think of it as a tree where each node is really a subtree. That makes it well suited to recursion, so let's try to express things elegantly using recursion when we can.

Now, we have a few options.

1.  We could make an immutable bst (all your modifying calls would look like `b = bst_insert(b, 10)` because `bst_insert` and so on would all return the new modified copy of the tree without altering the old one).
2.  We could go for more along the lines of `void bst_insert(bst **b, int key)`, called as `bst_insert(&b, 10)`, where we use an extra level of indirection to modify our tree by passing in a pointer to a pointer to a node.
3.  Or we could could go for something in between the previous two options, where we have `bst *b(bst *b, int key)`, which modifies what it can of `*b` (the key and the child pointers), and assigns back what it can't. This avoids the extra indirection (which is a bit ugly) but is a bit inconsistent in that if you are using a combination of assigning function return values and function side-effects to achieve your aim.

I have picked option two to work with.

## Debugging

Suppose you insert a `1` into your BST. Perhaps you remove a `2`. How do you know that this worked? Wouldn't it be easier to debug if you could see what your BST was doing?

I suggest (especially when starting out writing basic data structures, when a complex debugging environment like gdb might be a) overkill and b) information overload) that you code ways to print out the state of your data structure very early on.

Also, if you are running *nix, `valgrind` (pronounced like "Val grinned") is your best friend. It is a memory checker, and you can use it to make sure you always free the memory you allocate (once you're done with it, of course), and to look for other memory errors like running out of bounds. Learn to use it (it's actually pretty straightforward). If you're on Windows, there's Purify although I don't think it's free... anyway I'm sure someone more familiar with that environment can recommend something.

Compiler warnings are also a wonderful thing. Turn them on and treat them like errors. When using gcc I tend to use `-W -Wall -ansi -pedantic`. On a related note, there is `-g` to generate information for GDB to use.

## Writing a BST

I was going to go over your code and dissect it, but I ended up writing a similarly styled BST myself and then went over my code explaining each part. I've gone with a two file approach. We have [`bst.c`](http://pastebin.com/urnEsFvv) and [`bst.h`](http://pastebin.com/wq07bHeA).

## bst.h

This bit is so that if the header is included multiple times in a larger system, we don't try to define or declare the same things more than once accidentally, and also so that we don't accidentally cause an infinite preprocessor loop if we have circular header references.

```
#ifndef BST_H_
#define BST_H_ 
```

Here's a typedef that both lets us avoid typing `struct bstnode` all the time, and hides the contents of the `struct bstnode` type somewhat from anyone who is just using your BST.

```
typedef struct bstnode bst; 
```

`extern` says these functions are implemented somewhere else, basically.

```
extern bst *bst_new(int k);
extern void bst_insert(bst **b, int k);
extern bst *bst_search(bst  *b, int k);
extern void bst_remove(bst **b, int k);
extern void bst_delete(bst **b);
extern void bst_newick(const bst  *b);

#endif /* BST_H_ */ 
```

## bst.c

```
#include <stdlib.h>
#include <stdio.h>
#include "bst.h" 
```

Here's the complete `struct bstnode`. We have access to the `bst` typedef because we have included `bst.h`.

```
struct bstnode {
    int key;
    bst *left, *right;
}; 
```

In this context, static means these functions have file scope.

```
static void bst_swap_keys(bst *a, bst *b);
static void bst_newick_rec(const bst *b);
static void *ecalloc(size_t n, size_t s); /* Here for compactness - normally I would put it in a utility file somewhere else. */ 
```

Now, we could just as easily have included `bst.h` in another file, `main.c`, and put our main method there, but for compactness, I didn't.

```
int main(void)
{
    bst* b = bst_new(5);

    bst_newick(b);
    bst_insert(&b, 7);

    bst_newick(b);
    bst_insert(&b, 3);

    bst_insert(&b, 8);
    bst_insert(&b, 2);
    bst_insert(&b, 1);
    bst_newick(b);

    bst_remove(&b, 7);
    bst_newick(b);

    bst_delete(&b);
    printf("%p\n", (void*) b);

    return EXIT_SUCCESS;
} 
```

The downside of doing `bst_new` this way is that you need a key before you can make your first valid node. We could have just scrapped `bst_new` and done the allocation in `bst_insert` instead, but I wanted to keep the `new`/`delete` paradigm here.

```
bst *bst_new(int k) {
bst *b = ecalloc(1, sizeof *b);
b->key = k;
return b; 
```

}

Here is our insertion method. Bear in mind that I have tried to avoid shortcuts as much as possible, and there are plenty of ways to make this code more compact. Note the obsessive use of braces - it might be extra work but I recommend it to avoid unintended behaviour, especially when modifying your code at a later date.

```
void bst_insert(bst **b, int k) {
    if (NULL == b) { /* I wanted to avoid additional levels of nesting so I did this instead of NULL != b */
    return;
    }

    if (NULL == *b) {
    *b = bst_new(k);
    } else if ((*b)->key > k) {
        bst_insert(&(*b)->left, k);
    } else if ((*b)->key < k) {
    bst_insert(&(*b)->right, k);
    }
} 
```

Find a node if possible. I could have made b `const` to show we don't modify it, but then I would have had to change the return type too, and then cast it away to modify anything I searched for, which is a bit naughty.

```
bst *bst_search(bst *b, int k) {
    if (NULL == b) {
    return NULL;
    } else if (b->key == k) {
    return b;
    } else if (b->key > k) {
    return bst_search(b->left, k);
    } else {
    return bst_search(b->right, k);
    }
} 
```

This only exists for the `bst_remove` method, but it could be useful outside this file too, so it is available through the header too.

```
bst *bst_min(bst *b) {
    if (NULL != b && NULL != b->left) {
    return bst_min(b->left);
    } else {
    return b;
    }
} 
```

Note that we swap the keys of the target node (the one being deleted) and the one that should replace it, rather than swapping the nodes themselves, and then recursively delete the target value again. If the keys were strings or something else allocated on the heap, you would also need to free the key just before freeing the node.

```
void bst_remove(bst **b, int k) {
    bst *temp;
    if (NULL == b || NULL == *b) { /* Doing it like this avoids extra indentation, which is harder to read*/
    return;
    }
    temp = *b;

    if ((*b)->key > k) {
    bst_remove(&(*b)->left, k);
    } else if ((*b)->key < k) {
    bst_remove(&(*b)->right, k);
    } else {
    if (NULL != (*b)->left && NULL != (*b)->right)
    {
        temp = bst_min((*b)->right);
        bst_swap_keys((*b), temp);
        bst_remove(&(*b)->right, k);
    }
    else if (NULL != (*b)->left)
    {
        *b = (*b)->left;
    }
    else if (NULL != (*b)->right)
    {
        *b = (*b)->right;
    }
    else
    {
        (*b) = NULL;
    }
    free(temp);
    }
} 
```

`bst_delete` is rather important. It frees all the memory you have allocated to the bst you pass to it. Remember, for every allocation call there should also be a free call. If the keys were strings or something else allocated on the heap, you would also need to free the key just before freeing the node.

```
void bst_delete(bst **b) {
    if (NULL == b) {
    return;
    }
    if (NULL != *b) {
    bst_delete(&(*b)->left);
    bst_delete(&(*b)->right);
    free(*b);
        *b = NULL;
    }
} 
```

Printing a BST in [Newick format](http://en.wikipedia.org/wiki/Newick_format) and reading off the values always feels like a little bit of a hack to me (because there's no distinction between L->R and R->L in Newick...), but I have a soft spot for it, am also used to reading it, and have found it handy for debugging in the past. And your method doing the printing ought to be consistent in its ordering anyway, unless you're crazy. This also demonstrates wrapping a recursive task by splitting off the recursive work into a separate method, which is then called from publicly available one. The latter handles other tasks that are not so well suited to recursion (e.g. printing a semi-colon and newline only once and at the top level.)

```
void bst_newick(const bst *b)
{
    if (NULL != b)
    {
    bst_newick_rec(b);
    printf(";\n");
    }
    else
    {
    printf("NULL!\n");
    }
}

static void bst_newick_rec(const bst *b)
{
    if (NULL == b) {
    return;
    }

    if (NULL != b->left || NULL != b->right) {
    printf("(");
    if (NULL != b->left && NULL != b->right) {
        bst_newick_rec(b->left);
        printf(",");
        bst_newick_rec(b->right);
    } else if (NULL != b->left) {
        bst_newick_rec(b->left);
    } else {
        bst_newick_rec(b->right);
    }
    printf(")");
    }
    printf("%d", b->key);
} 
```

Making a key swapping method is really just a minor convenience.

```
static void bst_swap_keys(bst *a, bst *b)
{
    int temp;
    if (NULL != a && NULL != b && a != b)
    {
    temp = a->key;
    a->key = b->key;
    b->key = temp;
    }
}

static void *ecalloc(size_t n, size_t s) {
    void *o = calloc(n, s);
    if (NULL == o) {
    fprintf(stderr, "Memory allocation failed!\n");
    exit(EXIT_FAILURE);
    }
    return o;
} 
```

Please keep in mind this has basically been assembled in my coffee break, and has not been rigorously tested. I hope this helps.

# binary-search-tree - 具有一个孩子的二叉搜索树删除节点

> ID：13188316
> 
> 赞同：0
> 
> 时间：2012-11-02T02:09:16.370
> 
> 标签：binary-search-tree

我有一个二叉搜索树，当我尝试删除具有单个子节点的节点时，删除该节点并将子节点移动到它的位置。我有它的代码，但是每当我这样做时，它都会给我一个错误的指针。

这是代码段

```
else if((root->Left != NULL) != (root->Right != NULL)){ //Checks if it's a on child node
    if(root->Left != NULL){ //If it has a left child, attempts to move the left child to existing node
        delete root;
        root = root->Left;
    }
    else{ //If it is right child, attempts to move right child to existing node
        delete root;
        root = root->Right;
    }
} 
```

该结构具有值

```
DATA_TYPE Value;
TreeNode* Left;
TreeNode* Right; 
```

我知道我从调试器中分配错误，那么移动节点的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:18:18.677

编辑：

不知道我是怎么错过的，但您`root`删除后立即使用。

Edit2：你需要一个临时的。

```
TreeNode* temp = root->Right;
delete root;
root = temp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T14:20:24.210

这是该方法的Java实现

```
public void removeHalfNodes () {

    if ( root == null ) return;
    if ( root.left == null && root.right == null ) return;
    if ( root.left == null && root.right != null ) root = root.right;
    else if ( root.left != null && root.right == null ) 
        root = root.left;

    removeHalfNodesRec ( root );
}

public void removeHalfNodesRec ( BinaryTreeNode node ) {

    if ( node.left != null ) {
        if ( node.left.left == null && node.left.right != null )
            node.left = node.left.right;
        else if ( node.left.right == null && node.left.left != null )
            node.left = node.left.left;

        removeHalfNodesRec ( node.left );
    }

    if ( node.right != null ) {
        if ( node.right.left == null && node.right.right != null )
            node.right = node.right.right;
        else if ( node.right.right == null && node.right.left != null )
            node.right = node.right.left;

        removeHalfNodesRec ( node.right );
    }
} 
```

# iphone - Cocos2d 加速度计问题？

> ID：13188318
> 
> 赞同：0
> 
> 时间：2012-11-02T02:09:37.433
> 
> 标签：iphone, xcode, cocos2d-iphone, accelerometer

我一直在使用以下代码开发基于加速度计的项目：

。H

```
 {
 CCSprite *donk; 

 float movement; 

 } 
```

.m

```
 -(id) init
{

if( (self=[super init]) ) {

 donk = [CCSprite spriteWithFile:@"fe1.png" rect:CGRectMake(0, 0, 50, 50)];
 donk.position = ccp (240,75);
 [self addChild:donk];

    [self scheduleUpdate]; 
     self.isAccelerometerEnabled = YES;  
    [[UIAccelerometer sharedAccelerometer] setUpdateInterval:1/60];  

}
     return self;
}

     -(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration       *)acceleration {

float deceleration = .1f; 
float sinsitivity = 10.0f; 

float acelx = +acceleration.y;
movement = movement * deceleration + acelx * sinsitivity;

 }

 - (void)update:(ccTime)delta {

CCLOG(@"Position: %f", donk.position.x);
if ( donk.position.x > 0 && donk.position.x < 480) {

donk.position = ccp(donk.position.x + movement, donk.position.y);
}

if ( donk.position.x < -55 ) {

    donk.position = ccp( 50, donk.position.y); 
}

if (donk.position.x > 430 ) {

    donk.position = ccp( 430, donk.position.y); 
}

 } 
```

真正奇怪的是它在一个项目中工作，但我将它复制并粘贴到另一个项目中，现在它不起作用。精灵在屏幕上但没有移动，CCLOG 保持 x 值为 240。怎么了？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:52:45.980

我在 cocos2d 游戏中也遇到了类似的问题。然后我就沿着这条路走。

参考这个问题的答案：[ACCELEROMETER IN COCOS2D](https://gamedev.stackexchange.com/questions/33412/accelerometer-to-move-player-left-and-right/33427#33427)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:44:49.090

我不再使用 COCOS2D，但是您不应该在其中的某个地方设置加速度计代表吗？例如

```
 self.isAccelerometerEnabled = YES;  
[[UIAccelerometer sharedAccelerometer] setUpdateInterval:1/60];  
[[UIAccelerometer sharedAccelerometer] setDelegate:self]; 
```

# c# - C# 按钮未返回预期值

> ID：13188320
> 
> 赞同：0
> 
> 时间：2012-11-02T02:10:13.047
> 
> 标签：c#

我有一个 Windows ATM 应用程序，我被困在这部分：

我有`pin`和`firstName`作为私人字符串和平衡作为私人双人。
但是，当我尝试在文本区域中显示余额时，它只会打印`0`. 是因为`retrieveAccountInformation()`有void作为回报吗？如何更改我的代码以便我可以在其他方法中使用`pin`、`firstName`和？`balance`

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using SQLDll;

namespace WindowsFormsApplication14
{

public partial class Form1 : Form
{
    private Connection myConnection;
    private Statement myStatement;
    private ResultSet myResultSet;

    String databaseURL = "http://www.boehnecamp.com/phpMyAdmin/razorsql_mysql_bridge.php";
    public string pin, firstName, userAccountNumber;
    public double balance;
    public double withdraw = 0;
    public double deposit = 0;
    bool buttonClicked;
    bool buttonClicked2;

    public Form1()
    {
        InitializeComponent();

        try
        {
            //connect to database
            SQL sql = new SQL();
            myConnection = sql.getConnection(databaseURL);
            //create Statement for executing SQL
            myStatement = myConnection.createStatement(databaseURL);
            loadAccountNumbers();
            updateBalance();
        }
        catch (Exception)
        {
            Console.WriteLine("Cannot connect to database server");
        }
        //close statement and database connection 
       myStatement.close();
       myConnection.close();
    }
    private void Form1_Load(object sender, EventArgs e)
    {

    }

    public void setText(string text)
    {

    }
    //load account numbers to ComboBox
    private void loadAccountNumbers()
    {
        //get all account numbers from database
        try
        {
            myResultSet = myStatement.executeQuery("SELECT accountNumber FROM accountInformation");
            // add account numbers to ComboBox
            while (myResultSet.next())
            {
                accountNumberComboBox.Items.Add(myResultSet.getString("accountNumber"));
            }
            myResultSet.close(); // close myResultSet
        }//end try
        catch (Exception)
        {
            Console.WriteLine("Error in loadAccountNumbers");
        }
    }//end method to loadAccountNumbers

    private void retrieveAccountInformation()
    {
        //get account info
        try
        {
            myResultSet = myStatement.executeQuery("SELECT pin, " +
           "firstName, balanceAmount FROM accountInformation " +
           "WHERE accountNumber = '" + userAccountNumber + "'");

            //get next result
            if (myResultSet.next())
            {
                pin = myResultSet.getString("pin");
                firstName = myResultSet.getString("firstName");
                balance = myResultSet.getDouble("balanceAmount");
            }
            myResultSet.close(); //close myResultSet
        }//end try
        catch (Exception)
        {
            Console.WriteLine("Error in retrieveAccountInformation");
        }
    }// end method retrieveAccountInformation

    //update database after withdrawing
    private void updateBalance()
    {
        //update balance in database
        try
        {
            myStatement.executeUpdate("UPDATE accountInformation" +
                           " SET balanceAmount = " + balance + " WHERE " +
                           "accountNumber = '" + userAccountNumber + "'");

        }
        catch (Exception)
        {
            Console.WriteLine("Error in updateBalace");
        }
    }//end method updateBalance

    private void accountNumberComboBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        accountNumberComboBox.Enabled = false;
        numberTextField.Text = " ";
        messageTextArea.Text = "Enter your PIN #.";
        button0.Enabled = true;
        button1.Enabled = true;
        button2.Enabled = true;
        button3.Enabled = true;
        button4.Enabled = true;
        button5.Enabled = true;
        button6.Enabled = true;
        button7.Enabled = true;
        button8.Enabled = true;
        button9.Enabled = true;
        buttonDone.Enabled = true;
        retrieveAccountInformation();

    }

    private void button1_Click(object sender, EventArgs e)
    {
        setText("1");
        numberTextField.Text += "1";
        buttonEnter.Enabled = true;

    }

    private void button2_Click(object sender, EventArgs e)
    {
        setText("2");
        numberTextField.Text += "2";
        buttonEnter.Enabled = true;

    }

    private void button3_Click(object sender, EventArgs e)
    {
        setText("3");
        numberTextField.Text += "3";
        buttonEnter.Enabled = true;

    }

    private void button4_Click(object sender, EventArgs e)
    {
        setText("4");
        numberTextField.Text += "4";
        buttonEnter.Enabled = true;

    }

    private void button5_Click(object sender, EventArgs e)
    {
        setText("5");
        numberTextField.Text += "5";
        buttonEnter.Enabled = true;

    }

    private void button6_Click(object sender, EventArgs e)
    {
        setText("6");
        numberTextField.Text += "6";
        buttonEnter.Enabled = true;

    }

    private void button7_Click(object sender, EventArgs e)
    {
        setText("7");
        numberTextField.Text += "7";
        buttonEnter.Enabled = true;

    }

    private void button8_Click(object sender, EventArgs e)
    {
        setText("8");
        numberTextField.Text += "8";
        buttonEnter.Enabled = true;

    }

    private void button9_Click(object sender, EventArgs e)
    {
        setText("9");
        numberTextField.Text += "9";
        buttonEnter.Enabled = true;

    }

    private void button0_Click(object sender, EventArgs e)
    {
        setText("0");
        numberTextField.Text += "0";
        buttonEnter.Enabled = true;

    }

    private void buttonEnter_Click(object sender, EventArgs e)
    {
            numberTextField.Text = " ";
            buttonEnter.Enabled = false;
            button1.Enabled = false;
            button2.Enabled = false;
            button3.Enabled = false;
            button4.Enabled = false;
            button5.Enabled = false;
            button6.Enabled = false;
            button7.Enabled = false;
            button8.Enabled = false;
            button9.Enabled = false;
            button0.Enabled = false;
            buttonBalance.Enabled = true;
            buttonWithdraw.Enabled = true;
            buttonDeposit.Enabled = true;
            messageTextArea.Text = "Welcome," + firstName;
            updateBalance();
           if (buttonClicked == true)
            {
                withdraw = Double.Parse(numberTextField.Text);
                balance = balance - withdraw;
                updateBalance();
            }

    }

    private void buttonBalance_Click(object sender, EventArgs e)
    {
        retrieveAccountInformation();
        updateBalance();

        messageTextArea.Text=(balance.ToString());
        //display balance to messageTextArea
    }

    private void buttonWithdraw_Click(object sender, EventArgs e)
    {
        buttonBalance.Enabled = false;
        buttonWithdraw.Enabled = false;
        button0.Enabled = true;
        button1.Enabled = true;
        button2.Enabled = true;
        button3.Enabled = true;
        button4.Enabled = true;
        button5.Enabled = true;
        button6.Enabled = true;
        button7.Enabled = true;
        button8.Enabled = true;
        button9.Enabled = true;
        messageTextArea.Text = "Enter withdrawal amount:";
        buttonClicked = true;

    }

    private void buttonDone_Click(object sender, EventArgs e)
    {
        button1.Enabled = false;
        button2.Enabled = false;
        button3.Enabled = false;
        button4.Enabled = false;
        button5.Enabled = false;
        button6.Enabled = false;
        button7.Enabled = false;
        button8.Enabled = false;
        button9.Enabled = false;
        button0.Enabled = false;
        buttonEnter.Enabled = false;
        buttonBalance.Enabled = false;
        buttonWithdraw.Enabled = false;
        buttonDone.Enabled = false;
        buttonDeposit.Enabled = false;
        accountNumberComboBox.Enabled = true;
        messageTextArea.Text = "Please select your account number.";

    }

    private void buttonDeposit_Click(object sender, EventArgs e)
    {
        buttonBalance.Enabled = false;
        buttonWithdraw.Enabled = false;
        button0.Enabled = true;
        button1.Enabled = true;
        button2.Enabled = true;
        button3.Enabled = true;
        button4.Enabled = true;
        button5.Enabled = true;
        button6.Enabled = true;
        button7.Enabled = true;
        button8.Enabled = true;
        button9.Enabled = true;
        messageTextArea.Text = "Enter deposit amount:";
        buttonClicked2 = true;

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:16:14.213

因为你正在使用`myResultSet.next()`.

如果您有两个 SQL 语句，例如

```
SELECT * FROM Users  
Go  
SELECT * FROM Accounts  
Go 
```

`if (myResultSet.next())`-> 这将读取从第二个 SQL 语句返回的数据。

我认为这可能是您想要的：

```
string connString = AppConfigurationManager.GetAppSetting("ConnectionString",IsQA);
using (var conn = new SqlConnection(connString))
{
    conn.Open();
    using (SqlCommand sqlCommand = new SqlCommand("SELECT pin, " +
"firstName, balanceAmount FROM accountInformation " +
"WHERE accountNumber = '" + userAccountNumber + "'", conn))
    {
        sqlCommand.CommandType = CommandType.Text;
        SqlDataReader dr = null;
        try
        {
            dr = sqlCommand.ExecuteReader();
            while (dr.Read())
            {
                pin = dr.getString("pin");
                firstName = dr.getString("firstName");
                balance = dr.getDouble("balanceAmount");
            }
        }
        catch (SqlException ex)
        {

    }
    catch (Exception ex)
    {

    }
    finally
    {
        //clean up resources that access Data
        if (dr != null)
        {
            dr.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:48:35.247

在我看来，您可以使用“out”或“ref”

```
private void retrieveAccountInformation(out string pin, out string firstname, out double balance)
{
    //get account info
    try
    {
        myResultSet = myStatement.executeQuery("SELECT pin, " +
       "firstName, balanceAmount FROM accountInformation " +
       "WHERE accountNumber = '" + userAccountNumber + "'");
        //get next result
        if (myResultSet.next())
        {
            pin = myResultSet.getString("pin");
            firstName = myResultSet.getString("firstName");
            balance = myResultSet.getDouble("balanceAmount");
        }
        myResultSet.close(); //close myResultSet
    }//end try
    catch (Exception)
    {
        Console.WriteLine("Error in retrieveAccountInformation");
    }
}// end method retrieveAccountInformation

private void buttonBalance_Click(object sender, EventArgs e)
{
    string pin = "";
    string firstname = "";
    double balance = 0;

    retrieveAccountInformation(out string pin, out string firstname, out double balance);

    updateBalance();
    messageTextArea.Text=(balance.ToString());
    //display balance to messageTextArea
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T02:21:29.347

因为 pin、firstName、balance 是局部变量，并且此方法是私有 void，所以如果您想从 void 方法中获取值。使用输入、输出变量。这使得一个方法可以返回多个值

此外， updateBalance() 做什么？它声明了变量并调用了retrieveAccountInformation 方法？？？？

例子 ：

```
private void retrieveAccountInformation(out string pin,out string firstname,out double balance)
{
 //get account info
 try
 {
        myResultSet = myStatement.executeQuery("SELECT pin, " +
       "firstName, balanceAmount FROM accountInformation " +
       "WHERE accountNumber = '" + userAccountNumber + "'");

        //get next result
        if (myResultSet.next())
        {
            pin = myResultSet.getString("pin");
            firstName = myResultSet.getString("firstName");
            balance = myResultSet.getDouble("balanceAmount");
        }
        myResultSet.close(); //close myResultSet
    }//end try
    catch (Exception)
    {
        Console.WriteLine("Error in retrieveAccountInformation");
    }
}// end method retrieveAccountInformation

private void buttonBalance_Click(object sender, EventArgs e)
{

    string pin, firstname;
    double balance;
    retrieveAccountInformation(pin, firstname, balance);
    messageTextArea.Text=(balance.ToString());
    //display balance to messageTextArea
} 
```

# bash - 一个被执行的 shell 如何知道你的 cwd？

> ID：13188323
> 
> 赞同：0
> 
> 时间：2012-11-02T02:10:19.650
> 
> 标签：bash, shell, unix

如果您进入除并 run`cd`以外的某个目录，则新的 bash 在前一个 shell 的工作目录中启动。`$HOME``exec bash`

新的 bash 如何知道以前的工作目录是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:17:22.170

流程任务结构具有继承的当前工作目录。在 Linux 上，你可以看到它是这样的：

```
ls -l /proc/self/cwd 
```

当你创建一个新的 shell 时，它会继承父进程的当前工作目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:15:57.157

它继承其工作目录，就像每个进程都继承其父级的工作目录一样。

您认为该`pwd`计划如何运作？它只是通过系统调用获得自己的工作目录`getcwd`，它从其父级继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T02:26:29.800

*工作目录*是操作系统提供的一个属性，不管他们是否想要它都归属于一个进程。

由另一个进程（父进程）生成的进程（子进程）接收生成进程的工作目录，而无需任何干预。

除了使用工作目录作为其设计的一部分的进程之外，它还可以被操作系统用于诸如在进程崩溃时确定核心转储的位置之类的事情。

# css - 在标签混乱中设置标签样式

> ID：13188324
> 
> 赞同：6
> 
> 时间：2012-11-02T02:10:32.877
> 
> 标签：css

我很难理解下面显示的这种类型的 css 选择器，或者至少是如何应用。

```
p .intro a { color: yellow } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T02:18:26.173

```
p .intro a { color: yellow } 
```

它会设置任何样式（从右到左阅读）

*   `a`标签
*   这是任何带有类的标签的后代（点是类选择器）`intro`
*   这是`p`标签的后代

示例（请注意，这些元素不是直接子元素，而是后代）：

```
<p>
    <span>
        <span class="intro">
            <span>
                <a href="#">I am yellow</a>
            </span>
        </span>
    </span>
</p> 
```

[（小提琴）](http://jsfiddle.net/9p7qD/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:12:53.083

此选择器将匹配类似于以下内容的 HTML：

```
<p>
    <span class="intro">
        <a href="#">I am yellow</a>
    </span>
</p> 
```

基本上，`a`标签内的标签与标签内的`intro`类`p`。他们不必是直系子女。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:08:26.020

您的 jsFiddle 示例由于语义而失败。窥视一下：[在 <p> 标签内嵌套块级元素......对还是错？](https://stackoverflow.com/questions/4291467/nesting-block-level-elements-inside-the-p-tag-right-or-wrong)

所以你可以做的就是改变你的标记，例如：

```
<p>
    <span class="intro">
        <a href="#">I AM yellow</a>
    </span>
</p> 
```

或者

```
<div>
    <div class="intro">
        <a href="#">I AM yellow</a>
    </div>
</div> 
```

# vb.net - 将图像导入 Visual Studio 以进行编码

> ID：13188325
> 
> 赞同：1
> 
> 时间：2012-11-02T02:10:33.843
> 
> 标签：vb.net, image, visual-studio, silverlight, expression-blend

我不觉得我在问什么是荒谬的。我能否将任何类型的图像（png、jpeg 等）导入到 Visual Studio 中，然后定义区域/热点以编码为按钮？这有点像表情混合/银光的东西，但如果我已经有了图像格式的设计，我只需要在它后面放代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T21:21:11.590

我已经在 aspx 页面的图像中使用图像映射和按钮图形上的热点来完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:32:23.550

Expression Studio 包含可以满足您要求的工具，

[http://www.microsoft.com/expression/products/Design_WhatIsExpressionDesign.aspx](http://www.microsoft.com/expression/products/Design_WhatIsExpressionDesign.aspx)

例如，通过使用设计，您可以导入现有图像并直接导出 XAML，以后可以在您的 Visual Studio/Expression Blend 项目中使用。

您必须使用此类单独的工具，例如 Visual Studio 没有内置此类功能。

# php - 如何根据多个房间价格获得平均价格

> ID：13188336
> 
> 赞同：-1
> 
> 时间：2012-11-02T02:12:47.593
> 
> 标签：php, sql, codeigniter

我有一个名为 room_prices 的表，它根据指定的日期存储不同的价格。这是示例数据。

```
id  room_id date_from   date_to     price
1   1                               3500.00
25  1       7/28/2012   7/29/2012   3600.00
27  1       8/24/2012   8/27/2012   3000.00
49  1       11/12/2012  11/16/2012  4000.00 
```

第一行是房间 1 的默认价格（room_id = 1）。

当客人预订房间时，系统将首先查看 room_prices 表中的价格。如果在桌子上找到客人预订的日期，它将根据所选日期而不是默认价格获得价格。

前任。

如果客人在 2012 年 11 月 10 日至 2012 年 11 月 11 日期间预订了房间，则价格应为 3,500。如果客人在 2012 年 11 月 12 日至 2012 年 11 月 14 日期间预订了房间，则价格应为 4,000。

如果客人在 2012 年 11 月 10 日至 2012 年 11 月 13 日期间预订了房间，则平均价格应为 3750。见下表：

```
11/10/2012  3500
11/11/2012  3500
11/12/2012  4000
11/13/2012  4000
            3750 
```

所以我的问题是是否有一个单一的 SQL 代码来获得平均价格。

更新：

我试过这个sql无济于事：

```
SELECT avg(price) as avg_price
                        FROM lf_rooms_prices
                        WHERE room_id = 1
                        AND ((DATE_FORMAT(date_from, '%m/%d/%Y') >= '11/10/2012' 
                        AND DATE_FORMAT(date_from, '%m/%d/%Y') < '11/10/2012') 
                        OR (DATE_FORMAT(date_to, '%m/%d/%Y') > '11/13/2012' 
                        AND DATE_FORMAT(date_to, '%m/%d/%Y') <= '11/13/2012')) 
```

顺便说一句，我正在使用codeigniter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:18:09.023

有`AVG()`函数，所以要获得平均价格，您的查询应该如下所示：

```
SELECT AVG(`price`) FROM `room_prices` GROUP BY `room_id` 
```

[请参阅此处](http://dev.mysql.com/doc/refman/4.1/en/group-by-functions.html#function_avg)的文档。当然，您可以将 WHERE 添加到查询中以缩小您想要平均值的数据集：

```
SELECT AVG(`price`) FROM `room_prices` WHERE <CONDITIONS> GROUP BY `room_id` 
```

**编辑：**

完整查询：

```
SELECT AVG(`price`) FROM `room_prices` 
    WHERE `room_id` = 1
          AND ((DATE_FORMAT(date_from, '%m/%d/%Y') >= '11/10/2012' 
          AND DATE_FORMAT(date_from, '%m/%d/%Y') < '11/10/2012') 
          OR (DATE_FORMAT(date_to, '%m/%d/%Y') > '11/13/2012' 
          AND DATE_FORMAT(date_to, '%m/%d/%Y') <= '11/13/2012'))
GROUP BY `room_id` 
```

关键是用`GROUP BY`。

# javascript - 使用链接打印日期和时间的 JavaScript 不起作用

> ID：13188339
> 
> 赞同：1
> 
> 时间：2012-11-02T02:13:07.530
> 
> 标签：javascript, date, browser, printing, time

我目前正在我的社区大学注​​册 JavaScript 课程，我们应该创建一个包含以下内容的页面：

“今天的日期是（日期）”

“儿童俱乐部”

“时间是（时间）”

然后，我似乎没有得到这部分，说明状态：“有一个链接到新的 kidsnew.htm 页面，其中包含文本“转到儿童俱乐部”。使用 onClick 和 widow.location 打开 kidsnew.htm。在切换之前，应该使用navigator对象和方法来测试浏览器的名称和版本，用警告框显示浏览器的名称和版本，如果他们的新页面，建议用户升级以获得更好的效果。浏览器已过期。kidsnew 页面应包含一个 HTML 表单按钮，该按钮将带您返回“kidsold.htm”页面。”

所以。我假设我需要浏览器验证，您可以在代码的第一部分中找到。我不知道我应该使用什么，因为我们没有被告知本章正在阅读的“onClick”方法。谁能帮我完善代码并按说明显示？我认为我做的大部分都是正确的；

这是我的代码：

```
<html>
<head>
<title>Kids Club</title>
<script type = "text/javascript" src = "brwsniff.js"></script>
<script type = "text/javascript">
<!-- hide me from older browsers>

//==============================Browser Info=================================
var browser_info = getBrowser();
var browser_name = browser_info[0];
var browser_version = browser_info[1];
var this_browser = "unknown";
if (browser_name == "msie")
{
if(browser_version < 5.5)
{
this_browser = "old Microsoft";
}
else
{
this_browser = "modern";
}
}
//end

if (browser_name == "netscape")
{
if (browser_version < 6.0){
this_browser = "old Netscape";
else
{
this_browser = "modern";
}
} //end

</script>

//=========================End Browser Info============================

//==========================Start Date Script============================
var date = new Date();
//new is keyword for object Date
//
//getting info from object Date
//
var month = date.getMonth();
var day = date.getDate();
var year = date.getYear();
var hour = date.getHours();
var minutes = date.getMinutes();
//january is month 0, think of arrays
//
month = month + 1;
//fix y2k
//
year = fixY2k(year);
//fix minutes by adding 0 infrotn if less than 10
//
minutes = fixTime(minutes);
var date_string = month + "/" + day + "/" + year;
var time_string = hour + ":" + minutes;
var date = "Today is " + date_string";
var time = "The time is " + time_string;

//y2k fix
//
function fixY2k(number) {
if (number < 1000){
number = number + 1900;
return number;
}
//time fixer
//
function fixTime(number){
if(number < 10) {
number = "0" + number;
}
return number;
}
//========================End Time Script==================================

// show me -->
</script>
</head>
<body>
<script type = "text/javascript">
<!-- hide me from older browsers
document.write(date);
</script>
//show me -->

<h1>Kids Club</h1>
<script type = "text/javascript">
<!-- hide me from older browsers
document.write(time);
</script>
//show me -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:45:52.457

一些评论：

```
> <script type = "text/javascript">
> <!-- hide me from older browsers> 
```

这是垃圾，HTML 注释分隔符从来不需要隐藏脚本元素内容，只需删除它们。

```
> var year = date.getYear(); 
```

您应该使用该[`getFullYear`](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.10)方法，它避免了两位数的年份问题。

```
> var date = "Today is " + date_string"; 
```

无需`date`第二次申报。这不是有害的，只是不必要的。`date`开始是一个 Date 对象，现在它是一个字符串。那不是好的编程风格，只需修改现有的`date_string`，例如

```
date_string = "Today is " + date_string"; 
```

在页面正文中，您有：

```
> <script type = "text/javascript"> 
> <!-- hide me from older browsers
> document.write(date); 
> </script>
> //show me --> 
```

请注意，注释定界符从脚本元素内部开始，然后在其外部结束。所以浏览器留下了无效的 HTML，接下来发生的任何事情都是纠错的结果（下一个脚本元素也是如此）。

解决这个问题，你可能已经解决了你的问题。

# perl - 使用 Module::Build 的 share_dir 选项时，如何确保删除旧的共享内容？

> ID：13188343
> 
> 赞同：0
> 
> 时间：2012-11-02T02:13:49.663
> 
> 标签：perl, module-build

当用户安装我的 Perl 模块时，我使用`Module::Build`'s`share_dir`选项安装只读补充内容。

如何确保在安装新版本的模块时删除以前版本的模块添加的旧内容？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:54:27.093

Yanick Champoux 最近一直在处理[这个问题](http://babyl.dyndns.org/techblog/entry/sharedir-tarball)。为此，他创建了[File::ShareDir::Tarball](https://metacpan.org/module/File%3a%3aShareDir%3a%3aTarball)及其 Dist::Zilla 对应的[Dist::Zilla::Plugin::ShareDir::Tarball](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aShareDir%3a%3aTarball)。这个想法是你的整个共享目录都被 tar 了，所以它只有一个目录。然后当你的模块升级时，tarball 被替换并且它处于你期望的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:12:22.583

如果您要从发行版中删除文件，我建议让 Makefile.PL 或 Build.PL 拒绝安装，添加这个

```
my $mod = 'CGI';
if( eval "require $mod; 1" ){
  die "

YOU HAVE TO UNINSTALL $mod before you can upgrade, use one of
cpanp -u  $mod  --force
pm-uninstall -vf $mod

";
} 
```

或者更好的是，添加一个执行实际卸载的前导码（可能使用 ExtUtils::Install::uninstall($packlist) ）

通常你会知道你的模块的哪个版本需要完全卸载，所以你可能想添加一个版本检查......

FWIW，这将成为一个很好的 Module::Build/Module::Install/ExtUtils::MakeMaker 添加/扩展/插件，接受类似的东西

```
requires_uninstall_if_installed  => '<3000' ,
requires_uninstall_if_installed  => { CGI => '<3000', 'CGI::Util' => '<3000' },
requires_uninstall_if_installed  => [ qw' CGI CGI::Util '],

requires_uninstall_if_installed( '<3000' );
requires_uninstall_if_installed( { CGI => '<3000', 'CGI::Util' => '<3000' } );
requires_uninstall_if_installed( [ qw' CGI CGI::Util '] ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T15:54:03.330

我现在已经上传[`Module::Build::CleanInstall`](http://p3rl.org/Module%3a%3aBuild%3a%3aCleanInstall)，希望能解决这样的问题。希望它有所帮助。非常感谢 Yanick 和 so-not-like-openid-anonymity 的灵感。

# xml - vb.net中的xpath没有选择具有2个标准的节点

> ID：13188344
> 
> 赞同：1
> 
> 时间：2012-11-02T02:13:50.817
> 
> 标签：xml, vb.net

我试图从这个[xml](http://tatts.com/pagedata/racing/2011/10/5/BR.xml)中“深入”到我想要的信息。

此“查询”返回正确的节点 (6)：

> 节点 = xmldoc.SelectNodes("/RaceDay/Meeting/Race[@RaceNo=" & "1" & "]/Pool")

这个不返回任何东西：

> 节点 = xmldoc.SelectNodes("/RaceDay/Meeting/Race[@RaceNo=" & "1" & "]/Pool[@PoolType=" & "A2" & "]")

我可以为不同的节点使用 2 个值或更多值来简单地确定我想要的节点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:43:14.110

其实答案是肯定的。您可以通过元素的属性来过滤节点到您心中的内容。第一个查询起作用的原因是它是一个数值，第二个查询不起作用，因为该值是一个字符串，所以“A2”不起作用，但“'A2'”会！

```
nodes = xmldoc.SelectNodes("/RaceDay/Meeting/Race[@RaceNo=" & "1" & "]/Pool[@PoolType=" & "'A2'" & "]") 
```

# iphone-5 - 退出支持 iPhone 5 布局

> ID：13188345
> 
> 赞同：2
> 
> 时间：2012-11-02T02:13:52.867
> 
> 标签：iphone-5, autolayout

这听起来是一个奇怪的问题，但我希望我的应用程序此时不支持 iPhone 5 布局。

我知道，要支持 iPhone 5 布局，我必须添加一个`Default-568h@2x.png`作为 Launch Image，然后 XIB 将调整大小并支持 iPhone 5。

目前的问题是，我们目前的布局没有 iPhone 5 4 英寸的布局。如果启用 iPhone 5 4 英寸布局，按钮将被禁用。与同事讨论后，我们决定暂时不支持 iPhone 5 布局，即我们更愿意在 App 的顶部和底部留下黑色边框。是否可以在没有 的情况下提交应用程序`Default-568h@2x.png`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:48:35.853

是的，这是可能的。这`Default-568h@2x.png`只是一个触发 iPhone 5 支持的标志，我们已经成功地向应用程序提交了修复，而无需添加`Default-568h@2x.png`文件。Apple 目前不会因为您不支持 iPhone 5 而拒绝您的 App 更新。

当然，您应该随着时间的推移更新应用程序，我不会对 Apple 将来更改此政策感到惊讶，尤其是对于新应用程序。但现在你没事！

# windows - Python 2.7 面向对象的 __init__ 方法

> ID：13188348
> 
> 赞同：0
> 
> 时间：2012-11-02T02:14:23.203
> 
> 标签：windows, class, python-2.7, spyder

我刚刚阅读了**Think Python**中关于`__init__`类方法的解释。但是，我尝试启动我为 Project Euler.net 制作的 Prime Generator 函数，但仍然出现错误：

```
Traceback (most recent call last):
  File "C:\Users\-------\Desktop\Primes.py", line 54, in <module>
    Primes.__main__()
TypeError: unbound method __main__() must be called with Primes instance as first argument (got nothing instead) 
```

我把它放在控制台中，我终于通过调用它来让它工作：

```
primes = Primes()
primes.primegenerator(some number) 
```

然后它运行正常。如何让这种行为在该`__init__`方法中起作用？

这是完整的代码：

```
class Primes():
    def __init__(self, primes = []):
        self.primes = primes
    def primegenerator(self,limit):
        'Generates primes to a given limit'
        primes = [3]
        i = 3 # i is the counter
        while len(primes) < limit - 1:
            for prime in primes:
                if i % prime == 0:
                    i += 2
                    break
                elif prime != primes[-1]:
                    continue
                else:
                    primes.append(i)
                    i += 2
                    break
        primes.insert(0,2)
        return primes
def main(self):
    limit = input('Enter a limit please: ')
    primes = Primes.primegenerator(limit)
    print '-------------------------' * 2
    print The answer is: %d' %primes[-1]
    print 'The sum of the primes is: %d' %sum(primes)
    print print '-------------------------' * 2 
```

**这甚至是一个添加init**方法 的好程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:23:47.840

错误在于`Primes.__main__()`-您需要传递一个实例，例如 `Primes.__main__(self)`or`Primes.__main__(primes)`

但是要获得完整的答案，您必须显示完整的代码。

这不是一个好主意

`Primes = Primes()`

在该语句之前，Primes 是一个类（或者可能是一个函数），之后它是一个实例。最好说

`primes = Primes()`

# joomla - 更改 Joomla 模块前端代码

> ID：13188355
> 
> 赞同：0
> 
> 时间：2012-11-02T02:14:53.557
> 
> 标签：joomla, joomla2.5, joomla-extensions

我想编辑`HTML`特定模块在模块`tmpl/default.php`文件中呈现的输出。我在 FTP 上找到了文件，进行了更改，当我清除缓存并浏览到我应该看到差异的页面时，什么也没有传达。

不知道我在这里缺少什么。Joomla 2.5.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:22:08.870

您永远不应该编辑模块构建的 n`tmpl/default.php`文件。这样做可能会导致更新模块时覆盖编辑。

@Jobin Jose 对于您的查询的答案以及更改模块的 HTML 输出的正确方法都处于正确的轨道上，#4。

首先，复制一份`your_module/tmpl/default.php`

接下来，将该副本保存在`templates/your_template/html/your_module/default.php`

对该文件的副本进行所有您想要的编辑，以后更新模块时不会触及它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:46:58.140

确保以下事项

1.  您有权在 FTP 中编辑文件。
2.  没有启用缓存插件。
3.  正确的模块 tmpl/default.php 正在编辑。
4.  确保它没有被覆盖（如果它被覆盖，那么你可以在模板文件夹中找到模块的 html。）

# java - 我将如何用不同的方法写这个？

> ID：13188359
> 
> 赞同：5
> 
> 时间：2012-11-02T02:15:09.587
> 
> 标签：java, methods

我有一个 java 项目，我被告知要编写一个程序，要求用户输入天数和温度。从那里我必须找到平均温度，高于平均温度的天数，以及从最高到最低对温度进行排序。**我已经成功地完成了所有这些事情，但是，我的教授要求我通过创建单独的方法来简化我的代码。例如，有一个方法来计算超过平均值的天数，等等。虽然我理解这个概念，但我不确定如何接近和这样做。**请帮忙？

这是我到目前为止的代码：

```
import java.util.Scanner;

public class NumberAboveAverage {

    /**
     * @param args
     */
    public static void main(String[] args) {

        System.out.println("Enter number of days of temperature to calculate:");
        Scanner keyboard = new Scanner(System. in);
        int day = keyboard.nextInt();
        int[] temperature = new int[day];

        System.out.println("Enter " + day + " temperatures to calculate.");

        for(int i=0; i<day; i++){
            temperature[i] = keyboard.nextInt();
        }

        int sum = 0;
        for(int i=0; i<day; i++){
            sum = sum + temperature[i];

        }

        int average = sum/day;
        System.out.println("The average temperature is: " + average); 

        int daysOver=0;
        for(int i=0; i<day; i++){
            if (temperature[i] > average){
                daysOver++;
            }   
        }
        System.out.println("The temperature was above average for " + daysOver + " day(s).");

            for (int i = 0; i < temperature.length; i++) {
                int min = i;
                for (int j = i; j < temperature.length; j++) {
                    if (temperature[j] < temperature[min])
                        min = j;
                }
                int temp;
                temp = temperature[i];
                temperature[i] = temperature[min];
                temperature[min] = temp;
            }

    System.out.print("The temperatures in increasing order are: ");
    for(int i=0; i<day; i++){
        System.out.print(temperature[i]+" ");
    }

}   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:22:19.723

分解代码的一个好方法是用英语进行相同的分解！你自己说的：

> 编写一个程序，要求用户输入天数和温度。从那里我必须找到平均温度，高于平均温度的天数，以及从最高到最低对温度进行排序。

*   要求用户输入天数和温度
*   找到平均温度
*   对温度进行排序

然后我们可以把它变成代码！

```
public static void main(String []args) {
  int[] temperature = getUserInput();
  int average = getAverage(temperature);
  int daysOver = getDaysOver(temperature, threshold);

  System.out.println("Average of : " + average + " with " + daysOver + " really hot days");
} 
```

现在您可以将代码放入这些函数中，并打印出您喜欢的任何内容:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:20:37.603

将您的代码分解为步骤，每个步骤都解决了一个难题。例如，有一种计算平均温度的方法，另一种计算高于平均温度的天数的方法，以及另一种按升序对温度进行排序的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T02:22:06.243

我不会在代码中为您回答您的问题，而是给您一些指示。

您可以抽象出一些功能。

*   计算平均值的函数。
*   计算平均天数的函数。
*   对温度进行排序的函数。
*   按顺序打印温度的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T02:30:49.480

您可能希望以单独的方法执行一项任务，如下所示：

```
 public static void main(String[] args) {
    int[] temperature = new int[1];
    Scanner keyboard = new Scanner(System. in);
    readTemperatures(keyboard, temperature);
    int sum = getSum(temperature);
    int average = sum/temperature.length;
    System.out.println("The average temperature is: " + average); 
    int daysOver=getDaysOver(temperature, average);
    System.out.println("The temperature was above average for " 
                                                         + daysOver + " day(s).");
    sortTemperature(temperature);
    printTemperature(temperature);
 } 
```

并创建如下方法：

```
private static void printTemperature(int[] temperature) {
    System.out.print("The temperatures in increasing order are: ");
     for(int i=0; i<temperature.length; i++){
        System.out.print(temperature[i]+" ");
     }
}

private static void readTemperatures(Scanner keyboard, int[] temperature){
       System.out.println("Enter number of days of temperature to calculate:");
       int day = keyboard.nextInt();
       temperature = new int[day];
       System.out.println("Enter " + day + " temperatures to calculate.");
       for(int i=0; i<day; i++){
        temperature[i] = keyboard.nextInt();
       }
} 
```

完成其余方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T02:25:11.577

好吧，对于初学者来说，选择一些相当完整的语句序列，例如：

```
int daysOver=0;
for(int i=0; i<day; i++){
    if (temperature[i] > average){
        daysOver++;
    }   
} 
```

弄清楚你需要输入什么参数以及你需要什么结果：

*   天（也许应该叫“numDays”，但那是另一个讨论）
*   温度[]
*   阈值（平均）
*   返回天数超过

（我暂时忽略了可以`day`从数组大小中获得的复杂性/“优化”。）

因此，一种方法可能是：

```
computeDaysOver(int[] temperature, int average, int day) {
    int daysOver=0;
    for(int i=0; i<day; i++){
        if (temperature[i] > average){
            daysOver++;
        }   
    }
 } 
```

但是您需要指定一个返回类型，并实际返回它：

```
int computeDaysOver(int[] temperature, int average, int day) {
    int daysOver=0;
    for(int i=0; i<day; i++){
        if (temperature[i] > average){
            daysOver++;
        }   
    }
    return daysOver;
 } 
```

当然，您需要用新方法替换原始代码所在的位置：

```
int daysOver = computeDaysOver(temperature, average, day); 
```

请注意，在选择要包含在函数中的操作时，重要的是要“画一个圆圈”，输入和输出数量有限，并且具有明确的目的。尝试包含一组完整的连接操作，而不仅仅是任意集合。

例如，您可以编写一个`computeAverage`包含求和循环和除法的函数。除非有一些单独的需要只计算总和，否则您通常不会在函数中只使用求和循环，而在外部（或在单独的函数中）进行除法。而且，如果您出于某种原因确实需要将求和作为单独的函数，您可以让您的`computeAverage`函数调用求和函数，然后进行除法，而不是将总和作为参数传递。

（在这种情况下，这些示例相当微不足道，但这些原则适用于更大、更复杂的代码块。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T02:30:31.523

那么为什么要使用将他的代码分解成不同的方法呢？这是因为为了区分不同的不同逻辑/需求，所以`code becomes readable and bug hunting becomes easy`.

在你的情况下，你有这些事情要做：

```
calculating the average will go into separate method.
sorting the temperatures-will go into separate method..
A method that prints temperatures in order. 
```

因此，方法具有返回类型。这意味着在计算和经过逻辑之后，它会带有一些输出，所以我们可以使用返回类型的方法来获取这个值。

现在之后使用可以像这样制作你的类的对象

```
MyClass myClassObj = new MyClass(); 
```

`myClassObj`现在使用像这样的引用变量调用您的方法

```
myClassObj.myMethod(); 
```

如果返回某些内容，则将其保存到变量中。

因此，如果 like`myMethod()`返回一个值，那么我们可以这样做以在调用方法中`String`获得我们的结果：`myMethod()`

```
String myStrVar = myClassObj.myMethod(); 
```

# eclipse - 如何在 Eclipse 的 Package Explorer 中打开项目

> ID：13188369
> 
> 赞同：4
> 
> 时间：2012-11-02T02:16:16.140
> 
> 标签：eclipse, android-2.2-froyo

![在此处输入图像描述](../Images/4927e1095c7d972b058dd38a5298ff4d.png)![在此处输入图像描述](../Images/e40c072259c1170e9cbec8c992454aa1.png)我是使用 Eclipse 和学习 android 的新手，所以上次我编写代码时，我创建了一个应用程序，在包资源管理器中（我认为这就是名称）一切都是可见的，但今天再次重新启动，我什么也看不到，也不知道我做了什么！整个包裹是空的，当我去打开时，我只能打开一个窗口。这些是文件夹

*   AndroidManifest.xml
*   源代码
*   资源
*   可绘制的 hdpi
*   布局
*   价值观

我可以打开 AndroidManifest 但不能通过 Package Explorer 通过文件！我很高兴看到所有这些文件夹并希望将其取回！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:08:40.277

您使用的是同一个工作区吗？

*   如果没有切换工作区：
    文件 > 切换工作区

*   如果是，不知何故您的项目从中删除。因此从以下位置重新导入：
    文件 > 导入 > Android > 现有 Android 项目到工作区

# sqlite - 如何将核心数据用于频繁更新的数据库

> ID：13188371
> 
> 赞同：1
> 
> 时间：2012-11-02T02:16:49.337
> 
> 标签：sqlite, google-maps, core-data

我想创建一个包含大约 500 个联系人的数据库的应用程序，其中包括：姓名、位置、电子邮件等。

同样，当用户启动应用程序时，它会获取用户位置并向您显示 100 英里半径内附近的联系人，有点像 yelp 应用程序

该数据库将每隔几周添加一次，可能有 10 个左右的联系人。

我的问题是如何做到这一点，以便在用户启动应用程序时更新我的​​应用程序的最新数据库。

我一直在四处寻找和搜索，但找不到明确的解决方案，我可以使用核心数据还是应该走不同的路线，如果我使用核心数据或不使用，我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:31:40.890

核心数据绝对是要走的路。

使用几百或几千条记录，您会发现导入/更新速度会非常快，确实如此之快，以至于您甚至可能不需要并发。我在 iPhone 3GS 上不到 2 秒就导入了大约 20.000 条类似地址簿的记录。

您提到的更新幅度微不足道。即使它们是从网上下载的，也只需要一秒钟的时间。

此外，您几乎不必担心内存管理，因为 Core Data 在幕后非常擅长。

# audio - Win RT 中的音乐效果

> ID：13188372
> 
> 赞同：5
> 
> 时间：2012-11-02T02:16:57.067
> 
> 标签：audio, windows-runtime

在 Win RT 中播放声音而不是使用 Media Element 的另一种方法是什么？我想播放一些“即玩即忘”的声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:43:14.413

您可以拥有多个 MediaElement，也可以使用 XAudio2 或 WASAPI，但多个 MediaElement 可能是最简单的方法。只需跟踪完成播放的曲目，以便您可以重复使用它。

# php - PHP PDO连接和sql查询

> ID：13188376
> 
> 赞同：2
> 
> 时间：2012-11-02T02:17:49.770
> 
> 标签：php

我目前在 MySQL 数据库中有 5 个表。其中一些共享外键并且相互依赖。我已经在 MySQL 中测试了查询，它运行良好。使用查询 php 时，它显示数据库 PDO 连接错误。另外，我不确定我的 PHP 是否会像我想要的那样打印结果。我该如何解决这两个问题？

**PHP**

```
<?

try {

    $pdo = new PDO ("mssql:host=$hostname;dbname=$dbname","$username","$pw");
  } catch (PDOException $e) {
    echo "Failed to get DB handle: " . $e->getMessage() . "\n";
    exit;
  }
      $query = $pdo->prepare("SELECT course.id, major.name, course.name, course.code, course.description, course.hours, semester.semester, semester.year
                            FROM course
                            LEFT JOIN major_course_xref ON course.id = major_course_xref.course_id
                            LEFT JOIN major ON major.id = major_course_xref.major_id
                            LEFT JOIN course_semester_xref ON course.id = course_semester_xref.course_id
                            LEFT JOIN semester ON course_semester_xref.semester_id = semester.id");
      $query->execute();

      foreach ($pdo->query($query) as $row) {
        print $row['id'] . "\t";
        print $row['name'] . "\t";
        print $row['name'] . "\n";
        print $row['code'] . "\n";
        print $row['description'] . "\n";
        print $row['hours'] . "\n";
        print $row['semester'] . "\n";
        print $row['year'] . "\n";
    }

      unset($pdo); 
      unset($query);

?> 
```

**所需显示：**

```
Computer Engeneering
Visual Studio I
CPE1900
Introduction to disciplined, object-oriented programming
4
Fall
2013 
```

**Rays 回答后更新：**这是我现在得到的错误

```
Warning: PDO::query() expects parameter 1 to be string

Warning: Invalid argument supplied for foreach() in 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:27:45.853

一方面，您的 dsn 连接字符串表示 mssql 而不是 mysql....

这将导致与 mysql 数据库的连接问题。

将您的连接更改为此并重试：

```
 $pdo = new PDO ("mysql:host=$hostname;dbname=$dbnameU","$username","$pw"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:22:30.440

PDO 准备方法创建一个新的 PDO 语句*对象*。在示例中将 $query 作为参数传递给 $pdo->query() 将失败，因为查询方法只接受字符串作为参数。

$pdo->query() 和 $pdo->prepare() 都返回 PDOStatement 对象，您可以从中获取结果。两者之间的主要区别在于 query() 同时准备和执行语句，而 prepare() 允许您在执行之前进一步更改语句。两者都使用相同的方法在执行后获取结果。

根据您的代码，我推荐以下选项之一：

1) 使用 $pdo->query($sql) 同时准备和执行你的语句：

```
$query = $pdo->query($sql);
foreach($query->fetchAll() as $row) {
  //...do something
} 
```

2）分别准备和执行您的语句，然后返回您的结果：

```
$query = $pdo->prepare($sql);
$query->execute(); // Note: this returns a boolean, true if successful, false if otherwise.
foreach($query->fetchAll() as $row) {
  //...do something
} 
```

注意：对于这个特定的实例，您可以通过将 PDO::FETCH_ASSOC 作为参数传递来确保返回类型的内容适用于您当前的代码：

例子：

```
foreach($query->fetchAll(PDO::FETCH_ASSOC) as $row) {
  //..do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:22:12.037

该`execute()`方法`FALSE`在错误或`TRUE`成功时返回。然后，您需要一次获取一行。

请参阅： http: [//php.net/manual/en/pdostatement.execute.php](http://php.net/manual/en/pdostatement.execute.php)和[http://www.php.net/manual/en/pdostatement.fetch.php](http://www.php.net/manual/en/pdostatement.fetch.php)

```
if ($query->execute()){

      while ($row = $query->fetch(PDO::FETCH_ASSOC)){
        print $row['id'] . "\t";
        print $row['name'] . "\t";
        print $row['name'] . "\n";
        print $row['code'] . "\n";
        print $row['description'] . "\n";
        print $row['hours'] . "\n";
        print $row['semester'] . "\n";
        print $row['year'] . "\n";
    }
}
else
    echo 'Could not fetch results.'; 
```

# git - Git远程分支

> ID：13188382
> 
> 赞同：0
> 
> 时间：2012-11-02T02:18:33.220
> 
> 标签：git, git-remote

今天我尝试跟踪一个远程分支（特别是 Mapbox-ios-sdk 的 23-callouts.

那么，以下三个命令有什么区别：

`git checkout remotes/origin/23-callouts`

`git checkout -b remotes/origin/23-callouts`

`git checkout -b 23-callouts remotes/origin/23-callouts`

第一个命令给了我一个“（无分支）”。我的第二个命令实际上是我在第三个命令的意图处犯的一个错误，我很惊讶它通过了，我不知道那里发生了什么。第三个命令会给我所谓的“远程跟踪分支”，但这与第二个或第一个有什么不同？我还看到“git checkout --track”与第三个命令是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:36:34.287

您可以通过`git help checkout`&找到答案`git help branch`

```
git checkout remotes/origin/23-callouts 
```

尝试检查一个名为“remotes/origin/23-callouts”的本地分支，所以这不是你想要的

```
git checkout -b remotes/origin/23-callouts 
```

尝试基于 HEAD 创建一个名为“remotes/origin/23-callouts”的新本地分支。所以这也不是你想要的。

```
git checkout -b 23-callouts remotes/origin/23-callouts 
```

尝试基于远程分支创建一个名为“23-callouts”的新本地分支。所以是正确的

about `git checkout --track`，几乎是一样的，因为你有一个本地分支跟踪和远程分支，唯一的区别是本地分支的名称。

```
git checkout --track remotes/origin/23-callouts 
```

与第三条命令相同。本地分支命名为*23-callouts*

通过第三个命令，您可以通过更改后面的参数来更改本地分支的名称`-b`

# android - 如何从上下文菜单编辑联系人

> ID：13188384
> 
> 赞同：0
> 
> 时间：2012-11-02T02:18:38.837
> 
> 标签：android, contextmenu

我一直在开发一个联系人应用程序，它允许：通话、短信、删除等……和编辑联系人。当用户单击并按住联系人时，会显示上下文菜单（下图）。操作调用、短信、...已完成，但编辑未完成。请给我一些代码或建议。提前致谢

[图片在这里](http://i.imgur.com/6CzCS.jpg)。

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
    switch (item.getItemId()) {
        case R.id.call:
            //do something
            String mPhoneNumber = "tel:" + getPhoneNumber(mRecordId);
            Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse(mPhoneNumber));
            startActivity(intent);
            return true;

        case R.id.message:
            //do something
            String mSmsNumber = getPhoneNumber(mRecordId);
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("sms:" + mSmsNumber)));
            return true;

        case R.id.sendemail:
            //do something
            return true;
        case R.id.edit:
            //do something // need help???

            return true;
        case R.id.delete:
            //do something
            new AlertDialog.Builder(mContext).setMessage("Do you want to delete this contact?")
            .setTitle("Delete").setCancelable(false).setPositiveButton("Delete", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    deleteContactEntry(mRecordId);
                    populateContactList();
                }
            }).setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    dialog.cancel();

                }
            }).show();

            return true;
        default:
            return super.onContextItemSelected(item);
    } 
```

以下是我使用的方法：

```
/**
 * Populate the contact list based on account currently selected in the account spinner.
 */
private void populateContactList() {
    // Build adapter with contact entries
    Cursor cursor = getContacts();
    String[] fields = new String[] {
            ContactsContract.Data.DISPLAY_NAME
    };
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contact_entry, cursor,
            fields, new int[] {R.id.contactEntryText});
    mContactList.setAdapter(adapter);
}

/**
 * Obtains the contact list for the currently selected account.
 *
 * @return A cursor for for accessing the contact list.
 */
private Cursor getContacts()
{
    // Run query
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME
    };

    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" +
            (mShowInvisible ? "0" : "1") + "'";

    // String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = 0"; 

    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, selection, selectionArgs, sortOrder);
}

/**
 * Launches the ContactAdder activity to add a new contact to the selected accont.
 */
protected void launchContactAdder() {
    Intent i = new Intent(this, ContactAdder.class);
    startActivity(i);
}

/**
 * Get Phone Number
 */
private String getPhoneNumber(long contactId){
    String mPhoneNumber = null;
    String [] colums = new String[] { ContactsContract.CommonDataKinds.Phone.NUMBER };
    String where = ContactsContract.Data.RAW_CONTACT_ID + "=?";
    String[] whereParameters = new String[]{Long.toString(contactId)};
    Cursor contacts = getContentResolver().query(ContactsContract.Data.CONTENT_URI,colums,where, whereParameters, null);
       if (contacts.moveToFirst()) { 
              mPhoneNumber = contacts.getString(0);
           } 
           contacts.close(); 
           return mPhoneNumber; 
}

/**
 * Delete Contact
 */
private void deleteContactEntry(long contactId){
    //String [] projection = new String [] {ContactsContract.RawContacts._ID};

    String mSelectionClause = ContactsContract.RawContacts._ID + "=?";
    String [] mSelectionArgs = new String [] {Long.toString(contactId)};
    getContentResolver().delete(ContactsContract.RawContacts.CONTENT_URI, mSelectionClause, mSelectionArgs);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:25:04.490

对于编辑功能，您可以使用编辑意图来调用默认联系人应用程序

```
Intent i = new Intent(Intent.ACTION_EDIT);
i.setData(Uri.parse(ContactsContract.Contacts.CONTENT_LOOKUP_URI + "/" + id)); //contact's id
startActivityForResult(i, idEDIT_CONTACT); 
```

要发送电子邮件，请查看此[问题](https://stackoverflow.com/q/8701634/1050058)或[此](https://stackoverflow.com/q/3312438/1050058)

# haskell - ~/.cabal/config 中的“共享”是什么意思？

> ID：13188387
> 
> 赞同：4
> 
> 时间：2012-11-02T02:19:16.573
> 
> 标签：haskell, cabal

我想“共享”会`cabal install`更快，对吧？shared 的默认值为 False。我们应该使用 True 还是 False 来共享？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T02:23:40.373

这意味着“还构建与`cabal install`“一起安装的动态链接（也称为共享）版本的库。

```
$ cabal help install | grep shared
    --enable-shared                Enable Shared library
    --disable-shared               Disable Shared library 
```

默认情况下，仅构建静态链接的版本。所以它不会变得`cabal install libfoo`更快 - 相反，构建`libfoo`将需要更多时间。

# bash - bash 在第一次失败时终止

> ID：13188391
> 
> 赞同：4
> 
> 时间：2012-11-02T02:20:10.620
> 
> 标签：bash, shell

有没有办法让我的 bash 脚本在第一个返回非零状态的命令上终止？

我知道我可以用`&&`' 链接它：

```
cd /stuff &&
echo 'what's up' &&
.... 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T02:22:56.487

是的，这就像在*shebang*之后的脚本开头添加一样*简单*：

 *```
set -e 
```

如果需要（仅部分代码），您可以停止此操作

```
set +e 
```

或在*shebang*上：

```
#!/bin/bash -e 
```

或通过调用脚本：

```
bash -e script.bash 
```*

# javascript - Jquery Isotope：制作水平砌体

> ID：13188394
> 
> 赞同：1
> 
> 时间：2012-11-02T02:20:22.127
> 
> 标签：javascript, jquery, jquery-masonry, jquery-isotope

我正在尝试使用 JQuery Isotope 构建 JQuery Masonry 的水平版本。我希望我的结果看起来像这样：

[布局模式](http://isotope.metafizzy.co/demos/layout-modes.html)（点击砖石水平选项）。

根据网站说明： [Masonry Horizo​​ntal](http://isotope.metafizzy.co/docs/layout-modes.html#masonryhorizontal) 我的脚本如下所示：

```
$('#isotopecontainer').isotope({
        itemSelector : '.item',
        masonry : {
          columnWidth : 270
        }
 }); 
```

然而，有两件事正在发生：

1) 当页面加载时，div 的高度`#isotopecontainer`设置为 60px，因此您只能看到 div 的顶部`.item`。

2）如果您调整浏览器的大小，则`#isotopecontainer`div 会扩展，但`.item`div 不会像示例那样排列。

任何人都可以帮助我指出正确的方向吗？我的演示站点在[这里](http://clarkeconstructions.com.au/newsite/)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:48:16.847

您的演示站点在 Firefox 中运行。

虽然，您是对的，但在 Chrome 中并非如此。问题相当简单。**您需要**在图像上设置宽度和高度属性。否则，Chrome 将它们加载为 0px 高度（这使得容器的默认高度为 line-height 值），直到它们获得文件。Firefox 不这样做，它会在创建布局之前等待知道图像大小。

希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T09:54:59.360

您需要添加 layoutMode: 'masonryHorizo​​ntal' 否则它将不起作用。像这样：

```
$('#isotopecontainer').isotope({
    itemSelector : '.item',
    layoutMode: 'masonryHorizontal',
    masonry : {
      columnWidth : 270
    } 
```

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:00:32.203

`#isotophecontainer`有`overflow: hidden`。删除它会在 Chrome 中为我显示所有图像。

# javascript - 在 d3 中设置 id 问题

> ID：13188395
> 
> 赞同：22
> 
> 时间：2012-11-02T02:20:22.703
> 
> 标签：javascript, casting, d3.js

所以这就是我正在做的事情：

```
selection = canvas.selectAll("circle").data(mydata)

            selection.enter().append("circle")

            selection
                .attr("id", function(d, i){ var result = i+''; return result; }) 
```

简而言之，我试图将每个元素的 id 设置为其索引的字符串表示形式。

但是，当我稍后尝试通过使用`d3.select("#1")`或使用数字变量 i 和 go来访问该特定元素时`d3.select("#" + i.toString())`，似乎没有任何效果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-02T02:40:20.713

我想通了，显然ids不能以数字开头。

# windows-runtime - 如何在 WinRT 应用程序中正确实现热键？

> ID：13188396
> 
> 赞同：2
> 
> 时间：2012-11-02T02:20:31.943
> 
> 标签：windows-runtime, implementation, shortcut, hotkeys

我尝试使用 Window 的 ButtonDown 事件以及 Grid 的 ButtonDown （所有窗口元素都在此网格内）。然而，这些事件似乎从未发生过。

从逻辑上讲，处理按钮按下事件（如实现热键）的代码应该在 WinRT 应用程序中的什么位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:56:53.317

我以为最近有人在博客上写过这个，但我现在找不到这个帖子。您可以查看这些文章：[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh868246.aspx)、[链接](http://www.michielpost.nl/PostDetail_71.aspx)。

基本上你会处理`Window.Current.CoreWindow.KeyDown`/ ，存储修饰键 ( , , )`Up`的当前状态并响应组合来处理它们。然后，您还应该在控件上指定可访问性和帮助字符串，如下所示：`Ctrl``Alt``Shift`

```
ToolTipService.ToolTip="Shortcut key: Ctrl+P"
AutomationProperties.AcceleratorKey="Control P" 
```

# java - 在集合类型之间转换是否被认为是不好的形式？

> ID：13188400
> 
> 赞同：5
> 
> 时间：2012-11-02T02:21:36.573
> 
> 标签：java, list, collections, bag

我希望这个问题足够具体，可以被认为适合 StackOverflow。我检查了常见问题解答，我认为这是合格的，因为它是特定的并且与编程相关。

我正在用 Java 实现一个复杂的数据挖掘算法（FP-growth）。该算法的一些初始阶段要求我扫描一个大型数据库并保持对找到的每个项目类型的运行计数。这似乎非常适合`Hashbag`界面。我在 Apache Commons 中找到了一个似乎对我有用的。

所以现在，我的 HashBag 充满了 [itemType, count] 条目（对）。稍后在算法中，我需要对这些对执行大量类似列表的操作。在某些情况下，我必须按 itemType 对集合进行排序。在其他情况下，我必须按计数排序。这似乎非常适合`List`界面。

我的结论是我必须将我的 Hasbag 转换为列表。然而不知何故，它感觉很脏，就像是在浪费空间和时间。有没有更聪明的方法来做到这一点，或者这是一个常见的情况，有一个编程问题，你必须在不同的时间以不同的方式对待你的集合，而转换是必要的邪恶？

一种替代方法是制作我自己的界面，它确实是一个列表，但允许“袋式”添加。每次我想添加一些东西时，我都必须保持列表排序并使用自定义比较器执行二进制搜索。构建该集合可能比构建一个 Hashbag 需要更长的时间，但我会在最后节省转换步骤。关于哪个更可取的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:25:08.300

我假设您使用的是 Apache Commons Collections HashBag 类。您是否考虑过改用[TreeBag](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/bag/TreeBag.html)？它实现了相同的 Bag 接口，但有效地根据您提供的比较器对数据进行排序。

也就是说，当您需要更改排序顺序时，通常没有比将集合复制到具有不同比较器的新集合更好的答案了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T02:28:22.513

如果您使用[Guava](https://code.google.com/p/guava-libraries/) [`Multiset`](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multiset)而不是Apache——`Bag`大致类似，但风格不同——您可以在不转换的情况下完成大部分操作。 [`Multiset.entrySet()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multiset.html#entrySet%28%29)返回 a `Set<Entry<E>>`，`Entry<E>`有效地表示一对元素和一个计数 - 这听起来可能是解决您对元素计数对进行操作的最佳方式，也许吧？您可以像遍历`Map.entrySet()`.

您可以使用[`Multisets.copyHighestCountFirst(Multiset)`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multisets.html#copyHighestCountFirst%28com.google.common.collect.Multiset%29)以最高频率优先顺序重新排序多重集，并使用[`TreeMultiset`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/TreeMultiset.html)直接按元素排序。

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T03:23:31.053

> 然而不知何故，它感觉很脏，就像是在浪费空间和时间。有没有更聪明的方法来做到这一点，或者这是一个常见的情况，有一个编程问题，你必须在不同的时间以不同的方式对待你的集合，而转换是必要的邪恶？

有时需要在集合类型之间进行转换。如果有必要，“肮脏”或“不雅”或“愚蠢”并不真正相关。

预先考虑这些事情也可能是错误的。实际的计算权衡通常很难掌握。例如，如果您将 HashBag 更改为 TreeBag，插入会从`O(1)`to`O(logN)`但您避免了排序和复制的开销。“大哦”分析/思考不会给你一个明确的答案。事实上，真正的性能将取决于缩放因子、N 的值、包中的命中率和未命中率等等。

我建议尝试以明显的方式实现事物，看看它是否表现得足够好......如果不是，则分析它以查看数据结构是否是主要瓶颈。然后根据对*输入数据集的分析和其他测量*，找出从基线实现中*提高性能的最佳方法。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T00:14:53.957

回答我自己的问题！

我对`Multiset`上面 Louis Wasserman 提到的 Guava 库提供的不同类型进行了一些实验。在我的特定测试用例中，我正在解析一个 1GB 的 XML 文件（书籍和作者的数据库）并创建一个非常大的 Multiset（记录每个作者在数据库中出现的次数）。一旦我到达解析的末尾，我需要获得一个新的 Multiset，它只包含出现`x`多次的作者，其中 x 是某个阈值。我还希望我的最终集按作者姓名排序。

以下是我尝试过的两种不同方式（除其他外）：

1) 收集 a 中的原始计数，`TreeMultiset`然后删除任何不符合阈值的计数 2) 收集 a 中的原始计数`HashMultiset`，然后创建一个新的`TreeMultiset`，我从哈希集中添加每个项目，计数满足阈值

第二种方法被证明明显更快（大约 25%），尽管有转换和额外的内存使用。显然，其中很大一部分是从二叉树中删除效率很低。

所以这里的明确结论是，在这种情况下，转换是一个很好的举措（除非你有不允许它的内存限制）。

再次感谢你把我带到 Guava 图书馆，路易斯！

# perl - 如何使我的 Perl 模块的 README 文件与 Github 的 Markdown 显示兼容？

> ID：13188404
> 
> 赞同：17
> 
> 时间：2012-11-02T02:22:02.080
> 
> 标签：perl, github, markdown, perl-module

我在 Markdown 的 Perl 模块中编写了 README 文件。Github 将此 README 文件视为纯文本。我尝试将文件重命名为“README.md”——这在 Github 上看起来很棒，但对于查找名为“README”的文件的 Perl 工具来说是不可见的。

有什么方法可以让我同时拥有*一个*README 文件，并让 Github 正确解释我的 Markdown 格式？

我能想到的唯一选择是同时拥有一个 README 和一个 README.md，但我不想手动保持这两个文件同步。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T03:10:48.570

在 pod 中格式化您的 README，将其重命名为 README.pod，然后在[两个](https://github.com/github/markup#markups)地方都可以使用！[例子](https://github.com/jberger/Galileo)

出于我的目的，我实际上只是通过执行从主 pod 生成我的 README.pod

```
$ podselect lib/My/Main/Module.pm > README.pod 
```

~~一个警告，命名的外部链接不能正常工作，`L<GitHub|http://github.com>`不幸的是指向 search.cpan.org 寻找 GitHub 模块。我试图告诉他们这个故障，但它让我无处可去。相反，您可以只使用普通的外部链接（即`GitHub: L<http://github.com>`），它们可以正常工作。~~

好消息，自从我上次检查以来，他们似乎已经解决了这个问题！

* * *

只是一个问题，Perl 工具链的哪些部分需要 README 文件？如果您的意思是将它包含在您的 tarball 中，请确保将文件添加到您的清单中，它应该被包含在内。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-02T03:17:31.663

你听说过[POD](http://perldoc.perl.org/perlpod.html)吗？这是 Perl 中的标准文档工具。POD 是一种简单的文本文档格式，实际上存在于您的代码中。perl 附带的命令之一是[perldoc](http://perldoc.perl.org/perldoc.html)。您可以使用它来获取任何 Perl 命令的信息。试试这些：

```
$ perldoc File::Find
$ perldoc -f split 
```

[CPAN](http://www.cpan.org)中的所有 Perl 模块都需要合并 POD 文档。事实上，这就是 CPAN 网页本身的构建方式。

那么，我要去哪里，这对你有什么帮助？

您应该在 Perl 程序中包含 POD 文档。然后，您可以使用[pod2text](http://perldoc.perl.org/pod2text.html)命令为您的 Perl 程序创建 README：

```
$ pod2text myperl.pl > README 
```

这解决了你一半的问题。

另一半有点棘手。您需要从 CPAN 安装系统上的[Pod::Markdown](https://metacpan.org/pod/Pod::Markdown)。然后，您可以运行该模块附带的[pod2markdown](http://search.cpan.org/~rwstauner/Pod-Markdown-1.321/bin/pod2markdown)命令来创建文件的降价版本：

```
$ pod2markdown myperl.pl > README.md 
```

结果：

*   您的文档应该存在于您的 Perl 程序中。
*   用户可以使用该`perldoc`程序打印出您程序的完整文档。
*   您可以使用该`pod2text`工具来创建`README`文件。
*   您可以使用该`pod2markdown`工具来创建`README.md`文件。
*   作为奖励，您可以使用Perl 附带的[Pod::Usage](http://perldoc.perl.org/Pod/Usage.html)`-help`模块将 POD 文档（或其中的一些片段）显示为帮助文本，当用户使用参数运行您的程序时会显示该帮助文本。

所以，你的文档所在的地方，你正在使用几个帮助程序来创建文件 Github 和你使用的任何*Perl 工具*需要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-02T03:14:45.847

如果您不介意使用[Dist::Zilla](https://metacpan.org/module/Dist::Zilla)，您几乎可以完全不用维护 README。例如[Dist::Zilla::Plugin::ReadmeFromPod](https://metacpan.org/module/Dist::Zilla::Plugin::ReadmeFromPod)可以通过从主模块中提取 Pod 来创建 README 文件。这意味着永远不必再次编写自述文件。

我自己从未尝试过，但您可以查看类似[Dist::Zilla::Plugin::ReadmeMarkdownFromPod](https://metacpan.org/module/Dist::Zilla::Plugin::ReadmeMarkdownFromPod)的内容，以在降价中自动创建您的 README。

这可能不是您正在寻找的确切答案，但我认为使用这种工具可以为您节省大量时间，因为它可以让您避免在文档中重复自己。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-27T11:37:04.220

如果您*真的想*`README`使用不涉及 Pod的 Markdown 分发模块，另一种解决方案是：

*   将您的`README`文件重命名为`README.md`
*   `MANIFEST`更新文件中的先前更改

我认为这可能是一个有趣的解决方案，因为比 Pod 了解 Markdown 语法的人更多。由于 README 文件的目的是任何人都可以阅读，因此应考虑使用 Markdown。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-08T20:15:41.523

我只是在寻找这个问题的解决方案，并决定使用[Dist::Zilla::Plugin::ReadmeAnyFromPod](https://metacpan.org/pod/Dist::Zilla::Plugin::ReadmeAnyFromPod)，因为它理解`=attr`和`=method`标记来自 Pod::Weaver。

* * *

## 回答 #6

> 赞同：-9
> 
> 时间：2012-11-02T02:36:13.243

> 我能想到的唯一选择是同时拥有一个 README 和一个 README.md，但我不想手动保持这两个文件同步。

然后自动使它们保持同步？

# c# - C# 应用程序与 C++ 服务器通信

> ID：13188412
> 
> 赞同：0
> 
> 时间：2012-11-02T02:22:50.593
> 
> 标签：c#, c++, encryption, compression

如何规划： - 客户端在 C# 端（向服务器发送请求） - 服务器在 C++ 端（Linux）（响应客户端请求并关闭）

这些节点之间的通信是通过 TCP 进行的，我想应用 SSL 加密和压缩方法，我不担心 C# 方面，但我不想在 C++ 中编写太多代码。

是否有任何快速方法可以将加密和压缩层添加到该通信或将该通信打包/封装到具有加密和压缩的其他通信中？

谢谢！

# html - 表格单元格之间的 1px 间隙

> ID：13188416
> 
> 赞同：1
> 
> 时间：2012-11-02T02:23:13.853
> 
> 标签：html, css, css-tables

这个错误真的让我很头疼。由于某种原因，我的表格在中间单元格的左侧和右侧有 1px 的间隙。我不知道是什么原因造成的。你可以在这里看到一个例子：http: [//jsfiddle.net/JdayW/1/](http://jsfiddle.net/JdayW/1/)

我需要的是中间单元格中的图像作为“掩码”，以便您可以看到它后面的背景图像。图像的左侧和右侧需要有一个纯色，延伸到浏览器窗口的边缘。我认为一张桌子是实现这一目标的最佳方式.. 但我可能是错的。当我在中间单元格或整个表格上放置背景颜色时，间隙就会消失，但显然这对我不起作用，因为我不能在图像后面有背景颜色。

在我正在构建这个具有透明度的“蒙版”图像的站点中，它将滚动到它后面的固定背景上。所以我不能只把png做成带有背景的jpg。

发生这种情况是因为我将表格设置为`width:100%`并且中间单元格设置为固定的 300px 宽度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:35:57.190

出于某种原因，您的`td`标签导致了边距。将它们设置为 0 并赋予左右`td`标签 50% 的宽度似乎可以解决问题：

```
table {width:100%; height:300px; border-collapse: collapse; border-spacing: 0;}

td.left, td.right {background-color:green; margin:0; padding:0; width:50%;}

td.middle {width:300px; margin:0; padding:0;} 
```

工作jsfiddle：http: [//jsfiddle.net/JdayW/34/](http://jsfiddle.net/JdayW/34/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:23:38.690

您是否尝试过仅在中心 td 上设置 0px 的填充？[http://jsfiddle.net/JdayW/45/](http://jsfiddle.net/JdayW/45/)

```
td.middle {width:300px;padding: 0px} 
```

左右 tds 在每一边也有 1px 的间隙，但由于背景颜色包括你看不到的填充，如果你在每个 td 上放置一个空白，你可以将所有 tds 设置为 padding:0px [http:// jsfiddle.net/JdayW/44/](http://jsfiddle.net/JdayW/44/)

# java - JFrame中的BufferedImage不显示

> ID：13188417
> 
> 赞同：1
> 
> 时间：2012-11-02T02:23:15.793
> 
> 标签：java, swing, jframe, bufferedimage, drawimage

试图将图像打印到窗口中。一切都运行没有错误，如果我用另一个图形类替换drawImage，它也可以工作。但是，窗口缺少图像，我不知道为什么。同样，JFrame 的东西和 Graphics 可以很好地绘制其他图形，但只是不在这里绘制图像。谢谢。

```
import javax.swing.JApplet;
import javax.swing.JFrame;
import javax.imageio.*;
import javax.imageio.stream.*;
import java.awt.*;
import java.awt.image.*;
import java.io.*;

public class GraphicsMovement2 extends JApplet{
    BufferedImage image = null;

    public static void main(String args[]){
        BufferedImage image = null;
        try {
            File file = new File("C:\\Users/Jonheel/Google Drive/School/10th Grade/AP Computer Science/Junkbin/MegaLogo.png");
            ImageInputStream imgInpt = new FileImageInputStream(file);
            image = ImageIO.read(file);
        }
        catch(FileNotFoundException e) {
            System.out.println("x");
        }
        catch(IOException e) {
            System.out.println("y");
        }

        JApplet example = new GraphicsMovement2();
        JFrame frame = new JFrame("Movement");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(example);
        frame.setSize(new Dimension(1366,768));       //Sets the dimensions of panel to appear when run
        frame.setVisible(true);
    }
    public void paint (Graphics page){
    page.drawImage(image, 100, 100, 100, 100, Color.RED, this);
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T02:35:37.317

你已经定义`image`了两次...

```
BufferedImage image = null;

public static void main(String args[]){
    BufferedImage image = null; 
```

这实质上意味着当您使用该`paint`方法时，`null`您还没有初始化实例变量。

您将遇到的另一个问题是您尝试从静态引用加载图像`image`但未声明为`static`. 最好将此逻辑移动到构造函数或实例方法中。

添加到 a 时不要`JApplet`用作容器`JFrame`，最好使用类似`JPanel`. 在向容器添加内容时会有所帮助。

**你必须调用** `super.paint(g)`......事实上，**不要**覆盖`paint`顶级容器的方法，如`JFrame`or `JApplet`。使用类似的东西`JPanel`并覆盖该`paintComponent`方法。顶级容器不是双缓冲的。

这些`paint`方法做了很多重要的工作，而且更容易使用`JComponent#paintComponent`......但不要忘记调用`super.paintComponent`

**更新**

您需要`image`在将要使用的上下文中进行定义。

因为您将 声明`image`为 的实例字段`GraphicsMovement2`，所以您需要一个 的实例`GraphicsMovement2`才能引用它。

但是，在您的`main`方法中`static`，您还声明了一个名为`image`.

的`paint`方法`GraphicsMovement2`看不到您在 中声明的变量`main`，只有实例字段（即`null`）。

为了解决这个问题，您需要将图像的加载移动到 的实例的上下文中`GraphicsMovement2`，这可以最好地实现（在您的上下文中），但是将图像加载移动到的构造函数中`GraphicsMovement2`

```
public GraphicsMovement2() {
    try {
        File file = new File("C:\\Users/Jonheel/Google Drive/School/10th Grade/AP Computer Science/Junkbin/MegaLogo.png");
        ImageInputStream imgInpt = new FileImageInputStream(file);
        image = ImageIO.read(file);
    }
    catch(FileNotFoundException e) {
        System.out.println("x");
    }
    catch(IOException e) {
        System.out.println("y");
    }
} 
```

下面的两个示例将产生相同的结果...

![在此处输入图像描述](../Images/2cd203e77b5cb33afdb2898624384b98.png)

**简单的方法**

```
public class TestPaintImage {

    public static void main(String[] args) {
        new TestPaintImage();
    }

    public TestPaintImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ImagePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagePane extends JPanel {

        public ImagePane() {
            setLayout(new BorderLayout());
            ImageIcon icon = null;
            try {
                icon = new ImageIcon(ImageIO.read(new File("/path/to/your/image")));
            } catch (Exception e) {
                e.printStackTrace();
            }
            add(new JLabel(icon));
        }

    }
} 
```

**艰难的道路**

```
public class TestPaintImage {

    public static void main(String[] args) {
        new TestPaintImage();
    }

    public TestPaintImage() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ImagePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagePane extends JPanel {

        private BufferedImage background;

        public ImagePane() {
            try {
                background = ImageIO.read(new File("/path/to/your/image"));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g.drawImage(background, x, y, this);
            }
        }
    }
} 
```

花时间阅读教程

*   [使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T02:24:39.037

当您甚至不使用小程序时，您的类不应该扩展 JApplet——这没有任何意义。反而

*   让您的绘图类扩展 JPanel
*   在 JPanel 的 paintComponent 方法中绘制
*   将此 JPanel 添加到 JFrame 的 contentPane。
*   阅读[Swing 绘画教程](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)。您无法猜测这些东西并期望它能够工作，教程将向您展示它是如何正确完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T02:31:30.990

不要混合文件设备，

> File file = new File("C:\\Users/Jonheel/Google Drive/School/10th Grade/AP Computer Science/Junkbin/MegaLogo.png");

应替换为：

> File file = new File("C:/Users/Jonheel/Google Drive/School/10th Grade/AP Computer Science/Junkbin/MegaLogo.png");

# operating-system - 计算操作系统中的响应时间

> ID：13188418
> 
> 赞同：2
> 
> 时间：2012-11-02T02:23:32.860
> 
> 标签：operating-system, scheduling

这是一个我无法解决的考试问题，即使在搜索了响应时间之后也是如此。

我认为答案应该是`220, 120`

> RR 调度的有效性取决于两个因素：q 的选择、时间量和调度开销 s。如果一个系统包含 n 个进程，并且一个进程的每个请求恰好消耗 q 秒，则请求的响应时间 (rt) 为 rt= n(q+s) 。这意味着响应是在花费整个 CPU 突发并被调度到下一个进程之后生成的。（在 q+s 之后）
> 
> 假设一个操作系统包含 10 个同时启动的相同进程。每个进程包含 15 个相同的请求，每个请求消耗 20 毫秒的 CPU 时间。一个请求之后是一个耗时 10 秒的 I/O 操作。系统在CPU调度上消耗2msec。计算以下两种情况下每个进程发出的第一个请求的平均响应时间：
> 
> *   (i) 时间段为 20 毫秒。
>     
>     
> *   (ii) 时间段为 10 毫秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T02:19:29.930

请注意，我假设您的意思`10ms`不是`10s`I/O 等待时间，并且当 I/O 正在进行时，没有任何东西可以在 CPU 上运行。在实际操作系统中，后一种假设是不正确的。

每个过程都需要时间`15 requests * (20ms CPU + 10ms I/O)/request = 450ms`。

然后，除以时间量得到调度延迟的数量，并将其添加到`450ms`：

1.  `450ms / 20ms = 22.5`但实际上应该是`23`因为您无法进行部分重新安排。这给出了答案`450ms + 2ms/reschedule * 23 reschedules = 496ms`。

2.  `450ms / 10ms = 45`. 这给出了答案`450ms + 2ms/reschedule * 45 reschedules = 540ms`。

# java - 用于从两个格式化源创建页面的适当报告合并技术

> ID：13188421
> 
> 赞同：0
> 
> 时间：2012-11-02T02:23:44.240
> 
> 标签：java, report, xsl-fo, docx, apache-fop

考虑一个由页眉、详细信息顶部、详细信息底部和页脚组成的报告页面。我有一项将运行“应用程序”的服务。此应用程序将生成最终将出现在报告的详细底部部分中的内容。它将其输出存储在文件系统中。在 App 产生输出（和关闭）后，单独的“服务”将产生最终报告“合并”由 App 产生的内容（服务提供页眉、页脚和细节顶部区域的内容）。如果我在 Word 中手动生成此文件，我实质上是将 Word 文档作为对象插入到最终报告文档中。

我正在尝试确定一种合适的技术来实现这一目标。

要求包括：

1.  生成最终报告的服务将是在 Linux 机器上运行的 Java 服务。我将开发此代码。
2.  产生详细底部内容的应用程序可以是Windows（例如，C#）或Linux（例如，Java）应用程序。任何数量的其他开发人员都将开发此代码并通过我将提供的 SDK 与我的服务进行交互。他们被认为是熟练的开发人员，但我不知道他们对任何报告生成技术有什么经验
3.  服务使用的模板将为完成的报告提供相同的外观和感觉，而不管运行的应用程序如何，而应用程序将完全控制完成报告的详细底部部分的内容。换句话说，如果模板在完成的报告中为详细信息底部部分分配了一个 7Wx5H 的“框架”，则应用程序本质上将有一个 7x5W 的空白页可供使用。
4.  完成的报告可能是多页，第一页可能与其余页不同。如果 App 生成多个（例如，7Hx5W 页面），则服务会将每个 App 页面合并到已完成报告的每个页面的 detail-bottom 部分，从而让 App 处理分页，就像它正在生成整个报告一样报告自己。
5.  在某些时候，我想为最终用户提供一个 UI 来管理完成的报告（模板）的布局。
6.  我并不真正关心应用程序开发人员如何生成要插入到细节底部框架中的内容，并且由于他为我提供了一个完成的可执行文件供我运行，我不会为他提供任何 UI 来管理他的报告布局/内容
7.  交付给最终用户的完成报告将以 PDF 格式。
8.  由于我不确定应用程序开发人员的技能组合，并且可能有许多应用程序和开发人员，我希望他们产生我可以接受的输出，以便合并到 dertail-bottom 框架中，并且得到很好的接受、支持且不会过于繁琐使用。

迄今为止向我推荐的各种技术是：

1.  阿帕奇 FOP (XML-FO)
2.  DOCX
3.  文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:49:18.383

这是使用 FOP 的解决方案：

*   让应用程序将各自的数据保存到两个具有固定名称的 XML 文件中。因此，您的 API 将是数据生产者必须遵守的 XML 文档模式。

*   提供一个包含完整 PDF 布局的 XSL 文件，并使用 document() xsl 函数读回这两个文件。

*   要同时处理多个报告，请为每个报告使用一个目录。

*   FOP 将负责分页。

如果您希望最终用户可以配置布局，您可以让他们以应用程序定义的方式更改 xsl。您还可以将 XSL 拆分为几个部分（用于第一个报告、第二个报告、整体布局）并将它们全部导入一个主模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T14:26:47.370

如果最终输出是可以精确控制外观的 PDF，为什么不让生成底部框架的应用程序也生成可以精确控制外观的 PDF？

PDF 支持的一项功能是“Form XObject”，它允许将一个 PDF 中的内容包含到另一个 PDF 中。您甚至可以从页面中取出特定的矩形，这样您就可以允许应用程序创建它想要的任何大小的 PDF，并指定包含内容的矩形。

必须有支持 Form XObjects 的 Java 库，因为这并不难。我编写了一个 Python 库名称[pdfrw](https://github.com/pmaupin/pdfrw/)，它允许您以这种方式非常轻松地合并页面。我还没有把它记录得那么好，但是那个网站上有几个例子，[这里有一个非常相关的例子](https://stackoverflow.com/questions/31557909/pypdf-split-each-page-in-two-pad-with-blank-space/31640152#31640152)

# android - 当自定义子视图的一部分无效时，自定义父视图完全重绘？

> ID：13188426
> 
> 赞同：1
> 
> 时间：2012-11-02T02:24:15.807
> 
> 标签：android, ondraw, invalidation

我刚刚开始在 Android 中制作自定义视图，所以我还没有了解有关视图层次结构的绘制（绘制）周期以及有效使用 View 方法`invalidate`和`onDraw`. 但是我遇到了一个令人费解的行为。

我有一个自定义视图组，扩展了**RelativeLayout**类。这是我父母的看法。其中，作为孩子，我有几个自定义的子视图。有时，为了响应用户操作，我需要重绘这些视图的各个部分，包括父视图和子视图。

通常这是事件的顺序。在子视图类中，我通过调用`invalidate(rct)`where rct 是分隔我需要更新的区域的 Rect 来使其一小部分区域无效。

令人费解的是，这种非常本地化的行动引发了真正过度的全球性反应。从我的 LogCat 跟踪输出的证据来看，这似乎是：

(1)*整个*父视图经历一次完整的重绘

其次是：

(2) 每个子视图都经历一次完整的重绘

诚然，如果响应 (1) 发生，那么 (2) 确实应该遵循，因为所有子视图都需要完全重新绘制。但是为什么（1）会发生呢？

这是视图层次结构的绘制周期的正常行为吗？如果是这样，那似乎就*大错特错了！* 相反，我本来希望只需要重绘父级的一小部分区域，直接位于要重绘的子视图中标记为脏的矩形下方。此外，即使是父级的那个小区域，也只有在覆盖的子级在该区域不是完全不透明的情况下才需要重绘。

这种看似*零散的*大规模重绘活动的证据是，在我的每个自定义视图的每个 onDraw 方法主体中，我都有一个 LogCat 跟踪语句，如下所示：

```
@Override
protected void onDraw(Canvas c) {
   Rect rct = new Rect();     
   Boolean doDraw = c.getClipBounds(rct);
   Log.v(LOGTAG, "onDraw Entry doDraw=" + doDraw + "  rct=" + rct);

   ....  
} 
```

LogCat 输出清楚地表明，每个 onDraw 调用都是针对*整个*视图表面的。

# c# - 如何在 C# 中使用 XML Schema 正则表达式？

> ID：13188437
> 
> 赞同：2
> 
> 时间：2012-11-02T02:25:41.357
> 
> 标签：c#, regex, xsd

我有一个两部分的问题：

1.  如何获取构面的`regex`表达式，`XSD`然后使用它来确定字符串是否与限制匹配？在我看来，这是“如何将 XML Schema 正则表达式转换为 .NET `Regex`”，但如果除了转换表达式之外，您还有其他方法可以让我这样做，我愿意接受建议。

2.  如果测试（＃1）失败，我如何使用该`XSD`模式`regex`自动创建一个满足约束的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:12:49.187

1.  [XmlSchemaDatatype.ParseValue](http://msdn.microsoft.com/en-us/library/4t690ysw%28v=vs.100%29.aspx)是您的答案。假设相关的简单类型有更多方面，并且您只想针对模式进行验证，那么您只需在[XmlSchemaSimpleTypeRestriction.Facets](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemasimpletyperestriction.facets%28v=vs.100%29.aspx)中找到枚举方面，使用它的副本创建一个新的 XmlSchemaSimpleType，新的 XmlSchemaSimpleTypeRestriction[内容](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemasimpletype.content%28v=vs.100%29.aspx)和新[的模式方面，](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemapatternfacet%28v=vs.100%29.aspx)使用您在上面挖掘的值。然后使用这个新创建的简单类型，调用 XmlSchemaDatatype.ParseValue。

    我建议不要在评论中提出您的建议，因为正则表达式“方言”是不同的。

2.  我不知道这样的事情，可以免费或以其他方式获得。我确信它可以完成，但是当我自己需要它时，我从来没有找到真正有效的东西。如果你找到了，请分享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T19:47:37.233

将 XML Schema 正则表达式转换为 .NET 正则表达式并不难。

基本上，您需要用它们的 .NET 替代品（例如 \p{_xmlC} 和 \P{_xmlD}）替换少数模式（例如 \c 和 \D）。

您还需要将表达式包装在 ^ 和 $ 标记中。

[.NET 在https://github.com/Microsoft/referencesource/blob/master/System.Xml/System/Xml/Schema/FacetChecker.cs](https://github.com/Microsoft/referencesource/blob/master/System.Xml/System/Xml/Schema/FacetChecker.cs)的方法 Preprocess 中实现了这一点

但是，如果您决定复制粘贴实现，请小心。

你需要更换循环

`for (int position = 0; position < length - 2; position ++)`

和

`for (int position = 0; position < length - 1; position ++)`

因为出于优化原因，Preprocess 假定输入表达式包含在括号中。

# java - 如何在 gradle 依赖项的依赖项中指定分类器？

> ID：13188438
> 
> 赞同：53
> 
> 时间：2012-11-02T02:25:49.410
> 
> 标签：java, dependency-injection, guice, gradle, dependency-management

假设我想在我的项目中添加 guice-assistedinject 作为依赖项。它将 guice 工件指定为依赖项本身。我如何告诉它使用 no_aop 版本的 guice？

我知道我可以做到以下几点，但是我可以在不排除 guice 模块的情况下一步完成吗？

```
dependencies {
  compile (group: 'com.google.inject.extensions', name: 'guice-assistedinject', version: '3.0') {
    exclude module: 'guice'
  }
  compile group: 'com.google.inject', name: 'guice', version: '3.0', classifier: 'no_aop'
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-10T12:37:25.383

没有更简单的解决方案。您可以使用短依赖符号（例如`"com.google.inject:guice:3.0:no_aop"`）来缩短代码。

# android - android gdb错误：“无法访问地址的内存”

> ID：13188442
> 
> 赞同：6
> 
> 时间：2012-11-02T02:26:37.943
> 
> 标签：android, gdb

*   目标：Android 4.1.2，设备：Google Nexus S，gdb 服务器版本：7.3.1-gg2
*   主机：cygwin，gdb版本：7.3.1-gg2

ndk 构建，使用`NDK_DEBUG=1`

```
GNU gdb (GDB) 7.3.1-gg2
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "--host=i586-pc-mingw32msvc --target=arm-linux-android".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
(gdb) target remote :1234
Remote debugging using :1234
0x4008fa40 in ?? ()
(gdb) set solib-search-path obj/local/armeabi
(gdb) warning: while parsing target library list (at line 2): No segment defined for org.cocos2dx.wgame
warning: while parsing target library list (at line 2): No segment defined for org.cocos2dx.wgame
file obj/local/armeabi/libwgame.so
A program is being debugged already.
Are you sure you want to change the file? (y or n) [answered Y; input not from terminal]
Reading symbols from R:\code\wondergame\wgame\proj.android/obj/local/armeabi/libwgame.so...done.
(gdb) list
(gdb) Cannot access memory at address 0x37fc28 
```

当我插入断点时，`gdb`状态为“无法访问地址处的内存”

请帮我

# java - 带有 OBJ 文件的顶点纹理

> ID：13188443
> 
> 赞同：1
> 
> 时间：2012-11-02T02:27:04.260
> 
> 标签：java, opengl, textures, vertex

我一直在尝试了解顶点纹理的工作原理，但不了解参数的作用。顶点纹理通常如下所示：

```
vt 0.000000 0.000000 
```

vt 0.010000 0.000000 vt 0.020000 0.000000 vt 0.030000 0.000000

我首先认为它们是纹理图像上像素的 (x, y) 值，但这对于 vt 中的小数点没有意义。

> vt uvw 多边形和自由形式几何的顶点语句。

```
Specifies a texture vertex and its coordinates. A 1D texture
requires only u texture coordinates, a 2D texture requires both u
and v texture coordinates, and a 3D texture requires all three
coordinates.

u is the value for the horizontal direction of the texture.

v is an optional argument.

v is the value for the vertical direction of the texture. The
default is 0.

w is an optional argument.

w is a value for the depth of the texture.The default is 0\. 
```

是我能找到但无法理解的最详细的 vt 解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:43:39.497

它不是 x 和 y，而是称为 U 和 V。(0,0) 是图像的一个角，(1,1) 是对角，与纹理大小无关。

在大多数情况下，使用 2D 纹理坐标 (U,V)

您可能会得到大于 1 或小于 0 的值。在大多数情况下，纹理只是包裹，因此 (0,0) 到 (1,1) 与 (1,1) 到 (2,2) 或 (-1) 相同,88) 到 (0,89) 等。

# erlang - 通过以编程方式指定要修改的字段来修改 Erlang 中的记录

> ID：13188449
> 
> 赞同：3
> 
> 时间：2012-11-02T02:27:59.893
> 
> 标签：erlang, record

当修改是我们以编程方式指定的字段时，是否有任何相对简单的方法来（复制和）修改 Erlang 中的记录？

例如：

```
-record(my_record, {foo = 0, bar = 0}).

modify_record(Record, Field, Value) ->
  Record#my_record{Field = Value}. 
```

这样人们就可以做类似的事情`modify_record(#my_record{foo = 1}, bar, 42)`，或者，`modify_record(some_method_that_returns_a_my_record(), foo, 3.14)`

编译类似的东西我会得到像这样的错误

```
field 'Field' is not an atom or _ in record my_record 
```

我意识到有一些关于如何转换为/从 proplist 的示例，但我希望有更直接的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T15:08:20.613

如果您传递字段编号（而不是字段名称），则有可能。表示你调用函数

```
modify_record(MyRecord, #my_record.foo, 3.14) 
```

代替

```
modify_record(MyRecord, foo, 3.14) 
```

（#my_record.foo 返回记录中 foo 字段的数量）。在这种情况下，您的修改记录可能是

```
 modify_record(R, FieldNo, Val) -> setelement(FieldNo,R,Val). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T03:04:00.270

你可以让它像这样工作：

```
modify_record(Record, Field, Value) ->
 case Field of 
   foo -> Record#my_record{foo = Value},
   bar -> Record#my_record{bar = Value}
 end. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T03:01:26.453

您可以使用[https://github.com/jcomellas/mlapi/blob/master/src/dynarec.erl中的“dynarec”之类的东西](https://github.com/jcomellas/mlapi/blob/master/src/dynarec.erl)

在您的模块中，您必须通过在顶部包含以下内容来指定解析转换：

```
-compile({parse_transform, dynarec}). 
```

此解析转换将在编译时通过为该模块中定义或包含的所有记录插入 setter 和 getter 来修改您的模块。

这意味着您可以执行以下操作：

```
NewRecord = set_value(field_name, Value, Record) 
```

我建议阅读 dynarec 顶部的评论，因为它包含更完整的示例。

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T14:08:18.990

记录纯粹是编译时的，所以一切都必须在编译时知道。这意味着您无法在运行时计算字段名称，而这是您想要做的。@ligaoren 和 @chops 给出的方法是处理这个问题的两种方法，但是，正如你所看到的，它们都在编译时完成它们的工作。

# cordova - 如何在 PhoneGap Build 中设置域白名单？

> ID：13188451
> 
> 赞同：6
> 
> 时间：2012-11-02T02:28:08.533
> 
> 标签：cordova, whitelist

根据 Apache Cordova 文档， [http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)

如果我们希望本机应用程序访问外部域，我们需要取消对域白名单中特定网络域和子域的访问权限。

如果我使用PhoneGap Build，如何设置域白名单？还是我们在使用PhoneGap Build的时候根本不需要设置？

如果有人知道，请帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T06:53:18.860

通过使用 config.xml，查看本指南以了解如何制作 config.xml [https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

# facebook - 从移动设备分享 Facebook 文章

> ID：13188452
> 
> 赞同：0
> 
> 时间：2012-11-02T02:28:15.740
> 
> 标签：facebook, sharing

我了解从桌面分享文章可以使用以下 URL

```
http://www.facebook.com/sharer.php?s=100&p[title]=titlehere&p[url]=http://www.yoururlhere.com&p[summary]=yoursummaryhere&p[images][0]=http://www.urltoyourimage.com 
```

但是，当我在 Ipad 或移动设备中打开 URL 时，我收到一条错误消息：“抱歉，出了点问题。我们正在努力尽快解决这个问题。”

另一种方法是使用 m.facebook.com/sharer.php，但似乎我可以在这里使用的参数是有限的（我无法指定标题或图像）。

关于如何从移动设备分享一篇文章并获得与使用 www.facebook.com/sharer.php 的文章类似的任何提示？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:01:24.707

The only property that I can see that the mobile sharer accepts is "u" for url

i.e. [http://m.facebook.com/sharer.php?u=www.lagan-press.org.uk](http://m.facebook.com/sharer.php?u=www.lagan-press.org.uk)

Please correct me if I am wrong.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T06:26:17.660

```
http://m.facebook.com/sharer.php?s=100&p[title]=titlehere&p[url]=http://www.yoururlhere.com&p[summary]=yoursummaryhere&p[images][0]=http://www.urltoyourimage.com 
```

使用`m.facebook.com`，不使用`www.facbook.com`。

# c# - 根据条件将元素插入子节点

> ID：13188457
> 
> 赞同：-1
> 
> 时间：2012-11-02T02:28:28.890
> 
> 标签：c#, xml, linq

我有以下 XML

```
XElement xe = 
   new XElement("Schedule",
      new XElement("Team",
         new XElement("Name", "SomeName"),
         new XElement("Dates"),
            new XElement("Game",
               new XElement("Bench"),
               new XElement("Date")
            )
      )
  ); 
```

最终我想添加到 Bench and Date 字段。

我试过类似的东西：

```
foreach(Name name in names)
{
    doc.Element("Schedule").Element("Team").Element("Dates")
       .Elements()
       .FirstOrDefault(item => (string)item.Parent.Element("Name") == name.TeamName)
       .Add(
          new XElement("Game",
             new XElement("Bench", "SomeBench"),
             new XElement("Date", SomeDate.ToShortDateString())
           )
        );
} 
```

我得到一个对象未​​设置为对象错误的实例。

任何帮助都会很棒

编辑：忘了提到插入会发生在循环中

我的最终结果会是这样的：

```
<Schedule>
   <Team>
      <Name>SomeName</Name>
       <Dates>
         <Bench>SomeBench</Bench>
         <Date>12/10/2012</Date>
       </Dates>
   </Team>
   <Team>
      <Name>SomeName2</Name>
       <Dates>
         <Bench>SomeBench2</Bench>
         <Date>12/13/2012</Date>
       </Dates>
   </Team>
   <Team>
      <Name>SomeName3</Name>
       <Dates>
         <Bench>SomeBench3</Bench>
         <Date>12/16/2012</Date>
       </Dates>
   </Team>
</Schedule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:58:21.150

原始 OP 的代码可能由于以下几个原因而出现异常：

1.  在`doc.Element("Schedule").Element("Team").Element("Dates")`段`Element("Schedule")`中是额外的，如果`doc == xe`，即`Schedule`是根xml 元素。
2.  `.Elements()`段是额外的，因为其中的`Dates`元素`xe`不包含任何子元素。

这个问题让我很困惑。不过，我会尝试推测。

```
foreach (var dates in doc.Elements("Team")
                         .Where(t => names.Any(n => n.TeamName == t.Element("Name").Value))
                         .Select(t => t.Element("Dates")))
{
    dates.Add(
            new XElement("Bench", "SomeBench"),
            new XElement("Date", SomeDate.ToShortDateString())
        );
} 
```

# php - 从 SQL 查询输出中删除重复数据以在网页上显示

> ID：13188461
> 
> 赞同：0
> 
> 时间：2012-11-02T01:27:30.093
> 
> 标签：php, database, sql

我[在stackoverflow上问过一个类似的问题，](https://stackoverflow.com/questions/11086726/php-sql-combine-records-within-foreach)但并没有真正得到任何地方。

[此页面](http://www.flcbranson.org/events-array.php)显示了我当前从我的 MSSQL 服务器获得的输出。

我有一张我们的活动发生的场地信息表（名称、地址等）。另外，我有一个计划的实际事件表（一个事件可能在一天内和/或多天发生多次）。我用这个查询加入这些表：

```
<?php
try {
    $dbh = new PDO("sqlsrv:Server=localhost;Database=Sermons", "", "");
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "SELECT TOP (100) PERCENT dbo.TblSermon.Day, dbo.TblSermon.Date, dbo.TblSermon.Time, dbo.TblSermon.Speaker, dbo.TblSermon.Series, dbo.TblSermon.Sarasota, dbo.TblSermon.NonFlc, dbo.TblJoinSermonLocation.MeetingName, dbo.TblLocation.Location, dbo.TblLocation.Pastors, dbo.TblLocation.Address, dbo.TblLocation.City, dbo.TblLocation.State, dbo.TblLocation.Zip, dbo.TblLocation.Country, dbo.TblLocation.Phone, dbo.TblLocation.Email, dbo.TblLocation.WebAddress
        FROM dbo.TblLocation RIGHT OUTER JOIN dbo.TblJoinSermonLocation ON dbo.TblLocation.ID = dbo.TblJoinSermonLocation.Location RIGHT OUTER JOIN dbo.TblSermon ON dbo.TblJoinSermonLocation.Sermon = dbo.TblSermon.ID
        WHERE (dbo.TblSermon.Date >= { fn NOW() })
        ORDER BY dbo.TblSermon.Date, dbo.TblSermon.Time";
    $stmt = $dbh->prepare($sql);
    $stmt->execute(); 
    $stmt->setFetchMode(PDO::FETCH_ASSOC);
    foreach ($stmt as $row) {
        echo "<pre>";
        print_r($row);
        echo "</pre>";
    }
    unset($row);
    $dbh = null;
}
catch(PDOException $e) {
    echo $e->getMessage();
}
?> 
```

因此，当它遍历查询结果时，它会为每条记录创建一个数组，最终结果如下：

```
Array
(
    [Day] => Tuesday
    [Date] => 2012-10-30 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => The Ark Church
    [Pastors] => Alan & Joy Clayton
    [Address] => 450 Humble Tank Rd.
    [City] => Conroe
    [State] => TX
    [Zip] => 77305.0
    [Phone] => (936) 756-1988
    [Email] => info@thearkchurch.com
    [WebAddress] => http://www.thearkchurch.org
)
Array
(
    [Day] => Wednesday
    [Date] => 2012-10-31 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => The Ark Church
    [Pastors] => Alan & Joy Clayton
    [Address] => 450 Humble Tank Rd.
    [City] => Conroe
    [State] => TX
    [Zip] => 77305.0
    [Phone] => (936) 756-1988
    [Email] => info@thearkchurch.com
    [WebAddress] => http://www.thearkchurch.org
)
Array
(
    [Day] => Tuesday
    [Date] => 2012-11-06 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => Fellowship Of Faith Christian Center
    [Pastors] => Michael & Joan Kalstrup
    [Address] => 18999 Hwy. 59
    [City] => Oakland
    [State] => IA
    [Zip] => 51560.0
    [Phone] => (712) 482-3455
    [Email] => ffcc@frontiernet.net
    [WebAddress] => http://www.fellowshipoffaith.cc
)
Array
(
    [Day] => Wednesday
    [Date] => 2012-11-14 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => Faith Family Church
    [Pastors] => Michael & Barbara Cameneti
    [Address] => 8200 Freedom Ave NW
    [City] => Canton
    [State] => OH
    [Zip] => 44720.0
    [Phone] => (330) 492-0925
    [Email] => 
    [WebAddress] => http://www.myfaithfamily.com
) 
```

如您所见，方舟教堂及其关联的联系信息是重复的，因此当我使用这些数组并将它们输出到页面时，我会看到一堆重复的内容。

我想删除重复的信息，以便获得类似于以下的结果：

```
The Ark Church
Alan & Joy Clayton
450 Humble Tank Rd.
Conroe, TX  77305
(936) 756-1988
info@thearkchurch.com
http://www.thearkchurch.org
Meetings:
Tuesday, 2012-10-30 07:00 PM
Wednesday, 2012-10-31 07:00 PM

Fellowship Of Faith Christian Center
Michael & Joan Kalstrup
18999 Hwy. 59
Oakland, IA  51560
(712) 482-3455
ffcc@frontiernet.net
http://www.fellowshipoffaith.cc
Meetings:
Tuesday, 2012-11-06 07:00 PM

Faith Family Church
Michael & Barbara Cameneti
8200 Freedom Ave NW
Canton, OH  44720
(330) 492-0925
http://www.myfaithfamily.com
Meetings:
Wednesday, 2012-11-14 07:00 PM 
```

它不一定要以那样结束（我不是在寻找特定于这些结果的代码，而是如何不显示重复信息的概念）。我假设一个额外的`foreach`or`while`会做，但我还没有想出任何逻辑说`<?php if ($location == $previouslocation) echo ""; ?>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:41:57.287

哇...

我终于完成了我想要的（这让我很头疼）。我敢肯定还有其他方法（可能还有更好的方法）可以做到这一点。不过，这实际上以我想要的方式给了我结果。

PHP代码...

```
<!doctype html>
<html>
<head>
<title>Events | Faith Life Church - Branson, MO</title>
</head>
<body>
<h1>Events <abbr title="And">&amp;</abbr> Meetings</h1>
<?php
// get events from a database
try {
    // MSSQL has the ability to use Windows Authentication by not passing a username or password
    $dbh = new PDO("sqlsrv:Server=localhost;Database=Sermons", "", "");
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    // get events from the main database
    $getoriginalevents = "SELECT TOP (100) PERCENT dbo.TblSermon.Day, dbo.TblSermon.Date, dbo.TblSermon.Time, dbo.TblSermon.Speaker, dbo.TblSermon.Series, dbo.TblSermon.Sermon, dbo.TblSermon.Sarasota, dbo.TblSermon.NonFlc, dbo.TblJoinSermonLocation.MeetingName, dbo.TblLocation.Location, dbo.TblLocation.Pastors, dbo.TblLocation.Address, dbo.TblLocation.City, dbo.TblLocation.State, dbo.TblLocation.Zip, dbo.TblLocation.Country, dbo.TblLocation.Phone, dbo.TblLocation.Email, dbo.TblLocation.WebAddress
        FROM dbo.TblLocation RIGHT OUTER JOIN dbo.TblJoinSermonLocation ON dbo.TblLocation.ID = dbo.TblJoinSermonLocation.Location RIGHT OUTER JOIN dbo.TblSermon ON dbo.TblJoinSermonLocation.Sermon = dbo.TblSermon.ID
        WHERE (dbo.TblSermon.Date >= { fn NOW() }) AND (dbo.TblSermon.Notes NOT LIKE '%Not to be put on our Website%' OR dbo.TblSermon.Notes IS NULL)
        ORDER BY dbo.TblSermon.Date, dbo.TblSermon.Time";
    // prepared statements are good for security and speed
    $originalevents = $dbh->prepare($getoriginalevents);
    $originalevents->execute();
    // create an array using names instead of keys ($originalevent["Location"] instead of $originalevent[1])
    $originalevents->setFetchMode(PDO::FETCH_ASSOC);

    // delete the data from the temporary events table (we don't want duplicate events)
    $dbh->query("DELETE FROM dbo.Events");

    // insert events into a temporary events table (the original database doesn't contain all the information so PHP creates some)
    // this will be executed within foreach ()
    $putprocessedevent = $dbh->prepare("INSERT INTO dbo.Events (Title, Speaker, Venue, Pastors, Street, City, State, Zip, Map, Phone, Email, Website, Date) VALUES (:title, :speaker, :venue, :pastors, :street, :city, :state, :zip, :map, :phone, :email, :website, :date)");

    // for every record that the initial query produces...
    foreach ($originalevents as $originalevent) {
        // redefine the variables
        $title = $originalevent["Location"];
        if ($originalevent["MeetingName"]) $title = $originalevent["MeetingName"];
        if ($originalevent["Sermon"]) $title = $originalevent["Sermon"];
        if ($originalevent["Series"]) $title = $originalevent["Series"];
        $speaker = $originalevent["Speaker"];
        // if the record ISN'T from Sarasota or the road...
        if ($originalevent["Sarasota"] == 0 && $originalevent["NonFlc"] == 0) {
            $venue = "Faith Life Church";
            $pastors = "Keith & Phyllis Moore";
            $street = "3701 State Highway 76";
            $city = "Branson";
            $state = "MO";
            $zip = "65616";
            $map = "http://maps.google.com/maps?q=Faith+Life+Church+Branson+MO+65616";
            $phone = "+1-417-334-9233";
            $email = "general@moorelife.org";
            $website = "http://www.flcbranson.org";
        }
        // if the record IS from Sarasota...
        if ($originalevent["Sarasota"] == 1) {
            $venue = "Faith Life Church";
            $pastors = "Keith & Phyllis Moore";
            $street = "6980 Professional Parkway East";
            $city = "Sarasota";
            $state = "FL";
            $zip = "34240";
            $map = "http://maps.google.com/maps?q=Faith+Life+Church+Sarasota+FL+34240";
            $phone = "+1-941-388-6961";
            $email = "general@moorelife.org";
            $website = "http://www.flcsarasota.org";
        }
        // if the record IS from the road...
        if ($originalevent["NonFlc"] == 1) {
            $venue = $originalevent["Location"];
            if ($originalevent["Pastors"]) $pastors = $originalevent["Pastors"];
            $street = $originalevent["Address"];
            $city = $originalevent["City"];
            $state = $originalevent["State"];
            $zip = substr($originalevent["Zip"], 0, -2);
            $map = "http://maps.google.com/maps?q=" . str_replace(" ", "+", $originalevent["Location"]) . "+" . str_replace(" ", "+", $originalevent["City"]) . "+" . $originalevent["State"] . "+" . substr($originalevent["Zip"], 0 ,-2);
            if ($originalevent["Phone"]) $phone = "+1-" . substr($originalevent["Phone"], 1, 3) . "-" . substr($originalevent["Phone"], -8);
            if ($originalevent["Email"]) $email = $originalevent["Email"];
            if ($originalevent["WebAddress"]) $website = $originalevent["WebAddress"];
        }

        $date = date("Y-m-d", strtotime($originalevent["Date"]));
        if ($originalevent["Time"]) $date = date("c", strtotime(substr($originalevent["Date"], 0, -13) . $originalevent["Time"]));

        // execute the actual insertion of new events
        $putprocessedevent->execute(array(":title" => $title, ":speaker" => $speaker, ":venue" => $venue, ":pastors" => $pastors, ":street" => $street, ":city" => $city, ":state" => $state, ":zip" => $zip, ":map" => $map, ":phone" => $phone, ":email" => $email, ":website" => $website, ":date" => $date));
    }
    // kill the last record of the array
    unset($originalevent);

    // get events from the temporary events database
    $getprocessedtitles = "SELECT DISTINCT Title, MIN(EventsID) FROM dbo.Events GROUP BY Title ORDER BY MIN(EventsID)";
    $processedtitles = $dbh->prepare($getprocessedtitles);
    $processedtitles->execute();
    // create an array using names instead of keys ($originalevent["Location"] instead of $originalevent[1])
    $processedtitles->setFetchMode(PDO::FETCH_ASSOC);

    // for every record that the new query produces...
    foreach ($processedtitles as $processedtitle) {
        $eventtitle = $processedtitle["Title"];
?>
<h2><?php echo $eventtitle; ?></h2>
<dl>
    <dt>Speakers</dt>
<?php
        // get dates from the temporary events database
        $getprocessedspeakers = "SELECT DISTINCT Speaker, MIN(EventsID) FROM dbo.Events WHERE Title LIKE '%" . $eventtitle . "%'GROUP BY Speaker ORDER BY MIN(EventsID)";
        $processedspeakers = $dbh->prepare($getprocessedspeakers);
        $processedspeakers->execute();
        // create an array using names instead of keys ($originalevent["Location"] instead of $originalevent[1])
        $processedspeakers->setFetchMode(PDO::FETCH_ASSOC);
        foreach ($processedspeakers as $processedspeaker) {
            $eventspeaker = $processedspeaker["Speaker"];
?>
    <dd><?php echo $eventspeaker; ?></dd>
<?php
        }
?>
</dl>
<h3>Venue Information</h3>
<dl>
<?php
        // get dates from the temporary events database
        $getprocessedinfo = "SELECT Venue, Pastors, Street, City, State, Zip, Map, Phone, Email, Website FROM dbo.Events WHERE Title LIKE '%" . $eventtitle . "%'";
        $processedinfo = $dbh->prepare($getprocessedinfo);
        $processedinfo->execute();
        // create an array using names instead of keys ($originalevent["Location"] instead of $originalevent[1])
        // I used $processedinfo = $processedinfo->fetch(PDO::FETCH_ASSOC); instead of $processedtitles->setFetchMode(PDO::FETCH_ASSOC); so that I wouldn't have to do a separate array (print_r($processedtitles); shows the actual query and not the results of the query)
        $processedinfo = $processedinfo->fetch(PDO::FETCH_ASSOC);
        $eventvenue = $processedinfo["Venue"];
        $eventpastors = $processedinfo["Pastors"];
        $eventstreet = $processedinfo["Street"];
        $eventcity = $processedinfo["City"];
        $eventstate = $processedinfo["State"];
        $eventzip = $processedinfo["Zip"];
        $eventmap = $processedinfo["Map"];
        $eventphone = $processedinfo["Phone"];
        $eventemail = $processedinfo["Email"];
        $eventwebsite = $processedinfo["Website"];
?>
    <dt>Venue</dt>
    <dd><?php echo $eventvenue; ?></dd>
    <dt>Pastors</dt>
    <dd><?php echo $eventpastors; ?></dd>
    <dt>Street</dt>
    <dd><?php echo $eventstreet; ?></dd>
    <dt>City</dt>
    <dd><?php echo $eventcity; ?></dd>
    <dt>State</dt>
    <dd><?php echo $eventstate; ?></dd>
    <dt>Zip</dt>
    <dd><?php echo $eventzip; ?></dd>
    <dt>Map</dt>
    <dd><?php echo $eventmap; ?></dd>
    <dt>Phone</dt>
    <dd><?php echo $eventphone; ?></dd>
    <dt>Email</dt>
    <dd><?php echo $eventemail; ?></dd>
    <dt>Website</dt>
    <dd><?php echo $eventwebsite; ?></dd>
</dl>
<h3>Event Dates</h3>
<ol>
<?php
        // get dates from the temporary events database
        $getprocesseddates = "SELECT Date FROM dbo.Events WHERE Title LIKE '%" . $eventtitle . "%'";
        $processeddates = $dbh->prepare($getprocesseddates);
        $processeddates->execute();
        // create an array using names instead of keys ($originalevent["Location"] instead of $originalevent[1])
        $processeddates->setFetchMode(PDO::FETCH_ASSOC);
        // for every record that the new query produces...
        foreach ($processeddates as $processeddate) {
            $eventdate = $processeddate["Date"];
?>
    <li><?php echo $eventdate; ?></li>
<?php
        }
        // kill the last record of the array
        unset($processeddate);
?>
</ol>
<?php
    }
    // kill the last record of the array
    unset($processedtitle);

    // kill the database connection
    $dbh = null;
}
catch(PDOException $e) {
    echo $e->getMessage();
}
?>
</body>
</html> 
```

结果呈现的 HTML...

```
Events & Meetings

KCM Branson Victory Campaign 2013
Speakers
    Kenneth Copeland
    Gloria Copeland
Venue Information
Venue
    Faith Life Church
Pastors
    Keith & Phyllis Moore
Street
    3701 State Highway 76
City
    Branson
State
    MO
Zip
    65616
Map
    http://maps.google.com/maps?q=Faith+Life+Church+Branson+MO+65616
Phone
    +1-417-334-9233
Email
    general@moorelife.org
Website
    http://www.flcbranson.org
Event Dates
    1\. 2013-03-07T19:00:00-06:00
    2\. 2013-03-08T14:00:00-06:00
    3\. 2013-03-08T19:00:00-06:00
    4\. 2013-03-08T09:00:00-06:00
    5\. 2013-03-09T09:30:00-06:00

Victory Family Church
Speakers
    Keith Moore 

Venue Information
Venue
    Victory Family Church
Pastors
    John & Michelle Nuzzo
Street
    21150 Route 19
City
    Cranberry Township
State
    PA
Zip
    16066
Map
    http://maps.google.com/maps?q=Victory+Family+Church+Cranberry+Township+PA+16066
Phone
    +1-724-453-6200
Email
    general@moorelife.org
Website
    http://www.lifeatvictory.com

Event Dates
    1\. 2013-08-19T19:00:00-05:00
    2\. 2013-08-20T19:00:00-05:00
    3\. 2013-08-21T19:00:00-05:00 
```

也许这种经历会对其他人有所帮助。我花了将近一年的时间（断断续续地）让它发挥作用。随意张贴可以使这更清洁或更容易的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:30:51.413

您可能会想要使用 GROUP BY ... HAVING 语句。

尝试添加类似

```
GROUP BY dbo.TblSermon.Date HAVING MIN(dbo.TblSermon.Date) 
```

# ios - 在 xcode 4.5 中保留未剥离的二进制文件的同时剥离符号

> ID：13188462
> 
> 赞同：1
> 
> 时间：2012-11-02T02:29:22.450
> 
> 标签：ios, xcode, symbols, strip, symbolicatecrash

我在 Xcode 4.5 中剥离符号，但意识到如果我们剥离它们，我们就无法符号化崩溃报告。所以我试图在剥离之前创建一个未剥离的二进制文件的副本。使用普通的 xcode 符号剥离设置，这似乎是不可能的，所以我尝试深入研究运行脚本。我遇到的问题是

a）似乎运行脚本在代码签名后运行，因此应用程序无法运行。

b）我找不到仅在分发/发布下运行运行脚本的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:20:32.013

当二进制文件被剥离时，您可以符号化崩溃报告！剥离二进制文件会使它们缩小 30-50%。无论如何，用未剥离的二进制文件进行符号化**不会**在符号化后给您行号。

在构建过程中，您还将获得一个 dSYM 包，然后将其用于表示您的崩溃报告，包括获取其中的行号！

此外，每当您进行新构建时，您都会获得一对新的独特的应用程序二进制文件和 dSYM 包，因此当您发布测试版或生产版本时，您应该使用存档而不是构建。

# mongodb - mongo 查询中的字段值是否有长度限制？

> ID：13188463
> 
> 赞同：6
> 
> 时间：2012-11-02T02:29:27.240
> 
> 标签：mongodb

我在集合中有一个文档：

```
{
  _id: ObjectId("508836afea5cea2ccec11a0d"),
  created_at: 1348657869.204,
  name: "Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx Abcdefghijklmnopqrstuvwx"
} 
```

我可以找到它

```
find({"created_at":1348657869.204}) 
```

但

```
find({"name":"Abcd...<actual name here>...uvwx"}) 
```

不返回任何结果。查询中的字段是否有长度限制？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-02T04:24:51.807

您遇到的限制是`mongo`shell中的最大行缓冲区大小，在 MongoDB 2.2.1中为[4096 字节。](https://github.com/mongodb/mongo/blob/master/src/mongo/shell/linenoise.cpp#L143)如果您尝试将示例粘贴到`mongo`shell 中，您应该注意到您不能添加超出行数限制的任何字符。

如果您从[语言驱动程序](http://www.mongodb.org/display/DOCS/Drivers)执行此查询，您将不会遇到此问题。

`mongo`您还可以通过从命令行上指定的 JavaScript 文件加载查询来在 shell 中解决此问题：

```
 mongo longname.js 
```

`mongo`或者通过以编程方式在 shell中创建一个长字符串：

```
// Longname will be 5000 characters
var longname = '';
for (i = 0; i < 200; i++) {
    longname += 'Abcdefghijklmnopqrstuvwx ';
}

db.foo.insert({
  _id: ObjectId("508836afea5cea2ccec11a0d"),
  created_at: 1348657869.204,
  name: longname
});

printjson(db.foo.findOne({name: longname})) 
```

# algorithm - 为什么 17612864 的最高 14 位是 67？

> ID：13188468
> 
> 赞同：3
> 
> 时间：2012-11-02T02:29:34.897
> 
> 标签：algorithm, computation-theory, clrs

在 CLRS 的第 264 页底部，作者说获得后`r0 = 17612864`，14 个最高有效位`r0`产生哈希值`h(k) = 67`。我不明白为什么它给出 67，因为二进制的 67`1000011`是 7 位。

**编辑** 在教科书中：例如，假设我们有`k = 123456, p = 14, m = 2^14 = 16384, and w = 32`. 采用 Knuth 的建议，我们选择 A 作为`s/2^32`最接近的形式的分数`(\sqrt(5) - 1) / 2`，因此`A = 2654435769/2^32`。然后`k*s = 327706022297664 = (76300 * 2^32) + 17612864`，等等`r1 = 76300 and r0 = 17612864`。14 个最高有效位`r0`产生该值`h(k)=67`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T02:42:00.277

`17612864`= `0x010CC040`=

```
0000 0001 0000 1100 1100 0000 0100 0000 
```

其中最重要的 14 位是

```
0000 0001 0000 11 
```

哪个是`0x43`哪个是`67`

还：

```
int32 input = 17612864;
int32 output = input >> (32-14); //67 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T02:42:32.580

在 32 位世界中

17612864 = 00000001 00001100 11000000 01000000（二进制）

前十四位 = 00000001 000011 = 67

# sql-server-2008-r2 - 冒号的 SQL 用途

> ID：13188471
> 
> 赞同：2
> 
> 时间：2012-11-02T02:30:00.093
> 
> 标签：sql-server-2008-r2, colon

我的同事写了这个 SQL 语句，我很难理解它。在 where 子句中使用冒号的目的究竟是什么？

```
WHERE MGM_YYMM like :AS_YYMM 
```

完整查询：

```
SELECT  A.MGM_YYMM,
        A.MGM_DATE,
        A.MGM_GB,
        A.INDATE,
        A.SUDATE,
        A.EMPNUM,
FROM  SE_MAGAM A(NOLOCK)
WHERE MGM_YYMM like :AS_YYMM
ORDER BY MGM_YYMM DESC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:32:03.360

它是一个绑定变量。

程序（或任何其他发出查询的程序）将为 :AS_YYMM 分配一个值，在这种情况下，该模式与 MGM_YYMM 列匹配。

这些类型的参数化查询很有用，因为它们可以准备/解析/编译/分析一次，然后针对不同的输入运行多次，从而减少开销（与每次新查询相比）。还有助于防止 SQL 注入（与从用户输入构建动态 SQL 语句相比）。

# c# - 如何将数据添加到合并字段中

> ID：13188472
> 
> 赞同：3
> 
> 时间：2012-11-02T02:29:58.807
> 
> 标签：c#, merge, interop, mailmerge, mergefield

我想从 Word 模板自动打印发票。我想我的逻辑是错误的，但我只是不知道正确的编码方式。这是我当前的代码

```
Selection wrdSelection;
MailMerge wrdMailMerge;
MailMergeFields wrdMergeFields;
Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();
Document wrdDoc = new Document();
wordApp.Visible = false;
wrdSelection = wordApp.Selection;

object oMissing = System.Reflection.Missing.Value;

// PUT MY EXISTING TEMPLATE FILE INTO WORD DOCUMENT
wrdDoc = wordApp.Documents.Add(Properties.Resources.invoiceTemp,oMissing,oMissing, oMissing);
// RETREIVE MAIL MERGE PROPERTIES FROM THE DOCUMENT IN HOPES OF UTILIZING IT

wrdMailMerge = wrdDoc.MailMerge;
wrdDoc.Select();
wrdMergeFields = wrdMailMerge.Fields; 
```

如果有帮助，这里是我的模板上的合并字段：

`date_issued`, `month_covered`, `invoiceNo`, `tuition`, `lunchFee`, `discount`, `studentNo`, `studentName`, `amountDue`, `amountPaid`, `balance`, `penalty`,`status`

现在，如何将使用我的应用程序检索的数据添加到从模板中获取所有属性的文档中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T13:15:00.947

以下是使用模板和数据文件运行的一些注意事项。

```
Word.Application _wordApp = new Word.Application();
Word.Document oDoc = _wordApp.Documents.Add(@"z:\docs\mergetemplate.dotx");
_wordApp.Visible = true;
oDoc.MailMerge.MainDocumentType = Word.WdMailMergeMainDocType.wdFormLetters;
oDoc.MailMerge.OpenDataSource(@"Z:\Docs\new.csv", false, false, true);
oDoc.MailMerge.Destination = Word.WdMailMergeDestination.wdSendToNewDocument;
oDoc.MailMerge.Execute(false); 
```

新创建的合并文件现在是活动文档，因此您可以保存它：

```
Word.Document oLetters = _wordApp.ActiveDocument;
oLetters.SaveAs2(@"z:\docs\letters.docx", 
     Word.WdSaveFormat.wdFormatDocumentDefault); 
```

# javascript - 在使用新的 geojson 更新之前使用 setMap(null) 清除多边形

> ID：13188474
> 
> 赞同：0
> 
> 时间：2012-11-02T02:30:18.317
> 
> 标签：javascript, ajax, google-maps-api-3, geojson

在导入新的 geoJSON 数据并创建新对象之前，我正在尝试清除所有多边形对象。我似乎无法让 setMap(null) 函数正常工作。希望有人可以让我知道我失败的地方。

谢谢

```
var map;
function removeAllMarkers(){// removes all markers from map
//console.log(data);
for( var i = 0; i < data.length; i++ ){
delpolygon = new google.maps.Poly({
    position: data[i]
})
delpoly.setMap(null)
}   
data.length = 0;
//markersInfoArray.length = 0;
};

// ajax request to load json data
var data;
function pullNewData () {
var newRequest = new XMLHttpRequest();
newRequest.open('GET', 'json_template.json', true);
newRequest.onload = function() {
//data = eval("(" + xhr.responseText + ")")
data = JSON.parse(newRequest.responseText)

console.log(data);
sector_callback(data);
removeAllMarkers(data);
};
newRequest.send();
};

//setInterval(pullNewData,5000);

// function to load map into body when page loads
function initialize() { 
var kansas_city = new google.maps.LatLng(39.316858,-94.963194);
var mapOptions = {
zoom: 13,
center: kansas_city,
mapTypeId: google.maps.MapTypeId.TERRAIN
};

map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
}

// ajax request to load json data
var data;
var xhr = new XMLHttpRequest();
xhr.open('GET', 'json_template.json', true);
xhr.onload = function() {
//data = eval("(" + xhr.responseText + ")")
data = JSON.parse(xhr.responseText)
//console.log(data);
sector_callback(data);
};
xhr.send();

function createClickablePoly(poly, html) {
google.maps.event.addListener(poly, 'click', function(evt) {
    infowindow.setContent(html);
    infowindow.setPosition(evt.latLng);
    infowindow.open(map);
});
}
var infowindow = new google.maps.InfoWindow({});        

var allPolygons = [];
function sector_callback() {
var bounds = new google.maps.LatLngBounds();        
for (var i = 0, len = data.features.length; i < len; i++) {
    var coords = data.features[i].geometry.coordinates[0];
    siteNames = data.features[i].properties.Name; // added for site names
    var path = [];
            //console.log(siteNames);
            //console.log(coords);
    for ( var j = 0, len2 = coords.length; j < len2; j++ ){ // pull out each     set of coords and create a map object
        var pt = new google.maps.LatLng(coords[j][1], coords[j][0])
        bounds.extend(pt);
        path.push(pt);

        //path.push(new google.maps.LatLng(coords[j][1], coords[j][0]));
    }

    var polygons = new google.maps.Polygon({
    path: path,
        strokeColor: "#000000",
        strokeOpacity: 0.8,
        strokeWeight: 1,
        fillColor: "#000000",
        fillOpacity: 0.35,
    map: map
    });
    createClickablePoly(polygons, siteNames);

    google.maps.event.addListener(polygons, 'mouseover', function() {
    var currentPolygon = this;

    currentPolygon.setOptions({ // setOptions is a method and properties below
        fillOpacity: 0.45,
        fillColor: "#FF0000"
        })
    });

    google.maps.event.addListener(polygons, 'mouseout', function() {
    var currentPolygon = this;
    currentPolygon.setOptions({ 
        fillOpacity: 0.35,
        fillColor: "#000000"
        })
    });
    allPolygons.push(polygons); 
  }

}
console.log(allPolygons); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:38:27.110

当您创建一个新的`Poly`时，将其存储在一个数组中，例如`allPolygons`，以便您以后可以引用它们。

然后遍历这个数组，并调用其中`setMap(null)`的每一个`Poly`。

# python - 从Python中列表列表的内部列表中获取第n个元素

> ID：13188476
> 
> 赞同：23
> 
> 时间：2012-11-02T02:30:37.020
> 
> 标签：python

> **可能重复：**
> [内部列表中的第一项尽可能有效](https://stackoverflow.com/questions/13084619/first-items-in-inner-list-efficiently-as-possible)

可以说我有：

```
a = [ [1,2], [2,9], [3,7] ] 
```

我想检索每个内部列表的第一个元素：

```
b = [1,2,3] 
```

无需这样做（我目前的黑客）：

```
for inner in a:
    b.append(inner[0]) 
```

我敢肯定它有一个衬里，但我真的不知道我在找什么。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-02T02:31:34.470

只需将您的列表组合更改为：

```
b = [el[0] for el in a] 
```

或者：

```
from operator import itemgetter
b = map(itemgetter(0), a) 
```

或者，如果您正在处理“正确的数组”：

```
import numpy as np
a = [ [1,2], [2,9], [3,7] ]
na = np.array(a)
print na[:,0]
# array([1, 2, 3]) 
```

并且`zip`：

```
print zip(*a)[0] 
```

# generics - 使用JGrasp时如何取消选中-Xlint？

> ID：13188481
> 
> 赞同：2
> 
> 时间：2012-11-02T02:31:18.463
> 
> 标签：generics, compiler-construction, jgrasp

在我的教科书中，它让我们创建抽象数据类型类，在本例中为 Stack。它基于一个数组，因此是有界的。以下是生成消息的代码部分：

```
package ch03.stacks;

    public class ArrayStack<T> implements BoundedStackInterface<T> 
    {
  protected final int DEFCAP = 100; // default capacity
  protected T[] stack;              // holds stack elements
  protected int topIndex = -1;      // index of top element in stack

  public ArrayStack() 
  {
    stack = (T[]) new Object[DEFCAP];
  }

  public ArrayStack(int maxSize) 
  {
    stack = (T[]) new Object[maxSize];
  } 
```

我相信这`protected T[] stack;`部分是问题所在，因为它没有类型集，但它应该是这样的，留给类的用户指定的通用性。这是在 JGrasp 中生成的消息：

> 注意：ch03\stacks\ArrayStack.java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

我检查了 JGrasp 帮助文档，但没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:55:01.757

您需要转到设置->编译器设置->工作区->标志/参数，然后找到显示“编译”的框。在框中单击。您现在应该可以在框右侧的文本区域中输入内容了。在文本区域输入“-Xlint:unchecked”，应用，然后保存。这个博客上有一个截图： http: [//comp2210.blogspot.com/](http://comp2210.blogspot.com/)如果你迷路了。编译时仍然会出错；您可以忽略它们并运行您的程序。干杯。

# windows - Windows Phone 8 设备管理

> ID：13188482
> 
> 赞同：1
> 
> 时间：2012-11-02T02:31:23.300
> 
> 标签：windows, windows-phone-7, windows-phone-8

我被要求提出一个远程锁定和阻止 Windows Phone 8 设备摄像头的解决方案。另外，我必须远程擦除数据。我是 Windows Phone 开发的新手。

此外，我必须获取一些设备信息并定期将其发送到服务器以进行跟踪。

你能提供一些输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:28:23.250

抱歉，无法锁定或阻止 Windows Phone 上的摄像头。

此外，应用程序只能访问自己的数据，因此无法擦除手机上的所有数据。但是您不需要应用程序来满足这种特定需求，因为您已经可以使用集成的*“查找我的电话*”服务来做到这一点：http: [//www.windowsphone.com/en-US/How-to/wp8/basics/find -丢失的电话](http://www.windowsphone.com/en-US/How-to/wp8/basics/find-a-lost-phone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:19:23.240

Windows Phone 8 还具有可以从服务器控制的管理功能，其中一项功能是擦除/阻止手机。观看第 9 频道上的 BUILD 视频，它在那里的某个地方，可能是这个视频：[http ://channel9.msdn.com/Events/Build/2012/2-014](http://channel9.msdn.com/Events/Build/2012/2-014)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T05:33:30.793

我会研究移动设备管理提供商，例如 Silverback (http://silverbackmdm.com/) 或 Zenprise (http://www.zenprise.com)。微软还在 2013 年发布了针对 MDM 的 Intune 服务扩展。

MDM 提供程序允许强制执行设备安全策略，包括远程擦除、密码强制等措施。这是管理 BYOD 策略的好方法。

# ios - 游戏中心成就统计

> ID：13188483
> 
> 赞同：1
> 
> 时间：2012-11-02T02:31:28.730
> 
> 标签：ios, game-center

有没有办法为我的所有用户收集/下载/查看我的 iOS 应用程序成就的统计数据？

*   例如，有没有一种方法可以让我查看完成每项成就的应用用户百分比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:35:23.627

不使用游戏中心。您当然可以使用另一个系统来跟踪它。

# wordpress - 如何在我的 Wordpress 实现中添加 HTTP 标头

> ID：13188487
> 
> 赞同：1
> 
> 时间：2012-11-02T02:31:56.873
> 
> 标签：wordpress, http

根据[拒绝执行 JavaScript 脚本。在 request 中找到脚本的源代码](https://stackoverflow.com/questions/1547884/refused-to-execute-a-javascript-script-source-code-of-script-found-within-reque/1547887#1547887)，我想将此代码与我的 Wordpress 网站的页面一起发送：

```
<?php header("X-XSS-Protection: 0");?> 
```

我把它放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:36:11.117

你可以把它放到 wordpress docroot 中 index.php 的顶部。您需要在发送任何内容之前修改标头。

如果您使用新的 wopress 版本更新您的网站，您可能会丢失此更改。请注意。

# string - C 编程 ispunct() 函数进行验证

> ID：13188488
> 
> 赞同：0
> 
> 时间：2012-11-02T02:31:58.643
> 
> 标签：string, validation, punctuation

目前我正在使用字符串来收集输入，我不想让输入有任何标点符号，除了 DOT(.)

例如 ：

```
char str[10];
int i,valid=1;

    do{
      printf("Input: ");
      fgets(str,10,stdin);

      for(i=0;i<strlen(str);i++)
      {
        if(ispunct(str[i])) //i want it to accept DOT(.)
        {
          printf("punctuation is not allowed!\n");
          valid=0;
          break;
        }
        else
          valid=1;
      }
    }while(valid==0); 
```

在此先感谢所有专业人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:34:50.123

你可能想要：

```
 if(ispunct(str[i]) && str[i]!='.') 
```

# .net - 如何处理 WebKit.NET 控件的 DOM 事件？

> ID：13188489
> 
> 赞同：0
> 
> 时间：2012-11-02T02:31:58.237
> 
> 标签：.net, webkit, browser, webkit.net

使用 System.Windows.Forms.WebBrowser 控件，我们可以使用以下代码来处理 DOM 事件：

```
HtmlElement centerButton = webBrowser.Document.GetElementById("centerButton");
centerButton.Click += this.WelcomeHandler_Click; 
```

但是在使用 WebKit.NET 时，WebKit.Dom.Element 没有“.Click”事件。如何处理“WebBrowser”控件等 DOM 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T04:29:40.283

您可以使用以下代码来处理元素事件：

创建元素

```
var doc = webKitBrowser1.Document;
doc.TextContent = "<h1>text</h1>";

var body = doc.GetElementsByTagName("body")[0];

var lnkBtn = webKitBrowser1.Document.CreateElement("a");
lnkBtn.SetAttribute("href", "app:dosome,by link");
lnkBtn.TextContent = "Link:Click me!";

var inpBtn = webKitBrowser1.Document.CreateElement("input");
inpBtn.SetAttribute("type", "button");
inpBtn.SetAttribute("onclick", "window.location.href='app:dosome,by button';");
inpBtn.SetAttribute("value", "Button:Click me!");

body.AppendChild(lnkBtn);
body.AppendChild(inpBtn); 
```

处理事件

```
private void webKitBrowser1_Navigating(object sender
    , WebBrowserNavigatingEventArgs e)
{
    if (e.Url.Scheme == "app")
    {
        e.Cancel = true;
        MessageBox.Show(e.Url.ToString());
    }
} 
```

因此，当您需要处理某些事件时，只需导航到自定义协议并进行处理！

代码看起来很丑，但它的工作！哈哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:19:34.510

不幸的是，到目前为止，WebKit.NET 还没有开发此功能。

# java - 按下 ENTER 键不适用于小程序中的 JTextField

> ID：13188490
> 
> 赞同：1
> 
> 时间：2012-11-02T02:32:00.130
> 
> 标签：java, swing, actionlistener, jtextfield, japplet

我在带有 ActionListener 的 JApplet 中有一个 JTextField。我使用 Eclipse 编译它，它工作正常。但是，当我尝试使用小程序将其加载到 .html 文件中时，当我按下 JTextField 时，它不会注册/识别 ENTER 键。ActionListener 似乎不起作用。我用了：

```
public void init() {
    textField = new JTextField(20);
    textField.setText("Enter your question here.");
    textField.selectAll();
    textField.addActionListener(this);

    textArea = new JTextArea(10, 20);
    textArea.setEditable(false);
    JScrollPane scrollPane = new JScrollPane(textArea,
            JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);

    // Add Components to the Applet.
    GridBagLayout gridBag = new GridBagLayout();
    Container contentPane = getContentPane();
    contentPane.setLayout(gridBag);
    GridBagConstraints c = new GridBagConstraints();
    c.gridwidth = GridBagConstraints.REMAINDER;

    c.fill = GridBagConstraints.HORIZONTAL;
    gridBag.setConstraints(textField, c);
    contentPane.add(textField);

    c.fill = GridBagConstraints.BOTH;
    c.weightx = 1.0;
    c.weighty = 1.0;
    gridBag.setConstraints(scrollPane, c);

    contentPane.add(scrollPane);

    newline = System.getProperty("line.separator");
}

public void actionPerformed(ActionEvent event) {
    String text = textField.getText();
    String question = "";
    String answer = "";

    question = textField.getText();
    question = ProcessString(question);
    answer = Answer(question);
    textArea.append(text + newline);
    textArea.append(answer + newline);
    textField.selectAll();
}

static String noAnswer;
static boolean knowAnswer = true;

// process the question string, take out non-ACSII characters, spaces, to
// lower space
public String ProcessString(String question) {
    question = question.toLowerCase();
    String[] words = question.split("\\s+");

    question = "";
    for (int wordCount = 0; wordCount < words.length; wordCount++) {
        words[wordCount] = words[wordCount].replaceAll("[^A-Za-z]", "");
        if (wordCount != words.length - 1)
            question = question + words[wordCount] + " ";
        else
            question = question + words[wordCount];
        // System.out.println(words[wordCount]);
    }
    return question;
}

public String Answer(String question) {

    String answer = "";

    /*
      if the database know the answer (did not not know), then return the
      answer. if the database does not know the answer, then recover the
      answer in database.
    */
    if (knowAnswer == true) {
        // open the database file and search if questions matches any one in
        // the
        // database
        Scanner sc = null;
        try {
            sc = new Scanner(new File("database.txt"));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        int answerFrequency = 0;

        boolean matchFound = false;

        while (sc.hasNext()) {

            int questionCount = sc.nextInt();
            String line = sc.nextLine();

            String[] databaseLine = line.split("\\s+");
            String databaseQuestion = "";
            String databaseAnswer = "";

            // collect words for database questions
            for (int wordCount = 1; wordCount <= questionCount; wordCount++) {
                if (wordCount != questionCount)
                    databaseQuestion = databaseQuestion
                            + databaseLine[wordCount] + " ";
                else
                    databaseQuestion = databaseQuestion
                            + databaseLine[wordCount];
            }

            // collect words for database answer
            for (int wordCount = questionCount + 2; wordCount < databaseLine.length; wordCount++) {
                databaseAnswer = databaseAnswer + databaseLine[wordCount]
                        + " ";
            }

            // if the question is found in database, print answer
            if (question.equals(databaseQuestion)) {
                matchFound = true;

                // the current answer is more frequency than the previous
                // found
                // answer, reassign the current answer the find answer
                if (answerFrequency < Integer
                        .parseInt(databaseLine[questionCount + 1])) {
                    answerFrequency = Integer
                            .parseInt(databaseLine[questionCount + 1]);
                    answer = databaseAnswer;
                }
            }
        }

        if (matchFound == true) {
            // System.out.println(answer);
            knowAnswer = true;
        } else {
            // System.out.println("I don't know what you mean. How should I answer your question?");
            knowAnswer = false;
            noAnswer = question;
            answer = "I don't know how to respond. How should I answer that?";
        }

        sc.close();
    } else if (knowAnswer == false) {
        String[] word = noAnswer.split(" ");

        BufferedWriter writer = null;
        answer = question;
        try {
            writer = new BufferedWriter(
                    new FileWriter("database.txt", true));
            writer.newLine();
            writer.write(word.length + " " + noAnswer + " 1 " + answer);
        } catch (IOException e) {
        } finally {
            try {
                if (writer != null)
                    writer.close();
            } catch (IOException e) {
                System.out.println("Cannot write to file");
            }
        }
        answer = "I got that.";
        knowAnswer = true;
    }
    return answer;
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:52:40.123

尝试向 ActionMap 添加一个 Action 并将 InputMap 设置为 ENTER 键。

```
textField.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "enter" );
textField.getActionMap().put("enter", new AbstractAction() {...} ); 
```

该领域必须有重点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:43:03.733

这似乎对我有用....

```
public class TestApplet04 extends JApplet implements ActionListener {

    private JTextField textField;
    private JTextArea textArea;
    private String newline;

    public void init() {
        textField = new JTextField(20);
        textField.setText("Enter your question here.");
        textField.selectAll();
        textField.addActionListener(this);

        textArea = new JTextArea(10, 20);
        textArea.setEditable(false);
        JScrollPane scrollPane = new JScrollPane(textArea,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);

        // Add Components to the Applet.
        GridBagLayout gridBag = new GridBagLayout();
        Container contentPane = getContentPane();
        contentPane.setLayout(gridBag);
        GridBagConstraints c = new GridBagConstraints();
        c.gridwidth = GridBagConstraints.REMAINDER;

        c.fill = GridBagConstraints.HORIZONTAL;
        gridBag.setConstraints(textField, c);
        contentPane.add(textField);

        c.fill = GridBagConstraints.BOTH;
        c.weightx = 1.0;
        c.weighty = 1.0;
        gridBag.setConstraints(scrollPane, c);

        contentPane.add(scrollPane);

        newline = System.getProperty("line.separator");
    }

    public void actionPerformed(ActionEvent event) {
        String text = textField.getText();
        String question = "";
        String answer = "";

        question = textField.getText();
//        question = ProcessString(question);
//        answer = Answer(question);
        textArea.append(text + newline);
        textArea.append(answer + newline);
        textField.selectAll();
    }
} 
```

**反馈后更新**

这是你的主要问题...

```
sc = new Scanner(new File("database.txt")); 
```

这会给你带来很多问题。首先，小程序可能没有从客户端机器读取的访问权限，因此您可能会遇到安全异常。其次，正如前面的陈述可能暗示的那样，文件 ins 不太可能存在于客户端计算机上。

您需要将此资源嵌入到应用程序的 Jar 中并用于`getClass().getResource("...")`访问它。这将返回 a `URL`，您可以使用它`URL#openConnection`来访问`InputStream`可以在扫描仪中使用的 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:28:07.513

我也是 Java 的新手，但发现这`JTextfield`只是一个单行条目。如果您想要一个多行条目，则需要使用 a`JTextArea`代替。

希望这可以帮助 ：）

# c# - 根据 LINQ / lambda 中 Group By 语句的计数创建计数

> ID：13188493
> 
> 赞同：2
> 
> 时间：2012-11-02T02:32:09.687
> 
> 标签：c#, linq, lambda

我想要做的是将一大堆记录按`Employer`. 然后，我想返回一个整数变量，它只计算那些至少有`30`记录的组。

IE 我在、at和at有`100`订阅者。`Employer A``20``Employer B``30``Employer C`

我将记录组合​​在一起并提出

```
Employer A - 100
Employer B - 20
Employer C - 30 
```

我想返回 的标量变量`2`。

这是我目前拥有的：

```
var Step1 =
    (from y in recordsActivstJoin
     where y.q.Market.Contains(market) && y.x.ActivistCodeID.Equals(activismCode)
     select new {y}).ToList();

            //this groups my previous query
var Step2 = (from z in Step1 group z by z.y.q.Employer into f select new {f}).ToList(); 
```

当我观察当地人时，我可以看到它实际上确实从第 1 步中的 34 行向下分组到第 2 步中的 17 行。现在，我只想缩小到组 >=30 的那些。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T02:40:21.087

我不是最擅长盲目地编写 LINQ，但我相当肯定你正在寻找非常接近以下内容的东西：

```
var Step1 =
                (from y in recordsActivstJoin
                 where y.q.Market.Contains(market) && y.x.ActivistCodeID.Equals(activismCode)
                 select new {y}).ToList();

                        //this groups my previous query
var Step2 = (from i in Step1 group i by i.y.q.Employer into groupedEmployees
select new 
{
    EmployeeCount = groupedEmployees.Count()
}).Where(n=>n.EmployeeCount >= 30).Count(); 
```

帕特里克指出，这可以缩短为：

```
var Step2 = Step1.GroupBy(i => i.y.q.Employer).Count(g => g.Count() >= 30); 
```

`Step2`应该`2`在你的例子中。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T10:10:00.580

作为备选：

*   按雇主查询分组记录：

代码：

```
var groupedRecords = recordsActivstJoin
                     .Where(y => y.q.Market.Contains(market) && y.x.ActivistCodeID.Equals(activismCode))
                     .ToLookup(y => y.q.Employer); 
```

*   超过 30 个条目的组数：

代码：

```
Int32 count = groupedRecords.Count(g => g.Count() >= 30); 
```

笔记：

与通常不是的 GroupBy 相比，使用 ToLookup 很可能是雪崩安全的。这取决于用于查询您的数据的提供程序，例如 LinqToObject 没有区别，而 LinqToSql 则在大量不同的数据集上存在巨大差异。

ToLookup 是立即执行，所以如果你想推迟分组的执行，你需要走一条不同的路。

# javascript - 混淆来自 CGI 请求/响应的 AJAX 响应的 Javascript 函数

> ID：13188494
> 
> 赞同：0
> 
> 时间：2012-11-02T02:32:13.003
> 
> 标签：javascript, ajax, asynchronous, cgi, response

我有 3 个从 HTML 页面中的正文 onload 调用的 Javascript 函数。

每个 Javascript 函数都包含在它自己的 Javascript 文件中。每个 Javascript 文件对应于服务器上的另一个 CGI 脚本。

bodyonload.js 看起来像：

```
function bodyOnload() {
 getElementsA();
 getElementsB();
 getElementsC();
} 
```

每个 getElements 函数只调用一个 CGI 脚本来获取 3 个不同选择框的内容。

问题是所有 3 个函数都是异步调用的，因此选择框会得到错误的结果。这几乎就像 3 个函数相互踩踏，并将 CGI 响应放在错误的选择框中。我知道 CGI 的响应是正确的。如果我从其他函数中连续调用每个函数，这很好。就像从第一个函数调用第二个函数，从第二个函数调用第三个函数一样。它们同时运行的异步特性似乎导致了问题。

这是包含 getElements 函数的每个 javascript 文件的通用代码。

```
function getElementsA() {
    strURL = "http://test.com/scriptA.cgi";
    var xmlHttpReq = false;
    var self = this;

    // Mozilla/Safari
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('POST', strURL, true);
    self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    self.xmlHttpReq.onreadystatechange = function() {
        if (self.xmlHttpReq.readyState == 4) {
            fillselectboxA(self.xmlHttpReq.responseText);
        }
    }

 self.xmlHttpReq.send();

}

function fillselectboxA(str)
 {
  document.getElementById("selectBoxA").length=0;
  var results = new Array();
  results = str.split(/\n/);
  var size = results.length;
  var select = document.getElementById("selectBoxA");
  for (x=0;x<size;x++)
   {
    var element = results[x];
    select.options.add(new Option(element, x))
   }
 } 

-------------------

function getElementsB() {
    strURL = "http://test.com/scriptB.cgi";
    var xmlHttpReq = false;
    var self = this;

    // Mozilla/Safari
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('POST', strURL, true);
    self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-  urlencoded');
    self.xmlHttpReq.onreadystatechange = function() {
        if (self.xmlHttpReq.readyState == 4) {
            fillselectboxB(self.xmlHttpReq.responseText);
        }
    }

 self.xmlHttpReq.send();

}

function fillselectboxB(str)
 {
  document.getElementById("selectBoxB").length=0;
  var results = new Array();
  results = str.split(/\n/);
  var size = results.length;
  var select = document.getElementById("selectBoxB");
  for (x=0;x<size;x++)
   {
    var element = results[x];
    select.options.add(new Option(element, x))
   }
 } 

------------------------

function getElementsC() {
    strURL = "http://test.com/scriptC.cgi";
    var xmlHttpReq = false;
    var self = this;

    // Mozilla/Safari
    if (window.XMLHttpRequest) {
        self.xmlHttpReq = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");
    }
    self.xmlHttpReq.open('POST', strURL, true);
    self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    self.xmlHttpReq.onreadystatechange = function() {
        if (self.xmlHttpReq.readyState == 4) {
            fillselectboxC(self.xmlHttpReq.responseText);
        }
    }

 self.xmlHttpReq.send();

}

function fillselectboxC(str)
 {
  document.getElementById("selectBoxC").length=0;
  var results = new Array();
  results = str.split(/\n/);
  var size = results.length;
  var select = document.getElementById("selectBoxC");
  for (x=0;x<size;x++)
   {
    var element = results[x];
    select.options.add(new Option(element, x))
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:04:44.197

> 这几乎就像 3 个功能相互踩踏一样

这*正是*正在发生的事情，您在调用时覆盖了`onreadystatechange`设置的处理程序，然后在调用时再次覆盖。这是因为and是所有三个函数中的全局对象（假设它们都类似于）。`getElementsA``getElementsB``getElementsC``this``self``getElementsA`

您可以通过将函数调用更改为对象实例化来规避这种情况：

```
function bodyOnload() {
  new getElementsA();
  new getElementsB();
  new getElementsC();
} 
```

# ios - 从 NSDictionary 填充 tableview

> ID：13188495
> 
> 赞同：2
> 
> 时间：2012-11-02T02:32:13.083
> 
> 标签：ios, uitableview, nsarray, nsdictionary

我从 json 请求中收到了一个 NSDictionary，如下所示：

```
RESULT : (
    {
    Id1 = 138;
    lat = "45.5292910";
    long = "-73.6241500";
    order = "2343YY3"

},
    {
    Id1 = 137;
    lat = "45.5292910";
    long = "-73.6241500";
    order = "2343YY3"

}, etc. 
```

我想在 TableView (CellforRowAtIndexPath) 中显示它，所以我将数据作为 NSArray 获取。该方法似乎效率低下，因为每个键`Id1`, `lat`,`long`等都是作为 NSArray 创建的，因此我可以使用:`[self.data1 objectAtIndex:indexPath.row];` `[self.data2 objectAtIndex:indexPath.row]`等显示它们。

如何在不创建和使用 4 个 NSArray 的情况下实现相同的目标？我可以使用存储数据的单个 NSArray 或 NSMutableDictionary 吗？

更新：

当 TableView 加载时，它最初是空的，但我在同一个 VC 上有一个按钮，用于加载表单的模式视图。当我加载表单然后将其关闭返回 TableView 时，数据已加载！你能建议我错过什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:13:28.173

是的，您可以使用单个数组。诀窍是创建一个数组，其中每个数组条目都包含一个字典。然后你查询数组来填充你的tableview。

例如：如果您的数组是一个名为的属性`tableData`，并且您调用了自定义 tableview 单元格，`CustomCell`那么您的代码可能如下所示：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [self.tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CustomCell";

    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // Configure the cell...
    cell.latitude.text = [[self.tableData objectAtIndex:indexPath.row] objectForKey: @"lat"];
    cell.longitude.text = [[self.tableData objectAtIndex:indexPath.row] objectForKey:@"long"];
    // continue configuration etc..
    return cell;
} 
```

同样，如果您的表格视图中有多个部分，那么您将构建一个数组数组，每个子数组都包含该部分的字典。填充 tableview 的代码类似于以下内容：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return [self.tableData count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return [[self.tableData objectAtIndex:section] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CustomCell";

    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // Configure the cell...
    cell.latitude.text = [[[self.tableData objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey: @"lat"];
    cell.longitude.text = [[[self.tableData objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"long"];
    // continue configuration etc..
    return cell;
} 
```

TL;博士; 获取从 JSON 数据创建的字典并将它们放入一个数组中。然后查询数组以填充 tableview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:37:44.357

您可以执行以下操作：

```
// main_data = Store your JSON array as "array of dictionaries" 
```

然后在`cellForRowAtIndexPath`做如下：

```
NSDictionary *obj = [main_data objectAtIndex: indexPath.row];
// Access values as follows:
[obj objectForKey: @"Id1"]
[obj objectForKey: @"lat"]
...
... 
```

# jquery - 为什么 IE 10 拒绝通过 jQuery $.ajax 发送 POST 数据

> ID：13188500
> 
> 赞同：21
> 
> 时间：2012-11-02T02:33:04.820
> 
> 标签：jquery, post, internet-explorer-10

在我的开发和生产环境中，IE 10 拒绝通过简单的 $.ajax 调用发送任何 POST 数据。

我的脚本如下所示：

```
d = 'testvar=something';
$.ajax({
    data: d,
    success: function(h){
        console.log(h);
    }
}); 
```

实际的ajax请求正在通过，但没有发布数据？？？

请求标头看起来很正常：

```
Request POST /steps/~do HTTP/1.1
Accept  */*
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With    XMLHttpRequest
Referer http://localhost:8080/steps/
Accept-Language en-GB,en-AU;q=0.7,en;q=0.3
Accept-Encoding gzip, deflate
User-Agent  Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)
Host    localhost:8080
Content-Length  0
DNT 1
Connection  Keep-Alive
Cache-Control   no-cache 
```

但是请求正文是空的！（我在他们的 F12 开发栏中使用 IE 的网络选项卡来捕获请求）。在 PHP 脚本中，`print_r($_POST);`返回一个空数组。

这在 IE 7 - 9、chrome、FF 和 safari 中运行良好，但在 IE10 中中断？

我不确定我是否错过了什么，或者 IE 10 是否只是错误？

*编辑*

我已将全局 ajax 设置如下：

```
$.ajaxSetup({
    url: ROOT+'~do', // ROOT is either http://localhost/.../~do or http(s)://www.steps.org.au/~do depending on production or development environment
    type: 'POST'
}); 
```

**进一步编辑**

在 Windows 8 Pro 64 位上使用 IE 版本 10.0.9200.16384

请求标头的直接复制/粘贴是：

```
Key Value
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-GB,en-AU;q=0.7,en;q=0.3
Cache-Control   no-cache
Connection  Keep-Alive
Content-Length  0
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  __utma=91949528.1947702769.1348201656.1353212510.1353237955.6; __utmz=91949528.1348201656.1.1.utmcsr=localhost|utmccn=(referral)|utmcmd=referral|utmcct=/coconutoil.org.au/; __utmb=91949528.2.10.1353237955; __utmc=91949528; cartID=8b3b2b9187cfb1aeabd071d6ec86bbbb; PHPSESSID=bl57l7fp0h37au7g0em7i3uv13
DNT 1
Host    www.steps.org.au
Referer https://www.steps.org.au/
Request POST /~do HTTP/1.1
User-Agent  Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)
X-Requested-With    XMLHttpRequest 
```

请求正文是空的。

响应标题：

```
Key Value
Response    HTTP/1.1 200 OK
Server  nginx/0.7.65
Date    Sun, 18 Nov 2012 11:23:35 GMT
Content-Type    text/html
Transfer-Encoding   chunked
Connection  close
X-Powered-By    PHP/5.3.5-1ubuntu7.2ppa1~lucid
Expires Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma  no-cache 
```

发起者

```
Property    Value
Stage   Document Processing
Element XMLHttpRequest
Action  Processing
Document ID 0
Frame ID    0
Frame URL   https://www.steps.org.au/Shop/Health-Products/ 
```

复制问题的页面（实际上是整个站点）：

[Steps to Life Shop, 保健品](https://www.steps.org.au/Shop/Health-Products/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T12:38:48.093

**已编辑**

> 微软仍然没有解决这个问题，除了使用
> 
> `<meta http-equiv="x-ua-compatible" content="IE=9" >`
> 
> 通过添加上述元标记，IE10 将以 IE9 兼容模式运行您的 javascript。

老答案。

我正在发布我所做的测试的示例代码，您也可以将相同的代码用于您的代码。

```
<html>
<head runat="server">
    <script src="../Scripts/jquery-1.8.3.js"></script>
<script type="text/javascript">
    var xmlHttp = null;
    var XMLHTTPREQUEST_MS_PROGIDS = new Array(
      "Msxml2.XMLHTTP.7.0",
      "Msxml2.XMLHTTP.6.0",
      "Msxml2.XMLHTTP.5.0",
      "Msxml2.XMLHTTP.4.0",
      "MSXML2.XMLHTTP.3.0",
      "MSXML2.XMLHTTP",
      "Microsoft.XMLHTTP"
    );

    function makePOSTRequest(url, parameters) {

        if (window.XMLHttpRequest != null) {
            //xmlHttp = new window.XMLHttpRequest();
            xmlHttp = new ActiveXObject('Microsoft.XMLHTTP');
        } else if (window.ActiveXObject != null) {
            // Must be IE, find the right ActiveXObject.
            var success = false;
            for (var i = 0; i < XMLHTTPREQUEST_MS_PROGIDS.length && !success; i++) {
                alert(XMLHTTPREQUEST_MS_PROGIDS[i])
                try {
                    xmlHttp = new ActiveXObject(XMLHTTPREQUEST_MS_PROGIDS[i]);
                    success = true;
                } catch (ex) { }
            }
        } else {
            alert("Your browser does not support AJAX.");
            return xmlHttp;
        }
        xmlHttp.onreadystatechange = alertContents;
        xmlHttp.open('POST', url, true);
        xmlHttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded; charset=UTF-8');
        //xmlHttp.setRequestHeader('Content-type', 'application/json;');
        xmlHttp.setRequestHeader('Content-Length', parameters.length);
        xmlHttp.setRequestHeader('Accept', 'text/html,application/xhtml+xml')
        //xmlHttp.setRequestHeader('Connection', "close");
        xmlHttp.send(parameters);
    }

    function alertContents() {
        // alert( this.status );
        if (xmlHttp.readyState == 4) {
            //alert( this.responseText );
            if (xmlHttp.status == 200) {
                var result = xmlHttp.responseText;
                //  document.getElementById('result').innerHTML = result;
                //  document.getElementById('submitbutton').disabled = false;
                alert(result);
            } else {
                //alert( this.getAllResponseHeaders() );
                alert("There was a problem with the request.");
            }
        }
    }
</script>
</head>
<body>
<a href="javascript:makePOSTRequest('/api/jobs/GetSearchResult','jtStartIndex=0&jtPageSize=10&jtSorting=jobDescription ASC&jobDescription=')">Click me please</a>
    GetJobDetail

    <br/><br/>
    Url: <input type="text" id="url" value="/api/jobs/GetSearchResult"/><br/>
    parameters: <input type="text" id="parameters" value="jtStartIndex=0&jtPageSize=10&jtSorting=jobDescription ASC&jobDescription="/><br/>
    submit : <input type="button" id="callMethod" value = "call" onclick="javascript: makePOSTRequest($('#url').val(), $('#parameters').val())"/>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T05:59:48.557

我有同样的问题。我认为它是 ie 10 桌面版的一个错误。在 Windows 8 专业版 64 位上运行。似乎 xhr.send 方法没有传递数据。它在所有其他浏览器中都可以正常工作，例如 Metro 模式下的 10 或者如果您在桌面模式下更改为 ie9 标准。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T21:12:04.147

抱歉，我所有重现您的问题的尝试都没有成功。换句话说，所有 POST 都*带有*HTTP 正文，并且 Ajax 请求正常工作。所以我无法重现您描述的问题。我在 Internet Explorer 10、Windows 8 W64 RTM Enterprise 上使用所有当前 Windows 更新进行了所有测试。

[如果我在您引用的页面](https://www.steps.org.au/Shop/Health-Products/)上的聊天中添加一些项目（例如第一个项目），我可以看到 POST 请求将生成以下标头：

```
Anforderung       POST /~do HTTP/1.1
Accept            */*
Content-Type      application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With  XMLHttpRequest
Referer           https://www.steps.org.au/
Accept-Language   de-DE,de;q=0.8,ru;q=0.7,en-US;q=0.5,en;q=0.3,ja;q=0.2
Accept-Encoding   gzip, deflate
User-Agent        Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0; Touch)
Host              www.steps.org.au
Content-Length    81
DNT               1
Connection        Keep-Alive
Cache-Control     no-cache
Cookie            __utmc=91949528; __utma=91949528.365135675.1353268932.1353268932.1353268932.1; __utmb=91949528.1.10.1353268932; __utmz=91949528.1353268932.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); PHPSESSID=ka4shsgkfvnvfdcath2klh9un0; cartID=4a90a72a379989f597276ca30c79c6f6 
```

一看就知道`Content-Length`是81，不是0。身体是

```
i=1211&q=1&token=00f5e9f5768d09ae67f2016ebcb62e99a0d75345&cmd=addToCart&sideBar=1 
```

该请求将通过 HTML 片段得到答复，并且按钮变为绿色。

确切地说，在将项目添加到聊天期间，它将执行*您在问题中发布的另一个代码*。它将执行 shop.1352417874.js 中的以下代码（第 49-74 行[）](https://www.steps.org.au/js/shop.1352417874.js)：

```
var n;
function inCart(i,t){
    var a = $('#add'+i);
    var q = t?1:$('#qty'+i).val();
    setLoader(a,(t?60:0),0);
    if(!t) a.addClass('loading').html('').attr('href','javascript:;');
    // d = 'i='+i+'&q='+q+'&token='+TOKEN+'&cmd=addToCart&sideBar=1';   
    $.ajax({
        data: {
            i:i,
            q:q,
            token:TOKEN,
            cmd:"addToCart",
            sideBar: 1
        },
        success: function(h){
            $('#sideCartContents').replaceWith(h);
            mkButtons();
            jsEnhance();
            setLoader();
            n=0;
            if(!t) a.removeClass('loading').addClass('green').attr('href','Shop/Checkout.html').html('Checkout').parent().find('div.QTY').html('<strong>x'+q+'</strong> <span class="inC">in cart</span>');
            flashCart();
        }
    });
} 
```

local`i`和`q`variables`1211`的值`1`在我的测试中。

所以我看不到你描述的任何错误。所以你必须*在你的环境中调试代码，它将被复制*。在测试期间，我建议您使用非最小化的 jQuery 代码。您可以调试 jQuery.ajax 的代码来本地化您的问题。

不过，我还有一些额外的建议给你：

1.  首先，您应该包括`error`对`$.ajax`呼叫的回调，而不仅仅是`success`回调。
2.  您应该查看您使用的 JavaScript 代码。例如，在上面的代码片段中，您定义了**全局**变量`n`，它将成为全局`window`对象的属性。由于副作用以及与页面中包含的其他 JavaScript 代码冲突，引入此类变量非常危险。在其他一些地方，您可以间接设置*全局对象的新属性。* `window`例如[common.1345011838.js中定义的](https://www.steps.org.au/js/common.1345011838.js)*全局* `doErrors`函数代码如下

```
function doErrors(e,d){
    e=e.split(',');
    for(i in e){
        $((d?d+' ':'')+'[name="'+e[i]+'"]:visible').addClass('error');
    }
    errors();
} 
```

在上面的代码中，您使用`i`变量而不定义它。所以你设置（或使用）`window.i`变量的方式。很明显，`for-in`在数组不好的情况下使用循环。可以使用等价的代码（如`for(var i=0,l=e.length; i<l; i++) {...}`.

此外，您开始使用的`common.1345011838.js`代码

```
var w,r,i,p,t,l,c,z,e,m,b,k,u,s,CPH,TOKEN;
var z = new Array();
var ROOT; 
```

它定义了许多具有短名称的**全局**变量。这是非常糟糕的风格。它可能会与您包含的其他模块发生冲突。通常，在某个函数中定义您需要*的最多*变量就足够了。您可以将大多数变量的声明移动到`$(document).ready(function(){/*.HERE.*/});`.

如果您确实需要定义一些*全局*变量，您可以定义*一个*类似于命名空间的变量，以及您可以定义为唯一全局对象的*属性的所有其他变量。*这是标准做法。这样可以减少您使用的不同模块之间可能发生的冲突的数量。例如，您可以使用类似的东西

```
MYGLOBALCHATOBJECT = {
    root: "/",
    z: [],
};

...
// add new property
MYGLOBALCHATOBJECT.TOKEN = "some value"; 
```

您应该在另一个函数的上下文中定义许多函数。这样您就可以减少定义许多全局变量的需要。只是一个例子上面定义的函数`inCart`使用变量的代码。该变量将**仅在**.之后直接定义的其他全局函数内部使用。此外，该函数将仅在 callback 内部使用。因此，您可以重写代码，以便在 callback和内部定义：`n``inCart``n`**`flashCart``inCart``flashCart``success``n``flashCart``success`**

 **```
...
success: function (h) {
    // define LOCAL variable n
    var n = 0;
    // define LOCAL function which can use outer variable n
    function flashCart(){
        if(n<3) { 
            setTimeout("flashCart()",120);
            n=n+1;
        }
        $('#sideCartBox').toggleClass('highlighted');
    }

    $('#sideCartContents').replaceWith(h);
    mkButtons();
    jsEnhance();
    setLoader();
    if(!t) a.removeClass('loading').addClass('green').attr('href','Shop/Checkout.html').html('Checkout').parent().find('div.QTY').html('<strong>x'+q+'</strong> <span class="inC">in cart</span>');
    flashCart(); // we use LOCAL function
} 
```

我建议您另外在 JSHint 或 JSLint 中测试[您](http://www.jshint.com/)的[代码](http://www.jslint.com/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T12:38:46.967

我也面临同样的问题，以下更改对我有用。

```
<meta http-equiv="x-ua-compatible" content="IE=9" > 
```

为我工作:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-07T00:58:58.747

面对同样的问题，我无法通过设置来解决`<meta http-equiv="x-ua-compatible" content="IE=9">`，但是我通过将响应头设置为推荐的方式来强制执行此`X-UA-Compatible`操作，`IE9`因为在 HTML5 验证器中无法识别元头。

对于 J2EE 应用程序，这可以通过以下过滤器来实现：

```
public class IECompatibilityFilter implements Filter {
    private String compatibilityMode = "IE=10";
    public IECompatibilityFilter() {
    }
    public String getCompatibilityMode() {
        return compatibilityMode;
    }
    public void setCompatibilityMode(String compatibilityMode) {
        this.compatibilityMode = compatibilityMode;
    }
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        String mode = filterConfig.getInitParameter("compatibilityMode");
        if (StringUtils.isNotBlank(mode)) {
            this.compatibilityMode = StringUtils.trim(mode);
        }
    }
    @Override
    public void doFilter(ServletRequest request,
                         ServletResponse response,
                         FilterChain chain)
            throws IOException, ServletException {
        if (!response.isCommitted() && response instanceof HttpServletResponse) {
            HttpServletResponse httpResponse = (HttpServletResponse) response;
            httpResponse.addHeader("X-UA-Compatible", compatibilityMode);
        }
        chain.doFilter(request, response);
    }
    @Override
    public void destroy() {
    }
} 
```

并在您的`web.xml`.

```
<filter>
  <filter-name>ieCompatibilityFilter</filter-name>
  <filter-class>com.foobar.web.filter.IECompatibilityFilter</filter-class>
  <init-param>
    <param-name>compatibilityMode</param-name>
    <param-value>IE=9</param-value>
  </init-param>
</filter> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T15:39:57.003

我有同样的问题，但只有一个请求，我的意思是我有一个处理许多 ajax 请求的网络应用程序。查看您的标记。我在表格中有表格进行布局

```
<table>
    <form></form>
</table> 
```

我只是换一种方式。表格 > 表格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T16:56:51.280

我有类似的东西（[从浏览器上传图像到 Amazon S3 的问题](https://stackoverflow.com/questions/14711797/problems-with-image-upload-from-browsers-to-amazon-s3)），我发现在我的情况下，xhr 对象在从[https://my请求](https://my.local.server.com:123/foo)[http://some.server.com时崩溃。](http://some.server.com) [local.server.com:123/foo](https://my.local.server.com:123/foo)。它在 xhr.open("POST", httpUrl, true) 调用时崩溃。

这可能是一个 IE10 错误（真是令人惊讶；）），它在 Win7 和 Win8 上都崩溃了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-30T04:47:05.830

似乎存在 Window 8 问题，发出**跨域 https**请求。我无法确认它是否与证书的有效性有关，因为我的跨域服务器上的证书无效（开发服务器）。

此链接是一种解决方法，但谁想引导他们的整个应用程序为 IE10+ 发出 GET 请求？ [http://jonnyreeves.co.uk/2013/making-xhr-request-to-https-domains-with-winjs/](http://jonnyreeves.co.uk/2013/making-xhr-request-to-https-domains-with-winjs/)**

# image - 当我将图像放到 AS3 中的垃圾桶图像上时，我需要从舞台上删除图像

> ID：13188504
> 
> 赞同：1
> 
> 时间：2012-11-02T02:34:02.243
> 
> 标签：image, actionscript-3

每当我将图像拖放到垃圾桶中时，我都需要从舞台上删除图像。我一直在看这个，似乎真的找不到解决方案。

```
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[

        import mx.controls.Image;

        //array of movies
        public var myArray:Array = ["batman.jpg","cabin.jpg","christmasVacation.jpg"];

        //init function
        public function init():void{

            var trashImage:Image = new Image();

            //set trash img
            trashImage.source = "asset/trash.jpg";

            //adds img to stage
            trashGrp.addElement(trashImage);

            //loops 4 times
            for(var i:Number = 0; i < myArray.length; i++){

                var arrayEntry:String = myArray[i];

                //makes new image
                var newImage:Image = new Image();

                //sets the image source for each image
                newImage.source = "asset/" + arrayEntry;

                //adds the image to the stage
                grpMovies.addElement(newImage);

                //set drag/drop
                newImage.addEventListener(MouseEvent.MOUSE_DOWN, dragMe);
                newImage.addEventListener(MouseEvent.MOUSE_UP, dropMe); 
            }
        }

        //dragMe function
        public function dragMe(e:MouseEvent):void
        {
            // Get the Image that saw the mouse-down.
            var img:Image = Image(e.currentTarget);
            // Use the built-in method to start dragging.
            img.startDrag();
        }

        //dropMe function
        public function dropMe(e:MouseEvent):void
        {
            // Get the Image that saw the mouse-up.
            var img:Image = Image(e.currentTarget);
            // Use the built-in method to stop dragging.
            img.stopDrag();

                            -**this is where my issue is. I cant get it to remove it when the image is hit**

            if (trashGrp.hitTestObject(img)) {
                grpMovies.removeElement(img);
            }

        }

    ]]>
</fx:Script>
<s:TileGroup id="grpMovies" columnWidth="225" rowHeight="225" requestedRowCount="1"
             paddingTop="20"/>
<s:HGroup id= "trashGrp" x="950" y="20"/>

</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:15:37.067

查看以下代码，我认为它可以满足您的需求。我修改了事件处理程序以附加到主容器，以便在您释放垃圾桶上的鼠标按钮时正确触发它。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           creationComplete="init()">

<fx:Declarations>
<!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
<![CDATA[

    import mx.controls.Image;

    //array of movies
    public var myArray:Array = ["batman.jpg","cabin.jpg","christmasVacation.jpg"];
    private var _draggedImage:Image;

    //init function
    public function init():void{

        var trashImage:Image = new Image();

        //set trash img
        trashImage.source = "assets/trash.png";
        trashImage.mouseEnabled = false;
        trashImage.mouseChildren = false;
        //adds img to stage
        trashGrp.addElement(trashImage);

        //loops 4 times
        for(var i:Number = 0; i < myArray.length; i++){

            var arrayEntry:String = myArray[i];

            //makes new image
            var newImage:Image = new Image();

            //sets the image source for each image
            newImage.source = "assets/"+arrayEntry;

            //adds the image to the stage
            grpMovies.addElement(newImage);

            //set drag/drop
            newImage.addEventListener(MouseEvent.MOUSE_DOWN, dragMe);

        }
    }

    //dragMe function
    public function dragMe(e:MouseEvent):void
    {
        // Get the Image that saw the mouse-down.
        var img:Image = Image(e.currentTarget);
        // Use the built-in method to start dragging.
        img.startDrag();
        _draggedImage = img;
        this.addEventListener(MouseEvent.MOUSE_UP, dropMe); 
    }

    //dropMe function
    public function dropMe(e:MouseEvent):void
    {
        _draggedImage.stopDrag();
        this.removeEventListener(MouseEvent.MOUSE_UP, dropMe);

        if (trashGrp.hitTestObject(_draggedImage)) {
            grpMovies.removeElement(_draggedImage);
            _draggedImage = null;
        }

    }

]]>
</fx:Script>
<s:TileGroup id="grpMovies" columnWidth="225" rowHeight="225" requestedRowCount="1"
            paddingTop="20"/>
<s:HGroup id= "trashGrp" x="950" y="20"/>

</s:Application> 
```

# javascript - 什么是为浏览器游戏实现/渲染 2d 平铺地图的好方法？

> ID：13188506
> 
> 赞同：3
> 
> 时间：2012-11-02T02:34:09.593
> 
> 标签：javascript, canvas

我在学习时制作了这个小 rpg ruby​​ 游戏，现在我想把它做成一个浏览器游戏。我已经设置了 Sinatra 框架来服务它，所以我首先要寻找的是一种在浏览器中表示游戏地图的方法（位置属性存储在 db 中）。

地图不需要在滚动时刷新或动态获取（至少在这个开发阶段），但是，让我在未来这样做的技术将是选择它的一个很好的理由。

我想到的东西：html表格，html5画布，一些正是为此目的设计的js框架（我不知道=请建议）。

是的，我知道 gamequery-js 框架，但我从未使用过它，而且我不知道当我添加新功能（滚动、ajax）时，它是否会减慢一切，导致无法使用。

我真的不知道任何其他选择..也许有更轻的方法？更简单或更简约的方式？更有针对性的 js 框架哪个是适合工作的工具？也许只是一些 html canvas 代码，甚至是简单的图像映射，或者具有绝对定位的图像就足够了？

问题是我想从简单开始，然后逐渐变得更好，所以，正如我之前所说，我更喜欢一些能给我改进空间或走向新的网络趋势但也会给我的东西一开始有点满足:)

所以..需要建议！并赞赏！：） 谢谢

ps Flash 被排除在外，因为我不喜欢它。

**编辑**：添加更多技术细节以更好地描述地图，因为 charlietfl 评论说它太模糊而无法给出一个好的答案：

在游戏开始时，每个新游戏的代码都会随机生成一张新地图。现在忘记db，假设一个地图（比如100x100“正方形”）被存储为一个三维数组。(x,y, ...) 数组的最后一个“维度”存储了地图单元格中的人物和内容：玩家、建筑物等。所以我所要做的就是将这些“正方形”或数组单元格渲染到浏览器中的二维平铺地图。希望能更好地解释它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:07:41.877

根据您的地形看起来如何，最简单的可能只是绝对定位的图像。如果您的地图具有标准的平铺背景，这尤其适用。您可以只使用纯 CSS 来渲染背景，然后在必要时放置地形元素。

如果您想花哨，您还可以通过将您的世界坐标转换为 HTML 坐标来模拟等距投影，该函数使用沿 y 轴移动 x 坐标的函数。实际上，对于聪明的精灵和地图设计来说，这甚至都不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:43:48.137

试试 KineticJS，[http](http://kineticjs.com/) ://kineticjs.com/ 根据其网站，

> KineticJS 是一个 HTML5 Canvas JavaScript 框架，它通过为桌面和移动应用程序启用高性能事件检测来扩展 2d 上下文。
> 
> 您可以在舞台上绘制事物，然后向它们添加事件侦听器、移动它们、缩放它们，以及独立于其他形状旋转它们以支持高性能动画和过渡。

要学习动力学 js，请查看[http://www.html5canvastutorials.com/](http://www.html5canvastutorials.com/) 希望这会有所帮助。

# ios - 如何以编程方式在其中创建带有 UIWebView 的 UINavigationController？

> ID：13188514
> 
> 赞同：0
> 
> 时间：2012-11-02T02:35:44.603
> 
> 标签：ios, uiview, uiviewcontroller, uiwebview, uinavigationcontroller

我做了一个 UIViewController 的子类。它有一个名为的 UIWebView 属性`*_webview`。
当我将该 UIViewController 的`view`属性设置为 _webview 时，我将停止从我的视图中获取通知。所以我不能用委托实现任何方法，甚至不能用 viewDidLoad！我不知道为什么会这样或者我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:59:57.333

不要将视图控制器的视图设置为 Web 视图。在该`viewDidLoad`方法中，创建`UIWebView`并将其添加为视图控制器视图的子视图。像这样的东西：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIWebView *webView = [[UIWebView alloc] initWithFrame:self.view.bounds];
    // setup rest of webView properties such a delegate, etc.
    webView.autoresizingMask = UIViewAutoresizingMaskFlexibleWidth | UIViewAutoresizingMaskFlexibleHeight;
    [self.view addSubview:webView];
} 
```

这将使 web 视图填充视图控制器。此代码假定为 ARC。除非您需要从委托方法以外的任何方法引用 Web 视图，否则不需要 Web 视图属性。

# c# - 通过电子邮件验证用户

> ID：13188526
> 
> 赞同：1
> 
> 时间：2012-11-02T02:36:39.467
> 
> 标签：c#, asp.net, visual-studio-2010

有谁知道使用 ASP.net 安全性设置示例 Visual Studio 2010 应用程序的良好示例代码，以及登录页面，以及验证通过电子邮件注册的用户的逻辑/代码？我觉得这一定已经写了几千次了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:41:16.673

我会给你我开始时的 URL。如果您愿意，您可以采用不同的方法，但这已得到很好的解释，您可以理解您需要做什么：

[http://forums.asp.net/post/1860807.aspx](http://forums.asp.net/post/1860807.aspx)

请注意，那里的示例很旧，您需要对 ADO.NET 有所了解，但想法是一样的

# xcode - 如何将日历年的开始日期更改为 1 月 1 日以外的日期？

> ID：13188533
> 
> 赞同：0
> 
> 时间：2012-11-02T02:37:09.967
> 
> 标签：xcode, ios6, nscalendar, ekevent

我正在编写一个依赖日历和日历事件向用户显示数据的应用程序。

我需要能够让用户在设置中选择他/她的“财政”年的开始，这将是 12 个月中的第一个。这是一个面向军事用户的应用程序，任何给定单位的财政年度都可以从其单位（基地）决定的任何月份开始。

我向用户显示的数据需要根据用户对财政年度开始的设置而不是日历年划分为“财政”季度。

我在检索、编辑或删除事件时没有问题，我不知道如何将年初更改为 1 月 1 日以外的任何时间。

我在 GitHub 上找到[了 NSDateCategoryForReporting](https://github.com/melsam/NSDateCategoryForReporting)，这似乎正是我所需要的，但我如何告诉它这一年从 x 月的 1 日开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:46:25.520

iOS 本身并不支持此功能，因此您必须找到一个插件来执行此操作或编写您自己的插件。最好的办法是编写一个使用标准 NSDate、NSCalendar 等执行日期转换的类。

例如，您可以存储用户指定的起始会计年度的日期。然后，您可以计算该日期与 1 月 1 日之间的天数差异，并据此更改日期。

# cordova - 如何在 Eclipse 中开始使用 PhoneGap？

> ID：13188534
> 
> 赞同：23
> 
> 时间：2012-11-02T02:37:14.520
> 
> 标签：cordova

试图在 Eclipse 中创建我的第一个 PhoneGap 项目。我已按照入门教程进行操作，但这似乎只在最佳情况下有所帮助。我的猜测是，如果他们使教程足够模糊，人们会付钱给他们以获得足够的帮助。

遵循本教程：[Android 入门](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

当我运行 create 命令时，出现以下错误（见下文）。我猜我的环境还没有准备好。我已经安装了 Android SDK，我已经安装了 Java SDK，并且在我的路径中。我唯一不清楚的部分是 Apache Ant。我认为它是与 Eclipse 一起安装的？

```
Missing one of the following:
JDK: http://java.oracle.com
Android SDK: http://developer.android.com
Apache ant: http://ant.apache.org 
```

我需要做些什么来解决这个问题并在 Eclipse 中成功创建 PhoneGap 项目？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T08:54:36.127

我假设您使用的是 Windows，因为我刚刚解决了相同的错误。

我做了什么：

*   安装最新的 JDK [1]
*   安装 Apache Ant 二进制文件 [2]
*   安装 Android SDK [3]

在安装完所有这些之后，我将以下路径附加到我的 Path 系统变量中，可以在以下位置找到：

**控制面板 > 系统 > 高级系统设置 > 高级选项卡 > 环境变量按钮 > 系统变量**

C:\Program Files\Java\jdk1.7.0_09\bin;C:\Users\Rob\Documents\apache-ant-1.8.4\bin;C:\Program Files (x86)\Android\android-sdk\tools

请注意，我的用户名位于这些路径中，因此您的用户名会有所不同。不要忘记现有路径和要添加的路径之间的分号。

根据您对上述工具的使用情况，将路径添加到 create.bat 脚本可能会更简洁。

1.  [http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
2.  [http://ant.apache.org/bindownload.cgi](http://ant.apache.org/bindownload.cgi)
3.  [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

# html - 无法通过 CSS 使图像移动

> ID：13188535
> 
> 赞同：0
> 
> 时间：2012-11-02T02:37:39.383
> 
> 标签：html, css, image, layout, positioning

我正在尝试在[此](http://piiholozipline.com/about/)页面（右下角）上移动 Trip Advisor 的图像。如此屏幕截图所示，它需要向上和向右移动以适合橙色/粉色框。

![截屏](../Images/98af19e2d157ec1994292644c21b9341.png)

当我应用负边距时，图像隐藏在橙色/粉色框后面。我尝试添加各种 z-index 值以使其显示在顶部，但似乎没有任何效果。

知道我做错了什么吗？

注意：此图像（用于旅行顾问）也在主页上重复使用。应用的任何 CSS 样式都不应影响图像在主页上的定位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:46:01.040

没问题！希望这可以帮助。

```
.TA_rated {
  width: 155px;
  height: 77px;
  position: absolute;
  left: 265px;
  top: -6px;
  margin: 0;
} 
```

编辑：仅在 Safari 中测试过，但在其他地方应该没问题...

# java - 为什么 BUILDER Pattern 比 javaBean 更安全？

> ID：13188544
> 
> 赞同：2
> 
> 时间：2012-11-02T02:38:45.493
> 
> 标签：java

作为标题，我正在阅读`<Effective Java>`，但是当我阅读第 2 章时，它说

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:46:39.743

当对象是*不可变的时，与对象（如 JavaBeans）是**可变*的时相比，您不必担心太多。一旦你有了一个不可变对象，它基本上就不会受到线程同步问题的影响，并且你可以自由地传递它而无需制作防御性副本（以保护用户或善意的库方法不更改数据）。

自然地，创建一个可变对象可能很棘手，并且可能涉及构造函数太长而无法管理。这就是 Builder 模式可以帮助您的地方——使用可变的 Builder 来创建初始状态，然后将其复制到该对象的构造函数中的不可变对象。

请注意，如果不可变对象包含对任何可变对象的引用，则外部对象并不是真正不可变的。您可能会在[Guava](https://code.google.com/p/guava-libraries/)`ImmutableList`中找到、`ImmutableMap`和`ImmutableSet`方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:07:14.870

该`Builder`模式更安全，因为 Builder 可以在将所有参数传递给构造函数之前验证所有参数。

您可能会`Preconditions`从 Google 找到这方面的便利。

更不用说，使用 Builder 可以非常简洁地构造复杂的对象。

我不会说遵循构建器模式的对象`immutable`与`JavaBean`. 这取决于您如何声明字段以及您公开哪些方法。

# android - 我在哪里可以手动下载android sdk？

> ID：13188545
> 
> 赞同：2
> 
> 时间：2012-11-02T02:38:53.337
> 
> 标签：android

通过“Android sdk manager”下载sdk时，我遇到了一些问题（我必须使用socks代理，但sdk manager只使用http代理）。所以我想知道是否可以从某个地方手动下载 sdk，然后将它们放回 sdk 目录中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T03:10:07.953

该网站提供了各个 API 和其他工具的链接，它们应该可以帮助您：

[http://www.hariadi.org/android/manual-download-of-android-sdk-components/](http://www.hariadi.org/android/manual-download-of-android-sdk-components/)

# javascript - 为什么我的函数是公开的？

> ID：13188546
> 
> 赞同：0
> 
> 时间：2012-11-02T02:39:09.530
> 
> 标签：javascript, scope, singleton, closures

几天前我问了一个类似的问题，但我想我还是做错了什么，所以这个问题更集中：

据我了解并根据[这本书](http://www.addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)，该函数`privateFunction`应该不能从`mySingleton`对象外部获得，`publicFunction`只能以这种方式调用：`mySingleton.publicFunction`.

但是 - 违反我的意愿和意图，privateFunction 在对象之外非常可用。

这是为什么？我究竟做错了什么？

```
 var mySingleton = new (function (window, document, undefined) {

            var privateFunction = function () {
                //code
            },

            mySingleton = {
                publicFunction: function () {
                    //code
                }
            };

        return mySingleton;
    })(window, document, undefined); 
```

编辑：我刚刚发现了问题。语法错误，多么丢脸。看看第 2 行的分号。我昨晚发帖时错过了这一行：

```
 var mySingleton = new (function (window, document, undefined) {
        var self = this;

        privateFunction = function () {
            //code
        },

        mySingleton = {
            publicFunction: function () {
                //code
            }
        }

        return mySingleton ;
    })(window, document, undefined); 
```

用逗号替换分号使私有方法“再次”私有。无论如何，看看这段代码，我希望这样的语法会导致语法错误，因为后面的逗号`privateFunction`- 我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:43:17.420

你见过这样的代码吗？

```
var toto = 'titi',
    titi = 'tata',
    tata = 'toto'; 
```

这是多项任务。这使我们不必`var`每次都重用关键字。但是，由于您没有使用`var`关键字，`privateMethod`因此实际上已泄漏到全局范围。那很糟。

我认为您正在寻找这种模式：

```
var mySingleton = function() {
    function privateMethod() {}

    return {
        publicMethod: function() {}
    };
}(); 
```

`window`和`document`废话`undefined`是不需要的。

# handle - NAudio - 无法跨 AppDomains 传递 GCHandle

> ID：13188549
> 
> 赞同：1
> 
> 时间：2012-11-02T02:39:39.700
> 
> 标签：handle, naudio

我的一个客户有一个长时间运行的过程，它使用 NAudio 定期在默认录音设备上录制传入的音频几个小时。它作为桌面程序运行，一次运行数天或数周。

今天他给我发了这个异常报告：

```
Cannot pass a GCHandle across AppDomains.
Parameter name: handle
System.ArgumentException
   at System.Runtime.InteropServices.GCHandle.InternalCheckDomain(IntPtr handle)
   at System.Runtime.InteropServices.GCHandle.FromIntPtr(IntPtr value)
   at NAudio.Wave.WaveIn.Callback(IntPtr waveInHandle, WaveMessage message, IntPtr userData, WaveHeader waveHeader, IntPtr reserved) in C:\Libraries\NAudio\naudio-5019c8f1c6fc\NAudio\Wave\WaveInputs\WaveIn.cs:line 132
   at NAudio.Wave.WaveWindow.WndProc(Message& m) in C:\Libraries\NAudio\naudio-5019c8f1c6fc\NAudio\Wave\MmeInterop\WaveWindow.cs:line 64
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

我做了一些谷歌搜索，但找不到任何明显的东西。是否有一个很好的补丁或修复程序不涉及静默捕获异常？

我正在使用 NAudio 的自制版本，其中包含一些调整，但没有任何内容会导致此错误。

# windows - 使用批处理文件复制命令提示符

> ID：13188550
> 
> 赞同：5
> 
> 时间：2012-11-02T02:40:13.333
> 
> 标签：windows, batch-file

我正在尝试使用批处理文件复制命令提示符。我当前的代码复制如下。

```
@echo off
title Command Prompt
:LOOP
set /p COMMAND="%CD%>"
title Command Prompt - %COMMAND%
call %COMMAND%
echo.
title Command Prompt
goto LOOP 
```

但是，我有一个问题。如果我正在调用一个程序（例如`gpedit.msc`），批处理文件会等到程序返回后再继续，此时正常的命令提示符会返回而不等待程序返回。

如何测试命令是否是程序，以便我可以使用该`start`命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:07:09.297

You can search the executable for `user32.dll`.

```
@echo off
title Command Prompt
:LOOP
    set /p COMMAND="%CD%>"
    title Command Prompt - %COMMAND%

    call :is_gui %COMMAND%
    if errorlevel 1 (
        call %COMMAND%
    ) else (
        start "" %COMMAND%
    )

    echo.
    title Command Prompt
    goto LOOP

:is_gui app_name
    set app_name=%~1
    set file_app=

    rem Get path of application
    if exist "%app_name%" (
        set file_app=%app_name%
    ) else (
        rem Lookup path of app
        for %%P in (%PATHEXT%) do (
          for %%I in (%1 %1%%P) do (
            if exist "%%~$PATH:I" (
              set file_app=%%~$PATH:I
              goto continue
            )
          )
        )
    )
    :continue
    if "%file_app%"=="" exit /b 1
    find /i "user32.dll" < "%file_app%" >nul 2>&1
    exit /b %errorlevel% 
```

# .htaccess - 阻止 htaccess 重定向某些文件类型？

> ID：13188555
> 
> 赞同：2
> 
> 时间：2012-11-02T02:40:41.970
> 
> 标签：.htaccess, mod-rewrite, sitemap, symlink, multiviews

我的 htaccess 完全按照我的意愿工作，只是它还重定向了我的站点地图文件。有谁知道可以更改或添加什么以使其不受任何 .xml 文件的影响，但对于其他任何文件都可以继续工作？

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite.com$
RewriteRule ^(.*)$ http://www.mysite.com/review/$1 [R=301,L]

Options -MultiViews +FollowSymlinks -Indexes

RewriteEngine on
RewriteRule ^([a-zA-Z0-9\.\-]+)$ review.php?site=$1 [L,QSA] 
```

基本上现在写它会显示 mysite.com/review/review.php?site=$1 的内容，当您访问 mysite.com/review/$1 时，我希望它继续这样工作，而不是 .xml 文件。

基本上，如果有人访问 mysite.com/review/sitemap.xml 它应该显示实际的站点地图，而不是 mysite.com/review/review.php?site=sitemap.xml 的内容

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:11:58.313

就在之前：

```
RewriteRule ^([a-zA-Z0-9\.\-]+)$ review.php?site=$1 [L,QSA] 
```

添加：

```
RewriteCond %{REQUEST_URI} !\.xml$ [NC] 
```

仅当 URI 不以 a 结尾`.xml`并且仅应用于路由到 的规则时，该条件才匹配`review.php`。

# silverlight - MediaElement 仅通过 xaml 播放

> ID：13188558
> 
> 赞同：1
> 
> 时间：2012-11-02T02:41:21.413
> 
> 标签：silverlight, windows-phone-7

我正在尝试在我的应用中播放背景音乐。最初我有这个：

`<Application.Resources> <MediaElement x:Key="AppSoundFile" Name="backgroundMusic" Source="track.mp3" AutoPlay="False" Volume="1" MediaEnded="LoopMusic"/> </Application.Resources>`

```
 private void PlayMusic()
    {
        backgroundMusic = new MediaElement();
        backgroundMusic = (MediaElement)Application.Current.Resources["AppSoundFile"];
        backgroundMusic.AutoPlay = true;
        backgroundMusic.Volume = 5;
        backgroundMusic.Play();

    } 
```

它工作正常。

然而，我的应用被拒绝了，因为我不允许用户选择自己的音乐。因为如果我把它放在 App.xaml 中，用户的音乐会自动停止，所以我将代码移到 App.xaml.cs 中，如下所示：

```
 private void PlayMusic()
    {
        backgroundMusic = new MediaElement();
        backgroundMusic.Source = new Uri("track.mp3", UriKind.RelativeOrAbsolute);
        backgroundMusic.AutoPlay = true;
        backgroundMusic.Volume = 5;
        backgroundMusic.Play();

    } 
```

现在我自己的音乐根本不会加载。我尝试将其设置为内容，返回资源，不同的复制选项，绝对地址，相对地址和大约 50 条其他网络建议我。

徒劳无功。

有没有其他人遇到过这种问题？如果是这样，您是如何解决的？非常感谢帮助。提前致谢。

说真的微软，为什么这么难？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:55:22.287

感谢库克兹。我已将 PlayMusic 从 app.xaml.cs 移至 MainPage.xaml.cs（因为 app.xaml 没有 LayoutRoot）。

```
 private void PlayMusic()
    {
        backgroundMusic = new MediaElement();
        backgroundMusic.Source = new Uri("track.mp3", UriKind.RelativeOrAbsolute);
        backgroundMusic.AutoPlay = true;
        backgroundMusic.Volume = 1;
        LayoutRoot.Children.Add(backgroundMusic);
        backgroundMusic.Play();

    } 
```

现在音乐正在正常工作……尽管有非常轻微的延迟。

# tsql - 带引号问题的动态查询

> ID：13188564
> 
> 赞同：0
> 
> 时间：2012-11-02T02:42:12.630
> 
> 标签：tsql, dynamicquery

我正在尝试编写一个动态查询，该查询产生与以下相同的结果，但用一个变量替换了固定的表名。

```
 SELECT *
    WHERE tableName = 'Table2A' 
```

工作正常，但

```
 DECLARE @tablename AS NVARCHAR(100)
    SET @tablename = N'Table2A'
    DECLARE @execquery AS NVARCHAR(MAX)
    SET @execquery = N'
       SELECT *
       WHERE tableName = ''' + QUOTENAME(@tablename) + N''''    

    EXECUTE sp_executesql @execquery 
```

不返回任何记录。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:32:25.267

除了您的 SQL 语句无效之外，QUOTENAME() 只是在提供的变量周围放置括号“[]”。将 EXECUTE 语句替换为 PRINT 语句，您将得到以下结果：

```
DECLARE @tablename AS NVARCHAR(100)
    SET @tablename = N'Table2A'
    DECLARE @execquery AS NVARCHAR(MAX)
    SET @execquery = N'
       SELECT *
       WHERE tableName = ''' + QUOTENAME(@tablename) + N''''    
PRINT @execquery
    --EXECUTE sp_executesql @execquery 
```

结果：

```
 SELECT *
   WHERE tableName = '[Table2A]' 
```

# qt - OSG +QT 切换全屏并返回

> ID：13188565
> 
> 赞同：4
> 
> 时间：2012-11-02T02:42:15.813
> 
> 标签：qt, fullscreen, openscenegraph

我在 Qframe 中集成了一个 osgQt::GLWidget 并在此处使用该模式：[http](http://trac.osgeo.org/ossim/browser/trunk/ossimPlanetQt/src/gui/ossimPlanetQtMainWindow.cpp) ://trac.osgeo.org/ossim/browser/trunk/ossimPlanetQt/src/gui/ossimPlanetQtMainWindow.cpp 在全屏模式之间切换然后回来。基本上消耗小部件中的击键并从那里设置全屏。

我在 osgViewer::Viewer - osgViewer::WindowSizeHandler 中也有一个事件使用者，它处理查看器大小切换。

有没有更好的模式来实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:37:58.637

基本上，您所做的（或示例中所做的）似乎很好。（请注意，我假设您指的是[`void ossimPlanetQtMainWindow::on_viewToggleFullScreen_triggered(bool )`](http://trac.osgeo.org/ossim/browser/trunk/ossimPlanetQt/src/gui/ossimPlanetQtMainWindow.cpp#L889)）

但是，在示例中， QGLWidget`theGLWidget`在`tabWidget`和之间重新设置了父级`theFullScreenFrame`。在 Windows 下，重新设置 a`QGLWidget`将导致重新创建 QGLContext。（参见[QGLWidget 文档](http://qt-project.org/doc/qt-4.8/QGLWidget.html "QGlWidget 文档")

文档建议的解决方法是将 GL 小部件包装在一个虚拟小部件（一个简单的`QWidget`）中，并重新设置它而不是 GL 小部件。

以我的经验，这很好用。

# linux - Linux 上的 Qt 4.8.3 GUI 应用程序看起来很旧并且与设计器预览不匹配

> ID：13188567
> 
> 赞同：5
> 
> 时间：2012-11-02T02:42:43.280
> 
> 标签：linux, qt, user-interface, qt4.8

我在 Fedora 17 和 Ubuntu 12.04 上安装了 Qt 4.8.3 和 Qt Creator 2.5.2。当我创建一个 GUI 应用程序时，视觉元素在 Qt Designer 预览窗口中看起来不错。但是，当我运行应用程序时，生成的应用程序的样式较旧，与操作系统不一致，并且与 Qt 设计器中的预览不匹配。

在下面的两个图像中，顶部是来自 Qt Designer 的预览，底部是编译后的应用程序。

*   Qt 是通过编译位于[http://qt-project.org/downloads的源代码安装的](http://qt-project.org/downloads)
*   在安装的 ./configure 阶段，选择了“开源”版本。
*   无论应用程序是从操作系统运行还是从 IDE 启动，都会出现此问题

有没有办法让编译好的 GUI 应用程序正确显示？

**软呢帽：**

*   上半部分 = Qt Designer 预览版（需要）
*   下半部分 = 生成的应用程序

![在此处输入图像描述](../Images/3c047eb16cf1ef0347f1ac0e2465712b.png)

**Ubuntu：**

*   上半部分 = Qt Designer 预览版（需要）
*   下半部分 = 生成的应用程序

![在此处输入图像描述](../Images/34da1b436aca24b116757b536392f212.png)

**附录：** 这是一个显示 4.8.1 编译应用程序的图像（它应该是什么样子） ![在此处输入图像描述](../Images/fda9701e4f696dce6044a337e1e6783f.png)

此外，如果我在同一台计算机上同时安装 4.8.1 和 4.8.3，即使 4.8.1 编译的应用程序也不会正确显示： ![在此处输入图像描述](../Images/5a3060c5f8a0b419b48827354695ffa2.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:09:58.140

问题解决了。

安装 Qt 源代码时，说明忘记提到必须在 ./configure 步骤之前安装开发人员库列表。这个列表可以在这里找到：http: [//qt-project.org/wiki/Build_Qt_For_Linux](http://qt-project.org/wiki/Build_Qt_For_Linux)

此外，由于以下错误，我在编译 QtWebkit 时遇到了问题：

> g++：错误：无法识别的命令行选项'-fuse-ld=gold'</p>

要解决这个新问题，可以采用以下两种解决方案之一：

*   在配置步骤中，使用以下`-no-webkit`选项运行配置：`./configure -no-webkit`

或者

*   `QMAKE_LFLAGS+=-fuse-ls-gold`从文件中删除该行`qt-everywhere.../src/3rdparty/webkit/Source/common.pri`

# typescript - TypeScript (d.ts) 可以用类型化参数描述匿名方法吗？

> ID：13188568
> 
> 赞同：0
> 
> 时间：2012-11-02T02:42:51.663
> 
> 标签：typescript

为什么导出函数定义（tree.d.ts 文件）中不存在 ITreeArgs？

```
interface ITreeArgs {
    mayHaveChildren: bool;
}

export function(args: ITreeArgs); <- The name 'ITreeArgs' does not exist in the current scope 
```

这些都有效：

```
export function c(args: ITreeArgs); <- adding name works!
export function (args); <- removing type works! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:44:07.500

我这样做（在 dojo.d.ts 文件中）：

```
module "dojo/on" {
    function (target: Element, type: string, listener: (e: Event) => void);
} 
```

然后我像这样导入它：

```
import on = module("dojo/on"); 
```

并将此模块用作纯函数，如下所示：

```
on(this.goButton, "click", this.ongo.bind(this)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:15:21.343

你需要给你的函数一个名字，让它成为有效的语法——这是真正的错误。

`ITreeArgs`可作为添加名称显示。

```
interface ITreeArgs {
    mayHaveChildren: bool;
}

export function functionName(args: ITreeArgs) {
    //function body
} 
```

我不确定您想要省略函数名称的原因是什么？

更新：要在接口上声明构造函数，请使用：

```
interface ITreeArgs {
    new (myArg: string);
} 
```

要在定义文件中的类上声明构造函数，您可以使用：

```
declare class MyClass {
     constructor(myArg: ITreeArgs);
} 
```

不能在模块上声明构造函数。

在语言规范中，它说您可以`declare`在文件中省略关键字`.d.ts`- 但实际上我发现如果有人没有发现文件扩展名，它会让事情变得非常清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T22:41:18.167

名称要求仅用于导出，因为 Typescript 将添加代码

```
namespace.function_name = ... 
```

所以这不清楚为什么有人想匿名导出一些东西:)

但例如，如果您想从另一个函数返回类型化匿名函数，您可以这样做。

```
function foo() {
    return function(bar:string):string { return bar; }
} 
```

# excel - Excel：是否有返回满足匹配条件的范围的函数？

> ID：13188569
> 
> 赞同：4
> 
> 时间：2012-11-02T02:42:54.090
> 
> 标签：excel

给定一个值与后续行（在同一列上）进行比较，并将范围返回到值第一次更改的行。

```
Example:
   A
1  cat
2  cat
3  cat
4  dog
5  cat 
```

要返回的范围是 A1:A3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:04:43.847

假设您在 cell 中有 cat `c1`，以下公式将返回第一个连续匹配范围。用`ctrl`+ `shift`+输入`enter`

`=COUNTIF(OFFSET(A1:A5,MATCH(C1,A1:A5,0)-1,0,MATCH(TRUE,OFFSET(A1:A5,MATCH(C1,A1:A5,0),0)<>C1,0)),"cat")`

如果您的数据始终从 A1 开始，并且您希望整个范围与第一个值匹配，一直到下一个值，请使用以下数组公式（使用`ctrl`+ `shift`+输入`enter`）：

```
=OFFSET($A$1,0,0,MATCH(TRUE,A:A<>A1,0)-1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:54:07.910

这用作数组公式。按公式栏中的`ctrl`+ `shift`+`enter`对其进行评估。我已经测试过它可以处理这个非常简单的案例。我无法说出更复杂的情况：

```
=INDIRECT("A1:A" & MAX(ROW(A1:A5)*(A1:A5="cat")*(A2:A6<>"cat"))) 
```

编辑：如果您真的希望返回范围而不是值，则只需删除 INDIRECT 但将其他所有内容保留在其中。

# wpf - 在 MVVM 中以对话框形式打开窗口

> ID：13188570
> 
> 赞同：1
> 
> 时间：2012-11-02T02:42:55.823
> 
> 标签：wpf, mvvm, dialog

嗨团队，
我正在关注 msdn 的示例 MVVM WPF 应用程序。一切似乎都很好，并且是一个很好的示例，但我一直在寻找从菜单打开一个子窗口作为对话框 - >打开并认为文本输入将输入控件分配给我的子窗口选项卡和用户控件中的文本控件客户添加，但找不到解决方案。[http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)源链接任何对此的帮助都是 gr8 帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:55:18.440

```
Window1 win1 = new Window1();
        win1.ShowDialog(); 
```

Window1 是子窗口。这是一种使子窗口充当对话框的方法。如果您想要从父窗口 UI 向其 ViewModel 触发命令，则此 ViewModel 将消息发送到其 .xaml.cs 文件，然后将子窗口作为对话框打开，然后通过 MVVM Light API。它们提供了从 ViewModel 到 View 的通信方式。仅当您想遵循严格的 MVVM 模式时才通过此操作，否则您可以直接从 UI 触发事件。我希望这会给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:07:38.347

[这](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)是与 mvvm 进行对话的简单方法。

您只需在视图模型中调用：

```
var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here", dialogwindowVM); 
```

# facebook - 错误：客户端令牌不能用于此 API

> ID：13188571
> 
> 赞同：3
> 
> 时间：2012-11-02T02:43:05.700
> 
> 标签：facebook, oauth, facebook-opengraph, facebook-oauth, facebook-timeline

我正在尝试使用应用程序访问令牌而不是用户的访问令牌发布 Facebook 时间线操作（这样我就不必处理过期会话），如下所述：

[https://developers.facebook.com/docs/opengraph/using-app-tokens/](https://developers.facebook.com/docs/opengraph/using-app-tokens/)

这工作正常，但几天前停止工作，现在给我这个错误：

> 客户端令牌不能用于此 API

关于为什么会发生这种情况以及如何解决它的任何想法？

# macos - 如何使用 Applescript 创建文件夹（带有子文件夹）

> ID：13188572
> 
> 赞同：1
> 
> 时间：2012-11-02T02:43:09.897
> 
> 标签：macos, applescript, finder

Filemaker 可以使用 AppleScript。

在 Filemaker 中，我想创建一个包含 6 个子文件夹的新文件夹（名称为 FileMaker 字段）。

在 Applescript 方面，我是一个完全的菜鸟。

到目前为止，这是我的脚本：

```
tell application "FileMaker Pro Advanced"
set folder_name to cell "FolderName" of current record
end tell
tell application "Finder"
     activate
     make new folder at folder "Desktop" of folder "dick" of folder "Users" of startup disk with properties {name:folder_name}
end tell
tell application "Finder"
     activate
        make new folder at folder {name:folder_name} of folder "Desktop" of folder "dick" of folder "Users" of startup disk with properties {name:"subfolder"}
end tell 
```

我的问题是：创建“Subfolder1”

我的错误是什么？

非常感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:51:38.123

当您创建一个新文件夹时，您可以定义各种属性，但在引用文件夹时只需使用名称，例如：

```
make new folder at folder folder_name of folder "Desktop" of folder "dick" of folder "Users" of startup disk with properties {name:"subfolder"} 
```

请注意，创建新文件夹返回的结果是对该文件夹的引用，因此您还可以执行以下操作：

```
tell application "Finder"

  set newFolder to (make new folder at folder "Desktop" of folder "dick" of folder "Users" of startup disk with properties {name:folder_name})

  make new folder at newFolder with properties {name:"subfolder"}

end tell 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T02:36:34.803

这是另一种方法：

```
set myPath to POSIX path of ((path to desktop as text) & folder_name & ":subfolder")
do shell script "mkdir -p " & myPath 
```

# ruby-on-rails - 是否有一种内置方法可以重命名整个脚手架？

> ID：13188573
> 
> 赞同：13
> 
> 时间：2012-11-02T02:43:15.840
> 
> 标签：ruby-on-rails

我正在使用 Rails 3.2，并从脚手架开始并从中构建，但我意识到我需要重命名整个脚手架（模型、视图、控制器`db:migrate`等）。有没有内置的方法可以做到这一点，还是我应该手动完成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T03:10:48.967

我不认为有任何东西`rails`可以在创建后重命名`models/controllers/views/tests`等的名称 - 无论是否作为脚手架的一部分。

您将不得不手动更改它。

如果它是您刚刚开始使用的全新应用程序，则删除整个目录/删除数据库并重新开始可能会更容易。

如果没有，您将不得不检查脚手架生成/修改的文件，并手动修改它们。

确保您要么 drop_and_recreate 相关表，要么添加迁移以重命名表。请参阅[如何编写迁移以在 Rails 中重命名 ActiveRecord 模型及其表？](https://stackoverflow.com/questions/471416/how-do-you-write-a-migration-to-rename-an-activerecord-model-and-its-table-in-ra)一些相关的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-19T07:48:39.857

我认为没有开箱即用的方法来重命名脚手架生成的文件。你要做的是创建一个新的脚手架并将你的代码从旧的复制到新的。从工厂、模型、控制器及其各自的规范文件中复制内容到新的脚手架。然后用命令移除旧脚手架

```
rspec d scaffold <Model Name> 
```

并且您必须创建一个新的迁移以从数据库中删除该旧表。然后运行你的迁移。

# java - String.replaceAll() 和正则表达式

> ID：13188575
> 
> 赞同：1
> 
> 时间：2012-11-02T02:43:21.253
> 
> 标签：java, regex

我正在尝试搜索一堆文本并将句子中的第一个单词替换为该单词的粗体版本。我认为适当的代码不起作用。我究竟做错了什么？

```
String s;
s.replaceAll("^(.+)\\B", "<b>\\1</b>") 
```

我想知道这是否是正确的方法，因为我的字符串是一个 ling HTML 字符串，每一行都以`<br>`.. 结尾，所以实际上只有一个“行”。鉴于这种见解，不确定如何实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T02:48:18.780

字符串是不可变的！！

```
s = s.replaceAll("^(.+)\\B", "<b>\\1</b>"); 
```

* * *

哦，你应该使用`$0`来指代匹配而不是`\\1`.

# ruby-on-rails - 如何在以下 OmniAuth 登录方法中绕过密码验证？

> ID：13188576
> 
> 赞同：6
> 
> 时间：2012-11-02T02:43:21.010
> 
> 标签：ruby-on-rails, passwords, omniauth

我对我的`User`模型进行了一些密码验证，以及`create_with_omniauth`从用户的 Facebook 帐户获取信息的方法：

**用户.rb：**

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation

  has_secure_password

  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  def self.create_with_omniauth(auth)
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"]
      user.email = auth["info"]["email"]
    end
  end
end 
```

现在当我点击`link_to "Sign in with Facebook, "auth/facebook"`我得到这个错误：

> 验证失败：密码不能为空，密码不能为空，密码太短（最少6个字符），密码确认不能为空

由于`User`模型中的这两行：

```
 validates :password, presence: true, length: { minimum: 6 }
 validates :password_confirmation, presence: true 
```

当用户尝试使用 OmniAuth 登录方法登录时，如何绕过该验证？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T05:15:57.573

这可以通过 2 种方式完成。

1）只需在密码字段中保存一个随机安全生成的数字（更好，因为它很容易并且保持一致性）我个人应用了这种方法，因为通过社交网站签名的用户不会通过网站登录登录。

2) 或者，使用`attr_accesor`

```
 :login_social (will be treated as boolean  
 validates :password, presence: true, length: { minimum: 6 }, :if => !login_social?
 validates :password_confirmation, presence: true, :if => :login_social? 
```

每当通过任何社交网站登录时，只需将此字段设为 true。我遵循第二种方法，然后转向第一种解决方案，因为它更好。

我个人建议你选择第一种方法

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-18T06:36:33.873

正如@Aayush 建议创建一个字段来检测社交登录，那么您可以覆盖此设计方法，而不是创建自己的验证：

```
 def password_required?
     self.social_login? ? false : super
 end 
```

在您的模型中，例如`User`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T19:25:34.980

我对此的解决方案是为omniauth 用户添加一个简单的密码，如果Rails 检测到他们是omniauth 用户，则无法使用这些密码登录。这简化了我的用户模型，因为我仍然可以使用 has_secure_password，并且如果他们使用社交登录名，密码就会变得无关紧要（并且无法使用）。

我的用户数据库表有以下内容：

*   姓名
*   电子邮件
*   密码
*   确认密码
*   uid
*   提供者

session_controller.rb

```
def create
  auth = request.env["omniauth.auth"]
  if auth
    sign_in_with_auth(auth)
  else
    sign_in_with_password
  end
end 
```

session_helper.rb

```
def sign_in_with_auth(auth)
  user = User.find_by(uid: auth['uid'])
  if user
    #sign in the user
  else
    #create a user with any password.
    user = User.create! do |user|
      ...
      user.password = 'bojanglesicedtea'
      user.password_confirmation = 'bojanglesicedtea'
      user.provider = auth['provider']
    end
    #then sign in the user
  end
end

def sign_in_with_password
  user = User.find_by(email: params[:sessions][:email].downcase)
  if user == user.authenticate(params[:sessions][:password]) && user.provider.nil?
    #sign in the user
    #user.provider.nil? will be true only if it is not a social login user
  else
    #direct to error notification
  end
end 
```

# jquery - jQuery 背景滑块功能

> ID：13188583
> 
> 赞同：1
> 
> 时间：2012-11-02T02:44:14.637
> 
> 标签：jquery, html, css

我正在尝试使背景滑块脚本工作，但它只是不工作。导航图标不是滑动的背景，而是以一种奇怪的方式滑动，即使我希望它们静止。起初我只是想从滑块导航中删除“1,2,3”，但现在滑块根本不起作用。

它的CSS代码是：

```
 #pictureSlider { }
  #pictureSlider div { height:100%; width:100%; position:absolute; z-index:-999; }

  /* NAVIGATION BOX */
  .navbox { width:150px; height:20px; position:absolute; left:0px; top:50px; }
  .navbox ul {position:absolute; right:10px; top:10px; }
  .navbox ul li { list-style: none; float: left; cursor:pointer; }
  .navbox ul li a { 
display:block; float:left; width:23px; height:25px; text-align:center;
background-image:url("../images/slide-circle-controls.png"); margin-left:5px;
text-decoration:none;
   }
  .navbox ul li a:hover { background-position:bottom; color:#000; } 

  .cam { }
  .clouds {  }
  .key { } 
```

非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:35:05.190

您可以将字体大小设置为 0px，某些浏览器接受该值，并且 1、2、3 值将不可见

您还可以将字体大小设置为 1px 并将颜色设置为黑色，这样按钮的黑色边框将隐藏数字

```
navbox ul li a { 
  display:block;
  float:left;
  width:23px;
  height:25px;
  text-align:center;
  background-image:url("../images/slide-circle-controls.png");
  margin-left:5px;
  text-decoration:none;
  font-size: 1px;
  color: #000;
} 
```

但最好的办法是修改脚本以不放置索引值，检查 script.js 上的第 59 行：

```
.html(i) 
```

用类似的东西替换它

```
.html('') 
```

数字将消失

如果您的滑块在修改后不起作用，只需撤消这些修改：P

# tree - 方案 2 霍夫曼 BST 的最小值

> ID：13188584
> 
> 赞同：0
> 
> 时间：2012-11-02T02:44:46.057
> 
> 标签：tree, scheme, racket, binary-search-tree, huffman-code

好吧，假设我得到了一个包含字母的对列表，以及它的频率 - 或它在文本中出现的次数。ex '((#\a . 4) (#\b . 2) (#\c . 9)) 我如何找到两个最低频率，以便将它们组合成一棵树？是否有某种功能可以帮助我找到这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:53:36.840

看一下 SICP 书中的第 2.3.4 节[，](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-16.html#%_sec_2.3.4)[在](http://mitpress.mit.edu/sicp/full-text/book/book.html)那里你会找到关于如何从头开始实现 Huffman 编码树的完整解释。

关于这个问题，这是在具有指定格式的列表中找到两个最低频率的一种可能方法：

```
(define frequencies '((#\a . 4) (#\b . 2) (#\c . 9)))

(take
 (sort frequencies
       (lambda (x y)
         (< (cdr x) (cdr y))))
 2)

=> '((#\b . 2) (#\a . 4)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:23:02.557

仅使用频率的未排序列表表示可能不是解决此问题的正确方法。原因如下：反复寻找最小值是计算霍夫曼编码树的主要操作。当您重复此最小查找操作时，您不想继续搜索整个列表。

作为对该问题的第一次攻击：考虑将排序作为一种方法，使找到最小值成为一种快速操作。

但是，对于这个特定问题，您可能应该考虑使用二进制[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)，它是一种表示集合的数据结构。它有一个非常酷的特性，即从堆中取出最小元素非常便宜。在 Huffman 树的构建过程中，您最终会将新元素添加到您的收藏中。您不想一遍又一遍地使用列表。

Racket 在其标准库中的[数据/堆](http://docs.racket-lang.org/data/Binary_Heaps.html)集合中实现了二进制堆。将其应用于 Huffman 树构造相当简单。下面用堆实现了基本算法：

```
(require data/heap)

;; ...

;; make-huffman-tree: (listof leaf) -> node
(define (make-huffman-tree leaves)
  (define a-heap (make-heap node<=?))
  (heap-add-all! a-heap leaves)
  (for ([i (in-range (sub1 (length leaves)))])
    (define min-1 (heap-min a-heap))
    (heap-remove-min! a-heap)
    (define min-2 (heap-min a-heap))
    (heap-remove-min! a-heap)
    (heap-add! a-heap (merge (+ (frequency min-1) (frequency min-2))
                             min-1 min-2)))
  (heap-min a-heap)) 
```

其中自由变量`node<=?`旨在知道如何按频率进行比较，并`merge`旨在将两件事放在一起。

您可以在 中看到 Huffman 树构造的核心`make-huffman-tree`：使用堆提取两个最小元素，将它们合并在一起，然后将结果放回堆中。重复直到我们只剩下一棵树。

# pdf - 将 MathematicalPI 符号名称转换为 Unicode

> ID：13188587
> 
> 赞同：9
> 
> 时间：2012-11-02T02:44:57.317
> 
> 标签：pdf, unicode

我正在处理 PDF 文件，并希望尽可能将字符转换为 Unicode。MathematicalPI 系列字符集似乎使用它们自己的符号名称（例如“H11001”）。通过探索，我构建了一个表（用于 MathematicalPI-One），例如：

```
 <chars>
        <char charname="H11001" codepoint16="0X2B" codepoint="43" unicodeName="PLUS"/>
        <char charname="H11002" codepoint16="0x2D" codepoint="45" unicodeName="MINUS"/>
        <char charname="H11003" codepoint16="0XD7" codepoint="215" unicodeName="MULTIPLICATION SIGN"/> 
         <char charname="H11005" codepoint16="0X3D" codepoint="61" unicodeName="EQUALS"/>
    </char> 
```

任何人都可以将我指向这样的现有翻译表（理想情况下适用于所有 MathematicalPI 集）。[我不想要字形的图形显示，因为这意味着每个字形都必须作为 Unicode 等价物进行查找。]

似乎还有一个类似的符号资源，其中字符名的格式为 C223（用于版权）。任何有关这方面的信息将不胜感激。

更新：我需要的东西远远超出@user1808924 的答案——我已经通过自己的（部分）翻译表编译了，所以当然可以构建一个。可以下载并显示 MathematicalPI 中的字形列表（可能有数百个），并通过 Unicode 规范进行等价处理（对于大多数人，我认为有明确的等价关系）。一个令人满意的答案要么包括一个包含数百个等价物的表格，要么包括一个明确的声明，表明这将违反字体创建者的版权。

更新：在@minopret 和@Miguel 之间当然可以构造一个映射。MathPi 集合定义明确 - 几百个 - shapecatcher 可以很容易地找到最好的图形符号。映射不会是确定的（即带有 Adob​​e 的标记），但它是值得的。而且我怀疑在某些情况下，两个不同的字形本质上是相同的，因此视觉映射将不起作用——例如，等边三角形增量还是希腊大写字母 DELTA？

我怀疑我个人是否会完成一张完整的表格——我不知道某些符号是什么意思。但我希望制作一个用于科学技术医学 (STM) 出版的子集。

@user1808924 我注意到您在 SO 的第一天就回答了这个问题。对于有明确答案但很难找到的难题，通常会提供赏金问题（如本例所示）。除非您具有该领域的专业知识，否则提供意见或猜测通常没有用处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:42:11.357

我认为根本没有这样的翻译表。

在我看来，`MathematicalPI`字体系列是一种合成字体，它是通过从一些更大的未知集合中选择元素子集来*临时创建的。*字体家族存在的*理由*`MathematicalPI`似乎是简单代数运算符（加、减、乘、除）和等号的表示。字符名（即。`H1100X`）似乎是工件，因为它们没有在代码点值之后排序（例如，等号是最后一个）。

通过查看可用数据，我可以建议缺少的`H11004`字符名应该对应于除法运算符。但是，无法预测它是否应该由 Unicode 的“solidus”字符（即。`U+002F`）、“除号”字符（即。`U+00F7`）或其他东西来表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T09:37:27.230

这是我在[Adob​​e 论坛](http://forums.adobe.com/message/4839631)网站上发布的内容：

我可能是错的，但我认为没有官方对应表。

使用六种 Type 1 字体和由它们制成的 OpenType 字体，我组装了两个显示所有字形的 PDF。旁边是字形名称（用于 Type 1 字体）和 Unicode 值（用于 OpenType 字体）。如果您交叉引用这两个 PDF，您应该能够组装您正在寻找的相关列表。

[数学圆周率](https://files.acrobat.com/a/preview/b445ea2f-fcbb-44af-a798-fc854d8dd9b5)

希望这可以帮助。

米格尔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T21:34:03.553

以下是 Adob​​e 的 Miguel Sousa 在其[排版论坛消息](http://forums.adobe.com/message/4840079)中提供的最佳信息：

*   [数学派 1-6 PDF](https://workspaces.acrobat.com/?d=dPPRA3pgqa5RAhpZ92QVzQ) /[数学派 1-6 InDesign IDML](https://workspaces.acrobat.com/?d=urv4Qy5WFEpQ5sCUmfmGZg)
*   [数学圆周率标准 PDF](https://workspaces.acrobat.com/?d=Meg4v9%2aJudACTW9WlMMXHw) /[数学圆周率标准 IDML](https://workspaces.acrobat.com/?d=6nd8SkKj0m0ku4uh0ZqFuQ)

对于它的价值并总结我在对此答案的评论中添加的信息，这是我在此之前和除此之外能够找到的内容。

[Michael Sharpe， CTAN](http://ctan.org)包“mathalfa”的创建者和 UCSD 数学成员，在[这个存档文件](http://math.ucsd.edu/~msharpe/mathpiTDS.zip)中有数学 Pi 的 TeX 定义。我成功地猜到了 me.com 上已过时的记录位置已移至他的大学网站。“.vf”文件将数学 Pi 的字符映射到 TeX 数学代码点。它们是二进制的。映射数据是使用工具“vftovp”转储到可读文本的一部分，该工具是 TeX 发行版的一部分。执行该转储后，我们发现映射的字符是：

```
mathpibb: 'hyphen-minus' 0-9 A-Z a-z
mathpical: percent 'hyphen-minus' A-Z
mathpifrak: 'hyphen-minus' 0-9 A-Z a-z
mh2s: A-Z 
```

这样就解释了包名称“mathalfa”。他只承担了使用字母和数字的任务，几乎没有其他任务。我们必须查看上面的文件以了解符号的映射。

我认为 MathPi 的某些部分，例如 MathPi 1 的希腊字母，使用与 Adob​​e Symbol 相同的编码，此处记录：http: [//unicode.org/Public/MAPPINGS/VENDORS/ADOBE/symbol.txt](http://unicode.org/Public/MAPPINGS/VENDORS/ADOBE/symbol.txt)

尝试将符号映射到自己的 Unicode 时，找到 Unicode 点的一个好方法是在屏幕上绘制字形：http: [//shapecatcher.com](http://shapecatcher.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T22:00:12.767

FWIW 我当前的映射表（通过阅读使用 MathPI 创建的文档，是：

```
<codePoint name="H9251" unicode="U+03B1" unicodeName="GREEK LOWERCASE LETTER ALPHA"/>
<codePoint name="H9252" unicode="U+03B2" unicodeName="GREEK LOWERCASE LETTER BETA"/>
<codePoint name="H9253" unicode="U+03B3" unicodeName="GREEK SMALL LETTER GAMMA"/>
<codePoint name="H9254" unicode="U+03B4" unicodeName="GREEK SMALL LETTER DELTA"/>
<codePoint name="H9255" unicode="U+03B5" unicodeName="GREEK SMALL LETTER EPSILON"/>
<codePoint name="H9256" unicode="U+03B6" unicodeName="GREEK SMALL LETTER ZETA"/>
<codePoint name="H9257" unicode="U+03B7" unicodeName="GREEK SMALL LETTER ETA"/>
<codePoint name="H9258" unicode="U+03B8" unicodeName="GREEK SMALL LETTER THETA"/>
<codePoint name="H9259" unicode="U+03B9" unicodeName="GREEK SMALL LETTER IOTA"/>
<codePoint name="H9260" unicode="U+03BA" unicodeName="GREEK SMALL LETTER KAPPA"/>
<codePoint name="H9261" unicode="U+03BB" unicodeName="GREEK SMALL LETTER LAMBDA"/>
<codePoint name="H9262" unicode="U+03BC" unicodeName="GREEK LOWERCASE LETTER MU"/>

<codePoint name="H11001" unicode="U+002B" decimal="43" unicodeName="PLUS"/>
<codePoint name="H11002" unicode="U+002D" decimal="45" unicodeName="MINUS"/>
<codePoint name="H11003" unicode="U+00D7" decimal="215" unicodeName="MULTIPLICATION SIGN"/> 
<codePoint name="H11005" unicode="U+003D" decimal="61" unicodeName="EQUALS"/> 
<codePoint name="H11011" unicode="U+007E" decimal="126" unicodeName="TILDE"/> 
<codePoint name="H11021" unicode="U+003C" decimal="60" unicodeName="LESS" htmlName="lt"/> 
<codePoint name="H11022" unicode="U+003E" decimal="62" unicodeName="" htmlName="gt"/> 
<codePoint name="H11032" unicode="U+0027" decimal="39" unicodeName="APOSTROPHE" htmlName="apos"/> 
<codePoint name="H11034" unicode="U+00B0" decimal="176" unicodeName="DEGREE SIGN" htmlName="deg"/> 

<codePoint name="H11554" unicode="U+00B7" decimal="183" unicodeName="MIDDLE DOT"/> 
```

# php - 如何在 yii 活动记录的 with 子句中添加条件？

> ID：13188591
> 
> 赞同：0
> 
> 时间：2012-11-02T02:45:30.410
> 
> 标签：php, yii

我的标准中有一个 with 子句，像这样

```
$criteria2->with = array('subcat','adimages'); 
```

但我实际上需要让这个子猫是独一无二的，但如果我要添加这样的条件

```
$criteria2 = new CDbCriteria();
$criteria2->select = '"t".USERID, "t".ADID ,"t".ADTYPE, "t".ADTITLE, "t".ADDESC, "t".PAGEVIEW, "t".DISPPUBLISHDATE,"t".SUBCATID';
$criteria2->addCondition("USERID IN (".implode(',',$uniqueuser).")");
$criteria2->addCondition("ADID IN (".implode(',',$uniquead).")");
//  $criteria2->addCondition("SUBCATID IN(".implode(',',$uniquesubcat).")");
//  $criteria2->compare("\"t\".SUBCATID", $this->SUBCATID);
$criteria2->addCondition('DISPPUBLISHDATE >= CURRENT_DATE - 3 AND STATUS = 1
        AND EXPIRYDATE >= CURRENT_DATE AND USERID IS NOT NULL');
$criteria2->addCondition('EXISTS  (select 1 FROM {{ADIMAGES}} WHERE {{ADIMAGES}}.ADID = "t".ADID)');
$criteria2->order = '"t".PAGEVIEW DESC,"t".PUBLISHDATE DESC';
$criteria2->limit = 4;
$criteria2->addCondition("\"subcat\".SUBCATID IN(".implode(',',$uniquesubcat).")");     
$criteria2->with = array('subcat','adimages');
$result2 = $this->findAll($criteria2);
return $result2; 
```

收到定义不明确的列的错误...我如何将该子目录关系设置为唯一的

```
$uniquesubcat arrray ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:17:20.350

尝试像这样设置表别名

```
$criteria2 = new CDbCriteria();
// SELECT
$criteria2->select = 't.USERID, t.ADID, t.ADTYPE, t.ADTITLE, t.ADDESC, t.PAGEVIEW, t.DISPPUBLISHDATE, subcat.SUBCATID';
// JOIN
$criteria2->with = array('subcat','adimages');
// WHERE
$criteria2->compare('t.STATUS', 1);
$criteria2->addCondition('t.DISPPUBLISHDATE >= CURRENT_DATE - 3');
$criteria2->addCondition('t.EXPIRYDATE >= CURRENT_DATE');
$criteria2->addCondition('t.USERID IS NOT NULL');
$criteria2->addCondition('EXISTS  (select 1 FROM {{ADIMAGES}} as ADIMAGES WHERE ADIMAGES.ADID = t.ADID)');

$criteria2->addInCondition('t.USERID', $uniqueuser);
$criteria2->addInCondition('t.ADID', $uniquead);
$criteria2->addInCondition('subcat.SUBCATID', $uniquesubcat);     
// ORDER
$criteria2->order = 't.PAGEVIEW DESC, t.PUBLISHDATE DESC';
// LIMIT
$criteria2->limit = 4;

$result2 = $this->findAll($criteria2);
return $result2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:13:28.777

我在这里看到您正在尝试为 CActiveRecord 构建查询条件，但我认为您应该记住 CDbCriteria->with 用于***Eager Loading***，这意味着您将获得一个 CActiveRecord 对象，包括相关的 CActiveRecord(s)由 CDbCriteria->with 中的关系名称指定。

因此，如果您正在寻找一个子猫并且急切地加载了所有子猫，您应该过滤它。

1.  如果它是一个数组，你可以迭代 $models->subcat。
2.  您可以使用 CDbCriteria 的连接条件来替换 with 条件。

我更喜欢第二种选择。

```
$criteria2->join = "LEFT JOIN subcat s ON (s.SUBCATID = t.SUBCATID)" 
```

所以，你可以改变这个：

```
$criteria2->addInCondition('subcat.SUBCATID', $uniquesubcat); 
```

为了

```
$criteria2->addInCondition('s.SUBCATID', $uniquesubcat); 
```

总之，您可以使用[CDbCriteria 的 join 属性](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#join-detail)来提供`subcat`别名并消除查询的歧义。

# c++ - 是否可以在融合地图中嵌套融合地图？

> ID：13188593
> 
> 赞同：3
> 
> 时间：2012-11-02T02:45:34.440
> 
> 标签：c++, boost, boost-fusion

我是新来的融合。是否可以在融合地图中嵌套融合地图？在下面的示例中，我如何编写代码以解析为 B？

```
#include <boost/asio.hpp>
#include <boost/fusion/container/map.hpp>
#include <boost/unordered_map.hpp>

struct A 
{
};

struct B
{
};

int main()
{
    boost::fusion::map<
        boost::fusion::pair<
            A, 
            boost::fusion::map<boost::fusion::pair<unsigned int, B>>
        >
    > map_;

    B b = boost::fusion::at_key<unsigned int>((boost::fusion::at_key<A>(map_)); //compile error
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:53:38.907

除了语法错误（一个额外的括号）之外，您只是缺少一些`#include`s. 这对我来说很好：

```
#include <boost/fusion/include/at_key.hpp>
#include <boost/fusion/include/map.hpp>
#include <boost/fusion/include/pair.hpp>

struct A { };
struct B { };

int main()
{
    boost::fusion::map<
        boost::fusion::pair<
            A, 
            boost::fusion::map<boost::fusion::pair<unsigned int, B>>
        >
    > map_;

    B b = boost::fusion::at_key<unsigned int>(boost::fusion::at_key<A>(map_));
} 
```

`[**Online Demo**](http://coliru.stacked-crooked.com/a/036baf876fc57c98)`

# android - 全屏图像意图，没有删除选项

> ID：13188594
> 
> 赞同：0
> 
> 时间：2012-11-02T02:45:39.630
> 
> 标签：android

目前我正在使用以下代码以全屏意图显示位图：

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(uri, "image/png");
startActivity(intent); 
```

我遇到的问题是它在某些设备上打开了一个画廊，而我只想让用户查看图像，仅此而已。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:57:57.913

详细说明我关于仅使用 ImageView 的评论：

```
ImageView v = new ImageView(this);
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
v.setLayoutParams(layoutParams);

getContentView().addView(v); 
```

或者类似的东西。

# oracle11g - 代码中的 ORA-03113。此外，警报文件中的 TNS-12535 和 ORA-03137

> ID：13188596
> 
> 赞同：4
> 
> 时间：2012-11-02T02:45:41.360
> 
> 标签：oracle11g

我有一个包含 ORA-03113 的异常：

```
(SiPPSS.GetPrintWorkDirectDetail) - ERR:ORA-03113: end-of-file on communication channel Process ID: 7448 Session ID: 30 Serial number: 9802 ランニング:12110937 プロセス:T855
Oracle.DataAccess.Client.OracleException ORA-03113: end-of-file on communication channel Process ID: 7448
Session ID: 30 Serial number: 9802    場所 Oracle.DataAccess.Client.OracleException.HandleErrorHelper(Int32 errCode, OracleConnection conn, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, String procedure, Boolean bCheck)
   場所 Oracle.DataAccess.Client.OracleException.HandleError(Int32 errCode, OracleConnection conn, String procedure, IntPtr opsErrCtx, OpoSqlValCtx* pOpoSqlValCtx, Object src, Boolean bCheck)
   場所 Oracle.DataAccess.Client.OracleCommand.ExecuteReader(Boolean requery, Boolean fillRequest, CommandBehavior behavior)
   場所 Oracle.DataAccess.Client.OracleDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior)
   場所 System.Data.Common.DbDataAdapter.Fill(DataTable dataTable)
   場所 SiPPSS.VSireiMeisaiDsTableAdapters.V_SIREI_MEISAITableAdapter.FillByRunningNoAndProcNo(V_SIREI_MEISAIDataTable dataTable, String RUNNING_NO, String PROC_NO) 場所 C:\SVM\trunk\SiPPSSServer\Server\Dao\View\VSireiMeisaiDs.Designer.vb:行 386
   場所 SiPPSS.GetPrintWorkDirectDetail.Execute(BLogicParam param) 場所 C:\SVM\trunk\SiPPSSServer\Server\BLogic\Screen\Printing\Rprt0701\GetPrintWorkDirectDetail.vb:行 105 
```

在这种情况下，oracle 警报日志如下：

* * *

```
Fatal NI connect error 12170.

  VERSION INFORMATION:
    TNS for 64-bit Windows: Version 11.2.0.1.0 - Production
    Oracle Bequeath NT Protocol Adapter for 64-bit Windows: Version 11.2.0.1.0 - Production
    Windows NT TCP/IP NT Protocol Adapter for 64-bit Windows: Version 11.2.0.1.0 - Production
  Time: 01-11月-2012 13:50:45
  Tracing not turned on.
  Tns error struct:
    ns main err code: 12535

TNS-12535: TNS: 操作はタイム・アウトしました。
    ns secondary err code: 12560
    nt main err code: 505

TNS-00505: 操作タイムアウトです。
    nt secondary err code: 60
    nt OS err code: 0
  Client address: (ADDRESS=(PROTOCOL=tcp)(HOST=10.41.102.53)(PORT=1794))
Thu Nov 01 13:54:17 2012
Thread 1 cannot allocate new log, sequence 1880
Private strand flush not complete
  Current log# 1 seq# 1879 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1880 (LGWR switch)
  Current log# 2 seq# 1880 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thu Nov 01 13:54:21 2012
Archived Log entry 1118 added for thread 1 sequence 1879 ID 0xe48db805 dest 1:
Thu Nov 01 14:40:12 2012
Thread 1 cannot allocate new log, sequence 1881
Private strand flush not complete
  Current log# 2 seq# 1880 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thread 1 advanced to log sequence 1881 (LGWR switch)
  Current log# 3 seq# 1881 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thu Nov 01 14:40:16 2012
Archived Log entry 1119 added for thread 1 sequence 1880 ID 0xe48db805 dest 1:
Thu Nov 01 15:27:42 2012
Thread 1 cannot allocate new log, sequence 1882
Private strand flush not complete
  Current log# 3 seq# 1881 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thread 1 advanced to log sequence 1882 (LGWR switch)
  Current log# 1 seq# 1882 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thu Nov 01 15:27:46 2012
Archived Log entry 1120 added for thread 1 sequence 1881 ID 0xe48db805 dest 1:
Thu Nov 01 16:23:48 2012
Thread 1 cannot allocate new log, sequence 1883
Private strand flush not complete
  Current log# 1 seq# 1882 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1883 (LGWR switch)
  Current log# 2 seq# 1883 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thu Nov 01 16:23:52 2012
Archived Log entry 1121 added for thread 1 sequence 1882 ID 0xe48db805 dest 1:
Thu Nov 01 17:05:50 2012
Thread 1 cannot allocate new log, sequence 1884
Private strand flush not complete
  Current log# 2 seq# 1883 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thread 1 advanced to log sequence 1884 (LGWR switch)
  Current log# 3 seq# 1884 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thu Nov 01 17:05:55 2012
Archived Log entry 1122 added for thread 1 sequence 1883 ID 0xe48db805 dest 1:
Thu Nov 01 17:26:52 2012 
```

* * *

```
Fatal NI connect error 12170.

  VERSION INFORMATION:
    TNS for 64-bit Windows: Version 11.2.0.1.0 - Production
    Oracle Bequeath NT Protocol Adapter for 64-bit Windows: Version 11.2.0.1.0 - Production
    Windows NT TCP/IP NT Protocol Adapter for 64-bit Windows: Version 11.2.0.1.0 - Production
  Time: 01-11月-2012 17:26:52
  Tracing not turned on.
  Tns error struct:
    ns main err code: 12535

TNS-12535: TNS: 操作はタイム・アウトしました。
    ns secondary err code: 12560
    nt main err code: 505

TNS-00505: 操作タイムアウトです。
    nt secondary err code: 60
    nt OS err code: 0
  Client address: (ADDRESS=(PROTOCOL=tcp)(HOST=10.41.102.62)(PORT=1286))
Thu Nov 01 17:27:16 2012 
```

* * *

```
Fatal NI connect error 12170.

  VERSION INFORMATION:
    TNS for 64-bit Windows: Version 11.2.0.1.0 - Production
    Oracle Bequeath NT Protocol Adapter for 64-bit Windows: Version 11.2.0.1.0 - Production
    Windows NT TCP/IP NT Protocol Adapter for 64-bit Windows: Version 11.2.0.1.0 - Production
  Time: 01-11月-2012 17:27:16
  Tracing not turned on.
  Tns error struct:
    ns main err code: 12535

TNS-12535: TNS: 操作はタイム・アウトしました。
    ns secondary err code: 12560
    nt main err code: 505

TNS-00505: 操作タイムアウトです。
    nt secondary err code: 60
    nt OS err code: 0
  Client address: (ADDRESS=(PROTOCOL=tcp)(HOST=10.41.102.62)(PORT=1285))
Thu Nov 01 18:08:39 2012
Thread 1 advanced to log sequence 1885 (LGWR switch)
  Current log# 1 seq# 1885 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thu Nov 01 18:08:40 2012
Archived Log entry 1123 added for thread 1 sequence 1884 ID 0xe48db805 dest 1:
Thu Nov 01 19:33:21 2012
Thread 1 cannot allocate new log, sequence 1886
Private strand flush not complete
  Current log# 1 seq# 1885 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1886 (LGWR switch)
  Current log# 2 seq# 1886 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thu Nov 01 19:33:25 2012
Archived Log entry 1124 added for thread 1 sequence 1885 ID 0xe48db805 dest 1:
Thu Nov 01 20:32:25 2012
Thread 1 cannot allocate new log, sequence 1887
Private strand flush not complete
  Current log# 2 seq# 1886 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thread 1 advanced to log sequence 1887 (LGWR switch)
  Current log# 3 seq# 1887 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thu Nov 01 20:32:29 2012
Archived Log entry 1125 added for thread 1 sequence 1886 ID 0xe48db805 dest 1:
Thu Nov 01 21:13:07 2012
Thread 1 advanced to log sequence 1888 (LGWR switch)
  Current log# 1 seq# 1888 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thu Nov 01 21:13:08 2012
Archived Log entry 1126 added for thread 1 sequence 1887 ID 0xe48db805 dest 1:
Thu Nov 01 22:00:00 2012
Setting Resource Manager plan SCHEDULER[0x3006]:DEFAULT_MAINTENANCE_PLAN via scheduler window
Setting Resource Manager plan DEFAULT_MAINTENANCE_PLAN via parameter
Thu Nov 01 22:00:00 2012
Starting background process VKRM
Thu Nov 01 22:00:00 2012
VKRM started with pid=32, OS id=4048 
Thu Nov 01 22:00:59 2012
Thread 1 cannot allocate new log, sequence 1889
Private strand flush not complete
  Current log# 1 seq# 1888 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1889 (LGWR switch)
  Current log# 2 seq# 1889 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thu Nov 01 22:01:03 2012
Archived Log entry 1127 added for thread 1 sequence 1888 ID 0xe48db805 dest 1:
Thu Nov 01 22:32:36 2012
Thread 1 advanced to log sequence 1890 (LGWR switch)
  Current log# 3 seq# 1890 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thu Nov 01 22:32:37 2012
Archived Log entry 1128 added for thread 1 sequence 1889 ID 0xe48db805 dest 1:
Thu Nov 01 22:33:18 2012
Errors in file d:\oracle\diag\rdbms\siporex\siporex\trace\siporex_ora_11884.trc  (incident=101313):
ORA-03137: TTC protocol internal error : [12333] [8] [49] [50] [] [] [] []
Incident details in: d:\oracle\diag\rdbms\siporex\siporex\incident\incdir_101313\siporex_ora_11884_i101313.trc
Thu Nov 01 22:33:21 2012
Trace dumping is performing id=[cdmp_20121101223321]
Thu Nov 01 22:40:43 2012
Thread 1 cannot allocate new log, sequence 1891
Private strand flush not complete
  Current log# 3 seq# 1890 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thread 1 advanced to log sequence 1891 (LGWR switch)
  Current log# 1 seq# 1891 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thu Nov 01 22:40:47 2012
Archived Log entry 1129 added for thread 1 sequence 1890 ID 0xe48db805 dest 1:
Thu Nov 01 23:47:30 2012
Thread 1 cannot allocate new log, sequence 1892
Private strand flush not complete
  Current log# 1 seq# 1891 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1892 (LGWR switch)
  Current log# 2 seq# 1892 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thu Nov 01 23:47:34 2012
Archived Log entry 1130 added for thread 1 sequence 1891 ID 0xe48db805 dest 1:
Fri Nov 02 00:49:31 2012
Thread 1 cannot allocate new log, sequence 1893
Private strand flush not complete
  Current log# 2 seq# 1892 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thread 1 advanced to log sequence 1893 (LGWR switch)
  Current log# 3 seq# 1893 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Fri Nov 02 00:49:35 2012
Archived Log entry 1131 added for thread 1 sequence 1892 ID 0xe48db805 dest 1:
Fri Nov 02 01:43:12 2012
Thread 1 cannot allocate new log, sequence 1894
Private strand flush not complete
  Current log# 3 seq# 1893 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thread 1 advanced to log sequence 1894 (LGWR switch)
  Current log# 1 seq# 1894 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Fri Nov 02 01:43:17 2012
Archived Log entry 1132 added for thread 1 sequence 1893 ID 0xe48db805 dest 1:
Fri Nov 02 01:52:51 2012
Errors in file d:\oracle\diag\rdbms\siporex\siporex\trace\siporex_ora_6124.trc  (incident=101273):
ORA-03137: TTC protocol internal error : [12333] [4] [80] [82] [] [] [] []
Incident details in: d:\oracle\diag\rdbms\siporex\siporex\incident\incdir_101273\siporex_ora_6124_i101273.trc
Fri Nov 02 01:52:54 2012
Trace dumping is performing id=[cdmp_20121102015254]
Fri Nov 02 02:00:00 2012
Clearing Resource Manager plan via parameter
Fri Nov 02 02:43:37 2012
Thread 1 cannot allocate new log, sequence 1895
Private strand flush not complete
  Current log# 1 seq# 1894 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1895 (LGWR switch)
  Current log# 2 seq# 1895 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Fri Nov 02 02:43:41 2012
Archived Log entry 1133 added for thread 1 sequence 1894 ID 0xe48db805 dest 1:
Fri Nov 02 04:46:18 2012
Thread 1 cannot allocate new log, sequence 1896
Private strand flush not complete
  Current log# 2 seq# 1895 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thread 1 advanced to log sequence 1896 (LGWR switch)
  Current log# 3 seq# 1896 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Fri Nov 02 04:46:22 2012
Archived Log entry 1134 added for thread 1 sequence 1895 ID 0xe48db805 dest 1:
Fri Nov 02 04:51:41 2012
Errors in file d:\oracle\diag\rdbms\siporex\siporex\trace\siporex_ora_4048.trc  (incident=101425):
ORA-03137: TTC protocol internal error : [12333] [4] [67] [85] [] [] [] []
Incident details in: d:\oracle\diag\rdbms\siporex\siporex\incident\incdir_101425\siporex_ora_4048_i101425.trc
Fri Nov 02 04:51:44 2012
Trace dumping is performing id=[cdmp_20121102045144]
Fri Nov 02 05:54:44 2012
Thread 1 cannot allocate new log, sequence 1897
Private strand flush not complete
  Current log# 3 seq# 1896 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thread 1 advanced to log sequence 1897 (LGWR switch)
  Current log# 1 seq# 1897 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Fri Nov 02 05:54:48 2012
Archived Log entry 1135 added for thread 1 sequence 1896 ID 0xe48db805 dest 1:
Fri Nov 02 07:00:34 2012
Thread 1 cannot allocate new log, sequence 1898
Private strand flush not complete
  Current log# 1 seq# 1897 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1898 (LGWR switch)
  Current log# 2 seq# 1898 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Fri Nov 02 07:00:38 2012
Archived Log entry 1136 added for thread 1 sequence 1897 ID 0xe48db805 dest 1:
Fri Nov 02 08:32:41 2012
Thread 1 cannot allocate new log, sequence 1899
Private strand flush not complete
  Current log# 2 seq# 1898 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thread 1 advanced to log sequence 1899 (LGWR switch)
  Current log# 3 seq# 1899 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Fri Nov 02 08:32:45 2012
Archived Log entry 1137 added for thread 1 sequence 1898 ID 0xe48db805 dest 1:
Fri Nov 02 09:48:57 2012
Thread 1 advanced to log sequence 1900 (LGWR switch)
  Current log# 1 seq# 1900 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Fri Nov 02 09:48:58 2012
Archived Log entry 1138 added for thread 1 sequence 1899 ID 0xe48db805 dest 1:
Fri Nov 02 10:18:15 2012
Thread 1 cannot allocate new log, sequence 1901
Private strand flush not complete
  Current log# 1 seq# 1900 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1901 (LGWR switch)
  Current log# 2 seq# 1901 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Fri Nov 02 10:18:19 2012
Archived Log entry 1139 added for thread 1 sequence 1900 ID 0xe48db805 dest 1:
Fri Nov 02 10:22:58 2012
Thread 1 cannot allocate new log, sequence 1902
Private strand flush not complete
  Current log# 2 seq# 1901 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Thread 1 advanced to log sequence 1902 (LGWR switch)
  Current log# 3 seq# 1902 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Fri Nov 02 10:23:02 2012
Archived Log entry 1140 added for thread 1 sequence 1901 ID 0xe48db805 dest 1:
Fri Nov 02 10:27:38 2012
Thread 1 cannot allocate new log, sequence 1903
Checkpoint not complete
  Current log# 3 seq# 1902 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thread 1 cannot allocate new log, sequence 1903
Private strand flush not complete
  Current log# 3 seq# 1902 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO03.LOG
Thread 1 advanced to log sequence 1903 (LGWR switch)
  Current log# 1 seq# 1903 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Fri Nov 02 10:27:45 2012
Archived Log entry 1141 added for thread 1 sequence 1902 ID 0xe48db805 dest 1:
Fri Nov 02 10:32:27 2012
Thread 1 cannot allocate new log, sequence 1904
Checkpoint not complete
  Current log# 1 seq# 1903 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 cannot allocate new log, sequence 1904
Private strand flush not complete
  Current log# 1 seq# 1903 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO01.LOG
Thread 1 advanced to log sequence 1904 (LGWR switch)
  Current log# 2 seq# 1904 mem# 0: D:\ORACLE\ORADATA\SIPOREX\REDO02.LOG
Fri Nov 02 10:32:34 2012
Archived Log entry 1142 added for thread 1 sequence 1903 ID 0xe48db805 dest 1:
Fri Nov 02 10:35:42 2012
Errors in file d:\oracle\diag\rdbms\siporex\siporex\trace\siporex_ora_15856.trc  (incident=101353):
ORA-03137: TTC protocol internal error : [12333] [8] [49] [50] [] [] [] []
Incident details in: d:\oracle\diag\rdbms\siporex\siporex\incident\incdir_101353\siporex_ora_15856_i101353.trc
Fri Nov 02 10:35:44 2012
Trace dumping is performing id=[cdmp_20121102103544] 
```

我不知道这个问题的主要原因以及如何解决它。请帮我。

# php - 在 CakePHP 2 上做一个类似 Twitter 的追随者和转发系统的正确方法？

> ID：13188600
> 
> 赞同：2
> 
> 时间：2012-11-02T02:46:09.563
> 
> 标签：php, cakephp, twitter, has-and-belongs-to-many

我是 CakePHP 的新手。我到处都在寻找这个，但我似乎无法做到正确，或找到任何方向。我仍然不明白整个 HABTM 是如何工作的，我期待从中学到更多。

我正在尝试做一个类似于 Twitter 的系统，包含用户和关注者，以及帖子（推文）和分享（转推）。我已经设置了用户和帖子模型，并为关注者（用户和用户之间）和共享（用户和帖子之间）加入了表格。我应该如何设置我的模型关联？我一直在尝试几种方法，但我不确定我是否做得对。

另一个问题是，什么是正确的查找查询来获取我关注的人的所有帖子，加上他们分享的帖子，而不获取所有不必要的数据，如用户信息等，只是一个数组中的帖子？是否可以在一个查询中查找，或者我应该做几个然后合并数组？另外，了解如何正确过滤和限制这个相当复杂的查询（在某些日期范围之间获得“帖子时间线”，将帖子限制在一定数量，或两者兼而有之）将非常有用。

我知道我的问题有点傻，但我发誓我已经做了很多研究，但我似乎无法做到正确。因此，任何帮助，尤其是查询部分，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:22:14.697

所以这些将是一些奇怪的关系。我觉得你应该有以下表格：

*   用户（别名为 Followers）有很多推文
*   帖子属于用户
*   用户关注者（HABTM 表）

要在三个表上进行这项工作，`Posts`需要一个线程表。本质上，如果一个人转发（分享）一个帖子，则会在新帖子`parent_id`列中使用原始帖子的 id 创建一条新记录。然后，当调用记录时，模型可以提取附加数据并将其包含在提要中。

的别名方面`Users`允许跟随者部分仅在一个表中完成。要查找某人的追随者，请使用表中的一个键 ( `follower_id`) 进行搜索，而要查找某人关注的人，只需使用另一个键 ( `users_id`) 进行搜索。

至于您问题的第二部分，在此设置中查找应该很容易，但您可能需要阅读[Containable](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html) and [threaded queries](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-threaded)。您可以在表中包含时间戳列，以便稍后按日期功能（或后时间线）进行搜索。

# xml - 我可以指定一个子元素在 XMLSchema 中具有某个唯一属性吗？

> ID：13188602
> 
> 赞同：1
> 
> 时间：2012-11-02T02:46:19.417
> 
> 标签：xml, xsd

`<option selected>`是否可以在 XSD中指定 HTML 的等价物——*确切地说*，*只有*一个元素具有特定属性？

例如，给定以下示例 XML 片段：

```
<foo-list>
  <foo/>
  <foo bar="bar"/>
  <foo/>
</foo-list> 
```

我可以编写以下 XSD 以确保只有一个`foo`具有`@bar`：

```
<xs:element name="foo-list">
  <!-- FOO-LIST contains [1..n] FOO elements -->
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="foo" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <!-- any FOO with @BAR must have unique @BAR -->
  <xs:unique name="oneFooBar">
    <xs:selector xpath="foo"/>
    <xs:field xpath="@bar"/>
  </xs:unique>
</xs:element>
<xs:element name="foo">
  <xs:complexType>
    <!-- FOO has optional @BAR -->
    <xs:attribute name="bar">
      <xs:simpleType>
        <!-- @BAR must = "bar", if specified -->
        <xs:restriction base="xs:string">
          <xs:enumeration value="bar"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
</xs:element> 
```

假设一切都合格，并且我决定使用纸牌`enumeration`而不是 a`pattern`是合理的：

1）这个模式是否明智地表示我的意图？（即有零或一和`<foo bar="bar"/>`零或多个`<foo/>`）`<foo-list>`

2）有没有办法要求*只有*一个`<foo bar="bar"/>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:23:14.183

1）是的，确实如此，以一种“奇怪”的解决方法。

2) 不适用于库存 XSD 1.0。加入 Schematron，一切就绪。或者迁移到带有断言的 XSD 1.1（它允许您完全按照 Schematron 为您想要的东西做什么）。问题是，由于您没有指定目标平台，因此很难获得 XSD 1.1 实现（Java 在 Xerces 中有免费选项，在 Saxon EE 中有付费选项），但其他的，例如 .NET，没有免费的。Schematron“编译器”实际上只是将模式转换为 XSLT；它可以是 1.0 或 2.0，这意味着它可以用于在几乎任何（合理的）平台上增强普通 XSD 1.0。

# mysql - 无法在 FROM 子句中为 UPDATE 指定目标表

> ID：13188603
> 
> 赞同：1
> 
> 时间：2012-11-02T02:46:18.673
> 
> 标签：mysql, sql

我正在尝试执行以下查询：

```
update table3 d set status = 'Complete'
where d.id in 
(
    select b.id from table1 a, table3 b, table2 c
    where a.id = b.table1_id
    and c.id = b.table2_id
    and c.examId = 16637                 -- will be passed in by user
    and a.id in (46,47,48,49)            -- will be passed in by user
); 
```

所以，我正在尝试更新多行`table3`.

`table3``table1`是和之间的连接表`table2`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:49:28.197

将其包装在子查询中，（*从而为结果创建一个临时表*）。我也建议使用`ANSI SQL-92`格式。

```
update table3 d 
set    status = 'Complete'
where  d.id in 
(
    SELECT ID
    FROM
    (
        select  b.id 
        from    table1 a 
                INNER JOIN table3 b
                    ON a.id = b.table1_id
                INNER JOIN table2 c
                    ON c.id = b.table2_id
        where   c.examId = 16637 and 
                a.id in (46,47,48,49) 
    ) xx
); 
```

或通过使用`JOIN`

```
update  table3 d 
        INNER JOIN
        (
            SELECT ID
            FROM
            (
                select  b.id 
                from    table1 a 
                        INNER JOIN table3 b
                            ON a.id = b.table1_id
                        INNER JOIN table2 c
                            ON c.id = b.table2_id
                where   c.examId = 16637 and 
                        a.id in (46,47,48,49) 
            ) xx
        ) y ON d.id = y.id
set status = 'Complete' 
```

# c# - c# 查找数字是否为素数的程序

> ID：13188604
> 
> 赞同：-2
> 
> 时间：2012-11-02T02:46:23.740
> 
> 标签：c#, primes

我有这个任务：编写一个表达式来检查给定的正整数 n (n ≤ 100) 是否为素数。例如 37 是素数。

```
 int number = int.Parse(Console.ReadLine());

    for (int i = 1; i < 100; i++)
    {
        bool isPrime = (number % number == 0 && number % i == 0);

        if (isPrime)
        {
            Console.WriteLine("Number {0} is not prime", number);
        }
        else
        {
            Console.WriteLine("Number {0} is prime", number);
            break;
        }

    } 
```

这似乎不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:52:23.380

```
int number = int.Parse(Console.ReadLine());

bool prime = true;
// we only have to count up to and including the square root of a number
int upper = (int)Math.Sqrt(number);
for (int i = 2; i <= upper; i++) {
   if ((number % i) == 0) {
       prime = false;
       break; 
   }
}
Console.WriteLine("Number {0} is "+ (prime ? "prime" : "not prime"), number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:50:59.740

一个。你期待`number % number`做什么？

湾。每次通过循环时，您的 isPrime 检查都会“重置”。需要更多类似的东西：

```
bool isprime = true;
for(int i = 2; i < number; i++) {
    // if number is divisible by i then
    //    isprime = false;
    //    break
}
// display result. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T02:55:31.393

问题是：for 应该从 2 开始，因为任何数字都会被 1 所取代。 number % number == 0 - 这一直是真的，如果他完成了所有的 for 步骤，那么这个数字就是素数，所以

```
else
{
     Console.WriteLine("Number {0} is prime", number);
     break;
} 
```

不应该在那里。

代码应该是这样的：

```
 int number = int.Parse(Console.ReadLine());
        if (number == 1)
        {    Console.WriteLine("Number 1 is prime");return;}

        for (int i = 2; i < number / 2 + 1; i++)
        {
            bool isPrime = (number % i == 0);

            if (isPrime)
            {
                Console.WriteLine("Number {0} is not prime", number);
                return;
            }
        }
        Console.WriteLine("Number {0} is prime", number); 
```

请注意，我没有对此进行测试...只是在这里写的。但你应该明白这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T04:45:32.890

使用 LINQ 的半严重可能解决方案（至少需要更小的范围）：

```
var isPrime = !Enumerable.Range(2, number/2).Where(i => number % i == 0).Any(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-21T10:17:43.953

程序检查给定的数字是否为质数。

**素数是只能被1和它自己整除的数**

```
class Program
{
    bool CheckIsPrimeNumber(int primeNum)
    {
        bool isPrime = false;

        for (int i = 2; i <= primeNum / 2; i++)
        {
            if (primeNum % i == 0)
            {
                return isPrime;
            }
        }
        return !isPrime;
    }
    public static void Main(string[] args)
    {
        Program obj = new Program();
        Console.Write("Enter the number to check prime  :  ");
        int mPrimeNum = int.Parse(Console.ReadLine());

        if (obj.CheckIsPrimeNumber(mPrimeNum) == true)
        {
            Console.WriteLine("\nThe " + mPrimeNum + " is a Prime Number");
        }
        else
        {
            Console.WriteLine("\nThe " + mPrimeNum + " is Not a Prime Number");
        }

        Console.ReadKey();
    }
} 
```

谢谢！！！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-02T02:52:36.157

这是给你的：

```
void prime_num(long num)
    {
        bool isPrime = true;
        for (int i = 0; i <= num; i++)
        {
            for (int j = 2; j <= num; j++)
            {
                if (i != j && i % j == 0)
                {
                    isPrime = false;
                    break;
                }
            }
            if (isPrime)
            {
                Console.WriteLine ( "Prime:" + i );
            }
            isPrime = true;
        }
    } 
```

# sql - Sql group by 工作不正常

> ID：13188610
> 
> 赞同：1
> 
> 时间：2012-11-02T02:48:14.860
> 
> 标签：sql, sql-server, tsql, group-by

这是我的查询

```
select  
 (sum(case when offer1_delivered is not null then 1 else null end) ) as PenetrationRate1
,(sum(case when offer2_delivered is not null then 1 else null end)) as PenetrationRate2
,count(TargetMkgListID) as TargetMkgListID from tablename 
```

# 输出

```
PenetrationRate1    PenetrationRate2    TargetMkgListID 
1                   2                3 
```

我需要在此查询中包含 customername 列

```
select  customername,
 (sum(case when offer1_delivered is not null then 1 else null end) ) as PenetrationRate1
,(sum(case when offer2_delivered is not null then 1 else null end)) as PenetrationRate2
,count(TargetMkgListID) as TargetMkgListID from tablename
group by customername 
```

如果我在查询中包含客户名称，则 groupby 无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T03:20:19.687

```
SELECT  customername
,(ISNULL(SUM(CASE WHEN offer1_delivered is not null THEN 1 ELSE 0 END),0)) AS PenetrationRate1
,(ISNULL(SUM(CASE WHEN offer2_delivered is not null THEN 1 ELSE 0 END),0)) AS PenetrationRate2
,COUNT(TargetMkgListID) as TargetMkgListID from tablename
GROUP BY customername 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:50:53.470

```
select  customername,
 (sum(case when offer1_delivered is not null then 1 else 0 end) ) as PenetrationRate1
,(sum(case when offer2_delivered is not null then 1 else 0 end)) as PenetrationRate2
,count(TargetMkgListID) as TargetMkgListID from tablename
group by customername 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T02:52:49.010

假设表中只有一个 customerName 值，请尝试

```
select Min(customername),
       sum(case when offer1_delivered is not null then 1 end) PenetrationRate1,
       sum(case when offer2_delivered is not null then 1 end) PenetrationRate2,
       count(TargetMkgListID) TargetMkgListID 
from tablename 
```

如果表中有多个 customerName，那么您不能将 customerName 添加到 Select 子句中，并且仍然可以获取表中所有记录的总和（输出中只有一行）。您只能按每个客户名称获取记录的总和，这是您的第二个查询应该执行的操作。因此，如果第二个查询不是您想要的，那么您就会遇到问题，因为您想要的数据在逻辑上可能无法使用您拥有的数据

# java - 如何使用j2se从xml文件中获取数据

> ID：13188614
> 
> 赞同：0
> 
> 时间：2012-11-02T02:48:25.950
> 
> 标签：java, xml

我在使用 j2se 从 xml 文件中获取数据时遇到问题，任何人都可以帮助我，我被卡住了。或者您可以教我执行此操作的代码，谢谢我使用的是 iso8583 而不仅仅是 xml 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:06:58.423

你可以使用[dom4j](http://dom4j.sourceforge.net/)库，很简单。

# jquery - css表单验证jquery

> ID：13188617
> 
> 赞同：0
> 
> 时间：2012-11-02T02:49:00.567
> 
> 标签：jquery, css, forms, validation

我有一个脚本，我希望“消息”错误在我的输入框中显示文本。
输入表单的 ID 是“电子邮件”，但似乎我无法更改此格式以允许文本以外的任何内容，并且不更改表单的输入？

这是代码：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#myform").validate({
        debug: false,
        rules: {
            email: {
                required: true,
                email: true
            }
        },
        messages: {
            email: "oh man!",

        },
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('process.php', $("#myform").serialize(), function(data) {
                $('.EmailList').html(data);

            });
        }
    });
});
</script> 
```

表格：

```
form name="myform" id="myform" action="" method="POST">  
    <div class="Email">                     
        <label for="Email"></label>
        <table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
          <tr>
            <td width="76%"><label for="Email"></label>
              <input type="text" name="email" id="daEmail" size="30" value=""/> </td>
            <td width="24%"><input type="image" name="imageField" id="imageField" src="images/Submit.png" /></td>
          </tr>
        </table>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:43:31.480

您的输入框 id 是“daEmail”，因此您必须在 jquery 中使用该名称，

**jQuery代码：**

```
$('#daEmail').val(data); 
```

**html代码**

```
<input type="text" name="email" id="daEmail" size="30" value=""/> 
```

# sql - 回滚错误执行的 SQL 查询

> ID：13188621
> 
> 赞同：4
> 
> 时间：2012-11-02T02:49:49.553
> 
> 标签：sql, sql-server, sql-server-2008, tsql, rollback

我认为问题说明了一切，在 SQL Server 管理工作室中错误地执行了以下更新查询

```
update kms_students set student_campus='4' where student_campus='KL' 
```

受影响的行超过 1000 行，我无法识别它，因为该表已经有`student_campus='4'`许多先前的行。

是否可以回滚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:16:38.460

我相信[ApexSQL](http://www.apexsql.com/sql_tools_log.aspx)应该可以解决问题。

ApexSQL 通过分析物理事务日志来工作，该日志基本上包含恢复特定事务和数据所需的所有信息，但 MS 没有提供开箱即用的工具来管理它，除了恢复备份然后手动恢复事务使用[RESTORE LOGS](http://msdn.microsoft.com/en-us/library/ms186858%28SQL.90%29.aspx)记录到特定日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:05:48.637

1.  备份。大多数托管公司都保留一个，请尝试尽快给每个人打电话。
2.  您自己的备份。即使他们老了，他们也会有所帮助。
3.  保留大量备份，切勿在生产环境中尝试查询。从来没有。（打赌你学会了，对吧？）

为了使它更容易一点，您可以尝试将备份数据库联机并执行一些 PHP/Python/whatever 以便比较备份中的每条记录，并在需要时将当前数据库从“4”更改为“KL”。

可能并不完美，但可以帮助您避免几天的工作。

# c# - 反序列化一个xml

> ID：13188624
> 
> 赞同：1
> 
> 时间：2012-11-02T02:50:33.880
> 
> 标签：c#, xml, xml-serialization, xml-deserialization

我需要创建一个可以从此 XML 反序列化的对象

```
 <Item>
    <Description>Timber(dry)</Description>
    <Measure Type="VOLUME">
      <Value>1.779</Value>
      <Units>m3</Units>
    </Measure>
    <Measure Type="WEIGHT">
      <Value>925.08</Value>
      <Units>Kilogram</Units>
    </Measure>
    <Measure>
      <Value>1</Value>
      <Units>Units</Units>
    </Measure>
  </Item> 
```

我的问题是**Measure**，它需要是某种列表，但是当我创建一个列表时，它会错误地序列化

```
 <Item>
    <Description>Timber(dry)</Description>
    <Measures>   <--- Dont want this <Measures> tag
     <Measure Type="VOLUME">
      <Value>1.779</Value>
      <Units>m3</Units>
     </Measure>
     <Measure Type="WEIGHT">
      <Value>925.08</Value>
      <Units>Kilogram</Units>
     </Measure>
     <Measure>
      <Value>1</Value>
      <Units>Units</Units>
     </Measure>
   </Measures> <--- 
  </Item> 
```

这就是我到目前为止所拥有的

```
public class Item
  {
    public Item()
    {
      this.Measures = new List<Measure>();
    }    

    public string Description { get; set; }

    public List<Measure> Measures { get; set; }
  }

  public class Measure
  {

    public string Value { get; set; }

    public string Units { get; set; }

    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Type { get; set; }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:24:10.907

您需要使用属性来装饰`Measures`属性`[XmlElement]`，以向序列化程序指示它需要作为（裸）元素进行序列化（和反序列化），而不是将它们包装在另一个元素中。

```
public class StackOverflow_13188624
{
    const string XML = @"  <Item>
                            <Description>Timber(dry)</Description>
                            <Measure Type=""VOLUME"">
                              <Value>1.779</Value>
                              <Units>m3</Units>
                            </Measure>
                            <Measure Type=""WEIGHT"">
                              <Value>925.08</Value>
                              <Units>Kilogram</Units>
                            </Measure>
                            <Measure>
                              <Value>1</Value>
                              <Units>Units</Units>
                            </Measure>
                          </Item>";

    public class Item
    {
        public Item()
        {
            this.Measures = new List<Measure>();
        }

        public string Description { get; set; }
        [System.Xml.Serialization.XmlElement(ElementName = "Measure")]
        public List<Measure> Measures { get; set; }
    }

    public class Measure
    {
        public string Value { get; set; }
        public string Units { get; set; }
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string Type { get; set; }
    }

    public static void Test()
    {
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(XML));
        XmlSerializer xs = new XmlSerializer(typeof(Item));
        Item item = (Item)xs.Deserialize(ms);
        Console.WriteLine(item.Measures);
    }
} 
```

# java - 读入文本文件行以使用 indexOf 分隔数组

> ID：13188635
> 
> 赞同：1
> 
> 时间：2012-11-02T02:52:02.167
> 
> 标签：java, indexof

我想根据该行是否包含问号将文本文件的元素分成不同的数组。这是我所得到的。

```
 Scanner inScan = new Scanner(System.in);

    String file_name;
    System.out.print("What is the full file path name?\n>>");
    file_name = inScan.next();

    Scanner fScan = new Scanner(new File(file_name));
    ArrayList<String> Questions = new ArrayList();
    ArrayList<String> Other = new ArrayList();

    while (fScan.hasNextLine()) 
    {
        if(fScan.nextLine.indexOf("?"))
        {
            Questions.add(fScan.nextLine());
        }

        Other.add(fScan.nextLine());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:00:22.500

那里有很多问题

*   nextLine() 实际上返回下一行并在扫描仪上移动，因此您需要读取一次
*   indexOf 返回一个 int，而不是 boolean，我猜你更习惯于 C++？您可以改用以下任何一种：
    *   indexOf("?") >=0
    *   包含（“？”）
    *   匹配（“\？”）等。
*   请遵循 java 的方式并使用 camelCase 进行 vars ......

代码

```
public static void main(String[] args) throws FileNotFoundException {

    Scanner scanner = new Scanner(new File("foo.txt"));
    List<String> questions = new ArrayList<String>();
    List<String> other = new ArrayList<String>();
    while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        if (line.contains("?")) {
            questions.add(line);
        } else {
            other.add(line);
        }
    }
    System.out.println(questions);
    System.out.println(other);
} 
```

foo.txt

```
line without question mark
line with question mark?
another line 
```

# redis - 每个数据库的 redis 内存利用率

> ID：13188636
> 
> 赞同：11
> 
> 时间：2012-11-02T02:52:15.627
> 
> 标签：redis, administration

Redis 允许将数据存储在 16 个不同的“数据库”（0 到 15）中。有没有办法让每个数据库利用内存和磁盘空间。INFO 命令仅列出每个数据库的键数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T05:32:42.247

不，您不能单独控制每个数据库。这些“数据库”仅用于数据的逻辑分区。

您可以做的（取决于您的特定要求和设置）是旋转多个 redis 实例，每个实例执行不同的任务，并且每个实例都有自己的`redis.conf`带有内存上限的文件。磁盘空间不能被限制，至少 Redis 级别不能。

*旁注：*请记住，16 个数据库编号不是硬编码的 - 您可以将其设置为`redis.conf`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T20:04:49.063

我通过调用`dump`Redis DB 中的所有键并测量使用的字节总数来做到这一点。这会减慢您的服务器并需要一段时间。看起来`dump`返回的大小大约比实际内存使用量小 4 倍。这些数字将使您了解哪个数据库使用的空间最多。

这是我的代码： [https ://gist.github.com/mathieulongtin/fa2efceb7b546cbb6626ee899e2cfa0b](https://gist.github.com/mathieulongtin/fa2efceb7b546cbb6626ee899e2cfa0b)

# java - 如何使用 AppEngine 获取静态 URI

> ID：13188643
> 
> 赞同：0
> 
> 时间：2012-11-02T02:52:53.427
> 
> 标签：java, google-app-engine, servlets

我可以使用 AppEngine 获得这样的静态资源：

```
InputStream is = 
    getServletContext().getResourceAsStream("/WEB-INF/config/Reports.xml"); 
```

但是，我需要获取此静态资源`URI`并将其传递给不是 Servlet 的 Java 类。

如果是这种情况，传递 URI 的策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:57:29.983

```
URI uri = 
    getServletContext().getResource("/WEB-INF/config/Reports.xml").toURI(); 
```

# php - 简化：mysqli num_rows 不工作

> ID：13188645
> 
> 赞同：2
> 
> 时间：2012-11-02T02:53:12.050
> 
> 标签：php, mysql, mysqli

如何使用 mysqli 输出返回的行数？我下面的代码显示 0 虽然 while 循环（而 $s->fetch() echo $uid;）显示 2 个结果；

```
$m = new mysqli(MYSQL_SERVER, MYSQL_USER, MYSQL_PASS, MYSQL_DB);
$s=$m->prepare("SELECT uid FROM user WHERE token=? AND secret=?");
$s->bind_param('ss',$rt, $rs);
$rt='c';
$rs='d';
$s->execute();
$s->bind_result($uid);
$s->fetch();
print_r($s->num_rows); // RESULTS IN 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T03:19:05.973

您必须在 fetch`mysqli_stmt::store_result()`之后`mysqli_stmt::execute()`和之前调用才能知道`mysqli_stmt::num_rows`：

```
$s->execute();
$s->store_result();
print_r($s->num_rows); 
```

[PHP 文档在`num_rows`](http://www.php.net/manual/en/mysqli-stmt.num-rows.php)

[PHP 文档在`store_result()`](http://www.php.net/manual/en/mysqli-stmt.store-result.php)

# node.js - 如何从控制器访问多个模型

> ID：13188647
> 
> 赞同：0
> 
> 时间：2012-11-02T02:53:34.670
> 
> 标签：node.js, heroku, model, geddy

我有一个 Locations 模型和一个 Recorders 模型。我希望能够将两个数据集的所有数据都传递给我的视图模型。我如何访问它们，因为我认为它们不在范围内，因为我收到未定义的错误，因为我正在调用“全部”

[https://gist.github.com/3998302](https://gist.github.com/3998302)

```
var Main = function () {
  this.index = function (req, resp, params) {
    var self = this;
    var data = {};
    geddy.model.Locations.all(function(err, locations) {
        data.locations = locations;
        geddy.model.Recorders.all(function(err, recorders) {
            data.recorders = recorders;
            self.respond({params: params, data: data}, {
            format: 'html'
            , template: 'app/views/locations/index'
            }
        });
    }););
  };

};

exports.Main = Main; 
```

错误片段：

```
timers.js:103
            if (!process.listeners('uncaughtException').length) throw e;
                                                                      ^
TypeError: Cannot call method 'all' of undefined
    at index (G:\code\PeopleTracker\app\controllers\main.js:23:24)
    at controller.BaseController._handleAction.callback (C:\Users\Chris\AppData\Roaming\npm\node_modules\geddy\lib\base_
controller.js:387:22) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T22:52:08.260

派对很晚了，但我相信你可以打电话

```
geddy.model.Locations.all(function(err, locations) {
    geddy.model.Recorders.all(function(err, recorders) {
        var data = {};
        data.locations = locations;
        data.recorders = recorders;
        self.respond({params: params, data: data}, {
        format: 'html'
        , template: 'app/views/locations/index'
        }
    });
});); 
```

你也可以让回复说

```
self.respond({params: params, locations: locations, recorders: recorders}); 
```

但是，如果您希望数据文字中的所有数据都可用，则需要在最低范围的回调中定义它。回调可以在其范围之上读取，但不能在其之上写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:07:44.240

所以看起来你正在将`data`变量初始化为“未定义”。试试`data = {}`吧。如果这不能解决它，我会和你一起做一些故障排除。

**编辑**

如果这对您不起作用，请尝试再次安装 geddy：

`npm uninstall -g geddy && npm install -g geddy`

如果还是不行，请确保您的数据库正在实际运行，确保模型已定义（尝试`geddy console`检查您的模型），并确保您使用的是最新的稳定版本的 node.js。

# linux - rootbeer 和 Nvidia 擎天柱

> ID：13188650
> 
> 赞同：0
> 
> 时间：2012-11-02T02:53:39.853
> 
> 标签：linux, optimus, rootbeer

当笔记本电脑没有图形系统的 BIOS 开关时，Java CUDA 工具[rootbeer](https://github.com/pcpratts/rootbeer1)是否可以在 Linux 上与[Nvidia Optimus一起使用？](http://en.wikipedia.org/wiki/Nvidia_Optimus)换句话说，它是否在图形系统始终是混合的情况下工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:58:42.933

`bumblebee`如果你使用and ，你可以让它运行`optirun`。我是在 Eclipse 中完成的。线程将运行完成，在我的测试中，计算结果是预期的结果。是否`numberOfJobs * elapsedTimePerJob / elapsedTime > 1.0`是一个实验问题，我发现它通常远小于 1.0。

# jquery - 如何选择包含至少一个 [attr=name1] 元素的所有元素，而这些元素又包含至少一个 [attr=name2] 元素？

> ID：13188651
> 
> 赞同：0
> 
> 时间：2012-11-02T02:53:43.047
> 
> 标签：jquery

我有这个标记：

```
<div class="click">click</div>
<div id="wrapper">
<div class="container">
<div data-attrfirst='type1'><span data-attrsecond='type2'>must be red</span></div>
</div>
</div> 
```

我想选择所有的`.container`s ：
1\. 在里面`#wrapper`；
2\. 包含`data-attrfirst='type1'`元素，而元素又包含`data-attrsecond='type2'`元素。
我的要求：
1\. 我的 '#wrapper'、'type1'、'type2' 值必须作为变量保存。
2\. 我必须在某个标签内找到这一切（在这种情况下，我选择`body`）。

我试过这个（星号可能会被删除，没有区别）：

```
<script>
    $(document).ready(function () {
        $('.click').click(function () {
            var myid = '#wrapper';
            var attrfirst = 'type1';
            var attrsecond = 'type2';
            var elem = $('*[data-attrfirst=' + attrfirst + ']').has('*[data-attrsecond=' + attrsecond + ']');
            $('body').find(myid + ' .container').each(function (i) {
                if ($(this).has('*[data-attrfirst=' + attrfirst + '] *[data-attrsecond=' + attrsecond + ']')) {
                    $(this).css('color', 'red')
                }
            });

            $('body').find(myid + ' .container').each(function (i) {
                if ($(this).has(elem)) {
                    $(this).css('color', 'red')
                }
            });
            $('body').find(myid + ' .container').filter(function (i) {
                return $('*[data-attrfirst=' + attrfirst + '] *[data-attrsecond=' + attrsecond + ']', this).length >= 1
            }).css('color', 'red')
        });
    });
</script> 
```

我哪里错了？而且我从 Jquery 文档中不明白，是否`.has`接受 Jquery 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:57:39.747

你的问题说你想找到`#container`，所以使用这个：

```
$('body #wrapper .container:has([data-attrfirst="type1"] [data-attrsecond="type2"])'); 
```

或者，为了不那么混乱，您可以向后工作：

```
$('[data-attrfirst="type1"] [data-attrsecond="type2"]')
     .closest('body #wrapper .container'); 
```

* * *

但是，从您的代码看来，您实际上想要找到最后一个`data-attrsecond="type2"`元素。在这种情况下，使用这个：

```
$('body #wrapper .container [data-attrfirst="type1"] [data-attrsecond="type2"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:00:47.570

您正在尝试查找`.container`，但您已将“容器”定义为 id 属性而不是类属性。`#container`应该返回您正在寻找的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:02:28.487

这将起作用：

```
attrfirst = 'type1';
attrsecond = 'type2';
thetag = 'body';

$(thetag + " #wrapper [data-attrfirst='" + attrfirst + "'] [data-attrsecond='" + attrsecond + "']").css('color', 'red') 
```

# asp.net - ASP.NET 按钮更改页面 - 最终超出 div

> ID：13188654
> 
> 赞同：0
> 
> 时间：2012-11-02T02:54:23.420
> 
> 标签：asp.net, web-applications, twitter-bootstrap

问题发生在[此](http://tauimporter.azurewebsites.net/Test.aspx)页面上。当您按下按钮 1 时，页面上会显示一个表格。按下按钮 2 什么都不做（空功能），但由于某种原因，按钮最终超出了它所在的 div。

我使用 twitter 引导 CSS（最新版本 - 2.2.1）

这是标记：

```
<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/Site.master" CodeBehind="Test.aspx.cs" Inherits="CalendarImporterWeb.WebForm1" %>
<%@ Register TagPrefix="uc" TagName="Timetable" Src="~/TimetableControl.ascx" %>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManagerMain" runat="server" />

    <script language="javascript" type="text/javascript">
    <!--
        function popupWindow(url) {
            newwindow = window.open(url, 'name', 'height=520,width=500');
            if (window.focus) { newwindow.focus() }
            return false;
        }

        function showControl(controlID) {
            var control = document.getElementById(controlID);
            control.style.display = "block";
            control.style.visibility = "visible";
        }

        function hideControl(controlID) {
            var control = document.getElementById(controlID);
            control.style.display = "none";
        }
    // -->
    </script>

    <table border="0" width=500>

    <tr height="50">
        <td colspan="2" align="left">
            <asp:Button runat="server" id="btnGetCourses" text="Button 1" CssClass="btn btn-info"
            OnClientClick="showControl('ImageSpinner');" onclick="btnGetCourses_Click" />
        </td></tr>
    </table>
    <br />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" updatemode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnGetCourses" EventName="Click" />
        </Triggers>
        <ContentTemplate>
            <uc:Timetable id="Timetable1" runat="Server" Visible="false"></uc:Timetable>
        </ContentTemplate>
    </asp:UpdatePanel>

    <div class="jumbotron">
        <asp:button id="btnStart" class="btn btn-primary" runat="Server" 
            Text="Button 2" onclick="btnStart_Click" />
        <br /><br />
    </div>

    </form>
</asp:Content> 
```

和cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace CalendarImporterWeb
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnGetCourses_Click(object sender, EventArgs e)
        {
            Timetable1.LoadCourses("","","");
        }

        protected void btnStart_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:15:50.257

看起来你的标记中有一个无关的“-->” - 我在右上角的渲染页面上看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:47:45.780

发现问题： TimetableControl 的代码中有一个备用的 /div。由于它是不可见的（ASP.NET Visible 属性，而不是 HTML 可见属性），直到它变得可见才重要

谢谢您的帮助

# sencha-touch-2 - Sencha 触摸按钮组件 setText() 未更改按钮文本

> ID：13188655
> 
> 赞同：0
> 
> 时间：2012-11-02T02:54:23.750
> 
> 标签：sencha-touch-2

我的列表有一个控制器函数，当点击列表项时调用它，在这个函数中，我试图更新按钮组件的文本，如下所示：

```
var button = this.getPopupButton();
//reference popupButton is set within controller
button.setText('Test'); 
```

该功能似乎可以工作，并且`console.info(button.getText());`正在报告更新，但在 UI 中，文本仍然是配置中设置的默认值。

这是一个错误吗？还是我在这里做错了什么？

这些按钮位于分段按钮对象中：

```
items: [
                {
                    xtype: 'segmentedbutton',
                    flex: 1,
                    allowDepress: true,
                    layout: {
                        align: 'stretchmax',
                        pack: 'center',
                        type: 'hbox'
                    },
                    items: [
                        {
                            xtype: 'button',
                            flex: 2,
                            id: 'PopUpButton',
                            text: 'Pop up test!'
                        },
                        {
                            xtype: 'button',
                            flex: 1,
                            id: 'Mini',
                            ui: 'action',
                            text: 'Mini test!'
                        }
                    ]
                }
            ] 
```

更新：知道这些按钮是数据列表工具栏中的分段按钮可能会有所帮助，请参见下面的完整代码：

```
Ext.define('TestApp.view.ItemList', {
extend: 'Ext.dataview.List',
alias: 'widget.ItemList',

config: {
    loadingText: 'Loading items...',
    store: 'ItemStore',
    cls: [
        'ItemList'
    ],
    itemTpl: Ext.create('Ext.XTemplate', 
        '<div>{itemData}</div>',
    ),
    plugins: [
        {
            xtype: 'component',
            refreshFn: function(plugin) {
                //console.info('pull to refresh!');

                var store = plugin.up().getStore();

                console.log(store);
            },
            itemId: 'PullToRefresh',
            loadingText: 'Loading...',
            pullRefreshText: 'Pull down to refresh...',
            releaseRefreshText: 'Release to refresh...',
            snappingAnimationDuration: 200,
            type: 'pullrefresh'
        },
        {
            autoPaging: true,
            loadMoreText: 'Load more...',
            noMoreRecordsText: 'No more data in feed',
            type: 'listpaging'
        }
    ],
    items: [
        {
            xtype: 'toolbar',
            docked: 'top',
            id: 'MediaToolbar',
            ui: 'light',
            zIndex: 3,
            items: [
                {
                    xtype: 'button',
                    flex: 1,
                    cls: 'SourceSelectButton',
                    id: 'SourceSelectButton',
                    minWidth: '',
                    width: 83,
                    iconCls: 'ItemSource1',
                    text: ''
                }
            ]
        },
        {
            xtype: 'toolbar',
            docked: 'top',
            height: '45px',
            id: 'FeedSelectorBar',
            ui: 'light',
            zIndex: 3,
            items: [
                {
                    xtype: 'segmentedbutton',
                    flex: 1,
                    id: 'FeedSelectorButtons',
                    allowDepress: true,
                    layout: {
                        align: 'stretchmax',
                        pack: 'center',
                        type: 'hbox'
                    },
                    items: [
                        {
                            xtype: 'button',
                            flex: 2,
                            id: 'PopUpButton',
                            text: 'Pop up test'
                        },
                        {
                            xtype: 'button',
                            flex: 1,
                            id: 'TesterButton',
                            ui: 'action',
                            text: 'Latest'
                        }
                    ]
                }
            ]
        }
    ]
} 
```

});

更新#2：在使用控制台进行进一步测试后，`Ext.ComponentQuery.query()`我发现我可以操作应用程序中的所有按钮，**不**包括放置在数据视图列表/工具栏中的按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:56:24.980

尝试以下更改，这对我有用：-

1.  为您的**分段按钮**提供“ **id** ” 。

     **```
     {
                xtype: 'segmentedbutton',
                id: 'hii',   // give id to your segmented button
                allowDepress: true,
                layout: {
                    align: 'stretchmax',
                    pack: 'center',
                    type: 'hbox'
                },
                items: [
                    {
                        xtype: 'button',
                        id: 'PopUpButton',
                        text: 'Pop up test!'
                    },
                    {
                        xtype: 'button',
                        id: 'Mini',
                        ui: 'action',
                        text: 'Mini test!'
                    }
                ]
            } 
    ```** 
***   在列表的“ **itemtap ”上的****控制器**内使用此代码。

     **```
     var button = Ext.getCmp('hii');  // use your segmented button id here
       button.getAt(1).setText('Test'); 
    ```**** 

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T05:09:04.170

这个问题是通过将我的移动`Ext.dataview.List`到一个`Ext.panel`容器中来解决的。这似乎是 sencha touch 2.0.1.1 的一个错误。我在 dataview.List 工具栏组件中操作的任何元素都会在控制台中报告为已更新，但**不会**在 UI 中显示为已更新。同样的问题出现在 Chrome、Safari 和打包为 phonegap 项目的 Android 设备上。****

# windows-8 - 在没有选择器的情况下获取 Windows 8 联系信息

> ID：13188656
> 
> 赞同：0
> 
> 时间：2012-11-02T02:54:25.153
> 
> 标签：windows-8

我在这里查看了几个 Windows 8 联系人问题，以及 MSDN 联系人选择器示例，但找不到我的问题的答案。

从大多数答案看来，从人员合同中获取联系信息的唯一方法是让用户手动选择他们想要的信息的人。

这似乎并不完全正确，因为在邮件和信使应用程序中，他们找到了一种方法来获取那些通过电子邮件或 IM 发送给你的人的联系信息，而无需我选择这些人。

您如何以编程方式完成此任务？我希望能够一次提取所有联系人数据，或者通过查找链接到这些用户的特定电子邮件来获取联系人数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:16:39.317

我假设在 Mail、People 和 Messaging 应用程序中，他们使用的是直接从用户 Windows Live 帐户中提取的详细信息。我认为您应该能够在您的应用程序中执行此操作，请在此处查找有关 Live SDK 的文档：http: [//msdn.microsoft.com/en-us/library/live/](http://msdn.microsoft.com/en-us/library/live/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T19:50:50.463

我认为现在没有 Picker 是不可能做到这一点的。这将违反一些安全限制。但是，如果您找到方法，请在此处发布。

# silverlight - WP7 在代码中管理 ScrollViewer

> ID：13188657
> 
> 赞同：0
> 
> 时间：2012-11-02T02:54:33.577
> 
> 标签：silverlight, scrollviewer

在 WP7 应用程序中，我在代码中生成 Scrollviewer。这个 Scrollviewer 有一个 StackPanel 作为它的内容，并且在 Stackpanel 中我有一个网格。我没有为这些控件分配任何特定的高度。

就我所追求的外观和行为而言，一切都很好。

我现在想将滚动查看器定位到某个点 - 在我生成它及其子项之后。

看来 ScrollViewer.ScrollToVerticalOffset 方法是我应该使用的。但我无法确定 Scrollviewer 的高度...... Height 和 ActualHeight 都返回 0。我想使用这个高度来确定我应该滚动到哪个点。

即使我硬编码一个 ScrollToVerticalOffet 值，它仍然不会重新定位自己。

有没有一种方法可以让我根据需要定位它，以及如何确定高度值？

*   谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:22:07.250

当我检查页面加载事件中的值时，它工作正常......并且 ScrolltoOffset 似乎也在那里工作正常。

# javascript - 引导程序的日期选择器（仅选择周并使其在 IE 中工作）

> ID：13188665
> 
> 赞同：4
> 
> 时间：2012-11-02T02:56:42.970
> 
> 标签：javascript, date, twitter-bootstrap, datepicker, picker

我正在使用这个日期选择器： [http ://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

2个问题：

1.  任何人都知道如何使它在 Internet Explorer 中工作？就是不行，试试看。
2.  如何配置它以使其选择整个星期？（如果一个人选择一周中的特定一天，传递的值是一周的开始，如果它在悬停时突出显示整个一周也很好）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T08:14:29.950

您可以尝试[https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)，它是 eyecon 的 datepicker 的改进版本。

您也可以考虑使用 HTML5 的内置日期选择器，只需使用

```
<input type="date"> 
```

# knockout-mapping-plugin - 淘汰赛 mappedRemove 和 mappedDestroy 有什么区别？

> ID：13188666
> 
> 赞同：2
> 
> 时间：2012-11-02T02:56:46.993
> 
> 标签：knockout-mapping-plugin

在 Knockout 网站上找不到任何关于此的文档，除了敲除映射插件公开了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T03:10:15.800

*叹息*-只要您发布它-您就会找到答案。具有讽刺意味的是，通过淘汰赛网站： http: [//knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html) 和 [http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

> 它们在功能上等同于常规的 ko.observableArray 函数，但可以根据对象的键来执行操作。

简而言之：

mappedRemove 和 mappedRemoveAll 以与 remove 相同的方式删除元素，但允许您对键执行操作。

mappedDestroy 和 mappedDestroyAll 是为了方便 Ruby 开发人员并将 _destroy 添加到对象中。不知道为什么——我不是 Ruby 开发人员。

# mysql - 确定最常用的一组词 php mysql

> ID：13188667
> 
> 赞同：7
> 
> 时间：2012-11-02T02:56:54.887
> 
> 标签：mysql, string

我试图弄清楚如何确定 mysql 数据集上最常用的单词。

不知道如何去做，或者是否有更简单的方法。阅读一些建议算法的帖子。

例子：

从 24,500 条记录中找出最常用的 10 个单词。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T16:53:06.173

对，这就像一条狗一样运行，并且仅限于使用单个分隔符，但希望能给你一个想法。

```
SELECT aWord, COUNT(*) AS WordOccuranceCount
FROM (SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(concat(SomeColumn, ' '), ' ', aCnt), ' ', -1) AS aWord
FROM SomeTable
CROSS JOIN (
SELECT a.i+b.i*10+c.i*100 + 1 AS aCnt
FROM integers a, integers b, integers c) Sub1
WHERE (LENGTH(SomeColumn) + 1 - LENGTH(REPLACE(SomeColumn, ' ', ''))) >= aCnt) Sub2
WHERE Sub2.aWord != ''
GROUP BY aWord
ORDER BY WordOccuranceCount DESC
LIMIT 10 
```

这依赖于一个名为 integers 的表，其中包含一个名为 i 的列，其中 10 行的值为 0 到 9。它最多可以处理约 1000 个单词，但可以轻松更改以应对更多单词（但速度会更慢）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T23:57:45.883

为什么不全部用 PHP 来完成呢？步骤将是

1.  创建字典（单词 => 计数）
2.  用 PHP 读取数据
3.  把它分成单词
4.  将每个单词添加到字典中（您可能需要先小写并修剪它们）
5.  如果已经在字典中，则增加其计数。如果字典中还没有，设置 1 作为它的值（count = 1）
6.  迭代您的字典元素以找到最高的 10 个值

我不会在 SQL 中这样做，主要是因为它最终会更复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T01:55:02.443

一般的想法是找出每个字段中有多少定界符（例如空格），并`SUBSTRING_INDEX()`为每个这样的字段循环运行。将其填充到临时表中具有能够以块、并行等方式运行它的额外好处。将一些 SP 放在一起执行此操作应该不会太麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-28T00:10:12.073

```
SELECT `COLUMNNAME`, COUNT(*) FROM `TABLENAME` GROUP BY `COLUMNNAME` 
```

它非常简单且有效... :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-14T16:09:25.280

稍微改进一下，使用 AND Sub2.aWord not in 从列表中删除停用词（停用词列表）

```
SELECT aWord, COUNT(*) AS WordOccuranceCount
FROM (SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(concat(txt_msg, ' '), ' ', aCnt), ' ', -1) AS aWord
FROM mensagens
CROSS JOIN (
SELECT a.i+b.i*10+c.i*100 + 1 AS aCnt
FROM integers a, integers b, integers c) Sub1
WHERE (LENGTH(txt_msg) + 1 - LENGTH(REPLACE(txt_msg, ' ', ''))) >= aCnt) Sub2
WHERE Sub2.aWord != '' AND Sub2.aWord not in ('a','about','above', .....)
GROUP BY aWord
ORDER BY WordOccuranceCount DESC
LIMIT 10 
```

# oracle - 如何知道安装的 Oracle Client 是 32 位还是 64 位？

> ID：13188670
> 
> 赞同：50
> 
> 时间：2012-11-02T02:57:36.330
> 
> 标签：oracle, 64-bit, oracleclient

操作系统：Windows 2008 服务器 R2

甲骨文客户端：11.2

非常感谢

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-07-23T22:34:47.613

在 Windows 中找到此问题的一种简单方法是从 Oracle 主目录的 bin 目录运行 SQLPlus，然后检查任务管理器。如果它是 32 位版本的 SQLPlus，您将在 Processes 选项卡上看到如下所示的进程：

```
sqlplus.exe *32 
```

如果是 64 位，则该过程将如下所示：

```
sqlplus.exe 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-10-17T20:14:59.940

转到`%ORACLE_HOME%\inventory\ContentsXML`文件夹并打开 `comps.xml`文件

在~第二个屏幕上查找 <DEP_LIST>。
如果以下行有

*   `PLAT="NT_AMD64"`那么这个 Oracle Home 是 64 位的。
    *   `PLAT="NT_X86"`然后 - 32 位。

    您可能同时安装了 32 位和 64 位 Oracle Homes。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-03-13T20:39:04.053

对我来说超级简单且效果很好的一件事是从 cmd 提示符执行 TNSPing：

```
TNS Ping Utility for 32-bit Windows: Version 11.2.0.3.0 - Production on 13-MAR-2015 16:35:32 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-05T04:14:02.450

在 Linux 中：

1）找到sqlplus所在的位置，

```
[oracle@LINUX db_1]$ `which sqlplus`
/app/oracle/product/11.2.0/db_1/bin/sqlplus 
```

2）确定文件类型，

[oracle@LINUX db_1]$ `file /app/oracle/product/11.2.0/db_1/bin/sqlplus`

/app/oracle/product/11.2.0/db_1/bin/sqlplus：ELF 64 位 LSB 可执行文件，x86-64，版本 1 (SYSV)，动态链接（使用共享库）。对于 GNU/Linux 2.6.18，没有剥离。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-17T02:28:07.627

上面关于 lib 和 lib32 文件夹的链接都不适用于 Oracle Client 11.2.0 但我在[OTN 社区](https://community.oracle.com/thread/1078026)中找到了这个：

> 至于检查客户端安装以尝试判断它是 32 位还是 64 位，您可以检查注册表，32 位主目录将位于 HKLM>Software>WOW6432Node>Oracle，而 64 位主目录将位于 HKLM >软件>甲骨文。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-28T14:25:37.950

以下内容取自[此处](http://www.dba-oracle.com/t_client_32_bit_or_64_bit.htm)，此处未提及：

> 如果 Oracle 客户端是 32 位的，它将包含一个“lib”文件夹；但如果它是 64 位 Oracle 客户端，它将同时具有“lib”和“lib32”文件夹。
> 
> 此外，从 Oracle 11.2.0.1 开始，64 位的客户端版本和 32 位的 Oracle 客户端分别提供，并且有一个 $ORACLE_HOME/lib64 目录。
> 
> $ORACLE_HOME/lib/ ==> 32 位 $ORACLE_HOME/lib64 ==> 64 位
> 
> 或者
> 
> $ORACLE_HOME/lib/ ==> 64 位 $ORACLE_HOME/lib32 ==> 32 位

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-02T22:02:27.897

对于 Oracle 12.1 Windows 客户端，查看 TNSPING 命令的输出似乎可行：

在 64 位操作系统上安装 32 位：

> C:>tnsping
> 
> 用于 32 位 Windows 的 TNS Ping 实用程序：版本 12.1.0.2.0 - 于 02-FEB-2 016 15:44:37 生产
> 
> 版权所有 (c) 1997、2014，甲骨文。版权所有。

在 64 位操作系统上安装 64 位：

> D:>tnsping
> 
> 适用于 64 位 Windows 的 TNS Ping 实用程序：版本 12.1.0.1.0 - 于 02-FEB-2 016 16:00:23 生产
> 
> 版权所有 (c) 1997、2013，甲骨文。版权所有。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-02T14:05:51.843

对于 Unix

```
grep "ARCHITECTURE" $ORACLE_HOME/inventory/ContentsXML/oraclehomeproperties.xml 
```

输出是：

```
<PROPERTY NAME="ARCHITECTURE" VAL="64"/> 
```

对于 Windows

```
findstr "ARCHITECTURE" %ORACLE_HOME%\inventory\ContentsXML\oraclehomeproperties.xml 
```

输出可以是：

```
<PROPERTY NAME="ARCHITECTURE" VAL="64"/> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-10-07T03:02:22.527

在 64 位系统上：

32 位驱动程序：`C:\Windows\SysWOW64\odbcad32.exe`

64 位驱动程序：`C:\Windows\System32\odbcad32.exe`

那里也显示了转到驱动程序选项卡版本。

# jquery - jquery 问题我的代码不会启动

> ID：13188677
> 
> 赞同：1
> 
> 时间：2012-11-02T02:58:06.907
> 
> 标签：jquery

```
$(document).ready(function(){
    //image time
    //hide the Section
    $("#biocontent,#educontent,#expcontent,#rescontent,#mobcontent,#concontent,#gamcontent").hide();
    //toggle sections   
    $("#bioH").click(function(){
        $("#biocontent").toggle();
    });
    $("#eduH").click(function(){
        $("#educontent").toggle();
    });
    $("#expH").click(function(){
        $("#expcontent").toggle();      
    });
    $("#resH").click(function(){
        $("#rescontent").toggle();      
    });
    $("#mobH").click(function(){
        $("#mobcontent").toggle();      
    });
    $("#conH").click(function(){
        $("#concontent").toggle();      
    });
    $("#gamH").click(function(){
        $("#gamcontent").toggle();      
    });
    setInterval("swapImages()", 2000);
    //swap images for slideshow
    function swapImages(){
        var active = $("#gallery.active");
        var next = ($("#gallery.active").next().length > 0) ? $("#gallery.active").next() : $("#gallery img:first");
        active.removeClass("active");
        next.fadeIn().addClass("active");
    });     
}); 
```

问题是我的最后一个函数在错误的位置执行我不是所以肯定要放置另一个 jquery 函数可以查看它:) 我需要知道我是否有错误的位置欢呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:05:45.303

错误：
`setInterval("swapImages", 2000);` 和 `function swapImages(){ }); <-- extra ')'`

```
$(document).ready(function(){
//image time
//hide the Section
    $("#biocontent,#educontent,#expcontent,#rescontent,#mobcontent,#concontent,#gamcontent").hide();
//toggle sections   
    $("#bioH").click(function(){
            $("#biocontent").toggle();
        });
        $("#eduH").click(function(){
            $("#educontent").toggle();
        });
        $("#expH").click(function(){
            $("#expcontent").toggle();      
        });
        $("#resH").click(function(){
            $("#rescontent").toggle();      
        });
        $("#mobH").click(function(){
            $("#mobcontent").toggle();      
        });
        $("#conH").click(function(){
            $("#concontent").toggle();      
        });
        $("#gamH").click(function(){
            $("#gamcontent").toggle();      
        });

        setInterval(swapImages, 2000);

      //swap images for slideshow
    function swapImages(){
        var active = $("#gallery.active");
        var next = ($("#gallery.active").next().length > 0) ? $("#gallery.active").next() : $("#gallery img:first");
        active.removeClass("active");
        next.fadeIn().addClass("active");

        }     
}); 
```

无论如何，如果没有看到您的 HTML，我无法提供进一步的帮助，我只知道如果您使用类，所有这些代码都会以几行纯粹的令人敬畏的方式结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:02:42.157

`swapImages`应该按照您编写的方式在全局（窗口）范围内。

# php - jquery提交和直播

> ID：13188686
> 
> 赞同：1
> 
> 时间：2012-11-02T03:00:01.763
> 
> 标签：php, jquery

我有一个 jquery 提交问题。问题是提交后数据没有自动显示。所以我必须点击刷新。

到目前为止，这是我的代码：

显示数据的 PHP 函数

```
function formatTweet($message,$date_post,$profile_pic,$full_name)
{
if(is_string($date_post)) $date_post=strtotime($date_post);

$message=htmlspecialchars(stripslashes($message));

return'
<td>
<a href="#"><img src="'.$profile_pic.'"/></a>
<div class="tweetTxt">
<div class="profile_name">'.$full_name.'</div>
<div class="haps_post">'.$message.'</div>
<div class="post_time">'.relativeTime($date_post).'</div>
</div>
</td>
<tr>';
} 
```

保存数据的PHP函数

```
define('INCLUDE_CHECK',1);
require ("functions.php");
require ("config.php");

if(ini_get('magic_quotes_gpc'))
$_POST['inputField']=stripslashes($_POST['inputField']);
$_POST['username']=stripslashes($_POST['username']);
$date_post = date("Y-m-d G:i");

$_POST['inputField'] = mysql_real_escape_string(strip_tags($_POST['inputField']),$link);

$_POST['username'] = mysql_real_escape_string(strip_tags($_POST['username']),$link);

if(mb_strlen($_POST['inputField']) < 1 || mb_strlen($_POST['inputField'])>140)
die("0");

mysql_query("INSERT INTO messages SET message='".$_POST['inputField']."',username='".$_POST['username']."',date_post='$date_post'");

if(mysql_affected_rows($link)!=1)
die("0");

echo formatTweet($_POST['inputField'],$date_post,$_POST['username'],time()); 
```

有人有想法/建议吗？谢谢。

# java - 对象输入流[Java]

> ID：13188691
> 
> 赞同：0
> 
> 时间：2012-11-02T03:00:24.260
> 
> 标签：java

我是提交 i/o 的新手，所以如果这是一个非常糟糕的问题，我很抱歉。

目前我有一个 add 方法/main 方法和一个 person 类，我的输出流在 add 方法中工作正常：这是方法的顶部

```
 FileOutputStream myFile = null;
        try {
            myFile = new FileOutputStream("txt123.txt");
        } catch (FileNotFoundException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }
        ObjectOutputStream oos = null;
        try {
            oos = new ObjectOutputStream(myFile);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

然后我有两次，因为可以添加两种类型的人

```
oos.writeObject(person);
oos.close();
System.out.println("Done"); 
```

所以我的问题，我如何让输入工作，最后我把它放在哪里，在 add 方法或 main 方法中，我阅读了如何做我在这里所做的事情：[http ://www.mkyong.com/java/如何在 java 中编写一个对象到文件/](http://www.mkyong.com/java/how-to-write-an-object-to-file-in-java/)

他也有阅读对象的指南，但我似乎无法让它工作

*   谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:07:40.500

您将像这样读取刚刚创建的文件：

```
ObjectInputStream in = 
  new ObjectInputStream(new FileInputStream("txt123.txt"));
  // terrible file name, because this is binary data, not text

try{

   Person person = (Person) in.readObject();

finally{
   in.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:11:06.107

您可以将 ObjectOutputStream 与 FileOutputStream 组合如下。我还猜测您需要将读/写代码放在一个地方以允许重用。这是一个在 DAO 中读/写的简单示例。

```
 public static class Person implements Serializable {
    private String name;
    public Person(String name) {
        super();
        this.name = name;
    }
    public String getName() {
        return name;
    }
    @Override
    public String toString() {
        return name;
    }
}

public static class PersonDao {
    public void write(Person person, File file) throws IOException {
        ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream(file));
        oos.writeObject(person);
        oos.close();
    }

    public Person read(File file) throws IOException,
            ClassNotFoundException {
        ObjectInputStream oos = new ObjectInputStream(new FileInputStream(
                file));
        Person returnValue = (Person) oos.readObject();
        oos.close();
        return returnValue;
    }
}

public static void main(String[] args) throws IOException,
        ClassNotFoundException {
    PersonDao personDao = new PersonDao();
    Person alice = new Person("alice");
    personDao.write(alice, new File("alice.bin"));
    Person bob = new Person("bob");
    personDao.write(bob, new File("bob.bin"));

    System.out.println(personDao.read(new File("alice.bin")));
    System.out.println(personDao.read(new File("bob.bin")));
} 
```

# javascript - 为什么图片不能用jquery lightbox弹出？

> ID：13188696
> 
> 赞同：-1
> 
> 时间：2012-11-02T03:00:57.593
> 
> 标签：javascript, jquery, lightbox

我想按照他们的使用方法将`lightbox2`from 添加`http://lokeshdhakar.com/projects/lightbox2/`到我的页面。添加正确的 js 文件和 css 文件。但它不起作用。我跌倒了我的所有操作都是正确的，但是当我单击图像时它无法弹出？它有什么问题。

### [问题演示](http://down123.xxmn.com/wemade/taxonomy/term/4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:17:29.823

看起来您的 jQuery 版本已过时：**1.4.4**。您正在使用的 Lightbox 版本正在尝试调用`on()`. 您至少需要**1.7**版才能使用`on()`.

# google-maps - 如何获得经纬度左上角和右下角谷歌地图 javascript api v3

> ID：13188702
> 
> 赞同：2
> 
> 时间：2012-11-02T03:01:56.663
> 
> 标签：google-maps, google-maps-api-3

我有地图谷歌，我想得到地图的纬度（左上角）和（右下角）。如何得到它？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T03:30:28.880

getBounds() 为您提供了一个 LatLngBounds-objects，其中包含当前视口的 NE 和 SW 坐标。总结 NW 和 SE 应该不难

# html - preg_replace 错误不知道为什么

> ID：13188703
> 
> 赞同：-1
> 
> 时间：2012-11-02T03:02:06.803
> 
> 标签：html, dom, replace

有这个代码......它假设从表单中删除一个非常具体的 JS 行以生成一个无效的 html，这样我以后可以使用 dom 解析器，但它给出了这个错误

```
Warning: preg_replace(): Compilation failed: missing ) at offset 29 in E:\xampp-portable\htdocs\ingeniat\system\replace_html.php on line 18 
```

这是我不知道为什么会发生这种情况的代码，希望你们能提供帮助！

```
<?php
//<input class="correct" readonly="readonly" onmouseover="return overlib('<div 
//class="correctness">Respuesta correcta: -2</div>', STICKY, MOUSEOFF, CAPTION, '
//Respuesta correcta', FGCOLOR, '#FFFFFF');" onmouseout="return nd();" 
//name="resp636911_2" value="-2" size="2" type="text">

$cont = file_get_contents('../test_files/answer.php');
$patterns = array();
$patterns[0] = '/onmouseover="return overlib('."'/";
$patterns[1] = "/', STICKY, MOUSEOFF, CAPTION, 'Respuesta correcta', FGCOLOR, '#FFFFFF');".'" onmouseout="return nd();"/';
$replacements = array();
$replacements[0] = '>';
$replacements[1] = '';
echo preg_replace($patterns, $replacements, $cont);

?> 
```

我在代码开头的注释中定位它的 HTML 片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:27:06.870

首先，您需要转义正则表达式模式上的所有特殊字符。您可以在此处查看详细信息：[http](http://www.regular-expressions.info/characters.html) ://www.regular-expressions.info/characters.html 。

试试这个代码：

```
$cont = '<input class="correct" readonly="readonly" onmouseover="return overlib(\'<div 
class="correctness">Respuesta correcta: -2</div>\', STICKY, MOUSEOFF, CAPTION, \'Respuesta correcta\', FGCOLOR, \'#FFFFFF\');" onmouseout="return nd();" 
name="resp636911_2" value="-2" size="2" type="text">';

$patterns = array();
$patterns[0] = "/onmouseover=\"return overlib\(\'/s";
$patterns[1] = "/\'\, STICKY\, MOUSEOFF\, CAPTION\, \'Respuesta correcta\', FGCOLOR\, \'#FFFFFF\'\);\"\sonmouseout=\"return nd\(\);\"/";

$replacements = array();
$replacements[0] = '>';
$replacements[1] = '';

$var = preg_replace($patterns, $replacements, $cont);
var_dump($var); 
```

# c - 错误：“__attribute__”之前的预期主表达式；错误：预期的';' 在“__attribute__”之前

> ID：13188705
> 
> 赞同：-1
> 
> 时间：2012-11-02T03:02:22.803
> 
> 标签：c

我在 Solaris 10 for x86 上编译一个 C 程序，代码是：

```
#if defined (__GNUC_MINOR__)&&2093<=(__GNUC__*1000+__GNUC_MINOR__) __attribute__ ((__unused__))
#endif 
```

当我编译它时，我收到错误消息：

```
error: expected primary-expression before "__attribute__"; error: expected ';' before "__attribute__" 
```

出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:06:17.117

这需要分布在 3 行中：

```
#if defined (__GNUC_MINOR__)&&2093<=(__GNUC__*1000+__GNUC_MINOR__)
 __attribute__ ((__unused__))
#endif 
```

这将测试您是否使用了合适的 GCC 版本（基于 GCC 版本号），如果是，`unused`则为这些行之前的任何内容生成属性注释。

如所写，表达式根本无效；Solaris 上的 C 预处理器可能看到：

```
#if defined(__GNUC_MINOR__) && 2093 <= (0*1000+0) 0 ((0)) 
```

这根本不是一个有效的表达式。

# python - 简单的 Python 函数——为什么我得到这么多错误？

> ID：13188711
> 
> 赞同：1
> 
> 时间：2012-11-02T03:03:04.077
> 
> 标签：python, string

```
import random

def a():
    str1 = '''Do people need to compare themselves with others in order to appreciate what they have?
        Are widely held views often wrong, or are such views more likely to be correct?
        Is there any value for people to belong only to a group or groups with which they have something in common?
        Is it always best to determine one's own views of right and wrong, or can we benefit from following the crowd?
        Is it more valuable for people to fit in than to be unique and different?
        Are people more likely to be productive and successful when they ignore the opinions of others?
        Should we pay more attention to people who are older and more experienced than we are?
        Should society limit people's exposure to some kinds of information or forms of expression?
        Can a group of people function effectively without someone being in charge?
        Is it important to question the ideas and decisions of people in positions of authority?
        Should society limit people's exposure to some kinds of information or forms of expression?
        Is education primarily the result of influences other than school?
        Should schools help students understand moral choices and social issues?
        Is it always better to be original than to imitate or use the ideas of others?
        Is it better for a society when people act as individuals rather than copying the ideas and opinions of others?
        Is creativity needed more than ever in the world today?
        Can people ever be truly original?
        Do we put too much value on the ideas or actions of individual people?
        Does planning interfere with creativity?
        Do people truly benefit from hardship and misfortune?
        Do we really benefit from every event or experience in some way?
        Do people place too much emphasis on winning?
        Do people learn more from losing than from winning?
        Does true learning only occur when we experience difficulties?
        Does being ethical make it hard to be successful?
        Can knowledge be a burden rather than a benefit?
        Is persistence more important than ability in determining a person's success?
        Is the effort involved in pursuing any goal valuable, even if the goal is not reached
        ?Is identity something people are born with or given, or is it something people create for themselves?
        Is it best for people to accept who they are and what they have, or should people always strive to better themselves?
        Do success and happiness depend on the choices people make rather than on factors beyond their control?
        Are people more likely to be happy if they focus on goals other than their own happiness?
        Is it more important to do work that one finds fulfilling or work that pays well?
        Do highly accomplished people achieve more than others mainly because they expect more of themselves?
        Can people achieve success only if they aim to be perfect?
        Is it best to have low expectations and to set goals we are sure of achieving?
        Is it necessary for people to combine their efforts with those of others in order to be most effective?
        Are organizations or groups most successful when their members pursue individual wishes and goals?
        Do people achieve more success by cooperation than by competition?
        Does fame bring happiness, or are people who are not famous more likely to be happy?
        Are people's actions motivated primarily by a desire for power over others?
        Do people achieve greatness only by finding out what they are especially good at and developing that attribute above all else?
        Are all important discoveries the result of focusing on one subject?
        Does a strong commitment to technological progress cause a society to neglect other values, such as education and the protection of the environment?
        Are there benefits to be gained from avoiding the use of modern technology, even when using it would make life easier?
        Has today's abundance of information only made it more difficult for us to understand the world around us?
        Is the most important purpose of technology today different from what it was in the past?
        Have modern advancements truly improved the quality of people's lives?
        Do newspapers, magazines, television, radio, movies, the Internet, and other media determine what is important to most people?
        Should modern society be criticized for being materialistic?
        Do we benefit from learning about the flaws of people we admire and respect?
        Should we limit our use of the term "courage" to acts in which people risk their own well-being for the sake of others or to uphold a value?
        Should we admire heroes but not celebrities?
        Is there a value in celebrating certain individuals as heroes?
        Do all established traditions deserve to remain in existence?
        Do people need to "unlearn," or reject, many of their assumptions and ideas?
        Should people always prefer new things, ideas, or values to those of the past?
        Do incidents from the past continue to influence the present?
        Do memories hinder or help people in their effort to learn from the past and succeed in the present?
        Is it always necessary to find new solutions to problems?
        Should people always be loyal?
        Do circumstances determine whether or not we should tell the truth?
        Can deception—pretending that something is true when it is not—sometimes have good results?
        Is it sometimes necessary to be impolite?
        Is acting an essential part of everyday life?
        Is compromise always the best way to resolve a conflict?
        Should people choose one of two opposing sides of an issue, or is the truth usually found "in the middle"?
        Is the main value of the arts to teach us about the world around us?
        Can books and stories about characters and events that are not real teach us anything useful?
        Can common sense be trusted and accepted, or should it be questioned?
        Do people put too much emphasis on learning practical skills?
        Should people take more responsibility for solving problems that affect their communities or the nation in general?
        Should people let their feelings guide them when they make important decisions?
        Can people have too much enthusiasm?
        Do images and impressions have too much of an effect on people?
        Are decisions made quickly just as good as decisions made slowly and carefully?
        Should people change their decisions when circumstances change, or is it best for them to stick with their original decisions?
        Is it better to change one's attitude than to change one's circumstances?
        Is criticism—judging or finding fault with the ideas and actions of others—essential for personal well-being and social progress?
        Does having a large number of options to choose from make people happy?'''.replace("'", "")
    list1 = str1.split('        ')
    return list[random.randomint(list1[0],list1[len(list1)])] 
```

我正在尝试创建一个 python 程序，它会随机给我一个论文提示..，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T03:07:24.993

将其更改为使用`random.choice`：另外，您可能希望将标题存储在文本文件中，或者以某种方式腌制它们......

或者只是将它们设置为：

```
titles = [
    'lakjdflasjkfs?',
    'adfasdfssf?',
    'afadff?'
] 
```

示例代码：

```
from random import choice
def blah():
    str1 = '''your huge list here'''
    titles = str1.splitlines()
    return choice(titles) 
```

也许，而不是 splitlines()，你可能想要做

```
titles = [line.strip() + '?' for line in str1.split('?')] 
```

但是如何拆分它取决于您 - 最好先格式化它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T03:35:17.817

运行脚本时出现的错误是：

```
File "script.py", line 66
SyntaxError: Non-ASCII character '\xe2' in file python.py on line 67, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details 
```

这意味着您的脚本中有非 ASCII 字符。我无法在视觉上发现它们，所以我写了一个脚本来为我做这件事：

```
lines = open("script.py").read().split("\n")
for i,l in enumerate(lines):
    for j,c in enumerate(l):
        if not (0 <= ord(c) <= 128):
            print "bad character: line: %d col: %d (%s) [ %x ]" % (i, j, c, ord(c)) 
```

输出：

```
bad character: line: 65 col: 21 (�) [ e2 ]
bad character: line: 65 col: 23 (�) [ 94 ]
bad character: line: 65 col: 72 (�) [ e2 ]
bad character: line: 65 col: 74 (�) [ 94 ]
bad character: line: 81 col: 20 (�) [ e2 ]
bad character: line: 81 col: 22 (�) [ 94 ]
bad character: line: 81 col: 84 (�) [ e2 ]
bad character: line: 81 col: 86 (�) [ 94 ] 
```

看起来您使用的是非 ASCII 连字符。用普通连字符替换它们以解决您的第一个问题。或者，查看将文件的编码指定给 Python 解释器。

第二个问题是您没有`random`正确使用该模块。这是固定的脚本：

```
import random

def a():
    str1 = '''Do people need to compare themselves with others in order to appreciate what they have?
        Are widely held views often wrong, or are such views more likely to be correct?
        Is there any value for people to belong only to a group or groups with which they have something in common?
        Is it always best to determine one's own views of right and wrong, or can we benefit from following the crowd?
        Is it more valuable for people to fit in than to be unique and different?
        Are people more likely to be productive and successful when they ignore the opinions of others?
        Should we pay more attention to people who are older and more experienced than we are?
        Should society limit people's exposure to some kinds of information or forms of expression?
        Can a group of people function effectively without someone being in charge?
        Is it important to question the ideas and decisions of people in positions of authority?
        Should society limit people's exposure to some kinds of information or forms of expression?
        Is education primarily the result of influences other than school?
        Should schools help students understand moral choices and social issues?
        Is it always better to be original than to imitate or use the ideas of others?
        Is it better for a society when people act as individuals rather than copying the ideas and opinions of others?
        Is creativity needed more than ever in the world today?
        Can people ever be truly original?
        Do we put too much value on the ideas or actions of individual people?
        Does planning interfere with creativity?
        Do people truly benefit from hardship and misfortune?
        Do we really benefit from every event or experience in some way?
        Do people place too much emphasis on winning?
        Do people learn more from losing than from winning?
        Does true learning only occur when we experience difficulties?
        Does being ethical make it hard to be successful?
        Can knowledge be a burden rather than a benefit?
        Is persistence more important than ability in determining a person's success?
        Is the effort involved in pursuing any goal valuable, even if the goal is not reached
        ?Is identity something people are born with or given, or is it something people create for themselves?
        Is it best for people to accept who they are and what they have, or should people always strive to better themselves?
        Do success and happiness depend on the choices people make rather than on factors beyond their control?
        Are people more likely to be happy if they focus on goals other than their own happiness?
        Is it more important to do work that one finds fulfilling or work that pays well?
        Do highly accomplished people achieve more than others mainly because they expect more of themselves?
        Can people achieve success only if they aim to be perfect?
        Is it best to have low expectations and to set goals we are sure of achieving?
        Is it necessary for people to combine their efforts with those of others in order to be most effective?
        Are organizations or groups most successful when their members pursue individual wishes and goals?
        Do people achieve more success by cooperation than by competition?
        Does fame bring happiness, or are people who are not famous more likely to be happy?
        Are people's actions motivated primarily by a desire for power over others?
        Do people achieve greatness only by finding out what they are especially good at and developing that attribute above all else?
        Are all important discoveries the result of focusing on one subject?
        Does a strong commitment to technological progress cause a society to neglect other values, such as education and the protection of the environment?
        Are there benefits to be gained from avoiding the use of modern technology, even when using it would make life easier?
        Has today's abundance of information only made it more difficult for us to understand the world around us?
        Is the most important purpose of technology today different from what it was in the past?
        Have modern advancements truly improved the quality of people's lives?
        Do newspapers, magazines, television, radio, movies, the Internet, and other media determine what is important to most people?
        Should modern society be criticized for being materialistic?
        Do we benefit from learning about the flaws of people we admire and respect?
        Should we limit our use of the term "courage" to acts in which people risk their own well-being for the sake of others or to uphold a value?
        Should we admire heroes but not celebrities?
        Is there a value in celebrating certain individuals as heroes?
        Do all established traditions deserve to remain in existence?
        Do people need to "unlearn," or reject, many of their assumptions and ideas?
        Should people always prefer new things, ideas, or values to those of the past?
        Do incidents from the past continue to influence the present?
        Do memories hinder or help people in their effort to learn from the past and succeed in the present?
        Is it always necessary to find new solutions to problems?
        Should people always be loyal?
        Do circumstances determine whether or not we should tell the truth?
        Can deception-pretending that something is true when it is not-sometimes have good results?
        Is it sometimes necessary to be impolite?
        Is acting an essential part of everyday life?
        Is compromise always the best way to resolve a conflict?
        Should people choose one of two opposing sides of an issue, or is the truth usually found "in the middle"?
        Is the main value of the arts to teach us about the world around us?
        Can books and stories about characters and events that are not real teach us anything useful?
        Can common sense be trusted and accepted, or should it be questioned?
        Do people put too much emphasis on learning practical skills?
        Should people take more responsibility for solving problems that affect their communities or the nation in general?
        Should people let their feelings guide them when they make important decisions?
        Can people have too much enthusiasm?
        Do images and impressions have too much of an effect on people?
        Are decisions made quickly just as good as decisions made slowly and carefully?
        Should people change their decisions when circumstances change, or is it best for them to stick with their original decisions?
        Is it better to change one's attitude than to change one's circumstances?
        Is criticism-judging or finding fault with the ideas and actions of others-essential for personal well-being and social progress?
        Does having a large number of options to choose from make people happy?'''.replace("'", "")
    list1 = str1.split('        ')
    return random.choice(list1)

if __name__ == "__main__":
    print a() 
```

# javascript - 缩小到最小级别时八个重复的谷歌地图（谷歌地图 v3）

> ID：13188714
> 
> 赞同：1
> 
> 时间：2012-11-02T03:03:43.400
> 
> 标签：javascript, google-maps

我正在使用来自谷歌的示例代码，如下所示。当我尝试缩小到最小时，会出现大约 8 张地图。它有什么问题？据我了解，缩小到最小时应该只有一张世界地图？有什么可以设置的参数吗？ ![在此处输入图像描述](../Images/c1d50508725b6d9f5081246e52df0761.png)

这是代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAoQaaN9DLOjrVigdieAL_a1ZkFapkZ8_Y&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 6,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
        map.setZoom(3);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

# javascript - jquery addclass 显示图片查询

> ID：13188716
> 
> 赞同：1
> 
> 时间：2012-11-02T03:03:56.663
> 
> 标签：javascript, jquery, html, web

我正在编写一个程序，其中有 16 个 div，每个 div 都有一个唯一的类名，范围从 11、12、13... 44。现在我编写了一个数学函数来从该数组中随机选择一个数字。我想知道如何找到具有随机选择的类名的 div，然后我需要向这个 div 添加一个类。

谁能告诉我为什么添加新类的随机选择的div不显示背景图像（images.png）

```
 <head>
         <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                        <style>
                           .row
                          {
                            width:520px;
                            height:120px;
                            border-color:#333;
                            border-width:1px;
                          }
                           .sq-color
                          {
                            margin: 2px;
                            width:120px;
                            height:120px;
                            float:right;
                            background-color:#6C0;
                          }
                           .mole
                          {
                            background-image:url(images.jpg);
                          }
                   </style>

                    <script>

                           var items = Array(11,12,13,14,21,22,23,24,31,32,33,34,41,42,43,44);
                           var random = items[Math.floor(Math.random()*items.length)]

                           $('.c'+random).addClass('mole');

                   </script>

            <title>Untitled Document</title>
                </head>

                <body>
                    <div class="row">
                          <div class="sq-color c11"></div>
                          <div class="sq-color c12"></div>
                          <div class="sq-color c13"></div>
                          <div class="sq-color c14"></div>
                    </div>
                    <div class="row">
                          <div class="sq-color c21"></div>
                          <div class="sq-color c22"></div>
                          <div class="sq-color c23"></div>
                          <div class="sq-color c24"></div>
                    </div>
                    <div class="row">
                          <div class="sq-color c31"></div>
                          <div class="sq-color c32"></div>
                          <div class="sq-color c33"></div>
                          <div class="sq-color c34"></div>
                    </div>
                    <div class="row">
                          <div class="sq-color c41"></div>
                          <div class="sq-color c42"></div>
                          <div class="sq-color c43"></div>
                          <div class="sq-color c44"></div>
                    </div>
              </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:09:36.860

用这个：

```
$(function() {
    var items = Array(11,12,13,14,21,22,23,24,31,32,33,34,41,42,43,44);
    var random = items[Math.floor(Math.random()*items.length)];

    $('.c'+random).addClass('mole');
}); 
```

当文件准备好时。

**编辑：**

并添加 jquery 文件：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

**检查图像**

```
$(function() {
    ​var i = new Image();
    i.src = 'images.jpg'​;
    i.onerror = function(e) {
        alert('error on load image');
    };

    var 
        items = Array(11,12,13,14,21,22,23,24,31,32,33,34,41,42,43,44),
        index = Math.floor(Math.random()*items.length), 
        random = items[index];

    $('.c'+random).addClass('mole');
}); 
```

# java-ee-6 - 注销后 Shiro UnknownSessionException

> ID：13188718
> 
> 赞同：3
> 
> 时间：2012-11-02T03:04:35.023
> 
> 标签：java-ee-6, shiro

我目前正在开发 JavaEE6 堆栈中的 Web 应用程序，并且我已经集成了 Shiro 以实现安全性。我认为身份验证和授权现在正常工作，我有最后一个问题。

当我注销时，我遇到了 UnknownSessionException，这是我的配置和检查代码：

web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <!-- Welcome page -->
    <welcome-file-list>
        <welcome-file>home.xhtml</welcome-file>
    </welcome-file-list>

    <listener>
        <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
    </listener>

    <filter>
        <filter-name>ShiroFilter</filter-name>
        <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>ShiroFilter</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
        <dispatcher>ERROR</dispatcher>
    </filter-mapping>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Map these files with JSF -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
</web-app> 
```

shiro.ini

```
[main]
saltedJdbcRealm = com.czetsuya.commons.web.security.shiro.JdbcRealmImpl

# any object property is automatically configurable in Shiro.ini file
saltedJdbcRealm.jndiDataSourceName = czetsuyaPortal 

# the realm should handle also authorization
saltedJdbcRealm.permissionsLookupEnabled = true

# If not filled, subclasses of JdbcRealm assume "select password from users where username  =  ?"
# first result column is password, second result column is salt 
saltedJdbcRealm.authenticationQuery  =  SELECT password, salt FROM czetsuya_users WHERE username  =  ?

# If not filled, subclasses of JdbcRealm assume "select role_name from user_roles where username  =  ?"
saltedJdbcRealm.userRolesQuery  =  SELECT name FROM czetsuya_roles a INNER JOIN czetsuya_user_roles b ON a.id = b.role_id INNER JOIN czetsuya_users c ON c.id = b.user_id WHERE c.username  =  ?

# If not filled, subclasses of JdbcRealm assume "select permission from roles_permissions where role_name  =  ?"
saltedJdbcRealm.permissionsQuery  =  SELECT action FROM czetsuya_permissions WHERE role  =  ?

# password hashing specification, put something big for hasIterations
sha256Matcher = org.apache.shiro.authc.credential.HashedCredentialsMatcher
sha256Matcher.hashAlgorithmName = SHA-256
sha256Matcher.hashIterations = 1
saltedJdbcRealm.credentialsMatcher = $sha256Matcher
securityManager.realms = saltedJdbcRealm

sessionDAO = org.apache.shiro.session.mgt.eis.EnterpriseCacheSessionDAO
sessionDAO.activeSessionsCacheName = shiro-activeSessionCache
securityManager.sessionManager.sessionDAO = $sessionDAO

sessionManager = org.apache.shiro.web.session.mgt.DefaultWebSessionManager
securityManager.sessionManager = $sessionManager

sessionValidationScheduler  =  org.apache.shiro.session.mgt.ExecutorServiceSessionValidationScheduler
# 1,800,000 milliseconds  =  30 mins
sessionValidationScheduler.interval = 1800000
securityManager.sessionManager.sessionValidationScheduler  =  $sessionValidationScheduler

securityManager.sessionManager.sessionIdCookie.domain = com.czetsuya
# 1,800,000 milliseconds = 30 mins
securityManager.sessionManager.globalSessionTimeout = 1800000 

cacheManager = org.apache.shiro.cache.ehcache.EhCacheManager 
cacheManager.cacheManagerConfigFile = classpath:shiro-ehcache.xml
securityManager.cacheManager = $cacheManager

czetsuyaFilter = org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter
czetsuyaFilter.loginUrl = /faces/login.xhtml
czetsuyaFilter.unauthorizedUrl = /faces/login.xhtml
# logout.redirectUrl = /faces/login.xhtml

[urls]
/login.xhtml = czetsuyaFilter
/secure/** = czetsuyaFilter
/api/** = noSessionCreation, czetsuyaFilter
# /logout = logout 
```

我调用注销的部分：

```
public String logout() {
    Subject subject = SecurityUtils.getSubject();
    if (subject != null) {
        subject.logout();
    }

    return "/home.xhtml?faces-redirect=true";
} 
```

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:13:04.953

此配置的问题在于：

```
securityManager.sessionManager.globalSessionTimeout = 1800000 
```

应该注释掉。它不适用于 shiro 的本机会话。

或者另一种选择是使用 HttpSession （不是 shiro）。这是配置文件：

```
[main]
saltedJdbcRealm = com.czetsuya.commons.web.security.shiro.JdbcRealmImpl

# any object property is automatically configurable in Shiro.ini file
saltedJdbcRealm.jndiDataSourceName = dropshipDS 

# the realm should handle also authorization
saltedJdbcRealm.permissionsLookupEnabled = true

# If not filled, subclasses of JdbcRealm assume "select password from users where username  =  ?"
# first result column is password, second result column is salt 
saltedJdbcRealm.authenticationQuery  =  SELECT password, salt FROM crm_users WHERE disabled = false AND username = ?

# If not filled, subclasses of JdbcRealm assume "select role_name from user_roles where username  =  ?"
saltedJdbcRealm.userRolesQuery  =  SELECT name FROM crm_roles a INNER JOIN crm_user_roles b ON a.id = b.role_id INNER JOIN crm_users c ON c.id = b.user_id WHERE c.username = ?

# If not filled, subclasses of JdbcRealm assume "select permission from roles_permissions where role_name  =  ?"
saltedJdbcRealm.permissionsQuery  =  SELECT action FROM crm_permissions WHERE role = ?

# password hashing specification, put something big for hasIterations
sha256Matcher = org.apache.shiro.authc.credential.HashedCredentialsMatcher
sha256Matcher.hashAlgorithmName = SHA-256
sha256Matcher.hashIterations = 1
saltedJdbcRealm.credentialsMatcher = $sha256Matcher
securityManager.realms = $saltedJdbcRealm

cacheManager = org.apache.shiro.cache.ehcache.EhCacheManager 
cacheManager.cacheManagerConfigFile = classpath:ehcache.xml
securityManager.cacheManager = $cacheManager

dsFilter = org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter
dsFilter.loginUrl = /login.xhtml

roles = com.czetsuya.commons.web.security.shiro.RolesAuthorizationFilter

[urls]
/login.xhtml = dsFilter
/backend/** = dsFilter, roles[backend]
/affiliate/** = dsFilter, roles[affiliate]
/api/** = noSessionCreation, dsFilter
/logout = logout 
```

# python - Python 2.7 中的自定义 JSON 编码器，用于插入纯 JavaScript 代码

> ID：13188719
> 
> 赞同：4
> 
> 时间：2012-11-02T03:04:40.463
> 
> 标签：python, json, python-2.7, python-2.6

我正在尝试将部分 Python 2.6 代码升级到 Python 2.7。此代码使用该`json`模块生成一些 JavaScript（不兼容 JSON），然后将其插入脚本的其余部分。

一般的想法是能够插入代码或引用在别处定义的变量：它不打算用作 JSON 数据，而是 JavaScript 代码。

这是适用于 Python 2.6 的自定义编码器：

```
import json

class RawJavaScriptText:
    def __init__(self, jstext):
        self._jstext = jstext
    def get_jstext(self):
        return self._jstext

class RawJsJSONEncoder(json.JSONEncoder):
    def _iterencode_default(self, o, markers=None):
        if isinstance(o, RawJavaScriptText):
            yield self.default(o)
        else:
            json.JSONEncoder._iterencode_default(self, o, markers)

    def default(self, o):
        if isinstance(o, RawJavaScriptText):
            return o.get_jstext()
        else:
            return json.JSONEncoder.default(self, o)

testvar = {
   'a': 1,
   'b': 'abc',
   # RawJavaScriptText will be inserted as such, no serialisation.
   'c': RawJavaScriptText('function() { return "Hello World"; }'),
   'd': RawJavaScriptText('some_variable_name')
}

print json.dumps(testvar, cls=RawJsJSONEncoder) 
```

使用 Python 2.6，我们得到了所需的结果：

```
{ "a": 1, "c": function() { return "Hello World"; },
  "b": "abc", "d": some_variable_name } 
```

使用 Python 2.7，一切都变成了字符串，从而失去了 JavaScript 代码的有效性：

```
{ "a": 1, "c": "function() { return \"Hello World\"; }",
  "b": "abc", "d": "some_variable_name" } 
```

（作为旁注，这仅与一组预定义的原始 JavaScript 值一起使用，以防止潜在的注入或滥用。）

当然，这样做的原因是Python 2.7 版本的模块中不存在`_iterencode_default`方法。诚然，它一开始并不是要被覆盖的。`JSONEncoder``json`

在 Python 2.7 中是否有另一种方法可以实现这一目标？使用 JSON 库的基础能够以这种方式生成 JavaScript 代码是相当方便的。

**编辑：**这是完整的工作解决方案，按照 James Henstridge 的建议使用替换。我正在为替换令牌使用随机 UUID，这应该可以防止任何冲突。这样，这是一个直接替代 Python 2.6 和 2.7 的版本。

```
import json
import uuid

class RawJavaScriptText:
    def __init__(self, jstext):
        self._jstext = jstext
    def get_jstext(self):
        return self._jstext

class RawJsJSONEncoder(json.JSONEncoder):
    def __init__(self, *args, **kwargs):
        json.JSONEncoder.__init__(self, *args, **kwargs)
        self._replacement_map = {}

    def default(self, o):
        if isinstance(o, RawJavaScriptText):
            key = uuid.uuid4().hex
            self._replacement_map[key] = o.get_jstext()
            return key
        else:
            return json.JSONEncoder.default(self, o)

    def encode(self, o):
        result = json.JSONEncoder.encode(self, o)
        for k, v in self._replacement_map.iteritems():
             result = result.replace('"%s"' % (k,), v)
        return result

testvar = {
   'a': 1,
   'b': 'abc',
   'c': RawJavaScriptText('function() { return "Hello World"; }'),
   'd': [ RawJavaScriptText('some_variable_name') ],
   'e': {
       'x': RawJavaScriptText('some_variable_name'),
       'y': 'y'
   }
}

print json.dumps(testvar, cls=RawJsJSONEncoder) 
```

结果（2.6 和 2.7）：

```
{"a": 1, "c": function() { return "Hello World"; },
 "b": "abc",
 "e": {"y": "y", "x": some_variable_name},
 "d": [some_variable_name]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:43:49.250

当在幕后使用的 C 扩展扩展为涵盖更多编码过程时，您使用的未记录的私有接口似乎已经消失。

`RawJavaScriptText`一种替代方法是为您的值插入占位符字符串，并对输出进行后处理`dumps`以将这些占位符转换为您需要的形式。

例如：

```
>>> data = {'foo': '@@x@@'}
>>> print json.dumps(data)
{"foo": "@@x@@"}
>>> print json.dumps(data).replace('"@@x@@"', 'some_variable_name')
{"foo": some_variable_name} 
```

如果您的 JSON 包含不受信任的数据，您将需要小心这种技术：您不希望处于一个局外人可以意外地将此类占位符添加到输出的位置。

# javascript - 根据菜单中的选择更改值

> ID：13188721
> 
> 赞同：0
> 
> 时间：2012-11-02T03:04:50.210
> 
> 标签：javascript, jquery, html

我正在尝试使用 jQuery 和一些基本的 javascript 函数来完成我的价格估算器。

我想要做的是`total`根据下拉菜单中的选择更改我的变量的值。我的价格不是单价，所以我需要为一组选项设定一个价格。通过查看我的 JS 代码您会明白（我尝试过的不起作用）

这是我的[小提琴](http://jsfiddle.net/72Jbe/)。

这是我的 JS 代码：

```
var total=0;
$('#total span').text(total);

if  (document.getElementById("paperSelect").value == "14 PT 1" && document.getElementById("printedSelect").value == "Front Only" && document.getElementById("quantitySelect").value == "500" && document.getElementById("turnaroundSelect").value == "4 days")
{
total=150; 
} 
```

这是我的 HTML 代码：

```
 <form id="calculator">

    <center>
      <label class="titleLabels">Business cards</label></center>

     <label class="formLabels">Dimensions :</label>
    <select id="sizeSelect" class="formSelects">
      <option value="3.5x2">3.5&quot; x 2&quot;</option>
      <option value="3.5x1.25">3.5&quot; x 1.25&quot;</option>
    </select>

    <label class="formLabels">Paper :</label>
    <select id="paperSelect" class="formSelects">
        <option value="14 PT 1" selected="selected">14 PT Cardstock Gloss</option>
        <option value="14 PT 2">14 PT Cardstock Matte</option>
    </select>

    <label class="formLabels">Printed :</label>
    <select id="printedSelect" class="formSelects">
        <option value="Front Only" selected="selected">Front Only</option>
        <option value="Front and Back">Front and Back</option>
    </select>

    <label class="formLabels">Quantity :</label>
    <select id="quantitySelect" class="formSelects">
            <option value="250">250</option>
            <option value="500" selected="selected">500</option>
    </select>

    <label class="formLabels">Production :</label>
    <select id="turnaroundSelect" class="formSelects">
        <option value="5 days" selected="selected">5 days</option>
        <option value="4 days">4 days</option>
    </select>

    <div id="totalBox">
        <label class="formLabels" id="total"> Total : $<span></span></label>
    </div>

<!-- hidden values -->    
    <input type="hidden" id="sizeSelect_value" value="50" name="formValues" />
    <input type="hidden" id="paperSelect_value" value="20" name="formValues" />
    <input type="hidden" id="printedSelect_value" value="0" name="formValues" />
    <input type="hidden" id="quantitySelect_value" value="25" name="formValues" />
    <input type="hidden" id="turnaroundSelect_value" value="5" name="formValues" />

    </form>​
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:14:00.963

这是一个工作小提琴：http: [//jsfiddle.net/manishie/72Jbe/3/](http://jsfiddle.net/manishie/72Jbe/3/)

这是修改后的 Javascript：

```
var total=0;
$('#total span').text(total);

$('form').on('change', 'select', function() { 
    if  (document.getElementById("paperSelect").value == "14 PT 1" && document.getElementById("printedSelect").value == "0" && document.getElementById("quantitySelect").value == "30" && document.getElementById("turnaroundSelect").value == "15")
{
    total=150; 
    $('#total span').text(total);
}

}); 
```

第一个问题是您匹配的是文本描述，而不是 if 语句的第二、第三和第四部分的值。

第二个问题是您需要将此附加到选择标签的更改事件中。

第三个问题是您在更改后没有保存新的总数。

运行 fiddle，将底部值更改为 4 天就可以了。​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:13:05.123

您必须实际更改线路

```
<option value="14 PT 2">14 PT Cardstock Matte</option> 
```

至

```
<option value="14 PT 2" selected="selected">14 PT Cardstock Matte</option> 
```

而不仅仅是改变 Select 的“值”。

你可以这样做：

```
$("#paperSelect option[selected=selected]").removeAttr("selected") ;
$("#paperSelect option[value=" + value + "]").attr("selected","selected") ; 
```

编辑：只是让事情更漂亮

# actionscript-3 - 将实际变量对象传递给函数

> ID：13188723
> 
> 赞同：0
> 
> 时间：2012-11-02T03:05:40.577
> 
> 标签：actionscript-3, flash, function, variables

问题很简单：我需要将实际变量传递给函数。

```
private var test:String = "KKK";
trace (" Before --->>> " + test);
testFunction(test);
trace (" Next --->>> " + test);

private function testFunction(d:String):void{
   d = "MMM";
} 
```

结果：

```
Before --->>> KKK
Next --->>> KKK 
```

结果是正确的，但是，我想要的是，将实际`test`变量发送到我的函数并更改它。所以我想要这样的输出：

```
Before --->>> KKK
Next --->>> MMM 
```

有什么解决办法吗？

感谢您的回答，但如果我有这样的代码，我需要将实际变量传递给我的函数：

```
if ( lastPos == -1 ){// if this is first item 
    flagLEFT = "mid";
    tempImageLEFT = new Bitmap(Bitmap(dataBANK[0]["lineimage" + 10]).bitmapData);
}else if (nextPos == -1){// if this is the last position
    flagRIGHT = "mid";
    tempImageRGHT = new Bitmap(Bitmap(dataBANK[0]["lineimage" + 13]).bitmapData);
} 
```

如您所见，变化在`flagLEFT`和中`tempImageRGHT`。此外，我对可以正常处理的数字（10 和 13）进行了更改。我需要这样的东西：

```
private function itemFirstLast(flag:String, bmp:Bitmap, pos:int):void{
    flag = "mid";
    bmp = new Bitmap(Bitmap(dataBANK[0]["lineimage" + pos]).bitmapData);
} 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:40:42.170

一种方法是返回新字符串并将其分配给 test ：

```
private var test:String = "KKK";
trace (" Before --->>> " + test);
test = testFunction(test);
trace (" Next --->>> " + test);

private function testFunction(d:String):String{
   d = "MMM";
   return d;
} 
```

这仍然没有传递实际的字符串对象，但测试字符串会改变。字符串在 AS3 中按值传递，如果您不想实际传递它，可以将其包装在一个对象中：

```
var object:Object {
   "test":"KKK"
};
trace (" Before --->>> " + object["test"]);
testFunction(object);
trace (" Next --->>> " + object["test"]);

private function testFunction(o:Object):void{
    o["test"] = "MMM";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T08:09:31.047

您需要将其包装在类实例中：

```
class StringValue{
    function StringValue( value : String ) : void{
        this.value = value;
    }
    public var value : String;

    public function toString() : String{
        return value;
    }
}

private var test:StringValue = new StringValue( "KKK" );
trace (" Before --->>> " + test);//traces 'KKK'
testFunction(test);
trace (" Next --->>> " + test);//traces 'MMM'

private function testFunction(d:StringValue):void{
   d.value = "MMM";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T12:05:33.893

请参考以下链接：

[http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f56.html](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f56.html)

您需要将其包装在 Object 中。

# javascript - Chrome Web App：无法在游戏循环中执行功能

> ID：13188726
> 
> 赞同：0
> 
> 时间：2012-11-02T03:05:53.243
> 
> 标签：javascript, google-chrome, content-security-policy

我是 Chrome Web Apps 的初学者，正在尝试将 Bump'n'Jump 的 JavaScript/HTML5 克隆打包为打包应用程序。我遇到了 Chrome 的安全策略：

```
function pump() {
    while (1) {

        game_loop();
        var now = timeGetTime();
        var time_diff = next_time - now;
        next_time += (1000 / 60);

        if (time_diff>0) {
            // we have time left
            setTimeout("pump()", time_diff);
            break;
        }
        // debug("frametime exceeded: " + (-time_diff));
    }
} 
```

它拒绝运行`setTimeout("pump()", time_diff);`，说

```
Refused to evaluate script because it violates the following Content Security Policy      directive: "default-src 'self' chrome-extension-resource:". Note that 'script-src' was not explicitly set, so 'default-src' is used as a fallback. 
```

该错误与代码无关，因为它在浏览器中的 Chrome 之外运行，Chrome 的安全性似乎不喜欢它。谁能告诉我为什么它不想运行`pump()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:43:06.460

不知道这是否会有所帮助，但请尝试以下操作：替换`setTimeout`字符串参数：

```
function pump() {
    while (1) {

        game_loop();
        var now = timeGetTime();
        var time_diff = next_time - now;
        next_time += (1000 / 60);

        if (time_diff>0) {
            // we have time left
            setTimeout(pump, time_diff);
            break;
        }
        // debug("frametime exceeded: " + (-time_diff));
    }
} 
```

`setTimeout`使用字符串作为or中的执行参数`setInterval`等同于`eval`and 被认为是不好的做法。

# mercurial - 如何获取当前分支的所有负责人？

> ID：13188728
> 
> 赞同：4
> 
> 时间：2012-11-02T03:06:01.670
> 
> 标签：mercurial

有没有一种简单的方法可以获取当前分支的所有负责人？

`hg branch`目前，我通过perform 和之后获得当前分支名称`hg heads branchname`。

那么有什么捷径可以`current branch name`防止使用 2 个命令吗？

PS：在 bash 我们可以做

```
hg heads `hg branch` 
```

但是是否有使用修订集语言的本机和跨平台 mercurial 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T23:57:19.057

是的，使用

```
$ hg heads . 
```

该`hg heads`命令采用可选的修订标识符。如果你运行`hg heads X`，你会得到分支的头`X`——注意额外的间接性。这意味着您可以使用`.`（这意味着工作副本父修订版）来获取当前分支的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T04:09:10.020

待定！

*   `hg heads -r "min(branch(.))` ~~和 branch(.)~~ "(min() 因为“如果指定了 STARTREV，则只会显示那些是**STARTREV 后代的**头。”)

*   `hg log -r "head() and branch(.)"`

# c - #ifdef #else - 没有选择任何分支

> ID：13188732
> 
> 赞同：1
> 
> 时间：2012-11-02T03:06:26.520
> 
> 标签：c, c-preprocessor

我有以下代码

```
#if defined(TESTING)
#define TEST_FAILED_IN_VMC(...) TestFailed(__FILE__, __LINE__, __VA_ARGS__)
#define TEST_FAILED_IN_UNIT_TEST(...) TestFailedInUnitTest(__VA_ARGS__)
#else
#define TEST_FAILED_IN_VMC(...)
#define TEST_FAILED_IN_UNIT_TEST(...)
#endif 
```

并拨打电话`TEST_FAILED_IN_VMC(peripheral, testSuiteName, testName, "Internal coding error; bad state (%d)", state);`

并且编译器符合`testSuiteName`并且`testName`未定义 - 即使`#TESTING`未定义。

[更新]编译器还说`"Error 3 implicit declaration of function 'TEST_FAILED_IN_VMC'`

* * *

[更新]请忽略此行下方的非常。问题在上面。谢谢。

所以，我试过这个 [Update]`else`应该是`#else`，然后我被告知`TESTING`不反对。那么，为什么上面的代码不起作用？

```
#if defined(TESTING)
#error "Testing is defined <<<<<<<<<<<<<<<<<<<<<<<<"
wf
else
#error "Testing is NOT defined <<<<<<<<<<<<<<<<<<"
eyh6
#endif

#ifdef TESTING
#error "Testing is defined @@"
ehye
else
#error "Testing is NOT defined @@"
5he567
#endif

#error "Sample error ###" 
```

编译器给出的唯一错误是`Error 3 #error "Sample error ###"`

知道出了什么问题吗？（Atmel AVR Studio，它基于 Microsoft Visual Studio`。

许多，许多，许多其他`#if defined`的工作都很好......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:08:07.620

而不是`else`，用于`#else`使用正确的预处理器指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T03:08:10.577

你错过了 s`#`之前`else`的。

编辑：对于您添加的真正问题，我尝试了以下代码，它在 gcc 4.5.2 中编译和运行没有任何问题。

```
#include <stdio.h>

#if defined(TESTING)
#define TEST_FAILED_IN_VMC(...) TestFailed(__FILE__, __LINE__, __VA_ARGS__)
#define TEST_FAILED_IN_UNIT_TEST(...) TestFailedInUnitTest(__VA_ARGS__)
#else
#define TEST_FAILED_IN_VMC(...)
#define TEST_FAILED_IN_UNIT_TEST(...)
#endif

int main()
{
        TEST_FAILED_IN_VMC
        (
                peripheral
                , testSuiteName
                , testName
                , "Internal coding error; bad state (%d)"
                , state
        );
        printf("Test successful\n");
        return 0;
} 
```

那么，您使用的是什么编译器（以及什么版本）？

# html - 背景图像未渲染

> ID：13188733
> 
> 赞同：0
> 
> 时间：2012-11-02T03:06:35.417
> 
> 标签：html, css

我有一个背景图像正在加载到浏览器中，但它没有在页面上呈现。这是代码：

**HTML**

```
<body>
  <div id="mainContainer">
  </div>
</body> 
```

**CSS**

```
#mainContainer
{
   background-image:url('bckgrdImg.png');
} 
```

而已。我只需要渲染图像。同样，当我在 Chrome 中检查页面时，我看到图像正在加载到浏览器中，但它不在网页上。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:08:08.017

尝试给你的 div 一些宽度和高度。这是因为如果你看它，div 的高度为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T04:18:38.540

嗨，现在至少定义`min-height`你的，`div` 因为你`r div id width`是默认的`100%`，而`height is 0`不是至少定义`min-height`你的`div`

**像这样**

```
#mainContainer
{
   background-image:url('bckgrdImg.png');
   min-height:200px;  // height define according your design or background images
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T03:08:48.947

一个链接会很有帮助。

但请先尝试在#mainContainer 上设置宽度和高度。

喜欢：

```
#mainContainer
{
    width: 100%;
    height: 100%;
   background-image:url('bckgrdImg.png');
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T03:09:38.940

删除单引号

```
#mainContainer
{
   background-image:url(bckgrdImg.png);
} 
```

您可能需要为此 div 定义维度。当 div 中没有任何内容，没有宽度和高度 css 时，div 将显示为不可见，因为它是 0px x 0px :)

```
#mainContainer
{
   background-image:url(bckgrdImg.png);
   height:100%;
   width:100%
} 
```

# php - 在 PHP 中选择逗号和括号之间的值

> ID：13188739
> 
> 赞同：0
> 
> 时间：2012-11-02T03:07:31.017
> 
> 标签：php, regex, extract

我有

```
$string = "sw $t4, -16($t2)"; 
```

如何提取`-16`？我在尝试使正则表达式起作用时遇到了很多麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:12:05.043

试试这个表达式：`/,(.*?)\(/s`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:22:52.550

或者，没有正则表达式：

```
$start  = strpos( $string, ',') + 1;
$end = strlen( $string) - strpos( $string, '(') - 1;
$number = substr( $string, $start, $end); 
```

或者，另一种使用方式`strstr()`：

```
$number = substr( strstr( strstr( $string, ','), '(', true), 1); 
```

# android - 如何知道屏幕在 Android 中使用 320-hdpi 或 320-mdpi

> ID：13188743
> 
> 赞同：1
> 
> 时间：2012-11-02T03:07:50.903
> 
> 标签：android, android-screen, android-screen-support

我想在我的代码中知道我的设备是使用 320-hdpi 还是 320-mdpi 资源。可能吗？

我经历了一些这样的例子，[但](https://stackoverflow.com/questions/10536701/call-a-function-based-on-the-devices-screen-size-hdpi-ldpi-mdpi)它给了我通用密度像素（如 mdpi、ldpi 和 hdpi）。但我想确切地知道我的设备使用了哪些资源数据。无论是 320-hdpi、320-mdpi 还是 320-ldpi。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:04:51.843

我认为您可以`DisplayMetrics`为此使用课程。

使用以下代码获取显示指标。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

然后你可以通过`metrics.desity`

如果密度为 1，则将使用 mdpi 资源。如果它小于 1，则将使用 ldpi 资源。如果它的 1.5 比 hdpi 资源将被使用。如果它的 2 比 xhdpi 资源将被使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:02:49.690

从你的`Activity`尝试...

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

然后，您可以查看各个字段`metrics`以找出显示器的物理和 dpi 特性。

请参阅[DisplayMetrics](http://developer.android.com/reference/android/util/DisplayMetrics.html)文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:30:37.660

您可以在您的设备上安装此应用程序

```
https://play.google.com/store/apps/details?id=com.roysolberg.android.developertools 
```

转到“资源限定符”，它将为您提供所有信息，例如您的设备屏幕尺寸（正常、大、xlarge）和屏幕密度（ldpi、mdpi、hdpi...）

# multithreading - 为什么我的程序用一个核心而不是两个核心更快？

> ID：13188747
> 
> 赞同：8
> 
> 时间：2012-11-02T03:08:10.000
> 
> 标签：multithreading, haskell, parallel-processing

我目前正在尝试了解如何在 Haskell 中并行编程。我正在关注 Simon Peyton Jones 和 Satnam Singh 的论文“A Tutorial on Parallel and Concurrent Programming in Haskell”。源代码如下：

```
module Main where
import Control.Parallel
import System.Time

main :: IO ()
main = do
      putStrLn "Starting computation....."
      t0 <- getClockTime
      pseq r1 (return())
      t1 <- getClockTime
      putStrLn ("sum: " ++ show r1)
      putStrLn ("time: " ++ show (secDiff t0 t1) ++ " seconds")
      putStrLn "Finish."

r1 :: Int
r1 = parSumFibEuler 38 5300

-- This is the Fibonacci number generator
fib :: Int -> Int
fib 0 = 0
fib 1 = 1
fib n = fib (n-1) + fib (n-2)

-- Gets the euler sum
mkList :: Int -> [Int]
mkList n = [1..n-1]

relprime :: Int -> Int -> Bool
relprime x y = gcd x y == 1

euler :: Int -> Int
euler n = length $ filter (relprime n) (mkList n)

sumEuler :: Int -> Int
sumEuler = sum.(map euler).mkList

-- Gets the sum of Euler and Fibonacci (NORMAL)
sumFibEuler :: Int -> Int -> Int
sumFibEuler a b = fib a + sumEuler b

-- Gets the sum of Euler and Fibonacci (PARALLEL)
parSumFibEuler :: Int -> Int -> Int
parSumFibEuler a b =
  f `par` (e `pseq`(f+e))
    where
    f = fib a
    e = sumEuler b

-- Measure time
secDiff :: ClockTime -> ClockTime -> Float
secDiff (TOD secs1 psecs1) (TOD secs2 psecs2)
  = fromInteger (psecs2 -psecs1) / 1e12 + fromInteger (secs2- secs1) 
```

我使用以下命令编译它：

```
ghc --make -threaded Main.hs 
```

a) 使用 1 个核心运行它：

```
./Main +RTS -N1 
```

b) 使用 2 个核心运行它：

```
./Main +RTS -N2 
```

但是，一个核心运行了 53.556 秒。然而，两个核心运行了 73.401 秒。我不明白 2 核实际上如何运行得比 1 核慢。也许这个小程序的消息传递开销太大了？与地雷相比，该论文具有完全不同的结果。以下是输出详细信息。

对于 1 个核心：

```
Starting computation.....
sum: 47625790
time: 53.556335 seconds
Finish.
  17,961,210,216 bytes allocated in the heap
      12,595,880 bytes copied during GC
         176,536 bytes maximum residency (3 sample(s))
          23,904 bytes maximum slop
               2 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     34389 colls,     0 par    2.54s    2.57s     0.0001s    0.0123s
  Gen  1         3 colls,     0 par    0.00s    0.00s     0.0007s    0.0010s

  Parallel GC work balance: -nan (0 / 0, ideal 1)

                        MUT time (elapsed)       GC time  (elapsed)
  Task  0 (worker) :    0.00s    (  0.00s)       0.00s    (  0.00s)
  Task  1 (worker) :    0.00s    ( 53.56s)       0.00s    (  0.00s)
  Task  2 (bound)  :   50.49s    ( 50.99s)       2.52s    (  2.57s)

  SPARKS: 0 (0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time   50.47s  ( 50.99s elapsed)
  GC      time    2.54s  (  2.57s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time   53.02s  ( 53.56s elapsed)

  Alloc rate    355,810,305 bytes per MUT second

  Productivity  95.2% of total user, 94.2% of total elapsed

gc_alloc_block_sync: 0
whitehole_spin: 0
gen[0].sync: 0
gen[1].sync: 0 
```

对于 2 核：

```
Starting computation.....
sum: 47625790
time: 73.401146 seconds
Finish.
  17,961,210,256 bytes allocated in the heap
      12,558,088 bytes copied during GC
         176,536 bytes maximum residency (3 sample(s))
         195,936 bytes maximum slop
               3 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     34389 colls, 34388 par    7.42s    4.73s     0.0001s    0.0205s
  Gen  1         3 colls,     3 par    0.01s    0.00s     0.0011s    0.0017s

  Parallel GC work balance: 1.00 (1432193 / 1429197, ideal 2)

                        MUT time (elapsed)       GC time  (elapsed)
  Task  0 (worker) :    1.19s    ( 40.26s)      16.95s    ( 33.15s)
  Task  1 (worker) :    0.00s    ( 73.40s)       0.00s    (  0.00s)
  Task  2 (bound)  :   54.50s    ( 68.67s)       3.66s    (  4.73s)
  Task  3 (worker) :    0.00s    ( 73.41s)       0.00s    (  0.00s)

  SPARKS: 0 (0 converted, 0 overflowed, 0 dud, 0 GC'd, 0 fizzled)

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time   68.87s  ( 68.67s elapsed)
  GC      time    7.43s  (  4.73s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time   76.31s  ( 73.41s elapsed)

  Alloc rate    260,751,318 bytes per MUT second

  Productivity  90.3% of total user, 93.8% of total elapsed

gc_alloc_block_sync: 12254
whitehole_spin: 0
gen[0].sync: 0
gen[1].sync: 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T04:12:15.920

```
r1 = sumFibEuler 38 5300 
```

我相信你的意思是

```
r1 = parSumFibEuler 38 5300 
```

在我的配置上（`parSumFibEuler 45 8000`只有一次运行）：

*   当 N1 = 126.83s
*   当 N2 = 115.46s

我怀疑`fib`函数比`sumEuler`. 这可以解释 -N2 的低改进。在你的情况下不会有一些偷工减料。

有了记忆，你的斐波那契函数会好很多，但我认为这不是你想要尝试的。

编辑：正如评论中提到的，我认为使用 -N2 你有很多中断，因为你有两个可用的内核。
我的配置（4核）示例`sum $ parMap rdeepseq (fib) [1..40]`

*   使用 -N1 大约需要 26 秒
*   使用 -N2 大约需要 16 秒
*   使用 -N3 大约需要 13 秒
*   使用 -N4 大约需要 30 秒（嗯，Haskell 程序并不孤单）

从[这里](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/using-smp.html#ftn.id3086824)：

> 使用机器中的所有处理器时要小心：如果您的某些处理器正在被其他程序使用，这实际上会损害性能而不是提高性能。

# node.js - （重新）从 json 填充 mongodb 集合 - mongoose

> ID：13188748
> 
> 赞同：0
> 
> 时间：2012-11-02T03:08:19.360
> 
> 标签：node.js, mongodb, mongoose

嗨，有没有办法使用 mongoose 从 json 数组中重新填充 mongo 集合？

我有这个架构。

```
var UserNote_Schema = new Schema({

user_id: {type:ObjectId, ref:require('../User/User_Schema.js')},

note: {type:String},

created: {type:Date},

last_mod: {type:Date}

}); 
```

并希望使用此 json 填充它并将其保存到集合中。

```
 {"_id":"506b8922a6bd97d322000011",
"user_id":"504aaeef898f541527000012",
"note":"a note","created":"2012-03-10T00:38:58.000Z",
"last_mod":"2012-03-10T00:38:58.000Z"} 
```

我的目标是在运行一些添加删除和更改其中一些数据的测试后将我的数据库重置为某个状态。但是，如果有更方便的方法可以从 mongoose/mongo 中的先前状态实现数据库重置，我将非常感谢任何指针。保留版本信息也很好。

谢谢

# compiler-construction - 编译器中的类型检查

> ID：13188750
> 
> 赞同：7
> 
> 时间：2012-11-02T03:08:37.473
> 
> 标签：compiler-construction, typechecking

我目前正在尝试创建一个 TypeChecker，它将成功地对 MiniJava 程序进行类型检查。在过去的 10 个小时里，我一直在研究它，盯着它看，但我什至不知道从哪里开始。我已经放弃按时完成项目，但我仍然想了解它是如何完成的。我们得到了完整的 MiniJava 解析器和一组用于遍历抽象语法树的类以及两个不同的默认访问者，DepthFirstVisitor 和 GJDepthFirst。我们应该扩展这些访问者以完成项目。

我了解需要完成的非常基本的概念：我们需要捕获解析器无法捕获的代码中的错误。我们需要在 2 遍中运行代码。第一遍是构建符号表（？），第二遍是使用符号表来检查。这个对吗？但是后来我不知道从哪里或如何开始在代码中实现它。

我意识到这不是一个真正的问题.......但是任何形式的指导或帮助将不胜感激。我班上有几个朋友和我在同一条船上。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:40:17.300

由于您的语言类似于 Java，因此您可以进行简单的类型传播，而不是更通用的类型推断。首先，您必须定义一个新的 AST，每个表达式都用其类型进行注释。然后，执行深度优先（用于表达式）/广度优先（用于块语句）从旧 AST 转换为新 AST，对每个节点应用简单规则：

*   每个变量都由其类型进行注释，并且由于您一直在对块进行广度优先处理，因此您必须在引用变量的那一刻固定所有变量类型。这适用于类字段、方法参数和局部范围的变量。
*   每个文字都会产生一个默认类型（字符串是字符串，整数是 32 位整数，浮点数是双精度等）
*   二元算术运算会根据一些排名规则插入隐式强制转换（选择任何一个，这并不重要）
*   三元运算符检查第一个参数是否为布尔值并且其他两个参数是否属于同一类型
*   方法调用在这里是最复杂的事情：您必须获得第一个可能的带有参数类型的重载方法，您可以将所有参数隐式转换为该方法。如果发生冲突，您应该怎么做。
*   等等...

语句不能用类型注释，但您必须检查它们的表达式参数类型并可能进行隐式转换。您也可以在此阶段进行推断`var`或`auto`类型（请注意，这不是“类型推断”，只是类型传播的一种特殊情况）。

# java - JFormattedTextField 和 Integer 对象之间的比较

> ID：13188755
> 
> 赞同：1
> 
> 时间：2012-11-02T03:09:54.500
> 
> 标签：java, swing, integer, jformattedtextfield

我有一个奇怪的问题。

我正在编写一个简单的数独程序。现在一切正常，除了这个方法：

```
public static void checkAnswerKey()
    {
        int rowCounter = 0;
        int columnCounter = 0;

        System.out.println("The answers that are correct are (F is incorrect): ");

        for (rowCounter = 0; rowCounter <= 8; rowCounter += 1)
        {
            for (columnCounter = 0; columnCounter <= 8; columnCounter += 1)
            {
                if (gui.userInputFormattedArray[rowCounter][columnCounter].getText() == io.puzzleAnswerArray[rowCounter][columnCounter].toString())
                {
                    gui.userInputFormattedArray[rowCounter][columnCounter].setBackground(gui.correctAnswer);
                    System.out.print(gui.userInputFormattedArray[rowCounter][columnCounter].getText() + " ");
                }
                else
                {
                    gui.userInputFormattedArray[rowCounter][columnCounter].setBackground(gui.incorrectAnswer);
                    System.out.print(gui.userInputFormattedArray[rowCounter][columnCounter].getText() + io.puzzleAnswerArray[rowCounter][columnCounter].toString() + " ");
                    //System.out.print("F" + " ");
                }
            }
            System.out.println();
        } 
```

这取自 game.java 文件。

现在，这个方法应该根据内部答案检查用户输入。它确实如此。但一切都变得不正确。

以下是 io.java 和 gui.java 文件中的声明/实例化。

```
public class gui extends JFrame implements ActionListener{ 
```

...

```
 public static JFormattedTextField[][] userInputFormattedArray = new JFormattedTextField[9][9];
    //Create the container.
    public Container pane = getContentPane();
    //The font the game uses.
    public Font gameFont = new Font("Arial", Font.PLAIN, 30);
    //Correct and incorrect answer colors.
    static Color correctAnswer = new Color(100, 255, 100);
    static Color incorrectAnswer = new Color(255, 100, 100); 
```

这两个方法在构造函数中启动：

```
public void showTextFields()
    {
        int rowCounter = 0;
        int columnCounter = 0;

        for (rowCounter = 0; rowCounter <= 8; rowCounter += 1)
        {
            for (columnCounter = 0; columnCounter <= 8; columnCounter += 1)
            {
                userInputFormattedArray[rowCounter][columnCounter] = new JFormattedTextField();
                pane.add(userInputFormattedArray[rowCounter][columnCounter]);
                userInputFormattedArray[rowCounter][columnCounter].setFont(gameFont);
                userInputFormattedArray[rowCounter][columnCounter].setHorizontalAlignment(JTextField.CENTER);
            }
        }
    }

    public void setTextFields()
    {
        String heldString;
        boolean notEditable = false;
        int rowCounter = 0;
        int columnCounter = 0;

        for (rowCounter = 0; rowCounter <= 8; rowCounter += 1)
        {
            for (columnCounter = 0; columnCounter <= 8; columnCounter += 1)
            {
                if (game.puzzleUserShownArray[rowCounter][columnCounter] != 0)
                {
                    heldString = game.puzzleUserShownArray[rowCounter][columnCounter].toString();
                    userInputFormattedArray[rowCounter][columnCounter].setText(heldString);
                    userInputFormattedArray[rowCounter][columnCounter].setEditable(notEditable);
                }
            }
        }
    } 
```

这就是答案的来源：

```
public static Integer[][] puzzleAnswerArray = new Integer[9][9];

public void getPuzzle() throws FileNotFoundException
    {
        Scanner puzzlesInFile = new Scanner(new FileReader("C:\\Users\\owner\\Desktop\\eclipse\\projects\\Sudoku\\Sudoku\\src\\puzzles.dat"));
        String searchParameter = "#puzzle" + intPuzzleSeed;
        int rowCounter = 0;
        int columnCounter = 0;

        //Prints the search parameter into the console, ensuring accuracy with the RNG.
        System.out.print(searchParameter);
        System.out.println();

        //
        puzzlesInFile.findWithinHorizon(searchParameter, 0);
        while (puzzlesInFile.hasNextInt())
        {
            for (rowCounter = 0; rowCounter <= 8; rowCounter += 1)
            {
                for (columnCounter = 0; columnCounter <= 8; columnCounter += 1)
                {
                    puzzleAnswerArray[rowCounter][columnCounter] = puzzlesInFile.nextInt();
                    System.out.print(puzzleAnswerArray[rowCounter][columnCounter].toString() + " ");
                }
                System.out.println();
            }
        }
        puzzlesInFile.close();
    } 
```

我希望这是足够的信息。我错过了一些明显的东西吗？顺便说一下，这是一个已完成拼图的控制台输出：

正确答案是（F 不正确）： 11 22 33 44 55 66 77 88 99 44 55 66 77 88 99 11 22 33 77 88 99 11 22 33 44 55 66 22 33 44 55 66 77 88 99 11 55 66 77 88 99 11 22 33 44 88 99 11 22 33 44 55 66 77 33 44 55 66 77 88 99 11 22 66 77 88 99 11 22 33 44 55 99 11 22 33 44 55 66 77

这是图形用户界面：

---编辑：我无法发布 GUI，因为我的声望少于 10。一旦我到达那里，我将发布一个 GUI 的 .png 文件。---

我的猜测是，即使“字符串”是相同的，但由于某种原因，它并不认为它是相同的。如果您需要查看更多代码，请告诉我，但我想我涵盖了所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:14:47.920

您正在使用`==`字符串相等性检查。

```
if(gui.userInputFormattedArray[rowCounter][columnCounter].getText() == io.puzzleAnswerArray[rowCounter][columnCounter].toString()) { 
```

改用`.equals()`方法。这不仅适用于字符串，也适用于任何类型的对象。如果是对象`==`，则检查对象的身份。

尝试：

```
if(gui.userInputFormattedArray[rowCounter][columnCounter].getText().equals(io.puzzleAnswerArray[rowCounter][columnCounter].toString())) { 
```

# nginx - Nginx 配置：autoindex 子目录

> ID：13188762
> 
> 赞同：2
> 
> 时间：2012-11-02T03:10:26.627
> 
> 标签：nginx

我是 nginx 的新手。

我需要在我的网络服务器上自动索引目录，包括子目录。所以，我像这样配置我的 niginx：

```
server {
    listen       80;
    server_name  collect.funshion.com;
    root         /home/html;
    access_log  /home/nginx/access.log;
    #charset koi8-r;                                                       

    location / {                                                          
        autoindex                   on;
        autoindex_exact_size        off;
        autoindex_localtime         on;
    }
} 
```

但它只适用于根目录/，它让我感到困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:02:33.310

既然你得到了 403 禁止，那可能是 nginx 用户对子目录没有足够的权限吗？

# ios - 如何使用 Cordova 呈现所有 iPhone 联系人的列表（电话间隙）

> ID：13188763
> 
> 赞同：6
> 
> 时间：2012-11-02T03:10:30.397
> 
> 标签：ios, cordova, ios6, spine.js

我正在尝试创建一个应用程序，它使用以下代码（咖啡脚本）列出 iPhone 通讯录中的所有联系人

```
listContacts: ->
    options = new ContactFindOptions()
    options.filter = '';
    options.multiple = true
    fields = ["id", "photos", "name", "phoneNumbers"]
    navigator.contacts.find(fields, @onSuccess, @onError, options)

onSuccess: (contacts) ->
    console.log contacts.length

onError: (error) ->
    console.log error 
```

这似乎对一堆联系人很有效。但是有 3000 个联系人将永远不会返回。有趣的是，虽然这在 iOsSimulator 上完美运行。

可以检索的联系人数量是否有任何限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:56:44.927

我在 300 个联系人中遇到了同样的问题，大约花了 5 分钟。我打补丁后只需要10秒。

这是我的拉取请求：[https ://github.com/phonegap/phonegap/pull/19](https://github.com/phonegap/phonegap/pull/19)

他们必须为每张图片生成一个临时文件，并且他们正在使用疯狂的循环来查找空闲文件路径。就像是 ：

```
do {        
  filePath = [NSString stringWithFormat:@"%@/photo_%03d.jpg", docsPath, i++];       
} while ([fileMgr fileExistsAtPath:filePath]); 
```

现在我使用[mktemp](http://developer.apple.com/library/ios/documentation/system/conceptual/manpages_iphoneos/man3/mktemp.3.html)，一切都更快了。

如果您不需要完整的分辨率图片，您也可以替换：

```
CFDataRef photoData = ABPersonCopyImageData(self.record); 
```

经过 ：

```
CFDataRef photoData = ABPersonCopyImageDataWithFormat(self.record, kABPersonImageFormatThumbnail); 
```

希望对你有帮助！

编辑 ：

每次启动应用程序时，IOS 都会刷新临时目录：

> 您有责任删除您创建的任何临时文件。系统会在启动时清理它们，但这可能需要很长时间。
> 
> 来自：[http ://cocoadev.com/wiki/NSTemporaryDirectory](http://cocoadev.com/wiki/NSTemporaryDirectory)

如果您不想减慢应用程序的引导速度，则应始终使用基于联系人 ID 的相同文件路径。如果文件已经存在，您将节省清理和写入时间：

```
- (NSObject*)extractPhotos
{
    NSMutableArray* photos = nil;

    if (ABPersonHasImageData(self.record)) {

        //CFDataRef photoData = ABPersonCopyImageDataWithFormat(self.record, kABPersonImageFormatThumbnail);
        CFDataRef photoData = ABPersonCopyImageData(self.record);
        NSData* data = (__bridge NSData*)photoData;

        // write to temp directory and store URI in photos array
        // get the temp directory path
        NSString* docsPath = [NSTemporaryDirectory ()stringByStandardizingPath];
        NSError* err = nil;
        int recordId = ABRecordGetRecordID(self.record);

        NSFileManager* fileMgr = [[NSFileManager alloc] init];
        NSString* filePath = [NSString stringWithFormat:@"%@/photo_%03d.jpg", docsPath, recordId];
        BOOL hasImage = NO;

        if ([fileMgr fileExistsAtPath:filePath]) {
            hasImage = YES;
        } else if ([data writeToFile:filePath options:NSAtomicWrite error:&err]) {
            hasImage = YES;
        }

        if (hasImage) {
            photos = [NSMutableArray arrayWithCapacity:1];
            NSMutableDictionary* newDict = [NSMutableDictionary dictionaryWithCapacity:2];
            [newDict setObject:filePath forKey:kW3ContactFieldValue];
            [newDict setObject:@"url" forKey:kW3ContactFieldType];
            [newDict setObject:@"false" forKey:kW3ContactFieldPrimary];
            [photos addObject:newDict];
        }

        CFRelease(photoData);
    }
    return photos;
} 
```

**编辑（08/01/2013）**：仅供参考：合并到科尔多瓦：[http://git-wip-us.apache.org/repos/asf/cordova-ios/commit/c6a1dbe3](http://git-wip-us.apache.org/repos/asf/cordova-ios/commit/c6a1dbe3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T13:29:27.380

首先你必须从终端命令行添加插件

```
$ cordova plugin add org.apache.cordova.contacts 
```

onDeviceReady 你可以调用一个方法来打开联系人列表

```
function chooseContact() {
    var options = new ContactFindOptions();
    options.fields = ["displayName", "name", "emails", "phoneNumbers"];
    navigator.contacts.chooseContact(onSuccess, options);
}

function onSuccess(id, contact) {
    console.log(JSON.stringify(contact));
} 
```

# llvm - 不再有 ConstantArray::get(Context&, char*&, bool)？

> ID：13188764
> 
> 赞同：3
> 
> 时间：2012-11-02T03:10:44.697
> 
> 标签：llvm, llvm-c++-api

查看 LLVM Demo，创建常量字符串的官方方法是：

常量* consStr = ConstantArray::get(mod->getContext(), "hello", true);

但是，它不起作用！我会得到关于以下的编译错误：

```
test.cc:860:78: error: no matching function for call to llvm::ConstantArray::get(llvm::LLVMContext&, char*&, bool)’
/remote/vgrnd66/wli/Tools/llvm-3.1/include/llvm/Constants.h:354:20: note: candidate is: static llvm::Constant* llvm::ConstantArray::get(llvm::ArrayType*, llvm::ArrayRef<llvm::Constant*>) 
```

看llvm源码，没有成员函数支持

```
llvm::ConstantArray::get(llvm::LLVMContext&, char*&, bool) 
```

我正在使用 llvm3.1。

我的代码有什么问题，或者这个构造函数在新源中被删除了吗？

这是 LLVM 源代码的区别。

LLVM2.8

```
class ConstantArray : public Constant {

  // ConstantArray accessors
  static Constant *get(const ArrayType *T, const std::vector<Constant*> &V);
  static Constant *get(const ArrayType *T, Constant *const *Vals,
                       unsigned NumVals);

  /// This method constructs a ConstantArray and initializes it with a text
  /// string. The default behavior (AddNull==true) causes a null terminator to
  /// be placed at the end of the array. This effectively increases the length
  /// of the array by one (you've been warned).  However, in some situations
  /// this is not desired so if AddNull==false then the string is copied without
  /// null termination.
  static Constant *get(LLVMContext &Context, StringRef Initializer,
                       bool AddNull = true);
} 
```

LLVM3.1

```
class ConstantArray : public Constant {
public:
  // ConstantArray accessors
  static Constant *get(ArrayType *T, ArrayRef<Constant*> V); 
```

}

显然，2.8 中有 3 个构造函数，但 3.1 中只有一个用于 ConstantArray 的构造函数。现在我不知道如何创建一个常量字符串...... :(

任何帮助都值得赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T03:36:45.760

好的。我发现它已移至 ConstantDataArray。LLVM 演示 cgi 似乎已过时:)。

```
class ConstantDataArray : public ConstantDataSequential {
  /// getString - This method constructs a CDS and initializes it with a text
  /// string. The default behavior (AddNull==true) causes a null terminator to
  /// be placed at the end of the array (increasing the length of the string by
  /// one more than the StringRef would normally indicate.  Pass AddNull=false
  /// to disable this behavior.
  static Constant *getString(LLVMContext &Context, StringRef Initializer,
                             bool AddNull = true);

} 
```

# r - 当R中发生错误并且程序中断时切换到其他功能

> ID：13188768
> 
> 赞同：1
> 
> 时间：2012-11-02T03:11:15.107
> 
> 标签：r, glm

> **可能重复：**
> [R中的异常处理](https://stackoverflow.com/questions/2622777/exception-handling-in-r)

我使用`glm.nb`函数来拟合 NB 模型，但有时程序会出错：

`Error in while ((it <- it + 1) < limit && abs(del) > eps) { : missing value where TRUE/FALSE needed`

然后整个程序就崩溃了。现在我编写了另一个可以解决这种收敛问题的函数（这是由于极大的似然值；参见[这篇文章](https://stackoverflow.com/questions/11749977/why-does-glm-nb-throw-a-missing-value-error-only-on-very-specific-inputs)）。

我的问题是：当函数发生故障时，我如何告诉 R 切换到我自己的函数`glm.nb`？

我被告知在源代码中查找错误消息，`glm.nb`然后修改该部分。但是，我没有明确找到这样的代码，想知道 R 中是否有更简单的方法可以跳出分解函数并通过某些`if-else`语句切换到另一个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:46:31.607

两个帖子回答了这个问题（感谢@xin guo 指出正确的方向）：

[捕获错误然后分支逻辑](https://stackoverflow.com/questions/2158780/r-catching-an-error-and-then-branching-logic)

[R中的函数和try()](https://stackoverflow.com/questions/3440373/functions-and-try-in-r)

在我的实验中，我注意到您使用`warning = function(w)`和`error = function(e)`in时的差异`tryCatch()`。如果只有警告，则错误部分将无法识别，反之亦然。确保您从 R 获得正确的消息，并在`tryCatch()`:)中使用相应的参数

# embed - 构造一个在 rpy2 中嵌入 r 代码的函数

> ID：13188772
> 
> 赞同：1
> 
> 时间：2012-11-02T03:12:20.027
> 
> 标签：embed, rpy2, suppress-warnings

我想压制警告。但以下代码不会抑制警告。

```
import rpy2.robjects as robjects

kstest=robjects.r['ks.test']

suppressWarnings=robjects.r['suppressWarnings']

x=robjects.IntVector([1, 2, 3])
y=robjects.IntVector([1, 2, 4, 5])

result=suppressWarnings(kstest(x, y))
print result
print result[1][0] 
```

如果我可以像在 rpy2 中那样构造一个函数并调用该函数，我认为可以抑制警告。

```
f=function(x, y) {
    suppressWarnings(kstest(x, y))
} 
```

但我在 rpy2 文档中找不到示例。有人有一些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:08:53.017

在 rpy2 中执行时，首先评估`suppressWarnings(kstest(x, y))`调用`kstest(x, y)`（并生成警告），然后将返回的结果传递给`suppressWarnings()`.

正在发生的事情是 R 的`suppressWarning()`静音警告由作为参数传递的调用生成。这是可能的，因为在 R 中，参数仅在函数体中需要它们时才被评估；与 Python 的显着差异。

用 rpy2 模仿的方法是构造一个未评估的调用并将其传递给`suppressWarning()`，或者按照您的建议将调用推送到 R 并创建一个将包装调用的 R 函数。该文档显示了如何将[字符串评估为 R 代码](http://rpy.sourceforge.net/rpy2/doc-2.3/html/robjects_rinstance.html#evaluating-a-string-as-r-code)，并带有一个函数示例。

# javascript - 动态数据的遍历数组，用于javascript中的google可视化api

> ID：13188777
> 
> 赞同：0
> 
> 时间：2012-11-02T03:12:48.890
> 
> 标签：javascript, jsp, google-visualization

我正在使用 Google Visualization API 在 JSP 页面上显示图表。使用会话变量，我能够获取包含在 Google Visualization API 中的方法的数据集。我也能够加载数据，但它只检索数组的第一个元素。如何放置数组的所有值？代码如下：

在 AnalyzeUserClient.jsp 中：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['corechart']});
</script>
<script type="text/javascript"> 
var sessionId = <%= (ArrayList<String>)request.getSession().getAttribute("arrayList") %>;

for(var i=0;i<sessionId.length;i++){
if(i%2==0){
    var category = sessionId[i];
}
else{
    var value = sessionId[i];
}
}

function drawVisualization() {
    // Create and populate the data table.
    var data = google.visualization.arrayToDataTable([
      ['Category', 'Value'],
      [category,value],
    ]);

    // Create and draw the visualization.
    new google.visualization.PieChart(document.getElementById('visualization')).
        draw(data, {title:"Percentage of Category for User:"});
  }

  google.setOnLoadCallback(drawVisualization); 
```

```
//HTML Code:
<div id="visualization" style="width: 600px; height: 400px;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:20:02.073

您不能直接从 JSP 变量创建 JavaScript 数组，就像您在代码中尝试做的那样。您必须分别填充每个元素（或将其声明为分解列表）。

您的 JavaScript 代码正在使用一个数组，但您随后创建了两个（标量/普通）变量（类别、值），您将它们添加到变量中`data`- 这些不是列表/数组，因此您将从数组中获取最后 2 个元素只要。

我假设您的原始 ArrayList 包含“对”的值，所以我会尝试这样的事情（未检查，因此可能有错误）：

```
<c:set var="arrayList"><%= (ArrayList<String>)request.getSession().getAttribute("arrayList") %></c:set>
var sessionId = ["${fn:join(arrayList, '","')}"]; // will create a JS list
var categories = [], values = [], tuples = [];

for(var i=0;i<sessionId.length;i++){
    if(i%2==0){
        categories.push(sessionId[i]);
    }
    else{
        values.push(sessionId[i]);
    }
}

// following loop assumes categories and values are the same length
for (var i=0;i<categories.length;i++){
    tuples.push([ categories[i], values[i] ]); // create a list of lists (tuples)
}

function drawVisualization() {
    // Create and populate the data table.
    var data = google.visualization.arrayToDataTable([
      ['Category', 'Value'],
      tuples,
    ]);

    // Create and draw the visualization.
    new google.visualization.PieChart(document.getElementById('visualization')).
    draw(data, {title:"Percentage of Category for User:"});
} 
```

编辑，如果编码为，第二行可能更容易理解：

```
var sessionId = [];
<c:forEach items="${arrayList}" var="id">
    sessionId.push("${id}"); // add them one at a time, assuming string values
</c:forEach> 
```

# javascript - 将大字符串传递给javascript函数

> ID：13188778
> 
> 赞同：0
> 
> 时间：2012-11-02T03:12:59.597
> 
> 标签：javascript, html, razor

我有一个 rssobjects 列表，我正在循环浏览列表并在我的视图中显示那里的属性。单击时，我想将 rss 对象摘要属性发送到 javascript 函数，然后将其显示在模式上，但它似乎不工作。摘要大约有 3000 个字符长。我收到一个错误：Uncaught SyntaxError: Unexpected token ILLEGAL 如果我发送标题或图像 url，或者我手动设置一个“hello world”，它就可以工作。总结会不会很大？

```
 @foreach (var item in Model)
    {
        <div class="metro-section" id="scrollme">
            @foreach (var feed in item.FeedItemsList)
            {

                <div  class="tile" title="@feed.RssTitle" rel="tooltip" >
                    <div class="tile-icon-large">
                        <a class="brand" href="#" onclick="tileClick('@Html.Raw(feed.RssSummary.Length)')"  >
                            <img src="@feed.RssImage" /></a>
                        <img data-bind="attr: { src: icon } " />
                    </div>
                    <span class="tile-label" data-bind="html: label"></span>
                    <span class="tile-counter" data-bind="html: count"></span>
                </div>
            }
        </div>
    }

</div> 
```

```
<p class="modal fade" id="rssIdModal">

 </p>

 <script type="text/javascript">
  function tileClick(summary1) {
    $("#rssIdModal").text(summary1);
    $('#rssIdModal').modal();
   }

 </script> 
```

# css - chrome CSS 参考在哪里

> ID：13188780
> 
> 赞同：2
> 
> 时间：2012-11-02T03:13:13.713
> 
> 标签：css, google-chrome, webkit

有适用于[Safari](https://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/doc/uid/TP30001266-SW1)和[Mozilla](https://developer.mozilla.org/en-US/docs/CSS)的 CSS 参考，Chrome 是否有类似的参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:27:21.927

谷歌没有提供任何信息。由于 Chrome 和 Safari 都使用 webkit 引擎，开发人员可能认为[Safari CSS 参考](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariCSSRef/Introduction.html)就足够了。

您可以考虑为[Webkit 文档](http://www.webkit.org/projects/documentation/index.html)工作做出贡献（Webkit 是一个开源工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:10:02.647

[MDN CSS Reference](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference)是最好的地方。WebKit CSS 支持可以在各个页面的浏览器兼容性表中找到。MDN 还包含一个[Webkit CSS Extensions Reference](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference/Webkit_Extensions)。

不过，它并不完美。并不总是列出共享属性的特定于 Chrome 的值。例如，有一个条目[`-webkit-appearance`](https://developer.mozilla.org/en-US/docs/CSS/-webkit-appearance)，但`slider-vertical`不包含在[有效值列表中](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance#Values)。我不知道在哪里发现了这个值的官方来源。

# c# - 将类定义存储在字典中，稍后实例化

> ID：13188784
> 
> 赞同：3
> 
> 时间：2012-11-02T03:13:42.883
> 
> 标签：c#, dictionary, lazy-loading

我想要做的是如下（所有对象类都有一个公共接口）：

```
MyDict.Add("A", MyAObjectClass); // Not an instance
MyDict.Add("B", MyBObjectClass);
MyDict.Add("C", MyCOjbectClass);
String typeIwant = "B"; // Could be passed to a function or something
MyCommonInterface myobject = MyDict[typeIwant](); 
```

我怎么能编写这样的程序？

这样做的目的是不必创建我将存储在字典中的每种类型的实例（可能是相当多的），而只需实例化我实际要使用的那个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T03:23:00.643

您可以使用 Type 对象存储类型信息：

```
var dict = new Dictionary<String, Type>();

dict.Add("A", typeof(TextBox));
dict.Add("B", typeof(Button)); 
```

并像这样从中创建对象：

```
object a = Activator.CreateInstance(dict["A"]); 
```

这仅适用于具有无参数构造函数的类型。例如，`new TextBox()`. 如果您的类型具有采用相同参数的构造函数，则可以在之后添加参数`dict["A"]`或传递数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T03:26:13.047

我强烈建议使用类似`Unity`or的依赖注入库`Windsor Castle`，但如果你绝对必须这样做，那么你应该这样做：

```
Dictionary<string, System.Type> MyDict = new Dictionary<string, System.Type>();
MyDict.Add("A", typeof(MyAObjectClass));
MyDict.Add("B", typeof(MyBObjectClass));
MyDict.Add("C", typeof(MyCObjectClass));

string typeIwant = "B";
var myobject = Activator.CreateInstance(MyDict[typeIwant]); 
```

# facebook - 由于 Facebook 域和 IP 的随机更改，使用 Facebook API 调用检索图像时的技术问题

> ID：13188787
> 
> 赞同：0
> 
> 时间：2012-11-02T03:14:03.000
> 
> 标签：facebook, image, api, photo

我们正在尝试为一家著名的制药公司网站实现一项功能，该功能需要使用 facebook API 从 facebook 检索图像，以生成结果图像文件。

然而，我们在使用 API 调用检索图像时遇到了技术困难，因为图像来自的 URL 的域和 IP（sphotos-d.ak.fbcdn.net 和 a2.sphotos.ak.fbcdn.net）的随机变化被检索（由于 CDN、DNS 循环和负载平衡）。开发环境相当受限制，无法打开广泛的 IP 地址。

您能否建议我们执行此 API 调用以返回静态 URL 或 IP 的替代解决方案？

下面提供了我们实施的更多细节：

**从 Facebook 获取图像的功能：**

```
function getAlbumPhotos(album_id) {
    var count = 1;
    id = album_id;
    //call FB to get JSON of all photos in an album - the response function is inline
    //and sets the output div  with images and sets up click handlers
    FB.api('/' + id + '/photos', function (response) {
        var nHTML = "";

        //build html for all photos
        for (var i = 0, l = response.data.length; i < l; i++) {
            //photo ids
            photo_id = response.data[i];
            //image url
            image_link = photo_id.source
            nHTML += fbPhotos(count, image_link);
            count++;
        }
        //set the html content
        nHTML = "<h1>"+__("select.friend")+"</h1>" + nHTML + "<div class='clear'></div>";
        $('#myContent').html(nHTML);
                                Cufon.refresh();
        //set click handlers for all new items
        for (var i = 0, l = response.data.length+1; i < l; i++) {
            $('#fbphoto_' + i).click(fbPhoto_click);
        }
        hideBusy();
    }); 
```

代码 FB.api('/' + id + '/photos', function (response) {}) “id”是用户选择的相册id。该语句将返回包含图像数据的 json 类型的图像数据列表（例如完整的图像 url、上传日期、标题）

“完整图片网址”看起来像

[http://a2.sphotos.ak.fbcdn.net/hphotos-ak-snc6/205045_1360429746128_61249_n.jpg](http://a2.sphotos.ak.fbcdn.net/hphotos-ak-snc6/205045_1360429746128_61249_n.jpg)

[http://sphotos-d.ak.fbcdn.net/hphotos-ak-ash4/s720x720/308224_1593433971088_1975239922_n.jpg](http://sphotos-d.ak.fbcdn.net/hphotos-ak-ash4/s720x720/308224_1593433971088_1975239922_n.jpg)

我使用此 URL 在客户端上显示图像并构建明信片

**制作明信片：**

服务器（制作明信片）

```
<?php

$LeftPath = "http://a2.sphotos.ak.fbcdn.net/hphotos-ak-snc6        /205045_1360429746128_61249_n.jpg";
$RightPath = "http://a2.sphotos.ak.fbcdn.net/hphotos-ak-snc6/205045_1360429746128_61249_n.jpg";
$Postcard = imagecreatefromjpeg('images/Postcard/postcard_BG.jpg');
$LeftImage = imagecreatefromjpeg($LeftPath); 
$RightImage =  imagecreatefromjpeg($RightPath); 
imagealphablending($Postcard, false);
imagesavealpha($Postcard, true);
imagecopymerge($Postcard, $LeftImage, 336, 233, 0, 0, 300, 300, 100);
imagecopymerge($Postcard, $RightImage, 642, 276, 0, 0, 300, 300, 100); 

header('Content-Type: image/jpeg');
imagejpeg($Postcard, NULL, 75);
?> 
```

在服务器上，我通过 facebook 的“Full image url”获取图像，并使用 PHP 的 GD Libraly 将其与内部明信片图像（'images/Postcard/postcard_BG.jpg'）合并

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:20:23.957

无法将 API 的响应限制为仅包含特定服务器上的资源。

如果您需要调整防火墙以便访问 Facebook 的服务器，则检索分配给 Facebook 的 IP 地址的完整列表的方法列在文档中：[https ://developers.facebook.com/docs/ApplicationSecurity/](https://developers.facebook.com/docs/ApplicationSecurity/)

目前可以使用以下命令检索：

> whois -h whois.radb.net -- '-i origin AS32934' | grep ^路线

# php - MySQL数据库未从表单接收数据

> ID：13188789
> 
> 赞同：1
> 
> 时间：2012-11-02T03:14:14.320
> 
> 标签：php, mysql

*   项目清单

我目前正在尝试从表单向 mysql 数据库插入数据，但它不断添加一个空字符串，如果有人可以查看我的代码并让我知道是否有问题，我将不胜感激。

表格：

```
<body>
<form method="post" action="input.php">
<input type="text" name="message" size="55">
<input type="submit"name="submit" value="Send">
</form>
</body>
</html> 
```

和PHP

```
<?php
$host="myhost";
$user="myusername";
$database="mydatabase";
$table="mytable";
$connect=mysql_connect("$host","$user","mypassword");
if($connect){
echo "connected<BR/><hr/>";
$connect1=mysql_select_db("$database");
if($connect1){

mysql_query("INSERT INTO mytable(time,msg) VALUES('1','$message')");
echo "$message<BR/><hr/>";
}
}else{
echo "problem";
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:17:01.727

表单使用 POST 方法提交，然后您可以使用访问日期`$_POST`

更改`$message`为`$_POST['message']`

```
mysql_query("INSERT INTO mytable(time,msg) VALUES('1','{$_POST['message']}')");
echo "{$_POST['message']}<BR/><hr/>"; 
```

**警告** 说明：使用`mysqli`或`PDO`。不推荐使用 mysql 函数，它很快就会被弃用。

此外，您应该在将数据插入数据库之前添加验证，以避免 SQL 注入或黑客攻击。您的代码不安全，容易受到攻击。

# python-3.x - find a data type suitable for my cache

> ID：13188791
> 
> 赞同：0
> 
> 时间：2012-11-02T03:14:37.173
> 
> 标签：python-3.x

i want to cache my object in the memory for performance,but also need to recycle them if it's too long not accessed.

every 30 minutes a function would be called , check every cache object , like a file's attributes in windows operation system, each object should have two attributes:last modified time stamp(or a flag) and last accessed time stamp, if the last modified time is great than zero, create a sql for update them in datebase ,and reset the modified time to 0, if the last accessed time is larger than 30 minutes, then delete them from the cache system.

What is the best way to implement them?and is there already a similar system in python so i don't have to reinvent the wheel.

ps. no Memcached. the object should be accessed directly, no serialization and deserialization .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:11:07.123

Either you create a class with these attributes as attributes, or you just use a dictionary. It's a matter of taste, both works. Having a class gives you the possibility to also make methods like "is_old" or "is_modified" etc.

The same goes for the structure to hold all the data. It's basically a giant dictionary, but you might want to wrap it in a class with methods like "purge_old" etc.

# java - 如何将 GSON 的自定义可序列化方法转换为 Generic

> ID：13188792
> 
> 赞同：2
> 
> 时间：2012-11-02T03:14:44.613
> 
> 标签：java, generics, gson

我有以下代码尝试序列化 DT_RowId。事实上，我将创建一个具有 DT_RowId 变量的抽象类。扩展抽象类的任何其他实体也应该序列化该字段。课程如下：

**实体.java**

```
public class Entity extends PersistentObject {
    protected long creationTime;
    protected boolean enabled;
    protected long id; // from PersistentObject
    protected long loginDuration;
    protected boolean online;
    protected String userName;
    protected long DT_RowId;// from PersistentObject
} 
```

**EntityJsonSerializer.java**

```
import java.lang.reflect.Type;
import com.google.gson.*;

public class EntityJsonSerializer implements JsonSerializer<Entity> {
    @Override
    public JsonElement serialize(Entity entity, Type typeOfSrc, JsonSerializationContext context) {
       entity.DT_RowId = entity.id;
       Gson gson = new Gson();
       return gson.toJsonTree(entity);
    }
} 
```

**JSONTest.java**

```
import static org.junit.Assert.*;
import org.junit.Test;
import com.google.gson.*;

public class JSONTest {
    @Test
    public final void testSerializeWithDTRowId() {
        Entity entity = new Entity();
        entity.creationTime = 0;
        entity.enabled = true;
        entity.id = 1;
        entity.loginDuration = 0;
        entity.online = false;
        entity.userName = "someone";

        GsonBuilder builder = new GsonBuilder();
        builder.registerTypeAdapter(Entity.class, new EntityJsonSerializer());
        Gson gson = builder.create();
        String json = gson.toJson(entity);
        String expectedJson = "{\"creationTime\":0,\"enabled\":true,\"id\":1,\"loginDuration\":0,\"online\":false,\"userName\":\"someone\",\"DT_RowId\":1}";
        assertEquals(expectedJson, json);
    }
} 
```

如何使上述代码通用，以便任何扩展抽象类的类都将 DT_RowId 序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:22:06.077

您可以使用以下方法完成此操作：

[`GsonBuilder.registerTypeHierarchyAdapter(Class<?> baseType, Object typeAdapter)`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html#registerTypeHierarchyAdapter%28java.lang.Class,%20java.lang.Object%29)

代替：

[`GsonBuilder.registerTypeAdapter(Type type, Object typeAdapter)`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/GsonBuilder.html#registerTypeAdapter%28java.lang.reflect.Type,%20java.lang.Object%29)

我已经重构了上面的代码并且 JUnit 测试通过了。

## 持久对象.java

```
public abstract class PersistentObject {
    protected long id;
    protected long DT_RowId;
} 
```

## 实体.java

```
public class Entity extends PersistentObject {
    protected long creationTime;
    protected boolean enabled;
    protected long loginDuration;
    protected boolean online;
    protected String userName;
} 
```

## PersistentObjectJsonSerializer.java

```
import java.lang.reflect.Type;
import com.google.gson.*;

public class PersistentObjectJsonSerializer implements JsonSerializer<PersistentObject> {
    @Override
    public JsonElement serialize(PersistentObject persistentObject, Type typeOfSrc, JsonSerializationContext context) {
        persistentObject.DT_RowId = persistentObject.id;
        Gson gson = new Gson();
        return gson.toJsonTree(persistentObject);
    }
} 
```

## JSONTest.java

```
import static org.junit.Assert.*;
import org.junit.Test;
import com.google.gson.*;

public class JSONTest {
    @Test
    public final void testSerializeWithDTRowId() {
        Entity entity = new Entity();
        entity.id = 1;
        entity.creationTime = 0;
        entity.enabled = true;
        entity.loginDuration = 0;
        entity.online = false;
        entity.userName = "someone";

        GsonBuilder builder = new GsonBuilder();
        builder.registerTypeHierarchyAdapter(PersistentObject.class, new PersistentObjectJsonSerializer());
        Gson gson = builder.create();
        String json = gson.toJson(entity);
        String expectedJson = "{\"creationTime\":0,\"enabled\":true,\"loginDuration\":0,\"online\":false,\"userName\":\"someone\",\"id\":1,\"DT_RowId\":1}";
        assertEquals(expectedJson, json);
    }
} 
```

# asp.net-mvc-3 - Openlayers WMS 图层显示为空白，直到我放大

> ID：13188799
> 
> 赞同：0
> 
> 时间：2012-11-02T03:15:46.267
> 
> 标签：asp.net-mvc-3, openlayers, geoserver

我正在尝试使用 Geoserver 作为学习过程将 Openlayers 与 ASP MVC3 集成，但遇到了这个奇怪的问题。当我加载视图时，地图画布会出现默认缩放控件的空白。只有当我按下放大按钮时，地图才会显示。我最初认为这与 ASP 的 Razor View 有关，所以我将其复制到单独的 HTML 文件中，但问题仍然存在。有什么建议么？

```
<html>
<head>
<script type="text/javascript" src="http://openlayers.org/api/OpenLayers.js"></script>
<script type="text/javascript">

    function init() {
        var bounds = new OpenLayers.Bounds(
                    -124.848974, 45.543541,
                    -116.91558, 49.002494);
        var options = {
            maxExtent: bounds,
            maxResolution: 0.0309898203125,
            projection: "EPSG:4326",
            units: 'degrees'
        };
        var map = new OpenLayers.Map('map', options);
        var wms = new OpenLayers.Layer.WMS("Washington County Map", "http://localhost:8080/geoserver/tiger/wms",
            {
                layers: 'tiger:county10',
                format: 'image/png',
                visibility: true,
                isBaseLayer: true,
            });

        map.addLayer(wms);
        map.zoomToExtend(bounds);
    };
</script>
</head>
<body  onload="init()">
<h2>Test</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
</p>

<div id="map" style="width:800px; height:500px;" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:18:08.807

Have you checked the Geoserver settings for zoom levels? You can set the min and max scales where to display each map layer.

# java - 创建一个仅包含字符串的 ArrayList。使用增强的 for 循环打印

> ID：13188802
> 
> 赞同：5
> 
> 时间：2012-11-02T03:15:58.170
> 
> 标签：java, string, for-loop, arraylist

所以这是我的程序：

创建一个仅包含字符串的 ArrayList 按顺序将以下内容添加到列表中

*   玛丽
*   约翰
*   马亨德拉
*   萨拉
*   何塞
*   朱迪

使用增强的 for 循环打印列表 在 Mahendra 前面和 John 之后插入 Harry 然后从列表中删除位置 4

这是我写的：

```
import java.util.ArrayList;
import java.util.Scanner;

public class Name {
    public static void main(String[] args) {
        ArrayList<String> names = new ArrayList<String>();
        Scanner input = new Scanner(System.in);
        names.add(input.nextLine());
        names.add(input.nextLine());
        names.add(input.nextLine());
        names.add(input.nextLine());
        names.add(input.nextLine());
        names.add(input.nextLine());
        names.add(input.nextLine());

        for (String n : names) {
        System.out.println(n);
        }
    }
} 
```

我想我在添加和删除时遇到问题。我相信其他一切都应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:19:53.440

您可能希望使用以下方法来插入和删除：

```
void    add(int index, E element)
 E      remove(int index) 
```

eg`Mahendra`在索引2（索引从0开始），然后添加`Harry`在前面`Mahendra`，只需执行以下操作：

```
 names.add(2, "Harry"); //This will push Mahendra at index 3 
```

要删除当前索引 4，

```
 names.remove(4); 
```

要删除以前的索引 4，现在已成为索引 5，

```
 names.remove(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:27:53.237

indexOf() 将让您找到给定条目的位置， add(index, object) 将让您在索引处插入。

```
public static void main(String[] args) {
    List<String> names = new ArrayList<String>();

    names.add("Mary");
    names.add("John");
    names.add("Mahendra");
    names.add("Sara");
    names.add("Jose");
    names.add("Judy");

    names.add(names.indexOf("Mahendra"), "Harry");

    for (String name : names) {
        System.out.println(name);
    }
} 
```

# c - 在读取文件时如何摆脱“如果”？

> ID：13188804
> 
> 赞同：-1
> 
> 时间：2012-11-02T03:16:48.837
> 
> 标签：c

我的问题是我输入了“if”并且代码没有继续读取文件！我需要继续阅读文件并比较 proxcasa 和 saux！我认为`fseek()`会解决这个问题，但我应该在哪里以及如何在我的代码中使用它？

```
void ler_tabuleiro(lista_tabuleiro *t,FILE *entrada)
{
    TipoTabuleiro tabu;
    char proxcasa[100], regracasa[100], saux[20];
    strcpy(saux,"0");
    strcpy(proxcasa,"0");

    while(!feof(entrada))
    {
        fscanf(entrada," %s ",tabu.casa ); // nessa primeira leitura vamos ver se é tabuleiro

        if(strcmp(tabu.casa,"TABULEIRO")==0)
        {
            fscanf(entrada,"%s",tabu.casa);
        }
        else if( (strcmp(tabu.casa, "JOGADAS") == 0) || (strcmp(tabu.casa, "FIM") == 0) )
        {
            break;
        }

        if(strcmp(proxcasa,saux)==0) // o problema tá aqui !!! como proxcasa vai ser 0 ?
        {
            printf("entrou");
            fscanf(entrada, "%s %s %d",proxcasa,regracasa, &tabu.energia);
            printf("%s %s %s %d ",tabu.casa, proxcasa,regracasa,tabu.energia);
            inserirprimeiro(tabu,t,regracasa);
            strcpy(saux,tabu.casa);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:19:58.090

你应该更清楚你的问题，但我怀疑它是`break`第二个`if`- 这将打破文件读取循环。

我不知道你如何/为什么认为`fseek()`是合适的。

# asp.net - 我的精灵在 jsfiddle（包括在内）中工作，但在我的 asp.net 网站上显示为空白页面。有任何想法吗？

> ID：13188808
> 
> 赞同：0
> 
> 时间：2012-11-02T03:17:11.303
> 
> 标签：asp.net, css, sprite

感谢@jimbertucci 和@Biff MaGriff，我终于能够制作一个精灵图像并且实际上得到了正确的css。我的网站是asp.net/vb。

它**在 jfiddle 中效果很好**！ [这是我的精灵小提琴](http://jsfiddle.net/jasonpaulweber/QWEKA/)，这就是我想要的样子。

SE希望我包含一些代码，所以这基本上就是我正在做的事情。对于 CSS：

```
.clients{
width:231px;
height:136px;
background-image: url(http://www.ussvision.com/images/sprite_clients.jpg);
}
.gm{
background-position: 0px 0px;
} 
```

对于我的 html，我试图以这种方式调用我的精灵图像：

```
<a href="http://www.gm.com" target="_blank">
    <div class="clients gm"></div>
</a> 
```

但是由于某种原因，当我将其上传到服务器时，页面会显示出来并且大小合适。当您将鼠标悬停时，链接就在那里。精灵似乎是功能性的，只是你看不到它；**这是一个没有图像显示**的空白页面！

当我查看页面源代码时，我可以看到我的 div 和类。我没有看到任何指向我的精灵图像的东西，即 sprite-clients.jpg；我不知道我是否应该在页面源代码中看到它......我不知道我可能做错了什么。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:49:30.510

我并没有真正回答我自己的问题，但@Tieson T 建议我尝试只使用**../images/sprite-clients.jpg 而不是完整的 http path**。不管出于什么奇怪的原因，这都成功了！当我使用[http://domain.com/images/sprite-clients.jpg](http://domain.com/images/sprite-clients.jpg)时，它显示为空白。但是当我接受 Tieson 的建议时，它立即出现在所有浏览器中（在 IE8、FF、Chrome 和 Safari 中测试）。

如果您想知道为什么 IIS7 会这样做，或者是什么原因，Tieson 可能会在找到原因后提供更完整的答案。

# c++ - Qt QSharedDataPointer 多重继承菱形模式？

> ID：13188814
> 
> 赞同：0
> 
> 时间：2012-11-02T03:17:45.377
> 
> 标签：c++, qt, multiple-inheritance

我在我的应用程序的 .h 文件中定义了 2 个类

```
class GroupElement : public QSharedData
{
public:
    int Id;
    int GroupIndex;
    QString Title;
    QSharedDataPointer<AccessDescriptor> pAccessDescriptor;
    QString Owner;
};

class Class2 : public GroupElement
{
public:
    QSharedDataPointer<QList<int> >  Categories;
    // ... many other class members
}

class3 : public QObject
{
  Q_OBJECT
public:
template <class T> QSharedDataPointer<QList<T> > toTQList(QVariant qv );
//...more ....
} 
```

在另一个函数中，我尝试为“类别”分配一个值

```
QSharedDataPointer<Class2>
Class3::afunction(QVariantMap o)
{

    QSharedDataPointer<Class2> getResult(new Class2());

    getResult-> Categories = toTQList<int>(o["Categories"]);

    // ... more code ...
} 
```

如图所示编译代码时，编译器会报错“class ... has no member named 'ref'”。这通常表明我需要添加 public QSharedData 作为基类。但在这种情况下，Class2 已经派生自 GroupElement，它以 QSharedData 作为基类。如果我将 QSharedData 作为基类添加到 Class 2，我会收到警告消息“在 'Class2' 中无法访问直接基 'QSharedData' 会造成歧义。我认为可能遇到了多重继承的“钻石问题”之一，但我' m 在 Qt 或 c++ 方面经验不足，不知道如何解决它。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:49:18.020

`QSharedDataPointer`有一个非常具体的用例，您希望在实例之间共享数据，具有写入时复制行为 - 也就是说，只要一个实例尝试修改它，它就会分离，现在它拥有自己的独立复制。为此，`QSharedDataPointer`必须继承自中包含的对象`QSharedData`，它提供了此工作所需的引用计数。

因此，您的困难与菱形图案无关，您根本无法将 a`QList`直接存储在 a 中`QSharedDataPointer`。从您的示例中也不清楚这是您真正想要做的。你实际上想用你的设计来实现什么？很可能 a`QSharedPointer`是你真正想要的。

我建议您阅读[https://www.qt.io/blog/2009/08/25/count-with-me-how-many-smart-pointer-classes-does-qt-have](https://www.qt.io/blog/2009/08/25/count-with-me-how-many-smart-pointer-classes-does-qt-have)以了解 Qt 的智能指针类。

# c# - HRESULT：0xC00CE556 - 将字符串加载到 XML

> ID：13188815
> 
> 赞同：1
> 
> 时间：2012-11-02T03:18:10.213
> 
> 标签：c#, xml, windows-runtime, onedrive

我正在尝试加载一个包含从 SkyDrive 下载的 XML 的字符串。

```
XmlDocument myXML = new XmlDocument();
myXML.LoadXml(importXMLDocument); 
```

当我调用上面的代码时，我收到以下错误：

> HRESULT 异常：0xC00CE556

这是我试图从字符串转换并加载到 XML 文档的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfVehicle xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <vehicle>
    <VehicleName>Tahoe</VehicleName>
    <VehicleYear>2004</VehicleYear>
    <Odometer>97742</Odometer>
    <LicensePlate></LicensePlate>
    <OilWeight>5w-30</OilWeight>
    <OilBrand></OilBrand>
    <OilQuantity>6</OilQuantity>
    <OilFilterModelNumber></OilFilterModelNumber>
    <AirFilterModelNumber></AirFilterModelNumber>
    <TirePressureAll>0</TirePressureAll>
    <TirePressureFrontRight>0</TirePressureFrontRight>
    <TirePressureFrontLeft>0</TirePressureFrontLeft>
    <TirePressureBackRight>0</TirePressureBackRight>
    <TirePressureBackLeft>0</TirePressureBackLeft>
    <OilChangedOdometer>97742</OilChangedOdometer>
    <OilChangedDate>2012-05-04T19:53:53.358-06:00</OilChangedDate>
    <NextOilChangeDate>2012-08-04T19:53:53.358-06:00</NextOilChangeDate>
    <NextOilChangeOdometer>100742</NextOilChangeOdometer>
    <TiresRotated>false</TiresRotated>
    <AirFilterChanged>false</AirFilterChanged>
    <SettingDistance>3000</SettingDistance>
    <SettingMonths>3</SettingMonths>
    <SettingReminder>true</SettingReminder>
    <SettingLiveTile>true</SettingLiveTile>
    <IsTrial>true</IsTrial>
    <VehicleId>2</VehicleId>
  </vehicle>
  <vehicle>
    <VehicleName>Mazda3</VehicleName>
    <VehicleYear>2011</VehicleYear>
    <Odometer>21504</Odometer>
    <LicensePlate>abcdefg</LicensePlate>
    <OilWeight>0w-20</OilWeight>
    <OilBrand></OilBrand>
    <OilQuantity>0</OilQuantity>
    <OilFilterModelNumber></OilFilterModelNumber>
    <AirFilterModelNumber></AirFilterModelNumber>
    <TirePressureAll>0</TirePressureAll>
    <TirePressureFrontRight>0</TirePressureFrontRight>
    <TirePressureFrontLeft>0</TirePressureFrontLeft>
    <TirePressureBackRight>0</TirePressureBackRight>
    <TirePressureBackLeft>0</TirePressureBackLeft>
    <OilChangedOdometer>21504</OilChangedOdometer>
    <OilChangedDate>2012-09-14T18:05:02.298-06:00</OilChangedDate>
    <NextOilChangeDate>2013-02-14T18:05:02.298-07:00</NextOilChangeDate>
    <NextOilChangeOdometer>26504</NextOilChangeOdometer>
    <TiresRotated>false</TiresRotated>
    <AirFilterChanged>false</AirFilterChanged>
    <OilChangeCost>64.75</OilChangeCost>
    <OilChangeNotes>need new tires - $500+</OilChangeNotes>
    <SettingDistance>5000</SettingDistance>
    <SettingMonths>5</SettingMonths>
    <SettingReminder>true</SettingReminder>
    <SettingLiveTile>true</SettingLiveTile>
    <IsTrial>false</IsTrial>
    <VehicleId>2</VehicleId>
  </vehicle>
</ArrayOfVehicle> 
```

更新：

这是我从 SkyDrive 下载 XML 文件的代码（使用 API）：昨晚证实，当从 SKYDrive 下载文件时，这个过程是一个额外的“？” 正在添加。以下是我执行下载和“LoadXml”调用的整个函数。任何帮助表示赞赏。

```
private async void readFileInfo(string folderId)
{
     LiveOperationResult operationResultFile =
     await client.GetAsync(folderId + "/files");

     dynamic resultFile = operationResultFile.Result;
     IDictionary<string, object> fileData = (IDictionary<string, object>)resultFile;
     List<object> files = (List<object>)fileData["data"];

     foreach (object item in files)
     {
          IDictionary<string, object> file = (IDictionary<string, object>)item;

          if (file["name"].ToString() == "ocha.txt")
          {
               LiveDownloadOperationResult DLFile =
               await client.BackgroundDownloadAsync(file["source"].ToString();

                var stream = await DLFile.GetRandomAccessStreamAsync();
                var readStream = stream.GetInputStreamAt(0);

                DataReader reader = new DataReader(readStream);
                uint fileLength = await reader.LoadAsync((uint)stream.Size);

                string content = reader.ReadString(fileLength);

                XmlDocument myXML = new XmlDocument();
                myXML.LoadXml(content.ToString());

                VM.importVehicles(content);

                break;
            }
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:57:20.787

即使读取本地文件，我也能够重现该错误。错误的原因是 DataReader 在内容之前放置了一些额外的字节。您在调试器中看不到它们，但是例如在将读取的内容放入 Notepad++ 时，您会得到一个额外的问号：

```
?<?xml version="1.0" encoding="utf-8"?> 
```

正如我怀疑额外的字节是字节顺序标记（BOM）字节（0xEF 0xBB 0xBF（239 187 191））。

我尝试将 DataReader 的编码显式设置为 UTF8，但这并没有改变任何东西。似乎是 DataReader 中的错误。顺便提一句。从 DataReader 读取字节并尝试使用 Encoding.UTF8.GetString 转换它们时，您会遇到相同的错误。即使该方法也无法识别 BOM。

好的。两种解决方法：

1) 使用 FileIO.ReadTextAsync：

```
string content = await FileIO.ReadTextAsync(file); 
```

2) 使用 StreamReader：

```
using (var stream = await file.OpenReadAsync())
{
   using (var readStream = stream.AsStreamForRead())
   {
      using (StreamReader streamReader = new StreamReader(readStream))
      {
         string content = streamReader.ReadToEnd();
         XmlDocument doc = new XmlDocument();
         doc.LoadXml(content);
      }
   }
} 
```

**更新：**

ReadFileInfo 方法看起来像这样，以避免 BOM 问题。请注意， AsStreamForRead 是 System.IO 中可用的扩展方法（使用 System.IO; 在您的代码中）。

```
private async Task ReadFileInfo(string folderId)
{
   LiveOperationResult operationResultFile =
   await client.GetAsync(folderId + "/files");    

   dynamic resultFile = operationResultFile.Result;
   IDictionary<string, object> fileData = (IDictionary<string, object>)resultFile;
   List<object> files = (List<object>)fileData["data"];

   foreach (object item in files)
   {
      IDictionary<string, object> file = (IDictionary<string, object>)item; 

      if (file["name"].ToString() == "ocha.txt")
      {
         LiveDownloadOperationResult DLFile =
             await client.BackgroundDownloadAsync(file["source"].ToString());  

         using (var stream = await DLFile.GetRandomAccessStreamAsync())
         {
            using (var readStream = stream.AsStreamForRead())
            {
               using (StreamReader streamReader = new StreamReader(readStream))
               {
                  string content = streamReader.ReadToEnd();
                  XmlDocument doc = new XmlDocument();
                  doc.LoadXml(content); 

                  VM.importVehicles(content); 

                  break;
               }
            }
         }
      }
   }
} 
```

# powershell - 为什么括号会导致赋值产生结果？

> ID：13188822
> 
> 赞同：1
> 
> 时间：2012-11-02T03:18:59.243
> 
> 标签：powershell

考虑一下 PowerShell：

```
PS> $x = 'y'
PS> ($x = 'y')
y 
```

为什么添加括号会导致值被打印？

**编辑：**一些更有趣的案例：

```
 PS> $z = ($x = 'y')
 PS> $z
 y
 PS> $( $x = $y )
 PS> $z = $( $x = $y )
 PS> $z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:24:31.143

括号告诉外壳程序首先评估括号内的值，然后打印结果。在您的第一个命令中，它是分配；然而，第二个是一个将被评估并打印结果的命令，即'y'

更新

```
PS> $z = ($x = 'y') # assignment, no print , ($x = 'y') returns 'y'
PS> $z    
y
PS> $( $x = $y ) # this is a voidable expression whose result is discarded when used directly as a statement. so, $( $x = $y ) -eq $null
PS> $z = $( $x = $y ) # same to above
PS> $z 
```

“PowerShell in Action”指出子表达式构造和简单括号之间的区别在于如何处理可无效语句。++,--,+=,-= 操作也被视为可撤销语句。

在简单的括号 () 中，可撤销语句不会被丢弃，但在子表达式 $() 中，它们会被丢弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:20:50.467

具有副作用的表达式在用作语句时通常不会返回其结果。例如：

```
PS> $x = $a++ 
```

显然，`$a++`必须具有此值才能工作。然而：

```
PS> if (...) $a++ 
```

你不希望它打印出`$a`. 所以结果被丢弃。

分组括号会覆盖此行为，并强制将结果返回到管道，即使它是可撤销的：

```
PS> ($x = 'y')
'y' 
```

另一方面，要使不可撤销的表达式无效，请将其强制转换为`void`或通过管道将其转换为`Out-Null`：

```
PS> mkdir Foo | Out-Null
PS> [void](mkdir Bar) 
```

# 资源

所以问题*[为什么它需要一对额外的支架？](https://stackoverflow.com/questions/8978954/why-it-needs-an-extra-pair-of-bracket)*

[Windows PowerShell 语言规范](http://www.microsoft.com/en-us/download/details.aspx?id=9706)- *7.1.1 分组括号*，但它们不使用“可撤销表达式”术语。

博*[文 PowerShell ABC's - V 代表可撤销语句](https://devcentral.f5.com/weblogs/joe/archive/2009/01/23/powershell-abcs---v-is-for-voidable-statements.aspx)*

# c++ - 几次成功连接后，QTcpSocket 发出“连接被拒绝错误”？

> ID：13188824
> 
> 赞同：1
> 
> 时间：2012-11-02T03:19:09.510
> 
> 标签：c++, linux, qt, qtcpsocket, qtcpserver

我正在设计一个使用 Qt creator 访问远程桌面的应用程序。为了从远程桌面获得“退出”信号（在完成我的目的之后），我正在使用 Tcpserver 和 Tcpsocket。我的电脑充当服务器，而远程电脑充当客户端。我正在使用以下概念：

服务器 pc 1\. 按 PushButton 访问远程屏幕（在全屏模式下使用tightvnc）。2\. 启动服务器并监听任何活动连接（我使用端口 9876）。3\. 找到活动连接。连接到客户端。4.关闭远程访问。5.切换回本地屏幕。6.服务器关闭

客户端电脑 1\. 按退出按钮关闭远程访问。2\. 按下退出按钮 3\. 连接到主机。4\. 向服务器发送“退出” 5\. 断开与主机的连接 6\. 关闭连接。

几次尝试都可以正常工作（比如说10次）

但是在它开始给出错误“连接被拒绝错误”之后。在我重新启动远程 PC 之前，我无法从远程访问中恢复。

我尝试过使用重置，但结果是一样的。

任何人有任何想法？？？

这是我的客户端代码

```
#include "ctrlboardclient.h"
#include <QHostAddress>
#include <QObject>
#include <QtGui/QApplication>
#include <QDebug>

bool CtrlBoardClient::status_flag = false;           /* Flag to check the transfer status of Data */

CtrlBoardClient::CtrlBoardClient()
{
    connect(&client, SIGNAL(connected()),    this,  SLOT(startTransfer()));
    connect(&client, SIGNAL(readyRead()),    this,  SLOT(recieve_msg()));
    connect(&client, SIGNAL(disconnected()), this,  SLOT(disconnectstatus()));
    connect(&client, SIGNAL(error(QAbstractSocket::SocketError)), this, SLOT(getErrorCode(QAbstractSocket::SocketError)));
}

bool CtrlBoardClient::start(QString address, quint16 port)
{
    QHostAddress addr(address);
    bool rval = client.reset();
    qDebug() << "Reset before Connect to Host = " << rval;
    client.connectToHost(address, port);

    if (!client.waitForConnected(3000)) {
        bool rval = client.reset();
        qDebug() << "Reset after Connect to Host = " << rval;
        qDebug() << "Client is unable to connect to Server ";
        return false;
    }
    qDebug() << "Client Server Connection Successful";
    status_flag = false;
    return true;
}

void CtrlBoardClient::getErrorCode(QAbstractSocket::SocketError errorCode)
{
    qDebug() << "Socket Error = " << errorCode;
}

void CtrlBoardClient::SendMessage(QString Message)
{
    status_flag = true;
    msg = Message;
    startTransfer();
    qDebug() << "Message sent to the Server";
    client.disconnectFromHost();
    while (!client.waitForDisconnected(3000));
    qDebug() << "Disconnected from the Host";
    return;
}

void CtrlBoardClient::startTransfer()
{
    if (status_flag) {
        QByteArray block = "";
        block.append(msg);
        client.write(block);
    }

    status_flag = false;
    return;
}

QByteArray CtrlBoardClient::RecieveMessage()
{
    return indata;
}

void CtrlBoardClient::recieve_msg()
{
    indata = "";
    indata.append(client.readAll());
    emit recievemsg();
}

void CtrlBoardClient::disconnectstatus()
{
    qDebug() << "Closing Client connection";
    CloseClientConnection();
    emit connection_aborted();
}

void CtrlBoardClient::CloseClientConnection()
{
    bool rval = client.reset();
    qDebug() << "Reset after Disconnect from Host = " << rval;
    client.close();
} 
```

我的服务器代码是：

```
#include "mainboardserver.h"

MainBoardServer::MainBoardServer()
{
   connect(&mainserver, SIGNAL(newConnection()), this, SLOT(acceptConnection()));
   connect(this, SIGNAL(disconnected()), this, SLOT(DisconnectMessage()) );

    if (!mainserver.listen(QHostAddress::Any, 9876)) {
        emit no_incoming_connection();
    }
}

void MainBoardServer::acceptConnection()
{
    ctrlclient = mainserver.nextPendingConnection();
    connect(ctrlclient, SIGNAL(readyRead()), this, SLOT(startRead()));
    connect(ctrlclient, SIGNAL(disconnected()), this, SLOT(DisconnectMessage()));
    emit connection_found();
}

void MainBoardServer::startRead()
{
    char buffer[1024] = {0};
    ClientChat = "";
    ctrlclient->read(buffer, ctrlclient->bytesAvailable());
    ClientChat.append(buffer);
    ctrlclient->close();
    emit data_recieved();
}

QString MainBoardServer::RecieveData()
{
    return ClientChat;
}

void MainBoardServer::TransferData(QByteArray data)
{
    ctrlclient->write(data);
}

void MainBoardServer::DisconnectMessage()
{
    emit connection_lost();
}

void MainBoardServer::closeServer()
{
    mainserver.close();
    emit disconnected();
} 
```

知道如何解决这个问题吗？我犯了什么错误？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T03:34:42.090

我对 Qt 一无所知，但“连接被拒绝”套接字错误意味着以下两种可能性之一：

1) 根本没有在目标 IP/端口监听的服务器套接字。

2）有一个服务器套接字正在侦听，但它的待处理客户端连接的积压已满，此时无法接受新连接。服务器代码完全停止调用`accept()`，或者调用速度不够快，无法满足尝试连接的客户端数量。

无论哪种方式，客户端都无法最终知道实际发生了哪种情况。它所能做的就是稍等片刻，然后再次尝试连接。

您需要诊断您的服务器代码，而不是您的客户端代码。您的服务器代码未按您预期的方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T10:26:16.800

我找到了这个问题的解决方案。

上面的代码绝对正确且有效。虽然问题在于通过 PushButton 调用此应用程序。

这是由于用于调用按钮的指针变量而发生的。

我通过制作类的直接对象来替换指针来解决它。

无论如何，我们更多地了解了指针以及它在复杂应用程序中的危险性。

# perl - 如何在 Perl 中禁用隐式解码（“升级”）？

> ID：13188826
> 
> 赞同：2
> 
> 时间：2012-11-02T03:19:25.117
> 
> 标签：perl, unicode, encoding, utf-8, character-encoding

引用 Perl Unicode FAQ [“如果我不解码怎么办？”](http://perldoc.perl.org/perlunifaq.html#What-if-I-don%27t-decode?)

> 每当您的编码二进制字符串与文本字符串一起使用时，Perl 将假定您的二进制字符串是使用 ISO-8859-1 编码的，也称为 latin-1。如果它不是 latin-1，那么您的数据会被转换得不愉快。例如，如果它是 UTF-8，则多字节字符的各个字节被视为单独的字符，然后再次转换为 UTF-8。可以将这种双重编码与双重 HTML 编码 (&gt;) 或双重 URI 编码 (%253E) 进行比较。
> 
> 这种无声的隐式解码被称为“升级”。这听起来可能是积极的，但最好避免它。

禁用此隐式解码将迫使程序员正确使用`decode()`/`encode()`并有助于防止错误。

是否可以关闭隐式解码？理想情况下，将二进制字符串与文本字符串一起使用会导致错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:45:20.473

我讨厌那一段。Perl 从不使用 iso-8859-1 隐式解码字符串。对于初学者来说，Perl 无法知道字符串是否已被解码。

考虑以下：

```
my $num_apples = 4;
my $num_vegetables = $num_apples; 
```

Perl 是否隐式地将水果转换为蔬菜？不！好吧，那你为什么说它在下面使用 iso-8859-1 隐式解码？

```
my $bytes = "\x61\x62\x63\xE9";
$bytes =~ /♠/; 
```

在第一个片段中，您将所谓的苹果视为蔬菜。在第二个片段中，您将所谓的字节视为 unicode 代码点。

如果您有一个需要一串 Unicode 字符的函数，并且您通过

```
"\x61\x62\x63\xE9" 
```

对于它，它将被视为“abcé”，因为 Unicode 代码点 0x61 是“a”，Unicode 代码点 0x62 是“b”，等等。没有解码发生。也许你从使用中得到了那个字符串

```
decode('UTF-8', "\x61\x62\x63\xC3\xA9"); 
```

或者

```
decode('iso-8859-1', "\x61\x62\x63\xE9"); 
```

但也许你根本没有使用`decode`，只是从

```
"\x61\x62\x63\xE9" 
```

或者

```
read($bin_fh, $buf, 4) 
```

这并不意味着 Perl 隐含地解码了任何东西。由于没有发生隐式解码，因此无法将其关闭。答案是不。

# ruby-on-rails-3.2 - 在 rails 中实例化一个模块

> ID：13188827
> 
> 赞同：1
> 
> 时间：2012-11-02T03:19:34.740
> 
> 标签：ruby-on-rails-3.2, salesforce

我正在使用第三方库（gem）来实例化同一类的两个版本。gem 的文档实例化了这个类

```
client.sobject_module = My::Module
client.materialize("Contact") #=> My::Module::Contact 
```

我的代码就是这样做的。

```
client.sobject_module = MyModule
client.materialize("Contact") 
```

模块本身是空的

```
module MyModule 
end 
```

相同的代码有两个版本，但是当我这样做时

```
MyModule::Contact.find("John") 
```

例如，看起来联系人已被实体化到全局命名空间中。这是从 gem 调用的实现方法

```
def materialize(classnames)
  classes = (classnames.is_a?(Array) ? classnames : [classnames]).collect do |clazz|
    original_classname = clazz
    clazz = original_classname[0,1].capitalize + original_classname[1..-1]
    unless const_defined_in_module(module_namespace, clazz)
      new_class = module_namespace.const_set(clazz,  Class.new(Databasedotcom::Sobject::Sobject))
      new_class.client = self
      new_class.materialize(original_classname)
      new_class
    else
      module_namespace.const_get(clazz)
    end
  end
  classes.length == 1 ? classes.first : classes
end 
```

new_class 上的客户端似乎设置正确，但是当我这样做时

```
MyModule::Contact.client 
```

它返回相同的客户端

```
MyModule1::Contact.client 
```

我花了几天时间试图弄清楚任何指针都会有所帮助。我正在使用的宝石是[这个](https://github.com/heroku/databasedotcom)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:59:46.620

我刚刚发布了一个围绕 gem 的包装器，让您可以解决这个问题。它的工作原理有点像：

```
Databasedotcom::Isolated.perform(options) do
  # Constants are materialized automatically
  contact = Contact.last  

  # Work with them as needed
  puts contact.inspect
end

# And everything get's cleaned up behind you.
defined? Contact # => nil 
```

它目前处于早期阶段，但我希望它适合您的需求。源代码在[https://github.com/sagmor/databasedotcom-isolated](https://github.com/sagmor/databasedotcom-isolated)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T07:43:15.227

在这个问题上敲了几个小时之后（一年后），我想总结一下我在这个领域的所有研究。

不幸的是，这是 databasedotcom gem 中的一个突出错误。问题是，目前 sfdc 客户端是类变量而不是类*实例*变量，因此我们的物化对象在客户端之间共享！

问题[63](https://github.com/heroku/databasedotcom/pull/63)和[73](https://github.com/heroku/databasedotcom/issues/73)中对此进行了详细讨论。您可以从这里获得多种选择：

1.  使用[猴子补丁](https://github.com/heroku/databasedotcom/pull/63#issuecomment-25131592)
2.  对上述问题使用拉取请求
3.  使用[databasedotcom-isolate gem](https://github.com/sagmor/databasedotcom-isolated)
4.  扔掉 databsedotcom 并使用新的[restforce gem](https://github.com/ejholmes/restforce)，它是为处理多个 sfdc 组织而构建的。

我暂时选择猴子补丁，因为它是阻力最小的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T23:01:36.087

这是由于 databasedotcom gem 中的一个[错误](https://github.com/heroku/databasedotcom/pull/63)。您可以通过在初始化程序文件中添加猴子补丁来解决此问题

```
# config/initializers/databasedotcom.rb
Databasedotcom::Sobject::Sobject.class_attribute :client 
```

# z-index - 内容下方的插入框阴影

> ID：13188828
> 
> 赞同：42
> 
> 时间：2012-11-02T03:19:35.457
> 
> 标签：z-index, css

我不明白为什么，但我的内容下方有一个插入框阴影。

这是一个例子：

```
div {
   box-shadow:inset 0 0 10px black;
   height:300px;
   color:red;
}
```

```
<div>
   a
</div>
```

[http://jsfiddle.net/MAckM/](http://jsfiddle.net/MAckM/)

您会看到它`a`位于盒子阴影的顶部。

我怎样才能让盒子阴影在顶部`a`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-02T03:27:26.260

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-07T15:11:21.403

这个答案通过一个最小的例子提供了最直接的解决方案，并解决了滚动问题。

不幸的是，没有办法避免额外的包装`div`（由于[`box-shadow`分层](https://drafts.csswg.org/css-backgrounds-3/#shadow-layers)）。

```
.container {
  position: relative;
}

.container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  box-shadow: inset 0 0 9px 3px yellow;
  pointer-events: none;
}

.items {
  height: 100px;
  overflow: scroll;
}
```

```
<div class="container">
  <div class="items">
    <div class="item">One</div>
    <div class="item">Two</div>
    <div class="item">Three</div>
    <div class="item">Four</div>
    <div class="item">Five</div>
    <div class="item">Six</div>
    <div class="item">Seven</div>
    <div class="item">Eight</div>
    <div class="item">Nine</div>
    <div class="item">Ten</div>
    <div class="item">Eleven</div>
    <div class="item">Twelve</div>
  </div>
</div>
```

# java - 为每个映射器 hadoop 在内存中加载相同的文件

> ID：13188829
> 
> 赞同：1
> 
> 时间：2012-11-02T03:19:39.060
> 
> 标签：java, hadoop, mapreduce

我遇到了一个算法，其中相同的文件被加载到每个映射器的主内存中。

我假设，对于每个映射器，我们必须使用分布式缓存来获取文件，读取文件并将其加载到内存中。当我实现这个时，我发现地图需要很长时间才能完成。我假设，这是因为每次从本地磁盘读取每个映射器值的文件。

我在实施它时正确吗？

还有其他建议吗？

请帮忙！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:21:51.537

您想在 Mapper setup() 方法中从本地磁盘读取。使用实例变量来保持引用。

# iphone - Apple App Store 中的应用程序的“当前版本”是什么？

> ID：13188830
> 
> 赞同：0
> 
> 时间：2012-11-02T03:19:50.180
> 
> 标签：iphone, ios, app-store, ios6

您可能知道，至少在 iOS6 中，App Store 应用程序允许用户检查应用程序的**当前版本**和**所有版本**应用程序商店评级。我即将提交对我们应用程序的更新，我正在尝试决定我应该使用**v2.0.0**还是**v1.1.0**

原因是因为我们对商店中唯一版本的评分非常好，所以如果我可以保持这些评分“最新”，那么我可以不将“主要版本”数字提高到 2，即使这是对原始应用程序的相当大的重写。

因此，有人知道什么被认为是“当前版本”吗？主要版本？小版本？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:22:29.087

“当前版本”是当前在 App Store 中的版本。它与您分配应用程序版本的任意版本号无关。由于您在商店中有 1.0 版本，因此这是当前版本。您的下一个更新将是新的当前版本。不管你叫它 2.0、1.1、1.0.1 还是 26。

# mysql - 将 Rails CSV 导入上的日期格式更改为 MYSQL

> ID：13188832
> 
> 赞同：2
> 
> 时间：2012-11-02T03:19:54.210
> 
> 标签：mysql, ruby-on-rails, ruby, csv

**在导入2011**年 12 月 1 日（mm/dd/yyyy）格式的 MySQL 时，不确定如何更改 csv 文件中的日期。MySQL 在 yyyy/mm/dd 中。

我怎样才能做到这一点？

我的 rake 文件

```
require 'csv'
require 'date'

desc "Import gac from csv file"
task :import => [:environment] do
  Dir.chdir("#{Rails.root}/lib/assets")
  csv_file = "file.csv" 
  CSV.foreach(csv_file, :headers => true) do |row|
    Institution.create({
      :company => row[0],
      :solveid => row[2],
      :phone => row[5],
      :other => row[6],
      :clientdate => (DateTime.strptime row[7], "%m/%d/%Y").strftime "%Y/%m/%d", 
      :cunumber => row[1],
      :street => row[8], 
      :city => row[9], 
      :state_id => row[4], 
      :zip => row[10],
      :source => row[11], 
      :source2 => row[12],
      :demodate1 => (DateTime.strptime row[13], "%m/%d/%Y").strftime "%Y/%m/%d",
      :demodate2 => (DateTime.strptime row[14], "%m/%d/%Y").strftime "%Y/%m/%d",
      :demodate3 => (DateTime.strptime row[15], "%m/%d/%Y").strftime "%Y/%m/%d",
      :client => row[17],
      :prospect => row[19], 
      :alliedlead => row[16], 
      :notcontacted => row[18]
    })
  end
end 
```

*这给了我一个错误。*

```
rake import
rake aborted!
/Users/dave/rails_projects/allied_contest/lib/tasks/intitutions.rake:14: syntax error, unexpected tSTRING_BEG, expecting '}'
... row[7], "%m/%d/%Y").strftime "%Y/%m/%d", 
...                               ^
/Users/dave/rails_projects/allied_contest/lib/tasks/intitutions.rake:14: syntax error, unexpected ',', expecting keyword_end
...%m/%d/%Y").strftime "%Y/%m/%d", 
...                               ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:32:03.130

```
 if row[7].present?
      date = row[7].split("/")
      new_date = "#{date[2]}/#{date[0]}/#{date[1]}"
   else
     new_date = "N/A"
   end 
```

**编辑：** 您得到的错误是因为该行为零。我添加了一个零支票。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T03:35:37.660

如果您需要验证日期，则可以使用[`DateTime::strptime`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-strptime)and[`DateTime#strftime`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-i-strftime)方法：

```
require 'date'

# ... snip ...
:clientdate => DateTime.strptime(row[7], "%m/%d/%Y").strftime("%Y/%m/%d") 
```

# php - 根据用户登录的系统命令

> ID：13188835
> 
> 赞同：0
> 
> 时间：2012-11-02T03:20:08.360
> 
> 标签：php, logging

我有一种情况，用户根据 ldap 凭据登录网站。现在我必须在后端为这个用户执行一些命令。

我检查了从浏览器执行“whoami”命令的正在运行的 php 脚本。默认情况下，它似乎将其作为 apache 运行，而不是作为已登录的用户运行。

有什么方法可以让我以登录的用户身份运行 shell 命令？

# java - 框架未设置为大小定义的 Java

> ID：13188836
> 
> 赞同：0
> 
> 时间：2012-11-02T03:20:15.460
> 
> 标签：java, swing

我正在学习如何制作小程序。我有一个包含小程序的框架。在小程序中，有 4 个不同的面板：一个主面板（带有 BorderLayout）和主面板中的 3 个子面板 one()——一个向北，一个向南，一个向中心）。每当我启动小程序时，主框架尺寸都非常小。我尝试使用 setSize() 更改它，但它不起作用。然后我尝试使用其他帖子中的 setPreferedSize() 和 pack() ，但它对我不起作用。这是我的代码：

```
 BounceBallApp applet = new BounceBallApp();
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("BounceBallApp");

        frame.add(applet, BorderLayout.CENTER);

        frame.setPreferredSize(new Dimension(1000, 1000));
        frame.setLocationByPlatform(true);
        frame.pack();
        frame.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:24:00.070

嗯，你的问题...

```
frame.setPreferredSize(new Dimension(1000, 1000));
frame.setLocationByPlatform(true);
frame.pack(); <-- This is you're problem, or is it... 
```

`pack`你会使用布局管理器的首选尺寸来“打包”框架，这样你就不必猜测了......

从 Java 文档...

> 使此 Window 调整大小以适合其子组件的首选大小和布局。如果任一尺寸小于先前调用 setMinimumSize 方法指定的最小尺寸，则生成的窗口宽度和高度会自动放大。
> 
> 如果窗口和/或其所有者还不能显示，则在计算首选大小之前，它们都可以显示。在计算窗口大小后验证窗口。

另外......我不能开始怀疑你为什么要以这种方式混合两个顶级容器，但我真的鼓励你不要......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:55:51.957

尝试使用`Component#setMinimumSize(...)`它不会允许任何布局管理器违反此最小尺寸。

# javascript - 在 Javascript 中动态创建项目

> ID：13188841
> 
> 赞同：0
> 
> 时间：2012-11-02T03:20:33.830
> 
> 标签：javascript, drop-down-menu

我有一个像下面这样的 JS 类。

可以使用有限的下拉列表内容，但是我想在说 1 ~ 100 时动态生成内容。

我怎样才能做到这一点？

```
 new Dropdown('dropdown', { items: [
  { value: '1', name: '1', selected: true},
  { value: '2', name: '2'},
  { value: '7', name: '3'}
  ]}); 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:23:18.740

只需创建一个数组，然后循环添加对象：

```
var items = [];

for(var i = 1; i <= 100; i++) {
    items.push({
        value: i,
        name: i
    });
}

new Dropdown('dropdown', {
    items: items
}); 
```

如果要预选项目，只需`selected`有条件地设置属性：

```
 items.push({
        value: i,
        name: i,
        selected: i == 1
    }); 
```

例如，这将预先选择第一个项目。

# php - 在 PHP 中显示图像？

> ID：13188844
> 
> 赞同：-2
> 
> 时间：2012-11-02T03:21:42.443
> 
> 标签：php, html

我有一个网页，我想根据页面的路径动态显示内容。例如，我可能想要`http://www.page.php?input=red`或者我会想要`http://www.page.php?input=blue`。在这两种情况下，实际内容都位于`./$dir/`.

我已经掌握了这个的要点，但我无法为我的生活找出图像。我在每个目录中都有一个图像`./$dir/subdir/images/sample.png`。如何输出动态更改图像元素的 HTML？

这是演示我的问题的示例代码。

```
<html>
    <?php
        $dir = $_GET["input"];
        $img = imagecreatefrompng("./$dir/subdir/images/sample.png");
    ?>
    <body>
        <img src="???" alt="sample image" />
    </body>
</html> 
```

我想显示`./red/subdir/images/sample.png`when 我有`input=red`，`./blue/subdir/images/sample.png`when`input=blue`等。

非常感谢您的帮助。

编辑：
我什至不知道我是否可以将图像存储到第 4 行所示的变量中。我对 PHP 真的很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:44:26.103

```
if (!empty($_GET['input']) {
  $path = './'.$dir.'/subdir/images/sample.png';
  if (file_exists($path)) {
    print '<img src="'.$path.'" alt="sample image" />';
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:25:22.670

如果只有一张图片：

```
<img src="<?= $img ?>" alt="sample image" /> 
```

如果加载图像，请使用数组。

我还将在数据库上设置 alt 文本，从那里提取它并按照我建议编写 src 的方式编写它。

只是为了让你明白：

```
<?= $img ?> 
```

做同样的事情

```
<?php echo $img; ?> 
```

除了更多的课程。

编辑：缩进上的错字使我的代码消失了。

# git - 如何让 Visual Studio 使用与 Github for windows 相同的 powershell

> ID：13188847
> 
> 赞同：5
> 
> 时间：2012-11-02T03:22:06.730
> 
> 标签：git, powershell, visual-studio-2012, github-for-windows, posh-git

我正在将 Github for windows 用于非 github 项目，并且我正在使用它的 powershell 提示符。

我想将 Visual Studio 配置为使用相同的提示（通过包管理器）。

我还希望不必单独安装 poshgit 并维护 2 个安装，因为 github 具有几乎我想要的确切设置。

我已经看到可以修改 nuget 用于其 powershell 提示符的配置文件，但我找不到 GH4W 存储其 poshgit 设置的位置。

有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:12:56.270

试着把它放在你的`NuGet_profile.ps1`：

```
. (Resolve-Path "$env:LOCALAPPDATA\GitHub\shell.ps1")
. $env:github_posh_git\profile.example.ps1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:22:22.760

我会把这个问题转移到一边，所以我会让 GitHub for Windows 使用与 Visual Studio 相同的 Powershell 提示符。根据我在 Visual Studio 和 git 方面的经验，我认为这将是一项更容易的任务，并且更有可能成功。

# python - 如何覆盖 send_task BaseTask 类？

> ID：13188849
> 
> 赞同：3
> 
> 时间：2012-11-02T03:22:16.407
> 
> 标签：python, rabbitmq, celery

我做了某种迷你框架，以便能够在以更优雅的方式处理错误的`celery`情况下捕获连接错误，并且除了使用.`rabbitmq``send_task`

这是一些代码来阐明这个想法：

```
class MyBaseTask(base_task.Task):
    """ Base Class to handle tasks from Me hohoho!"""
    abstract = True

    @classmethod
    def delay(cls, *args, **kwargs):
        """Hook to catch connection errors"""
        try:
            return super(MyBaseTask, cls).apply_async(args, kwargs)
        except socket.error as e:
            cls._safe_failover()  # a function to handle this error
            cls.get_logger().error(str(e))
        except Exception as e:
            cls.get_logger().error("Uknown Error: %s" % str(e))
            raise  # normal exception 
```

现在我继承`MyBaseTask`类：

```
class MyL33tTask(MyBaseTask):
    name = 'task.my_leet_task'

    def run(self, *args, **kwargs):
        # yada yada 
```

当套接字错误发生时（AKA，当关闭时），它将执行 safe_failover 函数`rabbitmq`。可悲的是，当我使用它时不会发生这种情况，`send_task('task.my_leet_task')`因为它使用了某种`MyBaseTask`未加载的代理。

有没有一种简单的方法可以替代`send_task`使用`MyBaseTask`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T10:00:12.113

到目前为止，我了解您的逻辑的主要用途是确保您实际上正在向代理发送任务。

如果我的理解是正确的，那么您的方法可能是错误的，让我解释一下原因。使用消息传递时，主要优点是您可以通过将消息传递给代理来安排任务，方法 send_task 实际上他对任务本身一无所知，它只是为 Celery 编写格式良好的消息并发送它到配置的代理（[http://docs.celeryproject.org/en/latest/faq.html#can-i-call-a-task-by-name](http://docs.celeryproject.org/en/latest/faq.html#can-i-call-a-task-by-name)）。

考虑到这一点，很明显应该在调用 *send_message* 的地方处理“发送消息失败”的异常捕获。延迟方法可以保持这种方式，但我建议更加明确并保留实际调用延迟（）的捕获逻辑，因为如果任务未安排，该怎么办也不取决于任务，而是取决于调度器。

# .net - EF5 代码优先枚举支持 - 在实体内部定义枚举

> ID：13188857
> 
> 赞同：1
> 
> 时间：2012-11-02T03:23:11.830
> 
> 标签：.net, entity-framework, enums, code-first

好笑的问题。。

我有一个具有状态字段的类型。为了我的方便和事情的顺序，我想在 Entity 类型中定义这个状态的枚举：

```
public class User
{
  public enum Statuses
  {
     Active,
     Suspended
  }

  public int ID { get; set; }
  public Statuses Status { get; set; }
} 
```

由于某种原因，Status 属性未映射到数据库。

现在有趣的是 - 如果我从 User 中取出枚举定义，那么它就会映射到数据库！

我知道快速的答案是将它留在课堂之外，但这将需要我给枚举一个更长的名称 UserStatuses 或类似的名称，因为现在它不在 User 内部。

有没有人遇到过这个问题？在我开始妥协之前有解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:28:39.783

EF5 仅支持在命名空间下定义的枚举。它不支持在类中定义或嵌套在另一个枚举中的枚举。

我不知道这是否是“最正确”的做事方式，但我更喜欢将任何枚举保留在自己的命名空间（“枚举”或类似名称）中，并给它们起更有意义的名称（即：UserStatus）。一个名为“Statuses”的枚举太通用了，一旦你有六个枚举定义浮动就会变得混乱，并且当你进一步进入应用程序并且必须向其他实体添加状态枚举时，还可能导致命名空间冲突。

# c# - 从 Web 服务获取自定义类

> ID：13188860
> 
> 赞同：0
> 
> 时间：2012-11-02T03:23:22.680
> 
> 标签：c#, asp.net, web-services, asmx

调用后`Webservices`，返回一个对象（该对象为自定义对象类）给客户端。所以，我想从这个对象转换为自定义类。

-网页服务：

```
[WebMethod]
public Cls_ROLES GetRoles(int firstNum)
{
    Cls_ROLES o = new Cls_ROLES();
    o.Role_ID = 2;
    o.RoleName = "binh";
    return o;
} 
```

-客户：

+功能：

```
public object CallWebService(string webServiceAsmxUrl, string serviceName, string methodName, object[] args)
{
    System.Net.WebClient client = new System.Net.WebClient();
    //-Connect To the web service
    using (System.IO.Stream stream = client.OpenRead(webServiceAsmxUrl + "?wsdl"))
    {
        //--Now read the WSDL file describing a service.
        ServiceDescription description = ServiceDescription.Read(stream);
        ///// LOAD THE DOM /////////
        //--Initialize a service description importer.
        ServiceDescriptionImporter importer = new ServiceDescriptionImporter();
        importer.ProtocolName = "Soap12"; // Use SOAP 1.2.
        importer.AddServiceDescription(description, null, null);
        //--Generate a proxy client. importer.Style = ServiceDescriptionImportStyle.Client;
        //--Generate properties to represent primitive values.
        importer.CodeGenerationOptions = System.Xml.Serialization.CodeGenerationOptions.GenerateProperties;
        //--Initialize a Code-DOM tree into which we will import the service.
        CodeNamespace nmspace = new CodeNamespace();
        CodeCompileUnit unit1 = new CodeCompileUnit();
        unit1.Namespaces.Add(nmspace);
        //--Import the service into the Code-DOM tree. This creates proxy code
        //--that uses the service.
        ServiceDescriptionImportWarnings warning = importer.Import(nmspace, unit1);
        if (warning == 0) //--If zero then we are good to go
        {
            //--Generate the proxy code 
            CodeDomProvider provider1 = CodeDomProvider.CreateProvider("CSharp");
            //--Compile the assembly proxy with the appropriate references
            string[] assemblyReferences = new string[5] { "System.dll", "System.Web.Services.dll", "System.Web.dll", "System.Xml.dll", "System.Data.dll" };
            CompilerParameters parms = new CompilerParameters(assemblyReferences);
            CompilerResults results = provider1.CompileAssemblyFromDom(parms, unit1);
            //-Check For Errors
            if (results.Errors.Count > 0)
            {
                StringBuilder sb = new StringBuilder();
                foreach (CompilerError oops in results.Errors)
                {
                    sb.AppendLine("========Compiler error============");
                    sb.AppendLine(oops.ErrorText);
                }
                throw new System.ApplicationException("Compile Error Occured calling webservice. " + sb.ToString());
            }
            //--Finally, Invoke the web service method 
            Type foundType = null;
            Type[] types = results.CompiledAssembly.GetTypes();
            foreach (Type type in types)
            {
                if (type.BaseType == typeof(System.Web.Services.Protocols.SoapHttpClientProtocol))
                {
                    Console.WriteLine(type.ToString());
                    foundType = type;
                }
            }

            object wsvcClass = results.CompiledAssembly.CreateInstance(foundType.ToString());
            MethodInfo mi = wsvcClass.GetType().GetMethod(methodName);
            object o = new object();
            o=mi.Invoke(wsvcClass, args);
            return o;
        }
        else
        {
            return null;
        }
    }
} 
```

+Page_Load 函数：

```
Line 1:object[] args=new object[1];
Line 2:args[0]=1;  
Line 3:o = this.CallWebService("http://localhost:1814/HelloServices/Service.asmx", "Hello", "GetRoles", args); 
```

它在 Line3 处返回一个对象（该对象是一个自定义对象类）给客户端。所以，我想从这个对象转换为自定义类（Cls_Role 对象）。//================================================= =======================================//========== ==================================================== ===========================//====================== ==================================================== ============== 作为 Selalu_Ingin_Belajar 的回答，我可以从 web 服务中获得价值给客户端。

对象你的对象 = 新对象（）；

```
foreach (PropertyInfo property in yourObject.GetType().GetProperties())
{           
    object value = property.GetValue(yourObject , null);
    Console.WriteLine("{0} = {1}", property.Name, value);
} 
```

除此之外，当我申请另一个项目时，它显示另一个错误：参数计数不匹配。如果我通过 VisualStudio 工具使用 AddWebReference。它会自动生成 Reference.cs 文件。它包含：

```
/// <remarks/>
    [System.Web.Services.Protocols.SoapRpcMethodAttribute("", RequestNamespace="urn:ALBAPI", ResponseNamespace="urn:ALBAPI")]
    [return: System.Xml.Serialization.SoapElementAttribute("info")]
    public ResponseInfo getSetupLicenseRows(out SetupLicenseRowsValues values) {
        object[] results = this.Invoke("getSetupLicenseRows", new object[0]);
        values = ((SetupLicenseRowsValues)(results[1]));
        return ((ResponseInfo)(results[0]));
    } 
```

因此，通过传递一个对象 SetupLicenseRowsValues 类可以很容易地从 webClient 调用。现在，我必须手动将参数传递给 WebServices。不要使用这个生成文件。

客户：

```
public object CallWebService(string webServiceAsmxUrl, string serviceName, string methodName, object[] args)
        {
            System.Net.WebClient client = new System.Net.WebClient();
            //-Connect To the web service
            using (System.IO.Stream stream = client.OpenRead(webServiceAsmxUrl + "?wsdl"))
            {
                //--Now read the WSDL file describing a service.
                ServiceDescription description = ServiceDescription.Read(stream);
                ///// LOAD THE DOM /////////
                //--Initialize a service description importer.
                ServiceDescriptionImporter importer = new ServiceDescriptionImporter();
                importer.ProtocolName = "Soap12"; // Use SOAP 1.2.
                importer.AddServiceDescription(description, null, null);
                //--Generate a proxy client. importer.Style = ServiceDescriptionImportStyle.Client;
                //--Generate properties to represent primitive values.
                importer.CodeGenerationOptions = System.Xml.Serialization.CodeGenerationOptions.GenerateProperties;
                //--Initialize a Code-DOM tree into which we will import the service.
                CodeNamespace nmspace = new CodeNamespace();
                CodeCompileUnit unit1 = new CodeCompileUnit();
                unit1.Namespaces.Add(nmspace);
                //--Import the service into the Code-DOM tree. This creates proxy code
                //--that uses the service.
                ServiceDescriptionImportWarnings warning = importer.Import(nmspace, unit1);
                if (warning == 0) //--If zero then we are good to go
                {
                    //--Generate the proxy code 
                    CodeDomProvider provider1 = CodeDomProvider.CreateProvider("CSharp");
                    //--Compile the assembly proxy with the appropriate references
                    string[] assemblyReferences = new string[5] { "System.dll", "System.Web.Services.dll", "System.Web.dll", "System.Xml.dll", "System.Data.dll" };
                    CompilerParameters parms = new CompilerParameters(assemblyReferences);
                    CompilerResults results = provider1.CompileAssemblyFromDom(parms, unit1);
                    //-Check For Errors
                    if (results.Errors.Count > 0)
                    {
                        StringBuilder sb = new StringBuilder();
                        foreach (CompilerError oops in results.Errors)
                        {
                            sb.AppendLine("========Compiler error============");
                            sb.AppendLine(oops.ErrorText);
                        }
                        throw new System.ApplicationException("Compile Error Occured calling webservice. " + sb.ToString());
                    }
                    //--Finally, Invoke the web service method 
                    Type foundType = null;
                    Type[] types = results.CompiledAssembly.GetTypes();
                    foreach (Type type in types)
                    {
                        if (type.BaseType == typeof(System.Web.Services.Protocols.SoapHttpClientProtocol))
                        {
                            Console.WriteLine(type.ToString());
                            foundType = type;
                        }
                    }

                    object wsvcClass = results.CompiledAssembly.CreateInstance(foundType.ToString());
                    MethodInfo mi = wsvcClass.GetType().GetMethod(methodName);
                    object o = new object();
                    Line error: o = mi.Invoke(wsvcClass, new object[0]);
                    return o;
                }
                else
                {
                    return null;
                }
            }
        }
public void call()
    {
        string WebserviceUrl = "http://192.168.2.19:3333/ALBAPI.wsdl";
        string serviceName = "ALBAPI";
        string methodName = "getSetupLicenseRows";
        object[] args=new object[0];
        object sSessionID = CallWebService(WebserviceUrl, serviceName, methodName,args);
        foreach (PropertyInfo property in sSessionID.GetType().GetProperties())
        {
            object value = property.GetValue(sSessionID, null);

            Console.WriteLine("{0} = {1}", property.Name, value);
        }

    } 
```

现在，它在线路错误处显示错误“参数计数不匹配”。还是要谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:06:38.613

现在，如果我理解正确，并且由于您经历了动态构建代理（而不是使用服务引用）的繁琐工作，这意味着您的消费者代码不包含您可能服务的任何对象的实际定义可能会回来。

在那种情况下，我看不出有很多方法可以通过静态类型的代码来实现这一点。您可以尝试使用`dynamic`并希望您的响应具有您期望的“结构”，但不知道真实类型。如：

```
dynamic returnValue = CallWebservice(someEndpoint, someServiceName, ...);
//now you can access all the properties of returnValue, for example:
Console.WriteLine(returnValue.Role_ID);
//but you won't have intellisense, may be error prone, and will prevent you from proper refactoring 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:08:16.017

只需`Web/Service Reference`右键单击您的客户项目并发现它即可使用`Web Service`。提供适当`namespace`的名称并单击确定。

此过程将根据暴露`Proxy`在.`GetRoles``Cls_ROLES``WSDL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:19:13.873

如果您只想获取对象的每个参数的值，则可以使用反射。

```
object yourObject = new object();

foreach (PropertyInfo property in yourObject.GetType().GetProperties())
{           
    object value = property.GetValue(yourObject , null);
    Console.WriteLine("{0} = {1}", property.Name, value);
} 
```

但是你最好使用像 Pablo 和 Furqan 这样的服务参考来获得你的对象的清晰模式。因为它会自动序列化你的对象，所以你不用担心序列化的东西。对不起我的英语：p

# java - 纠结的混乱尝试抓住块

> ID：13188861
> 
> 赞同：1
> 
> 时间：2012-11-02T03:23:26.480
> 
> 标签：java, exception

```
public int countChars3(String fileName) {
        int total = 0;
        FileReader r = null;
        try {
            r = new FileReader(fileName);
        } catch (FileNotFoundException e) {
            System.out.println("File named " + fileName + " not found. " + e);
            total = -1;
        }
        try {
            while (r.ready()) {
                try {
                    r.read();
                } catch (IOException e) {
                    System.out.println("IOException" + "occurred while counting " + "chars. " + e);
                    total = -1;
                }
                total++;
            }
        } catch (IOException e) {
            System.out.println("IOExceptionoccurred while counting chars. " + e);
            total = -1;
        }
        try {
            r.close();
        } catch (IOException e) {
            System.out.println("IOExceptionoccurred while counting chars. " + e);
            total = -1;
        }
        return total;
    } 
```

上面的代码是一个纠结的 try-catch 块的例子。通过阅读代码，它们看起来确实很乱，有几个嵌套的 try-catch。概括地说，这个纠结的代码块试图展示什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:25:52.040

它尝试定位并打开一个文件，然后尝试计算该文件中的字符数。然后，它会尝试关闭该文件。

就个人而言，我永远不会在生产环境中编写这种代码。我会尝试完成所有这些并将它们全部放在一个 try/catch 块中，除非在两者之间进行大量处理，如下所示：

```
try {
    r = new FileReader(fileName);
    while(r.ready()) {
        r.read();
        total++;
    }
    r.close();
}
catch(IOException ioe) {
    //handle
} 
```

当然，如果您在捕获 IOException 时想要更具体地了解发生了什么，那么您需要单独的块。这是可读性和功能之间的权衡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:34:43.543

只需让方法抛出它并让客户端处理它，你也应该有一个 finally{} 来关闭资源。

```
public int countChars3(String fileName) throws IOException {
    int total = 0;
    FileReader reader = new FileReader(fileName);
    try {
        while (reader.ready()) {
            reader.read();
            total++;
        }
        reader.close();
    } finally {
        reader.close();
    }
    return total;
} 
```

你的意思是计算字符还是字节，如果字节你的整个代码可以替换为：

```
return (int) new File(fileName).length(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:30:44.040

这说明了什么？

我将使用：损坏的代码。

将所有这些组合成一个 try-catch 不仅更具可读性，而且更正确。主要问题是早期捕获不可恢复的异常（例如 FileNotFound）它仍然会继续执行其余代码（这里它将抛出未处理的 NPE）。

# wcf - IIS7 应用程序池在使用 net.tcp 托管 WCF 服务时关闭

> ID：13188862
> 
> 赞同：2
> 
> 时间：2012-11-02T03:23:28.627
> 
> 标签：wcf, iis-7, application-pool, net.tcp

我使用 http 和 net.tcp 绑定在 Windows Server 2008 上的 IIS 7/WAS 中托管 WCF 服务。

大多数情况下，我可以使用 http 和 net.tcp 调用服务而不会出现问题，但偶尔服务的应用程序池会意外关闭。发生这种情况时，WAS 会将以下条目写入事件日志：

> 应用程序池“MyServices”的工作进程在尝试从文件“\?\C:\Windows\Microsoft.NET\Framework64\v4.0.30319\CONFIG\web.config”读取配置数据时遇到错误，行号“ 0'。数据字段包含错误代码。（数据：00000008）
> 
> 为应用程序池“MyServices”提供服务的进程报告在启动期间尝试读取配置失败。进程 ID 为“18196”。请检查应用程序事件日志以获取工作进程记录的有关特定错误的更多事件消息。数据字段包含错误号。（数据：80004005）
> 
> 服务应用程序池“MyServices”的工作进程“18468”中协议“net.tcp”的侦听器通道报告了侦听器通道故障。数据字段包含错误号。（数据：80004005）
> 
> 由于为该应用程序池提供服务的进程中出现一系列故障，应用程序池“MyServices”被自动禁用。

我已确认应用程序池配置为使用 .NET v4.0，集成模式，禁用 32 位应用程序。这些服务不使用任何 32 位或非托管组件。

导致关机的调用是 net.tcp 调用，一个应用程序日志条目提到“协议'net.tcp'的侦听器通道”，net.tcp 比 http 少得多（我没有找到任何相关的谷歌搜索任何应用程序日志条目）。我不禁认为问题与net.tcp、端口共享等有关。我只是不知道问题可能是什么。

有没有人遇到过这个？除了简单地禁用 net.tcp 和专门使用 http 之外，是否有人对如何解决问题有任何想法？

# haskell - Happstack 显示一个读取的文件

> ID：13188864
> 
> 赞同：5
> 
> 时间：2012-11-02T03:23:36.433
> 
> 标签：haskell, file-io, happstack

这是一个可能与`IO()`单子有关的 Haskell 新手问题。

我在一个`Happstack.Server`程序中有一个函数可以为文件上传生成响应。

```
postFile = do methodM POST
              decodeBody filePolicy
              (tmp, name, meta) <- lookFile "upload"
              ok $ concat ["A file! ", tmp, " || ", name, " || ", show meta] 
```

这很好用。现在，我希望它显示上传文件的内容以及它的本地临时名称、原始名称和内容类型元数据。我假设既然这一切都发生在一个`do`街区里，我可以

```
postFile = do methodM POST
              decodeBody filePolicy
              (tmp, name, meta) <- lookFile "upload"
              contents <- readFile tmp
              ok $ concat ["A file! ", tmp, " || ", name, " || ", show meta, "\n\n", contents] 
```

但这给我带来了一系列错误，似乎告诉我`decodeBody`电话有问题。

```
...
/home/inaimathi/projects/happstack-tutorial/parameters.hs:23:15:
    No instance for (Happstack.Server.Internal.Monads.WebMonad
                       Response IO)
      arising from a use of `decodeBody'
    Possible fix:
      add an instance declaration for
      (Happstack.Server.Internal.Monads.WebMonad Response IO)
    In a stmt of a 'do' block: decodeBody filePolicy
    In the expression:
      do { methodM POST;
           decodeBody filePolicy;
           (tmp, name, meta) <- lookFile "upload";
           contents <- readFile tmp;
           .... }
    In an equation for `postFile':
        postFile
          = do { methodM POST;
                 decodeBody filePolicy;
                 (tmp, name, meta) <- lookFile "upload";
                 .... }
... 
```

我不确定这里出了什么问题。有人可以教育我吗？

* * *

**编辑3：**

这将让我学会贸然下结论。

我得到的其他错误都是由于安装不正确的库造成的。清除我的`~/.ghc`，然后`happstack`再次安装修复它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T05:01:32.443

```
No instance for (Happstack.Server.Internal.Monads.WebMonad
                       Response IO) 
```

翻译：您的`do`-block 不是 IO monad，而是其他一些 monad。幸运的是，它原来是 MonadIO 的一个实例：

```
class Monad m => MonadIO m where
    liftIO :: IO a -> m a 
```

如您所见，这样的实例只是提供了一种将 IO 操作从 IO 单子“提升”到自身的方法，因此在您的情况下，您只需要：

```
contents <- liftIO $ readFile tmp 
```

的实现`liftIO`显然依赖于`m`，但在一个典型的 monad 转换器堆栈中，它使用`lift`并`liftIO`到达内部的 IO monad；例如，参见[Transformers 库中其他 monad 转换器的实现](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-IO-Class.html)。

# vb.net - 带有 HTML 敏捷包的 VB.NET 中的 XPath

> ID：13188872
> 
> 赞同：3
> 
> 时间：2012-11-02T03:24:20.257
> 
> 标签：vb.net, xpath, html-agility-pack

我有以下 vb.net 代码可以正常工作，并且在消息框中我看到了具有 id 属性的元素的确切数量。

```
Dim hreftext = htmldoc.DocumentNode.SelectNodes("//*[@id]")
 MsgBox(hreftext.Count) 
```

现在的问题是，当我在消息框上使用以下内容时，尽管有 6 个 id 为 rso 的元素，但它给了我对象引用未设置为对象的实例

```
Dim hreftext = htmldoc.DocumentNode.SelectNodes("//*[@id='rso']")
 MsgBox(hreftext.Count) 
```

第二个片段有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:45:53.850

阅读了您的另一个 SO 问题后，您似乎正在尝试搜索谷歌购物，并且忽略了检查下载的 html 源代码，而不是生成的 dom。

id "rso" 没有出现在 html 源代码中，这就是您收到错误的原因。谷歌并不热衷于被刮，而且肯定会让它变得困难。

要明白我的意思，您可以在表单中添加一个多行文本框并添加它而不是您当前的 xpath 代码：

```
TextBox1.Text = htmldoc.DocumentNode.OuterHtml 
```

漂亮是不是！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:59:23.893

详细说明检查案例：

尝试：

```
Dim hreftext = htmldoc.DocumentNode.SelectNodes("//*[translate(@id,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')='rso']")
 MsgBox(hreftext.Count) 
```

抓取任何等于 'rso' 的任何大小写组合的节点

# java - 在 Java 中获取 jLabel 图像 url

> ID：13188874
> 
> 赞同：0
> 
> 时间：2012-11-02T03:24:39.593
> 
> 标签：java, swing, jlabel, imageicon, getresource

我会简短地说。

我放了一个 jLbl_show 并在 if 条件下为它设置了一个图像。

```
if(int c==1){
  jLbl_show0.setIcon(new ImageIcon(getClass().getResource("/img/wrong.png")));
}
else{
  jLbl_show0.setIcon(new ImageIcon(getClass().getResource("/img/ok.png")));
} 
```

但是，现在图像已设置，我需要**将图像 URL 设置为另一个条件**。这就像;

```
if(imageURL is "/img/ok.png"){ do somthing }
elseif (imgURL is "/img/wrong.png"){ do something } 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:46:55.147

做这样的事情：

```
boolean flag = false;

if(someBoolean){
  jLbl_show0.setIcon(new ImageIcon(getClass().getResource("/img/wrong.png")));
  flag = true;
}
else{
  jLbl_show0.setIcon(new ImageIcon(getClass().getResource("/img/ok.png")));
}

if(flag){something}
else{something} 
```

# python - 无法通过 API 对过去 1000 条 Facebook 评论进行分页

> ID：13188877
> 
> 赞同：0
> 
> 时间：2012-11-02T03:24:49.403
> 
> 标签：python, facebook-graph-api

我在 Facebook 上发布了至少 4,000 条已确认的公众评论。但我不能得到超过 980 个。

每次，一旦我清除 900，我都会收到此错误：

```
Traceback (most recent call last):
    File "fb_pcf_temp.py", line 41, in <module>
    next = decoded['paging']['next']
KeyError: 'next' 
```

我的代码是：

```
#!/usr/bin/env python
# encoding: utf-8
"""
postgrabber.py

Created by ian on 2012-09-24.
Copyright (c) 2012 __MyCompanyName__. All rights reserved.
"""

import sys
import os
import ogp
import config
import httplib
import simplejson as json
import requests

getData = ogp.facebookQueries()
post_id = "145061248901557_381440708596942"

def getmore(nexturl):
    access_token = getData.authenticate()
    theFeedUrl = nexturl + "&" + access_token
    print theFeedUrl
    req = requests.get(theFeedUrl)
    f = req.text
    decoded = json.loads(f)
    return decoded

next = "https://graph.facebook.com/%s?fields=comments.limit(100).fields(likes,message,from,like_count)" % post_id
x = 0
while x < 40:
    decoded = getmore(next)
    try:
        comments = decoded['comments']['data']
        next = decoded['comments']['paging']['next']

    except:
        comments = decoded['data']
        next = decoded['paging']['next']

    for d in comments:
        print '%s\t%s\t%s\t%s\t"%s"' % (d['created_time'],d['like_count'],d['from']['name'],d['from']['id'],d['message'])
    x = x + 1 
```

我很肯定我已经收到了超过 1000 条公众评论。该帖子总共有 4780 条评论——我认为其中 3800 条不太可能被标记为私人评论。

有人遇到过这种情况么？我在做一些明显的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:08:38.843

我发现了问题。令人惊讶的是，问一群其他人如何突然暴露了手掌。

我有这个：

```
 theFeedUrl = nexturl + "&" + access_token 
```

它应该是：

```
 theFeedUrl = nexturl + "&access_token=" + access_token 
```

愚蠢的粗心错误，由于某种原因，Facebook 让我请求前 1000 个不带正确 URL 的事实使情况更加复杂。

# spring - 如何理解 PROPAGATION_REQUIRED

> ID：13188881
> 
> 赞同：0
> 
> 时间：2012-11-02T03:25:10.787
> 
> 标签：spring, transactions, hibernate-session

我仍然不明白以下内容：

```
method xxx{
    Teacher t=dao.get(new Teacher(1));
    t.setName("mark"); 

    finder.find(Teacher.class,null,null,null);

    dao.getSf().getCurrentSession().evict(t);               

    t.setName("ff"); 
    return t;
} 
```

两者`xxx`和`finder.find`都在 tx 控制下并且需要传播，但我发现只有第一个修改提交到数据库。当我删除该`find`方法时，不会提交任何修改。为什么是这样？

好的，这是我的代码：

```
public List<T> find(Class<T> bean, Map<String, Object> param,Pageable pg,Sortable od) {
    //from Questionair t where 1=1
    String hql="from "+this.getBeanName(bean)+" "+this.allias+" where 1=1 "+this.getWhereCourse(param)+" ";
    if(od!=null && od.getDir()!=null && od.getSort()!=null){
        hql+="order by "+this.allias+"."+od.getSort()+" "+od.getDir();
    }
    //开始查询
    Session s=sf.getCurrentSession();
    Query q=sf.getCurrentSession().createQuery(hql);
    if(pg!=null){
        q.setFirstResult(pg.getStart());
        q.setMaxResults(pg.getStart()+pg.getLimit());
    }
    System.out.println(q);
    return q.list();
} 
```

QuestionairService中的xxx方法：

```
 try{
        Teacher t=dao.get(new Teacher(1));
        t.setName("mark"); 

        //-------------
        System.out.println("加入finder");
        finder.find(Teacher.class,null,null,null);

        //-------------
        System.out.println("加入evict");
        dao.getSf().getCurrentSession().evict(t);

        t.setName("ff"); 
        return t;
    } 
```

这是我的配置

```
<tx:advice id="txAdvice" transaction-manager="tm">
    <tx:attributes>
        <tx:method name="*" propagation="REQUIRED" />
        <!--  <tx:method name="find" propagation="REQUIRES_NEW"/> -->
    </tx:attributes>
</tx:advice>
<aop:config>
    <aop:pointcut id="allService" expression="(execution(* com.etc.ssh.service.*.*(..)))" />
    <aop:pointcut id="allFinders" expression="(execution(* com.etc.ssh.finder.*.find(..)))" />
    <aop:pointcut id="allSession" expression="(execution(* *.getCurrentHttpSession(..)))" />
    <aop:advisor pointcut-ref="allService" advice-ref="txAdvice"/>
    <aop:advisor pointcut-ref="allFinders" advice-ref="txAdvice"/>
</aop:config>

<aop:config proxy-target-class="true">
    <aop:advisor pointcut-ref="allSession" advice-ref="ssAdvice"/>
</aop:config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:12:53.777

调用[`evict()`](http://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/Session.html#evict%28java.lang.Object%29)可防止对象随后被持久化。要“重新持久”它，您需要`save()`再次调用。

# objective-c - CoreBluetooth 代表主队列/主线程？

> ID：13188882
> 
> 赞同：11
> 
> 时间：2012-11-02T03:25:12.033
> 
> 标签：objective-c, ios, multithreading, core-bluetooth

在 CBCentralManager 的初始化程序中指定了一个队列`-initWithDelegate:queue:`。

从性能的角度来看，将核心蓝牙委托安排到后台线程/队列是否更好？UI 操作（例如跟踪平移或缩放手势）是否会干扰蓝牙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T13:52:36.283

异步回调的重点是不需要安排它们，因为它们会在繁重的工作结束时被调用......当然，当您的委托方法很繁重时，这不再起作用了，将它们移动到不同的队列:)

或者，如果它们每秒被调用 10000 次。但除此之外，我认为他们不需要被移出主队列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T09:51:13.650

根据您使用 CoreBluetooth 的方式，每秒可能会到达*很多*回调，因此我强烈建议创建一个专用（串行）调度队列以协调方式处理它们。

# objective-c - 将 int 与存储在字典中的数字进行比较

> ID：13188884
> 
> 赞同：0
> 
> 时间：2012-11-02T03:25:44.500
> 
> 标签：objective-c, ios, nsarray, nsdictionary

我有一个字典数组，其中我有一个整数键值，我想将这个键值与另一个 int 进行比较，就像这样......

```
while ([myInt != [[sortedArray valueForKey:@"MODID"] objectAtIndex:count]]) { 
```

计划是我循环遍历字典数组，直到找到与它们匹配的条目，然后将计数值传递到我需要使用它的位置。

但是我得到这个作为我的警告......然后当它执行时它永远找不到匹配的值......

```
Comparison between pointer and integer ('int' and 'id') 
```

我也在同一行收到错误

```
Implicit conversion of 'int' to 'id' is disallowed with ARC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:32:03.933

问题是，您不能将原语存储在字典中。因此，您将永远无法像那样正确比较。那里发生的事情是您正在将对象的地址与它进行比较。非常不可能匹配。

使用以下内容获取字典对象的整数值

```
while (myInt != [[[sortedArray valueForKey:@"MODID"] objectAtIndex:count] integerValue]) { 
```

根据我对您的数据结构的了解，我会选择这样的东西。

```
for(NSDictionary *d in sortedArray){
    NSArray *subarray = [d objectForKey:@"MODID"];
    for(int i=0; i<[subarray count]; i++){
        if( [[subarray objectAtIndex:i] integerValue] == myInt){
             //you have found it, do whatever you need, and break from the loop
         }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T03:32:38.537

数组中的数字存储在一个 NSNumber 对象中。您需要`intValue`从`NSNumber`对象中获取。

```
while (myInt != [[[sortedArray valueForKey:@"MODID"] objectAtIndex:count] intValue]) { 
```

如果你在 Xcode 4.5 中使用最新的 LLVM 编译器，你可以这样写：

```
while (myInt != [sortedArray[@"MODID"][count] intValue]) { 
```

编辑：在这种情况下，速记符号实际上不起作用。我忽略了`valueForKey:`原始代码中的使用。我读它时`objectForKey:`认为这是一本带有数组的字典。但它是一系列字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:32:43.533

尝试

```
while ([myInt != [[[sortedArray valueForKey:@"MODID"] objectAtIndex:count] intValue]) 
```

反而。因为您不能将整数值存储到数组或字典中。它应该是 NSNumber 或其他类型（或者是`id`类型）。

* * *

顺便说一句，不应该是

```
while (myInt != [[[sortedArray objectAtIndex:count] valueForKey:@"MODID"] intValue]) 
```

反而？我发现那`sortedArray`是一个数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T07:06:41.780

您可以看到这些警告，因为您可能正在尝试引用具有 int 等数据类型的对象。

```
for(NSDictionary *d in sortedArray){
    NSArray *subarray = [d objectForKey:@"MODID"];
    for(int i=0; i<[subarray count]; i++){
        if( [[subarray objectAtIndex:i] integerValue] == myInt){
             //you have found it, do whatever you need, and break from the loop
         }
} 
```

如果您观察这一行`[[subarray objectAtIndex:i] integerValue]`，您可以很容易地理解对象被转换为 int 类型并用于比较。

# css - 页脚背景在 Internet Explorer 中出现两次

> ID：13188885
> 
> 赞同：-1
> 
> 时间：2012-11-02T03:25:48.897
> 
> 标签：css, internet-explorer

[http://www.utahvalleyhealthclinic.com/services](http://www.utahvalleyhealthclinic.com/services)在所有版本的 IE 中出现了两次页脚背景。我检查了 HTML，页脚元素似乎在 IE 的 HTML 中出现了两次，但在 Chrome 中却没有。

我不清楚为什么会发生这种情况，因为我不记得将代码放在那里两次，我认为如果有的话它也会出现在 Chrome 中。我使用了一个标记验证器来检查页面，它说我缺少一大堆开始和结束标记（当我查看代码时它们实际上就在那里）。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:32:56.693

在页脚处，有两个`<a>`未关闭的锚标记。修复它，您的问题将得到解决。

工作演示：http: [//jsfiddle.net/DpGyT/1/](http://jsfiddle.net/DpGyT/1/)

改变

```
<div class="lbtns">
<a href="http://www.utahvalleyhealthclinic.com/contact-us"><img src="http://www.uvhc.mikeandjewels.com/wp-content/themes/thesis_185/custom/images/mapsbtn.png">
</div>
<div class="lbtns">
<a href="http://www.utahvalleyhealthclinic.com/patient-forms"><img src="http://www.uvhc.mikeandjewels.com/wp-content/themes/thesis_185/custom/images/frmsbtn.png">
</div> 
```

至

```
<div class="lbtns">
    <a href="http://www.utahvalleyhealthclinic.com/contact-us"><img src="http://www.uvhc.mikeandjewels.com/wp-content/themes/thesis_185/custom/images/mapsbtn.png"></a>
</div>
<div class="lbtns">
    <a href="http://www.utahvalleyhealthclinic.com/patient-forms"><img src="http://www.uvhc.mikeandjewels.com/wp-content/themes/thesis_185/custom/images/frmsbtn.png"></a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:32:42.363

这个：

```
<a href="http://www.utahvalleyhealthclinic.com/patient-forms"> 
```

显然你没有关闭它，有些东西坏了。

尝试使用 IE (F12) 检查并同时查看代码以找出发生的错误。

基本上 IE 理解你有两个“页脚”DIV，尽管 Chrome 显示只有一个。

至于关闭标签，请注意自动关闭标签，例如`<br />`代替`<br>`和`<img ... />`代替`<img ...>`

尝试类似 NetBeans 并使用 Auto-Indent（或 Google 其他选项）。帮助很多人找到你忘记关闭的标签，看看是否一切都在它应该在的地方。

# llvm - 将属性信息传递给 LLVM

> ID：13188886
> 
> 赞同：1
> 
> 时间：2012-11-02T03:25:50.823
> 
> 标签：llvm, clang

我使用
[http://clang.llvm.org/docs/InternalsManual.html](http://clang.llvm.org/docs/InternalsManual.html)
中详述的步骤在 clang 中创建了一个新属性 将属性 信息传递给 LLVM 的最佳方法是什么？

# javascript - 上一个/下一个 Javascript 字符串处理？

> ID：13188889
> 
> 赞同：1
> 
> 时间：2012-11-02T03:26:16.827
> 
> 标签：javascript, button, iframe, src

我正在尝试为我的项目制作上一个/下一个按钮。这是它的精简代码。

```
<html>
<head>
<script>
function prevP() {var element = document.getElementById("framePage");
             element = element.src;
             elementLen = element.length;
             elementLen = elementLen-6;
             elementChar = element.charAt(elementLen)
             elementChar = --elementChar
             newElement = element.replace(element.charAt(elementLen),elementChar);
             document.getElementById("framePage").src=(newElement);}

function nextP() {var element = document.getElementById("framePage");
             element = element.src;
             elementLen = element.length;
             elementLen = elementLen-6;
             alert(elementLen);
             elementChar = element.charAt(elementLen)
             elementChar = ++elementChar
             newElement = element.replace(element.charAt(elementLen),elementChar);
             document.getElementById("framePage").src=(newElement);}
</script>
</head>
<body>
<iframe src="www.websiteendingwithnumber1.com" id="framePage"></iframe>
</br>
<input type="button" onClick="prevP()" value="Previous">
<input type="button" onClick="nextP()" value="Next">
</body>
</html> 
```

我的项目创建了大约 40-120 个 html 页面以在 iframe 中显示。您可以使用“上一个/下一个”按钮来翻阅它们。每个页面都以最后的数字动态命名。例如 /path/mountpoint0/page/page0.html、page1.html ... page5.html 等等。我试图做的基本上是让这些函数中的每一个读取 iframe src 的当前 URL，然后根据您按下的按钮将其设置为所需的 src。基本上，如果您在第 5 页，它将分割字符串，如果您点击上一个，则将 src 设置为第 4 页，如果您点击下一个，则设置为第 6 页，等等。

一个警告！对于动态生成的 iframe HTML 文件，我还有一个动态生成的挂载点 (ramdisk)。我的项目将检测是否存在挂载点并相应地重命名为新的挂载点，IE 如果 mountpnt0 存在，则创建并使用 mountpnt1，依此类推，直到可以为止。所以！我看到的错误是它更改了挂载点上的数字，而不是 html 文件。示例 iframe.src = /tmp/prevram0/html/page0.html。我单击下一步，将我吐到一个找不到页面的错误，并试图转到 /tmp/prevram1/html/page0.html。我再次点击下一个，然后它翻转另一个数字，/tmp/prevram1/html/page1.html。所需的操作是 iframe.src = /tmp/prevram0/html/page0.html。我单击下一步，然后将 iframe.src 设置为 /tmp/prevram0/html/page1.html。

如果这令人费解或没有多大意义，我很抱歉。这个项目的大部分内容都在 python 中，我希望使用 HTML/JS 来创建我的项目的报告功能。我对 python 还很陌生，对我的方法很了解，但是 JS 对我来说是全新的，所以我为我所有的（可能的）头痛导致菜鸟错误道歉。但我真的很想要一些关于如何最好地处理这个问题的方向和指导:)

非常感谢大家！

编辑 - 快速澄清。

编辑 2 - 我要感谢大家迄今为止的大力投入！我真的，真的很感激！我现在正在处理工作中的一些事情，所以当我有机会再坐下来处理我的项目时，我会尝试你的建议，看看会发生什么:) 再次感谢大家（和女孩？）！

编辑 3 - window.onload = function(){ pageNo = 0; baseUrl = document.getElementById('+q1+'baseurl'+q1+').innerHTML; }

```
window.onload = function(){
lPageNo = document.getElementById('+q1+'lPageNo'+q1+').innerHTML;
}

function prevP() {
if(pageNo > 1) { pageNo--; } 
var prevEl = document.getElementById('framePage'); 
prevEl.src = baseUrl + pageNo + '.html';
}

function nextP() {
if(pageNo<lPageNo) { pageNo++; }
var nextEl = document.getElementById('framePage');
nextEl.src = baseUrl + pageNo + '.html';
}

<span id="baseurl" style="display:none;">'+prevram+'/html/page</span>

<span id="lPageNo" style="display:none;">'+str(ptit)+'</span> 
```

（prevram、q1 和 ptit 是我的 python 脚本中的 python 变量。prevram 是挂载点，ptit 是页码计数器。q1 是单引号。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:48:04.390

JavaScript 的 String[`.replace()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)搜索源字符串以查找您在第一个参数中传递的任何内容。如果第一个参数是一个字符串，那么它只会替换它的第一个实例。如果第一个参数是正则表达式，您可以进行更复杂的模式匹配和全局替换。如果第二个参数是一个函数，您可以进行更复杂的替换：将为每个匹配调用该函数，允许您处理每个匹配，但您认为合适并返回替换值 - 这非常适合您想要的情况增加或减少一个数字。

试试这个：

```
function prevP() {
    var element = document.getElementById("framePage");

    element.src = element.src.replace(/(\d+)(.html$)/,
                                  function(m,p1,p2){ return (+p1) -1 + p2; });
}
function nextP() {
    var element = document.getElementById("framePage");

    element.src = element.src.replace(/(\d+)(.html$)/,
                                  function(m,p1,p2){ return (+p1) +1 + p2; });
} 
```

我使用的正则表达式会查找`.html`源字符串末尾的数字，因此在您的情况下，如果使用格式为字符串的字符串，它*只会*`/tmp/prevram0/html/page0.html`找到第二个. 第二个参数中的回调使用一元加运算符将数字字符串转换为数字，对其进行减法或加法运算，然后将位放回原处。*`0``.html`*

 *请注意，这不会进行任何范围检查，因此即使已经为 0，它也会继续尝试前进。

演示：http: [//jsfiddle.net/3VFvz/](http://jsfiddle.net/3VFvz/)

关于您的代码的其他一些提示：

*   除了 之外`element`，您的所有变量都是全局的，因为它们没有在语句中`var`声明。
*   `.charAt()`返回一个字符串，因此在结果上使用运算符没有意义`--`。
*   您可以说`elementLen = element.length - 6`，您不需要将这`-6`部分作为单独的声明。
*   将函数体的第一行放在*之后*的行上是一种更正常的 JS 样式`{`，并将函数的结束`}`放在自己的行上 - 可能除了我上面的完全在一行上的非常短的函数回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:43:56.203

假设您的挂载点由服务器确定，我会这样尝试：隐藏包含基本字符串的页面中的元素：

```
<span id="base" style="display:none;">/tmp/prevram0/html/page</span> 
```

然后将处理程序绑定到加载事件以获取该信息：

```
window.onload= function ()
{
    baseString = document.getElementById('base').innerHTML;
    document.getElementById('framePage').src = baseString + pageNo + '.html';

} 
```

其中 baseString 是在代码中某处定义的变量，这些函数可以全局访问。pageNo 是另一个使用初始页码预定义的变量。

然后上一页功能：

```
function PrevP()
{
    if(pageNo > 1)
    {
         pageNo--;
    }
    var el = document.getElementById('framePage');
    el.src = baseString + pageNo + '.html';
} 
```

下一页功能您只需添加 pageNo 并执行相同的操作：

```
function NextP()
{
    if(pageNo<lastPageNo)
    {
          pageNo++;
    }
    var el = document.getElementById('framePage');
    el.src = baseString + pageNo + '.html';
} 
```*

# javascript - 从输入插入到 API URL jQuery

> ID：13188891
> 
> 赞同：0
> 
> 时间：2012-11-02T03:26:54.347
> 
> 标签：javascript, forms, api, jquery

我对 jQuery 相当陌生，非常感谢以下方面的帮助：

我有一个输入表单，允许用户选择 3 个不同的地理区域（国家、地区和城市）所有信息都来自 API。我需要来自国家/地区的输入（作为用户类型）进入调用“城市”API 的 URL。这样，用户只能获得与国家相关的城市。

这就是我所拥有的：

```
<input type="text" name="country" id="country" />
<input type="text" name="city" id="city" />

$(document).ready(function() {
        $("#country").tokenInput("http://someurl.com/search?q=", {
            method: "POST",
            searchDelay: 0,
        });

        $("#city").tokenInput("http://someurl.com/search?q=[Insert values form country input field]", {
            method: "POST",
            searchDelay: 0,
        });
    }); 
```

我正在使用的 jQuery 插件：[this](http://loopj.com/jquery-tokeninput/) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:55:21.630

我没有看到它记录在案，但插件代码的来源允许将函数用于 url 选项。

这应该有效：

```
$("#city").tokenInput(function(){
      return 'http://someurl.com/search?country='+ $('#country').val() +'q=';
     }, {
      method: "POST",
      searchDelay: 0,
}); 
```

如果它给您带来任何问题，请在浏览器控制台中检查请求以查看生成的最终 url 是什么，或者查看是否抛出任何错误

# ruby-on-rails - form_for 更新模型

> ID：13188893
> 
> 赞同：1
> 
> 时间：2012-11-02T03:27:18.393
> 
> 标签：ruby-on-rails

我有以下代码，我想更新数据库中的特定对象。但是由于某种原因，此功能不会显示。根据我回来的日志报告，没有任何问题。代码块之外的信息可以正常返回。

```
<% form_for (@person), :url => {:controller => "persons", :action => "update" } do |f| %>
        <%= f.label :name, "Name" %><br/>
        <%= f.text_field :name %>
        <%= f.label :score, "Score" %>
        <%= f.text_field :score %>
  <%= f.submit("Update") %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:45:51.470

你应该使用`<%= form_for ...`而不是`<% form_for ...`（都在那个等号中）

# ruby-on-rails - error You need to supply at least one validation

> ID：13188895
> 
> 赞同：1
> 
> 时间：2012-11-02T03:27:27.447
> 
> 标签：ruby-on-rails

my environment is ruby1.9.3+rails3.2.8+passenger.

error: You need to supply at least one validation

```
class Post < ActiveRecord::Base
  attr_accessible :content, :title, :url, :tags_attributes, :published, :category_id

  has_many :comments, :dependent => :destroy
  has_many :tags, :dependent => :destroy

  belongs_to :category

  validates :content, :presence => true
  validates :title, :presence => true
  validates :url,   :presence => true
  validates :tags_attributes, :presence => true
  validates :published, :presence => true
  validates :category_id, :presence => true

  accepts_nested_attributes_for :tags, :allow_destroy => true,
         :reject_if => proc { |attrs| attrs.all? { |k,v| v.blank? } }

  scope :published, where(:published => true)
end 
```

my controller is

```
class Admin::PostsController < Admin::ApplicationController

  uses_tiny_mce(:options => AppConfig.default_mce_options, :only => [:new, :edit])

  def index
    page = params[:page]
    if page == nil
      page = 1
    end
end 
```

index.html.erb

```
<h2>Post list</h2>
<table>
  <tr>
    <th>Title</th>
    <th>Category</th>
    <th>Created</th>
    <th>Updated</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  <% @posts.each do |post| %>
  <tr>
    <td><%= post.title %></td>
    <td><%= post.category.title %></td>
    <td><%= post.created_at.localtime.to_s(:db) %></td>
    <td><%= post.updated_at.localtime.to_s(:db) %></td>
    <td><%= link_to 'Edit', edit_admin_post_path(post) %></td>
    <td><%= link_to 'Delete',[:admin, post], :method => :delete, :confirm => 'are you sure?' %></td>
    <td></td>
  </tr>
  <% end %>
</table>

<br/>
<%= will_paginate @posts %>
<br/>
<%= link_to 'New Post', new_admin_post_path %> 
```

i think it has matter with rails_tiny_mce. before i rails plugin install it, validates is ok under my write. but after i install rails_tiny_mce, the error is display.

my site is `http://42.121.5.68/admin/posts.`

when i update model to

```
validates [:content, :title], :on => :save, :allow_blank => false,
            :presence => true, :length => { :in => 10..200 } 
```

error is Unknown validator: 'OnValidator'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:38:34.103

这是错误的：

```
:length => 10..200 
```

它应该是：

```
:length => { :in => 10..200 } 
```

请参阅[Rails 指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html#length)。

此外`:length => { :in => 10..200 }`已经确保该字段不为空，因此您不妨摆脱`:presence => true`：

```
validates :content, :title, :length => { :in => 10..200 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T13:32:32.937

你应该这样写**validates** instend of **validate**

# javascript - 使用滑块和 Pixastic 库进行图像编辑

> ID：13188896
> 
> 赞同：0
> 
> 时间：2012-11-02T03:27:30.553
> 
> 标签：javascript, jquery-ui, coffeescript, pixastic

我正在尝试使用[Pixastic js 库](http://www.pixastic.com/lib/docs/)编辑图像，以便在用户移动 JqueryUI 滑块时图像自动模糊到某个值。我已经使用滑块来使用此咖啡脚本调整图像的不透明度 CSS 值来实现此功能：

```
#This works
$('.sliderop').slider
    min: 0
    max: 1
    value: 1
    step: 0.01
    range: "min"
    slide: (event, ui) ->
        $("#img_16").css('opacity', ui.value) 
```

但是当我尝试使用 Pixastic 库做基本相同的事情时，没有骰子：

```
#This doesn't
$('.sliderbl').slider
    min: 0
    max: 5
    value: 0.5
    step: 0.1
    range: "min"
    slide: (event, ui) ->
        Pixastic.process($("#img_16"), "blurfast", { amount: ui.value}) 
```

这段代码的奇怪之处在于它“冻结”了滑块——当我加载页面时，滑块停留在默认值“0.5”并且无法移动（但如果我注释掉`Pixastic.process($("#img_16"), "blurfast", { amount: ui.value})`代码，它会移动通常再次）。

这是我的代码问题还是我使用 Pixastic 库的方式有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:30:39.293

因为您使用的是 jquery 版本的 Pixastic 库。如果您下载没有 jquery 插件的 Pixastic 库，那么前面的代码应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:54:38.667

好的，我在另一个问题[Pixastic Blur not working - variable 问题上找到了答案？](https://stackoverflow.com/questions/11837215/pixastic-blur-not-working-variable-issue)

代码更改为：

```
$('.sliderbl').slider
    min: 0
    max: 5
    value: 0.5
    step: 0.1
    range: "min"
    slide: (event, ui) ->
        $("#img_16").pixastic("blurfast", {amount:ui.value}) 
```

不过，我很好奇为什么这行得通，而其他代码却不行。在另一个页面上（不以这种方式使用滑块），Pixastic 调用工作正常。

# android - How to draw on the android Canvas from the native code?

> ID：13188898
> 
> 赞同：0
> 
> 时间：2012-11-02T03:27:54.187
> 
> 标签：android, java-native-interface, android-canvas

I have a lot of drawing code written in C++, and I need to port it to the android, but I want to avoid from rewriting it on java. All of drawings are primitives - lines, rects, round rects etc, but also need to draw digits and letters.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-12T09:21:38.260

*   在 Java 中创建位图
*   将所述位图传递给本机
*   用于`AndroidBitmap_lockPixels`获取指向像素的指针
*   使用您选择的绘图库在像素上疯狂
*   解锁像素并返回 Java
*   `onDraw`用于将位图blit到`Canvas.drawBitmap`设备画布上

如果您不需要硬件加速绘图，这将起作用。[这](https://github.com/google/skia/tree/9f549358b3ac9f61e78b194e39d6ac6eb322e35e/platform_tools/android/examples/hello_skia_app)是一个使用 Skia 本机库绘制位图然后将结果传送到 Java 画布的好示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T03:55:08.113

考虑使用[NativeActivity](http://developer.android.com/reference/android/app/NativeActivity.html)，您可以在 C/C++ 中自己渲染整个屏幕

# ruby - Rack: Multiple session cookies for a single rack application

> ID：13188899
> 
> 赞同：4
> 
> 时间：2012-11-02T03:27:57.883
> 
> 标签：ruby, rack

How can one interact with multiple sessions cookies (for different path or domains) in a single rack application?

For example, considering the following application using 3 locations:

*   www.my-app.net => main app
*   www.my-app.net/app_a => sub app A
*   app_b.my_app.net/ => sub app B

Should be able to interact with 3 sessions cookies:

*   domain=www.my-app.net; path=/;
*   domain=www.my-app.net; path=/app_a;
*   domain=app_b.my-app.net/; path=/;

Rack::Session::Cookie seemed to be a good choice, but as a middleware the session cookie has to be set in config.ru and seems to be limited to one session cookie per rack application.

In this special case, the main rack application point is to easily add sub applications, so dividing the application in multiple rack application to use Rack::Session::Cookie is not a viable solution.

The ideal would be a way to interact freely with multiple session cookies from inside the rack application code.

For now, I am considering:

*   writing a middleware that allow interaction with multiple session cookies
*   use CGI::Cookie to implement a custom session cookie management inside the application

But both are quite tedious so I was wondering if there was a simpler way to achieve this functionality.

Thanks in advance for any advice or suggestion.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T02:28:18.827

如果有人有相同的需求，我发现创建一个类来管理应用程序内的会话是最简单的方法。

Rack::Utils 有 2 个不错的快捷方式，[Rack::Utils.set_cookie_header！](http://rubydoc.info/github/rack/rack/Rack/Utils#set_cookie_header!-class_method)和[Utils.delete_cookie_header！](http://rubydoc.info/github/rack/rack/Rack/Utils.delete_cookie_header!)在处理 cookie 时，这真的可以让事情变得更容易。

我将会话保存在使用我的应用程序的数据库中，但支持另一个后端应该很简单。

作为旁注，我提出了一些注意事项：

*   为了确保 cookie 的名称有效，我为此使用了子应用程序名称的 sha-1。
*   [SecureRandom.urlsafe_base64](http://rubydoc.info/stdlib/securerandom/1.9.2/SecureRandom)对于生成会话密钥很有用。
*   会话清理和刷新必须手动实现。

* * *

# 示例代码

管理 cookie 的类，提交函数设置和删除要存储的 cookie。

```
class Framework::Response::Cookies

  def set( params )
    @cookies[params.delete( :name )] = params
  end

  def remove( params )
    @remove_cookies[params.delete( :name )] = params
  end

  def commit( headers )
    @cookies.each_pair do |name, params|
      Rack::Utils.set_cookie_header!( headers, name, params )
    end
    @remove_cookies.each_pair do |name, params|
      Rack::Utils.delete_cookie_header!( headers, name, params )
    end
  end

end 
```

管理会话的类（使用 Mongo 作为后端）：

```
class Database::Mongo::Session < Session

  def save
    expire = Time.now + @session_ttl
    @framework.content.db.find_and_modify( self.collection_name, { 
      :query => { :name => @session_name, :id => @session_id }, 
      :update => { :expire => expire, :name => @session_name, :id => @new_session_id || @session_id , :variables => @variables.to_hash },
      :upsert => true 
    })
    @framework.response.cookies.set( 
      :name => @session_name,
      :value => @new_session_id || @session_id,
      :path => @framework.applications.active.active_request['path'],
      :domain => @framework.applications.active.active_request['host'],
      :httponly => true  
    )
  end

  def delete
    @framework.content.db.remove( self.collection_name, { :id => @session_id } )
    @framework.response.cookies.remove( :name => @session_name )
  end

end 
```

每次`@framework.response.cookies.set`调用时，它都会将 cookie 数据推送到`Framework::Response::Cookies`类`@cookies`变量。

在提供响应之前，调用以`Framework::Response::Cookies.commit`使用`Rack::Utils`.

# objective-c - Objective-C Inline Array Declaration With Classes

> ID：13188901
> 
> 赞同：1
> 
> 时间：2012-11-02T03:28:07.120
> 
> 标签：objective-c, box2d-iphone

I'm trying to create an array of b2Vec2 arrays using inline declaration. Right now I have...

```
 NSMutableArray *array = [[NSMutableArray alloc] init];

    b2Vec2 temp1[] = {
        *new b2Vec2(1,1),
        *new b2Vec2(0,0)
    };

    [array addObject:(id)temp1];

    b2Vec2 temp2[] = {
        *new b2Vec2(1,1),
        *new b2Vec2(0,0)
    };

    [array addObject:(id)temp2];

    b2Vec2 temp3[] = {
        *new b2Vec2(1,1),
        *new b2Vec2(0,0)
    };

    [array addObject:(id)temp3]; 
```

Is there any way I can get the temp1, temp2, and temp3 declaration inline with the addObject method call? Something like this...

```
[array addObject:<some inline array instantiation>];
[array addObject:<some inline array instantiation>];
[array addObject:<some inline array instantiation>]; 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:35:47.957

不，你不能那样做。您必须先声明数组 temp1-3，然后才能在`[array addObject:]`语句中使用它。您可以做的一件事是创建另一个函数来初始化并返回您需要的数组。

# c# - Recording Video from IP camera using VLC?

> ID：13188902
> 
> 赞同：0
> 
> 时间：2012-11-02T03:28:22.780
> 
> 标签：c#, web-applications, vlc

i am try VLC media player to record a video from IP camera. i found this command line to record video from ip camera.

```
"C:\Program Files\VideoLAN\VLC\vlc.exe" -I dummy --dummy-quiet http://user:password@ipAddress.com:port/videostream.asf --run-time=120 :demux=dump :demuxdump-file=C:\output_test.avi vlc://quit 
```

The command line is working, i can get video with sound from IP camera. The only problems is the recorded video only can be played using VLC itself, the video also only have information which is only size(KB,MB), the windows cannot get the other information such as video length, size(Width*Height), etc. And the most important is video cannot be played using Window Media Player.

****EDIT**

```
"C:\Program Files\VideoLAN\VLC\vlc.exe" -I dummy --dummy-quiet http://user:password@ipAddress.com:port/videostream.asf --run-time=120 --sout "#std{access=file,mux=avi,dst="c:\test.avi"}"  vlc://quit 
```

using this command, now i got all the video's info and playable using window media player and other players as well, but this time the there is no sound in video.

I'm implementing this in web app. I got the code running fine.

Does anyone here can provide me the correct command line to get working video with sound and also video's information.

i tried searching but cannot find the correct command line(if any). Tried VLC forum but got Error 403.

**note: i am using windows 7 OS.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T02:30:09.203

尝试转码和复用

```
vlc.exe -I dummy --dummy-quiet http://user:password@ipAddress.com:port/videostream.asf --run-time=120 :sout=#transcode{vcodec=h264,vb=1024,acodec=mp3,ab=128,channels=2,samplerate=44100}:std{access=file,mux=avi,dst="c:\test.avi"} 
```

# c# - can not use watin

> ID：13188903
> 
> 赞同：1
> 
> 时间：2012-11-02T03:28:29.973
> 
> 标签：c#, watin, missing-features

I run a very simple watin console application like below

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using WatiN.Core;

namespace ConsoleApplication2
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            IE ie = new IE();

            // point it to http://www.google.com

            ie.GoTo("http://www.google.com");

            // fill the search box

            ie.TextField(Find.ByName("q")).TypeText("WatiN");

            // performs click event

            ie.Button(Find.ByValue("Google Search")).Click();
        }
    }
} 
```

Which is not working. A pop up said that there's a missing `.exe` file. I can not understand because it's just a console application. Why do I need the `.exe` file?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:53:31.530

如果您尝试通过*Internet Explorer*`WatiN`进行*Web 应用程序测试*，请确保首先完成正确的配置。

 *`NUnit`不使用`STA apartment state`;在线程中运行测试 它使用`multithreaded apartment (MTA)`，但这不是一个大问题，您可以将配置文件附加到`NUnit`测试项目并指定您想要的公寓状态模式：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="NUnit">
            <section name="TestRunner" type="System.Configuration.NameValueSectionHandler"/>
        </sectionGroup>
    </configSections>
    <NUnit>
        <TestRunner>
            <!-- Valid values are STA, MTA. Others ignored. -->
            <add key="ApartmentState" value="STA" />
        </TestRunner>
    </NUnit>
</configuration> 
```

文章参考：

[WatiN、Internet Explorer 和 Thread.Apartmentstate](http://watin.org/documentation/sta-apartmentstate/)

> 本文解释了将线程的 ApartmentState 设置为单线程单元 (STA) 的原因和方法。在使用 Internet Explorer 运行测试时，这是必需的。它还向您展示了在将 WatiN 与 NUnit、MBUnit、MSTest、TestDriven.Net、Fitnesse 或 SharpDevelop 一起使用时如何执行此操作。*

# c - 代码的一部分是否会干扰循环？

> ID：13188906
> 
> 赞同：2
> 
> 时间：2012-11-02T03:29:39.130
> 
> 标签：c, loops, do-while

我正在用 C 编写一个计算器，它可以进行基本算术运算，并且可以循环直到用户输入命令。我以为我掌握了循环的窍门，但我只放了一个循环（开始一项新操作）并且它不起作用。代码的一部分是否会干扰循环？语法错了吗？否则程序运行良好。

```
int main(int argc, char *argv[])
{
    char reponse;

    int oper;
    float nb1, nb2, resultat;

    do
    {
        printf("Entrez les deux valeurs que vous voulez calculer: \n");
        scanf("%f %f", &nb1, &nb2);

        printf("\nValidez votre op\x82rateur pour effectuer votre cacul\n");
        printf("choisissez \"1\" pour une addition, \"2\" pour une soustraction,\n");
        printf("\"3\" pour une multiplication ou \"4\" pour une division\n");
        scanf(" %d", &oper);

        switch(oper )
        {
            case 1:
                resultat = nb1 + nb2;
                printf("\n%.2f + %.2f = %.2f\n", nb1, nb2, resultat);
                break;
            case 2:
                resultat = nb1 - nb2;
                printf("\n%.2f - %.2f = %.2f\n", nb1, nb2, resultat);
                break;
            case 3: resultat = nb1 * nb2;
                printf("\n%.2f * %.2f = %.2f\n", nb1, nb2, resultat);
                break;
            case 4: resultat = nb1 / nb2;
                printf("\n%.2f / %.2f = %.2f\n", nb1, nb2, resultat);
                break;
            default:
                printf("\nErreur\n");
        }

        printf("\nVoulez-vous continuer \x85 faire des op\x82rations? [o/n]\n");
        scanf(" c%", &reponse);
    } while (reponse == 'o' || reponse == 'O');

    printf("\nMerci au revoir ! Appuyez sur une touche quelconque pour terminer");
    getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:44:43.687

利用

```
char reponse[4];

....

scanf("%3s", reponse);
} while (reponse[0] == 'o' || reponse[0] == 'O'); 
```

# ruby-on-rails - 偶尔出现 422 错误：客户端未发送会话 cookie？

> ID：13188911
> 
> 赞同：0
> 
> 时间：2012-11-02T03:30:35.120
> 
> 标签：ruby-on-rails

一些用户在发布`422 ActionController::InvalidAuthenticityToken`表单时遇到错误。

它有时会发生在少数用户身上。如果他们稍后再次尝试他们的请求，它通常会起作用。

在每种情况下都会发送真实性令牌。我假设客户端没有将会话 cookie 与 POST 一起发送（这可以解释为什么服务器无法验证令牌）。为什么会这样？

最后，表单是通过 javascript ( ) 提交的`$('#new_user')[0].submit()`，这会以某种方式阻止会话 cookie 被发送吗？

不幸的是，禁用`verify_authenticity_token`before_filter 不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:34:56.717

我们已经使用我们的一个应用程序遇到了这种情况。我们将会话存储在 memcached 中，如果会话从缓存中被逐出或会话过期，任何后续的 post/put/delete 都会引发 422。我们通过实现一个前置过滤器“requires_login？”来解决这个问题。如果会话已过期，则检查会话并注销用户。然后我们将应用程序控制器中的protect_from_forgery方法移到requires_login之后运行？

例如

```
before_filter :requires_login?

protect_from_forgery 
```

希望这是有道理的

# youtube - 如何使用 YouTube API 获取 YouTube 广播视频 URL？

> ID：13188918
> 
> 赞同：0
> 
> 时间：2012-11-02T03:31:13.280
> 
> 标签：youtube, youtube-api, broadcast

是否可以使用 YouTube **API获取****YouTube 广播视频**URL ？ 正如我所意识到的，每次**重新启动广播时，广播的视频 URL 都会****发生变化**。 我想以**编程**方式获取新 URL ，并在我的网站的 iFrame 中显示广播视频。 这些都可能吗？

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:43:48.217

实际上答案很简单：
从 Youtube Data API 文档中，我找到了可以按作者获取所有视频的方法：
[https ://gdata.youtube.com/feeds/api/videos?author=crystalspringllc](https://gdata.youtube.com/feeds/api/videos?author=crystalspringllc)

还有我想要的视频网址。******

# c++ - 初始化表达式列表被视为复合表达式向量

> ID：13188923
> 
> 赞同：1
> 
> 时间：2012-11-02T03:31:46.743
> 
> 标签：c++, function, vector, ostream

我似乎无法弄清楚这一点，我正在尝试将向量调用给函数并将错误初始化表达式列表视为复合表达式无法在初始化中转换`Vector<int>`为。`int`

功能：

```
int print_vector(ostream& os, vector<int> f, vector<int> g, vector<int> h)
{
    for(int cnt=0; cnt!=10;cnt++){
         os << f[cnt];
    };
    for(int cnt=0; cnt!=11;cnt++){
        os << g[cnt];
    };
    for(int cnt=0; cnt!=20;cnt++){
        os << h[cnt];
    };

    return 0;
 } 
```

通话

```
int print_vector(&out,v,vec, vector); 
```

初始化（这发生在通话之前）

```
ostream out();
    vector<int> v(10);
for(int cnt=0;cnt!=10;cnt++){
    v[cnt] = 99+cnt;
};

vector<int> vec(11);
for(int cnt=0;cnt!=11;cnt++){
    vec[cnt] = 99+cnt;
};

vector<int> vector(20);
for(int cnt=0;cnt!=20;cnt++){
    vector[cnt] = 99+cnt;
}; 
```

# deployment - 如何在 JBOSS 开发人员工作室中为 JSF 2.0、CDI 和 JPA 2.0 配置热部署

> ID：13188941
> 
> 赞同：0
> 
> 时间：2012-11-02T03:34:56.787
> 
> 标签：deployment, jsf-2, jboss7.x, cdi

请我搜索有关如何在 Jboss Developer studio 5.0.0.GA 和 JBOSS AS 7.1.1 之间为 JSF 2、CDI、JPA 2 项目配置热部署集成的信息。我所看到的只是半生不熟的信息。

请有人给我指出一个很好的教程，我可以在其中找到完整的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:39:38.067

JBoss 不能开箱即用地执行 CDI bean 或 EJB 的热部署。仅提供网页热部署（jsp、facelets）。如果您在调试模式下启动服务器，您可以热交换部分代码。我建议尝试[DCEVM](http://ssw.jku.at/dcevm/)，它提供了很好的 java 代码热重新部署或[JRebel](http://zeroturnaround.com/software/jrebel/)，它甚至更好，但它不是免费的。

# android - 开始在 android 中发送邮件的活动

> ID：13188942
> 
> 赞同：2
> 
> 时间：2012-11-02T03:35:02.247
> 
> 标签：android, android-intent

我正在设计一个发送邮件的应用程序。一切都设置好了，但是当代码到达模拟器中的以下行时，它会显示“应用程序已意外停止”并且日志 cat 显示 NullPointerException。我也给了我发现的尽可能多的权限。请帮助我在清单文件中必须赋予哪些特定权限以及如何解决问题。

```
startActivity(Intent.createChooser(send, "This is the chooser title")); 
```

发送是我的意图。

完整的日志猫消息如下：

```
11-01 23:21:37.721: W/IInputConnectionWrapper(442): showStatusIcon on inactive InputConnection
11-01 23:21:39.781: I/msg(442): this is offhook
11-01 23:21:43.991: I/msg(442): this is idle
11-01 23:21:43.991: I/msgfinal(442): this is it
11-01 23:21:43.991: I/msg(442): this is from msg
11-01 23:21:43.991: I/sha(442): here
11-01 23:21:43.991: D/AndroidRuntime(442): Shutting down VM
11-01 23:21:43.991: W/dalvikvm(442): threadid=1: thread exiting with uncaught exception (group=0x40015560)
11-01 23:21:43.991: E/AndroidRuntime(442): FATAL EXCEPTION: main
11-01 23:21:43.991: E/AndroidRuntime(442): java.lang.NullPointerException
11-01 23:21:43.991: E/AndroidRuntime(442):  at android.app.Activity.startActivityForResult(Activity.java:2827)
11-01 23:21:43.991: E/AndroidRuntime(442):  at android.app.Activity.startActivity(Activity.java:2933)
11-01 23:21:43.991: E/AndroidRuntime(442):  at com.example.dialing.MainActivity.fun(MainActivity.java:33)
11-01 23:21:43.991: E/AndroidRuntime(442):  at com.example.dialing.PhoneCallListener.onCallStateChanged(MainActivity.java:104)
11-01 23:21:43.991: E/AndroidRuntime(442):  at android.telephony.PhoneStateListener$2.handleMessage(PhoneStateListener.java:319)
11-01 23:21:43.991: E/AndroidRuntime(442):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 23:21:43.991: E/AndroidRuntime(442):  at android.os.Looper.loop(Looper.java:123)
11-01 23:21:43.991: E/AndroidRuntime(442):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-01 23:21:43.991: E/AndroidRuntime(442):  at java.lang.reflect.Method.invokeNative(Native Method)
11-01 23:21:43.991: E/AndroidRuntime(442):  at java.lang.reflect.Method.invoke(Method.java:507)
11-01 23:21:43.991: E/AndroidRuntime(442):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-01 23:21:43.991: E/AndroidRuntime(442):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-01 23:21:43.991: E/AndroidRuntime(442):  at dalvik.system.NativeStart.main(Native Method)
11-01 23:21:48.481: I/Process(442): Sending signal. PID: 442 SIG: 9 
```

请注意，直到“这里”（第 6 行），它是日志。I 用于检查，它是`startActivity`函数之前的行。

```
 Intent msg=new Intent(Intent.ACTION_SEND);
        String[] recipients={"myid@gmail.com"};

        msg.putExtra(Intent.EXTRA_EMAIL, recipients);

        msg.putExtra(Intent.EXTRA_TEXT, "This is the email body");
        msg.putExtra(Intent.EXTRA_SUBJECT, "This is the email subject");

        //msg.setType("message/rfc822");
        msg.setType("*/*");

        //context.startActivity(Intent.createChooser(msg, "This is the chooser title"));
        Log.i("msg","this is from msg");

        //calling into main activity
        MainActivity ma=new MainActivity();
        ma.fun(msg); 
```

//这个函数在mainActivity里面

```
public void fun(Intent send)
{
    Log.i("sha","here");
    startActivity(Intent.createChooser(send, "This is the chooser title"));

    Log.i("sha","here2");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:14:28.517

走这条路：

```
Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_EMAIL,new String[] { "rahul@mail.com"});
    email.putExtra(Intent.EXTRA_SUBJECT,"Contact Us");
    email.putExtra(Intent.EXTRA_TEXT,"sent a message using the contact us ");

    email.setType("message/rfc822");

    startActivityForResult(Intent.createChooser(email, "Choose an Email client:"),
                        1); 
```

然后创建方法`onActivityResult`

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if(requestCode == MY_REQUEST_CODE) {
        if(resultCode == RESULT_OK) {

        } else {

            Intent ingoHome = new Intent(abc.this,
                    pqr.class);
            ingoHome.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(ingoHome);

        }
    }

    finish();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:53:52.270

试试这个 。. . . . 它工作正常。

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{""}); 
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,""); 
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,""); 
startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

如果您需要在电子邮件中附加任何其他文件，您可以将其添加到“emailIntent.putExtra();”中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:27:55.783

问题是您使用的上下文。代码很好。只是不使用

```
MainActivity ma=new MainActivity();
ma.fun(msg); 
```

像使用它一样

```
MainActivity.this.fun(msg); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T04:55:37.143

**java.lang.NullPointerException**基本上意味着您正在引用一个不存在的对象（尚不存在。）

尝试注释掉或删除这些行：

```
MainActivity ma=new MainActivity();
ma.fun(msg); 
```

并用您的 MainActivity.fun(Intent msg) 方法中的代码替换它们，匹配变量名称：

```
Log.i("sha","here");
startActivity(Intent.createChooser(msg, "This is the chooser title"));
Log.i("sha","here2"); 
```

如果我正确阅读了您的代码，则您一直在尝试创建 current 的另一个实例`Activity`并将其传递给`Intent`包含`Context`您 current 的`Activity`. 您已经在一个实例中`MainActivity`（它是由 Android 为您实例化的。）

编辑： startActivity 和 startActivityforResult 都启动另一个活动， startActivityforResult 期望结果返回到第一个活动中的回调。我会努力让 startActivity 首先工作，如果需要，您可以随时将其转换为 startActivityforResult。

由于您的应用程序在 崩溃`MainActivity.fun(MainActivity.java:33)`，因此 startActivity 似乎在实例化之前正在接收“发送”。

我只是要回应其他所有人，并说你的代码应该可以工作..只要你巨大的上下文代码块是调用你的 fun() 方法的唯一地方。如果你把它全部放在它自己的方法中，它会是什么样子：

```
class MainActivity extends Activity {
    private static final String TAG = Controller.class.getSimpleName();

    /* fields, other methods */

    private void sendMail(){
        Intent msg=new Intent(Intent.ACTION_SEND);
        String[] recipients={"myid@gmail.com"};
        msg.putExtra(Intent.EXTRA_EMAIL, recipients);
        msg.putExtra(Intent.EXTRA_TEXT, "This is the email body");
        msg.putExtra(Intent.EXTRA_SUBJECT, "This is the email subject");
        // I personally use application/octet-stream because it
        // shows all my email clients, but not much other useless stuff.
        // Might get me flamed, though lol :)
        msg.setType("application/octet-stream");
        MainActivity.this.getApplicationContext().startActivity(
            Intent.createChooser(msg, "This is the chooser title")
        );
        Log.i(TAG,"made it! :D");
    }/*end sendMail()*/

    /* more fields and methods */

}/*end MainActivity*/ 
```

# magento - Magento 网站恢复

> ID：13188944
> 
> 赞同：3
> 
> 时间：2012-11-02T03:35:05.790
> 
> 标签：magento, backup, restore

我有一种情况，我必须从我之前为目录的所有文件和文件夹制作的 FTP 备份中恢复我的 magento 站点`public_html`。请注意，我没有 mySql 备份。

现在，当我尝试访问我的`www.domainname.com`网站时，它只显示一个错误号。请注意，我不能再去`www.domainname.com/admin`。我不知道如何启用调试日志记录，所以我可以看到错误号试图告诉我什么。但是，我可以转到我的`hostgator.com`控制面板并单击错误日志，但没有条目。

我的问题是：有什么办法可以挽救原始网站，减去数据库？我可以不必重新输入我曾经进入数据库的产品等。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:47:52.630

该站点是数据库的 85%。没有数据库备份，没有站点。

您必须备份您的 public_html 文件和 Magento 数据库才能完全备份您的 Magento 电子商务安装。

基本上，您所拥有的只是以前版本的应用程序、代码更改、皮肤和模板。

配置、CMS 页面、类别、产品和所有其他内容都存在于数据库中。

显示的错误号是堆栈跟踪的文件名，以 var/report 结尾。它可能告诉您此时不存在数据库。

# python - 如何使用 scipy.integrate 获取截断球体的体积？

> ID：13188948
> 
> 赞同：4
> 
> 时间：2012-11-02T03:35:43.853
> 
> 标签：python, numpy, scipy, numerical-integration

我正在努力使用 scipy.integrate，我使用了 tplquad，但是我怎样才能`integrate`获得（截断）球体的体积？谢谢

```
import scipy
from scipy.integrate import quad, dblquad, tplquad
from math import*
from numpy import *

R = 0.025235 #radius
theta0 = acos(0.023895) #the angle from the edge of truncated plane to the center of
sphere

def f_1(phi,theta,r):
    return r**2*sin(theta)*phi**0
Volume = tplquad(f_1, 0.0,R, lambda y: theta0, lambda y: pi, lambda y,z: 0.0,lambda
y,z: 2*pi)

print Volume 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-02T16:11:43.200

要按角度截断，使用球坐标系很方便。假设[取自 Arkansas TU](http://faculty.atu.edu/mfinan/2934/cal1652.pdf)的定义`radius (r)`和`theta (t)`为`phi (p)`： ![球坐标图](../Images/0046599fb33730ecd4e7f670dfeb1adb.png)

然后，您可以截断设置限制`r1` `r2` `t1` `t2` `p1` `p2`：：

```
import scipy
from scipy.integrate import quad, dblquad, tplquad
from numpy import *

# limits for radius
r1 = 0.
r2 = 1.

# limits for theta
t1 = 0
t2 = 2*pi

# limits for phi
p1 = 0
p2 = pi

def diff_volume(p,t,r):
    return r**2*sin(p)

volume = tplquad(diff_volume, r1, r2, lambda r:   t1, lambda r:   t2,
                                      lambda r,t: p1, lambda r,t: p2)[0] 
```

要按平面截断，使用笛卡尔坐标系很方便`(x,y,z)`，其中`x**2+y**2+z**2=R**2`（[参见 mathworld](http://mathworld.wolfram.com/kkrSphere.html)）。在这里，我将截断球体的一半来演示：

*   从`x1=-R`到`x2=R`
*   从`y1=0`到`y2=(R**2-x**2)**0.5`
*   从`z1=-(R**2-x**2-y**2)**0.5`到`z2=(R**2-x**2-y**2)**0.5`

一个使用 lambda 的有用示例：

```
R= 2.

# limits for x
x1 = -R
x2 = R

def diff_volume(z,y,x):
    return 1.

volume = tplquad(diff_volume, x1, x2,
                 lambda x: 0., lambda x: (R**2-x**2)**0.5,
                 lambda x,y: -(R**2-x**2-y**2)**0.5,
                 lambda x,y:  (R**2-x**2-y**2)**0.5 )[0] 
```

# python - Python NTLM 登录

> ID：13188951
> 
> 赞同：6
> 
> 时间：2012-11-02T03:36:07.433
> 
> 标签：python, urllib2, ntlm

我正在尝试从需要 NTLM 登录的 url 中提取信息。

我最初收到 401 错误，经过一些调整后能够拉出页面，说明我输入了无效的凭据。

用户名和密码正确，但我无法通过无效凭据页面。

**lgn2.py**：

```
import urllib2
import HTTPNtlmAuthHandler

login = open('c:/temp/login.txt')
open = login.read()
to = open.split()
user = str(to[0])
password = str(to[1])

url = "http://INSERT URL HERE.com/"
passman = urllib2.HTTPPasswordMgrWithDefaultRealm()
passman.add_password(None, url, user, password)
auth_NTLM = HTTPNtlmAuthHandler.HTTPNtlmAuthHandler(passman)

opener = urllib2.build_opener(auth_NTLM)
urllib2.install_opener(opener)

response = urllib2.urlopen(url)
print(response.read()) 
```

我有一个包含 \ 的用户名，使用上面的方法打印时名称中没有双反斜杠。我是否应该将其保留在 print 名称中的双反斜杠与 txt 文件中的用户名拼写完全相同的位置？

txt 文件只是一个 txt 文档，只有： **domain\user\name password**。

用户名中间的第二个反斜杠将是用户名的一部分。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-02-23T12:12:33.330

我们公司有代理并使用 NTLM。要连接而不必在我使用的脚本中放置凭据：

```
import win32com.client

url = 'https://...'

h = win32com.client.Dispatch('WinHTTP.WinHTTPRequest.5.1')
h.SetAutoLogonPolicy(0)
h.Open('GET', url, False)
h.Send()
result = h.responseText
result 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-19T09:30:49.830

也许您没有使用[原始字符串](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)：

> 除非存在 'r' 或 'R' 前缀，否则字符串中的转义序列将根据与标准 C 使用的规则类似的规则进行解释。

```
>>> 'domain\user'
  File "<stdin>", line 1
SyntaxError: (unicode error) 'unicodeescape' codec can't decode bytes in position 6-7: truncated \uXXXX escape
>>> r'domain\user'
'domain\\user' 
```

这对我有用（在 Python 2 中，而不是 3 中）：

```
from ntlm import HTTPNtlmAuthHandler
import urllib2

user = r'domain\user'
password = "passphrase"
passman = urllib2.HTTPPasswordMgrWithDefaultRealm()
passman.add_password(None, "http://projects/", user, password)
auth_NTLM = HTTPNtlmAuthHandler.HTTPNtlmAuthHandler(passman)
opener = urllib2.build_opener(auth_NTLM)
urllib2.install_opener(opener)

url = "http://projects/_vti_bin/owssvr.dll?Cmd=Display&List=etc"
response = urllib2.urlopen(url)
headers = response.info()
print("headers: {}".format(headers))
body = response.read()
print("response: " + body) 
```

# php - PHP Mailer 错误：Mailer 错误 - 必须提供至少一个收件人电子邮件地址

> ID：13188954
> 
> 赞同：3
> 
> 时间：2012-11-02T03:36:49.223
> 
> 标签：php, smtp, phpmailer

我遇到了 php mailer 脚本的问题。使用 mamp 脚本可以工作，但在服务器上出现错误（我省略了敏感信息）。

> “无效地址：[有效电子邮件] 邮件错误：您必须提供至少一个收件人电子邮件地址。”

这是我的代码：

```
require_once("includes/phpmailer/class.phpmailer.php");

    $mail = new PHPMailer();
    $mail->IsSMTP();

    $mail->SMTPAuth   = true;                  
    $mail->Host       = "smtp.emailsrvr.com"; 
    $mail->SMTPDebug  = 2;                    
    $mail->Port       = 25;                    
    $mail->Username   = "test@test.com"; 
    $mail->Password   = "test";

    $mail->Subject = "Subject";

    $mail->SetFrom($_POST['email'], $_POST['name']);
    $mail->AddReplyTo($_POST['email'], $_POST['name']);

    $address = "test@test.com";
    $mail->AddAddress($address, "name");

    $body = "<p>test</p>";

    $mail->MsgHTML($body);

    if(!$mail->Send()) {
      echo "Mailer Error: " . $mail->ErrorInfo;
    } else {
      echo "Message sent!";
    } 
```

如果有帮助，我正在使用 rackspace 电子邮件应用程序。

不幸的是，我对 php 或服务器设置不太了解，所以如果有人能提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:43:28.740

只需更改此行：

```
$address = "[valid email]"; 
```

类似于：

```
$address = "test@test.te"; 
```

或发送到您自己的电子邮件，这样您就可以更好地进行测试，并且它会起作用。

它只是说明“[有效电子邮件]”实际上不是“有效电子邮件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:56:15.827

所以我在这里没有运气，但我现在知道问题源于服务器邮件设置而不是脚本。

最后我只是去使用邮戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T17:25:06.343

当我的类名和函数名相同时，我会遇到这个问题。比我更改函数的名称并解决它。希望它会帮助任何人。

# jquery - 下拉切换 .click() 不起作用

> ID：13188963
> 
> 赞同：0
> 
> 时间：2012-11-02T03:38:40.560
> 
> 标签：jquery, twitter-bootstrap

基本上，我希望单击一个`<A>`以触发另一个单击事件`<A>`以显示下拉菜单。这是代码：[这里的小提琴](http://jsfiddle.net/mfUxU/)

```
//not working
$('#foo').click(function(){$('#bar').click();});

//but this works
//$('#foo').click(function(){$('#bar').click();alert();}); 
```

有人可以告诉我发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:43:21.637

添加`return false`，它应该工作

```
$('#foo').click(function(){$('#bar').click();return false;}); 
```

演示：http: [//jsfiddle.net/mfUxU/2/](http://jsfiddle.net/mfUxU/2/)

# c# - 通过 WiFi 适配器 (WAN) 创建 Ad hoc 网络

> ID：13188967
> 
> 赞同：2
> 
> 时间：2012-11-02T03:39:14.170
> 
> 标签：c#, networking, network-programming, adhoc

我想在我的程序中创建一个 Ad hoc WAN 网络，其他人只要运行我的程序就可以连接到该网络。

网络的目的是允许程序在没有可用的互联网连接/WiFi 热点时交换数据。

我知道可以创建一个其他人可以连接的热点（名为[connectify](http://www.connectify.me/)的程序），只是不知道它在 C# 中是否可行

PS我知道这个问题之前有人问过，想看看是否有任何更新。

# php - 将 PHP 变量直接合并到 AJAX 脚本中，无需提交表单

> ID：13188973
> 
> 赞同：2
> 
> 时间：2012-11-02T03:40:14.280
> 
> 标签：php, ajax

我是一个相对新手，在解决 AJAX 编码问题方面没有成功，所以我想我会提交这个以寻求专家的帮助：

**当前设置：（表单提交给 AJAX 脚本的日期值）**

选定的值（即日期）通过 onchange 事件从主页上的下拉表单提交，该事件调用同一页面上的 Ajax 脚本，然后将值传递给单独的 PHP 文件 (getuser.php)。Getuser.php 获取此日期值以从 MySQL 数据库中返回信息，将其显示在表中。getuser.php 中的表格随后作为 JavaScript“滑翔机”的一部分显示在主页上的 div 标签 (tab1) 中。这在目前的形式下运行良好，但这不是我最终想要完成的。

**所需设置：（在主页加载时从预定义的 PHP 变量传递给 Ajax 脚本的日期值，而不是来自表单）**

在加载主页时，所需的日期值已经分配给 PHP 变量 ($mydate)，因此不需要单独选择日期的表单或传递此选定的表单日期。所需要做的就是在页面加载时自动将 PHP 变量 $mydate 传递给 AJAX 脚本，该脚本应该将此值合并到 URL 中并自动将其发送到 getuser.php（在主页加载时），而无需通过用户定义的表单选择。

**这是主页上当前的 AJAX 脚本（通过表单提交方法可以正常工作）：**

```
<script type="text/JavaScript">
function showUser(str)
{
if (str=="")
  {
  document.getElementById("tab1").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("tab1").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script> 
```

**这是当前选择日期并将其传递给 AJAX 脚本的主页上的当前表单..：**

```
<form>

<SELECT NAME="" onchange="showUser(this.value)">

<option value="">Select a date:</option>

<option value="2012-09-26">2012-09-26</option>

<option value="2012-09-25">2012-09-25</option>

<option value="2012-09-07">2012-09-07</option>

<option value="2012-09-08">2012-09-08</option>

<option value="2012-08-01">2012-08-01</option>

<option value="2012-08-04">2012-08-04</option>

</SELECT>

</form> 
```

**..但是当前日期已经在 php 变量 $mydate 中的主页加载中设置，因此不需要该表单。**

辅助页面 getuser.php 获取传递的 URL 的值 ($q=$_GET["q"];) 并使用它在表中显示来自 MySQL 数据库的信息。该表格以单独的 JavaScript“滑翔机”的形式显示在主页上的 div 标签（Tab 1）中：

```
<div id="glider"><div class="controls">
<a href="#tab1">Tab 1</a> | 
<a href="#tab2">Tab 2</a> |
<a href="#tab3">Tab 3</a> |
<a href="#tab4">Tab 4</a></div>
<div class="scroller"><div class="content">
<div class="section" id="tab1">Tab 1</div>
<div class="section" id="tab2">Tab 2</div>
<div class="section" id="tab3"><img src=" "  
/></div>
<div class="section" id="tab4">Tab 4</div>
</div></div></div>

<script type="text/JavaScript" charset="utf-8">
        new Glider('glider');
</script> 
```

我已经尝试了 AJAX 脚本代码的多种变体，试图绕过表单将 $mydate 直接放入 AJAX 脚本中，并使其按照上述方式自动运行，但没有任何效果。这可能有一个简单的答案，它可能只是句法上的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:59:30.980

你为什么不在你的 PHP 文件中尝试这样的事情

```
<script type="text/JavaScript">
showuser("<?php echo $mydate ?>");
</script> 
```

# php - 从 FancyBox2 更新父页面上的选择框

> ID：13188974
> 
> 赞同：0
> 
> 时间：2012-11-02T03:40:29.007
> 
> 标签：php, javascript, jquery, ajax, fancybox-2

我正在尝试在花式框中提交表单，用户可以在其中将公司添加到模式父页面上存在的选择框中。我通过将模式信息提交到将公司添加到我的数据库的脚本来做到这一点。然后我运行一个查询来获取所有更新的公司作为一组标签。然后我试图将该组标签作为 jquery 更新传递给父页面。我不确定这是否是最好的方法或者我哪里出错了。

我正在尝试使用这篇文章作为指南：

[从 fancybox iframe 中查找现场元素](https://stackoverflow.com/questions/10797270/find-element-on-site-from-a-fancybox-iframe)

但是我的代码有两个问题。一：fancybox 没有关闭 二：父页面的选择框没有更新

我不确定我的成功电话哪里出了问题。模态页面的代码是：

```
$("#send-message").click(function(){
        $(this).closest('form').submit(function(){
            return false;
        });
        var frm = $(this).closest('form');        
         if($(frm).valid()){
            $("#ajax-loading").show();
            var data = $(frm).serialize();
            $(frm).find('textarea,select,input').attr('disabled', 'disabled');            
            $.post( 
                    "../forms/company_add.php", 
                    data,                   
                    function(data) {
                      if (data.success) {
                      // data.redirect contains the string URL to redirect to
                      $('#companyselect', $(parent.document)).html(data.success);
                      parent.$.fancybox.close();
                      }
                      else {
                        $("#ajax-loading").hide();
                        $(frm).find('textarea,select,input').removeAttr('disabled');
                        $("#send_message_frm").append(data.error);
                      }
                    },
                    "json"                  

           );
        }
    }); 
```

company_add.php 中的代码返回所有选项标签，如下所示：

```
if ($_POST) {
        // Collect POST data from form
        $name     = filter($_POST['name']);
        $conmail  = filter($_POST['conmail']);
        $addy     = filter($_POST['addy']);
        $confax   = filter($_POST['confax']);
        $city     = filter($_POST['city']);
        $state    = filter($_POST['state']);
        $con      = filter($_POST['con']);
        $conphone = filter($_POST['phone']);
        $zip      = filter($_POST['zip']);
    }
    $search1   = mysql_query("SELECT man_name FROM manufacturers WHERE man_name = '$name'");
    $outcome1  = mysql_fetch_row($search1);
    $num_rows1 = mysql_num_rows($search1);
    $imageid1  = $outcome1[0];
    $imageid1  = filter($imageid1);
    if ($num_rows1 > 0) {
        echo json_encode(array(
            "error" => '<div class="msg-error">A company by that name already exists.</div>'
        ));
    } else {
        $stmnt = mysql_query("INSERT INTO manufacturers (manufacturer_id, man_name, man_address, man_city, man_state,man_zip, man_contact, man_phone, man_fax, man_mail) VALUES ('NULL', '" . $name . "', '" . $addy . "' ,'" . $city . "', '" . $state . "' , '" . $zip . "' , '" . $con . "' , '" . $conphone . "' , '" . $confax . "', '" . $conmail . "'  )");
        //echo "Duplicate WAS found:" . $answer1; 
        mysql_query($answer1);
        //}
        $resp['status'] = 'success';
        if (empty($error)) {
            $nada     = "SELECT man_name FROM manufacturers ORDER BY man_name ASC";
            $resulter = mysql_query($nada);
            $comp1    = '0';
            //Spit out array of companys as select boxes
            $select   = '<option value="">--Select one--</option>';
            while ($result59 = mysql_fetch_array($resulter))
                $select .= '<option value="' . $result59['man_name'] . '">' . $result59['man_name'] . '</option>';
            echo json_encode(array(
                "success" =>$select
            ));
        } else {
            echo json_encode(array(
                "error" => '<div class="msg-error">Error: Unable to add your company at this time</div>'
            ));
        }
    } 
```

我是编程新手，对 Jquery 也很陌生，所以我希望有人能看到我哪里出错了。我正在使用 fancybox 2 和 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:29:53.973

您是否检查过错误控制台是否有任何 JavaScript 错误？

无论如何你都可以试试这个：

`parent.$('#companyselect').html(data.success);`

# drupal-7 - 修改主菜单 Drupal 7 上的 HTML 输出

> ID：13188975
> 
> 赞同：2
> 
> 时间：2012-11-02T03:40:34.530
> 
> 标签：drupal-7

我正在开发自己的主题，但在生成与我自己的课程的菜单链接时遇到问题，我的菜单应该是：

```
 <ul class="dropdown">
    <li class="first current-menu-item menu-item-home menu-gray">
            <a href="index-2.html"><span>HOME</span></a>
    </li>
    <li class="menu-red">
            <a href="2cols-sidebar-right.html"><span>Fashion</span></a>
    </li>
    <li class="menu-orange">
            <a href="2cols-sidebar-right.html"><span>Design</span></a>
    </li>
  </ul> 
```

有类“menu-red”或“menu-orange”在css上会有不同的颜色。这就是我在模板上打印主菜单的方式：

```
<?php
if ($main_menu):
       print theme('links__system_main_menu', 
                     array(
                          'links'          => $main_menu, 
                          'attributes'     => array(
                                                 'id' => 'main-menu', 
                                                 'class' => 'dropdown'
                                              )
                      )
                   ); 
endif;
?> 
```

我试图用我自己的 template.php 覆盖 links__system_main_menu 函数，但仍然没有运气。

感谢您的帮助。

问候，

@andriansandi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:06:52.393

我从[http://drupal.org/node/1033442#comment-5076932得到了答案](http://drupal.org/node/1033442#comment-5076932)

这里：

```
function mytheme_links__system_main_menu($variables) {
  $html = "<div>\n";
  $html .= "  <ul>\n";  
  foreach ($variables['links'] as $link) {
    $html .= "<li>".l($link['title'], $link['path'], $link)."</li>";
  }
  $html .= "  </ul>\n";
  $html .= "</div>\n";

  return $html;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:25:17.310

我就是这样做的。

```
function YOURTHEME_menu_tree($variables) {
  return '<ul class="dropdown">' . $variables['tree'] . '</ul>';
} 
```

# node.js - node.js 上的 SCTP

> ID：13188977
> 
> 赞同：2
> 
> 时间：2012-11-02T03:40:59.913
> 
> 标签：node.js, sctp

是否有 SCTP（流控制传输协议）的实现，也称为 Node.js 上的 VOIP 协议？任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:02:19.223

每个 vock 源

```
 this.socket = dgram.createSocket('udp4'); 
```

我认为它没有使用 SCTP。

** 更新**

作为后续行动 - 我确实找到了这个项目[https://www.npmjs.com/package/wrtc](https://www.npmjs.com/package/wrtc)目前确实支持 SCTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T19:52:17.283

[https://www.npmjs.com/package/sctp](https://www.npmjs.com/package/sctp)

虽然，截至目前，它带有一个警告：

> 警告！警告！警告！
> 
> RFC4960的实现目前不完整且不稳定，不要在生产环境中使用！

# ruby - 在heroku上使用omniauth的invalid_credentials

> ID：13188978
> 
> 赞同：1
> 
> 时间：2012-11-02T03:41:08.203
> 
> 标签：ruby, twitter, oauth-provider

我实现了一个配置了 OmniAuth/Twitter 和 OmniAuth/Facebook 的项目。在开发模式有任何问题。

但是当我尝试使用heroku时。它拒绝工作。

```
 use Rack::Session::Cookie
  use OmniAuth::Builder do
    provider :twitter, ENV['TWITTER_APP_ID'], ENV['TWITTER_SECRET']
    provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET'], :scope => 'email'
  end 
```

Heroku 日志

```
012-11-02T03:28:47+00:00 app[web.1]: E, [2012-11-02T03:28:47.339453 #58] ERROR -- omniauth: (twitter) Authentication failure! invalid_credentials: OAuth::Unauthorized, 401 Unauthorized
2012-11-02T03:28:47+00:00 heroku[router]: GET p####.herokuapp.com/auth/twitter/callback?oauth_token=r6l3GpwmxH38W8Q9WltcWs9PqyyGxxiGAUqXGFhmKs&oauth_verifier=O9HD6jLaEL1aRUcORIebGEZIQHbqtcgB012q5aZlCE dyno=web.1 queue=0 wait=0ms service=368ms status=302 bytes=9
2012-11-02T03:28:47+00:00 app[web.1]: 92.160.179.137 - - [02/Nov/2012 03:28:47] "GET /auth/failure?message=invalid_credentials&origin=https%3A%2F%2F p####.herokuapp.com%2Flogin&strategy=twitter HTTP/1.1" 200 3160 0.0033
2012-11-02T03:28:47+00:00 heroku[router]: GET  p####.herokuapp.com/auth/failure?message=invalid_credentials&origin=https%3A%2F%2F p####.herokuapp.com%2Flogin&strategy=twitter dyno=web.1 queue=0 wait=0ms service=8ms status=200 bytes=3160 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T11:17:29.197

A few things. Run `$ heroku config` and make sure the right keys are on Heroku.

Also, not sure about Twitter, but Facebook requires a callback url that you put in the settings for your app on developer.facebook.com, and that needs to point to the heroku url or it will be invalid.

Another long shot, but it could be an issue with CA certificates. I had that problem and fixed it with this in an initializer:

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET'], { 
    client_options: { ssl: { 
        ca_file: '/usr/lib/ssl/certs/ca-certificates.crt',
        ca_path: "/etc/ssl/certs"
    }}
  }
end 
```

Hope this helps some..

# java - 是否可以在 WebSphere Application Server 上自动运行 Java 应用程序？

> ID：13188980
> 
> 赞同：0
> 
> 时间：2012-11-02T03:41:42.167
> 
> 标签：java, jsp, jakarta-ee, servlets, websphere-6.1

我正在开发一个在 WebSphere Application Server 6.1 上运行的 Java 应用程序。到目前为止，我已经在服务器中安装了一个 .war 文件，并且我正在从一个 jsp 文件中调用这些方法，它们工作正常。问题是：有没有办法开发一个应用程序，当我在 WAS 上安装应用程序后按下应用程序的“开始”按钮时自动启动，避免从 jsp 中“手动”调用方法？简而言之，一个带有 main() 方法的通用 J2SE 应用程序导出为安装在 WAS 上的 .jar 文件应该启动并自动调用 main() 方法吗？

我尝试安装导出的 Hello World J2SE 应用程序，但似乎 .jar 格式不正确，显然它必须是 Java EE 应用程序。

我对 WAS 和 Java EE 很陌生。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T08:49:37.770

Java EE 服务器不应该运行具有方法的 Java SE 程序`main()`。

查看[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)，尤其是对[Java EE 容器功能的概述](http://docs.oracle.com/javaee/6/tutorial/doc/bnabo.html)。

如果您使用 NetBeans 作为您的 IDE，您可以按照他们网站上的[优秀教程进行操作。](http://netbeans.org/kb/trails/java-ee.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:15:59.247

是的，这是可能的，但不是直接的。您必须将应用程序打包为资源适配器。此外，您还必须在应用程序服务器中挂接诸如创建线程之类的事情。查看[IronJacamar 文档](http://docs.jboss.org/ironjacamar/userguide/1.0/en-US/html/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:18:44.420

最后我通过一个 Servlet 做到了。当应用程序启动时，方法**init()**被调用，在这个方法中我做了我所有的事情。

# python - 使用 Python 3 关闭/终止 Web 浏览器？

> ID：13188981
> 
> 赞同：0
> 
> 时间：2012-11-02T03:41:47.347
> 
> 标签：python, linux, python-3.x

我正在尝试制作一个 Python 脚本，该脚本在 10 分钟后将我从 facebook 中踢出，关于终止浏览器或专门打开更好的 URL 的最佳方法的任何想法？

```
#Stay on facebook for 10 minute session

import time
import webbrowser
import sys

webbrowser.open("http://www.facebook.com/")

time.sleep(600)
#terminate session here
sys.exit() 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:54:52.323

您将打开 URL，确定打开的浏览器，然后将其终止（通过[`os.kill`](http://docs.python.org/2/library/os.html#os.kill)或类似方式）。

不知道如何使用`webbrowser`模块，但因为我猜你没有分发脚本，你可以通过打开硬编码浏览器`subprocess`，例如 Firefox：

```
import time
import subprocess

p = subprocess.Popen(["firefox", "http://www.facebook.com"])
time.sleep(600)
p.kill() 
```

# objective-c - 单例实例与类方法

> ID：13188982
> 
> 赞同：39
> 
> 时间：2012-11-02T03:41:49.733
> 
> 标签：objective-c, oop, design-patterns

最近在使用 Objective-C 和用它编写的各种库时，我注意到两种非常流行的单例模式。一个版本获取单例实例并调用它的实例方法，而另一个版本只公开类方法，从不给你一个实例来使用。所有这些都具有抽象对单个资源（StoreKit、CoreData、Parse API 等）的访问的目的。例如，这是 MKStoreKit 中使用的前一种方法：

```
// initialize singleton during app boot
[MKStoreManager sharedManager]

// sometime later in the app
[[MKStoreManager sharedManager] buyFeature:kFeatureAId 
                                onComplete:^(NSString* purchasedFeature)
 {
     NSLog(@"Purchased: %@", purchasedFeature);
 }
                               onCancelled:^
 {
     NSLog(@"User Cancelled Transaction");
 }]; 
```

或者 NSUserDefaults、UIApplication 等。另一种方法可以在 MagicalRecord 或此处使用 Parse API 中看到：

```
// configure API credentials sometime during app boot
[Parse setApplicationId:@"123456"
              clientKey:@"123456"];

// sometime later
PFObject *testObject = [PFObject objectWithClassName:@"TestObject"];
[testObject setObject:@"bar" forKey:@"foo"];
[testObject save]; 
```

这两种方法有哪些优缺点，其中一种从根本上优于另一种吗？

不必检索共享实例可以节省一些屏幕空间（性能差异可能无关紧要），但我是否以其他方式搞砸了自己，例如可测试性？

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-02T04:04:27.010

有两种不同的方式来实现基于类方法的方法：

*   使用对所有人隐藏的类创建一个单例实例，并将其方法隐藏在具有相同签名的包装类方法后面，或者
*   制作完成所有工作的类方法

第一个实现的含义是，你可以用单例做的所有事情，你都可以用隐藏的单例做：

*   使用子类成为可能
*   在运行过程中切换实例很容易
*   状态存在于实例变量中
*   初始化遵循熟悉的模式

如果您选择不使用单例的实现，您将依赖静态变量来保持当前状态。这是一个合理的选择，但是初始化模式变得不同（甚至可能使用 a `dispatch_once`），如果不依赖一些丑陋`if`的条件，您无法在中间切换实现，并且使用子类变得更加棘手。

测试第一个实现比测试第二个实现要容易一些，因为您可以提供单独的单例实现进行测试，也许通过后门；对于基于静态的实现，无法采用此路线。

总而言之，我将使用基于单例的解决方案，单例可选地隐藏在提供对单例方法的访问的“外观”后面。我不会使用所有状态都必须放在静态变量中的实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T03:50:42.910

单例方法的一个优点是，如果需要，允许其他实例变得微不足道。如果您采用类方法方法，那么您无需进行大量重构即可获得全部内容。

# awk - 在 awk 中没有得到排序输出

> ID：13188987
> 
> 赞同：0
> 
> 时间：2012-11-02T03:43:08.513
> 
> 标签：awk

我正在使用 Aho，Kernighan 的书“AWK 编程语言”。在第 20 页，他们给出了一个在我的系统上不起作用的程序。

emp.data 是

```
Beth 4.00 0
Dan 3.75  0
Kathy 4.00 10
Mark 5.00 20
Mary  5.50 22
Susie  4.25 18 
```

他们给出的程序是

```
awk '{ printf("%6.2f  %s\n" , $2*$3, $0) }' emp.data | sort 
```

他们给出的输出是

![在此处输入图像描述](../Images/303a1c2089af354062fb132aa6be275e.png)

但我的输出是

```
0.00  Beth 4.00 0
  0.00  Dan 3.75  0
100.00  Mark 5.00 20
121.00  Mary  5.50 22
 40.00  Kathy 4.00 10
 76.50  Susie  4.25 18 
```

那么发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:33:52.633

1.  您的 awk 已损坏或您的输入中有控制字符。
2.  您的 printf 语法错误（但仍会产生正确的输出）

让“2”不碍事： printf 是一种内置语言结构，而不是一个函数。当你这样做时：

```
printf("%s",foo) 
```

您不是使用 2 个参数调用 printf 函数，而是使用从“（”“%s”“”“foo”和“）”构造的 1 个参数调用 printf 内置函数。正确的语法很简单：

```
printf "%s",foo 
```

但是您可以在其中任何一个周围加上括号，它不会增加任何价值，但也不会破坏它。这些中的任何一个都将以相同的方式“工作”：

```
printf ("%s"),foo
printf "%s",(foo)
printf ("%s"),(foo)
printf (((((((((("%s",foo)))))))))) 
```

更重要的是，尽管上面的“1”点是：您告诉 awk 生成格式为：

```
"%6.2f ...." 
```

这意味着前导数字应在左侧最多填充 2 个前导空格，但您的输出在第一行没有前导空格。这会影响您的“排序”，但由于给出了字符串，这里还会发生更多事情：

```
 2
10 
```

进行数字排序或字母排序都没有关系，因为 2 在数字上小于 10，但空格在数字上也小于 1，因此结果应该是相同的。

但是，您发布的输出暗示您的排序按字母顺序排序，“100”小于“40”，这不是排序的工作方式。即使在您的语言环境中以某种方式按字母顺序大于“1”，它也无法解释为什么您会得到相当于：

```
 2
10
 3 
```

在您的输出中，即有时它会将空间视为少于一次，而将其他时间视为更多。

由于您的 awk 显然产生了错误的输出，因此您的 awk 或输入文件肯定存在问题，因此我认为您的排序工具不太可能也存在问题。

如果您需要帮助调试问题，请尝试以下命令并发布结果：

```
$ awk '{ printf "%6.2f\n" , $2*$3 }' emp.data
  0.00
  0.00
 40.00
100.00
121.00
 76.50

$ awk '{ printf "%6.2f\n" , $2*$3 }' emp.data | sort
  0.00
  0.00
 40.00
 76.50
100.00
121.00 
```

我还有另一个想法——如果你搞砸了 awk 输出的复制/粘贴，那么可能是语言环境问题。尝试这样做：

```
export LC_ALL=C 
```

然后再次运行该命令（排序时没有“-n”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:46:27.313

他们假设按数字排序，您的排序似乎默认为按字母顺序。

查看您的排序命令行选项，看看您是否可以将其设为数字​​。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:48:53.363

最后尝试`sort -n`进行数字排序。默认排序会将 10 放在 2 之前。

# c++ - Linux 找不到 -lboost_zlib

> ID：13188991
> 
> 赞同：2
> 
> 时间：2012-11-02T03:43:31.627
> 
> 标签：c++, boost

我正在尝试在 Linux 下构建一个 C++ 程序（它最初是在 Windows 下开发的），在此期间我被要求安装`cmake`和`libboost`.

我都安装了。但我仍然收到一条错误消息

```
/usr/bin/ld: cannot find -lboost_zlib 
```

问题是我在哪里可以找到`libboost_zlib`。也许这个程序不应该在 Linux 下运行？

我已经安装了`libboost-all-dev`，我发现`libboost_zlib`图书馆里没有任何东西。谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T18:30:39.777

最后，我发现了问题所在。新发行版`libboost_zlib`中不再存在`libboost`（至少在版本 1.46 之后）。而是`zlib`集成在`libboost_iostreams`. 所以没有必要链接`libboost_zlib`，`libboost_iostreams`做所有的工作。

# iphone - 如何创建模糊到非模糊的动画

> ID：13188994
> 
> 赞同：0
> 
> 时间：2012-11-02T03:43:44.163
> 
> 标签：iphone, ios

我想在我的 iPhone 应用程序中创建放大镜类型效果，其中文本在动画中从模糊变为不模糊。谁能想到一种方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:48:56.587

在 iOS 6 中，我们终于可以使用 CIFilter 使图像变得模糊。因此，如果您真的想要，您可以制作要模糊的区域的图像，使用 CIFilter 对其进行模糊，然后叠加该模糊图像。然后您可以使用计时器或 CADisplayLink 来请求动画的连续“帧”，并且每次您都会做同样的事情，只是创建一个越来越模糊的图像并显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:46:24.530

这是放大镜效果。

```
- (void)drawRect:(CGRect)rect {
    // here we're just doing some transforms on the view we're magnifying,
    // and rendering that view directly into this view,
    // rather than the previous method of copying an image.
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(context,1*(self.frame.size.width*0.5),1*(self.frame.size.height*0.5));
    CGContextScaleCTM(context, 1.5, 1.5);
    CGContextTranslateCTM(context,-1*(touchPoint.x),-1*(touchPoint.y));
    [self.viewToMagnify.layer renderInContext:context];
} 
```

参考：[http ://coffeeshopped.com/2010/03/a-simpler-magnifying-glass-loupe-view-for-the-iphone](http://coffeeshopped.com/2010/03/a-simpler-magnifying-glass-loupe-view-for-the-iphone)