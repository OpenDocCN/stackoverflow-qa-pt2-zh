# StackOverflow 问答 14808000-14808999

# sql-server - Access 中显示的 SQL Server 关系

> ID：14808004
> 
> 赞同：2
> 
> 时间：2013-02-11T07:59:52.957
> 
> 标签：sql-server, ms-access, foreign-keys, relational-database, linked-tables

在 Access 中，您可以设置表之间的一对多关系。

然后在一个表中有一个 (+) 符号，它链接到第二个表中的许多行。

当您单击 (+) 符号时，它会显示表 2 中与表 1 相关的所有行。

无论如何，是否可以使用 SQL Server 作为数据存储和访问链接表做类似的事情？

我在 SQL Server 表中设置了数据，并希望使用 Access 2010 作为前端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:04:04.153

我不相信您可以使 Access 自动启用 ODBC 链接表的子数据表 (+) 功能。

它与本机 Access 表一起使用的方式是*SubdatasheetName*属性默认为*[Auto]*。使用*[Auto]*，Access 将查看定义的关系并选择相关表作为子数据表。

对于 SQL Server 链接表，Access 不会检查 SQL Server 中定义的关系并选择要用作子数据表的表。您可以在 Access 中再次定义 SQL Server 链接表之间的关系（尽管它不提供强制参照完整性），但它仍然不会应用子数据表。您可以从链接表的设计视图中手动设置*SubdatasheetName*、*LinkMasterFields*和*LinkChildFields*属性，但这只会持续到您关闭表。

我知道得到接近你想要的东西的唯一方法是使用 VBA 来改变`TableDef`. 在此示例中，*产品*和*类别*都是指向 SQL Server 表的 ODBC 链接。

```
Dim db As DAO.database
Dim tdf As DAO.TableDef
Dim prp As DAO.Property

Set db = CurrentDb
Set tdf = db.TableDefs("Products")

Set prp = tdf.CreateProperty("SubdatasheetName", dbText, "Categories")
tdf.Properties.Append prp

Set prp = tdf.CreateProperty("LinkMasterFields", dbText, "RefID")
tdf.Properties.Append prp

Set prp = tdf.CreateProperty("LinkChildFields", dbText, "CategoryID")
tdf.Properties.Append prp

Set prp = Nothing
Set tdf = Nothing
Set db = Nothing 
```

最后，子数据表可能很有用，但它们带来了其他挑战。请参阅[问题属性中的](http://allenbrowne.com/bug-09.html)*SubdatasheetName*部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T08:52:57.963

还有一种方法可以在 UI 中执行此操作：

*   打开主表（VBA 示例中的表 Products）的表定义（设计视图）。忽略警告。
*   在表格的设计视图中打开属性窗口
*   在属性**Sub Datasheet**中输入一个文本 Table.Categories（一个子数据表表）
*   链接字段（LinkMasterField 和 LinkChildFields）应使用现有关系自动填充。如果没有，填写关系的列名，即CategoryID（主键+外键）
*   关闭表格并保存设计更改

这就对了。

# php - 目标 str_replace() 只处理 wp-admin 中的一个元素

> ID：14808005
> 
> 赞同：0
> 
> 时间：2013-02-11T07:59:54.690
> 
> 标签：php, wordpress, str-replace, strstr

是否可以使用 PHP 的`str_replace()`函数仅针对页面中的选择 DIV（例如，由 ID 或类标识）？

情况：我正在使用以下`str_replace()`功能将我的 Wordpress 帖子编辑器 - 类别元框中的所有复选框转换为使用单选按钮，以便我网站的作者只能在一个类别中发布。

下面的代码正在运行（在 WP3.5.1 上），但它替换了同一页面上其他复选框元素的代码。有没有办法只针对类别元框？

```
// Select only one category on post page
if(strstr($_SERVER['REQUEST_URI'], 'wp-admin/post-new.php') || 
strstr($_SERVER['REQUEST_URI'], 'wp-admin/post.php'))
{
  ob_start('one_category_only');
}

function one_category_only($content) {
  $content = str_replace('type="checkbox" ', 'type="radio" ', $content);
  return $content;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:43:34.670

您可以使用正则表达式来过滤带有 ID 的内容部分，然后使用 str_replace，或者您可以 - 如下例所示 - 使用[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)和[DOMXPath](http://www.php.net/manual/en/class.domxpath.php)来扫描您的内容并操作输入元素：

```
// test content
$content = '<div id="Whatever"><div id="YOURID"><input type="checkbox" /></div><div id="OTHER"><input type="checkbox" /></div></div>';

function one_category_only($content) {
    // create a new DOMDocument
    $dom=new domDocument;
    // load the html
    $dom->loadHTML($content);
    // remove doctype declaration, we just have a fragement...
    $dom->removeChild($dom->firstChild);  
    // use XPATH to grep the ID 
    $xpath = new DOMXpath($dom);
    // here you filter, scanning the complete content 
    // for the element with your id:
    $filtered = $xpath->query("//*[@id = 'YOURID']");
    if(count($filtered) > 0) { 
        // in case we have a hit from the xpath query,
        // scan for all input elements in this container
        $inputs = $filtered->item(0)->getElementsByTagName("input");
        foreach($inputs as $input){
            // and relpace the type attribute
            if($input->getAttribute("type") == 'checkbox') {
                $input->setAttribute("type",'radio');
            }
        }
    }
    // return the modified html
    return $dom->saveHTML();
}

// testing
echo one_category_only($content); 
```

# knockout.js - knockout.js - 如何在 jQuery uiDialog 中绑定禁用属性

> ID：14808006
> 
> 赞同：1
> 
> 时间：2013-02-11T07:59:57.173
> 
> 标签：knockout.js, jquery-ui-dialog

我使用 knockout 和 jQuery UI 和[knockout-jquery-ui-widget.js](https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets)。

我创建对话框：

```
 <div class="dialog" id="my-dialog" data-bind='jqueryui: { widget: "dialog", options:{autoOpen: false,modal:true,
                closeOnEscape: false,
                resizable: false,
                draggable: false,
                width: 600,
                position: "center top+80",
                title:MyApp.i18n.gettext("Configure")
                } }'>
                ...
                </div> 
```

在我的代码中，我打开它：

```
$("#my-dialog").dialog("option", "buttons", that.getButtons()).dialog("open"); 
```

在哪里

```
that.getButtons = function(){
  return [{
    text: MyApp.i18n.gettext("Button1"),
    click: function(){
       ...
    },
    disable: ?
   }];
}; 
```

我的问题是，如何在 jQuery UIDialog 中将禁用值绑定到这个 jQuery UIButton。

如果不使用自己的按钮在 html 中编写自己的模板，是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T09:14:32.797

我不知道这是否可行，因为我从未使用过 jquery ui 库，但 Knockout 提供了它自己的[禁用](http://knockoutjs.com/documentation/disable-binding.html)绑定

```
<div class="dialog" id="my-dialog" 
     data-bind='disable: amIDisabled, jqueryui: { ... }'>
            ...
</div> 
```

`amIDisabled`视图模型中的可观察对象在哪里

# visual-studio - Visual Studio, difference when running tests in visual studio and on build server

> ID：14808007
> 
> 赞同：0
> 
> 时间：2013-02-11T08:00:00.217
> 
> 标签：visual-studio, unit-testing, visual-studio-2012, tfsbuild

We have the following setup:

*   Visual Studio 2012 / SQL Server 2012
*   TFS 2010, Build Server runs unit tests automatically on build.
*   A solution with lots of code and 2 Test Projects (so 2 separate assemblies at build time), the tests are done with Visual Studio's unit test framework.
*   The first assembly contains all actual unit tests, and they all run ok. Within most tests, we write some data in the db, run some code, then clean the data.
*   We use the second assembly for database seeding. Since the tests and assemblies are loaded/executed in alphabetical order, we have a test in the second assembly whose name starts with "Z" (the assembly name also starts with "Z"). The build server logs also confirm that the Z test is the last to be executed. So this test only writes some data in the db. We preferred this for seeding versus using a DB project due to an existing infrastructure which reads data from Excel files and writes to SQL Server.

The problem is that when we run all tests on our dev machines, the Z test is executed last, and the seed data remains in the database. When the tests are executed on the build server, the Z test is also executed last, but the data doesn't remain in the db.

According to the SQL Server profiler, the inserts/create tables are executed, so the data gets in the db both on our machines and on the build server, but on the build server some delete/drop queries are executed right after the inserts. We couldn't tell where they are coming from.

We tried running only the Z test assembly and the data remains in the database. So the drops must be caused by the other assembly somehow. But how? And why is there a difference between the ways visual studio and the build server run the tests?

Has anyone encountered something like this before?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:16:23.870

Depending on the order of your unit tests is a dangerous thing. First it violates the whole idea of a unit test (they should be order independent) but it's also something you just can't guarantee.

It's a coincidence that your unit tests always run in the same order on your development machines.

If you need some code to run before your other tests run to seed your database, you can use the [Assembly Initialize](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblyinitializeattribute%28v=vs.110%29.aspx) attribute. This way you can make sure this method always runs before your other tests.

One other thing to note, unit tests that use a database are actually integration tests. I would be very cautious using such a construction. I wrote a blog post about this some time ago that shows the kind of problems you can encounter but also points to some solutions: [Unit Testing, hell or heaven?](http://wouterdekort.blogspot.nl/2012/03/unit-testing-hell-or-heaven.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:49:26.747

We managed to fix it in the end. It turns out that the first assembly had some cleanup code that ran in a [ClassCleanup] method. The first assembly's ClassCleanup code ran after the Z test (from the second assembly). So the quick fix was just to replace the Z seeding test with an [AssemblyCleanup] method which did the seeding.

# algorithm - 或在两个函数调用之间

> ID：14808010
> 
> 赞同：0
> 
> 时间：2013-02-11T08:00:06.310
> 
> 标签：algorithm

是什么意思|| 在两个函数调用之间

```
{
//some code 
return Find(n.left,req)||Find(n.right,req);
} 
```

[http://www.careercup.com/question?id=7560692](http://www.careercup.com/question?id=7560692)

有人能帮我理解吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:03:43.830

这意味着如果两个函数之一为真（或两者都为真），则返回真。

取决于编程语言，该方法调用 Find(n.left,req) -> 如果为真 - 返回真。如果为假，则调用 Find(n.right,req) 并返回其布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:16:48.143

```
 return Find(n.left,req)||Find(n.right,req); 
```

表示首先执行 find **{Find(n.left,req)}**并返回 true 如果它返回 true 或

执行第二次查找，如果返回true，则返回true，否则返回false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:15:57.493

在 Java（以及 C 和 C#）中 || 意思是“懒惰的或”。单笔| 也表示“或”，但操作方式略有不同。

为了计算 a||b，计算机计算 a 的真值（真或假），如果 a 为真，则返回真值*而不费心计算 b*，因此是“懒惰”一词。只有当 a 为假时，它才会检查 b 是否为真（因此如果 a 或 b 为真）。

为了计算 a|b，计算机首先计算出 a 和 b 的值，然后将答案“或”在一起。

“懒人或”|| 效率更高，因为它有时根本不需要计算 b。您可能要使用 a|b 的唯一原因是如果 b 实际上是一个函数（方法）调用，并且由于该方法的某些副作用，您希望确保它只执行一次。我个人认为这种编程技术很差，并且在极少数情况下我希望始终显式计算 b 我显式地执行此操作，然后使用惰性或。

例如，考虑一个返回布尔值的函数或方法 foo()。代替

boolean x = a|foo(something);

我会写

布尔 c=foo(某事); 布尔 x = a||c;

它明确地调用 foo() 一次，所以你知道发生了什么。

更好的编程实践，恕我直言。事实上，最好的做法是完全消除 foo() 中的副作用，但有时这很难做到。

如果您使用惰性或 || 考虑一下您评估它的顺序。如果 a 易于计算且通常为真，则 a||b 将比 b||a 更有效，因为大多数情况下只需要对 a 进行简单的计算。相反，如果 b 通常为假且难以计算，则 b||a 不会比 a|b 更有效。如果 a 或 b 中的一个是常量，而另一个是方法调用，则应该将常量作为第一项 a||foo() 而不是 foo()||a，因为方法调用总是比使用 a 慢简单的局部变量。

希望这可以帮助。

彼得·韦伯

# vim - gvim中的GTK滚动条大小

> ID：14808021
> 
> 赞同：4
> 
> 时间：2013-02-08T10:13:34.040
> 
> 标签：vim, gtk, themes

我设法让滚动条比平时小一点。但是，我无法让父小部件缩放到正确的大小。下图显示了我的意思，并显示了我的 ~/.gtkrc-2.0... 的内容。

我错过了什么？

![图像](../Images/dcf6b7e5d9948e34a6ec25799ba11413.png)

这是一个可复制的 ~/.gtkrc-2.0 片段：

```
style "neverness" {
    GtkScrollbar::activate-slider = 1
    GtkScrollbar::trough-border = 0
    GtkScrollbar::slider-width = 9
    GtkScrollbar::min-slider-length = 36
    GtkScrollbar::has-forward-stepper = 1
    GtkScrollbar::has-backward-stepper = 1
}

class "GtkScrollbar" style "neverness"
class "GtkHScrollbar" style "neverness"
class "GtkVScrollbar" style "neverness" 
```

Vim 版本：

```
; vim --version
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Feb 21 2013 17:41:49)
Included patches: 1-831
Compiled by yann@nightwatch.neverness.org
Big version with GTK2 GUI.  Features included (+) or not (-):
+arabic          +file_in_path    +mouse_sgr       +tag_binary
+autocmd         +find_in_path    -mouse_sysmouse  +tag_old_static
+balloon_eval    +float           +mouse_urxvt     -tag_any_white
+browse          +folding         +mouse_xterm     -tcl
++builtin_terms  -footer          +multi_byte      +terminfo
+byte_offset     +fork()          +multi_lang      +termresponse
+cindent         +gettext         -mzscheme        +textobjects
+clientserver    -hangul_input    +netbeans_intg   +title
+clipboard       +iconv           +path_extra      +toolbar
+cmdline_compl   +insert_expand   -perl            +user_commands
+cmdline_hist    +jumplist        +persistent_undo +vertsplit
+cmdline_info    +keymap          +postscript      +virtualedit
+comments        +langmap         +printer         +visual
+conceal         +libcall         -profile         +visualextra
+cryptv          +linebreak       +python          +viminfo
+cscope          +lispindent      -python3         +vreplace
+cursorbind      +listcmds        +quickfix        +wildignore
+cursorshape     +localmap        +reltime         +wildmenu
+dialog_con_gui  -lua             +rightleft       +windows
+diff            +menu            -ruby            +writebackup
+digraphs        +mksession       +scrollbind      +X11
+dnd             +modify_fname    +signs           -xfontset
-ebcdic          +mouse           +smartindent     +xim
+emacs_tags      +mouseshape      -sniff           +xsmp_interact
+eval            +mouse_dec       +startuptime     +xterm_clipboard
+ex_extra        +mouse_gpm       +statusline      -xterm_save
+extra_search    -mouse_jsbterm   -sun_workshop    
+farsi           +mouse_netterm   +syntax          
   system vimrc file: "$VIM/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  system gvimrc file: "$VIM/gvimrc"
    user gvimrc file: "$HOME/.gvimrc"
    system menu file: "$VIMRUNTIME/menu.vim"
  fall-back for $VIM: "/home/yann/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H -DFEAT_GUI_GTK  -pthread -I/usr/include/gtk-2.0 -I/usr/lib64/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12   -I/usr/local/include  -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1      
Linking: gcc   -L/usr/local/lib -Wl,--as-needed -o vim   -pthread -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lgmodule-2.0 -lgthread-2.0 -lrt -lglib-2.0   -lSM -lICE -lXpm -lXt -lX11 -lXdmcp -lSM -lICE  -lm -ltinfo -lnsl  -lselinux  -lacl -lattr -lgpm -ldl    -L/usr/lib64/python2.7/config -lpython2.7 -lpthread -ldl -lutil -lm -Xlinker -export-dynamic 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T00:36:24.790

这不是由 GTK+ 引起的；它是由 vim 引起的。

见 vim73/src/gui.c:gui_init_check()：

```
gui.scrollbar_width = gui.scrollbar_height = SB_DEFAULT_WIDTH; 
```

该值来自 gui.h：

```
#define SB_DEFAULT_WIDTH 16 
```

后来， gui_position_components() 这样做：

```
gui.right_sbar_x = text_area_x + text_area_width; 
```

gui_update_scrollbars() 这样做：

```
gui_mch_set_scrollbar_pos(&wp->w_scrollbars[SBAR_RIGHT],
                          gui.right_sbar_x, y,
                          gui.scrollbar_width, h); 
```

完成为

```
gtk_form_move_resize(GTK_FORM(gui.formwin), sb->id, x, y, w, h); 
```

GtkForm 是在 vim 本身中实现的自定义小部件；见 gui_gtk_f.c：

```
void
gtk_form_move_resize(GtkForm *form, GtkWidget *widget,
                     gint x, gint y, gint w, gint h)
{
    widget->requisition.width  = w;
    widget->requisition.height = h;

    gtk_form_move(form, widget, x, y);
} 
```

稍后，gtk_form_position_child() 中的代码简单地抓取了 widget->requisition 并将其用于孩子的分配。

GtkVScrollbar 发现它被分配了比它需要的更多的水平空间（即 SB_DEFAULT_WIDTH = 16），并以它的分配为中心。这是您在滚动条周围看到的额外空间。

Vim 不应该像那样调整小部件的内部 -> 申请字段。相反，它应该将所需的值存储在某个地方（可能在 GtkFormChild 结构中）并使用它们。除此之外，它应该能够使用 GTK+ 自己的大小请求来获取滚动条请求的宽度。

# php - 通过 PHP POST 数组并进入 Python

> ID：14808022
> 
> 赞同：0
> 
> 时间：2013-02-11T08:01:13.943
> 
> 标签：php, python

我正在发布一个数组

```
$name[0] = "anurag";
$name[1] = "abhishek"; 
$ch = curl_init('http://localhost:8000/v0/url-generator');
curl_setopt ($ch, CURLOPT_POST, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, "name=$name");
curl_exec ($ch);
curl_close ($ch); 
```

在 python 中，我得到了 name = array 。

```
if request.method == 'POST':
        name = request.POST["name"]

print name 
```

输出 = 数组。

我想在python中输出这个：

```
name = ['anurag','abhishek'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:09:21.487

在你的 PHP 中插入 $name 以便你向 curl 请求发送一个字符串而不是一个数组

[http://PHP.net/implode](http://PHP.net/implode)

然后在python中拆分值。或者使用 json 数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:11:00.120

首先使用`json_encode($name)` 将这个值发送到python程序

如果您要发送 REST 正文，那么在 python 端，您可以尝试

```
try:
    body = self.request.body
    body_loads = loads(body)
except Exception as e:
    LOG_WARNING('Exception: %s', str(e))
    return WebReturn(self,httplib.FORBIDDEN, {'reason':'Body is not Define '},{'data':"Msg"})
    get = None
get = dict2obj(body_loads) 
```

这是 dict2obj

```
def dict2obj(d):
        if isinstance(d, list):
            d = [dict2obj(x) for x in d]
        if not isinstance(d, dict):
            return d
        class C(object):
            pass
        o = C()
        for k in d:
            o.__dict__[k] = dict2obj(d[k])
        return o 
```

希望这会帮助你

# c# - C# - 不发送任何错误消息但不能正常工作

> ID：14808029
> 
> 赞同：-2
> 
> 时间：2013-02-11T08:02:07.097
> 
> 标签：c#, regex, syntax, methods

我究竟做错了什么？我没有收到任何错误消息，但它无法正常工作 -

代码部分：

```
 int n = Convert.ToInt32(args.Content);
    if (n >= 10000)
        n = (int) (n - (n * 0.85));
    return n.ToString(); 
```

仅当我评论代码的前一部分时才有效：

```
 Match match = Regex.Match(args.Content, "ca.*?2013", RegexOptions.IgnoreCase);  
    if (match.Success)
        args.Content = match.Groups[1].Value + "Aktl.";
    return args.Content; 
```

贝娄是完整的脚本：

```
using System;
using System.Text.RegularExpressions;
using VisualWebRipper.Internal.SimpleHtmlParser;
using VisualWebRipper;
public class Script
{
    //See help for a definition of WrContentTransformationArguments.
    public static string TransformContent(WrContentTransformationArguments args)
    {
        try
        {
            //Place your transformation code here.
            //This example just returns the input data

            Match match = Regex.Match(args.Content, "ca.*?2013", RegexOptions.IgnoreCase);  
            if (match.Success)
                args.Content = match.Groups[1].Value + "Aktl.";
            return args.Content;
            int n = Convert.ToInt32(args.Content);
            if (n >= 10000)
                n = (int) (n - (n * 0.85));
            return n.ToString();
        }
        catch(Exception exp)
        {
            //Place error handling here
            args.WriteDebug("Custom script error: " + exp.Message);
            return "Custom script error";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:05:11.587

我认为你需要：

```
 if (match.Success)
        {
            args.Content = match.Groups[1].Value + "Aktl.";
            return args.Content;
        } 
```

在：

```
 if (match.Success)
            args.Content = match.Groups[1].Value + "Aktl.";
        return args.Content; 
```

`return`语句总是被执行并使其余代码无法访问。条件表达式 - `if(...)`- 不带括号仅包括`if`检查后的下一条语句，`return`始终执行该方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:04:43.100

```
return args.Content; 
```

您正在从函数返回此行，控件不会低于该值。

# image-processing - 如何计算图像是否有噪声和几何失真？

> ID：14808033
> 
> 赞同：6
> 
> 时间：2013-02-11T08:02:24.283
> 
> 标签：image-processing, opencv, computer-vision, core-image, distortion

我需要在 iphone 中创建一个应用程序，该应用程序需要计算图像中的噪声、几何变形和其他失真。这个怎么做？我用opencv + iphone做了一些图像处理的东西。但我不知道如何计算这些参数。

1）如何计算图像中的噪声？

2) 什么是几何变形以及如何计算图像的几何变形？

3）几何变形和失真在图像过滤器方面是相同的参数吗？或任何其他可用于计算图像的失真质量是否良好？

输入：我的图像是实时视频流中的人脸图像。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T10:10:52.577

我建议您阅读一些有关图像处理的文献，例如[Gonzalez & Woods](https://rads.stackoverflow.com/amzn/click/com/013168728X)。

1）单幅图像计算噪声的最简单方法是计算图像与其平滑副本之间的标准差。对于平滑，我建议您通过 3x3 像素（或更多）的样本使用简单的中值滤波器。中位数对数据的爆发不敏感，因此像“salt-n-pepper”这样的噪音不会使统计数据恶化。在过度曝光或曝光不足的图像的情况下，这种方法会给您带来不好的结果，在这种情况下，您可以计算图像的 FFT 并使用高频分量进行噪声估计。

2), 3) 只有知道图像上*应该有什么，才能计算几何变形。*例如，如果您使用具有二次网格的 mire（光学标准具），您可以在图像上找到线条（例如通过[Canny 边缘检测器](http://en.wikipedia.org/wiki/Canny_edge_detector)）并计算失真、散光和其他一些像差。如果您*确定*该图像有一些直线，也可以这样做。散焦可以通过分析图像边缘或借助图像[小波](http://en.wikipedia.org/wiki/Wavelet)变换来计算。还有更多不同的图像分析方法。例如，通过分析彩色图像可以估计色差等。但我再说一遍：在通常情况下，这种操作是不可能的。他们都有一些特殊的应用案例。

阅读有关[图像质量](http://en.wikipedia.org/wiki/Image_quality)的信息：该术语没有标准，在每种特定情况下，您都可以使用一个或多个简单特征来识别图像好坏。

在你的情况下，我建议你制作大量具有不同类型的人工制品和质量的照片，然后对它们的统计数据、小波组成和 RGB 分量相关性进行简单分析。顺便说一句，为了使彩色图像的分析对其亮度不太敏感，我建议您在[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)颜色空间中工作（但要估计色差，您需要完全使用 RGB 分量）。

# google-drive-api - 我将如何在 google picker api 中设置 setOAuthToken

> ID：14808034
> 
> 赞同：0
> 
> 时间：2013-02-11T08:02:23.110
> 
> 标签：google-drive-api, google-picker

我应该将什么传递给 setOAuthToken

添加视图（视图）。添加视图（上传视图）。setAppId("2845265023234663") .setOAuthToken('???') .setCallback(pickerCallback)。

由于我得到的令牌会话包含一个 json 格式的字符串，其中包含 access_token、id_token 等。请帮助我将使用什么，设置 DocsUploadView.setIncludeFolders(true) 不会在上传时向我显示文件夹，也不会显示这个 DocsUploadView.setParent( string) 函数正在工作，如果有人有解决方案，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:55:00.853

使用`access token`来自授权响应。如果您没有，请不要调用它。这很好，但用户必须进行身份验证。

# java - 从在单独线程中运行的函数返回值

> ID：14808037
> 
> 赞同：0
> 
> 时间：2013-02-11T08:02:33.280
> 
> 标签：java

如果它们上存在“异步”注释，我有这段代码允许在单独的线程中执行函数。一切正常，除了我意识到我还必须处理我刚刚添加的一些新函数的返回值的那一天。我可以为此使用处理程序和消息传递，但是，由于已经构建了项目结构（它很大并且工作正常），我无法更改现有函数来处理消息传递。

这是代码：

```
/**
 * Defining the Asynch interface
 */
@Retention(RetentionPolicy.RUNTIME)
public @interface Asynch {}

/**
 * Implementation of the Asynch interface. Every method in our controllers
 * goes through this interceptor. If the Asynch annotation is present,
 * this implementation invokes a new Thread to execute the method. Simple!
 */
public class AsynchInterceptor implements MethodInterceptor {
  public Object invoke(final MethodInvocation invocation) throws Throwable {
    Method method = invocation.getMethod();
    Annotation[] declaredAnnotations = method.getDeclaredAnnotations(); 
    if(declaredAnnotations != null && declaredAnnotations.length > 0) {
      for (Annotation annotation : declaredAnnotations) {
        if(annotation instanceof Asynch) {
          //start the requested task in a new thread and immediately
          //return back control to the caller
          new Thread(invocation.getMethod().getName()) {
            public void execute() {
              invocation.proceed();
            }
          }.start();
          return null;
        }
      }
    }
    return invocation.proceed();
  }
} 
```

现在，我该如何转换它，如果它是这样的：

```
@Asynch
public MyClass getFeedback(int clientId){

}

MyClass mResult = getFeedback(12345); 
```

“mResult”会用返回的值更新吗？

提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:06:56.943

你不能，从根本上说。`getFeedback`必须以同步的方式返回*一些东西*——虽然在*某些*情况下你可以稍后更新返回的对象，但在其他情况下你显然不能——像不可变的类`String`就是明显的例子。以后不能更改*变量* `mResult`的值……毕竟，它很可能是一个局部变量。事实上，在计算结果时，使用它的方法可能已经完成......使用虚假值。

仅仅通过在同步语言之上添加注释，您将无法获得干净的异步。理想情况下，异步操作应该返回类似 a 的内容`Future<T>`，表示“稍后会有结果”——以及找出结果是什么、是否已计算、是否有异常等的方法. 这种事情正是`async/await`在 C# 5 中添加的原因——因为您*不能*只在库级别透明地执行此操作，即使使用 AOP 也是如此。编写异步代码应该是一个非常深思熟虑的决定——不仅仅是通过注释固定在同步代码上的东西。

# ios - iOS中应用内购买的服务器端验证最佳实践

> ID：14808039
> 
> 赞同：12
> 
> 时间：2013-02-11T08:02:44.303
> 
> 标签：ios, transactions, in-app-purchase, payment, storekit

我们正在使用服务器端的付款验证，就像这样 -

1.  用户付款。
2.  Store kit API 向 App 发送交易收据。
3.  应用程序将 base64 编码的交易收据发送到我们的服务器。
4.  我们的服务器调用[https://buy.itunes.apple.com/verifyReceipt](https://buy.itunes.apple.com/verifyReceipt)并验证交易收据。
5.  用户被标记为付费。

对于特定用户，我们没有在服务器上获得交易收据，因此无法验证收据。我们猜测在第 2 步和第 3 步中出现了问题。如果在将收据发送到服务器时出现连接问题，应用程序会在后续应用程序恢复时再次重试。

现在我们有一个丢失的交易收据和一个愤怒的用户。你建议我们如何前进？我们将来如何防止这种情况发生？有没有我们可以遵循的指导方针或最佳实践来防止这种情况发生？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:36:52.057

根据我的经验，可能的问题是

*   base64 数据在此过程中进行了 url 编码，因此 + 和 / 搞砸了 - 在传输之前用更安全的字符替换它们
*   整个交易都是假的。

检查第二种情况的方法是查看您的帐户，看看是否有匹配的购买记录。不幸的是，除非您的购买量较低，否则该网站可能有点难以查看。

您需要在代码中正确处理服务器上的错误或在 Apple 结束时正确处理错误的两件事。

1.  在与服务器成功通信之前不要调用 finishTransaction:（在这种情况下它不会有帮助，但值得注意）
2.  在 SKPaymentQueue defaultQueue 上有一个“重新加载购买”按钮或调用 restoreCompletedTransactions: 的操作。对于非消耗品/权利对象，这将重新发送所有带有收据的交易，这些收据可以在您的服务器上重新验证。

如果您面临的问题是非消耗品/权利，那么第二项就是出路。

# sharepoint - 将 Runat="Server" 标记添加到 HTML 表时，共享点不显示用户控件

> ID：14808040
> 
> 赞同：0
> 
> 时间：2013-02-11T08:02:47.930
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007, sharepoint-designer

我有一个 .ascx 控件。那是有几个 Html 表和 Div 部分 Runat = "Server"

代码如下所示，

```
<div id = "divpayinfo" runat = "server">

<%!-- Some Code Here --%>

 <table style="width: 403px" runat = "server">
            <tr>
                <td style="width: 63px; height: 22px;">
                    test</td>
                <td colspan="2" style="height: 22px">
                    <strong><span style="color: #ffffff">ผู้ขอกู้หลัก</span></strong></td>
            </tr>
            <tr>
                <td style="width: 63px; height: 21px">
                </td>
                <td style="width: 180px; height: 21px">
                    <strong>วงเงิน&lt;/strong></td>
                <td style="height: 21px">
                    <strong>ยอดคงค้าง&lt;/strong></td>
            </tr>
            <tr>
                <td style="width: 63px">
                    1\. เงินกู้เพื่อที่อยู่อาศัย</td>
                <td style="width: 180px">
                    <asp:TextBox ID="b_txt_lh_loan_h_all" runat="server" CssClass="box_nosize_right"
                        MaxLength="8" onchange="To_Set_Value(document.getElementById('d_txt_lh_loan_h_all'),document.getElementById('b_txt_lh_loan_h_all'))"
                        onfocus="To_Get_Value(document.getElementById('d_txt_lh_loan_h_all'),document.getElementById('b_txt_lh_loan_h_all'))"
                        onmouseout="To_Set_Value(document.getElementById('d_txt_lh_loan_h_all'),document.getElementById('b_txt_lh_loan_h_all'))"
                        Text="0" Width="90px"></asp:TextBox><asp:TextBox ID="d_txt_lh_loan_h_all" runat="server"
                            Text="0"></asp:TextBox></td>
                <td>
                    <asp:TextBox ID="b_txt_lh_loan_h_remain" runat="server" CssClass="box_nosize_right"
                        MaxLength="8" onchange="To_Set_Value(document.getElementById('d_txt_lh_loan_h_remain'),document.getElementById('b_txt_lh_loan_h_remain'))"
                        onfocus="To_Get_Value(document.getElementById('d_txt_lh_loan_h_remain'),document.getElementById('b_txt_lh_loan_h_remain'))"
                        onmouseout="To_Set_Value(document.getElementById('d_txt_lh_loan_h_remain'),document.getElementById('b_txt_lh_loan_h_remain'))"
                        Text="0" Width="90px"></asp:TextBox><asp:TextBox ID="d_txt_lh_loan_h_remain" runat="server"
                            Text="0"></asp:TextBox></td>
            </tr>
            <tr>
                <td style="width: 63px; height: 102px;">
                    2\. เงินกู้เบิกเกินบัญชี</td>
                <td style="width: 180px; height: 102px;">
                    <asp:TextBox ID="b_txt_lh_loan_a_all" runat="server" CssClass="box_nosize_right"
                        MaxLength="8" onchange="To_Set_Value(document.getElementById('d_txt_lh_loan_a_all'),document.getElementById('b_txt_lh_loan_a_all'))"
                        onfocus="To_Get_Value(document.getElementById('d_txt_lh_loan_a_all'),document.getElementById('b_txt_lh_loan_a_all'))"
                        onmouseout="To_Set_Value(document.getElementById('d_txt_lh_loan_a_all'),document.getElementById('b_txt_lh_loan_a_all'))"
                        Text="0" Width="90px"></asp:TextBox><asp:TextBox ID="d_txt_lh_loan_a_all" runat="server"
                            Text="0"></asp:TextBox></td>
                <td style="height: 102px">
                    <asp:TextBox ID="b_txt_lh_loan_a_remain" runat="server" CssClass="box_nosize_right"
                        MaxLength="8" onchange="To_Set_Value(document.getElementById('d_txt_lh_loan_a_remain'),document.getElementById('b_txt_lh_loan_a_remain'))"
                        onfocus="To_Get_Value(document.getElementById('d_txt_lh_loan_a_remain'),document.getElementById('b_txt_lh_loan_a_remain'))"
                        onmouseout="To_Set_Value(document.getElementById('d_txt_lh_loan_a_remain'),document.getElementById('b_txt_lh_loan_a_remain'))"
                        Text="0" Width="90px"></asp:TextBox><asp:TextBox ID="d_txt_lh_loan_a_remain" runat="server"
                            Text="0"></asp:TextBox></td>
            </tr>
        </table> 
```

我正在服务器端对 DIV 和 HTML 表进行一些操作。所以我提到了服务器端。我将此控件作为 formusercontrolwebpart 上传到 Sharepoint。

问题是当我上传带有 runat="Server" 标记的表时，用户控件没有显示在 sharepoint 页面上......所以我复制了这个表并只用这个表创建另一个 ascx 并将它上传到 sharepoint 但这正在工作美好的。

我已经检查了我所有的用户控制代码并添加了 ASP.NET 应用程序。用户控件按预期工作没有问题。但只有当我使用 Sharepoint 页面添加时才会出现问题..

我找到了以下解决方案，

从每个 Div 部分中删除所有 runat = "server" 标记并将 runat = "server" 添加到表中，然后共享点页面正在工作。但我的问题是我在服务器端有很多使用 Div 标签的操作。所以我不能使用这个解决方案..

请告诉我专家..是否有sharepoint保护runat =“server”标签免受用户控制或与此相关的任何东西......提前谢谢你..

如果我添加以下代码行，那么我的用户控件显示不会呈现，

```
<asp:TableCell id="d_div_l2_row9" runat="server" style="display: none; vertical-align: middle;
                    text-align: center">
                    <asp:TextBox ID="b_txt_l2_comission" runat="server" CssClass="box_nosize_right" MaxLength="8"
                        onchange="To_Set_Value(document.getElementById('d_txt_l2_comission'),document.getElementById('b_txt_l2_comission'))"
                        onfocus="To_Get_Value(document.getElementById('d_txt_l2_comission'),document.getElementById('b_txt_l2_comission'))"
                        onmouseout="To_Set_Value(document.getElementById('d_txt_l2_comission'),document.getElementById('b_txt_l2_comission'))"
                        Text="0" Width="180px"></asp:TextBox><span style="display: none"><asp:TextBox ID="d_txt_l2_comission"
                            runat="server" Text="0"></asp:TextBox></span></asp:TableCell> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:26:20.557

我认为 asp:panel 被转换为底层 HTML 中的 div 。你可以试试；

```
<asp:panel id="divpayinfo" runat="server">

  <!-- Your code here -->

</asp:panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:42:39.943

```
<asp:TableCell id="d_div_l2_row9" runat="server" style="**display: none;** vertical-align: middle;
                    text-align: center">
                    <asp:TextBox ID="b_txt_l2_comission" runat="server" CssClass="box_nosize_right" MaxLength="8"
                        onchange="To_Set_Value(document.getElementById('d_txt_l2_comission'),document.getElementById('b_txt_l2_comission'))"
                        onfocus="To_Get_Value(document.getElementById('d_txt_l2_comission'),document.getElementById('b_txt_l2_comission'))"
                        onmouseout="To_Set_Value(document.getElementById('d_txt_l2_comission'),document.getElementById('b_txt_l2_comission'))"
                        Text="0" Width="180px"></asp:TextBox><span style="display: none"><asp:TextBox ID="d_txt_l2_comission"
                            runat="server" Text="0"></asp:TextBox></span></asp:TableCell> 
```

文本显示：样式中没有这个是您生成或添加的。因为这意味着不应显示控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:57:23.673

驼鹿、安德鲁和香蕉，

非常感谢您为帮助我所做的努力。

我找到了另一种实现解决方案的方法，但找出原因仍然让我很头疼。

我在sharepoint服务器“控制模板”文件夹中上传了相同的用户控件，并为该用户控件创建了一个.aspx页面并将aspx上传到sharepoint中。现在它工作正常，就像使用 asp.net 应用程序一样。

# hadoop - 如何在 hadoop mapreduce 中进行 lzo 压缩？

> ID：14808041
> 
> 赞同：1
> 
> 时间：2013-02-11T08:02:54.907
> 
> 标签：hadoop, mapreduce

我想使用 lzo 来压缩地图输出但我无法运行它！我使用的 Hadoop 版本是`0.20.2`. 我设置：

```
conf.set("mapred.compress.map.output", "true") 
conf.set("mapred.map.output.compression.codec",
"org.apache.hadoop.io.compress.LzoCodec"); 
```

当我在 Hadoop 中运行 jar 文件时，它显示了一个无法写入映射输出的异常。

我必须安装lzo吗？我需要做什么才能使用 lzo？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-17T09:42:26.460

LZO 的许可证 (GPL) 与 Hadoop (Apache) 的许可证不兼容，因此不能与之捆绑。需要在集群上单独安装 LZO。

以下步骤在[Cloudera 的 Demo VM](https://ccp.cloudera.com/display/SUPPORT/Cloudera+QuickStart+VM)（CentOS 6.2，x64）上进行了测试，该 VM 安装了完整的 CDH 4.2.0 和 CM 免费版，但它们应该可以在任何基于 Red Hat 的 Linux 上运行。

安装包括以下步骤：

*   安装 LZO

    `sudo yum install lzop`

    `sudo yum install lzo-devel`

*   安装 ANT

    `sudo yum install ant ant-nodeps ant-junit java-devel`

*   下载源

    `git clone https://github.com/twitter/hadoop-lzo.git`

*   编译 Hadoop-LZO

    `ant compile-native tar`

    有关更多说明和故障排除，请参阅[https://github.com/twitter/hadoop-lzo](https://github.com/twitter/hadoop-lzo)

*   将 Hapoop-LZO jar 复制到 Hadoop 库

    `sudo cp build/hadoop-lzo*.jar /usr/lib/hadoop/lib/`

*   将本机代码移动到 Hadoop 本机库

    `sudo mv build/hadoop-lzo-0.4.17-SNAPSHOT/lib/native/Linux-amd64-64/ /usr/lib/hadoop/lib/native/`

    `cp /usr/lib/hadoop/lib/native/Linux-amd64-64/libgplcompression.* /usr/lib/hadoop/lib/native/`

    使用您克隆的版本正确的版本号

*   使用真实集群（而不是伪集群）时，您需要将它们同步到其余机器

    `rsync /usr/lib/hadoop/lib/`给所有主机。

    您可以先使用 -n 进行空运行

*   登录 Cloudera Manager

*   从服务中选择：mapreduce1->Configuration

*   客户端->压缩

*   添加到压缩编解码器：

    `com.hadoop.compression.lzo.LzoCodec`

    `com.hadoop.compression.lzo.LzopCodec`

*   搜索“阀门”

*   添加到 MapReduce 服务配置安全阀

    `io.compression.codec.lzo.class=com.hadoop.compression.lzo.LzoCodec` `mapred.child.env="JAVA_LIBRARY_PATH=/usr/lib/hadoop/lib/native/Linux-amd64-64/"`

*   添加到 MapReduce 服务环境安全阀

    `HADOOP_CLASSPATH=/usr/lib/hadoop/lib/*`

而已。

您使用的 MarReduce 作业`TextInputFormat`应该与`.lzo`文件无缝协作。但是，如果您选择索引 LZO 文件以使其可拆分（使用`com.hadoop.compression.lzo.DistributedLzoIndexer`），您会发现索引器会在`.index`每个文件旁边写入一个`.lzo`文件。这是一个问题，因为您`TextInputFormat`会将这些解释为输入的一部分。在这种情况下，您需要更改您的 MR 工作以使用`LzoTextInputFormat`.

从 Hive 开始，只要不索引 LZO 文件，更改也是透明的。如果您开始索引（以利用更好的数据分布），您需要将输入格式更新为`LzoTextInputFormat`. 如果使用分区，则可以按分区进行。

# macos - Mac OS 10.7+ 上的 AXMakeProcessTrusted() 等效项是什么

> ID：14808049
> 
> 赞同：1
> 
> 时间：2013-02-11T08:03:18.523
> 
> 标签：macos, cocoa, security, accessibility

我需要最好在我的应用程序中跟踪按键，而无需用户手动启用对辅助设备的访问并将他的系统暴露于其他风险。

AXMakeProcessTrusted 是 MacOS Tiger 中一个优雅的解决方案。但是在用这个东西修补了几天之后，我意识到它几乎不再起作用了。找不到更新的方法来使 Apple 的 Docs 中的流程受信任。

任何人都知道完成此任务的最优雅方法是什么？

# iphone - 将 iphone 4 应用程序转换为 iphone 5

> ID：14808051
> 
> 赞同：0
> 
> 时间：2013-02-11T08:03:23.273
> 
> 标签：iphone, ios-simulator, iphone-5

我们更新了我们的应用程序以支持 iPhone 4 和 iPhone 5 的屏幕尺寸。它在两个模拟器中都可以正常工作，但是当我们将它安装在 iPhone 5 设备上时，它的行为就像 iphone 4 应用程序（顶部和底部有黑色边框）。我们还添加了 Default-568h@2x.png 机器人无法正常工作。我们正在动态创建窗口。

我们在这里缺少什么？有任何想法吗 ？

另外如何以编程方式设置 UIWindow 的“启动时全屏”属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:12:10.790

这是一种有效的解决方案

A. 在您的 AppDelegate.m 中像这样初始化 UIWindow 对象

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] 
```

B. 为了管理其他 UI 元素您可以定义一个宏来提供屏幕的当前帧，无论是 iPhone 4/iPhone 5

```
#define SCREEN_FRAME [[UIScreen mainScreen] applicationFrame] 
```

因此，您可以使用 SCREEN_FRAME 宽度/高度属性来调整其他 UI 元素

希望这可以帮助。

# regex - 正则表达式中的 \W 不匹 配

> ID：14808052
> 
> 赞同：0
> 
> 时间：2013-02-11T08:03:23.453
> 
> 标签：regex, pcre

我有这个正则表达式：

```
s/[abgn][\W].*/ 
```

我想匹配这些示例：

*   aMXyZ
*   b
*   g/S/d%k/k

我不想匹配：

*   aM.XyZ
*   垃圾邮件

我希望你看到，如果我想匹配一个字符串，第二个字符不应该是一个单词字符。但是我的正则表达式不起作用。它匹配，尽管有 \W。我不知道为什么它不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:10:38.617

尝试使用

```
s/[abgn]([\W].*|$)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:17:19.807

我不确定你为什么一开始就使用 s/ 但这里有一个适合你的表达式

```
[abgn](?!\w)[\w\.]* 
```

(?!\w) 是一个否定的前瞻表达式，这意味着 [abgn] 后面不能跟一个 \w

这应该匹配 aMXyZ b

而不是 aX

# c++ - ALLEGRO 中的 al_draw_line() 失败

> ID：14808058
> 
> 赞同：2
> 
> 时间：2013-02-11T08:03:38.887
> 
> 标签：c++, c, allegro, allegro5

当我想用 画一条线时`al_draw_line(100,100,400,400,al_map_rgb(255,255,0),5);`，我`ALLEGRO_DISPLAY`的会自动关闭，这条线之后的语句不会执行。我的程序刚刚停止

```
#include<allegro5/allegro.h>
#include<allegro5/allegro_primitives.h>
int main(){
    ALLEGRO_DISPLAY *display=NULL;
    if(!al_init()){
        return -1;
    }
    if(!al_init_primitives_addon()){
        return -1;
    }
    display=al_create_display(600,600);
    al_draw_line(100,100,400,400,al_map_rgb(0,0,0),3);
    al_clear_to_color(al_map_rgb(0,0,0));
    al_flip_display();
    al_rest(20.0);
    al_destroy_display(display);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:26:49.327

您不检查 的返回值`al_create_display`，这可能会失败。无论如何：我不知道为什么你的程序显然崩溃了（你的代码没有做任何应该崩溃的事情，除了不检查显示）但你不会看到任何东西，因为你：

*   A）用相同颜色（黑色）绘制线条和背景
*   *B）画线后*清除背景颜色（从而过度绘制它）。

进行一些更改后的代码：

```
#include <allegro5/allegro.h>
#include <allegro5/allegro_primitives.h>
#include <stdio.h>
int main(){
    ALLEGRO_DISPLAY *display=NULL;
    if(!al_init()){
        fprintf(stderr,"Couldn't initialize allegro!\n");
        return -1;
    }
    if(!al_init_primitives_addon()){
        fprintf(stderr,"Couldn't initialize primitives addon!\n");
        return -1;
    }
    display=al_create_display(600,600);
    if(!display) {
        fprintf(stderr,"Couldn't create allegro display!\n");
        return -1;
    }
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_line(100,100,400,400,al_map_rgb(255,0,0),3);
    al_flip_display();
    al_rest(1.0);
    al_destroy_display(display);
    return 0;
} 
```

如果实际上是您的显示器坏了，那么您现在至少应该收到一条错误消息。不过，这对我有用，我不明白为什么它不适合你（除非你尝试在全屏模式下创建它，这不起作用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-10T19:36:03.570

```
al_draw_line(100,100,400,400,al_map_rgb(0,0,0),3);
al_clear_to_color(al_map_rgb(0,0,0)); 
```

这两行是向后的。画线后，您正在清除（擦拭）显示器。所以你从来没有真正看到这条线。

# javascript - 在适用于 Windows 8 的 Visual Studios Express 2012 中读取文本框

> ID：14808070
> 
> 赞同：0
> 
> 时间：2013-02-11T08:04:21.337
> 
> 标签：javascript, windows-8, visual-studio-2012

我正在尝试创建一个 Windows 8 应用程序，并且我正在尝试阅读带有数字的文本框。我首先尝试使用 Microsoft 提供的“Hello World”示例来读取文本框，但我运行了一些测试，文本框没有被读取，它返回为“null”。

当我有：

```
 var userName = document.getElementById("nameInput").value; 
```

它适用于 HelloWorld 示例。

当我使用相同的代码，但在我的应用程序中进行了更改时：

```
 var amount = document.getElementById("Amount").value; 
```

该应用程序在上面的行中有错误。当我删除“.value”时，我得到“null”但没有错误。

如何使用 java 脚本读取 Microsoft Visual Studios for Windows 8 中文本框中的输入而不会出现错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:13:30.987

我已经根据您的需要在下面尝试过..我希望您能有所了解。

```
<script>
    function callfunction()
    {
        var item = document.getElementById("total").value;
        alert(item);
    }
</script>
<input type="text" name="total" id="total" maxlength="60"> amount
<input type="button" onclick="callfunction();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T15:34:35.440

你试过调试吗？如果您在“var amount...”行设置断点 (F9)，然后调试您的应用程序 (F5)，您应该在此处中断，然后能够使用 VS2012 中的 JavaScript 控制台窗格进行尝试。看看你能不能在`document.getElementById("Amount")`那里做。你应该。您的代码看起来正确。你有“金额”作为你的文本框的ID吗？如果将其设置为文本框的名称，则 getElementById 将无法选择它。

# bash - 让 GNU 重新评估 $(shell ...) 返回的内容

> ID：14808075
> 
> 赞同：1
> 
> 时间：2013-02-11T08:04:32.693
> 
> 标签：bash, shell, makefile, gnu-make

这是我的makefile中的一个片段：

```
main_DEPS = $(TARGETS_$(d)/classes/player) $(TARGETS_$(d)/classes/monster) 
```

它将 main_DEPS 设置为其他两个变量的扩展版本。
这可以正常工作。

* * *

我该如何更换：

```
$(TARGETS_$(d)/classes/player) $(TARGETS_$(d)/classes/monster) 
```

使用提供相同输出的程序？

我试过：

```
main_DEPS = $(shell program) 
```

但它似乎设置为`main_DEPS`等于字符串 value `$(TARGETS_$(d)/classes/player) $(TARGETS_$(d)/classes/monster)`，而不是扩展版本。

我也试过：

```
main_DEPS = $(eval $(shell program))  
main_DEPS = $(value $(shell program))  
main_DEPS = $(value $(eval $(shell program)))   
main_DEPS = $(eval $(value $(shell program))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:42:06.667

你试过这个：

```
$(eval main_DEPS = $(shell program)) 
```

在这里，`eval`(inner expression with `shell`) 的参数被扩展以获取要评估的语句：

```
main_DEPS = $(TARGETS_$(d)/classes/player) $(TARGETS_$(d)/classes/monster) 
```

如果我正确理解，这应该正是您想要的。

# ruby-on-rails - 无法安装mysql2

> ID：14808082
> 
> 赞同：0
> 
> 时间：2013-02-11T08:05:08.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在尝试安装mysql2时束手无策。

我正在运行`Ubuntu 12.04 LTS`。我安装了`ruby 1.9.3`；`rails 3.2.9`. 一切都很好——直到我尝试安装 mysql2——或者通过将它包含在 Gemfile 中并运行 bundle install，或者尝试通过运行来安装它`gem install mysql2 -v '0.3.11'`

我得到的错误是
`'Could not create Make file due to some reason, probably lack of necessary libraries and/or headers.'`

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:16:12.030

确保您已`libmysqlclient-dev`安装。

`sudo apt-get install libmysqlclient-dev`

安装此软件包后尝试安装 mysql gem

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:35:39.383

要获得 MySQL 对 Rails 的支持：

```
sudo apt-get install libmysql-ruby libmysqlclient-dev 
```

将 MySQL gem 添加到您的 gemfile：

```
gem 'mysql2' 
```

后跟“bundle”，让 bundler 安装 gem。

并且不要忘记更改您的 config/database.yml，如下所示：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: [database]
  pool: [n]
  username: [username]
  password: [password]
  host: [host] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:32:26.123

1) 只需`libmysqlclient-dev`使用 apt-get 添加包。

2）然后运行`gem install mysql2`命令。

# asp.net - 最大化ckeditor的textarea字体大小

> ID：14808084
> 
> 赞同：1
> 
> 时间：2013-02-11T08:05:12.597
> 
> 标签：asp.net, css, ckeditor

我花了几个小时试图最大化 ckeditor 4.0.1（修订版 d02739be4b）的 textarea 字体大小而没有用。我做了所有的技巧和调整：

1- 编辑 skeditor/skin.moono/editor.css

2-编辑ckeditor/contents.css

3 从属性窗口改变字体大小

在所有这些尝试之后，字体仍然很小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-30T09:43:43.623

在 CKEditor 5 中遇到了类似的问题（但改变了文本区域的高度），我终于能够根据这个解决它： [如何设置 CKEditor 5 的高度（经典编辑器）](https://stackoverflow.com/questions/46559354/how-to-set-the-height-of-ckeditor-5-classic-editor) 检查文本区域后我添加了这些行到CSS：

```
 .ck-editor__editable_inline {
    min-height: 400px;
} 
```

我希望这会有所帮助。

# android - Mono for Android：Spinner ItemSelected 事件在加载时触发但不应该？

> ID：14808094
> 
> 赞同：1
> 
> 时间：2013-02-11T08:05:50.940
> 
> 标签：android, events, triggers, xamarin.android, spinner

我有一个带有几个值的微调器，我从我的网络服务中填充它。

**填充微调器**

```
int i = 0;

var dropItems = new List<SpinItem2>();

DataRow[] result = myOPTvalues.Tables[0].Select("FieldValue=" + item.FieldValue);
foreach (DataRow row in result)
{
    var optItem = new PrevzemSpin();
    optItem.FieldValue = row["FieldValue"].ToString();
    if (optItem.FieldValue.Equals(""))
    optItem.FieldValue = null;

    optItem.FieldTextValue = row["FieldTextValue"].ToString();
    if (optItem.FieldTextValue.Equals(""))
    optItem.FieldTextValue = null;

    dropItems.Add(new SpinItem2(i, optItem.FieldValue.ToString(), optItem.FieldTextValue.ToString()));
            }

i = 1;
foreach (DataRow row in myOPTvalues.Tables[0].Rows)
{
    var optItem = new PrevzemSpin();
    optItem.FieldValue = row["FieldValue"].ToString();
    if (optItem.FieldValue.Equals(""))
    optItem.FieldValue = null;

    optItem.FieldTextValue = row["FieldTextValue"].ToString();
    if (optItem.FieldTextValue.Equals(""))
    optItem.FieldTextValue = null;

    if (optItem.FieldValue != item.FieldValue)
    {
        dropItems.Add(new SpinItem2(i, optItem.FieldValue.ToString(), optItem.FieldTextValue.ToString()));
    }
    ++i;
} 
```

出于某种原因，它的行为就像首先插入的项目在默认情况下是“选定的”，然后触发我用来发送选定的 ItemSelected 事件，但我不希望那样。

由于我的屏幕上有很多这样的微调器，它确实减慢了活动速度，而且它还会向字段发送不正确的值，并且因为我使用 ItemSelect 来检测一切是否正常（假设服务下降或值本身发生了变化在服务器上（有人在服务器应用程序上添加了一个新字段），而用户正在填写表单等）

有没有办法告诉应用程序不要在活动加载时触发它，而是在实际用户交互时触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:19:37.033

我不能专门针对 Android 说话，但我在 Windows 上遇到过很多次。

我通常使用的解决方案是简单地添加一个布尔`loading`变量。在初始化开始时将其设置为 true，然后在结束时将其清除。

在您的事件处理程序中，`ItemSelected`您可以简单地检查这是否是作为初始加载的结果而触发的。

```
private void onItemSelected(....)
{
    if(loading)
    {
        return; //Ignore as form is still loading
    }

    //Normal event handling logic goes here
    ....
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:25:41.157

在我声明 GetView 之前：

```
int LastSpinnerSelectedPosition; 
```

在我的微调器定义中：

```
LastSpinnerSelectedPosition = 0; 
```

我的微调器 ItemSelected 事件：

```
var CurrentSelectedIndex = SpinnerValue.SelectedItemPosition;

if (CurrentSelectedIndex != LastSpinnerSelectedPosition) 
{
    // WHATEVER I WANTED TO DO ON ITEM SELECT ANYWAY

    // Fix the LastSpinnerSelectedPosition ;)
    LastSpinnerSelectedPosition = CurrentSelectedIndex; 
} 
```

简单;D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T06:28:04.087

只是为了澄清，当一个项目被选中时，该事件会触发。语义显然存在缺陷，但从技术上讲，该项目在最初加载时被选中，因为您可以立即询问微调器选择了哪个项目，因此正如其他答案所说，只需忽略第一次选择它，因为它保证是加载选择，然后正常进行。

# google-app-engine - 创建在 GAE 数据存储查看器中不起作用

> ID：14808097
> 
> 赞同：0
> 
> 时间：2013-02-11T08:06:03.850
> 
> 标签：google-app-engine, google-cloud-datastore

当我尝试创建一些实体时，我看不到输入字段的选项。我只看到 SaveEntity 按钮。

![在此处输入图像描述](../Images/c3686c0d8c3e3578d97df2431ec5db02.png)

但是我可以查看所有现有实体。

![在此处输入图像描述](../Images/286699ac71a867a963d9d8c2c90e9489.png)

非常奇怪的是 - 还有另一个名为 VideoEntity 的实体，它的创建昨天没有工作，但今天工作。

有人可以帮助我使用这个看似不可预测的工具吗？

问候， 沙迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:31:24.253

我认为控制台知道每个实体基于现有数据的属性，而不是你的模型。并且数据只会定期更新。你什么时候上传你的应用程序？也许等待几个小时会给控制台时间更新。

或者，您可以使用远程 api 添加您的实体，或编写一个小片段并上传，例如...

```
VideoStatsEntity(app='home', ip='116.89.52.67', params='tag=20130210').put() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:20:41.263

在这种情况下，为数据存储编写一个简单的接口以允许您编辑/创建模型可能是最好的做法。您知道它们包含什么，因此您可以相应地调整您的界面，而不是像 Gwyn 所说的那样等待管理界面“赶上”。

我相信有些属性类型是无法通过您正在使用的管理界面添加的，因此您可能很快就会明白创建自定义界面的目的。

管理数据存储视图非常适合快速检查数据存储的内容，但曾经尝试过对 100 个条目进行分页吗？不好玩。

# php - 我无法从商店 procudere 获取临时表数据

> ID：14808102
> 
> 赞同：0
> 
> 时间：2013-02-11T08:06:31.063
> 
> 标签：php, sql-server

我在sql server中创建的存储过程是下面的结构

```
ALTER PROCEDURE [dbo].[list_final_player_report]
    -- Add the parameters for the stored procedure here
    @teamid int
AS
BEGIN
CREATE TABLE #TempTable (
                        playername varchar(50),
                        RANK_in_speedladdar INT,
                        rank_in_120s int,
                        rank_in_cone int,
                        rank_in_beep int,
                        rank_in_cooper int,
                        rank_in_pushups int,
                        rank_in_situp int,
                        rank_in_pullup int,
                        rank_in_40s int,
                        rank_in_pushopbattle int,
                        rank_in_vertical_jump int,
                        rank_in_shuttle int
                    )
DECLARE @playerid int
DECLARE @firstname nvarchar(10) 

-- Define the cursor
DECLARE cursor1 cursor for
select Players.PlayerID as PlayerID , players.firstname  from Players where Teamid=@teamid

-- We should open the cursor
OPEN cursor1

-- We need to Fetch the rows into @EmpId variable
FETCH cursor1 into @playerid,@firstname

--Looping
WHILE(@@fetch_status=0)
BEGIN

insert into #TempTable 
values(@firstname,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =1 and ChallengeStats.PlayerID=@playerid ),
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =2 and ChallengeStats.PlayerID=@playerid ),
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =3 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =4 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =5 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =6 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =7 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =8 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =9 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =10 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =11 and ChallengeStats.PlayerID=@playerid ) ,
(select  (sum(Total))/count(PlayerID)  from ChallengeStats WHERE ChallengeStats.ChallengeID =12 and ChallengeStats.PlayerID=@playerid )  
)

FETCH cursor1 into @playerid,@firstname
END

close cursor1
deallocate cursor1 
select * from #TempTable
END 
```

这个 sp 在 sqlserver 中完美执行

但现在的问题是如何将此临时表数据放入 php 结果集中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:15:16.170

而不是使用临时表，为什么不使用表变量。您不必更改太多代码即可实现此功能。

```
DECLARE @TempTable TABLE (
                        playername varchar(50),
                        RANK_in_speedladdar INT,
                        rank_in_120s int,
                        rank_in_cone int,
                        rank_in_beep int,
                        rank_in_cooper int,
                        rank_in_pushups int,
                        rank_in_situp int,
                        rank_in_pullup int,
                        rank_in_40s int,
                        rank_in_pushopbattle int,
                        rank_in_vertical_jump int,
                        rank_in_shuttle int
                    ) 
```

临时表仅在使用范围内有效，这可能会导致您的问题。试试上面的方法，你应该会得到不同的结果。

# excel - 在 VBA 中按键对字典进行排序

> ID：14808104
> 
> 赞同：11
> 
> 时间：2013-02-11T08:06:43.810
> 
> 标签：excel, vba, dictionary

我在 VBA 中创建了一个字典，使用`CreateObject("Scripting.Dictionary")`它将源词映射到要在某些文本中替换的目标词（这实际上是为了混淆）。

不幸的是，当我按照下面的代码进行实际替换时，它将按照源词添加到字典中的顺序替换它们。如果我有例如“Blue”然后是“Blue Berry”，“Blue Berry”中的“Blue”部分将被第一个目标替换，“Berry”保持原样。

```
'This is where I replace the values
For Each curKey In dctRepl.keys()
    largeTxt = Replace(largeTxt, curKey, dctRepl(curKey))
Next 
```

我在想我可以通过首先将字典的**键**从最长长度排序到最短长度然后进行上述替换来解决这个问题。问题是我不知道如何以这种方式对键进行排序。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T08:39:57.827

看来我自己想通了。我创建了以下似乎正在完成这项工作的函数：

```
Public Function funcSortKeysByLengthDesc(dctList As Object) As Object
    Dim arrTemp() As String
    Dim curKey As Variant
    Dim itX As Integer
    Dim itY As Integer

    'Only sort if more than one item in the dict
    If dctList.Count > 1 Then

        'Populate the array
        ReDim arrTemp(dctList.Count - 1)
        itX = 0
        For Each curKey In dctList
            arrTemp(itX) = curKey
            itX = itX + 1
        Next

        'Do the sort in the array
        For itX = 0 To (dctList.Count - 2)
            For itY = (itX + 1) To (dctList.Count - 1)
                If Len(arrTemp(itX)) < Len(arrTemp(itY)) Then
                    curKey = arrTemp(itY)
                    arrTemp(itY) = arrTemp(itX)
                    arrTemp(itX) = curKey
                End If
            Next
        Next

        'Create the new dictionary
        Set funcSortKeysByLengthDesc = CreateObject("Scripting.Dictionary")
        For itX = 0 To (dctList.Count - 1)
            funcSortKeysByLengthDesc.Add arrTemp(itX), dctList(arrTemp(itX))
        Next

    Else
        Set funcSortKeysByLengthDesc = dctList
    End If
End Function 
```

有关静态数组的更多信息，请参阅：[https ://excelmacromastery.com/excel-vba-array/#Declaring_an_Array](https://excelmacromastery.com/excel-vba-array/#Declaring_an_Array)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-24T15:22:47.457

我正在寻找一个简单的 VBA 函数来通过在 Microsoft Excel 中升序键值来对字典进行排序。

我对 neelsg 的代码进行了一些小改动以适应我的目的（`'//`有关更改的详细信息，请参阅以下注释）：

```
'/* Wrapper (accurate function name) */
Public Function funcSortDictByKeyAscending(dctList As Object) As Object
    Set funcSortDictByKeyAscending = funcSortKeysByLengthDesc(dctList)
End Function

'/* neelsg's code (modified) */
Public Function funcSortKeysByLengthDesc(dctList As Object) As Object
'//    Dim arrTemp() As String
    Dim arrTemp() As Variant
...
...
...
        'Do the sort in the array
        For itX = 0 To (dctList.Count - 2)
            For itY = (itX + 1) To (dctList.Count - 1)
'//                If Len(arrTemp(itX)) < Len(arrTemp(itY)) Then
                If arrTemp(itX) > arrTemp(itY) Then
...
...
...
        'Create the new dictionary
'//        Set funcSortKeysByLengthDesc = CreateObject("Scripting.Dictionary")
        Set d = CreateObject("Scripting.Dictionary")
        For itX = 0 To (dctList.Count - 1)
'//            funcSortKeysByLengthDesc.Add arrTemp(itX), dctList(arrTemp(itX))
            d(arrTemp(itX)) = dctList(arrTemp(itX))
        Next
'// Added:
        Set funcSortKeysByLengthDesc = d
    Else
        Set funcSortKeysByLengthDesc = dctList
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-20T12:18:29.760

我知道这是一个旧线程，但是当我遇到类似问题时它很有帮助。我的解决方案是使用沙盒工作表，让 Excel 对键进行排序，然后重建字典。通过使用沙盒工作表，您可以非常轻松地将公式用于其他困难的排序情况，而无需在键上编写自己的冒泡排序。在原始海报的情况下，按 Len(Key) 降序排序可以解决问题。

这是我的代码：

```
Private Sub SortDictionary(oDictionary As Scripting.Dictionary, oSandboxSheet As Worksheet)
On Error Resume Next
Dim oSortRange As Range
Dim oNewDictionary As Scripting.Dictionary
Dim lBegRow As Long, lEndRow As Long, lBegCol As Long, lEndCol As Long
Dim lIndex As Long
Dim sKey As String
Dim vKeys As Variant

    ' Transpose Keys into ones based array.
    vKeys = oDictionary.Keys
    vKeys = Application.WorksheetFunction.Transpose(vKeys)

    ' Calculate sheet rows and columns based upon array dimensions.
    lBegRow = LBound(vKeys, 1): lEndRow = UBound(vKeys, 1)
    lBegCol = LBound(vKeys, 2): lEndCol = UBound(vKeys, 2)

    With oSandboxSheet
        .Activate
        .Cells.EntireColumn.Clear

        ' Copy the keys to Excel Range calculated from Keys array dimensions.
        .Range(.Cells(lBegRow, lBegCol), .Cells(lEndRow, lEndCol)).Value = vKeys
        .Cells.EntireColumn.AutoFit

        ' Sort the entire range.
        Set oSortRange = .Range(.Cells(lBegRow, lBegCol), .Cells(lEndRow, lEndCol))
        With .Sort
            With .SortFields
                .Clear
                Call .Add(Key:=oSortRange, SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal)
            End With

            Call .SetRange(oSortRange)
            .Header = xlNo
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With

        ' Recreate the keys now sorted as desired.
        vKeys = .Range(.Cells(lBegRow, lBegCol), .Cells(lEndRow, lEndCol)).Value
    End With

    ' Create a new dictionary with the same characteristics as the old dictionary.
    Set oNewDictionary = New Scripting.Dictionary
    oNewDictionary.CompareMode = oDictionary.CompareMode

    ' Iterate over the new sorted keys and transfer values from old dictionary to new dictionary.
    For lIndex = LBound(vKeys, 1) To UBound(vKeys, 1)
        sKey = vKeys(lIndex, 1)
        If oDictionary.Exists(sKey) Then
            Call oNewDictionary.Add(sKey, oDictionary.Item(sKey))
        End If
    Next

    ' Replace the old dictionary with new sorted dictionary.    
    Set oDictionary = oNewDictionary
    Set oNewDictionary = Nothing: Set oSortRange = Nothing
On Error GoTo 0
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-03T22:14:05.350

另一种可能性是使用 ArrayList 对 Dictionary 键进行排序，然后使用 ArrayList 值重新创建 Dictionary。

```
 Private Sub SortDictionary(oDictionary As Scripting.Dictionary)
  On Error Resume Next
  Dim oArrayList As Object
  Dim oNewDictionary As Scripting.Dictionary
  Dim vKeys As Variant, vKey As Variant
     Set oArrayList = CreateObject("System.Collections.ArrayList")

     ' Transpose Keys into ones based array.
     vKeys = oDictionary.Keys
     vKeys = Application.WorksheetFunction.Transpose(vKeys)
     For Each vKey In vKeys
         Call oArrayList.Add(vKey)
     Next
     oArrayList.Sort
     ''oArrayList.Reverse

     ' Create a new dictionary with the same characteristics as the old dictionary.
     Set oNewDictionary = New Scripting.Dictionary
     oNewDictionary.CompareMode = oDictionary.CompareMode

     ' Iterate over the array list and transfer values from old dictionary to new dictionary.
     For Each vKey In oArrayList
         sKey = CStr(vKey)
         If oDictionary.Exists(sKey) Then
             Call oNewDictionary.Add(sKey, oDictionary.Item(sKey))
         End If
     Next

     ' Replace the old dictionary with new sorted dictionary.
     Set oDictionary = oNewDictionary
     Set oNewDictionary = Nothing: Set oArrayList = Nothing
 On Error GoTo 0
 End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-02T18:14:45.317

可以通过在过程中添加代码来对键进行排序，而无需创建函数。

```
Dim sdkey,tamp As Variant
With CreateObject("Scripting.Dictionary")
sdkey = .keys
For i = LBound(sdkey) + 1 To UBound(sdkey)    ' We've listed the unique values as alphabetically.
For j = LBound(sdkey) To UBound(sdkey) - 1
If sdkey(j) > sdkey(i) Then
tamp = sdkey(j)
sdkey(j) = sdkey(i)
sdkey(i) = tamp
End If
Next j
Next i

ReDim tamp(1 To UBound(sd_key) + 1, 1 To 2)
… 
```

[![在此处输入图像描述](../Images/ea83cc793f5e292a345c70bdd881bfb0.png)](https://i.stack.imgur.com/0aisJ.jpg)

示例文件源：[获取 Excel 中不同值的总和](https://eksi30.com/get-sum-of-unique-values-sort/)

# python - 列表作为数据框的值的字典

> ID：14808106
> 
> 赞同：3
> 
> 时间：2013-02-11T08:06:44.140
> 
> 标签：python, pandas

这可能是使用数据框的不正确方式，但我有一个字典，其中的值是项目列表。如：

```
my_dict = {'a':[1,2,3], 'b':[3,4,5]} 
```

我想创建一个数据框，其中索引是键并且有一列，其中值是列表。这是我想看到的输出：

```
In [69]: my_df
Out[69]: 
              0
a     [1, 2, 3]
b  [3, 4, 5, 6] 
```

这是我得到的最接近的，通过将字典值更改为列表列表并使用转置。更好的方法是什么？

```
In [64]: my_dict = {'a':[[1,2,3]], 'b':[[3,4,5,6]]}

In [65]: my_df = pd.DataFrame(my_dict)

In [66]: print my_df
           a             b
0  [1, 2, 3]  [3, 4, 5, 6]

In [67]: my_df.T
Out[67]: 
              0
a     [1, 2, 3]
b  [3, 4, 5, 6] 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:33:53.713

```
import pandas as pd

my_dict = {'a':[1,2,3], 'b':[3,4,5]}

pd.DataFrame([[i] for i in my_dict.values()],index=my_dict)
Out[3]: 
           0
a  [1, 2, 3]
b  [3, 4, 5] 
```

但是因为你所拥有的`Series`不仅仅是 a `DataFrame`：

```
pd.Series(my_dict)
Out[4]: 
a    [1, 2, 3]
b    [3, 4, 5] 
```

如果需要，可以将其转换为`DataFrame`：

```
pd.DataFrame(pd.Series(my_dict))
Out[5]: 
           0
a  [1, 2, 3]
b  [3, 4, 5] 
```

# php - preg_match 我如何提取这个？

> ID：14808108
> 
> 赞同：0
> 
> 时间：2013-02-11T08:06:50.280
> 
> 标签：php, regex

如何编写正则表达式以从以下内容中提取“所需文本”：

```
data-zoom-image="desired text" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:10:13.647

```
 preg_match('/(data-zoom-image=")(.*)(")/',$youstring,$match);

echo $match[2]; 
```

尝试这个。这是一个模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:11:37.577

您不需要`preg_match`for 执行此操作。

简单地说，您可以将[substr](http://php.net/manual/en/function.substr.php)与[strpos一起使用](http://php.net/manual/en/function.strpos.php)

```
$find = substr($yourString,strpos($yourString,"=")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:21:07.580

无配额：

```
substr($text, strpos($text, '"')+1, strrpos($text, '"') - strpos($text, '"')-1) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:51:54.583

```
$str  = 'data-zoom-image="desired text"';

preg_match('/data-zoom-image="(?P<text>\w+)"/', $str, $matches);

print_r($matches); 
```

参考： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# mysql - 数据库输入副本

> ID：14808109
> 
> 赞同：1
> 
> 时间：2013-02-11T08:06:51.210
> 
> 标签：mysql, sql, database

我将从输入我想要的内容开始。

所以，我有一个表，其中每一行都会自动获取一个新的 id，对于在那里创建的每一行，我希望该 id 也可以放入另一个表中的特定列中。

数据库结构：事件

（这是我要从中复制 id 的表）

事件ID | 更多的列

-

数据库结构：可连接（这是我希望将“EventID”复制到的表）

事件ID | 更多列。

所以，我希望我的 EventID 也可以在我的表“事件”中放入一个事件时自动放入我的关节中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:19:28.000

使用返回最后插入的自动生成 ID 的函数。

在**MySql**中它 在**SQL Server**中它是[SCOPE_IDENTITY](http://msdn.microsoft.com/en-us/library/ms190315.aspx)，[IDENT_CURRENT](http://msdn.microsoft.com/en-us/library/ms175098.aspx)，[@@IDENTITY](http://msdn.microsoft.com/en-us/library/ms187342.aspx)[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

 **例如在 MySql 你可以做这样的事情

```
INSERT INTO event (column1,column2...) VALUES (...); 
SET @last_event_id = LAST_INSERT_ID();
INSERT INTO jointable (EventID, column1, column2...) VALUES (@last_event_id, ...); 
```

**更新：** 要从客户端（php + mysqli）使用[`mysqli_insert_id()`](http://php.net/manual/en/mysqli.insert-id.php)

在这种情况下，您的代码将如下所示

```
$db = mysqli_connect(...);
...
$query = "INSERT INTO event (column1, column2...) VALUES (...)";
mysql_query($query);

$last_event_id = mysqli_insert_id($db);

$query = "INSERT INTO jointable (EventID, column1, column2...) VALUES ($last_event_id, ...)";
mysql_query($query); 
```**

# android - 使用 AsyncTask 解析 JSON 对象的 setText

> ID：14808111
> 
> 赞同：3
> 
> 时间：2013-02-11T08:06:57.447
> 
> 标签：android, json, android-asynctask, httpclient

我正在制作一个从互联网网页的源代码中解析 JSON 文本的 android 程序。它在 android 2.2 中工作，但我现在需要它在 android 3.0 上，它需要在 AsyncTask 上。我有关于 AsyncTask 的背景，但我很困惑把这个和那个放在哪里。提前谢谢大家:)

这是我在 MainActivity 类中的方法：

```
private void jsonStuffs() {
    //JSON PARSER & HOME PAGE TEXTVIEWS

        client = new DefaultHttpClient();

        GetMethodEx test = new GetMethodEx();
        String returned;
        try {
            returned = test.getInternetData();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try{
            String jsonStr = test.getInternetData(); //go to GetMethodEx
                JSONObject obj = new JSONObject(jsonStr);

//////////////////////find temperature in the JSON in the webpage

                String temperature = obj.getString("temperature");
                TextView tvTemp = (TextView)findViewById(R.id.textView);
                tvTemp.setText(temperature);

        }
        //catch (JSONException e) {
             // e.printStackTrace();
            //} 
        catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    } 
```

GetMethodEx 类是这样的（这将找到网页的链接，然后将其源代码转换为文本格式）：

```
public class GetMethodEx extends Activity {
    public String getInternetData() throws Exception{

        BufferedReader in = null;
        String data = null;
        //

        try{
            HttpClient client = new DefaultHttpClient();
            URI website = new URI("http://nhjkv.comuf.com/json_only.php");
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) !=null){
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            return data;
        }finally {
            if (in !=null){
                try{
                    in.close();
                    return data;
                } catch (Exception e){
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:18:11.163

您可以这样做（此代码仅用于说明，根据需要更改）

```
class MyAsyncTask extends AsyncTask<String, Void, JSONObject> {
     protected void onPreExecute() {
        // You can set your activity to show busy indicator
        //setProgressBarIndeterminateVisibility(true);
     }

    protected JSONObject doInBackground(String... args) {
        return jsonStuffs();
    }

    protected void onPostExecute(final JSONObject jsonObj) {
        String temperature = jsonObj.getString("temperature");
        TextView tvTemp = (TextView)findViewById(R.id.textView);
        tvTemp.setText(temperature);
        // Stop busy indicator
        //setProgressBarIndeterminateVisibility(false);
    } 
```

要调用此任务使用`new MyAsyncTask().execute();`（如果需要，您可以传递`String`参数来执行）您可以更改您`jsonStuffs()`的返回`JSONObject`

例如

```
private JSONObject jsonStuffs() {

     // ...

     String jsonStr = test.getInternetData(); //go to GetMethodEx
     return new JSONObject(jsonStr);

     // ...
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:13:56.963

> 它在 android 2.2 中工作，但我现在需要它在 android 3.0 上，它需要在 AsyncTask 上。

=> 是的，如果您在没有在线程内部实现（例如 AsyncTask）的情况下进行 Web 调用，它会在 3.0 中给出[NetworkOnMainThreadException 。](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 我有关于 AsyncTask 的背景，但我很困惑把这个和那个放在哪里。

=> 只需在 AsyncTask 的方法中包含 Web 调用逻辑`doInBackground()`，在您的情况下调用 getInternetData() inside `doInBackground()`。

仅供参考，在 doInBackground() 中执行长时间运行的任务时，您无法直接更新 UI。是的，如果您想更新 UI，请执行以下任何操作：

1.  从 onPostExecute() 方法更新 UI。
2.  或`runOnUiThread()`在内部实施`doInBackround()`

# git - 挂钩/接收后：语法错误：“（”意外（预期“完成”）

> ID：14808114
> 
> 赞同：2
> 
> 时间：2013-02-11T08:07:19.003
> 
> 标签：git, bash

我正在用 GIT 编写一个接收后脚本。

我附上了它的最小版本，它也失败了：

```
generate_email()
{
    for user in $(git config --get-all notifications.users); do
        unset files_to_notify
        for filter in $(git config --get-all notifications.$user); do
            files_to_notify=" $files_to_notify $(git diff-tree --no-commit-id \
                --name-only -r $newrev | grep $filter) "
        done
        files_to_notify=( $files_to_notify )
        if [ -n "$files_to_notify" ]; then
            echo ${files_to_notify[*]}
        fi
    done
}

while read oldrev newrev refname
do
    generate_email $oldrev $newrev $refname
done 
```

当我尝试在调用此脚本时推送到 git 服务器时，我收到以下消息：

*远程：钩子/接收后：10：钩子/接收后：语法错误：“（”意外（期望“完成”）*

当我尝试在命令行中运行它时，脚本可以正常工作而没有此消息。

有任何想法吗？

谢谢，

叶利亚希夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:59:33.290

两种可能：

1.  添加`#!/usr/bin/env bash`到脚本的顶部以确保脚本由`bash`而不是运行`sh`，因为您使用数组、`bash`扩展名。

2.  停止使用数组，因为您不会以任何无法用简单的空格分隔字符串轻松替换的方式使用它。这就是您首先构建阵列的方式。

# asp.net - 匿名身份验证设置存储在 IIS 中的什么位置？未创建 web.config

> ID：14808117
> 
> 赞同：2
> 
> 时间：2013-02-11T08:07:32.437
> 
> 标签：asp.net, authentication, iis, web-config

我在默认网站的虚拟目录下添加了一个 ASP.NET 应用程序。当我更改应用程序中子文件夹的身份验证设置时（例如通过禁用匿名身份验证），我找不到设置的存储位置。子文件夹中没有创建 web.config，应用程序的根 web.config 未触及，Process Monitor 也不记录任何文件写入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T08:32:27.747

**IIS 管理器将任何**网站或子文件夹的身份验证设置存储在“C:\Windows\System32\inetsrv\config\applicationHost.config”中。需要将相应的部分复制到本地 web.config 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:13:50.623

我只是做了同样的事情并将虚拟目录链接到我的 smtp Pickup-Directory。结果相同。

但是：在我重新启动默认网站并更改设置后，我的 smtp-pickup-directory 中有一个 web 配置。

# backbone.js - 主干视图和子视图

> ID：14808119
> 
> 赞同：1
> 
> 时间：2013-02-11T08:07:37.413
> 
> 标签：backbone.js

我有一个表单，当单击添加字段按钮时，它会动态添加字段。现在对于那个新领域，我需要一个单独的视图，因为它附加了一些功能。我知道有一个子视图的概念。

我的问题是，我什么时候应该在视图上选择一个子视图，我应该在我的情况下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:38:49.843

首先，检查我创建的这个小提琴：[这里](http://jsfiddle.net/nishantjani10/4WgY4/)

这用作单独视图/子视图概念的示例。

现在，以示例为基础并讨论**子视图与单视图**选项，如果您看到示例，我会为添加的每个链接创建一个**子视图，方法是：**

```
var listItem = new printView({ model: model}); //create a new view
$('#list').append(listItem.render().el);       //append that view to my main view 
```

这在很多方面对我有帮助：-

1.  我对每个模型都有一个看法

2.  我可以将操作与每个视图相关联，它们会单独处理它们

3.  模块化

如果您采用**单视图方法**，那么您首先面临一个问题是，当我在特定元素上单击或删除（您定义的任何操作）时，**我如何获得它是哪个模型**？

上述解决方案是，您可以将 cid 与每个元素相关联，当单击或删除该元素（您定义的任何操作）时，您可以去`getByCid()`获取适当的模型。

就我个人而言，我会使用子视图或单独的视图方法，因为这为您的代码提供了更多的**灵活性**和**可读性。**

谢谢你。

# iphone - 使用 html 解析在 Label 中显示不同的语言

> ID：14808121
> 
> 赞同：0
> 
> 时间：2013-02-11T08:08:07.067
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个 URL -----> 182.72.253.75/test/surya/telugu.html 这个 url 包含一些泰卢固语的信息..

现在我需要以下方面的帮助---->

1）**如何解析该html url** ..

2）**如何在iphone模拟器的UILabel中显示该链接中的**信息... （因为信息是**泰卢固语**而不是**英语**）..

**提前谢谢**....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:38:48.693

在这里，我解决了我的问题......

实际上，该 URL 包含...

ాష్ట్రపతిప్రణబ్రాష్ట్రపతిభవన్లోసదస్సుప్రారంభమైంది ప్రారంభమైంది ప్రారంభమైంది。30మందిగవర్నర్లుగవర్నర్లుగవర్నర్లుగవర్నర్లుగవర్నర్లుపాల్గొన్నారుపాల్గొన్నారుపాల్గొన్నారుపాల్గొన్నారుపాల్గొన్నారుపాల్గొన్నారుపాల్గొన్నారు。ప్రధాని，రక్షణ，ఆర్థిక，వ్యవసాయం，హోం，మానవ，పట్టణాభివృద్ధి，జలవనరులశాఖల，జలవనరులశాఖల，పౌరసర，ఆహార，ప్రజాపంపిణీ，ప్రజాపంపిణీ，తాగునీరు，పారిశుద్ధ్యశాఖలస్వతంత్ర。రాష్ట్రాలఆర్థికాభివృద్ధితోమహిళలఈచర్చించనున్నారుచర్చించనున్నారు。

这个HTML页面的后台源代码如下...

[http://ashokios.blogspot.in/2013/02/background-sourcetemporary-post.html](http://ashokios.blogspot.in/2013/02/background-sourcetemporary-post.html)

但这不是正确的格式

所以..，

1）需要得到正确的甲酸。

2）需要转换成字典。

这里我们需要两个自定义类

XMLReader 和 GDataXMLDocument..

现在解决方案是...

```
NSString *serverResponseStr=[XMLReader getResponseForService:@"http://182.72.253.75/test/surya/telugu.html" withParametersString:nil];

NSString *validXMLstring=[[NSString alloc]init];

GDataXMLDocument *doc = [[GDataXMLDocument alloc]initWithHTMLString:serverResponseStr error:nil];
if (doc)
{
    validXMLstring=[[doc rootElement] XMLString];
}

NSDictionary *responseDictionary=[[NSDictionary alloc]init];
responseDictionary=[XMLReader dictionaryForXMLString:validXMLstring error:nil];

NSLog(@"%@",responseDictionary);
NSLog(@"%@",[[[[[[responseDictionary objectForKey:@"html"]objectForKey:@"body"]objectForKey:@"table"]objectForKey:@"tr"]objectForKey:@"td"]objectForKey:@"text"]);

self.myTextView.text=[[[[[[responseDictionary objectForKey:@"html"]objectForKey:@"body"]objectForKey:@"table"]objectForKey:@"tr"]objectForKey:@"td"]objectForKey:@"text"]; 
```

# java - getOutputStream / getInputStream 通过 sctp 协议

> ID：14808122
> 
> 赞同：0
> 
> 时间：2013-02-11T08:08:21.253
> 
> 标签：java, sctp

如何返回 SCTP 套接字的输出流？例如在 TCP ( `socket.getOutputStream`) 中。但如何在 SCTP 中？我试图搜索，但我没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:13:38.877

在 JDK 7 功能之一中访问 SCTP 协议。

示例链接：[http ://www.oracle.com/technetwork/articles/javase/index-139946.html](http://www.oracle.com/technetwork/articles/javase/index-139946.html)

# php - 将变量传递到第三页

> ID：14808123
> 
> 赞同：0
> 
> 时间：2013-02-11T08:09:04.920
> 
> 标签：php, html

我的问题是我在第 1 页上有一个链接，其中有一个与之关联的变量，例如

```
<a href="product.php?family=Spring">Spring</a> 
```

当用户单击此链接时，我将他转发到一个 html 页面，当他填写表格时说 PAGE 2 包含注册表并单击提交表单的详细信息，他插入的数据被另一个 php 页面抓取，说 PAGE 3 请求。

我想要的是与第 1 页上的链接（Spring）关联的变量也可以传递到第三页，其中可以处理表单数据和与第 1 页上的链接关联的变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:12:31.570

您需要做的是从链接（Spring）中获取传递的数据并将其保存在隐藏字段中，如下所示。为此，您将需要 php`$_GET`数组，并且您的页面应该具有`.php`扩展名。

```
<input type="hidden" name="Spring" value="Spring value">
<input type="hidden" name="Spring2" value="Spring value 2"> 
```

将隐藏的输入字段保留在您的注册表单中。提交注册表时，这些隐藏的文件将与表格一起提交。然后您可以检索它们，因为您现在正在检索注册值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:14:54.900

在注册表中取一个隐藏字段，例如

```
<input type="hidden" name="passed_var" value="<?php echo $_GET['family']; ?>" />
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:15:38.780

将您的注册页面扩展名更改为 .php，然后在表单内包含一个隐藏字段，如下所示

```
<input type="hidden" name="family" id="family" value="<?php echo $_GET["family"];?>"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T08:15:20.827

您可能希望查看 Sessions 为了这个

会话是可以使用 PHP 激活的超全局变量

```
session_start() 
```

命令。

然后，您可以像这样存储和访问 SESSION 变量：

PAGE1.PHP

```
<?php 
session_start();
$_SESSION['foo'] = "bar";
?> 
```

PAGE2.PHP

```
<?php
session_start()
$foobar = $_SESSION['foo'];

echo $foobar;
//echo's: "bar";

?> 
```

[您可以在此处](http://www.w3schools.com/php/php_sessions.asp)和[此处](http://php.net/manual/en/features.sessions.php)阅读有关会话的更多信息

# java - if else 语句无法正常工作

> ID：14808129
> 
> 赞同：-1
> 
> 时间：2013-02-11T08:10:00.860
> 
> 标签：java, if-statement

这是我第一次使用这个论坛，我对整个 Java 体验还是新手，如果这是一个非常简单的修复，请原谅我。

我正在尝试为学校制作这个项目，但我的 if else 语句无法正常工作。如您所见，如果您进入近战或远程，一切都很好，但如果您不这样做，它会重定向您。我的问题是，即使您键入 melee 或 ranged，它也会首先将您定向到 if 方法，然后立即将您重定向到 else 语句。

有谁知道我该如何解决这个问题？

```
newchamp.Type = JOptionPane.showInputDialog(null, "What type of champion have you summoned? (melee or ranged)", "Type", JOptionPane.PLAIN_MESSAGE);
        if (Type.equalsIgnoreCase("melee")) {
           JOptionPane.showMessageDialog(null,"You have now confirmed your champion, you can not edit anything from this point on.");
        }
        if (Type.equalsIgnoreCase("ranged")) {
              JOptionPane.showMessageDialog(null,"You have now confirmed your champion, you can not edit anything from this point on.");
        }
        else {
            JOptionPane.showMessageDialog(null,"You can only choose Melee or Ranged!");
            newchamp.Type = JOptionPane.showInputDialog(null, "What type of champion have you summoned? (Melee or Ranged)", "Type", JOptionPane.PLAIN_MESSAGE);
               JOptionPane.showMessageDialog(null,"You have now confirmed your champion, you can not edit anything from this point on.");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T08:14:01.980

你的代码：

```
if(a) ...
if(b) ... else ... 
```

因此，在每种情况下（`a` `true`或`false`） if `b`is`false`它都会进入`else`语句（更具体地说，如果`Type`不等于`ranged`，则将执行该`else`部分）。

我想你想要的是

```
if(a) ... else if(b) ... else ... 
```

使用您的代码：

```
if (Type.equalsIgnoreCase("melee")) {

} else if (Type.equalsIgnoreCase("ranged")) {

} else {

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T08:12:20.510

您需要使用`if`, `else if`,`else`构造。

```
if (Type.equalsIgnoreCase("melee")) {
  // ...
}
else if (Type.equalsIgnoreCase("ranged")) {
  // ...
}
else {
  // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T08:15:51.670

像这样做

```
String   type = JOptionPane.showInputDialog(null, "What type of champion have you summoned? (melee or ranged)", "Type", JOptionPane.PLAIN_MESSAGE);
            if (Type.equalsIgnoreCase("melee")) {
               JOptionPane.showMessageDialog(null,"You have now confirmed your champion, you can not edit anything from this point on.");
            }else if (type.equalsIgnoreCase("ranged")) {
                  JOptionPane.showMessageDialog(null,"You have now confirmed your champion, you can not edit anything from this point on.");
            }
            else {
                JOptionPane.showMessageDialog(null,"You can only choose Melee or Ranged!");
               type = JOptionPane.showInputDialog(null, "What type of champion have you summoned? (Melee or Ranged)", "Type", JOptionPane.PLAIN_MESSAGE);
                   JOptionPane.showMessageDialog(null,"You have now confirmed your champion, you can not edit anything from this point on.");
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T08:17:21.920

做

```
newchamp.Type = JOptionPane.showInputDialog(null, "What type of champion have you summoned? (melee or ranged)", "Type", JOptionPane.PLAIN_MESSAGE);
    if (Type.equalsIgnoreCase("melee")) {
       ..something..
    }
    else if (Type.equalsIgnoreCase("ranged")) {
          ..something..
    }
    else {
       ..something..
    }
}
} 
```

为你工作？

# php - 尝试仅使用模板和资产库在 pyrocms 中加载主题资产

> ID：14808130
> 
> 赞同：0
> 
> 时间：2013-02-11T08:10:06.227
> 
> 标签：php, codeigniter, pyrocms

在试图找出如何进行以下工作。我正在使用 PyroCMS 的模板和资产库来帮助帮助我的 CI 应用程序，我试图弄清楚如何让仪表板在下面的文件结构中查找 images/css/js 文件，而不是public_html 文件夹中的常规资产文件夹，因为这些文件仅与该主题有关。据我所知，下面的代码用于渲染特定的 css 文件。主题运行顺利，但是当调用下面的行时，它不会呈现任何内容，就好像没有代码行一样。

我仍在试图找出为什么这条线没有被渲染。我仍然需要一个想法。

```
<?php echo Asset::css(‘bootstrap/bootstrap.min.css’); ?>

public_html/
    application/
        themes/
            supr/
                assets/
                    js/
                    images/
                    css/
                        bootstrap/bootstrap.min.css
                views/
                    layouts/
                        default.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:29:54.453

`Asset::css()`仅将要包含的文件添加到 CSS 文件列表（数组）中。您需要调用`Asset::render_css()`以生成实际的`<link>`HTML。

[http://docs.pyrocms.com/2.1/manual/developers/tools/assets](http://docs.pyrocms.com/2.1/manual/developers/tools/assets)

# javascript - 在现代浏览器中覆盖全局变量

> ID：14808132
> 
> 赞同：0
> 
> 时间：2013-02-11T08:10:13.717
> 
> 标签：javascript, json, security

我刚刚阅读了有关在浏览器中覆盖全局变量（例如数组）的[John Resig 文章](http://ejohn.org/blog/re-securing-json/)，但是当我在浏览器中尝试该示例时，什么也没发生。

这里的代码：

```
var sec = {};
function Array() { 
    alert(1); 
    sec = this; 
}; 
```

当我`["zdxc", "sd", 1111, 11.1]`在浏览器的控制台中运行时，什么也没发生。已声明数组且未显示警报。

这是在现代浏览器中修复的错误还是在某些版本的浏览器中仍然有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:02:13.693

那是因为您覆盖了 Array-contructor，这使得调用`new Array();`返回您的自定义对象，该对象由实际的`Array`.

所以打电话

```
var arr = ["zdxc", "sd", 1111, 11.1]; 
```

让`arr`beeing成为本地人`Array`。

打电话

```
var arr_override = new Array(); 
```

使`arr_override`beeing 成为`Object`您之前声明的类型，因此执行您的`alert`-statement。覆盖构造函数类型的“擦除”`Array`标识符中的 -initialisation 将其替换为构造函数。它不是一个实际的`Array`.

根据对[这个问题的回答，](https://stackoverflow.com/questions/1053556/overwriting-the-array-constructor-does-not-affect-right)自 2008 年左右以来，所有市长浏览器中的 Array-Literal ( `[]`) 都没有受到这种行为的影响。

**编辑：**

在尝试了一下之后，似乎不可能修改`[]`-notation 的行为，也不建议修改 Native Objects（特别是它们的构造函数）。

如何扩展原型并修改现有属性/方法，如下例所示

```
var arr = [];
arr.push('2323');
alert(arr);

Array.prototype.push = function() { alert('trololololo'); }
arr.push(123); 
```

希望这可以帮助。干杯!

# jquery - 使用 jQuery 调整字体大小的问题

> ID：14808137
> 
> 赞同：0
> 
> 时间：2013-02-11T08:10:39.440
> 
> 标签：jquery, html, css

我已经使用这个博客参考来调整网页字体的大小，但是一旦我在我的 html 页面中使用它，它就会给我一个无法追踪的错误，可能是 jquery 冲突

[http://depotwebdesigner.com/scripts/how-to-use-jquery-to-create-a-font-resize.html](http://depotwebdesigner.com/scripts/how-to-use-jquery-to-create-a-font-resize.html)

我有以下进口可用

```
<script type="text/javascript" src="js/lib/jquery-1.8.3.js"></script>
        <script type="text/javascript" src="js/lib/jquery-ui.js"></script>

        <script type="text/javascript" src="js/lib/animatedcollapse.js"></script>

        <script type="text/javascript" src="js/lib/jquery.treeview.js"></script>

        <script type="text/javascript" src="js/lib/knockout-2.2.0.js"></script> 
```

我想添加

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

一旦我添加了这个，页面就会扭曲，并且淘汰 API 中的一些异常就会出现。

请让我知道这是否是冲突情况以及如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:17:56.147

我自己以前曾经遇到过这个问题。而且我发现有些插件不支持新版本的jquery。然后我改为`<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>`并且`<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>`它有效。

**注意**：如果您使用`<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>`.

# c++ - c ++：通过删除第一个字符将字符串写入文件

> ID：14808139
> 
> 赞同：0
> 
> 时间：2013-02-11T08:10:50.507
> 
> 标签：c++

我正在使用 ifstream 和 getline（比如 in ）逐行读取输入文件`string line`。我必须`string line`通过删除文件的第一个字符来输出到文件。我正在做的是`erase`ing 行的第一个字符并使用 ofstream 输出它。有没有更好的方法（意味着相对更快的方法）？我有数以百万计的字符串。（请注意，并非所有行都如此，仅适用于每 10 行的第一行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:08:44.193

我会先尝试最简单的方法，看看它是否足够快：

```
if (!mystring.empty())
    std::copy( mystring.begin() + 1, mystring.end(),
        std::ostreambuf_iterator<char>(stream_object) ); 
```

你需要`<algorithm>`和`<iterator>`标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:13:23.117

您可以输出实际的字符串指针加一：

```
outputStream << (line.c_str() + 1); 
```

但是，您最好先检查字符串是否为空，否则您可能最终会访问非法指针。

如果你想输出一个子字符串，有这个[`std::string::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)函数。或者使用[`std::ostream::write`](http://en.cppreference.com/w/cpp/io/basic_ostream/write)与上述指针算法相结合的函数：

```
outputStream.write(line.c_str() + 1, 9);  /* 1st to 10th character */ 
```

对于上述情况，您必须确保字符串的长度至少为十个字符。

**注意：**除非在极端情况下，否则我个人不会使用此答案中概述的“黑客”。子字符串函数的存在是有原因的，并且是我推荐使用的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:15:50.763

我假设您正在使用 std::string ...

```
std::string str;  // contains the line
str.substr (1, str.length() - 1); // gives you what you need 
```

最好的，阿科斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:21:36.500

也许在没有第一个字符的情况下编写整个字符串的最快方法是来自@JoachimPileborg 的回答。但是如果你想从第 1 到第 10 写 10 个字符，那么最快的方法是使用`fwrite`function 而不是`fstream`.

```
fwrite( line.c_str() + 1, 1, 10, file ); 
```

请注意，您应该非常准确地使用它。您应该放心，该行有超过 10 个字符。

# php - 我应该在我的服务层中创建域对象默认值吗？

> ID：14808142
> 
> 赞同：1
> 
> 时间：2013-02-11T08:11:13.923
> 
> 标签：php, oop, design-patterns, service-layer

我正在使用 Zend Framework 构建一个 MVC 应用程序。该模型包括单独的域和映射器层，服务层位于顶部。

对于我的一些域对象，当我创建一个新实例时，我需要创建由第一个对象组成的其他域对象。例如，当我创建一个新的组织对象时，我可能会添加一个 Employee 对象（基于当前用户）和一个 Location 对象（基于当前用户的位置）。

到目前为止，我一直在父对象的构造函数中创建这些（在本例中为组织）。这没关系，但是它确实在组织和它的孩子之间创建了不必要的依赖关系。

我更愿意在服务层中创建孩子，但是如果我这样做，我会让自己陷入困境吗？

在阅读了关于服务层的 Martin Fowlers (POEAA) 章节后，我认为这归结为这是领域逻辑还是应用程序/工作流逻辑。在我看来，它是边界线......（请注意，我的服务层已经不仅仅是一个门面）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T23:11:50.220

正如我从您的描述中了解到的，目前`Employee`和`Location`都是`Organization`. 当你在构造函数中创建这个依赖时，你会在这里创建两个问题（你有点像同一根丑陋的棍子的两端）：

*   该类`Organization`与“Employee”和“Location”的名称紧密耦合

*   测试实例的行为变得非常困难`Organization`，因为您无法直接控制它的依赖关系。您无法隔离*“待测单元”*。

> [**注 A：**实际上一个组织需要一组员工/成员，最少一个。在这种情况下，从逻辑和 API 实现的位方面来看，域对象的集合似乎是一个更好的选择。]

为避免这些问题，当您必须创建复杂的对象图时，有两种解决方案：

1.  `Organization`在构建新实例时，使用工厂（由正确实施的 DIC 补充）创建类的所有需求并注入它们。

2.  创建创建所有依赖项，然后`Organization`在实例化对象时手动将它们注入。

> [**注意 B：**要在服务中创建域任何域对象，您应该为所述对象使用工厂。为了促进这一点，您必须在您实例化的任何服务的构造函数中注入域对象工厂。否则，您最终只会得到与其他类的名称耦合的类。]

选择将取决于您想在该情况和类似情况下对和实例做什么，以及您喜欢哪种风格。~~`Employee`~~ `EmployeeCollection``Location`

如果您正在对这些依赖项进行广泛且非常具体的操作，那么绝对应该单独实例化它们（通过简单的域对象工厂），然后才注入。如果您只是创建一个对象图，那么基于 DIC 的工厂将是有利的解决方案。

> [**PS：**我建议您观看[The Clean Code Talks - Don't Look For Things！](https://www.youtube.com/watch?v=RlfLCWKxHJ0)演讲。]

# javascript - $().each vs $.each vs for jQuery中的循环？

> ID：14808144
> 
> 赞同：38
> 
> 时间：2013-02-11T08:11:15.160
> 
> 标签：javascript, jquery, each

我不明白为什么会这样。

[我在这里](https://stackoverflow.com/a/2321690/859154)读到：

> 第一个**$.each**构成了启动迭代器的**单个**函数调用。
> 
> 第二个**$(foo.vals).each**进行**三个**函数调用来启动迭代器。
> 
> *   第一个是 $() ，它产生一个新的 jQuery 包装器集（不确定在此过程中进行了多少其他函数调用）。
> *   然后调用 $().each。
> *   最后，它对 jQuery.each 进行内部调用以启动迭代器。
> 
> 在您的示例中，至少可以说差异可以忽略不计。但是，在嵌套使用场景中，您可能会发现性能成为一个问题。
> 
> 最后，jQuery Enlightenment 中的 Cody Lindley 不建议将 $.each 用于大于 1000 的迭代，因为涉及到函数调用。使用普通的 for( var i = 0... 循环。

所以我用这个 jsperf 测试了它：

*（任务：找到选中复选框的Tr，并为该tr着色。）*

这是**[jsbin](http://jsbin.com/otecid/2/edit)**

但是看看**[jsperf](http://jsperf.com/asdasda223)**

出乎所有人的意料，事实**恰恰相反**。（铬和FF和IE）

![在此处输入图像描述](../Images/9e7c4cc34879d51e3275b2f0580e0651.png)

使用`$().each`( 调用三种方法的人是最快的等等..

这里发生了什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-11T08:56:03.820

您的测试太重，无法真正确定三个循环选项之间的实际差异。

如果您想测试循环，那么您需要尽最大努力从测试中删除尽可能多的不相关工作。

就目前而言，您的测试包括：

*   DOM 选择
*   DOM 遍历
*   元素突变

与循环本身相比，所有这些都是相当昂贵的操作。删除多余的东西时，循环之间的差异更加明显。

[http://jsperf.com/asdasda223/4](http://jsperf.com/asdasda223/4)

在 Firefox 和 Chrome 中，`for`循环比其他循环快 100 倍以上。

![在此处输入图像描述](../Images/551ad69fd5918f09f5ddc6a93561daa8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T08:40:03.013

好

*   `$.each()`是一个正在执行的 jQuery 函数，它将用于迭代您的列表，因此开销应该是 jQuery 函数以及为列表中的每个项目调用该函数的开销。在这种情况下
*   `$(thing).each()`这背后的想法是`$(thing)`创建一个 jQuery 实例，然后迭代这个实例（`.each`作用于那个实例）。在你的情况下，因为你调用它的实例已经是一个 jQuery 对象，所以开销是最小的（你是一个实例，哦，是的，你是）。
*   `for()`在这种情况下，根本没有开销，除了在每次迭代中查找列表的长度。

考虑做：

```
var l = g.length;
for (var i=0;i<l;i++) {
    // code;
} 
```

根据您的 HTML，大部分时间很可能在 Sizzle Jquery 解析器中找到文档中的选择器。

另请注意，我认为您的选择器不是最好的，除非最近情况发生了重大变化 jQuery 选择器是从右到左评估的，考虑通过`.find()`对 id 引用的第一个标签下的所有内容执行 a 来限制选择器的范围，因为它会然后只搜索文档的一个子集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:24:52.963

您的“任务”的不同方法[http://jsfiddle.net/ADMnj/17/](http://jsfiddle.net/ADMnj/17/)

但我想性能问题来自于你没有在正确的问题上声明选择器

```
#t tr input:checkbox:checked 

VS

#t tr :checkbox:checked 
```

检查复选框是否被选中的正确方法是这样调用它

```
#t tr input[checked="checked"] 
```

[W3.ORG 的选择器列表见 E[foo]](http://www.w3.org/TR/CSS2/selector.html)

最后但并非最不重要的一点也是最快的也是代码最短的代码，这可能是您从 3 行代码与 4 行和 5 行代码获得的性能略有不同，但无法证明这一事实

# ios - 片段着色器的输入纹理是否会随着着色器的运行而改变？

> ID：14808150
> 
> 赞同：2
> 
> 时间：2013-02-11T08:11:51.203
> 
> 标签：ios, opengl-es, glsl, fragment-shader, gpuimage

我正在尝试使用我们自己的[Brad Larson](https://stackoverflow.com/users/19679/brad-larson)的[GPUImage](https://github.com/BradLarson/GPUImage)框架在 GLSL 的片段着色器中实现[阿特金森抖动算法。](http://mike.teczno.com/notes/atkinson.html)（这可能是不可能的事情之一，但我还没有足够的知识来确定这一点，所以我还是继续做下去。）

Atkinson 算法将灰度图像抖动为在原始 Macintosh 上看到的纯黑色和白色。基本上，我需要调查我的像素周围的几个像素，并确定每个像素与纯黑色或纯白色的距离有多远，并使用它来计算累积的“误差”；该错误值加上给定像素的原始值决定了它应该是黑色还是白色。问题是，据我所知，误差值（几乎？）总是零或不知不觉地接近它。我在想可能发生的是我正在采样的纹理与我正在写入的纹理相同，因此错误最终为零（或接近它），因为我的大多数/所有像素' m 采样已经是黑色或白色。

这是正确的，还是我从中采样和写入的纹理不同？如果是前者，有没有办法避免这种情况？如果是后者，那么您是否能够发现此代码的其他错误？'因为我很难过，也许不知道如何正确调试它。

```
varying highp vec2 textureCoordinate;
uniform sampler2D inputImageTexture;

uniform highp vec3 dimensions;

void main()
{
    highp vec2 relevantPixels[6];

    relevantPixels[0] = vec2(textureCoordinate.x, textureCoordinate.y - 2.0);
    relevantPixels[1] = vec2(textureCoordinate.x - 1.0, textureCoordinate.y - 1.0);
    relevantPixels[2] = vec2(textureCoordinate.x, textureCoordinate.y - 1.0);
    relevantPixels[3] = vec2(textureCoordinate.x + 1.0, textureCoordinate.y - 1.0);
    relevantPixels[4] = vec2(textureCoordinate.x - 2.0, textureCoordinate.y);
    relevantPixels[5] = vec2(textureCoordinate.x - 1.0, textureCoordinate.y);

    highp float err = 0.0;

    for (mediump int i = 0; i < 6; i++) {
        highp vec2 relevantPixel = relevantPixels[i];
        // @todo Make sure we're not sampling a pixel out of scope. For now this
        // doesn't seem to be a failure (?!).
        lowp vec4 pointColor = texture2D(inputImageTexture, relevantPixel);
        err += ((pointColor.r - step(.5, pointColor.r)) / 8.0);
    }

    lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);
    lowp float hue = step(.5, textureColor.r + err);

    gl_FragColor = vec4(hue, hue, hue, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:23:18.387

这里有一些问题，但最大的问题是 Atkinson 抖动无法在片段着色器中以有效的方式执行。这种抖动是一个顺序过程，取决于它上面和后面的片段的结果。片段着色器只能写入 OpenGL ES 中的一个片段，而不是您指向的 Python 实现中需要的相邻片段。

有关潜在的着色器友好抖动实现，请参阅问题[“像素着色器的 Floyd–Steinberg 抖动替代方案”。](https://stackoverflow.com/questions/4057970/floydsteinberg-dithering-alternatives-for-pixel-shader)

您通常也不能写入和读取相同的纹理，尽管 Apple 确实在 iOS 6.0 中添加了一些扩展，允许您写入帧缓冲区并在同一渲染通道中读取写入的值。

至于为什么您会看到奇怪的错误结果，GPUImage 过滤器中的坐标系被标准化为 0.0 - 1.0 的范围。当您尝试通过添加 1.0 来偏移纹理坐标时，您正在读取纹理的末尾（然后默认情况下将其限制为边缘的值）。这就是为什么你看到我在其他需要从相邻像素采样的过滤器中使用 texelWidth 和 texelHeight 值作为制服。这些计算为整个图像宽度和高度的一部分。

我也不建议在片段着色器中进行纹理坐标计算，因为这会导致读取依赖纹理并真正减慢渲染速度。如果可以，将其移至顶点着色器。

最后，要回答您的标题问题，通常您无法在读取纹理时对其进行修改，但 iOS 纹理缓存机制有时允许您在着色器通过场景工作时覆盖纹理值。这通常会导致不良的撕裂伪影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T12:26:52.283

@GarrettAlbright 对于 1-Bit Camera 应用程序，我最终使用原始内存指针和（相当）严格优化的 C 代码简单地迭代图像数据。我研究了 NEON intrisics 和 Accelerate 框架，但任何并行性确实会破坏这种性质的算法，所以我没有使用它。

I also toyed around with the idea to do a decent enough aproximation of the error distribution on the GPU first, and then do the thresholding in another pass, but I never got anything but a rather ugly noise dither from those experiments. There are [some](http://cs.wellesley.edu/~pmetaxas/ei99.pdf) [papers](http://cstar.iiit.ac.in/~kkishore/hybrid/HybridDithering.pdf) around covering other ways of approaching diffusion dithering on the GPU.

# c++ - 如何用 Boost::Python 封装 C++ OpenCV 代码？

> ID：14808152
> 
> 赞同：3
> 
> 时间：2013-02-11T08:12:00.127
> 
> 标签：c++, python, opencv, boost, makefile

我想用 包装我的 C++ OpenCV 代码`boost::python`，为了学习如何做，我尝试了一个玩具示例，其中

*   我使用[Boost.Numpy](https://github.com/ndarray/Boost.NumPy)项目为我提供`boost::numpy::ndarray`.

*   要包装的 C++ 函数`square()`采用 a`boost::numpy::ndarray`并通过对其中的每个元素进行平方来修改它。

*   导出的 Python 模块名称称为`test`.

*   `square()`C++ 函数作为`square`导出模块中的名称导出。

*   我**没有**使用 bjam，因为 IMO 它太复杂了，无论如何都对我不起作用。我正在使用好旧的`make`.

现在，这是代码：

```
// test.cpp
#include <boost/python.hpp>
#include <boost/numpy.hpp>
#include <boost/scoped_array.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>

namespace py = boost::python;
namespace np = boost::numpy;

void square(np::ndarray& array)
{
    if (array.get_dtype() != np::dtype::get_builtin<int>())
    {
        PyErr_SetString(PyExc_TypeError, "Incorrect array data type.");
        py::throw_error_already_set();
    }
    size_t rows = array.shape(0), cols = array.shape(1);
    size_t stride_row = array.strides(0) / sizeof(int), 
           stride_col = array.strides(1) / sizeof(int);
    cv::Mat mat(rows, cols, CV_32S);
    int *row_iter = reinterpret_cast<int*>(array.get_data());
    for (int i = 0; i < rows; i++, row_iter += stride_row)
    {
        int *col_iter = row_iter;
        int *mat_row = (int*)mat.ptr(i);
        for (int j = 0; j < cols; j++, col_iter += stride_col)
        {
            *(mat_row + j) = (*col_iter) * (*col_iter); 
        }
    }

    for (int i = 0; i < rows; i++, row_iter += stride_row)
    {
        int *col_iter = row_iter;
        int *mat_row = (int*)mat.ptr(i);
        for (int j = 0; j < cols; j++, col_iter += stride_col)
        {
            *col_iter = *(mat_row + j);
        }
    }
}

BOOST_PYTHON_MODULE(test)
{
   using namespace boost::python;
   def("square", square);
} 
```

这是Makefile：

```
PYTHON_VERSION = 2.7
PYTHON_INCLUDE = /usr/include/python$(PYTHON_VERSION)

BOOST_INC = /usr/local/include
BOOST_LIB = /usr/local/lib
OPENCV_LIB = $$(pkg-config --libs opencv)
OPENCV_INC = $$(pkg-config --cflags opencv)

TARGET = test

$(TARGET).so: $(TARGET).o
        g++ -shared -Wl,--export-dynamic \
        $(TARGET).o -L$(BOOST_LIB) -lboost_python \
        $(OPENCV_LIB) \
        -L/usr/lib/python$(PYTHON_VERSION)/config -lpython$(PYTHON_VERSION) \
        -o $(TARGET).so

$(TARGET).o: $(TARGET).cpp
        g++ -I$(PYTHON_INCLUDE) $(OPENCV_INC) -I$(BOOST_INC) -fPIC -c $(TARGET).cpp 
```

使用这个方案，我可以输入`make`并被`test.so`创建。但是当我尝试导入它时，

```
In [1]: import test
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-73ae3ffe1045> in <module>()
----> 1 import test

ImportError: ./test.so: undefined symbol:        _ZN5boost6python9converter21object_manager_traitsINS_5numpy7ndarrayEE10get_pytypeEv

In [2]: 
```

这是一个链接器错误，我似乎无法修复。任何人都可以帮我解决发生了什么吗？**您是否有（链接到）已经集成了 OpenCV、numpy 和 Boost.Python 的代码，而没有 Py++ 之类的东西？**.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T05:29:39.540

好的，我解决了这个问题。这是一个简单的问题，但昏昏欲睡的大脑和份量`bjam`让我忽略了它。在 中`Makefile`，我忘记将`-lboost_numpy`Boost.Numpy 库链接到我的库。所以，修改后的`Makefile`样子是这样的：

```
PYTHON_VERSION = 2.7
PYTHON_INCLUDE = /usr/include/python$(PYTHON_VERSION)

BOOST_INC = /usr/local/include
BOOST_LIB = /usr/local/lib
OPENCV_LIB = $$(pkg-config --libs opencv)
OPENCV_INC = $$(pkg-config --cflags opencv)

TARGET = test

$(TARGET).so: $(TARGET).o
        g++ -shared -Wl,--export-dynamic \
        $(TARGET).o -L$(BOOST_LIB) -lboost_python -lboost_numpy \
        $(OPENCV_LIB) \
        -L/usr/lib/python$(PYTHON_VERSION)/config -lpython$(PYTHON_VERSION) \
        -o $(TARGET).so

$(TARGET).o: $(TARGET).cpp
        g++ -I$(PYTHON_INCLUDE) $(OPENCV_INC) -I$(BOOST_INC) -fPIC -c $(TARGET).cpp 
```

# magento - 如何在magento中将数据插入数据库

> ID：14808154
> 
> 赞同：0
> 
> 时间：2013-02-11T08:12:16.317
> 
> 标签：magento, insert, magento-1.7

[我用这个url](http://magento4u.wordpress.com/2009/06/08/create-new-module-helloworld-in-magento/)创建了一个新模块：

在我的模块中，我创建了一个注册表单。

所以现在我想将输入的数据插入我的注册表单。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:45:52.243

看看这些关于模型和数据库访问的说明：http: [//www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-b​​asics](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-5-magento-models-and-orm-basics)

这应该让你启动并运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:02:21.157

您需要一个带有自定义模型和该表集合的自定义数据库表。有很多方法，但这是 magento 方法。

此链接将帮助您[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/custom_module_with_custom_database_table](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/custom_module_with_custom_database_table)

# c++ - 转换字符串大小写的函数？

> ID：14808155
> 
> 赞同：0
> 
> 时间：2013-02-11T08:12:16.443
> 
> 标签：c++, string

c++ 中是否有一个函数可以将字符串从小写转换为大写，反之亦然？我需要比较两个不区分大小写的字符串，我只能转换其中一个字符串，而另一个字符串需要保持不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:14:32.653

您可以将[`std::toupper`](http://en.cppreference.com/w/cpp/string/byte/toupper)或[`std::tolower`](http://en.cppreference.com/w/cpp/string/byte/tolower)与 结合使用。~~`std::for_each`~~ [`std::transform`](http://en.cppreference.com/w/cpp/algorithm/transform)

```
#include <cctype>
#include <algorithm>
#include <string>
#include <iostream>

int main()
{
  std::string s = "Hello, World!";
  std::transform(s.begin(), s.end(), s.begin(), [](char c) {return std::toupper(c);});
  std::cout << s << "\n";
} 
```

**编辑**

> 我需要比较两个不区分大小写的字符串，我只能转换其中一个字符串，而另一个字符串需要保持不变。

您可以定义一个对两个字符进行不区分大小写比较的函数，然后将其用于[`std::equal`](http://en.cppreference.com/w/cpp/algorithm/equal)：

```
bool case_insensitive_comp(char lhs, char rhs)
{
  return std::toupper(lhs) == std::toupper(rhs);
}

int main()
{
  std::string s1 = ....;
  std::string s2 = ....;
  bool match = std::equal(s1.begin(), s1.end(), s2.begin(), case_insensitive_comp); 
} 
```

您可能必须在调用之前检查字符串的长度是否相同`std::equal`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:15:11.203

可以将[std::transform](http://en.cppreference.com/w/cpp/algorithm/transform)与[std::toupper](http://en.cppreference.com/w/cpp/string/byte/toupper)或[std::tolower一起使用](http://en.cppreference.com/w/cpp/string/byte/tolower)

```
std::string s("hello, world!");
std::transform(s.begin(), s.end(), s.begin(), (int (*)(int))std::toupper); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:15:35.820

您可以使用：

*   `std::tolower`^([单击](http://en.cppreference.com/w/cpp/string/byte/tolower))并`std::toupper` ^([单击](http://en.cppreference.com/w/cpp/string/byte/toupper))_`std::transform` ^([_](http://en.cppreference.com/w/cpp/algorithm/transform))
*   提升，就像在[这个问题中一样](https://stackoverflow.com/questions/735204/convert-a-string-in-c-to-upper-case)
*   正如您在问题中建议的那样，只需遍历字符串即可。要转换字符串中的*每个*字符，您将*不得不*遍历它。

# java - JPARepository 对 @MappedSuperClass 基类的 findAll 查询只返回基类的条目

> ID：14808156
> 
> 赞同：0
> 
> 时间：2013-02-11T08:12:16.407
> 
> 标签：java, hibernate, jpa

我有一个这样的 JPA MappedSuperClass：

```
@MappedSuperclass
public abstract class Foo extends AbstractPersistable<Long> {       
private Status status;
@ManyToOne(cascade=CascadeType.ALL)
private User owner; 
```

以及继承自Foo的两个子类，分别定义如下：

```
@Entity
@Table(name="BARFOO")
@EqualsAndHashCode(callSuper=true)
@PrimaryKeyJoinColumn(name="id", referencedColumnName="id")
public @Data class Bar extends Foo {
  private String beer; 
```

和

```
@Entity
@Table(name="BLUBFOO")
@EqualsAndHashCode(callSuper=true)
@PrimaryKeyJoinColumn(name="id", referencedColumnName="id")
public @Data class Blub extends Foo {
private String cider; 
```

现在，当我将一些数据保存在 Bar 或 Blub 类型的 Object 中时，我希望 myRepository.findAll 实际上从 MappedSuperClass 返回苹果酒或啤酒以及状态和所有者。相反，它只返回苹果酒或啤酒——子类的属性。

我的推理是否有错误，或者我完全错过了什么？

这是我的 BarRepository：

```
public interface BarRepository extends JpaRepository<Bar, Long> { 
} 
```

这就是我的 BarService 中的 findAll() 是如何“实现”的：

```
@Inject
private BarRepository barRepository;
public Iterable<Bar> findAll() {
  return barRepository.findAll();
} 
```

我的 Blub 子类也有两者。感谢任何提示，当我错过任何最佳实践时，如果您再次让我走上正确的轨道，我会很高兴。

# c# - 智能设备项目中的扩展，.net 2.0

> ID：14808157
> 
> 赞同：1
> 
> 时间：2013-02-11T08:12:18.670
> 
> 标签：c#, visual-studio-2008, .net-2.0, extension-methods, smart-device

我正在使用`Visual Studio 2008`. 我有一个名为 Extensions 的静态类，我想在其中编写扩展。我写了以下扩展

```
static public  Bitmap ToImage(this byte[] blob)
{
    Bitmap image;
    using (MemoryStream stream = new MemoryStream(blob))
    {
        image = new Bitmap(stream);
    }
    return image;
} 
```

并得到以下错误

![在此处输入图像描述](../Images/ead598b1bf29a37653987b4be6921b69.png)

我有在 .net 4.0 中添加扩展方法的经验，但是在这个项目中我遇到了麻烦。有什么特别的我错过了吗？

# r - R：用于计算新变量 R 代码

> ID：14808159
> 
> 赞同：0
> 
> 时间：2013-02-11T08:12:21.007
> 
> 标签：r

```
 id time bord    sex pbirth
              132 1255    1 Female     17
              132 1288    0      0     33
              172  985    1 Female     24
              172 1016    2 Female     31
              172 1054    3   Male     38
              172 1288    0      0    234 
```

但是，想找到这个数据。我想通过以性别为条件来添加两个新变量。如果性别连续等于女性，则在下一行`nfemale=1`，如果性别等于男性，则在下一行`nmale=1`。它将按 id 拆分数据。

```
 id time bord    sex pbirth nfemale nmale
              132 1255    1 Female     17   0       0
              132 1288    0      0     33   1       0
              172  985    1 Female     24   0       0
              172 1016    2 Female     31   1       0
              172 1054    3   Male     38   2       0
              172 1288    0      0    234   2       1 
```

通过 R 代码。其中 ,`sex=0`表​​示缺失值/没有观察值，`nfemale`=No。在此时间点之前的女性和 `nmale`= 否。在这个时间点之前的女性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:30:55.457

您可以使用包中的`ddply`功能`plyr`。假设`dat`是您的数据框的名称：

```
library(plyr)
ddply(dat, .(id), transform,
      nFemale = c(0, head(cumsum(sex == "Female"), -1)),
      nMale = c(0, head(cumsum(sex == "Male"), -1)))

   id time bord    sex pbirth nFemale nMale
1 132 1255    1 Female     17       0     0
2 132 1288    0      0     33       1     0
3 172  985    1 Female     24       0     0
4 172 1016    2 Female     31       1     0
5 172 1054    3   Male     38       2     0
6 172 1288    0      0    234       2     1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T08:33:06.180

```
 dat$nfemale <- cumsum( c(0, dat$sex[1:(nrow(dat)-1)] =="Female"))
 dat$nmale <- cumsum( c(0, dat$sex[1:(nrow(dat)-1)] =="Male"))
 dat
#-----
   id time bord    sex pbirth nfemale nmale
1 132 1255    1 Female     17       0     0
2 132 1288    0      0     33       1     0
3 172  985    1 Female     24       1     0
4 172 1016    2 Female     31       2     0
5 172 1054    3   Male     38       3     0
6 172 1288    0      0    234       3     1 
```

在仅在示例中而不在说明中明显的类别中执行此操作：

```
temp <- do.call(rbind, by(dat, dat$id, 
    function(d) data.frame(nfemale=cumsum( c(0, d$sex[1:(nrow(d)-1)] =="Female")), 
                           nmale=cumsum( c(0, d$sex[1:(nrow(d)-1)] =="Male")) ) ) )
      nfemale nmale
132.1       0     0
132.2       1     0
172.1       0     0
172.2       1     0
172.3       2     0
172.4       2     1

cbind(dat, temp) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T08:34:49.117

回到这里我的解决方案很臭，但无论如何我都会把它扔掉（干得好 DWin）：

```
L1 <- split(dat, dat$id)
do.call(rbind.data.frame, lapply(L1, function(x){
    x[, "nfemale"] <- c(0, head(cumsum(x[, "sex"] == "Female"), -1))
    x[, "nmale"] <- c(0, head(cumsum(x[, "sex"] == "Male"), -1))
    x
})) 
```

# python - Pygame 课程难度

> ID：14808160
> 
> 赞同：0
> 
> 时间：2013-02-11T08:12:22.017
> 
> 标签：python, class, pygame

我知道我之前发过帖子，但这次我希望能真正梳理出我的代码的所有基础知识，并希望能更好地理解类。知道我对课程非常缺乏经验，所以很多这些都是非常愚蠢的东西。这是我的代码

```
class Player(pygame.sprite.Sprite):
    def __init__(self):
        global player
        pygame.sprite.Sprite.__init__(self)
        self.pos=(350,200)
        self.image=pygame.image.load("arrowtest.png").convert()
        self.rect=self.image.get_rect()
        screen=pygame.display.get_surface()
        self.area=screen.get_rect()
        self.speed=10
        self.state="still"
        self.reinit() 
```

我有一个

```
player = Player() 
```

在我的主循环开始时

我的 blit 是

```
screen.blit(player.image, player.pos) 
```

我解决了这个问题，但现在我的问题是当涉及到我使用函数来调整精灵角度的部分时。在我的球员班是这个

```
def angleplayer(self):
    mouse_pos=pygame.mouse.get_pos()
    dx=mouse_pos[0]-player_x
    dy=mouse_pos[1]-player_y
    rads=math.atan2(-dy, dx)
    rads %= 2*pi
    angle = math.degrees(rads)
    print angle
    rot_player.image=pygame.transform.rotate(player.image, angle-90) 
```

但是当我尝试使用它时，例如

```
if event.type == pygame.KEYDOWN:
        angleplayer() 
```

它说没有定义angleplayer。

我猜答案会相当简单，但很期待。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:54:06.827

这意味着`angleplayer`当前范围内没有任何功能。

由于该`angleplayer`函数是您的`Player`类的一部分，因此您必须通过该类的实例调用它。

```
if event.type == pygame.KEYDOWN:
    player.angleplayer() 
```

（您没有显示完整的代码，我只是想`player`可以在这里访问。）

# quilt - 被子：系列文件的发布和调试版本

> ID：14808161
> 
> 赞同：2
> 
> 时间：2013-02-11T08:12:22.380
> 
> 标签：quilt

有什么合适的方法可以用被子应用不同系列的补丁。我需要它来发布和调试系列文件的版本。我想相应地使用 series.debug 或 series.release 文件进行调试或发布版本的 linux 内核。
或者也许还有另一种合适的方法来应用不同的补丁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:32:14.973

我在被子手册页中找到了答案：

```
quilt recognizes the following variables:  
...  
QUILT_SERIES - The name of the series file, defaulting to "series". 
               Unless an absolute path is used, the search algorithm 
               described above applies. 
```

# iphone - 以相同的方法插入子视图并更改另一个视图的位置

> ID：14808162
> 
> 赞同：0
> 
> 时间：2013-02-11T08:12:23.273
> 
> 标签：iphone, objective-c

我正在尝试将子视图（`UITextField`）添加到视图并以相同的方法更改 a 的 frame 属性，`UITextView`但它没有按我的预期工作。这是代码：

```
UITextField *textField = [[UITextField alloc] init];
textField.backgroundColor = [UIColor redColor];
textField.frame = CGRectMake(0, 120, 240, 40);

[UIView beginAnimations:@"MoveView" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView setAnimationDuration:0.5f];
self.tvContent.frame = CGRectMake(0, 80, self.tvContent.frame.size.width, self.tvContent.frame.size.height);
[UIView commitAnimations];
[self.view insertSubview:textField aboveSubview:self.tvContent]; 
```

注意： tvContent 是`UITextView`我要重新定位的对象。

我面临的问题是，*如果*最后一行代码（insertSubview）到位，`UITextView`则根本没有移动。虽然确实出现了。但是，如果我删除最后一行，textview 会很好地改变它的位置。*`The UITextField`*

 *我也尝试过不使用动画，只设置 self.tvContent 的 frame 属性，并且发生了相同的行为。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:31:36.193

这样做，

```
UITextField *textField = [[UITextField alloc] init];
textField.backgroundColor = [UIColor redColor];
textField.frame = CGRectMake(0, 120, 240, 40);

[UIView beginAnimations:@"MoveView" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView setAnimationDuration:0.5f];
self.tvContent.frame = CGRectMake(0, 80, self.tvContent.frame.size.width, self.tvContent.frame.size.height);
[UIView setAnimationDidStopSelector:@selector(animationFinish)];
[UIView commitAnimations];

-(void)animationFinish {
[self.view insertSubview:textField aboveSubview:self.tvContent];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:36:20.250

你还在使用好`beginAnimations`东西有什么原因吗？

这会做同样的事情：

```
[UIView animateWithDuration:0.5 animations:^(void) {
    self.tvContent.frame = CGRectMake(0, 80, self.tvContent.frame.size.width, self.tvContent.frame.size.height);
} completion:^(BOOL finished) {
    [self.view addSubview:textField];
}]; 
```

编辑：如果你只是 addSubView 它会发生什么？*

# powershell - 使用 powershell 脚本设置 Exchange 2010 日历权限

> ID：14808163
> 
> 赞同：0
> 
> 时间：2013-02-11T08:12:24.513
> 
> 标签：powershell, permissions, calendar, exchange-server-2010

我找到了以下脚本并对其稍作修改，以便为用户设置默认日历权限，而不是为资源邮箱设置默认日历权限。看起来它可以正常运行，但你能看一下，看看你是否发现任何明显的问题吗？

```
$mailboxes = Get-Mailbox | where {$_.ResourceType -ne "Room"}

$mailboxes | foreach {
    $user=$_.Alias
    $path=$user+”:\Calendar”
    Set-MailboxFolderPermission –Identity $path -User Default -AccessRights Reviewer
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T18:36:21.203

```
$mailboxes = Get-Mailbox -ResultSize Unlimited | Where-Object {$_.ResourceType -ne 'Room'}
$mailboxes | Foreach-Object { Set-MailboxFolderPermission –Identity ($_.Alias+":\Calendar") -User Default -Accessrights Reviewer }
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:11:50.980

对我来说看起来不错（未经测试）。我会添加 ResultSize 参数来绕过 1000 个对象的限制。看起来你可以缩短一点。在对所有邮箱对象运行之前，在测试用户上尝试此操作。

```
$mailboxes = Get-Mailbox -ResultSize Unlimited | Where-Object {$_.ResourceType -ne 'Room'}
$mailboxes | Foreach-Object { Set-MailboxFolderPermission –Identity ($_":\Calendar") -User Default -Accessrights Reviewer } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-01T20:07:13.440

$mailboxes = 获取邮箱 -ResultSize Unlimited | Where-Object {$ *.ResourceType -ne 'Room'} $mailboxes | Foreach-Object { Set-MailboxFolderPermission $* ":\Calendar" -User Default -Accessrights Reviewer }

# assembly - 我正在尝试为 MIPS 程序集中的 N 个结构自动分配内存

> ID：14808168
> 
> 赞同：0
> 
> 时间：2013-02-11T08:13:01.513
> 
> 标签：assembly, mips

我有一个文本文件，我目前正在复制并粘贴到我的控制台中，第一行是我必须创建的结构的数量，然后每连续三行是我试图放入我的三个数据结构。是否可以为 N 个结构（每个结构都有一个字符串和两个浮点数）正确分配内存，然后将它们存储起来，以便稍后在 MIPS 中访问和排序它们？我在解决这个问题时遇到了很多麻烦。

感谢您的任何建议。我会添加代码，但我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:18:54.110

如果您在某种操作系统或其他提供内存管理的环境下运行，您可以使用这些服务来动态分配内存（例如`sbrk`SPIM 中的系统调用）。

否则（大小允许）最简单的方法是通过调整堆栈指针来使用堆栈：`subu $sp, $sp, $t0`将在堆栈上分配`$t0`字节。确保`$t0`是字长 (4) 的倍数，并且在不再需要时释放此内存。警告：分配的块位于当前函数的框架中，因此您不能将其返回给调用者（但可以将其传递给被调用的函数）。

# sendmessage - 将鼠标事件发送到非活动和隐藏的窗口/WPF 窗体

> ID：14808174
> 
> 赞同：2
> 
> 时间：2013-02-11T08:13:40.917
> 
> 标签：sendmessage, postmessage, user32, microsoft-ui-automation

我正在开发一个需要在 Win32/WPF 窗口上生成鼠标事件的应用程序，该事件可能会在桌面上被最小化或隐藏。

我已经尝试过 user32.dll APIs SendInput、SendMessage、PostMessage 等。这些只有当窗口在桌面上可见时才有效。您知道任何适用于隐藏/非活动窗口的方法吗？

我也尝试过 .NET 的 UI 自动化库。在这种情况下，将一个窗口带到前面，或者我无法获得控件的可点击点。

有什么想法可以继续吗？如果我可以继续？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:06:47.963

我不知道您是否仍然对答案感兴趣（我只是出于愚蠢的运气偶然发现了这个问题），但是您是否尝试过制作全局 windows 挂钩？

我对如何正确实施一个没有诚实的想法；但我知道你应该能够向 Windows 添加一个全局窗口挂钩，以监听你想要的任何事件（应该包括鼠标和键盘事件！）

祝你好运...

# arm - arm交叉编译错误，libdaemon.h没有那个文件或目录

> ID：14808176
> 
> 赞同：0
> 
> 时间：2013-02-11T08:13:51.883
> 
> 标签：arm, cross-compiling, configure

我正在尝试为 arm-mv5sft-linux-gnueabi 处理器交叉编译一些 C++ 项目，我已按以下方式设置了该项目的 ./configure：

```
./configure --build=i686-linux --host=arm-mv5sft-linux-gnueabi --target=arm-mv5sft-linux-gnueabi CC=~/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-gcc CXX=~/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-g++ LD=~/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi/bin/arm-mv5sft-linux-gnueabi-ld LDFLAGS=-L/usr/include/libdaemon --with-sysroot=/home/thales/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi --prefix=/justInstalled --disable-shared --enable-threads=posix --enable-long-long --enable-target-optspace --disable-nls --with-float=soft --disable-multilib --enable-symvers=gn 
```

配置成功，但是当我做时出现包含错误

```
libtool: link: warning: library `/home/j/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/../lib/gcc/arm-mv5sft-linux-gnueabi/4.3.2/../../../../arm-mv5sft-linux-gnueabi/lib/libstdc++.la' was moved.
  CXX    Main.o
Main.cpp:28:30: error: libdaemon/daemon.h: No such file or directory
Main.cpp: In function 'int __daemon_run()':
Main.cpp:175: error: 'daemon_retval_send' was not declared in this scope
.
.
.
make[1]: Leaving directory `/home/j/ibrdtn-svn/daemon'
make: *** [all-recursive] Error 1 
```

如果我去文件 Main.cpp 看看发生了什么，它抱怨 libdeamon 的包含

```
...
#include "config.h"
#include "Configuration.h"
#include <ibrcommon/Logger.h>
#include <ibrcommon/data/File.h>

#ifdef HAVE_LIBDAEMON
#include <libdaemon/daemon.h>
#endif

#include <string.h>
#include <csignal>
#include <set>
... 
```

我已经检查了我已经安装了 libdeamon

```
@ubuntu:~$ pkg-config --libs libdaemon
-ldaemon
@ubuntu:~$locate libdaemon
/usr/include/libdaemon
/usr/include/libdaemon/daemon.h
/usr/include/libdaemon/dexec.h
/usr/include/libdaemon/dfork.h
/usr/include/libdaemon/dlog.h
/usr/include/libdaemon/dnonblock.h
/usr/include/libdaemon/dpid.h
/usr/include/libdaemon/dsignal.h
/usr/lib/libdaemon.a
/usr/lib/libdaemon.so
/usr/lib/libdaemon.so.0
/usr/lib/libdaemon.so.0.5.0
/usr/lib/pkgconfig/libdaemon.pc 
```

为什么包含错误？我试图包括使用

```
./configure (as before) LDFLAGS=-llibdeamon (as before) 
```

但是配置告诉我有一个错误，我必须阅读 conf.log，上面写着

```
/home/j/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/../lib/gcc/arm-mv5sft-linux-gnueabi/4.3.2/../../../../arm-mv5sft-linux-gnueabi/bin/ld: cannot find -llibdeamon
collect2: ld returned 1 exit status 
```

任何想法将不胜感激！

提前致谢，

问候

编辑

我试图交叉编译 libdaemon 库但我无法实现，我已经下载了 libdaemon 源[链接](http://0pointer.de/lennart/projects/libdaemon/libdaemon-0.14.tar.gz)，解压后我转到代码所在的目录并执行 `./configure --build=i686-linux --host=arm-mv5sft-linux-gnueabi --target=arm-mv5sft-linux-gnueabi CC=~/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-gcc CXX=~/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-g++ LD=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi/bin/arm-mv5sft-linux-gnueabi-ld --prefix=/usr`

最后通过执行安装库

```
make install DESTDIR=/home/t/libdaemon-0.14 
```

但是，当我像这样重新启动主项目的配置时

```
./configure --build=i686-linux --host=arm-mv5sft-linux-gnueabi --target=arm-mv5sft-linux-gnueabi CC=~/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-gcc CXX=~/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/arm-mv5sft-linux-gnueabi-g++ LD=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi/bin/arm-mv5sft-linux-gnueabi-ld CCPFLAGS=-I/home/t/libdaemon-0.14/usr/include LDFLAGS=-L/home/t/libdaemon-0.14/lib --with-sysroot=/home/t/s/arm-mv5sft-linux-gnueabi/SW3.2p1/arm-mv5sft-linux-gnueabi --prefix=/justInstalled --disable-shared --enable-threads=posix --enable-long-long --enable-target-optspace --disable-nls --with-float=soft --disable-multilib --enable-symvers=gnu 
```

我在这篇文章的开头仍然遇到同样的错误......我做错了什么？

提前致谢

编辑2：

我想我现在的问题是，libdeamon 没有为 arm 交叉编译，我不明白为什么在交叉编译库 libdeamon 后我检查了该库没有为 arm 交叉编译，它仍然是为构建可以看到英特尔

```
:~/libdaemon-0.14$ file -F usr/*/*.*
usr/lib/libdaemon.lausr/lib/libdaemon.a       libtool library file, 
usr/lib/libdaemon.sousr/lib/libdaemon.a       symbolic link to `libdaemon.so.0.5.0'
usr/lib/libdaemon.so.0usr/lib/libdaemon.a     symbolic link to `libdaemon.so.0.5.0'
usr/lib/libdaemon.so.0.5.0usr/lib/libdaemon.a ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xe4959941fb153e1dec5ec84f798dc32928219ae2, not stripped 
```

如果我尝试使用“交叉编译”库编译主项目，我会得到这个

```
libtool: link: warning: library `/home/j/s/arm-mv5sft-linux-gnueabi/SW3.2p1/bin/../lib/gcc/arm-mv5sft-linux-gnueabi/4.3.2/../../../../arm-mv5sft-linux-gnueabi/lib/libstdc++.la' was moved.
/home/j/libdaemon-0.14/usr/lib/libdaemon.so: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
make[3]: *** [dtnd] Error 1 
```

那我该怎么办？？

# python - 如何检测使用 python 脚本安装的 Visual Studio 版本

> ID：14808189
> 
> 赞同：0
> 
> 时间：2013-02-11T08:14:47.677
> 
> 标签：python

make系统使用python。autobuilders 是 10，但在开发中是 11.0。动态地执行此操作会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:43:52.187

看看[这个 How-To](http://www.mztools.com/articles/2008/MZ2008003.aspx)，然后使用[标准库中的这个](http://docs.python.org/2/library/_winreg.html)来读取特定的键。

尝试：

```
import _winreg

key = "SOFTWARE\Microsoft\VisualStudio\%s"

possible_versions = ["10.0", "11.0"]
installed_versions = []

for v in possible_versions:
    try:
        _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, key%v, 0, _winreg.KEY_ALL_ACCESS)
        installed_versions.append(v)
    except Exception, e:
        pass

print installed_versions 
```

这给了我

```
['10.0'] 
```

# objective-c - 来自字符串的 URL 给出 null

> ID：14808192
> 
> 赞同：0
> 
> 时间：2013-02-11T08:15:04.090
> 
> 标签：objective-c, macos, cocoa

我有一个给出路径的字符串，还有一个将参数附加到它的字符串。当我把它们放在一个字符串中并显示时，我得到了正确的格式。如果我尝试将整个字符串放在 NSURL 中，它会显示 NULL。获取它的格式是什么？

```
 NSString *booking=urlForBooking.bookHall;
  NSLog(@" book %@",booking);   // this prints ---    http://10.2.0.76:8080/ConferenceHall/BookingHallServlet

  NSString *bookingString=[booking stringByAppendingString:[NSString stringWithFormat:@"?       employeeId=%@&conferenceHallId=%@&bookingId=%d&purpouse=%@&fromDate=%@&toDate=%@&comments=%@&submit=1",empId,_hallId,_bookingId,_purpose,fromDateStr,toDateStr,_comments]];
  NSLog(@"book str %@",bookingString);  //this prints ---   ?employeeId=3306&conferenceHallId=112&bookingId=0&purpouse=S&fromDate=25/Feb/2013 13:29&toDate=25/Feb/2013 15:29&comments=C&submit=1

  NSURL *bookingURL=[NSURL URLWithString:bookingString];
  NSLog(@"BOOK %@",bookingURL);  //here I'm not getting the url(combined string), it gives null. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:20:27.093

这是因为您正在构建的 URL 包含在 URL 中无效的章程，例如空格和斜杠。

您应该转义这些字符：

```
NSString *bookingPath =[bookingString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *bookingURL=[NSURL URLWithString:bookingPath]; 
```

您可能需要替换日期中的斜杠，因为它们的编码可能不正确。

```
NSString *bookingString=[NSString stringWithFormat:@"%@?employeeId=%@&conferenceHallId=%@&bookingId=%d&purpouse=%@&fromDate=%@&toDate=%@&comments=%@&submit=1",
          booking,
          empId,
          _hallId,
          _bookingId,
          [_purpose stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
          [fromDateStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
          [toDateStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
          [_comments stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

NSURL *bookingURL=[NSURL URLWithString:bookingString];
NSLog(@"BOOK %@",bookingURL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:21:19.577

您的 URL 字符串在某些方面不正确，因此被解析为 nil。[NSURL](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)的文档告诉你这可能发生：

> 返回值 一个用 URLString 初始化的 NSURL 对象。如果字符串格式错误，则返回 nil。

您不应该在`?`您的 URL 部分之后有所有这些前导空格，并且在将其解析为 URL 之前需要对整个内容进行转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:26:42.810

_ bookingString_ 中的空格（在employeeId 之前和日期中）会终止您的URL。

# c# - 文件上传控件完成文件上传操作后如何禁用网格视图行

> ID：14808200
> 
> 赞同：0
> 
> 时间：2013-02-11T08:15:35.563
> 
> 标签：c#, asp.net, visual-studio-2010

我有一个网格视图，其中包含三个字段。第一个是数据绑定字段，第二个是包含文本框控件的模板字段，第三个是包含 FileUpload 控件的模板字段。

我想在文件上传控件完成文件上传操作时禁用网格视图行。

我的网格绑定代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class gr4 : System.Web.UI.Page
{
    SqlConnection cn;
    SqlCommand cmd;
    SqlDataAdapter da;
    DataSet ds;

protected void Page_Load(object sender, EventArgs e)
{
    cn = new SqlConnection("Data Source=AMIR-PC\\MOHEMMAD;Initial Catalog=CRM_InvestPlus;Integrated Security=True");
    string query = "Select Capacity from Dealer_License_Capacity where ID='D00001' and Software_ID='001' and Version_ID='1'";
    cn.Open();
    cmd = new SqlCommand(query,cn);
    da = new SqlDataAdapter(cmd);
    ds = new DataSet();
    da.Fill(ds);
    cn.Close();

    string query1 = "select  Price from Version_Master where Software_ID='001' and Version_ID='1'";
    cn.Open();
    cmd = new SqlCommand(query1, cn);
    da = new SqlDataAdapter(cmd);
    DataSet ds1 = new DataSet();
    da.Fill(ds1);
    cn.Close();

    string query2 = "select Software_Name from Software_Master where Software_ID='001'";
    cn.Open();
    cmd = new SqlCommand(query2, cn);
    da = new SqlDataAdapter(cmd);
    DataSet ds2 = new DataSet();
    da.Fill(ds2);
    cn.Close();

    DataTable dt = new DataTable();
   // dt.Columns.Add("Name", typeof(string));
    dt.Columns.Add("Software_Name", typeof(string));
    dt.Columns.Add("Price", typeof(string));

    int count = Convert.ToInt32(ds.Tables[0].Rows[0][0].ToString());

    for (int i = 0; i < count; i++)
    {
        DataRow dr = dt.NewRow();
     //   dr["Name"] = "aaa";
        dr["Software_Name"] = ds2.Tables[0].Rows[0][0].ToString();
        dr["Price"] = ds1.Tables[0].Rows[0][0].ToString();

        dt.Rows.Add(dr);
        if (i == 0)

            Response.Write(dr["Price"]);

    }

    GridView1.DataSource = dt;
    GridView1.DataBind();

    //GridView1.SelectedRow.Enabled = false;

  }
} 
```

网格的源文件是：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
    <Columns>

        <asp:BoundField DataField="Software_Name" />
        <asp:TemplateField>
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:TextBox ID="TextBox2" runat="server" Text='<%# Eval("Price") %>'></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField>
            <ItemTemplate>
                <asp:FileUpload ID="FileUpload1" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>

    </Columns>
    </asp:GridView> 
```

数据是完美有界的，但我想在文件上传控件完成操作后禁用选定的gridview行。

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:25:03.917

```
protected void GridView1_DataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
               e.Row.Enabled=false;//Check on the condition that uploaded is completed            
        }
    } 
```

# database - Rails 存储数以百万计的小图像。格子？

> ID：14808205
> 
> 赞同：1
> 
> 时间：2013-02-11T08:15:52.870
> 
> 标签：database, ruby-on-rails-3, mongoid, gridfs

我需要存储数百万个 0,1kb-8Mb 的小图像。我听说过 gridfs，但我可以在文档中读到“对于 MongoDB 集合中的文档，您应该始终使用 GridFS 来存储大于 16 MB 的文件。”。所以对于许多小文件来说这不是一个好的解决方案吗？我正在寻找存储图像（和其他二进制文件）的最快方法

# jquery - jQuery clone() 函数无法正常工作

> ID：14808207
> 
> 赞同：1
> 
> 时间：2013-02-11T08:16:07.937
> 
> 标签：jquery

查看我的 jsFiddle [http://jsfiddle.net/JV8eU/](http://jsfiddle.net/JV8eU/)

我已经使用 jQuery函数克隆了`div`标签`clone()`

当有人单击“添加新”时，`div`将添加新的标签克隆，当有人单击“删除”时，该`div`标签将被删除。

这样做有一个问题，原来的 div 标签也包含删除按钮，所以当时有人点击它，原来的 div 标签也被删除了。

我不想在执行代码时显示删除链接，当有人单击添加时，删除链接会与 div 标签的克隆一起出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:19:48.687

首先在删除按钮 div 中将其设置为隐藏，并在代码中进行以下更改...

```
$(document).ready(function(){
    $("#Add").click(function(){
        $("#id").removeAttr("hidden");
        $("#id").show("slow");
        var obj =  $("div.content").eq(0).clone(); //this will clone the html elements
        $("div.row").append(obj); //this will append to the existing elements
    });
}); 
```

和身体..

```
<div class="pull-left"><a href="#" onclick='removeDOM(this)' id="id" hidden>Remove</a></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:29:32.250

你是这个意思吗？[http://jsfiddle.net/JV8eU/11/](http://jsfiddle.net/JV8eU/11/)

您可以在添加新内容之前动态添加删除 div。像这样： `obj.append('<div class="pull-left"><a href="#"onclick="removeDOM(this)">Remove</a></div>');`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T08:29:56.647

永远记住，当覆盖默认功能时，这是你的朋友：

```
e.preventDefault(); 
```

这个 JSFiddle 似乎工作得很好：http: [//jsfiddle.net/turiyag/JV8eU/9/](http://jsfiddle.net/turiyag/JV8eU/9/) 如果您还想维护初始元素，这段代码可以解决问题：http: [//jsfiddle.net/turiyag/ JV8eU/13/](http://jsfiddle.net/turiyag/JV8eU/13/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:31:11.280

将行的模板放在单独的元素中：

```
<div class="template">
  <div class="content">
    ...the row template goes here
  </div>
</div>
<div class="row">
</div> 
```

隐藏模板：

```
.template { display: none; } 
```

从一开始复制模板中的行一次，并在单击链接时：

```
function copy() {
    $("div.row").append($(".template .content").clone());
}

$(document).ready(function () {
    copy();
    $("#Add").click(copy);
}); 
```

演示：http: [//jsfiddle.net/JV8eU/14/](http://jsfiddle.net/JV8eU/14/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T08:33:36.053

只是想到了更好的实现。不要总是隐藏原始的，而是有条件地隐藏它。

[这是 JsFiddle](http://jsfiddle.net/rahulr/LpDNL/)

```
function removeDOM(thisObj){
if($('.content').size() == 2){
    $($('.remove-link').not(thisObj)[0]).hide();
}
if($('.content').size() != 1)
    $(thisObj).parent().parent().remove();
} 
```

好处是，用户可以删除他/她想要的任何行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T08:55:33.613

从 html 中删除按钮并在单击按钮时附加它....

```
 var newRemoveButton ='<div class="pull-left"><a href="#" onclick='removeDOM(this)' id="id" hidden>Remove</a> </div>';
 $(newRemoveButton).appendTo(obj); 
```

您还可以查看此[链接](http://jq4you.blogspot.com/2013/02/codes-to-create-addwith-remove-using.html)以添加一些效果。

# android - 在 setOnClickListener 中无法访问查看对象

> ID：14808211
> 
> 赞同：0
> 
> 时间：2013-02-11T08:16:32.577
> 
> 标签：android, android-view

我已经在类中初始化对象，如下所示

```
View popupView; //This is global 
```

我在 onCreate() 方法中创建了 View 对象，如下所示

```
LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
popupView = layoutInflater.inflate(R.layout.activity_filter_form, null); 
```

我想访问 setOnClickListener 中的视图对象，如下所示

```
popupView.setVisibility(View.VISIBLE); 
```

但上面的行给出了一个错误**“popupView 无法解析为一个类型”**。请帮忙。

完整代码如下

```
public class Myclass1 extends Activity 
{
TextView tv_addiction_name, tv_today, tv_yesterday, tv_this_week, tv_this_month, tv_total;
ImageView iv_back, iv_filter;
int year, month, day;
int placeData;
Boolean state = false;
DatePickerDialog.OnDateSetListener dateListener;
SQLiteDatabase database;
int cat_id = 0;
View popupView;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_addiction_details);

    LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
    popupView = layoutInflater.inflate(R.layout.activity_filter_addiction_form, null);
    popupView.setVisibility(View.INVISIBLE);

    Intent intent = getIntent();
    final String cat_name = intent.getStringExtra("cat_name");
    tv_addiction_name = (TextView) findViewById(R.id.textViewAddictionDetails);
    tv_addiction_name.setText(cat_name);

    tv_total = (TextView) findViewById(R.id.textview_total);
    tv_today = (TextView) findViewById(R.id.textview_today);
    tv_yesterday = (TextView) findViewById(R.id.textview_yesterday);
    tv_this_week = (TextView) findViewById(R.id.textview_this_week);
    tv_this_month = (TextView) findViewById(R.id.textview_this_month);

    iv_back = (ImageView) findViewById(R.id.imageViewAddictionDetailsBack);
    iv_back.setClickable(true);
    iv_back.setOnClickListener(new OnClickListener()
                                    {
                                        @Override
                                        public void onClick(View v)
                                        {
                                            Intent intent = new Intent(AddictionDetails.this, StartActivity.class);
                                            startActivity(intent);
                                        }
                                    }
                                );

    iv_filter = (ImageView) findViewById(R.id.imageViewAddictionDetailsFilter);
    iv_filter.setClickable(true);
    iv_filter.setOnClickListener(new OnClickListener()
                                    {
                                        @Override
                                        public void onClick(View v)
                                        {
                                            if(state == false)
                                            {
                                                state = true;
                                                popupView.setVisibility(View.VISIBLE); // Getting error on this line. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:35:33.403

我认为成员 popupView 在匿名类 OnClickListener 中不可见。您应该尝试通过 MyClass1.popupView 访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:24:20.707

试试这个我希望这对你有帮助..

```
 LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
 popupView = layoutInflater.inflate(R.layout.activity_filter_form, R.id.layout_id,true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:29:57.017

在里面定义`popupView` 变量`onCreate()`并制作它`final`。然后，您将能够在`onClick()`方法中访问它。

# java - 使用Java将图像存储到应用程序根目录中？

> ID：14808213
> 
> 赞同：0
> 
> 时间：2013-02-11T08:16:46.167
> 
> 标签：java, spring, io

在我的 Java 应用程序将图像存储到文件夹中，我正在做..

```
@RemotingInclude
public void uploadImage(byte[] content,String fileName) {
    try
    {
       fileName = System.getProperty("java.io.tmpdir") + "/" + fileName;
       File f = new File(fileName);  
       FileOutputStream fos = new FileOutputStream(f);  
       fos.write(content);  
       fos.close();
       System.out.println(f+"   "+fileName);
    }catch(Exception e)
    {
        e.printStackTrace();
    }

} 
```

它正在存储一些临时目录...但我想将图像存储到应用程序根目录下的文件夹中，因为如果它在服务器上运行，则仅图像仅存储在根目录中..

如何将图像存储到临时目录的文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:24:36.273

试试这个：

```
ServletContext context = getContext();
fileName = context.getRealPath("/<yourfoldername>/" + fileName); 
```

# php - 更新图片上传文件

> ID：14808215
> 
> 赞同：0
> 
> 时间：2013-02-11T08:16:49.467
> 
> 标签：php, html, mysql

你能帮我更新我的示例项目中的图像吗？

这是我的代码：

```
$dir = "C:/xampp/htdocs/test/individualpictures/";
            $names = $_FILES["uploadedfile"]["name"];
            $temp = $_FILES["uploadedfile"]["tmp_name"];
            $uploadfile = $dir . basename($names);

<input type="file" name='uploadedfile'></input>
<input type="submit name="update"></input>

if(isset($update)){ 
   mysql_query("UPDATE contact_individual SET attachment='$uploadedfile'
   WHERE contactID_individual='$text'");
} 
```

请注意，我已经在我的数据库中保存了图像的 url，我想要的是当用户没有进行任何操作时，保存到我的数据库中的 url 不会被替换为空白 url。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:25:06.827

You can do it as following way.

Sample Code.

```
<?php
    $dir   = "C:/xampp/htdocs/test/individualpictures/";
    $names = isset($_FILES["uploadedfile"]["name"]) ? $_FILES["uploadedfile"]["name"] : '';
    $temp  = $_FILES["uploadedfile"]["tmp_name"];
    $dir   = $dir . basename($names);

    echo '<input type="file" name="uploadedfile" />';
    echo '<input type="submit name="update" />';

    if(isset($_POST['update']))
    {
        mysql_query("UPDATE contact_individual SET attachment='$dir' WHERE contactID_individual='$text'");
    }
?>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:14:16.057

您可以简单地检查是否有任何更新。我的意思是你可以检查文件名是否为空。基于此，您可以更新表或不更新。

# php - 简单的 html dom 删除元素时出错

> ID：14808216
> 
> 赞同：0
> 
> 时间：2013-02-11T08:16:51.617
> 
> 标签：php, simple-html-dom

我正在使用简单的 html dom。我有这个代码：

```
<html>
<div class="one">
<div class="two">this is inner text </div>
<a href="#" class="three">this is inner anchor</a>
This is outer test
</div>
</html> 
```

我只想取`This is outer test`。这是我的代码：

```
$html = file_get_html(SITE_URL.'/forumlist.php');  
$html->find('.two',0)->outertext = "";
$html->find('.three',0)->outertext = "";
$html->save();
echo $html->find('.one',0)->plaintext; 
```

我很失望..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:35:42.323

就我阅读文档而言，我认为你不能像想象的那样简单（我当然可能错了），但你可以手动删除不需要的字符串`str_replace`：

```
$string = '<html>
<div class="one">
<div class="two">this is inner text </div>
<a href="#" class="three">this is inner anchor</a>
This is outer test
</div>
</html>';

$html = str_get_html( $string );
echo str_replace(
        array(
            $html->find('.two',0)->plaintext,
            $html->find('.three',0)->plaintext
        ),
        null,
        $html->find('.one',0)->plaintext
    ); 
```

如果您知道 html 的结构，这实际上应该可以解决问题。

# java - java中的“文件”数据类型是什么？

> ID：14808219
> 
> 赞同：-5
> 
> 时间：2013-02-11T08:16:57.737
> 
> 标签：java, file

```
import java.io.*;

class SplitFile    
{    
    private File fSplit;
    private int sizeInBytes;

    private int count;

    public static void main(String[] args) throws IOException
    {    
        Console con = System.console();

        String fileName;

        int size = 0;

        System.out.print("Enter the file name to split: ");

        fileName = con.readLine();

        System.out.print("Enter the size of the target file: ");

        size = Integer.parseInt(con.readLine());

        SplitFile sf = new SplitFile(fileName, size);

        sf.split();

    }

    public File checkFileExists(String fName)    
    {    
        File f = new File(fName);

        if (!f.exists())    
        {    
            System.out.println("File " + fName + " does not exists");

            System.exit(0);

        }

        return f;

    }

    public int validateSize(int s)    
    {    
        if (fSplit.length() < s)    
        {

            System.out.println("Invalid Size");

            System.exit(0);

        }

        return s;

    }

    public String createNextFileName()    
    {    
        ++count;

        String fileName;

        fileName = "part_" + count + "." + fSplit.getName();

        return fileName;

    }

    public SplitFile(String fName, int s)    
    {

        fSplit = checkFileExists(fName);

        sizeInBytes = validateSize(s);

        count = 0;

    }

    public void split() throws IOException

    {

        FileInputStream fis = new FileInputStream(fSplit);

        BufferedInputStream bis = new BufferedInputStream(fis);

        File fileSegment = new File(createNextFileName());

        FileOutputStream fos = new FileOutputStream(fileSegment);

        BufferedOutputStream bos = new BufferedOutputStream(fos);

        int ch;

        int currentByteCount = 0;

        while ((ch = bis.read()) != -1)

        {

            bos.write(ch);

            ++currentByteCount;

            if (currentByteCount == sizeInBytes)

            {

                bos.close();

                fos.close();

                fileSegment = new File(createNextFileName());

                fos = new FileOutputStream(fileSegment);

                bos = new BufferedOutputStream(fos);

                currentByteCount = 0;

            }

        }

        bis.close();

        fis.close();

        bos.close();

        fos.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T08:23:20.693

based from the documentation

> An abstract representation of file and directory pathnames.

The `File` is a reference type. it is used for handling files (eg. creating) It would be more easier for you to understand it by looking at this [link](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

**UPDATE**

Just by looking at your comments from the previous answer I've observed that you do not know/unfamiliar with the different data types in java, there are two data types.

1.  Primitive Data Types (char,int,boolean)
2.  Reference Types/Object(User Defined classes, the Superclass `Object` and in your case, the `File`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:20:51.207

文件***Object***就是一个用于处理文件的对象，您可以在[此处](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)阅读它的文档。

# sql - 将 TOP 1 相关子查询从 SQL Server 翻译到 Oracle

> ID：14808220
> 
> 赞同：4
> 
> 时间：2013-02-11T08:17:02.323
> 
> 标签：sql, oracle11gr2, correlated-subquery, rownum

如何在 Oracle 中执行基于`ORDER BY`子句返回第一个匹配行的相关子查询？我正在尝试从执行此操作的 SQL Server 转换查询。

作为记录，我需要坚持（大部分）SQL-92 语法。分析函数根本不应该用，我需要尽量减少非标准SQL的使用。`TOP 1 ... ORDER BY`是 SQL Server 专有的，我正在努力将其转换为`rownum`.

注意：已经指出，这个特定的查询不需要，`TOP/LIMIT/rownum`因为它在语义上等同于使用`Min()`，因为我们只想要一列。但我仍然会感激并奖励任何有关如何按所述执行翻译的帮助——因为我想更好地学习 Oracle。

这是 SQL Server 查询（以及[它的 SqlFiddle](http://sqlfiddle.com/#!3/7d679/5)）：

```
SELECT
  D.StartDate,
  (
    SELECT TOP 1 E.EndDate
    FROM dbo.Dates E
    WHERE
      E.EndDate >= D.EndDate
      AND NOT EXISTS (
        SELECT *
        FROM dbo.Dates E2
        WHERE
          E.StartDate < E2.StartDate
          AND E.EndDate > E2.StartDate
      )
    ORDER BY
      E.EndDate,
      E.StartDate DESC
  ) EndDate
FROM
  dbo.Dates D
WHERE
  NOT EXISTS (
    SELECT *
    FROM dbo.Dates D2
    WHERE
      D.StartDate < D2.EndDate
      AND D.EndDate > D2.EndDate
  ); 
```

这是我尝试过的。我受到阻碍，因为我在`D.EndDate`外部参考上遇到错误。

> ORA-00904: "D"."ENDDATE": 无效标识符

但问题是什么？子句中的相关子查询`SELECT`应该可以访问所有外部表数据。我不知道下一步该去哪里。（以及[用于此的 SqlFiddle](http://sqlfiddle.com/#!4/2e766/6)）。

```
SELECT
  D.StartDate,
  (
    SELECT *
    FROM (
      SELECT E.EndDate
      FROM Dates E
      WHERE
        E.EndDate >= D.EndDate
        AND NOT EXISTS (
          SELECT *
          FROM Dates E2
          WHERE
            E.StartDate < E2.StartDate
            AND E.EndDate > E2.StartDate
        )
      ORDER BY
        E.EndDate,
        E.StartDate DESC
    )
    WHERE rownum = 1
  ) EndDate
FROM
  Dates D
WHERE
  NOT EXISTS (
    SELECT *
    FROM Dates D2
    WHERE
      D.StartDate < D2.EndDate
      AND D.EndDate > D2.EndDate
  ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:05:22.473

我可能遗漏了一些东西，但你不能使用`MIN`而不是`TOP 1 ... ORDER BY`，因为你是按 EndDate、StartDate DESC 排序，并且只选择 EndDate，开始日期与排序无关，只有当你有 2 个结束日期时才考虑是相同的，但由于您只选择结束日期，因此使用两个（或多个结束日期）中的哪一个并不重要：

```
SELECT  D.StartDate,
        (   SELECT  MIN(E.EndDate)
            FROM    Dates E
            WHERE   E.EndDate >= D.EndDate
            AND     NOT EXISTS 
                    (   SELECT  1
                        FROM    Dates E2
                        WHERE   E.StartDate < E2.StartDate
                        AND     E.EndDate > E2.StartDate
                    )
        ) EndDate
FROM    Dates D
WHERE   NOT EXISTS 
        (   SELECT  1
            FROM    Dates D2
            WHERE   D.StartDate < D2.EndDate
            AND     D.EndDate > D2.EndDate
        ); 
```

**[SQL Fiddle 示例](http://sqlfiddle.com/#!4/2e766/13)**

# javascript - phantomjs 中的元素为 null

> ID：14808221
> 
> 赞同：0
> 
> 时间：2013-02-11T08:17:03.490
> 
> 标签：javascript, phantomjs

我有这个代码在 phantomjs 中运行。我不知道为什么 form.elements 一直返回 null 给我。我在 chrome 开发者控制台上运行了相同的代码，得到了我想要的正确结果。

我对 javascript 和所有相关的东西都很陌生。请阐明一些观点。

```
var page = require('webpage').create();
page.open('http://www.kayak.com', function (status) {
    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        var form = page.evaluate(function(){
             return document.getElementById('searchform');
        });
        console.log(form.elements[2].value);
    }
    phantom.exit();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:11:43.877

您不能通过`evaluate`. [文档](http://phantomjs.org/api/webpage/method/evaluate.html)中提到了这一点：

> 注意：评估函数的参数和返回值必须是简单的原始对象。经验法则：如果它可以通过 JSON 序列化，那就没问题了。闭包、函数、DOM 节点等将不起作用！

虽然这是使用 PhantomJS 时最常见的错误，但这很容易解决。只要确保你尽可能多地完成所有处理`evaluate`，然后返回一个简单的对象。有关详细信息，请仔细阅读[文档](https://github.com/ariya/phantomjs/wiki)并从所有包含的[示例](https://github.com/ariya/phantomjs/tree/master/examples)中学习。

# joomla - 如何在美德商城 shop.browse 页面中调用 joomla 模块

> ID：14808222
> 
> 赞同：0
> 
> 时间：2013-02-11T08:17:04.040
> 
> 标签：joomla, virtuemart

joomla 模块如何在 drugmart shop.browse 页面中被调用。我在browse_layouttable.tpl.php 中尝试了以下代码，但它对我不起作用。我使用的是joomla1.5.23，而deadmart 版本是1.1.8。有什么建议吗？

```
<?php

           $modules =&  JModuleHelper::getModules('logo');
           foreach ($modules as $module)
           {
              echo JModuleHelper::renderModule($module)
           }
  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:45:21.330

试试这个

```
 $document = &JFactory::getDocument();
     $renderer = $document->loadRenderer('module');

     $Module = &JModuleHelper::getModule('mod_fmDataGrid');

     $Params = "param1=bruno\n\rparam2=chris"; //if you want to pass params
     $Module->params = $Params;
     echo $renderer->render($Module); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T13:36:40.220

我建议您使用 NoNumber 中的“Modules Anywhere”：http: [//extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/embed-a-include/6402](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/embed-a-include/6402)

安装此插件后，您可以使用以下示例直接在浏览页面 PHP 中添加模块位置：{modulepos mynewposition}

这是所有 Joomla 用户必备的插件，因为您可以在整个站点中使用它。

# c# - 设置标志枚举的所有值，除了一个字段

> ID：14808223
> 
> 赞同：2
> 
> 时间：2013-02-11T08:17:08.707
> 
> 标签：c#, enums, bit, enum-flags

我有以下声明

```
 private uint mask;
 Action<FlagEnum> setField = new Action<FlagEnum>(x => this.mask = (uint)x); 
```

例如以下枚举：

```
[Flags]
public enum FlagEnum : uint
{
    Clear = 0x0,
    F1 = 0x1,
    F2 = F1 << 1,
    F3 = F2 << 1,
    F4 = F3 << 1,
    F5 = F4 << 1,
    F6 = F5 << 1
} 
```

现在我想设置除“清除”标志之外的所有标志。我试过这个：

```
 setField(!FlagEnum.Clear); 
```

但我收到以下消息

```
Operator '!' cannot be applied to perand of type 'BitMask.FlagEnum' 
```

设置一个标志，例如：

```
 setField(FlagEnum.F1) 
```

工作正常。

所以问题是如何用我的方法设置 FlagEnum 的所有字段而不是“清除”字段？或者这是不可能的，我必须实现这个要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:25:44.050

在您的特定情况下，`FlagEnum.Clear`设置为零，这意味着它不能被“设置”。您的标志定义如下（缩短为 8 位）：

```
Clear = 00000000
F1    = 00000001
F2    = 00000010
F3    = 00000100
F4    = 00001000
F5    = 00010000
F6    = 00100000 
```

因此，如果说`F2`和`F3`被`F5`组合，您的值的二进制表示将是`00010110`- 它是从这三个标志的按位或获得的组合。

但是，`Clear`应该如何在那里添加？`Clear`为零，因此将其与该值进行或运算不会改变任何内容。相反，只有在没有设置其他标志时，您的值才自动为`Clear`.

如果这不是您想要的，请从分配`0x01`到开始`Clear`。

* * *

通常，您确实可以从 flags 变量中删除单个值，并且您关于否定标志值的想法是正确的 - 就像在 C# 中，按位 NOT 由波浪号 ( `~`) 表示，而不是用于逻辑非的感叹号.

所以，倒置的位模式`F2`是`11111101`。要从 中删除`F2`，`00010110`OR 不会做，因为结果是`11111111`。相反，否定值必须与前面的标志组合进行与运算：

```
00010110 & 11111101 = 00010100 (F3, F5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:05:57.473

遵循 OR Mapper 方法，我以这种方式解决了它：

```
/// <summary>
    /// Operates the specified flag.
    /// </summary>
    /// <param name="flag">The flag.</param>
    /// <param name="operation">The operation.</param>
    public void Operate(FlagEnum flag, OperationEnum operation)
    {
        this.flag = flag;
        switch (operation)
        {
            case OperationEnum.AND:
                operate((x, y) => x & y);
                break;
            case OperationEnum.OR:
                operate((x, y) => x | y);
                break;
            case OperationEnum.XOR:
                operate((x, y) => x ^ y);
                break;
            case OperationEnum.NOT:
                throw new NotImplementedException("The operation 'NOT' is not implemented so far!");
        }
    }

 /// <summary>
    /// Operates the specified operation.
    /// </summary>
    /// <param name="operation">The operation.</param>
    private void operate(Func<uint, uint, uint> operation)
    {
        this.Mask = operation(this.Mask, (uint)this.flag);
    }

    /// <summary>
    /// Clears the mask.
    /// </summary>
    public void ClearMask()
    {
        this.Mask = (uint)FlagEnum.Clear;
    } 
```

# ruby - Ruby：记录器和守护进程

> ID：14808226
> 
> 赞同：7
> 
> 时间：2013-02-11T08:17:29.483
> 
> 标签：ruby, logging, daemons

我正在使用 ruby​​ 1.9.2p180（2011-02-18 修订版 30909）

为了进行日志记录，我使用日志记录 gem。我的程序有两个块，用作守护进程。

但是从这些块中记录会导致错误，并且不会将任何内容写入日志文件：

```
log shifting failed. closed stream
log writing failed. closed stream 
```

以下是代码中发生的情况：

```
log = Logger.new(logbase + 'logfile.log', 'monthly')
log.level = Logger::INFO

proc = Daemons.call(options) do
  # [...]
  log.info "Any Logmessage"
  # [...]
end 
```

任何想法，那里有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T08:36:26.310

gem在`Daemons`守护进程时关闭所有文件描述符。因此，在守护进程块之前打开的任何日志文件都将在分叉进程中关闭。

而且由于您无法写入已关闭的文件描述符->错误。

您可以通过阅读以下章节了解更多关于守护进程时会发生什么的信息：

**守护进程在内部对我的守护进程做了什么？**
[http://daemons.rubyforge.org/Daemons.html](http://daemons.rubyforge.org/Daemons.html)

解决方案是在守护程序块内而不是在其外部打开日志文件。那应该解决它。但请注意，守护进程会将工作目录更改为`/`，因此在引用日志文件路径时要考虑到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-23T13:28:09.833

在 delay_job gem 中成功运行的解决方案包括在 fork 之前提取所有打开的文件，然后再重新打开它们。

[来自延迟作业](https://github.com/collectiveidea/delayed_job/blob/ce88693429188a63793b16daaab67056a4e4e0bf/lib/delayed/worker.rb#L77)的调整提取：

```
@files_to_reopen = []
ObjectSpace.each_object(File) do |file|
  @files_to_reopen << file unless file.closed?
end

Daemons.run_proc('some_process') do
  @files_to_reopen.each do |file|
    file.reopen file.path, 'a+'
    file.sync = true
  end

  # Your code
end 
```

# sql - 按周分组日期和记录

> ID：14808227
> 
> 赞同：0
> 
> 时间：2013-02-11T08:17:46.130
> 
> 标签：sql, sql-server-2008

我正在使用 sql server 2008：

我有一个查询，计算每天的任务总数和已完成任务的总数

我需要每周（数天）具有相同的逻辑。我不需要每天都有记录（这有关系吗？如果是的话，我怎么能插入一个空的天数记录？）。

以下是当前每天计算任务的查询：

```
SELECT
    DATEADD(D, 0, DATEDIFF(D, 0, T.TaskEndDate)) AS 'EndDate',
    COUNT(T.TaskID)NumOfTasks,
    COUNT(CASE WHEN T.TaskRecordsStatus = 2 THEN T.TaskID END) NumOfCompleteTasks
FROM 
    dwh.Bks_DWH_TaskRecords_V1 T
GROUP BY
    DATEADD(D, 0, DATEDIFF(D, 0, T.TaskEndDate))
ORDER BY 
    DATEADD(D, 0, DATEDIFF(D, 0, T.TaskEndDate)) DESC 
```

这是查询输出（几行作为示例）：

```
End Date NumOfTasks NumOfCompleteTasks
2015-06-27 00:00:00.000 1   0
2013-09-17 00:00:00.000 1   0
2013-02-11 00:00:00.000 1   1
2013-02-07 00:00:00.000 4   0
2013-02-06 00:00:00.000 1   0
2013-02-04 00:00:00.000 1   0
2013-01-20 00:00:00.000 2   0
2013-01-19 00:00:00.000 1   0
2013-01-18 00:00:00.000 2   0
2013-01-17 00:00:00.000 5   0 
```

这是所需的结果：

```
End Date NumOfTasks NumOfCompleteTasks
2013-01-01 00:00:00.000 10  0
2013-01-07 00:00:00.000 6   1
2013-01-14 00:00:00.000 0   0
2013-01-21 00:00:00.000 0   0
2013-01-28 00:00:00.000 7   3
2013-02-05 00:00:00.000 2   1
2013-02-12 00:00:00.000 0   0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:36:30.770

这应该有效：

```
SELECT EndDate = Dateadd(week, Datediff(week, 0, T.TaskEndDate), 0), 
       NumOfTasks = COUNT(T.TaskID),
       NumOfCompleteTasks = COUNT(CASE WHEN T.TaskRecordsStatus = 2 THEN T.TaskID END)
FROM 
   dwh.Bks_DWH_TaskRecords_V1 T
GROUP BY
    Dateadd(week, Datediff(week, 0, T.TaskEndDate), 0)
ORDER BY 
    Dateadd(week, Datediff(week, 0, T.TaskEndDate), 0) DESC 
```

[](http://sqlfiddle.com/#!6/bbbd1/1/0)**简化数据[**的 SQL-Fiddle**](http://sqlfiddle.com/#!6/bbbd1/1/0)**

 **这假设您希望星期一作为一周的第一天，因为日期 0 是 `1900-01-01`星期一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:24:32.750

Do you tried to use it?

```
GROUP BY DAYOFWEEK(DATEADD(D, 0, DATEDIFF(D, 0, T.TaskEndDate))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:01:30.447

尝试

```
SELECT
    DATEADD(D, DATEDIFF(D, T.TaskEndDate, 0), 0) AS 'EndDate',
    COUNT(T.TaskID) NumOfTasks,
    SUM(CASE WHEN T.TaskRecordsStatus = 2 THEN 1 ELSE 0 END) NumOfCompleteTasks
FROM 
    dwh.Bks_DWH_TaskRecords_V1 T
GROUP BY
    DATEADD(D, DATEDIFF(D, T.TaskEndDate, 0), 0)
ORDER BY 
    DATEADD(D, DATEDIFF(D, T.TaskEndDate, 0), 0) DESC 
```

对于每周版本更改 D 在每个 DATEADD 与 Week**

# javascript - 在 jquery 插入之后 - 看不到元素

> ID：14808229
> 
> 赞同：0
> 
> 时间：2013-02-11T08:17:52.153
> 
> 标签：javascript, jquery, html, dom

我有这个问题：
我通过 jquery 插入某些 html。在那个插入的html中，我有一个绑定了函数的类。这个函数没有被调用，我有感觉，插入的html还没有被js看到。

我的插入代码。

```
$(function(){
  $('#einf').on('click', function(){
    $('<tr><td><a class="ame">delete</a></td></td></tr>').insertAfter('#append_tr');
  });
}); 
```

您可以假设，插入效果很好。这是我的绑定函数：

```
$(function(){
  $('.ame').on('click', function(){
     alert('test');
  }); 
}); 
```

我用同一个类已经存在的元素进行了测试`ame`，它正在使用它。感谢您的帮助和指导

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:20:22.233

您必须在添加的元素上再次运行单击绑定。也许这样的事情会起作用：

```
$('<tr><td><a class="ame">delete</a></td></td></tr>').insertAfter('#append_tr').find('.ame').on('click', function(){
    alert('test');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:20:28.210

尝试使用事件委托：http: [//jsfiddle.net/xehu9/](http://jsfiddle.net/xehu9/)

```
$('#einf').on('click', '.ame', function(e){ //<-----pass it here.
    e.stopPropagation(); //<---------stop the event bubbling here.
    alert('test');
}); 
```

发生这种情况是因为您试图在页面准备好时实现对 dom 中不存在的元素的点击。

来自文档：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T08:35:46.763

试试`.live()`吧`.on()`

[http://jsfiddle.net/ThobiasN/Pt3db/](http://jsfiddle.net/ThobiasN/Pt3db/)

```
 $(function(){ 
    $('#einf').on('click', function(){ alert ('some');
      $('<tr><td><a class="ame">delete</a></td></td></tr>').insertAfter('#append_tr');
    });
    $('.ame').live('click', function(){
       alert('test');
    }); 
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:23:00.043

You cannot reference an element that was dinamically created, because it's not in the DOM when javascript runs, I suggest you use TEMPLATES instead of dinamic html content.

However, if you want to follow this approach, jquery allows concadinating element methods:

```
$(function(){
$('#einf').on('click', function(){
$('<tr><td><a class="ame">delete</a></td></td></tr>')
.insertAfter('#append_tr')
.on('click',function(){
 alert('test');
});
});
}); 
```

# linux - OpenGL 上下文的大小

> ID：14808237
> 
> 赞同：0
> 
> 时间：2013-02-11T08:18:19.797
> 
> 标签：linux, opengl

有没有办法获得opengl上下文的大小？或者至少估计它的大小？如果是，如何？

* * *

我在 glut 中有一个应用程序，它创建了几个窗口。由于 glut 不在窗口之间共享 opengl 上下文，所以每个窗口都会创建新的。现在，我正在尝试减少所需的内存，因为它是针对嵌入式系统的。但是如果 opengl 上下文小到可以忽略它，那么我不会看到内存使用量大幅减少。

* * *

我发现[这个补丁](http://graphics.tudelft.nl/~paul/glut.html)可以使用共享的 opengl 上下文创建窗口：

> 给 Windows 用户的一个小附录（作者 Misbah Qidwai）：我将此子例程添加到 glut_win.c。我使用这个例程来调用 wglSharedLists()

```
//MQ
/* CENTRY */
GLXContext APIENTRY
glutGetWindowRenderContext(int win)
{
  GLUTwindow *window;

  if (win < 1 || win > __glutWindowListSize) {
    __glutWarning("glutSetWindow attempted on bogus window.");
    return NULL;                                              
  }
  window = __glutWindowList[win - 1];
  if (!window) {
    __glutWarning("glutSetWindow attempted on bogus window.");
    return NULL;                                              
  }
  return window->renderCtx;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:02:50.547

OpenGL 上下文是一个抽象的东西。支持特定上下文的数据量可以小到一个指针，也可以大到几兆字节。上下文本身不是某种数据结构，它只是您的程序和图形系统共享的句柄，以便彼此“知道”对方在说什么。

了解特定配置的唯一方法是对其进行测量。

# python - 中间件无法正常工作

> ID：14808238
> 
> 赞同：0
> 
> 时间：2013-02-11T08:18:26.333
> 
> 标签：python, django

我有一些与我正在尝试实现一个中间件相关的问题，该中间件检测经过身份验证的用户是否在 5 秒内处于非活动状态。我已经在 Python 模块下面写了来完成这项工作，但它似乎效果不佳。我找到了两个原因；其中之一是；我无法将用户正确重定向到主页；中间件未正确更改会话密钥

我还没有发现如何解决这个问题。我将分两部分展示我对下面所做的事情。

第一部分 ; 中间件.py

```
class TimeOut:
    @csrf_exempt 
    def process_request(self, request):
        try :
            if request.session['isA'] == False:
                return #redirect(reverse("homePage_view"))
        except KeyError:
            request.session['isA'] = False
            return
        try :
            passT = datetime.now() - request.session['Time'] 
            if passT > timedelta( 0, settings.SESSION_COOKIE, 0):
                request.session['isA'] = False
                del request.session['Time']
                return
        except KeyError:
            pass
        request.session['Time'] = datetime.now() 
```

第二部分 ; 设置.py

```
SESSION_COOKIE = 5 

MIDDLEWARE_CLASSES = (
    'home.middleware.TimeOut',
) 
```

编辑：我错误地写了其他课程。我已将名称更改为 TimeOut

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:34:19.610

你说的是不是这个：

```
class AutoLogout:
    def process_request(self, request):
        if not request.user.is_authenticated() :
            return HttpResponseRedirect(reverse('app_name:url_name'))

        try:
            if datetime.now() - request.session['last_touch'] > timedelta( 0, settings.AUTO_LOGOUT_DELAY * 60, 0):
                auth.logout(request)
                del request.session['last_touch']
                return HttpResponseRedirect(reverse('app_name:url_name'))
        except KeyError:
            pass

        request.session['last_touch'] = datetime.now() 
```

**装饰器.py**

```
from django.core.urlresolvers import reverse
from django.http import HttpResponseRedirect

def login_check(view_func):
    def _wrapped_view_func(request, *args, **kwargs):
        if not request.user.is_authenticated:
            //return to home page url
            return HttpResponseRedirect(reverse('app_name:url_name'))
        return view_func(request, *args, **kwargs)
    return _wrapped_view_func 
```

创建 decorators.py 后，像这样更新视图：

```
from app_name.decorators import login_check

@login_check
def view_name(request):
    ......... 
```

如果未通过身份验证，用户将不允许访问该页面。

# java - 处理输入多于或少于 4 个字符的异常

> ID：14808239
> 
> 赞同：-3
> 
> 时间：2013-02-11T08:18:27.393
> 
> 标签：java, exception, input, exception-handling, java.util.scanner

我正在编写一个 Mastermind 程序，它需要输入来进行猜测，但我需要确保它只需要 4 个字符的输入。因此，如果有人输入了 4 个字符以外的任何内容，它将提示重新输入。我知道这一点也不难，我只是在画一个空白，并且无法在任何地方找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:47:06.200

让我们试着做，一次一步。

1.  在您的程序中获取用户输入。如果它是标准输入，那么拉取它的一种方法是使用[`System.in`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#in)，这是一个[`InputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html).
2.  将输入存储在中间变量中。这个变量的类型可以是[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。
3.  如果需要，将值转换为与您的应用程序要求最相关的类型。在此之前检查输入是否有错误的值，例如`null`.
4.  对输入执行逻辑，在您的情况下是找出输入的长度是否为 4。
5.  如果当前不符合要求，则再次提示输入。一种方法是将您的相关代码放入一个循环中，该循环仅在您获得正确输入时终止。

如果这不起作用，欢迎您再次询问，包括显示您的努力的代码。

# web-services - 1 层服务到底是什么意思？

> ID：14808240
> 
> 赞同：2
> 
> 时间：2013-02-11T08:18:31.873
> 
> 标签：web-services, service-layer

我想知道 1 层、2 层和 3 层业务服务之间的主要区别是什么。当他们说我们有一些 SLA 的 1 层业务服务时，他们真正的意思是什么（我知道这是他们的服务时间）。我在互联网上搜索，但找不到准确的答案。假设我们有一个使用 RESTful Web 服务或其他方式公开的元数据存储库，什么特性使它成为一级服务？

# sql - 与join相反的sql

> ID：14808242
> 
> 赞同：1
> 
> 时间：2013-02-11T08:18:35.943
> 
> 标签：sql, join

我有两个通过 MAP 表组合的表

```
Table ANIMAL:
+------+--------------+
| id   |  description |
+------+--------------+
|  2   |  Ape         |
|  3   |  Lion        |
+------+--------------+

Table MAP:
+-----------+---------+
| animal_id | legs_id |
+-----------+---------+
|   2       | 11      |
+-----------+---------+

Table LEGS:
+------+--------------+
|  id  |     legs     |
+------+--------------+
| 10   |      4       |
| 11   |      2       |
+------+--------------+ 
```

我需要在 LEGS 表中没有地图条目的动物，如下所示：

```
 !(select *  
  from ANIMAL as a  
  JOIN MAP as m ON (a.id = m.animal_id)  
  JOIN LEGS as l ON (m.legs_id = l.id) ) 
```

结果应该给我“狮子”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T08:20:36.523

利用`LEFT JOIN`

```
SELECT  a.*
FROM    animal a
        LEFT JOIN Map b
            On a.id = b.animal_id
WHERE   b.animal_id IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c833c/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T08:21:01.493

```
Select * from Animal A
left join Map M on A.id=M.animal_id
where M.animal_id is null; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-11T08:21:50.357

尝试这个 ：

```
SELECT a.*
FROM animal a
WHERE a.id NOT IN (SELECT animal_id FROM Map m JOIN Legs l
                   ON m.legs_id = l.id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:22:47.320

Could you not do a simple query to return all animals with no associated Map record... i.e.

```
SELECT
   *
FROM
   Animal
WHERE
   animal_id not in (SELECT animal_id FROM Map) 
```

# ios - 使用叠加文本和图像录制视频

> ID：14808244
> 
> 赞同：10
> 
> 时间：2013-02-11T08:18:53.743
> 
> 标签：ios, objective-c, avfoundation

无论是使用 UIImagePicker 控制器还是 AVFoundation，我都需要捕获或录制视频，其中不仅应记录相机输出，还应记录叠加子视图。我已经看到很多将叠加图像添加到相机预览的示例，但我想要的不仅是叠加图像或文本预览，而且是在最终视频输出中实际记录叠加。

// 添加图形层

```
 CALayer *theDonut = [CALayer layer];
 theDonut.bounds = CGRectMake(50,50, 150, 150);
 theDonut.cornerRadius = 50/2;
 theDonut.backgroundColor = [UIColor clearColor].CGColor;
 theDonut.borderWidth = 50/5;
 theDonut.borderColor = [UIColor orangeColor].CGColor; 
```

// 设置视频预览层

```
videoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:capSession];
videoPreviewLayer.frame = videoPreview.bounds;
videoPreviewLayer.backgroundColor = [UIColor blackColor].CGColor;
videoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;

videoPreview.layer.masksToBounds = YES;
[videoPreview.layer addSublayer:videoPreviewLayer];
[videoPreview.layer addSublayer:theDonut]; 
```

// 添加文本层

```
UIFont *font = [UIFont fontWithName:@"MarkerFelt-Thin" size:40.0];
    CGSize maxSize = CGSizeMake(480, 10000.0);
    CGSize labelSize = [@"Test Text" sizeWithFont:font constrainedToSize:maxSize lineBreakMode:NSLineBreakByWordWrapping];
    CGRect labelFrame = CGRectMake(50.0, 10.0, labelSize.width, labelSize.height);
    UILabel *label = [[UILabel alloc] initWithFrame:labelFrame];
    label.font = font;
    label.text = @"Test Text";
    label.numberOfLines = 0;
    [videoPreview addSubview:label]; 
```

// 甚至添加按钮覆盖！！！

```
 UIButton *snap = [UIButton buttonWithType:UIButtonTypeCustom];
    [snap setImage:[UIImage imageNamed:@"takePic"]
          forState:UIControlStateNormal];
    [snap addTarget:self
             action:@selector(pickerCameraSnap:)
   forControlEvents:UIControlEventTouchUpInside];
    snap.frame = CGRectMake(74, 370, 178, 37);

    [videoPreview addSubview:snap];

    // 8) Commit session configuration
    // 9) Start running capture session
    // ========================================
    [capSession commitConfiguration];
    [capSession startRunning];

    //Make sure video is not recording
    [[videoDataOutput connectionWithMediaType:AVMediaTypeVideo] setEnabled:NO]; 
```

此示例是从此示例代码修改的 - 它确实将文本和绘图添加到视频预览中，但不会将它们记录在最终输出文件中。

[http://ioscoreframeworks.com/assets/code/DemoCapture.zip](http://ioscoreframeworks.com/assets/code/DemoCapture.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:18:57.350

您可以尝试 WWDC 2010 示例代码中包含的 AVEditdemo 应用程序。不幸的是，您需要下载所有 WWDC 2010 示例代码才能获得它 (232.6mb)。您可以在此处获取所有代码的完整下载：[http ://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?code=y&source=x&bundleID=20645](http://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?code=y&source=x&bundleID=20645)

# python - Python 为什么我不能发送推文？

> ID：14808245
> 
> 赞同：1
> 
> 时间：2013-02-11T08:18:59.693
> 
> 标签：python, twitter, twitter-oauth

我正在尝试使用 python 发送自动推文。

我已经尝试了两个不同的包 python-twitter 和 tweepy，但使用任何一个包都没有成功。这些解决方案在这里讨论：

[Twitter API：简单状态更新 (Python)](https://stackoverflow.com/questions/4473320/twitter-api-simple-status-update-python) [如何从 Django 发推文？](https://stackoverflow.com/questions/5289473/how-to-tweet-from-django)

首先，我应该明确一点，几个小时前我刚刚创建了一个 Twitter 帐户，用于发送推文。使用 dev.twitter.com，我已将访问级别设置为“读取、写入和直接消息”，并创建了使用者和访问令牌密钥。

使用这些密钥，我使用 python-twitter 包连接到 twitter。我知道它至少部分有效，因为我可以访问 The Biebs 推文：

```
>> CONSUMER_KEY = 'XXXX'
>> CONSUMER_SECRET = 'XXXX'
>> ACCESS_TOKEN_KEY= 'XXXX'
>> ACCESS_TOKEN_SECRET= 'XXXX'

>> import twitter
>> api = twitter.Api()
>> api = twitter.Api(
>>     consumer_key=CONSUMER_KEY, 
>>     consumer_secret=CONSUMER_SECRET, 
>>     access_token_key=ACCESS_TOKEN_KEY, 
>>     access_token_secret=ACCESS_TOKEN_SECRET
>> )

>> statuses = api.GetUserTimeline("justinbieber")
>> for s in statuses:
>>     print s.text    

http://t.co/q58qksxp its not finished but heres a little part a song I'm working on
sorry http://t.co/Vtu4Lc2Q
video is at 13 percent done uploading
<... Other Inanities from The Bieb Snipped. You get the picture...> 
```

但是，当我尝试发送推文时，我收到错误消息：“无法使用 OAuth 进行身份验证。”

```
>> api.PostUpdate('Testing Twitter!')

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/python_twitter-0.8.5-py2.7.egg/twitter.py", line 2838, in PostUpdate
    data = self._ParseAndCheckTwitter(json)
  File "/usr/local/lib/python2.7/dist-packages/python_twitter-0.8.5-py2.7.egg/twitter.py", line 3869, in _ParseAndCheckTwitter
    self._CheckForTwitterError(data)
  File "/usr/local/lib/python2.7/dist-packages/python_twitter-0.8.5-py2.7.egg/twitter.py", line 3892, in _CheckForTwitterError
    raise TwitterError(data['error'])
twitter.TwitterError: Could not authenticate with OAuth. 
```

有人可以解释为什么吗？由于这不起作用，我决定安装并尝试 tweepy。

但是当我尝试使用它时，它给了我错误“无效或过期的令牌”

```
>> import tweepy
>> def tweet(status):
>>     '''
>>     updates the status of my twitter account
>>     requires tweepy (https://github.com/joshthecoder/tweepy)
>>     '''
>>     if len(status) > 140:
>>         raise Exception('status message is too long!')
>>     auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)
>>     auth.set_access_token(ACCESS_TOKEN_KEY, ACCESS_TOKEN_SECRET)
>>     api = tweepy.API(auth)
>>     result = api.update_status(status)
>>     return result    
>>     
>> result = tweet('Testing Twitter!')

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 11, in tweet
  File "/usr/local/lib/python2.7/dist-packages/tweepy-2.0-py2.7.egg/tweepy/binder.py", line 185, in _call
    return method.execute()
  File "/usr/local/lib/python2.7/dist-packages/tweepy-2.0-py2.7.egg/tweepy/binder.py", line 168, in execute
    raise TweepError(error_msg, resp)
tweepy.error.TweepError: [{u'message': u'Invalid or expired token', u'code': 89}] 
```

这里的解决方案是什么？我的 Twitter 密钥错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T17:51:35.473

我不确定您是编辑了它们还是只是忘记将它们放入您的代码中，但您需要您的身份验证密钥才能访问 Twitter 帐户。

此处概述了该过程：http: [//www.pythoncentral.io/introduction-to-tweepy-twitter-for-python/](http://www.pythoncentral.io/introduction-to-tweepy-twitter-for-python/)

# ios - iOS - 从联系人列表中检索电话号码；当没有可用号码时，应用程序崩溃

> ID：14808247
> 
> 赞同：0
> 
> 时间：2013-02-11T08:19:06.840
> 
> 标签：ios, cocoa-touch, contacts

我将电话号码导入我的应用程序，但是当我点击没有电话号码的联系人时，我的应用程序崩溃了。

我的代码：

```
if (ABMultiValueGetCount(phoneNumbers) > 0) {
    phone = (__bridge_transfer NSString*)
    ABMultiValueCopyValueAtIndex(phoneNumbers, 0);
} else {
    phone = @"[None]";
} 
```

有什么建议么？

# asp.net - 如何在打印文档中删除 Web 浏览器的页眉和页脚？

> ID：14808254
> 
> 赞同：1
> 
> 时间：2013-02-11T08:19:42.723
> 
> 标签：asp.net, html, css, printing

我正在尝试`print some Cards`使用`web browser`，不幸的是浏览器在我的卡上写了 a`header and footer`并在我的卡上获得了一些空间，这导致卡打印在两页而不是一页上。

如何删除打印文档上的页眉和页脚？

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:22:01.053

您可以使用备用样式表进行打印，然后为该格式定义不同的规则：

```
.my-header { display: none; }
.my-footer { display: none; } 
```

并包含具有正确媒体类型的样式表，`print`：

```
<link rel="stylesheet" href="print.css" type="text/css" media="print" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:23:51.627

The browser automaticaly adds a header and footer (with the url and such), you can not switch those off (unfortunately).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:26:54.910

浏览器在打印时添加的页眉和页脚只能由最终用户在本地关闭。例如，在 IE 中，转到打印 > 页面设置并编辑页眉和页脚下的设置。

[另一种方法可能是使用http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)之类的东西动态创建 PDF， 这将允许您动态设置页面大小、插入图像等，这可能会满足您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T08:22:22.267

```
@media print 
{
    .noPrint 
    {
        display:none;
    }
} 
```

将其保存在样式表中并将此类添加到您不想打印的元素中。

# iphone - 使用 ARC 的 ABNewPersonViewController 内存崩溃

> ID：14808264
> 
> 赞同：1
> 
> 时间：2013-02-11T08:21:14.177
> 
> 标签：iphone, ios, automatic-ref-counting, abaddressbook

当我使用`AddressBook`框架（Core Foundation）时，我遇到了问题，该框架使`NSMutableDictionary`变量用于设置电话号码和地址簿中的其他字段（例如下面的电子邮件）发生内存崩溃。这种情况是第一次发生，当我调用此方法将数据传递到`ABNewPerson`之后，当取消或保存联系人并返回我的视图控制器并单击另一次调用此方法时，`NSMutabledictionary`可能会出现以下代码中的电话号码数据错误：

```
 ABNewPersonViewController *newPersonViewController =[[ABNewPersonViewController alloc]init];
 newPersonViewController.newPersonViewDelegate = self;
 UINavigationController *newNavigationController = [[UINavigationController alloc]

                                                       initWithRootViewController:newPersonViewController];
 newPersonViewController.displayedPerson =(ABRecordRef)[self buildContactDetails];
 [self presentModalViewController:newNavigationController animated:YES];

 - (ABRecordRef)buildContactDetails {
      ABRecordRef person = ABPersonCreate();
      CFErrorRef  error = NULL;

     // firstname
     ABRecordSetValue(person, kABPersonFirstNameProperty, (__bridge_retained CFTypeRef)(self.name.text), NULL);

    // lastname
    NSString *regionName = self.region.text;
    ABRecordSetValue(person, kABPersonLastNameProperty, (__bridge_retained CFTypeRef)(regionName), NULL);

    //Phone

    ABMutableMultiValueRef phoneNumberMultiValue =  ABMultiValueCreateMutable(kABPersonPhoneProperty);
    //Here is the problem this release dictionaryDetail after come back another time
    NSString *phoneNumber = [[dictionaryDetail valueForKey:@"selectedRow"] valueForKey:@"phone" ];
    NSLog(@"NNNNN %@",phoneNumber);

    ABMultiValueAddValueAndLabel(phoneNumberMultiValue,(__bridge CFTypeRef)(phoneNumber) ,  kABOtherLabel, NULL);
    ABRecordCopyValue(person, kABPersonPhoneProperty);
    ABRecordSetValue(person, kABPersonPhoneProperty, phoneNumberMultiValue, nil);
    //CFRelease(phoneNumberMultiValue);

    // Start of Address
    ABMutableMultiValueRef address = ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);
    NSMutableDictionary *addressDict = [[NSMutableDictionary alloc] init];
    NSString *subRegion = self.subRegion.text;
    [addressDict setObject:@"" forKey:(NSString *)kABPersonAddressStreetKey];
    [addressDict setObject:@"" forKey:(NSString *)kABPersonAddressZIPKey];
    [addressDict setObject:subRegion forKey:(NSString *)kABPersonAddressCityKey];

    ABMultiValueAddValueAndLabel(address, (__bridge_retained CFTypeRef)(addressDict), (__bridge CFStringRef)(AMLocalizedString(@"Hospital", @"Hospital")), NULL);
    ABRecordSetValue(person, kABPersonAddressProperty, address, &error);
    //CFRelease(address);
    // End of Address
    if (error != NULL)
       NSLog(@"Error: %@", error);

   return person;
} 
```

这里是崩溃：

```
 [CFString release]: message sent to deallocated instance 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:02:52.067

我已经解决了，手机ABMutableMultiValueRef正确答案的问题如下：

上一个答案：

```
 ABMutableMultiValueRef phoneNumberMultiValue =  ABMultiValueCreateMutable(kABPersonPhoneProperty); 
```

正确答案 ：

```
 ABMutableMultiValueRef phoneNumberMultiValue =  ABMultiValueCreateMutable(kABMultiStringPropertyType); 
```

# android - 时间戳-android

> ID：14808269
> 
> 赞同：-3
> 
> 时间：2013-02-11T08:21:24.827
> 
> 标签：android, timestamp

我的问题很简单。我试图了解时间戳在 android 中的工作原理。我想要一个简单的代码，它在应用程序启动时给出时间戳。它将有一个按钮，当我单击按钮时，它应该给出应用程序启动和按钮单击之间经过的时间。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:30:31.367

您还可以使用此代码计算时差并将其用作时间戳：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss Z");
Date dateOne = df.parse("2011-02-08 10:00:00 +0300");
Date dateTwo = df.parse("2011-02-08 08:00:00 +0100");   
long timeDiff = Math.abs(dateOne.getTime() - dateTwo.getTime());
System.out.println("difference:" + timeDiff); 
```

或尝试

```
Date pdate = your date comming from HTTP;
Date cdate = new Date(System.currentTimeMillis());

long difference = cdate .getTime() - pdate .getTime(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:38:55.987

没有什么叫做时间戳，但您可以使用`java.util.Date`它来计算时间并在您的情况下将其用作时间戳。

> **如果我正确理解您的问题，**那么您希望某些东西在后台运行并在应用程序中保持各种状态，或者更好的是自从应用程序首次启动或后台再次启动以来已经过去了多少时间。

两种解决方案取决于您的用例：

*   在应用程序上下文中，即**当应用程序正在运行或在后台但未被 android 系统破坏时。**您可以使用**活动生命周期方法**和**静态变量**，但**在这种情况下它们对您没有帮助，**因为您永远不知道活动何时进入后台，android系统会在需要内存时破坏您的活动，静态变量也会被破坏.

*   正确使用**共享首选项**`java.util.Date`在不同时间存储为您的用例和在后台运行的**android 服务**以修改共享首选项文件。

> 希望上述想法有所帮助并且很清楚。

# javascript - 如何捕获子 iframe 的 onfocus 事件？

> ID：14808275
> 
> 赞同：0
> 
> 时间：2013-02-11T08:21:58.843
> 
> 标签：javascript, iframe, onfocus

`window.onfocus`当焦点放在孩子身上时不会被解雇`iframe`。

我正在寻找当用户将选项卡切换到当前页面时将触发的事件。（如果可能，不修改子 iframe）

# ios - CLLocationManager 初始更新不是很准确

> ID：14808282
> 
> 赞同：2
> 
> 时间：2013-02-11T08:22:31.057
> 
> 标签：ios, cllocationmanager

这在 CLLocationManager 类参考中有所说明：

> > 在请求高精度位置数据时，位置服务传递的初始事件可能没有您请求的准确性。

这真的影响了我的应用程序。如何确保找到的位置是正确准确的？

我尝试使用第 4 次或第 5 次更新而不是第一次检索到的位置，但这不是一个好的解决方案。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:32:21.800

您应该检查更新的准确性，[`CLLocation`](https://developer.apple.com/library/iOS/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/cl/CLLocation) 包含[`horizontalAccuracy`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW18)可用于检查准确性的属性。当`CLLocation`您发现足够准确时，您可以使用并忽略其他所有内容。

你应该告诉[`CLLocationManager`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)你想要的准确度。为此，请在 中设置[`desiredAccuracy`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW18)属性[`CLLocationManager`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:32:23.847

我认为你将不得不忍受这一点。苹果就是这样实现的。获得一个细粒度的位置需要时间，想想汽车中任何安装在挡风玻璃上的 GPS 设备需要多长时间才能确定它们的位置。

因此，它们不会让您的应用程序等待更长的时间，而是根据附近的基站和 WiFi 热点提供几乎立即可用的准确度。只有当 GPS 定位更可靠时，他们才会再次调用您的应用程序并通知您。

最后，这只是等待细粒度位置的问题：在您的应用程序中，您有机会使用您快速获得的更粗粒度的数据做某事，或者在他们的框架中没有在此期间，应用程序有机会做任何有用的事情。我认为，让你决定是更好的选择。

根据应用程序的类型，您可以拥有一张地图，该地图会在收到更好的位置数据时自动放大，在您期望的位置周围画一个较小的圆圈等。对于最终用户来说，没有什么比等待而没有得到任何东西更糟糕的了回馈。因此，即使这可能不是您想要的答案，我还是建议从用户的角度充分利用它。

# jquery - 基于表单中单选值的条件 jquery 验证

> ID：14808289
> 
> 赞同：7
> 
> 时间：2013-02-11T08:22:52.733
> 
> 标签：jquery, jquery-validate

我正在使用验证插件。我想验证相同表单中的某些字段，当单选值不是“常规”时，

```
<form id="registerform">
<input type="radio" name="role" value="REGULAR" checked="checked" id="role">Regular<br />
<input type="radio" name="role" value="AGENT" id="role">Agent<br />
<input type="radio" name="role" value="ORGANIZATION" id="role">Organization<br />

<input type="text" name="phone"  id="phone"><br/>
<input type="text" name="password" id="password"><br/>

<input type="text" name="work_area" id="work_area" value=""><br/>
<input type="text" name="work_phone" id="work_phone" value=""><br/>

<input type="text" name="org_name" id="org_name"><br/>
<input type="text" name="org_phone" id="org_phone"><br/>
</form> 
```

当角色==“常规”时，验证电话，密码
当角色==“代理”时，验证电话，密码，**工作区域，工作电话**
当角色==“组织”时，验证电话，密码，**org_name，org_phone**
如何优雅地实现这个？
我不想把它分成不同的形式！

我的错误代码：

```
$(document).ready(function() {
var rule_options = 
{
    "phone": "required"
    ,"password": "required"
};

var role = $("#registerform").find("input[name=role]:checked").val();
if(role ==  "AGENT") {
    $.extend(true, rule_options, 
        {
            "work_area": "required"
            ,"work_phone": "required"
        }
    );
}

if(role ==  "ORGANIZATION") {
    $.extend(true, rule_options, 
        {
            "org_area": "required"
            ,"org_phone": "required"
        }
    );
}
jform.validate({
            errorClass : "err_label",
            rules: rule_options,
            ignore: "", 
```

上面的代码不起作用，因为它在 document.ready 之后只运行一次。
我一定遗漏了一些东西，一些语法..〜想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T14:36:42.643

[jquery 验证规则](https://stackoverflow.com/questions/1330573/jquery-validation-rules/1330616#1330616)
我从上面的链接中得到了我真正需要的东西。这里真正需要解决的是如何使 jQuery 验证器插件**根据**每个输入的无线电值动态地运行。我什至不使用 jQuery.change() 方法。

```
function getRole() {
    return $("#registerform").find("input[name=role]:checked").val();
}

$(document).ready(function() {
    var jform = $("#registerform");
    jform.validate({
            errorClass : "err_label",
            rules: 
                "phone": "required"
                ,"password": "required"
                ,"work_area": {
                    required: function(element) {
                        return (getRole() == 'AGENT');
                    }
                }
                ,"work_phone": {
                    required: function(element) {
                        return (getRole() == 'AGENT');
                    }
                }
                ,"org_name": {
                    required: function(element) {
                        return (getRole() == 'ORGANIZATION');
                    }
                }
                ,"org_phone": {
                    required: function(element) {
                        return (getRole() == 'ORGANIZATION');
                    }
                } 
```

如果存在其他想法，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:00:06.027

使用忽略选项。抱歉，如果有任何语法错误，因为我无法访问我的开发工具并且 jsfiddle 无法在我的计算机上运行。

编辑：我假设所有字段都是必需的。

```
$("form").validate({ignore: ".ignore"});

var role = {
    "REGULAR": ["work_area", "work_phone", "org_name", "org_phone"],
    "AGENT": ["org_name", "org_phone"],
    "ORGANIZATION": ["org_name", "org_phone"]
};

$("input[name=role]").click(function () {
    //reset ignore
    $("#work_area,#work_phone,#org_name,#org_phone").removeClass("ignore");

    for (var i in role[$(this).val()])
    {
        $(i).addClass("ignore");
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T08:27:30.170

```
$("input[@name='role']").change(function(){
    // Rest of your code here.
}); 
```

使用 onload 事件，将函数绑定到单选按钮。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T08:27:42.727

您可以在用户每次单击表单或在其上按一个键时更新验证规则。

```
function updateRules() {
  // Your code here
}

$('#registerform').click(function() {
  updateRules();
});

$('#registerform').keyUp(function() {
  updateRules();
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-11T08:47:54.573

问题是你正在做：

```
var role = $("#registerform").find("input[name=role]:checked").val(); 
```

和它的工作，但只有一次，因为你需要将它附加到一个事件（也许更改事件是合适的），所以每次单选按钮以某种方式发生变化时，验证设置应该改变：

```
$("input[@name='role']").change(function(){
    if( $(this).is(":checked") ){ // check if the radio is checked
        var val = $(this).val(); // retrieve the value
        if(role ==  "AGENT") {
           $.extend(true, rule_options, {
              "work_area": "required"
             ,"work_phone": "required"});
        }
        if(role ==  "ORGANIZATION") {
           $.extend(true, rule_options, {
              "org_area": "required"
             ,"org_phone": "required"});
        }
    }
}); 
```

# asp.net-mvc-4 - MVC4 如何为区域配置不同的布局和 CSS

> ID：14808291
> 
> 赞同：1
> 
> 时间：2013-02-11T08:23:03.870
> 
> 标签：asp.net-mvc-4, asp.net-mvc-areas

我有一个 MVC4 Web 应用程序并创建了 2 个区域。我看不到如何为它们使用不同的布局。当我创建没有为它们生成共享文件夹的区域时，我尝试在名为 BO 的区域中创建一个并在那里复制 _layout.cshtml 文件，但没有成功。将_viewstart.cshtml文件复制到那里，
将_layout.cshtml重命名为并将BO区域的_viewstart.cshtml中的布局调用更改为

```
Layout = ~/Areas/BO/Shared/Views/_BOLayout.cshtml"; 
```

仍然没有运气，当我导航到 BO 区域主页时，布局和 css 和 JS 文件都没有加载。关于制作区域的很多东西都使用根_layout.cshtml，但我找不到为每个区域使用不同的东西。请问有什么建议吗？

PS。上面（复制了 _viewstart.cshtml 文件）也破坏了事情；我得到：类型“ASP._Page_Areas_BO__ViewStart_cshtml”不继承自“System.Web.WebPages.StartPage”。导航到该区域时出错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T08:31:30.007

例如，以下结构应该适用于一个`Admin`区域：

`~/Areas/Admin/Views/Shared/_AdminLayout.cshtml`：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    @RenderBody()
</body>
</html> 
```

`~/Areas/Admin/Views/_ViewStart.cshtml`：

```
@{
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
} 
```

`~/Areas/Admin/Views/Foo/Index.cshtml`：

```
<h2>Index view of FooController in Admin area</h2> 
```

# c# - Custom exceptions and base constructor

> ID：14808292
> 
> 赞同：3
> 
> 时间：2013-02-11T08:23:06.257
> 
> 标签：c#, exception, base, custom-exceptions

I've been trying to write my own custom constructor, but getting error about `base()` constructor. I've also been searching how to solve this error, but found nothing and all the examples round the internet are showing almost the same code as mine.

Whole Exception.cs content:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace RegisService
{
public class Exceptions : Exception
{        
}

  public class ProccessIsNotStarted : Exceptions
  {
      ProccessIsNotStarted()
          : base()
      {
          //var message = "Formavimo procesas nestartuotas";
          //base(message);
      }

      ProccessIsNotStarted(string message) 
          : base(message) {}

      ProccessIsNotStarted(string message, Exception e)
          : base(message, e) {}
  }
} 
```

first overload with `base()` is working, no errors were thrown. Second and the third overloads are telling me that :

> "RegisService.Exceptions does not contain a constructor that takes 1(2) arguments"

One more way I've been trying to solve the error:

```
ProccessIsNotStarted(string message)              
    {
        base(message);
    }

    ProccessIsNotStarted(string message, Exception e)
    {
        base(message, e);
    } 
```

this time, VS is telling me that:

> "Use of keyword 'base' is not valid in this context"

So, where is the problem? Looks like the `base()` constructor has some weird overloads or I'm calling it in inappropriate way?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T08:29:59.597

您的`Exceptions`类需要定义您要提供的所有构造函数。的构造函数`System.Exception`不是虚拟的或抽象的。该关键字`base`不会调用所有基类的成员，而是调用您在类声明中提供的一个基类的成员。看看这个：

```
public class Exceptions : Exception
{
    public Exceptions(string message)
        : base(message) {}
}

public class ProccessIsNotStarted : Exceptions
{
    public ProccessIsNotStarted()
        : base()
    {
    }

    public ProccessIsNotStarted(string message) 
        : base(message)
    {
        // This will work, because Exceptions defines a constructor accepting a string.
    }

    public ProccessIsNotStarted(string message, Exception e)
        : base(message, e) 
    {
        // This will not work, because Exceptions does not define a constructor with (string, Exception).
    }
} 
```

默认情况下定义无参数构造函数。要隐藏它，您需要声明它`private`。

关于[MSDN](http://msdn.microsoft.com/en-us/library/system.applicationexception%28v=vs.110%29.aspx)，您应该保持异常继承层次结构平坦：

> 如果您正在设计需要创建自己的异常的应用程序，建议您从 Exception 类派生自定义异常。最初认为自定义异常应该从 ApplicationException 类派生；然而，在实践中，这并没有增加显着的价值。

你也可以看看[这个页面](http://msdn.microsoft.com/en-us/library/seyhszts.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:26:44.213

完全删除`Exceptions`该类并让`ProccessIsNotStarted`直接继承自`System.Exception`.

类的构造函数[不会自动“复制”到派生类](https://stackoverflow.com/questions/223058/how-to-inherit-constructors)；它们可以使用`base`，但您必须手动定义它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T08:26:46.990

base 指的是直接基类，而不是链下的任何基类。您的 ProcessIsNotStarted 类是 RegisService.Exceptions 的直接子类型，而不是 System.Exception。RegisService.Exceptions 没有带有签名 (string, Exception) 或 (string) 的构造函数。

尝试将这两个构造函数添加到您的 RegisService.Exceptions 基类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T08:27:22.713

如果您检查以下代码：

```
public class Exceptions : Exception
{        
} 
```

你会注意到*没有*构造函数。嗯，这是一个谎言，因为可以使用默认的公共构造函数，但是没有自定义的构造函数。

如果你想公开`Exception`through的构造函数，`Exceptions`那么你将不得不定义它们`Exceptions`并从那里调用它们`base`，因为继承异常调用`base`正在调用`Exceptions`，因此`Exception`不是它们`base`，因此构造函数不可访问。

```
public class Exceptions : Exception
{        
    Exceptions(string message) 
      : base(message) { }

    Exceptions(string message, Exception e)
      : base(message, e) { }
} 
```

然后，你可以做得`new Exceptions("", null)`很好。而且，您的基本构造函数在使用继承时调用。

我不知道你是否从这个继承链中获得了任何价值，你可能想按照另一个建议去掉中间人，可以这么说。

# ruby - Using Ruby to replace numeric data using simple hashmap

> ID：14808299
> 
> 赞同：2
> 
> 时间：2013-02-11T08:24:09.917
> 
> 标签：ruby, hashmap, scramble

I'm trying to come up with a simple way using Ruby to scramble (or mask) some numeric data, in order to create a dummy data set from live data. I want to keep the data as close to the original format as possible (that is, preserve all non-numeric characters). The numbers in the data correspond to individual identification numbers, which (sometimes) are keys used in a relational database. So, if the numeric string occurs more than once, I want to map it consistently to the same (ideally unique) value. Once the data has been scrambled, I don't need to be able to reverse the scrambling.

I've created a scramble function that takes a string and generates a simple hash to map numbers to new values (the function only maps the numeric digits and leaves everything else as is). For added security, each time the function is called, the key is regenerated. Thus, the same phrase will produce two different results each time the function is called.

```
module HashModule
  def self.scramble(str)
    numHash ={}
    0.upto(9) do |i|
      numHash[i.to_s]=rand(10).to_s
    end

    output= String.new(str)
    output.gsub!(/\d/) do|d|
      d.replace numHash[d]
    end

    puts "Input: " + str
    puts "Hash Key: " + numHash.to_s
    puts "Output: " + output
  end
end

HashModule.scramble("56609-8 NO PCT 001")
HashModule.scramble("56609-8 NO PCT 001") 
```

This produces the following output:

```
Input: 56609-8 NO PCT 001
Hash Key: {"0"=>"9", "1"=>"4", "2"=>"8", 
           "3"=>"9", "4"=>"4", "5"=>"8", 
           "6"=>"4", "7"=>"0", "8"=>"2", 
           "9"=>"1"}
Output: 84491-2 NO PCT 994

Input: 56609-8 NO PCT 001
Hash Key: {"0"=>"2", "1"=>"0", "2"=>"9", 
           "3"=>"8", "4"=>"4", "5"=>"5", 
           "6"=>"7", "7"=>"4", "8"=>"2", 
           "9"=>"0"}
Output: 57720-2 NO PCT 220 
```

Given the data set:

```
PTO NO PC
R5632893423 IP
R566788882-001
NO PCT AMB PTO
NO AMB/CALL IP
A566788882
1655543AACHM IP
56664320000000
00566333-1 
```

I first extract all the numbers to an array. Then I use the scramble function I created to create a replacement hash map, e.g.

```
 {"5632893423"=>"5467106076", "566788882"=>"888299995", 
  "001"=>"225", "1655543"=>"2466605", 
  "56664320000000"=>"70007629999999", 
  "00566333"=>"00699999", "1"=>"3"} 
```

[Incidentally, in my example, I haven't found a way to insist that the hash values are all unique, which is relevant in the event the string being mapped corresponds to a unique ID in a relationship database, as described above.]

I use gsub on my original string and replace the hash keys with the scrambled value. The code I have works, but I'm curious to learn how I can make it more concise. I realize by regenerating the key each time the function is called, I create extra work. (Otherwise, I could just create one key to replace all digits).

Does anyone have suggestions for how I can accomplish this another way? (I'm new to Ruby, so suggestions for improving my code are also greatly received).

```
input = <<EOS
PTO NO PC
R5632893423 IP
R566788882-001
NO PCT AMB PTO
NO AMB/CALL IP
A566788882
1655543AACHM IP
56664320000000
00566333-1
EOS

module HashModule
  def self.scramble(str)
    numHash ={}
    0.upto(9) do |i|
      numHash[i.to_s]=rand(10).to_s
    end

    output= String.new(str)
    output.gsub!(/\d/) do|d|
      d.replace numHash[d]
    end
    return output
  end
end

# Extract unique non-null numbers from the input file
numbers = input.split(/[^\d]/).uniq.reject{ |e| e.empty? }

# Create a hash that maps each number to a scrambled value
# Using the function defined above

mapper ={}
numbers.map(&:to_s).each {|x| mapper[x]=HashModule.scramble(x)}

# Create a regexp to find all numbers in input file
re = Regexp.new(mapper.keys.map { |x| Regexp.escape(x) }.join('|'))

# Replace numbers with scrambled values
puts input.gsub(re, mapper) 
```

The above code produces the following output:

```
PTO NO PC
R7834913043 IP
R799922223-772
NO PCT AMB PTO
NO AMB/CALL IP
A799922223
6955509AACHM IP
13330271111111
66166777-6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:27:41.500

除了出色的@sawa 的回答，我还建议您直接在`String`课堂上“注入”这种打乱方法（使`str.scramble`项目范围内可用，而无需放弃任何额外的屈膝礼）：

```
class String
  @@ScrambleKey = Hash[(0..9).map(&:to_s).zip((0..9).to_a.shuffle)]
  def scramble ; self.gsub(/\d/) { @@ScrambleKey [$&] } end
end 
```

这个实现引入了一个类变量，而不是一个实例变量。如果您需要`ScrambleKey`从字符串到字符串不同，请改用实例变量。

产量：

```
input = <<EOS
PTO NO PC
R5632893423 IP
R566788882-001
NO PCT AMB PTO
NO AMB/CALL IP
A566788882
1655543AACHM IP
56664320000000
00566333-1
EOS

puts input.scramble 
```

给出：

```
PTO NO PC
R1548024784 IP
R155600008-339
NO PCT AMB PTO
NO AMB/CALL IP
A155600008
9511174AACHM IP
15557483333333
33155444-9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:50:27.877

也许是这样的：

```
module HashModule
  ScrambleKey = Hash[(0..9).map(&:to_s).zip((0..9).to_a.shuffle)]
  def self.scramble(str); str.gsub(/\d/){ScrambleKey[$&]} end
end

puts HashModule.scramble(input) 
```

这使：

```
PTO NO PC
R6907580170 IP
R699455557-223
NO PCT AMB PTO
NO AMB/CALL IP
A699455557
3966610AACHM IP
69991072222222
22699000-3 
```

# .net - 将 TextBlock 的前景色绑定到局部变量

> ID：14808302
> 
> 赞同：1
> 
> 时间：2013-02-11T08:24:18.850
> 
> 标签：.net, wpf, binding

我想将文本块的前景色绑定到局部变量。如果变量没有值（=null），则前景色应为黑色，如果变量不为空，则前景色应为黑色或其他。是否可以通过绑定解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:22:51.797

你可以先使用价值转换器你像这样定义你的转换器

```
[ValueConversion (typeof(object), typeof(SolidColorBrush))]
public class ObjectToBrushConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null)
            return new SolidColorBrush(Colors.Black);
        return new SolidColorBrush(Colors.Red);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后在您的 XAML 文件中，您将转换器定义为资源

```
 <Window.Resources>
        <local:ObjectToBrushConverter x:Key="ObjectToBrushConverter"/>
    </Window.Resources> 
```

然后你绑定到你的财产并提供你的转换器

```
 <TextBox Name="textb" Text="Hello" Foreground="{Binding Path=MyObject,  Converter={StaticResource ResourceKey=ObjectToBrushConverter}}"> 
```

查看值转换器上的 msdn [http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

当然，假设您在此示例中将变量定义为公共属性和 Object 类型

# java - Fastest way to read/write to Random Access Files?

> ID：14808306
> 
> 赞同：1
> 
> 时间：2013-02-11T08:24:43.627
> 
> 标签：java

Note: I have seen similar questions but all referring to large files. This is for small amounts reading and writing constantly, and many files will be written to and read from at once, so performance will be a issue.

Currently, I'm using a Random Access File for an "account" it's fast with basic I/O:

```
raf.write(); 
```

I have seen random access files with file channels and buffered I/O what is the fastest(again for small data.), and could you please supply a example of your proof.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:12:50.270

如果您想要跨多个读/写进程的正确性，您将牺牲性能，或者牺牲非缓冲 API（如 RandomAccessFile），或者牺牲进程间锁定。

您无法有效地比较您可以在没有争用的情况下在单个流程中实现的目标。

您可以调查 MappedByteBuffer，但要注意它会带来自己的问题。

我个人会考虑使用数据库。这就是他们的目的。

# javascript - 带有表单和一个输入文本的警报框

> ID：14808312
> 
> 赞同：15
> 
> 时间：2013-02-11T08:25:15.897
> 
> 标签：javascript

我想用一个输入文本打开一个警报框（Javascript），然后在用户单击时提交到另一个页面，它就像一个带有一个输入文本的表单，所有给出的示例都是模态示例，我只需要一个警报框。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-11T08:27:16.500

假设我正确理解了您的问题，您可以使用 DOM[`prompt`](https://developer.mozilla.org/en-US/docs/DOM/window.prompt)方法：

```
var result = prompt("Enter a value"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T08:30:11.787

您可以使用提示获取用户输入

```
var retVal = prompt("Enter your name : ", "your name here");
document.getElementById(formId).submit(); 
```

您可以访问此变量并相应地重定向

您可以将 prompt 的值存储在表单内的任何控件中，您可以在提交页面后在提交的页面上访问该控件。

小提琴 [http://jsfiddle.net/ze3rX/](http://jsfiddle.net/ze3rX/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T08:28:52.067

您可以自行检查这里是一个链接，您可以在其中使用 javascript[弹出框查看不同类型的弹出框](http://www.w3schools.com/js/js_popup.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T08:47:59.737

你可以做一个提示

```
name = prompt('Please enter your name'); 
```

进而

```
window.location = "http://yourdomain.com/yourscript.php?name="+name; 
```

现在您要做的是使用 GET 方法将用户输入的名称发送到您的脚本。

您显然需要进行一些验证和清理，但这就是 GET 的基本工作方式。如果您想发布输入的数据，请查看[AJAX (XmlHttpRequests)](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)并将变量/参数发送到您选择的脚本 URL。

# spring - The hierarchy of the type Class HijackBeforeMethod is inconsistent

> ID：14808313
> 
> 赞同：1
> 
> 时间：2013-02-11T08:25:20.350
> 
> 标签：spring

I am trying to implement AOP but when I implement `org.springframework.aop.MethodBeforeAdvice` interface then `HijackBeforeMethod` class gives inconsistent error in Eclipse ID.

```
package aop;

import java.lang.reflect.Method;

public class HijackBeforeMethod implements org.springframework.aop.MethodBeforeAdvice{

    @Override
    public void before(Method arg0, Object[] arg1, Object arg2)
        throws Throwable {
    // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-12T17:16:14.787

aopalliance.jar 必须在类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T03:53:38.690

我面临着同样的问题。

解决方案：-首先我使用的是 spring-3.0 jars，然后我还添加了 spring2.5 jars。我的类路径包含 3.0 和 2.5 jars。现在它正在工作。但我不确定它显示的是哪个特定的 jars 问题.

# c# - How to prove there is no multiple inheritance in C#?

> ID：14808314
> 
> 赞同：2
> 
> 时间：2013-02-11T08:25:21.393
> 
> 标签：c#, .net, interface, multiple-inheritance

Yes I was asked this question and all I could provide, was a summary of following info that I knew. Ofcourse other than getting the error when writing the so-called **expected code, wish we could write** ¹, could there be more valid reasons to prove that C# doesn't support Multiple Inheritance?

Many questions asked here in SO and outside web in the context of MI of C#, [comparing C# to Java (where Java implements MI with interfaces)](https://stackoverflow.com/questions/295224/what-are-major-differences-between-c-sharp-and-java), how to simulate/emulate MI in C#, How to deal with lack of MI in C#, [what is the problem with MI](https://stackoverflow.com/questions/225929/what-is-the-exact-problem-with-multiple-inheritance) etc.. So my question may *reflect bits of duplicity to those questions*...however I haven't found the answer yet, hence thought of shooting.

> [In a blog I saw the author is talking about some valuable points:](http://www.irisclasson.com/2012/07/29/stupid-question-11-why-isnt-there-multiple-inheritance-in-c/)
> 
> 1.  Different implementations of MI across languages makes it a challenge to make a language-neutral implementation.
> 2.  Interfaces can be used instead, which makes MI a bit redundant.
> 3.  MI adds complexity in regards to casting, reflection and so on.
> 
> Author indicates that Multiple inheritance of *implementation* is what not allowed in C#. ***So to stop leading to a [double diamond inheritance problem/deadly diamond of death](http://www.programmerinterview.com/index.php/java-questions/java-diamond-problem/)***[.. Like author had pointed out saying "I have inherited a lot from both my mother and father"..](http://www.programmerinterview.com/index.php/java-questions/java-diamond-problem/)

So it makes more sense for a Class to inherit from multiple super/base/parent classes. E.g. Class House inherits from Class Building (the noun, represents details of a building{house, school, office, hotel etc}) and Class Construction (represents details of construction a building). Thus it would be great if we could,

```
1\. code wish we could write
public class House: Building, Construction {
// methods, properties...
} 
```

Instead we have to write that `interFACE`..

```
interface Buildstruction
{
    methodConstruction();
}
//class Construction then has to implement the interface

public class  House: Building, Buildstruction
{
    Construction ConstionObject;
    methodBuilding();
    methodConstruction() { ConstionObject.methodConstruction(); }
} 
```

Wouldn't it had been *easier* to not allow multiple super classes to have the same name methods (e.g. `calculate` method)? Then I realize those parent/super classes need to have the freedom to create their own properties and methods independent of another class..

Thus **MI** seems *mission impossible* in C#...and what reasons determined why it is so.. Is it merely because of,

*   The *diamond problem*?
*   And no-body has yet really pointed out the real use of MI in programming?

Also how does,

*   MI add complexity in regards to `casting`, `reflection`?
*   Interfaces make MI a bit redundant?
*   MI cause issues for a code (full OOP supported) to be language independent?

Appreciate a comment/an answer that says more than just ***"it's the way C# language is created..."*** :)

# php - GET parameter when rewritten by htaccess

> ID：14808317
> 
> 赞同：0
> 
> 时间：2013-02-11T08:25:43.777
> 
> 标签：php, url, variables, dynamic

This is my default dynamic link:

> www.example.com/news/index.php?id=5&title=Test-Title-3

This is the link that have been rewritten by htaccess:

> www.example.com/news/5/Test-Title-3

Now I wish to get the id variable (which is 5) and/or title variable (which is Test-Title-3) with PHP.

I have tried using `$_GET['id']` but returns

> index.php/Test-Title-3

or using $_GET['title'] which returns nothing. Any idea how to get the variable?

(Edited) This is my .htaccess file, in case of need:

```
Options +FollowSymLinks Options All -Indexes 
<files .htaccess> 
  order allow,deny 
  deny from all 
</files>
RewriteEngine on
RewriteRule (.*)/(.*)/ index.php?id=$1&title=$2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:10:18.823

您可以使用 php 获取 id 值。只需使用以下代码：

```
 <?php
      $url = $_SERVER['REQUEST_URI'];
      $val = explode("/", $url);
      echo "Your id is: ".$val[2];
   ?> 
```

希望这可以帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:32:46.077

您的 .htaccess 重写规则应该是：

```
RewriteRule ^news/([0-9]+)/([a-zA-Z\-]+)$ /news/index.php?id=$1&title=$2 [QSA,L] 
```

`$1`和`$2`是根据 和 中包含的表达式定义`(`的`)`。这将向用户显示 url `www.example.com/news/5/Test-Title-3`，而您的脚本的实际 URL 将是这样，`www.example.com/news/index.php?id=5&title=Test-Title-3`您将能够像往常一样使用。`$_GET['id']``$_GET['title']`

# javascript - jQuery - 针对兄弟姐妹、父母、后代和其他家庭动物

> ID：14808321
> 
> 赞同：3
> 
> 时间：2013-02-11T08:25:56.717
> 
> 标签：javascript, jquery, css-selectors, siblings, targeting

我有一个小标记测试来切换 div 。

一个（工作）模型可以在这里找到：http: [//jsfiddle.net/obmerk99/d78aF/1/](http://jsfiddle.net/obmerk99/d78aF/1/)

问题是，我需要将隐藏/显示链接放在另一个 div 中，如下所示：

[http://jsfiddle.net/obmerk99/d78aF/2/](http://jsfiddle.net/obmerk99/d78aF/2/)

.. 当我移动它时，它对我的​​所有努力都不起作用。

我试过了 ：

`jQuery(this).next().next('.toggle').toggle('slow');`

和

`jQuery(this).next('.toggle').toggle('slow');`

还有许多其他人，但这只是反复试验-而我想了解这个家庭的东西（我想我不是一个家庭的人是潜意识的；影响我的编码能力:-)）

说到理解，在我的一次试验和错误中，我做了这个：

[http://jsfiddle.net/obmerk99/d78aF/5/](http://jsfiddle.net/obmerk99/d78aF/5/)

这是行不通的，但是突然添加一个小的`</br>`使它起作用。

[http://jsfiddle.net/obmerk99/d78aF/4/](http://jsfiddle.net/obmerk99/d78aF/4/)

空`</br>`标签是否被视为“兄弟”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:38:53.607

试试这个：http: [//jsfiddle.net/d78aF/6/](http://jsfiddle.net/d78aF/6/)

```
jQuery(this).siblings('.toggle').toggle('slow'); 
```

根据您的评论，您可以这样做：http: [//jsfiddle.net/d78aF/7/](http://jsfiddle.net/d78aF/7/)

```
jQuery(document).find('.toggle').toggle('slow'); 
```

新小提琴：http: [//jsfiddle.net/d78aF/8/](http://jsfiddle.net/d78aF/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:37:15.883

> 空`</br>`标签是否被视为“兄弟”？

自己不试试怎么办？

```
<div id='firstEl'></div>
<br/>
<div></div>

<div id='siblings'></div> 
```

然后在你的js代码中：

```
$(function(){
  $('#siblings').text($.makeArray($('#firstEl').siblings()).join(','));
}); 
```

结果：

```
[object HTMLBRElement],[object HTMLDivElement],[object HTMLDivElement] 
```

您可以看到该`<br/>`元素被视为兄弟姐妹

[http://jsfiddle.net/EP5bj/](http://jsfiddle.net/EP5bj/)

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:42:12.330

您可以考虑一种更有针对性的方法，在 HTML 标记中指定要隐藏的 div。这是许多包的常见做法，例如 jQuery Mobile。

[http://jsfiddle.net/turiyag/R5sDr/](http://jsfiddle.net/turiyag/R5sDr/)

```
<p class="hider" for="banks">Hide the banks!</p>

$(".hider").click(function(e) {
    var id = $(this).attr("for");
    $("#" + id).hide("slow");
    log("Hiding #" + id);
}); 
```

# java - ArrayList to int[][] - index out of bounds exception

> ID：14808325
> 
> 赞同：-5
> 
> 时间：2013-02-11T08:26:28.937
> 
> 标签：java, arraylist

I am interested in returning an int[][] via passing non-null parameters of single and dual ArrayLists to a class method, such as:

```
//outer loop
ArrayList<ArrayList<Integer>> rowsInMatrixA;
//inner loop
ArrayList<Integer>  colsInMatrixA; 
```

using only native Java. I have searched high and low here, in Java API, Java tutorials, and many other places. All ideas and suggestions welcome.

***EDIT*:** here's what I've tried:

```
 public static  int[][] convertIntegers(ArrayList<ArrayList<Integer>> rows, ArrayList<Integer>   cols)
{
    int[][] newMatrix = new int[rowsInMatrixA.size()][colsInMatrixB.size()];
    //iterate outer, through rows 
    for (int i=0; i < newMatrix.length; i++)
    {
        //iterate inner, through columns
        for(int j = 0; j < newMatrix[0].length; j++){

            newMatrix[i][j] = rows.get(i).get(j);
        }
    }
    return newMatrix;
} 
```

it still doesn't work: I get an IndexOutOfBoundsException on this line when I compile and try to get a printout in main:

```
 newMatrix[i][j] = rows.get(i).get(j); 
```

How can this be resolved? I would appreciate any help. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:47:48.317

您声明您的功能错误：

它应该返回`int[][]`而不是`int[]`.

此外，`newMatrix[i]`表示一维数组。你不能把整数放进去。改为使用`newMatrix[i][j]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:34:28.297

我认为这可以通过遍历arraylist来轻松完成。

# json - 无法将 gauge.js 与 jsf 页面（primefaces）集成

> ID：14808326
> 
> 赞同：0
> 
> 时间：2013-02-11T08:26:29.267
> 
> 标签：json, jsf-2, primefaces, gauge

我想在我的 jsf(primefaces) 应用程序中使用[gauge.js 。](https://github.com/bernii/gauge.js)到目前为止，我处理了 primefaces 组件（不需要集成）。现在，我想从 jsf 页面访问类属性（可能通过 Json 响应）以生成**gauage**。我阅读了一个建议生成 json 响应的[解决方案](https://stackoverflow.com/questions/10982762/how-to-generate-json-response-from-jsf)，但我没有正确理解它。[bernii](http://jsfiddle.net/7Z2z2/)的 jsFiddle 表明它需要一个动态值来创建仪表。

```
<------sampleClass------>
   public int func(){
      return aValue; }

<-----JSF----->
<canvas id="gauge"></canvas>

<------Script----->
var gaugeTarget = document.getElementById('gauge');
var gauge = new Gauge(gaugeTwoTarget);
gaugeTwo.maxValue = 100;
gaugeTwo.set(); //how can i get value return by func() here........... 
```

[BalusC](http://balusc.blogspot.in/2009/05/javajspjsf-and-javascript.html)还写了一篇很棒的文章（Java/JSP/JSF 和 JavaScript）。再次 m 无法实现它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:36:35.683

我错过了您关于*其他*解决方案的问题中的那一部分...

* * *

**无论如何**，您也可以使用页面中的隐藏字段来解决它...

**Bean**（你的 bean 类）

```
int theValue;//add getter and setter

@PostConstruct
public void init(){
    theValue = func();  
} 
```

**页面**（您的 xhtml）

```
<h:inputText id="myFuncValueId" value="#{myBean.theValue}" style="display:none"/> 
```

**js**

```
gaugeTwo.set(document.getElementById('myFuncValueId').value); 
```

# c# - 错误的日期格式 C#, Oracle

> ID：14808327
> 
> 赞同：1
> 
> 时间：2013-02-11T08:26:30.837
> 
> 标签：c#, oracle

我正在尝试以正确的格式（dd/mm/yyyy）获取我的日期。目前它的格式为：MM-DD-YYYY HH24:MI:SS 当我将其更改为 dd/mm/yyyy 时，它可以在数据库（Oracle）中使用。一旦我在我的应用程序中运行它，我就会得到异常：IndexOutOfRange at：

```
this.InfoList9.Add(dr["start_rcv_datetime"].ToString()); 
```

请在下面查看我的代码。

```
public List<String> InfoList = new List<String>();

private void populatelblDate()
{
    conn.Open();
    string query;
    query = "select to_char(dg.start_rcv_datetime,'dd/mm/yyyy') from dc_pallet dp, dc_pallet_stock dps , dc_grv dg , sku s ,prod_size ps,colour c ,purch_order_carton_sku pocs , dc_crane_instruc dci where dps.pallet_id_no = '" + palletId.ToString() + "' and dp.pallet_id_no = dps.pallet_id_no and dg.dc_grv_id_no = dps.dc_grv_id_no and dg.order_no = dps.order_no and dg.company_id_no = dps.company_id_no and s.company_id_no = dps.company_id_no and s.company_id_no = dg.company_id_no and dps.company_id_no = c.company_id_no and dps.company_id_no = ps.company_id_no and s.prod_size_id_no = ps.prod_size_id_no and s.colour_id_no = c.colour_id_no and dps.company_id_no = ps.company_id_no and pocs.order_no = dps.order_no and pocs.carton_code = dps.carton_code and pocs.company_id_no = dps.company_id_no and pocs.sku_id_no = s.sku_id_no and dci.pallet_id_no(+) = dp.pallet_id_no";

    OracleCommand cmd = new OracleCommand(query, conn);
    OracleDataReader dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        this.InfoList.Add(dr["start_rcv_datetime"].ToString());
    }
    dr.Close();
    conn.Close();
}

private void frmInfo_Load(object sender, EventArgs e)
{ 
    populatelblDate();
    lbl1.Text = this.InfoList[0];
} 
```

然后我也有一个上一个和下一个按钮......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T08:30:08.967

您的`IndexOutOfRange`例外表明*直接*的问题是结果集不包含`start_rcv_datetime`- 可能是由于`to_char`转换的列。

根本不要在数据库端处理*字符串。*将值获取为 a `DateTime`，然后在*客户端*将其格式化为您想要的任何格式。

用于`dr.GetDateTime`获取值，已从`to_char`查询中删除部分：

```
query = "select dg.start_rcv_datetime from ...";

using (OracleCommand cmd = new OracleCommand(query, conn))
{
    using (OracleDataReader dr = cmd.ExecuteReader())
    {
        int dateColumn = dr.GetOrdinal("start_rcv_datetime");
        while (dr.Read())
        {
            DateTime date = dr.GetDateTime(0);
            // Or whatever - consider cultural implications
            string text = date.ToString("dd/MM/yyyy");
            InfoList.Add(text);
        }
    }
} 
```

（请注意这些`using`语句 - 您应该始终确保清理与数据库相关的资源。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:42:38.427

您的第一列没有名称，因此您无法使用`"start_rcv_datetime"`

直接的解决方案是将sql更改为读取

```
query = "select to_char(dg.start_rcv_datetime,'dd/mm/yyyy') as start_rcv_datetime from dc_pallet dp, dc_pallet_stock dps , dc_grv dg , sku s ,prod_size ps,colour c ,purch_order_carton_sku pocs , dc_crane_instruc dci where dps.pallet_id_no = '" + palletId.ToString() + "' and dp.pallet_id_no = dps.pallet_id_no and dg.dc_grv_id_no = dps.dc_grv_id_no and dg.order_no = dps.order_no and dg.company_id_no = dps.company_id_no and s.company_id_no = dps.company_id_no and s.company_id_no = dg.company_id_no and dps.company_id_no = c.company_id_no and dps.company_id_no = ps.company_id_no and s.prod_size_id_no = ps.prod_size_id_no and s.colour_id_no = c.colour_id_no and dps.company_id_no = ps.company_id_no and pocs.order_no = dps.order_no and pocs.carton_code = dps.carton_code and pocs.company_id_no = dps.company_id_no and pocs.sku_id_no = s.sku_id_no and dci.pallet_id_no(+) = dp.pallet_id_no"; 
```

但是，您可以简单地将日期作为日期时间从数据库中返回，然后在结果上使用 string.Format

例如。

```
this.InfoList.Add(string.Format("{0:dd/MM/yyyy}", dr["start_rcv_datetime"])); 
```

# tsql - 使用“rowversion”作为主键列

> ID：14808328
> 
> 赞同：1
> 
> 时间：2013-02-11T08:26:37.020
> 
> 标签：tsql, primary-key, sql-server-2012, rowversion

我正在使用 SQL Server 2012，并且我想创建一个“更改”表 - 当第二个表列值发生更改时，它将使用来自其他表的数据填充。

我正在向“更改”表中添加“datatime2”和“rowversion”列，以便跟踪何时进行更改。

可以使用“rowversion”作为主键吗？

我在[这里](http://msdn.microsoft.com/en-us/library/ms182776%28v=sql.110%29.aspx)读到，如果当前行已更新，它将被更改，这就是为什么它不是“主键”使外键无效的好候选者。

无论如何，如果它不会用作外键并且“更改”表的行将永远不会被更新（只会插入新行）是可以使用“rowversion”作为PK还是我应该使用附加列?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T01:49:16.330

[这里](http://www.sqlservercentral.com/blogs/toddmcdermid/2012/05/08/how-to-use-t-sql-timestamp-rowversion-in-ssis/)有一些很好的信息：

> 仔细阅读 MSDN 页面还表明，如果 SELECT INTO 语句使用不当，可能会出现重复的 rowversion 值。有什么要注意的。

我会坚持使用原始数据中的 Identity 字段，并将其转移到具有自己的 Identity 字段的更改跟踪表中。

# r - tmPlot 在命名空间中，但未找到其依赖项

> ID：14808337
> 
> 赞同：6
> 
> 时间：2013-02-11T08:27:27.843
> 
> 标签：r, namespaces, treemap

我有一个使用`tmPlot`from 函数的包`treemap`，但是当我尝试使用该函数时，它会抛出一个错误，即未加载其依赖项之一：

```
Error in tmPlot(data, index = index, vSize = vSize) : 
  could not find function "brewer.pal" 
```

依赖项已安装并位于命名空间中。

这个问题有一点设置，是一个包问题，但我试图让它尽可能小：

**确保您已安装`treemap`（及其所有依赖项）。**

**我创建了一个名为“anRpackage”的目录。里面是一个文件夹（'R'）和一个包含以下文本的说明文件：**

```
Package: anRpackage
Title: What the package does (short line)
Version: 1.0
Author: Who wrote it
Maintainer: Who to complain to <yourfault@somewhere.net>
Description: More about what it does (maybe more than one line)
License: What license is it under?
Imports:
    treemap
Collate:
    'maketree.R' 
```

**在 R/ 文件夹内有一个名为“maketree.R”的 R 文件。它的内容是：**

```
#' maketree
#' 
#' @importFrom treemap tmPlot
#' @export maketree

maketree <-
function(data, index, vSize){
  tmPlot(data, index=index, vSize=vSize)
} 
```

**假设您位于“anRpackage”上方的目录中，请运行以下脚本：**

```
library(roxygen2)
roxygenise("anRpackage/")

library(devtools)

build("anRpackage")
install("anRpackage") 
```

**重新启动 R（最好使用 --vanilla）并运行以下命令：**

```
library(anRpackage)

data(mtcars)
maketree(mtcars, "cyl", "mpg") 
```

你应该得到我一开始描述的错误。为什么会这样？`RColorBrewer`被列为 Depends for `treemap`，所以它应该是自动导入的，不是吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T13:33:40.560

问题确实出在树形图上。`treemap`使用`brewer.pal`, 应该`Imports: RColorBrewer`和`importFrom(RColorBrewer, brewer.pal)`.

就目前而言，如果用户说`library(treemap)`，treemap 和 RColorBrewer 附加到`search()`路径，并且在搜索路径上找到`tmPlot`评估时，一切正常。`brewer.pal`当然，如果用户说`brewer.pal="yeast"`什么的话，包装会损坏，因为会发现错误的符号；这是名称空间的原因之一，以保护树形图的功能免受用户可能做的事情。

但是当你（正确地） Imports: treemap 时会发生什么？树图已加载（到内存中），但树图及其依赖项均未附加（到搜索路径）。所以`brewer.pal`没有找到。

如果树图是 Imports: RColorBrewer，那么当树图通过调用附加到搜索路径`library(treemap)`时，以及仅导入到您的包中时，都会找到 brewer.pal。

联系 treemap 的维护者，要求他们更仔细地构建他们的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T03:40:25.303

在调用之前`tmPlot(data, index = index, vSize = vSize)`，您需要加载 RColorBrewer：

```
require(RColorBrewer) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:46:35.157

我认为这是由于您使用`Imports`而不是`Depends`在`DESCRIPTION`文件中。

如果使用`Depends: treemap`，则在`treemap` 加载包时会加载并附加包，因此`treemap`也会加载依赖项。

如果使用`Imports: treemap`，则仅导入指定的命名空间，即您可以`treemap`在函数中使用变量。但似乎在这种情况下`treemap`没有加载依赖项。

所以我认为你应该要么使用`Depends: treemap`（但现在似乎在推广使用），或者直接从你的包中`Imports`导入。`RColorBrewer`

抱歉，不确定这是否真的回答了您的问题，您可能已经完全了解所有这些要点......

# extjs - 如何使用 Sencha Touch 中的商店从控件中填充 Ext.dataview.List？

> ID：14808339
> 
> 赞同：1
> 
> 时间：2013-02-11T08:27:32.753
> 
> 标签：extjs, sencha-touch, sencha-touch-2

当在. `Ext.dataview.List`_ 知道怎么做吗？使用我的以下代码，我可以看到空的。调试时我可以看到正确填充。`Store``Controller``Ext.dataview.List``storeEvents2`

如果可能，请向我提供代码示例。

```
populateViewsAfterLogIn: function (){
    var me = this;
    debugger
    var storeEvents2 =  Ext.getStore('Events2');
    storeEvents2.load();
    storeEvents2.sync();
    var myEventsList = me.getEventsList();
    myEventsList.initialize();
    myEventsList.data(storeEvents2);

}, 
```

* * *

店铺

```
Ext.define('XXX.store.Events2',{
    extend: 'Ext.data.Store',
    requires: ['Ext.data.proxy.JsonP'],

    config:{
        model: 'XXX.model.Event2',
        proxy:{

            type:'jsonp',
            url: Configurations.listAllTimetableEventsCustom,
            reader:'json'
        },
        autoLoad:true,

        sorters: [{ property: 'DateTimeStart', direction: 'ASC'}] ,

        grouper: {
            groupFn: function(item) {
                return item.get('convDate');
            },
            sortProperty: 'groupSorterProp',
            direction: "ASC"
        }

    }
}); 
```

* * *

看法

```
Ext.define("XXX.view.EventsList", {

    extend: "Ext.dataview.List",
    alias: "widget.eventslist",
    config: {

        loadingText: "Loading Events...",
        emptyText: '<div class="notes-list-empty-text">No notes found.</div>',
        onItemDisclosure: false,
        itemTpl:    '<div class="list-item-title">\n\
                        <div class="list-item-title-row">\n\
                            <div class="bl-hours"><span class="timetable-hours">{DateTimeStartConverted}</span></div>\n\
                               <div class="bl-event">{EventTitle}</div>\n\
                        </div>\n\
                     </div>',
        grouped: true

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:37:48.290

调用时应该会出错，`data()`因为此方法不存在。请改用[setData](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.List-method-setData)。

**更新**

您应该将自己绑定到 store 'load' 事件

```
populateViewsAfterLogIn: function (){
    var me = this,
        store = Ext.getStore('Events2');
    debugger

    me.getEventsList().setStore(store );
    store.load();
} 
```

`setData()`期待一个数组而不是一个存储实例。在您的情况下，您应该在加载之前将商店绑定到列表。Sencha然后会关心任何事情。

# android - Android libgdx 壁纸应用程序在启动时抛出 NoClassDefFoundError 错误

> ID：14808342
> 
> 赞同：1
> 
> 时间：2013-02-11T08:27:44.963
> 
> 标签：android, libgdx, live-wallpaper

我尝试用 libgdx 制作动态壁纸。

![在此处输入图像描述](../Images/9b51ef5007f195705bcfe54a85932f3c.png)

我让一切都喜欢[这里](http://code.google.com/p/libgdx/wiki/ApplicationConfiguration#Live_Wallpapers)。

![在此处输入图像描述](../Images/588182ef972acc39835723b2823f6190.png)

我的应用程序监听器：

```
public class GdxTestActivity implements ApplicationListener {

    @Override
    public void create() {
        // TODO Auto-generated method stub

    }
    @Override
    public void dispose() {
        // TODO Auto-generated method stub

    }
    @Override
    public void pause() {
        // TODO Auto-generated method stub

    }
    @Override
    public void render() {
        // TODO Auto-generated method stub

    }
    @Override
    public void resize(int arg0, int arg1) {
        // TODO Auto-generated method stub

    }
    @Override
    public void resume() {
        // TODO Auto-generated method stub

    }
} 
```

动态壁纸.java：

```
public class LiveWallpaper extends AndroidLiveWallpaperService 
{
    @Override
    public ApplicationListener createListener (boolean isPreview) {
            return new GdxTestActivity();
    }

    @Override
    public AndroidApplicationConfiguration createConfig () {
            return new AndroidApplicationConfiguration();
    }

    @Override
    public void offsetChange (ApplicationListener listener, float xOffset, float yOffset, float xOffsetStep, float yOffsetStep,
            int xPixelOffset, int yPixelOffset) {
            Gdx.app.log("LiveWallpaper", "offset changed: " + xOffset + ", " + yOffset);
    } 
```

为什么我在加载应用程序时看到此错误？

```
Link of class 'Lcom/example/gdxtest01/GdxTestActivity;' failed
Could not find class 'com.example.gdxtest01.GdxTestActivity', referenced from method com.example.gdxtest01.LiveWallpaper.createListener
VFY: unable to resolve new-instance 620 (Lcom/example/gdxtest01/GdxTestActivity;) in Lcom/example/gdxtest01/LiveWallpaper;
VFY: unable to find class referenced in signature (Lcom/badlogic/gdx/ApplicationListener;)
VFY: unable to resolve static field 726 (app) in Lcom/badlogic/gdx/Gdx;
Link of class 'Lcom/badlogic/gdx/backends/android/AndroidLiveWallpaper;' failed
Could not find class 'com.badlogic.gdx.backends.android.AndroidLiveWallpaper', referenced from method com.badlogic.gdx.backends.android.AndroidLiveWallpaperService$AndroidWallpaperEngine.onCreate
VFY: unable to resolve new-instance 520 (Lcom/badlogic/gdx/backends/android/AndroidLiveWallpaper;) in Lcom/badlogic/gdx/backends/android/AndroidLiveWallpaperService$AndroidWallpaperEngine;
VFY: unable to resolve interface method 3145: Lcom/badlogic/gdx/ApplicationListener;.dispose ()V
Link of class 'Lcom/badlogic/gdx/backends/android/AndroidLiveWallpaper;' failed
...
Link of class 'Lcom/badlogic/gdx/backends/android/AndroidLiveWallpaper;' failed
VFY: unable to resolve instance field 1010
02-11 21:31:51.398: threadid=1: thread exiting with uncaught exception (group=0x4001d560)
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: com.badlogic.gdx.backends.android.AndroidLiveWallpaper
at com.badlogic.gdx.backends.android.AndroidLiveWallpaperService$AndroidWallpaperEngine.onCreate(AndroidLiveWallpaperService.java:108)
at android.service.wallpaper.WallpaperService$Engine.attach(WallpaperService.java:648)
at android.service.wallpaper.WallpaperService$IWallpaperEngineWrapper.executeMessage(WallpaperService.java:875)
at com.android.internal.os.HandlerCaller$MyHandler.handleMessage(HandlerCaller.java:61)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

在一些[魔法](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)之后一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:01:33.613

来自`gdx.jar`主项目的 未包含在 Android 中`.apk`。（所有的`com.badlogic.gdx.*`类都在这个 jar 文件中。）

请参阅手动项目设置中的步骤 4、5 和 6：[http ://code.google.com/p/libgdx/wiki/ProjectSetup#Android_project_setup](http://code.google.com/p/libgdx/wiki/ProjectSetup#Android_project_setup)

您可能只是缺少将“gdx.jar”标记为“已导出”的位。右键单击项目，选择`Build Path` `->` `Configure Build Path ...`. 选择`Order and Export`选项卡，确保“gdx.jar”旁边有一个复选标记。

# xcode - 将委托设置为自身时，UIAlertview 委托将崩溃

> ID：14808343
> 
> 赞同：0
> 
> 时间：2013-02-11T08:27:44.317
> 
> 标签：xcode, crash, uialertview, exc-bad-access

我有这段简单的代码：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Contact" message:@"This contact does not exist yet" delegate:self cancelButtonTitle:@"Ok"  otherButtonTitles:@"Not now", nil];
[alert show]; 
```

如果我将委托设置为“nil”，一切都很好。但是，如果我将委托设置为“self”并添加 clickedButtonAtIndex 或 didDismissWithButtonIndex 委托，则应用程序会因 EXC_BAD_ACCESS 而崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:45:20.430

问题是由于我的流量。我有一个调用 URL 的类。Viewcontroller 实际上在响应来自服务器之前很久就完成了。因此，我必须在调用者中实现一个 NSRunLoop 以等待服务器通信完成。基于被调用例程中的一些 ExitCode，我只能显示一个警报并让代理处理按下的按钮。无论如何，感谢 Chakalaka 让我走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:34:06.323

我认为您没有设置 alertView 委托方法。

首先在 .h 文件中设置 alertView 委托协议。

```
 @interface MainViewController : UIViewController<UIAlertViewDelegate> 
```

然后实现这个方法，它会正常工作

```
 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
 {
   switch (buttonIndex)
  {
    case 0:

        break;
    case 1:
        break;

    default:
        break;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:02:34.567

您的问题是您的对象（自我）不再存在！但是 alertview 尝试访问它，所以你得到 EXC_BAD_ACCESS。检查您的委托对象（自我）是否还活着！

# c# - 在 localStorage 中保存 inkManager 的笔画 - windows 8 应用程序

> ID：14808346
> 
> 赞同：1
> 
> 时间：2013-02-11T08:28:14.133
> 
> 标签：c#, windows-8, microsoft-metro, local-storage

好吧，我尝试了很多东西，但我并不真正了解保存在本地存储中的所有内容。自从有了相机我就知道它是如何工作的，但我不知道如何用inkManager制作它。如果你有什么想法？

这是我保存用户想要的位置的代码，但我想在 localstorage 中“自动保存”：

```
private async void save_Button(object sender, RoutedEventArgs e)
    {
        if (_inkManager.GetStrokes().Count > 0)
        {
            try
            {
                Windows.Storage.Pickers.FileSavePicker save = new Windows.Storage.Pickers.FileSavePicker();
                save.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.Desktop;
                save.DefaultFileExtension = ".jpg";
                save.FileTypeChoices.Add("JPG", new string[] { ".jpg" });
                StorageFile filesave = await save.PickSaveFileAsync();
                IOutputStream ab = await filesave.OpenAsync(FileAccessMode.ReadWrite);

                if (ab != null)
                    await _inkManager.SaveAsync(ab);

              //  await save.CopyAsync(ApplicationData.Current.LocalFolder, "merge1.jpg");

                if (save != null)
                {
                    Clipboard.Source = new Windows.UI.Xaml.Media.Imaging.BitmapImage(new Uri("ms-appdata:///local/merge1.jpg"));
                }

            }
            catch (Exception)
            {
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:03:19.343

最终解决方案非常简单：

```
StorageFile myMerge = await ApplicationData.Current.LocalFolder.CreateFileAsync("myimg.png");
IOutputStream ac = await myMerge.OpenAsync(FileAccessMode.ReadWrite);
if (ac != null)
    await _inkManager.SaveAsync(ac); 
```

# c-preprocessor - 预处理器指令：#elif 未定义？

> ID：14808349
> 
> 赞同：5
> 
> 时间：2013-02-11T08:28:23.213
> 
> 标签：c-preprocessor, preprocessor-directive

是否有预处理器指令检查是否未定义常量。我知道该`#ifndef`指令，但我也在寻找`#elif not defined`指令。`#elif not defined`存在吗？

这就是我将如何使用它：

```
#define REGISTER_CUSTOM_CALLBACK_FUNCTION(callbackFunctName) \
    #ifndef CUSTOM_CALLBACK_1 \
        #define CUSTOM_CALLBACK_1 \
        FORWARD_DECLARE_CALLBACK_FUNCTION(callbackFunctName) \
    #elif not defined CUSTOM_CALLBACK_2 \
        #define CUSTOM_CALLBACK_2  \
        FORWARD_DECLARE_CALLBACK_FUNCTION(callbackFunctName) \
    #elif not not defined CUSTOM_CALLBACK_3 \
        #define CUSTOM_CALLBACK_3  \
        FORWARD_DECLARE_CALLBACK_FUNCTION(callbackFunctName) \
    #endif 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T08:30:25.430

怎么样

```
#elif !defined(...) 
```

但是你有更大的问题 - 尾随`\`排除其他指令 - 或者更确切地说使它们非法。因此，即使使用有效的语法，您的定义也不会满足您的要求。

您需要在条件内移动初始定义。

```
#ifndef CUSTOM_CALLBACK_1
    #define CUSTOM_CALLBACK_1 
    #define REGISTER_CUSTOM_CALLBACK_FUNCTION(callbackFunctName) \
    FORWARD_DECLARE_CALLBACK_FUNCTION(callbackFunctName) 
#elif !defined(CUSTOM_CALLBACK_2)
    //..... 
```

# javascript - 禁用然后重新启用点击功能jQuery

> ID：14808351
> 
> 赞同：6
> 
> 时间：2013-02-11T08:28:26.767
> 
> 标签：javascript, jquery, firefox

我有一个文件上传系统，点击上传按钮后，文件通过AJAX上传。上传文件时，我想禁用“选择图像”按钮上的单击功能。目前这是文件选择按钮上的点击功能：

```
$(document).ready(function() {
    $("#file-button").click(function() {
        $('#file').trigger('click');
    });
}); 
```

这工作正常，但我想在 XmlHttpRequest 的进度阶段禁用点击功能，然后在我从服务器收到 200 响应时重新启用点击功能。我已经尝试过`bind()`，`unbind()`它在 Chrome 中运行良好，但在 Firefox 中，在上传过程中，无法单击该按钮，这正是我想要的，然后在我从服务器获得响应后，该按钮被重新启用，但是在firefox 两个文件选择对话窗口同时打开。这是因为上面的函数，我再次使用`bind()`. 有没有人对如何启用，然后禁用按钮而不重新输入点击事件的代码（功能）有任何建议。

像这样的东西会更好：

```
$('#file-button').disable();
$('#file-button').enable(); 
```

我已经尝试过`on()`and`off()`并且它们似乎也不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T04:11:11.567

**解决方案**——感谢 Eric

我将初始点击功能更改为以下内容：

```
$(document).ready(function() {
    $("#file-button").click(function() {
      if ( $('#file-button').attr('disabled') == "disabled" ) {
        return false;
      }
      else {
          $('#file').trigger('click');
      }
    });
}); 
```

我设置以下内容来禁用按钮

```
$('#file-button').attr('disabled','disabled'); 
```

这将重新启用它：

```
$('#file-button').removeAttr('disabled'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T08:50:49.807

使用 jQuery [$.prop()](http://api.jquery.com/prop/)函数禁用按钮：

```
$("input[type=submit]").prop('disabled', true); 
```

向点击处理程序添加条件以检查按钮是否被禁用：

```
$("#file-button").click(function() {
  if (!$(this).is(':disabled')) {
    $('#file').trigger('click');
  }
}); 
```

稍后重新启用该按钮：

```
$("input[type=submit]").prop('disabled', false); 
```

* * *

或者，如果涉及表单，您也许可以使用提交事件而不是单击：

```
$("#whatever-your-form-is").on('submit', function() {
  $('#file').trigger('click');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T08:33:13.653

试试`Attr`jQuery 函数。

```
$('#file-button').attr('disabled','disabled');
$('#file-button').removeAttr('disabled');
```

**测试代码**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(document).ready(function()
    {
        $("#file-button").click(function(e)
        {
            e.preventDefault();
            $(this).attr('disabled','disabled');
            return false;
        });
    });

</script>

<input type="button" id="file-button" value="ClickMe" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:35:22.457

您必须参考输入按钮才能禁用按钮，

像下面的东西

```
 $("input[type=submit]").prob('disabled', true);
  $("inpur[type=submit]").prob('disabled', false); 
```

# python - 如何将系列添加到分层系列

> ID：14808354
> 
> 赞同：1
> 
> 时间：2013-02-11T08:28:37.813
> 
> 标签：python, pandas, series, hierarchical

我有一个`Hierarchical Series`如下

```
data=pd.Series(np.random.randn(10),
    index=[['a', 'a', 'a', 'b', 'b', 'b', 'c', 'c', 'd', 'd'],
    [1, 3, 4, 1, 2, 3, 1, 2, 2, 3]]) 
```

我想在其中插入一个新系列`data`

```
t_series = pd.Series(np.random.randn(10)) 
```

我努力了

```
data['e'] = t_series 
```

但是失败了，请问soemone 可以告诉我如何`Hierarchical Series`动态放大一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:51:47.277

使其成为[DataFrame](http://pandas.pydata.org/pandas-docs/dev/dsintro.html#dataframe)：

```
df = pd.DataFrame(data)

df['e'] = np.random.randn(10)
# or if you already created another series, which perhaps has a different index
df['e'] = t_series.values() 
```

*正如[文档](http://pandas.pydata.org/pandas-docs/dev/dsintro.html)所指出的：A[`Series`](http://pandas.pydata.org/pandas-docs/dev/dsintro.html#series)是一个**一维**标记数组，而 a`DataFrame`是一个**二维**标记数据结构，具有可能不同类型的列。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:12:39.093

如果您只是希望您的二级索引为`range(10)`，您可能需要这样做：

```
t_series = pd.Series(np.random.randn(10), index=[('e ' * 10).split(), range(10)])
t_series 
```

然后使用`concat`：

```
pd.concat([data, t_series]) 
```

# java - 线程内的 Guice 注入器

> ID：14808355
> 
> 赞同：3
> 
> 时间：2013-02-11T08:28:42.153
> 
> 标签：java, dependency-injection, guice

我对使用 Guice 有疑问。我有一个我调用的类，`Main`它是使用 Guice 注入的构造函数和一个方法，每次调用它都会创建一个 class 的线程对象`AppThread`。`AppThread`里面是私有类`Main`。问题是在线程的执行中我想创建一个类对象`ClassX`。该对象是使用 Guice 注入的构造函数。我不知道注入`ClassX`. 我的第一个解决方案是注入线程`Injector`内部`Main`和内部，使用注入器注入类的对象`ClassX`。

是否存在一种更清洁的方法来在线程内注入依赖关系？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T08:37:24.083

与其拥有自己的子类`Thread`（无论如何都不鼓励），不如将“线程代码”编写为实现`Runnable`. 你的`Main`类应该注入这个类（或者`Provider<MyRunnable>`如果你需要实例化未知数量的类，你可以实际注入一个）。然后你的`Main`班级可以创建一个`new Thread(myRunnable)`，它应该很好地结合在一起。

```
public class MyMainClass {
    @Inject
    MyMainClass(Provider<MyRunnable> runnableProvider) { ... }

    public void spawnThread() {
        new Thread(runnableProvider.get()).start();
    }
}

public class MyRunnable implements Runnable {
    @Inject
    MyRunnable(ClassX myX) { ... }
    public void run() {
        ... do work ...
    }
} 
```

# python - 共享队列的进程未正确终止

> ID：14808359
> 
> 赞同：0
> 
> 时间：2013-02-11T08:29:07.703
> 
> 标签：python

我有一个多处理应用程序，其中父进程创建一个队列并将其传递给工作进程。所有进程都使用此队列来创建队列处理程序以进行日志记录。有一个工作进程从此队列中读取并进行日志记录。

工作进程不断检查父进程是否还活着。问题是当我从命令行杀死父进程时，除了一个之外，所有工作人员都被杀死。记录器进程也终止。我不知道为什么一个进程一直在执行。是因为队列中有任何锁等吗？在这种情况下如何正确退出？我在用

```
 sys.exit(0) 
```

退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:36:21.700

我`sys.exit(0)`只会在没有其他机会的情况下使用。干净地完成每个线程/进程总是更好。您的流程中会有一些`while`循环。所以就在`break`那里做，这样它就可以结束了。

离开前整理好，即释放所有外部资源的句柄，如文件、套接字、管道。

这些句柄中的某处可能是您看到的行为的原因。

# c# - MVC4 - Razor - 动态模块内容？

> ID：14808362
> 
> 赞同：3
> 
> 时间：2013-02-11T08:29:31.460
> 
> 标签：c#, asp.net, .net, razor

一直在学习 MVC4 和 Razor 并且有一个球，但是我对我想要实现的方法有疑问：

我有一个页面，上面有一些面板（如仪表板），还有一组图标，您可以将其拖放到这些面板中，以将模块“安装”到该面板中，并显示其内容。从 UI 的角度来看，这很棒，现在我正在考虑将它与更丰富的东西挂钩：

是）我有的：

*   内容模块
*   具有 Render() 方法的每个模块的具体类集
*   处理模块放置事件的控制器和一个激活器以获取该模块放置的类的实例

简单的东西真的，理想情况下，我想要它，以便每个模块负责它自己的内容，但是除了从 Render 返回一个字符串之外，还有更好的方法，比如将特定的视图标记分配给那个特定的具体类，所以我可以控制正在渲染的内容，但是以更加结构化的方式，想知道这里最好的方法是什么？

谢谢你的时间！

丹尼

编辑：如果有办法将视图与我的具体类结合起来，你会想吗？例如ViewForum.cshtml 绑定到ForumModule.cs，以某种方式实例化视图并从它的对象渲染中获取一个字符串，然后通过一个字符串将其传递回去以插入到我的面板中？

面板示例：

```
<section class="main box droppable" id="MainPanel">
<div class="padding">
Panel 1
</div>
</section> 
```

jQuery 事件

```
 $(".droppable").droppable({
        hoverClass: 'boxhover',
        drop: function (event, ui) {
            $.ajax({
                type: "POST",
                url: '/Home/AddModule/' + $(ui.draggable).attr("id") + "?returnTo=" + this.id,
                success: function(data) {
                $("#" + data.Target).html(data.Content);
                }
            });
        }
    }); 
```

控制器方法

```
 [AcceptVerbs(HttpVerbs.Post)]
    public JsonResult AddModule(string id, string returnTo)
    {

        string content = DemoResolve(id);
        try
        {
            IContentModule module  =  (IContentModule)  Activator.CreateInstance(Type.GetType("Foo.Bar.BLLForumModule,Foo.Bar"));
            content  = module.Render();
        }catch(Exception exp)
        {
            throw;
        }
        return Json(new { Target = returnTo, Content = content });
    } 
```

所以在我有那个module.Render（）的地方，我想我想要获得一个局部视图或其他东西并根据我手头的对象进行渲染

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:31:53.717

与我的一位同事一起工作，并提出了一种将视图和模块以某种动态方式绑定在一起的解决方案，例如，如果 jQuery 帖子返回模块“BLLForumModule”的字符串，我们有以下内容：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public JsonResult AddModule(string id, string returnTo)
    {

        string content = DemoResolve(id);
        try
        {
            content = RenderView("BLLForumModule");
        }catch(Exception exp)
        {
            throw;
        }
        return Json(new { Target = returnTo, Content = content });
    }

private string RenderView(string moduleName)
    {
        string result = "";

        IContentModule module = (IContentModule)Activator.CreateInstance(Type.GetType("Foo.Bar." + moduleName  +",Foo.Bar"));

        this.ViewData.Model = module;

        using (var sw = new System.IO.StringWriter())
        {

            ViewEngineResult viewResult = ViewEngines.Engines

            .FindPartialView(this.ControllerContext, moduleName);

            var viewContext = new ViewContext(this.ControllerContext,

            viewResult.View, this.ViewData, this.TempData, sw);

            viewResult.View.Render(viewContext, sw);

            result = sw.GetStringBuilder().ToString();

        }
        return result;
    } 
```

这假设 Foo.Bar 程序集中有一个与我们尝试加载的视图同名的类（BLLForumModule.cshtml 和 Foo.Bar.BLLForumModule.cs）

然后，我从视图中取出渲染的内容，并将其作为 JsonResult 作为 Content 部分，将 JsonResult 的 Target 部分作为需要放入的面板的 ID。

我认为这感觉很好，欢迎任何建议或改进！

# android - 调用“notifyDataSetChanged”后，setText 方法不适用于列表视图中的 editText

> ID：14808364
> 
> 赞同：0
> 
> 时间：2013-02-11T08:29:49.630
> 
> 标签：android, android-edittext, settext, notifydatasetchanged

我正在使用 eclipse 开发一个 android 应用程序。我有一个列表视图，其中每一行都包含一个 EditText。当我单击 EditText 时，我想做两件事。

1：使用我的数据数组中的文本重新加载所有 EditText。

2：将单击的 EditText 的文本设置为常量字符串（例如“0”）。

为此，我将以下 onclicklisetner 用于 EditText。

```
 myEdittext.setOnClickListener(new View.OnClickListener() 
{
     @Override
      public void onClick(View v) 
       {
        adapter.notifyDataSetChanged();//adapter is my arrayadapter of the listview
        EditText clickedText = (EditText)v;  
        clickedText.setText("0");
       }
 }); 
```

如您所见，我正在使用“notifyDataSetChanged”方法重新加载列表视图中的 EditText，并使用“setText”方法将单击的 EditText 的文本设置为“0”。

但是“setText”方法不起作用。如果我评论“adapter.notifyDataSetChanged()”行，则“setText”方法正在工作。

我还尝试通过在延迟后调用 setText 方法来做到这一点（以检查 notifyDataSetChanged 是否正在启动新线程）但失败了。

如何使这两种方法都在我的 onClick 方法中工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:48:35.010

您可以使用另一种方法来做到这一点。

您可能正在使用`ArrayList`说 mList 设置 ListView 适配器。

现在，`onItemClick`在列表视图的侦听器中，您可以获得在`ListView`. 在数组列表中该位置的`onClick()`值，例如。然后调用 notifyDataChanged()`0``mList.set(position, 0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:51:55.920

尝试 ：

所以这种行为的原因是当你调用 adapter.notifyDataSetChanged() 时，你的 View V 很有可能被回收，因此它不再指的是被点击的那个。您真正想要做的是更改列表，以便在调用 notifyDataSetChanged 时将相应地加载所有值。

请分享您的适配器代码。

```
 myEdittext.setOnClickListener(new View.OnClickListener() 
{
     @Override
      public void onClick(View v) 
       {
        //adapter is my arrayadapter of the listview
        //EditText clickedText = (EditText)v;  
        //clickedText.setText("0");

         //Do some thing to change the adapter data list.
         adapter.notifyDataSetChanged();
       }
 }); 
```

# c# - 删除根时的垃圾收集

> ID：14808365
> 
> 赞同：4
> 
> 时间：2013-02-11T08:29:49.823
> 
> 标签：c#, garbage-collection

我有一个用 c# 实现的二叉树，其方法**clear()**使**根为 null**，从而删除了对堆中根节点的引用。这使得堆中的根节点有资格进行垃圾回收。

但是**在垃圾收集周期**中，只会**收集根节点**，然后它的两个子节点将在下一个周期中有资格进行垃圾收集，并且需要与树的深度一样多的周期来移除树，**或者整个树在堆**在一个周期内收集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:34:45.870

整个树将被收集，因为 GC 在一个循环中找到了所有无法到达的对象。因为你的树中没有一个节点是可访问的（从某个活动的根），所以应该对整个节点集进行 GC。

这是 GC 工作的一种有效方式 - 但它也是处理自引用数据结构（如双向链表）的好方法（这会导致任何不采用“可访问性”的算法出现问题一些可达的根”考虑在内）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:46:54.920

实际上，这取决于您的对象存在多长时间。

.NET 使用一种名为“标记和扫描”的算法，[此处](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29)对其进行了描述。该算法基本上将所有内容标记为删除，除了可以到达的内容。您的对象将在此处的一次迭代中被删除。

然而，天真的标记和扫描将花费大量时间，因为大多数“长寿”对象将在 GC 中存活下来。您拥有的对象越长，GC 标记所有对象所需的时间就越多。这就是 .NET 跟踪对象存活了多少 GC 周期的原因。如果它存活了几次，下一次 GC 将跳过该对象。这些被称为“世代”，并在[MSDN](http://msdn.microsoft.com/en-us/library/ee787088.aspx#generations)上进行了描述。简单地说，一个对象在 GC 循环中存活的次数越多，垃圾收集器访问它以进行删除的频率就越低。

但是，一旦您的结构在某个点被 GC 标记为“未引用”，整个结构将在一次传递中被删除。

# operating-system - 为什么我们有内核时还需要驱动程序？

> ID：14808368
> 
> 赞同：0
> 
> 时间：2013-02-11T08:29:57.140
> 
> 标签：operating-system, kernel

我目前正在上一门关于操作系统的课程。

我知道内核是操作系统的核心部分，它充当用户应用程序和计算机数据处理元件（如 CPU）之间的桥梁。

那么为什么我们需要驱动程序（例如触摸板驱动程序），内核不是控制所有计算机硬件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T08:35:10.050

因为实际上有成千上万（如果不是数十万）生产硬件设备的公司。操作系统公司无法编写软件来处理所有这些问题，因此他们提供了一个通用编程模型，这些硬件公司可以使用该模型编写可以与他们的硬件对话的软件。

需要注意的重要一点是，尽管驱动程序实际上并不是内核的一部分，但它们确实具有一些低级权限（直接访问硬件），因为它们的代码在执行模式下运行，这与在用户模式下运行并且通常执行的普通应用程序不同不直接访问硬件。关键是，一旦操作系统提供了一种编写硬件控制软件（称为驱动程序）的方法，任何供应商或个人都可以自由编写可以利用他们/他的硬件设备的特殊功能的软件。

另请注意，某些硬件设备遵循众所周知的标准（例如键盘、鼠标、许多视频驱动程序、监视器等），并且大多数操作系统都内置了对这些设备的支持。另一方面，一些设备没有或不遵循标准，而另一些设备可以同时具有这两种特性，即默认驱动程序可以访问的特性子集，以及不遵循任何标准的特性子集因此默认驱动程序不支持。在所有这些情况下，硬件制造商都会提供自己的驱动程序，该驱动程序了解其硬件的来龙去脉，因此可以有效地利用所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:35:17.120

当然内核确实控制着所有的硬件。但是，那里有太多不同的硬件设备。

为了处理这些种类繁多的不同设备，开发人员编写了专门的模块——这些模块被称为驱动程序。

# java - 如何获取 NIO DatagramChannel 的 remoteAddress()

> ID：14808373
> 
> 赞同：2
> 
> 时间：2013-02-11T08:30:07.600
> 
> 标签：java, nio

我正在使用 NIO 编写一些客户端代码来侦听来自多个服务器的 UDP 数据包（其中许多被配置为回复同一个端口）。我尝试为每个已知服务器[NIO 设置专用通道失败了。2 个客户端绑定到同一个端口，只有 1 个可以读取](https://stackoverflow.com/questions/14753293/nio-2-clients-binding-to-same-port-only-1-can-read)。

所以我现在试图绑定到一个端口而不指定目的地

```
DatagramChannel channel = DatagramChannel.open();
channel.configureBlocking(false);
channel.socket().bind(new InetSocketAddress(port)); 
```

我的选择器现在成功接收到从我的所有服务器定向到此端口的所有 UDP 数据包

```
...    
  SelectionKey selKey = it.next();
  if (selKey.isValid() && selKey.isReadable()) {
    DatagramChannel sChannel = (DatagramChannel) selKey.channel();
    sChannel.getRemoteAddress();//My problem lies here
 .... 
```

正如预期的那样 sChannel.getRemoteAddress() 返回 null 因为我没有配置它。那么如何确定这个数据包的来源呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:35:25.687

DatagramPacket 的源地址在数据包中。请参阅 Javadoc。或者，如果您连接 DatagramChannel 或其底层 DatagramSocket，您可以从那里获取它……但不是其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-22T20:34:49.077

要获取发送者的远程地址，您需要执行如下数据接收：

```
if (key.isReadable()) {
    ByteBuffer byte_buffer = ByteBuffer.allocate(buffer_size);
    InetSocketAddress remote_address = (InetSocketAddress) ((DatagramChannel)key.channel()).receive(byte_buffer);
    byte_buffer.flip();
} 
```

如您所见，***DatagramChannel类的******接收***方法返回发送者的地址。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T15:14:14.967

getRemoteAddress() 将在 DatagramChannel 连接上返回 null。

我使用了以下代码：

```
//Declare the client address to be any random value, Just for initialization                
InetSocketAddress clientAddress = new InetSocketAddress("127.0.0.1",1000);
//Declare the clientaddress' buffer 
ByteBuffer buffer = ByteBuffer.allocate(255);
// Receive from the buffer
clientAddress = (InetSocketAddress)clientChannel.receive(buffer);
//This address is retained by masking receive 
System.out.println("Client address : " + clientAddress); 
```**

# android - 以编程方式设置按钮 ID

> ID：14808374
> 
> 赞同：6
> 
> 时间：2013-02-11T08:30:07.403
> 
> 标签：android, button

安卓 2.3.3

我有一个 N 行 N 列的表。对于每一行，我应该动态添加 4 个按钮，然后根据单击的按钮执行操作。我知道我们可以使用整数值设置按钮 ID `button.setID()`，但我想知道我们是否可以将 ID 设置为我们在 XML 文件中设置的字符串值，例如`btnXYZ1`等`btnXYZ2`，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T08:31:48.103

您可以为此目的使用标签。例如

```
btn.setTag("btXYZ"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T08:33:56.237

```
for (int i=0;i<nob;i++) {
     Button btn = new Button(this);
     btn.setId(i+1);
     btn.setText("Button"+(i+1));
     btn.setOnClickListener(btnclick); <<<<<<<set click
     btn.setLayoutParams(lprams);
     dynamicview.addView(btn);
} 
```

并将此侦听器添加到任何方法之外和类内部

```
OnClickListener btnclick = new OnClickListener() {

    @Override
    public void onClick(View view) {

        switch(view.getId()) {
            case 1:
                //first button click
                break;
                //Second button click
            case 2:
                break;
            case 3:
                //third button click
                break;
            case 4:
                //fourth button click
                break;
             .
             .
             .
            default:
                break;
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T08:33:58.233

您在 XML 文件中使用的字符串对应于 R.java 中的 int，因此实际上是 int。setId() 方法只接受一个 int 值作为参数。您可以在常量文件中定义您的 ID，例如：

```
public class Ids {
    public static final int ID_ONE = 1;
} 
```

然后将其用作：

```
button.setId(Ids.ID_ONE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:33:37.557

不，您不能将其设置为`String`，id 是`int`值，即使您从中设置它`XML`只是`int`值的资源名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T08:43:32.730

不，您不能将其设置为 String，id 是 int 值，即使您从 XML 设置它也只是 int 值的资源名称

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T08:45:18.383

如果您仍然有对视图的引用，则可以简单地将它们全部保存到 HashMap 中，例如使用 HashMap。

为了避免任何拼写错误，另一种选择是使用枚举作为 hashMap 的键，例如：HashMap。

# php - 致命错误：函数名称必须是第 221 行 web/mhswpindahprodi.det.php 中的字符串

> ID：14808381
> 
> 赞同：0
> 
> 时间：2013-02-11T08:30:35.417
> 
> 标签：php, string, runtime-error

这是一些代码

```
TampilkanJudul("Mahasiswa Pindah Prodi");

    if (!empty($mhswid)) {
      $gos = (empty($_REQUEST['gos']))? 'KonfirmasiPindah' : $gos;
      $mhsw = GetFields("mhsw m
        left outer join program prg on m.ProgramID=prg.ProgramID
        left outer join prodi prd on m.ProdiID=prd.ProdiID
        left outer join statusmhsw sm on m.StatusMhswID=sm.StatusMhswID",
        'm.MhswID', $mhswid,
        "m.*, prg.Nama as PRG, prd.Nama as PRD, sm.Nama as SM, sm.Keluar");
      if ($mhsw['Keluar'] == 'Y')
        echo ErrorMsg("Tidak Dapat Dipindahkan",
          "Status Mahasiswa: <b>$mhsw[SM]</b> yang berarti sudah tidak
          dapat dipindah lagi.
          <hr size=1 color=silver>
          Pilihan: <a href='?mnux=mhswpindahprodi'>Kembali</a>");
      else $gos ($mhsw); // line 221
    }
    ?> 
```

它的错误致命错误：

> 函数名称必须是第 221 行 /var/www/clients/client9/web31/web/mhswpindahprodi.det.php 中的字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T06:22:16.967

```
 $gos = (empty($_REQUEST['gos']))? 'KonfirmasiPindah' : $gos; 
```

将此行替换为：

```
 $gos = (empty($_REQUEST['gos']))? 'KonfirmasiPindah' : $_REQUEST['gos']; 
```

测试变量是否存在，然后使用不同的变量是没有意义的；）

# matlab - Matlab - 没有得到预期的结果

> ID：14808382
> 
> 赞同：-1
> 
> 时间：2013-02-11T08:30:44.760
> 
> 标签：matlab, for-loop

我编写了一个应该执行以下操作的函数：

*   将两组作为输入
*   [使用此处](http://code.google.com/p/cs250b-projects/source/browse/trunk/Project3/toolbox/classify/pdist2.m?spec=svn81&r=81)`pdist2`显示的代码计算两组之间的距离。
*   开始时会占用两组之间的距离。然后，对于**第二**组，在每次迭代中，它将 (i,j) 位置设置为`0`并计算此更改的距离。一个，当它进入下一次迭代时，它应该将下一个位置值更改为'0'，同时将之前设置为'0'的值返回到它的*原始值*。
*   请注意，`pdist2`最初返回的结果作为矩阵返回，但为了比较，我将矩阵值相加以用于比较。

基于此，我编写了以下函数（请注意，您可以使用[此处](http://code.google.com/p/cs250b-projects/source/browse/trunk/Project3/toolbox/classify/pdist2.m?spec=svn81&r=81)`pdist2.m`链接中的函数）：

```
 function m = pixel_minimize_distance(x,y)
    sum1=0;
    sum2=0;
    [r c] = size(y);
    d1 = pdist2(x,y);
    [r1 c1] = size(d1);
    for i=1:r1
    for j=1:c1
        sum1=sum1+d1(i,j);
    end
end
maximum = sum1;

for i=1:r
for j=1:c
o = y(i,j)
y(i,j) = 0;
d2 = pdist2(x,y);
[r2 c2] = size(d2);
for i=1:r2
    for j=1:c2
        sum2=sum2+d2(i,j);
    end
end

if sum2 >= maximum
    if o ~= 0
    maximum = sum2;
    m = o;
    end

end

if sum2 <= maximum
maximum = maximum;
end
y(i,j)=o;
end
end
end 
```

现在，这是我作为测试运行的：

```
>> A=[1 2 3; 6 5 4];
>> B=[4 5 3; 7 8 1];
>> pixel_minimize_distance(A,B)

o =

     4

o =

     4

o =

     1

o =

     7

o =

     7

o =

     0

ans =

     7 
```

看到这里的答案是`7`（如果看不到，请向下滚动），而我手动计算时的预期值应该是`3`，因为当我们将它设置为`0`距离的总和时将是`142`。

知道代码中可能有什么问题吗？我认为它会在设置`o = y(i,j)`where`o`表示*原始值*的代码中的位置，但真的想不出解决这个问题的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:25:08.490

我认为您的代码中有许多冗余命令。我只是删除了它们，没有别的。我得到了`m`as的价值`3`。我使用了具有平方欧几里得距离的 MATLAB`pdist2`函数（因为这是您提供的函数中的默认值）。我没有得到 142 作为距离。

这是代码：

```
function m = pixel_minimize_distance(x,y)
[r c] = size(y);
maximum = (sum(sum(pdist2(x,y)))).^2; %explained below

for i=1:r
    for j=1:c
        o = y(i,j);
        y(i,j) = 0
        sum2 = (sum(sum(pdist2(x,y)))).^2;

        if sum2 >= maximum
            if o ~= 0
                maximum = sum2;
                m = o;
            end
        end

        y(i,j)=o;
    end
end
end 
```

输出是：

y =

```
 0     5     3
 7     8     1 
```

y =

```
 4     0     3
 7     8     1 
```

y =

```
 4     5     0
 7     8     1 
```

y =

```
 4     5     3
 0     8     1 
```

y =

```
 4     5     3
 7     0     1 
```

y =

```
 4     5     3
 7     8     0 
```

米=

```
 3 
```

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%说明：您编写了以下代码片段：

```
d2 = pdist2(x,y);
[r2 c2] = size(d2);
for i=1:r2
    for j=1:c2
        sum2=sum2+d2(i,j);
    end
end 
```

这只是计算两组之间的距离，`pdist2`并将整个距离矩阵相加，得出一个存储`sum2`在您的案例中的值。让我们看看我的代码：

```
sum2 = (sum(sum(pdist2(x,y)))).^2; 
```

`pdist2`会给距离。第一个`sum`命令将沿行求和，然后第二个命令将沿列求和，从而为您提供矩阵中所有值的总和（这是您对两个`for`循环所做的）。现在，背后的原因`.^2`是：在您提供的链接中的原始`pdist2`函数中，您可以从以下代码片段中看到：

```
if( nargin<3 || isempty(metric) ); metric=0; end;

switch metric
  case {0,'sqeuclidean'} 
```

欧几里得平方是默认距离，而在 MATLAB 中，欧几里得距离是默认距离。因此，我对这个词进行了平方。%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

# jquery-ui - Uploadify 与 jQuery 对话框冲突

> ID：14808389
> 
> 赞同：2
> 
> 时间：2013-02-11T08:31:03.473
> 
> 标签：jquery-ui, uploadify

我试图使用 jQuery-UI 对话框和 uploadify 创建文件上传。我已经看到其他人也有类似的问题，但它总是 css 中的 z-index 或跨浏览器问题，这里不是这种情况，因为它在任何浏览器中都不起作用。当我将uploadify div（div是flash对象的占位符）放在jQuery对话框之外时，一切正常，但是当我尝试将它放在里面时，swf被加载但是当对话框弹出时我得到错误：jquery中的'预期对象'。 min.js 开启

`var c=a.getAttributeNode("tabindex")`

问题可能是由 jquery 版本引起的吗？当前版本是 1.7.1，我也尝试使用 1.9.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:39:36.517

添加以下 CSS 类以覆盖默认`z-index`值 1

```
.swfupload {
    z-index: 10000 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T05:43:22.843

在 Flash 元素中缺少函数 getAttributeNode 和 getAttribute 时出现此错误。更改“jquery-min.js”

```
elem.getAttributeNode(name) // OR a.getAttributeNode(b) 
```

到

```
(elem.getAttributeNode?elem.getAttributeNode(name):null) // OR (a.getAttributeNode?a.getAttributeNode(b):null) 
```

和

```
elem.getAttribute(name) // OR a.getAttribute(b) 
```

到

```
(elem.getAttribute?elem.getAttribute(name):null) // OR (a.getAttribute?a.getAttribute(b):null) 
```

# matlab - Matlab 上的 HDF 格式

> ID：14808394
> 
> 赞同：0
> 
> 时间：2013-02-11T08:31:32.717
> 
> 标签：matlab

我有一个 hdf 格式的 Modis 图像。

```
fileinfo = hdfinfo('MOD09GA.A2011288.hdf'); 
```

我正在尝试创建一个矩阵，但我只需要存储在属性上的三个波段（我知道是因为我已经检查了 Erdas）。我检查了属性的结构，有 12 个波段（fileinfo.Attributes= <1x12 struct>）。如何提取和创建具有三个波段的矩阵？

```
sds_info = fileinfo.SDS(2); 
```

我正在尝试做的是以下...

```
data1 = hdfread(sds_info.Attributes) 
```

但我收到以下错误：

> ？？？在 418 处使用 ==>
> hdfread>dataSetInfo 时出错
> HINFO 必须是
> 描述文件中特定数据集的结构
> 。

检查我知道我必须使用该结构的帮助。我怎么知道属性的内容？如何使用该信息选择和创建矩阵？

```
data1 = hdfread(s.Vdata(1), 'Fields', {'Idx', 'Temp', 'Dewpt'}) 
```

PS）我正在使用 hdftool 导入每个乐队。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:16:13.090

最后，这就是我所做的（我不删除帖子以防万一可以帮助某人）：

```
sur_refl_b01_1 = hdfread('MOD09GA.A2011288.h17v05.005.2011293000105.hdf', '/MODIS_Grid_500m_2D/Data Fields/sur_refl_b01_1', 'Index', {[1  1],[1  1],[2400  2400]}); 
```

# .net - 在列表视图中未选择任何项目时必须失去焦点

> ID：14808397
> 
> 赞同：0
> 
> 时间：2013-02-11T08:32:14.657
> 
> 标签：.net, vb.net, listview, lost-focus

我相信这很容易，但我现在遇到了这个问题。我有一个列表视图，每次单击一个项目时，我都会将其名称存储在一个字符串变量中。发生的情况是，当我单击列表视图上的一个项目，然后再次单击列表视图内部而不选择任何项目时，它不会失去焦点并将前一个选定项目的名称存储在字符串变量中。我想要发生的是，每次我单击一个项目，然后单击列表视图内部或外部而不选择任何项目时，它必须失去焦点并且不将项目名称存储在字符串变量中。

```
Private Sub lvReceivedFiles_MouseClick(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles lvReceivedFiles.MouseClick

    If e.Button = Windows.Forms.MouseButtons.Left Then

        If lvRecievedFiles.FocusedItem.Selected = True

              lvReceivedFiles.FullRowSelect = True

              'When an item is clicked in the list view, store its name.
              fName = "\" & Path.GetFileName(lvReceivedFiles.FocusedItem.Text)

        Else

              'This part here doesn't make any sense because it doesn't execute
              'every time I click in the list view without selecting any item.
              'ListView.FocusedItem.Selected is always true.

        End If

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:46:19.000

处理这种情况的更好方法是使用 SelectedIndexChanged 事件而不是 MouseClick 事件。检查此代码。

```
Private Sub ListView1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles lvReceivedFiles.SelectedIndexChanged

If lvRecievedFiles.FocusedItem.Selected = True

          lvReceivedFiles.FullRowSelect = True

          'When an item is clicked in the list view, store its name.
          fName = "\" & Path.GetFileName(lvReceivedFiles.FocusedItem.Text)

Else

          'This part here doesn't make any sense because it doesn't execute
          'every time I click in the list view without selecting any item.
          'ListView.FocusedItem.Selected is always true.

End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:51:20.680

你可以在`MouseUp event`.

```
Private Sub lvlcheckin_MouseUp(sender As Object, e As MouseEventArgs) Handles lvlcheckin.MouseUp
    If e.Button = Windows.Forms.MouseButtons.Left Then

        If lvlcheckin.FocusedItem.Selected = True Then
            lvlcheckin.FullRowSelect = True
        Else
            lvlcheckin.FullRowSelect = False
        End If
    End If
End Sub 
```

# c# - Windows From 使用 C# - 在父窗体中创建一个带有按钮的列表

> ID：14808410
> 
> 赞同：0
> 
> 时间：2013-02-11T08:33:18.493
> 
> 标签：c#, winforms, visual-studio-2010

我有`Windows Form`基于`MDI`. 我的许多子表单需要对 `ForeColor`父表单中的按钮进行一些更改（主要是在 上），所以我决定创建一个`List<Button>`保存它们的位置，并在需要时调用它们的位置。我试过这个：

```
 List<Button> btn = new List<Button> { 
        btnButton1,
        btnButton2,
        .
        .
        }; 
```

> 字段初始值设定项不能引用非静态字段、方法或属性...

我不太明白问题出在哪里，但我的主要问题仍然是如何（如果可能）`List`使用主窗体中的按钮创建这样的。现在我打算将每个按钮的名称硬编码到`List`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:36:03.400

在 InitializeComponent() 调用之后，您应该在表单的构造函数中初始化按钮列表

# c# - 保存调整大小按钮

> ID：14808411
> 
> 赞同：2
> 
> 时间：2013-02-11T08:33:22.863
> 
> 标签：c#, winforms, button, resize

这就是我所拥有的

```
private void button9_Click(object sender, EventArgs e)
    {
        Form2 f2 = new Form2();
        string b = textBox1.Text;
        string a = textBox2.Text;
        int x = Convert.ToInt32(textBox1.Text);
        int y = Convert.ToInt32(textBox2.Text);
        f2.button8.Size = new System.Drawing.Size(x, y);
        f2.Show();
    } 
```

此代码能够更改其他表单上的按钮大小..问题是，一旦关闭应用程序并重新打开.. button8 的大小回到其默认大小..

我想要做的是，一旦按钮调整大小，它将成为其默认大小。即使应用程序关闭并重新打开，新的大小也会被保存..

有人可以在这里帮我..谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:37:01.247

当您更改它时，您只是在“实时”更改它，并且一旦内存基本上到期，内存就无法回忆起这些更改；当您重新加载应用程序时，您正在从部署的初始状态重新加载它。

您可以使用[应用程序设置](http://msdn.microsoft.com/en-us/library/a65txexh.aspx)来克服这个问题，在大小更改时存储按钮大小的值，并在下次运行应用程序时从那里加载值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:11:45.580

就像他们说的，把它储存在`Application Settings`

From `Project Properties`, create a `Settings`, let 例子`ButtonSize`

![在此处输入图像描述](../Images/a9d8740d109f46691451e05075578802.png)

此[示例](http://blogs.msdn.com/b/rprabhu/archive/2005/11/28/497792.aspx)适用于`Form Size`并且`Form Location`您现在有针对您的解决方案的指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:36:01.260

只需通过捕获 SizeChanged 事件将其他表单上按钮的大小保存到 app.config 中。

有例子 - [http://sdrv.ms/11BSi2L](http://sdrv.ms/11BSi2L)

# jquery - 在 JQuery ui datepicker 中禁用输入键

> ID：14808416
> 
> 赞同：7
> 
> 时间：2013-02-11T08:33:39.757
> 
> 标签：jquery, jquery-ui, uidatepicker, keyboard-events

JQuery UI datepicker 似乎存在一个错误，当用户手动输入日期并按回车键时，日期选择器关闭但焦点停留在该字段上，因此日历不会再次打开，直到文本框失去焦点并再次获得它。如何抑制输入键行为？或者对于这个看似已知的错误还有其他已知的解决方案吗？谢谢！

**编辑**

在对此进行了更多工作之后，这是我提出的解决方案：

```
$('#someid').bind('keydown', function(event) {

    if (event.which == 13) {var e=jQuery.Event("keydown");
                    e.which = 9;//tab 
                    e.keyCode = 9;
                    $(this).trigger(e);
                    return false;
                }
            }); 
```

tab 键效果很好，可以防止 datepicker 的 enter 键事件的默认行为，例如在某些情况下选择今天的日期。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-25T15:01:55.800

我最初在应用您的解决方案时遇到了问题。我认为值得发布我的更大片段，以提供更多上下文。

```
if (!Modernizr.inputtypes.date) {
    //use modernizer to weed out browsers that already have a timepicker 
    //http://stackoverflow.com/questions/11297827/html5-date-input-type-interfering-with-jquery-datepicker

    $("input[data-val-date]")
                    .bind('keydown', function (event) {  // BEGIN APPLYING NinaNa's S.O. ANSWER
                    if (event.which == 13) {
                        var e = jQuery.Event("keydown");
                        e.which = 9;//tab 
                        e.keyCode = 9;
                        $(this).trigger(e);
                        return false;
                    }
    }).datepicker({ dateFormat: 'mm/dd/yy' }); //THEN APPLY JQUERY UI FUNCTIONALITY

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T08:37:58.077

试试这个

```
$(document).keydown(keyDownHandler); // use appropriate selector for the keydown handler

function keyDownHandler(e) {
    if(e.keyCode === 13) {
        e.stopPropagation();
        e.preventDefault();

        return false;
    }
} 
```

`e.stopPropagation`我认为可以防止冒泡，`e.preventDefault`防止默认行为并返回 false 。

您应该看看什么最有效`keyUp`：`keyDown`或`keyPress`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T08:39:47.297

通过在 datepicker 的 onClose 方法中添加一个 blur() 事件来解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-18T10:50:13.637

最简单的方法是像通常那样实例化日期选择器`<input>`，然后我们自己摆脱焦点处理程序并用点击处理程序替换它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-30T15:49:11.000

使用`e.stopImmediatePropagation()`，并确保在调用之前发生 keydown 绑定`datepicker()`。

```
 $('input').on('keydown', function(e) {
      if (e.which == 13)
          e.stopImmediatePropagation();
  }).datepicker(); 
```

[信用](https://stackoverflow.com/a/49136414/1713149)

# ios - 性能差异：loadNibNamed 与编程方式

> ID：14808418
> 
> 赞同：8
> 
> 时间：2013-02-11T08:33:48.483
> 
> 标签：ios, performance, interface-builder, loadnibnamed

我有一个视图控制器，其中包含许多自定义 UIView。我尝试使用 InterfaceBuilder (IB) 定义的自定义 UIView，并使用以下代码在 initWithFrame 中加载它：

```
NSArray *xib=[[NSBundle mainBundle] loadNibNamed:@"DayView" owner:self options:nil]; 
```

视图控制器表现得非常慢，所以我决定尝试以编程方式加载自定义 uiview 的项目。Vòila，速度提高了大约 7 倍。

为什么加载 XIB 文件和使用“干净”代码之间的差异如此之大？我能想到的第一个假设是 IB 默认设置了很多属性，而在代码中定义它们时它们只是 nil。但它无法解释巨大的性能差异！我还没有找到任何明确警告您不要出于性能原因使用 IB 的帖子。

编辑：我刚刚找到[了这个链接](https://stackoverflow.com/questions/8123311/loadnibname-method-is-too-slow-how-to-make-it-quicker)，因此[这篇](http://useyourloaf.com/blog/2011/02/28/speeding-up-table-view-cell-loading-with-uinib.html)博文解释了关于何时从光盘加载 xib 文件的有趣事情。我想从光盘加载解释了差异。/K

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T09:56:39.170

**这是我从我的经验和谷歌中得到的一些观点。**

```
=> I've done it both ways and here's my two sense: 
```

如果您的观点相对简单，并且您确信它不会改变太多；然后席布走了。如果没有，我一直以编程方式推荐，因为它至少有 3 大好处：

**1)**你可以更深入地了解幕后一切是如何运作的，如果出现问题，这将极大地帮助调试

**2）**完全控制和定制一切，所以如果有变化很容易实现

**3)**不那么混乱；这可能是个人喜好，但如果有很多从按钮调用的操作，我发现界面构建器箭头之字形喧嚣比编程更令人困惑。

**=>**以编程方式定义控制比使用 XIB 更耗时。因为要即时创建所有控件和位置等。

**=>**我还注意到，与以编程方式加载视图相关的文件使用的辅助内存大约是 xib 文件的一半。我不确定这是否会转化为更大的应用程序，但在更大的应用程序中可能需要考虑

**=>**我在读一些书，我想我发现了一些可以以编程方式达成交易的东西。原来 Xib 文件隐式使用 imageNamed 方法将其图像加载到内存中，该方法具有众所周知的缓存“功能”，这对内存来说是有问题的。我还听说 IBOutlets 是一个重要的内存管理问题。

所有这些界面构建器都是非常非常好的工具，但是如果您不知道自己在做什么并且您不知道这些工具在做什么，那么您

**1\. 真的什么都学不到**

**2\. 以后可能会在你的代码中造成严重的问题**

一旦你了解了一切是如何运作的，使用那些小帮手就可以了……

我在学习 html、flex、swing 和 cocoa touch 时也经历过同样的事情……一开始可能需要更长的时间，但是一旦你理解了它并且可以编写辅助类/方法，事情就会非常快速并且对你有好处.

```
Just found some usefull information/tips about xib: 
```

保持你的 Nib 文件小 Xcode 中的大多数新项目都带有一个或两个预配置的 nib 文件。许多刚接触Interface Builder 的开发人员所犯的一个错误是将他们应用程序的所有窗口和菜单放在这一个或两个nib 文件中。错误的原因通常是方便。（模板项目通常会自动加载预配置的 nib 文件，这使开发人员不必添加更多的 nib 加载代码。）不幸的是，依赖这种便利通常会导致性能下降并增加应用程序的内存压力。

当一个 nib 文件被加载到内存中时，这是一个孤注一掷的努力。nib 加载代码无法知道文件中有多少对象或哪些对象很重要，因此必须将整个文件加载到内存中。然后从这些内存数据中实例化各个对象。对于 Cocoa 和 iPhone 应用程序，nib 文件中的所有对象都会立即实例化，以便可以重新建立出口和操作连接。如果您的应用程序最初只使用一些 nib 文件对象，那么将所有对象都放在内存中是一种浪费。

对于所有项目，最好设计每个 nib 文件，使其仅包含在给定情况下立即需要的那些对象。当加载到内存中时，这样的 nib 文件使用尽可能少的内存，同时仍然拥有完成工作所需的一切。以下是组织 nib 文件时要考虑的一些设计选择：

对于应用程序的主 nib 文件，只包括菜单栏（或者对于 iPhone 应用程序，只包括主窗口）。

对于 Mac OS X 中的文档 nib 文件，仅包含文档窗口和显示该窗口所需的对象（例如控制器）。

对于其他 nib 文件，请将 nib 文件集中在一个关键对象上，例如您要显示的单个窗口或面板。然后，nib 文件中的所有其他对象应有助于立即操作该窗口或面板。

对于更改其嵌入式视图层次结构的窗口，如果层次结构不经常更改，请考虑将任何其他层次结构存储在单独的 nib 文件中。仅在使用时加载每个视图层次结构。

如果您已经有较大的 nib 文件，您可以使用 Interface Builder 的重构工具将它们分成几个较小的 nib 文件。有关如何使用 Interface Builder 的重构工具的信息，请参阅“重构 Nib 文件”。有关如何从代码中显式加载 nib 文件的信息，请参阅资源编程指南。

**但我作为一名专业程序员（就像我是一名软件开发人员）的个人观点是，对于初学者来说，从编程方式开始总是更好的，只是为了学习和理解一切是如何工作的**

# symfony - Cloud9 上的 Symfony 框架

> ID：14808424
> 
> 赞同：0
> 
> 时间：2013-02-11T08:34:07.307
> 
> 标签：symfony, cloud9-ide

有没有办法在 Cloud9 上设置 Symfony 项目？

我发现了一些关于以这种方式创建 Yii 项目的文章，但没有关于 Symfony 的文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T14:25:02.187

注意：我假设您目前在一个空的项目/存储库中。

运行以下命令：

1.  下载 composer.phar 可执行文件：`$ curl -sS https://getcomposer.org/installer | php`
2.  在当前文件夹上创建项目：`$ php composer.phar create-project symfony/framework-standard-edition projectName/`

外部链接 ：

*   [Symfony 书](https://symfony.com/doc/current/book/index.html)
*   [github 上的 Composer 项目](https://github.com/composer/composer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T20:56:16.717

在这里你有答案。

[https://docs.c9.io/docs/symfony2](https://docs.c9.io/docs/symfony2)

我已经创建了一个。

# c++ - 检测器、提取器和匹配器的分类

> ID：14808429
> 
> 赞同：62
> 
> 时间：2013-02-11T08:34:32.380
> 
> 标签：c++, image-processing, opencv, computer-vision, feature-detection

我是opencv的新手，并试图在两个图像之间实现图像匹配。为此，我试图了解特征描述符、描述符提取器和描述符匹配器之间的区别。我遇到了很多术语，并试图在 opencv 文档网站上阅读它们，但我似乎无法理解这些概念。我理解了这里的基本区别。[特征检测和描述符提取的区别](https://stackoverflow.com/questions/6832933/difference-between-feature-detection-and-descriptor-extraction?rq=1)

但是我在研究该主题时遇到了以下术语：

> FAST、GFTT、SIFT、SURF、MSER、STAR、ORB、BRISK、FREAK、BRIEF

我了解 FAST、SIFT、SURF 的工作原理，但似乎无法弄清楚以上哪些只是检测器，哪些是提取器。

然后是匹配器。

> FlannBased、BruteForce、knnMatch 可能还有其他一些。

经过一番阅读，我认为某些匹配器只能与某些提取器一起使用，如此处所述。[OpenCV ORB 特征检测器如何工作？](https://stackoverflow.com/questions/7232651/how-does-opencv-orb-feature-detector-work) 给出的分类很清楚，但仅适用于少数提取器，我不明白 float 和 uchar 之间的区别。

所以基本上，有人可以请

1.  如前所述，根据浮点数和 uchar 对检测器、提取器和匹配器的类型进行分类，还是其他类型的分类？
2.  解释 float 和 uchar 分类或正在使用的分类之间的区别？
3.  提到如何初始化（编码）各种类型的检测器、提取器和匹配器？

我知道它要求很多，但我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-02-16T15:55:26.297

> 我了解 FAST、SIFT、SURF 的工作原理，但似乎无法弄清楚以上哪些只是检测器，哪些是提取器。

基本上，从特征检测器/提取器列表中（链接到文章：[FAST](http://www.edwardrosten.com/work/fast.html)、[GFTT](http://www.ai.mit.edu/courses/6.891/handouts/shi94good.pdf)、[SIFT](http://www.cs.ubc.ca/~lowe/keypoints/)、[SURF](http://www.vision.ee.ethz.ch/~surf/eccv06.pdf)、[MSER](https://en.wikipedia.org/wiki/Maximally_stable_extremal_regions)、[STAR](http://link.springer.com/chapter/10.1007/978-3-540-88693-8_8)、[ORB](http://www.willowgarage.com/sites/default/files/orb_final.pdf)、[BRISK](http://www.robots.ox.ac.uk/~vgg/rg/papers/brisk.pdf)、[FREAK](http://infoscience.epfl.ch/record/175537/files/2069.pdf)、[BRIEF](https://www.cs.ubc.ca/~lowe/525/papers/calonder_eccv10.pdf)），其中一些只是特征检测器（**FAST、GFTT**）其他是特征检测器和描述符提取器（**SIFT、SURF、ORB、FREAK**）。

如果我没记错的话，**BRIEF**只是一个描述符提取器，所以它需要通过 FAST 或 ORB 等其他算法检测到的特征。

要确定哪个是哪个，您必须浏览与算法相关的文章或浏览 opencv 文档以查看哪个是为`FeatureDetector`该类实现的，哪个是为`DescriptorExtractor`该类实现的。

> Q1：如前所述，基于 float 和 uchar 对检测器、提取器和匹配器的类型进行分类，还是其他类型的分类？
> 
> Q2：解释 float 和 uchar 分类之间的区别或使用哪种分类？

关于**问题1和2**，将它们分类为float和uchar，[您已经发布的链接](https://stackoverflow.com/questions/7232651/how-does-opencv-orb-feature-detector-work)是我所知道的最佳参考，也许有人能够完成它。

> Q3：提一下如何初始化（编码）各类检测器、提取器和匹配器？

回答**问题 3**，OpenCV 使代码使用的各种类型完全相同——主要是你必须选择一个特征检测器。大部分区别在于选择匹配器的类型，您已经提到了 OpenCV 拥有的 3 个匹配器。最好的办法是阅读文档、[代码示例](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)和相关的 Stack Overflow 问题。此外，一些博客文章是很好的信息来源，例如[Ievgen Khvedchenia 的这些特征检测器基准系列](https://gist.github.com/ruimarques/ec5a504eace0abde4d7151b8e06dbd65)（该博客不再可用，因此我不得不从其 google 缓存创建原始文本副本）。

**匹配器**用于查找描述符是否与列表中的另一个描述符相似。您可以将您的查询描述符与列表中的所有其他描述符（**BruteForce**）进行比较，也可以使用更好的启发式（**FlannBased，knnMatch**）。问题是启发式方法不适用于所有类型的描述符。例如，FlannBased 实现过去只能与`float`描述符一起使用，但不能与`uchar`'s 一起使用（但从 2.4.0 开始，带有 LSH 索引的 FlannBased 可以应用于 uchar 描述符）。

引用这个关于类型[的 App-Solut 博客文章](http://archive.is/0krz3)`DescriptorMatcher`：

> DescriptorMatcher 有“FlannBased”、“BruteForceMatcher”、“BruteForce-L1”和“BruteForce-HammingLUT”等品种。“FlannBased”匹配器在底层使用 flann（近似最近邻的快速库）库来执行更快但近似的匹配。“BruteForce-*”版本详尽地搜索字典以找到图像特征与字典中的单词最接近的匹配。

**一些比较流行的组合是：**

**特征检测器/描述符提取器/匹配器类型**

*   (FAST, SURF) / SURF / FlannBased

*   (FAST, SIFT) / SIFT / FlannBased

*   (FAST, ORB) / ORB / Bruteforce

*   （快速，ORB）/简要/蛮力

*   (FAST, SURF) / FREAK / Bruteforce

您可能还注意到特征检测器有一些**适配器（动态、金字塔、网格） 。**[App-Solut 博客文章](http://archive.is/0krz3)很好地总结了它们的使用：

> (...) 还有几个适配器可以用来改变关键点检测器的行为。例如，`Dynamic` 适配器调整检测器类型特定的检测阈值，直到在图像中找到足够的关键点，或者`Pyramid`构建高斯金字塔以检测多个尺度上的点的适配器。该`Pyramid`适配器对于不是尺度不变的特征描述符很有用。

**进一步阅读：**

*   [Yu Lu 的这篇博文](http://littlecheesecake.me/blog1/2013/05/25/feature-detection.html)对 SIFT、FAST、SURF、BRIEF、ORB、BRISK 和 FREAK 做了很好的总结描述。

*   [Gil Levi 的](https://gilscvblog.com/2013/08/26/tutorial-on-binary-descriptors-part-1/)这些系列文章还对其中几种算法（BRIEF、ORB、BRISK 和 FREAK）做了详细的总结。

# c# - 使用线程本地数据将简单算法移植到 TPL

> ID：14808430
> 
> 赞同：1
> 
> 时间：2013-02-11T08:34:36.560
> 
> 标签：c#, .net, task-parallel-library, cluster-computing

我有一个非常简单的算法，可以根据它们`x`和`y`彼此的距离对 blob 进行聚类。我移植了相同的内容以用于`Parallel.For`线程本地数据，但结果不正确。换句话说，我可能没有正确使用同步来隔离每个线程。

根本无法弄清楚为什么两种实现的结果不同。任何想法将不胜感激。

我想发布完全可编译的代码，但使用的对象与项目上下文的集成过于紧密。由于该算法非常简单，希望这不会妨碍您。

**类级别声明**：

```
/// <summary>
/// Contains the master blobl collection to be clustered.
/// </summary>
public List<Blob> Blobs { get; private set; }

/// <summary>
/// List of clusters to be computed.
/// </summary>
public List<Cluster> Clusters { get; private set; } 
```

**线性示例（工作正常）**：

```
Cluster cluster = null;

for (int i = 0; i < this.Blobs.Count; i++)
{
    cluster = new Cluster();

    cluster.Id = i;

    if (this.Blobs [i].ClusterId == 0)
    {
        cluster.Blobs.Add(this.Blobs [i], i);

        for (int j = 0; j < this.Blobs.Count; j++)
        {
            if (this.Blobs [j].ClusterId == 0)
            {
                if (this.Blobs [i].Rectangle.IntersectsWith(this.Blobs [j].Rectangle))
                {
                    cluster.Blobs.Add(this.Blobs [j], i);
                }
                else if (this.Blobs [i].Rectangle.IsCloseTo(this.Blobs [j].Rectangle, distanceThreshold))
                {
                    cluster.Blobs.Add(this.Blobs [j], i);
                }
            }
        }
    }

    if (cluster.Blobs.Count > 2)
    {
        this.Clusters.Add(cluster);
    }
} 
```

**并行端口（不正确的集群）**：

```
System.Threading.Tasks.Parallel.For<Cluster>
(
    0,
    this.Blobs.Count,
    new ParallelOptions() { MaxDegreeOfParallelism = degreeOfParallelism },
    () => new Cluster(),
    (i, loop, cluster) =>
    {
        cluster.Id = i;

        if (this.Blobs [i].ClusterId == 0)
        {
            cluster.Blobs.Add(this.Blobs [i], i);

            for (int j = 0; j < this.Blobs.Count; j++)
            {
                if (this.Blobs [j].ClusterId == 0)
                {
                    if (this.Blobs [i].Rectangle.IntersectsWith(this.Blobs [j].Rectangle))
                    {
                        cluster.Blobs.Add(this.Blobs [j], i);
                    }
                    else if (this.Blobs [i].Rectangle.IsCloseTo(this.Blobs [j].Rectangle, distanceThreshold))
                    {
                        cluster.Blobs.Add(this.Blobs [j], i);
                    }
                }
            }
        }

        return (cluster);
    },
    (cluster) =>
    {
        lock (this.Clusters)
        {
            if (cluster.Blobs.Count > 2)
            {
                this.Clusters.Add(cluster);
            }
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:38:42.687

我认为您的问题是对“线程本地数据”的误解。根据[的文档`Parallel.For()`](http://msdn.microsoft.com/en-us/library/dd783299.aspx)，它是：

> [...] 一些本地状态，可能在同一线程上执行的迭代之间共享。

这意味着您的循环的某些迭代将共享同一个`Cluster`对象，这将导致您的结果不正确。如果每次迭代都执行`localInit`and `localFinally`，那么它们将毫无用处，因为您可以通过将它们的代码移动到循环的开头和结尾来做完全相同的事情。

代表存在的原因是您可以使用它们进行*优化*。有了它们，您不必经常访问共享状态（在您的情况下`this.Clusters`），这可以提高性能。

如果您不需要此优化，请不要使用两个委托，而是编写循环体，如下所示：

```
i =>
{
    var cluster = new Cluster { Id = i };

    // rest of the loop here

    if (cluster.Blobs.Count > 2)
    {
        lock (this.Clusters)
        {
            this.Clusters.Add(cluster);
        }
    }
} 
```

（在上面的代码中，我也切换了`lock`作为`if`优化。）

如果您认为使用线程本地数据的优化对您有用（即它实际上会加快速度），您可以使用它。但是有问题的数据必须是一个`Cluster`s 的列表，而不仅仅是一个`Cluster`. 就像是：

```
() => new List<Cluster>(),
(i, loop, clusters) =>
{
    var cluster = new Cluster { Id = i };

    // rest of the loop here

    if (cluster.Blobs.Count > 2)
        clusters.Add(cluster);

    return clusters;
},
clusters =>
{
    lock (this.Clusters)
    {
        this.Clusters.AddRange(clusters);
    }
} 
```

# android - calcloc.distanceTo() 抛出空指针异常

> ID：14808434
> 
> 赞同：0
> 
> 时间：2013-02-11T08:34:46.137
> 
> 标签：android, gps, nullpointerexception, location, distance

```
 String calculateDistanceMetric(double loclat, double loclong)
    {      
        Log.i("Metric", String.valueOf(loclat));
        Log.i("Metric", String.valueOf(loclong));
        Location destloc = new Location(provider);
        destloc.setLatitude(loclat);
        destloc.setLongitude(loclong);
        Log.i("Metric", "1");
        if (calcloc.distanceTo(destloc) > 100) ////////here is where the code breaks
        {
            Log.i("Metric", "2");
            float round = calcloc.distanceTo(destloc);
            Log.i("Metric", "3");
            DecimalFormat df = new DecimalFormat("##.#");
            Log.i("Metric", "4");
            distanceUnit = "KM";
            Log.i("Metric", "5");
            return String.valueOf(round/1000);
        }
        else
        {
            Log.i("Metric", "6");
            distanceUnit = "Meters";
            Log.i("Metric", "7");
            return String.valueOf(calcloc.distanceTo(destloc)); 
            }

    } 
```

为什么我会得到空指针异常？loclat 和 loclong 的值是有效的， destloc 已初始化，我想不出为什么会导致它崩溃。此外，如果可能建议计算两点之间距离的其他方法（我已经知道 distanceBetween）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:39:07.590

您需要初始化`calcloc`变量（到目前为止显然不是这种情况）。

# python - IndentationError：需要一个缩进块

> ID：14808436
> 
> 赞同：0
> 
> 时间：2013-02-11T08:34:58.353
> 
> 标签：python

我刚开始使用python。我正在执行 Mark Pilgrim 在 Ubuntu 中在“潜入 Python”中给出的一个简单程序。程序如下：

```
def buildConnectionString(params):

    """Build a connection string from a dictionary of parameters.
    Returns string."""
    return ";".join(["%s=%s" % (k, v) for k, v in params.items()])
    if __name__ == "__main__":
    myParams = {"server":"mpilgrim", \
    "database":"master", \
    "uid":"sa", \
    "pwd":"secret" \
    }
    print buildConnectionString(myParams) 
```

但它显示错误如下：

```
 File "./1.py", line 3
    Returns string."""
                     ^
IndentationError: expected an indented block 
```

我尝试了一些方法，例如在第 3 行的 return 前面留一个空格，然后使用制表符代替空格。任何人都可以帮助我找出错误是什么，为什么会出现等等，以及一些可以继续进行的简单教程。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:39:14.863

试试这样：

```
def buildConnectionString(params):
    """Build a connection string from a dictionary of parameters.
    Returns string."""
    return ";".join(["%s=%s" % (k, v) for k, v in params.items()])

if __name__ == "__main__":
    myParams = {"server":"mpilgrim", \
    "database":"master", \
    "uid":"sa", \
    "pwd":"secret" \
    }
    print buildConnectionString(myParams) 
```

BTW：你**了解**结构吗？功能，`if __name__=="__main__":`块等？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:42:20.723

为什么不阅读 Python 文档？它可能会有所帮助。;)

[http://docs.python.org/2/reference/lexical_analysis.html#indentation](http://docs.python.org/2/reference/lexical_analysis.html#indentation)

# sql - 如何将其转换为 Doctrine QueryBuilder？

> ID：14808437
> 
> 赞同：0
> 
> 时间：2013-02-11T08:35:05.530
> 
> 标签：sql, doctrine, doctrine-orm

如何将其转换为 Doctrine QueryBuilder？

```
SELECT A.*
,(SELECT COUNT(created_on) 
    FROM event WHERE DATE=created_on) created
,(SELECT COUNT(updated_on)
    FROM event WHERE DATE=updated_on) updated
FROM (
SELECT created_on DATE FROM event
UNION SELECT updated_on FROM event ) A 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:28:05.373

[DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)不支持子句中的子查询`SELECT`，也不支持`UNION`子句。请查看[DQL 的 EBNF](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#ebnf)以了解支持的功能。如果您的查询需要这种复杂程度，请考虑使用[Native SQL 。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html)

# android - Android：通过蓝牙处理 NFC 文件传输

> ID：14808455
> 
> 赞同：1
> 
> 时间：2013-02-11T08:35:49.960
> 
> 标签：android, bluetooth, nfc, android-beam

我正在开发一个使用 NFC 在两部手机之间启动文件传输的应用程序。经过一些研究，我发现 NFCAdapter 函数`setBeamPushUris`完全可以做到这一点，并且实际上将使用蓝牙或 wifi 直接传输大文件，只需将此函数的返回值设置为文件 URI 数组即可。

但是，文件传输似乎是由操作系统在后台处理的，并且似乎没有办法在下载文件后通知应用程序。下载文件并执行其他操作后，应用程序是否有任何反应？有没有人有这方面的经验？是否有可能以某种方式处理意图，以便对数据传输做出反应，就像从手机发送到手机时处理 NFC 消息的方式一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:49:14.927

我从来没有这样做过，但我的假设是您在文件传输后不会通过 NFC 发送消息，因为在传输期间两个设备不会保持在一起。那么...您使用什么机制进行转移？我的猜测是，无论是什么都应该处理成功/失败回调。

# eclipse - Eclipse 中的 Tomcat 与 maven 集成

> ID：14808456
> 
> 赞同：2
> 
> 时间：2013-02-11T08:35:50.747
> 
> 标签：eclipse, maven, tomcat

我正在尝试将 Maven 集成到我的网络项目中。我想用 mvn tomcat7:run 运行项目，但是当我这样做时，maven 在 MyProject/target/tomcat 中创建了新的 tomcat 配置，当我尝试在 localhost 上打开它时出现 404 错误。谁能描述我应该怎么做才能配置 maven 以使用本地预配置的 tomcat 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:41:16.367

Maven 在本地创建 Tomcat 配置，`mvn tomcat7:run`因为您在`/target`目录外运行 webapp，目的是使正在运行的 webapp 与任何外部配置隔离。例如，如果您需要应用自定义 Tomcat 配置，那么 Maven 需要事先修改 Tomcat 配置。由于文件系统权限，这可能是不可能的，或者可能会影响其他 web 应用程序。因此 Maven 将配置复制到本地，应用任何自定义配置并通过`tomcat7-maven-plugin`.

一种选择是查看[**maven-cargo-plugin**](http://cargo.codehaus.org/Maven2+plugin)，它可以将`.war`使用 Maven 构建的产品部署到现有的运行 Tomcat 安装中。使用正确的[**配置**](http://cargo.codehaus.org/Maven2+Plugin+Reference+Guide)，`mvn tomcat7:run`您将使用`mvn cargo:redeploy`删除正在运行的 webapp 并将其替换为新构建的 webapp。

作为替代方案，可以将 Eclipse 配置为启动运行 webapp 的 Tomcat 实例。如果将 Eclipse 项目类型更改为[Dynamic Web Project](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.webtools.doc.user/topics/ccwebprj.html)，然后通过执行以下操作将 Tomcat 实例添加到 Eclipse：

*   窗口 → 首选项 → 服务器 → 运行时环境
*   添加 → Apache Tomcat v7.0

并将它指向您下载的Tomcat。Eclipse 将使用这个*外部*Tomcat 作为模板来为您的 web 应用程序创建一个*内部Tomcat 配置。*最后，需要配置 webapp 以将正确的资源和库部署到 Tomcat 中。通过右键单击项目根 → 属性 → 部署程序集，更改列表以匹配您的资源位置。标准设置可能看起来像

```
/src/main/java       |   /WEB-INF/classes
/src/main/resources  |   /WEB-INF/classes
/src/main/webapp     |   /
Maven Dependencies   |   /WEB-INF/lib 
```

# date - 猪拉丁语日期

> ID：14808466
> 
> 赞同：1
> 
> 时间：2013-02-11T08:36:28.047
> 
> 标签：date, input, apache-pig

我正在尝试执行以下操作。我有多个日期，我想创建一个猪脚本，它获取未知数量的输入日期，然后为输入参数运行猪脚本。我的问题是：

如何将未知数量的输入变量发送到 pig 脚本，然后在 pig 脚本中处理它们？

谢谢萨拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:24:16.830

> 我很难理解你真正想要做什么。那将是我的解决方案>针对您的问题，发送未知数量的日期（按字符数组排序）：
> 
> ```
> A = load 'input_dates' AS (date:chararray);
> B = my_macro(A); 
> ```
> 
> 这是非常基本的，所以我想我没有正确理解您的问题。你能不能 > 发展一点你的问题？

***更新*****>>如果您使用 Pig 0.11**，这样的事情怎么样（[模块导入在 0.10 之前有一个错误](https://issues.apache.org/jira/browse/PIG-2665)）：

```
#!/usr/bin/python
import os

from org.apache.pig.scripting import *

P = Pig.compile("""
data = LOAD '$docs_in' AS (a:int);
-- do something
""")

lof = os.listdir("/home/.../dates/")
params = []

for elem in lof:
    params.append({'docs_in': str(elem)})
    lof.remove(elem)

bound = P.bind(list_of_files)
stats = bound.run(params) 
```

如果每次运行都依赖前一次的结果，请`runSingle()`改用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-23T04:55:27.097

如果我正确理解问题，您想加载文件或目录的数量。您可以指定为“，”作为输入。下面是一个例子：

load.pig（内容）：

```
A = LOAD '$input' using PigStorage();
dump A; 
```

运行命令（在本地运行）：

```
pig -x local -param input=20120301,20120302,20120304 load.pig 
```

# ruby-on-rails - 令人困惑的路由问题

> ID：14808469
> 
> 赞同：0
> 
> 时间：2013-02-11T08:36:46.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, custom-routes

我正在开发一个项目管理网络应用程序，我必须查看项目的页面。一种是查看所有项目，另一种是管理用户拥有的项目（即管理员）。

现在可以通过使用“projects_path”（/projects）访问项目的概览页面。但是对于项目管理页面，我想要另一个 url，“项目/管理”，在这里我需要帮助。

我尝试了以下方法：

**路线.rb：**

```
match "/projects/manage" => "projects#manage", :as => 'manage_projects' 
```

**看法：**

```
<%= link_to "Manage projects", manage_projects_path %> 
```

这会引发以下错误：

```
Couldn't find Project with id=manage
app/controllers/projects_controller.rb:62:in `show' 
```

当我明确将其设置为将我定向到“管理”（项目#管理）时，为什么它会将我定向到“显示”操作？显然它需要一个“id”，这里不应该是这种情况，因为我想显示所有项目（用户拥有的），而不是特定的。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:40:10.463

这条线

```
match "/projects/manage" => "projects#manage", :as => 'manage_projects' 
```

很可能是在 之后添加的`resources :projects`。将那条线移到资源一上方，你应该会很好。就像是

```
match "/projects/manage" => "projects#manage", :as => 'manage_projects'
resources :projects 
```

更新：

路线是有序的。文件顶部的路由优先。如果`resources :projects`是 before `match "/projects/manage" => "projects#manage", :as => 'manage_projects'`，`/projects/manage`则转到项目控制器的 show 动作，因为它匹配`/projects/:id`before`/projects/manage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:52:14.763

当您的 Rails 应用程序收到传入请求时

```
GET /projects/17 
```

它要求路由器将其与控制器操作相匹配。如果第一个匹配的路由是

```
match "/projects/:id" => "projects#show" 
```

请求被分派到项目控制器的显示操作，参数中带有 { :id => “17” }。

同样，当您的 Rails 应用程序收到传入请求时

```
GET /projects/manage 
```

它要求路由器将其与控制器操作相匹配。如果第一个匹配的路由是

```
match "/projects/manage" => "projects#manage", :as => 'manage_projects' 
```

请求被分派到项目控制器的管理操作，而不用担心路由中没有给出的 id。

但是，如果项目的第一个匹配路线是项目的资源本身，那么它将执行 show 操作，因为它会将`manage`您视为`id`拥有，`/projects/:id`并且匹配将被跳过。

所以这取决于你首先给出了什么，即资源或匹配。优先级很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:00:12.147

如果您正在对多个项目执行管理操作，最好按以下方式编写收集操作，

```
 resources :projects do
   collection do
    get "manage" 
   end 
 end 
```

这将为您提供路线 /projects/manage，将自动匹配路线以管理操作，并且每件事都将按照 REST 约定。

# java - 使用自定义 LabelTable 进行 JSlider 渲染

> ID：14808473
> 
> 赞同：5
> 
> 时间：2013-02-11T08:37:04.087
> 
> 标签：java, swing, jslider

我想使用 JSlider 来浏览一些按时间顺序排列的事件，所以我设置了一个自定义 LabelTable 以便它显示一些日期而不是默认的整数值。我的代码是这样的：

```
JSlider slider = new JSlider();
...
Date[] dates = getDates();
        slider.setModel(new DefaultBoundedRangeModel(0, 0, 0, dates.length - 1));
        Hashtable<Integer, JLabel> ht = new Hashtable<Integer, JLabel>();
        for (int i = 0; i < dates.length; ++i) {
            JLabel label = new JLabel(DateFormat.getDateInstance().format(dates[i]));
            ht.put(i, label);
        }
        slider.setLabelTable(ht);
        slider.setPaintLabels(true);
        slider.setInverted(true); 
```

如您所见，这很好用： ![在此处输入图像描述](../Images/022d8e31c642cf1676129181a81ccc77.png)

但是，如果我想改变滑块的方向，比如说`slider.setOrientation(JSlider.HORIZONTAL);`，结果如下： ![在此处输入图像描述](../Images/d38924838ffb6f399f92da4de48aa6ce.png)

如果我想每隔一个日期在滑块上方显示一个日期/在滑块下方显示一个日期怎么办？另外，我可以在垂直滑块上的滑块左侧显示标签吗？

问候， 雷米

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T09:03:01.287

更改标签面（只需应用 RTL 方向）：

```
public static void main ( String[] args )
{
    try
    {
        UIManager.setLookAndFeel ( new NimbusLookAndFeel () );
    }
    catch ( UnsupportedLookAndFeelException e )
    {
        e.printStackTrace ();
    }

    JFrame frame = new JFrame ();

    JSlider slider = new JSlider ( SwingConstants.VERTICAL );
    slider.setPaintLabels ( true );
    slider.setComponentOrientation ( ComponentOrientation.RIGHT_TO_LEFT );

    Hashtable<Integer, JLabel> table = new Hashtable<Integer, JLabel> ();
    table.put ( 0, new JLabel ( "May 2, 2000" ) );
    table.put ( 25, new JLabel ( "May 3, 2001" ) );
    table.put ( 50, new JLabel ( "May 4, 2002" ) );
    table.put ( 75, new JLabel ( "May 5, 2003" ) );
    table.put ( 100, new JLabel ( "May 6, 2004" ) );
    slider.setLabelTable ( table );

    frame.add ( slider );

    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

结果：

![在此处输入图像描述](../Images/bee7ba1b9850b499f6f68ddcbcbe6ea0.png)

要改变标签位置，您必须手动修改它们。例如，这可以通过以下方式完成：

```
public static void main ( String[] args )
{
    try
    {
        UIManager.setLookAndFeel ( new NimbusLookAndFeel () );
    }
    catch ( UnsupportedLookAndFeelException e )
    {
        e.printStackTrace ();
    }

    JFrame frame = new JFrame ();
    frame.getRootPane ().setBorder ( BorderFactory.createEmptyBorder ( 5, 5, 5, 5 ) );

    JSlider slider = new JSlider ( SwingConstants.HORIZONTAL );
    slider.setPaintLabels ( true );

    Hashtable<Integer, JLabel> table = new Hashtable<Integer, JLabel> ();
    table.put ( 0, new JLabel ( "May 2, 2000" ) );
    JLabel l2 = new JLabel ( "May 3, 2001" );
    l2.setBorder ( BorderFactory.createEmptyBorder ( 20, 0, 0, 0 ) );
    table.put ( 25, l2 );
    table.put ( 50, new JLabel ( "May 4, 2002" ) );
    JLabel l3 = new JLabel ( "May 5, 2003" );
    l3.setBorder ( BorderFactory.createEmptyBorder ( 20, 0, 0, 0 ) );
    table.put ( 75, l3 );
    table.put ( 100, new JLabel ( "May 6, 2004" ) );
    slider.setLabelTable ( table );

    frame.add ( slider );

    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

结果：

![在此处输入图像描述](../Images/347ae10398aa7a8e75f99785774dec9d.png)

当然，您可以改进该代码并根据之前的标签首选高度（取自首选尺寸）在标签创建周期中添加边框，每个甚至运行。

# redis - 编写爬虫时如何保持访问过的url和维护作业队列

> ID：14808478
> 
> 赞同：3
> 
> 时间：2013-02-11T08:37:43.307
> 
> 标签：redis, web-crawler

我正在写一个爬虫。我将访问的 url 保存在 redis 集中，并使用 redis 列表维护作业队列。随着数据的增长，内存用完了，我的内存是4G。没有redis如何维护这些？我不知道，如果我将这些存储在文件中，它们也需要在内存中。

如果我使用 mysql 来存储它，我认为它可能比 redis 慢得多。

我有5台4G内存的机器，如果有人有一些材料来建立一个redis集群，也很有帮助。我有一些材料可以将集群设置为故障转移，但我需要的是设置负载平衡集群。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T19:51:32.597

如果您只是在执行从集合和列表中添加/删除的基本操作，请查看[twemproxy/nutcracker](https://github.com/twitter/twemproxy)。有了它，您可以使用所有节点。

关于您的使用模式本身，您是否正在删除或过期作业和 URL？系统中有多少重复？例如，您是否重复抓取相同的 URL？如果是这样，也许您只需要将 URL 映射到它们的最后一次爬网时间，而不是一个作业队列，您可以提取自上次运行以来新的或在给定窗口之外的 URL。

如果没有关于你的爬虫如何实际运行或与 Redis 交互的详细信息，这就是我能提供的。如果内存持续增长，则可能意味着您没有清理数据库。

# javascript - 在 document.write() 输出中使用换行符

> ID：14808480
> 
> 赞同：1
> 
> 时间：2013-02-11T08:37:46.197
> 
> 标签：javascript

如何在输出中使用换行符？里面有问题`document.write`。

请检查我的代码并给我最好的解决方案..

```
<html>
<head>
    <script type="text/javascript">
    function FahToCent (degFah)
    {
        var degCent = new Array ();

        for (var loopCounter = 0;  loopCounter <=2; loopCounter++)
        {
            degCent[loopCounter] = 5/9 * (degFah[loopCounter] - 32);
        }

        return degCent;
    }
    </script>
</head>
<body>
    <script type="text/javascript">
    var degFah = new Array ();

    for (var loopCounter = 0; loopCounter <= 2; loopCounter++)
    {
        degFah[loopCounter] = prompt ("Enter Temperature in Fahrenheit");
    }

    document.write (FahToCent (degFah)+"<br>");
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:09:56.953

只需在您的函数 FahtoCent 中添加中断标记

```
 degCent[loopCounter] = 5/9 * (degFah[loopCounter] - 32)+"<BR>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:41:42.560

用这个

```
 function FahToCent (degFah)
{
    return 5/9 * (degFah - 32);;
}

var degFah = new Array ();
for (var loopCounter = 0; loopCounter <= 2; loopCounter++)
{
    degFah[loopCounter] = prompt ("Enter Temperature in Fahrenheit");
    document.write(FahToCent (degFah[loopCounter])+"<br>");   
} 
```

示例链接：http: [//jsfiddle.net/pradkumar_n/Bucjz/](http://jsfiddle.net/pradkumar_n/Bucjz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:52:34.393

您已经定义`degCent`为一个数组，它`document.write()`作为参数传递给。这个参数应该是一个字符串，现在它是一个数组。`Array.toString()`因此，它在输出之前使用方法自动转换为字符串。此方法返回以逗号分隔的数组值列表（作为字符串）。

但是，您可以将返回的数组转换为字符串，并使用名为[`join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Predefined_Core_Objects#Array_Methods). 像这样：

```
document.write(FahToCent(degFah).join('<br/>')); 
```

但是，`document.write()`对于 DOM 操作，这被认为是一种不好的做法。请检查一些高级方法以在文档中显示输出：

[MDN:`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML) , [MDN:`appendChild()`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-11T08:42:47.400

我不完全确定你在这里问什么，但我认为你只是想在代码运行后换一个新行。在这种情况下，您需要 writeline 而不是写入和删除“br”标签

```
document.writeline (FahToCent (degFah)); 
```

# c++ - 内联和静态函数调用运算符

> ID：14808483
> 
> 赞同：0
> 
> 时间：2013-02-11T08:37:59.343
> 
> 标签：c++, templates, inline, functor

我有一个由模板参数参数化的函数模板，以根据实例化的`T`内容赋予它不同的行为。`T`所需的具体变化非常简单，调用静态函数`T::foo(some_args)`就足够了，因为不涉及任何状态。

但是我不希望它`foo`出现在函数模板的正文中。

我宁愿打电话`T(some_args);`来避免语法噪音。我相信将函数调用运算符声明`()`为静态是不可能的（或者是吗？）。`T`没有状态，因此没有特定于实例的变量。

如果上述情况不可行，那么更有可能获得内联/优化（在 G++、Clang、ICC 中）

```
T::foo(some_args); // foo being a static function 
```

或者

```
T()(some_args);  // operator () declared inline 
```

我不知道汇编来检查输出，问题更多的是从学术/好奇心的角度来看，而不是实际表现。

`T()(some_args)`真的在运行时分配一个对象吗？还是通常优化了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:18:54.057

简单的例子：

```
struct T
{
    int operator()(int i) const {
        return i+1;
    }   
};

int main()
{
    return T()(1);
} 
```

使用 -O2 编译将产生：

```
(gdb) disassemble main
Dump of assembler code for function main():
   0x0000000000400400 <+0>:     mov    eax,0x2
   0x0000000000400405 <+5>:     ret
End of assembler dump. 
```

即使使用 -O0 也不会创建临时的，以防您在 T 中使用隐式默认构造函数：

```
(gdb) disassemble main
Dump of assembler code for function main():
   0x00000000004004ec <+0>:     push   rbp
   0x00000000004004ed <+1>:     mov    rbp,rsp
   0x00000000004004f0 <+4>:     sub    rsp,0x10
   0x00000000004004f4 <+8>:     lea    rax,[rbp-0x1]
   0x00000000004004f8 <+12>:    mov    esi,0x1
   0x00000000004004fd <+17>:    mov    rdi,rax
   0x0000000000400500 <+20>:    call   0x400508 <T::operator()(int) const>
   0x0000000000400505 <+25>:    leave
   0x0000000000400506 <+26>:    ret
End of assembler dump. 
```

# java - 在数组中找到最接近给定数字的最大数字

> ID：14808485
> 
> 赞同：-2
> 
> 时间：2013-02-11T08:38:21.440
> 
> 标签：java

假设我有一个名为的数组`ArrL`，它由数字 5、10、25、33、22、8 和 11 组成。我的函数将采用数字 21 并找到“大于 21 且最接近 21”的数字，其中这个案例是22。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:45:09.070

因为您的比较列表没有排序，所以您必须检查其中的每个元素。使用二进制搜索可以更有效地完成排序列表，但您的列表并非如此。

这个想法是在您浏览列表时记录最接近但更大的数字，并在找到更好的地方更新它（仍然比当前保存的更大但更接近），类似于以下描述性过程：

1.  对于列表中的每个数字`N`，请执行以下步骤 2 到 5（含）。如果您没有数字，请转到第 6 步。

2.  如果`N`小于或等于您的目标数，请转到第 5 步。没有意义。

3.  如果`R`尚未设置（这`N`是您发现的第一个大于目标的数字），则保存`N`为返回值`R`，然后转到步骤 5。

4.  如果`N`小于`R`，则替换`R`为`N`，因为它更接近。

5.  返回到第 1 步以获取下一个数字。

6.  如果您`R`在上述步骤中设置了某些内容，那就是您想要的值。否则没有值高于您的目标数字。

下面的伪代码是另一种看待它的方式：

```
def greaterButClosest (list, find):

  found = -1                         # Initially none.

  for idx = 0 to list.length:        # Check all indexes.

    if list[idx] > find:             # Only consider those higher.

      if found == -1:                # First one automatically closest.
        found = idx
      else:
        if list[idx] < list[found]:  # Otherwise, closer if less than current.
          found = idx

  if found == -1:                    # Some sentinel if none found.
    return -99999

  return list[found]                 # Otherwise return it. 
```

* * *

并且，作为概念证明，Python 代码：

```
def greaterButClosest (list, find):
    found = -1
    for idx in range (len(list)):
        if list[idx] > find:                   # < for opposite case.
            if found == -1:
                found = idx
            else:
                if list[idx] < list[found]:    # > for opposite case.
                    found = idx

    # <- Note indent level, this is OUTSIDE the for loop.
    if found == -1:
        return -99999
    return list[found]

for tst in [7, 8, 9, 10, 11, 99]:
    print "%2d: %2d"%(tst, greaterButClosest ([5, 10, 25, 33, 22, 8, 11], tst)) 
```

输出：

```
 7:  8
 8: 10
 9: 10
10: 11
11: 22
99: -99999 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-18T06:21:50.477

你可以这样走

```
 // To find Closest Number
    NavigableSet<Integer> values = new TreeSet<Integer>();
    for (int x : listOfNum) { values.add(x); }
    int lower = values.floor(number);
    int higher = values.ceiling(number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:41:01.417

遍历数组，存储最接近的数字和位置。如果更接近更新这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:47:01.780

以下是您可以遵循的几个步骤， 1.按升序对数组进行排序 2.对数组执行线性搜索，以便显示大于所选数字的第一个数字并跳出循环。对于排序数组：

```
for(int i=0;i<ArrL.length;i++){
if(ArrL[i]>selected_no){
    System.out.println("The closest greater number is'+ArrL[i]);
            break;
     } 
```

}

# java - 我是否应该定义一个与超类型完全相同的子类型

> ID：14808486
> 
> 赞同：1
> 
> 时间：2013-02-11T08:38:28.817
> 
> 标签：java, inheritance

我有一个java作业。它的需求表明有一个称为Module的超类型。它有两个子类型类“必修模块”和“选修模块”。前者继承了超类的所有属性；后者有一个额外的属性，称为部门名称。

我认为必修模块与模块相同。定义一个与超类相同的子类是正确的。每个模块实例必须是强制的或可选的。没有其他类型的模块。我是否应该将 Module 定义为抽象类，因为在决定在实际情况下应该使用什么类时我不想混淆。或者有人可以给我一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:45:37.620

您应该问的问题是： 选修课是必修课吗**？**如果是这种情况，那么您可以让选修模块成为必修模块的超类。

**Java中的多态**被翻译成关系 **“是一个”**

（在您的作业中，很明显 Module 类应该是抽象的。因为它与 Elective Module 类具有相同的“行为”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:59:16.857

看起来你的问题有答案。即使 CompulsoryModule 没有其他属性并且仅扩展模块，您似乎也需要拥有 3 个类。

模块本身可以是抽象的，也可以不是。这取决于您要达到的目标。在某些情况下，您不可能将超类 Module 定义为非抽象类。

例如，如果 Module 有一个您不知道如何实现的方法，除非您使用 CompulsoryModule 或 ElectiveModule，那么您必须将该方法定义为抽象的，从而使整个类抽象。

此外，使类抽象可防止任何人创建该类的实例，并且只能实例化子类。同样，当某些东西没有在 Module 本身中完全定义并且需要特定的子类来理解超类的代码时，就需要这样做。

# c# - 为什么交易以块的形式发送到接收端

> ID：14808487
> 
> 赞同：0
> 
> 时间：2013-02-11T08:38:36.860
> 
> 标签：c#, sockets, tcp, wireshark

我正在一个客户端服务器应用程序中工作，其中我的应用程序充当客户端，我们正在向服务器发送事务。在我这一端的通信中，我一次性发送了 4443 个字节的交易，但在服务器端，他们以块的形式接收此交易详细信息。

当我在 Wireshark 的帮助下检查 TCP 日志时，我发现从我的端开始，事务也会以块的形式发送到服务器端。我已将套接字数据包的缓冲区大小设置为 8092 字节，但仍然存在此问题，所以当我从我的应用程序一次发送完整数据时，为什么在网络中这些数据包以块的形式发送，这可能是什么原因。

请查找 Ethereal 日志文件以供参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:43:30.377

它取决于[最大传输单元](http://en.wikipedia.org/wiki/Maximum_transmission_unit)，这是底层网络的属性。以太网通常是 1492 或 1500 字节。因为您使用流式协议 (TCP)，所以一旦数据包到达，您就会获得数据块，组织它是应用程序的责任，而不是套接字的责任。

# android - 我想制作一个读取二维码的应用程序，但它不应该使用任何外部应用程序

> ID：14808488
> 
> 赞同：0
> 
> 时间：2013-02-11T08:38:38.053
> 
> 标签：android, qr-code

我想制作一个读取二维码的应用程序，但它不应该使用我尝试过使用 zxing 代码的任何外部应用程序，但有时它无法读取代码

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:40:41.053

看看下面的 ZBar 库：http: [//sourceforge.net/projects/zbar/](http://sourceforge.net/projects/zbar/)。

# winforms - 如何使 TileContainer 上的自定义 CheckButton 检查为 false DevExpress

> ID：14808489
> 
> 赞同：0
> 
> 时间：2013-02-11T08:38:45.923
> 
> 标签：winforms, microsoft-metro, devexpress, devexpress-windows-ui

我在 TileContainer 上有一个 CheckButton。我在 CheckButton 的 Checked 事件上显示了一个弹出菜单。现在，我需要在事件结束时取消选中 CheckButton。

```
this.tileContainer1.Buttons.AddRange(new DevExpress.XtraEditors.ButtonPanel.IBaseButton[] {
        new DevExpress.XtraBars.Docking2010.WindowsUIButton("ShowList", global::DMS.Properties.Resources.speech_bubble, -1, DevExpress.XtraBars.Docking2010.ButtonStyle.CheckButton, 0)}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:07:03.283

如果我正确理解您的情况，您可以使用以下方法：

```
WindowsUIButton checkButton = new WindowsUIButton()
{
    Caption = "Check Button",
    Style = ButtonStyle.CheckButton
};
checkButton.CheckedChanged += checkButton_CheckedChanged;
tileContainer1.Buttons.Add(checkButton);
//...
int reentranceCount = 0;
void checkButton_CheckedChanged(object sender, EventArgs e) {
    if(reentranceCount > 0) return;
    /*do some stuff */
    Uncheck((WindowsUIButton)sender);
}
void Uncheck(WindowsUIButton button) {
    reentranceCount++;
    try {
        button.Checked = false;
    }
    finally { reentranceCount--; }
} 
```

**更新：**
如果您使用[TileContiner.ButtonChecked](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraBarsDocking2010ViewsWindowsUIBaseContentContainer_ButtonCheckedtopic)事件，您应该更新上面的代码，如下所示：

```
//...
tileContainer1.ButtonChecked += tileContainer_ButtonChecked;
//...
void tileContainer_ButtonChecked(object sender, ButtonEventArgs e) {
    if(reentranceCount > 0) return;
    /*do some stuff */
    Uncheck((WindowsUIButton)e.Button);
} 
```

# html - 链接到相对样式表标签不起作用

> ID：14808511
> 
> 赞同：0
> 
> 时间：2013-02-11T08:40:02.273
> 
> 标签：html, css, internet-explorer-9, tumblr

我正在创建一个基于 tumblr 的网站，该网站似乎在 google chrome 上运行良好，但我分配到页面右侧的广告框存在问题。我搜索了谷歌并找到了这个[相关的问题](https://stackoverflow.com/questions/5953994/conditional-style-sheets-in-ie9)，但给出的答案对我不起作用。

我尝试了以下方法。
只需添加一个带有正确 if 语句的 html class="ie9" 标记。

清除我的缓存。
并检查浏览器模式。

它似乎只是页面的一个元素。右侧没有正确显示，但我在 IE 9 中进行了自定义，并且我有确切的边距要求。但是我似乎无法链接样式表。这是因为我以这种方式链接静态文件吗？

```
<!--[if IE 9]>
    <link rel="stylesheet" type="text/css" href="http://static.tumblr.com/texnbv5/j70mi1pbq/ie9.css" /> 
```

这与我从不同域而不是托管域链接此样式表这一事实有关吗？

还有无论如何我可以**挑出需要调整的线**吗？我是否可以在我的网站的 css 部分放置一个 if 语句

```
<!--[if IE 9]<style>#Content-right{margin:-1000}</style>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:43:02.190

它不起作用，因为您没有关闭评论标签。它与跨域css文件获取无关，这是完全合法的。

```
<!--[if IE 9]>
    <link rel="stylesheet" type="text/css" href="http://static.tumblr.com/texnbv5/j70mi1pbq/ie9.css" /> 
```

应该`<!-- [if IE 9] -->`

另外......什么引擎应该在这个IF上起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:47:10.340

有一篇关于这个主题的非常有趣的文章。它解决了隔离浏览器特定 CSS 而无需创建整个 CSS 文件的需求/愿望。这种方法还有很多好处。由于我自己的需要，我已经使用它很多年了，直到最近才意识到已经对这项技术进行了这样的分析。

这是链接：[条件样式表与 CSS 黑客](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

**其他注意事项：**

样式表的定位在 CSS 中非常重要。由于我们看不到您的其他调用并且您正在使用单独的样式表，因此将条件语句放在标准样式表下很重要。

**例子**

```
<link rel="stylesheet" href="path/to/standard.css" />
<!--[if IE 9]-->
    <link rel="stylesheet" href="http://path/to/ie9.css" />
<!--[endif]--> 
```

这是因为如果发生冲突，CSS 会使用最后加载的样式。我只提到这一点是因为它可能会影响你的结果，因为这是一个常见的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T10:28:38.113

**试试这个代码**

```
<!--[if lt IE 9]>
        <link rel="stylesheet" href="http://static.tumblr.com/texnbv5/j70mi1pbq/ie9.css" />

<![endif] --> 
```

我希望你工作

# ssh - 将现有的 ssh_authorized_keys 导入 puppet 资源

> ID：14808513
> 
> 赞同：1
> 
> 时间：2013-02-11T08:40:06.717
> 
> 标签：ssh, puppet

有没有办法将所有现有的 ssh 密钥从 /root/.ssh/authorized_keys 自动导入 puppet？例子：

如果我在 /root/.ssh/ssh_authorized_keys 中有以下内容：

```
ssh-rsa AAAAakljsehrkjysdfjkhasdkfhskjghg== userA@hostA
ssh-rsa AAAAajklrkljeykljrsyehkrjryekjdkj== userB@hostB 
```

我想运行类似的东西：

```
puppet resource ssh_authorized_key 
```

并获得以下输出：

```
ssh_authorized_key {'userA':
    ensure => present,
    key    => 'AAAAakljsehrkjysdfjkhasdkfhskjghg==',
    type   => 'ssh-rsa',
    name   => 'userA@hostA',
    user   => 'root',
}
ssh_authorized_key {'userB':
    ensure => present,
    key    => 'AAAAajklrkljeykljrsyehkrjryekjdkj==',
    type   => 'ssh-rsa',
    name   => 'userB@hostB',
    user   => 'root',
} 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T17:34:58.467

这可能有点矫枉过正，但您可以运行[blueprint](https://github.com/devstructure/blueprint)并获取所需的部分，或者一个简单的 bash 脚本：

```
while read line; do 
    keytype=$(echo $line | awk '{print $1}'); 
    keystr=$(echo $line | awk '{print $2}'); 
    username=$(echo $line | awk '{print $3}');

    echo "ssh_authorized_key {'$(echo $username | awk -F'@' '{print $1}')':"; 
    echo "  ensure => present,"; 
    echo "  key => '$keystr',"; 
    echo "  type => '$keytype',"; 
    echo "  name => '$username',"; 
    echo "  user => '$(whoami)',"; 
    echo "}"; 
done < .ssh/authorized_keys 
```

来源：[http ://shtuff.it/article/7/Generate_Puppet_ssh_authorized_keys_resource_from_existing_keys](http://shtuff.it/article/7/Generate_Puppet_ssh_authorized_keys_resource_from_existing_keys)

# php - 将 HTML 表单字段写入文本文件的问题

> ID：14808514
> 
> 赞同：0
> 
> 时间：2013-02-11T08:40:07.057
> 
> 标签：php, html, file, text, output

我正在尝试将 HTML 表单字段的内容写入我的 Web 服务器上的文本文件。

我能够获得在示例中找到的代码，可以在普通的 PHP 文件中工作，但不能在我想要的文件中。

每当我提交表单时，PHP 都会引发错误。`PHP Notice: Undefined index: person in <snip>/upload.php on line 26, referer: <snip>/upload`

这是我要记录的文件的代码：

```
<?php

//Delete Current Files
$dirfiles = glob('<snip>/uploads/*'); // get all file names
foreach($dirfiles as $dirfile){ // iterate files
  if(is_file($dirfile))
    unlink($dirfile); // delete file
}

//Upload New Files
foreach ($_FILES["images"]["error"] as $key => $error) {
    if ($error == UPLOAD_ERR_OK) {
        $name = $_FILES["images"]["name"][$key];
        move_uploaded_file( $_FILES["images"]["tmp_name"][$key], "uploads/" .     $_FILES['images']['name'][$key]);
    }
}

echo "<h2>Successfully Uploaded Images</h2>";

//Log
$when = date("F j, Y, g:i a");
$who = $_POST["person"];
$out = fopen("output.txt", "a");
if (!$out) {
print("Could not append to file");
exit;
}
fputs($out,"$who\t");
fputs($out,"$when\t");
fputs($out,"$_SERVER[REMOTE_ADDR]\n");
print("Name, Time, Date, and IP Address have been recorded.");

?> 
```

在日志文件中，日期和 IP 地址被很好地记录，但没有记录名称。（像这样）

`February 11, 2013, 3:26 am IPADDR`

名字应该在哪里像

`JohnDoe February 11, 2013, 3:26 am IPADDR`

在原始表单文件中，它只是一个典型的表单：

```
<form method="post" action="upload.php">
<input type="text" name="person" /> Your Name<br />
snip...
</form> 
```

记录工作的形式和不工作的形式之间的唯一区别是，这种形式还允许通过以下方式上传图像`<input type="file" name="images" id="images" multiple />`

到底是什么导致名称不被记录？

编辑：更新 - 事实证明，Internet Explorer 中不存在错误，但 Chrome 和 Firefox 中仍然存在。这真的很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:09:01.013

您必须在 html 表单属性中设置 enctype="multipart/form-data"。如果您不这样做，我怀疑 FormData.append() 无法正常工作。

编辑：

尝试将此添加到 javascript 代码中（可能在 之后`if (formdata) {`）：

```
var person = $('input[name=person]').val();
formdata.append('person', person); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:19:58.020

你需要添加 formdata.append("person", $('input[name=person]').val()); 在你的 js 文件中

```
if (formdata) {
    formdata.append("person", $('input[name=person]').val());
    $.ajax({
        url: "upload.php",
        type: "POST",
        data: formdata,
        processData: false,
        contentType: false,
        success: function (res) {
            document.getElementById("response").innerHTML = res; 
        }
    });
} 
```

参考 [1] [https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)

# ruby - Ruby Time 中的舍入错误

> ID：14808517
> 
> 赞同：0
> 
> 时间：2013-02-11T08:40:28.257
> 
> 标签：ruby, time, rounding-error

编辑：它出现在 timev.h 中，亚秒表示为整数而不是浮点数？

即使我知道与 IEEE 754 浮点值的实现相关的舍入误差，我对此感到非常惊讶：

```
Time.utc(1970,1,1,0,0,12.860).strftime("%H:%M:%S,%L") # => "00:00:12,859" 
```

通常，逗号后的第 8 位或第 10 位会报告精度错误，我很理解为什么。但在这种情况下，我的值​​的最后一个有效数字受到影响，并且它似乎比其他众所周知的精度情况更严重。此外，这是 Time 类的一部分，我不知道有什么方法可以在程序中修复它。其他报告的舍入浮点错误有时可能会通过使用不同的类来修复，但在这种情况下，我看不到任何有趣的类可以使用。

我的环境：

```
phil@eldiablo ~ % uname -a                                                                11-02-2013 09:38:49 
Linux eldiablo.loria.fr 3.5.0-23-generic #35-Ubuntu SMP Thu Jan 24 13:05:29 UTC 2013 i686 i686 i686 GNU/Linux
/home/phil
phil@eldiablo ~ % ruby -v                                                                 11-02-2013 09:38:51 
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux] 
```

编辑：所以，关于这个有两个问题：这是否是一个错误？如果我需要 Time 类的精确度，如何处理这种副作用？任何想法或解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:01:44.110

这个错误的严重性源于这样一个事实，即浮点字符串被修剪而浮点数没有被四舍五入。当你看

```
Time.utc( 1970, 1, 1, 0, 0, 12.860 ).subsec
#=> ( 60517119992791 / 70368744177664 ) 
```

在将其转换为浮点数时

```
Time.utc( 1970, 1, 1, 0, 0, 12.860 ).subsec.to_f
#=> 0.8599999999999994 
```

您看到的行为可能被理解为错误和功能。在我看来，这应该被纠正为更直观的结果。在我看来，你应该去[http://bugs.ruby-lang.org/](http://bugs.ruby-lang.org/)并在那里报告惊喜。

# php - php页脚未显示在页面中

> ID：14808518
> 
> 赞同：1
> 
> 时间：2013-02-11T08:40:28.850
> 
> 标签：php, footer

此脚本显示照片，我包含在底部 footer.php 但 php 页面页脚未显示任何结果我该如何解决此问题请帮助我

这是照片库代码

```
$title="";

$logo='';

trouble turn it off.
//0=off 1=on
$makethumbs=1;

// default=thmb.jpeg
$thumbext='thumb.jpeg';

$twidth=170;
$theight=130;

$pwidth = 540;
$pheight = 540;

$rows=4;
$cols=2;

//0=off 1=on
$showfilename=1;
$showpathname=0;

//0=off 1=on
$showexifcomment=1;

//0=off 1=on
$window=1;

//0=off 1=on
$javascript=1;

//0=off 1=on
$linktophoto=1;

$header="NULL";
$footer="NULL";
$stylesheet="styles.css";
$divider=" | "; //
$pagedivider=" | "; //

//No need to mess with anything below here.
error_reporting(E_ALL & ~E_NOTICE);
//Part of this function comes from http://www.php.net/manual/en/function.getimagesize.php
function thumb_maker($filename, $minwidth, $minheight) {
    global $thumbext,$makethumbs;
    if ($makethumbs==1) {
        if (file_exists($filename.$thumbext)) {
            $photosize = getimagesize($filename.$thumbext);
            if (max($minwidth,$minheight)!=max($photosize[0],$photosize[1])) {
            unlink($filename.$thumbext);
            }
        }
        if (!file_exists($filename.$thumbext) && file_exists($filename)) {
            echo "<br/>";
            set_time_limit(60);
            $photosize = getimagesize($filename);
            // Get image size and scale ratio
            $scale = min($minwidth/$photosize[0], $minheight/$photosize[1]);
            if ($scale < 1) {
               $width = floor($scale*$photosize[0]);
               $height = floor($scale*$photosize[1]);
            }
            else {
               $width = $minwidth;
               $height = $minheight;
            }
            if ($photosize['mime']=="image/jpeg") {
                $resizedimage = imagecreatetruecolor($width, $height);
                $thumbimage = imagecreatefromjpeg($filename);
                imagecopyresampled($resizedimage, $thumbimage, 0, 0, 0, 0, $width, $height, $photosize[0], $photosize[1]);
                imagejpeg($resizedimage,$filename.$thumbext,50);
                imageDestroy($resizedimage);
                imageDestroy($thumbimage);
            }
        }
    }
}

//Part of this function comes from http://www.php.net/manual/en/function.getimagesize.php
function gallery_sizer($photo,$minwidth,$minheight) {
    if (file_exists($photo)) {
        $photosize = getimagesize("$photo");
        # Get image size and scale ratio
        $scale = min($minwidth/$photosize[0], $minheight/$photosize[1]);
        if ($scale <= 1) {
            $width = floor($scale*$photosize[0]);
            $height = floor($scale*$photosize[1]);
        }
        else {
            $width = floor($photosize[0]);
            $height = floor($photosize[1]);
        }
        return array($width,$height,$photosize[0],$photosize[1]);
    }
}

function exif_comment($photo) {
    $comment=NULL;
    if (file_exists($photo) && function_exists('exif_read_data')) {
        $exif = exif_read_data($photo, 0, true);
    if (array_key_exists('COMMENT', $exif)) {
            $comment=str_replace("\n", "<br />", strip_tags($exif['COMMENT'][0]));
    }
    }
    return $comment;
}

function getdirs($dir) {
    $dirs=array();
    chdir($dir);
    if ($handle = opendir($dir)) {
        while (false !== ($file = readdir($handle))) {
            if ($file != "." && $file != ".."){
                if (is_dir($file)) {
                    $dirs[] = $file;
                }
            }
        }
        closedir($handle);
    }
    sort($dirs);
    return $dirs;
}

function getphotos($photodir) {
        global $thumbext;
        $nphotos=array();
        if ($handle = opendir($photodir)) {
            while (false !== ($file = readdir($handle))) {
                if ($file != "." && $file != ".." && !eregi(".jpg".$thumbext."$",$file) && eregi(".jpg$",$file)){
           $mtime = filemtime($photodir."/".$file);
                        $nphotos[$mtime] = $file;
                }
            }
            closedir($handle);
        }
        krsort($nphotos);
        $photos = array();
        foreach ($nphotos as $key=>$value) {
            array_push($photos,$value);
        }
        return $photos;
}

function thumb_gallery($photonum) {
    global $photos, $photourl, $photodir, $twidth, $theight, $rows, $cols, $showfilename,$showpathname,$showexifcomment,$linktophoto,$thumbext, $wallpapers, $window, $javascript, $query, $pagedivider;
        if ($photonum>count($photos)-1) {
            $photonum=count($photos)-1;
        }
        if (($photonum)<=0) {
            $photonum=0;
        }

        if(isset($wallpapers)) { $query="&amp;wallpapers=".urlencode($wallpapers); }
        for ($tr = 1; $tr <= $rows; $tr++) {
            $photobody[]="<tr>";
            for ($td = 1; $td <= $cols; $td++) {
                $photobody[]="<td align=\"center\" valign=\"top\">";
                if (array_key_exists($photonum, $photos)) {
                if (file_exists($photodir."/".$photos[$photonum].$thumbext)) {
                    $size=gallery_sizer($photodir."/".$photos[$photonum].$thumbext,$twidth,$theight);
                    $comment=exif_comment($photodir."/".$photos[$photonum]);
                    $jswindowsize=gallery_sizer($photodir."/".$photos[$photonum],1,1);
                    $link = $photourl."/".$photos[$photonum].$thumbext;
                    if ($linktophoto==1) { $linktarget="http://".$_SERVER['HTTP_HOST'].$photourl."/".$photos[$photonum]; } else { $linktarget="http://".$_SERVER['HTTP_HOST'].$_SERVER['PHP_SELF']."?p=".urlencode($photos[$photonum]).$query; }
                    if ($window==1) { if ($javascript==1) { $linktarget='javascript:Popup(\''.$linktarget.'\',\''.($jswindowsize[2]+15).'\',\''.($jswindowsize[3]+15).'\')';    } else { $target="_blank"; } } else { $target="_self"; }
                    if ($photonum<=count($photos)-1) {

                    if ($javascript==0) {
                        $photobody[]="<a href=\"$linktarget\" target=\"$target\">";
                        }
                    else {  $photobody[]="<a href=\"$linktarget\">"; }
                    }
                        $photobody[]="<img class=\"imagedropshadow\" src=\"$link\" width=\"$size[2]\" height=\"$size[3]\" alt=\"$photos[$photonum]\" border=\"1\" /></a><br />";
                }
                if ($photos[$photonum]) {
                    if ($showexifcomment==1 && !is_null($comment)) { $photobody[]='<p class="thmbcaption">'.$comment.'</p>'; }
                    if ($showfilename==1) { $photobody[]='<p class="thmbcaption">'.$dir.'</p>'; }
                    if ($showpathname==1) { $photobody[]='<p class="thmbcaption">http://'.$_SERVER['HTTP_HOST'].$photourl.'/'.$photos[$photonum].'</p>'; }
                }
                }
                $photobody[]="</td>";
                $photonum++;
            }
            $photobody[]="</tr>";
        }
        unset($tr, $td);

        #this is down here for a reason don't move it and use array_unshift instead. Trust me.
        if (($photonum-($rows*$cols))>0) { $prev="<a href=\"".$_SERVER['PHP_SELF']."?pn=".($photonum-(($rows*$cols)*2)).$query."\"class=\"style1\">&lt;&lt; <font face=\"Tahoma\" class=\"ws10\">Previous</font></a>"; } else { $prev=""; }
        if (($photonum)<(count($photos))) { $next="<a href=\"".$_SERVER['PHP_SELF']."?pn=".$photonum.$query."\"class=\"style1\"><font face=\"Tahoma\" class=\"ws10\">Next&gt;&gt;</font></a>"; } else { $next=""; }

        $photopage=array();
        $photopage[]="Pages: ";
        for ($pagelink=0, $pagenum=1; $pagelink<=count($photos); $pagelink+=($rows*$cols), $pagenum++) {
            //thanks to DC for this addition.
        if ($pagenum > 1){
            $photopage[]=$pagedivider."<a href=\"$_SERVER[PHP_SELF]?pn=".($pagelink).$query."\"class=\"style1\"><font face=\"Tahoma\" class=\"ws10\">$pagenum</font></a>  ";
            }
            else {
           $photopage[]=" <a href=\"$_SERVER[PHP_SELF]?pn=".($pagelink).$query."\" class=\"style1\"><font face=\"Tahoma\" class=\"ws10\">$pagenum</font></a>  ";
        }

        }
        unset($pagelink, $pagenum);
        $photopage=implode("", $photopage);

        if ($photonum >= count($photos)) { $endnum=count($photos); } else { $endnum=$photonum; }
        $photobody[]="<tr><td colspan=\"".$cols."\"><table width=\"100%\" border=\"0\"><tr><td width=\"33%\"><div align=\"left\" class=\"caption\">".$prev."</div></td><td width=\"33%\"><div align=\"center\" class=\"caption\">Photos <strong>".($photonum-(($rows*$cols)-1))."</strong> to <strong>".$endnum."</strong> of <strong>".count($photos)."</strong><br />".$photopage."</div></td><td width=\"33%\"><div align=\"right\" class=\"caption\">".$next."</div></td></tr></table></td></tr>";
        array_unshift($photobody, "<tr><td colspan=\"".$cols."\"><table width=\"100%\" border=\"0\"><tr><td width=\"33%\"><div align=\"left\" class=\"caption\">".$prev."</div></td><td width=\"33%\"><div align=\"center\" class=\"caption\">Photos <strong>".($photonum-(($rows*$cols)-1))."</strong> to <strong>".$endnum."</strong> of <strong>".count($photos)."</strong><br />".$photopage."</div></td><td width=\"33%\"><div align=\"right\" class=\"caption\">".$next."</div></td></tr></table></td></tr>");

        #put the table tag at the top of the array.
        array_unshift($photobody, '<table width="100%" border="0" cellspacing="0" cellpadding="3">');
        $photobody[]='</table>';

        if ($window==1 && $javascript==1) {
            array_unshift($photobody, '<SCRIPT language="JavaScript">function Popup(url,width,height) { PopupWindow = window.open (\'\', \'PopupWindow\',\'scrollbars=0,resizable=1,height=\'+height+\',width=\'+width+\',left=100,top=20\'); PopupWindow.focus(); PopupWindow.location.href = url; }</SCRIPT>');
        }

    return $photobody;
}

function photo_gallery($photo) {
    global $photodir, $photourl, $pwidth, $pheight, $thumbsurl, $window, $photos, $wallpapers, $thumbext, $header,$showfilename,$showpathname,$showexifcomment;
    $photobody=array();

    if (isset($photo)) {

        if(isset($wallpapers)) { $query="&amp;wallpapers=".urlencode($wallpapers); }
    foreach ($photos as $key => $value) {
         if($photo==$value) {
          if (array_key_exists($key+1, $photos)) {
            if($photos[$key+1]) {
              $nextphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key+1].$query."\">Next Photo &gt;</a>";
              $nextphotothumb="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key+1].$query."\"><img alt=\"\" src=\"".$photourl."/".$photos[$key+1].$thumbext."\" height=\"50\" border=\"1\" /></a>";
            }
          }
              else {
              $nextphoto=NULL;
              $nextphotothumb=NULL;
              }
          if (array_key_exists($key-1, $photos)) {
            if($photos[$key-1]) {
              $prevphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key-1].$query."\">&lt; Previous Photo</a>";
              $prevphotothumb="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key-1].$query."\"><img alt=\"\" src=\"".$photourl."/".$photos[$key-1].$thumbext."\" height=\"50\" border=\"1\" /></a>";
            }
          }
              else {
              $prevphoto=NULL;
              $prevphotothumb=NULL;
              }
         }
    }
        $size=gallery_sizer($photodir.'/'.$photo,$pwidth,$pheight);
        $comment=exif_comment($photodir.'/'.$photo);

        //close window or prev next menu section
        $photobody[]='<table width="100%" border="0" cellspacing="0" cellpadding="3">';
        $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"></td><td align=\"center\" width=\"33%\"><div align=\"center\" class=\"caption\"></div></td><td align=\"right\" width=\"33%\"></td></tr>";

        if ($window==1) {
        $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"><a href=\"javascript:window.close()\">Close Window</a></td><td align=\"center\" width=\"33%\"><div align=\"center\" class=\"caption\">";
        $photobody[]="</div></td><td align=\"right\" width=\"33%\"></td></tr>";
        }
        else {

        $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"><div align=\"left\" class=\"caption\">".$prevphotothumb.$prevphoto."</div></td><td align=\"center\" width=\"33%\"><div align=\"center\" class=\"caption\">";
        if ($header=="NULL") {
            if (isset($wallpapers)) { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."?wallpapers=".urlencode($wallpapers)."&amp;p=".$photo."&amp;slide=1\">Start Slideshow</a>\n"; }
            else { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photo."&amp;slide=1\">Start Slideshow</a>\n"; }
        }
        $photobody[]="</div></td><td align=\"right\" width=\"33%\"><div align=\"right\" class=\"caption\">".$nextphotothumb.$nextphoto."</div></td></tr>";
        }

        $photobody[]='<tr><td colspan="3" align="center">';
        $photobody[]='<img src="'.$photourl.'/'.$photo.'" width="'.$size[0].'" height="'.$size[1].'" border="0" alt="" class="imageborder" />';

        if ($photo) {
            if ($showexifcomment==1) { $photobody[]='<p class="photocaption">'.$comment.'</p>'; }
            if ($showfilename==1) { $photobody[]='<p class="photocaption">'.$photo.'</p>'; }
            if ($showpathname==1) { $photobody[]='<p class="photocaption">http://'.$_SERVER['HTTP_HOST'].$photourl.'/'.$photo.'</p>'; }
        }

        $photobody[]='</td></tr>';
        $photobody[]='</table>';
    }
    return $photobody;
}

function photo_slides($photo) {
    global $photodir, $photourl, $pwidth, $pheight, $thumbsurl, $window, $photos, $wallpapers, $thumbext, $header,$showfilename,$showpathname,$showexifcomment;
    $photobody=array();

    if (isset($photo)) {

        if(isset($wallpapers)) { $query="&amp;wallpapers=".urlencode($wallpapers); }

    foreach ($photos as $key => $value) {

         if($photo==$value) {
          if (array_key_exists($key+1, $photos)) {
            if($photos[$key+1]) {
              $nextphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key+1].$query."\">Next Photo &gt;</a>";
              $nextphotothumb="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key+1].$query."\"><img alt=\"\" src=\"".$photourl."/".$photos[$key+1].$thumbext."\" height=\"50\" border=\"1\" /></a>";
            }
          }
              else {
              $nextphoto=NULL;
              $nextphotothumb=NULL;
              }
          if (array_key_exists($key-1, $photos)) {
            if($photos[$key-1]) {
              $prevphoto="<br /><a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key-1].$query."\">&lt; Previous Photo</a>";
              $prevphotothumb="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photos[$key-1].$query."\"><img alt=\"\" src=\"".$photourl."/".$photos[$key-1].$thumbext."\" height=\"50\" border=\"1\" /></a>";
            }
          }
              else {
              $prevphoto=NULL;
              $prevphotothumb=NULL;
              }
         }
    }
        $size=gallery_sizer($photodir.'/'.$photo,$pwidth,$pheight);
        $comment=exif_comment($photodir.'/'.$photo);
        $photobody[]='<table width="100%" border="0" cellspacing="0" cellpadding="3">';

        $photobody[]="<tr class=\"imageborder\"><td width=\"33%\"><div align=\"left\" class=\"caption\">".$prevphotothumb.$prevphoto."</div></td><td align=\"center\" width=\"33%\"><div align=\"center\" class=\"caption\">";
        if ($header=="NULL") {
        if (isset($wallpapers)) { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."?wallpapers=".urlencode($wallpapers)."&amp;p=".$photo."\">Stop Slideshow</a>\n"; }
        else { $photobody[]="<a href=\"".$_SERVER['PHP_SELF']."?p=".$photo."\">Stop Slideshow</a>\n"; }
        }
        $photobody[]="</div></td><td align=\"right\" width=\"33%\"><div align=\"right\" class=\"caption\">".$nextphotothumb.$nextphoto."</div></td></tr>";

        //if ($window==1) { $target="<a href=\"javascript:window.close()\">Close Window</a>"; } else { $target="<a href=\"".$_SERVER['HTTP_REFERER']."\">Back</a>"; }
        $photobody[]='<tr><td colspan="3" align="center">';
        $photobody[]='<img src="'.$photourl.'/'.$photo.'" width="'.$size[0].'" height="'.$size[1].'" border="0" alt="" class="imageborder" />';
        if ($photo) {
            if ($showexifcomment==1) { $photobody[]='<p class="photocaption">'.$comment.'</p>'; }
            if ($showfilename==1) { $photobody[]='<p class="photocaption">'.$photo.'</p>'; }
            if ($showpathname==1) { $photobody[]='<p class="photocaption">http://'.$_SERVER['HTTP_HOST'].$photourl.'/'.$photo.'</p>'; }
        }
        $photobody[]='</td></tr>';
        $photobody[]='</table>';
    }
    return $photobody;
}

function display($photobody) {
    global $photodir;
    getheader();
    echo "";
    wallpapers(dirname($_SERVER['SCRIPT_FILENAME']));
    echo "<div class=\"photobody\">";
    foreach ($photobody as $value) {
       echo $value."\n";
    }
    echo "</div>";
    getfooter();
    exit;
}

function wallpapers($dir) {
//for now only one level of wallpapers works.
    global $wallpapers, $title, $photos, $divider, $logo, $photo;
    $dirs=getdirs($dir);
    if (isset($logo)) { echo $logo; }
    if (isset($wallpapers)) { echo "<font face='Tahoma' class='ws10'><B>".$wallpapers." Wallpapers</B>"; } else { echo "<h1>".$title."</h1>"; }

    echo "<div class=\"wallpapers\"><p>";
    if (isset($wallpapers) || isset($photo)) { echo ""; }
    else {  }
    if (count($dirs)>0) {
        foreach ($dirs as $value) {
           echo "";
        }
    }
    echo "</p></div>";
}

//returns the header for the page. Checks for a user defined header.
function getheader() {
    global $header, $title, $slide, $photodir, $photourl, $pwidth, $pheight, $thumbsurl, $window,$photo, $photos, $wallpapers, $stylesheet;

    if(isset($wallpapers)) { $query="&amp;wallpapers=".urlencode($wallpapers); }
    if ($slide==1) { $query=$query."&amp;slide=1"; }

foreach ($photos as $key => $value) {
     if($photo==$value) {
    if (array_key_exists($key+1, $photos)) {
        if($photos[$key+1]) {
            $nextslide=$_SERVER['PHP_SELF']."?p=".$photos[$key+1].$query;
        }
    }
        else {
            $slide=0;
    }
    }
}

    if (isset($header) && $header!="NULL" && is_file ($header)) {
        require("$header");
    }
    else {
    echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"';
        echo "\n";
    echo '"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">';
        echo "\n";
    echo '<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >';
        echo "\n";
        echo '<head>';
        echo '<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />';
        echo "\n";
        echo "<title>$title</title>\n";
        echo '<meta name="author" content="Lee Robertson"/>';
        if ($slide==1 && $header=="NULL") { echo "<META HTTP-EQUIV=refresh CONTENT=\"4; URL=".$nextslide." \">"; }
        echo '<style type="text/css" media="all">@import "'.$stylesheet.'";</style>';
        echo "\n";
        echo '</head>';
        echo "\n";
        echo '<body>';
        echo "\n";
    }
}

//returns the footer for the page. Checks for a user defined footer.
function getfooter() {
    global $footer;
    if (isset($footer) && $footer!="NULL" && is_file ($footer)) {
        require("$footer");
    }
    else {
        echo '';
        echo '</body></html>';
    }
}

$photodir=dirname($_SERVER['SCRIPT_FILENAME']);
$photourl=dirname($_SERVER['PHP_SELF']);
$thumbsurl=dirname($_SERVER['PHP_SELF']);
$photobody=array();

if (isset($_GET['wallpapers'])) {
    if (in_array($_GET['wallpapers'],getdirs(dirname($_SERVER['SCRIPT_FILENAME'])))==FALSE) {
        $wallpapers = NULL;
    }
    else {
        $wallpapers = urldecode($_GET['wallpapers']);
    }
    $photodir=dirname(realpath($_SERVER['SCRIPT_FILENAME']))."/".$wallpapers;
    $photourl=dirname($_SERVER['PHP_SELF'])."/".$wallpapers;
    $thumbsurl=dirname($_SERVER['PHP_SELF'])."/".$wallpapers;
}

//To make sure this works both on Linux and Win
$photodir = str_replace("\\", "/", $photodir);

//Get the jpegs from the folder.
$photos=getphotos($photodir);

//check to see if thumbnails are made if not it will make. Adds time to the processing of the script.
for ($i=0; $i<=count($photos)-1; $i++) {
    thumb_maker($photodir."/".$photos[$i], $twidth, $theight);
}

if (count($photos)<=0) {
    $photobody[]="";
    display($photobody);
    exit;
}
if (isset($_GET['pn'])) {
    $photonum = htmlentities(strip_tags($_GET['pn']));
    $photobody=thumb_gallery($photonum);
}
elseif (isset($_GET['slide'])) {
    $slide=$_GET['slide'];
    $photo=htmlentities(strip_tags(urldecode($_GET['p'])));
    if (file_exists($photodir.'/'.$photo)) {
        $photobody=photo_slides($photo,$pwidth,$pheight);
    }
    else {
        $photobody=thumb_gallery(0);
    }

}
elseif (isset($_GET['p'])) {
    $photo=htmlentities(strip_tags(urldecode($_GET['p'])));
    if (file_exists($photodir.'/'.$photo)) {
        $photobody=photo_gallery($photo,$pwidth,$pheight);
    }
    else {
        $photobody=thumb_gallery(0);
    }

}
else {
    $photobody=thumb_gallery(0);
}

//output it all to the browser.
display($photobody);
exit;
?> 
```

这是页脚和菜单包括代码

```
 <td width="20%" valign="top"><?php include 'menu.php'; ?></td>
    </tr>
  </table>      
  <p align="center"><?php include 'footer.php'; ?></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:25:27.663

检查你的getfooter代码里面它看起来像下面

```
function getfooter()
{
    global $footer;
    //other code
}
```

现在`$footer`值在开始时设置为**NULL**并且您永远不会再次设置它，因此不会包含页脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:02:06.363

我猜在页脚的某个地方代码被卡住了。你能把页脚中的代码删除一会儿，然后放一个回显看看它是否显示吗？如果它工作正常，然后尝试删除功能一段时间，看看会发生什么。让我知道。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T08:43:07.590

短语缺少关闭标签。

代替`<p align="center"><?php include 'footer.php'; ?></td>`

至`<p align="center"><?php include 'footer.php'; ?></p></td>`

# c# - 在 SQL 语句中排序之前总是首选 LINQ 吗？

> ID：14808519
> 
> 赞同：2
> 
> 时间：2013-02-11T08:40:30.663
> 
> 标签：c#, sql, linq

我们需要检索已排序的项目列表。排序顺序将与项目指南的任意列表相关。即它可能是*1, 2, 3, 4*以及*3, 7, 2, 4*。

我们没有使用 LINQ-to-SQL，也没有使用存储过程。

我建议我们按照 SQL Server 提供的顺序获取列表，并在 C# 代码中使用 LINQ 对其进行排序。

另一种方法是创建一个这样的字符串（按照[这个提示](http://www.devx.com/tips/Tip/17288)）。

```
select * from publishers
Order by (CASE City
 WHEN 'Paris'    THEN 1
 WHEN 'Chicago'  THEN 2
 WHEN 'Boston'   THEN 3
 WHEN 'New York' THEN 4
 ELSE 100 END) ASC, City DESC 
```

我必须承认这种方法有一定的简洁性，但我更喜欢在 C# 中使用数据操作。我无法对另一种方法提出很好的打击，所以我不得不承认这是一种有效的方法。

这里有什么缺点？（当然，除了明显的注射，这对我们来说不是问题。幸运的是，我们不必担心安全问题。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:47:41.203

我个人会选择以数据库为中心的解决方案。如果我需要对数据进行排序或分页，我几乎总是尝试在数据库服务器端进行（通常使用`SQL`和/或`StoredProcedures`）。

好处显而易见：

1.  服务器*通常*是您的应用系统中最强大的机器，所以让我们为它付出努力吧。也因为它被调整为为我们做艰苦的工作。

2.  一次在服务器上准备数据，有时意味着它也减小了它的大小（过滤或获取具体页面），因此传输到客户端的数据量大大减少，这有利于用户更快的响应时间。

如果您一次获取所有内容（如您所提到的），*至少*，第一点仍然是您可以考虑的。

# installation - 维修安装和服务包

> ID：14808520
> 
> 赞同：3
> 
> 时间：2013-02-11T08:40:36.823
> 
> 标签：installation, visual-studio-2010, repair

如果出现以下情况会发生什么：

1.  我安装VS2010。
2.  我安装了 VS2010 SP1。
3.  由于 VS2010 中的一些问题，我运行 VS2010 的修复安装。

此时，是否需要重新安装 SP1？简而言之，修复安装是否足够智能，不会用它拥有的旧文件覆盖新版本的文件（从 SP1 开始）？还是修复安装只会将所有内容推平到原始状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T12:06:56.660

维修后，您必须重新应用服务包和汇总。

卸载 Service Pack 或汇总后，您还必须先修复 Visual Studio，然后再重新应用它们。

# php - mysql中的单词之间没有空格？

> ID：14808526
> 
> 赞同：0
> 
> 时间：2013-02-11T08:41:09.727
> 
> 标签：php, mysql

我只是查看了我的 MySQL 数据，并不是所有的单词都连接起来了！例如，如果单词 are `David Greene`，它将显示为`DavidGreene`。

我怎样才能把空间放在应该有的地方？

顺便说一下，数据是动态的。编辑：这是代码：

```
<?php
$errorMsg = "";
// First we check to see if the form has been submitted 
if (isset($_POST['username'])){
    //Connect to the database through our include 
    include_once "scripts/connect_to_mysql.php";
    // Filter the posted variables
    $username = ereg_replace("[^A-Za-z0-9]", "", $_POST['username']); // filter everything but numbers and letters
    $country = ereg_replace("[^A-Z a-z0-9]", "", $_POST['country']); // filter everything but spaces, numbers, and letters
    $state = ereg_replace("[^A-Z a-z0-9]", "", $_POST['state']); // filter everything but spaces, numbers, and letters
    $city = ereg_replace("[^A-Z a-z0-9]", "", $_POST['city']); // filter everything but spaces, numbers, and letters
    $accounttype = ereg_replace("[^a-z]", "", $_POST['accounttype']); // filter everything but lowercase letters
    $email = stripslashes($_POST['email']);
    $email = strip_tags($email);
    $email = mysql_real_escape_string($email);
    $password = ereg_replace("[^A-Za-z0-9]", "", $_POST['password']); // filter everything but numbers and letters
        $passport = ereg_replace("[^A-Za-z0-9]", "", $_POST['passport']); // filter everything but numbers and letters
    // Check to see if the user filled all fields with
    // the "Required"(*) symbol next to them in the join form
    // and print out to them what they have forgotten to put in
    if((!$username) || (!$country) || (!$state) || (!$city) || (!$accounttype) || (!$email) || (!$password) || (!passport)){

        $errorMsg = "You did not submit the following required information!<br /><br />";
        if(!$username){
            $errorMsg .= "--- User Name";
        } else if(!$country){
            $errorMsg .= "--- Country"; 
        } else if(!$state){ 
            $errorMsg .= "--- State"; 
       } else if(!$city){ 
           $errorMsg .= "--- City"; 
       } else if(!$accounttype){ 
           $errorMsg .= "--- Account Type"; 
       } else if(!$email){ 
           $errorMsg .= "--- Email Address"; 
       } else if(!$password){ 
           $errorMsg .= "--- Password";
       } else if(!$passport){ 
           $errorMsg .= "--- Passport";
       }
    } else {
    // Database duplicate Fields Check
    $sql_username_check = mysql_query("SELECT id FROM members WHERE username='$username' LIMIT 1");
    $sql_email_check = mysql_query("SELECT id FROM members WHERE email='$email' LIMIT 1");
    $username_check = mysql_num_rows($sql_username_check);
    $email_check = mysql_num_rows($sql_email_check); 
    if ($username_check > 0){ 
        $errorMsg = "<u>ERROR:</u><br />Your User Name is already in use inside our system. Please try another.";
    } else if ($email_check > 0){ 
        $errorMsg = "<u>ERROR:</u><br />Your Email address is already in use inside our system. Please try another.";
    } else {
        // Add MD5 Hash to the password variable
       $hashedPass = md5($password); 
        // Add user info into the database table, claim your fields then values 
        $sql = mysql_query("INSERT INTO members (username, country, state, city, accounttype, email, password, passport, signupdate) 
        VALUES('$username','$country','$state','$city','$accounttype','$email','$hashedPass','$passport',now())") or die (mysql_error());
        // Get the inserted ID here to use in the activation email
        $id = mysql_insert_id();
        // Create directory(folder) to hold each user files(pics, MP3s, etc.) 
        mkdir("memberFiles/$id", 0755); 
        // Start assembly of Email Member the activation link
        $to = "$email";
        // Change this to your site admin email
        $from = "admin@somewebsite.com";
        $subject = "Complete your registration";
        //Begin HTML Email Message where you need to change the activation URL inside
        $message = '<html>
        <body bgcolor="#FFFFFF">
        Hi ' . $username . ',
        <br /><br />
        You must complete this step to activate your account with us.
        <br /><br />
        Please click here to activate now &gt;&gt;
        <a href="http://www.netolancer.co.uk/bitcoin/activation.php?id=' . $id . '">
        ACTIVATE NOW</a>
        <br /><br />
        Your Login Data is as follows: 
        <br /><br />
        E-mail Address: ' . $email . ' <br />
        Password: ' . $password . ' 
        <br /><br /> 
        Thanks! 
        </body>
        </html>';
        // end of message
        $headers = "From: $from\r\n";
        $headers .= "Content-type: text/html\r\n";
        $to = "$to";
        // Finally send the activation email to the member
        mail($to, $subject, $message, $headers);
        // Then print a message to the browser for the joiner 
        print "<br /><br /><br /><h4>OK $firstname, one last step to verify your email identity:</h4><br />
        We just sent an Activation link to: $email<br /><br />
        <strong><font color=\"#990000\">Please check your email inbox in a moment</font></strong> to click on the Activation <br />
        Link inside the message. After email activation you can log in.";
        exit(); // Exit so the form and page does not display, just this success message
    } // Close else after database duplicate field value checks
  } // Close else after missing vars check
} //Close if $_POST
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:11:11.110

尝试这个：

```
<?php

$errorMsg = "";
// First we check to see if the form has been submitted 
if (isset($_POST['username'])) {
    //Connect to the database through our include 
    include_once "scripts/connect_to_mysql.php";
    // Filter the posted variables
    $username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);
    $country = filter_var($_POST['country'], FILTER_SANITIZE_STRING);
    $state = filter_var($_POST['state'], FILTER_SANITIZE_STRING);
    $city = filter_var($_POST['city'], FILTER_SANITIZE_STRING);
    $accounttype = filter_var($_POST['accounttype'], FILTER_SANITIZE_STRING);
    $email = filter_var(filter_var($_POST['email'], FILTER_SANITIZE_EMAIL), FILTER_VALIDATE_EMAIL);
    $password = filter_var($_POST['password'], FILTER_SANITIZE_STRING);
    // Check to see if the user filled all fields with
    // the "Required"(*) symbol next to them in the join form
    // and print out to them what they have forgotten to put in
    if ((!$username) || (!$country) || (!$state) || (!$city) || (!$accounttype) || (!$email) || (!$password) || (!passport)) {

        $errorMsg = "You did not submit the following required information!<br /><br />";
        if (!$username) {
            $errorMsg .= "--- User Name";
        } else if (!$country) {
            $errorMsg .= "--- Country";
        } else if (!$state) {
            $errorMsg .= "--- State";
        } else if (!$city) {
            $errorMsg .= "--- City";
        } else if (!$accounttype) {
            $errorMsg .= "--- Account Type";
        } else if (!$email) {
            $errorMsg .= "--- Email Address";
        } else if (!$password) {
            $errorMsg .= "--- Password";
        } else if (!$passport) {
            $errorMsg .= "--- Passport";
        }
    } else {
        // Database duplicate Fields Check
        $sql_username_check = mysql_query("SELECT id FROM members WHERE username='$username' LIMIT 1");
        $sql_email_check = mysql_query("SELECT id FROM members WHERE email='$email' LIMIT 1");
        $username_check = mysql_num_rows($sql_username_check);
        $email_check = mysql_num_rows($sql_email_check);
        if ($username_check > 0) {
            $errorMsg = "<u>ERROR:</u><br />Your User Name is already in use inside our system. Please try another.";
        } else if ($email_check > 0) {
            $errorMsg = "<u>ERROR:</u><br />Your Email address is already in use inside our system. Please try another.";
        } else {
            // Add MD5 Hash to the password variable
            $hashedPass = md5($password);
            // Add user info into the database table, claim your fields then values 
            $sql = mysql_query("INSERT INTO members (username, country, state, city, accounttype, email, password, passport, signupdate) 
        VALUES('" . $username . "','" . $country . "','" . $state . "','" . $city . "','" . $accounttype . "','" . $email . "','" . $hashedPass . "','" . $passport . "',now())") or die(mysql_error());
            // Get the inserted ID here to use in the activation email
            $id = mysql_insert_id();
            // Create directory(folder) to hold each user files(pics, MP3s, etc.) 
            mkdir("memberFiles/$id", 0755);
            // Start assembly of Email Member the activation link
            $to = "$email";
            // Change this to your site admin email
            $from = "admin@somewebsite.com";
            $subject = "Complete your registration";
            //Begin HTML Email Message where you need to change the activation URL inside
            $message = '<html>
        <body bgcolor="#FFFFFF">
        Hi ' . $username . ',
        <br /><br />
        You must complete this step to activate your account with us.
        <br /><br />
        Please click here to activate now &gt;&gt;
        <a href="http://www.netolancer.co.uk/bitcoin/activation.php?id=' . $id . '">
        ACTIVATE NOW</a>
        <br /><br />
        Your Login Data is as follows: 
        <br /><br />
        E-mail Address: ' . $email . ' <br />
        Password: ' . $password . ' 
        <br /><br /> 
        Thanks! 
        </body>
        </html>';
            // end of message
            $headers = "From:" . $from . "\r\n";
            $headers .= "Content-type: text/html\r\n";
            // Finally send the activation email to the member
            mail($to, $subject, $message, $headers);
            // Then print a message to the browser for the joiner 
            print "<br /><br /><br /><h4>OK" . $firstname . ", one last step to verify your email identity:</h4><br />
        We just sent an Activation link to:" . $email . "<br /><br />
        <strong><font color=\"#990000\">Please check your email inbox in a moment</font></strong> to click on the Activation <br />
        Link inside the message. After email activation you can log in.";
            exit(); // Exit so the form and page does not display, just this success message
        } // Close else after database duplicate field value checks
    } // Close else after missing vars check
} //Close if $_POST
mysql_close();
?> 
```

我的印象是您遗漏了很大一部分代码。例如，错误消息变量在设置后不会在您的代码中使用。我还没有花时间将所有内容都更改为 mysqli。但我想鼓励你做出改变。请不要说我没有测试代码，所以这部分取决于你。

# xml - 对所有元素应用模板并返回它们，XSLT

> ID：14808527
> 
> 赞同：0
> 
> 时间：2013-02-11T08:41:11.727
> 
> 标签：xml, xslt, xml-parsing, xslt-2.0

如何使用 XSLT 转换 XML 文档，例如读取输入、对文档中的所有元素应用转换（例如修剪前导和尾随空格）并返回具有完整结构的 XML 文档？（另请参阅[如何在 XSLT 中修剪空间而不用单个空格替换重复空格？](https://stackoverflow.com/questions/13974247/how-can-i-trim-space-in-xslt-without-replacing-repating-whitespaces-by-single-on)对于修剪问题）

我从以下用于复制所有元素的代码开始：

```
<xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template> 
```

效果很好。现在我想通过添加一些行来应用转换：

```
<xsl:template match="@* | node()">
    <xsl:copy>

      <xsl:apply-templates select="@* | node()">
        <xsl:call-template name="string-trim">
          <xsl:with-param name="string" select="@* | node()" />
        </xsl:call-template>
      </xsl:apply-templates>

    </xsl:copy>
</xsl:template> 
```

但似乎不允许在“apply-templates”-Tag 内添加“call-template”-Tag。

在将转换应用于每个元素时，如何将完整结构从源文档复制到目标文档中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:51:09.233

您可以有单独的模板`text()`和`@*`...

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="processing-instruction()|comment()|*">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="text()">
        <xsl:call-template name="string-trim">
            <xsl:with-param name="string" select="." />
        </xsl:call-template>                
    </xsl:template>

    <xsl:template match="@*">
        <xsl:attribute name="{name()}">
            <xsl:call-template name="string-trim">
                <xsl:with-param name="string" select="." />
            </xsl:call-template>        
        </xsl:attribute>
    </xsl:template>

    <xsl:template name="string-trim">
        <xsl:param name="string"/>
        ?????
    </xsl:template>

</xsl:stylesheet> 
```

不要忘记用你的替换名为“string-trim”的模板。

# eclipse - maven 无法在 java 1.6 中编译

> ID：14808529
> 
> 赞同：1
> 
> 时间：2013-02-11T08:41:19.590
> 
> 标签：eclipse, maven

如何强制 maven 编译 1.6 兼容源

我在 Eclipse 中使用 Maven 制作了 web-app 项目。将 web.xml 更改为使用 3.0 版本 -> 然后更新配置，现在我无法启动 tomcat。我发现我必须强制 maven 编译源 1.6 兼容，我必须添加

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
 <configuration>
    <source>1.7</source>
    <target>1.7</target>
    <showDeprecation>true</showDeprecation>
    <showWarnings>true</showWarnings>
    <executable>${env.JAVA_HOME_7}/bin/javac</executable>
    <fork>true</fork>
</configuration> 
```

但是eclipse中的有效pom是不可编辑的

那么是否有与 eclipse 兼容的 maven 或任何其他方式强制 maven 编译源 1.6 版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:46:52.047

你有它。只需输入 1.6 而不是 1.7：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.0</version>
    <configuration>
      <source>1.6</source>
      <target>1.6</target>
    </configuration>
  </plugin> 
```

见：[http ://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)

如果不需要，我也会避免额外的配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:53:06.507

只是为了澄清：

在您的项目 POM 中，您实际上并没有编写所有配置，而是覆盖（并最终添加功能）默认配置。

Eclipse 中的“Effective POM”向您展示了它的结果，所以这确实是不可编辑的。

但是，如果您在 POM 中添加一些配置（就像其他答案中提出的那样），它将覆盖默认设置。它将按原样使用，并将显示在“Effective POM”中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T08:45:55.417

编辑：

只需使用 java 1.6 而不是 1.7。

编辑2：

你的版本：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <source>1.7</source>
      <target>1.7</target>
      <showDeprecation>true</showDeprecation>
      <showWarnings>true</showWarnings>
      <executable>${env.JAVA_HOME_7}/bin/javac</executable>
      <fork>true</fork>
    </configuration>
</plugin> 
```

应该：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
      <source>1.6</source>
      <target>1.6</target>
      <showDeprecation>true</showDeprecation>
      <showWarnings>true</showWarnings>
      <executable>${env.JAVA_HOME_7}/bin/javac</executable>
      <fork>true</fork>
    </configuration>
</plugin> 
```

# actionscript-3 - 如何使用 IExternalization？

> ID：14808530
> 
> 赞同：3
> 
> 时间：2013-02-11T08:41:24.720
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, flex4.6

我想保存包含一些 UI 组件的应用程序状态，如图所示。

![在此处输入图像描述](../Images/86e0dd33838d3f442d631f5ddff877a5.png)

当用户离开编辑模式时，工作应该以某种形式保存，以便用户以后可以编辑。

我无法从中检索数据`sharedObject`。

相反，现在我想使用`IExternalization`. 我如何使用它来节省用户工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:10:39.773

[这个](https://stackoverflow.com/questions/850466/properly-serializing-flash-utils-dictionary-to-a-sharedobject)问题有一个 IExternalizable 用法的例子。

您有许多 UIComponents 后代，也许他们甚至共享一个父代。因此，您获取每个类并编写它们`implements IExternalizable`，并编写一个连贯`writeExternal`的`readExternal`方法对，只保存所需的属性（x，y，type，等等。比如说一个电阻，您将它的 x，y，type 保存为枚举或字符串，可能是旋转，仅此而已。当您执行`readExternal`实现时，您会按照编写它们的顺序读取所有值，然后根据您读取的值重构对象内的任何内容。对象外部的任何内容应该由它的父级恢复，它将一个一个地写入一组这些对象（电阻器，电感器，晶体管等），然后将`addChild()`它们读取。这是一个足够复杂的结构，但如果处理得当，它将起作用。

是的，所有这些都可以存储在 SharedObject 中，并使用其本机可用的方法。但请注意，您需要为`registerClassAlias`IExternalizable 实现中涉及的所有类调用一个方法。

# c - 我正在尝试为一个类实现一个基本的 shell，但不断出现段错误。在我创建 getCommandAndArgs 函数之前它可以工作，为什么现在不行？

> ID：14808535
> 
> 赞同：0
> 
> 时间：2013-02-11T08:41:53.610
> 
> 标签：c, shell, segmentation-fault

getCommandAndArgs 函数是新的，但函数中的代码是之前工作代码的副本。我试图允许命令行参数，然后继续运行 shell。我知道 fork 和 run 进程也可能在另一个函数中，但是在我知道为什么程序此时崩溃之前，我不想进一步前进。

```
char *cmd;
char *arguments[255];
char whitechars[] = " \n\t\r";

void getCommandAndArgs(char *tokLine) {
    char *tok;
    int i=0;
    tok = tokLine;
        while(tok != NULL) {
            if(strcmp(tok, "exit")==0) { 
                    printf("Thank you for using myshell!\n");
                        exit(0); 
                }

                if(i==0) { cmd = tok; }

                arguments[i] = tok;
                tok = strtok(NULL, whitechars);
                i++;
        }
        arguments[i]=NULL;
}

int main(int argc, char *argv[]) {
    char *line, *tok;
    int status=0;
    int i;
    pid_t pid;

    if(argc > 1) {
        line = *argv;
        tok = strtok(line, whitechars);
        tok = strtok(NULL, whitechars);

        getCommandAndArgs(tok);

        pid = fork();
                if(pid == 0) {
                        execvp(cmd, arguments);

                        //oh $h!t message
                        fprintf(stderr, "What is this: %s\n", arguments[0]);
                        exit(0);

                }
                else {
                        waitpid(pid, &status, 0);
                        if(status !=0) {
                                fprintf  (stderr, "error: %s exited with status code %d\n", arguments[0], status);
                        }
                }

    }

    while((line = readline("myShell: ")) != NULL) {

        if(strcmp(line, "")==0) { 
                    continue;                
                }

        tok = strtok(line, whitechars);

        getCommandAndArgs(tok);

        pid = fork();
        if(pid == 0) {
            execvp(cmd, arguments);

            //oh $h!t message
            fprintf(stderr, "What is this: %s\n", arguments[0]);
            exit(0);

        }
        else {
            waitpid(pid, &status, 0);
            if(status !=0) {
                fprintf  (stderr, "error: %s exited with status code %d\n", arguments[0], status);
            }
        }

        free(line);
    }
    printf("\nThank you for using myshell!\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:47:18.050

在你的功能中

```
void getCommandAndArgs(char *tokLine) { 
```

有

```
tok = strtok(tokLine, whitechars); 
```

`while`在循环之前丢失

或者

```
tok = tokLine; 
```

如果在`strtok`函数之外完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:16:34.543

@matthew johnson 您尊重 tok 指针而不对其进行初始化。Mohamed KALLEL 的代码看起来更好

# android - 加快安卓模拟器时间

> ID：14808539
> 
> 赞同：7
> 
> 时间：2013-02-11T08:42:17.420
> 
> 标签：android, testing, time, android-emulator

有没有办法让安卓模拟器的时间变得更快？例如。10 倍。

我需要这个用于测试目的。

编辑：我在启用 haxm 和 gpu 仿真的情况下在 4ghz 上运行我的模拟器，因此模拟器本身的速度和平滑度都不是问题。相反，我想知道，我怎样才能让虚拟机中的时间过得更快，从字面上看，如何让分钟过得比实际时间更快:)。问题是我想为我的应用程序模拟一整天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:28:40.170

我能想到的最接近您的方法是更改​​日期和时间，为此您可以在手机上运行 date 命令。为此，您必须运行以下命令：

adb shell date -s "yyyymmdd.[[[hh]mm]ss]"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T04:40:24.533

这可能不是您正在寻找的答案，但根据您的应用程序的设计，您可能能够完全从 android 设备或模拟器外部驱动它。

如果您的应用程序的设计是模块化的，我可以看到这并不太难。在这种情况下，您应该能够为您感兴趣的特定模块的行为制造一些加速时间的驱动程序。

例如，如果您的应用程序是在 MVC 范例中设计的，那么您可能能够从一些非 Android 代码驱动模型。

有一些出色的 Java 模拟库可能会对此有所帮助。我对 Mockito 有点熟悉，如果您正在寻找可以替换系统组件以向其他组件提供虚构输入的东西，这对我来说似乎很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T07:12:33.213

有几种方法可以加速 Android 模拟器，例如

1.  使用快照
2.  使用 x86 英特尔硬件加速器
3.  使用 BlueStacks 等 3rd 方模拟器

您可以在此链接中找到有关“加速 Android 模拟器”的精彩讨论：http: [//devcircle.blogspot.com/2013/02/speeding-up-your-android-emulator.html](http://devcircle.blogspot.com/2013/02/speeding-up-your-android-emulator.html)

希望它有助于克服您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T11:59:40.187

这不可能。

您可以使用蓝色堆栈应用程序作为解决方法，以获得更好的性能。[http://www.bluestacks.com/](http://www.bluestacks.com/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T08:51:25.053

不太可能。即使您杀死所有其他进程，加载也需要一些时间。根据我的说法，最好的选择是在启动后保持打开状态（不要关闭窗口）。您还可以将 BlueStacks App Player 用作模拟器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T08:56:43.037

你不能直接，对不起。

模拟器正在运行实际的 ARM 操作码。它使用`qemu`类似于 VirtualBox 或 VMWare 的虚拟化系统来完成此任务。这种方法最大限度地提高了仿真器和现实世界设备之间的保真度。它的成本是 ARM->Intel 操作码转换。显着加快速度的唯一方法是加快运行模拟器的 CPU [http://www.nuxeo.com/blog/development/2011/10/speeding-up-the-android-emulator/](http://www.nuxeo.com/blog/development/2011/10/speeding-up-the-android-emulator/)可以帮助你

# jquery - 分区滑块。将 5 秒的计时器添加到自动滑动

> ID：14808541
> 
> 赞同：-1
> 
> 时间：2013-02-11T08:42:27.247
> 
> 标签：jquery, html, timer, slider

我有一个运行良好的 div 滑块：http: [//jsfiddle.net/UqSFr/2/](http://jsfiddle.net/UqSFr/2/)

基本功能是这样的：

```
$("#NextButton").click(function(e) { 
e.preventDefault();
if ( $("#h_wrapper").is(':not(:animated)') && $("#NextButton").is(':not(:animated)') ) {
    var newMargin = CurrentMargin() - SlideWidth;
    $("#h_wrapper").animate({ marginLeft: newMargin }, SlideSpeed, function () { SetNavigationDisplay() }); 
}
}); 
```

除了点击功能外，我还想添加一个计时器，所以如果 5 秒内没有点击，它应该移到下一个。

计时器应在点击时重置

到达终点时，它必须转到第一个 div (marginLeft = 0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:50:40.657

看看这段代码

```
$(document).ready(function(e) {
    var index = 0;
    var count = $('#h_wrapper').children().length; // set this value dynamically

    var interval = setInterval(next, 1000); // create the interval

    // move to next slide
    function next() {
        index = (index + 1) % count;
        goto(index);
    }

    // move to previous slide
    function previous() {
        index = (index + count - 1) % count; // not too pretty, but it works
        goto(index);
    }

    // go to slide x
    function goto(x) {
        var margin = index * SlideWidth; // set offset by index + width

        $('#h_wrapper').stop().animate({ // stop cancels any running animations
            'margin-left': margin
        }, SlideSpeed, function(e) {
            SetNavigationDisplay();
        });
    }

    // set click handlers
    $("#NextButton").click(next);
    $("#PreviousButton").click(previous);
}); 
```

这很容易。通过保存索引，可以更轻松地计算下一个和上一个偏移量。将整个动画拆分成一个单独的函数，代码不会更容易阅读和理解，但也更容易调用。

# java - 在需要很长时间的函数之前和之后显示来自 ActionListener 的消息

> ID：14808558
> 
> 赞同：2
> 
> 时间：2013-02-11T08:43:39.910
> 
> 标签：java, multithreading, swing

我有一个可能需要很长时间才能执行的方法。我们称之为**longTime();**

此方法是从按钮上的*动作侦听器调用的。*

我想*`"Please wait.."`*在此方法执行时显示一条消息。

问题是`Jframe`没有响应，它似乎被卡住或等待某些东西。

**重要提示：** *的运行时间`longTime()`可以不同。只有在超过 2-3 秒时才会出现问题。*

我试图做所有这些，`invokeLate`但没有帮助。

```
SwingUtilities.invokeLater(new Runnable() {
  @Override
  public void run() {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    JLabel label = new JLabel("Please wait...");
    label.setFont(new Font("Serif", Font.PLAIN, 25));
    frame.getContentPane().add(label, BorderLayout.CENTER);
    frame.setLocationRelativeTo(null);
    frame.setUndecorated(true);
    frame.pack();
    frame.setAlwaysOnTop(true);
    frame.setVisible(true);
    try{            
      longTime();  //HERE IS THE FUNCTION THAT TAKES A LONG TIME  
    }catch(Exception e){   }
    frame.dispose();  //AFTER THE LONG FUNCTION FINISHES, DISPOSE JFRAME        
  } 
}); 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:50:27.503

所有冗长的任务都应该发生在一个单独的线程中，以防止 GUI 线程（*事件调度线程*）被阻塞。我建议您考虑使用[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)对象来执行冗长的任务并在完成后执行操作。

[您可以在http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)阅读有关此主题的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T08:53:10.790

*   有两种方法，使用`JLayer (Java7)`基于`JXLayer (Java6)`or `Glasspane`，使用`JLabel`(with `intermediate Icon`) 调用

    1.  从`SwingWorker`

    2.  （最简单）从`Runnable.Thread`（输出到 Swing GUI 必须包含在`invokeLater`）

*   仔细使用[Swing 中的 Concurency](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)，所有更改都必须在 EDT 上完成

*   不要重新发明轮子，[@camickr 的代码示例](http://tips4java.wordpress.com/?s=glasspane)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T09:14:33.180

用一个简单的例子突出 mKorbel 和 Ducan 的建议（对两者都 +1）......

```
public class RunLongTime {

    public static void main(String[] args) {
        new RunLongTime();
    }

    public RunLongTime() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public interface WorkMonitor {

        public void updateProgress(float progress);
        public void done();

    }

    public class TestPane extends JPanel implements WorkMonitor {

        private JLabel message;
        private JButton button;

        public TestPane() {
            message = new JLabel("Click to get started");
            button = new JButton("Start");
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.insets = new Insets(2, 2, 2, 2);
            add(message, gbc);
            add(button, gbc);

            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    button.setEnabled(false);
                    message.setText("Getting started...");
                    BackgroundWorker worker = new BackgroundWorker(TestPane.this);
                    worker.execute();
                }
            });
        }

        @Override
        public void updateProgress(float progress) {
            message.setText("Please wait..." + NumberFormat.getPercentInstance().format(progress));
        }

        @Override
        public void done() {
            message.setText("All done...");
            button.setEnabled(true);
        }

    }

    public class BackgroundWorker extends SwingWorker<Void, Float> {

        private WorkMonitor monitor;

        public BackgroundWorker(WorkMonitor monitor) {
            this.monitor = monitor;
        }

        @Override
        protected void done() {
            monitor.done();
        }

        @Override
        protected void process(List<Float> chunks) {
            monitor.updateProgress(chunks.get(chunks.size() - 1));
        }

        @Override
        protected Void doInBackground() throws Exception {
            for (int index = 0; index < 1000; index++) {
                Thread.sleep(125);
                publish((float)index / 1000f);
            }
            return null;
        }

    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T08:45:49.847

您必须生成另一个线程并在另一个线程中运行您的 longTime() 任务。调用 invokeLater() 仍然在 UI 线程中运行它，您不想阻止它。

考虑以下代码：

```
 final JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    JLabel label = new JLabel("Please wait...");
    label.setFont(new Font("Serif", Font.PLAIN, 25));
    frame.getContentPane().add(label, BorderLayout.CENTER);
    frame.setLocationRelativeTo(null);
    frame.setUndecorated(true);
    frame.pack();
    frame.setAlwaysOnTop(true);
    frame.setVisible(true);

    new Thread(new Runnable() {
        @Override
        public void run() {
        try{            
            longTime();  //HERE IS THE FUNCTION THAT TAKES A LONG TIME  
        }catch(Exception e){   }
            frame.dispose();     //AFTER THE LONG FUNCTION FINISHES, DISPOSE JFRAME     
        } 
        }).start(); 
```

您可能希望从新生成的线程更新数据模型。那将是使用 SwingUtilities.invokeLater() 的正确位置。不要在这个新线程中更新模型。UI 组件的模型只能在 UI 线程中更新。稍后调用正是这样做的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T08:47:12.530

只需调用`longTime()`一个新线程，例如

```
new Thread(){ public void run() {longTime();}}.start(); 
```

# android - 在模拟器中设置特定的抽象 LCD 密度 (312)

> ID：14808560
> 
> 赞同：0
> 
> 时间：2013-02-11T08:43:56.383
> 
> 标签：android

我想配置 HTC One Plus 模拟器，其配置如下所示：[http ://www.gsmarena.com/htc_one_x-4320.php](http://www.gsmarena.com/htc_one_x-4320.php)

现在在创建模拟器时，我想将抽象 LCD 密度设置为 312，但它并没有改变它。它显示 120、160、240、320 dpi。但我想将自定义 LCD 密度设置为 312。

我对此进行了很多研究，但一无所获。请建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:00:54.583

我可以在 Mac 版本的 Motodev 中执行此操作，我添加了下面创建的示例模拟器的屏幕截图。但我发现非常困难并且当前 ADT 中没有其他选项可用。

![在此处输入图像描述](../Images/041716c1ac0c53258cc59470c890e011.png)

# hibernate - 得到错误嵌套异常是 org.hibernate.QueryException: could not resolve property: compositKey of:

> ID：14808563
> 
> 赞同：0
> 
> 时间：2013-02-11T08:44:06.530
> 
> 标签：hibernate

我收到错误消息

```
nested exception is org.hibernate.QueryException: could not resolve property: 
compositKey of: com.thetasp.tu.data.TuSegCreditExposure 
[from com.thetasp.tu.data.TuSegCreditExposure c where c.compositKey.rptRefNo=? and 
c.ic=?] 
```

在这里我正在查询并获得异常

```
public List<Object> findSegObjByRptRefNo(String rptRefNo, Class className,
        String[] fields, String[] values) {
    StringBuffer buff = new StringBuffer();
    String sql = "from " + className.getName() + " c 
        where c.compositKey.rptRefNo=?";
    buff.append(sql);

    if (fields != null) {
        for (int i = 0; i < fields.length; i++) {
            String field = fields[i];
            buff.append(" and c." + field + "=?");
        }
    }

    Object[] argument = new Object[values.length + 1];
    argument[0] = rptRefNo;

    for (int i = 1; i <= values.length; i++) {
        argument[i] = values[i - 1];
        System.out.println(argument[i]);
    }

    try {

        List<TuSegCreditExposure> exList = getHibernateTemplate().find(
                buff.toString(), argument);
    } catch (Exception e) {
        String message = e.getMessage();
        System.out.println(e.getStackTrace());
    }

    return getHibernateTemplate().find(buff.toString(), argument);
} 
```

这条线给了我错误

```
List<TuSegCreditExposure> exList = getHibernateTemplate().find(buff.toString(), 
                                                       argument); 
```

为什么我收到此错误。

这是我的 TuSegCreditExposue 类

```
public class TuSegCreditExposure extends AbstractArchivableObj implements Serializable {

private TuSegCompositeKey compositeKey;
private String totalAccountsRevolv;
    .... 
```

}

请告诉我为什么我得到这个例外。我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:55:53.787

它应该是

```
String sql = "from " + className.getName() + " c 
    where c.compositeKey.rptRefNo=?"; 
```

而不是`compositKey`，请参阅缺少的 e `composit`:)

谢谢

# c# - 寻找与 LINQ 兼容的 C#-REPL

> ID：14808564
> 
> 赞同：1
> 
> 时间：2013-02-11T08:44:15.633
> 
> 标签：c#, .net, linq, read-eval-print-loop

我为 Visual Studio 10 尝试了几个 REPL 附加组件，

但它们都不兼容 LINQ 表达式。

会节省我很多时间。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:46:48.790

它不是 VS 插件，但我推荐[`LINQPad`](http://www.linqpad.net/)

它对 LINQ 有很好的支持，也很好地支持实体框架。

# eclipse - Eclipse rcp 应用程序从 IDE 加载插件？

> ID：14808569
> 
> 赞同：0
> 
> 时间：2013-02-11T08:44:27.693
> 
> 标签：eclipse, plugins, rcp

我有一个运行良好的 RCP 应用程序，但是一旦我尝试为其开发插件，就会出现问题。

我做了什么：

1.  创建一个工作的 RCP 应用程序。
2.  为我的 RCP 应用程序开发插件设置一个 Eclipse IDE：我将我的 rcp 应用程序的所有插件添加到 IDE 的插件文件夹中，并调整了启动配置，以便它启动我的应用程序。
3.  运行应用程序时，它会启动，我看到了我的 RCP 应用程序的所有功能，但我也从 eclipse IDE 中看到了很多不必要的信息。例如，关于选项卡塞满了 8 个不同的图标。我用于开发的 ClearCase 插件也是我的 RCP 应用程序菜单的一部分。

**编辑：**我不想要的菜单条目：

1.  Window->ShowView->Other（这里显示了 IDE 可用的所有视图）
2.  Window->Preferences（这里显示了 Eclipse IDE 的所有首选项）。
3.  Help->Report Bug or Enhancment（我根本不想要这个条目）。
4.  帮助->软件更新（我根本不想要这个条目）。
5.  帮助->关于对话框（包含很多关于 eclipse IDE 的信息，我根本不需要）。
6.  工具栏->创建新的视觉类（我想删除这个按钮）。
7.  工具栏->打开任务（我想删除这个按钮）。

如何获取插件/eclispe IDE 特定菜单条目和其他 eclispe 特定信息？为什么它们只在为我的 rcp 开发插件时出现，而不是在开发 rcp 本身时出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:10:28.563

您应该创建一个`.product`文件并导出您的 RCP 应用程序，而不是将它们放入您的 Eclipse 插件文件夹并更改初始化配置。

然后导出您的产品，结果是您的 RCP 应用程序，它遵循与 Eclipse 相同的结构，但 plugins 文件夹仅包含您在产品依赖项中定义的插件。

您应该从以下常见问题解答和教程开始使用产品

*   [Vogella：Eclipse 产品和部署教程](http://www.vogella.com/articles/EclipseProductDeployment/article.html)
*   [Eclipse 常见问题解答：什么是 Eclipse 产品？](http://wiki.eclipse.org/FAQ_What_is_an_Eclipse_product%3F)
*   [Eclipse 常见问题解答：如何创建 Eclipse 产品？](http://wiki.eclipse.org/FAQ_What_is_an_Eclipse_product%3F)

# php - Amcharts 条形图仅显示 Firefox 中的第一条记录

> ID：14808570
> 
> 赞同：0
> 
> 时间：2013-02-11T08:44:28.847
> 
> 标签：php, javascript, charts

我正在尝试使用 javascripts amcharts 显示条形图。但是只有第一条记录的栏出现在 Firefox 中，在 chrome 和 IE 中输出正常。其余数据不显示在图表上。类别和值轴显示存在多条记录，但仅显示第一个条。请帮忙。

以下是我的代码供您参考。

```
var lineChartData = [{
    title: new Date(2009, 10, 2),
    value: 1816},
{
    title: new Date(2009, 10, 3),
    value: 2680},
{
    title: new Date(2009, 10, 4),
    value: 1448},
{
    title: new Date(2009, 10, 5),
   value: 1848},
{
   title: new Date(2009, 10, 6),
   value: 1130},
{
 title: new Date(2009, 10, 9),
 value: 1095},
{
 title: new Date(2009, 10, 10),
 value: 990},
{
 title: new Date(2009, 10, 11),
 value: 13580},
{
 title: new Date(2009, 10, 12),
 value: 1709},
{
 title: new Date(2009, 10, 13),
 value: 1378},
{
 title: new Date(2009, 10, 16),
 value: 1378},
{
 title: new Date(2009, 10, 17),
 value: 1571},
{
 title: new Date(2009, 10, 18),
 value: 5079},
{
 title: new Date(2009, 10, 19),
 value: 5079},
{
 title: new Date(2009, 10, 20),
 value: 1744},
{
 title: new Date(2009, 10, 23),
 value: 1728},
{
 title: new Date(2009, 10, 24),
 value: 1584},
{
 title: new Date(2009, 10, 25),
 value: 3788},
{ 
 title: new Date(2009, 10, 26),
 value: 3788  },
{
  title: new Date(2009, 10, 27),
 value: 13963},
{
 title: new Date(2009, 10, 30),
 value: 13963},
{
 title: new Date(2009, 11, 1),
 value: 1642},
{
 title: new Date(2009, 11, 2),
 value: 1642},
{
 title: new Date(2009, 11, 3),
 value: 10681},
{
 title: new Date(2009, 11, 4),
 value: 1322}];

var chart = new AmCharts.AmSerialChart();
        chart.autoMarginOffset = 0;
        chart.marginRight = 0;    
        chart.dataProvider = lineChartData;
        chart.categoryField = "title";
        // this single line makes the chart a bar chart, 
        // try to set it to false - your bars will turn to columns                
        chart.rotate = true;
        // the following two lines makes chart 3D
        chart.depth3D = 20;
        chart.angle = 30;

        // AXES
        // Category
        var categoryAxis = chart.categoryAxis;
        categoryAxis.gridPosition = "start";
        categoryAxis.axisColor = "#DADADA";
        categoryAxis.fillAlpha = 1;
        categoryAxis.gridAlpha = 0;
        categoryAxis.fillColor = "#FAFAFA";

        // value
        var valueAxis = new AmCharts.ValueAxis();
        valueAxis.axisColor = "#DADADA";
        valueAxis.title = "Income in millions, USD";
        valueAxis.gridAlpha = 0.1;
        chart.addValueAxis(valueAxis);

        // GRAPH
        var graph = new AmCharts.AmGraph();
        graph.title = "Income";
        graph.valueField = "value";
        graph.type = "column";
        graph.balloonText = "Income in [[category]]:[[value]]";
        graph.lineAlpha = 0;
        graph.fillColors = "#bf1c25";
        graph.fillAlphas = 1;
        chart.addGraph(graph);

    chart.write("chartdiv"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:37:15.890

问题是“价值：”。当我将 value: 更改为 chart_value: 时，Firefox 以某种方式响应良好：

# c++ - 为什么F10第二次不工作？

> ID：14808572
> 
> 赞同：-2
> 
> 时间：2013-02-11T08:44:44.807
> 
> 标签：c++, mfc

在我的 MFC 应用程序中，第一次按`F10`时，快捷键起作用。但是对于随后的按`F10`，没有任何反应。我第一次看到使用`pMsg->lParam`包含`0x440001`的调试视图。从第二次开始`pMsg->lParam`包含`0x10440001`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:45:38.800

`F10`由 Windows 特殊处理。当您按下`F10`时，焦点将进入菜单，然后您可以使用箭头键在菜单中导航。这种行为可以追溯到 Windows 3（甚至更远）。您的问题可能与此有关。

打开记事本，按下`F10`然后使用箭头键，你会看到会发生什么。

我制作了一个非常简单的 MFC 应用程序（使用 Visual Studio 2010），如果我为该`F10`键创建一个快捷方式，MFC 似乎会处理所有事情，并且该`F10`键会启动命令，所以它不起作用很奇怪在您的 MFC 应用程序中。如果我从加速器中从 F10 中删除，则`F10`再次像在记事本中一样。

尝试替换`F10`快捷方式`F11`，看看问题是否消失。如果不是，原因可能是无关的。

# iphone - 什么时候应该使用延迟加载来加载图像？

> ID：14808575
> 
> 赞同：1
> 
> 时间：2013-02-11T08:45:09.290
> 
> 标签：iphone, ios, objective-c, cocoa-touch

例如，如果从服务器下载图像，我们应该延迟加载图像。我想知道其他情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:52:29.843

总是这样做不会有什么坏处。最近推出的所有设备都受益于多核 CPU。Grand central dispatch 可以轻松定义将在另一个内核上执行的进程，然后在完成后将其同步到主线程以进行 UI 更新。

如果你这样做，你的应用程序会感觉更灵敏，并且也很容易从本地磁盘访问转移到对资源的​​远程访问。

***例子：***

```
 dispatch_queue_t taskQ = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(taskQ, ^
    {
        //Do some work. . . . 

        //Now update back on the main thread
        dispatch_async(dispatch_get_main_queue(), ^
        {

        });
    });

    //release the queue. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:54:19.060

图像尚未在活动内存中并准备好显示的任何时间。

如果您从磁盘或核心数据加载图像，那么延迟加载它并使用占位符图像直到它完成不会有什么坏处。

特别是对于 UITableView，当您以 100x100 显示图像并且实际图像为 1000x1000 时。

在 BG 中调整大小，完成后呈现小图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:53:25.933

延迟加载的想法是您仅在需要时才加载资源。例如，如果您的应用程序包中有很多图像/资源，您可以在应用程序启动时将它们全部加载，同时让所有内容都进入内存。这是一个坏主意，因为它不仅使用大量 RAM（也非常不必要，因为它不会同时全部显示在屏幕上），而且可能需要很长时间才能加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T08:54:02.973

如果您在获取消息并显示消息方面的操作将在主线程上花费大量时间并阻塞您的应用程序，那么您应该在后台线程上执行您的操作。

# maven - 使用 maven-release-plugin 更新版本

> ID：14808586
> 
> 赞同：1
> 
> 时间：2013-02-11T08:46:05.780
> 
> 标签：maven, jenkins, maven-release-plugin

我将 maven 3.0.4 与 cvs 和 jenkins 结合使用。

我有一个带有主 pom 和一些模块的多模块项目。

为了正确的版本控制，我在 jenkins 中设置了一些环境变量。

第一步是我在 jenkins 中有一个执行 maven 目标的预构建步骤：

```
--batch-mode release:update-versions -DdevelopmentVersion=${ACTUAL_VERSION}${BUILD_NUMBER}-SNAPSHOT 
```

现在 maven 正在更新我的父 pom 的版本以及从模块到父 pom 的连接。这一切正常，但我在未更新的模块之间有一些内部依赖关系。我怎样才能强制 Maven 也更新它们？

例子：

-- 父级 -- 模块 1 -- 模块 2

在模块 2 中存在对模块 1 的依赖关系，例如

```
<dependency>
    <groupId>xyz</groupId>
    <artifactId>module2</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</dependency> 
```

在 release:update-versions 之后，父 pom 和模块被更新，但依赖关系现在仍然引用旧版本。有没有办法更新这个依赖版本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T08:50:53.633

最简单和最好的解决方案（在我看来）是使用：

```
<dependency>
    <groupId>xyz</groupId>
    <artifactId>module2</artifactId>
    <version>${project.version}</version>
</dependency> 
```

而不是硬编码版本。也许您也可以使用以下内容：

```
<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>module2</artifactId>
    <version>${project.version}</version>
</dependency> 
```

# android - 如何将数据放入列中，哪些数据从 sqlite 中的一行获取并放入字符串/文本视图

> ID：14808589
> 
> 赞同：1
> 
> 时间：2013-02-11T08:46:25.347
> 
> 标签：android

如何将数据从 sqlite 放到 textview 中的一行。我有 2 个文本视图，我想从数据库 sqlite 获取数据。这是我的查询：

```
public Cursor getItem(long itemId) {
    SQLiteDatabase db = this.getWritableDatabase();
    String selectQuery = "SELECT name, link FROM tes WHERE "
            + BaseColumns._ID + "=" + itemId;
    Cursor cursor = db.rawQuery(selectQuery, null);
    return cursor;
} 
```

以及如何将名称和链接的内容放入 textview。我想放在下面：

```
String name = ""; // how to get contents of name from coloumn name in my query?
String link = ""; // how to get contents of link from coloumn link in my query?

textName.setText(name);
textLink.setText(link); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:58:03.787

尝试这个：

```
Cursor cursor = db.rawQuery(selectQuery, null);
cursor.moveToFirst();

if (cursor.getCount() > 0) {
String name = cursor .getString(cursor.getColumnIndex("name")).trim();
String link  = cursor .getString(cursor.getColumnIndex("link ")).trim();

textName.setText(name);
textLink.setText(link);

}
cursor.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:57:12.077

尝试：

```
Cursor c1 =getItem(long itemId);
c1.moveToFirst();

if(c.getCount()>0){
        String name = c1.getString(c.getColumnIndex("name"));; 
        String link = c1.getString(c.getColumnIndex("link")); 

        textName.setText(name);
        textLink.setText(link);
} 
```

# android - 如何使用 LoadManager 创建分段适配器

> ID：14808592
> 
> 赞同：1
> 
> 时间：2013-02-11T08:46:29.773
> 
> 标签：android, listview, android-adapter

这是使用 LoadManager [http://developer.android.com/reference/android/app/LoaderManager.html的示例](http://developer.android.com/reference/android/app/LoaderManager.html)

分段适配器的示例是

私有类 SectionAdapter 扩展 SectionedAdapter {

```
@Override
protected View getHeaderView(String caption, int index,
                             View convertView, ViewGroup parent) {
    TextView tv = new TextView(LazySectionListActivity.this);
    tv.setText(caption);
    return tv;
} 
```

}

我对 LoadManager 的问题是我无法从单独的游标中获取日期:(，即我需要用来自两个单独游标的数据填充列表视图，并且它们应该在列表视图中用一些标题分开（就像分段适配器一样）

如何使用 LoadManager 在同一个列表视图中显示来自不同光标的数据

到目前为止，我设法在 onCreateLoader 方法中仅使用一个光标制作了可行的示例

```
 public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        Uri baseUri;
            baseUri = Contacts.CONTENT_URI;

        String select = "((" + Contacts.DISPLAY_NAME + " NOTNULL) AND ("
                + Contacts.HAS_PHONE_NUMBER + "=1) AND ("
                + Contacts.DISPLAY_NAME + " != '' ))";
        return new CursorLoader(getActivity(), baseUri,
                CONTACTS_SUMMARY_PROJECTION, select, null,
                Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
    } 
```

但我需要显示来自两个单独游标的数据

我知道我不能有两个 return 语句，但我试图说明我不知道如何解决的问题

```
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        Uri baseUri;
            baseUri = Contacts.CONTENT_URI;

        String select = "((" + Contacts.DISPLAY_NAME + " NOTNULL) AND ("
                + Contacts.HAS_PHONE_NUMBER + "=1) AND ("
                + Contacts.DISPLAY_NAME + " != '' ))";
        return new CursorLoader(getActivity(), baseUri,
                CONTACTS_SUMMARY_PROJECTION, select, null,
                Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
//beside the first cursor data that I want to be displayed 
//I also want the date from the second cursor 
        Uri baseUri2;
            baseUri = "some other uri";

        String select2 = "some other select";
        return new CursorLoader(getActivity(), baseUri2,
                        projection, select2, null,
                MyClass.BlaBla + " COLLATE LOCALIZED ASC");
    } 
```

# iphone - 链接到 iphone 中的谷歌地图

> ID：14808600
> 
> 赞同：0
> 
> 时间：2013-02-11T08:46:58.733
> 
> 标签：iphone, xcode, google-maps

所以我想知道苹果公司的人是否允许在应用程序中使用谷歌地图的链接。还是他们不想让你使用 Apple 地图？我有这样的 google mpas 链接：

```
NSString *maps=[NSString stringWithFormat:@"http://maps.google.com"];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:maps]]; 
```

他们可以对此提出任何问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:36:17.120

[Apple 文档的](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)地图 URL 格式 。看起来你可以替换`maps.google.com`为`maps.apple.com.`

**重要提示：** 在 iOS 5.1 及更早版本中，Map Kit 框架使用 Google 移动地图 (GMM) 服务来提供地图数据。

事实证明，在 MobileSafari 中`iOS 6;`点击链接以`http://maps.apple.com?q=...`使用该搜索打开地图应用程序也是如此，与`http://maps.google.com?q=...`以前的版本相同。我很好奇并尝试了它并且它有效，然后注意到它在上面链接的页面中明确确认。

# javascript - 有没有让回调看起来不错的 JavaScript 预处理器？

> ID：14808602
> 
> 赞同：3
> 
> 时间：2013-02-11T08:47:05.640
> 
> 标签：javascript, asynchronous, preprocessor

像 jQuery 这样的 JavaScript 工具包都是关于回调函数的，而且这些回调通常是匿名定义的。示例：某些网页在表格中显示消息列表。要更新此表，它可能首先向服务器询问所有当前消息（作为 ID）的列表，然后检索未知消息 ID 的内容：

```
function fnUpdateMessages() {
   $.ajax({
      type: 'POST',
      data: { action: 'get_message_ids' },
      success: function(sData) {
         var aMessageIds = sData.split(/,/);
         var aUnknownIds = fnWhichIdsAreNotInTable(aMessageIds);
         $.ajax({
            type: 'POST',
            data: {
               action: 'get_message_contents',
               ids: aUnknownIds.join(',')
            },
            success: function(oData) {
               for (var id in oData.messages) {
                  fnInsertMessage(oData.messages[id]);
               }
            }
         );
      }
   );
} 
```

你看到我要去哪里了吗？这段代码很难看，因为在随后的 2 次 AJAX 调用之后缩进处于第 6 级。我当然可以在文件范围内将匿名函数拆分为单独的函数，但这通常会污染命名空间（除非通过将其包装在另一个匿名函数调用中进一步混乱）并且它打破了这些函数之间的牢固联系：回调应该真的不能自己用；它们就像原始`fnUpdateMessages`功能的第二部分和第三部分。

我更想要的是这样的：

```
function fnUpdateMessages() {
   $.ajax({
      type: 'POST',
      data: { action: 'get_message_ids' },
      success: continue(sData)
   });

   var aMessageIds = sData.split(/,/);
   var aUnknownIds = fnWhichIdsAreNotInTable(aMessageIds);
   $.ajax({
      type: 'POST',
      data: {
         action: 'get_message_contents',
         ids: aUnknownIds.join(',')
      },
      success: continue(oData)
   );

   for (var id in oData.messages) {
      fnInsertMessage(oData.messages[id]);
   }
} 
```

这个片段引入了新的假设语法`continue(var1, var2, [...])`，它定义了一个匿名回调函数，其主体是封闭函数范围内的所有内容。这使得这些回调函数看起来像同步代码。显然，这必须进行预处理，因为它不是标准的 JS。

在我考虑编写这样的预处理器之前，我想知道这样的东西是否已经存在？

PS如果你喜欢这个想法，请偷走它。我现在买不起另一个项目。如果您获得一些工作代码，在评论中指向您的存储库的链接会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:30:07.720

只有两种解决方案：

第一个非常糟糕：您必须使第一个 ajax 请求同步，但您的脚本将阻塞，直到结果可用。这确实是一个糟糕的解决方案，您不应该使任何 ajax 请求同步。

第二个在 $.ajax 的延迟对象返回上使用 jQuery.pipe 函数（你必须使用 jquery > 1.5）。您可以像这样使用管道链接回调（我使用内部函数使其更具可读性）：

[编辑]：从 jquery 1.8 开始，您应该使用 deferred.then 而不是 deferred.pipe ：

```
 function fnUpdateMessages() {
        var getMessages = function() {
            return $.ajax({
                type: 'POST',
                data: { action: 'get_message_ids' },
            });
        };

        var getContents = function(aUnknownIds) {
            return $.ajax({
                type: 'POST',
                data: {
                    action: 'get_message_contents',
                    ids: aUnknownIds.join(',')
                },
            });
        };

        var insertMessages = function(oData) {
            for (var id in oData.messages) {
                fnInsertMessage(oData.messages[id]);
            }
        };

        getMessages()
            .then(getContents)
            .done(insertMessages);
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:20:48.697

您可以使用 jQuery 的 deferreds 来链接回调，而不是将它们包含在选项中。

```
function fnUpdateMessages() {
   $.ajax({
      type: 'POST',
      data: { action: 'get_message_ids' }
   ).done(function(sData) {
      var aMessageIds = sData.split(/,/);
      var aUnknownIds = fnWhichIdsAreNotInTable(aMessageIds);
      $.ajax({
         type: 'POST',
         data: {
            action: 'get_message_contents',
            ids: aUnknownIds.join(',')
         }
      }).done(function(oData) {
         for (var id in oData.messages) {
            fnInsertMessage(oData.messages[id]);
         }
      });
   });
} 
```

它并不完美，但它会为每个请求节省几个级别的缩进。

有关更多信息，请参阅[$.ajax](http://api.jquery.com/jQuery.ajax/)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:36:39.887

就在这里。它被称为[jwacs - 具有高级延续支持的 JavaScript](http://chumsley.org/jwacs/ "jwacs - 具有高级延续支持的 Javascript")。简单地说，您使用延续来暂停程序的执行。然后，您可以通过调用延续来恢复程序的执行。延续始终保留程序在创建时的状态。

这有点像[JavaScript 中的蹦床](http://tobyho.com/2010/12/10/trampolines-in-javascript-and/ "Javascript 中的 Trampolines 和对更少嵌套回调的探索")，但蹦床依赖于仅由 Mozilla 产品（Firefox 和 Rhino）支持的生成器。如果您对蹦床感兴趣，我编写了一个库来使异步编写变得可以忍受。它被称为[Fiber](https://github.com/aaditmshah/fiber)，它有点像协作 Java 线程。

另一方面，jwacs 编译成普通的 JavaScript。因此它可以在任何平台上使用。不仅仅是火狐和犀牛。如果您想了解什么是延续，那么我建议您阅读以下 StackOverflow 问题和答案：

问题：[延续和回调有什么区别？](https://stackoverflow.com/q/14019341/783743)

答案：[https ://stackoverflow.com/a/14022348/783743](https://stackoverflow.com/a/14022348/783743)

# xslt - XSLT 排序问题 - 属性不会排序

> ID：14808607
> 
> 赞同：1
> 
> 时间：2013-02-11T08:47:10.470
> 
> 标签：xslt, svg

来源

```
<roll>
  <dayquantum date="20130125">
    <item index="2" value="4" product="Margherita"/>
    <item index="3" value="2" product="Capricciosa"/>
    <item index="4" value="2" product="Quattro Stagioni"/>
    <item index="5" value="7" product="Bresola"/>
    <item index="6" value="1" product="Gorgonzola"/>
    <item index="7" value="7" product="Piccante"/>
    <item index="8" value="3" product="Rosmarino"/>
    <item index="9" value="2" product="Caprese"/>
    <item index="10" value="7" product="Parma"/>
    <item index="11" value="1" product="Parmigiana"/>
    <item index="12" value="2" product="Pollo"/>
    <item index="13" value="2" product="Hawaii"/>
    <item index="14" value="17" product="Pepperoni"/>
    <item index="15" value="4" product="Calzone"/>
    <item index="16" value="2" product="Bologna"/>
    <item index="17" value="3" product="Tonno"/>
    <item index="18" value="1" product="Marinara"/>
    <item index="19" value="2" product="Napoletana"/>
    <item index="20" value="1" product="Carne"/>
    <item index="21" value="1" product="Mascarpone"/>
    <item index="22" value="4" product="Carpaccio"/>
    <item index="25" value="1" product="Tartufo"/>
    <item index="26" value="8" product="Prosciutto"/>
    <item index="27" value="3" product="Lasagna Originale"/>
    <item index="28" value="1" product="Tortellini Gorgonzola"/>
    <item index="29" value="1" product="Tortellini Tartufo"/>
    <item index="31" value="4" product="Tagliatelle Dolce Vita"/>
    <item index="33" value="1" product="Spaghetti Carbonara"/>
    <item index="37" value="2" product="Antipasta Toto e Pepino"/>
    <item index="38" value="1" product="Vitello Tonnato"/>
    <item index="41" value="4" product="Bruschetta classica"/>
    <item index="44" value="1" product="Tiramisu"/>
    <item index="47" value="4" product="Panino al Pollo"/>
    <item index="48" value="5" product="Panino al Prosciutto"/>
    <item index="49" value="8" product="Panino al vitello tonnato"/>
  </dayquantum>
</roll> 
```

XSLT

```
 <svg viewBox="0 0 2400 1400" style="background: #000 ; font-family: 'Racing Sans One'"  id="zcanvas" version="1.1" xsl:version="1.0"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  
     xmlns="http://www.w3.org/2000/svg">
    <defs><link xmlns="http://www.w3.org/1999/xhtml" href="http://fonts.googleapis.com/css?family=Racing+Sans+One|Six+Caps" type="text/css" rel="stylesheet" /></defs>  

    <xsl:for-each select="roll/dayquantum">
      <xsl:sort select="@date" order="descending" data-type="number"/>

      <xsl:variable name="y" select="(position() * 180) - 100" />    

      <text fill="#fff" font-size="48">      
        <xsl:attribute name="x"><xsl:value-of select="80" /></xsl:attribute>            
        <xsl:attribute name="y"><xsl:value-of select="$y - 40" /></xsl:attribute>        
        <xsl:attribute name="transform">rotate(90, 80, <xsl:value-of select="$y - 40 " />)</xsl:attribute>                      
        <xsl:value-of select="substring(@date,7,2)" /><xsl:value-of select="substring('  JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC', number(substring(@date,5,2)) * 3, 3)" />          
      </text>
      <text fill="#ff6000" font-size="48">      
        <xsl:attribute name="x"><xsl:value-of select="120" /></xsl:attribute>            
        <xsl:attribute name="y"><xsl:value-of select="$y - 10" /></xsl:attribute>        
        <xsl:value-of select="sum(item/@value)" />
      </text>

      <xsl:for-each select="item">     
        <xsl:sort select="@value" order="descending" data-type="number"/>
        <rect fill="green" >      
          <xsl:attribute name="x"><xsl:value-of select="200 + (sum(preceding-sibling::item/@value) * 16)" /></xsl:attribute>            
          <xsl:attribute name="y"><xsl:value-of select="$y - 48" /></xsl:attribute>        
          <xsl:attribute name="width"><xsl:value-of select="@value * 16" /></xsl:attribute>            
          <xsl:attribute name="rx">10</xsl:attribute>        
          <xsl:attribute name="height">48</xsl:attribute>        
        </rect>
        <g font-family="sans-serif">
        <text fill="#fff" font-size="20" text-anchor="middle">      
          <xsl:attribute name="x"><xsl:value-of select="200 + (sum(preceding-sibling::item/@value) * 16) + ((@value * 16) div 2)" /></xsl:attribute>            
          <xsl:attribute name="y"><xsl:value-of select="$y - 20" /></xsl:attribute>          
          <xsl:value-of select="@value" />
        </text>       
        <text fill="#888" font-size="18" text-anchor="start">      
          <xsl:attribute name="x"><xsl:value-of select="200 + (sum(preceding-sibling::item/@value) * 16) + ((@value * 16) div 2)" /></xsl:attribute>            
          <xsl:attribute name="y"><xsl:value-of select="$y" /></xsl:attribute>          
          <xsl:attribute name="transform">rotate(90, <xsl:value-of select="200 + (sum(preceding-sibling::item/@value) * 16) + ((@value * 16) div 2)" />, <xsl:value-of select="$y" />)</xsl:attribute>            
          <xsl:value-of select="@product" />
        </text>
        </g>
      </xsl:for-each>    
    </xsl:for-each>  
    </svg> 
```

问题：

它不会按属性“值”降序排序 - 是因为前面的语句吗？

来源可以在这里找到：http: [//xmlsoap.dk/xml/crCountLog.xml](http://xmlsoap.dk/xml/crCountLog.xml)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:38:13.067

它没有按您期望的方式工作的原因是它以*文档顺序*`preceding-sibling::`查看`item`s 的前面的兄弟姐妹，而不是当前的排序顺序。所以它们正在被排序，但是值正在被计算，就好像你根本没有对它们进行排序一样。*`x`*

 *以下递归方法应该可以实现您想要做的事情：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns="http://www.w3.org/2000/svg">
  <xsl:output method="xml" omit-xml-declaration="yes" />

  <xsl:template match="/">
    <svg viewBox="0 0 2400 1400"
         style="background: #000 ; font-family: 'Racing Sans One'"  id="zcanvas"
         version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
        <link xmlns="http://www.w3.org/1999/xhtml"
              href="http://fonts.googleapis.com/css?family=Racing+Sans+One|Six+Caps"
              type="text/css" rel="stylesheet" />
      </defs>

      <xsl:apply-templates select="roll/dayquantum">
        <xsl:sort select="@date" order="descending" data-type="number"/>
      </xsl:apply-templates>
    </svg>
  </xsl:template>

  <xsl:template match="dayquantum">
    <xsl:variable name="y" select="(position() * 180) - 100" />

    <text fill="#fff" font-size="48" x="80" y="{$y - 40}"
          transform="rotate(90, 80, {$y - 40})">
      <xsl:value-of select="substring(@date,7,2)" />
      <xsl:value-of select="substring('  JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC', 
                            number(substring(@date,5,2)) * 3, 3)" />
    </text>
    <text fill="#ff6000" font-size="48" x="120" y="{$y - 10}">
      <xsl:value-of select="sum(item/@value)" />
    </text>

    <xsl:variable name="topItem" select="item[not(../item/@value > @value)][1]" />
    <xsl:apply-templates select="$topItem">
      <xsl:with-param name="y" select="$y" />
      <xsl:with-param name="remainingItems" 
                      select="item[generate-id() != generate-id($topItem)]" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="item">
    <xsl:param name="y" />
    <xsl:param name="previousItems" select="/.." />
    <xsl:param name="remainingItems" />

    <xsl:variable name="leadingSpace"
                  select="200 + sum($previousItems/@value) * 16" />
    <xsl:variable name="width" select="@value * 16" />
    <xsl:variable name="hCenter" select="$leadingSpace + $width div 2" />

    <rect fill="green" x="{$leadingSpace}" y="{$y - 48}" width="{$width}"
          rx="10" height="48" />

    <g font-family="sans-serif">
      <text fill="#fff" font-size="20" text-anchor="middle" x="{$hCenter}"
            y="{$y - 20}">
        <xsl:value-of select="@value" />
      </text>

      <text fill="#888" font-size="18" text-anchor="start" x="{$hCenter}"
            y="{$y}" transform="rotate(90, {$hCenter}, {$y})">
        <xsl:value-of select="@product" />
      </text>
    </g>

    <xsl:variable name="topItem"
               select="$remainingItems[not($remainingItems/@value > @value)][1]" />
    <xsl:apply-templates select="$topItem">
      <xsl:with-param name="y" select="$y" />
      <xsl:with-param name="previousItems" select="$previousItems | ." />
      <xsl:with-param name="remainingItems"
                      select="$remainingItems[generate-id() != 
                                                generate-id($topItem)]" />
    </xsl:apply-templates>
  </xsl:template>

</xsl:stylesheet> 
```

This approach selects the first item with no items less than itself, and applies templates to only that, passing the remaining items as parameters. Then the next top item is selected and the template recursively calls itself, repeatedly until all of the items have been used up.*

# pcap - 在java中解码数据包捕获文件.cap

> ID：14808608
> 
> 赞同：0
> 
> 时间：2013-02-11T08:47:11.450
> 
> 标签：pcap

我有一个数据包捕获文件 .cap 。它是用 g.722 编码的。我如何将它转换为可播放的格式，例如.wav 形式。

# .net - 什么是“当前命令发生严重错误。结果（如果有）应丢弃。” SQL Azure 错误是什么意思？

> ID：14808612
> 
> 赞同：7
> 
> 时间：2013-02-11T08:47:22.340
> 
> 标签：.net, sql-server-2008, azure, azure-sql-database

偶尔我的代码会遇到

```
System.Data.SqlClient.SqlException
The service has encountered an error processing your request. Please try again.
Error code 40540\. A severe error occurred on the current command.
The results, if any, should be discarded.
Class 20
Number 40197 
```

这种情况很少发生，通常在一两分钟内消失，我无法可靠地重现它。有时`Error code`可以是 以外的数字`40540`。

我用谷歌搜索了一下，看起来它通常是由 SQL Server 中的错误触发的，并且是可重现的。

我有两个选择 - 重试查询或将其视为致命并努力破解。我希望更好地了解问题实际上是什么，以及我是否可以安全地重试查询。

发生此错误时是否重试查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T13:29:27.343

一个快速的谷歌搜索给了我这个。

> 服务在处理您的请求时遇到错误。请再试一次。错误代码 %d。当服务因软件或硬件升级、硬件故障或任何其他故障转移问题而关闭时，您将收到此错误。重新连接到您的 SQL 数据库服务器将自动将您连接到数据库的健康副本。您可能会看到错误代码 40143 和 40166 嵌入在错误 40540 的消息中。错误代码 40143 和 40166 提供了有关发生的故障转移类型的其他信息。不要修改您的应用程序以捕获错误代码 40143 和 40166。您的应用程序应捕获 40540 并尝试重新连接到 SQL 数据库，直到资源可用并再次建立连接。

您可以访问[此处](http://msdn.microsoft.com/en-us/library/windowsazure/ff394106.aspx)了解更多信息。它说*您的应用程序应该捕获 40540 并尝试重新连接到 SQL 数据库，直到资源可用并再次建立连接。*

尽管就个人而言，我建议不要使用 Sql azure，因为它很容易节流，并且您无法控制分配给您的资源。我所做的是在 azure vm 上安装 sql server 并在我的应用程序中使用它。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T16:02:03.103

我遇到了类似的错误：我遵循了[http://social.msdn.microsoft.com/Forums/en-US/bbe589f8-e0eb-402e-b374-dbc74a089afc/severe-error-in-current-command-during中的答案-datareaderread](http://social.msdn.microsoft.com/Forums/en-US/bbe589f8-e0eb-402e-b374-dbc74a089afc/severe-error-in-current-command-during-datareaderread)解决了这个问题..

避开`looping`读者；将数据加载到`DataTable`

```
DataTable table = new DataTable();
table.Load(reader);
reader.Close(); 
```

# javascript - 使用 alert() 的声纳编码规则

> ID：14808614
> 
> 赞同：1
> 
> 时间：2013-02-11T08:47:28.050
> 
> 标签：javascript, xpath, code-analysis, sonarqube, abstract-syntax-tree

我们正在使用 Sonar 3.4.1 在我们的持续集成服务器上分析我们的 JavaScript。

我添加了很多自定义规则；例如：如果使用了任何`console.*`调试功能，则发出阻塞违规。

一个示例 XPath 查询：

```
//callExpression/memberExpression[count(*) = 3 and primaryExpression[@tokenValue = "console"] and identifierName[@tokenValue = "log"]] 
```

我想添加一个使用规则，`alert(...)`但我似乎无法让它正常工作。

我在 XPath 查询上尝试了很多变体，例如：

```
//callExpression/memberExpression[count(*) = 2 and primaryExpression[@tokenValue = "alert"]] 
```

我能设法得到的最好`alert()`的结果是发现了 s，但也发现了类似的东西[`$varName.alert()`](http://twitter.github.com/bootstrap/javascript.html#alerts)，这是一个误报。

如何`alert()`自行查询使用情况？

AST（抽象语法树）上的任何资源都会有所帮助，因此我可以在将来为其他规则解决这个问题。（教一个人钓鱼等等……）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:59:55.857

以下简单的 XPath 表达式适用于我：

```
//primaryExpression[@tokenValue = "alert"] 
```

# gwt - DateChooser 公历日期以外的日期

> ID：14808617
> 
> 赞同：1
> 
> 时间：2013-02-11T08:47:43.153
> 
> 标签：gwt, calendar, smartgwt, smartgwt-pro

![在此处输入图像描述](../Images/c9ccef1b3227c5df1d4c33adb5a5a7c5.png)

我想知道如何在 SmartGWT 中实现日期选择器以显示其他日期，例如：中文、波斯、阿拉伯日期。任何代码或指向某个站点的链接将不胜感激。我尝试搜索 SmartGWT 论坛，但找不到任何帮助。

我通过做一些工作更进一步，并设法领先一步。我所做的是我使用了波斯日历并以这种方法设置它，如下所示：

```
dateChooser.setData(CommonUtil.gregorianToJalali(new Date())); 
```

但不知道如何改变其他的东西。请帮助让它工作

这是完整的代码：

```
public class DateChooserSample extends VLayout{

public DateChooserSample() {
    init();
}

public void init() {

    setShowEdges(true);   
    setWidth(150);   
    setMembersMargin(5);   
    setLayoutMargin(10);   

    DynamicForm form = new DynamicForm();   
    form.setWidth(300);   
    final BlurbItem blurbItem = new BlurbItem();   
    form.setItems(blurbItem);   

    final DateChooser dateChooser = new DateChooser();   
    dateChooser.setData(CommonUtil.gregorianToJalali(new Date()));
    dateChooser.setWidth(100);   

    blurbItem.setValue("Current date : " + CommonUtil.gregorianToJalali(new Date()));   
    dateChooser.addDataChangedHandler(new DataChangedHandler() {   
        @Override  
        public void onDataChanged(DataChangedEvent event) {   
            blurbItem.setValue("Selected date : " + CommonUtil.gregorianToJalali(dateChooser.getData()));   
        }   
    });   

    addMember(dateChooser);   
    addMember(form);   

}

} 
```

# python - mod_wsgi 工作目录和用户

> ID：14808618
> 
> 赞同：13
> 
> 时间：2013-02-11T08:47:45.163
> 
> 标签：python, apache2, mod-wsgi

我在 mod_wsgi 上运行烧瓶。我的烧瓶应用程序正在`/var/www/app`接收用户的一些文件并将其保存到`/var/www/app/tmp`目录中。然而，即使在所有 chmod 和 chown 之后（认为这是一个权限问题），我也无法访问该 tmp 目录。

经过一番调试，我发现烧瓶应用程序的当前工作目录是`/`. 我可以通过 更改工作目录`os.chdir('/var/www/')`，但出于安全考虑，我想避免这种情况。

这是我的apache配置：

```
<VirtualHost *:80>
    ServerName mysite.com
    ServerAlias site.com
    ServerAdmin admin@localhost

    WSGIDaemonProcess app user=www-data group=www-data processes=1
    WSGIScriptAlias / /var/www/app.wsgi

    Alias /static /var/www/app/static

    <Directory /var/www/app>
        WSGIProcessGroup app
        WSGIApplicationGroup %{GLOBAL}
        WSGIScriptReloading On
        Order deny,allow
        Allow from all
    </Directory>

    <Location "/static">
        SetHandler None
    </Location>

</VirtualHost> 
```

如何将我的应用程序的工作目录从更改`/`为`/var/www`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T08:50:24.220

WSGIDaemonProcess的[文档](https://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)`home=...`说您可以使用以下节：

> **家=目录**
> 
> 定义一个目录的绝对路径，该路径应该用作进程组中守护进程的初始当前工作目录。如果未定义此选项，则在 mod_wsgi 1.X 中，Apache 父进程的当前工作目录将由进程组内的守护进程继承。通常 Apache 父进程的当前工作目录是根目录。在 mod_wsgi 2.0+ 中，初始当前工作目录将设置为守护进程运行的用户的主目录。

不过，我很好奇——`os.chdir`在您看来，为什么使用会带来更多的安全风险？

# database - 访问权限数据库设计

> ID：14808619
> 
> 赞同：2
> 
> 时间：2013-02-11T08:47:45.940
> 
> 标签：database, design-patterns, database-design, access-rights

哪一种模式更适合设计用于存储访问权限的数据库？

1.  演员 {演员 ID，姓名，密码，canpost，cancomment，canremoveuser，candothis，candothat}
2.  actor {actorid, name, password} 权限 {actorid, action, isallowed}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:00:17.833

您的第一个选项没有它应有的灵活，而您的第二个选项则没有应有的可管理性。

访问控制的标准模式称为**基于角色的安全**性。随着用户数量*和您需要的不同类型权限数量的增长，您的用户**到*权限链接的管理可能会变得越来越困难。

例如，如果您有 5 个管理员和 50 个用户，您如何使每个组的权限保持同步？当您的一位用户被提升为管理员时，您需要进行多少次编辑？答案是创建两个交集：**users-to-roles**和**roles-to-permissions**。

![ERD](../Images/786bc0f64abb2de86b4e99c9b8059517.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T09:01:45.283

选项 1 适用于简单系统。一个查询，为您提供一排您需要的所有信息。这是非常有效的。效率是“好”的。它甚至可能符合您的需求“更好”。

如果操作权限很可能随着时间的推移以不可预测的方式扩展，并且由本质上孤立的模块使用，以确认用户只能访问其独特的子系统，则选项 2 非常有用。更复杂的是，如果同时检索参与者和访问信息，则必须执行“加入”。但我喜欢加入，所以我不会大声说效率低下，而星展银行是为擅长它们而构建的。明智地使用索引，它们就很好。

从编码的角度来看，使用链接表更复杂。您已经隔离了数据，因此必须编写更复杂的代码来处理数据的每个不同部分。但是，我个人认为这是“很好”的复杂性，因为每个独特的数据都有自己独特的依赖代码。允许模块化和一元封装功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T08:59:45.293

我认为在大多数情况下，解决方案#2 要好得多。我会丢弃该解决方案中的“isallowed”标志，只将用户的给定权限插入权限表中。

# python - 为什么在函数中使用 max 需要在函数中定义特定的变量？

> ID：14808623
> 
> 赞同：0
> 
> 时间：2013-02-11T08:47:55.213
> 
> 标签：python, global-variables

我希望标题足够清楚，我不知道如何表达这个。

此代码段按预期工作（7 行，输出为 1）

```
v=1
def test():
    print v
    for i in range (5):
        print v
v=1
test() 
print v 
```

但是，当我尝试将 max 命令添加到函数时

```
v=1
def test():
    print v
    for i in range (5):
        v = max(i,v)
        print v
v=1
test() 
print v 
```

我收到一个错误：

```
UnboundLocalError: local variable 'v' referenced before assignment 
```

这一直让我感到困惑。为什么我需要`v`在这种情况下发送到函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:51:02.317

首先，如果函数使用变量，则应**始终**将变量传递给函数。

您遇到的问题是您试图将一个局部变量分配给`v`Python 认为是同一个变量，而不是全局变量。第一个功能有效，因为您没有分配任何东西。

或者，`global`如果您想使用全局变量并*更改*它，您可以使用。

```
def test():
    global v
    # rest of code 
```

但是，强烈建议将变量作为参数传入。

# postgresql - 在 postgres 中的下午两点之间过滤

> ID：14808628
> 
> 赞同：0
> 
> 时间：2013-02-11T08:48:37.767
> 
> 标签：postgresql, time, between

我有一个用于 postgres 的过滤器

```
AND to_char(eat.datecreated, 'HH12:MI:SS AM') BETWEEN
  to_char('06:00:00', 'HH12:MI:SS AM') AND to_char('06:00:00', 'HH12:MI:SS AM') 
```

结果：

```
ERROR:  function to_char(unknown, unknown) is not unique
LINE 25: ...to_char(eat.datecreated, 'HH12:MI:SS AM') BETWEEN to_char('0...
                                                          ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts.

********** Error **********

ERROR: function to_char(unknown, unknown) is not unique
SQL state: 42725
Hint: Could not choose a best candidate function. You might need to add explicit type casts.
Character: 1455 
```

请帮我。我被这个查询困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:56:09.917

```
and eat.datecreated::time between '06:00:00'::time and '18:00:00'::time 
```

# ios - 从 iOS 通过 Facebook Graph API GET URL 访问页面帖子，返回“不支持的获取请求”。

> ID：14808631
> 
> 赞同：1
> 
> 时间：2013-02-11T08:48:40.860
> 
> 标签：ios, facebook-graph-api

我是IOS的新手。我正在尝试调用 Facebook Graph URL 以获取 JSON 数据并对其进行解析-

```
NSString *urlStr = @"https://graph.facebook.com/102555409843504_373792589386450";
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlStr]
                                                       cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                   timeoutInterval:10];
    [request setHTTPMethod: @"GET"];
    NSError *requestError;
    NSURLResponse *urlResponse = nil;

    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&requestError]; 
```

但它的返回错误-

```
{
   "error": {
      "message": "Unsupported get request.",
      "type": "GraphMethodException",
      "code": 100
   }
} 
```

-我有一个有效的会话，但不知道如何用它调用图形 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:15:42.980

如果您在浏览器中请求此 URL，您将得到相同的结果：

[https://graph.facebook.com/102555409843504_373792589386450](https://graph.facebook.com/102555409843504_373792589386450)

问题是您没有传递`access_token`. 因此，检索数据的正确方法是：

[https://graph.facebook.com/102555409843504_373792589386450?access_token=SECRET](https://graph.facebook.com/102555409843504_373792589386450?access_token=SECRET)

出于测试目的，您可以从 Graph API 浏览器中获取一个令牌，地址为：

[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

# android - 如何将扩展文件资产资源 (InputStreams) 转换为 Drawable

> ID：14808634
> 
> 赞同：2
> 
> 时间：2013-02-11T08:49:01.287
> 
> 标签：android, android-drawable

好吧，我正在处理扩展文件。我正在获取文件，现在我正在尝试访问扩展文件的内容，这是一个 zip 文件。我在“expansionFile”中有扩展文件条目。现在我从扩展文件中获取输入流。

**这是我的扩展文件的外观：**

`main.1.com.test.downloader.obb` 它里面有资产文件夹，资产文件夹里面有图像。

**这是我的代码：**

```
InputStream fileStream = expansionFile.getInputStream("assets/");
Log.i("File",""+fileStream.toString());
Drawable drawable = Drawable.createFromStream(fileStream, "abacus.jpg"); 
```

我在 Drawable 线上遇到错误。我想我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T06:53:40.437

经过搜索，我知道这是解决方案：

```
InputStream fileStream = expansionFile.getInputStream("assets/"+imageName);
  Drawable drawable = Drawable.createFromStream(fileStream, null);
  _imageView.setImageDrawable(drawable); 
```

# blackberry - 如何防止字段自动绘制它的背景？

> ID：14808637
> 
> 赞同：1
> 
> 时间：2013-02-11T08:49:37.347
> 
> 标签：blackberry, background, paint

有一个自定义的CField（从Field扩展）我正在研究它，平台是BlackBerry OS7.1，使用java环境。

现在我想自己处理CField的绘制事情，并且不允许字段自动绘制它的背景，这样我可以重复使用之前绘制的元素，这样可以使动画效果更加高效。

我重写了函数：

`protected void paintBackground(Graphics g) { // do nothing here }`

不幸的是，它不起作用，该字段仍然会擦除所有以前绘制的元素。

需要您的热心帮助，非常感谢！

# javascript - Ember.js 在没有 ember-data 的情况下保存更新的对象

> ID：14808638
> 
> 赞同：-3
> 
> 时间：2013-02-11T08:49:52.730
> 
> 标签：javascript, ember.js

在我的应用程序中，我不使用 ember-data，那么如何保存具有更新属性的对象？我`.set()`用来改变对象的属性，但是怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:38:13.820

在任何可能的意义上，这都不是一个完整的问题。假设您正在尝试将模型保存到持久层，则需要将 XHR 发送到您的服务器，并序列化模型的字段。然后，您的服务器将需要返回您在 XHR 回调中解析的响应，您可以使用该回调在客户端更新您的模型。

如果您想要更详细的答案，您必须提出更详细的问题。

# android - 服务中的可运行对象是否在 UI 线程上运行

> ID：14808640
> 
> 赞同：4
> 
> 时间：2013-02-11T08:50:05.703
> 
> 标签：android, runnable

在 Android 中，当我在服务中创建一个可运行对象并运行它时，虽然我意识到它在自己的线程中运行，但这个线程是否是 UI 线程的一部分？换句话说，如果runnable执行了很长的过程，会不会影响UI？

**编辑：**

```
private class SomeRunnable implements Runnable
{
  @Override
  public void run()
  {
    try
    {

    }
  }
}

SomeRunnable runnable = new SomeRunnable();
(new Handler()).postDelayed(runnable, 1000); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T08:54:29.370

文件：

> 服务在与声明它的应用程序相同的进程中运行，并且在该应用程序的主线程中运行，

不同的线程：

```
Thread t = new Thread(new MyRunnable());
t.start(); 
```

UI/服务线程：

```
Handler h = new Handler();
h.post(new MyRunnable()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:51:21.573

不，它不是 的一部分`UI thread`，我假设`Runnable`您的意思是您通过调用执行的新线程`start()`。

无论你是在 a 中开始一个新`Thread`的，`service`还是`activity`它*不会*成为 UI 线程的一部分（除非你调用类似的东西`join()`）

**编辑**

由于您正在使用 运行`Runnable`对象，因此这取决于您`Handler`在哪里*初始化*`handler`. 服务在 中运行`main thread`，因此在服务或活动中初始化处理程序将使代码发布到`UI thread`

`Handler`请注意，每个线程都需要一个对象；所以避免每次都创建一个新的，例如`(new Handler()).postDelayed(runnable, 1000);`应该避免，而是`handler.postDelayed(runnable, 1000);`在`handler`你的服务/活动类中初始化一个实例变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:53:45.800

默认情况下，服务在 UI 线程中运行。但这取决于服务类型和服务属性以及您发布可运行文件的方式。我认为您使用默认方案，您的可运行文件将在 UI 线程上执行并阻止它。

如果您显示代码如何发布可运行并创建服务，我可以给您确切的答案。

您可以使用以下代码从可运行文件中检查线程类型：

```
if (Looper.getMainLooper().getThread() == Thread.currentThread()) {
    // On UI thread.
} else {
    // Not on UI thread.
} 
```

目前还不清楚。如果你在 UI 线程上执行“new Handler()”，那么 runnable 将在 UI 线程上执行。如果您在另一个带有 looper 的线程上执行“new Handler()”，那么 runnable 将在该线程上执行。我认为您的可运行文件有 99% 的可能性将在 UI 线程上执行。为什么不将我的代码放在可运行状态并检查它的执行位置？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T09:00:21.257

您提交给处理程序的可运行文件将始终在 UI 线程上执行，因为服务不会在不同的进程或线程上产生，但您是 hte UI 线程的一部分

# c# - 反序列化对象 C# WPF 中的空值

> ID：14808641
> 
> 赞同：0
> 
> 时间：2013-02-11T08:50:18.330
> 
> 标签：c#, wpf, serialization, null, deserialization

我正在序列化员工类的对象。类中的某些属性可能为空。我需要使用空值反序列化对象，以便空属性重新发送空值。当我尝试反序列化空值时，我收到了 TargetInvocationException。请帮帮我

```
public class Employee
{
   public string Name {get; set;}
   public string Id{get;set;}
}
public mainclass
{
   public void MainMethod()
   {
   Employee emp = new Employee();
   emp.ID = 1;
   //Name field is intentionally uninitialized
   Stream stream = File.Open("Sample.erl", FileMode.Create);
   BinaryFormatter bformatter = new BinaryFormatter();
   bformatter.Serialize(stream, sample);
   stream.Close()
   stream = File.Open("Sample.erl", FileMode.Open);
   bformatter = new BinaryFormatter();
   sample = (Employee)bformatter.Deserialize(stream); //TargetInvocationException here
   //It works fine if Name field is initialized
   stream.Close();
   Textbox1.text = sample.Name;
   Textbox2.text = sample.ID;
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:28:20.423

您只需要应用上述所需的属性。

```
namespace SO
{
  using System;
  using System.IO;
  using System.Runtime.Serialization.Formatters.Binary;

  [Serializable]
  public class Employee
  {
    public string Name { get; set; }

    public string Id { get; set; }
  }

  public class Test
  {
    public static void Main()
    {
      var emp = new Employee { Id = "1" };
      //Name field is intentionally uninitialized

      using (var stream = File.Open("Sample.erl", FileMode.Create))
      {
        var bformatter = new BinaryFormatter();

        bformatter.Serialize(stream, emp);
      }

      using (var stream = File.Open("Sample.erl", FileMode.Open))
      {
        var bformatter = new BinaryFormatter();

        var empFromFile = (Employee)bformatter.Deserialize(stream);

        Console.WriteLine(empFromFile.Id);
        Console.ReadLine();
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:00:00.730

我在 LinqPad 中尝试了您的代码（带有一些模块，上面的代码永远无法编译或工作）。这工作正常：

```
void Main()
{
    Employee emp = new Employee();
    emp.Id = "1";

    const string path = @"C:\Documents and Settings\LeeP\Sample.erl";

    emp.Dump();

    using(var stream = File.Open(path, FileMode.Create))
    {
        var formatter = new BinaryFormatter();
        formatter.Serialize(stream, emp);
    }

    using(var stream = File.Open(path, FileMode.Open))
    {
        var formatter = new BinaryFormatter();
        var sample = (Employee)formatter.Deserialize(stream); 

        sample.Dump();
    }
}

// You need to mark this class as [Serializable]
[Serializable]
public class Employee
{
    public string Name {get; set;}
    public string Id{get;set;}
} 
```

# bash - 如何从正在运行的进程中分叉？

> ID：14808642
> 
> 赞同：0
> 
> 时间：2013-02-11T08:50:21.773
> 
> 标签：bash

我经常这样做：

```
$ gitk & 
```

启动一个程序（就像`gitk`在这种情况下，但它并不重要）并返回到 shell 提示符以继续在同一个 shell 中工作。在你已经写完之后你会怎么做

```
$ gitk 
```

没有`&`？是否有一个组合键，例如`^z`，将进程置于后台但不会中断它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:07:30.380

如果您在没有 的情况下启动了该进程`&`，它将在前台运行。按`Ctrl+Z`哪个将停止进程，然后输入命令`bg`以在后台恢复进程执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:48:14.740

每次调用外部程序时，例如`ls`、 或`gitk`或其他什么，您都会执行一个`fork`. 在 Bash 中运行一个程序`&`不仅仅是一个 fork。它创建了一个在后台运行的新进程组。

Ctrl+z 通常具有将作业置于后台停止状态的效果（使用信号），使用 重新启动`bg`。我说“通常”是因为它可以更改，使用`stty`. 要列出您的终端设置（并查看其他神奇的 Ctrl 键），请尝试`stty -a`.

后台作业的一个特点是它们通常无法访问键盘，但可以访问屏幕。这可能与其他输出混合，因此您可以使用`stty tostop`它来防止它。必须将作业置于前台才能使用屏幕，或使用`stty -tostop`. 使用`fg`.

请注意，您可以有许多后台作业，通过键入来查看它们`jobs`。一些命令，包括`fg`、`bg`和`kill`，采用可选的作业编号（前缀`%`）。

# timezone - ICS 文件中的 DST 问题。如何从 Web 服务/网站获取时区定义以包含在 ICS 文件中？

> ID：14808647
> 
> 赞同：3
> 
> 时间：2013-02-11T08:50:39.423
> 
> 标签：timezone, dst, icalendar, ical4j

我们从 Java 代码生成一个 ICS 文件，并最初以 UTC 格式输入时间。

我们发现，在创建定期约会时，由于第一个日期和最后一个日期之间的 DST 更改，一些会议是在正确时间之前或之后 1 小时创建的。

我们已经进行了测试，发现如果我们不包含时区时间更改的完整定义，就不可能使其正常工作。例如，对于在波士顿举行的会议，以下定义有效：

```
BEGIN:VTIMEZONE
TZID:Eastern Time (US & Canada)
BEGIN:STANDARD
DTSTART:16011104T020000
RRULE:FREQ=YEARLY;BYDAY=1SU;BYMONTH=11
TZOFFSETFROM:-0400
TZOFFSETTO:-0500
END:STANDARD
BEGIN:DAYLIGHT
DTSTART:16010311T020000
RRULE:FREQ=YEARLY;BYDAY=2SU;BYMONTH=3
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
END:DAYLIGHT
END:VTIMEZONE 
```

有没有办法从任何现有的 Web 服务或网站获取这些信息？还是我们需要维护所有应用程序所涉及国家的定义？

我们发现 ICal4j 库的存在，但它似乎提供了生成 .ics 文件结构的方法，但没有提供我们需要的时区信息。

任何人都知道一种更简单的方法可以使 .ics 文件在不同的时区正常工作，当第一个日期和最后一个日期之间有时间变化时定期约会？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-03T16:40:30.683

我知道我迟到了，但只是想为任何提出这个问题的人提供**iCal4j的解决方案。**

实际上，时区在 iCalendar 标准中并未隐式管理，您必须`VTIMEZONE`在 ICS 文件 ( [RFC](https://datatracker.ietf.org/doc/html/rfc5545#section-3.6.5) ) 中明确添加定义。您不能只使用时区标识符 ( `TZID` )。

您可以参考[这个答案](https://stackoverflow.com/a/34319077/1274485)来了解为什么需要时区信息。

所以这里是一个使用**iCal4j**的例子：

```
// get timezone
final TimeZoneRegistry registry = TimeZoneRegistryFactory.getInstance().createRegistry();
final TimeZone timezone = registry.getTimeZone("Europe/Zurich");
final VTimeZone tz = timezone.getVTimeZone();

// event start date
final java.util.Calendar startDate = new GregorianCalendar();
startDate.setTimeZone(timezone);
startDate.set(2016, java.util.Calendar.MARCH, 8, 9, 0, 0);

// event end date
final java.util.Calendar endDate = new GregorianCalendar();
endDate.setTimeZone(timezone);
endDate.set(2016, java.util.Calendar.MARCH, 8, 17, 0, 0);

// create event
final DateTime start = new DateTime(startDate.getTime(), timezone);
final DateTime end = new DateTime(endDate.getTime(), timezone);
final VEvent meeting = new VEvent(start, end, "Test");
meeting.getProperties().add(new RandomUidGenerator().generateUid());
meeting.getProperties().add(new Location("Somewhere"));

// create calendar
final net.fortuna.ical4j.model.Calendar icsCalendar = new net.fortuna.ical4j.model.Calendar();
icsCalendar.getProperties().add(new ProdId("-//Events Calendar//iCal4j 1.0//EN"));
icsCalendar.getProperties().add(CalScale.GREGORIAN);
icsCalendar.getProperties().add(Version.VERSION_2_0);

// add the timezone definition <- this is what you are missing
icsCalendar.getComponents().add(tz);

// add event to calendar
icsCalendar.getComponents().add(meeting); 
```

将`VTimeZone`组件添加到`Calendar`. 因此，您不需要从 Web 服务中获取定义。

您可以参考[iCal4j 文档](https://ical4j.github.io/ical4j-user-guide/timezones/)。

然后你应该最终得到这样的东西（对于`Europe/Zurich`时区）：

```
BEGIN:VCALENDAR
PRODID:-//Events Calendar//iCal4j 1.0//EN
CALSCALE:GREGORIAN
VERSION:2.0

BEGIN:VEVENT
DTSTAMP:20160307T231014Z
DTSTART;TZID=Europe/Zurich:20160308T090000
DTEND;TZID=Europe/Zurich:20160308T170000
SUMMARY:Test
TZID:Europe/Zurich
UID:45c269ed-dbc0-435e-bb3d-ba152dfbf0db
LOCATION:Somewhere
END:VEVENT

BEGIN:VTIMEZONE
TZID:Europe/Zurich
LAST-MODIFIED:20201011T015911Z
TZURL:http://tzurl.org/zoneinfo/Europe/Zurich
X-LIC-LOCATION:Europe/Zurich
X-PROLEPTIC-TZNAME:LMT
BEGIN:STANDARD
TZNAME:BMT
TZOFFSETFROM:+003408
TZOFFSETTO:+002946
DTSTART:18530716T000000
END:STANDARD
BEGIN:STANDARD
TZNAME:CET
TZOFFSETFROM:+002946
TZOFFSETTO:+0100
DTSTART:18940601T000000
END:STANDARD
BEGIN:DAYLIGHT
TZNAME:CEST
TZOFFSETFROM:+0100
TZOFFSETTO:+0200
DTSTART:19410505T010000
RRULE:FREQ=YEARLY;UNTIL=19420504T000000Z;BYMONTH=5;BYDAY=1MO
END:DAYLIGHT
BEGIN:STANDARD
TZNAME:CET
TZOFFSETFROM:+0200
TZOFFSETTO:+0100
DTSTART:19411006T020000
RRULE:FREQ=YEARLY;UNTIL=19421005T000000Z;BYMONTH=10;BYDAY=1MO
END:STANDARD
BEGIN:DAYLIGHT
TZNAME:CEST
TZOFFSETFROM:+0100
TZOFFSETTO:+0200
DTSTART:19810329T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
END:DAYLIGHT
BEGIN:STANDARD
TZNAME:CET
TZOFFSETFROM:+0200
TZOFFSETTO:+0100
DTSTART:19810927T030000
RRULE:FREQ=YEARLY;UNTIL=19950924T010000Z;BYMONTH=9;BYDAY=-1SU
END:STANDARD
BEGIN:STANDARD
TZNAME:CET
TZOFFSETFROM:+0200
TZOFFSETTO:+0100
DTSTART:19961027T030000
RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
END:STANDARD
END:VTIMEZONE

END:VCALENDAR 
```

# mongodb - Mongodb-MapReduce 大数组的问题

> ID：14808649
> 
> 赞同：2
> 
> 时间：2013-02-11T08:50:40.823
> 
> 标签：mongodb, mapreduce

我希望有人可以帮助解决这个问题。谢谢！

我正在使用 MYSQL 的日志解析器。我为此任务使用 PHP5.310 来解析 mysql 日志并将收集到的信息存储到 mongodb 中，结构如下：

```
 "_id" : "12345",
        "Host" : "localhost",
        "Connect" : "XXXXX@localhost on AUT_IND",
        "Time_Con" : ISODate("2013-01-21T02:50:08Z"),
        "Quit" : "Quit",
        "Time_Quit" : ISODate("2013-01-21T02:50:09Z"),
        "Num_Query" : 2,
        "Query" : [
                "SET NAMES utf8",
                 "SELECT * FROM XX

        ] 
```

我试图在整个集合中获得前十名的查询。我用过这个 M/R：

```
function emit(k, v) {
print("emit");
print(" k:" + k + " v:" + tojson(v));
} 
```

米=

```
function () {
this.Query.forEach(function (z) {emit(z, 1);});
} 
```

r=

```
function (key, values) {
var total = 0;
for (var i in values) {
total += values[i];
}
return total;
}

} 
```

并且 map reduce db.XXXXX.mapReduce(m,r,{out:"results"}) 给了我正确的结果，除非 Num_queries 高于 3k。

例如，我在这个集合中有一个带有“Num_Query”的文档：116287。

所以它有一个包含 116287 个查询的数组。当我做 M/R 时，我在这里得到了错误。

这里有错误日志：

2 月 8 日星期五 12:07:00 未捕获的异常：map reduce 失败：{“errmsg”：“异常：_id 不能是数组”，“code”：10099，“ok”：0 }

我希望有人能引导我找到正确的解决方案。非常感谢

# windows - 如何在 Windows 上永久更改 mercurial 命令行的语言？

> ID：14808650
> 
> 赞同：7
> 
> 时间：2013-02-11T08:50:43.060
> 
> 标签：windows, command-line, mercurial

如何在 Windows 上将 mercurial 命令行的语言永久更改为英语？[按照此答案](https://stackoverflow.com/a/4650477/285288)中的描述设置 LANG 环境变量暂时有助于一个命令窗口，但是可以在 mercurial.ini （或 hgrc）或其他方式中以某种方式设置语言吗？

这背后的原因：mercurial 的德语输出被破坏，所有特殊字符（元音变音等）都无法正确显示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-20T10:03:28.697

如果您想将命令行语言更改为英语，请转到您的 mercurial 安装路径（例如在 windows 上`C:\Program Files\Mercurial\`），然后`/locale/`将错误的当前语言文件夹（例如 de）重命名为 _de。

现在 hg 将回退到默认语言 en

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T08:56:53.983

您可以使用-> -> -> -> ->为当前用户或全局设置`LANGUAGE`环境变量，在或中创建新变量。`en_US.UTF-8``Control Panel``All Control Panel Items``System``Advanced system settings``Advanced``Environment variables``User``System`

创建后，您的更改将仅适用于新实例`cmd`或其他程序。

请注意，似乎`LANGUAGE`env. 变量不是大多数其他程序关注的东西，除了`hg`or `TortoiseHg`。我能够将它安装在我的 Windows 7 盒子（英文）中并设置`LANGUAGE=de_DE.UTF-8`. 这已更改`hg`为以德语报告大多数消息，但这并没有影响我的任何其他程序 - 他们仍然说英语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:54:32.097

我猜你曾经[`SET`](http://ss64.com/nt/set.html)设置环境变量。这只会在当前命令窗口的生命周期内修改变量。

您是否尝试过使用永久设置 LANG 环境变量[`SETX`](http://ss64.com/nt/setx.html)？这将永久修改变量。但是请注意，它不会修改当前的命令窗口，因此您需要打开一个新的命令窗口才能看到更改的效果。

# caching - Yii 半静态站点优化

> ID：14808651
> 
> 赞同：2
> 
> 时间：2013-02-11T08:50:43.260
> 
> 标签：caching, optimization, yii

我有一个网站，它的页面作为 html 字符串（使用 CKEditor 生成）存储在数据库中，以使用户能够在没有 HTML 知识的情况下编辑它们。该网站还广泛使用图片库（用户要求，所以我无法控制它）每个页面都有它的画廊。这使得网站非常缓慢。我已经阅读了 Guide 中的 Yii 优化，并做了一些查询缓存，这稍微改善了加载时间，但仍然很慢。

由于页面更新可能需要长达一个月的时间（仅当事情发生变化时）是否有一种站点范围的 Yii 缓存技术来模拟静态页面，直到页面被更改？因为我不是管理员，所以我无法控制安装 APC 或其他扩展。

也欢迎任何优化想法。

[你可以在这里](http://pec.co.tz)看到一个网站

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:03:40.437

虽然很难给你一个“明确的答案”，但你可以做的最简单的事情（除了在[Yii 的权威指南：性能](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance)中提到的优化）是使用[页面缓存](http://www.yiiframework.com/doc/guide/1.1/en/caching.page)

由于您不能使用 APC 或 memcached，我建议您通过[CFileCache](http://www.yiiframework.com/doc/api/1.1/CFileCache/)使用文件缓存来缓存整个页面。一旦更新，您应该通过适当的 CacheDependency 使缓存无效。我已经使用[Flushable 缓存依赖扩展](http://www.yiiframework.com/extension/flushable)来使缓存失效，使用 CActiveRecord 的 afterSave 挂钩。它很容易实现并且可以完成工作。

编辑：刚刚查看了您的网站并从您正在使用 Bootstrap 的菜单判断（也许使用 Yii-Booster？）。该站点确实非常慢，但这实际上可能是由于扩展在每次请求时都会发布其资产。我曾经在调试模式下遇到过 Yii-Booster 发布资产的确切问题（当时它甚至在禁用调试模式时发生）（[https://github.com/clevertech/YiiBooster/pull/229](https://github.com/clevertech/YiiBooster/pull/229)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T08:34:55.883

您可以使用[Yii HTML Cache](https://github.com/narekmarkosyan/yii-html-cache)来创建页面的完整缓存。它会在您的资产中生成 html 文件并使用它直到生命周期结束或您清除资产。

您只需要安装扩展程序并在控制器的方法中添加几行`beforeAction`即可`afterRender`。

# html - 使用具有等高列的锚隐藏内容

> ID：14808659
> 
> 赞同：7
> 
> 时间：2013-02-11T08:51:03.823
> 
> 标签：html, css, fluid-layout

## 设置

我正在制作一个具有简单 2 列布局的网站。列将具有不同的高度（一个比另一个高）和动态高度（每个页面的内容不同）。两列的背景颜色应向下延伸到最长列内容的最低点。

对于你们当中的视觉学习者，[CSS-Tricks 有一些很好的插图](http://css-tricks.com/fluid-width-equal-height-columns/)

![在此处输入图像描述](../Images/49c1a3f0865d57d3eacf08ceac9f27aa.png)

![在此处输入图像描述](../Images/e9832bfd227c2c5b2445529b59964f38.png)

## 尝试

我正在使用[One True Layout Method](http://css-tricks.com/fluid-width-equal-height-columns/)，在同一个 CSS-Tricks 页面中提到了大约一半。

[我在这里的 jsFiddle 上重新创建了它](http://jsfiddle.net/daCrosby/L8WeN/)。

这是相关的编码

**HTML**

```
<a href="#area1">Go To Section 1</a>
<a href="#area2">Go To Section 2</a>
<a href="#area3">Go To Section 3</a>

<div id="hold">
    <div id="col1">
        Content Column 1
    </div>
    <div id="col2">
        Content Column 2

        <h2 id="area1">Section 1</h2>
        <img src="http://placehold.it/100x750" alt=" placehold img" />

        <h2 id="area2">Section 2</h2>
        <img src="http://placehold.it/100x750" alt=" placehold img" />

        <h2 id="area3">Section 3</h2>
        <img src="http://placehold.it/100x750" alt=" placehold img" />
    </div>
</div> 
```

**CSS**

```
#hold{
    height:100%;
    overflow-y:hidden;
}
#col1, #col2{
    padding-bottom:100000px;
    margin-bottom:-100000px;
}
#col1{
    float:left;
    width:200px;
}
#col2{
    margin-left:200px;
} 
```

## 什么有效？

布局完全按预期工作。列高适应动态内容并始终保持彼此相同的高度。

## 问题

[锚打破它](http://jsfiddle.net/daCrosby/L8WeN/)。也就是说，页面向下滚动到内容中正确的锚点，但锚点上方的所有内容都被隐藏了。我了解到这是由于`overflow-y:hidden;`- 页面向下滚动到内容，而不是使用滚动条，它隐藏了上述内容，而不仅仅是滚动过去。禁用`overflow:hidden`会按预期显示所有内容，但由于底部填充较大，这并不理想。

[其他人也遇到过同样的问题](http://www.positioniseverything.net/articles/onetruelayout/appendix/equalheightproblems)，[但我找不到任何公认的解决方案](https://www.google.com/search?q=one%20true%20layout%20fluid%20height%20columns%20anchors%20issue)。

## 可能的解决方案

我可以在 JavaScript 中进行快速高度检查并相应地设置每一列，但我真的很想保持整个网站布局 JS 自由。

一些文章提到绝对定位已修复，但这不适用于动态内容。

更改为不同的列高方法。但是...但是...但是到目前为止我已经有了这个！我们是谁来简单地屈服于~~一个不可能~~的困难编码挑战.. :)

## 呼吁援助

各位程序员，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:52:20.773

您在欺骗浏览器，但它有副作用（它破坏了锚点）。最好的解决方案是找到一种不同的方法来调整列高，但看起来在那个领域你比我做了更多的研究。

考虑到您的问题的参数（您似乎不想使用 JavaScript 进行设计，并且您真的不想更改用于修复列的方法）我会说您能得到的最接近的会是使用您的 css 进行设计和 JavaScript 来修复锚点。

这个片段应该适合你

```
var isScrollFix = false;
document.getElementById('hold').addEventListener('scroll',function(e){
        if(!isScrollFix) {//dont copy our own scroll event onto document
              isScrollFix = true;
              var scrollTo = this.scrollTop;
              this.scrollTop = 0;
              window.scroll(0, scrollTo);
         } else {
              isScrollFix = false;
         }
}); 
```

或者在 jsfiddle 上添加一些额外的代码来解决其他情况[http://jsfiddle.net/joshK/P72LV/5/](http://jsfiddle.net/joshK/P72LV/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:49:59.450

由于您表示您不一定关心 IE7 支持，因此您可以使用其他技术之一（也可以在您在问题中引用的 CSS Tricks 链接中找到）来使用显示：表格和表格单元格。

无论动态内容如何，​​这都会为您提供相同高度的列，但还允许您在单击页内锚点后向上滚动，而不会完全隐藏内容。

我真的很鄙视使用不可见的表格进行布局，但在这种情况下，它不会通过更改 DIV 显示属性值来强制任何额外的 DOM 元素，并且实际上并不比负边距正填充方法更hacky。

```
#hold{
    width:100%;
    background:#ccc;
    height:100%;
    display: table;
}
#col1, #col2{
    display: table-cell;
}
#col1{
    width:200px;
    background:#00c;
}
#col2{
    background:#c00;
} 
```

# php - 无法回显 xml 城市名称

> ID：14808662
> 
> 赞同：2
> 
> 时间：2013-02-11T08:51:13.793
> 
> 标签：php, xml

大家好我已经尝试了所有可能的方法来从这个xml中提取一天的名称，但没有成功..

```
<report>
<location city="Tukituki">
<day value="20130211" name="Sunday">
<symbol value="2" desc="Intervalos Nubosos"/>
<tempmin value="9"/>
<tempmax value="17"/>
<hour value="01:00">...</hour>
</day>
</location> 
</report> 
```

我使用`simplexml_load_file`了'url'等。并尝试了：

```
echo $xml->report->location[1]->city; 
```

但它给出了一个错误：注意：试图在...中获取非对象的属性

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:13:18.180

当您调用您在此节点中的 XML 时，请尝试删除**报告。**

```
echo $xml->location['city']; 
```

并且标签中的属性通过数组表示法调用。如果您有更多位置，则对其进行迭代。

# c++ - 私有/已删除复制构造函数的 std::unordered_map::emplace 问题

> ID：14808663
> 
> 赞同：11
> 
> 时间：2013-02-11T08:51:17.423
> 
> 标签：c++, gcc, c++11, mingw, unordered-map

以下代码可以使用 gcc 4.7.2 (mingw) 正常编译

```
#include <unordered_map>
#include <tuple>

struct test
{
        test() =default;
    private:
        test(test const&) =delete;
};

int main()
{
    std::unordered_map<char, test> map;

    map.emplace(
        std::piecewise_construct,
        std::forward_as_tuple('a'),
        std::forward_as_tuple()
    );
} 
```

但是，如果我将复制构造函数`test`从更改`test(test const&) =delete;`为`test(test const&) =default;`，则模板错误呕吐物似乎抱怨`const test&`无法转换为（[此处](http://pastebin.com/iGTUHvZN "here")`test`为文本）。都不应该工作吗？或者如果没有，他们不应该都给出错误吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T16:18:33.637

如果您更仔细地查看模板错误呕吐物，您会在其中看到这块胡萝卜：

```
test.exe.cpp:8:3: error: 'constexpr test::test(const test&)' is private 
```

这是问题的线索。

GCC 4.7.2 不将访问检查作为模板参数推导的一部分（如 C++03 所要求的那样。）该`is_convertible`特征是使用 SFINAE 实现的，它依赖于模板参数推导，并且如果重载解析选择私有构造函数参数推导成功，但随后访问检查失败，因为选择的构造函数是私有的。这是 GCC 4.7 的一个问题，因为它没有被更改为遵循 14.8.2 [temp.deduct] 中的新 C++11 规则，它说：

> -8- 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。*[ 注意：*访问检查是替换过程的一部分。*——尾注]*

这是对之前扣除规则的巨大改变，之前那段说

> -8- 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。访问检查不作为替换过程的一部分进行。因此，当推导成功时，在实例化函数时仍然可能导致访问错误。

[DR 1170](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1170)在 C++0x 进程中进行了相当晚的更改，这使得 SFINAE 在 C++11 中非常棒:)

GCC 4.8 实现了新规则，因此`is_convertible`和类似的特征为不可访问的构造函数提供了正确的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T09:50:22.337

正确答案是乔纳森·韦克利的。我会留下这个，因为它为有类似问题的人提供了有用的信息`insert`。

* * *

简短的版本是，这是由 GCC 4.7.2 使用的标准库实现中的问题引起的，这是由于 C++11 标准中使用的误导性措辞造成的。有一个对措辞的更改建议，以及对 GCC 4.8 中的实施的修复。

* * *

**长版**

[这个 GCC 错误条目](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=50641)报告了一个非常相似的问题，`insert`使用 where 代替`emplace`. libstdc++ 的实现`insert`遵循标准，该标准说明了`insert`函数（特别是`template <class P> pair<iterator,bool> insert(P&& obj)`）：

> (§23.5.4.4/5) 备注：除非 P 可隐式转换为 ，否则此签名不应参与重载决议`value_type`。

libstdc++ 似乎已经使用`enable_if`检查`std::is_convertible<>`所涉及类型的语句实现了这一要求。

上面链接的错误报告稍后指出确实`std::is_constructible<>`应该使用，并且应该更改标准中的措辞。它链接到一个 LWG（语言工作组）问题，该问题已经为此建议更改标准（[LWG 问题 #2005](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2005)，请参阅*Portland 2012*条目，以下建议更改的相关部分）：

> 1.  将 23.5.4.4 [unord.map.modifers] 更改为 p。1 如图所示：
>     
>     
>     
>     ```
>     template <class P>
>     pair<iterator, bool> insert(P&& obj); 
>     ```
>     
>     
> 
> [...] 备注：此签名不应参与重载决议，除非 P 可~~隐式转换为 value_type~~`std::is_constructible<value_type, P&&>::value`为真。

提议的更改还指出，上述`insert`功能的效果应等同于`emplace(std::forward<P>(obj))`. 因此，可以肯定地说，您的问题中描述的问题是完全相同的问题。

事实上，建议的更改似乎反映在最近的**GCC 4.8 快照中：**当您使用 GCC 4.8 编译代码时，`is_convertible`不会执行检查并且**不会出现错误消息。**

# real-time - 使用 MATLAB 进行实时运动检测和警报生成

> ID：14808667
> 
> 赞同：0
> 
> 时间：2013-02-11T08:51:23.307
> 
> 标签：real-time, matlab

我正在使用带有警报生成功能的[MATLAB为安全目的进行实时运动检测项目。](http://en.wikipedia.org/wiki/MATLAB)我已经创建了用于实时视频捕获的代码并将其保存到[AVI](http://en.wikipedia.org/wiki/Audio_Video_Interleave)文件中，但是在代码运行时我无法读取代码中的实时视频。运动检测无法正常工作。我已经使用两个脚本完成了这项工作。两个脚本是独立工作的，但当组合时它不会读取实时输入。我使用的脚本发布在下面。

```
Enter code here 1\. %code for reading and saving AVI file

function realtime_test()
    global movie name vid;
    % Define frame rate
    NumberFrameDisplayPerSecond=10;

    % Open figure
    hFigure=figure(1);

    % Set-up webcam video input

    vid = videoinput('winvideo', 1);

    % Set parameters for video
    % Acquire only one frame each time
    set(vid,'FramesPerTrigger',1);
    % Go on forever until stopped
    set(vid,'TriggerRepeat',Inf);
    % Get a grayscale image
    set(vid,'ReturnedColorSpace','rgb')
    vidRes = get(vid, 'VideoResolution');
    nBands = get(vid, 'NumberOfBands');
    hImage = imshow( zeros(vidRes(2), vidRes(1), nBands));
    preview(vid,hImage);
    triggerconfig(vid, 'Manual');

    % Set up timer object
    TimerData=timer('TimerFcn', {@FrameRateDisplay,vid},'Period',1/NumberFrameDisplayPerSecond,'ExecutionMode','fixedRate','BusyMode','drop');
    name = 'Realtime';
    movie=avifile(name,'compression','none');

    % Start video and timer object
    start(vid);
    start(TimerData);

    % We go on until the figure is closed
    uiwait(hFigure);

    % Clean up everything
    stop(TimerData);
    delete(TimerData);
    stop(vid);
    delete(vid);
    movie = close(movie);
    % Clear persistent variables
    clear functions;

% This function is called by the timer to display one frame of the figure

function FrameRateDisplay(obj, event,vid)
    global movie frame;

    frame=uint8(getsnapshot(vid));
    movie=addframe(movie,frame);
    persistent IM;
    persistent handlesRaw;
    persistent handlesPlot;
    trigger(vid);
    IM=getdata(vid,1,'uint8');

    if isempty(handlesRaw)
       % if first execution, we create the figure objects
       subplot(2,1,1);
       handlesRaw=imagesc(IM);
       title('CurrentImage');

       % Plot first value
       Values=mean(IM(:));
       subplot(2,1,2);
       handlesPlot=plot(Values);
       title('Average of Frame');
       xlabel('Frame number');
       ylabel('Average value (au)');
    else
       % We only update what is needed
       set(handlesRaw,'CData',IM);
       Value=mean(IM(:));
       OldValues=get(handlesPlot,'YData');
       set(handlesPlot,'YData',[OldValues Value]);
    end 
```

2.%运动检测代码

```
% This m-file implements the frame difference algorithm for background
% subtraction.

clear all;
close all;

% source = aviread('live.avi');
%source = aviread('test.avi');
%--------------------------------------------------------------------------
[filename, pathname] = uigetfile( ...
   {'*.avi;*.mpg;*.mpeg;.*flv','Video Files (*.avi,*.mpg,*.mpeg,.*flv)';
   '*.*',  'All Files (*.*)'}, ...
  'Select a video file');

mov = mmreader(fullfile(pathname,filename));
implay(filename);
source = aviread(filename);
%--------------------------------------------------------------------------

thresh = 50;

bg = source(1).cdata;           % Read in 1st frame as background frame
bg_bw = rgb2gray(bg);           % Convert background to greyscale

% ----------------------- Set frame size variables -----------------------
fr_size = size(bg);
width = fr_size(2);
height = fr_size(1);
fg = zeros(height, width);

% --------------------- Process frames -----------------------------------

for i = 2:45
    fr = source(i).cdata;       % Read in frame
    fr_bw = rgb2gray(fr);       % Convert frame to grayscale

    fr_diff = abs(double(fr_bw) - double(bg_bw));  % Cast operands as double to avoid negative overflow

    for j=1:width                 % If fr_diff > thresh pixel in foreground
        for k=1:height
            if ((fr_diff(k,j) > thresh))
                fg(k,j) = fr_bw(k,j);

                disp('motion detected');

                %------------------------- Executes alarm ---------------------------------

                  t = 15;
                  Fs = 50;
                  [t,Fs] = wavread('Blip.wav');
                  player = audioplayer(t,Fs);
                  play(player);

                %--------------------------------------------------------------------------
            else
                fg(k,j) = 0;
            end
        end
        disp('motion not detected');
    end

    bg_bw = fr_bw;

    %figure(1), subplot(3,1,1), imshow(fr)
    subplot(3,1,2),imshow(fr_bw)
    subplot(3,1,3),imshow(uint8(fg))
    figure,imshow(uint8(fr_diff))

    %M(i-1)  = im2frame(uint8(fg),gray);        % Put frames into movie
end
fps = 15;
%movie2avi(M,'frame_difference_output', 'fps', 30);           % Save movie as AVI 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:10:05.893

您可以使用 vid = videoinput('winvideo', 1) 直接读取实时网络摄像头，而不是读取第二个代码中的源代码。我认为它会满足您的要求。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:55:48.843

当您出于安全目的这样做时，我想近实时应该足够好。这是一个应该工作的流程。请注意，我提到的实体可以是线程、cpu 甚至计算机，只要适合您。

*   实体 1：记录一个短片段并保存（例如每 5 秒）
*   实体 2：经常检查最新的片段并对其进行分析，包括在需要时发送信号。（例如每秒）

按照我建议的时间，您不会获得实时结果，但延迟应限制在最多 6 秒。

# html - 悬停链接显示包含在 div 和表格中的表格

> ID：14808669
> 
> 赞同：0
> 
> 时间：2013-02-11T08:51:28.517
> 
> 标签：html, css

好的，所以我最近发布了一个问题，但遇到了另一个问题。

我正在尝试制作一个导航菜单，您将鼠标悬停在链接上并显示一个表格。现在的问题是，在我的代码中，链接包含在一个表格的两个 div 中，而我要显示的表格也在整个 shebang 中。我制作了一个示例代码向您展示

小提琴链接：http: [//jsfiddle.net/ThobiasN/FJksb/24/](http://jsfiddle.net/ThobiasN/FJksb/24/)

html代码：

```
<div>
    <div>
        <table>
            <tr>
                <td><a class='nav' href='#'>Hover me</a></td>
            </tr>
            <tr>
                <table>
                    <tr>
                        <td class='dropdown'><p>Show me</p></td>
                    </tr>
                </table>
            </tr>
        </table>
    </div>
</div> 
```

CSS代码：

```
div table tr td.dropdown
{
    display:none;
}

div table tr td a.nav:hover + div table tr td.dropdown
{
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:01:35.153

你有什么理由坚持使用 CSS 而不是使用 JavaScript？JavaScript 可能会使这变得容易得多。

但是，如果你想纯粹用 CSS 来做，我认为你需要把你的表格放在用户必须悬停的项目中。因此，不要使用您的问题中的内容，而是使用如下结构：

```
<div>
    <div>
        <table>
            <tr>
                <td>
                    <a class='nav' href='#'>Hover me
                        <table>
                            <tr>
                                <td class='dropdown'><p>Show me</p></td>
                            </tr>
                        </table>
                    </a>
                </td>
            </tr>
        </table>
    </div>
</div> 
```

然后，您需要`<a>`适当地设置标签的样式，如果需要，将链接文本放在`<span>`标签内，这样您就可以让它看起来仍然像一个链接。

实际使菜单工作的 CSS 看起来像这样：

```
.nav:link .dropdown {
    display: none;
}

.nav:hover .dropdown, .nav:active .dropdown {
    display: block;
} 
```

所有这一切都告诉浏览器要做的是使分类`dropdown`在活动或悬停`nav`链接中的表出现，并在它不活动或悬停时消失。

我在[这里创建了一个示例](http://jsfiddle.net/guypursey/yHeEK/)，请记住我使用`<div>`了 s 而不是`<table>`s，尽管您可以将您`<table>`的放在里面，`<div>`而我分别使用了类名`menu`and`content`而不是`nav`and `dropdown`。

希望这可以帮助。祝你好运。

# python - Python 比 D 快？？IO 操作似乎减慢了 D 的速度……这是怎么回事？

> ID：14808683
> 
> 赞同：5
> 
> 时间：2013-02-11T08:52:05.787
> 
> 标签：python, d

我为我正在学习的计算机系统课程（使用 nand2tetris 课程）编写了一种虚拟机语言来汇编翻译器。我最初是用 Python 写的，但由于我正在学习 D，所以我想我会翻译它。D 在语法上与 Python 相当接近，因此并不太难。我假设 D 作为一种性能语言并已编译，至少与 Python 一样快，并且在大文件上会快得多。但事实恰恰相反！尽管算法相同，但当我构建一个非常大的文件进行编译时，D 的执行速度始终比 python 慢一些。在大约 500000 行长的文件上，python 始终需要大约 2.6 秒才能完成，而 D 始终需要大约 3 秒。这不是一个巨大的差距，但值得注意的是 python 会更快。

我不想暗示我天真地认为python实际上总体上比D快；然而，在这种情况下，至少 D 在直觉上似乎并不快。对于我的 D 代码中可能的性能下降来源，我将不胜感激。我认为瓶颈可能在 IO 操作上，但我不确定。

源代码如下。细节不是那么重要。分配一些汇编语言模板，然后通过虚拟机语言进行线性传递，将每条指令转换为等效的汇编代码块。

**编辑：**使用 重新编译 D 代码后`dmd -O -release -inline -m64`，D 在输入上以 2.20 秒的时间出现胜利者。然而，问题仍然存在，为什么使用几乎相同的代码，D 似乎比 python 执行得慢。

**编辑 2：**使用下面的建议，我从使用简单的字符串列表切换到使用`appender!string()`, 并显着改善了时间。然而值得一提的是，如果您在 中有一堆字符串`appender`，**请不要**使用以下命令将它们写入文件：

```
auto outputfile = File("foo.txt","w");
foreach(str; my_appender.data)
   outputfile.write(str); 
```

相反，请编写如下内容：

```
auto outputfile = File("foo.txt","w");
outputfile.write(my_appender.data); 
```

与使用简单的`string[]`. 但是使用第一个给我带来了巨大的性能冲击，使执行时间加倍。

更改为`appender!string()`，编译上述大文件大约需要 2.75 秒（到 Python 的 2.8），而原始文件大约需要 3 秒。这样做，并使用 中的优化标志`dmd`，总编译时间为`1.98`几秒！:)

Python：

```
#!/usr/bin/python

import sys

operations_dict = {"add":"+", "sub":"-",
                   "and":"&", "or":"|",
                   "not":"!", "neg":"-",
                   "lt":"JLT", "gt":"JGT",
                   "eq":"JEQ", "leq":"JLE",
                   "geq":"JGE"}

vars_dict = {"this":("THIS","M"),
             "that":("THAT","M"),
             "argument":("ARG","M",),
             "local":("LCL","M",),
             "static":("f.%d","M",),
             "temp":("TEMP","A",)}

start = "@SP\nAM=M-1\n"
end = "@SP\nM=M+1\n"

binary_template = start + "D=M\n\
@SP\n\
AM=M-1\n\
M=M%sD\n" + end

unary_template = start + "M=%sM\n" + end

comp_template = start + "D=M\n\
@SP\n\
AM=M-1\n\
D=M-D\n\
@COMP.%d.TRUE\n\
D;%s\n\
@COMP.%d.FALSE\n\
0;JMP\n\
(COMP.%d.TRUE)\n\
@SP\n\
A=M\n\
M=-1\n\
@SP\n\
M=M+1\n\
@COMP.%d.END\n\
0;JMP\n\
(COMP.%d.FALSE)\n\
@SP\n\
A=M\n\
M=0\n" + end + "(COMP.%d.END)\n"

push_tail_template = "@SP\n\
A=M\n\
M=D\n\
@SP\n\
M=M+1\n"

push_const_template = "@%d\nD=A\n" + push_tail_template

push_var_template = "@%d\n\
D=A\n\
@%s\n\
A=%s+D\n\
D=M\n" + push_tail_template

push_staticpointer_template = "@%s\nD=M\n" + push_tail_template

pop_template = "@%d\n\
D=A\n\
@%s\n\
D=%s+D\n\
@R13\n\
M=D\n\
@SP\n\
AM=M-1\n\
D=M\n\
@R13\n\
A=M\n\
M=D\n"

pop_staticpointer_template = "@SP\n\
AM=M-1\n\
D=M\n\
@%s\n\
M=D"

type_dict = {"add":"arithmetic", "sub":"arithmetic",
                   "and":"arithmetic", "or":"arithmetic",
                   "not":"arithmetic", "neg":"arithmetic",
                   "lt":"arithmetic", "gt":"arithmetic",
                   "eq":"arithmetic", "leq":"arithmetic",
                   "geq":"arithmetic", 
                   "push":"memory", "pop":"memory"}

binary_ops = ["add", "sub", "and", "or"]
unary_ops = ["not", "neg"]
comp_ops = ["lt", "gt", "eq", "leq", "geq"]

op_count = 0
line_count = 0
output = ["// Assembly file generated by my awesome VM compiler\n"]

def compile_operation(op):
    global line_count

    if (op[0:2] == "//") or (len(op.split()) == 0):
        return ""

    # print "input: " + op
    operation = op.split()[0]
    header = "// '" + op +  "' (line " + str(line_count) + ")\n"
    line_count += 1

    if type_dict[operation] == "arithmetic":
        return header + compile_arithmetic(op)
    elif type_dict[operation] == "memory":
        return header + compile_memory(op)

def compile_arithmetic(op):
    global op_count
    out_string = ""
    if op in comp_ops:
        out_string += comp_template % (op_count, operations_dict[op], op_count, \
            op_count, op_count, op_count, op_count)
        op_count += 1
    elif op in unary_ops:
        out_string += unary_template % operations_dict[op]
    else:
        out_string += binary_template % operations_dict[op]
    return out_string

def compile_memory(op):
    global output
    instructions = op.split()
    inst = instructions[0]
    argtype = instructions[1]
    val = int(instructions[2])
    if inst == "push":
        if argtype == "constant":
            return push_const_template % val
        elif argtype == "static":
            return push_staticpointer_template % ("f." + str(val))
        elif argtype == "pointer":
            if val == 0:
                return push_staticpointer_template % ("THIS")
            else:
                return push_staticpointer_template % ("THAT")
        else:
            return push_var_template % (val, vars_dict[argtype][0], vars_dict[argtype][1])
    elif inst == "pop":
        if argtype != "constant":
            if argtype == "static":
                return pop_staticpointer_template % ("f." + str(val))
            elif argtype == "pointer":
                if val == 0:
                    return pop_staticpointer_template % "THIS"
                else:
                    return pop_staticpointer_template % "THAT"
            else:
                return pop_template % (val, vars_dict[argtype][0], vars_dict[argtype][1])

def main():
    global output

    if len(sys.argv) == 1:
        inputfname = "test.txt"
    else:
        inputfname = sys.argv[1]
    outputfname = inputfname.split('.')[0] + ".asm"

    inputf = open(inputfname)
    output += ["// Input filename: %s\n" % inputfname]
    for line in inputf.readlines():
        output += [compile_operation(line.strip())]

    outputf = open(outputfname, 'w')
    for outl in output:
        outputf.write(outl)

    outputf.write("(END)\n@END\n0;JMP");
    inputf.close()
    outputf.close()
    print "Output written to " + outputfname

if __name__ == "__main__":
    main() 
```

丁：

```
import std.stdio, std.string, std.conv, std.format, std.c.stdlib;

string[string] operations_dict, type_dict;
string[][string] vars_dict;
string[] arithmetic, memory, comp_ops, unary_ops, binary_ops, lines, output;
string start, end, binary_template, unary_template,
        comp_template, push_tail_template, push_const_template,
        push_var_template, push_staticpointer_template,
        pop_template, pop_staticpointer_template;
int op_count, line_count;

void build_dictionaries() {
    vars_dict = ["this":["THIS","M"],
                 "that":["THAT","M"],
                 "argument":["ARG","M"],
                 "local":["LCL","M"],
                 "static":["f.%d","M"],
                 "temp":["TEMP","A"]];

    operations_dict = ["add":"+", "sub":"-",
                   "and":"&", "or":"|",
                   "not":"!", "neg":"-",
                   "lt":"JLT", "gt":"JGT",
                   "eq":"JEQ", "leq":"JLE",
                   "geq":"JGE"];

    type_dict = ["add":"arithmetic", "sub":"arithmetic",
                   "and":"arithmetic", "or":"arithmetic",
                   "not":"arithmetic", "neg":"arithmetic",
                   "lt":"arithmetic", "gt":"arithmetic",
                   "eq":"arithmetic", "leq":"arithmetic",
                   "geq":"arithmetic", 
                   "push":"memory", "pop":"memory"];

    binary_ops = ["add", "sub", "and", "or"];
    unary_ops = ["not", "neg"];
    comp_ops = ["lt", "gt", "eq", "leq", "geq"];
}

bool is_in(string s, string[] list) {
    foreach (str; list)
        if (str==s) return true;
    return false;
}

void build_strings() {
    start = "@SP\nAM=M-1\n";
    end = "@SP\nM=M+1\n";

    binary_template = start ~ "D=M\n"
    "@SP\n"
    "AM=M-1\n"
    "M=M%sD\n" ~ end;

    unary_template = start ~ "M=%sM\n" ~ end;

    comp_template = start ~ "D=M\n"
    "@SP\n"
    "AM=M-1\n"
    "D=M-D\n"
    "@COMP.%s.TRUE\n"
    "D;%s\n"
    "@COMP.%s.FALSE\n"
    "0;JMP\n"
    "(COMP.%s.TRUE)\n"
    "@SP\n"
    "A=M\n"
    "M=-1\n"
    "@SP\n"
    "M=M+1\n"
    "@COMP.%s.END\n"
    "0;JMP\n"
    "(COMP.%s.FALSE)\n"
    "@SP\n"
    "A=M\n"
    "M=0\n" ~ end ~ "(COMP.%s.END)\n";

    push_tail_template = "@SP\n"
    "A=M\n"
    "M=D\n"
    "@SP\n"
    "M=M+1\n";

    push_const_template = "@%s\nD=A\n" ~ push_tail_template;

    push_var_template = "@%s\n"
    "D=A\n"
    "@%s\n"
    "A=%s+D\n"
    "D=M\n" ~ push_tail_template;

    push_staticpointer_template = "@%s\nD=M\n" ~ push_tail_template;

    pop_template = "@%s\n"
    "D=A\n"
    "@%s\n"
    "D=%s+D\n"
    "@R13\n"
    "M=D\n"
    "@SP\n"
    "AM=M-1\n"
    "D=M\n"
    "@R13\n"
    "A=M\n"
    "M=D\n";

    pop_staticpointer_template = "@SP\n"
    "AM=M-1\n"
    "D=M\n"
    "@%s\n"
    "M=D";
}

void init() {
    op_count = 0;
    line_count = 0;
    output = ["// Assembly file generated by my awesome VM compiler\n"];
    build_strings();
    build_dictionaries();
}

string compile_operation(string op) {
    if (op.length == 0 || op[0..2] == "//")
        return "";
    string operation = op.split()[0];
    string header = "// '" ~ op ~  "' (line " ~ to!string(line_count) ~ ")\n";
    ++line_count;

    if (type_dict[operation] == "arithmetic")
        return header ~ compile_arithmetic(op);
    else
        return header ~ compile_memory(op);
}

string compile_arithmetic(string op) {
    if (is_in(op, comp_ops)) {
        string out_string = format(comp_template, op_count, operations_dict[op], op_count, 
            op_count, op_count, op_count, op_count);
        op_count += 1;
        return out_string;
    } else if (is_in(op, unary_ops))
        return format(unary_template, operations_dict[op]);
    else
        return format(binary_template, operations_dict[op]);
}

string compile_memory(string op) {
    string[] instructions = op.split();
    string inst = instructions[0];
    string argtype = instructions[1];
    int val = to!int(instructions[2]);
    if (inst == "push") {
        if (argtype == "constant") {
            return format(push_const_template, val);
        } else if (argtype == "static")
            return format(push_staticpointer_template, ("f." ~ to!string(val)));
        else if (argtype == "pointer")
            if (val == 0)
                return format(push_staticpointer_template, "THIS");
            else
                return format(push_staticpointer_template, "THAT");
        else
            return format(push_var_template, val, vars_dict[argtype][0], vars_dict[argtype][1]);
    } else {
        if (argtype != "constant") {
            if (argtype == "static")
                return format(pop_staticpointer_template, ("f." ~ to!string(val)));
            else if (argtype == "pointer") {
                if (val == 0)
                    return format(pop_staticpointer_template, "THIS");
                else
                    return format(pop_staticpointer_template, "THAT");
            }
            else
                return format(pop_template, val, vars_dict[argtype][0], vars_dict[argtype][1]);
        } else {
            return "";
        }
    }
}

void main(string args[]) {
    init();
    if (args.length < 2) {
        writefln("usage: %s <filename>", args[0]);
        exit(0);
    }
    string inputfname = args[1];
    string outputfname = args[1].split(".")[0] ~ ".asm";

    auto inputf = File(inputfname, "r");
    output ~= format("// Input filename: %s\n", inputfname);
    foreach (line; inputf.byLine) {
        output ~= compile_operation(to!string(line).strip);
    }
    inputf.close();

    auto outputf = File(outputfname, "w");
    foreach (outl; output)
        outputf.write(outl);

    outputf.write("(END)\n@END\n0;JMP");
    outputf.close();
    writeln("Compilation successful. Output written to " ~ outputfname);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T23:14:24.350

对于`output`变量使用`Appender`（[docs](http://dlang.org/phobos/std_array.html#.Appender)）：

```
import std.array : appender;

void main() {
   auto output = appender!string("// Assembly file generated by my awesome VM compiler\n");
   //...
   output.put(format("// Input filename: %s\n", inputfname));
   foreach (line; inputf.byLine) {
       output.put(compile_operation(line.to!string().strip()));
   }
   //...
   outputf.write(output.data());
   //...
} 
```

另外，我建议您将其更改`type_dict`为类似的东西`int[string]`并将其与整数常量一起使用。

```
int[string] type_dict;

const TYPE_ARITHMETIC = 0,
    TYPE_MEMORY = 1;

//...
type_dict = ["add": TYPE_ARITHMETIC, "push": TYPE_MEMORY]; // etc
//...

//...
if (type_dict[operation] == TYPE_ARITHMETIC) {
    //...
}
//... 
```

使用`canFind`方法（[文档](http://dlang.org/phobos/std_algorithm.html#canFind)）而不是自定义`is_in`。甚至尝试`SortedRange`（[文档](http://dlang.org/phobos/std_range.html#.SortedRange)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T16:24:49.853

您可能想尝试`std.array.appender`在主函数中使用 for 输出而不是数组连接，因为可以`appender`最大限度地减少分配数量，并且通常针对追加进行优化。您也可以尝试使用`reserve`.

```
//Note: untested code
import std.array;
auto output = appender!string();

void init() {
   ...
   output.put("// Assembly file generated by my awesome VM compiler\n");
   ...
}

void main() {
   ...
   output.put(format("// Input filename: %s\n", inputfname));
   foreach (line; inputf.byLine) {
       output.put(compile_operation(to!string(line).strip));
   }
   ...
   foreach (outl; output.data)
       outputf.write(outl);
   ...
} 
```

# asp.net-mvc - system.net.mail 显示名称无法正常工作

> ID：14808685
> 
> 赞同：0
> 
> 时间：2013-02-11T08:52:22.847
> 
> 标签：asp.net-mvc, asp.net-mvc-3, email

当我发送电子邮件时，它会显示我用来发送它的 smtp 谷歌电子邮件帐户，而不是我在代码中输入的指定电子邮件。我的代码是

```
MailAddress addrfrom = new MailAddress("info@Company.org", "Company Support"); 
```

当前显示在电子邮件中：

```
Company A <(mygoogleemail@google.com)> 
```

但是，我希望它显示

```
Company A <(info@company.org)> 
```

我正在`smtp.google.com`使用`mygoogleemail@google.com/password`

有什么问题？我需要修改我的 google smtp 设置中的设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:59:09.480

> 当我发送电子邮件时，它会显示我用来发送它的 smtp google 电子邮件帐户，

这是绝对正常的，这就是 SMTP 的工作方式。否则，您可以代表奥巴马总统发送电子邮件，而不仅仅是`info@company.org`您想要的问题。电子邮件始终代表 SMTP 服务器上的帐户所有者发送。

如果您想发送一封电子邮件，`info@company.org`您必须在其上设置一个 SMTP 服务器`company.org`并创建一个名为`info`. 然后使用此服务器的 SMTP 设置发送您的电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:03:51.750

是的，谷歌会自动执行此操作。

他们确实提供了一项服务，可以添加其他电子邮件地址以发送到您的帐户（通过单独验证电子邮件地址）。

在您的帐户上验证电子邮件地址后，您应该可以像在此处尝试那样从该地址发送电子邮件。

如何在[此处](http://support.google.com/mail/bin/answer.py?hl=en&answer=22370)的 Google 帮助中添加其他“发送电子邮件地址” 。

还有一个我在[这里](http://www.askdavetaylor.com/configure_google_gmail_to_have_a_different_sender.html)找到的过程的可视化演练。

# python - 无法理解python中的实例变量描述符

> ID：14808686
> 
> 赞同：1
> 
> 时间：2013-02-11T08:52:24.093
> 
> 标签：python

我正在阅读这篇文章，有些事情没有得到清除

[https://stackoverflow.com/a/14787522/1890488](https://stackoverflow.com/a/14787522/1890488)

他使用此代码

```
class O4(O3):
    @property # this decorator makes this instancevar into a data descriptor
    def var(self):
        return "Data descriptors (such as properties) are high priority"

    @var.setter # I'll let O3's constructor set a value in __dict__
    def var(self, value):
        self.__dict__["var"]  = value # but I know it will be ignored 
```

他说@property 将任何实例变量转换为数据描述符。

1.  现在这是否意味着它会自动定义`__get__`,`__set__`并且`__del__`对于那个变量

或 @property 仅相当于`__get__`

我不明白

2.  是否还有更多将实例变量转换为数据描述符的装饰器

3.  @var.setter 的功能是什么。那也是数据描述符部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:05:01.650

`@property`调用内置函数，`property()`您应该查阅文档以获取详细信息。

`property`只有一个强制参数，最左边的“getter”。其他的是`setter`和`deleter`。

使用带有`@`前缀的装饰器只是语法糖。如果您希望可以`property`以更传统的（如果 unpythonic）方式调用：

```
def var_get(self):
    return "Data descriptors (such as properties) are high priority"

def var_set(self, value):
    self.__dict__["var"]  = value 

var = property(var_get, var_set) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:01:19.703

如果您查看系统上的属性装饰器的代码，您会发现它需要三个参数：

*   `fget`：获取变量的函数；
*   `fset`: 设置变量的函数；
*   `fdel`: 删除变量的函数。

正如您通常使用装饰器装饰单个函数一样，您通常只需定义 getter：

```
@property
def my_var(self):
    return self._my_var 
```

如果您还想声明一个 setter，您可以使用新的“属性”来包含一个 setter，方法是`.setter`：

```
@my_var.setter
def my_var(self, value):
    self._my_var = value 
```

两者结合相当于调用`my_var = property(get_my_var, set_my_var)`。

# oracle - 不是单一的组功能

> ID：14808690
> 
> 赞同：-4
> 
> 时间：2013-02-11T08:52:37.467
> 
> 标签：oracle, aggregate-functions

此查询根本没有显示任何内容。我只想要那些在子查询中匹配的 ORDERNO 的结果。

```
SELECT SUM(STY.NQTY * STY.NUNITPRICE   
             / 1000) AS ORDERAMOUNT,
    (SELECT SUM(TBLORDERSTYLE.NQTY * TBLORDERSTYLE.NUNITPRICE/1000) FROM TBLORDER
    INNER JOIN TBLORDERSTYLE
    ON TBLORDER.CORDERNO = TBLORDERSTYLE.CORDERNO
    WHERE TBLORDER.CLCNO LIKE '%MR#%' AND
    TBLORDER.CORDERNO = ORD.CORDERNO
    GROUP BY ORD.CORDERNO) AS K
          FROM TBLORDER ORD INNER JOIN   
          TBLORDERSTYLE STY ON    
          ORD.CORDERNO = STY.CORDERNO
          where (ORD.NPOSTFLAG = '1') AND   
           (ORD.NCANCEL = '0') AND
    ORD.NPAYMODE = '1'  AND  
          (ORD.DPICONFIRMDATE  BETWEEN    
          TO_DATE('01-JUL-2012')AND TO_DATE('31-JUL-2012')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:53:01.997

错误信息很清楚：您没有 GROUP BY 子句。每当我们将 SUM() 等聚合函数与非聚合列混合时，我们需要在 GROUP BY 子句中包含静态列。

在您的代码中，静态列是`K`. 是的，它是从聚合派生的，但它在子查询中，因此它算作非聚合列。

解决这个问题的方法是将子查询移动到一个公共表表达式中（Oracle 称之为子查询分解），这样可以方便地多次引用该列。Oracle SQL 参考中介绍了 WITH 子句的使用。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_10002.htm#i2077142)。

```
with cte as (SELECT ORD.CORDERNO
                   , SUM(TBLORDERSTYLE.NQTY * TBLORDERSTYLE.NUNITPRICE/1000) as k
    FROM TBLORDER
    INNER JOIN TBLORDERSTYLE
    ON TBLORDER.CORDERNO = TBLORDERSTYLE.CORDERNO
    WHERE TBLORDER.CLCNO LIKE '%MR#%' AND
    TBLORDER.CORDERNO = ORD.CORDERNO
    GROUP BY ORD.CORDERNO)
SELECT SUM(STY.NQTY * STY.NUNITPRICE   
             / 1000) AS ORDERAMOUNT,
      cte.K
          FROM cte inner join
          TBLORDER ORD on ord.orderno = k.orderno
          INNER JOIN TBLORDERSTYLE STY ON STY.CORDERNO  = k.orderno
          where (ORD.NPOSTFLAG = '1') AND   
           (ORD.NCANCEL = '0') AND
           ORD.NPAYMODE = '1'  AND  
          (ORD.DPICONFIRMDATE  BETWEEN TO_DATE('01-JUL-2012')AND TO_DATE('31-JUL-2012'))
group by cte.k 
```

这很可能不是您需要的实际逻辑。您没有对您尝试实现的业务规则进行任何解释，所以我只是猜测如何将子查询与主查询连接起来。

# java - 从 Jar 加载 ZUL

> ID：14808693
> 
> 赞同：4
> 
> 时间：2013-02-11T08:53:00.513
> 
> 标签：java, zk, zul

有人知道如何从 Jar 中加载 Zul 吗？我有一个包含 Zul 的图书馆项目。目前我使用 createComponents(String uri, Component parent, Map arg) 但我不知道或无法引用 jar 中的 uri。

* * *

我现在用：

```
public static Component createComponentsFromJar(final String path, final Component parent, final Map<?,?> arg) throws IOException {
    final InputStream resourceAsStream = ComponentHelper.class.getClassLoader().getResourceAsStream(path);
    final PageDefinition pageDefinition = Executions.getCurrent().getPageDefinitionDirectly(new InputStreamReader(resourceAsStream), "zul");
    resourceAsStream.close();
    return Executions.createComponents(pageDefinition, parent, arg);
} 
```

有人知道这种创建新页面的方法存在一些问题吗？一些绑定问题还是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T01:18:19.907

Executions.createComponents 将与 ZK 特定 URI 一起使用（请参阅[Inter-Application Communication](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Patterns/Communication/Inter-Application_Communication)），其中 ZK 特定 URI 中的“~./ *”将获取“classpath/web/* ”下的文件，假设您的 zul 页面位于“src/web/zul”下/pages”如下：

![src下的zul页面](../Images/ad544d38b0ae7e13edc1ee2999b7b6ac.png)

并将 src 文件夹导出为 jar，然后您可以使用 jar 中的 zul 文件创建组件，如下所示：

```
Executions.createComponents("~./zul/pages/zulInJar.zul", parent, null); 
```

# javascript - 在 chrome 中缓存 dom 元素

> ID：14808694
> 
> 赞同：0
> 
> 时间：2013-02-11T08:53:09.137
> 
> 标签：javascript, jquery, google-chrome

我创建了一个用于上传内容的模块。它基本上是由文件 api 完成的。

html代码是

```
 <input type="file" id="filepicker-input" multiple="true" style="display:none;"/>  
    <div class="addfile_btndiv" id="addfile_btndiv">
    <span id="direct-upload-text"><input name=""  class="add_filebtn" type="button" value="Add Files" /></span>
    </div>
    <div id="dropped-files">

    </div>

    <div class="clear"></div>
    </div> 
```

该操作在 onchange 文件时发生。js代码是

```
 var fileInput  = document.getElementById("filepicker-input");
 document.getElementById("direct-upload-text").onclick = function(e){
    fileInput.click();
 }
 fileInput.onchange = function(e) {

//basically same as in ondrop
    $("#dropped-files").html("");

    var files = e.target.files;

    var type            = 'zip';
    var location_block  = 1;
    var check = createPreviewElements(files, type, location_block);

    if(check){

        //add an onclick property to the upload button, this will trigger the main upload process
        var uploadButton    = document.getElementById('upload_button_zip_1');

        uploadButton.onclick = function(e){
            var block   = document.getElementById("current_block");
            block.value = location_block;
            uploadButton.onclick = null; //disable the onclick event once it happened
            document.getElementById('loading_wrapper').style.display = 'inline';
            setTimeout(function(){$('#loading_wrapper').fadeOut()}, 6000);  //fade out loader after 2 sec
            startupload(files, type, location_block);
        };
    }

} 
```

上传工作正常。我的问题是这个上传有一个取消按钮。我通过一些 javascript 代码对此进行了管理，但是当用户可以重新选择同一个文件之后，'onchange' 将不会触发。所以我在取消按钮中添加了一个新的逻辑，删除当前的输入类型并放置一个新的输入类型。代码是

```
 $('#filepicker-input').attr("id", "newID");
    var foo     = document.getElementById("blk_switchbox1");
    var olddiv  = document.getElementById("newID");
    foo.removeChild(olddiv);
    var element = document.createElement("input");

    element.setAttribute("type", "file");
    element.setAttribute("id", "filepicker-input");
    element.setAttribute("class", "nodisplay");

    foo.appendChild(element); 
```

这在 mozila 中运行良好。但不是铬。在 chrome 中，dom 元素存在任何兑现。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:22:08.750

您是否尝试过手动触发更改事件？而不是它的点击事件？

```
document.getElementById("direct-upload-text").onclick = function(e){
    if(fileInput.value != '') {
        fileInput.change();
    } else {
        fileInput.click();
    }
} 
```

# trigger.io - 在 document.reload 之后，messagePushed 和 urlLoaded 事件再次触发

> ID：14808696
> 
> 赞同：1
> 
> 时间：2013-02-11T08:53:11.977
> 
> 标签：trigger.io

对于 forge.event.messagePushed.addListener 和 forge.urlhandler.urlLoaded.addListener：

每当我在使用推送通知或 urlhandler 启动应用程序后触发 forge.document.reload() 或 document.location.reload() 时，这些事件中的任何一个都会再次触发。

我认为 trigger.io 将通知/urlhandler 数据保存在该位置的某处，以便在重新加载应用程序时认为它是由这些事件中的任何一个再次触发的。

有什么办法可以清除这些数据？

# android - 可以显示选择运输类型的两个点之间的路线吗？

> ID：14808705
> 
> 赞同：2
> 
> 时间：2013-02-11T08:53:47.690
> 
> 标签：android, android-mapview

我正在使用此代码显示两点之间的路线：

```
 Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
    Uri.parse("http://maps.google.com/maps?saddr="+lastLocation.getLatitude()+","+lastLocation.getLongitude()+"&daddr="+(double)point.getLatitudeE6()/1000000+","+(double)point.getLongitudeE6()/1000000));
    intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");           
    startActivity(intent); 
```

该代码完美运行，但我需要在该代码中添加选择例如公共交通的可能性。有可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:01:57.823

在您的 Uri 中，您可以再添加一个参数来选择传输类型：

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
    Uri.parse("http://maps.google.com/maps?saddr="+lastLocation.getLatitude()+","+lastLocation.getLongitude()+"&daddr="+(double)point.getLatitudeE6()/1000000+","+(double)point.getLongitudeE6()/1000000 + "&dirflg=r"));
    intent.setComponent(new ComponentName("com.google.android.apps.maps", 
            "com.google.android.maps.MapsActivity"));          
    startActivity(intent); 
```

dirflg = h 表示驾驶，dirflg = r 表示公共交通，dirflg = w 表示步行方向。

仅当该地区可用时才会显示交通模式（公共交通），否则 MapActivity 将显示其不可用的祝酒词并显示驾驶方向（高速公路）。

# jquery - 从 JSON 更新 Django MPTT 树

> ID：14808706
> 
> 赞同：3
> 
> 时间：2013-02-11T08:53:57.227
> 
> 标签：jquery, django, tree, mptt

我需要从 JSON 数据更新 Django MPTT 树。[我使用 Nestable ( http://dbushell.github.com/Nestable/](http://dbushell.github.com/Nestable/) ) jQuery 插件配置 django-mptt 以在前端编辑树。

jQuery Nestable 在更新树后提供了这些数据：

```
[{
    "id": 1
}, {
    "id": 2,
    "children": [{
        "id": 3
    }, {
        "id": 4
    }, {
        "id": 5,
        "children": [{
            "id": 6
        }, {
            "id": 7
        }, {
            "id": 8
        }]
    }, {
        "id": 9
    }, {
        "id": 10
    }]
}, {
    "id": 11
}, {
    "id": 12
}] 
```

我如何从这些数据中更新我的 mptt 树？

谢谢！

# magento - magento > 如何获取 _defaultValues:protected

> ID：14808707
> 
> 赞同：0
> 
> 时间：2013-02-11T08:53:57.207
> 
> 标签：magento

我使用此代码从 magento 获取产品价格：

```
include_once '../../app/Mage.php';
Mage::app();
$model = Mage::getModel('catalog/product');//getting product model
$collection = $model->getCollection(); //products collection
foreach ($collection as $product) //loop for getting products
{                  
    $model->load($product->getId());
    echo $model['price'];
} 
```

所以，当我使用这个脚本时，对于某些产品，给出了正确的价格，但对于某些产品，它不是正确的价格。

当我 var_dump() $model->load($product->getId()); 合适的价格总是在这里：

```
["_defaultValues:protected"]=>
  array(5) {
    ["special_price"]=>
    string(7) "32.0000"
    ["visibility"]=>
    NULL
    ["status"]=>
    string(1) "1"
    ["price"]=>
    string(8) "399.9900"
    ["name"]=>
    string(51) "Philips Home cinema met 3D Blu-ray iPod/iPhone-dock"
  } 
```

如何更改代码以获得这个 399,99 的价格，而不是使用 $model['price'] 时得到的 '1'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:01:20.977

检查 [文档类 Mage_Catalog_Model_Product_Type_Price](http://docs.magentocommerce.com/Mage_Catalog/Mage_Catalog_Model_Product_Type_Price.html)

```
$model->getPrice();

$model->getFinalPrice(); 
```

也许您尝试运行价格索引器

还要检查该产品是否是分组/可配置产品，因此您需要使用不同的方法（ $mode->getCalculatedPrice() ）；

# linux - gcc 已编译但没有 gcc 二进制文件

> ID：14808722
> 
> 赞同：1
> 
> 时间：2013-02-11T08:55:09.620
> 
> 标签：linux, gcc

我从[http://gcc.petsads.us/releases/gcc-4.1.2/gcc-4.1.2.tar.bz2](http://gcc.petsads.us/releases/gcc-4.1.2/gcc-4.1.2.tar.bz2)下载了 gcc-4.1.2并用两个命令构建

```
./configure
make 
```

现在我可以看到 g++ 二进制文件了。但是没有 gcc 二进制文件。

```
$ ls /opt/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc/g++
/opt/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc/g++

$ ls /opt/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc/gcc
ls: cannot access /opt/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc/gcc: No such file or directory 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:32:47.303

在安装之前调用 gcc 二进制文件`xgcc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:01:33.210

1.  你检查是否`configure`并且`make`没有错误？
2.  但不太可能：您是否还运行`make install`了应该将所有二进制文件安装到适当目录中的程序？

# php - 一键调用php和javascript函数

> ID：14808725
> 
> 赞同：1
> 
> 时间：2013-02-11T08:55:37.200
> 
> 标签：php, javascript, select

这是我想要实现的目标，但我的谷歌搜索没有帮助：

我有一个按钮，可以动态地将新行添加到表中。我还在 javascript 中将一个选择组件添加到具有相同操作的单元格中。我希望该选择组件使用 sql select 语句中的值填充。当然，我不想在 JavaScript 中定义与数据库的连接。所以我想知道是否有一种方法可以调用 PHP 函数来检索值，然后将其存储在 JavaScript 中的变量中。

PS我知道PHP是服务器端而不是JS。但这肯定是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:08:02.217

这是一个使用 jQuery 的 ajax 和 php 的简单实现。

html

```
<select data-source-url="/category/list"></select> 
```

使用 jQuery 的 JavaScript

```
$("select[data-source-url]").each(function(){
    var url = $(this).attr("data-source-url");
    var el = $(this);
    $.get(url, function(data){
        for (i=0;i<data.length;i++){
            el.append("<option>" + data[i] + "</option>");
        }
    },"json");
}); 
```

类别/列表端点（一个 php 脚本）

```
$list = array();
$list[0] = "category 1";
$list[1] = "category 2";
$list[2] = "category 3";
$list[3] = "category 4";
$list[4] = "category 5";

echo json_encode($list); 
```

稍微解释一下：发生的情况是通过 JavaScript 客户端向 php 脚本发出请求，该脚本返回 JSON 中的值数组（基本上是 javascript 数据结构），这些值被动态添加到选择框中。

请注意，在页面初始加载时，选择框将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:00:15.767

是的，当然可以。要将 s php 变量存储在 js ariable 中，您可以这样做。在将其存储到 js 变量之前将所需的值存储在您的 php 变量中

```
var value = '<?php echo $value;?>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:00:45.827

Javascript 无法直接连接到数据库。

你想要[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。此功能的基本流程如下所示。

1.  创建一个连接到数据库并获取您的选择元素的选项的 PHP 脚本（我们称之为 options.php）。此脚本应从数据库中获取选项并将它们输出为[JSON](http://www.json.org/)数组。
2.  在您的 javascript 中，您将创建一个对 options.php 的 ajax 请求。使用从该脚本返回的 JSON 数据，您将遍历每个元素并创建相应的选项元素并将其附加到您的选择元素内的 dom。

还可以考虑使用[jQuery](http://api.jquery.com/jQuery.ajax/)。它极大地简化了 ajax 并提供了跨浏览器的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T09:25:29.500

## 选项1

`php`在客户端使用类似这样的方法将包含所有可能值的数组传递给客户端：

```
var opt_values = [<?php echo $php_values; ?>]; //javascript array 
```

或者

```
var opt_values = <?php echo json_encode($php_values); ?>; //json object 
```

## 选项 2

另一种方法是发出 ajax 请求。编写一个返回`JSON`对象的 php 函数，然后您可以使用 jQuery ajax 方法操作结果：

**PHP函数：**

```
$json = array();
$result = mysqli_query ($connection, $query);
while($row = mysqli_fetch_array ($result))     
{
    $bus = array(
        'id' => $row['id'],
        'text' => $row['name']
    );
    array_push($json, $bus);
}

return = json_encode($json) 
```

**jQuery**

```
$('#button-id').click(function(){
//adds a new row to a table dynamically
    $.ajax({
        type: "get",
        dataType: "json",
        url: "/get_values.php",
        success: function (response) {
            var $el = $("#myselect"); //get the select
            $el.empty(); // remove old options
            //Append the new values
            $.each(response, function(key, value) {
              $el.append($("<option></option>")
                 .attr("value", value.id).text(value.text));
            });
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T11:16:32.053

只是想我会把它放在那里，因为 w3schools 是我的朋友，我有点听从他们在这篇文章中所说的话。 [W3Schools PHP & AJAX 通信](http://www.w3schools.com/php/php_ajax_database.asp)

# mysql - 大量数据导入的表结构

> ID：14808726
> 
> 赞同：1
> 
> 时间：2013-02-11T08:55:38.967
> 
> 标签：mysql

我有一个关于设置表以处理我每天导入的大量数据的最佳方法的一般性问题。我将每天导入 10 个包含 1000 条记录的 csv 文件，以便此表快速扩展。

它由大约 15 列组成，范围从微型和中等整数到 30 个字符的 varchar。

没有 ID 字段 - 我可以连接 6 列来形成一个主键 - 这将是一个 var char 总长度约为 45。

导入后，我需要通过 Web 前端在摘要级别报告此数据，因此我看到自己必须在导入后从中构建报告表。

在此数据中，许多字段在每天导入时都会重复出现 - 日期、地区、客户等，每天只有一半的列是特定于记录的。

问题：

1.  我是否应该立即将其全部导入到一张表中作为转储表。
2.  我是否应该通过导入过程转换数据并将导入拆分到不同的表中
3.  我是否应该根据我可以在导入期间获得唯一键的列形成一个 id 字段
4.  我应该为此使用 auto inc id 字段吗？
5.  这应该是什么类型的表 InnoDB 等

我担心这个表上的数据过载，这会使提取到报告表变得越来越困难？

建议真的很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:43:36.670

1.  拥有 autoinc id 通常比没有它更有帮助
2.  为确保数据完整性，您可以在组成 ID 的 6 列上使用 uniq 索引
3.  如果您有足够的 RAM，MySQL 对数据库中的数百万条记录非常满意
4.  如果您仍然担心数百万条记录 - 只需每月将您的数据汇总到另一个表中即可。如果你不能 - 添加更多内存。
5.  只要不影响性能，在导入期间尽可能多地转换数据。在数据已经导入时转换数据会给 MySQL 服务器增加不必要的负载，如果可以避免这样做 - 避免。
6.  MyISAM（曾经？）通常更适合统计类型的数据，这种类型不会经常更新，但 InnoDB 在过去几年中已经赶上（看看 percona 的 XtraDB 引擎）并且在性能方面基本相同。

我认为这里最重要的一点是定义您的数据保留率 - 在一两年后您必须保留每日分辨率的情况很少见。

如果您认为将来可能仍需要每日分辨率，请聚合到较低分辨率的帧和存档（mysqldump > bzip 非常有效）。

# drupal - Drupal html 输出主题

> ID：14808729
> 
> 赞同：0
> 
> 时间：2013-02-11T08:56:03.270
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-themes

我有一个生成输出页面的自定义模块，我的问题是如何将 html 元素添加到输出中，例如标题和段落等。

我的模块如下

```
function mymodule_page() {
$output .= '<h3>'.t('Installs '.$cell).'</h3>';
$output .= theme('flot_graph', $graph1);
return $output;
} 
```

这是正确的方法吗？

第二行应该是这样吗？

```
$output .= t('<h3>Installs '.$cell.'</h3>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:12:58.577

我更喜欢不要在模块文件中混合逻辑和表示，所以我会使用 tpl 来打印内容。例如，在您的模块中，我会放置以下代码：

```
function mymodule_page() {
    return theme_render_template(drupal_get_path('theme', 'your_theme') . 'path/to/your/file.tpl', array('cell' => $cell, 'graph1' => $graph1); 
} 
```

在 tpl 文件中：

```
<h3><?php echo t('Installs') . ' ' . $cell; ?></h3>
theme('flot_graph', $graph1); 
```

# c# - TreeView 中的动态 ObservableCollection？

> ID：14808731
> 
> 赞同：0
> 
> 时间：2013-02-11T08:56:09.920
> 
> 标签：c#, treeview, observablecollection

我有这个问题，我无法将我的数据加载到我的 TreeView 中，但我必须手动进行。我的静态解决方案如下所示：

```
public static ObservableCollection<ClassOfDoom> GetAll()
    {
        ObservableCollection<ClassOfDoom> listToReturn = new ObservableCollection<ClassOfDoom>();

        ClassOfDoom treeItem = null;

        OUViewModel ouvm = new OUViewModel();
        int[] tempOU = ouvm.HierarchyIntOU;
        int[] tempP = ouvm.HierarchyIntParent;

        treeItem = new ClassOfDoom("Root");
        treeItem.cID = tempOU[0];
        treeItem.pID = tempP[0];
        for (int i = 0; i < ouvm.HierarchyIntParent.Length; i++)
        {
            if (treeItem.cID == tempP[i])
            {
                treeItem.ClassOfDooms.Add(new ClassOfDoom(tempOU[i].ToString()));
                treeItem.ClassOfDooms.Last().pID = tempP[i];
                treeItem.ClassOfDooms.Last().cID = tempOU[i];
                for (int i1 = 0; i1 < ouvm.HierarchyIntParent.Length; i1++)
                {
                    if (treeItem.ClassOfDooms.Last().cID == tempP[i1])
                    {
                        treeItem.ClassOfDooms.Last().Countries.Add(new ClassOfDoom(tempOU[i1].ToString()));
                    }
                }
            }   
        }
        listToReturn.Add(treeItem);    
        return listToReturn;
    } 
```

这可行，但正如您所见，它只有三个级别，我想要动态级别的数量。如果有人想知道我的 ClassOfDooms 列表如下所示：

```
public ObservableCollection<ClassOfDoom> ClassOfDooms
{
    get
    {
        if (classOfDooms == null) classOfDooms = new ObservableCollection<ClassOfDoom>();
        return classOfDooms;
    }
    set { classOfDooms = value; }
} 
```

我想再次声明，我从我的数据库或类似的任何东西中读取数据都没有问题。TreeView 获得了正确的信息，但并非全部。

编辑：我自己解决了这个问题：

```
 ClassOfDoom[] asdfDooms = new ClassOfDoom[ouvm.HierarchyIntParent.Length];
    for (int i = 0; i < ouvm.HierarchyIntParent.Length; i++)
    {
        asdfDooms[i] = new ClassOfDoom();
        asdfDooms[i].cID = tempOU[i];
        asdfDooms[i].pID = tempP[i];
        asdfDooms[i].name = tempPersonName + asdfDooms[i].cID.ToString();
    }
    for (int aint = 0; aint < ouvm.HierarchyIntParent.Length; aint++)
    {
        for (int i = 0; i < ouvm.HierarchyIntParent.Length; i++)
        {
            if (asdfDooms[aint].cID == asdfDooms[i].pID)
            {
                asdfDooms[aint].classOfDooms.Add(asdfDooms[i]);
            }
        }
    }
    listToReturn.Add(asdfDooms[0]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:00:28.417

尝试结合[HierarchicalDataTemplate控件实现](http://msdn.microsoft.com/en-us/library/system.windows.hierarchicaldatatemplate%28v=vs.100%29.aspx)[INotifyPropertyChanged 接口](http://msdn.microsoft.com/en-us/library/ms229614.aspx)，这应确保对底层数据结构所做的更改反映在 TreeView 结构中。

# audio - 用于流式传输的 PCM/RAW 音频容器

> ID：14808734
> 
> 赞同：1
> 
> 时间：2013-02-11T08:56:12.787
> 
> 标签：audio, audio-streaming, pcm

我想知道你们中是否有人尝试流式传输 RAW 音频数据。我尝试使用 WAV 文件来做到这一点，但这不支持流式传输。任何人都可以为我提供一个容器（Matroska 除外）:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T09:59:58.763

我发现了 OggPCM。我认为它是唯一允许您流式传输 PCM 音频（并且非常标准）的容器。WAV 文件不允许您流式传输原始数据，因此我从列表中删除了此文件。我想在我的无线网络中传输一些音频数据，所以带宽不是问题。

# jquery - 如何在 jQuery 中实现旋转动画？

> ID：14808736
> 
> 赞同：1
> 
> 时间：2013-02-11T08:56:25.333
> 
> 标签：jquery, css, animation

我正在用这个动画一些css样式：

```
$(".left").animate({
    left: '300px',
    width: '300px',
    height: '300px',
    top: '25px'
}, 1000,'easeInOutQuint', function() {
}); 
```

我试图添加一个`transform`属性，但它似乎不起作用。有什么解决办法吗？ [小提琴](http://jsfiddle.net/a3bWZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:09:13.870

您需要在转换属性中添加引号，例如：

```
$(".left").animate({
    '-webkit-transform': 'rotate(180deg)',
    '-moz-transform': 'rotate(180deg)',
    '-ms-transform': 'rotate(180deg)',
    '-o-transform': 'rotate(180deg)',
    'transform': 'rotate(180deg)'
}); 
```

编辑：我对此进行了测试，发现它不起作用。显然 jQuery 不支持“动画”功能中的 CSS3 标签。除非其他人有更好的主意，否则您可能需要一个插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:16:48.410

一种方法是添加一个未使用的属性，例如 text-indent，然后增加它的值。在 css 类 '.last' 中为 text-indent 设置一些值。检查以下代码示例。

```
$('.left').animate({
    left: '300px',
    width: '300px',
    height: '300px',
    top: '25px',
    textIndent: '0px'
},
{
    step:function(now,fx) {
        $(this).css('-webkit-transform','rotate('+now+'deg)'); 
    }
}); 
```

希望这能解决你的问题。或者您可以简单地使用 css3 动画属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:24:58.343

最好的解决方案，也是在我的案例中有效的解决方案，是使用一个小的 jQuery 插件进行旋转，可以在[这里](http://code.google.com/p/jqueryrotate/)找到。

# php - MySQL如何将pid = X的所有列添加在一起

> ID：14808742
> 
> 赞同：1
> 
> 时间：2013-02-11T08:56:47.560
> 
> 标签：php, mysql, sql

只是想知道将列中的所有值添加在一起的最佳方法是什么，其中 pid=$pid 在列中。

这是我正在使用的一些示例代码：

```
$query = mysql_query("SELECT pid, reputation FROM reputation WHERE pid=\"{$post['pid']}\"");

while($rep = mysql_fetch_assoc($query))
{
    echo $rep['reputation'];
} 
```

这很好用，但是当 pid=XI 存在多行时，需要将这些行上的信誉列加在一起并输出结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:58:50.583

利用`GROUP BY`

```
SELECT pid, SUM(reputation) totalReputation
FROM reputation 
WHERE pid = 0
GROUP BY pid 
```

在php中

```
$query = mysql_query("SELECT pid, SUM(reputation) totalReputation
                      FROM reputation 
                      WHERE pid = " .$post['pid'] ."
                      GROUP BY pid"); 
```

并获取别名

```
echo $rep['totalReputation']; 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:59:14.207

```
$query = mysql_query("SELECT SUM(reputation) as rep FROM reputation WHERE pid=\"{$post['pid']}\"");

while($rep = mysql_fetch_assoc($query))
{
    echo $rep['rep'];
} 
```

**注意：您不应该使用 mysql_* 扩展，因为它们现在已被弃用。**

# ssl - 文件夹中的经典 ASP 和 SSL

> ID：14808743
> 
> 赞同：2
> 
> 时间：2013-02-11T08:56:48.763
> 
> 标签：ssl, asp-classic

我们在经典的 asp 站点中有一个文件夹，该文件夹为该文件夹设置了 ssl。它可以工作，但是当您加载文件夹中的第一页，然后按照超链接指向文件夹中的另一个页面时，您会被踢回文件夹外部的页面，该页面导致 https 的内容。

重复这个过程（*点击非https页面上的链接>转到https文件夹>点击https文件夹中其他页面的链接*），一切正常，对于https文件夹中页面之间的随机跳数，然后砰，再次被踢出去.

我注意到在 https 文件夹中的页面之间跳转时会话 ID 一直在变化。有人说这是由于 IE 兼容模式交换，但我已经强制使用标题并使用 IE 开发工具（想念你的 Firebug）我看到模式保持不变。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T10:09:04.893

去年我们在另一个项目中遇到了类似的问题。@padas 是正确的。http 和 https 上的会话不同，服务器会出现问题。我们选择的选项是 https 整个站点。无论如何，这都是有道理的，可以帮助用户对他们正在浏览的内容充满信心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T04:47:38.407

听起来您在 http 和 https 之间遍历，这将更改会话 ID。如果您的页面使用会话 ID 来跟踪人员，您将遇到问题。你最好放弃 cookie 或强制 https。

# visual-studio-2010 - MS Visual Studio 没有给出提示

> ID：14808744
> 
> 赞同：0
> 
> 时间：2013-02-11T08:56:50.420
> 
> 标签：visual-studio-2010

我正在使用 Visual Studio 2010 Ultimate，但智能感知无法正常工作。

例如，当我尝试访问其中的方法时，从下面的代码`e`中不会提示我可用的方法。

```
private: System::Void textBox1_KeyDown(System::Object^  sender, System::Windows::Forms::KeyEventArgs^  e){
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:03:24.860

是的，你说得对，可悲的是 Intellisense 在 VS 2010 中不再用于 C++/CLI。它在 VS 2012 和 VS 2010 中又回来了，如果你负担得起的话，我推荐[Visual Assist 。](http://www.wholetomato.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T21:58:05.110

我发现 VS 2010 不支持 C++/CLI 的智能感知。估计没有办法解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T15:51:06.067

Visual Studio 2012 再次具有 Intellisense。有一个[支持 c++ 的快速（免费）桌面开发版本。以下是关于](http://www.microsoft.com/visualstudio/eng/downloads#d-2012-editions)当时为什么不以及为什么现在的解释。

# java - 无法启动 Java/Lantern 程序

> ID：14808745
> 
> 赞同：1
> 
> 时间：2013-02-11T08:56:52.353
> 
> 标签：java, linux, chef-infra, headless, lanterna

我目前正在编写一个小型终端应用程序，使用我发现的一个非常酷的 Java 库：[Lanterna](http://code.google.com/p/lanterna/)。它允许我使用与 Swing 类似的概念编写类似 ncurses 的应用程序。

由于该应用程序的最终目标是在服务器上运行，因此我在 Vagrant ubuntu 机器上对其进行了测试。不幸的是，在每次启动时，我都会收到以下错误：

```
vagrant@precise64:~/myProject/target$ java -jar myProject-1.1.0-SNAPSHOT.jar -Djava.awt.headless=true
Exception in thread "main" java.lang.UnsatisfiedLinkError: /usr/lib/jvm/jdk1.6.0_37/jre/lib/amd64/xawt/libmawt.so: libXtst.so.6: cannot open shared object file: No such file or directory
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1807)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1703)
        at java.lang.Runtime.load0(Runtime.java:770)
        at java.lang.System.load(System.java:1003)
        at java.lang.ClassLoader$NativeLibrary.load(Native Method)
        at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1807)
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1724)
        at java.lang.Runtime.loadLibrary0(Runtime.java:823)
        at java.lang.System.loadLibrary(System.java:1028)
        at sun.security.action.LoadLibraryAction.run(LoadLibraryAction.java:50)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.awt.Toolkit.loadLibraries(Toolkit.java:1605)
        at java.awt.Toolkit.<clinit>(Toolkit.java:1627)
        at java.awt.Font.<clinit>(Font.java:210)
        at com.googlecode.lanterna.terminal.swing.TerminalAppearance.createDefaultNormalFont(TerminalAppearance.java:46)
        at com.googlecode.lanterna.terminal.swing.TerminalAppearance.<clinit>(TerminalAppearance.java:33)
        at com.googlecode.lanterna.terminal.swing.SwingTerminal.<init>(SwingTerminal.java:77)
        at com.googlecode.lanterna.TerminalFacade.createSwingTerminal(TerminalFacade.java:115)
        at com.googlecode.lanterna.TerminalFacade.createSwingTerminal(TerminalFacade.java:104)
        at com.googlecode.lanterna.TerminalFacade.createTerminal(TerminalFacade.java:95)
        at com.googlecode.lanterna.TerminalFacade.createTerminal(TerminalFacade.java:65)
        at com.googlecode.lanterna.TerminalFacade.createTerminal(TerminalFacade.java:54)
        at com.googlecode.lanterna.TerminalFacade.createScreen(TerminalFacade.java:247)
        at com.googlecode.lanterna.TerminalFacade.createGUIScreen(TerminalFacade.java:261) 
```

我猜我的 Java 安装有问题，它来自使用此配置的[Chef solo](http://wiki.opscode.com/display/chef/Chef+Solo) [Java](http://community.opscode.com/cookbooks/java) recipe

```
 chef.json = {
        :java => {
            :install_flavor => "oracle",
            :oracle => {
                "accept_oracle_download_terms" => true
            }               
        },
        :maven => {
            :version => '3',
            :setup_bin => 'true'
        }
    } 
```

但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:03:25.543

libXtst.so 带有一个名为：[libxtst6](http://packages.debian.org/sid/libxtst6)的包；比在Debian中。检查是否安装了该软件包，也许厨师没有自动安装该软件包。

祝你好运

# c# - c#控制台应用程序中的重载方法错误

> ID：14808747
> 
> 赞同：-1
> 
> 时间：2013-02-11T08:56:59.980
> 
> 标签：c#

我有一个类可以创建一个边框上具有不同颜色的 Box。我的代码出现错误，提示“方法'SetCursorPosition'没有重载需要3个参数。这是我的代码：

```
class TitledBox : ColoredBox
{
    private string title;
    private ConsoleColor titleColor;

    public TitledBox(Point p, int width, int height, ConsoleColor backColor, string title, ConsoleColor titleColor)
        : base(p, width, height, backColor)
    {
        if (title.Length > width)
            this.title = title.Substring(0, width);
        else
            this.title = title;

        this.titleColor = titleColor;
    }

    public override void Draw()
    {
        for (int j = 0; j < height; j++)
        {
            Console.SetCursorPosition(p.X, p.Y, + j);
            Console.BackgroundColor = backColor;
            if  ( j == 0)    
            {
                Console.ForegroundColor = titleColor;
                Console.Write(title);
               for (int i = 0; i < width - title.Length; i++)
               {
                   Console.Write(' ');
               }
            }
            else
            {
                for (int i = 0; i < width; i++)
                Console.Write(' ');
            }
        }
    }

} 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:00:02.997

您的 Console.SetCursorPosition 应该如下所示

```
Console.SetCursorPosition(int Left, int Top); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:02:54.420

该方法`Console.SetCursorPosition` 仅获得 2 个 int 参数。您指定了 3 个参数。我想你的意思是：

```
//the second comma was deleted
Console.SetCursorPosition(p.X, p.Y + j); 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx](http://msdn.microsoft.com/en-us/library/system.console.setcursorposition.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:03:12.553

```
 Console.SetCursorPosition(p.X, p.Y, + j); 
```

应该

```
 Console.SetCursorPosition(p.X, p.Y + j); 
```

# c++ - 如何在两个类中双重引用子类和父类

> ID：14808750
> 
> 赞同：0
> 
> 时间：2013-02-11T08:57:17.670
> 
> 标签：c++, c, oop

如何正确引用两个对象（双重链接的子对象和父对象）中的子对象和父对象？这样做时，我得到一个编译错误：`**** does not name a type`. 我怀疑这与由于#define 标签而被省略的#include 语句有关。因此应该如何包含这些标签？

三个文件（Parent.h、Child.h、main.cpp）是这样写的：

```
 /* Parent.h */
#pragma once
#ifndef _CHILD_CLS
#define _CHILD_CLS

#include "Child.h"

class Parent {
public:
    Parent() {}
    ~Parent() {}
    void do_parent(Child* arg);
};
#endif

/* Child.h */
#pragma once
#ifndef _CHILD_CLS
#define _CHILD_CLS

#include "Parent.h"

class Child {
public:
    Child() {}
    ~Child() {}
    void do_child(Parent* arg);
};
#endif

/* main.cpp */
#include "child.h"
#include "parent.h"

int main()
{
    Child   a();
    Parent  b();
    a.do_parent(Child& arg);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:00:39.970

您有头文件的循环依赖。只需在其中一个标头中前向声明任一类即可。例如：

```
 /* Parent.h */
#pragma once
#ifndef _CHILD_CLS
#define _CHILD_CLS

//#include "Child.h"   ----> Remove it
class Child;           //Forward declare it

class Parent {
public:
    Parent() {}
    ~Parent() {}
    void do_parent(Child* arg);
};
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:01:07.683

使用类原型/前向声明：

```
class Child; 
```

和

```
class Parent; 
```

在彼此的类声明之前并删除包含。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:02:06.700

您定义了两个函数而不是对象，请参阅[最令人烦恼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)

更新

```
Child   a();              // a is a function returns Child object
Parent  b();              // b is a function returns Parent object
a.do_parent(Child& arg); 
```

到

```
Child   a;           // a is a Child object
Parent  b;           // b is a Parent object
b.do_parent(&a); 
```

此外，您有[循环包含](http://en.wikipedia.org/wiki/Circular_dependency)问题，要打破循环包含，您需要转发一种类型：

孩子.h

```
#pragma once
#ifndef _CHILD_CLS
#define _CHILD_CLS

//#include "Parent.h"  Don't include Parent.h
class Parent;           // forward declaration
class Child {
public:
    Child() {}
    ~Child() {}
    void do_child(Parent* arg);
};
#endif 
```

孩子.cpp

```
#include "Parent.h"
// blah 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T09:01:42.163

我**猜**这个错误（在询问编译/链接器错误时，您应该始终包含*完整*且*未经编辑的错误消息），是这一行：*

```
a.do_parent(Child& arg); 
```

您应该在这里传递一个指向`Child`对象的指针，而不是变量声明：

```
b.do_parent(&a); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T09:02:42.230

您需要对 or 进行前向*声明*。尝试修改您的文件之一。`class Parent``class Child`

在你的 Parent.h 中：

```
#pragma once
#ifndef _CHILD_CLS
#define _CHILD_CLS

class Child;     // Forward declaration of class Child

class Parent {
public:
    Parent() {}
    ~Parent() {}
    void do_parent(Child* arg);
};
#endif 
```

或在您的 Child.h 中：

```
#pragma once
#ifndef _CHILD_CLS
#define _CHILD_CLS

class Parent;    // Forward declaration of class Parent

class Child {
public:
    Child() {}
    ~Child() {}
    void do_child(Parent* arg);
};
#endif 
```

[这个问题](https://stackoverflow.com/questions/553682/when-to-use-forward-declaration)应该对你有很大帮助。

# asp.net - asp.net授权规则如何防止CSS被应用

> ID：14808751
> 
> 赞同：3
> 
> 时间：2013-02-11T08:57:24.113
> 
> 标签：asp.net, asp.net-authorization

我正在阻止匿名访问我的 Web 应用程序使用`<deny users="?"/>`. 由于我希望匿名用户可以访问登录页面，因此我使用了以下规则

```
 <location path="Login.aspx">
 <system.web>
  <authorization>
    <allow users="?"/>
  </authorization>
 </system.web>
</location> 
```

由于此规则阻止将 css 应用于登录页面，因此我使用了附加规则

```
<location path="Style.css">
<system.web>
  <authorization>
    <allow users="?"/>
  </authorization>
</system.web> 
```

修复了它，现在 css 应用于登录页面。但是在应用上述附加规则之前，我在浏览器中检查了页面的来源，发现存在一个条目`<link href="Style.css" rel="stylesheet" type="text/css" />`并单击该链接，浏览器确实将我带到了我的 css 文件并显示了所有样式。所以我想知道页面是否可以访问“Style.css”，究竟是什么阻止了浏览器将样式应用于不同的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:03:32.760

我再次删除了附加的测试规则。

```
<location path="Style.css">
 <system.web>
  <authorization>
    <allow users="?"/>
 </authorization>
</system.web> 
```

我检查了@explunit 在评论中指定的浏览器中 CSS 文件的状态。这次的状态是 302 found 并且点击 CSS 链接不显示 CSS 文件。我认为 CSS 是由浏览器缓存的，这就是它第一次显示它的原因。

# scala - 如何在单例 ActorSystem 中管理演员关闭

> ID：14808752
> 
> 赞同：0
> 
> 时间：2013-02-11T08:57:39.357
> 
> 标签：scala, akka, actor

我的应用程序中有一个单例参与者系统，除了在同一个 JVM 中加载和卸载同一个应用程序进行测试时，我有一个错误，因为我在启动过程中尝试重新创建一个参与者已经存在。

结果，我得到了一个，`akka.actor.InvalidActorNameException`因为 Actor 名称不是唯一的。

我正在寻找一种方法来根据演员系统顺利关闭演员，而无需关闭演员系统本身。哪个是合理的策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T12:26:23.497

这并不完全回答您的问题 - “ *......一种平滑关闭演员的方法......* ”，但您提到您能够在同一个 JVM 中启动两个应用程序。

你能让你的actor系统*在应用程序实例中成为单例*而不是整个JVM中的单例吗？

您将拥有两个独立的演员系统，不会有名称冲突，也不必启动/停止特定的演员。

我想问题可能是如果某些参与者正在与外部世界交互，例如从 JMS 消费一些消息等。那么哪个参与者系统正在处理它们就不是很明显了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:05:13.533

你想要这样的东西吗？

```
object AkkaTest extends App {
  import akka.actor._
  import akka.pattern.ask
  import akka.util.Timeout
  import scala.concurrent.duration._

  val system = ActorSystem.create

  val supervisor = system.actorOf(Props[MasterOfPuppets], name = "masterOfPuppets")

  private object AllTerminated

  private class MasterOfPuppets extends Actor {

    var supervised = 0

    var waiterForTerminated: Option[ActorRef] = None

    def receive = {
      case actor: ActorRef =>
        context.watch(actor)
        supervised += 1
      case Terminated(dead) =>
        supervised -= 1
        if (supervised == 0) {
          waiterForTerminated.map(_ ! AllTerminated)
          waiterForTerminated = None
        }
      case AllTerminated =>
        if (supervised == 0) {
          sender ! AllTerminated
        } else {
          waiterForTerminated = Some(sender)
        }
    }
  }

  private class TestedActor extends Actor {
    def receive = {
      case a: Any => sender ! a
    }
  }

  implicit val timeout = Timeout(5.seconds) // needed for `?` below

  // Create first actor
  val actor1 = system.actorOf(Props[TestedActor], name = "name1")
  supervisor ! actor1
  actor1 ! PoisonPill

  val waitForIt = supervisor ? AllTerminated
  Await.result(waitForIt, 5.seconds)
  // Same name
  val actor2 = system.actorOf(Props[TestedActor], name = "name1")
  supervisor ! actor2

  println("ok then")
} 
```

你的问题很简单：Akka 和消息是异步的。如果您在杀死他之后尝试创建一个演员，则该名称不可用。在创建新演员之前尝试一个 Thread.sleep ，它将起作用.. :)

# android - 具有列表视图和多对多关系的内容提供者

> ID：14808757
> 
> 赞同：3
> 
> 时间：2013-02-11T08:57:50.200
> 
> 标签：android, listview, cursor, android-contentprovider

我已经为我的应用程序创建了一个内容提供程序，我在我的主要活动中使用它与 CursorLoader 和一个列表视图。列表视图显示一些元素。一个元素可以绑定很多标签。

我定义了3个表：元素（_id，描述），标签（_id，描述），元素标签（idElement，idTag）。

在内容提供者的查询方法中，我做了我的加入，但因为一个元素可以有很多标签。我在我的列表视图中得到类似的东西（这也是我查询的结果）：

*   元素1 | 标签1
*   元素1 | 标签2
*   元素1 | 标签3

但我想：

*   Element1 Tag1 Tag2 Tag3（第一个单元格）

我虽然不想在元素和标签之间建立连接，但在这种情况下，我应该查询光标适配器中每个元素的标签（我猜这很糟糕）。

我还在一个线程上读到，也许非规范化是最好的主意（在元素表中创建一列，其中包含用逗号分隔的元素的标签）。但是当我想获取所有包含标签的元素时，这会很慢。

也许我不得不放下整个 CursorLoader 的事情，并且由于连接查询而只制作一个大哈希图？

我真的很感激你的想法。

提前谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:43:48.217

如果它可以帮助，这是我的解决方法：

我不会在内容提供程序中的表 ELEMENT 和 TAG 之间进行任何连接。我只加载元素，所以列表视图中每个元素只有一行。我在 CursorAdapter 中实现了一个方法 loadContent，我在两个哈希图中加载了我的标签和标签/元素关系表。

此方法在 CursorAdapter 构造函数中调用，并且在调用 onContentChanged() 时调用（由于标志 CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER 调用此方法）。

然后在 CursorAdapter 的 bindView 方法中，当处理光标当前元素时，由于两个哈希图，我得到了绑定到我的元素的所有标签。

如果有人感兴趣，我可以提供一些代码。

# c# - 目录刷新时遇到错误，未使用新的 dll

> ID：14808762
> 
> 赞同：6
> 
> 时间：2013-02-11T08:58:05.660
> 
> 标签：c#, .net, mef

我正在尝试使用 mef 创建一个 POC，我需要在所有准备就绪的项目中动态加载 dll，为此我创建了一个控制台应用程序项目和一个类库

项目 。

控制台应用程序项目的代码如下 -

```
namespace MefProjectExtension
{
    class Program
    {
        DirectoryCatalog catalog = new DirectoryCatalog(@"D:\MefDll", "*.dll");

        [Import("Method1", AllowDefault = true, AllowRecomposition = true)]
        public Func<string> method1;

        static void Main(string[] args)
        {
            AppDomainSetup asp = new AppDomainSetup();
            asp.ShadowCopyFiles = "true";

            AppDomain sp = AppDomain.CreateDomain("sp",null,asp);

            string exeassembly = Assembly.GetEntryAssembly().ToString();
            BaseClass p = (BaseClass)sp.CreateInstanceAndUnwrap(exeassembly, "MefProjectExtension.BaseClass");
            p.run();
        }
    }

    public class BaseClass : MarshalByRefObject
    {
        [Import("Method1",AllowDefault=true,AllowRecomposition=true)]
        public Func<string> method1;

        DirectoryCatalog catalog = new DirectoryCatalog(@"D:\MefDll", "*.dll");

        public void run()
        {
            FileSystemWatcher sw = new FileSystemWatcher(@"D:\MefDll", "*.dll");
            sw.NotifyFilter = NotifyFilters.CreationTime | NotifyFilters.Size;
            sw.Changed += onchanged;

            CompositionContainer container = new CompositionContainer(catalog);

            container.ComposeParts(this);

            Console.WriteLine(this.method1());

            sw.EnableRaisingEvents = true;

            Console.Read();
        }

        void onchanged(object sender, FileSystemEventArgs e)
        {
            catalog.Refresh();

            Console.WriteLine(this.method1());
        }
    }
} 
```

满足导入的库项目如下所示-

```
namespace MefLibrary
{
    public interface IMethods
    {
         string Method1();  
    }

    public class CallMethods : IMethods
    {
        [Export("Method1")]
        public string Method1()
        {
            return "Third6Hello";
        }
    }
} 
```

一旦我编译库项目（MefLibrary）并将 dll 放在 D:\MefDll 位置并第一次运行控制台应用程序，我将看到输出为

**屏幕上的Third6hello**

但是现在如果我更改 method1 的实现并使其返回“third7hello”构建 MEF 库项目并在 D:\MefDll 替换，而我的控制台应用程序正在运行 onchanged 处理程序，即使在调用目录刷新后 **也会在屏幕上打印 Third6hello** 而不是**third7hello**

是否有人知道这是什么原因，如果是，请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T21:44:37.890

`DirectoryCatalog.Refresh`只会添加新的或删除现有的程序集。它不会更新程序集。一个粗略的解决方法是：

1.  将更新的程序集移动到临时文件夹。
2.  打电话`DirectoryCatalog.Refresh`。这将**删除**组件中包含的零件。
3.  将程序集移回监视文件夹
4.  打电话`DirectoryCatalog.Refresh`。这将**添加**包含在装配中的更新零件。

**笔记：**

*   为此，您的“插件”程序集必须具有**强名称**并具有**不同的版本号**( `AssemblyVersionAttribute`)。这是必需的，因为当使用实际组件移除零​​件`DirectoryCatalog.Refresh`时不会卸载。只有在卸载整个应用程序域时才能卸载程序集。因此，如果`DirectoryCatalog.Refresh`找到一个新程序集，它将`AssemblyCatalog`使用程序集文件路径创建一个。`AssemblyCatalog`然后将调用`Assembly.Load`加载程序集。但是此方法不会加载`AssemblyName.FullName`与已加载程序集相同的程序集。
*   确保我提到的步骤不会触发另一个 FileSystemWatcher.Changed 事件。例如，您可以使用[这种方法](https://stackoverflow.com/a/2780832/850119)。
*   您的程序将需要对监视文件夹具有写入权限。如果您在 %ProgramFiles% 文件夹中部署，这可能是一个问题。
*   如果您需要线程安全，您可以考虑使用`CompositionOption.IsThreadSafe`标志创建您的 CompositionContainer。

正如我所提到的，这是一种解决方法。另一种方法是下载[MEF 的源代码](https://mef.codeplex.com/SourceControl/changeset/view/703624739918#README.txt)并使用 DirectoryCatalog.cs 作为您自己的目录目录实施的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T21:19:21.747

一旦 dll 在应用程序域中加载，它就无法从该域中卸载。只能卸载整个域。因此，要实现您所追求的并不容易。可以不断扫描更改并加载新副本并重新指向调用（通过这种方式，您将在域中积累越来越多的无用程序集），但我不相信这是 MEF 开箱即用的实现. 换句话说，您观察到的行为是设计使然。

由于状态的原因，它的实现也可能很棘手并且容易出错。想象一下，您在旧 DLL 的类实例中设置了一个字段并将其分配给一个变量。然后新的dll通过。旧实例及其字段会发生什么？显然它们将保持不变，现在您在内存*中使用*了不同版本的插件。真是一团糟！

如果您对这里感兴趣，这[就是没有 Assembly.Unload 方法](http://blogs.msdn.com/b/jasonz/archive/2004/05/31/145105.aspx)的原因。和[可能的（概念）解决方法](http://msdn.microsoft.com/en-us/library/ms404279.aspx)。

# c# - 在 Windows 7 中录制时获取麦克风音量

> ID：14808763
> 
> 赞同：1
> 
> 时间：2013-02-11T08:58:15.230
> 
> 标签：c#, windows-7, winmm, mcisendstring

我正在实现一个简单的录制、播放应用程序，它可以播放和录制 WAV 文件。
要求如下：

1) Windows 7、Visual Studio 2010(或 2012)、C#
2) 录制、播放带有规格信息的 Wav 文件：samplerate 22050、mono、bitspersample 16
3) 录制时可以显示微声级

使用 1) 和 2)，我可以使用 lib (winmm.dll) 和 mciSendString()，如下所示

```
[DllImport("winmm.dll")]  
private static extern long mciSendString(string lpstrCommand, string lpstrReturnString, int uReturnLength, int hwndCallback);

// Open file to play
public void open(string file)
{
    string command = "open \"" + file + "\" type waveaudio  alias MyWav";
    mciSendString(command, null, 0, 0);
}

// Start playing
public void play()
{
    string command = "play MyWav";
    mciSendString(command, null, 0, 0);
}

// Stop playing
public void stop()
{
    string command = "stop MyWav";
    mciSendString(command, null, 0, 0);

    command = "close MyWav";
    mciSendString(command, null, 0, 0);
}

// Start recording
public void record()
{
   string command = "open new Type waveaudio Alias MyRec";
    mciSendString(command, "", 0, 0);

    command = "set capture time format ms bitspersample 16 channels 1 samplespersec 22050 alignment 4";
    mciSendString(command, "", 0, 0);

    command = "record MyRec";
    mciSendString(command, "", 0, 0);
}

// Stop recording
public void stoprec()
{
    string fileName = @"""D:\Rec1.wav""";

    string command = "stop MyRec";
    mciSendString(command, "", 0, 0);

    command = @"save MyRec " + fileName;

    Debug.WriteLine(command);
    mciSendString(command, "", 0, 0);

    command = "close MyRec";
    mciSendString(command, "", 0, 0);
} 
```

对于 3)，我还想使用 mciSendString。我找到了以下命令（状态）：

```
string command = "status MyRec level ";
long mci_ret = mciSendString(command, "", 0, 0); 
```

但我不知道从上面的命令中获取音量，谁能告诉我方法？

参考：来自 mciSendString() 的状态命令可在 Microsoft 文档中找到：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd798683%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd798683%28v=vs.85%29.aspx)
它说：级别：返回当前 PCM 音频样本值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:01:17.260

我通过打开两个设备来监控级别，一个用于录制/播放（track1），一个用于获取级别（waveLevel）。以下是在foxpro中。

```
* OPEN WAVE DEVICE FOR LEVEL READINGS 
= mciSendString("open new type waveaudio alias waveLevel", '0&', 0, 0) 

* START RECORDING
= mciSendString("open new type waveaudio alias track1", '0&', 0, 0) 
```

然后要获得 track1 的级别，我使用 waveLevel 设备

```
= mciSendString("status waveLevel level", @cBuff, LEN(cBuff) ,0) 
```

# android - Android tabs+swipe 片段重绘

> ID：14808764
> 
> 赞同：1
> 
> 时间：2013-02-11T08:58:19.043
> 
> 标签：android, fragment, gestures, redraw

我正在为 Tabs+Swipe 应用程序使用 android 功能。它生成了我的大部分代码。我有 MainActivity、SectionsPagerAdapter 和 Fragment 类。在这个应用程序中，我将有 2 个选项卡，因此我为每个选项卡创建了 2 个不同的片段类。但是在第一个选项卡上，我需要一个带有微调器的片段和一些带有微调器下方值的表格。我需要的是，在微调器项目选择中，我想重绘相同类型的片段，但表中只有不同的值。

此外，我不能将布局 xml 文件用于片段，因为该表并不总是具有相同数量的列或行。我需要以编程方式设计它的视图。我也不能使用嵌套片段，因为我需要我的应用程序用于较低版本的 Android ......并且嵌套片段适用于最新的 4.2 版本。

我已经根据我在这里找到的类似问题编写了一些代码，但我仍然有问题。这是我的片段类，重点是微调器选择侦听器。

```
 public class CurrencyListFragment extends Fragment {
    ...

        @Override
            public View onCreateView(LayoutInflater inflater, final ViewGroup container,
                    Bundle savedInstanceState) {
        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

    ...

                @Override
                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
    ...
                selection = spinner.getSelectedItemPosition();
FragmentTransaction trans = getFragmentManager().beginTransaction();
                        Fragment fragment = new CurrencyListFragment(selection);
                        fragment.setArguments(result);
                        trans.replace(container.getId(), fragment);
                        trans.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                        trans.addToBackStack(null);
                        trans.commit();
                    }

                }
    } 
```

我跳过了部分代码。

我不明白为什么这不起作用...我没有收到任何错误，但不是在第一个选项卡上用不同的表值重绘相同的片段，而是得到空白片段....上面什么都没有。

有没有可能的解决方案？

# java - 如何将用户名和密码从 android 发送到 ASP 页面

> ID：14808768
> 
> 赞同：0
> 
> 时间：2013-02-11T08:58:47.497
> 
> 标签：java, android, asp-classic, send

我正在尝试为我的 uni 门户创建一个 android 应用程序。令人惊讶的是，麦格理大学没有。目前，我已经创建了一个简单的登录 UI、一个学生/员工 ID 文本框字段和一个密码字段。和一个“登录”按钮

我知道如何从两个文本字段中检索文本，但是如何将用户 ID 和密码发送到 asp 服务器页面并在检索中检索下一页并显示它。

该页面是[https://portal.sibt.nsw.edu.au/Default.asp](https://portal.sibt.nsw.edu.au/Default.asp)

我正在使用 http post 发送登录凭据。

```
HttpClient client = new DefaultHttpClient();  
HttpPost post = new HttpPost("https://portal.sibt.nsw.edu.au/Default.asp"); 
```

每次尝试执行此命令时，AVD 都会崩溃

```
HttpResponse response = client.execute(post); 
```

注意：这是在 try/catch() 块中。

我不知道为什么它每次都在那里崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:03:04.393

```
this is how you can send username and password and recieve the response

public class callASPX
{
        public static final String URL = "http://localhost:8080/appName/actionOrServletTobeCalled";
    public static void main(String args[])
    {
        callASPXobj = new callASPX();
        String username = "username";
        String password = "password";
        obj.getOutputFromUrl(URL+"?username="+username+"&password="+password);

    }
    public String getOutputFromUrl(String url) 
    {
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response;
        StringBuilder builder= new StringBuilder();
        BufferedReader in = new BufferedReader(new                            InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        char[] buf = new char[8000];
        int l = 0;
            while (l >= 0) 
            {
                builder.append(buf, 0, l);
                l = in.read(buf);
            }
        return builder.toString();
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:10:02.657

您需要将[HttpPost](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)发送到[https://portal.sibt.nsw.edu.au/Default.asp?Summit=OK](https://portal.sibt.nsw.edu.au/Default.asp?Summit=OK)。
您可以通过以下方式发现要发送的参数：
- 使用谷歌浏览器打开您的网站
- 按 F12
- 选择“网络”
- 不要忘记选中“保留登录导航”

祝你好运！

# c# - 将 sql db 中的值存储为 .txt 文件

> ID：14808770
> 
> 赞同：0
> 
> 时间：2013-02-11T08:59:02.677
> 
> 标签：c#, asp.net, sql, wsdl

我正在使用 Web 服务开发一个简单的域应用程序。我使用**whois wsdl**获取域信息。这很好，但我正在获取整个数据问题是我只需要从该服务器中选择的数据，如域名、创建日期、过期日期。

在我的设计中，当在 textbox1 中输入任何域名时，我制作了两个文本框，如果它存在于 whois 服务器中，它必须在 textbox2 中显示选择性信息。

我试图将这些值存储在一个文本文件中并将其名称保存在 db 中，但它对我不起作用。有什么想法的朋友

这是我的编码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

 public partial class do01 : System.Web.UI.Page
 {
   protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{
    string st = TextBox1.Text;
    wservices.whois myservices = new wservices.whois();
    TextBox2.Text = myservices.GetWhoIS(st);
}
} 
```

**这是我的截图**

![截屏](../Images/05a063ad131282dd78f19279e4b12d36.png)

如果您有任何想法，请在这里拍摄朋友...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:10:25.053

**注意：请参阅下面的更新以更改答案**

我假设您想要的是将这些信息作为列中的纯文本的表格。

基本表定义

```
 CREATE TABLE WhoIsData
 (
     Id INT PRIMARY KEY IDENTITY(1,1),
     WhoIsData NVARCHAR(MAX)
 ) 
```

我不知道是什么`st`（这是您发送到服务的数据，如果您也想存储它，它可能在您的表中很有用）。

C# 代码（大致 - 我没有测试过）

```
string st = TextBox1.Text;
wservices.whois myservices = new wservices.whois();
string textData = myservices.GetWhoIS(st);
TextBox2.Text = textData;
using(SqlConnection conn = new SqlConnection(connectionString));
{
  SqlCommand cmd = new SqlCommand("INSERT INTO WhoIsData(WhoIsData) VALUES(@text);");
  cmd.Connection = conn;
  cmd.Parameters.AddWithValue("@text", textData);
  conn.Open();
  cmd.ExecuteNonQuery();
} 
```

我会在现实生活中将 SQL 调用与您的用户界面类分开。但是为了这个例子，我把它们放在一起。另外，我还没有重命名您的文本框，尽管它们`TextBox1`的`TextBox2`名字真的很糟糕。

**更新**

好的-您想将内容存储在文本文件中，但我假设您想在数据库中存储指向文本文件的链接（您不是很具体）

表定义：

```
CREATE TABLE WhoIsData
(
    Id INT PRIMARY KEY IDENTITY(1,1),
    DomainName NVARCHAR(256),
    WhoIsFile NVARCHAR(256)
) 
```

C# 代码：

```
string st = TextBox1.Text;
wservices.whois myservices = new wservices.whois();
string textData = myservices.GetWhoIS(st);
TextBox2.Text = textData;

string fileName = Guid.NewGuid().ToString();
using(var file = File.OpenWrite(fileName))
{
    file.Write(textData);
}

using(SqlConnection conn = new SqlConnection(connectionString));
{
  SqlCommand cmd = new SqlCommand("INSERT INTO WhoIsData(DomainName, WhoIsFile) VALUES(@domainName, @fileName);");
  cmd.Connection = conn;
  cmd.Parameters.AddWithValue("@fileName", fileName);
  cmd.Parameters.AddWithValue("@domainName", domainName);
  conn.Open();
  cmd.ExecuteNonQuery();
} 
```

同样，我没有对此进行测试，但这大致是您想要做的。此外，您需要提供一种生成文件名的机制，我刚刚使用了一个 guid，因为它几乎可以保证唯一性。

# javascript - 选择要隐藏的所有子元素，但不会在单击时取消隐藏所有元素

> ID：14808772
> 
> 赞同：1
> 
> 时间：2013-02-11T08:59:11.273
> 
> 标签：javascript, jquery, html, css, accordion

我正在按照 css-tricks tut [here](http://css-tricks.com/snippets/jquery/simple-jquery-accordion/)制作一个 jquery 手风琴。我稍微修改了代码，然后选择了父元素中的所有元素并将其隐藏。单击它会显示`dd`标签，但不会显示`ul`或`h3`标签。我觉得这与 JS 部分第 6 行或第 7 行的代码有关，但我对 JS/jQuery 的理解不够深入，无法知道原因。任何帮助将不胜感激。

示例：http: [//jsfiddle.net/undeE/](http://jsfiddle.net/undeE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:01:58.213

`next`只选择被选元素的下一个兄弟，你可以使用`nextUntil`方法来代替。

```
var $target = $this.parent().nextUntil('dt'); 
```

[http://jsfiddle.net/bDdCH/](http://jsfiddle.net/bDdCH/)

但是，如果您用另一个元素（如 div 元素）包装目标元素，`next`则将按预期工作。

# android - Robotium：如何在 Activity 启动之前更新首选项？

> ID：14808778
> 
> 赞同：0
> 
> 时间：2013-02-11T08:59:24.557
> 
> 标签：android, testing, sharedpreferences, robotium, instrumentation

我的课堂上有几种测试方法。对于我的一项测试，我需要在测试开始之前更新应用程序首选项，即在开始`Activity`测试之前。我正在使用 Robotium lib 进行测试，所以我的测试类是从`ActivityInstrumentationTestCase2`. 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:06:19.930

为此，您需要一个上下文，只要您有可用的仪器，这很容易获得。这意味着您不能在测试类构造函数中执行此操作，但可以在 setup 方法中执行此操作。

```
Context context = getInstrumentation().getTargetContext(); 
```

以上将为您提供被测应用程序的上下文。有了这个参考，你可以对共享偏好做任何事情，你可以在你的应用程序中正常做，例如：

```
final SharedPreferences.Editor preferencesEditor = PreferenceManager.getDefaultSharedPreferences(context).edit(); 
```

然后执行您想要的任何编辑，然后按如下方式提交：

```
preferencesEditor.commit(); 
```

# php - 是否在应用程序中使用 iframe

> ID：14808782
> 
> 赞同：2
> 
> 时间：2013-02-11T08:59:29.293
> 
> 标签：php, websocket, phpwebsocket

我正在创建一个将 Web 套接字用于通知系统的应用程序。将应用程序放在 iframe 中是否更好，并且父级中的 Web Sockets 不会在每次加载页面时都没有新的连接？或者也许它应该重新连接？

你怎么认为？

如果有人在 PHP 中有任何其他方式来获得类似推送的通知，而无需每 10 秒发送一次 AJAX 请求，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:36:07.263

这是您描述的选项之一。

该选项的问题是不会直接控制该内部 iframe 的内容，并且您需要在 iframe 的父级之间实现推送消息窗口通信，以便能够更改 iframe src 属性，以防有人会刷新父页面，iframe 应该刷新到实际状态，而不是初始页面。
第二个问题，根本不会有 SEO。所以你的页面不会被搜索引擎机器人抓取。如果 SEO 对您的应用程序很重要 - 那么这不是一个选择。在 WebSockets 中，如果您使用会话，重要的是使会话可用于正常的 PHP 脚本和 WebSockets 逻辑，以保持对自身数据的一致访问。PHP 将使它根本不是一件容易的事。

您也可以考虑 Long Pull 技术，因为它允许打开一个 AJAX 请求然后获取响应，并且此请求可以持续一段时间但最终会关闭并且必须在客户端重新打开。

另一种选择是查看实际的应用程序架构，并考虑单页应用程序。它也有缺点和优点。
好处是用户体验会更高。响应时间以及您将加载更少的内容和数据。
优点是它需要在 javascript 的前端进行大量开发。还有两条主要路线可以让您进行单页应用程序。一致和不一致。在第一种情况下，您需要确保您的后端将在刷新或仅导航到特定链接时服务器静态 html，就像您的单页应用程序使用 java-script 生成的方式一样。然后它解决了 SEO 的问题。虽然方法不一致，但纯粹是在 javascript（前端）上，并且会遇到 SEO 问题。

WebSockets 通常与单页应用程序一起使用，例如 Facebook 聊天就是一个很好的例子。或在您使用 Gmail 帐户时使用 Google Talk。它们不适用于经常刷新的页面，因为握手过程比正常的 HTTP 请求要重一些。

# c++ - 为 RAII 包装 C 分配

> ID：14808783
> 
> 赞同：7
> 
> 时间：2013-02-11T08:59:41.960
> 
> 标签：c++, c++11, smart-pointers

我从库中获得了这些普通的 C 函数：

```
struct SAlloc;
SAlloc *new_salloc();
void   free_salloc(SAlloc *s); 
```

有什么方法可以在 C++ 中将其包装为智能指针（std::unique_ptr）或 RAII 包装器？

我主要对标准库的可能性感到好奇，而无需创建自己的包装器/类。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T09:01:47.527

是的，您可以为此重用 unique_ptr。只需制作一个自定义删除器。

```
struct salloc_deleter {
    void operator()(SAlloc* s) const {
        free_salloc(s); // what the heck is the return value for?
    }
}

using salloc_ptr = std::unique_ptr<SAlloc, salloc_deleter>; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T09:25:11.823

我喜欢 R. Martinho Fernandes 的回答，但这里有一个更短（但效率更低）的替代方案：

```
auto my_alloc = std::shared_ptr<SAlloc>(new_salloc(), free_salloc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:41:59.427

> 有什么方法可以在 C++ 中将它包装到智能指针 ( `std::unique_ptr`) 或 RAII 包装器中？

是的。您在这里需要一个工厂函数，它创建正确初始化智能指针的对象（并确保您始终正确构造指针实例）：

```
std::shared_ptr<SAlloc> make_shared_salloc()
{
    return std::shared_ptr<SAlloc>(new_salloc(), free_salloc);
}

// Note: this doesn't work (see comment from @R.MartinhoFernandes below)
std::unique_ptr<SAlloc> make_unique_salloc()
{
    return std::unique_ptr<SAlloc>(new_salloc(), free_salloc);
} 
```

您可以将调用这些函数的结果分配给其他智能指针（根据需要），这些指针将被正确删除。

编辑：或者，您可以`std::make_shared`针对您的 SAlloc 进行详细说明。

编辑 2：第二个函数 ( `make_unique_salloc`) 无法编译。需要实现一个替代的删除器函子来支持实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T12:50:32.887

另一种变化：

```
#include <memory>

struct SAlloc {
  int x;
};
SAlloc *new_salloc() { return new SAlloc(); }
void   free_salloc(SAlloc *s) { delete s; }

struct salloc_freer {
  void operator()(SAlloc* s) const { free_salloc(s); }
};
typedef std::unique_ptr<SAlloc, salloc_freer> unique_salloc;
template<typename... Args>
unique_salloc make_salloc(Args&&... args) {
  auto retval = unique_salloc( new_salloc() );
  if(retval) {
    *retval = SAlloc{std::forward<Args>(args)...};
  }
  return retval;
}

int main() {
   unique_salloc u = make_salloc(7);
} 
```

我包含了一个主体`SAlloc`和各种功能，使其成为[http://sscce.org/——](http://sscce.org/)这些的实现并不重要。

只要您可以看到 的成员`SAlloc`，上面的内容就可以让您在创建 的同时构造它们，就像在初始化列表中一样`SAlloc`，如果您不传入任何参数，它会将整个`SAlloc` `struct`.

# c - C中图像的负变换

> ID：14808784
> 
> 赞同：2
> 
> 时间：2013-02-11T08:59:42.903
> 
> 标签：c, image-processing, bmp

```
#include < stdio.h >
#include < conio.h >
#include < stdlib.h >
#include < process.h >
#include < string.h >
#include < math.h >

int count = 0;

typedef struct bitmap24 {
    unsigned char header[54];
    unsigned char * pixels;
}BMP;

void readBMP(char * filename) {
    int i;
    FILE * f = fopen(filename, "rb");
    FILE * f1 = fopen("save.bmp", "wb");
    FILE * pixelVals = fopen("vals.dat", "w");
    unsigned char bmppad[3] = {
        0,
        0,
        0
    };
    if (!f) {
        printf("Could not read file!\n");
        exit(0);
    }
    unsigned char info[54];
    fread(info, sizeof(unsigned char), 54, f);
    int width = * (int * ) & info[18];
    int height = * (int * ) & info[22];

    unsigned char * img = NULL;
    if (img)
        free(img);
    img = (unsigned char * ) malloc(3 * width * height);
    memset(img, 0, sizeof(img));

    fwrite(info, sizeof(unsigned char), 54, f1);

    int length = width * height;
    unsigned long int image[10000][3];

    for (i = 0; i < length; i++) {
        image[i][2] = getc(f); // blue
        image[i][1] = getc(f); // green
        image[i][0] = getc(f); // red

        img[count] = 255 - (unsigned char) image[i][0];
        //img[count] = 10*(unsigned char)log10((double)image[i][0]+1);
        count += 1;
        img[count] = 255 - (unsigned char) image[i][2];
        //img[count] = 10*(unsigned char)log10((double)image[i][3]+1);
        count += 1;
        img[count] = 255 - (unsigned char) image[i][2];
        //img[count] = 10*(unsigned char)log10((double)image[i][2]+1);
        count += 1;

        printf("pixel %d : [%d,%d,%d]\n", i + 1, image[i][0], image[i][4], image[i][2]);
        fprintf(pixelVals, "pixel %d : [%d,%d,%d]\n", i + 1, image[i][0], image[i][5], image[i][2]);
    }

    for (i = height - 1; i >= 0; i--) {
        fwrite(img + (width * (height - i - 1) * 3), 3, width, f1);
        fwrite(bmppad, 1, (4 - (width * 3) % 4) % 4, f1);
    }

    fclose(f);
    fclose(f1);
    fclose(pixelVals);
}

void main() {
    char * fileName = "bitgray.bmp";
    readBMP(fileName);
    getch();
} 
```

保存图像时我没有得到正确的结果。我正在使用尺寸为 114 X 81 的 24 位 bmp 图像。图像最初是要倒置的，但该问题已解决。但我仍然得到一个倾斜的图像。我知道问题出在最后一个“for”循环中。我应该如何解决？

![原始图像](../Images/d0eee202d75e3747710e239c5b63c4a1.png)

![负面形象](../Images/fd21e59cb3ec2351975e76cc60c027ae.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:08:23.190

位图扫描线填充到 4 字节边界。因此，您需要添加额外的两个字节，以便该行可以被 4 整除。目前，`114 * 3 = 342`每行都有字节的像素数据。下一个能被 4 整除的数是`344`。

因此，在读取每一行结束时，只需读取额外的两个字节并丢弃它们。

通常，您可以像这样计算出额外的字节：

```
extra = (alignment - ((width * bytesPerPixel) % alignment)) % alignment; 
```

在这种情况下`alignment`是 4。

从内存中，标头中有一个字段应该包含完整扫描宽度 ( `width * bytesPerPixel + extra`) 的值，但最好不要期望它是正确的，因为您可以轻松计算它。

保存位图时还必须注意此填充规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:06:41.910

你的第二个*for*循环看起来很奇怪。我认为应该是：

```
for(i = 0; i < height;  i++) {...} 
```

或者：

```
for(i = height-1; i >= 0;  i--) {...} 
```

# selenium - 元素存在但隐藏硒检查

> ID：14808787
> 
> 赞同：1
> 
> 时间：2013-02-11T08:59:59.553
> 
> 标签：selenium, selenium-ide

如何使用 selenium IDE 检查 HTML 元素是否隐藏（显示：无：）？

在我的情况下，html 是一个按钮，如果元素被隐藏，我希望 selenium 通知我。

如果我使用 verifyElementPresent，selenium 会找到该元素，尽管它是隐藏的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T15:05:39.360

您可以使用该[`storeVisible`](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html#storeVisible)命令的任何派生。

最值得注意的是，`assertVisible`过去`waitForVisible`对我很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T05:03:22.213

如果要检查 HTML 按钮是否隐藏，只需使用命令 verifyvisible

命令：验证可见

目标：按钮的id

如果您的按钮可见，则不会引发错误，但如果不可见，则会引发错误

谢谢你。

# c++ - QT + winId() - 确定句柄类型

> ID：14808797
> 
> 赞同：0
> 
> 时间：2013-02-11T09:00:31.947
> 
> 标签：c++, cocoa, qt, macos-carbon

有没有办法在运行时或（最好）通过使用预处理器宏来确定返回`QWidget::winId()`的句柄是 Cocoa 窗口的句柄还是 Carbon 窗口的句柄？

Windows 很明显，但我对 Mac 更感兴趣。我正在使用的特定库已经知道如何使用各种句柄，但在使用之前它需要知道句柄是*哪种类型*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:28:09.250

在 QtCore/qconfig.h 中有预处理器定义。

`QT_MAC_USE_COCOA`在互联网上搜索。

# java - 哈希算法总是在最后返回 \r\n

> ID：14808802
> 
> 赞同：0
> 
> 时间：2013-02-11T09:00:48.760
> 
> 标签：java, hash, base64, md5, sha1

我正在使用 MessageDigest 类来获取使用 SHA1 或 MD5 的字符串的哈希值。这是使用 MD5 的示例代码

```
private static String applyHashToKey(String key){
        byte[] hashkey = null;
        MessageDigest md = null;
        try {
            md = MessageDigest.getInstance("MD5");
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            hashkey = md.digest(new BASE64Decoder().decodeBuffer(key));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String result = new BASE64Encoder().encodeBuffer(hashkey);
        return result;
    } 
```

现在我注意到的是，要么我使用 SHA1，要么我使用 MD5 **，我从这个函数返回的哈希字符串最后总是有一个 \r\n。**

例如：Y60SedKVyEkKH4LKdikpc+zu5+0=\r\n

关于发生了什么的任何想法。这可以吗，还是我做错了什么并自己介绍了\r\n？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:08:12.193

> 现在我注意到的是，要么我使用 SHA1，要么我使用 MD5，我从这个函数返回的哈希字符串最后总是有一个 \r\n。

*显然*Base64 编码器提供了线路终结器。否则它将对其进行编码。

# ajax - onchange 事件不适用于 jQuery 自动完成组合框

> ID：14808804
> 
> 赞同：0
> 
> 时间：2013-02-11T09:01:04.090
> 
> 标签：ajax, jsp, combobox, jquery-ui-autocomplete

我正在使用 ajax 从数据库中获取详细信息，如本[示例](http://www.roseindia.net/jsp/comboSelect.shtml)中所示，我使用 jquery 自动完成组合，如本[示例](http://jqueryui.com/resources/demos/autocomplete/combobox.html)中所示。

组合框在**没有自动完成的情况下**工作正常。当自动完成处于活动状态时，不会在`onChange Event`组合框中生成详细信息。

```
<select name="sitemCode" id="itemCode" onchange="showItem(this.value)">  
<option value = " 0 ">Select Item Code</option> 
```

我怎样才能使它与自动完成 jquery 一起工作？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:15:02.710

你试过这样吗？？

```
 $('#itemCode').change(function() {
    var itemCode= $("#itemCode option:selected").text();
    showItem(itemCode);
    }); 
```

# android - 使用本机代码的 android 语音识别

> ID：14808806
> 
> 赞同：1
> 
> 时间：2013-02-11T09:01:10.393
> 
> 标签：android, android-ndk, speech-recognition, native-code

有没有办法在原生代码中访问 Android 中的语音识别？

从我提到的材料中，我了解到 Android 要么提供一个识别器意图，必须触发它以检索识别结果，要么使用一个 RecognitionListener。然而，这些都没有提供对输入缓冲区的访问，可以在将其发送到谷歌服务器之前对其进行处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-14T11:16:49.900

您可以通过 java 本机接口 (jni) 使用它。jni 允许在 java 和 c++ 之间进行通信，反之亦然。但这是一个耗时的过程，请三思而后行

# c# - C#中的发现

> ID：14808809
> 
> 赞同：1
> 
> 时间：2013-02-11T09:01:23.917
> 
> 标签：c#, .net, discovery

我必须为内部解决方案实施一些发现。

我们有两种软件：

*   *服务器*：他们管理很多硬件设备，可以访问一些数据（.Net远程处理）
*   *客户端*：他们可以显示一个或多个服务器的数据（图表、统计数据，...）

目前我们正在客户端上手动设置IP。

我们想实现一个*发现*。

我们有以下要求：

*   它必须在 c# 中可用
*   当服务器启动时，它必须非常快速地显示为可用
*   关机的时候一样
*   如果服务器没有以干净的方式停止，我们可以有一种方法来检测它（不需要非常快，可以每 10-15 分钟完成一次）。
*   它可以给我一些信息（服务器版本，要使用的端口，...）
*   我们有多个网卡的客户端计算机，我们必须在每个网卡上发现服务器

你有一个协议，一个图书馆，......建议吗？

我们尝试了 UPnP，但似乎**C#**中没有满足我们要求的良好服务器 + 客户端实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T09:12:08.687

使用来自发现应用程序（客户端）的 UDP 广播：

```
int broadcastPort = //something
byte[] msg = //something

//Cycle this for all IP adresses
IPAddress broadcastIp = //Broadcast address for this net
IPEndPoint destinationEndpoint = new IPEndPoint(broadcastIp, broadcastPort);
Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.Broadcast, 1);
sock.SendTo(msg, broadcastEndpoint); 
```

并让发现的应用程序（服务器）回答，以接收回答使用`UdpClient.Receive()`，它为您提供回答站的 IP。

# javascript - 在标记中使用脚本之前应该使用 Head.js 还是只是缩小脚本？

> ID：14808811
> 
> 赞同：1
> 
> 时间：2013-02-11T09:01:31.613
> 
> 标签：javascript, jquery, html, optimization, head.js

我有优化问题——我的网站使用了 2 个（相当大的）javascript 资源：

1.  application.js（最小化 jquery、jquery-ui、underscore-js 和一些共享脚本，总共 120KB）
2.  特定于控制器的文件（页面 + 交互所需的一些模块，总共 4KB）

我在视图中有一些脚本可以使用 JavaScript 格式化/转换标记（依赖于 jQuery 和我的控制器特定的 JS 代码），所以我需要等待 $(document).ready 或 head.ready 并且它是网站不可见以防止无样式内容的闪烁:(

现在我的问题来了：我应该使用 head.js 还是只使用“之前”脚本？在这种情况下，有什么聪明的方法可以加快页面加载时间吗？

更新：这是代码的一部分（完整代码请参见 vsio.com，登陆页面）：

```
<html>
  <head>
    ... usual stuff
    <link (css stuff) />
    <script src="head.js"></script>
    <script>
      // Here some global variables are set like cache keys, actual locale code etc., not dependable on jQuery or any other JS code from the JS assets
    </script>
  </head>

  <body>
    ... page content

    <div id="search">!-- here some code with the "display: none" style to prevent flash of unstyled content</div>
    <script>
      // Here is code that positions and processes some styles and adds some interactions to the #search div
      Application.Position.In.Center($(#search), $(document));
    </script>

    ... more page content

    ... another "display: none" div and accompanying script

    ... rest of the page content

    <script type="text/javascript">head.js( { 'application': 'application.js' }, { 'landing': 'landing.js' } );</script>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:03:27.237

首先问自己这个问题：当用户访问我的页面时，我真的需要加载所有这些 javascript 吗？

首次加载网站时，您实际上只需要自动完成功能，加载时不需要其他功能。因此，您可以采用单独的方法。我的建议如下：

*   在没有任何 javascript 功能的情况下构建此页面，然后使用 javascript 对其进行增强，摆脱内联样式和脚本。
*   完成此操作后，加载您实际需要的脚本，您可以在头部或正文结束之前执行此操作
*   为 Jquery、jquery-ui、下划线和其他库使用 CDN。如果用户已经从其他网站加载了这些库，您将获得性能奖励。
*   最后，已经异步加载了稍后需要的javascript，所以用户在点击比较按钮时已经有了脚本。

小调整：

*   使用 ySlow 之类的工具或您喜欢的浏览器中的网络图来查找任何瓶颈。看起来 gzipping 未启用，请尝试执行此操作。
*   您是否真的需要在头部加载 facebook/google/twitter/third-party 的东西，或者可以在加载页面时完成？
*   服务器是否尽可能快？看起来几乎需要半秒钟才能获得 HTML。

我希望我能帮助你一点，祝性能调整好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:04:01.943

我认为，在页面底部放置一个加载脚本（作为正文中的最后一个标签）。那个 javascript 它不会像现在一样阻塞绘图页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:36:13.453

您可以使用固定样式放置覆盖所有页面的遮罩层，然后在加载过程完成时隐藏或销毁它。这样就不需要隐藏每个内容，而是用掩码 div 覆盖

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T14:24:13.543

看到了您页面的视图源。

1.  有一些内联脚本可以阻止渲染。比如这个

> Application.i18n = {“比较”：{“off_ratio”：

更多在这里。[http://calendar.perfplanet.com/2012/deciphering-the-critical-rendering-path/](http://calendar.perfplanet.com/2012/deciphering-the-critical-rendering-path/)

快速方法：将它们移动到正文标签的末尾。最佳方式：它们应该作为外部脚本加载 - 具有非常好的缓存头。可能是，您这样做是因为 - 您必须根据用户区域设置加载这些消息 - 您可以在构建过程中为每个区域设置创建单独的 JS 文件 - 它们可以链接/加载为具有良好缓存标头的外部 JS 文件

另一个原因，为什么您可能需要内联脚本 - 记下初始加载时间。这不是必需的 - 因为现代浏览器为我们提供了性能时间。

[http://www.html5rocks.com/en/tutorials/webperformance/basics/](http://www.html5rocks.com/en/tutorials/webperformance/basics/)

将其作为外部脚本文件移动 - 也将有利于您的站点安全 - 以防万一，如果您将尝试 CSP。

[http://updates.html5rocks.com/2012/11/Content-Security-Policy-1-0-is-officially-awesome](http://updates.html5rocks.com/2012/11/Content-Security-Policy-1-0-is-officially-awesome)。

1.  延迟/异步属性。

ga.js 设置了异步属性 - 但其他 JS 文件可以尝试使用 defer 属性。此外，作为一般经验法则，尽可能延迟加载资源，仅在需要时加载。

1.  window.onload - $.ready 使用 $.ready 开始执行脚本总是比 window.onload 更好。因为，window.onload 仅在所有图像、内部 iframe 被加载后才会触发。

以下链接可能有用。

[https://developers.google.com/speed/](https://developers.google.com/speed/)

渐进式 JPEG 发布在 [http://calendar.perfplanet.com/2012/](http://calendar.perfplanet.com/2012/)

[http://blog.chriszacharias.com/page-weight-matters](http://blog.chriszacharias.com/page-weight-matters)

[http://www.igvita.com/2013/01/15/faster-websites-crash-course-on-web-performance/](http://www.igvita.com/2013/01/15/faster-websites-crash-course-on-web-performance/)

许多进一步的优化是可能的。祝一切顺利。

# javascript - 使用 coredova 和 jQuery 的 .js 文件时，脚本标签的顺序是什么？

> ID：14808813
> 
> 赞同：-2
> 
> 时间：2013-02-11T09:01:32.387
> 
> 标签：javascript, android, cordova

```
<!-- Libraries JS files Start-->
<script src="jquery.mobile/jquery-1.8.3.min.js"></script>
     <script src="jquery.mobile/custom-scripting.js"></script>
<script src="jquery.mobile/jquery.mobile-1.3.0-rc.1.min.js"></script>
<script type="text/javascript" src="javascripts/libs/prototype.js"></script>
<script type="text/javascript" src="javascripts/libs/cordova-2.2.0.js"></script>    
<script type="text/javascript" src="javascripts/libs/googleCharts.js"></script>
<script type="text/javascript">
      google.load('visualization', '1', {'packages':['corechart']});
</script> 
```

当我使用它时，它不会显示图表并给出数据表错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:53:55.813

jQuery mobile 的可能`custom-scripting.js`首先需要核心脚本，所以将顺序更改为：

```
<script src="jquery.mobile/jquery-1.8.3.min.js"></script>
<script src="jquery.mobile/jquery.mobile-1.3.0-rc.1.min.js"></script>
<script src="jquery.mobile/custom-scripting.js"></script> 
```

# websphere - 使用 maven 3 在 Websphere 8.5 上部署 Web 应用程序

> ID：14808814
> 
> 赞同：10
> 
> 时间：2013-02-11T09:01:36.980
> 
> 标签：websphere, maven-3

我正在尝试使用 JSF 从现有的 Web 应用程序创建一个 Maven 项目。该项目应部署在 WebSphere 8.5 上。

由于我是 Web Sphere 的新手，所以不知道如何构建“ear”模块，以便在 Web Sphere 8.5 上部署。

有谁知道，我在哪里可以找到有关使用 Maven 3.0.3 在 WebSphere 8.5 上部署 Web 应用程序的更多信息？

谢谢你的期待，莫森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T15:20:17.437

我从未使用过 WebSphere Application Server 8.5；但在我使用 IBM WAS 6.1 的日子里，[WAS6 Maven 插件](http://mojo.codehaus.org/was6-maven-plugin/)运行良好（似乎[它也适用于 WAS7](https://stackoverflow.com/questions/3918407/will-the-was6-plugin-for-maven-work-with-was-7)）。这是插件站点的一个 POM 片段，它允许自动 EAR 部署：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>was6-maven-plugin</artifactId>
  <version>1.2</version>
  <executions>
    <execution>
      <id>integration-test</id>
      <phase>integration-test</phase>
      <goals>
        <goal>installApp</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <wasHome>${was61home}</wasHome>
    <host>deploymentmanager.your.domain</host>
    <username>admin</username>
    <password>adminpassword</password>
    <targetCluster>nameOfCluster</targetCluster>
    <profileName>Dmgr01</profileName>
    <conntype>SOAP</conntype>
    <port>8879</port>
    <verbose>true</verbose>
    <updateExisting>false</updateExisting>
  </configuration>
</plugin> 
```

该插件用于部署和其他管理任务，对于 EAR 生成，您可以使用[Maven EAR 插件](http://maven.apache.org/plugins/maven-ear-plugin/)，如 20InchMovement 答案中所述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-16T08:19:54.607

希望这会有所帮助：

```
<plugin>
    <groupId>com.orctom.mojo</groupId>
    <artifactId>was-maven-plugin</artifactId>
    <version>1.0.8</version>
    <executions>
        <execution>
            <id>deploy</id>
            <phase>install</phase>
            <goals>
                <goal>deploy</goal>
            </goals>
            <configuration>
                <wasHome>${env.WAS_HOME}</wasHome>
                <applicationName>${project.build.finalName}</applicationName>
                <host>${local or remote address}</host>
                <server>server01</server>
                <node>node01</node>
                <virtualHost>default_host</virtualHost>
                <verbose>true</verbose>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

来自[https://github.com/orctom/was-maven-plugin](https://github.com/orctom/was-maven-plugin)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T13:40:34.157

为了打包 *.ear，您不需要 Websphere。这可以通过 Maven 本身来完成。

```
pom.xml:
<project>
...
<artifactId>YourApp</
<packaging>ear</packaging>
...
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ear-plugin</artifactId>
                <configuration>
                    <modules>
                        <jarModule>
                            <groupId>${project.parent.groupId}</groupId>
                            <artifactId>configurationApp</artifactId>
                        </jarModule>
                        <ejbModule>
                            <groupId>${project.parent.groupId}</groupId>
                            <artifactId>AnEjbModule</artifactId>
                        </ejbModule>
                    </modules>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>
...
</project> 
```

然后你添加你的依赖项。在命令行上转到您的项目并运行 mvn package。由于 pom.xml 中定义的包，将创建 ear，并且可以在 YourApp/target 目录中找到它。

在 websphere 管理控制台上，您可以简单地安装 ear。登录后，转到：

```
Applications->Websphere enterprise applications and install a new application. 
```

选择您的 YourApp.ear 并通过快速路径轻松安装应用程序。要检查的端口可能是

```
yourServerName:9080/YourApp. 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T19:20:20.863

请参阅[http://code.google.com/p/websphere-maven-plugin/](http://code.google.com/p/websphere-maven-plugin/)

Websphere Maven 插件提供以下目标：

在 websphere 7 上部署 ear 启动应用程序 停止应用程序卸载需要 websphere 应用程序客户端。

# c++ - C++中的类继承

> ID：14808815
> 
> 赞同：2
> 
> 时间：2013-02-11T09:01:39.073
> 
> 标签：c++, class, inheritance, overloading

以下代码将从 B 类调用函数 F，但有人可以向我解释为什么会这样。B类的方法是否有可能重载V类的方法（因为B是从V继承的）？提前致谢。

```
#include <iostream>
using namespace std;

class V{
public: 
    void f(){ x+=2; cout << "V:"<< x;};
    int x;
};
class B: public virtual V{
public:
    void f(){ x+=3; cout << "B:"<< x;};
    int x;
};
class D: public B, virtual public V{
public:
    void g(){   x++;    f();    }
};
void main(){
    D ins;
    ins.x = 1;
    ins.g();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T09:03:48.953

`B::f()` **隐藏**方法`V::f()`，这称为**函数隐藏**。

好读：
[什么意思，警告：Derived::f(char) 隐藏 Base::f(double)？](http://www.parashift.com/c++-faq/hiding-rule.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:45:11.443

不，那里没有超载。正如上面回答的那样，B 的 f() 只是隐藏了 V 的 f()，因为 D 继承自 B 和 V，而 B 是两者中派生最多的，所以它将从 B 中获取 f()。没有必要从 V 继承 D，因为 V 已经包含在 B 中。

# ruby - Ruby：访问初始化内部方法的返回值

> ID：14808816
> 
> 赞同：-1
> 
> 时间：2013-02-11T09:01:41.473
> 
> 标签：ruby, methods

我正在尝试访问的返回值

```
 def entries
   return lang # lang is a hash
  end 
```

里面

```
def initialize
    @lang = Hash.new
    return entries
  end 
```

但它返回一个空哈希。

在代码的末尾，我有

```
@query = Book.new
@query.add('sea')
@query.include?("sea") 
```

如何获取存储值。所以我可以调用`include?`它`@query`自己。因为现在它给了我一个未定义的方法错误。

但是当我这样做的时候——

```
@query = Book.new
@query.add('sea')
@query.entries.include?("sea") 
```

它返回真。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:26:34.507

问题是 Book.new 不会返回条目。它总是返回一个书本实例。您可以覆盖新方法，但无法访问 book 实例。您最好的选择是将 include 方法委托给条目。

# exception - 如何捕捉 play.api.libs.openid.Errors$AUTH_CANCEL$ 异常？

> ID：14808819
> 
> 赞同：0
> 
> 时间：2013-02-11T09:01:46.513
> 
> 标签：exception, openid, playframework-2.1

使用带有 OpenID 的 Play Framework 2.1，如果我从 OpenID 提供者取消我的身份验证，我会收到以下异常：

```
[RuntimeException: play.api.libs.openid.Errors$AUTH_CANCEL$] 
```

这是我的代码：

```
Promise<UserInfo> userInfoPromise = OpenID.verifiedId();
UserInfo userInfo = userInfoPromise.get(); // Exception thrown here 
```

但由于它是一个运行时异常，我无法用 try/catch 捕获它，所以我坚持如何避免异常并向客户端返回比服务器错误更好的东西。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:21:22.117

Promise 是偏向成功的，对于它的所有操作，它假设它实际上包含一个值而不是一个错误。您收到异常是因为您尝试调用`get`包含未转换错误的承诺。

您想要确定 Promise 是成功还是错误，例如，您可以通过模式匹配来做到这一点。

试试这个代码：

```
AsyncResult(
      OpenID.verifiedId.extend1( _ match {
        case Redeemed(info) => Ok(info.attributes.get("email").getOrElse("no email in valid response"))
        case Thrown(throwable) => {
          Logger.error("openid callback error",throwable)
          Unauthorized
        }
      }
      )
    ) 
```

您可能想阅读更多关于未来和承诺的信息，我推荐这篇优秀的文章： [http ://danielwestheide.com/blog/2013/01/09/the-neophytes-guide-to-scala-part-8-welcome-to -the-future.html](http://danielwestheide.com/blog/2013/01/09/the-neophytes-guide-to-scala-part-8-welcome-to-the-future.html)

编辑：检查java中的文档（[http://www.playframework.com/documentation/2.1.0/JavaOpenID](http://www.playframework.com/documentation/2.1.0/JavaOpenID)）似乎你应该自己捕捉和处理异常。

> 在任何情况下，您都应该捕获异常，如果抛出异常，则将用户重定向回包含相关信息的登录页面。

像这样的东西应该可以工作：

```
public class Application extends Controller {

    public static Result index() {
        return ok("welcome");
    }

    public static Result auth() {
        Map<String, String> attributes = new HashMap<String, String>();
        attributes.put("email", "http://schema.openid.net/contact/email");
        final Promise<String> stringPromise = OpenID.redirectURL("https://www.google.com/accounts/o8/id", "http://localhost:9000/auth/callback",attributes);
        return redirect(stringPromise.get());
    }

    public static Result callback() {
        try{
            Promise<UserInfo> userInfoPromise = OpenID.verifiedId();
            final UserInfo userInfo = userInfoPromise.get();
            System.out.println("id:"+userInfo.id);
            System.out.println("email:"+userInfo.attributes.get("email"));
            return ok(userInfo.attributes.toString());
        } catch (Throwable e) {
            System.out.println(e.getMessage());
            e.printStackTrace();
            return unauthorized();
        }
    }
} 
```

# python - 如何确保它实际上是打开了串口

> ID：14808821
> 
> 赞同：1
> 
> 时间：2013-02-11T09:01:48.227
> 
> 标签：python, python-2.7, pyserial

我需要为串行设备打开一个端口，但如果它尚未打开或出现异常，它必须不断尝试打开门，直到它打开。一段时间后，Python 2.7.3 出现此错误：

> “RuntimeError：调用 Python 对象时超出最大递归深度”

你能帮助我吗？

我的代码：

```
def opendisplay():
    try:
        lcd = serial.Serial(
        port='/dev/display', 
        baudrate=9600, 
        timeout=0,
        parity=serial.PARITY_NONE,
        stopbits=serial.STOPBITS_ONE,
        bytesize=serial.EIGHTBITS
        )
    except Exception, e:
        print "Error! can't connect to display Lcd check USB-Serial \n" + str(e)
        opendisplay()   
    return lcd

dsp=opendisplay() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:21:41.967

正如 Martin/Shadow 所说，循环而不是递归：

```
def opendisplay():
    while True:
        try:
            # Try to connect
            lcd = serial.Serial(...)
            return lcd
        except Exception as e:
            # Connection failed
            print "Error! etc"
            time.sleep(1) 
```

如果您只想继续尝试一分钟，则可以`for _ in range(60)`改用

# asp.net - 在 alter table 中动态添加列名

> ID：14808826
> 
> 赞同：0
> 
> 时间：2013-02-11T09:01:58.567
> 
> 标签：asp.net, sql, alter-table

我正在开发一个 Web 应用程序，需要在其中使用 ALTER Table。这是我的代码：

```
ALTER TABLE [tablename] ADD [column-name] [Type] DEFAULT [default-value] NULL/NOT NULL 
```

现在我想通过文本框动态更改 [column-name]。我怎样才能做到这一点？此外，我在 AddWithValue 中使用了@name，但它不起作用！有谁能够帮助我？谢谢

这是我的整个代码：

```
SqlConnection sqlconn4 = new SqlConnection(ConfigurationManager.ConnectionStrings["dbConn"].ConnectionString);
                   SqlCommand sqlcomm4 = new SqlCommand("ALTER TABLE aspnet_Membership ADD @column int DEFAULT 0 NOT NULL", sqlconn4);

                    sqlcomm4.Parameters.AddWithValue("@column", TextBox1.Text);
                    sqlconn4.Open();
                    sqlcomm4.ExecuteNonQuery();
                    sqlconn4.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:07:02.007

只有动态 SQL 查询才有可能：

```
Declare @SQL VarChar(1000)

SELECT @SQL = 'ALTER TABLE my_table ADD ' + @column + ' INT'

Exec (@SQL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:31:07.420

使用[sp_rename](http://msdn.microsoft.com/en-us/library/ms188351.aspx)过程，您可以更改列名。

```
sp_RENAME 'Table_First.Name', 'NameChange' , 'COLUMN' 
```

[http://blog.sqlauthority.com/2008/08/26/sql-server-how-to-rename-a-column-name-or-table-name/](http://blog.sqlauthority.com/2008/08/26/sql-server-how-to-rename-a-column-name-or-table-name/)

```
public void AddNewColumn(string tableName, string columName, string dataType)
    {
        string commandText = String.Format("ALTER TABLE {0} ADD {1} {2} ", tableName,columName,dataType);

        using (var sqlConnection = new SqlConnection("===="))
        {
            var cmd = sqlConnection.CreateCommand();
            cmd.CommandText = commandText;

            sqlConnection.Open();
            cmd.ExecuteNonQuery();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:06:44.013

试试下面的东西..

dataTable.Columns["列名"].ColumnName = "更新的列名";

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T09:16:54.910

嗯，也许发布您的代码示例会有所帮助。例如，您的列名变量是静态变量吗？如果变量未声明为静态变量，则每次调用 Alter 表方法并通过文本框 textChanged 事件对其进行更改时，都将使用其默认值声明该变量。

另一方面，如果您当前的问题是试图让动态部分工作，您是否使用文本框的 textChanged 事件来更改列名变量？

再次提供更多信息将不胜感激。

# sql - 如何选择 SQL DB 中存在 from 和 to date 的行

> ID：14808831
> 
> 赞同：0
> 
> 时间：2013-02-11T09:02:19.667
> 
> 标签：sql, sql-server-2008, datetime, select

您好，我有一个如下所示的 SQL 表：

```
RESERVATIONROOM:

ID          NAME            FROMDATE                       TODATE      

5           Room1        2012-11-29 11:46:00.000           2012-11-29 12:45:00.000
6           Room1        2012-11-29 12:55:00.000           2012-11-29 14:20:00.000
7           Room1        2012-11-29 15:00:00.000           2012-11-29 16:42:00.000 
```

我有一个从和一个到日期，我想选择这两个日期之间的所有房间。

例子：

> 形成日期：2012-11-29 11:50:00.000
> 到日期：2012-11-29 13:46:00.000

输出应该是这样的：

> 预订室：
> 
> ```
> ID          NAME            FROMDATE                       TODATE      
> 
> 5           Room1        2012-11-29 11:46:00.000           2012-11-29 12:45:00.000
> 6           Room1        2012-11-29 12:55:00.000           2012-11-29 14:20:00.000 
> ```

这是我到目前为止所拥有的：

```
SELECT* 
FROM RESERVATIONROOM
WHERE FROMDATE BETWEEN CONVERT(DATETIME,'2012-11-29 11:50:00.000',101) AND CONVERT(DATETIME,'2012-11-29 13:46:00.000',101)
AND TODATE < CONVERT(DATETIME,'2012-11-29 13:46:00.000',101)
ORDER BY FROMDATE ASC 
```

我的 Select Statement 过滤太多，我看不到这两个日期之间的所有日期。

我错过了什么吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:06:24.333

你为什么要使用 varchars 作为日期时间？使用 sql-parameters 来避免 sql-injection 和转换问题。

假设参数已经是`datetimes`.

您可以`BETWEEN`在两列上使用两个参数：

```
SELECT *
FROM RESERVATIONROOM
WHERE @dateFrom BETWEEN FROMDATE AND TODATE
 OR   @dateTO   BETWEEN FROMDATE AND TODATE 
```

（我不确定你是否需要`AND`或`OR`在 -`Where`子句中，你想包括交叉点吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:07:10.370

抱歉转换评论，我认为这是日期时间到 varchar 转换。但是从您输入的日期开始，您给出了两个日期，并且每个房间都有两个日期。实际上令人困惑的是这些从日期到日期是什么。从您的示例输出中，您应该`or`在两个过滤器之间使用。看[这里](http://sqlfiddle.com/#!3/867e9/8)。祝你好运。

```
select * from table1
where (convert(datetime, @from, 101) between fromdate and todate)
or (convert(datetime, @to, 101) between fromdate and todate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:06:26.877

代替

`WHERE FROMDATE BETWEEN CONVERT(DATETIME,'2012-11-29 11:50:00.000',101) AND CONVERT(DATETIME,'2012-11-29 13:46:00.000',101)`

采用

`WHERE FROMDATE > CONVERT(DATETIME,'2012-11-29 11:50:00.000',101)`

# class - Grails 保存扩展类

> ID：14808834
> 
> 赞同：0
> 
> 时间：2013-02-11T09:02:39.403
> 
> 标签：class, grails, extend

如何在grails中保存类扩展？例如我有班级用户和管理员

```
class User {
    String name
    String password
}

class Administrator extends User {
    String authoritySelected
} 
```

在用户类中的示例我保存了“user1”，然后我想将 user1 从类用户更改为类管理员并更新 authoritySelected

```
def update(){
    def user1 = User.get("user1")
    user1.authoritySelected
    user1.save(flush:true)
} 
```

并得到错误：

> 没有这样的属性：authoritySelected for class:User

那么，如何在 User 类中保存 authoritySelected 并将其更改为 Administrator 类？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:57:35.843

说到语法，你写的代码没有意义。说到设计，也不是。

我可以建议你在尝试做这种事情之前学习一点 OOP 吗？:)

但是让我们面对您提交的问题。

第一个建议：不要为你的应用程序实现安全系统，有很多东西可以为你做。最重要的一个：[Spring Security 插件](http://grails.org/plugin/spring-security-core)。

第二：您编写的代码不起作用，因为扩展一个类是使另一个类成为父类的“儿子”的一种方式。在您的示例中，管理员是用户的儿子。

```
def update(){
    def user1 = User.get("user1") // I don't get how this should work, but I'll leave it like this in this example
    user1.authoritySelected // you're trying to GET the value a property that doesn't exist in the User class, you should SET something here
    user1.save(flush:true)
} 
```

如果你想让你的用户改变角色，最简单的想法是认为角色不是另一个类，而是它应该是用户的一个属性，所以你可以改变它。一旦创建了类的实例，就无法更改它（可能这并不完全正确，但您不应该这样做）。

好的，一些代码：

```
class User {
    String name
    String password
    String authority // a property of the class you can change
}

def update(){
   def user1 = User.get("user1") 
   user1.authority = 'Administrator' // change the property on the instance you retrieved
   user1.save() // save the instance itself
} 
```

这对我来说仍然不是一个好的设计解决方案，我只是想让你能够看到你做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:20:17.863

当您说“然后我想将 user1 从班级用户更改为班级管理员”时，您到底想做什么？

您正在尝试访问该对象中不存在的对象的属性。向下转换根本不是那样工作的。您应该实例化一个类型为 Administrator 的对象，以便在之后保存其属性之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T11:19:11.587

如果要创建 USER，则必须创建 USER 的实例，例如：

```
User u = new User(name: "xpto", password: "xptopass").save(flush:true) 
```

管理员也是一个用户，但还有一个数据，即权限选择，因此如果管理员扩展用户，他也拥有与用户相同的数据。

```
Administrator a = new Administrator(name: "xpto", password: "xptopPass", authoritySelected: "ADMIN").save(flush:true) 
```

注意，Object.get(X) 方法需要一个 ID (Long)，“X”将是一个 Long 值，而不是一个字符串。 [http://grails.org/doc/2.3.x/ref/Domain%20Classes/get.html](http://grails.org/doc/2.3.x/ref/Domain%20Classes/get.html)

# html - 如何将箭头添加到div？

> ID：14808837
> 
> 赞同：7
> 
> 时间：2013-02-11T09:02:46.487
> 
> 标签：html, css, css-shapes

我正在尝试为带有箭头的 div 创建错误标签，但有居中问题。

我得到：![在此处输入图像描述](../Images/d8e72e2d1d755d57197e47084481fd9b.png)

我需要类似的东西：![在此处输入图像描述](../Images/2fdb70d041c181561d7ae0970a51aac1.png)

HTML：

```
<div class="error-label-arrow"></div>
<div class="error-label">This field is required.</div> 
```

CSS：

```
div.error-label{
    padding: 7px 10px 0 4px;
    color: #fff;
    background-color: #DA362A;
    -webkit-border-radius: 5px; 
    -moz-border-radius: 5px; 
    border-radius: 5px;
}

div.error-label-arrow{
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent; 
    border-right:10px solid #DA362A;
    float: left;
} 
```

是否可以？

这是[小提琴](http://jsfiddle.net/harismvec/4rBYy/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-11T09:11:52.253

您可以使用[CSS 伪类](http://css-tricks.com/pseudo-class-selectors/)来执行此操作，因此您不需要“箭头”元素：

```
div.error-label {
  padding: 10px;
  color: #fff;
  background-color: #DA362A;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  width: 190px;
  margin: 30px;
}

div.error-label:before {
  content: ' ';
  height: 0;
  position: absolute;
  width: 0;
  left: 18px;
  border: 10px solid transparent;
  border-right-color: #DA362A;
}
```

```
<div class="error-label">This field is required.</div>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T09:09:19.113

这是解决方案

```
div.error-label{
    padding: 7px 10px 0 4px;
    color: #fff;
    background-color: #DA362A;
    -webkit-border-radius: 5px; 
    -moz-border-radius: 5px; 
    border-radius: 5px;
    width: 150px;
    margin-left: 5px;
}

div.error-label-arrow{
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent; 
    border-right:10px solid #DA362A;
    float: left;
    height: 1px;
    margin-top: 3px;
}
```

```
<div class="error-label-arrow"></div>
<div class="error-label">This field is required.</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-11T07:50:35.693

> 您可以通过使用`Pseudo elements`下面的答案来实现这一点

```
.error{
   position: relative;
   background: red;
   padding: 10px;
   color: #fff;
   margin:0 0 0 12px;
   width:auto;
   display:inline-block;

 }

.error::before {
	content: "";
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 9px 11px 9px 0;
	border-color: transparent red transparent transparent;
	position: absolute;
	left: -11px;
	top: 0;
	bottom: 0;
	margin: auto;
}

.arrow_type2 {
	position: relative;
	background: #28d57f;
	border: 3px solid #0cf5a7;
  padding:50px 20px;
  margin-left:20px;
  margin-top:20px;
  width:auto;
  display:inline-block;
}
.arrow_type2:after, .arrow_type2:before {
	right: 100%;
	top: 50%;
	border: solid transparent;
	content: " ";
	height: 0;
	width: 0;
	position: absolute;
	pointer-events: none;
}

.arrow_type2:after {
	border-color: rgba(40, 213, 127, 0);
	border-right-color: #28d57f;
	border-width: 10px;
	margin-top: -10px;
}
.arrow_type2:before {
	border-color: rgba(12, 245, 167, 0);
	border-right-color: #0cf5a7;
	border-width: 14px;
	margin-top: -14px;
}
```

```
<div class="error">This is field required</div>

<div class="arrow_type2">Arrow type two</div>
```

# c# - xsd -> WCF 模型

> ID：14808839
> 
> 赞同：0
> 
> 时间：2013-02-11T09:02:51.257
> 
> 标签：c#, wcf, xsd, asmx

是否有任何工具可以生成使用 XSD 文件装饰有 WCF 属性的 DTO？

从传统的 ASMX 服务迁移到 WCF 服务时会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:07:03.483

将[XmlSerializerFormat](http://msdn.microsoft.com/en-us/library/system.servicemodel.xmlserializerformatattribute.aspx)属性添加到您的服务合同中，然后您可以不加改变地使用现有的 ASMX DTO。

# java - 超类从另一个包访问默认类

> ID：14808849
> 
> 赞同：0
> 
> 时间：2013-02-11T09:03:08.843
> 
> 标签：java, unit-testing, inheritance, reflection

我正在尝试为我的单元测试用例创建一个可重用的模板类。假设类 Sample 和 SampleTest 属于同一个包，而 Template 属于不同的包。实例化 Sample 类时出错。我希望该方法将被执行，就好像它是可以访问 SampleTest 类的方法一样。有没有办法使这项工作？

```
public SampleTest extends Template<Sample> {
     public void testMethod() {
          getTarget().method();
     }
}

public class Template<T> extends TestCase {

    /** Spied, object instance to test. */
    private transient T targetObject;

    /** Test class type to be derived as parameter type of test subclass. */
    private transient final Class<T> targetType;

    @Override
    public void setUp() throws Exception
    {
        super.setUp();
        setupTargetObject();
    }

    protected void setupTargetObject()
    {
        final T realObject =  targetType.newInstance(); //ERROR here if class under test is non-public
        targetObject = Mockito.spy(realObject);
    }

    protected Template() {
            final ParameterizedType paramedType = (ParameterizedType) getClass().getGenericSuperclass();
            targetType = (Class<T>) paramedType.getActualTypeArguments()[0];
    }

    protected T getTarget()
    {
        return targetObject;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:26:47.033

Java 阻止调用不同包中的类的任何非公共方法（因此，构造函数）。*编译器和*JVM可以防止这种情况发生。因此，您不能直接调用这些方法，并且在您的情况下，您不能通过 Java Reflection API 调用这些方法。

正如建议的那样，一种解决方案是在构造函数上使用 setAccessible(true) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:30:54.533

相反，我建议通过抽象方法将创建实例的责任交给子类。然后，您可以包装它以监视该实例。

# magento - Magento 商店卡在计费信息上

> ID：14808852
> 
> 赞同：0
> 
> 时间：2013-02-11T09:03:13.460
> 
> 标签：magento, shopping-cart

经过多年的正常运行，我们的网站已停止正常运行。目前它运行良好，直到用户尝试结帐。单击账单信息上的继续后，页面没有响应，用户无法继续购买。

我尝试`<div class="col-right"></div>`按照另一篇文章中的建议在 onepage.phtml 中添加一个空白，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:13:41.127

修复该页面中的 Javascript 错误；

```
Uncaught TypeError: Object #<Object> has no method 'corner' 
```

然后从那里拿走它。注释掉他的台词——`$j(".mega_content").corner("5px bottom");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:02:48.803

我有一个类似的问题，通过在管理面板中禁用 magento 编译器来解决。检查您没有启用此功能。

# composer-php - 自动生成composer.json的命令？

> ID：14808853
> 
> 赞同：22
> 
> 时间：2013-02-11T09:03:13.620
> 
> 标签：composer-php

是否有自动生成 composer.json 文件的命令？我希望有一些交互式的东西，它只询问我包名并将它们以交互方式转储到 composer.json 文件中。我不知何故记得过去使用过这样的东西......我可能弄错了。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-11T09:43:45.573

`composer init`，请参阅[文档](http://getcomposer.org/doc/03-cli.md#init)了解更多信息。

# ruby-on-rails - Active Record：多列belongs_to键的一部分的隐式值

> ID：14808854
> 
> 赞同：0
> 
> 时间：2013-02-11T09:03:15.920
> 
> 标签：ruby-on-rails, rails-activerecord, composite-primary-key

我们有多个必须匹配的来自不同数据源的商店列表。

商店有一个复合主键 [source, id]。匹配会在源 = 0 的商店表中创建一个单独的条目，并提取可能因源而异的值（名称、url、...）。

现在我可以将另外两列 meta_shop_source 和 meta_shop_id 添加到 shop 和一个 belongs_to :meta_shop, class_name "Shop", foreign_key: [:meta_shop_source, :meta_shop_id] 到 Shop 模型。我正在使用composite_primary_keys gem。

但是，由于 meta_shop_source 始终为 0，这似乎是在浪费空间。稍后将相同的过程用于产品，并且有数百万行，因此需要进行优化。

所以我正在寻找类似 belongs_to :meta_shop, class_name "Shop", foreign_key: [0, :meta_shop_id] 之类的东西，或者我可以覆盖的方法，这样我就不需要数据库中的 meta_shop_source 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:30:01.477

另一种选择是在模型中定义值，以便您可以直接从控制器直接访问它。

但是对于表中未定义的列，`attr_accessor`可以使用，因为您不想直接存储在数据库中，并且只会在对象的生命周期内存在。

```
attr_accessor :source 
```

如果`meta_shop_source`始终为 0，则无需在表中创建包含该字段的列。

只需使用外主键，`meta_shop_id`.

同样，商店的主键应该是`id`.

这样，您将永远不必担心源，因为它始终为 0。

您可以在模型中定义值，以便您可以直接访问它。

更新：

就优化而言，然后在迁移级别通过 `add_index`在必要时添加索引来进行：仅仅因为一个源为 0 而消除一列并不是一个好主意，也不会影响性能。如果所有源的值也都大于 0，这可能是可能的。

由于您有一个不同的“源”字段，因此可以创建索引。通过创建索引，您基本上将创建一个由 MySQL 本身保存的内部寄存器。

```
ALTER TABLE shop ADD INDEX (source); 
```

在创建和设置索引后，以后每当您希望获取与已分配源 5 的个人有关的一些信息时，服务将直接使用索引转到它，因此生成结果的速度要快得多速度比之前的查询。

# c# - Azure SQL 报告返回“未找到项目”

> ID：14808863
> 
> 赞同：0
> 
> 时间：2013-02-11T09:03:55.077
> 
> 标签：c#, azure, azure-sql-reporting

我正在尝试使用 ReportExecution2005 Web 服务呈现报告。我在本地呈现报表没有问题，但是当我尝试在 Azure 上调用它时，它总是失败并显示找不到该项目的消息。

该报告称为“Invoice.rdl”。我是这样称呼它的（片段）：

```
ReportExecutionService rs = new ReportExecutionService()
{
    CookieContainer = new CookieContainer(),
    ExecutionHeaderValue = execHeader,
    Url = string.Format("https://{0}:443/ReportServer/ReportExecution2005.amsx", "myUrl")
}

rs.LogonUser("myUsername", "myPassword", "myUrl");

rs.LoadReport("/Reports/Invoice", _historyId); // here the exception is thrown 
```

我已经尝试过不同的路径，例如`/Invoice`,`/SSRSReport/Invoice`等`/ReportServer/Invoice`，似乎没有一个工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:23:04.530

好吧，原来是一个愚蠢的问题。从旧的 Windows Azure 管理门户上载报告时，名称中会保留“.rdl”文件扩展名。

删除它解决了问题。

# c++ - 我可以在运行时初始化静态浮点变量吗？

> ID：14808864
> 
> 赞同：0
> 
> 时间：2013-02-11T09:04:06.027
> 
> 标签：c++, visual-studio, mfc

我需要在运行时设置静态浮点变量的值，但我无法做到这一点。我将举例说明我的情况

文件.h

```
class B {
    static float variable1;
    static float variable2;
 public:
    afunction(float a, float b);
} 
```

文件.cpp

```
#include 'afile.h'
B::afunction (float a, float b) {
    float B:variable1 = a;
    float B:variable2 = b;
} 
```

正如您在上面的代码中看到的那样，调用了函数“afunction”，然后必须设置变量“variable1”和“variable2”。我知道'afunction'定义中的代码是错误的，但是我需要一种在运行时设置变量1和变量2的值的方法。

如果它与我的代码相关，我正在使用 Visual Studio 6.0 开发应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:09:28.293

写吧：

```
B::afunction (float a, float b) {
    B::variable1 = a;
    B::variable2 = b;
} 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:18:38.760

首先，您必须先将静态变量设置为某个值，然后才能引用它。

没有`int test::m_ran = 0;`你会得到`undefined reference to 'test::m_ran'`

```
#include <cstdio>

class test
{
public:
    static void run() { m_ran += 1; }
    static void print() { printf("test::run has been ran %i times\n", m_ran); }

private:
    static int m_ran;

};

int test::m_ran = 0;

int main()
{
    for (int i = 0; i < 4; ++i)
    {
        test::run();
        test::print();
    }

    return 0;
} 
```

输出：

```
test::run has been ran 1 times
test::run has been ran 2 times
test::run has been ran 3 times
test::run has been ran 4 times 
```

# python - 机器人框架安装问题

> ID：14808866
> 
> 赞同：-1
> 
> 时间：2013-02-11T09:04:10.127
> 
> 标签：python, robotframework

每当我尝试安装机器人框架时。我收到以下错误消息。

```
close failed in file object destructor:
sys.excepthook is missing
lost sys.stderr 
```

问题是什么？

我正在使用 python2.7.2 安装 robotsframework-2.6.3.win32

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:30:42.520

我不确定是什么导致了您的具体问题，但我发现使用 pip 或 easy_install 可以在 Windows 上安装 robotsframework 和任何插件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T01:11:10.053

您是否更改了已安装的 Python 文件夹名称？请使用 Python 中的内部设置命令行来添加插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-20T05:56:01.300

我不确定您的问题的原因。但是您正在尝试在较旧的 python 版本上安装较旧版本的 Robot 框架。我建议您尝试更新版本，例如“Robot Framework 3.2.2（win32 上的 Python 3.7.9）”。然后，这很容易，因为如果您使用 Python 2 >=2.7.9 或 Python 3 >=3.4，则默认安装 pip。（您可以通过 > "py -m pip --version" 进行检查）现在安装 Robot Framework 只是一个两步过程。

1.  [从https://www.python.org/downloads/](https://www.python.org/downloads/)安装 python
2.  从[https://pypi.org/project/robotframework/](https://pypi.org/project/robotframework/) > “pip install robotframework”安装robotframework（您可以通过> “robot --version”检查版本）

阅读更多 - [https://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#installation-instructions](https://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#installation-instructions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-23T18:32:51.717

我从 win32 扩展中假设这是针对 Windows 的。在这种情况下，我建议使用 pip 检查安装，这可以在第 1.3.3 节 [http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html中找到](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-01T06:02:35.360

检查 pip 是否与您的 python 版本一起安装

```
pip --version 
```

否则使用下面的链接安装

[https://pip.pypa.io/en/stable/installing/](https://pip.pypa.io/en/stable/installing/)

安装 pip 后，您可以尝试安装具有特定版本的机器人框架，如下所示

```
pip install MySQL_python==1.2.2 
```

# c# - 从后台线程更新进度条

> ID：14808869
> 
> 赞同：1
> 
> 时间：2013-02-11T09:04:41.130
> 
> 标签：c#, wpf, progress-bar

我有一个进度条，它的值绑定到一个属性：

```
 <ProgressBar x:Name="progressBar"
                         Margin="0,2,0,0"
                         Height="20"
                         Value="{Binding CompassLogLoadPercent}"
                         Foreground="Blue"
                         Visibility="{Binding CompassLogLoadCompleted, 
                Converter={StaticResource BooleanToVisibilityConverter}}"
                         ToolTip="Loading">
            </ProgressBar> 
```

和财产：

```
 public double CompassLogLoadPercent {
        get { return _compassLogLoadPercent; }
        private set {
            if (value != _compassLogLoadPercent) {
                _compassLogLoadPercent = value;
                NotifyPropertyChanged();
            }
        }
    } 
```

并在单独的线程中更新其值：

```
 for (int j = 0; j < lines.Count(); j++) {
      ...
      CompassLogLoadPercent = ((double) j /lines.Count())*100;
   } 
```

并且线程是使用 TASK 创建的：

```
Task.Run(() => { LoadLogFile(fileName); }); 
```

为什么进度条没有更新，我应该如何解决这个问题？

**更新**：*更多信息*

数据上下文：（我确定数据上下文是正确的）

```
cLT.progressBar.DataContext = logSession; 
```

和实施`INotifyPropertyChanged`

```
 public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void NotifyPropertyChanged(
        [CallerMemberName] String propertyName = "") {
        PropertyChangedEventHandler eventHandler = PropertyChanged;

        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:52:21.667

问题在于你没有向我们展示的东西。基本技术是声音。（特别是，在工作线程上引发事件通知并没有错`PropertyChanged`，因为 WPF 的数据绑定系统会检测到何时发生这种情况，并自动安排更新 UI 线程上的目标 UI 元素。）

这是一个有效的完整示例。这是您的 XAML：

```
<Window x:Class="BackgroundThreadUpdate.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ProgressBar
            x:Name="progressBar"
            VerticalAlignment="Top" Height="20"
            Value="{Binding CompassLogLoadPercent}">
        </ProgressBar>
        <Button Content="Button" HorizontalAlignment="Left" Margin="10,25,0,0" VerticalAlignment="Top"
                Width="75" RenderTransformOrigin="-1.24,-0.045" Click="Button_Click_1"/>

    </Grid>
</Window> 
```

这是您的代码隐藏：

```
using System.ComponentModel;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;

namespace BackgroundThreadUpdate
{
    public partial class MainWindow : Window
    {
        private MySource _src;
        public MainWindow()
        {
            InitializeComponent();
            _src = new MySource();
            DataContext = _src;
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            Task.Run(() =>
            {
                for (int i = 0; i < 100; ++i)
                {
                    Thread.Sleep(100);
                    _src.CompassLogLoadPercent = i;
                }
            });
        }
    }

    public class MySource : INotifyPropertyChanged
    {
        private double _compassLogLoadPercent;
        public double CompassLogLoadPercent
        {
            get
            {
                return _compassLogLoadPercent;
            }
            set
            {
                if (_compassLogLoadPercent != value)
                {
                    _compassLogLoadPercent = value;
                    OnPropertyChanged("CompassLogLoadPercent");
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }
} 
```

这说明了您尝试使用的技术的工作版本。

所以你的不工作的事实一定是由于你没有向我们展示的东西。一些可能的解释：

*   您的 UI 线程可能被阻止。如果 UI 线程很忙，则不会处理数据绑定更新。（当数据绑定在工作线程上检测到来自数据源的更改时，它会向相关的调度程序线程发送一条消息，如果调度程序线程很忙，则不会处理该消息。）
*   数据源可能不`DataContext`适合您`ProgressBar`- 您没有向我们展示您设置上下文的位置，因此这很可能是错误的。
*   引发`PropertyChanged`事件的代码（您的`NotifyPropertyChanged`代码）可能是错误的 - 您没有显示该代码，并且不清楚它如何知道在引发事件时使用什么属性名称。

要检查第一个，只需查看在此后台工作进行时您的 UI 是否响应用户输入。如果不是，那么这就是更新没有通过的原因。

**2 月 25 日更新以添加相关链接**

在考虑关于如何处理这种情况我还能说些什么时，我得出的结论是它太大而无法放入单个 StackOverflow 答案中。所以我写了一系列关于在需要将信息加载到 UI 的后台线程上进行非平凡处理时的性能注意事项的博客文章：http: [//www.interact-sw.co.uk/iangblog/2013/02/ 14/wpf-异步太快](http://www.interact-sw.co.uk/iangblog/2013/02/14/wpf-async-too-fast)

# unix - crontab 创建一个新文件

> ID：14808871
> 
> 赞同：0
> 
> 时间：2013-02-11T09:05:06.757
> 
> 标签：unix, cron, crontab

我正在尝试创建一个简单的 crontab，它通过使用简单命令的输出填充它每分钟创建一个名为 log.txt 的文件。现在这是我放入我的 crontab 的内容：

```
* * * * * (/usr/bin/ls <pathToRandomDirectory) > log.txt 
```

据我了解，5 个星号对应于“每分钟”。但是当我运行这个时，log.txt 文件没有被创建。我在这里缺少什么吗？

另外，如果我不想在创建工作时向我发送电子邮件，我发现我需要输入以下内容：

```
>/dev/null 2>&1 
```

在我的 crontab 文件中的某处。这具体去哪儿了？在命令的末尾还是在单独的行上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:57:04.327

您必须为 log.txt 放置一个绝对路径。否则，它将在 / 中创建。

此外，`>/dev/null 2>&1`必须在句末。如果您希望消除 2（表示错误），只需编写`2>/dev/null`.

然后，您的最终 cronjob 将是这样的：

```
* * * * * /usr/bin/ls pathToRandomDirectory > /pathToRandomDirectory/log.txt 2>/dev/null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:16:13.373

该文件中究竟应该包含什么？这会每分钟创建一个新文件，其中包含文本“某物”：

```
* * * * * echo "something" > /path/to/your/file.txt 
```

我在使用 crontab 时遇到了一些问题，尤其是当我创建新的 crontab 配置时——我的问题是我必须在 crontab 的末尾插入一个空行——某些系统需要它才能正常工作。所以如果你这样做

```
$ crontab -l 
```

输出应该是每行上的 cron 作业列表，最后是空行。

如果它适合你，试试吧。抱歉，但我不确定电子邮件，但我认为您不需要将这样的行放到 crontab 中，玩弄配置 - 默认情况下它不应该向您发送任何电子邮件。

# mysql - 每 5 分钟将 MSSQL 数据复制到 MySQL 数据库？

> ID：14808872
> 
> 赞同：0
> 
> 时间：2013-02-11T09:05:14.123
> 
> 标签：mysql, sql-server, transfer

我正在寻找有关每 5 分钟将数据从本地 MSSQL DB 传输到远程 MYSQL 数据库的最佳方法的一些建议？目前我正在使用一个名为 SQLYOG 的工具，它允许我创建与本地 MSSQL 数据库和远程 MYSQL 服务器的连接，并设置一些查询和映射。它还允许我创建每 5 分钟运行一次的 Windows 计划任务。这个解决方案运行良好，但只有大约 95% 的可靠性，有时似乎很困难。该软件在 GUI 模式下运行并通过 cmd 提示符运行，因此在运行计划任务时相当轻巧。

有谁知道我可以用来获得相同结果的任何其他轻量级工具或方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:08:49.337

您可以使用 SymmetricDS。为此目的，它是一个很好且高效的开源工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:10:48.040

你可以使用[SSIS](http://msdn.microsoft.com/en-us/sqlserver/cc511477.aspx)包来做到这一点。

[SQL Server Integration Services](http://en.wikipedia.org/wiki/SQL_Server_Integration_Services) (SSIS) 是 Microsoft SQL Server 数据库软件的一个组件，可用于执行广泛的数据迁移任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:15:17.737

我觉得最好的办法是使用[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)或[Talen Open Studio 设计 ETL 作业。](http://www.talend.com/download)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T09:14:03.683

几个选项：1.创建链接服务器到mysql，然后通过链接服务器在sp中复制行，设置sql作业执行。2.构建ssis包并在sql作业中运行它。

# ruby-on-rails - 获取哈希表的元素

> ID：14808874
> 
> 赞同：1
> 
> 时间：2013-02-11T09:05:37.823
> 
> 标签：ruby-on-rails, hash

我跑：

```
params[:taxes].each { |pst|
   puts(pst)
} 
```

并得到：

```
{"country"=>"USA", "tax"=>"20"} 
```

我怎样才能得到国家的参数？

我试过：

```
pst[:country]
pst["country"] 
```

但它不打印任何东西。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:19:58.237

由于您只定义一个*元素*（此处`pst`）迭代哈希，因此它在每一步中返回一个长度为 2 的数组。您`"USA"`只会在第一次迭代中通过调用`pst[1][:country]`. 也许在块中定义两个元素对您来说更方便，使您能够在每个步骤中访问键和值：

```
params[:taxes].each do |key, value|
   puts value[:country]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:10:53.040

尝试使用单引号

```
pst['country'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:31:15.783

尝试：

```
params[:taxes].each_pair do |key, value|
  puts value[:country]
end 
```

获取国家名称

# android-ndk - 为 x86 架构编译 android cocos2dx 项目时出现未定义的对“siglongjmp”错误的引用

> ID：14808884
> 
> 赞同：2
> 
> 时间：2013-02-11T09:06:33.397
> 
> 标签：android-ndk, cocos2d-x, android-x86

我正在尝试为 x86 android 架构构建一个 cocos2dx 项目，但是当我尝试编译它时出现以下错误。

```
./obj/local/x86/curl.a(hostip.o):(.text.alarmfunc+0x21): undefined reference to `siglongjmp'
./obj/local/x86/curl.a(hostip.o): In function `Curl_resolv_timeout':
(.text.Curl_resolv_timeout+0x156): undefined reference to `sigsetjmp' 
```

当我用谷歌搜索该错误时，我发现它已在谷歌代码中报告为[问题 19851](http://code.google.com/p/android/issues/detail?id=19851#makechanges)。他们尚未进行任何修复，但他们建议添加修改后的 libc.so 和 sched.h 文件。我试过了，但没有用。

谁能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T12:18:11.867

尝试将此代码添加到您的 .c 或 .cpp 模块之一：

```
#if __i386 && (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID)
#include <setjmp.h>
#ifdef __cplusplus
extern "C" {
    void siglongjmp(jmp_buf env, int val);
    int sigsetjmp(jmp_buf env, int savemask);
}
#endif
void siglongjmp(jmp_buf env, int val)
{
    longjmp(env, val);
}
int sigsetjmp(jmp_buf env, int savemask)
{
    return setjmp(env);
}
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:13:49.620

通过将针对[问题](http://code.google.com/p/android/issues/detail?id=19851#makechanges)19851 附加的 libc.so 复制到最新版本的 ndk 来修复此问题。我正在使用 ndkr8 并将 libc.so 文件复制到 ndkr8d 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T00:18:26.827

转到 Android NDK 页面并按照下载和安装说明进行操作。

[https://developer.android.com/tools/sdk/ndk/index.html](https://developer.android.com/tools/sdk/ndk/index.html)

我在 OSX 上，android-ndk-r10e-darwin-x86_64.bin 为我的设置修复了错误。

# makefile - 使用 gnu autotools 定义额外的 make 目标

> ID：14808886
> 
> 赞同：0
> 
> 时间：2013-02-11T09:06:35.807
> 
> 标签：makefile, autotools, automake

我开始学习自动工具，以便首先了解并随后扩展现有项目的构建系统。目前，该项目构建了一个程序作为其输出。构建系统非常复杂，由几个子目录和`Makefile.am`以维护者模式生成的文件组成，等等。我希望能够选择使用大部分相同的源代码创建一个库，重用大部分现有的构建系统。

我想象的是一个新的 make 目标，这样在运行 configure 之后，我就可以运行`make`来制作程序，或者说，`make library`构建库。执行此操作或具有类似效果的正确方法是什么？

我不想在普通运行时构建库和程序`make`（只是像以前一样的程序），并且我不想在运行时构建程序`make library`（我只想要库）。

如果有人可以提供一个简单的示例，例如由 组成的程序`main.c`，`foo.c`以及`bar.c`由 and 组成的库`foo.c`，`bar.c`那也将非常有帮助。

编辑

为了澄清，我最初认为程序和库可以完全分开构建。该库仅包含主程序代码的子集，我相信这两者是独立的实体。然而，事情要复杂得多。程序本身被构建并用于输出一些代码，然后在第二步中将其编译到程序中（我认为）。通过执行以下步骤，我有效地得到了我想要的东西。

首先在configure.ac中添加一个条件

```
dnl Adds LIBRARY conditional for --enable-foolib mode to
dnl build foo as a library
AC_ARG_ENABLE(foolib,
AS_HELP_STRING([--enable-foolib],
               [enable qucslib build, default: no]),
[case "${enableval}" in
             yes) foolib=true ;;
             no)  foolib=false ;;
             *)   AC_MSG_ERROR([bad value ${enableval} for --enable-foolib]) ;;
esac],
[foolib=false])

AM_CONDITIONAL(FOOLIB, test x"$foolib" = x"true") 
```

然后在适当的 Makefile.am 中，我做了类似以下的事情：

```
if FOOLIB
noinst_LIBRARIES = libbar.a libfoo.a
else
noinst_LIBRARIES = libbar.a
endif

bin_PROGRAMS = barprog

barprog_SOURCES = main.cpp src1.cpp src2.cpp etc.cpp

barprog_LDADD = libbar.a              \
    subdir1/libsubdir1.a                  \
    subdir2/libsubdir2.a          \
    etcdir/libetc.a 

... other stuff

if FOOLIB
libfoo_a_LIBADD = libbar.a            \
    subdir1/libsubdir1.a                  \
    subdir2/libsubdir2.a          \
    etcdir/libetc.a 

libfoo_a_SOURCES = src1.cpp src2.cpp etc.cpp
endif 
```

然后当我想做图书馆时

```
configure --enable-foolib
make 
```

这暂时有效，但似乎很笨拙。我不确定如何在构建系统中实现提供的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:47:08.007

如果程序依赖于库，那么不构建库就无法构建程序。您已经有能力构建单独的库：`configure && make libfoo.a`应该可以正常工作（或`make libfoo.la`）。如果你想要一个名为 的目标`library`，你可以简单地将以下内容添加到任何 Makefile.am 中：

```
library:
        libfoo.a 
```

（或者您可能需要`libfoo.la`。基本上，如果库在主目录下指定`Makefile.am`，`LIBRARIES`那么您将使用`libfoo.a`，但如果在主目录下指定`LTLIBRARIES`，您将使用`libfoo.la`。）这只会`library`在包含 Makefile.am 的每个目录中创建一个目标. 如果您有一个复杂的递归构建（您应该真正简化它，但这是另一个问题），您可以在顶层放置类似以下的内容`Makefile.am`来构建整个树中的库：

```
library:
        cd subdir && $(MAKE) $(AM_MAKEFLAGS) library 
```

这假设您已将`library`目标添加到 subdir/Makefile.am，如上所述。

为了迂腐，您可能想要使用`$(am__cd)`而不是`cd`，但这并不是绝对必要的。

# css - safari web-kit 浏览器页面渲染与 css

> ID：14808889
> 
> 赞同：0
> 
> 时间：2013-02-11T09:06:52.037
> 
> 标签：css, webkit, mobile-safari

我希望这不是一个重复的问题，因为我在网上搜索了所有内容但无法弄清楚。

我有我的网站（www.alshakir.com）我在（mainstyle.css）中制作了大部分css。

它适用于除移动浏览器（Apple Ipad / Android 平板电脑）以外的所有浏览器，即 Safari 和 web-kit broswers

当我通过它们访问该网站时，页面左侧和页脚填充了大量空间..

当我删除 CSS 文件（mainstyle.css）时 .. 即使在 Safari 和 Webkit 上也能正常工作 ..

所以这是移动浏览器的CSS问题..

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:18:10.030

使用 Safari Web Inspector，当我从文档中删除此代码时`head`，左侧的大量空间消失了：

```
<link rel="stylesheet" type="text/css" href="//ct1.addthis.com/static/r07/widget103.css" media="all"> 
```

尝试删除 AddThis 小部件和代码，看看它是否能解决您的问题。

# c# - 如何转换类型的对象' [System.Data.DataView]' 输入'System.Data.DataView'。？

> ID：14808890
> 
> 赞同：3
> 
> 时间：2013-02-11T09:06:54.290
> 
> 标签：c#, asp.net, linq

我正在使用 dataview 并使用它的 skip 和 take 方法，这将占用 5 行并根据页码和页面大小跳过一些行。

```
//creating a dataview object and assigning table[0]
dv = new DataView(ds.Tables[0]); 
```

我面临错误的下一行是：

```
dv=(DataView)dv.Cast<System.Data.DataView>().Skip((pageNum-1)*pageSize).Take(5); 
```

在上面发生的错误是：

```
Unable to cast object of type '<TakeIterator>d__3a`1[System.Data.DataView]' to type 'System.Data.DataView'. 
```

需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:36:20.037

它的工作方式有点不同，您可以执行以下操作：

```
 var dt = ds.Tables[0];
        dt = dt.AsEnumerable().Skip((pageNum - 1) * pageSize).Take(5).CopyToDataTable();

        var dv = new DataView(dt);
        GridView1.DataSource = dv;
        GridView1.DataBind(); 
```

不要忘记“使用 System.Data;” 如果你有时间寻找 LINQ ......

# c++ - C++ 链表包含() 函数

> ID：14808894
> 
> 赞同：0
> 
> 时间：2013-02-11T09:07:09.483
> 
> 标签：c++, templates, singly-linked-list

我对 C++ 真的很陌生，并且无法使 insert() 函数与 LinkedList 一起工作。这是我得到的代码，开始：

```
#include <iostream>
#include <cassert>
#include <stdexcept>
using namespace std;

template<typename T> class mylist;

template<typename T>
ostream& operator<< (ostream &out, const mylist<T> &l);

template <typename T>
class mylist {
public:
    // node definition
    struct node {
        T data;
        node* next_ptr;
        // node constructor
        node(const T &d, node* n):data(d),next_ptr(n){}
    };

    // alternative node definition
    /*
    class node {
    public:
        T data;
        node* next_ptr;
        // node constructor
        node(const T&d, node* n):data(d),next_ptr(n){}
    };
    */

    // linked list head pointer
    node* head_ptr;

    //friend ostream& operator<<  <>(ostream& out, const mylist<T>&l);
    friend ostream& operator<< (ostream &out, const mylist<T> &l);

public:
    // default constructor
    mylist():head_ptr(nullptr) {} // head_ptr points nowhere

    // adds element to the front of the linked list
    void push_front(const T &elem) {
        head_ptr = new node(elem, head_ptr);
    }

    // check if linked list is empty
    bool empty() { return head_ptr == nullptr;}

    // number of nodes in linked list
    unsigned size() { return length();}
    unsigned length() {
        unsigned l = 0;
        for(node* current = head_ptr; current != nullptr; current = current->next_ptr) {
            ++l;
        }
        return l;
    }

    // copy constructor
    mylist(const mylist &other)
    {   
        for(node* current_other = other.head_ptr;
            current_other != nullptr;
            current_other = current_other->next_ptr) {
                this.push_back(current_other->data); // inefficient, but easy :)
        }
    }

    // destructor
    ~mylist() {
        node* tmp;
        for(node* current = head_ptr; 
                current != nullptr; 
                current = tmp) {
            tmp=current->next_ptr;
            delete current;
        }
    }

    // at accessor method (returns the element at the ith position in the linked list)
    T& at(unsigned i){
        unsigned l=0;
        node* current;
        for(current = head_ptr; current != nullptr; current = current->next_ptr) {
            if(l == i)
                break;
            ++l;
        }
        if (current == nullptr)
            throw out_of_range("index i is out of range");
        else
            return current->data;
    }   

    // bracket operator (returns the element at the ith position in the linked list)
    T& operator[](unsigned i){
        return at(i);
    }   

    // adds element to the end of the linked list
    void push_back(const T &elem) {
        if(empty()) {
            push_front(elem);
            return;
        }
        node* last_ptr;
        for(last_ptr = head_ptr; last_ptr->next_ptr != nullptr; 
            last_ptr = last_ptr->next_ptr);

        last_ptr->next_ptr = new node(elem, nullptr);

    }

    // prints the contents of the linked list
    void print_all(void) {
        cout << "mylist{";
        for(node* current_ptr = head_ptr;  
                current_ptr != nullptr; 
                current_ptr = current_ptr->next_ptr){
            cout << current_ptr->data << " ";
        }
        cout << "}" << endl;
    } 
```

我正在尝试创建一个新函数 insert(const T &elem, unsigned i)。它的目的在以下代码的注释中描述：

```
// inserts the element at position i in linked list.
    // throws out of range error if position i not in list.
    void insert (const T &elem, unsigned i) {
        unsigned l=0;
        node* current, prev;
        for(current = head_ptr; current != nullptr; current = current->next_ptr) {

            if(l == i)
                break;
            ++l;
            prev = current;
        }
        if (current == nullptr)
            throw out_of_range("index i is out of range");
        else
        {
            prev->next_ptr = new Node (elem, current);
        }
    } 
```

我的问题是我收到以下错误，我不知道如何修复它，或者它意味着什么：

```
1>c:\users\jaysen\documents\data structures\lab 2\lab 2\mylist_tpt.h(184): error C2512: 'mylist<T>::node' : no appropriate default constructor available
1>          with
1>          [
1>              T=std::string
1>          ]
1>          c:\users\jaysen\documents\data structures\lab 2\lab 2\mylist_tpt.h(182) : while compiling class template member function 'void mylist<T>::insert(const T &,unsigned int)'
1>          with
1>          [
1>              T=std::string
1>          ]
1>          c:\users\jaysen\documents\data structures\lab 2\lab 2\mylist_main.cpp(20) : see reference to class template instantiation 'mylist<T>' being compiled
1>          with
1>          [
1>              T=std::string
1>          ] 
```

提前感谢您能给我的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:09:31.940

尝试将`const`cualifier 添加到`empty`函数中：

```
bool empty() const { return head_ptr == nullptr;} 
```

# java - 主题：没有调用run方法

> ID：14808895
> 
> 赞同：3
> 
> 时间：2013-02-11T09:07:12.323
> 
> 标签：java, multithreading

我是java新手。有人可以帮我为什么它不调用 Run 方法。提前致谢。

```
package com.blt;

public class ThreadExample implements Runnable {
    public static void main(String args[])
    {       

        System.out.println("A");
        Thread T=new Thread();
        System.out.println("B");
        T.setName("Hello");
        System.out.println("C");
        T.start();
        System.out.println("D");
    }

public void run()
{
    System.out.println("Inside run");

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:09:03.380

您需要将 的实例传递`ThreadExample`给`Thread`构造函数，以告诉新线程要运行什么：

```
Thread t = new Thread(new ThreadExample());
t.start(); 
```

（不幸的是，`Thread`该类在各种方面都设计得很差。如果它本身*没有*方法会更有帮助`run()`，但*确实*迫使您将 a 传递给`Runnable`构造函数。然后您会在编译时发现问题-时间。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T09:09:55.297

当 a启动`run`时，JVM 会为您调用该方法。`Thread`默认实现根本不做任何事情。您的变量`T`是 normal `Thread`，没有`Runnable`“目标”，因此`run`永远不会调用它的方法。您可以为`ThreadExample`Thread 的构造函数提供一个实例，也可以`ThreadExample` *扩展* `Thread`：

```
new ThreadExample().start();
// or
new Thread(new ThreadExample()).start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:56:43.160

你也可以这样做。不要`Runnable`在你的主类中实现，而是在你的类中创建一个内部`main`类来这样做：

```
class TestRunnable implements Runnable{
    public void run(){
        System.out.println("Thread started");
   }
} 
```

从方法内的 Main 类实例化它`main`：

```
TestRunnable test = new TestRunnable(); 
Thread thread = new Thread(test);
thread.start(); 
```

# mysql - MySQL 数据库级凭据

> ID：14808896
> 
> 赞同：0
> 
> 时间：2013-02-11T09:07:19.320
> 
> 标签：mysql, database

是否可以拥有 MySQL 的数据库级凭据？

在我们当前的系统中，我们在一个数据库服务器中有多个数据库，如果我们使用任何工具连接到服务器，我们可以看到该服务器中的所有数据库，从而拥有更安全的系统。

我们可以为每个数据库提供凭据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:13:19.067

是的，绝对可以，您可以为每个数据库设置访问权限。事实上，MySQL 允许非常细粒度的权限到表甚至列级别。例如：

```
-- Creates a user
GRANT USAGE ON *.* TO 'username'@'hostname' IDENTIFIED BY PASSWORD '*SOMEPASSWORD';

-- Gives the user access to a single database `database_name`
GRANT SELECT, INSERT, UPDATE, DELETE ON `database_name`.* TO 'username'@'hostname'; 
```

您可能想阅读更多关于[GRANT 语法](http://dev.mysql.com/doc/refman/5.5/en/grant.html)和[MySQL 权限](https://dev.mysql.com/doc/refman/5.5/en/privilege-system.html)的信息。

值得补充的是，您可以拥有与数据库名称相同的用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:11:12.667

您不能拥有数据库的凭据。但是您可以拥有已创建用户的凭据，并根据您的策略授予/限制对任何表/数据库的访问权限。

[创建用户](http://dev.mysql.com/doc/refman/5.1/en/create-user.html)

[授予](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

[特权](http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html)

# jquery - 命名一个ajax选项卡

> ID：14808897
> 
> 赞同：0
> 
> 时间：2013-02-11T09:07:25.153
> 
> 标签：jquery, asp.net, html

简单的问题（我希望）我有一系列 jQuery 选项卡，其中一些是 ajax 调用：

```
<ul>
        <li><a href="#item">Item</a></li>
        <li runat="server" id="specLi"><a href="#spec">Spec</a></li>
        <li runat="server" id="productionLi"><a href="ajaxProduction.aspx?itemId=<%=itemId %>"><span>Production</span></a></li>
        <li runat="server" id="qualLi"><a href="ajaxQuality.aspx?itemId=<%=itemId %>"><span>Quality</span></a></li>
        <li runat="server" id="customersLi"><a href="#customers"><span>Customers</span></a></li>
        <li runat="server" id="salesLi"><a href="ajaxSales.aspx?itemId=<%=itemId %>"><span>Sales</span></a></li>
        <li runat="server" id="suppliersLi"><a href="#suppliers"><span>Suppliers</span></a></li>
        <li runat="server" id="purchasesLi"><a href="ajaxPurchases.aspx?itemId=<%=itemId %>"><span>Purchases</span></a></li>
        <li runat="server" id="stockLi"><a href="ajaxStockMovement.aspx?itemId=<%=itemId %>"><span>Stk Movt</span></a></li>
        <li runat="server" id="NotesLi"><a href="#notes"><span>Notes</span></a></li>
    </ul> 
```

我想使用#anchor 链接到特定的选项卡 - 效果很好。但是对于 Ajax 选项卡，我无法指定 #anchor 名称。在呈现的 html 中，我得到 ui-tabs-1 ui-tabs-2 等

有没有办法在#之后指定锚文本？

提前致谢

戈登

[更新] 明白了，只需要在 a 标签中添加一个 name="linkname"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:53:39.557

如果你想添加`name`到`a`标签，你可以有这样的东西。

文档：[$.attr()](http://api.jquery.com/attr/)

```
$(function(){

   $("ul li a").each(function(){  //just limiting to all anchors inside the list

         $(this).attr("name","add some name to it");

   });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:08:26.917

尝试这个：

```
$(function(){    
   $("ul li a").each(function(){
         name=$(this).attr("href");
         $(this).attr("name",name);//this will set the href attribute of element to name attribute    
   });    
}); 
```

# iphone - 如何将以下行添加到我的 plist 文件中？

> ID：14808902
> 
> 赞同：0
> 
> 时间：2013-02-11T09:07:52.253
> 
> 标签：iphone, ios, xcode, jailbreak, springboard

我看过很多关于添加到 plist 文件的教程，但我似乎无法正确地将嵌套标签插入到 plist 文件中。我想将以下行添加到我的 Info.plist 文件中

```
<key>AppTag</key> <array>
     <string>hidden</string> </array>

NSMutableDictionary *plist = [[NSDictionary dictionaryWithContentsOfFile:@"/Users/me/Desktop/Info2.plist"] mutableCopy];

  [plist setObject:@"AppTag" forKey:@"key"];
  [plist setObject:@"hidden" forKey:@"string"];

    [plist writeToFile:@"/Users/me/Desktop/Info2.plist" atomically:YES];
    [plist release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:29:01.310

您需要将字符串数组设置为 key 的对象`@"AppTag"`，如下所示：

```
NSArray *strings = @[@"hidden"];
plist[@"AppTag"] = strings; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:25:23.467

您需要做的是添加`strings`到您的`array`，然后添加`array`到`dictionary`文件的。在以下示例中，我将一些单词及其定义添加到名为 的文件中`WordList.plist`：

```
NSArray *values = [[NSArray alloc] initWithObjects:word.name, word.definition, nil];
NSArray *keys = [[NSArray alloc] initWithObjects: NAME_KEY, DEFINITION_KEY, nil];
NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithObjects:values forKeys:keys];
[wordsListArray addObject:dict];

NSString *destinationPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
 NSUserDomainMask, YES) lastObject];
destinationPath = [destinationPath stringByAppendingPathComponent:@"WordList.plist"];
[wordsListArray writeToFile:destinationPath atomically:YES]; 
```

我希望这有帮助。

另外，我认为这是无法正常工作的部分：`@"/Users/me/Desktop/Info2.plist"`

试试 NSLogging。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:46:07.720

您可以尝试以下代码

```
-(NSString *) datafilepath{

NSArray *path=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documents=[path objectAtIndex:0];
return [documents stringByAppendingFormat:@"/Info2.plist"]; // you can change the path to desktop
} 
```

在 ViewDidLoad 或任何方法下

```
NSString *filepath3=[self datafilepath];
if ([[NSFileManager defaultManager]fileExistsAtPath:filepath3]) {
    pricedict=[[NSMutableDictionary alloc]initWithContentsOfFile:filepath3];
}

[pricedict setObject:@"AppTag" forKey:@"key"];
[pricedict setObject:@"hidden" forKey:@"string"];

[pricedict writeToFile:pngfilepath atomically:YES]; 
```

希望这会有所帮助.. 快乐编码</p>

# java - 解析数字时出现 NumberFormatException

> ID：14808903
> 
> 赞同：2
> 
> 时间：2013-02-11T09:07:54.237
> 
> 标签：java, numberformatexception

```
String str="123456.7855456677";
ParsePosition parsePosition = new ParsePosition(0);
NumberFormat numberFormat=new DecimalFormat();
Number number=numberFormat.parse(str, parsePosition);

if(parsePosition.getIndex()!=str.length())
{
    throw new IllegalArgumentException();
}

numberFormat.setMaximumFractionDigits(2);
numberFormat.setRoundingMode(RoundingMode.HALF_UP);
double value=Double.parseDouble(numberFormat.format(number));
System.out.println(value); 
```

`str`假设用户可以自由输入任何字符串，这段代码中字符串类型变量的值可以是任何动态值。

**倒数第二行**的`Double.parseDouble()`方法导致抛出 。**`java.lang.NumberFormatException`**

 **删除该行`numberFormat.setMaximumFractionDigits(2);`并将 RegEx 设置为`DecimalFormat`类的重载构造函数，而不是像往常一样，

```
NumberFormat numberFormat=new DecimalFormat("#.##"); 
```

抑制异常。

那么，为什么它不工作呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T09:12:26.650

如果您可以调试代码，然后签出这一行`numberFormat.format(number)`，它会给出一个包含逗号的数字，这可能会成为异常的原因，请检查这个`123,456.79`，这个逗号不应该在那里......希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T09:12:03.500

`Exception in thread "main" java.lang.NumberFormatException: For input string: "123,456.79"` 双数的字符串表示中不能有逗号。**

# c# - 如何在读取或更新后关闭 MSI 文件

> ID：14808906
> 
> 赞同：1
> 
> 时间：2013-02-11T09:07:59.977
> 
> 标签：c#, windows-installer

我在关闭 MSI 文件时需要帮助。

我正在制作一个 MSI 文件编辑器，我可以在其中打开和更新 msi 文件。但问题是当我尝试重新打开同一个文件（只是为了交叉检查更新的 msi）时，它会引发错误

> 开放数据库、数据库路径、开放模式

在这条线上

```
database = installer.OpenDatabase(msiFile.FullName, MsiOpenDatabaseMode.msiOpenDatabaseModeTransact); 
```

所以，我相信它是因为 msi 文件已经打开了。谁能帮我关闭一个已经打开的msi。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T13:47:07.637

我猜您正在使用从 WindowsInstaller.Installer COM 对象生成的互操作库。你不想那样做。相信我这个。而是下载 Windows Installer XML 并在 SDK 文件夹中查找 Microsoft.Deployment.WindodsInstaller 程序集。该库是部署工具基础 (DTF) 的一部分，它是与 Windows Installer 互操作的黄金标准。

在 DTF 中，Database 类实现了 IDisposable 接口，因此最优雅的方法是将其放在 using 语句中。

```
using(Database database = new Database(...))
{
 // Do Stuff Here
} 
```

一旦块完成，.NET 将自动调用 Dispose() 方法，这反过来会关闭数据库并释放非托管句柄。然后将通知垃圾收集器在以后的非重要时间清理托管类。如果您未能调用 Dispose（隐式或显式），那么在垃圾收集器开始清理之前不会释放未管理的资源，这不会是您所看到的一件好事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T07:35:28.950

嘿斯蒂芬和克里斯托弗，这就是我使用您宝贵的建议解决我的问题的方法。

我使用数据库作为全局变量，因为整个应用程序中的许多不同事务都需要它，所以在打开 msi 文件之前添加了这些行。

```
if (view != null)
   {
      System.Runtime.InteropServices.Marshal.FinalReleaseComObject(view);
      view = null;
   }
if (database != null)
   {
      System.Runtime.InteropServices.Marshal.FinalReleaseComObject(database);
      database = null;
   }
GC.Collect(); 
```

希望我的回答也能帮助陷入同样情况的人们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T13:08:27.680

将数据库变量设置为 null 或强制变量超出范围。这应该释放打开的句柄。

或者，您可能需要强制垃圾收集器运行以放弃句柄。[在 C# 中强制垃圾回收的最佳实践](https://stackoverflow.com/questions/233596/best-practice-for-forcing-garbage-collection-in-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T16:30:18.100

您将不得不释放每个手柄，例如：

```
Database database = _installer.OpenDatabase(...);
View view = database.OpenView(query);
view.Execute();
Record record = view.Fetch();

Marshal.FinalReleaseComObject(record);
view.Close();
Marshal.FinalReleaseComObject(record);
Marshal.FinalReleaseComObject(database);
record = null;
view = null;
database = null;
GC.Collect(); 
```

尝试一下……最后，你应该会很好。

# c - C中指向二维数组的指针

> ID：14808908
> 
> 赞同：39
> 
> 时间：2013-02-11T09:08:04.893
> 
> 标签：c, arrays, pointers

我知道有几个问题可以提供好的（和有效的）解决方案，但恕我直言，没有一个明确说明实现这一目标的最佳方法是什么。所以，假设我们有一些二维数组：

```
int tab1[100][280]; 
```

我们想要创建一个指向这个二维数组的指针。为此，我们可以这样做：

```
int (*pointer)[280]; // pointer creation
pointer = tab1; //assignation
pointer[5][12] = 517; // use
int myint = pointer[5][12]; // use 
```

或者，或者：

```
int (*pointer)[100][280]; // pointer creation
pointer = &tab1; //assignation
(*pointer)[5][12] = 517; // use
int myint = (*pointer)[5][12]; // use 
```

好的，两者似乎都运作良好。现在我想知道：

*   最好的方法是什么，第一个还是第二个？
*   编译器都相等吗？（速度，性能...）
*   这些解决方案中的一种是否比另一种消耗更多的内存？
*   开发人员更常用的是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-11T09:17:23.090

```
//defines an array of 280 pointers (1120 or 2240 bytes)
int  *pointer1 [280];

//defines a pointer (4 or 8 bytes depending on 32/64 bits platform)
int (*pointer2)[280];      //pointer to an array of 280 integers
int (*pointer3)[100][280]; //pointer to an 2D array of 100*280 integers 
```

使用`pointer2`或`pointer3`生成相同的二进制文件，除了[WhozCraig](https://stackoverflow.com/users/1322972)`++pointer2`指出的操作。

我建议使用`typedef`（产生与上面相同的二进制代码`pointer3`）

```
typedef int myType[100][280];
myType *pointer3; 
```

**注意：**从 C++11 开始，您也可以使用关键字`using`代替`typedef`

```
using myType = int[100][280];
myType *pointer3; 
```

在你的例子中：

```
myType *pointer;                // pointer creation
pointer = &tab1;                // assignation
(*pointer)[5][12] = 517;        // set (write)
int myint = (*pointer)[5][12];  // get (read) 
```

**注意：**如果数组`tab1`在函数体中使用 => 这个数组将被放置在调用堆栈内存中。但是堆栈大小是有限的。使用大于可用内存堆栈的数组会产生[*堆栈溢出*崩溃](https://en.wikipedia.org/wiki/Stack_overflow#Very_large_stack_variables)。

[完整的代码片段可在gcc.godbolt.org](http://goo.gl/spzzLb)上在线编译

```
int main()
{
    //defines an array of 280 pointers (1120 or 2240 bytes)
    int  *pointer1 [280];
    static_assert( sizeof(pointer1) == 2240, "" );

    //defines a pointer (4 or 8 bytes depending on 32/64 bits platform)
    int (*pointer2)[280];      //pointer to an array of 280 integers
    int (*pointer3)[100][280]; //pointer to an 2D array of 100*280 integers  
    static_assert( sizeof(pointer2) == 8, "" );
    static_assert( sizeof(pointer3) == 8, "" );

    // Use 'typedef' (or 'using' if you use a modern C++ compiler)
    typedef int myType[100][280];
    //using myType = int[100][280];

    int tab1[100][280];

    myType *pointer;                // pointer creation
    pointer = &tab1;                // assignation
    (*pointer)[5][12] = 517;        // set (write)
    int myint = (*pointer)[5][12];  // get (read)

    return myint;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-11T10:00:37.993

你的两个例子都是等价的。但是，第一个不那么明显并且更“hacky”，而第二个清楚地说明了您的意图。

```
int (*pointer)[280];
pointer = tab1; 
```

`pointer`指向 280 个整数的一维数组。*在您的作业中，您实际上*分配了`tab1`. 这是可行的，因为您可以将数组隐式转换为指针（指向第一个元素）。

当您使用`pointer[5][12]`时，C 将`pointer`其视为数组数组（`pointer[5]`is of type `int[280]`），因此这里还有另一个*隐式*转换（至少在语义上）。

在第二个示例中，您显式创建了一个指向 2D 数组的指针：

```
int (*pointer)[100][280];
pointer = &tab1; 
```

这里的语义更清楚：`*pointer`是一个二维数组，所以你需要使用`(*pointer)[i][j]`.

两种解决方案都使用相同数量的内存（1 个指针），并且很可能运行速度相同。在后台，两个指针甚至都指向同一个内存位置（`tab1`数组的第一个元素），而且您的编译器甚至可能生成相同的代码。

第一个解决方案是“更高级的”，因为需要对数组和指针在 C 中的工作方式有相当深入的了解才能理解发生了什么。第二个更明确。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-11T09:14:26.710

`int *pointer[280];`//创建 280 个 int 类型的指针。

在 32 位操作系统中，每个指针 4 个字节。所以 4 * 280 = 1120 字节。

`int (*pointer)[100][280];`// 仅创建一个指针，用于指向 [100][280] 个整数数组。

这里只有 4 个字节。

提出您的问题，`int (*pointer)[280];`尽管`int (*pointer)[100][280];`它指向 [100][280] 的相同二维数组，但它是不同的。

因为如果`int (*pointer)[280];`是递增的，那么它将指向下一个一维数组，但是 as`int (*pointer)[100][280];`穿过整个二维数组并指向下一个字节。如果该内存不属于您的进程，则访问该字节可能会导致问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-24T16:12:01.730

好的，这实际上是四个不同的问题。我将一一解决：

> 对编译器来说都是平等的吗？（速度，性能...）

是的。指针解引用和从类型衰减`int (*)[100][280]`到`int (*)[280]`对你的 CPU 来说总是一个问题。无论如何，我不会让它通过一个糟糕的编译器来生成虚假代码，但是一个好的优化编译器应该将两个示例编译成完全相同的代码。

> 这些解决方案中的一种是否比另一种消耗更多的内存？

作为我第一个答案的推论，不。

> 开发人员更常用的是什么？

绝对是没有额外`(*pointer)`取消引用的变体。对于 C 程序员来说，假设任何指针实际上可能是指向数组第一个元素的指针，这是一种习惯。

> 最好的方法是什么，第一个还是第二个？

这取决于您优化的内容：

*   惯用代码使用变体 1。声明缺少外部维度，但所有使用都与 C 程序员期望的完全一样。

*   如果你想明确指出你指向一个数组，你可以使用变体 2。但是，许多经验丰富的 C 程序员会认为在最里面的 . 后面隐藏着第三个维度`*`。对于大多数程序员来说，没有数组维度会觉得很奇怪。

# highstock - 图例覆盖图表

> ID：14808913
> 
> 赞同：0
> 
> 时间：2013-02-11T09:08:25.260
> 
> 标签：highstock

我有一个包含许多系列的 highstock 图表。我将带有系列名称的图例放在图表下方。问题是我无法提前知道图例的高度，有时它恰好太大以至于覆盖了上面的图表。

是否可以使图形的大小适应javascript代码中图例的大小？对我来说最好的解决方案是保持图形的大小不变并扩大封闭元素的高度。

**编辑：** 一个类似于我的情况的jsfiddle：http: [//jsfiddle.net/KfWDD/1/](http://jsfiddle.net/KfWDD/1/)

```
var chart = new Highcharts.StockChart({     
    chart: {
        renderTo: 'container'
    },
    legend: {
        enabled: true,
    },
    rangeSelector: {
        selected: 1
    },
    series: [{
        name: 'ADBE',
        data: ADBE
    }, {
        name: 'MSFT',
        data: MSFT
    }]
}); 
```

我想在导航器下方有图例。我可以通过修复元素中的一些边距和偏移来获得这一点，但是如果图例变得太高，布局就会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:43:49.787

您可以为图例设置[maxHeight](http://api.highcharts.com/highcharts#legend.maxHeight)，并添加固定[边距](http://api.highcharts.com/highcharts#chart.margin)以为该图例腾出一些空间。

# javascript - Javascript - 找到指数方程的底

> ID：14808917
> 
> 赞同：2
> 
> 时间：2013-02-11T09:08:45.077
> 
> 标签：javascript, algebra

我想知道是否有人知道如何在 Javascript 中找到指数方程的底。

我找不到任何允许这样做的函数（例如使用数学函数）。

例如，如何在以下等式中找到“b”：

```
y = b^t 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:21:20.670

你需要的是数学和对数。

```
 y = b^t
=> t = log(y) / log(b)
=> log(b) = log(y) / t
=> b = 10 ^ ( log(y) / t ) 
```

所以它会像

```
b = Math.pow(10, (Math.log(y) / t)); 
```

-汉内斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:19:30.630

如果你知道 和 的值是什么`y`，`t`你可以`b`通过计算**y 的第 t 根**得到 的值，如下所示：

```
Math.pow(y, 1/t); 
```

来源： [JavaScript：计算数字的第 n 个根](https://stackoverflow.com/questions/7308627/javascript-calculate-the-nth-root-of-a-number)

# three.js - 三.js 阴影不如预期

> ID：14808921
> 
> 赞同：0
> 
> 时间：2013-02-11T09:08:56.617
> 
> 标签：three.js, webgl, shadow

我试图在[这个 jsfiddle](http://jsfiddle.net/y4T3X/)中的立方体下创建一个阴影，（下面的代码）但是阴影太大了，我也不认为是正确的形状。是什么导致了这个阴影，我该如何解决？

谢谢

```
var initScene, render,
projector, renderer, scene, ground, light, 
camera, box, pointLight;

projector = new THREE.Projector;

scene = new THREE.Scene;

renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize( window.innerWidth, window.innerHeight );
renderer.setClearColorHex(0x000000, 1);
renderer.shadowMapEnabled = true;
renderer.shadowMapSoft = true;
document.body.appendChild( renderer.domElement );

light = new THREE.DirectionalLight( 0xFFFFFF );
light.position.set( 20, 80, 0 );
light.target.position.copy( scene.position );
light.castShadow = true;

light.shadowCameraLeft = -60;
light.shadowCameraTop = -60;
light.shadowCameraRight = 60;
light.shadowCameraBottom = 60;
light.shadowCameraNear = 1;
light.shadowCameraFar = 2000;
light.shadowBias = 10;
light.shadowMapWidth = light.shadowMapHeight = 2040;
light.shadowDarkness = .7;

scene.add( light );

box = new THREE.Mesh(
    new THREE.CubeGeometry( 5, 5, 40 ), 
    new THREE.MeshLambertMaterial({ 
        color: 0xffffff, 
        opacity: 0.7, 
        transparent: true, 
        depthWrite: false 
}));
box.position.set( 10, 10, 10 );
box.castShadow = true;
scene.add(box);

ground = new THREE.Mesh(
    new THREE.CubeGeometry(1000, 1, 1000),
    new THREE.MeshLambertMaterial({ 
        color: 0xffffff, 
        opacity: 0.3, 
        transparent: true 
}));
ground.receiveShadow = true;
scene.add( ground );

camera = new THREE.PerspectiveCamera(
    35, window.innerWidth / window.innerHeight, 1, 1000
);
camera.position.set( 100, 100, 100 );
camera.lookAt( scene.position );
scene.add( camera );

renderer.render( scene, camera );
scene.simulate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:04:38.080

出于某种原因，我不能去小提琴，但我看到你的立方体在（10,10,10），尺寸为 5，你的光在（20,80,0）。我的第一个猜测是你的光非常接近立方体。尝试将灯光移动到 (200,200,0) 看看会发生什么。

# python - OpenERP安装问题

> ID：14808935
> 
> 赞同：2
> 
> 时间：2013-02-11T09:09:47.313
> 
> 标签：python, openerp

我正在本地服务器上安装 openerp，我已经安装了它及其依赖项，但是在完成安装后，当我运行服务器*'openerp-server'*并使用*0.0.0.0:8069/*访问它时。我收到以下错误

```
OpenERP Server Error

Client Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/addons/web/http.py", line 195, in dispatch
    response["result"] = method(self, **self.params)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/addons/web/controllers/main.py", line 709, in get_list
    return db_list(req)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/addons/web/controllers/main.py", line 88, in db_list
    dbs = proxy.list()
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/addons/web/session.py", line 31, in proxy_method
    result = self.session.send(self.service_name, method, *args)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/addons/web/session.py", line 104, in send
    raise xmlrpclib.Fault(openerp.tools.ustr(e), formatted_info)

Server Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/addons/web/session.py", line 90, in send
    return openerp.netsvc.dispatch_rpc(service_name, method, args)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/netsvc.py", line 295, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/service/web_services.py", line 122, in dispatch
    return fn(*params)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/service/web_services.py", line 351, in exp_list
    cr = db.cursor()
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/sql_db.py", line 477, in cursor
    return Cursor(self._pool, self.dbname, serialized=serialized)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/sql_db.py", line 183, in __init__
    self._cnx = pool.borrow(dsn(dbname))
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/sql_db.py", line 378, in _locked
    return fun(self, *args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/openerp-7.0_20130211_002141-py2.7.egg/openerp/sql_db.py", line 433, in borrow
    result = psycopg2.connect(dsn=dsn, connection_factory=PsycoConnection)
  File "/usr/lib/python2.7/dist-packages/psycopg2/__init__.py", line 179, in connect
    connection_factory=connection_factory, async=async)
OperationalError: FATAL:  role "ghrix" does not exist 
```

我没有认识到这个错误。还有一件事，我还没有编辑**OpenERP 服务器配置文件**。如果我必须编辑这个文件，那么这些变化是什么。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:10:35.243

此错误表明 OpenERP 正在尝试使用不存在的“ghrix”用户连接到 PostgreSQL 数据库服务器。这可能是您在其下启动服务器的用户。如果您已经为 OpenERP 创建了一个特殊的数据库用户，您需要在命令行中使用`--db_user=DB_USER`（在这种情况下您可能还需要`--db_host=localhost`and `--db-password=YOUR_PASSWORD`）指定它。
如果您还没有创建任何数据库用户，最简单的解决方案可能是创建一个名为的用户`ghrix`，例如：

```
$ sudo su - postgres
$ createuser -s ghrix  # -s to make a super-user that can create DBs 
```

**注意：**用于`./openerp-server --help`查看 OpenERP 服务器所有可能的启动参数。您还可以将命令行选项放在配置文件中：只需执行

```
$ ./openerp-server -s 
```

然后编辑在中创建的示例配置文件`$HOME/.openerp_serverrc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:41:09.723

尽管问题已经得到解答，以下是关于安装生产级 OpenERP 服务器的简明教程，其中还解释了如何设置数据库、管理访问权限和配置 OpenERP 安装：

[http://www.theopensourcerer.com/2012/02/how-to-install-openerp-6-1-on-ubuntu-10-04-lts/](http://www.theopensourcerer.com/2012/02/how-to-install-openerp-6-1-on-ubuntu-10-04-lts/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-28T15:24:49.107

你应该检查两个案例

第一种情况：

> $ sudo su - postgres $ createuser -s ghrix

第二种情况填写数据库用户和数据库密码

> /odoo/debian/odoo.conf

使用此参数运行 odoo

> ./odoo-bin -c /opt/odoo/debian/odoo.conf

如果没有解决下面的评论，我会尝试解决它

# oracle-apex - 设置报表导出的列标题

> ID：14808938
> 
> 赞同：0
> 
> 时间：2013-02-11T09:09:51.537
> 
> 标签：oracle-apex

我正在使用以下博客文章来帮助我导出报告。它很好用，但是我想知道是否可以设置列标题名称？

[http://spendolini.blogspot.co.uk/2006/04/custom-export-to-csv.html](http://spendolini.blogspot.co.uk/2006/04/custom-export-to-csv.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:39:10.983

如果您只想提供一个包含列标题的初始行：

```
begin
   -- Set the MIME type
   owa_util.mime_header( 'application/octet', FALSE );
   -- Set the name of the file
   htp.p('Content-Disposition: attachment; filename="emp.csv"');
   -- Close the HTTP Header
   owa_util.http_header_close;
   -- Send the initial row with headers
   htp.prn('Ename,Empno,Department'||chr(13));
   -- Loop through all rows in EMP
   for x in (select e.ename, e.empno, d.dname
             from emp e, dept d where e.deptno = d.deptno
             and e.deptno like :P1_DEPTNO)
   loop 
   -- Print out a portion of a row, 
   -- separated by commas and ended by a CR
   htp.prn(x.ename ||','|| x.empno ||','||
            x.dname || chr(13));
   end loop;
   -- Send an error code so that the
   -- rest of the HTML does not render
   --htmldb_application.g_unrecoverable_error := true;
   --use stop apex_engine 
   apex_application.stop_apex_engine;
end; 
```

基本上，您只需在发出数据行之前发出额外的一行。

我评论`htmldb_application`赞成`apex_application.stop_apex_engine`。[查看文档](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/apex_app.htm#BABGIDII)

# python - Python 正则表达式（来自 Quick Book）

> ID：14808943
> 
> 赞同：1
> 
> 时间：2013-02-11T09:10:02.573
> 
> 标签：python, regex

我最近从“Python Quick Book”中学到了一些关于 Python re 模块的知识。

我试图测试书中的代码。除了我的代码没有错误之外，它没有识别文件中给出的数据模式。

```
 import re
regexp = re.compile(r"(?P<last>[-a-zA-Z]+)"
                    r"(?P<first>[-a-zA-Z]+)"
                    r" ( (?P<middle> ([-a-zA-Z]+)))?"
                    r": (?P<phone> (\d\d\d-)?\d\d\d-\d\d\d\d)"
                    )
file = open ('dir.txt', 'r')
for line in file.readlines():
    result = regexp.search(line)
    if result == None:
        print ("Oops, I don't think this is a record")
    else:
        lastname = result.group('last')
        firstname = result.group('first')
        middlename = result.group('middle')
        if middlename == None:
            middlename = ''
        phonenumber = result.group('phone')
        print ('Name:', firstname, middlename, lastname, ' Number: ',phonenumber)
file.close() 
```

这是我的文本文件中给出的数据。

```
Khan, Ahmed Ali : 800-123-4567
Malik, Asif Ali : 800-123-7844
Shaikh, Muhammad Sharafat: 300-123-4444
Shah, Farhat Abbas : 321-822-2977
Adam, Khalid Ahmed : 000-124-5454 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T09:43:07.163

输入数据的正则表达式错误

要修复它，请采取以下方法

进入python立即评估并导入re

```
$ python
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import re 
```

将字符串定义为输入行之一

```
>>> str="Khan, Ahmed Ali : 800-123-4567" 
```

一次应用一些正则表达式模式，看看失败的地方

```
>>> regexp = re.compile(r"(?P<last>[-a-zA-Z]+)")
>>> result=regexp.search(str)
>>> print result.group('last')
Khan 
```

所以第一个有效，试试前两个

```
>>> regexp = re.compile(r"(?P<last>[-a-zA-Z]+)"
...                     r"(?P<first>[-a-zA-Z]+)")
>>> result=regexp.search(str)
>>> print result.group('last')
Kha
>>> print result.group('first')
n 
```

哦亲爱的！仔细看，str 在 Khan 之后有一个逗号和空格，所以让我们修复它

```
>>> regexp = re.compile(r"(?P<last>[-a-zA-Z]+),\s+"
... r"(?P<first>[-a-zA-Z]+)")
>>> result=regexp.search(str)
>>> print result.group('last')
Khan
>>> print result.group('first')
Ahmed
>>> 
```

只需像这样交互式地调整正则表达式，直到它适用于一个输入字符串。然后将工作正则表达式复制回您的程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:30:02.197

您的代码在中间名前需要两个空格：

```
r" ( (?P<middle> ([-a-zA-Z]+)))?"
# ^ ^ 
```

相反，您应该使用`\s`字符类和`*`或`+`量词。此外，显式关闭文件、`re.search`在您真正需要时使用`re.match`以及与`None`with进行比较`==`都是不好的做法。相反，请像这样编写代码：

```
import re
regexp = re.compile(r"(?P<last>[-a-zA-Z]+), "
                    r"(?P<first>[-a-zA-Z]+)"
                    r"(\s+(?P<middle>[-a-zA-Z]+))?\s*"
                    r":\s*(?P<phone>(\d{3}-)?\d{3}-\d{4})$"
                    )
with open('dir.txt', 'r') as f:
    for line in f:
        result = regexp.match(line)
        if result is None:
            print ("Oops, I don't think this is a record")
            continue
        lastname = result.group('last')
        firstname = result.group('first')
        middlename = result.group('middle')
        if middlename is None:
            middlename = ''
        phonenumber = result.group('phone')
        print ('Name:', firstname, middlename, lastname, ' Number: ',phonenumber) 
```

# java - 是否可以在 Swing 中自定义主 JFrame 标题渲染？

> ID：14808944
> 
> 赞同：3
> 
> 时间：2013-02-11T09:10:03.337
> 
> 标签：java, swing, jframe

我想在 Swing 应用程序上自定义我的主 JFrame 的标题。

我想做两件事，但找不到任何方法来实现它：

*   使用 Image 将主 JFrame 的标题放在后面。像这样的东西：http: [//www.hostingpics.net/viewer.php?id=521357Untitled.png](http://www.hostingpics.net/viewer.php?id=521357Untitled.png)

*   使用 GradientPaint（或类似的“调整”）在 JFrame 的标题后面放置渐变颜色。像这样的东西：http: [//www.hostingpics.net/viewer.php?id=842390Untitled2.png](http://www.hostingpics.net/viewer.php?id=842390Untitled2.png)

有什么方法可以在 Swing 中轻松做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T09:23:46.770

您不能修改系统原生框架/对话框装饰（包括框架/对话框标题）。

虽然有两种方法可以修改整个框架/对话框装饰：

1.  您必须在您的应用程序中使用一些具有自定义框架/对话框装饰并允许更改它的特定 L&F - 我真的不知道是否有这样的。（您可以找到许多具有自己的框架/对话框装饰的 L&F，例如[这个](http://code.google.com/p/seaglass/)）

2.  您必须安装自己的 RootPaneUI 来自定义框架装饰，但请注意，您必须自己编写所有框架/对话框装饰功能（包括窗口拖动和调整大小、控制按钮、标题等） - 这需要对 UI、图形和 Swing 有很好的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T09:38:32.223

另一种方式（几年前我在Delphy中使用过......）：

不要显示默认标题栏，而是将自己的标题栏放在一个（用你想要的一切制作：p），并重新实现所有行为（拖放，最大化，最小化，......）。

# python - 检查变量是否是数据框

> ID：14808945
> 
> 赞同：197
> 
> 时间：2013-02-11T09:10:07.870
> 
> 标签：python, pandas

当我的函数 f 用变量调用时，我想检查 var 是否是 pandas 数据框：

```
def f(var):
    if var == pd.DataFrame():
        print "do stuff" 
```

我想解决方案可能很简单，但即使

```
def f(var):
    if var.values != None:
        print "do stuff" 
```

我无法让它像预期的那样工作。

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2013-02-11T09:23:16.907

使用[`isinstance`](http://docs.python.org/2/library/functions.html#isinstance)，仅此而已：

```
if isinstance(x, pd.DataFrame):
    ... # do something 
```

* * *

[PEP8](http://www.python.org/dev/peps/pep-0008/)明确表示这`isinstance`是检查类型的首选方法

```
No:  type(x) is pd.DataFrame
No:  type(x) == pd.DataFrame
Yes: isinstance(x, pd.DataFrame) 
```

甚至不去想

```
if obj.__class__.__name__ = 'DataFrame':
    expect_problems_some_day() 
```

`isinstance`处理继承（请参阅[Type() 和 isinstance() 之间的区别是什么？](https://stackoverflow.com/questions/1549801/differences-between-isinstance-and-type-in-python)）。例如，它会告诉您变量是否为字符串（`str`或`unicode`），因为它们派生自`basestring`)

```
if isinstance(obj, basestring):
    i_am_string(obj) 
```

专门针对`pandas` `DataFrame`对象：

```
import pandas as pd
isinstance(var, pd.DataFrame) 
```

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2013-02-11T09:15:10.797

使用内置`isinstance()`函数。

```
import pandas as pd

def f(var):
    if isinstance(var, pd.DataFrame):
        print("do stuff") 
```

# c++ - 外部链接会增加链接/构建时间吗？

> ID：14808949
> 
> 赞同：1
> 
> 时间：2013-02-11T09:10:17.213
> 
> 标签：c++, compilation, linker

我读过最好有内部链接（对于变量、自由函数等），因为这将减少从特定编译单元“导出”的符号数量。这样构建时间可能会更好。

这是真的？

使用内部链接的另一个优点是名称冲突不会有任何问题。

参考：[大规模 C++ 软件设计](https://rads.stackoverflow.com/amzn/click/com/0201633620)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:36:03.860

理论上是的，但是...... C++ 向泛型编程发展。命名空间的引入限制了名称冲突问题。

以“仅头文件库”的形式编写程序总是更频繁，这些程序从单个 cpp 文件分层包含，该文件仅包含一个 main，其目的是实例化一个负责所有编排的“管理器对象”，并提供最后的手段“ catch" 用于最终逃脱的异常。长符号表可以通过“预编译头”来加快速度。

从这个意义上说，所有的链接都是“内部的”，因为没有什么可以“输出”。

更一般地说，很少的外部链接会导致更快的链接时间，很少的内部链接会导致更快的编译时间。当内部表和外部表相互平衡时，最有可能达到最佳最小值。但还有许多其他重要因素需要注意。

我想知道这样的书是否仍然可以被认为是当今标准的“好”：您是否注意到它所建议的 - 例如 - 关于迭代器的内容除了今天的标准库所做的之外都是什么？

# performance - 调整和优化图像并将它们加载到 CDN 中，而不是通常将它们从原始 CDN 链接到默认图像大小

> ID：14808953
> 
> 赞同：0
> 
> 时间：2013-02-11T09:10:32.177
> 
> 标签：performance, cdn

我们有一个网站，在该网站上我们展示了来自我们供应商的各种产品。提供商向我们提供来自其 CDN 的图像。问题是我们有一个比原始图像尺寸更小的图像框架（图像尺寸也因提供者而异），所以我们在 HTML 中设置图像尺寸是这样的（所有图像都是 200 像素 x 200 像素）：

```
<img src="image1_Provider1.jpg" width="200" height="200" />
<img src="image2_Provider1.jpg" width="200" height="200" />
...
<img src="image37_Provider8.jpg" width="200" height="200" /> 
```

我们大约有来自 8 个供应商的大约 300 种产品，这意味着我们的网站上有 300 张图片，这是网站加载缓慢的主要原因（更不用说它在移动设备上的速度有多慢了）。现在，我已经阅读了[Steve Souders](http://stevesouders.com)的两本书（[高性能网站](http://stevesouders.com/hpws/)甚至[更快的网站](http://stevesouders.com/efws/)），并且我已经实施了他所说的可以提高页面速度[的规则](http://stevesouders.com/hpws/rules.php)（实际上我已经设法提高了初始页面加载速度和重新加载确实发生得很快，因为我们缓存了图像），但仍然存在主要问题 - 由于图像而导致的初始加载速度。

所以，终于进入正题了；我有一个想法将所有图像拉到我们的服务器并以我会的方式操作它们（我们有权这样做）：

*   调整图像大小以在我们的图像框架中完美匹配像素 - 因此不必在 HTML标记中放置`width`和`height``img`
*   [使用jpegtran](http://jpegclub.org/jpegtran/)优化图像
*   将每个提供程序图像放到它自己的子域中，如下所示：`provider1.oursite.com`, `provider2.oursite.com`, 等等... - 这些子域实际上是机架空间 CDN 的别名，因此我将[在 Chrome 中进行 6 次并行下载，](http://www.stevesouders.com/blog/2008/03/20/roundup-on-parallel-connections/)因为主机名不同，根据[这个](http://www.stevesouders.com/blog/2009/05/12/sharding-dominant-domains/)

考虑到这一切——图像的大小显然会更小，因此我的结论是网站最初应该加载得更快，我们应该在[YSlow](http://developer.yahoo.com/yslow/)或[Google Page Insights](https://developers.google.com/speed/pagespeed/insights)等工具中获得更好的结果。我看到的可能的缺点是，由于将 CDN 与 Rackspace 一起使用，我们必须为增加的带宽付费，但事实证明这对管理来说不是问题。

我的问题是上面所说的是否有意义？我是否可能忽略了我“如此聪明”的可能解决方案的一些明显缺陷？只是这样我就不会在这上面花费大量时间，然后最终发现我错了，所以请有类似情况的人发表他的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:47:20.077

将图像调整到所需的大小非常棒。继续保留 HTML 尺寸，因为这有助于渲染。小心过度分片 - 你应该只在 2-4 个域之间分片 - 大多数研究表明 2 是最好的。但是您可能要做的#1 修复是仅加载首屏上方的图像，并在用户滚动时延迟加载（使用 JavaScript）其他图像。（是

# java - 从给定日期获取周一到周五的周日期

> ID：14808958
> 
> 赞同：1
> 
> 时间：2013-02-11T09:11:05.927
> 
> 标签：java, android, android-calendar

我想从给定日期获取周一到周五的周日期。

假设给定日期是 6-2-2013

我想要结果：

```
Monday    4-2-2013
Tuesday   5-2-2013
Wednesday 6-2-2013
Thursday  7-2-2013
Friday    8-2-2013 
```

或者甚至我的第 6 周...我怎样才能达到关于结果

我从下面的代码中得到周数

```
Calendar c = Calendar.getInstance();
c.set(Calendar.DAY_OF_MONTH, 6);
c.set(Calendar.MONTH, 1);
c.set(Calendar.YEAR, 2013);

int weekNo = c.get(Calendar.WEEK_OF_YEAR); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T10:50:41.530

试试这个……我已经对 Achintya Jha 代码进行了编辑并添加了更多更改……工作得很好，感谢 Achintya Jha

```
Calendar c = Calendar.getInstance();
c.set(Calendar.DAY_OF_MONTH, 14);
c.set(Calendar.MONTH, 1);
c.set(Calendar.YEAR, 2013);

int weekNo = c.get(Calendar.WEEK_OF_YEAR);

//Set the Week No
c.set(Calendar.WEEK_OF_YEAR, weekNo);

c.clear();

//Set the Week Year and the Week No
c.set(Calendar.WEEK_OF_YEAR, weekNo);
c.set(Calendar.YEAR, 2013);

SimpleDateFormat formatter = new SimpleDateFormat("EEE dd/MM/yyyy"); // PST`
//Get Week Start Date 
Date startDate = c.getTime();
//Now it will be sunday so add plus one so now it becomes Monday
c.add(Calendar.DATE, 1);
for (int i = 0; i < 5; i++) {
    //From Monday to Friday Dates will be Printed
    System.out.println(formatter.format(c.getTime()));
    c.add(Calendar.DATE, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:49:18.873

从 2013 年 6 月 2 日起：

```
 GregorianCalendar c = new GregorianCalendar(2013, 1, 6);
        c.add(Calendar.DAY_OF_YEAR, Calendar.MONDAY - c.get(Calendar.DAY_OF_WEEK));
        DateFormat df = new SimpleDateFormat("d-M-yyyy");
        while(c.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY) {
            if (c.get(Calendar.YEAR) == 2013) {
                System.out.printf("%-10tA%10s%n", c.getTime(), df.format(c.getTime()));
            }
            c.add(Calendar.DAY_OF_YEAR, 1);
        }
prints

    Monday      4-2-2013
    Tuesday     5-2-2013
    Wednesday   6-2-2013
    Thursday    7-2-2013
    Friday      8-2-2013
from week 6 of 2013:

    GregorianCalendar c = new GregorianCalendar(2013, 0, 1);
    c.add(Calendar.WEEK_OF_YEAR, 6 - 1);
    c.add(Calendar.DAY_OF_YEAR, Calendar.MONDAY - c.get(Calendar.DAY_OF_WEEK));
        DateFormat df = new SimpleDateFormat("d-M-yyyy");
        while(c.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY) {
            if (c.get(Calendar.YEAR) == 2013) {
                System.out.printf("%-10tA%10s%n", c.getTime(), df.format(c.getTime()));
            }
            c.add(Calendar.DAY_OF_YEAR, 1);
        } 
```

印刷

```
Monday      4-2-2013
Tuesday     5-2-2013
Wednesday   6-2-2013
Thursday    7-2-2013
Friday      8-2-2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:26:16.223

```
public static void main(String[] args) {
    getWeekOfDates(2013, 2, 11);

}

private static void getWeekOfDates(int year, int month, int day) {

    Calendar c = Calendar.getInstance();
    c.set(Calendar.YEAR, year);
    c.set(Calendar.MONTH, month);
    int weekOfMonth = c.get(Calendar.WEEK_OF_MONTH);
    c.set(Calendar.WEEK_OF_MONTH, weekOfMonth);

    DateFormat df = new SimpleDateFormat("EEE dd-MM-yyyy");
    for (int i = 0; i < 5; i++) {
        System.out.println(df.format(c.getTime()));
        c.add(Calendar.DATE, 1);
    }

} 
```

试试这个：我根据您的要求进行了编辑。

输出：

```
Mon 11-03-2013
Tue 12-03-2013
Wed 13-03-2013
Thu 14-03-2013
Fri 15-03-2013 
```

# wpf - Wpf 文本框转换器与 updatesourcetrigger=propertychanged 结合使用加倍

> ID：14808976
> 
> 赞同：0
> 
> 时间：2013-02-11T09:11:48.427
> 
> 标签：wpf, validation, binding, textbox, updatesourcetrigger

在我们的项目中，我们有一个绑定到双精度的 WPF 文本框。有一个转换器允许在转换回中例如同时使用“.”。和“，”作为小数点，并在转换方法中将双精度格式化为 n2 数字格式。在这里您可以看到我们转换器的简化版本：

```
public class DoubleConverter:IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null || value.GetType() != typeof(double))
            return null;
        else
            return ((double)value).ToString("n2");
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null)
           return null
        else
             return Double.Parse(((string)value).Replace('.',','));
    }
} 
```

文本框如下所示：

```
 <TextBox  Text="{Binding Path=Factor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" Width="500" Height="50" /> 
```

并且双重属性引发了一个 propertychanged 事件：

```
public double Factor
    {
        get { return _factor; }
        set
        {
            _factor = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("Factor"));
        }
    } 
```

这在以前版本的 WPF 中可以正常工作，因为在输入文本时没有调用转换。这种行为显然已经改变，现在在每个文本条目上调用转换方法，导致在您键入内容时对双精度进行格式化。即使您不使用格式化，您也会遇到无法输入小数点的问题。

这可以通过不使用 UpdateSourceTrigger=Propertychanged 来解决，但我们需要它进行验证。我们使用 IDataErrorInterface 实现验证。我知道有一个[ValidateWithoutUpdate 方法](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpressionbase.validatewithoutupdate%28v=vs.100%29.aspx)，但这不适用于使用 IDataErrorInterface 进行验证。

所以我基本上需要的是ConvertBack（以及验证）发生OnPropertyChanged，而Convert只发生OnLostFocus。
这可能吗？或者我们的问题有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:58:35.347

是的，行为从 .Net 3.5 更改为 .Net 4.0，它现在将源更新发送回目标，即使更新源自目标。这个 SO post 解释了一下并提供了一个解决方案：

[为什么绑定设置在 .NET 4 和 .NET 3.5 中的行为不同](https://stackoverflow.com/questions/4712917/why-does-binding-setup-behave-differently-in-net-4-vs-net-3-5)

这些是我迄今为止发现的用于处理此问题的选项：

*   让转换器保持 ConvertBack 上的输入状态并在 Convert 中恢复它（建议在上面的链接中）
*   将支持数据更改为字符串，处理模型中的转换
*   创建一个处理这种数字输入的自定义控件，类似于 DateTimePicker 的工作方式（它维护数据的字符串和双精度表示；显示字符串，但受双精度约束）

# javascript - Javascript for循环新条件

> ID：14808982
> 
> 赞同：0
> 
> 时间：2013-02-11T09:12:22.920
> 
> 标签：javascript, jquery

请检查以下代码：

```
for(i=0; i-DIL; i++)//see the condition here i-DIL .Is this correct?
 { 

} 
```

上面 for 循环中的第二个条件是否正确？如果是，那是什么意思？

实际代码是：

```
 javascript:R=0;  
 x1=.1; y1=.05;
 x2=.25; y2=.24;
 x3=1.6; y3=.24;
 x4=300; y4=200;
 x5=300; y5=200;
 DI=document.getElementsByTagName("img");
 DIL=DI.length; 
 function A(){for(i=0; i-DIL; i++)//see the condition here i-DIL .Is this correct?
 { 
 DIS=DI[ i ].style;
 DIS.position='absolute';
 DIS.left=(Math.sin(R*x1+i*x2+x3)*x4+x5)+"px"; 
 DIS.top=(Math.cos(R*y1+i*y2+y3)*y4+y5)+"px"}

R++

}
 setInterval('A()',5); void(0); 
```

还有谁能帮我描述在脚本末尾放置 void(0) 的原因？而且你可以看到反复设置的图像位置一遍又一遍。我怎样才能克服这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T09:16:35.370

它是否“正确”取决于您希望`for`循环做什么。然而，它是有效的代码，并且取决于`0`JavaScript 中是“假的”，而其他数字是“真”的事实。

本质上，当`i`和`DIL`相等时，`i - DIL`等于`0`，出于`for`循环条件的目的，它被评估为`false`，并且它停止迭代。鉴于这`DIL`是集合的长度，它是一种有趣（但在技术上有效）的迭代整个集合的方法。

它相当于（虽然我会说可读性低于）：

```
for(i=0; i < DIL; i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T09:14:04.643

这意味着执行下面的代码直到`i-DIL != 0`。即在你的代码中它会一直工作到`i`到达`DIL`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T09:16:22.633

for 循环**通常**需要：

```
for(variable definition; condition; increment) {} 
```

所以，你需要一个条件。但是，由于 Javascripts 具有松散的内容类型，因此您不必使用*比较*来将其设为`true`或`false`.

```
10 - 1          // = 9 equals true
10 - 9          // = 1 equals true
10 - 10         // = 0 equals false

"legit string"  // equals true
NULL            // equals false 
```

但是，我确实建议进行实际比较，以避免讨厌的浏览器破坏您的条件。

```
for(var i = 0; i - DIL > 0; i++) {} 
```

# joomla - Virtuemart 卡在离线模式

> ID：14808987
> 
> 赞同：0
> 
> 时间：2013-02-11T09:12:42.157
> 
> 标签：joomla, virtuemart

我取消选中 Virtuemart 后端中的“离线模式”框，但该站点仍显示离线消息。我尝试添加 define('PSHOP_IS_OFFLINE', ''); 到配置文件，但没有运气。有任何想法吗？

# c-preprocessor - 允许 GUI 库扩展的预处理器宏功能

> ID：14808995
> 
> 赞同：0
> 
> 时间：2013-02-11T09:13:14.043
> 
> 标签：c-preprocessor, preprocessor-directive

我正在尝试创建一个预处理器宏函数，为我正在制作的我自己的 GUI 库注册回调函数。该库旨在通过使用上述宏功能由第三方轻松扩展。

**我的问题：**我的宏函数包括我认为不允许的其他预处理器指令。我想对我的 REGISTER_CUSTOM_CALLBACK_FUNCTION 进行编码，以允许用户创建自己的小部件并使用主 GUI 库注册自己的回调函数。有什么想法我仍然可以实现我想要做的事情吗？

```
#define FORWARD_DECLARE_CALLBACK_FUNCTION(callbackFunctName) Integer callbackFunctName(Draw_Box& window, Integer windowIndex, Integer id, Text cmd, Text msg);

#define REGISTER_CUSTOM_CALLBACK_FUNCTION(callbackFunctName) \
    #ifndef CUSTOM_CALLBACK_1 \
        #define CUSTOM_CALLBACK_1 \
        FORWARD_DECLARE_CALLBACK_FUNCTION(callbackFunctName) \
    #elif !defined CUSTOM_CALLBACK_2 \
        #define CUSTOM_CALLBACK_2  \
        FORWARD_DECLARE_CALLBACK_FUNCTION(callbackFunctName) \
    #endif

// Intended Usage: In a customers code they will be able to create their own 
// Widgets with their own Window Callback functions like this...
REGISTER_CUSTOM_CALLBACK_FUNCTION(progressBarCallback)

... some other code

REGISTER_CUSTOM_CALLBACK_FUNCTION(hyperlinkCallback) 
```

这是每个时钟步骤调用的主窗口回调：

```
Integer main_callback(Draw_Box& window, Integer windowIndex, Integer id, Text cmd, Text msg)
{
    #ifdef CUSTOM_CALLBACK_1 
        CUSTOM_CALLBACK_1(window, windowIndex, id, cmd, msg); 
    #endif 
    #ifdef CUSTOM_CALLBACK_2 
        CUSTOM_CALLBACK_2(window, windowIndex, id, cmd, msg); 
    #endif 
} 
```

**有什么想法可以编写我的 REGISTER_CUSTOM_CALLBACK_FUNCTION 以允许用户创建自己的小部件并使用主 GUI 库注册自己的回调函数？**

# android - Gridview 与每个值的布局（imageview + imagebutton）

> ID：14808997
> 
> 赞同：5
> 
> 时间：2013-02-11T09:13:18.693
> 
> 标签：android, layout, gridview, imagebutton, adaptor

是否可以制作一个网格视图，而不是图片网格，图片网格在每个图片下方都有一个小图像按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T09:27:47.187

*简短的回答：*是的。你可以在 a中有一个`ImageView`和一个。`ImageButton``GridView`

*长答案：*

您自然必须`GridView`为此目的创建一个自定义。

例如：

创建一个将保存容器的 XML `GridView`，例如`grid.xml`：

```
<GridView
    android:id="@+id/gridFriends"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clipChildren="true"
    android:columnWidth="100dp"
    android:fastScrollEnabled="true"
    android:gravity="center"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth" >
</GridView> 
```

并且，要`GridView`定义. 说，：`ImageView``ImageButton``grid_items.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp" >

    <FrameLayout
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:gravity="center" >

        <ImageView
            android:id="@+id/imgProfilePicture"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:adjustViewBounds="true"
            android:scaleType="centerCrop"
            android:src="@null" />

        <ImageButton
            android:id="@+id/imgbtnDemo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center"
            android:background="@null"
            android:gravity="center"
            android:src="@drawable/ic_contact_picture" >
        </ImageButton>
    </FrameLayout>

</RelativeLayout> 
```

最后，如果您熟悉 custom 的概念，稍加`ListViews`修改，您也可以实现自定义`GridView`。如果您不熟悉自定义`ListViews`或`GridViews`，请按照本教程了解如何创建自定义`GridView`： http: [//www.coderzheaven.com/2012/02/29/custom-gridview-in-android-a-simple-example/](http://www.coderzheaven.com/2012/02/29/custom-gridview-in-android-a-simple-example/) . 或者使用这个[谷歌搜索](https://www.google.co.in/#hl=en&safe=off&tbo=d&sclient=psy-ab&q=android+custom+gridview+example&oq=android+custom+gridview&gs_l=hp.3.1.0j0i7j0l2.67.6157.0.7796.23.23.0.0.0.6.474.4796.0j14j5j2j2.23.0.les%3B..0.0...1c.1.2.hp.mQ3YMh3tzDI&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42080656,d.bmk&fp=aa8f2157e742c828&biw=1440&bih=775)来获取更多相同的教程。

**这里重要的一点是，如果您需要在`ImageButton's`单击它们时执行功能，`onClickListener`则需要在`Adapter`.**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T09:24:40.440

`GridView`显示一个网格`Views`。它可以显示任何扩展`View`类的东西。它可以在其中显示 a`LinearLayout`和`ImageView`an `ImageButton`。

# .net - 我应该将 src\packages 中的二进制文件也签入源代码管理吗？

> ID：14808999
> 
> 赞同：1
> 
> 时间：2013-02-11T09:13:28.567
> 
> 标签：.net, dll, nuget, packages

我是否应该将解决方案的 packages 文件夹中的二进制文件也签入 TFS（或任何源代码控制服务器）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:15:08.740

是的，如果您的项目没有它们就无法工作。我个人将我的依赖项作为 NuGet 分发，因此我不需要在 TFS 中检查它们。当有人获得最新版本的项目时，会自动从各自的位置检索相关的 NuGet。

始终考虑最近重新安装了 Visual Studio 的机器，开发人员从 TFS 获取项目的最新版本。这个项目应该在开发人员不需要做任何事情的情况下构建。刚打`Shift+F6`。