# StackOverflow 问答 14775000-14775999

# ruby-on-rails - 渲染后实例变量不可用

> ID：14775003
> 
> 赞同：0
> 
> 时间：2013-02-08T14:43:36.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个注册和登录页面，其中包含一些来自已注册用户的图像。我有一个会话和用户控制器来分别登录和注册用户到我的应用程序。

会话控制器

```
 def new
      @users = User.last(3)
    end

    def create
      user = User.find_by_email(params[:session][:email].downcase)
      if user && user.authenticate(params[:session][:password])
        sign_in user
        redirect_back_or user
      else
        flash.now[:error] = "Wrong email/password combination"
        render 'new'
      end
    end 
```

然后我使用实例变量@user 来显示最近 3 个用户的图像。这也适用于我的用户控制器。我的`slider`“新”观点有一部分

_slider.html.erb

```
 <% for user in @users do %>
            <div class="item">
                <%= image_tag user.photos.first.image.url(:large) %>
                <div class="carousel-caption">
                    <h4><%= user.name %></h4>
                    <p><%= user.tagline %></p>
                </div>
            </div>
    <% end %> 
```

这在注册和登录页面都可以正常工作，直到注册/登录表单包含错误。我得到这个错误`undefined method 'each' for nil:NilClass`。我认为`@user`渲染页面后该变量不可用。

重新渲染新操作后如何使其可用？或者我应该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:48:00.943

在 else 块上，您需要声明`@users`变量，因为您正在呈现新模板。

```
else
  @users = User.last(3)
  flash.now[:error] = "Wrong email/password combination"
  render 'new'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:22:54.197

每个 http 请求都是无状态的，不知道之前的值（无状态）。因此，如果部分被渲染，它也需要`@users`新的动作`@users`。因此，您需要在控制器中或从 params[:xx]`before_filter`设置/初始化对象`@users`

```
before_filter: initialize_values
def initialize_values
  @users = User.last(3)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:44:40.757

也许你忘了使用@：使用@user 而不是用户

# wpf - 通过上下文菜单将参数传递给 DevExpress TreeListControl

> ID：14775007
> 
> 赞同：1
> 
> 时间：2013-02-08T14:43:41.990
> 
> 标签：wpf, devexpress, contextmenu, commandparameter

我有一个 TreeListControl，我想将选定的行作为参数传递给我的上下文菜单。所以我的控制看起来像：

**看法：**

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" 
        xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/grid" >

    <dxt:TreeListControl Name="treeList" ItemsSource="{Binding MyCollection}">

        <!-- Context menu I AM HAVING TROUBLE HERE PASSING A PARAMETER TO THE COMMAND -->
        <dxt:TreeListControl.ContextMenu>
            <ContextMenu>
                <MenuItem Header="Mount"
                    Command="{Binding MyCustomCommand}"   
                    CommandParameter="{Binding SELECTED_JUST_CLICKED_ROW_OF_THIS_CONTROL}">
                    <MenuItem.Icon>
                        <Image Source="/Server;component/Images/SomeImage.png" Width="40"  />
                    </MenuItem.Icon>
                </MenuItem>
            </ContextMenu>
        </dxt:TreeListControl.ContextMenu>

        <!-- Columns of the control -->
        <dxt:TreeListControl.Columns>                     
            <dxt:TreeListColumn FieldName="Name" Header="Name"/>
            <dxt:TreeListColumn FieldName="Position" Header="Position"/> 
        </dxt:TreeListControl.Columns>
        <!-- View -->
        <dxt:TreeListControl.View>
            <dxt:TreeListView Name="treeListView1" AutoWidth="True"
                              KeyFieldName="ID" ParentFieldName="ParentID"/>
        </dxt:TreeListControl.View>
    </dxt:TreeListControl>

</Window> 
```

**代码背后**

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Documents;

namespace WpfApplication2
{
    public partial class MainWindow : Window
    {        
        // Properties that are binded on View
        public ObservableCollection<Employee> MyCollection {get;set;}
        public MyCommand MyCustomCommand { get; set; }

        public MainWindow ( )
        {
            InitializeComponent( );

            // init properties
            MyCollection = new ObservableCollection<Employee>();
            MyCustomCommand = new MyCommand();

            // bind properties to view
            this.DataContext = this;

            // add items to observable collection
            foreach(var employee in GetStuff() )
                 MyCollection.Add( employee );              
        }

        // generate employees
        public static List<Employee> GetStuff ( )
        {
            List<Employee> stuff = new List<Employee>( );

            stuff.Add( new Employee() { ID = 2 , ParentID = 0 , Name = "Irma R. Marshall" } );    
            stuff.Add( new Employee() { ID = 6 , ParentID = 2 , Position = "Brian C. Cowling" } );
            stuff.Add( new Employee() { ID = 7 , ParentID = 2 , Position = "Thomas C. Dawson" } );                                        
            return stuff;
        }        
    }
}

public class Employee
{
    public int ID { get; set; }
    public int ParentID { get; set; }
    public string Name { get; set; }
    public string Position { get; set; }
}

public class MyCommand : ICommand
{                
    public bool CanExecute ( object parameter )
    {
        // Here I want parameter to be selected ROW!!!!
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute ( object parameter )
    {
        // Here I want parameter = selected row !!!!

        // based on value of parameter perform logic
    }
} 
```

一切正常，但 CommandParameter 除外。我试过这样的事情：

```
CommandParameter="{Binding RowHandle.Value}"
CommandParameter="{Binding Data.Name}"
CommandParameter="{Binding Data}"
CommandParameter="{Binding ElementName=treeList, Path=Name}" 
```

他们都返回null ...我能够传递的唯一参数是：

```
CommandParameter="Foo" 
```

* * *

## 编辑

**DevExpress 回答了这个问题： http: [//www.devexpress.com/Support/Center/Question/Details/Q473660](http://www.devexpress.com/Support/Center/Question/Details/Q473660)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:18:39.727

```
<ContextMenu Name="MyContextMenu" Tag="{Binding PlacementTarget,RelativeSource={RelativeSource Self}}">
            <MenuItem Header="Mount" Command="{Binding MyCustomCommand}" CommandParameter="{Binding Tag , ElementName= MyContextMenu}"/>
        </ContextMenu> 
```

这将为您提供打开此 ContextMenu 的控件。我希望这会给您一个想法。

# javascript - 为什么jquery标签被隐藏了？

> ID：14775009
> 
> 赞同：0
> 
> 时间：2013-02-08T14:43:46.507
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs

我用 jQuery 创建标签：

HTML：

```
<div id="tabs">

    <ul id="tab">
           <li>
             <a href="#t1">Tab 1</a>
           </li>
           <li>
             <a href="#t2">Tab 2</a>
           </li>
    </ul>

    <div id="tab-contents">
      <div id="t1">aaaaaaaaaa</div>
      <div id="t2">bbbbbbbbbb</div>
    </div>

</div> 
```

JS：

```
$("#tabs").tabs() 
```

我清空我的标签

```
var tab = $("#tab").html()
var tabCont = $("#tab-contents").html()
$("#tab").empty()
$("#tab-contents").empty() 
```

并尝试重新粉刷它：

```
$("#tab").html(tab )
$("#tab-contents").html(tabCont )
$("#tabs").tabs() 
```

它创建标签的元素但不显示它们

什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:54:11.867

jQueryUI 在创建 UI 组件时会向标签添加一大堆数据。我的猜测是它在以前的 UI 数据上绊倒了，并且没有正确地重新创建它。要修复它，请在重新绘制时破坏旧的选项卡数据，如下所示：

```
$("#tabs").tabs( "destroy" );
$("#tab").html(tab )
$("#tab-contents").html(tabCont )
$("#tabs").tabs() 
```

# asp.net - asp.net GridView 吐出无效的 HTML

> ID：14775010
> 
> 赞同：4
> 
> 时间：2013-02-08T14:43:47.870
> 
> 标签：asp.net, vb.net, validation

我想知道是否有办法删除 GridView 在创建后吐出的无效 HTML 代码？

```
<table cellspacing="0" rules="all" 
```

我想删除 cellspacing 和 rules 属性。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:56:05.217

刚发现把

```
<asp:GridView CellSpacing="-1" 
```

删除不需要和已弃用的 cellspacing 属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T16:42:44.650

您可以通过更改 GridView 的 GridLines 属性的设置来删除 rules="all"。

谢谢

# javascript - 如何将 .delay 添加到 .click 上的 .each 迭代（jquery）

> ID：14775011
> 
> 赞同：3
> 
> 时间：2013-02-08T14:43:48.480
> 
> 标签：javascript, jquery, delayed-execution

所以，我想延迟这段 JavaScript 代码。

```
$(function(){ 
     $('.clickThis').each(function(){ 
         $(this).click();
     }); 
}); 
```

我试过这个

```
$(function(){ 
     $('.clickThis').each(function(){
         $(this).click().delay(5000); 
     }); 
}); 
```

上面的脚本不起作用。

有没有其他选择？

我已经尝试过谷歌它，但我仍然无法弄清楚，因为我对 JavaScript 知之甚少。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T14:48:32.910

这将做到：

```
$(function(){ 
    $('.clickThis').each(function(i, that){ 
        setTimeout(function(){
            $(that).click();
        }, 5000*i );
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T15:19:05.180

这是使用递归`setTimeout`循环的版本。

```
$(function() {
    var click = $('.clickThis').toArray();

    (function next() {
        $(click.shift()).click();   // take (and click) the first entry
        if (click.length) {         // and if there's more, do it again (later)
            setTimeout(next, 5000);
        }
    })();
}); 
```

这种模式优于`setTimeout(..., 5000 * i)`或`setInterval`调用的优点是一次只有一个计时器事件排队。

一般来说，重复调用`setTimeout`比一次调用要好，`setInterval`原因如下：

1.  `setInterval`即使浏览器未处于活动状态，调用也可以将多个事件排队，然后当浏览器再次变为活动状态时，所有事件都会尽快触发。递归调用`setTimeout`可确保遵守事件之间的最小时间间隔。
2.  您必须记住计时器手柄，`setInterval`以便清除它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:48:13.953

尝试使用这个：

```
$(function () {
    var items=$('.clickThis');
    var length=items.length;
    var i=0;
    var clickInterval=setInterval(function(){
        items.eq(i).click();
        i++;
        if(i==length)
            clearInterval(clickInterval);
    }, 5000);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:49:45.187

您需要编写一个异步 setTimeout 循环，以获取更多信息[http://www.erichynds.com/javascript/a-recursive-settimeout-pattern/](http://www.erichynds.com/javascript/a-recursive-settimeout-pattern/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T14:50:49.447

```
var $clickthis=$(".clickthis");
var i= -1;
var delayed = setInterval(function(){
 if (++i < $clickthis.length) $clickthis.eq(i).trigger("click");
 else clearInterval(delayed);
}, 5000); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-08T14:45:47.080

我不确定，但我认为 setTimeout 函数应该可以解决问题。见这里[https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-02-08T14:50:00.640

尝试

```
$(function(){ 
     $('.clickThis').each(function(_,i){ 
        var me=$(this);
        setTimeout(function(){me.click()},5000*i);
     ); 
}); 
```

# android - 我需要与 MySQL 等效的 SQLite 来处理 unix 时间戳

> ID：14775012
> 
> 赞同：3
> 
> 时间：2013-02-08T14:43:57.320
> 
> 标签：android, sqlite, unix-timestamp

我在 SQLite 中使用 unix 时间戳并将它们存储为整数。我的问题是我试图根据它们的 unix 时间戳选择今天的记录，但我不知道要使用什么函数。

这是我将在 MySQL 中使用的内容：

`where date_format(from_unixtime(COLUMN_DATE), '%Y-%m-%d')= date_format(now(), '%Y-%m-%d')`

但是，当我尝试使用这些函数时，我在日志中收到错误，告诉我它们对于 SQLite 不存在。

我如何为 SQLite 编写这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T14:49:35.400

SQLite 日期和时间函数记录在[http://sqlite.org/lang_datefunc.html](http://sqlite.org/lang_datefunc.html)。

相当于你的`WHERE`条款将是

```
WHERE date(COLUMN_DATE,'unixepoch') = date('now') 
```

# python - 如何在 Pyramid 中使用 SQLAlchemy 的事件

> ID：14775014
> 
> 赞同：0
> 
> 时间：2013-02-08T14:43:59.587
> 
> 标签：python, sqlalchemy, pyramid

*视图.py*

```
def add_post(topic, request):
    post_form = PostForm(request.POST)
    if 'submit' in request.POST and post_form.validate():
        post = Post(body=post_form.body.data)
        post.user = request.user
        post.topic = topic
        DBSession.add(post)
        request.session.flash(_('Post was added'))
        transaction.commit()
        raise HTTPFound(location=request.route_url('topic',id=topic.id))
    return {'post_form':post_form} 
```

*模型.py*

```
class Topic(Base):
    __tablename__ = 'topics'
    id = Column(Integer, primary_key=True)
    ...
    post_count = Column(Integer, default=0)
    posts = relationship('Post', primaryjoin="Post.topic_id==Topic.id", backref='topic', lazy='dynamic')

class Post(Base):
    __tablename__ = 'posts'
    id = Column(Integer, primary_key=True)
    ...
    topic_id = Column(Integer, ForeignKey('topics.id'))

def post_inserted(mapper, conn, post):
    topic = post.topic
    topic.post_count = topic.posts.count()

event.listen(Post, "after_insert", post_inserted) 
```

我想在我的 Pyramid 应用程序中使用 SQLAchemy 事件“after_insert”，以更新主题模型，其中包含属于它的帖子数。但我得到了例外：

```
Traceback (most recent call last):
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/waitress/channel.py", line 329, in service
    task.service()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/waitress/task.py", line 173, in service
    self.execute()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/waitress/task.py", line 380, in execute
    app_iter = self.channel.server.application(env, start_response)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/pyramid/router.py", line 251, in __call__
    response = self.invoke_subrequest(request, use_tweens=True)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/pyramid/router.py", line 227, in invoke_subrequest
    response = handle_request(request)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/pyramid_tm/__init__.py", line 107, in tm_tween
    return response
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/transaction/_manager.py", line 116, in __exit__
    self.commit()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/transaction/_manager.py", line 107, in commit
    return self.get().commit()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/transaction/_transaction.py", line 354, in commit
    reraise(t, v, tb)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/transaction/_transaction.py", line 345, in commit
    self._commitResources()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/transaction/_transaction.py", line 493, in _commitResources
    reraise(t, v, tb)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/transaction/_transaction.py", line 465, in _commitResources
    rm.tpc_begin(self)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/zope/sqlalchemy/datamanager.py", line 86, in tpc_begin
    self.session.flush()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/session.py", line 1583, in flush
    self._flush(objects)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/session.py", line 1654, in _flush
    flush_context.execute()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/unitofwork.py", line 331, in execute
    rec.execute(self)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/unitofwork.py", line 475, in execute
    uow
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/persistence.py", line 67, in save_obj
    states_to_insert, states_to_update)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/persistence.py", line 702, in _finalize_insert_update_commands
    mapper.dispatch.after_insert(mapper, connection, state)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/event.py", line 291, in __call__
    fn(*args, **kw)
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/events.py", line 360, in wrap
    wrapped_fn(*arg, **kw)
  File "/home/user/workspace/myforum/cube_forum/models.py", line 165, in post_saved
    topic.post_count = topic.posts.count()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/dynamic.py", line 249, in count
    sess = self.__session()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/dynamic.py", line 219, in __session
    sess.flush()
  File "/home/user/workspace/myforum/env/lib/python2.6/site-packages/sqlalchemy/orm/session.py", line 1577, in flush
    raise sa_exc.InvalidRequestError("Session is already flushing")
InvalidRequestError: Session is already flushing 
```

如何在 Pyramid/SQLalchemy 中正确执行？

编辑：问题实际上是如何在 Pyramid 中使用 SQLAlchemy 的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:44:03.077

SQLAlchemy 事件“after_insert”不适合此任务。

答案是使用 Pyramid 的自定义事件，如此处所述[http://dannynavarro.net/2011/06/12/using-custom-events-in-pyramid/](http://dannynavarro.net/2011/06/12/using-custom-events-in-pyramid/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:49:40.970

我看到数据库级别存在问题 - 无法保证获得有效的帖子计数值。想象一下，如果在多个事务中同时将两个或多个帖子添加到主题 - 除非您在每次添加新帖子时锁定主题表或记录，否则无法确定相关帖子的有效计数。

可能的解决方案：

1) 将方法添加到主题类。总是有效的数字，但它每次都会对数据库执行查询。

```
class Topic(Base):
    ...
    def posts_count(self):
        return self.posts.count() 
```

2) 将帖子添加到主题并在代码中更新 post_count，而不使用 after_insert 事件。每次更改帖子主题时，您都需要更新 topic.post_count。此外，当多个帖子同时添加到主题时，此方法也无法解决我描述的问题。

```
def add_post(topic, request):
    post_form = PostForm(request.POST)
    if 'submit' in request.POST and post_form.validate():
        post = Post(body=post_form.body.data)
        post.user = request.user

        topic.posts.append(post)
        topic.post_count = topic.posts.count()

        DBSession.add(post)
        DBSession.add(topic)

        request.session.flash(_('Post was added'))
        transaction.commit()
        raise HTTPFound(location=request.route_url('topic',id=topic.id))
    return {'post_form':post_form} 
```

# sql - 获取没有子查询的引用

> ID：14775021
> 
> 赞同：1
> 
> 时间：2013-02-08T14:44:16.620
> 
> 标签：sql, oracle

我在表中有以下数据：

```
select p.number, pr.refNumber from part p, partref pr where pr.refNumber = p.id;

number                                   refNumber
---------------------------------------- ---------------------- 
1                                        1                    
2                                        2
2                                        3        
2                                        4 
```

我需要删除旧的 partref，part 应该只存在一个 partref。首先，我需要获取所有应该删除的 partref。没有子查询（子选择）可以做到吗？怎么做？

* * *

更新。

“OLD”partrefs 是最迟未创建的所有 partref 记录。例如：

```
 refNumber                                  creationDate
---------------------------------------- ---------------------- 
1                                        01-01-13                   
2                                        01-02-13
3                                        02-02-13        
4                                        03-02-13 
```

对于 id = 2 的部分，存在多个部分引用，如 2、3、4。只有第 4 部分引用不应被删除，因为它是最晚创建的。应该删除 refNumber 为 2 和 3 的 Partref。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:47:59.047

鉴于您的编辑，这应该有效：

```
SELECT DISTINCT p.num, 
  MAX(pr.refNumber) OVER (PARTITION BY p.Num ORDER BY CreationDate DESC)  as refNumberToKeep
FROM part p
  INNER JOIN partref pr ON pr.refNumber = p.id 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!4/d66c4/5)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:57:33.380

我认为这是一个非常适合分析函数的地方。获取您想要保留的参考编号非常容易。但是，它仍然需要一个子查询：

```
select *
from (select p.number, pr.refNumber, pr.CreationDate,
            MAX(ref.CreationDate) over (p.Number) as MaxCreationDate
      from part p join
           partref pr
           on pr.refNumber = p.id
     ) ppr
where CreationDate <> MaxCreationDate 
```

顺便说一句，为什么厌恶子查询？它们非常有用，并且是 SQL 的重要组成部分。

此外，您应该使用正确的 ANSI 连接语法。

# c# - 如何存储数十亿 JSON 文件并进行查询

> ID：14775026
> 
> 赞同：1
> 
> 时间：2013-02-08T14:44:33.690
> 
> 标签：c#, java, c++, python, sql

我目前有一个接受 JSON 文件（包含一些用户事务数据的 JSON 序列化对象）并将其存储到服务器中的 API。每个这样的 JSON 文件都有一个唯一的全局 id 和一个与之关联的唯一用户。每天都会生成数十亿个这样的文件。然后，用户应该能够查询与他关联的所有 JSON 文件，并生成一堆在这些文件之上计算的聚合结果。

需要存储的典型 JSON 文件如下所示：

```
[ { "currencyCode" : "INR",
"receiptNumber" : { "value" : "1E466GDX5X2C" },
"retailTransaction" : [ { "grandTotal" : 90000.0,
      "lineItem" : [ { "otherAttributes" : {  },
            "sale" : { "description" : "Samsung galaxy S3",
                "discountAmount" : { "currency" : "INR",
                    "value" : 2500
                  },
                "itemSubType" : "SmartPhone",
                "otherAttributes" : {  },
                "unitCostPrice" : { "quantity" : 1,
                    "value" : 35000
                  }
              },
            "sequenceNumber" : 1000
          },
          { "customerOrderForPickup" : { "description" : "iPhone5",
                "discountAmount" : { "currency" : "INR",
                    "value" : 5000
                  },
                "itemSubType" : "SmartPhone",
                "otherAttributes" : {  },
                "unitCostPrice" : { "quantity" : 1,
                    "value" : 55000
                  }
              },
            "otherAttributes" : {  },
            "sequenceNumber" : 1000
          }
        ],
      "otherAttributes" : {  },
      "reason" : "Delivery",
      "total" : [ { "otherAttributes" : {  },
            "type" : "TransactionGrossAmount",
            "value" : 35000
          } ]
    },
    null
  ],
"sequenceNumber" : 125435,
"vatRegistrationNumber" : "10868758650"
} ] 
```

上面的 JSON 是一个复杂对象的序列化版本，它包含单个或其他类的对象数组作为属性。所以“receiptNumber”是 JSON 文件的通用 ID。

我需要查询诸如 customerOrderForPickup 的数量和价值或交易的总金额之类的东西，并作为各种此类交易 JSON 的集合**

我想对如何进行一些建议：1）将这些JSON文件存储在服务器上，即文件系统，即2）我应该使用什么样的数据库来查询这些具有如此复杂结构的JSON文件

我的研究产生了几种可能性：1）使用 MongoDB 数据库存储对象的 JSON 代表并通过数据库进行查询。JSON 文件将如何存储？将事务 JSON 存储在 MongoDB 数据库中的最佳方式是什么？2) 将包含唯一全局 ID、用户 ID 和服务器上 JSON 文件地址的 SQL 数据库与这些文件上的聚合代码结合起来。我怀疑这是否可以缩放

如果有人对这个问题有任何见解，我会很高兴。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:54:58.720

我想说您的问题非常笼统，实际上是风格和偏好问题。你可以用 10 种不同的方式做到这一点，而且每一种都会非常好。

我将给出我的个人偏好以及我将如何做到这一点：

由于有很多数据，我会使用关系数据库 - SQL Server。因为我喜欢 Microsoft 工具和 ASP MVC（我知道有很多人不喜欢，但这是我的偏好），并且它有一个序列化程序，可以将 JSON 转换为 c# 对象。由于我也喜欢使用实体框架，并且实体框架可以将 c# 对象转换为数据库内容，因此我只需按照我的 JSON 对象的外观来构建数据库。然后我会有一个接受这些 JSON 实体的 api，ASP MVC 会自动将它们转换为 c# 对象，而实体框架会自动将它们转换为数据库行。这样一来，整个上传 API 就不需要多于几行代码了。

然后我会为不同类型的数据查询创建更多的 API 方法。Linq 和实体框架有时使不同的查询像一行代码一样简单。

# php - Wordpress 联系表 7 后变量

> ID：14775029
> 
> 赞同：0
> 
> 时间：2013-02-08T14:44:43.760
> 
> 标签：php, wordpress, contact-form-7

我需要建立一个联系表单 7 插件，以便`$_POST`在提交时将输入作为第二页传递。事实证明，谷歌在这方面毫无结果。有谁知道如何做到这一点/我可以在哪里找到解决方案？

提前致谢

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:56:40.763

使用这个插件：[http ://wordpress.org/extend/plugins/contact-form-7-3rd-party-integration/](http://wordpress.org/extend/plugins/contact-form-7-3rd-party-integration/)

但如果您更喜欢手动操作 - 基本上这是您应该使用的钩子：wpcf7_before_send_mail

# php - 使用 PHP 重新排序包括基于优先级/订单号

> ID：14775033
> 
> 赞同：0
> 
> 时间：2013-02-08T14:44:51.387
> 
> 标签：php, sorting, include

我正在使用 wordpress，并且正在为网站的每个页面创建一个“小部件选择器”。在每个页面的后端，我有 15 个复选框 - 如果用户选择一个复选框，它会在该页面的侧边栏中显示该特定小部件。

我有一个很大的 PHP 文档，包含 15 个。每个包含都是一个小部件。如果用户选中该页面上的框，则触发该包含，如下所示：

```
 if( in_array( 'Blog', get_field('modules') ) ) { 
    include 'modules/blog.php'; 
 } 
```

这很好用！但是，用户无法指定小部件出现的顺序。我需要开发某种允许用户选择模块顺序的系统。

这就是我的想法 - 如果我可以让每个复选框吐出指定的顺序，我需要在 php 中使用某种方式来重新定位包含：

```
 if( in_array( 'Blog', get_field('modules') ) ) { 
    $order = 2;
    include 'modules/blog.php'; 
 }

if( in_array( 'Gallery', get_field('modules') ) ) { 
    $order = 1;
    include 'modules/gallery.php'; 
} 
```

现在我需要一些方法来根据它们提供的顺序重新排列这两个“块”。我能以某种方式做到这一点吗？显然我想使用 PHP，但如果不可能的话，我可以用 jQuery 来做。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:09:42.530

不包含模块，而是将列表推送到最后包含它们的数组。喜欢：

```
$final_modules = array();
 if( in_array( 'Blog', get_field('modules') ) ) { 
    $order = 2;
    $final_modules[$order] = 'modules/blog.php';
 }

if( in_array( 'Gallery', get_field('modules') ) ) { 
    $order = 1;
    $final_modules[$order] = 'modules/gallery.php';
}

//sort based on key
ksort($final_modules);

foreach($final_modules as $order => $include_file) {
    include $include_file;
} 
```

# apache - HTTPS 中的 Apache 重定向

> ID：14775035
> 
> 赞同：0
> 
> 时间：2013-02-08T14:44:58.407
> 
> 标签：apache, redirect, ssl

我有一个 Apache 服务器 ( [https://mysite.com/sub/en/](https://mysite.com/sub/en/) )。它在端口 443 和 VirtualHost 标签中使用 SSL 设置：

```
<VirtualHost _default_:443>
Redirect permanent /sub https://mysite.com/sub/en/
...
</VirtualHost> 
```

基本上，当用户访问该站点时，我希望他们被迫进入“/en”子目录。但是，如果您尝试访问`[https://mysite.com/sub](https://mysite.com/sub)`，它不会将您重定向到子“/en”目录。

我真的不确定发生了什么。我的非 SSL 虚拟主机标签中确实有类似的设置：

```
<VirtualHost *:80>
Redirect permanent / https://mysite.com/sub/en/
Redirect permanent /sub https://mysite.com/sub/en
</VirtualHost> 
```

这些规则运作良好。因此，如果用户尝试`[http://mysite.com/sub](http://mysite.com/sub)`，它会将它们转发到 SSL 版本，以及我想要的“/en”子目录。但是如果你尝试 SSL version: `[https://mysite.com/sub](https://mysite.com/sub)`，它就无法转发。

我是不是配置错了？我没有使用正确的重定向或重写规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:45:30.273

为了让它按照我想要的方式工作，我最终使用了 RewriteRule：

```
RewriteRule ^/sub$ https://mysite.com/sub/en/ 
```

这似乎成功了。

# python - 我会赋值还是直接在其他变量中使用它们？

> ID：14775037
> 
> 赞同：1
> 
> 时间：2013-02-08T14:45:03.773
> 
> 标签：python, memory-management

如果我有一个程序在服务器上运行，哪个会使用更多内存：

```
a = operation1()

b = operation2()

c = doOperation(a, b) 
```

或直接：

```
a = doOperation(operation1(), operation2()) 
```

编辑：

1：我正在使用 CPython。

2：我问这个问题是因为有时，我喜欢我的代码的可读性，所以不是编写冗长的操作序列，而是将它们拆分为变量。

编辑2：

这是完整的代码：

```
class Reset(BaseHandler):
@tornado.web.asynchronous
@tornado.gen.engine
def get(self, uri):
    uri = self.request.uri
    try:
        debut = time.time()
        tim = uri[7:]
        print tim
        cod = yield tornado.gen.Task(db.users.find_one, ({"reset.timr":tim})) # this is temporary variable
        code = cod[0]["reset"][-1]["code"] # this one too
        dat = simpleencode.decode(tim, code)
        now = datetime.datetime.now() # this one too
        temps = datetime.datetime.strptime(dat[:19], "%Y-%m-%d %H:%M:%S") # this one too
        valid = now - temps # what if i put them all here
        if valid.days < 2:
            print time.time() - debut # here time.time() has not been set to another variable, used directly
            self.render("reset.html")
        else:
            self.write("hohohohoo")
            self.finish()
    except (ValueError, TypeError, UnboundLocalError):
        self.write("pirate")
        self.finish() 
```

如您所见，有些变量只是暂时有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:47:58.587

如果`doOperation()`不清除它自己对传入参数的引用，或者创建*更多*对参数的引用，直到`doOperation()`完成，这两种方法完全相同。

后者*一旦`doOperation()`完成*将使用更少的内存，因为到那时函数的局部变量已被清除。在第一个选项中，因为`a`并且`b`仍然持有引用，所以引用计数不会下降到 0。

CPython 使用引用计数来清理任何不再使用的对象；一旦引用计数下降到 0，对象就会自动清理。

如果内存和可读性是一个问题，您可以显式删除引用：

```
a = operation1()
b = operation2()

c = doOperation(a, b)

del a, b 
```

但请记住，函数内的局部变量会自动清理，因此以下内容也会导致`a`and`b`引用被删除：

```
def foo():
    a = operation1()
    b = operation2()

    c = doOperation(a, b) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:48:59.563

只有当不再引用这些值时，才会回收值占用的内存。仅查看您提供的示例，无法判断何时不再引用这些值，因为我们不知道 doOperation 做什么。

要记住的一件事：赋值从不复制值，因此仅将值分配给名称不会增加内存使用量。

此外，除非您有实际的内存问题，否则不要担心。:)

# python - matplotlib 轴标签格式

> ID：14775040
> 
> 赞同：27
> 
> 时间：2013-02-08T14:45:06.690
> 
> 标签：python, matplotlib

我对轴的刻度标签的格式有疑问。我禁用了 y_axis 的偏移量：

```
ax1.ticklabel_format(style = 'sci', useOffset=False) 
```

并试图把它变成一种科学的格式，但我得到的只是：

```
0.00355872 
```

但我期待的是：

```
3.55872...E-2 
```

或类似的。

我真正想要的是：

```
3.55872... (on the tick label)
x 10^2  (or something similar - on the axis label) 
```

我可以尝试将标签设置为静态，但最终我会有几十或数百个不同值的图，因此需要动态设置。

另一种方法是将 y_axis 偏移量作为标签，但我也不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-10-04T07:47:35.393

您还应该指定轴和阈值限制：

```
ax1.ticklabel_format(axis='y', style='sci', scilimits=(-2,2)) 
```

当数字超出范围时，这将在*y*轴上使用 sci 格式`[0.01, 99]`。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-08T15:05:51.163

有很多方法可以做到这一点

你可以调整功率限制[（doc）](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.ScalarFormatter.set_powerlimits)

```
ax1.xaxis.get_major_formatter().set_powerlimits((0, 1)) 
```

`ScalerFormatter`这设置了切换到科学记数法的权力

或者，您可以使用 a `FuncFormatter`，它可以为您提供很好的控制（但您可以把脚吹走）。

```
from matplotlib import ticker

scale_pow = 2
def my_formatter_fun(x, p):
    return "%.2f" % (x * (10 ** scale_pow))
ax1.get_xaxis().set_major_formatter(ticker.FuncFormatter(my_formatter_fun))
ax1.set_xlabel('my label ' + '$10^{{{0:d}}}$'.format(scale_pow)) 
```

`FuncFormatter` [(doc)](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.FuncFormatter)采用 2 参数函数，该函数返回一个字符串并使用该函数来格式化标签。（请注意，这也会改变数值在交互式图形角落的显示方式）。第二个参数是“位置”，它是格式化程序制作标签时传递的参数。你可以放心地忽略它，但你必须接受它（否则你会因为错误数量的参数而出错）。这是所有格式化程序的统一 API 并使用格式化程序以交互方式显示鼠标位置的结果。

# jsp - 使用 JSP/Servlet 上传图片

> ID：14775042
> 
> 赞同：1
> 
> 时间：2013-02-08T14:45:12.547
> 
> 标签：jsp, jakarta-ee, servlets

我正在尝试使用我的 jsp 上传图像并将此图像保存到 mysql 数据库。我有这个代码

```
<form  method="POST"  class="registrations" enctype="multipart/form-data" >
                    <div>
                        <span>Title :</span> <input type="text" name="title" maxlength="255" size="40" placeholder="e.g.(Update on ALert Status and Activity of Mayon Volcano, etc..)" required /><br />
                    </div>
                    <div>
                        <span>Overview:</span>
                        <textarea rows="15" cols="75%" name="overview" required placeholder="Type a simple topic description..."></textarea>
                    </div>
                    <div>
                        <span>Select an Image:</span>
                        <input type="file" name="image" accept="image/gif, image/jpeg, image/jpg, image/png, image/bmp"/>
                    </div>
                    <div>
                        <span>Actions Taken:</span>
                        <textarea rows="15" cols="75%" name="action" required placeholder="Type a simple topic description..."></textarea>
                    </div>
                    <div class="btns">
                        <input type="submit" value="Send Report" /><input type="reset" value="Reset Fields" />
                    </div>
                </form> 
```

在我的 servlet 我有这个

```
Map<String, String> errors = SevereAssignContent.validate(req);
        if (!errors.isEmpty())
        {
            jsp.forward(req, resp);
            return;
        }
SevereBulletinItems emsItem = (SevereBulletinItems) req.getAttribute("emsItem");
        new SevereWeatherDAO().create(emsItem);
        String msg = "Severe Weather Bullerin Report Submitted!";
        resp.sendRedirect(req.getContextPath() + "/pagasa/severe-weather-bulletin?msg=" + msg + ""); 
```

我的 SevereAssignContent 类

```
public class SevereAssignContent
{
    static ServletConfig conf;
    @SuppressWarnings("unchecked")
    public static Map<String, String> validate(HttpServletRequest req) 
    {
        SevereBulletinItems emsItem = new SevereBulletinItems();
        HashMap<String, String> errors = new HashMap<String, String>();
        req.setAttribute("errors", errors);
        req.setAttribute("emsItem", emsItem);

        try
        {

            String filePath = conf.getServletContext().getRealPath("") + File.separator;
            DiskFileItemFactory factory = new DiskFileItemFactory();
            factory.setRepository(new File(filePath));

            ServletFileUpload upload = new ServletFileUpload(factory);
            List<FileItem> items = upload.parseRequest(req);

            for (FileItem item : items)
            {
                if (item.isFormField())
                {

                    String fieldname = item.getFieldName();

                    if (fieldname.equals("title"))
                        emsItem.setTitle(item.getString());
                    else if (fieldname.equals("overview"))
                        emsItem.setSituation(item.getString());
                    else if (fieldname.equals("action"))
                        emsItem.setAction(item.getString());

                }
                else
                {
                    byte[] data = item.get();
                    data = item.get();
                    if (data.length > 0)
                    {
                        Blob blob;
                        try
                        {
                            blob = new SerialBlob(data);
                            emsItem.setImage(blob);
                        }
                        catch (SerialException e)
                        {
                            e.printStackTrace();
                        }
                        catch (SQLException e)
                        {
                            e.printStackTrace();
                        }
                    }
                }
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        return errors;
    }
} 
```

还有我的创建声明

```
public void create(SevereBulletinItems item) throws IOException
    {
        Long id = getUniqueId();
        item.setReportId(id);

        java.sql.Timestamp date = new java.sql.Timestamp(new java.util.Date().getTime());

        PreparedStatement statement = null;
        Connection connection = null;

        try
        {
            connection = getConnection();
            String sql = "insert into severeweatherbulletin values (?, ?, ?, ?, ?, ?, ?)";
            statement = connection.prepareStatement(sql);
            statement.setLong(1, id.longValue());
            statement.setString(2, item.getTitle());
            statement.setTimestamp(3, date);
            statement.setString(4, item.getSituation());
            statement.setBlob(5, item.getImage());
            statement.setString(6, item.getAction());
            statement.setLong(7, 1);
            statement.executeUpdate();
        }
        catch (SQLException e)
        {
            throw new RuntimeException(e);
        }
        finally
        {
            close(statement, connection);
        }
    } 
```

现在，当我单击提交时，我的插入项目都没有保存在我的数据库中。为什么？谢谢

# html - 居中两个 div

> ID：14775043
> 
> 赞同：1
> 
> 时间：2013-02-08T14:45:14.693
> 
> 标签：html, css, centering

我有两个`div`要居中的 s。

这是我的代码，它不起作用：

HTML

```
<div id="central-top-wrapper" class="clearfix"> 
    //content
</div> 

<div id="central-bottom-wrapper" class="clearfix"> 
    //content 
</div> 
```

CSS

```
#central-top-wrapper {
    float: left;
    width: 70%;
    display: block;
    margin: 0 auto;
}  
#central-bottom-wrapper {
    width: 43%;
    float: left;
    display: block;
    margin: 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:50:47.907

它不起作用，因为您将它们向左浮动。

从每个 DIV 中删除浮动左属性，并给它们两个“margin：0 auto”。

您也不必在 DIV 上声明 display: block，因为这是它们的默认状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:49:31.117

用这个：

```
<div style="text-align: center;">
<div id="central-top-wrapper">
    //divs content
</div>

<div id="central-bottom-wrapper">
    //divs content
</div>
</div> 
```

CSS：

```
#central-top-wrapper {width: 70%; margin: 0;}  
#central-bottom-wrapper {width: 43%; margin: 0;} 
```

# cocoa - Mac os x 主窗口控制器

> ID：14775049
> 
> 赞同：1
> 
> 时间：2013-02-08T14:45:38.640
> 
> 标签：cocoa

当我在 xcode 中创建一个基于可可的 mac osx 应用程序时。我得到一个默认类 AppDelegate 它是 NSObject < NSApplicationDelegate > 的子类

该应用程序是一个主窗口，其中包含一些按钮、表格视图等，

我的问题是我应该让这个 AppDelegate 类成为我的主窗口的控制器吗？或者我应该创建一个新的控制器。在什么情况下我应该选择我的代表作为控制者，什么时候不应该？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:58:26.600

如果应用程序不是一次性的测试应用程序，您应该创建一个新控制器并为视图放置逻辑。如果应用程序开始增长，您可能需要更多的控制器和视图，例如状态栏可以是带有单独控制器的单独视图。

在 AppDelegate 中，您应该只放置特定于整个应用程序的内容，例如菜单、启动、停止等。

# javascript - javascript show hide div by id 问题

> ID：14775050
> 
> 赞同：1
> 
> 时间：2013-02-08T14:45:45.557
> 
> 标签：javascript, html, hide

我有一个包含城市信息的 div 列表。我还有一个城市列表，因此访问者可以点击一个城市，而不是所有其他城市的 div 必须隐藏。
如果访问者点击城市链接，隐藏的 div 必须再次显示。到目前为止，我有一个工作功能，但它只适用于伦敦。如果我点击巴黎 - 没有错误也没有行动。这是什么原因造成的？谢谢

更新

```
<script language="javascript" type="text/javascript" charset="utf-8">      
function showHideDiv(city_id) {    
var divstyle = new String();    
divstyle = document.getElementById(city_id).style.visibility;    
if (divstyle.toLowerCase() == "visible" || divstyle == "") {     
document.getElementById("city_id").style.visibility = "hidden";    
document.getElementById("city_id").style.position = "absolute";             
}else{     
document.getElementById("city_id").style.visibility = "visible";    
document.getElementById("city_id").style.position = "relative";    
}    
}    
$(document).ready(function() {    
$(".city").click(function() {    
$(this).toggle();    
});    
});    
</script>    
<a href="#" id="<?php echo $city;?>" onclick="showHideDiv()" style="text-decoration:underline;">London | Paris</a></div>    
<div id="London">List of providers in London here as content</div>    
<div id="Paris">List of providers in Paris here as content</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:50:17.290

我想这与您的 Javascript 中硬编码了城市这一事实有关。我假设（没有看到 PHP）你在这里呼应“伦敦”：

```
<?php echo $city;?> 
```

因此，只要调用 showHideDiv()，它只会在伦敦被调用，而不是在巴黎被调用。您可能需要将 id 作为参数传递给函数。

您可以考虑查看 jQuery。它会让这很容易。

**编辑**

使用您的代码，您将按如下方式传递参数：

```
function showHideDiv(city_id) {
    var divstyle = new String();
    divstyle = document.getElementById(city_id).style.visibility;
    // . . . Rest of your code. Replace all instances of <?php echo . . ?> with 
    // city_id.
} 
```

然后，您必须在 onclick 中为每个城市指定城市。

使用 jQuery，您可以执行以下操作：

```
$(document).ready(function() {
    $(".city").click(function() {
        $(this).toggle();
    });
}); 
```

然后你的 HTML 将是：

```
<div id="london" class="city">List of providers in London</div>
<div id="paris" class="city">List of providers in Paris</div> 
```

# c# - 如何锁定并强制用户重新输入 Windows 密码？

> ID：14775054
> 
> 赞同：2
> 
> 时间：2013-02-08T14:45:54.847
> 
> 标签：c#, windows, windows-shell, user-accounts

我想锁定当前操作用户的访问，就好像用户

点击开始→指向关机→点击LOCK

如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:47:24.747

[http://jessn.blogspot.com/2009/05/lock-my-computer-programatically-in-c.html](http://jessn.blogspot.com/2009/05/lock-my-computer-programatically-in-c.html) 这篇文章说得最好：

> 一个更好的设计，没有硬编码到您的 Windows 系统路径等：
> 
> 使用 System.Runtime.InteropServices；
> 
> [DllImport("user32.dll")] public static extern void LockWorkStation();
> 
> 然后只需调用 LockWorkStation();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:48:00.950

```
 System.Diagnostics.Process.Start("shutdown.exe -l");

      it will LOG OFF your computer and now if the account has secure with some password then windows will ask for password otherwise not. 
```

# javascript - 自定义 jQuery 表单验证 - 最好的方法是什么？

> ID：14775055
> 
> 赞同：0
> 
> 时间：2013-02-08T14:45:56.070
> 
> 标签：javascript, jquery, validation

我想创建一个自定义的 jQuery 表单验证脚本来帮助我学习 jQuery 和更好的最佳实践。但从我开始的那一刻起，我发现自己的问题多于解决方案。我知道有 jQuery 验证插件和许多其他第三方插件，但这是我想从头开始创建的东西。

我的第一次尝试在下面产生了类似的结果。它工作得很好，但似乎需要大量代码来验证表单中基本相同类型的输入。

```
$(".validation").submit(function(){
  if($(".name").val() === ""){
    $(".name").addClass("error");
    $(".errorMessage").html("<p>Error: Please enter a valid name</p>").slideDown();
    return false;
  }if($(".address1").val() === ""){
    $(".address1").addClass("error");
    $(".errorMessage").html("<p>Error: Please enter a valid address</p>").slideDown();
    return false;
  }if($(".city").val() === ""){
    $(".city").addClass("error");
    $(".errorMessage").html("<p>Error: Please enter a valid city</p>").slideDown();
    return false;
  }if($(".state").val() === "0"){
    $(".state").addClass("error");
    $(".errorMessage").html("<p>Error: Please enter a valid state</p>").slideDown();
    return false;
  }if($(".zipCode").val() === ""){
    $(".zipCode").addClass("error");
    $(".errorMessage").html("<p>Error: Please enter a valid zip code</p>").slideDown();
    return false;
  }if($(".phone").val() === ""){
    $(".phone").addClass("error");
    $(".errorMessage").html("<p>Error: Please enter a valid phone</p>").slideDown();
    return false;
  }if($(".email").val() === "" || ! /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test($(".email").val())){
    $(".email").addClass("error");
    $(".errorMessage").html("<p>Error: Please enter a valid email</p>").slideDown();
    return false;
  }
}); 
```

我的第二次尝试在下面产生了类似的结果。这减少了所有 if 语句，但随着事件冒泡，它正在向后验证表单。它还一次只添加一条错误消息`$(".errorMessage").html("There was an error" + " " + name);`。是否可以同时为每个空表单字段显示此错误消息，而不是一次显示一个？我有这个工作的[CodePen 演示](http://codepen.io/jbatzel1Development/pen/LIncs)。

```
$("form").on("submit", function(e){
  $("input").each(function(){

    var name = $(this).attr("name");

    if($(this).val() == ""){
      $(".errorMessage").html("There was an error" + " " + name);
      e.preventDefault();
    }else{
      return true; 
    }
  });
}); 
```

任何关于技术或最佳实践的建议都会很棒。

谢谢，

JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:51:20.267

对的，这是可能的。如果你想这样做，你需要决定你想如何准确地显示这些错误。有些人会将每个错误放入一个列表项中，列表前带有某种标题，例如“请更正以下错误：”。然后您将创建一个 li 元素，将其文本设置为错误，并将其附加到您的 ul 列表对象。

您还可以创建某种类型的句子来制作一个简单的英语句子，告诉用户哪里出了问题，但我通常更喜欢列表选项。老实说，有无数种方法可以做到这一点。

希望我能彻底理解你的问题，如果没有，请告诉我。

编辑：这是一个快速而肮脏的示例，取自您的示例：[http ://codepen.io/anon/pen/hJdtD](http://codepen.io/anon/pen/hJdtD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:55:00.763

**一般概念示例。**

```
 Adds a validation method that checks if a given value equals the addition of the two parameters.

jQuery.validator.addMethod("math", function(value, element, params) { 
 return this.optional(element) || value == params[0] + params[1]; 
 }, jQuery.format("Please enter the correct value for {0} + {1}")); 
```

**自定义方法示例：**

```
jQuery.validator.addMethod("greaterThanZero", function(value, element) {
return this.optional(element) || (parseFloat(value) > 0);
}, "* Amount must be greater than 0");

$('validatorElement').validate({
rules : {
    amount : { greaterThanZero : true }
}
}); 
```

来源 [http://docs.jquery.com/Plugins/Validation/Validator/addMethod](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)

# database - 在 C# 中以编程方式从 Excel 文件中大量导入数据到 Access

> ID：14775058
> 
> 赞同：1
> 
> 时间：2013-02-08T14:46:00.267
> 
> 标签：database, excel, ms-access

鉴于 Excel 和 Access 在某种程度上是兼容的，有没有办法以编程方式将数据从 Excel 文件导入 Access 数据库，而无需逐条读取文件和插入数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:13:51.877

非常粗略：

```
string ConnString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Z:\Docs\Test.accdb";
OleDbConnection conn = new OleDbConnection(ConnString);
conn.Open();
string sql = @"select * into newxl from [Excel 8.0;HDR=YES;DATABASE=Z:\Docs\Test.xlsx].[Sheet1$] s;";

OleDbCommand cmd = new OleDbCommand();
cmd.Connection = conn;
cmd.CommandText = sql;
cmd.ExecuteNonQuery(); 
```

# c# - 向现有 C# 项目添加 Windows Phone 平台支持

> ID：14775059
> 
> 赞同：0
> 
> 时间：2013-02-08T14:46:08.150
> 
> 标签：c#, visual-studio-2012, arm

我有一个要在 Windows Phone 上使用的 ops-source 项目。目前它针对以下之一`Any CPU`：`x86`或`x64`。显然，当我构建并尝试将输出用作 Windows Phone 项目中的参考时，我收到一个错误：`A reference to a higher version or incompatible assembly cannot be added to the project`.

我正在尝试构建该开源项目，以便它以 Windows Phone 平台为目标。为了实现这一点，我试图找到一种在 VS 项目设置中的某处添加 Windows Phone 平台的方法，但没有运气。有可能吗？如果是，如何？

谢谢。

# php - 使用 javascript 或 PHP 如何使用下拉列表或文本框中的值。

> ID：14775064
> 
> 赞同：2
> 
> 时间：2013-02-08T14:46:21.617
> 
> 标签：php, javascript, drop-down-menu

如何提交下拉列表或文本框的值。

```
<select>
<option value="none" selected>None</option>
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="mercedes">Mercedes</option>
<option value="audi">Audi</option>
</select>

<input type="text" name="newCar"/>
<input type="submit" value="Done"> 
```

如果所需的汽车不在列表中，我想将其写在文本框中并提交表格。所以应该说 1）如果从下拉列表中选择值并且文本框为空，则使用选择值 2）如果选择了默认值“none”并且在“newCar”中选择了某个值，则提交文本框值 3）如果从下拉列表中选择值列表和文本框包含值应显示错误消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:53:43.013

命名您的选择

```
 <select name="cars">
    <option value="none" selected>None</option>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
    </select> 
```

然后使用 $_POST['cars'] 获取您选择的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:01:58.880

`name="car"`为选择添加：

```
<select name="car">
<option value="none" selected>None</option>
<option value="volvo">Volvo</option>
<option value="saab">Saab</option>
<option value="mercedes">Mercedes</option>
<option value="audi">Audi</option>
</select>

<input type="text" name="newCar"/>
<input type="submit" value="Done"> 
```

在 PHP 中：

```
$request = $_REQUEST;

$car = '';
if(isset($request['car'])){
    $car = $request['car'];
}
$newCar = '';
if(isset($request['newCar'])){
    $newCar = $request['newCar'];
}
// case 1)
if($car != 'none' AND $newCar == ''){
      echo $car." was selected selected";
}

// case 2)
if($car == 'none' AND $newCar != ''){
      echo $newCar ." was selected selected";
}

// case 3)
if($car != 'none' AND $newCar != ''){
      echo "ERROR! plz select only one option.";
} 
```

我用你的例子，你可以优化 PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:13:00.213

如果您在末尾使用带有 [] 的名称，即在您的选择和输入中将名称设置为“newCar[]”，则可以使用 PHP 获取选择的值和文本框：

```
<select name="newCar[]">
    <option value="" selected>None</option>
    ...
</select>

<input type="text" name="newCar[]" />
<input type="submit" value="Done" /> 
```

然后你的值将在数组中`$_REQUEST['newCar']`

# ios - iOS：从服务器请求少量数据的最简单、最快捷的方式？

> ID：14775066
> 
> 赞同：2
> 
> 时间：2013-02-08T14:46:25.983
> 
> 标签：ios, web-services, networking

我正在寻找一种极其轻量级的方式来从 iOS 设备上的 Web 服务器请求一条数据。将请求放在一个网页上，例如[http://www.myserver.com/getlevel?uid=johnsmith](http://www.myserver.com/getlevel?uid=johnsmith)；异步发送请求，然后检索响应的内容（这将是一个仅包含一个整数的文本文件），并在结果到达后立即对其进行处理。

目标是最小化带宽，最大化速度，并使代码尽可能简单。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:12:19.037

根据您的应用程序是否会扩展以包含其他 Web 服务调用，您可能需要考虑 AFNetworking - [https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)。是的，你必须在你的项目中安装 AFNetworking 库，但它很容易做到，然后你就可以享受以下内容：

```
NSURL *url = [NSURL URLWithString:@"https://alpha-api.app.net/stream/0/posts/stream/global"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"App.net Global Stream: %@", JSON);
} failure:nil];
[operation start]; 
```

（代码取自 AFNetworking github 文档页面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:09:50.453

如果您正在寻找最简单的 iOS 代码示例，那将是

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSError *error;
    NSString *string = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.myserver.com/getlevel?uid=johnsmith"]
                                                encoding:NSUTF8StringEncoding
                                                   error:&error];
    [self doSomethingWithString:string];
}); 
```

请注意，如果这`doSomethingWithString`要更新用户界面，您将执行以下操作：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSError *error;
    NSString *string = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.myserver.com/getlevel?uid=johnsmith"]
                                                encoding:NSUTF8StringEncoding
                                                   error:&error];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self doSomethingWithString:string];
    });
}); 
```

如果您可以让您的服务器生成 JSON 数据，那么这可能是一种更好的方法（这样服务器可以制定适当的响应，可以报告错误，您的客户端可以检测 404 错误等）：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSError *error;
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.myserver.com/getlevel?uid=johnsmith"]
                                         options:kNilOptions
                                           error:&error];
    NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data
                                                               options:kNilOptions
                                                                 error:&error];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self doSomethingWithJsonObject:dictionary];
    });
}); 
```

# sql-server - 在 SQL 中创建唯一的列

> ID：14775067
> 
> 赞同：0
> 
> 时间：2013-02-08T14:46:26.253
> 
> 标签：sql-server

我有一个有重复数据的表。

这是我的现在表

```
Id  Name
1   shahin Zen
2   shahin Zen & Aaron Henley
3   Fred Sayz feat. Antonia Lucas
4   Fred Sayz feat. Lawrence Alexander
5   Fred Sayz feat. Sibel 
```

注意：我不能使用不同的名称，因为名称不完全匹配。

我想从这张桌子上制作一张桌子，

```
ID  Name
1   shahin
2   Fred 
```

请任何人解决此类问题。

谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:50:36.733

如果您只想获得不同的行的第一个单词：

```
select distinct substring(Name, 0, charindex(' ', Name, 0))
from myTable 
```

您还可以通过添加 where 子句来检查包含空格字符的行：

```
where charindex(' ', myTable, 0) > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:09:16.667

您需要考虑那些没有空格的记录...

```
Select  Distinct Left(name,CharIndex(' ',name+' '))
From    myTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:56:26.170

如果你只需要名字，试试这个：

```
SELECT 
   LEFT(name, CHARINDEX(' ', name)) 
FROM Table1 
GROUP BY LEFT(name, CHARINDEX(' ', name)) 
```

# python - 如何在 Pandas bygroup 中应用 linregress

> ID：14775068
> 
> 赞同：7
> 
> 时间：2013-02-08T14:46:31.080
> 
> 标签：python, pandas

我想在 Pandas ByGroup 中应用 scipy.stats.linregress。我查看了文档，但我只能看到如何将某些内容应用于单个列，例如

```
grouped.agg(np.sum) 
```

或类似的功能

```
grouped.agg('D' : lambda x: np.std(x, ddof=1)) 
```

但是如何应用具有两个输入 X 和 Y 的 linregress？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T15:14:38.910

该[`linregress`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.linregress.html)函数以及许多其他 scipy/numpy 函数接受“类似数组”的 X 和 Y，Series 和 DataFrame 都可以。

例如：

```
from scipy.stats import linregress
X = pd.Series(np.arange(10))
Y = pd.Series(np.arange(10))

In [4]: linregress(X, Y)
Out[4]: (1.0, 0.0, 1.0, 4.3749999999999517e-80, 0.0) 
```

*事实上，能够使用 scipy（和 numpy）函数是 pandas 的杀手级功能之一！*

因此，如果您有一个 DataFrame，您可以在其列（即系列）上使用 linregress：

```
linregress(df['col_X'], df['col_Y']) 
```

如果使用 groupby，您可以类似地`apply`（对每个组）：

```
grouped.apply(lambda x: linregress(x['col_X'], x['col_Y'])) 
```

# python - Scrapy - 不会爬行

> ID：14775073
> 
> 赞同：2
> 
> 时间：2013-02-08T14:46:46.650
> 
> 标签：python, web-crawler, scrapy

我试图让递归爬虫运行，因为我写的那个运行不正常，我从网上提取了一个例子并尝试了。我真的不知道问题出在哪里，但是爬网没有显示任何错误。谁能帮我这个。

另外，是否有任何一步一步的调试工具来帮助理解蜘蛛的爬行流程。

非常感谢您对此的任何帮助。

```
MacBook:spiders hadoop$ scrapy crawl craigs -o items.csv -t csv
/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/zope/__init__.py:1: UserWarning: Module pkg_resources was already imported from /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.pyc, but /Library/Python/2.6/site-packages is being added to sys.path__import__('pkg_resources').declare_namespace(__name__)
/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/zope/__init__.py:1: UserWarning: Module site was already imported from /System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site.pyc, but /Library/Python/2.6/site-packages is being added to sys.path__import__('pkg_resources').declare_namespace(__name__)
2013-02-08 20:35:55+0530 [scrapy] INFO: Scrapy 0.16.4 started (bot: myspider)
2013-02-08 20:35:55+0530 [scrapy] DEBUG: Enabled extensions: FeedExporter, LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2013-02-08 20:35:55+0530 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-02-08 20:35:55+0530 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-02-08 20:35:55+0530 [scrapy] DEBUG: Enabled item pipelines: 
2013-02-08 20:35:55+0530 [craigs] INFO: Spider opened
2013-02-08 20:35:55+0530 [craigs] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-02-08 20:35:55+0530 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2013-02-08 20:35:55+0530 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2013-02-08 20:35:58+0530 [craigs] DEBUG: Crawled (200) <GET http://sfbay.craigslist.org/npo/> (referer: None)
2013-02-08 20:35:58+0530 [craigs] INFO: Closing spider (finished)
2013-02-08 20:35:58+0530 [craigs] INFO: Dumping Scrapy stats:
    {'downloader/request_bytes': 230,
     'downloader/request_count': 1,
 'downloader/request_method_count/GET': 1,
 'downloader/response_bytes': 7291,
 'downloader/response_count': 1,
 'downloader/response_status_count/200': 1,
 'finish_reason': 'finished',
 'finish_time': datetime.datetime(2013, 2, 8, 15, 5, 58, 415553),
 'log_count/DEBUG': 7,
 'log_count/INFO': 4,
 'response_received_count': 1,
 'scheduler/dequeued': 1,
 'scheduler/dequeued/memory': 1,
 'scheduler/enqueued': 1,
 'scheduler/enqueued/memory': 1,
 'start_time': datetime.datetime(2013, 2, 8, 15, 5, 55, 343482)}
2013-02-08 20:35:58+0530 [craigs] INFO: Spider closed (finished) 
```

我使用的代码如下，

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
#from craigslist_sample.items import CraigslistSampleItem

class MySpider(CrawlSpider):
    name = "craigs"
    allowed_domains = ["sfbay.craigslist.org"]
    start_urls = ["sfbay.craigslist.org/npo/"]

     rules = (Rule (SgmlLinkExtractor(allow=("d00\.html", ),restrict_xpaths=('//p[@id="nextpage"]',))
 , callback="parse_items", follow= True),
 )

    def parse_items(self, response):
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//p")
        items = []
        for titles in titles:
            item = CraigslistSampleItem()
            item ["title"] = titles.select("a/text()").extract()
            item ["link"] = titles.select("a/@href").extract()
            items.append(item)
        return(items) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:08:19.453

`"d00\.html"`尝试用`".*00\.html"`或替换您的 SgmlLinkExtractor`"index\d+00\.html"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:30:36.087

1.  按照 payala 的建议修改您的 SgmlLinkExtractor
2.  删除`restrict_xpaths`链接提取器的部分

这些更改将解决遇到的问题。我还将对用于选择标题的 xpath 提出以下建议，因为这将删除由于下一页链接也被选择而将出现的空项目。

```
def parse_items(self, response):
    hxs = HtmlXPathSelector(response)
    titles = hxs.select("//p[@class='row']") 
```

# c++ - 链接器如何处理多个头文件中定义的虚函数？

> ID：14775074
> 
> 赞同：0
> 
> 时间：2013-02-08T14:46:49.937
> 
> 标签：c++, linker, polymorphism

假设我有

```
Base.h
class Base
{
    virtual void foo() {...}
};

Derived1.h
class Derived1 : public Base
{
    virtual void foo() {...}
};

Derived2.h
class Derived2 : public Base
{
    virtual void foo() {...}
}; 
```

头`Derived1.h`文件包含在多个源文件中，`Derived1`类也通过`Base`接口使用。由于`foo`is`virtual`和 is used`polymorphic`它不能被内联。所以它会被编译成多个`obj`文件。那么链接器如何解决这种情况呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:51:48.817

在类定义中定义的成员函数是隐式的`inline`（*C++03 7.1.2.3*）。
函数体是否真的在调用点被内联是无关紧要的。但是`inline`，只要所有定义都相同，您就可以对一个函数进行多个定义（*一个定义规则不允许这样做*）（*C++03 7.1.2.2*）。该标准要求链接器应该能够链接到（一个或）许多这些定义。（*C++03 7.1.2.4*）。

> **链接器如何做到这一点？**

对此的标准规定：

*   它要求函数定义应该存在于每个翻译单元中。链接器所要做的就是链接到在该翻译单元中找到的定义。
*   它要求这个函数的所有定义应该完全相同，如果存在不同的定义，这消除了链接到特定定义的任何歧义。

* * *

**C++03 7.1.2 函数说明符：**
**第 2 段：**

> 带有 inline 说明符的函数声明（8.3.5、9.3、11.4）声明了一个内联函数。inline 说明符向实现表明，在调用点对函数体进行内联替换优于通常的函数调用机制。在调用点执行此内联替换不需要实现；然而，即使省略了这个内联替换，7.1.2 中定义的内联函数的其他规则仍应得到遵守。

**第 3 段：**

> 在类定义中定义的函数是内联函数。内联说明符不应出现在块作用域函数声明中

**第 4 段：**

> 内联函数应在使用它的每个翻译单元中定义，并且在每种情况下都应具有完全相同的定义（3.2）。

# java - Ruby Compass 编译器输出

> ID：14775077
> 
> 赞同：0
> 
> 时间：2013-02-08T14:47:01.827
> 
> 标签：java, compass-sass

我正在使用 java 进程来执行 compass 编译器任务。所以我正在使用 process.getErrorStream() 和 process.getInputStream()。

在输出日志中，我有奇怪的 bash 字符，例如 [33m, [31m. 日志：

2013-02-08 14:03:49,417 INFO [....BaseProcessManager] (ajp-0.0.0.0-8009-1) 错误阅读器：[31m [0m

您知道为什么会发生这种情况，以及是否有解决方案不输出此符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:56:42.323

这些是颜色日志输出的控制字符

他们的世代由`Compass.configuration.color_output` 国旗控制

尝试运行 `compass --boring` 它应该为您删除它们，或者如果您希望它成为默认值，请将 color_output 标志设置为 false。

# python - 复杂的阶跃函数覆盖在时间序列代码的 matplotlib 图上

> ID：14775079
> 
> 赞同：0
> 
> 时间：2013-02-08T14:47:17.240
> 
> 标签：python, function, datetime, matplotlib

有谁知道使用阶跃函数 pyplot.step(x,y) 的问题，其中 x 值由日期时间实例给出？？？我可以轻松地绘制函数，除非我使用日期时间序列作为 x 值。我有一个如下所示的矩阵：

```
In [3]: Minor_trend_matrix[0:20]
Out[3]: 
matrix([[ 0,  1],
        [ 1,  2],
        [ 1,  3],
        [ 1,  4],
        [-1,  5],
        [ 0,  6],
        [ 1,  7],
        [ 2,  8],
        [ 0,  9],
        [ 1, 10],
        [ 1, 11],
        [ 1, 12],
        [ 1, 13],
        [ 1, 14],
        [-1, 15],
        [-1, 16],
        [-1, 17],
        [ 1, 18],
        [ 1, 19],
        [-1, 21]]) 
```

请注意，第一列仅包含 -2,-1,0,1,2 这些代表步进函数所需的不同操作；-2 是指数范围的高点，然后是指数范围的低点 -1 是指数范围的低点 0 是无动作 1 是指数范围的高点 2 是指数范围的低点，然后是指数范围的高点

索引指的是日期时间对象。我认为这是 step 函数遇到麻烦的地方。任何建议或替代方案将不胜感激。此外，关于由整数表示的动作的细节，您是否认为因为例如矩阵的运行可能如下所示

```
 [ 1,  2],
 [ 1,  3],
 [ 1,  4] 
```

但我只希望在发生更改之前对最终项目执行操作，不包括零，我应该消除相关项目之前的所有先前条目（在不同条目之前，即在本例中为 -1,2,-2）和如果是这样，我将如何去做？此外，对于实现适当代码以实现此目标的任何帮助也将不胜感激。

```
# Package Imports

import csv
import datetime
import matplotlib.pyplot as plt
import numpy as np
import dateutil.relativedelta as rd
import bisect
import scipy as sp

## File Settings

ipath = "/home/kane/Downloads/Charts/Wheat/W2/"
fname = "W2_0_L1N.CSV"

dateList = []
openList = []
highList = []
lowList = []
closeList = []
x = []
g = []
portfolio_list = []
result = []

portfolio = csv.DictReader(open(ipath + fname, "rb"))
portfolio_list.extend(portfolio)

for data in portfolio_list:
    dateList.append(data['Date'])
    openList.append(data[' Open'])
    highList.append(data[' High'])
    lowList.append(data[' Low'])
    closeList.append(data[' Close'])

for item in dateList:
    d = datetime.datetime.strptime(item, '%Y%m%d')

    t = d.toordinal()
    x.append(d)
    g.append(t)

dataArray = np.asarray([x, openList, highList, lowList, closeList])
dataArrayOrd = np.array([g, openList, highList, lowList, closeList], 
dtype = float) 
```

代码的绘图部分如下：

```
# Plot settings
fig = plt.figure(figsize=(10, 5))
ax = fig.add_subplot(111)

line0 = plt.plot(x, simple_slope, 'k', label = "High Slope")
line1 = plt.plot(x, dataArray[1,:], 'g', label = "Open")  
line2 = plt.plot(x, dataArray[2,:], 'r', label = "High")
line3 = plt.plot(x, dataArray[3,:], 'y', label = "Low")
line4 = plt.plot(x, dataArray[4,:], 'b', label = "Close")
lns = line0 + line1 + line2 + line3 + line4
labs = [l.get_label() for l in lns]
ax.legend(lns, 
          labs, 
          loc='upper left', 
          frameon = False, 
          shadow=False, 
          fancybox=False, 
          labelspacing=0.1, 
          ncol=4, 
          prop={'size':9}
          )
ax.set_title(fname , fontsize = 12)

plt.xticks(fontsize = 8)
plt.yticks(fontsize = 8)
ax.set_ylabel( 'Cents', fontsize = 10 )
ax.grid()
plt.show() 
```

此图中的 x 轴是时间和日期时间值，因此 step 函数应按如下方式工作：

```
plt.step(x[Minor_trend_matrix[:,1]],dataArray[2,Minor_trend_matrix[:,1]]) 
```

当然，确切的问题有点复杂，需要访问

```
dataArray[3,Minor_trend_matrix[:,1]] 
```

阶梯函数垂直线时的值应该向下移动到范围的低点，当它需要同时访问高点和低点或低点然后高点时甚至更复杂。这将是开发正确条件语句的问题。但是，当前的问题在于在我可以继续之前获得一个简单的版本来正确处理日期时间值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:23:44.693

解决方案：

我已经用 step 函数解决了这个问题。这是由于阶跃函数的工作方式。我必须通过 for 循环生成日期时间对象。我现在可以得到我想要实现的简单版本。

```
# Package Imports

import csv
import datetime
import matplotlib.pyplot as plt
import numpy as np
import dateutil.relativedelta as rd
import bisect
import scipy as sp

## File Settings

ipath = "/home/kane/tripkane_python/"
fname = "datetime_test_data.csv"

portfolio_list = []
dateList = []
valueList = []
x = []

portfolio = csv.DictReader(open(ipath + fname, "rb"))
portfolio_list.extend(portfolio)

for data in portfolio_list:
    dateList.append(data['date'])
    valueList.append(data[' value'])

for item in dateList:
    d = datetime.datetime.strptime(item, '%Y%m%d')
    t = d.toordinal()
    x.append(d)

dataArray = np.asarray([x, valueList])

stepList = [0, 3, 5]

TIda = []
TIv = []

for n in range(0, len(stepList)):
    TIda.append(x[stepList[n]])
    TIv.append(valueList[stepList[n]])

# Plot 

fig = plt.figure(figsize=(10, 5))
ax = fig.add_subplot(111)

line1 = plt.plot(x, valueList, 'b')
lns = line1

labs = [l.get_label() for l in lns]
ax.legend(lns, 
          labs, 
          loc='upper left', 
          frameon = False, 
          shadow=False, 
          fancybox=False, 
          labelspacing=0.1, 
          ncol=4, 
          prop={'size':9}
          )
ax.set_title(fname , fontsize = 12)

plt.xticks(fontsize = 8)
plt.yticks(fontsize = 8)
ax.set_ylabel( 'Cents', fontsize = 10 )
ax.grid()

plt.step(TIda, TIv, 'r')

plt.show() 
```

现在的问题是如何产生适当的条件语句来实现目标。

# javascript - Javascript - 切片文件 - 需要修改 javascript

> ID：14775084
> 
> 赞同：0
> 
> 时间：2013-02-08T14:47:28.197
> 
> 标签：javascript, file, slice

我是 javascripting 的新手，我有这段代码。在此代码中，您可以选择一个文件，然后查看它的前 AB 字节、BC 字节或整个文件。此代码的演示位于：[http](http://www.html5rocks.com/en/tutorials/file/dndfiles/) ://www.html5rocks.com/en/tutorials/file/dndfiles/ - 标题：切片文件。

1.  问题：如何设置要在此脚本中使用的永久文件，而不是上传随机文件的机会？（例如，我有文件 test.html，我希望它是该脚本使用的唯一一个文件）。

2.  问题：当我上传一个 html 文件时，脚本没有显示该文件的部分内容，但它显示了该文件的源代码部分。例如，如果上传的文件包含一个 image 标签，在结果中我看不到图片，而只有完全重写的源代码。有什么办法让javascript结果像用html编写的普通页面一样？

对于熟练的人来说，这可能是原始问题，但是我的编程知识以 C 语言知识结束，当我学习 php 或 javascript 时，我只是在猜测。大多数时候我是成功的，但不是现在:(

感谢每个答案！

```
<style>
  #byte_content {
    margin: 5px 0;
    max-height: 100px;
    overflow-y: auto;
    overflow-x: hidden;
  }
  #byte_range { margin-top: 5px; }
</style>

<input type="file" id="files" name="file" /> Read bytes: 
<span class="readBytesButtons">
  <button data-startbyte="0" data-endbyte="4">1-5</button>
  <button data-startbyte="5" data-endbyte="14">6-15</button>
  <button data-startbyte="6" data-endbyte="7">7-8</button>
  <button>entire file</button>
</span>
<div id="byte_range"></div>
<div id="byte_content"></div>

<script>
  function readBlob(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementById('byte_content').textContent = evt.target.result;
        document.getElementById('byte_range').textContent = 
            ['Read bytes: ', start + 1, ' - ', stop + 1,
             ' of ', file.size, ' byte file'].join('');
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }

  document.querySelector('.readBytesButtons').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');
      readBlob(startByte, endByte);
    }
  }, false);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:04:37.113

1.  不可以。出于安全原因，您不能在没有用户选择的情况下直接与文件系统交互。想象有人在做`upload 'known/path/to/passwords'`。

2.  这很困惑。文件的**内容**和**源代码**是不同的想法。你在混合关卡。文档有内容。并且文档可能由文件中的源代码表示。但是您不上传文件。您上传一个文件，即代表该源代码的字节集。将其解释为文档是您需要执行的单独工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:05:36.773

> 问题1：如何设置一个永久文件在这个脚本中使用，而不是上传随机文件的机会？

如果没有他明确地“上传”它们，您将无法从用户的计算机访问任何文件。其他任何事情都是安全问题。但是，某些“应用程序”（浏览器扩展等）可以拥有此权限，并且在某些浏览器中您可以禁用安全性。

要每次加载特定文件，您应该使用 ajax 请求到网络中。

> 问：当我上传一个 html 文件时，脚本没有显示该文件的部分内容，但它显示了该文件的源代码部分。

这就是它应该如何工作的方式。html 文件仅包含标记；图片是不同的文件。

> 有什么办法让javascript结果像用html编写的普通页面一样？

当然，您可以通过将 HTML 源代码写入 iframe 或其他内容来呈现 HTML 源代码。但是它不会访问本地文件的图像。

# bash - 在 bash 脚本 vs 函数参数中设置

> ID：14775086
> 
> 赞同：2
> 
> 时间：2013-02-08T14:47:34.983
> 
> 标签：bash, shell, parameters

我正在更改一个结构如下的 bash 脚本：

```
#somewhere in the code
sim_counts=#... some value
function_name()
{
    set $sim_counts
    for hostname in $linux_hostnames; do
        if [ $1 -eq 0 ]; then # if sim_counts equal 0
            shift  # jump forward in sim_counts
            continue 
        fi
    # ... more code
    shift
    done
} 
```

然后在脚本中调用它：

```
function_name 
```

* * *

我想给这个函数引入一个参数：

```
#somewhere in the code
sim_counts=#... some value
function_name()
{
    ip=$1
    set $sim_counts
    for hostname in $linux_hostnames; do
        if [ $1 -eq 0 ]; then # if sim_counts equal 0
            shift  # jump forward in sim_counts
            continue 
        fi
    # ... more code
    shift
    done
} 
```

并通过以下方式调用该函数：

```
function_name 10.255.192.123 
```

我应该怎么做才能避免`$1`函数参数和`set`命令中的其他值发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:05:39.337

如果我正确阅读了Bash 参考手册中的[set 内置页面](http://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html)，我相信您编写的代码会正常工作。从该页面引用：

> 剩余的 N 个参数是位置参数，并按顺序分配给 $1、$2、... $N。特殊参数 # 设置为 N。

本质上，位置变量的任何预先存在的值都将被吹走。该手册页上的第一句话也很有趣：

> 这个内置函数非常复杂，值得拥有自己的部分。

简而言之，我认为您的代码应该可以按预期工作。您已将`$1`（来自函数调用）的初始值保存到临时变量中；只要您参考`$ip`该特定值，您就应该很好。在我自己的测试脚本中，它似乎`$1`像我预期的那样被吹走了。

# c++ - C++ 虚拟调用实现需要说明

> ID：14775087
> 
> 赞同：2
> 
> 时间：2013-02-08T14:47:35.670
> 
> 标签：c++, oop

我对虚函数或更好的说法有一些疑问，我们可以说运行时多态性。据我说，我假设它的工作方式如下，

1.  将为每个具有至少一个虚拟成员函数的类创建一个虚拟表（V-Table）。我相信这是静态表，因此它是为每个类而不是为每个对象创建的。如果我在这里错了，请纠正我。

2.  这个 V-Table 有虚函数的地址。如果类有 4 个虚函数，那么这个表就有 4 个条目指向对应的 4 个函数。

3.  编译器将添加一个虚拟指针（V-Ptr）作为该类的隐藏成员。这个虚拟指针将指向虚拟表中的起始地址。

假设我有这样的程序，

```
class Base
{
    virtual void F1();
    virtual void F2();
    virtual void F3();
    virtual void F4();
}
class Der1 : public Base  //Overrides only first 2 functions of Base class
{
    void F1(); //Overrides Base::F1()
    void F2(); //Overrides Base::F2()
}
class Der2 : public Base  //Overrides remaining functions of Base class
{
    void F3(); //Overrides Base::F3()
    void F4(); //Overrides Base::F4()
}
int main()
{
    Base* p1 = new Der1; //Believe Vtable will populated in compile time itself
    Base* p2 = new Der2;
    p1->F1(); //how does it call Der1::F1()
    p2->F3(); //how does it call Base::F3();
} 
```

如果 V-Table 在编译时填充，为什么将其称为运行时多态性？请使用上面的示例向我解释有多少 vtable 和 vptr 以及它是如何工作的。根据我的说法，Base、Der1 和 Der2 类将有 3 个 Vtable。在 Der1 Vtable 中，它有自己的 F1() 和 F2() 地址，而对于 F3() 和 F4()，地址将指向 Base 类。此外 3 Vptr 将作为隐藏成员添加到 Base、Der1 和 Der2 类中。如果一切都是在编译时决定的，那么在运行时究竟会发生什么？如果我的概念有误，请纠正我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:17:32.623

它显然是实现定义的，但大多数实现都非常相似，或多或少地沿着您描述的路线。

1.  这是对的。

2.  vtables 不仅仅包含指向函数的指针。通常有一个指向 RTTI 信息的入口，通常还有一些关于如何在调用函数时修复 this 指针的信息（尽管这也可以使用蹦床来完成）。在虚拟基地的情况下，虚拟基地也可能存在偏移。

3.  这也是正确的。请注意，在构造和销毁过程中，编译器会随着`vptr`对象的动态类型的变化而改变 ，并且在多重继承（有或没有虚基）的情况下，会有多个`vptr`. （`vptr`相对于类的基地址有一个固定的偏移量，并且在多重继承的情况下，并非所有类都可以具有相同的基地址。）

至于您的最后评论：vtables 在编译时填充，并且是静态的。但是 vptr 是在运行时根据动态类型设置的，函数调用使用它来查找 vtable 并调度调用。

在您的（非常简单的）示例中，有三个 vtable，每个类一个。因为只涉及简单的继承，所以每个实例只有一个 vptr，`Base`在派生类之间共享。的 vtable将包含四个插槽，`Base`指向`Base::f1`、`Base::f2`和。vtable for也将包含四个插槽，指向 、和。的 vtable将指向、和。for 的构造函数会将 vptr 设置为`Base::f3``Base::f4``Der1``Der1::f1``Der1::f2``Base::f3``Base::f4``Der2``Base::f1``Base::f2``Der2::f3``Der2::f4``Base``Base`; 派生类的构造函数将首先调用基类的构造函数，然后将 vptr 设置为与其类型对应的 vtable。（实际上，在这种简单的情况下，编译器可能能够确定 vptr 从未在构造函数中使用 to `Base`，因此跳过设置它。在更复杂的情况下，编译器无法看到基础的所有行为但是，类构造函数并非如此。）

至于为什么叫运行时多态，考虑一个函数：

```
void f(Base* p)
{
    p->f1();
} 
```

实际调用的函数会有所不同，具体取决于`p`指向 a`Der1`还是 a `Der2`。换句话说，它将在运行时确定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T15:16:28.290

C++ 标准没有指定必须如何实现虚函数调用，但这里有一个普遍接受的方法的简化示例。

从高级的角度来看，v-tables 看起来像这样：

**基地**：

```
Index |  Function Address
------|------------------
    0 |  Base::F1
    1 |  Base::F2
    2 |  Base::F3
    3 |  Base::F4 
```

**德尔1**：

```
Index |  Function Address
------|------------------
    0 |  Der1::F1
    1 |  Der1::F2
    2 |  Base::F3
    3 |  Base::F4 
```

**德尔2**：

```
Index |  Function Address
------|------------------
    0 |  Base::F1
    1 |  Base::F2
    2 |  Der2::F3
    3 |  Der2::F4 
```

当你创建`p1`and`p2`时，它们会得到一个分别指向`Der1`'vtable 和`Der2`'vtable 的指针。

调用`p1->F1`基本上意味着“调用`p1`虚拟表上的函数 0”。 `vptr[0]`是`Der1::F1`，所以它被调用。

它被称为运行时多态性，因为将为特定对象调用的函数是在运行时确定的（通过在对象的 vtable 中进行查找）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T14:50:29.783

它是实现定义的。使用 C++ 编程时，您唯一应该关心的是，如果您声明一个方法`virtual`，则指针或引用后面的对象的运行时内容将决定将调用什么代码。

也许您应该[先阅读有关该主题的内容](http://en.wikipedia.org/wiki/Late_binding)。[这](http://en.wikipedia.org/wiki/Virtual_table)是 C++ 特定的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:20:02.793

我不打算介绍四个虚函数和三个派生类型。可以这么说：对于最终的基类，vtable 具有指向所有虚函数的基类版本的指针。对于派生类，vtable 有指向派生类所有虚函数的指针；当派生类覆盖基类函数时，该函数的函数指针指向派生类的该虚函数的版本；当派生类继承虚函数时，函数指针指向被继承的函数。

# linux-device-driver - 在Linux中实现SPI MUX驱动

> ID：14775088
> 
> 赞同：0
> 
> 时间：2013-02-08T14:47:35.733
> 
> 标签：linux-device-driver, spi

在正常情况下，SPI 设备驱动程序与 SPI 控制器通信，以便能够读取/写入真实的 SPI 设备，该设备通过 Clk、MOSI.MISO 和 CS（芯片选择）连接到 SPI 控制器。

如果 SPI 控制器没有足够的 CS 线，我们有一个通过 SPI 连接的 CPLD 设备来增加 16 条 CS 线。由于每个设备都有一个驱动程序，我想实现一个 SPI Mux，以便通过 CPLD 连接的设备可以访问。

CPLD 有两条 CS 线，一条用于选择 CPLD 设备本身，另一条用于将其路由到与其连接的其他设备。其他 CLK、MOSI、MISO 来自 SPI 控制器。作为标准，可以添加有关设备的信息 intp spi_board_info

```
 static struct spi_board_info spi_board_cpld_main_mux_info[] =
    {
        {   /* main board cpld cs */
            .modalias    = "cpld_gpio", //device driver for CPLD
            .platform_data   = &cpld_gpio_main_pdata,
            .controller_data = (void *)GPIO59_SPI2_FRM,
            .max_speed_hz    = 13000000,
            .bus_num     =2,
            .chip_select     = 0,
            .mode        = SPI_MODE_0,
        },
        {
            /* Suzuka connected over CPLD main  card */
            .modalias = "suzuka",
            //.platform_data = &main_cpld_gpio_pdata,
            .controller_data = (void *)25,
            .max_speed_hz = 1000000,
            .bus_num = 2,
            .chip_select = 1, /* chip select line denoting the gpio_cs on CPLD */
            .mode = SPI_MODE_0,
        },
        {
            /* some SPI device connected over CPLD main  card */
            .modalias = "spidevice1",//or some another driver
            //.platform_data = &aux_cpld_gpio_pdata,
            .controller_data = (void *)25,
            .max_speed_hz = 1000000,
            .bus_num = 2,
            .chip_select = 2, /* chip select line denoting the gpio_cs on CPLD */
            .mode = SPI_MODE_0,
        }   
    }; 
```

但是连接到这些元素的驱动程序无法写入真实设备，因为 CS 必须通过另一个 SPI 设备的 CPLD 路由到预期设备。

我的难题是如何实现这样的 SPI MUX，它会在每次驱动程序想要访问通过 CPLD 连接的设备时执行 CS 的路由。以及如何将此 SPI MUX 驱动程序连接到各个驱动程序。

我试图在内核代码中找到一些帮助，但只找到了可以直接调用 SPI Master 功能的设备驱动程序。任何人都可以为此提供任何指示。

# jquery - 使用 jquery 和敲除的多个复选框

> ID：14775091
> 
> 赞同：-2
> 
> 时间：2013-02-08T14:47:49.097
> 
> 标签：jquery, jquery-ui, knockout.js

我想在表格或列表中实现多个复选框，如下图所示。

![在此处输入图像描述](../Images/456dfaad3344dd6a39f4542931cb8f83.png)

我如何使用 Jquery 和淘汰赛来实现它。Knockout 会将数据绑定到复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:25:42.750

对数据进行简单的 foreach，每个表格行的代码绑定到每个数据项中的各个属性，每个表格单元格一个属性。您可以使用[选中的绑定](http://knockoutjs.com/documentation/checked-binding.html)来确定是否需要选中复选框。

# highcharts - 不规则间隔图表中的错误开始日期

> ID：14775098
> 
> 赞同：0
> 
> 时间：2013-02-08T14:47:59.453
> 
> 标签：highcharts

不规则系列的开始日期与鼠标悬停提示上显示的日期不同。此外，您可以在 HC 演示页面上查看冬季系列赛开始日期：[http ://www.highcharts.com/demo/spline-irregular-time](http://www.highcharts.com/demo/spline-irregular-time)

![在此处输入图像描述](../Images/965f8ea617a6442e04900541c1d63adb.png)

我该如何解决这个问题，所以两个日期都指向常规日期。

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:00:53.420

没有错误。XAxis 标签的计算只是为了适应屏幕。标签上可能没有意义。对于此示例，时间是每 14 天分段的。如果时间太长，可能会分片大于14，或者小于14。

> XAxis 标签不代表点。它只显示时间间隔。

# c# - 绑定 IEnumerable 的结果 到组合框

> ID：14775099
> 
> 赞同：2
> 
> 时间：2013-02-08T14:47:59.430
> 
> 标签：c#, wpf, xaml, data-binding, collections

我正在尝试将 ViewModel 中集合的结果绑定到组合框。下面是我的代码。任何帮助，将不胜感激。如果您需要查看其他内容或需要更多信息，请告诉我。

XAML：

```
DataContext="clr-namespace:Alliance.Library.Email.EmailViewModel"

  <ComboBox x:Name="cboProviders" ItemsSource="{Binding Source=AddressProviders}" DisplayMemberPath="ProviderName" Grid.Row="0" Grid.Column="1"></ComboBox> 
```

那是我的组合框。我意识到该代码是完全错误的，但我是新手，所以我试图通过反复试验来解决它。

代码：

这是在我的 VeiwModel “EmailViewModel.cs”中：

```
 public IEnumerable<IEmailAddressesProvider> AddressProviders { get; set; } 
```

这是我的界面“IEmailAddressesProvider”：

```
 public interface IEmailAddressesProvider
    {
        string ProviderName { get; }
        IEnumerable<EmailAddress> GetEmailUsers();
    }
} 
```

包含 GetEmailUsers() 的“EmailAddressProviders.cs”代码：

```
[Export(typeof(IEmailAddressesProvider))]
    public class EmailAddressProvider : IEmailAddressesProvider
    {
        #region Private Properties

        private static readonly IEncryptionService encryptionService = AllianceApp.Container.GetExportedValue<IEncryptionService>();

        #endregion

        public string ProviderName
        {
            get { return "Alliance Users"; }
        }

        public IEnumerable<EmailAddress> GetEmailUsers()
        {
            IUserRepository userRepo = AllianceApp.Container.GetExportedValue<IUserRepository>();
            IEnumerable<User> users = userRepo.GetAllUsers().Where(a => a.IsDeleted == false).OrderBy(a => a.UserID).AsEnumerable();

            List<EmailAddress> AddressList = new List<EmailAddress>();

            foreach (var user in users)
            {
                if (user.DisplayName != null && user.EmailAddress != null && user.DisplayName != string.Empty && user.EmailAddress != string.Empty)
                    AddressList.Add(new EmailAddress() { DisplayName = encryptionService.DecryptString(user.DisplayName), Email = encryptionService.DecryptString(user.EmailAddress) });
            }

            AddressList.OrderBy(u => u.DisplayName);

            return AddressList;

        }
    } 
```

我正在使用 MEF 来了解如何设置这些值，我喜欢称之为“魔术”。我没有写这个的电子邮件部分。我只是想照顾组合框中的元素。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:57:12.223

如果您在任何地方都没有真正的 StaticResource，则不应使用它。对于您的情况，您很可能希望执行以下操作：

将方法更改`GetEmailUsers()`为属性（只能绑定属性，不能绑定方法返回值）：

```
public interface IEmailAddressesProvider
{
    string ProviderName { get; }
    IEnumerable<EmailAddress> EmailUsers { get; set;};
} 
```

然后将您的 XAML 更改为：

```
<ComboBox x:Name="cboProviders" ItemsSource="{Binding AddressProviders.EmailUsers}" Grid.Row="0" Grid.Column="1"></ComboBox> 
```

还要确保将 Page 的 DataContext 设置为 ViewModel 实例。

**编辑：**好的，只是明白你设置`DataContext`错误。根据您编写的内容，您似乎将其设置在 XAML 中的某个位置，如下所示：

```
DataContext="clr-namespace:Alliance.Library.Email.EmailViewModel" 
```

这实质上意味着您将数据上下文设置为字符串，然后尝试绑定到该字符串的属性，这些属性当然不存在。我建议您检查运行时输出是否存在绑定错误，以确保是这种情况。

如果确实如此，那么您需要`DataContext`正确设置。最简单的选择是在视图的构造函数中执行此操作：

```
public MyView()
{
    DataContext = new Alliance.Library.Email.EmailViewModel();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:55:56.270

我认为这就是您想要的（在视图中）。

```
<ComboBox 
    x:Name="cboProviders" 
    ItemsSource="{Binding Source=AddressProviders}"
    DisplayMemberPath="ProviderName"
    Grid.Row="0" Grid.Column="1"></ComboBox> 
```

[MSDN 上的DisplayMemberPath](http://msdn.microsoft.com/en-au/library/system.windows.controls.itemscontrol.displaymemberpath.aspx)。

# jquery - 手机不滚动网站的响应式设计

> ID：14775101
> 
> 赞同：2
> 
> 时间：2013-02-08T14:48:00.460
> 
> 标签：jquery, html, css, responsive-design

我正在设计一个响应式网站。它在桌面上运行良好，但是当我在手机上测试时，我无法滚动页面。所以我只能看到适合设备高度的内容。注意：我什至包括了 meta name="viewport" content="width=device-width",initial-scale-1.0" 请帮助我:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-26T08:11:34.910

你问这个问题已经一年了，但我的回答可能会对某人有所帮助。

确保您没有使用**`body{ overflow: hidden}`**，因为这将隐藏在初始屏幕中不可见的内容。

编辑：如果您想隐藏由于未知原因而出现的水平滚动，请使用`body{overflow-x: hidden}`. 但是，我建议您找到水平滚动背后的原因。

# jquery - 更改 li 内 span 内内容的 css

> ID：14775103
> 
> 赞同：2
> 
> 时间：2013-02-08T14:48:11.683
> 
> 标签：jquery, css, jquery-mobile, html

我正在尝试在 jQuery Mobile 的列表视图中设置已读/未读消息的样式集。

```
 <ul data-role="listview" data-theme="c" id="#messageList" style="padding-top:10%;">

                    <li data-icon="false">
                        <a href="#" onclick="messageClick()">
                         <p>
                            <span style="float:left;clear:left;font-weight: bold;text-decoration:underline;color:blue;white-space:pre-wrap; width:30ex">Some unread text</span>
                            <span style="float:right;font-weight: bold;">08/02/13</span>   
                         </p>
                        </a>
                    </li>
                    .....
                    </ul> 
```

我的内心`messageClick()`：

```
function messageClick(){    
    $(this).findclosest("span").css("font-weight","normal");
} 
```

但这似乎不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:52:29.143

`findclosest`不是函数。查看您的 javascript 控制台，我确定您遇到了错误。也`this`可能没有设置为元素，而是设置为窗口，因为您在全局范围内调用它。您可能想要的更像是：`<a href="#" class="messageClick">`

和

```
$('#messagelist').on('click','a.messageClick', function() {
    $(this).parent().find('span').first().css(...);
    return false;
} 
```

请注意，我去找父母然后找到第一个跨度。我这样做是因为块元素`p`不能存在于内部`a`，因此不同的浏览器可能会以不同的方式对待它。我强烈建议使用类而不是内联样式，并基于这些类而不是一些随机的 DOM 层次结构进行定位。您的代码可能需要进行一些严肃的清理工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:52:35.713

它是什么`findclosest()`在 jQuery 文档中不存在。如果你想访问`<li`> 下的第一个跨度，这样的东西应该可以工作：

```
function messageClick(){    
    $(this).find("p > span:first").css("font-weight","normal");
} 
```

如果您想更改两个跨度，您可以`:first`从选择器中删除，即使`$(this).find("span")`您没有多个跨度也可以使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T14:53:03.873

你不想`find()`-`findclosest()`不存在：

```
function messageClick(){    
    $(this).find("span").css("font-weight","normal");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T15:00:09.990

jQuery Mobile 不适用于 onclick="... 或 occhange="... 事件，它们与 jQM 页面事件触发冲突。

您应该手动绑定单击事件，如下所示：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('click', '#messageList li a', function(){   
        $(this).find("span:first").css("font-weight","normal");
    });    
}); 
```

这是一个有效的 sjFiddle 示例：http: [//jsfiddle.net/Gajotres/Speu2/](http://jsfiddle.net/Gajotres/Speu2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T14:52:51.990

您可能想使用 .find ，因为我认为 .findclosest 不存在（.closest 确实存在但不是为此）

# java - 在java中使用套接字进行对象传输

> ID：14775105
> 
> 赞同：0
> 
> 时间：2013-02-08T14:48:18.360
> 
> 标签：java, sockets, real-time

```
 if(server&&network){
    try{
       serverSocket = new ServerSocket(12345);
       socket = serverSocket.accept();
       System.out.println("Connected to " + socket.getInetAddress().getHostName());
       out = new ObjectOutputStream(socket.getOutputStream());
       in = new ObjectInputStream(socket.getInputStream());
       out.writeObject(lou);
       out.flush();
       out.reset();
       out.writeObject(dud);
       out.flush();
       out.reset();
       me = new Gen(lou, dud);
       //socket.close();
       //serverSocket.close();
    }catch(IOException ioException){
        ioException.printStackTrace();
    }
    }else if(network&&!server){
        try{
             //Socket socket = new Socket("10.69.18.244", 12345);
             socket = new Socket("192.168.1.100", 12345);
             //Socket socket = new Socket("10.69.18.162", 12345);
             out = new ObjectOutputStream(socket.getOutputStream());
             in = new ObjectInputStream(socket.getInputStream());
             lou = (ArrayList)in.readObject();
             //in.reset();
             dud = (ArrayList)in.readObject();
             //in.reset();
             me = new Gen(dud, lou);
             //socket.close();
        }catch(Exception ioException){
            ioException.printStackTrace();
        }
    } 
```

当我尝试`out.writeobject(lou)`在服务器上使用时，我收到了 NullPointerException。客户端抛出一个`NotSerializableException`. 我不知道为什么，因为我在它上面初始化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:04:49.050

您想打开一个连接并在整个游戏中保持打开状态。

# c# - 有界 DataGridView 以编程方式修改最后一行（新行）

> ID：14775106
> 
> 赞同：0
> 
> 时间：2013-02-08T14:48:20.700
> 
> 标签：c#, datagridview

当我以电子方式修改 DataGridView 中的最后一行（新行，NewRowIndex）时，它不会像使用键盘输入数据时那样创建新行，或者如果我向 DataTable 添加新行，它将添加两行之一。任何想法如何处理这个？

```
 int rowIndex = dataEntryGridView.SelectedCells[0].RowIndex;
     GridModel gm = (GridModel)dataEntryGridView.DataSource;
     if (gm == null) return;
     int rowCount = gm.Rows.Count; // to many additions
     //int rowCount = dataEntryGridView.Rows.Count; // no adition
     if (dataEntryGridView.AllowUserToAddRows)
     {
        nrRows = rowsInClipboard.Length;
        if (rowCount < (rowIndex + nrRows) && gm != null )
              gm.AddRows(rowIndex + nrRows - rowCount);
     }
     int colIndex = dataEntryGridView.SelectedCells[0].ColumnIndex;
     int colCount = dataEntryGridView.Columns.Count;
     for (int iRow = 0; iRow < nrRows; iRow++)
     {
        string[] valuesInRow = rowsInClipboard[iRow].Split(columnSplitter);
        for (int iCol = 0; iCol < valuesInRow.Length; iCol++)
        {
           if (colCount > colIndex + iCol)
           {
              DataGridViewCell cell = dataEntryGridView.Rows[rowIndex + iRow].Cells[colIndex + iCol];
              if (!cell.ReadOnly)
              {
                 gm.Rows[rowIndex + iRow][colIndex + iCol] = valuesInRow[iCol];
                 //cell.Value = valuesInRow[iCol];
              }
           }
        }
     } 
```

# selenium - 如何使用 Selenium IDE 验证代码片段是否存在？

> ID：14775107
> 
> 赞同：1
> 
> 时间：2013-02-08T14:48:21.607
> 
> 标签：selenium, selenium-ide

我想检查页面的源代码是否包含以下内容：

```
background-color:#00FF00;border-color:#CCCCCC;border-width:1px;border-style:Solid;width:14%; 
```

这里的诀窍是它是没有 ID 的元素的一部分：

```
<td align="center" style="[see previous]">...</td> 
```

在 Selenium IDE 中完成此操作的命令/目标/值应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:16:09.057

正确使用的命令是[`verifyAttribute`](http://release.seleniumhq.org/selenium-core/1.0/reference.html#storeAttribute).

此外，ID 不是查找元素的唯一方法，您还可以使用[XPath 或 CSS 选择器](http://release.seleniumhq.org/selenium-core/1.0/reference.html#locators)，两者都适合您。

只需想出正确的 XPath（或 CSS 选择器），或使用为您完成这项工作的任何自动工具。如果您在 Selenium IDE 中记录元素上的操作，您会看到它可能使用 XPath 表达式来定位元素。或者，如果您在 Firebug 中右键单击一个元素，您将看到复制 XPath 或 CSS 选择器的选项，因此请使用它们。

一个例子：

```
verifyAttribute   xpath=//locator/to/your/element@style   background-color:#00FF00;border-color... 
```

定位器的`@style`部分可能是唯一有趣的部分，因为它是 Selenium 定位属性的约定。

* * *

**编辑**处理 OP 的评论：

> 我想要完成的是检查给定表格（代表日历）中至少一个的背景是否具有绿色背景。您能否就如何实现它提供一些指导？

当然，我会使用[`assertElementPresent`](http://release.seleniumhq.org/selenium-core/1.0/reference.html#storeElementPresent)这个 XPath 表达式：

```
xpath=//table//td[contains(@style,'background-color:#00FF00')] 
```

它返回在其属性`<td>`中声明的所有具有绿色背景的元素。`style`

然后该命令确保在页面上找到至少一个匹配元素。

# asp.net - asp.net ajax updatepanel中动态添加的控件之间的换行符

> ID：14775110
> 
> 赞同：0
> 
> 时间：2013-02-08T14:48:39.660
> 
> 标签：asp.net, ajax, asp.net-ajax, updatepanel

对不起，我错过了这个基本的东西。不知道如何实现这一目标。

这是我的 Default.aspx

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:ScriptManager ID="MainScriptManager" runat="server"  />
    <asp:UpdatePanel EnableViewState="true" UpdateMode="Always" ID="mainpanel" runat="server">
        <ContentTemplate>
            <asp:PlaceHolder ID="MainPlaceHolder" runat="server">

                 <%--<asp:Button runat="server" id="EditButton" onclick="UpdateButton_Click" text="Edit" Visible="true"/>
                <asp:Button runat="server" id="DeleteButton" onclick="UpdateButton_Click" text="Delete" Visible="true"/> --%>      
                                       <%--<br />--%>               </asp:PlaceHolder>
        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:Button runat="server" id="UpdateButton2" onclick="UpdateButton_Click" text="Add" />
</asp:Content> 
```

这是我的 Default.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {

    }
}

protected void UpdateButton_Click(object sender, EventArgs e)
{
    int count = 0;

    if (ViewState["ButtonCount"] != null)
    {
        count = (int)ViewState["ButtonCount"];
    }

    count++;
    ViewState["ButtonCount"] = count;

    for (int i = 0; i < count; i++)
    {
        TextBox t = new TextBox();
        t.Text = "hello"+i.ToString();
        MainPlaceHolder.Controls.AddAt(MainPlaceHolder.Controls.Count, t);
    }   
} 
```

当我运行这个应用程序并单击按钮时，每次都会添加一个新的文本框控件。没关系。但我想在每个文本框控件之间有一个分隔空间！请帮我解决我丢失的部分。

我尝试在 asp 占位符的结束标记上方使用 br 标记。它失败了。扩展问题，如果我想在每个动态添加的文本框旁边添加两个按钮，我是否走在正确的道路上？对不起一个大问题。不能再减少它了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:42:02.857

我希望修改您的代码看起来像这样会起作用：

```
for (int i = 0; i < count; i++)
{
    TextBox t = new TextBox();
    t.Text = "hello"+i.ToString();
    MainPlaceHolder.Controls.AddAt(MainPlaceHolder.Controls.Count, t);
    Literal lit = new Literal() { Mode=LiteralMode.PassThrough, Text="<br/>" };
    MainPlaceHolder.Controls.AddAt(MainPlaceHolder.Controls.Count, lit);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:37:26.883

将其用作您的 default.aspx：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:ScriptManager ID="MainScriptManager" runat="server"  />
<asp:UpdatePanel EnableViewState="true" UpdateMode="Always" ID="mainpanel" runat="server">
    <ContentTemplate>
        <asp:PlaceHolder ID="MainPlaceHolder" runat="server" ClientIDMode="static">

             <%--<asp:Button runat="server" id="EditButton" onclick="UpdateButton_Click" text="Edit" Visible="true"/>
            <asp:Button runat="server" id="DeleteButton" onclick="UpdateButton_Click" text="Delete" Visible="true"/> --%>      
                                   <%--<br />--%>               </asp:PlaceHolder>
    </ContentTemplate>
</asp:UpdatePanel>
<asp:Button runat="server" id="UpdateButton2" onclick="UpdateButton_Click" text="Add" /> 
```

然后将其添加到您的 CSS 中：

```
#MainPlaceHolder input[type=text]
{
    display:block;
} 
```

# mysql - 需要帮助通过单个 Magento 安装写入多个数据库

> ID：14775114
> 
> 赞同：0
> 
> 时间：2013-02-08T14:48:45.500
> 
> 标签：mysql, database, magento, magento-1.7

我是 Magento 的新手（我很喜欢它），并且正在开发一个桌面应用程序以与我们的 Magento CE 1.7 商店并行运行。桌面应用程序将拥有自己的数据库，但我们需要从 magento 获取几乎所有信息。

所以，我已经复制了magento的整个数据库并在应用程序的数据库中使用它。当通过magento的站点在magento的数据库中写入某些内容时，我也需要在应用程序的数据库中写入。我们不需要从应用程序的数据库中读取，只需要写入。

我需要在哪里进行哪些更改？如果有人可以为我提供一些深入的指导，我将不胜感激。请帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T00:47:51.377

### Magento 可以本地处理只读从站吗

Magento*本身*能够分离对不同数据库服务器的读/写（除了一些损坏的版本，例如 EE 1.11） - 允许您将`select`负载抵消到额外（或更多）服务器；并将所有`update/write`查询转发给单个主控。

### 配置从站

首先配置你的奴隶。我们是 Percona 实用程序和 MySQL 分支的大力倡导者——它们有一个理想的工具来对现有数据库进行*热*备份——innobackupex。*[这里](http://www.percona.com/doc/percona-xtrabackup/howtos/setting_up_replication.html)**有一篇好文章。*

**在主上**

替换 $TIMESTAMP 或制表符完成。

```
mysql
> GRANT REPLICATION SLAVE ON *.*  TO 'repl'@'$slaveip' IDENTIFIED BY '$slavepass';
> quit;
innobackupex --user=username --password=password /path/to/backupdir
innobackupex --user=username --password=password /
       --apply-log /path/to/backupdir/$TIMESTAMP/

rsync -avprP -e ssh /path/to/backupdir/$TIMESTAMP TheSlave:/path/to/mysql/
scp /etc/mysql/my.cnf TheSlave:/etc/mysql/my.cnf 
```

**在奴隶上**

```
/etc/init.d/mysql stop
mv /path/to/mysql/datadir /path/to/mysql/datadir_bak
mv /path/to/mysql/$TIMESTAMP /path/to/mysql/datadir
chown -R mysql:mysql /path/to/mysql/datadir
sed -i 's#server-id=1#server-id=2#g' /etc/mysql/my.cnf
/etc/init.d/mysql start
cat /var/lib/mysql/xtrabackup_binlog_info
> TheMaster-bin.000001     481

mysql
> CHANGE MASTER TO MASTER_HOST='$masterip', MASTER_USER='repl', MASTER_PASSWORD='$slavepass', MASTER_LOG_FILE='TheMaster-bin.000001', MASTER_LOG_POS=481;
> START SLAVE; 
```

然后，一旦您的从站开始运行，实际上，只需要几行额外的代码即可实现。

在`./app/etc/local.xml`

```
<default_read>
  <connection>
    <use/>
    <host><![CDATA[host]]></host>
    <username><![CDATA[username]]></username>
    <password><![CDATA[password]]></password>
    <dbname><![CDATA[dbname]]></dbname>
    <type>pdo_mysql</type>
    <model>mysql4</model>
    <initStatements>SET NAMES utf8</initStatements>
    <active>1</active>
  </connection>
</default_read> 
```

*来源*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:42:45.577

要处理多个数据库，您应该执行以下操作：

1°）在 /app/etc/local.xml 中创建数据库连接：

你有类似的东西：

```
 <default_setup>
            <connection>
                <host><![CDATA[localhost]]></host>
                <username><![CDATA[user]]></username>
                <password><![CDATA[password]]></password>
                <dbname><![CDATA[dbname]]></dbname>
                <active>1</active>
            </connection>
        </default_setup> 
```

处理你的 mysql 数据库。在此处添加另一个节点来处理新的连接

```
 <mysetup>
<connection>
<host>192.168.5.10</host> <!-- host of my local server -->

<username>user</username>
<password>passwd</password>
<dbname>d:\pathtomydb\bin\dbname.FDB</dbname>
<active>1</active>
   </connection>
   </mysetup> 
```

现在你有了另一个联系。

我的是火鸟，因此您可以对此进行一些更改，但这是我的处理方式：

连接：

```
 $config = Mage::getConfig()->getResourceConnectionConfig('mysetup');

        $dbConfig = array(
        'host'      => $config->host,
        'username'  => $config->username,
        'password'  => $config->password,
        'dbname'    => $config->dbname
    );
        $connexion = Zend_Db::factory('Firebird', $dbConfig); 
```

将 Firebird 替换为您需要的连接类型（如 Pdo_Mysql 或类似的东西）。查询：

```
 $connexion->fetchAll($request);
 $connexion->update('table',array('field'=>'value'),$where); 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T21:53:29.707

如果您的 DNS 支持，您可以使用加权路由策略创建记录集。就像 AWS Route 53。为了避免停机，您可以将其与运行状况检查相关联。

一个例子：[https ://aws.amazon.com/pt/blogs/aws/domain-name-health-checks-for-route-53/](https://aws.amazon.com/pt/blogs/aws/domain-name-health-checks-for-route-53/)

# django - Django 1.4 PBKDF2 密码哈希

> ID：14775116
> 
> 赞同：0
> 
> 时间：2013-02-08T14:48:51.687
> 
> 标签：django

最近几天，我对如何在目标 C 中实现 PBKD2 进行了大量研究和测试。虽然我找到了许多可行的答案，但所有尝试都给了我比 django 1.4 不同的结果。我举了一些我试图生成哈希的例子。

作为密钥，我添加了从服务器下载的盐（django 格式：$$），作为数据，我添加了用于创建 django 用户的相同密码。不幸的是，我的结果哈希字符串与存储在 Django 数据库中的完全不同。示例功能代码：

```
NSData *hmacForKeyAndData(NSString *key, NSString *data)
{
const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];
unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];
CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
return [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];
} 
```

谁能给我一点建议，出了什么问题？

# android - Android计费库错误

> ID：14775118
> 
> 赞同：13
> 
> 时间：2013-02-08T14:48:54.350
> 
> 标签：android, android-library, android-billing

每个人。
我刚开始在我的应用程序中购买应用程序。
这对我来说是新事物。
现在在网上看到一些例子，我发现github上的一个项目在我链接计费库之前就充满了错误。
当我这样做时，我刚刚解决了项目中的错误，但由于android计费库包有错误，它仍然有一个感叹号红色标记。
我检查了错误，但我无法解决它，因为我不明白如何解决。
拜托各位，我真的需要一些帮助。

我在这些行中得到了错误

```
 @Override 
    public android.os.IBinder asBinder()
    {
        return this;
    } 
```

在 asBinder 中，错误及其说“此行有多个标记

```
- The method asBinder() of type IMarketBillingService.Stub must override a superclass method  
- implements android.os.IInterface.asBinder" 
```

与此代码相同，我也收到错误

```
 @Override
    public android.os.Bundle sendBillingRequest(android.os.Bundle bundle) throws android.os.RemoteException     
    {
        android.os.Parcel _data = android.os.Parcel.obtain();
        android.os.Parcel _reply = android.os.Parcel.obtain();
        android.os.Bundle _result;
        try {
            _data.writeInterfaceToken(DESCRIPTOR);
            if ((bundle!=null)) {
                _data.writeInt(1);
                bundle.writeToParcel(_data, 0);
            } else {
                _data.writeInt(0);
            }
            mRemote.transact(Stub.TRANSACTION_sendBillingRequest, _data, _reply, 0);
            _reply.readException();
            if ((0!=_reply.readInt())) 
            {
                _result = android.os.Bundle.CREATOR.createFromParcel(_reply);
            } else {
                _result = null;
            }
        }
        finally {
            _reply.recycle();
            _data.recycle();
        }
        return _result;
    }
}

static final int TRANSACTION_sendBillingRequest = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);
} 
```

我不知道这些错误是什么。
我刚刚得到这个库，并将它放在我的 Eclipse 项目中。
错误出现在 InAppBillingService 中，我无法访问它，因为它是自动生成的！！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T08:42:35.413

在生成的 IInAppBillingService.java 中出现了很多错误。我尝试了很多很多建议的解决方案，但都没有成功。最后，Zedifire 方法的一个变体适用于我的 Eclipse SDK。（这些步骤来自记忆 - 试一试，直到它起作用！）

关闭 >Project>Build 自动删除 /gen 文件然后转到 >Window>Preferences>Java>Compiler 并发现不知何故合规级别默认为 1.5 将合规更改回级别 1.7

> 项目>清理项目>构建所有（仍然错误！）右键单击项目窗口>android工具>修复项目属性

# mysql - MySQL MATCH AGAINST 不工作

> ID：14775119
> 
> 赞同：7
> 
> 时间：2013-02-08T14:48:57.157
> 
> 标签：mysql, pattern-matching, match

我实际上正在一个网站上工作，其中有两个几乎相同的表格，其中 MATCH AGAINST 可以在一个上工作，但不能在另一个上工作。为了找出为什么我试图将其简化为一个简单的“让我们做一个简单的表格工作”——但事实并非如此。

我正在使用 phpMyAdmin 进行测试，这是 MySQL 5.1.41。

我构建的测试使用以下内容来定义表......

```
CREATE TABLE IF NOT EXISTS `test` (
  `id` int(11) NOT NULL,
  `title` text NOT NULL,
  `body` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

ALTER TABLE `test` ADD FULLTEXT (`title`, `body`); 
```

当我进行 SHOW INDEX FROM 测试时，我看到有一个包含标题和正文的 FULLTEXT 键。

我插入几行

```
INSERT INTO `test` (`id`, `title`, `body`) VALUES 
('1', 'Lorem Ipsum', 'Lorem ipsum dolor sit amet, consectetur ... lacus porta euismod.'), 
('2', 'Lorem Ipsum (cont)', 'Nunc leo massa, vulputate ... euismod fringilla.'); 
```

（为简洁起见，删除了一些正文内容）

然后当我跑

```
SELECT * FROM `test` WHERE MATCH (`title`, `body`) AGAINST ('consectetur'); 
```

我得到一个空的结果集 - 没有找到行，但如果我运行

```
SELECT * FROM `test` WHERE `body` LIKE '%consectetur%'; 
```

然后找到一条记录。

虽然我对 MySQL 有很多经验，但这是我第一次使用 MATCH，所以我在做一些愚蠢的事情吗？为什么这不起作用？是否需要构建索引（我已经在表上进行了修复）或者这一切都应该自动发生？

仅供参考，工作表定义为

```
CREATE TABLE IF NOT EXISTS `web_pages1` (
  `id` int(11) NOT NULL,
  `title` varchar(255) DEFAULT NULL,
  `slug` varchar(255) DEFAULT NULL,
  `meta_keywords` text,
  `meta_description` text,
  `snippet` text,
  `body` mediumtext,
  `created_by` int(11) DEFAULT NULL,
  `date_created` datetime DEFAULT NULL,
  `date_published` date DEFAULT NULL,
  `author` varchar(255) DEFAULT NULL,
  `edited_by` int(11) DEFAULT NULL,
  `date_edited` datetime DEFAULT NULL,
  `status` tinyint(4) NOT NULL DEFAULT '1',
  `parent_id` tinyint(11) DEFAULT NULL,
  `menu_id` int(11) DEFAULT NULL,
  `short_name` varchar(255) DEFAULT NULL,
  `sort_order` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  FULLTEXT KEY `search` (`title`,`slug`,`meta_keywords`,`meta_description`,`snippet`,`body`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

导致我出现问题并让我走这条路的那个是

```
CREATE TABLE IF NOT EXISTS `web_news1` (
  `id` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `slug` varchar(255) NOT NULL,
  `meta_keywords` text,
  `meta_description` text,
  `snippet` text NOT NULL,
  `body` text NOT NULL,
  `created_by` int(11) NOT NULL,
  `date_created` datetime NOT NULL,
  `date_published` date DEFAULT NULL,
  `author` varchar(255) DEFAULT NULL,
  `edited_by` int(11) DEFAULT NULL,
  `date_edited` datetime DEFAULT NULL,
  `status` tinyint(4) DEFAULT '0',
  PRIMARY KEY (`id`),
  FULLTEXT KEY `search` (`title`,`slug`,`meta_keywords`,`meta_description`,`snippet`,`body`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

尽管我已经尝试将第二个定义为与第一个完全相同，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T15:00:32.880

你需要`IN BOOLEAN MODE`在最后添加

```
SELECT * FROM `test` WHERE MATCH (title, body) AGAINST ('Ipsum' IN BOOLEAN MODE); 
```

请看这里：

[http://www.sqlfiddle.com/#!2/1b80b/2](http://www.sqlfiddle.com/#!2/1b80b/2)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T14:54:31.403

从[手册](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)：

> 搜索结果为空，因为“whatever”一词出现在至少 50% 的行中。因此，它被有效地视为停用词。对于大型数据集，这是最理想的行为：自然语言查询不应从 1GB 表中每隔一行返回一次。对于小型数据集，它可能不太理想。

你的表中有两行......

# z3 - Z3：将 Z3py 表达式从 Solver 对象转换为 SMT-LIB2

> ID：14775122
> 
> 赞同：3
> 
> 时间：2013-02-08T14:49:02.430
> 
> 标签：z3

这个问题非常类似于：[Z3: convert Z3py expression to SMT-LIB2?](https://stackoverflow.com/questions/14628279/z3-convert-z3py-expression-to-smt-lib2)

是否可以从 Solver 对象生成 SMT-LIB2 输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:53:22.847

该类`Solver`具有称为 的方法`assertions()`。它返回所有断言到给定求解器中的公式。提取断言后，我们可以使用上一个问题中使用的相同方法。这是一个快速而肮脏的修改

```
def toSMT2Benchmark(f, status="unknown", name="benchmark", logic=""):
  v = (Ast * 0)()
  if isinstance(f, Solver):
    a = f.assertions()
    if len(a) == 0:
      f = BoolVal(True)
    else:
      f = And(*a)
  return Z3_benchmark_to_smtlib_string(f.ctx_ref(), name, logic, status, "", 0, v, f.as_ast()) 
```

这是一个示例（[也可以在此处在线获得](http://rise4fun.com/Z3Py/6TkW)）

```
s = Solver()
print toSMT2Benchmark(s, logic="QF_LIA")
a, b = Ints('a b')
s.add(a > 1)
s.add(Or(a < 1, b < 2))
print toSMT2Benchmark(s, logic="QF_LIA") 
```

**编辑**我们可以使用以下脚本以 SMTLIB 1.x 格式显示输出（也可[在此处](http://rise4fun.com/Z3Py/aY5X)在线获得）。请注意，SMTLIB 1.x 非常有限，并且不支持一些功能。我们还强烈鼓励所有用户迁移到 SMTLIB 2.x。

```
def toSMTBenchmark(f, status="unknown", name="benchmark", logic=""):
  v = (Ast * 0)()
  if isinstance(f, Solver):
    a = f.assertions()
    if len(a) == 0:
      f = BoolVal(True)
    else:
      f = And(*a)
  Z3_set_ast_print_mode(f.ctx_ref(), Z3_PRINT_SMTLIB_COMPLIANT)  # Set SMTLIB 1.x pretty print mode  
  r = Z3_benchmark_to_smtlib_string(f.ctx_ref(), name, logic, status, "", 0, v, f.as_ast())
  Z3_set_ast_print_mode(f.ctx_ref(), Z3_PRINT_SMTLIB2_COMPLIANT) # Restore SMTLIB 2.x pretty print mode
  return r

s = Solver()
print toSMTBenchmark(s, logic="QF_LIA")
a, b = Ints('a b')
s.add(a > 1)
s.add(Or(a < 1, b < 2))
print toSMTBenchmark(s, logic="QF_LIA") 
```

**结束编辑**

# excel - Excel 2003：尝试锁定/隐藏可以具有不同密码的单个工作表

> ID：14775125
> 
> 赞同：0
> 
> 时间：2013-02-08T14:49:15.097
> 
> 标签：excel, spreadsheet, password-protection, excel-2003, vba

我正在使用 Excel 2003。

我有一本工作簿，里面有大约 20 张纸。1\. 我希望工作簿始终在前 2 张隐藏或锁定的情况下打开。2\. 我希望管理员能够在提示输入密码以取消隐藏时取消隐藏这些工作表。每张纸都需要不同的密码。3.管理员编辑保存后传给普通用户。当普通用户打开文件时，这两张表应该再次隐藏，就像在步骤 1 中一样。

下面的代码似乎几乎可以满足我的要求，但它只会最小化和最大化工作表。我不想弄乱窗口，而是希望密码在工作表上弹出一个锁，这样它就永远不可见：

```
Private Sub Worksheet_Activate()
ActiveWindow.WindowState = xlMinimized
If InputBox("Enter Password for this sheet") <> "ABC" Then Sheets("Cust. Pricing").Activate
ActiveWindow.WindowState = xlMaximized
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:54:27.927

使用这些片段来分别隐藏和显示：

```
Sheets("Cust. Pricing").Visible = xlSheetHidden
Sheets("Cust. Pricing").Visible = xlSheetVisible 
```

# ruby-on-rails-3 - Rails 3.2 has_many：通过如何仅获取连接模型中相关的模型

> ID：14775126
> 
> 赞同：0
> 
> 时间：2013-02-08T14:49:17.363
> 
> 标签：ruby-on-rails-3, has-many-through

当然，这是一个简单的问题，但我不能抱怨

```
class Service < ActiveRecord::Base
   has_many :offers
   has_many :offices,:through=> :offers
   has_many :addresses,:through => :offices
   has_many :locations,:through => :adreesses,:include => :offices
end

class Offer < ActiveRecord::Base
   belongs_to :service
   belongs_to :office
end

class Office < ActiveRecord::Base
   has_many :offers
   has_many :services,:through => :offers
   has_one :adreess
end

class Address
   belongs_to :office
   belongs_to :location
end

class Location < ActiveRecord::Base
   has_many :addressess
   has_many :offices,:through => :addresses,:uniq=>true
end 
```

我想显示，例如：

```
Service name: Entrega especial

  Location name: Distrito Capital
     Offices:
         Name: San Martin

  Location name: Carabobo
     Offices:
         Name: San diego 
```

但是当我这样做时

```
service = Service.where(:nombre=> "Entrega especial")
locations = service.locations

locations.offices.each do |o|
   puts o.nombre # only I want the offices with that service
in that Location, no all offices in that location
end 
```

我无法意识到如何只显示关系中的办公室，而不是该位置中的所有办公室，即使没有该服务提供，以一种不合时宜的方式，不使用关联扩展，并管理 proxy_xxx 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:59:07.067

也许最好通过办公室协会

```
@offices = service.offices.includes(:location)

@offices.group_by(&:location).each do |location, offices_by_location|
  puts "Location: #{location}"
  offices_by_location.each do |office|
    puts "Office: #{office}"
  end
end 
```

# macos - 无法以 postgres 用户身份连接到 postgresql

> ID：14775129
> 
> 赞同：0
> 
> 时间：2013-02-08T14:49:25.427
> 
> 标签：macos, postgresql, database-connection

我正在使用 Mac OS X 10.5.8。我安装了 PostgreSQL 9.1（使用 mac dmg 驱动程序）以使用 python（使用 sqlalchemy 和 psycopg2）构建数据库。

当我第一次尝试通过 sqlalchemy 连接到 PostgreSQL 时，我找不到允许我创建引擎并连接的用户名：密码组合。我尝试使用 postgres 以超级用户身份登录（据说不需要密码），但这不起作用。如果我尝试使用 SQL shell 连接（即使我选择 postgres 作为用户，它也需要我输入密码）或在命令行上使用 su postgres 连接，我会遇到同样的问题。

在谷歌上搜索类似的问题，似乎这与 pg_hba.conf 文件有关，但我找不到它。有人指出，在 mac 上它应该在 Library/PostgreSQL/9.1/data 文件夹中，但我无权访问此文件夹。在命令行中键入 locate pg_hba.conf 不会返回任何内容。如果我理解正确（我确信我没有，因为我以前从未使用过数据库服务器，而且我不是 UNIX 专家），服务器不会将我识别为管理员或超级用户。

关于初始化 PostgreSQL 有什么我不知道的非常明显的事情吗（我在文档中搜索了“入门”和安装后配置，但没有找到任何明显与此问题相关的内容）？这可能是安装 PostgreSQL 的问题吗？我可能需要在我的环境中改变一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:56:29.950

您需要切换到系统帐户 postgres。通常这是使用`su - postgres`. 如果这不起作用 - 我无能为力，因为它看起来像操作系统级别的问题。

当您使用 postgres 系统帐户时，您可以编辑 pg_hba.conf，通常，您无需密码，只需使用 plain 即可连接到 pg `psql`。

在某些系统上`su`，人们不使用 ，而是使用`sudo`，在这种情况下，您可以尝试`sudo su - postgres`。

# android - 如何使用由按钮而不是键盘组成的自定义布局创建 Android 软键盘（ ） 元素

> ID：14775140
> 
> 赞同：3
> 
> 时间：2013-02-08T14:50:06.970
> 
> 标签：android, android-softkeyboard, android-custom-view

我想`Custom Keyboard`在 Android 中创建一个。我想用作系统键盘。我已经看过许多关于如何使用 android 键盘元素创建自定义键盘来构建 UI 部分的示例项目和教程，即：

```
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android">
   <Row>
      <Key/>
   </Row>
</Keyboard> 
```

但是，我想构建一个`Custom View/UI`使用`Buttons`而不是“键盘、行和键”元素等。然后捕获按钮的`onTouch`输入事件。

任何有用的建议将不胜感激！

谢谢。

# git - git fetch 后跟 git pull 让我领先于 origin/master

> ID：14775146
> 
> 赞同：0
> 
> 时间：2013-02-08T14:50:28.200
> 
> 标签：git, repository, fetch

我做了一个`git fetch origin master`然后`git pull origin master`在这两个命令之后当我做一个`git status`我得到：

```
$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 5 commits.
#
nothing to commit, working directory clean 
```

发现这个奇怪（因为我现在我的本地落后了`origin/master`）我再次将存储库克隆到其他位置并正确获取它，所以远程 repo 是可以的。首先执行`git fetch`命令我用在线存储库更新了我的本地源/主库，对吗？比`git pull`应该再次获取然后合并但我想它没有，不知道为什么。谁能解释一下？

谢谢！

**[编辑]**
我更加困惑。现在我正在使用我的原始机器并且刚刚完成了`git pull origin master`. 令我惊讶的是，同样的事情又发生了。我使用了`git reflog --all`建议，而我在另一台机器上所做的一次提交没有显示。这个提交看起来好像我已经在这台机器上提交了（所以`ahead of ...`再次显示消息）。Down 跟随刚刚发生的事情，从终端窗口复制/粘贴（只是省略了一些个人信息）。

```
user@user:~/my_project$ git pull origin master
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From my_git_site:my_repo
 * branch            master     -> FETCH_HEAD
Updating some_bizarre_number
Fast-forward
 main.py |   18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)
user@user:~/my_project$ git status
# On branch master
# Your branch is ahead of 'origin/master' by 1 commit.
#
nothing to commit (working directory clean) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:55:37.310

该消息意味着您的本地 master 中有五个提交尚未推送到 origin/master。拉取会将您的提交与来自 origin/master 的新提交合并，并在本地提交结果，显然没有冲突，或者它会要求您解决它们。

如果您查看本地修订历史记录，您将看到您的提交和远程提交以及将它们合并在一起并且是您当前的 HEAD 的新提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T19:03:12.590

试试 git reflog --all 看看你最近的 5 次提交是什么。也许这会澄清这些提交的来源。

# scala - 如何将可选的闭包参数传 递给函数？

> ID：14775149
> 
> 赞同：7
> 
> 时间：2013-02-08T14:50:35.150
> 
> 标签：scala

我想将一个闭包作为选项传递给一个方法，我正在做如下所示的事情。我收到如下所示的编译错误。是否可以将可选的闭包参数传​​递给函数？

```
def sampleMethod(a: String, b: String, optionalMethod: Option[(String, Int) => Unit]) {
    // do some processing with a and b
    optionalMethod match {
      case Some(optionalMethod) => {
        optionalMethod("a",3)
      }
      case _
      log("no optional method passed")
    }
}

// definition of optMethod in some other place
val optMethod = (c: String, d: Int) => {
  // some processing with c, d and external values 
}

// invoke
sampleMethod("hi", "bye", optMethod) => FAILS TO COMPILE

ERROR = type mismatch. expecting Option[(String, Int) => Unit] found (String, Int) => Unit 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T15:16:50.837

错误消息非常明确：`sampleMethod`需要一个`Option`，但您传递的是一个直接的函数值（未包含在 中`Some`）。

解决这个问题的最简单方法是包装`optMethod`成`Some`：

```
sampleMethod("hi", "bye", Some(optMethod)) 
```

但是，如果您希望能够简单地做`sampleMethod("hi", "bye", optMethod)`，您可以添加以下重载定义`sampleMethod`：

```
object Test {
  def sampleMethod(a: String, b: String, optionalMethod: Option[(String, Int) => Unit]) {
    // do some processing with a and b
    optionalMethod match {
      case Some(optionalMethod) => {
        optionalMethod("a",3)
      }
      case _ => log("no optional method passed")
    }
  }
  def sampleMethod(a: String, b: String) { sampleMethod(a, b, None) }
  def sampleMethod(a: String, b: String, optionalMethod: (String, Int) => Unit) {
    sampleMethod(a, b, Some(optionalMethod)) 
  }
}

val optMethod = (c: String, d: Int) => {
  // some processing with c, d and external values 
}

// invoke
Test.sampleMethod("hi", "bye", optMethod) // Now Compiles fine
Test.sampleMethod("hi", "bye") // This too 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T15:01:54.697

如前所述，您的方法需要一个`Option`包含`optionalMethod`. 因此，您必须将`Option`值传递给它：

```
// invoke with method
sampleMethod("hi", "bye", Some(optMethod))
// invoke without method
sampleMethod("hi", "bye", None) 
```

如果您想避免该`Option`值（尤其是避免`None`），您可以尝试以下操作：

```
def sampleMethod(a: String, b: String, optionalMethod: (String, Int) => Unit = (_, _) => log("no optional method passed")) {
  optionalMethod("a", 3)
}

// invoke with method
sampleMethod("hi", "bye", optMethod)
// invoke without method
sampleMethod("hi", "bye") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T14:52:27.267

怎么样

```
sampleMethod("hi", "bye", Some(optMethod)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:07:44.283

更清晰 ：

```
scala> def sampleMethod(a: String, b: String, optionalMethod: Option[(String, Int) => Unit]) {
     | optionalMethod.map(f => f("a", 3))
     | }
sampleMethod: (a: String, b: String, optionalMethod: Option[(String, Int) => Unit])Unit

scala> sampleMethod("A", "A", Some((c:String, d:Int) => println(s"Hello wolrd $c...$d")))
Hello wolrd a...3 
```

您必须在您的可选函数周围添加“Some()”

# java - 使用 ZK 删除所有选定的表格行

> ID：14775151
> 
> 赞同：0
> 
> 时间：2013-02-08T14:50:38.353
> 
> 标签：java, zk

我有一个 ZK 网格，在其中我在每一行上生成随机数。每行由一个复选框和数字本身组成。

我想要一个按钮来删除所有选中复选框的行。这是“删除”按钮的事件处理程序：

```
deleteButton.addEventListener(Events.ON_CLICK,
            new EventListener() {

        public void onEvent(Event evt) {
                Iterator<Component> selected = randomTable.queryAll("row checkbox").iterator();
                System.out.println("Deleted: ");
                while (selected.hasNext()) {
                    Checkbox c = (Checkbox) selected.next();
                    if (c.isChecked()) {
                        System.out.print(c.getId()); 
                        System.out.println(" from row " + c.getParent().getId());
                        c.getParent().detach(); // detach the checked row
                    }
                }
            }
        }); 
```

但它只删除第一个选中的行，即使它找到了所有其他选中的行。

我还是 ZK 的新手。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:27:04.207

我想出了一个解决方法。事实证明，如果我使用中间列表来存储我要删除的行，则`detach()`适用于所有行。

无论如何，请随时分享有关为什么它首先不起作用的任何提示。+1 任何贡献。

这是更新的代码：

```
deleteButton.addEventListener(Events.ON_CLICK,
            new EventListener() {
        public void onEvent(Event evt) {
            List<Component> toRemove = new Vector<Component>();
            Iterator<Component> selected = randomTable.queryAll("row checkbox").iterator();
            System.out.println("Deleted: ");
            while (selected.hasNext()) {
                Checkbox c = (Checkbox) selected.next();
                if (c.isChecked()) {
                    System.out.print(c.getId()); 
                    System.out.println(" from row " + c.getParent().getId());
                    toRemove.add(c.getParent());
                }
            }
            for (Component c : toRemove)
                c.detach();
        }

    }); 
```

# jsf - JSF 渲染多个组合条件

> ID：14775153
> 
> 赞同：38
> 
> 时间：2013-02-08T14:50:39.263
> 
> 标签：jsf, rendered-attribute

我需要给出类似的条件

```
 if((a == 12 and b == 13) or(a == 12 and b == 15)) 
```

在 JSF 渲染属性中。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-02-08T14:59:29.827

假设“a”和“b”是bean属性

```
rendered="#{bean.a==12 and (bean.b==13 or bean.b==15)}" 
```

您可以查看[JSF EL 运算符](http://docs.oracle.com/javaee/6/tutorial/doc/bnaik.html)

# css - 谁能告诉我缩略图之间的 4xp 差距来自哪里？

> ID：14775159
> 
> 赞同：1
> 
> 时间：2013-02-08T14:50:50.547
> 
> 标签：css, thumbnails, space

我是 CSS 新手，想知道您能否给我一点帮助。我一直在学习一些教程，并且正在玩一些弹出图像。

我一生都无法弄清楚缩略图之间的 4px 间隙来自哪里。

我想在彩色方块之间留出 12px 的边距来隔开我的小画廊，但是当我添加自己的边距时，它的移动非常奇怪。我只是以错误的方式做事吗？

我所有的代码都在这里[http://jsfiddle.net/p45JH/5/](http://jsfiddle.net/p45JH/5/)

这是我使用的 CSS 代码：-

```
.thumbnail {
    position: relative;
    z-index: 0;
}
.thumbnail:hover {
    background-color: transparent;
    z-index: 50;
}
.thumbnail span {

    position: absolute;
    background-color: white;
    font-family:Arial, Helvetica, sans-serif;
    text-align:center;
    padding: 5px;
    left: -1000px;
    border: 1px solid #CCC;
    visibility: hidden;
    color: black;
    text-decoration: none;
}
.thumbnail span img {

    border-width: 0;
    padding: 2px;
    vertical-align:bottom;
}
.thumbnail:hover span {

    visibility: visible;
    bottom: 35px;
    left: 35px;

} 
```

我敢肯定这真的很简单，只是我有限的知识阻止了我弄清楚。

谢谢你的尽心帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:36:34.290

尝试使用 div 而不是链接，看看我是否删除了 Html 代码中链接之间的空格：http: [//jsfiddle.net/soyuka/p45JH/6/](http://jsfiddle.net/soyuka/p45JH/6/)

**没有空格：（没有填充/边距）**

```
<a href=""> </a><a href=""> </a> 
```

**空格：（做一个正常的间隙）**

```
<a href=""> </a>
<a href=""> </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:10:28.340

是空格。内联（和内联-*）元素之间的空格被尊重。您可以将它们注释掉：

```
<a class="thumbnail">...</a><!--
--><a class="thumbnail">...</a> 
```

或使用此处找到的其他技术之一：http: [//css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

# xml - 如何为名称将在运行时更改的元素创建模式

> ID：14775160
> 
> 赞同：0
> 
> 时间：2013-02-08T14:50:51.233
> 
> 标签：xml, xsd

我必须为以下创建架构

```
 <Root>
      <users>
        <user1>
           <element1/>
           <element2/>
        </user1>
        <user2>
           <element1/>
           <element2/>
       </user2>
     </users> 
    </Root> 
```

元素 user 和 user1 是动态的，xml 中可以有 n 个用户，其他元素保持不变。

有人可以帮我为此创建架构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:01:21.603

使`users`元素包含任意数量的`user`元素。不要试图通过给每个用户元素一个不同的名称来使它们独一无二。就像在您最喜欢的编程语言中一样，您将 500 个整数的集合存储在一个整数数组中，而不是存储在名为 int001、int002、int003、... int500 的 500 个整数变量中。

使用技术，而不是反对它。

# iphone - UITableView 将单元 格相互叠加

> ID：14775162
> 
> 赞同：4
> 
> 时间：2013-02-08T14:51:00.220
> 
> 标签：iphone, objective-c, uitableview

我认为我的桌子很好，直到我将背景更改为有点透明，这显示了新出列单元格下方的先前单元格。这是我`tableView:cellForRowAtIndexPath:`方法中的代码。我取出了多余的标签设置，它们都与`timeLabel`.

```
static NSString* cellIdentifer = @"Cell";

UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier: cellIdentifer];

if (!cell)
{
    cell= [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleSubtitle reuseIdentifier: cellIdentifer];
}

int offset = 5;
int rowHeight = 120;
UIView* cellView = [[UIView alloc] initWithFrame: CGRectMake(offset, offset, 320 - offset * 2, rowHeight - offset * 2)];

cellView.backgroundColor = indexPath.row % 2 == 0 ? [UIColor colorWithWhite: 1.0 alpha: .8 ] : [UIColor colorWithWhite: .3 alpha: .8];

int padding = 5;

int x1 = 5;
int x2 = CGRectGetWidth(cellView.frame) / 3;
int x3 = x2 * 2;

int y1 = 5;
int y2 = CGRectGetHeight(cellView.frame) / 2 + padding;

int width = CGRectGetWidth(cellView.frame) / 3 - padding;
int sHeight = CGRectGetHeight(cellView.frame) / 2 - padding;
int bHeight = CGRectGetHeight(cellView.frame) - padding;

CGRect cell1 = CGRectMake(x1, y1, width, sHeight);

int row = indexPath.row;// - 1;

UILabel* timeLabel = [[UILabel alloc] initWithFrame: cell1];
timeLabel.backgroundColor = [UIColor clearColor];
timeLabel.text = [[self.tableData objectAtIndex: row] objectForKey: @"time"];
[cellView addSubview: timeLabel];

[cell.contentView addSubview: cellView]; 
```

![这是正在发生的事情的屏幕截图](../Images/67ccc7f779abb4696b4fa2a382b8d5b0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:19:36.540

您正在创建新单元格`UIView`，`UILabel`即使重复使用该单元格，结果也会在新单元格下方显示旧单元格。

这样做

```
UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier: cellIdentifer];

if (!cell)
{
    cell= [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleSubtitle reuseIdentifier: cellIdentifer];

    int offset = 5;
    int rowHeight = 120;
    UIView* cellView = [[UIView alloc] initWithFrame: CGRectMake(offset, offset, 320 - offset * 2, rowHeight - offset * 2)];
    cellView.tag = 200;
    cellView.backgroundColor = indexPath.row % 2 == 0 ? [UIColor colorWithWhite: 1.0 alpha: .8 ] : [UIColor colorWithWhite: .3 alpha: .8];

    int padding = 5;

    int x1 = 5;
    int x2 = CGRectGetWidth(cellView.frame) / 3;
    int x3 = x2 * 2;

    int y1 = 5;
    int y2 = CGRectGetHeight(cellView.frame) / 2 + padding;

    int width = CGRectGetWidth(cellView.frame) / 3 - padding;
    int sHeight = CGRectGetHeight(cellView.frame) / 2 - padding;
    int bHeight = CGRectGetHeight(cellView.frame) - padding;

    CGRect cell1 = CGRectMake(x1, y1, width, sHeight);

    int row = indexPath.row;// - 1;
    UILabel* timeLabel = [[UILabel alloc] initWithFrame: cell1];
    timeLabel.backgroundColor = [UIColor clearColor];
    timeLabel.tag = 300;
    [cellView addSubview: timeLabel];
    [cell.contentView addSubview: cellView];
}

UIView *view = [cell.contentView viewWithTag:200];
UILabel *timeLabel = (UILabel*)[view viewWithTag:300];
timeLabel.text = [[self.tableData objectAtIndex: row] objectForKey: @"time"]; 
```

我建议你创建一个[自定义，而不是让这个凌乱的东西`UITableViewCell`](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:37:28.107

主要问题是 cell=`[[UITableViewCell alloc] initWithStyle: UITableViewCellStyleSubtitle reuseIdentifier: cellIdentifer];`方法，所以如果您不想更改任何内容，请使用这样的方法`UITableViewCell *cell= [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleSubtitle reuseIdentifier: nil];`

这不是更好的方法，但您可以使用它。因为在这种情况下，您的单元格将不会被重复使用。一种更好的解决方案是根据您的选择制作自定义单元并使用它。

# asp.net-mvc - 当前上下文中不存在名称“Url”

> ID：14775165
> 
> 赞同：3
> 
> 时间：2013-02-08T14:51:05.233
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我创建了 MVC 4 项目，并在以下字符串上收到此错误：

```
<span>@Url.RouteUrl(route)</span> 
```

我的 Web.config 部分：

```
<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages" />
  </namespaces>
</pages> 
```

我应该怎么做才能解决这个问题？

注意。同时，我可以毫无问题地使用@Html helper。

视图\中的 Web.config：

```
<configuration>
<configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
        <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
</configSections>

<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
        <namespaces>
            <add namespace="System.Web.Mvc" />
            <add namespace="System.Web.Mvc.Ajax" />
            <add namespace="System.Web.Mvc.Html" />
            <add namespace="System.Web.Optimization"/>
            <add namespace="System.Web.Routing" />
            <add namespace="Teomaki.Services.Areas.Feedback.Helpers"/>
        </namespaces>
    </pages>
</system.web.webPages.razor>

<appSettings>
    <add key="webpages:Enabled" value="false" />
</appSettings>

<system.web>
    <httpHandlers>
        <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>

    <!--
    Enabling request validation in view pages would cause validation to occur
    after the input has already been processed by the controller. By default
    MVC performs request validation before a controller processes the input.
    To change this behavior apply the ValidateInputAttribute to a
    controller or action.
-->
    <pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <controls>
            <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
        </controls>
    </pages>
</system.web>

<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
        <remove name="BlockViewHandler"/>
        <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
</system.webServer>
</configuration> 
```

# php - SQL INSERT 和 RETURNING 子句逻辑

> ID：14775167
> 
> 赞同：0
> 
> 时间：2013-02-08T14:51:06.677
> 
> 标签：php, sql, postgresql

我正在尝试将一些用户注册数据插入我的数据表中。

`u_id | name | username | password | email`

`$res = pg_query("INSERT INTO mfbusers (name, username, password, email) VALUES ('$name', '$username', '$password', '$email') RETURNING u_id");`

我真的不确定如何使用返回的 u_id 插入 u_id 列。我已经尝试过 Data Modifying CTE 方法，但只有当我有多个表和关系数据库时，这种逻辑才对我有意义。

关于如何将`u_id`值插入`u_id`列的任何建议？

所有其他变量都正确写入我的数据库。只是`u_id`注册时该列是空白的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:55:57.763

将您的 u_id 列更改为 SERIAL，值将自动分配

# ios - 什么时候应该为报亭应用推送新内容？

> ID：14775169
> 
> 赞同：1
> 
> 时间：2013-02-08T14:51:11.530
> 
> 标签：ios, apple-push-notifications, newsstand-kit

我读到我们只能[每 24 小时](http://developer.apple.com/library/ios/#technotes/tn2280/_index.html)推送一次带有新内容通知的通知。

但是我们什么时候应该推动它呢？我想如果一个人只有 WiFi 设备，它可能在白天没有任何互联网连接，或者电池电量不足。

我是否应该将其安排在设备可能需要充电且有互联网连接的时间？比如凌晨三点？那么我应该为每个时区安排它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:10:15.050

我阅读它的方式 - 这是 iOS 仅每 24 小时启动一次下载的问题，而不是推送的问题。

如果您创建推送通知，它将在设备连接时发送到设备，因此无需在设备连接时尝试定时推送

# html - 显示无 不适用于过渡

> ID：14775173
> 
> 赞同：1
> 
> 时间：2013-02-08T14:51:20.063
> 
> 标签：html, css, media-queries, css-transitions

我已经使用媒体查询来隐藏 iphone 图像并显示桌面图像.....但是他的 iphone 图像没有显示出来......你能告诉我原因吗

[http://jsfiddle.net/QYvrt/27/](http://jsfiddle.net/QYvrt/27/)

```
<div class="desktopContactImage" data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/inventoryControl.png">desktopImage</div>

                        <div class="iphoneContactImage" data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://intra.defie.co/images/cubes/demoImage.png">iphoneImage</div>

@media (max-width: 767px) {

#rightSlider{
    border: 1px solid red;
}

#rightSlider{
            display:none !important;
          }
#rightSlider{ 
            display:inherit !important;
          }

.desktopContactImage{

            display:none !important;
          }

.iphoneContactImage{
            display:inherit !important;
            border: 1px solid red;
          }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:55:42.317

需要研究一些可能有帮助的问题：

1.  您没有在 HTML 标记之前声明 doctype，例如

2.  尝试编写您的媒体查询标签，例如“@media screen and (max-width: 767px)”

3.  您有很多在 HTML 标记和 HEAD 标记之间浮动的脚本标记 - 它们应该位于 HEAd 标记内或 BODY 标记内。

那是您在那里进行的一些JavaScript。当要为真实用户使用时，我建议将其全部压缩和压缩。

# ruby-on-rails - 您如何在炼油厂 cms 中的自定义引擎上循环遍历字段

> ID：14775176
> 
> 赞同：5
> 
> 时间：2013-02-08T14:51:21.683
> 
> 标签：ruby-on-rails, refinerycms, refinery

我正在[炼油厂 cms中创建一个](http://refinerycms.com/)[自定义引擎](http://railscasts.com/episodes/333-extending-refinery-cms?view=asciicast)，并且我有一个名为“PDF”的字段，它是一个炼油厂[资源字段类型](http://refinerycms.com/guides/multiple-resources-in-an-extension)。

引擎中的某些条目将只有一个 pdf，而其他条目将有多个 pdf。有没有办法在不创建一堆我不需要的额外字段的情况下做到这一点？

我宁愿遍历一个 pdf 字段，而不是将额外的字段编码到我的引擎中 - pdf_1:resource、pdf_2:resource、pdf_3:resource、pdf_4:resource、pdf_5:resource 等。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:34:06.893

据我所知，没有内置的炼油厂工艺。`has_many`将是我解决问题的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:36:11.377

这是正确的方法吗？

为属于 my_custom_engine 的 pdf 创建一个新模型并使用 my_custom_engine has_many pdf。然后在管理视图上使用accepts_nested_attributes 和一些javascript 将照片添加到每个my_custom_engine 条目。差不多是这样的：

[http://railscasts.com/episodes/196-nested-model-form-revised?autoplay=true](http://railscasts.com/episodes/196-nested-model-form-revised?autoplay=true)

我想这是基本的 Rails 东西，但我想确保炼油厂没有办法做到这一点。

# ruby-on-rails - 判断是否加载了 Rails 环境

> ID：14775177
> 
> 赞同：0
> 
> 时间：2013-02-08T14:51:35.967
> 
> 标签：ruby-on-rails

如何确定 Rails 是否已加载完整环境？例如，特定于环境的配置已完全加载。

我的根本问题是我正在安装一个钩子来捕获特定于环境的配置中的某些异常，但我不想在配置仍在加载时捕获任何异常，以免掩盖任何配置问题。

我发现了一些不令人满意的方法来做到这一点，例如在配置完全加载之前（和之后）`Rails.application.config.middleware`将是一个实例，但必须有更直接的方法。`MiddlewareStackProxy``MiddlewareStack`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:13:48.693

以下是加载顺序，在我看来，您可能需要在“初始化程序完成”之后设置自己的环境变量，然后在您的代码中检查是否已设置。 [http://guides.rubyonrails.org/v2.3.11/configuring.html](http://guides.rubyonrails.org/v2.3.11/configuring.html)

```
Preinitializers
environment.rb
Environment-specific Configuration Files
Initializers (load_application_initializers)
After-Initializers 
```

由于您的所作所为，除了消化这部分文档（参见 1.14 左右），我别无他法：http: [//guides.rubyonrails.org/initialization.html#config-environment-rb](http://guides.rubyonrails.org/initialization.html#config-environment-rb)

# ios6 - UIT 不适用于相册

> ID：14775181
> 
> 赞同：0
> 
> 时间：2013-02-08T14:51:46.263
> 
> 标签：ios6

我已经注册了我的应用程序以打开所有文档类型，这工作得很好，但我无法让它处理图像，它没有出现在 PhotoAlbum 中，但我的应用程序出现在 safari 中，safari 可以向我发送打开请求以打开某些文件。

任何提示？

这是我的 plist 更改：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>PDF Document</string>
        <key>LSHandlerRank</key>
        <string>Default</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.content</string>
            <string>public.item</string>
            <string>public.data</string>
            <string>public.image</string>
        </array>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:23:00.337

您正在混淆 OSX 和 iOS 密钥。例如，`CFBundleTypeRole`是 iOS 中未使用的 OSX 密钥。

`CFBundleDocumentTypes`这是文档中对密钥的一个很好的描述：

> **CFBundleDocumentTypes**
> 
> `CFBundleDocumentTypes`(Array - iOS, OS X) 包含一组字典，这些字典将>一种或多种文档类型与您的应用程序相关联。每个字典称为类型定义字典，并包含用于定义文档类型的键。表 2 列出了这些字典中支持的键。有关指定应用程序支持的类型的更多信息，请参阅“在应用程序的属性列表中存储文档类型信息”。

您应该在`CFBundleDocumentTypes`数组中为每种文档类型提供一个条目。您目前只有一个名为 PDF 文档的条目。下面的数组`LSItemContentTypes`实际上是用于一种特定文档类型的各种“扩展”。从文档中阅读此描述：

> 该键包含一个字符串数组。每个字符串都包含一个定义受支持文件类型的 UTI。必须明确拼写 UTI 字符串，而不是使用 Launch Services 定义的常量之一。例如，为了支持 PNG 文件，您可以在数组中包含字符串“public.png”。使用此键时，还要添加带有相应条目的 NSExportableTypes 键。

总之，您应该在`CFBundleDocumentTypes`数组中插入一个新的图像类型定义字典。

[在此处](http://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107)阅读有关详细信息的所有信息。

# javascript - 如果有视频，是否需要调用 youtube api 来加载列表？

> ID：14775186
> 
> 赞同：0
> 
> 时间：2013-02-08T14:52:02.883
> 
> 标签：javascript, video, iframe, youtube-api

我想在我的网页上嵌入一个 youtube 视频列表。我看到了[谷歌文档](https://developers.google.com/youtube/iframe_api_reference)，但是否有必要加载 www.youtube.com/iframe_api" 并调用 onYouTubeIframeAPIReady()。有没有一种简单的方法可以直接在我的页面上声明 iframe（从那里 id）而不是“手动”调用api。如果是，这样做有什么好处？（知道我只需要停下来播放视频）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:01:07.270

您可以直接加载带有 iframe 标签的视频列表。您可以使用此站点轻松构建正确的代码：[youtube player demo](https://developers.google.com/youtube/youtube_player_demo)

如果您不需要其他 API 调用，这是一种简单的方法。唯一的问题是，如果他们改变了 youtube iframe 元素的编码方式，显然，使用他们的 API “抽象” iframe 层是防止此类问题的一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T20:58:33.827

您可以使用此处描述的机制加载播放列表：http: [//apiblog.youtube.com/2011/07/say-hello-to-new-playlist-player.html](http://apiblog.youtube.com/2011/07/say-hello-to-new-playlist-player.html)，还可以指定逗号分隔的视频 ID 列表也可以，请参阅此处定义的播放列表播放器参数：[https ://developers.google.com/youtube/player_parameters#playlist](https://developers.google.com/youtube/player_parameters#playlist)

# c# - 一键部署的 C# 设置

> ID：14775188
> 
> 赞同：2
> 
> 时间：2013-02-08T14:52:10.467
> 
> 标签：c#, deployment, publish, settings.settings

我的 C# 应用程序中有几个设置。一种是显示一个对话框（布尔设置称为 ShowUpdate）。默认情况下，我将此值设置为 true。用户可以在应用程序中将此设置更改为 false。每次发布应用程序的新版本时，我都希望将其值默认为 true。我该怎么做呢？

现在，如果用户在我发布应用程序的新版本时将其设置为 false，则该设置不会被覆盖为 true。

# css - 视口元标记真的有必要吗？

> ID：14775195
> 
> 赞同：53
> 
> 时间：2013-02-08T14:52:37.740
> 
> 标签：css, responsive-design, viewport

我创建了一些响应式站点，但对响应式站点开发还很陌生。在我的 CSS 中，我 99% 的值都是以 em 或百分比表示的。我正在使用媒体查询（最大宽度和最大设备宽度）来更改布局。我没有包含视口元标记，它可以在 iOS、我测试过的许多 Android 手机和平板电脑以及所有桌面浏览器上完美运行。

添加元标记会破坏我的网站。我是做错了什么，还是做对了一些事情，所以我不需要包含它？我很困惑为什么它似乎是最佳实践，因为它破坏了我的东西。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-08T15:11:38.537

在桌面操作系统上，浏览器视口是固定数量的像素宽，网页内容按原样呈现在其中。

从 iOS 上的 Safari（或者我们当时应该称之为 iOS 的任何东西）开始，移动浏览器视口一直是“虚拟的”。尽管视口在界面中可能只占用（例如）320 个物理像素的空间，但浏览器会创建一个更大的“虚拟”视口（我认为 iOS 上默认为 980 像素宽）并在其中呈现内容，然后缩小该虚拟视口，直到它适合设备屏幕上可用的实际物理像素。

视口元标记允许您告诉移动浏览器这个虚拟视口应该是什么大小。如果您实际上并未针对移动设备更改网站的设计，这通常很有用，并且它在更大或更小的虚拟视口中呈现得更好。（我相信 980 像素被选为默认值，因为它在 2007 年渲染了许多备受瞩目的网站方面做得很好；对于任何给定的网站，不同的值可能会更好。）

就个人而言，我总是使用`<meta name="viewport" content="width=device-width, initial-scale=1">`虚拟视口来匹配设备尺寸。（请注意，这[`initial-scale=1`似乎是使虚拟视口适应 iOS 上的横向模式所必需的](http://www.quirksmode.org/blog/archives/2013/10/more_about_scal.html)。）这使得移动浏览器的行为就像桌面浏览器一样，这是我习惯的。

如果没有视口元标记，您的网站将呈现到设备的默认虚拟视口中。我认为这*不一定*是个问题，尤其是如果您所说的所有单位都是 em 或百分比。但是，如果您需要在任何时候以像素为单位进行思考，这可能会有点令人困惑，尤其是因为不同的浏览器可能具有不同大小的默认虚拟视口。如果后续的维护者不理解这种方法，他们也可能会感到困惑。

我想您将基本字体大小设置得很大，以便清晰易读？您能否链接到您这样创建的网站之一，以便我们看一个示例？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-08T15:04:37.137

如果没有视口，您的设备将使用虚拟视口，默认情况下它实际上是您网站的缩小版本，在 iPhone 上约为 980 像素，在安卓上约为 800 像素。设置视口并禁用此缩小功能后，设备会按应有的方式处理网站，并根据设备和方向等以大约 480 像素或 320 像素的宽度进行测量。

下面的完整资源，我的建议是，每当您使用响应式和移动设备时，请始终首先设置视口。这是标准化设备缩放并确保您的网站使用实际设备宽度而不是任何虚拟宽度显示的最佳方式。

[http://www.javascriptkit.com/dhtmltutors/cssmediaqueries3.shtml](http://www.javascriptkit.com/dhtmltutors/cssmediaqueries3.shtml)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-11T20:02:02.773

**所以回答我自己的问题。这不是必要的。**

您可以使用最小和最大宽度媒体查询在特定断点处设置桌面版本的样式。

然后，您主要更新字体大小和其他专门针对平板电脑和手机的属性。就像我说的，这主要是增加字体大小以提高可读性。

**这种方法虽然有一个主要的可维护性问题。**

视口元标记允许您简单地使用从桌面到移动设备的最大和最小宽度。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-06-12T00:07:10.417

**您绝对应该使用视口标签**，因为它们能够让 Web 开发人员的生活变得无限简单。它们使您可以轻松控制任何屏幕的精确渲染尺寸和/或缩放级别（如果您愿意，甚至可以在[桌面上）。](https://stackoverflow.com/questions/37762579/get-meta-viewport-tag-to-work-on-desktop)这使得为​​任何设备建立网站变得轻而易举。但要知道，权力越大，责任越大。明智地使用此功能（并且不要禁用缩放）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-10-06T09:51:32.453

并非适用于所有设备，但适用于手机。移动浏览器在虚拟“窗口”中呈现页面，视口通常比屏幕宽，因此它们不需要将每个页面布局压缩到一个小窗口中（因此它破坏了一些非移动优化的网站和用户必须飞涨）。**Mobile Safari**引入了“视口元标记”，让 Web 开发人员可以控制视口的大小和比例。现在所有的移动浏览器都支持这个标签，即使它**不是任何网络标准的一部分**。典型的针对移动设备优化的网站应包含以下标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

width 属性控制视口的大小。屏幕宽度，以 CSS 像素为单位，比例为 100%，initial-scale 属性控制页面首次加载时的缩放级别。最大比例、最小比例和用户可缩放属性控制允许用户放大或缩小页面的方式。

[https://developer.apple.com/library/prerelease/ios/documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html#//apple_ref/doc/uid/TP40006509-SW19](https://developer.apple.com/library/prerelease/ios/documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html#//apple_ref/doc/uid/TP40006509-SW19)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-26T22:20:47.443

您仍然可以使用视口元标记来优化设备视图的分辨率并使用户能够缩放：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0
"> 
```

定义了最大比例后，您可以控制用户缩放它的方式。我认为我们应该启用此选项，因为即使使用响应式网站我希望缩放，它已经知道，它是如此直观以至于成为期望。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-25T19:53:01.363

是的，它是开发响应式网站的必要标签。但是，单独使用标签并不能帮助您这样做，但它们确实可以让您控制网页可见内容的大小，从而更容易开发响应式网站.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-18T21:42:52.577

对于有疑问的人来说，最简单的方法是在没有它的情况下进行测试。我这样做了，并迅速做出了决定——如果我必须只保留一个元标记，那就是它（在“描述”之上等等）。实际上，如果我必须在这一个和所有其他人之间做出选择，我会放弃一切。只是测试它！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-07T23:04:49.077

**是的，这是必需的。** 当人们开始在桌面浏览器上浏览时（1990 年代），每个人的屏幕分辨率都很低，比如 640×480 或 800×600。
但随后，在 2007 年，iPhone 发布了。它的屏幕分辨率为 320×480，低于当时大多数桌面屏幕。因此，请考虑以下 HTML 代码：

```
<!DOCTYPE html>
<html>
<img src="/reallylargeimg.jpeg" style="width:640; height:480;" />
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut enim ex, sagittis id erat nec, imperdiet posuere erat. Mauris pharetra neque quis venenatis sagittis.</p>
</html> 
```

然后，因为图片真的很大，网页比iPhone还大。此外，它使用静态宽度和高度。

所以他们缩小了页面。没有视口标签，它看起来真的很糟糕，就像上面一样。

苹果还发布了视口标签。在这里，您可以设置自定义设备宽度： `<meta name="viewport" content="width=200px" />`

这会将屏幕宽度设置为 200 像素。更广泛使用的解决方案是：

`<meta name="viewport" content="width=device-width" />`

它将宽度设置为屏幕宽度。

但我们也想控制规模。方法如下：添加“初始比例”属性。我们有这样的东西：
`<meta name="viewport" content="width=device-width,initial-scale=1.0" />`
没有这个标签，网站看起来很小，迫使用户放大。但有了这个标签，一切都解决了。

所以是的，meta viewport 标签应该在所有网站上使用，如果你想要一个好的用户体验，它是强制性的。您可能还需要使用媒体查询来更改不同屏幕宽度的 CSS，例如将菜单栏折叠成汉堡菜单。元视口标签不会为您执行此操作，但您应该这样做。

```
@media only screen and (max-width: 600px) {
  #hamburgermenu {
    display:block;
  }
  #menubar {
    display:none;
  }
}
@media only screen and (min-width: 600px) {
  #hamburgermenu {
    display:none;
  }
  #menubar {
    display:block;
  }
} 
```

所以完成的页面应该是这样的。这是一个粗略的网站示例，但它应该可以按预期工作：在 600 像素处显示菜单并在 600 像素以上显示菜单栏。

```
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.display === "block") {
      console.log('closed!');
      content.style.display = "none";
    } else {
      content.style.display = "block";
      console.log('opened!');
    }
  });
}
```

```
@media only screen and (max-width: 600px) {
  #hamburgermenu {
    display: block;
  }
  #menubar {
    display: none;
  }
}

#hamburgermenu {
  position: fixed;
  top: 0;
  width: 100%;
  background-color: aqua;
  border: 1px solid black;
}

@media only screen and (min-width: 600px) {
  #hamburgermenu {
    display: none;
  }
  #menubar {
    display: block;
  }
}

li {
  list-style: none;
  cursor:pointer;
}

li::before {
  content: "→  ";
  user-select: text;
  -o-user-select: text;
  -ms-user-select: text;
  -moz-user-select: text;
  -webkit-user-select: text;
}

::selection {
  background-color: #b3d4fc;
}
```

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
  <!--over here-->
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>demo</title>
</head>

<body>
  <div id="hamburgermenu">
    <button class="collapsible">Open Menu</button>
    <ul style="display:none;">
      <li onclick="console.log('option 1!'); alert('1');">Option 1</li>
      <li onclick="console.log('option 2!'); alert('2');">Option 2</li>
      <li onclick="console.log('option 3!'); alert('3');">Option 3</li>
    </ul>
  </div>
  <div id="menubar">
    <button onclick="console.log('option 1!'); alert('1');">Option 1</button>
    <button onclick="console.log('option 2!'); alert('2');">Option 2</button>
    <button onclick="console.log('option 3!'); alert('3');">Option 3</button>
  </div>
  <br>
  <p>Resize the window to see the media query effect.
  </p>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut enim ex, sagittis id erat nec, imperdiet posuere erat. Mauris pharetra neque quis venenatis sagittis.</p>
</body>

</html>
```

# php - 使列表按日期分隔

> ID：14775199
> 
> 赞同：0
> 
> 时间：2013-02-08T14:53:02.533
> 
> 标签：php, list, codeigniter

我想按实际日期示例 08/02 列出 x 事物的列表，然后在另一个列表中列出 07/02 的 x 事物，日期保存在 bd 这是我尝试做的一些代码..

```
 <h1 id="date-title"><?php echo $fecha1 ?></h1>
            <div id="news-block">
                <?php
                $nombre=null;
                foreach ($programas as $programa) {
            if($programa->ingreso==Date("Y-m-d")){
                    if ($programa->nombre!= $nombre) {
                        $nombre = $programa->nombre;
                        echo "<h3 id='news-title'>".$programa->nombre."</h3>";
                    }
                    echo "<ul id='news-content'>";
                    echo $programa->titulo;
                    echo " </ul>";
               }else
               {
                $fecha_menos24hs = date('m-d',time()-(24*60*60));
                 echo "<h1 id='date-title'>$fecha_menos24hs</h1>"; 
                if ($programa->nombre!= $nombre) {
                        $nombre = $programa->nombre;
                        echo "<h3 id='news-title'>".$programa->nombre."</h3>";
                    }
                    echo "<ul id='news-content'>";
                    echo $programa->titulo;
                    echo " </ul>";

               }
            }

            ?>
           </div> 
```

问题是在第二个日期它重复此代码“echo”$fecha_menos24hs“;”因为对于每个，可能你能推荐我一个更好的主意..我不知道两个 foreachs..

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:20:49.953

我最好的猜测是你正在寻找这个输出或类似的东西：

```
<h1 class="date_title">Date</h1>
<div class="news_block">
    <h3>News Title</h3>
    <ul class="news_content">
        <li>Article Content</li>
    </ul>
</div>
<div class="news_block">
    <h3>News Title #2</h3>
    <ul class="news_content">
        <li>Article Content</li>
    </ul>
</div>
<h1 class="date_title">Date #2</h1>
.... 
```

我能想到的最简单的方法是在控制器中重构 SQL 结果。

```
//Ordering by the date with newest first
$this->db->order_by('DATE_COLUMN', 'DESC');
$results = $this->db->get()->result_array();
$article_list = array(array());
foreach ($results as $key)
{
    $article_list[$key['DATE_COLUMN']][] = $key;
}
$this->data['articles'] = $article_list;
$this->load->view('DISPLAY', $this->data); 
```

然后我会在你的视图中使用几个循环来获得你的结果。

```
<?php foreach($articles as $key => $value): ?>
<h1 class="date-title">$key</h1>
    <?php foreach($value as $key2): ?>
<div class="news_block">
    <h3><?php echo $key2['title']; ?></h3>
    <ul class="news_content">
        <?php echo $key2['content']; ?>
    </ul>
</div>
    <?php endforeach; ?>
<?php endforeach; ?> 
```

# deployment - Clickonce 部署到多个环境

> ID：14775202
> 
> 赞同：18
> 
> 时间：2013-02-08T14:53:07.680
> 
> 标签：deployment, clickonce

我有一个 WPF 应用程序，我想通过 ClickOnce 部署给我们的用户。我们有四个环境，系统测试、用户测试、并行生产和生产。每个人都需要一个不同的配置文件，其中包含服务器名称和特定于环境的其他内容，因此它们不能都使用相同的代码库。大部分代码是相同的，但由于 .config 文件不同，最终的包会略有不同。

我发现我们在用户测试中安装了一个版本，比如版本 05，然后他们进行测试，然后当需要给他们下一个版本时，我们应该能够在用户测试中放置一个更新的包Web 服务器，然后他们可以通过单击部署 URL 来更新他们的版本。但是当他们这样做时，它会说“具有相同身份的应用程序已经存在”，我们必须通过控制面板卸载才能安装 06 版。这似乎是错误的，而不是点击一次。

你会建议我如何构建这个应用程序并将其部署到四个不同的环境中，以便在每个环境中我们都能够在服务器上放置一个新版本，并且用户在该环境中测试或使用它只会拉下更新和不需要卸载任何东西？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-06-17T07:29:05.687

自己一直在寻找解决方案一段时间后，让我感到震惊的是，我想出的最后一个实际上就像这样简单：

*   [Slow Cheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)用于根据选定的构建配置转换配置文件（例如调试/发布）
*   每个构建配置的属性组，在项目文件中具有特定的单击一次项目属性（例如 ProductName 和 AssemblyName（用于测试和生产版本的并行安装）、InstallUrl）。
*   执行 /target:publish 时通过 msbuild 指定其他属性（如 ApplicationVersion、MinimumRequiredVersion）

无需手动复制任何配置文件，因为慢 cheetah 会处理这个问题。将在相应的构建配置的输出文件夹（例如 bin/Debug 或任何您拥有的）中创建单击一次包。

最大的优点是构建与使用 Visual Studio 或使用 msbuild 的自动构建相同（除了几个完全可选的附加属性）。在构建中添加额外的环境所需要做的就是在项目文件中创建新的构建配置和相应的慢 cheetah 转换和属性组。

整个设置至少适用于 .NET 3.5（不能谈论早期版本）及更高版本。

也许这对任何人都有帮助。随时询问详情。

PS：属性组如下所示（将它们放在定义默认 ClickOnce 设置的第一个属性组之后）：

```
 <PropertyGroup Condition=" '$(Configuration)' == 'Demo' ">
    <AssemblyName>Com.MyApplication.Main.Demo</AssemblyName>
    <InstallUrl>http://demoserver/myapp/</InstallUrl>
    <ProductName>My Application %28Demo%29</ProductName>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Test' ">
    <AssemblyName>Com.MyApplication.Main.Test</AssemblyName>
    <InstallUrl>http://testserver/myapp/</InstallUrl>
    <ProductName>My Application %28Test%29</ProductName>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Prod' ">
    <AssemblyName>Com.MyApplication.Main</AssemblyName>
    <InstallUrl>http://prodserver/myapp/</InstallUrl>
    <ProductName>My Application</ProductName>
  </PropertyGroup> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T07:43:10.417

首先，您无法从两个不同的 URL 安装具有相同部署名称的应用程序，而无需先卸载一个。ClickOnce 使用它来确保安全，以确保不会有人试图劫持您的部署。

其次，要进行不同的构建，可以在项目下设置四个文件夹，每个文件夹一个名称。然后设置四个构建配置（称它们相同）。然后设置一个将文件复制到 \bin 文件夹的构建后命令。如果您设置文件夹名称以在其中包含构建配置，它将复制该配置中的任何一个。

```
COPY/Y "$(TargetDir)myfile_$(ConfigurationName)\*.*" "$(TargetDir)" 
```

第三，您必须将文件包含在项目本身中，以便将它们标记为包含在部署中，即使您在构建完成后用复制命令替换它们也是如此。并且这四个目录也必须包括在内，即使它们最终没有被使用。

# python - 在Python中匹配以特定扩展名结尾的文件名的简洁方法？

> ID：14775204
> 
> 赞同：2
> 
> 时间：2013-02-08T14:53:11.167
> 
> 标签：python, regex, filesystems, glob

处理检索目录中以特定扩展名结尾的所有文件的规范方法是什么，例如“所有以不区分大小写方式结尾`.ext`或不区分大小写的文件？” `.ext2`一种方法是使用`os.listdir`和`re`模块：

```
import re
files = os.listdir(mydir)
# match in case-insensitive way all files that end in '.ext' or '.ext2'
p = re.compile(".ext(2)?$", re.IGNORECASE)
matching_files = [os.path.join(mydir, f) for f in files if p.search(x) is not None] 
```

`glob`有没有一种更简洁的方法可以用or更简洁地做到这一点`fnmatch`？令人烦恼的`listdir`是，必须始终处理路径，方法是`os.path.join`将目录附加到它返回的每个文件的基本名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:00:43.733

怎么样：

```
>>> import glob
>>> glob.glob("testdir/*")
['testdir/a.txt', 'testdir/b.txt', 'testdir/d.ext', 'testdir/c.ExT2']
>>> [f for f in glob.glob("testdir/*") if f.lower().endswith((".ext", ".ext2"))]
['testdir/d.ext', 'testdir/c.ExT2'] 
```

# javascript - Bootstrap 模态页脚隐藏下拉菜单问题 2

> ID：14775205
> 
> 赞同：1
> 
> 时间：2013-02-08T14:53:12.187
> 
> 标签：javascript, css, twitter-bootstrap, overflow, z-index

我遇到了[这里](https://stackoverflow.com/questions/13768382/bootstrap-modal-footer-issue)发布的同样问题。引导时间选择器插件的下拉菜单隐藏在模态页脚下方。

参考中建议的解决方法不适合我的 exigencesm，因为我希望该`overflow-y`值保持不变`scroll`。

必须有一个替代解决方案，因为这 2 个插件以 2 种不同的方式工作：

![比较](../Images/1ae0a02394715b1d13487ff4efc92157.png)

显然设置`z-index`属性不起作用。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:13:02.977

确保您`position`在尝试控制的所有 div 上都设置了声明`z-index`。否则`z-index`不知道它需要按什么顺序保存哪些 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T19:36:30.227

您可能需要在 .modal-body 上设置“溢出-y：可见”，假设您已经按照引导程序的文档构建了 DOM

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:00:42.530

我怀疑这会对您有所帮助，但对于遇到此问题的未来用户：我实际上也发现了这个，结果证明这是一个溢出问题。事实证明，不可能指定“溢出：自动可见”。请参阅以下帖子以获得更深入的答案：[CSS溢出-x：可见；和溢出-y：隐藏；导致滚动条问题](https://stackoverflow.com/questions/6421966/css-overflow-x-visible-and-overflow-y-hidden-causes-scroll-bar/6433475#6433475)

# .net - .NET 的 Intuit 合作伙伴平台示例应用程序

> ID：14775206
> 
> 赞同：0
> 
> 时间：2013-02-08T14:53:16.537
> 
> 标签：.net, intuit-partner-platform

[我想从这里](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/Sample_Apps/.NET_Sample_App_for_AggCat_Services/0010_Creating_the_App)安装 .NET 的 Intuit 合作伙伴平台示例应用程序。我从这个网址完成了所有步骤。但我不知道在哪里可以找到 web.config 的 FileEncryptionKey。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:12:35.423

Triple DES 的密钥长度必须为 192 位。这是一个例子。

```
<add key="FileEncryptionKey" value="9aA2dD0fZ3Dab4126d7i5643"/> 
```

# cuda - 当内核代码在 PTX 文件中并且主机代码也生成 PTX 文件时，在 Cuda 中使用纹理

> ID：14775207
> 
> 赞同：0
> 
> 时间：2013-02-08T14:53:16.930
> 
> 标签：cuda, textures, gpu, ptx

我无法在 Windows 上使用 Cuda [4.2] 读取纹理。

我的程序读取一个包含所有内核模块的 ptx 文件。此外，编译过程会从一个简短的主机代码例程中生成一个额外的 ptx 文件。这是带有仅主机代码的 .cuh 文件和 .cu 文件：

```
/////////////// "textureDefs.cuh"   file ///////////////////////////////////////////
#ifndef _TEXTUREDEFS_CUH
#define _TEXTUREDEFS_CUH
texture < float, cudaTextureType2D, cudaReadModeElementType> texRefEachRes_1;
texture <float, cudaTextureType2D, cudaReadModeElementType> texRefEachResPrev;
///////////////////////////////////////////////////////////////////////////////
///       myBind.cu
/////////////////////////////////////////////////

#include "cuda.h"
#include "textureDefs.cuh"
extern cudaPitchedPtr gYAllFramesForEachRes[ME_NUM_RES], gPrevYForEachRes[ME_NUM_RES];
//
extern "C"  cudaError_t bindTextures(int resNum)
{
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc(32, 0, 0, 0, cudaChannelFormatKindFloat); // x is 32 bit float

    size_t offset;
    texRefEachResPrev.addressMode[0] = cudaAddressModeClamp;
    texRefEachResPrev.addressMode[1] = cudaAddressModeClamp;
    texRefEachResPrev.filterMode = cudaFilterModeLinear;
    texRefEachResPrev.normalized = false;
    cudaError_t err = cudaBindTexture2D(&offset, &texRefEachResPrev, 
            (unsigned char *)gPrevYForEachRes[resNum].ptr, &channelDesc, 
    gPrevYForEachRes[resNum].xsize, gPrevYForEachRes[resNum].ysize,   
           gPrevYForEachRes[resNum].pitch);  // jm bug 1/5
    return err;
} 
```

在我的内核代码中对 tex2d 的每次调用都返回值 0 但我已经检查过并且数组中有有效数据。

我想知道我是否还需要加载 myBind.ptx，如果需要，它是如何加载的，何时何地加载？还是不需要？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:19:35.570

在 CUDA 5.0 之前，对纹理的所有引用都必须来自同一个编译单元，否则您将处理碰巧具有相同名称但位于不同命名空间中的单独纹理。

您的选择是在编译之前将所有 .ptx 代码包含到单个文件中，或者升级到 CUDA 5.0。

# java - 从 JPanel 中删除组件时出现 StackOverFlowError

> ID：14775208
> 
> 赞同：-5
> 
> 时间：2013-02-08T14:53:22.303
> 
> 标签：java, swing, stack-overflow

我有一个 JPanel，其中包含具有不同 GUI 组件的其他面板，包括带有动作侦听器的按钮。在某些时候，我想删除一些组件并添加新组件。所以我尝试删除主 JPanel 上的所有组件，然后添加新组件。当我运行该`removeAll()`方法时，出现堆栈溢出错误。我也尝试一次删除一个组件，但我仍然遇到这个问题。还尝试了使用 in/re/validate 的不同组合，但未删除旧组件。这是我最后尝试的：

```
public void updateSuites() {
    removeAll();

    //for(int i = 0; i < getComponentCount(); i++)
      //remove(getComponent(i));

    invalidate();
    showGui();

    revalidate();
    repaint();
} 
```

这里有什么问题？

编辑：

所以这里又是代码：

```
public void updateSuites() {

    for(int i = 0; i < getComponentCount(); i++)
      if(!(getComponent(i) instanceof ControlPanel))
        remove(getComponent(i));

    invalidate();
    showGui();

    revalidate();
    repaint();
} 
```

我有一个扩展 JPanel 的类，并且上面有更多面板和组件。我还有一个 ControlPanel，上面有一些按钮和东西。所以想法是，当按下 ControlPanel 上的按钮时，它会在父面板上调用此方法，该方法应该删除除 ControlPanel 本身之外的所有内容（来自调用的来源）。但我得到堆栈溢出：

```
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
    at java.awt.AWTEventMulticaster.remove(Unknown Source)
    at java.awt.AWTEventMulticaster.removeInternal(Unknown Source)
    at java.awt.AWTEventMulticaster.remove(Unknown Source)
    at java.awt.AWTEventMulticaster.removeInternal(Unknown Source)
    at java.awt.AWTEventMulticaster.remove(Unknown Source)
    at java.awt.AWTEventMulticaster.removeInternal(Unknown Source)
    at java.awt.AWTEventMulticaster.remove(Unknown Source)
    at java.awt.AWTEventMulticaster.removeInternal(Unknown Source) 
```

编辑2：

我做了一些调试，发现了以下内容：我有一个 JPanel 数组，它们被添加到当前面板上。因此，删除数组 JPanel 的子项不是问题，但是当我尝试删除数组 JPanel 时会出现问题。代码看起来像这样：

```
for(int i = 0; i < panels.length; i++) {
      panels[i] = new JPanel();
      // add components to panels[i]
      add(panels[i]);
} 
```

所以如果我跑

```
for(int i = 0; i < panels.length; i++) {
      remove(panels[i]);
} 
```

我得到堆栈溢出错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:14:41.630

我会试试这个：

```
for (int i = getComponentCount() - 1; i >= 0; i--) {
    remove(getComponent(i));
} 
```

您`getComponentCount`在每次删除后调用，这会将计数减少 1。

# java - Bytes.toString(bytes) 和 bytes.toString() 有什么区别？

> ID：14775209
> 
> 赞同：0
> 
> 时间：2013-02-08T14:53:23.593
> 
> 标签：java, numberformatexception

我有一个由字节数组表示的整数。

```
byte[] result = getResult();
resultInt1 = Integer.parseInt(Bytes.toString(result));//1               
resultInt2 = Integer.parseInt(result.toString());//2 
```

在第一种方式中一切正常，但在第二种方式中我捕获了 NumberFormatException。

这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T14:54:13.893

数组不会覆盖`toString()`.

因此，`bytes.toString()`不返回任何有意义的东西；相反，它会返回类似`[B@18c28a`. （`[B`是数组的内部表示`byte`）

# database - 在 Postgres 9 中将 UUID 转换为 BIGINT 以在分布式客户端中生成全局 ID 是个好主意吗？

> ID：14775210
> 
> 赞同：3
> 
> 时间：2013-02-08T14:53:32.203
> 
> 标签：database, postgresql, uuid, uniqueidentifier, biginteger

我将有几个分布式客户端镜像集中式 postgres 9 数据库中的一些表。该系统将作为数据的 2 路同步工作。在最坏的情况下，客户端可能会离线数小时和数天（用于在现场收集数据的移动客户端）

所以，我需要在客户端中插入并为它们生成一个全局 ID。目前我有一个 GUID 字段，但随便看看[http://docs.python.org/2/library/uuid.html](http://docs.python.org/2/library/uuid.html)发现 GUID 可以从 INT64 或 BIGINT 转换。

所以我想知道是否可以在客户端生成 GUID，将其转换为 BIGINT 并将其用作数据库中的主键（因为通过 INT 加入和搜索比 GUID 或字符更快/更便宜）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:00:08.790

将 GUID 压缩为 64 位 INT64 或 BIGINT 听起来是个坏主意，因为 UUID 的长度为 128 位。

此外，数据库不会将 GUID/UUID 存储为字符串，而是将其存储为 128 位数字，这是一种相当优化且易于索引的格式。

# javascript - Jquery 插件“Sliding Panel Photowall Gallery”未将我的图像显示为 JPEG

> ID：14775212
> 
> 赞同：0
> 
> 时间：2013-02-08T14:53:36.203
> 
> 标签：javascript, jquery, image, plugins

我正在使用我非常喜欢的这个 jquery 插件（[在此处输入链接描述](http://tympanus.net/Tutorials/SlidingPanelPhotowallGallery/)），并且演示站点运行良好。但是，当我用我的图像替换图像并且不接触任何代码时（我想在自定义它之前对其进行测试），我得到一个错误并且图像不加载。

画廊的工作方式如下：您单击缩略图，脚本会根据您在该缩略图的“Alt”标签中输入的内容调用相应的全尺寸图像。问题是，当我添加图像时，出现此错误：**加载资源失败：服务器响应状态为 404（未找到）**

经过进一步检查，我发现了问题，但不知道如何解决。“GET”方法正在寻找“文本/html”文件而不是 JPEG。我很困惑，因为我无法弄清楚为什么它在原始演示站点上没有看到我的图像路径为 jpg。

这是我的网站：[http ://secondstoryinteriors.com/lookbook/](http://secondstoryinteriors.com/lookbook/)

我还提供了整个页面的代码。谢谢你的帮助！

```
<html>
<head>
    <title>Sliding Panel Photowall Gallery with jQuery</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="Sliding Panel Photowall Gallery with jQuery" />
    <meta name="keywords" content="jquery, images, gallery, photowall, slideshow"/>
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
</head>
<style>
    a{
        color:#262626;
        text-decoration:none;
    }
    a:hover{
        text-decoration:underline;
    }
    span.reference{
        position:fixed;
        left:30px;
        bottom:0px;
        font-size:9px;
    }
    span.reference a{
        color:#aaa;
    }
    span.reference a:hover{
        color:#262626;
        text-decoration:none;
    }

</style>
<body>
    <div class="infobar">
        <span id="description"></span>
        <span id="loading">Loading Image</span>
        <span class="reference">
            <h2>FALL/WINTER 2013 LOOKBOOK</a>
        </span>
    </div>
    <div id="thumbsWrapper">
        <div id="content" >
            <img src="thumbs/1.jpg" alt="images/1.jpg" title="Beatriz_Florido_01 © studio.es"/>
            <img src="thumbs/2.jpg" alt="images/2.jpg" title="Nuria_09 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/3.jpg" alt="images/3.jpg" title="Nuria_08 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/4.jpg" alt="images/4.jpg" title="Nuria_07 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/5.jpg" alt="images/5.jpg" title="Nuria_06 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/6.jpg" alt="images/6.jpg" title="Nuria_05 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/7.jpg" alt="images/7.jpg" title="Nuria_04 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/8.jpg" alt="images/8.jpg" title="Nuria_03 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/9.jpg" alt="images/9.jpg" title="Nuria_02 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/10.jpg" alt="images/10.jpg" title="Nuria_01 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/11.jpg" alt="images/11.jpg" title="Janne_Nielsen_07 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/12.jpg" alt="images/12.jpg" title="Janne_Nielsen_03 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/13.jpg" alt="images/13.jpg" title="Janne_Nielsen_06 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/14.jpg" alt="images/14.jpg" title="Janne_Nielsen_05 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/15.jpg" alt="images/15.jpg" title="Janne_Nielsen_04 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/16.jpg" alt="images/16.jpg" title="Janne_Nielsen_01 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/17.jpg" alt="images/17.jpg" title="Beatriz_Ruiz_10 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/18.jpg" alt="images/18.jpg" title="Beatriz_Ruiz_08 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/19.jpg" alt="images/19.jpg" title="Beatriz_Ruiz_06 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/20.jpg" alt="images/20.jpg" title="Beatriz_Ruiz_05 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/21.jpg" alt="images/21.jpg" title="Beatriz_Ruiz_04 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/22.jpg" alt="images/22.jpg" title="Beatriz_Ruiz_02 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/23.jpg" alt="images/23.jpg" title="Beatriz_Ruiz_01 © studio.es by Vincent Boiteau"/>
            <img src="thumbs/24.jpg" alt="images/24.jpg" title="Fashion 9  © studio.es by Vincent Boiteau"/>

            <div class="placeholder"></div>
        </div>
    </div>
    <div id="panel">
        <div id="wrapper">
            <a id="prev"></a>
            <a id="next"></a>
        </div>
    </div>
    <!-- The JavaScript -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script type="text/javascript">
        $(function() {
            /* this is the index of the last clicked picture */
            var current = -1;
            /* number of pictures */
            var totalpictures = $('#content img').size();
            /* speed to animate the panel and the thumbs wrapper */
            var speed   = 500;

            /* show the content */
            $('#content').show();

            /*
            when the user resizes the browser window,
            the size of the picture being viewed is recalculated;
             */
            $(window).bind('resize', function() {
                var $picture = $('#wrapper').find('img');
                resize($picture);
            });

            /*
            when hovering a thumb, animate it's opacity
            for a cool effect;
            when clicking on it, we load the corresponding large image;
            the source of the large image is stored as 
            the "alt" attribute of the thumb image
             */
            $('#content > img').hover(function () {
                var $this   = $(this);
                $this.stop().animate({'opacity':'1.0'},200);
            },function () {
                var $this   = $(this);
                $this.stop().animate({'opacity':'0.4'},200);
            }).bind('click',function(){
                var $this   = $(this);

                /* shows the loading icon */
                $('#loading').show();

                $('<img/>').load(function(){
                    $('#loading').hide();

                    if($('#wrapper').find('img').length) return;
                    current     = $this.index();
                    var $theImage   = $(this);
                    /*
                    After it's loaded we hide the loading icon
                    and resize the image, given the window size;
                    then we append the image to the wrapper
                    */

                    resize($theImage);

                    $('#wrapper').append($theImage);
                    /* make its opacity animate */
                    $theImage.fadeIn(800);

                    /* and finally slide up the panel */
                    $('#panel').animate({'height':'100%'},speed,function(){
                        /*
                        if the picture has a description,
                        it's stored in the title attribute of the thumb;
                        show it if it's not empty
                         */
                        var title = $this.attr('title');
                        if(title != '') 
                            $('#description').html(title).show();
                        else 
                            $('#description').empty().hide();

                        /*
                        if our picture is the first one,
                        don't show the "previous button"
                        for the slideshow navigation;
                        if our picture is the last one,
                        don't show the "next button"
                        for the slideshow navigation
                         */
                        if(current==0)
                            $('#prev').hide();
                        else
                            $('#prev').fadeIn();
                        if(current==parseInt(totalpictures-1))
                            $('#next').hide();
                        else
                            $('#next').fadeIn();
                        /*
                        we set the z-index and height of the thumbs wrapper 
                        to 0, because we want to slide it up afterwards,
                        when the user clicks the large image
                         */
                        $('#thumbsWrapper').css({'z-index':'0','height':'0px'});
                    });
                }).attr('src', $this.attr('alt'));
            });

            /*
            when hovering a large image,
            we want to slide up the thumbs wrapper again,
            and reset the panel (like it was initially);
            this includes removing the large image element
             */
            $('#wrapper > img').live('click',function(){
                $this = $(this);
                $('#description').empty().hide();

                $('#thumbsWrapper').css('z-index','10')
                .stop()
                .animate({'height':'100%'},speed,function(){
                    var $theWrapper = $(this);
                    $('#panel').css('height','0px');
                    $theWrapper.css('z-index','0');
                    /* 
                    remove the large image element
                    and the navigation buttons
                     */
                    $this.remove();
                    $('#prev').hide();
                    $('#next').hide();
                });
            });

            /*
            when we are viewing a large image,
            if we navigate to the right/left we need to know
            which image is the corresponding neighbour.
            we know the index of the current picture (current),
            so we can easily get to the neighbour:
             */
            $('#next').bind('click',function(){
                var $this           = $(this);
                var $nextimage      = $('#content img:nth-child('+parseInt(current+2)+')');
                navigate($nextimage,'right');
            });
            $('#prev').bind('click',function(){
                var $this           = $(this);
                var $previmage      = $('#content img:nth-child('+parseInt(current)+')');
                navigate($previmage,'left');
            });

            /*
            given the next or previous image to show,
            and the direction, it loads a new image in the panel.
             */
            function navigate($nextimage,dir){
                /*
                if we are at the end/beginning
                then there's no next/previous
                 */
                if(dir=='left' && current==0)
                    return;
                if(dir=='right' && current==parseInt(totalpictures-1))
                    return;
                $('#loading').show();
                $('<img/>').load(function(){
                    var $theImage = $(this);
                    $('#loading').hide();
                    $('#description').empty().fadeOut();

                    $('#wrapper img').stop().fadeOut(500,function(){
                        var $this = $(this);

                        $this.remove();
                        resize($theImage);

                        $('#wrapper').append($theImage.show());
                        $theImage.stop().fadeIn(800);

                        var title = $nextimage.attr('title');
                        if(title != ''){
                            $('#description').html(title).show();
                        }
                        else
                            $('#description').empty().hide();

                        if(current==0)
                            $('#prev').hide();
                        else
                            $('#prev').show();
                        if(current==parseInt(totalpictures-1))
                            $('#next').hide();
                        else
                            $('#next').show();
                    });
                    /*
                    increase or decrease the current variable
                     */
                    if(dir=='right')
                        ++current;
                    else if(dir=='left')
                        --current;
                }).attr('src', $nextimage.attr('alt'));
            }

            /*
            resizes an image given the window size,
            considering the margin values
             */
            function resize($image){
                var windowH      = $(window).height()-100;
                var windowW      = $(window).width()-80;
                var theImage     = new Image();
                theImage.src     = $image.attr("src");
                var imgwidth     = theImage.width;
                var imgheight    = theImage.height;

                if((imgwidth > windowW)||(imgheight > windowH)){
                    if(imgwidth > imgheight){
                        var newwidth = windowW;
                        var ratio = imgwidth / windowW;
                        var newheight = imgheight / ratio;
                        theImage.height = newheight;
                        theImage.width= newwidth;
                        if(newheight>windowH){
                            var newnewheight = windowH;
                            var newratio = newheight/windowH;
                            var newnewwidth =newwidth/newratio;
                            theImage.width = newnewwidth;
                            theImage.height= newnewheight;
                        }
                    }
                    else{
                        var newheight = windowH;
                        var ratio = imgheight / windowH;
                        var newwidth = imgwidth / ratio;
                        theImage.height = newheight;
                        theImage.width= newwidth;
                        if(newwidth>windowW){
                            var newnewwidth = windowW;
                            var newratio = newwidth/windowW;
                            var newnewheight =newheight/newratio;
                            theImage.height = newnewheight;
                            theImage.width= newnewwidth;
                        }
                    }
                }
                $image.css({'width':theImage.width+'px','height':theImage.height+'px'});
            }
        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:13:31.470

404 表示未找到该图像，并且确实无处可寻...

它们不在根目录下，也不在 lookbook/ 文件夹中，那么它们在哪里？输入正确的地址，它将起作用

# vb.net - 我有 2 个表单，我想用 form1 运行，但它从 form2 Visual Basic 开始

> ID：14775213
> 
> 赞同：0
> 
> 时间：2013-02-08T14:53:38.790
> 
> 标签：vb.net

我有 2 个表单，我想使用 form1 运行，但它以 form2 开头（Visual Basic）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:56:14.787

右键单击您的项目，单击属性，选择应用程序选项卡，将启动对象从 Form1 更改为 Form2。

# android - 我怎么知道键盘语言？（英文/法文）

> ID：14775218
> 
> 赞同：7
> 
> 时间：2013-02-08T14:53:47.570
> 
> 标签：android

我开发了一个短信发送应用程序，我想知道用户使用的语言。那么，当用户键入消息时，我如何知道他/她使用的语言？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T15:10:23.157

使用以下方法获取输入类型管理器：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
```

然后，使用以下方法选择从中获得什么：

[http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#getCurrentInputMethodSubtype%28%29](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#getCurrentInputMethodSubtype%28%29)

或： http: [//developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#getLastInputMethodSubtype()](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#getLastInputMethodSubtype())

与此一起获取输入类型的语言环境：

[http://developer.android.com/reference/android/view/inputmethod/InputMethodSubtype.html#getLocale()](http://developer.android.com/reference/android/view/inputmethod/InputMethodSubtype.html#getLocale())

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-04T05:55:53.067

您可以通过首先检测设备键盘的区域设置然后`Locale`从中获取对象来获取键盘语言。例如，

```
 InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    InputMethodSubtype ims = imm.getCurrentInputMethodSubtype();
    String localeString = ims.getLocale();
    Locale locale = new Locale(localeString);
    String currentLanguage = locale.getDisplayLanguage(); 
```

在这里，`currentLanguage`会给你的键盘语言。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:56:18.090

无法检索当前的键盘语言。Android 不允许检索当前配置的语言，没有任何 API。

# wpf - 使用 double.PositiveInfinity WPF 测量控制

> ID：14775226
> 
> 赞同：2
> 
> 时间：2013-02-08T14:54:12.460
> 
> 标签：wpf, wpf-controls, measureoverride

我正在开发一个具有自定义面板的自定义控件，并且在自定义面板内部我有一个小而简单`MeasureOverride`的方法，可以将大小传递`double.PositiveInfinity`给它的子`MeasureOverride`方法。自定义面板应该负责布局，它应该根据窗口大小使子项变大或变小。

如果您处理过控件，那么您应该知道 wpf 布局系统是如何工作的，并且基本上每个孩子都会调用 MeasureOverride，后者会调用孩子的孩子的 MeasureOverride 等等。

现在的问题是，当我调整窗口大小时，自定义面板确实会收到标志以再次进行测量，因此`MeasureOverride`会再次调用它，但这次在将`double.PositiveInfitinty`大小传递给其子级时，`MeasureOverride`根本不会调用子级（但该方法应根据 WPF 布局系统的定义调用）。为什么呢？我一直认为，当我打电话`MeasureOverride`给父母时，孩子们也会被迫采取措施。

显然我错了，所以有人可以解释一下控制/孩子如何知道何时再次测量？

顺便说一句，我将尺寸传递`double.PositiveInfinity`给孩子们，告诉他们根据需要占用尽可能多的空间。

代码：

```
protected override Size MeasureOverride(Size availableSize)
{
 double x;
 double y;
 var children = this.InternalChildren;
 for (int i = 0; i < children.Count; i++)
     {
       UIElement child = children[i];
       child.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity);
       y += child.DesiredSize.Height;
       x = Math.Max(x, child.DesiredSize.Width);
      }
 return new Size(x, y);
} 
```

代码很简单。我不明白为什么孩子们不再被测量。对不起，如果我在代码中拼错了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:41:32.387

您的孩子不会再次被测量，因为他们不必这样做：因为您一直传递相同的大小，WPF 知道没有理由再次测量，因为结果`DesiredSize`将是相同的。

话虽如此，`Desiredsize`更新`Measure`的尺寸只是您的孩子认为最合适的尺寸。您*应该*在覆盖时考虑到这一点`ArrangeOverride`，但您没有义务：只需按照您喜欢的方式安排您的孩子，`MeasureOverride`是否为您的孩子调用的事实应该是无关紧要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:21:27.763

您是否尝试过调用您的父面板在`UIElement.InvalidateMeasure`哪里？`UIElement`

# asp.net - ASP.net 使用 WCF Soap/Rest 服务

> ID：14775227
> 
> 赞同：0
> 
> 时间：2013-02-08T14:54:13.927
> 
> 标签：asp.net, wcf, rest, soap

我有一个 ASP.net 网站，该网站当前使用托管到 Azure 云服务的带有 SOAP 协议的 WCF 服务。

然后，我将该 WCF 服务公开为 Rest 和 Soap。（对于其他需要 Json 的客户）

我已尝试配置 ASP.net 站点的引用以支持此 WCF 服务的现有soap 端点，但我不断收到缺少对象引用的错误，而我的客户端调用工作正常。

我已经做了一些研究，但我仍然对此没有明确的看法。

当一个 Rest 共存时，这是否可以保持 - 坚持 Soap 服务参考 - 还是使用 Rest 端点并根据 Rest HTTP 请求修改我的代码更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:06:44.090

WCF 的美妙之处在于实现一次并以各种协议（作为不同的端点）部署（或托管）。

在您的情况下，如果您的 ASP.Net 应用程序当前正在使用带有 SOAP 的 WCF 服务，则完全有可能将现有的 WCF 服务公开为 REST 服务，而不会影响现有的 ASP.net 应用程序。

我亲自制作了一个由 3 个 App 使用的 WCF 服务，并且所有服务都在不同的协议中使用。Windowp 应用程序在 tcp 中使用它，而 asp.net 在 REST 中使用它，而 Php 应用程序在 SOAP 中使用它。请参阅这篇[文章](http://hectorcorrea.com/blog/multiple-endpoints-for-a-wcf-service)以获得更清晰的信息。

分享您遇到的问题的具体内部异常，以便我可以进一步提供帮助。

# android - android.widget.MediaController 的编译错误

> ID：14775232
> 
> 赞同：0
> 
> 时间：2013-02-08T14:54:30.977
> 
> 标签：android, intellij-idea, mediacontroller

我正在尝试自定义 MediaController。在这样做的过程中，我偶然发现了一个问题。我稍微修改过的版本和未修改的 MediaController 源都不能用 intelliJ IDEA 编译。编译未修改的源代码时，出现以下错误：

```
mWindow = PolicyManager.makeNewWindow(mContext); 
```

给出错误：

```
cannot find symbol
symbol : variable PolicyManager
location: class android.widget.MediaController 
```

下一个错误：

```
if (event.getRepeatCount() == 0 && event.isDown() && (
            keyCode ==  KeyEvent.KEYCODE_HEADSETHOOK ||
                    keyCode ==  KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE ||
                    keyCode ==  KeyEvent.KEYCODE_SPACE)) 
```

给出错误：

```
Cannot find symbol
symbol : method isDown()
location: android.view.KeyEvent 
```

我修改后的代码也给出了上述错误，但还有两个：

```
FrameLayout.LayoutParams = new FrameLayout.LayoutParams(
      ViewGroup.LayoutParams.FILL_PARENT,
      ViewGroup.LayoutParams.FILL_PARENT
); 
```

给出错误：

```
cannot find symbol
symbol : variable LayoutParams
location: class android.widget.FrameLAyout 
```

下一个错误：

```
addView(v, frameParams); 
```

给出错误：

```
cannot find symbol
symbol : variable frameParams
location: class ........ 
```

我将非常感谢任何帮助。

我从 GrepCode 获得了源代码，[http ://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/widget/MediaController.java/?v=来源](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/widget/MediaController.java/?v=source)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:01:30.073

`MediaController`需要访问不属于 Android SDK 的类和方法，因此无法构建为常规 SDK 应用程序的一部分。

# asp.net - 处理 Dotnetnuke 中的异常

> ID：14775234
> 
> 赞同：1
> 
> 时间：2013-02-08T14:54:36.320
> 
> 标签：asp.net, exception-handling, dotnetnuke

我想使用 Dotnetnuke 内置的异常处理，它提供了发生错误的详细信息，我尝试了 EventLogController 类来记录错误，但不幸的是它没有记录错误，我也想向用户显示自定义的错误消息。这是我目前用于在事件日志中记录错误的代码。

```
catch (PageLoadException exc)
{
    EventLogController errorController = new EventLogController();            
    DotNetNuke.Services.Log.EventLog.LogInfo info = new LogInfo();
    info.AddProperty("File Name Where Error Occured", exc.FileName);
    info.AddProperty("Line number in the file", exc.FileLineNumber.ToString());
    info.AddProperty("User logged in when error occured", exc.UserName);
    info.AddProperty("Url Of the Page where error occured", exc.AbsoluteURL);
    info.AddProperty("Portal ID", exc.PortalID.ToString());
    info.AddProperty("Portal Name", exc.PortalName);
    info.AddProperty("Method Name", exc.Method);
    info.AddProperty("Error Message", exc.Message);
    info.AddProperty("Stack Trace", exc.StackTrace);
    errorController.AddLog(info);
} 
```

但是它进入.Net的异常捕获，但我无法获得错误的详细信息。

谁能帮助我如何在 Dotnetnuke 的事件日志表中记录错误。并在出现任何异常时向用户显示自定义错误消息。

**更新的问题**

```
catch (Exception exc)
    {
        PageLoadException ex = new PageLoadException();
        exc.Message.Insert(0, "File Name: " + ex.FileName);
        exc.Message.Insert(1, "Line Number: " + ex.FileLineNumber.ToString());
        exc.Message.Insert(2, "User logged in when error occured: " + ex.UserName);
        exc.Message.Insert(3, "Url Of the Page where error occured: "+ ex.AbsoluteURL);
        exc.Message.Insert(4, "Portal ID: "+ ex.PortalID.ToString());
        exc.Message.Insert(5, "Portal Name: " + ex.PortalName);
        exc.Message.Insert(6, "Method Name: "+ ex.Method);
        exc.Message.Insert(7, "Error Message: " + ex.Message);
        exc.Message.Insert(8, "Stack Trace: " + ex.StackTrace);
        Exceptions.ProcessModuleLoadException(this, exc);
   } 
```

现在有了这个我得到了`The page isn't redirecting properly`错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:20:41.290

DotNetNuke.Services.Exceptions.Exceptions 命名空间中有几个方法允许您传入将记录到 EventLog 中的异常

例如

```
catch (Exception exc)
        {

            Exceptions.ProcessModuleLoadException(this, exc);
        } 
```

在调用 ProcessModuleLoadException 以让 DNN 处理错误之前，您可以尝试将信息添加到异常 (Exc) 中。

但是，异常处理的工作方式是，如果您不是主机/管理员用户，那么当它发生时您会收到一条相当通用的错误消息，这有助于防止错误的安全漏洞。

# apache - 基于主机名的 Apache HTTP 代理

> ID：14775248
> 
> 赞同：7
> 
> 时间：2013-02-08T14:55:39.667
> 
> 标签：apache, tomcat, configuration, webserver

以前，我正确设置了 Apache HTTP 以将端口 80 上的传入 HTTP 请求转发到端口 8080 上运行的 Tomcat 实例。但是，现在我处于需要能够将端口 80 上的传入请求代理到任一Tomcat @ 8080 或不同的进程 @ 9000，具体取决于主机名。下面是我尝试设置我的 Apache 配置以处理这种情况的片段：

```
<VirtualHost *:80>
  ServerName hostname1
  ProxyPreserveHost On
  ProxyPass / http://hostname1:8080/
  ProxyPassReverse / http://hostname1:8080/
</VirtualHost>
<VirtualHost *:80>
  ServerName hostname2
  ProxyPreserveHost On
  ProxyPass / http://hostname2:9000/
  ProxyPassReverse / http://hostname2:9000/
</VirtualHost> 
```

现在，当从**hostname1**或**hostname2**请求时，我得到一个即时 500 显然是由于 mod_proxy 没有找到任何匹配的规则来代理请求：

```
[Fri Feb 08 06:41:01 2013] [warn] proxy: No protocol handler was valid for the URL /. If you are using a DSO version of mod_proxy, make sure the proxy submodules are included in the configuration using LoadModule. 
```

**请注意，Tomcat 没有接收传入的请求，因此没有日志输出**

为了理智起见，我检查了我确实*可以在各自的端口上单独访问这两个资源*，即我可以使用 hostname1:8080访问**hostname1 ，使用****hostname2** :9000 访问 hostname2。

这里有什么东西可以帮助我正确配置吗？

此外，有没有更好的方法以更理智的方式管理这个问题？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T20:33:42.203

答案似乎是关于单独模块的错误配置，即 mod_proxy_http。正如 Apache HTTP 错误日志中的“代理：没有协议处理程序对 URL 有效”消息所提示的那样，我得到了以下 serverfault 答案对我的帮助：[https ://serverfault.com/questions/242650/setting-up -a-basic-mod-proxy-virtual-host](https://serverfault.com/questions/242650/setting-up-a-basic-mod-proxy-virtual-host)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:23:27.643

如果要配置基于名称的虚拟主机，请添加`NameVirtualHost`指令。

`ServerName`将和添加`DocumentRoot`到每个`VirtualHost`.

例子：

```
NameVirtualHost *:80

<VirtualHost *:80>
 ServerName hostname1
 DocumentRoot /www/hostname1
 ProxyPreserveHost On
 ProxyPass / http://hostname1:8080/
 ProxyPassReverse / http://hostname1:8080/
</VirtualHost>

<VirtualHost *:80>
  ServerName hostname2
  DocumentRoot /www/hostname2
  ProxyPreserveHost On
  ProxyPass / http://hostname2:9000/
  ProxyPassReverse / http://hostname2:9000/
</VirtualHost> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-18T12:49:35.953

如果您有错误日志：

> 如果您使用的是 DSO 版本的 mod_proxy，请确保代理子模块包含在使用 LoadModule 的配置中。

执行此命令：

```
a2enmod proxy_http 
```

# actionscript-3 - 外部 SWF 冲突中的嵌入字体

> ID：14775249
> 
> 赞同：1
> 
> 时间：2013-02-08T14:55:41.677
> 
> 标签：actionscript-3, flash, actionscript, flash-builder

我有一个问题，我正在加载到我的应用程序中的外部 SWF（来自外部方）在我将其加载到我的应用程序时丢失了它的字体渲染（使用外部字体）。就其本身而言，字体似乎渲染得很好，当我测试将此外部 SWF 加载到一个简单的测试项目中时。

所以在我看来，我嵌入到我的应用程序中的字体可能存在冲突。但是，我已经删除了与此相关的所有功能，它并没有解决我的问题。关于为什么会发生冲突的任何想法？

编辑 ** 有趣的是，仅当 ApplicationDomain 设置为 null 时才会出现此问题。当子 SWF 共享父 SWF 域时，字体会正确呈现。

谢谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:59:20.417

您对字体冲突的建议是正确的。嵌入字体有几个规则可以帮助您解决这个问题：

1.  尽量不要使用静态文本字段。静态文本字段中的所有符号都将由 Flash IDE 嵌入到您的 swf 中，因此如果您要加载另一个 swf，它的字体（具有相同名称的系列名称）将被您的字体替换，只有几个符号。
2.  如果您仍然使用静态文本字段，请尝试将外部 swf 加载到自己的应用程序域 ( `new ApplicationDomain(null)`) 中，这将阻止字体替换，但来自主 swf 的类在加载的域中将不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:06:02.950

问题是，as3 不喜欢在不同的域上注册字体。所以我将父“ApplicationDomain”的一个实例传递给子 swf，子 swf 将字体注册到这个实例。

# python - 为什么当我使用复选框小部件时 web2py 显示禁用的输入 html？

> ID：14775251
> 
> 赞同：0
> 
> 时间：2013-02-08T14:55:53.663
> 
> 标签：python, html, web2py

我正在学习 web2py，但遇到了一些麻烦。我有一个一对多的关系，定义如下：

```
db.define_table('dog',
    Field('name', requires=IS_NOT_EMPTY()))
db.define_table('person',
    Field('name', requires=IS_NOT_EMPTY()),
    Field('dogs', 'list:reference dog'))

db.person.dogs.widget=SQLFORM.widgets.checkboxes.widget 
```

一只狗有一个主人，但一个主人可以养多只狗。

在我的控制器中，我创建了一个表单，其中包含一个人姓名的文本字段，以及一个表示为复选框的狗列表。

创建表单的控制器代码很简单：

```
form = SQLFORM(db.person)   # rendered with {{=form}} in views 
```

这可行，但在复选框列表的末尾有一个奇怪的文本输入，它被标记为禁用：

```
<tr><td><input class="hidden" disabled="disabled" name="dogs" type="text" /></td></tr> 
```

这实际上并没有隐藏，只是变灰了。

我查看了 web2py 源代码，复选框小部件位于 web2py.gluon.sqlhtml 中，但我很难解释为什么它将这个禁用的输入附加到复选框列表中。

谁能澄清为什么有这个禁用的输入，或者如何在没有这个问题的情况下正确创建这个表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:09:25.510

Anthony 的评论是正确的：我忘记加载 css 文件。

# regex - 修剪R中的字符串

> ID：14775259
> 
> 赞同：3
> 
> 时间：2013-02-08T14:56:06.450
> 
> 标签：regex, string, r, gsub

我正在尝试在 R 中隔离字符串的一部分。这些字符串具有格式 `ABC_constantStuff_ABC_randomStuff`，并且`ABC`是我要提取的内容。`ABC`是未知的，可以是 1-3 个字符长。我一直在尝试`grep`，`gsub`但不确定如何使用指定我的正则表达式

```
str <- 'GDP\" title=\"GDP - News\"></a>"'
symbol <- gsub(pattern,'',str) 
```

这里`GDP`是未知的，可以是 1-3 个字符长，`\" title=\"`在每个字符串中都是恒定的，我想删除`\" title=\"GDP - News\"></a>"`

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:00:45.240

一个简单的就是

```
R> gsub("^([A-Z]*)_.*", "\\1", "ABC_constantStuff_ABC_randomStuff")
[1] "ABC"
R> 
```

它将所有字母都放在第一个`_`。

另一个假设`_`是你的分隔符是

```
R> strsplit( "ABC_constantStuff_ABC_randomStuff", "_")[[1]][c(1,3)]
[1] "ABC" "ABC"
R> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:59:44.647

这有帮助吗？

```
> sub("\".*$", "", str) 
```

# ajax - Codeigniter ajax 工具提示

> ID：14775264
> 
> 赞同：1
> 
> 时间：2013-02-08T14:56:15.100
> 
> 标签：ajax, codeigniter, tooltip

当光标悬停到链接时，我想使用来自 db 的动态数据制作弹出工具提示，但我做错了。请更正我的代码。

我的观点

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('.tip').tooltip();
        });
    </script>
    <script type="text/javascript" language="javascript">
        jQuery(document).ready(function(){
       $('#something').mouseover(function(){
        $.ajax({
         url: "<?=base_url();?>aircraft/tip",
         type: 'POST',
         data: {
          'id': $(this).attr("rel"),
         },
         dataType: 'json',
         success: function(aircraft_j) {
                  $('#something').attr('data-original-title',aircraft_j);  
              }
        });
        return false;
       });
      });
      </script>

    <a href="#" data-toggle="tooltip" data-placement="right" id="something" title="" 
data-original-title="" rel="1" class="tip">aircraft</a> 
```

我的控制器

```
 function tip() {
    $this->output->enable_profiler(false);
    if($this->input->server('HTTP_X_REQUESTED_WITH') != 'XMLHttpRequest'){ echo "fail. try something else"; return; }
    $this->load->model('aircraft_model');
    $idd = $this->input->post('id');
    $aircraft_j = array();
    $aircraft_j = $this->aircraft_model->get_aircraft_tip($idd);
    echo json_encode($aircraft_j);
    } 
```

我的模型

```
 function get_aircraft_tip($idd) {
    $this->db->where('id',$idd);
    $query = $this->db->get('aircraft');
    return $query->row_array();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:38:23.733

好的，正如您所说，您正在使用**[引导](http://twitter.github.com/bootstrap/javascript.html#tooltips)**工具提示。你应该这样做：

在您的 html 中：

```
<a href="#" data-toggle="tooltip" id="something" title="" 
data-original-title="tooltip data goes here">whatever you want</a> 
```

`ajax`正如我所看到的，你的和 CI没有问题，`controller`但你必须对你的这样的稍作改变`success function`：

```
success: function(aircraft_j) {
                  $('#something').attr('data-original-title',aircraft_j);  
              } 
```

**另外：**您可以阅读可能对您有帮助的[prop() 。](http://api.jquery.com/prop/)

## 你可能遇到的问题..

在您的`CI tip function`我看来`echo json_encode($aircraft_j);`，您的`$aircarft_j`变量应该是“**字符串**”数据类型。正如我所看到的，您正在`$query->row_array();`从模型中返回，**因此您可能需要将其作为 array 使用**。[在这里](https://stackoverflow.com/questions/14564991/ajax-form-validation-with-mysqli-query/14565715#14565715) 你可以找到一个很好的解释。

# c - 如何在需要 LPCOLESTR 的函数中使用 argv[]

> ID：14775267
> 
> 赞同：0
> 
> 时间：2013-02-08T14:56:23.033
> 
> 标签：c, visual-studio-2010, directshow

我有一个项目，其中一个函数使用 LPCOLESTR 类型的参数

```
 HRESULT BuilGraph(IGraphBuilder *pGraph,LPCOLESTR dstFile) 
```

我的问题是如何使用 argv[1] 并将其放入 dstFile，我尝试过：

```
LPCOLESTR somevar =OLESTR(argv[1]) ; 
```

多亏了 Roman 和 Joachim，我改变了一点我的代码，现在看起来像这样：char pathstuff[50]; sprintf(pathstuff,"C:\Users\engine\Desktop\engine%s.avi",argv[1]);

所以我得到了路径视频名称，知道 argv[1] 将是一个数字，我该如何将其转换为

```
 LPCOLESTR  ??? 
```

它没有用，任何想法如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:10:03.543

`LPCOLESTR`是 的另一个名称`const WCHAR*`，因此您需要进行转换（关于 SO 的大量问题）。如果您使用的是 ATL 或 MFC，则可能很简单：

```
CString sValue(argv[1]);
USES_CONVERSION;
BuilGraph (CT2COLE(sValue), ...); 
```

使用纯 C，您将`mbstowcs`按照 Joachim 的建议使用，或直接使用 API - [`MultiByteToWideChar`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)。

升级版：

```
 wchar_t pathstuff[50]; 
 swprintf(pathstuff, L"C:\\Users\\engine\\Desktop\\engine%hs.avi", argv[1]);
 LPCOLESTR x = pathstuff; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:03:36.130

问题是这`LPCOLESTR`是一个宽字符串指针（即指向 的指针`wchar_t`），而参数数组中的字符串是普通的窄字符串。

您可以使用[`mbstowcs`](http://msdn.microsoft.com/en-us/library/k1f9b8cy%28v=vs.100%29.aspx)将普通字符串指针转换为宽字符串指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:16:27.630

此外，_bstr_t（在 comdef.h 中）是一种简单的转换方式。您可以分配任何一种类型，也可以将其强制转换为任何一种类型。

G

# php - PHP 和 mongoDB：一口气替换整个集合？

> ID：14775269
> 
> 赞同：1
> 
> 时间：2013-02-08T14:56:27.703
> 
> 标签：php, mongodb

我正在构建一个使用 mongoDB 进行操作存储的 ETL 应用程序。ETL 过程从数据源执行频繁的增量转储，有时还会执行全表转储。

当我执行完全转储时，我想替换整个 mongoDB 集合 - 索引和所有。

[PHP 教程](http://www.php.net/manual/en/mongo.tutorial.insert.multiple.php)建议使用这种方法插入多个文档：

```
<?php
$connection = new MongoClient();
$collection = $connection->database->collectionName;

for ( $i = 0; $i < 100; $i++ )
{
    $collection->insert( array( 'i' => $i, "field{$i}" => $i * 2 ) );
}
?> 
```

但是，如果我有数百万个文档，这会导致与 mongoDB 的数百万个连接——这显然是一个很大的瓶颈，尤其是在远程数据库上。更不用说我是否想等待来自数据库的回调确认插入成功。

PHP驱动程序支持的mongoDB中是否有一种方法可以用一个大数组替换整个集合，从而对数据库执行一次调用？我想这对于 mongoDB 也会更快，例如`db.colleciton.drop()`vs. `db.collection.remove()`.

如果这不可能，那么在运行 PHP 脚本的同一台服务器上拥有一个主数据库并远程复制它会更有效吗？通过这种方式，我可以从本地数据库获得更快的响应，并且复制时会有一些滞后，但我想这会使 PHP 脚本更早可用。

有什么建议么？

谢谢，

通用汽车

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:09:33.420

> 但是，如果我有数百万个文档，这会导致数百万个与 mongoDB 的连接

不，只有一个连接。它不会在每次迭代后关闭连接。

> 更不用说我是否想等待来自数据库的回调确认插入成功。

事实上，没有简单的方法可以解决这个问题。如果你想知道实际插入的东西，你必须……嗯，知道。

> 我想这对于 mongoDB 也会更快，例如 db.colleciton.drop() 与 db.collection.remove()。

由于 MongoDB 的内部结构和它释放记录对象的方式（一个很好的介绍：[http](http://www.10gen.com/presentations/storage-engine-internals) ://www.10gen.com/presentations/storage-engine-internals ）`drop()`在这种情况下性能更高，因为它实际上“丢弃”了集合直接关闭。不仅如此，所有的记录对象都将不复存在，并且该集合将作为一个空闲范围存在，等待再次使用。

> 用一个大数组替换整个集合，从而对数据库执行一次调用？

删除集合后，您始终可以使用`batchInsert`（[http://php.net/manual/en/mongocollection.batchinsert.php ）。](http://php.net/manual/en/mongocollection.batchinsert.php)但是，如果事情失败了，你就会遇到奇怪的事情，你需要回退的场景。逐一插入，您实际上可以通过一次调用来判断事情是否应该继续或是否需要干预。

这里有一些关于索引的注释，删除索引并在插入数据后重建它们。这种方式要快得多。

> 如果这不可能，那么在运行 PHP 脚本的同一台服务器上拥有一个主数据库并远程复制它会更有效吗？

这取决于。通常在工作集上，您是否可以在您的应用服务器上实际运行 MongoDB。另一个考虑因素是单点故障，您的辅助服务器将被疏远，您将依赖`mongod`应用服务器上的单点故障来为您带来此好处；所以如果有故障转移，你就不会保持这个优势。

从理论上讲，在本地托管的有空闲时间之后的某个时间，没有什么可以阻止您这样做并使用`RP_PRIMARY`and `w`1 in并复制辅助节点。`MongoClient``mongod`

# java - 如何在 Guice 中绑定一个池（没有太多样板）？

> ID：14775273
> 
> 赞同：0
> 
> 时间：2013-02-08T14:56:34.180
> 
> 标签：java, scala, dependency-injection, guice, pool

我有一个像这样的通用界面：

```
trait Thing {
  ...
} 
```

和这样的实现：

```
class ThingA extends Thing {
  ...
}

class ThingB extends Thing {
  ...
} 
```

使用哪一个是在运行时确定的，因此配置了一个池以提供正确的一个：

```
class Things(a: ThingA, b: ThingB) {
  addThing(a)
  addThing(b)

  def getThing(x: String) = { ... }
} 
```

如何`Thing`在不将其显式添加到构造函数的情况下将所有配置的 s 提供给 ThingPool？

如，我想做以下事情：

```
class Things(pool: ThingPool) {
  addThingsFromPool(pool)

  def getThing(x: String) = { ... }
} 
```

...在没有明确要求的情况下，`ThingPool`所有s 都在哪里。`Thing`

...或者，`ThingPool`可能是一个`List[Thing]`.

当前的状态需要**两次**额外的编辑才能添加`Thing`. 我想达到我需要做的就是在我的 Guice 模块中添加绑定语句的地步。

*为了清楚起见，我省略了注释。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:19:42.277

看来您正在寻找 Multibinding 扩展：[http ://code.google.com/p/google-guice/wiki/Multibindings](http://code.google.com/p/google-guice/wiki/Multibindings)

```
val thingBinder = Multibinder.newSetBinder(binder(), classOf[Thing])
thingBinder.addBinding().to(classOf[ThingA])
thingBinder.addBinding().to(classOf[ThingA]) 
```

然后使用它

```
class Things(pool:Set[Thing]) 
```

# c# - C# 和 WPF，ShowFIleDialog 抛出异常

> ID：14775280
> 
> 赞同：3
> 
> 时间：2013-02-08T14:56:46.527
> 
> 标签：c#, wpf, exception

我的代码有问题。我在我的项目中使用 OpenFileDialog，当我调用 ShowDialog 方法时会引发异常。我不明白为什么。

```
 private void open_FileMenu(object sender, RoutedEventArgs e)
    {
        OpenFileDialog browser = new OpenFileDialog();
        browser.AddExtension = true;
        browser.Filter = "Audio, Video File | *.wma; *.mp3; *.wmv";
        browser.Title = "Choose your file";
         if (browser.ShowDialog() == System.Windows.Forms.DialogResult.Yes) // Exception thrown here
          {
            try
            {
                string FileName = browser.FileName;
                MyMedia.Source = new Uri(FileName);
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
            }
        } 
```

这个例外说

```
 A first chance exception of type 'System.ComponentModel.Win32Exception' occurred  in WindowsBase.dl 
```

附加信息：参数不正确

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:47:54.073

In WinForms `CommonDialog.ShowDialog()` comes from [System.Windows.Forms.dll](http://msdn.microsoft.com/en-us/library/e61ft40c.aspx) and returns a `DialogResult`.

In WPF `CommonDialog.ShowDialog()` comes from [PresentationFramework.dll](http://msdn.microsoft.com/en-us/library/ms614336.aspx) and returns a `bool?`

Naturally this leads to a lot of confusion. Ultimately you want this instead.

```
if (browser.ShowDialog() == true) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:23:45.047

这对我有用：

```
 OpenFileDialog browser = new OpenFileDialog();
        browser.AddExtension = true;
        browser.Filter = "Audio, Video File | *.wma; *.mp3; *.wmv";
        browser.Title = "Choose your file";
        string FileName;
        bool? res = browser.ShowDialog(); // No exception thrown here
        if (res ?? false)
        {
            try
            {
                 FileName = browser.FileName;
                //MyMedia.Source = new Uri(FileName);
            }
            catch (Exception ex)
            {
                Console.Write(ex.Message);
            }
        } 
```

# django - 如何在 django 开发环境中从 gridfs 提供文件？

> ID：14775284
> 
> 赞同：1
> 
> 时间：2013-02-08T14:57:11.253
> 
> 标签：django, mongoengine, gridfs

我需要在我的 django + mongoengine 项目中提供来自 GridFS 的文件。有没有开箱即用的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T03:58:49.177

@login_required def view_posts(request): post_data = Post.objects(user=request.user)

```
return render(request, 'posts.html', { 'post_data' : post_data } ) 
```

@login_required def show_image(request, _md5): post_data = Post.objects(user=request.user)

```
image = None
for post in post_data:
    if _md5 == post.image.md5:
        image = post.image.read()
        break

return HttpResponse(image.read(), content_type="image/" + post.image.format) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-16T03:26:32.337

在 Django 中我应该如何做到这一点并不是很明显，但这就是我最终要做的。

我在views.py 中创建了一个show_image 函数，它传递感兴趣图像的md5 并将其作为HttpResponse 返回。在这种情况下，帖子数据由用户过滤，但通常您可能不需要。此外，我的 show_image 代码效率很低，我相当肯定有办法使用 mongoengine 进行查询，这比遍历图像查找 md5 更有效。urls.py 传递图像的 md5，然后调用 show_image 并返回标记所需的 HttpResponse/url。

**模型.py**

```
from mongoengine import *

class Post(Document):
    image = ImageField() 
```

**视图.py**

```
@login_required
def view_posts(request):
    post_data = Post.objects(user=request.user)

    return render(request, 'posts.html', { 'post_data' : post_data } )

@login_required
def show_image(request, _md5):
    post_data = Post.objects(user=request.user)

    image = None
    for post in post_data:
        if _md5 == post.image.md5:
            image = post.image.read()
            break

    return HttpResponse(image, content_type="image/" + post.image.format) 
```

**网址.py**

```
 url(r'posts/images/(?P<_md5>\w+)$', 'project.views.show_image', name='show_image'), 
```

**模板/posts.html**

```
<div id="posts">
    {% for post in post_data %}
    <dl class="dl-horizontal">
        <dd>{{ post.image.uploadDate }}</dd>
        <img src="images/{{ post.image.md5 }}" />
    </dl>
    {% endfor %}
</div> 
```

# android - Android 动态数据库 SQLite 存储最佳实践

> ID：14775286
> 
> 赞同：0
> 
> 时间：2013-02-08T14:57:19.077
> 
> 标签：android, arrays, dynamic, android-sqlite

我想知道是否有人遇到过需要在 android sqlite 中真正动态或出现动态数据库字段的情况。

让我详细说明。

我想在我的数据库中创建两个单独的字段，它们的存储长度可能会有所不同。例如，我有两个字段`sprints`和`sprint_time`. 所以基本上我希望用户能够选择他们将要进行的冲刺数量，我将创建一个`array`类似的`String [] sprints = new String [userEnteredValue];`地方`int userEnteredValue;`将指定他们将要进行的冲刺数量，然后我想循环添加一个`string`at每个位置都喜欢

```
for(int i = 1; i < sprints.length;i++){
 sprints[i] = "Sprint_"+i;
 } 
```

然后我想用来`int userEnteredValue;`创建第二个数组，但仅作为每个 sprint 时间的占位符。这就是我感到困惑的地方。所以很明显我只是创建另一个`array`这样`String [] sprint_time = new String [userEnteredValue];`并循环遍历这个数组来创建占位符，如下所示：

```
for(int i = 0; i < sprint_time.length; i++){
 sprint_time[i] = "SprintTime_"+i; // place holder for each sprint time
 } 
```

在我的 android 活动中创建这两个之后，我希望用户在完成每个活动后能够输入时间`sprints[i]`

我知道为了将这些值存储在一个数据库中，我需要将每个值`array`变成一个`String`，这不是我如何做到这一点的问题。

我的问题更多的是有没有人这样做过，有没有我可以参考的例子？另外，这是实现这一目标的最佳方法还是我应该使用不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:10:05.650

我可能会使用更多的表格并做一些不同的事情，例如我可能有两个表格，锻炼和 SprintTimes

```
[Workouts   ]     [SprintTimes    ]
|           |     |ID             |
|ID         |  -> |WorkoutID      |
                  |SprintPosition |
                  |Time           | 
```

我不确定您所说的是否是锻炼，但设置会相似。

您将创建一个锻炼，然后为指向锻炼的每个冲刺创建一行。

这样做也将使您的查询更容易，而不必动态构建。例如，您可以通过 group by 和 sum 获得锻炼的总时间：

`select WorkoutID, SUM(Time) from SprintTimes group by WorkoutID`

# .net - 使用 BindingListView 进行多列过滤

> ID：14775288
> 
> 赞同：2
> 
> 时间：2013-02-08T14:57:46.427
> 
> 标签：.net, search, datagridview, filtering, bindinglist

我正在使用位于[http://blw.sourceforge.net/](http://blw.sourceforge.net/)的 BindingListView dll来启用具有通用列表的 DataGridView 的排序，因为它是 DataSource。我阅读了有关过滤的内容，它使用起来相当简单，但我在试图弄清楚如何为过滤器使用多个搜索参数时遇到了问题。这是一个例子......

```
Private Sub txtProjectNumber_TextChanged(sender As Object, e As System.EventArgs) Handles txtProjectNumber.TextChanged, txtDescription.TextChanged,
    txtOracleNumber.TextChanged, txtBudgetYearFrom.TextChanged, txtBudgetYearTo.TextChanged, txtWeek3Start.TextChanged, txtWeek3End.TextChanged
    view.ApplyFilter(AddressOf FilterData)
End Sub

Private Function FilterData(ByVal projectDetails As ProjectDetails) As Boolean
    Try
        If Not String.IsNullOrWhiteSpace(txtProjectNumber.Text) Then  
            Return projectDetails.ProjectNum.ToLower().StartsWith(txtProjectNumber.Text.ToLower())
        End If
        If Not String.IsNullOrWhiteSpace(txtDescription.Text) Then
            Return projectDetails.Description.ToLower().StartsWith(txtDescription.Text.ToLower())
        End If
    Catch ex As Exception
        MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try
    Return False
End Function 
```

所以在这里您可以看到，如果我更改 txtProjectNumber 文本框中的文本，我的过滤器将返回正确的结果。但是，如果我说在 txtProjectNumber 文本框中放置“x”，并且还想通过“早上”的 txtDescription 进行搜索，则 txtDescription 将被忽略，因为它命中了 txtProjectNumber 并被返回，而从未命中 txtDescription 文本框。我怎样才能让它一直继续下去，从每个非空输入构建一个过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T16:07:45.153

您只需要根据测试返回一个布尔值，您实际上并没有返回对象本身，因此多个返回只是将您的条件放在 if/andalso 语句中，如果满足所有条件，则返回 true。

```
Private Function FilterData(ByVal projectDetails As ProjectDetails) As Boolean
    Dim result As Boolean = False

    If projectDetails.ProjectNum.ToLower().StartsWith(txtProjectNumber.Text.ToLower()) andalso _
       projectDetails.Description.ToLower().StartsWith(txtDescription.Text.ToLower()) andalso _

              <remaining tests>

       result = true
    End If
Return result
End Function 
```

# iphone - HTML 到 PDF 页面的底部边距随着每一页而变大

> ID：14775292
> 
> 赞同：2
> 
> 时间：2013-02-08T14:57:59.290
> 
> 标签：iphone, ios, pdf, pdf-generation

我正在尝试在 iOS 上将 HTML 转换为 PDF。第一页看起来总是很好，但是之后的每一页都停止打印到越来越高的页面。底部边距似乎在神秘地增长。我已经挖掘了很多次，找不到我做错了什么。

这是我认为问题所在的主要方法。

```
- (NSData*) printToPDF
{
    NSMutableData *pdfData = [NSMutableData data];

    UIGraphicsBeginPDFContextToData( pdfData, CGRectZero, nil );

    [self prepareForDrawingPages: NSMakeRange(0, self.numberOfPages)];

    CGRect bounds = UIGraphicsGetPDFContextBounds();

    for ( int i = 0 ; i < self.numberOfPages ; i++ )
    {
        UIGraphicsBeginPDFPage();

        [self drawPageAtIndex: i inRect: bounds];
    }

    UIGraphicsEndPDFContext();

    return pdfData;
} 
```

你也可以在这里看到整个事情。

[iOS-htmltopdf](https://github.com/iclems/iOS-htmltopdf/blob/master/NDHTMLtoPDF.m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T07:01:40.833

你`A4 size`是`incorrect`。结果保证金增加

```
#define kPaperSizeA4 CGSizeMake(595.2,841.8 
```

# c# - 将文本字段数据保存到数据库的代码

> ID：14775294
> 
> 赞同：1
> 
> 时间：2013-02-08T14:58:03.230
> 
> 标签：c#, asp.net, asp.net-mvc

我在编写将文本字段框信息保存到数据库中的代码时遇到问题，这就是我所拥有的 - 一个 Get 和 Post 方法：

```
public ActionResult _UserName(UserNameModel userNameModel)
{
    using (var db = new DataConnection())
    {
         userNameModel.UserName= (from u in db.Users
                                 where u.ID == WebSecurity.CurrentUserId
                                 select u.UserName).FirstOrDefault();
         }
         return View(userNameModel);
    }
}   

[HttpPost]
public ActionResult _CreateUserName(string username, UserNameModel userNameModel)
{
    if (ModelState.IsValid)
    {
        using (var db = new DataConnection())
        {
            try
            {
                // Need to save what has been entered in the textbox 
                // to the Users table in the database. 
            }
            catch (Exception)
            {
                throw;
            }
        }
        return RedirectToAction("UserNamePage");
    }
    return View(userNameModel);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:06:56.403

您不需要在`FormCollection`此处使用，因为它看起来好像您正在绑定到模型。

在视图中你应该有

```
@model MySystem.Models.UserNameModel 

@Html.TextBoxFor(m=> m.Username) 
```

然后，当您提交表单时，您可以从中获取模型数据`userNameModel.Username;`

您的 Post 方法只需要收集模型数据

```
[HttpPost]
public ActionResult _CreateUserName(UserNameModel userNameModel)
{
    if (ModelState.IsValid)
    {
      using (var db = new DataConnection())
      {
        try
        {
            db.UsersTable.InsertOnSubmit(new User(){ Username = userNameModel});
            // Need to save what has been entered in the textbox 
            // to the Users table in the database. 
        }
        catch (Exception)
        {
            throw;
        }
    }
    return RedirectToAction("UserNamePage");
}
return View(userNameModel);

} 
```

**编辑**我与数据库交互的首选方法是使用 Linq，在您的项目中添加一个新项目 > Data > LinqToSql。这将为您提供图表概览，您可以简单地将表格和过程拖到屏幕上。这将创建每个表的模型。

然后，您可以创建 Linq 上下文的实例并使用它来更新您的数据库，您将看到智能感知将在您的设计器中获取表。然后，您将能够非常干净地与数据库进行交互

```
[HttpPost]
public ActionResult _CreateUserName(UserNameModel userNameModel)
{
    if (ModelState.IsValid)
    {

        try
        {
            myLinqDataContext db = new myLinqDatacontext(); // in your web config amend the connection string this created

            db.UsersTable.InsertOnSubmit(new User(){ Username = userNameModel});
            // Need to save what has been entered in the textbox 
            // to the Users table in the database. 
        }
        catch (Exception)
        {
            throw;
        }

    return RedirectToAction("UserNamePage");
}
return View(userNameModel);

} 
```

如果要更新，则需要调用数据库中记录的实例

```
[HttpPost]
public ActionResult _CreateUserName(UserNameModel userNameModel)
{
    if (ModelState.IsValid)
    {

        try
        {
            myLinqDataContext db = new myLinqDatacontext(); // in your web config amend the connection string this created

            UserTable user = db.UsersTable.Where(m=> m.Username == userNameModel.UserName).FirstOrDefault();

            // apply new information
            user.username = userNameModel.UserName;

            // commit the changes
            db.SubmitChanges();

            // Need to save what has been entered in the textbox 
            // to the Users table in the database. 
        }
        catch (Exception)
        {
            throw;
        }

    return RedirectToAction("UserNamePage");
}
return View(userNameModel);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:01:20.243

看看这个：[http ://stack247.wordpress.com/2011/03/20/get-forms-post-values-in-asp-net-mvc-with-formcollection/](http://stack247.wordpress.com/2011/03/20/get-forms-post-values-in-asp-net-mvc-with-formcollection/)

这应该做你需要的。

# git - Git：将代码修改拆分为多个提交

> ID：14775297
> 
> 赞同：-1
> 
> 时间：2013-02-08T14:58:11.247
> 
> 标签：git

不太了解使用 git。

我想知道我是否有一个文件并在那里进行了修改让我们说：

1.  我修改了第 10-20 行以添加功能 ONE。但是没有（忘记）做出承诺。
2.  我修改了第 50-60 行以添加功能 2。我想做出承诺。

如何将此更改拆分为两个提交？是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:00:12.820

您可以使用`git add -p`. 这会将更改分解为可以放入提交中的补丁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T15:01:03.687

这是可能的`git add -p`

看到[`this page`](http://johnkary.net/blog/git-add-p-the-most-powerful-git-feature-youre-not-using-yet/)一个很好的教程。

# php - 子构造函数不维护变量

> ID：14775298
> 
> 赞同：1
> 
> 时间：2013-02-08T14:58:12.737
> 
> 标签：php, class, constructor

我发现了一个扩展抽象父类的子类的奇怪问题。
我这样称呼我的孩子班：

```
$atts['ad_name'] = 'Test';
$atts['ad_type'] = $_REQUEST['ad_type'];
$add_ad = new wpam_ad_form( $atts ); 
```

我的子构造函数看起来像这样：

```
public function __construct( $atts ) {
    parent::__construct( $atts );
    echo "<br/><br/>New window child: " . $this->ad_new_window;
    echo "<br/>Ad Name child: " . $this->ad_name;
} 
```

我的（简化的）父构造函数如下所示：

```
$this->ad_type = $atts['ad_type'];
$this->ad_name = stripslashes_deep( $atts['ad_name'] );
$this->ad_content = stripslashes_deep( $atts['ad_content'] );
$this->ad_image = $atts['ad_image'];
$this->ad_url = $atts['ad_url'];
$this->ad_prehtml = stripslashes_deep( $atts['ad_prehtml'] );
$this->ad_posthtml = stripslashes_deep( $atts['ad_posthtml'] );
$this->ad_new_window = ( $atts['ad_new_window'] != "" ? $atts['ad_new_window'] : 1 );
$this->ad_active = ( $atts['ad_active'] != "" ? $atts['ad_active'] : 1 );
$this->ad_archived = 0;
$this->ad_checked = 0;

echo "<br/>New window parent: " . $this->ad_new_window;
echo "<br/>Ad name parent: " . $this->ad_name; 
```

这些回声的输出给了我：

```
New window parent: 1
Ad name parent: Test

New window child:
Ad Name child: 
```

我以前从未见过这种情况。这些值被正确地传递到子构造函数和父构造函数中。父构造函数正在正确设置值。然后在父构造函数运行后，子构造函数的 $this 属性中没有值。是什么导致值没有从父类返回到子类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:14:52.947

如果没有在父类中看到您的属性声明，很难说。但乍一看，这些属性可能已设置为`private`，这限制了它们对该类本身（父类）的访问/可见性，而不是任何扩展它的类都可以直接访问它们。

如果是这种情况，那么您的选择是将它们设置为`protected`或`public`，具体取决于您的需要。

有关这些关键字的更多信息，您可以查看[标题为“可见性”的文档](http://www.php.net/manual/en/language.oop5.visibility.php)部分。

# c# - 强制在 RadioButtonGroup 中更改样式？

> ID：14775304
> 
> 赞同：0
> 
> 时间：2013-02-08T14:58:37.377
> 
> 标签：c#, asp.net, css

我有一个 RadioButtonGroup，其 css 类是 Bootstrap 中的“收音机”。

它会导致我不想要一个名为边框崩溃的表属性：

![在此处输入图像描述](../Images/3e105c033a420ee0f47b46fe69aec813.png)

我尝试添加自己的风格来解决这个问题：

```
.radioButtonList
{
    border-collapse:separate;
} 
```

但这似乎没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:00:28.250

您可以覆盖 Bootstrap，它可能更具体，或者在级联中更进一步。只需添加`!important`

像这样：

```
.radioButtonList {
    border-collapse:separate !important;
} 
```

# c++ - 将变量参数数组/集合传递给 C++ 中的函数指针？

> ID：14775305
> 
> 赞同：0
> 
> 时间：2013-02-08T14:58:46.450
> 
> 标签：c++, c

如何在 C++ 中执行可变参数和 args？一个大问题是 C++ 强制类型，而我认为 python 不是

如果可能的话，我希望有一个也可以在 C 中工作的宏。

所以在python中我想做的是：

```
def f(*args):
    return sum(args)

def test_f(func,args):
    arr = []
    for y in args:
       arr.append(func(y,args))
    return arr

def main():
    test_f(f,[(range(1,x),range(2,x)) for x in range(10,100)]) 
```

我想测试一个带有可变参数的函数，或者更一般地说是动态数量的可变参数，有点像 Mathematica 中的 Manipulate / 但如果可能的话，使用可变数量的参数。

谢谢，

# mapquest - 如何使用 Javascript 在 MapQuest 地图上添加打印控件

> ID：14775307
> 
> 赞同：0
> 
> 时间：2013-02-08T14:58:56.350
> 
> 标签：mapquest

在地图任务网站中，他们的地图在菜单顶部有一个打印菜单项。我想在我的自定义地图任务地图上有相同的打印按钮。我检查了 JavaScript API，地图选项没有任何打印内容。

例如，我可以使用以下代码片段在地图上添加大缩放控件。

```
map.addControl(
               new MQA.LargeZoom(),
               new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT, new MQA.Size(5, 5))
); 
```

以下网址 [http://developer.mapquest.com/web/documentation/sdk/javascript/v7.0/api/MQA.LargeZoom.html中的 Javascript API 中没有 MQA.Print Control](http://developer.mapquest.com/web/documentation/sdk/javascript/v7.0/api/MQA.LargeZoom.html)

有谁知道如何使用 JavaScript 将打印控制添加到地图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:22:19.130

mapquest 中没有定义用于打印地图的控件。将打印按钮放置在页面中，并在单击按钮时使用以下 jquery 函数。

```
$('SelectorToPrint').printElement(); 
```

应该在特定元素中加载地图。这样您就可以只打印地图。

# ios - 带有圆角图像的自定义 UIProgressView

> ID：14775310
> 
> 赞同：2
> 
> 时间：2013-02-08T14:59:06.470
> 
> 标签：ios, objective-c, ios6, uiprogressview

我在自定义`UIProgressView`两个图像时遇到了困难。我在互联网上找到了很多有用的问题，但我的问题有点不同。也许以某种方式，我使用的图像在非角矩形上是圆角的；因此，`stretchableImageWithLeftCapWidth`在我的情况下，方法似乎没有帮助。当我拉伸图像时，由于图像的圆角存在一些空间，此[链接上发布了一个问题](https://stackoverflow.com/questions/7980891/uiprogressview-and-custom-track-and-progress-images-ios-5-properties)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:03:36.107

您将必须实现自定义`UiProgressView`并为您的进度视图使用以下代码，并添加用于填充和背景进度视图的图像，在我的情况下，它们是用于填充的**loaderBar.png**和用于背景的**timeLineBig.png 。**

**CustomProgressView.h**

```
#import <UIKit/UIKit.h>

@interface CustomProgressView : UIProgressView

@end 
```

**CustomProgressView.m**

```
#define fillOffsetX 2
#define fillOffsetTopY 2
#define fillOffsetBottomY 2

#import "CustomProgressView.h"

@implementation CustomProgressView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
 - (void)drawRect:(CGRect)rect {

 CGSize backgroundStretchPoints = {10, 10}, fillStretchPoints = {7, 7};

 // Initialize the stretchable images.
 UIImage *background = [[UIImage imageNamed:@"timelineBig.png"] stretchableImageWithLeftCapWidth:backgroundStretchPoints.width
 topCapHeight:backgroundStretchPoints.height];

 UIImage *fill = [[UIImage imageNamed:@"loaderBar.png"] stretchableImageWithLeftCapWidth:fillStretchPoints.width
 topCapHeight:fillStretchPoints.height];

 // Draw the background in the current rect
 [background drawInRect:rect];

 // Compute the max width in pixels for the fill.  Max width being how
 // wide the fill should be at 100% progress.
 NSInteger maxWidth = rect.size.width - (2 * fillOffsetX);

 // Compute the width for the current progress value, 0.0 - 1.0 corresponding
 // to 0% and 100% respectively.
 NSInteger curWidth = floor([self progress] * maxWidth);

 // Create the rectangle for our fill image accounting for the position offsets,
 // 1 in the X direction and 1, 3 on the top and bottom for the Y.
 CGRect fillRect = CGRectMake(rect.origin.x + fillOffsetX,
 rect.origin.y + fillOffsetTopY,
 curWidth,
 rect.size.height - fillOffsetBottomY);

 // Draw the fill
 [fill drawInRect:fillRect];
 }

@end 
```

最后，当你想使用自定义进度视图时，然后调用这样的东西......

```
self.customProgressView=[[CustomProgressView alloc] initWithFrame:CGRectMake(xValue, yValue, widthofProgressView, heightofProgressView)]; 
```

确保 根据您的要求为**xValue、yValue、widthofProgressView 和 heightofProgressView设置自定义值**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:06:27.450

如果您在拉伸图像时遇到问题，请使用调整大小`resizableImageWithCapInsets:`

```
UIImage *image = [baseImage resizableImageWithCapInsets:UIEdgeInsetsMake(5, 5, 5, 5) resizingMode:UIImageResizingModeStretch]; 
```

[您可以查看此链接](http://mobiledevelopertips.com/user-interface/ios-5-uiimage-and-resizableimagewithcapinsets.html)。

# c++ - 在 gdb for linux 中启用 memleak 选项

> ID：14775312
> 
> 赞同：7
> 
> 时间：2013-02-08T14:59:14.640
> 
> 标签：c++, linux, memory-leaks, gdb

我正在尝试查看导致内存泄漏的进程，并转储导致它的堆以查看问题所在。

我在 gdb 中使用哪个命令来设置内存泄漏并检查堆？

我试过：

```
(gdb) check -leaks

checkpoint: can't find fork function in inferior.

(gdb) help info heap

Undefined info command: "heap".  Try "help info".

(gdb) help info leaks 

Undefined info command: "leaks".  Try "help info". 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T15:18:01.667

正如人们指出的那样，Valgrind 是您的答案。通常，Valgrind 只会在程序执行结束时报告错误。您可以将 Valgrind 与 GDB ( `vgdb`) 链接，以便在程序运行期间在 GDB 下运行时转储 Valgrind 统计信息。

参考一个类似的问题：

[转储 Valgrind 报告的丢失内存的内容](https://stackoverflow.com/questions/12663283/dumping-contents-of-lost-memory-reported-by-valgrind)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:20:42.373

`info leaks`并且`info heap`是仅在 HP-UX 上的 gdb 中可用的命令（HP-UX gdb 是开源 GNU 调试器 gdb 的定制版本，在`The HP Wildebeest Debugger (WDB)`- [http://www.hp.com/go/wdb](http://www.hp.com/go/wdb)上调用 ）。在 Linux 上，您需要使用`valgrind`.

# r - R中一列中的小时和分钟

> ID：14775313
> 
> 赞同：4
> 
> 时间：2013-02-08T14:59:18.853
> 
> 标签：r

我有一个简单的数据框。我想从中添加另一列记录时间（小时和分钟，以 24 小时制）。然后，我将根据变量绘制此列。由于日期都是一样的，我只对时间感兴趣。这是我到目前为止所尝试的。

```
a <- c(1:6)
b <- c("05/12/2012 05:00","05/12/2012 06:55","05/12/2012 07:10",
       "05/12/2012 10:23", "05/12/2012 11:43","05/12/2012 13:04")
c <-c("0","0","0","1","1","1")
df1 <- data.frame(a,b,c,stringsAsFactors = FALSE)

a <- df1$a
b <- strptime(df1$b, "%d/%m/%Y %H:%M")
c <- as.numeric(df1$c)
hour <- as.numeric(format(b, "%H"))
min <- as.numeric(format(b, "%M"))
date <- format(b, "%x")
time <- hour + min

df2 <- data.frame(a, b, c, hour, min, date, time) 
```

有人建议我在[这里](https://stackoverflow.com/questions/14735689/subsetting-dataframe-by-day-according-to-most-non-zero-data)手动转换分钟和小时，方法是将数字分开，转换成相似的单位，然后添加。但是我很挣扎，因为早上 5 点只是被导入为 5。

如果有人能建议我如何正确地做到这一点，我将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:09:46.387

有许多日期和时间的转换工具，以及一整套可供使用的软件包。我喜欢`POSIXlt`在这种情况下使用，因为您只需从列表中提取所需的任何信息即可。

例如：

```
a <- c(1:6)
b <- c("05/12/2012 05:00","05/12/2012 06:55","05/12/2012 07:10",
       "05/12/2012 10:23", "05/12/2012 11:43","05/12/2012 13:04")
c <-c("0","0","0","1","1","1")
df1 <- data.frame(a,b,c,stringsAsFactors = FALSE)

df2 <- within(df1,{
  posb <- as.POSIXlt(b,format="%d/%m/%Y %H:%M")
  hours <- posb$hour
  mins <- posb$min
  dates <- format(posb, "%x")
  time <- format(posb, "%H:%M")
  posb <- NULL  # cleanup
}) 
```

这使 ：

```
> df2
  a                b c  time     dates mins hours
1 1 05/12/2012 05:00 0 05:00 12/5/2012    0     5
2 2 05/12/2012 06:55 0 06:55 12/5/2012   55     6
3 3 05/12/2012 07:10 0 07:10 12/5/2012   10     7
4 4 05/12/2012 10:23 1 10:23 12/5/2012   23    10
5 5 05/12/2012 11:43 1 11:43 12/5/2012   43    11
6 6 05/12/2012 13:04 1 13:04 12/5/2012    4    13 
```

有关更多信息，另请参阅：

*   `?POSIXlt`有关 POSIXt 类的更多信息
*   `?format`有关格式化选项的更多信息
*   `?strptime`有关格式化选项和转换为字符的更多信息
*   [`lubridate`替代](http://www.jstatsoft.org/v40/i03/paper)功能包
*   更多替代功能的[`timeDate`包](http://cran.r-project.org/web/packages/timeDate/)
*   ...

# playframework-2.0 - 如何在游戏框架中使用会话范围？

> ID：14775320
> 
> 赞同：1
> 
> 时间：2013-02-08T14:59:30.927
> 
> 标签：playframework-2.0

我想为播放框架实现一个身份验证系统。
来自官方文档：

> 由于 Session 只是一个 Cookie，它也只是一个 HTTP 标头，但 Play 提供了一个辅助方法来存储会话值：

好吧，您将内容存储在 cookie 中......
无论如何，我注意到 servlet 3.0 声明了比 pla 2.0 中当前使用的要好得多的新会话范围。
目前，所有会话信息都存储在 cookie 中：这意味着您只能存储最少的数据，例如 user.id，否则将会有大量的 http 流量。
Servlet 3.0 像 php 会话一样工作：只有一个 id 由系统自动存储在客户端中，而不是服务器中的所有会话数据。此外，针对 cookie 窃取攻击的每个请求都会重新生成 cookie。
我注意到 Spring 已经使用了这个规范“@scope(session)”，我认为这是游戏框架中最大的错误..（文档中的错误示例也不好）
它确实不是可接受的当前系统，太慢和不安全。

**有一种方法可以使用 servlet 3.0 会话范围，或者您是否打算在未来的版本中实现它？**

尊重尼古拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:59:09.267

**Sessions：**是的，这是事实，默认情况下，Play 的 session 仅存储在 cookie 范围内，我很确定这是出于某种目的。Play clean 实现旨在从最小的依赖项开始，因为它不仅旨在构建`common`具有强制使用 DB 的 Web 应用程序并且其他`typical`可用的东西，但是......有时您需要自己添加 2cc。

**身份验证/授权**：幸运的是，您不需要从头开始创建这些机制，很少有公共可用模块可以完成这项工作。我最喜欢的是Joscha Feth 的[Play Authenticate](https://github.com/joscha/play-authenticate) - 完整的堆栈，用于授权和身份验证，具有多语言支持、多提供商支持（Facebook、Twitter 等）、角色和权限（使用 Deadbolt2）等。

前段时间我还发布了基于 的示例，`PA`它演示了更好的会话处理，它（几乎）可以满足您的所有需求。它不会`sesId`在每个请求上刷新，但这只是很小的修改。你可以自己实现。此外，欢迎您发送更多想法以使会话更加安全，我已打开！

Source code is published in [2.0.4_sessions](https://github.com/biesior/play-authenticate/tree/2.0.4_sessions/samples/java/play-authenticate-usage) branch in my fork. Joscha is interested about pulling it to official PA samples, anyway I'd like to deliver finished solution, so - as I wrote you can join :)

# cocoa - bind:toObject:withKeyPath:options: 是单向绑定吗？

> ID：14775326
> 
> 赞同：9
> 
> 时间：2013-02-08T14:59:53.803
> 
> 标签：cocoa, binding, cocoa-bindings, nstextview

我有两个窗口：窗口 A 从 NIB 加载；窗口 B 是通过编程方式创建的。

两个窗口都有一个 NStextView：窗口 A 中的 textview 的属性字符串**使用 IB**`text`绑定到模型的属性；而窗口 B 中的 textview 的属性字符串使用方法绑定到模型的属性。**`text``-[NSObject bind:toObject:withKeyPath:options:]`**

 **```
[textview bind:@"attributedString"
      toObject:obj
   withKeyPath:@"text"
       options:nil]; 
```

这是奇怪的事情：Window B 中的 textview 确实绑定到`obj.text`，但 textview 中的更改从未更新为`obj.text`. 但是，如果我在窗口 A 的 textview 中进行了更改，则`obj.text`窗口 B 中的和 textview 也会相应更新。

所以我在想，该`-[NSObject bind:toObject:withKeyPath:options:]`方法仅适用于单向绑定。我在 Cocoa 文档中找不到明确的解释。有没有人有这个问题的经验？如何在代码中实现双向绑定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T02:20:04.960

Cocoa 绑定本质上是双向的，但某些行为（如文本字段的连续/实时更新）需要设置特定选项。在 IB 中，您需要确保选中“持续更新值”复选框。要以编程方式获得等效行为，您需要`options`在绑定上指定。这可能看起来像这样：

```
[textview bind: NSAttributedStringBinding 
      toObject: obj 
   withKeyPath: @"text" 
       options: (@{ 
                 NSContinuouslyUpdatesValueBindingOption : @YES })]; 
```

值得一提的是，在以编程方式设置绑定时，值得检查 IB 中的等效绑定并确保将所有相同的设置传递给编程绑定。例如，我在 IB 中看到“允许编辑多个值选择”、“有条件地设置可编辑”和“为不适用的键引发”选项默认情况下都会检查 NSTextView 的属性字符串绑定。这意味着我们的编程绑定应该*看起来*像：

```
[textview bind: NSAttributedStringBinding 
      toObject: obj 
   withKeyPath: @"text" 
       options: (@{ 
                 NSContinuouslyUpdatesValueBindingOption : @YES,
                 NSAllowsEditingMultipleValuesSelectionBindingOption : @YES,
                 NSConditionallySetsEditableBindingOption : @YES,
                 NSRaisesForNotApplicableKeysBindingOption : @YES })]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T07:50:04.650

是的，*bind: toObject: withKeyPath: options:*是一种方法，没有任何选项可以影响这一点。这与您在 .nib 文件中进行绑定不同。像往常一样，Apple 忘记在其文档中提及如此简单的事情。这里最简单的解决方案是在创建正向绑定的同时创建反向绑定。当您分配值时，这不会死循环您的代码。这是用户默认值的示例：

```
// two way binding of MyObject.myValue to user defaults
[NSUserDefaultsController.sharedUserDefaultsController.values bind: @"myValueInDefaults"
                                                          toObject: myObject
                                                       withKeyPath: @"myValue"
                                                           options: @{@"NSContinuouslyUpdatesValue":@YES}];

[myObject bind: @"myValue"
      toObject: NSUserDefaultsController.sharedUserDefaultsController
   withKeyPath: @"values.myValueInDefaults"
       options: @{@"NSContinuouslyUpdatesValue":@YES}]; 
```**

# html - 如何使复选框看起来像一个按钮并适合所有屏幕尺寸

> ID：14775345
> 
> 赞同：1
> 
> 时间：2013-02-08T15:00:39.233
> 
> 标签：html, css

我在下面有一个复选框：

```
foreach($options as $indivOption) {
   echo '<input type="checkbox" name="options[]" id="option-' . $indivOption . 
        '" value="' . $indivOption . '" /><label for="option-' . $indivOption . 
        '">' . $indivOption . '</label>';
} 
```

我的问题只是如何将复选框转换为看起来像一个按钮。我希望该设计适用于所有浏览器并适用于所有屏幕尺寸，但有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:05:31.907

您可以使用 html <label> 元素：

```
<label>Button<input type="checkbox"></label> 
```

然后你使用 CSS 来设置标签的样式并隐藏复选框（使用 position: absolute 和负的 top/left

```
label {
    overflow: hidden;
    display: block;
    background: red;
    ...
}

label input[type="checkbox"] {
    position: absolute;
    left: -9999px;
    top: -9999px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:25:25.250

你只需要玩弄填充。

# ruby-on-rails - Rails 中的多对多关系

> ID：14775346
> 
> 赞同：0
> 
> 时间：2013-02-08T15:00:40.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 Rails 3.2.11 中的两个模型之间创建多对多关系。

一个用户可以与许多事件相关联，反之亦然。

```
class User < ActiveRecord::Base
  include ActiveModel::ForbiddenAttributesProtection

  has_many :incident_participants, foreign_key: "participant_id"
  has_many :participated_incidents, through: :incident_participants

end

class Incident < ActiveRecord::Base
  include ActiveModel::ForbiddenAttributesProtection

  has_many :incident_participants, foreign_key: "participated_incident_id"
  has_many :participants, through: :incident_participants

end 
```

连接表：

```
class IncidentParticipant < ActiveRecord::Base
  include ActiveModel::ForbiddenAttributesProtection

  t.belongs_to :participant, class_name: "User"
  t.belongs_to :participated_incident, class_name: "Incident"
end 
```

事件参与者表

```
 create_table "incident_participants", :force => true do |t|
    t.integer  "participant_id"
    t.integer  "participated_incident_id"
    t.datetime "created_at",               :null => false
    t.datetime "updated_at",               :null => false
  end 
```

那么，为什么 Rails 没有得到这种关系呢？当我尝试在我的视图中执行 @incident.participants 时，我收到此错误：

> “在模型 IncidentParticipant 中找不到源关联 :participant 或 :participants。尝试 'has_many :participants, :through => :incident_participants, :source => '。它是其中之一吗？”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:02:08.750

尝试取出`t.belongs_to`并替换为`belongs_to`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:01:24.020

要创建多对多关联，您应该考虑创建关联表。也就是说，您将有两个指向排序临时表的 1-M 关系。例如：

在您的第一个模型中：

```
class Example < ActiveRecord::Base
  has_and_belongs_to_many :example2
end 
```

在您的第二个模型中：

```
class Example2 < ActiveRecord::Base
  has_and_belongs_to_many :example
end 
```

然后您需要编写迁移以将两个表链接在一起：

```
class CreateTableExamplesExamples2 < ActiveRecord::Migration
  create_table :examples_examples2 do |t|
    t.integer :example_id
    t.integer :example2_id
  end
end 
```

然后让 Rails 神奇地工作。查看[指南](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)以获取更多信息。

# c# - SubSonic (2.1) ExecuteTypedList 性能问题

> ID：14775351
> 
> 赞同：2
> 
> 时间：2013-02-08T15:00:54.180
> 
> 标签：c#, sql-server-2008, subsonic

我们正在使用 SubSonic 2.1 从我们的 SQL 数据库中获取信息。我注意到，当我们通过数据集执行存储过程时，信息会很快被拉回。当我们通过 ExecuteTypedList 执行存储过程时，需要 20-30 秒才能提取信息。独立存储过程每次需要4-5秒。我已经更改了对存储过程的调用，因此它根本不使用亚音速，它会在相同的 4-5 秒内将信息拉回。亚音速是否有任何原因会导致撤回信息的问题？查询本身只返回 1 行结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:21:34.270

好吧，我知道这`ExecuteTypedList`将使用反射来填充它创建的每个 .Net 对象，同时实现您的记录集。

如果您的记录类实现`IActiveRecord`或`IRecordBase`SubSonic 将使用此协定用数据填充每个实例，它应该比基于反射的实现快一些。

但是，如果您的结果集仅包含一行，我想这可能不是问题。

# tree - 三角形的二维范围搜索树

> ID：14775352
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:00:55.527
> 
> 标签：tree, implementation

我想实现 2D RANGE TREES 以在 O( logn^2 ) 中有效地搜索三角形内的给定点。

为了使事情更容易，我想搜索位于直角三角形中的给定点，其中两侧平行于 xy 轴对齐并且两侧相同。因此，ABC 的顶点坐标为 A(a,b) , B(a+d,b) , C(a,b+d) 并且它是一个直角三角形并且 AB,AC 平行于 X， Y轴分别。

我知道我可以使用 2D 范围树有效地做到这一点。（kd 树 O(sqrt(n)) 很慢，单独搜索每个点太慢）

谁能告诉我如何实现/解释算法 2D 范围树来测试哪些点位于三角形类型的上方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:49:41.953

请查阅[CGAL](http://www.cgal.org)库或此人的项目[代码](http://cgi.di.uoa.gr/~vfisikop/compgeom/Layered_Range_trees/)和[报告](http://arxiv.org/pdf/1103.4521v1.pdf)。

此外，[比赛](http://www.codechef.com/FEB13/problems/TRIQUERY)仍在进行中，请不要在比赛结束前在这里寻求帮助。

# ios - SQLite 比较日期时间

> ID：14775354
> 
> 赞同：1
> 
> 时间：2013-02-08T15:01:05.743
> 
> 标签：ios, sqlite, datetime

在 ios 应用程序中比较 sqlite3 中的日期时间字符串的最简单方法是什么。我以下列方式存储日期时间字符串。

```
NSDateFormatter* df=[[NSDateFormatter alloc] init];
    [df setDateFormat:@"yyyy-MM-dd HH:mm"];
    NSString* dtString=[df stringFromDate:[NSDate date]]; 
```

然后我将 dtString 插入表中。因此，在我想仅检索过去两天的所有行之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:09:33.610

sqlite3 不包含`DATETIME`类型，因此您需要考虑对其进行编码的方法。

如果您想在`WHERE`子句中使用日期列，那么您可以存储`time_t`返回的 from `gmtime(time(NULL))`（即现在的时间，自 UNIX 纪元以来），然后使用一些简单的子句来获取这些行：

```
... WHERE date >= ? 
```

并将其绑定`?`到`gmtime(time(NULL)) - 60**60*24*2`

编辑：如果您想完全保留在 Objective-C 中，则可以使用以下对象从`NSDate`对象中确定相同的日期值：

```
(time_t)[date timeIntervalSince1970] 
```

# javascript - 如何使用来自地址“Something.webpage.com”的输入并使用输入“something”

> ID：14775355
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:01:06.353
> 
> 标签：javascript, css, html

我不确定在谷歌上搜索什么来寻找帮助，所以我选择在这里写。

所以假设你有一个名为“isadouchebag.com”的网站，那么如果你写“Brian.isadouchebag.com”，它会在网站上说“Brian is a douchebag” - 我该怎么做才能接受输入“Brian " 并在我的页面上使用它来做某事，而无需对每个名称进行硬编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:04:35.460

在 javascript window.location.hostname 中会给你完整的域名：“Brian.isadouchebag.com”，然后你获取该字符串并解析它直到第一个“。” 你有你的名字。

您还必须将您的主机设置为接受通配符子域（*），以使每个子域都能正常工作（Brian.isadouchebag.com、bob.isadouchebag.com...）

# c# - 如何检查字符串是否包含单个出现的子字符串？

> ID：14775357
> 
> 赞同：6
> 
> 时间：2013-02-08T15:01:14.080
> 
> 标签：c#, string

我有这个：

```
string strings = "a b c d d e"; 
```

而且我需要类似的东西`string.Contains()`，但我不仅需要知道**字符串是否存在**（如果在字母上方），还**需要知道它是否只存在一次**。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T15:04:51.097

您可以使用`LastIndexOf(String)`and`IndexOf(String)`并验证返回的值是否相等。当然还要检查是否找到了字符串（即返回值不是-1）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T15:04:21.993

你可以使用 LINQ

```
int count = strings.Count(f => f == 'd'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:10:18.957

替代

```
if(Regex.Matches(input,Regex.Escape(pattern)).Count==1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-19T08:26:08.953

另一个简单的选择：

```
if(strings.Split(new [] { "a" }, StringSplitOptions.None).Length == 2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T15:21:16.387

试试下面...它会帮助你...

```
string strings = "a b c d d e";
string text ="a";
int count = 0;
int i = 0;
while ((i = strings.IndexOf(text, i)) != -1)
{
    i += text.Length;
    count++;
}
if(count == 0)
Console.WriteLine("String not Present");

if(count == 1)
Console.WriteLine("String Occured Only one time");

if(Count>1)
Console.WriteLine("String Occurance : " + count.Tostring()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T16:22:59.703

```
 string source = "a b c d d e";
    string search = "d";
    int i = source.IndexOf(search, 0);
    int j = source.IndexOf(search, i + search.Length);
    if (i == -1)
        Console.WriteLine("No match");
    else if (j == -1)
        Console.WriteLine("One match");   
    else
        Console.WriteLine("More match"); 
```

# java - 如何找到乔达时间的差异

> ID：14775362
> 
> 赞同：2
> 
> 时间：2013-02-08T15:01:23.850
> 
> 标签：java, jodatime

我正在尝试使用`Interval`Joda Time 类，但我无法使用它的构造函数。它不采用格式。

我正在尝试以`DateTime`格式从 mysql DB 中提取两个，`yyyy-MM-dd HH:mm:ss`并以格式检索它`String`。我正在尝试将其转换为日期格式，但间隔类无法采用日期格式。请帮助我应该使用什么？？？

```
 String text = "2011-10-02 18:48:05";
    String text2 = "2011-10-02 18:50:05";
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
try {
            Date olddate=sdf.parse(text);
            Date newdate=sdf.parse(text2);
            System.out.println(olddate);
            System.out.println(newdate);
//            Interval interval = new Interval(olddate, newdate);

        } catch (ParseException ex) {
            JOptionPane.showMessageDialog(null, "Error at Timestamp subtract Format function Dategenerator" + ex.getMessage());

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:05:51.967

不要使用`java.util.Date`，而是 Joda Time 的`org.joda.time.DateTime`。

对于解析使用 Joda Time 的`org.joda.time.format.DateTimeFormat`.

那应该工作：

```
 String text = "2011-10-02 18:48:05";
    String text2 = "2011-10-02 18:50:05";
    DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss");
    DateTime oldDate = formatter.parseDateTime(text);
    DateTime newDate = formatter.parseDateTime(text2);
    System.out.println(oldDate);
    System.out.println(newDate);
    Interval interval = new Interval(oldDate, newDate);
    System.out.println(interval); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:25:32.537

我能够在 joda 时间使用此代码获得分钟差异：

```
String text = "2011-10-02 15:48:05";
        String text2 = "2011-10-02 18:52:10";
        DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss");
        DateTime oldDate = formatter.parseDateTime(text);
        DateTime newDate = formatter.parseDateTime(text2);
        System.out.println(oldDate);
        System.out.println(newDate);
        Interval interval = new Interval(oldDate, newDate);        
        System.out.println(interval.toDuration().toPeriod().getHours()*60+  interval.toDuration().toPeriod().getMinutes()); 
```

# ios - 使用 Facebook for iOS SDK 3.1 如何发布到朋友的时间线避免不推荐使用的标题

> ID：14775366
> 
> 赞同：3
> 
> 时间：2013-02-08T15:01:32.657
> 
> 标签：ios, facebook, publish, friend, facebook-timeline

鉴于 Facebook 刚刚完成了在其路线图完成更改页面上发布的“删除通过 Graph API 发布到朋友墙的功能”。

显然是由于一些滥用

[https://developers.facebook.com/blog/post/2012/10/10/growth-quality-apps-with-open-graph/](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)

在他们的开发人员网站上发布的教程“发布到 Feed”中推荐的方法现在仅限于使用 graphPath“me/feed”发布到您自己的时间线。

这种发展排除了其他堆栈溢出贡献者建议的好方法。

因此，Henry Zhang 和其他人推荐了 Feed Dialog，其已弃用的标题发布在

[http://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/](http://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)

所以 Facebook 在“第 2 步：添加向后兼容性标头”中告诉您

甚至他们发布的游戏教程也使用了已弃用的标头。但是，不推荐使用的标头不能与新的 FacebookSDK 结合使用。

也许我固执地想要坚持当前的 SDK 版本，但有没有人成功地从 iOS 发布到朋友的时间线，只导入 FacebookSDK 3.1。Facebook 建议使用已弃用的代码构建应用程序，这让我感到非常惊讶，但我似乎找不到任何其他方法来做到这一点。3.1 SDK的其他部分运行良好，我不想把婴儿和水一起扔出去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:52:24.223

On reading the summary information in the Facebook.h file, I have come to realize that it imports FacebookSDK.h which picks up the 3.1 SDK interfaces I had implemented. With that knowledge and some careful editing from the feed dialog example I now can send a message to a friend's timeline alongside the 3.1 elements. I still look forward to the next release and getting everything in one SDK. Thanks.

# html - 页面中间的一个框？

> ID：14775367
> 
> 赞同：0
> 
> 时间：2013-02-08T15:01:34.230
> 
> 标签：html, css

我想用css在窗口中间放一个框，但它不起作用。例如，html 元素的高度似乎不是 100%。

```
<!DOCTYPE HTML>

<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Box</title>

        <style type="text/css">
            html {
                width: 100%;
                height: 100%;
                display: table-cell;
                vertical-align: middle;
            }
            body {
                margin: auto;
                width: 300px;
                height: 300px;
                border: 1px solid black;
            }
        </style>

    </head>

    <body>
        box
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:04:57.087

弄乱 html 和 body 使其显示不是一个好主意：table-cell 或其他东西

相反，请尝试以下代码：

```
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Box</title>

        <style type="text/css">
            html {
                width: 100%;
                height: 100%;
            }
            div {
                width: 300px;
                height: 300px;
                position: absolute;
                left: 50%;
                top: 50%;
                margin: -150px 0 0 -150px;
                border: 1px solid black;
            }
        </style>

    </head>

    <body>
        <div>box</div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:05:15.967

尝试将框包含在`div`元素内。调整大小`body`将不起作用。您应该使用以下代码：

```
<body>
    <div id="box">box</div>
</body> 
```

然后你的 CSS 应该是这样的：

```
#box {
    position: fixed;
    width: 300px;
    height: 300px;
    top: 50%;
    left: 50%;
    margin: -150px 0 0 -150px;
    border: 1px solid #000;
} 
```

你可以在这里看到一个[**jsFiddle 演示**](http://jsfiddle.net/9cZas/)。

# python - return 语句速度慢

> ID：14775372
> 
> 赞同：3
> 
> 时间：2013-02-08T15:01:47.617
> 
> 标签：python, performance, return, cython

我有这个 cython 代码只是为了测试：

```
cimport cython

cpdef loop(int k):
    return real_loop(k)

@cython.cdivision
cdef real_loop(int k):
    cdef int i
    cdef float a
    for i in xrange(k):
        a = i
        a = a**2 / (a + 1)
    return a 
```

我用这样的脚本测试了这个 cython 代码和纯 python 中的相同代码之间的速度差异：

```
import mymodule

print(mymodule.loop(100000)) 
```

我的速度快了 80 倍。但是如果我删除 cython 代码中的两个 return 语句，我会快 800-900 倍。为什么 ？

另一件事是，如果我在旧的 ACER Aspire ONE 笔记本上运行这段代码（返回），我的速度会快 700 倍，而在家里的新台式 i7 PC 上，速度会快 80 倍。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T08:40:02.703

我用以下代码测试了你的问题：

```
#cython: wraparound=False
#cython: boundscheck=False
#cython: cdivision=True
#cython: nonecheck=False
#cython: profile=False

def loop(int k):
 return real_loop(k)

def loop2(int k):
 cdef float a
 real_loop2(k, &a)
 return a

def loop3(int k):
    real_loop3(k)
    return None

def loop4(int k):
    return real_loop4(k)

def loop5(int k):
 cdef float a
 real_loop5(k, &a)
 return a

cdef float real_loop(int k):
    cdef int i
    cdef float a
    a = 0.
    for i in range(k):
        a += a**2 / (a + 1)
    return a

cdef void real_loop2(int k, float *a):
    cdef int i
    a[0] = 0.
    for i in range(k):
        a[0] += a[0]**2 / (a[0] + 1)

cdef void real_loop3(int k):
    cdef int i
    cdef float a
    a = 0.
    for i in range(k):
        a += a**2 / (a + 1)

cdef float real_loop4(int k):
    cdef int i
    cdef float a
    a = 0.
    for i in range(k):
        a += a*a / (a + 1)
    return a

cdef void real_loop5(int k, float *a):
    cdef int i
    a[0] = 0.
    for i in range(k):
        a[0] += a[0]*a[0] / (a[0] + 1) 
```

where`real_loop()`接近你的函数，修改后的公式，`a`因为原来的公式看起来很奇怪。

函数`real_loop2()`不返回任何值，只是`a`通过引用更新。

函数`real_loop3()`没有返回任何值。

检查生成的`C`代码`real_loop3()`可以看到循环在那里，并且代码被调用......但我和@dmytro有相同的结论，改变`k`不会显着改变时间......所以必须有一点我在这里失踪了。

从下面的时间我们可以说这`return`不是瓶颈，因为`real_loop2()`和`real_loop5()`have 不返回任何值，它们的性能分别与`real_loop()`和相同。`real_loop4()`

```
In [2]: timeit _stack.loop(100000)
1000 loops, best of 3: 1.71 ms per loop

In [3]: timeit _stack.loop2(100000)
1000 loops, best of 3: 1.69 ms per loop

In [4]: timeit _stack.loop3(100000)
10000000 loops, best of 3: 78.5 ns per loop

In [5]: timeit _stack.loop4(100000)
1000 loops, best of 3: 913 µs per loop

In [6]: timeit _stack.loop5(100000)
1000 loops, best of 3: 979 µs per loop 
```

请注意 ~2X 的加速更改`a**2`为`a*a`，因为需要在循环内`a**2`调用函数。`powf()`

# python - 从python列表中的符号解析单词

> ID：14775379
> 
> 赞同：0
> 
> 时间：2013-02-08T15:02:06.220
> 
> 标签：python, list, parsing, symbols, words

我必须从单词数据集中训练语言模型。为此，我只需要在一列中排列所有文本，因为这是模型工作的唯一方式。到目前为止，我可以根据需要使用 Python 将文档分成一列，而不会出现任何问题。

例如：原始文件

> Zomer, 1951
> De wereld bestond uit het wazige blauw van een wolkenloze zomerhemel, het goudgroen van koel, geruststellend naaldbos en het lijnrechte wit van de betonnen weg, die nieuw was, hij stond nog op geen enkele kaart。

按要求提供文件

```
Zomer, 
1951.
De 
wereld  
bestond 
uit  
het  
wazige 
blauw  
van  
een 
wolkenloze   
zomerhemel, 
het            
goudgroen 
van  
koel, 
geruststellend  
naaldbos 
en   
het      
lijnrechte     
wit   
van  
de    
betonnen    
weg,  
die 
nieuw    
was,  
hij  
stond   
nog   
op      
geen  
enkele  
kaart. 
```

当我尝试将符号（逗号、冒号、分号等）放入新行并在每个句号 (.) 后包含一个额外的空格时，问题就开始了，例如：

```
Zomer
, 
1951
. 

De 
wereld 
```

我还没有找到合适的方法来做到这一点。到目前为止，我已经尝试过使用`.split()`和`.find()`等函数的不同方法，但没有任何积极的结果。打开文件后：

```
 fileHandle = open("C:\Language Model\Corpora\Computing Clients 3.txt",'r') 
```

我尝试过使用循环和条件，但没有任何效果。到现在为止得到的所有结果是：

```
 AttributeError: 'list' object has no attribute 'find' 
```

我知道我可能遗漏了一些东西，这就是为什么我要求您提供宝贵的帮助，因为文件非常大，知道 Python 可以为我完成手动操作是没有用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:00:46.473

如果你的文件名是**paragraph.txt**那么

> f = open('paragraph.txt', 'r')
> 
> 话= []
> 
> 行 = f.readlines()
> 
> 对于行中的行：
> 
> ```
>  words.extend(line.split()) 
> ```

上面的行列出了所有单词

而这些都是要删除的。并且，从那些话

> 对于我在范围内（len（words））：
> 
> ```
>  words[i] = words[i].replace('.' ,'')
> 
>     words[i] = words[i].replace(',' ,'')
> 
>     #here you can add a line to remove some other character 
> ```

用于打印文字：

> 言归正传：
> 
> ```
>  print(word) 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:11:36.243

如果您确保标点符号与带有空格的文本分开，我认为您可以实现您想要的。正则表达式在任何非字母数字字符之前添加一个空格，因此它可以`split`与任何前面的单词分开。

```
>>> import re
>>> text = "Zomer, 1951 De wereld bestond uit het wazige blauw van een wolkenloze zomerhemel, het goudgroen van koel, geruststellend naaldbos en het lijnrechte wit van de betonnen weg, die nieuw was, hij stond nog op geen enkele kaart."
>>> text2 = re.sub(r'([^a-zA-Z0-9-]+)',r' \1',text)
>>> text2
'Zomer , 1951  De  wereld  bestond  uit  het  wazige  blauw  van  een  wolkenloze  zomerhemel , het  goudgroen  van  koel , geruststellend  naaldbos  en  het  lijnrechte  wit  van  de  betonnen  weg , die  nieuw  was , hij  stond  nog  op  geen  enkele  kaart .'
>>> text2.split()
['Zomer',                                                                       
 ',',                                                                           
 '1951',                                                                        
 'De',                                                                          
 'wereld',
 'bestond',
 'uit',
 'het',
 'wazige',
 'blauw',
 'van',
 'een',
 'wolkenloze',
 'zomerhemel',
 ',',
 'het',
 'goudgroen',
 'van',
 'koel',
 ',',
 'geruststellend',
 'naaldbos',
 'en',
 'het',
 'lijnrechte',
 'wit',
 'van',
 'de',
 'betonnen',
 'weg',
 ',',
 'die',
 'nieuw',
 'was',
 ',',
 'hij',
 'stond',
 'nog',
 'op',
 'geen',
 'enkele',
 'kaart',
 '.'] 
```

# powershell - Powershell - 根据 dropdown.text 值获取广告用户信息

> ID：14775384
> 
> 赞同：0
> 
> 时间：2013-02-08T15:02:15.767
> 
> 标签：powershell, drop-down-menu, active-directory, ldap

各位，

我已尽力在单击按钮时处理 LDAP 查询，但我可以让 dropdown2.text 搜索名称，而不是输入完整名称，例如“smith, peter”。

我想要的是，如果我在“经理”字段中输入任何名字或姓氏，单击按钮将搜索并返回 Active Directory 事件中的所有相应值（如果它是名称或姓氏）。我不远，但我找不到我的错误在哪里

```
function GenerateForm {

set-Location c:\
add-PSSnapin  quest.activeroles.admanagement

[reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null

$form1 = New-Object System.Windows.Forms.Form
$searchldap = New-Object System.Windows.Forms.Button
$DropDownLabel = new-object System.Windows.Forms.Label
$DropDownLabel2 = new-object System.Windows.Forms.Label
$DropDown = new-object System.Windows.Forms.ComboBox
$DropDown2 = new-object System.Windows.Forms.ComboBox

#Handler 
$handler_searchldap_click= 
{
    $manager = ""
    $dropdown2.items.clear()
    $manager = get-aduser  -f {name -like $dropdown2.text}
    foreach ($thing in $manager){
        $useraccountname = $thing.name
        $DropDown2.Items.Add($useraccountname) | Out-Null
    }
}

$InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState

$OnLoadForm_StateCorrection=
{#Correct the initial state of the form to prevent the .Net maximized form issue
    $form1.WindowState = $InitialFormWindowState
}

#----------------------------------------------
#region Generated Form Code
$form1.Text = "User Creation software"
$form1.Name = "form1"
$form1.DataBindings.DefaultDataSourceUpdateMode = 0
$System_Drawing_Size = New-Object System.Drawing.Size
$System_Drawing_Size.Width = 400
$System_Drawing_Size.Height = 200
$form1.ClientSize = $System_Drawing_Size

$DropDownArray = "Site1" , "Site2" , "Site3"

$DropDown2.Location = new-object System.Drawing.Size(125,80)
$DropDown2.Size = new-object System.Drawing.Size(150,27)
$dropdown2.DataBindings.DefaultDataSourceUpdateMode = 0
$dropdown2.TabIndex = 5
$dropdown2.Name = "dropdown2"
$DropDown2.add_TextUpdate({ Write-Host "TextUpdate. Updated text is: $($Dropdown2.Text)" })
$Form1.Controls.Add($DropDown2)

$DropDownLabel2 = new-object System.Windows.Forms.Label
$DropDownLabel2.Location = new-object System.Drawing.Size(50,80)
$DropDownLabel2.size = new-object System.Drawing.Size(50,27)
$DropDownLabel2.Text = "Manager:"
$Form1.Controls.Add($DropDownLabel2)

$DropDown.Location = new-object System.Drawing.Size(125,55)
$DropDown.Size = new-object System.Drawing.Size(150,27)
$dropdown.DataBindings.DefaultDataSourceUpdateMode = 0
$dropdown.TabIndex = 4
$dropdown.Name = "dropdown1"

$DropDownLabel = new-object System.Windows.Forms.Label
$DropDownLabel.Location = new-object System.Drawing.Size(50,58)
$DropDownLabel.size = new-object System.Drawing.Size(50,27)
$DropDownLabel.Text = "Location:"

$Form1.Controls.Add($DropDown)
$Form1.Controls.Add($DropDownLabel)

ForEach ($Item in $DropDownArray) {
$DropDown.Items.Add($Item) | Out-Null
}

###Button section

$searchldap.Location = New-Object System.Drawing.Size(275,80)
$searchldap.Size = New-Object System.Drawing.Size(100,20)
$searchldap.Text = "Search"
$searchldap.Add_Click($handler_searchldap_click)

$Form1.Controls.Add($searchldap)

#Save the initial state of the form
$InitialFormWindowState = $form1.WindowState
#Init the OnLoad event to correct the initial state of the form
$form1.add_Load($OnLoadForm_StateCorrection)
#Show the Form
$form1.ShowDialog()| Out-Null
} #end of function
GenerateForm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:21:04.917

试试这个：

```
$filter = [scriptblock]::Create("Name -like '*$($dropdown2.text)*'")
$manager = get-aduser  -f $filter 
```

Powershell 在将过滤器脚本块中使用的局部变量传递给 DC（通过 AD 网关服务）之前不会扩展它们。要解决这个问题，请从可扩展字符串创建过滤器脚本块

# javascript - jquery页面事件顺序

> ID：14775386
> 
> 赞同：0
> 
> 时间：2013-02-08T15:02:17.607
> 
> 标签：javascript, jquery, document-ready, dynatree

我正在使用动态树 jQuery 插件。我已经向使用内置函数检索的每个节点添加了一些数据，这工作正常。

```
 $(document).ready(function () {
     // Loads tree
     $("#TreeManGrp").dynatree({
         initAjax: {
             url: "/Terminals/Refresh/"
         },
         onActivate: function (node) {
             if (node.data.href) {
                 window.open(node.data.href, "_self");
             }
         },
         persist: true,
         noLink: false,
         fx: {
             height: "toggle",
             duration: 200
         },

         success: function (node) {
             alert("Done");
         }

     });
 }); 
```

当用户点击一个节点时，它会重新加载页面，并且被点击的节点被赋予一个活跃的标志。

Dyna Tree 有这个功能来获取活动节点

```
var node = $("#TreeManGrp").dynatree("getActiveNode"); 
```

我想在页面加载时获取活动节点，所以将其卡在`document.ready`. 问题似乎是，当函数在文档就绪中运行时，活动节点实际上并未设置为活动状态。

我做了一些研究，`$(window).load(function () {`打算在 之后加载`document.ready`，但节点仍然始终为空。

如果我`getActiveNode`点击一个按钮就可以了，因为我假设动态树已经完成了它的部分并将节点设置为活动。

有任何想法吗？

# c# - 无法使用 Eazfuscator.NET 解码堆栈跟踪

> ID：14775393
> 
> 赞同：1
> 
> 时间：2013-02-08T15:02:52.960
> 
> 标签：c#, visual-studio-2010, .net-4.0, obfuscation, eazfuscator

我们使用 Eazfuscator.NET 3.3 来混淆我们的代码。但是，在将这一行添加到我们希望加密的 dll 的 AssemblyInfo.cs 文件后，我们仍然无法使用他们帮助建议的密码来解码堆栈跟踪：

```
[assembly: Obfuscation(Feature="encrypt symbol names with PASSWORD", Exclude=false)] 
```

有没有人使用 Eazfuscator.NET 成功解码堆栈跟踪，谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:58:18.767

啊，问题是由于一个错字。原来的属性读

```
[assembly: Obfuscation(Feature="encrypt symbol names with PASSWORD", Exclude=false)] 
```

应该是什么时候

```
[assembly: Obfuscation(Feature="encrypt symbol names with password PASSWORD", Exclude=false)] 
```

# mysql - 在 MySQL 中使用连接查询链接表

> ID：14775395
> 
> 赞同：3
> 
> 时间：2013-02-08T15:02:54.953
> 
> 标签：mysql, sql, join

我的架构如下：[http ://acookson.org/wp-content/uploads/bookings.png](http://acookson.org/wp-content/uploads/bookings.png)

![在此处输入图像描述](../Images/424c13e758f79892a4cf1d1f78b562fa.png)

我正在尝试使用连接来提取唯一记录。假设 'bob' 在 '2013-02-05 13:50:01' 进行了预订，booking.id=6。如何查询、加入和搜索课程表中的唯一记录？

我的表中填充了一些数据：

```
mysql> SELECT * from user; 
+----+--------+-----------------+
| id | name   | email           |
+----+--------+-----------------+
|  1 | bob    | bob@spam.com    |
|  3 | sarah  | sj@global.com   |
|  4 | phil   | pj2@arpanet.com |
|  5 | freda  | freda@gmail.com |
|  6 | Sash   | s@yahoo.com     |
|  7 | Glen   | glen@global.com |
|  8 | Walter | w@arpanet.com   |
+----+--------+-----------------+
7 rows in set (0.00 sec)

mysql> SELECT * from booking; 
+----+---------------------+---------+
| id | date                | user_id |
+----+---------------------+---------+
|  1 | 2013-02-08 12:28:24 |       1 |
|  4 | 2013-02-07 12:42:02 |       3 |
|  5 | 2013-02-05 12:42:46 |       4 |
|  6 | 2013-02-05 13:50:01 |       1 |
|  7 | 2013-02-01 13:50:01 |       3 |
|  8 | 2013-02-06 13:50:01 |       3 |
|  9 | 2013-01-29 13:50:01 |       4 |
+----+---------------------+---------+
7 rows in set (0.00 sec)

mysql> select * from lesson;
+----+-----------------------------+---------------------+---------------------+
| id | name                        | start_time          | end_time            |
+----+-----------------------------+---------------------+---------------------+
|  2 | CBT course                  | 2013-02-08 12:35:36 | 2013-02-08 13:35:36 |
|  3 | CBT course                  | 2013-02-15 11:59:44 | 2013-02-15 12:59:44 |
|  4 | Advanced Motorcyling module | 2013-02-15 12:04:29 | 2013-02-15 13:04:29 |
|  5 | CBT course                  | 2013-02-15 12:14:27 | 2013-02-15 13:14:27 |
|  6 | ABC course                  | 2013-02-13 13:28:13 | 2013-02-13 14:28:13 |
|  7 | LKU course                  | 2013-02-11 13:28:13 | 2013-02-11 14:28:13 |
|  8 | ERT starter course          | 2013-02-10 13:28:13 | 2013-02-10 14:28:13 |
+----+-----------------------------+---------------------+---------------------+
7 rows in set (0.00 sec) 
```

我的

```
课程预订
```

表的定义是为了减少冗余，我试图（间接地）查询这个表以返回结果。

我的查询看起来像：

```
SELECT * from user as u
JOIN booking AS b ON b.id = u.id
JOIN lesson_booking AS lb ON b.id = lb.booking_id 
JOIN lesson AS l ON lb.lesson_id = l.id 
WHERE u.name = 'bob';
Empty set (0.00 sec) 
```

但这不会返回任何结果。我对 MySQL 非常了解，因此正在寻找一些关于如何真正查询此模式的示例。

如果你能给我提供几个（三个会做 - 不同的）我如何查询这个数据集的例子，那么这将是一种教育 - 我希望！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:05:58.857

您当前查询的问题是您正在加入来自预订`ID`的用户，这是错误的。`ID`它应该是`ID`来自`user_ID`预订的用户：

```
SELECT  a.*, b.*, c.*, d.*
FROM    booking a
        INNER JOIN user b
            ON a.user_ID = b.id
        INNER JOIN lesson_booking c
            ON a.id = c.booking_ID
        INNER JOIN lesson d
            ON c.lesson_ID = d.ID
WHERE   b.name = 'bob' 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:04:26.860

你很接近——看看你在预订时的加入——使用 user_id 而不是 id。它不应该是 b.id = u.id（这会将您的用户 ID 连接到您的预订 ID），而是 b.user_id = u.id：

```
SELECT * 
FROM user as u
   JOIN booking AS b ON b.user_id = u.id
   JOIN lesson_booking AS lb ON b.id = lb.booking_id 
   JOIN lesson AS l ON lb.lesson_id = l.id 
WHERE u.name = 'bob'; 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:12:51.993

你也可以像

```
select * from table1 a, table2 b 
where a.id = b.id 
```

通过这种方式，您可以链接每个具有关系的表

# visual-studio - Visual Studio Python 工具插件命令行：将“%09”作为字符串传递，而不是将其解释为制表符

> ID：14775397
> 
> 赞同：1
> 
> 时间：2013-02-08T15:02:58.067
> 
> 标签：visual-studio, command-line, tabs

我在 Visual Studio 2010 调试器中使用 Python 工具插件（顺便说一句，这太棒了）。我将命令行参数设置为“BON7%09/13”，我希望它作为字符串传入。现在visual studio告诉我我有两个命令行参数，而不是一个：“BON7”和“/13”。这是因为 %09 是选项卡的 ascii 代码，它正在转换字符。但我不想要这种转换。我该如何阻止它？我尝试了所有常见的转义（字符串周围的单引号，字符串周围的双引号，％前面的反斜杠），但这些都没有帮助。如何让 Visual Studio 将该命令行 arg 视为纯文本？对于它的价值，当我在没有 Visual Studio 的情况下从命令行运行时，它不会转换 %09。此外，我在 C# 中尝试了同样的事情，但它在那里工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:04:55.430

您可以尝试使用`%3709`which if used as you described should create的变通方法`%09`。

# asp.net-mvc-3 - 为什么不是我的列表 排序工作？

> ID：14775399
> 
> 赞同：0
> 
> 时间：2013-02-08T15:03:04.463
> 
> 标签：asp.net-mvc-3, list, sorting

我有一个列表，我需要在处理它之前按日期开始。这是父记录的子记录

```
 public class DayRequested
 {
    public int RequestId { set; get; }
    public string DateOfLeave { get; set; }

    public static int CompareDateOfLeave(DayRequested d1, DayRequested d2)
    {
        return d1.DateOfLeave.CompareTo(d2.DateOfLeave);
    }
 } 
```

在我的控制器中，我首先对其进行排序，然后再对其进行处理。以下是我尝试过的所有方法。请注意，当我第一次尝试时，未注释的那个起作用了。这些都没有改变列表的顺序。

```
 //List<DayRequested> requestedDays = requestedDaysIn.OrderBy(o => o.DateOfLeave).ToList();

        requestedDays = requestedDays.OrderBy(o => o.DateOfLeave).ToList();

        //Comparison<DayRequested> comp = new Comparison<DayRequested>(DayRequested.CompareDateOfLeave);
        //requestedDays.Sort(comp);

        //requestedDays.Sort(delegate(DayRequested a, DayRequested b)
        //{
        //    return a.DateOfLeave.CompareTo(b.DateOfLeave);
        //});

        DateTime nextFirstDay = Convert.ToDateTime(requestedDays.First().DateOfLeave); 
```

在我的列表中，我有：

```
1, 07/10/2013, other info here
1, 07/10/2013, other info here
1, 07/12/2013, other info here
1, 07/12/2013, other info here
1, 07/08/2013, other info here
1, 07/08/2013, other info here 
```

我可能做错了什么？我需要按日期顺序列出的列表，以便我可以按正确的顺序正确运行一些后端进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:08:47.853

您`DateOfLeave`的属性是一个字符串，并且可能以这种形式存储：

```
7/10/2013
7/8/2013
7/12/2013 
```

如果将它们按字符串排序，则 7/10 会在 7/8 之前，因为 '1' 小于 '8'。要解决此问题，请`DateTime`在进行排序之前将您的属性设为 a 或将其转换。

# django - Django：使用modelform时，如何在admin中添加一个链接到另一个模型管理员的字段？

> ID：14775402
> 
> 赞同：0
> 
> 时间：2013-02-08T15:03:08.993
> 
> 标签：django, admin, modelform

在表格管理中，我想提供直接链接来编辑我记录的外键中的模型。当我使用 reverseurl 明确定义管理字段时，它工作正常，如下所示：

```
class MediaInline(admin.TabularInline):
  fieldsets = [
    (None, {'fields': ['media', 'media_id',...
  ]
  readonly_fields = ['media_id']
  ...

  def media_id(self, object):
      url = reverse('admin:%s_%s_change' %(object._meta.app_label,  'medialinks'),  args=[object.media.id] )
      return u'<a href="%s">%s</a>' %(url,  object.media.id)
  media_id.allow_tags = True 
```

但是，现在我想使用表格定义表格，但我没有找到如何做到这一点。我将 HTMl 标记作为字符串，但我没有找到将其视为 HTML 标记的方法。

顺便说一句，我需要一个表单而不是明确定义的原因是我希望能够在此表格列表中订购另一个下拉字段，而我发现如何做到这一点的唯一方法是在表单设置中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:28:58.347

模型不应阻止您这样做。

确保不要移动此代码。您不能将字段覆盖代码放在 ModelForm 中。

您使用 ModelForm*并*在 ModelAdmin (TabularInline) 中有覆盖。

# django - 访问 TastyPie 资源上的“服务器端”模型方法

> ID：14775409
> 
> 赞同：0
> 
> 时间：2013-02-08T15:03:37.903
> 
> 标签：django, django-models, tastypie

我得到了这个资源，它工作正常并列出了员工的所有属性。

```
class EmployeeResource(ModelResource):
    journey = fields.ForeignKey(WorkJourney, 'work_journey')
    class Meta:
        queryset = Employee.objects.all()
        resource_name = 'employee'
        authentication = BasicAuthentication() 
```

我有一个写在员工模型类上的方法，它列出了员工的电话号码（可怕的代码 imo。，我认为它应该是一个属性，但我无法更改它）。

```
@property
def phones(self):
    return u' / '.join([self.personal_phones or u'', self.institutional_phones or u'']) 
```

重点是编写一个 Resource 方法来访问该 Model 方法并使用 Employee 的属性列出结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:03:30.643

您应该能够将其创建为资源中的只读字段：

```
phones = fields.CharField(attribute='phones', readonly=True) 
```

如果您不设置`readonly=True`，Tastypie 将尝试在插入/更新时设置该字段的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T18:49:32.443

如果您的手机型号如下所示：

```
class Phone(models.Model)
     employee = models.ForeignKey(Employee, related_name=phones) 
```

然后，您可以使用电话在 EmployeeResource ToManyRelation 中定义来获取员工的所有电话列表：

```
class EmployeeResource(ModelResource):
   phones = fields.ToManyField(PhoneResource, 'phones', full=True)
class Meta:
    queryset = Employee.objects.all()
    resource_name = 'employee'
    authentication = BasicAuthentication() 
```

此外，通过覆盖脱水方法，您可以自定义将发送到客户端的数据。

自定义视图是发送自定义数据的另一种解决方案。

# c++ - rethrow_exception 真的可以抛出同一个异常对象，而不是一个副本吗？

> ID：14775411
> 
> 赞同：9
> 
> 时间：2013-02-08T15:03:42.357
> 
> 标签：c++, c++11, language-lawyer

在检查做什么`exception_ptr`时，C++11 标准说 (18.8.5/7)：

> 在引用相同异常对象的 exception_ptr 对象上使用 rethrow_exception 不应引入数据竞争。[注意：如果 rethrow_exception 重新抛出相同的异常对象（而不是副本），则对该重新抛出的异常对象的并发访问可能会引入数据竞争......

我没有发现这个奇怪的“注意”适用的情况，因为描述的效果`rethrow_exception`是“抛出：p 引用的异常对象”但是 15.1/3，描述一般异常抛出过程要求“抛出异常副本- 初始化一个临时对象，称为异常对象。”

奇怪的注释意味着 rethrow_exception 跳过了这个复制初始化。但这真的可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:12:12.663

当您说`throw x;`时，异常对象具有与相同的类型`x`但是是副本。

当您说`std::rethrow_exception(p);`时，异常对象是指针引用的实际对象，不会再进行复制。

因此，多个线程同时重新抛出*相同*的异常指针（您可以复制它！），然后它们都具有对*同一个*对象的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:52:16.377

是的，这看起来像是标准的缺陷。对于重新抛出的 throw 表达式，即`throw;`没有操作数，15.1p8 说：

> 没有操作数的*throw 表达式*重新抛出当前处理的异常。使用现有的异常对象重新激活异常；没有创建新的异常对象。[...]

那是：

```
#include <exception>
#include <cassert>
int main() {
   std::exception *p = nullptr;
   try {
      try {
         throw std::exception();
      } catch(std::exception &ex) {
         p = &ex;
         throw;
      }
   } catch(std::exception &ex) {
      assert(p == &ex);
   }
} 
```

如果实现`current_exception`复制当前处理的异常对象，没有办法判断是否`rethrow_exception`复制，但是如果它引用了异常对象，那么我们可以检查：

```
#include <exception>
#include <iostream>
int main() {
   std::exception_ptr p;
   try {
      try {
         throw std::exception();
      } catch(...) {
         p = std::current_exception();
         std::cout << (p == std::current_exception()) << ' ';
         std::rethrow_exception(p);
      }
   } catch(...) {
      std::cout << (p == std::current_exception()) << '\n';
   }
} 
```

我在 prints 上尝试过的每个实现`1 1`；`0 0`允许`current_exception`复制；`0 1`显然是不可能的，而目前的标准似乎要求`1 0`. 修复将使用类似于 15.1p8 的语言对 18.8.5p10 进行澄清，允许或强制`rethrow_exception`不复制`exception_ptr`.

大多数**Throws：**标准中的规范只是命名一个类型（*Throws:`bad_alloc`*）或使用不定冠词（*Throws: an exception of type ...*）；唯一使用定冠词的其他异常规范是`future::get`and `shared_future::get`，因此任何解决方案都应该解决这些问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T15:11:39.147

是的，这是可能的。异常处理机制已经拥有一个最初被抛出的对象的副本，它被隐藏在一个私有内存存储中。通常，`exception_ptr`实现为管理该副本的引用计数的智能指针。

对于**一般**要求，如果具体要求与一般要求相冲突，则具体要求胜出。

# .htaccess - 使用 .htaccess 将特定路径镜像到另一个 url

> ID：14775417
> 
> 赞同：1
> 
> 时间：2013-02-08T15:04:04.797
> 
> 标签：.htaccess, mod-rewrite

我想使用两个单独的网址，指向两个单独的网站，使用一个主机和一个后端。

到目前为止，只有一个网站（我将其命名为 domain1.com）。并且已经使用了一些 mod 重写。

1.  将 www.domain1.com 重定向到 domain1.com

    RewriteEngine On RewriteCond %{http_host} ^www.domain1.com$ RewriteRule ^(.*)$ [http://domain1.com/](http://domain1.com/) $1 [R=301,L]

2.  使用漂亮的 url，所以 domain1.com/news/item 指向 domain1.com/index.php?/news/item

    RewriteBase / RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteCond $1 !^(index.php) RewriteRule ^(.*)$ index.php?/$1 [L]

我想要实现的是以下几点

1.  domain1.com/specific_folder_name/123456789 应该指向 domain2.com/123456789 只是为了化妆品
2.  domain2.com/123456789 应该运行 /index.php?/specific_folder_name/123456789

它应该导致：

当浏览到 domain1.com/param1/param2 时，服务器会为您提供 index.php?/param1/param2 当浏览到 domain1.com/specific_folder_name/123456789 时，您会被重定向到 domain2.com/123456789，服务器会为您提供 /index。 php?/specific_folder_name/123456789

我希望这足够清楚......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-21T06:42:58.880

我相信您可以通过**ProxyPass Directive完成此操作**

> 该指令允许将远程服务器映射到本地服务器的空间；本地服务器不是传统意义上的代理，而是远程服务器的镜像。本地服务器通常称为反向代理或网关。path 是本地虚拟路径的名称；url 是远程服务器的部分 URL，不能包含查询字符串。

[更多细节](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)

# c# - SQLite 连接策略

> ID：14775418
> 
> 赞同：2
> 
> 时间：2013-02-08T15:04:08.260
> 
> 标签：c#, database, sqlite, nhibernate, connection-string

我有一个可能在网络驱动器上的数据库。我想实现两件事：

1.  当第一个用户以只读模式连接到它时（他没有对该位置的读写访问权限，或者数据库是只读的），其他用户也必须使用只读连接（即使他们具有 RW 访问权限）。
2.  当第一个用户以 RW 模式连接到它时，其他用户根本无法连接到数据库。

我正在使用 SQLite，并发应该不是问题，因为数据库不应该被超过 10 人同时使用。

**更新：**这是我正在尝试制作的示例，因此我可以在程序本身中实现它。几乎一切都可以改变。

**更新：**现在我终于明白@CL 是什么了。告诉我，我让它工作了，这是更新的代码。

```
using System.Diagnostics;
using System.Linq;
using System.IO;
using DbSample.Domain;
using DbSample.Infrastructure;
using NHibernate.Linq;
using NHibernate.Util;

namespace DbSample.Console
{
    class Program
    {
        static void Main(string[] args)
        {
            IDatabaseContext databaseContext = null;

            databaseContext = new SqliteDatabaseContext(args[1]);

        var connection = LockDB(args[1]);
        if (connection == null) return;

        var sessionFactory = databaseContext.CreateSessionFactory();
        if (sessionFactory != null)
        {

            int insertCount = 0;

            while (true) 
            {

                try
                {

                    using (var session = sessionFactory.OpenSession(connection))
                    {
                        string result;
                        session.FlushMode = NHibernate.FlushMode.Never;

                        var command = session.Connection.CreateCommand();

                        command.CommandText = "PRAGMA locking_mode=EXCLUSIVE";
                        command.ExecuteNonQuery();

                        using (var transaction = session.BeginTransaction(ReadCommited))
                        {
                            bool update = false;
                            bool delete = false;
                            bool read = false;
                            bool readall = false;
                            int op = 0;
                            System.Console.Write("\nMenu of the day:\n1: update\n2: delete\n3: read\n4: read all\n0: EXIT\n\nYour choice: ");
                            op = System.Convert.ToInt32(System.Console.ReadLine());
                            if (op == 1)
                                update = true;
                            else if (op == 2)
                                delete = true;
                            else if (op == 3)
                                read = true;
                            else if (op == 4)
                                readall = true;
                            else if (op == 0)
                                break;
                            else System.Console.WriteLine("Are you retarded? Can't you read?");

                            if (delete)
                            {
                                System.Console.Write("Enter the ID of the object to delete: ");
                                var objectToRemove = session.Get<MyObject>(System.Convert.ToInt32(System.Console.ReadLine()));

                                if (!(objectToRemove == null))
                                {
                                    session.Delete(objectToRemove);
                                    System.Console.WriteLine("Deleted {0}, ID: {1}", objectToRemove.MyName, objectToRemove.Id);
                                    deleteCount++;
                                }
                                else
                                    System.Console.WriteLine("\nObject not present in the database!\n");

                            }

                            else if (update)
                            {
                                System.Console.Write("How many objects to add/update? ");
                                int number = System.Convert.ToInt32(System.Console.ReadLine());
                                number += insertCount;
                                for (; insertCount < number; insertCount++)
                                {

                                    var myObject = session.Get<MyObject>(insertCount + 1);

                                    if (myObject == null)
                                    {
                                        myObject = new MyObject
                                            {
                                                MtName = "Object" + insertCount,
                                                IdLegacy = 0,
                                                                                           };
                                        session.Save(myObject);
                                        System.Console.WriteLine("Added {0}, ID: {1}", myObject.MyName, myObject.Id);
                                    }
                                    else
                                    {
                                        session.Update(myObject);
                                        System.Console.WriteLine("Updated {0}, ID: {1}", myObject.MyName, myObject.Id);
                                    }
                                }

                            }

                            else if (read)
                            {

                                System.Console.Write("Enter the ID of the object to read: ");
                                var objectToRead = session.Get<MyObject>(System.Convert.ToInt32(System.Console.ReadLine()));
                                if (!(objectToRead == null))
                                    System.Console.WriteLine("Got {0}, ID: {1}", objectToRead.MyName, objectToRead.Id);
                                else
                                    System.Console.WriteLine("\nObject not present in the database!\n");

                            }

                            else if (readall)
                            {

                                System.Console.Write("How many objects to read? ");
                                int number = System.Convert.ToInt32(System.Console.ReadLine());
                                for (int i = 0; i < number; i++)
                                {
                                    var objectToRead = session.Get<MyObject>(i + 1);
                                    if (!(objectToRead == null))
                                        System.Console.WriteLine("Got {0}, ID: {1}", objectToRead.MyName, objectToRead.Id);
                                    else
                                        System.Console.WriteLine("\nObject not present in the database! ID: {0}\n", i + 1);

                                }

                            }
                            update = false;
                            delete = false;
                            read = false;
                            readall = false;

                            transaction.Commit();
                        }
                    }    
                }
                catch (System.Exception e)
                {
                    throw e;
                }

            }
            sessionFactory.Close();
        }

    }

    private static SQLiteConnection LockDbNew(string database)
    {
        var fi = new FileInfo(database);
        if (!fi.Exists)
            return null;
        var builder = new SQLiteConnectionStringBuilder { DefaultTimeout = 1, DataSource = fi.FullName, Version = 3 };

        var connectionStr = builder.ToString();
        var connection = new SQLiteConnection(connectionStr) { DefaultTimeout = 1 };
        var cmd = new SQLiteCommand(connection);

        connection.Open();

        // try to get an exclusive lock on the database
        try
        {
            cmd.CommandText = "PRAGMA locking_mode = EXCLUSIVE; BEGIN EXCLUSIVE; COMMIT;";
            cmd.ExecuteNonQuery();
        }
        // if we can't get the exclusive lock, it could mean 3 things
        // 1: someone else has locked the database
        // 2: we don't have a write acces to the database location
        // 3: database itself is a read-only file
        // So, we try to connect as read-only
        catch (Exception)
        {
            // we try to set the SHARED lock
            try
            {
                // first we clear the locks
                cmd.CommandText = "PRAGMA locking_mode = NORMAL";
                cmd.ExecuteNonQuery();
                cmd.CommandText = "SELECT COUNT(*) FROM MyObject";
                cmd.ExecuteNonQuery();

                // then set the SHARED lock on the database
                cmd.CommandText = "PRAGMA locking_mode = EXCLUSIVE";
                cmd.ExecuteNonQuery();
                cmd.CommandText = "SELECT COUNT(*) FROM MyObject";
                cmd.ExecuteNonQuery();

                readOnly = true;
            }
            catch (Exception)
            {
                // if we can't set EXCLUSIVE nor SHARED lock, someone else has opened the DB in read-write mode and we can't connect at all
                connection.Close();
                return null;
            }

        } 
        return connection;
    }

 } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:50:59.123

设置[PRAGMAlocking_mode=EXCLUSIVE](http://www.sqlite.org/pragma.html#pragma_locking_mode)以防止 SQLite 在事务结束后释放其锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:09:24.610

我不知道它是否可以在 db 中但在应用程序中完成；您可以设置一个全局变量（不确定它是 Web 还是桌面应用程序）来检查是否有人连接并且他是否具有写入权限。之后，您可以检查其他客户端的状态。

# ember.js - 从 Ember Pre1 到 Pre4：每条路线有多个动态分段？更新：动态段允许的语法是什么？

> ID：14775420
> 
> 赞同：2
> 
> 时间：2013-02-08T15:04:12.463
> 
> 标签：ember.js

我目前正在尝试将基于 pre1 的 Ember 迁移到当前版本 pre4。在我的 pre1-code 中，我定义了如下路线：

```
formCreated : Ember.Route.extend({
        route : '/genre=:genre/sorting=:sorting/location=:location/range=:range/time=:date/:timeFrame',
....
}) 
```

这条路线对我来说很好，但现在我正在努力用 pre4 模仿这种行为。这是我的方法：

```
App.Router.map(function() {
  this.route("/");
  this.route("formCreated", { path: "/genre=:genre/sorting=:sorting/location=:location/range=:range/time=:date/:timeFrame" });
});
App.FormCreatedRoute = Ember.Route.extend({
  serialize: function(context, params){
    // here i am returning a hash containing all the dynamic segments
  }
}); 
```

**出了什么问题？** 当 App 进入状态时，URL 没有正确更新。我看到了这个结果：

> */流派=:流派/排序=:排序/位置=:位置/范围=:范围/时间=:日期/6:00-19:00*

所以我的大部分动态片段都没有更新。我确保我的自定义序列化方法返回了一个适当的哈希对象，其中为每个动态段设置了一个属性。

**pre4 是否仍然可以使用每条路线多个动态段，还是我必须切换到某种路线嵌套方法或类似的方法？**

**更新：找到根本原因：** 我刚刚发现错误是由于我用于路由的语法而发生的。我将其更改为以下内容（将“=”替换为“/”）：

```
this.route("formCreated", { path: "/genre/:genre/sorting/:sorting/location/:location/range/:range/time/:date/:timeFrame" }); 
```

**是否有任何关于如何构建路径的文档？**自 ember-pre1 以来，语法似乎发生了变化。我希望有一个用户友好的 URL，而那些众多的斜杠使其难以阅读。或者是规则，段总是必须以“：/”开头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:02:14.063

您将需要使用资源嵌套，如此[处](http://darthdeus.github.com/blog/2013/02/01/ember-dot-js-router-and-template-naming-convention/)和[此处所述](http://emberjs.com/guides/routing/defining-your-routes/)

```
App.Router.map(function() {
    this.route('/');
    this.resource('genre', { path: '/genre/:genre_id' }, function(params) {
        this.resource('sorting', { path: '/sorting/:sorting_id' }, function(params) {
            ...
        });
     });
}); 
```

# cakephp - CakePHP 审计日志插件用户认证

> ID：14775421
> 
> 赞同：0
> 
> 时间：2013-02-08T15:04:14.823
> 
> 标签：cakephp

我正在尝试实现 Audit Trail 插件 - [https://github.com/robwilkerson/CakePHP-Audit-Log-Plugin](https://github.com/robwilkerson/CakePHP-Audit-Log-Plugin)

一切都很好，但是我无法按照说明进行用户身份验证，但出现以下错误-

```
Fatal error: Call to undefined method CakeErrorController::currentUser() 
```

我已按照说明添加

```
protected function currentUser() {
      $user = $this->Auth->user();
      return $user[$this->Auth->userModel]; # Return the complete user array
} 
```

并添加

```
public function beforeFilter() {
        ...
        if( !empty( $this->data ) && empty( $this->data[$this->Auth->userModel] ) ) {
          $this->data[$this->Auth->userModel] = $this->currentUser();
        }
   } 
```

到我的 appController 之前，有没有人实现过这个或认识到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T12:09:00.580

对于 Cakephp 2.4，您必须进行一些更改才能使用 Auth 组件：

在应用模型中：

```
public function currentUser() {
  $userId = AuthComponent::user('id');

  //Get the information of the user
  $currentUser = $this->importModel('User')->find('first', array(
      'conditions'=>array('User.id'=>$userId),
  ));

  //Return all the User
  return $currentUser['User'];
} 
```

现在在你的 AppController 中：真正的是你不需要在你的控制器中做任何其他事情，它只是为了防止一些问题。所以，**可选**：

```
 if( !empty( $this->request->data ) && empty( $this->request->data[$this->Auth->userModel] ) ) {
        $user['User']['id'] = $this->Auth->user('id');
        $this->request->data[$this->Auth->userModel] =  $user;
    } 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:23:01.473

不要将该`currentUser()`功能添加到您的`AppController`中，它必须在您的`AppModel`. 这是我的`currentUser()`函数使用 CakePHP 2.3 的样子：

```
public function currentUser() {
    return array('id' => AuthComponent::user('id'));
} 
```

# java - 从 Java 中的 TextArea 中提取字符串，（使用 EasyApp）

> ID：14775430
> 
> 赞同：2
> 
> 时间：2013-02-08T15:04:39.023
> 
> 标签：java

方法 .getText(); 不起作用，paramContext() 也不起作用；

基本上我需要输入大量文本（所以我使用了TextArea，因为TextField不够大），然后我需要将该信息存储在一个字符串中。所以我可以操纵它。

我是否可以将其保留为 textArea 类型？并且仍然从中提取单词和短语？

继承人的代码：

```
 import java.awt.*;
 import java.awt.event.*;
 import javax.swing.*;
 import java.util.Scanner;
 import java.io.*;

 public class EmailExtractionGUI extends EasyApp
 {
    private TextArea emailInput = new TextArea("", 0,0, TextArea.SCROLLBARS_VERTICAL_ONLY);

    public static void main(String[] args)
    {
        new EmailExtractionGUI();
    }
                                            //Left,Height position,width,height
    Label passwordEntry = addLabel("Email Extraction Programme", 200,50,350,30,this);
    //TextArea emailInput = addTextArea("",75,100,600,550,this);

    Button bGo = addButton("Go",650,680,65,30,this);
    Button bReset = addButton("Reset",575,680,65,30,this);

    public EmailExtractionGUI()
    {
        setSize(750,750);
        setTitle("Email Extraction");
        setBackground(Color.white);
        Font Andalus = new Font("Andalus", 3, 24);// 1st number here 1=bold, 2=italics,3=bold&italics, 0=norm
        passwordEntry.setForeground(Color.blue);
        passwordEntry.setFont(Andalus);
        emailInput.setBackground(Color.white);

    }

    public void actions(Object source, String command)
    {
        if (source == bGo)
        {
            String emailText = emailInput.getText();
        //  Emails email = new Emails(emailText);
        System.out.println(emailText);
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:38:04.407

谢谢！我遇到了一个运行时错误，我认为这是我试图使工作的其他代码段造成的，但事实证明这是因为我重命名了文件。无论如何，它现在有效！谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:41:06.730

使用`getText`方法：

尝试`emailText.getText`

# java - 16 位转换的相对 8 位颜色

> ID：14775442
> 
> 赞同：0
> 
> 时间：2013-02-08T15:05:18.513
> 
> 标签：java, algorithm, colors

我正在开发一个 Java EE 应用程序，其中我有一个“项目”表，其中包含一些产品，以及一个用于设置其颜色的字段。

问题：用户从包含 16 种或可能 128 种颜色的调色板中选择一种颜色。我将颜色存储为一个字节（8 位颜色），并且我需要能够将 RGB 颜色/整数转换为其 8 位等效值，反之亦然，例如：

```
White:  0xFF(0b 111 111 11) to -1     or (255,255,255)
Red:    0x10(0b 111 000 00) to -65536 or (255, 0, 0  ) 
```

到目前为止我已经尝试过：

```
void setColor(Color color){
   short sColor =  (color.getRGB() >> 16) & 0xFF) >> 8
                 | (color.getRGB() >> 8) & 0xFF) >> 8
                 | (color.getRGB() >> 0) & 0xFF) >> 8;
   }

Color getColor(short sColor){
   Color rgb = new Color(
                        /*red:*/  (sColor & 0xF) << 16, 
                        /*gree:*/ (sColor & 0xF) << 8, 
                        /*blue*/  (sColor & 0xF) << 0));
}
/* or */

Color getColor(short sColor){
   Color rgb = new Color((sColor << 8) + sColor));
} 
```

当我遍历 0 到 255 的颜色值时，我得到一个单一的色调变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:52:49.930

所以在 8 位颜色中：

```
111 111 11
red grn bl 
```

?

红色和绿色有 8 个不同的值：

```
0 (0)
1 (36)
2 (72)
3 (109)
4 (145)
5 (182)
6 (218)
7 (255) 
```

蓝色有 4 个不同的值。

试试这个：

```
public static Color fromByte(byte b) {
    int red = (int) Math.round(((b & 0xE0) >>> 5) / 7.0 * 255.0);
    int green = (int) Math.round(((b & 0x1C) >>> 2) / 7.0 * 255.0);
    int blue = (int) Math.round((b & 0x03) / 3.0 * 255.0);
    return new Color(red, green, blue);
}

public static byte fromColor(Color color) {
    int red = color.getRed();
    int green = color.getGreen();
    int blue = color.getBlue();

    return (byte) (((int) Math.round(red / 255.0 * 7.0) << 5) |
                ((int) Math.round(green / 255.0 * 7.0) << 2) |
                ((int) Math.round(blue / 255.0 * 3.0)));
} 
```

以下是可能的颜色[http://jsfiddle.net/e3TsR/](http://jsfiddle.net/e3TsR/)

# makefile - 使用大量中间文件制作工作流程

> ID：14775443
> 
> 赞同：1
> 
> 时间：2013-02-08T15:05:23.327
> 
> 标签：makefile, implicit, rule

我的 Makefile 有一些问题：

```
# Manage rendering of images
.PHONY: explode

all: explode anime.apng

out.ppm: file.code
    ./pgm -f $<

explode: out.ppm
    split -d -a 3 --lines=$(N) --additional-suffix=.ppm $< frame

# Convert to multiple png
%.png: %.ppm
    convert $< $@
    optipng $@

# Assemble in one animated png
anime.apng: %.png
    apngasm $@ frame000.png 
```

我的问题是：我不知道要生成最终目标*需要多少*中间文件，所以我无法提前指定它们。示意图：

```
1 file.code -> 1 out.ppm |> LOADS of .ppm |> LOADS of .png -> 1 anime.apng
                         +> …             +> …
                         +> …             +> … 
```

为此，我使用了一个隐含的规则`%.png: %.ppm`。但是我*无法*为最后一个合并步骤指定先决条件！有任何想法吗？使用 make 以外的其他工具？有什么优雅的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T12:38:33.123

我认为一个简单而相当干净的方法是让一个变量记录那些 ppm 的“负载”列表，在我的示例中它是变量 STEP2。当然，您可以使用让您从“1 out.ppm”到“LOADS of .ppm”的程序来列出您将获得的 .ppm 文件。

举一个非常简单的例子，其中 out.ppm 将是一个列出要生成的 .ppm 名称的文本文件，您可以编写如下内容：

```
SOURCE = file.code
STEP1 = out.ppm
STEP2 = $(shell cat $(STEP1))
STEP3 = $(STEP2:%.ppm=%.png)
TARGET = anime.apng 
```

然后，您需要编写一个规则以从文件 $(STEP1) 中获取 STEP2 中列出的所有文件。这是一个文件一个文件完成的，就好像它是一个带有 % 模式的隐式规则，假设你的程序被称为 'extractor' ：

```
$(STEP2): $(STEP1)
    extractor $^ $@ 
```

此规则将对 STEP2 中列出的每个文件应用一次。这假定您的程序只需要源文件和输出文件的名称。如果您更喜欢传递输出文件的词干，您仍然可以使用普通的 ol' 隐式规则：

```
$(STEP2):%.ppm: $(STEP1)
    extractor $^ $* 
```

（$(STEP2):一开始是为了防止make使用这个规则生成out.ppm）

然后，在编译方面一切都照常进行，您可以调整编译和链接任何 C 项目的规则。%.ppm -> %.png 步骤就像将 %.c 编译为 %.o ：

```
%.png: %.ppm
    convert $< $@
    optipng $@ 
```

最后将所有内容分组（相当于将几个 %.o 链接到一个二进制文件中）：

```
$(TARGET): $(STEP3)
    apngasm $@ $^ 
```

我在这里假设 apngasm 可以将所有内容的列表放在一起作为参数*à la* tar。

希望它足够清晰和有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:37:54.150

一个临时的解决方法是从[一个关闭的问题](https://stackoverflow.com/questions/14653566/gnu-make-implicit-rules-for-batch-file-processing)中获取灵感，并使用 sub-make 调用在子文件夹中渲染图像。就像是：

**生成文件**：

```
# Manage rendering of images
.PHONY: explode

all: explode anime.apng

out.ppm: file.code
    ./pgm -f $<

explode: out.ppm
    split -d -a 3 --lines=$(N) --additional-suffix=.ppm $< subfolder/frame

ppm2png: explode
    $(MAKE) -C subfolder

# Assemble in one animated png
anime.apng: ppm2png
    apngasm $@ subfolder/frame000.png 
```

**临时/生成文件**：

```
SOURCES := $(wildcard *.ppm)
OUTPUTS = $(patsub %.ppm,%.png,%(SOURCES))

.PHONY: all
all: $(OUTPUTS)

# Convert to multiple png
%.png: %.ppm
    convert $< $@
    optipng $@ 
```

我确信可以做得更好。使用 make 以外的其他工具？

# mpi - 向 SGE 提交 Open MPI 作业

> ID：14775451
> 
> 赞同：0
> 
> 时间：2013-02-08T15:05:41.367
> 
> 标签：mpi, openmpi, sungridengine

我已经安装了 openmpi ，而不是`/usr/...`在 a 中`/commun/data/packages/openmpi/`，它是用`--with-sge`.

我在 SGE 中添加了一个新的 PE，如[http://docs.oracle.com/cd/E19080-01/n1.grid.eng6/817-5677/6ml49n2c0/index.html中所述](http://docs.oracle.com/cd/E19080-01/n1.grid.eng6/817-5677/6ml49n2c0/index.html)

```
# /commun/data/packages/openmpi/bin/ompi_info | grep gridengine
MCA ras: gridengine (MCA v2.0, API v2.0, Component v1.6.3)

# qconf -sq all.q | grep pe_
pe_list               make orte 
```

没有 SGE，程序运行没有任何问题，使用多个处理器。

```
/commun/data/packages/openmpi/bin/orterun -np 20 ./a.out args 
```

现在我想将我的程序提交给 SGE

在 Open MPI [FAQ](http://www.open-mpi.org/faq/?category=running#run-n1ge-or-sge)中，我读到：

```
# Allocate a SGE interactive job with 4 slots
# from a parallel environment (PE) named 'orte'
shell$ qsh -pe orte 4 
```

但我的输出是：

```
qsh -pe orte 4
Your job 84550 ("INTERACTIVE") has been submitted
waiting for interactive job to be scheduled ...
Could not start interactive job. 
```

我还尝试了`mpirun`嵌入在脚本中的命令：

```
$ cat ompi.sh
#!/bin/sh
/commun/data/packages/openmpi/bin/mpirun  \
    /path/to/a.out args 
```

但它失败了

```
$ cat ompi.sh.e84552
error: executing task of job 84552 failed: execution daemon on host "node02" didn't accept task
--------------------------------------------------------------------------
A daemon (pid 18327) died unexpectedly with status 1 while attempting
to launch so we are aborting.

There may be more information reported by the environment (see above).

This may be because the daemon was unable to find all the needed shared
libraries on the remote node. You may set your LD_LIBRARY_PATH to have the
location of the shared libraries on the remote nodes and this will
automatically be forwarded to the remote nodes.
--------------------------------------------------------------------------
error: executing task of job 84552 failed: execution daemon on host "node01" didn't accept task
--------------------------------------------------------------------------
mpirun noticed that the job aborted, but has no info as to the process
that caused that situation. 
```

我怎样才能解决这个问题？

* * *

在 openmpi 邮件列表中回答：[http ://www.open-mpi.org/community/lists/users/2013/02/21360.php](http://www.open-mpi.org/community/lists/users/2013/02/21360.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T13:43:57.347

在我的情况下，设置“job_is_first_task FALSE”和“control_slaves TRUE”解决了这个问题。

```
# qconf -mp mpi1 

pe_name            mpi1
slots              9
user_lists         NONE
xuser_lists        NONE
start_proc_args    /bin/true
stop_proc_args     /bin/true
allocation_rule    $fill_up
control_slaves     TRUE
job_is_first_task  FALSE
urgency_slots      min
accounting_summary FALSE 
```

# ruby - Hadoop 环境变量

> ID：14775459
> 
> 赞同：0
> 
> 时间：2013-02-08T15:06:21.653
> 
> 标签：ruby, hadoop, hadoop-streaming

我正在尝试在我的 Mac 上调试单节点 Hadoop 集群的一些问题。在所有设置文档中，它说要添加：

```
export HADOOP_OPTS="-Djava.security.krb5.realm=OX.AC.UK -Djava.security.krb5.kdc=kdc0.ox.ac.uk:kdc1.ox.ac.uk" 
```

要删除此错误：

```
Unable to load realm info from SCDynamicStore 
```

这有效，但它似乎只适用于 STDOUT。当我检查我的 Hadoop 日志目录时，在“job_###/atempt_###/stderr”下，错误仍然存​​在：

```
2013-02-08 09:58:23.662 java[2772:1903] Unable to load realm info from SCDynamicStore 
```

我很难将 RVM Ruby 加载到 Hadoop 环境中以使用 Hadoop 流执行 Ruby 代码。STDOUT 正在打印 RVM 已加载并使用正确的 Ruby/gemset 但我的 STDERR 日志：

```
env: ruby_noexec_wrapper: No such file or directory 
```

有没有办法找出 Hadoop 实际使用什么路径来执行作业，或者它是否在这里调用其他环境？

进一步背景：

我正在使用通过 Homebrew 安装的 Hadoop 1.1.1。它的设置方式非常类似于“[在 MAC OSX LION 上安装 HADOOP](http://ragrawal.wordpress.com/2012/04/28/installing-hadoop-on-mac-osx-lion/) ”并调试[wukong 3.0.0](https://github.com/infochimps-labs/wukong/tree/3.0.0)的实现作为执行 Hadoop 作业的包装器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:55:56.320

回答我自己的问题，以便其他人可以找到它。

我似乎在我的 hadoop-env 中加载了 rvm，但添加后我一定没有重新启动集群。为确保您的 rubies 和 gemsets 已加载，请将标准 rvm 子句添加到 hadoop-env.sh。就像是：

```
[[ -s "/Users/ScotterC/.rvm/scripts/rvm" ]] && source "/Users/ScotterC/.rvm/scripts/rvm" 
```

并确保重新启动集群以便它启动它。奇怪的是，如果不重新启动，我的日志会显示它正在加载 rvm，但它显然没有执行那个 ruby​​ 并且它是各自的 gemfile。重新启动后它工作。

# cuda - CUresult vs cudaError - 如何获得可读的错误描述？

> ID：14775460
> 
> 赞同：9
> 
> 时间：2013-02-08T15:06:23.660
> 
> 标签：cuda

我想获得 cuInit 返回的结果的人类可读描述。我发现的每一页都为此目的推荐使用 cudaGetErrorString ，但这会导致错误：

```
error: cannot convert CUresult {aka cudaError_enum} to cudaError_t 
{aka cudaError} for argument 1 to const char* cudaGetErrorString(cudaError_t) 
```

CUresult 和 cudaError 有什么区别，我可以用什么函数来解释前者？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-26T08:13:30.627

在撰写本文时，当前的驱动程序 API*确实*支持将 CUresult 转换为其字符串表示和描述。

来自驱动程序 API 文档：

```
CUresult cuGetErrorName ( CUresult error, const char** pStr )
    Gets the string representation of an error code enum name. 
CUresult cuGetErrorString ( CUresult error, const char** pStr )
    Gets the string description of an error code. 
```

[http://docs.nvidia.com/cuda/cuda-driver-api/index.html](http://docs.nvidia.com/cuda/cuda-driver-api/index.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-08T18:02:25.013

```
LIBRARY         RETURN TYPE     VALUES
CUDA Driver     CUresult        enum cudaError_enum    in cuda.h
CUDA Runtime    cudaError_t     enum cudaError         in driver_types.h 
```

CUDA 运行时提供函数 cudaGetErrorString 将 cudaError 枚举值转换为字符串。

CUDA Driver API 不提供返回字符串的函数。

CUresult 和 cudaError_t 的错误名称和值不匹配。

NVIDIA 目前不提供用于为 CUresult 返回错误字符串的库。只需几分钟即可将 cuda.h 中的数据转换为函数。

# php - 如何解密 Zend2 加密数据？

> ID：14775464
> 
> 赞同：2
> 
> 时间：2013-02-08T15:06:36.950
> 
> 标签：php, python, zend-framework, encryption

我正在使用[Zend2 Crypt 模块](http://framework.zend.com/manual/2.1/en/modules/zend.crypt.block-cipher.html)来加密数据。这是我的代码。

```
$cipher = BlockCipher::factory('mcrypt', array(
  'algorithm' => 'aes',
));
$cipher->setKey('mypassphrase');
$encrypted = $cipher->encrypt('Hey, I am the secret data'); 
```

酷，效果很好！现在，我需要`$encrypted`在 Python 中解密该数据（嘿，我是秘密数据）。

我正在使用 pycrypto 来做到这一点。在我的 PHP 环境之外解密数据的步骤是什么？

```
 from Crypto.Cipher import AES
    import base64
    import hashlib

    password = 'mypassphrase'
    key = hashlib.sha256(password).digest()

    decoded = base64.standard_b64decode(encrypted)
    cipher = AES.new(key, AES.MODE_CBC)
    data = cipher.decrypt(decoded) 
```

我需要指定一个，`IV`因为 Zend 默认使用 MODE_CBC。如何在我的 Python 代码中指定它？

这是 Zend2 文档：

> 加密的输出是一个以 Base64（默认）编码的字符串，其中包含 HMAC 值、IV 向量和加密文本。使用的加密模式是 CBC（默认为随机 IV）和 SHA256 作为 HMAC 的默认哈希算法。默认情况下，Mcrypt 适配器使用 PKCS#7 填充机制进行加密。您可以使用特殊的适配器（Zend\Crypt\Symmetric\Padding）指定不同的填充方法。BlockCipher 使用的加密和身份验证密钥是使用 PBKDF2 算法生成的，用作从使用 setKey() 方法指定的用户密钥的密钥派生函数。

有人可以帮助我调整我的 Python 代码来解密数据吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T10:56:57.107

我找到了一种方法来解密 Zend2 加密的数据。这是我的代码：

```
from base64 import b64decode
from Crypto import Random
from Crypto.Cipher import AES
from Crypto.Hash import SHA256, HMAC
from Crypto.Protocol.KDF import PBKDF2

# The hmac starts from 0 to 64 (length).
hmac_size = 64
hmac = data[:hmac_size]

# The cipher text starts after the hmac to the end.
# The cipher text is base64 encoded, so I decoded it.
ciphertext = data[hmac_size:]
ciphertext = b64decode(ciphertext)

# The IV starts from 0 to 16 (length) of the ciphertext.
iv = ciphertext[:16]

# The key size is 256 bits -> 32 bytes.
key_size = 32

# The passphrase of the key.
password = 'mypassphrase'

# The key is generated using PBKDF2 Key Derivation Function.
# In the case of Zend2 Crypt module, the iteration number is 5000, 
# the result length is the key_size * 2 (64) and the HMAC is computed
# using the SHA256 algorithm
the_hash = PBKDF2(password, iv, count=5000, dkLen=64, prf=lambda p, s:
                  HMAC.new(p, s, SHA256).digest())

# The key starts from 0 to key_size (32).
key = the_hash[:key_size]

# The hmac key starts after the key to the end.
key_hmac = the_hash[key_size:]

# HMAC verification
hmac_new = HMAC.new(key_hmac, 'aes%s' % ciphertext, SHA256).hexdigest()
if hmac_new != hmac:
    raise Exception('HMAC verification failed.')

# Instanciate the cipher (AES CBC).
cipher = AES.new(key, AES.MODE_CBC, iv)

# It's time to decrypt the data! The ciphertext starts after the IV (so, 16 after).
data = cipher.decrypt(ciphertext[16:]) 
```

**任务成功！**

# java - 有条件导入

> ID：14775466
> 
> 赞同：6
> 
> 时间：2013-02-08T15:06:44.747
> 
> 标签：java, import

我正在考虑将 dbus 函数添加到使用 swing 的 java 程序中，因此可以使用脚本来执行某些功能。这个东西也必须在 dbus 不可用的 Windows 上运行。

所以我正在考虑做以下事情：

**dbus.java：**

```
import dbus; //Whatever the module is called
class dbus implements some_interface {
    //blah blah
} 
```

**dbus_fake.java**

```
class dbus_fake implements some_interface {
    //full of empty methods
} 
```

**dbus_manager.java**

```
class dbus_manager {
    static some_interface get_dbus() {
        try {
            return new dbus(); //This should fail when loading the class, because the imports are not satisfied.
        } except {
            return new fake_dbus();
        }
    }
} 
```

你认为这是个好主意吗？它会起作用吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T15:16:37.660

不幸的是，依靠构造函数来 throw `ClassNotFoundException`s 有点不可靠（尽管它现在可能适用于您的用例）。

我会使用`Class.forName`更可靠的行为加载类（同时使用更多Java-ish名称；）：

```
class DBusManager {
    static SomeInterface getDBus() {
        try {
            return Class.forName("your.pkg.RealDBus")
                        .getConstructor()
                        .newInstance();
        } catch(ClassNotFoundException e) {
            return new FakeDBus();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:30:22.133

为什么这么难？只需为每个平台维护一个单独的 jar 文件。它使依赖关系变得更好，易于单独维护，扩展新实现等......

```
windows-dbus.jar
 |
 +- class DBus implements SomeInterface { fake code }

linux-dbus.jar
 |
 +- class DBus implements SomeInterface { real dbus code } 
```

根据您所在的平台，在类路径中包含适当的 jar。并在程序中请求一个新的 DBus 实例。

```
final SomeInterface bus = new DBus(); 
```

如果您的程序与 WebStart 一起分发，您甚至可以提及哪个 jar 用于哪个平台。

# puppet - 让 puppet 从特定存储库安装包

> ID：14775472
> 
> 赞同：2
> 
> 时间：2013-02-08T15:07:23.750
> 
> 标签：puppet, apt, dpkg, aptitude

有没有办法告诉 puppet 从特定存储库安装包？我想在 puppet 中执行类似 'aptitude -t testing install vim' 的操作。

我想这样做的原因是我想从 debian 'testing' 存储库安装特定的包，但默认情况下只使用'stable'。

目前，我将“测试”存储库的优先级固定为 -10，因此如果没有我明确告诉它这样做，apt 不会从它安装软件包：

```
Package: *                                                                                                                                                                                             
Pin: release a=stable
Pin-Priority: 990 

Package: *
Pin: release a=testing
Pin-Priority: -10 
```

我在基于 debian 的系统上使用 puppet 2.6.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T16:42:00.003

尝试[puppetlabs-apt](https://github.com/puppetlabs/puppetlabs-apt)模块并使用[apt::force](https://github.com/puppetlabs/puppetlabs-apt#aptforce)

# java - if 语句中的多个 OR 条件

> ID：14775475
> 
> 赞同：0
> 
> 时间：2013-02-08T15:07:37.497
> 
> 标签：java

我创建了一个使用迭代器的方法，该迭代器遍历一个映射，并为每一对评估一个具有许多 OR 条件的语句。如果条件为真，它将对的对象（通知对象）添加到列表（异常）中。但是，在编译时，编译器会在此方法处给出 NullPointerException 异常。根据我的调查，if 语句似乎有问题，但我不明白为什么。任何人都可以在这方面给我帮助吗？谢谢！

```
public List<Notification> getAnomalies(NotificationSearchCriteria notificationSearchCriteria) {

 Map<String,Notification> messageList = new HashMap<String,Notification>();
List<Notification> anomalies = new ArrayList<Notification>();

Iterator iterator = messageList.entrySet().iterator();
while (iterator.hasNext()) {

    Map.Entry pairs = (Map.Entry)iterator.next();
    Notification message = (Notification) pairs.getValue();

           if(message.getDescription().equals(notificationSearchCriteria.getDescription())||message.getSubjectName().equals(notificationSearchCriteria.getSubjectName())||message.getNotificationSubject().toString().equals(notificationSearchCriteria.getNotificationSubject().toString())||message.getNotificationType().toString().equals(notificationSearchCriteria.getNotificationType().toString())){

               anomalies.add(message);

             }
        }

    }
    return anomalies;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:18:29.893

这很可能是由`message`返回 null 的方法之一引起的。例如，如果`message.getDescription()`返回 null，那么`message.getDescription().equals(<something>)`将抛出一个`NullPointerException`，因为您不能在 null 对象上调用其他方法。

有几种方法可以解决这个问题。首先，我建议检查您的对象以查看哪些可以返回空值并添加适当的处理代码。

更一般地说，我总是建议对你知道不为空的变量调用 equals 以避免这些问题。例如

```
if ("accept".equals(command)) {
  // do something
} 
```

一般优于

```
if (command.equals("accept")) {
 // do something
} 
```

因为第二个可能通过 NPE，而第一个永远不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:41:42.173

我会将消息匹配代码重构到`NotificationSearchCriteria`类中。最终`if`将是“if (notificationSearchCriteria.matches(message))”。从名称来看，我猜这是`NotificationSearchCriteria`唯一的用法；从这个意义上说，它不会增加耦合。

`NotificationSearchCriteria`在构造过程中将执行空值检查；这将确保所有字段都不为空。在匹配的代码中，在该类中，情况如下所示：

```
boolean matches(Notification message) {
   if (description.equals(message.getDescription()) ||  // LHS guaranteed non-null
      foo.equals(message.getFoo()) ||
      bar.equals(message.getBar()) || // ...
   ) { return true; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:54:22.977

最好的编码方式是进行空值检查。

理想情况下，我会有这样的代码：

```
 while (iterator.hasNext()) {

    Map.Entry pairs = (Map.Entry)iterator.next();
    Notification message = (Notification) pairs.getValue();
          if(null!=message && null!=message.getDescription() &&        
               null!=notificationSearchCriteria.getDescription() )
          {
             //Do your comparioson
          }else{
           //Handle the NullPointerException error the way you want
          }
  } 
```

# c# - ObjectSet 的 Where() 方法和内存

> ID：14775476
> 
> 赞同：1
> 
> 时间：2013-02-08T15:07:38.877
> 
> 标签：c#, database, memory-management, entity-framework-4, objectset

我正在使用 ObjectSet 的方法在表中执行各种查询，即从中选择一些记录：

```
 var results = Repository.Find(c => c.Enabled == 1).ToList(); 
```

这是我的存储库的 Find 方法：

```
 public IEnumerable<T> Find(Func<T, bool> predicate)
    {
        try
        {
            return _objectSet.Where<T>(predicate);
        }
        catch
        {
            throw;
        }
    } 
```

现在，如果目标表中有大约 1,000,000 条记录，我可以看到进程的内存使用量增长了很多，即使我正在执行的*Find调用应该最多返回几条记录。*

似乎所有记录都被拉到客户端，然后被过滤。这显然不是我想要 LINQ 做的。

你觉得我在做什么明显有问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:10:43.090

我认为你应该使用`Expression<Func<T, bool>>`而不是简单的`Func<T, bool>`：

```
public IEnumerable<T> Find(Expression<Func<T, bool>> predicate) {
  // your code
} 
```

`Where`被重载（参见[ObjectSet 类](http://msdn.microsoft.com/en-us/library/dd412719.aspx)），并且`Func<T>`-overload 由 定义`IEnumerable<T>`，而`Expression<TDelegate>`由`IQueryable<T>`. 因为`predicate`是 a `Func<T>`，编译器调用为 定义的扩展方法`IEnumerable<T>`，进而获取所有记录并对对象执行 LINQ。

# c# - 使 ListBox 大小适合用作其 ItemsPresenter 的 ItemsPanel

> ID：14775480
> 
> 赞同：3
> 
> 时间：2013-02-08T15:07:45.773
> 
> 标签：c#, wpf, xaml, custom-controls, generic.xaml

我有一个自定义控件 ListBox，我想根据其 ItemsPanel 的大小调整其大小。对于项目面板，我有一个自定义控件 WrapPanel，可以相应地排列项目。正如您在屏幕截图中看到的那样，ListBox 更喜欢根据其父控件或 availableSize 调整自身大小。

然后我尝试制作一个自定义控件网格，它有一个 ItemsSource 属性，可以将项目传递给它的列表框。但这也没有用。当 Grid 排列时，ListBox 将 Arrange，这将导致 Grid 排列等等。

所以我的问题是，如何创建一个具有 ItemsSource 属性和 ItemsPresenter 的自定义控件，该控件根据其子项的内容调整自身大小？

![ListBox 自定义控件截图](../Images/b71c803e778c3531a86e550b812629bb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:50:16.913

您只需将 ListBox Horizo​​ntalAlignment 设置为 Left，并将 VerticalAlignment 设置为 Top。这应该可以解决问题。

简单的例子：

**主窗口.xaml**

```
<Window x:Class="ListBoxFitItemsPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="400" Width="400">
    <ListBox ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="Red" HorizontalAlignment="Left" VerticalAlignment="Top" >
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Background="AntiqueWhite" Margin="5" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>

        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
    </ListBox>
</Window> 
```

![在此处输入图像描述](../Images/7e23575abef390ebb324d81af3fdb0ff.png)

**编辑：**它也适用于绑定场景：

**主窗口.xaml**

```
<Window x:Class="ListBoxFitItemsPanel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ListBoxFitItemsPanel"
        Title="MainWindow" Height="400" Width="400">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:Item}">
            <Rectangle Width="100" Height="100" Fill="LightSlateGray" Stroke="Black" StrokeThickness="1" Margin="5" />
        </DataTemplate>
    </Window.Resources>
    <ListBox ItemsSource="{Binding Items}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" Background="Red" HorizontalAlignment="Left" VerticalAlignment="Top" >
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Background="AntiqueWhite" Margin="5" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>
</Window> 
```

**主窗口.xaml.cs**

```
using System.Collections.Generic;
using System.Windows;

namespace ListBoxFitItemsPanel
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
        }

        public IEnumerable<Item> Items
        {
            get
            {
                for (int i = 0; i < 9; i++)
                {
                    yield return new Item();
                }
            }
        }
    }

    public class Item { }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:13:36.383

这是我必须做的才能获得我想要的功能。首先我必须创建我的 SquareWrapPanel。这就是魔法发生的地方，并按照我想要的方式安排我的物品。

```
protected override Size ArrangeOverride(Size finalSize)
    {
        return ArrangeByChildCount(finalSize);
    }

    private Size ArrangeByChildCount(Size finalSize)
    {

        double childWidth = 0;
        double childHeight = 0;

        foreach (UIElement e in Children)
        {
            e.Measure(finalSize);

            childWidth = e.DesiredSize.Width;
            childHeight = e.DesiredSize.Height;
        }

        if (Children.Count > 0)
        {
            int square = (int)Math.Sqrt(Children.Count);

            int rowCount = square + Children.Count % square;
            int columnCount = square;

            double height = rowCount * childHeight;
            double width = columnCount * childWidth;

            Size size = new Size(width, height);
            base.ArrangeOverride(size);
            return size;
        }
        else
        {
            return new Size(300, 300);
        }
    } 
```

然后我创建了一个扩展 ItemsControl 的自定义面板。这样我就可以将一组项目绑定到它。后面的代码中没有任何内容，但这是我必须使用的样式。

```
 <Style TargetType="{x:Type local:SquareItemsPanel}" BasedOn="{StaticResource {x:Type ItemsControl}}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ItemsControl">
                <Border BorderBrush="Black" BorderThickness="2" CornerRadius="4">
                    <Expander x:Name="exp" Header="View">
                        <local:SquareWrapPanel IsItemsHost="True"/>
                    </Expander>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# plot - 覆盖 SAS GMAP Choropleths

> ID：14775481
> 
> 赞同：0
> 
> 时间：2013-02-08T15:07:51.223
> 
> 标签：plot, maps, sas

重新制定：我想覆盖以下两个图表：

```
data mystates;
set maps.states;
myvar = state<30;
run;

pattern1 c=black v=m3n0;
pattern2 c=black v=m3n90;
%let except = (where=(state not in (72,2,15)));
proc gmap map=mystates &except. data=mystates &except.;
   id state;
   choro myvar;
run;
quit; 
```

和

```
goptions reset=all;
%let no = 48;
proc gmap map=maps.counties (where =(state=&no.)) data=maps.counties (where =(state=&no.));
   id county;
   choro county;
run;
quit; 
```

由于粒度不同，我不能简单地在 proc gmap 中使用 2 个 choro 语句：请注意两个 choro 语句的顺序有多重要。一个总是透支另一个。

```
data mytry;
set mystates &except. maps.county (where =(state=&no.));
run;

pattern1 c=black v=m3n0;
pattern2 c=black v=m3n90;
proc gmap map=mytry data=mytry all;
   id state county;
   choro myvar;
   choro county;

run;
quit; 
```

如何同时显示线条和颜色？

# sharepoint - 如何更新 Sharepoint 布局文件夹中的文件

> ID：14775482
> 
> 赞同：0
> 
> 时间：2013-02-08T15:07:52.457
> 
> 标签：sharepoint, layout

我有一个使用布局文件夹中的 js 文件的母版页。我想手动编辑此文件以用于开发目的，但如果我手动打开布局文件夹并编辑文件，我的浏览器不会获得最新副本。我尝试使用 CTRL+F5 在客户端进行硬刷新，但我仍然得到旧副本。

有没有一种简单的方法来编辑此文件，而无需一遍又一遍地重新部署我的母版页功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:30:57.563

您无需重新部署它。您需要清除浏览器缓存。如果您从另一个浏览器打开它，或者如果您清除浏览器的历史记录，您会发现不需要重新部署它。

# apache - 使用 htaccess 从 https 重写为 http 如何删除端口号？

> ID：14775484
> 
> 赞同：0
> 
> 时间：2013-02-08T15:08:06.043
> 
> 标签：apache, .htaccess, url, redirect, url-rewriting

我有这个 htaccess 代码

```
 <IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTPS} on [AND] 
RewriteCond %{REQUEST_URI} /products-page/bathroom-amenities/nourish-a-spa-line/
RewriteRule (.*) http://%{HTTP_HOST}/bathroom-amenities/286-nourish.html
</IfModule> 
```

这样做是将用户从以下位置重定向：

*   [https://www.mydomain.com/products-page/bathroom-amenities/nourish-a-spa-line/](https://www.mydomain.com/products-page/bathroom-amenities/nourish-a-spa-line/)

至：

*   [http://www.mydomain.com:443/bathroom-amenities/286-nourish.html](http://www.mydomain.com:443/bathroom-amenities/286-nourish.html)

此代码从 https URL 重定向到 http URL，但要使其正常工作，我需要从结果 URL 中删除端口。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:15:38.217

User SERVER_NAME instead of HTTP_HOST

Be careful with the use of UseCanonicalName setting, most likely you want to have it set to Off

# symfony - 如何从实体中的另一个包加载实体？

> ID：14775493
> 
> 赞同：0
> 
> 时间：2013-02-08T15:08:34.350
> 
> 标签：symfony, entity, bundle

假设我有 2 个实体。卡和用户。用户在 UserBundle 中，卡在 PublicBundle 中。

在用户中我有这个功能：

```
#namespace Kanban\UserBundle\Entity;
    /**
     * Add assignment
     *
     * @param \Kanban\PublicBundle\Entity\Card $assignment
     * @return User
     */
    public function addAssignment(\Kanban\PublicBundle\Entity\Card $assignment)
    {
        $this->assignment[] = $assignment;

        return $this;
    } 
```

每次我执行这个命令：

```
php app/console doctrine:schema:update --dump-sql 
```

它抛出这个错误：

```
 [Doctrine\ORM\Mapping\MappingException]                                                                    
  The target-entity Kanban\UserBundle\Entity\Card cannot be found in 'Kanban\UserBundle\Entity\User#assignm  
  ent'. 
```

我试过这样的说法：

```
use Kanban\PublicBundle\Entity;
use Kanban\PublicBundle\Entity\Card; 
```

在文件的开头但显示相同的错误。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:23:51.837

纳米！，

orm.yml 文件有问题，已更改：

```
manyToMany:
    assignment:
        targetEntity: Card
        cascade: {  }
        mappedBy: customer
        inversedBy: null
        joinTable: null
        orderBy: null 
```

进入

```
manyToMany:
    assignment:
        targetEntity: Kanban\PublicBundle\Entity\Card
        cascade: {  }
        mappedBy: customer
        inversedBy: null
        joinTable: null
        orderBy: null 
```

这解决了问题！

# spring - Spring Core Course 解决方案练习不再起作用

> ID：14775495
> 
> 赞同：2
> 
> 时间：2013-02-08T15:08:45.337
> 
> 标签：spring, maven, spring-mvc, maven-3

去年我从春季开始学习核心课程。在那门课程中，我收到了一本非常好的书，名为“Core Spring Student Lecture Manual”+练习册。问题是，经过数小时的痛苦后，我仍然无法使示例（解决方案）可运行。

我有两个选择：-首先，我尝试将所有项目导入 STS 和 intellij，然后尝试使用 Maven 构建它们。

我还将所有依赖项手动添加到我的本地存储库中，但出现两个错误

此存储库不再存在：代码：

```
<url>https://tbits.springsource.com/repository/snapshot</url> 
```

当我在 pom.xml maven 中删除该存储库时，它抱怨他找不到父项目。

```
<parent>
        <groupId>com.springsource.training.common</groupId>
        <artifactId>abstractContainerProject</artifactId>
        <version>1.1.7.RELEASE</version>
    </parent> 
```

- 第二次我尝试删除所有 maven 部分，我只是将库的一个一个手动添加到项目中，代码编译得很好，但问题是单元测试正在运行，我得到一个堆栈跟踪“java.lang.异常”找不到可运行的方法。

对我来说，只要我可以运行测试/编译它，我就不知道它是与 maven 一起工作还是手动工作。

有没有人也有这个问题？

不管怎么说，还是要谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:24:34.787

据我所知，您不应该将它们导入任何本地 IDE，您应该使用材料中提供的 STS。存储库也是如此——培训材料中提供了存储库。这也是他们[在春季论坛中提出的建议](http://forum.springsource.org/showthread.php?81912-Newbie-Question-on-Spring-and-the-Training-Class-Examples)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T14:44:39.717

从 Spring 安装课程后，转到安装它的目录。有一个文件夹叫repository。例如在 mac /Applications/core-spring-3.2.1.RELEASE/repository 上。

在这里，您将找到所有可以手动添加到类路径的依赖项（添加外部 jar）。

或者在 Maven 的情况下：只需将整个文件夹 ...repository/com/springsource 复制到 .m2 文件夹中。

# oracle - 每晚更新的物化视图

> ID：14775498
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:08:57.663
> 
> 标签：oracle

想要创建每晚更新的物化视图，例如：

```
 Create materialized view My_View 
    refresh complete 
    start with (23:00 pm) 
    Next to 24h 
    select.... 
```

有任何想法吗...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:28:37.407

```
CREATE MATERIALIZED VIEW my_view
   REFRESH NEXT SYSDATE + 1 + (23/24)
   AS SELECT * FROM wherever 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:40:08.533

我个人不会使用 mat view CREATE 语句（下一个子句）中内置的调度程序。主要原因（对我来说）是你不能以这种方式声明刷新非原子（至少我在创建时没有找到它的语法）。根据您的刷新要求和大小，这可以节省大量时间。

此外，Oracle 提供了一个非常好的调度程序，它独立于每个单独的对象，并且很容易查看在什么时间计划/运行的内容、进行更改、创建复杂的作业链、查看过去作业运行的日志、发送电子邮件通知、等等等等

我会使用**dbms_mview。[在 dbms_scheduler 作业中刷新](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_mview.htm)('MY_MATVIEW', 'C', atomic_refresh=>false)**。是的，需要更多的设置工作，但最终会更加灵活和强大。

# android - Android，LinearLayout不会滚动

> ID：14775499
> 
> 赞同：4
> 
> 时间：2013-02-08T15:08:58.457
> 
> 标签：android, scroll, scrollview, android-linearlayout

我对android编程比较陌生。谁能告诉我为什么我`ScrollView`不会滚动？

我的活动已实施`OnGestureListener`以获取一些触摸信息。但是，我尝试禁用`onGestureListener`它仍然无法正常工作。

它在 SlidingDrawer 之外工作。是否有可能让它在 SlidingDrawer 内部工作？

我通过提供 ScrollView ID 解决了这个问题，然后将该 ID 放入 SlidingDrawer android:content="@+id/content"。

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="right"
        android:background="@drawable/pozadina_touchpad"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="100dp"
            android:layout_height="match_parent"
            android:layout_gravity="right"
            android:orientation="vertical" >

            <SlidingDrawer
                android:id="@+id/prosirenje"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal"
                android:content="@+id/content"
                android:handle="@+id/handle" >

                <Button
                    android:id="@+id/handle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/gumb_slider"
                     />

                <ScrollView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

                    <LinearLayout
                        android:id="@+id/content"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:background="@drawable/slider"
                        android:gravity="center"
                        android:onClick="nemaSkrola"
                        android:orientation="vertical" >

                        <Button
                            android:id="@+id/ico_povecalo"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_margin="20dp"
                            android:background="@drawable/ikona_povecalo" />

                        <Button
                            android:id="@+id/ico_desktop"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_margin="20dp"
                            android:background="@drawable/ikona_komp" />

                        <Button
                            android:id="@+id/ico_daljinski"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_margin="20dp"
                            android:background="@drawable/ikona_play" />

                        <Button
                            android:id="@+id/ico_tipkovnica"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_margin="20dp"
                            android:background="@drawable/ikona_tipka" />

                        <Button
                            android:id="@+id/ico_settings"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_margin="20dp"
                            android:background="@drawable/ikona_settings" />

                    </LinearLayout>

                </ScrollView>

            </SlidingDrawer>

        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:27:24.477

给scrollView的宽度和高度一些值，然后像这样尝试

```
<ScrollView
    android:id="@id/content"
    android:layout_width="300dp"
    android:layout_height="300dp"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="15dp">
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</ScrollView> 
```

请像这样更改滚动视图 ID：

```
android:id="@id/content" 
```

请像这样更改手柄按钮ID：

```
android:id="@id/handle" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:28:43.620

的容器（分层父级）以`ScrollView`这种方式设置了以下属性：`android:layout_height="match_parent"`，这迫使它们将其内容限制在活动（屏幕）的高度。
为了您`ScrollView`的工作，请尝试将其`ScrollView`提升到更高的层级，这样就不会受到其父级的限制。

# python - 在 ipython 异常时停止执行 Python 程序

> ID：14775500
> 
> 赞同：2
> 
> 时间：2013-02-08T15:09:02.320
> 
> 标签：python, ipython

我有一个长时间运行的 Python 程序，在某些时候会引发异常。有什么方法可以从 ipython 会话运行它并停止异常，以便我可以检查实时数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:11:29.463

您可能想要`ipython -i yourscript.py`，它将在解释器环境中执行您的脚本。但这不会让您检查发生异常的本地环境，例如函数中的局部变量——您只能检查全局变量。你可能想要这个：

```
In [1]: %run test.py
<exception occurs>
In [2]: %debug test.py 
```

如果您不熟悉使用 PDB，请先查看[一些文档](http://docs.python.org/2/library/pdb.html#debugger-commands)。

感谢 Thomas K 编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:56:02.173

是的，取决于您的设置方式。您可以导入您的程序并像 try except 块中的任何其他模块一样运行它。

```
import yourprogram
try:
    yourprogram.main_function(args)
except:
    print "we blew up, investigate why" 
```

如果您的程序不在函数中，您可能需要在导入周围放置 try 块。

这种方法的问题是您想要查看的变量可能不再在范围内。我通常在不同的点使用打印语句或日志消息来找出我所期望的不一样。

# dependencies - 无法加载文件或程序集 System.Net.Http.dll 或其依赖项之一

> ID：14775501
> 
> 赞同：1
> 
> 时间：2013-02-08T15:09:03.000
> 
> 标签：dependencies

我正在运行 Visual Studio 2012 并且我已经安装了 mvc 4.0。在我的机器上。虽然我的目标是 .Net v4.0，但我添加了对 System.Net.Http.dll 的引用。我需要进行一些 json 调用。一切正常……在我的机器上。当我在运行 Windows Xp 的机器上安装可执行文件（wpf 应用程序）时，会出现一个异常，指出**无法加载文件或程序集 System.Net.Http.dll 或其依赖项之一。** 我已将 mvc4 程序集文件夹的所有内容添加到安装文件夹中

C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies

仍然没有。

为了使我的应用程序在 Windows XP 上运行，我需要在安装中包括什么？

运行 mvc 4.0 安装不是一个选项。我需要运行一个安装并且只运行一个。我的申请之一。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:05:58.457

System.net.http 是 .NET 框架 4.5 命名空间，Windows XP 不支持该命名空间。

# html - 将我的徽标链接到主页 html

> ID：14775507
> 
> 赞同：4
> 
> 时间：2013-02-08T15:09:26.983
> 
> 标签：html, css

我想让我的标头中的徽标可点击并链接到主页，但我不知道如何正确执行此操作。

我的代码：

导航菜单：

HTML

```
<div id="myMenu">
            <div class="myWrapper">
                <nav>
                    <div class="logo"></div>
                </nav>
            </div>
        </div> 
```

CSS

```
#myMenu
{
    width: 100%;
    height: 30px;
    z-index: 999; 
    background-color: #252e30;

}
.myWrapper
{
    max-width: 660px;
    margin: 0 auto;
}

.logo
{
    display: inline-block;
    width: 156px;
    height: 30px;
        margin-top: 5px;
        background-size: auto 43px;
    background-image: url(../images/mylogo.png);
    background-repeat: no-repeat;
} 
```

我希望我的徽标可点击并链接到该页面：Homepage.cshtml

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T15:12:01.627

与其使用 CSS 将您的徽标设置为背景图像，不如使用`img`由链接包围的标签有什么问题？像这样：

```
<div id="myMenu">
  <div class="myWrapper">
    <nav>
    <a href="/"><img src="../images/mylogo.png" height="30" width="156" /></a>
    </nav>
  </div>
</div> 
```

这具有更易于访问的额外好处（特别是如果您`alt`在徽标上使用属性），这使搜索引擎机器人更快乐。向用户传达意义的图像内容不应该使用 CSS 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:11:16.323

您最好使用包装在锚标记中的图像。

但否则这应该工作：

```
<div class="logo" onclick="window.location.href='homepage.html'"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:11:54.707

您不能将背景图片设为链接。将图像移动到 HTML 代码中，然后将其设为链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:12:33.920

```
<div id="myMenu">
         <div class="myWrapper">
             <nav>
                 <a href="Homepage.cshtml"><div class="logo"></div></a>
             </nav>
         </div>
    </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-07T07:10:38.927

也可以像下面的例子：

```
<nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #000000;">     
      <div class="logo" >
            <a href="{% url 'major' %}">
                <img src="{% static 'images/logo.gif' %}" style="width:80px;height:80px;"/>
            </a>
      </div>
      .....
</nav> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-08T15:10:36.400

使用 an`<a>`而不是`<div>`logo..

# javascript - jquery-1.8.1 IE7 中的参数无效 - getElementsByTagName

> ID：14775510
> 
> 赞同：0
> 
> 时间：2013-02-08T15:09:35.183
> 
> 标签：javascript, jquery, internet-explorer-7

我很难缩小这个范围。
在 IE8 及更高版本中工作正常。
我什至不知道如何调试它，因为 IE7 没有开发者工具。

错误显示第 6256 行（下面的代码段中的第一个）；char 6（'if' 的字母 'i'）；代码 0：

```
if ( typeof elem.getElementsByTagName !== "undefined" ) { /***this is the line that throws Invalid Argument***/
    // handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration
    jsTags = jQuery.grep( jQuery.merge( [], elem.getElementsByTagName("script") ), handleScript );

    // Splice the scripts into ret after their former ancestor and advance our index beyond them
    ret.splice.apply( ret, [i + 1, 0].concat( jsTags ) );
    i += jsTags.length;
} 
```

该代码是函数*clean*的一部分。

关于如何解决这个问题的任何想法？

**编辑我：** 当我在 IE9 中打开调试器时，在该行放置断点，然后打开堆栈跟踪，这就是我所看到的：

![在此处输入图像描述](../Images/e598d8879c8d504a0c18b9f09647309c.png)

所以我假设它是由 $(document).ready 触发的

**编辑二** 似乎 jsfiddle 目前已关闭，所以我在这里发布代码并创建 jsbin 片段：

[http://jsbin.com/avajuw/1/edit](http://jsbin.com/avajuw/1/edit)

HTML：

```
<div id="navigation-block" style="width: 154px; height: 100%;">
  <ul id="sliding-navigation">
    <li class="sliding-element">
         <h4>Docs</h4>
    </li>
  </ul>
</div> 
```

JS：

```
$(document).ready(function () {
  // the actual code I run is in comments
  // var baseRestUrl = top.location.protocol + '//' + top.location.host + top.location.pathname + 'jaxrs';
  var baseRestUrl = 'http//host:port/archive/jaxrs';
  var linksRestUrl = baseRestUrl + '/links';
  var fileRestUrl = baseRestUrl + '/file';
  // var params = top.location.search;
  var params = 'pnd=231352122&pgv=654321321321';

  // $.getJSON(linksUrl, function(json) {   //to get something like:
  var json = {
    "links": {
        "lista": [{
            "clipExt": "pnd",
            "docId": "1203200110003774",
            "imageDesc": "Front b/w",
            "imageName": "Img_f_bw"
        }, {
            "clipExt": "pgv",
            "docId": "1203200110003774",
            "imageDesc": "Front gray",
            "imageName": "Img_f_gr"
        }]
      }
  };

  //var lista = (!json.links.lista[1]) ? json.links : json.links.lista;
  //alert(lista);

  $.each(json.links.lista, function(i, item) {
    var clipExt = item.clipExt;

    var fileLink = fileRestUrl + '?' +
        'un=' + item.docId + '&' +
        'ext=' + clipExt + '&' + clipExt + '=' + extractParam(params, clipExt);

    $('#sliding-navigation').append(
        "<li class=\"sliding-element\"><a href=\"#\" onclick=\"fetchImage('" + fileLink + "', this)\">" + item.imageDesc + "</a></li>");

  });
});

function extractParam(url, paramName) {
    var tmp = (url.match(RegExp("[?|&]" + paramName + '=(.+?)(&|$)')) || [null])[1];
    return tmp;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T23:21:14.907

给定的“错误”是误导性的 :) 有时如果你给 jquery 一些“不存在的元素”，它希望有一些元素，它只是胡说八道......请尝试在你的书面代码中的某个地方找到问题：做您有为 (document).ready() 注册的任何函数调用吗？每个 dom 节点都是真正的 dom 节点而不是空/未定义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:03:03.023

当 IE7 模式打开时，此 html 在 IE9 中工作，而您在 jafiddle 的示例在相同模式下中断。它与您发布的代码相同，但放在本地文件中。所以问题一定出在其他地方。

使用此标记创建 html 文件（与您的示例相同）并在 IE7 中打开。它有效吗？

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>
<body>
<div id="navigation-block" style="width: 154px; height: 100%;">
    <ul id="sliding-navigation">
        <li class="sliding-element">
             <h4>Dokumenti</h4>

        </li>
    </ul>
</div>
<script>
$(document).ready(function () {
    // the actual code I run is in comments
    // var baseRestUrl = top.location.protocol + '//' + top.location.host + top.location.pathname + 'jaxrs';
    var baseRestUrl = 'http//host:port/archive/jaxrs';
    var linksRestUrl = baseRestUrl + '/links';
    var fileRestUrl = baseRestUrl + '/file';
    // var params = top.location.search;
    var params = 'pnd=231352122&pgv=654321321321';

    // $.getJSON(linksUrl, function(json) {   //to get something like:
    var json = {
        "links": {
            "lista": [{
                "clipExt": "pnd",
                "docId": "1203200110003774",
                "imageDesc": "Front b/w",
                "imageName": "Img_f_bw"
            }, {
                "clipExt": "pgv",
                "docId": "1203200110003774",
                "imageDesc": "Front gray",
                "imageName": "Img_f_gr"
            }]
        }
    };

    //var lista = (!json.links.lista[1]) ? json.links : json.links.lista;
    //alert(lista);

    $.each(json.links.lista, function(i, item) {
        var clipExt = item.clipExt;

        var fileLink = fileRestUrl + '?' +
            'un=' + item.docId + '&' +
            'ext=' + clipExt + '&' + clipExt + '=' + extractParam(params, clipExt);

        $('#sliding-navigation').append(
            "<li class=\"sliding-element\"><a href=\"#\" onclick=\"fetchImage('" + fileLink + "', this)\">" + item.imageDesc + "</a></li>");

    });
});

function extractParam(url, paramName) {
    var tmp = (url.match(RegExp("[?|&]" + paramName + '=(.+?)(&|$)')) || [null])[1];
    return tmp;

}
</script>
</body>
</html> 
```

# .net - .NET2 测试字符串是否为有效路径

> ID：14775525
> 
> 赞同：0
> 
> 时间：2013-02-08T15:10:13.707
> 
> 标签：.net, .net-2.0

.NET 之类`Path.IsPathRooted()`的方法很棒，但如果输入字符串无效，则抛出异常。这很好，但是在跳转到异常检查代码块之前预先检查输入字符串是否是有效路径会很好。

我看不到一个`Path.IsValidPath()`或类似的，有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:17:21.697

您可以使用`File.Exists`或`Directory.Exists`。

如果要检查路径是否包含非法字符（在 NET 2.0 上），可以使用[`Path.GetInvalidPathChars`](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidpathchars%28v=vs.80%29.aspx)：

```
char[] invalidChars = System.IO.Path.GetInvalidPathChars();
bool valid = path.IndexOfAny(invalidChars) != -1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:16:22.103

根据文件，

> `ArgumentException`[当] path 包含 GetInvalidPathChars 中定义的一个或多个无效字符时抛出。

这意味着您可以按如下方式预先验证您的路径字符串：

```
if (path.IndexOfAny(Path.GetInvalidPathChars()) != -1) {
    // This means that Path.IsPathRooted will throw an exception
    ....
} 
```

`IsPathRooted`这是引发异常的唯一条件。

查看[Mono 源代码`Path.cs`](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.IO/Path.cs)，第 496 行，了解如何实现的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:18:57.010

```
public bool ValidPathString(string path)
{
    if (string.IsNullOrEmpty(path)) return false;
    char[] invalidPathChars = System.IO.Path.GetInvalidPathChars();
    foreach (char c in invalidPathChars)
    {
        if(path.Contains(c)) return false;
    }
    return true;
} 
```

# visual-studio - Visual Studio 2005 中的 SSRS 2005 报告

> ID：14775532
> 
> 赞同：0
> 
> 时间：2013-02-08T15:10:32.143
> 
> 标签：visual-studio, visual-studio-2005, reporting-services, reportingservices-2005

下午所有，

我有几个条形图，它们使用一个数据集，每个数据集都有一个指定的存储过程，用于从我的 SQL 数据库中收集数据。

它拉回的数据是我设置为每 30 秒刷新一次的实时数据。

我设法通过将报告上的自动刷新设置为 30 秒来做到这一点。但是我想知道是否有更好的方法来刷新报告，因为刷新速度很慢，并且在加载时条形图会在短时间内消失并加载图像？

非常感谢您的帮助。

贝蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:14:38.943

[http://www.databasejournal.com/features/mssql/report-caching-in-sql-server-reporting-services-2008-r2.html](http://www.databasejournal.com/features/mssql/report-caching-in-sql-server-reporting-services-2008-r2.html)

它可能会帮助您将一些数据保存在缓存中以使其速度更快

这是为了让一些子报告快速获取数据

[http://www.mssqltips.com/sqlservertip/2314/ssrs-report-parts-versus-sub-reports-faq/](http://www.mssqltips.com/sqlservertip/2314/ssrs-report-parts-versus-sub-reports-faq/)

# c#-4.0 - AJAX Toolkit AutoCompleteExtender with PageMethod: 401 Unauthorized error

> ID：14775537
> 
> 赞同：0
> 
> 时间：2013-02-08T15:10:45.310
> 
> 标签：c#-4.0, autocompleteextender

我正在尝试在文本框上实现自动完成功能，该功能使用 AJAX 工具包中的 AutoCompleteExtender 从我们的数据库中提取数据。文本框和控件位于嵌套在 aspx 页面（具有更新面板）上的用户控件上；脚本管理器位于母版页上。

```
<asp:TextBox ID="txtTowelManufacturer" runat="server" Width="200px"></asp:TextBox>
<ajaxToolkit:AutoCompleteExtender ID="txtTowelManufacturer_AutoCompleteExtender" 
    runat="server" MinimumPrefixLength="1" ServiceMethod="GetCompletionList"
    TargetControlID="txtTowelManufacturer" UseContextKey="True">
</ajaxToolkit:AutoCompleteExtender>

[System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethodAttribute()]
public static string[] GetCompletionList(string prefixText, int count, string contextKey)
{
    ...
} 
```

当我使用 cassini 在我的开发盒上运行该页面时，使用扩展器会生成 401 Unauthorized 错误，没有进一步的调试信息。帖子正确，回复为空：

```
{"Message":"There was an error processing the request.","StackTrace":"","ExceptionType":""} 
```

如果我直接或使用相对路径手动指定 ServicePath，则会收到相同的错误。如果我指定了不正确的路径，它会正确生成 404 Not Found 错误，所以我知道它正在寻找正确的位置。

我一直无法弄清楚为什么在这种情况下会出现身份验证错误。我们没有使用 Windows 身份验证或跨越任何域，虽然多次提出 401 问题，但所提出的解决方案都没有对许多人有效，

任何尝试的线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:33:36.057

尝试将`GetCompletionList()`方法从用户控件的`ascx.cs`文件移动到页面的`aspx.cs`.

# javascript - JavaScript - 尝试访问数组但未定义

> ID：14775538
> 
> 赞同：0
> 
> 时间：2013-02-08T15:10:45.840
> 
> 标签：javascript, arrays, undefined

长期以来一直是 Stack Overflow 的读者，但从未加入并提出过问题，但我想这一切都是第一次。

我目前在用于存储 Twitter、Instagram 和 Pinterest 提要以及它们的时间戳的 JS 中的数组存在问题。

这是数组的创建方式...

```
var array = []; 
```

这是一个如何将提要和时间插入数组的示例...

```
for (i < 0; i < 10; i++) {
array[i] = [feed, time] }; 
```

我得到的数组看起来像这样......

```
[[0[0][1]]]
[[1[0][1]]]
[[2[0][1]]] 
```

当我控制台记录以下...

> 控制台.log(数组[[5]]);

我得到这个回应...

```
["<a href="http://www.twi...ontrolled through diet.", "145339"] 
```

我怎样才能单独获得“145339”部分？

我试过`"console.log(array[[5[1]]])"`了，但我收到了“未定义”的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:14:52.233

对于访问多维数组的成员，您要查找的语法更像`array[5][1]`. 我无法从您的代码中确切知道正确答案是什么，但看起来您的语法是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:16:22.703

使用[`split()`](http://www.w3schools.com/jsref/jsref_split.asp)javascript的方法

```
var part = array[[5]];
var arr = part.split(',')
console.log(arr[1]); 
```

# jquery - 长时间运行的 jQuery Ajax 调用

> ID：14775544
> 
> 赞同：0
> 
> 时间：2013-02-08T15:11:07.897
> 
> 标签：jquery, asp.net-web-api

我有 jQuery AJAX 调用，该调用请求来自 WEB API 服务的摘要计数。WEB API 处理请求并调用存储过程（sql server）传递请求参数。存储过程需要更长的时间（超过 10 分钟来处理请求。如果存储过程需要超过 10 分钟，jQuery AJAX 调用将报告状态代码为 12002 或 12152 的未知错误（这些错误与连接问题有关），但Web服务器在10分钟后从存储过程中收到结果。问题出现在浏览器上是IE8.0，IE9.0，firefox，但chrome即使等待超过10分钟也收到响应。有什么解决方案可以保留服务器和客户端之间的通信活动。我尝试将连接请求标头从 ajax 更改为“关闭”、“打开” “保持活力”没有任何作用。请帮帮我。

Java 脚本代码。

```
$.ajax({
type: "post",
url: URLPrefix + 'api/querydispatcher/summary',
data: s,
success: function (data) {
window.clearInterval(int);
$('#wait').hide();
$('#CancelSummary').hide();
$('#backgroundmodal').hide();
$("#tResultTotals").slideDown('slow');
DeserializeJSon(eval(data));
     if (!CancelSummaryRequest) {
           CancelSummaryRequest = true;
          $('#DownloadDetailedReport').show();
    }
            else {

                $('#tResultTotals').hide();
            }
        },
            $('#wait').hide();
            $('#CancelSummary').hide();
            $('#backgroundmodal').hide();
            error_Dialog(request.responseText);
        }

    });
}

Server Side (WEB API) code.

  [WebInvoke(UriTemplate = "summary", Method = "POST")]
        public List<QueryResult> GetSummaryReport_Queue(JsonValue SummaryXML)
        {
            MyContext db = new MyContext();
            DateTime StartTime = DateTime.Now;

            string sumXML = SummaryXML["XMLJson"].ToString().Replace(@"\", "").Replace(@"""", "");
            //These are two codes created by JSon @ the end of the String that need to be trim off.
            sumXML = sumXML.Replace("u000du000a", "");

            List<QueryResult>  results = null;

            XElement xxml = XElement.Parse(sumXML);
            string ReportID = xxml.Descendants("ReportId").FirstOrDefault().Value;

            string err = "";
            try
            {

                results = db.fnReportResult(sumXML).ToList();
             }
            catch (Exception e)
            {

                err = e.Message + " : "+(e.InnerException!=null?e.InnerException.Message : "");
                throw e;
            }
            finally {
                ///--- Record Audit Info.
                double RunningTime = DateTime.Now.Subtract(StartTime).TotalMilliseconds;
                string parameters = "ApplicationType:Query_Dispatcher" + "||User:" + SummaryXML["UserId"].ToString().Replace(@"\", "").Replace(@"""", "") +
                        "||Session:" + SummaryXML["Session"].ToString().Replace(@"\", "").Replace(@"""", "") +
                        "||Running Time:" + RunningTime.ToString() + "||Request Type:Summary Report" +
                        "||Report ID:" + ReportID +
                        "||Error:" + err;

                Audit SaveAudit = new Audit();
                SaveAudit.WriteAudit("Query_Builder", parameters);
                //####-Recording Audit Info
            }

            return results;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:44:53.117

浏览器内置了可能会影响这一点的内部超时。有关更多信息，请参阅此 StackOverflow 问题：[浏览器超时](https://stackoverflow.com/questions/5798707/browser-timeouts)

正如其他人所说，等待 10 分钟等待 AJAX 响应是非常糟糕的，大多数浏览器可能会在默认设置下让您超时 - 即使您将 AJAX 超时设置得非常高。我怀疑你永远不会得到这个工作。

您可以像其他人所说的那样运行查询，然后向用户发送结果链接。但是，另一种解决方案是每 x 分钟在 cron 上运行一次查询并缓存结果。这样，用户可以按需查看结果，而不必等待新的 url 或等待很长时间。

# ruby-on-rails - rails模型的动态属性

> ID：14775545
> 
> 赞同：0
> 
> 时间：2013-02-08T15:11:10.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, model, attributes

我想知道实现我想要的最好方法是什么：p

我有一个模型“ModelA”，它有很多“ModelARate”。ModelARate 包含评论或评分（或两者兼有）。

我不想在每次显示 ModelA 时计算平均费率。因为它对数据库来说并不酷（访问所有 ModelARate 并获取速率......）我还需要知道最低和最高速率。

在 rails 中实现这一目标的最佳方法是什么？（不使用 gem，我需要了解它的实际工作原理）

我正在考虑在 ModelA 中添加一个属性 rate_score ，该属性在创建 ModelARate 时会增加，以及一个返回 rate_score / modelaraates.size 的方法对于最低和最高速率，还有一个属性吗？在 rails 中没有可以为我做到这一点的机制吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:15:34.817

您可以使用 Rails 上的计算方法[http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html)

对于您的模型，给定 ModelA 记录，您可以

```
maximum = model_a.model_a_rates.maximum(:rate)
minimum = model_a.model_a_rates.minimum(:rate)
average = model_a.model_a_rates.average(:rate) 
```

所有这些计算都是在 sql server 上完成的，因此它们非常快，因此您无需担心速度。

# c# - 使用 StreamWriter 时进程无法访问文件

> ID：14775547
> 
> 赞同：7
> 
> 时间：2013-02-08T15:11:16.447
> 
> 标签：c#, file

基本上我想创建一个文件，如果不存在然后向它写入消息。

```
if (!File.Exists(filePath + fileName))
    File.Create(filePath + fileName);
StreamWriter sr = new StreamWriter(filePath + fileName,false); 
```

如何处理这个错误？

> 该进程无法访问文件“c:\blahblah”，因为它正被另一个进程使用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T15:13:29.293

`File.Create`打开一个`FileStream`（[http://msdn.microsoft.com/en-us/library/d62kzs03.aspx](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)）。

由于您没有处理它，因此如果从其他句柄（即 other`FileStream`或 whole `StreamWriter`）执行这些操作，文件将保持锁定，并且由于这种情况，对文件的后续访问将失败。

此代码演示了您应该如何使用以下`IDisposable`对象`FileStream`：

```
if (!File.Exists(filePath + fileName))
{
    File.Create(filePath + fileName).Dispose();

    using(StreamWriter sr = new StreamWriter(filePath + fileName,false))
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T15:13:43.230

为什么不直接使用`StreamWriter`接受文件名的构造函数呢？

```
StreamWriter sr = new StreamWriter(filePath + fileName); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/fysy0a4b.aspx)：

> path 参数可以是文件名，包括通用命名约定 (UNC) 共享上的文件。**如果文件存在，则覆盖；否则，将创建一个新文件。**

非常次要的一点，但您可以考虑[`Path.Combine`](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)在连接文件名和文件夹路径时使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T15:16:38.467

通过使用单一方法创建和打开文件来简化代码：

```
using (FileStream fs = File.OpenWrite(path)) 
{
    Byte[] info = new UTF8Encoding(true)
                         .GetBytes("This is to test the OpenWrite method.");

    fs.Write(info, 0, info.Length);
} 
```

MSDN：（[File.OpenWrite 方法](http://msdn.microsoft.com/en-us/library/system.io.file.openwrite%28v=vs.100%29.aspx)）

> 打开现有文件或创建新文件以进行写入。

# json - JSON/RPC/Client.pm 丢失 - Fedora 17

> ID：14775549
> 
> 赞同：1
> 
> 时间：2013-02-08T15:11:17.457
> 
> 标签：json, perl, rpc

我想使用 Zabbix API 运行 JSON 请求，但出现以下错误：

```
Can't locate JSON/RPC/Client.pm in @INC (@INC contains: /usr/local/lib64/perl5 
/usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl                 
/usr/lib64/perl5 /usr/share/perl5 .) at ./test.perl line 6. 
```

我正在使用 Fedora 17，但找不到名为: 的包`libjson-rpc-perl`。我已经安装了以下软件包：

```
perl-CGI-Application-Plugin-JSON.noarch                                          1.02-   5.fc17                                                            fedora                      
perl-Catalyst-View-JSON.noarch                                                   0.30-5.fc17                                                            fedora                      
perl-JSON-Any.noarch                                                             1.29-1.fc17                                                            fedora                      
perl-JSON-Any-tests.noarch                                                       1.29-1.fc17                                                            fedora                      
perl-JSON-PP.noarch                                                              2.27200-3.fc17                                                         fedora                      
perl-JSON-Path.noarch                                                            0.101-2.fc17                                                           fedora                      
perl-JSON-RPC-Daemon.noarch                                                      1.03-2.fc17                                                            updates                     
perl-JSON-RPC-legacy.noarch                                                      1.01-2.fc17                                                            fedora                      
perl-JSON-RPC-legacy-server.noarch                                               1.01-2.fc17                                                            fedora                      
perl-JSON-Util.noarch                                                            0.05-3.fc17                                                            fedora                      
perl-JSON-XS.x86_64                                                              1:2.32-1.fc17                                                          fedora                      
perl-JSON-XS-tests.x86_64                                                        1:2.32-1.fc17                                                          fedora                      
perl-JSON-tests.noarch                                                           2.53-4.fc17                                                            fedora                      
perl-MooseX-Types-JSON.noarch                                                    0.02-7.fc17                                                            fedora                      
perl-MooseX-Types-JSON-tests.noarch                                              0.02-7.fc17                                                            fedora                      
perl-Test-CPAN-Meta-JSON.noarch                                                  0.13-1.fc17                                                            fedora                      
perl-Test-JSON.noarch                                                            0.11-6.fc17                                                            fedora                      
perl-Test-JSON-tests.noarch                                                      0.11-6.fc17                                                            fedora 
```

我不知道现在该怎么办？你能建议吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-10T09:07:52.097

在您的代码中：

```
use JSON::RPC::Legacy::Client; 
```

并改变：

```
my $client     = new JSON::RPC::Legacy::Client; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:16:32.960

使用[CPAN](http://search.cpan.org/~dmaki/JSON-RPC-1.03/lib/JSON/RPC.pm)安装 JSON::RPC。这通常是简单的程序。还有一个工具可以将 CPAN 发行版转换为 rpm，但您可能会发现 cpan 更易于处理，无需额外的转换步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:39:28.220

一般来说，在 Fedora（以及 Red Hat 世界中的任何其他地方）中，如果您不知道哪个包包含您需要的模块，您可以运行：

```
% yum install 'perl(Module::Name)' 
```

在这种情况下，这将是：

```
% yum install 'perl(JSON::RPC::Client)' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:16:33.987

JSON::RPC::Client 由旧版本的[JSON-RPC](https://metacpan.org/release/JSON-RPC)提供。JSON-RPC 1.00 版打破了与以前版本的向后兼容性，不再包含该模块。您必须安装旧版本才能使此代码正常工作（或更新代码以使用新 API）。您可以[在此处获取 JSON-RPC 0.96（最后一个兼容版本）](https://metacpan.org/release/MAKAMAKA/JSON-RPC-0.96/)。

您可以仅为此代码[将旧版本安装在私有位置。](http://learn.perl.org/faq/perlfaq8.html#How-do-I-keep-my-own-module-library-directory-)

# c++ - 为什么我不能拒绝小数？(C++)

> ID：14775559
> 
> 赞同：-2
> 
> 时间：2013-02-08T15:11:42.647
> 
> 标签：c++

使用此代码：

```
#include <iostream>
#include <iomanip>
using namespace std;

//Functions
int power(int base,int exp);
double energy(int z, int n);

//Main
int main() {

    const double E0(13.6),hce(1.24E-6),e(1.6E-19);
    int n1,n2,z;
    double E;
    cout << "**************************************" << endl;
    cout << "Welcome to the energy level calculator\n" << endl;
    cout << "Please enter the atomic number, z: " << endl;
    cin >> z;   //Ask for z
    cout << "Please enter n for the initial energy level: " << endl;
    cin >> n1;  //Ask for n1
    cout << "Please enter n for the final energy level: " << endl;
    cin >> n2;  //Ask for n2

    while(cin.fail()||z<1||n1<1||n2<1){
        cout << "\n\n\n\n\nPlease enter non-zero integers only, try again\n\n\n\n\n\n" << endl;
        cout << "**************************************" << endl;
        cin.clear();
        cin.ignore();
        cout << "Please enter the atomic number, z: " << endl;
        cin >> z;   //Ask for z
        cout << "Please enter n for the initial energy level: " << endl;
        cin >> n1;  //Ask for n1
        cout << "Please enter n for the final energy level: " << endl;
        cin >> n2;  //Ask for n2
    }
    etc... 
```

该程序只允许接受整数如果我输入一个小数，例如 1.2，程序拒绝 1。但是当它应该要求从键盘输入时使用 2 作为 z？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:26:43.583

既然你要求解释，当你进入`1.2`

```
cin >> z;   //Successfully reads '1' into 'z'

cin >> n1;  //Fails to read '.' into 'n1'. '.' remains the first character in the stream.

cin >> n2;  //Fails to read '.' into 'n2'. '.' remains the first character in the stream. 
```

然后，您循环回到循环的开头。

```
cin.clear(); //clears the fail flag from the two previous failed inputs
cin.ignore(); // ignores the '.'

cin >> z;   //Reads '2' into 'z'. The stream is now empty. 
```

然后程序阻塞`cin >> n1`等待更多字符被放入流中。

每次输入后，您应该查看输入是否失败。

```
cin>>n1;
if(cin.fail())
   cin.ignore(); 
```

# sql - MySQL - 连接表，仅检索最大 ID

> ID：14775561
> 
> 赞同：11
> 
> 时间：2013-02-08T15:12:01.120
> 
> 标签：sql, max, greatest-n-per-group

我在其他帖子上看到了类似问题的解决方案，但我在将其应用于我的具体问题时遇到了问题。

这是我最初的加入：

```
SELECT service_note_task, comment_id, comment FROM service_note_task LEFT JOIN service_note_task_comments ON service_note_task.service_note_task_id = service_note_task_comments.service_note_task_id; 
```

结果是：

```
+-----------------------------+------------+--------------+
| service_note_task           | comment_id | comment      |
+-----------------------------+------------+--------------+
| This is service note task 3 |         25 | Comment      |
| This is service note task 3 |         26 | Comment Blah |
| This is service note task 3 |         36 | aaa          |
| This is service note task 2 |         13 | Awesome comm |
| This is service note task 1 |         12 | Cool Comm    |
+-----------------------------+------------+--------------+ 
```

但是对于每个 service_note_task，我真的只需要一行来表示具有最高 comment_id 的评论，如下所示：

```
+-----------------------------+------------+--------------+
| service_note_task           | comment_id | comment      |
+-----------------------------+------------+--------------+
| This is service note task 3 |         36 | aaa          |
| This is service note task 2 |         13 | Awesome comm |
| This is service note task 1 |         12 | Cool Comm    |
+-----------------------------+------------+--------------+ 
```

我想我可以在子选择语句中使用 MAX 来缩小我想要的结果。我如何将其纳入我的陈述以获得这些结果？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T16:25:30.750

作为参考，这被称为“groupwise-maximum”

[http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column-group-row.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:16:24.403

因为您没有提到您正在使用的 RDBMS，所以下面的这个查询主要适用于许多 RDBMS（*不是全部*）

```
SELECT  a.*, b.*   -- select only the columns you want. 
FROM    service_note_task a
        INNER JOIN service_note_task_comments b
            ON a.service_note_task_id = b.service_note_task_id
        INNER JOIN 
        (
            SELECT  service_note_task_id, MAX(commentID) max_ID
            FROM    service_note_task_comments
            GROUP   BY service_note_task_id
        ) c ON  b.service_note_task_id = c.service_note_task_id AND
                b.commentID = c.max_ID 
```

如果您的 RDBMS 支持分析函数，您可以在下面使用它，

```
SELECT  a.service_note_task, b.comment_id, b.comment 
FROM    service_note_task a
        INNER JOIN 
        (
            SELECT  service_note_task_id, comment_id, comment,
                    ROW_NUMBER() OVER (PARTITION BY service_note_task_id
                                        ORDER BY comment_id DESC) rn
            FROM    service_note_task_comments
            GROUP   BY
        ) c ON  a.service_note_task_id = b.service_note_task_id AND
                b.rn = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:27:09.923

尝试：

```
SELECT service_note_task, comment_id, comment 
FROM service_note_task SNT1 
LEFT JOIN service_note_task_comments ON service_note_task.service_note_task_id = service_note_task_comments.service_note_task_id
WHERE comment_id = (SELECT MAX(comment_id) FROM  service_note_task SNT2 WHERE SNT1.service_note_task = SNT2.service_note_task); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:29:04.393

```
SELECT service_note_task, comment_id, comment
FROM service_note_task s LEFT JOIN service_note_task_comments sc
  ON s.service_note_task_id = sc.service_note_task_id;
WHERE EXISTS (
              SELECT 1
              FROM service_note_task_comments s2
              WHERE s.service_note_task_id = s2.service_note_task_id
              HAVING MAX(s2.comment_id) = sc.comment_id
              ) 
```

# google-visualization - 柱形图未显示所有图例

> ID：14775564
> 
> 赞同：1
> 
> 时间：2013-02-08T15:12:10.283
> 
> 标签：google-visualization

我正在尝试使用google api制作图表，但图表底部有问题，因为我想显示所有条形图及其各自的数字，有我的代码。

我需要用它们各自的“传说”来描述所有的酒吧。

```
 var data = new google.visualization.DataTable();
    data.addColumn("number", "x");
    data.addColumn("number", "y");

    for (var i = 0; i < response.x.length; i++) {       
        data.addRows([[response.x[i], response.y[i]]]);
    }

    var options = {
        colors: ["#30c0cd", "#ee5f3e"],
        title: "title"
    };

    var chart = new google.visualization.ColumnChart($("#dholder")[0]);
    chart.draw(data, options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:46:06.670

如果您的 x 和 y 轴是连续的（而不是离散的），则谷歌图表 api 将尝试找到最佳值并且不会显示每个标签。尝试：

```
data.addColumn("string", "x"); 
```

# excel - 传递 SeriesCollection 对象时出现类型不匹配错误

> ID：14775567
> 
> 赞同：2
> 
> 时间：2013-02-08T15:12:14.480
> 
> 标签：excel, vba

已经在网上搜索了这个问题，但没有运气。我正在使用 Excel 14.0，尽管我讨厌将 VBA 用于图表目的，但我别无选择。我需要偶尔更新几十张图表。Excel 只是不提供执行此操作的简单方法，例如在源数据范围上查找替换。

也许我对 VBA 来说太复杂了。我知道它有它的局限性，但我总是毫无问题地传递对象。这是我想要做的。看起来很简单。我似乎无法传递 SeriesCollection 对象。试过 ByRef、ByVal，都给出类型不匹配错误。我什至尝试不使用 With/End With 块。我还确保是 SeriesCollection 参数引发了错误。我想我可以只为 seriescollection 传递图表对象和一个整数，但是 imo 变量太多了。

```
Sub mcrMyCode1()
    With ActiveChart
        Call mcrSeriesMod(.SeriesCollection(1), "HD", "HO", "Avg", 34, 57)
    End With
End Sub
Sub mcrMyCode2()
    Call mcrSeriesMod(ActiveChart.SeriesCollection(1), "HD", "HO", "Avg", 34, 57)
End Sub

Sub mcrModSeries(ByRef SeriesMod As SeriesCollection, _
                ByVal sStCol As String, _
                ByVal sEndCol As String, _
                ByVal sTitle As String, _
                ByVal iXRow As Integer, _
                ByVal iYRow As Integer)            
    With SeriesMod
        .XValues = "=Sheet1!$" & sStCol & "$" & iXRow & ":$" & sEndCol & "$" & iXRow
        .Values = "=Sheet1!$" & sStCol & "$" & iYRow & ":$" & sEndCol & "$" & iYRow
        .Name = sTitle
    End With
End Sub 
```

# sql - 连接 SQL 表

> ID：14775569
> 
> 赞同：0
> 
> 时间：2013-02-08T15:12:22.343
> 
> 标签：sql, join, merge, union

我有两张桌子：

推荐的朋友和添加的朋友

每个表都有一个用户字段和一个朋友字段。我试图弄清楚如何才能看到用户添加了多少朋友，他们也被推荐了。下面是表格的示例：

```
RecommendedFriends
User    Friends     Time
------------------------------------
Jake    Eric        8:00am
Jake    John        8:00am
Jake    Jack        8:30am
Greg    John        8:30am
Greg    Tim         9:00am
Greg    Steve       9:30am
Will    Jackson     9:30am

AddedFriends
User    Friends     Time
------------------------------------
Jake    Jack        8:35am
Greg    John        8:35am
Greg    Tim         9:00pm
Greg    Jim         10:30am
Greg    Tina        10:45am
Greg    Bob         10:00am
Charlie Brian       11:00am 
```

所以我需要的表看起来像这样：

```
Results
User    RecFriends  AddFriends   
------------------------------------
Jake    Eric        
Jake    John        
Jake    Jack        Jack
Greg    John        John
Greg    Tim         Tim
Greg    Steve       
Greg                Tina
Will    Jackson     
Charlie             Brian 
```

所以我可以进去说 3 人添加了他们被推荐的朋友，4 人推荐失败，2 人添加了他们未被推荐的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:15:47.773

我想你想要的是`full outer join`：

```
select coalesce(rf.USER, af.user) as user, rf.friends as RecFriends, af.Friends as AddFriends,
from RecommendedFriends rf full outer join
     AddedFriends af
     on rf.user = af.user and
        rf.Friends = af.Friends 
```

这不考虑时间。如果您想推断推荐和添加之间的因果关系，您可能需要检查添加的时间是否在推荐的时间之后。

如果您使用的数据库不支持`full outer join`（任何人都可以说“MySQL”），您可以获得相同的结果：

```
select t.user, MAX(case when which = 'rec' then friends end) as RecFriends,
       MAX(case when which = 'add' then friends end) as AddFriends
from ((select rf.user, rf.friends, 'rec' as which
       from RecommendedFriends af.user
      ) union all
      (select af.user, af.friends, 'add' as which
       from AddedFriends af
      )
     ) t
group by user 
```

这个版本有一个很好的特性，它不会产生重复的记录，在多个推荐或添加的情况下。

# java - 找不到内容类型 application/json 的 MessageBodyReader

> ID：14775572
> 
> 赞同：2
> 
> 时间：2013-02-08T15:12:34.957
> 
> 标签：java, unit-testing, testing, resteasy

我有一个`RestEasy`从休息端点获取数据的客户端。测试看起来像

```
 @Test
    public void testGetAllVariablesWithoutQueryParamPass() throws Exception {
        final ClientRequest clientCreateRequest = new ClientRequest("http://localhost:9090/variables");
        final MultivaluedMap<String, String> formParameters = clientCreateRequest.getFormParameters();
        final String name = "testGetAllVariablesWithoutQueryParamPass";
        formParameters.putSingle("name", name);
        formParameters.putSingle("type", "String");
        formParameters.putSingle("units", "units");
        formParameters.putSingle("description", "description");
        formParameters.putSingle("core", "true");

        final GenericType<List<VariablePresentation>> typeToken = new GenericType<List<VariablePresentation>>() {
        };
        final ClientResponse<List<VariablePresentation>> clientCreateResponse = clientCreateRequest.post(typeToken);
        assertEquals(201, clientCreateResponse.getStatus());
        final List<VariablePresentation> variables = clientCreateResponse.getEntity();
        assertNotNull(variables);
        assertEquals(1, variables.size());

    } 
```

我不知道如何验证`ClientResponse`，所以我在[这里](https://stackoverflow.com/questions/14774800/resteasy-how-to-validate-clientresponse-body)得到了帮助 但是当我运行我的测试时，我看到一个单独的问题，我不知道如何解决这个问题，请帮助我

```
testGetAllVariablesWithoutQueryParamPass(com.myorg.project.market.integration.TestVariable): Unable to find a MessageBodyReader of content-type application/json and type java.util.List<com.myorg.project.service.presentation.VariablePresentation> 
```

* * *

添加maven依赖后

```
<dependency>
    <groupId>org.jboss.resteasy</groupId>
    <artifactId>resteasy-jackson-provider</artifactId>
    <version>3.0-beta-2</version>
</dependency> 
```

测试错误：

```
testGetAllVariablesWithoutQueryParamPass(com.myorg.project.market.integration.TestVariable): org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token(..)

Tests run: 9, Failures: 0, Errors: 1, Skipped: 1 
```

有一个后续问题[RestEasy：org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of java.util.ArrayList out of START_OBJECT token(..)](https://stackoverflow.com/questions/14776034/resteasy-org-codehaus-jackson-map-jsonmappingexception-can-not-deserialize-in)

# c# - 是否可以在 MStest 中完成所有测试后运行代码

> ID：14775574
> 
> 赞同：25
> 
> 时间：2013-02-08T15:12:40.910
> 
> 标签：c#, mstest

我正在编写编码的 ui 测试，如果应用程序尚未打开，我会打开它。然后，如果其中一个失败，我关闭应用程序，事情是我在多个项目中有多个测试，有没有办法在所有测试完成执行后关闭应用程序？testSettings 文件中可能有什么东西吗？

如果这有帮助，我所有的测试类都派生自一个 codeduiTestBase，这就是我设置我所拥有的设置的方式。

我不想在每次测试运行之前和之后打开和关闭应用程序，因为它是一个大应用程序并且加载时间太长。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-08T15:18:01.530

是的，有可能。您可以为此目的使用 AssemblyCleanup 属性：

> 标识一个方法，该方法包含要在程序集中的**所有**测试都运行后使用的代码并释放程序集获得的资源。

以下是根据执行时间排列的所有 MSTest 方法的概述：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using SampleClassLib;
using System;
using System.Windows.Forms;

namespace TestNamespace
{
    [TestClass()]
    public sealed class DivideClassTest
    {
        [AssemblyInitialize()]
        public static void AssemblyInit(TestContext context)
        {
            MessageBox.Show("AssemblyInit " + context.TestName);
        }

        [ClassInitialize()]
        public static void ClassInit(TestContext context)
        {
            MessageBox.Show("ClassInit " + context.TestName);
        }

        [TestInitialize()]
        public void Initialize()
        {
            MessageBox.Show("TestMethodInit");
        }

        [TestCleanup()]
        public void Cleanup()
        {
            MessageBox.Show("TestMethodCleanup");
        }

        [ClassCleanup()]
        public static void ClassCleanup()
        {
            MessageBox.Show("ClassCleanup");
        }

        [AssemblyCleanup()]
        public static void AssemblyCleanup()
        {
            MessageBox.Show("AssemblyCleanup");
        }

        [TestMethod()]
        [ExpectedException(typeof(System.DivideByZeroException))]
        public void DivideMethodTest()
        {
            DivideClass.DivideMethod(0);
        }
    }
} 
```

参见：[MSTest-Methods](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblycleanupattribute%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-31T10:45:16.787

**重要的**

使用基类的人也可以在那里进行程序集清理

```
[TestClass]
public class Page : PageContract, IWindowControlAccess
{
[AssemblyCleanup()]
    public static void ApplicationCleanup()
    {
        Cleanup();
    }
} 
```

这里有两件重要的事情 1\. 基础的 [TestClass] 属性是 MANDATORY

2\. ApplicationCleanup 的签名看它是一个**静态**方法

就是这样，你就完成了。我很难挣扎和调试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:16:40.730

也许您正在寻找的是[TestCleanup 属性](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testcleanupattribute%28v=vs.80%29.aspx)？

编辑：另外，如果您想在所有测试都运行后运行某些东西，则[AssemblyCleanupAttribute](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblycleanupattribute%28v=vs.80%29.aspx)可能更合适。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-20T10:08:12.937

如果您只想在单个类中的所有测试完成后进行清理，请使用 ClassCleanup 属性而不是 AssemblyCleanup 属性

# r - 在 R 中使用库（ROCR）创建 ROC 曲线的困难

> ID：14775577
> 
> 赞同：0
> 
> 时间：2013-02-08T15:12:53.123
> 
> 标签：r

我有一个简单的 2 列数据框，标签（二进制）是`Benign`，`Malignant`并且预测变量是五点序数变量这里是摘要

```
 data.frame':   127 obs. of  2 variables:
 $ GRADE        : Ord.factor w/ 5 levels "benign"<"likely benign"<..: 1 1 1 1 1 1 1 1 1 1 ...
 $ BENIGN.MALIGN: Factor w/ 2 levels "Benign","Malignant": 1 1 1 1 1 1 1 1 1 1 ... 
```

但是当我使用：

```
pred<-prediction(myTable[[1]],myTable[[2]]) 
```

我收到此错误消息：

```
Error in prediction(myTable[[1]], myTable[[2]]) : 
Format of predictions is invalid. 
```

我能做些什么来纠正这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:35:29.030

如果您使用成绩作为分数，并且已经验证或假设分数中的间隔是等距的，您可以将 5 点李克特转换为数字形式，如下所示：

`pred <- prediction(as.numeric(myTable[[1]]), myTable[[2]])`

# c - 数组宏定义

> ID：14775578
> 
> 赞同：0
> 
> 时间：2013-02-08T15:12:53.890
> 
> 标签：c, r, c-preprocessor

我正在尝试定义一个`macro`将`2D array`语法转换为`1D vector`. 即，对于一个`12x12`数组，`matrix[i,j]`应该评估为`matrix[12*i + j]`. 到目前为止我已经尝试过

```
#define matrix[i,j] matrix[12*i+j]

#define (matrix[i,j]) matrix[12*i+j]

#define matrix[(i,j)] matrix[12*i+j]

#define matrix([i,j]) matrix[12*i+j]` 
```

我使用`matrix[i,j]`语法的原因是因为它将是从 R 代码调用的扩展，并且我希望该项目的其他作者能够准确地理解正在做什么。有没有办法用宏来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:16:22.803

您可以做的唯一方法是使用`( )`而不是使用`[]`

```
#define matrix(i,j) matrix[12*i+j] 
```

在代码中，您以这种方式定义矩阵

```
int matrix[12*12];
matrix(i,j) = 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:06:55.573

最好只为计算定义一个宏，而不是取消引用。

```
#define X_DIM 12
#define Y_DIM 12
#define D21(x,y) (X_DIM*(x)+(y))

int my_matrix1[X_DIM*Y_DIM];
double my_matrix2[X_DIM*Y_DIM];

my_matrix1[D21(4, 3)];
my_matrix2[D21(2, 1)]; 
```

因此，您不仅限于宏中定义的唯一矩阵。

更根本的是，你为什么还要这么做？正常的多维数组语法已经可以做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:21:01.577

像这样的东西可能会起作用：

```
#define TO_1D(m,x,y) (m[x*12+y])

int matrix[100];
TO_1D(matrix, 0, 4) = 13; 
```

但我想知道为什么你不喜欢更安全的东西，比如：

```
int data[100];
inline int& matrix(int x, int y)
{
   return data[x*12+y];
} 
```

# php - 使用PHP判断URL是否为二级子目录

> ID：14775579
> 
> 赞同：0
> 
> 时间：2013-02-08T15:12:57.397
> 
> 标签：php, url, subdirectory

我只需要在我的网站上的二级子目录中显示某个图像。因此，如果我的 URL 是`www.mywebsite.com/`或者`www.mywebsite.com/subdirectory1/`我不希望图像出现。

但是，如果我的 URL 是，`www.mywebsite.com/subdirectory1/subdirectory2/`那么我确实希望图像出现。

我将如何确定我是否在使用 PHP 的二级子目录中？我会用`is_dir`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:17:01.070

```
if (count(explode("/",$_SERVER["SERVER_NAME"]))>=3) {
    echo "IM IN 2nd LEVEL";
} else {
    echo "IM ONLY A 1st LEVEL";
} 
```

应该这样做有点像黑客，但有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:17:13.803

你可以这样做：

```
$path = parse_url($url, PHP_URL_PATH);

if($path){
  $elements = explode('/', trim($path, '/'));

  if(count($elements) > 1){
    // show the image...
  }

} 
```

（PS：URL需要以scheme开头，比如`http://`，或`//`）

# visual-studio-2010 - MSBuild 项目与解决方案的相对路径

> ID：14775587
> 
> 赞同：5
> 
> 时间：2013-02-08T15:13:22.657
> 
> 标签：visual-studio-2010, msbuild

我有许多项目被加入到一个解决方案中。每个项目都有自己的目录结构，并且 csproj 文件位于不同级别的文件夹结构中。每个 csproj 都指定了 OutputPath 属性。OutputPath - 是一个相对路径，它因项目而异，因此所有项目都具有相同的输出目录。如果我建立一个单独的项目就可以了。但是如果我尝试构建解决方案文件，一切都会改变。在这种情况下，每个项目的输出文件夹都不同（取决于该项目的 OutputPath 中的“..\”数量）。

我知道，在某个时刻之前一切正常。没有人改变 build.cmd 也没有任何 sln 或 csproj 文件。但现在我有上述情况。

所以我的问题是 - 是什么影响了相对路径的评估方式？我的意思是如何强制从该特定项目的 csproj 文件所在的文件夹开始评估相对 OutputPath。不是来自 .sln 文件所在的文件夹。

```
Let's assume I have following directory structure:

dir1
  a.sln
  dir2
    a.csproj
  dir21
    dir3
      b.csproj 
```

a.csproj 的输出路径设置为“../../_bin”，如果从 a.csproj 文件夹计数，则它位于 dir1 上方 b.csproj 的输出路径设置为“../../../_bin”，其中是相同的 - 如果从 b.csproj 计算，大约是 dir1

a.sln 包含 - a.csproj 和 b.csproj。

当我运行 msbuild 时，我得到一个项目构建到 'dir1/../../_bin' 和 b 项目到 'dir1/../../../_bin' - 项目文件的两个相对路径都从解决方案中计算文件位置，而不是项目文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T14:07:51.897

好吧，我能够找出造成这种情况的原因。那是自定义 .targets 文件，它在任何 msbuild 开始时推断 SolutionDir 属性。我确实通过使用 MSBuild Explorer 发现了这一点。事实证明，该工具对我来说非常有用——我不知道我的系统上有第三方 .target 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T11:49:44.997

从[Msbuild 导入元素描述](http://msdn.microsoft.com/en-us/library/92x05xfs.aspx)

> 导入项目中的相对路径相对于导入项目的目录进行解释。因此，如果将一个项目文件导入到不同位置的多个项目文件中，则导入的项目文件中的相对路径将针对每个导入的项目进行不同的解释。
> 
> 与项目文件相关的所有 MSBuild 保留属性（例如，在导入项目中引用的 MSBuildProjectDirectory 和 MSBuildProjectFile）均根据导入项目文件分配值。

如果您在问题中添加更多细节或少量示例 - 将更容易理解确切的问题。

编辑：好的，让我们试着找出那个谜。首先 - OutputPath 可能受环境变量的影响。

2nd - 在构建 sln 文件期间转换为 msbuild 项目文件格式并存储在临时文件中。如果您在 cmd "set msbuildemitsolution=1" 中执行，然后通过命令行触发构建，您可以获得该临时文件。在那里您可以检查该文件并查看您的各个项目是如何调用的。但我想你会看到多个 .csproj /> 条目。以及由该调用继承的全局 msbuild 属性。

所以我怀疑在某个时间点之前一切都很好并且没有进行任何更改 - 您缺少 OutputPath 环境变量或其他有助于构建 OutputPath 的变量。

顺便说一句 - 我认为如果你想解决强制相对目录的问题 - 你也可以使用 $(MSBuildProjectDirectory)。这是 msbuild 保留属性之一（来自[此处](http://msdn.microsoft.com/en-us/library/vstudio/ms164309.aspx)），但这需要您调整每个 csproj 文件中的 OutputPath。我个人更愿意避免的，因为它可能会影响其他一些目标并引入微妙的问题。

# jquery - 在使用 JQuery 将它们添加到 DOM 之前设置表单选择值

> ID：14775603
> 
> 赞同：0
> 
> 时间：2013-02-08T15:14:36.617
> 
> 标签：jquery, html, select

在将元素添加到 DOM 之前，是否可以使用 JQuery 在 HTML 表单中选择选择输入元素的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:26:52.497

是的。您可以构造任何 html 并在将其插入 DOM 之前对其进行操作。

```
var $select = $("<select>");
$("<option value='val1'>Value1</option>").appendTo($select);
$("<option value='val2' selected>Value2</option>").appendTo($select);
$select.appendTo($("#someElement"));    // (add element to DOM) 
```

# jquery - jQuery 切换、隐藏和更改类

> ID：14775607
> 
> 赞同：1
> 
> 时间：2013-02-08T15:14:40.813
> 
> 标签：jquery

我确信这里应该已经涵盖了这一点，但我无法找到专门处理这个问题的问题。

我在一个页面中有 2 个 div，就像这样......

```
<div class="span4 section">
    ...content...
</div>
<div class="span8 section">
...content...
</div> 
```

我需要实现一个onclick，它将隐藏span4 div并将span8 div的类更改为span12，然后可以将其恢复（我假设使用jQuery.toggle）。

我可以成功地做一个或另一个，但不能使用我有限的 JS/jQuery 知识同时让这两件事工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:22:04.313

你应该为你的 span8 类添加另一个类名，例如`toggleSpan`，然后

```
$('.clickElement').click(function () {
  $('.span4').toggle(); // this toggles only visibility
  $('.toggleSpan').toggleClass('span8 span12');
}); 
```

假设您要用作触发器的元素具有类`clickElement`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:24:39.230

您可以使用数据属性来帮助您解决此问题。这应该看起来像这样：

```
$('#target').click(function(event){
    if ($(this).data('toggled') == '1') {
        $('.span8').addClass('span12').removeClass('span8');
        $(this).data('toggled', '0');
    } else {
        $('.span12').addClass('span8').removeClass('span12');
        $(this).data('toggled', '1');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:20:44.167

```
$(this).toggleClass('span12 section');
$('.class="span4 section").hide(); 
```

单击时调用此函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:23:08.570

试试这个：http: [//jsfiddle.net/SwANP/](http://jsfiddle.net/SwANP/)

```
$('.section').click(function(){
   $('.section:eq(0)').toggleClass('span4');
   $('.section:eq(1)').toggleClass('span8 span12');
}); 
```

# webkit - GTK# Webkit System.DllNotFoundException 缺少文件 webkitgtk-1.0.so.0

> ID：14775609
> 
> 赞同：1
> 
> 时间：2013-02-08T15:14:44.260
> 
> 标签：webkit, monodevelop, gtk#

GTK# Webkit System.DllNotFoundException 缺少文件 webkitgtk-1.0.so.0

我编写了以下编译成功的 GTK# 应用程序，代码如下：

```
using System;
using Gtk;
using GtkSharp;
using WebKit;

namespace gtk_test
{
class Hello {

        static void Main()
        {
                Application.Init (); 

                //MainWindow window = new MainWindow ();
                Window window = new Window ("TEST");
                window.Fullscreen();

                Fixed frmtest=new Fixed();
                frmtest.SetSizeRequest(1280,1024);
                Label test = new Label();
                test.Text = "Hello and Welcome to GTK#";
                Button btnclose = new Button();
                btnclose.SetSizeRequest(100,50);
                btnclose.Clicked +=  btnclose_clicked;
                btnclose.Label = "Exit Program";
                btnclose.TooltipText = "close program!";
                ScrolledWindow scrollWindow = new ScrolledWindow ();;
                scrollWindow.SetSizeRequest(1000,900);
                WebView webView = new WebView ();
                webView.SetSizeRequest(1200,1000);
                webView.Open ("www.bbc.co.uk/sport");
                scrollWindow.Add (webView);
                frmtest.Put(test,10,50);
                frmtest.Put(btnclose,10,75);
                frmtest.Put(scrollWindow,10,100);
                window.Add(frmtest);
                window.Show();
                window.ShowAll();
                Application.Run ();

        }

        static void  btnclose_clicked (object sender, EventArgs e)
        {
            Application.Quit();

        }
}

} 
```

但是它会因 System.DllNotFoundException 错误而崩溃，说明 webkitgtk-1.0.so.0 文件丢失。我在互联网上研究过寻找解决方案，但似乎找不到任何解决方案。GTksharp 和 Webkitsharp 已安装。它还需要 webkitgtk 吗？我现在正在尝试这个！我真的很难找出我没有安装的东西。注意 /usr/lib64 有一个 libwebkit-1.0.so.2 文件，但没有 libwebkit-1.0.so.0 文件，应该存在吗？

谢谢你的帮助，

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:56:09.213

我使用的 DLL 文件版本不正确。我手动编译了 Webkit# 并从源代码复制到 DLL 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T17:26:57.733

我还修复了我原来安装的 webkit-sharp (yum install webkit-sharp*)

我只是将我的配置文件更改为（从 webkitgtk-1.0.so.0 到 webkitgit-1.0.so.2）

```
<configuration>
     <dllmap dll="webkit-1.0" target="webkitgtk-1.0.so.2"/>
</configuration> 
```

这是为了读取正确的库文件，而不是不存在的 webkitgtk-1.0.so.0。

# php - 需要在数据库中插入图像并在 php 和 mysql 中检索它

> ID：14775613
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:14:53.783
> 
> 标签：php, mysql, content-management-system, phpmyadmin

我是开发简单内容管理系统的 php 新手，我有一个字段，如菜单、位置、可见、img_des、内容、信息 ID .. 它几乎所有工作都正常，现在我需要向其中插入图像字段。我现在有一个单独的文件用于表单和新页面创建，下面的代码

```
 if (isset($_POST['submit'])) {                   
  $errors = array(); 
```

// 在放入数据库之前清理数据

```
$information_id = mysql_prep($_GET['info']);
$menu = trim(mysql_prep($_POST['menu']));  // cut out whitespace for menu

$position = mysql_prep($_POST['position']);
$visible = mysql_prep($_POST['visible']);
$image = mysql_prep($_POST['image']);
$img_des = mysql_prep($_POST['img_des']);
$content = mysql_prep($_POST['content']);

 if(empty($errors)){
 $query = "INSERT INTO pages (
 menu, position, visible, img_des, content, information_id
 ) VALUES (
 '{$menu}', {$position}, {$visible},'{$img_des}', '{$content}',  {$information_id}
    )";
 if ($result = mysql_query($query, $connection))    {
 $message = "The new page was created successfully";
 $new_page_id = mysql_insert_id();  
 redirect_to("content.php?page={$new_page_id}");
 } else {
 $message = "The page failed to create";

 }
 ?> 
```

在 img_des 之前我想插入图像。我必须使用什么类型，我必须使用什么代码来插入和检索图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:24:36.260

您不应该将图像存储在数据库中。将图像保存在服务器上并保存指向数据库中文件位置的链接。

有关更多信息，请参阅此问题：[我应该使用什么将图像保存在数据库中](https://stackoverflow.com/questions/14774425/what-should-i-use-to-save-a-image-in-database)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-21T06:32:47.177

```
 try this code.

<?php

        $images_arr = array();
            //This is the directory where images will be saved
        $target_dir = "uploads/";
        $target = $target_dir.$_FILES['photo']['name'];

            //$target = $target . basename( $_FILES['photo']['name']);

            //This gets all the other information from the form
        $name=$_POST['nameMember'];
        $bandMember=$_POST['bandMember'];
        $pic=($_FILES['photo']['name']);
        $about=$_POST['aboutMember'];
        $bands=$_POST['otherBands'];

            // Connects to your Database
        mysql_connect("Localhost", "remote", "remote123") or die(mysql_error()) ;
        mysql_select_db("test") or die(mysql_error()) ;

            //Writes the information to the database
        mysql_query("INSERT INTO dbProfiles (nameMember,bandMember,photo,aboutMember,otherBands)
        VALUES ('$name', '$bandMember', '$pic', '$about', '$bands')") ;

        //Writes the photo to the server
        if(move_uploaded_file($_FILES['photo']['tmp_name'], $target)){

                //Tells you if its all ok
            echo "The file ". $target_dir.$_FILES['photo']['name']. " has been uploaded, and your information has been added to the directory";
            $images_arr[] = $target;
        }
        else {

            //Gives and error if its not
            echo "Sorry, there was a problem uploading your file.";
        }

?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="icon" href="http://www.thesoftwareguy.in/favicon.ico" type="image/x-icon" />
                <!--iOS/android/handheld specific -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Upload multiple images create thumbnails and save path to database with php and mysql">
        <meta name="keywords" content="php, mysql, thumbnail,upload image, check mime type">
        <meta name="author" content="Shahrukh Khan">
        <title>Upload multiple images create thumbnails and save path to database with php and mysql </title>
        <link rel="stylesheet" href="style.css" type="text/css" />
        <style>
             .files{height: 30px; margin: 10px 10px 0 0;width: 250px; }
            .add{ font-size: 14px; color: #EB028F; border: none; }
            .rem a{ font-size: 14px; color: #f00; border: none; }
            .submit{width: 110px; height: 30px; background: #6D37B0; color: #fff;text-align: center;}
        </style>
        <script src="jquery-1.9.0.min.js"></script>
        <script>
            $(document).ready(function() {
                $(".add").click(function() {
                $('<div><input class="files" name="user_files[]" type="file" ><span class="rem" ><a href="javascript:void(0);" >Remove</span></div>').appendTo(".contents");

                });
                $('.contents').on('click', '.rem', function() {
                $(this).parent("div").remove();
                });

            });
        </script>
    </head>
    <body>
        <form name="f1" action="index.php" method="post" enctype="multipart/form-data">  
            <input type="hidden" name="image_form_submit" value="1"/>
                <div id="container">
                    <div id="body">
                        <div class="mainTitle" >Upload multiple images create thumbnails and save path to database with php and mysql</div>
                        <div class="height20"></div>
                        <article>
                            <div class="height20"></div>
                            <div style="width: 380px; margin: 0 auto;">
                                <h3 style="text-align: center;">Image will be resized to 100px X 100px </h3>

                                <p>Please Enter the Band Members Name.</p>
                                <p> Band Member or Affiliates Name:</p>
                                <input type="text" name="nameMember"/>
                                <p>
                                     Please Enter the Band Members Position. Example:Drums.
                                </p>
                                 <p>
                                    Band Position:
                                 </p>
                                <input type="text" name="bandMember"/>
                                <p>
                                    Please Upload a Photo of the Member in gif or jpeg format. The file name should be named after the Members name. If the same file name is uploaded twice it will be overwritten! Maxium size of File is 35kb.
                                </p>
                                <p>
                                    Photo:
                                </p>
                                <input type="hidden" name="size" value="350000">
                                <input type="file" name="photo"> 
                            <p>
                                Please Enter any other information about the band member here.
                            </p>
                            <p>
                                 Other Member Information:
                            </p>
                            <textarea rows="10" cols="35" name="aboutMember">
                            </textarea>
                             <p>
                                 Please Enter any other Bands the Member has been in.
                             </p>
                            <p>
                                     Other Bands:
                            </p>
                                <input type="text" name="otherBands" size=30 />
                            <br/>
                            <br/>
                                <input TYPE="submit" name="upload" title="Add data to the Database" value="Add Member"/>

                        </div>
                        <table class="bordered">
                         <?php
          // fetch all records
          $sql = "SELECT * FROM dbProfiles WHERE 1 "; ?>
          <?php
         $sql="SELECT * FROM dbProfiles";
 $result_set=mysql_query($sql);
 while($row=mysql_fetch_array($result_set))
 {
  ?>
        <tr>
       <td><p><?php echo $row['nameMember'] ?>"</p></td>
        <td><img src="uploads/<?php echo $row['photo'] ?>" width="200px" height="200px;"/><p><?php echo $row['nameMember'] ?>"</p></td>
        </tr>
        <?php
 }
 ?>
 </table>

                    </article>
                </div>

            </div>
            <div class="height10"></div>

    </form>

  </body>
</html>
<?php

function errorMessage($str) {
  return '<div style="width:50%; margin:0 auto; border:2px solid #F00;padding:2px; color:#000; margin-top:10px; text-align:center;">' . $str . '</div>';
}

function successMessage($str) {
  return '<div style="width:50%; margin:0 auto; border:2px solid #06C;padding:2px; color:#000; margin-top:10px; text-align:center;">' . $str . '</div>';
}
?> 
```

# http - .htacess 不将 HTTP 重定向到 HTTP 或排除某些页面

> ID：14775614
> 
> 赞同：0
> 
> 时间：2013-02-08T15:15:02.180
> 
> 标签：http, redirect, ssl, https

我阅读了大量的 .htaccess 论坛，但我无法获得我需要的东西。所以如果这感觉多余，我很抱歉。我需要我的网站：
1\. 将非 www 重定向到 www
2\. 将 HTTP 重定向到 HTTPS（URL 中包含“travel-blog”或“easyblog”的任何页面除外）

1号工作正常。2 号是问题孩子，特别是当我使用 HTTP 输入链接时。例如：

*[https://www.detourjournal.com](https://www.detourjournal.com)加载很好
www.detourjournal.com 正确重定向到[https://www.detourjournal.com](https://www.detourjournal.com)并且
detourjournal.com 正确重定向到[https://www.detourjournal.com](https://www.detourjournal.com)*

但是，
*[http://www.detourjournal.com](http://www.detourjournal.com)会导致 404 错误，并且
[https://www.detourjournal.com/travel-blog](https://www.detourjournal.com/travel-blog)不会像应有的那样重定向到 HTTP（该网站的这一部分是社区博客，所以我需要允许发布 http 链接）*

关于我做错了什么的任何想法？我需要通配符 SSL 来做我想做的事吗？我怎样才能解决这个问题？

这是我到目前为止所拥有的。

```
# Redirect non-www to www:
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

## This will switch any page from HTTP over to HTTPS
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

## This will switch from HTTPS back to HTTP on any page that has 'travel-blog' or 'easyblog' in the URL
RewriteCond %{HTTPS} on
RewriteRule ^(travel-blog|easyblog)(.*)/?$ http://%{HTTP_HOST}%{REQUEST_URI} [R=301,NC,L] 
```

# java - 使用 XPath 检索属性值

> ID：14775615
> 
> 赞同：0
> 
> 时间：2013-02-08T15:15:02.407
> 
> 标签：java, xml, xpath

我正在尝试使用 XPath 从 xmel 文件中检索属性的值，但我不确定我哪里出错了..

这是 XML 文件

```
<soapenv:Envelope>
  <soapenv:Header>
    <common:TestInfo testID="PI1" />
  </soapenv:Header>
</soapenv:Envelope> 
```

这是我用来获取价值的代码。这两个都没有返回..

```
XPathBuilder getTestID = new XPathBuilder("local-name(/*[local-name(.)='Envelope']/*[local-name(.)='Header']/*[local-name(.)='TestInfo'])");
XPathBuilder getTestID2 = new XPathBuilder("Envelope/Header/TestInfo/@testID");

Object doc2 = getTestID.evaluate(context, sourceXML);
Object doc3 = getTestID2.evaluate(context, sourceXML); 
```

如何检索 testID 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:28:39.293

但是，您在 java 中进行迭代，您的上下文节点可能不是您想的那样，所以删除“。” 你`local-name(.)`喜欢这样的说明符：

`/*[local-name()='Header']/*[local-name()='TestInfo']/@testID`使用您的 XML 对我来说工作得很好，尽管正如 akaIDIOT 所说，没有`<Envelope>`可以看到的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:20:50.303

您提供的 XML 文件不包含`<Envelope>`元素，因此需要它的表达式永远不会匹配。

**后期编辑**

从您的 XML 片段可以看出，该文档对您尝试匹配的元素使用特定的命名空间。XPath 引擎是名称空间感知的，这意味着您必须准确地询问它您需要什么。而且，请记住，名称空间是由其 uri 定义的，*而不是*由其缩写定义的（因此，除非您让 XPath 引擎知道名称空间所指的`/namespace:element`内容，否则不会做太多事情）。`namespace`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:43:48.053

如果您不关心名称空间并使用 XPath 2.0 兼容引擎，请使用`*`它。

```
//*:Header/*:TestInfo/@testID 
```

将返回所需的输入。

注册所需的名称空间（此处未介绍，取决于您的 XPath 引擎）并使用这些进行查询可能会更优雅：

```
//soapenv:Header/common:TestInfo/@testID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T17:19:00.647

你的第一个 XPath 有一个额外的`local-name()`包裹整个事情：

```
local-name(/*[local-name(.)='Envelope']/*[local-name(.)='Header']
                                                         /*[local-name(.)='TestInfo']) 
```

如果找到节点，则此 XPath 的结果将是字符串值“TestInfo” `TestInfo`，否则将是空白字符串。

如果您的 XML 的结构像您说的那样，那么这应该可以工作：

```
/*[local-name()='Envelope']/*[local-name()='Header']/*[local-name()='TestInfo']/@testID 
```

但最好是，您应该正确使用命名空间而不是 (ab)using `local-name()`。[我在这里](https://stackoverflow.com/a/14393528/1945651)有一篇文章，展示了如何在 Java 中执行此操作。

# java - Java解析错误

> ID：14775617
> 
> 赞同：0
> 
> 时间：2013-02-08T15:15:22.767
> 
> 标签：java, compiler-errors

我正在学习 Java，并且正在研究类构造函数。当我去编译示例的代码时，我得到一个错误：*你的代码没有编译：/TestGame.java:35：解析时到达文件结尾}*

这是我的代码：

```
public class Game {
    int homeScore;
    int visitorScore;

    //add your default constructor here

    public Game() {
        this.homeScore = 0;
        this.visitorScore = 0;
    }

    public boolean isHomeWinner() {
        return homeScore > visitorScore;
    }

    public boolean isVisitorWinner() {
        return homeScore < visitorScore;
    }

    public boolean isTie() {
        return homeScore == visitorScore;
    }
} 
```

我在网上进行了研究，发现这通常是由于没有右括号或引号造成的，但对我来说一切看起来都很封闭。

还有什么可能导致此错误？

# javascript - 嵌套 For 循环 - Javascript

> ID：14775622
> 
> 赞同：0
> 
> 时间：2013-02-08T15:15:41.283
> 
> 标签：javascript, for-loop, nested-loops

[我有一个与我在这里](https://stackoverflow.com/questions/14664784/nested-for-loops-in-javascript)提出的问题有关的问题

我正在尝试嵌套一个循环，但不太确定这是否是要走的路。我想要做的是显示一些与分数相关的星星。所以，如果他们得到 3 个问题，他们就会得到 3 颗星。如果它们没有达到所需的分数，我遇到的问题是显示空星。

EG：需要 10 才能进入下一个级别。他们得分 6。我可以显示 6 颗金星，但我无法显示 4 颗空星。我希望我解释得对。

这是我到目前为止的代码

```
var se = '';
var sep = '';
for (var i = 1; i <= score; i++)
{
    se = se + '<img src="./images/star.png"/>'; 
} 
```

我也有这个循环来尝试显示空星星

```
for (var j = 1; j <= i; j++)
{
    sep = sep + '<img src="./images/emptystar.png"/>';
} 
```

我不确定这是否需要进入已经存在的 for 循环内部或超出它。此外，由于某种原因，它没有显示正确数量的空星。0 正确答案显示 1 为空，其他任何内容显示 3 或 4

我认为我在第二个循环中进行了正确的计算。任何我出错的地方都将不胜感激。正如我所说，第一个循环可以正常工作。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:18:35.830

试试这个：

```
var stars = '';
for (var i = 1; i <= 10; i++) {                        // Loop 10 times
    var empty = (i > score)?'empty':'';                // If i > score, set this variable to the string 'empty';
    stars += '<img src="./images/'+ empty +'star.png"/>'; // Add the image (star.png or emptystar.png depending on the score).
} 
```

这样做的好处是您只需要 1 个循环，这意味着您不会复制任何代码。

对于`score == 6`，这将返回：

```
<img src="./images/star.png"/>
<img src="./images/star.png"/>
<img src="./images/star.png"/>
<img src="./images/star.png"/>
<img src="./images/star.png"/>
<img src="./images/star.png"/>
<img src="./images/emptystar.png"/>
<img src="./images/emptystar.png"/>
<img src="./images/emptystar.png"/>
<img src="./images/emptystar.png"/> 
```

那么，`var empty = (i > score)?'empty':'';`你在问，这条线是如何工作的？
很简单，它是一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#JavaScript)。简写：

```
var empty;
if(i > score){
    empty = 'empty';
}else{
    empty = '';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:18:43.683

试试这个：

```
var stars = '';
var maxstars = 10;

for (var i = 0; i < score; i++)
{
    stars = stars + '<img src="./images/star.png"/>'; 
}

for (var j = score; j < maxstars; j++)
{
    stars = stars + '<img src="./images/emptystar.png"/>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:20:14.350

只需使用一个循环：

```
var score = 5;
var sep = "";
for (var i = 0; i <= 10; i++)
{
    sep += (i < score) ? '<img src="./images/star.png"/>' : '<img src="./images/emptystar.png"/>';
} 
```

我没有测试，但这应该让你开始。

# sql-server - SQL 2012 中的 SSIS 日志记录

> ID：14775625
> 
> 赞同：1
> 
> 时间：2013-02-08T15:15:49.287
> 
> 标签：sql-server, ssis, sql-server-2012

在 2008R2 版本中，我使用 SSIS 记录到已定义数据库中的 sysssislog 表。2012 现在引入了具有自己的 SSISDB 数据库的集成服务目录的概念。是否仍然需要使用日志记录到 sysssisslog 表，或者是现在在 SSIS DB 中某处结束的信息（我所期望的，因为 SSIS 执行的所有报告也基于此数据库）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:19:21.960

您熟悉的日志记录在 SQL Server 2012 版中仍可供您使用。*也就是说，如果*您使用的是项目部署模型 (SSISDB)，则不再需要在包中*明确*定义数据库日志记录。

 *开箱即用，您将在运行包时获得基本日志记录级别。其他选项是无、性能和冗长。阅读有关如何通过 MVP Phil Brammer设置这些和其他[执行参数的更多信息。](http://www.ssistalk.com/2012/07/24/quick-tip-run-ssis-2012-packages-synchronously-and-other-execution-options/)[实际 SSIS 团队的 Matt Masson 在他关于SSIS 目录日志级别中包含哪些事件](http://www.mattmasson.com/index.php/2011/12/what-events-are-included-in-the-ssis-catalog-log-levels/)的帖子中指出了这些级别对应的事件。

最后，[SSIS Reporting Pack](http://ssisreportingpack.codeplex.com/)是 MVP Jamie Thomson 的一个开源项目，它提供了对新集成服务目录中捕获的基本数据的不同见解。

我的想法：没有必要。但是，如果您已经有一个构建了从该日志中剔除数据的框架（我们将其用于警报系统），则支持您继续使用它。如果您从多台服务器运行集成服务包，则无法将所有这些不同 SSISDB 目录中的日志记录结合起来以深入了解您的整个宇宙。如果您使用经典技术将所有包记录到集中式服务器，您就可以做到这一点。*

# ios - 为什么我的 NSURLConnection 报告不正确的 expectedContentLength

> ID：14775628
> 
> 赞同：3
> 
> 时间：2013-02-08T15:16:07.897
> 
> 标签：ios, objective-c

我有一个 NSURLConnection 并且`didReceiveResponse`我正在检查`[response expectedContentLength]`并获得非常大的值，例如 18446744073709551615。这不可能是正确的。下载大约 3k 字节，当我在提琴手中期待相同的请求时，我在大约 3k 字节的响应中看到（正确的）内容长度标头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T09:55:27.170

为避免此问题，请将标头字段“Accept-Encoding”设置为@“gzip;q=0”。这告诉服务器您不接受 gzip，如果可能，将发送未压缩的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:40:24.890

与评论相关的答案是因为结果是 gzip 编码的。奇怪的是， 的价值`expectedContentLength`似乎是垃圾，不能被信任。如果结果是 gzip 编码的，则`NSURLConnection`无法正确确定未编码结果的大小。

# objective-c - 线性代数有什么捷径吗？

> ID：14775634
> 
> 赞同：2
> 
> 时间：2013-02-08T15:16:22.453
> 
> 标签：objective-c, linear-algebra

比如说我有 3 个文本框，用户可以在其中输入数据到任意 2 个，然后计算第三个。

公式是`z=2x+c`。

3 个文本框链接到`z`和。`x``c`

我需要写一个类似的声明吗？

```
if c is blank then c=z-2x
if z is blank then z=2x+c
if x is blank then (z-c)/2 
```

虽然这对一个方程来说很好，但随着我的方程变得更复杂或者我有一个方程组，它可能会变得乏味。

在目标 c 中是否有解决线性代数的捷径或方法？

谢谢

# dynamic - 动态谷歌图表上的作用（间隔）

> ID：14775644
> 
> 赞同：0
> 
> 时间：2013-02-08T15:16:36.833
> 
> 标签：dynamic, intervals, google-visualization, role

如果我动态填充图表，我该如何使用：[https ://developers.google.com/chart/interactive/docs/roles？](https://developers.google.com/chart/interactive/docs/roles)

这是我的代码的一部分：

```
...
data.addRows(dates.length);
for (i = 0; i < dates.length; i++){
    if (i!=0){
        data.setValue( i, 0, new Date(dates[i]) ); 
        temp = graph[dates[i]];
        var j = 0;
        if (temp){
            for (j = 0; j < groups.length; j++){
                if ( groups[j] in temp){
                    var volume = parseFloat(temp[groups[j]]);
                    console.log(i + '  ' + j + '  ' + volume);
                    data.setValue( i, j+1, volume )
                }
            }
        }
    }else{
        data.setValue( i, 0, new Date(dates[i]) ); 
        var j = 0;
        for (j = 0; j < groups.length; j++){
            data.setValue( 0, j+1, 0 )
        }
    }
}
... 
```

使用“data.setValue”设置值后，如何设置角色？（我需要间隔值）像'data.setRole'这样的东西会很棒！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T05:04:25.947

您可以创建`DataTable`不带任何角色的 ，然后创建一个`DataView`将角色分配给视图中的列的。该文档显示了如何在[此处](https://developers.google.com/chart/interactive/docs/roles#dataview.setcolumnsmethod)执行此操作：

> **`DataView.setColumns`方法**
> 
> 创建视图时，可以显式设置列的角色。这在创建新的计算列时很有用。有关 `DataView.setColumns()`更多信息，请参阅。

`DataView.setColumns()` [帮助文件](https://developers.google.com/chart/interactive/docs/reference#DataView_setColumns)解释了如何执行此操作，如下所示：

> `setColumns(columnIndexes)`
> 
> 1.  columnIndexes - 数字和/或对象的数组（可以混合）：数字指定要包含在视图中的源数据列的索引。数据是通过未修改的。如果需要显式定义角色或其他列属性，请指定具有 sourceColumn 属性的对象。
> 2.  对象指定计算列。计算列为每一行动态创建一个值并将其添加到视图中。该对象必须具有以下属性：
>     *   calc [function] - 将为列中的每一行调用一个函数，以计算该单元格的值。函数签名为func(dataTable, row)，其中dataTable为源DataTable，row为源数据行的索引。该函数应返回由 type 指定的类型的单个值。
>     *   type [string] - calc 函数返回的值的 JavaScript 类型。
>     *   label [可选，字符串] - 分配给此生成列的可选标签。如果未指定，则视图列将没有
>         标签。
>     *   id [可选，字符串] - 分配给此生成列的可选 ID。
>     *   sourceColumn - [可选，数字] 用作值的源列；如果指定，请不要指定 calc 或 type 属性。
>         这类似于传入数字而不是对象，但
>         允许您为新列指定角色和属性。
>     *   properties [可选，对象] - 包含要分配给此列的任意属性的对象。如果未指定，则视图
>         列将没有属性。
>     *   **角色 [可选，字符串] - 分配给该列的角色。如果未指定，则不会导入现有角色。**

因此，如果您的区间列是第 3 列，例如，您会说：

`dataView.setColumns([0, 1, {sourceColumn: 2, role: 'interval'}]);`

上面设置了第 0 列和第 1 列，没有角色，而第 2 列被分配为间隔列。

**编辑**

响应评论，区间在数据集中。这是一个例子：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'Austria', 'Interval A', 'Interval B'],
    ['2003',  100,   95,       125],
    ['2004',  110,   96,       150],
    ['2005',  120,   97,       175],
    ['2006',  130,   98,       200],
    ['2007',  140,   99,       225],
    ['2008',  150,   100,      250]
  ]);

  // Create Data View using columns 2 & 3 as intervals
  var dataView = new google.visualization.DataView(data);
  dataView.setColumns([0, 1, {sourceColumn: 2, role: 'interval'}, {sourceColumn: 3, role: 'interval'}]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
    draw(dataView,
         {width:600, height:400,
          hAxis: {title: "Year"}}
        );
} 
```

您将原始数据表中的区间值作为列包含在内。然后，您使用数据视图将这些列更改为“间隔”角色列。然后绘制数据视图。这将按预期提供误差线（间隔列）。

# vba - 从变量值设置常量

> ID：14775652
> 
> 赞同：0
> 
> 时间：2013-02-08T15:16:57.103
> 
> 标签：vba, outlook

我想将我的数据库路径设置为常量。

问题是路径存储在 INI 文件中，并且在启动 Outlook 时设置了变量。如果常量没有硬编码，VBA 将不会编译。

我想使用常量的原因是，由于某些原因，在 Outlook 运行几个小时/天后，它有时似乎会丢失其变量的值（从未遇到过硬编码常量的这个问题）。路径变量刚刚被清空，然后当 VBA 尝试访问数据库时，用户收到错误消息。

我不能仅仅因为某些用户不使用相同的服务器 UNC 路径而对路径进行硬编码。此路径可能一年左右更改一次，只需编辑 INI 文件并重新启动 Outlook 比要求程序员编辑每个用户计算机上代码中的正确行更容易。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:31:49.663

您不能在运行时更改常量的值。这些值是在编译代码时设置的（即使您没有显式编译 VBA 代码，它仍然在后台完成即时 (JIT)）。

如果您不想不断地运行查找代码（例如，因为它效率低下），那么您可以在函数中使用静态变量：

```
Function GetDbPath() As String
    Static DbPath As String
    If Len(DbPath) = 0 Then 
        DbPath = 'your code here'
    End If
    GetDbPath = DbPath
End Function 
```

# mysql - vb.net 在字段中使用逗号将错误插入 mysql

> ID：14775656
> 
> 赞同：2
> 
> 时间：2013-02-08T15:17:02.493
> 
> 标签：mysql, sql, vb.net

创建了一个将数据从 Microsoft SQL Server 移动到 MySQL 的 vb.net 应用程序。到目前为止，我所有的插入功能都有效，但以下除外。看来问题出在文本中带有逗号的字段并导致问题。

我认为问题出在“类别”列上。它的值类似于 '11|0,1|0,12|0'。

是否需要以特殊方式处理逗号？

错误：Sql 错误：MySql.Data.MySqlClient.MySqlException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'Separator,C_ID,EntryDt,S_ID) VALUES (1,1455090, '11|0,1' 附近使用正确的语法

代码：

```
#Region " InsertTable_Activity "
    Function InsertTable_Activity(ByVal Activity_ID As Integer, _
        ByVal Categories As String, _
        ByVal Separator As String, _
        ByVal C_ID As Integer, _
        ByVal EntryDt As DateTime, _
        ByVal S_ID As Integer, _
         ByVal myCon As MySqlConnection) As String

        Dim sRetVal As String = ""
        Dim sSQL As String = "INSERT INTO CandidateInsertResumeDetailCategories_Activity (Activity_ID,Categories,Separator,C_ID,EntryDt,S_ID) VALUES (?Activity_ID, ?Categories, ?Separator, ?C_ID,?EntryDt,?S_ID)"
        Dim myCmd As MySqlCommand = New MySqlCommand(sSQL, myCon)
        myCmd.CommandType = Data.CommandType.Text
        myCmd.Parameters.Add(New MySqlParameter("?Activity_ID", MySqlDbType.Int32)).Value = Activity_ID
        myCmd.Parameters.Add(New MySqlParameter("?Categories", MySqlDbType.VarChar, 500)).Value = Categories
        myCmd.Parameters.Add(New MySqlParameter("?Separator", MySqlDbType.VarChar, 10)).Value = Separator
        myCmd.Parameters.Add(New MySqlParameter("?C_ID", MySqlDbType.Int32)).Value = C_ID
        myCmd.Parameters.Add(New MySqlParameter("?EntryDt", MySqlDbType.DateTime)).Value = EntryDt
        myCmd.Parameters.Add(New MySqlParameter("?S_ID", MySqlDbType.Int32)).Value = S_ID

        Try
            If myCon.State <> Data.ConnectionState.Open Then
                myCon.Open()
            End If

            myCmd.ExecuteNonQuery()
            myCmd.Dispose()

        Catch sqlEx As MySqlException
            sRetVal = "ERROR: Sql error: " & sqlEx.ToString & vbCrLf & " - SQL used: " & sSQL
        Catch ex As Exception
            sRetVal = "ERROR: Regular error: " & ex.ToString & vbCrLf & " - SQL used: " & sSQL
        Finally
        End Try

        Return sRetVal
    End Function
#End Region 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:18:08.627

`SEPARATOR`是一个保留关键字，你应该用反引号转义它，

```
INSERT INTO CandidateInsertResumeDetailCategories_Activity 
            (Activity_ID, Categories, `Separator`, C_ID, EntryDt, S_ID) 
VALUES ..... 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

另一个忠告是*不要使用保留关键字列表中的任何名称*。

# linq - 如何将 Func 与返回 IOrderedQueryable 的 IQueryable 一起使用

> ID：14775658
> 
> 赞同：11
> 
> 时间：2013-02-08T15:17:06.657
> 
> 标签：linq

我正在做一些关于 EF 的研究，并遇到了一个接受的函数

```
Func<IQueryable<Student>, IOrderedQueryable<Student>> 
```

只是想知道如何调用接受这种参数的函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T15:34:12.113

想象函数是这样的，并且您在 Student 类中有一个属性 Id 。

```
public static class Helper {
    public static void Test(Func<IQueryable<Student>, IOrderedQueryable<Student>> param)
        {
            var test = 0;
        }
} 
```

那么你可以这样使用它

```
var student = new List<Student>().AsQueryable();//non sense, just for example
Helper.Test(m => student.OrderBy(x => x.Id)); 
```

`m => student.OrderBy(x => x.Id)`是一个

```
Func<IQueryable<Student>, IOrderedQueryable<Student>> 
```

（`IQueryable<student>`作为参数，返回 a `IOrderedQueryable<Student>`）

要不就

```
Helper.Test(m => m.OrderBy(x => x.Id)); 
```

事实上，如果没有“真正的”功能，这没有多大意义......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T21:53:32.983

定义一个方法。

```
public IOrderedQueryable<Student> OrderingMethod(IQueryable<Student> query)
{
  return query.OrderBy(student => student.Name);
} 
```

现在这个赋值是合法的：

```
Func<IQueryable<Student>, IOrderedQueryable<Student>> orderingFunc = this.OrderingMethod; 
```

现在您将它放在一个变量中，很容易将它传递给方法。

* * *

您也可以内联完成所有操作：

```
Func<IQueryable<Student>, IOrderedQueryable<Student>> orderingFunc =
  query => query.OrderBy(student => student.Name); 
```

# php - 在 iframe 内的新窗口中打开 iframe 内的链接

> ID：14775660
> 
> 赞同：0
> 
> 时间：2013-02-08T15:17:14.753
> 
> 标签：php, jquery, html, iframe

我有这个：

div 元素（像条，带有一些文本和徽标）

带有我无法修改的页面的 iframe（在此示例中：google.com）

我需要的是“**捕捉**”（或其他任何东西），用户使用 mouseweel 单击的**所有链接****（或右键单击它并在新窗口中打开它）**，然后，**在另一个带有 div 元素和 iframe 的窗口中打开该链接加载 iframe 内的链接**，我的意思是，在一个与第一个完全相同的新页面中，带有 div 和 iframe。

*如果用户通常单击任何链接，它只会打开 iframe 内的链接（就像 iframe 通常那样）。*

我找到了一个更改网站中所有链接的代码，它会在新窗口中打开所有链接，并使用参数引用指向 PHP 的链接的 url，但我不想在新窗口中打开所有链接，默认情况下全部它在 html 中的 iframe (_self) 内打开的页面中的链接，但是如果用户想在新窗口中打开它，我想允许这样做，但是使用 div 元素和加载链接的 iframe 打开它的新窗口在 iframe 里面...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:27:06.847

不可能**与不同域内的 iframe 中的任何内容进行交互**。您必须使用 HTTP PHP 代理来编辑您显示的页面，以便所有链接在您的网站上重定向。
因此，解决方案是使用 PHP 脚本下载您在 iframe 中显示的站点，将所有链接从`http://differentsite.com/path/file.php`更改为`http://mysite.com/script.php?path=path/file.php`，这样如果用户单击该链接，他就会再次进入您的 IFRAME 视图。
这就是 HTTP 代理的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:27:36.510

根据您当前的问题，我了解您希望链接不在新选项卡中打开，并替换当前在 iframe 中打开的页面。

简短的回答：不可能。

完整答案：
1）`target="_blank"`无法在单独站点上托管的 iframe 内编辑使用的链接。这是因为同源策略。
2）理论上，即使您可以控制内容，您也永远无法覆盖用户想要的`iframe`内容。具体来说，当用户单击“在新选项卡中打开”时，它永远不会被覆盖。

# android - Android 上的 Skype Ap2Ap？

> ID：14775661
> 
> 赞同：1
> 
> 时间：2013-02-08T15:17:17.490
> 
> 标签：android, skype

是否可以在 Android（或 iOS）上使用 Skype Ap2Ap，如果可以，如何使用？

（[Ap2Ap](http://blogs.skype.com/2005/12/07/ap2ap-sample/#fbid=owIWoQbj3QJ)是 Skype API 的一项功能，可让您打开流并向联系人列表中的任何人发送任意数据。双方只需要登录并知道应用程序名称，Skype 会完成所有艰苦的工作，例如查找对方的IP，绕过路由器等。这个功能已经存在了一段时间，似乎用的不多，但工作正常，可在Windows、Linux和OS X上使用。）

# java - 为什么discard() 不能按预期工作？

> ID：14775662
> 
> 赞同：0
> 
> 时间：2013-02-08T15:17:19.010
> 
> 标签：java, forms, vaadin

我尝试使用组合框和重置按钮构建一个简单表单。我想丢弃我可以重置组合框。我做错了什么？未注释的 combobox.select 是一种解决方法。

按照简单的例子：

```
public class VaadinprojectApplication extends Application {

@Override
public void init() {
    final Window mainWindow = new Window("Simpleform");

    final List<String> aListWithStrings = new ArrayList<String>();
    aListWithStrings.add("Somthing");
    final BeanItemContainer<String> objects = new BeanItemContainer<String>(String.class, aListWithStrings);
    final ComboBox comboBox = new ComboBox("Importers", objects);

    // reset button
    final Button resetButton = new Button("Reset", new Button.ClickListener() {
        @Override
        public void buttonClick(final ClickEvent event) {
            // comboBox.select(comboBox.getNullSelectionItemId());
            comboBox.discard();
            System.out.println("reset");
        }
    });
    final FormLayout form = new FormLayout();
    form.addComponent(comboBox);
    form.addComponent(resetButton);
    form.setSizeUndefined();

    mainWindow.addComponent(form);
    setMainWindow(mainWindow);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:42:50.857

`final ComboBox comboBox = new ComboBox("Importers", objects);`

The Line above doesn't set the datasource properly. `discard()`checks if the datasource != null. But in the case of the code example the datasource is null and so nothing happends. Why? I don't know yet.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:12:48.973

为了在组合框中不选择任何内容，请使用它而不是`discard()`：

```
comboBox.setValue(null); 
```

# c# - 使用 Javascript 访问 GridViewRow 中的标签控件

> ID：14775665
> 
> 赞同：4
> 
> 时间：2013-02-08T15:17:32.403
> 
> 标签：c#, javascript, asp.net

我在 GridViewRow 单元格中有一个 Label 控件，我需要使用 Javascript 从客户端访问它。我可以很好地访问 GridView 行，但我一生都无法弄清楚如何访问其中的标签。

**布局：**

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Label ID="link_lbl" runat="server" Visible="false" Text='<%# BIND("link") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

**Javascript：**

```
var gridview = document.getElementById("<%= list_gv.ClientID %>");
for (i = 1; i < gridview.rows.length; i++) {
    var label = gridview.rows[i].cells[0].?????
} 
```

我已经尝试了各种方法`?????`，但无法访问 Label 控件来读取它！

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:59:47.780

Try this code

```
var gridview = document.getElementById("<%= list_gv.ClientID %>");
for (i = 1; i < gridview.rows.length; i++) {
    var labels = gridview.rows[i].cells[0].getElementsByTagName("span");
     alert(labels[0].innerHTML);
} 
```

This will give you the first label text in cell[0]. You can also directly get by using label id.

```
var gridview = document.getElementById("<%= list_gv.ClientID %>");
for (i = 1; i < gridview.rows.length; i++) {
    var RowNumber=(i+1).toString();
    if (i<10)
    RowNumber="0"+(i+1).toString();
    var label =  document.getElementById(gridview.id.toString()+"_ctl" + RowNumber + "_link_lbl");
    alert(label.innerHTML);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:42:36.120

尝试这个

```
var label =gridview.rows[i].cells[0].getElementsByTagName("span") 
```

# javascript - 从/与其他非 Backbone 对象扩展 Backbone.Model

> ID：14775667
> 
> 赞同：0
> 
> 时间：2013-02-08T15:17:54.150
> 
> 标签：javascript, inheritance, backbone.js, underscore.js

我想要实现的是使用 from`Backbone.Model`或相反的方法扩展先前定义的类，无论哪种效果最好。基本上我的代码如下所示：

```
var SomeObject = function() {};
SomeObject.CLASS_ATTRIBUTE = 'something';
SomeObject.prototype.aFunction = function() { return Math.E; };
SomeObject.prototype.attrB = 'wat';

var SomeModel = Backbone.Model.extend({}); 
```

在这一点上，我如何扩展`SomeModel`（`SomeObject`或相反）以包含`CLASS_ATTRIBUTE`以及作为模型属性`aFunction` 而不`attrB`失去`Backbone.Model`功能？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:28:12.133

如果`SomeObject`这样定义：

```
var SomeObject = {
  CLASS_ATTRIBUTE: 'something',
  aFunction: function () { return MATH.E; },
  attrB: 'wat'
} 
```

然后

```
var SomeModel = Backbone.Model.extend({
 // ...
});

_.extend(SomeModel.prototype, SomeObject); 
```

会做你需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:41:13.357

你说的扩展是什么意思？

1.  你想合并你的对象吗？
2.  你想添加自定义“方法”`SomeModel`吗？
3.  您是否希望创建一个同时具有 和 的方法和属性的新`SomeModel`对象`SomeObject`？

* * *

[**JSFiddle**](http://jsfiddle.net/tivie/jEXAg/)

* * *

```
var SomeObject = function() {};
SomeObject.CLASS_ATTRIBUTE = 'something';
SomeObject.prototype.aFunction = function() { return Math.E; };
SomeObject.prototype.attrB = 'wat';
var SomeModel = Backbone.Model.extend({});

// Merging instances of objects
var newSomeObject = new SomeObject(),
    newSomeModel = new SomeModel(),
    mergedObjects = $.extend(true, newSomeModel, newSomeModel);

console.log(mergedObjects);

// Prototyping
var mergedProto = $.extend(true, SomeModel.prototype, SomeObject.prototype);
console.log(mergedProto);

//factory
var myMergefactory = function() {
    var ret = $.extend(true, SomeModel.prototype, SomeObject.prototype);
    return ret;
} 
```

作为说明，这也是有效的......

```
var SomeModel = Backbone.Model.extend({});
SomeModel.CLASS_ATTRIBUTE = 'something';
SomeModel.prototype.aFunction = function() { return Math.E; };
SomeModel.prototype.attrB = 'wat'; 
```

或这个...

```
var SomeModel = Backbone.Model.extend({
    initialize: function (params) {
        $.extend(true, this, params.obj);
    }
});
var mObj = new SomeModel({obj: new SomeObject()}); 
```

# spring-mvc - 如何将 Sitemesh 3 与 Spring MVC 3 集成？

> ID：14775670
> 
> 赞同：4
> 
> 时间：2013-02-08T15:18:01.487
> 
> 标签：spring-mvc, sitemesh

我正在尝试使用 Sitemesh 3 来控制 Spring MVC 应用程序的 JSP 输出的装饰。

当我点击应用程序时，Sitemesh 似乎正在向 Spring servlet 发出请求以尝试检索其装饰器文件。这可能是正确的行为，也可能不是正确的行为，但它让我很头疼。

我对 Sitemesh 3 的理解是它在 Spring 之后才开始工作，即在 Response 对象上工作。

我在浏览器中遇到的错误是 404，并且在日志中（配置/代码如下）：

```
INFO: Server startup in 1367 ms
DEBUG: org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 
'springiness' processing GET request for [/clientmanager/]^M
DEBUG: 
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - 
Looking up handler method for path /^M
DEBUG: org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - 
Returning handler method [public java.lang.String 
uk.co.hermes.HomeController.home(java.util.Locale,org.springframework.ui.Model)]^M
DEBUG: org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning 
cached instance of singleton bean 'homeController'^M
DEBUG: org.springframework.web.servlet.DispatcherServlet - Last-Modified value for 
[/clientmanager/] is: -1^M
INFO : uk.co.hermes.HomeController - Welcome home! The client locale is en_GB.^M
DEBUG: org.springframework.beans.factory.support.DefaultListableBeanFactory - Invoking     
afterPropertiesSet() on bean with name 'home'^M
DEBUG: org.springframework.web.servlet.DispatcherServlet - Rendering view   
[org.springframework.web.servlet.view.JstlView: name 'home'; URL [/WEB- 
INF/jsp/home.jsp]] in DispatcherServlet with name 'springiness'^M
DEBUG: org.springframework.web.servlet.view.JstlView - Added model object 'serverTime'  
of type [java.lang.String] to request in view with name 'home'^M
DEBUG: org.springframework.web.servlet.view.JstlView - Forwarding to resource [/WEB-  
INF/jsp/home.jsp] in InternalResourceView 'home'^M
DEBUG: org.springframework.web.servlet.DispatcherServlet - Successfully completed  
request^M
DEBUG: org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 
'springiness' processing GET request for [/clientmanager/WEB- 
INF/decorators/mainDecorator.html]^M
DEBUG:  
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping -  
Looking up handler method for path /WEB-INF/decorators/mainDecorator.html^M
DEBUG:  
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping -  
Did not find handler method for [/WEB-INF/decorators/mainDecorator.html]^M
WARN : org.springframework.web.servlet.PageNotFound - No mapping found for HTTP request 
with URI [/clientmanager/WEB-INF/decorators/mainDecorator.html] in DispatcherServlet 
with name 'springiness'^M
DEBUG: org.springframework.web.servlet.DispatcherServlet - Successfully completed request^M 
```

我怀疑这是我的 web.xml 以及我如何定义映射（URL）的问题：

```
<servlet>
    <servlet-name>springiness</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>springiness</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>sitemeshfilter</filter-name>
    <filter-class>uk.co.hermes.filters.SitemeshFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>sitemeshfilter</filter-name>
    <!-- leaving SitemeshFilter class to decide which responses it should decorate -->
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

我的自定义过滤器：

```
public class SitemeshFilter extends ConfigurableSiteMeshFilter {

private Logger log = LoggerFactory.getLogger(SitemeshFilter.class);

/**
 * See http://wiki.sitemesh.org/display/sitemesh3/Configuring+SiteMesh+3
 */
@Override
protected void applyCustomConfiguration(SiteMeshFilterBuilder builder) {
log.debug("** hit the sitemesh filter");
        // apply this decorator (template) to the path defined...
        builder.addDecoratorPath("/*", "/WEB-INF/decorators/mainDecorator.html");

        // ... when the response type matches one of these 
        builder.setMimeTypes("text/html", "application/xhtml+xml", "application/vnd.wap.xhtml+xml"); 
```

} }

WEB-INF/ |-jsp |-home.jsp |-decorators |-mainDecorator.html

还有我超级简单的控制器：

```
 @RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {
    logger.info("Welcome home! The client locale is {}.", locale);

    Date date = new Date();
    DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

    String formattedDate = dateFormat.format(date);

    model.addAttribute("serverTime", formattedDate );

    return "home";
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-17T01:16:39.237

由于没有人发布实际内容，因此您可以：

补充`pom.xml`：

```
<dependency>
    <groupId>org.sitemesh</groupId>
    <artifactId>sitemesh</artifactId>
    <version>3.0.0</version>
</dependency> 
```

在`WEB-INF/web.xml`†中添加：

```
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>org.sitemesh.config.ConfigurableSiteMeshFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

补充`WEB-INF/sitemesh3.xml`：

```
<sitemesh>
    <mapping path="/*" decorator="/WEB-INF/decorator1.jsp"/>
</sitemesh> 
```

补充`WEB-INF/decorator1.jsp`：

```
<html>
    <head>
    ...
    </head>
    <body>
        <sitemesh:write property='body'/>
    </body>
</html> 
```

† 如果使用 Spring Security，请将其放在 Spring Security 过滤器链下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T23:37:25.623

这是[另一个博客](http://codesilo.wordpress.com/2013/07/11/spring-mvc-with-sitemesh-3/)，展示了 Sitemesh 3 和 Spring MVC 之间的集成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T22:07:27.020

就我而言，我使用了这个小[教程](https://tshikatshikaaa.blogspot.com/2012/09/spring-sitemesh-integration-example.html)来使它工作。

# powershell - 删除所有文件和文件夹，但排除子文件夹

> ID：14775672
> 
> 赞同：58
> 
> 时间：2013-02-08T15:18:05.540
> 
> 标签：powershell

我有一个文件夹，我需要删除除一小部分文件和文件夹之外的所有文件和文件夹。

我已经可以排除文件列表，但看不到排除文件夹及其内容的方法。

这是文件夹结构：

```
|-C:\temp
 \-C:\temp\somefile.txt
 \-C:\temp\someotherfile.txt
| |-C:\temp\foldertodelete
   \-C:\temp\foldertodelete\file1.txt
| |-C:\temp\foldertokeep
|  \-C:\temp\foldertokeep\file2.txt 
```

我想保留 somefile.txt 和文件夹 foldertokeep 及其内容。

这就是我现在所拥有的：

```
Get-ChildItem -Path  'C:\temp' -Recurse -exclude somefile.txt | Remove-Item -force -recurse 
```

这确实不会删除 somefile.txt。有没有办法从删除列表中排除文件夹 foldertokeep 及其内容？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-08T15:36:51.647

```
Get-ChildItem -Path  'C:\temp' -Recurse -exclude somefile.txt |
Select -ExpandProperty FullName |
Where {$_ -notlike 'C:\temp\foldertokeep*'} |
sort length -Descending |
Remove-Item -force 
```

-recurse 开关在 Remove-Item 上不能正常工作（它会在文件夹中的所有子项目都被删除之前尝试删除文件夹）。按长度降序对全名进行排序可确保在删除文件夹中的所有子项之前不删除任何文件夹。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-02-12T00:37:34.283

在 PowerShell 3.0 及**以下**版本中，您可以尝试简单地执行以下操作：

```
Remove-Item -recurse c:\temp\* -exclude somefile.txt,foldertokeep 
```

除非我缺少某些参数，否则这似乎可以解决问题...

编辑：见下面的评论，PS3 之后 Remove-Item 的行为发生了变化，这个解决方案似乎不再适用。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-08-21T09:39:20.263

选择除需要保留的内容之外的所有内容并将其传递给删除命令。

假设你有这些文件夹

```
C:.
├───delme1
│   │   delme.txt
│   │
│   └───delmetoo
├───delme2
├───keepme1
│       keepmetoo.txt
│
└───keepme2 
```

删除所有内容，但保留 keepme1 和 keepme2 文件夹。

```
Get-ChildItem -Exclude keepme1,keepme2 | Remove-Item -Recurse -Force 
```

其他解决方案很好，但我发现这很容易理解和记住。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-01T07:02:26.443

我使用了下面的内容，只是从第一行中删除了 -Recurse ，它将所有文件和子文件夹留在了排除文件夹列表下。

```
 Get-ChildItem -Path "PATH_GOES_HERE" -Exclude "Folder1", "Folder2", "READ ME.txt" | foreach ($_) {
       "CLEANING :" + $_.fullname
       Remove-Item $_.fullname -Force -Recurse
       "CLEANED... :" + $_.fullname
   } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-29T10:20:36.493

是的，我知道这是一个旧线程。我无法在 Powershell 5 中获得上述任何答案，所以这就是我想出的：

```
Get-ChildItem -Path $dir -Exclude 'name_to_ignore' |
ForEach-Object {Remove-Item $_ -Recurse } 
```

这会将 -Recurse 移动到 Remove-Item 而不是找到项目的位置。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-06-01T20:16:03.317

根据[MSDN](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.management/remove-item#example-4-delete-files-in-subfolders-recursively) `Remove-Item`，参数有一个已知问题`-exclude`。请改用此变体。

```
Get-ChildItem * -exclude folderToExclude | Remove-Item 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-08-14T02:22:19.353

这也将帮助某人...

为 PATH_GOES_HERE 添加一个空的或之前未定义的变量可能会导致用户目录（或 C:\windows\system32，如果脚本以管理员身份运行）中的递归删除。我发现这一点很困难，不得不重新安装 Windows。

自己试试吧！（下面只会将文件目录输出到 test.txt 中）

```
Get-ChildItem -Path $dir2 -Recurse -Exclude "Folder1 ", FileName.txt | foreach ($_) {
$_.fullname >> C:\temp\test.txt
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-24T23:35:32.663

我遇到了这个并找到了一个适合我的单行命令。它将删除相关目录中的所有文件夹和文件，同时保留“排除”列表中的任何内容。它也是无声的，因此如果某些文件是只读的或正在使用的，它不会返回错误。

```
@powershell Remove-item C:\Random\Directory\* -exclude "MySpecialFolder", "MySecondSpecialFolder" -force -erroraction 'silentlycontinue' 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-03-08T20:40:47.870

我用过这个，非常适合我

```
Get-ChildItem -Path 'C:\Temp\*' -Recurse | Where-Object {($_.FullName -notlike "*windirstat*") -and ($_.FullName -notlike "C:\Temp\GetFolderSizePortable*")} | Remove-Item -Recurse 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-06T13:23:30.227

如果您的路径包含正则表达式特殊字符，那么您需要使用不允许管道的 -LiteralPath 选项。在这种情况下，正确的解决方案如下所示：

```
 Remove-Item -force -LiteralPath(    
    Get-ChildItem -Path  'C:\temp' -Recurse -exclude somefile.txt |
    Select-Object -ExpandProperty FullName |
    Where-Object { $_ -notlike 'C:\temp\foldertokeep*' } |
    Sort-Object length -Descending 
) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-06-03T15:51:10.297

这也将帮助某人...

```
Get-ChildItem -Path PATH_GOES_HERE -Recurse -Exclude "Folder1 ", "Folder2", FileName.txt | foreach ($_) {
    "CLEANING :" + $_.fullname
    Remove-Item $_.fullname -Force -Recurse
    "CLEANED... :" + $_.fullname
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-20T06:54:03.753

我想为这个想法做出贡献

*   删除所有文件夹和文件包括隐藏文件夹

$get-childitem -Path D:\path\folder\to\delete* -Force |select-object -Expandproperty Fullname |remove-item -recurse -Confirm:$false -Force

*   删除所有文件夹和文件包括隐藏文件夹但保留排除文件夹

$get-childitem -Path D:\path\folder\to\delete* -排除名称exludefolder -Force | 选择对象-Expandproperty 全名 | 删除项目-强制

$get-childitem -Path D:\path\folder\to\delete\ -排除名称exludefolder -Force | 选择对象-Expandproperty 全名 | 删除项目-强制

第一行保留文件夹，第二行删除剩余文件夹

# sql - 在 SQL Developer 中建立自己的数据库

> ID：14775673
> 
> 赞同：3
> 
> 时间：2013-02-08T15:18:05.743
> 
> 标签：sql, database, oracle, connection

我正在尝试在 Oracle SQL Developer 中建立新连接，但我不想连接到现有数据库，而是想创建一个新数据库，我可以将自己的表上传到其中。我知道这是可能的，因为有人在我的另一台电脑上做过。

尝试进行“新连接”总是说网络适配器无法建立连接。这是合乎逻辑的，因为我想要我自己的，我只能在我的电脑上使用。

任何人都知道如何做到这一点？提前致谢！

格兹！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:29:59.937

您无法使用 SQL Developer 执行此操作。

您的 PC 上是否已经有正在运行的数据库？是快捷版（XE）吗？Express Edition 只能有一个数据库。如果不是 XE，请使用 DBCA（数据库配置助手）创建数据库。

如果您的 PC 上没有 Oracle，则需要下载并安装二进制文件。XE install 在安装过程中创建数据库。其他版本的 Oracle 会在安装二进制文件后提示您是否需要数据库或使用 DBCA。

你确定你想要一个数据库而不仅仅是一个新的用户/模式来存储你的表吗？请参阅“CREATE USER ...”命令的文档以在现有数据库中创建新用户。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:47:09.803

CREATE DATABASE [databasename] 命令将创建一个新数据库。确保您已连接到要在其上创建数据库的服务器。

```
CREATE DATABASE mydatabase; 
```

根据服务器的配置，您可能需要提供更多选项。还，

“要创建数据库，您必须具有 SYSDBA 系统权限。”

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_5004.htm)

# regex - 正则表达式匹配 [integer][colon][alphanum][colon][integer]

> ID：14775675
> 
> 赞同：0
> 
> 时间：2013-02-08T15:18:11.140
> 
> 标签：regex

我正在尝试匹配格式为 [integer][colon][alphanum][colon][integer] 的字符串。例如，42100:ZBA01:20。我需要用冒号分隔这些......

我想学习正则表达式，所以如果可以的话，告诉我我做错了什么：这就是我能够想出的......

```
^(\d):([A-Za-z0-9_]):(\d)+$
^(\d+)$ 
^[a-zA-Z0-9_](:)+$
^(:)(\d+)$ 
```

起初我尝试匹配字符串的一部分，这些匹配整个字符串。如您所知，我对正则表达式不是很熟悉。

编辑：正则表达式用于输入桌面应用程序。我不确定要使用什么“语言”或“类型”的正则表达式，所以我假设 .NET 。我需要能够识别每个分组字符，用冒号分隔。所以第 1 组应该是第一个整数，第 2 组应该是字母数字组，第 3 组应该是整数（范围 1-4）。

先感谢您，

大流士

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T15:27:26.053

我假设分号 ( `;`) 是冒号 ( `:`)？好吧，有点基础。

*   `^`匹配输入的开头。也就是说，正则表达式只有在输入的开头找到匹配项时才会匹配。
*   同样，`$`匹配输入的结尾。

`^(\d+)$`将匹配*仅*由*一个或多个*数字组成的字符串。这是因为匹配需要在输入的开头开始并在输入的结尾停止。换句话说，整个输入需要匹配（不仅仅是其中的一部分）。`+`表示*一个或多个*匹配项。

有了这些知识，您会注意到这`^(\d):([A-Za-z0-9_]):(\d)+$`实际上非常接近正确。这个表达式表示*整个输入*需要匹配：

1.  一位数；
2.  一个冒号；
3.  一个单词字符（或您所说的字母数字字符）；
4.  一个冒号；
5.  一位或多位数字。

问题显然出在 1 和 3 中。您需要在`+`此处添加一个量词以匹配*一次或*多次，而不仅仅是一次。此外，您希望将这些量词*放在捕获组内*，以便在一个捕获组内获得多个匹配项，而不是接收包含单个匹配项的多个捕获组。

```
^(\d+):([A-Za-z0-9_]+):(\d+)$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:22:01.937

你需要使用量词

```
^(\d+):([A-Za-z0-9_]+):(\d+)$
    ^     ^     ^ 
```

`+`是与前面的模式 1 多次匹配的量词

现在您可以通过访问特定组来访问这些值

# sql - 无法从 XML 文件将数据读入 SQL Server 2005

> ID：14775683
> 
> 赞同：0
> 
> 时间：2013-02-08T15:18:45.573
> 
> 标签：sql, xml, sql-server-2005

我正在尝试使用以下脚本从 XML 文件中读取数据并将其插入到名为`TermsTree`SQL Server 2005 的表中。

```
INSERT INTO TermsTree (TermID,ParentID,Name)

SELECT X.TermsTree.query('TermID').value('.', 'INT'),
       X.TermsTree.query('ParentID').value('.', 'INT'),
       X.TermsTree.query('Name').value('.', 'VARCHAR(2000)')
FROM (

SELECT CAST(x AS XML)
FROM OPENROWSET(
    BULK 'C:\Users\MehtabM\Desktop\GetAllTermTree.xml',
    SINGLE_BLOB) AS T(x)
    ) AS T(x)
CROSS APPLY x.nodes('ArrayOfTerm_Child/Term_Child') AS X(TermsTree); 
```

XML 文件的示例是

```
<?xml version="1.0" encoding="utf-8" ?>
<ArrayOfTerm_Child xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
    <Term_Child>
        <TermID>2021</TermID>
        <Name>A. Geographic locations</Name>
        <ParentID>0</ParentID>
    </Term_Child>
    <Term_Child>
        <TermID>3602</TermID>
        <Name>Oceania</Name>
        <ParentID>2021</ParentID>
    </Term_Child>
    <Term_Child>
        <TermID>3604</TermID>
        <Name>Australasia</Name>
        <ParentID>3602</ParentID>
    </Term_Child>
    </Term_Child>
</ArrayOfTerm_Child> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:43:20.043

[http://www.sqlfiddle.com/#!3/18f84/15](http://www.sqlfiddle.com/#!3/18f84/15)

```
declare @xml xml 
select @xml='<?xml version="1.0" encoding="utf-8"?>
 <ArrayOfTerm_Child xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
   <Term_Child>
<TermID>2021</TermID>
<Name>A. Geographic locations</Name>
<ParentID>0</ParentID>
 </Term_Child>
<Term_Child>
<TermID>3602</TermID>
<Name>Oceania</Name>
<ParentID>2021</ParentID>
 </Term_Child>
 <Term_Child>
<TermID>3604</TermID>
<Name>Australasia</Name>
<ParentID>3602</ParentID>
 </Term_Child>
 </ArrayOfTerm_Child>'

;WITH XMLNAMESPACES(DEFAULT 'http://tempuri.org/')
SELECT X.TermsTree.query('TermID').value('.', 'INT'),
       X.TermsTree.query('ParentID').value('.', 'INT'),
       X.TermsTree.query('Name').value('.', 'VARCHAR(2000)')
FROM @xml.nodes('/ArrayOfTerm_Child/Term_Child') X(TermsTree) 
```

# android - 如何在也有 ApplicationContext 对象的简单 Java 类中访问 Android 自定义应用程序对象？

> ID：14775684
> 
> 赞同：5
> 
> 时间：2013-02-08T15:18:46.740
> 
> 标签：android, android-intent, android-activity

我创建了一个这样的自定义应用程序类：

```
class A extends android.app.Application{
    public String abc  = "xyz";
} 
```

我有一个简单的java类

```
class B {
     private appContext;

     // This constructor is called from activity.
     B(Context ctx){
         this.appContext = ctx;
     }

     private void foo(){
          // want to access Class A's abc String vairable Here...HOW TO DO THAT?????
     }
} 
```

如何在 foo 方法中访问 A 类的 abc 字符串变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:34:18.410

`getApplicationContext`您可以通过`Context`良好的铸造获得 Application 类

```
((A) this.ctx.getApplicationContext()).abc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T20:57:42.450

Android 中的`Application`类是单例的，因此您的派生类也是如此。`A`Android在启动您的应用程序时只会创建您的类的一个实例。只是改变

```
class A extends android.app.Application {
    public String abc  = "xyz";
} 
```

至

```
class A extends android.app.Application {
    public static String abc = "xyz";
} 
```

你可以像这样从任何地方引用它：

```
String foo = A.abc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:27:48.937

不要传递 Context，而是尝试传递 Application 类的实例。

就像是：

```
class B {
     private Application app;

     // This constructor is called from activity.
     B(Application ctx){
         this.app = ctx;
     }

     private void foo(){
          app.abc; //Do what you want
     }
} 
```

并像这样调用 B：

```
B b = new B(getApplication()); 
```

确保这是在`onCreate()`或以后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:24:17.070

看起来您已经将应用程序上下文作为参数传递并在构造函数中对其进行了初始化。因此，您现在所要做的就是使用上下文变量来访问`abc`A ，如下所示：`((A) this.appContext).abc;`

# xml - 将 XML 文件发送到 activemq

> ID：14775688
> 
> 赞同：0
> 
> 时间：2013-02-08T15:18:55.723
> 
> 标签：xml, xslt, activemq, apache-camel

我目前有一个骆驼路线设置从一个activemq主题中获取一些东西，通过一个.xsl传递它来转换它，然后将它传递给另一个activemq主题。我现在唯一的问题是我不确定如何真正开始将 xml 文件发布到队列中以启动整个过程。

我曾想过以字符串形式发送整个内容，但我不确定 xsl 文件是否会接收到它来转换它。如果有人有任何将 xml 文件发送到 activemq 队列或主题的提示或方法，我们将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:45:29.987

1) ActiveMQ 带有一个 Web 控制台，您可以在其中将消息发送到队列或主题。默认情况下，此控制台在

```
http://localhost:8161/admin 
```

ActiveMQ 发行版中有一个 WebConsole 自述文件，其中提供了更多详细信息。

2) 您也可以从 JConsole 发送消息（例如 JMX）。

3）替代方法是使用骆驼路线，从文件目录消费并发送到主题。然后您可以将文件放到目录中，让 Camel 拾取并发送文件。

```
<route>
  <from uri="file:somedir/inbox"/>
  <to uri="activemq:topic:someTopicName"/>
</route> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T12:42:19.590

```
    请参考以下代码。
    在这里，我们将收到消息简单文件创建，然后写入来自 BytesMessageObject 的字节，直到 EOF 发生。
                BytesMessage bm = (BytesMessage)topicSubscriber.receiveNoWait(); // 接收（1000）；
                    System.out.println("bm-->"+bm);
                    如果（BM！=空）{
                     文件 file = new File("D:/jms/myfie.txt"); //创建的文件
                     FileOutputStream fos = new FileOutputStream(file);//创建文件输出流
                     BufferedOutputStream outBuf = new BufferedOutputStream(fos);//创建缓冲区输出流
                     诠释我;
                     while((i=bm.readInt())!=-1)//读取unitil EOF表示-1
    {
                        outBuf.write(i);//写入文件
                     }
                     System.out.println("outBuf-->"+outBuf);
                     System.out.println(file.isFile());
                     outBuf.close();//关闭输出缓冲区
                     fos.close();//关闭文件输出流
                    }

    然后在这里打开文件
    写在 BytesMessageObject 中。
    跨队列发送            

                发件人代码：

                File f=new File("D:/Import.txt");//获取文件句柄
                          System.out.println("是文件"+f.isFile());
                          BytesMessage bm = topicSession.createBytesMessage();//创建字节消息
                          InputStream in= new FileInputStream(f);//用文件句柄创建输入流
                          BufferedInputStream inBuf= new BufferedInputStream(in);//创建缓冲区输入流
                          诠释我;
                          while((i=inBuf.read())!=-1)//读取文件直到到达EOF(-1){
                             bm.writeInt(i);//写入字节消息
                          }
                          System.out.println("之后");
                          //添加一个eof
                          bm.writeInt(-1);//在字节消息中添加EOF
                          System.out.println("BM = "+bm);
                          topicPublisher.send(bm);///发送字节消息
                          System.out.println("发送成功");
                          topicConnection.stop();//停止连接

```

# javascript - 在 jQuery 插件中传递参数是什么意思？

> ID：14775691
> 
> 赞同：1
> 
> 时间：2013-02-08T15:18:59.550
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

我见过很多插件，其中包括诸如文档、窗口、未定义之类的对象到打开和关闭的参数中。

这是必要的吗？这是什么意思？什么时候应该使用这些？

```
;(function( $ , document, window, undefined) {
        "use strict";        

      $.fn.pluginname= function(options) {      

        //Code

      };
    })( jQuery, document, window, undefined); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:24:11.137

来自[jqueryboilerplate.com](http://jqueryboilerplate.com/)

```
 // undefined is used here as the undefined global variable in ECMAScript 3 is
 // mutable (ie. it can be changed by someone else). undefined isn't really being
 // passed in so we can ensure the value of it is truly undefined. In ES5, undefined
 // can no longer be modified.

 // window and document are passed through as local variable rather than global
 // as this (slightly) quickens the resolution process and can be more efficiently
 // minified (especially when both are regularly referenced in your plugin). 
```

为了获得一些额外的荣誉，请点击链接，您将看到为什么方法签名以分号开头。

此外，您的示例有点不正确：调用函数时，不应在最后一行传入“未定义”。我在上面粘贴的第一段解释了原因。

# c# - 表单视图更新问题

> ID：14775692
> 
> 赞同：0
> 
> 时间：2013-02-08T15:19:00.937
> 
> 标签：c#, asp.net, listview, gridview, master-detail

我正在使用带有 ac# 后端的 asp.net 创建一个具有主视图和详细视图的工作网站。为了提取数据，我使用的是实体框架，该框架首先从 SQL Server 2005 实例逆向工程代码，该实例运行在我正在开发的同一 xp 机器上。我希望网站上的详细视图能够查看和编辑在主视图中选择的现有记录，而且还能够插入记录。
到目前为止，我已经到了可以使用详细视图来查看和插入记录的地步，但编辑到目前为止还没有成功。我在更新时没有收到错误，而且我看不到任何地方都反映了任何变化。
我见过的一些解决方案说您必须定义 DataKeyNames。（在我的例子中，我使用了一个字段：Job_UID，这实际上是我连接详细视图和主视图的方式。）我试图通过将 where 子句中的项目数减少到只需反映我的 PK 并通过在查询设计器中测试查询。这是我的查询：

 ***SelectCommand** ="SELECT Job_Details.Job_UID、Job_Details.Job_Title、Job_Details.Job_Store_ID、Job_Details.Job_Type_Id、Job_Details.Job_Description、Job_Details.Job_Responsibilities、Job_Details.Job_Pay、Job_Details.Job_Supervisor、Job_Details.Job_Start_Date、Job_Details.Job_Details.Job_End_Date、Job_Details.Job_Details. Job_Meta_Post_EndDate, Job_Details.Job_Meta_Keywords, Store_Look_Up.Store_Name, Store_Look_Up.Store_Region, Store_Look_Up.Store_Address, Job_Type.Job_Type_Name, Job_Type.Job_Type_Description FROM Job_Details INNER JOIN Job_Type ON Job_Details.Job_Type_Id = Job_Type.Job_Type_Id INNER JOIN Store_Look_Up ON Job_Details.Job_Store_ID = Store_Look_Up.Store_Id WHERE (Job_Details.Job_UID = @Job_UID)"
**InsertCommand**="插入 Job_Details（Job_UID、Job_Title、Job_Store_ID、Job_Type_Id、Job_Description、Job_Responsibilities、Job_Pay、Job_Supervisor、Job_Start_Date、Job_End_Date、Job_Meta_Post_StartDate、Job_Meta_Post_EndDate、Job_Meta_Keywords）值（@Job_UID、@Job_Description、@Job_Id、@Job_Store_ID、 Job_Responsibilities、@Job_Pay、@Job_Supervisor、@Job_Start_Date、@Job_End_Date、@Job_Meta_Post_StartDate、@Job_Meta_Post_EndDate、@Job_Meta_Keywords)"
**UpdateCommand**="更新 Job_Details SET Job_Title = @Job_Title, Job_Store_ID = @Job_Store_ID, Job_Type_Id = @Job_Type_Id, Job_Description = @Job_Description, Job_Responsibilities = @Job_Responsibilities, Job_Pay = @Job_Pay, Job_Supervisor = @Job_Supervisor, Job_Start_Date = @Job_Start_Date, Job_End_Date = Job_Meta_Post_StartDate = @Job_Meta_Post_StartDate，Job_Meta_Post_EndDate = @Job_Meta_Post_EndDate，Job_Meta_Keywords = @Job_Meta_Keywords WHERE **(Job_UID = @Original__Job_UID)">***

我见过的其他解决方案似乎涉及很多自定义编码。难道不应该有办法只使用 Visual Studio 的代码生成器并进行一些编码调整吗？

任何帮助将不胜感激，并在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:14:20.067

问题出在我的更新命令上：

我使用 FormView 的 ItemUpdatedEvent 来确定修改了多少行：在我的情况下为 0。

```
 string textToDisplay = string.Empty;
        textToDisplay += "AffectedRows: " + e.AffectedRows.ToString() + "|";

        Label1.Text = textToDisplay; 
```

一旦我能够清楚地看到有多少行正在更新，我就开始测试查询。我用PK替换了@Original_Job_UID。它在页面上起作用。然后我查看了一些 MSDN 文档，发现过滤器应该是 @Job_UID。我输入了它，它起作用了！

希望这对你有帮助！

# java - 如何使用 Java 和 Rhino 查找所有出现的 Javascript 函数

> ID：14775697
> 
> 赞同：2
> 
> 时间：2013-02-08T15:19:07.660
> 
> 标签：java, javascript, rhino

我需要使用 Java 和 Rhino 在 Javascript 文件中搜索所有出现的特定 Javascript 函数。我已经成功地使用访问者模式浏览了所有出现的函数调用（参见下面的代码），但我无法检索被调用函数的名称。哪种方法是正确的？

```
package it.dss.javascriptParser;

import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;

import org.mozilla.javascript.Parser;
import org.mozilla.javascript.ast.AstNode;
import org.mozilla.javascript.ast.FunctionCall;
import org.mozilla.javascript.ast.NodeVisitor;

public class JavascriptParser {

public static void main(String[] args) throws IOException {
    class Printer implements NodeVisitor {

        public boolean visit(AstNode node) {
            if (node instanceof FunctionCall) {
                              // How do I get the name of the function being called?

            }
            return true;
        }
    }

    String file = "/dss2.js";
    Reader reader = new FileReader(file);
    try {
        AstNode node = new Parser().parse(reader, file, 1);
        node.visit(new Printer());
    } finally {
        reader.close();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:49:00.560

FunctionCall 类只代表函数的调用，它的目标是函数名（org.mozilla.javascript.ast.Name）。

要获取调用函数的名称，请使用：

```
AstNode target = ((FunctionCall) node).getTarget();
Name name = (Name) target;
System.out.println(name.getIdentifier()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:26:33.527

从`FunctionCall`您可以通过执行以下操作检索函数名称：

```
((FunctionCall) node).getTarget().getEnclosingFunction().getFunctionName(); 
```

**注意：**匿名函数将返回`null`.

给定函数名称和访问者模式，您可以轻松找出任何*命名*函数的出现。

# c# - 按给定名称读入 XmlElement 值

> ID：14775698
> 
> 赞同：0
> 
> 时间：2013-02-08T15:19:10.343
> 
> 标签：c#, xml, xml-parsing

我需要阅读下面的 XmlElement 并检索定义的元素/字段，这里是元素：

```
<Response>
  <code>JH4KB2F68AC24310A</code>
  <returnCode>1</returnCode>
  <fields name="ACES_ASP_ID">5</fields>
  <fields name="ACES_BASE">31990</fields>
</Response> 
```

我可以轻松检索前 2 个。这是我用来获取第一个字段的内容：

```
MyXmlElement.SelectSingleNode("//Response/code").InnerText 
```

如何从以下位置获取价值：

```
<fields name="ACES_ASP_ID">5</fields> 
```

我尝试过以下格式：

```
MyXmlElement.SelectSingleNode("//Response[fields='" + "ACES_ASP_ID" + "']/fields").InnerText 
```

没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:24:11.767

你必须使用这个：

```
MyXmlElement.SelectSingleNode("//Response/fields[@name='ACES_ASP_ID']")
            .InnerText 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:24:10.547

您需要测试*属性*的值。您的测试`fields='" + "ACES_ASP_ID" + "'`匹配`fields`具有文本内容“ACES_ASP_ID”的元素。

因此，您应该尝试以下方法：`//Response/fields[@name = 'ACES_ASP_ID']`

# python - 打印时间报表的最后一位

> ID：14775702
> 
> 赞同：2
> 
> 时间：2013-02-08T15:19:20.713
> 
> 标签：python, time

鉴于此代码：

```
from datetime import datetime

Time = datetime.now()

print(Time) 
```

我怎么能只打印最后一个数字？例如。

> 2013-02-08 15:13:32.150263 打印 3
> 2013-02-08 15:17:40.759672 打印 2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:20:12.417

`print str(Time)[-1]`会做的伎俩...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:20:19.423

您可以使用：

```
print str(Time)[-1:] 
```

# gcc - 64 位服务器上的 32 位 Fortran

> ID：14775708
> 
> 赞同：1
> 
> 时间：2013-02-08T15:19:51.873
> 
> 标签：gcc, ubuntu, fortran, 32bit-64bit

我有一个需要在 64 位 ubuntu 服务器上运行的 32 位 Fortran 应用程序。我已经在 32 位 ubuntu 机器上验证了该应用程序，它运行良好；但是，当我在 64 位服务器上运行时出现以下错误：

```
error while loading shared libraries: libgfortran.so.3: cannot open shared object file: No such file or directory 
```

对此进行了一些研究，我没有高兴地尝试了以下方法：

*   `sudo apt-get install libgfortran3:i386`找不到包裹
*   手动安装 libgfortran 的 32 位 .deb 包（因架构不正确而失败）
*   安装 getlibs 并让它确定依赖项是什么
*   运行在...下`ldconfig -v`找到`libgfortran.so.3 -> libgfortran.so.3.0.0``/usr/lib/x86_64-linux-gnu:`
*   ...然后尝试将路径更改为该路径`LD_LIBRARY_PATH`，但什么也没做（尽管我不得不说，一旦我们开始谈论库路径，我的知识就会变得非常少...）
*   检查是否安装了 ia32-libs，它们是
*   删除并重新安装 libgfortran，然后`dpkg --configure --pending`运行`dpkg --path-include=/usr/lib/x86_64-linux-gnu`​​.

如果可能的话，我想远离创建一个 32 位的 chroot，但在这一点上，如果还有其他事情可以让我不必这样做，我不知道......

你们中有人知道我还能做些什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:41:06.483

尝试安装包`lib32gfortran3`，因为这将安装 32 位版本的 libgfortran 库。在启动程序之前，您可能最终需要设置`LD_LIBRARY_PATH="/usr/lib32:"`，但如果没有这个，它也可能会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:29:51.067

我不确定这是我的疏忽还是其他原因；但这是解决所有问题的两个步骤：

1.  `sudo apt-get install gfortran`在将安装 GNU Fortran 编译器的 64 位机器上运行
2.  在 64 位机器上使用 gfortran 重新编译应用程序。

奇怪的是，此时我仍然无法将应用程序文件复制/粘贴到其他 64 位机器并运行它。相反，我首先必须在每台机器上单独安装 gfortran，即使我不打算编译任何东西。一旦安装了 gfortran，应用程序就会运行，无论它是在哪里编译的......我认为 libgfortran3 一定是某种依赖......

# domain-driven-design - 如何在分布式事件源系统中对逻辑进行版本控制

> ID：14775712
> 
> 赞同：0
> 
> 时间：2013-02-08T15:20:05.790
> 
> 标签：domain-driven-design, versioning, distributed-computing, cqrs, event-sourcing

**例子**

我的分布式事件源系统模拟了一段时间内建造和购买的房屋。为简单起见，我们将使用年份作为分布式时钟值（暂时忘记矢量时钟）。

房屋在系统版本 1 中建造需要 1 年，但在版本 2 中需要两倍的时间。这是*逻辑*上的变化，而不是*结构*上的变化。

为了应对这种变化，版本 1 中记录的事件也必须在重建状态/快照时由版本 1 重放。当达到第 2 版日志时，应用程序切换到第 2 版逻辑并继续重播剩余事件。构建了一个有效的快照。

**问题**

我的分布式系统中的节点将在不同时间更新到版本 2，从而创建一个多个版本同时运行的窗口。我目前的理解是，这个窗口只能通过功能切换等技术来减少，但不能完全删除（除非您通过关闭整个系统进行升级而牺牲可用性）。

这在合并来自分布式节点的事件日志时会产生问题。事件版本相互渗透，因此无法在重播期间简单地从版本 1 升级到 2。例如：

```
Node    Clock   Event

... pre-merge ...

A       2000    HouseBuildStarted('Alpha')   
A       2001    HousePurchased('Alpha')    <- 'HouseBuilt' event is implicit (inferred through logic).
A       2002    NodeUpgradedTo('V2')
B       2002    HouseBuildStarted('Bravo')
B       2003    HousePurchased('Bravo')
B       2004    NodeUpgradedTo('V2')

... post-merge ...

A       2000    HouseBuildStarted('Alpha')
A       2001    HousePurchased('Alpha')
B       2002    HouseBuildStarted('Bravo')
A       2002    NodeUpgradedTo('V2')        
B       2003    HousePurchased('Bravo')    <- 'Bravo' does not exist yet (1 year early)
B       2004    NodeUpgradedTo('V2') 
```

在不接受所有节点关闭的系统中，这通常是如何处理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:14:02.373

升级逻辑和分发升级的问题是不同的。如果您需要升级事件流（例如，您的“HouseBuilt 事件是隐式的”），那么您应该这样做。您必须通过重新播放事件流来重建您的读取模型，并使用执行升级的逻辑。这在概念上实际上与升级程序时修补数据库没有什么不同。现在需要根据您的新表示重新考虑有关持久数据的事实（可能必须替换默认值，忽略过时的事件等）

如何确定哪个节点运行哪个版本的代码是一个单独的问题。如果您有无停机升级策略，您通常会做什么？是否有一些客户使用旧版本和一些新版本？同样的事情也可能发生，在旧模型在线时构建新的读取模型，在部署新模型时为旧聚合和应用程序服务提供服务等。

# php - 如果方法主体包含在另一个 php 文件中，则无法返回值？

> ID：14775717
> 
> 赞同：0
> 
> 时间：2013-02-08T15:20:14.273
> 
> 标签：php, include

我正在构建一个类，它的一些方法的主体在其他 php 文件中定义。我必须这样做，因为尽管大多数函数都很小、很健全并且是手工编写的，但有几个函数需要由我制作的另一个脚本自动生成。问题是虽然方法被调用，但这些方法中的返回语句似乎没有执行。一般结构是这样的：

**MyClass.php：**

```
<?php

class MyClass
{
    public function foo()
    {
        include "myclass-foo-body.php";
    }
}

?> 
```

**myclass-foo-body.php：**

```
<?php

echo "foo()"; // This executes and outputs as normal.
return 42; // This does not appear to actually execute or return anything.

?> 
```

**测试.php：**

```
<?php

include_once "MyClass.php";
$bar = new MyClass();
$foo = $bar->foo();
var_dump($foo); // Ends up being NULL instead of 42.

?> 
```

那么，我在这里做错了什么？函数/方法体实际上不应该包含在另一个 php 文件中吗？我似乎已经遵循了[php 的 include](http://php.net/manual/en/function.include.php)文档，但我似乎缺少重要信息。（我找不到关于这个主题的任何现有问题，所以希望这不是一个骗局！）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:24:56.960

你的正文文件的返回值将是你的 include 调用的返回值，所以你应该像下面那样做。

```
 public function foo()
    {
       return  include "myclass-foo-body.php";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:23:21.980

你的方法`foo`没有返回任何东西。

被包含文件中的A`return`终止被包含文件的处理。

[PHP 手册](http://php.net/manual/en/function.include.php)

> 可以在包含的文件中执行 return 语句，以终止该文件中的处理并返回到调用它的脚本。

# box2d - 如何修复 b2ContactlSolver 中的 b2Assert(kNormal > b2_epsilon) 错误？

> ID：14775718
> 
> 赞同：0
> 
> 时间：2013-02-08T15:20:14.543
> 
> 标签：box2d, assert, box2d-iphone

在我的 iPhone 应用游戏中，主角将敌人（以 b2bodies 为代表）困在狭小的空间内。有时当太多敌人被困在太小的空间中时，我的游戏会导致 b2Assert(kNormal > b2_epsilon) 失败。

忽视这个断言有什么危险？在我的游戏中，一旦敌人被困在一个狭小的空间内，他们就没有多少用处了，所以如果他们以非物理方式行事，那很好。但是，如果忽略此断言导致 box2D 物理引擎出现其他问题，超出了被困 b2body 的范围，那么我需要尝试修复它。如果是这样，我将如何解决它？

最后，在应用程序的发布版本中是否触发了断言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:56:05.950

此断言已于 2011 年 6 月 18 日从 b2ContactSolver.cpp 中[删除](http://code.google.com/p/box2d/source/detail?r=186&path=/trunk/Box2D/Box2D/Dynamics/Contacts/b2ContactSolver.cpp)。尝试更新您的 Box2D。

断言只是调试工具，它们不会被触发，也不会在发布版本中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:57:19.617

如果你忽略一个断言，任何事情都可能发生。它们不会在发布版本中触发。不过，您**必须**将它们视为致命的程序错误。

断言用于确保方法的输入在定义的边界内，或者运行该方法的条件有效。如果不是这种情况，并且程序断言，则该方法的结果是未定义的。它可能会被简单地忽略并且不提供任何结果（尽管这可能会渗透到代码的其他部分，从而导致那里的后续错误）。或者它会立即崩溃，甚至稍后随机崩溃。

你需要弄清楚这个断言的确切情况，然后确保这些情况不会发生。如果敌人可能被困在狭小的空间内，请确保不会发生这种情况——如何做到这一点取决于您自己。

# git - git：从镜像树中删除远程分支

> ID：14775719
> 
> 赞同：9
> 
> 时间：2013-02-08T15:20:19.343
> 
> 标签：git

我使用构建了一个存储库

```
git clone --mirror <url> 
```

我想删除一些远程分支，但我得到以下信息：

```
$ git push origin :b
error: --mirror can't be combined with refspecs 
```

... 或者

```
$ git push --delete b
fatal: --delete doesn't make sense without any refs 
```

此外，`git branch -D b`不要触摸遥控器。

有没有办法从镜像克隆中删除远程分支，还是我必须为此构建另一个克隆？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-05-06T10:34:49.950

事实上，您可以删除任何存储库的任何分支，甚至无需克隆它：

```
git push <url> +:refs/heads/b 
```

唯一需要注意的是，您必须在 git 存储库中，任何存储库 - 您甚至可以创建一个空存储库来执行此操作，然后将其删除。

果然，你也可以在镜子里做，只是注意你只会看到分支在做`git remote prune origin`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-10T13:19:22.833

如果您使用 --mirror 克隆存储库，您将创建一个裸存储库。这意味着：

" Git 只包含版本控制信息，没有工作文件（没有树），它不包含特殊的 .git 子目录。相反，它直接在主目录中包含 .git 子目录的所有内容本身。”。

克隆中的镜像选项是为了制作当前存储库的“原样”副本，包括注释和外部参考。

话虽如此，您在错误的 repo 上执行此操作，您应该使用原始 repo 进行更改，并且镜像会相应更改。

回答你的问题：

**有没有办法从镜像克隆中删除远程分支，还是我必须为此构建另一个克隆？**

不是我知道的，除了裸存储库不应该像非裸存储库那样使用。

也许你需要的是一个叉子，也许如果你更好地解释你需要什么。无论如何，自从您提出问题以来，已经过去了一年。

这是一些相关的问题和文档：

*   [git clone --mirror 和 git clone --bare 有什么区别](https://stackoverflow.com/questions/3959924/whats-the-difference-between-git-clone-mirror-and-git-clone-bare)
*   [裸存储库和非裸存储库之间的实际区别是什么？](https://stackoverflow.com/questions/5540883/whats-the-practical-difference-between-a-bare-and-non-bare-repository)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-05T13:42:12.167

从裸仓库（使用 --mirror 选项克隆存储库），您可以删除镜像仓库中的分支并使用 --mirror 选项推送删除：

```
$> git clone --mirror <url>
$> git branch -D branch_to_delete_1
$> git branch -D branch_to_delete_2
$> git push --mirror 
```

它允许您一次删除多个分支。

更多信息：[https ://git-scm.com/docs/git-push](https://git-scm.com/docs/git-push)

# javascript - 单击链接后将焦点设置在输入元素上

> ID：14775722
> 
> 赞同：3
> 
> 时间：2013-02-08T15:20:19.970
> 
> 标签：javascript, focus

我有这个可点击的链接，

```
`<a href="#" id="link">Clickable Link</a>` 
```

我有这个`<input>`，点击链接后会出来，

```
 <input id="geo_title" type="text" value="some value" class="geo_title" /> 
```

在我的剧本中，

```
 $('#link').click(function(){

        $('input#geo_title').removeAttr('value');
        $("input#geo_title").focus();
    }); 
```

但遗憾的是，这并没有集中`<input>`元素。我想要的是，单击链接后，我不必单击`<input>`元素就可以输入内容。我错过了什么？非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:25:27.050

工作正常，您只需要阻止默认链接操作，因此浏览器不会尝试遵循它。

```
$('#link').click(function (evt){
  $('input#geo_title').removeAttr('value');
  $("input#geo_title").focus();
  evt.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:33:56.653

尝试通过添加 href=#! 从链接中删除默认焦点！

```
<a href="#!" id="link">Clickable Link</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:23:05.140

您还没有将代码包装在

`$( function() { });`

或者

`$(document).ready( function() { });`

# html - IE 上的 html5 mp4 视频 - 从 AWS S3 到文件的路径

> ID：14775723
> 
> 赞同：1
> 
> 时间：2013-02-08T15:20:21.437
> 
> 标签：html, internet-explorer, video

我在 IE 上播放视频时遇到问题。

当我的 mp4 视频的路径是本地的时，它可以工作：

```
<video poster="myVideo.png" preload="none" controls="controls">
    <source src="myVideo.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
    <source src="myVideo.webm" type='video/webm; codecs="vp8, vorbis"' />
    <source src="myVideo.ogv" type='video/ogg; codecs="theora, vorbis"' />
</video> 
```

但如果它托管在这样的 URL 路径上，IE 不会播放视频：

```
<video poster="https://s3.amazonaws.com/assets/myVideo.png" preload="none" controls="controls">
    <source src="https://s3.amazonaws.com/assets/myVideo.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
    <source src="https://s3.amazonaws.com/assets/myVideo.webm" type='video/webm; codecs="vp8, vorbis"' />
    <source src="https://s3.amazonaws.com/assets/myVideo.ogv" type='video/ogg; codecs="theora, vorbis"' />
</video> 
```

可能是什么问题呢？

* * *

# 固定的：

确保在将视频文件保存到 S3 时，必须指定`Content-Type`：

此外，要显示 IE 的海报，您还需要`preload="none"`在 video 标签内：

![保存到 S3 时设置 Content-Type](../Images/19042088d7aab0a86e9c90f5f0fa99ad.png)

# csv - 关于从 bigquery 表中删除重复的 CSV 文件或行

> ID：14775732
> 
> 赞同：0
> 
> 时间：2013-02-08T15:20:42.137
> 
> 标签：csv, google-bigquery

我在 BigQuery In Cloud Application 中创建了一个表。错误地我在一个大查询表中上传了两个 csv 文件。如何从 bigquery 表中删除一个或两个 csv 文件？

谢谢阿文德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:35:28.230

遗憾的是，目前无法从 BigQuery 表中删除数据。您最好的选择是在新表中重新导入数据。（如果您不再拥有原始 CSV，您可以导出表格，然后在重新导入之前删除重复项。）

# javascript - 带有转义斜杠的 javascript 语法

> ID：14775736
> 
> 赞同：0
> 
> 时间：2013-02-08T15:20:59.870
> 
> 标签：javascript, syntax

我注意到如果 Google 的托管 jquery 无法加载，一些网站会使用此方法作为备份源。我也复制了它，现在对语法很好奇：

```
window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>'); 
```

据我了解，如果 jQuery 为 false 或未定义，则编写一个脚本以在本地加载 jquery。

我不确定的是，`\`结束脚本标记中的意义是什么？有什么好逃避的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:22:09.203

您正在逃避整个`</script>`标签本身。这是因为，许多旧版浏览器认为脚本在这里结束：

```
window.jQuery || document.write('<script src="/js/jquery.min.js"></script>');
-----------------------------------------------------------------^ 
```

该点成为原始`<script>`标签的结尾！

# vim - 如何从函数执行 Vim 的排序命令？

> ID：14775741
> 
> 赞同：0
> 
> 时间：2013-02-08T15:21:09.143
> 
> 标签：vim

我想编写一个函数来对 Scala 导入进行排序。

我已经成功找到了导入的开始和结束的地方。现在我只需要进行实际排序。

```
function! SortScalaImport()
  call cursor(1, 1)
  let start = search('^import') "find first line with import
  let end = search('^\(import\|\n\)\@!') "find first non-import line
  let end = end - 1
  execute 'normal '.start.','.end.'sort'
endfunction 
```

函数的最后一行应该这样做，但什么也不做。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:09:57.767

因为 Vim 是基于模式的编辑器，所以在编写脚本时还需要考虑模式。

`:normal`用于*普通模式*命令，即用于导航 ( `j`, `w`) 或更改 ( `x`, `gUU`) 文本的简短内容。使用`:`，您进入*命令行模式*，其中执行 Ex 命令（如`:substitute`或您的`:sort`）。通常，您可以将这些原样放入您的 Vimscript 函数中（例如`%delete _`），但是当您想将变量（在您的情况下：行号）放入其中时，您需要`:execute`它，除了 variables 之外的所有内容`'quoted'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:38:15.023

我不知道你为什么添加`normal`你的执行？

这对你有用吗？

```
execute start.','.end.' sort' 
```

# ldap - LDAP 在代码之外验证密码

> ID：14775742
> 
> 赞同：0
> 
> 时间：2013-02-08T15:21:12.840
> 
> 标签：ldap

我在 C# 代码中有一个 LDAP 错误，涉及无效的客户用户名/密码。

我需要确认密码是否正确，或者我操纵用户 DN 以删除转义字符的方式导致用户身份不明。

我不太熟悉域以及它如何适应 Windows，但我可以访问一些免费的 LDAP 浏览器，例如[http://www.ldapbrowser.com/](http://www.ldapbrowser.com/)或者可以下载一些其他软件，但我需要验证密码它以某种方式。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:17:07.910

“ldapbrowser”应该可以工作。

我们更喜欢[http://directory.apache.org/studio/](http://directory.apache.org/studio/)

错误代码是什么？

我假设您正在使用AD？

我们也有一些[关于 AD 和 LDAP 的帮助](http://ldapwiki.willeke.com/wiki/LDAP%20and%20Active%20Directory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T21:22:32.587

请参阅我对以下主题的回复：

[LDAP - 如何检查用户名/密码组合？](https://stackoverflow.com/questions/4066265/ldap-how-to-check-a-username-password-combination/17765363#17765363)

如果您只需要验证用户名和密码，LDAPWhoAmI 扩展操作将起作用（在自定义测试脚本中，或通过专用二进制文件“ldapwhoami”）。

我希望这有帮助...

最大限度

# php - PHP类函数声明问题

> ID：14775746
> 
> 赞同：2
> 
> 时间：2013-02-08T15:21:30.907
> 
> 标签：php, object

我对函数重新声明问题有疑问。所以，我试图多次调用这个例子。

```
class myClass {

    function abc() {

        function internal() {

        return "i am internal"; 
        }

    return internal();
    }

}

$myClass = new myClass();

echo $myClass->abc();
echo $myClass->abc(); // HERE IS THE PROBLEM when i call same function second time 
```

PHP 显示致命错误：无法重新声明 internal()（之前已声明）。

有谁知道我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:24:14.133

您不能重新声明函数周期，因此请尝试以下操作：

```
<?php 
class myClass {

    function abc() {
        return $this->internal();
    }

    private function internal() {
        return "i am internal";
    }

}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:24:55.007

在定义函数之前检查函数是否存在：

```
class myClass {
    function abc() {
        if ( ! function_exists('internal')) {
            function internal() {
                return "i am internal"; 
            }
        }

        return internal();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:28:59.753

当您使用 声明一个函数时`function <name>()`，您并*没有*在您认为的范围内声明它。该函数是在~~类~~全局范围内声明的，而不是在函数/类范围内。

请参阅 PHP 文档：[http ://www.php.net/manual/en/functions.user-defined.php#example-149](http://www.php.net/manual/en/functions.user-defined.php#example-149)

因此，当您调用 时`abc`，您是在重新声明全局函数`internal`.

如果你想做你正在做的事情，你可以使用[闭包](http://php.net/manual/en/functions.anonymous.php)来代替（注意：这只适用于 PHP 5.3+）。这样做的好处是能够从内部读取局部变量`abc`（如果您使用`use`关键字）。

```
class myClass {

    function abc() {
        $internal = function() {
            return "i am internal"; 
        };

        return $internal();
    }
} 
```

您还可以声明`internal`为该类的私有函数，尤其是在它不会更改的情况下。为什么要不断地重新制作一个函数？

```
class myClass {

    private function internal(){
        return "i am internal"; 
    }

    function abc() {
        return $this->internal();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:24:44.307

或者：

```
if (!function_exists('internal')) { function internal ... } 
```

但是，您必须注意，在这种情况下，内部函数也将在类范围*之外可用。*Lawrence 的解决方案是一种更好的方法。

# javascript - 对 javascript 函数的调用在 dojo 要求块中不起作用（dojo 版本 1.8）

> ID：14775749
> 
> 赞同：0
> 
> 时间：2013-02-08T15:21:49.247
> 
> 标签：javascript, dojo, call, amd

对另一个 javascript 函数的调用未执行。代码：

```
function btn_click(){
  require(["dojo/dom","dijit/registry"], function(dom,dijit){

    dom.byId("tbm_notes_results").innerHTML="New HTML";

    javascriptfn1;

    //code after 1

 });

  javascriptfn2;
  //code after 2
} 
```

*   调用 javascriptfn1 不执行，控制台中没有错误
*   //1执行后的代码（注释掉）

*   在 REQUIRE 之外，对 javascriptfn2 的调用不会执行，控制台中没有错误

*   // 2 次执行后的代码（注释掉）

搜索使我找到以下内容

[Dojo AMD：无法在要求中调用函数](https://stackoverflow.com/questions/9626821/dojo-amd-cant-call-a-function-inside-a-require)

如果有人能为我解释它更简单（甚至是一个概念），我将不胜感激，如果可能的话告诉我如何使它工作（有/没有我的模块/包）

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:30:29.593

如果要调用`javascriptfn1`，则需要使用括号。

```
javascriptfn1(); 
```

与`javascriptfn2`

# breeze - 获取微风元数据在 Chrome 中很慢，在 IE 中很快

> ID：14775750
> 
> 赞同：0
> 
> 时间：2013-02-08T15:21:52.800
> 
> 标签：breeze

在 Chrome 中为我的模型获取元数据似乎非常慢，但在 IE 中却很快。

我的 dbcontext 包含大约 35 个具有大量导航属性的实体，我添加的每个实体都会增加延迟。目前延迟大约是 20 秒，在查询返回原始元数据之后开始，并且完全是 CPU 正在大量工作，内存使用保持稳定。我有一个 i7 处理器和充足的内存。

我知道 javascript 引擎在这两个浏览器中的配置方式存在差异，chrome javascript JIT 编译器针对浮点操作进行了优化（这就是为什么 webgl 图形在 chrome 中比 IE 快一千倍）——这可能是有对 fetchMetaData 必须做的工作有影响吗？

有没有其他人注意到这种缓慢？会不会是我的人际关系出了问题？一旦延迟结束，一切正常，所以我怀疑关系可能是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:23:16.547

**找到问题和解决方案！**

感谢您抽出宝贵时间查看此问题，在您回复后，我决定将整个项目简化为可以重现问题并寻找任何干扰的基础。

这是一个较旧的项目，我在其中实施了 Breeze。该项目使用标准 jquery post/get 方法从 MVC 获取数据，并且由于在从 MVC 发布和接收 json 数据时日期和时间一直是个问题，所以我在启动脚本中有以下代码：

```
 // Add datafilter to jQuery ajax calls to translate dates
$.ajaxSettings.dataFilter = function (data, type) {
    //if (type === 'json') {
    // convert things that look like Dates into a UTC Date string and completely replace them.
    data = data.replace(/(.*?")(\\\/Date\([0-9\-]+\)\\\/)(")/g,
                    function (fullMatch, $1, $2, $3) {
                        try {
                            return $1 + new Date(parseInt($2.substr(7))) + $3;
                        }
                        catch (e) { }
                        // something miserable happened, just return the original string
                        return $1 + $2 + $3;
                    });
    //}
    return data;
}; 
```

删除此代码后（因为微风确实日期正确），一切正常。这种类型的代码在其他必须正确处理日期的旧项目中可能很常见，我知道我从[WiredPrairie](http://www.wiredprairie.us/blog/index.php/archives/1183)得到了上面的代码片段，我相信其他人也会遇到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:20:43.173

德米特里，我无法重现这一点，所以我想知道是否还有其他问题。你也试过火狐吗？

# angularjs - Angular JS - 我如何在模型更改时制作动画？

> ID：14775751
> 
> 赞同：20
> 
> 时间：2013-02-08T15:21:54.267
> 
> 标签：angularjs, angularjs-directive

当 currentVertical 发生变化时，我正在尝试做一个很好的淡出+淡入过渡。在淘汰赛中它是如此简单，但我无法在这里弄清楚。请帮忙。

以下代码显示一个 UL 列表，当单击 LI 元素时，该 UL 列表“绑定”到 $scope.currentVertical 中的定价数组，$scope.currentVertical 发生更改，并且 UL 列表相应更新。这工作正常，但我希望整个#container div 在 $scope.currentVertical 更改时淡出和淡入。请帮忙...

我的html：

```
<body>
    <h1>Pricing Poll</h1>
    <div ng-controller="VerticalsController">
        <div id="container">
            <h2>{{currentVertical.title}}</h2>

            <ul>
                <li ng-repeat="pricing in currentVertical.pricings">
                    <a ng-click="currentVertical.selectPricing(pricing)">{{pricing.name}}</a>
                </li>
            </ul>
        </div>
    </div>
</body> 
```

我的JavaScript：

```
function VerticalsController($scope) {

  $scope.verticals = [
    {
        title:'internet',
        pricings: [
            {
                name: 'netvision',
                monthly: 23
            },
            {
                name: 'hot',
                monthly: 33
            },
            {
                name: '012',
                monthly: 28
            }
        ]
    },
    {
        title:'cellular', 
        pricings: [
            {
                name: 'cellcom',
                monthly: 20
            },
            {
                name: 'pelephone',
                monthly: 30
            },
            {
                name: 'orange',
                monthly: 25
            }
        ]
    },
    {
        title:'banks', 
        pricings: [
            {
                name: 'leumi',
                monthly: 20
            },
            {
                name: 'poalim',
                monthly: 30
            },
            {
                name: 'benleumi',
                monthly: 25
            }
        ]
    }];

    $scope.selected = [
    ];

    $scope.currentIndex = 0;
    $scope.currentVertical = $scope.verticals[0];

  $scope.selectPricing = function(pricing) {
    $scope.selected.push(pricing);
    $scope.currentIndex++;
    $scope.currentVertical = $scope.verticals[$scope.currentIndex];
  };

  /*$scope.remaining = function() {
    var count = 0;
    angular.forEach($scope.todos, function(todo) {
      count += todo.done ? 0 : 1;
    });
    return count;
  };*/
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T16:14:22.727

您必须使用自定义或创建指令来启动高级 DOM 操作，如动画。

这是您请求的动画的一个小技巧，我使用`visible`范围上的变量来触发淡入淡出，并使用 $timeout 服务仅在淡出时更改 selectedItem，可以改进它以将超时和回调作为指令选项传递...

小提琴：http: [//jsfiddle.net/g/Bs66R/1/](http://jsfiddle.net/g/Bs66R/1/)

**JS：**

```
function VerticalsController($scope, $timeout) {

  $scope.verticals = [{
    title:'internet',
    pricings: [{
      name: 'netvision',
      monthly: 23
    },
    {
      name: 'hot',
      monthly: 33
    },
    {
      name: '012',
      monthly: 28
    }]
  },
  {
    title:'cellular',
    pricings: [{
      name: 'cellcom',
      monthly: 20
    },
    {
      name: 'pelephone',
      monthly: 30
    },
    {
      name: 'orange',
      monthly: 25
    }]
  },
  {
    title:'banks',
    pricings: [{
      name: 'leumi',
      monthly: 20
    },
    {
      name: 'poalim',
      monthly: 30
    },
    {
      name: 'benleumi',
      monthly: 25
    }]
  }];

  $scope.selected = [
  ];

  $scope.currentIndex = 0;
  $scope.currentVertical = $scope.verticals[0];

  $scope.selectPricing = function(pricing) {
    $scope.selected.push(pricing);
    $scope.currentIndex++;
    $scope.visible = false;

    $timeout(function(){
      $scope.currentVertical = $scope.verticals[$scope.currentIndex];
      $scope.visible = true;
    }, 1000);
  };

  $scope.visible = true;
}

var fadeToggleDirective = function() {
  return {
    link: function(scope, element, attrs) {
      scope.$watch(attrs.uiFadeToggle, function(val, oldVal) {
        if(val === oldVal) return; // Skip inital call
        // console.log('change');
        element[val ? 'fadeIn' : 'fadeOut'](1000);
      });
    }
  }
}

angular.module('app', []).controller('VerticalsController', VerticalsController).directive('uiFadeToggle', fadeToggleDirective);

angular.bootstrap(document.body, ['app']);    angular.bootstrap(document.body, ['app']); 
```

**HTML：**

```
<h1>Pricing Poll</h1>
<div ng-controller="VerticalsController">
  <div id="container" ui-fade-toggle="visible">
    <h2>{{currentVertical.title}}</h2>

    <ul>
      <li ng-repeat="pricing in currentVertical.pricings">
        <a ng-click="selectPricing(pricing)">{{pricing.name}}</a>
      </li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T18:30:01.283

我建议您使用AngularJS Core 中提供的新[ngAnimate指令。](http://docs.angularjs.org/api/ngAnimate)

[在这里](http://www.yearofmoo.com/2013/04/animation-in-angularjs.html)阅读更多

# javascript - jquery绑定点击标签触发两次

> ID：14775752
> 
> 赞同：9
> 
> 时间：2013-02-08T15:21:57.683
> 
> 标签：javascript, jquery

当我在标签中添加一个选择并为单击事件绑定时，jquery 会触发两次。

[http://jsfiddle.net/d8Ax7/](http://jsfiddle.net/d8Ax7/)

html:

```
<label class="lol">
    <div>
        bla
    </div>
    <div style="display:none;">
        <select></select>
    </div>
</label> 
```

javascript:

```
$("label.lol").on({
    click : function ()
    {
        alert(1);
    }
}) 
```

如何在不向标签添加“for”属性的情况下修复此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:36:11.913

我知道这个问题已经有很多答案，但很模糊。

```
$("label.lol").on({
    click : function ()
    {
        alert(1);
        return false;
    }
}); 
```

好的，大家赞赏。问题解决了。但是问题出现了为什么`return false;`。

**用简单的话回答：**这是一种告诉计算机从函数返回，我给你的任务已经完成的方法。现在没有更多的混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:26:45.477

您可以尝试使用标签的“for”属性将其链接到其外部的选择。看我的例子

```
<label for="test" class="lol">
    <div>
        bla
    </div>
</label>

<div style="display:none;">
    <select id="test"></select>
</div> 
```

[http://jsfiddle.net/d8Ax7/1/](http://jsfiddle.net/d8Ax7/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:24:19.407

```
$("label.lol").off("click").on(//... 
```

但是如果它触发了两次，那肯定意味着你已经绑定了两次，所以使用 .off 比解决问题的最佳解决方案更像是一种黑客攻击，这将是了解你最终如何绑定两次这个事件......当然你展示的代码无法解释这种双重束缚

编辑：&在你的小提琴中它确实只触发一次......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:27:11.093

这样它也可以工作，但我不完全理解你想要做什么......并且标签应该只包含选择的标签文本而不包含选择本身..

```
 $("label.lol div:first").on({
        click : function ()
        {
            alert(1);
        }
    }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T15:29:33.883

覆盖单击时有两个选项，请查看此[堆栈溢出](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)问题以获取更多详细信息，但总结一下，试试这个...

```
$("label.lol").click(function () {
        alert(1);
        return false;
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T15:29:50.837

你的标记太可怕了。你的问题是 jquery 在你的标签函数内的每个 div 上执行点击事件 - 意味着两次。你应该清理你的标记并询问你想要直接点击的 div。否则使用 :first 确保事件只触发一次：

```
$('.lol div:first').click(function ()
{
    alert("1");
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T15:31:20.840

您应该添加 e.preventDefault();

```
$("label.lol").on({
  click : function (e)
  {
    alert(1);
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-08T15:44:18.980

您的问题在于元素之间的区别。例如，您应该使用`:first-child`选择器选择标签的第一个子项，或者给它一个`id`：

**HTML：**

```
<label class="lol">
    <div id="first-child">
        bla
    </div>
    <div style="display:none;">
        <select></select>
    </div>
</label> 
```

**JS：**

```
$("#first-child").on('click',function (){
        alert(1);
}); 
```

[http://jsfiddle.net/d8Ax7/5/](http://jsfiddle.net/d8Ax7/5/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-08T16:01:05.237

尝试使用 CSS 进行过滤：添加一个中间类`clicked`来阻止第二次警报（或任何操作），然后删除`.clicked`为下一轮做好准备。

```
$("label.lol").on({
    click : function ()
    {
        if (! $(this).hasClass('clicked'))
            alert(1);
        $(this).toggleClass('clicked');
    }
}) 
```

# java - 将多个 JTable 打印为一个作业 - Book 对象仅打印第一个表

> ID：14775753
> 
> 赞同：5
> 
> 时间：2013-02-08T15:21:57.327
> 
> 标签：java, swing, printing, jtable

出于多种原因，我试图将多个 JTable 的输出组合到一个打印作业中。在尝试构建 PDF 并梳理 Java API 之后，我决定使用 Book 类。我的打印代码目前看起来像这样。

```
try {       
    PrinterJob printer = PrinterJob.getPrinterJob();

    //Set 1/2 " margins and orientation
    PageFormat pf = printer.defaultPage();
    pf.setOrientation(PageFormat.LANDSCAPE);
    Paper paper = new Paper();
    double margin = 36; // half inch
    paper.setImageableArea(margin, margin, paper.getWidth() - margin * 2, paper.getHeight() - margin * 2);
    pf.setPaper(paper);

    Book printJob = new Book();

    // Note for next line: getAllTables() returns an ArrayList of JTables
    for (JTable t : getAllTables() )  
        printJob.append(t.getPrintable(PrintMode.FIT_WIDTH, null, null), pf,2);

    printer.setPageable(printJob);

    System.out.println(printJob.getNumberOfPages());

    if (printer.printDialog())
        printer.print();
    } catch (PrinterException e) {
        e.printStackTrace();
} 
```

**主要问题：**只有“第一个”表的输出正在打印。我已确保 for 循环正确迭代，并且调试语句显示每个表都已添加到 Book 中。更改表的顺序没有效果。将打印模式更改为`PrintMode.NORMAL`, 确实会导致打印其他表格的片段。但是，我遇到了一个水平分页问题，​​因为表格宽度经常超过页面宽度（它仍然不能解释为什么`PrintMode.FIT_WIDTH`不起作用）

**第二个问题：**如何检测每个可打印的正确页数？我的大多数表格都是两页长，所以目前，我每次追加时只添加 2 页。我读到“某处”，将`Book.UNKNOWN_NUMBER_OF_PAGES`其用作页码将解决此问题，但这只会导致 API 代码中出现 IndexOutOfBounds 异常。我已经考虑自己调用 print ，直到我得到`NO_PAGE_EXISTS`，但我需要一个具有适当页面尺寸的 Graphics 对象（我不知道如何获得它）。

**最后：**如果 Book 方法没有希望，我还能如何将多个 JTables（即多个 printables）的输出组合到一个作业中？我考虑[将表格导出为 PDF](https://stackoverflow.com/questions/12785264/how-to-export-a-complete-jtable-component-in-pdf-at-a-specific-coordinate)，但 JTable 的内置分页非常好，我宁愿不必自己做。我最后的手段是放弃并使用 iText 的内置表格函数来构建表格的副本。

**编辑 3：**根据我在下面的评论，我通过生成一个可打印的、确定页数，然后生成一个新的来完成这项工作。我还修改了 Durendal 的包装器，以免除我们遍历每一页的麻烦。包装器的代码是

```
 class PrintableWrapper implements Printable
    {
        private Printable delegate;
        private int offset;

        public PrintableWrapper(Printable delegate, int offset) {
            this.offset = offset;
            this.delegate = delegate;
        }

        @Override
        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
            return delegate.print(graphics, pageFormat, pageIndex-offset);
        }
    } 
```

我把 Durendal 的用于确定页数的代码放在它自己的函数中

```
 public int getNumberOfPages(Printable delegate, PageFormat pageFormat) throws PrinterException 
    {
        Graphics g = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB).createGraphics();
        int numPages = 0;
        while (true) {
            int result = delegate.print(g, pageFormat, numPages);
            if (result == Printable.PAGE_EXISTS) {
                ++numPages;
            } else {
                break;
            }
        }

        return numPages;
    } 
```

创建图书对象后，我的打印代码如下所示

```
 int totalPages = 0;
            for (DragNDropTable t : getAllTables() )
            {
                int pages = getNumberOfPages(t.getPrintable(PrintMode.FIT_WIDTH, null, null), pf);
                Printable p = t.getPrintable(PrintMode.FIT_WIDTH, null, null);
                printJob.append(new PrintableWrapper(p,totalPages), pf, pages);
                totalPages += pages;
            }
            printer.setPageable(printJob);

            if (printer.printDialog())
                printer.print(); 
```

它就像一个魅力！

**编辑2：（你可以跳过这个）**我试过Durendal的回答。当我打印足够多的页面时，多页打印件会多次打印最后一页（打印件中的每一页打印一次）。这与我在第一次编辑（如下）中讨论的问题相同，我不知道为什么会发生这种情况，我的调试语句说它正在正确打印所有页面，但是打印了多页可打印的最后一页代替每一页。附上代码。洞察力受到赞赏（并以虚拟 cookie 回报）

```
try {       
    PrinterJob printer = PrinterJob.getPrinterJob();

    //Set 1/2 " margins and orientation
    PageFormat pf = printer.defaultPage();
    pf.setOrientation(PageFormat.LANDSCAPE);
    Paper paper = new Paper();
    double margin = 36; // half inch
    paper.setImageableArea(margin, margin, paper.getWidth() - margin * 2, paper.getHeight() - margin * 2);
    pf.setPaper(paper);

    Book printJob = new Book();

    // Note for next line: getAllTables() returns an ArrayList of JTables
    for (JTable t : getAllTables() )  
    {
        Printable p = t.getPrintable(PrintMode.FIT_WIDTH, null, null);
        int pages = getNumberOfPages(p, pf);

        for (int i=0; i < pages; i++)
            printJob.append(new PageWrapper(p,i), pf);
    }

    printer.setPageable(printJob);

    System.out.println(printJob.getNumberOfPages());

    if (printer.printDialog())
        printer.print();
    } catch (PrinterException e) {
        e.printStackTrace();
}

public int getNumberOfPages(PageFormat pageFormat) throws PrinterException 
{
    Graphics g = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB).createGraphics();
    int numPages = 0;
    while (true) {
        int result = delegate.print(g, pageFormat, numPages);
        if (result == Printable.PAGE_EXISTS) 
            ++numPages;
        else
            break;
    }

    return numPages;
} 
```

我正在使用 Durendal 在下面给出的未修改的 PageWrapper。

**编辑 1：（你可以跳过这个）**与 Durendal 的回答相吻合，我试图制作一个包装器，让我们不必自己迭代页面。不幸的是，它似乎无法在多页打印件上正常工作，在文档中多次打印同一页。我发布它，只是因为有人可以让它工作，而且使用起来稍微方便一些。

```
class PrintableWrapper implements Printable
    {
        private Printable delegate;
        private int offset;

        public PrintableWrapper(Printable delegate, int offset) {
            this.offset = offset;
            this.delegate = delegate;
        }

        @Override
        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
            return delegate.print(graphics, pageFormat, pageIndex-offset);
        }

        public int getNumberOfPages(PageFormat pageFormat) throws PrinterException 
        {
            Graphics g = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB).createGraphics();
            int numPages = 0;
            while (true) {
                int result = delegate.print(g, pageFormat, numPages);
                if (result == Printable.PAGE_EXISTS) 
                    ++numPages;
                else
                    break;
            }

            return numPages;
        }
    } 
```

我的打印代码现在看起来像这样（在我设置页面格式之后）

```
Book printJob = new Book();
int totalPages = 0;

for (DragNDropTable t : getAllTables() )
{
    Printable p = t.getPrintable(PrintMode.FIT_WIDTH, null, null);
    PrintableWrapper pw = new PrintableWrapper(p, totalPages);
    totalPages += pw.getNumberOfPages(pf);
    printJob.append(pw, pf,pw.getNumberOfPages(pf));
}

printer.setPageable(printJob);

if (printer.printDialog())
{
    printer.print();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:47:57.117

I had the very same Problem recently. The Book class by itself is *useless*, because if you add Printables to it, when the Book is printed it will pass the pageIndex from the Book to the Printable at pageIndex.

That is in most cases not what you want.

Create a simple Printable Wrapper that can remember a pageIndex to be used for the Printable delegate and add those to the Book:

```
class PageWrapper implements Printable {
    private Printable delegate;
    private int localPageIndex;

    public PageWrapper(Printable delegate, int pageIndex) {
        this.localPageIndex = pageIndex;
        this.delegate = delegate;
    }

    @Override
    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
        return delegate.print(graphics, pageFormat, localPageIndex);
    }
} 
```

Now you need to iterate trough each page of each Printable/Pageable and add a wrapper instance (that knows the pageIndex into its delegate) to the Book. That solves the problem that Book passes the wrong pageIndex to the printables added to it (its easier for Pageables than Printables).

You can detect the number of Pages in a Printable by printing it ;) Yes, I'm serious:

```
Graphics g = new BufferedImage(1, 1, BufferedImage.TYPE_INT_RGB).createGraphics();
int numPages = 0;
while (true) {
    int result = printable.print(g, pageFormat, numPages);
    if (result == Printable.PAGE_EXISTS) {
        ++numPages;
    } else {
        break;
    }
} 
```

Its important you obtain your PageFormat instance from the actual PrinterJob you want to print to, because the number of pages depends on the page format (paper size).

# java - Maven/eclipse项目结构

> ID：14775755
> 
> 赞同：1
> 
> 时间：2013-02-08T15:21:59.393
> 
> 标签：java, eclipse, maven, project-management

我对 Maven 还很陌生，我终于拥有了我想要的，但现在我需要重新打破它。

这是我的场景：

我需要编写两个不同的服务器应用程序，它们使用相同的核心功能；只是，使用该框架所做的事情非常不同。一个服务器应用程序非常容易/简单——它已经完成了——而另一个要复杂得多。

代码是用依赖注入风格编写的（如果重要的话，使用 Guice），所以它应该非常容易分解。

我的问题是：您将如何使用 Maven 在 Eclipse 中构建项目？您会设置三个不同的项目，例如：

```
server-core
server-appEasy
server-appComplicated 
```

每个服务器都有自己的pom。或者，您会将其全部保存在一个项目中吗？我需要能够`appEasy`在一个月后轻松地重新编译，而我正在处理`appComplicated`. 的类`appEasy`已经在一个子包中。注意：`core`如果没有至少一个模拟依赖注入，它本身就无法工作。它没有`main`类。

所有的想法都受到赞赏，即使是我没有想到的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:35:12.993

我会有这样的结构：

```
/server
    /server-core
        pom.xml
    /server-appeasy
        pom.xml
    /server-appcomplicated
        pom.xml
    pom.xml 
```

因此，每个项目都有自己的 pom.xml，允许您单独构建该项目。

但是，父文件夹也有一个 pom.xml，如果运行，它将构建所有项目。您可以通过将项目作为模块包含在父 pom.xml 中来做到这一点。

例如在父 pom.xml

```
<modules>
    <module>server-core</module>
    <module>server-appeasy</module>
    <module>server-appcomplicated</module>
</modules> 
```

您还可以在父 pom tio 中使用托管依赖项，允许您集中外部依赖项和插件版本号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:38:41.690

我建议将所有内容构建为 Maven 多模块项目。

父项目将三个项目作为模块、第 3 方依赖版本以及作为属性的项目版本。

然后，在 server-appComplicated 和 server-appEasy 中，我将向 server-core 添加一个依赖项。

通过这种方式，您将获得： 1- 一个要编译的根项目（父项目），它将生成两个服务器和核心库。2-处理版本号和常见依赖项的点。

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:24:50.423

我不是专家，但这是我的 2 美分。每个项目都需要自己的 pom。您需要一起构建所有项目吗？在这种情况下，拥有一个具有所有常见依赖项的父 pom 可能是有意义的。

编辑：在那种情况下，我觉得每个项目只有三个独立的 3 个 pom 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:35:07.843

有多种方法可以做到这一点，具体取决于您在部署时的需要。假设 'server-core' 是您的 'server-appEasy' 和 'server-appComplicated' 工件之间的共享工件，我建议如下

1.  创建一个 Maven 项目“服务器核心”
2.  按名称“server-appEasy”和“server-appComplicated”添加两个模块项目
3.  确保模块项目的父级设置为“服务器核心”
4.  最后你应该有三个项目（每个项目都有单独的 pom.xml），其中
    a. 构建“服务器核心”也将构建模块
    b。根据需要独立构建“简单”和“复杂”模块中的任何一个也将构建服务器核心。

希望这可以帮助！

# google-apps-script - 通过 api 编辑电子表格时，如何在 Google Apps 脚本中捕获 onEdit 事件？

> ID：14775760
> 
> 赞同：3
> 
> 时间：2013-02-08T15:22:17.613
> 
> 标签：google-apps-script, google-sheets, google-drive-api, google-spreadsheet-api

我有一个应用程序脚本，当我手动编辑某个 Google 电子表格单元格时捕获 onEdit 事件，并根据更改应用各种格式更改。

但是，当我使用 Google Drive API 编辑同一个单元格时，脚本似乎没有运行。

是否有某种方法可以通过应用程序脚本捕获的 api 触发事件？或者其他一些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:05:24.097

发布为 Web 应用程序：

可以使用 URL 触发 Google 应用程序脚本代码，即从 Google 应用程序脚本编辑器菜单->发布->发布为网络应用程序。然后，您可以将单元格的 id 作为参数传递给“网络应用程序”。并让网络应用程序调用 onEdit。

我怀疑“google-spreadsheet-api”无法做到这一点，因为即使是“在工作表中间插入一行”之类的基本内容也不存在。

# iphone - 如何设置初始界面方向？

> ID：14775762
> 
> 赞同：0
> 
> 时间：2013-02-08T15:22:23.720
> 
> 标签：iphone, ios, objective-c, device-orientation

我的应用程序总是以横向模式启动，主页按钮位于左侧。如果主页按钮在右侧，它会旋转。我如何使它相反？我尝试为 key 设置不同的值到 info.plist 文件中，`initial interface orientation`但是没有用。我尝试在这种方法中切换值的顺序：

```
- (NSInteger)supportedInterfaceOrientations
{
  return UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskLandscapeLeft;
} 
```

但它也没有工作。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:30:29.003

对于 IOS 5 和 5.1：

尝试`(BOOL)shouldAutorotateToInterfaceOrientation`在您的视图控制器中设置，它对我有用。

![在此处输入图像描述](../Images/39aaa16c079da72a0040194cd0652db4.png)

![在此处输入图像描述](../Images/6000d3cdc2c8a54e9eca317653991548.png)

```
 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight;
} 
```

如果您使用情节提要，您还可以将初始视图控制器和其他视图控制器设置为横向模式：

![在此处输入图像描述](../Images/40f40e6a86454fbb021ca9526e1d5b11.png)

对于 IOS 6：

你 `(NSInteger)supportedInterfaceOrientations`应该是`(NSUInteger)`，我不确定虽然我从不使用它。

```
// Only used by iOS 6 and newer.
- (BOOL)shouldAutorotate
{
    //returns true if want to allow orientation change
    return TRUE;

}
- (NSUInteger)supportedInterfaceOrientations
{   
     //decide number of origination to supported by Viewcontroller.
     return return UIInterfaceOrientationMaskLandscape;

} 
```

# sql-server - 循环在 SQL 存储过程中不起作用

> ID：14775764
> 
> 赞同：0
> 
> 时间：2013-02-08T15:22:27.590
> 
> 标签：sql-server, tsql, stored-procedures

我有一个包含多个问卷的数据库，每个问卷都有相关的（多项选择）问题，每个问题都有相关的答案。

我正在尝试创建一个存储过程，该过程将删除所有问题和相关答案，仅包含调查问卷的 ID。我的存储过程如下所示：

```
ALTER PROCEDURE [dbo].[DeleteQuestionnnaire] 

    @EnqueteID bigint
AS

BEGIN
    SET NOCOUNT ON

    DECLARE @QID bigint

    DECLARE questionCursor CURSOR FOR
        SELECT ID FROM questions WHERE EnqueteID = @EnqueteID

    OPEN questionCursor;

    FETCH questionCursor INTO @QID  

    WHILE(@@fetch_status=0)
    BEGIN

    -- this is not working correct, the related answers are NOT being deleted

        FETCH questionCursor INTO @QID
        DELETE FROM answers WHERE QuestionID=@QID

    END

    CLOSE questionCursor

        --  this works fine, the questions are being deleted
    DELETE FROM questions WHERE EnqueteID=@EnqueteID

END 
```

相关问题正在被删除，但相关答案没有，所以我在循环中做错了什么，有没有人看到它是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:57:01.397

您的光标有点奇怪，因为`FETCH NEXT`它通常是循环中的最后一条语句（请参阅[文档](http://msdn.microsoft.com/en-us/library/ms180152.aspx)中的示例），因此实际上您获取的第一个值会立即被第二个替换。将一些`PRINT`语句添加到游标中以检查 的当前值`@QID`将显示这一点。

但真正的答案是根本不使用游标，这里没有必要：

```
delete from dbo.answers where questionid in (
    select questionid from dbo.questions where EnqueteID = @EnqueteID
)
delete from dbo.questions where EnqueteID = @EnqueteID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:42:18.490

整体光标看起来不错。我会将 fetch 语句（在循环内）移动到结束前的右下角。当前，您正在将第一个值提取到参数中，然后在进入循环后立即获取第二个值；有效地扔掉第一个值，而从不使用它。

```
WHILE(@@fetch_status=0)
BEGIN

    --SELECT @QID and Answers to see if you're getting the right values
    SELECT @QID
    SELECT * FROM Answers WHERE QuestionID = @QID
    -- DELETE FROM answers WHERE QuestionID=@QID

    --Fetch should be right before the loop ends
    FETCH questionCursor INTO @QID   
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:58:08.587

您正在获取第一个然后是第二个，因此第一个不会被删除

```
FETCH questionCursor INTO @QID  

WHILE(@@fetch_status=0)
BEGIN

    DELETE FROM answers WHERE QuestionID=@QID
    FETCH questionCursor INTO @QID

END 
```

或者

```
delete answers 
where QuestionID in (select SELECT ID FROM questions WHERE EnqueteID = @EnqueteID);
go
delete questions WHERE EnqueteID = @EnqueteID; 
```

# python - 带前缀的 argparse 位置参数

> ID：14775765
> 
> 赞同：3
> 
> 时间：2013-02-08T15:22:30.320
> 
> 标签：python, python-3.x, argparse

我的 python3 脚本适用于命令行上指定的输入和输出文件。用法应该是这样的

```
xxxx.py [-h] --input=file --output=file 
```

在我正在使用的代码中

```
parser.add_argument("input", help='Input file');
parser.add_argument("output", help='Output file'); 
```

但参数没有必要的前缀。有没有办法为每个参数指定前缀？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:24:38.597

只需包括双破折号：

```
parser.add_argument("--input", help='Input file');
parser.add_argument("--output", help='Output file'); 
```

参数要么是位置的，要么是可选的；以 开头的参数`--`始终是*可选*的。你不能创建带有`--`前缀的位置参数，你真的不应该。`--`前缀是您真的不想破坏的用户界面约定。

# c# - 接口继承分解上帝对象？

> ID：14775767
> 
> 赞同：7
> 
> 时间：2013-02-08T15:22:33.570
> 
> 标签：c#, unit-testing, interface, refactoring, god-object

我在一个相当大的产品上工作。它一直在开发中，因为 .Net 1.0 仍在进行中，所以它有很多质量差的代码，并且没有考虑到单元测试。现在我们正在努力提高质量并为每个功能和错误修复实施测试。我们现在遇到的最大问题之一是依赖地狱和上帝对象。有一个特别糟糕的上帝对象：`Session`。基本上，与程序当前会话相关的任何内容都在此对象中。还有一些其他的神物。

无论如何，我们通过使用 Resharper 从中提取接口，使这个上帝对象“可模拟”。然而，这仍然使测试变得困难，因为大多数时候您必须查看您编写的代码，以从 100 种不同的方法和属性中找出真正需要模拟的内容。

现在仅仅拆分这个类是不可能的，因为实际上有成百上千个对这个类的引用。

因为我有一个接口（并且几乎所有代码都被重构为使用该接口），所以我有了一个有趣的想法。如果我让`ISession`接口继承自其他接口怎么办。

例如，如果我们有这样的事情：

```
interface IBar
{
  string Baz{get;set;}
}

interface IFoo
{
  string Biz{get;set;}
}

interface ISession: IFoo, IBar
{
} 
```

这样，使用 ISession 的现有代码不必更新，实际实现也不必更新。但是，在我们编写和重构的新代码中，我们可以使用更精细的 IFoo 或 IBar 接口，但传入一个 ISession。

最终，我认为这可能更容易最终分解实际的 ISession 和 Session 上帝接口/对象

现在给你。这是测试这些上帝对象并最终分解它们的好方法吗？这是记录在案的方法和/或设计模式吗？你做过这样的事吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T15:26:19.627

从我的角度来看，这是一种很好且正确的方法。稍后您可以将更具体的服务实例注入为`IFoo`/`IBar`而不是`ISession`，我会说这是一个很好的中间步骤，然后进一步重构以将类从上帝类提取到许多特定服务。

我看到的一些优点：

**第一阶段：**提取接口

*   一个超（神）类类型被接口抽象出来
*   由于依赖于单一功能的负责接口（服务），因此代码的耦合度降低了
*   您有进一步的基础，将一个神类拆分为许多服务，而无需大规模重构，因为一切都已经依赖于接口 API

**第二阶段**：将一个神类拆分为多个小服务，同时牢记单一[职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)

**第三阶段**：将现有的单元测试结构化，使测试按服务类型分组，而不是围绕一个上帝类一起进行

# r - ggplot2/colorbrewer 定性调色板，125 个类别

> ID：14775770
> 
> 赞同：6
> 
> 时间：2013-02-08T15:22:43.900
> 
> 标签：r, ggplot2, colorbrewer

我的数据如下：

*   10 个州
*   每个状态有两种类型
*   每种类型都有 1 到 29 个实体
*   每个状态实体类型都有一个计数

完整的数据[可作为要点](https://gist.github.com/gsk3/4739612)。

我试图想象每个实体的计数比例。为此，我使用了以下代码：

```
icc <- transform( icc, state=factor(state), entity=factor(entity), type=factor(type) )
p <- ggplot( icc, aes( x=state, y=count, fill=entity ) ) +
  geom_bar( stat="identity", position="stack" ) +
  facet_grid( type ~ . )
custom_theme <- theme_update(legend.position="none")
p 
```

![阴谋](../Images/771e4058c6306d10ebebb97cb953dcd0.png)

不幸的是，我丢失了很多信息，因为具有大量实体的状态类型没有显示足够的独特颜色。

如上所述，我有 125 个实体，但状态类型中的大多数实体是 29。有没有办法强制 ggplot2 和 colorbrewer 在每个实体类型中分配一个唯一（并且希望相当不同）的颜色？

到目前为止，我想出的唯一方法是强制`entity`转换为整数，这种方法有效，但不能在级别之间提供太多颜色差异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T20:02:59.283

这是一种可以为您提供更多信息的方法。取由 生成的色轮`rainbow`，对于其他所有颜色，将其与色轮上的另一色交换。

```
col <- rainbow(30)
col.index <- ifelse(seq(col) %% 2, 
                    seq(col), 
                    (seq(ceiling(length(col)/2), length.out=length(col)) %% length(col)) + 1)
mixed <- col[col.index]

p <- ggplot(icc, aes(x=state, y=count, fill=entity)) +
  geom_bar(stat="identity", position="stack") +
  facet_grid( type ~ . ) + 
  scale_fill_manual(values=rep(mixed, length.out=nrow(icc)))

custom_theme <- theme_update(legend.position='none')
p 
```

![在此处输入图像描述](../Images/2c5075bba6313557fd8600806a4a01a0.png)

# iphone - 从 Safari 在 iOS6 中显示本机推文对话

> ID：14775771
> 
> 赞同：2
> 
> 时间：2013-02-08T15:22:44.780
> 
> 标签：iphone, ios, ipad, twitter

我正在开发一个专门针对 iPad 的网络应用程序，客户要求在页面底部添加一个推文按钮。是否可以使用特殊格式的链接调出 iOS6 推文对话框，例如，当您尝试通过 Twitter 分享 URL 时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:42:58.267

我担心不可能从网络应用程序中带来 iOS 自定义推文弹出窗口。

`twitter://`但是您应该能够使用 twitter URI 方案（或其他方案，如）将 Twitter 应用程序（或其他第三方 Twitter 应用程序）放在前面`twitterrific://`。[您可以在此 wiki 页面](http://wiki.akosma.com/IPhone_URL_Schemes#Twitter)
上找到更多信息。

在您的特定情况下，您可能对这种 URI 感兴趣：

```
twitter://post?message=hello%20world 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:52:59.433

根据[Apple](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007899)的说法，iOS 6 的 nTwitter 功能没有原生 URL 方案。您需要使用[Twitter 框架](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html)，这只能在应用程序中完成。

但是，您可以使用具有自定义 URL 方案的应用程序（例如 Twitterrific 等）。显然您不会知道用户安装了哪些应用程序，因此您可以通过实现以下代码来检查是否支持 URL 方案：

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"twitterrific://"]]) 
{
// Twitterrific app is installed
} 
```

您可以为多个 Twitter 应用程序执行此操作，然后为用户实现一个对话以选择打开哪个应用程序（如果您选择这样做）。

# html - 自动收缩 HTML 内容

> ID：14775773
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:22:51.427
> 
> 标签：html, css

是否有一种简单的方法或现有的库，如果它溢出它的父级，它会缩小 div 的内容？我正在设想类似 Powerpoint / Keynote 的东西，当内容变大时，主框中的文本会自动缩小大小（因此不仅仅是重新格式化，而且字体和图片会变小以适应 div）。

我觉得这应该很简单，使用 CSS 'scale'，但我很惊讶我找不到其他人做过，所以我想知道是否有我没有想到的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:37:29.923

[像这样的东西](http://jsfiddle.net/X4pMT/)？我设置了一个快速测试来计算子框与父框的比率并设置适当的比例以使宽度匹配：

```
var one = $('.one');
var two = $('.two');

if (two.width() > one.width()) {
    two.css({
        'transform': 'scale(' + one.width() / two.width() + ')',
        'transform-origin': '0 0'
    });
} 
```

# jsf - p:commandLink 不触发动作

> ID：14775775
> 
> 赞同：1
> 
> 时间：2013-02-08T15:22:59.413
> 
> 标签：jsf, primefaces

`p:commandLink`带有 id 的 s`cl1`并且`cl2`不触发动作。Tomcat 控制台上没有任何内容，Firebug 控制台上没有任何内容。

在这种情况下我应该在哪里寻找问题，我认为我在两个控制台中都非常绝望，没有任何错误或异常。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:c="http://java.sun.com/jsp/jstl/core"
        xmlns:o="http://openfaces.org/"
        xmlns:p="http://primefaces.org/ui">
    <h:form>
        <ui:repeat var="sharing" value="#{sharingController.myList}">
            <ui:repeat var="sharingComment" value="#{sharing.subCommentList}">
                <p:commandLink id="cl1" value="" process="@this"  action="#{reportController.reportSharingComment(sharingComment)}" style="float:right;" id="sharingComment_alert" styleClass="icon_alert" title="#{msg['label.report']}" update=":messages" >
                </p:commandLink>
                 <p:commandLink value="" id="cl2" process="@this" action="#{sharingController.deleteComment(sharingComment)}" style="float:right;" id="sharingComment_delete" styleClass="icon_delete" title="#{msg['label.delete']}" update="@form :messages">
                </p:commandLink>
            </ui:repeat>
        </ui:repeat>
    </h:form>
</ui:composition> 
```

我尝试使用嵌套`ui:repeat`在 post 构造中的具体列表，然后触发了 commandlinks，但我必须遍历字段列表，如`myList`. 我正在加载两者`myList`，并且对于每次共享，我都将其加载到`subCommentlist`for in post 构造中，但我仍然无法使`commandLink`s 着火。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:25:57.370

[h:commandLink / h:commandButton 没有被调用](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

4.点解决：将bean放在视图范围和/或确保将数据模型加载到bean的（后）构造函数中（因此不在getter方法中！）应该修复它。

# filepicker.io - 是否可以下载通过文件选择器上传的文件？

> ID：14775780
> 
> 赞同：0
> 
> 时间：2013-02-08T15:23:13.157
> 
> 标签：filepicker.io

是否可以在夹头中下载我通过文件选择器上传的文件？我在一个不允许我以编程方式下载超过一定大小的文件（httprequest）的平台上工作，所以我需要在卡盘中检索文件并重新组装它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:18:11.760

不，我们目前不提供此功能。

# javascript - Firefox 无法使用 TypeScript 生成类的实例

> ID：14775782
> 
> 赞同：2
> 
> 时间：2013-02-08T15:23:25.433
> 
> 标签：javascript, firefox, typescript

我有一个简单的类来包装一个网格控件，我将它放在一个名为 Components 的模块中，当我在 Firefox 14.0.1 中测试它时，我得到：

TypeError: Components.Grid 不是构造函数@http://...

这里是 TypeScript 生成的代码：

```
var Components;
(function (Components) {
    Components.gridDefaults = {
        datatype: "json",
        autowidth: true,
        rowNum: 30,
        rowList: [
            10, 
            20, 
            30
        ],
        viewrecords: true,
        sortorder: "asc",
        pager: "#grid-pager"
    };
    var Grid = (function () {
        function Grid(selector, options) {
            var opts = Components.gridDefaults;
            if(options !== undefined && options !== null) {
                $.extend(opts, options);
            }
            this.grid = $(selector).jqGrid(opts);
        }
        Grid.prototype.setToolbar = function (options) {
            var pager = this.grid.getGridParam().pager;
            if(pager !== undefined && pager !== null) {
                this.grid.navGrid(pager, options);
            }
            return this;
        };
        Grid.prototype.jqGrid = function () {
            return this.grid;
        };
        Grid.prototype.filter = function (criteria) {
            this.grid.setGridParam({
                page: 1,
                postData: criteria
            });
            this.reload();
        };
        Grid.prototype.reload = function () {
            this.grid.trigger("reloadGrid");
        };
        return Grid;
    })();
    Components.Grid = Grid;    
})(Components || (Components = {}));

//@ sourceMappingURL=grid-component.js.map 
```

在这里，Firefox 抱怨缺少构造函数：

```
var grid = new Components.Grid("#grid-container", {
            url: "/Home/Data",
            colNames: ['Inv No', 'Date', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
            colModel: [
                { name: 'id', index: 'id', width: 55 },
                { name: 'invdate', index: 'invdate', width: 90, jsonmap: "invdate" },
                { name: 'name', index: 'name asc, invdate', width: 100 },
                { name: 'amount', index: 'amount', width: 80, align: "right" },
                { name: 'tax', index: 'tax', width: 80, align: "right" },
                { name: 'total', index: 'total', width: 80, align: "right" },
                { name: 'note', index: 'note', width: 150, sortable: false }
            ],
            jsonReader: {
                id: "id",
                repeatitems: false
            }
        }); 
```

~~我想听听@TypeScript 团队的消息。~~

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T15:39:27.923

我不是 TypeScript 团队的成员，也从未使用过它。但这不是 TypeScript 问题，我相信。问题是您试图覆盖 Firefox 作为本机包含的内容，即`Components`.

如果你改为

```
var Comps;
(function (Components) {  // keep the local name or change to Comps, as you like
    Components.gridDefaults = {
    // ... 
})(Comps || (Comps = {}));
var grid = new Comps.Grid("#grid-container", { /* ... */ }); 
```

我认为它会更好地工作。

我认为这意味着更改您的 Typescript 模块名称。但我对此一无所知。

# java - JPA删除双向实体

> ID：14775784
> 
> 赞同：1
> 
> 时间：2013-02-08T15:23:25.937
> 
> 标签：java, jpa, one-to-many, many-to-one, cascading-deletes

我在使用 JPA 时遇到了一些问题。我是这个话题的新手，所以我的问题可能真的很愚蠢，但我希望你们中的一些人能指出我正确的方向。

我有项目和用户实体。每个用户都可以有尽可能多的项目分配给他。我创建了双向关系 `User OneToMany -> Project`， `Project ManyToOne -> User`

我的问题是，如果我想删除一个用户，我也希望删除所有项目，但此时我收到一个错误：

```
 Internal Exception: java.sql.SQLIntegrityConstraintViolationException:
    DELETE on table 'USER_DATA' caused a violation of
    foreign key constraint 'PROJECT_USERNAME' for key (Test Use1312r1).  
    The statement has been rolled back.
    Error Code: -1
    Call: DELETE FROM USER_DATA WHERE (USERNAME = ?)
    bind => [1 parameter bound] 
```

我的用户实体如下所示：

```
@Entity
@Table(name="USER_DATA", uniqueConstraints = @UniqueConstraint(columnNames = {"USERNAME", "link"}))
public class User implements Serializable {
    @Column(name="USERNAME")
    @Id
    @NotNull
    private String name;
    @Column(name="USERROLE")
    @Enumerated(EnumType.STRING)
    private UserRole role;
    private String password;
    private String link;
    // Should be unique
    private String session;
    @OneToMany(mappedBy="user", cascade=CascadeType.ALL)
    private Collection<Project> projects; 
```

我的项目实体是这样的：

```
@Entity
@Table(name="PROJECT")
@XmlRootElement
public class Project implements Serializable {

    @Id
    private int id;
    private String name;
    private String description;
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name="START_DATE")
    private Date beginDate;
    @Temporal(TemporalType.TIMESTAMP)
    @Column(name="END_DATE")
    private Date endDate;
    @ManyToOne
    @JoinColumn(name="USERNAME", nullable=false,updatable= true)
    private User user; 
```

还有我的 BL：

```
public User getUser(String userName) throws NoDataFoundException {
    EntityManager em = DbConnection.getInstance().getNewEntity();
    try {
        User user = em.find(User.class, userName);
        if (user == null) {
            throw new NoDataFoundException("User is not found in the    DB");
        }
        return user;
    } finally {
        em.close();
    }
}

public void deleteUser(String userName) throws ModelManipulationException {
    EntityManager em = DbConnection.getInstance().getNewEntity();
    try {

        User userToBeDeleted = getUser(userName);
        em.getTransaction().begin();
        userToBeDeleted = em.merge(userToBeDeleted);
        em.remove(userToBeDeleted);
        em.getTransaction().commit();
    } catch (Exception e) {
        throw new ModelManipulationException(
                "Error in deleting user data for username" + userName
                        + "with exception " +e.getMessage(),e);
    }
    finally{
        em.close();
    }
} 
```

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T03:27:46.653

合并调用后，userToBeDeleted.projects 中是否有任何项目？我怀疑没有，这会阻止任何被删除。仅当您填充双向关系的双方时，级联删除才能起作用，因此请检查当您将用户关联到项目时，您也将项目添加到用户的项目集合中。

# asp.net - 从 DefaultConnection 数据库 VB.net 2012 ASP.NET Web 窗体应用程序获取登录/登录用户名

> ID：14775787
> 
> 赞同：0
> 
> 时间：2013-02-08T15:23:37.913
> 
> 标签：asp.net, database, vb.net, visual-studio-2012

我对这个 Web 应用程序的东西有点陌生。当我在 Visual Studios 2012 中为 ASP.NET Web 窗体应用程序创建一个新项目时，它会生成几个预定义的页面/函数。我实际上想使用这些功能，因为它似乎可以节省我一些时间。

在这一点上，我注意到它有一个 Register.aspx 和 Login.aspx，它们工作得很好。**问题是**我在 Access 2007 中有一个带有一些表的数据库。我想知道是否可以执行以下操作之一以及如何：

1）保留 DefualtConnection 数据库并查询当前登录的用户名，然后使用该用户名查询我的 Access 数据库以获取基于该用户名的信息。

2) 使用 Access 数据库创建我自己的注册和登录。我想知道如何跟踪这种情况下的登录用户，并且在使用创建用户向导时也出现错误

请帮忙，我需要这些信息，以便我可以继续完成我的最终项目。教授不知道如何做到这一点，我一直在网上搜索并回答，但似乎我可能没有问正确的问题。提前致谢 ：）

*编辑

•<strong>我的意思是登录用户：图片[https://dl.dropbox.com/u/22962879/Project_4_Registro_Est/Logged%20in%20user%20Project4.png](https://dl.dropbox.com/u/22962879/Project_4_Registro_Est/Logged%20in%20user%20Project4.png)

•<strong>默认连接：

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-Project_4_Registro_Est-20130131171154;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-Project_4_Registro_Est-20130131171154.mdf"
  providerName="System.Data.SqlClient" /> 
```

•<strong>我的访问数据库

```
myConn = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\cast\Documents\test.accdb") 
```

**我的解决方案：**

事实证明，我可以通过调用 User.Identity.Name 来获取登录的用户名。所以我做了以下事情：

```
'//The following code is an example of using the Logged/signed in username to then'
'//Query other Databases based on the user name:'

    Dim myConn As System.Data.OleDb.OleDbConnection

    Dim cmd As New System.Data.OleDb.OleDbCommand

    Dim sqlstring As String

    '//Connecting to My Database:'
    myConn = New System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\cast\Documents\test.accdb")
    '//Query I wish to use to find all data based on User name:'
    sqlstring = "Select FirstName, LastName, UserType FROM users WHERE Username = '" + User.Identity.Name + "'"
    Try
        '//Start by opening the connection'
        myConn.Open()
        '//I use str for now to store the results'
        Dim str As String = ""          

        '//Set the command by adding the SQL string and Connection:'
        cmd = New OleDb.OleDbCommand(sqlstring, myConn)
        '//Create variable which contains results from Executed command:'
        Dim oledbReader As OleDb.OleDbDataReader = cmd.ExecuteReader

        '//Keep reading each row that contains the Queried Results:'
        While oledbReader.Read
            '//Store result to str. each item is a Column in the order I Queried'
            str = str + (oledbReader.Item(0) & " " & oledbReader.Item(1) & " (" & oledbReader.Item(2)).ToString() & ")" + "\n"
        End While

        '//Show results on page's Label1:'
        Label1.Text = str

        '//Close everything'
        oledbReader.Close()
        cmd.Dispose()
        myConn.Close()

    Catch ex As Exception
        '//show error message if could not connect'
        MsgBox("Can not open connection! X_X")
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:14:08.667

这应该使用 SimpleMembership。所以问`WebMatrix.WebData.WebSecurity.CurrentUserName`。也会`WebSecurity.IsAuthenticated`很好看。

# iphone - 必须使用活动访问令牌来查询有关当前用户的信息

> ID：14775800
> 
> 赞同：3
> 
> 时间：2013-02-08T15:24:18.037
> 
> 标签：iphone, ios, facebook, ios6

我正在尝试获取用户详细信息，但目前无法获取图像。这是我得到的错误：

```
{
    error =     {
        code = 2500;
        message = "An active access token must be used to query information about the current user.";
        type = OAuthException;
    };
} 
```

这是我的代码：

```
 if(!self.store)
    {
        ACAccountStore *store1 = [[ACAccountStore alloc] init];
        self.store=store1;
        [store1 release];

    }

    ACAccountType *fbAccountType =
    [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray * permissions = @[@"read_stream", @"publish_stream",@"email", @"user_birthday",@"publish_actions",@"user_photos"];
    NSDictionary * dict = @{ACFacebookAppIdKey : @"my_key", ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceOnlyMe};
    //  Request permission from the user to access the available Twitter accounts
    [store requestAccessToAccountsWithType:fbAccountType options:dict completion:^(BOOL granted, NSError *error) {
        __block NSString * statusText = nil;
        if (granted) {
            statusText = @"Logged in";
            NSArray * accounts = [store accountsWithAccountType:fbAccountType];
            store = [accounts lastObject];
            account = [accounts objectAtIndex:0];
            NSLog(@"account is: %@", account);
            NSURL *requestURL = [NSURL URLWithString:@"https://graph.facebook.com/me?fields=picture"];
            SLRequest *request = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                    requestMethod:SLRequestMethodGET
                                                              URL:requestURL
                                                       parameters:nil];
            request.account = account;
            [request performRequestWithHandler:^(NSData *data,
                                                 NSHTTPURLResponse *response,
                                                 NSError *error) {

                if(!error){
                    NSDictionary *list =[NSJSONSerialization JSONObjectWithData:data
                                                                        options:kNilOptions error:&error];
                    NSLog(@"Dictionary contains: %@", list );
                }
                else{
                    //handle error gracefully
                }

            }];
        } 
```

如果我使用[https://graph.facebook.com/me](https://graph.facebook.com/me)作为 url，那么它工作正常。但我也需要个人资料照片。该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-17T20:15:00.460

“字段”是一个参数，而不是 URL 本身的一部分。这有效：

```
SLRequest *videoLimitsRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook
                                                   requestMethod:SLRequestMethodGET
                                                             URL:[NSURL URLWithString:@"https://graph.facebook.com/me"]
                                                      parameters:@{@"fields": @"video_upload_limits"}]; 
```

仅供参考，当您将帐户附加到 SLRequest 时，会自动添加令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T06:09:48.680

你可以像这样使用 accesstoken 运行 fql

[https://graph.facebook.com/fql?q=SELECT](https://graph.facebook.com/fql?q=SELECT) name from user where uid = YourFacebookID&access_token=ACCESSTOKEN

这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T09:04:19.070

这有点旧，但我忘了回答。从 FB api 3.2 开始，一切都在 api 中进行管理，用于 bot iOS 5 和 6 本机登录。这是我所做的：

```
FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];
FBRequest *request = [FBRequest requestWithGraphPath:@"me/albums" parameters:nil HTTPMethod:@"GET"];

FBRequestHandler handler =
^(FBRequestConnection *connection, id result, NSError *error)
{

    if(!error)
    {
        NSDictionary *list =(NSDictionary*)result;

        int flag = 0;
        for (int index = 0; index < [[list objectForKey:@"data"] count];index++)
        {
            if ([[[[list objectForKey:@"data"] objectAtIndex:index] objectForKey:@"name"] isEqualToString:@"Profile Pictures"])
            {
                [self fetchAlbumImages:[[[list objectForKey:@"data"] objectAtIndex:index] objectForKey:@"id"]];
                flag = 1;
            }

        }
        if (flag == 0)
        {
            [self fetchAlbumImages:@"No Album"];
        }
    }
    else
    {

    }
};

[newConnection addRequest:request completionHandler:handler];
//[self.requestConnection cancel];

[newConnection start];
[newConnection release];
}

- (void) fetchAlbumImages:(NSString*)albumId
{
    if ([albumId isEqualToString:@"No Album"])
    {
        NSMutableArray *albumArray = [[NSMutableArray alloc]init];
        [self performSelectorOnMainThread:@selector(sendRegistrationRequest:) withObject:albumArray waitUntilDone:YES];
        [albumArray release];
    }
    else
    {
        FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];
        FBRequest *request = [FBRequest requestWithGraphPath:[NSString stringWithFormat:@"%@/photos",albumId] parameters:nil HTTPMethod:@"GET"];

        FBRequestHandler handler =
        ^(FBRequestConnection *connection, id result, NSError *error)
        {

            if(!error)
            {

                NSDictionary *list =(NSDictionary*)result;

                NSMutableArray *albumArray = [[NSMutableArray alloc]init];
                for (int index = 0; index < ([[list objectForKey:@"data"] count]<10?[[list objectForKey:@"data"] count]:10);index++)
                {
                    [albumArray addObject:[[[list objectForKey:@"data"] objectAtIndex:index] objectForKey:@"source"]];
                }

                [self performSelectorOnMainThread:@selector(sendRegistrationRequest:) withObject:albumArray waitUntilDone:YES];
            }
            else
            {

            }
        };

        [newConnection addRequest:request completionHandler:handler];
        //[self.requestConnection cancel];

        self.requestConnection = newConnection;
        [newConnection start];
        [newConnection release];
    }
} 
```

# javascript - web 和 javascript 项目的声纳中的空指标

> ID：14775802
> 
> 赞同：8
> 
> 时间：2013-02-08T15:24:28.263
> 
> 标签：javascript, jsp, maven, web, sonarqube

## 初始职位

我为我的持续集成使用了几种工具：

*   Maven 3.0.4
*   声纳 3.3
*   声纳网络插件 1.2
*   声纳 Javascript 插件 1.1
*   詹金斯 1.486

Java 项目和 XML 项目一切正常。

我在使用 Javascript 和 Web 项目时遇到问题。项目是在 Sonar 中创建的，但它们是空的。

这是一个 javascript 项目的堆栈跟踪示例

> [信息] --- sonar-maven-plugin:2.0-beta-2:sonar (default-cli) @ MyProject ---
> 
> [INFO] 声纳版本：3.3
> 
> [INFO] [15:59:24.937] 为 jdbc 创建 JDBC 数据源：mysql://sonar-02:3306/sonar
> 
> [信息] [15:59:41.190] 初始化休眠
> 
> [INFO] [15:59:43.318] ------------- 分析 MyProject JS
> 
> [信息] [15:59:43.573] 质量配置文件：[name=myProfileJavascript,language=js]
> 
> [INFO] [15:59:43.612] 配置 Maven 插件...
> 
> [INFO] [15:59:43.653] 与之前的分析比较 (2013-02-08)
> 
> [INFO] [15:59:43.672] 比较超过 5 天（2013-02-03，分析 2013-02-07 12:29:08.0）
> 
> [INFO] [15:59:43.682] 比较超过 30 天（2013-01-09，2013-02-07 12:29:08.0 分析）
> 
> [信息] [15:59:43.877] 初始化程序 ProjectFileSystemLogger...
> 
> [INFO] [15:59:43.878] 排除的测试：[**/package-info.java]
> 
> [信息] [15:59:43.881] 源目录：
> 
> [信息] [15:59:43.881]
> C:\Work\Workspaces\Intellij\MyProject\src\main\java
> 
> [信息] [15:59:43.881] 测试目录：
> 
> [信息] [15:59:43.882]
> C:\Work\Workspaces\Intellij\MyProject\src\test\java
> 
> [INFO] [15:59:43.882] 初始化程序 ProjectFileSystemLogger 完成：5 毫秒
> 
> [信息] [15:59:43.882] 初始化程序 MavenInitializer ...
> 
> [信息] [15:59:43.884] Java 源版本：1.6
> 
> [信息] [15:59:43.884] Java 目标版本：1.6
> 
> [INFO] [15:59:43.884] 初始化程序 MavenInitializer 完成：2 毫秒
> 
> [信息] [15:59:44.183] 传感器 JavaScriptSourceImporter...
> 
> [信息] [15:59:44.335] 传感器 JavaScriptSourceImporter 完成：152 毫秒
> 
> [信息] [15:59:44.335] 传感器 JavaScriptSquidSensor...
> 
> [信息] [15:59:44.520] 传感器 JavaScriptSquidSensor 完成：185 毫秒
> 
> [信息] [15:59:44.520] 传感器 JsTestDriverSurefireSensor ...
> 
> [信息] [15:59:44.526] 传感器 JsTestDriverSurefireSensor 完成：6 毫秒
> 
> [信息] [15:59:44.526] 传感器 JsTestDriverCoverageSensor ...
> 
> [信息] [15:59:44.584] 传感器 JsTestDriverCoverageSensor 完成：58 毫秒
> 
> [信息] [15:59:44.584] 传感器 CpdSensor...
> 
> [信息] [15:59:44.585] 使用 SonarBridgeEngine
> 
> [信息] [15:59:44.642] 传感器 CpdSensor 完成：58 毫秒
> 
> [信息] [15:59:44.642] 传感器配置文件传感器...
> 
> [INFO] [15:59:44.725] Sensor ProfileSensor done: 83 ms
> 
> [信息] [15:59:44.725] 传感器配置文件事件传感器...
> 
> [INFO] [15:59:44.752] Sensor ProfileEventsSensor done: 27 ms
> 
> [信息] [15:59:44.753] 传感器项目链接传感器...
> 
> [信息] [15:59:44.791] 传感器 ProjectLinksSensor 完成：38 毫秒
> 
> [信息] [15:59:44.791] 传感器版本事件传感器...
> 
> [信息] [15:59:44.820] 传感器版本事件传感器完成：29 毫秒
> 
> [信息] [15:59:44.820] 传感器 Maven 依赖项...
> 
> [INFO] [15:59:48.148] 传感器 Maven 依赖完成：3328 毫秒
> 
> [INFO] [15:59:48.517] 执行装饰器...
> 
> [INFO] [15:59:48.856] 分析成功，您可以浏览 `http://sonarServer:9000`
> 
> [INFO] [15:59:48.857] 执行 post-job 类 org.sonar.plugins.core.batch.IndexProjectPostJob
> 
> [INFO] [15:59:49.140] 执行 post-job 类 org.sonar.plugins.dbcleaner.ProjectPurgePostJob
> 
> [INFO] [15:59:49.154] -> 在 2013-01-11 和 2013-02-07 之间每天保留一张快照
> 
> [INFO] [15:59:49.156] -> 在 2012-12-14 和 2013-01-11 之间每周保留一个快照
> 
> [INFO] [15:59:49.157] -> 在 2011-04-08 和 2012-12-14 之间每月保留一个快照
> 
> [INFO] [15:59:49.157] -> 删除之前的数据：2011-04-08
> 
> [信息] [15:59:49.163] -> 清理 MyProject JS [id=57524]
> 
> [信息] [15:59:49.167] <- 清理快照 1690793

我可以看到声纳正在使用 C:\Work\Workspaces\Intellij\MyProject\src\main\java

在我的 pom 中，我测试了几个没有改变声纳行为的属性。

```
 <sonar.javascript.sources>src/main/webapp</sonar.javascript.sources>
 <sonar.sources>src/main/webapp</sonar.sources>
 <sources>src/main/webapp</sources> 
```

Web 项目也存在同样的问题。

任何的想法 ？

先感谢您。

## 编辑 2013 年 11 月 2 日-Fabrice 之后-声纳团队评论

我用以下信息创建了一个新的 pom (pom-web.xml)

```
<properties>
    <sonar.branch>JS</sonar.branch>
    <sonar.language>web</sonar.language>
</properties>
<build>
    <sourceDirectory>src/main/webapp</sourceDirectory>
</build> 
```

似乎源目录已更改，但指标仍为空。

> [信息] [12:11:54.486] 执行 org.apache.maven.plugins:maven-surefire-plugin:2.9:test done: 545 ms
> 
> [信息] [12:11:54.486] 执行 maven 插件 maven-surefire-plugin 完成：545 毫秒
> 
> [信息] [12:11:54.486] 初始化程序 JacocoMavenInitializer...
> 
> [信息] [12:11:54.486] 初始化程序 JacocoMavenInitializer 完成：0 毫秒
> 
> [信息] [12:11:54.486] 初始化程序 ProjectFileSystemLogger...
> 
> [INFO] [12:11:54.487] 排除的测试：[**/package-info.java]
> 
> [信息] [12:11:54.487] 源目录：
> 
> [信息] [12:11:54.487]
> C:\Work\Workspaces\Intellij\MyProject\src\main\webapp

与 web 和 JS 的行为相同。

## 编辑 11/02/2013：找到解决方案

我需要一个 pom 文件。所以我通过配置文件管理声纳属性。由于不能在配置文件中重新定义“sourceDirectory”，我使用自定义属性。

属性“sonar.branch”使我能够为我的项目创建多个声纳条目。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>fr.test</groupId>
<artifactId>MyMultiLanguageProject</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<properties>
    <ci.build.sourceDirectory>src/main/java</ci.build.sourceDirectory>
    <ci.build.testSourceDirectory>src/test/java</ci.build.testSourceDirectory>
</properties>

<build>
    <sourceDirectory>${ci.build.sourceDirectory}</sourceDirectory>
    <testSourceDirectory>${ci.build.testSourceDirectory}</testSourceDirectory>
</build>

<profiles>
    <profile>
        <id>CI-WEB</id>
        <properties>
            <sonar.branch>WEB</sonar.branch>
            <sonar.language>web</sonar.language>
            <sonar.sources>src</sonar.sources>
            <ci.build.sourceDirectory>src/main/webapp</ci.build.sourceDirectory>
            <ci.build.testSourceDirectory>src/test/webapp</ci.build.testSourceDirectory>
        </properties>
    </profile>
    <profile>
        <id>CI-JS</id>
        <properties>
            <sonar.branch>JS</sonar.branch>
            <sonar.language>js</sonar.language>
            <sonar.sources>src</sonar.sources>
            <ci.build.sourceDirectory>src/main/webapp</ci.build.sourceDirectory>
            <ci.build.testSourceDirectory>src/test/webapp</ci.build.testSourceDirectory>
        </properties>
    </profile>
</profiles> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T15:40:59.447

如果您想分析 JS 和 Web 项目，您目前必须创建其他 POM（或 POM 中的配置文件）。在那些新的 POM（或配置文件）中，您将“sourceDirectory”标签设置为正确的文件夹，并且您不会忘记在属性中指定“sonar.language”。此外，这些新的 POM/配置文件应该更改 artifactId，以便您在 Sonar 中拥有不同的项目。

然后您可以运行“mvn clean sonar:sonar -f pom-javascript.xml”（新 POM）或“mvn clean sonar:sonar -Pjavascript”（使用配置文件）。

在不久的将来，Sonar 将原生支持多语言项目。在那之前，你必须使用这个技巧。

# android - Monodroid - ImageView -> SetImageURI 崩溃应用程序

> ID：14775813
> 
> 赞同：0
> 
> 时间：2013-02-08T15:24:49.220
> 
> 标签：android, mono, crash, imageview

我在显示从相机拍摄的照片时遇到问题。我按以下方式进行：

1.  调用相机活动 -> 保存图片 -> 将图片位置保存为字符串。
2.  创建一个新的 Intent -> 使用图片位置设置额外的字符串。
3.  调用活动并检索字符串。
4.  在包含文件位置的字符串上使用 Parse 切换回 URI。
5.  在 ImageView 上调用 SetImageURI。<- 这崩溃了。

我得到“应用程序不得不意外关闭”的事情..

调试起来不太方便。

活动代码如下：

```
 [Activity (Label = "ViewPhoto")]            
public class ViewPhoto : Activity
{
    ImageView image;
    protected override void OnResume ()
    {
        string PhotoLocation = Intent.GetStringExtra ("PicLoc");
        Android.Net.Uri _img = Android.Net.Uri.Parse (PhotoLocation);
        image.SetImageURI (_img);
    }

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);
        SetContentView(Resource.Layout.PhotoViewer);
        image = FindViewById<ImageView> (Resource.Id.exCurrentPhoto);
    }
} 
```

我检查了图片重量..它是 9kb（它可能是通过我使用的 android 模拟器生成的简单图片）.. 所以我怀疑这是内存问题

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:32:51.623

我恨自己没有注意到我忘记调用 base.OnResume() 函数...没有异常被抛出我没有意识到直到我随机不得不通过 Android LogCat x)

问题解决了=D

# javascript - 如果变量的值为空，如何打印“”？

> ID：14775818
> 
> 赞同：1
> 
> 时间：2013-02-08T15:24:58.257
> 
> 标签：javascript, jtemplates

我正在渲染一些 HTML，在其中我用 javascript 注入文本框的值。请参阅：{$T.blob.title}

```
<input type="text" maxlength="40" size="16" id='imgtitle_{$T.blob.Id}' value='{$T.blob.title}' class="imagetitleinput" /><br /> 
```

但是，此字符串可能为 null，因此文本框`"null"`会向访问者显示该值。如何检查（最好是内联）的值是否`{$T.blob.title}`为`null`，如果是，则将此文本框的值设置为`""`？

我正在使用这个模板引擎：http: [//jtemplates.tpython.com/](http://jtemplates.tpython.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:29:55.257

您需要在 $T.blob.title 变量接近进入 DOM 之前执行此逻辑。不要开始在元素内执行内联 JS - 这不是一个好习惯！

我假设您正在进一步构建一个对象文字？如果是这样，请检查 $.blob.title 的值，如果它等于 null，则将该值设置为空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:32:11.337

这应该有效[使用 Jquery]

```
$(document).ready(function () {
    $(".imagetitleinput").each(function () {
        if($.trim($(this).val()) == '') {
            $(this).val('NULL');
        }
    });
}) 
```

虽然不确定你是否想在这里使用 Jquery。

# java - Hibernate 传递复合外键依赖与嵌入实体

> ID：14775820
> 
> 赞同：1
> 
> 时间：2013-02-08T15:25:14.010
> 
> 标签：java, hibernate

我想将现有数据库（我们现在无法更改）映射到 Hibernate 实体。但是我的映射似乎有一个我无法克服的传递映射复合键的问题。

FluidSampleLabel 将 FluidSample 作为外键并作为其自己的复合主键的一部分。Hibernate 似乎忽略了 FluidSampleLabel 中嵌入外键实体 FluidSample 映射的列/嵌入 id。

Github 上的测试项目： [https ://github.com/burka/hibernate-transitive-compkey-problem.git](https://github.com/burka/hibernate-transitive-compkey-problem.git)

```
org.hibernate.AnnotationException: A Foreign key refering compkey_problem.model.FluidSample from compkey_problem.model.FluidSampleLabel has the wrong number of column. should be 1 
```

如果嵌入式 fks 上没有`@ManyToOne`带注释的命名列，我会收到以下错误：

```
Caused by: org.hibernate.MappingException: Foreign key (FK246FD874D0837E3B:fluid_sample_label [sample])) must have same number of columns as the referenced primary key (fluid_sample [sampleGroup,pre_post]) 
```

```
create sequence sample_group_seq start 10000;

create table sample_group (
sample_group_id int primary key,
payload varchar(200)
);

create table fluid_sample (
sample_group_id int not null,
pre_post varchar(20) not null check ( pre_post in ( 'PRE', 'POST') ),
amount number(20,10) not null,
primary key ( sample_group_id, pre_post ),
constraint fk_fluid_sample_group foreign key ( sample_group_id ) references sample_group ( sample_group_id )
);

create table fluid_sample_label (
sample_group_id int,
pre_post varchar(20) not null check ( pre_post in ( 'PRE', 'POST') ),
label varchar(200) not null,
primary key ( sample_group_id, pre_post, label ),
constraint fk_fluid_label_fluid foreign key ( sample_group_id, pre_post ) references fluid_sample ( sample_group_id, pre_post )
); 
```

```
@Entity
@SequenceGenerator(name = "sampleGroupSequence", sequenceName = "sample_group_seq", allocationSize = 1)
@Table(name = "sample_group")
public class SampleGroup
{
    @Id
    @GeneratedValue(generator = "sampleGroupSequence", strategy = GenerationType.SEQUENCE)
    @Column(name = "sample_group_id")
    private Integer sampleGroupId;

    @OneToMany(mappedBy = "sampleGroup")
    private List<FluidSample> fluidSamples = new ArrayList<>();

    @Column(name = "payload")
    private String payload;

    public SampleGroup()
    {
    }

    public FluidSample addNewPreFluidSample()
    {
        FluidSample sample = new FluidSample(this, PrePost.PRE);
        this.fluidSamples.add(sample);
        return sample;
    }
}

@Entity
@Table(name = "fluid_sample")
public class FluidSample
{
    @Id
            @ManyToOne
            @JoinColumn(name = "sample_group_id")
    private SampleGroup sampleGroup;

    @Id
    @Column(name = "pre_post")
    @Enumerated(EnumType.STRING)
    private PrePost prePost;

    @OneToMany(mappedBy = "sample")
    private List<FluidSampleLabel> labels = new ArrayList<>();

    @Column(name = "amount")
    private BigDecimal amount;

    @SuppressWarnings("unused")
    private FluidSample()
    {
    }

    public FluidSample(SampleGroup sampleGroup, PrePost prePost)
    {
        this.sampleGroup = sampleGroup;
        this.prePost = prePost;
    }

    public FluidSampleLabel addNewLabel(String value)
    {
        FluidSampleLabel label = new FluidSampleLabel(this, value);
        this.labels.add(label);
        return label;
    }
}

@Entity
@Table(name = "fluid_sample_label")
public class FluidSampleLabel
{
    @Id
            @ManyToOne
            @JoinColumns({ @JoinColumn(name = "sample_group_id"), @JoinColumn(name = "pre_post")})
    private FluidSample sample;

    @Id
    private String value;

    @SuppressWarnings("unused")
    private FluidSampleLabel()
    {
    }

    FluidSampleLabel(FluidSample sample, String value)
    {
        this.sample = sample;
        this.value = value;
    }

    public String getValue()
    {
        return this.value;
    }
}

public enum PrePost
{
    PRE, POST;
} 
```

# tfs - 如何在本地评估 Team Foundation Server？

> ID：14775826
> 
> 赞同：1
> 
> 时间：2013-02-08T15:25:28.740
> 
> 标签：tfs

我的任务是评估 TFS 2010 是否可能在我的小组中使用，但目前无法访问服务器。有没有办法在本地运行它（Win XP）只是为了让它通过它的步伐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:21:19.170

最好下载 Brain Keller 的 VM for TFS 2012，您将能够通过动手实验看到大部分 TFS 功能。

[Visual Studio 2012 应用程序生命周期管理虚拟机和动手实验室/演示脚本](http://blogs.msdn.com/b/briankel/archive/2011/09/16/visual-studio-11-application-lifecycle-management-virtual-machine-and-hands-on-labs-demo-scripts.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T19:41:02.203

TFS2010需要windows 2003、2008、vista或7，不能直接安装在windows xp上。您可以将其安装到运行这些操作系统之一的虚拟机中，这需要相当多的内存。

但是我感觉您可能并不真正具备运行 TFS 的硬件要求，并且您可能并不想维护 TFS 服务器。您可能应该考虑改用 TFService (tfs.visualstudio.com)，它是 TFS2012 的在线版本，最多可免费供 5 位用户使用（但是，在预览版中，大型团体也可以免费使用）。您可以安装补丁，以便 VS2010 可以访问此服务。

# opencv - 如何处理多通道矩阵

> ID：14775827
> 
> 赞同：0
> 
> 时间：2013-02-08T15:25:29.530
> 
> 标签：opencv

我有一个 500x500 Mat 对象（图像的绿色平面）。我创建了一个 500x500x3（其中 3 是通道数）零 Mat 对象。是否有一个 openCV 2.4.3 函数可以在新的“零”Mat 对象的第二个通道中复制绿色平面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:44:24.413

```
void mixChannels(const vector<Mat>& srcv, vector<Mat>& dstv, const int* fromTo, int npairs) 
```

有关此功能的更多信息，请访问： http: [//opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#mixChannels](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#mixChannels)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:23:33.420

过程1：

```
int from_to[] = {0,1}
mixChannels(Green_plane,1,Created_mat,3,from_to,1); 
```

[以上的解释](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#mixchannels)

过程 2（冗长..）

```
Mat Green_plane;//you already have this matrix as the green plane of an image

//create a 3 channeled matrix with all entries set to zero
Mat Created_mat = Mat::zeros(rows,cols,CV_8UC3);

//its a vector array of images that will contain the 3 planes of the above 3 channeled   matrix
vector<Mat> bgr_plane;

// divide the 3 channeled matrix into 3 one channeled matrix
split(Created_mat,bgr_plane);

// take the green plane, which is the middle matrix out of the 3 matrices contained in the vector array bgr_planes, and copy your already given green matrix to it
bgr_plane[1] = Green_plane.clone();

//merge the vector of one channeled matrices into a 3 channeled matrix
merge(bgr_plane,Created_mat);//EDITED

// now Created_mat has the green channel same as given green matrix you already have (Green_plane) and the rest 2 planes are still set to zero 
```

**编辑...对于 4 通道..**

```
vector<Mat> each_channel;
split(Mat_4_channel,each_channel);

//accessing each pixel of each channel
each_channel[0].at<uchar>(row,col);//1st channel
each_channel[1].at<uchar>(row,col);//2nd channel
each_channel[2].at<uchar>(row,col);//3rd channel
each_channel[3].at<uchar>(row,col);//4th channel 
```

# ios - Facebook 在实际登录前出现“未登录”错误

> ID：14775837
> 
> 赞同：1
> 
> 时间：2013-02-08T15:26:04.680
> 
> 标签：ios, facebook

我正在使用最新的 Facebook SDK 3.1.1。
我正在调用方法 `[[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {...}`

我期待（它实际上出现在我的设备上）带有电子邮件和密码字段的典型 Web 视图登录对话框。但在另一台设备上显示错误消息：“未登录。您尚未登录。请登录并重试”。这很奇怪，因为我实际上是在要求登录。
有人遇到过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:14:15.687

这似乎是 2 月 6 日重大更改之后发生的官方 Facebook 错误。更多信息在这里：[https ://developers.facebook.com/bugs/331103197009388?browse=search_51154c83b3ffe0750572464](https://developers.facebook.com/bugs/331103197009388?browse=search_51154c83b3ffe0750572464)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-05T22:54:45.177

这可能意味着您忘记在线将平台（例如 Android 平台）添加到您的 Facebook 开发者帐户。转到设置 -> 基本 -> 添加平台。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:27:51.280

也许您受到最近 FB 中断的打击：

[http://www.pcworld.com/article/2027627/facebook-redirection-bug-is-now-fixed-but-troubling.html](http://www.pcworld.com/article/2027627/facebook-redirection-bug-is-now-fixed-but-troubling.html)

# javascript - 如何增加折线图的线宽？

> ID：14775843
> 
> 赞同：2
> 
> 时间：2013-02-08T15:26:19.150
> 
> 标签：javascript, raphael, graphael

是否有任何选项可用于增加折线图的线宽？我试图改变`stroke`，但这似乎没有任何影响。

以下是折线图的初始化方式：

```
paper.linechart(10, 30, 400, 240, [
    [5, 10, 15, 20, 25, 30, 35]
], [
    [15, 10, 20, 14, 13, 17, 9],
    [7, 13, 17, 9, 10, 20, 14],
    [5, 4, 14, 12, 20, 3, 16]
]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:41:59.493

目前，您唯一的选择是在选项中指定更高的`width`值。从[文档](http://g.raphaeljs.com/reference.html#Paper.linechart)中，在's options的`width`属性下：`Paper.lineChart`

> ( `width`) 控制绘制符号的大小。还使用公式 stroke-width=width/2 控制线条的粗细。

要仅控制行的`stroke-width`，您应该能够将空值`symbol`和所需`width`值传递给 opts，例如：

```
paper.linechart(10, 30, 400, 240, [
    [5, 10, 15, 20, 25, 30, 35]
], [
    [15, 10, 20, 14, 13, 17, 9],
    [7, 13, 17, 9, 10, 20, 14],
    [5, 4, 14, 12, 20, 3, 16]
], {
    symbol: '',
    width: 5
}); 
```

*（当然，您可以将`circle`其作为符号传递，但它的大小将从`width`值中得出）。*

# ruby-on-rails - Unicorn 在资产预编译期间触发 mongoid 错误

> ID：14775844
> 
> 赞同：11
> 
> 时间：2013-02-08T15:26:25.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, unicorn, mongoid3

我有一个在 Heroku 上运行的使用 Mongoid 3 的 rails 应用程序。我刚刚更新它以使用独角兽。当我尝试将其部署到 Heroku 时，出现以下错误：

```
Running: rake assets:precompile
rake aborted!
   undefined method `match' for nil:NilClass
   /tmp/build_3nnbzpfmnjpns/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.21/lib/mongoid/sessions/mongo_uri.rb:49:in `initialize' 
```

完整的堆栈跟踪可以在[http://pastebin.com/8YcJHEmS找到](http://pastebin.com/8YcJHEmS)

但是如果我从我的 Gemfile 中删除 Unicorn，资产编译就会成功。查看 Mongoid 代码，我可以看到在解析 mongoid.yml 文件时会发生错误，但我无法弄清楚为什么 Unicorn 会导致该错误。我的 mongoid.yml 文件如下所示：

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
      options:
        skip_version_check: true
        safe: true 
```

还有我的 Gemfile ：

```
source 'https://rubygems.org'
ruby '1.9.3'

gem 'rails', '3.2.11'
gem 'thin'

group :assets do
  gem 'sass-rails',   '~> 3.2'
  gem 'coffee-rails', '~> 3.2'
  gem 'uglifier', '>= 1.0.3'
  gem "twitter-bootstrap-rails", '>=2.1.8'
  gem "bootstrap_form"

end

gem "jquery-rails"
gem 'jquery-ui-rails', "3.0.1"

gem 'newrelic_rpm'
gem "httparty"
gem "resque"
gem "resque-loner"
gem "unicorn", "4.4.0"
gem "mongoid", "~> 3.0.0"
gem "mongo", "~> 1.7.0"
gem "bson", "~> 1.7"
gem "bson_ext", "~> 1.7"
gem 'less-rails', "~> 2.2"
gem 'therubyracer', '>= 0.11.1'
gem 'libv8', '~> 3.11.8'
gem 'devise', '~> 2.1.2'
gem 'devise_invitable', '~> 1.0.0'
gem 'bootstrap_form'
gem 'font-awesome-rails'
gem 'omniauth'
gem 'omniauth-facebook'
gem 'kaminari'
gem 'mongoid_search' 
```

你知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-22T22:17:13.417

由于我最近在使用 Rails 4.0 时遇到了这个问题，并且对 Rails 4.0`config.assets.initialize_on_precompile = false`不再有任何影响，所以我与 Heroku 支持人员进行了交谈，并被告知使用此实验室功能：

```
heroku labs:enable user-env-compile 
```

我无法回答为什么只有 Unicorn 才需要用户环境，但这似乎是某种 Unicorn 特有的问题，或者 Thin 做了一些阻止整个应用程序启动的事情。

整个事情对我来说似乎很奇怪，并且预编译资产的方式有问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T15:36:33.777

**导轨 3：**

在预编译资产时尝试关闭应用程序初始化：

```
# config/application.rb
config.assets.initialize_on_precompile = false 
```

该行应该已经被注释掉了。

# ajax - Laravel 在 Ajax 请求中使用“@layout”

> ID：14775847
> 
> 赞同：1
> 
> 时间：2013-02-08T15:26:30.560
> 
> 标签：ajax, layout, view, if-statement, laravel

嗨，stackoverflow！

在我的 laravel 视图中，我通过调用使用默认布局

```
@layout('layouts.default') 
```

到同一个控制器，我正在发送 Ajax 请求，但如果它是一个 ajax 调用，我不能将“if”放到 @layout 中。因为如果 ajax 请求向控制器发出，它也会产生页眉、页脚和内容（页眉和页脚在默认布局中）。因此，为了避免这种情况，我制作了一份没有@layout 视图的副本。

然而，编辑两个文件进行更改实在是太无聊了。我不能在我的视图中添加类似的代码吗？：

```
@if(!$ajaxrequest)
 @layout('layouts.master')
@endif 
```

我想要这个，因为我在控制器中的代码太乱了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-11T13:19:21.417

一个细微的变化是将布局的逻辑放在主布局模板中。例如

布局/app.blade.php：

```
@if (Request::ajax()) 

    @include('layouts.ajax-app')

@else

    @include('layouts.default-app')

@endif 
```

您的视图只是像往常一样扩展主要布局，例如

```
@extends('layouts.app')

@section('content')
    Content goes here...
@endsection 
```

然后创建一个默认布局文件（default-app.blade.php）和一个ajax布局文件（ajax-app.blade.php）。这样做的好处是，您的任何刀片模板都可以通过 Ajax 加载，而无需使用大量重复的逻辑来混淆控制器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T03:26:40.090

您不能`@layout`在这样的 if 语句之后进行调用（请参阅[文档](http://laravel.com/docs/views/templating#blade-layouts)中“刀片模板”下的红色通知。您必须设置`public $layout`and 调用`$this->layout->nest`而不是`View::make`（请参阅链接到的页面上的“基础知识”）以上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T18:53:55.940

您可以在视图模板中使用类似的内容：

```
@extends( 'layouts.' . (isset($layout) ? $layout : 'default')) 
```

如果将 $layout 变量设置为所需的布局，还应在控制器（或超级控制器）中检查 AJAX 请求。否则将采用“默认”布局。

# razor - 为什么我在提交表单之前看到验证消息

> ID：14775863
> 
> 赞同：1
> 
> 时间：2013-02-08T15:27:20.453
> 
> 标签：razor, asp.net-mvc-4, jquery-validate, unobtrusive-validation

我创建了一个表单，当我用它加载页面时，我会在提交表单之前看到验证消息。为什么？你可以[从 github 下载我的代码](https://github.com/ypapax/MyMustAgreeValidation)

[类似的问题。这是因为 mvc4](https://stackoverflow.com/questions/13033721/mvc4-unobtrusive-validation-starting-too-early)

```
@model MyMustAgreeValidation.Models.NewUserProfileModel
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        @Html.MyEditFor(m=>m.Login)
        @Html.MyEditFor(m=>m.Password)
        @Html.MyEditFor(m=>m.ConfirmPassword)
        @Html.MyEditFor(m=>m.DisplayName)
        @Html.MyEditFor(m=>m.Email)
        @Html.MyEditFor(m=>m.Homepage)
        @Html.MyEditFor(m=>m.AgreementAccepted)
        <p><input type="submit" value="@CreateRes.CreateProfileButton"/></p>
    </fieldset>
} 
```

`Html.MyEditFor`在哪里

```
public static MvcHtmlString MyEditFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression)
    {
        return html.Partial("Item", new LabelEditorValidation() { Label = html.LabelFor(expression), Editor = html.EditorFor(expression), Validation = html.ValidationMessageFor(expression) });
    } 
```

并且`Item`是部分观点：

```
@model MyMustAgreeValidation.Models.LabelEditorValidation
<div class="editor-label">
    @Model.Label
</div>
<div class="editor-field">
    @Model.Editor
    @Model.Validation
</div> 
```

标签编辑器验证：

```
public class LabelEditorValidation
{
    public MvcHtmlString Label { get; set; }
    public MvcHtmlString Editor { get; set; }
    public MvcHtmlString Validation { get; set; }
} 
```

脚本包括：

```
 <script src="/Scripts/jquery-1.7.1.js"></script>        
 <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
 <script src="/Scripts/jquery.validate.js"></script>
 <script src="/Scripts/jquery.validate.unobtrusive.js"></script>
 <script src="/Scripts/Validation/EqualAttribute.js"></script> 
```

表单模型 NewUserProfileModel：

```
 public class NewUserProfileModel : UserProfileModel, IValidatableObject
{
    [Display(Name="Password", ResourceType = typeof(NewUserProfileRes))]
    [DataType(DataType.Password)]
    [Required(ErrorMessageResourceName = "FieldIsRequired", ErrorMessageResourceType = typeof(ErrorsRes))]
    [StringLengthRange(6, 64, ErrorMessageResourceType = typeof(ErrorsRes), ErrorMessageResourceName = "InvalidStringLength")]
    public string Password { get; set; }

    [Display(Name="ConfirmPassword", ResourceType = typeof(NewUserProfileRes))]
    [DataType(DataType.Password)]
    [Compare("Password", ErrorMessageResourceType = typeof(NewUserProfileRes), ErrorMessageResourceName = "PasswordsDontMatch")]
    public string ConfirmPassword { get; set; }

    [Display(Name="AgreementAccepted", ResourceType = typeof(NewUserProfileRes))]
    [Equal(true, ErrorMessageResourceType = typeof(NewUserProfileRes), ErrorMessageResourceName = "MustAgreeWithEULA")]
    public bool AgreementAccepted { get; set; }

    public NewUserProfileModel()
    {
        var property = GetType().GetProperty("Login");
        var list = property.GetCustomAttributes(true);
        foreach (var item in list)
        {
            Console.WriteLine(item);
        }
    }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var userRepository = new UserRepository();
        if (userRepository.IsLoginExists(Login))
        {
            yield return new ValidationResult(NewUserProfileRes.LoginAlreadyExists, new []{"Login"});
        }
    } 
```

用户档案模型：

```
 public class UserProfileModel
{
    [Display(Name = "Login", ResourceType = typeof(UserProfileRes))]
    [DataType(DataType.Text)]
    [Required(ErrorMessageResourceName = "FieldIsRequired", ErrorMessageResourceType = typeof(ErrorsRes))]
    [StringLengthRange(3, 64, ErrorMessageResourceName = "InvalidStringLength", ErrorMessageResourceType = typeof(ErrorsRes))]
    public string Login { get; set; }

    [Display(Name="DisplayName", ResourceType = typeof(UserProfileRes))]
    [DataType(DataType.Text)]
    [Required(ErrorMessageResourceName = "FieldIsRequired",
        ErrorMessageResourceType = typeof(ErrorsRes))]
    [StringLengthRange(3, 32, 
        ErrorMessageResourceName = "InvalidStringLength",
        ErrorMessageResourceType = typeof(ErrorsRes))]
    public string DisplayName { get; set; }

    [Display(Name = "Email", ResourceType = typeof(UserProfileRes))]
    [DataType(DataType.EmailAddress)]
    [Required(ErrorMessageResourceType = typeof(ErrorsRes), ErrorMessageResourceName = "FieldIsRequired")]
    [RegularExpression(@"[\w\.-]*[a-zA-Z0-9_]@[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]", ErrorMessageResourceType = typeof(ErrorsRes), ErrorMessageResourceName = "InvalidEmailAddress")]
    [StringLength(64, ErrorMessageResourceType = typeof(ErrorsRes), ErrorMessageResourceName = "StringTooLong")]
    public string Email { get; set; }

    [Display(Name="Homepage", ResourceType = typeof(UserProfileRes))]
    [DataType(DataType.Url)]
    [RegularExpression(@"(http(s)?://)?([\w-]+\.)+[\w-]+(/[\w- ;,./?%&=]*)?", ErrorMessageResourceType = typeof(ErrorsRes), ErrorMessageResourceName = "IvalidUrl")]
    [StringLength(96,
        ErrorMessageResourceType = typeof(ErrorsRes), ErrorMessageResourceName = "StringTooLong")]
    public string Homepage { get; set; }
} 
```

EqualAttribute.js：

```
jQuery.validator.addMethod("equal", function (value, element, param) {
    if($(element).attr("type")=="checkbox")
    {
        value = String($(element).attr("checked"));
        param = param.toLowerCase();
    }
    return (value == param);
});

jQuery.validator.unobtrusive.adapters.addSingleVal("equal", "valuetocompare"); 
```

# c# - FileStream.BeginRead 似乎没有返回回调

> ID：14775864
> 
> 赞同：1
> 
> 时间：2013-02-08T15:27:23.493
> 
> 标签：c#, usb, hid

我正在使用异步读取带有 c# 的 USB 设备。我正在使用文件流来做到这一点。当我执行 FileStream.BeginRead 时。它似乎没有做回调。这可能是什么问题？

这是我的代码

```
 /// <summary>
    /// Initialises the device
    /// </summary>
    /// <param name="strPath">Path to the device</param>
    private void Initialise(String strPath)
    {
        // Create the file from the device path
        SafeHandle = CreateFile(strPath, FileAccess.ReadWrite, FileShare.ReadWrite, IntPtr.Zero, FileMode.Open, 
            EFileAttributes.Overlapped, IntPtr.Zero);
        if (SafeHandle != null) // if the open worked...
        {
            IntPtr lpData;
            if (HidD_GetPreparsedData(SafeHandle, out lpData))
                // get windows to read the device data into an internal buffer
            {
                try
                {
                    HidCaps hidCaps;
                    HidP_GetCaps(lpData, out hidCaps); // extract the device capabilities from the internal buffer
                    InputReportLength = hidCaps.InputReportByteLength; // get the input...
                    OutputReportLength = hidCaps.OutputReportByteLength; // ... and output report lengths
                    FileStream = new FileStream((SafeFileHandle) SafeHandle, FileAccess.ReadWrite, InputReportLength,
                                                true); // wrap the file handle in a .Net file stream
                    BeginAsyncRead(); // kick off the first asynchronous read
                }
                finally
                {
                    HidD_FreePreparsedData(ref lpData);
                        // before we quit the function, we must free the internal buffer reserved in GetPreparsedData
                }
            }
            else // GetPreparsedData failed? Chuck an exception
                throw HidDeviceException.GenerateWithWinError("GetPreparsedData failed");
        }
        else    // File open failed? Chuck an exception
        {
            SafeHandle = null;
            throw HidDeviceException.GenerateWithWinError("Failed to create device file");
        }
    } 
```

这是回调

```
 /// <summary>
    /// Kicks off an asynchronous read which completes when data is read or when the device
    /// is disconnected. Uses a callback.
    /// </summary>
    private void BeginAsyncRead()
    {
        Byte[] buffer = new Byte[InputReportLength];
        // put the buff we used to receive the stuff as the async state then we can get at it when the read completes
        FileStream.BeginRead(buffer, 0, InputReportLength, ReadCompleted, buffer);
    } 
```

这是我的回调

```
 /// <summary>
    /// Callback for above. Care with this as it will be called on the background thread from the async read
    /// </summary>
    /// <param name="iResult">Async result parameter</param>
    private void ReadCompleted(IAsyncResult iResult)
    {
        Byte[] buffer = (Byte[])iResult.AsyncState; // retrieve the read buffer
        try
        {
            FileStream.EndRead(iResult);    // call end read : this throws any exceptions that happened during the read
            try
            {
                HandleDataReceived(buffer); // pass the new input report on to the higher level handler
            }
            finally
            {
                BeginAsyncRead();   // when all that is done, kick off another read for the next report
            }
        }
        catch (IOException) // if we got an IO exception, the device was removed
        {
            HandleDeviceRemoved();
            if (OnDeviceRemoved != null)
                OnDeviceRemoved(this, new EventArgs());
            Dispose();
        }
    } 
```

**更新**我想知道我在 devicePath 中是否做错了

```
 /// <summary>
    /// Helper method to return the device path given a DeviceInterfaceData structure and an InfoSet handle.
    /// Used in 'FindDevice' so check that method out to see how to get an InfoSet handle and a DeviceInterfaceData.
    /// </summary>
    /// <param name="hInfoSet">Handle to the InfoSet</param>
    /// <param name="oInterface">DeviceInterfaceData structure</param>
    /// <returns>The device path or null if there was some problem</returns>
    private static string GetDevicePath(IntPtr hInfoSet, ref DeviceInterfaceData oInterface)
    {
        uint nRequiredSize = 0;
        // Get the device interface details
        if (!SetupDiGetDeviceInterfaceDetail(hInfoSet, ref oInterface, IntPtr.Zero, 0, ref nRequiredSize, IntPtr.Zero))
        {
            DeviceInterfaceDetailData oDetail = new DeviceInterfaceDetailData();

            oDetail.Size = Marshal.SizeOf(typeof(IntPtr)) == 4 ? 8 : 5; // check if is a 64 bit

            if (SetupDiGetDeviceInterfaceDetail(hInfoSet, ref oInterface, ref oDetail, nRequiredSize, ref nRequiredSize, IntPtr.Zero))
            {
                return oDetail.DevicePath;
            }
        }
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:36:26.907

您是否将回调作为参数添加到方法调用中，如下例所示：

```
public void LoadFile(string fileName)
{  
    currentFileStream = new FileStream("Foo.txt", FileMode.Open, FileAccess.Read, FileShare.Read, 1024 * 8, true);
    buffer = new byte[currentFileStream.Length];
    currentFileStream.BeginRead(buffer, 0, buffer.Length, FileReadComplete, currentFileStream);
}

private void FileReadComplete(IAsyncResult result)
{
    // do your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T19:30:29.670

```
// Create a synchronization object that gets  
// signaled when verification is complete.
ManualResetEvent manualEvent = new ManualResetEvent(false);

// Create random data to write to the file. 
byte[] writeArray = new byte[100000];
new Random().NextBytes(writeArray);

FileStream fStream = 
    new FileStream("Test#@@#.dat", FileMode.Create, 
    FileAccess.ReadWrite, FileShare.None, 4096, true);

// Check that the FileStream was opened asynchronously.
Console.WriteLine("fStream was {0}opened asynchronously.",
    fStream.IsAsync ? "" : "not ");

// Asynchronously write to the file.
IAsyncResult asyncResult = fStream.BeginWrite(
    writeArray, 0, writeArray.Length, 
    new AsyncCallback(EndWriteCallback), 
    new State(fStream, writeArray, manualEvent));

// Concurrently do other work and then wait  
// for the data to be written and verified.
manualEvent.WaitOne(5000, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:35:35.640

所以你可以看一下我写的一个快速示例。

```
class Program
{
    static Byte[] buffer = new Byte[1024];

    public static void Main()
    {
        FileStream fileStream = File.OpenRead("data.txt");
        fileStream.BeginRead(buffer, 0, buffer.Length, new AsyncCallback(FileReadCallback), fileStream);

        Console.ReadLine();
    }

    public static void FileReadCallback(IAsyncResult result)
    {
        FileStream fileStream = (FileStream)result.AsyncState;
        fileStream.EndRead(result);

        foreach (Byte b in buffer)
            Console.Write((Char)b);

    }
} 
```

虽然这种方法有效，但它是非常古老的 C++ 风格。写这样的东西要容易得多：

```
 public static void Main()
    {
        using (FileStream fileStream = File.OpenRead("data.txt"))
        using (StreamReader reader = new StreamReader(fileStream))
        {
            // This will read a single line of text
            String line = reader.ReadLine();
        }
    } 
```

`System.Threading.Tasks.Task`只需使用该类在另一个线程上执行它，如下所示：

```
 public static void Main()
    {
        Task.Run(ThisWillExecuteOnAnotherThread);
    }

    public static void ThisWillExecuteOnAnotherThread()
    {
        using (FileStream fileStream = File.OpenRead("data.txt"))
        using (StreamReader reader = new StreamReader(fileStream))
        {
            // This will read a single line of text
            String line = reader.ReadLine();
        }
    } 
```

我个人认为这种风格要干净得多。

**更新**

所以这个设置在我的机器上运行良好：

```
class Program
{
    static byte[] buffer;
    static int InputReportLength = 1024;
    static FileStream fileStream;
    public static void Main()
    {
        BeginAsyncRead();
    }

    private static void BeginAsyncRead()
    {
        buffer = new Byte[InputReportLength];
        fileStream = File.OpenRead("Data.txt");

        // put the buff we used to receive the stuff as the async state then we can get at it when the read completes
        fileStream.BeginRead(buffer, 0, InputReportLength, ReadCompleted, buffer);
    }

    private static void ReadCompleted(IAsyncResult iResult)
    {
        Byte[] buffer = (Byte[])iResult.AsyncState; // retrieve the read buffer

    }

} 
```

我建议你不要这样做：

```
FileStream FileStream = .... 
```

通常你应该'PascalCase'你的类名和'camelCase'你的变量。此外，作为一般建议，代码的结构方式要求您在页面上进行多次跳转，如果您以后需要再次查看代码，这将使您难以维护。尽量让事情尽可能靠近。

# android - GCM 演示服务器

> ID：14775867
> 
> 赞同：0
> 
> 时间：2013-02-08T15:27:27.463
> 
> 标签：android, google-cloud-messaging

我已经从 Android 开发者网站运行了 GCM 客户端演示应用程序。

现在我只想知道是否有一个服务器只是为了测试应用程序是否工作。我不想建立自己的服务器，我只想测试应用程序。

顺便说一句，我正在使用 Eclipse 并尝试为 Android 开发应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:43:03.923

> 我不想建立自己的服务器，我只想测试应用程序。

您不需要服务器。您需要将消息发送到 GCM 服务器的东西。在生产中，这通常是一个服务器，但它不是必须的。

例如，[这个 Java 项目和相关的 shell 脚本](https://github.com/commonsguy/cw-omnibus/tree/master/Push/GCMCommand)实现了一个命令行 GCM 实用程序，该实用程序将消息发送到指定的注册 ID。可能有其他此类实用程序可从其他来源获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-25T21:31:55.850

你可以在谷歌应用引擎上部署[这个](https://github.com/tttzof351/gsm-test-server)服务器来测试 gcm。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:29:58.347

我创建了一个非常简单易用的 GCM 测试服务器，它被实现为 maven 插件。它是 GCMUtils 项目的一部分，请参阅此处了解更多信息：[https ://code.google.com/p/gcmutils/wiki/MavenPlugin#Test_server](https://code.google.com/p/gcmutils/wiki/MavenPlugin#Test_server)

# python - 如何使用 Python 或任何其他编程/脚本语言格式化文本文件？

> ID：14775875
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:27:51.403
> 
> 标签：python, text, formatting

我想知道如何使用 Python 或任何其他编程/脚本语言来格式化文本文件？

文本文件中的当前格式是这样的：

```
ABALONE
Ab`a*lo"ne, n. (Zoöl.)

Defn: A univalve mollusk of the genus Haliotis. The shell is lined
with mother-of-pearl, and used for ornamental purposes; the sea-ear.
Several large species are found on the coast of California, clinging
closely to the rocks. 
```

我希望它是这样的（全部在一行上，不包括一些单词等）：

```
ABALONE : A univalve mollusk of the genus Haliotis. The shell is lined with 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:31:15.243

假设格式始终与您描述的完全一样（单词、发音、空行、“Defn：”、定义），那么字符串拆分和连接就是一个简单的问题：

```
def reformat(text):
    lines = text.split('\n', 3)
    word = lines[0]
    definition_paragraph = lines[3][len('Defn:'):]
    definition_line = definition_paragraph.replace('\n', ' ')
    return word + ' : ' + definition_line 
```

这个想法是制作一段可以轻松调用来修复文本的代码。在这种情况下，该函数被调用`reformat`，它的工作原理是将给定的文本分成前三行和定义，从段落中提取定义，并将单词本身与定义粘合在一起。

另一种解决方案是[正则表达式](https://en.wikipedia.org/wiki/Regular_expression)，它更适合任务，但由于语法奇怪，可能更难理解：

```
import re
pattern = re.compile('(.+?)\n.+?\n\nDefn: (.+)', re.DOTALL)
def reformat(text):
    word, definition = pattern.search(text).groups()
    return word + ' : ' + definition.replace('\n', ' ') 
```

这应该与上面的其他代码完全相同，但它更简单、更灵活，并且可以移植到不同的语言。

要使用上述任何方法，只需调用将文本作为参数传递的方法。

要替换文件中的文本，您需要打开文件，读取内容，使用上述任何功能重新格式化，然后保存回文件：

```
with open('word.txt') as open_file:
    text = open_file.read()

with open('word.txt', 'w') as open_file:
    open_file.write(reformat(text)) 
```

例如，如果您需要对给定目录中的所有文件执行此操作，请查看 [`listdir`](http://docs.python.org/2/library/os.html#os.listdir)模块`os`。

# ios - 使用 Xcode 手动将图像数据放入 Plist 文件

> ID：14775879
> 
> 赞同：0
> 
> 时间：2013-02-08T15:28:09.860
> 
> 标签：ios, xcode, image, plist

我想将图像放入 plist 文件中。以编程方式很容易将图像保存为 plist 文件中的数据，但我想手动预设数据输入。如何使用我的 xcode plist 编辑器将这些数据放在数据字段中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:33:56.187

由于您知道如何在代码中执行此操作，因此请编写一些临时代码以将所需的图像写入临时 plist 文件。然后您可以将条目复制到真正的 plist 文件中。

但是，我建议采用不同的方法。将实际图像存储在应用程序的资源包中，并将文件名放入 plist 文件中。这将更容易维护和更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:33:12.427

您必须在属性列表中获取您想要拥有的图像的二进制数据，然后将其输入到文件中。

我不会推荐它。您可以轻松地以编程方式实现这一点，如果您需要代码方面的帮助，我可以帮助您

# asp.net - Live Server 问题上的日期转换

> ID：14775880
> 
> 赞同：0
> 
> 时间：2013-02-08T15:28:11.937
> 
> 标签：asp.net, .net, vb.net, parsing, datetime

我有一个 web 应用程序，在开发中工作时很好，但是去 Live 它不起作用。

情况与日期有什么关系。用户通过文本输入英国格式的日期，我使用 DateTime.ParseExact(txtDate.Text, "dd-MM-yyyy", Nothing) 告诉日期数据类型该日期必须保持英国风格。正如我所说，开发中一切都很好，但是当它进入 Live 时，它​​说该字符串不是有效的日期时间格式。

我已经尝试过 Convert.ToDateTime 和各种各样的东西，但它就是行不通！

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:57:09.727

我怀疑实时服务器上的文化设置与开发机器上的文化设置不同。

[从文档](http://msdn.microsoft.com/en-us/library/w2sa9yss%28VS.80%29.aspx)：

> *如果 provider 是空引用（在 Visual Basic 中为 Nothing），则使用当前区域性。*

所以你需要指定 InvariantCulture 试试这个：

```
DateTime.ParseExact(datetimeString, "dd/MM/yyyy", 
    System.Globalization.CultureInfo.InvariantCulture) 
```

# php - 从多个表中输出mysql数据库行

> ID：14775884
> 
> 赞同：0
> 
> 时间：2013-02-08T15:28:26.347
> 
> 标签：php, mysql, sql

如何防止此查询不重复这样的结果：

我的查询如下：

```
 SELECT A.c_comp_name, A.i_id_user, B.c_name, C.c_map_name, D.c_temp_name
 FROM dc_cnf_costumer AS A, dc_cnf_page AS B, dc_cnf_map AS C, dc_cnf_renderer AS D 
```

输出：

```
c_comp_name      i_id_user     c_name     c_map_name       c_temp_name
comp_1           4             Home       /map1/           template.php
comp_2           4             Home       /map1/           template_two.php
comp_1           4             Home       /map1/           template.php
comp_2           4             Home       /map1/           template_two.php
comp_1           4             Home       /map1/           template.php
comp_2           4             Home       /map1/           template_two.php
comp_1           4             Home       /map1/           template.php
comp_2           4             Home       /map1/           template_two.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:33:26.960

`DISTINCT`不会在这种情况下工作，因为没有两行是相同的。

您有重复值的原因是因为**查询从 3 个表中生成笛卡尔积**。您应该提供一个条件，在该条件下应该链接表。前任，

```
SELECT A.c_comp_name, A.i_id_user, B.c_name, C.c_map_name, D.c_temp_name
FROM dc_cnf_costumer AS A 
     INNER JOIN  dc_cnf_page AS B
         ON ....
     INNER JOIN dc_cnf_map AS C 
         ON ....
     INNER JOIN dc_cnf_renderer AS D
         ON .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:32:14.960

您需要在查询中添加连接条件 - 目前您正在获得每个表上所有行之间的笛卡尔连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:30:47.153

1）在单词`distinct`后添加单词`select`

或者

2）加入你的桌子，这样重复就不会出现在第一个地方

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:31:18.913

要么按独特的东西分组，要么我怀疑像

```
SELECT DISTINCT c_comp_name ..... 
```

可能对你更好。失败 a`GROUP BY i_id_user` 也可以工作

# sql - COUNT() 超过除结果

> ID：14775886
> 
> 赞同：2
> 
> 时间：2013-02-08T15:28:37.517
> 
> 标签：sql, tsql, aggregation

我有一个像这样的查询：

```
SELECT
    id
FROM
    table1
INNER JOIN
    ...
WHERE
    ...
    AND eventtype IN (2000120, 2000121, 2000122, 2000123, 2000130)

EXCEPT

SELECT
    id
FROM
    table1
INNER JOIN
    ...
WHERE
    ...
    AND eventtype IN (2000123,2000130,2000134,2000135) 
```

请注意，除了最后一个 where 子句之外，查询都是相同的。

我现在想计算上述查询返回的记录数。

如何？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:29:45.280

使用`COUNT`并将其包裹在一个`SUBQUERY`

```
SELECT COUNT(ID)
FROM (
        SELECT id
        FROM table1
        INNER JOIN...
        WHERE...
                AND eventtype IN ( 2000120, 2000121, 2000122, 2000123, 2000130 )
        EXCEPT
        SELECT id
        FROM table1
        INNER JOIN...
        WHERE...
                AND eventtype IN ( 2000123, 2000130, 2000134, 2000135 )
        ) s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:03:03.667

您只需要第一次查询您想要的内容，如果您不需要它，则不必包含 2000130 值，因此您不想在查询中显示其他值。

```
SELECT
    id
FROM
    table1
INNER JOIN
    ...
WHERE
    ...
    AND eventtype IN (2000120, 2000121, 2000122, 2000123) 
```

如果您需要从某些查询中排除某些值，您可以使用

```
 AND eventtype NOT IN (2000130) 
```

但不是两者兼而有之。如果需要，可以只计算常规使用`SELECT COUNT(id)`或子查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:55:24.730

您也可以将 EXISTS 与 INTERSECT 子查询一起使用

```
SELECT COUNT(ID)
FROM table1 t1 INNER JOIN ...
WHERE ... AND eventtype IN (2000120, 2000121, 2000122, 2000123, 2000130)
AND NOT EXISTS (
SELECT 1
FROM table1 t2 INNER JOIN ...
WHERE ... AND eventtype IN (2000123, 2000130, 2000134, 2000135)
AND EXISTS (SELECT t1.ID 
            INTERSECT
            SELECT t2.ID)) 
```

# windows - 是否有适用于 Windows 的 seccomp 模拟

> ID：14775888
> 
> 赞同：8
> 
> 时间：2013-02-08T15:28:41.933
> 
> 标签：windows, seccomp

是否有类似[seccomp](http://en.wikipedia.org/wiki/Seccomp)的东西可以在 Windows 上运行？

它应该将所有系统调用限制在一些非常有限的集合中，比如只读取和写入已经打开的文件。

被描述[为 Chromium 沙箱的](http://dev.chromium.org/developers/design-documents/sandbox)那个看起来不像 Seccomp，因为它基于通常的文件权限和 Windows 安全对象，而不是限制对系统调用的访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-13T03:26:48.140

不，没有什么能像 seccomp 一样在 Windows 上运行。最接近的是禁用某些特权系统调用的传统权限。但目前，没有办法将整个任意系统调用或 Windows 上的系统调用参数列入白名单或黑名单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-21T17:57:23.550

从 Windows 8 开始，您可以阻止来自[结构](https://msdn.microsoft.com/en-us/library/windows/desktop/hh871472(v=vs.85).aspx)`win32k.sys`中带有`DisallowWin32kSystemCalls`标志的所有调用。[`PROCESS_MITIGATION_SYSTEM_CALL_DISABLE_POLICY`](https://msdn.microsoft.com/en-us/library/windows/desktop/hh871472(v=vs.85).aspx)

您不能像在 seccomp 中那样逐渐控制系统调用，但这仍然是一个有趣的功能。

# kendo-ui - kendodropdownlist成功方法

> ID：14775890
> 
> 赞同：0
> 
> 时间：2013-02-08T15:28:47.473
> 
> 标签：kendo-ui

我有以下代码

```
 $("#categories").kendoDropDownList({
        dataTextField: "Name",
        dataValueField: "ID",
        dataSource: {
            serverFiltering: true,
            transport: {
                read: {
                    url: '@Url.Action("GetNames", "Index")',
                    dataType: "json",
                    type: "POST"
                }
            }
        }
    }).data("kendoDropDownList"); 
```

在下拉列表与数据绑定后，我需要执行一些代码。我怎样才能做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T14:35:15.143

```
$("#categories").kendoDropDownList({
    dataTextField: "Name",
    dataValueField: "ID",
    dataSource: {
        serverFiltering: true,
        transport: {
            read: {
                url: '@Url.Action("GetNames", "Index")',
                dataType: "json",
                type: "POST"
            }
        }
    },
    dataBound: OnDataBound
    }).data("kendoDropDownList");

function OnDataBound() {
// do stuff
} 
```

# android - 在 Android 应用程序中找不到 com.google.api.client.htpp.javanet.NetHttpTransport

> ID：14775891
> 
> 赞同：0
> 
> 时间：2013-02-08T15:28:53.107
> 
> 标签：android, api, class, http, freebase

我正在尝试在 Android 应用程序中实现[http://codify.freebaseapps.com/?request=https%3A%2F%2Fwww.googleapis.com%2Ffreebase%2Fv1%2Fsearch%3Fquery%3DBlue%2BBottle&title=Simple%20Search 。](http://codify.freebaseapps.com/?request=https%3A%2F%2Fwww.googleapis.com%2Ffreebase%2Fv1%2Fsearch%3Fquery%3DBlue%2BBottle&title=Simple%20Search)我安装了正确的 api 密钥并与 google api 服务匹配，并在 Referenced Libraries 下导入了适当的 jar 文件。

但是，我的代码每次在模拟器上运行时都会抛出找不到类 - 'com.google.api.client.http.javanet.NetHttpTransport' 错误。有什么建议或反馈吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:45:08.117

您必须将库添加到项目中。

1.  右键项目
2.  特性
3.  Java 构建路径
4.  添加外部 JAR

请阅读这篇文章：[未找到 Android 和 Google 客户端 API NetHttptransport 类](https://stackoverflow.com/questions/7648039/android-and-google-client-api-nethttptransport-class-not-found)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T00:29:45.550

当我构建您链接到的 Codify 应用程序时，我没有针对 Android 对其进行测试，因此在 Android 中可能有更简单的方法。

这是使用 Android SDK 中包含的 Apache HttpClient 和 json.org 的另一种方法。

```
import java.io.IOException;
import java.io.InputStream;
import java.net.URLEncoder;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;

public class FreebaseSearchTask extends AsyncTask<String, Void, JSONObject> {

    protected JSONObject getJsonContentFromEntity(HttpEntity entity)
            throws IllegalStateException, IOException, JSONException {
        InputStream in = entity.getContent();
        StringBuffer out = new StringBuffer();
        int n = 1;
        while (n > 0) {
            byte[] b = new byte[4096];
            n = in.read(b);
            if (n > 0)
                out.append(new String(b, 0, n));
        }
        JSONObject jObject = new JSONObject(out.toString());
        return jObject;
    }

    @Override
    protected JSONObject doInBackground(String... params) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        String query = params[0];       
        JSONObject result = null;
        try {
            HttpGet httpGet = new HttpGet("https://www.googleapis.com/freebase/v1/search?query=" + URLEncoder.encode(query, "utf-8"));

            HttpResponse response = httpClient.execute(httpGet, localContext);
            HttpEntity entity = response.getEntity();
            result = getJsonContentFromEntity(entity);
        } catch (Exception e) {
            Log.e("error", e.getLocalizedMessage());
        }
        return result;
    }

    protected void onPostExecute(JSONObject result) {
        doSomething(result);
    }
} 
```

# jquery - 如何 使用 JavaScript 和 jQuery 在 HTML 中将“
”替换为“
”？

> ID：14775894
> 
> 赞同：0
> 
> 时间：2013-02-08T15:28:58.970
> 
> 标签：jquery

我有验证摘要，有时`br`末尾有多个标签，如下所示：

```
<div id="ValidationSummary1" class="alert alert-error">
    Last 4-digits of Social Security number does not match 
    the Member record on file for the Member ID number you 
    have entered.<br />
    Date of Birth does not match the Member record on file for the Member ID 
    number you have entered.<br /><br />
</div> 
```

我试图在任何时候找到两个`br`背靠背标签并将其替换为如下所示：

```
$('#ValidationSummary1').replace('<br /><br />', '<br />'); 
```

我知道没有`replace()`功能。像这样简单的东西有什么替代品？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T15:31:13.017

用于`.html()`获取和设置通过标准 JS 传递的内容`replace()`。

```
var div = $('#ValidationSummary1');
div.html(div.html().replace('<br /><br />', '<br />')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:30:47.487

JavaScript 本身*确实*有一个`replace`函数，并且鉴于 jQuery 是一个*基于*JavaScript 构建的框架，您确实可以使用该方法。因此，这意味着您必须执行一个 get-manipulate-set 过程，而不是一些不错的 jQuery 方法链接来完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:38:09.937

```
 var $val= $('#ValidationSummary1');
 $val.html($val.html().replace(/[<br>]+$/, '<br/>'); 
```

无论
它们的数量将被替换为一个
（更好的 html）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T07:03:59.893

在您的情况下（需要删除 html 标签），最好的解决方案是使用`.text()`而不是`.html()`. 不同之处在于`.html()`保留 html 标签，并且`.text()`只保留文本（删除任何 html）。

例如：

```
var value1 = $('.some_div').html(); //returns text content with HTML tags
var value2 = $('.some_div').text(); //returns only text content 
```

# objective-c - 如何使用 UIWebView 和 NSURLRequest 获取 OAuth2 令牌？

> ID：14775898
> 
> 赞同：0
> 
> 时间：2013-02-08T15:29:21.717
> 
> 标签：objective-c, facebook, uiwebview, oauth-2.0, nsurlrequest

我正在尝试仅使用 a`UIWebview`和`NSURLRequest`s 检索 Facebook API 的访问令牌。因为我也想用 Twitter 和 Google 来做这件事，所以我不想在我的应用程序中包含 Facebook 的整个 SDK。我只需要访问令牌，因为我知道如何从那里继续。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:22:49.287

看看这个小[例子](http://itslennysfault.com/get-facebook-access-token-for-graph-api)

# html - 单击按钮时，它会一直将我导航到页面顶部

> ID：14775906
> 
> 赞同：1
> 
> 时间：2013-02-08T15:29:53.203
> 
> 标签：html, css

下面是一段代码，它设置了一个复选框以使其看起来像一个按钮，但我遇到的问题是，当我单击复选框按钮时，它会一直将我导航到页面顶部？

HTML/PHP：

```
echo '<div id="ck-button"><label><input type="checkbox" name="options[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><span>' . $indivOption . '</span></label></div>'; 
```

CSS：

```
#ck-button {
    margin:8px;
    background-color:#EFEFEF;
    border:1px solid #D0D0D0;
    overflow:auto;
    float:left;
}

#ck-button:hover {
    background:green;
}

#ck-button label {
    float:left;
    width:4.0em;
}

#ck-button label span {
    text-align:center;
    padding:3px 0px;
    display:block;
}

#ck-button label input {
    position:absolute;
    top:-20px;
}

#ck-button input:checked + span {
    background-color:#911;
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:38:12.300

您需要添加`position: relative;`到`#ck-button`选择器。

```
#ck-button {
    margin:8px;
    background-color:#EFEFEF;
    border:1px solid #D0D0D0;
    overflow:auto;
    float:left;
    position: relative;
} 
```

[这是一个关于 JS Bin 的工作示例](http://jsbin.com/asiqid/1/)。（向下滚动查看按钮）

# java - 暂停/停止 GWT 执行

> ID：14775910
> 
> 赞同：2
> 
> 时间：2013-02-08T15:30:12.380
> 
> 标签：java, gwt

在我们的 GWT Web 应用程序中，我们达到了想要删除所有内容并只显示应用程序已停止的大警告的状态。

我们无法找到一种方法来做到这一点。我们基本上需要的是：

*   强制 GWT 停止所有处理并中止任何现有的 RPC 消息
*   强制所有注册的事件变为非活动状态
*   清除页面中所有可见内容
*   设置单个段落/文本

简而言之，我们想杀死整个 DOM 并只添加一个段落。

我们尝试了许多不同的组合

```
RootPanel.get().clear() 
```

但找不到可靠的方法来做我们想要实现的目标。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:06:28.893

首先，您必须进行服务器活动。这是一个很好的做法，它可以使您的应用程序健壮。为了使其统一，您可能希望以适当的例外来响应对您的服务实现提出的任何请求。例如，如果这就是当用户被删除访问应用程序的权限时发生的情况，那么它可能应该为所有请求抛出某种安全异常，除了那些为重新登录或其他批准的操作而发出的请求。

您可以在每种服务方法中手动执行此操作，也可以使用过滤器来处理它。Spring Security 等框架提供了一种配置安全过滤器的简单方法。

完成服务器端并确认 UI 无法穿透服务器的安全层后，您可以对 UI 进行更改。有不同的方法可以制作漂亮的屏蔽屏幕。

一般来说，我在我的代码中执行以下操作来创建内容，并且可以使用 clear() 方法从视口中删除视口或东西。无需刷新或重新验证。

```
 Viewport viewport = new Viewport();
    viewport.setLayout(new FitLayout());
    viewport.add(new MainPanel());
    RootPanel.get().add(viewport); 
```

不知道你的布局如何。如果您能够为您的场景提供代码示例，我可以向您展示如何做您需要的事情。因为在我的示例中它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:07:21.003

```
Window.Location.replace("URL-OF-A-STATIC-HTML") 
```

爪哇文档：

> 用新的 URL 替换当前 URL。所有 GWT 状态都将丢失。在浏览器的历史记录中，当前 URL 将被新 URL 替换。

如果您想重新激活 GWT 应用程序，请在该 HTML 页面上放置一个链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:05:45.073

在 cookie 中存储信息或说出标志，当您加载应用程序时，请查看是否设置了该 cookie，如果设置了则显示消息或加载应用程序。现在，每当您想完全停止应用程序时，设置 cookie 并重新加载应用程序。

# c# - 委托回调的 C# 奇怪行为

> ID：14775911
> 
> 赞同：2
> 
> 时间：2013-02-08T15:30:14.283
> 
> 标签：c#, delegates, lambda, callback

我写了一个类，它应该提供与 NodeJS 服务器的基本交互。此类还包括 TcpClient 实例并异步工作（例如 BeginRead、BeginWrite 等方法），因此许多函数将回调（使用 lambda expr. 的匿名函数）作为参数。问题在这种情况下开始（我试图说明类似于原始代码的和平）。

```
this._nodeJS.Send("DATA_TO_SEND", (Response) => {
    Console.WriteLine(Response);

    // Section1
    this._nodeJS.Send("ANOTHER_DATA", (Response1) => {
        Console.WriteLine(Response1);
    });
}); 
```

问题出现在**Section1**中。当它被注释掉时，程序按预期运行。收到写入控制台的响应。当它没有被注释掉时，它开始表现得很奇怪。在 Section1 中写入 Console 不起作用（在许多情况下），重要的是，本节中 Console.WriteLine 下面的代码不会执行，“线程”只是在命令之前停止。我尝试一步步调试它，Section1 中的变量设置正确，当我执行下一个命令时，调试就停止了。这种方法有什么问题吗？有什么我需要注意的吗？

为了更好的想象，这里是我的例子。我连接到 NodeJS 服务器，完成后，我发送一个请求并等待包含数据的响应，这些数据经过处理并在下一个请求（第 1 节）中再次发送到 NodeJS 服务器。NodeJS 给了我最终的回应和程序的工作......感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:39:07.153

最后，我想通了，这是怎么回事。我知道，我没有显示我的原始代码，而是使用了某种伪代码，但如果有人有兴趣知道，问题可能是导致接收数据的错误转换。我有大小为 1024 的缓冲区和`StringBuilder`附加数据的变量。所以当我收到数据时，以这种方式转换它：`Encoding.UTF8.GetString(state.Buffer)`- 这是错误的，相反，我不得不使用`Encoding.UTF8.GetString(state.Buffer, 0, bytesRead)`. 我不知道怎么做，但这部分代码造成了麻烦并停止了回调执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:42:40.113

在不知道您的实现细节的情况下，我怀疑第二个`_nodeJS.Send(...`调用被第一个 Send 调用的响应阻止了。

猜测一下，您的代码会执行以下操作（由伪代码组成！）：

```
void Send(String data, Action<Response> callback)
{
    _socket.BeginSend(Magic(data), r => {
        callback.Invoke(r.ResponseData);
        _socket.EndSend(r.Result);    //you cannot call _socket.Send() again until you have done this!
    });
} 
```

由于操作顺序，它应该这样做：

```
void Send(String data, Action<Response> callback)
{
    _socket.BeginSend(Magic(data), r => {
        _socket.EndSend(r.Result);
        callback.Invoke(r.ResponseData);
    });
} 
```

# lucene - 有没有一种方法可以使用 lucene 核心库进行短语邻近搜索

> ID：14775915
> 
> 赞同：0
> 
> 时间：2013-02-08T15:30:30.157
> 
> 标签：lucene, proximity

我需要在几个短语之间执行邻近搜索。短语的数量事先不知道。用户可以输入任意数量的短语，并且可以给出自己的 slop。我也需要支持嵌套短语邻近搜索查询。例如，我正在查看的搜索查询是：“letter come”、“slop”、“agitated employees”。“信来了” slop “激动的员工” slop “担心薪水”。"信来了" slop "激动的 slop "phrase1 slop phrase2 slop phrase3" slop empl"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:31:44.433

据我所知，您无法执行嵌套的邻近搜索。一个 kludge 可能是创建一个将所有术语与一个大的 slop 组合在一起的短语，比如各个 slop 的总和：

```
("letter comes"~3 "agitated employees"~4 "worried about salaries"~1)
 AND ("letter comes agitated employees worried about salaries"~8) 
```

（以上假设您的默认运算符是 OR）。我会玩弄组合短语 slop，看看我是否能接近我想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T12:44:37.827

[Tim Allison 的这个](https://issues.apache.org/jira/browse/LUCENE-5205/)补丁将对您的用例有所帮助。它还提供递归短语查询和其他一些功能。

# python - 在终端上为 Python 着色异常

> ID：14775916
> 
> 赞同：14
> 
> 时间：2013-02-08T15:30:30.823
> 
> 标签：python, exception, colors

有没有一种简单的方法可以让异常*消息*在命令行上着色？例如

```
def g():    f()
def f():    1/0
g() 
```

给出错误

```
Traceback (most recent call last):
  File "test.py", line 3, in <module>
    g()
  File "test.py", line 1, in g
    def g():    f()
  File "test.py", line 2, in f
    def f():    1/0
ZeroDivisionError: integer division or modulo by zero 
```

我希望在终端上对“**整数除法或模零**”进行着色或突出显示，以便我可以快速从长回溯中选择它（仅限 Linux）。理想情况下，我不想为每个异常编写一个自定义类，而是以某种方式捕获和格式化所有类型。

**编辑：**评论中链接的问题提供了有关如何使用*外部*软件解决问题的示例，但我对内部 Python 解决方案感兴趣。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-08T16:09:05.200

您可以将自定义函数分配给[`sys.excepthook`处理程序](http://docs.python.org/2/library/sys.html#sys.excepthook)。只要有*未处理*的异常（即退出解释器的异常），就会调用该函数。

```
def set_highlighted_excepthook():
    import sys, traceback
    from pygments import highlight
    from pygments.lexers import get_lexer_by_name
    from pygments.formatters import TerminalFormatter

    lexer = get_lexer_by_name("pytb" if sys.version_info.major < 3 else "py3tb")
    formatter = TerminalFormatter()

    def myexcepthook(type, value, tb):
        tbtext = ''.join(traceback.format_exception(type, value, tb))
        sys.stderr.write(highlight(tbtext, lexer, formatter))

    sys.excepthook = myexcepthook

set_highlighted_excepthook() 
```

此版本使用该[`pygments`库](http://pygments.org/)将回溯文本转换为使用 ANSI 着色格式的格式，然后再将其写入`stderr`.

有人把它变成了一个可以检测终端支持并让你设置 pygments 样式的项目，请参阅[`colored-traceback.py`](https://github.com/staticshock/colored-traceback.py).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-05T18:40:57.740

使用 IPython 模块找到了另一种方法，这可能是每个人都已经安装的依赖项：

```
from IPython.core.ultratb import ColorTB
c = ColorTB()
exc = sys.exc_info()
print(''.join(c.structured_traceback(*exc))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T15:48:29.083

看看[colorama](http://pypi.python.org/pypi/colorama)（或任何其他着色）模块。然后你可以用以下方式包装你的整个应用程序：

```
import traceback
from colorama import Fore, init
init( )

try:
    // your app
except Exception:
    print Fore.RED + traceback.format_exc( ) + Fore.RESET
    // possibly raise again or log to db 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-14T14:46:23.037

这采用了@freakish 共享的解决方案并使着色成为异常的一部分，而不是要求用户为每个异常消息添加颜色。显然，它只适用于自定义异常，所以它可能不是 OP 想要的。

```
from colorama import Fore, init
init()

class Error (Exception):
    def __init__ (self, message):
        super().__init__(Fore.RED + message)

class BadConfigFile (Error):
    pass

raise BadConfigFile("some error message") 
```

这将以红色打印带有“一些错误消息”的回溯。将“错误”作为基类意味着您可以创建其他将全部继承消息颜色的异常。

# php - 如何通过电子邮件向所有用户发送特定于用户的信息。

> ID：14775917
> 
> 赞同：0
> 
> 时间：2013-02-08T15:30:29.230
> 
> 标签：php, mysql, loops, for-loop

我为一个网站建立了一个竞赛系统，它的工作原理是用户登录，根据现实生活中的事件（特定对象的销售）提交选票，然后在月底进行随机选票被选中，并且该选票的所有者是获胜者。

我被要求创建一个脚本，该脚本将通过电子邮件向数据库中的所有用户发送他们在系统中的当前选票数量。

我当前的登录/注册系统是一个经过大量编辑的 HTML-Form-Guies [Simple PHP Registration System](http://www.html-form-guide.com/php-form/php-registration-form.html)版本。

我知道我想做的伪代码。

一步一步，所需的方法是这样的。

调用 EmailUsersTotalEntries，用数据库中的所有用户填充一个数组，选择数组中的第一个条目，用户 1，找到 itemold 列中用户 ID 为 1 的所有行的总和。然后向用户发送一封电子邮件从 userid = 1 的选票中选择 sum(itemsold) 的结果；到用户 1。然后循环转到用户 2 并执行相同的操作，直到它向数据库中的每个用户发送了一封电子邮件。

以下是我编写的或来自登录系统的一些方法，它们将用于完成此操作。我唯一的问题是我不知道如何创建一个循环，以便它从用户 1 开始，然后一直到用户 2，我不知道如何在数据库中查询数据库/循环中任何用户的 user_id目前正在开启。

方法如下： 这是主方法，它会调用子方法来收集用户，然后发送实际的电子邮件。**我不确定 TotalEntries 是否应该是一个数组**

```
 function EmailTotalEntries()
{
    if(empty($_POST['email']))
    {
        $this->HandleError("Email is empty!");
        return false;
    }
    $user_rec = array();
    if(false === $this->GetUsers($user_rec)) 
    {
        return false;
    }
    **/* $TotalEntries = array();  */**
    if(false === $this->GetTotalEntriesForEmail($user_rec, $TotalEntries)
    {
        return false;
    }

    //At this point, I have an array, user_rec, populated with all the data from my users table, and an array $TotalEntries that will have nothing since its trying to pull from user_rec, which usually is one user but right now is all of the users.
   //This is where I know I should have already started the loop, so chosen the first element in user_rec, and applied the GetTotalEntriesForEmail method, then the SendUserEmail method, then gone to the top of the loop and gone to the second user_rec element and repeat.

    if(false === $this->SendUsersEmail($user_rec, $TotalEntries))  
    {
        return false;
    }
    return true;
} 
```

这是收集用户的方法

```
function GetUsers(&$user_rec)
{
    if(!$this->DBLogin())
    {
        $this->HandleError("Database login failed!");
        return false;
    }   

    $result = mysql_query("Select * from $this->tablename",$this->connection);  

    $user_rec = mysql_fetch_assoc($result);

    return true;
} 
```

这是我为已登录的用户获取 TotalEntries 的方法（检查他的控制面板以查看他有多少条目）

```
function GetTotalEntries()
{
    if(!$this->CheckLogin())
    {
        $this->HandleError("Not logged in!");
        return false;
    }

    $user_rec = array();
    if(!$this->GetUserFromEmail($this->UserEmail(),$user_rec))
    {
        return false;
    }
    $qry = "SELECT SUM(itemsold) AS TotalEntries FROM entries WHERE user_id = '".$user_rec['id_user']."'";
    $result = mysql_query($qry,$this->connection);
    while($row = mysql_fetch_array($result))
                      {                         
     echo    $row['TotalEntries'];
                      }

} 
```

这就是我认为需要对其进行调整以在电子邮件中工作的方式。

```
function GetTotalEntriesForEmail($user_rec, &$TotalEntries)
{
     if(!$this->DBLogin())
    {
        $this->HandleError("Database login failed!");
        return false;
    }  

    $qry = "SELECT SUM(itemsold) FROM entries WHERE user_id = '".$user_rec['id_user']."'"; //$user_rec['id_user'] should the be id of the user the loop is currently on.
    $result = mysql_query($qry,$this->connection);
    $TotalEntries = mysql_fetch_assoc($result);
            return true;

} 
```

这是实际的电子邮件

```
function SendUsers($user_rec, $TotalBallots)
{
    $email = $user_rec['email']; //should be the for the user the loop is currently on.

    $mailer = new PHPMailer();

    $mailer->CharSet = 'utf-8';

    $mailer->AddAddress($email,$user_rec['name']); //user the loop is currently on.

    $mailer->Subject = "Total Ballots to Date";

    $mailer->From = $this->GetFromAddress();

    $mailer->Body ="Hello ".$user_rec['name']."\r\n\r\n". //Same thing
    "To date you have: "/* .$TotalBallots. */" ballots.\r\n" //Same thing

    if(!$mailer->Send())
    {
        return false;
    }
    return true;
} 
```

我不太擅长 PHP，这整件事对我来说是一次学习经历，因此非常感谢您的帮助。

如果我还不清楚，也许用另一种语言举一个例子会更清楚，所以这就是我想做的事情，但是在java中

```
for(x = 0; x <= user_rec.length; x++)
{
 int ballots = getTotalEntriesForUser(x); 
 sendEmailToUser(ballots)
} 
```

如果我还不够清楚，请告诉我，我会尽力澄清。

如何将上述代码与一个循环结合起来，该循环将向所有用户逐一发送一封电子邮件，每封电子邮件对发送到的用户都是唯一的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:58:24.147

你的函数是类的一部分吗？您不一定需要他们这样做。这是我的建议，您可以根据需要将其转换为函数或类。此外，您可能需要考虑研究和使用 MySQLi，并利用它使用的类。再次，所有只是我的建议。

在不知道您的表结构的情况下，我只是对此进行猜测。

```
$sql = mysql_query("SELECT u.*,
                           u.user_id AS user,
                           COALESCE(SUM(e.itemssold), 0) AS total_items
                    FROM users u
                    LEFT JOIN entries e ON e.user_id = u.user_id
                    GROUP BY u.user_id");

while($row = mysql_fetch_array($sql))
{
    $user  = $row['user'];
    $email = $row['user_email'];
    $items = $row['total_items'];

    yourEmailFunction($email, $items);
} 
```

这会根据匹配的用户 ID 从您的用户表和条目表中提取信息。它将用户表中的用户 ID 设置为用户，因此您以后不必尝试区分两者。要了解 COALESCE 功能，[请阅读此处](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)。while() 函数将遍历它从该 SQL 语句中提取的每个用户。

这尚未以任何方式进行测试，但这基本上就是您所需要的。只需传递用户的电子邮件和项目总数，然后编写您的电子邮件函数以将该信息发送到该电子邮件地址。

但是，如果您知道您的函数可以正常工作，并且想要使用 for 循环，例如您在 Java 中提供的循环，那么您可以使用 PHP 编写它。

```
for($x = 0; $x <= count($user_rec); $x++)
{
    $ballots = getTotalEntriesForUser($x);
    sendEmailToUser($ballots);
} 
```

# sql - 多值依赖任务

> ID：14775918
> 
> 赞同：0
> 
> 时间：2013-02-08T15:30:32.950
> 
> 标签：sql, database, multivalue

我们有 R(A,B,C)

1.  1 2 3
2.  1 3 2
3.  1 2 2
4.  3 2 1
5.  3 2 3

问题：R 的这个实例不满足以下哪个多值依赖**项**？

1.  BC ↠ A
2.  BC ↠ C
3.  C↠A
4.  ✔ A ↠ B

正确答案是 4 但为什么我不明白请解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:43:16.503

它不满足语句 4，因为对于 A 和 B 的每个唯一组合，您必须具有与 C 匹配的行。

要使语句 4 有效，您的表中需要一个 1 3 3（因为您有一个 1 2 3）。

祝你好运。

# android - 您可以从您的应用程序链接以打开 Android 原生消息收件箱吗？

> ID：14775919
> 
> 赞同：0
> 
> 时间：2013-02-08T15:30:36.690
> 
> 标签：android

我们有一个应用程序以比大多数运营商更低的速率处理向收件人发送 SMS。但是，由于权限限制，我们将无法显示传入的短信。

因此，我们有一个想法，如果我们可以轻松地从我们的应用程序链接以打开本机收件箱，以便相对轻松地访问您正在进行的对话。

有谁知道是否可以链接到 Android 原生收件箱，最好链接它，以便按“返回”将用户带回应用程序？一个额外的问题，如果这是可能的，那么我们是否也可以在打开本机收件箱时请求显示“按‘返回’返回应用程序”之类的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:38:20.740

您可以通过 拨打短信框`Intent`，但我认为您可以做得更好。您可以从 SMS/MMS 中获取列表，并在您自己的应用程序中做您想做的事情。看看[这个问题。](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android)

# javascript - 获取jQuery或Javascript中某个属性的最高值和最低值

> ID：14775921
> 
> 赞同：10
> 
> 时间：2013-02-08T15:30:43.720
> 
> 标签：javascript, jquery, html, loops

我有以下div：

```
<div id="2" class="maindiv">test</div>
<div id="5" class="maindiv">test</div>
<div id="3" class="maindiv">test</div>
<div id="1" class="maindiv">test</div> 
<div class="maindiv">test</div>     
<div id="4" class="maindiv">test</div> 
```

如何在 jQuery 或 Javascript 中获取最高 id (5) 和最低 id (1)？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-08T15:34:33.057

为此，您可以创建一个包含所有`id`值的数组，然后用于`Math`获取最高/最低值：

```
var ids = $('.maindiv[id]').map((i, el) => parseInt(el.id, 10)).get();
var lowest = Math.min.apply(Math, ids); // = 1
var highest = Math.max.apply(Math, ids); // = 5

console.log(`${lowest} => ${highest}`);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="2" class="maindiv">test</div>
<div id="5" class="maindiv">test</div>
<div id="3" class="maindiv">test</div>
<div id="1" class="maindiv">test</div>
<div class="maindiv">test</div>
<div id="4" class="maindiv">test</div>
```

请注意，`[id]`属性选择器是必需的，否则`0`假定为缺失值。

如果需要 IE 支持，则需要使用匿名函数而不是箭头函数：

```
var ids = $(".maindiv[id]").map(function() {
  return parseInt(this.id, 10);
}).get(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:34:12.230

```
var min = Number.MAX_VALUE, max = Number.MIN_VALUE;
$(".maindiv").each(function () {
    var id = parseInt(this.id, 10);
    if (id > max) {
        max = id;
    }
    if (id < min) {
        min = id;
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T15:37:58.337

```
function minMaxId(selector) {
  var min=null, max=null;
  $(selector).each(function() {
    var id = parseInt(this.id, 10);
    if ((min===null) || (id < min)) { min = id; }
    if ((max===null) || (id > max)) { max = id; }
  });
  return {min:min, max:max};
}

minMaxId('div'); // => {min:1, max:5} 
```

[http://jsfiddle.net/qQvVQ/](http://jsfiddle.net/qQvVQ/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T15:33:16.703

创建一个全局变量并将其与`Math.max`循环内的每个元素进行比较。

```
var maxval = Number.MIN_VALUE,
    minval = Number.MAX_VALUE;

$('div').each(function () {
    var num = parseInt(this.id, 10) || 0; // always use a radix
    maxval = Math.max(num, maxval);
    minval = Math.min(num, minval);
});

console.log('max=' + maxval);
console.log('min=' + minval); 
```

[http://jsfiddle.net/mblase75/gCADe/](http://jsfiddle.net/mblase75/gCADe/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T15:34:54.493

您应该为此使用 data 而不是 id 。

```
<div data-value="2" class="maindiv">test</div>
<div data-value="5" class="maindiv">test</div>
<div data-value="3" class="maindiv">test</div>
etc. 
```

编辑：我缩短了我的答案，以支持 Rory McCrossan 上面接受的答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T15:41:18.793

```
var valArray = [];
$('.maindiv').each(function(){
    valArray.push(parseInt($(this).attr('id'), 10));
})
valArray.sort(function(a, b) { return a - b })

valArrayp[0] // lowest
valArrayp[valArrayp.length - 1] // highest` 
```

没测试过，应该可以

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-08T15:48:10.970

您可以使用排序功能来做到这一点。

```
function arrayify(obj){
    return [].slice.call(null,obj);
}
var all = arrayify(document.querySelectorAll('div[id]'));
var max = all.sort().pop();
var min = all.sort().reverse().pop(); 
```

这比使用 jQuery 更容易

# apache - 通过 Apache 而不是 tomcat 显示信息

> ID：14775926
> 
> 赞同：0
> 
> 时间：2013-02-08T15:31:01.727
> 
> 标签：apache, tomcat

我在 Apache 上有一个带有 tomcat 的应用程序显示，我想显示一些来自 apache 而不是 tomcat 的信息以提高效率。所以我在玩这个`httpd.conf`文件，这是我的 conf 文件的一部分：

```
<VirtualHost info.com:80>
LimitRequestFieldSize 32768
ServerName info.com
ServerRoot "E:/Inetpub/Int/catalina_int/Apache2.2"
DocumentRoot "E:/Inetpub/Int/catalina_int/Apache2.2/htdocs"
SetEnvIf Request_URI "/app/*.cache.html" no-jk 

<Directory />
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
<Directory "E:/Inetpub/Int/catalina_int/kerberos-tomcat-6.0.26/webapps/appWeb">
    Options Indexes FollowSymLinks 
    AllowOverride None 
    Order allow,deny 
    Allow from all 
</Directory>
<Directory "E:/Inetpub/Int/catalina_int/kerberos-tomcat-6.0.26/webapps/appWeb/app">
    Options Indexes FollowSymLinks 
    AllowOverride None 
    Order allow,deny 
    Allow from all 
</Directory>
RewriteLog "E:/Inetpub/Int/catalina_int/Apache2.2/logs/apache.rewrite.log" 
JkMount /* appweb

JkUnMount /appWeb/app/*.cache.html appweb
JkUnMount /appWeb/app/resources/flash/* appweb
JkUnMount /appWeb/app/resources/flash_en/* appweb 
```

在 Apache 的日志中，当 Apache 尝试加载文件 *.cache.html 时出现错误 404。文件存在且路径正确。我做错了什么？

编辑：感谢您对 Am​​blyopus 的回复。你说得对，这不是我想做的。实际上，我可以通过将 DocumentRoot 直接指向 tomcat 的 webapps，删除 ，并仅使用 JkMount 来解决我的问题。

```
<VirtualHost info.com:80>
LimitRequestFieldSize 32768
ServerName info.com
ServerRoot "E:/Inetpub/Int/catalina_int/Apache2.2"
DocumentRoot "E:/Inetpub/Int/catalina_int/kerberos-tomcat-6.0.26/webapps"
RewriteLog "E:/Inetpub/Int/catalina_int/Apache2.2/logs/apache.rewrite.log" 

JkMount /appWeb/app/*.jsp appweb 
     JkMount /appWeb/app/*Service appweb #servlet

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:53:56.770

SetEnvIf 需要一个正则表达式。你现在有 /app/*.cache.html 这基本上意味着它搜索 /app，然后是任意数量的 /，然后是任何字符，然后是缓存，然后是任何字符，然后是 html。不是你想要的吗？

你想要像 ^/app/.*.cache.html 这样的东西，这意味着 uri 必须以 /app/ 开头，然后有任意数量的字符，后跟 .cache.html

最好对正则表达式进行一些研究，因为许多指令希望您使用它们。

# sql-server - 对于小型数据库站点，我应该选择 SQL CE 还是 SQL Server

> ID：14775928
> 
> 赞同：2
> 
> 时间：2013-02-08T15:31:03.680
> 
> 标签：sql-server, asp.net-mvc-3, entity-framework-4.1, sql-server-ce-4

我有一个网站，产品不超过 100 个，如果网站增长，在一段时间内会增长到 1000-5000 个。

我喜欢 SQL CE，因为它在部署和备份方面没有麻烦。我唯一担心的是我会从中得到的表现。我的网站在数据库中有 5 个表，我正在使用实体框架，所以很多查询进进出出。

我应该在一开始就使用 SQL 服务器，还是 SQL CE 的性能足以满足中小型网站的需求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:33:34.730

我当然会选择 SQL Server。如果您的预算不多，如果您不做任何花哨的事情，我会推荐 Express 版本：http: [//www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)

我们将 SQL Express 用于我们的开发环境，其中包含 20 多个表和近 100000k 行，我们从未遇到任何性能问题！

如果 SQL Express 不可用，我仍然会选择 SQL Server，因为没有计划新版本的 SQL CE，而且它不支持存储过程、XML 数据类型、ODBC。此外，SQL CE 针对所有应用程序共享相同内存池的架构进行了优化，而小型网站数据库并非如此。

# javascript - 当我尝试在 ExtendScriptTK 中调试 indesign 脚本时，app.documents 未定义，如果我从 indesign 运行脚本，它可以工作

> ID：14775929
> 
> 赞同：2
> 
> 时间：2013-02-08T15:31:07.830
> 
> 标签：javascript, adobe-indesign

我不知道为什么没有人遇到这个问题，但是在 indesign cs6 中，当我尝试调试它时，它没有附加到当前打开的文档中，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T23:40:12.583

从 ESTK 源窗口左上角的“目标”下拉列表中选择 InDesign，它可能以 ExtendScript 本身为目标。

要自动实现相同的效果，请将以下内容用作脚本的第一行：

```
#target "indesign" 
```

# javascript - Html5 条形图 - 条形高度问题

> ID：14775939
> 
> 赞同：0
> 
> 时间：2013-02-08T15:31:24.673
> 
> 标签：javascript, html, canvas

我有一个由矩形组成的条形图。

我调用了一个创建矩形并将其添加到 html 5 画布的函数。绘制矩形的容器具有高度。假设这个高度是200

```
AddRectangle(xPos,yPos,height,width) 
```

所以我称之为

```
AddRectangle(0,0,100,20)
AddRectangle(30,0,110,20)
AddRectangle(60,0,120,20)
AddRectangle(90,0,150,20) 
```

这将添加矩形没有问题。我遇到的问题是，如果矩形的高度非常小，即

```
AddRectangle(0,0,1,20)
AddRectangle(30,0,4,20)
AddRectangle(60,0,5,20)
AddRectangle(90,0,6,20) 
```

然后它们会显得很小，很难区分哪个是最高值。是否有一些公式可以用来获取矩形的高度与矩形容器的高度成比例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:59:33.627

得到公式。我必须从最大数字中计算出数字的百分比。最大数量为 100%

计算出最大的数字

```
 for (var i=0; i<frequincies.length; i++) {
            if (parseInt(frequincies[i]) > parseInt(maxValue)) maxValue = frequincies[i];
        } 
```

从最高数字中获取其他数字的百分比

```
for (var i=0; i<frequincies.length; i++) {
    var percentage = (parseInt(frequincies[i])) / maxValue;
    percentages.push(percentage);
    } 
```

然后我可以在矩形区域的高度内获得正确的条形高度

```
percentages[i] * chartHeight 
```

# android - Memory-Leaks Image-Gallery Android - 其他应用程序如何处理它？

> ID：14775940
> 
> 赞同：1
> 
> 时间：2013-02-08T15:31:25.347
> 
> 标签：android, bitmap, gallery, lru, android-lru-cache

我正在尝试实现一个图像库，它应该显示〜 5-15 个较小的图像和一个“当前选择的”更大的图像。

它看起来像：[http ://www.mobisoftinfotech.com/blog/wp-content/uploads/2012/06/galleryDemo.png](http://www.mobisoftinfotech.com/blog/wp-content/uploads/2012/06/galleryDemo.png)

我查了很多资源，现在决定使用位图缓存（lru-cache）（感谢这个论坛的人！）。

我目前没有内存泄漏，但我对这个解决方案不满意，因为每次滚动时，都会从缓存中删除一些图像，我必须重新加载它们......所以用户必须等待重新加载图像......每次滚动到另一边时等待 0.5 - 1 秒真的很烦人......

```
public static WeakReference<Bitmap> getBitmap(String imageName, int width,
        int height) {
    if (!imageName.contains(".jpg")){
        imageName += ".jpg";
    }
    String pathToImage = getPathToImage(imageName);
    Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(pathToImage, options);

    /*
     * Calculate inSampleSize
     */
    options.inSampleSize = calculateInSampleSize(options, width, height);

    /*
     * Removes the alpha-channel from bitmap (not necessary)
     */
    options.inPreferredConfig = Bitmap.Config.RGB_565;

    /*
     * Decode bitmap with inSampleSize set
     */
    options.inJustDecodeBounds = false;

    WeakReference<Bitmap> scaledBitmap = new WeakReference<Bitmap>(
            BitmapFactory.decodeFile(pathToImage, options));
    return scaledBitmap; 
```

我是否有可能在获取图像时出错？目前，我将为单选图像使用 320x480 分辨率，为底部列表使用 64x64 分辨率...

真的很奇怪，不管图像的分辨率有多大，lru-cache 仍然会删除一些图像，即使我只选择 64x64 图像......我可能做错了什么lru缓存？

以下代码显示了我的实现：

```
 /*
     * Bitmaps which should be shown
     */
    mMemoryCache = (BitmapCache) getLastNonConfigurationInstance();
    if (mMemoryCache == null) {
        // Get max available VM memory, exceeding this amount will throw an
        // OutOfMemory exception. Stored in kilobytes as LruCache takes an
        // int in its constructor.
        final int maxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024);

        // Use 1/4th of the available memory for this memory cache.
        final int cacheSize = maxMemory / 2; // TODO default 8

        mMemoryCache = new BitmapCache(cacheSize);
    } 
```

和类位图缓存：

```
public BitmapCache(int maxSize, Resources resources) {
    super(maxSize);
    this.resources = resources;
}

@Override
protected int sizeOf(String key, AsyncDrawable value) {
    if (value.getBitmap() != null) {
        /* 
         * The cache size will be measured in kilobytes rather than
         * number of items.
         */
        return value.getBitmap().getRowBytes()
                * value.getBitmap().getHeight() / 1024;
    }
    return super.sizeOf(key, value);
}

public void loadBitmap(Picture picture, ImageView mImageView,
        ImageResolution resolution) {
    if (cancelPotentialWork(picture.getFileName(), //  + resolution.name()
            mImageView)) {
        final BitmapWorkerTask task = new BitmapWorkerTask(this,
                mImageView, picture, resolution);
        final AsyncDrawable asyncDrawable = new AsyncDrawable(resources,
                null, task);
        mImageView.setImageDrawable(asyncDrawable);
        task.execute();
    }
} 
```

非常感谢你 ：（

更多代码：BitmapWorkerTask：

```
@Override
protected Bitmap doInBackground(Void... params) {
    /*
     *  Decode image in background.
     */
    final Bitmap bitmap = FileHandler.getBitmap(
            picture.getPictureId() + "", resolution).get();
    return bitmap;
}

@Override
protected void onPostExecute(Bitmap bitmap) {
    /*
     *  Once complete, see if ImageView is still around and set bitmap.
     */
    if (isCancelled()) {
        bitmap = null;
    }

    if (imageViewReference != null && bitmap != null) {
        final ImageView imageView = imageViewReference.get();

        if (imageView != null) {
            final Drawable drawable = imageView.getDrawable();
            if (drawable instanceof AsyncDrawable) {
                final AsyncDrawable asyncDrawable = (AsyncDrawable) drawable;
                final BitmapWorkerTask bitmapWorkerTask = asyncDrawable
                        .getBitmapWorkerTask();
                if (this == bitmapWorkerTask && imageView != null) {
                    imageView.setImageBitmap(bitmap);
                    bitmapCache.addBitmapToMemoryCache(
                            picture.getFileName(), // + resolution.name()
                            asyncDrawable);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:50:47.130

惊人的！我发现了为什么它不能工作的错误。问题出在我的 LruCache 中，它存储了 AsyncDrawables，这完全是愚蠢的。每次调用LruCache中的sizeOf，asyncdrawable里面的bitmap都是null，所以他只返回super.sizeOf(key, value)。

现在它就像一个魅力！:)

感谢您的帮助！

# javascript - 你如何将数组中的每个数字除以javascript中的变量？

> ID：14775942
> 
> 赞同：0
> 
> 时间：2013-02-08T15:31:30.153
> 
> 标签：javascript

我需要一种简单的方法来将数组中的所有数字（包含在对象中）除以 javascript 中的变量（没有 jquery 或其他库）：

```
var divisor = 16;
var array = [{"x":0,"y":16},{"x":16,"y":32},{"x":32,"y":48}]; 
```

预期结果：

```
[{"x":0,"y":1},{"x":1,"y":2},{"x":2,"y":3}]; 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:34:09.580

这应该为你做：

```
var divisor = 16;
var array = [{"x":0,"y":16},{"x":16,"y":32},{"x":32,"y":48}];

for(var i = 0, length = array.length; i < length; i++){
    array[i] = {'x':array[i].x/divisor,'y':array[i].y/divisor};
} 
```

如果您将来可能扩展对象，您可能希望这样做，而不是：

```
for(var i = 0, length = array.length; i < length; i++){
    array[i].x /= divisor;  // `a[i].x /= d` is shorthand for `a[i].x = a[i].x / d`
    array[i].y /= divisor;
} 
```

这样做的好处是它不会覆盖`array[i]`，从而节省可能的其他属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:35:42.667

另一个解决方案，使用[`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)和回调：

```
var divisor = 16;
var array = [{"x":0,"y":16},{"x":16,"y":32},{"x":32,"y":48}];

array = array.map(function(v){
  return {x: v.x / divisor, y: v.y / divisor};
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T15:35:58.717

```
for (var i = 0; i < array.length; i++) {
    array[i]["x"] /= divisor;
    array[i]["y"] /= divisor;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T15:40:29.620

这里的鸿沟很深。

```
var divideBy = function(object, divider) {
    if (typeof(object) == 'number') return object/divider;
    for (var i in object) {
        if (object.hasOwnProperty(i)) {
            object[i] = divideBy(object[i], divider);
        }
    }
    return object;
}

var obj = [{a: 16, b: 32}, {c: 0, d: 48, e: 160}];
console.log(divideBy(obj, 16)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T15:37:21.000

在这里，它是一个函数，因此您可以重复使用它。它不限于每个对象只有 2 个变量。

```
function divideArray(array, divisor) {
    var i = array.length, a, k;
    while (i) { // loop over each item in array
        a = array[--i];
        for (k in a) { // loop over each key in object
            if (a.hasOwnProperty(k)) { // ignore inherited keys
                a[k] = a[k] / divisor; // calculate
            }
        }
    }
    return array;
}

// use with your example
var divisor = 16;
var array = [{"x":0,"y":16},{"x":16,"y":32},{"x":32,"y":48}];
array = divideArray(array, divisor); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T15:35:17.923

尝试这个

```
 var divisor = 16;
        var array = [{"x":0,"y":16},{"x":16,"y":32},{"x":32,"y":48}];
        var i=0;
        for(i=0;i<array.length;i++)
        {
            array[i]["y"]=array[i]["y"]/divisor;
            array[i]["x"]=array[i]["x"]/divisor;
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-16T14:43:44.763

```
var divisor = 16;
    var array = [{"x":0,"y":16},{"x":16,"y":32},{"x":32,"y":48}];
    var i=0;
    for(i=0;i<array.length;i++)
    {
        array[i]["y"]=array[i]["y"]/divisor;
        array[i]["x"]=array[i]["x"]/divisor;
    } 
```

# jquery - ajaxForm(malsup) 仅提交 csrf_token 而忽略表单中的其余输入字段

> ID：14775948
> 
> 赞同：0
> 
> 时间：2013-02-08T15:32:07.083
> 
> 标签：jquery, django, ajaxform

我正在尝试使用 ajaxForm 插件向 django Web 服务器应用程序提交表单。

# 问题

单击 addProductBtn 时，仅将以下内容发送到服务器： `csrfmiddlewaretoken=cbREYGKpMgjBDyTvQ5GcB6xYbLZFhHH2`

所有其他输入字段都被忽略。我错过了什么？

## // easy_add_product.js

```
function getAjaxFormOptions(){
var options = {
        target: '#result',
        beforeSubmit: showRequest,
        success: showResponse,
        dataType: 'json'
};
return options;
}

function showRequest(formData, jqForm, options) {
var queryString = $.param(formData);
alert('query string: ' + queryString);
return true;
}

function showResponse(...){...}

$( function() {
  var options = getAjaxFormOptions();
  $('#add-product-form').ajaxForm(options);
} ); 
```

## easy_add_product.html

```
<head>
     <script src="http://code.jquery.com/jquery-1.8.3.js" > </script>
     <script src="{{STATIC_URL}}js/plugins/jquery.form.js"></script>
     <script src="{{STATIC_URL}}js/easy_add_product.js"> </script>
  </head>
<form id="add-product-form" method="post" action='/pi/product/add_ajax' enctype="multipart/form-data">
  {% csrf_token %}
  <fieldset id="add-product-fs"> 
  <legend> Product Information </legend>
  <ul>   
<li>
     <label for='name'>Product Name <span class='required'>*</span> </label>
 <input type='text' required title='Product name is required' id='name' />
    </li>
     <li>
<label for='category'> Product Category</label>
    <input type='text' id='category' placeholder='dts_4ch' />
    </li> </ul>
   <input type='submit' id="addProductBtn" class="yui3-button formSubmitBtn"  value="Submit" />
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:33:28.763

`input`s 必须有`name`s 才能提交。

例如：

```
<input type='text' required title='Product name is required' id='name' name="name" /> 
```

# java - Hibernate中与复合键的多对多关系

> ID：14775949
> 
> 赞同：1
> 
> 时间：2013-02-08T15:32:08.970
> 
> 标签：java, hibernate, mapping, composite-key

有没有办法使用`@JoinTable`注释，通过两个字段连接每个表？以下是示例表：

```
+----------------+  +----------------------------------+  +----------------+      
| example_table  |  | example_table_to_some_type_table |  | some_type_table|
+----------------+  +----------------------------------+  +----------------+   
|example_table_id|  |example_table_id                  |  |some_type_id    |
|another_id      |  |some_type_id                      |  |another_id      |
|...             |  |another_id                        |  |...             |
|other columns   |  +----------------------------------+  |other columns   |
|...             |                                        |...             | 
+----------------+                                        +----------------+ 
```

对于多对一的情况，它看起来像这样：

```
@ManyToOne
@JoinColumns({ @JoinColumn(name = "some_type_id", 
    referencedColumnName = "some_type_id", 
    insertable = false, updatable = false),
               @JoinColumn(name = "another_id", 
    referencedColumnName = "another_id", 
    insertable = false, updatable = false) })
private SomeType someType; 
```

但是多对多关系呢？我尝试了以下方法，但没有奏效：

```
@ManyToMany(targetEntity = SomeType.class)
@JoinTable(name = "example_table_to_some_type_table", 
    joinColumns = { @JoinColumn(name = "example_table_id"),  
                    @JoinColumn(name = "another_id") }, 
    inverseJoinColumns = { 
                    @JoinColumn(name = "some_type_id"),  
                    @JoinColumn(name = "another_id") })
private Set<SomeType> someTypeSet; 
```

我收到以下错误：

```
Repeated column in mapping for collection: com.package.name.Example.someTypeSet column: another_id 
```

我应该看什么，这个映射的哪一部分不正确？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:08:49.240

您的联接表需要 4 列。2 引用 PK 列，`example_table`2 其他引用 PK 列`some_type_table`。

所以它应该看起来像

```
+----------------+  +----------------------------------+  +----------------+      
| example_table  |  | example_table_to_some_type_table |  | some_type_table|
+----------------+  +----------------------------------+  +----------------+   
|example_table_id|  |example_table_id                  |  |some_type_id    |
|another_id      |  |example_table_another_id          |  |another_id      |
|...             |  |some_type_id                      |  |...             |
|                |  |some_type_table_another_id        |  |                |
|other columns   |  +----------------------------------+  |other columns   |
|...             |                                        |...             | 
+----------------+                                        +----------------+ 
```

# ruby-on-rails-3 - Rspec忽略路由约束

> ID：14775951
> 
> 赞同：0
> 
> 时间：2013-02-08T15:32:12.420
> 
> 标签：ruby-on-rails-3, rspec2

我编写了大部分 Rspec 规范，但我面临一个重要问题。我已经在我的所有路由上设置了路由约束（这本身可能是有争议的）。只有允许 Ip 地址（存储在单独的 IpAddress 模型中）的管理员才能访问我的应用程序中的某些区域。

长话短说，我想模拟或存根我的约束模型，以便我可以自由地访问我的规范内的所有内容。

我的约束如下所示：

```
class IpAddressConstraint
  def initialize
    @ips = IpAddress.select('number')
  end

  def matches?(request)
    if @ips.find_by_number(request.remote_ip).present? || Rails.env.test? #<- temporary solution
      true
    else
      if @current_backend_user.present? 
        backend_user_sign_out 
      else
        raise ActionController::RoutingError.new('Not Found')
      end
    end
  end
end

MyApp::Application.routes.draw do
  constraints IpConstraint.new do
    #all routes
  end
end 
```

我可以在 Rspec 中测试此路由约束的最佳方法是什么？目前我已经添加了一个条件，所以如果我在我的测试环境中，我可以完全跳过这些约束。如果我能以某种方式模拟这种约束会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:08:12.757

像这样的东西怎么样：

```
describe "Some Feature" do

context "from allowed ip" do
  before(:each) {IpAddress.create(number: '127.0.0.1')} 

   it "should allow access to foo" do 
     ..... 
   end

    ....
end

context "from non allowed ip" do 
  it "shouldn't allow access to foo" do 
     ..... 
  end
end 
```

然后，您可以将创建的 IP 地址提取到辅助模块或函数中，尤其是在您需要进行更复杂的设置时。如果您一直希望它在那里，您可以将它添加到您的 spec_helper 文件配置块中以在每个/每个规范之前运行，但是您将很难测试它是否成功阻止了非授权 ip。

# c# - 运行批处理文件后如何更改 ManagementBaseObject 的“returnValue”属性？

> ID：14775953
> 
> 赞同：1
> 
> 时间：2013-02-08T15:32:17.587
> 
> 标签：c#, .net, command-line, wmi, win32-process

情况是：我必须使用 ManagementBaseObject 运行批处理文件并获取其返回值（例如，如果命令正确执行，则为 0，如果出现问题，则为 1）。我尝试使用“EXIT”命令设置错误级别代码，但无论我将什么作为退出代码，“returnValue”属性始终为 0。有没有办法让批处理文件影响该属性？
这是代码（*而不是调用批处理文件，我只是执行一个简单的命令行以使其更易于在此处发布，但想法是相同的*）：

```
ManagementClass processClass =  new ManagementClass("Win32_Process");
try
{
    ManagementBaseObject inp = processClass.GetMethodParameters("Create");
    inp["CommandLine"] = @"cmd /c exit /B 1";
    ManagementBaseObject outp;
    outp = processClass.InvokeMethod("Create", inp, null);
    Console.WriteLine(outp["returnValue"]);
}
catch (Exception e)
{
    Console.WriteLine(e.Message);
} 
```

**...但输出始终为 0！我想看到的是 1，这是我作为退出代码输入的。有可能这样做吗？** 我知道我“可以”使用 Process 类使其工作，但使用 ManagementBaseObject 是我能找到在远程机器上运行批处理文件的唯一方法。

提供一点上下文：
我有这个批处理文件位于远程机器上，我必须从我的本地机器上运行该文件。我目前正在使用类 ManagementScope 和 ConnectionOptions 连接到提供我的凭据的远程计算机。之后，我创建了一个与远程连接关联的 ManagementClass，ManagementPath 设置为“Win32_Process”。然后，我使用 ManagementBaseObject 运行批处理文件并获取其返回值。
如果有人知道任何其他方法可以做到这一点，请告诉我，我愿意接受建议。
谢谢！

# iphone - 在 iPhone 应用程序中设置 EKAlarm

> ID：14775954
> 
> 赞同：0
> 
> 时间：2013-02-08T15:32:21.740
> 
> 标签：iphone, objective-c, ios6, xcode4.5

我正在尝试使用我的音频文件从应用程序设置警报，但收到很多消息，例如

**使用未声明的标识符 EKAlarm**

**Unknown receiver EKEvent 你是说 UIEvent**

**成员引用基类型“int”不是结构或联合**

```
 @property (retain, nonatomic) EKAlarm *alarm;

 @synthesize alarm;

-(void) AlarmAction:(id)sender{

EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:-300];

[EKEvent addAlarm:alarm];
alarm.soundName =
  } 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:42:10.093

是否添加了 EventKit 框架？它必须在项目属性`Link Binary With Libraries`的选项卡下添加。`Build Phases`

====== 编辑：

您应该使用 UILocalNotification （[类参考](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)）。你应该：

*   创建一个 UILocalNotification 的实例，
*   将`fireDate`属性设置为您希望警报触发的时间，
*   如果需要，将 设置`repeatInterval`为一些 NSCalendarUnit（请参见[此处](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/c_ref/NSCalendarUnit)），
*   将`soundName`属性设置为您要播放的音频文件的文件名，
*   最后，安排它`[[UIApplication sharedApplication] scheduleLocalNotification: myNotification];`

# java - 如何根据参数值在jsp文件中使用动态css

> ID：14775958
> 
> 赞同：4
> 
> 时间：2013-02-08T15:32:27.797
> 
> 标签：java, javascript, css, jsp

我有一个jsp文件，像这样：

```
<html>
<head>
     <script type="text/javascript">
       var type=<bean:write name="class" property="type" />  
     </script> 

     <style type="text/css">
        .td-type1
        {
            width: 10mm;
        }
        .td-type2
        {
            width: 20mm;
        }
    </style>
</head>
<body>
    <table>
        <tr>
            <td class="td-type1">
            </td>
        </tr>
    </table>
</body>
</html> 
```

我的问题是：如何根据类型值动态更改 css？例如，如果 type 等于 2，则 td-type2 的 css 类应该用于 td 标签。我应该使用 .properties 文件来保存所有配置或多 css 文件还是...？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T15:37:38.753

您可以将请求属性的值附加到`class`JSP 中的属性：

```
<td class="td-type<%=type%>"> 
```

附带说明一下，强烈建议不要使用 scriptlet（JSP 中的 java 代码）。请改用 JSTL 和 EL。在这个问题中，您将了解[为什么以及如何避免 JSP 文件中的 Java 代码](https://stackoverflow.com/q/3177733/851811)。

```
<td class="td-type${type}"> 
```

或者，如果您想实现类似 if-else 的构造，例如：

```
<c:choose>
    <c:when test="${type eq "2"}">
        <c:set var="varclass" value="td-type2"/>
    </c:when>
    <c:otherwise>
        <c:set var="varclass" value="td-type1"/>
    </c:otherwise>
</c:choose>
<td class="${varClass}"> 
```

# animation - 如何获取 powerpoint 形状的动画属性？

> ID：14775961
> 
> 赞同：0
> 
> 时间：2013-02-08T15:32:41.460
> 
> 标签：animation, properties, shape

```
foreach (PowerPoint.AnimationSettings animation in currentslide.Shapes)
{
     getAnimation(ref XmlTextWriter xmlcreate, PowerPoint.Shape shape, int i)
}

private void getAnimation(ref XmlTextWriter xmlcreate, PowerPoint.Shape shape, int i)
    {
        xmlcreate.WriteStartElement("animation",""); //<animation id="Animasyon8" type="Animasyon" userfriendlyindex="2">
        xmlcreate.WriteAttributeString("id", "animasyon" + shape.Id);
        xmlcreate.WriteAttributeString("type", "animasyon");
        xmlcreate.WriteAttributeString("userfriendlyindex", i.ToString());
        xmlcreate.WriteElementString("duration", "1");         //<duration>1</duration>
        xmlcreate.WriteElementString("start", "0");//<start>0</start>
        xmlcreate.WriteElementString("easing", "back");//<easing>back</easing>
        xmlcreate.WriteElementString("media", shape.Id.ToString());//<media>7</media>
        xmlcreate.WriteElementString("firstpositionx", shape.TextFrame2.MarginLeft.ToString());//<firstpositionx>206</firstpositionx>
        xmlcreate.WriteElementString("firstpositiony", shape.TextFrame2.MarginBottom.ToString());//<firstpositiony>64</firstpositiony>
        xmlcreate.WriteElementString("lastpositionx", "206");//<lastpositionx>206</lastpositionx>
        xmlcreate.WriteElementString("lastpositiony", "64");//<lastpositiony>64</lastpositiony>
        xmlcreate.WriteElementString("firstwidth",shape.Width.ToString());//<firstwidth>286</firstwidth>
        xmlcreate.WriteElementString("firstheight",shape.Height.ToString());//<firstheight>115</firstheight>
        xmlcreate.WriteElementString("firstalpha", "0");//<firstalpha>0</firstalpha>
        xmlcreate.WriteElementString("lastwidth","286");//<lastwidth>286</lastwidth>
        xmlcreate.WriteElementString("lastheight", "115");//<lastheight>115</lastheight>
        xmlcreate.WriteElementString("lastalpha", "1");//<lastalpha>1</lastalpha>
        xmlcreate.WriteEndElement();//</animation>
    } 
```

> 如何获取这些信息（firstpositionx、firstpositiony、lastpositionx、lastpositiony、firstheight、firstwidth、lastheight、lastwidth、firstalpha 和 lastalpha）以从 Powerpoint 形状插入我的 xml 文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T14:39:53.633

感谢[http://msdn.microsoft.com/en-us/library/office/aa155781(v=office.10).aspx ，我解决了我的问题](http://msdn.microsoft.com/en-us/library/office/aa155781(v=office.10).aspx)

# javascript - d3.js 将图例添加到多线系列图表

> ID：14775962
> 
> 赞同：10
> 
> 时间：2013-02-08T15:32:44.037
> 
> 标签：javascript, dataset, d3.js, visualization

如何将图例添加到多线系列图表？我试过了，但没有显示任何图例。

这里的块：

[http://bl.ocks.org/3884955](http://bl.ocks.org/3884955)

当各种级数收敛到同一点时存在缺陷，例如零。所有标签将相互叠加。而不是去这些标签，一个传统的传说会很有用。

我试着添加这个

```
var legend = svg.append("g")
.attr("class", "legend")
.attr("height", 100)
.attr("width", 100)
.attr('transform', 'translate(-20,50)');    

legend.selectAll('rect')
  .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
  .append("rect")
  .attr("x", width)
  .attr("y", function(d, i){ return i *  20;})
  .attr("width", 10)
  .attr("height", 10)
  .style("fill", function(d) { 
    return color.domain(d3.keys(d[0]).filter(function(key) { return key !== "day"; }));
  });

legend.selectAll('text')
  .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
  .append("text")
  .attr("x", width)
  .attr("y", function(d, i){ return i *  20 + 9;})
  .text(function(d) {
  return d.name;
  }); 
```

在代码末尾，键名（d.name）与我的数据格式匹配，但不显示。在某一时刻，它显示了图表右侧的所有黑框，这意味着我很接近，但我错过了一些重要的东西

任何见解表示赞赏

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T19:13:21.007

[这](http://bl.ocks.org/4745936)是您的代码的固定和重构版本。

```
 var legend = svg.selectAll('g')
        .data(cities)
        .enter()
      .append('g')
        .attr('class', 'legend');

    legend.append('rect')
        .attr('x', width - 20)
        .attr('y', function(d, i){ return i *  20;})
        .attr('width', 10)
        .attr('height', 10)
        .style('fill', function(d) { 
          return color(d.name);
        });

    legend.append('text')
        .attr('x', width - 8)
        .attr('y', function(d, i){ return (i *  20) + 9;})
        .text(function(d){ return d.name; }); 
```

您需要使用`enter()`，但`enter()`和`exit()`方法**不能**与 一起使用`datum()`。引用[d3 wiki](https://github.com/mbostock/d3/wiki/Selections#wiki-datum)

> # selection.datum([值])
> 
> 获取或设置每个选定元素的绑定数据。与 selection.data 方法不同，此方法不计算连接（因此不计算进入和退出选择）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:32:24.510

在 .datum() 函数调用之后，您似乎缺少 .enter() 。

```
legend.selectAll('rect')

  .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })

  .enter() // <======

  .append("rect")

  .attr("x", width)

  .attr("y", function(d, i){ return i *  20;})

  .attr("width", 10)

  .attr("height", 10)

  .style("fill", function(d) { 

    return color.domain(d3.keys(d[0]).filter(function(key) { return key !== "day"; })); 
```

在附加“rect”之前，您必须使用 enter() 函数，请参阅链接以获取详细说明[单击此处](http://ofps.oreilly.com/titles/9781449339739/_data.html)

# c++ - cin.clear() 问题

> ID：14775972
> 
> 赞同：0
> 
> 时间：2013-02-08T15:33:20.143
> 
> 标签：c++, iostream

我正在编写一个应该只接受整数的程序，我目前正在使用

```
int x;
cin >> x;
while(cin.fail()){
    cout << "error, please enter an integer" << endl;
    cin.clear();
    cin.ignore();
    cin >> z;
    cout << "you entered" << z << endl;
} 
```

但是，如果我输入双精度，例如 1.2，程序将忽略小数点，但将 z 的值设置为 2，并且不请求用户输入。我能做些什么来阻止这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:40:11.930

在这失控之前，这里又是一个典型的输入操作示例：

```
#include <string>   // for std::getline
#include <iostream> // for std::cin
#include <sstream>  // for std::istringstream

for (std::string line; std::cout << "Please enter an integer:" &&
                       std::getline(std::cin, line); )
{
    int n;
    std::istringstream iss(line);

    if (!(iss >> n >> std::ws) || iss.get() != EOF)
    {
        std::cout << "Sorry, that did not make sense. Try again.\n";
    }
    else
    {
        std::cout << "Thank you. You said " << n << ".\n";
    }
} 
```

它会一直询问您是否输入整数，直到您关闭输入流或以其他方式终止它（例如，通过键入 Ctrl-D）。

你会在这个网站上找到数百甚至数千种关于这个主题的变体。

# python - Return-if-value 习语（条件返回）

> ID：14775973
> 
> 赞同：1
> 
> 时间：2013-02-08T15:33:21.420
> 
> 标签：python, idioms

最近我发现自己在一些函数中使用了以下成语：

```
[...]
def validate(self):
    # Possibly do something "expensive" to calculate whether data is valid or not
    if data_is_valid:
        return ObjectOfSomeSort(validated_data)
    return False

ret = self.validate()
if ret:
    return ret
[...] 
```

但是，我觉得`ret = ...; if ret: return ret`语法有点笨拙且不合Python，而且我并不总是能够做类似的事情

```
if self.validate():
    return self.validate() 
```

因为有时我的验证函数包含一些计算量相当大的逻辑。

那么，StackOverflow，对于这类问题存在哪些 Python 习语；具体来说，我还能如何“有条件地返回”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:40:39.347

Python 中的惯用语是使用异常。

```
 class InvalidDataError(Exception):
       pass

   def get_valid_object():
       if not data_is_valid:
           raise InvalidDataError()
       return ObjectOfSomeSort(validated_data) 
```

然后使用它：

```
 try:
     valid_object = get_valid_object()
 except InvalidDataError:
     ... handle error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:36:43.260

你可以做

```
def ifloop(x):
    if x: yield x

for ret in ifloop(self.validate()):
     return ret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T17:23:42.650

您可以使用[NULL object pattern](https://stackoverflow.com/a/2503633/355230)，确保添加以下方法，以便它的实例也将被视为 False ——这将使测试更容易：

```
def __nonzero__(self) :
    return False 
```

此类对象的用处`Null`在于它们可以像几乎任何其他对象一样使用，因此在许多情况下，您不必在其余代码中检查它们，这可以假设它具有某种其他类型的有效对象。

我第一次听说这种模式是在Alex Martelli的[Python Cookbook第二版中。](http://www.amazon.com/s/?url=search-alias=stripbooks&field-keywords=0596007973&tag=technicalibra-20&link_code=wql&camp=212361&creative=380601&_encoding=UTF-8)这是配方[6.17](http://flylib.com/books/en/2.9.1.153/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:44:33.297

如果代码不需要在你之后继续`if`，我会写：

```
return self.validate() or None 
```

# angularjs - AngularJS - 使用 ng-repeat 创建无线电输入集

> ID：14775981
> 
> 赞同：63
> 
> 时间：2013-02-08T15:33:53.863
> 
> 标签：angularjs

我正在为未来的项目评估 angularjs。我需要做的一件事是通过选择适当的“页面”无线电输入来显示不同页面的“频道”信息。此外，还可以从一组“页面集”单选输入中选择页面按钮的范围。

下面的工作示例有一组 32 个频道，可见频道组是通过“set”和“page”无线电输入的组合选择的，总共有 2 * 4 个页面，每个页面有 4 个频道。

```
<!doctype html>
<html ng-app>
  <head>
    <script type="text/javascript" src="angular.js"></script>
    <script type="text/javascript">
      function Channels($scope) {
        $scope.groupSize = 4;
        $scope.pageSet = 0;
        $scope.pageNumber = 0;
        $scope.channels = [
          {"id": "Ch-001"}, {"id": "Ch-002"}, {"id": "Ch-003"}, {"id": "Ch-004"},
          {"id": "Ch-005"}, {"id": "Ch-006"}, {"id": "Ch-007"}, {"id": "Ch-008"},
          {"id": "Ch-009"}, {"id": "Ch-010"}, {"id": "Ch-011"}, {"id": "Ch-012"},
          {"id": "Ch-013"}, {"id": "Ch-014"}, {"id": "Ch-015"}, {"id": "Ch-016"},
          {"id": "Ch-017"}, {"id": "Ch-018"}, {"id": "Ch-019"}, {"id": "Ch-020"},
          {"id": "Ch-021"}, {"id": "Ch-022"}, {"id": "Ch-023"}, {"id": "Ch-024"},
          {"id": "Ch-025"}, {"id": "Ch-026"}, {"id": "Ch-027"}, {"id": "Ch-028"},
          {"id": "Ch-029"}, {"id": "Ch-030"}, {"id": "Ch-031"}, {"id": "Ch-032"}
        ];
      }
    </script>
  </head>

  <body ng-controller="Channels">
    <p>Set:
      <input type="radio" name="pageSet" ng-model="pageSet" ng-value="0">1-4</input>
      <input type="radio" name="pageSet" ng-model="pageSet" ng-value="1">5-8</input>
    </p>
    <p>Page:
      <input type="radio" name="pageNumber" ng-model="pageNumber" ng-value="0">{{pageSet * groupSize + 1}}</input>
      <input type="radio" name="pageNumber" ng-model="pageNumber" ng-value="1">{{pageSet * groupSize + 2}}</input>
      <input type="radio" name="pageNumber" ng-model="pageNumber" ng-value="2">{{pageSet * groupSize + 3}}</input>
      <input type="radio" name="pageNumber" ng-model="pageNumber" ng-value="3">{{pageSet * groupSize + 4}}</input>
    </p>
    <ul>
      <li ng-repeat="channel in channels | limitTo: groupSize * ((groupSize * pageSet) + pageNumber + 1) | limitTo: -groupSize">
        <p>{{channel.id}}</p>
      </li>
    </ul>
  </body>
</html> 
```

我的问题是如何使用`ng-repeat`. 我尝试过以下方法：

```
<p>Set: <input ng-repeat="n in [0,1]" type="radio" name="pageSet" ng-model="pageSet" ng-value="{{n}}"></p>
<p>Page: <input ng-repeat="n in [0,1,2,3]" type="radio" name="pageNumber" ng-model="pageNumber" ng-value="{{n}}"></p> 
```

看起来不错，但这些值没有绑定到相应的 pageSet/pageNumber 变量。谁能告诉我这里缺少什么？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2013-02-08T15:46:40.520

ng-repeat 创建一个子作用域，所以你必须绑定到 $parent：

这是一个小提琴：http: [//jsfiddle.net/g/r9MLe/2/](http://jsfiddle.net/g/r9MLe/2/)

样本：

```
 <p>Set:
         <label ng-repeat="n in [0,1]">
       <input type="radio" name="pageSet" ng-model="$parent.pageSet" ng-value="n" />{{n}}
         </label>
     </p>
     <p>Page: 
         <label ng-repeat="n in [0,1,2,3]">
         <input type="radio" name="pageNumber" ng-model="$parent.pageNumber" ng-value="n" /> {{n}}
         </label>
     </p> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-23T14:41:55.430

仅使用 JSON 中的值有什么问题？

```
 <table>
          <tr ng-repeat="v in partneradd.verifications">
            <td>{{v.label}}</td>
            <td>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="{{v.value}}" value="required"> Required
                </label>
              </div>
            </td>
            <td>
              <div class="radio-inline">
                <label>
                  <input type="radio" name="{{v.value}}" value="optional"> Optional
                </label>
              </div>
            </td>
          </tr>
        </table> 
```

从数据来看：

```
vm.verifications = [
{
  "label" : "Valid last line (USPS only)",
  "value" : "vll",
  "type" : "optional"
},
{
  "label" : "Domestic recipient",
  "value" : "dr",
  "type" : "optional"
},
]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-09T15:36:37.603

这是一个简单的例子。希望一切都清楚。

单选按钮中的参数`name`是强制性的（用于从组中检查一个按钮的能力）。

html:

```
<form name="myForm" ng-controller="MyCtrl">
    <p>Favorite Beatle</p>
    <ul>
        <li ng-repeat="person in people">
            <label>
                <input type="radio" ng-model="$parent.name" name="name" value="{{person.name}}" required />{{person.name}}
            </label>
        </li>
    </ul>
    <p><tt>myForm.$invalid: {{myForm.$invalid}}</tt></p>
    <button ng-disabled="myForm.$invalid">Submit</button>
</form> 
```

Javascript：

```
function MyCtrl($scope) {
    $scope.people = [{
        name: "John"
    }, {
        name: "Paul"
    }, {
        name: "George"
    }, {
        name: "Ringo"
    }];
} 
```

# c++ - BB 10 C++ 按钮点击

> ID：14775989
> 
> 赞同：0
> 
> 时间：2013-02-08T15:34:18.767
> 
> 标签：c++, qml, blackberry-10

在 QML 中，您可以执行点击事件。我正在用 C++ 编写我的 qml，但是没有 onclick 方法。

你如何让点击工作。

```
Button *btnSave = new Button();
btnSave->setText("Save");
contentContainer->add(btnSave); 
```

有没有人可以提供一个简单的例子来帮助我入门？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:33:53.107

要在 C++ 中执行此操作，您必须连接一个信号（在这种情况下，是 Button 的[clicked()](https://developer.blackberry.com/cascades/reference/bb__cascades__abstractbutton.html#clicked)到您的类的插槽）。你最好看看[这里](https://developer.blackberry.com/cascades/documentation/dev/signals_slots/)。

假设您`onSaveButtonClicked()`在标题中定义了一个名为的插槽，单击按钮时将调用该插槽：

```
public slots:
    void onSaveButtonClicked(); 
```

在您的应用程序类中，创建按钮后，您必须执行以下操作：

```
connect(btnSave, SIGNAL(clicked()), this, SLOT(onSaveButtonClicked())); 
```

当你的按钮被点击时，它会发出调用槽函数的信号。

# java - 修改队列中的顶部元素

> ID：14775993
> 
> 赞同：-1
> 
> 时间：2013-02-08T15:34:30.303
> 
> 标签：java, queue

那么如何修改队列中的第一个元素呢？

我正在处理一项任务，每次循环运行时我可能会或可能不会添加到队列中。如果添加了一些东西，它会被随机分配一个介于 1 到 5 之间的数字。

一旦添加了一些东西，我需要在每次循环运行时通过减一来更新顶部对象。一旦对象变为零，我将删除该对象。

除了如何修改/更新顶部对象之外，我几乎都已经弄清楚了。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:51:46.853

如果您使用的是`Queue<T>` [interface](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)，这是不可能的。它提供了一种将元素放入队列和从队列中取出元素的方法，但对放入或取出元素的位置没有任何限制。这留给具体的实现。对于线性排序的队列，就像您正在谈论的那样，您应该查看`Deque<T>` [interface](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)，它可以让您添加到队列的任一端并从中删除。或者，您可以使用特定的队列实现，例如`LinkedList<T>`，它恰好也是 a`List<T>`并允许您`set`在特定偏移量处访问元素。

# asp.net-mvc-4 - MVC4 StyleBundle 没有以正确的顺序呈现包

> ID：14775997
> 
> 赞同：15
> 
> 时间：2013-02-08T15:34:41.200
> 
> 标签：asp.net-mvc-4, asp.net-optimization

我正在尝试渲染一组 css 文件，但输出顺序错误。我已经尝试了解决方案@ [MVC4 Beta Minification and Bundling: Ordering files and debugging in browser](https://stackoverflow.com/questions/9657412/mvc4-beta-minification-and-bundling-ordering-files-and-debugging-in-browser)，但没有帮助。这是捆绑包：

```
bundles.Add(new StyleBundle("~/stylesheet")
    .Include("~/css/main.css")
    .Include("~/css/mvc.css")
    .Include("~/js/jquery.thickbox.css")
    .Include("~/js/jquery.rating.css")
    .Include("~/css/ProductListing.css")
    .Include("~/css/dropdown/dropdown.css")
    .Include("~/css/dropdown/dropdown.vertical.css")
    .Include("~/js/fancybox/jquery.fancybox-1.3.1.css")
    .Include("~/css/scartpopup.css")
    .Include("~/css/ShoppingCart.css")
    .Include("~/css/ceebox.css")
    .Include("~/css/tooltip.css")
    .Include("~/css/recent_blog_posts.css")
    .Include("~/css/ProductDetail.css")
    .Include("~/css/jquery-ui-1.7.3.custom.css")
    .Include("~/css/filter_box.css")
    .Include("~/css/custom_page.css")
    .Include("~/css/Checkout.css")
    .Include("~/css/CheckoutButton.css")
); 
```

这是结果，您可以看到 jquery-ui 排在首位。

```
<link href="/css/jquery-ui-1.7.3.custom.css" rel="stylesheet"/>
<link href="/css/main.css" rel="stylesheet"/>
<link href="/css/mvc.css" rel="stylesheet"/>
<link href="/js/jquery.thickbox.css" rel="stylesheet"/>
<link href="/js/jquery.rating.css" rel="stylesheet"/>
<link href="/css/ProductListing.css" rel="stylesheet"/>
<link href="/css/dropdown/dropdown.css" rel="stylesheet"/>
<link href="/css/dropdown/dropdown.vertical.css" rel="stylesheet"/>
<link href="/js/fancybox/jquery.fancybox-1.3.1.css" rel="stylesheet"/>
<link href="/css/scartpopup.css" rel="stylesheet"/>
<link href="/css/ShoppingCart.css" rel="stylesheet"/>
<link href="/css/ceebox.css" rel="stylesheet"/>
<link href="/css/tooltip.css" rel="stylesheet"/>
<link href="/css/recent_blog_posts.css" rel="stylesheet"/>
<link href="/css/ProductDetail.css" rel="stylesheet"/>
<link href="/css/filter_box.css" rel="stylesheet"/>
<link href="/css/custom_page.css" rel="stylesheet"/>
<link href="/css/Checkout.css" rel="stylesheet"/>
<link href="/css/CheckoutButton.css" rel="stylesheet"/> 
```

如何确保样式表以正确的顺序呈现？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-08T15:44:02.003

捆绑不应该以完全相同的顺序呈现 CSS 文件，它遵循不同的逻辑。如果您需要按照定义呈现它们，那么您应该创建一个自定义[IBundleOrderer](http://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer.aspx)并将其设置为所需的 Orderer：

```
public class AsDefinedBundleOrderer : IBundleOrderer
{
    public IEnumerable<FileInfo> OrderFiles(BundleContext context, IEnumerable<FileInfo> files)
    {
        return files;
    }
} 
```

和

```
var bundle = new StyleBundle("~/stylesheet");
bundle.Orderer = new AsDefinedBundleOrderer();
bundles.Add(bundle); 
```

然后这将不会对列表执行任何操作，因此 Render 将以完全相同的顺序呈现它们。

**更新默认排序**

捆绑使用的概念对`IBundleOrderer`a 中的项目进行排序`Bundle`。该类`Bundle`具有`Orderer`如下所示的属性：

```
public IBundleOrderer Orderer
{
  get
  {
    if (this._orderer == null)
      return (IBundleOrderer) DefaultBundleOrderer.Instance;
    else
      return this._orderer;
  }
  set
  {
    this._orderer = value;
    this.InvalidateCacheEntries();
  }
} 
```

因此，默认排序器实际上是 a `DefaultBundleOrderer`，直到您用自定义排序器覆盖它。

具有以下`IBundleOrderer`签名：

```
public interface IBundleOrderer
{
  IEnumerable<FileInfo> OrderFiles(BundleContext context, IEnumerable<FileInfo> files);
} 
```

这个的`DefaultBundleOrderer`实现按 对文件进行`BundleContext`排序，这里是实现的一个片段`OrderFiles`：

```
 foreach (BundleFileSetOrdering ordering in (IEnumerable<BundleFileSetOrdering>) context.BundleCollection.FileSetOrderList)
    DefaultBundleOrderer.AddOrderingFiles(ordering, (IEnumerable<FileInfo>) list, fileMap, foundFiles, result); 
```

所以不同的结果会因为这个而发生。这当然不是随机排序算法 :) 规则在`BUndleCollection`类中定义：

```
public static void AddDefaultFileOrderings(IList<BundleFileSetOrdering> list)
{
  if (list == null)
    throw new ArgumentNullException("list");
  BundleFileSetOrdering bundleFileSetOrdering1 = new BundleFileSetOrdering("css");
  bundleFileSetOrdering1.Files.Add("reset.css");
  bundleFileSetOrdering1.Files.Add("normalize.css");
  list.Add(bundleFileSetOrdering1);
  BundleFileSetOrdering bundleFileSetOrdering2 = new BundleFileSetOrdering("jquery");
  bundleFileSetOrdering2.Files.Add("jquery.js");
  bundleFileSetOrdering2.Files.Add("jquery-min.js");
  bundleFileSetOrdering2.Files.Add("jquery-*");
  bundleFileSetOrdering2.Files.Add("jquery-ui*");
  bundleFileSetOrdering2.Files.Add("jquery.ui*");
  bundleFileSetOrdering2.Files.Add("jquery.unobtrusive*");
  bundleFileSetOrdering2.Files.Add("jquery.validate*");
  list.Add(bundleFileSetOrdering2);
  BundleFileSetOrdering bundleFileSetOrdering3 = new BundleFileSetOrdering("modernizr");
  bundleFileSetOrdering3.Files.Add("modernizr-*");
  list.Add(bundleFileSetOrdering3);
  BundleFileSetOrdering bundleFileSetOrdering4 = new BundleFileSetOrdering("dojo");
  bundleFileSetOrdering4.Files.Add("dojo.*");
  list.Add(bundleFileSetOrdering4);
  BundleFileSetOrdering bundleFileSetOrdering5 = new BundleFileSetOrdering("moo");
  bundleFileSetOrdering5.Files.Add("mootools-core*");
  bundleFileSetOrdering5.Files.Add("mootools-*");
  list.Add(bundleFileSetOrdering5);
  BundleFileSetOrdering bundleFileSetOrdering6 = new BundleFileSetOrdering("prototype");
  bundleFileSetOrdering6.Files.Add("prototype.js");
  bundleFileSetOrdering6.Files.Add("prototype-*");
  bundleFileSetOrdering6.Files.Add("scriptaculous-*");
  list.Add(bundleFileSetOrdering6);
  BundleFileSetOrdering bundleFileSetOrdering7 = new BundleFileSetOrdering("ext");
  bundleFileSetOrdering7.Files.Add("ext.js");
  bundleFileSetOrdering7.Files.Add("ext-*");
  list.Add(bundleFileSetOrdering7);
} 
```

因此，当您从以下位置调用时`Application_Start`：

```
BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

实际上，您传递`BundleCollection`了库中定义的默认值。

因此，我们将`BundleFileSetOrdering`实例一一传递到：

```
private static void AddOrderingFiles(BundleFileSetOrdering ordering, IEnumerable<FileInfo> files, Dictionary<string, HashSet<FileInfo>> fileMap, HashSet<FileInfo> foundFiles, List<FileInfo> result)
{
  foreach (string key in (IEnumerable<string>) ordering.Files)
  {
    if (key.EndsWith("*", StringComparison.OrdinalIgnoreCase))
    {
      string str = key.Substring(0, key.Length - 1);
      foreach (FileInfo fileInfo in files)
      {
        if (!foundFiles.Contains(fileInfo) && fileInfo.Name.StartsWith(str, StringComparison.OrdinalIgnoreCase))
        {
          result.Add(fileInfo);
          foundFiles.Add(fileInfo);
        }
      }
    }
    else if (fileMap.ContainsKey(key))
    {
      List<FileInfo> list = new List<FileInfo>((IEnumerable<FileInfo>) fileMap[key]);
      list.Sort((IComparer<FileInfo>) FileInfoComparer.Instance);
      foreach (FileInfo fileInfo in list)
      {
        if (!foundFiles.Contains(fileInfo))
        {
          result.Add(fileInfo);
          foundFiles.Add(fileInfo);
        }
      }
    }
  }
} 
```

**结论**

如果我们想简化这个过程，我们可以说库更喜欢某种文件，如果找到多种可能性，则对其他文件进行一些排序。这是大多数情况下的预期行为，但正如您所见，它很容易被覆盖，`AsDefinedBundleOrderer`因此它对给定的文件集不执行任何操作，因此顺序保持原始顺序。

# ruby-on-rails - 使用 Rails 3.2.11 和 RSpec 发布原始 JSON 数据

> ID：14775998
> 
> 赞同：45
> 
> 时间：2013-02-08T15:34:45.893
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3.2, rspec2, rspec-rails

为了确保我的应用程序不受[此漏洞利用](http://www.phenoelit.org/blog/archives/2013/02/05/mysql_madness_and_rails/)的影响，我试图在 RSpec 中创建一个控制器测试来覆盖它。为了做到这一点，我需要能够发布原始 JSON，但我似乎还没有找到一种方法来做到这一点。在做一些研究时，我已经确定至少曾经有一种方法可以使用`RAW_POST_DATA`标题，但这似乎不再起作用：

```
it "should not be exploitable by using an integer token value" do
  request.env["CONTENT_TYPE"] = "application/json"
  request.env["RAW_POST_DATA"]  = { token: 0 }.to_json
  post :reset_password
end 
```

当我查看参数哈希时，根本没有设置令牌，它只包含`{ "controller" => "user", "action" => "reset_password" }`. 在尝试使用 XML 时，甚至在尝试仅使用常规发布数据时，我得到相同的结果，在所有情况下，它似乎都没有设置它。

我知道随着最近的 Rails 漏洞，散列参数的方式发生了变化，但是还有办法通过 RSpec 发布原始数据吗？我可以以某种方式直接使用`Rack::Test::Methods`吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-08T22:46:12.127

据我所知，在控制器规范中不再可能发送原始 POST 数据。但是，它可以在请求规范中很容易地完成：

```
describe "Example", :type => :request do
  params = { token: 0 }
  post "/user/reset_password", params.to_json, { 'CONTENT_TYPE' => 'application/json', 'ACCEPT' => 'application/json' }
  #=> params contains { "controller" => "user", "action" => "reset_password", "token" => 0 }
end 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-20T15:01:56.033

这是将原始 JSON 发送到控制器操作（Rails 3+）的方式：

假设我们有这样一条路线：

`post "/users/:username/posts" => "posts#create"`

假设您希望正文是您通过以下方式读取的 json：

`JSON.parse(request.body.read)`

然后您的测试将如下所示：

```
it "should create a post from a json body" do
  json_payload = '{"message": "My opinion is very important"}'
  post :create, json_payload, {format: 'json', username: "larry" }
end 
```

`{format: 'json'}`是让它发生的魔法。此外，如果我们查看 TestCase#post [http://api.rubyonrails.org/classes/ActionController/TestCase/Behavior.html#method-i-process](http://api.rubyonrails.org/classes/ActionController/TestCase/Behavior.html#method-i-process)的源代码，您可以看到它在操作之后采用第一个参数（ json_payload），如果它是一个字符串，它会将其设置为原始帖子正文，并正常解析其余的 args。

同样重要的是要指出 rspec 只是 Rails 测试架构之上的 DSL。上面的`post`方法是 ActionController::TestCase#post 而不是一些 rspec 发明。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-18T20:46:02.873

我们在控制器测试中所做的是明确设置 RAW_POST_DATA：

```
before do
  @request.env['RAW_POST_DATA'] = payload.to_json
  post :my_action
end 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-02-19T01:18:18.903

**导轨 5 示例：**

```
RSpec.describe "Sessions responds to JSON", :type => :request do

  scenario 'with correct authentication' do
    params = {id: 1, format: :json}
    post "/users/sign_in", params: params.to_json, headers: { 'CONTENT_TYPE' => 'application/json', 'ACCEPT' => 'application/json' }
    expect(response.header['Content-Type']).to include 'application/json'
  end
end 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-07-17T10:58:06.133

这是发送原始 json 数据的控制器测试的完整工作示例：

```
describe UsersController, :type => :controller do

  describe "#update" do
    context 'when resource is found' do
      before(:each) do
        @user = FactoryGirl.create(:user)
      end

      it 'updates the resource with valid data' do
        @request.headers['Content-Type'] = 'application/vnd.api+json'
        old_email = @user.email
        new_email = Faker::Internet.email
        jsondata = 
        {
          "data" => {
            "type" => "users",
            "id" => @user.id,
            "attributes" => {
              "email" => new_email
            }
          }
        }

        patch :update, jsondata.to_json, jsondata.merge({:id => old_id})

        expect(response.status).to eq(200)
        json_response = JSON.parse(response.body)
        expect(json_response['data']['id']).to eq(@user.id)
        expect(json_response['data']['attributes']['email']).to eq(new_email)
      end
    end
  end
end 
```

重要的部分是：

```
@request.headers['Content-Type'] = 'application/vnd.api+json' 
```

和

```
patch :update, jsondata.to_json, jsondata.merge({:id => old_id}) 
```

首先确保为您的请求正确设置了内容类型，这非常简单。第二部分让我头疼了几个小时，我最初的方法有点不同，但结果证明存在一个[Rails 错误](https://github.com/rails/rails/issues/13135)，它阻止我们在功能测试中发送原始发布数据（但允许我们在集成测试中)，这是一个丑陋的解决方法，但它有效（在 rails 4.1.8 和 rspec-rails 3.0.0 上）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-16T17:41:18.280

在 Rails 4 上：

```
params = { shop: { shop_id: new_subscrip.shop.id } }
post api_v1_shop_stats_path, params.to_json, { 'CONTENT_TYPE' => 'application/json',
                                                     'ACCEPT' => 'application/json' } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-19T19:22:23.460

@daniel-vandersluis 回答的一个小替代品， on `rails 3.0.6`， with `rspec 2.99`and `rspec-rails 2.99`：

```
describe "Example", :type => :request do
  params = { token: 0 }
  post "/user/reset_password", params.merge({format: 'json'}).to_json, { 'CONTENT_TYPE' => 'application/json', 'HTTP_ACCEPT' => 'application/json' }
end 
```

标题`HTTP_ACCEPT`没有太大区别，（它可以是`HTTP_ACCEPT`或者只是`ACCEPT`）。但在我的情况下，**为了让它工作，参数必须**：拥有`.merge({format: 'json'})`和`.to_json`

另一种变化：

```
describe "Example", :type => :request do
  params = { token: 0 }
  post "/user/reset_password", params.merge({format: 'json'}).to_json, { 'CONTENT_TYPE' => Mime::JSON.to_s, 'HTTP_ACCEPT' => Mime::JSON }
end 
```

它使用`Mime::JSON`and`Mime::JSON.to_s`而不是`application/json`标题值。