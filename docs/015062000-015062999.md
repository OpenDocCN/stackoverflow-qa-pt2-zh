# StackOverflow 问答 15062000-15062999

# javascript - HTML中的BaseURL对于制作模块来说很弱，我该如何解决？

> ID：15062002
> 
> 赞同：3
> 
> 时间：2013-02-25T07:27:53.763
> 
> 标签：javascript, bower

在服务器端，当文件将文件作为模块`A`导入时，使用baseURL 为's的相对路径。但是对于浏览器端模块，假设我编写了一个名为. 它的文件结构如下所示：`B``A``B``A``module-A`

```
.
|-- main.js
`-- pic
    `-- c.jpg 
```

如果我创建一个带有 的元素`<img src="./pic/c.jpg">`，它指的是正确的图片。

然后我把它做成一个包，如果我使用 Bower 安装它看起来像这样：

```
.
|-- components
|   `-- module-A
|       |-- main.js
|       `-- pic
|           `-- c.jpg
`-- index.html 
```

甚至像这样：

```
.
|-- components
|   `-- module-B
|       `-- components
|           `-- module-A
|               |-- main.js
|               `-- pic
|                   `-- c.jpg
`-- index.html 
```

但是此时如果我在 中再创建一个菜单`index.html`，那么 中就会有一个`<img sc="./pic/a.jpg">`JS 代码创建的标签`module-A`。这次错了！

如果我想让它工作，我必须使用 iframe 来包装，`module A`那么事情可能会很好。

对于服务器端程序，一切正常，因为没有像 HTML 这样的东西可以在一页中制作所有代码（我的意思是没有 UI 的程序。）。

我怎样才能解决这个问题？

* * *

更新：

是的，我使用 Bower 和一个 CommonJS 加载器 SeaJS，它在中国更受欢迎，而不是 RequireJS。我认为我们是否手动使用包管理器或管理器文件是一个常见问题。

# jakarta-mail - 如何在 JAVA 中包含文本版本的电子邮件

> ID：15062003
> 
> 赞同：2
> 
> 时间：2013-02-25T07:27:54.483
> 
> 标签：jakarta-mail, html-email, spam, sendgrid

我正在通过 java web 应用程序发送电子邮件，电子邮件仅包含 html 内容。发送给收件人的电子邮件会登陆特定域的垃圾邮件文件夹（例如：mydomain.com）。

因此，当我搜索解决方案时，它说，电子邮件还必须包含纯版本，那么如何在 java 中的 html 邮件中也包含纯版本，我的电子邮件还包含附件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T05:30:34.297

我找到了解决方案，它工作正常。

```
String body ="<html><head></head><body><span>this is a test mail</span></body></html>           

Multipart multiPart = new MimeMultipart("alternative");   // Create an "Alternative" Multipart message

            MimeBodyPart text = new MimeBodyPart();
            MimeBodyPart html = new MimeBodyPart();

            text.setText(body.replaceAll("\\<[^>]*>","").replaceAll("&nbsp;","").replaceAll("&amp;","&"));  //set the text/plain version
            html.setContent(Jsoup.parse(body).html(), "text/html");     //set the text/html version

            multiPart.addBodyPart(text);
            multiPart.addBodyPart(html); 
            message.setContent(multiPart); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:53:11.600

这个[JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#sendmpa)将帮助您处理除附件部分之外的所有内容。在继续之前先尝试这个简单的版本并让它工作。

这个[JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#attach)讨论了附件。

您需要将两者结合起来。您需要创建一个包含多部分/混合内容的消息来保存主体和附件。第一个正文部分应该是多部分/替代内容，而不仅仅是纯文本部分。

如果这还不足以让您开始，请告诉我。

# sqlite - LINQPad SQLite 数值转换

> ID：15062007
> 
> 赞同：0
> 
> 时间：2013-02-25T07:28:03.723
> 
> 标签：sqlite, linqpad

sqlite 文件中的表有一个 INTEGER 列和一个 REAL 列。当我使用 LinqPad IQ 驱动程序连接到这个文件时，数据上下文是用 Int32? 场和单身？场地。但是sqlite表中的真实数据是Int64的吗？和双倍？，所以当我尝试查询数据时会抛出 InvalidCastException 。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T01:58:06.110

SQLite 的问题在于列类型只是一个建议。换句话说，用户可以将他们喜欢的任何内容放入任何列中，而不管其类型如何。这会对依赖于静态类型的 ORM 或查询造成严重破坏。

# c# - 使用 C# 迁移项目时，在 VS 2010 中添加引用 dll 时出错

> ID：15062009
> 
> 赞同：0
> 
> 时间：2013-02-25T07:28:08.030
> 
> 标签：c#, visual-studio-2010

我从`project`->添加了引用，`add reference`并且在运行程序时没问题，但是当我尝试将项目文件夹迁移到另一台计算机时。我会收到这个错误

```
 `Retrieving the COM class factory for component with 
     CLSID {20B43BA5-9CE9-42E1-9A56-B049C8828B1C} 
     failed due to the following error: 
       80040154 Class not registered 
     (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).` 
```

并且我从中添加 dll 的参考文件夹有一个黄色标点符号，我该如何解决这个问题？

我将 dll 复制到我迁移项目的 pc 上，然后当我添加 dll 时，这给了我错误 tsssk

![截屏](../Images/83a0a3c3be2dcf0ebc110a9dfcb8601a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:38:31.077

听起来新机器上没有参考位置。验证参考文件和位置是否在新机器上。

如果是，请删除并重新添加参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:47:38.863

当您更改项目位置或将您的 Visual Studio 项目从一个位置移动到另一个位置时。然后它会在您上次使用的位置检查您在项目中添加的私有程序集引用。所以要解决这个问题，只需再次添加这些引用或将 ref 库放入 Visual Studio 正在寻找的位置。

最好在您的项目下创建一个文件夹并将所有本地程序集添加到该文件夹​​中并从此处添加 ref。

# android - 在横向模式下未正确显示应用程序设计

> ID：15062011
> 
> 赞同：0
> 
> 时间：2013-02-25T07:28:13.280
> 
> 标签：android

在应用程序中显示为这样 [http://www.tiikoni.com/tis/view/?id=b0c2d2f](http://www.tiikoni.com/tis/view/?id=b0c2d2f)在简单模式下，但在横向模式下显示如下[http://www.tiikoni.com/tis /view/?id=d109510](http://www.tiikoni.com/tis/view/?id=d109510)

对于简单的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/bowlbackground" >

<LinearLayout
    android:id="@+id/hkk"
    android:layout_width="match_parent"
    android:layout_height="54dp"
    android:layout_marginLeft="18dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="05dp" >

</LinearLayout>
<LinearLayout
    android:id="@+id/hll"
    android:layout_width="match_parent"
    android:layout_height="54dp"
    android:layout_marginLeft="18dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="143dp" >

</LinearLayout>

<LinearLayout
    android:id="@+id/hll2"
    android:layout_width="match_parent"
    android:layout_height="54dp"
    android:layout_marginLeft="18dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="0dp" >

</LinearLayout> 
```

景观

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bowlbackground"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/hkk"
    android:layout_width="match_parent"
    android:layout_height="33dp"
    android:layout_marginLeft="18dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="05dp"
     >
</LinearLayout>

<LinearLayout
    android:id="@+id/hll"
    android:layout_width="match_parent"
    android:layout_height="30dp"
    android:layout_marginLeft="18dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="70dp" >
</LinearLayout>

<LinearLayout
    android:id="@+id/hll2"
    android:layout_width="match_parent"
    android:layout_height="30dp"
    android:layout_marginLeft="18dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="0dp" >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:35:06.793

使用相对布局，而不是带边距的线性布局。你永远不知道用户手机的屏幕尺寸，所以即使使用 dip/dp，假设它的外观也不安全。

使用相对布局，您可以指定每个项目应位于另一个项目/布局的下方或右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:03:49.437

我不确定您提供的信息是否足够。但是请尝试在两种布局中使用不同的可绘制图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:40:03.707

每次您旋转手机时，Activity 都会重新启动，这可能会以某种方式再次导致您的图像出现问题。这是操作系统的一部分，有点烦人，这是要做的。

如果您在清单中添加：

```
 android:configChanges="orientation" 
```

到完成旋转的活动节点，您必须覆盖 onConfigurationChanged。

```
 @Override
  public void onConfigurationChanged(Configuration newConfig) {
  super.onConfigurationChanged(newConfig);
  setContentView(R.layout.myLayout);

 } 
```

# java - Android：相机的尺寸与屏幕的尺寸不匹配

> ID：15062013
> 
> 赞同：0
> 
> 时间：2013-02-25T07:28:17.247
> 
> 标签：java, android, camera, android-linearlayout

我写了自己的相机活动，我在a中显示了照片的实时预览`FrameLayout`，但是实时图片看起来不自然，有点高，我认为这是因为它的尺寸`FrameLayout`与相机的尺寸不匹配。我应该怎么做才能解决它？

这是相机活动的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="wrap_content"
    android:layout_height="0dip"
    android:layout_weight="0.86" />

<Button
    android:id="@+id/button_capture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="16dp"
    android:gravity="center"
    android:onClick="capture"
    android:text="Capture" />

<Button
    android:id="@+id/button_accept"
    android:layout_width="115dp"
    android:layout_height="wrap_content"
    android:text="Accept"
    android:visibility="gone"
    android:onClick = "accept" />

<Button
    android:id="@+id/button_retake"
    android:layout_width="107dp"
    android:layout_height="wrap_content"
    android:text="Retake" 
    android:visibility="gone"
    android:onClick = "retake"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:35:47.107

您必须缩放从相机拍摄的图像。你可以尝试这样的事情：

```
private Bitmap scaleImage(ImageView imageView, String path) {
int targetWidth = imageView.getWidth();
int targetHeight = imageView.getHeight();

BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();
bitmapOptions.inJustDecodeBounds = true;
BitmapFactory.decodeFile(path, bitmapOptions);
int photoWidth = bitmapOptions.outWidth;
int photoHeight = bitmapOptions.outHeight;

int scaleFactor = Math.min(photoWidth / targetWidth, photoHeight / targetHeight);

bitmapOptions.inJustDecodeBounds = false;
bitmapOptions.inSampleSize = scaleFactor;
bitmapOptions.inPurgeable = true;

return BitmapFactory.decodeFile(path, bitmapOptions); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:50:46.797

问题可以这样解决：

```
 Parameters cameraParam =  mCamera.getParameters() ;
        double ratio = (double)cameraParam.getPictureSize().height / (double)cameraParam.getPictureSize().width  ;
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        try
        {
            display.getSize(size);
        }
        catch(java.lang.NoSuchMethodError ignore)
        {
            size.x = display.getWidth(); 
            size.y = display.getHeight() ;
        }
        int width = size.y;
        int height = size.x;
        previewParam.width =  width;
        previewParam.height = (int)(previewParam.width / ratio) ; 
```

# bash - 以下脚本中 /<*>/ 的用途是什么？

> ID：15062016
> 
> 赞同：2
> 
> 时间：2013-02-25T07:28:21.010
> 
> 标签：bash

这是一个简单的问题，但我无法在 Google 上找到答案。我是脚本新手。

```
while read something
do         
 var=${something/<*>/ }       
 #perform some operation
done < $1 
```

我想知道 /<*>/ 这里的用法。如果我使用，我可以获得相同的结果

```
var=${something} 
```

知道 /<*>/ 有什么用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:33:35.110

[在字符串操作指南](http://tldp.org/LDP/abs/html/string-manipulation.html)中查找“子字符串替换” 。`<stuff>`它用空格代替图案。

```
[cnicutar@ariel ~]$ echo $something
Fun on a <bun>
[cnicutar@ariel ~]$ echo ${something/<*>/ }
Fun on a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:34:59.673

请参阅[http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)。您的扩展应该删除`<*>`扩展为路径名的扩展。您得到相同的结果可能是因为您的输入中没有匹配此模式。

# database - TYPO3 新闻部分数据库表

> ID：15062018
> 
> 赞同：1
> 
> 时间：2013-02-25T07:28:47.320
> 
> 标签：database, typo3, tx-news

我正在使用新闻系统扩展来显示所有新闻文章。

我想知道这些新闻文章存储在数据库的哪个表中？我可以将数据直接添加到这些新闻文章的后端 MySQL 表中吗？

我实际上尝试将数据添加到我数据库中的“news_domain_model_news”表中，但这些更改没有反映出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-01T20:14:29.037

您也可以直接在数据库中编辑记录，但要注意 TYPO3 CMS 中有多个缓存。

因此，在完成数据编辑后清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:14:42.030

`tx_news_domain_model_news`是正确的表，但是在 TYPO3 中添加数据是不够的。您还需要将该数据添加到`TCA`（表配置数组）和数据库定义中，并使 EXT:news 了解新字段

最简单的方法是：

1.  使用“extension_builder”-Extension 创建一个新的扩展（在 TCA 和数据库定义文件中创建提到的条目）
2.  在您的新扩展中创建一个类“Tx__Domain_Model_News”，其中包含新字段和 setter + getter（使用命名约定，否则它将不起作用！）
3.  将文件“Resources/Private/extend-news.txt”添加到您的新扩展中，其中包含“Domain/Model/News”作为其唯一内容。

应该是这样的。这是扩展手册的链接，描述了该过程：

[http://docs.typo3.org/typo3cms/extensions/news/Main/Tutorial/ExtendingNews/Index.html](http://docs.typo3.org/typo3cms/extensions/news/Main/Tutorial/ExtendingNews/Index.html)

# linux - CRONJOB 未运行 .sh 文件

> ID：15062029
> 
> 赞同：0
> 
> 时间：2013-02-25T07:29:50.537
> 
> 标签：linux, cron, crontab, putty

我正在从 putty 访问我的 linus 框。我有一个 Java Progaram 打包在一个 Jar 文件中。我制作了一个 scheduler.sh 文件，用于设置 Java 路径并执行 Java 程序。所以当我运行 Scheduler.sh 时，一切都很好，Java 程序运行。

Scheduler.sh 的内容是

```
 #!/bin/sh
> echo "The Script Starts now!!!!!!!!!!"
> 
> export JAVA_HOME=/u01/app/oracle/java/java64/jrockit-jdk1.6.0_29
> export PATH=$JAVA_HOME/bin:$PATH cd
> /u01/CRM/softwaredepot/jarfiles/
> 
> java -jar EPALS_Linux.jar
> 
> echo "The Script ends now!!!!!!!!!!" 
```

现在我想使用 CRONJOB 执行它。所以我将它添加到 CONJOB

```
[sankalp@elb1cn11 ~]$ crontab -e
53 13 * * * /u01/CRM/softwaredepot/Scheduler.sh>tester.log

~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
"/tmp/crontab.XXXXU8TrO9" 2L, 64C 
```

什么也没发生。但是当我执行这一行时（在 crontab 中提到

/u01/CRM/softwaredepot/Scheduler.sh>tester.log 它运行成功。所以这意味着 crotab 中的条目也是正确的。那为什么它没有执行。请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:32:51.467

您没有指定运行脚本的内容。例如`bash`或`sh`

```
53 13 * * * bash /u01/CRM/softwaredepot/Scheduler.sh>tester.log 
```

由于您已指定，开始中的 shebang ：`#!/bin/sh`它应该自动与 sh 一起运行，因此它可能是权限。它没有执行权。

```
run chmod +x shcripname.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:45:28.610

可能是工作目录问题。

53 13 * * * cd /path/to/the/working/dir/; /u01/CRM/softwaredepot/Scheduler.sh>tester.log

# grails - 如何排除构建时所需的插件 jar？

> ID：15062033
> 
> 赞同：3
> 
> 时间：2013-02-25T07:30:01.853
> 
> 标签：grails, jar, dependency-management

我有 Grails 插件，可以在构建时（在构建战争之前）完成一些工作（预编译静态文件）。要完成它的工作，需要一些 jar 依赖项。因此，仅在构建时才需要此依赖项。我怎样才能将它们从最终的 WAR 中排除？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T08:57:02.370

添加到您的`BuildConfig.groovy`：

```
grails.war.resources = { stagingDir ->
    delete(file:"${stagingDir}/WEB-INF/lib/whatever.jar")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:19:37.500

最好使用脚本来完成。在为需要排除 jar 文件的生产部署 WAR 时，我不得不使用它。

在脚本目录下创建一个名为 _Event.groovy 的脚本文件。在 _Event.groovy 文件中，添加删除 jar 的代码。顺便说一句，这是事件触发的，必须遵循命名约定。

在脚本/_Event.groovy

```
eventCreateWarStart = { warName, myDir ->
   println 'EVENT CALLED!'
   File libDir = new File("${myDir}/WEB-INF/lib/")
   if (grailsEnv != "development") {
      libDir.eachFileMatch( ~/^(tomcat|grails-plugin-tomcat).*\.jar$/) { File jarToRemove ->
         println 'REMOVING JAR: ' + jarToRemove
         jarToRemove.delete()
      }
   }
} 
```

# java - 如果基类具有带参数的构造函数，如何添加不带参数的构造函数

> ID：15062039
> 
> 赞同：0
> 
> 时间：2013-02-25T07:30:42.630
> 
> 标签：java

如何添加没有参数的构造函数，以防该类扩展了具有参数化构造函数的其他类。

例如，

我有一个扩展 A 的 B 类。

```
Class A {
  //Parameterized constructor
   A(int a,int b) {
     //some operation
   }
}

Class B extends A {
     //Constructor without paramaters
     B() {
     }   
} 
```

扩展 Class A 时是否可以在 Class B 中创建一个空的构造函数？

请让我知道详情。

谢谢，蒂尼什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:34:09.173

您应该为 A 的构造函数所需的参数计算一些值。

```
class B extends A {
 //Constructor without paramaters
 B() {
   super(0,0);
 }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:41:05.943

```
public class B extends A {

    public B() {
        super(0, 0);
    }
} 
```

请注意，如果父类没有无参数构造函数，您必须自己提供合理的默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:32:48.917

你不能忽略父母的参数。

想象一下，父类中的参数对其功能至关重要。它可能是一个编译类，你不一定知道它是如何工作的。

您可以在孩子的类中创建一个空的构造函数，但是当您调用 super 时，您必须传递参数。

# cordova - 如何在 Phone Gap Android 应用程序中获取标签栏？

> ID：15062040
> 
> 赞同：-1
> 
> 时间：2013-02-25T07:30:44.977
> 
> 标签：cordova, tabs, phonegap-plugins

我是电话间隙域的新手。我想知道在电话间隙域中实现标签栏的过程。

我用 AndiDog 插件试了一下，但没有用。

请指导确切的程序....

**期待 APT 解决方案**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:39:44.943

好吧试试这个....

```
<html>

<head>

<meta name=”viewport” content=”width=320; user-scalable=no” />

<meta http-equiv=”Content-type” content=”text/html; charset=utf-8″&gt;

<title>PhoneGap</title>

<link rel=”stylesheet” href=”master.css” type=”text/css” media=”screen” title=”no title” charset=”utf-8″&gt;

<script type=”text/javascript” charset=”utf-8″ src=”phonegap.js”&gt;</script>

<script type=”text/javascript” src=”jquery.1.3.2.min.js”&gt;</script>

<script type=”text/javascript” charset=”utf-8″&gt;

$(document).bind(“deviceready”, function() {

setupToolbars();

});

var toprated=0;

var recents=0;

var history=0;

function setupToolbars() {

window.uicontrols.createToolBar();

window.uicontrols.setToolBarTitle(“A Title”);

window.uicontrols.createTabBar();

var toprated = 0;

window.uicontrols.createTabBarItem(“toprated”, “Top Rated”, “tabButton:TopRated”, {

onSelect: function() {

navigator.notification.alert(“Top Rated selected”);

window.uicontrols.updateTabBarItem(“toprated”, { badge: ++toprated });

}

 });

var recents = 0;

window.uicontrols.createTabBarItem(“recents”, “Recents”, null, {

onSelect: function() {

navigator.notification.alert(“Recents selected”);

window.uicontrols.updateTabBarItem(“recents”, { badge: ++recents });

}

});

var history = 0;

window.uicontrols.createTabBarItem(“history”, “History”, “icon.png”, {

onSelect: function() {

navigator.notification.alert(“History selected”);

window.uicontrols.updateTabBarItem(“history”, { badge: ++history });

}

});

window.uicontrols.createTabBarItem(“search”, “Search”, “tabButton:Search”);

window.uicontrols.createTabBarItem(“downloads”, “Downloads”, “tabButton:Downloads”);

window.uicontrols.showTabBar();

window.uicontrols.showTabBarItems(“toprated”, “recents”, “history”);

}

</script>

</head>

<body id=”stage”&gt;

<div id=”Page1″&gt;

<br><br><br>

<h1>The tab bar is kewl!</h1>

</div>

</body>

</html> 
```

# ruby-on-rails - Rails 使用 AR 查找返回单个记录

> ID：15062041
> 
> 赞同：0
> 
> 时间：2013-02-25T07:30:55.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试使用以下查询取回一条记录：

```
Rating.where(recommendation_id:1773452, rating_set:18, product_id:2086981) 
```

返回：

```
 => [#<Rating id: 931, label: "Fair", rating: 2.0, created_at: "2013-02-21 22:20:19", updated_at: "2013-02-25 06:38:51", recommendation_id: 1773452, notes: "", rating_set: 18, product_id: 2086981, best_one: 1773452>] 
```

我试图让一个属性显示在我的视图中。例如：

```
Rating.where(recommendation_id:rec.id, rating_set:params[:rating_set_id], product_id:params[:product_id]).pluck(:label) 
```

它返回引号中的值`["Fair"]`

我怎样才能只取回价值`Fair`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:40:55.037

```
rating = Rating.where(recommendation_id:1773452, rating_set:18, product_id:2086981).first

rating.label # returns "Fair" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:46:41.317

嗯。您不能直接获得“公平”的值。

因为 Active Record 总是会返回模型的对象。pluck 是一个额外的助手，它将带来集合。

当你用它查询时，`.where("CONDITIONS")`它总是会返回对象的集合。

所以在这种情况下，你必须这样做`.first.label`

我的建议是，如果您的条件相同，那么您可以使用`find_by`它将返回单个记录。

`Rating.find_by_recommendation_id_and_rating_set_and_product_id(p1, p2, p3).label`

# sql - SQL 中的 NOT EXISTS 子句

> ID：15062043
> 
> 赞同：3
> 
> 时间：2013-02-25T07:31:04.417
> 
> 标签：sql, not-exists

我一直在查询，我真的无法思考执行是如何发生的，任何帮助将不胜感激：

该查询旨在查找从事所有项目的员工的详细信息。

查询是：

```
SELECT E.LNAME, E.FNAME
FROM EMPLOYEE E
WHERE NOT EXISTS
(
    SELECT PNUMBER
    FROM PROJECT
    WHERE PNUMBER NOT EXISTS 
    (
        SELECT PNO 
        FROM WORKS_ON
        WHERE ESSN=E.SSN 
    ) 
); 
```

数据库结构是：

带有列的表项目：

> Pname、Pnumber、位置和 dnum

带有列的表works_on：

> ESSN、PNO 和 HOURS

表 Employee 与列：

> Fname,minit,Lname,SSN,Bdate,address,sex,salary,superssn 和 dno

如果有人能用简单的话解释这个查询是如何执行的，那将非常有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T07:42:27.907

如果子查询返回至少一行，则认为 SQL EXISTS 条件“满足”。

因此，通过暗示不存在，我们希望子查询返回零行，所以有了这些知识，让我们看看您的查询

```
SELECT E.LNAME, E.FNAME
FROM EMPLOYEE E
WHERE NOT EXISTS (SELECT PNUMBER
FROM PROJECT
WHERE PNUMBER NOT EXISTS (SELECT PNO 
FROM WORKS_ON
WHERE ESSN=E.SSN ) ); 
```

有两个嵌套的 NOT EXISTS 语句，SQL 必须以相反的顺序运行它们，因为一个依赖于另一个。第一个将被查询的是这个（最后一个）：

```
SELECT PNO 
    FROM WORKS_ON
    WHERE ESSN=E.SSN 
```

如果这返回零行（因为我们说不存在），那么它将运行下一个查询，这将是：

```
SELECT PNUMBER
    FROM PROJECT 
```

同样，这必须返回零行，如果返回，那么它将运行最终查询，即第一个查询。

```
SELECT E.LNAME, E.FNAME
FROM EMPLOYEE E 
```

本质上，每个“NOT EXIST”子查询都必须返回零行才能运行前面的查询，否则您最终将得到 0 行（无结果）。

有关 EXISTS 条件的更多信息，请单击[此处](http://www.techonthenet.com/sql/exists.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-02T13:44:48.373

我知道这是一个老问题，但我很感兴趣，所以我花了一些时间来解决这个问题，让努力白白浪费了。

首先，我不知道 inner 的语法，`<column name> NOT EXISTS <subquery>`但它似乎等同于`<column name> NOT IN <subquery>`. 正是这个概念使查询对我来说更全面，因为它更清楚地将内部查询链接到*PROJECT*。
所以我从

```
SELECT E.LNAME, E.FNAME
FROM EMPLOYEE E
WHERE NOT EXISTS
(
    SELECT PNUMBER
    FROM PROJECT
    WHERE PNUMBER NOT IN
    (
        SELECT PNO
        FROM WORKS_ON
        WHERE ESSN=E.SSN
    )
); 
```

## 步骤分解：

*   内部查询仅列出您的员工从事的所有项目编号。

    ```
     SELECT PNO
            FROM WORKS_ON
            WHERE ESSN=E.SSN 
    ```

*   中间查询采用补码。结果是您的员工未处理的所有项目编号。

    ```
     SELECT PNUMBER
        FROM PROJECT
        WHERE PNUMBER NOT IN
        (
            -- projects that the employee works on
        ) 
    ```

*   如果存在员工不参与的项目，那么他不会参与所有项目，因此他不应该被包括在结果中。

    ```
    SELECT E.LNAME, E.FNAME
    FROM EMPLOYEE E
    WHERE NOT EXISTS
    (
        -- projects that the employee does not work on
    ) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-19T07:35:38.623

[对于这个问题， keyszers](https://stackoverflow.com/users/2094571/keyszers)的回答绰绰有余。不过我想再补充几点

SQL 查询的执行从内部查询开始。因此，在您的查询中，where 子句首先执行

> PNUMBER 不存在（从 WORKS_ON WHERE ESSN=E.SSN 中选择 PNO）

根据上述查询的结果，下面的另一个查询将运行。

```
WHERE NOT EXISTS (
    SELECT PNUMBER
    FROM PROJECT
    WHERE PNUMBER NOT EXISTS (**Resultset**) 
```

总结一下我的观点 - 您需要根据子查询中的结果集调试您的查询。

# android - 使用带有 phonegap 的 jQuery Mobile

> ID：15062045
> 
> 赞同：2
> 
> 时间：2013-02-25T07:31:10.067
> 
> 标签：android, performance, jquery-mobile, mobile, cordova

我正在使用 phonegap for android 开发一个 android 应用程序。由于 jQuery mobile 为我们提供了丰富的 ui 组件。所以我选择使用jQuery mobile。

现在的问题是，当我使用 jQuery mobile 时，它​​会降低应用程序的性能。表示加载时间已增加。所以我只想知道如何正确使用它们，以免影响应用程序性能。

目前我正在这样插入。

```
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:53:02.327

我建议您将 jquery 打包到您的资产/www 中，就像 Jason 所说的那样。然后添加：`android:hardwareAccelerated="true"`androidmanifest.xml 中的内部标记，如下所示：

```
<application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:hardwareAccelerated="true"
        android:theme="@style/AppTheme" >
        <activity 
```

这将使用 GPU 渲染您的 webview。

不要忘记以最新或至少 ICS 版本为目标进行编译。它可以在您的应用程序的第一次创建或编辑您的 androidmanifest.xml 中完成：

```
 <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="16" /> 
```

这种方法证明适用于我的应用程序。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T08:55:28.610

您可以将骨干与 jQuery 移动[模板](https://github.com/hazemhagrass/web-skeletons)一起使用，我将其集成并在 phonegap 上对其进行了测试，它就像一个魅力

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T12:54:55.357

除了将 jquery 库与应用程序一起打包之外，您还可以禁用所有动画以提高响应能力，尤其是在 Android 设备上（动画似乎在 iOS 设备上运行合理）。

```
// Suppress all page transitions
$(document).bind('pageinit', function (){
    $.mobile.defaultPageTransition = 'none';
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:33:17.590

好吧，我会将 jquery 库与 phoengap 应用程序打包在一起。这样您就不会在每次从`code.jquery.com`. 这将使您的 HTML 看起来像这样：

```
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/scripts/jquery.mobile-1.2.0.min.css" />
<script src="/scripts/jquery-1.8.2.min.js"></script>
<script src="/scripts/jquery.mobile-1.2.0.min.js"></script> 
```

# javascript - JQGrid 列重新排序

> ID：15062052
> 
> 赞同：1
> 
> 时间：2013-02-25T07:31:54.310
> 
> 标签：javascript, jqgrid, remap

我试过使用`remapColumns`：

```
grid.remapColumns(newOrder, false, false); 
```

但有一个奇怪的问题 - 列标题已重新排序，但列信息保持不变。怎么能解决呢？

编辑：

整体方法

```
permutateGrid: function (gridID, columnsToShow, columnsToHide) {
    var newOrder = [];
    var grid = $(gridID);

    for (var i = 0; i < columnsToShow.length; i++) {
        newOrder.push(GridHelpers.getColumnSrcIndexByName(grid, columnsToShow[i]));
    }

    var columnsCount = grid.jqGrid("getGridParam", "colModel").length;
    for (var i = 0; i < columnsCount; i++) {
        if (newOrder.indexOf(i) === -1) {
            newOrder.push(i);
        }
    }

    showColumns(gridID, columnsToShow);
    hideColumns(gridID, columnsToHide);

    grid.jqGrid('remapColumns', newOrder, false, false);
    grid[0].jqGrid().updateColumns();
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:10:29.270

的第二个参数`remapColumns`应该是`true`是否要更新网格内容。`remapColumns`是`grid.jqGrid("remapColumns", newOrder, true, true);`（或`grid.remapColumns(newOrder, true);`）的典型用法。

# project-management - 如何将 scrum 工作到具有多个应用程序且满足日常客户需求的环境中

> ID：15062053
> 
> 赞同：4
> 
> 时间：2013-02-25T07:31:56.623
> 
> 标签：project-management, agile, scrum, agile-project-management, agile-processes

我已经阅读了 scrum，我工作的公司已经开始使用它。我发现布置任务确实可以帮助每个人了解需要完成的工作和工作。我们遇到的一个问题是，我们只是在我们的一个项目中“尝试”scrum。我们有许多为客户定制的应用程序。其中一些客户优先于其他客户。如果他们打电话要求报告，我们会提供。

是否有一个流程（scrum 或其他方式）可以用来帮助我们满足这些需求？就目前情况而言，每日需求并未计入我们的 sprint，因为我们没有时间每天做故事时间和计划扑克。

有什么想法吗？

我确实发现[这个问题](https://stackoverflow.com/questions/412525/how-does-scrum-work-when-you-have-multiple-projects)是关于如何合并多个项目，而不是日常需求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:40:17.780

无论您是否使用 Scrum，您都应该让您的客户遵循变更管理流程。您必须同意您不是立即执行客户要求的操作，而是根据优先级安排项目并在执行之前进行计划。如果这些是一些紧急问题，例如在生产中发现的错误，您无论如何都应该遵循该过程，但更紧急地修复它们。我们实际上是这样做的：

1.  为问题分配优先级
2.  如果它是低优先级或正常优先级，请将其添加到 backlog 并计划稍后进行 Sprint
3.  如果紧急将其分配给专门的支持工程师，他们将在修补程序代码分支中无需 Sprint 即可完成后一点必须尽可能避免。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T11:20:18.743

也许 Scrum 不是适合您的敏捷方法，因为它更适合可以提前计划工作的团队，例如一次一到四个星期。

对于进行支持和维护的团队，我建议查看看板。

# c# - 返回原线程显示警报提示

> ID：15062057
> 
> 赞同：1
> 
> 时间：2013-02-25T07:32:10.083
> 
> 标签：c#, multithreading

我希望了解其他人编写的一些代码。我大致了解发生了什么，但不完全了解。问题是有问题的代码在另一个线程上运行并在第二个线程上处理一个事件。但是，我需要向用户显示警报，如果我从第二个线程触发警报，它当然不会显示，因为 UI 是在第一个线程上运行的。那么我如何“切换”到第一个线程来传递或编组由第二个线程检索到的我的 biz 对象，以便第一个线程可以处理它并显示警报？我以为你会在这种情况下使用委托，但是委托仍然在第二个线程上触发吗？

这是第二个线程的代码：

```
public delegate void MessageReceivedEventHandler(object sender, MessageEventArgs args);

public class MessageEventArgs : EventArgs
{
    ...snip...
}

public class MSMQListenerService
{
 ...
  public event MessageReceivedEventHandler MessageReceived;
  ....

   public void Start()
    {
        ...
        //this is where we jump to a second thread as this method is IAsyncResult
        _queue.BeginReceive(); 
        ...
    }
   ....
 } 
```

第一个线程的代码：

```
....snip...

 x = new MSMQListenerService(@".\private$\abc");
 x.MessageReceived += x_MessageReceived;
 x.FormatterTypes = new Type[] { typeof(LoginStatusMessage) };
 x.Start();

...snip....

void x_MessageReceived(object sender, MessageEventArgs args)
{
 //this handler is running on a different thread???
 //I'm OK with that just need to get the args back to the first thread
} 
```

因此，我发布了我认为相关的代码，而不会压倒帖子。因此，如果缺少某些内容，请告诉我，我一定会立即添加。

TIA JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:36:28.243

您已经回答了自己的问题：您需要调用 UI 线程上的调用。

```
this.BeginInvoke(new Action(() => { MessageBox.Show("THIS WILL SHOW ON UI THREAD"); } )); 
```

或者不使用 lambda 表达式，您可以使用委托：

```
private void DisplayMessage(string message) 
{ 
   ...
}

private delegate void SomeDelegateThatWillRunOnUIThread(string message);

...

this.BeginInvoke(new SomeDelegateThatWillRunOnUIThread(DisplayMessage), yourMessage); 
```

其中`this`指的是在 UI 线程上运行的实例。

我强烈建议您阅读本教程以获得更多见解 [http://www.codeproject.com/Articles/10311/What-s-up-with-BeginInvoke](http://www.codeproject.com/Articles/10311/What-s-up-with-BeginInvoke)

# android - Android：如何在我的数据库中检索我想要的数据

> ID：15062062
> 
> 赞同：0
> 
> 时间：2013-02-25T07:32:35.060
> 
> 标签：android, database, sqlite, fetch

首先，我不知道我的数据库是否正常工作，因为我最终在[这里更改了我以前的代码（它也不起作用）](https://stackoverflow.com/questions/15049544/android-how-can-i-fetch-my-selected-id-in-my-sqlite) 现在我使用 newboston 中的教程 for sqlite，但我仍然有一些错误它总是说不幸的是FC已经停止了。我不知道我的代码有什么问题，因为我没有对它进行编码错误。

```
public class DatabaseHelper  {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "recipename";
    public static final String KEY_INGRDNAME = "ingrdname";

    public static final String MENU_ID = "_id";
    public static final String RECIPE_NAME = "recipe";

    private static final String MYDATABASE = "recipebook";
    private static final int VERSION = 1;

    private static final String RECIPE_TABLE = "recipe";
    private static final String MENU_TABLE = "menu";
    static final String viewrecipe ="viewrecipe";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{
     public DbHelper(Context context) {
            super(context, MYDATABASE, null, VERSION);
          }

     @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

            db.execSQL("CREATE TABLE "+RECIPE_TABLE+" ("+KEY_ROWID+ " INTEGER PRIMARY KEY AUTOINCREMENT , "+
                    KEY_NAME+ " TEXT, " + KEY_INGRDNAME+ "TEXT );");

            db.execSQL("CREATE TABLE "+MENU_TABLE+" ("+MENU_ID+" INTEGER PRIMARY KEY, "+
                    RECIPE_NAME +" INTEGER NOT NULL ,FOREIGN KEY ("+RECIPE_NAME+") REFERENCES "+RECIPE_TABLE+" ("+KEY_ROWID+"));");

            db.execSQL("CREATE VIEW "+viewrecipe+
                    " AS SELECT "+RECIPE_TABLE +"."+KEY_NAME+""+
                    " FROM "+MENU_TABLE+" JOIN "+RECIPE_TABLE+
                    " ON "+MENU_TABLE+"."+RECIPE_NAME+" ="+RECIPE_TABLE+"."+KEY_ROWID
                    );

        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

            db.execSQL("DROP TABLE IF EXISTS "+MENU_TABLE);
            db.execSQL("DROP TABLE IF EXISTS "+RECIPE_TABLE);
            db.execSQL("DROP VIEW IF EXISTS "+viewrecipe);
            onCreate(db);
        }

    }
    public DatabaseHelper (Context c){
        ourContext =c;
    }
    public DatabaseHelper open(){
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getReadableDatabase();
        return this;
    }
    public void close(){
        ourHelper.close();
    }
   public  void InsertRecipe()
    {

    ContentValues values = new ContentValues();

    values.put(KEY_NAME, "Beef tapa");
    values.put(KEY_INGRDNAME, " 2 pounds beef round or chuck, sliced thinly against the grain , 1/2 cup lemon juice, 1/3 cup soy sauce , 2 tablespoons sugar, 1/4 teaspoon ground black pepper, 1 head garlic, minced, Canola or any cooking oil for frying " );
    ourDatabase.insert(RECIPE_TABLE, null, values);

    values.put(KEY_NAME, "Bulalo");
    values.put(KEY_INGRDNAME, " 6 - 7 pounds Beef Shanks with Bone Marrow, 1 head Garlic, cut, 1 large Onion, cubed, 2 Carrots, roughly cut, 2 stalks Celery, roughly cut, 1 teaspoon Whole Peppercorns, 1 tablespoon Salt, Leeks (optional), 2 - 3 Potatoes, cubed, 2 Corn on the cob, cut in 1 1/2 inch, 2 stalks Pechay or Bok Choy, 1 gallon Water, or enough to cover meat" );
    ourDatabase.insert(RECIPE_TABLE, null, values);

    values.put(KEY_NAME, "Caldereta");
    values.put(KEY_INGRDNAME, "2 pounds Beef, cut in 2 inch cubes, 1/2 head garlic, minced, 1/2 cup vinegar, 2 teaspoon salt, 2 pieces bay leaf (dahon ng laurel), enough water to cover the beef, 1/2 head garlic, minced, 1 medium onion, chopped, 1 small can tomato sauce, 6 small potatoes, quartered, 2-3 small Chili pepper, cut finely, 1 red bell pepper, cut in strips, 1/2 cup Green peas(optional), 1/2 cup Pickle Relish, 1 small can Liver Spread, 1/2 cup Olives, Salt and Pepper to taste, 2 teaspoon sugar, 2 tablespoons cooking oil, for sauteing, LIVER GRAVY INGREDIENTS (Optional), 1/2 pound beef liver, ground, 2 tablespoons vinegar, 2 tablespoons breadcrumbs, 1 cup beef broth, salt and pepper.");
    ourDatabase.insert(RECIPE_TABLE, null, values);

    values.put(KEY_NAME, "Kare kare");
    values.put(KEY_INGRDNAME, "2 pounds Oxtail, cut in 1 thickness,1 pound beef tripe (tuwalya), pressure cooked, cut into 2 squares (optional), 1/2 pound string beans, sliced in 3 lengths, 2 pcs. eggplants, sliced in 3 wedges, 1 banana bud or heart(puso ng saging), sliced in strips(optional), 6 stalks Bok Choy(Pechay), leaves and stalk separated, cut in 2 lengths, 1/2 cup peanut butter, dissolved in 1 cup beef broth, 1/4 cup toasted rice, powdered, dissolved in 1/2 cup beef broth, 5 cups beef broth, 2 tablespoons achuete seeds, 1/4 cup cooking oil,3 cloves garlic, minced, 1 medium onion, chopped, 1 tablespoon salt,1 tablespoon sugar, 1/4 teaspoon pepper, Sauteed Shrimp Paste");
    ourDatabase.insert(RECIPE_TABLE, null, values);

}
public String getIngredient(long l){
    String[]columns = new String[]{KEY_ROWID,KEY_NAME,KEY_INGRDNAME};
    Cursor c = ourDatabase.query(RECIPE_TABLE, columns, KEY_ROWID + "= " + l, null, null, null, null);
    if (c != null){
        c.moveToFirst();
        String ingredient = c.getString(2);
        return ingredient;
        }
    return null;
    }
    }

public class menucategory1a1 extends Activity {

        TextView text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.beef1);

        TextView text = (TextView)findViewById(R.id.beeftapaingredients);
        String s = "1";
      long l = Long.parseLong(s);
      DatabaseHelper recipe = new DatabaseHelper(this);
      recipe.open();
      String ingrd = recipe.getIngredient(l);
      recipe.close();

      text.setText(ingrd);

    Button page1 = (Button) findViewById(R.id.button1);

    page1.setOnClickListener(new View.OnClickListener(){ 
    @Override
    public void onClick(View view) { 
    Intent myIntent = new Intent(view.getContext(), menucategory1a1a.class);
    startActivityForResult(myIntent, 0);
    }

});
}

} 
```

是我在数据库中输入/插入值的方式还是我的声明错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:09:47.637

要获取 logcat ，您必须在 logcat 左侧选择您的应用程序名称。请尝试粘贴错误。

# c# - linq 仅查询具有详细信息的标头

> ID：15062065
> 
> 赞同：0
> 
> 时间：2013-02-25T07:32:46.413
> 
> 标签：c#, linq, lambda

我正在尝试仅使用此 Lambda 语句获取具有详细信息的标头

```
list = list.Where(c=> c.CustomerSalesPeople.Count>0); 
```

但是当我尝试返回结果时出现空异常

```
return list.OrderBy(c => c.CustomerName).ToList(); 
```

我已经单步执行了代码，并看到在执行第一条语句后立即生成了 null 异常。有没有更好的方法来实现这一点。

**编辑**

我尝试了这些建议，但我仍然得到一个空值。我想我会尝试更好地解释。我需要一个匹配此查询的 Lambda 表达式

```
 SELECT *
  FROM [customer]
  where customer_record_id in (select distinct(customer_id)from customer_sales_person) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:38:04.563

```
list = list.Where(c=>c.CustomerSalesPeople.Count>0).SingleOrDefault();

if(list!=null)
  return list.OrderBy(c=>c.CustomerName).ToList();

return list; 
```

或者，如果您认为，`CustomerSalesPeople`可以为 null，那么您可以这样做：

```
list = list.Where(c=>(c.CustomerSalesPeople==null) ||(c.CustomerSalesPeople.Count>0));

if(list!=null)
  return list.OrderBy(c=>c.CustomerName).ToList();

return list; 
```

您也可以查看`.DefaultIfEmpty()`扩展名。

当发现空结果集时，Linq 提供了出色的扩展方法来应对。他们来了：

1.  [.FirstOrDefault()](https://stackoverflow.com/questions/8886796/linq-firstordefault)
2.  [.DefaultIfEmpty()](https://stackoverflow.com/questions/8854181/defaultifempty-in-linq)
3.  [.SingleOrDefault()](https://stackoverflow.com/questions/1745691/linq-when-to-use-singleordefault-vs-firstordefault-with-filtering-criteria)

# 更新：

做这个：

```
 List<int> uniqueIds= listOfCustomerSalesPerson.Select(s=>s.Id).ToList().Distinct();
   var requireListOfCustomers = GetAllCustomers().Where(s=>uniqueIds.Contains(s.id); 
```

不过，您也可以将这两个单独的调用嵌入到一个中。但是根据您使用的数据提供者的种类，它可能会给您一个错误，例如“[仅使用原始类型](https://stackoverflow.com/questions/5208194/only-primitive-types-such-as-int32-string-and-guid-are-supported-in-this-c)”。因此，单独的 id 列表。

例如，如果您使用的是 EntityFramework 5.0 和 SQL Server，则可以这样做。

```
myDbContext db= new myDbContext();
var requiredList = db.Customers.Where(s=>
                               (s.CustomerSalesPeople ==null)
                               ||
                               (s.CustomerSalesPeople.Select(o=>o.Id).Contains(s.Id))
                               ).ToList(); 
```

我假设，客户包含`List<CustomerSalesPeople>`，`db.CustomerSalesPeople`否则可能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:38:34.373

您的集合中可以有 null 元素。尝试检查 where 语句中的空值

```
return list != null ? 
   list.Where(c=> c!=null && c.CustomerSalesPeople.Count>0).
   OrderBy(c => c.CustomerName).ToList()
   :null; 
```

# android - JQuery +无限滚动在google nexus 7中不起作用

> ID：15062073
> 
> 赞同：1
> 
> 时间：2013-02-25T07:33:14.197
> 
> 标签：android, jquery, cordova

```
$(window).scroll(function() {
        var yDistance = $('html, body').scrollTop();
        //var el = $(this).get(0);
        //if (el.offsetHeight + el.scrollTop >= el.scrollHeight) {
        //if ((yDistance + $(window).height()) > ($.mobile.activePage.children('.ui-content').height() - 150)) {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {

            if (!lastIndexReached) {
                pageIndex++;
                GetWallpapers(pageIndex, pageSize);
            }
        }
    }); 
```

在上面的代码中，我正在做的是当页面滚动到页面底部时，将调用一个新的 ajax 请求并将其附加到列表中。这适用于至少在我的浏览器和模拟器中的所有地方，但是当我在 google nexus 7 上运行它，它没有触发。我用谷歌搜索并尝试了一些修复，这些修复在代码段中进行了评论，但没有帮助。

我正在使用 jquerymobile + phonegap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:50:46.020

我创建了一个方法并像这样调用它

setInterval('checkScroll()',1000);

```
function checkScroll() {
    if ($(this).scrollTop() + $(this).height() >= ($(document).height() - 100)) {

        if (lastIndexReached == false && process==false) {
            process = true;
            console.log(pageIndex);
            pageIndex++;
            GetWallpapers(pageIndex, pageSize);
        }
    }
} 
```

每次滚动位于底部时，GetWallpapers() 方法被调用大约 10 次，所以我创建了一个变量进程，其值更改为 false，当调用 GetWallpapers() 方法时，它的值变为 true，并且当新的 html 附加到 dom我再次将其值设置为 false。

通过这种方式，我解决了我的问题，感谢@Ivan Ivković，感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T19:09:15.080

对我来说，这个问题原来与视口设置有关。我并没有真正测试它，但我很确定关闭用户缩放是诀窍。这是我后人的完整视口标签：

`<meta name="viewport" content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'>`

我也改用[Ajax Infinite Scroll](http://infiniteajaxscroll.com/)插件而不是 oldschoool Paul Irish 版本，但在我更改视口属性之前，该插件有同样的问题。

# hadoop - 错误：org.apache.hadoop.hbase.PleaseHoldException：master 正在初始化

> ID：15062075
> 
> 赞同：0
> 
> 时间：2013-02-25T07:33:19.057
> 
> 标签：hadoop, hbase

尝试在 hbase 中创建表时出现以下错误。

> 创建“ed”、“edss”
> 
> 错误：org.apache.hadoop.hbase.PleaseHoldException：org.apache.hadoop.hbase.PleaseHoldException：Master 正在初始化

我的配置文件是

```
<name>hbase.rootdir</name>

<value>file:///home/bingo/hbase</value> 
```

```
<name>hbase.zookeeper.property.dataDir</name>

<value>/home/bingo/zookeeper</value> 
```

我在我的 /etc/hosts 文件中将 127.0.0.1 设置为宾果游戏。

这是正确的我需要改变什么吗？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T14:17:27.477

请检查存储在 $HBASE_HOME/logs 目录中的日志。你会找到原因的。根据我的经验，这很可能是由于 zookeeper 连接失败。如果是这样，请更改您的 zookeeper 端口号。您可以将 $HBASE_HOME/conf/hbase-site.xml 中的信息编辑为

`<property> <name>hbase.zookeeper.property.clientPort</name> <value>2222</value> </property>`

# c# - 出现异常：Size 属性的大小无效为 0

> ID：15062077
> 
> 赞同：5
> 
> 时间：2013-02-25T07:33:32.643
> 
> 标签：c#, asp.net, visual-studio

我创建了一个具有以下签名的方法；

```
public bool CheckEmployeeRegistrationNo(string registrationNo, DateTime timeIn, int createdBy,
    DateTime createdDate, int updatedBy, DateTime updatedDate)
{
    ClsDatabaseManager dbManager = ClsDatabaseManager.InitializeDbManager();

    dbManager.CreateParameters(9);
    dbManager.AddParameters(0, "@RegistrationNo", registrationNo);
    dbManager.AddParameters(1, "@CreatedBy", createdBy);
    dbManager.AddParameters(2, "@CreatedDate", createdDate);
    dbManager.AddParameters(3, "@UpdatedBy", updatedBy);
    dbManager.AddParameters(4, "@UpdatedDate", updatedDate);
    dbManager.AddParameters(5, "@TimeIn", timeIn);
    dbManager.AddParameters(6, "@Name", EmployeeName, System.Data.ParameterDirection.Output);
    dbManager.AddParameters(7, "@GeneratedTimeIn", GeneratedTimeIn, System.Data.ParameterDirection.Output);
    dbManager.AddParameters(8, "@ImageUrl", ImageUrl, System.Data.ParameterDirection.Output);

    int result = -1;
    try
    {
        dbManager.Open();
        result = dbManager.ExecuteNonQuery("usp_EmployeeCheckRegNo");
        if (result > 0)
        {
            EmployeeName = dbManager.Parameters[6].Value.ToString();
            GeneratedTimeIn = dbManager.Parameters[7].Value.ToDate();
            ImageUrl = dbManager.Parameters[8].Value.ToString();
        }
        dbManager.Dispose();
    }
    catch (Exception ex)
    {
        dbManager.Dispose();
        throw ex;
    }

    return (result != -1);

} 
```

虽然我的存储过程看起来像；

```
ALTER PROC [dbo].[usp_EmployeeCheckRegNo]
(
    @RegistrationNo nvarchar(50),
    @TimeIn Datetime,
    @CreatedBy INT,
    @CreatedDate datetime,
    @UpdatedBy INT,
    @UpdatedDate datetime,
    @Name nvarchar(50) OUT,
    @GeneratedTimeIn datetime OUT,
    @ImageUrl nvarchar(100) OUT
)
AS

BEGIN

if Exists 
(
    select RegistationNo 
    FROM [Employe].Registration
    WHERE [RegistationNo] = @RegistrationNo
)
    BEGIN
        INSERT INTO [Employe].[Attendance]
        (
            RegistrationNo,
            [TimeIn],
            [CreatedBy],
            [CreatedDate],
            [UpdatedBy],
            [UpdatedDate]
        )
        VALUES
        (
            @RegistrationNo,
            @TimeIn,
            @CreatedBy,
            @CreatedDate,
            @UpdatedBy,
            @UpdatedDate
        )
         SET @Name = (select er.Name FROM [Employe].[Registration] er
            WHERE er.[RegistationNo] = @RegistrationNo);
         SET @GeneratedTimeIn = (select a.TimeIn 
            FROM [Employe].Attendance a
            WHERE a.RegistrationNo = @RegistrationNo);
         SET @ImageUrl = (select er.[Image] 
            FROM [Employe].[Registration] er
            WHERE er.RegistationNo = @RegistrationNo);
    END
ELSE
    return 0
END 
```

但是，当我在文本框中输入 2323（值）并单击按钮（在 .aspx 上）时，出现错误。我也在visual studio中调试。
错误是； **String[6]: Size 属性的大小无效为 0**
为什么我在 String 6 处​​收到此错误？
注意：我目前正在为参数 6、7、8 提供空值，因为它们作为外参数返回。 ![Visual Studio 屏幕截图](../Images/e271315fdfc0ae259ef9d04d8fa83aee.png)

在 sql server 中，我运行存储过程并输出预期结果；
![在此处输入图像描述](../Images/2392758453fe1de28ad7eb5b82fe6b55.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T07:59:21.597

我不知道`ClsDatabaseManager`您正在使用的类，但是[`SqlParameterCollection`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.aspx)对于属性的类型，您必须在为参数调用函数[`SqlCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)时指定大小。[`Add()`](http://msdn.microsoft.com/en-us/library/40959t6x.aspx)`nvarchar`

因此，我会说您应该能够执行以下操作：

```
dbManager.AddParameters(0, "@RegistrationNo", registrationNo, 50); 
```

指定与存储过程相同的字符串长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T07:59:33.817

尝试为输出参数分配任何非空值，例如：

```
dbManager.Parameters["@Name"].SqlValue = "";
dbManager.Parameters["@GeneratedTimeIn"].SqlValue = DateTime.Now();
dbManager.Parameters["@ImageUrl"].SqlValue = ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T07:50:53.480

如果您使用具有 InputOutput 方向输出的参数（返回值），也会出现错误消息。如前所述，设置 Size 解决了这个问题。

# spring-data - 使用 DBRef 查询集合

> ID：15062081
> 
> 赞同：1
> 
> 时间：2013-02-25T07:33:47.583
> 
> 标签：spring-data, spring-data-mongodb, dbref

我有2个实体如下：

```
@Document
public class Freelancer {
 @Id
 String id;
 String name;
 @DbRef
 List<Project> bidProjects;
}

@Document
public class Project {
 @Id
 String id;
 String name;
} 
```

项目不能有自由职业者的参考，因为可能有很多自由职业者可以投标项目。我想做以下事情：

查找对名称 = "XYZ" 的项目进行投标的自由职业者。

应该是什么查询（基于JSON的查询），我尝试了以下（其他组合但没有任何效果）：

```
@Query("{ 'completedProject': {'$ref': 'project', 'name': ?0 } }")
@Query("{ 'completedProjects': {'$ref': 'project', 'name': ?0 } }")
@Query("{ 'completedProject': [{'$ref': 'project', 'name': ?0 }] }") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:25:04.420

`{ 'fieldName': {'$ref': 'collectionName', '$field': { '$ofield' : ?0 } } }`

所以它会是

`@Query("{ 'bidProjects': {'$ref': 'project', '$name': { '$oname' : ?0 } } }")`

# jenkins - 在 Jenkins 中创建管理员帐户的问题

> ID：15062082
> 
> 赞同：1
> 
> 时间：2013-02-25T07:33:49.533
> 
> 标签：jenkins

我选择了 Jenkins 自己的用户数据库选项并取消选中允许用户注册选项。选定的传统模式授权。

在注册页面中，我提供了所有详细信息用户名、密码、姓名、电子邮件。单击注册后，我收到以下错误。

```
Status Code: 500
Exception: Bad version number in .class file
Stacktrace: 
javax.servlet.ServletException: Bad version number in .class file
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:615)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
    at org.kohsuke.stapler.MetaClass$4.doDispatch(MetaClass.java:203)
    at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
    at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:573)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:658)
    at org.kohsuke.stapler.Stapler.invoke(Stapler.java:487)
    at org.kohsuke.stapler.Stapler.service(Stapler.java:164)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
    at hudson.security.HudsonPrivateSecurityRealm$5.doFilter(HudsonPrivateSecurityRealm.java:694)
    at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:98)
    at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
    at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:124)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:135)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:174)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at jenkins.security.ApiTokenFilter.doFilter(ApiTokenFilter.java:64)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
    at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:66)
    at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
    at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
    at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:432)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
    at java.lang.Thread.run(Thread.java:595)

--------------------------------------------------------------------------------
Generated by Stapler at Mon Feb 25 01:29:25 CST 2013 
```

现在我无法登录 Jenkins。

请帮助我创建管理员帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:45:37.963

正如[Kishore Tamire](https://stackoverflow.com/users/2001311/kishore-tamire)本人所说，Tomcat 被设置为使用 JDK5 而不是 JDK6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T04:29:33.097

我正在使用JDK5。将Tomcat指向JDK6后问题已解决。

# c++ - 如何在删除数组之前检查以确保已分配数组

> ID：15062084
> 
> 赞同：0
> 
> 时间：2013-02-25T07:33:52.050
> 
> 标签：c++, arrays

我正在根据我读取的文件的大小创建一个字符数组。在未找到文件的情况下，不创建数组。当我调用我的析构函数时，我收到一个错误，我认为它告诉我指针无效，因为找不到文件。我想要做的只是检查类是否已正确加载到文件中的缓冲区中。我可以添加一个成功标志并在析构函数中检查它，但我认为有更好的方法。

在类头中：

```
uint32          m_fileSize;
char*           m_fileBuffer; 
```

在构造函数中：

```
m_fileSize = 0;
m_fileBuffer = 0; 
```

在初始化函数中：

```
std::ifstream file(filename.c_str(), std::ios::in|std::ios::binary|std::ios::ate);

if (file.is_open())
{
    m_fileSize = (int)file.tellg();
    m_fileBuffer = new char[m_fileSize];
    file.seekg (0, std::ios::beg);
    file.read (m_fileBuffer, m_fileSize);
}
else
{
    return false;
} 
```

在析构函数中：

```
 if(m_fileBuffer)
    {
        delete [] m_fileBuffer;
    } 
```

回顾一下，当文件存在并加载时，它工作得很好。当它不存在时，我会在读取该`if(m_fileBuffer)`行时遇到访问冲突。我正在尝试检查数组是否存在，如果存在则将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:40:19.407

```
if (file.is_open())
{
    m_fileSize = (int)file.tellg();

    if(0 < m_fileSize)
        m_fileBuffer = new char[m_fileSize];
    .....
    .....
} 
```

在析构函数中：

```
if(m_fileSize && m_fileBuffer)
{
    delete [] m_fileBuffer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:37:32.970

请记住将数组指针初始化为 NULL。否则，该值未定义，检查可能不起作用。

请记住在删除数组后将指针设置为 NULL。否则 if 检查将再次通过，您将得到分段错误。

您可能会收到来自编译器的警告。如果您使用过`valgrind`，您肯定会收到有关检查未初始化值的警告。

# java - 在java中使用request.getParameter声明字符串时检查字符串是否为空

> ID：15062088
> 
> 赞同：0
> 
> 时间：2013-02-25T07:34:18.853
> 
> 标签：java, jsp, jakarta-ee

我正在尝试检查我使用 request.getParameter 声明的字符串是否为空或空。

但是当我尝试执行此代码时，我不断收到错误消息：错误是 nullexception 错误。

```
<%
String name = request.getParameter("name");
String acctnum = request.getParameter("acctnum");
String pin = request.getParameter("pin");
String balance = request.getParameter("balance");
out.println(name+acctnum+pin+balance);
try {
Class.forName("com.mysql.jdbc.Driver");
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/jsp", "root", "");

String sql = "Insert into users(name, account_numer, pin, balance) values('"+name+"',     '"+acctnum+"', '"+pin+"', '"+balance+"')";
Statement stmt = conn.createStatement();
stmt.execute(sql);

conn.close();
if(name != null){
response.sendRedirect("index.jsp");
}

} catch (ClassNotFoundException e) {
e.printStackTrace();
} catch (SQLException e) {
e.printStackTrace();
}
%> 
```

我也试过 .equals("") 但无济于事。

我在这里做错了什么，我想检查字符串是空的还是空的，以防止它重定向到另一个页面。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:38:03.370

我相信您在到达之前会遇到异常`if(name != null)`。您在初始化`sql`变量时正在使用参数。您是否希望`null`在执行此操作时出现字符串？

我认为您应该在执行任何与数据库相关的操作之前进行空检查：

```
if (nullChecksPassed) {
    Class.forName("");
    Connection conn = DriverManager.getConnection("");
    String sql = "";
    Statement stmt = conn.createStatement();
    stmt.execute(sql);
    conn.close();
}
if (name != null) {
    response.sendRedirect("index.jsp");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:39:11.200

可能值得检查一下 Apache 的[`StringUtils`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)类，更具体地说是[`isEmpty(String str)`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isEmpty%28java.lang.String%29)方法：

> public static boolean isEmpty(String str) 检查字符串是否为空 ("") 或 null。
> 
> StringUtils.isEmpty(null) = true
> StringUtils.isEmpty("") = true
> StringUtils.isEmpty(" ") = false
> StringUtils.isEmpty("bob") = false
> StringUtils.isEmpty(" bob ") = false
> 
> 注意：此方法在 Lang 2.0 版中有所更改。它不再修剪字符串。该功能在 isBlank() 中可用。
> 
> 参数： str - 要检查的字符串，可以为 null
> 
> 返回：如果 String 为空或 null，则返回 true

此外，您可能希望对 SQL 查询使用准备好的语句。您拥有的那个很容易发生 SQL 注入。

# c++ - 制作采用任意数量的 void 函子的可变参数函数

> ID：15062096
> 
> 赞同：2
> 
> 时间：2013-02-25T07:34:58.450
> 
> 标签：c++, templates, c++11, variadic-templates

[受我上一个问题的启发：制作可变参数函数，该函数采用任意函子并返回输入函子的每个返回值的元组](https://stackoverflow.com/questions/15059250/make-variadic-function-which-takes-arbitary-functors-and-returns-a-tuple-of-each)

现在，我想创建一个只执行每个可能返回 void 的函数对象的类。据我所知，我可以制作类似的东西，

```
class A
{
public:
    template <class Func>
    void operator()(Func func)
    {
        func();
    }

    template <class First, class... Funcs>
    void operator()(First first, Funcs... funcs)
    {
        first();
        operator()(funcs...);
    }
}; 
```

这段代码完成了这项工作。但是，我想上面链接中`Nawaz`的代码必须有更聪明的方法。`mfontanini`

我在下面尝试模仿他们的代码。

```
class A
{
public:
    template <class... Func>
    void operator()(Func func...)
    {
        func()...;
    }
}; 
```

但是，gcc 4.7.2 无法编译。我在这里失踪了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:50:09.847

要扩展 Nawaz 的答案，您需要特定的*上下文*来执行包扩展 - 它不能在任何地方完成。其中一个上下文是函数参数，另一个是任何类型的初始化。

Nawaz 给出的`sink`函数是一个很好的起点，但它有一个严重的缺陷——你没有保证函子执行的顺序。如果您希望您的用户能够依赖他们传递给您的顺序，您需要一个确保从左到右评估的上下文。数组初始化和列表初始化都适合这里。

使用数组初始化：

```
template <class... Func>
void operator()(Func func...)
{
    int ignored[] = { (func(),0)... };
    (void)ignored; // silence unused variable warnings
} 
```

使用列表初始化：

```
struct swallow{
  template<class... Ignored>
  swallow(Ignored&&...)
};

template <class... Func>
void operator()(Func func...)
{
    swallow{ (func(),0)... }; // create a temporary 'swallow' from all arguments
} 
```

该`(func(), 0)`部分只是执行`func`，丢弃返回值（如果有），然后计算为`0`。

通常，如果您想对任何仿函数执行此操作，而不管返回类型如何，并且只是丢弃结果，您会将其写为`(void(func()), 0)...`. 如果有的话，该`void(...)`部分会吞下来自 的任何返回值`func()`。这是必需的，因为允许用户重载`operator,`，并且可能决定为他自己的类型和`int`（字面量的类型`0`）这样做，这会破坏您的努力。但是，您不能`operator,`在`void`任何方面超载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T07:42:04.357

你可以这样做：

```
template <class... Func>
void operator()(Func ... func) //corrected the syntax here
{
    sink( (func(),0)... );
} 
```

其中`sink`定义为：

```
template<typename ...T> void sink(T...) {} 
```

的目的`sink`是吃掉表达式的值，而不管返回的是`(func(),0)`什么。即使返回类型为.`0``func()``func()``void`

*   [在线演示](http://stacked-crooked.com/view?id=d8be78d9e671e2efa81ee56cacb53159)

请注意，在上面的演示中，前两个函数返回了一些东西，但第三个返回了`void`。

如果您希望从左到右调用函数，则可以使用列表初始化语法：

```
 int sink[]{func(),0)... }; 
```

但它不必要地创建了一个*变量*。所以我会定义`sink`为结构：

```
struct sink
{
     template<typename ...T> 
     sink(T...) {}  //templated constructor!
}; 
```

有了这个，你可以这样做：

```
sink { (func(),0)... }; //note the curly-braces now! 
```

更新的演示：

*   [在线演示](http://stacked-crooked.com/view?id=2679b4748a288425ec0d45967aa0ca54)

希望有帮助。

# wordpress - WP：如何删除 wp_enqueue_script 中的版本号？

> ID：15062105
> 
> 赞同：5
> 
> 时间：2013-02-25T07:35:32.170
> 
> 标签：wordpress, wordpress-theming

我正在尝试从`wp_enqueue_script`. 似乎我应该在每个[http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)`null`的第 4 个参数上传递一个：

```
wp_enqueue_script('jquery', false, array(), null, false); 
```

它不工作。我仍然看到版本号。我该如何删除它？

另外，如何使用`wp_enqueue_script`才能从 Google CDN 获取 jQuery？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T07:43:10.643

您可以使用

```
wp_enqueue_script('jquery', 'URL', array(), '', false); 
```

或者

```
wp_enqueue_script('jquery', 'URL', array(), null, false); 
```

或者您可以放置​​一个通用名称占位符

```
wp_enqueue_script('jquery', 'URL', array(), 'custom', false); 
```

但特别是对于“jquery”，如果你想替换它，我会取消注册默认值

```
wp_deregister_script('jquery');
$GoogleJqueryURI = 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js';
wp_register_script('jquery', $GoogleJqueryURI, array(), 'custom', false);
wp_enqueue_script('jquery'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:43:03.520

尝试这样的事情：

```
wp_deregister_script('jquery'); 
wp_register_script('jquery', ('http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'), false, NULL);
wp_enqueue_script('jquery'); 
```

$ver 和 $in_footer 是可选的。所以就不要管它们了。

此外，如果您使用 google cdn，那么将很难以任何方式隐藏版本，它在 url 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-06T22:56:24.630

An example when **version is not added**.

```
wp_enqueue_script('element-plus', 'https://cdn.jsdelivr.net/npm/element-plus@1.1.0-beta.9/dist/index.full.min.js', null, null) 
```

An output of code above will be:

```
<script src='https://cdn.jsdelivr.net/npm/element-plus@1.1.0-beta.9/dist/index.full.min.js' id='element-plus-js'></script> 
```

According to documentation several variables are accepted:

```
wp_enqueue_script( string $handle, string $src = '', string[] $deps = array(), string|bool|null $ver = false, bool $in_footer = false ) 
```

If value for $`ver` is false (or not given), then automatically version of WP is used.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-21T08:17:06.583

```
function remove_css_js_version( $src ) {
    if( strpos( $src, '?ver=' ) )
        $src = remove_query_arg( 'ver', $src );
    return $src;
}
add_filter( 'style_loader_src', 'remove_css_js_version', 9999 );
add_filter( 'script_loader_src', 'remove_css_js_version', 9999 ); 
```

# java - 在 LAN 上运行实例的客户端 swing 应用程序上休眠

> ID：15062110
> 
> 赞同：0
> 
> 时间：2013-02-25T07:35:46.823
> 
> 标签：java, hibernate, rmi

我已经编写了程序的 2 个部分 - 客户端和服务器。

服务器安装在我的数据库所在的机器上（mysql）。

然后将客户端安装在各种机器上，然后客户端使用 RMI 与服务器交互。

服务器正在使用休眠来处理数据库（mysql）。

现在，如果客户端尝试同时在数据库中输入新行，它们都将具有相同的字段，这些字段将由服务器端编写的一些逻辑进行递增。

就我而言，我已经尝试过使方法同步，但它似乎不起作用。看起来好像多个客户端同时进行相同的方法调用。

# javascript - 在 ng-class 和 ng-click 属性中使用循环变量

> ID：15062111
> 
> 赞同：2
> 
> 时间：2013-02-25T07:35:52.123
> 
> 标签：javascript, css, angularjs

以下代码创建了一个包含七个缩略图的列表，并且活动图像应该具有类`active`(and `thumb`)。

```
<div ng-repeat="no in [1, 2, 3, 4, 5, 6, 7]">
  <img ng-src="images/{{no}}t.jpg" 
    class="thumb" ng-class="{'active': imgNumber == no}" ng-click="change(no)"/>
</div> 
```

图像正确显示，但该类`active`未应用于当前选定的图像，并且单击时图像不会更改。

那是控制器：

```
function Gallery($scope) {
    $scope.imgNumber = "1";
    $scope.change = function(imgNumber) {
        $scope.imgNumber = imgNumber;
    }
} 
```

如果我展开循环并`no`用当前图像编号替换，一切都会按预期工作。

`ng-class`为什么and中的表达式不起作用`ng-click`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:57:05.150

我看不出有什么问题。我试图用这个 jsFiddle 来模拟它：http: [//jsfiddle.net/63xze/](http://jsfiddle.net/63xze/)它似乎按预期工作。你能编辑那个 jsFiddle 来说明你的问题吗？

由于我无法在没有代码的情况下发布 jsFiddle，因此我的 jsFiddle 如下所示：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    var myApp = angular.module('myApp', []);

    myApp.controller('MainCtrl', ['$scope', function($scope){
        $scope.imgNumber = "1";
        $scope.change = function(imgNumber) {
            $scope.imgNumber = imgNumber;
        }
    }]);
    </script>
    <style>
    .img {
        background: red;
        width: 15px;
        height: 15px;
    }
    .img.active {
        background: black;
    }
    </style>
</head>
<body ng-controller="MainCtrl">
    <div ng-repeat="no in [1, 2, 3, 4, 5, 6, 7]">
        <div class="img" class="thumb" ng-class="{'active': imgNumber == no}" ng-click="change(no)">{{no}}</div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:01:56.137

问题和解决方案超出了我的示例：

```
<p ng-controller="Gallery"> <!-- p can not contain div! -->
    <img ng-src="images/{{imgNumber}}.jpg"/>
    <div ng-repeat="no in [1, 2, 3, 4, 5, 6, 7]">
        <img ng-src="images/{{no}}t.jpg" class="thumb" 
            ng-class="{'active': imgNumber == no}" ng-click="change(no)"/>
    </div>
</p> 
```

问题是`<p>`标签包含一个`<div>`简单的非法嵌套！

如果我替换`p`一切`div`按预期工作。

```
<div ng-controller="Gallery">
    <img ng-src="images/{{imgNumber}}.jpg"/>
    <div ng-repeat="no in [1, 2, 3, 4, 5, 6, 7]">
        <img ng-src="images/{{no}}t.jpg" class="thumb" 
            ng-class="{'active': imgNumber == no}" ng-click="change(no)"/>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T14:03:21.220

查看有关表达式的文档[http://docs.angularjs.org/guide/expression](http://docs.angularjs.org/guide/expression)

不允许的条件：

> 无控制流语句：您不能在角度表达式中执行以下任何操作：条件、循环或抛出。

解决方案是在您的控制器中创建一个方法。即使对于简单的事情也是如此。`$rootScope`如果您想在许多控制器中使用它，可以将此方法添加到。

> 另一方面，如果您确实想运行任意 JavaScript 代码，则应将其设为控制器方法并调用该方法。

# javascript - Angularjs过滤器错误：“错误：未知提供者：textProvider”

> ID：15062113
> 
> 赞同：16
> 
> 时间：2013-02-25T07:35:59.387
> 
> 标签：javascript, angularjs

我为我的 angularjs 项目创建了一个自定义过滤器，类似于以下小提琴[http://jsfiddle.net/tUyyx/](http://jsfiddle.net/tUyyx/)。

```
myapp.filter('truncate',function(text,length){
    var end = "..."
    text = text.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
    if (isNaN(length))
     length = 23;

    if (text.length <= length || text.length - end.length <= length) {
        return text;
    }
    else {
        return String(text).substring(0, length-end.length) + end;
    }

}); 
```

但是当我使用过滤器时出现以下错误

```
Error: Unknown provider: textProvider <- text <- truncateFilter
    at Error (<anonymous>)
    at http://localhost/javascripts/lib/angular.min.js:28:236
    at Object.c [as get] (http://localhost/javascripts/lib/angular.min.js:26:13)
    at http://localhost/javascripts/lib/angular.min.js:28:317
    at c (http://localhost/javascripts/lib/angular.min.js:26:13)
    at Object.d [as invoke] (http://localhost/javascripts/lib/angular.min.js:26:147)
    at http://localhost/javascripts/lib/angular.min.js:28:335
    at Object.c [as get] (http://localhost/javascripts/lib/angular.min.js:26:13)
    at http://localhost/javascripts/lib/angular.min.js:99:481
    at o (http://localhost/javascripts/lib/angular.min.js:66:471) 
```

我已经像这样创建了我的模块。

```
var myapp = angular.module('myapp', ['ngResource']); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-25T07:46:45.487

如果您查看该 jsFiddle 中的代码，该过滤器函数会返回一个将`text`etc 作为参数的函数。它应该是这样的：

```
myapp.filter('truncate',function(){
    return function(text, length) {
        var end = "..."
        text = text.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
        if (isNaN(length))
         length = 23;

        if (text.length <= length || text.length - end.length <= length) {
            return text;
        }
        else {
            return String(text).substring(0, length-end.length) + end;
        }
    }
}); 
```

您获得“未知提供者：textProvider”的原因是因为您`text`将过滤器作为参数。这使得 Angular 寻找一个`text`不存在的服务。它是您返回的函数，它`text`作为参数。

这样想，第一个函数（传递给 angular.filter 的函数）是第一个创建过滤器的函数。该功能仅在您的应用程序中执行一次。该函数的职责是创建另一个函数并返回它，它返回的函数就是你的过滤器。你有一个返回函数的函数的原因是让你根据你的系统返回不同的实现。也许是这样的：

```
myapp.filter('truncate', function(myService) {
    if (myService.someCondition()) {
        return function(text, length) {
            // return the text as usual
        }
    } else {
        return function(text, length) {
            // return the text and do some other things as well
        }
    }
}); 
```

# android - 安装到系统（固件）的 Android 应用程序在启动时崩溃，但在安装在数据/数据中时不会崩溃

> ID：15062116
> 
> 赞同：0
> 
> 时间：2013-02-25T07:36:22.837
> 
> 标签：android, android-ndk, firmware

我必须让我的应用程序为固件映像工作。我的应用程序在像普通应用程序一样安装到数据/数据/包/...时运行良好，但是当我将它包含在固件中时，它在启动时崩溃。

这是我第一次开发固件应用程序，我不知道其中的差异，而且很难在 Google 上找到任何东西。事实上，我还没有发现任何有用的东西。

首先，我怀疑访问了文件空间 data/data/package/files 并完全删除了它的使用，但它仍然崩溃。我已经放入 Toasts 以查看应用程序在加载过程中的进展情况，但我时不时地只得到第一个 toast，所以我预计它会出现重大问题。

我还取消了对 SharedPreferences 和 Bundle 的所有使用，但它仍然会立即崩溃。

我什至基本上把整个项目都拿出来了，只给MainActivity加载了一个布局。仍然崩溃。

只是为了测试，我创建了一个简单的应用程序，它只显示一个 Hello World 并将其加载到系统中。它开始没有任何问题。

我还应该提到，我的应用程序经常使用 Android NDK，但我假设它在第一次使用之前就崩溃了，因为我没有在第一次访问之前获取 Toasts。

所以我的问题是：有没有办法调试安装到系统文件夹的应用程序？我需要任何特殊权限吗？我需要为 ndk 指定“固件”吗？一般来说，在创建系统应用程序时我需要注意哪些差异？

这里是堆栈跟踪：

```
02-26 09:40:42.041: E/Trace(1790): error opening trace file: No such file or directory (2)
02-26 09:40:42.071: D/dalvikvm(1790): WAIT_FOR_CONCURRENT_GC blocked 0ms
02-26 09:40:42.241: D/dalvikvm(1790): No JNI_OnLoad found in /system/lib/libpackage.so 0x4220f7d0, skipping init
02-26 09:40:42.721: D/dalvikvm(1790): GC_FOR_ALLOC freed 568K, 6% free 13110K/13852K, paused 15ms, total 15ms
02-26 09:40:42.721: I/dalvikvm-heap(1790): Grow heap (frag case) to 16.638MB for 3850256-byte allocation
02-26 09:40:42.731: D/dalvikvm(1790): GC_FOR_ALLOC freed 30K, 5% free 16840K/17616K, paused 9ms, total 9ms
02-26 09:40:42.771: I/MainActivity(1790): ON RESUME
02-26 09:40:42.951: W/dalvikvm(1790): No implementation found for native Lcom/mypackage/MainView;.MyJNICall:()[I
02-26 09:40:42.951: D/AndroidRuntime(1790): Shutting down VM
02-26 09:40:42.951: W/dalvikvm(1790): threadid=1: thread exiting with uncaught exception (group=0x417ee7d0)
02-26 09:40:42.951: E/AndroidRuntime(1790): FATAL EXCEPTION: main
02-26 09:40:42.951: E/AndroidRuntime(1790): java.lang.UnsatisfiedLinkError: Native method not found: com.mypackage.MainView.MyJNICall:()[I
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.mypackage.MainView.MyJNICall(Native Method)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.mypackage.MyManager.anotherFunction(MyManager.java:43)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.mypackage.MainView.myMethod(MainView.java:1330)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.mypackage.MainView.init5(MainView.java:525)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.mypackage.MainActivity$LoadViewTask.onPostExecute(MainActivity.java:236)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.mypackage.MainActivity$LoadViewTask.onPostExecute(MainActivity.java:1)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at android.os.AsyncTask.finish(AsyncTask.java:631)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at android.os.Looper.loop(Looper.java:150)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at android.app.ActivityThread.main(ActivityThread.java:4833)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at java.lang.reflect.Method.invokeNative(Native Method)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at java.lang.reflect.Method.invoke(Method.java:511)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-26 09:40:42.951: E/AndroidRuntime(1790):     at dalvik.system.NativeStart.main(Native Method)
02-26 09:40:49.711: I/dalvikvm(1790): threadid=3: reacting to signal 3
02-26 09:40:49.731: I/dalvikvm(1790): Wrote stack traces to '/data/anr/traces.txt'
02-26 09:42:13.691: I/Process(1790): Sending signal. PID: 1790 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:24:57.523

好的，经过一番头疼后，我找到了原因。system/libs 中的本机库在安装时未更新，并且使用的是相当旧的版本。手动更新库解决了这个问题。我将不得不与制造商讨论这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:13:45.487

根据我在这里看到的：

```
No implementation found for native Lcom/mypackage/MainView;.MyJNICall:()[I 
```

这意味着您的实现未包含在您的代码中。确保您正在打包 JNI 实现并将其与应用程序正确链接。此外，如果您正在调用`MyJNICall()`，那么这假定代码在那里。

# iphone - 恢复密码生成

> ID：15062119
> 
> 赞同：3
> 
> 时间：2013-02-25T07:36:45.550
> 
> 标签：iphone, ios, password-recovery, forgot-password

在测试我们的应用程序期间，观察到如果用户忘记密码，则无法进入应用程序。

发现这一点后，我们实施了如下密码生成技术 1\. 使用用户信息创建特定字符串。2\. 对字符串应用 SHA1 3\. 将 SHA1 哈希的一部分作为密码

上述算法适用于服务器端和设备端。这样他们就不需要有任何交互了。所以如果用户忘记了他的密码，他可以请求服务器。服务器运行上述算法并将生成的密码发送到用户电子邮件。在设备端，使用相同的中音生成相同的密码。因此，当用户输入它时，它匹配并且用户被授予访问权限。

不知何故，我对此并不满意，因为我们使用相同的字符串来生成密码。因此，每次用户忘记密码并生成密码时，他都会得到相同的密码，这不是密码生成器的工作方式。

所以我正在考虑向字符串添加更多内容，这些内容将是可变的，但在服务器端和设备端都是相同的。其中一个选项是使用字符串中的日期，但如果服务器位于不同的时区，设备和服务器将生成不同的密码。

有没有更好的解决方案？请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:44:07.283

听起来您想使用“基于哈希的消息身份验证代码”（[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)）。这背后的想法是，即使在纯文本连接中，用户的密码也是不可见的，因为用户名、密码和服务器生成的“会话密钥”用于生成随会话密钥更改而更改的哈希。鉴于散列是单向的，不可能从通过网络连接发送的散列中推导出用户的密码。

太阳底下没有新鲜事。

# python - Suds 无法解析新的 wsdl 文件

> ID：15062122
> 
> 赞同：0
> 
> 时间：2013-02-25T07:37:07.917
> 
> 标签：python, soap, wsdl, soap-client, suds

我有一个 Python 脚本，它通过 SOAP 接口使用 suds 0.4.1-3.el6 与一些第三方软件一起工作。

一切正常，直到最近更新软件。现在所有脚本都像：

```
#!/usr/bin/python
# -*- coding: UTF-8 -*-
#

import logging
from suds import WebFault
from suds.client import Client

logging.basicConfig(level=logging.INFO)
logging.getLogger('suds.client').setLevel(logging.DEBUG)

client = Client("http://localhost:80/admin/soap/api3.wsdl")
#print client.location
#client.location = 'http://localhost:34012/'

print client 
```

以。。结束：

```
Traceback (most recent call last):
  File "print.py", line 18, in <module>
    client = Client("http://localhost:80/admin/soap/api3.wsdl")
  File "/usr/lib/python2.6/site-packages/suds/client.py", line 119, in __init__
    sd = ServiceDefinition(self.wsdl, s)
  File "/usr/lib/python2.6/site-packages/suds/servicedefinition.py", line 58, in __init__
    self.paramtypes()
  File "/usr/lib/python2.6/site-packages/suds/servicedefinition.py", line 137, in paramtypes
    item = (pd[1], pd[1].resolve())
  File "/usr/lib/python2.6/site-packages/suds/xsd/sxbasic.py", line 63, in resolve
    raise TypeNotFound(qref)
suds.TypeNotFound: Type not found: '(soapDiscountAddons, http://www.w3.org/2001/XMLSchema, )' 
```

软件支持人员说“我们的 WSDL 文件很好，请咨询 suds 开发人员”，所以我需要帮助来调查这个问题。

以前的工作文件：
[https ://dl.dropbox.com/u/4299326/py/20130225.wsdl/old/api3.wsdl](https://dl.dropbox.com/u/4299326/py/20130225.wsdl/old/api3.wsdl)
[https://dl.dropbox.com/u/4299326/py/20130225.wsdl/old /encoding.xml](https://dl.dropbox.com/u/4299326/py/20130225.wsdl/old/encoding.xml)

新的崩溃文件：
[https ://dl.dropbox.com/u/4299326/py/20130225.wsdl/new/api3.wsdl](https://dl.dropbox.com/u/4299326/py/20130225.wsdl/new/api3.wsdl)
[https://dl.dropbox.com/u/4299326/py/20130225.wsdl/new /encoding.xml](https://dl.dropbox.com/u/4299326/py/20130225.wsdl/new/encoding.xml)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T10:24:04.950

> 软件支持人员说“我们的 WSDL 文件很好，请咨询 suds 开发人员”

我不认为这是正确的。`Type not found: '(soapDiscountAddons, http://www.w3.org/2001/XMLSchema, )'`suds 显示的消息是正确的。

通过查看您的 WSDL，`soapDiscountAddons`它位于`urn:api3`名称空间中，因此您需要在使用它时提及它。问题在这里：

```
<!-- operation response element -->
<element name="getDiscountAddonsResponse">
  <complexType>
    <sequence>
      <element name="ret" type="soapDiscountAddons" minOccurs="1" maxOccurs="unbounded"/>
    </sequence>
  </complexType>
</element>
<!-- operation request element -->
<element name="insupdDiscountAddon">
  <complexType>
    <sequence>
      <element name="val" type="soapDiscountAddons" minOccurs="1" maxOccurs="1"/>
    </sequence>
  </complexType>
</element> 
```

因为您没有为类型添加前缀，所以使用的是当前命名空间`http://www.w3.org/2001/XMLSchema`，而不是`urn:api3`. suds 不是寻找`soapDiscountAddons@urn:api3`类型在哪里，而是试图找到一个`soapDiscountAddons@http://www.w3.org/2001/XMLSchema`当然不存在的元素。

这应该解决它：

```
<element name="getDiscountAddonsResponse">
 <complexType>
  <sequence>
    <element name="ret" type="lbapi:soapDiscountAddons" minOccurs="1" maxOccurs="unbounded"/>
    <!--                      ^^^^^ you are missing this  -->
  </sequence>
 </complexType>
</element>
<!-- operation request element -->
<element name="insupdDiscountAddon">
 <complexType>
  <sequence>
   <element name="val" type="lbapi:soapDiscountAddons" minOccurs="1" maxOccurs="1"/>
   <!--                      ^^^^^ you are missing this  -->
  </sequence>
 </complexType>
</element> 
```

# asp.net - 更新面板中的多个模式弹出扩展器

> ID：15062132
> 
> 赞同：0
> 
> 时间：2013-02-25T07:37:53.547
> 
> 标签：asp.net, asp.net-ajax, updatepanel, modalpopupextender

我在更新面板中有两个模式弹出扩展器。问题是当我调用任何模式弹出窗口的 show 方法时，都会显示两个弹出窗口。

请让我知道我们该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:51:52.767

我没有看到任何代码的猜测是您将它们绑定到同一个控件。

```
<asp:button id="SAME_ID" runat="server" />

<ajaxtoolkit:modalpopupextender 
    id="ModalPopupExtender" 
    runat="server"    
    targetcontrolid="SAME_ID"> 
</ajaxtoolkit:modalpopupextender> 

<ajaxtoolkit:modalpopupextender 
    id="ModalPopupExtender2" 
    runat="server"    
    targetcontrolid="SAME_ID"> 
</ajaxtoolkit:modalpopupextender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:39:31.287

您需要多个 MPE 吗？如果您尝试根据用户交互或数据状态显示不同的表单，请考虑将更新面板移动到单个 MPE 的边界内，然后显示/隐藏包含内容块的占位符（或面板）。

MPE 是非常重的客户端，将它们放在更新面板中可确保您在更新面板更新时发送大量代码和标记。MPE 也非常脆弱，如果它们在其下方移动的地面无法正常运行（例如更新面板更新时），我不会感到惊讶。然而，他们确实对他们内在内容的变化做出了相当好的反应。如果内容块的大小不同，您可能会遇到背景和阴影问题，但这些都是可配置的。

您还应该考虑使用 jquery 对话框而不是 MPE。它们更干净、更健壮、更容易处理、更灵活，并且只丢失了一些特性，比如访问事件的简单代码，但这是一个值得的权衡。

# audio - VSTSDK2.4 源的过滤器示例

> ID：15062138
> 
> 赞同：1
> 
> 时间：2013-02-25T07:38:24.693
> 
> 标签：audio, filter, signal-processing, vst

是否有任何现有示例如何为 vstsdk2.4 实现 dsp 过滤器？我的意思是类似于 vstsdk（.h 和 .cpp 文件）中包含的源示例，以便于理解它是如何工作的。在网上搜索了很长时间，发现很多关于过滤器设计的内容，但这对我没有任何用处（目前和我的知识）。每个例子都会非常受欢迎......

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:16:23.437

尚未深入阅读，但这里有一个 KVR-Audio 线程，其中可能包含您需要的信息。

[http://www.kvraudio.com/forum/viewtopic.php?t=249926](http://www.kvraudio.com/forum/viewtopic.php?t=249926)

KVR Audio DSP 论坛是问这些问题的好地方： [http ://www.kvraudio.com/forum/viewforum.php?f=33](http://www.kvraudio.com/forum/viewforum.php?f=33)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:05:17.820

[https://github.com/teragonaudio](https://github.com/teragonaudio)

我在那里实现了一些开源过滤器，您可以查看它们。尽管它们是基于 Juce 构建的，但您似乎正在寻找 DSP 算法，而不是 VST 样板文件。

# ruby-on-rails-3 - 带导轨的自动应答器

> ID：15062145
> 
> 赞同：1
> 
> 时间：2013-02-25T07:38:59.490
> 
> 标签：ruby-on-rails-3, auto-responder

如何在 ruby​​ on rails 3.2.x 中实现电子邮件自动回复？我用谷歌做了一些研究，我发现了这个：[dram.rubyforge.org/](http://dram.rubyforge.org/)。问题是，宝石似乎还没有发布。

有人对此有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T03:54:51.293

还有另一种名为[Faucet](https://github.com/dshipper/Faucet)的宝石可能有用。

目前它只支持 Rails 3.1，因为 Dan Shipper（作者）有一段时间没有更新它，但我可能会很快发出拉取请求，因为我正在为我在 Rails 3.2 上的项目调整它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T04:28:42.190

[mailman](https://github.com/titanous/mailman) gem 也可能对您有用。它是一个用于轮询电子邮件帐户的简单 gem，它的设置过程非常简单。

最重要的是，有一个[Railscast](http://railscasts.com/episodes/313-receiving-email-with-mailman)可以引导您完成它。您需要 Railscast 专业帐户才能观看视频，但如果您没有订阅，您仍然可以在[github](https://github.com/railscasts/313-receiving-email-with-mailman)上查看该剧集的代码。

# html - css边框没有显示在每个元素的顶部

> ID：15062146
> 
> 赞同：0
> 
> 时间：2013-02-25T07:39:02.827
> 
> 标签：html, css

我刚刚开始进行 Web 开发。我希望在我的每个产品行的顶部保留一个边框。就像是：

* * *

产品图片 产品描述

* * *

图片描述

* * *

. .

然而，我的边界只在第一个街区的顶部看到。请帮忙。

下面是我尝试过的 CSS & html

```
.prdDes
{
    width:82%;
    float:right;
    padding-top:5px;
}

.prdDet
{
    border-top-color:#ddd;
    border-top-style:dashed;
    border-top-width:1px; 
} 
```

```
<div class="prdDet">
    <img src="images/profile/0.png" class="productimg" />
    <div class="prdDes">
        <h3>Product 1</h3>

        <p>Details about the product1\. Specifications etc.</p>
        <ul>
            <li>Spec1</li>
            <li>Spec2</li>
            <li>Spec3</li>
            <li>Spec4</li>
        </ul>
    </div>
</div>
<div class="prdDet">
    <img src="images/profile/14.png" class="productimg" />
    <div class="prdDes">
        <h3>Product 2</h3>

        <p>Details about the product2\. Specifications etc.</p>
        <ul>
            <li>Spec1</li>
            <li>Spec2</li>
            <li>Spec3</li>
            <li>Spec4</li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:42:20.477

添加

```
overflow: auto; 
```

到`.prdDet`课堂风格。这是一个例子：http: [//jsfiddle.net/dvFqn/](http://jsfiddle.net/dvFqn/)

为什么有必要添加该样式？因为`.prdDes`将浮动设置为左侧，它以某种方式从标准文档流中消失，所以它的父`.prdDet`级没有将它的高度/宽度设置为它的内容。设置`overflow: auto`修复了该行为，并使其`.prdDet`内容与其内容一样高和广泛，在这种情况下所需的行为是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:55:52.297

你`float:right;`在你的prdDes类中使用过。这意味着元素将浮出它们所在的 div，除非它们的父 div 也不浮动。所以对于`prdDet`你必须使用的课程`float:left;`......这将解决你的问题。

# php - 请求是否已被重定向？

> ID：15062148
> 
> 赞同：2
> 
> 时间：2013-02-25T07:39:10.720
> 
> 标签：php, curl

我正在通过 PHP 使用 CURL，我需要了解在此过程中请求是否已被重定向。

我已使用**curl_setopt()将****CURLOPT_FOLLOWLOCATION**选项设置为 true 。

 **现在，如果我请求`example.com/page.php`如何理解页面是否更改了**Location:**而无需手动解析响应的标头？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:44:40.940

不要使用`CURLOPT_FOLLOWLOCATION`，改为发出 HEAD 请求并检查响应状态代码是否为重定向（301、302、303、305 和 307 是重定向代码）

头请求是通过`CURLOPT_NOBODY`

状态码可以用`curl_getinfo($ch, CURLINFO_HTTP_CODE);`

**更新**

如果您需要实际重定向页面的响应，我找到了一个更简单的解决方案：

```
if (curl_getinfo($ch,  CURLINFO_REDIRECT_COUNT) > 0) {
    // redirected
} 
```

因此，您可以跟踪重定向并确定之后是否有任何重定向。**

# mule - Mule Studio ESB 发现以元素“xa-transaction”开头的无效内容

> ID：15062151
> 
> 赞同：0
> 
> 时间：2013-02-25T07:39:19.847
> 
> 标签：mule, mule-studio

当我选择事务类型从无事务更改为 XA 事务时出现此错误

我该如何解决？

这是我下面的配置

```
<flow name="insert_flow" doc:name="insert_flow">
    <jdbc-ee:outbound-endpoint exchange-pattern="one-way" queryKey="INSERT_TOKEN" queryTimeout="-1" connector-ref="Database" doc:name="Insert to mysql">
        <jdbc-ee:query key="INSERT_TOKEN" value="insert into users(FirstName) values(#[FirstName]);"/>
        <xa-transaction action="ALWAYS_BEGIN" interactWithExternal="true"/>
    </jdbc-ee:outbound-endpoint>
    <scripting:component doc:name="pyhon return success result">
        <scripting:script engine="jython">
            <scripting:text><![CDATA[result = str('{\"status\":\"true\"}')]]></scripting:text>
        </scripting:script>
    </scripting:component>
    <rollback-exception-strategy doc:name="Rollback Exception Strategy"/>
</flow> 
```

感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:49:52.457

这是影响版本 1.3.x 的工作室验证的已知问题（详情请[点击此处](http://www.mulesoft.org/jira/browse/STUDIO-2592)）

[这已在 Studio 3.4 中修复，您可以在此博客文章](http://java.dzone.com/articles/mule-esb-and-mule-studio-34)中找到有关 Beta 版的信息

# c - 将结构数组传递给函数会更改数组的大小

> ID：15062157
> 
> 赞同：1
> 
> 时间：2013-02-25T07:39:25.400
> 
> 标签：c, arrays, function, struct

我有一个结构：

```
struct Thing {
    int id;
} 
```

然后我创建一个 s 数组`Thing`：

```
struct Thing *a;
a = (struct Thing *) malloc(sizeof(struct Thing));
a->id = 1;

struct Thing *b;
b = (struct Thing *) malloc(sizeof(struct Thing));
b->id = 2;

struct Thing *array[] = {a,b}; 
```

我检查数组的大小是 2。我通过以下方式检查数组的大小：

```
printf("%d",sizeof(array)/sizeof(array[0])); 
```

我还有一个函数可以接收一系列事物：

```
void function(struct Thing *array[]) {
    //do stuff
} 
```

然后我将数组传递给函数：

```
function(array); 
```

在函数内部，数组的大小是 1。有人可以指出我哪里出错了，为什么函数内部的数组大小是 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:40:35.170

当您将任何类型的数组传递给函数时，它*会衰减*为指向该数组第一个元素的指针。

```
void function(struct Thing *array[]) {
    //do stuff
} 
```

只是语法糖

```
void function(struct Thing** array) {
    //do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:44:15.540

你的数组定义

```
struct Thing *array[] = {a,b}; 
```

应该

```
struct Thing array[] = {a,b}; 
```

然后将其传递给函数；该函数应该被声明

```
void function(struct Thing *array, int count) {
//do stuff
} 
```

所以你可以传递数组的边界。

# selenium-webdriver - 如何使用 selenium python webdriver 在弹出窗口中单击确定按钮

> ID：15062163
> 
> 赞同：0
> 
> 时间：2013-02-25T07:39:40.563
> 
> 标签：selenium-webdriver

这里我需要删除一些记录。当我选择所有项目并单击删除按钮时。它显示了类似“你确定要删除它吗”的弹出窗口，并且没有按钮。然后我需要单击确定按钮并删除所选项目。但我使用了下面的代码，它没有点击确定按钮。如果有人知道这个答案，请告诉我..

```
class login(unittest.TestCase):
def setUp(self):
    self.driver= webdriver.Firefox()
    self.driver.implicitly_wait(30)
    self.base_url = "http://ww.example.com"
    self.verificationErrors = []
    self.accept_next_alert = True

def close_all_popups(driver):
    driver.window_handles
    for h in driver.window_handles[1:]:
        driver.switch_to_window(h)
        driver.close()
    driver.switch_to_window(driver.window_handles[0])

def test001_login(self):
    driver=self.driver
    driver.delete_all_cookies()
    driver.get(self.base_url +"/")
    driver.find_element_by_xpath("//*[@id='form-div']/form/input[1]").clear()
    driver.find_element_by_xpath("//*[@id='form-div']/form/input[1]").send_keys("xxxx")
    driver.find_element_by_xpath("//*[@id='form-div']/form/input[2]").clear()
    driver.find_element_by_xpath("//*[@id='form-div']/form/input[2]").send_keys("xxxxx")
    driver.find_element_by_xpath("//*[@id='form-div']/form/input[3]").click()
    driver.find_element_by_xpath("//*[@id='navigation']/li[4]/a").click()
    driver.find_element_by_xpath("//*[@id='selectall']").click()
    driver.find_element_by_xpath("//a[text()='Delete']").click()
    self.close_all_popups()

def is_element_present(self, how, what):
    try:self.driver.find_element(by=how, value=what)
    except NoSuchElementException, e: return False
    return True

def close_alert_and_get_its_text(self):
    try:
        alert = self.driver.switch_to_alert()
        if self.accept_next_alert:
            alert.accept()
        else:
            alert.dismiss()
        return alert.text
    finally: self.accept_next_alert = True

def tearDown(self):
    self.driver.quit()
    self.assertEqual([], self.verificationErrors) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:49:36.023

我认为您在单击删除后没有调用此方法

```
self.close_alert_and_get_its_text(self) 
```

# c# - 根据计算机时间删除

> ID：15062166
> 
> 赞同：-1
> 
> 时间：2013-02-25T07:40:04.217
> 
> 标签：c#, sql, sql-server, visual-studio-2010

如何根据我的计算机时间删除数据？例如，我想在 06.59（我的电脑时间）删除 table1 中的所有数据。我想我可以将 C# 与 sqlclient 一起使用，但我不知道它是如何工作的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:44:08.123

您可以创建一个简单的应用程序，使用 C# 和 ADO .NET 或 Linq-to-SQL 等删除数据……就像您说的那样。然后，您可以将应用程序设置为使用 Windows 调度程序运行（我假设您运行的是 Windows 而不是 Linux 上的 MONO 等......）。

微软官方关于如何安排任务的指南：

对于 Windows XP： http: [//support.microsoft.com/kb/308569 ?wa=wsignin1.0](http://support.microsoft.com/kb/308569?wa=wsignin1.0)

对于 Windows 7： http: [//windows.microsoft.com/en-US/windows7/Schedule-a-task](http://windows.microsoft.com/en-US/windows7/Schedule-a-task)

# ruby - 如何创建 Kafka 消费组？

> ID：15062171
> 
> 赞同：1
> 
> 时间：2013-02-25T07:40:14.503
> 
> 标签：ruby, apache-zookeeper, apache-kafka

我是卡夫卡的新手。我正在尝试使用 1 个主题和分配给该主题的 1 个消费者组来实现一个简单的排队系统。但是我不知道如何创建一个消费者组。

ps 我正在使用带有 kafka-rb gem 的 Ruby。

谢谢！埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-07T13:16:10.193

**更新：**我们（Zendesk）已经发布了[Racecar](https://github.com/zendesk/racecar)，这是一个建立在 ruby​​-kafka 之上的简化的 Kafka 消费者框架。

Racecar 消费者看起来像这样：

```
# simple_consumer.rb
class SimpleConsumer < Racecar::Consumer
  subscribes_to "some-topic"

  def process(message)
    puts message.value
  end
end 
```

为了运行它，只需执行以下命令：

```
$ gem install racecar
$ racecar --require my_consumer MyConsumer 
```

在 Github 上阅读更多信息：[https ://github.com/zendesk/racecar](https://github.com/zendesk/racecar)

原帖：

* * *

这是您在[ruby​​-kafka](https://github.com/zendesk/ruby-kafka)中的操作方法：

```
require "kafka"

kafka = Kafka.new(seed_brokers: ["kafka1", "kafka2"])
consumer = kafka.consumer(group_id: "my-group")

consumer.subscribe("my-topic")

consumer.each_message do |message|
  puts message.value
end 
```

另请参阅[自述文件](https://github.com/zendesk/ruby-kafka#consumer-groups)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T22:59:00.097

我一直在寻找同样的东西，我不认为它实际上是 Kafka 的一部分，而是 Java 驱动程序与 ZooKeeper 结合使用的东西。如果您阅读 Kafka 0.7 ( [http://kafka.apache.org/07/design.html](http://kafka.apache.org/07/design.html) ) 的设计文档，底部有一个标题为“消费者和消费者群体”的部分，他们在其中讨论了一些内容。这是有道理的，因为 ZooKeeper 可以很容易地用于跟踪一组消费者的最新偏移量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-05T05:44:50.653

如果你查看 kafka 消费者的配置（[http://kafka.apache.org/documentation.html](http://kafka.apache.org/documentation.html)），`group.id`它是一个唯一的字符串，用于标识该消费者所属的消费者组。 **默认情况下，它是“”**

似乎`kafka-rb`没有提供一种方法来做到这一点。但是其他一些宝石可以帮助您做到这一点，例如 [https://github.com/zendesk/ruby-kafka#consumer-groups](https://github.com/zendesk/ruby-kafka#consumer-groups) [https://github.com/karafka/karafka#group](https://github.com/karafka/karafka#group)

# c# - Windows 服务状态“正在启动”

> ID：15062173
> 
> 赞同：0
> 
> 时间：2013-02-25T07:40:17.000
> 
> 标签：c#, wcf, windows-services

我编写了一个自动启动的 Windows 服务，状态变为“已启动”。有时服务状态会进入“启动”状态，即使在重新启动系统后也无法恢复到“启动”状态。这可能是由于代码中一些未处理的异常而发生的。

```
public partial class EngineHostService : ServiceBase
{
    internal static ServiceHost _serviceHost = null;

    public EngineHostService()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        try
        {
            if (_serviceHost != null)
                _serviceHost.Close();

            _serviceHost = new ServiceHost(typeof(EngineService.Engine));
            _serviceHost.Open();
        }
        catch (Exception ex)
        {
            ErrorHandler.LogEvent(ex.Message);
        }
    }

    protected override void OnStop()
    {
        if (_serviceHost != null)
        {
            _serviceHost.Close();
            _serviceHost = null;
        }
    }

} 
```

在上面的代码中，当 Engine 类的构造函数执行时，它会抛出一些异常。我想停止服务： 1- 如果抛出一些异常。2-如果我在构造函数中调用的任何函数返回 false。有什么方法可以按我的意愿停止服务。如果我这样做，我肯定服务状态为“已启动”或“已停止”。建议一些方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:08:59.600

听起来要么`InitializeComponent`做太多工作，要么`EngineService.Engine`在*它的*启动中做了很多工作。坦率地说，你应该在启动时直接做很少的事情：验证配置，然后启动一个工作线程（或几个）来进行真正的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:18:55.827

分开关注。您应该尽快从 OnStart 返回，所以我建议在您的 OnStart 方法中启动一个异步 TPL 任务，然后什么都不做。

在异步任务中，您可以做任何您想做的事情。

通过这样做，您的服务将能够完成 OnStart 并正确地从 Started 移动到 Started。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:11:54.847

服务控制管理器希望 OnStart 在 30 秒内完成。如果您启动需要更多时间，请通过 RequestAdditionalTime(60 * 1000) 通知 SCM；如果 OnStart 时间过长，SCM 将警告“无法启动服务”。当 OnStart 完成你的服务必须准备好接受服务请求。

注意：不要使用构造函数来执行应该在 OnStart 中的处理。使用 OnStart 处理服务的所有初始化。构造函数在应用程序的可执行文件运行时调用，而不是在服务运行时调用。

# c# - 从 ADO 迁移到 ADO.net

> ID：15062174
> 
> 赞同：1
> 
> 时间：2013-02-25T07:40:18.273
> 
> 标签：c#, database-design, orm, ado.net, ado

我正在重新设计一个使用 ADO 通信连接到 SQL 的产品。业务层在 c++ 中。整个查询都写为 SP。我希望产品支持 SQL 2008 并且可能是 Mysql（尚未最终确定）。

这些是我认为的变化！

1.  将整个通信移至 ADO.net。
2.  由于从 SP 转移到 ad-hoc SQL 查询可能需要付出很多努力，因此如何编写一个包装 C# 层，该 C# 层由 C++ 中的前一个业务层使用。
3.  想到认真研究一些 ORM 工具。但由于它涉及很多 SP，我觉得最好是逐步进行。

我想要对此的反馈/建议。这是一个很好的过渡吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:51:15.180

根据个人喜好，我会创建 LINQ2SQL 或可能的实体框架层来访问数据库。LINQ2SQL 和实体框架都可以导入和调用存储过程的定义¹。

然后我会逐渐将存储过程转换为 LINQ 代码。

¹) 在合理的范围内，必须手动映射具有多个返回集和选择的 SP:s 不是来自单个表，但它仍然是可能的。

# r - 如何在 R 中聚合缩短的 OD 数据地理编码及其相关频率数据？

> ID：15062177
> 
> 赞同：0
> 
> 时间：2013-02-25T07:40:31.410
> 
> 标签：r, aggregate

我是一个相对较新的 R 用户，但为了完成我的实习研究任务，我不得不即时自学这门语言。

我正在使用起点-终点人口普查数据文件。这个数据看起来有点像这样：

```
w_geocode       h_geocode S000 SA01 SA02 SA03 SE01 SE02 SE03 SI01 SI02 SI03

1  360010001001005 - 360010001001010 -  1    0    1    0    0    0    1    1    0    0

2 360010001001005 - 360010001001011  -  1    0    1    0    0    0    1    1    0    0

3 360010001001005 - 360010001001039  -  1    0    1    0    0    0    1    1    0    0

4 360010001001005 - 360010014001009  -  1    0    1    0    0    0    1    0    1    0

5 360010001001005 - 360010015001007 -   1    0    1    0    0    0    1    0    1    0

6 360010001001005 - 360010019011001  -  1    0    1    0    0    0    1    1    0    0 
```

大约有 500 万行这样的数据。这 15 位数字中的每一个都代表一个非常具体的位置。为了使这些数据更相关，我设法使用以下方法将这 15 位代码缩短为 11 位代码：

```
options(scipen=100)  #to avoid scientific notation

nyod=read.csv("ny_od_main_JT00_2010.csv")

x=nyod[,1]

y=nyod[,2]

z=nyod[,3]

tx=trunc(x/10000)

ty=trunc(y/10000)

nyodI=cbind(tx,ty,z) 
```

之后我得到这样的东西：

```
 tx          ty z
[1,] 36001000100 36001000100 1

[2,] 36001000100 36001000100 1

[3,] 36001000100 36001000100 1

[4,] 36001000100 36001001400 1

[5,] 36001000100 36001001500 1

[6,] 36001000100 36001001901 1 
```

但是现在，如您所见，我有一些我想汇总的冗余。例如，理想情况下，现在我希望将第 1、2 和 3 行合并为 1，并且 z 的总和等于 3。但我需要为所有冗余完成此过程。

我希望我的问题足够具体，并且对任何可能阅读它的人都有意义。感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:50:05.613

使用`base`包，你只需要使用`aggregate`函数。

```
nyodI
##            tx          ty z
## 1 36001000100 36001000100 1
## 2 36001000100 36001000100 1
## 3 36001000100 36001000100 1
## 4 36001000100 36001001400 1
## 5 36001000100 36001001500 1
## 6 36001000100 36001001901 1

aggregate(z ~ tx + ty, data = nyodI, FUN = sum)
##            tx          ty z
## 1 36001000100 36001000100 3
## 2 36001000100 36001001400 1
## 3 36001000100 36001001500 1
## 4 36001000100 36001001901 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:03:16.750

您截断数据的第一部分很长，您可以这样做：

```
dat <- nyod[,1:3]
nyod[,1:2] <- trunc(nyod[,1:2]/1000) 
```

其余的，您可以按照建议使用`aggregate`，`ddply`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:55:06.777

尝试

```
library(plyr) 
df <– ddply(nyodI, .(tx, ty), summarise, z.sum=sum(z)) 
```

# serialization - 如何通过gen-class在Clojure中生成可序列化的java类？

> ID：15062179
> 
> 赞同：2
> 
> 时间：2013-02-25T07:40:39.257
> 
> 标签：serialization, clojure, clojure-java-interop, gen-class

我们需要通过 Java 序列化机制将 Clojure 生成的一堆 Java 对象序列化成一个文件。

```
(gen-class
 :name lancelot.Instance
 :extends cc.mallet.types.Instance)

(gen-class
 :name lancelot.FilterPipe
 :extends cc.mallet.pipe.Pipe
 :prefix "-filter-"
 :methods [[pipe [cc.mallet.types.Instance] lancelot.Instance]])

(defn -filter-pipe [this ^cc.mallet.types.Instance inst]
  (.setData inst (clojure.string/join " "
    (filter normal-word? (clojure.string/split (.getData inst) #"\s+"))))
  inst)

(gen-class
 :name lancelot.SegmentorPipe
 :extends cc.mallet.pipe.Pipe
 :prefix "-segmentor-"
 :methods [[pipe [cc.mallet.types.Instance] lancelot.Instance]])

(defn -segmentor-pipe [this ^cc.mallet.types.Instance inst]
  (.setData inst (seg/seg (.getData inst)))
  inst) 
```

如上，lancelot.FilterPipe 和 lancelot.SegmentorPipe 的实例需要序列化。我们发现写对象流是可以的，但是重新编译代码后读取对象流就不行了。

> 线程“Thread-8”中的异常 java.io.InvalidClassException: lancelot.SegmentorPipe; 本地类不兼容：流 classdesc serialVersionUID = 2583852145887230781，本地类 serialVersionUID = -2255006751011717591 at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:579) at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1601) at java.io .ObjectInputStream.readClassDesc(ObjectInputStream.java:1514) 在 java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750) 在 java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347) 在 java.io.ObjectInputStream.readObject(对象输入流.java:369)

由于serialVersionUID 是静态的和最终的，但似乎gen-class 只能生成实例级别的最终字段。所以问题是我无法为生成的类设置特定的serialVersionUID。

对这个问题有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-17T20:48:59.557

请尝试添加可序列化

`(gen-class :name lancelot.Instance :implements [java.io.Serializable] :extends cc.mallet.types.Instance)`

# rdf - 我们可以比较两个 RDF 语句吗？

> ID：15062181
> 
> 赞同：1
> 
> 时间：2013-02-25T07:40:47.630
> 
> 标签：rdf, rdfs

我有一个关于 rdf 语句的问题。我们可以比较两个 rdf 语句吗？例如，我从商店收到一份声明，我可以将其与 say 对象值的预定义声明进行比较吗？这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:26:43.320

如果两个 RDF 语句的组成部分（主语、谓语、宾语）相等，则它们是相等的。

来自：[http ://www.w3.org/TR/rdf-concepts/](http://www.w3.org/TR/rdf-concepts/)

> 当且仅当两个 RDF URI 引用作为 Unicode 字符串逐个字符比较相等时，它们才相等。
> 
> 当且仅当以下所有条件都成立时，两个字面量相等：
> 
> ```
> The strings of the two lexical forms compare equal, character by character.
> Either both or neither have language tags.
> The language tags, if any, compare equal.
> Either both or neither have datatype URIs.
> The two datatype URIs, if any, compare equal, character by character. 
> ```

# macos - AppleScript 模拟用户键盘输入

> ID：15062186
> 
> 赞同：0
> 
> 时间：2013-02-25T07:41:09.873
> 
> 标签：macos, applescript

首先，我将系统输入法更改为我想要的方法。（一些中文输入法）。
我正在尝试做的是从一个`txt`文件中读取一些字母，然后使用输入法将这些字母“翻译”成中文单词并将它们写入一个新文件。其中模拟用户输入一些单词。
但是，我发现当脚本运行很长时间（10 或 20 分钟）时，脚本会停止。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:41:56.430

您可能想发布您的代码。但是，您可以更改脚本超时的时间段：

```
with timeout of 120 seconds
    -- your code goes here
end timeout 
```

# windows-runtime - 扩展密封类

> ID：15062187
> 
> 赞同：0
> 
> 时间：2013-02-25T07:41:13.910
> 
> 标签：windows-runtime, .net-4.5, sealed

我正在使用 javascript 开发 Windows Store 应用程序。我还有用于客户端-服务器交互的 WinRT 库。客户端从服务器接收一个自定义类`User`，该类是密封的，因为它是 WinRT 库中的类所必需的。我需要扩展`User`对象以进一步用于数据绑定。

这样做的最佳实践是什么？有没有比创建新`UserDataBinding`类和复制所有属性更好的方法`User`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:52:53.593

使用[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)模式并用视图模型包装用户对象怎么样？

# c++ - 我将如何为 Windows 构建节点嵌合体？

> ID：15062188
> 
> 赞同：2
> 
> 时间：2013-02-25T07:41:24.170
> 
> 标签：c++, node.js, headless-browser

我有 Windows 7，并且对使用节点嵌合体感兴趣。

[https://github.com/deanmao/node-chimera](https://github.com/deanmao/node-chimera)

他们没有适用于 Windows 的二进制文件，我如何自己构建它并将其安装到[NPM](https://npmjs.org/)中？

我有视觉工作室 2012

（我标记了 c++，因为我认为 chimera 是用 c++ 构建的，但我从未编译过 c++ 应用程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:18:50.843

这实际上是在 Windows 上编译嵌合体的非常重要的任务。当然，您已经让 chimera 的开发人员使用自定义构建的 Qt 框架 (qt-project.org) 来减小包的大小。因此，如果您真的打算编译它，您可能会重复例如在文件中执行的操作 - github.com/deanmao/node-chimera/blob/master/scripts/compile_qt.sh。

上一步是最痛苦的恕我直言。如果你成功了，你将能够构建其他部分。由于 chimera 是 node.js 的原生 c++ 插件，所以在这里 ( [http://nodejs.org/api/addons.html](http://nodejs.org/api/addons.html) ) 你可以找到下一个构建步骤描述，即你必须下载并安装 node.js 二进制文件，最后使用作为 node.js 的一部分分发的 node-gyp 工具构建嵌合体源

这一切的描述都很模糊，但我希望它能给你一些进一步调查的方向）

# java - 对 score(int) 数组及其对应的 name(string) 进行排序

> ID：15062195
> 
> 赞同：0
> 
> 时间：2013-02-25T07:42:01.603
> 
> 标签：java, android, arrays, sorting

我正在制作一个拼字游戏应用程序，我想制作一个最高分系统。我开始制作一个数组，其中保存了球员的姓名和相应的分数。我想对分数数组进行排序，以便它们从最高到最低排列并输出分数（按降序排列）以及相应的名称。请指导我如何对分数进行排序并将其与相应的玩家姓名一起输出。任何帮助将非常感激。谢谢！

**这是我到目前为止所拥有的：**

```
public class MainTop extends Activity {

TextView show;
EditText name;
EditText score;
Button ok;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layouttop);

    show = (TextView) findViewById(R.id.textView1);
    name = (EditText) findViewById(R.id.editText1);
    score = (EditText) findViewById(R.id.editText2);

    ok = (Button) findViewById(R.id.button1);

    ok.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        String [] namearray = new String [4];
        int [] scorearray = new int[4];

        for (int i = 0; i < 4; i++){
            String playername = name.getText().toString();
            namearray[i] = playername;

            String playerscorestr = score.getText().toString();
            int playerscore = Integer.parseInt(playerscorestr);
            scorearray[i] = playerscore;

            show.setText(namearray[i] + scorearray[i]);

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:47:45.957

最好创建一个代表`Player`. 它将具有诸如 、 等属性`score`，`name`然后，您将使您的`Player`类实现[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口，以便您可以指定对象的排序方式。

一旦你有了它，你就可以创建一个`List`玩家并用来对你的对象[`Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)进行排序。`Player`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:49:00.787

像这样制作播放器类

```
public class LabelModel {

    public ArrayList<LabelModel> labelModels;
    public String labelId, labelName;

    public ArrayList<LabelModel> getLabelModels() {
        return labelModels;
    }

    public void setLabelModels(ArrayList<LabelModel> labelModels) {
        this.labelModels = labelModels;
    }

    public String getLabelId() {
        return labelId;
    }

    public void setLabelId(String labelId) {
        this.labelId = labelId;
    }

    public String getLabelName() {
        return labelName;
    }

    public void setLabelName(String labelName) {
        this.labelName = labelName;
    }

} 
```

并设置数组列表

```
for (int i = 0; i < length; i++) {
        labelModel = new LabelModel();
        JSONObject labeljson = jsonArray.getJSONObject(i);
        labelModel.setLabelId("id");
        labelModel.setLabelName("player name");
        labelarray.add(labelModel);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:23:22.757

我不知道你在哪里将分数和球员联系起来，但如果你的分数和球员是这样的，你可以试试这个

```
 int[] scores={10,50,20,60};
        String[] players={"player1","player2","player3","player4"};
        Hashtable<String, String> playerdetails=new Hashtable<String, String>();
        ArrayList scoreslist=(ArrayList) Arrays.asList(scores);
        for(int i=0;i<scores.length;i++)
        {
            playerdetails.put(String.valueOf(scores[i]), players[i]);
        }
        Collections.sort(scoreslist);
        for(int i=0;i<scoreslist.size();i++)
        {
            show.setText(scoreslist.get(i)+"    "+playerdetails.get(scoreslist.get(i)));
        } 
```

# javascript - Sinatra / Padrino partials 带模态窗口

> ID：15062202
> 
> 赞同：1
> 
> 时间：2013-02-25T07:42:27.110
> 
> 标签：javascript, sinatra, partials, padrino

我已经详尽搜索，但找不到答案。

我正在使用 padrino 编写一个小应用程序，我有 2 个视图，人物和事件。我有这些视图和控制器，它们工作正常。

我的问题是，从“事件”视图中，我想打开一个模式窗口来添加一个新人。

模态窗口将加载“人”的相关字段。填写完字段并单击按钮后，模式窗口将消失，新的“人员”将被保存，用户将返回事件页面。

谁能给我建议如何进行？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:44:01.783

模态窗口通常使用 javascript 完成。例如，使用[jQuery UI](http://jqueryui.com/)（来自[文档](http://jqueryui.com/dialog/)）

```
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Dialog - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#dialog" ).dialog();
  });
  </script>
</head>
<body>

<div id="dialog" title="Basic dialog">
  <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>

</body>
</html> 
```

Sinatra/Padrino 将负责布局和视图，您只需添加脚本部分。假设您正在使用[Haml](http://haml.info/)，您的视图将如下所示：

```
#dialog{title: "Basic dialog"}
  %p
    This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.

:javascript
  $(function() {
    $( "#dialog" ).dialog();
  }); 
```

javascript 不需要`head`像 jQuery 文档建议的那样进入标签内部。

* * *

编辑：

将部分加载到窗口中有几种选择。一种是使用像[Handlebars](http://handlebarsjs.com/)这样的 javascript 库，但我更喜欢让 javascript 从路由中加载它，这样所有视图代码都保持在一起，例如

```
get "/templates/modal1/?" do
  haml :modal1, :layout => !xhr?
end 
```

在 javascript 中，对该路由[进行 AJAX 调用](http://api.jquery.com/jQuery.get/)，您将只获得没有布局的 HTML *，*然后使用它来[填充框](http://api.jquery.com/html/#html2)：

```
$.get('ajax/test.html', function(data) {
  $('#dialog').html(data);
} 
```

在您看来，只需描述 div：

```
#dialog1
  -# The HTML from the view will be put here by the jQuery code. 
```

类似的东西。

# python - 在 Python/Numpy/Pandas 中查找连续值块的开始和停止

> ID：15062205
> 
> 赞同：4
> 
> 时间：2013-02-25T07:42:34.670
> 
> 标签：python, numpy, pandas

我想在 numpy 数组或最好是 pandas DataFrame 中找到相同值块的开始和停止索引（二维数组沿列的块，以及一维数组沿最快变化的索引的块）。我只在一个维度上寻找块，不想在不同的行上聚合 nans。

从那个问题开始（[在 numpy 数组中查找满足条件的大量连续值](https://stackoverflow.com/questions/4494404/find-large-number-of-consecutive-values-fulfilling-condition-in-a-numpy-array)），我编写了以下解决方案，为 2D 数组查找 np.nan：

```
import numpy as np
a = np.array([
        [1, np.nan, np.nan, 2],
        [np.nan, 1, np.nan, 3], 
        [np.nan, np.nan, np.nan, np.nan]
    ])

nan_mask = np.isnan(a)
start_nans_mask = np.hstack((np.resize(nan_mask[:,0],(a.shape[0],1)),
                             np.logical_and(np.logical_not(nan_mask[:,:-1]), nan_mask[:,1:])
                             ))
stop_nans_mask = np.hstack((np.logical_and(nan_mask[:,:-1], np.logical_not(nan_mask[:,1:])),
                            np.resize(nan_mask[:,-1], (a.shape[0],1))
                            ))

start_row_idx,start_col_idx = np.where(start_nans_mask)
stop_row_idx,stop_col_idx = np.where(stop_nans_mask) 
```

例如，这让我可以在应用 pd.fillna 之前分析缺失值补丁的长度分布。

```
stop_col_idx - start_col_idx + 1
array([2, 1, 1, 4], dtype=int64) 
```

再举一个例子和预期的结果：

```
a = np.array([
        [1, np.nan, np.nan, 2],
        [np.nan, 1, np.nan, np.nan], 
        [np.nan, np.nan, np.nan, np.nan]
    ])

array([2, 1, 2, 4], dtype=int64) 
```

并不是

```
array([2, 1, 6], dtype=int64) 
```

我的问题如下：

*   有没有办法优化我的解决方案（在一次掩码/where 操作中查找开始和结束）？
*   pandas 中是否有更优化的解决方案？（即与仅在 DataFrame 的值上应用掩码/位置不同的解决方案）
*   当底层数组或 DataFrame 太大而无法放入内存时会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:59:01.803

我将您的 np.array 加载到数据框中：

```
In [26]: df
Out[26]:
    0   1   2   3
0   1 NaN NaN   2
1 NaN   1 NaN   2
2 NaN NaN NaN NaN 
```

然后转置并变成一个系列。我认为这类似于`np.hstack`：

```
In [28]: s = df.T.unstack(); s
Out[28]:
0  0     1
   1   NaN
   2   NaN
   3     2
1  0   NaN
   1     1
   2   NaN
   3     2
2  0   NaN
   1   NaN
   2   NaN
   3   NaN 
```

此表达式创建一个系列，其中数字表示对于每个非空值递增 1 的块：

```
In [29]: s.notnull().astype(int).cumsum()
Out[29]:
0  0    1
   1    1
   2    1
   3    2
1  0    2
   1    3
   2    3
   3    4
2  0    4
   1    4
   2    4
   3    4 
```

这个表达式创建了一个 Series，其中每个 nan 都是 1，其他的都是 0：

```
In [31]: s.isnull().astype(int)
Out[31]:
0  0    0
   1    1
   2    1
   3    0
1  0    1
   1    0
   2    1
   3    0
2  0    1
   1    1
   2    1
   3    1 
```

我们可以通过以下方式将两者结合起来，以实现您需要的计数：

```
In [32]: s.isnull().astype(int).groupby(s.notnull().astype(int).cumsum()).sum()
Out[32]:
1    2
2    1
3    1
4    4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T11:22:24.973

在任何维度（ndim = 2 或更多）的基于 numpy 的实现下面：

```
def get_nans_blocks_length(a):
    """
    Returns 1D length of np.nan s block in sequence depth wise (last axis).
    """
    nan_mask = np.isnan(a)
    start_nans_mask = np.concatenate((np.resize(nan_mask[...,0],a.shape[:-1]+(1,)),
                                 np.logical_and(np.logical_not(nan_mask[...,:-1]), nan_mask[...,1:])
                                 ), axis=a.ndim-1)
    stop_nans_mask = np.concatenate((np.logical_and(nan_mask[...,:-1], np.logical_not(nan_mask[...,1:])),
                                np.resize(nan_mask[...,-1], a.shape[:-1]+(1,))
                                ), axis=a.ndim-1)

    start_idxs = np.where(start_nans_mask)
    stop_idxs = np.where(stop_nans_mask)
    return stop_idxs[-1] - start_idxs[-1] + 1 
```

以便 ：

```
a = np.array([
        [1, np.nan, np.nan, np.nan],
        [np.nan, 1, np.nan, 2], 
        [np.nan, np.nan, np.nan, np.nan]
    ])
get_nans_blocks_length(a)
array([3, 1, 1, 4], dtype=int64) 
```

和 ：

```
a = np.array([
        [[1, np.nan], [np.nan, np.nan]],
        [[np.nan, 1], [np.nan, 2]], 
        [[np.nan, np.nan], [np.nan, np.nan]]
    ])
get_nans_blocks_length(a)
array([1, 2, 1, 1, 2, 2], dtype=int64) 
```

# salesforce - Apex 基本编码和 openssl

> ID：15062206
> 
> 赞同：0
> 
> 时间：2013-02-25T07:42:43.567
> 
> 标签：salesforce, apex-code

我有用于为 REST API 调用创建签名的 ruby​​ 方法。

```
private static String sign_data(String str, String api_secret, bool cgi_escape)
{
String r = Base64.encode64(OpenSSL::HMAC.digest(OpenSSL::Digest::Digest.new('sha1'),   api_secret, str)).replace('\n','');
cgi_escape ?  CGI.escape(r) : r
return r
} 
```

任何人都可以帮助我获得等效的顶点代码吗？我尝试编写以下顶点代码，但未能成功。

private static String sign_data(String str, String api_secret, bool cgi_escape) {
String r =EncodingUtil.base64Encode((OpenSSL::Digest::SHA1.new, api_secret, str)).replace('\n',''); 返回 r;
}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:53:22.813

**固定：使用以下解决方案**

```
private static String sign_data(String str, String api_secret) 
```

{

```
String algorithmName = 'HmacSHA1';
Blob hmacData = Crypto.generateMac(algorithmName, Blob.valueOf(str),      Blob.valueOf(api_secret));
return EncodingUtil.base64Encode(hmacData); 
```

}

# sqlalchemy - 如何使用 sqlalchemy 搜索数据库的存在

> ID：15062208
> 
> 赞同：23
> 
> 时间：2013-02-25T07:42:53.987
> 
> 标签：sqlalchemy

我需要用 python sqlalchemy 编写一个脚本来搜索数据库是否存在，如果数据库存在，它应该查询数据库，否则创建数据库和表。

伪代码：

```
 if db exists cursor.execute(sql)
   else
      create db test;
      create tables;
      insert data; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-19T11:24:46.477

您可以使用该方法，如果数据库不存在，该`sqlalchemy.engine.base.Engine.connect()`方法将引发 a 。`OperationalError`

```
import sqlalchemy as sqla
from sqlalchemy import create_engine
from sqlalchemy.exc import OperationalError
db = sqla.create_engine(database_uri)
try:
    db.connect()
    db.execute(sql)
except OperationalError:
    # Switch database component of the uri
    default_database_uri = os.path.join(os.path.dirname(
                           str(db.engine.url)), 'mysql')
    db = sqla.create_engine(default_database_uri)
    # Create your missing database/tables/data here
    # ... 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-01-27T23:29:58.817

如果您不介意导入其他库，另一种方法是使用 sqlalchemy_utils。然后`database_exists`做你所期望的，你可以通过 sqlalchemy 数据库 uri。

```
if database_exists('sqllite:////tmp/test.db'):
    do_stuff_with_db(db) 
```

[http://sqlalchemy-utils.readthedocs.org/en/latest/database_helpers.html](http://sqlalchemy-utils.readthedocs.org/en/latest/database_helpers.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-25T01:26:15.343

我不知道规范的方法是什么，但这是一种通过检查数据库列表来检查数据库是否存在的方法。

```
from sqlalchemy import create_engine

# This engine just used to query for list of databases
mysql_engine = create_engine('mysql://{0}:{1}@{2}:{3}'.format(user, pass, host, port))

# Query for existing databases
existing_databases = mysql_engine.execute("SHOW DATABASES;")
# Results are a list of single item tuples, so unpack each tuple
existing_databases = [d[0] for d in existing_databases]

# Create database if not exists
if database not in existing_databases:
    mysql_engine.execute("CREATE DATABASE {0}".format(database))
    print("Created database {0}".format(database))

# Go ahead and use this engine
db_engine = create_engine('mysql://{0}:{1}@{2}:{3}/{4}'.format(user, pass, host, port, db)) 
```

如果您不需要知道数据库是否已创建，这是另一种方法。

```
from sqlalchemy import create_engine

# This engine just used to query for list of databases
mysql_engine = create_engine('mysql://{0}:{1}@{2}:{3}'.format(user, pass, host, port))

# Query for existing databases
mysql_engine.execute("CREATE DATABASE IF NOT EXISTS {0} ".format(database))

# Go ahead and use this engine
db_engine = create_engine('mysql://{0}:{1}@{2}:{3}/{4}'.format(user, pass, host, port, db)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-26T09:33:47.530

创建一个连接到数据库并执行通用查询的引擎，例如`SELECT 1;`. 如果失败，您可以创建数据库。但是，如何创建新数据库取决于 DBMS。

使用 PostgreSQL，您将连接到`postgres`数据库并发出一条`CREATE DATABASE`语句，然后连接到新创建的数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-17T16:46:31.070

您可以使用[https://sqlalchemy-utils.readthedocs.io/en/latest/](https://sqlalchemy-utils.readthedocs.io/en/latest/) 有一个名为[database_exists()的助手](https://sqlalchemy-utils.readthedocs.io/en/latest/database_helpers.html#database-exists)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-08T19:05:38.533

如果您决定使用 sqlalchemy_utils，请确保将 connect_args 作为查询字符串应用。`database_exists`否则，当函数[重新创建 sqlalchemy 引擎](https://github.com/kvesteri/sqlalchemy-utils/blob/d4f9fb0ce98be47e2d2fd2c1d21e30b0174ab7d5/sqlalchemy_utils/functions/database.py#L470)时，这些参数将不会被保留

```
from sqlalchemy import create_engine
from sqlalchemy_utils import database_exists

connect_args = {'charset': 'utf8'}
connect_args['ssl_cert'] = 'certs/client-cert.pem'
connect_args['ssl_key'] = 'certs/client-key.pem'
connect_args['ssl_ca'] = 'certs/server-ca.pem'

engine = create_engine(os.environ['MYSQL_CONN_URL'] + '/' + os.environ['DB_NAME'] + '?' +  urlencode(connect_args))
print(database_exists(engine.url)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-09T18:35:27.827

安装 pip 包

```
pip install sqlalchemy_utils 
```

检查 database_exists

```
from sqlalchemy import create_engine
from sqlalchemy_utils import database_exists

engine = create_engine('postgresql://postgres@localhost/name')
database_exists(engine.url) 
```

# php - 如何对以下数组进行排序？

> ID：15062210
> 
> 赞同：0
> 
> 时间：2013-02-25T07:43:03.710
> 
> 标签：php, arrays, cakephp, multidimensional-array

我有这个数组：

```
 Array
(
[0] => Array
    (
        [id] => 6347
        [lat] => 18.520430
        [lng] => 73.856743
        [country_id] => 18
        [description] => pune is vary nice plac!!!!!!!!!!!!<br>
        [loc_badge] => img/icon-monument.png
        [distance] => 0
        [country] => india
        [city] => pune
        [refId] => 6340
        [avgRate] => 4.7
    )

[1] => Array
    (
        [id] => 6587
        [lat] => 18.649632
        [lng] => 73.744843
        [country_id] => 18
        [description] => Ravet is vary nice city near by pune<br>
        [loc_badge] => img/icon-attraction.png
        [distance] => 18.5865663140631
        [country] => india
        [city] => ravet
        [refId] => 6749
        [avgRate] => 0
    )

[2] => Array
    (
        [id] => 6633
        [lat] => 17.691401
        [lng] => 74.000938
        [country_id] => 18
        [description] => satara is vary nice city<br>
        [loc_badge] => img/icon-monument.png
        [distance] => 93.4305849434119
        [country] => india
        [city] => satara
        [refId] => 6834
        [avgRate] => 6
    )

[3] => Array
    (
        [id] => 6213
        [lat] => 18.655491
        [lng] => 72.867920
        [country_id] => 150
        [description] => Alibag  is a coastal town and a municipal council in Raigad District in the Konkan region of Maharashtra, India.
        [loc_badge] => img/icon-beach.png
        [distance] => 105.287803206408
        [country] => maharashtra
        [city] => alibag
        [refId] => 6212
        [avgRate] => 2
    ) 
) 
```

**我想按avgRate**的降序对该数组进行排序， 以便数组索引如下所示：

```
2 0 3  1 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:21:15.263

在 cake 中使用[SET类](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html#Set%3a%3asort)

```
$result = Set::sort($yourArray, '{n}.avgRate', 'desc'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:48:46.883

看一下[usort](http://www.php.net/manual/pl/function.usort.php)函数。

只需定义一个用于排序的函数（在手册中为“cmp”）并将其用作回调：

```
function my_sorting_function($a, $b)
{
    return $a["avgRate"]>$b["avgrate"]?1:-1;
} 
```

然后调用它

```
usort($my_array_variable,"my_sorting_function"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T08:08:36.110

试试这个：使用`array_multisort`

```
$sort = array();
foreach($your_array as $k=>$v) {
    $sort['avgRate'][$k] = $v['avgRate'];
}

array_multisort($sort['avgRate'], SORT_DESC, $your_array);

echo "<pre>";
print_r($your_array); 
```

参考： http: [//php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

# html - 删除前导和尾随换行符

> ID：15062217
> 
> 赞同：3
> 
> 时间：2013-02-25T07:43:36.993
> 
> 标签：html, ruby, string

我将文本与 html 标签一起保存。例如，如果我输入`'What is your name?'`，它将存储`'<p>What is your name?</p>'`在表格内。

如果对报告采用相同的值，则它在字符串的开头和结尾有一个额外的换行符。我正在输出 `@question.description`使用代码的价值`@question.description.html_safe`。

`"\n"`请告诉我从该段落字符串的开头和结尾修剪掉的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T07:47:05.930

[`String#strip`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)：*返回 str 的副本，删除了前导和尾随空格。*

```
"\n what\r\n".strip
#=> "what" 
```

如果要更改变量，则需要执行以下操作之一

```
s = "\nyour string\n"
s.strip!    # first option
s = s.strip # second option 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:30:34.503

**要删除所有 html 标签，**请 使用[strip_tags](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags)方法

```
strip_tags('<p>What is your name?</p>') 
```

**仅删除开始和结束`<p></p>`标签**

```
s = ' <p>What is <p> your</p> name?</p> '
s = s.strip.sub('<p>','').chomp('</p>')
#=> "What is <p> your</p> name?" 
```

**删除所有`<p></p>`标签**

```
'<p>What is your name?</p>'.gsub(/<p>|<\/p>/,'') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:49:35.167

Rails 有一个很好的字符串处理方法：[squish](http://apidock.com/rails/String/squish) 它也从字符串中间删除换行符。

# c - 无法在运行时加载共享库

> ID：15062218
> 
> 赞同：2
> 
> 时间：2013-02-25T07:43:51.703
> 
> 标签：c, ld, dlopen, shared-libraries

foo.h

```
#ifndef foo_h__
#define foo_h__ 
extern void foo(void); 
#endif 
```

foo.c

```
#include <stdio.h>
#include "foo.h" 
void foo(void)
{
    puts("Hello, I'm a shared library");
} 
```

编译使用

```
gcc -Wall -fPIC -c foo.c
gcc -shared -Wl,-soname,libfoo.so -o libfoo.so foo.o 
```

dyna.c

```
#include <stdio.h>
#include <unistd.h>
#include <dlfcn.h> 
typedef void (*foo)(void);
int main(int argc, char* argv[])
{
    void* lib;
    foo df;
    printf("argc: %d\n",argc);
    if(argc < 2)
        return printf("USAGE: %s lib-file\n", argv[0]);

    lib = dlopen(argv[1], RTLD_NOW);
    if(lib == NULL)
        return printf("ERROR: Cannot load library\n");

    df = dlsym(lib, "foo");
    if(df)
    {
    df();
    }
    else
        printf("ERROR: Invalid library\n");
    dlclose(lib);
} 
```

编译使用：

```
gcc -rdynamic -o dyna dyna.c -ldl 
```

跑：

```
./dyna libfoo.so
argc: 2
ERROR: Cannot load library 
```

我不明白我哪里错了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:46:46.257

仔细阅读[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)手册页。

```
 If filename contains a slash ("/"), then it is interpreted as a
 (relative or absolute) pathname.  Otherwise, the dynamic linker 
 searches for the library as follows: 
```

所以你应该跑

```
 ./dyna ./libfoo.so 
```

或者

```
 ./dyna $PWD/libfoo.so 
```

或者您可以设置`LD_LIBRARY_PATH`为包含`.`（不推荐）

PS不要忘记`dlerror()`用于错误报告，并记住这`dlopen`可能不是可重入的（因此，如果您有一个多线程应用程序，请序列化对某些互斥体的调用`dlopen`）`dlsym`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:46:31.437

其实很简单，加载器不会在当前目录中查找。尝试：

```
./dyna ./libfoo.so
       ^^^ 
```

其他一切看起来都不错。

# html - 如何在html中并排获取图像

> ID：15062219
> 
> 赞同：1
> 
> 时间：2013-02-25T07:43:52.267
> 
> 标签：html

我是html新手。我正在尝试使用 html 并排显示图像。

我知道使用以下代码：

```
<div style="float:left;"> 
    <img alt="logo" src="images/logo.gif" /> 
    <img alt="background" src="images/bkgd.gif" /> 
</div> 
```

所有 img 标签都在 div 标签中。

但是在我的代码中，我为不同的图像采用了不同的 div 标签。

```
<div style="float:left;">
<li class="gallerybox" style="width: 185px">
    <div style="width: 185px">
        <div class="thumb" style="width: 180px;">
            <div style="margin:19.5px auto;">
                <a href="http://en.wikipedia.org/wiki/File:Marathahalli.jpg" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Marathahalli.jpg/150px-Marathahalli.jpg" width="150" height="91"></a>
            </div>
        </div>
        <div class="gallerytext">
            <p>View of Outer ring road from Marathahalli bridge</p>
        </div>
    </div>
</li>
<li class="gallerybox" style="width: 185px">
    <div style="width: 185px">
        <div class="thumb" style="width: 180px;">
            <div style="margin:15px auto;">
                <a href="http://en.wikipedia.org/wiki/File:Marathahalli_ring_road_side_view_8140.JPG" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Marathahalli_ring_road_side_view_8140.JPG/133px-Marathahalli_ring_road_side_view_8140.JPG" width="133" height="100"></a>
            </div>
        </div>
        <div class="gallerytext">
            <p>Marathahalli ORR</p>
        </div>
    </div>
</li>
<li class="gallerybox" style="width: 185px">
    <div style="width: 185px">
        <div class="thumb" style="width: 180px;">
            <div style="margin:15px auto;">
                <a href="http://en.wikipedia.org/wiki/File:Marathahalli_ring_road_side_view_8138.JPG" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/3/37/Marathahalli_ring_road_side_view_8138.JPG/133px-Marathahalli_ring_road_side_view_8138.JPG" width="133" height="100"></a>
            </div>
        </div>
        <div class="gallerytext">
            <p>Marathahalli ORR side snap</p>
        </div>
    </div>
</li>
<li class="gallerybox" style="width: 185px">
    <div style="width: 185px">
        <div class="thumb" style="width: 180px;">
            <div style="margin:15px auto;">
                <a href="http://en.wikipedia.org/wiki/File:Marathahalli_ring_road_side_view_8151.JPG" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Marathahalli_ring_road_side_view_8151.JPG/133px-Marathahalli_ring_road_side_view_8151.JPG" width="133" height="100"></a>
            </div>
        </div>
        <div class="gallerytext">
            <p>Innovative multiplex theater</p>
        </div>
    </div>
</li>
<li class="gallerybox" style="width: 185px">
    <div style="width: 185px">
        <div class="thumb" style="width: 180px;">
            <div style="margin:15px auto;">
                <a href="http://en.wikipedia.org/wiki/File:Marathahalli_ring_road_side_view_8149.JPG" class="image"><img alt="" src="http://upload.wikimedia.org/wikipedia/commons/thumb/4/40/Marathahalli_ring_road_side_view_8149.JPG/133px-Marathahalli_ring_road_side_view_8149.JPG" width="133" height="100"></a>
            </div>
        </div>
        <div class="gallerytext">
            <p>Aisshwaria Opulance Apartment at Marathahalli ring road</p>
        </div>
    </div>
</li>
</div> 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:49:49.133

试试这个：

```
li {
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:56:13.037

我实际上并不了解您希望您的代码做什么。但我仍然认为这可能（可能不会）帮助你。（使用类和内部 CSS 样式而不是内联）

```
<div class='img-container'>
<img src='image.jpg'/>
<img src='image2.jpg'/>
</div> 
```

以及使图像并排显示的CSS：

```
.img-container img {
display:inline-block;
width:100px; /* or whatever you want*/
height:100px; /* same as above */
} 
```

如果这不是您要查找的内容，请创建一个[小提琴](http://jsfiddle.com)并使用链接更新您的问题。

# c# - IFrame：页面在 iframe src 上回发或刷新

> ID：15062222
> 
> 赞同：1
> 
> 时间：2013-02-25T07:44:03.403
> 
> 标签：c#, javascript, jquery, asp.net, iframe

我是 asp.net 的新手。我正在调用 Iframe src throw table row javscripct click 事件。(即 onclick="return loadPhaseWiseChart("DGSET00025");")

我的代码：-

```
<tr height="25" id="row3" onclick="return loadPhaseWiseChart("DGSET00025");" bgColor="#e1f2fe">
<td>
<tr> 
```

jQuery代码： -

```
function loadPhaseWiseChart(Asset_Discription) {
            document.getElementById('IframeChart1').src = "PhaseOneChart.aspx?assetdiscription=" + Asset_Discription;
        } 
```

当我点击行时，我的页面正在回复或刷新。我想避免页面刷新或回发行点击事件。我怎么能做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:48:23.310

您的 onClick 应如下所示：

```
<tr height="25" id="row3" onclick="loadPhaseWiseChart('DGSET00025');" bgColor="#e1f2fe"> 
```

请注意返回的删除，以及对内部字符串和外部属性使用不同的引号类型（在 JavaScript 中，这些类型是可互换的，但它们必须至少匹配。实际上使用 jQuery，您不应该像这样添加 onClick根本，而是使用这样的数据属性：

```
<tr height="25" id="row3" data-chart="DGSET00025" bgColor="#e1f2fe"> 
```

并将您的函数绑定到 click 事件，如下所示：

```
$('#row3').on('click', loadPhaseWiseChart); 
```

这会将您的“loadPhaseWiseChart”更改为：

```
function loadPhaseWiseChart() {
  document.getElementById('IframeChart1').src = "PhaseOneChart.aspx?assetdiscription=" + $(this).data('chart');
} 
```

最后，为了确保您不会被此困住，HTML 元素的 ID 由 ASP.net 更改，您添加了一个“runat="server"'，因此如果您的 iframe 的 ID 为“IframeChart1”并且'runat' 属性然后 ASP 将把它变成类似 'iframe_01_h1' 的东西。您可以使用如下 ASP 代码获取此值：

```
document.getElementById('<%= IframeChart1.ClientID %>') 
```

# database - 从 *.frm 文件恢复数据库 - mysql？

> ID：15062226
> 
> 赞同：0
> 
> 时间：2013-02-25T07:44:11.440
> 
> 标签：database, database-restore

不幸的是Windows昨天崩溃了，我只有时间从我的mysql数据库中检索frm文件。我在谷歌上看过，发现这只是表结构（这正是我所追求的）

那么，有没有办法可以将这些文件恢复到 mysql 中。我把它们放在我昨天拿它们的目录中，phpmyadmin 识别数据库，但它不会检测表，但我也不能使用相同的名称创建表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T21:37:54.000

在开始之前，您应该停止 WAMP 服务，或者至少在提示启动服务时重新启动这些服务。

在旧服务器实例上，默认导航到 MySQL 数据文件夹，这应该类似于 C:\wamp\bin\mysql\mysql5.1.53\data\ 其中 mysql5.1.53 将是先前安装的 MySQL 数据库的版本号。

在此文件夹中，您应该会看到一些文件和文件夹。这些文件夹是实际的 MySQL 数据库，包含一堆我们需要的 .frm 文件。您应该将文件夹名称识别为数据库名称。这些文件夹及其所有内容可以直接复制到你的 MySQL 数据文件夹中，你可以忽略默认数据库 mysql、performance_schema、test。

如果您现在启动服务器，您将看到数据库被拾取，但是数据库将不包含任何复制的表。为了获取数据库的内容，回到数据文件夹中，您应该会看到一个文件 ibdata1，这是表的数据文件，将其直接复制到数据文件夹中，您的新文件中应该已经有一个文件名为“ibdata1”的数据文件夹，因此您可能希望在从旧的 MySQL 数据文件夹复制到 ibdata1 之前将其重命名为 ibdata1.bak。

完成此操作后，重新启动所有 WAMP 服务。您可以使用 PhpMyAdmin 检查您的数据库是否已成功恢复。

# php - 带有路由别名的 Laravel 表单助手

> ID：15062227
> 
> 赞同：0
> 
> 时间：2013-02-25T07:44:14.807
> 
> 标签：php, laravel

我创建了一个 from 来向服务器发送一个 DELETE 方法，代码如下所示：

```
{Form::open('company/'.$company->id, 'DELETE', array('style'=>'display: inline'))}}
      {{Form::hidden('id', $company->id)}}
      {{Form::submit('Delete')}}
{{Form::close()}} 
```

但是我已经为这条删除路线创建了一个别名，如下所示：

```
Route::get('company/(:num)',array('as' => 'delete_company', 'uses'=>'company@destroy')); 
```

在这种情况下如何使用别名而不是像上面那样显式写出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:01:19.443

如果您要询问如何获取该命名路由的 URL，这是您需要在 L3 中执行的操作

```
$url = URL::to_route('delete_company', array($company->id));
Form::open($url); 
```

~~我不确定您是否可以使用表单执行 DELETE http 请求，因为表单仅支持 POST 和 GET，您可能需要使用 Angularjs、backbone 或 jquery 之类的 javascript 库。~~ 似乎这在 Laravel 中是可能的，请参阅下面的评论 :)

# ssis - 在处理 SSIS 接口时遇到错误时如何触发电子邮件通知或生成错误报告？

> ID：15062232
> 
> 赞同：1
> 
> 时间：2013-02-25T07:44:38.070
> 
> 标签：ssis

在使用 SSIS 处理传入接口文件或从数据库生成传出接口文件时，可能会在某些流程任务/步骤中遇到错误。

谁能建议我如何捕获错误并生成电子邮件通知以通知用户或生成错误报告文件以进一步调查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:31:33.040

您可以使用内置的发送邮件任务来发送电子邮件。有关更多详细信息，请参见[此处](http://www.mssqltips.com/sqlservertip/1731/sending-email-from-sql-server-integration-services-ssis/ "这里")。

有一个很好的解决方案解释了如何在[此处](http://agilebi.com/jwelch/2007/05/05/handling-multiple-errors-in-ssis/)捕获错误消息。您将消息捕获到数据流中的变量中，然后在事件处理程序中从该变量中提取消息，然后将它们传递给发送邮件任务。

# c++ - 使用 std::vector 迭代器分配 std::string 会导致一个项目中的调试错误，但在另一个项目中有效？

> ID：15062236
> 
> 赞同：0
> 
> 时间：2013-02-25T07:44:51.167
> 
> 标签：c++, string, memory-management, iterator

我正在尝试使用 RawInput API 获取输入设备的名称，但是在分配名称字符串时出现了一个奇怪的错误。基本上我在另一个项目中看到了它，它运行良好。这是有缺陷的代码：

```
std::string Input::GetDeviceName(void* device)
{
    size_t size;

    bool result = GetRawInputDeviceInfo(device, RIDI_DEVICENAME, null, &size) ;
    if(result < 0)
    {
        throw RawInputException(GetLastError(), L"GetRawInputDeviceInfo(InputDeviceDataRequest::Name)");
    }

    std::vector<std::string::value_type> data(size);

    result = GetRawInputDeviceInfo(device, RIDI_DEVICENAME, &data[0], &size);
    if(result < 0)
    {
        throw RawInputException(GetLastError(), L"GetRawInputDeviceInfo(InputDeviceDataRequest::Name)");
    }
    std::string name = std::string(data.cbegin(), data.cend());
    return(name);
} 
```

相同的代码在我从中读取的教程实现中运行良好，但是当我使用它时，它会在***HeapAlloc(_crtheap, 0, size ? size : 1);*处触发断点，从****std**的调用堆栈向下 10 级： **:string _name = std::string(data.cbegin(), data.cend());** .我检查了向量的值，它的大小为 61。我认为问题出在实际内容上？但是 std::string::value_type 会出现什么问题？GetRawInputDeviceInfo() 返回 true，所以它成功填充用字符向上矢量。正如我所提到的，我从中读取它的教程代码构建并完美运行。对于那些感兴趣的人，这里是项目的链接：[这家伙停止更新它，但它几乎功能齐全](https://code.google.com/p/rawinput/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:42:37.943

我认为这与以下事实有关，即根据您的编译器选项，字符串应该由`char`或组成`wchar_t`。因此，`std::string`您应该使用`std::basic_string<TCHAR>`. 此外，您可能想查看[这个问题及其答案](https://stackoverflow.com/questions/956504/would-stdbasic-stringtchar-be-preferable-to-stdwstring-on-windows)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:03:49.463

我对这个特定的 API 不是很熟悉，但试试看：

```
std::vector<std::string::value_type> data(size+1); 
```

如果这阻止了断点，那么这是因为 GetRawInputDeviceInfo 以 \0 终止字符串，但不将其包含在计数中。如果是这样，它正在写入超出您分配的空间的末尾，可能会破坏堆。大多数 MS API 都不是这样工作的，但我确实发现它们的 API 并不总是表现完美。

由于（如果我的理论是正确的）您提供的缓冲区只有一个字符太短，因此它很可能在某些条件下（stl 实现、编译器、内存条件等）可以正常工作，而在其他条件下则不行。内存损坏没有一致的结果。

如果这确实避免了断点，请不要忘记您的结果`std::string`将在末尾有一个 \0 作为字符串的一部分。如果你不想这样，也解决这个问题：

```
std::string name = std::string(data.cbegin(), data.cend()-1); 
```

希望这可以帮助！

# compiler-errors - 在 64 位 linux 上编译 32 位 libGLEW.so

> ID：15062238
> 
> 赞同：2
> 
> 时间：2013-02-25T07:45:10.177
> 
> 标签：compiler-errors, 32bit-64bit, glew

我正在尝试构建一个 32 位 libGLEW.so .. 我在 64 位 linux 上.. 我尝试将 -m32 添加到 Makefile 中的 CFLAGS .. 它说：

```
cc -DGLEW_NO_GLU -O2 -Wall -W -Iinclude  -m32 -fPIC  -o tmp/linux/default/shared/glew.o -c src/glew.c
cc -shared -Wl,-soname=libGLEW.so.1.9 -o lib/libGLEW.so.1.9.0 tmp/linux/default/shared/glew.o -L/usr/X11R6/lib64 -L/usr/lib64 -lXmu -lXi -lGL -lXext -lX11 
/usr/bin/ld: i386 architecture of input file `tmp/linux/default/shared/glew.o' is incompatible with i386:x86-64 output
/usr/bin/ld: tmp/linux/default/shared/glew.o: file class ELFCLASS32 incompatible with ELFCLASS64
/usr/bin/ld: final link failed: File in wrong format
collect2: error: ld returned 1 exit status
make: *** [lib/libGLEW.so.1.9.0] Error 1 
```

我不太确定这意味着什么？似乎它构建了一个 32 位 .o 文件，但试图将其链接为 64 位目标？我该如何解决这个问题.. 我已经看到它添加了 -L/usr/X11R6/lib64 和 -L/usr/lib64 ，但我也尝试运行 make SYSTEM=gnu 广告 /usr/X11R6/lib和 /usr/lib 文件夹，但它给了我同样的错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:43:44.590

好的，所以我需要下面列出的软件包。我将 -m32 添加到 Makefile 中的 CFLAGS 和 LDFLAGS 中，并确保我在环境中将 -m32 设置为 CFLAGS、CXXFLAGS 和 LDFLAGS 以确保......然后运行 ​​make

```
libx11-dev:i386
libxext-dev:i386
libxmu-dev:i386
libxi-dev:i386
libgl1-mesa-dev:i386

export CFLAGS='-m32'
export CXXFLAGS='-m32'
export LDFLAGS='-m32'
make 
```

# javascript - 为什么我的脚本没有在无序列表中添加整数？

> ID：15062247
> 
> 赞同：-2
> 
> 时间：2013-02-25T07:46:15.673
> 
> 标签：javascript

我遇到了类似的问题，我的代码如下：

```
<!doctype html>
<html>
    <title> this is a test page</title>
    <meta charset="utf-8">
    <head>
      <script>
        function test(){
            var unorderedList = document.getElementById('list');
            var noList = unorderedList.getElementsByTagName('li');
            var number; 
            alert("this is a test : "+noList[0].value);
            for( int i=0; i<noList.length; i++){
                number = number + noList[i].value;}
            console.log(number);};    
        window.onload=test;         
     </script>
   </head>
   <body>  
     <ul id="list">
        <li> 2</li>
       <li> 3</li>
     </ul>   
   </body> 
```

我无法总结“ul”中的数字，您能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:52:57.627

你要找的`value`不是`innerHTML`.

所以，与其说

`number = number + noList[i].value`

你应该说

`number = number + noList[i].innerHTML`

此外，在尝试对其进行整数加法之前，您需要确保该数字具有数值。所以与其说

`var number;`

你应该说

`var number = 0`

编辑：根据您的评论，问题是 innerHTML 作为字符串返回。

有四种方法可以解决这个问题。

方法一：

```
 list_item = noList[i].innerHTML
 if(list_item.charAt(0) == "0"){
       number = number + parseInt(list_item, 10);
 } else {
       number = number + parseInt(list_item);
 } 
```

解释 1：您将字符串读入 list_item。然后检查字符串中的第一个字符以确定数字的基数。这是为了确保与旧浏览器的兼容性。从 ECMAScript 5 开始，parseInt 默认以 10 为基数，但是，旧的实现通常使用以 8 为基数的以 0 开头的字符串。

方法二：

```
 list_item = +noList[i].innerHTML
 number = number + list_item 
```

解释 2：每种类型都有一个一元运算符。对于整数，这是`+`，因此应用于`+`任何事物都会尝试将其转换为整数，应用`!!`将尝试将其转换为 a`Boolean`等。

方法三：

```
 list_item = Number(noList[i].innerHTML);
 number = number + list_item 
```

解释 3： Number 对象是一个构造函数对象，它试图解析一个数字并提供方便的方法。目前仅在 Firefox 中完全支持，但基本解析将在其他浏览器中工作。

方法四：

```
 list_item = noList[1].innerHTML*1
 number = number+list_item 
```

解释 4：Javascript 使用 Duck Typing（如果它像鸭子一样走路和像鸭子一样颤抖，那么它必须是鸭子），所以如果一个项目响应 *1，它必须是一个数字。还具有处理浮点数的额外好处。

* * *

我推荐哪一个？

我可能会暂时远离 Number 构造函数，因为它并没有真正广为人知/支持。一般来说，我实际上会推荐`parseInt`，因为它是最广为人知的方法，并且大多数开发人员都会一目了然地知道代码在做什么。

值得注意的是，在 Chrome 和最近的 Firefox 中，`parseInt`它也是最快的，然而，在旧版本的 Firefox 中，Number 构造函数提供了类似的性能优势（并且完全支持）。

然而，IE 通常很慢，但最快的是一元运算符和乘法（虽然不是很多）。

唯一真正重要的反对意见`parseInt()`是 Opera，它`parseInt`比其他方法低近 3 倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:56:15.200

尝试：

```
<ul id="list">
  <li value="2"> 2</li>
  <li value="3"> 3</li>
</ul> 
```

# python - 如何将列表添加在一起

> ID：15062248
> 
> 赞同：1
> 
> 时间：2013-02-25T07:46:23.687
> 
> 标签：python

我试图找出一个问题，我很困惑。基本上我有一个清单，它应该代表银行对账单。我正在尝试将列表加在一起，因此应该将代表提款的负数加在一起，并将正数加在一起以表示存款。到目前为止我得到了

```
def statement(l):
    deposit = 0
    withdrawl = 0
    for a in l:
        a = sum(l)
    for b in l:
        if b == -b:
            b = sum(b)        
    return [a,-b] 
```

但是当我这样做 时，它应该`statement([30.95,-15.67,45.56,-55.00,43.78])` 返回时返回，有人可以帮忙吗？`[49.620000000000005, -43.78]``[120.29,-70.67]`

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T07:49:52.140

以下似乎可以做到：

```
In [1]: def statement(l):
   ...:     pos, neg = 0, 0
   ...:     for a in l:
   ...:         if a > 0: pos += a
   ...:         else: neg += a
   ...:     return pos, neg
   ...: 

In [2]: statement([30.95,-15.67,45.56,-55.00,43.78])
Out[2]: (120.29, -70.67) 
```

它返回 a`tuple`而不是 a `list`，因为长度是固定的，这似乎更合乎逻辑。

* * *

以下是对您的尝试的一些评论：

```
for a in l:
    a = sum(l) 
```

这将导致所有元素的总和`l`被计算`len(l)`时间，这没有多大意义。要得到一笔，只需做`a = sum(l)`一次。

`if b == -b:`- 你可能希望它检查一个数字是否为负，但实际上它检查是否`b`等于零，因为零是唯一`x`的`x == -x`。你想要`if b < 0:`。

* * *

我检查了哪个答案在 CPython 3.3 上更快，不出所料，这个答案在给出的示例中大约快 2 倍：`2.3 us per loop`vs `5.98 us per loop`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T07:51:28.197

这应该做你想要的：

```
def statement(l):
    pos = sum(i for i in l if i > 0)
    neg = sum(i for i in l if i < 0)
    return pos, neg 
```

您的错误是您尝试分配给迭代变量。如果要累积一个值，请先在`for`循环之外将其定义为 0，然后在每一步中添加该值。

在循环结束时，`a`包含 中所有元素的总和`l`，并`b`包含 中的最后一个元素`l`，因为最终检查总是失败并且`b`永远不会被覆盖（这解释了你得到的结果）。

# c# - 申请表 - 检查输入是否为空

> ID：15062249
> 
> 赞同：1
> 
> 时间：2013-02-25T07:46:24.417
> 
> 标签：c#, asp.net

我需要检查用户是否在输入字段中输入了类似这样的内容：

```
string valuestr = Request.Form["name"];
if (valuestr == null)
{
    Response.Write("error");
}
else
{
    sendform();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T07:57:49.467

尝试这个

```
if (Request.Form["name"] == null || string.IsNullOrWhiteSpace(Request.Form["name"]))
{
    Response.Write("error");
}
else
{
    sendform();
} 
```

我还没有执行它，但肯定它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:51:53.313

我不能使用 c#。但我认为你的代码有问题。在代码下方使用。

```
string valuestr = Request.Form["name"];
    if (valuestr == null)
    {
        Response.Write("error"); 
    }else {  
        sendform();  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:51:55.800

您可以简单地使用控件的 id 检查输入，而不是请求表单“名称”。在这种情况下，它看起来像：

```
//Trimming the input control should account for whitespace
If(idOfInputControl.Text.Trim() == null)
{
   idOfErrorLabel.Text = "error";
}
Else
{
   sendForm();
} 
```

按照您提供的方式，它看起来像这样

```
string str = Request.Form["name"];
If (str.Trim() == null)
{
    Response.Write("error"); 
}
Else {  
    sendform();  
} 
```

最后，使用 asp.net，所有这些都可以通过使用验证控件简单地处理。这是一个解释如何使用验证控件的网站：http: [//www.dotnetfunda.com/](http://www.dotnetfunda.com/articles/article785-how-to-use-validation-controls-in-aspnet.aspx)

这是一个关于如何使用验证控件的视频教程： [YouTube - 验证控件教程](http://www.youtube.com/watch?v=Jv7TgKr6Qgw)

# c# - 您能否从 C# 中另一个应用程序中启动的进程中获取跟踪输出？

> ID：15062254
> 
> 赞同：1
> 
> 时间：2013-02-25T07:46:38.030
> 
> 标签：c#, .net

我正在运行一个应用程序 A，它使用进程启动启动另一个应用程序 B。我可以获取应用 B 的跟踪信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:51:09.170

您可以捕获标准输出。从[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)：

```
// Start the child process.
 Process p = new Process();
 // Redirect the output stream of the child process.
 p.StartInfo.UseShellExecute = false;
 p.StartInfo.RedirectStandardOutput = true;
 p.StartInfo.FileName = "Write500Lines.exe";
 p.Start();
 // Do not wait for the child process to exit before
 // reading to the end of its redirected stream.
 // p.WaitForExit();
 // Read the output stream first and then wait.
 string output = p.StandardOutput.ReadToEnd();
 p.WaitForExit(); 
```

因此，通过阅读`StandardOutput`（和/或`StandardError`），您可以捕获刚刚启动的进程的输出。

# avfoundation - 使用 AVFoundation / QTKit 一次录制多个视频

> ID：15062267
> 
> 赞同：4
> 
> 时间：2013-02-25T07:47:26.643
> 
> 标签：avfoundation, qtkit

使用 AVFoundation/QTKit 如何将多个视频设备同时录制到一个文件中？

我知道如何分别记录它们，但是尝试同时记录两者会导致错误，例如...

“无法添加到会话，因为源和目标媒体类型不兼容。”

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:09:22.777

这是一篇解释如何做到这一点的文章：

[使用 QTKit 从多个设备捕获](http://www.subfurther.com/blog/2007/12/04/capturing-from-multiple-devices-with-qtkit/)

# android - 使用唤醒锁时强制关闭错误

> ID：15062268
> 
> 赞同：0
> 
> 时间：2013-02-25T07:47:32.867
> 
> 标签：android, wakelock

我已经为我的问题寻找了很多答案，但似乎没有任何效果。我在我的应用程序中使用 ACQUIRE_CAUSES_WAKEUP 唤醒锁。但是每当我在模拟器和设备上运行我的代码时，我都会收到强制关闭错误消息。

我的代码是这样的： -

```
 PowerManager.WakeLock wakeLock;
    final PowerManager powerManager = (PowerManager) getSystemService(POWER_SERVICE);
    wakeLock = powerManager.newWakeLock(PowerManager.ACQUIRE_CAUSES_WAKEUP, "TAG"); 
```

检查条件后，调用 startAction() 方法。我需要在这个方法中获取我的唤醒锁。

```
 public void startAction(){  
        wakeLock.acquire();
        alert.setVisibility(View.VISIBLE);
        click.setVisibility(View.VISIBLE);
        ....
    } 
```

在停止按钮单击事件中，我释放我的唤醒锁。

```
click.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {
            // TODO Auto-generated method stub

            v.cancel();
            tg.stopTone();
            tg.release();
            shouldRun=false;
            myThread.interrupt();
            message = (TextView) findViewById(R.id.tvMessage);
            message.setVisibility(View.VISIBLE);
            message.setText(body);                
            speakOut(); 
            wakeLock.release();

        } 
```

logcat 错误显示：-

```
 02-25 13:05:26.246: E/AndroidRuntime(2026): FATAL EXCEPTION: main
02-25 13:05:26.246: E/AndroidRuntime(2026): java.lang.RuntimeException: Unable to start activity ComponentInfo  {com.example.accessinbox/com.example.accessinbox.AccessInbox}: java.lang.IllegalArgumentException
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.os.Looper.loop(Looper.java:123)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at java.lang.reflect.Method.invokeNative(Native Method)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at java.lang.reflect.Method.invoke(Method.java:507)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at dalvik.system.NativeStart.main(Native Method)
02-25 13:05:26.246: E/AndroidRuntime(2026): Caused by: java.lang.IllegalArgumentException
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.os.PowerManager$WakeLock.<init>(PowerManager.java:224)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.os.PowerManager.newWakeLock(PowerManager.java:396)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at com.example.accessinbox.AccessInbox.onCreate(AccessInbox.java:63)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-25 13:05:26.246: E/AndroidRuntime(2026):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-25 13:05:26.246: E/AndroidRuntime(2026):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:01:59.140

您必须指定要获取的唤醒锁类型（在[PowerManager](http://developer.android.com/reference/android/os/PowerManager.html)上阅读），没有默认值，`PowerManager.ACQUIRE_CAUSES_WAKEUP`只是一个可选参数。

你可以[在这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/os/PowerManager.java#194)看到它和带有唤醒锁类型掩码的参数，如果没有 - 给你一个 IAE。他们真的应该把异常信息放在那里，但是，会让这种情况更清楚。

# java - 在java中的对象集合中查找频率

> ID：15062269
> 
> 赞同：0
> 
> 时间：2013-02-25T07:47:34.220
> 
> 标签：java, list, collections

我知道

```
Collections.frequency(obj1,obj2); 
```

给我对象 obj2 在集合 obj1 中存在的次数。但我想问说 obj1 是一个由对象（学生）组成的集合（列表）。

一个学生可以有 {name,marks}

那么是否有任何可能的**单线或两线**方式可以让我找到得分相同的学生人数

我不希望包含任何额外的库

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:55:35.383

`Collection.frequency` 返回指定集合中等于指定对象的元素数。它基本上等于 obj2 和 List 对象。

如果您覆盖该`equals` 方法并根据分数属性对象放置您的逻辑，则对象将等于或不等于。然后`Collection.frequency`返回您想要的结果。

```
public class Student{
    private String name;
    private int score;
    @Override
    public boolean equals(Object obj){
         if(obj == null)
           return false;
         else if(this==obj)
           return true;
         else 
           return this.hashCode() == ((Student)obj).hashCode();
    }
    @Override
    public int hashCode() {
         return score;
   }
} 
```

...

```
int freq = Collections.frequency(listOfStudent,student); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:05:39.307

如果你不愿意改变你的`equals`方法来表示相同的分数 == 相同的学生，你可以使用 Map 来实现你想要的我的想法。您必须进行更多设置，但检索应该是 1 或 2 行：

```
// setup/population
Map<Score, List<Student>> map = new HashMap<Score, List<Student>>();
for (Student student : students) {
  List<Student> studentsForScore = new ArrayList<Student>();
  if(map.containsKey(student.getScore())) {
    studentsForScore = map.get(student.getScore());
  }
  studentsForScore.add(student);
  map.put(student.getScore(), studentsForScore);
}

// information retrieval
Student testStudent = ...
int numberOfStudentsWithSameScore = map.containsKey(testStudent.getScore()) ? map.get(testStudent.getScore()).size() : 0; 
```

这当然假设您愿意接受设置块的成本。

能够将一个`Comparator`（或等效的）传递给该`Collections.frequency`方法会很好 - 如果可以的话，您可以获得两全其美的效果。你不能，你可以将上面的代码包装到你自己的`frequency`方法中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:52:10.917

我认为您需要使用 Map 而不是 List

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:59:19.760

您可以`addAll`将学生的分数设置为 a `Set`of 分数，然后比较该集合的大小是否小于原始`List`/的大小`Map`。

# java - 为什么 Java Set 上的 ConcurrentModificationException 会转储有关 Map 迭代器的 Stack Trace？

> ID：15062277
> 
> 赞同：1
> 
> 时间：2013-02-25T07:48:15.417
> 
> 标签：java, collections, map, set, concurrentmodification

如果我同时修改一个 Java Set，我会得到一个 ConcurrentModificationException。问题是堆栈跟踪表明在某个 Map 迭代器上遇到了修改。我现在明白 Maps 是用来在 java 中实现 Sets 的，但这些细节是实现内部的。我相信内部 Map 迭代器异常应该被正确地包装在应该被传回的 Set Iterator 相关异常中。

我有道理还是我错过了什么？我只花了两天时间试图在代码中找到不存在的错误 Map 操作，但最终偶然发现了导致问题的 Set 操作（通过反复试验，而不是通过逻辑过程或文档放大）。我想知道将来如何避免这种挫败感。

------------更新------------- 我的查询不是关于如何获得正确的并发性。我的问题是如何避免被这种无用的堆栈跟踪消息误导。Map Iterator 异常没有业务显示在堆栈跟踪中，而不是实际的 SetIterator 异常，这从用户的角度来看是有意义的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:57:10.680

虽然表面上看起来有点奇怪，但当您遇到此类错误时，堆栈跟踪应该为您提供所需的信息 - 忽略跟踪的前几行，它们是内部的，`java.util`并寻找对您的一个的第一个引用自己的课。此行将是您调试时开始查找的地方。

至于为什么 a 上的迭代器`HashSet`看起来是 map 相关而不是 set 相关类型，这是因为它*是*-`HashSet.iterator`简单的实现 return `backingMap.keySet().iterator()`。没有这样的“SetIterator”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:20:27.420

您可以使用允许并发修改的 Set。与 ConcurrentSkipListSet 或 CopyOnWriteArraySet 一样，Google Guava 也有其他获取并发集的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:54:17.347

一个 ConcurrentModificationException 发生在一个集合被迭代，并且另一个线程试图修改它时；或相反亦然。我理解您的观点，但解决此问题的一种简单方法是简单地设置一个布尔标志，指示正在迭代该集合。这样，您的修改线程可以简单地等待该标志变为假，并且您的线程将永远不会发生这样的冲突:)

# grails - 如何在 Grails 应用程序中实现 NTLM v2 身份验证？

> ID：15062278
> 
> 赞同：0
> 
> 时间：2013-02-25T07:48:21.627
> 
> 标签：grails, ntlm

我需要在旧版 Grails 应用程序中实现 NTLM v2 身份验证。到目前为止，我发现的只是一个 Grails *ntlm-auth*插件，它仅支持 NTLM v1 和一个 Java *ntlmv2-auth*库，我不知道如何附加到应用程序。

*对于现有插件的任何建议或将ntlmv2-auth*库集成到应用程序的指南，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:43:13.143

您可以使用 Apache mod_auth_kerb 进行 NTLMv2 身份验证。有关详细信息，请参阅[http://www.grolmsnet.de/kerbtut/ 。](http://www.grolmsnet.de/kerbtut/)

然后，您必须可以使用 HTTP 标头或 AJP 将经过身份验证的用户传递给 Tomcat。有关 AJP 解决方案，请参阅[通过 AJP 将 REMOTE_USER 转发到 tomcat（例如，对于 shibboleth）](https://stackoverflow.com/questions/13749065/forward-remote-user-to-tomcat-via-ajp-e-g-for-shibboleth)和[https://serverfault.com/questions/207301/get-the-authenticated-user-under-apache](https://serverfault.com/questions/207301/get-the-authenticated-user-under-apache)以在 http 标头中传递 REMOTE_USER。

在 SpringSecurity 中，您可以使用 RequestHeaderAuthenticationFilter 从从 Apache 传递到 Tomcat 的标头中获取经过身份验证的用户。有关正确方向的一些提示，请参阅[Grails、Spring Security 和 Siteminder - 资源问题或 userDetails](https://stackoverflow.com/questions/10435242/grails-spring-security-siteminder-problems-with-resources-or-userdetails)。

# c# - 为什么我的代码会打开两个 Microsoft Office Word 实例？

> ID：15062280
> 
> 赞同：1
> 
> 时间：2013-02-25T07:48:25.933
> 
> 标签：c#, ms-word, office-automation

我使用一个函数来简化我的应用程序中的打印。这里是：

```
public void print(string fileName, string variables, string values, string template)
        {
            // CREATE TEXT FILE FOR PRINTING

        FileInfo fi = new FileInfo(fileName);
        Object oMissing = System.Reflection.Missing.Value;
        Object oTrue = true;
        Object oFalse = false;

        Word.Application _wordApp = new Word.Application();
        Word.Document oDoc = _wordApp.Documents.Add(template);

        try
        {
            // Check if file already exists. If yes, delete it. 
            if (fi.Exists)
            {
                fi.Delete();
            }

            // Create a new file 
            using (StreamWriter sw = fi.CreateText())
            {
                sw.WriteLine(variables);
                sw.WriteLine(values);
            }

            _wordApp.Visible = true;
            oDoc.MailMerge.MainDocumentType = Word.WdMailMergeMainDocType.wdFormLetters;
            oDoc.MailMerge.OpenDataSource(fileName, false, false, true);

            oDoc.MailMerge.Destination = Word.WdMailMergeDestination.wdSendToNewDocument;
            oDoc.MailMerge.Execute(false);
            oDoc.MailMerge.Application.PrintOut();
        }
        catch (Exception Ex)
        {
            MessageBox.Show(Ex.ToString());
        }
        finally
        {
            //CLEAR RESOURCES
            ((Word._Document)oDoc).Close(ref oFalse, ref oMissing, ref oMissing);
            ((Word._Application)_wordApp).Quit();
        }

    } 
```

它看起来不错，因为我可以使用 Mail Merge 并使事情变得更容易。我打开一个打开文件对话框，以便用户可以选择`template`他将用于邮件合并的文件。但是随后，应用程序打开`template`文件时没有任何数据`Merge Fields`，然后执行邮件合并，打开另一个文档，其中包含所有数据`Merge Fields`。

任何想法为什么会发生这种情况？这是打开文件对话框的代码：

```
 //CHOOSE TEMPLATE FILE
                OpenFileDialog ofd = new OpenFileDialog();
                ofd.Filter = "Microsoft Word Template (*.dotx)|*.dotx";
                string filter = ofd.Filter;
                ofd.Multiselect = false;
                ofd.Title = "Open Template File";
                if (ofd.ShowDialog() == DialogResult.OK)
                {
                    if (ofd.SafeFileName == "payslip.dotx")
                    {
                        //RETREIVE VALUES
                        var db = new DBConnect();
                        string[] values = new string[20];
                        bool print = false;
                        OleDbCommand cmd = null;
                        OleDbDataReader dr = null;
                        try
                        {
                            if (db.OpenConnection() == true)
                            {
                                string query = "SELECT * FROM employee WHERE employee_ID = " + idTxtBox.Text + "";
                                cmd = new OleDbCommand(query, db.mycon);
                                dr = cmd.ExecuteReader();
                                while (dr.Read())
                                {
                                    values[2] = (dr["employeeName"].ToString());
                                    values[3] = (dr["withTax"].ToString());
                                    values[4] = (dr["sss"].ToString());
                                    values[5] = (dr["pagIbig"].ToString());
                                    values[6] = (dr["pHealthGov"].ToString());
                                    values[7] = (dr["pCareOff"].ToString());
                                    values[8] = (dr["loan_sss"].ToString());
                                    values[9] = (dr["loan_pagIbig"].ToString());
                                    values[10] = (dr["loan_koti"].ToString());
                                    values[11] = (dr["tardinessAbscences"].ToString());
                                    values[12] = totalDeductionsTxtBox.Text;
                                    values[13] = (dr["overTime"].ToString());
                                    values[14] = (dr["leave"].ToString());
                                }
                                print = true;
                            }
                        }
                        catch (OleDbException ex)
                        {
                            MessageBox.Show(ex.Message);
                        }
                        finally
                        {
                            if (dr.IsClosed == false)
                            {
                                dr.Close();
                            }
                            db.CloseConnnection();
                        }

                        if (print == true)
                        {
                            // PRINTING
                            var p = new printClass();
                            p.print(@"C:\IT Box Incorporated\Payroll\payslipCSV.csv",
                                    "date_issued,employee_name,tax,sss,pagibig,phg,pco,sssloan,pagibigloan,kotiloan,late,total,ot,leave",
                                    "" + (DateTime.Now.Date.ToString("MMM") + " " + DateTime.Now.Date.ToString("yyyy")) + "," + values[2] + "," + values[3] + "," + values[4] + "," + values[5] + "," + values[6] + "," + values[7] + "," + values[8] + "," + values[9] + "," + values[10] + "," + values[11] + "," + values[12] + "," + values[13] + "," + values[14] + "",
                                    ofd.FileName);
                        }
                        else
                        {
                            MessageBox.Show("Print Failed!");
                        }
                    }
                    else
                    {
                        MessageBox.Show("Print Failed! Wrong File!");
                    }
                }
                else
                {
                    MessageBox.Show("Print Failed!");
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:33:41.147

在 Windows 7 中，如果您启用了预览，则在文件打开期间 Windows 将尝试预览文档并启动新的 winword 进程。

> 在 Windows 7 中禁用预览模式。

# javascript - 相当于 php mktime 的 Javascript

> ID：15062285
> 
> 赞同：7
> 
> 时间：2013-02-25T07:48:51.923
> 
> 标签：javascript

我在 php 中使用 mktime() 函数来获取给定年、月、日和分钟的秒数

```
$seconds = mktime($hour,$minute,$month,$day,$year); 
```

但我想在 javascript 中使用相同的...任何人都可以建议我在 javascript 中使用其等效函数的方法，它接受所有参数并返回秒数...我已经搜索了很多资源，但没有人给我输出。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T07:53:43.947

```
var seconds = new Date(year, month, day, hours, minutes, seconds, 0).getTime() / 1000; 
```

以上将给出自 1970 年 1 月 1 日以来的秒数。`getTime()`因此，毫秒数除以 1000。注意（正如 Aler Close 也提到的），月份范围为 0-11，因此与`mktime`

```
function java_mktime(hour,minute,month,day,year) {
    return new Date(year, month - 1, day, hour, minutes 0, 0).getTime() / 1000;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T07:52:28.987

使用日期对象

```
function mktime(hour,minute,month,day,year){
  a=new Date()
  a.setHours(hour)
  a.setMinutes(minute)
  a.setDate(day)
  a.setYear(year)
  return a.getTime()/1000
} 
```

或者，

```
 function mktime(hour,minute,month,day,year){
   return (new Date(year, month, day, hour, minute, 0)).getTime()/1000;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:52:26.643

您可以使用 Date 对象（月是从 0 到 11 的值）：

```
var date = new Date(year, month, day, hours, minutes, seconds); 
```

# xslt - 仅选择数字并在 xslt 中连接

> ID：15062286
> 
> 赞同：0
> 
> 时间：2013-02-25T07:48:55.217
> 
> 标签：xslt, xslt-2.0

我有下面的 xml 文档。在这里，我想制作一个 xslt 文档以仅选择“。”之前的数字 并附加它来制作一个像'BVI-Chapter01'这样的字符串，并且只给这个字符串一个锚标记，这里01根据'.'之前的数字改变。在下面的 xml 文档中。

```
<index>
<title>INDEX</title>
<indexdiv>
    <title>A</title>
    <indexentry>
        <primaryie>
            <content-style font-style="bold">Administration</content-style>
        </primaryie>
        <secondaryie>administration order 7.251, 7.254</secondaryie>
        <tertiaryie level="1">application for 7.255-7.257</tertiaryie>
        <tertiaryie level="2">conditions to be satisfied 7.258-7.260</tertiaryie>
        <tertiaryie level="1">blocking</tertiaryie>
        <tertiaryie level="2">qualifying administrative receiver 7.261-7.263</tertiaryie>
        <tertiaryie level="1">discharge of 7.288-7.280</tertiaryie>
        <tertiaryie level="1">effect of 7.264</tertiaryie>
        <tertiaryie level="2">directors not terminated 7.265, 7.266</tertiaryie>
        <tertiaryie level="1">moratorium 7.267</tertiaryie>
        <tertiaryie level="2">administrative receiver, appointment 7.270</tertiaryie>
        <tertiaryie level="2">commencement 7.268</tertiaryie>
        <tertiaryie level="2">disposal of changed assets 7.269</tertiaryie>
        <tertiaryie level="2">judicial decisions 7.273</tertiaryie>
        <secondaryie>administrator 7.274, <content-style font-style="italic">see also </content-style>
            <content-style font-style="bold">Administrators</content-style>
        </secondaryie>
        <secondaryie>British Virgin Island companies 7.250</secondaryie>
        <secondaryie>creditors, role of 7.283</secondaryie>
        <tertiaryie level="1">application to court for directions 7.286</tertiaryie>
        </indexentry>
        </indexdiv>
        </index> 
```

我希望输出如下。

```
<div class="index">
            <a name="BVI_IDX_01"> </a>
            <div class="index-title">INDEX</div>
            <div class="indexdiv">
                <div class="indexentry">
                    <div class="primaryie">
                        <span class="font-style-bold">Administration</span>
                    </div>
                    <div class="secondaryie">administration order <a href="er:#BVI_CH_07">7.251</a>, <a href="er:#BVI_CH_07">7.254</a>
                    </div>
                    <div class="tertiaryie-1">application for <a href="er:#BVI_CH_07">7.255</a>&#x2013;<a href="er:#BVI_CH_07">7.257</a>
                    </div>
                    <div class="tertiaryie-2">conditions to be satisfied <a href="er:#BVI_CH_07/P7-258">7.258</a>&#x2013;<a href="er:#BVI_CH_07/P7-260">7.260</a>
                    </div>
                    <div class="tertiaryie-1">blocking</div>
                    <div class="tertiaryie-2">qualifying administrative receiver <a href="er:#BVI_CH_07/P7-261">7.261</a>&#x2013;<a href="er:#BVI_CH_07/P7-263">7.263</a>
                    </div>
                    <div class="tertiaryie-1">discharge of <a href="er:#BVI_CH_07">7.288</a>&#x2013;<a href="er:#BVI_CH_07">7.280</a>
                    </div>
                    <div class="tertiaryie-1">effect of <a href="er:#BVI_CH_07">7.264</a>
                    </div>
                    <div class="tertiaryie-2">directors not terminated <a href="er:#BVI_CH_07">7.265</a>, <a href="er:#BVI_CH_07">7.266</a>
                    </div>
                    <div class="tertiaryie-1">moratorium <a href="er:#BVI_CH_07">7.267</a>
                    </div>
                    <div class="tertiaryie-2">administrative receiver, appointment <a href="er:#BVI_CH_07">7.270</a>
                    </div>
                    <div class="tertiaryie-2">commencement <a href="er:#BVI_CH_07>7.268</a>
                    </div>
                    <div class="tertiaryie-2">disposal of changed assets <a href="er:#BVI_CH_07">7.269</a>
                    </div>
                    <div class="tertiaryie-2">judicial decisions <a href="er:#BVI_CH_07">7.273</a>
                    </div>
                    <div class="secondaryie">administrator <a href="er:#BVI_CH_07">7.274</a>, <span class="font-style-italic">see also</span>
                        <span class="font-style-bold">Administrators</span>
                    </div>
                    <div class="secondaryie">British Virgin Island companies <a href="er:#BVI_CH_07">7.250</a>
                    </div>
                    <div class="secondaryie">creditors, role of <a href="er:#BVI_CH_07">7.283</a>
                    </div>
                    <div class="tertiaryie-1">application to court for directions <a href="er:#BVI_CH_07">7.286</a>
                    </div>
                    <div class="tertiaryie-1">proposals, amendment <a href="er:#BVI_CH_07">7.284</a>, <a href="er:#BVI_CH_07">7.285</a>
                    </div>
                    <div class="tertiaryie-1">unfair prejudice <a href="er:#BVI_CH_07">7.287</a>, <a href="er:#BVI_CH_07">7.289</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:48:24.783

XSLT 2.0 中的以下解决方案使用analyze-string 在文本节点中搜索所需的模式。

但是，这种转换并不能完全按照您的要求执行，因为我找不到这种链接的逻辑

```
<a href="er:#BVI_CH_07/P7-261">7.261</a> 
```

打印而不是这些类型的链接

```
<a href="er:#BVI_CH_07">7.261</a> 
```

另外我假设引用只能出现在二级和三级元素中。

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="html" indent="yes" />

    <!-- Use this string to replace all numbers on the text by a
         a different character which cannot be present in the text (#)-->
    <xsl:variable name="str-numbers" select="'0123456789'" />
    <xsl:variable name="str-special-char" select="'#'" />
    <xsl:variable name="str-special-seq" select="'##########'" />

    <!-- Build the index header structure -->
    <xsl:template match="index">
        <div class="index">
            <a name="BVI_IDX_01" />
            <div class="index-title"><xsl:value-of select="title" /></div>
            <div class="indexdiv">
                <xsl:apply-templates select="indexdiv" />
            </div>
        </div>
    </xsl:template>

    <!-- Ignore title from index div element -->
    <xsl:template match="indexdiv/title" />

    <!-- Transform main elements to divs -->
    <xsl:template match="indexentry|primaryie|secondaryie|indexdiv|indexentry">
        <div class="{local-name()}">
            <xsl:apply-templates select="node()" />
        </div>
    </xsl:template>

    <xsl:template match="tertiaryie">
        <div class="{concat(local-name(), '-', @level)}">
            <xsl:apply-templates select="node()" />
        </div>
    </xsl:template>

    <xsl:template match="content-style">
        <span>
            <xsl:attribute name="class">
                <xsl:value-of select="concat(local-name(@*[1]), '-', @*[1])" />
                <xsl:for-each select="@*[position() > 1]">
                    <xsl:value-of select="concat(' ', local-name(), '-', .)" />
                </xsl:for-each>
            </xsl:attribute>
            <xsl:apply-templates select="node()" />
        </span>
    </xsl:template>

    <!-- Transform numbers from textnodes within tertiaryie
         and secondaryie elements -->
    <xsl:template match="secondaryie/text()|tertiaryie/text()">
        <!-- Use a regular expression to match the desired pattern
             within the text -->
        <xsl:analyze-string select="." regex="((\d+)\.\d+)">
            <!-- A reference is found, print hyperlink -->
            <xsl:matching-substring>
                <a href="{concat('er:#BVI_CH_', format-number(number(regex-group(2)), '00'))}">
                    <xsl:value-of select="regex-group(1)" />
                </a>
            </xsl:matching-substring>
            <!-- Output the text which do not match the given pattern -->
            <xsl:non-matching-substring>
                <xsl:value-of select="." />
            </xsl:non-matching-substring>
        </xsl:analyze-string>
    </xsl:template>

</xsl:stylesheet> 
```

# twitter - 在网页上显示 Twitter 推文

> ID：15062287
> 
> 赞同：0
> 
> 时间：2013-02-25T07:48:58.077
> 
> 标签：twitter

我知道他们有很多插件可以让你做到这一点，但是所有的教程都说如何做到这一点以将你的推文作为纯文本 - 因此能够按照你的意愿设置它们的样式 - 对我不起作用。有谁知道我如何在网页上将推文显示为纯文本以便我设置它们的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T10:30:39.590

您可以使用 Twitter REST API 1.1

有关用户时间线，请参见[此处](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)的详细信息。

如果您正在使用 PHP，您可以使用[这个](https://github.com/J7mbo/twitter-api-php/blob/master/TwitterAPIExchange.php)Simple PHP wrapper for the v1.1 API。

对于.NET，您可以使用它`LINQTOTWITTER`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:03:48.437

你总是可以直接使用 Twitter API。例如，[https:](https://api.twitter.com/1/statuses/user_timeline.json?screen_name=YOUR_SCREENNAME) //api.twitter.com/1/statuses/user_timeline.json?screen_name=YOUR_SCREENNAME将返回**YOUR_SCREENNAME**的时间线。

**注意：**您的推文无法保护此功能，我也认为这仅适用于 API v1.0，不适用于 v1.1。

有关更多信息，请参阅[https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)。

# php - 如何安全地使用 MySQLi？

> ID：15062290
> 
> 赞同：1
> 
> 时间：2013-02-25T07:49:21.737
> 
> 标签：php, mysql, mysqli

所以我最近转而使用 MySQLi。我有几个问题。

我当前获取数据的代码是

```
$current = "SELECT * FROM hi where username='me'";
$result = $connect->query($current) or die($mysqli->error.__LINE__);
$row = $result->fetch_assoc(); 
```

我执行的查询是

$current = "SELECT * FROM hi where username='me'"; $result = $connect->query($current) 或 die($mysqli->error.LINE **)** ;

第一个问题，这是正确的方法吗？

它比 mysql_ 方法更安全吗？（听说可以防止打针什么的）

最后，除了现在使用 MySQLi，我还应该怎么做呢？我的代码是否足够安全？

我以前对将在 mysql 查询中使用的任何数据使用 mysql_real_escape_string(htmlspecialchars($string)，我还需要使用它们吗？因为我现在使用的是 MySQLi。

为了使我的网站安全，我还应该注意哪些其他事项？htmlspecialchars 任何用户输入？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:55:37.127

## 关于你的`mysqli_query`使用：

> 它比 mysql_ 方法更安全吗？（听说可以防止打针什么的）

在这里您没有注入问题，因为您不使用任何用户输入。所以 mysql_ or`mysqli_`似乎是等价的。

## 关于注入问题：

但是，如果您必须使用用户输入（例如`$_POST`或`$_GET`变量），最好使用准备好的语句。他们的语法是这样的：

```
$query = SELECT * FROM mytable WHERE col1=? AND col2=?;
$stmt = $db->prepare($query);
$stmt->bind_param('ss',$_POST['col1'],$_POST['col2']);//I put 2 s because I want 2 params. s stands for strings, i for integer. For that part PHP and mysqli extension offers you two alternative syntaxes. They give the same result but it depends on what you understand the best. 
```

*   第一：使用`bind_result`. 该函数必须在执行前调用。它将您的结果绑定到您在参数中提供的变量。第一列将填写第一个变量，第二列填写第二个参数...主要问题是它会将您从具有`fetch_all`,`fetch_assoc`或`fectch_object`.

    ```
    $stmt->bindResult($array['col1'], $array['col2'], $array['col3']);
    $stmt->execute();
    while($stmt->fetch_assoc()){
       var_dump($array);
    } 
    ```

*   第二：使用`get_result`. 它允许您在`mysqli_result`使用`$db->query()`. 它仅在您使用 mysqlnd 作为驱动程序时可用。如果您使用的是 php 5.3+，这是默认驱动程序，但使用 php 5.1 或 5.2（基本上，1&1 hoster 低于 5.2）并不总是这样。

    ```
    $stmt->execute();
    $result = $stmt->get_result()->fetch_all();
    foreach($result as $row){
       //handle your rows
    } 
    ```

## 关于逃避：

> mysql_real_escape_string(htmlspecialchars($string))

在 mysqli 中，您可以使用`mysqli_real_escape_string`. `htmlspecialchars`当涉及到数据库时，该功能是无用的。它仅用于展示。

# android - 到达列表末尾时在 Android 列表视图中自动加载数据

> ID：15062291
> 
> 赞同：2
> 
> 时间：2013-02-25T07:49:26.257
> 
> 标签：android, android-listview

我需要实现将从网站获取数据的自定义列表视图。当到达列表末尾时，将进行新的 api 调用。我不介意它是否继续在后台获取新数据并在到达列表结尾时显示它。

最好的方法是什么？

现在我已经创建了一个滚动视图。我进行 api 调用获取 10 条记录并从中创建一个线性布局并将其添加到滚动视图。我收听滚动，当它到达终点时，进行新的 api 调用并再次将其添加到滚动视图。但是它的性能不好，而且有时会冻结。

有什么更好的方法来实现这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T12:17:41.433

事实上，我昨晚刚刚写了一篇关于这个的博客。它应该完全按照您的要求执行：[http](http://www.thekeyconsultant.com/2013/02/android-simple-endless-lists-with.html) ://www.thekeyconsultant.com/2013/02/android-simple-endless-lists-with.html 。如果您需要任何澄清，请告诉我。

当加载数据集一半的视图时，该示例开始加载下一个数据集。这样，如果用户滚动缓慢，他们可能永远看不到列表的“结尾”。如果需要，您可以更改它，使其等到结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T10:46:23.310

我建议检查滚动而不是使用适配器，因为您可以处理任意数量的项目（甚至是 0），并且还可以根据 adapterView 告诉它所看到的内容来自定义何时进行额外加载。

这是一个示例代码：

```
mAdapterView.setOnScrollListener(new OnScrollListener() 
  {
  ...
  @Override
  public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) 
    {
    final boolean needLoading =!mIsLoadingNewData&& firstVisibleItem + visibleItemCount >= mAdapter.getCount() - 1;
    mIsLoadingNewData=true;
    if(needLoading)
      //load the new data and then update the adapter with new data and then set mIsLoadingNewData to false
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-06T13:24:53.467

它是滚动监听器的一个实现，它存储参数以防您需要实现分页查询，每次滚动到达底部时查找不同的十位。

```
 private class ScrollListener implements AbsListView.OnScrollListener {

    private int currentScrollState;
    private int totalItemCount;
    private int currentVisibleItemCount;
    private boolean loading;
    private int pageSize = 10;
    private int offset = 0;

    public void setLoading(boolean loading) {
        this.loading = loading;
    }

    public int getPageSize() {
        return this.pageSize;
    }

    public int getOffset() {
        return this.offset;
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        this.currentScrollState = scrollState;
        this.isScrollCompleted();
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {
        this.currentVisibleItemCount = firstVisibleItem + visibleItemCount; // last item
        this.totalItemCount = totalItemCount;
    }

    private void isScrollCompleted() {
        if (this.currentVisibleItemCount > 0
                && this.totalItemCount - 1 == this.currentVisibleItemCount
                && this.currentScrollState == SCROLL_STATE_IDLE) {
            // Detect if there's been a scroll which has completed and load more
            if (!loading && preguntas.getAdapter() != null) {
                loading = true;
                offset += pageSize;
                loadMoreData(offset, pageSize);
            }
        }
    }
} 
```

# objective-c - iOS 支持 RTMPT 吗？

> ID：15062298
> 
> 赞同：0
> 
> 时间：2013-02-25T07:49:56.687
> 
> 标签：objective-c

我很难找到与应该在 iOS 中构建/运行的 RTMPT 流媒体相关的示例项目。所以我认为有可能根本没有。我看到其他人的一些帖子说iOS不支持RTMP，这是真的吗？我希望得到一些回应和一些帮助，如果有的话，我在哪里可以获得一些样本。我真的很想看到已经可以运行的代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T08:02:14.230

正如 sanika Kulshreshtha 在[此论坛主题](http://forums.adobe.com/thread/949067)中所说：

> iOS 确实支持 RTMP。您是否尝试流式传输 H.264 视频？在这种情况下，您将不得不使用 FMS 4.5。 [http://www.adobe.com/devnet/flashmediaserver/articles/stream-ondemand-flash-and-ios.html](http://www.adobe.com/devnet/flashmediaserver/articles/stream-ondemand-flash-and-ios.html) 应该会有所帮助。iOS 不支持 Netstream 类的某些方法和事件。查看 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#play()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#play()) 以供参考。

# ruby - 如何知道我目前采用的是哪种方法

> ID：15062303
> 
> 赞同：0
> 
> 时间：2013-02-25T07:50:17.760
> 
> 标签：ruby, metaprogramming

在我正在编写的一种方法中，我的代码如何知道它当前在哪个方法中？我需要这个，因为我想获取方法名称并解析它以获取其中的一部分，例如“add_order”，然后我可以使用第二部分“order”来处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T07:54:09.737

用于`__method__`获取您当前所在方法的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:57:12.597

```
def get_mname
  caller[0]=~/`(.*?)'/  # quote is a backtick
  $1
end

def name_of_my_method
  puts get_mname
end

name_of_my_method

# => name_of_my_method 
```

# c# - 带有弱引用的单元测试代码

> ID：15062308
> 
> 赞同：1
> 
> 时间：2013-02-25T07:51:02.093
> 
> 标签：c#, unit-testing, weak-references

我没有创建框架，但我需要为它编写测试。情节...

*   它使用 Wea​​kReference 来保存一个对象，我调用了一个基本方法来为它分配对象（BaseClass.Register(weakObject)）
*   我可以通过方法（BaseClass.GetObject()）检索该对象
*   测试它...我必须先注册我的模拟 (BaseClass.Register(mockWeak.Object))

在执行依赖于注册对象的方法时，我的测试有时会失败，因为在我对其执行测试之前它已被垃圾收集。

我可以做些什么来阻止 GC 收集我的 WeakReference 对象吗？

注意：不应在框架（BaseClass）中进行任何更改，仅在我的测试类中进行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:17:21.393

抱歉，我找到了答案...在测试过程中，您应该使用...

```
GC.KeepAlive(weakObject) 
```

完整参考这里。

[http://defragdev.com/blog/?p=129](http://defragdev.com/blog/?p=129)

# iphone - 检查 iphone 进程之间的 Internet 连接

> ID：15062310
> 
> 赞同：1
> 
> 时间：2013-02-25T07:51:06.733
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有以下代码

```
NSURL *url = [NSURL URLWithString:@"http://wallpaperswide.com/download/flattened_grass-wallpaper-2800x1050.jpg"];  //Line1
NSData *data = [[NSData alloc] initWithContentsOfURL:url];  //Line2
UIImage *tmpImage = [[UIImage alloc] initWithData:data];  //Line3
NSLog(@"%@",tmpImage);  //Line4 
```

在第 2 行中，下载该 url 中的图像需要一些时间……在这之间我必须检查互联网连接……这怎么可能？

我会详细解释我的问题....

upto line1 我的 iphone 有互联网连接。现在 line2 正在执行......在下载过程中，在这个过程的中间，我失去了我的互联网连接......

现在我如何通知用户“您没有互联网连接”...

那么如何检查此过程之间的 Internet 连接。？

是否有任何委托方法...请帮助我

提前致谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:57:29.217

你可以做这样的事情

```
Reachability *reach = [Reachability reachabilityForInternetConnection];
NetworkStatus netStatus = [reach currentReachabilityStatus];
if (netStatus == NotReachable) {
    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"" message:@"Could not connect to the server, please check your internet connection !" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];

}
else
{

 }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:57:54.887

我通常做的是使用`NSURLConnectionDelegate`. 如果连接出现错误，我将使用[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)来查看互联网是否存在问题，或者是否是服务器错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:08:35.967

NSURLConnection NSURLConnectionDelegate NSURLRequest *theRequest＝［NSURLRequest requestWithURL：<br> ［NSURL URLWithString：@“<a href="http://www.sina.com.cn/" rel="nofollow">http://www.sina .com.cn/”】
cachePolicy：NSURLRequestUseProtocolCachePolicy
timeoutInterval：60.0];
NSURLConnection *theConncetion=[[NSURLConnection alloc]
initWithRequest:theRequest delegate:self];
如果（连接）
{

receivedData＝[[NSMutableData 数据] retain]；
}

*   (void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)error

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T12:32:36.640

这里可能的方法...

1) 使用 NSURLConnection 委托方法。

2) 使用 Rechability 类

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T13:26:13.777

您可以使用修改了 Tony Million 的 Reachability 类，您可以在[Reachability找到](https://github.com/tonymillion/Reachability)

您可以使用它来定义可访问性更改时调用的块。所以你可以用它来显示一个 UIAlertView。

如果您想异步下载图像，我建议使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)。它已经提供了向使用的 AFHttpClient 添加 ReachabilityStatusBlock 的可能性。

因此，如果将 AFNetworking.h 导入到以下位置，您可以重写代码：

```
AFHTTPClient *client = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://wallpaperswide.com"]];
[client registerHTTPOperationClass:[AFImageRequestOperation class]];

[client setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) {
    if(status == AFNetworkReachabilityStatusNotReachable){
        NSLog(@"Not reachable");
    }
}];

AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:[client requestWithMethod:@"GET" path:@"/download/flattened_grass-wallpaper-2800x1050.jpg" parameters:nil] success:^(UIImage *image) {
    NSLog(@"%@", image);
}];
[operation start]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T12:25:51.900

最后我找到了我的问题的答案......我在这里粘贴以供将来参考

**声明一个全局变量**

```
NSMutableData *receivedData; 
```

**在 ViewDidLoad 中：**

```
receivedData=[[NSMutableData alloc]init];
NSURLRequest *theRequest =[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://wallpaperswide.com/download/flattened_grass-wallpaper-2800x1050.jpg"]];

NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

if (theConnection)
{
}

else
{
    // Inform the user that the connection failed.
    UIAlertView *connectFailMessage = [[UIAlertView alloc] initWithTitle:@"NSURLConnection " message:@"Failed in viewDidLoad"  delegate: self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
    [connectFailMessage show];
} 
```

**NSURLConnection 委托方法..**

```
#pragma mark NSURLConnection methods

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
 {
[receivedData setLength:0];
 }

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
[receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    // inform the user
UIAlertView *didFailWithErrorMessage = [[UIAlertView alloc] initWithTitle: @"NSURLConnection " message: @"didFailWithError"  delegate: self cancelButtonTitle: @"Ok" otherButtonTitles: nil];
[didFailWithErrorMessage show];

//inform the user
NSLog(@"Connection failed! Error - %@ %@",
      [error localizedDescription],
      [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
 UIImage *tmpImage = [[UIImage alloc] initWithData:receivedData];
  myImageView.image=tmpImage;
 NSLog(@"%@",tmpImage);
} 
```

# android - 想要计数 ListView 项目并在每个 ListView 项目上显示计数器

> ID：15062311
> 
> 赞同：2
> 
> 时间：2013-02-25T07:51:07.310
> 
> 标签：android, android-listview, listviewitem

我陷入了 Counting `ListView`items 并在 Particular ListView Items 上显示 Counters 。请参阅下面的实际我想做的事情：

这是 ListView 项的示例：

教学大纲**（列表项目计数）** <我的标题>

前任。

*   教学大纲 (1/10) Android
*   教学大纲 (2/10) Java
*   教学大纲 (10/10) Java
*   ...更多的

我从我的本地数据库中获取这些列表视图项目，请建议我任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:55:09.850

我建议您创建一些子类，`ListAdapter`并且在`getView()`方法中只使用**int position**来获取每个孩子的位置和**数据源的大小**来获取总数。

例如，如果您将使用`SimpleCursorAdapter`so用于获取每个子项（行）位置的`cursor.getCount()`项目计数和方法`int position`参数。`getView()`

基本示例：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
   if (c.moveToPosition(position) { 
      String name = c.getString(c.getColumnIndex(Constants.COL));
      String another = c.getString(c.getColumnIndex(Constants.COL_2));
      String text = value + "(" + String.valueOf(position) + "/" + String.valueOf(c.getCount()) + ") " + another; 
      textView.setText(text);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T07:53:41.240

在列表的自定义布局中添加一个文本视图并`position +"/10"`在该文本视图中进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:54:46.753

您可以获取总项目的长度，然后尝试使用以下代码。

```
for (int i = 0; i < length; i++) {
 Syllabus (i/total length) < My Heading >
       } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:54:56.650

你需要有你的自定义 CursorAdapter，比如

```
public class ExampleCursorAdapter extends CursorAdapter {
public ExampleCursorAdapter(Context context, Cursor c) {
    super(context, c);
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    TextView summary = (TextView)view.findViewById(R.id.summary);
    summary.setText(cursor.getString(
            cursor.getColumnIndex(ExampleDB.KEY_EXAMPLE_SUMMARY)));
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View v = inflater.inflate(R.layout.item, parent, false);
    bindView(v, context, cursor);
    return v;
}
} 
```

# jqgrid - 是否可以改变 JqGrid 的整个外观和感觉？（不仅仅是主题变化）

> ID：15062319
> 
> 赞同：0
> 
> 时间：2013-02-25T07:51:24.610
> 
> 标签：jqgrid

我知道，这个论坛对这个问题几乎没有答案，在下面我有答案列表：

1.  不要加载 Jquery UI CSS 和 JqGrid CSS 文件并将您自己的 CSS 类添加到 JqGrid

或者

1.  在运行时使用 JavaScript 删除 CSS 类并将您自己的 CSS 类添加到 JqGrid。

我正在寻找一些专业的方法来改变 JqGrid 的整体外观。

在我的情况下，第一个想法是行不通的，因为我有两个网格，我想只为一个网格更改主题，这里的主题意味着不仅仅是 UI 主题，整个 JqGrid 的外观都会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:35:27.670

可以在一个页面上加载多个 jQuery UI 主题。在这种情况下，您可以这样做，然后根据需要自定义一个主题以更改 jqGrid 的外观。

# java - 集合如何在内部避免重复？

> ID：15062322
> 
> 赞同：8
> 
> 时间：2013-02-25T07:51:31.437
> 
> 标签：java

我对 Collections 框架中的集合有疑问。集合本身将如何识别重复项以及它将如何知道？谁能解释一下它是如何实现的？hashcode 和 equals 方法将如何出现？我需要一个简短的解释，因为这对我来说真的很重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T07:56:13.553

它大致是这样工作的

```
if (!collection.contains(element))
    collection.add(element); 
```

而 contains 方法将使用 equals/hashcode。

在 TreeSet 中，元素存储在红黑树中，而 HashSet 使用 HashMap。

事实上，它添加到容器的方式是特定于元素的（树上的点，哈希表中的桶），因此添加本身使用 equals/hashcode。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-25T07:53:24.117

这在[用于`Set`.](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

> 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T08:01:10.127

实际实现取决于容器。[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)查找给定的项目，[`hashCode`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)然后通过使用测试插入的对象和存储的对象`equals`（这是要求`a.equals(b)`iff的原因之一`b.equals(a)`）。

`TreeMap`另一方面，依赖于`compareTo`方法的结果（如果元素实现[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)或`compare`由 a 实现的方法[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)）。如果`compare`返回 0，则元素被视为“等于”。（注意`compareTo`应该*与equals一致*，即`a.compareTo(b)==0`iff `a.equals(b)`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T07:53:28.670

`HashSet`使用`hashcode()`toresolve bucket 对象应该去的地方和`equals()`方法来检查位于该桶上的对象的相等性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-05T13:04:32.830

## *"你能用这些例子解释一下吗。s.add("123");s.add("123");"*

对于上面在 Set 接口上下文中解释的查询，请参考下面的代码片段和解释。

```
public void setTest() {
    Set<String> obj = new HashSet<>();
    System.out.println(obj.add("123")); //Output : true
    System.out.println(obj.add("123")); //Output : false
} 
```

如果您在上面的代码段中注意到，我们已经添加了 123 两次。第一次添加 SOP 将返回 true。然后第二次添加“123”，SOP 将返回 false。

由此我们可以理解，***如果我们在 Set 中第二次或更多次添加相同的值，那么重复的值将被跳过***。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-04T17:15:48.997

基本上 set 是一个接口，它有很多不同的实现，现在让我们以 HashSet 实现为例，为了回答你的问题，我下载了源代码并进入了 HashSet 类，然后我搜索了 add 方法，发现它使用 HashMap 来存储唯一值. 它使用要存储的值作为 HashMap 的键，并将键的对应值（即下面代码片段中的 PRESENT）作为常量值（该值是一个虚拟值），我们都知道 map 的键是唯一的。这就是它的工作原理。下面的代码：

```
private static final Object PRESENT = new Object();
public boolean add(E e) {
    return map.put(e, PRESENT)==null;
} 
```

# database - 在 jsf Web 应用程序中本地化数据库数据

> ID：15062327
> 
> 赞同：1
> 
> 时间：2013-02-25T07:51:47.210
> 
> 标签：database, jsf, localization, internationalization

我正在开发一个链接到 MYSQL 数据库的 JSF 2.0 应用程序。我需要以多种语言呈现应用程序和数据。使用每种语言的属性文件使应用程序国际化非常简单，但对于数据库，我不知道如何实现它。这是一个示例表（为简单起见，我不会包括所有字段）：

```
Tradeshows
id
place
date
description
posterUrl 
```

所有的展会都应该呈现给用户，我使用 primefaces 数据网格来做到这一点。我怎样才能用其他语言显示它们？我已经为每种语言（如`Tradeshows_es`, ）考虑了一个单独的表`Tradeshows_en`，但我不知道如何从 JSF 页面中的选定语言表中加载数据。

# javascript - jquery获取特定动态的价值``

> ID：15062332
> 
> 赞同：1
> 
> 时间：2013-02-25T07:52:06.727
> 
> 标签：javascript, jquery, jquery-selectors

我有一个这样的页面（我没有足够的点来发布图像，所以我放在其他主机上）

[http://i47.tinypic.com/akixx2.jpg](http://i47.tinypic.com/akixx2.jpg)

我想要的是当用户单击删除然后 jquery 可以找到特定的电子邮件。例如，当用户在 John 的行上单击删除时，jquery 可以找到他的电子邮件的值。

这是我的html：

```
<table class="table">
    {foreach $query as $value}
    <tr>
        <td>{$value@iteration}</td>
        <td>{$value.buyer_un}</td>
        <td id="delete{$value@iteration}">{$value.buyer_email}</td>
        <td>{$value.buyer_address}</td>
        <td>{$value.buyer_create_date}</td>
        <td>{$value.buyer_status}</td>
        <td>
            <a id="delete{$value@iteration}" role="button" data-toggle="modal" data-target="#modal" class="btn btn-danger">Delete</a>&nbsp;
            <button type="button" class="btn btn-primary">Save</button>
        </td>
    </tr>
    {/foreach}
    </table> 
```

这是我的失败的jQuery：

```
<script>
$("a[id*='delete']").click(function(){
    var selected=$('td:eq(2)',this).val();
    $.post("{#siteUrl#}superuser/proses",{literal}{del:"TRUE",email:selected}{/literal}, function(data)
    {
        $(".modal-body").html(data);
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:17:54.370

尝试，

```
$("a[id*='delete']").click(function(event){
    event.preventDefault();
    var selected = $(this).closest('tr').find('td:eq(2)').text();
    //ajax request
}); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:07:57.953

添加一个`delete`类，`a`然后将电子邮件地址添加`data-`到`a`. 因此，您可以执行以下操作：

```
$('.delete').click(function(){
     var email = $(this).attr('data-email');
     //ajax to php to delete.
}); 
```

ID 是单数的，仅表示一个。类，是多个。

# java - javascript 不能在 tomcat 服务器上运行

> ID：15062334
> 
> 赞同：0
> 
> 时间：2013-02-25T07:52:14.970
> 
> 标签：java, javascript, jsp, tomcat

我在 jsp 文件上有一段 javascript 代码，当我在 tomcat 服务器上运行它时它不起作用！！我不知道为什么，也没有出现错误。当我将它保存在html中并打开时，没关系，但是在tomcat中运行html时，什么也没有显示。这是代码：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript" src="stmenu.js"></script></head>
<body>
<div>
<script type="text/javascript">

stm_bm(["phpjchr",970,"","blank.gif",0,"","",0,0,0,0,500,0,0,0,"","",0,0,1,1,"default","hand","",1,25],this);
stm_bp("p0",[1,4,0,0,1,5,0,0,100,"progid:DXImageTransform.Microsoft.Checkerboard(squaresX=16,squaresY=16,direction=right,enabled=0,Duration=0.40)",10,"",-2,70,2,10,"#e8e8e8","transparent","",0,0,0,"#00B55A"]);
stm_ai("p0i0",[0,"aaa","","",-1,-1,0,"#","_self","","","","",0,0,0,"","",0,0,0,0,1,"#abe271",1,"#abe271",1,"bg_15.gif","bg_20.gif",3,3,0,0,"#00cc00","#00cc00","#003333","#006600","bold 11pt B  Nazanin","bold 11pt B Nazanin",0,0,"","","","",0,0,0],255,36);
stm_aix("p0i1","p0i0",[0,"aaa","","",-1,-1,0,"","_self","","","","",0,0,0,"","",0,0,0,0,1,"#cccccc",1,"#cccccc",1,"bg_02.gif","bg_02.gif",3,3,0,0,"#cccccc","#999999"],255,0);
stm_aix("p0i2","p0i1",[0,"aaa"],255,0);
stm_aix("p0i3","p0i0",[0,"ddddd ","","",-1,-1,0,"#","_self","","","","",0,0,0,"","",0,0,0,0,1,"#cccccc",1,"#cccccc",1,"bg_02.gif","bg_20.gif",3,3,0,0,"#cccccc","#999999","#003333","#006600","bold 11pt B  Nazanin","italic bold 11pt B Nazanin"],255,0);
stm_aix("p0i4","p0i3",[0,"dddd"],255,0);
stm_ep();
stm_em();

</script>

</p>
</div>
</body>
</html> 
```

# javascript - 代码 return val + '' === numVal + '' 是为了什么？

> ID：15062335
> 
> 赞同：1
> 
> 时间：2013-02-25T07:52:18.970
> 
> 标签：javascript

我正在看书，看到了一个函数，但我无法理解**var numVal = +val;行。返回 val + '' === numVal + '';** . 谁能帮忙解释一下？提前致谢！

```
<!DOCTYPE html>
<html>
<body>
<script>

function isNumeric(val) {
    var numVal = +val;  // what's this for?
    return val + '' === numVal + ''; // what's this for?
}

function filterNumeric(arr) {
    var result = [];

  for(var i=0; i<arr.length; i++) {
    var val  = arr[i];
        if (isNumeric(val)) {
            result.push(val);
        }
  }

  return result;
}

var arr = ["a",1, 2, "b"];

arr = filterNumeric(arr);
alert(arr);

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T07:57:05.983

这些是本质上进行类型转换（强制）的 JavaScript 技巧。

*   是应用于的`+val`数字一元运算符，它强制将其解释为数字。如果有帮助，在英语中我总是认为这意味着“积极”（不要与绝对值混淆）。另请参阅[一元加号和减号运算符的重要用途是什么？](https://stackoverflow.com/questions/5450076/whats-the-significant-use-of-unary-plus-and-minus-operators).`+``val``val`

*   是应用于两个对象和字符串的`val + ''`二元运算符。即，这是字符串连接运算符。这强制被解释为一个字符串，然后与空字符串连接（它什么都不做）。对.`+``val``''``val``numVal`

*   The`===`是“严格相等”的相等运算符，它同时测试 value*和 type*。请注意，这被解析为`(val + '') === (numVal + '')`. 由于在这种情况下您将始终比较两个字符串，因此这不是必需的；`==`就足够了。

* * *

该代码等效于以下伪代码：

```
//var numVal = +val
var numVal = numeric.Parse(val) or NaN;

//return val + '' === numVal + ''
return val.ToString().Equals(numVal.ToString()); 
```

* * *

看一些例子：

```
val numVal (val + '') (numVal + '') 返回
-------------------------------------------------- ----
23 23 '23' '23' 真
'23' 23 '23' '23' 真
'23x' NaN '23x' 'NaN' 假
'垃圾' NaN '垃圾' 'NaN' 假
'1E23' 1e+23 '1E23' '1e+23' 假
'1e+23' 1e+23 '1e+23' '1e+23' 真
1e+23 1e+23 '1e+23' '1e+23' 真

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T07:56:44.723

代码实际上是：

```
 return (val + '') === (numVal + '') ; 
```

转换为`A === B`ie 是 A 严格等于 B ，具有相同的数据类型和值。这里`val`和`numVal`是两个整数，通过将`''`它们相加，它们的结果被类型转换为字符串。

该语句比较两个数字字符串，并根据它们是否相等返回`true`或。`false`

例如;

```
'1' === 1     // false
'1' == 1 // true
1 + ''   === '1'  // true
2 + '' ===  (1+1) + ''   // true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T07:54:48.250

在`+`Javascript 中有很多含义。第一个一元`+`适用于数值。第二个和第三个是与空字符串连接以获得数字的字符串表示

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T07:58:45.313

```
 var numVal = +val; 
```

当`val`是字符串时，`numVal`将字符串转换为数字。（类似于`parseInt()`，没有基数魔法）

```
 val + '' === numVal + ''; 
```

这使用身份运算符并检查和`===`的字符串值（通过添加空字符串创建）是否相同。基本上，如果是，它将评估为。这里真的没有任何必要，对于相同的操作就足够了。`val``numval``numVal``NaN``false``===``==`

# primefaces - Primefaces Dataexport 打印 标签

> ID：15062338
> 
> 赞同：4
> 
> 时间：2013-02-25T07:52:25.717
> 
> 标签：primefaces, data-export

我正在将数据从 ap:dataTable 导出到一个 excel 文件中，并且我使用 <br> 标签以特殊方式格式化了其中一列中的数据。

这是布局： [![描述](../Images/26ece657fd92722d8b0113bec5a30032.png)](https://i.stack.imgur.com/rRLs7.jpg)

问题是当我导出表格时， <br> 标签被打印到 excel 文档中，如下所示：

[![Excel 说明](../Images/aa6b97751cbace28a0ce5047d3f76702.png)](https://i.stack.imgur.com/q1KJ2.jpg)

我现在使用的代码：

```
 <p:column sortBy="#{serviceLevel.titleAndDescription}">
                    <f:facet name="header">Description: </f:facet>
                    <h:outputText style="font-weight:bold" value="Title: &lt;br /&gt;" escape = "false"/>
                    <h:outputText value="#{serviceLevel.title} &lt;br /&gt; &lt;br /&gt;" escape = "false"/>
                    <h:outputText style="font-weight:bold" value="Description: &lt;br /&gt;" escape = "false"/>
                    <h:outputText value="#{serviceLevel.description}" />
                </p:column> 
```

我尝试在 outputText 之间使用普通的 < br > 标签，效果相同。

我尝试使用 < p:spacer > 但导出器不支持它:(

关于如何为用户保留布局但不在导出的 excel 文档中显示 html 标签的任何想法？

我正在使用 Primefaces 3.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:27:37.183

感谢 SimonSez 的建议，我在一些 CSS 的帮助下设法解决了这个问题。

这是我使用的解决方案：

```
 <p:column sortBy="#{serviceLevel.titleAndDescription}">
                    <f:facet name="header">Description: </f:facet>
                    <h:outputText style="font-weight:bold; display: block;" value="Title: " />
                    <h:outputText style="display: block;" value="#{serviceLevel.title}" />
                    <h:outputText style="font-weight:bold; display: block; padding-top: 20px;" value="Description: " />
                    <h:outputText value="#{serviceLevel.description}" />
                </p:column> 
```

# c# - 如果派生类继承了基类的私有成员，那为什么不是构造函数呢？

> ID：15062350
> 
> 赞同：2
> 
> 时间：2013-02-25T07:53:20.217
> 
> 标签：c#, oop, inheritance, constructor

我想澄清我对 c# 中这个基本 OOPS 概念的理解。在大多数互联网站点上，我读到派生类**继承**了基类的私有成员，但它**无法访问**这些成员。

> 派生类可以访问基类的公共、受保护、内部和受保护的内部成员。即使派生类继承了基类的私有成员，它也不能访问这些成员。但是，所有这些私有成员仍然存在于派生类中，并且可以完成与基类本身相同的工作。例如，假设受保护的基类方法访问私有字段。该字段必须存在于派生类中，以便继承的基类方法正常工作。

来源：http: [//msdn.microsoft.com/en-us/library/ms173149.aspx](http://msdn.microsoft.com/en-us/library/ms173149.aspx)

我的问题是，如果我们认为上面是正确的，那么我们可以说**“基类的构造函数是在派生类中继承的，但是派生类只能使用 base 关键字通过自己的构造函数访问/调用它，并且这个构造函数将不可用外部世界同时创建派生类的实例”**。

```
public class Employee
{
    public int salary;

    public Employee(int annualSalary)
    {
        salary = annualSalary;
    }
}

public class Manager : Employee
{
    public Manager(int annualSalary)
        : base(annualSalary)
    {
        //Add further instructions here.
    }
} 
```

因为要调用基类构造函数，它应该存在**于**该类中。也许我的解释是错误的。谁能解释一下？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:00:23.923

为了构造一个`Manager`你需要使用基类中的**任何**构造函数来构造基类，如果只有一个（在这种情况下）你需要调用它。这并不意味着您必须定义具有相同签名的构造函数。

您也可以这样做：

```
public Manager() : base(100000)
{
} 
```

或者

```
public Manager(string name, int salary) : base (salary)
{
     // store name
} 
```

在构建过程中，`Manager`您将在堆上分配一个新对象。该对象将要求足够的内存，以便它可以存储在基类 ( `Employee`) 和具体类 ( `Manager`) 中定义的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:01:15.690

这取决于您如何定义“现在”。如果将其定义为“可用的地方”，则基类中的私有成员以及构造函数都是“存在的”。如果您将“存在”定义为“在该特定类中找到”，则两者都不是“存在”。

尝试使用反射。您不会从基类中找到任何私有成员。私有成员是继承的，因此可用，但仍仅在基类中。

构造函数也是如此。

```
 class A
    {
        private A(int i) { }
        public A() { }
        private void Foo() { }
        public void Bar() { }
    }

    class B : A
    {

    }

    var aProperties = typeof(A).GetMembers(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.FlattenHierarchy);
    // you won't see Foo in this line, nor any constructors of A
    var bProperties = typeof(B).GetMembers(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public  | BindingFlags.FlattenHierarchy); 
```

最后，你可以说：

*   基类的所有成员都以某种方式可用于执行。
*   没有从继承类调用私有成员的语法（也没有从类外的任何地方调用）
*   基类的构造函数只能使用`base`关键字从构造函数中调用。（构造函数*总是*从层次结构中的每个基类调用。如果未指定，它是默认构造函数。）
*   只有被类声明（或覆盖）的成员才能真正在该特定类的“内部”找到。使用反射，您可以`BindingFlags.FlattenHierarchy`用来展平基类中的可见成员。私有成员和构造函数只能在声明类中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:37:47.063

> “基类的构造函数在派生类中继承，但派生类只能通过自己的构造函数使用base关键字访问/调用它，并且在创建派生类的实例时，该构造函数将不被外界使用”。

是的，这是正确的。

> 因为要调用基类构造函数，它应该存在于该类中。

就像基地的私人或受保护成员一样，它是“存在的”，但外部无法访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T19:32:19.137

如果有一种方法可以让类可以指定对于每个父类构造函数，系统应该推断出具有相同签名和访问权限的子类构造函数的存在，它只会处理字段初始值设定项和链，这将很有帮助到相应的基本构造函数。根据特定要求提供此类功能不太可能导致错误；如果派生类没有指定任何构造函数（而不是仅推断链接到基本无参数构造函数的无参数构造函数），即使这是推理，如果这是语言设计特性（添加这样的特性然而，对于现有框架来说，这将是一个坏主意，

但是，如果派生类有任何自己的重要构造函数，则子类很可能不打算在不经过其中一个的情况下创建任何对象。假设一个父类只有一个参数化的构造函数并且有人写道：

```
class Child : Parent
{
   Thing blah;
   Child()
   {
      blah = new Thing();
   }
} 
```

每`Child`一个被创造出来的东西都将被`blah`设置为一个新事物。现在假设基类的新版本添加了一个`Name`属性，并添加了一个指定名称的构造函数。如果构造函数是自动继承的，那么说的代码`myChild = new Child("Fred");`将链接到 的构造函数`Parent`，但永远不会设置`blah`为 new `Thing`。

如果一个类可以指定应该通过链接到父构造函数然后执行指定的代码块来建立子类不变量来生成每个实例，那么安全构造函数“继承”可能成为可能。然而，这样的功能实现起来会有些复杂，而且还不清楚它是否值得付出代价。

# wordpress - 如何将 nodejs 安装为资产上传 Web 服务以使用我的 wordpress 设置

> ID：15062355
> 
> 赞同：0
> 
> 时间：2013-02-25T07:53:44.523
> 
> 标签：wordpress, web-services, node.js

我有一个 Wordpress 设置，我的客户需要用户使用前端表单（而不是 wp 后端）将大图像和视频文件上传到媒体库中。

我正在考虑使用 express 之类的东西和强大的包

我想知道是否可以在我的 vps 服务器上创建一个 wordpress 可以与之通信的内部服务。

具体来说，我想知道：

1.  如何点击 api.domain.com/uploads 之类的外部 url 并将 wordpress 数据发送到该服务器

2.  如何将处理后的输出返回到 wordpress，然后保存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:39:49.460

这是通过 node.js 和 PHP 从外部源检索信息的示例

[http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/](http://coenraets.org/blog/2012/10/creating-a-rest-api-using-node-js-express-and-mongodb/)

话虽如此，我会亲自通过插件设计创建一个短代码，或者为这个特定的表单设置创建一个主题模板，并结合 PHP、JS、Jquery 和各种功能

```
if(is_page("page_name")) {
    /*custom functions that will connect externally*/
    wp_insert_comment($array_of_values);  //pass values through standard PHP methods (global variables, etc)
} 
```

参考：

[https://codex.wordpress.org/Writing_a_Plugin](https://codex.wordpress.org/Writing_a_Plugin)

[http://codex.wordpress.org/Shortcode_API](http://codex.wordpress.org/Shortcode_API)

[http://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

[http://codex.wordpress.org/Function_Reference/wp_insert_comment](http://codex.wordpress.org/Function_Reference/wp_insert_comment)

[http://codex.wordpress.org/The_Loop#Nested_Loops](http://codex.wordpress.org/The_Loop#Nested_Loops)

# iphone - UIScrollView 与单触式分页

> ID：15062358
> 
> 赞同：0
> 
> 时间：2013-02-25T07:53:56.417
> 
> 标签：iphone, uiscrollview, xamarin.ios

我发现这篇关于带有分页的 UIScrollView 的文章：

[http://www.codeproject.com/Tips/45818/UIScrollView-with-paging-sample-for-Monotouch-Deve](http://www.codeproject.com/Tips/45818/UIScrollView-with-paging-sample-for-Monotouch-Deve)

作者说：

> “.... 插入 3 个视图控制器并制作 _page1、_page2、_mainpage.. 之类的出口。并将这些出口与视图链接。请注意，您必须使用 _mainpage 视图引用视图控制器的视图出口。”

我是 monotouch 的新手，这篇文章没有任何我用它来与之相似的源代码。任何人都可以帮助我上面这句话的含义以及我应该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:42:13.720

有一个使用[https://github.com/escoz/monotouch-controls](https://github.com/escoz/monotouch-controls)的简单教程- 它不使用 XIB，它写得很好，非常小并且在 GitHub 上有完整的代码：

[http://escoz.com/blog/paging-controllers-with-monotouch/](http://escoz.com/blog/paging-controllers-with-monotouch/)

# bash - 删除行的第一部分

> ID：15062361
> 
> 赞同：2
> 
> 时间：2013-02-25T07:54:06.327
> 
> 标签：bash, sed

给定以下文件

```
$ cat a.txt
The quick brown fox jumps over the lazy dog 
```

我可以使用轻松删除第一部分`sed`

```
$ sed 's/.*fox//' a.txt
 jumps over the lazy dog 
```

我试图聪明地选择这个`D`选项

```
D      Delete  up  to  the first embedded newline in the pattern space. 
```

例子

```
$ sed 's/fox/\n/; D' a.txt 
```

但是，这没有输出。`sed`可以使用`D`类似于我尝试过的选项删除行的第一部分吗？

如果之前的`fox`部分比之后的部分短，则此方法有效。

```
$ sed 's/fox/\r/' a.txt
 jumps over the lazy dog 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:59:58.083

一种方法：

```
sed '/fox/{s/fox/\n/;D}' input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T17:01:47.203

这可能对您有用（GNU sed）：

```
 sed 's/fox/\n/;T;D' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:21:26.530

这是完整的帮助文本：

> 删除模式空间中的文本直到第一个换行符。如果留下任何文本，则使用生成的模式空间重新启动循环（不读取新的输入行），否则开始正常的新循环。

您的示例不起作用，因为`D`将重新启动循环并继续删除行，直到什么都没有。

如果您真的想使用*perreal 的*`D`答案，或者您可能更喜欢使用条件分支（或仅限 GNU ）。这是一个 GNU 和 BSD 兼容的版本：*`t``T`*

 **解析.sed*

```
s/fox/\
/
t del
b
:del
D 
```

像这样运行它：

```
sed -f parse.sed a.txt 
```

输出：

```
 jumps over the lazy dog 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T01:14:27.623

如果之前的`fox`部分比之后的部分短，则此方法有效。

```
$ sed 's/fox/\r/' a.txt
 jumps over the lazy dog 
```*

# drools - JBPM - 自定义工作项属性的自定义编辑器

> ID：15062363
> 
> 赞同：0
> 
> 时间：2013-02-25T07:54:10.800
> 
> 标签：drools, jbpm, drools-guvnor

**我已经使用.wid**文件在 JBPM 中为电子邮件任务/活动定义了一个自定义工作项。

**“邮件**正文”属性之一需要富文本或文本区域进行编辑。

我知道在**.wid**文件中，我们必须设置**customEditor**属性，将其映射到编辑器。

是否可以为此使用现有的编辑器？

前任。脚本任务为其“脚本”属性提供了一个富文本编辑器。

我可以将该脚本编辑器用于我的自定义工作项的属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:57:26.753

Since you tagged this with drools-guvnor, I assume this is related to the web-based Designer, not the Eclipse-based one? The custom editor is something that is currently only supported in Eclipse.

In Designer, you can currently register custom editors for specific properties:[http://surdilovic.wordpress.com/2012/07/03/custom-input-editors-in-jbpm-designer/](http://surdilovic.wordpress.com/2012/07/03/custom-input-editors-in-jbpm-designer/)

Support for custom editors as you describe will be available in the next version.

Kris

# jquery - jQuery.getJSON() 在 IE9 及以下版本无法正常工作

> ID：15062364
> 
> 赞同：2
> 
> 时间：2013-02-25T07:54:14.943
> 
> 标签：jquery, ajax, youtube-api

```
var video_id='VA770wpLX-Q';

$.getJSON('http://gdata.youtube.com/feeds/api/videos/'+video_id+'?v=2&alt=jsonc',function(data,status,xhr){
    alert(data.data.title);
}); 
```

我在 ie9 及以下版本中使用 getJSON() 时遇到问题，请求已完成但功能未运行，它正在除 IE 之外的所有其他浏览器上运行，已经在不同的 jquery 版本上进行了测试，仍然没有运气，求助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:04:13.780

试试这个 hack，在这种情况下它应该让 IE 处理跨域请求：

```
$.support.cors = true;
$.getJSON('http://gdata.youtube.com/feeds/api/videos/' + video_id + '?v=2&alt=jsonc', function (data) {
    console.log(data.data.title);
}); 
```

为我工作[http://jsbin.com/ariyec/1/](http://jsbin.com/ariyec/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:15:20.850

经过几个小时的谷歌搜索，我找到了一个简单有效的解决方案！

[jQuery.getJSON 在带有 gdata json-c 的 IE8 中无法正常工作。为什么？](https://stackoverflow.com/questions/6318996/jquery-getjson-not-working-properly-in-ie8-with-gdata-json-c-why)

只需添加`&callback=?`到您的 url 字符串的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T10:06:21.223

请像这样使用jsonp：

```
 var video_id='VA770wpLX-Q';

  $.ajax({
    url: 'http://gdata.youtube.com/feeds/api/videos/'+video_id+'?v=2&alt=jsonc',
    success: function(data,status,xhr){alert(data.data.title);},
         dataType: 'jsonp'
  }); 
```

# android - 滚动视图中的列表视图时如何工作？

> ID：15062365
> 
> 赞同：12
> 
> 时间：2013-02-25T07:54:16.403
> 
> 标签：android, listview, android-activity, scroll, scrollview

我在**Android 1.6 和 2.2**中这样做...

我在 Activity 中有一个***ScrollView （ScrollView 中的所有内容）...***

第二个是 Activity 中的一个***ListView*** ....

当我滚动 ListView 时，当时 ScrollView 正在滚动，但***ListView 的 Scroll 不起作用***......

我提供了我**遇到**的**问题**...

如果有人有这个解决方案，那么请分享...

![在此处输入图像描述](../Images/4554c234bca616c3b16c5d0c307dd74f.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-25T07:58:04.517

这里 parentScroll = 你的主滚动视图和 childScroll = 你的列表视图

```
parentScroll.setOnTouchListener(new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    Log.v("PARENT", "PARENT TOUCH");
                    findViewById(R.id.child_scroll).getParent()
                            .requestDisallowInterceptTouchEvent(false);
                    return false;
                }
            });

  childScroll.setOnTouchListener(new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    Log.v("CHILD", "CHILD TOUCH");
                    // Disallow the touch request for parent scroll on touch of
                    // child view
                    v.getParent().requestDisallowInterceptTouchEvent(true);
                    return false;
                }
            }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-08T13:36:10.507

```
 svView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            int action = event.getAction();
            switch (action) {
            case MotionEvent.ACTION_DOWN:
                // Disallow ScrollView to intercept touch events.
                v.getParent().requestDisallowInterceptTouchEvent(true);
                break;

            case MotionEvent.ACTION_UP:
                // Allow ScrollView to intercept touch events.
                v.getParent().requestDisallowInterceptTouchEvent(false);
                break;
            }

            // Handle ListView touch events.
            v.onTouchEvent(event);
            return true;
        }
    }); 
```

# php - 忽略 XML 之外的无效字符？

> ID：15062367
> 
> 赞同：-1
> 
> 时间：2013-02-25T07:54:19.063
> 
> 标签：php, xml, simplexml

我从 curl 请求中收到了这个 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<transaction>
    <result>PENDING</result>
    <merchanttransid>343434343</merchanttransid>
    <transref>23232323</transref>
    <errorcode>000</errorcode>
    <errormessage/>
    <description/>
</transaction>
SMTP Error: Could not connect to SMTP host. 
```

但是，服务器正在回复 SMTP 错误的附加错误响应：无法连接到 SMTP 主机。现在，当通过 simplexml_load_string() 解析时。

**它抛出一个错误：**

> 实体：第 10 行：解析器错误：文档末尾的额外内容（错误编号：2）

因为，XML 是正确的，只是在响应上有问题，有没有办法去除多余的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:11:55.390

如果你知道结构总是这样，循环每一行，从左边去掉空格，如果第一个字符不同于“<”，则删除该行。最后将结果提供给 SimpleXML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:10:57.377

您可以尝试调用传递参数的函数来忽略读取 XML 的错误消息：

```
$xml = simplexml_load_file($url, "SimpleXMLElement", LIBXML_NOERROR |  LIBXML_ERR_NONE); 
```

您可以查看完整列表，其中包含可以传递给此函数的选项：[http ://www.php.net/manual/en/libxml.constants.php](http://www.php.net/manual/en/libxml.constants.php)

另一种解决方案（如果要解析大文件则不好）是逐行读取字符，然后删除最后一行。

```
$xml = '<?xml...?>';
$lines = explode("\n", $xml);
unset( $lines[count($lines)-1] ); // remove last line
$output = implode($lines); // output now contains xml without the last line 
```

希望有帮助。

# c# - 我可以定义一个将 1 或 N 个字符串值作为参数的方法吗

> ID：15062369
> 
> 赞同：0
> 
> 时间：2013-02-25T07:54:26.987
> 
> 标签：c#, .net

我很确定在某些时候我已经读过这个并且我认为这是可能的（虽然不是很确定）但我不记得如何做到这一点。我想创建一个验证方法，它可以将 1 个或多个字符串作为参数，这些字符串应该根据相同的规则进行验证。所以基本上我需要的是这样的：

```
public bool CheckMyStringValues (Strings...)
{
//My common logic for all strings
} 
```

这将在我的基类中，然后从我的子类中调用它，例如：

```
CheckMyStringValues("firstString")
or
CheckMyStringValues("firstString", "secondSTring")
..
and so on... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T07:56:14.397

尝试 ：

```
public bool CheckMyStringValues(params string[] strings) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T07:56:56.280

你可以使用一个[`params`](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.80%29.aspx)数组：

```
public bool CheckMyStringValues (params string[] strings)
{
    foreach(string str in strings)
    {
        if(yourCondition)
        {
            return false;
        }
    }
    return true;
} 
```

您可以通过多种方式使用它：

```
bool result = CheckMyStringValues(); // empty array
result = CheckMyStringValues(null);  // array is null
result = CheckMyStringValues("");    // one empty string in array
result = CheckMyStringValues("firstString"); // one string in array
result = CheckMyStringValues("firstString", "secondString"); // etc ...
result = CheckMyStringValues(new[]{"firstString", "secondString", "thirdString"}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T07:56:36.227

```
public bool CheckMyStringValues (params string[] list)
{
} 
```

这将允许您使用调用该方法`CheckMyStringValue("1stString", "2ndString")`

# php - 如何使总数据插入表？

> ID：15062371
> 
> 赞同：1
> 
> 时间：2013-02-25T07:54:42.673
> 
> 标签：php, mysql, phpmyadmin

我想自动计算销售额、费用和银行存款的总额

```
<?php

$result = mysql_query("select * from new");

$x = 0;
while($row = mysql_fetch_assoc($result))
{
?>

<tr>
    <td><?php echo $row["D_date"]; ?></td>
    <td><?php echo $row["D_id"]; ?></td>
    <td><?php echo $row["D_item"]; ?></td>
    <td><?php echo $row["D_sales"]; ?></td>
    <td><?php echo $row["D_expenses"]; ?></td>
    <td><?php echo $row["D_bankin"]; ?></td>
</tr>

<?php
$x++;
}
?>

<?php

$result1 = mysql_query("select * from new");
while($row1 = mysql_fetch_assoc($result1))
{
?>
    <tr>
        <td colspan="3">Total</td>
        <td><?php echo $row1["D_totalsales"]; ?> </td>
        <td><?php echo $row1["D_totalexpenses"]; ?></td>
        <td><?php echo $row1["D_totalbankin"]; ?></td>
    </tr>
<?php
}
?> 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:04:02.903

无需为此触发两个查询。您可以在单个查询中执行相同的操作。

将您的查询更改为

```
$results = mysql_query("SELECT *,SUM(`D_sales`) as D_totalsales ,SUM(`D_expenses`) as D_totalexpenses ,SUM(`D_totalbankin`) as D_totalbankin FROM new");

while($row = mysql_fetch_assoc($result))
{
?>
<tr>
  <td><?php echo $row["D_date"]; ?></td>
  <td><?php echo $row["D_id"]; ?></td>
  <td><?php echo $row["D_item"]; ?></td>
  <td><?php echo $row["D_sales"]; ?></td>
  <td><?php echo $row["D_expenses"]; ?></td>
  <td><?php echo $row["D_bankin"]; ?></td>
  <td><?php echo $row["D_totalsales"]; ?></td>
  <td><?php echo $row["D_totalexpenses"]; ?></td>
  <td><?php echo $row["D_totalbankin"]; ?></td>
</tr> 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:01:36.030

```
 SELECT SUM(D_sales), ... FROM table_name 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T07:57:37.027

您可以使用 mysql_num_rows()

```
echo mysql_num_rows($result); 
```

# python - 如何在 python 中将 os.popen、os.path.join 用于命令行 ls

> ID：15062378
> 
> 赞同：-2
> 
> 时间：2013-02-25T07:55:12.670
> 
> 标签：python, popen, os.system, os.path

我有以下目录和子目录，其中包含 txfiles。我想访问它们以阅读这些行。但这不起作用。你能帮帮我吗？

主目录：2009

子目录：电影、专辑、歌曲

每个目录都包含文本文件。我想通读这些文本文件的每一行

我的伪代码如下

```
x = os.listdir("2009") 
```

现在，x 将是 [电影、专辑、歌曲] 的列表

```
for el in x:
  os.system("ls 2009/el")
  for lines in os.popen(2009/el"):
       print lines 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:54:26.400

如果您只希望它访问该行（例如，如问题所示将它们打印出来），我认为您不需要 os.popen。

您提供的代码不起作用，因为它甚至有语法错误。（不匹配的双引号）

这是一些示例代码，可以满足您的要求。

```
>>> dirname='2009' #or the full path.
>>> for filename in os.listdir(dirname):
...     with open(os.path.join(dirname, filename)) as f:
...         for line in f.readlines():
...             print line
... 
```

我希望这有帮助。

# delphi - SOAP：Delphi 2010 生成的 WSDL 定义中的错误错误

> ID：15062380
> 
> 赞同：2
> 
> 时间：2013-02-25T07:55:23.093
> 
> 标签：delphi, soap, wsdl, rpc

我在 Delphi 2010 中生成 WSDL 时遇到问题。我写了一个示例并复制了生成的 WSDL 文件：

```
<?xml version="1.0"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="IHalloWeltIntfservice" targetNamespace="http://www.micos.de/namespace/" xmlns:tns="http://www.micos.de/namespace/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:ns1="http://www.borland.com/namespaces/Types" xmlns:ns2="urn:XSTypen" xmlns:ns3="urn:uHalloWeltIntf">
  <types>    
    <xs:schema targetNamespace="urn:uHalloWeltIntf" xmlns="urn:uHalloWeltIntf">
      <xs:complexType name="EHalloWelt">
        <xs:sequence>
          <xs:element name="KundenId" type="xs:int"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
  </types>  
  <message name="HoleHalloWeltAlsXML2Request">
    <part name="InstitutionId" type="xs:int"/>
    <part name="KundenId" type="xs:int"/>
  </message>
  <message name="HoleHalloWeltAlsXML2Response">
    <part name="return" type="xs:string"/>
  </message>
  <message name="HoleHalloWeltAlsXML2fault0">
    <part name="EHalloWelt" type="ns3:EHalloWelt"/>
  </message>
  <portType name="IHalloWeltIntf">    
    <operation name="HoleHalloWeltAlsXML">
      <input message="tns:HoleHalloWeltAlsXML2Request"/>
      <output message="tns:HoleHalloWeltAlsXML2Response"/>
      <fault name="EKeineVitalwerteVorhanden" message="tns:HoleHalloWeltAlsXML2fault0"/>
    </operation>
  </portType>
  <binding name="IHalloWeltIntfbinding" type="tns:IHalloWeltIntf">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>    
    <operation name="HoleHalloWeltAlsXML">
      <soap:operation soapAction="urn:uHalloWeltIntf-IHalloWeltIntf#HoleHalloWeltAlsXML" style="rpc"/>
      <input>
        <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:uHalloWeltIntf-IHalloWeltIntf"/>
      </input>
      <output>
        <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:uHalloWeltIntf-IHalloWeltIntf"/>
      </output>
      <fault>
        <soap:fault use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:uHalloWeltIntf-IHalloWeltIntf"></soap:fault>
      </fault>
    </operation>
  </binding>
  <service name="IHalloWeltIntfservice">
    <port name="IHalloWeltIntfPort" binding="tns:IHalloWeltIntfbinding">
      <soap:address location="http://localhost:1024/soap/IHalloWeltIntf"/>
    </port>
  </service>
</definitions> 
```

起初该文件看起来不错，但如果我尝试将其导入 NetBeans，ant wscompile 目标会告诉我绑定块中缺少属性。soap:fault 元素没有 name 属性。在我看来，该属性在 WSDL 定义中是必需的。这是 Delphi 中的错误还是有任何方法可以使 WSDL 在其他语言中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:54:06.747

Delphi 2010 生成的 WSDL 使用 RPC 编码的 SOAP 样式（请参阅[NetBeans 7.0 和 JAX-RPC Web 服务](http://www.stormacq.com/netbeans-7-0-and-jax-rpc-web-service/)）。

如果您手动修复 WSDL 中的错误，NetBeans 7.2 中的 SAX-RPC 导入器会生成所需的 Java 类：

```
 <fault name="EKeineVitalwerteVorhanden">
    <soap:fault name="EKeineVitalwerteVorhanden" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:uHalloWeltIntf-IHalloWeltIntf"></soap:fault>
  </fault> 
```

发电机输出：

```
ant -f C:\\Users\\... test.wsdl4-client-wscompile
init:
wscompile-init:
test.wsdl4-client-wscompile:
Copying 1 file to C:\Users\...\build\generated-sources\jax-rpc\wsdl
Warnung: Verarbeitung von WS-I-nicht-entsprechendem Vorgang "HoleHalloWeltAlsXML" mit RPC-Stil und SOAP-kodiert
Warnung: R2716/R2726 WSI-BasicProfile Ver. 1.0, Namespace-Attribut unzulässig in doc/lit oder rpc/lit für soapbind:fault: "EKeineVitalwerteVorhanden"
BUILD SUCCESSFUL (total time: 2 seconds) 
```

# c++ - uint8、uint16等的使用

> ID：15062386
> 
> 赞同：22
> 
> 时间：2013-02-25T07:55:37.953
> 
> 标签：c++, c, memory-management, embedded

目前，我正在使用针对 32 位 MIPS 平台的代码库（C、C++ 混合）。该处理器是一个相当现代的处理器[只是提到我们拥有大量的处理能力和内存]。

代码库使用 uint8[1 字节宽无符号整数]、uint16[2 字节宽无符号整数]、uint32[4 字节宽无符号整数]等数据类型。

我知道在将代码移植到不同平台时如何使用这些构造。

我的问题是：

1.  使用 uint16 的用途/好处是什么，而 uint32 也足够了（如果有的话）？

2.  使用较短的数据类型（考虑数据对齐）是否会节省内存使用？

3.  如果是为了节省几个字节的内存，在现代硬件中这样做是否明智？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T08:22:46.147

> 使用 uint16 的用途/好处是什么，而 uint32 也足够了（如果有的话）？

如果这些`uint16s`是数组或结构的一部分，则可以节省内存，并且可能能够处理比`uint32s`相同数组或结构更大的数据集。这真的取决于你的代码。

可能会使用数据协议和文件格式，但使用`uint16s`它可能不正确`uint32s`。这取决于格式和语义（例如，如果您需要将值从 65535 环绕到 0，`uint16`则会自动执行此操作，而`uint32`不会自动执行此操作）。

OTOH，如果这些`uint16s`只是单个局部或全局变量，用 32 位变量替换它们可能没有显着差异，因为它们可能由于对齐而占用相同的空间，并且它们作为 32 位参数传递（在堆栈或在寄存器中）无论如何都在 MIPS 上。

> 使用较短的数据类型（考虑数据对齐）是否会节省内存使用？

可能会有所节省，尤其是当`uint16s`它们是许多结构的一部分或大数组的元素时。

> 如果是为了节省几个字节的内存，在现代硬件中这样做是否明智？

是的，您降低了内存带宽（这总是一件好事），并且当您操作较少的数据时，您通常会降低各种缓存未命中（数据缓存和 TLB）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T10:03:36.673

首先，如果您定义了诸如 uint16 之类的类型，它们是在哪里定义的？它们不是标准类型，因此将在某些专有标头中定义-可能是您的标头，也可能由某些第三方库提供；在这种情况下，您必须问自己该代码的可移植性如何，以及您是否正在创建在其他应用程序中可能没有意义的依赖项。

另一个问题是，许多库（不明智的 IMO）定义了具有各种名称的此类类型，例如 UINT16、uint16、U16 UI16 等，这在确保类型一致性和避免名称冲突方面变得有些噩梦。如果定义了此类名称，*则*理想情况下应将它们放置在命名空间中或赋予库特定前缀以指示它们被定义为与哪个库一起使用，例如`rtos::uint16`to `rtos_uint16`.

由于 ISO C99 标准库在 stdint.h 中提供了标准位长度特定类型，因此您应该优先使用它们而不是专有或第三方头文件中定义的任何类型。这些类型有一个`_t`后缀，例如`uint16_t`. 在 C++ 中，它们可能被放置在`std::`命名空间中（尽管这不是给定的，因为在 C99 中引入了标头）。

> 1] 使用 uint16 的用途/好处是什么，而 uint32 也足够（如果有的话）？

除了我之前对 prefer `stdint.h`'s 的建议之外`uint16_t`，使用长度特定类型至少有两个正当理由：

1.  匹配特定的硬件寄存器宽度。
2.  跨不同架构强制执行通用且兼容的 API。

> 2] 使用较短的数据类型（考虑数据对齐）会节省内存使用吗？

可能，但如果内存不是您的问题，那不是使用它们的好理由。对于大型数据对象或数组可能值得考虑，但全局应用很少值得付出努力。

> 3]如果是为了节省几个字节的内存，在现代硬件中这样做是否明智？

见[2]。然而， “*现代硬件*”并不一定意味着大量资源；例如，有很多只有几 Kb RAM 的 32 位 ARM Cortex-M 设备。这更多地与芯片空间、成本和功耗有关，而不是与设计或架构的时代有关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T08:16:30.953

[`cstdint`](http://en.cppreference.com/w/c/types/integer)有很多`typedef`s 用于不同的目的。

*   `intN_t`对于特定宽度
*   `int_fastN_t`对于最快的整数，它至少有 N 位
*   `int_leastN_t`对于最小的整数，它至少有 N 位
*   他们的`unsigned`等价物

你应该根据你的情况来选择。在 a 中存储数千`std::vector`而不进行大量计算？`intN_t`可能是你的男人。需要对少量整数进行快速计算？`int_fastN_t`可能是你的家伙。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T08:03:27.813

答。1.软件有一定的要求和规范，严格要求在编码/解码或其他某些用途时只取8/16位参数。因此，即使您将大于 127 的值分配到 u8 中，它也会自动为您修剪数据。

答。2\. 我们不应该忘记，我们的编译器在优化方面远远超出智能，无论是内存还是复杂性。因此，始终建议尽可能使用较小的内存。

答。3\. 当然，在现代硬件上节省内存是有意义的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T08:23:45.113

必须检查生成的机器代码/汇编程序以验证是否有任何代码保存。在 RISC 类型架构中，典型的立即数是 16 位的，但使用 uint16_t 无论如何都会消耗一个完整的 32 位寄存器——因此，如果使用 int 类型，但承诺使用接近零的值将产生相同的结果并且更便携。

IMO 节省内存在现代平台上也是值得的。更严格的代码会带来更好的电池寿命和更流畅的用户体验。但是，我建议仅在使用（大）数组或变量映射到某些实际硬件资源时对大小进行微观管理。

附言。编译器很聪明，但编写它们的人目前正在使它们变得更好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T07:58:36.890

使用`uint16_t`而不是`uint32_t`节省内存。它也可能是硬件限制（例如，某些外围控制器确实发送 16 位！）但是，由于缓存和对齐考虑（您确实必须进行基准测试），它可能不值得使用它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-25T08:01:34.690

> 使用 uint16 的用途/好处是什么，而 uint32 也足够了（如果有的话）？

有`unsigned char`16 位值的 CPU。如果不使用 typedef（uint16 只是适当类型的 typedef），则对此类代码进行单元测试会很困难。

此外，通过使用这些 typedef，可以更轻松地在不同平台上构建，而不会出现很多问题。

> 使用较短的数据类型（考虑数据对齐）是否会节省内存使用？

不，这不是重点。如果`uint16`是 typedef `unsigned short`，那么你可以`unsigned short`在任何地方使用，但你可能会在不同的平台上得到不同的类型。

当然，使用更小的类型会减少内存消耗。例如，使用 uint16 而不是 uint32，但前提是您使用数组。

> 如果是为了节省几个字节的内存，在现代硬件中这样做是否明智？

这取决于平台：

*   更少的内存使用意味着更少的缓存未命中
*   如果支持，有处理 16 位数据的 SIMD 函数

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-25T08:02:38.687

您的问题的答案归结为一个关键概念：数据有多大？如果您要处理大量数据，那么使用较小数据类型的好处是显而易见的。可以这样想：简单地计算新发现的最大已知素数可能会使您在典型工作站上耗尽内存。该数字本身需要超过千兆字节才能存储。这不包括计算实际数字。如果您要使用粗数据类型而不是细数据类型，那么您可能会看到 2 GB。一个简单的例子，但仍然是一个很好的例子。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-25T08:07:47.413

使用精确宽度的整数类型（如`int32_t`和朋友）有助于避免在`int`和具有不同大小的平台之间出现符号扩展错误`long`。例如，这些可能在应用位掩码或位移位时发生。例如，如果您在 a 上执行这些操作`long`，并且您的代码适用于 32-bit `long`，则它可能会中断 64-bit `long`。另一方面，如果您使用 a `uint32_t`，则无论平台如何，您都确切知道会得到什么结果。

它们对于在平台之间交换二进制数据也很有用，您只需要担心存储数据的字节顺序而不是位宽；如果你写`int64_t`一个文件，你知道在另一个平台上你可以读取它并将它存储到一个`int64_t`. 如果您在一个平台上写出 a`long`而不是 64 位，那么您可能最终需要`long long`在另一个平台上使用 a，因为`long`只有 32 位。

节省内存通常不是原因，除非您谈论的是非常有限的环境（嵌入的东西）或大型数据集（例如具有 5000 万个元素的数组等）。

# android - 想要从数据库中检索给定日期范围内的值

> ID：15062387
> 
> 赞同：0
> 
> 时间：2013-02-25T07:55:41.727
> 
> 标签：android, android-sqlite

我想通过以下方式获取值：

我想获取当前周数的总值，我的代码在这里：

```
SimpleDateFormat weekDateFormat = new SimpleDateFormat("dd/MM/yyyy");
Calendar c = Calendar.getInstance();
c.set(Calendar.DAY_OF_WEEK, 1);
Date weekFirstDate = c.getTime();
String strWeekFirstDay = weekDateFormat.format(weekFirstDate);
Cursor weekCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date BETWEEN '"+strWeekFirstDay+"' AND '"+todays_date+"';", null);
int weekCounter = 0;
if(weekCursor.moveToFirst())
    weekCounter = weekCursor.getInt(0);
else
    weekCounter = 0;
weekCursor.close(); 
```

这是获取当前月份总计数的代码：

```
SimpleDateFormat monthDateFormat = new SimpleDateFormat("dd/MM/yyyy");
    Calendar c2 = Calendar.getInstance();
    c2.set(Calendar.DAY_OF_MONTH, 1);
    Date monthFirstDate = c2.getTime();
    String strMonthFirstDay = monthDateFormat.format(monthFirstDate);

    Cursor monthCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date BETWEEN '"+strMonthFirstDay+"' AND '"+todays_date+"';", null);
    int monthCounter = 0;
    if(monthCursor.moveToFirst())
        monthCounter = monthCursor.getInt(0);
    else
        monthCounter = 0;
    monthCursor.close() 
```

这个对吗 ？？因为它不能正常工作，意味着我得到了错误的值。我也想让我的一周从星期一开始。有人会更正我的代码或建议一些新代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:49:57.840

以这种格式存储所有日期，然后重试..

`MM-dd-yyyy`

```
Cursor monthCursor = database.rawQuery("select sum(cat_attribute_unit) from counter where cat_id ="+cat_id+" AND counter_entry_date BETWEEN '"+strMonthFirstDay+"' AND '"+todays_date+"';", null); 
```

# android - 以粗体显示文本

> ID：15062395
> 
> 赞同：2
> 
> 时间：2013-02-25T07:56:13.423
> 
> 标签：android, xml, layout

如何在 xml 的图形布局中以粗体显示文本？我希望我的标题是粗体，而结果是正常格式。谢谢你。我希望你能帮我解决这个问题。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/coordinates"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/instruction" />

    <TextView
        android:id="@+id/result"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/result" />

    <Button
        android:id="@+id/btn_process"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/btn_text" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="300dp"
            android:orientation="vertical" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Original" />

            <ImageView
                android:id="@+id/imageSource"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/test_ideal_graph" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="Result" />

            <FrameLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <ImageView
                    android:id="@+id/imageAfter"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <ProgressBar
                    android:id="@+id/progressBar"
                    style="?android:attr/progressBarStyleLarge"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />
            </FrameLayout>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T07:59:13.563

在`strings.xml`

```
<string name="your_string_name"><b> I am bold text</b> And I am not bold</string> 
```

使用这种方法可以在格式化文本时获得更大的灵活性。

还记得使用，`Html.fromHtml("your html string");`在 TextView 中设置文本

**例如**

```
String s="<b> I am text in bold </b> and I am not.";
TextView t=new TextView();
t.setText(Html.fromHtml(s)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:57:55.733

例如：

```
android:textStyle="bold" 
```

或者当需要斜体时：

```
android:textStyle="italic" 
```

了解更多信息：

[http://developer.android.com/reference/android/text/style/package-summary.html](http://developer.android.com/reference/android/text/style/package-summary.html)

还可以查看此线程以获取更多信息：

[如何在 Android 中将文本更改为粗体？](https://stackoverflow.com/questions/4792260/how-do-you-change-text-to-bold-in-android)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T10:41:58.360

如果您希望 中的所有文本都`TextView`使用粗体，

`android:textStyle="bold"`

如果你只希望它的一部分是粗体的，你可以使用这样的`Spannable`从 Html生成一个：`Html.fromHtml()`

`String text = "This is some <b>sample</b> text"; yourTextView.setText(Html.fromHtml(text));`

这里的“样本”会以粗体显示。

# gcc - 如何在 Ubuntu 上安装 g++-4.7？

> ID：15062400
> 
> 赞同：0
> 
> 时间：2013-02-25T07:56:23.847
> 
> 标签：gcc, ubuntu, g++, package, debian

没有`g++-4.7`with `apt-get install`，所有`g++`提供的版本`apt-get`都等于或低于4.6，那怎么安装`g++-4.7`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:00:14.293

从网上下载 g++ 4.7 deb 包。然后使用 dpkg 安装它

# c# - Moq 测试作废方法

> ID：15062403
> 
> 赞同：12
> 
> 时间：2013-02-25T07:56:35.020
> 
> 标签：c#, unit-testing, nunit, moq

嗨，我是 Moq 测试的新手，很难做一个简单的断言。我正在使用一个界面

```
 public interface IAdd
 {
     void add(int a, int b);
 } 
```

接口的起订`IAdd`量为：

```
 Mock<IAdd> mockadd = new Mock<IAdd>();
  mockadd.Setup(x => x.add(It.IsAny<int>(), It.IsAny<int>()).callback((int a, int b) => { a+b;});
  IAdd testing = mockadd.Object; 
```

由于该`add`方法是无效的，它不会向 Assert 返回任何值。我怎样才能断言这个设置？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-25T16:10:31.670

为什么使用模拟？它用于验证 SUT（被测系统）与其依赖项（应该被模拟）正确交互。正确的交互意味着使用正确的参数调用正确的依赖成员。

你**永远不应该断言 mock 返回的值**。那是与生产代码无关的虚拟值。您应该断言的唯一值是 SUT 返回的值。SUT 是您唯一应该为其编写断言的东西。

你也不应该**测试接口**。因为没有什么可以测试的。接口只是一个 API 描述。它没有实现。所以，停下来想想你在这里测试什么代码？这是在您的应用程序中执行的真实代码吗？

所以，你应该只模拟`IAdd`接口来测试使用`IAdd`接口的对象。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-25T16:04:25.767

最好提供更多上下文，但通常它是这样使用的：

```
var mockAdd = new Mock<IAdd>();
mockAdd.Setup(x => x.Add(1, 2)).Verifiable();

//do something here what is using mockAdd.Add

mockAdd.VerifyAll(); 
```

# java - 使用 Apache POI 3.6 将图像插入 Excel 时出错

> ID：15062405
> 
> 赞同：0
> 
> 时间：2013-02-25T07:56:42.600
> 
> 标签：java, apache-poi

您好，我正在使用 POI 3.6

我想将图像插入 Excel，但是当我创建图像时出现这样的错误

```
java.io.EOFException
at javax.imageio.stream.ImageInputStreamImpl.readFully(ImageInputStreamImpl.java:330)   at javax.imageio.stream.ImageInputStreamImpl.readFully(ImageInputStreamImpl.java:330)

at java.io.DataInputStream.readUTF(DataInputStream.java:565)    at java.io.DataInputStream.readUTF(DataInputStream.java:565)

at javax.imageio.stream.ImageInputStreamImpl.readUTF(ImageInputStreamImpl.java:309) at javax.imageio.stream.ImageInputStreamImpl.readUTF(ImageInputStreamImpl.java:309)

at com.sun.imageio.plugins.png.PNGImageReader.parse_iTXt_chunk(PNGImageReader.java:443) at com.sun.imageio.plugins.png.PNGImageReader.parse_iTXt_chunk(PNGImageReader.java:443)

at com.sun.imageio.plugins.png.PNGImageReader.readMetadata(PNGImageReader.java:647) at com.sun.imageio.plugins.png.PNGImageReader.readMetadata(PNGImageReader.java:647)

at com.sun.imageio.plugins.png.PNGImageReader.readImage(PNGImageReader.java:1309)   at com.sun.imageio.plugins.png.PNGImageReader.readImage(PNGImageReader.java:1309)

at com.sun.imageio.plugins.png.PNGImageReader.read(PNGImageReader.java:1579)    at com.sun.imageio.plugins.png.PNGImageReader.read(PNGImageReader.java:1579)

at javax.imageio.ImageReader.read(ImageReader.java:923) at javax.imageio.ImageReader.read(ImageReader.java:923)

at org.apache.poi.ss.util.ImageUtils.getImageDimension(ImageUtils.java:66)  at org.apache.poi.ss.util.ImageUtils.getImageDimension(ImageUtils.java:66)

at org.apache.poi.xssf.usermodel.XSSFPicture.getImageDimension(XSSFPicture.java:284)    at org.apache.poi.xssf.usermodel.XSSFPicture.getImageDimension(XSSFPicture.java:284)

at org.apache.poi.xssf.usermodel.XSSFPicture.getPreferredSize(XSSFPicture.java:200) at org.apache.poi.xssf.usermodel.XSSFPicture.getPreferredSize(XSSFPicture.java:200)

at org.apache.poi.xssf.usermodel.XSSFPicture.resize(XSSFPicture.java:167)   at org.apache.poi.xssf.usermodel.XSSFPicture.resize(XSSFPicture.java:167)

at org.apache.poi.xssf.usermodel.XSSFPicture.resize(XSSFPicture.java:154)   at org.apache.poi.xssf.usermodel.XSSFPicture.resize(XSSFPicture.java:154)

at com.yagnaiq.core.ui.renderer.grid.ExportExcelHelper.insertChartToExcel(ExportExcelHelper.java:137) 
```

我的代码是这样的。

```
InputStream inputStream = new FileInputStream("C:/dev/workspaces/4.2.3/YagnaWebJSP/WebRoot/images/Forum_Sprite.png");

        byte[] picData = null;
        File pic = new File( "C:\\dev\\workspaces\\4.2.3\\YagnaWebJSP\\WebRoot\\images\\Forum_Sprite.png" );
        long length = pic.length();
        picData = new byte[ ( int ) length ];
        FileInputStream picIn = new FileInputStream( pic );
        picIn.read( picData );
        int pictureIdx = workbook.addPicture( picData, HSSFWorkbook.PICTURE_TYPE_JPEG );

        /*if (imageByteArray == null)
            imageByteArray = IOUtils.toByteArray(inputStream);

        int pictureIdx = workbook.addPicture(imageByteArray, Workbook.PICTURE_TYPE_PNG);
                    */
        inputStream.close();

        // Returns an object that handles instantiating concrete classes
        CreationHelper helper = workbook.getCreationHelper();

        // Creates the top-level drawing patriarch.
        Drawing drawing = chartSheet.createDrawingPatriarch();

        // Create an anchor that is attached to the worksheet
        ClientAnchor anchor = helper.createClientAnchor();
        // set top-left corner for the image
        anchor.setCol1(3);
        anchor.setRow1(2);

        // Creates a picture
        Picture pict = drawing.createPicture(anchor, pictureIdx);
        // Reset the image to the original size
        pict.resize(); 
```

请提出这里缺少的内容。

我也得到“pictureIdx”总是零（0），天气这是正确的还是不正确的？

# javascript - 单击时如何更改链接的颜色？

> ID：15062416
> 
> 赞同：0
> 
> 时间：2013-02-25T07:57:21.917
> 
> 标签：javascript, jquery, css, cakephp, cakephp-2.0

我想在单击时更改链接颜色，链接是基于 ajax 的，我尝试了很多但没有成功我该如何更改更改，请求操作正在此页面上进行。

```
 <div class="topheading-right">
        <span>
            <?php echo $this->Manager->link('Archived Events', array('a'));?>
        </span>
        <?php echo $this->Manager->link('View All', array(''));?>
    </div>
</div>

<div id='events-event_list' class='dashboard-<?php echo __l($product_name);?>s'>
    <?php echo $this->requestAction(array('controller'=>'events', 'action'=>'view_event_list', $is_archive), array('return'));?>
</div> 
```

我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:00:37.560

如果是 AJAX 链接，则不能使用`:visited`伪选择器。

相反，使用：

```
 $('a').live('click',function(){this.style.css.color='red'}) 
```

或类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:00:50.763

尝试

```
$('a[id^="link-"]').on('click',function(event){
   event.preventDefault();
   var Obj = $(this);
   Obj.css('color','red');
   var href = Obj.attr('href');
   //ajax call with url href
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:03:55.520

应该是这样的

```
 $('a').on('click',function(){
     $(this).css('color','red');
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:44:08.687

在现代浏览器中（甚至在 IE10 中），如果您设置`a:active`伪类，您将在没有 JavaScript 的情况下得到以下结果：

```
a:active{ color: red; } 
```

您还可以分配其他属性。

# android - 如何在android中保存单选按钮的状态

> ID：15062428
> 
> 赞同：0
> 
> 时间：2013-02-25T07:58:04.283
> 
> 标签：android, radio-button

我想保存在 android 中单击的单选按钮的状态。当用户进入下一个问题时，它必须保存状态，所以当他回到上一个状态时，它必须显示选定的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-12T08:03:17.867

使用共享首选项，保存单选按钮的状态，您可以在其他活动中检索数据。

这是java类：

```
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.Toast;
import android.widget.RadioGroup.OnCheckedChangeListener;

public class ABCD extends Activity{

    private int ival;
    public static int glob=1;
    static SharedPreferences sPref;
    private SharedPreferences.Editor sE;
    RadioGroup rbMain;
    RadioButton rb1,rb2,rb3,rb4,rb5;   

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);

        rbMain = (RadioGroup) findViewById(R.id.rgMain);
        rb1 = (RadioButton)findViewById(R.id.radio1);
        rb2 = (RadioButton)findViewById(R.id.radio2);
        rb3 = (RadioButton)findViewById(R.id.radio3);
        rb4 = (RadioButton)findViewById(R.id.radio4);
        rb5 = (RadioButton)findViewById(R.id.radio5);

        sPref = getSharedPreferences("Pref",0);
        sE = sPref.edit();
        ival = sPref.getInt("Pref", 0);

        if(ival == R.id.radio1){
            rb1.setChecked(true);
            glob=1;
        }else if(ival == R.id.radio2){
            rb2.setChecked(true);   
            glob=2;
        }else if(ival == R.id.radio3){
            rb3.setChecked(true);
            glob=3;
        }else if(ival == R.id.radio4){
            rb4.setChecked(true);   
            glob=4;
        }else if(ival == R.id.radio5){
            rb5.setChecked(true);
            glob=5;
        }

        rbMain.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            int state = 0;
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                if(checkedId == R.id.radio1){
                    sE.clear();
                    sE.putInt("Pref", checkedId);
                    sE.apply();
                }else if(checkedId == R.id.radio2){
                    sE.clear();
                    sE.putInt("Pref", checkedId);
                    sE.apply();
                }else if(checkedId == R.id.radio3){
                    sE.clear();
                    sE.putInt("Pref", checkedId);
                    sE.apply();
                }else if(checkedId == R.id.radio4){
                    sE.clear();
                    sE.putInt("Pref", checkedId);
                    sE.apply();
                }else if(checkedId == R.id.radio5){
                    sE.clear();
                    sE.putInt("Pref", checkedId);
                    sE.apply();
                }

            }
        });

    }   

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
        sPref = getSharedPreferences("Pref",0);
        sE = sPref.edit();
        ival = sPref.getInt("Pref", 0);

        if(ival == R.id.radio1){
            rb1.setChecked(true);
            glob=1;
        }else if(ival == R.id.radio2){
            rb2.setChecked(true);   
            glob=2;
        }else if(ival == R.id.radio3){
            rb3.setChecked(true);
            glob=3;
        }else if(ival == R.id.radio4){
            rb4.setChecked(true);   
            glob=4;
        }else if(ival == R.id.radio5){
            rb5.setChecked(true);
            glob=5;
        }
    }

} 
```

这是我的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
  android:background="@color/white"
>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    >
 <RadioGroup android:layout_width="wrap_content"
        android:layout_gravity="center_horizontal" android:layout_height="wrap_content"
        android:layout_weight="1" android:id="@+id/rgMain">
        <RadioButton android:layout_width="wrap_content"
            android:id="@+id/radio1" android:layout_height="wrap_content"
            android:checked="true" android:text="1" android:textColor="@color/back">         
        </RadioButton>
        <RadioButton android:id="@+id/radio2"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:text="2" android:textColor="@color/back">            
        </RadioButton>
        <RadioButton android:layout_width="wrap_content"
            android:id="@+id/radio3" android:layout_height="wrap_content"
            android:text="3" android:textColor="@color/back">            
        </RadioButton>
        <RadioButton android:layout_width="wrap_content"
            android:id="@+id/radio4" android:layout_height="wrap_content"
            android:text="4" android:textColor="@color/back">            
        </RadioButton>
        <RadioButton android:layout_width="wrap_content"
            android:id="@+id/radio5" android:layout_height="wrap_content"
            android:text="5" android:textColor="@color/back">            
        </RadioButton>
    </RadioGroup>
</LinearLayout>

</ScrollView> 
```

而且，这可以帮助您做任何您需要的事情。

# database - 数据库设计 - 布尔属性或新表

> ID：15062436
> 
> 赞同：4
> 
> 时间：2013-02-25T07:58:38.250
> 
> 标签：database, database-design

假设我有一个要根据布尔属性（例如，“标记”属性）过滤的数据库表。只是向表中添加“标记”属性，还是创建一个具有基表外键的新表更好？优缺点都有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:59:14.263

如果这就是*您*所需要的¹，那么只需添加简单字段。

但是，你必须小心你如何索引它。除非值严重倾斜²，否则您最终会得到一个具有可怕的选择性和[聚集因子](http://oracle-online-help.blogspot.com/2006/11/clustering-factor_28.html)³的索引，并且实际上最好进行全表扫描⁴。

如果您将标志与其他字段一起过滤*，*请创建一个复合索引，这样就有更好的机会获得体面的选择性。

* * *

*¹即您不需要以某种方式“描述”或“增强”两个可能的布尔值中的每一个的附加数据。*

*²一个值是极少数（包含的行数`false`远小于包含 的行数`true`，反之亦然），而您恰好只过滤该值。*

*³该链接适用于 Oracle，但一般原则适用于所有 DBMS。*

*⁴即使存在索引，一个像样的 DBMS 也会自动为您做这件事。一个假设的“愚蠢”的 DBMS 只会盲目地使用索引并且执行得比全表扫描还要差。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:03:54.447

如果这个标志本身有属性或者它是可重用的，最好将它创建为另一个表。但是，如果它只是将一行标记为真/假，只需创建一个布尔列（并节省时间和工作量）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:49:57.107

只需向表中添加列，它会更好更简单.. 然后创建一个位图索引，如果您在 WHERE 中使用此列，这将加快您的查询速度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-07T15:04:47.350

这取决于。当值与表/关系并不真正相关时，我自己更喜欢添加一个新表。

一个很好的例子是当您有一个代表订单的表格并且您想要跟踪已打印的订单时。我会在订单中添加一个名为printed_orders 的新表，其中包含一个外键。

```
create table printed_orders (
  order_id int primary key references order(order_id)
); 
```

它是否被打印并不是订单的一部分，而是系统/业务规则的一部分。

# jquery - jquery动画中的背景图像位置变化

> ID：15062440
> 
> 赞同：4
> 
> 时间：2013-02-25T07:58:52.630
> 
> 标签：jquery, html

我想更改 jquery 动画中的背景图像位置。但是我的代码不起作用。谁能帮我把它短路。

以下是我的代码

CSS

```
#pnav a{
    background:url(http://www.us-bingo.com/images/Tickets/Solid-Color-Tyvek-Wrist-Tickets-lg.gif) 0 0 no-repeat;
    display:block;
    width:20px;
    height:42px;
} 
```

jQuery

```
$('#pnav a')
.hover(function () {
    $(this).stop().animate({
        'background-position' : '(0px -42px)'
    }, 150);
}, function () {
    $(this).stop().animate({
        'background-position' : '(0 0)'
    }, 150);
}); 
```

html

```
<div id="pnav">
<a href="#">123</a>
</div> 
```

这是[小提琴文件](http://jsfiddle.net/eg5zC/)

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:13:48.517

我认为 jQuery 动画不能动画`background-position`，但你可以使用 CSS 过渡

```
 #pnav a{
    background:url(http://www.us-bingo.com/images/Tickets/Solid-Color-Tyvek-Wrist-Tickets-lg.gif) 0 0 no-repeat;
    display:block;
    width:20px;
    height:42px;

    -webkit-transition: background-position 150ms ease-in-out;
    -moz-transition: background-position 150ms ease-in-out;
    -ms-transition: background-position 150ms ease-in-out;
    -o-transition: background-position 150ms ease-in-out;
    transition: background-position 150ms ease-in-out;
}

#pnav a:hover {
    background-position:0px -42px;

} 
```

这是一个小提琴： http: [//jsfiddle.net/pavloschris/eg5zC/7/](http://jsfiddle.net/pavloschris/eg5zC/7/) 和`transition`浏览器可战斗性：http: [//caniuse.com/#search=transition](http://caniuse.com/#search=transition)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T13:05:37.963

对于背景图像位置动画，我们需要使用“jquery.backgroundpos.js”你可以从这里下载它[http://keith-wood.name/js/jquery.backgroundpos.js](http://keith-wood.name/js/jquery.backgroundpos.js)

```
$(document).ready(function(){

$('#pnav a')
.hover(function () {
   $(this).stop().animate({backgroundPosition: '0px ' + '35px'}, 500);
}, function () {
    $(this).stop().animate({backgroundPosition: '0px ' + '0px'}, 500);
});

}); 
```

这是更新的[jsFiddle 文件](http://jsfiddle.net/eg5zC/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:06:20.607

用这个替换你的行，

```
background:url('http://www.us-bingo.com/images/Tickets/Solid-Color-Tyvek-Wrist-Tickets-lg.gif') no-repeat ; 
```

在 CSS 中为 URL 添加引号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T08:18:28.663

在 animate 函数中，背景位置不能那样工作。改用这个

```
$('#pnav a')
.hover(function () {
    $(this).animate({
        'background-position-x': '10%',
        'background-position-y': '20%'
    }, 550);
}, function () {
    $(this).animate({
       'background-position-x': '0%',
       'background-position-y': '0%'
    }, 550);
}); 
```

：[参考](https://stackoverflow.com/questions/5171080/jquery-animate-background-position)

但是，正如“xpy”所指出的那样，您想要的可以通过 CSS3.0 实现，但它不会在 IE 上运行

# 更新：

以下是工作样本：

```
<html>
    <head>
        <script language="javascript" src="http://code.jquery.com/jquery-1.5.min.js"></script>
        <script>
         $(document).ready(function(){
          $('#pnav a')
                    .hover(function () {
                        $(this).animate({
                            'background-position-x': '10%',
                            'background-position-y': '20%'
                        }, 550);
                    }, function () {
                        $(this).animate({
                           'background-position-x': '0%',
                           'background-position-y': '0%'
                        }, 550);
                    });
            });
        </script>
       <style>
            #pnav a{
                background:url(http://www.standard-icons.com/stock-icons/standard-road/scooter-icon.gif) 0 0 no-repeat;
                display:block;
                width:20px;
                height:42px;
            }
       </style>

    </head>
    <body>
            <div id="pnav">
              <a href="#">123</a>
           </div>
    </body>
</html> 
```

# [小提琴](http://jsfiddle.net/manishmishra256/jt3we/)

# linux - 厌倦了写非立即的.so 链接EXE 时，如何获得解脱？

> ID：15062446
> 
> 赞同：1
> 
> 时间：2013-02-25T07:59:13.893
> 
> 标签：linux, gcc

我认为业内应该有关于这个问题的最佳实践，所以我在这里问它。

这个问题是关于在 Linux 上使用 gcc 将共享库（.so）链接到可执行文件。但让我从 Windows 开始。

假设我正在开发 A.EXE 、 B.DLL 、 C1.DLL 。依赖是

```
A -> B -> C1 
```

这意味着：A从B调用API，B通过调用C1的API实现自己。A 不直接调用 C1 中的 API。

您知道，在链接 A.EXE（使用 Visual C++）时，我只需将 B.lib（导入 lib）列为 A 的链接组件（在 makefile 中）；C1 不必出现在 A 的生成文件中。所以有一天我想用 C2 替换 C1 以更好地实现 B，**我不必因为 C1 的替换而更改 A 的 makefile。**

这很好，因为它遵循理性的想法：makefile 只引用它直接相关的东西。有了这种便利，人们倾向于在 Windows 上编写 DLL 而不是 LIB——我认为是这样。

现在我转向 linux 上的 gcc。对于相同的依赖场景，**在 A 的 makefile 中，我必须将 C1 或 C2 显式列为链接组件，**如下所示：

```
gcc -o A a1.o a2.o -lB -lC1 
```

如此令人沮丧，假设您有十个项目 A1、A2、... A10 调用到 B，您必须修改十个 makefile 才能从 C1 转移到 C2。

如何获得解脱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:02:32.100

链接某些共享库`libfoo.so`时，您可以将其与另一个共享库链接`libbar.so`：

```
 gcc -fPIC -g -Wall -c foo1.c
  gcc -fPIC -g -Wall -c foo2.c
  gcc -shared -o libfoo.so foo1.o foo2.o -lbar 
```

然后当您使用时`-lfoo`，`libbar.so`将自动链接而不要求它。

因此，您不必在 A 的 makefile 中明确列出 C1 或 C2 作为链接组件。

^(如果您只有静态库，您将不得不这样做`lib*.a`)

所以你可以用

```
 gcc -Wall -g prog.c -lfoo 
```

单独（未`libbar.so`明确提及）。

例如尝试`ldd`在 GTK 共享库上运行（在我的 Debian 系统上）：

```
 ldd /usr/lib/x86_64-linux-gnu/libgtk-3.so.0 
```

我建议阅读[Levine 的链接器和加载器一书](http://www.iecc.com/linker/)`.dll`以了解 Windows和 Linux之间的区别`.so`；他们是不同的野兽。另请阅读[程序库 HowTo](http://tldp.org/HOWTO/Program-Library-HOWTO/)。

您可能想要（或不想要）使用[GNU libtool](http://www.gnu.org/software/libtool/)。

顺便说一句，您也可以使用[pkg-config](http://www.freedesktop.org/wiki/Software/pkg-config/)，这将提供依赖项......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:13:27.543

确保您`libB`依赖`libC`( `ldd libB.so`) ；`libB`应该用类似的东西编译`gcc -o libB.so -shared -fPIC *.c -L/path/to/libC -lC -Wl,-rpath,/path/to/libC`。

注意`libB.so`需要编译`-rpath`才能定位`libC.so`，或者使用`LD_LIBRARY_PATH`环境变量（`ldd`上面提到的命令一定不能显示`libC.so => not found`）

# python - 在不使用外部库、函数的情况下，是否有用于标量乘法、点积、范数（长度）的 Python 代码？

> ID：15062450
> 
> 赞同：0
> 
> 时间：2013-02-25T07:59:40.103
> 
> 标签：python, vector, matrix-multiplication

这里向量用作 Python 元组。就像向量`[3;1;1]`在 Python 中表示为`(3,2,1)`.

1.  编写一个接受 2 个参数的 Python 函数 sca(s,v)：标量 s 和向量 v。该函数应该找到向量乘以标量的结果。

    ```
     sca(3, (1,2,3))     # Returns (3,6,9) 
    ```

    Answer 不得导入任何模块或使用任何外部库函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:22:53.993

没有专门用于此目的的内置函数 - 您必须`sca(s, v)`按照问题所述编写自己。好消息是，只要你熟悉标量乘法的数学定义，就可以在很短的代码量中实现（4 行，1 行，对 Python 更高级的特性有一定的了解）。考虑如何根据向量的组件而不是整个向量来编写该定义，然后考虑如何在 Python 中编写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:22:11.623

简而言之：没有

如果您不考虑标准库“外部”。那么数学很可能是你必须使用的。但它不会支持您指定的所有需求，开箱即用。

为什么不导入任何库？

# gwt - 挂钩 GWT 方法以在 GWT HighCharts 中导出按钮菜单项

> ID：15062452
> 
> 赞同：0
> 
> 时间：2013-02-25T07:59:51.867
> 
> 标签：gwt, highcharts, highstock, jsni

我在 GWT HighCharts 图表上的导出按钮中将 GWT 方法连接到菜单项的 onclick 方法时遇到问题。

我已成功将自定义菜单项添加到导出按钮，但不知道设置 onclick 方法的语法。我试过了：

```
 setOption("onclick", "window.alert('Test')"); 
```

和

```
setOption("onclick", "function() { window.alert('Test') }"); 
```

但我收到以下错误：

```
Uncaught JavaScript exception [TypeError: a.onclick.apply is not a function]... 
```

因此，它试图调用我在 onclick 字符串中放入的任何内容，但显然这不是我使用的正确语法。我一直在考虑 JSNI，但我不确定我将如何去做。任何人都可以帮忙吗？

**编辑：**

显然，在上面的示例中，我试图显示一个 javascript 警报，但如果可能的话，我想调用一个 GWT 实例方法。（静态方法也可以）。

**编辑2：**

这是导出按钮中我的菜单项的代码：

```
private class ExportButtonMenuItem extends Configurable<ExportButtonMenuItem> {

    public ExportButtonMenuItem(String name, String type) {
        setOption("text", name);

        if (type.equalsIgnoreCase(EXPORT_EXCEL)) {
            // setOption("onclick", "window.alert('Test')");

            // does not work!
            setOption("onclick", new Command() {
                @Override
                public void execute() {
                    GWT.log("export!!!");
                }
            });
        }
    }
} 
```

这就是将菜单项添加到图表的方式：

```
chart.setOption("/exporting/buttons/exportButton/menuItems", 
    new ExportButtonMenuItem[] { 
        new ExportButtonMenuItem("Download PNG", ExportButtonMenuItem.EXPORT_PNG), 
        new ExportButtonMenuItem("Download JPEG", ExportButtonMenuItem.EXPORT_JPEG), 
        new ExportButtonMenuItem("Download PDF", ExportButtonMenuItem.EXPORT_PDF),
        new ExportButtonMenuItem("Download SVG", ExportButtonMenuItem.EXPORT_SVG),
        new ExportButtonMenuItem("Download Excel", ExportButtonMenuItem.EXPORT_EXCEL)}); 
```

**编辑 3：**

在 HighCharts JS 源代码 (exporting.js) 中，菜单项的 onclick 方法调用如下：

```
div[hasTouch ? 'ontouchstart' : 'onclick'] = function () {
    hide();
    item.onclick.apply(chart, arguments);
}; 
```

调用 apply 时，我收到此错误：

```
 [java] Uncaught JavaScript exception [TypeError: item.onclick.apply is not a function] in http://127.0.0.1:8888/js/modules/exporting.src.js, line 467 
```

我一直在尝试覆盖 onclick 功能，但仍然没有成功...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:38:48.630

传递[命令](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/Command.html)接口而不是字符串

```
Command sayHello = new Command() {
   public void execute() {
     Window.alert("Hello");
   }
 };
 sayHello.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T18:57:30.643

事件处理程序不包含在 HighCharts API 中作为选项，但您可以简单地使用普通 GWT 将此类处理程序附加到包装小部件：

```
widget.addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {
        Window.alert("clicked!");
    }
}); 
```

# android - canvas.drawtext 阿拉伯语反转

> ID：15062454
> 
> 赞同：1
> 
> 时间：2013-02-25T07:59:57.950
> 
> 标签：android, canvas, drawtext, persian, farsi

当我通过drawtext在画布上写阿拉伯文本时，在某些设备中它是正确的，但在其他设备中它是反向的。例如在某些 سلام 和其他 ﻢﺎﻟﺳ 中。我通过arabicReshaper 转换字符以解决阿拉伯形式的单独字符问题。

1.  如何检测单词何时需要反转，何时不需要。
2.  在某些设备中 پ 字符显示正确，但在其他一些设备中不显示该字符。我使用自定义字体，我确定字体有 پ 字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:43:49.513

首先，我建议你看看[这个](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android/7962813#7962813)链接。

> 如何检测单词何时需要反转，何时不需要。

您可以使用以下功能检测波斯字符，因此当文本是波斯语时，您需要反转它们的序列。

```
 public boolean isPersian(String persianText)
     {
         return persianText.matches("/[\u0600-\u065F\u066A-\u06EF\u06FA-\u06FF]/");
     } 
```

如果您的字符串包含波斯字符（不是数字），则上述函数返回 true，否则返回 false。

> 在某些设备中 پ 字符显示正确，但在其他一些设备中不显示该字符。我使用自定义字体，我确定字体有 پ 字符。

这是一个错误，取决于您的 android 版本，在 android *2.3、2.2 等中，*此字符无法正确显示，您无法进行任何修复，但此问题目前已在 ICS 和 JB 中解决。

# visual-studio-2010 - 在构建多解决方案 MEF 应用程序时复制 DLL-s

> ID：15062456
> 
> 赞同：2
> 
> 时间：2013-02-25T08:00:00.337
> 
> 标签：visual-studio-2010, mef, msbuild-task, solution

我使用 Visual Studio 2010 在 .net 框架 4.0 上开发和构建。我还将托管可扩展性框架用于基本插件系统。

我有 2 个解决方案：

主要解决方案有 6 个项目，一个是可执行的，另外 5 个是类库。它们相互引用，并内置在解决方案级别的 bin 文件夹中（bin 文件夹位于项目文件夹旁边）。这样所有构建的 bin 文件都在同一个文件夹中，MEF 可以将所有 DLL-s 收集到一个简单的 DirectoryCatalog 中。

这很好用（除了一件事，启动应用程序不会重建所有其他项目，因为它们不是依赖项，但这不是这个问题的意义所在）。

另一个（扩展）解决方案有 2 个项目，它们都是类库，应该以某种方式添加到 MEF 用来构建它的目录的目录中。

有几种方法可以做到这一点，我只是找不到最干净的一种。

所以要解决的问题是：

1.  扩展解决方案的项目引用了第一个解决方案中的项目，因此我在添加引用屏幕上导航到主解决方案的 bin 文件夹并添加了所有必需的引用。参考资料会在构建主要解决方案时更新，还是我需要以某种方式手动复制 DLL-s？

    *   智能感知应该识别更改，因此在更改和构建主要解决方案后应该识别并且智能感知应该在编辑扩展解决方案时更新。
    *   主要解决方案是可自行构建的，对扩展解决方案一无所知。让我们保持这种状态。我不会将构建任务写入将 dll 复制到其他解决方案文件夹的主解决方案。
    *   解决方案托管在 SVN 服务器上。如果在新计算机上使用 ankhsvn 获得解决方案并构建这两种解决方案不需要进一步配置，那将是一个很大的优势。
2.  在构建扩展解决方案的项目时，应将 DLL-s 复制到 MEF 用于其目录的目录（主解决方案的 bin 目录）。如果它也能从 svn 中获得新鲜感，那就太好了。这可以通过构建任务来完成，但引用其他解决方案文件夹的最佳方式是什么？

    *   我认为，如果解决方案目录必须彼此相邻（并且具有默认名称）才能工作（这样我可以使用其他级别的 ../ 来引用它），这不会是一个很好的折衷方案。这是一个体面的解决方案吗？有什么我不知道的缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:28:14.157

还有另一种处理问题1的方法：

*   将 Main.sln 中的必要项目添加到`Extension.sln`. 您可以通过从解决方案的上下文菜单中选择“添加现有项目”来执行此操作。
*   将扩展项目的引用更新到添加的项目，而不是它们的输出 dll。Visual Studio 将负责定位输出 dll 并决定何时需要构建您的项目。
*   您甚至可以添加一个`solution folder`命名的“依赖项”或类似的东西，并将所有项目从`Main.sln`. 通过这种方式，您可以分辨出哪些项目是“客人”。

这将解决问题 1 的所有要点，**但**您需要小心，因为`Extension.sln`您可以从中修改依赖项目。一个优点是您还可以以更直接的方式调试代码，无需任何额外工作即可在新的开发机器上工作。

也就是说，我会选择一个包含所有 8 个项目的单一解决方案，这是直截了当的。只有当解决方案变得庞大（约 100 个项目）时，我才会这样做。

关于您对不同存储库的评论：

> 另外，如果我将其提交给 SVN，“现有项目”是否也会提交给新的存储库？

我不这么认为。如果您将它们保存在同一个 SVN 存储库中（我看不出有任何理由不这样做），那就没问题了。您可以将许多解决方案添加到同一个存储库。只要它们是相关的，它就是正确的做法。

另一个有价值的测试是从存储库中获取一个新副本并尝试构建它。这可以每天在构建服务器上完成，并将帮助您及早发现问题。这样做所需的步骤越少越好。

# hdfs - HDFS 块大小与实际文件大小

> ID：15062457
> 
> 赞同：16
> 
> 时间：2013-02-25T08:00:05.807
> 
> 标签：hdfs, filesize

我知道 HDFS 在数据节点中使用常规的 linux 文件系统存储数据。我的 HDFS 块大小是`128 MB`. 假设`10 GB`我的 hadoop 集群中有磁盘空间，这意味着 HDFS 最初具有`80 blocks`可用存储。

如果我创建一个小文件`12.8 MB`，#available HDFS 块将变为 79。如果我创建另一个小文件会发生什么`12.8 MB`？#availbale 块会保持在 79 还是会下降到 78？在前一种情况下，HDFS 基本上在每次分配块后根据可用的可用磁盘空间重新计算#available 块，因此，只有在消耗超过 128 MB 的磁盘空间后，#available 块才会变为 78。请澄清。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T10:51:53.060

最好的方法是尝试一下，看看我的结果。

但在尝试之前，我的猜测是，即使你的配置中只能分配 80 个**完整**块，你也可以分配超过 80 个非空文件。这是因为我认为 HDFS 每次分配非空文件时都不会使用完整块。换句话说，HDFS 块不是一个*存储分配*单元，而是一个*复制*单元。我认为 HDFS 的存储分配单位是底层文件系统的单位（如果你使用 ext4 的块大小为 4 KB，并在复制因子为 3 的集群中创建一个 1 KB 的文件，则消耗 3 倍 4 KB = 12 KB 的硬盘空间）。

足够的猜测和思考，让我们尝试一下。我的实验室配置如下：

*   hadoop 版本 1.0.4
*   4个数据节点，每个节点的可用空间略小于5.0G，ext4块大小为4K
*   块大小为 64 MB，默认复制为 1

启动 HDFS 后，我有以下 NameNode 总结：

*   1 个文件和目录，0 个块 = 1 个总计
*   使用的 DFS：112 KB
*   剩余 DFS：19.82 GB

然后我执行以下命令：

*   `hadoop fs -mkdir /test`
*   `for f in $(seq 1 10); do hadoop fs -copyFromLocal ./1K_file /test/$f; done`

有了这些结果：

*   12 个文件和目录，10 个块 = 总共 22 个
*   使用的 DFS：122.15 KB
*   剩余 DFS：19.82 GB

所以这10个文件没有消耗10倍64 MB（没有修改“DFS Remaining”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:41:16.383

HDFS 在本地文件系统上只使用它需要的东西。所以块，代表 12 MB 的文件在存储时将占用 12 MB（在存储它的每个数据节点上）。因此，假设您有数据空间，您将能够拥有尽可能多的块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:11:58.090

“可用块”将保持在 79（[请参阅此问题](https://stackoverflow.com/questions/15678235/how-hdfs-calculate-the-available-blocks)）。无论如何，我认为 HDFS 不会根据“可用块”来决定它是否有足够的可用空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T17:18:21.587

HDFS 块大小和 Ext 块大小不是一回事。最简单的说法是 HDFS 块大小是“复制”块大小，而不是“存储”块大小。

对于存储，它将使用与本地文件系统相同的空间量，因为这就是它使用的空间，但它会在节点之间复制不少于一个块，即使只使用了 1KB

# ios - 为整个 NSString 生成 NSRange 的快捷方式？

> ID：15062458
> 
> 赞同：68
> 
> 时间：2013-02-25T08:00:07.077
> 
> 标签：ios, objective-c, nsstring, nsrange

有没有一种简短的方法可以说“整个字符串”而不是输入：

```
NSMakeRange(0, myString.length)] 
```

这种代码中最长的部分是最不重要的似乎很愚蠢（因为我通常想在整个字符串中搜索/替换）......</p>

```
[myString replaceOccurrencesOfString:@"replace_me"
                          withString:replacementString
                             options:NSCaseInsensitiveSearch
                               range:NSMakeRange(0, myString.length)]; 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-25T08:03:46.433

功能？分类法？

```
- (NSRange)fullRange
{
    return (NSRange){0, [self length]};
} 
```

* * *

```
[myString replaceOccurrencesOfString:@"replace_me"
                          withString:replacementString
                             options:NSCaseInsensitiveSearch
                               range:[myString fullRange]]; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-05-31T08:44:23.520

**Swift 4+**，对`NSRegularExpression`和有用`NSAttributedString`

```
extension String {
    var nsRange : NSRange {
        return NSRange(self.startIndex..., in: self)
    }

    func range(from nsRange: NSRange) -> Range<String.Index>? {
        return Range(nsRange, in: self)
    }
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-02-25T08:03:37.650

从来没听说过。但是您可以轻松添加一个`NSString`类别：

```
@interface NSString (MyRangeExtensions)
- (NSRange)fullRange
@end

@implementation NSString (MyRangeExtensions)
- (NSRange)fullRange {
  return (NSRange){0, self.length};
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-08-25T18:17:35.830

# 迅速

```
NSMakeRange(0, str.length) 
```

或作为`extension`：

```
extension NSString {
    func fullrange() -> NSRange {
        return NSMakeRange(0, self.length)
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-01-01T23:41:11.343

# 斯威夫特 2：

```
extension String {
    var fullRange:Range<String.Index> { return startIndex..<endIndex }
} 
```

如在

```
let swiftRange = "abc".fullRange 
```

或者

```
let nsRange = "abc".fullRange.toRange 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-02-25T08:10:01.363

这不是更短，但是...哦，好吧

```
NSRange range = [str rangeOfString:str]; 
```

# r - 存储函数的结果

> ID：15062466
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:00:54.503
> 
> 标签：r

需要在循环的每次迭代中存储从函数调用返回的结果。

```
for (i in 1:x)
{
    datax <- trainingdata[[i]]
    levels(datax$label) <- c(-1, 1)
    train_x<-datax[, -1]
    train_x<-data.matrix(train_x)
    trainy<-datax[, 1]

    s_x<-svm.fs(train_x, y=trainy, fs.method="scad",
                          cross.outer=0, grid.search="discrete",
                          lambda1.set=lambda1.scad, parms.coding="none",
                          show="none", maxIter=1000, inner.val.method="cv",
                          cross.inner=5, seed=seed, verbose=FALSE)
    # Store the result s_x
} 
```

s_x 需要与名称（已经存在于向量“名称”中）一起存储。

我尝试了以下方法：

```
s_x_results <- data.frame(x=names, y=data.frame(length(trainingdata)))

for (i in 1:x)
{
    datax <- trainingdata[[i]]
    levels(datax$label) <- c(-1, 1)
    train_x<-datax[, -1]
    train_x<-data.matrix(train_x)
    trainy<-datax[, 1]

    s_x<-svm.fs(train_x, y=trainy, fs.method="scad",
                          cross.outer=0, grid.search="discrete",
                          lambda1.set=lambda1.scad, parms.coding="none",
                          show="none", maxIter=1000, inner.val.method="cv",
                          cross.inner=5, seed=seed, verbose=FALSE)

    s_x_results[i]$y <- s_x
} 
```

但我收到错误消息：

```
Error in `$<-.data.frame`(`*tmp*`, "scad.fix", value = list(classes = c(1L,  : 
replacement has 11 rows, data has 91 
```

最终对象 s_x_results 保存在某个文件中以备将来通信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:08:19.943

尝试`replicate`

```
 res <- replicate(x,funcall) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T08:12:05.657

尝试`lapply`

```
myFunc <- function(i) {
    datax <- trainingdata[[i]]
    levels(datax$label) <- c(-1, 1)
    train_x<-datax[, -1]
    train_x<-data.matrix(train_x)
    trainy<-datax[, 1]

    svm.fs(train_x, y=trainy, fs.method="scad",
                cross.outer=0, grid.search="discrete",
                lambda1.set=lambda1.scad, parms.coding="none",
                show="none", maxIter=1000, inner.val.method="cv",
                cross.inner=5, seed=seed, verbose=FALSE)
}

s_x_results <- lapply(1:x, myFunc)

#Access individual results using s_x_results[[1]], s_x_results[[2]] and so on. 
```

这应该为您提供 x 数据帧的列表。

PS：未经测试的功能，因为没有提供样本数据。

# php - 如何组合站点链接的无关注和目标空白属性

> ID：15062468
> 
> 赞同：0
> 
> 时间：2013-02-25T08:01:04.670
> 
> 标签：php, html, css, hyperlink, nofollow

在我的网站上，我有横幅和论坛。我希望链接是 nofollow 和 Target Blank，所以我需要结合这些属性，但我不确定哪个是正确的：

是否应该写成：

```
<a rel="nofollow" href="<?php echo $link; ?>" target="_blank" 
```

或者这是正确的方法：

```
<a href="<?php echo $link; ?>" target="_blank" rel="nofollow" 
```

哪种方式可以正确地做到这一点并确保它们在搜索引擎中没有被关注？

# cordova - 如何在 iOS 的 Cordova(Phonegap) 2.4.0 上更改用户代理？

> ID：15062473
> 
> 赞同：2
> 
> 时间：2013-02-25T08:01:25.367
> 
> 标签：cordova, user-agent

我想知道如何在 Cordova(Phonegap) 2.4.0 for iOS 上更改用户代理。

我已经阅读了更改 iOS 用户代理的解决方案。 [更改 Phonegap 用户代理](https://stackoverflow.com/questions/10624259/change-phonegap-user-agent)

但它不适用于 2.4.0。:p

我认为关于 InAppBrowser 功能的用户代理有一些变化......但我不知道为什么上层代码不起作用。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:59:05.323

是的，没错，自 2.4 以来，用户代理的处理方式发生了一些变化。现在所有的魔法都发生在*CDVUserAgentUtil*类中。目前 Cordova 没有提供任何标准方法来覆盖/扩展用户代理（但他们在路线图上有它：参见[CB-2520](https://issues.apache.org/jira/browse/CB-2520)。

无论如何，我创建了这个解决方法，它在 2.5 版上对我来说很好：（我将代码段放在*AppDelegate:didFinishLaunchingWithOptions 函数*中）

**注意：当应用程序首次启动或本地更改时，Cordova 会将代理保存在用户设置中。我们只需要在 Cordova 创建缓存副本之前覆盖默认设置。如果有可用的缓存，我们不需要再次运行此代码。**

```
NSUserDefaults* userDefaults = [NSUserDefaults standardUserDefaults];
NSString *isAgentDefined = [userDefaults stringForKey:@"Cordova-User-Agent"];

if(isAgentDefined == nil) {
    UIWebView* sampleWebView = [[UIWebView alloc] initWithFrame:CGRectZero];
    NSString *defaultAgent = [sampleWebView stringByEvaluatingJavaScriptFromString:@"navigator.userAgent"];
    [sampleWebView release];
    NSString *myAgent = @"My custom User-Agent";
    NSString *userAgent = [NSString stringWithFormat:@"%@ %@", defaultAgent, myAgent];

    [CDVUserAgentUtil acquireLock:^(NSInteger lockToken) {
        [CDVUserAgentUtil setUserAgent:userAgent lockToken:lockToken];
        [CDVUserAgentUtil releaseLock:&lockToken];
    }];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T18:45:50.440

我在 Cordova 3.3 的 iOS 上遇到了同样的问题，并且[CB-2520](https://issues.apache.org/jira/browse/CB-2520)仍然存在，所以我破解了 CDVViewController.m 中的 userAgent 属性，这显然很脏，但有效。

# javascript - 在 ASP.NET MVC 中使用 jQuery 发布表单元素不起作用

> ID：15062479
> 
> 赞同：1
> 
> 时间：2013-02-25T08:01:37.023
> 
> 标签：javascript, jquery, asp.net, html, asp.net-mvc

我正在使用`ASP.NET MVC`和`jQuery`。

我有一个文本框和一个包含数据的 HTML 表，例如：

```
<form action="/Server/Test" method="post">

     <input type="text" id="ServiceAccount" />

     <table>
          <tr>
               <th>Heading 1</th>
               <th>Heading 2</th>
          </tr>
          <tr>
               <td>Cell data 1</td>
               <td>Cell data 2</td>
          </tr>
     </table>

</form> 
```

上表未绑定到视图模型，它通过 AJAX/JSON 填充。

我需要将文本框的值和单元格数据发布到控制器的操作方法中。因此，如果我在文本框中输入 1234567，那么我需要将此值与表的内容一起发布到操作方法中。我还需要表格数据进行处理。这可能吗？我找不到样品。

我的操作方法如下所示：

```
[HttpPost]
public ActionResult Test(string[] data)
{
     // Use the value Cell data 1
     // Use the value Cell data 2

     return View();
} 
```

鉴于我在下面的代码，它没有达到我的操作方法：

```
$('form').submit(function () {
     $.post('@Url.Action("Test", "Server")', $('form').serialize(), function (data) {
          alert('success');
     });
     return false;
}); 
```

我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:02:29.310

`WebMethod`在您的控制器操作方法中设置

```
[WebMethod]
[HttpPost]
public ActionResult Test(string[] data)
{
     // Use the value Cell data 1
     // Use the value Cell data 2

     return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:29:22.477

`I need the value of the textbox and the cell data to be posted to my controller's action method. So if I typed in 1234567 in the textbox then I need this value posted to the action method together with the contents of the table. I need the table data also for processing. Is this possible? I can't find a sample.`

是的，这是可能的，但是您的表必须包含隐藏的输入，`tr`并且`td`不能通过提交（普通提交，而不是 ajax）发送数据，也`serialize()`不要序列化表行。看这个问题：

[如何通过 asp.net mvc 或 jquery 提交包含动态数据行的表？](https://stackoverflow.com/questions/2551830/how-to-submit-a-table-with-dynamic-rows-of-data-via-asp-net-mvc-or-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:41:28.557

基本上，当您提交表单时，**仅提交 INPUT、Hidden、TextAra 等表单元素**，而不是 div、table、span 等。

因此，如果您想提交表格数据，请使用隐藏字段。

或者更好的方法是循环表数据，准备 JSON 并将其作为参数发布。

```
$('form').submit(function () {

     var myPostData=//construct this from table and convert as JSON
     $.post('@Url.Action("Test", "Server")', {data:myPostData}, function (resp) {
          alert('success');
     });
     return false;
}); 
```

# php - 将 eregi 转换为 preg_match 并将 ereg_replace 转换为 preg_replace

> ID：15062481
> 
> 赞同：0
> 
> 时间：2013-02-25T08:01:39.733
> 
> 标签：php, preg-replace, eregi, ereg

我正在使用[http://www.internoetics.com/2010/01/12/simple-whois-php-script/](http://www.internoetics.com/2010/01/12/simple-whois-php-script/) PHP whois 脚本，我需要为最新的 PHP 版本配置它，我需要将 ereg 和 eregi 转换为 preg_match 和 preg_replace

```
if ( (!eregi('^[a-zA-Z0-9-]+\.([a-zA-Z]{2,4})$', $domain)) && (!eregi('^[a-zA-Z0-9-]+\.([a-zA-Z]{2,4})+\.([a-zA-Z]{2,4})$', $domain)) ) $arrErrors['domi'] = 'Domain name appears to be invalid.';

function makeClickableLinks($text)
{
        $text = html_entity_decode($text);
        $text = " ".$text;
        $text = eregi_replace('(((f|ht){1}tp://)[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
                '<a href="\\1" target=_blank>\\1</a>', $text);
        $text = eregi_replace('(((f|ht){1}tps://)[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
                '<a href="\\1" target=_blank>\\1</a>', $text);
        $text = eregi_replace('([[:space:]()[{}])(www.[-a-zA-Z0-9@:%_\+.~#?&//=]+)',
        '\\1<a href="http://\\2" target=_blank>\\2</a>', $text);
        $text = eregi_replace('([_\.0-9a-z-]+@([0-9a-z][0-9a-z-]+\.)+[a-z]{2,3})',
        '<a href="mailto:\\1" target=_blank>\\1</a>', $text);
        return $text;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:08:45.660

对于 preg_* 函数，您只需要在模式的开头和结尾添加分隔符，例如`/`or或其他。`#`

写这个

```
if ( (!preg_match('/^[a-z\d-]+\.([a-z]{2,4})$/i', $domain)) && (!preg_match('/^[a-z\d-]+\.([a-z]{2,4})+\.([a-z]{2,4})$/', $domain)))
    echo $arrErrors['domi'] = 'Domain name appears to be invalid.';

function makeClickableLinks($text)
{
        $text = html_entity_decode($text);
        $text = " ".$text;
        $text = preg_replace('#(((f|ht){1}tp://)[-a-z\d@:%_\+.~\#?&//=]+)#',
                '<a href="\\1" target=_blank>\\1</a>', $text);
        $text = preg_replace('#(((f|ht){1}tps://)[-a-z\d@:%_\+.~\#?&//=]+)#',
                '<a href="\\1" target=_blank>\\1</a>', $text);
        $text = preg_replace('#([[:space:]()[{}])(www.[-a-z\d@:%_\+.~\#?&//=]+)#',
        '\\1<a href="http://\\2" target=_blank>\\2</a>', $text);
        $text = preg_replace('#([_\.\da-z-]+@([\da-z][\da-z-]+\.)+[a-z]{2,3})#',
        '<a href="mailto:\\1" target=_blank>\\1</a>', $text);
        return $text;
} 
```

# python - 如何在python中使用qt4创建一个覆盖框架

> ID：15062490
> 
> 赞同：0
> 
> 时间：2013-02-25T08:02:35.573
> 
> 标签：python, qt, widget, pyqt, frame

我想知道是否有可能以及如何在固定位置创建一个覆盖框架（或任何其他小部件），以使用 PyQt4 覆盖 MainWindow 的内容。

我们的想法是获得一个类似 html 的渲染，我们可以使用`position: fixed`or获得`position: absoute`。据我所知，所有小部件都必须从 MainWindow 的小部件继承，但是有没有办法改变这种行为或任何方式来模拟具有这种级别的小部件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:21:22.143

我想您的问题是在使用布局的框架内插入一个对象，并避免尊重该布局。恐怕在您的情况下，我唯一能想到的就是完全避免使用布局（但这很不舒服），或者扩展布局类并将框架放置在布局之外。

要使您的框架保持在顶部，请查找 z 顺序。 [http://qt-project.org/search/tag/z-order](http://qt-project.org/search/tag/z-order)

# php - 如何从包含的页面访问值而不在php中显示内容

> ID：15062492
> 
> 赞同：0
> 
> 时间：2013-02-25T08:02:47.507
> 
> 标签：php

我使用两页第一页从 url 获取值并显示一些内容。我在第二页中包含了第一页，但不应显示第一页，但我必须访问第一页中使用的第二页中的值。第一页的编码

```
first.php 
```

在 utl 中，值作为 first.php?Logid=7773&shiftdate=2013-01-04&shiftid=146&pshift=1&tsid=1&dctype=timebased 传递

```
<?php 
$Logid=$_GET['Logid'];
$ShiftDate=$_GET['shiftdate'];
$ShiftID=$_GET['shiftid'];
$PShift=$_GET['pshift'];
$TsID=$_GET['tsid'];
$DcType=$_GET['dctype'];

// below this some process is carried out

sec.php

<?php
ob_start();
include('first.php');
ob_end_clean();

echo $Logid;
echo $ShiftDate;
echo $ShiftID;
echo $PShift;
echo $TsID;
echo $DcType;
?> 
```

该值未显示在第二页中。说我如何访问第二页中的值。请帮助我谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:13:13.473

删除`ob_end_clean();`，看看会解决它。

**ob_end_clean** — 清理（擦除）输出缓冲区并关闭输出缓冲

[**更多的**](http://php.net/manual/en/function.ob-end-clean.php)

**秒.php**

```
<?php
   error_reporting(E_ALL);
   ini_set("display_errors", 1);
   include("first.php");
?> 
```

试试上面的代码，看看它是否返回任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:14:32.767

在 PHP 中“一般”访问数据的最佳方式（除了小的、非实质性的片段）是通过封装。您可以将这些值放入对象中。然后，您将能够在 sec.php 上访问它们：

第一个.php：

```
<?php
class pageData {

  public $Logid;
  public $ShiftDate;
  public $ShiftID;
  public $PShift;
  public $TsID;
  public $DcType;

  public function __construct() {
    $this->Logid = $_GET['Logid'];
    $this->ShiftDate = $_GET['shiftdate'];
    $this->ShiftID = $_GET['shiftid'];
    $this->PShift = $_GET['pshift'];
    $this->TsID = $_GET['tsid'];
    $this->DcType = $_GET['dctype'];
  }
}
$pageData = new pageData();
?> 
```

秒.php：

```
<?php
include('first.php');
echo $pageData->Logid;
// ...
echo $pageData->DcType;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:27:54.390

您正在尝试将页面中 GET 设置的值传递到第二页，对吗？尝试使用会话如何。

您可以启动一个[会话](http://www.php.net/manual/en/book.session.php)并定义只要浏览器打开并且会话仍然存在，这些值就会被存储。所以：

```
first.php

<?php

// Starting the session 
session_start(); 

$_SESSION['Logid'] = $_GET['Logid'];
$_SESSION['ShiftDate'] = $_GET['shiftdate'];
$_SESSION['ShiftID'] = $_GET['shiftid'];
$_SESSION['PShift'] = $_GET['pshift'];
$_SESSION['TsID'] = $_GET['tsid'];
$_SESSION['DcType'] = $_GET['dctype'];

?>

sec.php

<?php

echo $_SESSION['Logid'];
echo $_SESSION['ShiftDate'];
echo $_SESSION['ShiftID'];
echo $_SESSION['PShift'];
echo $_SESSION['TsID'];
echo $_SESSION['DcType'];

?> 
```

并使用

```
session_unset();
session_destroy(); 
```

终止会话并销毁全局变量 ($_SESSION) 中的数据。如果您想格外小心，可以使用：

```
session_unset();
session_destroy();
session_write_close();
setcookie(session_name(),'',0,'/');
session_regenerate_id(true); 
```

确保一切都被真正摧毁。如果你问我有点矫枉过正，但在必要时使用。

希望能帮助到你！

# cocoa-touch - 修复仪器中的内存问题

> ID：15062495
> 
> 赞同：0
> 
> 时间：2013-02-25T08:02:50.217
> 
> 标签：cocoa-touch, memory-management, instruments

在我的 iPhone 应用程序中，我在仪器中发现了许多内存问题，在分析时没有问题。以下是我的泄漏![在此处输入图像描述](../Images/9ddc5ce63996fe233e6b9fc26c5d46f6.png)

我可以在哪里或如何修复这些泄漏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:23:41.690

这是找出代码中泄漏的简单步骤。只需使用屏幕截图一一按照以下步骤操作：

第1步：

![点击泄漏标签](../Images/b7027fecc0861e6f37cfd624c5091a26.png)

第2步：

![选择调用树选项](../Images/692448cf6c72275db14c8eeb67ae2e3c.png)

第三步：

![检查这些选项以仅查看代码泄漏的泄漏](../Images/d99cfc2be0c4497ef7741342e330b905.png)

# iphone - 如何在 iphone 中使用 CFNetwork 概念将 xml 文件上传到 FTP 服务器

> ID：15062499
> 
> 赞同：-2
> 
> 时间：2013-02-25T08:03:21.377
> 
> 标签：iphone, objective-c, cfnetwork, ftp-server

如何在 iphone 中使用 CFNetwork 概念将 xml 文件上传到 FTP 服务器？

有没有示例项目？

有没有可用的开源软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:44:21.360

您还可以使用库：[SCRFTPRequest](https://github.com/Hackmodford/SCRFTPRequest)

您还可以查看我的小示例[https://dl.dropbox.com/u/19438780/FTPtest.zip](https://dl.dropbox.com/u/19438780/FTPtest.zip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:09:41.197

这个问题有专门的文档：[CFNetwork Programming Guide - Working with FTP Servers](https://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFFTPTasks/CFFTPTasks.html)。

如果您有任何特定问题，请尝试更具体。

# android - 为安卓使用wheelwidget

> ID：15062500
> 
> 赞同：0
> 
> 时间：2013-02-25T08:03:23.243
> 
> 标签：android

我正在为 android使用`kankans`wheel 小部件，并通过如下所示的分钟数

```
final WheelView mins = (WheelView) view.findViewById(R.id.minutes);
            mins.setViewAdapter(new mywheel(activity, 0, 59,"%02d")); 
```

现在我想用 00 和 05 显示我的分钟值并继续 06 07 .. 我想跳过 02,03,04。

```
public class mywheel extends AdapterWheel {

    private int minValue;
    private int maxValue;
     private String format;

      public mywheel(Context context, int minValue, int maxValue, String format) {
            super(context, null);

            this.maxValue = maxValue;
            this.format = format;
        }

    @Override
    public CharSequence getItemText(int index) {
        if (index >= 0 && index < getItemsCount()) {
            int value = 5 * index;
            return format != null ? String.format(format,value) : Integer.toString(value);
        }
        return null;
    }

    @Override
    public int getItemsCount() {
         return 59 / 5;
    }

} 
```

上面的代码给了我 5 的倍数的分钟值，但我只想跳过 2,3,4 。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:11:55.757

试试这样：

```
public class mywheel extends AdapterWheel {

private int minValue;
private int maxValue;
 private String format;

  public mywheel(Context context, int minValue, int maxValue, String format) {
        super(context, null);

        this.maxValue = maxValue;
        this.format = format;
    }

@Override
public CharSequence getItemText(int index) {
    if (index > 0 && index < getItemsCount()) {
        int value = 4 + index;
        return format != null ? String.format(format,value) : Integer.toString(value);
    } else if(index == 0) {
        int value = 0;
        return format != null ? String.format(format,value) : Integer.toString(value);
    }
    return null;
}

@Override
public int getItemsCount() {
     return 56;
}

} 
```

# jpa - JPA 只执行联合中的第一个选择语句？

> ID：15062501
> 
> 赞同：2
> 
> 时间：2013-02-25T08:03:24.383
> 
> 标签：jpa, jpql

我编写了一个联合多个 select 语句的 JPQL 语句，每个语句选择一个不同的字符串常量。查询的简化版本如下所示：

```
SELECT DISTINCT 'A' AS widget_type
  FROM WidgetA widgetA
  WHERE widgetA.creationTimestamp > :cutoff
UNION SELECT DISTINCT 'B' AS widget_type
  FROM WidgetB widgetB
  WHERE widgetB.creationTimestamp > :cutoff 
```

该查询不会导致任何错误，但我没有得到我期望的结果。我看到生成的 SQL 没有任何联合 - 它只从第一个选择中查询表：

```
select distinct 'A' as col_0_0_ 
from widget_a widget0_
where widget0_.creation_timestamp>? 
```

为什么 JPA 在第一个 select 语句之后会忽略所有内容，有明显的原因吗？如果有什么不同，我使用 Hibernate 4.1.9 作为 JPA 实现，带有 MySQL 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:16:48.367

[JPQL](http://www.datanucleus.org/products/accessplatform_3_2/jpa/jpql.html)没有 UNION 这样的概念。因此，因此任何具有它的“查询”都不是 JPQL，因此应该作为无效的 JPQL 被拒绝（[DataNucleus JPA](http://www.datanucleus.org/products/accessplatform_3_2)肯定会这样做）

# c - 使用单个参数调用而不包括 sys/wait.h 时 waitpid 的参数值

> ID：15062509
> 
> 赞同：1
> 
> 时间：2013-02-25T08:03:51.657
> 
> 标签：c, assembly

考虑以下 C 程序：

```
int main()
{
    waitpid(1337);
} 
```

正如预期的那样，gcc 和 clang 都警告我关于 waitpid 的隐式声明，但生成的二进制文件可以正常工作。当`ltrace`-ing 它时，我看到了

```
waitpid(1337, 0x7fff86950ec8, -2037051688) 
```

叫做。现在三个问题：

1.  为什么上面的 C 代码甚至可以工作？我应该必须包括`sys/wait.h`才能调用waitpid。`printf`调用而不包括时也会发生同样的事情`stdio.h`。输出有效。
2.  所以 gcc 仍然可以调用 waitpid，但为什么即使它有 3 个参数，也可以只用一个参数调用它？`ltrace`多次调用暗示其他两个参数是随机值？Gcc 在单参数 waitpid 和三参数 waitpid 之间进行了一些转换，但是如何实现呢？
3.  如何使用 gdb 找出最后两个参数背后的值？其他两个值没有显示在源代码中，那么如何在 gcc 中访问它们？

我收集到的一些线索：我查看了 main 函数的汇编器输出：

```
0x000000000040050c <+0>:    push   %rbp
0x000000000040050d <+1>:    mov    %rsp,%rbp
0x0000000000400510 <+4>:    mov    $0x539,%edi
0x0000000000400515 <+9>:    mov    $0x0,%eax
0x000000000040051a <+14>:   callq  0x4003f0 <waitpid@plt>
0x000000000040051f <+19>:   pop    %rbp
0x0000000000400520 <+20>:   retq 
```

所以我想这不是 gcc 做某事，因为确实似乎有一个 waitpid 函数只接受一个参数（1337）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:07:31.020

> 为什么上面的 C 代码甚至可以工作？

它是偶然“起作用”的。C 允许您在不指定原型的情况下调用函数，即不包括其标题。当您这样做时，它**会假设参数的数量和类型**并尝试调用它。显然，使用错误数量的参数调用函数是未定义的行为。

> 6.5.2.2-3
> 
> 如果表示被调用函数的表达式的类型不包含原型，则对每个参数执行整数提升，而浮点类型的参数将提升为双精度。这些称为默认参数提升。**如果参数的数量不等于参数的数量**，则行为未定义。

至于你的第三个问题，我怀疑你看到的垃圾只是堆栈上的剩菜。要确定这是否属实，请在 the 之前放置一个断点`waitpid`，然后进入它，看看传递了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:19:34.137

通过在 ac 程序中包含头文件，您基本上给出了函数的原型。如果没有给出，那么它假定参数的数量和参数的类型由 cnicutar 告知。如果未定义原型，它还假定函数的返回类型为 int。

# python - Map Reduce 常见查询的简单分数聚合

> ID：15062517
> 
> 赞同：0
> 
> 时间：2013-02-25T08:04:17.520
> 
> 标签：python, algorithm, mapreduce

我的一个映射器生成了一些分布在文件中的日志，如 part-0、part-1、part-2 等。现在每个文件都有一些查询和该查询的一些关联数据：

```
part-0

q             score         
1 ben 10      4.01
horse shoe    5.96
...

part-1

1 ben 10        3.23
horse shoe      2.98
....

and so on for part-2,3 etc. 
```

现在相同的查询 q 即上面的“1 ben 10”驻留在第 1 部分、第 2 部分等中。

现在我必须编写一个 map reduce 阶段，我可以在其中收集相同的查询并汇总（加起来）他们的分数。

我的 mapper 函数可以是一个身份，在 reduce 中我将完成这项任务。

输出将是：

```
q       aggScore
1 ben 10    7.24
horse shoe  8.96
... 
```

似乎是一项简单的任务，但我无法想到如何继续进行此操作（阅读很多但实际上无法继续）。我可以考虑通用算法问题，首先我将收集常见查询，然后将它们的分数相加。

任何有关pythonic解决方案或算法（map reduce）提示的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:54:34.900

这是 MapReduce 解决方案：

地图输入：每个输入文件（part-0、part-1、part-2、...）都可以输入到单独的（单独的）地图任务。

对于输入文件中的每个输入行，Mapper 发出`<q,aggScore>`. 如果单个文件中有多个查询的分数，Map 会将它们全部相加，否则如果我们知道每个查询只会在每个文件中出现一次，则 map 可以是`<q,aggScore>`为每个输入行发出的恒等函数。

Reducer 输入格式`<q,list<aggScore1,aggScore2,...>`为 Reducer 操作类似于著名的 MapReduce 示例`wordcount`。如果您使用的是 Hadoop，则可以对 Reducer 使用以下方法。

```
public void reduce(Text q, Iterable<IntWritable> aggScore, Context context) throws IOException, InterruptedException {
   int sum = 0;
   for (IntWritable val : aggScore) {
      sum += val.get();
   }
   context.write(q, new IntWritable(sum));
} 
```

`aggScores`该方法将汇总特定的所有内容`q`并为您提供所需的输出。reducer 的 python 代码应该是这样的（这里`q`是键，列表`aggScores`是值）：

```
def reduce(self, key, values, output, reporter):
    sum = 0
    while values.hasNext():
        sum += values.next().get()
    output.collect(key, IntWritable(sum)) 
```

# c++ - 将 A[i][j] 更改为 A[j][i] 时，遍历矩阵的速度会变慢

> ID：15062518
> 
> 赞同：5
> 
> 时间：2013-02-25T08:04:30.800
> 
> 标签：c++, c, arrays, performance, caching

我有一个`int`名为 s的矩阵`A`，当我按列而不是行迭代它时，它的运行速度慢了大约 50 毫秒：

```
for(int i=0;i<n;i++)  
    for(int j=0;j<n;j++)  
        cout<<A[j][i];    //slower than of A[i][j] 
```

有谁知道为什么会这样？我问了几个人，但他们都不知道**为什么**。我确信这与地址在计算机内存中的表示方式有关，但我仍然想找到一个更具体的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T08:07:47.537

***由于缓存内存***，逐行遍历矩阵更快。

当您访问`A[i][j]`时，加载到缓存中的内存不仅仅是一个元素。请注意，矩阵的每一行都存储在连续的内存块中，因此当*“周围”的内存* `A[i][j]`仍在缓存中时，访问同一行中的下一个元素更有可能导致它从缓存而不是主内存中读取（见*[缓存未命中](http://en.wikipedia.org/wiki/Cache_miss#Cache_miss)*）。

另请参阅相关问题：
[为什么循环的顺序会在迭代 2D 数组时影响性能？](https://stackoverflow.com/q/9936132/1168156)
[这两个 for 循环中哪一个在时间和缓存性能方面更有效](https://stackoverflow.com/q/9888154/1168156)
[缓存内存是如何工作的？](https://stackoverflow.com/q/218117/1168156)
[矩阵乘法：矩阵大小差异小，时序差异大](https://stackoverflow.com/q/7905760/1168156)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T08:07:29.133

2D 数组作为**1D 数组存储在内存中**，主要位于（行/列）中。这意味着具有 5 列的数组可能会一个接一个地存储为 5 列，因此根据您的访问方式与此顺序，**您的访问可能会被缓存，或者它们中的每一个都可能导致缓存失败**，从而导致性能上的巨大差异。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T08:08:19.887

这是关于缓存行读取机制的。阅读[空间局部性](http://en.wikipedia.org/wiki/Locality_of_reference#Use_of_spatial_and_temporal_locality%3a_hierarchical_memory)。

要验证，请尝试在运行此应用程序时禁用缓存。（我忘记了如何做到这一点，但可以做到。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T08:40:47.097

正如其他人所指出的，这是一个缓存问题。每次访问数组元素时，以一种方式使用它可能会导致缓存未命中。

缓存问题实际上是优化的一个非常重要的因素。这就是为什么有时做一个数组结构而不是结构数组更好的原因。比较这两个：

```
struct StructOfArrays {
  int values[100];
  char names[100][100];
}

struct StructOfArrays values;

struct NormalValStruct {
  int val;
  char name[100];
}

struct NormalValStruct values[100]; 
```

如果您遍历其中的值，`StructOfArrays`它们可能会被加载到缓存中并有效地读取。当您迭代`NormalValStruct`并获取 value 成员时，您将每隔一次获得一次缓存未命中。

该技巧通常用于高性能应用程序中。这通常是游戏。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-25T08:06:25.470

因为第一个循环访问内存是线性的，另一个循环之间有间隙。因此第一个循环对缓存更友好。

# jquery - 如何打开和关闭很多 jQuery 单击激活的功能，然后让它们再次打开

> ID：15062519
> 
> 赞同：0
> 
> 时间：2013-02-25T08:04:32.100
> 
> 标签：jquery, bind, unbind

我的网站上有两个按钮，它们用作切换以允许**“包含”**或**“排除”**模式发生。默认情况下，包含按钮会突出显示。

这是两个按钮的 HTML：

```
<div class="smallmenu women abs on" id="include"><div class="text">include</div></div>
<div class="smallmenu men abs hov" id="exclude"><div class="text">exclude</div></div> 
```

默认情况下会激活包含（因此是“on”类）。当一个按钮“打开”时，我不希望人们能够将鼠标悬停在它上面并看到效果（这就是为什么 include 没有 'hov' 类而 exclude 有），我不想点击它做任何事情。要切换模式，我希望人们必须单击另一个按钮。

**当有人单击“排除”按钮时，我可以使用jQuery**实现我想要的效果，并且我可以使该按钮在被单击后停止激活（使用`$("#exclude").unbind();`），但是当有人单击**“包含”时'**按钮我不知道如何使**“排除”**按钮再次变为活动状态。

我也不知道如何防止页面首次加载时**“包含”**按钮处于活动状态。但我还没有真正玩过这部分。

这是一些代码：

```
$("#exclude").click(function() {
    $(this).toggleClass("on");
    $(".filtercategory").toggleClass("inc");
    $("#include").toggleClass("on");
    $("#include").toggleClass("hov");
    $(this).toggleClass("hov");
    $("#alternatefilterinfo").toggleClass("hide");
    $("#defaultfilterinfo").toggleClass("hide");
    $("#exclude").unbind();
        }); 

$("#include").click(function() {
    $(this).toggleClass("on");
    $(".filtercategory").toggleClass("inc");
    $("#exclude").toggleClass("on");
    $("#exclude").toggleClass("hov");
    $(this).toggleClass("hov");
    $("#exclude").bind(); //this line fails to do anything!
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:03:29.053

If you want a `global` switch to turn events on/off, there isn't one. But you can 'mock' one by having a global variable that is checked within the function of the triggered event.

For example:

```
var eventsSwitchedOn = true; //global switch

$("#mybutton").click(function() {
    if(eventsSwitchedOn) { alert("I am allowed to fire a click event!"); }
});

//now you can test it like this:

eventsSwitchedOn = false;

$("#mybutton").click(); //will do nothing

eventsSwitchedOn = true;

$("#mybutton").click(); //will alert the message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:09:28.383

该`.bind()`函数没有先前删除的处理程序的“内存”。如[文档中](http://api.jquery.com/bind)[所述，`.bind()`](http://api.jquery.com/bind)您必须以与将函数传递给`.click()`.

与其尝试解除绑定然后重新绑定，不如这样：

```
$("#exclude").click(function() {
   if ($(this).hasClass("on")) {
       return;
   }
   // your other code here
}); 
```

...和其他按钮类似。也就是说，当控件被单击时，检查它是否已经“打开”，如果是，则什么也不做（即立即返回）。

# web-services - REST Web 服务认证的常规和最佳实践是什么？

> ID：15062522
> 
> 赞同：0
> 
> 时间：2013-02-25T08:04:43.430
> 
> 标签：web-services, security, http, rest, authentication

我正在开始一个新项目（一个 Web 应用程序），并希望它通过带有 AJAX 的 REST Web 服务检索和提交其大部分数据。但我几乎不知道如何确保 Web 服务知道谁在访问它，并且只将数据提供给符合条件的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:42:22.717

REST Web 服务是无状态的，因此身份验证也应该是无状态的。

这种身份验证最常用的方法是使用 HTTP 身份验证标头（详见此处 --> [http://www.ietf.org/rfc/rfc2617.txt](http://www.ietf.org/rfc/rfc2617.txt)）。这里的先决条件是您应该使用 SSL\HTTPS 否则这些 HTTP 身份验证标头将容易受到中间人攻击。

如果您的网站不使用 SSL，那么您可能应该寻找其他身份验证方法，这篇 ( [http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/) ) 文章详细讨论了所有这些方法。它基本上描述了 Amazon Web Services 用来验证非 SSL reqeuets 的机制。

希望这会有所帮助。

# wordpress - 注册自定义帖子类型 wordpress

> ID：15062523
> 
> 赞同：0
> 
> 时间：2013-02-25T08:04:50.490
> 
> 标签：wordpress

我在我的主题中创建了新的帖子类型，但是当我尝试访问帖子的永久链接时，它告诉我找不到帖子

```
function my_post_type_news() {

    register_post_type( 'news',
            array( 
            'label' => __('News'), 
            'public' => true, 
            'show_ui' => true,
            'show_in_nav_menus' => false,
            'menu_position' => 5,
            'rewrite' => array(
                'slug' => 'news',
                'with_front' => FALSE,
            ),
            'supports' => array(
                    'title',
                    'thumbnail',
                    'editor',
                    'excerpt')
                ) 
            );

 register_taxonomy('news_category', 'news', array('hierarchical' => true, 'label' => 'News Categories', 'singular_name' => 'Category', "rewrite" => true, "query_var" => true));
      }

     add_action('init', 'my_post_type_news'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:38:48.813

```
function my_post_type_news() {

register_post_type( 'news',
        array( 
        'label' => __('News'), 
        'public' => true, 
        'show_ui' => true,
        'show_in_nav_menus' => false,
        'menu_position' => 5,
        'rewrite' =>false,
        'supports' => array(
                'title',
                'thumbnail',
                'editor',
                'excerpt')
            ) 
        ); 
```

register_taxonomy('news_category', 'news', array('hierarchical' => true, 'label' => 'News Categories', 'singular_name' => 'Category', "rewrite" => true, "query_var" =>真的））; }

```
 add_action('init', 'my_post_type_news'); 
```

使用上述功能，它会工作。我已将 rewrite 更改为 false。

希望能帮助到你。

# java - 用另一个初始化 Swing JPanel

> ID：15062525
> 
> 赞同：1
> 
> 时间：2013-02-25T08:05:14.397
> 
> 标签：java, swing, nullpointerexception, jpanel

我在初始化 JPanel 时遇到问题。这是我的代码：`

```
 JPanel    canvas = new JPanel();
    JPanel can = canvas;
    System.out.println("COMPONENTS 1 :" + canvas.getComponentCount());
    System.out.println("COMPONENTS 1 :" + can.getComponentCount());
    JTextField txt = new JTextField();
    txt.setBounds(100, 100, 200, 30);
    can.add(txt);
    System.out.println("COMPONENTS 2 :" + canvas.getComponentCount());
    System.out.println("COMPONENTS 2 :" + can.getComponentCount()); 
```

`

输出是：

```
COMPONENTS 1 :0
COMPONENTS 1 :0
COMPONENTS 2 :1
COMPONENTS 2 :1 
```

我想要的是 ：

```
COMPONENTS 1 :0
COMPONENTS 1 :0
COMPONENTS 2 :0
COMPONENTS 2 :1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:16:42.350

使用
JPanel 行可以 = canvas;

您没有创建新的 JPanel 对象。您正在制作罐头，指向画布也指向的同一个 JPanel 对象。Canvas 只是一个指向 JPanel 内存地址的指针。实际上，can 和 canvas 是完全相同的 JPanel。如果您希望能够独立修改它们，您想创建一个新的 JPanel 实例。

# c# - 基本类型相等检查失败

> ID：15062526
> 
> 赞同：1
> 
> 时间：2013-02-25T08:05:22.203
> 
> 标签：c#, .net, inheritance, reflection, types

只是偶然发现了这个。这是我的场景：

```
|--> BaseTypeLibrary  (contains ViewModelBase)
|--> ModelLibrary     (contains Model)
|--> Business Library (contains equality check)

 public class Model : ViewModelBase{ }

 // returns false
 bool isViewModel = (type.IsAssignableFrom(typeof(ViewModelBase))); 
```

首先，我确保 UI 库和 ModelLibrary 的引用指向同一个 BaseTypeLibrary。这是我执行的一些检查。

```
 // false
 Console.WriteLine(type.IsAssignableFrom(typeof(ViewModelBase)));

 // true
 Console.WriteLine((type.BaseType == typeof(ViewModelBase)));

 // true
 Console.WriteLine((typeof(ViewModelBase).Module.FullyQualifiedName) == (type.BaseType.Module.FullyQualifiedName));

 //true
 Console.WriteLine(type.IsSubclassOf(typeof(ViewModelBase))); 
```

谁能解释为什么 IsAssignableFrom 失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:08:17.747

这是一个很常见的问题，当人们第一次使用`IsAssignableFrom`.

在您的示例中，您需要在执行检查时反转实例和参数：

```
bool isViewModel = typeof(ViewModelBase).IsAssignableFrom(type); 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)：

> 公共虚拟布尔 IsAssignableFrom( 类型 c )
> 
> 返回值类型：System.Boolean
> 
> 如果 c 和当前 Type 表示相同的类型， **或者如果当前 Type 在 c 的继承层次结构中，或者如果当前 Type 是 c 实现的接口**，或者如果 c 是泛型类型参数并且当前 Type 表示，则为true c的约束之一。如果这些条件都不为真，或者 c 为空，则为假。

因此，您需要在候选基/接口类型上调用方法*，*并将候选具体/子类型用作方法*参数*。

我同意该方法的命名方式有些模棱两可。

# c# - 在书籍类 c# 控制台应用程序中使用构造函数

> ID：15062527
> 
> 赞同：-2
> 
> 时间：2013-02-25T08:05:27.997
> 
> 标签：c#

我有一门课，里面有几本书，并在控制台屏幕上打印出来，这是我的代码：

```
class Book
{
    public string forfattareEfternamn;
    public string forfattareFornamn;
    public string bokensTittle;
    public int lanseringsDatum;

    public Book(string forfattareEfternamn, string forfattareFornamn, string bokensTittle, int lanseringsDatum)
    {

    }   

    public string BokensTittle
    {
        get { return bokensTittle; }
        set { bokensTittle = value; }
    }
    public string ForfattareFornamn
    {
        get {return forfattareFornamn;}
        set {forfattareFornamn = value;}
    }

    public string ForfattareEfternamn
    {
        get {return forfattareEfternamn;}
        set {forfattareEfternamn = value;;}
    }

    public int LanseringsDatum
    {
        get { return lanseringsDatum; }
        set { lanseringsDatum = value; }
    }

    public override string ToString()
    {
        return string.Format("{0}, {1}, {2}, {3} ", forfattareEfternamn, ForfattareFornamn, bokensTittle, lanseringsDatum);

    }
} 
```

主要的：

```
class Program
{
    static void Main(string[] args)
    {
        List<Book> books = new List<Book>(string forfatareFornamn, string forfattareEfternamn, string bokensTittle, int lanseringsDatum);
        books.Add(new Book { forfattareFornamn = "Dumas", forfattareEfternamn = "Alexandre", bokensTittle = "The Count Of Monte Cristo", lanseringsDatum = 1844 });
        books.Add(new Book { forfattareFornamn = "Clark", forfattareEfternamn = "Arthur C", bokensTittle = "Rendezvous with Rama", lanseringsDatum = 1972 });
        books.Add(new Book { forfattareFornamn = "Dumas", forfattareEfternamn = "Alexandre", bokensTittle = "The Three Musketeers", lanseringsDatum = 1844 });
        books.Add(new Book { forfattareFornamn = "Defoe", forfattareEfternamn = "Daniel", bokensTittle = "Robinson Cruise", lanseringsDatum = 1719 });
        books.Add(new Book { forfattareFornamn = "Clark", forfattareEfternamn = "Arthur C", bokensTittle = "2001: A space Odyssey", lanseringsDatum = 1968 });

        foreach (Book b in books)
        {
            Console.WriteLine(b);
        }
        Console.ReadKey();
    }
} 
```

现在，问题是我被告知要使用包含数据类型的构造函数，所以我不必一一写下所有书名，我实际上不知道我应该怎么做。我试过了：

```
public Book(string forfattareEfternamn, string forfattareFornamn, string bokensTittle, int lanseringsDatum)
    {

    } 
```

但它给了我一个错误，说我没有接受 0 个参数的构造函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:10:56.280

如果这是您的构造函数：

```
public Book(string forfattareEfternamn, string forfattareFornamn, string bokensTittle, int lanseringsDatum)
{
} 
```

此行不会编译：

```
new Book { forfattareFornamn = "Dumas", forfattareEfternamn = "Alexandre", bokensTittle = "The Count Of Monte Cristo", lanseringsDatum = 1844 }) 
```

如果您创建一个，`parametrized constructor`那么您将不再拥有一个`default constructor`. 因此，您遇到了此编译器错误。

## 你可以做两件事：

**1）**如果你想编译这个，在你的`Book`类中添加一个无参数的构造函数。

```
public Book() {} 
```

**2）**或更改您的主类中的代码，使其与您的参数化构造函数相对应`new Book("blah", "blah", etc);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:11:24.597

首先你的`List`初始化是错误的：

```
List<Book> books = new List<Book>(string forfatareFornamn, string forfattareEfternamn, string bokensTittle, int lanseringsDatum); 
```

将其更改为：

```
List<Book> books = new List<Book>(); 
```

然后在调用构造函数后，你不为字段赋值，这样做：

```
public Book(string forfattareEfternamn, string forfattareFornamn, string bokensTittle, int lanseringsDatum) 
{
   this.forfattareEfternamn = forfattareEfternamn;
   this.forfattareFornamn = forfattareFornamn;
   this.bokensTittle =bokensTittle;
   this.lanseringsDatum = lanseringsDatum;
} 
```

最后一个错误是您的逻辑调用`Book`构造函数：

```
(new Book { forfattareFornamn = "Dumas", forfattareEfternamn = "Alexandre", bokensTittle = "The Count Of Monte Cristo", lanseringsDatum = 1844 }); 
```

将其更改为：

```
books.Add((new Book ("Dumas", "Alexandre", "The Count Of Monte Cristo", 1844)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:11:24.327

`new Book { ... }`是隐式`new Book() { ... }`的 - 即它使用默认构造函数。如果添加自定义构造函数，则可能还需要添加显式无参数构造函数：

```
public Book() {} 
```

这里的问题是，如果您没有定义*任何*构造函数（在非抽象类上），它会添加一个隐式的公共无参数构造函数，该构造函数会调用`: base()`- 但是，如果您添加*任何*自定义构造函数，它不**会这样做**。

或者 - 更改其他代码，即

```
books.Add(new Book("Dumas", "Alexandre", "The Count Of Monte Cristo", 1844 )); 
```

# php - 如何在 .htaccess 中制定 2 规则

> ID：15062540
> 
> 赞同：0
> 
> 时间：2013-02-25T08:06:18.997
> 
> 标签：php, .htaccess

如果我使用这样的规则：

```
RewriteEngine On 
RewriteRule ^([^/]*)\.html$ /project/index.php?page=$1 [L] 
```

结果是我的页面使用`www.myweb.com/index.php?page=about`变得`www.myweb.com/About.html`

我的问题是，如果我直接`user.php`创建一个类似的页面`www.myweb.com/user.php?page=NewPage`，结果不可能是这样的`www.myweb.com/NewPage.html`。

我在`.htaccess`

```
RewriteRule ^([^/]*)\.html$ /project/user.php?page=$1 [L] 
```

如何为我的案例添加规则？

# c# - 逆向工程代码优先 - 生成带有错误的上下文文件

> ID：15062545
> 
> 赞同：0
> 
> 时间：2013-02-25T08:06:37.013
> 
> 标签：c#, entity-framework

得到以下数据库：

```
GO
/****** Object:  Table [dbo].[Emp]    Script Date: 2/25/2013 09:52:26 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Emp](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](max) NOT NULL,
    [Age] [int] NOT NULL,
    [DateOfBirth] [date] NOT NULL,
 CONSTRAINT [PK_Emp] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF,
ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO 
```

当我尝试在 Visual Studio 2012 c# 中的一个空项目上首先执行实体框架-> 逆向工程代码时，一旦完成，我就会在 DBContext 中收到以下错误

错误 1 ​​非静态字段、方法或属性“System.Data.Entity.DbContext.Database.get”需要对象引用

为什么会这样？ ![在此处输入图像描述](../Images/fa1c86734fd5699e2dff77959a5b1d28.png)

编辑：

在空项目中工作不适用于非空项目

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T21:20:57.677

“数据库”是一个常用的类/命名空间/变量名称，所以它对你的意思是哪个感到困惑。请注意，错误提到了“System.Data.Entity.DbContext.Database”。只需使用“System.Data.Entity”对其进行限定以获得正确的：

System.Data.Entity.Database.SetInitializer(null);

# delphi - 如何使用 Delphi 和 MSBuild 指定可执行文件的名称？

> ID：15062546
> 
> 赞同：2
> 
> 时间：2013-02-25T08:06:46.093
> 
> 标签：delphi, msbuild, jenkins, continuous-integration, delphi-xe2

我想使用同一个 Delphi 项目来生成两个可执行文件（具有一组不同的条件定义）。如何使用 msbuild 指定生成的可执行文件的名称？

假设该项目名为`Foo.dproj`. 第一个可执行文件应该被调用`Foo.exe`（默认），第二个应该被调用`Foo-2.exe`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:32:15.193

一个简单的解决方案是以下构建脚本：

```
msbuild ... // Build second executuable
move Bin\Foo.exe Bin\Foo-2.exe
msbuild ... // Build first executable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:02:37.013

关于使用 msbuild 设置 Delphi 选项的详细信息的文档并不多。我遵循的程序如下：

1.  在 IDE 中找到您要控制的设置。
2.  更改该设置并观察该更改如何在 .dproj 文件中生效。
3.  希望您现在拥有可以通过将`/p`参数传递给 msbuild 来设置的属性名称，即`/pNAME=VALUE`.

在输出文件名的情况下，据我所知，IDE 或 .dproj 文件中没有选项，甚至没有`dcc32.exe`允许您控制输出文件名的选项。这意味着您唯一的选择是将重命名作为构建脚本的一部分。

# jquery - 如何垂直对齐jQuery按钮文本？

> ID：15062547
> 
> 赞同：0
> 
> 时间：2013-02-25T08:06:54.740
> 
> 标签：jquery, css, jquery-ui

我修改了一些`ui-button`类的高度，但文本按钮仍然在它的底部。我怎样才能将它对齐到中间？

```
.ui-button {
   display: inline-block;
   position: relative;
   padding: 0px;
   margin-right: 0.1em;
   cursor: pointer;
   text-align: center;
   overflow: visible;
   // resize a bit the height
   height: 20px;
} 
```

`vertical-align`没用。

[http://jsfiddle.net/PM4T6/](http://jsfiddle.net/PM4T6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:14:32.193

.ui-button {line-height: 20px;}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:14:57.247

使用时`position`请务必指定`top` `left`, `bottom` `right`....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:19:54.897

试试这个

```
.ui-button {
   display: table-cell;
   position: relative;
   padding: 0px;
   margin-right: 0.1em;
   cursor: pointer;
   text-align: center;
   overflow: visible;
   height: 50px;
} 
```

# java - 使用 commons-email-1.3 发送电子邮件时出错

> ID：15062549
> 
> 赞同：3
> 
> 时间：2013-02-25T08:07:02.230
> 
> 标签：java, email, smtp, apache-commons-email

在发送电子邮件时，我使用 commons-email-1.3 收到以下错误。
我已经下载并添加了外部 jar 到项目中。
请帮我解决这个问题！

```
package mypkg;

import org.apache.commons.mail.DefaultAuthenticator;
import org.apache.commons.mail.Email;
import org.apache.commons.mail.SimpleEmail;

public class sendingmail {
     public static void main(String[] args)  throws Exception {
            Email email = new SimpleEmail();
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator("myid","mypwd")); //Here is the error
            email.setDebug(false);
            email.setHostName("smtp.gmail.com");
            email.setFrom("me@gmail.com");
            email.setSubject("Hi");
            email.setMsg("This is a test mail ... :-)");
            email.addTo("you@gmail.com");
            email.setTLS(true);
            email.send();
            System.out.println("Mail sent!");

    }
} 
```

给出错误的行是

```
email.setAuthenticator(new DefaultAuthenticator("myid","mypwd")); 
```

错误信息是

> 线程“main”java.lang.Error 中的异常：未解决的编译问题：
> 
> javax.mail.Authenticator 类型无法解析。它是从所需的 .class 文件中间接引用的 来自
> Email 类型的方法 setAuthenticator(Authenticator) 指的是 mypkg.mailtest.main(mailtest.java:13) 中缺少的类型 Authenticator

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T08:23:19.817

请从指定链接下载jar

[激活 JAR](http://mirrors.ibiblio.org/pub/mirrors/maven2/javax/activation/activation/1.1/activation-1.1.jar)

[Java 邮件 jar](http://www.oracle.com/technetwork/java/index-138643.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T08:09:44.480

您的类路径中同时需要 mail.jar 和 activation.jar。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-05T08:31:38.993

打开文件 pom.xml，添加代码：

```
<dependencies>

  <!-- http://mvnrepository.com/artifact/org.apache.commons/commons-email -->   
    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-email</artifactId>
        <version>1.4</version>
    </dependency>
</dependencies> 
```

# vb.net - 将时间戳转换为半小时

> ID：15062552
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:07:06.543
> 
> 标签：vb.net

我正在编写一个函数，使用 Visual Studio 2010 将时间转换为最接近的半小时。例如，15:23 到 15:30，如果是 15:05，它将转换为 15:00。

有人有想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:28:42.180

您可以使用此方法：

```
Public Enum eRoundingDirection
    up
    down
    nearest
End Enum

Public Shared Function RoundDateTime(dt As DateTime, minutes As Integer, direction As eRoundingDirection) As DateTime
    Dim t As TimeSpan
    Select Case direction
        Case eRoundingDirection.up
            t = (dt.Subtract(DateTime.MinValue)).Add(New TimeSpan(0, minutes, 0))
        Case eRoundingDirection.down
            t = (dt.Subtract(DateTime.MinValue))
        Case Else
            t = (dt.Subtract(DateTime.MinValue)).Add(New TimeSpan(0, minutes \ 2, 0))
    End Select

    Return DateTime.MinValue.Add(New TimeSpan(0, (CInt(t.TotalMinutes) \ minutes) * minutes, 0))
End Function 
```

将当前时间四舍五入到最接近的半小时：

```
Dim rounded = RoundDateTime(Date.Now, 30, eRoundingDirection.nearest): 
```

最初发现（在 C# 中）[here](http://www.codeproject.com/Articles/24582/Rounding-a-DateTime-object-to-a-defined-number-of)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:14:26.500

查看这个答案[如何舍入时间](https://stackoverflow.com/questions/4968250/how-to-round-time-to-the-nearest-quarter-hour-in-javascript) 这是一个javascript示例，但vb.net应该也可以。

# java - 使用java设置字符串颜色

> ID：15062553
> 
> 赞同：1
> 
> 时间：2013-02-25T08:07:14.850
> 
> 标签：java, string, fonts, colors

*   我有以下 servlet 代码。
*   在控制台中打印以下行时，应以红色打印。"*连接名称 "+cname+" 已存在。请尝试使用其他名称"。如何得到这个。

我的小服务程序代码：

```
 try{
            Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
            con =DriverManager.getConnection("jdbc:oracle:thin:@"+host+":"+port+"/"+service,username,password);
            con.setAutoCommit(false);
            if(con!=null){
                if(key == null){ 
                    out.println("Connected Successfully");
                    String rootPath=request.getSession().getServletContext().getRealPath("/");
                    System.out.println(rootPath);
                    String propPath=rootPath+"/WEB-INF/";
                    PrintWriter out1 = new PrintWriter(new BufferedWriter(new FileWriter(propPath+"importedDB.properties", true)));
                    out1.println(cname+"=jdbc:oracle:thin:@"+host+","+port+","+service+","+username+","+password);
                    out1.close();
                }
                else{                   
                    out.println("*Connection name "+cname+" already exists. Please try with another name");
                }
             }else{
                 out.println("Error in getting connection");
             }
        }catch(Exception e){
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:31:40.127

您可以尝试在控制台输出中具有 Ansi 颜色的jlibs ( [http://code.google.com/p/jlibs/wiki/AnsiColoring )。](http://code.google.com/p/jlibs/wiki/AnsiColoring)

# vim - 当我运行 :BundleInstall 时，我在 vim quickfix 窗口中出现错误

> ID：15062560
> 
> 赞同：0
> 
> 时间：2013-02-25T08:07:55.033
> 
> 标签：vim

当我运行 :BundleInstall 时，我在 vim quickfix 窗口中出现错误

> 处理 ~/.vim/bundle/jshint.vim-Stelmach/plugin/jshint.vim 时检测到错误：
> 第 65 行：
> 函数 JSHint 已存在，添加！替换它
> 第 92 行：
> 函数 21_SetCursorLineColor 已经存在，添加！替换它
> 第 100 行：
> 函数 21_MaybeClearCursorLineColor 已存在，添加！替换它
> 第 118 行：
> 函数 21_ClearCursorLineColor 已存在，添加！替换它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:31:27.780

消息非常清楚（并且它没有显示在 quickfix 窗口中）：该文件第 65 行`!`的关键字后面缺少一个。`function`

添加`!`您自己和/或在插件的问题跟踪器上创建问题并等待作者提交修复。

基本上，当试图定义一个与另一个预先存在的函数同名的函数时，Vim 会抱怨。`!`在关键字后面添加a`function`会使 Vim 用新函数替换旧函数。

# c#-4.0 - 这可能使用反应框架吗？

> ID：15062564
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:08:09.083
> 
> 标签：c#-4.0, system.reactive

我的 C# 4.0 应用程序中有一个对象列表。假设这个列表包含 100 个学生类的对象。Reactive Framework 中是否有任何方法可以一次并行执行 10 个对象？

每个学生对象运行一个方法，该方法耗时大约 10 到 15 秒。所以第一次，从列表中取出前 10 个学生对象并等待所有 10 个学生对象完成它的工作，然后取出接下来的 10 个学生对象，依此类推，直到它完成列表中的全部项目？

1.  我有一个`List<Student>`100 计数。
2.  首先从列表中取出 10 个项目并并行调用每个对象的长期运行方法。
3.  接收每个对象的返回值并更新 UI [订阅部分]。
4.  仅当前 10 轮完成并释放所有内存时，下一轮才开始。
5.  对列表中的所有项目重复相同的过程。
6.  如何捕捉每个过程中的错误？
7.  如何从内存中释放每个学生对象的资源和其他资源？
8.  在 Reactive Framework 中做所有这些事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:53:45.337

此版本将始终有 10 名学生同时运行。当一个学生完成时，另一个将开始。当每个学生完成时，您可以处理它出现的任何错误，然后清理它（这将在下一个学生开始运行之前发生）。

```
students
    .ToObservable()
    .Select(student => Observable.Defer(() => Observable.Start(() =>
        {
            // do the work for this student, then return a Tuple of the student plus any error
            try
            {
                student.DoWork();
                return { Student = student, Error = (Exception)null };
            }
            catch (Exception e)
            {
                return { Student = student, Error = e };
            }
        })))
    .Merge(10) // let 10 students be executing in parallel at all times
    .Subscribe(studentResult =>
    {
        if (studentResult.Error != null)
        {
            // handle error
        }

        studentResult.Student.Dispose(); // if your Student is IDisposable and you need to free it up.
    }); 
```

这不*完全*是您所要求的，因为它在开始下一批之前没有完成第一批 10 个。这始终保持 10 并行运行。如果你*真的*想要 10 个批次，我会为此调整代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:50:31.460

这对我来说听起来很像 TPL 的问题。您有一组已知的静止数据。您希望将一些繁重的处理划分为并行运行，并且您希望能够批处理负载。

我在您的问题的任何地方都看不到异步源、动态数据源或需要反应的消费者。这是我建议您改用 TPL 的理由。

在单独的说明中，为什么要并行处理 10 的幻数？这是业务需求，还是潜在的优化性能的尝试？通常，最佳实践是允许 TaskPool 根据内核数量和当前负载计算出最适合客户端 CPU 的内容。我想随着设备及其 CPU 结构（单核、多核、多核、低功耗/禁用内核等）的巨大变化，这一点变得越来越重要。

这是您可以在 LinqPad 中执行的一种方法（但请注意缺少 Rx）

```
void Main()
{
    var source = new List<Item>();
    for (int i = 0; i < 100; i++){source.Add(new Item(i));}

    //Put into batches of ten, but only then pass on the item, not the temporary tuple construct.
    var batches = source.Select((item, idx) =>new {item, idx} )
                        .GroupBy(tuple=>tuple.idx/10, tuple=>tuple.item);

    //Process one batch at a time (serially), but process the items of the batch  in parallel (concurrently).
    foreach (var batch in batches)
    {
        "Processing batch...".Dump();
        var results = batch.AsParallel().Select (item => item.Process());
        foreach (var result in results)
        {
            result.Dump();
        }
        "Processed batch.".Dump();
    }
}

public class Item
{
    private static readonly Random _rnd = new Random();
    private readonly int _id;
    public Item(int id)
    {
        _id = id;
    }

    public int Id { get {return _id;} }

    public double Process()
    {
        var threadId = Thread.CurrentThread.ManagedThreadId;
        string.Format("Processing on thread:{0}", threadId).Dump(Id);
        var loopCount = _rnd.Next(10000,1000000);
        Thread.SpinWait(loopCount);
        return _rnd.NextDouble();
    }
    public override string ToString()
    {
        return string.Format("Item:{0}", _id);
    }
} 
```

我很想知道您是否确实存在动态数据问题或反应性消费者问题，但只是“简化”了问题以使其更易于解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T15:01:18.063

我的尝试……

```
var students = new List<Student>();
{....}
var cancel = students
    .ToObservable(Scheduler.Default)
    .Window(10)
    .Merge(1)
    .Subscribe(tenStudents =>
    {
        tenStudents.ObserveOn(Scheduler.Default)
            .Do(x => DoSomeWork(x))
            .ObserverOnDispatcher()
            .Do(tenStudents => UpdateUI(tenStudents))
            .Subscribe();               
    }); 
```

# html - HTML 对齐问题 - Internet Explorer

> ID：15062565
> 
> 赞同：1
> 
> 时间：2013-02-25T08:08:10.657
> 
> 标签：html, jsp

我有一个用于搜索和列出项目的 jsp。我有一个指标字段。每当指标的值变为“Y”时，将调用数据库并列出项目。就我而言，我得到了所有项目。但是对齐有问题。

在 Mozilla 和 Chrome 中，对齐没有问题。当我在 IE 中尝试时，我得到如下所示的列表。

我可以知道为什么它在 IE 中行为不端吗？

![在此处输入图像描述](../Images/4905ee76f3c3142992e0c8fc31065ace.png)

# ruby - 何时在 Ruby 中使用关键字参数，也就是命名参数

> ID：15062570
> 
> 赞同：17
> 
> 时间：2013-02-25T08:08:24.120
> 
> 标签：ruby, named-parameters, keyword-argument

Ruby 2.0.0 支持关键字参数 (KA)，我想知道在纯 Ruby 的上下文中这个特性的好处/用例是什么，尤其是考虑到由于关键字匹配需要每次都进行的性能损失时调用带有关键字参数的方法的时间。

```
require 'benchmark'

def foo(a:1,b:2,c:3)
  [a,b,c]
end

def bar(a,b,c)
  [a,b,c]
end

number = 1000000
Benchmark.bm(4) do |bm|
  bm.report("foo") { number.times { foo(a:7,b:8,c:9)  } }
  bm.report("bar") { number.times { bar(7,8,9) } }
end

#           user     system      total        real
# foo    2.797000   0.032000   2.829000 (  2.906362)
# bar    0.234000   0.000000   0.234000 (  0.250010) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-01-28T17:22:20.567

关键字参数有一些没有人提到的明显优势。

首先，您与参数的顺序无关。所以在你偶尔可能有一个 nil 参数的情况下，它看起来更干净：

```
def print_greeting(name, message = "Hello")
  puts "#{message}, #{name}"
end

print_greeting("John Connor", "Hasta la vista") 
```

如果您使用关键字参数：

```
def print_greeting(message: "Hello", name:)
  puts "#{message}, #{name}"
end

print_greeting(message: "Hasta la vista", name: "John Connor") 
```

甚至

```
print_greeting(name: "John Connor", message: "Goodbye") 
```

它消除了必须记住参数顺序的需要。但是，缺点是您必须记住参数的名称。这应该或多或少直观，并且可以说会导致更仔细考虑的方法签名。

使用关键字参数的另一个好处是，当您有一个将来可能需要额外参数的方法时。

```
def create_person(name:, age:, height:)
  # make yourself some friends
end 
```

如果您的系统要求现在需要了解一个人最喜欢的糖果棒，或者他们是否超重（因为食用了太多他们最喜欢的糖果棒），该怎么办？你怎么能使用关键字 args 来做到这一点？简单的：

```
def create_person(name:, age:, height:, favorite_candy:, overweight: true)
  # make yourself some fat friends
end 
```

在关键字参数之前总是有哈希，但这导致了更多的样板代码来提取和分配变量。样板代码 == 更多打字 == 更多潜在错别字 == 更少时间编写出色的 ruby​​ 代码。

```
def old_way(name, opts={})
  age    = opts[:age]
  height = opts[:height]
  # all the benefits as before, more arthritis and headaches  
end 
```

如果您只是设置一个采用一个参数并且很可能永远不需要更改的方法：

```
def say_full_name(first_name, last_name)
  puts "#{first_name} #{last_name}"
end 
```

然后应避免使用关键字参数，因为对性能的影响很小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-14T21:53:09.853

从 ruby​​-2.2.0 开始，使用关键字参数的低效率问题似乎不再是问题。

[功能 #10440](https://bugs.ruby-lang.org/issues/10440)修复了速度问题并在[ruby​​-2.2.0](https://github.com/ruby/ruby/blob/trunk/doc/ChangeLog-2.2.0)中发布：

> 2014 年 11 月 3 日星期一 03:02:38 笹田光一
> 
> *   重写方法/块参数拟合逻辑以优化关键字参数/参数和 splat 参数。[功能 #10440](https://bugs.ruby-lang.org/issues/10440)（此票证中描述了详细信息）

您可以自己查看（使用与原始问题中给出的相同代码）：

```
(08:04:%) rvm use ruby-2.0.0-p247
Using /Users/adam/.rvm/gems/ruby-2.0.0-p247

(08:04:%) ruby keyword_benchmarks.rb

       user     system      total        real
foo    1.390000   0.060000   1.450000 (  1.451284)
bar    0.130000   0.000000   0.130000 (  0.122344)

(08:04:%)   rvm use ruby-2.2.0
Using /Users/adam/.rvm/gems/ruby-2.2.0

(08:04:%) ruby keyword_benchmarks.rb

       user     system      total        real
foo    0.140000   0.000000   0.140000 (  0.136194)
bar    0.110000   0.000000   0.110000 (  0.116246) 
```

使用关键字 args 的性能损失仍然可以忽略不计，但我认为这是一个可以接受的权衡，以换取提高可读性和位置灵活性的好处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T09:17:24.610

由于 KA 是 ruby​​ 范围内的创新，我看到了两个主要优势：

*   将允许的参数限制为预定义的集合，就像 Rails 对[assert_valid_keys](http://apidock.com/rails/Hash/assert_valid_keys)所做的那样；
*   在代码块中使用该功能。

总结：

```
a = lambda { |name: "Leonardo", age: 67| [name, age] }
a.call # ⇒ ["Leonardo", 67]
a.call name: "Michelangelo", age: 88 # ⇒ ["Michelangelo", 88]
a.call name: "Schwarzenegger", alive: true # ⇒ ArgumentError: unknown keyword: alive 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T08:15:30.397

例如

一个函数

```
def welcome_message(message, options={})
  default_options = {name: 'hoge'}
  options = default_options.merge(options)

  "#{message}、#{options[:name]}"
end 
```

可以写

```
def welcome_message(message, name: 'hoge')
  "#{message}、#{name}"
end 
```

# delphi - 重新创建窗口时锚点被破坏的解决方法？

> ID：15062571
> 
> 赞同：5
> 
> 时间：2013-02-25T08:08:25.417
> 
> 标签：delphi

这发生在所有 Delphi 到 XE3 中：

1.  创建一个表单并在其上放置一个面板。将面板锚定到`[akLeft, akTop, akRight, akBottom]`，但在它和边框之间留出空间。
2.  添加一个调用的按钮`RecreateWnd()`
3.  运行应用程序。调整窗体的大小以隐藏面板，因为由于锚定，它的大小小于 0 像素。**按 RecreateWnd 按钮。**
4.  重新调整表单大小并注意面板的锚定已损坏。

只要我记得自己使用 Delphi，锚总是因为这个而无法使用。调整表单的大小，然后将其停靠：重新创建窗口，您的布局被破坏。

我想知道是否有某种解决方法？

# 更新

评论中提供了两种解决方法，一种经过验证且稳定，但表单闪烁，另一种是实验性的，但可能更彻底和干净。

我暂时不会投票给任何一个，因为其中一个是我的，我什至不确定它是否稳定。相反，我会等待一些公众意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:36:06.017

我使用的两个选项都不是解决底部和右侧锚点问题的理想选择：

1.  在调用或导致被调用之前将窗口再次变大 `RecreateWnd();`，然后再将其变小。然而，在你再次变小之前必须是可见的。
2.  设置表单的约束，使其不能被重新调整到小到最终隐藏的东西。

闪烁较大形式的示例，使用足够大的高度和宽度值以使面板不隐藏：

```
procedure TForm1.Button1Click(Sender: TObject);
Var
  OldWidth, OldHeight : integer;
begin
  OldWidth := Form1.Width;
  OldHeight := Form1.Height;
  Form1.Visible := false;
  Form1.Width := 1000;
  Form1.Height := 800;
  RecreateWnd();
  Form1.Visible := true;
  Form1.Width := OldWidth;
  Form1.Height := OldHeight;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:36:32.487

原来破坏一切的功能是`UpdateAnchorRules`. `TControl`存储`FOriginalParentSize`和它自己的原始大小`FAnchorRules`，并使用它来自动调整大小作为父调整大小。`UpdateAnchorRules()`获取当前父级大小和当前控件`Width`，`Height`并将它们保存到`FOriginalParentSize`and`FAnchorRules`中。

如果一切正常，那么在正常调整大小期间不会产生任何影响，因为控件及其父级会一致地更改大小。

但是当`Width`由于锚定控制小于零时，Windows，因此Delphi仍然认为它`0`。如果`UpdateAnchorRules`在该点调用，它会保存错误的、不符合`0`原始宽度的值。在此之后，布局无法修复。

（如果它没有被调用，由于保留了原始大小，`Width`继续以与父级的适当关系进行更新）`Width`

结果是任何涉及`UpdateAnchorRules`两次创建窗口句柄调用的事情：首先是在 WinAPI中，因为它在返回（和处理程序调用）之前`CreateWindow`分派，其次是在句柄创建之后显式地。`WM_SIZE``WM_SIZE``UpdateAnchorRules``CreateHandle`

看来，只要我们能`UpdateAnchorRules`在 的时间内禁用`CreateHandle`，我们就会成功。但是有明确的`UpdateAnchorRules`in调用`CreateHandle`，这意味着有人认为在句柄创建后*需要*调整 Anchor 规则。

所以也许我错过了一些东西，并且通过禁用它会破坏一些东西？

无论如何，有两种现成的禁用方法`UpdateAnchorRules`：设置`FAnchorMove`或设置`csLoading`。第一个不好，因为有代码在中途清除它`RecreateWnd`然后`UpdateAnchorRules`再次调用。

第二个有效，这是一个解决方案：

```
type
  TComponentHack = class helper for TComponent
  public
    procedure SetCsLoading(Value: boolean);
  end;

procedure TComponentHack.SetCsLoading(Value: boolean);
var i: integer;
begin
  if Value then
    Self.FComponentState := Self.FComponentState + [csLoading]
  else
    Self.FComponentState := Self.FComponentState - [csLoading];
  for i := 0 to Self.ComponentCount-1 do
    if Self.Components[i] is TControl then
      TControl(Self.Components[i]).SetCsLoading(Value);
end;

procedure SafeRecreateWnd();
begin
  MyControl.SetCsLoading(true);
  try
    MyControl.RecreateWnd(); //or any operation which triggers it -- such as docking or making the window visible first time after RecreateWnd()
  finally
    MyControl.SetCsLoading(false);
  end;
end; 
```

**免责声明**：

`TControl`我不知道通过设置 csLoading运行操作还会破坏什么。

更好的选择是挂钩`UpdateAnchorRules`过程并专门为此目的添加另一个标志检查，但这需要完全重新实现`UpdateAnchorRules`（容易破坏具有不同原始版本的不同版本的Delphi `UpdateAnchorRules`）或发明某种方式来调用`UpdateAnchorRules`通常被破坏的原始版本用钩子重写它。

# delphi - keybd_event中bScan参数值0x45是什么意思？

> ID：15062577
> 
> 赞同：5
> 
> 时间：2013-02-25T08:09:02.950
> 
> 标签：delphi, winapi, pinvoke

[许多](https://www.google.com/search?q=0x45%20keybd_event)使用[keybd_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304)的示例，bScan 参数的值为 0x45。

那个 0x45 值是什么意思？

我的印象[是 0x45 是键盘扫描码](https://www.google.com/search?q=0x45%20scancode)，但由于它用于不同数量的键，所以我不再那么确定了。

我的目标是使用`keybd_event`.NET P/Invoke 或 Delphi，并使类型更具限制性（例如使用枚举或标记的枚举），以便我的代码更易于维护。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:42:10.987

它确实是一个扫描码，对于许多键盘来说，它是 NumLock 键的扫描码。

文档中的示例代码`keybd_event`是如何切换 NumLock 状态的示例。因此自然而然地使用 0x45 作为扫描码。我的猜测是，您发现的许多其他示例只是盲目地从`keybd_event`MSDN 示例中复制了该值。由于[应用程序通常会忽略扫描码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646267.aspx#scan_code)并响应虚拟键码，因此作为扫描码传递的值通常无关紧要。

最后，您需要使用`SendInput`而不是`keybd_event`. 原因是前者允许您在队列中放置一系列事件。随着`keybd_event`您一次将一个事件放入队列中，您的伪造事件可能会与真实事件穿插。`SendInput`而这个问题是引入的主要原因之一。

# system.reactive - RxJS 之于事件就像 Promise 之于异步

> ID：15062582
> 
> 赞同：5
> 
> 时间：2013-02-25T08:09:37.120
> 
> 标签：system.reactive, reactive-programming, reactive-extensions-js

在[请求对响应式扩展 (RX) 进行清晰、如画的解释？](https://stackoverflow.com/questions/15033809/requesting-a-clear-picturesque-explanation-of-reactive-extensions-rx)我询问了 RX 的全部内容，我想，感谢提供的答案，我现在明白了。

在引用的问题中，我引用了[http://reactive-extensions.github.com/RxJS/](http://reactive-extensions.github.com/RxJS/)中的一句话：

> RxJS 之于事件就像 Promise 之于异步。

虽然我认为我得到了 RX 背后的想法，但我完全没有得到这句话。我什至不能说我不明白的到底是什么。这更像是......我没有看到句子的前半部分和后半部分之间的联系。

对我来说，这句话听起来很*重要*，很*感人*，但我很难判断它是否真实，是否是一个伟大的见解，等等......

任何人都可以用某人（比如我）可以理解谁是所有这些反应性东西的新手来解释这句话的含义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:28:03.633

Promise 是一种定义异步操作完成后可能发生的计算的方法。RxJs 是一种定义当一个或多个事件在流中发生 (onNext)、完成 (onCompleted) 或抛出异常 (onError) 时可能发生的计算的方法。

# php - 如何制作重复的xml节点并在其中保存不同的值而不覆盖

> ID：15062586
> 
> 赞同：2
> 
> 时间：2013-02-25T08:09:45.360
> 
> 标签：php, xml

我已经创建了一个表单，并且正在通过该表单上传图像，并且我在 XML 文件中创建了一个节点，并且我想将图像的名称保存在该文件中，一切正常，但是每当我上传新图片时，它都会替换旧文件名，我想做的就是如果我再上传一张图片，那么它应该自动再创建一个节点，然后在那里动态添加图像名称而不替换旧的。

我使用的表格：

```
<div id="popup_box_slider_image" class="Add-Social-Media">
<!-- OUR PopupBox DIV-->
<a id="popupBoxClosesliderImage"  class="ClosePopup"></a>
<form id="addEditFormSelectTemplate" action="" method="post"  enctype="multipart/form-data" >
<p>Please upload a image to add to slider.</p>
<br />
<div style="width:100%; float:left;">
<br/> 
```

上传图片：

```
<input type="file" name="sliderImage" id="slider" value="" style="width:180px;" class="field-box"  />
<br />
<span id="sliderImageErr">&nbsp;</span>
<br/>
<br/>
<br/>
<div align="left">
<input type="submit" name="SelectsliderImage" onClick="return validatesliderImage();"  value="Update" style="background-color:#2D69A9 ; color:#FFFFFF ; padding-top:5px; padding-bottom:5px; padding-right:10px; padding-left:10px; border:none ; cursor:pointer ; border-radius:5px; " />
</div>
</div>
</form>
</div> 
```

我使用的 PHP 代码：

```
$sliderimagename=$_FILES['sliderImage']['name'];
$xmlpath=SITE_URL."xml/".$_SESSION['username']."/test.xml";
$document=simplexml_load_file($xmlpath);
$document->body->sliderimage = $sliderimagename;
$document->asXML($xmlpath);
$path=SITE_URL."/slider_images/";
move_uploaded_file($_FILES['sliderImage']['tmp_name'],$path.$sliderimagename); 
```

XML节点结构：

```
<body>
    <title>changeBg</title>
    <imagename>B4.jpg</imagename>
    <sliderimage></sliderimage>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:21:16.647

通过使用[`addChild`](http://php.net/manual/en/simplexmlelement.addchild.php)要添加新子级的 SimpleXMLElement 的方法。使用您当前的 xml 结构，它看起来像这样：

```
//...
$document=simplexml_load_file($xmlpath);
$new_image = $document->body->addChild('sliderimage', $_FILES['sliderImage']['name']); 
```

这将导致这样的 xml 输出：

```
<body>
    <title>changeBg</title>
    <imagename>B4.jpg</imagename>
    <sliderimage></sliderimage>
    <sliderimage></sliderimage> <!-- this is the newly created node -->
</body> 
```

但是您可能希望将您的 xml 文件重组为这样您就可以拥有更多级别的嵌套，例如：

```
<body>
    <file> <!--- new top level tag to group the individual images -->
        <title>changeBg</title>
        <imagename>B4.jpg</imagename>
        <sliderimage>old image</sliderimage>
    </file>
    <file>
        <!--- ... -->
        <sliderimage>new image</sliderimage>
    </file>
</body> 
```

在这种情况下，您只需`addChild`在返回的节点上多次调用，如下所示：

```
$new_file = $document->body->addChild('file'); // adding a new <file> node
$new_file->addChild('title', 'some title'); // adding more nodes inside the new <file> node
$new_file->addChild('imagename', '...');
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:21:56.567

[http://www.php.net/manual/en/simplexmlelement.addchild.php](http://www.php.net/manual/en/simplexmlelement.addchild.php)

添加一个新的子元素： $document->body->addChild('sliderimage', $sliderimagename);

```
<body>
<title>changeBg</title>
<imagename>B4.jpg</imagename>
<sliderimage>First</sliderimage>
<sliderimage>Second</sliderimage>
</body> 
```

但是，您可能应该更改 xml 以指示有一组可用的项目

```
<body>
<title>changeBg</title>
<imagename>B4.jpg</imagename>
<sliderimages>
    <image>First</image>
    <image>Second</image>
</sliderimages>
</body> 
```

# java - 从大型 ByteArrayOutputSteam 了解 Avro 反序列化

> ID：15062588
> 
> 赞同：0
> 
> 时间：2013-02-25T08:09:47.060
> 
> 标签：java, serialization, bigdata, avro, bytearrayoutputstream

我的印象是 a`ByteArrayOutputStream`的内存效率不高，因为它的所有内容都存储在内存中。

同样，调用`toByteArray`大流似乎“扩展性很差”。

[那么，为什么在 Tom White 的书Hadoop: the Definitive Guide](http://shop.oreilly.com/product/0636920010388.do)中的示例中的示例中同时使用它们：

```
 ByteArrayOutputStream out = new ByteArrayOutputStream;
    Decoder decoder = DecoderFactory().defaultFactory().createBinaryDecoder(out.toByteArray(), null); 
```

“大数据”不是 Avro 的标准吗？我错过了什么？

**编辑 1：我正在尝试做的事情**- 假设我正在通过 websocket 流式传输 avros。如果我想反序列化多条记录，而不仅仅是放入它自己的一条记录，该示例会是什么样子`ByteArrayOutoputStream`？

有没有更好的方法来提供`BinaryDecoder`字节 []？或者也许是不同类型的流？或者我应该为每个流发送 1 条记录，而不是加载具有多条记录的流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:48:11.773

*ByteArrayOutputStream*在处理小型对象（如中小型图像）或固定大小的请求/响应时很有意义。它在内存中并且不接触磁盘，因此这对性能非常有用。将它用于 1 TerraByte 的数据没有任何意义。可能这是一个试图在书中保持一个小例子和独立的例子，以免偏离重点。

* * *

编辑：现在我知道你要去哪里了，我想建立一个管道。从流中拉出一条消息（所以我假设您可以从 HTTP 对象中获取 InputStream）并使用无内存方法处理它或将其扔到队列中并让线程池处理具有内存的队列-less 方法。因此，对此的要求是 1) 能够在将 Avro 消息从流中拉出时检测它们之间的边界并具有解码方法。

解码的方法似乎是将每条消息的字节读取到一个字节数组中，然后将其交给您的 BinaryDecoder（在找到消息边界之后）。

# activerecord - Rails 3 方式使用多个 if 语句和表单创建/新建

> ID：15062592
> 
> 赞同：0
> 
> 时间：2013-02-25T08:09:52.777
> 
> 标签：activerecord, if-statement, ruby-on-rails-3.2, multiple-instances

我有一个问题要解决，但不确定最合适的方法是什么来完成这项工作。这里开始的背景：

我正在使用程序和约会两种模型。Appointments 模型属于_Procedures 模型和Procedures 模型有_many Appointments。

现在在程序模型上，有两个关键点需要关注，而是两个关键列。

`attr_accessible :visits, :occurence`

访问是安排约会的具体次数。发生率是访问的频率。一个例子是`visits: "5", occurence: "weekly"`

因此，当我提交表单时，我想编写一个同时查看两者的方法，`visits: "x"`然后`occurence: ["weekly", "biweekly", "monthly"]`创建一个 if 或一个开关——php 确实会切换到 ruby​​ 版本——但我怀疑有一种优雅的方式来写这个向上。

我当前的创建方法如下所示：

```
def create
  @appointment = Appointment.new(params[:appointment])
  set_variables
  if @appointment.save
    flash[:success] = "Appointment scheduled!"
    redirect_to patient_path(@current_patient)
  else
    redirect_to patient_path(@current_patient)
    flash[:error] = "Appointment Date and Time cannot be blank, please try again."
  end
end 
```

解决a）基于以下内容进行识别`occurence: ["weekly", "biweekly", "monthly"]`和处理的最佳方法是什么：`visits: "x"`

```
if @appointment.occurence == "weekly"
  (x-1).times do |n|
    submit same params but change within params appointment_date: = ((@appointment.appointment_date) + (n+1).week.to_formatted_s(:db)
    @appointment.save
  end
end 
```

...依此类推，`(n+1).month`用于每月发生`(n+2).day`和每两周发生一次。

提前谢谢你，希望这能澄清事情。只需注意一项，我是否需要存储在数据库中`visits:`，`occurence:`我怀疑不需要，但想确定在点击 models_controller 创建功能时使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:54:37.180

暂时解决了，相当粗糙——就像我目前的红宝石技能一样——但它似乎已经完成了这项工作。

```
 @appointment = Appointment.new(params[:appointment])
            set_variables
            @appointment.save
            if @procedure.occurence == "BIWEEKLY"
                    @visits = @procedure.visits - 1
                    @visits.times do |n|
                            procedure_id = @appointment.procedure_id
                            patient_id = @appointment.patient_id
                            appointment_date = (@appointment.appointment_date + 
                                    ((n+2)*2).days).to_formatted_s(:db)
                            appointment_time = @appointment.appointment_time
                            appointment_notes = @appointment.appointment_notes
                            attendance = "SCHEDULED"
                            @scheduled = Appointment.create(procedure_id: procedure_id, 
                                    patient_id: patient_id, appointment_date: appointment_date, 
                                    appointment_time: appointment_time, 
                                    appointment_notes: appointment_notes, attendance: attendance)
                    end
            end
            if @procedure.occurence == "WEEKLY"
                    @visits = @procedure.visits - 1
                    @visits.times do |n|
                            procedure_id = @appointment.procedure_id
                            patient_id = @appointment.patient_id
                            appointment_date = (@appointment.appointment_date + 
                                    (n+1).week).to_formatted_s(:db)
                            appointment_time = @appointment.appointment_time
                            appointment_notes = @appointment.appointment_notes
                            attendance = "SCHEDULED"
                            @scheduled = Appointment.create(procedure_id: procedure_id, 
                                    patient_id: patient_id, appointment_date: appointment_date, 
                                    appointment_time: appointment_time, 
                                    appointment_notes: appointment_notes, attendance: attendance)
                    end
            end
            if @procedure.occurence == "MONTHLY"
                    @visits = @procedure.visits - 1
                    @visits.times do |n|
                            procedure_id = @appointment.procedure_id
                            patient_id = @appointment.patient_id
                            appointment_date = (@appointment.appointment_date + (n+1).month).to_formatted_s(:db)
                            appointment_time = @appointment.appointment_time
                            appointment_notes = @appointment.appointment_notes
                            attendance = "SCHEDULED"
                            @scheduled = Appointment.create(procedure_id: procedure_id, 
                                    patient_id: patient_id, appointment_date: appointment_date, 
                                    appointment_time: appointment_time, 
                                    appointment_notes: appointment_notes, attendance: attendance)
                    end
            end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T17:44:32.950

这是一个稍微不那么杂乱的解决方案，它应该可以满足您的需求，尽管它还假设您摆脱了该`:appointment_date`字段并更改`:appointment_time`为一个`DateTime`字段。有关**DateTimes**的更多信息，请查看：

（Stackoverflow 只允许我发布 2 个链接，因为我是 n00b，所以在您最喜欢的搜索引擎上搜索“DateTime Ruby”，以获取 Ruby 的文档和 DateTime 的 rails 方法）

将 DateTime 格式化为字符串以供查看：[http ://apidock.com/ruby/DateTime/strftime](http://apidock.com/ruby/DateTime/strftime)

在表单中使用 DateTimes 的介绍：http: [//guides.rubyonrails.org/form_helpers.html#using-date-and-time-form-helpers](http://guides.rubyonrails.org/form_helpers.html#using-date-and-time-form-helpers)

```
@appointment = Appointment.new(params[:appointment])
set_variables
if @appointment.save 
    if @procedure.occurence == "WEEKLY"
       multiplier = 7
    elsif @procedure.occurence == "BIWEEKLY"
       multplier = 14
    else
       multiplier = 30
    end

    @visits = @procedure.visits - 1
    @visits.times do |n|
        Appointment.create!(
            :procedure_id => @appointment.procedure_id,
            :patient_id => @appointment.patient_id,
            :appointment_time => (@appointment.appointment_time + (multiplier * n).days),
            :attendance => "SCHEDULED"
        )
    end
else
    flash.now[:error] = "There appears to be an error, please try again."
    render 'new'
end 
```

# c++ - 关于使用 boost::zip_iterator 的一些代码的问题

> ID：15062597
> 
> 赞同：1
> 
> 时间：2013-02-25T08:10:19.770
> 
> 标签：c++, boost

最近我看到了一些关于如何使用 boost::zip_iterator 的示例代码。但是，我无法弄清楚它是如何工作的。这是代码：

```
class to_hex2
{
private:
    vector<unsigned char> &v;
    char trans(const char c) const
    {
        if(c >= 'a')
            return c - 'a' + 10;
        else if(c >= 'A')
            return c - 'A' + 10;
        else
            return c - '0';
    }
public:
    to_hex2(vector<unsigned char> &_v): 
        v(_v){}

    typedef boost::tuples::tuple<const char&,const char&> Tuple;
    void operator()(Tuple const &t) const   
    {
        static char tmp;    
        tmp = trans(t.get<0>()) * 0x10;
        tmp += trans(t.get<1>());
        v.push_back(tmp);
    }
};

int main()
{
    char s[] = "1234aBcD";
    vector<unsigned char> v;
    typedef step_iterator<const char*> si_t;    
    for_each(
                boost::make_zip_iterator(
                    boost::tuples::make_tuple(si_t(s),si_t(s+1))),  
                boost::make_zip_iterator(
                    boost::tuples::make_tuple(si_t(s+8),si_t(s+9))),    
                to_hex2(v));
    std::copy(
                v.begin(),v.end(),std::ostream_iterator<unsigned char>(cout," "));
    std::cout<<std::endl<<"v.size="<<v.size();
    return 0;
} 
```

**step_iterator**是一个迭代器，它迭代两个步骤而不是一个步骤。

我的第一个问题是：可以写 s+9 ，因为数组 s 的索引最多为 8（包括 '\0':-) ）？虽然代码似乎运行正常。

我的第二个问题是：由于 zip_iterator 可以同时迭代一个向量，这是否意味着结果是随机的？我看到的结果是恒定的，如下图所示： ![在此处输入图像描述](../Images/8b0ce2161444c046be8314a68c2a9cde.png)

最后但并非最不重要的一点是，有人可以告诉我结果是如何生成的（它的含义是什么），因为 ASCII 代码中没有上下箭头（我用谷歌搜索并在[这里](http://en.wikipedia.org/wiki/Arrow_%28symbol%29)看到了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:09:01.410

只要不取消引用指针，就可以指向数组的末尾。这非常有用，因为 C++ 使用半开范围，其中最后一个元素被排除在外。

在您发布的代码中，`s+9`指向 s 的末尾，但从未取消引用，因此行为是明确定义的。

关于你的第二个问题：不，这段代码的结果不是随机的。元素将按顺序迭代，从第一个到最后一个。当文档声明`zip_iterator`允许对序列进行并行迭代时，这并不意味着迭代将由多个线程或其他任何线程同时执行，它仅意味着每次迭代将推进多个迭代器而不是仅一个迭代器。这是一个可能的实现`for_each`：

```
template <typename InputIterator, typename Func>
void for_each(InputIterator first, InputIterator last, Func f)
{
    while (first != last)
    {
        f(*first);
        ++first;
    }
} 
```

如您所见，`for_each`适用于单个迭代器。如果你需要一次迭代两个序列，那么你可以使用`zip_iterator`，它封装了几个迭代器。它`operator*`返回多个值（一个元组），它`operator++`的 s 递增所有迭代器，同时推进它们。

为了更好地理解代码中发生的事情，这里是一个简化版本，没有`zip_iterator`and `for_each`：

```
class to_hex2
{
private:
    vector<unsigned char> &v;
    char trans(const char c) const
    {
        if(c >= 'a')
            return c - 'a' + 10;
        else if(c >= 'A')
            return c - 'A' + 10;
        else
            return c - '0';
    }
public:
    to_hex2(vector<unsigned char> &_v): 
        v(_v){}

    void operator()(const char &first, const char &second) const   
    {
        static char tmp;    
        tmp = trans(first) * 0x10;
        tmp += trans(second);
        v.push_back(tmp);
    }
};

int main()
{
    char s[] = "1234aBcD";
    vector<unsigned char> v;

    to_hex2 transformer(v);

    char *first = s;
    char *second = s + 1;

    for ( ; first != s + 8 && second != s + 9 ; first += 2, second += 2)
    {
        transformer(*first, *second);
    }

    std::copy(v.begin(),v.end(),
              std::ostream_iterator<unsigned char>(cout," "));
    std::cout<<std::endl<<"v.size="<<v.size();
    return 0;
} 
```

希望这应该清楚地表明这`zip_iterator`只是使多个迭代器同时前进的一种便捷方式。

最后，为了理解这段代码的目的，您可能应该将结果打印为整数而不是字符。你应该看到这个：

```
18 52 171 205 
```

它们是原始字符串中包含的十六进制数的十进制表示（`12`[16] = `18`[10]、`34`[16] = `52`[10]、`AB`[16] = `171`[10]和`CD`[16] = `205`[10]）。所以基本上，`v`包含原始十六进制字符串的基数 256 的表示。

# javascript - Mustache.js：为什么它将字符串分解为单独字符的对象

> ID：15062600
> 
> 赞同：2
> 
> 时间：2013-02-25T08:10:39.593
> 
> 标签：javascript, mustache

传递给 Mustache 的 javaScript 对象：

```
data      = {};
data.list = ['title', 'editor'];
data.test = function(){ console.log(this); }; 
```

小胡子模板

```
{{#list}}
   {{test}}
{{/list}} 
```

控制台中的输出（Chrome）：

```
String {0: "t", 1: "i", 2: "t", 3: "l", 4: "e"}
String {0: "e", 1: "d", 2: "i", 3: "t", 4: "o", 5: "r"} 
```

为什么 Mustache 会断弦？我能阻止它吗？这不允许我做一个简单的任务：

```
$.inArray(this, someArray); 
```

最糟糕的是——Mustache 的 String 对象没有 .join() 方法，所以我没有机会，因为只能通过循环将它粘回去：

```
var str = '';
$.each(this, function(k,v){str += v;}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:32:32.937

Mustache 将数组中的值作为对象处理。您可以通过`new String('foo')`在控制台中输入来查看。输出类似于你看到的 mustache 产生的输出。

因此，您需要更改数组以包含对象，例如：

```
data.list = [ { value: 'title' }, { value: 'editor' } ]; 
```

和你的`{{test}}`访问者：

```
data.test = function(){ console.log(this.value); }; 
```

# android - RelativeLayout 定位无法正常工作

> ID：15062601
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:10:45.000
> 
> 标签：android, android-layout, android-relativelayout

你好，

我正在尝试设计一个不依赖于屏幕尺寸的布局。实际上，我正在设计一个示例布局，其中在屏幕中心添加了一个大尺寸。上部剩余区域和下部剩余部分的中心有一个文本。xml是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/ads_layout_large"
        android:layout_width="300dp"
        android:layout_height="250dp"
        android:layout_centerInParent="true"
        android:background="@android:color/background_light" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@id/ads_layout_large"
        android:background="#fff000"
        android:gravity="center"
        android:text="@string/exit_enjoyed_text" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/ads_layout_large"
        android:background="#fff000"
        android:gravity="center"
        android:text="@string/exit_enjoyed_text" />
</RelativeLayout> 
```

问题是，它在上半部分工作，文本正好在剩余区域的中心，但下半部分`TextView`已经覆盖了屏幕，你能帮我找出错误吗？或者任何其他方式来设计相同的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:14:52.523

我认为这是您的问题：

```
android:layout_height="fill_parent" 
```

将您的 TextView 高度设置为 fill_parent 会导致您的 textview 扩展达到其父大小，请改用 wrap_content 或静态值（如“30dp”）

# emacs - 在“emacs”（最新版本）中设置“Slime”时，我如何告诉它更快地加载 swank？

> ID：15062602
> 
> 赞同：1
> 
> 时间：2013-02-25T08:10:50.680
> 
> 标签：emacs, lisp, slime, sbcl, swank

史莱姆手册说：“更快地加载 Swank 对于 SBCL，我们建议您创建一个包含套接字支持和 POSIX 绑定的自定义核心文件，因为这些模块需要最多的时间来加载。要创建这样的核心，请执行以下步骤：

```
shell$ sbcl
*(mapc ’require ’(sb-bsd-sockets sb-posix sb-introspect sb-cltl2 asdf))
 *(save-lisp-and-die "sbcl.core-for-slime") 
```

之后，将类似这样的内容添加到您的“.emacs”中：

```
(setq slime-lisp-implementations
’((sbcl ("sbcl" "--core" "sbcl.core-for-slime"))))" 
```

我知道如何将东西添加到我的 .emacs 文件中，但是我到底要为下面的部分做什么，即在哪里，确切地，以及我如何执行下面的步骤....我在哪里输入它。"执行以下步骤：

```
shell$ sbcl
* (mapc ’require ’(sb-bsd-sockets sb-posix sb-introspect sb-cltl2 asdf))
* (save-lisp-and-die "sbcl.core-for-slime")" 
```

请具体...我是菜鸟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:26:34.500

Shell 是计算机的命令行界面。`M-x``shell`在 Emacs 中，您可以通过输入（即依次按下这些键：`Esc``x``s``h``e``l``l``Enter`）进入 shell 。将出现一个新窗口，其中有一个 shell 提示符等待您的输入。在提示符处输入`sbcl`启动SBCL；然后你可以输入 lisp 代码片段来创建一个新的核心。

要使上述工作正常进行，您必须先安装 SBCL（例如，按照[www.sbcl.org](http://www.sbcl.org)上的说明进行操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:03:19.180

# c# - 如何在 asp.net 中设置自定义主体

> ID：15062608
> 
> 赞同：2
> 
> 时间：2013-02-25T08:11:15.920
> 
> 标签：c#, asp.net, permissions, claims-based-identity, iprincipal

我是网络应用程序的新手。我创建了一个自定义原则并尝试在 CurrentDomain 中设置它。此代码在 WPF 应用程序中完美运行。但在这里它抛出策略异常**“默认主体对象不能设置两次。”**

```
 var principal = new CustomPrinciple(currentIdentity);
 Thread.CurrentPrincipal = principal;
 AppDomain.CurrentDomain.SetThreadPrincipal(Thread.CurrentPrincipal); 
```

我的 CustomPrincple 来自 ClaimsPrinciple

```
 public class CustomPrinciple : ClaimsPrincipal
  { } 
```

我想知道为什么我不允许在这里设置它。如何在 Web 应用程序中设置我的自定义原则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:26:23.390

自定义主体应在 global.asax 文件中设置为发出的请求，而不是线程。然后您从[HttpContext.User 属性中获取自定义主体](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

这个问题中的答案详细说明了最好的方法：[ASP.NET MVC - Set custom IIdentity or IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal/10524305#10524305)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:39:55.347

您不允许调用 SetDomainPrincipal - 而是设置 Thread.CurrentPrincipal 和 HttpContext.User

[http://leastprivilege.com/2012/10/08/custom-claims-principals-in-net-4-5/](http://leastprivilege.com/2012/10/08/custom-claims-principals-in-net-4-5/)

# iphone - 如何跟踪应用程序上的状态或活动

> ID：15062609
> 
> 赞同：0
> 
> 时间：2013-02-25T08:11:23.140
> 
> 标签：iphone, xcode, ipad

我正在制作一个 ipad 应用程序，我希望当用户在应用程序中执行任何活动时，它必须被记录或存储，就像在我的应用程序中有视频和目录一样，所以如果用户打开视频部分并观看任何应该存储为用户观看视频的视频在此，然后像这样移动到目录等任何想法如何实现这个东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:15:19.943

您必须使用 sqlite 或 coredata 来保存用户观看的视频的名称。
当用户单击视频列表中的特定视频时，您可以将记录添加到您的表（watchedVideo 表）。

然后在您的目录屏幕中显示表中的视频列表（watchedVideo 表）。

# android - 如果还活着就恢复活动

> ID：15062613
> 
> 赞同：0
> 
> 时间：2013-02-25T08:11:29.907
> 
> 标签：android

我有 2 项活动
1.**活动**
1 2\. **活动2**

**活动 1**正在运行。在来自**activity1**的事件中，我想切换到**activtiy2**

条件是

1.创建新活动并在**活动**2不活动时运行。
2.Resume **activity2**如果它还活着

在这两种情况下，它都不应该关闭**活动1**

如何达到这个要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:16:25.480

您可以在 Activity2 onCreate 中编写为：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState != null){
                //If activity is not loaded first time
              }
    else
     {
        //activity is loaded first time
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:18:54.347

```
Intent i = new Intent(activity1.this, activity2.class);
i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
         | Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:31:37.617

除非您明确调用它，否则您无法控制在这种情况下 activity1 是否被杀死`.finish()`。如果你不这样做 - 它不会被销毁，直到你按下后退按钮，调用`.finish()`或内存管理器决定它需要后台活动占用的内存。

为避免重新创建activity2，您应该在清单中使用[launchMode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)，阅读它——您可能正在寻找`singleInstance`，`singleTask`或者`singleTop`，请参阅链接以了解差异。

# compilation - 使用自动工具编译：追溯更改配置标志

> ID：15062615
> 
> 赞同：1
> 
> 时间：2013-02-25T08:11:44.207
> 
> 标签：compilation, autotools, configure

假设我用自动工具编译了一个项目（不是我自己的）并传递了一些标志来配置。现在我想再次编译同一个项目，但配置标志略有不同。有没有办法告诉配置脚本使用旧标志，但用一些额外的标志更新它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:45:57.860

I would love to see an easier approach, but to simply add flags you can do:

```
sed -i '/^ac_configure_extra_args=/s/$/--new-flag --other-flag/' config.status
./config.status --recheck 
```

Normally, I manually edit `config.status` to do this, and not all `sed` support `-i`, but you get the idea. Change the original flags as they are defined in `config.status` to be the flags you want.

Another option is to cut-n-paste the original configure invocation out of the top of `config.log` and edit it.

# c# - 读取文件时出现 OutOfMemoryException

> ID：15062624
> 
> 赞同：2
> 
> 时间：2013-02-25T08:12:24.287
> 
> 标签：c#, exception

在我的应用程序中，我正在使用 Windows 服务读取文件。该服务每秒读取一次文件。这是我用来读取文件的代码：

```
public static byte[] GetBytesFromFile(string fullFilePath)
{
    FileStream fs = File.OpenRead(fullFilePath);
    try
    {
        byte[] bytes = new byte[fs.Length];
        fs.Read(bytes, 0, Convert.ToInt32(fs.Length));
        fs.Close();
        return bytes;
    }
    finally
    {
        fs.Close();
    }
} 
```

几个小时后，我得到了一个`System.OutOfMemoryException`. 我在这里做错什么了吗？

**更新：** 我在这段代码中使用返回的字节：

```
object s = null;
System.Reflection.Assembly a = Assembly.Load(bytes);
object o = a.CreateInstance("ID_" + report.ID.ToString().Replace("-", "_"));

Type t = o.GetType();
MethodInfo mi = t.GetMethod(name);
object[] values = new object[1];
values[0] = nameValue;
s = mi.Invoke(o, values);
return s; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:15:35.823

通过编辑，问题很明显：

```
System.Reflection.Assembly a = Assembly.Load(bytes); 
```

事情是这样的：程序集*不会*从`AppDomain`. 有一些可收集垃圾的东西，例如`DynamicMethod`- 但不是完整的组件。`AppDomain`如果您正在加载程序集，唯一安全的方法是在进程中单独加载。然后，您可以在完成后放弃`AppDomain`它（这会卸载其中的所有内容）。

* * *

**实际上，不能**保证您现有的代码甚至*可以工作*-`Read`不能保证读取所有数据。我有一篇关于那个的未决博客文章......

 **但是：如果文件很大，很可能你正在慢慢地使 LOH 饱和，这是一个非压缩堆。我能提供的最好建议是：不要将大文件读入数组。尝试重写下游代码以使用`Stream`API、某种“阅读器”API 或某种解析迭代器块。

如果没有看到其余代码如何处理事情，很难说更多。但是，最好在代码上运行内存分析器以确认确实`byte[]`是导致内存问题的原因。**

# php - php 对象 - 函数调用另一个函数

> ID：15062641
> 
> 赞同：0
> 
> 时间：2013-02-25T08:14:11.037
> 
> 标签：php, function, object

我有一个运行良好的 php 对象。我现在正试图让一个公共函数调用一个私有函数，但我无法让它工作......

```
 // Join - Headline & About Me
  public function updateHeadlineAboutMe($joinHeadline, $joinAboutMe) {

    // Profanity Audit Member Text
    $prof_headline = profanityAudit($joinHeadline);
    $prof_aboutme = profanityAudit($joinAboutMe);

    echo $prof_headline;
    echo $prof_aboutme;

   // other code here...    

}

  // Profanity Audit of Member Text
  private function profanityAudit($auditText) {
    return('ok');
  } 
```

我只是想让私有函数返回一个值，这样我就知道它被成功调用了。此功能将用于（由许多功能）将文本与表格中的脏话列表进行比较，以查看需要手动审查的文本......

我应该怎么做才能让它工作？

非常感谢你...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:17:06.480

如果函数在对象内部，则需要使用`$this`.

```
$prof_headline = $this->profanityAudit($joinHeadline); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:17:01.217

如果这两个函数在同一个类中，你错过了 $this。

```
$prof_headline = $this->profanityAudit($joinHeadline); 
```

另一条线也是如此。

如果它们不在同一个类中，您将无法调用私有函数，因为这是私有函数的思想：不要从外部调用。

# mysql - 炸毁服务器的 SQL 查询

> ID：15062642
> 
> 赞同：0
> 
> 时间：2013-02-25T08:14:13.203
> 
> 标签：mysql

我遇到了一个非常奇怪的问题，它烧毁了我的 MySQL 服务器。从我的角度来看（这肯定是错误的），查询非常简单。

我有一个表来存储 PBX 事件，并且我尝试获取每个代理的最后一个事件，以便在我的应用程序重新启动或其他任何情况下查看他/她的情况。

每当我启动时，服务器会占用 99% 的 CPU 并持续大约 5 分钟自行解决。

似乎是因为记录的数量，超过了 100,000 条。

表格如下：

```
CREATE TABLE IF NOT EXISTS `eventos_centralita` (
  `idEvent` int(11) NOT NULL AUTO_INCREMENT,
  `fechaHora` datetime NOT NULL,
  `codAgente` varchar(8) DEFAULT NULL,
  `extension` varchar(20) DEFAULT NULL,
  `evento` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`idEvent`),
  KEY `codAgente` (`codAgente`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=105847 ; 
```

查询如下：

```
SELECT a.* FROM eventos_centralita a 
LEFT JOIN eventos_centralita b ON b.codAgente = a.codAgente AND b.fechaHora > a.fechaHora 
GROUP BY a.codAgente 
```

我试图按日期限制它，但没有运气，因为查询没有给我任何东西。我怎样才能改进查询以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:22:29.973

请尝试以下：

```
SELECT a.* FROM eventos_centralita a 
INNER JOIN 
(
    SELECT idEvent, MAX(fechaHora)
    FROM eventos_centralita  
    GROUP BY codAgente
) as b
ON a.idEvent = b.idEvent 
```

# android - 在android中检测来电的API

> ID：15062651
> 
> 赞同：4
> 
> 时间：2013-02-25T08:14:38.693
> 
> 标签：android, android-intent

哪个api检测到android手机中的第一个来电谁能告诉我或者第一个动作是由哪个api起作用的，以及来电时发生在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:29:35.853

了解广播和广播接收器（抽象类）以获取有关来电、短信、彩信、wifi 等的广播。

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# android - Android 从 XML 中的级别列表中选择可绘制对象

> ID：15062653
> 
> 赞同：2
> 
> 时间：2013-02-25T08:14:39.523
> 
> 标签：android, xml, android-drawable, xml-drawable

如何**在 XML**中为`android:drawable`属性选择 level-list XML 中定义的可绘制对象之一？
我在级别列表 XML 本身中定义可绘制对象，以避免定义许多小的 XML 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<level-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:maxLevel="0">
        <shape 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
            <gradient 
                android:startColor="@color/empty" 
                android:endColor="@android:color/white"
                android:angle="90" />

        </shape>
    </item>

    <item android:maxLevel="1">
        <shape
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle" >
            <gradient 
                android:startColor="@color/low"
                android:endColor="@android:color/white"
                android:angle="90" />

        </shape>
    </item>

    <item android:maxLevel="2">
        <shape 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
            <gradient 
                android:startColor="@color/middle"
                android:endColor="@android:color/white"
                android:angle="90" />

        </shape>
    </item>

    <item android:maxLevel="3">
        <shape 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
            <gradient 
                android:startColor="@color/high"
                android:endColor="@android:color/white"
                android:angle="90" />

        </shape>
    </item>

    <item android:maxLevel="4">
        <shape 
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle">
            <gradient 
                android:startColor="@color/full"
                android:endColor="@android:color/white"
                android:angle="90" />

        </shape>
    </item>

</level-list> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T16:43:57.457

这不可能。我只是在搜索相同的想法，期待类似`ImageView`. 类似的东西`Android:level`。

但是不，该`setLevel`方法在 XML 属性中没有等效项。你（和我）必须以`setLevel`编程方式调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T13:53:07.877

在 API 24（及更高版本）中，现在支持此功能；`android:level`在`<scale>`指定初始可绘制级别的元素中找到，范围为 0 到 10000，因此可以这样使用`<layer-list>`；

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background"
          android:gravity="center_vertical|fill_horizontal">
        <shape android:shape="rectangle"
            android:tint="?attr/colorControlNormal">
            <size android:height="4dp" />
            <solid android:color="@android:color/white_disabled_material" />
        </shape>
    </item>
    <item android:id="@android:id/secondaryProgress"
          android:gravity="center_vertical|fill_horizontal">
        <scale android:scaleWidth="100%"
            android:level="2000">
            <shape android:shape="rectangle"
                android:tint="?attr/colorControlActivated" >
                <size android:height="4dp" />
                <solid android:color="@android:color/black" />
            </shape>
        </scale>
    </item>
    <item android:id="@android:id/progress"
          android:gravity="center_vertical|fill_horizontal">
        <scale android:scaleWidth="100%"
            android:level="1000">
            <shape android:shape="rectangle"
                android:tint="?attr/colorControlActivated" >
                <size android:height="4dp" />
                <solid android:color="@android:color/white_disabled_material" />
            </shape>
        </scale>
    </item>
</layer-list> 
```

要动态更改级别，然后以`setLevel`编程方式调用

# c++ - lnk2019 视觉工作室错误

> ID：15062654
> 
> 赞同：4
> 
> 时间：2013-02-25T08:14:40.303
> 
> 标签：c++, lnk2019

我正在尝试制作一个简单的 UDP 套接字类来在 c++ 程序和 java 程序之间进行一些对话，所以我正在尝试制作一个处理所有 UDP 传输的套接字类，但我无法编译该程序，因为我得到大约 8 个 lnk2019 错误，我什至不知道它们是什么意思。我主要在 Java 中工作，只有在不得不大声笑的时候才使用 c++。我有 3 个文件的套接字头和代码。此外，Udp 套接字代码来自 rFactor-Nesim，因此套接字代码不是由我编写的。

UDPSocket.cpp

```
#include "UdpSocket.hpp"

#include <stdio.h>

UdpSocket::UdpSocket(const char* host, int port) 
: mHost(host), mPort(port)
{
}

UdpSocket::~UdpSocket(void)
{
}

void UdpSocket::Open()
{
if(WSAStartup(MAKEWORD(2, 0), &mWinsockData) != 0)
    fprintf(stderr, "WSAStartup() failed");   

if ((mSocket = socket(AF_INET, SOCK_DGRAM, 0)) < 0)
    perror("socket() failed");   

memset(&mSocketAddress, 0, sizeof(mSocketAddress));
mSocketAddress.sin_family = AF_INET;
mSocketAddress.sin_addr.s_addr = inet_addr(mHost);
mSocketAddress.sin_port = htons(mPort);
}

void UdpSocket::Close()
{
closesocket(mSocket);  
WSACleanup();
}

void UdpSocket::Send(char* str, size_t length)
{
size_t result = sendto(mSocket, str, length, 0, 
    (struct sockaddr *) &mSocketAddress, sizeof(mSocketAddress));

if(result != length)
    perror("sendto() sent incorrect number of bytes");   
} 
```

UDPSocket.hpp

```
#ifndef UDPSOCKET_HPP
#define UDPSOCKET_HPP

#include <WinSock.h>

class UdpSocket
{
public:
UdpSocket(const char* host, int port);
~UdpSocket(void);

void Send(char* str, size_t length);

void Open();
void Close();
private:
const char* mHost;
int mPort;
int mSocket;
struct sockaddr_in mSocketAddress;
WSADATA mWinsockData;
};

#endif // UDPSOCKET_HPP 
```

和主要

```
#include "Socket/UdpSocket.hpp"
#include <iostream>

int Main(){
UdpSocket* testSocket = new UdpSocket("127.0.0.1", 27469);
testSocket->Open();
system("pause");
return 0;
} 
```

任何帮助都会很棒。我对 C++ 不是很擅长，但我已经做了一点

控制台输出：

```
Error   1   error LNK2019: unresolved external symbol __imp__htons@4 referenced in function "public: void __thiscall UdpSocket::Open(void)" (?Open@UdpSocket@@QAEXXZ)   UdpSocket.obj   SocketTest
Error   2   error LNK2019: unresolved external symbol __imp__inet_addr@4 referenced in function "public: void __thiscall UdpSocket::Open(void)" (?Open@UdpSocket@@QAEXXZ)   UdpSocket.obj   SocketTest
Error   3   error LNK2019: unresolved external symbol __imp__socket@12 referenced in function "public: void __thiscall UdpSocket::Open(void)" (?Open@UdpSocket@@QAEXXZ) UdpSocket.obj   SocketTest
Error   4   error LNK2019: unresolved external symbol __imp__WSAStartup@8 referenced in function "public: void __thiscall UdpSocket::Open(void)" (?Open@UdpSocket@@QAEXXZ)  UdpSocket.obj   SocketTest
Error   5   error LNK2019: unresolved external symbol __imp__WSACleanup@0 referenced in function "public: void __thiscall UdpSocket::Close(void)" (?Close@UdpSocket@@QAEXXZ)    UdpSocket.obj   SocketTest
Error   6   error LNK2019: unresolved external symbol __imp__closesocket@4 referenced in function "public: void __thiscall UdpSocket::Close(void)" (?Close@UdpSocket@@QAEXXZ)   UdpSocket.obj   SocketTest
Error   7   error LNK2019: unresolved external symbol __imp__sendto@24 referenced in function "public: void __thiscall UdpSocket::Send(char *,unsigned int)" (?Send@UdpSocket@@QAEXPADI@Z)  UdpSocket.obj   SocketTest
Error   8   error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup   MSVCRTD.lib SocketTest
Error   9   fatal error LNK1120: 8 unresolved externals C:\Users\Brendan\Documents\Visual Studio 2008\Projects\SocketTest\Debug\SocketTest.exe  SocketTest 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T09:15:18.727

听起来你没有链接到 Winsock -`Ws2_32.lib`

如果您从命令行构建，请添加`Ws2_32.lib`到`link`命令行。

如果从 Visual Studio 构建，请在项目配置对话框中查找链接器标志/设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:14:14.220

当您在多个实现文件中有代码时，您需要编译所有这些实现文件并将生成的目标代码文件传递给链接器，链接器将它们（和其他东西）组合成一个可执行文件

仅包含模块的标头是不够的

c++（还）没有任何技术模块概念，因此包含头文件不会神奇地编译实现文件或将目标代码文件传递给链接器

这不是 c++ 标准的一部分，但它是日常工具使用的一部分

链接器告诉您您未能为它提供目标代码~~你的类成员函数~~温索克图书馆

该目标代码由库文件提供，在 Visual C++ 中通常具有文件扩展名“.lib”

* * *

一般来说，当你遇到一个神秘的错误时，只需在文档中**查找错误号即可**

在 Visual Studio 中，就像按 F1 键一样简单

# ios - 在 prepareForSegue 上为 Popover Segue 传递数据：iOS 5 中的奇怪行为

> ID：15062657
> 
> 赞同：2
> 
> 时间：2013-02-25T08:14:53.287
> 
> 标签：ios, ipad, ios5, uipopovercontroller, uistoryboardsegue

在 iOS 5 中将数据传递给 popover 时，我注意到一些奇怪的行为。 Popovers`viewDidLoad`方法在调用之前`prepareForSegue`调用：

在 Storyboard 中，segue 连接到的按钮`FirstViewController`，`PopoverViewController`该按钮嵌入在导航控制器中。

为了测试，记录了两种方法：

```
/* FirstViewController.m */
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showPopover"]) {
        NSLog(@"FirstViewController: prepareForSegue");
        UINavigationController *navigationController = segue.destinationViewController;
        PopoverViewController *popoverVC = (PopoverViewController *)navigationController.topViewController;
        popoverVC.myProperty = @"Data to be passed";
    }
} 
```

在另一个 ViewController 中：

```
/* PopoverViewController.m */
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"PopoverViewController: viewDidLoad");
} 
```

在 iOS 6 下，行为符合预期：

```
2013-02-25 09:03:53.747 FirstViewController: prepareForSegue
2013-02-25 09:03:53.751 PopoverViewController: viewDidLoad 
```

在 iOS 5`viewDidLoad`下`PopoverViewController`被调用过`prepareForSegue`：

```
2013-02-25 09:05:28.723 PopoverViewController: viewDidLoad
2013-02-25 09:05:28.726 FirstViewController: prepareForSegue 
```

这很奇怪，并且很难将数据传递给可用于`viewDidLoad`. 有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T17:04:52.543

我现在使用该`viewWillAppear:`方法而不是`viewDidLoad`. 我认为无论如何这是配置视图的更好方法（因为视图可能已经加载并且应该在每次出现时配置视图）。

该`viewWillAppear:`方法`prepareForSegue`在 iOS 5 和 iOS 6 之后加载。

但是，对于那些需要`viewDidLoad`tkanzakic 建议的解决方案的人来说，那是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:22:16.037

为您的属性创建一个自定义设置器并从那里执行您需要的操作，我用这种方式执行此操作：

```
- (void)setCity:(GLQCity *)city    
{
    if (_city != city) {
        _city = city;

        [self configureView];
    }
}

- (void)configureView
{
    if (self.city) {
        ...
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    ...
    [self configureView];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T16:01:53.360

我对 iOS 5 和 6 之间的区别一无所知，但我过去也遇到过类似的困惑。如果您遵循一般经验法则：

1.  在目标 VC 的 viewDidLoad 之前调用 prepareForSegue
2.  viewDidLoad 仅在加载所有插座后调用
3.  因此，不要尝试在源 VC 的 prepareForSegue 中引用任何目标 VC 的出口。

然后，您自然会找到任一解决方案 - 实施 viewDidAppear 与 viewDidLoad，或仅设置目标 VC 的属性与触摸其任何出口。

关于 prepareForSegue 的另一个教训是避免冗余处理。例如，如果您已经通过情节提要将 tableView 单元格连接到 VC，如果您尝试同时处理 tableView:didSelectRowAtIndexPath 和 prepareForSegue，您可能会遇到类似的竞争条件。可以通过使用手动 segue 或放弃在 didSelectRowAtIndexPath 处的任何处理来避免这种情况。

# html - 仅删除一侧的边框以结束 （保持分割边界）

> ID：15062658
> 
> 赞同：0
> 
> 时间：2013-02-25T08:14:56.633
> 
> 标签：html, css

```
#order {
    font-family: HelveticaLTStd-Light;
    font-size:13;
    position: absolute;
    right:218;
    top:-5;
}

    #order ul li {
        float:left;
        padding: 5px;
        border-right: 1px solid;
    }

    <div id="order">
    <ul>
        <li>Order</li>
        <li>Account</li>
        <li>Login</li>
    </ul>
    </div> 
```

我打算删除登录旁边的边框，中间的两个将保留，但我找不到答案请帮忙？:)

订购 | 帐户 | 登录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:18:56.940

您可以使用伪类 :first-child 完全没有边框，其余的有左边框，有效地只显示垂直边框之间

*   元素。

    ```
     #order ul li:first-child {
        float:left;
        padding: 5px;
        border: none;
    }

    #order ul li {
        float:left;
        padding: 5px;
        border-left: 1px solid;
    } 
    ```

    还有一个要展示的小提琴

    [http://jsfiddle.net/AJW2a/](http://jsfiddle.net/AJW2a/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:19:20.780

给它一个类，然后为该类分配一个无右边框。一探究竟：

HTML：

```
<div id="order">
<ul>
    <li>Order</li>
    <li>Account</li>
    <li class="noRight">Login</li>
</ul>
</div> 
```

CSS：

```
#order {
    font-family: HelveticaLTStd-Light;
    font-size:13;
    position: absolute;
    right:218;
    top:-5;
}

#order ul li {
    float:left;
    padding: 5px;
    border-right: 1px solid;
}

#order ul li.noRight {
    border-right:0;
} 
```

这是给你的[JSFiddle](http://jsfiddle.net/qvCCK/)。

# c# - 使用 ContextMenu 绑定 WPF 元素

> ID：15062661
> 
> 赞同：0
> 
> 时间：2013-02-25T08:15:11.877
> 
> 标签：c#, wpf, xaml

在 WPF 中，我有以下结构：

`UserControl`> `Grid`> `TabControl`> `DataGrid`>`ContextMenu`

我想要我的`DataContext`和我`ContextMenu`的一样`Grid`。这就是我目前正在尝试的方式：

```
<ContextMenu Name="contextMenu" DataContext="{Binding ElementName=MainGrid, Path=DataContext}"> 
```

但我收到以下错误：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=MainGrid'. BindingExpression:Path=DataContext; DataItem=null; target element is 'ContextMenu' (Name='contextMenu'); target property is 'DataContext' (type 'Object') 
```

我需要这样做，因为 的`DataContext`与`DataGrid`“MainGrid”不同，`ContextMenu`而`DataGrid`.

谁能给我一些指导，因为我认为这是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:26:52.263

我觉得这不是必需的。在父级设置的 DataContext 已经可供子级使用。如果需要，您可以覆盖。但在您的情况下，您想使用相同的 Datacontext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:34:53.053

通常，您会将属性绑定到您的特定 DataContext，而不是将 DataContext 本身绑定到另一个 DataContext。但就您而言，这应该会有所帮助：

```
DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Grid}}, Path=DataContext}" 
```

# c++ - 找不到 libtoolize 和 glibtoolize

> ID：15062667
> 
> 赞同：23
> 
> 时间：2013-02-25T08:15:32.327
> 
> 标签：c++, linux, ssh, compilation, libssh2

我正在尝试编译一个 .cpp 文件，但我必须安装 libssh2。我已经从 libssh2.org 下载了包，当我输入： ./buildconf 我得到：

**libtoolize 和 glibtoolize 都找不到！**

我不知道该怎么做，我已包含在头文件 libssh2.h ( #include ) 中，并且该文件确实存在于我拥有我正在尝试编译的源文件的同一文件夹中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-03-12T17:58:58.533

它由软件包 libtool 提供。

在 Ubuntu 上，您只需

```
sudo apt-get install libtool 
```

另请参阅[http://manpages.ubuntu.com/manpages/dapper/man1/libtoolize.1.html](http://manpages.ubuntu.com/manpages/dapper/man1/libtoolize.1.html)

# objective-c - 在后台显示特定视图

> ID：15062669
> 
> 赞同：0
> 
> 时间：2013-02-25T08:15:38.293
> 
> 标签：objective-c

出于安全目的，我想在应用程序后台运行后显示用户 ID/密码视图。

我应该如何实施？我应该使用`- (void)applicationDidEnterBackground:(UIApplication *)application`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:40:41.573

我不知道安全原因，但正如我在两者中测试的那样，
`- (void)applicationWillResignActive:(UIApplication *)application`并且
`- (void)applicationDidEnterBackground:(UIApplication *)application` 这些都不能在应用程序期间显示 UIComponent 已被辞职。可能是本地通知可以帮助您解决此问题，但这些也无法完全按照您的意愿行事。

# javascript - jQuery 中的 parentsUntil() 使用相反的顺序？

> ID：15062670
> 
> 赞同：3
> 
> 时间：2013-02-25T08:15:45.280
> 
> 标签：javascript, jquery

我有这个 html 结构：

```
<body>
  <a>
    <b>
      <c>
        <d>
        </d>
      </c>
    </b>
  </a>
</body> 
```

我使用`<d>`元素作为开始的第一个节点。

问题 ：

```
 var s= $("d").parentsUntil("body").andSelf().map(function(){
    return this.tagName;
  }).get(); 
```

它应该从底部和顶部开始，这意味着`s`数组应该看起来像`d,c,b,a`.

但它显然看起来像：`["A", "B", "C", "D"]`

这是为什么 ？

[**杰宾**](http://jsbin.com/ivapox/2/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:25:55.797

`.andSelf()`导致 jQuery 重新排序数组。

你可以试试 ：

```
 var s= $("d").parentsUntil("body").map(function(){
    return this.tagName;
  }).get(); 
```

此代码的输出如下所示`["C", "B","A" ]`：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T08:33:17.450

如果您查看`addBack's`代码（它`andSelf`是别名），您会看到：

```
add: function( selector, context ) {
    var set = typeof selector === "string" ?
            jQuery( selector, context ) :
            jQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),
        all = jQuery.merge( this.get(), set );

    return this.pushStack( jQuery.unique(all) );
},

addBack: function( selector ) {
    return this.add( selector == null ?
        this.prevObject : this.prevObject.filter(selector)
    );
} 
```

所以你看到它调用`unique`.

通过进一步观察，你会看到

```
jQuery.unique = Sizzle.uniqueSort; 
```

和

```
Sizzle.uniqueSort = function( results ) {
    var elem,
        duplicates = [],
        i = 1,
        j = 0;

    // Unless we *know* we can detect duplicates, assume their presence
    hasDuplicate = !support.detectDuplicates;
    results.sort( sortOrder );

    if ( hasDuplicate ) {
        for ( ; (elem = results[i]); i++ ) {
            if ( elem === results[ i - 1 ] ) {
                j = duplicates.push( i );
            }
        }
        while ( j-- ) {
            results.splice( duplicates[ j ], 1 );
        }
    }

    return results;
}; 
```

因此，`addBack`对集合进行排序，因为它确保添加的元素还没有在里面。

# javascript - 如何在facebook的朋友消息文件夹/收件箱中发送消息？

> ID：15062671
> 
> 赞同：0
> 
> 时间：2013-02-25T08:15:53.267
> 
> 标签：javascript, facebook, facebook-graph-api

我想使用 javascript 或 php sdk 从我的应用程序向 facebook 朋友的收件箱/消息文件夹发送消息我该怎么做？

之前，我们用这个

```
 FB.api('me/feed', 'post' ...... 
```

从我的应用程序中在朋友墙上发帖的方法，但现在该方法已从 2013 年 2 月删除，我也尝试发送邮件至

```
 FACEBOOK_FRIENDS_USERNAME@facebook.com 
```

但是这种方法也不是一直有效，有时消息会在消息中发送到其他文件夹，但不是一直有效，谁能告诉我为什么会这样？我重新检查了我的代码，用户名与我发送邮件的位置是正确的。

我也试过

```
 FB.ui({method : 'send', ..... 
```

方法，但它会打开一个用于发送消息的对话框，然后我们必须选择多个我不想要的朋友，我想直接从我的应用程序向用户的 Facebook 朋友发送消息。

如果有其他方法可以实现这一点，请帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:41:14.493

您不能向用户的朋友发送消息，您只能通过应用程序阅读用户的消息，请查看此[链接](http://facebook.stackoverflow.com/questions/2943297/how-send-message-facebook-friend-through-graph-api-using-accessstoken)。但是，如果您仍然需要在朋友的墙上发帖或向用户的朋友发送消息的功能，您可以使用 Facebook JavaScript SDK 的**share.stream**方法

```
<script>
  var share = {
      method: 'stream.share',
      u: 'http://www.fbrell.com/'
  };

 FB.ui(share, Log.info.bind('stream.share callback'));
</script> 
```

或者您可以使用[**发送对话框**](https://developers.facebook.com/docs/reference/dialogs/send/)

# php - 有没有办法为 php 使用分组单选按钮？

> ID：15062672
> 
> 赞同：3
> 
> 时间：2013-02-25T08:16:06.360
> 
> 标签：php, forms, if-statement, radio-group

我想知道是否假设我有 4 个单选按钮，名为红色蓝色黄色和绿色，但如果没有一个未选中并且有人提交表单，假设将回显没有选中的单选按钮。如果我使用 if 语句，我只能想到使用类似的东西

```
if(empty($_GET(["red"])) || empty($_GET(["blue"])) || empty($_GET(["green"])) ||empty($_GET(["yellow"])))
{
echo "blah";
} 
```

但是，如果我想再添加两个收音机，或者假设我有一个名称字段，那么 if 语句真的很长……这将是一个很长的 if 语句……

有没有办法将它们组合在一起并使它们更短？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T08:19:40.940

如果您为单选按钮指定相同的名称，则默认情况下会对其进行分组

```
<input type="radio" name="group" value="1"> Option 1  
<input type="radio" name="group" value="2"> Option 2 
```

选定的选项然后将传递给 php in`$_POST['group']`

# android - for循环中的Android线程和getText（）不起作用？

> ID：15062676
> 
> 赞同：0
> 
> 时间：2013-02-25T08:16:13.893
> 
> 标签：android, multithreading, textview, thread-sleep

我想在 textView 中一次打印一个单词，然后使用 sleep 和下一个单词。但它 int'n 工作.. 需要帮助。

```
 String s = MainActivity.check;// String check defined in mainactivity this is second
    String[] words = s.split(" ");
    EditText et = (EditText) findViewById(R.id.editText2);

    for(int i=0;i<words.length; i++ ){
        et.setText(words[i]);
        Thread.sleep(1000);
    } 
```

以上仅输出 textView 中的最后一个单词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:18:37.727

您在每次迭代中设置新的文本。试试 et.setText(et.getText() + words[i]); 这需要 TextView 中已经存在的文本，然后附加新单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:34:01.183

好的，这是你的答案：

```
int i = 0;
Handler handler = new Handler();

        handler.postDelayed(new Runnable() {
            @Override
            public void run() {
                textView.setText(""+i);
                i++;
                handler.postDelayed(this, 1000);
            }
        }, 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:20:54.603

尝试使用处理程序：

```
for(int i=0;i<words.length; i++ ){
   final int j = i;
   String text = words[j];
   new Handler().postDelayed(new Runnable() {
        public void run() {
            et.setText(text);
        }
    }, 1000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T08:21:19.070

Android 应用程序中 UI 的任何更新都必须发生在 UI 线程中。如果您生成一个线程在后台执行工作，您必须在触摸视图之前将结果编组回 UI 线程。

您必须使用 Handler 类来执行此操作...

```
public EditText et;
Handler handler;
oncreate(..) {
    setContentView(R.layout.main);
    et = new EditText(context);
    Thread t =new Thread(){
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    et.setText("test");
                }
            });
        }
    }};
    t.start();
} 
```

# jquery - 有没有更好的方法将 jquery json 数据放入 html 表中

> ID：15062685
> 
> 赞同：1
> 
> 时间：2013-02-25T08:16:32.710
> 
> 标签：jquery, html, json

目前我有这个代码。

1.  它从 url 获取 json
2.  对于第一级，我将标题列放在左侧，将数据放在右侧，例如学生信息
3.  对于其他嵌套数据，例如 student.subjects，我使用标题表单键和来自 vals 的数据制作表格

    ```
    $.getJSON('api/data.json', function(data) {
        var student = [];
        $.each(data, function(key, val) {
        student.push('<tr><td>' +key+'</td><td>' + val + '</td></tr>');
        });

        var subjects = [];
        subject.push('<table><tr>');

        $.each(data.subject[0], function (key, val) {
            decision.push('<th>' +key+'</th>');
        });

        subject.push('</tr><tr>');

        $.each(data.subject, function () {
            mydata = this   
            $.each(mydata, function (key, val) {
                    subject.push('<td>'+val+'</td>');
                });

                subject.push('</tr><tr>');
        });

        subject.push('</tr></table>');

        $(student.join('')).appendTo('table#student_table');
        $(subject.join('')).appendTo('table#subject_table');

    }); 
    ```

是否有任何通用方式可以自动检测类似`data.subjects`而不是硬编码，以便如果有主题数组，那么它会在其下方添加新的表格行。

这段代码看起来很脏，任何更好的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:56:04.663

如果您发现自己在 javascript 中混合了过多的 HTML 标记，那么您可能需要一个模板解决方案。[underscore.js](http://underscorejs.org/)有一个`_.template()`函数可以为你解决这个问题：

# javascript

```
$.getJSON('api/data.json', function(data) {
    var compiled_student = _.template($("template-student-row".html(), {data:data}));
    $("#student_table").append(compiled_student);

    var compiled_subject = _.template($("template-subject-row".html(), {keys: Object.keys(data.subject[0]), subjects: data.subject)}));
    $("#subject_table").append(compiled_subject);

}); 
```

# html

```
<script id='template-student-row' type='text/template'>
<% _.each(data, function(k,v){ %>
    <tr>
        <td><%= k %></td>
        <td><%= v %></td>
    </tr>
<% }); %>
</script>

<script id='template-subject-row' type='text/template'>
    <tr>
        <% _.each(keys, function(k){ %> <th><%= k %></th> <% }); %>
    </tr>
    <tr>
        <% _.each(subjects, function(s){ %> <td><%= s %></td> <% }); %>
    </tr>
</script>

<table id='student_table'></table>
<table id='subject_table'></table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:20:12.910

我不喜欢混合标记和代码。我建议使用模板引擎来呈现数据。还有许多其他可用的，但一种常见的模板引擎是[jQuery 模板](https://github.com/jquery/jquery-tmpl)。

要将其应用于您的问题，您可以执行以下操作：

```
var studentRow = "<tr><td>${key}</td><td>${val}</td></tr>";

// Compile the markup as a named template
$.template("studentTable", studentRow);

$.getJSON('api/data.json', function(data) {
    $.tmpl("studentTable", data).appendTo("table#student_table");
} 
```

但是您需要更改标记`#student_table`以包含表格的开头和结尾。

# python - 从命令行执行 python 脚本：导入错误

> ID：15062686
> 
> 赞同：2
> 
> 时间：2013-02-25T08:16:34.620
> 
> 标签：python, eclipse, command-line, import, pydev

我用 Eclipse 在 Python 中编写了一个小脚本，它在从 Eclipse 执行时可以工作。但它不适用于命令行：

```
>python test.py argument1 argument2
from src import Tests, ImportError: No module named src 
```

该脚本存储在以下文件夹中：

```
ScriptFolder
.input
.report
.src
..test.py
..Tests
...Test1.py
...Test2.py
..TestUtils
...FileUtils.py 
```

这就是我在 test.py 中进行导入的方式：

```
from src import Tests
from TestUtils import FileUtils 
```

关于**init.py**文件，与test.py共享文件夹的是空的，进入Tests文件夹的内容如下：

```
import Test1
import Test2 
```

TestUtils 中的**init .py 文件包含以下内容：**

```
import FileUtils 
```

问题是，如果我将行更改`from src import Tests`为只是`import Tests`我在 Eclipse 中遇到错误：`Unresolved imports: Tests. found at src.Tests`

如何使它适用于 Eclipse 和命令行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:24:48.767

`sys.path.append(path_to_src_directory)`

这将为 python 查找模块的默认路径添加一个路径。由于目前 python 不知道您的 src 目录的路径，因此会`No module named src`出错。此外，您的 src 目录似乎没有`__init__.py`文件。

# visual-studio-2012 - Visual Studio 2012 添加新的类缺少模板

> ID：15062688
> 
> 赞同：0
> 
> 时间：2013-02-25T08:16:48.310
> 
> 标签：visual-studio-2012

我刚刚将 VS2012 Ultimate 与 VS2010 并排安装，似乎标准模板已损坏。我无法添加类或控制台应用程序。

文件 > 新建 > 文件对话框包含“Visual C# 类”模板

但右键单击项目 > 添加 > 类对话框不包含“Visual C# 类”模板

即使我更改框架版本和左过滤器，文件 > 新项目也只包含 MVC4 而不是控制台应用程序之类的东西。

编辑：这仅在安装更新 1 后发生。我们已尝试重新安装、修复、删除模板缓存和重新安装模板。我们目前正在考虑在没有更新 1 的情况下工作，但似乎没有办法只卸载更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T14:49:41.763

提供的 ISO 损坏，从 msdn 尝试了另一个，现在一切正常。

# mysql - 尝试多次插入并获取失败的 ID 列表

> ID：15062696
> 
> 赞同：2
> 
> 时间：2013-02-25T08:17:40.890
> 
> 标签：mysql, sql

在 MySQL 中，您可以在表中插入多行并获取成功或失败行的列表吗？

或者您必须在自己的语句中单独插入每一行以确定插入是否成功？

（是否可以批量提交多个插入，但每个插入的成功在任何其他数据库中都单独说明？例如 PostgreSQL？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:02:53.283

在进行批量插入时，无法找出哪些行失败。通常，如果您正在执行多个插入并且其中一个因任何原因而失败，则查询通常会失败。

但是，您可以采取一些选项来确保查询成功。

1）使用`REPLACE INTO`而不是`INSERT INTO`。如果主键已经存在，这将导致 MySQL 覆盖现有行。

2)`INSERT IGNORE INTO`用于跳过现有行。缺点是你不知道哪些行被跳过了。

3）使用`INSERT INTO ... ON DUPLICATE KEY UPDATE ...`。这将允许您更新已存在的行的一个、两个或所有字段。如果您有一个空字段，您也可以将其用作伪故障指示器。

```
// clear out failures from previous runs
UPDATE table SET failures = 0;

// insert the row if we can, otherwise record the failure and move on without updating the row
INSERT INTO table
    (id, name) VALUES 
    (1, 'John'),
    (2, 'Steve'),
    ...
    (500, 'Tim')
    ON DUPLICATE KEY UPDATE failures = failures + 1;

// check failures
SELECT id, name, failures FROM table; 
```

# java - 无法安装maven

> ID：15062697
> 
> 赞同：2
> 
> 时间：2013-02-25T08:17:46.097
> 
> 标签：java, windows, jakarta-ee, maven

我正确设置了所有环境变量，但出现了一个奇怪的错误，谷歌上的类名不匹配（这只是胡言乱语）

所以我添加了 2 个必需的环境变量：

```
JAVA_HOME   C:\programs\Java\jdk1.6.0_41
M2_HOME     C:\dev\apache-maven-3.0.4

And added this at the end of the variable PATH
;%JAVA_HOME%\bin;%M2_HOME%\bin 
```

当运行 mvn --version 我得到：

```
Exception in thread "main" java.lang.NoClassDefFoundError: ûXX
Caused by: java.lang.ClassNotFoundException: ûXX
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: ÔÇôXX.  Program will exit. 
```

奇怪的是，我在两台完全不同的计算机上得到完全相同的东西。我尝试使用已有的旧文件和新下载的文件。

我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T13:56:10.823

这适用于我的带有 Win7 64x 操作系统的 PC：

```
JAVA_HOME  c:\Program Files (x86)\Java\jdk1.6.0_21
J2_HOME    c:\Program Files (x86)\Java\jdk1.6.0_21\bin
M2_HOME    c:\Program Files (x86)\apache-maven-3.1.0
PATH       ...;%M2_HOME%\bin;%J2_HOME% 
```

有时，当我们想要获得没有空格的 PATH 时，我们可以使用这个技巧：

```
'Progra~1' instead of 'Program Files'
'Progra~2' instead of 'Program Files (x86)'
 and etc 
```

这是旧的 DOS 文件名样式：8+3 - 其中 8 个字符表示名称，3 个字符表示扩展名（如果存在）

这适用于旧的 Win 机器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T19:43:48.177

当通过 maven 路径尝试进入 maven 包并获取路径时，我在 maven 包中有一个 maven 包，所以我的路径是 C:\apache-maven-3.6.0\apache-maven-3.6.0。它在我的电脑上工作。

# sonarqube - 声纳跑步者无法添加相同的度量

> ID：15062710
> 
> 赞同：2
> 
> 时间：2013-02-25T08:18:48.020
> 
> 标签：sonarqube, runner

你好，我之前通过声纳运行器进行代码分析我收到以下错误。当我运行**声纳**运行器的命令时有什么 帮助吗？？？

```
SonarException: Can not add twice the same measure on org.sonar.api.resources.Project
Exception in thread "main" org.sonar.runner.RunnerException: org.sonar.api.utils.SonarException: Can not add twice the same measure on org.sonar.api.resources.Project@549154f9[id=22,key=DistanceConver
ter-Net:DistanceConverter,qualifier=BRC]: org.sonar.api.measures.Measure@70d1a353[id=<null>,metricKey=profile,metric=Metric[id=144,formula=<null>,key=profile,description=Selected quality profile,type=
DATA,direction=0,domain=General,name=Profile,qualitative=false,userManaged=false,enabled=true,origin=JAV,worstValue=<null>,bestValue=<null>,optimizedBestValue=false,hidden=false,deleteHistoricalData=f
alse],value=5.0,data=Sonar way,description=<null>,alertStatus=<null>,alertText=<null>,tendency=<null>,date=<null>,variation1=<null>,variation2=<null>,variation3=<null>,variation4=<null>,variation5=<nu
ll>,url=<null>,characteristic=<null>,personId=<null>,persistenceMode=FULL]
        at org.sonar.runner.Runner.delegateExecution(Runner.java:288)
        at org.sonar.runner.Runner.execute(Runner.java:151) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T15:52:07.697

当您有 2 个或更多同名项目时会发生这种情况。重命名您的项目以具有不同的名称会有所帮助。

在您的情况下，Sonar 特别指出项目名称`Net:DistanceConverter`令人困惑。

# jquery - Autosize 敲除自定义绑定加载时自动调整大小

> ID：15062712
> 
> 赞同：0
> 
> 时间：2013-02-25T08:18:53.243
> 
> 标签：jquery, knockout.js, autosize

我有一个用于[jquery autosize的自定义](http://www.jacklmoore.com/autosize)[敲除](http://knockoutjs.com/)绑定，我希望在页面加载时自动调整大小。

这是问题的一个[小提琴](http://jsfiddle.net/armandvdwalt/3p9bj/1/)

代码示例：

```
 ko.bindingHandlers.autogrow = {

 init: function (element, valueAccessor, allBindingsAccessor) {

     ko.utils.registerEventHandler(element, 'focusout', function () {
         var observable = valueAccessor();
         observable($(element).val());
     });

     ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
         $(element).data('autosize').remove();
     });

     $(element).autosize({ append: "\n" });

     $(element).focus(function () {
         $(element).trigger('autosize');
     });
 },

 update: function (element, valueAccessor) {
     var value = ko.utils.unwrapObservable(valueAccessor());
     $(element).val(value);
     $(element).trigger("autosize");
   }
};

var vm = {};
vm.Data = ko.observable("This is a lot of text and has to display correctly");

ko.applyBindings(vm); 
```

html示例：

```
<textarea id="autogrow" class="text-nm span2" data-bind="autogrow: Data"></textarea> 
```

发生的情况是我有很多文本要显示在文本区域中，但每次的数量都不同，所以我没有设置的数量可以显示我事先知道的。我想要做的是在应用了淘汰赛绑定之后，我想触发 autosize 插件的 autosize 事件，但我不知道何时何地。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:05:57.810

我可能误解了这个问题，但这至少在 FF 中有效

[http://jsfiddle.net/3p9bj/13/](http://jsfiddle.net/3p9bj/13/)

我删除了更新功能，让 autosize 在引擎盖下做它的事情

我还使用值绑定来更新值

```
ko.applyBindingsToNode(element, { value: valueAccessor() }); 
```

# java - 春季注射类时的NPE

> ID：15062717
> 
> 赞同：1
> 
> 时间：2013-02-25T08:19:10.560
> 
> 标签：java, spring

我在注射课时遇到问题。

在我的配置中，我有一个设置登录级别的类，然后是一个设置级别的变量：

```
 <bean id="config" class="..." init-method="init">   
        <property name="log4jConfig" ref="log4j" />
        <property name="levelLogging" value="9" />
    </bean> 
```

和代码：

```
public void setlevelLogging(Integer level) {

    if (level == null) {
        set0();
    } else {
        switch (level) {
        case 0:
            set0();
            break;
        case 9:
            set9();
        }
    }
    this.level = level;

}

private void set0() {
    log4jConfig.setLoggerLevel("org.springframework.ws.server.MessageTracing", "OFF");
    log4jConfig.setLoggerLevel("org.app", "INFO");
    log4jConfig.setLoggerLevel("org.springframework.ws.client.MessageTracing", "OFF");
}    

public void setLog4jConfig(Log4jConfigJmx log4jConfig) {
    this.log4jConfig = log4jConfig;
} 
```

当我想运行这段代码时，我得到了 NPE，因为`setlevelLogging`调用时 log4jConfig 为空。

我该如何解决这个异常？

现在我从属性中排除这个类并在 configClass 中创建新类：

```
Log4jConfigJmx log4jConfig = new Log4jConfigJmx() 
```

但我不认为这是个好主意

编辑：

我尝试下面的示例，但我仍然有一些问题：

首先我得到了这个例外：

```
[ERROR] java.lang.IllegalArgumentException: Superclass has no null constructors but no arguments were given 
```

因为我使用的是事务性和 AOP，所以我将默认构造函数添加到类中，所以我有两个：

```
 public Config() {
    }

    public Config(Log4jConfigJmx log4jConfig, Integer level) {
this.log4jConfig = log4jConfig;
setlevelLoggin(level);
    } 
```

设置级别记录...

```
 <bean id="config" class="..." init-method="init">   
      <constructor-arg index="0" ref="log4j" />
      <constructor-arg index="1" value="9" />
 </bean> 
```

但现在我还有 NPE

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:22:03.850

您应该将方法`setLoggingLevel`中的代码放在 init 方法中。

只有离开`this.level = level`，所以它是一个简单的二传手。

在设置所有属性后调用 init 方法。

----评论后编辑----

在您发表评论后，我建议您使用构造函数：

```
public Class(Integer level, Log4jConfigJmx log4jConfig){
   this.log4jConfig = log4jConfig;
   setLevelLogging(level);
}

<bean id="config" class="..." init-method="init"> 
   <constructor-arg index="0" value="9"/>
   <constructor-arg index="1" ref="log4j"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:08:10.180

您可以像这样使用构造函数参数：

```
<bean id="config" class="..." init-method="init">   
    <constructor-arg><ref bean="anotherExampleBean"/></constructor-arg>
    <constructor-arg type="int"><value>9</value></constructor-arg>
</bean> 
```

然后你的构造函数可以初始化这两个变量，同时保持你的 setter 方法。

例如

```
public MyClass(Log4jConfigJmx log4jConfig, Integer level) {
    this.log4jConfig = log4jConfig;
    this.setLevelLogging(level);
} 
```

* * *

您也可以尝试制作 log4jConfig `autowired`。

将您的 bean 配置更改回：

```
<bean id="config" class="..." init-method="init">   
    <property name="levelLogging" value="9" />
</bean> 
```

然后简单地在你的类中注释一个字段来自动装配：

```
@Autowired
private Log4jConfigJmx log4jConfig; 
```

在 spring 上下文的顶部添加它以启用注释：

```
<context:annotation-config /> 
```

# c - 在函数 C 中分配内存二维数组

> ID：15062718
> 
> 赞同：18
> 
> 时间：2013-02-25T08:19:14.980
> 
> 标签：c, arrays, function, 2d, allocation

如何在函数中为二维数组分配动态内存？我试过这样：

```
int main()
{
  int m=4,n=3;
  int** arr;
  allocate_mem(&arr,n,m);
}

void allocate_mem(int*** arr,int n, int m)
{
  *arr=(int**)malloc(n*sizeof(int*));
  for(int i=0;i<n;i++)
    *arr[i]=(int*)malloc(m*sizeof(int));
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-25T08:21:56.107

您的代码是错误的，`*arr[i]=(int*)malloc(m*sizeof(int));`因为运算符的优先[级](http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm)`[]`高于`*`尊重运算符：在表达式`*arr[i]`中，首先`arr[i]`评估然后`*`应用。您需要的是相反的（取消引用`arr`，然后应用`[]`）。

像这样使用括号：`(*arr)[i]`覆盖运算符优先级。现在，您的代码应如下所示：

```
void allocate_mem(int*** arr, int n, int m)
{
  *arr = (int**)malloc(n*sizeof(int*));
  for(int i=0; i<n; i++)
    (*arr)[i] = (int*)malloc(m*sizeof(int));
} 
```

要进一步了解上述代码中发生的情况，请阅读[此答案](https://stackoverflow.com/questions/19240540/dynamically-allocating-array-explain/19240932#19240932)。

重要的是，一旦你完成了动态分配的内存，你总是显式地释放它。要释放上述函数分配的内存，您应该这样做：

```
void deallocate_mem(int*** arr, int n){
    for (int i = 0; i < n; i++)
        free((*arr)[i]);
    free(*arr); 
} 
```

此外，创建 2D 数组的更好方法是使用单个函数调用[分配连续内存，如下所示：](https://stackoverflow.com/questions/17477234/difference-b-w-allocating-memory-to-2d-array-in-1-go-or-row-by-row)`malloc()`

```
int* allocate_mem(int*** arr, int n, int m)
{
  *arr = (int**)malloc(n * sizeof(int*));
  int *arr_data = malloc( n * m * sizeof(int));
  for(int i=0; i<n; i++)
     (*arr)[i] = arr_data + i * m ;
  return arr_data; //free point
} 
```

要释放此内存：

```
void deallocate_mem(int*** arr, int* arr_data){
    free(arr_data);
    free(*arr);
} 
```

请注意，在第二种技术中 malloc 仅被调用两次，因此在释放代码中 free 仅被调用两次，而不是在循环中调用它。所以这个技术应该更好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-20T01:13:47.043

考虑一下：只是单一分配

```
int** allocate2D(int m, int n)
{
    int **a = (int **)malloc(m * sizeof(int *) + (m * n * sizeof(int)));

    int *mem = (int *)(a + m);

    for(int i = 0; i < m; i++)
    {
        a[i] = mem + (i * n);
    }

    return a;
} 
```

免费：

```
free(a); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T12:36:09.963

如果您的数组不需要调整大小（好吧，您可以，但 il 会更复杂一点），有一种更简单/更有效的方法可以在 C 中构建 2D 数组。

看看[http://c-faq.com/aryptr/dynmuldimary.html](http://c-faq.com/aryptr/dynmuldimary.html)。

第二种方法（对于名为 array2 的数组）非常简单，不那么痛苦（尝试添加对 malloc 的返回值的测试），并且更有效。

我刚刚对它进行了基准测试，对于 200x100 数组，分配和释放 100000 次：

*   方法一：1.8s
*   方法二：47ms

并且数组中的数据将更加连续，这可能会加快速度（您可能会获得一些更有效的技术来复制、重置......以这种方式分配的数组）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-19T17:25:15.637

与其将内存分配在许多不同的块中，不如将其分配在连续的内存块中。请执行下列操作：

```
int** my2DAllocation(int rows,int columns)
{
   int i;
   int header= rows *sizeof(int *);
   int data=rows*cols*sizeof(int);
   int ** rowptr=(int **)malloc(header+data);
   if(rowptr==NULL)
   {
      return NULL:
   }
   int * buf=(int*)(rowptr+rows);
   for(i=0;i<rows;i++)
   {
      rowptr[i]=buf+i*cols;
   } 
   return rowptr;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T09:22:52.757

这是为数组分配空间的一种不必要的复杂方式。考虑这个成语：

```
int main(void) {
    size_t m = 4, n = 3;
    int (*array)[m];
    array = malloc(n * sizeof *array);
    free(array);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-26T16:57:31.747

我尝试使用以下代码将内存分配给二维数组。

```
 #include<stdio.h>
    #include<malloc.h>
    void main(void)
    {
    int **p;//double pointer holding a 2d array
    int i,j;
    for(i=0;i<3;i++)
    {
    p=(int**)(malloc(sizeof(int*)));//memory allocation for double pointer
    for(j=(3*i+1);j<(3*i+4);j++)
    {
    *p = (int*)(malloc(sizeof(int)));//memory allocation for pointer holding integer array
    **p = j;                  
    printf(" %d",**p);//print integers in a row 
    printf("\n");
    p++;
    }
    }
    } 
```

上述代码的输出是：-

1 2 3

4 5 6

7 8 9

为了从指针的角度理解二维数组，我们需要了解它将如何在内存中分配，它应该是这样的：-

```
 1    2    3
    1000 -->   100  104  108

                4    5    6
    1004 -->   200  204  208

                7    8    9
    1008 -->   300  304  308 
```

由上可知，当我们为双指针指针p分配内存时，它指向的是一个整数数组，所以在这个例子中，我们看到0x1000就是指针p。

该指针指向整数指针 *p，它是整数数组，当内存在内部 for 循环内分配时，在第一次迭代期间，当我们分配 **p = j 时，指针是指向整数值 1 的 0x100。同样，它将在循环的下一次迭代中指向 2 和 3。

在外循环的下一次迭代之前，双指针递增，在下一次迭代内，如本例所示，指针现在位于 0x1004 并指向整数指针，它是整数数组 4,5,6 和类似用于循环中的下一次迭代。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-08-24T11:20:16.793

试试下面的代码：

```
 void allocate_mem(int*** arr,int n, int m)
{
  *arr=(int**)malloc(n*sizeof(int*));
  for(int i=0;i<n;i++)
    *(arr+i)=(int*)malloc(m*sizeof(int));
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-01-10T16:34:46.913

2d Array 使用 malloc 动态排列：

```
int row = 4;
int column = 4;
int val = 2;
// memory allocation using malloc   

int **arrM = (int**)malloc (row*sizeof(int*));

for (int i=0;i<row;i++)
{
    arrM[i] = (int*)malloc(column*sizeof(int));
    // insert the value for each field
    for (int j =0;j<column;j++,val++)
    {
      arrM[i][j]     = val;
    }
}

// De-allocation

for (int i=0;i<row;i++)
{
    free(arrM[i]);
}
free(arrM);
arrM = 0;

//
// Now using New operator:
//

int **arr = new int*[row];
int k = 1;
for (int i=0;i<row;i++)
{
    arr[i] = new int[column];
    // insert the value for each field
    for (int j =0;j<column;j++,k++)
    {
      arr[i][j]  = k;
    }
}
cout<<"array value is = "<<*(*(arr+0)+0)<<endl;
cout<<"array value is = "<<*(*(arr+3)+2)<<endl;

// Need to deallcate memory;

for (int i=0;i<row;i++)
{
delete [] arr[i];
}
delete []arr;
arr = 0; 
```

# iis-7 - IIS7 重写模块：更改规则而不重置应用程序

> ID：15062719
> 
> 赞同：1
> 
> 时间：2013-02-25T08:19:20.320
> 
> 标签：iis-7, url-rewriting, url-rewrite-module

我使用 IIS7 重写模块，所有规则都放在单独的配置文件中（不在 web.config 中）：

```
 <rewrite>
      <rules configSource="Config\Rewrite.config" />
 </rewrite> 
```

是否可以在不重置相关应用程序的情况下更改这些规则？

# android - 如何仅为一种线性/相对布局设置配置更改？

> ID：15062726
> 
> 赞同：0
> 
> 时间：2013-02-25T08:19:41.963
> 
> 标签：android, keyboard

在我的布局 xml 文件中，我有 webview 和 LinearLayout。当我为 webview 打开 softinputmethod 时，webview editText 窗口（如谷歌）取决于键盘，这很好。但是当键盘打开时，我的线性布局是如此的挤压，以至于所有的按钮看起来都很可怕。

如何设置，那个键盘可以改变webview，但不能破坏RelativeLayout？

有一些代码：

```
 <RelativeLayout
        android:id="@+id/homebar"
        android:layout_width="50dp"

        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
         >
...//there is some buttons

</RelativeLayout>
     <WebView
        android:id="@+id/wv"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"

        android:layout_toLeftOf="@+id/homebar" /> 
```

[对不起，我的英语不好]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:26:12.030

当动态视图预计在之后加载到活动中时，LinearLayout 不是处理视图的好方法。一定要使用相对布局来解决这个问题。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

</RelativeLayout> 
```

# c++ - gcc 和 sin/cos/transcendental 函数精度就像在 Windows 中一样

> ID：15062728
> 
> 赞同：0
> 
> 时间：2013-02-25T08:19:46.980
> 
> 标签：c++, gcc, floating-point

我想在 Windows 软件的 gcc/Linux 移植版本中实现完全相同的浮点结果。出于这个原因，我希望所有双精度操作都是 64 位精度的。这可以使用例如 -mpc64 或 -msse2 或 -fstore-floats 来完成（所有这些都有副作用）。然而，我无法解决的一件事是超越函数，如 sin/asin 等。文档说他们在内部期望（并且我想使用）长双精度，并且无论我做什么，它们产生的结果都与 Windows 对应物不同。

这些函数如何使用 64 位浮点精度计算结果？

更新：我错了，是 printf("%.17f") 错误地舍入了正确的双精度结果，gdb 中的 "print x" 表明数字本身是正确的。我想我需要对此提出一个不同的问题......也许关于如何使 printf 不在内部将 double 视为扩展。也许使用 stringstream 会产生预期的结果......是的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:36:24.897

我发现 printf("%.17f") 使用不正确的精度来打印结果（可能在内部扩展），当我使用 stringstream << setprecision(17) 结果是正确的。所以答案与问题并不真正相关，但至少它对我有用。

但是，如果有人提供一种使 printf 产生预期结果的方法，我会很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:09:38.657

不同的 LibM 库对基本函数使用不同的算法，因此您必须在 Windows 和 Linux 上使用相同的库才能获得完全相同的结果。我建议编译`FDLibM`它并将其与您的软件静态链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T05:32:32.627

超越函数问题的一个很好的解决方案是使用 GNU MPFR 库。但请注意，Microsoft 编译器不支持扩展精度浮点。对于 Microsoft 编译器，double 和 long double 都是 53 位精度。使用 gcc，long double 是 64 位精度。要在 Windows/linux 上获得匹配结果，您必须避免使用 long double 或避免使用 Microsoft 编译器。对于许多 Windows 项目，gcc (mingw) 的 Windows 端口运行良好。这让 Windows 项目可以使用 64 位精度的长双精度数。mingw long double 支持的一个问题是 mingw 使用 Microsoft 库进行 printf 等调用。出于这个原因，打印长双精度不能正常工作。解决此问题的方法是使用 mpfr_printf。

# dynamics-crm-2011 - CRM 2011 过滤连接查找以排除实体

> ID：15062731
> 
> 赞同：2
> 
> 时间：2013-02-25T08:19:59.780
> 
> 标签：dynamics-crm-2011

我们要求限制用户创建与联系人的连接。

因此，我正在寻找 Jscript 代码来过滤连接实体的 record2id 查找，以允许除“联系人”之外的所有实体。

有没有办法我们可以使用 Jscript 实现 thsi ？ ![在此处输入图像描述](../Images/6d4519cd70f65cf4e270f5b4f01d5a8b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:08:29.173

我不认为这种脚本会被支持（希望看到支持的脚本来做到这一点）并且坚持支持的解决方案可能是一个好主意，尤其是因为 UR12（从该列表中删除联系人的脚本可能在 IE 中工作，但不能在其他浏览器中工作，因此允许用户创建与联系人的连接）。此外，任何对 Javascript 和调试有更多了解的用户都可以绕过此类脚本，并且仍然允许创建与联系人的连接。

您是否考虑过替代解决方案，例如预验证插件？您可以验证实体并向用户抛出带有有意义消息的异常，并且无论脚本/浏览器如何都可以正常工作，并且将得到完全支持。

干杯

# c# - 使用c#插入sql

> ID：15062734
> 
> 赞同：0
> 
> 时间：2013-02-25T08:20:02.560
> 
> 标签：c#, .net, sql-server, database

此代码成功地在 SQL 数据库中插入新值，但仅在我插入常量值时。
我需要`**(?)**`以下代码中的帮助，我想在其中插入新值而不在代码中指定常量。我的意思是，我希望能够在输出窗口中输入任何随机值并将其插入 SQL 数据库。

```
private void InsertInfo()
{
    String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";

    SqlConnection con = new SqlConnection(strConnection);
    string connetionString = null;
    SqlConnection connection ;
    SqlDataAdapter adapter = new SqlDataAdapter();

    connetionString = @"Data Source=HP\SQLEXPRESS;database=MK;Integrated Security=true";
    connection = new SqlConnection(connetionString);
    string sql = "insert into record (name,marks) **values( ?))";**

    try
    {
        connection.Open();
        adapter.InsertCommand = new SqlCommand(sql, connection);
        adapter.InsertCommand.ExecuteNonQuery();
        MessageBox.Show ("Row inserted !! ");
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
}

private void insert_Click(object sender, EventArgs e)
{
    InsertInfo();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:24:06.880

这里不需要使用*适配器*；这对你没有帮助。只是：

```
var name = ...
var marks = ...
using(var conn = new SqlConnection(connectionString))
using(var cmd = conn.CreateCommand()) {
    cmd.CommandText = "insert into record (name, marks) values (@name, @marks)";
    cmd.Parameters.AddWithValue("name", name);
    cmd.Parameters.AddWithValue("marks", marks);
    conn.Open();
    cmd.ExecuteNonQuery();
} 
```

或使用“dapper”之类的工具：

```
var name = ...
var marks = ...
using(var conn = new SqlConnection(connectionString)) {
    conn.Open();
    conn.Execute("insert into record (name, marks) values (@name, @marks)",
        new {name, marks});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:34:04.173

那些 '？' 被称为参数。据我了解，您希望对插入使用参数化查询，这是一种很好的方法，因为它们可以避免 SQL 注入的机会。这 '？' 当您使用

> OLEDBConnection 和命令对象。

通常，您将使用“@”符号在查询中指定参数。不需要适配器。你刚才

```
//Bind parameters
// Open your Connection
// Execute your query
// Close connection
// return result 
```

[参数化查询来自 Rolla 的 4 Guys](http://www.4guysfromrolla.com/webtech/092601-1.2.shtml)

[MSDN：如何防止 ASP.NET 中的 SQL 注入](http://msdn.microsoft.com/en-us/library/ff648339.aspx)

# objective-c - 关于 NSUserDefaults 的问题/疑问

> ID：15062735
> 
> 赞同：6
> 
> 时间：2013-02-25T08:20:02.697
> 
> 标签：objective-c, macos, cocoa, nsuserdefaults

好的，我承认`NSUserDefaults`，作为一个特定于 Mac 的东西（过去几年我是一名 Mac 程序员），是我没有深入研究的事情之一......所以这里有一些我的问题/问题遇到过：

我知道这`NSUserDefaults`基本上是一个`NSMutableDictionary`书面形式`.plist`。

**我的问题：**

1.  鉴于我正在运行 OS X 10.7 (Lion) 并启用了沙盒，**我**的应用程序的 .plist 文件在哪里？（我都搜索过`~/Library/Preferences/com.example.myapp.plist`，`~/Library/Containers/com.example.myapp/Data/Library/Preferences/com.example.myapp.plist`但这些似乎都不有效

2.  我知道这个`.plist`文件是在应用程序第一次启动时创建的，对吗？

3.  `registerDefaults:`将在应用程序启动时使用（例如 in `awakeFromNib`）并提供立即存储在`.plist`文件中的默认值字典，并且只有在某个时候设置了不同的值时才更改，对吗？

4.  当我们设置一个特定的键值对时，该对是否会自动并立即保存到`.plist`文件中？如果是这样，我们为什么/什么时候应该使用`synchronize`？（每次设置某个值时都使用它是过度杀伤，还是应该为特殊情况保留？）

* * *

***旁注：**我希望没有人抱怨我对`osx`标签的使用。但是，我真的厌倦了看到 Cocoa Touch / iOS 相关的答案来回答我（主要是）与 OSX 相关的问题。所以，你在这里...... :-)*

* * *

**编辑：**有关该主题的一些真正有用的见解，请查看已接受的答案及其下方的评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:29:23.403

**回答 1.**主目录隐藏在 Lion 中，因此您无法输入路径（没有看到文件夹，您无法从 Finder 进入文件夹内）。您可以使用[路径查找器](http://cocoatech.com/pathfinder/)在隐藏目录中移动。

**答案 2.**并非总是如此。单个应用程序中可以有多个 plist。很少有人在首次发布时创建，很少有人在某些特定操作中创建。实际上，这取决于创建 plist 文件的时间以及如何使用它。

**答案 3.** `registerDefaults:`注册默认值是当用户没有为该属性设置其他值时。稍后打开应用程序时，它不会覆盖用户存储的任何内容。您可以在任何地方使用它，但如前所述，它将使用一次。

**答案 4.**对于 Mac OSX 应用程序，没有性能和过度杀伤问题，但对于 iOS，它有。总是更好用`[[NSUserDefaults standardUserDefaults] synchronize];`

# drupal - drupal 7中的Nivo滑块问题

> ID：15062744
> 
> 赞同：2
> 
> 时间：2013-02-25T08:20:57.080
> 
> 标签：drupal, drupal-7, nivo-slider

当我将图像添加到 Nivo Slider 时，它们不会加载/显示。日志消息状态

```
Failed to create style directory: public://styles/square_thumbnail/public 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:27:02.950

检查您是否对`/public_html/sites/default/files`文件夹具有写入权限（chmod 755）。您可以通过 FTP 客户端更改文件夹 chmods 来实现。

还要检查`http://yoursite.com/admin/reports/status`是否有任何关于错误目录权限的通知。

# java - 如何使 Java Private 方法中的变量值对另一个 java 文件可用/可见？

> ID：15062745
> 
> 赞同：0
> 
> 时间：2013-02-25T08:21:04.243
> 
> 标签：java

我在一个 java 文件中有一个 Private 方法，其中有一个名为 maxRate 的变量。我需要另一个 java 文件中的 maxRate 值来将它与另一个变量 minRate 进行比较。

如何使 maxRate 变量对另一个 java 文件可见？

我的代码如下 A.java （在 diff 包中）

```
public class A{

  private Integer maxRate = null;

  private modelAndView dConfig(int a,string b,string c, string d, string e){
    Map<String, PropConf> map = getConf(b,c,d,e);
    PropConf propConf = map.get(getKey(a));
    Integer maxRate = propConf.getMaxRate();
  }
} 
```

问题：我需要位于不同包中的 B.java 中的 maxRate 值。

进步：

截至目前，根据建议，我在公共类 A{ 的顶部将 maxRate 声明为 private Integer maxRate ，并且还在 A.java 中声明了一个 getter 方法，如下所示，

```
public Integer getMaxRate(){
return this.maxRate
} 
```

然后我尝试从 B.java 中调用 getMaxRate，如下所示，B.java

```
public ModelAndView save() {

A a = new A();
Integer f = a.getMaxRate();
logger.debug("F is" +f); } 
```

f 值被打印为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:22:55.053

您无法了解该方法的内部结构。要么使其成为具有关联 getter 的类级别字段，要么从您的方法中返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:26:12.473

您不能从另一个方法访问方法变量，除非您在***dConfig***中调用 method2并将变量直接传递给 method2。

```
private modelAndView dConfig(){

    method2(maxRate);

} 
```

您的问题的可能解决方案可能是以下...

您可以将变量 maxRate 设为私有类变量：

```
private Integer maxRate = 9; 
```

添加公共getter方法：

```
public Integer getMaxRate() {
    return this.maxRate;
} 
```

编辑更新：

您的代码应如下所示：

```
public class A {

  private Integer maxRate;

  public A() {
    this.maxRate = 9; //Initialize of the variable
  }

  public Integer getMaxRate() {
    return this.maxRate;
  }
} 
```

正如我在评论中所说，您似乎缺少变量的初始化部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:26:38.880

您*确实*需要从头开始重新审视[面向对象](http://en.wikipedia.org/wiki/Object-oriented_programming)的编程概念。我严重怀疑，您的问题比可变可见性问题更深，而是与不正确的类结构有关......

要直接处理这种情况，无需深入，这种方法可以工作：

```
public class MyClass {
    //instance variable: this can be different in 
    //each instances of this class. Now we initialize it to null
    private Integer maxRate=null; 

    private modelAndView dConfig(){

        //IMPORTANT!!!!!! Don't **declare** a new variable maxRate!
        // Your code Integer maxRate = 9; **declares a new one**
        // that would hide your class variable with a enw variable, 
        // whose scope is the method only

        maxRate = 9; //this sets the instance variable
        //this only happens when running the method
        //... I assume there are quirte some code here

    }

    /**
     * This function is available for each MyClass instance, and retrieves the
     * coresponding maxRate value.
     */
    public Integer getMaxRate() { 
         return maxRate;
    }

    //... other code
} 
```

**编辑**

我看到你在使用这个结构时遇到了麻烦。请听从我的建议，并阅读 OOP 的全部内容。您甚至无法坐起来就试图奔跑！

从 B 类中的函数中，您需要执行以下操作：

```
public ModelAndView save() {

    A a = new A(); //created class A -- initialized maxRate to null!!
    //now need to run the method that sets the instance variable:
    a.dConfig(); // maxRate set to 9, or whatever.

    //don't use single char variable names! also, f is for float, if something!
    Integer maxRate = a.getMaxRate();

    //surprise. 
    logger.debug("F is" +f); 
} 
```

由于您没有透露您的完整代码，我只能猜测您试图实现的目标......

还有一些建议，因为您似乎需要指导：

*   阅读Java中的变量范围
*   阅读 OOP
*   遵守[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)
*   了解清洁代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T08:26:41.357

您可以创建一个 getter 方法来获取该变量的值，但您需要将其声明为实例变量。

```
public class A {
    private Integer maxRate;

    public Integer getMaxRate() {
        return this.maxRate;
    }

    private modelAndView dConfig(){
        this.maxRate = 9;
    } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T08:22:43.063

您需要在私有函数之外定义变量并将其定义为公共。您还可以在私有函数之外定义它（保持私有），然后添加公共 getter 和/或 setter。由于其他答案中涵盖了更明显的公共获取/设置方法和公共类变量选项，因此从类中提取私有字段的方法不太常见且更复杂。首先，必须在私有函数字段之外声明变量，函数内部的函数甚至无法通过反射访问（可能是读取 Java 字节码的项目）：

```
Field f = obj.getClass().getDeclaredField("maxRate");
f.setAccessible(true);
Integer secretInt = (Integer) f.get(obj); 
```

# c# - 冲突的外键sql

> ID：15062747
> 
> 赞同：0
> 
> 时间：2013-02-25T08:21:16.600
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

> INSERT 语句与 FOREIGN KEY 约束“FK_dbo.UserProfile_dbo.UserWork_UserWorkId”冲突。冲突发生在数据库“aspnet-UserAndWork-20130222085848”、表“dbo.UserWork”、列“UserWorkId”中。该语句已终止。

我在加载页面时遇到错误消息这是我的两个表类

```
public class UserProfile
{
    [Key]
    public int UserId{get;set;}
    public string Username{get;set;}
    public int UserWorkId{get;set;}
    [foreignkey("UserWorkId")]
    public virtual UserWork UserWorkLog{get;set;}
}

public class UserWork
{
    [Key]
    public int UserWorkId{get;set;}
    public int UserId;
    //somemoire
} 
```

# jsf-2 - p:selectBooleanCheckbox 及其附加的标签

> ID：15062751
> 
> 赞同：7
> 
> 时间：2013-02-25T08:21:20.760
> 
> 标签：jsf-2, primefaces

附加到复选框按钮的标签的自然行为是在单击它（标签）时更改按钮的状态。这适用于 JSF 和 Richfaces。

有没有办法让它在 Primefaces(3.5) 中工作而不涉及 javascript？这是一个错误吗？

```
<p:outputLabel for="checkbox" value="Select it:" />
<p:selectBooleanCheckbox id="checkbox" label="My label" value="#{bean.value}" /> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-25T08:33:21.010

它在普通 JSF 中不能开箱即用，但在 Primefaces 中，`itemLabel`属性应该这样做：

```
<p:selectBooleanCheckbox id="checkbox" itemLabel="My label" ... /> 
```

# vbscript - 用于选择下拉值的 VB 脚本，而不知道它的技术 ID

> ID：15062757
> 
> 赞同：0
> 
> 时间：2013-02-25T08:21:30.577
> 
> 标签：vbscript

我需要创建一个 vb 脚本，它会从下拉选择框中选择一个值。问题是我只知道窗口的名称；没有已知的窗口或下拉列表的技术 ID。我只能通过“AppActivate”把它放在前面。我也尝试过使用“SendKeys”，但它不是可编辑的下拉菜单，所以简单地输入值没有帮助。

能否请你帮忙。

问候， Suyash Rathi。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:30:22.590

太多不知名的员工，但这里有一些东西可以开始。

假设我们在 hmtl 页面中有这段代码：

```
<select>
  <option value="A">Volvo</option>
  <option value="B">Saab</option>
  <option value="C">BMW</option>
  <option value="D" selected>Audi</option>
</select> 
```

在 .vbs 脚本中添加：

```
Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
IE.Visible = True
IE.Navigate "http://your_target_url_here.com/"

Do
    WScript.Sleep 100
Loop While IE.ReadyState < 4 And IE.Busy

' get first HTMLSelectElement object:
Set e = Document.getElementsByTagName("select")(0)

' just for undestanding...
MsgBox e.Options(e.selectedIndex).Value '-> "D"
MsgBox e.Options(e.selectedIndex).Text  '-> "Audi"

' select first option:
e.selectedIndex = 0 
```

# android - AndEngine - ParentScene 中设置的声音也在 ChildScene 中播放

> ID：15062761
> 
> 赞同：1
> 
> 时间：2013-02-25T08:21:47.747
> 
> 标签：android, andengine, scene

我有 3 个场景。

1.  游戏模式场景
2.  播放模式场景
3.  游戏场景

在 GameModeScene 和 PlayModeScene 中，每当用户触摸场景时，我都会播放声音

```
-public class GameModeScene extends Scene implements IOnSceneTouchListener{}
-public class PlayModeScene extends Scene implements IOnSceneTouchListener{} 
```

这就是我在SceneTouchEvent上播放声音的方式

```
public boolean onSceneTouchEvent(Scene pScene,TouchEvent pSceneTouchEvent) {

    if(pSceneTouchEvent.isActionDown()){
      // This Method plays sound
       this.animateSparkles(pSceneTouchEvent.getX(),pSceneTouchEvent.getY());
    }
    return false;
} 
```

在更改场景时，我将 PlayModeScene 作为 ChildScene 设置为 GameModeScene ，然后将 GameScene 作为 ChildScene 设置为 GameModeScene 。

在 GameScene 中，我没有在任何地方播放声音，但仍在播放声音。很明显是从前一幕来的。我怎么能阻止它。我不想在 GameScene 中出现那种声音。

这就是我在将场景从 PlayModeScene 更改为 GameScene 时所做的事情。

```
 mActivity.getEngine().runOnUpdateThread(new Runnable(){
           public void run() {
                 mPlayModeScene.clearTouchAreas();
                 mPlayModeScene.detachChildren();

                 mActivity.getEngine().clearUpdateHandlers();
                 mPlayModeScene.setChildScene(   
                   mActivity.getSceneController().getScene(SceneType.SinglePlayerNewGameScene)
                 );
            }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T00:44:45.013

如果您在 GameModeScene 中设置 touchEvent 声音，则此声音可能会在 GameModeScene 的两个子项中继承。因此，如果您希望在 PlayedModeScene 中播放声音，请将该场景作为参数（pScene）传递给：

公共布尔 onSceneTouchEvent（场景 pScene，TouchEvent pSceneTouchEvent）{

```
if(pSceneTouchEvent.isActionDown()){
  // This Method plays sound
   this.animateSparkles(pSceneTouchEvent.getX(),pSceneTouchEvent.getY());
}
return false; 
```

}

（这假设您将 GameModeScene 传递给 pScene）

# c++ - C++ 单例类实例的堆/动态与静态内存分配

> ID：15062767
> 
> 赞同：18
> 
> 时间：2013-02-25T08:21:56.637
> 
> 标签：c++, memory, static, singleton, dynamic-memory-allocation

我的具体问题是，在 C++ 中实现[单例类](http://en.wikipedia.org/wiki/Singleton_pattern)时，以下两个代码在性能、附带问题或其他方面是否存在实质性差异：

```
class singleton
{
    // ...
    static singleton& getInstance()
    {
        // allocating on heap
        static singleton* pInstance = new singleton();
        return *pInstance;
    }
    // ...
}; 
```

还有这个：

```
class singleton
{
    // ...
    static singleton& getInstance()
    {
        // using static variable
        static singleton instance;
        return instance;
    }
    // ...
}; 
```

（请注意，基于堆的实现中的取消引用不应影响性能，因为 AFAIK 没有为取消引用生成额外的机器代码。与指针区分似乎只是语法问题。）

**更新：**

我有一些有趣的答案和评论，我试图在这里总结它们。（建议感兴趣的人阅读详细答案。）‎:

*   在使用*静态*局部变量的单例中，类析构函数在进程终止时自动调用，而在*动态分配*的情况下，您必须在某个时候以某种方式管理对象销毁，例如通过使用智能指针：

```
 static singleton& getInstance() {
        static std::auto_ptr<singleton> instance (new singleton());
        return *instance.get(); 
    } 
```

*   使用动态分配的单例比静态单例变量*“更懒惰”*，因为在后一种情况下，单例对象所需的内存（总是？）在进程启动时保留（作为加载程序所需的整个内存的一部分) 并且只有单例构造函数的调用被推迟到`getInstance()`调用时。这可能`sizeof(singleton)`很重要。

*   两者在 C++11 中都是线程安全的。但是对于早期版本的 C++，它是特定于实现的。

*   动态分配情况使用一级间接访问单例对象，而在静态单例对象情况下，对象的直接地址是在编译时确定和硬编码的。

*PS：我已经根据@TonyD 的回答更正了我在原始帖子中使用的术语。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T08:42:12.307

*   该`new`版本显然需要在运行时分配内存，而非指针版本在编译时分配内存（但两者都需要执行相同的构造）

*   该`new`版本不会在程序终止时调用对象的析构函数，但非`new`版本会：您可以使用智能指针来更正此问题

    *   你需要小心一些静态/命名空间范围对象的析构函数在其静态本地实例的析构函数运行后不会调用你的单例......如果你担心这一点，你可能应该阅读更多关于单例生命周期和管理它们的方法。Andrei Alexandrescu 的 Modern C++ Design 有一个非常易读的处理方法。
*   在 C++03 下，是否线程安全是实现定义的。（我相信 GCC 往往是，而 Visual Studio 往往不会 - 评论确认/纠正赞赏。）

*   在 C++11 下，它是安全的： 6.7.4 “如果在初始化变量时控制同时进入声明，则并发执行应等待初始化完成。” （无递归）。

*讨论重新编译时与运行时分配和初始化*

从您对摘要和一些评论的措辞方式来看，我怀疑您并没有完全理解静态变量的分配和初始化的一个微妙方面......

假设您的程序有 3 个本地静态 32 位`int`s -`a`和`b`-`c`在不同的函数中：编译器可能会编译一个二进制文件，告诉操作系统加载程序为这些静态保留 3x32 位 = 12 字节的内存。编译器决定每个变量的偏移量：它可以`a`在数据段中的十六进制偏移量 1000 处，`b`在 1004 处，以及`c`在 1008。当程序执行时，操作系统加载程序不需要为每个单独分配内存 - 它只知道总共 12 个字节，它可能会或可能不会被专门要求进行 0 初始化，但它可能无论如何都想确保进程看不到其他用户程序的剩余内存内容。程序中的机器代码指令通常会硬编码偏移量 1000、1004、1008 以访问`a`，`b`因此`c`在运行时不需要分配这些地址。

动态内存分配的不同之处在于指针（比如`p_a`, `p_b`, `p_c`）将在编译时被赋予地址，如前所述，但另外：

*   必须在运行时找到指向的内存（每个`a`，`b`和`c`）（通常是在静态函数第一次执行时，但编译器允许根据我对另一个答案的评论更早地执行它），并且
    *   如果操作系统当前为进程分配的内存太少而无法成功进行动态分配，则程序库将要求操作系统提供更多内存（例如使用`sbreak()`）-出于安全原因，操作系统通常会清除这些内存
    *   分配给每个 的动态地址，`a`并且`b`必须`c`复制回指针`p_a`和。`p_b``p_c`

这种动态方法显然更加复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T08:32:40.810

主要区别在于，使用本地`static`对象将在关闭程序时被销毁，而堆分配的对象将被丢弃而不会被销毁。

请注意，在 C++ 中，如果您在函数内声明一个静态变量，它将在您第一次进入作用域时被初始化，而不是在程序启动时（就像全局静态持续时间变量一样）。

总的来说，这些年来我从使用延迟初始化切换到显式控制初始化，因为程序启动和关闭是一个微妙的阶段，而且很难调试。如果您的课程没有做任何复杂的事情并且不能失败（例如，它只是一个注册表），那么即使是延迟初始化也可以……否则控制会为您节省很多问题。

在进入第一条指令之前`main`或执行最后一条指令之后崩溃的程序`main`更难调试。

~~使用单例的惰性构造的另一个问题是，如果您的代码是多线程的，您必须注意并发线程同时初始化单例的风险。在单线程上下文中进行初始化和关闭更简单。~~

自 C++11 以来，多线程代码中函数级静态实例初始化期间可能出现的竞争已经得到解决，当时该语言添加了官方多线程支持：对于正常情况，编译器会自动添加适当的同步保护，因此这不是问题C++11 或更高版本的代码。但是，如果函数中的静态初始化`a`调用函数`b`，反之亦然，如果两个函数第一次由不同的线程同时调用，则可能会出现死锁（仅当编译器使用单个互斥锁时，这不是问题所有静力学）。另请注意，不允许从静态对象的初始化代码中递归调用包含静态对象的函数。

# c++ - Qt - 获取 QPushButton 图标名称

> ID：15062776
> 
> 赞同：1
> 
> 时间：2013-02-25T08:22:43.383
> 
> 标签：c++, qt, icons, qpushbutton

我有两个状态的 QPushButton。我想将一个图标与每个状态相关联。

就像音乐播放器中的播放|暂停按钮。

为此，我想获取当前图标名称，以便了解下一个要设置的图标是什么。

我可以继承 QPushButton 但值得吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T08:38:25.200

不是根据`QPushButton`的状态设置图标，而是设置一个`QIcon`具有两种状态的图标，如果您将其与 checkable 一起使用，Qt 将选择正确的图标`QPushButton`。

```
QIcon icon = QIcon();
// 'Off' state corresponds to unchecked state of QPushButton
icon.addPixmap( QPixmap( ":/img/play.png" ), QIcon::Normal, QIcon::Off );
// 'On' state corresponds to checked state of QPushButton
icon.addPixmap( QPixmap( ":/img/pause.png" ), QIcon::Normal, QIcon::On );
QPushButton * button = new QPushButton();
button->setIcon( icon );
button->setCheckable( true ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:29:02.833

使用 QPushButton::icon() 和 QIcon::name() 获取图标名称。

# php - 主视图中的 Codeigniter 视图

> ID：15062781
> 
> 赞同：1
> 
> 时间：2013-02-25T08:22:56.623
> 
> 标签：php, codeigniter-url

我正在使用这样的 codeigniter 从控制器的主视图中加载视图

**控制器**

```
public function product_modules($domain_id)
{           
    $this->load->model('/admin/Model_products', '', TRUE);      
    $data['product_boxes'] = $this->Model_products->getProducBoxes($domain_id);
    $this->load->view('admin/dashboard',$data, null, true);

} 
```

**主视图**

```
 $this->view($_SERVER['REQUEST_URI']); 
```

但是如果请求的 uri 包含查询字符串，则视图没有被加载，我得到一个 type `Unable to load the requested file: /admin/product_modules/1.php`。动态调用视图的最佳解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:31:13.647

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Example extends CI_Controller
{

    public function __construct()
    {
        parent::__construct();
    }

    public function _remap($method, $params = array())
    {
        // dynamically assign the method with parameters support
        $this->view($method, $params);
    }

    public function product_modules($domain_id)
    {
        $this->load->model('/admin/Model_products', '', TRUE);
        $data['product_boxes'] = $this->Model_products->getProducBoxes($domain_id);
        $this->load->view('admin/dashboard', $data, null, true);
    }

    public function view($method, $param1 = '', $param2 = '')
    {
        // params you can sent to models
        $data['users'] = $this->model_name->get_user($param1);

        // or views
        $data['myvar'] = $param2;

        // and load the view dynamically
        $this->load->view($method, $data);
    }

} 
```

所以

如果 URL 是`http://example/controller/method`那么上面将搜索`method.php`视图文件，

如果 URL 是`http://example/controller/product_modules/1`则它搜索`product_modules.php`视图文件。

希望这可以帮助。谢谢！！

# c# - 导入 Windows 窗体 (C#)，Visual Studio 2012

> ID：15062782
> 
> 赞同：16
> 
> 时间：2013-02-25T08:23:00.213
> 
> 标签：c#, winforms, import, visual-studio-2012, windows-forms-designer

试图将现有的 Windows 表单添加到 VS2012 WinForm 项目中，我去“添加/现有项目...”然后导入：MyForm.cs、MyForm.designer.cs、MyForm.resx

这曾经在早期版本的 VS 中工作。（我可能需要调整命名空间。）

在 VS2012 中，MyForm.designer.cs 和 MyForm.resx 现在与设计器无关的表单；即它们在解决方案资源管理器中显示为单独的文件条目，而不是嵌套在 MyForm 下。双击 MyForm 会显示一个没有错误消息的空表单（无控件）。该项目编译并运行正常。

但是，当我将相同的文件拖放到项目中（调整/重命名命名空间）时，表单文件彼此正确关联，并且设计器可以很好地打开表单。

虽然我现在有一个解决方案，但有人可以强调这些方法之间有什么区别，如果添加/现有项目选项不起作用，那么它有什么意义，以及拖动文件时实际发生了什么？哪个文件（也许是 .csproj？）负责加入表单文件？因为它在早期版本的 VS 中都是双向的，我可以假设这是一个错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-25T09:23:01.413

试图重现您的问题 - 没有成功。

假设您要导入一个名为`YourFormName`. 然后您应该只添加`YourFormName.cs`到项目中 - 其余部分 (`YourFormName.designer.cs`和`YourFormName.resx`) 将自动添加。

我的步骤：

1.  在 VS2012 中创建 WinForms 项目（在我的情况下为 .Net Framework 为 4）（如果重要，则为 11.0.05727.1）
2.  右键单击项目 -> 添加 -> 现有项目...
3.  搜索任何带有控件的 WinForm（我添加了在 VS2010 中为 .NET framework 4 和 3.5 创建的两个表单）
4.  有一些延迟（大约 30-40 秒），对于这两种情况，“设计师”都按预期工作并加载了所有现有的控件/代码隐藏

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-15T13:40:52.697

只需包含 cs 文件，只需`wait`大约 mintue。无需添加其他文件。这将起作用。

转到`project`> 添加`existing item` 选择表单`myform.cs`文件，然后单击`add`按钮。这将在您的项目中导入文件。

# mysql - unixodbc 与 ltdl 库动态链接时出现问题？

> ID：15062785
> 
> 赞同：1
> 
> 时间：2013-02-25T08:23:12.040
> 
> 标签：mysql, dynamic, libtool, unixodbc

全部：

我正在 Solaris 10 环境中测试 unixODBC，并查找 libodbc 和 MyODBC 驱动程序是否与 libltdl.so 动态链接：

```
 ldd /usr/lib/libodbc.so.2
    libltdl.so.7 =>  /usr/local/lib/libltdl.so.7
    libiconv.so.2 =>         /usr/local/lib/libiconv.so.2
    libthread.so.1 =>        /usr/lib/libthread.so.1
    libc.so.1 =>     /usr/lib/libc.so.1
    libgcc_s.so.1 =>         /usr/lib/libgcc_s.so.1
    libm.so.2 =>     /usr/lib/libm.so.2
    /platform/SUNW,Sun-Fire-V240/lib/libc_psr.so.1

    ldd /data/nan/mysql-connector-odbc-5.2.4-src/lib/libmyodbc5a.so
    libodbc.so.2 =>  /usr/lib/libodbc.so.2
    libthread.so.1 =>        /usr/lib/libthread.so.1
    libm.so.2 =>     /usr/lib/libm.so.2
    libodbcinst.so.2 =>      /usr/lib/libodbcinst.so.2
    libgcc_s.so.1 =>         /usr/lib/libgcc_s.so.1
    libltdl.so.7 =>  /usr/local/lib/libltdl.so.7
    libiconv.so.2 =>         /usr/local/lib/libiconv.so.2
    libc.so.1 =>     /usr/lib/libc.so.1
    /platform/SUNW,Sun-Fire-V240/lib/libc_psr.so.1 
```

有时它会在启动应用程序时连接 MySQL 服务器失败。日志是这样的：

```
[ODBC][6738][1361325895.588941][SQLConnect.c][1111]Can't open lib '/data/nan/mysql-connector-odbc-5.2.4-src/lib/libmyodbc5a.so' : file not found
[ODBC][6738][1361325895.588979][SQLConnect.c][1111]Can't open lib '/data/nan/mysql-connector-odbc-5.2.4-src/lib/libmyodbc5a.so' : file not found 
```

一段时间后，应用程序运行正常。

```
 But if libodbc and MyODBC driver aren't dynamically linked with libltdl.so:
    ldd /usr/local/lib/libodbc.so.2
    libiconv.so.2 =>         /usr/local/lib/libiconv.so.2
    libthread.so.1 =>        /usr/lib/libthread.so.1
    libc.so.1 =>     /usr/lib/libc.so.1
    libgcc_s.so.1 =>         /usr/local/lib/libgcc_s.so.1
    libm.so.2 =>     /usr/lib/libm.so.2
    /platform/SUNW,UltraAX-i2/lib/libc_psr.so.1

    ldd /data1/susie/mysql/tools/test_static_modify/mysql-connector-odbc-5.2.3-src/lib/libmyodbc5a.so
    libodbc.so.2 =>  /usr/local/lib/libodbc.so.2
    libthread.so.1 =>        /usr/lib/libthread.so.1
    libm.so.2 =>     /usr/lib/libm.so.2
    libodbcinst.so.2 =>      /usr/local/lib/libodbcinst.so.2
    libgcc_s.so.1 =>         /usr/local/lib/libgcc_s.so.1
    libiconv.so.2 =>         /usr/local/lib/libiconv.so.2
    libc.so.1 =>     /usr/lib/libc.so.1
    /platform/SUNW,UltraAX-i2/lib/libc_psr.so.1 
```

应用程序运行正常..

所以我认为这可能是 unixODBC 中的一个潜在问题。谁能帮忙检查一下？首先十分感谢！

最好的问候
南肖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:12:29.347

unixODBC 所做的只是从 libltdl 调用 dlopen 和 dlsym，我想知道 lib 中是否存在一些导致问题的静态因素。如果您不构建 unixODBC 来使用外部 libltdl，它会使用自己的版本（来自 libtool），所以同样，这可能与它们都使用同一个库发生冲突。你说你正在使用 Solaris。你链接的 libltdl 是来自 Sun 吗？

有趣的是，如果您可以让它在 truss 下失败，那么我们可以看到“找不到文件”是由什么引起的。

我还想知道 MySQL 驱动程序使用 libltdl 的目的是什么？

# mysql - 如何调整此查询以获得结果？

> ID：15062787
> 
> 赞同：2
> 
> 时间：2013-02-25T08:23:25.723
> 
> 标签：mysql, sql

我有一个查询，它实际上是与首字母“a”匹配的成员，结果还包含用户朋友。我想要的是用户朋友必须在结果中出现，然后是剩余用户。

这是查询

```
SELECT `a`.`mem_id` 
    FROM `members` `a` 
    INNER JOIN 
        (
        SELECT DISTINCT `n2`.`mem_id` 
            FROM `network` `n1`,`network` `n2` 
            WHERE `n1`.`frd_id` = `n2`.`mem_id` 
                AND `n1`.`mem_id`='777' 
                AND `n2`.`frd_id`='777'
        ) `b` 
    WHERE `a`.`mem_id`=`b`.`mem_id` 
        AND `a`.`profilenam` LIKE 'a%' 
        AND `a`.`deleted` ='N' 
    ORDER BY `profilenam` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T22:35:14.573

据我了解您的问题，这里有一个查询，将返回您正在寻找的数据：

```
SELECT M.mem_id
FROM members M
LEFT OUTER JOIN (SELECT DISTINCT N1.mem_id
                     ,N1.frd_id
                 FROM network N1
                 INNER JOIN network N2 ON N2.mem_id = N1.frd_id
                                          AND N2.frd_id = N1.mem_id) F ON F.mem_id = M.mem_id
                                                                         AND F.frd_id = '777'
WHERE M.profilename LIKE 'a%'
    AND M.deleted = 'N'
ORDER BY CASE
            WHEN F.mem_id IS NOT NULL THEN 0
            ELSE 1
         END, M.profilename 
```

**关于我的查询的一些解释：**

该表`members`有`LEFT OUTER JOIN`一个查询，该查询返回每个现有的友谊（根据您的查询，我认为要将两个成员视为朋友，必须在表中建立双向连接`network`）。

这种与条件的结合`F.frd_id = '777`确保仅当活动成员是具有 id 的成员的朋友时才进行加入`'777'`。

最后一个元素是您要查找的关键元素，即`ORDER BY`先拥有朋友，然后再拥有其他成员的子句。该子句的第一个条件是一个简单的`SWITCH`语句，用于测试关节是否存在，如果存在则表示该成员是朋友，否则不存在。每个朋友的值为 0，其他成员的值为 1，通过对该值进行升序排序，结果将按需要排序。

希望这会有所帮助。

# jplayer - Jplayer Circle Player 无法在 Chrome 中播放 mp3 文件

> ID：15062790
> 
> 赞同：0
> 
> 时间：2013-02-25T08:23:35.770
> 
> 标签：jplayer

我更新了一个主题，以便所有页面都通过 ajax 加载。在其中一个页面上，我使用 jplayer Circle 播放器播放 mp3，该播放器在 firefox 和 safari 中运行良好，但在 Chrome 中却不行。

这是初始化脚本

```
jQuery(document).ready(function($){

var myCirclePlayer = new CirclePlayer(".jquery_jplayer_'.$counter.'",
{
    mp3: "'.$track->album_track_mp3_url.'",

}, {
    cssSelectorAncestor: ".cp_container_'.$counter.'",
    swfPath: "'.get_template_directory_uri().'/scripts/frontend/Jplayer.swf",
    wmode: "window",
    supplied: "mp3"
});

}); 
```

任何想法为什么它不能在 Chrome 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T07:41:26.927

```
jQuery(document).ready(function($){

var myCirclePlayer = new CirclePlayer(".jquery_jplayer_'.$counter.'",
{
    mp3: "'.$track->album_track_mp3_url.'",

}, 
{
    cssSelectorAncestor: ".cp_container_'.$counter.'",
    swfPath: "'.get_template_directory_uri().'/scripts/frontend/Jplayer.swf",
    wmode: "window",
    supplied: "mp3",
    solution: "flash, html"// after adding a line of code it will work on chrome
});

}); 
```

# c# - 在另一个类上处理方法的更好方法

> ID：15062798
> 
> 赞同：-1
> 
> 时间：2013-02-25T08:24:07.963
> 
> 标签：c#, visual-studio, oop, code-cleanup

我正在尝试从我的主要形式中接近另一个类的方法，我已经有一种方法可以实现这一点，但我认为它的编程不是很“干净”。

这是使用我当前使用的代码处理该方法的方法：

```
 private void btnConnectDevice_Click(object sender, EventArgs e)
    {
          Serial _serial = new Serial();
          _serial.OpenPortConnection();
    } 
```

我知道代码运行良好，但我认为这不是正确的方法。有没有人有一个干净/替代的代码来实现同样的事情，只有更干净？

谢谢你的时间。

编辑：

Serial 类上的方法称为 OpenPortConnection，这是我需要接近的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:56:39.897

要在类上调用方法，您要么需要实例化它，要么方法需要是静态的。因此，如果您不想实例化一个对象来调用 OpenPortConnection，您可以将其设为静态吗？

# python - 使用 python igraph 库读取 .net pajek 文件

> ID：15062800
> 
> 赞同：1
> 
> 时间：2013-02-25T08:24:14.257
> 
> 标签：python, igraph

我正在尝试使用 python igraph 库加载 .net 文件。这是示例代码：

```
import igraph
g = igraph.read("s.net",format="pajek") 
```

但是当我尝试运行此脚本时，出现以下错误：

```
Traceback (most recent call last):
File "demo.py", line 2, in <module>
g = igraph.read('s.net',format="pajek")
File "C:\Python27\lib\site-packages\igraph\__init__.py", line 3703, in read
return Graph.Read(filename, *args, **kwds)
File "C:\Python27\lib\site-packages\igraph\__init__.py", line 2062, in Read
return reader(f, *args, **kwds)
igraph._igraph.InternalError: Error at .\src\foreign.c:574: Parse error in Pajek
file, line 1 (syntax error, unexpected ARCSLINE, expecting VERTICESLINE), Parse error 
```

请提供一些提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:54:53.633

您的文件不是常规的 Pajek 文件，或者 igraph 的 Pajek 解析器无法读取这个特定的 Pajek 文件。（因为 Pajek 文件格式没有正式的规范，所以编写 Pajek 解析器有点碰运气）。如果您通过电子邮件将您的 Pajek 文件发送给我，我会查看它。

**更新**：您缺少`*Vertices`Pajek 文件的部分。添加一条线`*Vertices N`（`N`图中的顶点数在哪里）可以解决您的问题。由于缺乏文件格式的正式规范，我不能说这一行在 Pajek 文件中是强制性的，但到目前为止我看到的所有 Pajek 文件都包含这一行，所以我想它是相当标准的。

# c# - 如何将数据表插入 Microsoft Access？

> ID：15062804
> 
> 赞同：1
> 
> 时间：2013-02-25T08:24:53.180
> 
> 标签：c#, c#-4.0, ms-access

我有一个包含数据信息的数据表，我想通过插入查询将其放入 Microsoft 访问的表中。任何人都可以帮我这样做吗？

```
foreach ( DataRow row in table.Rows)
{
    insertCommand.CommandText = "INSERT INTO [tableName] VALUES (row[a], row[b], row[c])";
    insertCommand.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:19:25.223

您可以使用命令生成器。命令生成器将为您确定命令。

您的数据适配器需要所有可用的不同类型的命令，以便在需要时调用。通过向命令生成器提供 SELECT 命令，它将为您确定 UPDATE、DELETE 和 INSERT 命令。

您需要做的就是在您尝试更新数据库时将 DataTable 对象传递给适配器。

```
using (OleDbConnection con = new OleDbConnection("YourConnectionString"))
{
    var adapter = new OleDbDataAdapter();
    adapter.SelectCommand = new OleDbCommand("SELECT * FROM [YourAccessTable]", con);

    var cbr = new OleDbCommandBuilder(adapter);

    cbr.GetDeleteCommand();
    cbr.GetInsertCommand();
    cbr.GetUpdateCommand();

    try
    {
        con.Open();
        adapter.Update(YourDataTable);
    }
    catch (OleDbException ex)
    {
        MessageBox.Show(ex.Message, "OledbException Error");
    }
    catch (Exception x)
    {
        MessageBox.Show(x.Message, "Exception Error");
    }
} 
```

# php - 用.htaccess中的字符串重写url

> ID：15062807
> 
> 赞同：0
> 
> 时间：2013-02-25T08:25:22.910
> 
> 标签：php, apache, mod-rewrite, redirect, urlencode

我正在尝试使用 mod_rewrite 重定向用户，保留多个查询字符串并创建重定向页面

例如，如果用户打开

```
http://localhost/url/url/http://www.google.com/contacts/?user=abc&stackoverflow=great&google=facebook 
```

然后他被带到

```
http://localhost/url/url.php?redirect=http://www.google.com/contacts/?user=abc&stackoverflow=great&google=facebook 
```

第二个问题是 URL 应该被编码然后重定向！如果 URL 未编码，则字符串 (&stackoverflow=great) 将不是 url.php 的“重定向”字符串的一部分

我尝试了许多解决方案然后来到stackoverflow！我在以下文件中尝试了以下代码

```
 http://localhost/url/.htaccess 

RewriteRule ^url/([^/])$ url.php?redirect=$1 [QSA,L] 
```

但结果只是 localhost/url/url.php?redirect=http

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:31:40.293

您的设置不适用于未编码的内部网址，因此“答案”只能具有临时字符。但这可能是一个起点：

```
RewriteEngine on
RewriteRule ^/url/url/(.*)$ /url/url.php?redirect=$1 [L,QSA] 
```

但是，我想知道该片段`/url/url`是否真的是有意的（那里有*两个*“网址”）。

请注意，确切的规则内容还取决于*您*要定义该规则的位置。无论您使用中央服务器配置（参考）还是`.htaccess`样式文件（作为第二选择并且更复杂），语法都是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:32:22.417

试试这个

```
RewriteEngine on
Redirect ^url/url/(.*)$ url/url.php?redirect=$1 
```

基本的重定向系统，

重定向访问的文件 URL-to-go-to

# java - PrimeFaces 中的 BreadCrumb 标记不起作用

> ID：15062809
> 
> 赞同：1
> 
> 时间：2013-02-25T08:25:27.860
> 
> 标签：java, jsf-2, primefaces, navigation

我无法从动态创建的 p:breadCrumb 调用操作方法...意味着当我在面包屑中单击 p:menuitem 时，它不会在 ManagedBean 中调用我的 back() 方法

我们正在使用 primefaces3.4-snapshot jar

这是我的 .xhtml

```
 <p:breadCrumb>
      <c:forEach items="#{pc_statusWiseRep.stackBeans}" var="path">
           <p:menuitem value="#{path.name}"  action="#{pc_statusWiseRep.backpath.id,path.lvl,path.name,path.slno}" update="form" />                                                 
     </c:forEach>
 </p:breadCrumb> 
```

这是托管 bean 中的 back() 方法（会话范围）

```
public String back(String id, String lvl, String name, String slno) {
.....
}

List<StackBean> stackBeans = new ArrayList<StackBean>(); 
```

这是豆子

```
public class StackBean {
String lvl = "";
String id = "";
String name = "";
int slno = 0;
..setters//getters
} 
```

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:04:23.047

看起来您忘记调用`back`bean 中的方法（请参阅我在 中的更改`action`）：

```
<p:breadCrumb>
      <c:forEach items="#{pc_statusWiseRep.stackBeans}" var="path">
           <p:menuitem value="#{path.name}"  
                       action="#{pc_statusWiseRep.back(path.id,path.lvl,path.name,path.slno)}" update="form" />                                                 
     </c:forEach>
 </p:breadCrumb> 
```

# php - 为什么我必须在 PHP 的递归匿名函数中将匿名函数作为引用传递？

> ID：15062817
> 
> 赞同：1
> 
> 时间：2013-02-25T08:26:10.453
> 
> 标签：php, recursion, reference, aggregate-functions

作品：

```
 $t = function($x,$y) use (&$t){
...
} 
```

不工作：

```
 $t = function($x,$y) use ($t){
...
} 
```

为什么我必须将函数本身作为参考传递？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:07:28.963

也许这会有所帮助：

```
$f = 42;
$f = function() use ($f)
{
  var_dump($f);
};
$f(); 
```

输出 42。

在`use()`定义函数并将其分配给 之前命中`$f`。因此，如果您不通过引用传递，那么您正在访问该变量，就像它在创建函数之前一样。在这种情况下，42。在你的情况下，NULL。

通过传递引用，您将`$f`在调用函数时获得 ' 值，这将是您所期望的匿名函数（假设您没有重新分配 $f）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:35:27.820

传递引用变量意味着您在该范围内访问相同的变量。

引用变量指向之前创建的同一个变量。

**例子**

```
<?php

    $a = 10;

    $b = &$a;

    function change_b($pass)
    {
        $b = $pass++;
    }

    echo $b."<br />";

    change_b(&$a);

    echo $b;

?> 
```

上面的代码将输出 10 和 11。

**递归函数必须一遍又一遍地访问相同的资源，这比复制值更有效。**

# php - PHP - 检查目录是否存在与起始掩码

> ID：15062826
> 
> 赞同：0
> 
> 时间：2013-02-25T08:26:33.897
> 
> 标签：php, rmdir

我想用 php 检查我的目录中是否存在带有起始掩码 TEMP 的目录

我的临时目录如下所示：

TEMP20130222001408378716等

```
$dir="mydirecrtory/*";
$dirmask="TEMP";

foreach(glob($dir/TEMP*) AS tempdir)

    if (!is_dir($dir/$tempdir) || !$dir = opendir($dir/$tempdir)) {

rmdir($dir/$tempdir);
} 
```

# c# - 通过在c#中单击它来向上移动一行

> ID：15062827
> 
> 赞同：-4
> 
> 时间：2013-02-25T08:26:36.437
> 
> 标签：c#, draw, paint, move

当我单击它时，我想向上移动手，当我单击头部时，我想向右或向左转动头部。

请帮助我并更改我的源代码。

我是 C# 的初学者。

下载应用程序-C# Vs2008：[http ://s1.picofile.com/file/7670109244/Move_Hand.rar.html](http://s1.picofile.com/file/7670109244/Move_Hand.rar.html)

下载链接：[http ://www.freeuploadsite.com/do.php?id=5033](http://www.freeuploadsite.com/do.php?id=5033)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:02:23.700

根据问题的标签-您想制作某种矢量图形编辑器。[在此处](http://www.techotopia.com/index.php/Drawing_Graphics_in_C_Sharp)阅读有关如何绘画的信息。为了操作图片，创建一个类，该类将负责绘制自身，然后它会被要求保存图片信息和位置。然后使用处理程序（例如 OnMouseClick 和 OnMouseMove）添加操作，这将触发图片的位置和方向的变化 -> 用新的位置和方向重绘图片。

# kendo-grid - Linq 查询中的调用方法

> ID：15062836
> 
> 赞同：0
> 
> 时间：2013-02-25T08:27:12.150
> 
> 标签：kendo-grid

我使用 KendoUI Grid，我有这样的代码：

```
 IQueryable<ListStatus> liststatus = (from karfarmalist in db.PTStbLists
 join eventlist in db.PTStbListEvents on karfarmalist.Id equals eventlist.SerialList 
 join combobase in db.GlbTbComboBases on eventlist.EventType equals combobase.GUID
 where karfarmalist.TFN.Equals(tfn) && karfarmalist.GuidList == listid
 select new ListStatus{
                       id = eventlist.Id,
                       eventdate = Farab.Utility.PersianDate.Georgian_jalali(eventlist.EventDate),
                       status = combobase.FAName
                      }).OrderBy(l => l.id); 
```

Farab 调用 引发错误。我使用 AsEnumerable 方法，但 orderby 有错误。如何在 LINQ 中调用该方法而不会出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:53:05.310

您可以`.ToList()`在查询末尾添加，但这会导致调用数据库，这将影响查询的性能。不确定这是否是您想要的，但您可以尝试一下。

# c# - 在 C# 中使用类型化数据集时如何更改 SQLite 文件位置

> ID：15062839
> 
> 赞同：0
> 
> 时间：2013-02-25T08:27:26.127
> 
> 标签：c#, sqlite

我使用 vs 2010 向导来连接 SQLite 数据库，在使用向导时，我浏览了特定文件夹中的 db 文件。现在我想更改文件夹，但找不到如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:29:14.140

`project's properties -> Settings.settings -> Settings.Designer.cs` 我在属性中找到了文件的路径 `global::System.Configuration.DefaultSettingValueAttribute`

只需更改值即可。

# java - 使用方法调用进行 Java 强制转换

> ID：15062841
> 
> 赞同：7
> 
> 时间：2013-02-25T08:27:28.243
> 
> 标签：java

假设我有以下课程

```
class A{
    public method(A a) {
        System.out.println(3);
    }
}

class B extends A{
  public void method (A a) {
        System.out.println(2);
  }
  public void method (B b) {
        System.out.println(1);
  }
}

A obj = new B();
obj.method( (B) obj);
((B) obj).method( (B) obj); 
```

第一个方法调用打印出 2，而第二个方法调用打印出 1。为什么两个方法调用都不打印出 1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:37:41.177

`void method (B b)`B 的父级 A 完全未知。

这是合乎逻辑的，因为在 中`obj.method((B) obj);`，类型`obj`是 A，在多态规则中它可以只调用 `void method(A a)`B 类的版本。

```
class B extends A {

    // This is an overridden method visible to A
    public void method(A a) {
        System.out.println(2);
    }

    // This is an overloaded method unknown from A
    public void method(B b) {
        System.out.println(1);
    }
} 
```

[您可以阅读解释 Override 与 Overload 的 SO 答案。](https://stackoverflow.com/questions/154577/polymorphism-vs-overriding-vs-overloading/154673#154673)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T08:30:24.150

因为java在编译时选择调用的方法。并且编译器只考虑赋值的“左侧”。

因此，当您键入`A obj = new B()`编译器时，只会“看到” class 中的方法`A`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T08:38:57.693

第一个方法调用是使用类型 A 的对象引用完成的，因此调用了可以覆盖的相应方法。

在第二种情况下，首先对类型 B 进行强制转换，因此在类 B 中定义了相应的方法，即

```
method (B b) 
```

叫做。

# python - 最大总和子列表？

> ID：15062844
> 
> 赞同：29
> 
> 时间：2013-02-25T08:27:43.773
> 
> 标签：python, algorithm

我对这个问题试图提出的问题感到困惑。

> 编写`mssl()`将整数列表作为输入的函数（最小和子列表）。然后它计算并返回输入列表的最大和子列表的总和。最大和子列表是输入列表的条目总和最大的子列表（切片）。空子列表的总和定义为 0。例如，列表的最大总和子列表`[4, -2, -8, 5, -2, 7, 7, 2, -6, 5]`是`[5, -2, 7, 7, 2]` ，其条目的总和是`19`。

如果我要使用这个函数，它应该返回类似于

```
>>> l = [4, -2, -8, 5, -2, 7, 7, 2, -6, 5]
>>> mssl(l)
19
>>> mssl([3,4,5])
12
>>> mssl([-2,-3,-5])
0 
```

我该怎么做？

这是我目前的尝试，但它不会产生预期的结果：

```
def mssl(x):
    ' list ==> int '
    res = 0
    for a in x:
        if a >= 0:
            res = sum(x)
        return res
    else:
        return 0 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-25T09:06:07.893

实际上有一个使用*动态编程*的非常优雅、非常有效的解决方案。它需要**O(1) 空间**和**O(n) 时间**- 这是无法击败的！

定义`A`为输入数组（零索引），并且`B[i]`是所有以位置结尾但不包括位置`i`（即所有子列表`A[j:i]`）的子列表的最大总和。因此 ,`B[0] = 0`和`B[1] = max(B[0]+A[0], 0)`, `B[2] = max(B[1]+A[1], 0)`, `B[3] = max(B[2]+A[2], 0)`, 等等。然后，很明显，解决方案由 简单地给出`max(B[0], ..., B[n])`。

由于每个`B`值只依赖于前一个`B`，我们可以避免存储整个`B`数组，从而为我们提供 O(1) 空间保证。

使用这种方法，`mssl`可以简化为一个非常简单的循环：

```
def mssl(l):
    best = cur = 0
    for i in l:
        cur = max(cur + i, 0)
        best = max(best, cur)
    return best 
```

示范：

```
>>> mssl([3,4,5])
12
>>> mssl([4, -2, -8, 5, -2, 7, 7, 2, -6, 5])
19
>>> mssl([-2,-3,-5])
0 
```

* * *

如果您还想要开始和结束切片索引，则需要跟踪更多信息位（注意这仍然是 O(1) 空间和 O(n) 时间，只是有点毛茸茸）：

```
def mssl(l):
    best = cur = 0
    curi = starti = besti = 0
    for ind, i in enumerate(l):
        if cur+i > 0:
            cur += i
        else: # reset start position
            cur, curi = 0, ind+1

        if cur > best:
            starti, besti, best = curi, ind+1, cur
    return starti, besti, best 
```

这将返回一个元组`(a, b, c)`，使得`sum(l[a:b]) == c`和`c`是最大的：

```
>>> mssl([4, -2, -8, 5, -2, 7, 7, 2, -6, 5])
(3, 8, 19)
>>> sum([4, -2, -8, 5, -2, 7, 7, 2, -6, 5][3:8])
19 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T07:30:07.297

这就是[最大子阵问题](http://en.wikipedia.org/wiki/Maximum_subarray_problem)。Kadane的算法可以在`O(n)`时间和`O(1)`空间上解决它，它是这样的：

```
def mssl(x):
    max_ending_here = max_so_far = 0
    for a in x:
        max_ending_here = max(0, max_ending_here + a)
        max_so_far = max(max_so_far, max_ending_here)
    return max_so_far 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-08T09:46:41.073

根据问题，如果列表中的所有元素均为负数，则应将最大总和返回为“零”

相反，如果您希望输出为子数组的最大值（负数），则以下代码将有所帮助：

```
In [21]: def mssl(l):
...:     best = cur = l[0]
...:     for i in range(len(l)):
...:         cur = max(cur + l[i], l[i])
...:         best = max(best, cur)
...:     return best 
```

例子：

```
In [23]: mssl([-6, -44, -5, -4, -9, -11, -3, -99])
Out[23]: -3
In [24]: mssl([-51, -23, -8, -2, -6])
Out[24]: -2 
```

对于正数和负数

```
In [30]: mssl([4, -2, -8, 5, -2, 7, 7, 2, -6, 5])
Out[30]: 19 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-25T08:36:20.773

因此，如果您了解什么是子列表（或切片，可以假定为同一事物），则切片由开始索引和结束索引定义。

因此，也许您可​​以尝试遍历所有可能的开始和结束索引并计算相应的总和，然后返回最大值。

提示：起始索引可以从 0 到`len(given_list)-1`. 结束索引可以是 from`start_index`到`len(given_list)-1`。您可以使用嵌套`for`循环来检查所有可能的组合。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-25T10:00:02.520

这是 Java 中的一个实现，使用 Kadane 的算法，它打印最大和的索引。该实现需要 O(n) 时间和 O(1) 空间。

```
public static void maxSumIndexes(int[] a) {

    int size = a.length;
    if(size == 0) return;

    int maxAtIndex = a[0], max = a[0];
    int bAtIndex = 0;
    int b = 0, e = 0;

    for(int i = 1; i < size; i++) {
        maxAtIndex = Math.max(a[i], a[i] + maxAtIndex);
        if(maxAtIndex == a[i])
            bAtIndex = i;

        max = Math.max(max, maxAtIndex);
        if(max == maxAtIndex) {
            e = i;
            b = (b != bAtIndex)? bAtIndex : b;
        }
    }

    System.out.println(b);
    System.out.println(e);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-25T08:37:59.803

简单的解决方案是遍历列表，然后尝试将切片相加，直到找到最好的切片。在这里，我还包括返回实际子列表的选项，默认情况下这是 False。我为此目的使用了 defaultdict，因为它比查找更简单。

```
from collections import defaultdict

def mssl(lst, return_sublist=False):
    d = defaultdict(list)
    for i in range(len(lst)+1):
        for j in range(len(lst)+1):
            d[sum(lst[i:j])].append(lst[i:j])
    key = max(d.keys())
    if return_sublist:
        return (key, d[key])
    return key

print mssl([4, -2, -8, 5, -2, 7, 7, 2, -6, 5])
19
print mssl([4, -2, -8, 5, -2, 7, 7, 2, -6, 5], True)
(19, [[5, -2, 7, 7, 2]]) 
```

奖励：列表理解方法：

```
def _mssl(lst):
    return max( sum( lst[i:j] ) for i in xrange(len(lst)+1) for j in xrange(i, len(lst)+1) ) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-02T16:41:08.507

我假设这是在产生最大和的数组中找到子序列的问题。我在搜索最大和 SUBSET 问题时遇到了这个问题。

这个问题的java实现：

```
public static int maximumSumSubSequence(int[] array) {

    if (null == array) {
        return -1;
    }

    int maxSum = Integer.MIN_VALUE;
    int startIndexFinal = 0;
    int endIndexFinal = 0;
    int currentSum = 0;
    int startIndexCurrent = 0;

    for (int i = 0; i < array.length; i++) {
        currentSum += array[i];

        if (currentSum > maxSum) {
            maxSum = currentSum;
            endIndexFinal = i;
            startIndexFinal = startIndexCurrent;
        }
        if (currentSum <= 0) {
            currentSum = 0;
            startIndexCurrent = i + 1;
        }
    }
    System.out.println("startIndex: " + startIndexFinal + " endIndex: " + endIndexFinal);
    return maxSum;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-25T08:35:37.477

它要求您选择列表的较小部分，以使较小部分的总和最大。

如果列表都是正数`[1 2 3]`，那么总和最大的子部分当然就是整个列表的总和，`[1 2 3]`即 6。

如果列表都是负数`[-1 -2 -3]`，那么总和最大的小节就是总和为`[]`0 的无。

但是，如果列表有一些正面和一些负面的决定，那就更难了

`[1 2 3 -100 3 4 5]`你应该看到`[3 4 5]`并返回 12

`[1 2 3 -2 3 4 5]`你应该使用它并返回 16

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-25T08:57:19.480

这种区别对 OP 来说可能并不重要，他似乎只是想了解如何解决问题，但我认为值得一提：

这里的其他解决方案涉及重复总结列表的所有子部分。我们可以通过使用动态编程来避免这些重复的总和，因为当然，如果我们已经知道从`i`到的总和，`j`我们不需要再次将它们相加来得到从`i`到的总和`j+1`！

也就是说，制作部分和的二维数组，这样`partsum[i, j] == sum(lst[i:j])`. 类似的东西（使用字典，因为它更容易索引；一个 numpy 数组同样容易且更有效）：

```
import operator

def mssl(lst, return_sublist=False):
    partsum = { (0, 0): 0 }  # to correctly get empty list if all are negative
    for i in xrange(len(lst) - 1):  # or range() in python 3
        last = partsum[i, i+1] = lst[i]
        for j in xrange(i+1, len(lst)):
            last = partsum[i, j+1] = last + lst[j]

    if return_sublist:
        (i, j), sum = max(partsum.iteritems(), key=operator.itemgetter(1))
        return sum, lst[i:j]

    return max(partsum.itervalues())  # or viewvalues() in 2.7 / values() in 3.x 
```

这需要 O(n^2) 时间和内存，而 Lev/Inbar 的方法需要 O(n^3) 时间和 O(1) 内存（如果没有像 Inbar 的第一个代码示例那样愚蠢地实现）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-13T01:06:44.997

我正在介绍一种基于动态编程的方法。主要思想是，当我们遍历数组时，向我们当前的 sum-value 添加一个新元素应该增加 sum 的值，或者，我们继续使用当前元素并忘记旧的 sum-value。

为了适应具有负值的数组，我们用数组的第一个元素实例化我们的变量。

```
def maxSumSubArr(arr):
    cur_sum = best_sum = arr[0]
    for i in range(1, len(arr)):
        cur_sum = max(arr[i], cur_sum+arr[i])
        best_sum = max(best_sum, cur_sum)
    return best_sum 
```

该方法的运行时间为O(n)，空间复杂度为O(1)。

如果您希望在没有任何元素为正的情况下输出为零，则使用 0 实例化 cur_sum 和 best_sum 变量，并从第一个元素而不是第二个元素进行迭代。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-20T15:54:04.980

这篇[文章](http://www.pixelstech.net/article/1366649413-Find-max-subarray-of-an-array)介绍了三种方法来找到数组的最大子数组。

*   蛮力 (O(n*n))
*   分而治之 (O(nlgn))
*   Kadane 算法 (O(n))

其中，最快的是时间复杂度为 O(n) 的 Kadane 算法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-08T16:28:52.827

这是 javascript 中最大子数组问题的最短和最佳解决方案：

```
var maxSubArray = function(nums) {
    for (let i = 1; i < nums.length; i++){
        nums[i] = Math.max(nums[i], nums[i] + nums[i - 1]);
    }
    return Math.max(...nums);
}; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-10-02T10:01:53.563

如果有人正在寻找更长版本的代码，这里是：

```
def mesl(lst):
    sub_sum = list()
    row_sum = list()
    for i in range(len(lst)):
        sub_sum = list()
        sub_sum.append(lst[i])
        k = 1
        for j in range(i+1,len(lst)):
            sub_sum.append(sub_sum[k-1] + lst[j])
            k+=1
        row_sum.append(max(sub_sum))      
    sum = max(row_sum)
    if  sum < 0:
        sum = 0
    return sum 
```

# php - PHP所有组合成数组

> ID：15062848
> 
> 赞同：2
> 
> 时间：2013-02-25T08:27:58.590
> 
> 标签：php

假设我有两个变量，字符串转换为数组

```
$VAR_1 = '1-1:2-1';
$VAR_1 = Explode(':', $VAR_1);

$VAR_2 = '3-1:4-1:2-2:2-3:2-4';
$VAR_2 = Explode(':', $VAR_2); 
```

现在我想要 VAR_1 和 VAR_2 混合的“所有”组合到一个新的数组 $COMB

但至少 1 个或 VAR_1 的两个变量必须在新数组中，并且组合字符串必须由 5 个变量组成。

我需要所有组合，也需要重复，但顺序不同。

如何做到这一点？

场景：扑克游戏（VAR_1 = 玩家牌（颜色 - 数字）VAR_2 = 桌牌）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:57:35.490

```
 {
 $array1 = array(0 => 'zero_a', 2 => 'two_a', 3 => 'three_a');
 $array2 = array(1 => 'one_b', 3 => 'three_b', 4 => 'four_b');
 $result = $array1 + $array2;
 var_dump($result);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:07:01.070

首先，您需要创建一个包含所有 7 个变量的数组，使用简单

```
$arr3 = $arr1 + $arr2; 
```

或者

```
$arr3 = array_merge($arr1, $arr2); 
```

然后，您需要选择 5 元素组，这意味着将始终跳过 2 个元素，这 2 个元素将具有索引 $i 和 $j，使得 2 嵌套 for 循环成为此问题的出色解决方案，这是一个示例：

```
$array = array("1-2", "1-5", "1-8", "3-4", "2-1", "2-2", "1-6");
$result = array(); //not sure if this line is nesseserly, but better be sure
for ($i = 0; $i < 7; $i++) {
    for ($j = $i + 1; $j <= 7; $j++) {
        $buffer = array(); //this is nesseserly
        for ($k = 0; $k < 7; $k++) {
            if ($k == $i || $k == $j) {
                continue;
            }
            $buffer[] = $array[$k]; //add to end
        }
        $result[] = $buffer; //add to end
    }
}
var_dump($result); 
```

这对我有用，经过测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T08:32:52.290

使用 array_merge()

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

```
$a = array("a", "b", "c");
$b = array("g", "a", "f");
$c = array_merge($a, $b);
var_dump($c); //array("a", "b", "c", "g", "a", "f"); 
```

# ios - 在 CoreData 中使用连接表获取数据

> ID：15062860
> 
> 赞同：1
> 
> 时间：2013-02-25T08:28:55.887
> 
> 标签：ios, core-data, fetch

我有三个表，其关系如下图所示。在**Mark Kryzhanouski**（[CoreData 多对多关系](https://stackoverflow.com/questions/14973660/coredata-many-to-many-relationship/14975539#comment21036447_14975539)）的帮助下，我知道如何访问某些配方中的所有成分集：

```
NSMutableArray* ingredients = [recipe valueForKeyPath:@"ingredients.ingredient"]; 
```

但我想通过获取来访问成分列表。因为以后我会准备“到购物车”功能。

![方案](../Images/2cbd1a83d1066edd71f5a6094a031477.png)

我是这样做的

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY count.inRecipe == %@", self.recipe]; 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:58:00.483

简短的回答：是的，它是正确的。

要显示配方的成分`count`和`inCart`属性，您必须找到与配方和成分相关的*Join对象。*

*Join*实体的以下谓词应给出该结果：

```
NSManagedObject *theIngredient;
[NSPredicate predicateWithFormat:@"inRecipe == %@ AND ingredient == %@", self.recipe, theIngredient] 
```

# html - html5 css3 显示 svg 悬停的图像

> ID：15062867
> 
> 赞同：0
> 
> 时间：2013-02-25T08:29:32.297
> 
> 标签：html, css, svg

我在 html5 css 3 中有以下 svg 标记

```
<svg id="optionSvg" width="88" height="178">
    <rect id="opt1" class="mouseOver item1" x="125" y="70" width="200" height="150" fill="blue" stroke="black" style="z-index: 1"></rect>
    <rect id="opt2" class="mouseOver" x="350" y="70" width="200" height="150" fill="yellow" stroke="black"></rect>
    <rect id="opt3" class="mouseOver" x="125" y="250" width="200" height="150" fill="green" stroke="black"></rect>
    <rect id="opt4" class="mouseOver" x="350" y="250" width="200" height="150" fill="orange" stroke="black"></rect>
    <rect id="opt5" class="mouseOver" x="125" y="430" width="430" height="150" fill="purple" stroke="black"></rect>
</svg> 
```

这是css类

```
 .mouseOver:hover {
        opacity: 0.1;
        fill: white;
        z-index: -1;
        position: relative;
    }

    .item1:hover {
        position: relative;
        background: url(testImage.png) no-repeat;
        background-attachment: fixed;
        animation: ease-in;
    } 
```

所以我想做的是在鼠标悬停在第一个项目上时显示 testImage.png，但看起来它不起作用。**请不要使用 jQuery，javascript 可以**

# c# - 使用 mssql 数据库复制的 dotNET 项目的最佳实践

> ID：15062868
> 
> 赞同：0
> 
> 时间：2013-02-25T08:29:35.023
> 
> 标签：c#, entity-framework, nosql, replication

我正在使用 C#、实体框架 4、mssql 开发一个 Web 项目。随着数据越来越大（不是很大，但对于单个服务器来说很难），我们决定在数据访问层进行一些更改以提高吞吐量和性能。

因为将数据库更改为 nosql 的重构成本很高，所以我们计划使用我以前从未使用过的数据库复制。

*   我们是否应该使用多个“连接字符串”，由程序员根据“读”或“写”操作明确使用？
*   读奴隶会导致“脏”读吗？
*   还有其他最佳实践可以以最小化的重构成本处理这个问题吗？

我们不仅限于 mssql 服务器。

ps：我们没有很多表，但是有一些**社交**数据足够大，很难分开表/数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:45:33.573

你不需要 NoSQL，你需要摆脱“数据库综合症”:)

这意味着您可以拥有一组较小的数据库，而不是一个大数据库。我非常确定您的系统有许多不同的问题。例如：计费、运输等。

为什么不将这些关注点分开到不同的数据库中呢？因此，您的“计费”子系统将拥有自己的数据库，即“运输”-另一个，无论您拥有多少。

现在它变得更容易扩展：如果需要，您可以简单地将它们放在单独的服务器上，或者给重要的一个专用硬件，然后将其余部分放在一起，等等。

它也将更容易管理：您可以在一个上下文中单独更改事物而不会影响其他上下文。

这就是“最佳实践”，也是 SOA 风格的一部分；）

另一个（在我看来不太好）是所谓的“水平分片”。比如说，您的系统使用“项目”运行，您可以简单地将每个“项目”（及其所有数据）放入单独的数据库中。它也可以工作，但并不适合所有东西并且有自己的技巧。

# c# - 在 C# winforms 中显示 2^40000 点

> ID：15062870
> 
> 赞同：1
> 
> 时间：2013-02-25T08:29:44.223
> 
> 标签：c#, .net, winforms

我想创建一个二维图并在该图上显示 2^40000 个点。现在显然不可能一次显示所有这些。没有人会简单地拥有这么多的记忆。所以，我想一次只显示某些点，比如 2^7 左右，并允许平移工具，所以当用户平移时，它会加载并显示下一个点。

所以，问题是：

1) 这在 WinForms 中可行吗？

2）当用户平移屏幕时如何获得通知。任何代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:44:17.557

使用[ZedGraph](http://sourceforge.net/projects/zedgraph/)是可能的

```
using System;
using System.Drawing;
using System.Threading;
using System.Windows.Forms;
using ZedGraph;

namespace GraphTest
{
    public partial class Form1 : Form
    {
        private readonly Fill _flip = new Fill(Color.White);
        private readonly PointPairList _mPointsListSample;
        private readonly GraphPane _myPane;

        public Form1()
        {
            InitializeComponent();

            _myPane = zedGraphControl1.GraphPane;
            _myPane.YAxis.Title.Text = "Sample";
            _myPane.YAxis.Title.FontSpec.Size = 5f;
            _myPane.YAxis.Scale.FontSpec.Size = 5f;
            _myPane.XAxis.Scale.FontSpec.Size = 5f;
            _mPointsListSample = new PointPairList();

            _myPane.Chart.Fill = new Fill(Color.White, Color.Black, 45F);
            _myPane.Fill = new Fill(Color.White, Color.Black, 45F);

            _myPane.XAxis.MajorGrid.IsVisible = true;
            _myPane.XAxis.Scale.Min = 0;
            _myPane.XAxis.Scale.Max = Convert.ToInt32(Math.Pow(2, 7));

            _myPane.YAxis.Title.FontSpec.FontColor = Color.Pink;
            _myPane.YAxis.Scale.Align = AlignP.Inside;
            _myPane.YAxis.Scale.Min = 0;
            _myPane.YAxis.Scale.Max = 500;

        }

        private void Form1_Shown(object sender, EventArgs e)
        {
            var limit = new Random();
            bool flag = true;
            while (true)
            {
                if (flag)
                {
                    for (int i = 0; i < Convert.ToInt32(Math.Pow(2, 7)); i++)
                    {
                        _mPointsListSample.Add(i, limit.Next(500));
                        Thread.Sleep(50);
                        Application.DoEvents();
                        DrawGraph();
                        flag = false;
                    }
                }
                if (!flag)
                {
                    for (int i = 0; i < Convert.ToInt32(Math.Pow(2, 7) - 1); i++)
                        _mPointsListSample[i].Y = _mPointsListSample[i + 1].Y;
                    _mPointsListSample.Insert(Convert.ToInt32(Math.Pow(2, 7) - 1), Convert.ToInt32(Math.Pow(2, 7) - 1), limit.Next(500));
                    _mPointsListSample.RemoveAt(Convert.ToInt32(Math.Pow(2, 7)));
                    Thread.Sleep(50);
                    Application.DoEvents();
                    DrawGraph();
                }
            }
        }

        private void DrawGraph()
        {
            _myPane.CurveList.Clear();
            // Fabricate some data values 
            LineItem myCurve = _myPane.AddCurve("Sample", _mPointsListSample, Color.Red, SymbolType.Circle);
            myCurve.Symbol.Fill = _flip;
            myCurve.Line.IsVisible=false;
            zedGraphControl1.AxisChange();
            zedGraphControl1.Refresh();
        }
    }
} 
```

我希望它可能有助于使用 2D Graph 在 Winform 中绘制所有值，如您所期望的 2^7。

# css - 保证金保留在容器上

> ID：15062871
> 
> 赞同：0
> 
> 时间：2013-02-25T08:29:46.800
> 
> 标签：css, image, margins

我想知道一种不留下剩余边距的方法，换句话说，我想用图像填充整个容器，但我需要在图像之间留出空间。我正在使用`margin-right`，即问题就在那里。还有另一种方法可以做到这一点吗？

图片：

![在此处输入图像描述](../Images/ff908756a4eac37228e644284463ed90.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:46:27.067

这与 Marcins awnser 几乎相同，尽管它仍然可以在不支持 CSS3 nth-child 选择器的浏览器中工作。

在最后一个元素上放置一个类并从该类中删除右边框

```
.you_class {  
    margin-right: none;
} 
```

这应该使它在旧浏览器中也能工作

或者，如果您有 4 x 3 单独的图像。

给它们一个类或将它们放入容器中，然后直接在图像上设置样式。

如果您想保留蓝色边框，请给它们一个彩色边框，或者只给它们一些边距以在它们之间留出一些空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:36:56.863

您可以使用以下 css 样式，从每个第 4 个元素中删除右边距：

```
#container img:nth-child(4n+4) {  
    margin-right: none;
} 
```

# asp.net - 将文件上传到 Internet 时出现错误？

> ID：15062884
> 
> 赞同：0
> 
> 时间：2013-02-25T08:31:09.343
> 
> 标签：asp.net, ms-access

任何人都可以帮助我在尝试注册用户时遇到错误，在本地一切正常，但是当我远程上传文件时遇到错误。这是我的代码

```
 Dim conn As OleDbConnection
    Dim strinsert As String
    Dim cmdinsert As OleDbCommand

    conn = New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|sabersolutions.mdb")
    strinsert = "INSERT INTO register(Name,Email,Passwords,Newsletter,ReportTemplates,ReturningMember,Sponsor)SELECT TOP 1 @Name,@Email,@Passwords,@Newsletter,@ReportTemplates,@ReturningMember,@Sponsor FROM register WHERE NOT EXISTS(SELECT 1 FROM register WHERE Name=@Name AND Email=@Email AND Passwords=@Passwords AND Newsletter=@Newsletter AND ReportTemplates=@ReportTemplates AND ReturningMember=@ReturningMember AND Sponsor=@Sponsor)"

    cmdinsert = New OleDbCommand(strinsert, conn)
    cmdinsert.Parameters.Add("@Name", OleDbType.VarWChar, 255).Value = txtName.Text
    cmdinsert.Parameters.Add("@Email", OleDbType.VarWChar, 255).Value = txtEmail.Text
    cmdinsert.Parameters.Add("@Passwords", OleDbType.VarWChar, 255).Value = txtPass.Text
    cmdinsert.Parameters.Add("@Sponsor", OleDbType.Boolean, 1).Value = ckSponsor.Checked
    cmdinsert.Parameters.Add("@Newsletter", OleDbType.Boolean, 1).Value = ckNews.Checked
    cmdinsert.Parameters.Add("@ReportTemplates", OleDbType.Boolean, 1).Value = ckReportTemp.Checked
    cmdinsert.Parameters.Add("@ReturningMember", OleDbType.Boolean, 1).Value = ckRSponsor.Checked
    cmdinsert.Parameters.Add("@Sponsor", OleDbType.Boolean, 1).Value = ckSponsor.Checked

    cmdinsert.Connection.Open()

    cmdinsert.ExecuteNonQuery()

    cmdinsert.Connection.Close()

    LblSuccess.Text = "You have successfully Register, Please Login to view our Online Booking Sytem." 
```

我得到的错误

```
Server Error in '/' Application.

Operation must use an updateable query.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.OleDb.OleDbException: Operation must use an updateable query.

Source Error: 

Line 27:         cmdinsert.Connection.Open()
Line 28: 
Line 29:         cmdinsert.ExecuteNonQuery()
Line 30: 
Line 31:         cmdinsert.Connection.Close()

Source File: C:\inetpub\vhosts\sabersolutions.co.za\httpdocs\RegisterandLoginForm.aspx.vb    Line: 29 
```

堆栈跟踪：

```
 [OleDbException (0x80004005): Operation must use an updateable query.]
   System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr) +1081356
   System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult) +247
   System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult) +194
   System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult) +58
   System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method) +167
   System.Data.OleDb.OleDbCommand.ExecuteNonQuery() +113
   RegisterandLoginForm.Button2_Click(Object sender, EventArgs e) in C:\inetpub\vhosts\sabersolutions.co.za\httpdocs\RegisterandLoginForm.aspx.vb:29
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:33:46.453

我远不是 Access 的新手，但您的查询中有错误；

```
....
SELECT TOP 1 @Name,@Email,@Passwords,@Newsletter,
             @ReportTemplates,@ReturningMember,@Sponsor 
FROM register 
... 
```

应该是；

```
....
SELECT TOP 1 Name,Email,Passwords,Newsletter,
             ReportTemplates,ReturningMember,Sponsor 
FROM register 
... 
```

尽管您的“可更新查询”问题很可能是您尝试`UPDATE`在 Access 上使用 SQL 服务器查询，但 Access 的`UPDATE`语法远非标准，可能需要将子查询重写为连接。拥有更多 Access-Foo 的人可能会为您提供帮助。

或者，您可以尝试使用 Access Query Wizard，它可以帮助您使用正确的 Access 语法重写查询。

# java - 使用 elasticsearch 对文本进行分类

> ID：15062897
> 
> 赞同：3
> 
> 时间：2013-02-25T08:32:01.660
> 
> 标签：java, search, elasticsearch

我目前正在从事一个项目，该项目涉及从文本中识别不同的“关键字”。

例如，假设以下输入文本：

> “这是从布宜诺斯艾利斯写的关于肉类的一些文本的例子”。

进一步让我们假设我的 elasticsearch 实例存储了以下文档：

> 城市：[巴塞罗那、布宜诺斯艾利斯、洛杉矶……]

和

> 类别：[金融，政治，..]

我需要一种从输入文本中识别相应城市和类别的方法。

我的第一种方法是使用“或”运算符进行搜索查询，看看哪个排名最高。之后，我还将匹配的文档与文本重新匹配，以确保这些文本确实存在（换句话说，确保“los angeles”匹配，因为“los angeles”这个词在文本中并且只有“los”或“安吉利斯）。

我想知道这是否是使用 Elasticsearch 做这类事情的最佳实践方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T09:40:42.750

我建议如下：

*   使用[`match_phrase`](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)查询来识别这些术语`los`并`angeles`以相同的顺序和位置存在和存在
*   将每个查询包装在一个[命名过滤器](http://www.elasticsearch.org/guide/reference/api/search/named-filters.html)中，以便您可以识别哪些匹配。

例如，创建此文档：

```
curl -XPOST 'http://127.0.0.1:9200/test/test?pretty=1'  -d '
{
   "text" : "This is an example of some text written from Buenos Aires about Meat"
}
' 
```

然后运行此查询以查找`Buenos Aires`or `Los Angeles`：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "constant_score" : {
         "filter" : {
            "or" : [
               {
                  "fquery" : {
                     "_name" : "buenos_aires",
                     "query" : {
                        "match_phrase" : {
                           "text" : "Buenos Aires"
                        }
                     }
                  }
               },
               {
                  "fquery" : {
                     "_name" : "los_angeles",
                     "query" : {
                        "match_phrase" : {
                           "text" : "Los Angeles"
                        }
                     }
                  }
               }
            ]
         }
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "text" : "This is an example of some text written from Buenos Aires about Meat"
#             },
#             "_score" : 1,
#             "_index" : "test",
#             "_id" : "JIwnN_FVTv-0i5YGrlHLeg",
#             "_type" : "test",
#             "matched_filters" : [
#                "buenos_aires"
#             ]
#          }
#       ],
#       "max_score" : 1,
#       "total" : 1
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 58
# } 
```

注意`matched_filters`结果中的元素，指示匹配的过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:39:10.177

看起来这也可能非常适合[Percolator](http://www.elasticsearch.org/blog/2011/02/08/percolator.html)。

您可以将查询作为单独索引上的文档进行索引，然后渗透您的文档以了解它们匹配哪些查询。看看[percolate API](http://www.elasticsearch.org/guide/reference/api/percolate.html)。

您需要创建一个索引（使用[create index API](http://www.elasticsearch.org/guide/reference/api/admin-indices-create-index.html)），我们称之为 test 例如：

```
curl -XPUT localhost:9200/test 
```

然后注册我们的“布宜诺斯艾利斯”查询并为其命名。正如 DrTech 在他的回答中建议的那样，匹配短语查询似乎是一个不错的选择。

```
curl -XPUT localhost:9200/_percolator/test/buenosaires -d '{
    "query" : {
        "match_phrase" : {
            "text" : "Buenos Aires"
        }
    }
}' 
```

然后渗透，这意味着我们发送一个文档，然后我们返回它与我们之前索引的查询中的哪些查询匹配：

```
curl -XGET localhost:9200/test/type1/_percolate -d '{
    "doc" : {
        "city" : "This is an example of some text written from Buenos Aires about Meat"
    }
}' 
```

在这种情况下，您应该返回以下 json，其中 buenosaires 是我们在索引查询时为查询指定的名称：

```
{"ok":true, "matches":["buenosaires"]} 
```

DrTech 的回答非常好。我认为主要区别在于您的文字实际在哪里。如果它已经在 elasticsearch 中被索引，那么最好的策略是进行命名查询以在单个请求中获取您的文档匹配的那些。

另一方面，如果您要索引数据并且需要在实际索引它们之前丰富您的文档，那么 percolator 可能更适合。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:36:07.013

将“关键字”标识为先前索引值并避免“los”“angeles”之类的情况的最佳选择是使用术语 facet 查询未分析的字段。请注意内存成本，并在[此处](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)查看更多示例。干杯

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-27T09:41:05.503

[弹性搜索](http://www.elasticsearch.org)基本上基于[Apache Lucene](http://lucene.apache.org)，因此您可以使用任何您想要的 Apaches 查询：

[查询命令](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)+[查询语法](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)

在您的情况下，我建议您查看“字段”查询：

[http://www.elasticsearch.org/guide/reference/query-dsl/field-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/field-query.html)

# php - 如何以 kb 为单位计算图像大小

> ID：15062898
> 
> 赞同：0
> 
> 时间：2013-02-25T08:32:06.817
> 
> 标签：php, size

如何以 kb 为单位计算图像大小

此代码显示随机图像，我想以 kb 格式添加图像大小

如何在所有图像中添加图像大小请帮我解决这个问题

谢谢

```
<?php

$directory = "./*/";

//get all image files with a .jpg extension.
$images = glob("" . $directory . "*.jpg");

$imgs = '';
// create array
foreach($images as $image){ $imgs[] = "$image"; }

//shuffle array
shuffle($imgs);

//select first 20 images in randomized array
$imgs = array_slice($imgs, 0, 20);

?>

 <table id="results">
            <tr>
            </tr>
<tr>

<?php $num_of_files = 0; $i=0; foreach ($imgs as $img):?>
<td><a href="<?php echo $img ?>" target="_blank"><img class="shadow1" name="field-name" src="<?php echo $img ?>thumb.jpeg" width=165 height=135 /></td>
<?php if (++$num_of_files == 12)break; ?>
  <?php if(++$i%3==0): ?>
    </tr><tr>
  <?php endif ?>

<?php endforeach ?>

</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:35:33.420

使用 PHP 的内存 I/O 流。

```
$img = imagecreatetruecolor(100,100);
// do your processing here
// now save file to memory
imagejpeg($img, 'php://memory/temp.jpeg'); 
$size = filesize('php://memory/temp.jpeg'); 
```

# ruby - 有没有办法使用 ruby 或 linux 命令临时更改进程/线程的主机名 ip 映射？

> ID：15062900
> 
> 赞同：1
> 
> 时间：2013-02-25T08:32:19.530
> 
> 标签：ruby, linux, dns, hostname, hosts

有没有办法使用 ruby​​ 或一些本机 linux 命令临时为进程设置主机名 ip 映射？

目标是让进程知道主机名及其 ip。其余的进程应该不知道这个变化。

我知道您可以在 /etc/hosts 或通过创建自定义 DNS 服务器来指定主机名查找，但更改会影响系统内的所有进程。

# iphone - 核心蓝牙和后台：检测设备并触发操作，即使在后台模式下几天？

> ID：15062902
> 
> 赞同：19
> 
> 时间：2013-02-25T08:32:32.180
> 
> 标签：iphone, ios, core-bluetooth, bluetooth-lowenergy

我编写了一个应用程序，当某个低功耗蓝牙设备进入范围内时需要得到通知。如果 BLE 设备被注意到，我的应用程序只会存储一个时间戳。

如 WWDC 2012 Core Bluetooth 视频中所述，在使用 Core Bluetooth 时，应用程序有两种可能在后台模式下运行：

> **事件背景**
> 
> 事件后台可能是大多数应用程序在与低功耗蓝牙设备交互时使用的。当应用程序在后台时，此模式不允许与附件直接通信，但当它想与应用程序通信时，它会提供来自附件的通知。当您的应用程序在后台时，iOS 将保持与 BTLE 附件的连接，并将继续监视通知。当连接的 BTLE 配件有通知可用时，iOS 会通知用户该配件想与您的 App 通话，允许用户加载您的 App 并与该配件进行交互。由于许多设备需要节省电量，因此仅在确定的时间提供信息将大大提高配件和 iPhone 4S 的电池寿命。
> 
> *   此模式不需要 info.plist 条目。
> 
> **会话后台**
> 
> 有时应用程序必须与附件交互，即使它在后台运行。考虑一个需要实时监测心率的正在运行的应用程序。这个模型有一个明确的开始和停止。用户开始在应用程序中运行。当跑步处于活动状态时，应用程序会读取心率信息，直到跑步完成或停止。会话后台还允许在应用程序处于后台时扫描和连接到 BTLE 配件。即使应用程序在后台，scanForPeripheralsWithServices 或 connectPeripheral 调用仍将继续。CoreBluetooth 将继续监视与您的应用程序正在寻找的服务相匹配的特定外围设备或外围设备，并在找到或连接时调用您的应用程序委托。铭记，每次 BTLE 外设或 iPhone 4S 使用其无线电时，都会消耗相应设备的可用电量。使用基于会话的后台的应用程序开发人员必须注意电源使用情况。
> 
> *   会话后台需要在您的 Apps info.plist 中进入 UIBackgroundModes、bluetooth-central 的后台模式条目。

直到现在我会话背景（使用相应的 info.plist 条目）。该应用程序要求 iOS 检索所有已知设备，然后将连接命令提供给我正在寻找的设备。即使在我的应用程序后台运行几分钟后，连接回调也会出现。

但是：应用程序在 - 比方说 - 一小时后暂停。这意味着下次用户启动我的应用程序时，它无法判断是否有任何感兴趣的 BLE 设备的目击事件。

**所以我的问题是：**当某个 BLE 设备进入范围时，即使在发送到后台几天后，我的应用程序是否可以在没有用户交互的情况下获得通知，以便我可以存储我的时间戳？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-21T18:18:50.253

从 iOS 7 开始，您的用例现在很容易支持。在 iOS 7 之前，您的应用程序可以注册有关该外围设备的通知，并且当系统有通知要传递时，它会在后台被唤醒。但是，如果您的应用程序在后台运行或重新启动时系统受到内存压力，则不会重新启动它。`CBCentralManager`iOS 7 为和增加了状态恢复功能`CBPeripheralManager`，因此现在操作系统将以有限的容量重新启动您的应用程序，即使它由于上述任何一种情况而没有运行。有关更多信息，请参阅[CoreBluetooth 指南](https://developer.apple.com/library/ios/documentation/NetworkingInternetWeb/Conceptual/CoreBluetooth_concepts/CoreBluetoothBackgroundProcessingForIOSApps/PerformingTasksWhileYourAppIsInTheBackground.html)。

简而言之，对于您的用例，您可以执行以下操作：

*   继续支持`bluetooth-central`作为后台执行模式。
*   选择加入国家保护和恢复，如“增加对国家保护和恢复的支持”中所述[。](https://developer.apple.com/library/ios/documentation/NetworkingInternetWeb/Conceptual/CoreBluetooth_concepts/CoreBluetoothBackgroundProcessingForIOSApps/PerformingTasksWhileYourAppIsInTheBackground.html#//apple_ref/doc/uid/TP40013257-CH7-SW11)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:36:04.677

不，iOS 不保证您的应用程序在后台保持活跃。文档说：

> 但是，在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下，可能会调用此方法。

（[applicationWillTerminate](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006786)的文档）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-07T08:21:52.877

使用 IOS7 **BLE 状态保存和恢复**

如果您的应用程序**由于内存压力而被 IOS 终止**（这就是您的应用程序在几天后无法运行的原因），它就无法再处理蓝牙代理了。在这种情况下，如果您使用了 State Preservation & Restoration，您的应用程序可以重新启动到后台再次运行，同样只有 10 秒。10s 后，它将进入暂停状态。 **只有在这种情况下，CBCentralManager 的 willRestoreState 才能被触发。**

祝你好运。

# javascript - 通过 ID 参数参考另一个对象构建数组

> ID：15062904
> 
> 赞同：0
> 
> 时间：2013-02-25T08:32:34.473
> 
> 标签：javascript, implementation

我试图用每个 ID 的数据构建和排列，所以我可以按 ID 从它读取数据，所以我实现了这个东西：

```
for (var i in data.length) {

//data - XML response 
            var obj = {};
            /*setting al data
            obj.ID =parseNode(data[i], "ID");
            obj.year= parseNode(data[i], "year");
            object.model= parseNode(data[i], "model");
            ...
            ..
            */

            if (this.modelData[obj.ID] == null)
                this.modelData[obj.ID] = [];
            this.modelData[obj.ID].push(obj);
        } 
```

结果，我得到了一个很长的数组，在这个例子中是 745645364（MAX id），每个 ID 都有对象：

```
modelData[1]= object
modelData[745645364]= object
modelData[56]= object 
```

并读取这样的数据：

```
var year = this.modelData[ID].year; 
```

这是正确的做法吗？`length`我认为拥有一个包含 5 个对象和566456456的数组的想法很糟糕......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:41:26.427

您可以使用对象而不是数组。这样做将避免使用具有许多空索引的巨大数组。

# iis-7 - 在 windows server 中创建 301 重定向

> ID：15062906
> 
> 赞同：0
> 
> 时间：2013-02-25T08:32:48.310
> 
> 标签：iis-7, asp.net-mvc-4, web-config, http-redirect

我使用IIS 管理器中的**URL 重写**部分为我的网站创建一个`redirect 301`并将**搜索引擎**和用户`DomainName.com`从`www.DomainName.com`. 在 IIS 中为此目的创建规则后，它会在`web.config`文件中生成以下代码：

```
<rewrite>
    <rules>
        <rule name="redirect 301" stopProcessing="true">
            <match url="^DomainName\.com.*" />
            <action type="Redirect" url="www.{R:0}" />
        </rule>
    </rules>
</rewrite> 
```

但这对我不起作用。

我的代码中是否有任何错误，或者我必须使用另一种方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:04:10.387

我在[Scott Guthrie 的帖子](http://weblogs.asp.net/scottgu/archive/2010/04/20/tip-trick-fix-common-seo-problems-using-the-url-rewrite-extension.aspx)中找到了答案：场景 4：规范主机名，为此我必须创建`canonical domain name`规则并编写我的主 url 以将其他形式的 url 重定向到那个。文件中的代码`web.config`是这样的：

```
<rewrite>
    <rules>
        <rule name="CanonicalHostNameRule1">
            <match url="(.*)" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^www\.domainName\.com$" negate="true" />
            </conditions>
            <action type="Redirect" url="http://www.domainName.com/{R:1}" />
        </rule>
    </rules>
</rewrite> 
```

# spring-security - spring 3 测试：@Autowired 的问题-> 无法加载上下文

> ID：15062908
> 
> 赞同：1
> 
> 时间：2013-02-25T08:32:53.457
> 
> 标签：spring-security, spring-test

我有以下测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
    "classpath:ApplicationContext.xml",
    "classpath:SecurityContext.xml"
})
public class CompoundServiceSecurityTest {

    @Autowired
    @Qualifier("testCompoundService")
    private TestCompoundService testCompoundService;

    //...
} 
```

在这个类中， testCompoundService 被正确地自动装配并工作（如果实际问题是“禁用”的）。安全上下文包含以下自定义类：

```
<bean id="testCompoundPermission"
      class="myPackage.TestCompoundPermission">
</bean> 
```

并且该类包含自动装配的 testCompoundService：

```
public class TestCompoundPermission extends AbstractPermission {

    @Autowired
    @Qualifier("testCompoundService")
    private TestCompoundService testCompoundService;

    //...
} 
```

问题是 @Autowired testCompoundService因依赖 testCompoundService 本身而`TestCompoundPermission`失败。依赖于 StructureService，后者依赖于 StructureRepository（由 Spring Data 生成）。例外是：`NoSuchBeanDefinitionException``TestCompoundService`

```
NoSuchBeanDefinitionException: No matching bean of type myApp.repository.StructureRepository found 
```

如果我`@Autowired`在`TestCompoundPermission`应用程序上下文中正确加载评论（当然，一些测试会因 NullPointerException 而失败，因为 testCompoundService 为空）。

这很奇怪，因为显然在测试类上加载完全正常的 bean 工作得非常好。为了完整起见，我还尝试使用构造函数参数并删除了@Autowired。结果相同。对我来说，看起来 2 个上下文是完全分离的，因此安全上下文无法从应用程序上下文访问 bean。我该如何解决这个问题？

编辑：

堆栈跟踪的最后一部分（整个堆栈跟踪很大！）

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'testCompoundService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private myApp.service.StructureService myApp.service.CompoundServiceImpl.StructureService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'StructureService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: myApp.repository.StructureRepository myApp.service.StructureServiceImpl.structureRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [myApp.repository.StructureRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:871)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:813)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:730)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private myApp.service.StructureService myApp.service.CompoundServiceImpl.StructureService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'StructureService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: myApp.repository.StructureRepository myApp.service.StructureServiceImpl.structureRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [myApp.repository.StructureRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:513)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'StructureService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: myApp.repository.StructureRepository myApp.service.StructureServiceImpl.structureRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [myApp.repository.StructureRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:871)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:813)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:730)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: myApp.repository.StructureRepository myApp.service.StructureServiceImpl.structureRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [myApp.repository.StructureRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:513)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [myApp.repository.StructureRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:947)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:816)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:730)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485) 
```

编辑2：

发现这个：

[http://forum.springsource.org/showthread.php?113720-No-matching-bean-when-using-custom-PermissionEvaluator-and-Spring-Data-JPA](http://forum.springsource.org/showthread.php?113720-No-matching-bean-when-using-custom-PermissionEvaluator-and-Spring-Data-JPA)

这正是我遇到的问题。但是，解决方法不起作用，因为`<jpa:repository />`它不再是有效元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:03:17.620

**加载配置文件**不是问题

 **这是您在 xml 文件中定义的**bean 及其属性的问题。**

检查**.xml 文件**是否提供了正确的 bean 引用及其在测试类中使用的属性引用。

**例如。）**

**testCompoundService Bean**必须在**您调用的任何 .XML 中定义**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:20:07.740

事实证明，这是 Spring 数据的普遍问题。

请参见

[https://jira.springsource.org/browse/SEC-2136](https://jira.springsource.org/browse/SEC-2136)

以获得完整的答案。**

# java - 一个基于 Java 的类似可读性的解析器

> ID：15062910
> 
> 赞同：2
> 
> 时间：2013-02-25T08:32:58.453
> 
> 标签：java, html-parsing, readability

我想知道有哪些独立选项可用于解析普通网页并将其转换为易于阅读的格式，这些选项由 Pocket、Readability 和 Instapaper 等服务提供。

我主要是在寻找要包含在我的应用程序中的 Java 解析器库，但总的来说，各种独立工具都会受到赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-29T20:18:32.737

我认为您正在追求[Snacktory](https://github.com/karussell/snacktory)，它似乎是当今 Java 最先进的技术，取代了 jreadability。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-07T21:40:42.853

Snackatory 现在本身声明它已经过时并建议使用[Crux](https://github.com/chimbori/crux)。

但也有[Readability4J](https://github.com/dankito/Readability4J)。它是 Mozilla 的 Readability.js 的 Kotlin 端口，用于 Firefox 的阅读器视图。所以 Readability4J 的输出与 Firefox 的阅读器视图完全匹配。

免责声明：我是 Readability4J 的作者。但我只是把它移植了，感谢 Mozilla 的出色工作：[https](https://github.com/mozilla/readability) ://github.com/mozilla/readability 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:46:37.600

[JSoup](http://jsoup.org/)是第一个想到的库。它非常适合抓取 HTML。您可以轻松地从网页中删除所有标签，只留下文本。（如果您知道目标页面的结构，您可以只使用特定的选择器来获取您想要的部分，或者排除您想要的部分。）

再说一次，你可能只是想要像[Flying Saucer](http://code.google.com/p/flying-saucer/)这样的东西，它会尽力将网页呈现为 PDF。

# neo4j - Neo4j Spring Data 的最佳用例是什么？

> ID：15062916
> 
> 赞同：0
> 
> 时间：2013-02-25T08:33:21.197
> 
> 标签：neo4j, spring-data-neo4j

我正在使用 Neo4j 进行社交网络分析，我想知道是否需要使用 Spring Data。节点的所有属性都是由客户端动态提供的，在 Spring Data 中，Neo4j 节点总是映射到一个对象，这意味着节点的模式是不可变的。那么spring数据只能在每个节点的schema不可变的情况下使用，还是我错过了什么？

我已经在 Spring 环境中工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:11:35.923

SDN最容易映射。如果您需要控制图表，例如在高度并发的场景中编写您不想修改分离的对象以镜像到图表，您可以简单地使用 Neo4j

```
@Autowired
Neo4jTemplate template;

....

template.query("my cypher query", parameters); 
```

让您的更新持久化，或直接查找节点。

# android - 从网页重定向到移动应用程序

> ID：15062918
> 
> 赞同：0
> 
> 时间：2013-02-25T08:33:26.493
> 
> 标签：android

单击移动浏览器中的特定链接时如何打开android应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:55:08.143

要在单击链接时打开您的应用程序，您必须：

*   定义一个特定的协议`protocol://`并在你的网页中的 href 的 URI 中使用它

*   通过在其清单中添加几行来确保您的应用程序捕获点击。

这应该会有所帮助：[如何侦听自定义 URI](https://stackoverflow.com/questions/3471503/how-to-listen-for-a-custom-uri)

# php - PHP 和 Jquery 如何

> ID：15062922
> 
> 赞同：1
> 
> 时间：2013-02-25T08:34:04.223
> 
> 标签：php, jquery

当页面加载时表单被隐藏并在单击“发送我们的邮件”时显示，我已经能够这样做，当用户单击“发送我们邮件”按钮时，表单将向下滑动，使用 jquery . 但现在面临的挑战是，当我单击“发送邮件”按钮时，页面会重新加载，这会使 jquery 再次运行并且表单再次被隐藏。虽然我在提交之前检查了这些字段以确保它们是否包含值。但是现在，即使在单击表单中的“发送邮件”按钮后字段是否包含值，页面也会重新加载并使表单再次隐藏。请问谁能告诉我我能做些什么来解决这个问题？感谢期待。

下面是我的 php 和 jquery 代码：

```
<script type="text/javascript">
$(function(){
    $("#contact_Holder").hide();
    slideDown();
});

function slideDown(){
    $("#slideDown").click(function() {
        $("#contact_Holder").slideDown("normal");
    });
    $("#sendmail").click(function() {
        $("#contact_Holder").show();
    });
} 
```

```
<?php 
if(isset($_POST['sendmail']))
{
if(!(isset($_POST['txtname']) || ($_POST['txtsubject']) || ($_POST['txtmessage'])) || empty($_POST['txtname']) || empty($_POST['txtsubject']) || empty($_POST['txtmessage']))
    {
echo '<font color="#090" size="3" face="Palatino Linotype,serif">'."please fill all fields thank you!".'</font>';
    }
else
{
$to = 'info@mail.com';
$subject = $_POST['txtsubject'].' '.$_POST['txtname'];
                $body = $_POST['txtmessage'];

                if(mail($to,$subject,$body))
                {
                    echo('<font color="#090" size="3" face="Palatino Linotype,serif">'."Your message has been sent successfully".'</font>');
                }
                else{ echo('<font color="#090" size="3" face="Palatino Linotype,serif">'."Message Delivery Failed!".'</font>'); }
            }
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T08:43:46.573

简而言之，您需要：

1.  将 jQuery 附加`onClick`到您的提交按钮。
2.  `e.preventDefault()`在单击功能的顶部调用（这将停止默认按钮行为）。
3.  [使用 jQuery Ajax 提交表单](https://stackoverflow.com/questions/1200266/submit-a-form-using-jquery)

这应该涵盖对问题进行排序所需的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:46:08.523

我认为单击发送邮件时您没有通过 ajax 发布数据。因此，由于提交了表单，页面会重新加载。您必须通过ajax发送数据并调用该方法

> 防止默认（）

在您的 ajax 发送方法中避免页面重新加载。

# python - 尝试使用 Python 从用户输入中找到最小值和最大值，标记值在最小值中一直显示为 -99

> ID：15062926
> 
> 赞同：0
> 
> 时间：2013-02-25T08:34:17.420
> 
> 标签：python

我想知道如何修复我的程序，它要求用户输入任何数字。

要终止程序，请输入 -99。就输入而言，一切都很顺利，直到我点击 -99 以停止程序，使其变为最小值。这是我的代码。最小值的最终答案不能是 -99。

```
s = -99
n = 1
minimum = None
maximum = None
print ("Enter a series of numbers")
print ("Enter -99 to quit.")
while n != s:
    n = float(input("Number: "))
    if minimum is None or n < minimum:
        minimum = n
    if maximum is None or n > maximum:
        maximum = n
    print ("The maximum is: ", maximum)
    print ("The minimum is: ", minimum) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:37:09.100

```
1\. n = 1
2\. 1 == -99 ?
3\. n = new input
4\. set new minimum from n
5\. n == -99? 
```

首先 (4.) 你设置新的最小值`n`(也是 if `n==-99`)，然后 (5.) 你测试它是否是停止的值。

我建议将循环更改为无限循环 ( `while True`)，然后测试它是否为 -99（在这种情况下打破循环），然后再设置新的最小值/最大值。

```
s = -99
n = 1
minimum = None
maximum = None
print ("Enter a series of numbers")
print ("Enter -99 to quit.")
while True:
    n = float(input("Number: "))
    if n == s:
        break
    if minimum is None or n < minimum:
        minimum = n
    if maximum is None or n > maximum:
        maximum = n
    print ("The maximum is: ", maximum)
    print ("The minimum is: ", minimum) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T08:41:54.547

您需要在循环结束时检查数字是否为 -99。你也想在循环之前得到 n 。此外，您需要在浮点数上使用 try 块，以防输入非浮点数（浮点数在此处引发异常，不返回无）：

```
import sys

s = -99
n = 1
minimum = None
maximum = None
print ("Enter a series of numbers")
print ("Enter -99 to quit.")
try:
    n = float(input("Number: "))
except ValueError:
    sys.exit("You did not enter a float!")

while n != s:
    minimum = n if minimum is None else min(n, minimum)
    maximum = n if maximum is None else max(n, maximum)
    print ("The maximum is: ", maximum)
    print ("The minimum is: ", minimum)
    try:
        n = float(input("Number: "))
    except ValueError:
        sys.exit("You did not enter a float!") 
```

# c# - Log4Net 与 AdoAppender 但在 SQL 中什么都没有

> ID：15062927
> 
> 赞同：0
> 
> 时间：2013-02-25T08:34:30.027
> 
> 标签：c#, sql, logging, log4net

我尝试使用 log4net 记录错误消息并使用 SQL 将它们保存到数据库中，但根本没有任何反应......我错过了什么吗？这是我的代码

```
 Hierarchy hierarchy = (Hierarchy)LogManager.GetRepository();
            hierarchy.Root.RemoveAllAppenders(); /*Remove any other appenders*/
            log4net.Repository.Hierarchy.Logger rootLogger = hierarchy.Root;
            rootLogger.Level = hierarchy.LevelMap["ERROR"];

            AdoNetAppender ado = new AdoNetAppender();
            ado.ConnectionType = "System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";
            ado.ConnectionString = ConfigurationManager.AppSettings["MSSQLConnectionString_nvn1"];
            ado.CommandText = "INSERT INTO Log ([Date],[Thread],[Level],[Identity],[Username],[Logger],[Message]) VALUES (@log_date, @thread , @level , @identity , @username ,  @logger, @message)";
            ado.BufferSize = 1;
            ado.Threshold = log4net.Core.Level.Error;

            AdoNetAppenderParameter logd = new AdoNetAppenderParameter();
            logd.ParameterName = "@log_date";
            logd.DbType = DbType.DateTime;
            logd.Layout = new log4net.Layout.RawTimeStampLayout();
            ado.AddParameter(logd);

                ...........

            ado.ActivateOptions();
            log4net.Config.BasicConfigurator.Configure(ado); 
```

谢谢。

摘要：任何人都可以检查我的代码并尝试给我一些关于如何将错误消息从 log4net 保存到数据库中的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T20:21:06.127

在配置文件或代码中将缓冲区大小设置为“1”，因为默认缓冲区大小为 512：

```
 <bufferSize value="1" /> 
```

# sql - 查找每个 Id SQL 查询的第一条记录

> ID：15062934
> 
> 赞同：3
> 
> 时间：2013-02-25T08:35:09.973
> 
> 标签：sql, sql-server, sql-server-2005

我有下表，其中包含 ID 和 Number 列

```
ID Number 
1 34534 
1 45345 
1 45353 
2 56454 
2 45645 
3 65756 
3 67565 
3 87865 
3 38932 
4 36468 
4 45332 
```

预期输出是

```
1 34534 
2 56454 
3 65756 
4 36468 
```

我需要为每个 ID 取所有的第一个数字。

**我怎样才能写一个查询来实现这一点？**我不是 SQL 专家。:(

注意：使用 SQL Server 2005

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T08:38:54.837

尝试这样的事情：

```
SELECT ID, Number FROM
    (SELECT ID, Number, ROW_NUMBER() OVER (PARTITION BY ID ORDER BY Number) RN FROM MyTable) Base
    WHERE Base.RN = 1 
```

显然`MyTable`是你的桌子的名字

啊……显然`2 56454`是不可能的。你只能得到`2 45645`. `ORDER BY`除非您使用子句，否则 sql 表中的顺序是一种错觉。否则，SQL 服务器可以按照它想要的方式重新排序行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:23:17.853

[CROSS APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)的另一种选择

```
SELECT *
FROM dbo.test12 t1 CROSS APPLY (
                                SELECT TOP 1 Number
                                FROM dbo.test12 t2
                                WHERE t1.ID = t2.ID
                                ) o
WHERE t1.Number = o.Number 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/3f162/1)上的演示[](http://sqlfiddle.com/#!3/3f162/1)

# excel - Err.description 慢

> ID：15062935
> 
> 赞同：3
> 
> 时间：2013-02-25T08:35:12.040
> 
> 标签：excel, vba

该程序在我的电脑上需要 1-2 秒

缓慢发生在线 `Debug.Print Err.Description`
如果我用 Err.number 替换它，它需要 0s。

问题在于，如果我更改代码以显示`Type Mismatch`错误消息

我正在使用 Excel 2007，64 位 Windows Server。

我已禁用所有加载项

我将以下代码放在一个全新的 .xlsm 文件中。

问题不在于 debug.print ，如果我将其更改为字符串比较，问题仍然存在

```
Private Declare Function GetTickCount Lib "kernel32" () As Long

Public Sub Testing()
Err.Clear
Application.DisplayAlerts = False
Application.CutCopyMode = False
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
Application.EnableEvents = False
On Error GoTo Problem

    Dim a As Double
    a = 10 / 0
Problem:
    Dim sOutput As String
    Dim lStart As Long, lEnd As Long

    lStart = GetTickCount
    Debug.Print Err.Description
    lEnd = GetTickCount
    gsOutput = "Time requires : " & (lEnd - lStart) / 1000 & "s"
    Debug.Print gsOutput
End Sub 
```

你能帮忙的话，我会很高兴。

**编辑** 发现的问题和解决方案：http: [//support.microsoft.com/kb/2683270](http://support.microsoft.com/kb/2683270)

顺便说一句，如果微软已经说明了这个问题，我确实认为这不是一个本地化的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T10:02:44.420

基本上问题是因为本地计算机上缺少某些注册表值。

正如[这里建议的那样](http://support.microsoft.com/kb/2683270)

Excel 进程在错误处理过程中使用的 winhelp.ini 丢失（您可以使用建议的[工具](http://technet.microsoft.com/en-us/sysinternals/bb896645)进行检查。）

因此，它从其他一些 %PATH% 变量中查找网络驱动器的 C:\Windows\winhelp.ini。

1-2秒是网络延迟。

通过添加提到的注册表来解决问题。

高温高压

# android - android maps v2上的聚类标记

> ID：15062945
> 
> 赞同：5
> 
> 时间：2013-02-25T08:35:54.613
> 
> 标签：android, maps, android-mapview, android-maps-v2

最近我在一个 android 项目中工作，在该项目中，我设法将标记添加到 MapView 并在这些标记彼此太靠近时将它们聚集在一起。现在我必须使用新的 MapFragment - Google Maps Android API v2 来做同样的事情。

现在标记已成功添加到地图中，但我无法制作聚类部分，也找不到有关此主题的任何可用描述。您知道使用新 API 实现此功能的方法吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-29T19:48:03.887

对于仍然需要集群解决方案的任何人，也可以看看[Clusterkraf](https://github.com/twotoasters/clusterkraf/)。它是一个 Apache v2 许可的开源集群库，适用于 Google Maps Android API v2。它基于像素接近度对点进行聚类，在缩放时对聚类之间的过渡进行动画处理，处理数千个标记，并支持 Android v2.2 及更高版本。

# eclipse - Eclipse 没有启动

> ID：15062947
> 
> 赞同：0
> 
> 时间：2013-02-25T08:36:12.147
> 
> 标签：eclipse, eclipse-juno, ubuntu-11.10

我使用的是 Ubuntu 11.04，我的 Eclipse 运行良好。我使用的是 Eclipse Juno，但现在我已将我的 ubuntu 从 11.04 升级到 11.10，但我的 Eclipse 甚至还没有开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:44:13.610

就像在[这个线程](http://ubuntuforums.org/showthread.php?t=1859823)中一样，尝试移动您现有的`eclipse.ini`，然后让 Eclipse 重新创建它。
看看这是否允许 Eclipse 启动。

```
sudo mv /usr/lib/eclipse/eclipse.ini /usr/lib/eclipse/eclipse.ini.bup 
```

如果没有，则错误消息或 Eclipse 日志 ( `workspaceLocation/.metadata/.log`) 的副本会有所帮助。

* * *

关于带有不正确图标（' `?`'）的启动器，您也可以关注[此线程](http://ubuntuforums.org/showthread.php?t=1748360)

> 将“类型”保留为“应用程序”，然后单击“命令”旁边的“浏览”。导航到您的 Eclipse 安装和二进制文件，例如 /opt/eclipse/eclipse。
> 
> 现在单击弹性图标并将图标更改为`eclipse.xpm`与二进制文件位于同一文件夹中的文件。
> 
> 单击确定，然后将图标移到不碍事的地方，例如`~/.local/applications`。
> 
> 完成后，只需将该图标拖到启动器上即可。

# mysql - SELECT ， FROM 或 WHERE 中的嵌套 SELECT 子句和差异

> ID：15062949
> 
> 赞同：1
> 
> 时间：2013-02-25T08:36:39.207
> 
> 标签：mysql, sql, tsql

1.我想知道我们什么时候在`select`子句中使用子查询的结构？

2.如果用 1\. 结构编写的任何查询具有其他嵌套形式之一的等价物：

```
 SELECT ... from ... where .. IN (SELECT ...)
    SELECT ... from (SELECT ...) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T09:07:09.837

出于此答案的目的，我将第一个选择称为外部选择，第二个选择称为内部选择。

`SELECT ... FROM ... WHERE ... IN (SELECT ...)`如果您想查找与您知道的记录相似的记录，您将使用。内部选择的项目可以与外部选择进行比较。

```
Get the population of cities which are in Texas
SELECT city, population FROM cities WHERE city IN (SELECT city FROM states WHERE state = 'Texas') 
```

`SELECT ... FROM ... (SELECT ...)`如果要为语句创建派生表，您将使用。然后可以在外部选择上使用在内部选择上计算的项目。

```
Get employees who have earned more than $500 this week (derived table x)
SELECT name, ROUND(wages) FROM (SELECT name, per_hour * hours_worked AS wages FROM timesheet) AS x WHERE wages > 500 
```

还有第三种方式是相关子查询，`SELECT ... FROM ... WHERE ... (= or > or < or != etc) (SELECT ...)`当您要根据计算选择行时，它将显示为并使用。

```
Get cities with bigger populations than 2 times the average
SELECT city, population FROM cities WHERE population > 2 * (SELECT AVG(population) FROM cities) 
```

# perl - windows系统下如何在tomcat中运行cgi脚本

> ID：15062954
> 
> 赞同：1
> 
> 时间：2013-02-25T08:37:25.703
> 
> 标签：perl, apache, cgi, tomcat6

我安装了tomcat并删除了conf文件夹中web.xml中cgi脚本的注释现在我无法理解将我的cgi脚本放在哪里我已经阅读了很多资源并将它放在Webapps/Myfolder/WEB-INF/cgi/ hello.cgi 这里 hello.cgi 是我的示例 cgi 脚本 我还在 Webapps/Myfolder/WEB-INF/web.xml 中输入了以下内容

`

```
<web-app>
   <servlet>
    <servlet-name>cgi</servlet-name>
    <servlet-class>org.apache.catalina.servlets.CGIServlet</servlet-class>
    <init-param>
      <param-name>debug</param-name>
      <param-value>0</param-value>
    </init-param>
    <init-param>
      <param-name>cgiPathPrefix</param-name>
      <param-value>WEB-INF/cgi</param-value>
    </init-param>
     <load-on-startup>5</load-on-startup>
</servlet> 
```

`

现在我不明白我应该在哪里映射我的 cgi 脚本我不知道这个 web.xml 究竟做了什么任何人都可以提供解决方案我该怎么做。

# android - Android 应用程序 APK

> ID：15062957
> 
> 赞同：2
> 
> 时间：2013-02-25T08:37:28.917
> 
> 标签：android, apk

我有一个与 APK 相关的奇怪问题，即当我在使用签名导出它后安装 apk 并且当我第一次在设备上安装它时它工作正常，但是如果我按主页键应用程序进入后台并且当我把它带到前台再次从头开始而不是从当前屏幕开始，但是如果我按下后退按钮结束应用程序并再次启动，那么它的行为是完美的，因为我定义的意思是如果我在特定屏幕上并按下主页按钮并将应用程序发送到后台并且然后把它带到前台，它会显示我将它发送到后台的特定活动。

有没有人有这种奇怪的行为？

在每个活动中，我都添加了 onResume 方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:47:07.310

这是 Android 中长期存在的错误 :-( 当您使用安装程序安装应用程序时，或从 IDE（如 Eclipse 或 IntelliJ）或通过 Web 浏览器下载后，就会发生这种情况。当应用程序像这样启动时，当用户返回 HOME 屏幕并再次启动应用程序，Android 并没有做它应该做的事情（即：将现有任务带到前台并让用户继续）。相反，Android**再次**将根 Activity 启动到现有任务。这会给大多数应用程序带来大量问题。

您无法采取任何措施来纠正这种行为。有一些方法可以检测到这一点，然后您可以做出相应的反应。请参阅以下内容：

[安卓问题 - 1](http://code.google.com/p/android/issues/detail?id=5277)

[安卓问题 - 2](http://code.google.com/p/android/issues/detail?id=2373)

[安卓问题 - 3](http://code.google.com/p/android/issues/detail?id=26658)

[当以不同的意图启动活动时如何防止活动的多个实例](https://stackoverflow.com/questions/4341600/how-to-prevent-multiple-instances-of-an-activity-when-it-is-launched-with-differ/)

# makefile - Makefile 未运行 arm-none-eabi-ar 未链接所有 .o 文件

> ID：15062958
> 
> 赞同：0
> 
> 时间：2013-02-25T08:37:33.013
> 
> 标签：makefile

我有以下 Makefile

```
CC=arm-none-eabi-gcc
AR=arm-none-eabi-ar

vpath %.c src src/peripherals
vpath %.o out

CFLAGS = -g -O2 -Wall -DUSE_STDPERIPH_DRIVER
CFLAGS += -mlittle-endian -mthumb -mcpu=cortex-m4 -mthumb-interwork
CFLAGS += -mfloat-abi=hard -mfpu=fpv4-sp-d16
CFLAGS += -ffreestanding -nostdlib
CFLAGS += -Iinc -Iinc/cmsis -Iinc/peripherals -Iinc/stm32f4xx

OUT_DIR=out

SRCS = misc.c stm32f4xx_adc.c stm32f4xx_can.c stm32f4xx_crc.c stm32f4xx_cryp.c stm32f4xx_cryp_aes.c \
    stm32f4xx_cryp_des.c stm32f4xx_cryp_tdes.c stm32f4xx_dac.c stm32f4xx_dbgmcu.c stm32f4xx_dcmi.c stm32f4xx_dma.c \
    stm32f4xx_exti.c stm32f4xx_flash.c stm32f4xx_fsmc.c stm32f4xx_gpio.c stm32f4xx_hash.c stm32f4xx_hash_md5.c \
    stm32f4xx_hash_sha1.c stm32f4xx_i2c.c stm32f4xx_iwdg.c stm32f4xx_pwr.c stm32f4xx_rcc.c stm32f4xx_rng.c \
    stm32f4xx_rtc.c stm32f4xx_sdio.c stm32f4xx_spi.c stm32f4xx_syscfg.c stm32f4xx_tim.c stm32f4xx_usart.c \
    stm32f4xx_wwdg.c

OBJS = $(SRCS:.c=.o)

.PHONY: libstm32f4.a

all: libstm32f4.a

%.o : %.c
    mkdir -p $(OUT_DIR)
    $(CC) $(CFLAGS) -c -o $(OUT_DIR)/$@ $^

libstm32f4.a: $(OBJS)
    $(AR) -r $(OUT_DIR)/$@ $(OUT_DIR)/$(OBJS)

clean:
    rm -rf $(OUT_DIR) 
```

但是在运行 make 时，我的 .o 文件构建得很好，但是在调用 arm-none-eabi-ar 的时候，我弄得一团糟。

线

```
$(AR) -r $(OUT_DIR)/$@ $(OUT_DIR)/$(OBJS) 
```

可能是我出错的地方，它的输出是：

```
arm-none-eabi-ar -r out/libstm32f4.a out/misc.o stm32f4xx_adc.o stm32f4xx_can.o stm32f4xx_crc.o stm32f4xx_cryp.o stm32f4xx_cryp_aes.o stm32f4xx_cryp_des.o stm32f4xx_cryp_tdes.o stm32f4xx_dac.o stm32f4xx_dbgmcu.o stm32f4xx_dcmi.o stm32f4xx_dma.o stm32f4xx_exti.o stm32f4xx_flash.o stm32f4xx_fsmc.o stm32f4xx_gpio.o stm32f4xx_hash.o stm32f4xx_hash_md5.o stm32f4xx_hash_sha1.o stm32f4xx_i2c.o stm32f4xx_iwdg.o stm32f4xx_pwr.o stm32f4xx_rcc.o stm32f4xx_rng.o stm32f4xx_rtc.o stm32f4xx_sdio.o stm32f4xx_spi.o stm32f4xx_syscfg.o stm32f4xx_tim.o stm32f4xx_usart.o stm32f4xx_wwdg.o
arm-none-eabi-ar: creating out/libstm32f4.a
arm-none-eabi-ar: stm32f4xx_adc.o: No such file or directory
make: *** [libstm32f4.a] Error 1 
```

看这个时，out/libstm32f4.a 是正确的，但是所有 *.o 文件的第二个子句是完全错误的，只有 out/misc.o 以 out/ 文件夹为前缀，而不是其余的，导致一个错误？

如何修复我的 Makefile 以让它在 ./out/ 中查找 .o 文件？我在用吗

```
vpath %.o out 
```

不正确，还是我在 Makefile 中的 arm-none-eabi-ar 指令不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:46:23.473

简单地改变

```
$(AR) -r $(OUT_DIR)/$@ $(OUT_DIR)/$(OBJS) 
```

到

```
$(AR) -r $(OUT_DIR)/$@ $(OUT_DIR)/*.o 
```

呃！！！

# php - php - 非常细化的用户权限

> ID：15062959
> 
> 赞同：0
> 
> 时间：2013-02-25T08:37:33.993
> 
> 标签：php, privileges

我目前正在为多个用户构建一个应用程序，并且已经进入了用户权限部分。

该应用程序由大约 20 个子菜单项组成，应根据用户权限为每个用户授予/拒绝访问每个子菜单项。

这意味着用户 A 可以访问子菜单 1,4 和 21，用户 B 可以访问子菜单 2,3,9,11,20 等

这意味着不可能将每个组合都变成用户角色，因此我考虑了一个简单的解决方案。

我的第一个想法是将访问级别保存到一个字符串中。

这样，我可以在每个子菜单中使用该字符串中的字符索引进行测试。

虽然这可能有效，但我会说它会很快变得混乱，所以我的问题是。

解决此问题的最佳方法是什么？我正在寻找可维护且直观的东西，而不需要数据库上的一百万个新表。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:55:47.180

我可能在这里遗漏了要点，但是，每个子菜单不能有一个 ID，然后在 ID 和用户 ID 之间有一个决定访问权限的连接表，你可以和另一个列到该连接表的访问级别（只读，编辑、管理员等）。

根据所需的性能，您可以在第一次访问请求后为用户缓存该响应，或者您可以在每个子菜单请求中查找它。

# php - 在 CodeIgniter 中使用 AJAX 删除帖子

> ID：15062964
> 
> 赞同：0
> 
> 时间：2013-02-25T08:37:53.497
> 
> 标签：php, codeigniter, jquery

CodeIgniter 新手并尝试学习 AJAX/jQuery。我遵循 CI 的关于创建新闻站点的教程。然后我应用 AJAX 让帖子每 5 秒加载一次。我现在正在尝试为特定帖子添加删除。我可以删除帖子，但它不会留在同一页面上并删除我删除的单个帖子。（将我带到一个空白页面，我必须单击返回 - 但该帖子随后被删除）。

**模型：**

```
 public function delete_news($id)
{
    $this->db->delete('news', array('id' => $id));
} 
```

**控制器：**

```
public function delete_news_ajax($id)
    {
        $data['news'] = $this->news_model->delete_news($id);
    } 
```

**查看脚本：**

```
function getNews(){
$.ajax({
    url: "<?php echo base_url(); ?>/index.php/news/get_news_ajax/" + timestamp,
    success: function(data) {
      articles = jQuery.parseJSON(data);
      jQuery.each(articles, function() {
        $("#newsfeed").prepend($("<div id='newspost'><h2>"
                + this.title + "</h2><p>" 
                + this.text + '</p><p><a href=<?php echo base_url(); ?>/index.php/news/view/' 
                + this.slug + ">View article</a><br><a class='delete' href=<?php echo base_url(); ?>/index.php/news/delete_news_ajax/" 
                + this.id + ">Delete</a></p></div>").fadeIn("slow"));
            timestamp = this.time;
      });
    }
}); 
```

}

我究竟做错了什么？页面加载/刷新帖子就好了。但我无法让删除工作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:10:27.713

我猜该 url 将进行完全重定向，因为它是一个完整的 url，应该进行完全重定向，而不会阻止它。您可能需要额外的 Jquery 代码。这与 Codeigniter 无关。尝试这样的事情：

```
$(document).on("click", "#newsfeed .delete", function(event){
  event.preventDefault();
  var url = $(this).attr("href");
  $.get(url, function(data) {
  alert('Data Deleted Successfully');
});
  return false;
}); 
```

您也可以使用 preventDefault。

*上面的代码可能需要稍微调整以适应您的情况。无法测试它，因为我没有您的数据库返回的内容。试试吧，让我知道你得到了什么。*

[编辑] 我对代码进行了更改。由于 .on 取代了已弃用的 .live，它应该能够检测到通过 ajax 添加到页面的新元素。这样，如果元素被正确定位，该功能应该可以工作。我还包括了 preventDefault 以防万一。它应该像 return false 一样工作，这应该防止锚重定向页面。我猜你的目标元素必须调整。将 .on 绑定到文档，如上面的编辑所示。一旦发生这种情况，您的页面将不会重定向，除非您在页面中有其他内容破坏了 javascript。使用 Firefox 来找出这一点。

如果这不起作用，我不得不建议您使用 jquery livequery 插件[Click Here](https://github.com/brandonaaron/livequery)。检查版本的兼容性。如果使用 jquery 1.9，请使用 Jquery 迁移，因为不推荐使用 .live id。它在绑定像你这样的 ajax 添加元素方面做得很好。

有充分的理由，这个代码应该可以工作——只要确保你的定位是正确的。如果没有，请在 firefox 中使用 firebug，让我知道你在你的情况下得到了什么。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:09:37.433

我有一个可行的解决方案。问题似乎在于将事物正确绑定到 DOM。不得不在其他几个人的帮助下才能让这一切正常工作。但功能完全符合我之前的预期。个人可以删除帖子，并且它会慢慢消失，而无需刷新页面或将页面撞回顶部。

从上面使用相同的模型

控制器：

```
public function delete_news_ajax($id) {
    $data['status'] = $this->news_model->delete_news($id);
    echo json_encode($data);
} 
```

看法：

```
var timestamp = "";
var numN = 0;
var numD = 0;
var chart;
function getNews() {
    $.ajax({
        url: "<?php echo base_url(); ?>/index.php/news/get_news_ajax/" + timestamp,
        success: function(data) {
            articles = jQuery.parseJSON(data);
            numD = articles.numDelete;
            jQuery.each(articles.new , function() {
                numN++;
                output = "<div class='newspost' id='newspost" + this.id + "'>\n\
                    <h2>" + this.title + "</h2>\n\
                    <p>" + this.text + '</p>\n\
                    <p>\n\
                        <a href="<?php echo base_url(); ?>/index.php/news/view/"' + this.slug + ">View article</a>\n\
                        <br><a class='delete' href='#' onclick='return deletenews(" + this.id + ")'>" + "Delete</a>\n\
                    </p>\n\
                </div>"
                $(".newsfeed").prepend($(output).fadeIn("slow"));
                timestamp = this.time;
            });

            jQuery.each(articles.deleted, function() {
                $("#newspost" + this.id).fadeOut('slow', $("#newspost" + this.id).remove);
                if (this.deletetime > timestamp) {
                    timestamp = this.deletetime;
                }
            }); 
        }
    }); 
}
$(document).ready(function() {
    setInterval("getNews()", 1000);

});

function deletenews(postid) {
    //event.preventDefault();
    $.ajax({
        url: "<?php echo base_url(); ?>/index.php/news/delete_news_ajax/" + postid,
        success: function(data) {
            var status = jQuery.parseJSON(data);
        }
    });
    return false;
} 
```

# c++ - C中的MAX和MIN是什么？#定义函数

> ID：15062967
> 
> 赞同：1
> 
> 时间：2013-02-25T08:38:04.857
> 
> 标签：c++, c, max, c-preprocessor, min

我是一名学生，我的老师给了我并且已经解决了学习的练习，在他的练习中我看到了这一行：

```
 #define MIN(a,b) ((a) < (b) ? (a) : (b)) 
```

我以前从未使用过#define。

我不明白什么：

```
((a) < (b) ? (a) : (b)) 
```

代表。

看起来像'？是一个比较不确定。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T08:40:39.533

它被称为条件运算符（或三元运算符）

```
#define MIN(a,b) ((a) < (b) ? (a) : (b)) 
```

方法：

```
if ((a) < (b)){   
  return a;  
} else {   
  return b; 
} 
```

所以，如果你这样做：

```
int test = MIN(5,10); 
```

测试将是 5

链接到 wiki 页面的问题：http: [//goo.gl/bw2sL](http://goo.gl/bw2sL)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T08:40:51.597

`#define`定义了一个新的预处理器宏，在这种情况下，将 MIN 代码放置在您放置它的位置；和“变量”被替换`a`为`b`您提供给宏作为输入的任何内容。

```
 #define MIN(a,b) ((a) < (b) ? (a) : (b))

 MIN(5,6);
 //gets expanded to
 ((5) < (6) ? (5) : (6)) 
```

实际的表达式使用三元运算符，根据表达式的评估返回 A 或 B，您可以在此处阅读有关它的更多信息：

[http://en.cppreference.com/w/cpp/language/operator_other](http://en.cppreference.com/w/cpp/language/operator_other)

最后，当您用 c++ 标记问题时，请考虑非宏 max 和 min 函数。

```
#include <algorithm>
...
int i=std::min(5,6); 
```

# extjs - Sencha Touch：在嵌套列表中隐藏工具栏按钮？

> ID：15062969
> 
> 赞同：1
> 
> 时间：2013-02-25T08:38:11.943
> 
> 标签：extjs, sencha-touch, sencha-touch-2, nested-lists

**[完整代码在这里](http://www.senchafiddle.com/#ERFUC#iIGOp)**

**我有以下 Sencha App 嵌套列表，其中包含一个工具栏按钮。**

![在此处输入图像描述](../Images/7ddbc8c7268b373bde3ccf539d2d534f.png)

**每当我单击任何列表项时，我都需要删除下面列表中显示“标签栏”的按钮。如您所见，按钮仍然存在，我需要将其删除。**

![在此处输入图像描述](../Images/62026bb1f30e7c8984f0a6eaa7c59732.png)

**这是我的视图代码**

**煎茶查看文件夹**

*主.js*

```
Ext.define('firstApp.view.Main', {
extend : 'Ext.Container',
xtype : 'main',
requires: [
              'Ext.TitleBar',
              'Ext.Button',
              'firstApp.model.item',
              'firstApp.store.nList',
              'Ext.dataview.NestedList',
              'Ext.data.TreeStore'
              //'Ext.ToolBar'
              ] ,
config : {
    fullscreen : true,
    layout : 'fit',
    items : [{
        xtype : 'nestedlist',
        title: 'List View',
        displayField : 'text',
        store : 'nList',
        //toolbar:{
        toolbar:{
            items :[
                             {
                               xtype : 'spacer'
                              },
                             {
                               xtype : "button",
                               text : 'Tab View',
                               align: 'right',
                               ui : "action",
                               handler: function(){                    
                                          Ext.Viewport.animateActiveItem((
                                          Ext.create('firstApp.view.view2')),
                                          {type: 'slide', direction:'left'}).show();
                                                   }
                             }
                      ]
                   }
                }
           ]
     }
}); 
```

**我应该怎么做？请帮帮我**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T12:59:36.187

[http://www.senchafiddle.com/#33NZD](http://www.senchafiddle.com/#33NZD)

给你，伙计..

我做了什么

1.  为您分配了一个 ID“选项卡视图按钮”
2.  为您的嵌套列表添加了 2 个侦听器
3.  itemtap 将通过 id 获取按钮并将其隐藏并
4.  back 将通过 id 获取按钮并显示它

这是代码

将 ID 分配给按钮

```
xtype : "button",
                        id: "btnTabView",
                        text : 'Tab View',
                        align: 'right',
                        ui : "action",
                        handler: function(){                    
                            Ext.Viewport.animateActiveItem((
                                Ext.create('firstApp.view.view2')),
                                                           {type: 'slide', direction:'left'}).show();
                        } 
```

嵌套列表的听众

```
displayField : 'text',
store : 'nList',
listeners: {
    back: function( nList, node, lastActiveList, detailCardActive, eOpts ){
        if(node.getDepth() == 1){
            Ext.getCmp('btnTabView').show();
        }
    },
    itemtap: function( nList, list, index, target, record, e, eOpts ){
            Ext.getCmp('btnTabView').hide();
    }
}, 
```

# arrays - 如何释放无符号指针数组及其元素（calloc）

> ID：15062970
> 
> 赞同：0
> 
> 时间：2013-02-25T08:38:12.747
> 
> 标签：arrays, pointers, free, unsigned, calloc

释放用 cmallc 分配的无符号指针数组的最佳方法是什么？

```
 uint8_t *buf;
 buf = cs_calloc(ca->len + 13); 
```

我确实喜欢这样，但我知道这不太正确，因为我收到了编译警告：

> 警告：传递 'free' 的参数 1 使指针从整数而不进行强制转换

```
for (i = 0; i < ca->len + 13; i++)
{   
 free(buf[i]);
buf[i] = NULL;
}

free(buf); 
```

这是 cs_calloc 代码：

```
void *cs_calloc(size_t size){

 return (calloc (1,size));
 } 
```

我的问题是 1\. 我释放的方式，buf，我的意思是首先释放循环中的每个数组元素（free (buf[i]) 是否正确？我需要释放数组的元素，并将数组释放为多于

1.  为什么我会收到编译警告，如果它是错误的，有人可以纠正我释放分配内存的方式（请给我写代码应该如何纠正？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:39:37.867

您只需要`free(buf)`，仅此而已 - 所以只需放下`for`就可以了。尝试`free(buf[i])`是错误的，并且会欺骗库将`buf[i]`（一个小整数）视为指针。

有一个且只有一个简单的规则：只有`free`您从`malloc`or收到的内容`calloc`。

* * *

> 为什么会发生编译警告

您收到警告是因为您在需要指针`free`时使用整数调用。`free`

# c# - 我怎样才能构建完美的条件

> ID：15062972
> 
> 赞同：0
> 
> 时间：2013-02-25T08:38:19.533
> 
> 标签：c#, if-statement

这是我的问题：我想创建一个程序来检查 ATM 中的错误，并将其与我的数据库中保存的数据进行比较，以获得每台机器的错误状态（已解决、未解决、新）的 SMS。该程序已完成并且工作正常，但崩溃并且在恢复 - 方法中的条件后`CompareErrs`停止工作。正如它现在假设的那样，它返回与新错误相同的已解决错误。这是功能：-请帮助解决条件：S

```
 private object[] CompareErrs(string MachineErr, string DBErr)        
    {
        #region CompareErrs
        object[] ToReturn = new object[2];

        string Errs_Solved = "";
        string Errs_UnSolved = "";
        string Errs_New = "";

        string[] MachineErrSplit = MachineErr.Split(' ');
        for (int i = 0; i < MachineErrSplit.Length; i++)
        {
            string Seperator = " ";
            //if (i == MachineErrSplit.Length - 1)
            //    Seperator = "";

            if (DBErr.Contains(MachineErrSplit[i]))
            {
                Errs_UnSolved += MachineErrSplit[i] + Seperator;
            }
            else //if (MachineErrSplit[i].Contains(DBErr))
            {
                Errs_Solved += MachineErrSplit[i] + Seperator;
            }

            if (!DBErr.Contains(MachineErrSplit[i]))
            {
                Errs_New += MachineErrSplit[i] + Seperator;
            }
        }

        ToReturn[0] = new string[3] { Errs_Solved, Errs_UnSolved, Errs_New };
        ToReturn[1] = MachineErr;
        return ToReturn;

        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:49:05.827

```
else //if (MachineErrSplit[i].Contains(DBErr))
{
     Errs_Solved += MachineErrSplit[i] + Seperator;
}

if (!DBErr.Contains(MachineErrSplit[i]))
{
     Errs_New += MachineErrSplit[i] + Seperator;
} 
```

这两个是相同的......将相同的值分配给不同的变量。

因为，否则条件

```
if (DBErr.Contains(MachineErrSplit[i])) 
```

和

```
if (!DBErr.Contains(MachineErrSplit[i])) 
```

# ruby-on-rails-3 - 有条件地强制客户端验证某个属性

> ID：15062978
> 
> 赞同：2
> 
> 时间：2013-02-25T08:38:38.113
> 
> 标签：ruby-on-rails-3, simple-form, client-side-validation

我正在使用这个客户端验证库：[https](https://github.com/bcardarella/client_side_validations) ://github.com/bcardarella/client_side_validations和简单的表单一起在 Rails 3.2.12 中呈现表单。

我有一个具有两个属性的模型，`cancelled:bool`并且`cancelled_reason:string`. 什么时候`cancelled`设置我想强制设置原因，我通过一个简单的验证来做到这一点：

```
validates :cancelled_reason, presence: true, if: "cancelled" 
```

然后我有一个表单，其中包含一个隐藏的输入`cancelled = true`和一个文本字段`cancelled_reason`。我想要做的是a）呈现这个字段，就好像它有存在一样：true（旁边有'必需的星'）和b）使客户端验证对该字段正常工作。

根据客户端验证的文档，我尝试了几件事来实现这一点。

```
<%= f.input :cancelled_reason, validate: true do %>

<%= f.input :cancelled_reason, validate: { presence: true } do %>

<%= f.input :cancelled_reason do %>
    <% f.text_field :cancelled_reason, validate: { presence: true } %>
<% end %> 
```

所有这些仍然会在表单的 javascript 中产生一个空的“验证”数组，因此无论如何都可以提交它。由于我需要字段，它也无法渲染字段。

我还尝试在呈现表单之前手动将“已取消”字段设置为 true，这也无法正常工作。

```
<% model.cancelled = true %>
<% simple_form_for @model, validate: true do |f| %>
    ...
<% end %> 
```

关于如何使这项工作的任何想法？

# php - 格式化历史日期 (< 1970) 国际

> ID：15062979
> 
> 赞同：2
> 
> 时间：2013-02-25T08:38:39.940
> 
> 标签：php

我想格式化历史日期：1635-11-27 => 1635 年 11 月 27 日星期二，但我需要荷兰语而不是英语。我正在使用 dateTime 进行格式化，但该函数不响应 set_locale。Strftime 确实响应 setlocale 但只需要一个从 1970 年开始的 unix 时间戳，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:44:29.307

看看[IntlDateFormatter](http://www.php.net/manual/en/class.intldateformatter.php) [format()](http://php.net/manual/es/intldateformatter.format.php)

```
$formatter = new IntlDateFormatter(<locale>);
$string = $formatter->format(DateTime object); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-25T08:41:06.977

你为什么不用他们的翻译 str_replace 所有“一月”、“二月”、...、“星期一”、“星期二”……？

# c# - 调用第三方 DLL 中的方法

> ID：15062983
> 
> 赞同：2
> 
> 时间：2013-02-25T08:38:50.597
> 
> 标签：c#, qt, pinvoke, marshalling, intptr

我正在使用 C# 和 P-Invoke 来访问 Qt 框架 ( [http://qt.digia.com/](http://qt.digia.com/) ) 中的对象。使用返回简单类型（或 void）的函数似乎没有问题，但每当我尝试使用返回对象的函数时，应用程序就会崩溃。

例如，在 QtXml4.dll 中有一个方法 QXmlInputSource::data(void)，它返回一个 QString 类型的对象。这是我的包装类：

```
public class QXmlInputSource
{
    // PInvoke - class QString QXmlInputSource::data(void)
    [DllImport("QtXml4.dll", CharSet = CharSet.Unicode, EntryPoint = "?data@QXmlInputSource@@UBE?AVQString@@XZ",
        SetLastError = true, CallingConvention = CallingConvention.ThisCall)]
    static extern IntPtr data(ref IntPtr Ptr);

    private IntPtr mPtr;

    public QXmlInputSource(IntPtr Ptr)
    {
        mPtr = Ptr;
    }

    public override string ToString()
    {
        IntPtr mData = data(ref mPtr);
        return "Epic Fail";
    }

} 
```

这里有一些代码（使用 EasyHook）挂钩到提供有效 QXmlInputSource 对象的函数调用中：

```
 // just use a P-Invoke implementation to get native API access from C# (this step is not necessary for C++.NET)
    [DllImport("QtXml4.dll", CharSet = CharSet.Unicode, EntryPoint = "?parse@QXmlSimpleReader@@UAE_NPBVQXmlInputSource@@@Z",
        SetLastError = true, CallingConvention = CallingConvention.ThisCall)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool XmlParse(IntPtr Reader, IntPtr Source);

    // Intercept all calls to parse XML
    public bool XmlParse_Intercepted(IntPtr Reader, IntPtr Source)
    {
        QXmlInputSource XmlSource = new QXmlInputSource(Source);
        String s = XmlSource.ToString();

        // call original API...
        return XmlParse(Reader, Source);
    } 
```

挂钩代码似乎工作正常。当我调用包装类中的 data() 函数时，Qt 应用程序崩溃。正如我上面所说，每当函数调用返回一个对象而不是简单类型时，基于 Qt 的应用程序似乎就会崩溃。

我尝试了 CallingConventions、返回类型、Marshaling 等的各种组合，但没有发现任何真正有效的方法。

非常感谢任何帮助。

还要感谢网站上的所有贡献者——这是一个非常宝贵的资源！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T14:14:27.027

您不可能希望使用 P/invoke 调用这样的 C++ 库。您只是使用了错误的工具来完成这项工作。

您需要做的是使用 C++/CLI 混合模式层来完成这项工作。这不仅对实际工作有明显的好处，而且也容易得多。编写调用本机 Qt DLL 的 C++ 代码。然后使用托管类将该代码公开给您的 C#。最后，您可以简单地从您的 C# 代码中添加对 C++/CLI 库的引用，这一切都很好。

# android - 如何让 DetailFragment 中的 gridview 完美运行？

> ID：15062991
> 
> 赞同：0
> 
> 时间：2013-02-25T08:39:32.690
> 
> 标签：android, android-fragments, android-gridview, baseadapter

这是`Adapter`为了我的`GridView`内心`DetailFragment`

```
public class MyAdapter extends BaseAdapter {

    Context mContext;

    static final String TAG_SUCCESS = "success";
    static final String TAG_MENU = "menu";
    static final String TAG_MID = "mid";
    static final String TAG_NAME = "name";
    static final String TAG_PICT = "picture";
    static final String TAG_PRICE = "price";

    private LayoutInflater mInflater;
    private static ArrayList<HashMap<String, String>> menuList;

    public MyAdapter(Context c) {
        mContext = c;
        mInflater = LayoutInflater.from(c);

    }

    public void setArrayList(ArrayList<HashMap<String, String>> mlist) {
        menuList = new ArrayList<HashMap<String, String>>();
        menuList = mlist;
        Log.d("Try To Print", menuList.get(0).get(TAG_NAME));
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return menuList.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return menuList.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        // Building Parameters

        ViewHolder holder = null;

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.gviewfill, parent, false);
            holder = new ViewHolder();

            holder.ImgView = new ImageView(mContext);
            holder.ImgView.setScaleType(ImageView.ScaleType.CENTER_CROP);

            holder.ImgView = (ImageView) convertView
                    .findViewById(R.id.iv_menu_image);

            holder.txtName = (TextView) convertView
                    .findViewById(R.id.tv_menu_name);
            holder.price = (TextView) convertView
                    .findViewById(R.id.tv_menu_price);

            if (position == 0) {
                convertView.setTag(holder);
            }
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        String uri = new String(menuList.get(position).get(TAG_PICT));

        int resID = convertView.getResources().getIdentifier(uri, "drawable",
                mContext.getPackageName());
        System.out.println("isi res ID " + position + "= " + resID);
        holder.ImgView.setImageResource(resID);

        holder.price.setText("Rp. " + menuList.get(position).get(TAG_PRICE));
        holder.txtName.setText(menuList.get(position).get(TAG_NAME));

        return convertView;
    }

    static class ViewHolder {
        ImageView ImgView;
        TextView txtName;
        TextView price;
    } 
```

请看[这张截图](http://i.stack.imgur.com/xORCs.png)。

当我向下滚动`gridview`结果时`FORCECLOSE`

```
02-25 15:12:32.544: E/AndroidRuntime(502): FATAL EXCEPTION: main
02-25 15:12:32.544: E/AndroidRuntime(502): java.lang.NullPointerException
02-25 15:12:32.544: E/AndroidRuntime(502):  at com.example.android.rssfeed.MyAdapter.getView(MyAdapter.java:116)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.AbsListView.obtainView(AbsListView.java:1949)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.GridView.makeAndAddView(GridView.java:1323)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.GridView.makeRow(GridView.java:328)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.GridView.fillDown(GridView.java:281)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.GridView.correctTooLow(GridView.java:649)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.GridView.fillGap(GridView.java:257)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.AbsListView.trackMotionScroll(AbsListView.java:4408)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.widget.AbsListView.onTouchEvent(AbsListView.java:2896)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.View.dispatchTouchEvent(View.java:4609)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1554)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1320)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1560)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1333)
02-25 15:12:32.544: E/AndroidRuntime(502):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1710)
02-25 15:12:32.544: E/AndroidRuntime(502):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1265)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.app.Activity.dispatchTouchEvent(Activity.java:2309)
02-25 15:12:32.544: E/AndroidRuntime(502):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1683)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.View.dispatchPointerEvent(View.java:4677)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2348)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.view.ViewRoot.handleMessage(ViewRoot.java:2017)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.os.Looper.loop(Looper.java:132)
02-25 15:12:32.544: E/AndroidRuntime(502):  at android.app.ActivityThread.main(ActivityThread.java:4025)
02-25 15:12:32.544: E/AndroidRuntime(502):  at java.lang.reflect.Method.invokeNative(Native Method)
02-25 15:12:32.544: E/AndroidRuntime(502):  at java.lang.reflect.Method.invoke(Method.java:491)
02-25 15:12:32.544: E/AndroidRuntime(502):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
02-25 15:12:32.544: E/AndroidRuntime(502):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
02-25 15:12:32.544: E/AndroidRuntime(502):  at dalvik.system.NativeStart.main(Native Method) 
```

有人可以告诉我我的代码有什么问题吗？
我无法理解这个`logcat`
或者，
有人可以指导我如何创建`gridview`数据库值吗？我需要得到这个值`dialog fragment`..请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:10:11.410

检查`menuList`内容：

```
if(menuList.get(position) != null) {
   String uri = new String(menuList.get(position).get(TAG_PICT));

    int resID = convertView.getResources().getIdentifier(uri, "drawable",
            mContext.getPackageName());
    System.out.println("isi res ID " + position + "= " + resID);
    holder.ImgView.setImageResource(resID);

    holder.price.setText("Rp. " + menuList.get(position).get(TAG_PRICE));
    holder.txtName.setText(menuList.get(position).get(TAG_NAME));
} 
```

# django - result.ready() 在 django celery 中没有按预期工作？

> ID：15062993
> 
> 赞同：0
> 
> 时间：2013-02-25T08:39:43.810
> 
> 标签：django, django-celery, celery-task, djcelery

我有一个 django celery 视图，它执行某些任务，并在任务成功完成后将其写入数据库。

我正在这样做：

```
result = file.delay(password, source12, destination) 
```

和，

```
 if result.successful() is True:
      #writes into database 
```

但是在任务完成执行后，它不会进入 if 条件。我试过`result.ready()`但没有运气。

**编辑**：以上几行在同一个视图中：

```
def sync(request):
    """Sync the files into the server with the progress bar"""
    choice = request.POST.getlist('choice_transfer')
    for i in choice:
        source12 = source + '/' + i 
        start_date1 = datetime.datetime.utcnow().replace(tzinfo=utc)
        start_date = start_date1.strftime("%B %d, %Y, %H:%M%p")

        basename = os.path.basename(source12) #Get file_name
        extension = basename.split('.')[1] #Get the file_extension
        fullname = os.path.join(destination, i) #Get the file_full_size to calculate size

        result = file.delay(password, source12, destination)

        if result.successful() is True:
             #Write into database 
```

e: #写入数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:55:46.130

1.  当您调用 时`file.delay`，celery 会将任务排队等待在后台运行，稍后再进行。

2.  如果您立即检查`result.successful()`，它将是错误的，因为该任务尚未运行。

如果您需要链接任务（一个接一个地触发），请使用 Celery 的工作流解决方案（在本例中为[chain](http://docs.celeryproject.org/en/latest/userguide/canvas.html#canvas-chain)）：

```
def do_this(password, source12, destination):
    chain = file.s(password, source12, destination) | save_to_database.s()
    chain()

@celery.task()
def file(password, source12, destination):
    foo = password
    return foo

@celery.task()
def save_to_database(foo):
    Foo.objects.create(result=foo) 
```

# vb.net - 从 ThreadPool 线程返回值

> ID：15062995
> 
> 赞同：1
> 
> 时间：2013-02-25T08:39:48.990
> 
> 标签：vb.net, multithreading, threadpool

为什么以下代码总是返回`False`. `obj`我已确保`SomeBoolReturningFunc`正在返回`True`。

```
Dim obj As Object = False
ThreadPool.QueueUserWorkItem(Sub(state)
                                  state = SomeBoolReturningFunc()
                             End Sub,
                             obj)

'Keep waiting till queued thread completes
Return obj 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:38:24.120

让我们回顾一下这里发生的事情：

1.  匿名函数接收您存储的对象`obj`作为参数`state`。

2.  `state`你用返回值覆盖局部变量`SomeBoolReturningFunc`。

3.  您的原始对象没有更改。

要让它按照您期望的方式工作，匿名方法必须使用`ByRef`参数并且`QueueUserWorkItem`必须支持它。

要解决您的问题，您可以使用可变包装类：

```
Class Wrapper
    Public Value as Boolean
End Class

Dim obj = new Wrapper()
obj.Value = False
ThreadPool.QueueUserWorkItem(Sub(state)
                                  obj.Value=SomeBoolReturningFunc()
                             End Sub, obj) 
```

`obj.Value`现在将更改为`True`执行匿名函数时。

# c# - 布尔属性到 Func 转换

> ID：15062998
> 
> 赞同：1
> 
> 时间：2013-02-25T08:40:02.513
> 
> 标签：c#, .net

我`boolean`在班上有财产。我想将它作为参数传递给一些需要 Func 的函数。有没有办法进行转换？或者我应该只创建一个返回`bool`而不是属性的函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T08:43:57.800

如果函数真的需要 a `Func<bool>`（一个不带参数并返回 a 的函数`bool`），你可以这样做：

```
SomeFunction( () => myClass.BoolProperty); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:44:03.183

您可以传递一个 lambda：

FuncToCall(() => myObject.MyBoolProperty);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:44:36.223

怎么样

```
SomeFunction(()=>SomeBool); 
```

其中 SomeBool 它是您班级的布尔属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T08:46:20.570

在 func 方法中传递您的属性

```
Method1(c=> MyProperty); 
```

func / 属性看起来像这样

```
public bool MyProperty
{
   get { return true; }
}

public void Method1(Func<bool, bool> func)
{ 
} 
```

如果函数需要一个只返回这样的 bool 的函数：

```
public void Method1(Func<bool> func)
{ 
} 
```

这是称呼它的方式

```
Method1(()=> MyProperty); 
```