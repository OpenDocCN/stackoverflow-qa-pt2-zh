# StackOverflow 问答 13041000-13041999

# python - Eclipse 看不到 PySide 类

> ID：13041002
> 
> 赞同：2
> 
> 时间：2012-10-23T23:46:36.840
> 
> 标签：python, eclipse, pyside, pydev

我遇到了 PySide/PyDev/Eclipse 的问题

我输入了这段代码：

```
import sys
from PySide.QtWebKit import *
from PySide.QtCore import *
from PySide.QtGui import *

app=QApplication(sys.argv)

web=QWebView()
web.load(QUrl('http://google.com'))
web.show() 
```

![在此处输入图像描述](../Images/372ab779026fb5e7e78afd3e3e312d22.png)

Eclipse 在侧面显示红色叉号，并说 QApplication 和 QWebView 等等，`undefined varibales.`问题是程序编译没有错误并给我正确的结果。我检查了 PYTHONPATH，它在那里显示了 PySide 文件夹。不知道怎么办，显然我可以写程序解决这个问题，但这只是烦人=）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T01:32:08.213

将 PySide 添加到您的[Forced](http://pydev.org/manual_101_interpreter.html#PyDevInterpreterConfiguration-ForcedBuiltins) Builtins应该可以解决这个问题。

# asp.net - 阻止访问者访问 asp.net 中的特定文件夹

> ID：13041004
> 
> 赞同：1
> 
> 时间：2012-10-23T23:46:44.627
> 
> 标签：asp.net

我有一个名为“配置”的文件夹。配置文件夹包含所有配置 xml 文件。

我可以阻止访问者访问 asp.net 中的 Config 文件夹吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:36:45.977

假设您的“配置 XML”文件具有`.config`扩展名，则无需阻止访问。ASP.Net 引擎不提供`.config`文件。您的用户无论如何都无法访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T23:56:46.150

将此 web.config 文件放在 config 文件夹中。请注意，您的应用程序将无法从该文件夹中读取任何文件。可能您只想允许经过身份验证的用户。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
          <deny users ="*" />
        </authorization>
    </system.web>
</configuration> 
```

如果您尝试访问配置文件夹中的任何文件，这就是您将得到的![在此处输入图像描述](../Images/48ff55b5908a880a81c371ba26433601.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T23:56:49.977

您是否尝试过使用 web.config？将 web.config 文件添加到您的文件夹并限制对所有用户的访问：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <authorization>
          <deny users ="*" />
        </authorization>
    </system.web>
</configuration> 
```

对于 IIS 7，请尝试：

```
<system.webServer>
    <security>
        <authorization>
            <remove users="*" roles="" verbs="" />
        </authorization>
    </security>
</system.webServer> 
```

# javascript - 这真的是获取单个属性对象值的最短方法吗？

> ID：13041009
> 
> 赞同：2
> 
> 时间：2012-10-23T23:48:04.533
> 
> 标签：javascript, object

我有一个具有单个属性的对象，我不知道它的名称。

使用纯javascript，以下真的是获取该属性值的最短方法吗？

```
obj[Object.keys(obj)[0]] 
```

看起来很可怕。有没有更好的选择？再次**不使用任何 JS 库**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T23:51:00.637

在您描述的场景中（有一个带有一个键的对象，您不知道），**是**的，这是访问它的最短方式。

顺便说一下，考虑到这种情况，我感觉不是很多。请注意，这仅适用于支持 ES5 的浏览器。没有 ES5，它**会**变得更多：

```
var propName;
for( var prop in obj ) {
    if( obj.hasOwnProperty( prop ) ) {
        propName = prop;
        // break;
    }
}

obj[propName]; 
```

# mysql - 插入 ... 在重复键上不使用 MySQL 更新任何内容

> ID：13041023
> 
> 赞同：11
> 
> 时间：2012-10-23T23:49:49.103
> 
> 标签：mysql, duplicate-data

我的问题是我在一张桌子上有多个唯一键。

1.  插入忽略不是一个选项，因为它会抑制错误。
2.  MySQL 不支持语句之外的任何类型的条件（例如 if (cond) then insert else don't insert）
3.  存储过程不是一个选项（我可以使用 if/else 语句的唯一地方）
4.  在重复键上可能会使用新值更新键，但我希望唯一键不会更改，以防唯一约束失败。

所以唯一的选择是重复只是不更新​​任何东西。有什么办法可以做到这一点？或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T23:55:12.160

如果您不想`ON DUPLICATE KEY UPDATE`实际执行任何操作，只需将列值设置为现有值。与使用关键字不同，其他冲突（例如外键约束）会冒泡`IGNORE`，但冲突时不会更改任何值。

```
INSERT INTO table (value1, value2) VALUES ('1', '2')
ON DUPLICATE KEY UPDATE value1 = value1; 
```

如果要确保在发生冲突时不会更改有效数据，可以将包含任意数据的列添加到表中，并将其用于`UPDATE`语句。

如果您希望将所有逻辑保留在应用程序中而不是数据库中，则第三种选择是首先运行`SELECT`语句以在运行语句之前检查潜在的冲突`INSERT/UDPATE`。

尽管排除了您的方案，但存储过程也可以在单个数据库调用中提供此逻辑。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-24T00:53:17.543

找到另一种选择，以防有人偶然发现此问题。

如果您的表有一个自动递增的主键，您可以像这样更新 pk：

```
INSERT INTO table (a,b,c) VALUES (1,2,3)
  ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3; 
```

# ruby-on-rails - Rails，如何在设定的时间（早上）获得 1.day.from_now？

> ID：13041028
> 
> 赞同：2
> 
> 时间：2012-10-23T23:50:12.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, delayed-job

我目前像这样排队我的DelayedJob：

```
Delayed::Job.enqueue MyJob.new, 5, 1.day.from_now 
```

我正在寻找一种设置不同执行时间的方法：

```
Tomorrow morning at 9:30am PST 
```

Rails 有一个助手可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T00:30:47.890

如果您的 rails 服务器**未**在 PST/PDT 中运行：

```
Time.use_zone("Pacific Time (US & Canada)") { 1.day.from_now.beginning_of_day + 9.5.hours } 
```

如果它已经在 PST/PDT 中运行，您可以将其缩短为：

```
1.day.from_now.beginning_of_day + 9.5.hours 
```

查看[Time](http://api.rubyonrails.org/classes/Time.html)和[TimeZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)了解更多信息。

# php - 使用 php 脚本在 Android 应用程序中上传图像

> ID：13041037
> 
> 赞同：1
> 
> 时间：2012-10-23T23:51:22.440
> 
> 标签：php, android, http

Heyy..我正在使用 php 脚本从 android 应用程序上传图像文件。我使用 HTTP Post 函数上传文件（我调用 www.masterstroketech.org/postimage.php?fn=abc.png 然后发布图像路径）。该文件正在服务器上创建，但其大小为 0 字节。

如果我在 000webhost.com 的免费服务器上使用相同的脚本，那么该脚本运行良好。究竟是什么问题？

php代码如下：

```
 <?PHP
   $data = file_get_contents('php://input');
   if (!(file_put_contents($_GET['fn'],$data) === FALSE)) echo "File xfer completed.";    // file could be empty, though
   else echo "File xfer failed.";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:07:58.820

从 php.net 的 file_get_contents 文档中提取：

```
Reading all script input is simple task with file_get_contents, but it depends on what SAPI is being used.

Only in Apache, not in CLI:
<?php
  $input = file_get_contents("php://input");
?>

Only in CLI, not in Apache:
<?php
  $input = file_get_contents("php://stdin");
?>

In Apache php://stdin will be empty, in CLI php://input will be empyt instead with no error indication. 
```

因此，您的本地服务器配置似乎有问题。

# objective-c - 更改 CCMenuItem 的选择器

> ID：13041039
> 
> 赞同：0
> 
> 时间：2012-10-23T23:51:38.807
> 
> 标签：objective-c, cocos2d-iphone, selector, ccmenuitem

CCMenuItem 创建后是否可以重新分配它的选择器？

我想做这样的事情：

```
//Initialization:
_menuItem =[CCMenuItemSprite itemWithNormalSprite:normalSprite
selectedSprite:selectedSprite target:self selector:@selector(nextPage:)];

//Later
_menuItem.selector = @selector(mainMenu:); 
```

这可能吗？我在 CCMenuItem 文档中找不到任何关于它的信息。我承认我对选择器在 obj-c 中的实际工作方式并不是很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:40:47.973

是的，您可以使用`-setTarget:selector:`

```
[item setTarget:self selector:@selector(mainMenu:)]; 
```

它在文档中，[http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_menu_item.html#a58d8f2c72697ea34cf1e10b82cac81ff](http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_menu_item.html#a58d8f2c72697ea34cf1e10b82cac81ff)

# ruby-on-rails - RSpec、Spork 和 Database Cleaner 的 SQLite 异常

> ID：13041040
> 
> 赞同：1
> 
> 时间：2012-10-23T23:51:41.100
> 
> 标签：ruby-on-rails, rspec, sqlite, spork

适用于大约 5 次运行，但随后所有测试都失败了：

```
ArgumentError: prepare called on a closed database:           SELECT name
             FROM sqlite_master
             WHERE type = 'table' AND NOT name = 'sqlite_sequence' 
```

没有 Spork 就不会发生，如果我重新启动 Spork 就可以正常工作。运行一定次数后不会发生，但每次都会改变。

有什么想法可能导致这种情况吗？

编辑：

它仅在更改控制器代码时发生。

spec_helper.rb：

```
require 'spork'
require 'simplecov'
SimpleCov.start

Spork.prefork do
  ENV['RAILS_ENV'] ||= 'test'

  require File.expand_path('../../config/environment', __FILE__)
  require 'rspec/rails'
end

Spork.each_run do # This code will be run each time you run your specs.
  require 'capybara/rspec'
  require 'capybara/rails'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join('spec/support/**/*.rb')].each {|f| require f}

  RSpec.configure do |config|
    config.mock_with :rspec

    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
    config.fixture_path = "#{::Rails.root}/spec/fixtures"

    # If you're not using ActiveRecord, or you'd prefer not to run each of your
    # examples within a transaction, remove the following line or assign false
    # instead of true.
    config.use_transactional_fixtures = true

    # If true, the base class of anonymous controllers will be inferred
    # automatically. This will be the default behavior in future versions of
    # rspec-rails.
    config.infer_base_class_for_anonymous_controllers = false

    config.include RequestHelpers, :type => :request

    config.before :suite do
      DatabaseCleaner.strategy = :truncation
      DatabaseCleaner.clean_with :truncation
    end

    config.before :each do
      DatabaseCleaner.start
    end

    config.after :each do
      DatabaseCleaner.clean
    end

    config.include(MailerHelpers)
    config.before(:each) { reset_email }
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:20:10.600

尝试删除此行：

```
config.use_transactional_fixtures = true 
```

似乎对我有用。我被错误消息引导，因为它与交易相关，但不完全确定交易是什么。似乎与 spork 的线程和 sqlite3 有关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T18:10:01.320

我有很多这个错误，并且能够通过更新到最新版本的 sqlite3 来修复它。

```
bundle update sqlite3 
```

# objective-c - setImage: forState: 滞后于 UI

> ID：13041041
> 
> 赞同：0
> 
> 时间：2012-10-23T23:51:46.517
> 
> 标签：objective-c, ios, multithreading, uiimage, grand-central-dispatch

我有一个表视图，它运行一些代码，用于在后台线程中从 NSData 获取 UIImage，然后在前台调用`[button setImage:image forState:UIControlStateNormal];`.

问题是它会在该行上冻结 UI 片刻，直到它完成。这意味着 UI 在将其设置为图像时会冻结。因为用户正在滚动，所以这是非常明显和紧张的。有什么办法可以避免我的 UI 像这样冻结？

```
dispatch_queue_t cellSetupQueue = dispatch_queue_create("Setup", NULL);
dispatch_async(cellSetupQueue, ^{
    UIImage *image = [self.mediaDelegate largeThumbnailForMediaAtIndex:indexPath.row];
    dispatch_async(dispatch_get_main_queue(), ^{     
        [self.thumbnailButton setImage:image forState:UIControlStateNormal];
    });
});

dispatch_release(cellSetupQueue); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:40:19.380

我猜你的图片是JPG。如果是这样，那么 UIImage 将延迟解码实际图像，直到它第一次真正需要这些像素。查看 ImageIO 框架以获得更精确的控制。这是我使用的一个片段：

```
CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)data, NULL); // data is your image file NSData
if (source)
{
    NSDictionary *dict = @{ (__bridge NSString *)kCGImageSourceShouldCache : @(YES) };
    CGImageRef cgImage = CGImageSourceCreateImageAtIndex(source, 0, (__bridge CFDictionaryRef)dict);
    if (cgImage)
    {
        CFRelease(source);
        return cgImage; // you can keep this reference so you dont have to decode again later
    }
} 
```

重要的部分是`kCGImageSourceShouldCache`选项。您可以在后台线程上运行此代码并将解码后的图像传递给 UI 线程。

# java - 在 Java 的重载方法中使用 null

> ID：13041042
> 
> 赞同：6
> 
> 时间：2012-10-23T23:51:57.353
> 
> 标签：java, null, overloading

> **可能重复：**
> [NULL 参数的方法重载](https://stackoverflow.com/questions/5229809/method-overloading-for-null-parameter)

以下代码编译并运行良好。

```
public class Main
{
    public void temp(Object o)
    {
        System.out.println("The method with the receiving parameter of type Object has been invoked.");
    }

    public void temp(String s)
    {
        System.out.println("The method with the receiving parameter of type String has been invoked.");
    }

    public void temp(int i)
    {
        System.out.println("The method with the receiving parameter of type int has been invoked.");
    }

    public static void main(String[] args)
    {
        Main main=new Main();
        main.temp(null);
    }
} 
```

在这段代码中，要调用的方法是接受类型参数的方法`String`

[文档](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.12.2.5)说。

> 如果多个成员方法既可访问又适用于方法调用，则有必要选择一个为运行时方法分派提供描述符。Java 编程语言使用选择最具体方法的规则。

但我不明白何时`int`修改代码中接受基元参数的方法之一以接受包装器类型的参数，`Integer`例如，

```
public void temp(Integer i)
{
    System.out.println("The method with the receiving parameter of type Integer has been invoked.");
} 
```

发出编译时错误。

> 对 temp 的引用不明确，methodoverloadingpkg.Main 中的方法 temp(java.lang.String) 和 methodoverloadingpkg.Main 中的方法 temp(java.lang.Integer) 都匹配

在这种特殊情况下，为什么重载具有原始数据类型的方法是合法的，但其相应的包装器类型似乎并非如此？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-23T23:57:48.260

如果你被问到什么是更专业的“字符串”或“对象”，你会说什么？显然是“字符串”，对吧？

如果有人问你：什么是更专业的“字符串”或“整数”？没有答案，它们都是对象的正交特化，你如何在它们之间进行选择？然后你必须明确你想要哪一个。例如通过转换你的空引用：

```
question.method((String)null) 
```

当您使用原始类型时，您不会遇到这个问题，因为“null”是一个引用类型并且不能与原始类型冲突。但是当您使用引用类型时，“null”可以引用 String 或 Integer（因为 null 可以转换为任何*引用*类型）。

请参阅我在上面的评论中发布[的另一个问题的答案，以](https://stackoverflow.com/a/13033243/697630)获取更多和更深入的细节，甚至是 JLS 的一些引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T23:57:53.857

如果您`null`作为重载方法的参数传递，则选择的方法是具有最专业类型的方法，因此在这种情况下：`String`被选择而不是最宽容的：`Object`。

`Object`//其中，编译`String`器`int`的选择是明确的：你会得到`String`'s one cause an `int`cannot be `null`，因此在这种情况下，它对应的方法没有资格被调用。

但是，如果您更改`int`for `Integer`，编译器会感到困惑，因为采用的两种方法`String`都与 's 一样准确`Integer`（层次结构正交）。

并且编译器不能（不想要？^^）随机选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T00:04:20.847

首先要了解为什么`main.temp(null);`解析为`temp(String s)`而不是`temp(Object o)`我指出我对[Java method dispatch with null argument](https://stackoverflow.com/a/377238/18573)的旧回复。本质上，文字`null`是类型`nulltype`和`Object`< `String`< `nulltype`。所以`null`更接近`String`然后它是`Object`。

现在 ,和一样`null`接近, 所以当你添加它时会变得模棱两可`String``Integer``test(Integer)`

# sphinx - 狮身人面像的奇怪行为

> ID：13041045
> 
> 赞同：1
> 
> 时间：2012-10-23T23:52:02.753
> 
> 标签：sphinx

我在 sphinx 2.0.5-id64-release (r3308) 上创建索引时遇到了奇怪的麻烦

/etc/sphinx/sphinx.conf

```
source keywords
{
        // ..
    sql_query       = \
        SELECT keywords.lid, keywords.keyword FROM keywords_sites \
        LEFT JOIN keywords ON keywords_sites.kid = keywords.kid \
        GROUP BY keywords_sites.kid \

    sql_attr_uint       = lid
    sql_field_string    = keyword
        // ...

} 
```

我收到警告

```
WARNING: attribute 'lid' not found - IGNORING 
```

但是当我将查询更改为：

```
sql_query       = \
    SELECT 1, keywords.lid, keywords.keyword FROM keywords_sites \
    LEFT JOIN keywords ON keywords_sites.kid = keywords.kid \
    GROUP BY keywords_sites.kid \ 
```

我没有收到任何警告。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:25:18.407

sql_query 的第一列总是用作 document_id。

document_id 不能定义为属性。

如果您还想将主键存储在属性中，则需要在查询中包含两次。

# windows - 将 .exe 标记为请求（不需要）以管理员身份运行

> ID：13041046
> 
> 赞同：2
> 
> 时间：2012-10-23T23:52:03.453
> 
> 标签：windows, uac

有没有办法标记 .EXE 以请求它以管理员身份运行？以便：

1.  如果 UAC 设置为 runas admin 而没有提示 - 它以管理员身份运行。
2.  如果用户不能以管理员身份运行（需要不同的登录名），则以用户身份运行。
3.  如果提示，则提示用户。如果接受，则以管理员身份运行。
4.  如果提示被拒绝，则以用户身份运行。

我知道如何使用 2 个 .exe 程序来做到这一点。但我想用一个来做。该程序输入用户的许可证密钥。如果应用程序具有管理员权限（因此所有用户都拥有密钥），则在 HKLM 中。如果没有管理员权限，则在 HKCU。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:00:33.817

如果用户拒绝提升提示，则无法标记可执行文件以便在没有管理员权限的情况下继续运行。但是，进程可以尝试从具有提升权限的同一可执行文件中启动其自身的第二个副本，并将工作传递给新进程（如果它成功启动）或继续工作本身（如果没有）。

有关如何提升自己的示例，请参阅[此答案。](https://stackoverflow.com/a/10255024/886887)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:28:07.050

您可以通过请求获得 1 和 2`highestAvailable`而不是`requireAdmin`. 不过，我不喜欢它，因为在整个应用程序的其余部分中，您可能需要测试以查看您是否被提升。

你不能得到#4。如果应用程序尝试启动，显示 UAC 对话框，并且用户拒绝 UAC，则应用程序不会启动。如果您的应用程序只有一部分需要提升，您最好将该部分移动到单独的 exe 并在需要提升的 exe 上放置清单，然后让主应用程序不需要它。

# ruby-on-rails - 尽量不要重复使用 Rails 数据操作

> ID：13041051
> 
> 赞同：3
> 
> 时间：2012-10-23T23:52:55.920
> 
> 标签：ruby-on-rails, dry

我对 Rails 相当陌生，一般来说是一名中级程序员，但我会尽量做到清楚。

我有一个 Products 的数据库表，它拥有一个名为 category 的字段。Category 有两个可能的值，分别称为 Category1 和 Category 2。目标是检索所有产品并将它们显示在按类别组织的 HTML 中。我可以完成这项工作，但我知道必须有更好的方法。

我现在的方法是让我的产品像这样：

```
@category1_products = Product.all(conditions: { category: "Category1" })
@category2_products = Product.all(conditions: { category: "Category2" }) 
```

然后输出如下数据：

```
<table>
<tr>
  <td>Category1 Name</td>
<% @category1_products.each do |product| %>
  <td><%= product.name %></td>
  <td><%= product.description %></td>
  <td><%= product.price %></td>
<% end %>
</tr>
<tr>
  <td>Category2 Name</td>
<% @category2_products.each do |product| %>
  <td><%= product.name %></td>
  <td><%= product.description %></td>
  <td><%= product.price %></td>
<% end %>
</tr>
</table> 
```

我想使用单个实例来完成此操作：一次获取所有产品，按类别对它们进行分组，然后通过一次循环一个类别（包括类别名称）来输出它们。这对我来说似乎是一个非常基本的概念，但我很难理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:03:10.013

Rails 的[group_by](http://api.rubyonrails.org/classes/Enumerable.html#method-i-group_by)非常适合这类问题：

```
@grouped_products = Product.all.group_by(&:category) 
```

然后在视图中，只需循环`@grouped_products`：

```
<table>
  <tr>
  <% @grouped_products.each do |category, products| %>
    <td><%= category %></td>
    <% products.each do |product| %>
      <td><%= product.name %></td>
      <td><%= product.description %></td>
      <td><%= product.price %></td>
    <% end %>
  <% end %>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:03:41.987

```
@products_by_category = Product.all.group_by(&:category) 
```

这是一个 Ruby（阅读：不是 ActiveRecord）方法，用于根据它包含的对象的某些条件将 Array 转换为 Hash。

在您看来（假设您希望每个*product*一行，而不是每个*category*一行）：

```
<table>
  <% @products_by_category.each do |category,products| %>
    <tr>
      <th><%= category %></th>
    </tr>
    <% products.each do |product| %>
      <tr>
        <td><%= product.name %></td>
        <td><%= product.description %></td>
        <td><%= product.price %></td>
      </tr>
    <% end %>
  <% end %>
</table> 
```

# c - 后台进程c

> ID：13041055
> 
> 赞同：3
> 
> 时间：2012-10-23T23:53:22.983
> 
> 标签：c, background, operating-system

我正在制作一个外壳，如果要将命令放在后台，我会感到困惑。我已经解析了我的命令，并且 fork 适用于前台的命令。我有它，因此可以确定是否将命令置于后台。我不确定我的代码的第一个 else if 该怎么做。任何有关如何处理后台命令的指针将不胜感激。

```
pid_t childpid;
int status; 
childpid = fork();
if (childpid >= 0)                            // fork succeeded 
{
    if (childpid == 0 && background == 0)     // fork() returns 0 to the child
    {
        if (execv(path, strs) < 0)
        {
            perror("Error on execv.");
        }
        exit(0);                              // child exits  
    }
    else if (childpid == 0 && background ==1)
    {
        // What goes here?              
    }
    else                                      // fork() returns new pid to the parent 
    {
        wait(&status);  
    }
}
else                                          // fork returns -1 on failure
{
    perror("fork");                           // display error message 
    exit(0); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:01:28.300

*孩子*不在乎它是否在后台运行，所以照常`exec`打电话。在*父*进程中，您必须表现得不同。

首先你不能再使用`wait`，因为这会阻塞父进程。相反，您可以使用[`waitpid`](http://linux.die.net/man/2/waitpid)负 pid 和`WNOHANG`标志来检查终止的子进程而不会阻塞。

另一个不涉及`waitpid`定期调用的常见解决方案是使用`SIGCHLD`信号，该信号将在子进程停止或终止时引发。

# android - Eclipse ADT 错误 - 使用错误的 ResId

> ID：13041058
> 
> 赞同：0
> 
> 时间：2012-10-23T23:53:59.413
> 
> 标签：android

今天发现一个很奇怪的bug——系统在SetBackgroundResource()方法中使用了错误的ResId。当然，我认为这是我的错误。我通过从 R 文件复制和粘贴 ResId 来修复它。在我多次重新安装该应用程序进行测试后，我注意到再次设置了错误的图像，所以它弄乱了我的应用程序。我去了相应的方法，发现 Eclipse 插入了一个非常相似（但错误！..015 而不是 ..016）的 ResId 作为方法参数，而我没有任何操作。

我认为这并不重要，但这种奇怪的事情总是在这里发生：

```
LinearLayout nlap = new LinearLayout(this);
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
    LinearLayout.LayoutParams.MATCH_PARENT,
    LinearLayout.LayoutParams.WRAP_CONTENT);
params.setMargins(10, 5, 10, 0);
nlap.setLayoutParams(params);
nlap.setOrientation(LinearLayout.HORIZONTAL);
nlap.setBackgroundResource(0x7f020016);
nlap.getBackground().setAlpha(111);
return nlap; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:36:23.437

只需清理所有相关项目并重新构建。

永远不要对 R.id 进行硬编码。

我以前见过这种情况：对于旧版本的 ADT 和库项目，有时会发生这种情况。没有用 ADT 21 看到它。

最近，对我来说，Eclipse 开始在 R.id 的红色下划线，好像它们是错误的或未知的，但它们不会出现在问题视图中，它们实际上并没有错。我仍在为此寻找错误报告。

# ffmpeg - 使用ffmpeg混合不同长度的音频/视频

> ID：13041061
> 
> 赞同：12
> 
> 时间：2012-10-23T23:54:24.623
> 
> 标签：ffmpeg

我想将（1 分钟持续时间）的视频和（10 分钟持续`video.mp4`时间）的音频混合`audio.mp3`到一个持续时间为 1 分钟的输出文件中。音频`audio.mp3`应该来自 4 分钟 - 5 分钟的位置。我该怎么做`ffmpeg`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-24T00:48:46.970

# 如果`video.mp4`没有音频

你可以使用这个命令：

```
ffmpeg -i video.mp4 -ss 00:04:00 -i audio.mp3 -c copy -shortest output.mkv 
```

*   音频将来自`-ss 00:04:00`问题中要求的 4 分钟位置 ( )。

*   此示例将[流式复制](https://ffmpeg.org/ffmpeg.html#Stream-copy)（重新复用）视频和音频 - 不会发生重新编码。

# 如果`video.mp4`有音频

您必须`-map`按照此处所述添加选项：[FFmpeg mux video and audio (from another video) - mapping issue](https://stackoverflow.com/a/12943003/1109017)。

# 如果音频比视频短

添加[apad](https://ffmpeg.org/ffmpeg-filters.html#apad)过滤器以添加静默填充：

```
ffmpeg -i video.mp4 -ss 00:04:00 -i audio.mp3 -c:v copy -af apad -shortest output.mkv 
```

请注意，过滤需要重新编码，因此在此示例中将重新编码音频。

# android - Android SQLite 升级不丢失数据

> ID：13041062
> 
> 赞同：9
> 
> 时间：2012-10-23T23:54:42.333
> 
> 标签：android, sqlite, upgrade, data-loss

我已经成功创建了一个 SQLite 数据库，它工作正常。但是，当调用 onUpgrade 方法时，我希望这样做不会丢失数据。我正在开发的应用程序是一个测验应用程序。简单地说，当调用 onCreate 方法时，我创建并预填充了一个包含问题、答案等的数据库。最后一列是他们是否将问题设置为收藏夹。我想做的是，当调用 onUpgrade 方法时，我想暂时保存一列，删除整个数据库，用我对旧问题所做的任何编辑重新创建它，然后添加任何新问题然后重新- 添加他们设置为收藏夹的问题。

所以我尝试的一个选项如下：

```
db.execSQL("ALTER TABLE quiz RENAME TO temp_quiz");
onCreate(db);
db.execSQL("INSERT INTO quiz (favouries) SELECT favourites FROM temp_quiz");
db.execSQL("DROP TABLE IF EXISTS temp_quiz"); 
```

但是，这不起作用，因为 INSERT INTO 只是添加新行而不是替换现有行。我也尝试过 REPLACE INTO、INSERT 或 REPLACE INTO 和

```
db.execSQL("INSERT INTO quiz (_id, favouries) SELECT _id, favourites FROM temp_quiz"); 
```

其中没有工作。

目前我确实通过更改表的名称，调用 onCreate(db) 方法，然后设置一个读取每一行并使用 db.update() 方法的游标来设置它，如下所示：

```
int place = 1;
int TOTAL_NUMBER_OF_ROWS = 500;

while (place < TOTAL_NUMBER_OF_ROWS) {

String[] columns = new String[] { "_id", ..........., "FAVOURITES" };
// not included all the middle columns

Cursor c = db.query("temp_quiz", columns, "_id=" + place, null, null, null, null);

c.moveToFirst(); 

String s = c.getString(10);
// gets the value from the FAVOURITES column

ContentValues values = new ContentValues(); 
values.put(KEY_FLAG, s);

String where = KEY_ROWID + "=" + place;

db.update(DATABASE_TABLE, values, where, null);

place++;

c.close();

} 
```

然而，虽然这很有效，但它非常缓慢，并且随着我的问题数量的增加只会变得更糟。有没有一种快速的方法来完成这一切？

谢谢！PS 理想情况下，如果该行存在，它应该只更新该行。因此，如果在升级中我决定删除一个问题，它应该考虑到这一点，如果该行不包含任何其他数据，则不要添加新行。让它删除没有问题数据的行而不是阻止它们被添加可能更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T18:29:39.877

将其更改为：

```
db.execSQL("UPDATE new_quiz SET favourites = ( SELECT old_quiz.favourites 
FROM old_quiz WHERE new_quiz._id = old_quiz._id) WHERE EXISTS 
( SELECT old_quiz.favourites FROM old_quiz WHERE new_quiz._id = old_quiz._id)"); 
```

哪个有效：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T08:28:07.577

```
public class DataHelper extends SQLiteOpenHelper {

    private static final String dbName="dbName"; 
    private Context context;
    private  SQLiteDatabase db;
    private final static int version = 1;

    public  static final String SurveyTbl = "CREATE TABLE SurveyTbl (SurveyId TEXT PRIMARY KEY, Idref TEXT, SurveyDate TEXT)";

    public DataHelper(Context context) {

        super(context, dbName, null, version);
        this.db = getWritableDatabase();
        this.context = context;
        Log.i("", "********************DatabaseHelper(Context context)");
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        try {

        db.execSQL(SurveyTbl);

        } catch (Exception e) {
            Log.i("", "*******************onCreate");
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        try {
            db.execSQL("ALTER TABLE HandpumpSurveyTbl ADD COLUMN NalYozna TEXT");

        } catch (Exception e) {
            Log.i("", ""+e);
        }

         onCreate(db);

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T00:23:24.073

我没有看到您的测验表架构，但我认为它具有“问题”、“答案”、“收藏夹”等字段，以及某种用于识别每个问题的唯一主键，我将称之为 rowId目前。

```
// after renaming the old table and adding the new table
db.execSQL("UPDATE new_quiz SET new_quiz.favorites = old_quiz.favorites where new_quiz.rowId = old_quiz.rowId"); 
```

这将仅更新与旧测验表匹配的新测验表的行，并从旧测验表中设置收藏夹值。

我假设您有某种唯一标识符来标识每个问题，因此您将使用它（问题编号或其他内容）而不是上面的 rowId。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-12T06:31:23.197

对于那些还不知道如何在升级数据库模式时升级SQLite版本的人，例如使用方法needUpgrade(int newVersion)！

我的代码：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){

     if(newVersion>oldVersion){

         db.execSQL(scriptUpdate);
         db.needUpgrade(newVersion);
     }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-20T09:33:32.767

```
ALTER TABLE mytable ADD COLUMN mycolumn TEXT 
```

在您的 onUpgrade 方法中，它看起来像这样：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    String upgradeQuery = "ALTER TABLE mytable ADD COLUMN mycolumn TEXT";
    if (newVersion>oldVersion)
         db.execSQL(upgradeQuery);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-27T14:50:05.103

示例，如何使用临时表删除表并创建新表而不丢失数据：

```
db.execSQL("CREATE TEMPORARY TABLE temp_table (_id INTEGER PRIMARY KEY AUTOINCREMENT, col_1 TEXT, col_2 TEXT);");
db.execSQL("INSERT INTO temp_table SELECT _id, col_1, col_2 FROM old_table");

db.execSQL("CREATE TABLE new_table (_id INTEGER PRIMARY KEY AUTOINCREMENT, col_1 TEXT, col_2 TEXT, col_3 TEXT);");
db.execSQL("INSERT INTO new_table SELECT _id, col_1, col_2, null FROM temp_table");

db.execSQL("DROP TABLE old_table");
db.execSQL("DROP TABLE temp_table"); 
```

# javascript - nivo-slider js代码无法改变过渡效果？

> ID：13041067
> 
> 赞同：0
> 
> 时间：2012-10-23T23:55:15.047
> 
> 标签：javascript, nivo-slider

我正在尝试修改 Nivo-slider JavaScript 代码以使用内置于滑块中的一种效果。我一直在玩这个代码很长一段时间没有成功。下面代码的最底部有一些过渡效果选项。当我尝试选择一个时，它只能从第三张幻灯片开始起作用。这意味着第一张幻灯片具有“淡入淡出”效果，第二张幻灯片具有“无效果”第三张幻灯片具有“slideLeft”效果，然后从第四张幻灯片开始，我尝试全面应用的任何效果都将应用于剩余的幻灯片幻灯片。

我想知道是否有人可以帮助我理解我做错了什么？我只是想选择一个过渡效果并将其应用于我的所有幻灯片......

这是 JavaScript 代码：

```
 // Generate random effect
        if(settings.effect === 'random'){
            anims = new Array('sliceDownRight','sliceDownLeft','sliceUpRight','sliceUpLeft','sliceUpDown','sliceUpDownLeft','fold','fade',
            'boxRandom','boxRain','boxRainReverse','boxRainGrow','boxRainGrowReverse');
            currentEffect = anims[Math.floor(Math.random()*(anims.length + 1))];
            if(currentEffect === undefined) { currentEffect = 'fade'; }
        }

        // Run random effect from specified set (eg: effect:'fold,fade')
        if(settings.effect.indexOf(',') !== -1){
            anims = settings.effect.split(',');
            currentEffect = anims[Math.floor(Math.random()*(anims.length))];
            if(currentEffect === undefined) { currentEffect = 'fade'; }
        }

        // Custom transition as defined by "data-transition" attribute
        if(vars.currentImage.attr('data-transition')){
            currentEffect = vars.currentImage.attr('data-transition');
        }

        // Run effects
        vars.running = false;
        var timeBuff = 0,
            i = 0,
            slices = '',
            firstSlice = '',
            totalBoxes = '',
            boxes = '';

        if(currentEffect === 'sliceDown' || currentEffect === 'sliceDownRight' || currentEffect === 'sliceDownLeft'){
            createSlices(slider, settings, vars);
            timeBuff = 0;
            i = 0;
            slices = $('.nivo-slice', slider);
            if(currentEffect === 'sliceDownLeft') { slices = $('.nivo-slice', slider)._reverse(); }

            slices.each(function(){
                var slice = $(this);
                slice.css({ 'top': '0px' });
                if(i === settings.slices-1){
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                    }, (100 + timeBuff));
                } else {
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed);
                    }, (100 + timeBuff));
                }
                timeBuff += 50;
                i++;
            });
        } else if(currentEffect === 'sliceUp' || currentEffect === 'sliceUpRight' || currentEffect === 'sliceUpLeft'){
            createSlices(slider, settings, vars);
            timeBuff = 0;
            i = 0;
            slices = $('.nivo-slice', slider);
            if(currentEffect === 'sliceUpLeft') { slices = $('.nivo-slice', slider)._reverse(); }

            slices.each(function(){
                var slice = $(this);
                slice.css({ 'bottom': '0px' });
                if(i === settings.slices-1){
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                    }, (100 + timeBuff));
                } else {
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed);
                    }, (100 + timeBuff));
                }
                timeBuff += 50;
                i++;
            });
        } else if(currentEffect === 'sliceUpDown' || currentEffect === 'sliceUpDownRight' || currentEffect === 'sliceUpDownLeft'){
            createSlices(slider, settings, vars);
            timeBuff = 0;
            i = 0;
            var v = 0;
            slices = $('.nivo-slice', slider);
            if(currentEffect === 'sliceUpDownLeft') { slices = $('.nivo-slice', slider)._reverse(); }

            slices.each(function(){
                var slice = $(this);
                if(i === 0){
                    slice.css('top','0px');
                    i++;
                } else {
                    slice.css('bottom','0px');
                    i = 0;
                }

                if(v === settings.slices-1){
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                    }, (100 + timeBuff));
                } else {
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed);
                    }, (100 + timeBuff));
                }
                timeBuff += 50;
                v++;
            });
        } else if(currentEffect === 'fold'){
            createSlices(slider, settings, vars);
            timeBuff = 0;
            i = 0;

            $('.nivo-slice', slider).each(function(){
                var slice = $(this);
                var origWidth = slice.width();
                slice.css({ top:'0px', width:'0px' });
                if(i === settings.slices-1){
                    setTimeout(function(){
                        slice.animate({ width:origWidth, opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                    }, (100 + timeBuff));
                } else {
                    setTimeout(function(){
                        slice.animate({ width:origWidth, opacity:'1.0' }, settings.animSpeed);
                    }, (100 + timeBuff));
                }
                timeBuff += 50;
                i++;
            });
        } else if(currentEffect === 'fade'){
            createSlices(slider, settings, vars);

            firstSlice = $('.nivo-slice:first', slider);
            firstSlice.css({
                'width': slider.width() + 'px'
            });

            firstSlice.animate({ opacity:'1.0' }, (settings.animSpeed*2), '', function(){ slider.trigger('nivo:animFinished'); });
        } else if(currentEffect === 'slideInRight'){
            createSlices(slider, settings, vars);

            firstSlice = $('.nivo-slice:first', slider);
            firstSlice.css({
                'width': '0px',
                'opacity': '1'
            });

            firstSlice.animate({ width: slider.width() + 'px' }, (settings.animSpeed*2), '', function(){ slider.trigger('nivo:animFinished'); });
        } else if(currentEffect === 'slideInLeft'){
            createSlices(slider, settings, vars);

            firstSlice = $('.nivo-slice:first', slider);
            firstSlice.css({
                'width': '0px',
                'opacity': '1',
                'left': '',
                'right': '0px'
            });

            firstSlice.animate({ width: slider.width() + 'px' }, (settings.animSpeed*2), '', function(){ 
                // Reset positioning
                firstSlice.css({
                    'left': '0px',
                    'right': ''
                });
                slider.trigger('nivo:animFinished'); 
            });
        } else if(currentEffect === 'boxRandom'){
            createBoxes(slider, settings, vars);

            totalBoxes = settings.boxCols * settings.boxRows;
            i = 0;
            timeBuff = 0;

            boxes = shuffle($('.nivo-box', slider));
            boxes.each(function(){
                var box = $(this);
                if(i === totalBoxes-1){
                    setTimeout(function(){
                        box.animate({ opacity:'1' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                    }, (100 + timeBuff));
                } else {
                    setTimeout(function(){
                        box.animate({ opacity:'1' }, settings.animSpeed);
                    }, (100 + timeBuff));
                }
                timeBuff += 20;
                i++;
            });
        } else if(currentEffect === 'boxRain' || currentEffect === 'boxRainReverse' || currentEffect === 'boxRainGrow' || currentEffect === 'boxRainGrowReverse'){
            createBoxes(slider, settings, vars);

            totalBoxes = settings.boxCols * settings.boxRows;
            i = 0;
            timeBuff = 0;

            // Split boxes into 2D array
            var rowIndex = 0;
            var colIndex = 0;
            var box2Darr = [];
            box2Darr[rowIndex] = [];
            boxes = $('.nivo-box', slider);
            if(currentEffect === 'boxRainReverse' || currentEffect === 'boxRainGrowReverse'){
                boxes = $('.nivo-box', slider)._reverse();
            }
            boxes.each(function(){
                box2Darr[rowIndex][colIndex] = $(this);
                colIndex++;
                if(colIndex === settings.boxCols){
                    rowIndex++;
                    colIndex = 0;
                    box2Darr[rowIndex] = [];
                }
            });

            // Run animation
            for(var cols = 0; cols < (settings.boxCols * 2); cols++){
                var prevCol = cols;
                for(var rows = 0; rows < settings.boxRows; rows++){
                    if(prevCol >= 0 && prevCol < settings.boxCols){
                        /* Due to some weird JS bug with loop vars 
                        being used in setTimeout, this is wrapped
                        with an anonymous function call */
                        (function(row, col, time, i, totalBoxes) {
                            var box = $(box2Darr[row][col]);
                            var w = box.width();
                            var h = box.height();
                            if(currentEffect === 'boxRainGrow' || currentEffect === 'boxRainGrowReverse'){
                                box.width(0).height(0);
                            }
                            if(i === totalBoxes-1){
                                setTimeout(function(){
                                    box.animate({ opacity:'1', width:w, height:h }, settings.animSpeed/1.3, '', function(){ slider.trigger('nivo:animFinished'); });
                                }, (100 + time));
                            } else {
                                setTimeout(function(){
                                    box.animate({ opacity:'1', width:w, height:h }, settings.animSpeed/1.3);
                                }, (100 + time));
                            }
                        })(rows, prevCol, timeBuff, i, totalBoxes);
                        i++;
                    }
                    prevCol--;
                }
                timeBuff += 100;
            }
        }           
    };

    // Shuffle an array
    var shuffle = function(arr){
        for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i, 10), x = arr[--i], arr[i] = arr[j], arr[j] = x);
        return arr;
    };

    // For debugging
    var trace = function(msg){
        if(this.console && typeof console.log !== 'undefined') { console.log(msg); }
    };

    // Start / Stop
    this.stop = function(){
        if(!$(element).data('nivo:vars').stop){
            $(element).data('nivo:vars').stop = true;
            trace('Stop Slider');
        }
    };

    this.start = function(){
        if($(element).data('nivo:vars').stop){
            $(element).data('nivo:vars').stop = false;
            trace('Start Slider');
        }
    };

    // Trigger the afterLoad callback
    settings.afterLoad.call(this);

    return this;
};

$.fn.nivoSlider = function(options) {
    return this.each(function(key, value){
        var element = $(this);
        // Return early if this element already has a plugin instance
        if (element.data('nivoslider')) { return element.data('nivoslider'); }
        // Pass options to plugin constructor
        var nivoslider = new NivoSlider(this, options);
        // Store plugin object in this element's data
        element.data('nivoslider', nivoslider);
    });
};

//Default settings
$.fn.nivoSlider.defaults = {
    /*'sliceDownRight','sliceDownLeft','sliceUpRight','sliceUpLeft','sliceUpDown','sliceUpDownLeft','fold','fade',
            'boxRandom','boxRain','boxRainReverse','boxRainGrow','boxRainGrowReverse*/
    effect: 'fold',
    slices: 15,
    boxCols: 8,
    boxRows: 4,
    animSpeed: 500,
    pauseTime: 3000,
    startSlide: 0,
    directionNav: true,
    controlNav: false,
    controlNavThumbs: false,
    pauseOnHover: true,
    manualAdvance: false,
    prevText: 'Prev',
    nextText: 'Next',
    randomStart: false,
    beforeChange: function(){},
    afterChange: function(){},
    slideshowEnd: function(){},
    lastSlide: function(){},
    afterLoad: function(){}
};

$.fn._reverse = [].reverse; 
```

})(jQuery);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:16:23.650

效果已在 js 中设置，因此您只需在 html 页面上**更改/添加数据转换：**

`img src="demo/images/demo.jpg" data-thumb="demo/images/demo.jpg" alt="" data-transition="slideInLeft"`

# linux - 如何在不填满磁盘空间的情况下在 tar 存档中的文件中查找模式

> ID：13041068
> 
> 赞同：7
> 
> 时间：2012-10-23T23:55:16.747
> 
> 标签：linux, bash, shell, tar

我有一个非常大的 tar 存档 ~ 5GB。

我想在存档中的所有文件上使用 grep 模式（并打印具有该模式的文件的名称），但不想通过提取存档来填满我的磁盘空间。

反正我能做到吗？

我试过这些，但这并没有给我包含模式的文件名，只是匹配的行：

```
tar -O -xf test.tar.gz | grep 'this'
tar -xf test.tar.gz --to-command='grep awesome' 
```

tar 的这个特性也在哪里记录？tar xf test.tar $文件

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-26T19:25:44.280

似乎没有人发布这个**只处理一次存档的简单解决方案：**

```
tar xzf archive.tgz --to-command \
    'grep --label="$TAR_FILENAME" -H PATTERN ; true' 
```

这里`tar`将每个文件的名称传递到一个变量中（请参阅[文档](https://www.gnu.org/software/tar/manual/html_node/Writing-to-an-External-Program.html#SEC84)），并用于`grep`在每次匹配时打印它。还`true`添加了，这样`tar`就不会抱怨无法提取不匹配的文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T03:20:14.793

这是我对此的看法：

```
while read filename; do tar -xOf file.tar "$filename" | grep 'pattern' | sed "s|^|$filename:|"; done < <(tar -tf file.tar | grep -v '/$') 
```

拆开解释：

*   `while read filename; do`——这是一个循环...
*   `tar -xOf file.tar "$filename"`-- 这会提取每个文件...
*   `| grep 'pattern'`-- 这里是你放置你的模式的地方......
*   `| sed "s|^|$filename:|";`- 前置文件名，所以这看起来像 grep。盐调味。
*   `done < <(tar -tf file.tar | grep -v '/$')`-- 结束循环，获取要发送到您的`while read`.

一个附带条件：如果您`|`的文件名中有 OR 条 ( )，这将中断。

唔。事实上，这是一个不错的 bash 小函数，您可以将其附加到`.bashrc`文件中：

```
targrep() {

  local taropt=""

  if [[ ! -f "$2" ]]; then
    echo "Usage: targrep pattern file ..."
  fi

  while [[ -n "$2" ]]; do    

    if [[ ! -f "$2" ]]; then
      echo "targrep: $2: No such file" >&2
    fi

    case "$2" in
      *.tar.gz) taropt="-z" ;;
      *) taropt="" ;;
    esac

    while read filename; do
      tar $taropt -xOf "$2" \
       | grep "$1" \
       | sed "s|^|$filename:|";
    done < <(tar $taropt -tf $2 | grep -v '/$')

  shift

  done
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T23:57:49.347

这是一个可能对您有用的 bash 函数。将以下内容添加到您的`~/.bashrc`

```
targrep () {
    for i in $(tar -tzf "$1"); do
        results=$(tar -Oxzf "$1" "$i" | grep --label="$i" -H "$2")
        echo "$results"
    done
} 
```

用法：

```
targrep archive.tar.gz "pattern" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T00:12:00.053

这是令人难以置信的hacky，但是您可以滥用tar 的`-v`选项来处理和删除提取的每个文件。

```
grep_and_delete() {
  if [ -n "$1" -a -f "$1" ]; then
    grep -H 'this' -- "$1" </dev/null
    rm -f -- "$1" </dev/null
  fi
}
mkdir tmp; cd tmp
tar -xvzf test.tar.gz | (
  prev=''
  while read pathname; do
    grep_and_delete "$prev"
    prev="$pathname"
  done
  grep_and_delete "$prev"
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T00:30:54.660

```
tar -tf test.tar.gz | grep -v '/$'| \
xargs -n 1 -I _ \
sh -c 'tar -xOf test.tar.gz _|grep -q <YOUR SEARCH PATTERN>  && echo _' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T00:03:28.610

尝试：

```
 tar tvf name_of_file |grep --regex="pattern" 
```

t 选项将测试 tar 文件而不提取文件。v 是详细的，f 打印他的文件名。这应该可以为您节省大量的硬盘空间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-25T04:40:02.043

可能有帮助

```
zcat log.tar.gz | grep -a -i "string"

zgrep -i "string" log.tar.gz 
```

[http://www.commandlinefu.com/commands/view/9261/grep-compressed-log-files-without-extracting](http://www.commandlinefu.com/commands/view/9261/grep-compressed-log-files-without-extracting)

# c++ - Topcoder 上一个有趣的编译错误

> ID：13041071
> 
> 赞同：0
> 
> 时间：2012-10-23T23:56:06.183
> 
> 标签：c++, compiler-errors

此代码在 Topcoder 上给出了编译错误。在 code::blocks 上，它编译时出现 0 个错误和 0 个警告，打印了向量，但它以非零值退出，这导致窗口显示“InterestingDigits.exe 已停止工作”。对此有任何帮助..？

```
#include<iostream>
#include<vector>
using namespace std;

class InterestingDigits
{
public:
vector <int> digits(int base)
{
    vector<int> v;
    for(int i=2; i<base; i++)
        if(base%i==1)
            v.push_back(i);
    for(int i=0; i<v.size(); ++i)
        cout<<v[i]<<" ";
    cout<<endl;
}
};

int main()
{
    int base;
    cin>>base;
    InterestingDigits id;
    id.digits(base);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:59:45.773

看来您的方法 digits() 应该返回一个值，一个向量 < int >。

也许添加一个“return v;” 在末尾？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:06:13.377

您需要返回一个向量。使用您的代码，编译器会尝试返回导致未定义行为的内容。因此，添加“return v”应该可以解决您的问题。

# azure - Azure VM :: 计费报告

> ID：13041080
> 
> 赞同：2
> 
> 时间：2012-10-23T23:57:06.730
> 
> 标签：azure, billing, azure-virtual-machine

我打算使用 windows azure 的虚拟机（预览）功能，最初大约有 10 个虚拟机。

我想知道 windows azure 的使用报告（用于计费目的）是否详细说明了每个虚拟机使用的资源，或者消耗的资源是否按类型合并显示。

我的目标是获得每个虚拟机的成本（procs 分配的带宽使用 + + 存储使用）。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:11:18.063

我使用帐户下的“下载使用详情 (CSV)”选项。它会给你一个 Excel 表，你可以进一步格式化。

# ruby-on-rails - 在 IRB 中获取页面的内容（在调试器中）

> ID：13041081
> 
> 赞同：2
> 
> 时间：2012-10-23T23:57:29.697
> 
> 标签：ruby-on-rails, debugging, irb

我的 Rails 项目测试失败（其中某些片段内容应该出现在页面上，但不是），我正在尝试使用`debugger`gem 对其进行调试。因为我在浏览器中查看页面时看到了我认为正确的内容，所以我想在调试器中运行 IRB 并查看运行测试时页面的内容是什么。我的测试执行`visit sponsor_path(sponsor)`。有没有办法在 IRB 中获取该路由/路径的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:20:00.427

您可以通过 rails 控制台执行 html 请求，如下所示：

```
app.get("/my_url/1")
html = app.response.body 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T13:46:03.597

使用 rspec 和 capybara 时，您可以查看页面`save_and_open_page`

在路径之后调用它`visit`，它将保存当前页面（很像从浏览器中保存）并打开它。

# php - 如何使用 php 从 youtube 下载视频？

> ID：13041086
> 
> 赞同：0
> 
> 时间：2012-10-23T23:58:12.423
> 
> 标签：php, video, youtube, download

所以，我想使用 php 脚本下载 youtube 视频。我现在用谷歌搜索了很多，那里有更多的解决方案，但那个正在使用，`http://youtube.com/get_video?data url`但很长一段时间以来这是不可能的。我找到了一个运行良好的greasemonkey 脚本，但我不知道它如何与php 一起工作。我已经读到我必须对给我的信息做一些事情，例如这个链接：

```
http://www.youtube.com/get_video_info?video_id=g1SADcP5g1o 
```

问题是什么是最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:02:16.370

我会尝试对[这些](https://www.google.com/search?q=download%20youtube%20videos)`curl`资源中的任何一个进行一些请求，并尝试以这种方式自动化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:04:50.960

我用 C++ 编写，而不是 PHP。但这不是很简单，也不是很复杂。**get_video_info 输出是 URL 编码的。对其进行解码**并查找**stream_map**流集。你会注意到其中的一个模式。那是你的出发点。包含分辨率和下载位置以及其他内容。

即使我有它，我也不会在这里粘贴 PHP 代码:) 他们倾向于更改它...

# html - 让嵌入式 YouTube 视频自动播放和循环播放

> ID：13041088
> 
> 赞同：61
> 
> 时间：2012-10-23T23:58:14.890
> 
> 标签：html, css, youtube, youtube-api

我正在尝试让一个基本的 Youtube 视频自动播放并嵌入页面上，但我没有运气。

```
<div style="text-align: center; margin: auto"><object type="application/x-shockwave-flash" style="width:1120px; height:630px;" data="http://www.youtube.com/v/GRonxog5mbw?rel=0&amp;loop=1&amp;autoplay=1&amp;showsearch=0&amp;version=3&amp;showinfo=0&amp;modestbranding=1&amp;fs=1">
<param name="movie" value="http://www.youtube.com/v/GRonxog5mbw?rel=0&amp;loop=1&amp;autoplay=1&amp;showsearch=0&amp;version=3&amp;showinfo=0&amp;modestbranding=1&amp;fs=1" />
<param name="allowFullScreen" value="true" />
<param name="allowscriptaccess" value="always" />
</object></div> 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-24T04:08:58.797

YouTube 的 HTML5 嵌入代码：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/GRonxog5mbw?autoplay=1&loop=1&playlist=GRonxog5mbw" frameborder="0" allowfullscreen></iframe>​ 
```

您可以在此处阅读：[链接](http://web.archive.org/web/20121016180134/http://brianwong.com/blog/2012-youtube-embed-code-autoplay-on-and-all-other-parameters/)查看 Internet 存档项目的原始内容。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-24T10:26:04.660

这是[YouTube 嵌入式播放器参数](https://developers.google.com/youtube/player_parameters)的完整列表。

相关资料：

> **自动播放**（支持的播放器：AS3、AS2、HTML5） 值：0 或 1。默认为 0。设置初始视频是否在播放器加载时自动播放。
> 
> **循环**（支持的播放器：AS3、HTML5） 值：0 或 1。默认为 0。在单个视频播放器的情况下，设置为 1 将导致播放器一次又一次地播放初始视频。在播放列表播放器（或自定义播放器）的情况下，播放器将播放整个播放列表，然后从第一个视频重新开始。
> 
> 注意：此参数在 AS3 播放器和 IFrame 嵌入中的支持有限，它们可以加载 AS3 或 HTML5 播放器。目前，loop 参数仅在与 playlist 参数结合使用时才在 AS3 播放器中起作用。要循环播放单个视频，请将循环参数值设置为 1，并将播放列表参数值设置为已在 Player API URL 中指定的相同视频 ID：
> 
> `http://www.youtube.com/v/VIDEO_ID?version=3&loop=1&playlist=VIDEO_ID`

在您的嵌入代码中使用上面的 URL（也附加其他参数）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-29T02:33:31.477

所有的答案都对我不起作用，我检查了播放列表 URL 并看到播放列表**参数更改为列表！**所以应该是：

> &loop=1&list=PLvNxGp1V1dOwpDBl7L3AJIlkKYdNDKUEs

所以这是我用来制作干净、循环、自动播放视频的完整代码：

```
<iframe width="100%" height="425" src="https://www.youtube.com/embed/MavEpJETfgI?autoplay=1&showinfo=0&loop=1&list=PLvNxGp1V1dOwpDBl7L3AJIlkKYdNDKUEs&rel=0" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-20T22:33:14.877

有同样的经历，但是对我来说神奇的是不要将 embed 更改为 v。

所以代码看起来像这样......

```
<iframe width="560" height="315" src="https://www.youtube.com/embed/cTYuscQu-Og?Version=3&loop=1&playlist=cTYuscQu-Og" frameborder="0" allowfullscreen></iframe> 
```

希望能帮助到你...

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-21T11:03:48.323

播放列表黑客对我也不起作用。2018 年 9 月的解决方法（奖励：通过 CSS 设置宽度和高度，`#yt-wrap`而不是在 JS 中硬编码）：

```
<div id="yt-wrap">
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="ytplayer"></div>
</div>

<script>
  // 2\. This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/player_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3\. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player;
  function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer', {
      width: '100%',
      height: '100%',
      videoId: 'VIDEO_ID',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }

  // 4\. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    event.target.playVideo();
    player.mute(); // comment out if you don't want the auto played video muted
  }

  // 5\. The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),
  //    the player should play for six seconds and then stop.
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.ENDED) {
      player.seekTo(0);
      player.playVideo();
    }
  }
  function stopVideo() {
    player.stopVideo();
  }
</script> 
```

# html - 如何摆脱包装器中的额外空白

> ID：13041090
> 
> 赞同：0
> 
> 时间：2012-10-23T23:58:42.373
> 
> 标签：html, css, wrapper

![例子](../Images/56669308f1b6e518391acf55140c08b2.png)

正如您在示例图片中看到的那样，“新闻”标题上方有某种类型的空白（填充？边距？）我尝试过使用填充顶部，边距顶部，但我所做的一切都无法摆脱白色空间。谢谢！

HTML：

```
<div id="news_wrapper">
    <div id="newsheader">
        <p>News</p>
    </div>
    <div class="news">
        <p>"News Post 1"</p>
    </div>
    <div class="news">
        <p>"News Post 2"</p>
    </div>
    <div class="news">
        <p>"News Post 3"</p>
    </div>
    <div class="news">
        <p>"News Post 4"</p>
    </div>
</div> 
```

CSS：

```
#news_wrapper {
border: 1px solid black;
-webkit-border-radius: 2px;
-moz-border-radius: 2px;
border-radius: 2px;
width: 650px;
height: auto;
margin: 6px;
}

#newsheader {
background-color: Black;
color: white;
width: auto;
margin: 0px;
height: 30px;
text-align: center;
font: 'Helvetica', sans-serif;
text-transform: bold;
}

.news {
display: block;
margin: auto;
text-align: center;
border: 1px solid black;
-webkit-border-radius: 2px;
-moz-border-radius: 2px;
border-radius: 2px;
margin: 4px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:06:36.503

我相信问题出在你的`margin: auto`

我一般用`margin: 0 auto`这个效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:13:01.643

将此添加到您的CSS

```
#newsheader p{
  margin:0;
} 
```

# java - GWT 轻量级公制系统

> ID：13041100
> 
> 赞同：0
> 
> 时间：2012-10-23T23:59:55.977
> 
> 标签：java, gwt, logging

我最近阅读[了这篇关于 GWT Lightweight Metrics 的文章](https://developers.google.com/web-toolkit/doc/latest/DevGuideLightweightMetrics)，发现它很有趣，但作为一个完整的新手，我无法完全理解这一切。

我已经计划在[`gwt-log`](http://code.google.com/p/gwt-log/)我的所有客户端日志记录中使用类似的东西。每次将 Event 放置在 上时`EventBus`，以及随后在 a 中处理它时`Handler`，我都会使用此日志记录框架来执行类似于`console.log()`条目的操作。

现在阅读轻量级指标后，我想知道几件事：

*   Lightweight Metrics 是否可以替代我自己的自定义事件日志记录，或者我可以将它与`gwt-log`?
*   它是否比我自己的自定义日志系统提供任何好处（`console.log()`当发生有趣的事情时）？
*   您应该监控哪些类型的事件？
*   您何时/何地调用全局收集器功能？这一切都应该用JS还是Java编写？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T06:40:59.867

当您想要测量 GWT 应用程序的性能时，轻量级指标特别有用。使用它，您可以测量引导应用程序、加载资源、RPC 调用等所花费的时间。

gwt-log 纯粹用于记录目的。

如果您想专注于衡量性能，您可以更喜欢轻量级指标系统。

监视的事件类型取决于您。默认情况下会监控一些事件，如引导、RPC 调用。

Lightweight Metrics 系统使用全局收集器功能来记录显示在应用程序的 HTML 页面中的事件。当您想记录自己的事件时，您也可以调用它。

全局收集器功能是用 JS 编写的，它放置在您的主机 HTML 页面中。

# sencha-touch - 加载页面时列表为空

> ID：13041102
> 
> 赞同：0
> 
> 时间：2012-10-24T00:00:01.113
> 
> 标签：sencha-touch, sencha-touch-2

我正在尝试使用商店将数据加载到列表中。当我运行我的代码时，列表值为空白，列表不是空的，但它是空白的。

这是我的控制器的一部分，我尝试在其中添加要存储的数据。

```
 var loginStore = Ext.getStore('instance');
               var record = [{id:id, issued_at:issued, instance_url:instance, signature:sig, access_token:access, myBaseUri:baseUri}];
               loginStore.add(record); 
```

这是我列出的视图的一部分

```
{
               xtype :'list',
               id : 'list1',
               loadingText: 'Loading Projects',
               emptyText: '<div>No Projects Found</div>',
               onItemDisclosure: true,
               itemTpl: '<div>{issued_at}</div>',
               height: 320,
               store : 'instance' 
```

}

这不起作用但是当我替换`itemTpl:'<div>{issued_at}</div>'`为

```
itemTpl:'<div>{id}</div>' 
```

它似乎工作。我究竟做错了什么？

这是我的商店：

```
Ext.define('GS.store.instance',{
extend: 'Ext.data.Store',
requires: ['GS.model.login'],
config:{
    model: 'GS.model.login'

}
}); 
```

这是我的模型：

```
Ext.define('GS.model.login',{
extend: 'Ext.data.Model',
fields:[
            {name: 'id', type: 'string'},
            {name: 'issued_at', type:'string'},
            {name: 'instance_url', type:'string'},
            {name: 'signature', type:'string'},
            {name: 'access_token', type:'string'},
            {name: 'myBaseUri', type:'string'}
      ]

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T21:00:28.417

事实证明，我的模型定义中缺少配置选项。

```
Ext.define('GS.model.login',{
extend: 'Ext.data.Model',
config:{
    fields:[ 'id','issued_at','instance_url','signature','access_token','myBaseUri' ]
}

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:27:22.067

当您在使用 id 而不是issued_at 时获得列表中的值时，问题似乎不是函数/模型/存储，而是issued_at 变量本身。你确定它正在进入商店？

尝试在您的商店加载后添加它，或者使用例如 chrome 在浏览器中运行它

```
console.log(Ext.getStore("instance").getAt(0).data.id);
console.log(Ext.getStore("instance").getAt(0).data.issued_at); 
```

您应该会从第一个数据项中看到一些结果。

如果你得到一个 id，但只是为发出的_at“未定义”，你就会知道问题出在记录上。在这种情况下，我会`issued`在您尝试将其添加到存储之前尝试记录您的变量，以确保它已被实际定义。

如果需要，请报告结果以获得进一步的帮助/讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T00:16:17.383

您创建记录的方式是错误的。试试这种方式：

```
var record = Ext.create('YOUR_MODEL', {
    id : id,
    issued_at: issued,
    instance_url: instance,
    ...
}); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T07:41:18.250

尝试使用以下示例：

```
Ext.define('Contact', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['firstName', 'lastName']
    }
});

var store = Ext.create('Ext.data.Store', {
   model: 'Contact',
},

   data: [
       { firstName: 'Tommy',   lastName: 'Maintz'  },
       { firstName: 'Rob',     lastName: 'Dougan'  },
       { firstName: 'Ed',      lastName: 'Spencer' },
       { firstName: 'Jamie',   lastName: 'Avins'   },
       { firstName: 'Aaron',   lastName: 'Conran'  },
       { firstName: 'Dave',    lastName: 'Kaneda'  },
       { firstName: 'Jacky',   lastName: 'Nguyen'  },
       { firstName: 'Abraham', lastName: 'Elias'   },
       { firstName: 'Jay',     lastName: 'Robinson'},
       { firstName: 'Nigel',   lastName: 'White'   },
       { firstName: 'Don',     lastName: 'Griffin' },
       { firstName: 'Nico',    lastName: 'Ferrero' },
       { firstName: 'Jason',   lastName: 'Johnston'}
   ]
});

Ext.create('Ext.List', {
   fullscreen: true,
   itemTpl: '<div class="contact">{firstName} <strong>{lastName}</strong></div>',
   store: store,
}); 
```

# jquery - 显示隐藏 if 语句 jquery

> ID：13041103
> 
> 赞同：1
> 
> 时间：2012-10-24T00:00:01.747
> 
> 标签：jquery, html, css, if-statement, show-hide

我正在使用jQuery UI Slider，并且在滑块的每个位置都会吐出一个数字值（ui.value），所以我想根据滑块位置的数字显示div并隐藏所有其余部分。

例如：如果滑块位于数字 4 上，则显示 div #pos4

这是我设法想出的，并且有效。我的问题是我能做些什么来使代码更小/更好？

JS

```
slide: function( event, ui ) {
   var pos = ui.value,
       off = $(".off");

   if (pos == 1) {
     $(off).hide();
     $("#pos1").show();
   };

   if (pos == 2) {
     $(off).hide();
     $("#pos2").show();
   };

   if (pos == 3) {
     $(off).hide();
     $("#pos3").show();
   };

   if (pos == 4) {
     $(off).hide();
     $("#pos4").show();
   };

   if (pos == 5) {
     $(off).hide();
     $("#pos5").show();
   };

   if (pos == 6) {
     $(off).hide();
     $("#pos6").show();
   }; 
```

HTML

```
<div id="pos1" class="off" style="display: block;"><br />STAR</div>
<div id="pos2" class="off"><br />Tech Expo</div>
<div id="pos3" class="off"><br />VisFest</div>
<div id="pos4" class="off"><br />ITL</div>
<div id="pos5" class="off"><br />Conferences &amp; Events</div>
<div id="pos6" class="off"><br />Instructional Support</div> 
```

CSS

```
.off {
display:none;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:03:38.663

至少你可以这样做：

```
slide: function( event, ui ) {

     $(".off").hide();
     $("#pos"+ui.value).show();

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T00:04:09.290

您编写了很多重复的代码。您可以使用**pos**变量并显示相应的 div..

```
slide: function( event, ui )
{
   var pos = ui.value;

   $(".off").hide() ; // Hide all
   $('#pos' + pos).show();  // Show corresponding div
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T09:40:46.887

或者，您可能想尝试这样的事情：

```
 <div id="allpos">
        <div class="off"><br />STAR</div>
        <div class="off"><br />Tech Expo</div>
        <div class="off"><br />VisFest</div>
        <div class="off"><br />ITL</div>
        <div class="off"><br />Conferences &amp; Events</div>
        <div class="off"><br />Instructional Support</div>
    </div>

    slide: function( event, ui ) {
        var index = ui.value;
        $('.off').hide();
        $('#allpos').children(':nth-child('+ index +')').show(); //nth-child's index starts at 1
    }; 
```

它与其他的有点不同，但好处之一是您不需要`id`为每个 div 创建属性。

`nth-child`有关选择器的更多详细信息：http: [//api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

# java - 有没有办法使用 Quartz 库指定任务应运行的持续时间

> ID：13041104
> 
> 赞同：0
> 
> 时间：2012-10-24T00:00:04.227
> 
> 标签：java, quartz-scheduler, timing, executorservice

我正在寻找一种方法来指定特定任务运行的持续时间 - 例如，特定文件清理任务的运行时间可能不会超过 2 分钟。如果它在 2 分钟内完成 - 很好，但它应该在 2 分钟后终止。

Quartz 或任何其他库是否提供了一些有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:46:35.707

石英中没有这样的特征。您必须在作业实现中封装“超时管理器”。

您应该在由 Quartz Job 管理的单独任务中分离实际的作业实现。

看看这个例子：[https ://stackoverflow.com/a/2275596/1517816](https://stackoverflow.com/a/2275596/1517816)

假设您的 QuartzJob 是 Test 类，并将您的业务逻辑移动到 Task 类中。

希望能帮助到你

# shopify - shopify 模板中的液体阵列访问器最近是否发生了变化？

> ID：13041106
> 
> 赞同：0
> 
> 时间：2012-10-24T00:00:39.190
> 
> 标签：shopify, liquid

由于某种原因，这种液体刚刚停止在我几个月前做的网站上工作：

```
{% assign packs = collections.packs.all_products %}
{{ packs[0].title }} 
```

在 for 循环中访问数组项仍然有效，但我无法使用索引值直接访问这些项。这是最近对模板系统的更改还是发生了其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:31:14.617

这应该再次起作用。上周恢复了导致这种情况的液体变化。

# python - Python itertools groupby 中令人不安的奇怪行为/错误？

> ID：13041108
> 
> 赞同：1
> 
> 时间：2012-10-24T00:00:58.227
> 
> 标签：python, parsing, csv, text-parsing, itertools

我`itertools.groupby`用来解析一个短的制表符分隔的文本文件。文本文件有几列，我要做的就是将所有`x`在特定列中具有特定值的条目分组。下面的代码对名为 的列执行此操作`name2`，查找变量中的值`x`。我尝试使用`csv.DictReader`and来做到这一点`itertools.groupby`。在表中，有*8*行符合此条件，因此应返回 8 个条目。而是`groupby`返回两组条目，一组带有单个条目，另一组带有 7 个条目，这似乎是错误的行为。我在下面对相同的数据手动进行匹配并得到正确的结果：

```
import itertools, operator, csv
col_name = "name2"
x = "ENSMUSG00000002459"
print "looking for entries with value %s in column %s" %(x, col_name)
print "groupby gets it wrong: "
data = csv.DictReader(open(f), delimiter="\t", fieldnames=fieldnames)
for name, entries in itertools.groupby(data, key=operator.itemgetter(col_name)):
    if name == "ENSMUSG00000002459":
        wrong_result = [e for e in entries]
        print "wrong result has %d entries" %(len(wrong_result))
print "manually grouping entries is correct: "
data = csv.DictReader(open(f), delimiter="\t", fieldnames=fieldnames)
correct_result = []
for row in data:
    if row[col_name] == "ENSMUSG00000002459":
        correct_result.append(row)
print "correct result has %d entries" %(len(correct_result)) 
```

我得到的输出是：

```
looking for entries with value ENSMUSG00000002459 in column name2
groupby gets it wrong: 
wrong result has 7 entries
wrong result has 1 entries
manually grouping entries is correct: 
correct result has 8 entries 
```

这里发生了什么？如果`groupby`真的是分组，似乎我应该只得到一组条目`x`，而是返回两个。我无法弄清楚这一点。 *编辑*：啊，它应该被排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:05:40.800

According to the [documentation](http://docs.python.org/library/itertools.html#itertools.groupby), `groupby()` groups only consecutive occurrences of the same key.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T00:13:16.007

您将要更改代码以强制数据按关键顺序排列...

```
data = csv.DictReader(open(f), delimiter="\t", fieldnames=fieldnames)
sorted_data = sorted(data, key=operator.itemgetter(col_name))
for name, entries in itertools.groupby(data, key=operator.itemgetter(col_name)):
    pass # whatever 
```

不过，主要用途是当数据集很大并且数据已经按关键顺序排列时，所以当您无论如何都必须排序时，使用 a`defaultdict`更有效

```
from collections import defaultdict
name_entries = defaultdict(list)
for row in data:
    name_entries[row[col_name]].append(row) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T00:05:32.990

I don't know what your data looks like but my guess is it's not sorted. [groupby works on sorted data](http://docs.python.org/library/itertools.html#itertools.groupby)

# perl - 在 Perl 中找到匹配的模式后将下一行放入数组中

> ID：13041111
> 
> 赞同：0
> 
> 时间：2012-10-24T00:01:21.997
> 
> 标签：perl

我在我的**Perl 脚本**中打开一个文本报告，需要找到特定的行并将它们存储在数组中。

```
this is my report which I need to process through:
matched pattern 1 
line1:10
line2:20
line3:30

next matched pattern 2
line1:5
line2:10
line3:15

next matched pattern 3
lineA:A
lineB:B
lineC:C
.
.
------------------------------------ 
```

这部分是我的脚本：

```
@numbers;
@numbers2;
@letters;
while (<FILE>)
{
 if ($_ =~/matched pattern 1/ && $_ ne "\n")
 {
   chomp();
   push (@numbers,$_)
 }
 if ($_ =~/next matched pattern 2/ && $_ ne "\n")
 {
   chomp();
   push (@numbers2,$_)
 }
 if ($_ =~/next matched pattern 3/ && $_ ne "\n")
 {
   chomp();
   push (@letters,$_)
 }
} 
```

然后我可以在数组中使用数字和字母。这是我的报告文件的一部分

```
Maximum points per Lab
Lab1:10
Lab2:30
Lab3:20

Maximum points per Exam
Exam1:50
Exam2:50

Maximum points on Final
Final:150 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:51:36.193

针对一些最佳实践和我自己的风格偏好进行了修改（为可扩展性而编程，因为我总是最终扩展代码，所以我尝试以一般可扩展的方式进行编程）：

```
# Things we search for
my %patterns = (
    foo => qr/^matched pattern 1/,
    bar => qr/^matched pattern 2/,
    baz => qr/^matched pattern 3/,
);

# Where we store matches, initialized to empty array refs
my %matches = map { $_ => [] } keys %patterns;

open(my $fh, '<', $file) or die $!;
my %current_match;
LINE: while (my $line = <$fh>) {
    # We never want empty lines, so exit early
    next if $_ eq "\n";

    # Check current line for matches, to note which bucket we are saving into
    for my $matchable (keys %patterns) {
        # Skip to next unless it matches
        next unless $lines =~ $matches{$matchable};

        # Set the current match and jump to next line:
        $current_match = $matchable;
        next LINE;
    }

    # If there's a current match found, save the line
    push( @{$matches{$current_match}, $line ) if $current_match;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:59:31.713

你的程序应该做什么？您当前的程序正在寻找具有这些行的行并将这些***行***`matched pattern`存储到三个不同的数组中。所有其他行都被忽略。

 *您显示了某种示例输出，但您的输出和输入之间没有真正的关系。

首先，了解[references](http://perldoc.perl.org/perlreftut.html)，因此您不需要五个不同的数组。在我的示例中，我使用数组数组来存储所有单独的文件。如果每个文件代表其他东西，您可以使用散列数组或数组散列或数组散列的散列以统一结构表示此数据。（不要让我开始讨论你应该如何学习面向对象的 Perl。首先要掌握引用的窍门）。

还可以获得一本关于现代 Perl 的书并学习新的 Perl 语法。看起来您的 Perl 参考是针对 Perl 4.0 的。Perl 5.0 自 1994 年以来就已经面世。Perl 4 和 Perl 5 在语法上存在很大的不同。

```
use strict;
use warnings;

# Prints out your data strtucture
use Data::Dumper;

my $array_num;
my @array_of_arrays;

use constant  {
    PATTERN => qr/matched pattern/,
};

while (my $line = <DATA>) {
    chomp $line;
    next if $line =~ /^\s*$/;   #Skip blank lines
    if ($line =~ PATTERN) {
        if (not defined $array_num) {
            $array_num = 0;
        }
        else {
            $array_num++;
        }
        next;
    }
    push @{ $array_of_arrays[$array_num] }, $line;
}
print Dumper (\@array_of_arrays) . "\n";

__DATA__
matched pattern 1 
line1:10
line2:20
line3:30

next matched pattern 2
line1:5
line2:10
line3:15

next matched pattern 3
lineA:A
lineB:B
lineC:C 
```

输出。每组线都在不同的数组中：

```
$VAR1 = [
      [
        'line1:10',
        'line2:20',
        'line3:30'
      ],
      [
        'line1:5',
        'line2:10',
        'line3:15'
      ],
      [
        'lineA:A',
        'lineB:B',
        'lineC:C'
      ]
    ]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T00:13:09.117

```
@numbers;
@letters;
open FILE, "report2.txt" or die $!;
while (<FILE>)
{
 if ($_ =~/:(\d+)/ && $_ ne "\n")
 {
   chomp();
   push (@numbers,$1)
 }elsif ($_ =~/:(\w+)/ && $_ ne "\n")
 {
   chomp();
   push (@letters,$1)
 }
}

print "numbers:  ", @numbers, "\n";
print "letters:  ", @letters, "\n"; 
```*

# html - HTML 元素可以具有任意属性吗？

> ID：13041114
> 
> 赞同：29
> 
> 时间：2012-10-24T00:01:58.440
> 
> 标签：html

可以为 HTML 元素分配任意属性吗？

例如：

```
<div imMakingUpAnAttribute="whatever"></div> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-24T00:19:02.297

是的，您可以拥有自定义属性：

```
<div imMakingUpAnAttribute="whatever"></div> 
```

要区分元素属性和自定义属性，一个好的做法是在其前面加上**`data-`**.

```
<div data-imMakingUpAnAttribute="whatever"></div> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-24T00:10:11.160

是的，但它们必须以 . 为前缀`data-`。

> 自定义数据属性是无命名空间中的属性，其名称以字符串“data-”开头，连字符后至少有一个字符，与 XML 兼容，并且不包含 U+0041 到 U+005A 范围内的字符（拉丁文大写字母 A 到拉丁文大写字母 Z）。

W3C HTML5 规范：[http](http://dev.w3.org/html5/spec/single-page.html?utm_source=dlvr.it&utm_medium=feed#embedding-custom-non-visible-data-with-the-data-) ://dev.w3.org/html5/spec/single-page.html?utm_source=dlvr.it&utm_medium=feed#embedding-custom-non-visible-data-with-the-data- *-属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T00:06:30.900

Yes.

HTML5 custom data attributes post by John Resig [http://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

HTML4 attributes [http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.2](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.2)

# asp.net - CheckBoxList 数据绑定错误

> ID：13041120
> 
> 赞同：0
> 
> 时间：2012-10-24T00:03:08.510
> 
> 标签：asp.net, vb.net, data-binding

我在用数据加载 CheckBoxList 时遇到了一些问题。我在 DisplayMember 和 ValueMember 上遇到了一些错误。

这是我的鳕鱼：。

```
Protected Sub LoadCBMembers(ByVal objDeptGUID As String)
    Try
        Dim myCBTable As New DataTable()
        With myCBTable.Columns
            .Add("DisplayName", GetType(String))
            .Add("TextValue", GetType(String))   '<<<< change the type of this column to what you actually need instead of integer.
        End With
        Dim lqMembers As New lqFireFighterConnectDataContext
        Dim GetMembers = From r In lqMembers.tbUsers
                         Where r.DeptGUID = objDeptGUID And r.TextFLag = True
                         Select r
        If GetMembers.Count = 0 Then
            Exit Sub
        End If
        For Each foundMember In GetMembers
            myCBTable.Rows.Add(foundMember.FirstName & " " & foundMember.LastName, foundMember.CellPhone & "@" & foundMember.PhoneCarriers)
            '  cbMembers.Items.Add(foundMember.FirstName & " " & foundMember.LastName)
        Next
        With cbMembers
            .DataSource = myCBTable
            .DisplayMember = "DisplayName"
            .ValueMember = "TextValue"
        End With

    Catch ex As Exception

    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:14:13.360

试试这个：

```
 With cbMembers
        .DataSource = myCBTable
        .DisplayMember = "DisplayName"
        .ValueMember = "TextValue"
        .DataBind()
    End With 
```

根据[文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.datasource.aspx)，必须显式调用此方法。并非所有控件都需要您`DataBind()`显式调用（对于许多控件，它是隐式调用的），但这`CheckBoxList`是一个例外。

# multidimensional-array - 如何将矩阵存储到二维数组中？

> ID：13041122
> 
> 赞同：0
> 
> 时间：2012-10-24T00:03:14.577
> 
> 标签：multidimensional-array, matrix, fortran, runtime-error, eof

好的，我有一个看起来像这样的文件：

```
2 3
6 6 22
-1 3 0 
```

第一行中的整数是矩阵的维度（不包含在矩阵中）维度下面的行是实际矩阵我正在尝试编写一个程序，将该矩阵存储到二维数组中，但我一直得到一个当我尝试使用嵌套的 do 循环读取矩阵时出现运行时错误。它一直说“fortran 运行时错误：文件结尾”这是我的代码

```
PROGRAM addsub
IMPLICIT NONE

CHARACTER(30)::file1
INTEGER:: i,j,err1
INTEGER, DIMENSION(1)::dim1r,dim1c
REAL, ALLOCATABLE:: array1(:,:)

WRITE(*,101) "What is the first filename?"
READ(*,*) file1

OPEN (UNIT=11, FILE=file1, STATUS="OLD", ACTION="READ", IOSTAT=err1)
IF (err1 .NE. 0) THEN
    WRITE(*,'(2A)')"There was an error opening ", file1
    STOP
END IF

DO i=1,1,1
    READ(11,*)dim1r(1),dim1c(1)
END DO

ALLOCATE(array1(dim1r(1),dim1c(1)))

REWIND(11)
DO i=1,dim1r(1),1
    DO j=1,dim1c(1),1
        READ(11,*) array1(i,j)
    END DO
END DO

END PROGRAM addsub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:33:22.127

主要问题是您的每个`READ`语句都试图读取单独的行；所以你试图读取 6 行，而你的文件没有那么多。

有几种方法可以解决这个问题：

您可以尝试使用 一次读取每个数字`advance='no'`，但这意味着您不能使用列表导向输入并且需要明确使用格式：

```
DO i=1,dim1r
    DO j=1,dim1c-1
        READ(11,FMT='(F2.0)',advance='no') array1(i,j)
        PRINT *, array1(i,j)
    END DO
    READ(11,FMT='(F2.0)') array1(i,dim1c)
END DO 
```

您可以使用隐含的 do 循环一次读取整行：

```
DO i=1,dim1r
    READ(11,*) (array1(i,j),j=1,dim1c)
END DO 
```

或者只是通过给它数组切片来阅读处理它：

```
DO i=1,dim1r
    READ(11,*) array1(i,1:dim1c)
END DO 
```

注意另外几件事——`dim1c`不一定`dim1r`是数组；并且您不应该`REWIND`在阅读标题后，否则您会将标题作为数据读取。

所以一个完整的工作版本如下所示：

```
PROGRAM addsub
IMPLICIT NONE

CHARACTER(30)::file1
INTEGER:: i,err1
INTEGER ::dim1r,dim1c
REAL, ALLOCATABLE:: array1(:,:)

PRINT *, "What is the first filename?"
READ(*,*) file1

OPEN (UNIT=11, FILE=file1, STATUS="OLD", ACTION="READ", IOSTAT=err1)
IF (err1 .NE. 0) THEN
    WRITE(*,'(2A)')"There was an error opening ", file1
    STOP
END IF

DO i=1,1,1
    READ(11,*)dim1r, dim1c
END DO

ALLOCATE(array1(dim1r,dim1c))

DO i=1,dim1r
    READ(11,*) array1(i,1:dim1c)
END DO

DO i=1,dim1r
    PRINT *, array1(i,:)
END DO

DEALLOCATE(array1)

END PROGRAM addsub 
```

# spring - 上下文初始化时的 Hibernate Spring JPA 注释异常 - NoSuchMethodError: javax.persistence.Table.uniqueConstraints()

> ID：13041123
> 
> 赞同：0
> 
> 时间：2012-10-24T00:03:20.497
> 
> 标签：spring, hibernate, jpa

有这个问题。似乎部署好然后问题再次出现......无法弄清楚发生了什么。从 netbeans 和 intellij 都试过，在 tomcat 和 jetty 上试过。

看起来它与 JPA 注释有某种关系......不确定如何继续。这可能与我的jdk有关吗？

Pom.xml 用于使用注释的服务模块。

http://maven.apache.org/xsd/maven-4.0.0.xsd"> hpweb hpweb 1.0 4.0.0

```
<artifactId>service</artifactId>
<packaging>jar</packaging>

<name>service</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <hibernate.version>3.5.4-Final</hibernate.version>
</properties>

<repositories>

</repositories>

<dependencies>

    <dependency>
        <artifactId>common</artifactId>
        <groupId>hpweb</groupId>
        <version>1.0</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>

    <!-- Spring framework -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- MySQL database driver -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.9</version>
    </dependency>

    <!-- SQLite JDBC library -->
    <dependency>
        <groupId>org.xerial</groupId>
        <artifactId>sqlite-jdbc</artifactId>
        <version>3.7.2</version>
    </dependency>

    <!-- Hibernate framework -->

    <!--dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate</artifactId>
        <version>${hibernate.version}</version>
    </dependency-->

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>${hibernate.version}</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
    </dependency>

    <!--Hibernate library dependecy start >
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency-->

    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <!--dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency-->

    <dependency>
        <groupId>antlr</groupId>
        <artifactId>antlr</artifactId>
        <version>2.7.7</version>
    </dependency>

    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency>

    <!-- Generic dao -->

    <dependency>
        <groupId>org.sakaiproject</groupId>
        <artifactId>generic-dao</artifactId>
        <version>0.9.18</version>
    </dependency>

    <dependency>
        <groupId>com.soundcloud</groupId>
        <artifactId>java-api-wrapper</artifactId>
        <version>1.0.0</version>
    </dependency>

</dependencies> 
```

堆栈跟踪

```
SEVERE: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.heavypressure.service.IUserService com.heavypressure.web.controller.impl.UserController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:655)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1628)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.heavypressure.service.IUserService com.heavypressure.web.controller.impl.UserController.userService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 27 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 29 more
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.heavypressure.orm.dao.impl.UserDao com.heavypressure.service.impl.UserService.userDao; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 40 more
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userDao' defined in URL [jar:file:/Users/tripled153/IdeaProjects/heavypressure/hpweb/web/target/web/WEB-INF/lib/service-1.0.jar!/com/heavypressure/orm/dao/impl/UserDao.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:730)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:196)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1035)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:939)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 42 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [service-spring.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:795)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:723)
    ... 55 more
Caused by: java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints()[Ljavax/persistence/UniqueConstraint;
    at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:550)
    at org.hibernate.cfg.AnnotationConfiguration.processArtifactsOfType(AnnotationConfiguration.java:636)
    at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:359)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1206)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:717)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:188)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 66 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:29:59.333

请看这一行：

```
 ... 
    nested exception is 
    java.lang.NoSuchMethodError: javax.persistence.Table.uniqueConstraints [Ljavax/persistence/UniqueConstraint; 
    ... 
```

因此，对于`javax.persistence.Table`.

这必须帮助您放置正确的依赖项：

[http://mavenhub.com/c/javax/persistence/Table/dependency](http://mavenhub.com/c/javax/persistence/Table/dependency)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:54:24.360

问题是一些依赖项也依赖于休眠，因此他们在指定版本下载自己的副本。我实际上放弃了它们，但我认为你可以在配置中做一个 Maven 忽略。无论如何，我不想使用任何将我耦合到特定版本的休眠的库。

# java - 如何使用java更改文本文件编码字符集

> ID：13041130
> 
> 赞同：0
> 
> 时间：2012-10-24T00:03:56.610
> 
> 标签：java, character-encoding

如题。如何用不同的字符集重写文件？

在哪里可以找到可用的编码 - 最终静态整数？

```
 FileInputStream fis = new FileInputStream(inputFile);
    InputStreamReader isr = new InputStreamReader(fis, inputEncoding);
    BufferedReader in = new BufferedReader(isr);

    FileOutputStream fos = new FileOutputStream(outputFile);
    OutputStreamWriter osw = new OutputStreamWriter(fos, outputEncoding);
    BufferedWriter out = new BufferedWriter(osw);

    String line = in.readLine();
    out.write(line); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:08:31.767

> *如题。如何用不同的字符集重写文件？*

我不确定你为什么问这个问题，因为你的代码看起来是合法的，尽管它只复制了 1 行（并且吞下了换行符）。我不会使用`readLine()`，但只是`read()`在一个循环中，也许有一个缓冲区。这样您就可以复制所有内容而无需修改/吞下换行符。

* * *

> *在哪里可以找到可用的编码 - 最终静态整数？*

由[`Charset#availableCharsets()`](http://docs.oracle.com/javase/6/docs/api/java/nio/charset/Charset.html#availableCharsets%28%29).

```
SortedMap<String, Charset> availableCharsets = Charset.availableCharsets();
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:09:48.617

JDK 文档中指定了支持的编码格式。

根据转换，您可以使用

*   [支持的编码](http://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html)
*   [读取编码数据](http://www.exampledepot.com/egs/java.io/ReadFromUTF8.html)
*   [写入编码数据](http://www.exampledepot.com/egs/java.io/WriteToUTF8.html)
*   [不同字符集的String之间的转换](http://www.exampledepot.com/egs/java.nio.charset/ConvertChar.html)
*   [列出所有可用的字符集转换器](http://www.exampledepot.com/egs/java.nio.charset/ShowAll.html)

# jquery - 如何在 imgpreview 插件中添加替代文本

> ID：13041138
> 
> 赞同：0
> 
> 时间：2012-10-24T00:05:28.507
> 
> 标签：jquery

得到这个地图区域

```
<area title="hello" alt="hi there" nohref="<?php bloginfo('template_url'); ?>/images/image1.jpg" shape="rect" coords="216,371,418,490" href="#" /> 
```

和这个jQuery代码

```
$('#first area').imgPreview({
    containerID: 'imgPreviewWithStyles',
    imgCSS: {
        // Limit preview size:
        height: 200
    },
    // When container is shown:
    onShow: function(link){
        $('<span>' + $(link).text() + '</span>').appendTo(this);
    },
    // When container hides: 
    onHide: function(link){
        $('span', this).remove();
    }

}); 
```

如何在 imgPreview 插件创建的附加跨度中输入显示地图区域替代文本的代码

我认为这是唯一需要更改的部分

```
$('<span>' + $(link).text() + '</span>').appendTo(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:14:44.700

在这里工作的小提琴[http://jsfiddle.net/tariqulazam/3Yckp/](http://jsfiddle.net/tariqulazam/3Yckp/)

```
// When container is shown:
    onShow: function(link){
        $('<span>' + $(link).attr('alt') + '</span>').appendTo(this);
    } 
```

# github - github api 是否提供了获取用户 URL 的方法？

> ID：13041140
> 
> 赞同：1
> 
> 时间：2012-10-24T00:05:38.813
> 
> 标签：github, web-scraping, github-api

例如，对于 user: `django`，我想通过 github-api 检索的 url 不是

```
https://github.com/django 
```

但

```
http://www.djangoproject.com/ 
```

如下图红色椭圆所示：

![在此处输入图像描述](../Images/724ac06b874d9f2374dac9ba39679370.png)

用户搜索 api 不会在响应中返回此 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:21:05.137

从服务返回的数据如下：

[https://api.github.com/users/django](https://api.github.com/users/django)

```
{
  "public_gists": 0,
  "type": "Organization",
  "followers": 240,
  "login": "django",
  "created_at": "2008-10-06T19:43:18Z",
  "html_url": "https://github.com/django",
  "avatar_url": "https://secure.gravatar.com/avatar/fd542381031aa84dca86628ece84fc07?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-org-420.png",
  "company": null,
  "email": null,
  "blog": "http://www.djangoproject.com/",
  "following": 0,
  "name": "Django",
  "location": "Internet",
  "url": "https://api.github.com/orgs/django",
  "id": 27804,
  "public_repos": 49
} 
```

如您所见，该 URL 在博客字段中。

# html - is CSS-only, full-width sidebar background possible?

> ID：13041142
> 
> 赞同：2
> 
> 时间：2012-10-24T00:05:47.960
> 
> 标签：html, css, width, sidebar

I'm building a fixed width website (using the classic wrapper with margin:auto), but I want the sidebar **background** to extend to the right end of the screen.

So far I've accomplished this:

**HTML**

```
<div id="wrapper">
    <div id="left">Content area</div>
        <div id="right">
            <div id="actual-sidebar">
                Sidebar
            <span class="clearme"></span>
        </div>
    </div>
</div> 
```

**CSS**

```
body {
    background: #333;
    color: #fff;
    overflow-x: hidden;
}

#wrapper {
    width: 500px;
    height: 1200px;
    margin: auto;
    border: 2px dashed #fff;
}

#left {
    width: 300px;
    height: 500px;
    float: left;
}

#right {
    width: 175px;
    height: 500px;
    margin-left: 325px;
    margin-right: -9999px;
    padding-right: 9999px;
    background: #777;
}

#actual-sidebar {
    width: 100%;
    height: 100%;
    border: 2px dotted #f0f;
} 
```

​ You can see it in action here:
[http://jsfiddle.net/knjDV/](http://jsfiddle.net/knjDV/)
[http://www.spazionegativo.it/layout-test/](http://www.spazionegativo.it/layout-test/)

Is this kind of "full-width sidebar" possible using **css only**?

In the example above, the actual sidebar width is highlighted by the pink border, and the rest is all padding and negative margin; worked in chrome but IE broke it so I've added *overflow-x: hidden* to fix it.

The problem is, click-dragging to the right will scroll the view even if there's nothing to select, eventually hiding the content. I can't seem to get past this problem.

Is there a fix to the "drag-n-scroll" issue, or an entirely different way to accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:59:32.003

使用 CSS3 渐变作为主体的背景（与侧边栏颜色相同）以创建延伸到屏幕边缘的错觉。

```
.sidebar {
  background: salmon;
}

body {
  background: -webkit-gradient(linear, 100% 50%, 0% 50%, color-stop(50%, #fa8072), color-stop(50%, #ffffff));
  background: -webkit-linear-gradient(right, #fa8072 50%, #ffffff 50%);
  background: -moz-linear-gradient(right, #fa8072 50%, #ffffff 50%);
  background: -o-linear-gradient(right, #fa8072 50%, #ffffff 50%);
  background: linear-gradient(right, #fa8072 50%, #ffffff 50%);
}​ 
```

[演示](http://jsfiddle.net/CAu3N/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:23:47.920

如果你添加`#right{ position: fixed;}`到那将摆脱水平滚动条。这可以接受吗？

# google-app-engine - App Engine 1.7.3：需要有关 Django 1.4 支持的更多信息

> ID：13041145
> 
> 赞同：2
> 
> 时间：2012-10-24T00:06:13.883
> 
> 标签：google-app-engine, django-nonrel, django-1.4, djangoappengine

App Engine 1.7.3 刚刚发布，声称“Python 2.7 现在完全支持 Django 1.4”。请提供更多信息。这是指 Github 上 1.4 的 django-nonrel 源代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:59:18.223

不，不是 django-nonrel。此公告意味着您现在可以在 app.yaml 中使用 Django 1.4 作为库指令的一部分，如下所述：[https ://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

# java - twitter4j 未发现身份验证挑战

> ID：13041146
> 
> 赞同：1
> 
> 时间：2012-10-24T00:06:14.897
> 
> 标签：java, android, twitter-oauth, twitter4j

几天来一直在尝试使用 twitter4j 发布推文，但没有运气，我想做的是让一个人在一轮结束时从应用程序的时间线上发布他们的新最高分。这是我的代码

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tweetr);
    Button tweetr = (Button)findViewById(R.id.tweetr);

    //create a new twitter configuration using user details
    tweetTwitter = new TwitterFactory().getInstance();
    tweetTwitter.setOAuthConsumer(TWIT_KEY, TWIT_SECRET);

        //create a twitter instance
   // tweetTwitter = new TwitterFactory(twitConf).getInstance();

    tweetr.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

          dt.execute();

        }
    });

}

public class TweetTask extends AsyncTask<Object, Void, String> {
    @Override
    protected String doInBackground(Object... values) {
        /* try {
            //requestToken = tweetTwitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(requestToken.getAuthenticationURL())));
        */
        try {
            requestToken = tweetTwitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);
            String authUrl = requestToken.getAuthenticationURL();
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl)));
        } catch (TwitterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      return null;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.d("URI", "DONE");
        super.onPostExecute(result);
    }

}

@Override
protected void onResume() {
    super.onResume();
    final Uri uri = getIntent().getData();
    if(uri != null ){

                Log.d("URI", uri.toString());

                Thread th = new Thread(){
                    public void run(){
                        try {
                            String verifier = uri.getQueryParameter("oauth_verifier");
                            String oauthToken = uri.getQueryParameter("oauth_token");

                            RequestToken reqToken = tweetTwitter.getOAuthRequestToken(oauthToken,verifier); 

                            AccessToken accessToken = tweetTwitter.getOAuthAccessToken(reqToken);
                            String token = accessToken.getToken(), secret = accessToken.getTokenSecret();

                        } catch (TwitterException ex) {
                            Log.e("Main.onNewIntent", "" + ex.getMessage());
                        }

                    }};
                    th.start();
      }else
        Log.d("URI", "FAILED");         

    } 
```

}

这是我的错误打印出来

```
10-23 15:35:18.661: D/TWIT ER(2392): No authentication challenges foundRelevant discussions can be found on the Internet at: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:49:52.520

参考Twitter4J的[javadoc](http://twitter4j.org/en/javadoc/twitter4j/TwitterBaseImpl.html)

```
In order to get access acquire AccessToken using xAuth, you must apply by sending an email to api@twitter.com â€” all other applications will receive an HTTP 401 error. 
```

# java - How to increase STS (Spring Tool Suite) memory size?

> ID：13041147
> 
> 赞同：6
> 
> 时间：2012-10-24T00:06:15.610
> 
> 标签：java, eclipse, spring, out-of-memory, heap-memory

I am trying to increase heap size (memory) for the spring tool suite as I am getting out of memory.

If I increase from Xmx from 768m to 1024m I get the error "Failed to Create Java Virtual Machine".

If I revert Xmx to 768m it works fine but I get OOM (Out of Memory). I have STS 2.9.2\. OS is win7.

This is currently what I have in sts.ini at the moment.

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.2.R36x_v20101222
-product
com.springsource.sts.ide
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
384M
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Xms256m
-Xmx1024m
-Xss1m
-XX:PermSize=256m
-XX:MaxPermSize=1024m 
```

what should I change? Please advise.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-18T19:23:36.407

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.201.v20161025-1711.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.401.v20161122-
1740
-product
org.springsource.sts.ide
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.8
-Xmx1024m 
```

您应该只更改 Xmx。这里我使用 Xmx1024m 表示 STS 分配有 1 GB 内存，而 Xmx4G 表示 4 GB 内存。您可以检查堆状态为

在 Windows 菜单中打开 sts 选择首选项，然后从常规选项卡标记显示堆状态选项。

# objective-c - Objective C - Protect Framework code

> ID：13041149
> 
> 赞同：3
> 
> 时间：2012-10-24T00:06:27.903
> 
> 标签：objective-c, frameworks, breakpoints, source-code-protection

I have to show other people a project I'm working on but I want to protect a framework in the project from being readable. I just packed all the code in the framework and added it to the project.

The problem is that when the framework calls some delegate methods and I set a breakpoint to those Xcode shows the full .m / .mm files where those calls come from. How can I prevent that? I want to protect my code.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T00:38:52.103

您只看到代码是因为它在您的机器上可用并且 Spotlight 可以找到它。如果您分发已编译的框架二进制文件，则源代码不会显示在调试器中，但方法的名称会显示。剥离二进制文件（“剥离链接产品”）将删除一些函数名称，但不会删除方法名称，因为这些名称必须在运行时可用才能使消息分发起作用。这将使使用崩溃日志变得更加困难，因此除非您确实需要节省空间，否则我通常不推荐它。

请记住，您可以（或应该）做的事情只有这么多才能防止逆向工程。所有语言都受到逆向工程的影响，但 ObjC 本质上特别容易受到影响。有关这方面的更多讨论，请参阅[反编译 Objective-C 库。](https://stackoverflow.com/questions/2334072/decompiling-objective-c-libraries/2336679#2336679)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:26:24.867

将您的框架编译成二进制文件。这将“保护”源代码不被阅读，只公开头文件（您选择）。

# hadoop - How to resolve hosts using Cloudera Manager 4.0 installed on EC2

> ID：13041152
> 
> 赞同：1
> 
> 时间：2012-10-24T00:06:33.960
> 
> 标签：hadoop, cloudera

Can anyone provide Cloudera Manager 4.1 Free Version help with instructions on resolving hosts in EC2?

I have installed Cloudera Manager 4.1 Free Version on an EC2 m1.large instance. When I search for hosts using the external host name (dn1.example.com), it comes up correctly and installs the packages correctly. But, upon inspection, it does not come up. The only server that comes up is the server where Cloudera Manager is installed (ip-#-#-#-136.ec2.internal). I even tried to use the other host names for dn1 (ec2-#-#-#-47.compute-1.amazonaws.com, ip-#-#-#-152.ec2.internal) in the host searches. Both install successfully but don't show up in inspection. I'm at a loss.

Our admin has toyed around with /etc/hosts, /etc/resolv.conf, /etc/sysconfig/network. No combinations seem to work.

If there is an expert out there who can help, please can you explain what to do?

Very grateful, Ben

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:11:32.280

我可以通过以下更改解决 cloudera 成功添加主机但未在主机列表中显示的问题

1.  在所有主机（包括具有 cloudera 管理器的主机）中，将类似的内容添加到 /etc/hosts 文件（注意，我已删除默认条目 localhost.localdomain）

    127.0.0.1 本地主机

    ::1 localhost6.localdomain6 localhost6

    XXXX master.cloudera.mydomain master

    YYYY slave1.cloudera.mydomain slave1

2.  将此额外的搜索条目添加到 /etc/resolv.conf（保持默认搜索条目不变）

    搜索 cloudera.mydomain

重新启动系统/网络接口以使更改生效。/etc/rc.d/init.d/网络重启

现在，尝试添加两台机器。它对我有用。

来源：[Cloudera Manager 添加主机失败](https://stackoverflow.com/questions/8579105/cloudera-manager-fails-to-add-hosts)

# php - URL 路由正则表达式

> ID：13041156
> 
> 赞同：0
> 
> 时间：2012-10-24T00:06:54.453
> 
> 标签：php, regex, routes

我正在尝试创建一个匹配 URL 路由的正则表达式片段。

基本上，如果我有这条路线，`/users/:id`我想`/users/100`匹配，但`/users/100/edit`不匹配。

这就是我现在正在使用的：`users/(.*)/`但由于贪婪匹配，无论用户 ID 后面是什么，它都会匹配。`/edit`如果路线的尽头有一个或其他东西，我需要一些“打破”比赛的方法。

我研究了 Regex NOT 运算符，但没有运气。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:10:41.220

你只是想收集数字吗？

你可以使用`users/(\d*)/`

如果您想收集直到 a 的所有内容`/`，并且它使用 NOT，这就是您将如何做到的，`^/users/[^/]*$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:16:36.907

您可以使用负前瞻：

`users/(.*)/(?!edit)`

然而，这总是需要一个斜杠。也许更好的解决方案是：

`users/(\d+)(?!/edit)`

有关更多信息，请参阅[此帖子](https://stackoverflow.com/questions/3404037/regex-negative-lookahead)。

# c# - Windows 8 App Webview extract cookies

> ID：13041157
> 
> 赞同：2
> 
> 时间：2012-10-24T00:06:56.400
> 
> 标签：c#, windows-8

I have a webview in my windows 8 app. Is there a way to access the cookies from the webview? I used cookiecontainer to get response cookies but i would like to get access to cookie jar of the webview. If not possible, can I access local folders?

I found that cookies are stored for each app locally in folder:

Metro App Cookies %Root%\Users\%User%\AppData\Local\Packages\ %MetroAppName%\AC\INetCookies Contains cookie files specific to each Metro App. Data is contained in a text file.

Is there a way to access the contents from the app programatically?

I'll try the following in a bit:

```
using Windows.Storage;

StorageFolder localFolder = ApplicationData.Current.LocalFolder; 
```

Update: I tried looking for the above folder INetCookies but it doesn't seem to exist.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T10:41:30.337

您可以使用本机 InternetGetCookieEx 调用

```
const int INTERNET_COOKIE_HTTPONLY = 0x00002000;

[DllImport("wininet.dll", CharSet = CharSet.Unicode, SetLastError = true)]
static extern bool InternetGetCookieEx(string pchURL, string pchCookieName, StringBuilder pchCookieData, ref System.UInt32 pcchCookieData, int dwFlags, IntPtr lpReserved);

static string InternetGetCookieEx(string url)
{
    uint sizeInBytes = 0;
    InternetGetCookieEx(url, null, null, ref sizeInBytes, INTERNET_COOKIE_HTTPONLY, IntPtr.Zero);
    uint bufferCapacityInChars = (uint)Encoding.Unicode.GetMaxCharCount((int)sizeInBytes);
    var cookieData = new StringBuilder((int)bufferCapacityInChars);
    InternetGetCookieEx(url, null, cookieData, ref bufferCapacityInChars, INTERNET_COOKIE_HTTPONLY, IntPtr.Zero);
    return cookieData.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:23:21.090

事实上，如果你去 AppData\Local\Packages\PACKAGE_NAME 文件夹中搜索它，cookie 的文件夹确实存在。但根据 Microsoft 的政策，我们无法访问 PACKAGE_NAME 文件夹中的所有数据。

我们只能访问的文件夹是本地状态、临时状态和永久状态，但 cookie 保存在 AppData\Local\Packages\PACKAGE_NAME\AC\INetCache\SOME_KIND_OF_NAME 文件夹中，该文件夹无法从 Metro 应用程序访问。

如果需要，您可以通过下面的 MSDN 链接获得进一步的许可：

```
http://msdn.microsoft.com/en-in/library/windows/apps/hh464917.aspx

http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.aspx 
```

# android - JNI: properly manage lifetime of a Java object

> ID：13041158
> 
> 赞同：3
> 
> 时间：2012-10-24T00:07:14.377
> 
> 标签：android, c++, android-ndk, java-native-interface

When I create a native implementation peer in c++ how can I ensure that native part is also deleted when java object is deleted by JVM? I can add some methods that user of java object has to call explicitly, but I'd like to know if there some hook that I could put to handle when java object is deleted (garbage collected) so that I can automatically delete c++ implementation object as well.

I reviewed [JACE](http://sourceforge.net/projects/jace/) it seems that it does that, but I'd need to run PeerEnhancer to patch generated class file (probably that's how it hooks delete? or maybe it needs this patching for something else). However, I'd like to avoid messing with compiled java files, I don't want anything fancy

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:41:58.837

请注意，通过采用终结器，您将在最糟糕的地方逗弄 JVM。在 finalizer() 中调用 JNI 就像在驾驶时调整发动机气门正时。虽然在技术上是可行的，但也很容易导致 JVM 泄漏或崩溃。即使是最轻微的多线程接触，您肯定会在某些时候死锁/崩溃。如果您说“我不想要任何花哨的东西”，我建议您使用显式调用的方法。是的，按照惯例要求某些方法顺序是肮脏的设计，但是 JNI 通常是肮脏的。

如果一个受人尊敬的 JNI 库做了一个隐藏的类检测而不是简单地使用终结器，它可能是有原因的。一些推荐阅读（甚至没有提到 JNI！）：

[http://asserttrue.blogspot.com/2008/11/finalization-is-evil.html](http://asserttrue.blogspot.com/2008/11/finalization-is-evil.html)

[http://elliottback.com/wp/java-memory-leaks-w-finalize-examples/](http://elliottback.com/wp/java-memory-leaks-w-finalize-examples/)

我的建议是：是的，使用虚拟方法 detachFromPeer() 实现一个基类，在其中设置一些“分离”标志，然后在终结器中检查带有一些警告的标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T00:27:13.837

在这种情况下，您应该真正使用终结器，但您也应该使您的 Java 类也可关闭。

# ruby - How to use cucumber to test authentication in a sinatra application?

> ID：13041159
> 
> 赞同：0
> 
> 时间：2012-10-24T00:07:22.603
> 
> 标签：ruby, authentication, cucumber, sinatra

I am doing a BDD/TDD approach to writing my sinatra application. I would like to add authentication. I currently have a feature file that looks like this:

```
Scenario: Unauthenticated redirects to login page
  Given I am not logged in
  When I go to the homepage
  Then I should be redirected to the login page 
```

My steps look like this:

```
Given /^I am not logged in$/ do
  # not sure how to ensure this
end

When /^I go to the homepage$/ do
  visit '/'
end

Then /^I should be redirected to the login page$/ do
  current_path.should == '/auth/login'
end 
```

I am already setting up my app in `support/env.rb`:

```
require 'capybara/cucumber'
Capybara.app = MySintraApp 
```

And my app looks like this:

```
class MySinatraApp < Sinatra::Base
  get '/' do
    redirect '/auth/login' #todo: unless logged_in?
    haml :index
  end

  get '/auth/login' do
    haml :login
  end
end 
```

How do I implement the step to ensure "not logged in"? How would I start to implement the login functionality in a way that would be in a BDD/TDD style?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:31:19.353

我检查用户未登录的一种方法是检查页面是否显示“登录”链接/按钮（以及相关功能）。您可以反过来查看用户是否已登录。例如，用户的姓名是否显示在页面的横幅部分。

这对我来说似乎是最好的方式，因为这是用户确定它的方式，而这完全取决于他们的行为。

# javascript - Programmatically click on a link using jQuery on page load

> ID：13041161
> 
> 赞同：5
> 
> 时间：2012-10-24T00:07:40.293
> 
> 标签：javascript, jquery

I have a link that is on the page and I want to click it programmatically when the page loads.

Something like this:

```
$(document).ready(function () {

   // code to make the page think $('a.tagcloud-link') is clicked
}); 
```

The link is an AJAX call that displays the popular tags in Wordpress backend.

The function cannot easily be edited as it's dependent on many things.

So I want to trigger the AJAX link that calls the most popular tags on page load.

This will solve all my problems if it works.

That link is $('a.tagcloud-link')

Please, please help me on this I've spent hours pulling my hair out trying and failing to do this. Thank you.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T00:19:31.257

尝试这个：

```
$('a.tagcloud-link')[0].click(); 
```

Using`[0]`获取对 jQuery 对象中第一个 DOM 对象的引用，因此这将调用[DOM 对象的（非 jQuery）`.click()`方法](https://developer.mozilla.org/en-US/docs/DOM/element.click#Specification)，这将导致导航到指定的链接`href`。

使用[jQuery 的`.click()`方法](http://api.jquery.com/click/)将调用您绑定到元素的任何单击处理程序，但不会导致默认行为实际跟随链接。

*非常*简单的演示：http: [//jsfiddle.net/mtBav/](http://jsfiddle.net/mtBav/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T00:10:11.937

如果该元素拥有一个也与*jQuery*绑定的*事件处理程序*，您可能只需调用或 short ;*`.trigger( 'click' )``.click()`*

 *```
$(function() {
    $('a.tagcloud-link').click();
}); 
```

当然，在您调用 时`.click()`，该事件处理程序必须已经绑定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T04:32:03.273

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function () {
$("a#tobeclicked").click(function () {
// if it has to be href
var tohref = $(this).attr("href");
alert(tohref);
window.location=tohref;

// else you want add some functions

$("#mydiv").fadeIn();

});
$("a#tobeclicked").trigger('click');
});
</script>
<a id="tobeclicked" href="http://www.google.com">Go!</a>
<div id="mydiv" style="display:none;">Stroam</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T00:51:55.677

老实说，我认为这里的其他人都是对的，我认为这个问题的框架是错误的。但这是我的尝试，我认为我所做的只是把它框起来有点不同。只是想帮忙。

```
document.addEventListener("DOMContentLoaded", function() {
    EventL();
});

// global
var tagLoad = false;

function eventL() {
    $('a.tagcloud-link').on('click', function() {
       tagLoad = true;
    });

    // you can repurpose this, its for page refresh right now. but
    // I think it helps with your general idea?
    $(window).load(function(){ 
       init();
    });
}

function init () {
    if (tagLoad == true) {
         // Load your tags.
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-24T00:09:44.780

如果我正确理解了这个问题：

```
 $('a.tagcloud-link').click(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-24T00:10:26.260

如果您已经绑定了 $('a.tagcloud-link').click()，它将调用该函数。以下代码应该可以工作。

```
$(document).ready(function () {
 $('a.tagcloud-link').click();
}); 
```

但是如果要在其 href 中打开链接，则需要使用`window.location`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-24T00:10:32.847

尝试

```
$('a.tagcloud-link').click(); 
```

或者

```
$('a.tagcloud-link').trigger('click') 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-24T00:11:24.790

```
$(function() {
     $('a.tagcloud-link').on('click', function() {
          // execute code here
     });
}); 
```

这是对 jQuery 的正确使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-16T09:09:39.037

```
function my_admin_head(){
echo 
'<script type="text/javascript">
    jQuery(function( $ ){ 
        $(\'a.tagcloud-link\').each( function(){
            tagBox.get( $(this).attr(\'id\') );
            $(this).unbind().click(function(){
                $(this).siblings(\'.the-tagcloud\').toggle();
                return false;
            });
        return false;
    });
});
</script>';
}
add_action('admin_head', 'my_admin_head'); 
```

也许它可以帮助某人。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-25T00:05:17.463

这些都没有帮助。我通过绕过链接并在加载时执行它自己修复了它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-09T01:16:20.550

也许您用来访问元素的方式是将 jquery 语法与 javascript 混合。我也遇到了这个问题，但是我试图以错误的方式访问元素。

**就像这样**

```
$(document).ready(function(e){
        alert(location.hash);
        if (location.hash == "#22") {
            $("gallery div a")[1].click(); //without #
        };
    }) 
```

**但应该是这样的**

```
$(document).ready(function(e){
        alert(location.hash);
        if (location.hash == "#22") {
            $("#gallery div a")[1].click(); //with #, cause I was using an ID
        };
    }) 
```

并且有效:)*

# android - Memory Dump for Android/Java in Eclipse IDE

> ID：13041162
> 
> 赞同：1
> 
> 时间：2012-10-24T00:08:06.870
> 
> 标签：android, debugging

Is there a way to view memory in raw hex data in the Eclipse/Android debugger? I have a very large byte array. I can examine it but the values are hard to view as a list and are displayed as signed decimal values.

What I am looking for is a memory examiner to view this array as a memory dump of unsigned hex values similar to what you find in the MS Visual C++ debugger. And yes, I know there are no unsigned primitive types in java.

Has anyone found a solution to this?

# .net - Many-to-Many relationship in Entity Framework with relationship informantion

> ID：13041163
> 
> 赞同：0
> 
> 时间：2012-10-24T00:08:10.480
> 
> 标签：.net, database, oracle, entity-framework, ado.net

First said, this is my first experience using the Entity Framework so I apologize if this ends up being a newbie question. Everything has gone well so far; but, I run into a situation that I am not sure what the best way to handle is.

I need to create a many-to-many relationship; but, the many-to-many table contains more than just the composite key. In this case the Entity Framework does not see to recognize it as a many-to-many structure and so I don't seem to get the easy ability to get the collections without using the intervening table. Is there a better way to do this?

Simplified Example:

*   A Unit can have many boards and a board could have been in many units
*   When it is in a unit we need to record what slot it was in.

Tables:

```
Unit
 UnitID(PK)
 UnitName

Board
 BoardID(PK)
 BoardName

UnitBoard
 UnitID(PK,FK1)
 BoardID(PK,FK2)
 Slot 
```

When I pull this into my code using an ADO.NET Entity Data Model, I don't see an easy way to get the collection of Boards associated to a Unit from the Unit Entity or visa-versa.

Is there a better way to do this or do I just need to use the associated collection of UnitBoards then use that to build the collection of Units/Boards?

This seems I am probably not the first person to went to do something like this. Ex: I was thinking of Books and Owners wanting to also keep the related BookOwner information (like the purchase date).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:25:28.147

即使在更新的 Entity Framework 5 中，也没有很好的解决这个问题的方法。如果您有正确的外键关系，您应该能够访问您的板或单元，例如：

```
Unit.UnitBoards.Boards 
```

或者

```
Board.UnitBoards.Units 
```

但是如果多对多表在复合键之外有它自己的属性，那么您将没有直接导航属性（多对多导航）。

过滤时，您可以使用`Include`和`Select`减少数据库调用来包含它们。

```
var myBoards = From Context.Boards
  .Include(i => i.UnitBoards)
  .Include(i => i.UnitBoards.Select(is => is.Unit))
  .Where(...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:22:00.380

> 有没有更好的方法来做到这一点，还是我只需要使用相关的 UnitBoards 集合然后使用它来构建 Units/Boards 的集合？

拥有自定义联结表的唯一方法是像您一样创建实体。您可以让 EF 为您管理多对多关系，因此您可以拥有直接导航集合，或者您可以拥有关系上的自定义属性，但不能同时拥有这两者。

如果您考虑一下原因 - 如果 EF 确实允许您在关系上拥有自定义属性，您将如何访问它？要从 a`Board`到达 a `Unit`，您只需要去`Unit.Boards`。要从 a`Unit`到 a `Board`，那就是`Board.Units`。您实际上没有任何地方可以为任何个人关系放置插槽属性。

# java - A number within quotes - Regex

> ID：13041165
> 
> 赞同：0
> 
> 时间：2012-10-24T00:08:18.213
> 
> 标签：java, regex

I would like a regular expression that matches this: word,"number",word

Where number is something like: 100,000.00

So far I have this but I'm not sure how to check for quotes around a number.

```
(w+)(,)\\(d+)(,)(d+)(.)(d+)(,)\\(w+)(,) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:10:37.100

只需添加带有转义字符的引号，如下所示：

> \\w+,\\"\\d+,\\d+\\.\\d+\\",\\w+

我删除了最后一个昏迷......因为不是模式的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:09:36.973

如果您的号码后面可以有很少（或没有）分号和树数字，或者精度部分可以是可选的，您可以使用这个正则表达式：

```
String regex=
        "\\w+,\"" +     // word, semicolon, quote mark
        "\\d{1,3}" +    // number in form d, dd, or ddd
        "(,\\d{3})*" +  // optional (* means 0 or more times) part of numbers in format ",ddd"  
        "(\\.\\d{2})?" +// optional (? means 0 or 1 time) part ".dd" 
        "\",\\w+";      // quote mark, semicolon, word 
```

这将接受：

```
-precision part is optional
d
d.dd 

-number of semicolons can change, but every semicolon MUST have 3 digits after it
dd,ddd
d,ddd,ddd
d,ddd,ddd.dd 
```

# javascript - A running example or working demo of Interface pattern in JavaScript

> ID：13041168
> 
> 赞同：10
> 
> 时间：2012-10-24T00:09:02.033
> 
> 标签：javascript, oop, design-patterns, interface

I am reading the "pro javascript design patterns" book and finding little difficulty in understanding the "Interface" pattern given in the book chapter 2 as there isn't a complete code example demonstrating the use of this pattern.

I am looking for some help understanding this pattern with some running code example may be on jsfiddle etc.

This pattern is explained in the book pages 14 - 22, main point I am not understanding is where and how "addForm" method is called. OR if somebody can complete the ResultFormatter example with some test data and object this will really be very helpful in understanding the pattern.

Code for the book "Pro Javascript Design Patterns" can be downloaded from [http://jsdesignpatterns.com/](http://jsdesignpatterns.com/) and this is Chapter 2.

Thanks for the help !!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T14:30:11.353

我见过以不同方式实现的模式，但想法很简单：

1.  你有一些类——你的接口——它只是指定了一些函数的名称。（您可能希望有一个名为 Interface 的类，您的实际接口实例化该类，这样您的接口就属于 Interface 类型）
2.  然后你有一些其他类实现了这样的接口。这意味着第二个类必须至少具有接口指定的所有功能。
3.  最后，您在其他地方还有一些其他功能，它期望接收一个实现接口的对象。在您提到的示例代码中，此函数是 addForm，它需要一个实现“Composite”和“FormItem”接口的对象。
4.  然后，此函数循环遍历它期望的接口的所有方法，并检查您传递给它的对象是否也具有这些方法。如果在传递给函数的对象中找不到来自某个接口的方法，则确定该对象未实现该接口，并引发异常。

由于涉及的开销，有些人可能会发现这种模式不切实际，但鉴于 Javascript 缺乏对接口的本地支持，这不是一个太糟糕的解决方案。有些人可能还会发现在 Javascript 中为小型项目使用接口是多余的。

**例子**

```
var Interface = function(name, methods) {
    this.name = name;
    this.methods = [];

    if (methods.constructor == Array)
        this.methods = methods;
    else if (methods.constructor == String)
        this.methods[0] = methods;
    else
        throw new Error("Interface must define methods as a String or an Array of Strings");
};

var InterfaceHelper  = {
    ensureImplements : function(obj, interfaces) {
       // If interfaces is not an array, assume it's a function pointer
       var toImplement = interfaces.constructor == Array ? interfaces : [interfaces];
       var interface;

       // For every interface that obj must implement:
       for (var i = 0, len = toImplement.length; i < len; i++) {
          interface = toImplement[i];

          // Make sure it indeed is an interface
          if (interface.constructor != Interface)
             throw new Error("Object trying to implement a non-interface. "
             + interface.name + " is not an Interface.");

          // Make sure obj has all of the methods described in the interface
          for (var j = 0, interfaceLen = interface.methods.length; j < interfaceLen; j++)
             if (!obj[interface.methods[j]])
                throw new Error("Interface method not implemented. " 
                + interface.name + " defines method " + interface.methods[j]);
       }

       return true;
    }
};

var Drawable = new Interface("Drawable", ["onDraw"]);

var Surface = function() {
   this.implements = ["Drawable"];

   this.onDraw = function() {
      console.log("Surface Drawing");
   };
}; 
```

**用法**

```
var myDrawableSurface = new Surface();

// Returns true
InterfaceHelper.ensureImplements(myDrawableSurface, Drawable);

// Returns false (Error thrown)
InterfaceHelper.ensureImplements(myDrawableSurface, Array); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T19:11:16.110

完成了本书的例子，这里是工作的[jsfiddle](http://jsfiddle.net/anmolsaraf/ec22z/2/)，-

```
var Interface = function(name, methods) {
    if (arguments.length != 2) {
        throw new Error("Interface constructor called with " + arguments.length + "arguments, but expected exactly 2.");
    }

    this.name = name;
    this.methods = [];

    for (var i = 0, len = methods.length; i < len; i++) {
        if (typeof methods[i] !== 'string') {
            throw new Error("Interface constructor expects method names to be " + "passed in as a string.");
        }

        this.methods.push(methods[i]);
    }
};

// Static class method.
Interface.ensureImplements = function(object) {
    if (arguments.length < 2) {
        throw new Error("Function Interface.ensureImplements called with " + arguments.length + "arguments, but expected at least 2.");
    }

    for (var i = 1, len = arguments.length; i < len; i++) {
        var interface = arguments[i];

        if (interface.constructor !== Interface) {
            throw new Error("Function Interface.ensureImplements expects arguments" + "two and above to be instances of Interface.");
        }

        for (var j = 0, methodsLen = interface.methods.length; j < methodsLen; j++) {
            var method = interface.methods[j];

            if (!object[method] || typeof object[method] !== 'function') {
                throw new Error("Function Interface.ensureImplements: object " + "does not implement the " + interface.name + " interface. Method " + method + " was not found.");
            }
        }
    }
};

function Map() {}

Map.prototype.centerOnPoint = function(x,y) {
    alert('center=> x: ' + x + ', y: ' + y);
};

Map.prototype.zoom = function(x){
    alert('zoom : ' + x);
}

Map.prototype.draw = function(){
    alert('draw');
};

var map = new Map();
var DynamicMap = new Interface('DynamicMap', ['centerOnPoint', 'zoom', 'draw']);

function displayRoute(mapInstance) {
    Interface.ensureImplements(mapInstance, DynamicMap);
    mapInstance.centerOnPoint(12, 34);
    mapInstance.zoom(5);
    mapInstance.draw();
}

displayRoute(map);​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-09T22:05:43.227

ES6 为语言添加了语法糖。下面是同一示例的 ES6 实现。

```
class Interface {
    constructor(name, methods) {
        if (arguments.length < 2) {
            throw new Error('An Interface expects atleast 2 arguments ' + arguments.length
                + ' arguments passed')

        }
        this.name = name
        this.methods = []
        methods.forEach(method => {
            if (typeof method !== 'string') {
                throw new Error('Interface expects all the method names to be passed as as a string ' +
                    method + ' is a ' + typeof method)
            }
            this.methods.push(method)
        }, this);
    }

    static ensureImplements(object) {
        if(arguments.length < 2) {
            throw new Error("Function Interface.ensureImplements called with " +
                arguments.length + "arguments, but expected at least 2.")
        }

        for (let i = 1, len=arguments.length; i < len; i++) {
            const interf = arguments[i]
            if(interf.constructor !== Interface) {
                throw new Error('Function expects arguments two or above to be instaces of Interface' )
            }

            for(let j = 0, methodsLen = interf.methods.length; j < methodsLen; j++) {
                const method = interf.methods[j]
                if(!object[method] || !typeof object[method] === 'function') {
                    throw new Error('Does not implement the method the interface' + interf.name + 'Interface.Method '
                    + method + ' not found')
                }
            }
        }
    }
}

const DynamicMap = new Interface('DynamicMap', ['centerOnPoint', 'zoom', 'draw'])

class Map {
    constructor() {
        Interface.ensureImplements(this, DynamicMap)
    }
    centerOnPoint() {
        console.log('Moving to center')
    }
    zoom() {
        console.log('Zooming in')
    }

    draw() {
        console.log('Drawing map')
    }
}

const mapInstance = new Map()
```

尝试通过删除`Map`类中的方法来玩弄代码。希望它能更好地向来自 oop​​s 背景的人解释

# c# - 使用signalR实时显示在线用户，好主意吗？

> ID：13041169
> 
> 赞同：0
> 
> 时间：2012-10-24T00:09:08.163
> 
> 标签：c#, asp.net, asp.net-mvc, signalr

我想统计有多少用户在线，并在用户加入时实时更新，这样每个人都知道有多少用户在线。我想知道这是否会是设计上的坏事，因为随着越来越多的用户使用它，它必须向可能成千上万的客户发送消息。现在，我知道您可以随时扩展以处理负载，但是这样做是个好主意吗？服务器上会不会很亮，或者每次有人加入时都会消耗大量资源来更新在线用户数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:06:22.913

没有引人注目的业务或用例，不，我认为向可能数百万的用户显示实时用户数不是一个好主意，我当然不认为*传达*实时用户数是一个好主意不断地给他们所有人。

有一个您每分钟左右更新一次的内部用户计数；在页面加载时显示该数字。

# html - 在容器中从下到上添加带有文本的 div

> ID：13041170
> 
> 赞同：0
> 
> 时间：2012-10-24T00:09:12.360
> 
> 标签：html, position

是否可以在大 div 容器中从下到上添加带有文本消息的 div？我想从底部开始列出我的聊天消息。任何带有消息的新 div 我需要在带有旧消息的现有 div 下方添加（在底部容器中）。

谢谢。

```
 <div id="public_message_container" style="overflow:auto;width:500px;height:300px;">
    <div class='public_message'><b>Nick1:</b> Message1</div>
    <div class='public_message'><b>Nick2:</b> Message2</div>
    <div class='public_message'><b>Nick3:</b> Message3</div>
    <div class='public_message'><b>Nick4:</b> Message4</div>
</div> 
```

当我动态添加消息 1-4 时，我希望它从下到上显示，因为它们来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:09:34.003

您需要选择容器的最后一个孩子，然后使用插入`.after()`

```
$("#public_message_container div").last().after("<div class='public_message'><b>Nick5:</b> Message5</div>") 
```

# dynamics-crm - 如何在 Microsoft CRM 2011 插件中访问 1:N 关系实体？

> ID：13041175
> 
> 赞同：2
> 
> 时间：2012-10-24T00:09:52.937
> 
> 标签：dynamics-crm, dynamics-crm-2011

我有一个与自定义 Board Seat 实体具有 1:N 关系的自定义 Board 实体。我在董事会实体上有一个更新后插件，它试图遍历与正在更新的董事会相关的所有董事会席位。我已经尝试了前后图像，并且两者的关系都是空的，即使董事会有几个与之相关的董事会席位。

```
var board = EntityImage.ToEntity<my_boards>();
foreach (var seat in board.board_to_boardseat_relationship)
{
    // Process each seat
} 
```

我正在使用强类型实体，类型`board.board_to_boardseat_relationship`是`System.Collections.Generic.IEnumerable<my_boardseat>`. 似乎关系根本没有在前图像或后图像中填充。当我注册图像时，我选择所有属性。知道如何填充这种关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:00:52.473

麦克风，

它不会被填充，因为所有属性都只是实体的属性。您必须使用某种检索功能来获取与该特定板关联的所有席位。它们永远不会包含在您的后图像或前图像（或目标）中以下是一些示例代码：

> 实体 PostImage = (Entity)m_localcontext.PluginExecutionContext.PostEntityImages["PostImage"]; my_board board = PostImage.ToEntity();

```
 var seatsList = orgContext.CreateQuery<my_boardseat>().Where(c => c.boardId.Id == board.boardId).ToList();

 if (seatsList.Count > 0)
 {
      foreach (my_boardseat seat in seatsList)
      {
        //Your Code Here
      }
 } 
```

# jquery - 带有附加按钮的 jquery 滑块

> ID：13041176
> 
> 赞同：0
> 
> 时间：2012-10-24T00:09:59.647
> 
> 标签：jquery, button, slider

编辑：张贴在 jsfiddle 上以便更容易提供帮助：http: [//jsfiddle.net/GXf45/](http://jsfiddle.net/GXf45/)

我已经能够创建幻灯片（通过使用教程和堆栈溢出），现在我正在努力添加一些功能；节目中每张幻灯片的按钮。

上一个和下一个按钮可以完美地工作（尤其是在第一张和最后一张幻灯片上），但我遇到了中间按钮的问题。后来我想象jquery根据幻灯片的数量添加按钮。

下面的代码只是我正在进行的修订之一。我认为有很多机会可以改善我所拥有的。让我知道我的错误在哪里以及你可以做些什么来清理它。谢谢。

html 开头有一些红宝石，它根据一些部分填充一个 div。

html:

```
<div class='slider'>
    <ul>
    <% Dir["app/views/main/show/*"].each do |file| %>
      <li><%= render :file => Rails.root.join(file).to_s %></li>
    <% end %>
    </ul>

</div>
    <div id='slider-nav'>
    <button data-dir='prev'>Prvious</button>
    <button data-dir='next'>Next</button>
    <button data-dir='1'>1</button>
    <button data-dir='2'>2</button>
    <button data-dir='3'>3</button>
    <button data-dir='4'>4</button>
</div> 
```

js：

```
$(document).ready(function(){

    var sliderUL = $('div.slider').css('overflow', 'hidden').children('ul'),
    imgs = $('.showScene'),
    imgWidth = $('.showScene').width(),
    imgsLen = imgs.length,
    current = 1,
    totalImgsWidth = imgsLen * imgWidth;

    $('#slider-nav').show().find('button').on('click', function(){
        var direction = $(this).data('dir'),
        loc = imgWidth;

        //update current value
        //(direction == 'next' ) ? ++current : --current;

        if (direction == 'next')
            {
                current += 1; //2
            } 
        else if (direction == 'prev') 
            {
                current -= 1;//0
            }
        else
            {
                current = direction;    
            }

        //if first image
        if ( current == 0 ) {
            current = imgsLen;
            loc = totalImgsWidth - imgWidth;
            direction ='next';
        } else if ( current - 1 == imgsLen){
            current = 1;
            loc = 0;
        }

        transition(sliderUL, loc, direction);

    }); 

    function transition( container, loc, direction ){
        var unit; //-= or +=

        if ( direction && loc !== 0) {
            unit = ( direction == 'next') ? '-=' : '+=';
        }

        container.animate({
            'margin-left': unit ? (unit + loc) : loc
        });

    };

}); 
```

CSS：

```
*{margin:0px;padding: 0px;}
.showScene{
    width: 800px;
    height: 300px;

}

#slider-nav{
    margin-top: 1em;
    display: none;

}
#slider-nav button{
    padding: 1em;
    margin-right: 1em;
    border-radius: 10px;
    cursor: pointer;
}
.slider{
    width: 800px;
    height: 300px;
    border: 2px solid grey;
    overflow: scroll;

}
.slider ul {
    width: 10000px;
    list-style: none;

}
.slider ul li{
    float:left;
    list-style-type: none;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:47:36.600

您缺少计算编号按钮的`loc`和参数的逻辑。`direction`这是主要片段，请注意我对您的代码进行了一些重构以重用滑动逻辑。您只需要计算出从当前位置滑过多少，以及滑向哪个方向。

```
var num = parseInt(direction);
if (num !== current) {
    loc = imgWidth*(num -current);
    if (loc < 0) {
        direction = 'prev';
        loc = -loc;
    } else {
        direction = 'next';
    }
    current = num;
    doSlide(direction, loc);
} 
```

试试[这个](http://jsfiddle.net/GXf45/2/)小提琴。

# matlab - 我们能否从矩阵中得到不同的 eigenVectors 解决方案？

> ID：13041178
> 
> 赞同：4
> 
> 时间：2012-10-24T00:10:10.153
> 
> 标签：matlab, linear-algebra, eigenvector, eigenvalue, wolframalpha

我的目的是找到矩阵的特征向量。在 Matlab 中，有一个`[V,D] = eig(M)`通过使用来获取矩阵的特征向量：`[V,D] = eig(M)`。或者，我使用**WolframAlpha**网站来仔细检查我的结果。

我们有一个`10X10`名为 的矩阵`M`：

```
0.736538062307847   -0.638137874226607  -0.409041107160722  -0.221115060391256  -0.947102932298308  0.0307937582853794  1.23891356582639    1.23213871779652    0.763885436104244   -0.805948245321096
-1.00495215920171   -0.563583317483057  -0.250162608745252  0.0837145788064272  -0.201241986127792  -0.0351472158148094 -1.36303599752928   0.00983020375259212 -0.627205458137858  0.415060573134481
0.372470672825535   -0.356014310976260  -0.331871925811400  0.151334279460039   0.0983275066581362  -0.0189726910991071 0.0261595600177302  -0.752014960080128  -0.00643718050231003    0.802097123260581
1.26898635468390    -0.444779390923673  0.524988731629985   0.908008064819586   -1.66569084499144   -0.197045800083481  1.04250295411159    -0.826891197039745  2.22636770820512    0.226979917020922
-0.307384714237346  0.00930402052877782 0.213893752473805   -1.05326116146192   -0.487883985126739  0.0237598951768898  -0.224080566774865  0.153775526014521   -1.93899137944122   -0.300158630162419
7.04441299430365    -1.34338456640793   -0.461083493351887  5.30708311554706    -3.82919170270243   -2.18976040860706   6.38272280044908    2.33331906669527    9.21369926457948    -2.11599193328696
1   0   0   0   0   0   0   0   0   0
0   1   0   0   0   0   0   0   0   0
0   0   0   1   0   0   0   0   0   0
0   0   0   0   0   0   1   0   0   0 
```

`D`：

```
2.84950796497613 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    1.08333535157800 + 0.971374792725758i   0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    1.08333535157800 - 0.971374792725758i   0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    -2.05253164206377 + 0.00000000000000i   0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    -0.931513274011512 + 0.883950434279189i 0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    -0.931513274011512 - 0.883950434279189i 0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    -1.41036956613286 + 0.354930202789307i  0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    -1.41036956613286 - 0.354930202789307i  0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    -0.374014257422547 + 0.00000000000000i  0.00000000000000 + 0.00000000000000i
0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.00000000000000 + 0.00000000000000i    0.165579401742139 + 0.00000000000000i 
```

`V`：

```
-0.118788118233448 + 0.00000000000000i  0.458452024790792 + 0.00000000000000i   0.458452024790792 + -0.00000000000000i  -0.00893883603500744 + 0.00000000000000i    -0.343151745490688 - 0.0619235203325516i    -0.343151745490688 + 0.0619235203325516i    -0.415371644459693 + 0.00000000000000i  -0.415371644459693 + -0.00000000000000i -0.0432672840354827 + 0.00000000000000i 0.0205670999343567 + 0.00000000000000i
0.0644460666316380 + 0.00000000000000i  -0.257319460426423 + 0.297135138351391i -0.257319460426423 - 0.297135138351391i 0.000668740843331284 + 0.00000000000000i    -0.240349418297316 + 0.162117384568559i -0.240349418297316 - 0.162117384568559i -0.101240986260631 + 0.370051721507625i -0.101240986260631 - 0.370051721507625i 0.182133003667802 + 0.00000000000000i   0.0870047828436781 + 0.00000000000000i
-0.0349638967773464 + 0.00000000000000i -0.0481533171088709 - 0.333551383088345i    -0.0481533171088709 + 0.333551383088345i    -5.00304864960391e-05 + 0.00000000000000i   -0.0491721720673945 + 0.235973015480054i    -0.0491721720673945 - 0.235973015480054i    0.305000451960374 + 0.180389787086258i  0.305000451960374 - 0.180389787086258i  -0.766686233364027 + 0.00000000000000i  0.368055402163444 + 0.00000000000000i
-0.328483258287378 + 0.00000000000000i  -0.321235466934363 - 0.0865401147007471i    -0.321235466934363 + 0.0865401147007471i    -0.0942807049530764 + 0.00000000000000i -0.0354015249204485 + 0.395526630779543i    -0.0354015249204485 - 0.395526630779543i    -0.0584777280581259 - 0.342389123727367i    -0.0584777280581259 + 0.342389123727367i    0.0341847135233905 + 0.00000000000000i  -0.00637190625187862 + 0.00000000000000i
0.178211880664383 + 0.00000000000000i   0.236391683569043 - 0.159628238798322i  0.236391683569043 + 0.159628238798322i  0.00705341924756006 + 0.00000000000000i 0.208292766328178 + 0.256171148954103i  0.208292766328178 - 0.256171148954103i  -0.319285221542254 - 0.0313551221105837i    -0.319285221542254 + 0.0313551221105837i    -0.143900055026164 + 0.00000000000000i  -0.0269550068563120 + 0.00000000000000i
-0.908350536903352 + 0.00000000000000i  0.208752559894992 + 0.121276611951418i  0.208752559894992 - 0.121276611951418i  -0.994408141243082 + 0.00000000000000i  0.452243212306010 + 0.00000000000000i   0.452243212306010 + -0.00000000000000i  0.273997199582534 - 0.0964058973906923i 0.273997199582534 + 0.0964058973906923i -0.0270087356931836 + 0.00000000000000i 0.00197408431000798 + 0.00000000000000i
-0.0416872385315279 + 0.00000000000000i 0.234583850413183 - 0.210340074973091i  0.234583850413183 + 0.210340074973091i  0.00435502958971167 + 0.00000000000000i 0.160642433241717 + 0.218916331789935i  0.160642433241717 - 0.218916331789935i  0.276971588308683 + 0.0697020017773242i 0.276971588308683 - 0.0697020017773242i 0.115683515205146 + 0.00000000000000i   0.124212913671392 + 0.00000000000000i
0.0226165595687948 + 0.00000000000000i  0.00466011130798999 + 0.270099580217056i    0.00466011130798999 - 0.270099580217056i    -0.000325812684017280 + 0.00000000000000i   0.222664282388928 + 0.0372585184944646i 0.222664282388928 - 0.0372585184944646i 0.129604953142137 - 0.229763189016417i  0.129604953142137 + 0.229763189016417i  -0.486968076893485 + 0.00000000000000i  0.525456559984271 + 0.00000000000000i
-0.115277185508808 + 0.00000000000000i  -0.204076984892299 + 0.103102999488027i -0.204076984892299 - 0.103102999488027i 0.0459338618810664 + 0.00000000000000i  0.232009172507840 - 0.204443701767505i  0.232009172507840 + 0.204443701767505i  -0.0184618718969471 + 0.238119465887194i    -0.0184618718969471 - 0.238119465887194i    -0.0913994930540061 + 0.00000000000000i -0.0384824814248494 + 0.00000000000000i
-0.0146296269545178 + 0.00000000000000i 0.0235283849818557 - 0.215256480570249i 0.0235283849818557 + 0.215256480570249i -0.00212178438590738 + 0.00000000000000i    0.0266030060993678 - 0.209766836873709i 0.0266030060993678 + 0.209766836873709i -0.172989400304240 - 0.0929551855455724i    -0.172989400304240 + 0.0929551855455724i    -0.309302420721495 + 0.00000000000000i  0.750171291624984 + 0.00000000000000i 
```

我得到了以下结果：

1.  原始矩阵：

![原始矩阵 M](../Images/8b6f788dab8a1a7f079c58a04f492318.png)

1.  WolframAlpha 的结果：

![wolframalpha](../Images/75b072ba567615b82d8b302c427b8d0a.png)

2.  Matlab Eig 的结果：

D（特征值）

![特征值 - D](../Images/3a11c6fbe7bd77170d0d5ffed51c73c8.png)

V（特征向量）

![eigenVectors](../Images/25070d52cf354bd140a6b5b214de6379.png)

是否有可能为 eigenVectors 获得不同的解决方案，或者它应该是一个独特的答案。我有兴趣澄清这个概念。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T00:25:12.497

由于各种原因，特征向量不是唯一的。改变符号，一个特征向量仍然是相同特征值的特征向量。事实上，乘以任何常数，特征向量仍然如此。不同的工具有时可以选择不同的规范化。

如果特征值的多重性大于 1，则特征向量也不是唯一的，只要它们跨越相同的子空间。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-24T00:38:33.933

正如woodchips 指出的那样（+1），特征向量仅在线性变换之前是唯一的。这一事实从定义中显而易见，即特征向量/特征值对求解特征函数 A*v = k*v，其中 A 是矩阵，v 是特征向量，k 是特征值。

让我们考虑一个比你的（看起来很可怕的）问题更简单的例子：

```
M = [1, 2, 3; 4, 5, 6; 7, 8, 9];
[EigVec, EigVal] = eig(M); 
```

Matlab产生：

```
EigVec =
-0.2320   -0.7858    0.4082
-0.5253   -0.0868   -0.8165
-0.8187    0.6123    0.4082 
```

而 Mathematica 产生：

```
EigVec = 
0.2833    -1.2833    1
0.6417    -0.1417    -2
1         1          1 
```

来自 Matlab 文档：

“对于 eig(A)，特征向量被缩放，使得每个的范数都是 1.0。”。

另一方面，Mathematica 清楚地缩放了特征向量，因此最终元素是统一的。

即使只是观察我给出的输出，您也可以开始看到关系的出现（特别是比较两个输出的第三个特征向量）。

顺便说一句，我建议您编辑您的问题以获得更简单的输入矩阵`M`，例如我在这里使用的那个。这将使将来访问此页面的任何人都更具可读性。这实际上并不是一个糟糕的问题，但它当前的格式化方式可能会导致它被否决。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T05:49:39.960

我完全同意**Mr.Colin T Bowers**的观​​点，即 MATHEMATICA 进行标准化，以便 EigenVectors 的最后一个值变为一个。如果有人想生成像 MATHEMATICA 这样的 EigenVectors 结果，请使用 MATLAB，然后我们可以使用以下归一化步骤告诉 MATLAB 将**EigenVectors**结果的最后一个值归一化为**1 。**

```
M = [1, 2, 3; 4, 5, 6; 7, 8, 9];

[EigVec, EigVal] = eig(M);

sf=1./EigVec(end,:); %get the last value of each eigen vector and inverse for scale factor

sf=repmat(sf,size(EigVec,1),1); % Repeat Scale value of each element in the vector

Normalize_EigVec=EigVec.*sf;

Normalize_EigVec =

    0.2833   -1.2833    1.0000
    0.6417   -0.1417   -2.0000
    1.0000    1.0000    1.0000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T14:36:03.203

正如 Rody 指出的那样，Mathematica 使用的规范化是使最后一个元素统一。其他 eig 函数，如 QZ 算法（例如，由于不支持 Cholesky，您必须在 Matlab 编码器中使用它），不要将 Matlab 对 [V, lam] = eig(C) 所做的方式规范化。例如：[V,lam]= eig(C,eye(size(C)),'qz');

从文档[http://www.mathworks.com/help/techdoc/ref/eig.html](http://www.mathworks.com/help/techdoc/ref/eig.html)

注意：对于 eig(A)，特征向量被缩放，使得每个的范数为 1.0。对于 eig(A,B)、eig(A,'nobalance') 和 eig(A,B,flag)，特征向量未归一化。另请注意，如果 A 是对称的，则 eig(A,'nobalance') 会忽略 nobalance 选项，因为 A 已经是平衡的。

**对于[V, lam]=eig(C)；特征向量被缩放，使得每个的范数为 1.0。** 这就是我们在这里所需要的。Matlab 对 Cholesky 公式执行此操作，那么，如何重新归一化 QZ 产生的特征向量，使它们具有相同的比例？像这样：

```
W = V;
for i = 1:size(V,2) % for each column
    V(:,i) = V(:,i) / norm(V(:,i), 2);  % Normalize column i
end 
```

这将找到每个向量的长度并将元素除以该长度以缩放向量。Mathamatica 基本上做同样的事情，使最后一个元素为 1，而不是对向量进行归一化。 [http://www.fundza.com/vectors/normalize/](http://www.fundza.com/vectors/normalize/)

请注意，向量和值的顺序不一定相同，因此您可能仍需要对它们进行排序。Matlab 的 Cholesky 算法按如下排序顺序生成项目：

```
lam=diag(lam);
[sorted_lam,index]=sort(lam);
for cont=1:length(sorted_lam)
   sorted_V(:,cont)=V(:,index(cont));
end
W=sorted_W;
lam = diag(sorted_lam); 
```

即使在这样做之后，符号也可能不会指向相同的方向（如果特征向量乘以 -1，它们仍然是特征向量）。请注意，必须对 lambda（特征值）应用相同的排序，否则这些排序将无序。

如果列中的第一个元素为负，则典型的约定是对列的符号进行 filp。

如果超过 2 个为负数，您可以做的一件事是翻转符号：

```
%FLIP SIGNS IF MORE THAN 2 ARE NEGATIVE
W=sorted_W;
for i = 1:size(W,2) % for each column in V
    A = W(:,i);
    s=sign(A);
    inegatif=sum(s(:)==-1);
    if(inegatif>1)
        W(:,i) = -W(:,i);
    end
end 
```

但这仅在元素不接近 0 时才真正有帮助，因为如果它们接近 0，则不同的算法可能会在 0 的另一侧找到值，但总比没有好。

最后一件事，对于“B”值（广义特征值问题输入矩阵），我使用的是“eye(size(C))”。 **是否有选择“B”的最佳方法来改进此算法并使其给出更接近 Cholesky 的答案或更准确的答案？** 您可以使用任何（相同大小的实矩阵）值作为 B，再次包括 A 或 A'（A 是输入矩阵），但**什么是“好的选择”？**也许**A'**，我注意到对于某些输入，-1 的 3x3 似乎给出了与“chol”相同的答案？

[https://www.mathworks.com/help/matlab/ref/eig.html?searchHighlight=eig&s_tid=doc_srchtitle#inputarg_B](https://www.mathworks.com/help/matlab/ref/eig.html?searchHighlight=eig&s_tid=doc_srchtitle#inputarg_B)

# python - 带有日期系列的 DataFrame 索引

> ID：13041180
> 
> 赞同：3
> 
> 时间：2012-10-24T00:10:21.963
> 
> 标签：python, date, pandas

我是 Python 和 Pandas 的新手，在按日期系列索引时遇到了一些麻烦。我正在尝试将数据从 SQLite db 中提取到 DataFrame 中，该数据库由格式为“mm/dd/yyyy”的日期和股票价格组成。然后，我使用 set_index 创建一个新的 DataFrame，以按日期索引价格。如何使用数据集中的日期将新索引设置为日期序列？这需要日期时间转换还是 DataFrame 能够从对象转换为日期序列？

下面是我正在使用的代码：

```
import sqlite3 as db
import pandas as p

dbcon = db.connect(...ETF_DATA_TEST.db)
c = dbcon.cursor()
c.execute(""" QUERY """)
rs =p.DataFrame.from_records(c.fetchall(),columns =['Date','Price'])
data = rs.set_index('Date') 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:27:24.563

您可以使用 datetime.datetime.strptime 解析您的“日期”字符串，然后从 datetime.datetime 类型构造 numpy.datetime64 值：

```
data = rs.reindex(numpy.array([(lambda x : datetime.datetime.strptime(x,'%m/%d/%Y'))(x) for x in rs['Date']],dtype='datetime64[us]') 
```

# powershell - 如何通过 Invoke-Command 在远程计算机上调用 Powershell 版本 2

> ID：13041183
> 
> 赞同：3
> 
> 时间：2012-10-24T00:10:33.017
> 
> 标签：powershell, version, invoke-command, snap-in

我正在尝试使用 powershell 在 Web 服务器上远程设置网站。我尝试配置的 Web 服务器是 Windows Server 2008 R2 SP1，默认情况下它具有 powershell v2。

为了让事情变得更简单，我使用了管理单元“WebAdministration”。

每当我尝试调用以下命令时：

```
PS C:\p4\eacp4wireframe\ReleaseEngineering\DL_Powershell\Infrastructure\PowerShell\IIS>     Invoke-Command -ComputerName web4 -Credential $admin -ScriptBlock {add-pssnapin     WebAdministration; Get-Website} 
No snap-ins have been registered for Windows PowerShell version 2.
+ CategoryInfo          : InvalidArgument: (WebAdministration:String) [Add-PSSnapin], PSArgumentException
+ FullyQualifiedErrorId : AddPSSnapInRead,Microsoft.PowerShell.Commands.AddPSSnapinCommand 
```

我收到可怕的“没有为 Windows PowerShell 版本 2 注册管理单元”错误。

从逻辑上讲，我通过运行以下命令来检查 powershell 的版本：

```
PS C:\ Invoke-Command -ComputerName web4 -Credential $admin -ScriptBlock {(Get-Host).version}
Major  Minor  Build  Revision PSComputerName                                                                                                                                                                   
-----  -----  -----  -------- --------------                                                                                                                                                                   
1      0      0      0        web4 
```

我可以远程登录到 Web 服务器并正常运行 Powershell 命令。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:37:35.027

该版本号是远程处理使用的主机实现的版本号，例如：

```
C:\PS> Invoke-Command . {Get-Host | Get-Member}

   TypeName: System.Management.Automation.Internal.Host.InternalHost 
```

您必须至少使用 PowerShell 2.0 引擎，因为那是引入 PowerShell Remoting 的时候。更有可能您正在调用 64 位 PowerShell 远程处理端点，并且您的管理单元尚未为 64 位 PowerShell 注册或无法在 64 位 PowerShell 中运行（反之亦然）。

如果您需要调用 32 位远程端点，请尝试以下操作：

```
C:\PS> Invoke-Command . {[intptr]::size} -ConfigurationName Microsoft.PowerShell32
4 
```

# jquery - jQuery ajax 加载后同位素根本不运行

> ID：13041185
> 
> 赞同：1
> 
> 时间：2012-10-24T00:10:37.743
> 
> 标签：jquery, jquery-isotope

我在使用同位素并使用 ajax 加载其所有内容的网站时遇到问题。我在 ajax 调用后运行同位素脚本，它运行良好。问题是元素被放置在单个列中。我发现重新定位它们的唯一方法是调整窗口大小以使同位素再次运行。你知道哪个可能是问题吗？

这是我在 ajax 调用后调用的同位素函数：

```
jQuery('.products').isotope({
        itemSelector: '.products li',
        masonry : {
        columnWidth : 40
    }
}); 
```

这是指向我的网站的链接，以第一人称查看问题[http://ves.cat/bpdT](http://ves.cat/bpdT)。单击徽标，您会看到使用 ajax 重新加载主页后，产品缩略图位于单个列中，而不是像开头那样。如果您调整窗口大小，那么没关系，缩略图会回到正确的位置。

我也尝试`jQuery('.products').isotope('reLayout');`在同位素函数之后写，但它也不起作用。

提前致谢！

# cuda - nvcc 需要很长时间来编译简单的代码

> ID：13041186
> 
> 赞同：2
> 
> 时间：2012-10-24T00:10:38.723
> 
> 标签：cuda

我有这个非常简单的代码，并且 nvcc 需要很长时间才能编译（它会 100% 加载我的两个 CPU 内核并且永不停止）。这是由于一些循环展开吗？有没有更简单的方法来更快地初始化本地内存？

```
#include "cuda_runtime.h"
#include <stdio.h>
#include "cuComplex.h"
__global__ void test()
 {
 cuComplex myPoints[20][20];

 for (int i=0; i<20;i++)
     for (int j=0; j<20;j++)
    {
       myPoints[i][j].x=0.0;
        myPoints[i][j].y=0.0;
    }
 for (int i=0; i<20;i++)
     for (int j=0; j<20;j++)
   {

        printf("%d %d",myPoints[i][j].x,myPoints[i][j].y);
   }

 }

 main()
 {
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:25:17.707

这个明显的编译器错误已报告给 NVIDIA 编译器团队

# mobiscroll - Mobiscroll 时间更改验证开始和结束时间

> ID：13041189
> 
> 赞同：1
> 
> 时间：2012-10-24T00:11:06.190
> 
> 标签：mobiscroll

我需要对开始时间和结束时间进行验证，如果开始时间大于结束时间抛出和错误。

我怎样才能做到这一点。我需要使用哪些事件来完成 onselect、onclose 的验证？请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-25T07:40:16.970

您可以使用 onSelect 事件对 mobiscroll 进行更改。

这是我试过的一个例子..你可能会觉得有用

```
 onSelect: function (dateText, inst) {
        var newMinDate, newMaxDate;
        endDate = new Date(dateText);
        var newEndDate = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate() + 5);
        $endCal.mobiscroll('setDate', newEndDate);
        newMinDate = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate() + 1),
        $endCal.mobiscroll('option', {
            minDate: newMinDate
        });
    } 
```

[https://jsfiddle.net/sarvesh310/742Lqagk/2/](https://jsfiddle.net/sarvesh310/742Lqagk/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:17:57.973

您可以在 onSelect 事件中动态设置 minDate 和 maxDate 选项，例如：

```
$('#end_time').scroller('option', 'minDate', $('#start_time').scroller('getDate')); 
```

一个工作示例（不允许选择开始日期>结束日期）：

[http://jsfiddle.net/dioslaska/2MVv6/1/](http://jsfiddle.net/dioslaska/2MVv6/1/)

这也适用于日期和日期时间选择器。

# objective-c - NSDate 输出不正确

> ID：13041200
> 
> 赞同：-2
> 
> 时间：2012-10-24T00:13:01.153
> 
> 标签：objective-c, ios, cocoa-touch, nsdate

> **可能重复：**
> [将日期从 [NSDate 日期] 缩短几个小时](https://stackoverflow.com/questions/8466744/getting-date-from-nsdate-date-off-by-a-few-hours)

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"M-d-yyyy H:mm"];

NSDate *start= [dateFormatter dateFromString:@"10-24-2012 12:15"];
NSDate *end  = [dateFormatter dateFromString:@"10-24-2012 15:30"]; 
```

当我打印出来

```
 NSLog(@"------main_event start %@", start);
   NSLog(@"-----main_event end %@", end); 
```

结果是

```
 ---main_event start 2012-10-24 19:15:00 +0000
         ---main_event end 2012-10-24 22:30:00 +0000 
```

现在，看起来时间自动增加了 7 个小时，12:15 变为 19:15，15:30 变为 22:30。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:15:14.527

因为您的设备所在的时区是 UTC-7。

输出是 UTC（因此是`+0000`），因为单个 NSDate 将始终以 UTC 打印出它的时间。

如果您使用 NSDateFormatter 输出日期，它将考虑您的语言环境。在这里查看我的答案：[NSDate date 方法返回错误的结果](https://stackoverflow.com/questions/11454387/nsdate-date-method-returns-wrong-result/11454771#11454771)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:16:36.297

这些都是正确的结果。当您用于`NSLog`输出`NSDate`对象时，它以**GMT**显示。解析是在您当地的时区完成的。`NSDate`对象始终在**GMT**中。如果要在本地时区打印 NSDate 对象，则需要`NSDateFormatter`打印日期。

# c++ - 跟踪交换和比较

> ID：13041203
> 
> 赞同：0
> 
> 时间：2012-10-24T00:13:11.160
> 
> 标签：c++

我正在编写一个排序程序，它需要一个数组，用 1000 个随机数填充它，然后将数组复制到第二个数组中。之后程序应该使用 selectionSort 函数和 insertSort 函数。

但是当我使用这些函数时，我应该跟踪所有的交换和关键比较。我已经想出了如何为 insertSort 做到这一点。我无法弄清楚如何为 selectionSort 执行此操作

这是我的代码：

```
 template <class elemType>
 void selectionSort(elemType list[], int length)
 {
    int loc, minIndex;
int swaps =0;

  for (loc = 0; loc < length; loc++)
  {
    minIndex = minLocation(list, loc, length - 1);

    swap(list, loc, minIndex);

   }
cout<<"swaps = "<<swaps<<endl;
  } //end selectionSort

 template <class elemType>
 void swap(elemType list[], int first, int second)
 {
 elemType temp;
  temp = list[first];
  list[first] = list[second];
  list[second] = temp;
  } //end swap

 template <class elemType>
 int minLocation(elemType list[], int first, int last)
 {
  int loc, minIndex;    
  minIndex = first;

  for (loc = first + 1; loc <= last; loc++)
   { if (list[loc] < list[minIndex])
        minIndex = loc;

}

   return minIndex;
  } //end minLocation

  template <class elemType>
  void insertionSort(elemType list[], int length)
   {
int swaps = 0;
int comp = 0;

   for (int firstOutOfOrder = 1; firstOutOfOrder < length;
                             firstOutOfOrder++)
    if (list[firstOutOfOrder] < list[firstOutOfOrder - 1])
    {
        elemType temp = list[firstOutOfOrder];
        int location = firstOutOfOrder;

        do
        {
            list[location] = list[location - 1];
            location--;
            comp +=1;   
        } while(location > 0 && list[location - 1] > temp);

        list[location] = temp;
         swaps +=1;
    }

cout<<"swaps = "<<swaps<<endl;
cout<<"comps = "<<comp<<endl;
   } //end insertionSort

 #include<iostream>
 #include <ctime>
 #include <cstdlib>
 #include "searchSortAlgorithms.h"

 using namespace std;

 int main (){
//generate a new random set each time 

srand(time(0));

int a[1000] = {0};
int b[1000] = {0};

for(int i= 0; i<1000; i++)
{
    a[i] = rand()% 1000;
    b[i] = a[i];
}

insertionSort(a, 1000);
selectionSort(b, 1000);

    return 0;
 } 
```

为 inertionSort 打印出交换和比较，但我不熟悉如何让它与 selectionSort 一起工作，因为排序算法在 for 循环中调用其他函数。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:32:30.843

实际上，您的选择排序具有固定数量的比较`(length * (length-1) / 2)`和交换`(length)`。

如果你无论如何都想计算它们，

```
 // Count variables can be defined in main(), and passed through
 // to swap(), minLocation().
 template <class elemType>
 void swap(elemType list[], int first, int second)
 {
    // Count swap here  
 }

 template <class elemType>
 int minLocation(elemType list[], int first, int last)
 {
   ..
   for (loc = first + 1; loc <= last; loc++)
   { 
      // Count comparation here
   }   
   ..
 } 
```

顺便说一句，您在插入排序中的比较计数也不完整。

```
for (int firstOutOfOrder = 1; firstOutOfOrder < length; firstOutOfOrder++)
{    
   // You miss the count here.
   if (list[firstOutOfOrder] < list[firstOutOfOrder - 1]) 
```

# javascript - HTML5 音频。更换Element还是一样的音频文件（缓存）怎么解决？

> ID：13041206
> 
> 赞同：7
> 
> 时间：2012-10-24T00:13:45.133
> 
> 标签：javascript, html, caching, html5-audio

我在我的 HTML 文件中使用 HTML5 音频元素。

尝试了很多方法，我只是无法通过 AJAX 替换音频文件，它仍然返回相同的音频文件。

```
<div id="audiodiv">
   <audio id="audioelement">
    <source src="test.ogg" type="audio/ogg">
   </audio>
</div> 
```

所以我记录了一个名为 test.ogg 的新文件，它覆盖了旧文件。我尝试使用 jQuery 并使用`$("#audiodiv").html('')` 和重新渲染这部分。然后通过获取元素`document.getElementbyID`，然后使用`.play() function`.

它返回相同的旧 test.ogg，它已经被新的覆盖。

所以我试图删除缓存，仍然是同样的问题。

唯一可行的方法是删除缓存并关闭浏览器并再次调用页面......

我该如何解决这个问题？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T00:29:50.597

如果您不打算更改文件的名称但继续更新它，那么您需要将即时`Expires`HTTP 标头添加到服务器端的响应中。具体如何执行此操作取决于您使用的服务器。常见的包括[Apache](http://httpd.apache.org/docs/2.2/mod/mod_expires.html)和[IIS](http://technet.microsoft.com/en-us/library/cc770661%28WS.10%29.aspx)。

但是，让浏览器缓存音频并为每个新文件指定不同的名称会更容易，也[更好。](http://developer.yahoo.com/performance/rules.html#expires)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:43:34.100

最快和最简单的解决方案是更改文件的名称。这将解决问题。否则，请使用 robertc 的解决方案。就个人而言，我只会更改文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-01T03:54:42.363

我使用相同的文件服务器端使用 JS 无缓存技巧，如下所示：

```
var audioPlayer =  $('<audio src="/' + mp3FileName + '?noCache=' + Math.floor(Math.random() * 1000000) + '" type="audio/mpeg" autoplay controls></audio>'); 
```

设置 Expire、Last-Modified 和 Cache-control 标头对我不起作用，但是将随机数字字符串添加到 src 作为 GET 变量就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T05:56:14.740

如果您将`<audio>`标签放在`<iframe>`

`<iframe>`然后在您上传新声音文件的活动期间以 5 秒的延迟刷新。它可能会输出您的新声音文件。

```
$('#UploadNewSoundButton').click(function(){
       //insert code that uploads new sound file 

       setTimeout(function(){
            window.frames['iframeWithAudio'].location.reload();
        },5000)   
 }) 
```

也许？？？我是新来的。

# r - 如何在控制台窗口中读取用户输入？

> ID：13041207
> 
> 赞同：0
> 
> 时间：2012-10-24T00:13:48.937
> 
> 标签：r, input, console

> **可能重复：**
> [R 中的命令行问题](https://stackoverflow.com/questions/3454969/command-line-questions-in-r)

说，如果我在控制台中输入一个字符串，我怎样才能让 R 识别它是一个字符串（或我输入的任何类型的数据）并将其存储到`x`？

因为我想做的是：如果用户输入“饥饿”，那么 R 应该识别这个字符串“饥饿”并运行一个特定的函数。那可能吗？

# java - 我的 ButtonListener 拨号程序出错

> ID：13041208
> 
> 赞同：1
> 
> 时间：2012-10-24T00:13:50.123
> 
> 标签：java, swing, awt, actionlistener, mixing

我只是想弄清楚为什么会出现这些错误。我不确定为什么它说未找到变量，或者为什么它不允许我添加或减去一个 int。

以下是错误：

```
 javac Dial2.java
 Dial2.java:53: cannot find symbol
symbol  : class arrl
location: class DialFrame
b.addActionListener(new arrl());
                        ^
Dial2.java:56: b is already defined in DialFrame(java.lang.String)
Button b = new Button("<");
       ^
Dial2.java:57: cannot find symbol
symbol  : class arrl
location: class DialFrame
b.addActionListener(new arrl());
                        ^
Dial2.java:127: cannot find symbol
symbol  : variable pastNumbeCount
location: class DialFrame.ArrowListener
    arrowIndex = (arrowIndex + pastNumbeCount - 1) % pastNumberCount;
                               ^
Dial2.java:127: operator + cannot be applied to int,pastNumbeCount
    arrowIndex = (arrowIndex + pastNumbeCount - 1) % pastNumberCount;
                  ^
Dial2.java:127: operator - cannot be applied to <nulltype>,int
    arrowIndex = (arrowIndex + pastNumbeCount - 1) % pastNumberCount;
                                              ^
Dial2.java:128: cannot find symbol
symbol  : variable arrowindex
location: class DialFrame.ArrowListener
    phoneNumber.setText(pastNumbers[arrowindex - 1]);
                                    ^
Dial2.java:133: cannot find symbol
symbol  : variable pastNumberindex
location: class DialFrame.ArrowListener
    phoneNumber.setText(pastNumberindex);
                        ^
8 errors 
```

这是一个简单的电话拨号器的代码：

```
cat Dial2.java
import java.awt.*;
import java.awt.event.*;

// Driver class
public class Dial2 {

public static void main(String[] args) {
Frame frame = new DialFrame("Dial");
frame.pack();
frame.setVisible(true);
}
}

// Frame class
class DialFrame extends Frame {
private TextField phoneNumber = new TextField();
private String pastNumbers[] = new String[10];
private int pastNumberCount = 0;
private int pastNumberIndex = 0;
private int arrowIndex = 0;

// Constructor
public DialFrame(String title) {
// Set title
super(title);

// set all pastNumbers to empty string
for (int x = 0; x < pastNumbers.length; x++)
  pastNumbers[x] = "";

// Make text field non-editable and put at top of frame
phoneNumber.setEditable(false);
add("North", phoneNumber);

// Create panel to hold buttons and set its layout
Panel buttonPanel = new Panel();
buttonPanel.setLayout(new GridLayout(4, 3, 10, 10));

DigitListener dl = new DigitListener();
ArrowListener arrl = new ArrowListener();

// Create first nine buttons, attach a listener to each,
// and add buttons to buttonPanel
for (int i = 1; i <= 9; i++) {
  Button b = new Button(i + "");
  b.addActionListener(dl);
  buttonPanel.add(b);
}

// **1** Add your two new buttons to your panel, along with an
//       an arrow listener for both
Button b = new Button(">");
b.addActionListener(new arrl());

b = new Button("0");
Button b = new Button("<");
b.addActionListener(new arrl());
buttonPanel.add(b);

// Create a panel to hold buttonPanel; put it at the
// center of the frame
Panel centerPanel = new Panel();
centerPanel.add(buttonPanel);
add("Center", centerPanel);

// Create a panel to hold the "Dial" button; put it at
// the bottom of the frame
Panel bottomPanel = new Panel();
b = new Button("Dial");
b.addActionListener(new DialListener());
bottomPanel.add(b);
add("South", bottomPanel);

// Attach window listener
addWindowListener(new WindowCloser());
}

private void addPastNumber(String num) {
boolean numberAlreadyAdded = false;
for (int x=0; x < pastNumbers.length; x++) {
  if (pastNumbers[x].equals(num)) {
    numberAlreadyAdded = true;  break;
  }
}
if (!numberAlreadyAdded) {
  pastNumbers[pastNumberIndex] = num;
  pastNumberIndex++;
  if (pastNumberCount < 10) pastNumberCount++;
  if (pastNumberIndex == pastNumbers.length) pastNumberIndex = 0;
}
arrowIndex = pastNumberIndex;
}  

 // Listener for all buttons
class DigitListener implements ActionListener {
public void actionPerformed(ActionEvent evt) {
  String buttonLabel = evt.getActionCommand();
  // append the digit on the newly pressed key
  phoneNumber.setText(phoneNumber.getText() + buttonLabel);
}
}

// Listener for all buttons
class DialListener implements ActionListener {
public void actionPerformed(ActionEvent evt) {
  addPastNumber(phoneNumber.getText());
  phoneNumber.setText("Dialing...");
  // pause for two seconds, or 2000 millisecond  
  try {
    Thread.sleep(2000);
  } catch (InterruptedException e) {}
  phoneNumber.setText("");
}
}

// Listener for "arrow" buttons
class ArrowListener implements ActionListener {
public void actionPerformed(ActionEvent evt) {

  // ** 2 **
String buttonLabel = evt.getActionCommand();

if (buttonLabel == "<")
{
    arrowIndex = (arrowIndex + pastNumbeCount - 1) % pastNumberCount;
    phoneNumber.setText(pastNumbers[arrowindex - 1]);
}
else
{
    arrowIndex = (arrowIndex + 1) % pastNumberCount;
    phoneNumber.setText(pastNumberindex);
}

}
}

 // Listener for window
class WindowCloser extends WindowAdapter {
public void windowClosing(WindowEvent evt) {
  System.exit(0);
}
}
} 
```

任何帮助或信息将不胜感激。

说明：如果 out pastNumbers 数组中的当前索引为 9，则按“>”键将显示存储在索引 0 处的数字。如果当前索引为 0，则按下“<”键将显示存储在索引 9 处的数字。

要进行设置，我需要从按钮中检索标签。如果是“<”键，将我的箭头索引设置为： (arrowIndex + pastNumberCount - 1) % pastNumberCount; 并将我的过去号码数组中此索引处的过去号码添加到我的 phoneNumber 文本字段中。

否则，我需要将我的数组索引设置为：(arrowIndex + 1) % pastNumberCount，并将该索引处的过去数字添加到您的文本字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:33:46.330

使用 new ArrowListener() 而不是 new arrl(); **（arrl 不是一个类，它是一个对象）** 使用 pastNumberCount 而不是 pastNumbeCount **（r 缺失）** 使用 arrowIndex 而不是 arrowindex **（我应该是大写）** 使用 pastNumberIndex 而不是 pastNumberindex **（我应该是大写）**

你的程序有很多错别字。

问候， 亚什

# php - 用php打印二进制数据

> ID：13041214
> 
> 赞同：1
> 
> 时间：2012-10-24T00:14:36.387
> 
> 标签：php, http, get, binary

我想回显要由我的 http 客户端解析的二进制数据。我正在使用 HTTP GET 并且我已经尝试过这个：

```
<?php
if (isset($_GET['mac'])) {
  if (isset($_GET['f'])) {
    switch ($_GET['f']){
  case 'get_maclist':
      $binarydata = pack("C*", 0x00, 0x00,0x10, 0x2C, 0x1B, 0x16, 0x4C, 0xDF, 0xCB, 0x00,     0x01);

  $header="Content-Disposition: attachment; filename=test.bin;";
  header($header);
  header("Content-Transfer-Encoding: binary");
  echo $binarydata; 
```

我调用的网址：http://MyIP/test.php?mac=ABC&f=get_maclist

但是当使用十六进制编辑器查看二进制文件时，我在文件中收到的内容有所不同。如何正确完成此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T22:00:51.653

我想到了。问题出在我的代码中的不同位置，仅仅是因为我忘记了休息；在 switch() 中，它会将与预期不同的数据加载到二进制文件中......

# gcc - GCC 插件添加通过引入新关键字

> ID：13041216
> 
> 赞同：2
> 
> 时间：2012-10-24T00:15:09.053
> 
> 标签：gcc, compiler-construction

我刚刚开始探索 GCC 插件 API 的世界，我正在尝试为以下示例扩展 GCC。

```
class Foo { ... };

Foo* f = __construct Foo(); // __construct is meant to be a new keyword 
```

理想情况下，我希望插件简单地替换为类似的`__construct`东西`new (foo_class_info)`，所以你最终会得到

```
Foo* f = new (foo_class_info) Foo(); 
```

where`foo_class_info`已通过`PLUGIN_FINISH_TYPE`回调提供（即 __construct 不能在预处理器传递中替换）。

实现这一目标的正确/最简单方法是什么？我什至不介意将一些用户域模板代码与插件结合起来。

添加一个新的通行证是要走的路吗？如果是这样，我真的可以使用一些指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-27T23:44:05.153

插件从根本上不能改变语法。

您最多可以添加一个新的编译指示、属性或内置函数，然后在以后的过程中使用它们。

# amazon-s3 - 域的 Amazon S3 权限

> ID：13041219
> 
> 赞同：1
> 
> 时间：2012-10-24T00:15:36.153
> 
> 标签：amazon-s3, amazon

场景：

*   包含私有文件的 Amazon S3 文件夹
*   目标：在特定域上的 HTML5 播放器上显示视频，而不将这些文件公开（类似于 vimeo 允许仅在域中嵌入视频）

我已经尝试更改存储桶策略但没有成功！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:41:10.943

1.  您需要将这些文件设置为私有。

2.  您需要使用预签名的 URL 来获取正确的身份验证令牌，以便在将文件设置为私有后查看文件。

3.  如果您的播放器是基于网络的，您可能需要启用[CORS 配置](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html)。

# java - 在 Windows 上使用 JNA 调用 __cpuid 函数

> ID：13041220
> 
> 赞同：1
> 
> 时间：2012-10-24T00:15:45.130
> 
> 标签：java, windows, jna, cpuid

我需要在 Java 中获取处理器信息（供应商、型号等）。我通常会使用 C/C++，但不幸的是，对于我当前的项目，这必须在 Java 中完成。我正在使用 JNA 进行本机访问，并且我已将 JNA 声明`Library`如下：

```
public interface CLibrary extends Library {
    public void __cpuid(int[] CPUInfo, int InfoType);
} 
```

我正在尝试像这样拨打电话：

```
CLibrary c = (CLibrary) Native.loadLibrary("msvcrt", CLibrary.class);
int[] CPUInfo = new int[4];
c.__cpuid(CPUInfo, 0); 
```

但是我得到了`Exception in thread "main" java.lang.UnsatisfiedLinkError: Unable to load library 'intrin': The specified module could not be found.`这可能意味着我正在加载错误的库。

那么我需要加载什么库才能访问`__cpuid`Windows 上的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:49:40.187

由于 __cpuid 是编译器固有的（[请参阅 MSDN](http://msdn.microsoft.com/en-us/library/hskdteyh%28v=vs.100%29.aspx)）而不是函数，因此没有关联的 DLL。你需要自己写。

# c - Invalid pointer address when trying to free

> ID：13041223
> 
> 赞同：2
> 
> 时间：2012-10-24T00:16:32.210
> 
> 标签：c, pointers

So all I'm trying to do is free a pointer and it just gives me the error 'invalid address'; though the address is clearly valid, as illustrated by the prints I put in. It tries to free the address of the pointer, but still fails. Through valgrind, it gives the error invalid free() saying the address is on thread 1's stack? The code below is runnable; can anyone help?

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>

#define SUCC 1
#define FAIL -1

typedef struct bucket {
   char *key;
   void *value;
   struct bucket *next;
} Bucket;

typedef struct {
   int key_count;
   int table_size;
   void (*free_value)(void *);
   Bucket **buckets;
} Table;

extern unsigned int hash_code(const char *key)  {
    unsigned int hash = 0, i = 0;
    while(i < strlen(key))  {
        hash ^= ((hash << 3) | (hash >> 29)) + key[i++];
    }
    return hash;
}

/*Makes copy of string and returns pointer to it*/
char * cpy(const char *str) {
    char *new = malloc(sizeof(char *));
    if(new)
        strcpy(new, str);
    return new;
}   

int create_table(Table ** table, int table_size, void (*free_value)(void *))    {
    *table = malloc(sizeof(Table));
    if(table && table_size != 0)    {
        int i = 0;
        (*table)->key_count = 0;   
        (*table)->table_size = table_size;
        (*table)->free_value = free_value;
        (*table)->buckets = calloc(table_size, sizeof(Bucket *));
        while(i < table_size)   
            (*table)->buckets[i++] = NULL;
        return SUCC;
    }
    return FAIL;
}

int put(Table * table, const char *key, void *value)    {
    if(table && key)    {
        int hash = hash_code(key)%table->table_size;
        Bucket *curr = table->buckets[hash];
        while(curr) {
            if(strcmp(curr->key, key) == 0)  {
                if(table->free_value)
                    table->free_value(curr->value);
                printf("addr of ptr: %p\n", value);
                curr->value = value;
                printf("addr of curr ptr: %p\n", curr->value);
                return SUCC;
            }
           curr = curr->next;
        }
        curr = malloc(sizeof(Bucket));
        curr->key = cpy(key);
        printf("addr of ptr: %p\n", value);
        curr->value = value; 
        printf("addr of curr ptr: %p\n", curr->value);
        curr->next = table->buckets[hash];
        table->buckets[hash] = curr;
        table->key_count++;

        return SUCC;
    }
    return FAIL;
}

int remove_entry(Table * table, const char *key)    {
    if(table && key)    {
        int hash = hash_code(key)%(table->table_size);
        Bucket *curr = table->buckets[hash], *prev = table->buckets[hash];
        while(curr) {
            printf("attempt");
            if(strcmp(curr->key, key) == 0)  {
                void * test = curr->value;
                printf("at addr %p\n", test);
                table->free_value(test);
                printf("freed");

                if(table->free_value){
                   table->free_value(curr->value);
                }
                free(curr->key);
                curr->key = NULL;
                curr->value = NULL;
                table->key_count--;
                if(prev == curr)
                    table->buckets[hash] = curr->next;
                else
                    prev->next = curr->next;
                free(curr);
                curr = NULL;
                return SUCC;
            }
            prev = curr;
            curr = curr->next;
        }
    }
    return FAIL;
} 
```

And the test file that shows the error:

```
#include <stdio.h>
#include <stdlib.h>
#include "htable.h"

int main()  {
    Table *t;
    int num2 = 3;
    printf("create: %d\n",create_table(&t, 2, free));
    printf("addr of ptr: %p\n",(void *)&num2);
    printf("put %s: %d\n","test",put(t, "test", &num2));
    printf("rem key: %d\n",remove_entry(t, "test"));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T00:18:32.130

This is broken:

```
char *new = malloc(sizeof(char *)); 
```

The amount of memory you need is based on what you need to store, which is the string. You want:

```
char *new = malloc(strlen(str) + 1); 
```

Or, better yet, just use `strdup`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T00:24:51.190

You are trying to `free()` a stack variable: `num2` (in `main()`):

```
int num2 = 3; 
```

Later, you have this call:

```
printf("put %s: %d\n","test",put(t, "test", &num2)); 
```

You're passing the address of `num2` to `put()`, which means that `remove_entry()` will try to free it later. This is illegal. You cannot free a variable allocated on the stack. You should dynamically allocate `num2` instead:

```
int* num2 = malloc(sizeof(int));
*num2 = 3; 
```

There's another problem as well though. In this code:

```
void * test = curr->value;
printf("at addr %p\n", test);
table->free_value(test);
printf("freed");

if(table->free_value){
    table->free_value(curr->value);
} 
```

You are freeing `curr->value` twice, because you're freeing `test` which is just a copy of the pointer.

# ember.js - 子视图未正确更新

> ID：13041228
> 
> 赞同：0
> 
> 时间：2012-10-24T00:16:59.880
> 
> 标签：ember.js

例外的行为是：当用户将一个问题放到其他问题中时，两个问题之间的顺序会发生变化

在编写视图之前，`Encuesta.View.Pregunta`实现了切换问题的行为并且工作正常，控制器方法`mvPregunta`将两个问题之间的位置更改为`numero`.

`Encuesta.View.Pregunta`当问题被切换时，视图的新视图被切换，`mvPregunta`但**视图不会改变**

## 脚本

```
@Encuesta.View.reopen
    Pregunta: Em.View.extend
        tagName: 'span'
        editMode: false,
        attributeBindings: 'draggable',
        draggable: 'true'
        doubleClick: (ev) ->
            @set 'editMode', true
        dragStart: (ev) ->
            data = ev.originalEvent.dataTransfer
            data.setData 'numero', @get 'content.numero'
        dragEnter: (ev) ->
            ev.preventDefault()
            return false;
        dragOver: (ev) ->
            ev.preventDefault()
            return false;
        drop: (ev) ->
            numero = ev.originalEvent.dataTransfer.getData 'numero'
            if numero isnt @get 'content.numero'
                App.get('router.myController').mvPregunta numero, @get 'content.numero'
            ev.preventDefault()
            return false;

    PreguntaTextField: Em.TextField.extend
        editModeBinding: 'parentView.editMode'
        didInsertElement: ->
            @$().focus()
        insertNewline: ->
            @set 'editMode', false
        focusOut: (ev) ->
            @set 'editMode', false 
```

## 模板

```
{{#each item in controller.items}}
    <li>
        {{#view Encuesta.View.Pregunta
            contentBinding="pregunta"}}
            {{#if view.editMode}}
                {{view Encuesta.View.PreguntaTextField
                    valueBinding="view.content.texto"}}
            {{else}}
                {{view.content.texto}}
            {{/if}}
        {{/view}}
    </li>
{{/each}} 
```

# filter - Bullet Physics Broadphase 过滤器回调以过滤复合体内的单个形状

> ID：13041229
> 
> 赞同：5
> 
> 时间：2012-10-24T00:17:06.743
> 
> 标签：filter, collision, bulletphysics

有没有办法在 Bullet Physics 中设置 Broadphase 滤波器回调，如下所示：

由两种形状构成的复合动态体，比如圆柱体和盒子，其中圆柱体只能与其他动态体内的圆柱体碰撞，而盒子只能与第三种物体碰撞，即静态球体

不允许其他碰撞：圆柱体与球体，不得碰撞；盒子与盒子，也不能碰撞

下图显示了我上面描述的内容

![碰撞过滤器](../Images/d578411dd59c5a6acdccb7d47ffa8b38.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T13:30:09.597

你可以这样做。这是代码

```
struct FilterCallback : public btOverlapFilterCallback 
{ 
    virtual bool  needBroadphaseCollision(btBroadphaseProxy* proxy0,btBroadphaseProxy* proxy1) const; 
}; 
// ....
FilterCallback filterCallback;
// ....
m_dynamicsWorld->getPairCache()->setOverlapFilterCallback(filterCallback);

bool  FilterCallback::needBroadphaseCollision(btBroadphaseProxy* proxy0,btBroadphaseProxy* proxy1) const 
{ 
// return false for pair with no colision
} 
```

# prolog - 有没有办法巩固事实？

> ID：13041236
> 
> 赞同：4
> 
> 时间：2012-10-24T00:18:25.247
> 
> 标签：prolog

有没有办法扭转这个：

```
genre(blues).
gere(hiphop).
genre(rock). 
```

变成这样：

```
genre(blues;hiphop;rock). 
```

*我知道这不起作用，但确实存在类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:37:25.587

你无法整合事实，但你可以将它们变成一个简单的规则，如下所示：

```
genre(X) :- member(X, [blues, hiphop, rock]). 
```

`member/2`是SWI中用于测试列表成员资格的[内置列表谓词。](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.12%27,swi%28%27/doc/Manual/lists.html%27%29%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:30:30.237

这使您可以在列表的所有元素上应用谓词，并且只有在所有应用程序都成功时才会成功。

```
test_list( _, [] ).
test_list( F, [H|T] ) :- P =.. [F,H], P, test_list( F, T ). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:46:54.847

你可以使用这个语法

```
genre(X) :- X=blues ; X=hiphop ; X=rock. 
```

但我个人建议会员/ 2方式...

# calendar - 是否有可能对列中的列中的 dojox.calendar 事件进行排序？

> ID：13041245
> 
> 赞同：1
> 
> 时间：2012-10-24T00:19:09.743
> 
> 标签：calendar, dojo

我想在一天的 ColumnView 中显示大约 10 到 15 个日历。要查看更多活动的可用空间，我希望每个日历在列视图中都有自己的列。我将重叠设置为 0，但一个日历的所有事件都需要在同一列中。

查看[演示](http://demos.dojotoolkit.org/demos/calendar/demo.html)，我希望列左侧的所有红色事件和右侧的所有蓝色事件。

是否有可能做到这一点，或者为特定日历创建多个日历小部件是否更容易？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:51:44.413

在您的用例中，绝对的解决方案是每天管理多个列，这尚未由 dojox.calendar 实现。

随意在 github 页面上注册功能愿望：[https](https://github.com/damiengarbarino/dojo-calendar) ://github.com/damiengarbarino/dojo-calendar在问题部分。

话虽如此，您可以更改事件的布局优先级，请参见： http: [//livedocs.dojotoolkit.org/dojox/calendar#layout-priority](http://livedocs.dojotoolkit.org/dojox/calendar#layout-priority)

将考虑到数据项日历的自定义优先级函数设置为列视图 layoutPriorityFunction 属性。这是一个排序函数，因此需要 2 个项目进行比较并返回 0（此处无用）、-1 或 1。

希望这可以帮助，

达米安

# css - 当我设置填充时，如何阻止 IE 7 忽略我的宽度值并将元素视为块？

> ID：13041247
> 
> 赞同：4
> 
> 时间：2012-10-24T00:19:40.320
> 
> 标签：css, internet-explorer-7

[隔离测试用例](http://jsfiddle.net/LRpHq/18)（在 IE 7 或 IE 8/9 中查看 IE 7 模式）

在 IE 7 中查看此页面会导致我的宽度值被忽略。如果您删除 padding 值，宽度会被正确应用，但是当您添加 padding 时，它会导致整个页面增长，并且它会将 padding 几乎视为边距。页面宽度越大，元素右侧的空白区域越大。我一直无法找到这是哪个错误，更重要的是，如何修复它。有没有人看到这个，有没有人知道解决方案？

到目前为止我尝试过的事情：

*   `zoom`使固定
*   `display: inline-block`（推荐用于双垂直填充问题）
*   不是`line-height`（这是宽度问题...）

问题截图：

这个 div 应该跨越页面的整个宽度，仅此而已，但您会注意到这里的滚动条： ![IE 7 问题预滚动](../Images/f5f005df33d0fccf933dfd38ea6d04cf.png) 以及向右滚动的结果： ![IE 7 问题后滚动](../Images/a076ad6921e38d3a9732018683e9c6c5.png) 这不应该存在。

检查浏览器工具中的元素显示宽度错误地是页面的全宽，而不是全宽减去填充。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:13:29.760

*免责声明：我将忽略功能要求和您对其他答案的评论，而只专注于具体问题。*

* * *

此 IE7 特定问题是由在相对定位的元素上使用偏移量（例如 、 或`top`）`right`引起的。如果你偏移一个相对定位的元素，那么它基本上仍然会保留其原始位置的整个空间。请注意，偏移绝对定位元素时不会发生这种情况。`bottom``left`

在`left`应用偏移之前，相对定位的元素是由于它的宽度和右边的填充完全超出了视口，因此将生成一个水平的 scollbar。在`left`相对定位的元素上应用偏移后，您基本上会在偏移的另一侧留下与偏移大小相同的空间，仍在视口之外。

在重绘期间有点理智的网络浏览器会发现在视口之外*没有任何*可见的东西，因此再次隐藏滚动条。然而，IE7 不够智能，并且保留了滚动条。

毕竟，使用`left`偏移在技术上是错误的解决方案。您首先应该使用`margin-left`而不是`left`. 与偏移不同的是，margin 不会在原始位置上留下空白空间，而是真正将整个元素推到所需位置。

所以，这里是你的脚本是如何被修复的：

```
$('#el').css({
    'width': document.body.scrollWidth - 200,
    'padding-right': 200,
    'margin-left': (-1 * (document.body.scrollWidth - 322) / 2) - 1
}); 
```

* * *

顺便说一句，我想知道这`float: left;`在你显然想要模拟 100% 宽度的构造中有何意义。它可能用于具体示例中不可见的其他目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:18:29.413

您可以在不使用 javascript 计算宽度且没有填充的情况下解决此问题，而是使用`position: absolute`. 这是一个更新的小提琴。它适用于任何浏览器

```
#el {
    background-color: #FFFF00;
    min-height: 45px;
    width: 100%;
    position: absolute;
    left:0;
    right: 0;
    top: 0;
} 
```

[http://jsfiddle.net/LRpHq/7/](http://jsfiddle.net/LRpHq/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T17:10:59.527

我在skeleton.css 实现中遇到了这个问题。具体来说，我`#header`的宽度为`body`，宽度为`html`。其余内容的设置宽度为 978px。所以当窗口小于 978 时，标题的背景只会渲染到视口的宽度。即 - 如果您以 500 宽开始渲染，那就更宽了`#header`。拖动更宽的视口没有问题，但右滚动会将标题剪切到初始视口的大小。

我的修复：`html,body { min-width:978px } /* your width may vary */`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T17:36:43.373

修复了原始帖子，因为它偏离了数英里。

**编辑：**

在沙盒 IE7 中测试，它可以工作。（我能说什么，我不遗余力地得到完美的东西，这里也是新人，所以赏金真的很有帮助）还要注意它在 IE7、IE8 和 IE9、FF3.6 中原生工作, Opera 10 并且应该可以在 Safari 中正常运行，Chrome 没有被提及，因为它是我的默认浏览器并且它可以运行，毫无疑问。

这是JS：

```
function resize () {
$('#el').trigger('resize').width('100%');
}
resize(); 
```

和CSS：

```
#container {
    width: 320px;
    border: 1px solid #000000;
    min-height: 500px;
    margin: 0px auto;
}
#el {
    background-color: #FFFF00;
    min-height: 45px;
    width: 100%;
    position: absolute;
    left: 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T23:26:39.377

由于您似乎可以使用 Javascript，因此请调整您的`resize()`功能：

```
function resize () {
    $('#el').css({'width':$(window).width(),'position':'absolute','left':'0px'});
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T10:50:22.680

[我在这里](http://blog.throbs.net/2006/11/17/IE7+And+MinWidth+.aspx)找到了类似问题的解决方案。看看它是否也能帮助你。

# sql - 从表中跳出 Windows/SQL StreamInsight/？

> ID：13041248
> 
> 赞同：0
> 
> 时间：2012-10-24T00:19:45.527
> 
> 标签：sql, streaminsight

也许这可以在没有 StreamInsight 的情况下完成，但我很好奇。

我有一个应用程序正在使用“消息”填充表（在表中插入一行）。

我想创建一个监视应用程序来监视此表的消息“到达”速率，以及它们“处理”的速度（标志更新）。

由于这是一个供应商应用程序，我不想插入触发器或任何东西。但我可以查询数据库，并且该表有一个使用标识列的 PK。

如何进行跳窗查询？我很想显示过去 30 分钟的折线图，显示消息进入的速度，以及消息被处理的速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:16:35.760

根据此消息表中捕获的信息，我认为您可以通过运行 SQL 查询来更快地完成此操作。

如果您仍想使用 StreamInsight 执行此操作，这里有一些代码可以帮助您入门。

```
var app = Application;
var interval = TimeSpan.FromSeconds(1);
var windowSize = TimeSpan.FromSeconds(10);
var hopSize = TimeSpan.FromSeconds(1);

/* Replace the Observable.Interval with your logic to poll the database and
   convert the messages to instances of TPayload. It just needs to be a class
   that implements the IObservable<TPayload> interface. */
var observable = app.DefineObservable(()=> Observable.Interval(interval));

// Convert the observable to a point streamable.
var streamable = observable.ToPointStreamable(
            e=> PointEvent.CreateInsert(DateTimeOffset.Now, e),
            AdvanceTimeSettings.IncreasingStartTime);

/* Using the streamable from the step before, write your actual LINQ queries
   to do the analytics you want. */
var query = from win in streamable.HoppingWindow(windowSize, hopSize)
        select new Payload{
            Timestamp = DateTime.UtcNow,
            Value = win.Count()
        };

/* Create a sink to output your events (WCF, etc). It just needs to be a
   class that implements the IObserver<TPayload> interface. The
   implementation is highly dependent on your needs. */
var observer = app.DefineObserver(()=> Observer.Create<Payload>(e => e.Dump()));

query.Bind(observer).Run(); 
```

# javascript - 正则表达式以特定开头捕获整个单词

> ID：13041250
> 
> 赞同：0
> 
> 时间：2012-10-24T00:20:04.127
> 
> 标签：javascript, jquery, regex, syntax

我需要捕获一个作为附加整数传递给 CSS 类的数字。我的正则表达式很弱，我想做的很简单。我认为“负词边界”`\B`是我想要的标志，但我想我错了

```
string = "foo bar-15";
var theInteger = string.replace('/bar\-\B', ''); // expected result = 15 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:26:13.680

使用[此处](https://stackoverflow.com/questions/3569104/positive-look-behind-in-javascript-regular-expression)概述的捕获组：

```
var str= "foo bar-15";
var regex = /bar-(\d+)/;
var theInteger = str.match(regex) ? str.match(regex)[1] : null; 
```

然后你可以在`if (theInteger)`任何你需要使用它的地方做一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:21:45.763

试试这个：

```
var theInteger = string.match(/\d+/g).join('') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T00:25:24.187

```
string = "foo bar-15";
var theInteger = /bar-(\d+)/.exec(string)[1]
theInteger // = 15 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T02:14:42.687

如果您只想要末尾的数字（一种反向 parseInt），为什么不：

```
var num = 'foo bar-15'.replace(/.*\D+(\d+)$/,'$1'); 
```

或者

```
var m = 'foo bar-15'.match(/\d+$/);
var num = m? m[0] : ''; 
```

# jquery - jquery，将部分文本输入解析为格式化的html输出？

> ID：13041255
> 
> 赞同：3
> 
> 时间：2012-10-24T00:21:17.323
> 
> 标签：jquery, regex, parsing, input, textarea

我正在查看非常少量的代码：

```
var val = $("#id_input").val();
$("#output").text(val); 
```

它本质上将输入输入到一个字段中`<textarea id="id_input"></textarea>`，并按原样输出。

我正在尝试做的是将以 a 开头的输入换行符转换为我网站上的`-`输出`<ul><li></li></ul>`....

我一直在采用的方法是按行拆分输入，然后将它们连接起来，在将每一行通过这个之后：

```
function startsWith(string, pattern) {
  return string.slice(0, pattern.length) == pattern;
}

show(startsWith("-")); 
```

我觉得有一个更标准的方法吗？例如，我在 StackOverflow 上阅读了其他使用`find`函数产生类似结果的帖子。我怀疑这些，因为没有实际的正则表达式。这似乎好得令人难以置信。

![在此处输入图像描述](../Images/c38b880ccc696bf08327e3836994fea7.png)

在图像中，您可以看到绿色文本是`comments`，白色文本是`input`，黑色文本是`output`。

我了解现有技术具有此功能，但它们具有许多其他功能。我正在尝试创建一个隔离此功能的输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T01:09:14.057

```
uls = val.replace(/(^-.*$(?:\n^-.*$)*)/mg, "<ul>\n$1\n</ul>")
lis = uls.replace(/^-(.*)$/mg, '<li>$1</li>')
$("#output").html(val); 
```

这是[你](http://jsfiddle.net/Ns9eL/1/)要找的吗？它并不完美，但它具有基础知识。

它的工作原理如下：

```
Surround the would be lists with <ul></ul>
    This works by finding lines that start with a '-' |^-.*$|,
    then matching contiguous, similar lines |(?:\n^-.*$)| 0 or more times |*|
    it uses the multiline (m) and global (g) flags too:
      match ^ and $ at the begining and end of lines (m)
      and get all the ones in the string (g)
    surround them (<ul>\n$1\n</ul>)
Surround the list items with <li></li>
     match lines with a hyphen at the beginning |^-(.*)$|
     surround them (<li>$1</li>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:05:37.317

这是您可以自己调整的开始：[jsFiddle](http://jsfiddle.net/acheong87/ykVEw/)。

我做了两次替换，首先添加`<ul></ul>`，然后添加`<li></li>`s。（如果 JavaScript 支持后向断言，一步完成会更容易；没有它们，它仍然是可能的，但会很麻烦。）

```
 val = val.replace(/((?:(?:^|[\n\r]+)[\t ]*-[\t ]*[^\n\r]*)+)/g, "\n<ul>\n$1\n</ul>");
    val = val.replace(/[\n\r]+[\t ]*-[\t ]*([^\n\r]*)/g, "\n  <li>$1</li>"); 
```

我在构建它时做了一些假设，您可能必须撤消这些假设：

1.  将一系列换行符视为一个换行符。
2.  删除前后的空格和制表符`-`。

以下输入，

```
hello, world.
- two
- things
hi, again.
- three
 -more 
-things 
```

创建以下输出：

```
hello, world.
<ul>
  <li>two</li>
  <li>things</li>
</ul>
hi, again.
<ul>
  <li>three</li>
  <li>more </li>
  <li>things</li>
</ul> 
```

**解释**

第一个正则表达式只是标识一*组*列表项。

```
(                   Captured group ($1).

    (?:             Group (one list item). -------------------+
                                                              |
        (?:         Group (for alternation). ---------+       |
                                                      |       |
            ^       Start-of-string                   |       |
                                                      |       |
            |           OR                      <-----+       |
                                                              |
            [\n\r]+     one or more newlines.                 |
                                                              |
        )                                                     |
                                                              |
        [\t ]*      (Ignore tabs and spaces.)                 |
        -           (Dash.)                                   |
        [\t ]*      (Ignore tabs and spaces.)                 |
                                                              |
        [^\n\r]*    List item text (everything but newlines). |
                                                              |
    )                                                         |
    +               One or more list items. <-----------------+

) 
```

捕获的这*组*列表项`$1`包含在`<ul></ul>`标签中：

```
"\n<ul>\n$1\n</ul>" 
```

第二个正则表达式将每个列表项包装在`<li></li>`标签中，并且与第一个非常相似，因此显示更改的内容可能更有用：

```
first regex  : /((?:(?:^|[\n\r]+)[\t ]*-[\t ]* [^\n\r]* )+)/g
differences  :  xxxxxxxxx       x             (        )xxx
second regex : /         [\n\r]+ [\t ]*-[\t ]*([^\n\r]*)   /g 
```

言下之意，

1.  我们不再关心列表项的*集合*，只关心*每个*列表项，因此我们可以删除用于量化的不可捕获组`(?:...)+`，,

2.  在第一次正则表达式替换之后（在 a 前面`\n<ul>\n`），列表项应该不可能从字符串的开头开始，所以我们可以删除交替`(?:^|...)`，,

3.  但是我们现在对捕获列表项文本感兴趣，因此我们添加了一个捕获组`(...)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T02:34:11.663

您是否有理由坚持使用正则表达式？尽管它们很好，因为它们高效且简洁，但如果我稍后再返回它们，我经常会发现它们很难阅读。

我可能会以与您相同的方式解决问题，只是我会将每个列表项包装在自己的列表中以处理子列表：

```
<ul><li>item 1</li></ul>
<ul><li>item 2</li></ul> 
```

而不是：

```
<ul>
<li>item 1</li>
<li>item 2</li>
</ul> 
```

它优雅地处理列表和非列表项的混合。**我不会**使用这种方法的唯一原因是如果我以后必须一起操作列表中的所有内容（例如 - 设置第一个列表的样式，而不是第二个列表）。

[JsFiddle 中](http://jsfiddle.net/D5uEJ/5/)的示例（感谢 FrankieTheKneeMan 为 ul 提供的 css）

# php - 如何在 yii 框架中显示数据库中新增的列？

> ID：13041262
> 
> 赞同：2
> 
> 时间：2012-10-24T00:22:02.050
> 
> 标签：php, yii

我在我的 db 表中添加了两个新列，然后我在表模型本身中定义了这些新列，然后，当我调用

```
$model->getAttributes() 
```

两个新列没有出现在的数组输出中`$model->getAttributes() method call`

我的配置中没有设置模式缓存，知道如何解决这个问题吗？如果我在炫耀这两个新列时遇到问题，我将如何从前端获取新添加列的输入表单的值添加列？

例如

新专栏 INHOUSE OUTHOUSE

//看法

```
 <?php echo $form->checkBox($model,'INHOUSE',array("id"=>"inhouse","value"=>1, "uncheckValue"=>0));?>
 <?php echo $form->checkBox($model,'OUTHOUSE',array("id"=>"outhouse","value"=>1, "uncheckValue"=>0));?> 
```

//控制器更新动作

我试图保存 INHOUSE 的值，而 OUTHOUSE 在我保存时没有保存

```
$model->attributes = $_POST['users'];
$model->save(); 
```

也不

```
$model->INHOUSE = $_POST['users']['INHOUSE'];
$model->OUTHOUSE = $_POST['users']['OUTHOUSE'];
$model->save; 
```

任何想法如何解决所有这些问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:52:57.463

请转到：受保护/运行时文件夹并删除所有文件。然后再试一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T14:30:15.193

1-您可以在这些列上直接将数据插入数据库吗？2-您可以在管理视图或任何其他视图上查看这些列吗？3-您可以使用 getColumn 方法检索这些值吗？

如果没有，试试这个：

确保在模型和视图中指定了新列

型号名称.php

```
public function attributeLabels()
{
    return array(
        'id' => 'ID', // example
        'new_column' => 'New Column',
        ...
    );
} 
```

您还应该从上到下检查，作为一种好的做法，您还应该在模型的顶部键入它

```
 * @property integer $id //example
 * @property data_type $new_column
... 
```

然后要查看您的新列，您需要将它们添加到必要的视图中。

例子

视图.PHP

```
$this->widget('zii.widgets.CDetailView', array(
    'data'=>$model,
    'attributes'=>array(
         'id',
         'new_column',
          ... 
```

如果您的模型包含所有这些定义，您应该能够从数据库中检索这些值，请重新检查您可能拥有的任何自定义函数。

# java - 如何在 Java 中禁用 ButtonGroup 中的 JRadioButton

> ID：13041264
> 
> 赞同：0
> 
> 时间：2012-10-24T00:22:15.747
> 
> 标签：java, swing, jradiobutton

我在 Java 的 ButtonGroup 中有四个 JRatioButtons。前两个是启用的，另外两个是禁用的。如果选择了一个特定的 JRatioButton，我需要启用两个禁用的 JRatioButton。

我试图用这个来查找按钮的状态并启用禁用的按钮，显然我找到了那些处于禁用状态但没有改变该状态的按钮。

```
private void activateButtons() {
    Enumeration<AbstractButton> elements = myButtonGroup.getElements();
    while (elements.hasMoreElements()) {
          AbstractButton button = (AbstractButton)elements.nextElement();
          if (button.isEnabled()) {
            System.out.println("This button is disabled! The text of the button is: '" + button.getText() + "'");
            button.setEnabled(true);
          }
    }
} 
```

我得到了禁用按钮的文本，但我无法禁用它们。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:50:32.340

我不知道您在查找第二组单选按钮的引用时是否有任何问题，或者您只是无法禁用单选按钮。

对于第一个问题，很简单，您只需保留第二组中单选按钮的引用即可。

对于第二个问题，您需要将 JRadioButton 子类化，因为我发现您不能简单地为单选按钮对象调用禁用。

子类的代码示例是这样的。

```
this.editable = editable;
if (editable) {
    this.setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
    super.enableEvents(Event.MOUSE_DOWN | Event.MOUSE_UP);
} else {
    this.setCursor(CursorFactory.createUnavailableCursor());
    super.disableEvents(Event.MOUSE_DOWN | Event.MOUSE_UP);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T22:39:40.560

试试这个，它有效。

```
AbstractButton button = ...

button.getModel().setEnabled(true/false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T17:11:46.487

是的，您**setEnabled(true)**为启用的**RadioButton。**
所以在这里编辑，希望可以帮助某人。

```
private void activateButtons() 
{
    Enumeration<AbstractButton> elements = myButtonGroup.getElements();
    while (elements.hasMoreElements()) 
    {
          AbstractButton button = (AbstractButton)elements.nextElement();
          if (button.isEnabled())     // if enabled (true) 
          {
            System.out.println("This button is disabled! The text of the button is: '" + button.getText() + "'");
            button.setEnabled(false); // set it disabled (false)
          }
    }
} 
```

谢谢@Hannibal，你的帖子拯救了我的一天。

# android - ImageView 渲染图像时是否有监听器？

> ID：13041267
> 
> 赞同：0
> 
> 时间：2012-10-24T00:22:44.233
> 
> 标签：android, android-imageview, android-view

我想测量我的图像加载的性能，所以我想确切地知道图像位图何时最终呈现在屏幕上。有听众吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:54:41.133

您应该考虑为此使用分析器：http: [//developer.android.com/tools/debugging/debugging-tracing.html](http://developer.android.com/tools/debugging/debugging-tracing.html)

# php - 如何从php返回的json解析数组

> ID：13041268
> 
> 赞同：0
> 
> 时间：2012-10-24T00:22:45.620
> 
> 标签：php, arrays, json

我有一个调用 main.php 的 index.html 文件，它返回一个 json 对象就好了。

main.php 返回这个

```
{
    "products": [
        {
            "id": "1",
            "txt": "Bar",
            "image": "",
            "page": ""
        },
        {
            "id": "2",
            "txt": "Car",
            "image": "",
            "page": ""
        },
        {
            "id": "3",
            "txt": "Far",
            "image": "",
            "page": ""
        }
    ],
    "success": 1
} 
```

在 Java 中有 json.getJSONArray(TAG_PRODUCTS);

但是....我在这里使用 HTML 和 javascript...所以在我的 html 文件中，我有以下内容如何从我的 json 返回数据中提取产品数组？

```
$.ajax({
    type: 'POST',
    dataType: 'json',
    url: 'http://localhost:8888/HelloWorld/main.php',
    contentType: "application/json; charset=utf-8",
    success: function (data) { 
        var names = data
        $('sa_content').append('<select name="input_4">');
        $.each(data, function(index, element) {

            alert( "index: " + index + ", element.cf_id: " + element );

        });
        $('sa_content').append('</select>');
    },
    error: function(){
        $('#sa_content').append('<li>There was an error loading the feed');
    }
}); 
```

当我运行 index.html 页面时，我收到以下警报

```
index = products, element =  [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object] 
```

和

```
index = success, element =  1 
```

那么如何将 products 数组从 json 中拉出并遍历它以获取 id、txt、image、page 的值？

在此先感谢您的时间。院长-O

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:28:57.093

尝试将其用作成功功能：

```
function (data) {
    var products = data.products;

    for (var i = 0; i < products.length; i++) {
        var product = products[i];
        alert(product.id + " " + product.txt + " " + product.image + " " + product.page);
    }
} 
```

它应该遍历所有产品并提醒您数据。然后，您可以修改代码以满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:28:15.353

您可以使用`JSON.parse`, 或者仅`eval('(' + json + ')');`在您确定代码是安全的情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T00:29:08.537

你得到了一个产品数组，所以你想遍历那个数组：

```
success: function (data) { 
    var names = data

    for(i = 0; i < data.products.length; i++) {
        //Do what you want.
        var id = data.products[i].id;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T00:31:49.193

如果您的页面仅返回 json，那么从您的 jquery ajax 返回的 XHR 对象应该包含一个从该数据构造的 javascript 对象。如果不是这种情况，则您的页面有问题，例如返回的不仅仅是 json 编码的字符串。

# android - 连接 GeoPoints Android

> ID：13041270
> 
> 赞同：0
> 
> 时间：2012-10-24T00:23:10.660
> 
> 标签：android, json, google-maps

我有一个 Android 应用程序，我正在尝试使用路线填充 Google 地图，这条路线以这种方式存储在 JSON 数组中：

```
JSONArray.getString("points") = ["-33.45591917507404, -70.59198361376951","-33.453484420618416, -70.61635952929686"] 
```

所以在这种情况下我有

`Point A=(-33.49088437162095, -70.64043194102163)`和

```
Point B=(-33.49423964397045, -70.63992768572683) 
```

我的路线或路径是 A-----B

我是 Android 新手，我想知道如何让它工作。另外，在这种情况下，我的路线是 A-----B，但也可以是 A----B----C----D。我可以在路径上有任意数量的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:57:56.020

您可以尝试的一件事是 Google Maps Polyline 对象：[https](https://developers.google.com/maps/documentation/javascript/reference#Polyline) ://developers.google.com/maps/documentation/javascript/reference#Polyline 您指定 setPath() 点的有序列表（LatLng 数组或一个 MVCArray 或 LatLng），你想在地图上连接在一起，谷歌地图会根据你的要求为你制作一条折线。

```
// path = Array of LatLng or MVCArray of LatLng
routeLine = new Polyline();
routeLine.setPath(JSONArray); 
```

在您的情况下，将 JSONArray 传递给 setPath 应该可以正常工作。

如果您想获得精美的路线并合并路线，则需要使用 Google Directions API。 [https://developers.google.com/maps/documentation/javascript/directions](https://developers.google.com/maps/documentation/javascript/directions)

```
// All waypoints must be stopovers for the Directions service to optimize their route.
// start & end are of type String or LatLng, waypts is an array of String or LatLng
request = {
    origin: start,
    destination: end,
    waypoints: waypts,
    optimizeWaypoints: [type Boolean],
    travelMode: [type TravelMode]
};
// go on and actually perform the request
directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        // if successful, this will run
    }
}); 
```

一旦你完成了你的对象的构建，你应该可以通过运行 setMap(map:Map) 来显示它，比如

```
routeLine.setMap(map) 
```

# ruby-on-rails - Rails + Heroku：很抱歉，出了点问题

> ID：13041271
> 
> 赞同：1
> 
> 时间：2012-10-24T00:23:12.983
> 
> 标签：ruby-on-rails

嗨，这是我第一次尝试将项目推送到 Heroku，但出现错误：`We're sorry, but something went wrong.`我不确定如何阅读 heroku 日志。是弃用警告吗？我的供应商/插件中没有任何内容...有人可以帮我找出问题所在吗？如果您需要任何其他文件，请告诉我。

```
2012-10-23T20:29:56+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (10.8ms)
2012-10-23T20:29:56+00:00 app[web.1]: WARN: tilt autoloading 'sass' in a non thread-safe way; explicit require 'sass' suggested.
2012-10-23T20:29:56+00:00 app[web.1]:     2: <html>
2012-10-23T20:29:56+00:00 app[web.1]:     3: <head>
2012-10-23T20:29:56+00:00 app[web.1]:     4:   <title><%= complete_title(yield(:title)) %></title>
2012-10-23T20:29:56+00:00 app[web.1]: ActionView::Template::Error (/app/app/assets/stylesheets/application.css has already been required):
2012-10-23T20:29:56+00:00 app[web.1]:     8: </head>
2012-10-23T20:29:56+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2012-10-23T20:29:56+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
2012-10-23T20:29:56+00:00 app[web.1]:     7:   <%= csrf_meta_tags %>
2012-10-23T20:29:56+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___2170089293047453939_42303620'
2012-10-23T20:29:56+00:00 app[web.1]: 
2012-10-23T20:29:56+00:00 app[web.1]: 
2012-10-23T20:29:56+00:00 app[web.1]: 
2012-10-23T20:29:56+00:00 app[web.1]: Completed 500 Internal Server Error in 664ms
2012-10-23T20:29:56+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=806ms status=500 bytes=643
2012-10-23T20:29:56+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=11ms status=200 bytes=0
2012-10-23T20:30:32+00:00 app[web.1]: 
2012-10-23T20:30:32+00:00 app[web.1]: Started GET "/" for 66.108.172.226 at 2012-10-23 20:30:32 +0000
2012-10-23T20:30:32+00:00 app[web.1]: 
2012-10-23T20:30:32+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-10-23T20:30:32+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (0.4ms)
2012-10-23T20:30:32+00:00 app[web.1]: ActionView::Template::Error (/app/app/assets/stylesheets/application.css has already been required):
2012-10-23T20:30:32+00:00 app[web.1]:     2: <html>
2012-10-23T20:30:32+00:00 app[web.1]:     3: <head>
2012-10-23T20:30:32+00:00 app[web.1]:     4:   <title><%= complete_title(yield(:title)) %></title>
2012-10-23T20:30:32+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2012-10-23T20:30:32+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
2012-10-23T20:30:32+00:00 app[web.1]: Completed 500 Internal Server Error in 26ms
2012-10-23T20:30:32+00:00 app[web.1]: 
2012-10-23T20:30:32+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___2170089293047453939_42303620'
2012-10-23T20:30:32+00:00 app[web.1]: 
2012-10-23T20:30:32+00:00 app[web.1]: 
2012-10-23T20:30:32+00:00 app[web.1]:     7:   <%= csrf_meta_tags %>
2012-10-23T20:30:32+00:00 app[web.1]:     8: </head>
2012-10-23T20:30:32+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=47ms status=500 bytes=643
2012-10-23T21:35:53+00:00 heroku[web.1]: Idling
2012-10-23T21:35:56+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-10-23T21:35:57+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-10-23T21:35:57+00:00 app[web.1]: [2012-10-23 21:35:57] ERROR SignalException: SIGTERM
2012-10-23T21:36:06+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-10-23T21:36:06+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-10-23T21:36:08+00:00 heroku[web.1]: Process exited with status 137
2012-10-23T21:36:12+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 45563`
2012-10-23T21:36:17+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-23T21:36:17+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release note
s for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-23T21:36:17+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-23T21:36:21+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-10-23T21:36:21+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-10-23T21:36:21+00:00 app[web.1]: => Booting WEBrick
2012-10-23T21:36:21+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:45563
2012-10-23T21:36:21+00:00 app[web.1]: => Call with -d to detach
2012-10-23T21:36:22+00:00 app[web.1]: [2012-10-23 21:36:22] INFO  WEBrick 1.3.1
2012-10-23T21:36:22+00:00 app[web.1]: [2012-10-23 21:36:22] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-10-23T21:36:22+00:00 app[web.1]: [2012-10-23 21:36:22] INFO  WEBrick::HTTPServer#start: pid=2 port=45563
2012-10-23T21:36:23+00:00 heroku[web.1]: State changed from starting to up
2012-10-23T22:39:55+00:00 heroku[web.1]: Idling
2012-10-23T2
2:39:59+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-10-23T22:39:59+00:00 app[web.1]: [2012-10-23 22:39:59] ERROR SignalException: SIGTERM
2012-10-23T22:39:59+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-10-23T22:40:08+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-10-23T22:40:08+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-10-23T22:40:11+00:00 heroku[web.1]: Process exited with status 137
2012-10-23T22:40:11+00:00 heroku[web.1]: State changed from up to down
2012-10-24T00:05:40+00:00 heroku[web.1]: Unidling
2012-10-24T00:05:40+00:00 heroku[web.1]: State changed from down to starting
2012-10-24T00:05:42+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 26314`
2012-10-24T00:05:46+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-24T00:05:46+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-24T00:05:46+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-10-24T00:05:50+00:00 app[web.1]: => Booting WEBrick
2012-10-24T00:05:50+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:26314
2012-10-24T00:05:50+00:00 app[web.1]: => Call with -d to detach
2012-10-24T00:05:50+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-10-24T00:05:50+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-10-24T00:05:50+00:00 app[web.1]: [2012-10-24 00:05:50] INFO  WEBrick 1.3.1
2012-10-24T00:05:50+00:00 app[web.1]: [2012-10-24 00:05:50] INFO  WEBrick::HTTPServer#start: pid=2 port=26314
2012-10-24T00:05:50+00:00 app[web.1]: [2012-10-24 00:05:50] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-10-24T00:05:51+00:00 heroku[web.1]: State changed from starting to up
2012-10-24T00:05:52+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=29ms status=301 bytes=0
2012-10-24T00:05:52+00:00 app[web.1]: 
2012-10-24T00:05:52+00:00 app[web.1]: 
2012-10-24T00:05:52+00:00 app[web.1]: Started GET "/" for 208.185.23.206 at 2012-10-24 00:05:52 +0000
2012-10-24T00:05:52+00:00 app[web.1]: Processing by HomeController#index as HTML
2012-10-24T00:05:53+00:00 app[web.1]: WARN: tilt autoloading 'sass' in a non thread-safe way; explicit require 'sass' suggested.
2012-10-24T00:05:53+00:00 app[web.1]:   Rendered home/index.html.erb within layouts/application (16.5ms)
2012-10-24T00:05:53+00:00 app[web.1]: Completed 500 Internal Server Error in 725ms
2012-10-24T00:05:53+00:00 app[web.1]: 
2012-10-24T00:05:53+00:00 app[web.1]: ActionView::Template::Error (/app/app/assets/stylesheets/application.css has already been required):
2012-10-24T00:05:53+00:00 app[web.1]:     2: <html>
2012-10-24T00:05:53+00:00 app[web.1]:     3: <head>
2012-10-24T00:05:53+00:00 app[web.1]:     4:   <title><%= complete_title(yield(:title)) %></title>
2012-10-24T00:05:53+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2012-10-24T00:05:53+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
2012-10-24T00:05:5
3+00:00 app[web.1]:     7:   <%= csrf_meta_tags %>
2012-10-24T00:05:53+00:00 app[web.1]:     8: </head>
2012-10-24T00:05:53+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb___2799874165581384053_34182960'
2012-10-24T00:05:53+00:00 app[web.1]: 
2012-10-24T00:05:53+00:00 app[web.1]: 
2012-10-24T00:05:53+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=1169ms status=500 bytes=643
2012-10-24T00:05:53+00:00 heroku[router]: GET pacific-ravine-3563.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=10ms status=200 bytes=0 
```

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem "bcrypt-ruby"
gem 'paperclip'
gem 'jquery-rails'
gem 'fancybox-rails'
gem 'will_paginate', '~> 3.0'
gem 's3_direct_upload'
gem 'aws-s3'
gem 'aws-sdk'
gem 'mail'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
  gem 'sqlite3'
  gem 'rspec-rails'
  gem 'debugger'
end

group :production do
  gem 'pg'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-fileupload-rails'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:53:10.037

首先，几个指针。该消息`We're sorry, but something went wrong`是 Heroku 在您的应用程序中出现任何错误时向最终用户显示的内容，因为您处于生产模式。这与在本地计算机上的开发模式下发生的情况不同，理论上您不想将调试堆栈跟踪暴露给任何出现的应用程序用户。

弃用警告是一条红鲱鱼；这是关于 Heroku 注入到每个 Rails 应用程序中的一些 gem，以与他们的日志管理内容集成。

错误日志中真正相关的行是这一行：

```
2012-10-23T20:29:56+00:00 app[web.1]: ActionView::Template::Error (/app/app/assets/stylesheets/application.css has already been required): 
```

这是样式表处理方式中的某个错误，可能在资产管道功能中。这就是@evanc3 询问您有多少样式表的原因。而且，我承认，我不知道如何调试这个问题——所以这只是部分答案。希望我已经让你走上了正确的道路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:12:15.520

谷歌与`WARN: tilt autoloading 'sass' in a non thread-safe way; explicit require 'sass' suggested.`

我找到了这个答案：[https](https://stackoverflow.com/a/12859696/1008230)
://stackoverflow.com/a/12859696/1008230 看起来资产需要在本地编译。

这里有一些参考：

> 为了更快的资产预编译，您可以通过在 config/application.rb 中将 config.assets.initialize_on_precompile 设置为 false 来部分加载您的应用程序，尽管在这种情况下模板无法看到应用程序对象或方法。**Heroku 要求这是错误的。**

[http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

> 在预编译资产时，在 Rails 3.1.1 及更高版本中，您可以通过确保以下行位于 config/application.rb 中来防止初始化应用程序并连接到数据库： **config.assets.initialize_on_precompile = false**

[https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar#troubleshooting](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar#troubleshooting)

自己没试过，希望有帮助。

# objective-c - 如何在 iOS 6 中替换 willAutorotateToInterfaceOrientation？

> ID：13041275
> 
> 赞同：1
> 
> 时间：2012-10-24T00:23:37.633
> 
> 标签：objective-c, uiviewcontroller, ios6, uiinterfaceorientation, autorotate

我正在尝试为 iOS 6 更新我的应用程序，主要挑战是处理自动旋转。有与该主题相关的问题和搜索结果，但没有一个可以直接回答我的问题。我理解弃用和`shouldAutorotateToInterfaceOrientation:`替换它- 这个问题与那些没有直接关系。`supportedInterfaceOrientations``shouldAutorotate`

相反，我有兴趣知道如何替换`willAutorotateToInterfaceOrientation:duration:`，这是我的应用程序处理几乎所有旋转动画和布局重组的地方。我的主视图控制器控制一个全屏视图，该视图在启动时添加到主窗口，并处理应用程序的整个内部布局，这有点复杂。此视图控制器中的`willAutorotateToInterfaceOrientation:duration:`方法直接调整某些子视图的大小并调用处理其他子视图的 C++ 对象。由于界面的可变性，其中包括复杂的子视图层次结构，一些不调整大小，一些不在屏幕上等等，我不认为 Apple 的自动调整掩码提供了足够强大的解决方案来处理这种自动旋转.

有什么方法可以像我现在一样采取行动`willAutorotateToInterfaceOrientation:duration:`吗？正如我在网上和通过实验发现的那样，这个方法`didRotateFromInterfaceOrientation:`从来没有在我的 iOS 6 的主视图控制器中调用过。我还发现它`viewWillLayoutSubviews`从来没有被调用过，尽管我怀疑它无论如何都不能完全满足我的需要。

如果您需要任何进一步的信息，请告诉我。我希望有一个相当简单的解决方案来解决这个问题，这不是苹果在开发人员不符合新的、更窄的协议的情况下抛弃他们的例子。

**编辑：**如果这有助于澄清，这是我正在谈论的功能的基本外壳：

在**AppDelegate.mm**中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    [self.window makeKeyAndVisible];
    MainViewController* mainViewController= [[MainViewController alloc] initWithNibName:nibName bundle:[NSBundle mainBundle]];
    [self.window addSubview:mainViewController.view];
    return YES;
} 
```

在**MainViewController.mm**：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    [UIView beginAnimations:NULL context:nil];
    [UIView setAnimationDuration:duration];
    [someViewController someMethod];
    [someView setFrame:someRect];
    [UIView commitAnimations];

    someObject->CustomRotationFunction( toInterfaceOrientation, duration );
} 
```

一般来说，假设这些函数和方法中发生的事情是最坏的，例如`someObject`拥有改变其框架的视图，它拥有拥有改变其框架的视图的其他对象，等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T09:57:37.470

您的主要问题是您只是将 ViewController 的视图添加到窗口中，而不是将其设置为 rootViewController。这就是为什么在 iOS6 中从不调用 willRotateToInterfaceOrientation、didRotateToInterfaceOrientation 等的原因。

在 iOS5 中，shouldAutorotateToInterfaceOrientation 被传递给窗口上的 ViewController 的每个 childViewController，然后可以返回您是否要旋转。在 iOS6 中，rootViewController 决定您的应用程序是否支持某个方向。所以你需要在 iOS6 中设置一个 rootViewController，最好在早期的 iO​​S 版本中这样做。然后将在正确的时间调用您需要的方法，并将其传递给任何 childViewControllers。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    [self.window makeKeyAndVisible];
    MainViewController* mainViewController= [[MainViewController alloc] initWithNibName:nibName bundle:[NSBundle mainBundle]];
    self.window.rootViewController = mainViewController;
    return YES;
} 
```

# elasticsearch - elasticsearch 偏移量和限制面

> ID：13041276
> 
> 赞同：1
> 
> 时间：2012-10-24T00:23:41.207
> 
> 标签：elasticsearch

我正在尝试对构面结果集进行限制和“偏移”（来自 elasticsearch 中的关键字）的搜索，例如：

```
'{
   "query" : {
       "nested" : {
           "_scope" : "my_scope",
           "path" : "related_award_vendors",
           "score_mode" : "avg",
           "query" : {
               "bool" : {
                   "must" : {
                       "text" : {"related_award_vendors.title" : "inc"}
                   }
               }
           }
       }
   },
   "facets" : {
       "facet1" : {
           "terms_stats" : {
               "key_field" : "related_award_vendors.django_id",
               "value_field" : "related_award_vendors.award_amount",
       "order":"term",
               "size": 5,
                "from":2
           },
           "scope" : "my_scope"        }
   }
}' 
```

在上面，它返回 id 的 1,2,3,4,5，如果我删除“from”，它仍然会在结果集中返回 1,2,3,5。

“大小”工作正常。在这种情况下，它返回结果集中的五个项目。

我的理解是 solr 可以做到这一点。这可以在elasticsearch中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:08:38.153

术语统计方面不支持该`from`参数。实现您想要的唯一方法是将大小设置为`size + offset`并忽略`offset`客户端的第一个条目。在您的示例中，这意味着请求 7 个条目并忽略前 2 个条目。

# javascript - 为什么 +!{}[true] 在 javascript 中输出 1

> ID：13041278
> 
> 赞同：0
> 
> 时间：2012-10-24T00:23:53.250
> 
> 标签：javascript

我在看这个视频 [http://www.youtube.com/watch?v=Trr95ij1358](http://www.youtube.com/watch?v=Trr95ij1358)

Baranovskiy 先生强调，javascript 开发人员应该知道它的评估结果是什么：

**+！{}[真]**

所以我试了一下。

它输出 1

谁能给我一个理由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:32:40.593

这被读作

将由 true 的 toString 值标识的 {} 的属性访问器的否定（布尔型转换）值转换为数字

所以，它变成

```
+!{}["true"]
+!undefined
+true
1 
```

# ruby-on-rails - Ruby On Rails：一对多和一对一

> ID：13041279
> 
> 赞同：3
> 
> 时间：2012-10-24T00:24:00.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我有模板和模板版本。一个模板可以有多个 template_version，但在任何给定时间只有一个活动的 template_version。我有以下两个模型：

```
class Template < ActiveRecord:Base
    has_many :template_versions, :class_name => 'TemplateVersion'
    belongs_to :active_version, :class_name => 'TemplateVersion'
end

class TemplateVersion < ActiveRecord:Base
    belongs_to :template
    has_one :template
end 
```

一个模板只有一个活动的 template_version 至关重要，这就是为什么 active_template 的关键在模板模型上。这一切似乎都很好，直到我在 Rails 控制台中测试它：

```
t = Template.new()
tv = TemplateVersion.new()
t.active_version = tv
t.save

version = t.active_version //returns version
version.template_id //returns nil 
```

模板知道它的活动模板版本，但问题是模板版本不知道它属于哪个模板。我猜这是因为在插入数据库时​​，会创建 template_version 以获取与模板关联的 id，然后必须保存它以交回模板 id 以填充模板版本。

有没有办法完成这一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:04:37.387

The problem with your current setup is you've defined two "template" methods for TemplateVersion. If I have a tv object, tv.template could be the has_one or belongs_to template, ActiveRecord doesn't know which. I'm not sure if you can alias those somehow.

A workaround: add an "active" column to your TemplateVersion model and validate there's only one active TemplateVersion

```
class Template < ActiveRecord::Base
    has_many :template_versions, :class_name => 'TemplateVersion'
    has_one :active_version, :class_name => 'TemplateVersion', :conditions => ['active = ?', true]
end

class TemplateVersion < ActiveRecord::Base
    attr_accessible :template_id, :active
    belongs_to :template
    validates :only_one_active

    def only_one_active
      errors.add(:base, "Only one active version per template") if self.active == true and TemplateVersion.where(:active => true, :template_id => self.template_id).count > 0
    end

end 
```

You can then access the active version as t.active_version, but to set the active version you'd need to make that update on the the TemplateVersion.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:45:46.483

对此不确定，但您可以尝试以下方法：

```
t = Template.new()
tv = TemplateVersion.new()
tv.save
t.active_version = tv
t.save 
```

或者可能

```
t = Template.new()
tv = TemplateVersion.create()
t.active_version = tv
t.save 
```

我相信如果你使用`create`你不需要`save`。

# ios - 在 AFImageRequestOperation ImageRequestOperationWithRequest 之外访问 UIImage 的问题：成功块

> ID：13041281
> 
> 赞同：0
> 
> 时间：2012-10-24T00:24:25.307
> 
> 标签：ios, multithreading, uiimageview, afnetworking, afjsonrequestoperation

我正在尝试显示从 AFImageRequestOperation ImageRequestOperationWithRequest 返回的图像：但该图像似乎仅在成功块内可用。我尝试将它保存到类实例变量中，但是当我 NSLog 它时，它显示为空。但是，当我在成功块内 NSLog 相同的实例变量时，在使用检索到的 UIImage 对其进行设置后，它实际上显示了一个十六进制值（如预期的那样）。非常感谢这里的任何帮助。

这是发生问题的代码：

```
imageRequest = [AFImageRequestOperation imageRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]] success:^(UIImage *image) {
    globalImage = image; // trying to have accessible image outside of success handler
    [self setImageThumbImage:image]; trying to set image that class will use 
    NSLog(@"Image is: %@", self.albumThumbImage); // logs an actual value
    imageRequest = nil;
}];

[albumImageRequest start];
NSLog(@"The second albumThumbImage retrieval returns: %@", globalImage); // logs null

return self;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:32:10.737

为什么不直接使用 AFNetworking 提供的 UIImageView 添加的方法呢？

从[git 页面](https://github.com/AFNetworking/AFNetworking)：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 100.0f, 100.0f)];
[imageView setImageWithURL:[NSURL URLWithString:@"http://i.imgur.com/r4uwx.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder-avatar"]]; 
```

我知道这并不能直接回答您的问题，尽管它似乎以更简单的方式实现了您想要做的事情。

# php - Pastebin API 粘贴数据

> ID：13041282
> 
> 赞同：1
> 
> 时间：2012-10-24T00:24:33.683
> 
> 标签：php, pastebin

我一直在尝试获取 pastebin API，而不是告诉我 pastebin 链接，只输出原始数据。PHP代码是这样的：

```
<?php

$api_dev_key        = 'Stackoverflow(fake key)';    
$api_paste_code         = 'API.'; // your paste text
$api_paste_private      = '1'; // 0=public 1=unlisted 2=private
$api_paste_expire_date  = 'N';
$api_paste_format       = 'php';
$api_paste_code     = urlencode($api_paste_code);

$url            = 'http://pastebin.com/api/api_post.php';
$ch             = curl_init($url);

?> 
```

通常这会将 $api_paste_code 上传到 pastebin ，显示为 pastebin.com/St4ck0v3RFL0W ，但我希望它生成原始数据。

原始数据链接是[http://pastebin.com/raw.php?i=](http://pastebin.com/raw.php?i=) ，有人可以帮忙吗？

参考： http: [//pastebin.com/api](http://pastebin.com/api)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:44:39.877

据我所知，响应包含创建内容时生成的 Pastebin URL。像这样的网址：

```
http://pastebin.com/UIFdu235s 
```

所以你只需要摆脱“http://pastebin.com/”的做法：

```
$id = str_replace("http://pastebin.com/", "", $url_received_on_last_step); 
```

然后，将其附加到您提供的原始 url：

```
$url_raw = "http://pastebin.com/raw.php?i=".$id; 
```

你会得到原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:54:42.480

首先，请注意您必须向`POST`pastebin.com API 发送请求，而不是`GET`. 所以不要`urlencode()`在你的输入数据上使用！

要从页面 url 获取原始粘贴 url，您有多种选择。但最简单的可能是：

```
$apiResonse = 'http://pastebin.com/ABC123';
$raw        = str_replace('m/', 'm/raw.php?i=', $apiResponse); 
```

最后，这是一个完整的例子：

```
<?php
$data = 'Hello World!';

$apiKey  = 'xxxxxxx';                         // get it from pastebin.com
$apiHost = 'http://pastebin.com/';

$postData = array(
    'api_dev_key'    => $apiKey,             // your dev key
    'api_option'     => 'paste',             // action to perform
    'api_paste_code' => utf8_decode($data),  // the paste text
);

$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_URL             => "{$apiHost}api/api_post.php",
    CURLOPT_RETURNTRANSFER  => 1,
    CURLOPT_POST            => 1,
    CURLOPT_POSTFIELDS      => http_build_query($postData),
));

$result = curl_exec($ch); // on success, some string like 'http://pastebin.com/ABC123'
curl_close($ch);

if ($result) {
    $pasteId = str_replace($apiHost, '', $result);
    $rawLink = "{$apiHost}raw.php?i={$pasteId}";

    echo "Created new paste.\r\n Paste ID:\t{$pasteId}\r\n Page Link:\t{$result}\r\n Raw Link:\t{$rawLink}\r\n";
} 
```

运行上面的代码，输出：

```
c:\xampp\htdocs>php pastebin.php
Created new paste.
 Paste ID:      Bb8Ehaa7
 Page Link:     http://pastebin.com/Bb8Ehaa7
 Raw Link:      http://pastebin.com/raw.php?i=Bb8Ehaa7 
```

# java - HttpClient - 确认密码，重定向

> ID：13041289
> 
> 赞同：0
> 
> 时间：2012-10-24T00:24:51.750
> 
> 标签：java, android, redirect, passwords, httpclient

第 1 阶段：我使用 HttpClient 和 HttpPost 在 Web 表单中成功确认用户密码。在这种情况下，我从服务器收到的代码是 200OK。阶段 2：现在，假设用户将尝试再次确认他的密码。但他不能这样做，因为初始 URL 将不再存在，所以他将被重定向到登录页面。这里有点困难：在这种情况下，服务器再次响应 200OK，而不是重定向代码。如何区分第一阶段和第二阶段？我试过了

```
serverResponse.getStatusLine().getStatusCode(); 
```

和

```
serverResponse.getLastHeader("Location").getValue(); 
```

没有运气，因为从服务器的角度来看没有真正的重定向发生。我想过获取响应内容并将其解析为 html，但我认为这不是一个好的解决方案。我还考虑过将确认操作存储在布尔 SharedPreference 中，但是当用户拥有多个设备时，就会出现这种情况。另一种可能的解决方案是在用户确认密码后隐藏确认密码片段。您认为区分阶段或防止阶段 2 的好方法是什么？我很感激任何想法。谢谢你。

# java - Java：以一定角度移动对象并使用KeyPress改变角度

> ID：13041297
> 
> 赞同：1
> 
> 时间：2012-10-24T00:26:05.713
> 
> 标签：java, swing, keylistener, key-bindings

好的，所以我想要的是始终移动的矩形，但是当您按下左右箭头时，会通过增加或减少角度来改变方向。使用此代码，squaure 会按正确的方向移动，但是当我按下键时，方向不会改变。

```
import java.awt.*;
import java.awt.Color;
import javax.swing.Timer;
import javax.swing.*;
import java.awt.Graphics;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.KeyListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyAdapter;

public class Fields extends JPanel implements ActionListener, KeyListener{

Timer tm  = new Timer(5, this);
double x = 250, y = 250, vel = 0.2, angle = 90;

public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    this.setBackground(Color.BLACK);
    g.setColor(Color.GREEN);
    g.fillRect((int)x, (int)y, 5, 5);

    tm.start();
}
public void keyTyped(KeyEvent e)
{
    if (e.getKeyCode() == 37) {angle--;}
    if (e.getKeyCode() == 39) {angle++;}
}
public void keyReleased(KeyEvent e)
{
    if (e.getKeyCode() == 37) {angle--;}
    if (e.getKeyCode() == 39) {angle++;}
}
public void keyPressed(KeyEvent e)
{
    if (e.getKeyCode() == 37) {angle--;}
    if (e.getKeyCode() == 39) {angle++;}
}
public void actionPerformed(ActionEvent e)
{

    x += (velX * (float)Math.cos(Math.toRadians(angle - 90)));
    y += (velX * (float)Math.sin(Math.toRadians(angle - 90)));

    repaint();
}
public Fields()
{
    this.addKeyListener(this);
}
public static void main(String[] args)
{
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setSize(500, 500);
    Fields fi = new Fields();
    f.add(fi);
    f.setVisible(true);

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:55:52.403

正如我的评论中开始的那样......

*   不要在 中启动计时器`paintComponent`，此方法会被重复调用，并且可以快速连续调用。
*   使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

.

```
public class TestAnimation01 {

    public static void main(String[] args) {
        new TestAnimation01();
    }

    public TestAnimation01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new Fields());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class Fields extends JPanel implements ActionListener {

        Timer tm = new Timer(125, this);
        double x = 250, y = 250, vel = 0.2, angle = 90;
        private int velX = 4;
        private int velY = 4;

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            this.setBackground(Color.BLACK);
            g.setColor(Color.GREEN);
            g.fillRect((int) x, (int) y, 5, 5);
        }

        public void actionPerformed(ActionEvent e) {

            x += (velX * (float) Math.cos(Math.toRadians(angle - 90)));
            y += (velX * (float) Math.sin(Math.toRadians(angle - 90)));

            repaint();
        }

        public Fields() {

            setFocusable(true);

            InputMap im = getInputMap(WHEN_FOCUSED);
            ActionMap am = getActionMap();

            // left 37
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0), "goLeft");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0), "goRight");

            am.put("goLeft", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    angle--;
                    repaint();
                }
            });
            am.put("goRight", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    angle++;
                    repaint();
                }
            });

            tm.setRepeats(true);
            tm.setCoalesce(true);
            tm.start();

            requestFocusInWindow();

        }
    }
} 
```

还有很多其他的事情你没有涉及，比如边缘条件（当它离开屏幕时会发生什么）和单个 x/y 速度，但我相信你会解决的

# java - 如何在 Java 中覆盖 fillOval 函数？

> ID：13041300
> 
> 赞同：2
> 
> 时间：2012-10-24T00:26:44.887
> 
> 标签：java, swing, netbeans, graphics, paintcomponent

我遇到的问题是我想填充一个椭圆，但我使用浮点数作为我的“x”和“y”值。这是我所拥有的：

```
@Override
public void paintComponent(Graphics g)
{
.
.
.
for(Coordinates cord : tempVertices)
{
    g.fillOval(cord.x,cord.y,DIAMETER,DIAMETER);
}
// DIAMETER = 10

// Coordinate Class is just a variable with an 'x' and 'y' value stored in floats
// Floats range from 0 to 1, so type casting won't work...

// tempVertices is just an ArrayList with Coordinates values 
```

我正在使用 NetBeans IDE 7.2，但我不知道如何覆盖该`fillOval`方法，并且我无法使用 import from : `import org.newdawn.slick.*;`(它不会识别它)。有没有更好的`Graphics`选择或更简单的方法来实现这个简单`fillOval`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T00:46:53.200

您可能正在寻找的`fill()`方法`Graphics2D`，它接受任何`Shape`：

```
g.fill(new Ellipse2D.Float(cord.x, cord.y, DIAMETER, DIAMETER)); 
```

您还需要探索任何受支持`java.awt.RenderingHints`的 .

# asp.net - 用于检索大量二进制图像的 .ashx 处理程序的性能

> ID：13041310
> 
> 赞同：6
> 
> 时间：2012-10-24T00:28:00.703
> 
> 标签：asp.net, database, performance, blob, httphandler

我使用 .ashx 处理程序从数据库中获取图像。我想以这种方式检索大量图像（> 1000）：

```
 <img src='GetImage.ashx?id= <%# Eval("id") %>'/> 
```

（为什么我这样做你可以理解，如果阅读我之前的问题：[bind database image to ItemTemplate in .ascx](https://stackoverflow.com/questions/13002578/bind-database-image-to-itemtemplate-in-ascx/)）。我担心多重数据库查询（第一个查询获取所有id，所有其他查询一个一个获取图像）将采取很多时间，是吗？有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T11:26:27.790

首先，浏览器并没有一起询问图像，而是一次询问几个。

其次，处理程序不使用会话，因此它不会锁定另一个，因此可以为图像调用完成并行处理。

我建议为浏览器添加缓存的额外内容，因此当它加载图像时不再询问它。

一个例子：

```
context.Response.Cache.SetExpires(DateTime.Now.AddMinutes(120));
context.Response.Cache.SetMaxAge(new TimeSpan(0, 120, 0)); 
```

但您可以添加更积极的缓存。

一个类似的问题：[调用aspx页面以随机缓慢返回图像](https://stackoverflow.com/questions/9694117/call-aspx-page-to-return-an-image-randomly-slow)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T11:42:17.390

对于经常要求的静态内容，缓存始终是一个好主意。

此外，如果图像相对较小，您可以使用数据 uri 的[http://css-tricks.com/data-uris/](http://css-tricks.com/data-uris/)

假设您有一个带有 ID INT、名称 VARCHAR(64)、MimeType VARCHAR(64) 和数据 VARBINARY(MAX) 的图像表

```
SELECT Name, 'data:' + MimeType + ';base64,' + cast(N'' as xml).value('xs:base64Binary(xs:hexBinary(sql:column("Data")))', 'VARCHAR(MAX)') AS DataURI

<img src='<%# Eval("DataURI") %>' alt='<%# Eval("Name") %> /> 
```

通过这种方式，您可以拥有 1 个将返回所有内容的数据库查询。

# .net - 如果 JSON 密钥未知，则异常？

> ID：13041315
> 
> 赞同：1
> 
> 时间：2012-10-24T00:28:25.503
> 
> 标签：.net, json

假设我有这个 JSON 字符串

```
{"name": "myname", "id":12345, "passs":"configpass"} 
```

现在通过是一个错字。如果我的序列化代码（我可以使用 json.net 或 system.web 中的内置代码）有一个不在我的类中的键（通过），我希望它抛出异常。这样，愚蠢的错别字不会引起挫败感。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T00:34:23.577

对于[Json.Net](http://james.newtonking.com/projects/json/help/)序列化程序，您可以使用[JsonSerializerSettings](http://james.newtonking.com/projects/json/help/)中的[MissingMemberHandling](http://james.newtonking.com/projects/json/help/)

```
[TestFixture]
public class JsonTests
{
    [TestCase(@"{""name"": ""myname"", ""id"":12345, ""passs"":""configpass""}", ExpectedException = typeof(JsonSerializationException))]
    [TestCase(@"{""name"": ""myname"", ""id"":12345, ""pass"":""configpass""}")]
    public void TestName(string arg1)
    {
        JsonSerializer jsonSerializer = JsonSerializer.Create(
            new JsonSerializerSettings {MissingMemberHandling = MissingMemberHandling.Error});
        Credentials credentials = jsonSerializer.Deserialize<Credentials>(new JsonTextReader(new StringReader(arg1)));
    }
}

public class Credentials
{
    public string Name { get; set; }
    public int Id { get; set; }
    public string Pass { get; set; }
} 
```

# iphone - 间歇性无法在响应式站点中滚动整页

> ID：13041321
> 
> 赞同：1
> 
> 时间：2012-10-24T00:29:20.713
> 
> 标签：iphone, ipad, responsive-design

在 iphone 或 ipad 上加载响应式页面时，可能每五次页面中就有一个会向下滚动大部分然后停止。就好像页面内容正在结束一样。如果我刷新页面或重新定位设备，这将允许我滚动剩下的部分。

我的视口标签是：

```
<meta name="viewport" content="width=device-width,minimum-scale=1.0,initial-scale=1.0"> 
```

我已经在 ios6 上的 ipad2、iphone 4 和 4s 上得到了这个。

有没有人见过这样的事情？

# android - 构建配置和 Android NDK

> ID：13041322
> 
> 赞同：3
> 
> 时间：2012-10-24T00:29:25.103
> 
> 标签：android, eclipse, android-ndk, buildconfiguration

在过去的几天里，我一直在努力让系统启动并运行以构建我们的 Android NDK 应用程序的多种配置。我能够很好地构建库；我遇到的问题通常源于在更改构建配置时使这些库保持最新。

我需要一个大部分完全自动化的系统：用户只需更改构建配置，一切*正常*！

**您如何解决构建配置和库未正确重建的问题？**

我尝试了很多不同的方法来解决这个问题，但它们似乎都以我无法控制的问题告终。

最初，我们只是输出了一个具有相同名称的共享对象文件，而不管构建配置如何（例如 game.so）。**问题是**，更改构建配置不会触发重新构建库；您必须更改源代码或构建脚本。因此，人们从 Debug 更改为 Release，运行应用程序，并且在不知不觉中实际上仍然链接到 Debug 版本。

因此，我们尝试根据构建配置将库输出到唯一的共享对象。例如，调试版本是 gamed.so。发布版本是gamer.so。**问题是**，Java 代码没有构建配置的概念，那么我们如何知道要加载哪个版本的库（由 Java 完成）？

为了解决这个问题，我们通过尝试加载它们的所有可能版本的库进行 try/catch 循环。当我们找到存在的那个时，加载它！**问题是**在将新配置部署到手机时不会删除旧版本的库。因此，如果您已经构建并运行了 Debug 和 Release，那么这两个库现在都在手机上！无论您首先要求哪个，它都会找到并加载。

所以无论如何，这似乎**必须**已经解决了，但我在网上找到的信息很少。没有什么能满足我的需求。

我的问题是：**您如何解决构建配置和库未正确重建的问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:28:51.207

这其实很奇怪。我一直看到`install -r`刷新`/data/data/app.pack.age/lib`目录。您使用哪种设备进行开发？

# iphone - Objective C：类方法声明错误

> ID：13041323
> 
> 赞同：-1
> 
> 时间：2012-10-24T00:29:30.987
> 
> 标签：iphone, objective-c, ios, ipad

## 更新

事实证明，我在该类的一个实例上调用了一个类方法。

我已将该行代码修复为：

```
double result = [CalculatorBrain runProgram:[self.brain program] usingVariableValues:[self variableValues]]; 
```

但是当我运行程序并评估该行时，我收到以下错误：

**+[CalculatorBrain runProgram:usingVariableValues:]: 无法识别的选择器发送到类 0x6908**

## 原来的

为什么我在视图的 enterPressed 内的 XCode 中收到以下错误：*“CalculatorBrain”没有可见的@interface 声明选择器“runProgram:usingVariableValues:”*？

## ** CalculatorViewController.m **

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()

@property (nonatomic, strong) CalculatorBrain *brain;
@property (nonatomic, strong) NSMutableDictionary *variableValues;

@end

@implementation CalculatorViewController

@synthesize brain = _brain;
@synthesize variableValues = _variableValues;

- (CalculatorBrain *)brain {
    if (!_brain) _brain = [[CalculatorBrain alloc] init];
    return _brain;
}

- (NSMutableDictionary *)variableValues {
    if (!_variableValues) {
        _variableValues = [[NSMutableDictionary alloc] init];
    }
    return _variableValues;
}

- (IBAction)enterPressed {

    double *result = [self.brain runProgram:[self.brain program] usingVariableValues:[self variableValues]];

} 
```

## ** CalculatorBrain.h **

```
#import <UIKit/UIKit.h>

@interface CalculatorBrain : NSObject

+ (double)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues;

@property (readonly) id program;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:32:47.223

在 CalculatorBrain.h 中，您声明的是类方法而不是实例方法：

```
+ (double)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues; 
```

使用`-`而不是`+`.

或者，如果您打算将其作为类方法，请这样调用它：

```
 double *result = [CalculatorBrain runProgram:[self.brain program] usingVariableValues:[self variableValues]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:35:20.347

如果您要添加一个类级别的方法，那么您不是在实例上调用该方法，而是在类本身上调用该方法。例如：

```
double *result = [self.brain runProgram:[self.brain program] usingVariableValues:[self variableValues]]; 
```

会成为：

```
double *result = [CalculatorBrain runProgram:[self.brain program] usingVariableValues:[self variableValues]]; 
```

我没有看到上面定义的方法，所以我不能确定这是否是你想要的。

# c++ - 跳过源代码行会导致 Visual Studio 调试器退出？

> ID：13041324
> 
> 赞同：1
> 
> 时间：2012-10-24T00:29:31.737
> 
> 标签：c++, visual-studio-2010, debugging, disassembly

我有一个客户报告我们的产品中使用混合代码的假定资源泄漏。所以我想调试它，看看到底发生了什么。我一直在经历一些奇怪的事情，比如 Visual Studio 崩溃、在单步执行代码期间冻结，以及调试器只是在退出代码错误的随机点处停止。

我将其缩小到导致它的非托管函数，它是一个从另一个线程而不是主线程开始的函数。我一直认为我有导致它的确切代码行，但问题的位置似乎在不断变化。所以我找到了问题的大致位置并开始逐行逐行查看汇编代码。

我什至将断点移动到函数第一次开始的位置，当调试器到达该点时，如果我跳过它，它将退出。如果我将断点 20 行设置到函数中，则执行会到达该点，然后我跳过它并且调试器退出，所以我不相信它真的与我的函数在 { }。

当我使用 F10 执行此操作时，调试器停止并且退出代码为 STATUS_WX86_BREAKPOINT，当我使用 F11 执行此操作时，它以退出代码 STATUS_WX86_SINGLE_STEP 停止。根据步进的类型，错误代码的名称对我来说很有意义，但并不能真正告诉我出了什么问题。当我再次运行它时，我尝试在反汇编中通过断点移动，以为我会看到之前发生的事情，退出只是发生得更早，所以这很烦人。我以前从未遇到过这样的事情，也找不到太多关于这个错误真正意味着我做错了什么？

有时，Visual Studio 并没有以错误的代码退出，而是简单地锁定了我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:34:59.273

我倾向于同意@paddy 的评论，看起来问题来自不同的线程。您是否将 VS 设置为在第一次出现异常时停止？
在您的情况下，因为它是非托管代码，我会将调试器设置为在 win32 异常和 C++ 异常（全部）处停止。
如果您不知道可以从调试菜单 -> 例外...

# php - 修改 .htaccess 文件以设置 ZendFramework 的包含路径

> ID：13041329
> 
> 赞同：0
> 
> 时间：2012-10-24T00:29:56.563
> 
> 标签：php, .htaccess, zend-framework, include

我试图在没有运气的网站上包含 ZendFramework。最近我尝试修改 .htaccess 文件，如下所示：

```
php_value include_path ":/home/u230474/Zend" 
```

我也试过

```
php_value include_path ".:/home/u230474/Zend" 
```

但在每种情况下，我都无法再查看网站中的任何页面。

我做了这些修改，因为我试图让系统理解以下代码：

```
<?php 
$libreria='/Zend/ZendFramework/library';
set_include_path(get_include_path().PATH_SEPARATOR.$libreria);
require_once('Zend/Loader/Autoloader.php');
Zend_Loader_Autoloader::getInstance(); 
```

我已经尝试了很多天了，虽然我已经和我的提供者谈过了，但我们似乎在理解需求方面遇到了问题。

我使用名为 InstallationChecker.php 的脚本进行了测试以检查 ZendFramework 的安装，该脚本应该表明安装 Zend Framework 成功，实际上该脚本会引发如下错误：

```
Exception thrown trying to access Zend/Loader.php using 'use_include_path' = true. Make sure you include Zend Framework in your include_path which currently contains: .:/usr/lib/php:/usr/local/lib/php 
```

这就是我尝试修改 .htaccess 的原因

有谁知道我是否做错了（显然是）？修改 htaccess 文件以便同时包含 `/usr/lib/php 和 /usr/local/lib/php 的正确方法是什么？

此外，我还读到，当您包含 htaccess 时，您还必须在每个包含的子目录中包含一个 .htaccess 文件。我的大部分 php 脚本都直接在公用文件夹中，但我在子目录中也有很多。我应该如何进行？

我按照 Mike 的建议进行了一些更改，并包含了这样的整个自定义路径：

```
$libreria='Zend/ZendFramework/library/Zend/Loader'; 
```

然后我查看了 php.info，它仍然没有显示对 include_path 的任何更改。此外，我注意到我正在运行以检查 ZendFramework 是否安装的测试中的错误告诉我 Zend 文件夹中有一个类 Loader.php，它实际上存在，但仍然没有加载任何内容。

好的，所以我做了几个测试，看看出了什么问题，因为 Zend 框架似乎加载正常。首先，我将此代码添加到设置包含路径的文件“libreria.php”中（显然没问题，因为库已加载）。我这样做了：

```
$libreria='/home/u230474/public_classes/Zend/ZendFramework/library';
set_include_path(get_include_path().PATH_SEPARATOR.$libreria);
require_once('Zend/Loader/Autoloader.php');
$libload = Zend_Loader_Autoloader::getInstance();
if(!$libload) echo "Librer&iacute;a Zend Framework cargada"; else echo "Error al cargar la librer&iacute;a"; 
```

结果，它输出：“Error al cargar la librería”。

我还设置了一个小测试，看看区分大小写是否有问题。在一些有问题的页面上，我在包含标题和库之后立即放置了这段代码：

```
//codigo para probar equidad de nombre de archivo---------->
$filename = basename($_SERVER['SCRIPT_FILENAME']);
$request = basename($_SERVER['SCRIPT_NAME']);
if($filename != $request)
  die('Case of filename and request do not match!'); 
```

而且它不会死，所以没关系。（如果我做对了，如果我的文件名略有不同，结果会有所不同，如浏览器地址和服务器所见，但也许我错了）。

然后，我调用 Autoloader.php 类的方式发生了一些问题，但我没有看到与 Zend 对 Autoloader 文档的介绍中的静态方法不同的调用方式，其中显示“Autoloader，基本用法”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:34:48.863

.htaccess 可能不是进行此更改的地方，因为将要包含的新路径附加到现有路径会更加困难。您所做的只是用您在 .htaccess 中指定的路径覆盖所有包含路径。这把事情搞砸了。

如果您查看包含的 PHP 代码的第 2 行，它会向您展示如何附加到包含路径（通过获取当前路径并向其附加新路径。）只需对要包含的路径执行类似操作即可。

# c - BSD 套接字中的关闭套接字

> ID：13041335
> 
> 赞同：2
> 
> 时间：2012-10-24T00:30:44.013
> 
> 标签：c, sockets

我的代码是：

```
int main(int argc, char *argv[])
{
    int sockfd, new_fd;  /* listen on sock_fd, new connection on new_fd */
    struct sockaddr_in my_addr;    /* my address information */
    struct sockaddr_in their_addr; /* connector's address information */
    socklen_t sin_size;

    /* generate the socket */
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
        perror("socket");
        exit(1);
    }

    /* generate the end point */
    my_addr.sin_family = AF_INET;         /* host byte order */
    my_addr.sin_port = htons(MYPORT);     /* short, network byte order */
    my_addr.sin_addr.s_addr = INADDR_ANY; /* auto-fill with my IP */
        /* bzero(&(my_addr.sin_zero), 8);   ZJL*/     /* zero the rest of the struct */

    /* bind the socket to the end point */
    if (bind(sockfd, (struct sockaddr *)&my_addr, sizeof(struct sockaddr)) \
    == -1) {
        perror("bind");
        exit(1);
    }

    /* start listnening */
    if (listen(sockfd, BACKLOG) == -1) {
        perror("listen");
        exit(1);
    }

    printf("server starts listnening %d...\n",sockfd);

    /* repeat: accept, send, close the connection */
    /* for every accepted connection, use a sepetate process or thread to serve it */
while(1) {  /* main accept() loop */
    sin_size = sizeof(struct sockaddr_in);
    if ((new_fd = accept(sockfd, (struct sockaddr *)&their_addr, \
    &sin_size)) == -1) {
        perror("accept");
        continue;
    }
    printf("server: got connection from %s\n", \
        inet_ntoa(their_addr.sin_addr));

    if ((numbytes=recv(new_fd, buf, MAXDATASIZE, 0)) == -1) {
    perror("recv");
    exit(1);
    }

    buf[numbytes] = '\0';

    printf("Received: %s",buf);

    if (send(new_fd, "Hello, world!\n", MAXDATASIZE, 0) == -1)
        perror("send");
        close(new_fd);
        exit(0);

    close(new_fd);  /* parent doesn't need this */

    while(waitpid(-1,NULL,WNOHANG) > 0); /* clean up child processes */
}
return 0;
} 
```

所以每当我执行这个服务器时，在一个客户端使用它之后它就会终止。但是如果我想在 60 秒内再次执行它，那么它会给出一个错误，`bind: Address already in use`我认为 close() 函数实际上释放了套接字，以便它可以立即再次使用它。那么我在这里错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T00:32:36.213

在调用之前`bind`，您可以使用`SO_REUSEADDR`socket 选项标记您希望重用地址/端口：

```
int reuseaddr = 1;
int err = setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR,
                     &reuseaddr, sizeof(reuseaddr)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T06:29:20.843

首先，此代码的原始形式来自[Beej's guide](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#closedown)

您提供的代码要么非常错误，要么为简洁而编辑。发送“Hello World”响应后，您调用 exit(0); 请添加花括号。

```
if (send(new_fd, "Hello, world!\n", MAXDATASIZE, 0) == -1)
    perror("send");
    close(new_fd);
    exit(0); 
```

Beej;s 代码：

```
 if (!fork()) { // this is the child process
        close(sockfd); // child doesn't need the listener
        if (send(new_fd, "Hello, world!", 13, 0) == -1)
            perror("send");
        close(new_fd);
        exit(0);
    }
    close(new_fd);  // parent doesn't need this` 
```

我还可以指出，Beej 的代码和您的代码在连接丢失或被客户端中止的情况下不处理“recv”返回 0 的事件。附带说明，请记住对 recv 的调用将阻塞。

```
if ((numbytes=recv(new_fd, buf, MAXDATASIZE, 0)) == -1) {
perror("recv");
exit(1);
} 
```

虽然这似乎不会影响崩溃，但当客户端意外关闭时，此特定问题可能会导致意外崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:53:37.180

**延迟是由于 TIME_WAIT**

在终止连接的过程中，需要牢记的重要一点是，连接两端的应用程序进程必须独立关闭它的一半连接。由于 TCP 连接的三次握手策略，内核等待对方的连接也关闭的确认

但是，您可以通过以下方法覆盖此功能：

**方法一**

在 /etc/sysctl.conf 文件中，添加以下行以在重新启动后保留它：

```
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_tw_reuse = 1 
```

**方法二**

```
echo 1 > /proc/sys/net/ipv4/tcp_tw_recycle
echo 1 > /proc/sys/net/ipv4/tcp_tw_reuse 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T01:28:24.167

另外，我看不到 BACKLOG 是在哪里定义的，您在 listen() 调用中使用了它。如果这是偶然设置为 1，您可能需要增加它。然后，当最后一个套接字关闭时，您可以处理下一个调用。

# c# - VS2012 运行时找不到 dll 文件

> ID：13041340
> 
> 赞同：1
> 
> 时间：2012-10-24T00:31:14.213
> 
> 标签：c#, dll, visual-studio-2012, dll-reference

我有一个引用 dll 文件的项目。我只是通过右键单击属性添加了一个引用，选择了添加引用，然后浏览了 dll。Intellisense 识别库及其所有类/方法，但是当我运行它时，我得到了这个。

在 program.exe 中发生了“System.IO.FileNotFoundException”类型的未处理异常

附加信息：无法加载文件或程序集“Api.dll”或其依赖项之一。指定的模块无法找到。

该文件出现在 bin 文件夹中，并且仍然在我浏览过的位置。如果我不使用任何类或方法，程序运行不会出错。该库没有我知道的任何依赖项。

**编辑：**使用依赖walker发现很多丢失的依赖DLL文件，我认为这是导致问题的原因。将所有依赖的DLL放在同一个文件夹中并引用它后，问题仍然存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:57:55.130

运行应用程序时运行[Fusion Log Viewer 。](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.100%29.aspx)它会准确地告诉您没有加载哪些程序集。

如果运行 Fusion Log Viewer 时没有显示任何内容，请尝试以下设置：

![在此处输入图像描述](../Images/d0e69149a5695c9e2e8d21d650bf7c4f.png)

![在此处输入图像描述](../Images/2ffefac69f4943f60c870d09a8ff7c31.png)

我从来不明白为什么除非我以这种方式使用设置，否则结果不会出现。我会删除所有条目，运行应用程序，然后点击刷新按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:36:54.597

事实证明，即使我发现缺少的 DLL 使用依赖walker，它们也没有被导入到我的项目中，并使用原始 DLL。将它们移动到 bin/debug 文件夹中修复了错误

# linux - 在 tar 存档中获取特定文件的内容

> ID：13041345
> 
> 赞同：0
> 
> 时间：2012-10-24T00:31:44.173
> 
> 标签：linux, bash, shell, tar

此脚本列出了包含模式的文件名（在 tar 存档中）。

```
tar tf myarchive.tar | while read -r FILE
do
    if tar xf test.tar $FILE  -O | grep "pattern" ;then
        echo "found pattern in : $FILE"
    fi
done 
```

我的问题是：

此功能在哪里记录，其中 $FILE 是存档中的文件之一：

```
tar xf test.tar $FILE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:54:19.333

这通常记录在手册页中，请尝试运行以下命令：

```
man tar 
```

不幸的是，Linux 没有最好的手册页集。此操作系统有一份 tar 联机帮助页的在线副本：http: [//linux.die.net/man/1/tar](http://linux.die.net/man/1/tar)，这很糟糕。但它链接到`info man`命令，该命令是访问 GNU 世界中广泛使用的“信息”系统的命令（Linux 用户空间中的许多程序来自 GNU 项目，例如 gcc）。有一个`info tar`关于提取特定文件的在线部分的确切链接：[http ://www.gnu.org/software/tar/manual/html_node/extracting-files.html#SEC27](http://www.gnu.org/software/tar/manual/html_node/extracting-files.html#SEC27)

我还可以推荐来自 BSD（例如 FreeBSD）或 opengroup.org 的文档。实用程序可能在细节上有所不同，但总体上表现相同。

例如，来自 opengroup 的一些相当老但很好的人（XCU 表示*Single UNIX Specification* , Version 2, 1997 的“命令和实用程序”）： http: [//pubs.opengroup.org/onlinepubs/7908799/xcu/tar .html](http://pubs.opengroup.org/onlinepubs/7908799/xcu/tar.html)

> 焦油键 [文件...]
> 
> 支持以下操作数：
> 
> **key** -- 键操作数由一个函数字母组成，后跟零个或多个修改字母。函数字母是以下之一：
> 
> **x** -- 从存档中提取一个或多个命名文件。如果命名文件匹配其内容已写入存档的目录，则（递归）提取该目录。如果归档中的命名文件在系统上不存在，则使用与归档中相同的模式创建文件，除了不设置 set-user-ID 和 set-group-ID 模式，除非用户有适当的特权。如果文件存在，则它们的模式不会改变，除非如上所述。恢复所有者、组和修改时间（如果可能）。如果没有给出文件操作数，则提取档案的全部内容。请注意，如果存档中有多个同名文件，则最后一个文件会覆盖所有较早的文件。

要完全理解命令`tar xf test.tar $FILE`，您还应该阅读有关`f`选项：

> **f** -- 使用第一个文件操作数（或第二个，如果 b 已经指定）作为存档的名称，而不是依赖于系统的默认值。

因此，`test.tar`在您的命令中将`f`按键用作存档名称；然后 x 将使用第二个参数 ( `$FILE`) 作为文件或目录的名称以从存档中提取。

# processing - 处理语言——编写数据的基本程序

> ID：13041348
> 
> 赞同：0
> 
> 时间：2012-10-24T00:32:10.023
> 
> 标签：processing

所以我刚开始在大学学习处理，但遗憾的是错过了前几节课，所以我手头有课本，我正在尝试自己学习这个，有人可以告诉我这是对还是错？你会救我的命。有点..谢谢：D

这是问题：

> 编写一个程序，用它们的值声明和初始化以下变量。向您的程序添加注释以分隔不同的小节。一世。noOfstudents =50 ii. 考试成绩 = -50
> iii. priceOfShoes = 59.99 iv。收入 = 10,750.99 v. greetingMessage='你好' vi. 字母 = 'A'
> 
> vii lossOfIncome = -20.30
> viii sum=0.0000000000076

这是我为这个问题输入的代码；

```
void setup() {
int noOfStudents;
noOfStudents = 50; //Number of Students
float examMark;
examMark = -50; // Exam Mark
float shoePrice;
shoePrice = 59.99; // The price of the shoes
double income;
income = 10750.99; // The income
print ("hello world"); //displays hello world
char message;
message = 'A'; //displays the character A

float lossOfIncome = -20.30;
double lossOfIncome2 = 0.0000000000076; //The loss of income

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:46:02.467

您可以在一行上声明和初始化变量，即`int noOfStudents = 50;`. 另外，您正在使用该`print()`方法。您更有可能想要使用`String`变量类型。

您可能还想看看Ch。Daniel Shiffman 的《学习处理》一书的第 4 章，或者至少是第 4 章的示例。4在线。

[http://www.learningprocessing.com/examples/](http://www.learningprocessing.com/examples/)

# c# - 自动替换 wpf Richtextbox 中的文本

> ID：13041350
> 
> 赞同：4
> 
> 时间：2012-10-24T00:32:18.770
> 
> 标签：c#, wpf, .net-4.0, richtextbox

我有一个 WPF .NET 4 C# `RichTextBox`，我想用其他字符替换该文本框中的某些字符，这将在`KeyUp`事件中发生。

我想要实现的是用完整的单词替换首字母缩略词，例如：
pc =个人电脑
sc =星际争霸
等......

我看过一些类似的线程，但我发现的任何东西在我的场景中都没有成功。

最终，我希望能够使用首字母缩略词列表来做到这一点。但是，我什至无法替换单个首字母缩写词，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:55:55.953

因为`System.Windows.Controls.RichTextBox`没有用于`Text`检测其值的属性，您可以使用以下方法检测其值

```
string _Text = new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text; 
```

然后，您可以使用以下命令更改`_Text`并发布新字符串

```
_Text = _Text.Replace("pc", "Personal Computer");
if (_Text != new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text)
{
new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text = _Text;
} 
```

所以，它看起来像这样

```
string _Text = new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text;
_Text = _Text.Replace("pc", "Personal Computer"); // Replace pc with Personal Computer
if (_Text != new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text)
{
new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text = _Text; // Change the current text to _Text
} 
```

**备注**：`Text.Replace("pc", "Personal Computer");`您可以声明 a`List<String>`来保存字符及其替换，而不是使用

**例子：**

```
 List<string> _List = new List<string>();
    private void richTextBox1_TextChanged(object sender, TextChangedEventArgs e)
    {

        string _Text = new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text;
        for (int count = 0; count < _List.Count; count++)
        {
            string[] _Split = _List[count].Split(','); //Separate each string in _List[count] based on its index
            _Text = _Text.Replace(_Split[0], _Split[1]); //Replace the first index with the second index
        }
        if (_Text != new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text)
        {
        new TextRange(richTextBox1.Document.ContentStart, richTextBox1.Document.ContentEnd).Text = _Text;
        }
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        // The comma will be used to separate multiple items
        _List.Add("pc,Personal Computer");
        _List.Add("sc,Star Craft");

    } 
```

谢谢，
我希望你觉得这有帮助:)

# python - Python 快速散列可变对象

> ID：13041352
> 
> 赞同：5
> 
> 时间：2012-10-24T00:32:28.397
> 
> 标签：python, bytearray

我有一个字节数组，我需要将其用作字典的键。理想情况下，我想在不复制字节数组大小的内存的情况下执行此操作。有没有办法做到这一点？基本上，

```
b = some bytearray
d[byte(b)] = x 
```

有没有更快的方法来做到这一点？byte(b) 是一个 O(len(bytearray)) 操作，这是不可取的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T01:22:49.820

任何真正正确完成其工作的哈希算法都将使用 O(len(b)) 时间。所以“有没有更快的方法来做到这一点”的答案是否定的。

如果您真正关心的是*内存*使用情况，那么原则上您可以`__hash__`向 bytearray 的子类添加一个方法。但这是一个非常糟糕的主意。看看会发生什么：

```
>>> class HashableBytearray(bytearray):
...     def __hash__(self):
...         return hash(str(self))
... 
>>> h = HashableBytearray('abcd')
>>> hash(h)
-2835746963027601024
>>> h[2] = 'z'
>>> hash(h)
-2835746963002600949 
```

因此，同一个对象可以散列到字典中的两个不同位置，这是不应该发生的。情况变得更糟：

```
>>> d = dict()
>>> hb1 = HashableBytearray('abcd')
>>> hb2 = HashableBytearray('abcd')
>>> d[hb1] = 0
>>> d[hb2] = 1
>>> d
{bytearray(b'abcd'): 1} 
```

好的，到目前为止，一切都很好。值相等，因此字典中应该只有一项。一切都按预期工作。现在让我们看看当我们改变时会发生什么`hb1`：

```
>>> hb1[2] = 'z'
>>> d[hb2] = 2
>>> d
{bytearray(b'abzd'): 1, bytearray(b'abcd'): 2} 
```

看看`hb2`这一次它是如何在字典中创建了一个新的键值对的？

每次我将一个键传递给`d`，那个键就等于`'abcd'`。但是由于第一个键的值在添加到字典*后*发生了变化，Python 无法判断新键的值与添加时旧键的值相同。现在字典中有两个键值对，而应该只有一个。

这只是使用可变值作为键可能导致不可预测和非常错误的行为的众多方式之一。只需将其转换`bytearray`为不可变类型，或者首先使用不可变类型。

* * *

对于好奇的人：当然，`buffer`缓存第一个哈希，但这根本没有帮助。只有两个键值，所以这应该只生成两个 dict 条目：

```
>>> a, b, c = bytearray('abcd'), bytearray('abcd'), bytearray('abzd')
>>> a_buf, b_buf, c_buf = buffer(a), buffer(b), buffer(c)
>>> d = {b_buf:1, c_buf:2}
>>> b[2] = 'z'
>>> d[a_buf] = 0 
```

但它产生三个：

```
>>> d
{<read-only buffer for 0x1004a2300, size -1, offset 0 at 0x100499cb0>: 1, 
 <read-only buffer for 0x1004a2420, size -1, offset 0 at 0x100499cf0>: 0, 
 <read-only buffer for 0x1004a22d0, size -1, offset 0 at 0x100499c70>: 2} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T01:44:53.177

如果您关心时间，并且您使用的键始终是同一个*object*，您可以使用它`id`（内存中的位置）作为字典中的键：

```
b = some byte array
d[id(b)] = x 
```

如果你关心内存，你可以在你的字节数组上使用一个好的加密哈希函数，你可能永远不会发生冲突（例如，git 使用 sha1，[互联网](http://www.google.com/search?rls=en&q=git+sha1+collision)上有[一些](http://seejeffrun.blogspot.com/2009/08/hash-collisions-in-git.html) [关于](http://theblogthatnoonereads.davegrijalva.com/2009/09/25/sha-1-collision-probability/)如何可能是无意中发生 sha1 碰撞）。如果您可以接受这种极小的风险，您可以：

```
b = some byte array
d[hashlib.sha1(b).hexdigest()] = x 
```

这将是您的字节数组大小的 O(n)*时间*（每次计算散列时），但是您可以稍后读取不同的字节数组，但表示相同的序列字节，这将散列到相同的字典键。

@senderle 是绝对正确的；您不想使用实际上是可变的对象，当按值使用它时（而不是它的不可变函数，例如`id()`）作为字典的键。用作字典键的对象的哈希值不得更改；它违反了字典对象对哈希函数的期望值的不变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T18:28:12.007

我认为这可能接近你想要的。它相对较快并且不会复制字节数组大小的内存，但是它*是*O(len(bytearray)) - 因为我想不出任何方法来避免这种情况并且总是产生唯一值。

```
def byte(ba):
    """ decode a bytearray as though it were a base 256 number """
    return reduce(lambda a,d: a*256 + d, ba, 0)

ba = bytearray('this is a bytearray')
d = {}
d[byte(ba)] = 42
ba[8] = 'X'  # now 'this is X bytearray'
d[byte(ba)] = 17  # accesses a separate entry in dict
print d 
```

# c# - 使用 Web API HttpClient 时如何概括登录、操作和注销

> ID：13041354
> 
> 赞同：1
> 
> 时间：2012-10-24T00:32:30.970
> 
> 标签：c#, rest, asp.net-web-api, solid-principles, dotnet-httpclient

我正在使用[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)（又名 Web API 客户端）来使用 RESTfull 服务。服务需要在每次操作时建立（通过登录）然后销毁（通过注销）会话。所以调用服务 A 看起来像这样（伪代码）

```
// setup
create auth dictionary authDict
create authenticationContent using FormUrlEndodeContent(authDict)
create cookieContainer
create HttpClientHandler...
create HttpClient

// login
await httpClient.PostAsync(LoginUrl, authenticationContent);
do error checking

// perform Operation A
await httpClient.....post...or...get...
extract data, process it, tranform it, get a cup of coffee, etc, etc
populate OperationAResult

// logout
await httpClient.GetAsync(LogoutUrl);

// return result
return OperationAResult 
```

我的问题是，我怎样才能轻松地为不同的操作重用设置、登录和注销？我是否应该创建一些将采用 Action<> 的方法，如果是这样，我如何确保操作按顺序发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:32:28.203

可能最简单的方法就是编写一个包装类。

```
public class MyHttpClient
{
  private HttpClient _client = new HttpClient();
  private MyHttpClientSetup _setup;

  public MyHttpClient(MyHttpClientSetup setup)
  {
    this._setup = setup;
  }

  private void HttpLogin() 
  { 
    // .. custom login stuff that uses this._setup
  }     

  private void HttpLogout() 
  { 
    // .. custom logout stuff that uses this._setup
  }     

  public void Reset()
  {
    this._client = new HttpClient();
  }

  // Wrapped Properties from the private HttpClient (1 example)
  public Uri BaseAddress 
  { 
    get{ return this._client.BaseAddress;} 
    set{ this._client.BaseAddress = value;} 
  }

  // Wrapped HttpMethods (1 example)
  // Extremely poorly written, should be delegated properly
  // This is just a bad example not using Task properly
  public Task<HttpResponseMessage> DeleteAsync(string requestUri)
  {
    this.HttpLogin();
    Task<HttpResponseMessage> result = this._client.DeleteAsync(requestUri);
    this.HttpLogout();
    return result;
  }

  public class MyHttpClientSetup
  {
    // Properties required for setup;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:46:50.680

您也许可以创建一个新的 MessageHandler 来透明地为您处理这些东西。

```
public class ConnectionHandler : DelegatingHandler {

        public HttpClient HttpClient {get;set;}

        public TestHandler(HttpMessageHandler handler) {
            this.InnerHandler = handler;
        }
        protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
        {
            // Do your login stuff here
            return base.SendAsync(request, cancellationToken)  // Make your actual request
              .ContinueWith(t => {
                            // Do your logout stuff here
                            } 
        }
    } 
```

然后，您可以只使用 HttpClient 的单个实例来执行所有请求。要将处理程序添加到请求/响应管道，您只需创建一个常规 HttpClientHandler，将其分配给 DelegatingHandler 的 InnerHandler 属性，然后将新处理程序传递给 HttpClient 的构造函数。从那时起，所有通过 HttpClient 发出的请求都将通过您的 ConnnectionHandler 进行路由。

```
 var connectionHandler = new ConnectionHandler(new HttpClientHandler());
  var client = new HttpClient(connectionHandler);
  connectionHandler.HttpClient = client;

  var response = client.GetAsync("http://example.org/request").Result; 
```

使用单个 HttpClient 实例的优点是您不必不断重新指定 DefaultRequestHeaders。此外，处理 HttpClient 将终止 TCP 连接，因此下一个请求将不得不重新打开它。

# ruby - 创建数组的最佳方法会以相同的方式生成多个对象吗？

> ID：13041359
> 
> 赞同：1
> 
> 时间：2012-10-24T00:33:08.630
> 
> 标签：ruby

有什么更优雅的方式以红宝石方式做到这一点？我想这很好：

```
([0]*5).collect { Factory :customer_pj } 
```

或者

```
 (1..5).to_a.collect { Factory :customer_pj } 
```

我的目标是初始化 5 个客户并放入数组中。我碰巧`let`在 rspec 测试中这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T00:37:32.543

```
let(:customers) do
  Array.new(5){ Factory :customer_pj }
end 
```

由于 Andrew Marshall 编辑了问题，相关部分变成了这样：

```
Array.new(5){ Factory :customer_pj } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:08:43.663

```
5.times.map { Factory :customer_pj } 
```

# java - Google App Engine：预热/加载请求和始终开启

> ID：13041360
> 
> 赞同：8
> 
> 时间：2012-10-24T00:33:18.197
> 
> 标签：java, google-app-engine

我的*对预热请求的理解是，它是“准备”新的前端/后端实例（*或者***它们仅适用于前端？**）以准备在不久的将来使用的请求。*

 *我的*理解*对加载请求的理解是，它是一个启动新实例的请求，因为现在*它*。因此，自己应该提前尝试“预热”实例，以减少加载延迟。

所以我的第一个问题是：我对这些请求类型的理解是否正确，如果不是（或者我在这里遗漏了任何值得注意的内容），那么请首先澄清/纠正我！

接下来我很好奇：如何让 GAE 服务器端代码“处理”预热或加载请求？是否有我需要实现的特定接口（在 Java EE 领域，您也需要实现`ServiceContextListener`web/app 容器在部署/启动应用程序时查找和调用的接口）。如果是这样，这样做的 API 是什么？否则，GAE 应用程序的“入口点”是什么？基本上我想知道什么类/方法应该处理预热/加载请求。

最后，我问：在启动过程中处理预热请求和加载请求之间应该有哪些（一般）活动？他们不会一样吗？我问是因为我对使用 GAE 的“始终开启”高级功能感兴趣，并且不确定我应该将我的启动代码放置在哪里，以用于将始终开启的实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T04:27:07.830

预热请求是一种让实例准备好处理流量的方法，这样您的用户就不必等待 Java 或 Python 应用程序加载其所有导入，然后执行任何特定于实例的初始化（包括缓存预热）它需要做。预热请求适用于前端和后端。

你如何做到这一点的细节取决于语言，但基本上你需要一个处理程序来处理请求，`/_ah/warmup`而不是产生 500 响应。有关详细信息，请谷歌搜索“App engine warmup request”并选择相应的结果。预热请求默认为 Java 启用，但对于 Python，您必须在`app.yaml`. 我还没有为 Go 尝试过它们。

据我所知，“加载请求”只是实例必须处理的第一个请求的名称。[https://developers.google.com/appengine/kb/java#What_Is_A_Loading_Request](https://developers.google.com/appengine/kb/java#What_Is_A_Loading_Request)有一些细节。*

# ruby-on-rails-3 - FactoryGirl attributes_for 和关联

> ID：13041362
> 
> 赞同：5
> 
> 时间：2012-10-24T00:33:50.797
> 
> 标签：ruby-on-rails-3, factory-bot

我正在尝试在我的 Rspec 控制器测试中测试关联。问题是 Factory 不会为 attributes_for 命令生成关联。因此，按照[这篇文章](https://stackoverflow.com/questions/5103572/factorygirl-attributes-for-not-giving-me-associated-attributes)中的建议，我在控制器规范中定义了我的验证属性，如下所示：

```
def valid_attributes
   user = FactoryGirl.create(:user)
   country = FactoryGirl.create(:country)
   valid_attributes = FactoryGirl.build(:entitlement, user_id: user.id, country_id: country.id, client: true).attributes.symbolize_keys
   puts valid_attributes
end 
```

但是，当控制器测试运行时，我仍然收到以下错误：

```
 EntitlementsController PUT update with valid params assigns the requested entitlement as @entitlement
    Failure/Error: entitlement = Entitlement.create! valid_attributes
    ActiveRecord::RecordInvalid:
    Validation failed: User can't be blank, Country can't be blank, Client  & expert are both FALSE. Please specify either a client or expert relationship, not both 
```

然而，终端中的 valid_attributes 输出清楚地表明每个 valid_attribute 都有一个 user_id、country_id 并且专家设置为 true：

```
 {:id=>nil, :user_id=>2, :country_id=>1, :client=>true, :expert=>false, :created_at=>nil, :updated_at=>nil} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T00:58:00.647

看起来您的方法`puts`的最后一行是a `valid_attributes`，它返回 nil。这就是为什么当您将其传递给`Entitlement.create!`您时会收到有关用户和国家/地区为空白等错误的原因。

尝试删除该`puts`行，因此您只需：

```
def valid_attributes
  user = FactoryGirl.create(:user)
  country = FactoryGirl.create(:country)
  FactoryGirl.build(:entitlement, user_id: user.id, country_id: country.id, client: true).attributes.symbolize_keys
end 
```

顺便说一句，您不应该真正创建用户和国家，然后将他们的 id 传递给`build`，您可以在工厂本身中执行此操作，只需在工厂中添加`user`和。当您运行时，它会自动创建它们（但不会实际保存记录）。`country``entitlement``FactoryGirl.build(:entitlement)``entitlement`

# java - JSON字符串到POJO，使用GSON，需要澄清

> ID：13041363
> 
> 赞同：0
> 
> 时间：2012-10-24T00:34:00.707
> 
> 标签：java, gson

我有一个`JSON`文件，如`String`：

```
 String compString = "{\n" +
            "      \"Component\": {\n" +
            "        \"name\": \"Application\",\n" +
            "        \"environment\": \"QA\",\n" +
            "        \"hosts\": [\n" +
            "          \"box1\",\n" +
            "          \"box2\"\n" +
            "        ],\n" +
            "        \"directories\": [\n" +
            "          \"/path/to/dir1/\",\n" +
            "          \"/path/to/dir2/\",\n" +
            "          \"/path/to/dir1/subdir/\",\n" +
            "        ]\n" +
            "      }\n" +
            "    }"; 
```

我有一个代表它的bean（如果不正确，则正确）

```
public class Component {

    String name;
    String environment;

    List<String> hosts = new ArrayList<String>();
    List<String> directories = new ArrayList<String>();

    // standard getters and setters
} 
```

我正在尝试通过以下方式将此字符串提供给此类：

```
 Gson gson = new Gson();
    Component component = gson.fromJson(compString, Component.class);

    System.out.println(component.getName()); 
```

以上不起作用。（我`null`回来了，好像从未设置过组件的名称值）

请问我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:55:31.443

实际上，您必须从 Json 中删除封闭类。

事实上，JSON 从封闭类的内容开始。

所以你的 JSON 将是：

```
 String compString = "{\n" +
                    "        \"name\": \"Application\",\n" +
                    "        \"environment\": \"QA\",\n" +
                    "        \"hosts\": [\n" +
                    "          \"box1\",\n" +
                    "          \"box2\"\n" +
                    "        ],\n" +
                    "        \"directories\": [\n" +
                    "          \"/path/to/dir1/\",\n" +
                    "          \"/path/to/dir2/\",\n" +
                    "          \"/path/to/dir1/subdir/\",\n" +
                    "        ]\n" +
                    "      }\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:54:23.027

```
String compString = 
                "       {\n" +
                "        \"name\": \"Application\",\n" +
                "        \"environment\": \"QA\",\n" +
                "        \"hosts\": [\n" +
                "          \"box1\",\n" +
                "          \"box2\"\n" +
                "        ],\n" +
                "        \"directories\": [\n" +
                "          \"/path/to/dir1/\",\n" +
                "          \"/path/to/dir2/\",\n" +
                "          \"/path/to/dir1/subdir/\",\n" +
                "        ]}" ; 
```

我认为您应该阅读有关 json 的更多信息，我已经删除了您的 json 字符串中的某些内容，然后成功了。

# android - 开发 android 软键盘：示例未正确实现表单字段的更改

> ID：13041373
> 
> 赞同：3
> 
> 时间：2012-10-24T00:34:53.313
> 
> 标签：android, keyboard, android-softkeyboard

我从头开始尝试使用软键盘，但在按下*Next*按钮时发现了一个问题。它在其他键盘上按预期工作，所以我认为这可能是他们在开发样本时没有考虑到的事情。我还没有尝试其他版本。

使用的版本：Android API 15 源代码来自 android-sdk/samples/android-15/SoftKeyboard

问题：如果您有一个包含两个文本字段的表单，则在按下下一个按钮（右下角的输入）后，光标不会转到下一个字段。

示例：可以尝试使用联系人应用程序：

*   打开联系人
*   点击某个联系人
*   单击操作栏顶部的编辑按钮
*   查看联系人的电子邮件，如果只有一个文本字段，请按 + 按钮，因此至少有 2 个文本字段
*   单击第一个文本字段以编辑电子邮件 #1
*   在软键盘示例上键入下一步按钮
*   光标会消失，不会转到下一个字段（有时会崩溃，但通常您只需再次触摸文本字段即可，一切正常）

在调试时我还没有发现任何问题，但是我在源代码中有些地方可以查看： 在`com.example.android.softkeyboard.SoftKeyboard`课堂上：

在`public boolean onKeyDown(int keyCode, KeyEvent event)`方法有：

```
case KeyEvent.KEYCODE_ENTER:
// Let the underlying text editor always handle these.
return false; 
```

我看了一下，调试的时候掉到这里，看起来还可以，因为光标的变化不是软键盘处理的

我想到的另一种方法是

```
public void onStartInput(EditorInfo attribute, boolean restarting) 
```

也许它没有将光标移到它所在的位置，所以它就消失了。但是我还没有找到解决方法，所以我不知道这是否真的发生了。

# zend-framework - Zend Mail（使用 SMTP）：来自 CC 的电子邮件地址出现在 TO

> ID：13041379
> 
> 赞同：2
> 
> 时间：2012-10-24T00:35:33.433
> 
> 标签：zend-framework, email, smtp

我在我的 SMTP 服务器上使用 Zend Mail 时遇到了一个奇怪的问题。我正在尝试使用 to List 和 CC List 发送电子邮件，并且 CC 列表中的唯一电子邮件收件人被添加到电子邮件的 To List 中。

我试图通过转储 Zend_Mail 对象来调试它，它看起来像这样：

```
[_charset:protected] => iso-8859-1
[_headers:protected] => Array
    (
        [From] => Array
            (
                [0] => me@from.com
                [append] => 1
            )

        [To] => Array
            (
                [0] => epinapala@gmail.com
                [append] => 1
                [1] => epinapala@f.com
            )

        [Cc] => Array
            (
                [0] => epinapala@d.com
                [append] => 1
                [1] => epinapala@m.com
            )

        [Subject] => Array
            (
                [0] => Mail Subject Here 
            )

    )

[_headerEncoding:protected] => quoted-printable
[_from:protected] => me@from.com
[_to:protected] => Array
    (
        [0] => epinapala@gmail.com
        [1] => epinapala@f.com
    )

[_recipients:protected] => Array
    (
        [epinapala@gmail.com] => 1
        [epinapala@f.com] => 1
        [epinapala@d.com] => 1
        [epinapala@m.com] => 1
    ) 
```

邮件标题看起来不错，但抄送列表中的电子邮件正在添加到列表中。

我所做的只是将电子邮件附加到 ToList 和 CC 列表。

```
 $mail = new Zend_Mail();
    ................... 
......................
    $mail->setFrom($from);
    $mail->addTo("epinapala@gmail.com");
    $mail->addTo("epinapala@f.com");
    $mail->addCc("epinapala@d.com");
    $mail->addCc("epinapala@m.com");
.......................
..........
    $mail->send(); 
```

下面是我的 Gmail 中显示问题的屏幕截图：**@d.com 和 @m.com 也出现了！**

![在此处输入图像描述](../Images/f8d8e0efefbad305c7cbc5a1b66e45bf.png)

我错过了什么吗？

# arrays - Excel VBA 公式数组太慢

> ID：13041384
> 
> 赞同：0
> 
> 时间：2012-10-24T00:36:17.820
> 
> 标签：arrays, excel, vlookup, vba

我有一个宏，它根据会计期间填充开始日期和完成日期。例如：产品 X 在 Jan12 - Dec12 有销售。该宏将使用 vlookup/min 数组来查找起点，并使用 vlookup/max 数组来查找终点。日期采用 YYYYMM 格式，因此 vlookup 正在查看一个日历选项卡，该选项卡将相应的 YYYYMM 映射到开始或结束日期。编码工作正常，但在某些情况下有 30,000 - 100,000 行，运行可能需要 15-20 分钟。有没有人对如何使它运行得更快有任何想法？

这是代码：

> Cells(Rcnt, 5).FormulaArray = "=VLOOKUP(MIN(IF('Normalized'!A:A= " & Cells(Rcnt, 1).Address(False, False) & ", 'Normalized'!J:J )),'日历'!A:C,2,FALSE)"

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:41:55.587

不要在宏中使用公式。您可能可以通过自己在 VBA 中编写代码来使代码更快。您可以遍历一行中的所有值并存储最小值和最大值（您可以保留最大值和最小值，因此您只需要一个循环）。然后将这些值写入适当的位置。这应该已经是对 excel 公式的加速。

要开始在 VBA 中编写宏，请查看[此处](http://www.excel-vba-easy.com/)。您将特别想看看如何[循环](http://www.excel-vba-easy.com/vba-programming-excel-vba-loop.html)遍历单元格。您需要设置 max = Jan 1 和 min = Dec 31，然后如果您当前检查的值大于 max，则将 max 设置为等于该值，同样设置为 min。遍历该行后，您将在该行中获得最大值和最小值。然后，您可以将这些值写入其他列，重置最大值和最小值并移动到下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:10:39.163

我对您的问题的理解是，您的数据列出了每个产品在每个月的销售额，因此对于每个产品，您都在搜索第一个月和最后几个月。您可以按产品和日期对数据进行排序吗？正如 Emschorsch 所描述的那样，这将是实现循环的最简单方法，因为您一次只能处理一种产品。

尝试加快速度的其他几件事：

*   将代码的第一行设置为：

    ```
    Application.Calculation = xlCalculationManual 
    ```

    和你的最后一行：

    ```
    Application.Calculation = xlCalculationAutomatic 
    ```

    （您仍然有大量查找，但它们会一次计算，而不是在您创建每一行的公式时一次计算）

*   如果无法对数据进行排序，您可以连续对每个产品进行自动筛选，并使用 SUBTOTAL() 函数引用日期列来获取最小值和最大值。（您可以将 SUBTOTAL() 公式放在未使用的单元格中并在代码中引用该单元格，或者使用 Application.WorksheetFunction 在代码中直接使用它）

似乎不必要的另一部分（没有看到我们无法确定的数据）是使用查找将 YYYYMM 转换为日期，如果这确实是所有日期的格式。这可以在没有使用 VBA 的情况下轻松完成DATE() 公式，或者如果您在宏中需要它：

```
cells(Rcnt, 5).Value = DateSerial(Left(x, 4), Right(x, 2), 1)  'x is your date in YYYYMM format 
```

# php - 如何在 .htaccess 重写中修复我的图像路径？

> ID：13041386
> 
> 赞同：2
> 
> 时间：2012-10-24T00:36:30.860
> 
> 标签：php, apache, .htaccess

我制定了如下重写规则：

```
RewriteCond %{REQUEST_URI} !^(/index.php)|(index.php)|\.(gif|jpe?g|png)|(/public/)|(/forum/)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) index.php?qs=$1 
```

当有人说`www.example.com/a/b`，一切都很好，除了图像。

图像在我的脚本中链接为相对路径，它们位于 中`www.example.com/images`，但服务器正在尝试从`www.example.com/a/b/images`.

有没有办法通过编辑我的 RewriteRule 来解决这个问题？这将是一个最佳解决方案，因为很难更改脚本中的所有图像路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:39:47.127

试试这个，你的第一行：

```
RewriteCond %{REQUEST_URI} !^(/index.php)|(/images)|(images)|(/forum/) 
```

# javascript - Javascript，尝试在创建文本节点方法中添加换行符

> ID：13041388
> 
> 赞同：12
> 
> 时间：2012-10-24T00:36:47.923
> 
> 标签：javascript

这是我的脚本：

```
<script>
/*jslint browser:true */
var i;
var out = document.getElementById("output");
var args = ["aaa", "bbb", "ccc", "ddd", 1, 2, 4 + 4];
function displayArgs() {
    "use strict";
    for (i = 0; i < args.length; i++) {
        out.appendChild(document.createTextNode(args[i] + "<br>"));
    }
}

displayArgs(args);
</script> 
```

到目前为止，我的输出都出现在一行中，其中显示了 break 标记而不是 b

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T00:45:14.157

`document.createTextNode`防止文本呈现为 html。试试这个。

```
/*jslint browser:true */
var i;
var out = document.getElementById("output");
var args = ["aaa", "bbb", "ccc", "ddd", 1, 2, 4 + 4];
function displayArgs() {
    "use strict";
    for (i = 0; i < args.length; i++) {
        out.appendChild(document.createTextNode(args[i]));
        out.appendChild(document.createElement("br"));
    }
}
displayArgs(args); 
```

演示：http: [//jsfiddle.net/LVm9z/](http://jsfiddle.net/LVm9z/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T00:42:50.237

您正在创建一个文本节点，因此 html 标记将被忽略。改用 document.createElement ：

```
var myDiv = document.createElement("div");
myDiv.id = 'myDiv';
myDiv.innerHTML = 'blah!<br/>';
document.body.appendChild(myDiv); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T00:42:10.883

文本节点是文本节点，如果它包含一个`<br>`（或*任何*HTML），它不会被解析为 HTML，因为文本节点的数据仅被视为文本。

你可以加...

```
out.appendChild(document.createElement("br")); 
```

# c# - 在 WinRT 中编译和运行外部 Java 程序？

> ID：13041389
> 
> 赞同：0
> 
> 时间：2012-10-24T00:36:52.983
> 
> 标签：c#, java, .net, windows-8, windows-runtime

我正在制作 windows 8 、 c#/xaml 应用程序。是否可以编译和运行像“hello world”这样的java控制台程序？
由于 winRt 应用程序无法使用`System.Diagnostics.Process`，因此它无法确定如何编译和运行它。或者如果编译是不可能的，只要能够运行一个 .class 文件就可以了。

我曾尝试使用`System.Diagnostics.Process`打开 cmd 进行编译，但不支持该类。
感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:20:54.377

肯定没有一种优雅或有意（和记录）的方式来启动您从 Windows 应用商店应用程序描述的过程（它被故意锁定，并且没有“新的 Windows 应用商店 UI 应用程序的命令提示符）。有一些建议可能有通过[CoCreateInstanceFromApp](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404137%28v=vs.85%29.aspx)的方法，但文档现在看起来好像该 API 仅适用于有限数量的 Microsoft 构建的 COM 对象。

虽然您可以启动其他已安装的 Windows 应用商店应用程序，但如果没有由 Oracle（或某些第三方）进行**重大且不寻常**的重新打包，Java 编译器肯定不会是其中之一。虽然有人可能正在为此工作，但似乎不太可能（鉴于对此类功能的需求有限）。

根据 Java 代码的性质，您可能希望寻找可以嵌入到应用程序中的 Java 解释器，并直接调用它，尤其是在 Java 代码很简单的情况下。

您的应用程序要求表明传统的 Windows 桌面应用程序更适合。

# django - nginx+uwsgi+django响应超时怎么办？

> ID：13041390
> 
> 赞同：3
> 
> 时间：2012-10-24T00:36:53.230
> 
> 标签：django, nginx, blocking, uwsgi

我有一个长时间运行的任务，它不是异步的，它会阻止 django 的响应，服务器堆栈是 nginx+uwsgi，在 nginx 决定超时后会发生什么，我的任务（uwsgi worker 和 django 视图线程）会被杀死?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:46:54.037

通常，请求将在 uWSGI 中继续，直到“不良条件”（例如向断开连接的客户端发送响应的块）失败。这是一种可配置的行为，但如果您没有非常具体的原因，我建议您不要触摸它

# php - 随机 php 包含脚本 - 时区未定义，未设置数组或函数已定义

> ID：13041392
> 
> 赞同：-1
> 
> 时间：2012-10-24T00:37:01.283
> 
> 标签：php, mysql, .htaccess

> 抱歉，这是一个糟糕的问题，我对其进行了修改以使其不那么本地化。我已经学会将我的问题缩小到实际原因。**如果有人可以投票赞成这个问题，那么我可以再次在堆栈上提问，我将非常感激**。

我不断从这条线上得到一个错误。

```
 $file = $files[ rand( 0, count( $files ) ) ]; 
```

它抛出未定义的时区、未设置的数组或已定义的函数。

> **注意**：未定义的偏移量：5 in **/home/public_html/adserve.php** on line **15**
> adserve.php

共享主机，因此无法访问 php.ini 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T00:42:48.667

不存在随机错误。第一个几乎告诉你你需要做什么来修复它。

在第二个中，如果代码的第 15 行是这样的：

```
$file = $files[ rand( 0, count( $files ) ) ]; 
```

那么您未定义的偏移量问题在于您正在使用的零索引数组中的最高索引值将是`count - 1`.

因此你的线应该是

```
$file = $files[ rand( 0, count( $files ) - 1 ) ]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T00:42:20.530

您收到的错误是因为您尝试访问`$files`不存在的数组索引，在这种情况下为`5`. 这是在元素数量为 5 时引起的，这意味着索引从 0 -> 4 开始。

您正在使用 PHP 的`rand()`，如果您指定了最小值和最大值，则包含在内，因此您需要将其`count($files) - 1`用作最大值：

```
$file = $files[ rand( 0, (count( $files ) - 1)) ]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T00:44:34.380

对于时区设置错误，您需要编辑 php.ini 以更改 date.timezone 设置：

```
 date.timezone = 'America/Chicago' 
```

对于通知“未定义的偏移量”，您需要检查该数组值是否实际存在：

```
 if (!empty($files[ rand( 0, count( $files ) ) ]))
         $file = $files[ rand( 0, count( $files ) ) ]; 
```

# jquery - jQuery轮播动画跳跃

> ID：13041396
> 
> 赞同：4
> 
> 时间：2012-10-24T00:37:34.073
> 
> 标签：jquery, animation, jquery-plugins, carousel

我正在使用 CarouFredSel jQuery 插件 ( [http://caroufredsel.dev7studios.com](http://caroufredsel.dev7studios.com) ) 在我的网站上创建动画轮播。但是，我注意到动画不正确 - 它动画太远（与我编码的设置相比），然后在动画结束时，它跳转到正确的位置。

这是出现错误的页面：http: [//mnogal.pl/kopernik/html/strona_glowna.html](http://mnogal.pl/kopernik/html/strona_glowna.html) - 文本应该始终在中间，并且动画应该只是移动到将下一个文本定位在中间。

目前它的设置类似于 PIC 1 - TEXT - PIC 2 - TEXT - PIC 1 等，因此如果有意义的话，它应该在每个动画之后交替两张图片的位置。

我最终在动画之后显示了正确的东西，它只是动画太远并且在它结束之前跳跃。

我检查了旁边的演示，没有发生类似的情况，我的代码也似乎正确，没有什么不寻常的：

```
$("#carousel .overview").carouFredSel({
    height: 507,
    items: {
          visible: 3,
    },
    scroll: {
        items: 2,
        duration: 3000
    },
    auto: 6000
}); 
```

任何人都可以帮忙吗？我想不通。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T15:17:07.430

服务器上没有 scripts.js (http://mnogal.pl/kopernik/html/js/scripts.js)。此生成的错误会阻止其他 javascript 运行。先把它修好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T17:00:59.927

我可以推荐 Twitter Bootstrap。

底部示例：http: [//twitter.github.com/bootstrap](http://twitter.github.com/bootstrap)

轮播示例：http: [//twitter.github.com/bootstrap/examples/carousel.html](http://twitter.github.com/bootstrap/examples/carousel.html)

轮播代码：http: [//twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:02:28.443

您可能想试试这个：http: [//jsfiddle.net/mW5Y9/2/](http://jsfiddle.net/mW5Y9/2/)。@MichaelCalkins 含义的现场演示。

```
<div id="myCarousel" class="carousel slide" data-interval="your_interval_in_secs">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item">…&lt;/div>
    <div class="item">…&lt;/div>
    <div class="item">…&lt;/div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

# cuda - 相当于 cuBLAS 的 cudaGetErrorString？

> ID：13041399
> 
> 赞同：9
> 
> 时间：2012-10-24T00:38:16.350
> 
> 标签：cuda, gpu, nvidia, matrix-multiplication, cublas

CUDA 运行时有一个方便的函数`cudaGetErrorString(cudaError_t error)`，可以将错误枚举转换为可读字符串。`cudaGetErrorString`用于`CUDA_SAFE_CALL(someCudaFunction())`许多人用于 CUDA 错误处理的宏中。

我现在正在熟悉 cuBLAS，我想创建一个类似于`CUDA_SAFE_CALL`cuBLAS 的宏。为了使我的宏的打印输出有用，我想有一些类似于`cudaGetErrorString`cuBLAS 的东西。

**`cudaGetErrorString()`在 cuBLAS 中是否有等价物？或者，有没有任何 cuBLAS 用户编写过这样的函数？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T01:36:39.337

在 CUDA 5.0 中，假设您安装了示例，有一个文件 ..../samples/common/inc/helper_cuda.h 具有以下内容：

```
#ifdef CUBLAS_API_H_
// cuBLAS API errors
static const char *_cudaGetErrorEnum(cublasStatus_t error)
{
    switch (error)
    {
        case CUBLAS_STATUS_SUCCESS:
            return "CUBLAS_STATUS_SUCCESS";

        case CUBLAS_STATUS_NOT_INITIALIZED:
            return "CUBLAS_STATUS_NOT_INITIALIZED";

        case CUBLAS_STATUS_ALLOC_FAILED:
            return "CUBLAS_STATUS_ALLOC_FAILED";

        case CUBLAS_STATUS_INVALID_VALUE:
            return "CUBLAS_STATUS_INVALID_VALUE";

        case CUBLAS_STATUS_ARCH_MISMATCH:
            return "CUBLAS_STATUS_ARCH_MISMATCH";

        case CUBLAS_STATUS_MAPPING_ERROR:
            return "CUBLAS_STATUS_MAPPING_ERROR";

        case CUBLAS_STATUS_EXECUTION_FAILED:
            return "CUBLAS_STATUS_EXECUTION_FAILED";

        case CUBLAS_STATUS_INTERNAL_ERROR:
            return "CUBLAS_STATUS_INTERNAL_ERROR";
    }

    return "<unknown>";
}
#endif 
```

以前版本的 CUDA SDK（示例）中可能有类似的东西。如果您问这个问题，这不是回答“内置的东西”的问题，而是回答您的问题“是否有任何 cuBLAS 用户编写了这样的函数？”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:31:15.893

我仍然很好奇 cuBLAS 中是否有内置的方法来获取错误字符串，但*我*现在自己写了。

根据[cuBLAS 指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/CUDALibraries/doc/CUBLAS_Library.pdf)的第 8.1 节，cuBLAS中只有 8 种类型的 cublasError_t 值。我把它们打印出来...

```
printf("CUBLAS_STATUS_SUCCESS = %d \n", CUBLAS_STATUS_SUCCESS);
printf("CUBLAS_STATUS_NOT_INITIALIZED = %d \n", CUBLAS_STATUS_NOT_INITIALIZED);
printf("CUBLAS_STATUS_ALLOC_FAILED = %d \n", CUBLAS_STATUS_ALLOC_FAILED);
printf("CUBLAS_STATUS_INVALID_VALUE = %d \n", CUBLAS_STATUS_INVALID_VALUE);
printf("CUBLAS_STATUS_ARCH_MISMATCH = %d \n", CUBLAS_STATUS_ARCH_MISMATCH);
printf("CUBLAS_STATUS_MAPPING_ERROR = %d \n", CUBLAS_STATUS_MAPPING_ERROR);
printf("CUBLAS_STATUS_EXECUTION_FAILED = %d \n", CUBLAS_STATUS_EXECUTION_FAILED);
printf("CUBLAS_STATUS_INTERNAL_ERROR = %d \n", CUBLAS_STATUS_INTERNAL_ERROR); 
```

打印输出：

```
CUBLAS_STATUS_SUCCESS = 0 
CUBLAS_STATUS_NOT_INITIALIZED = 1 
CUBLAS_STATUS_ALLOC_FAILED = 3 
CUBLAS_STATUS_INVALID_VALUE = 7 
CUBLAS_STATUS_ARCH_MISMATCH = 8 
CUBLAS_STATUS_MAPPING_ERROR = 11 
CUBLAS_STATUS_EXECUTION_FAILED = 13 
CUBLAS_STATUS_INTERNAL_ERROR = 14 
```

我获取 cuBLAS 错误字符串的函数：

```
const char* cublasGetErrorString(cublasStatus_t status)
{
    switch(status)
    {
        case CUBLAS_STATUS_SUCCESS: return "CUBLAS_STATUS_SUCCESS";
        case CUBLAS_STATUS_NOT_INITIALIZED: return "CUBLAS_STATUS_NOT_INITIALIZED";
        case CUBLAS_STATUS_ALLOC_FAILED: return "CUBLAS_STATUS_ALLOC_FAILED";
        case CUBLAS_STATUS_INVALID_VALUE: return "CUBLAS_STATUS_INVALID_VALUE"; 
        case CUBLAS_STATUS_ARCH_MISMATCH: return "CUBLAS_STATUS_ARCH_MISMATCH"; 
        case CUBLAS_STATUS_MAPPING_ERROR: return "CUBLAS_STATUS_MAPPING_ERROR";
        case CUBLAS_STATUS_EXECUTION_FAILED: return "CUBLAS_STATUS_EXECUTION_FAILED"; 
        case CUBLAS_STATUS_INTERNAL_ERROR: return "CUBLAS_STATUS_INTERNAL_ERROR"; 
    }
    return "unknown error";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-05T11:01:05.907

在流行的 gpuErrchk 解决方案[what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)之后，我使用 cuBLAS 替代方案重载了该函数，以处理 cuBLAS 错误。然后，您可以像往常一样使用 gpuErrchk 轻松包装您的 cuBLAS 函数调用。

从其他人提到的 helper_cuda.h 文件来看，很容易继续为其他 cuda 库（cuFFT 等）添加重载函数。希望这可以帮助某人。请告诉我是否有更好的方法！

```
inline void error::gpuAssert(cudaError_t code, const char *file, int line, bool abort=true) const
{
    if (code != cudaSuccess)
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) exit(code);
    }
}

inline void error::gpuAssert(cublasStatus_t code, const char *file, int line, bool abort=true) const
{
    if (code != CUBLAS_STATUS_SUCCESS)
    {
        switch (code) {
            case CUBLAS_STATUS_NOT_INITIALIZED:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_NOT_INITIALIZED file: %s line: %d ", file, line);
            break; 

            case CUBLAS_STATUS_ALLOC_FAILED:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_ALLOC_FAILED file: %s line: %d ", file, line); 
            break; 

            case CUBLAS_STATUS_INVALID_VALUE:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_INVALID_VALUE file: %s line: %d ", file, line); 
            break; 

            case CUBLAS_STATUS_ARCH_MISMATCH:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_ARCH_MISMATCH file: %s line: %d ", file, line); 
            break; 

            case CUBLAS_STATUS_MAPPING_ERROR:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_MAPPING_ERROR file: %s line: %d ", file, line); 
            break; 

            case CUBLAS_STATUS_EXECUTION_FAILED:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_EXECUTION_FAILED file: %s line: %d ", file, line); 
            break; 

            case CUBLAS_STATUS_INTERNAL_ERROR:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_INTERNAL_ERROR file: %s line: %d ", file, line); 
            break; 

            case CUBLAS_STATUS_NOT_SUPPORTED:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_NOT_SUPPORTED file: %s line: %d ", file, line); 
            break; 

            case CUBLAS_STATUS_LICENSE_ERROR:
            fprintf(stderr, "cuBLAS Error: CUBLAS_STATUS_LICENSE_ERROR file: %s line: %d ", file, line); 
            break; 
        }
        if (abort) exit(code);
    }
}

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); } 
```

示例输出：

```
 ** On entry to SGEMM  parameter number 13 had an illegal value
cuBLAS Error: CUBLAS_STATUS_INVALID_VALUE file: ../src/XX.cu line: 323 Segmentation fault (core dumped) 
```

# mysql - 为什么 sqlalchemy with_lockmode 会在没有找到记录的情况下锁定整个表？

> ID：13041402
> 
> 赞同：0
> 
> 时间：2012-10-24T00:39:00.267
> 
> 标签：mysql, sqlalchemy, innodb

我正在使用 sqlalchemy 访问 MySQL（通过 Innodb）。我用于锁定的查询是：

```
create_engine('mysql+mysqldb://root:root@localhost/tmp_db')
db_session = scoped_session(sessionmaker(bind=engine))
db_session.query(Transaction).filter_by(key='abc').with_lockmode('update').first() 
```

在表中没有找到 key = 'abc'。但是，整个事务表被此查询锁定。我检查了 show engine innodb status，这个表中的所有行都被锁定了。其他数据库会话无法访问表中的任何行，并出现超时错误。

在 sqlalchemy 中使用 with_lockmode 时，为什么整个表都被锁定，找不到记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:11:33.557

好的。我发现，在表的键列上添加索引将解决问题。

# android - 具有兼容性包的多个 MapFragment

> ID：13041403
> 
> 赞同：0
> 
> 时间：2012-10-24T00:39:04.793
> 
> 标签：android, android-mapview, fragment

我已经创建了一个地图片段，如此处所示[MapView in a Fragment (Honeycomb)](https://stackoverflow.com/questions/5109336)并且效果很好。

问题是当我在以下活动中有另一个地图片段时。

Activity A 有一个 MapFragment 占据了整个页面。Activity B 有一个 MapFragment，它只占页面的一半（下半部分有一个 ListFragment）。两者都可以正常工作，但是当我单击后退按钮从活动 B 回到 A 时，地图视图仅占据页面的一半，并且页面的下半部分出现刷新问题。

mapviews 状态也不是独立于另一个保存的。例如：从活动 A 到活动 B 时，地图显示相同。这可以。但是，如果用户在活动 B 中平移或缩放地图。当用户返回活动 A 时，地图不会回到活动暂停时的位置（这显然不是一个主要问题，因为我可以手动保存状态并重新定位。如果为我处理它会很方便）。

这是 Activity A 从 Activity B 返回后的样子 ![不正确的刷新地图视图](../Images/45ca4a5a1e0b44c774353e55e1e71be2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:41:01.800

您要求让您知道是否有更好的解决方案 - 现在有。Google 发布了[Android Maps API v2](https://developers.google.com/maps/documentation/android/)，它为您提供了`MapFragment`. 现在它应该像魅力一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:20:47.803

我找到了解决方案，但如果您能找到更好的解决方案，请告诉我。

问题是当活动 A 恢复时，它的片段并不意味着它们永远不会重绘并保持它在活动 B 中的大小。

为了解决这个问题，我必须将以下方法添加到 MapFragment 并从活动 onResume() 中调用它。这可确保调整地图的大小以占用其最初的空间。是的，这是一次大规模的黑客攻击，因此如果您找到一种方法来确保正确可靠地创建、销毁和恢复片段，请在此处发布答案。

```
/**
 * This method should be called in the activity containing the fragments onResume method
 * to ensure the mapview in this fragment has the expected size.
 *
 * @param width
 * @param height
 */
public void setMapViewSize(int width, int height){
    LayoutParams lp = new LayoutParams(width, height);
    myMapView.setLayoutParams(lp);
} 
```

只是为了澄清，当我说 MapFragment 时，我指的是扩展 MapActivity 的类，而不是加载包含地图的活动的类（扩展 ActivityHostFragment）。

# ruby-on-rails-3 - 如何在 activeadmin gem 中隐藏资源

> ID：13041404
> 
> 赞同：2
> 
> 时间：2012-10-24T00:39:13.200
> 
> 标签：ruby-on-rails-3, activeadmin, cancan

我使用activeadmin gem [http://activeadmin.info/](http://activeadmin.info/)创建了一个管理页面， 我使用cancan 来授权2 种用户的权限，用户管理和图书管理用户。

我的问题是：当书籍管理用户登录到管理页面时，我如何隐藏资源用户？ ![活跃的管理员](../Images/35ea92c6e505a37f51074762e27f1359.png)

我尝试了类似的方法，但没有用

```
 menu false  if can? :manage, BookHeader 
```

或者

```
 menu false  if authorize! :manage, BookHeader 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T08:51:22.123

您必须使用 proc 动态构建菜单

例子

动态标签

```
menu :label => proc{current_admin_user.admin? ? "Accounts" : "My Account"} 
```

**显示/隐藏**

```
 menu :if => proc{ can?(:manage, BookHeader ) } 
```

有关集成 AA 和 CanCan 的更多信息，请阅读本文

[https://github.com/gregbell/active_admin/wiki/How-to-work-with-cancan](https://github.com/gregbell/active_admin/wiki/How-to-work-with-cancan)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T11:47:30.770

我用这个：对我来说是adminuser的 *用户*，none admin user的*密码*

```
menu label: proc{I18n.t "#{current_user.is_admin? ? 'users':'password'}"} 
```

按照你的例子

```
menu label: proc{I18n.t "#{current_admin_user.admin? ? 'Accounts' : 'My Account'}"} 
```

会有所帮助

# ruby-on-rails - Ruby on Rails - 保存随机发票的策略 #

> ID：13041406
> 
> 赞同：0
> 
> 时间：2012-10-24T00:39:51.683
> 
> 标签：ruby-on-rails

所以，情况是这样的：

我有一个名为 invoice 的表，它有一个名为 invoice # 的列，每次将其保存到数据库之前，我都必须生成一个复杂的发票编号。此外，我还有另一个名为 invoice_item 的表，它将存储一堆项目。每个项目还有一个名为 invoice # 的列，用于声明该项目属于哪个发票。一张发票中的物品数量没有限制。

现在，我有两种策略来实现这一目标：

1.  我有一个名为 generateCode() 的函数来返回随机发票#。我会把它放在application_controller.rb中，并且每次我们尝试插入新发票时，invoice_controller中的“create”方法都会生成一个新的发票#，并将值传递给属于该发票的所有invoice_items .

2.  我将使用 ActiveRecord 回调函数：after_initialize，因此，当我们尝试新建一个发票实例时，也会创建发票#，并且很容易将值传递给项目列表。

似乎第二种方式有更多的逻辑，但它是否有可能导致性能问题？并且在大多数电子商务网站中，用户最有可能在提交购物清单后得到他们的发票#。所以我想知道做这类问题的典型方法是什么，更重要的是，为什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:13:15.167

`after_initialize`每次实例化 ActiveRecord 对象时都会运行，这意味着当您`invoice_items`从数据库中检索时，它们将获得新的发票编号（不是您想要的）。

您应该使用的回调是`before_create`，它将在新对象保存到数据库之前触发它们。

# c# - 如何根据第一条折线变换第二条折线

> ID：13041408
> 
> 赞同：3
> 
> 时间：2012-10-24T00:40:03.243
> 
> 标签：c#, .net, autocad

我有 2 条折线：我已经绘制了第一条折线并沿着这条折线挤出了一个区域。

在此之后，我需要处理第二条折线以从正确的位置开始（将第二条折线起点移动到第一条折线终点），但我无法将第二条折线转换为正确的方向。

![](../Images/5cb68cbe261ea95149222ebf74104ab5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T19:10:14.657

使用命令**3Drotate**或**rotate3D**（每个选择参数的方式略有不同）沿 y 轴旋转第二条折线或将 UCS 更改为 XZ 平面并使用**旋转**

另一种选择是使用**mirror3D**而不是复制折线

编辑：现在我注意到，你标记了你的问题 .NET 和 C#，所以正确的答案应该是折线对象上使用的**TransformBy**方法

# php - PHP脚本执行一段时间后停止，没有错误报告

> ID：13041411
> 
> 赞同：2
> 
> 时间：2012-10-24T00:40:40.620
> 
> 标签：php, mysql, sql, apache, wampserver

我有一个同时运行 4 个机器人的爬虫脚本，每个机器人都在一个新选项卡中打开，并且通常这样做：

1/ 连接到抓取所需的 db + set vars。
2/ 从 db 获取 URL 目标。
3/ 使用 CURL 或 file_get_content 获取内容。
4/ 使用 simple_html_dom 设置“$html”。
5/包括一个“引擎”来抓取和操纵内容。
6/ 最后 - 检查它是否正常并优化内容并将其存储在数据库中
7/ 为 X 链接执行此操作。X 链接后会刷新页面并继续爬取过程。

每件事都像魔术一样工作！但最近几分钟后（不是同一时间），所有机器人都
停止了（没有错误闪烁），有时只有 3 个......
有一个脚本可以设置时间间隔，每 Y 分钟刷新一次页面。如果它们被卡住，那就是让我的
机器人继续工作，但这不是解决这个问题的方法。

我已经检查了 apache 错误日志，它没有显示任何奇怪的东西。

你有什么主意吗？？？
收缩代码：（带注释）

```
ini_set('user_agent', 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5');
error_reporting(E_ALL);
include ("peulot/stations1.php");//with connection and vars
include_once('simple_html_dom.php');

//DEFINE VALUES:
/*
here vars are declared and set
*/

        echo "
            <script language=javascript>

            var int=self.setInterval(function(){ refresh2(); },".$protect.");

            var counter;

            function refresh2() { 
                geti();
                link = 'store_url_beta.php?limit_link=".$limit_link."&storage_much=".$dowhile."&jammed=".($jammed_count+=1)."&bot=".$sbot."&counter=';
                link = link+counter;
                window.location=link;
                } 

            function changecolor(answer)
                    {
                document.getElementById(answer).style.backgroundColor = \"#00FF00\";
                    }
            </script>";//this is the refresh if jammed

//some functions:
/*
function utf8_encode_deep --> for encoding
function hexbin --> for simhash fingerprint
function Charikar_SimHash --> for simhash fingerprint
function SimHashfingerprint --> for simhash fingerprint
*/              

        while ($i<=$dowhile)
            {

            //final values after crawling:
            $link_insert="";
            $p_ele_insert="";
            $title_insert="";
            $alt_insert="";
            $h_insert="";
            $charset="";
            $text="";
            $result_key="";
            $result_desc="";
            $note="";

            ///this connection is to check that there are links to crawl in data base... + grab the line for crawl.
            $sql = "SELECT * FROM $table2 WHERE crawl='notyet' AND flag_avoid $regex $bot_action";
            $rs_result = mysql_query ($sql); 
            $idr = mysql_fetch_array($rs_result);                           
            unset ($sql);
            unset ($rs_result);

              set_time_limit(0);

              $qwe++;

                    $target_url = $idr['live_link'];//set the link we are about to crawl now.
                    $matches_relate = $idr['relate'];//to insert at last
                    $linkid = $idr['id'];//link id to mark it as crawled in the end
                    $crawl_status = $idr['crawl'];//saving this to check if we update storage table or insert new row
                    $bybot_status = $idr['by_bot'];//saving this to check if we update storage table or insert new row

                    $status ="UPDATE $table2 SET crawl='working', by_bot='".$bot."', flag_avoid='$stat' WHERE id='$linkid'";
                    if(!mysql_query($status)) die('problem15');                 

                    $ch = curl_init(); 

                    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5'); 
                    curl_setopt($ch, CURLOPT_URL, $target_url); 
                    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
                    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
                    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
                    curl_setopt($ch, CURLOPT_HEADER, 0); 
                    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 

                    $str = curl_exec($ch); 
                    curl_close($ch);

                    if (strlen($str)<100) 
                            {
                            //do it with file get content
                            }               
        if (strlen($html)>500)
        {

                            require("engine.php");//GENERATE FATAL ERROR IF CRAWLER ENGINE AND PARSER NOT AVAILABLE

                        flush();//that will flush a result without any refresh
                        usleep(300);                                

                                //before inserting into table storage check if it was crawled before and then decide if to insert or update:
                                if ($crawl_status=="notyet"&&$bybot_status=="notstored")
                                            {
                                            //insert values
                                            }
                                            else
                                            {
                                            //update values
                                            }

                        flush();//that will flush a result without any refresh
                        usleep(300);

                        if ($qwe>=$refresh) //for page refresh call
                            { 
                            $secounter++;//counter for session
                            //optimize data                         
                            echo "<script type='text/javascript'>function refresh() { window.location='store_url_beta.php?limit_link=".$limit_link."&counter=".$i."&secounter=".$secounter."&storage_much=".$dowhile."&jammed=".$jammed."&bot=".$sbot."'; } refresh(); </script>";                          
                            }
            }//end of if html is no empty.
            else
            {//mark a flag @4 and write title jammed!

            //here - will update the table and note that its not possible to crawl

                        if ($qwe>=$refresh) 
                            { 
                            $secounter++;//counter for session
                            //optimize data                         
                            echo "<script type='text/javascript'>function refresh() { window.location='store_url_beta.php?limit_link=".$limit_link."&counter=".$i."&secounter=".$secounter."&storage_much=".$dowhile."&jammed=".$jammed."&bot=".$sbot."'; } refresh(); </script>";                          

                            }
            }//end of else cant grab nothing
            unset($html);
        }//end of do while
            mysql_close(); 
            echo "<script language=javascript> window.clearInterval(int); </script>"; 
```

**编辑：**
经过无尽的测试和记录方法（遵循杰克的建议）我什么也没找到！机器人停止时唯一发生的事情是在 apache 日志中：

```
 [Thu Oct 25 01:01:33 2012] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico
 zend_mm_heap corrupted
 [Thu Oct 25 01:01:51 2012] [notice] Parent: child process exited with status 1 -- Restarting.
 [Thu Oct 25 01:01:51 2012] [notice] Apache/2.2.22 (Win64) mod_ssl/2.2.22 OpenSSL/1.0.1c PHP/5.3.13 configured -- resuming normal operations
 [Thu Oct 25 01:01:51 2012] [notice] Server built: May 13 2012 19:41:17
 [Thu Oct 25 01:01:51 2012] [notice] Parent: Created child process 736
 [Thu Oct 25 01:01:51 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
 [Thu Oct 25 01:01:51 2012] [notice] Child 736: Child process is running
 [Thu Oct 25 01:01:51 2012] [notice] Child 736: Acquired the start mutex.
 [Thu Oct 25 01:01:51 2012] [notice] Child 736: Starting 200 worker threads.
 [Thu Oct 25 01:01:51 2012] [notice] Child 736: Starting thread to listen on port 80.
 [Thu Oct 25 01:01:51 2012] [notice] Child 736: Starting thread to listen on port 80.
 [Thu Oct 25 01:01:51 2012] [error] [client 127.0.0.1] File does not exist: C:/wamp/www/favicon.ico 
```

**这条线很神秘，我真的不知道该怎么办，请帮帮我！**
[Thu Oct 25 01:01:51 2012] [notice] 父进程：子进程以状态 1 退出——正在重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:36:18.267

找到这些问题的方法通常归结为简单的旧日志记录。

您应该让每个工作人员在可能很长的操作之前和之后将条目写入他们自己的日志文件，包括调试消息、行号、内存使用情况，以及您需要知道的任何内容；让它卡住几次并分析日志。

如果存在模式（即日志在同一点停止显示数据），您可以缩小搜索范围；如果没有，您可能正在处理内存问题或其他致命的崩溃。

它还有助于追溯您最近在设置中可能发生的更改，即使它看起来不相关。

# c - 在Linux C中将两个进程的标准输出重定向到另一个进程的标准输入

> ID：13041416
> 
> 赞同：4
> 
> 时间：2012-10-24T00:41:31.340
> 
> 标签：c, linux, redirect, stdout, stdin

我遇到了关于重定向多进程标准输出的问题。

假设我有进程 A，我在 A 中使用 fork()，然后得到进程 A 和 B。我在 B 中使用 fork()，最后得到进程 A、B 和 C。B 和 C 都通过执行（）。

现在，我尝试使用两个管道将 A 和 B 的标准输出重定向到 C 的标准输入。

```
#include<unistd.h>
#include<stdio.h>
#include<sty/types.h>
int main()
{
    int AtoC [2];
    pipe(AtoC);

    int fd1,fd2;
    fd1=fork();
    if(fd1>0)
    {
        /***In process A, I do the following steps: ***/
        close(AtoC[0]);
        dup2(AtoC[1], STDOUT_FILENO);
        /* program running in process A */
    }
    else
    {
        int BtoC [2];
        pipe(BtoC);
        fd2=fork();
        if(fd2>0)
        {
            /***In process B, I do the following steps: ***/
            close(AtoC[1]);
            close(BtoC[0]);
            dup2(BtoC[1], STDOUT_FILENO);
            /*** execute another program in process B using execl(); ***/
        }
        else
        {
            /*** In process C, I do the following steps: ***/
            close(AtoC[1]);
            close(BtoC[1]);
            dup2(AtoC[0],STDIN_FILENO);
            dup2(BtoC[0],STDIN_FILENO);
            /*** execute another different program in process C using execl(); ***/
        }
    }
} 
```

现在，在这两个语句之后：

```
dup2(AtoC[0],STDIN_FILENO);
dup2(BtoC[0],STDIN_FILENO); 
```

进程C的stdin最终重定向到`BtoC[0]`进程B的stdout。进程A的stdout没有传递到进程C的stdin。

我的问题是是否有任何解决方案可以让我同时将进程 A 和 B 的标准输出重定向到进程 C 的标准输入。

另一个问题是，如果我还想在屏幕上打印进程 A 的标准输出，我该怎么办？我知道`tee`命令行中的命令。我尝试`tee(int fd_in, int fd_out, size_t len, unsigned int flags)`在进程A中使用相应的函数，但是我没有打印出进程A的任何stdout。

任何建议表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T04:29:59.313

我不确定这是一个好主意，但它是完全可行的。关键的观察是你只需要*一个*管道。多个进程（具有共同的父进程）可以写入单个管道。但是，只能将一个文件描述符用作标准输入。在原始代码中，只有一个管道连接到 C 作为其标准输入（其他管道仍然连接，但主要是因为您没有关闭足够多的描述符）。

*   经验法则：如果通过`dup2()`（或`dup()`）将管道的一端连接到标准输入或标准输出，则应关闭由`pipe()`.

试试这个代码的大小。我已经减少了树的密集度，删除了未使用的变量（没有使用返回的进程 ID `fork()`），重命名管道，确保它在每个进程中正确关闭，并在进程 A 和 B 中提供了一些写入活动和一些读取进程 C 中的活动代替运行命令。我假设`usleep()`（微睡眠，睡眠时间以微秒表示）可用；如果没有，请尝试`nanosleep()`，但它的界面更复杂）。

```
#include <unistd.h>

int main(void)
{
    int ABtoC[2];
    pipe(ABtoC);

    if (fork() > 0)
    {
        // Process A
        close(ABtoC[0]);
        dup2(ABtoC[1], STDOUT_FILENO);
        close(ABtoC[1]);     // Close this too!
        // Process A writing to C
        for (int i = 0; i < 100; i++)
        {
            write(STDOUT_FILENO, "Hi\n", sizeof("Hi\n")-1);
            usleep(5000);
        }
    }
    else if (fork() > 0)
    {
        // Process B
        close(ABtoC[0]);
        dup2(ABtoC[1], STDOUT_FILENO);
        close(ABtoC[1]);
        // Process B writing to C
        for (int i = 0; i < 100; i++)
        {
            write(STDOUT_FILENO, "Lo\n", sizeof("Lo\n")-1);
            usleep(5000);
        }
    }
    else
    {
        char buffer[100];
        ssize_t nbytes;
        close(ABtoC[1]);
        dup2(ABtoC[0], STDIN_FILENO);
        close(ABtoC[0]);
        // Process C reading from both A and B
        while ((nbytes = read(STDIN_FILENO, buffer, sizeof(buffer))) > 0)
            write(STDOUT_FILENO, buffer, nbytes);
    }
    return(0);
} 
```

在我的 Mac（Mac OS X 10.7.5，GCC 4.7.1）上运行的结尾产生：

```
Lo
Hi
Lo
Hi
Lo
Hi
Lo
Hi
Lo
Hi
Hi
Lo
Lo
Hi
Hi
Lo
Hi
Lo
Hi
Lo
Hi
Lo
Hi
Lo
Lo
Hi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T13:29:52.967

跟进管道共享，您可能需要检查[is-it-safe-to-pipe-the-output-of-several-parallel-processes](https://stackoverflow.com/questions/2443786/is-it-safe-to-pipe-the-output-of-several-parallel-processes-to-one-file-using/14293688#14293688)。对于小型写入工作没问题，但对于大型写入数据可以交错=）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T01:06:29.233

> 如何将两个输出管道末端重定向到一个输入管道末端。

我也不知道它是如何工作的，并等待操作的其他答案。但是，或者，您可以使用`epoll`-like 异步 I/O。进程 A 不需要阻塞进程 B/C 的输出。数据可用时处理 A 读取。

> 我无法打印进程 A 的任何标准输出。

该`man`页面有一个很好的示例如何使用`tee`，仅供您参考。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-24T03:58:55.790

这不可能。关于管道的整个想法是它有两个端 - 一个连接到您的进程，比如进程 A，另一个属于另一个进程，比如 C。如果其他进程想要创建另一个管道，它也必须有 2 个端，并且不可能2端在一个孔中结束。

当你这样做时：

```
dup2(AtoC[0],STDIN_FILENO);
dup2(BtoC[0],STDIN_FILENO); 
```

第二行有效地覆盖了第一行。dup2(oldfd, newfd) 应该关闭 newfd 并使其有效地与 oldfd 相同。因此，第一行将其插入，但第二行将其拔出并插入不同的东西。

# c# - 有没有办法在 DevExpress GridView winforms 中自动格式化一行？

> ID：13041417
> 
> 赞同：1
> 
> 时间：2012-10-24T00:41:37.277
> 
> 标签：c#, gridview, devexpress, autoformatting

我有一个绑定到具有`foo`对象集合的 BindingList 的 DevExpress GridControl。

`foo`有以下成员：

`string name;` 和

`int qty;`

（ofc 属性有 get/setters 和 implement `INotifyPropertyChanged`）

我想要完成的是假设数量更改为值<0。有没有办法设置自动格式化（如果数量> 0，行颜色=绿色，如果<0，则为红色）。

显然，一种方法是设置一个事件来捕获每个数据更改，然后根据这种条件进行评估，然后格式化，但我认为应该有一种更简单的方法？有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:40:17.170

您可以通过设置[样式格式条件](http://documentation.devexpress.com/#WindowsForms/CustomDocument759)来做到这一点，这可以在设计器中或通过代码完成。

在代码中设置：

```
var condition1 = new StyleFormatCondition(FormatConditionEnum.Greater, gridColumnQty, null, 0);
condition1.Appearance.BackColor = Color.Green;
condition1.ApplyToRow = true;
gridView1.FormatConditions.Add(condition1);

var condition2 = new StyleFormatCondition(FormatConditionEnum.Less, gridColumnQty, null, 0);
condition2.Appearance.BackColor = Color.Red;
condition2.ApplyToRow = true;
gridView1.FormatConditions.Add(condition2); 
```

# jquery - 如何解决 jQuery 和 mooTools 之间的 $ 冲突？

> ID：13041420
> 
> 赞同：3
> 
> 时间：2012-10-24T00:42:13.483
> 
> 标签：jquery, mootools

好吧，我已经在一个朋友的网站上工作了很长一段时间。我的编码技能是有问题的，而且我遇到了很多问题。

目前，我网站上的 jQuery 只是停止工作，我找不到原因，我已尽我所能尝试让它工作。（我在互联网上遵循了无数指南，用于故障排除等，但我仍然无法让它工作）

然后在仔细查看错误后，使用浏览器控制台我发现 mootools 和 jQuery 在`$`.

我一直在尝试使用`jQuery.noConflict()`，但我似乎无法弄清楚如何使用它。

有人可以帮我吗？

此致，马尔莫克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:45:06.930

调用后，[`jQuery.noConflict()`](https://api.jquery.com/jQuery.noConflict/)您只需将 jQuery 对象引用为`jQuery`而不是`$`. 您的代码需要更新以反映这一点：

```
$(document).ready(); 
```

会成为

```
$.noConflict();
jQuery(document).ready(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T00:47:25.720

调用`$.noConflict()`后，您将继续使用`jQuery`。如果您想继续使用`$`，可以使用闭包来实现：

```
// Free-up $
$.noConflict();
// Use jQuery as '$' safely
(function($){
    // Fire on ready
    $(function(){
        alert( "Page loaded" );
    });
})(jQuery); 
```

这可以防止任何外部代码篡改`$`闭包内的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T00:47:40.737

jQuery.noConflict() 将 $ 的值恢复为之前的值。

`jQuery`这意味着从那时起您将不得不使用来引用 jQuery。

继续使用 jQuery 作为 $ 的一种巧妙方法是执行以下操作：

```
(function ($) {
    // $ is actually jQuery here
    $(document).ready(function () {

    })
}(jQuery)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T00:47:10.300

一个简单的解决方案是像这样包装你的 jQuery 代码：

```
(function($)
    $(document).ready(function() {
        $('#myelementID').fadeIn(399);

        //do other jQuery stuff ....
    });
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T00:47:25.650

$ = jQuery

jQuery = $

您遇到的 $ 碰撞，

```
A. Drop Mootools or Jquery
B. Use jQuery('selector') instead of $()
C. Reference the $ to something else, buckWildProgramming = $ 
```

希望有帮助。

# string - 在运行时使用 entityframework 获取列名

> ID：13041422
> 
> 赞同：2
> 
> 时间：2012-10-24T00:42:23.670
> 
> 标签：string, entity-framework-5

我有一个运行的存储过程并将结果集返回到模型中（使用 EF 5）。

当我遍历结果集时，**我只想获取模型中用于保存数据的列的名称。**

我怎样才能做到这一点？

会不会像下面这样：

```
var myCustomers = DbContext.Database.SqlQuery<Customer>
                                      ("exec SelectCustomers").ToList();

                    foreach (Customer cust in myCustomers)
                    {

                    } 
```

在运行时显示值“ **myCustomers[0].Address1** ”将显示该字段内的**实际值**，**但我怎样才能简单地提取列名**？

如果我尝试以下类似的操作，索引值**始终**为-1，我不知道我错过了什么。我已经用了几十次了。

```
int Idx = myCustomers[0].Address1.IndexOf(".").ToString();
"-1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:38:05.737

我认为你不能可靠地做到这一点。EF 由 3 层组成 - 对象层（也称为 O-Space - 您的类型）、概念层（也称为 C-Space - EDM 术语中的模型）和存储层（也称为描述数据库的 S-Space）。O-Space 和 S-Space 之间的映射或多或少是 1:1 - 因此类上的属性映射到 OSpace 模型中的实体属性。然而，有一些将 C-Space 映射到 S-Space 的策略，例如按层次结构表 (TPH)、按类型表 (TPT)、按具体类型表 (TPC) 和实体拆分（您可以在此处找到更多详细信息：[http： //blogs.msdn.com/b/adonet/archive/2010/10/25/inheritance-mapping-a-walkthrough-guide-for-beginners.aspx](http://blogs.msdn.com/b/adonet/archive/2010/10/25/inheritance-mapping-a-walkthrough-guide-for-beginners.aspx)）。也可以将您自己的名称用于与数据库中相应列的名称不同的属性。在最简单的情况下，属性名称将匹配列名称，但通常情况并非如此。在运行时，有关映射的信息是存储类型，这些类型大多是内部的，您无法访问它们。有关映射的信息是从描述 C 空间和 S 空间之间的映射的 Msl 工件中填充的。您可以尝试解析这个工件（它是一个 Xml 文件），但如果您需要支持所有不同的映射策略，这并不是一件容易的事。

# gjs - 我应该使用 JavaScript 来开发 Linux（GNOME 和 Gtk）应用程序吗？

> ID：13041424
> 
> 赞同：4
> 
> 时间：2012-10-24T00:42:35.173
> 
> 标签：gjs

我已经使用 Gtk+ 和 GNOME API 完成了 Python 和 C 应用程序，现在我看到由于 GJS（我还听说过种子）在 GNOME 3 中支持 JavaScript。

所以，我不得不问：值得吗？我只是想知道 GJS 是否已经引起了人们的关注并且将来不会被弃用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T04:55:56.133

gjs 被用作 GNOME 3 中的 gnome-shell 和[GNOME Shell 扩展](http://extensions.gnome.org)的基础，因此它不太可能消失或被弃用，实际上一直在[不断改进，](http://git.gnome.org/browse/gjs/log/)所以我看不出有任何理由不这样做如果它适合您的目的，请使用它。

# c# - Teamcity v7.0.2 - 应用补丁时无法删除结帐目录文件

> ID：13041430
> 
> 赞同：12
> 
> 时间：2012-10-24T00:43:23.123
> 
> 标签：c#, teamcity

一位开发人员正在向 CI 应用补丁并破坏了 CI 构建。错误发生在构建日志中，如下所示。我已经完成了以下步骤，但仍然无法正常工作。

1.  我无法手动删除文件夹：35b0f615bcea75bd，尽管我对构建代理目录具有完全的写入和删除权限。
2.  我试图运行强制干净结帐，仍然无法正常工作。
3.  重新运行构建，仍然无法正常工作。

问题：

1.  手动删除此文件是修复以下错误的最佳解决方案吗？
2.  如果答案是“是”，我接下来应该尝试什么来删除此文件？
3.  应用补丁时防止此错误再次发生的最佳方法是什么？

构建日志：

```
[18:32:28]Checking for changes
[18:35:15]Publishing internal artifacts
[18:35:15]Clearing temporary directory: D:\TeamCity\buildAgent\temp\buildTmp
[18:35:15]Checkout directory: D:\TeamCity\buildAgent\work\35b0f615bcea75bd
[18:35:15]Updating sources: server side checkout (2m:09s)
[18:35:16][Updating sources] Will perform clean checkout. Reason: Agent doesn't have any version of the project sources
[18:35:16][Updating sources] Building clean patch for VCS root: ProjectName Trunk
[18:37:24][Updating sources] Transferring cached clean patch for VCS root: ProjectName Trunk
[18:37:25][Updating sources] Repository sources transferred: 27.61Mb total
[18:37:25][Updating sources] Removing D:\TeamCity\buildAgent\work\35b0f615bcea75bd
[18:37:25][Updating sources] Error while applying patch: Failed to delete: D:\TeamCity\buildAgent\work\35b0f615bcea75bd\ProjectName\bin\Debug
[18:37:25]Publishing internal artifacts
[18:37:25]Build failed to start. Artifacts will not be published for this build
[18:37:26]Build finished 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T05:11:49.760

我们在运行 Selenium 测试时遇到了这个问题，并且浏览器没有正确关闭。我们实际上创建了一个 powershell 脚本，我们将其作为构建在我们的任何代理上执行，它将杀死任何未完成的 IE 或 Firefox 或 Chrome 进程。我们还确保我们的测试总是在拆解时关闭浏览器。

如果您有足够的权限，您可以从 TeamCity Web 界面远程重新启动构建代理。您可以通过单击顶部的“代理”选项卡，选择有问题的代理，然后选择“重新启动代理机器”。您可以在[TeamCity 文档](http://confluence.jetbrains.net/display/TCD7/Viewing+Build+Agent+Details)中阅读更多内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T07:47:02.630

问题 1\. 是的，删除文件夹是解决当前情况的最佳选择。

问题2。每当我遇到这样的问题时，都是因为文件夹中有一个正在使用的文件无法删除。因此，我建议您使用TeamCity 服务器上的[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)之类的工具来确定正在使用的文件。

问题 3。一旦你弄清楚了正在使用的东西，你就需要弄清楚为什么要再次停止它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T19:00:31.373

1.在我的情况下，是文件夹本身被锁定。TC 给出错误：[TEAMCITY TEMPLATE ERROR] 和“创建目录失败；已记录错误消息。”

2.使用 Unlocker 工具，我能够看到并修复“系统”对文件夹进行了锁定。这可能是由于 Teamcity 构建后没有正确清理吗？

3.如果是这样，看来我应该尝试使用 [Swabra][1] 插件来确保这种情况不会再次发生。

[1] [http://confluence.jetbrains.com/display/TCD6/Adding+Swabra+as+a+Build+Feature](http://confluence.jetbrains.com/display/TCD6/Adding+Swabra+as+a+Build+Feature)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-12T13:44:26.980

仅作记录:) 重新启动代理机器-> 这会重新启动机器（如书面的大声笑），而不仅仅是代理 :) ...这解决了我的问题。该文件夹可能已被某个进程锁定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-01T03:51:25.583

扩展@cezarypiatek 的答案：

如果您无权登录机器，可以尝试添加运行以下的 Powershell 构建步骤：

```
Get-Process chromedriver | kill
Get-Process chrome | kill 
```

确保即使构建失败，也将步骤设置为运行。

然后您可以禁用此步骤，以备下次出现此步骤时使用。

# java - 间歇性地得到“sqlexception 无效的列索引”

> ID：13041432
> 
> 赞同：1
> 
> 时间：2012-10-24T00:43:28.587
> 
> 标签：java, oracle, tomcat

> **可能重复：**
> [以下 Oracle 错误是什么意思：列索引无效](https://stackoverflow.com/questions/5969081/what-does-the-following-oracle-error-mean-invalid-column-index)

我正在运行带有 tomcat jdbc 连接池和 oracle 数据库的 tomcat 7。运行某些查询时，我间歇性地看到“sqlexception 无效列索引”异常。当同一查询在很短的时间内运行很多时间时，通常会发生这种情况。

# refinerycms - “找不到 JavaScript 运行时。” 在执行refinerycms 命令期间

> ID：13041435
> 
> 赞同：2
> 
> 时间：2012-10-24T00:43:42.583
> 
> 标签：refinerycms

我正在开发 Ubuntu 12.04。

我正在尝试使用 Refinery CMS 创建一个新网站。我阅读[了官方的入门指南](http://refinerycms.com/guides/getting-started)，并执行了以下命令。

```
$ refinerycms rickrockstar 
```

但我收到以下错误消息：

```
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
        rake db:create
rake aborted!
Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes.

(See full trace by running task with --trace)
    generate refinery:cms --fresh-installation
/home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
        from /srv/samba/share/refinery2test/rickrockstar/config/application.rb:13:in `<top (required)>'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.8/lib/rails/commands.rb:24:in `require'
        from /home/jharai/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.8/lib/rails/commands.rb:24:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

我已将[整个输出粘贴到](https://gist.github.com/3942771)Gist 上，因为它太长了。

奇怪的是，几天前我尝试了相同的命令，当时一切正常。

为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:33:14.903

也许您可以`sudo apt-get install nodejs`或看到这篇文章[ExecJS 并且找不到 JavaScript 运行时](https://stackoverflow.com/questions/6282307/execjs-and-could-not-find-a-javascript-runtime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:51:52.090

为了解决它，我做了：

*   运行**refinerycms rickrockstar** - 它会失败，但您描述的异常
*   编辑`rickrockstar/Gemfile`和取消注释`*gem 'therubyracer', :platforms => :ruby*`并保存更改；
*   再次运行**炼油厂cms rickrockstar**
*   Gemfile 会发生冲突并询问您是否要*覆盖*它。回答不；
*   覆盖其他有冲突的文件
*   **cd rickrockstar**
*   **导轨**

# sql - 给定任意数量条件的 INTERSECT 的替代方案

> ID：13041437
> 
> 赞同：1
> 
> 时间：2012-10-24T00:43:55.960
> 
> 标签：sql, sql-server

如果我有一个类似于以下的表：

```
MyIds MyValues
----- --------
  1    Meat
  1    Fruit
  1    Veggies
  2    Fruit
  2    Meat
  3    Meat 
```

如何创建一个查询，以便如果给定一个 distinct 的任意列表`MyValues`，它将给我所有`MyIds`匹配**all** of 的`MyValues`.

示例：如果`MyValues`包含 [Meat, Fruit, Veggies] 的列表，我想返回`MyIds`，`1`因为`1`MyValues 中的每个值在表中都有一个条目。

我知道如果给我一个特定的`MyValues`. 但我不知道如何用任意数量的`MyValues`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:46:07.603

`MyID`您需要计算每个满足条件并且与`IN`子句中提供的值的数量相匹配的实例的总数。

```
SELECT MyID
FROM tableName
WHERE MyValues IN ('Meat', 'Fruit', 'Veggies')
GROUP BY MyID
HAVING COUNT(DISTINCT myVAlues) = 3 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/860dd/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:50:16.600

一个大问题是列表是如何表示的。下面给出了一种方法，以表格形式表示列表：

```
with l as ( 
    select 'Meat' as el union all
    select 'Fruit' union all
    select 'Veggies'
)
select MyId
from t join
     l
     on t.MyValues = l.el
group by MyId
having count(distinct t.myvalues) = (select count(*) from l) 
```

# firefox - console.log 没有显示在我的萤火虫中

> ID：13041438
> 
> 赞同：7
> 
> 时间：2012-10-24T00:44:02.270
> 
> 标签：firefox, logging, console, firebug, jsfiddle

在[jsfiddle.net](http://jsfiddle.net/T9AYR/)，我有这个简单的代码：

```
console.log('yep');
alert('hello'); 
```

我可以看到警报窗口，但在我的`firebug`控制台中什么也没有。

有什么原因吗？

![在此处输入图像描述](../Images/520c251fd110a6f4f32eb4e7fb294f93.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T11:39:59.757

我的FF15也遇到过。就我而言，这是由“Web 开发人员”Ctrl+Shift+K 中内置的“Web 控制台”引起的

[https://developer.mozilla.org/en-US/docs/Tools/Web_Console](https://developer.mozilla.org/en-US/docs/Tools/Web_Console)

> 从 Firefox 4 开始，旧的错误控制台已被弃用，取而代之的是新的改进的 Web 控制台。Web 控制台是 Web 的平视显示器，可让您查看错误消息和其他记录信息。此外，您可以调用一些方法将信息输出到控制台，使其成为有用的调试辅助工具，并且您可以即时评估 JavaScript。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T11:58:28.740

我是使用 console.log 的新手（我曾经使用 alert()s）并且想知道为什么我在 Firebug 中也看不到 console.log 消息。

经过几分钟的网络搜索，我意识到控制台模式设置为“调试信息”。单击“全部”按钮会显示我的所有消息。

诚然，OP没有犯这个特殊的错误。这是一个新手错误，但仍然不够明显（我有一段时间没有使用 Firebug）在我设法弄明白之前把我带到这里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T22:27:28.430

此问题已在[Firebug 1.11.0a5](https://getfirebug.com/releases/firebug/1.11/firebug-1.11.0a5.xpi)中得到修复。更多信息在[这里](http://code.google.com/p/fbug/issues/detail?id=5954)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-21T11:32:04.180

我刚刚遇到了与 firefox 29 Beta （和 Australis）相同的问题只需重新启动浏览器 :) 编辑：似乎它不是真的：在第一页加载时，它显示日志，在其他页面上不显示（需要打开页面在新标签中）。显然是 queryLoader2 jQuery 插件

# javascript - 单击选择选项时，使下拉菜单消失

> ID：13041442
> 
> 赞同：1
> 
> 时间：2012-10-24T00:44:15.530
> 
> 标签：javascript, jquery, html

我有几个表单元素，当点击更新数据库并消失时。

起初，我有一个按钮，上面写着**Check In**。单击它后，数据库将更新，并显示一个下拉列表来代替按钮。在下拉列表中，有一些位置供用户选择，它们具有相应位置编号的值，单击更新数据库即可。最后一个选项标记为**Check Out**，单击它后，数据库应该最后一次更新，然后应该出现红色文本**Checked Out 。**

这是我的代码：

```
<button class="checkIn">Check In</button>

<form method='post' class='myForm' action=''>

<td>
<select name='locationSelect' class='locationSelect'>
    <option value='1'>Exam Room 1</option>
    <option value='2'>Exam Room 2</option>
    <option value='3'>Exam Room 3</option>
    <option value='4'>Exam Room 4</option>
    <option value='CheckOut'>Check Out</option>
</select>
</form> 
```

这是jquery

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>

<script type="text/javascript">
$(document).ready(function() {    
    $('.locationSelect').hide();
    $('.finished').hide();
});

$('.checkIn').click(function(){
    $e = $(this);
    $.ajax({
    type: "POST",
    url: "changeloc.php",
    data: "checkIn="+$(this).val(),
    success: function(){
      $('.checkIn').css("display","none");
      $('.locationSelect').show();

    }
    });
});

$('.locationSelect').change(function(){
    $e = $(this);
    $.ajax({
       type: "POST",
       url: "changeloc.php",
       data: "locationSelect="+$(this).val(),
       success: function(){

       }
    });
});
$('.locationSelect option[value="CheckOut"]').click(function(){
    $e = $(this);
    $.ajax({
       type: "POST",
       url: "changeloc.php",
       data: "checkOut="+$(this).val(),
       success: function(){
       $('.locationSelect').css("display","none");
       $('.finished').show();
       alert('done');
       },
       error: function(request){
       alert(request.responseText);
       }
    });
});

</script> 
```

**问题是在用户点击Check Out**之前一切正常，然后红色文本不会出现，下拉菜单也不会消失。有什么问题？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:59:53.777

在下拉选择列表中设置**结帐按钮是不对的。**这些列表用于*选项*，而不是命令。

为什么你在列表之后没有一个结帐按钮，并且是隐藏的

```
<button class="checkOut" style="display:none;" value="Check Out" /> 
```

这样，一旦您的房间列表被填充，您只需将结帐按钮设置为再次**可见**。这意味着页面逻辑流程（签入-选择-签出）。

对于红色文本，将下拉列表替换为这样的内容？

```
$(".checkOut").click(function(e) {
  $(".locationSelect").html("<p style='color:red'>Checked out!</p>");
}); 
```

只是思考的食物。

或者，您可以检查`$('.locationSelect').change()`处理程序中的选定选项。

```
$('.locationSelect').change(function(e) {
  if($(this).children(":selected").val() === "CheckOut") {
    // Perform checkout logic.
  }
  else {
    // Perform room select logic.
  }
}); 
```

# c - C 中的 UDP 套接字 - 设置错误？

> ID：13041446
> 
> 赞同：1
> 
> 时间：2012-10-24T00:44:45.670
> 
> 标签：c, sockets, udp

我正在开发一个项目，该项目涉及通过 UDP 向服务器发送各种请求。但是，我似乎完全错误地设置了套接字，因为服务器没有响应我的任何请求。我们提供了一个服务器二进制文件进行测试，下面的代码没有引起任何响应。我是否正确设置了 UDP 套接字？如果是这样，我是否以某种方式使用 sendto 错误？我已确认我发送的位数正确。

程序的输入是：`./client [URL] [port] [username]`，我总是用`./client localhost 8080 user`. 这是我要发送的结构和代码。

```
struct request_login {
    int req_type; /* = REQ_LOGIN */
    char req_username[32];
} packed; 
```

代码：

```
struct sockaddr_in sa;
int sockfd = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);
if(sockfd == -1){
   printf("Could not create socket.");
   exit(EXIT_FAILURE);
}

// Prepare the socket address
memset(&sa, 0, sizeof sa);
sa.sin_family = AF_INET;
sa.sin_addr.s_addr = inet_addr(argv[1]);
// Convert to network order
sa.sin_port = htonl(atoi(argv[2]));

// Assemble and send login request
struct request_login * reqlogin = (struct request_login *) malloc(sizeof(struct request_login));
reqlogin->req_type = REQ_LOGIN;
strcpy(reqlogin->req_username, argv[3]);

int res = sendto(sockfd, reqlogin, sizeof (struct request_login), 0, (struct sockaddr*)&sa, sizeof sa);
free(reqlogin) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:48:41.977

嗯？

这：

```
sa.sin_addr.s_addr = inet_addr(argv[1]); 
```

如果如您所说，`argv[1]`通常是`"localhost"`. 您需要查找主机名，以便获得 IP 地址。您只能`inet_addr()`在输入是点 IP 地址而不是主机名时使用。

看`[getaddrinfo()](http://linux.die.net/man/3/getaddrinfo)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T07:49:20.997

在重新阅读您的代码几次之后，我想我知道错误的原因之一可能是：

```
sa.sin_port = htonl(atoi(argv[2])); 
```

端口号是 a`short`所以你应该使用它`htons`。它非常小，很容易错过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:03:05.653

试试这个：

```
struct addrinfo hint;
memset(&chk,0,sizeof(chk));
hint.ai_family = AF_INET;
hint.ai_socktype = SOCK_DGRAM;
hint.ai_protocol = IPPROTO_UDP;

struct addrinfo* servAddr = NULL;
int ret = getaddrinfo(argv[1],atoi(argv[2]),&hint,&servAddr);
if (-1 == ret)
{
  perror("getaddrinfo failed");
  exit(EXIT_FAILURE);
}

int sockfd = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);
if(sockfd == -1){
   printf("Could not create socket.");
   exit(EXIT_FAILURE);
}

// Assemble and send login request
struct request_login reqlogin;
reqlogin.req_type = REQ_LOGIN;
strcpy(reqlogin.req_username, argv[3]);

int res = sendto(sockfd, &reqlogin, sizeof (struct request_login), 0, servAddr->ai_addr, servAddr->ai_addrlen); 
```

# ios - 如何配置多语言元数据和关键字

> ID：13041447
> 
> 赞同：0
> 
> 时间：2012-10-24T00:44:50.430
> 
> 标签：ios, localization

我的应用程序已本地化为多种语言，并将在全球范围内分发。我无法理解如何插入适用于它将出现的许多商店的每种语言的元数据和关键字。我错过了什么？

如果我尝试将多种语言的元数据和关键字全部插入我为每种语言看到的一个字段中，我似乎将用完允许的字符数。还有另一种方法可以做到这一点吗？

我了解一旦提交/上传应用程序，关键字将无法更改。如果我想本地化我的关键字，我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:20:08.577

您可以随时编辑您的元数据。登录到itunesconnect->管理应用程序->选择您的应用程序->单击查看详细信息。在应用详细信息页面中，您有一个“元数据和上传”部分。在章节标题旁边有一个`edit`按钮，它允许您编辑元数据中的一些细节。![在此处输入图像描述](../Images/b4e382b16e9aeaaf390d39315abdb99d.png)

您还可以添加不同语言的元数据。首先，您必须从右侧的下拉菜单中选择您的语言。在这里它将列出您的应用支持的语言。此值取自您应用的 info.plist（表示您在本地化中添加的语言是什么）。从下拉列表中选择任何语言，然后按`edit`按钮。您可以在此处添加该语言的元数据，它将显示在特定商店中

# traceroute - Traceroute 打印星号

> ID：13041451
> 
> 赞同：8
> 
> 时间：2012-10-24T00:45:07.703
> 
> 标签：traceroute

我正在尝试使用`traceroute`unix 程序来查找到主机的路由。

我试过`traceroute www.google.com`了，最后只看到打印的星号。互联网上的示例使用相同的命令，并且似乎运行良好。我尝试使用开关增加`waitime`值。`-w`还是不行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-20T08:02:33.147

好吧，差不多一年后你就会得到答案。我个人也想知道同样的事情，所以我做了一些谷歌搜索，并 [在网站管理员上找到了这个答案。](https://webmasters.stackexchange.com/questions/17793/what-does-an-asterisk-star-in-traceroute-mean)

> 如果在预期的超时时间内没有确认数据包，则会显示一个星号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-12T20:57:44.810

我发现这`traceroute -I`给出了更完整的结果。

```
 -I, --icmp
          Use ICMP ECHO for probes 
```

# oracle - 监控索引使用情况

> ID：13041453
> 
> 赞同：5
> 
> 时间：2012-10-24T00:45:30.177
> 
> 标签：oracle, oracle10g, oracle11g, oracle9i

有没有办法在执行查询时查找 Oracle 是否曾经使用过特定的 Oracle 索引？

我们有一个基于函数的索引，我怀疑它没有被 Oracle 使用，因此一些查询运行缓慢。我怎样才能知道是否有针对数据库运行的查询正在使用此查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T07:46:53.490

如果问题是：是否有任何使用过索引的查询？

```
ALTER INDEX myindex MONITORING USAGE; 
```

等待几天/几个月/几年：

```
SELECT *
FROM   v$object_usage
WHERE index_name = 'MYINDEX'; 
```

[http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes004.htm#i1006905](http://docs.oracle.com/cd/B28359_01/server.111/b28310/indexes004.htm#i1006905)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T01:56:19.513

如果您使用某种 IDE（例如 Oracle 的 SQL Developer、Allround Automations 的 PL/SQL Developer、Toad 等），它们中的每一个都有某种方式来转储语句的计划 - 在菜单中四处寻找在线帮助。

如果您可以进入 SQL*Plus（尝试在友好的命令行中键入“sql”），您可以打开自动跟踪，执行您的语句，并且应该打印计划。如在

```
SQL> set autotrace on
SQL> select * from dept where deptno = 40;
    DEPTNO DNAME          LOC
---------- -------------- -------------
        40 OPERATIONS     BOSTON

Execution Plan
----------------------------------------------------------
   0      SELECT STATEMENT Optimizer=CHOOSE (Cost=1 Card=1 Bytes=18)
   1    0   TABLE ACCESS (BY INDEX ROWID) OF 'DEPT' (Cost=1 Card=1 Bytes=18)
   2    1     INDEX (UNIQUE SCAN) OF 'PK_DEPT' (UNIQUE)

Statistics
----------------------------------------------------------
          0  recursive calls
          0  db block gets
          2  consistent gets
          0  physical reads
          0  redo size
        499  bytes sent via SQL*Net to client
        503  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
          1  rows processed 
```

这假设您的友好邻居 DBA 已执行必要的咒语以启用此功能。如果这还没有完成，或者您只是想要另一种方式 (tm) 来执行此操作，请尝试以下类似的操作，替换您关心的查询：

```
SQL> EXPLAIN PLAN FOR select * from dept where deptno = 40;
Explained.

SQL> set linesize 132

SQL> SELECT * FROM TABLE( dbms_xplan.display);

PLAN_TABLE_OUTPUT
---------------------------------------------------------------------------------------
Plan hash value: 2852011669

---------------------------------------------------------------------------------------
| Id  | Operation                   | Name    | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |         |     1 |    20 |     1   (0)| 00:00:01 |
|   1 |  TABLE ACCESS BY INDEX ROWID| DEPT    |     1 |    20 |     1   (0)| 00:00:01 |
|*  2 |   INDEX UNIQUE SCAN         | PK_DEPT |     1 |       |     0   (0)| 00:00:01 |
---------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - access("DEPTNO"=40)

14 rows selected. 
```

分享和享受。

# c++ - 强制向量中的权重总和为 100

> ID：13041454
> 
> 赞同：0
> 
> 时间：2012-10-24T00:45:30.660
> 
> 标签：c++, vector, double

我需要填充一个向量，使其包含权重总和，其中总和**必须**为 100。换句话说，项目数等于除数，其值是商，以确保**（强制）**总和的向量等于 100。

像这样：100/3=3.333333...

```
vector[0]=33.33
vector[1]=33.34
vector[2]=33.33 
```

总和必须正好是 100（某种选择性舍入？）另一个例子：100/6 = 16.66666667

```
vector[0]=16.67
vector[1]=16.67
vector[2]=16.66
vector[3]=16.67
vector[4]=16.67
vector[5]=16.66 
```

我曾在杂货店看到过类似的情况，其中的商品售价可能是 11 美元 3 件，因此收银机显示的价格为 3.67、3.66 等。

**这些值加起来必须正好是 100，尽管**我想用 epsilon 来做这件事，但那是行不通的。

```
const int divisor = 6;
const int dividend = 10;

std::vector<double> myVec;
myVec.resize(6);

for (int i = 0; i < divisor; ++i)
{
    ...some magic that I don't know how to do
} 
```

**编辑：**客户希望以固定在小数点后两位的值存储（和显示）的值，以直观地看到它们加到 100。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T00:52:08.070

就像评论说的那样，以美分存储钱。

```
#include <vector>
#include <iostream>
#include <iomanip>

std::vector<int> function(int divisor, int total) {
    std::vector<int> myVec(divisor);
    for (int i = 0; i < divisor; ++i) {
        myVec[i] = total/divisor; //rounding down
        if (i < total%divisor) //for each leftover
           myVec[i] += 1; //add one of the leftovers
    }
    return myVec;
}

void print_dollars(int cents) {
    std::cout << (cents/100) << '.';
    std::cout << std::setw(2) << std::setfill('0') << (cents%100) << ' ';
}

int main() {
   std::vector<int> r = function(6, 10000);
   int sum=0;
   for(int i=0; i<r.size(); ++i) {
       print_dollars(r[i]);
       sum += r[i];
   }
   std::cout << '\n';
   print_dollars(sum);
}
//16.67 16.67 16.67 16.67 16.66 16.66 
//100.00 
```

当你将 100 除以 6 时，你得到 16，剩下 4 个。这会将剩下的 4 个放在向量的前四个插槽中。编译证明：http: [//ideone.com/jrInai](http://ideone.com/jrInai)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T00:52:11.877

没有一种“正确”的方法可以做到这一点。一个开始的地方是将向量的内容相加，并找出 100 与您获得的结果之间的差异。您如何将其折叠到单个项目中本质上是一种启发式方法。您可以采取以下几种路线：

1.  将您找到的差除以向量中的元素数添加到向量中的每个元素。这样做的好处是，它会以尽可能小的方式影响单个值，以实现您的约束。
2.  您可能只想将差异添加到向量中的第一个或最后一个元素。这样做的好处是修改了向量中最少数量的元素。
3.  您可能希望在向量中列出一个单独的舍入误差元素，这就是区别。这给出了最“正确”的答案，但可能不是您的用户想要的。

只有您可以根据您正在构建的应用程序决定使用哪种启发式方法。

应该注意的是，在存储货币值时使用浮点数（例如`float`、`double`和`long double`）可能会导致错误——您应该使用定点十进制算法进行此类计算，因为这就是“现实世界”中货币计算的方式。因为浮点在内部（在大多数系统上）使用以 2 为底的数字系统，所以在从十进制到二进制再转换回来时会产生小的舍入误差。您可能对较小的值没有问题，但如果美元值较大，您将开始看到 double 中可用精度位数的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T00:51:49.170

你可以在你去的时候分成任何剩余的东西，从剩余的数量中减去最后一个值。

```
const int divisor = 6;
const int dividend = 10;

std::vector<double> myVec;
myVec.reserve(6);
double remain = 100.0;

for (int i = divisor; i >= 1; --i)
{
    double val = remain / (double)i;
    remain -= val;
    myVec.push_back(val);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T00:51:59.457

在您的示例中，100/6=16.67（四舍五入）然后您只需将其乘以 6-1=5 并得到 83.35

现在您知道，为了使总和恰好为 100，您需要使最后一个元素的价格等于 100 - 83.35 = 16.65

# ruby-on-rails - ApplicationController:Class 的未定义方法“会话”

> ID：13041459
> 
> 赞同：0
> 
> 时间：2012-10-24T00:46:08.153
> 
> 标签：ruby-on-rails

我正在练习 Rails，我在“会话”主题中，我收到消息“ApplicationController:Class 的未定义方法‘会话’”

请帮我

这是代码 ***（控制器应用程序）

```
class ApplicationController < ActionController::Base
  session :session_key => 'ruby_cookies'
end 
```

***（当我想创建 cookie 时的控制器）

```
class RegistroController < ApplicationController
  def index
  end

  def login
    if request.post?
      p_user = User.new(params[:user])
      user   = User.find_by_nombre_and_password(p_user.nombre, p_user.password)
      if user
        session[:user_id] = user.id
        flash[:notice]    = "se ha identificado correctamente"
        redirect_to home_url
      else
        flash[:notice] = "se incorrecto psps"
        redirect_to login_url
      end
    end
  end

  def logout
    session[:user_id] = nil
    flash[:notice] = "adios sayonara"
    redirect_to home_url
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:01:54.947

您的代码真的很难阅读，但问题可能与这一行有关，它看起来像是在尝试调用方法“会话”并将键/值对传递给它。

```
session :session_key => 'ruby_cookies' 
```

这似乎不在任何类型的控制器操作中。通常你会用 设置一个会话值`session[:my_value] = 'value'`并用 读取它`session[:my_value]`，就像普通的哈希一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:03:05.397

您的代码`ApplicationController`不属于那里。它属于一个配置文件，例如`config/environment.rb`，它会在其中读取如下内容：

```
config.action_controller.session = {     
  :session_key => 'ruby_cookies'
} 
```

有关更多详细信息，请参见[http://guides.rubyonrails.org/configuring.html 。](http://guides.rubyonrails.org/configuring.html)

# c# - 仅在不带后缀的 URL 上指定路由

> ID：13041462
> 
> 赞同：0
> 
> 时间：2012-10-24T00:46:37.613
> 
> 标签：c#, asp.net, vb.net, url-routing

我正在使用 ASP.NET 4.5，并且在我的 Global.asax 文件中有以下路由规则：

```
RouteTable.Routes.MapPageRoute("defaultRoute", "{*value}", "~/default.aspx") 
```

我想要完成的是重定向动态生成的 URL，其格式如下：

> [http://myurl.com/firstnamelastname](http://myurl.com/firstnamelastname)

这可能是一个实际的样子：

> [http://myurl.com/davemackey](http://myurl.com/davemackey)

我的问题是上述重定向所有请求 - 例如到 axd 或 jpg 文件。现在我可以为所有其他类型的文件添加排除项，如下所示：

```
RouteTable.Routes.Ignore("{resource}.axd/*pathInfo}") 
```

但这会容易出错且乏味（例如，如果有人将另一种文件类型添加到项目中会发生什么？）。

所以，我想做的是这样的：

```
RouteTable.Routes.MapPageRoute("defaultRoute", "{*value}(where no suffix)", "~/default.aspx") 
```

或者，换成我清晰的英语：

> 如果 URL 没有后缀，则使用 defaultRoute 重定向到 ~/default.aspx

关于如何做到这一点的任何想法？

==

更新：

我找到了这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.90%29.aspx)。似乎使用约束可能有助于实现我上面所说的......但我不确定如何......

==

更新 2：

目前我有一个可以接受的解决方案。我添加了以下内容：

```
RouteTable.Routes.Ignore("{path}/{value}") 
```

由于图像和其他文件保存在子目录中，这迫使它们被排除在外。不过，我对此有两个担忧

1.  如果路径长于单个子目录（例如 images/people/person.jpg）怎么办？
2.  如果将文件放置在 jpg 等的主根目录中（不应该，但它可能会发生）怎么办？

# performance - ExpressionEngine 页面应加载的最佳查询量是多少？

> ID：13041463
> 
> 赞同：11
> 
> 时间：2012-10-24T00:46:39.147
> 
> 标签：performance, optimization, expressionengine

我看到@parscale 推文：[您对主页的多少个查询感到满意？你什么时候说这是优化的？](https://twitter.com/parscale/status/260808185424781312)

我看到反应 < 50 是好的，30 或更少是最好的，100+ 是危险区域。真的有合适的数字吗？如果说您的页面上确实有超过 50 个查询在运行，有什么方法可以降低它？

我通常有一些网站运行的查询不到 50 个，还有更多，虽然“更多”似乎并不太慢，但我总是有兴趣让它更快。如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-24T00:53:59.140

如何减少查询因站点、模板和模板而异，但有几篇关于 EE 优化和性能的文章：

[http://expressionengine.com/wiki/Reduce_Queries/](http://expressionengine.com/wiki/Reduce_Queries/)
[http://expressionengine.com/blog/entry/troubleshooting_site_performance_issues/](http://expressionengine.com/blog/entry/troubleshooting_site_performance_issues/)
[http://www.netmagazine.com/tutorials/optimise-your-expressionengine-site](http://www.netmagazine.com/tutorials/optimise-your-expressionengine-site)
[http://www .leezilla.net/post/12377053779/ab-seeing-your-sites-performance](http://www.leezilla.net/post/12377053779/ab-seeing-your-sites-performance)
[http://eeinsider.com/articles/using-cache-wisely-with-expressionengine/](http://eeinsider.com/articles/using-cache-wisely-with-expressionengine/)

但是，如果您已经完成了所有这些并且仍然需要加快速度，那么下一步就是查看诸如[CE Cache](http://www.causingeffect.com/software/expressionengine/ce-cache)之类的附加组件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T05:45:59.210

Thing to remember is not all queries are created equal. You can have 1,000 queries that do very little in the way of impacting performance, or a single query that can slow everything way down.

In EE its actually better to look at the template debug output and identify key slow down spots in the template build then to always focus on just the query count.

As others have pointed out products like CE Cache, Solspace's Template Morsels, or even adding a varnish caching server in-front of an intensive EE web site can do wonders, though with the added work required to fully get a varnish setup in front of EE setup, I would currently stick to the other solutions/directions first.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-24T02:06:01.213

没有一个神奇的查询号码。在我看来，您的服务器环境决定了可以支持的内容。你拥有的资源越多，你的代码就越复杂。

话虽如此，如果 EE 网站上确实出现问题，您可以使用很多选项。上面答案中的链接为您提供了一个可靠的列表，但这里有一些首先要检查的事情：

1.  删除 search:field_name="" 参数
2.  减少频道标签的使用，尽可能结合
3.  将 disable="" 参数添加到频道选项卡以禁用您不需要的内容
4.  减少嵌入的使用
5.  关闭所有 EE 跟踪代码
6.  如果您有频道标签，请停止使用高级条件

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-25T10:37:14.963

Following on from Nevin's point. I find that the JB Graphite is a huge help, it turns the debug output into a pretty graph, so you can easily spot bottleneck queries.

[http://devot-ee.com/add-ons/jb-graphite](http://devot-ee.com/add-ons/jb-graphite)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-24T13:29:32.777

我将扩展 MediaGirl 的第 6 点——您通常可以通过使用 Croxton 的 Ifelse 和/或 Switchee 附加组件来大大简化条件句。绝对值得一看。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-24T12:25:53.513

我在一个非常密集的构建中使用了 CE Cache，它将页面加载时间从 6 秒减少到 0.7 秒。很棒的插件，具有令人难以置信的文档和您可以在任何地方获得的最佳支持。

# ios - 从 UIWebView 中的 html 访问 FBSession 令牌

> ID：13041470
> 
> 赞同：1
> 
> 时间：2012-10-24T00:47:31.087
> 
> 标签：ios, facebook, ios5, ios6

我有一个想要与 Facebook 集成的应用程序。它是一个混合应用程序，具有原生部分和位于 UIWebView 中的 javascript 部分。我希望用户能够登录到“两个”部分。处理这个的标准方法是什么？facebook sdk 3.1 是否本机处理这个？我是否需要某种方式在实例化它的 url 中传递它？我可以从 javascript 访问 NSUserDefaults 吗？我可以创建一个自定义处理程序来处理它吗？

我用谷歌搜索但由于单词的共同性质无法找到任何解决此问题的内容。我确实读过 LinkedIn 的混合应用程序实际上运行了一个本地服务器来访问用户数据。这比我想做的还多。如果 Facebook SDK 解决了此问题但无法找到 ID，我们将不胜感激并表示抱歉。

提前谢谢

# mysql - 如何确定慢查询？

> ID：13041479
> 
> 赞同：2
> 
> 时间：2012-10-24T00:48:11.437
> 
> 标签：mysql, indexing, database-management, mysql-slow-query-log

我的网站正在经历一个非常缓慢的加载时间。我怀疑可能是 javascript 或 php 导致加载时间更长，但我已经在 YSlow 中测试了我的网站，它的等级是 B，我认为这还不错。

现在我想检查我的数据库，如果查询有问题，数据库索引会导致我的网站加载速度变慢。

是否有一些教程或技巧我可能会阅读或尝试测试数据库以确定是否有慢查询？数据库管理有什么技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T00:57:25.867

我总是退回到 2 个咒语以更快地执行查询 -

1.  索引，索引和索引。
2.  尽量摆脱`JOINS`。

有一些久经考验的方法可以清除慢查询。您需要打开[慢查询日志](http://www.ducea.com/2006/11/06/identifying-mysql-slow-queries/)。这会记录所有执行时间超过 x 秒的查询。x 由您在 mysql.conf 中指定。

一旦慢查询开始记录在日志中。[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.0/en/explain.html)您可以使用并适当添加索引来分析每个查询，以加快查询执行速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:05:01.770

我在 PDO 之上（以前在 MySQL 之上）有一个薄的数据库抽象层，我已经烘焙了简单的查询日志记录，我可以打开和关闭它 - 它允许我获取查询的报告以及每个查询的时间长度拿。因此，不是有一个简单的截止 - 有些东西要么是一个长查询，要么不是 - 我可以看到我所有的查询时间。

MySQL 的慢查询日志不错~~，但是一秒的分辨率还不够我的需求。对我来说，很多时候，一个耗时 200 毫秒的查询表明有问题~~。

*我在这里显示我的年龄。在快速查看 MySQL 手册后，事实证明，`long_query_time`自 MySQL 5.1.27 以来，MySQL 的分辨率可以指定为微秒！尽管如此，我的方法仍然很方便。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:39:27.097

sql 性能的好教程 -[专注于 MySql](http://www.slideshare.net/techdude/how-to-kill-mysql-performance)。对于连接，如果您无法摆脱它们 - 请使用正确的连接：LEFT JOIN、RIGHT、INNER、OUTER

# objective-c - 为什么要适合的尺寸根本不起作用，在这种明显的情况下什么也不做

> ID：13041481
> 
> 赞同：0
> 
> 时间：2012-10-24T00:48:19.143
> 
> 标签：objective-c, subviews, superview

让我们检查一下这行代码（实际上只有 1 行改变了任何东西）

```
PO(self.containerForFormerHeader);
PO(self.containerForFormerHeader.subviews);
[self.containerForFormerHeader sizeToFit];
PO(self.containerForFormerHeader); 
```

结果：

```
self.containerForFormerHeader: <UIView: 0x8b669c0; frame = (0 75; 320 0); autoresize = W+H; layer = <CALayer: 0x8b5eb30>>
self.containerForFormerHeader.subviews: (
    "<UIImageView: 0xd572210; frame = (0 0; 320 10); autoresize = LM+RM+TM; userInteractionEnabled = NO; layer = <CALayer: 0xd572250>> - shading-top-Table.png"
)
self.containerForFormerHeader: <UIView: 0x8b669c0; frame = (0 75; 320 0); autoresize = W+H; layer = <CALayer: 0x8b5eb30>> 
```

从结果可以看出：

1.  视图的高度为 0。
2.  该视图有一个高度为 10 的子视图
3.  在 sizetofit 之后，没有任何变化。怎么来的？

我可以直接计算框架，但这让我很困扰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:11:54.770

当您`sizeToFit`在视图上调用该方法时，它最终会在`sizeThatFits:`视图上调用该方法。的默认实现`sizeThatFits:`返回视图的当前大小。

因此，除非您的自定义视图显式覆盖该`sizeThatFits:`方法以返回适当的大小以包含其子视图，否则当您调用`sizeToFit`.

`UIView sizeToFit`这在和的文档中都有详细说明`UIView sizeThatFits:`。

像 UILabel 这样的类确实实现`sizeThatFits:`了返回适当的大小。

# events - 防止 TideSDK 中的应用程序退出

> ID：13041482
> 
> 赞同：0
> 
> 时间：2012-10-24T00:48:20.000
> 
> 标签：events, exit, tidesdk

我试图阻止用户在单击关闭按钮时关闭窗口。我想让应用程序停靠在系统托盘上。

我的第一步是识别用户何时尝试关闭窗口并阻止该事件的默认行为。我希望这段代码可以工作，但事实并非如此。

```
var appWindow = Titanium.UI.getCurrentWindow();
appWindow.addEventListener('app.exit', function(event){
  event.preventDefault();
}) 
```

我尝试使用`exit`事件和事件常量本身无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T22:01:40.677

一个技巧可能是为应用程序打开一个“不可见”窗口，因此即使用户关闭了“应用程序”窗口，应用程序仍应运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T05:11:25.777

这不会起作用，因为您在调用 preventDefault 时所做的所有事情都是停止 WebKit 浏览器页面中的默认行为，而不是本机应用程序包装器本身。

close 命令是对底层包装器的本机函数调用，它只是将一个事件传递给侦听器，它不传递控制权。

此外，这听起来有些危险，不允许用户关闭应用程序似乎有问题。也许相反，您应该注册一个后台服务来运行？

# php - php数组中的多个mysql命令

> ID：13041483
> 
> 赞同：1
> 
> 时间：2012-10-24T00:48:20.797
> 
> 标签：php, mysql, sql

是否可以构建一组 SQL 命令来查询数据库？我所拥有的是三个表，每个表都有到期金额的列。想选择任何到期并显示在屏幕上的东西，以便可以开具发票（最好在表格中），并且每一行都有各自的客户会费。

我可以在三个表之间使用 UNION ALL 选择所有到期的内容，但是我不知道如何在表行中按 ID 列出它们。

以下是我到目前为止所拥有的。按照这个速度，我必须分别运行每个查询并将它们列在三个单独的列表中。建议？

```
 <table>
        <tr>
            <th> ID</th>
            <th> Cost 1</th>
            <th> Cost 2</th>
            <th> Cost 3</th>
        </tr>

      <?php 
    $list1 = "SELECT ID, Cost FROM Table1 WHERE Invoiced IS NULL;";
    //$list2 = "SELECT ID, Price2 FROM Table2 WHERE Expiration BETWEEN '$curDate' AND '$maxDate';";
    //$list3 = "SELECT ID, Price3 FROM Table3 WHERE Expiration BETWEEN '$curDate' AND '$maxDate'";

    $result = mysql_query($list1, $link) or die(mysql_error());

    $num_rows = mysql_num_rows($result);
    $num_fields = mysql_num_fields($result);

    for ($i=0; $i<$num_rows; $i++) {
        for ($j=0; $j<$num_fields; $j++) {
            $invoice[$i][mysql_fieldname($result,$j)] = mysql_result($result,$i,mysql_field_name($result,$j));
            }
        }

    //eventually the order it should be listed on screen
    for($i=0; $i<count($invoice); $i++) {
        echo "<tr><td>".$invoice[$i]["ID"]."</td>
        <td>".$invoice[$i]["Cost"]."</td>
        <td>".$invoice[$i]["Price2"]."</td>
        <td>".$invoice[$i]["Price3"]."</td></tr>";
    }

      ?>
      </table> 
```

**评论后编辑：**

查询被传递并返回语法错误`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'all LEFT JOIN table1 ON all.ID = table1.ID LEFT JOIN t' at line 7`：

```
 $query = "
    SELECT all.ID, table1.Cost1, table2.Price2, tabl3.Price3
    FROM 
        (SELECT ID, Cost1 FROM table1 WHERE Invoiced IS NULL
            UNION
        SELECT ID, Price2 FROM table2 WHERE Expiration BETWEEN '$curDate' AND '$maxDate'
            UNION
        SELECT ID, Price3 FROM table3 WHERE Expiration BETWEEN '$curDate' AND '$maxDate') AS all
    LEFT JOIN table1 ON all.ID = table1.ID
    LEFT JOIN table2 ON all.ID = table2.ID
    LEFT JOIN table3 ON all.ID = table3.ID
    "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T00:54:02.153

从您在上面创建的将三个 Cost 列放在一行中的表格标题中`ID`，您似乎暗示您希望将`JOIN`三个表格放在一起`ID`。我在`LEFT JOIN`这里使用 a ，以确保所有行都`Table1`存在，即使其他两个表中的任何一个都没有相应的行。

```
SELECT
  Table1.ID,
  Table1.Cost as Cost1,
  Table2.Price2 AS Cost2,
  Table3.Price3 AS Cost3
FROM
  Table1 
  LEFT JOIN Table2 ON Table1.ID = Table2.ID
  LEFT JOIN Table3 ON Table1.ID = Table3.ID
WHERE 
  Table1.Invoiced IS NULL
  AND Table2.Expiration BETWEEN '$curDate' AND '$maxDate'
  AND Table3.Expiration BETWEEN '$curDate' AND '$maxDate' 
```

### 评论后更新：

在`Table2`可能有 a`ID`未保存在`Table1`or的情况下`Table3`，例如（`Table1.ID`不能被认为是权威的），您可以`DISTINCT ID`通过 a 从所有 3 个表中获取总集`UNION`并使用它来加入：

```
SELECT
  allID.ID,
  Table1.Cost1,
  Table2.Price2 AS Cost2,
  Table2.Price3 AS Cost3
FROM
  /* Subquery gets a distinct set of IDs from all tables via UNION 
     so the outer query has a complete list to join against the other tables */
  (
    SELECT ID FROM Table1
    UNION SELECT ID FROM Table2
    UNION SELECT ID FROM Table3
  ) allID
  LEFT JOIN Table1 ON allID.ID = Table1.ID
  LEFT JOIN Table2 ON allID.ID = Table2.ID
  LEFT JOIN Table3 ON allID.ID = Table3.ID
/* Sorry, forgot the WHERE clause here */
WHERE
  Table1.Invoiced IS NULL
  AND Table2.Expiration BETWEEN '$curDate' AND '$maxDate'
  AND Table3.Expiration BETWEEN '$curDate' AND '$maxDate' 
```

请注意，在一对一关系中存在具有几乎相同列结构的三个表可能意味着设计问题。您可以考虑将这些组合到一个表中。

### 关于 PHP 的进一步说明：

`for`在 PHP 中，我们几乎从未像在 C/C++ 中那样使用增量循环进行迭代。相反，我们通常使用`foreach`or 从查询中获取行时使用`while`循环。

```
// Fetch in a while loop
$invoice = array();
// $result is your query resource as you already have it...
while ($row = mysql_fetch_assoc($result)) {
  // Accumulate rows into $invoice array
  $invoice[] = $row;
}
// Then loop over the array:
foreach ($invoice as $inv) {
  echo "<tr>
    <td>{$inv['ID']}</td>
    <td>{$inv['Cost1']}</td>
    <td>{$inv['Cost2']}</td>
    <td>{$inv['Cost3']}</td>
  </tr>"; 
} 
```

### 最终更新：

是的，该`WHERE`条款将限制满足的所有条件。如果你需要单独限制它们，你必须在子查询中这样做，然后将它们连接在一起，使用相同的`UNION`子查询来获得不同的集合`ID`

```
SELECT
  allID.ID,
  T1.Cost1,
  T2.Price2 AS Cost2,
  T3.Price3 AS Cost3
FROM
  (
    SELECT ID FROM Table1
    UNION SELECT ID FROM Table2
    UNION SELECT ID FROM Table3
  ) allID
  LEFT JOIN (SELECT ID, Cost AS Cost1 FROM Table1 WHERE Invoiced IS NULL) T1 ON allID.ID = T1.ID
  LEFT JOIN (SELECT ID, Price2 AS Cost2 FROM Table2 WHERE Expiration BETWEEN '$curDate' AND '$maxDate') T2 ON allID.ID = T2.ID
  LEFT JOIN (SELECT ID, Price3 AS Cost3 FROM Table3 WHERE Expiration BETWEEN '$curDate' AND '$maxDate') T3 ON allID.ID = T3.ID 
```

# android - android中的标题/操作栏ID？

> ID：13041486
> 
> 赞同：5
> 
> 时间：2012-10-24T00:48:56.007
> 
> 标签：android, identifier, titlebar

我想试试这个[有趣的标题栏着色](https://stackoverflow.com/a/9015223/581205)，但它对我不起作用

```
getWindow().findViewById(android.R.id.title); 
```

返回空值。所以我用 Hierarchy Viewer 查看了它，发现视图被调用`id/action_bar`了。但是没有`R.id.action_bar`（自动完成不提供它，也没有像这样的东西`R.java`）。

所以现在我很困惑：

*   现在`android.R.id.title`有点过时了（我在模拟器中使用的是版本 16）？
*   从哪里来`id/action_bar`？
*   什么是推荐和简单的做法 wrt 兼容性？

我应该得到 ActionBarSherlock 吗？我本来只是想改变标题栏的颜色......而不是胡闹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:30:39.660

如果您正在寻找与 API 级别 14 / Android 4.0 之前的 Android 版本的兼容性，我建议您使用 ActionBarSherlock。

更改 ActionBar 的背景很简单，并且通过样式最容易完成。[请参阅http://android-developers.blogspot.com/2011/04/customizing-action-bar.html](http://android-developers.blogspot.com/2011/04/customizing-action-bar.html)的“背景”部分

您也可以通过代码更改它。把它放在你的`onCreate()`：

```
GradientDrawable gradientDrawable = new GradientDrawable(GradientDrawable.Orientation.TOP_BOTTOM, new int[] {Color.RED, Color.GREEN});
getActionBar().setBackgroundDrawable(gradientDrawable); 
```

这是此代码的屏幕截图：

![在此处输入图像描述](../Images/f4dd2adaccddd05eafae0b9c1ab3e1fb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-18T11:30:36.593

使用以下代码获取 ActionBar 的 id：

```
val actionBarId = resources.getIdentifier("action_bar", "id", packageName) 
```

然后从 actionbar 的子项中找到标题（正常情况下）：

```
val actionbar = findViewById<ViewGroup>(actionBarId)
for (view in actionbar.children) {
    if (view is TextView) {
        // this is the titleView
    }
} 
```

# php - mysql + php：选择多个随机结果

> ID：13041488
> 
> 赞同：0
> 
> 时间：2012-10-24T00:49:01.500
> 
> 标签：php, mysql, random

我一直在寻找这个，但没有成功。

我正在尝试实现一个推荐栏，例如在 youtube 中，当您看到视频时，它会在右侧显示列表或推荐视频。

目前我正在使用这种方法：

```
$offset_result = mysql_query( " SELECT FLOOR(RAND() * COUNT(*)) AS `offset` FROM `$tablename` ");
$offset_row = mysql_fetch_object($offset_result ); 
$offset = $offset_row->offset;
$result_rand = mysql_query( " SELECT * FROM `$tablename` LIMIT $offset, 9 " ); 
```

这工作正常，但有时不显示任何结果，问题还在于它不是完全随机的，因为它显示例如第一个 ID 为 200，所以下一个结果将是 id 201，然后是 202 等等。

我想知道是否有办法显示这 9 个随机结果，例如 1º 结果 id 500、2º 结果 id 10、3º 结果 id 788 等？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:58:34.497

不完全确定这会回答您正在寻找的内容，但请尝试：

`$result_rand = mysql_query("SELECT * FROM " . $tablename . " ORDER BY RAND() LIMIT 9");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:49:34.520

未经测试：

SELECT id, @rownum:=@rownum+1 AS rownum, name FROM users u, (SELECT @rownum:=0) r

这将按顺序为每一行提供一个唯一编号。现在，如果您创建一个临时表，其中包含 9 个随机数，介于 1 和表的 count(*) 之间，并将这两者连接在一起......

不确定性能，但似乎它可能比 Rand 和 order by 更快，因为我只需要 9 个随机数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T00:59:31.940

您可以使用 php rand() 函数创建 5 个数字并将它们保存在一个数组中：

[http://php.net/manual/en/function.rand.php](http://php.net/manual/en/function.rand.php)

```
<?php
$rand_array = array();
for($i=1;$i<5;$i++) {
    $rand_array[$i] = rand(0,500);
}
?> 
```

然后使用 foreach 循环为每个 int 创建一个查询并处理您的数据。

```
<?php
foreach ($rand_array as $integer) {
     $q = "SELECT * from $tablename WHERE id='$integer';";
}
?> 
```

这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T01:02:43.650

首先你应该使用 mysqli_ 函数而不是 mysql_ 因为[后者已被弃用](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。第二次使用 rand() 的 order 来获取随机行：

```
$rand_result = mysqli_query( "SELECT * FROM $tablename ORDER BY RAND() LIMIT 9;" ); 
```

# expressionengine - 使用 nGen 文件字段从 ExpressionEngine 1 升级到 ExpressionEngine 2

> ID：13041491
> 
> 赞同：10
> 
> 时间：2012-10-24T00:49:39.557
> 
> 标签：expressionengine

我即将进行 ExpressionEngine v1 到 ExpressionEngine v2 的升级，大量数据存储在 nGen 文件字段中。

我需要在升级前和升级后采取哪些步骤才能使这些数据在 EE2 SafeCracker 文件字段中正常工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-24T00:58:57.113

升级到 EE2 后，找到每个 ex-nGen File 字段并将其 Field Type 更改为 File，然后运行以下 SQL 查询：

```
UPDATE exp_channel_data
SET field_id_X = CONCAT('{filedir_Y}', field_id_X)
WHERE field_id_X != ''
AND field_id_X NOT LIKE '{filedir_%' 
```

将“X”替换为您的文件字段的 ID（您可以从 exp_channel_fields 中获取），并将 Y 替换为 nGen 文件字段设置为的上传首选项 ID。

如果您在 EE1 中安装了 Matrix，请升级到 Matrix 2/EE2 并对任何 ex-nGen File 列执行相同操作，改为使用以下 SQL 查询：

```
UPDATE exp_matrix_data
SET col_id_X = CONCAT('{filedir_Y}', col_id_X)
WHERE col_id_X != ''
AND col_id_X NOT LIKE '{filedir_%' 
```

同样，X == 您的 Matrix 列 ID（您可以从 exp_matrix_cols 获得），并且 Y == 您的上传首选项 ID。

（当然，这要[归功于 Rob Sanchez](http://expressionengine.com/forums/viewreply/784231/)。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T20:57:13.027

我也是为一个网站写的——这里没有矩阵支持，但它可以快速正确地用于常规字段。

对于数组，左边一栏是升级前你改成文本的每个字段ID，升级后需要改成文件，右边是你要附加到的文件上传目录的filedir_X的X场地

```
// Insert file upload directories

$array = array(
    '16' => '1',
    '22' => '1',
    '121' => '3',
    '58' => '1',
    '67' => '1',
    '68' => '1',
    '71' => '1',
    '76' => '1',
    '78' => '1',
    '94' => '1',
    '99' => '1',
    '108' => '3',
    '109' => '3',
    '110' => '3',
    '139' => '1'
    );

foreach($array as $field_id => $dir_id) {

    $q_entries = $this->EE->db->query("SELECT entry_id, field_id_{$field_id} as 'field' from exp_channel_data where field_id_{$field_id} != '' order by entry_id asc");

        if ($q_entries->num_rows() > 0) {

            echo '<h3>field_id_'.$field_id.'</h3>';

            foreach($q_entries->result_array() as $entry) {

                echo $entry['entry_id'];

                $filename = trim('{filedir_'.$dir_id.'}'.$entry['field']);

                echo ' - '.$filename.'<br/>';

                $data = array(
                    'field_id_'.$field_id => $filename,
                    );
                $sql = $this->EE->db->update_string('exp_channel_data', $data, "entry_id = '{$entry['entry_id']}'");
                $this->EE->db->query($sql);

            }
        }

}

echo 'done'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T01:10:09.440

我有一篇关于此的完整博客文章，这是基于我的经验和 Brandon 在他的回答中引用的线程。[博客文章在这里](http://caffeinecreations.ca/blog/migrating-matrix-ngen-file-fields-to-ee2-matrix-and-native-file-field)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-29T17:43:33.480

我已经[在 GitHub 上发布了一些](https://github.com/proimage/EE1-Upgrade-nGen-File-Fields)内容，应该可以帮助任何面临这个过程的人。它是 EE1 模板代码（需要在输出或输入上启用 PHP），它显示了两件事：

首先，它显示系统中所有自定义字段的表格概览。这是供参考，以在您尝试查找某个字段类型的所有实例时提供帮助。它涵盖了普通的 EE 字段、Fieldframe 字段类型，甚至是 Matrix 列。

其次，每次遇到 nGen File 字段时，模板都会生成您需要使用的 MySQL 代码（*在*升级到 EE2 之后），以将所述字段中的数据更改为 EE2 的本机 File 字段所需的格式。**这些查询只显示，不运行**。这个想法是您将查询保存在某处，运行 EE1->EE2 升级，然后在准备好时运行保存的查询。

不用说，备份，备份，备份。模板代码不会以任何方式修改您的站点数据库，并且已经过测试并显示了它应该很好的内容。然而，虽然它生成的 MySQL 查询（供您复制并稍后手动运行）与[Brandon 在他的回答中推荐的](https://stackoverflow.com/a/13041571/999556)内容相匹配，但我还没有实际测试这些查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-30T04:19:10.157

做到这一点的最好方法是谨慎行事，并在每一步都备份您的数据库。我之前写过一篇关于此的博客文章，但会进一步详细说明。

第 1 步：在运行升级之前，将所有 ngen 字段类型更改为文本，不要担心数据不会丢失。

第 2 步：接下来根据官方文档升级 ExpressionEngine，然后返回每个字段并将它们更改为第一方文件类型。

下一步涉及一些数据库操作，但它只是复制和粘贴，所以不用担心。

第 3 步：请在继续之前备份您的数据库，以防万一。

第 4 步：下一步取决于您的原始 nGen 文件字段是在标准通道字段还是矩阵字段中。

现在进入您的数据库，将“X”替换为您的文件字段的 ID（您可以从 exp_channel_fields 获取），并将 Y 替换为 nGen 文件字段设置为的上传首选项 ID。

（要在控制面板中找到您的上传首选项 ID，请转到内容 > 文件 > 文件上传首选项。选择左侧与文件上传位置匹配的 ID 列。）

4a：如果更新标准频道字段，请使用此查询

```
 UPDATE exp_channel_data
    SET field_id_X = CONCAT('{filedir_Y}', field_id_X)
    WHERE field_id_X != ''
    AND field_id_X NOT LIKE '{filedir_%' 
```

4b：对于矩阵，字段改为运行此查询

```
 UPDATE exp_matrix_data
    SET col_id_X = CONCAT('{filedir_Y}', col_id_X)
    WHERE col_id_X != ''
    AND col_id_X NOT LIKE '{filedir_%' 
```

X == 您的 Matrix 列 ID（您可以从 exp_matrix_cols 获得），并且 Y == 您的上传偏好 ID。

感谢 Brandon Kelly 和 Rob Sanchez。

此外，相同的过程可用于 EE2 中不存在的其他附加组件。在升级前转换为文本，然后在升级后转换为新的等效字段类型（如果需要）。更多帮助：[点击这里](https://www.w3care.com/technologies/open-source-development-platforms/expressionengine-developers-in-india/)

# javascript - 防止表单使用 jQuery 提交

> ID：13041493
> 
> 赞同：0
> 
> 时间：2012-10-24T00:49:53.090
> 
> 标签：javascript, jquery, html, forms

所以这让我发疯。这段代码，

```
$('#the_form').submit(function(e){
            alert("Submit!");

            return false;
            e.preventDefault();
        }); 
```

应该阻止我的 HTML 表单，

```
<form id="the_form">
                <input type="text" name="q" />
                <input type="submit" />
            </form> 
```

从刷新页面，但它没有。有人对此有见识吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T00:54:07.880

```
$(function() {
    $('#the_form').on('submit', function(e){
        e.preventDefault();
        alert("Submit!");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:51:56.707

尝试`return false`从您的代码中删除，或将其放在`e.preventDefault()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T00:55:17.943

只需**删除**声明`return`..

还要确保您的代码包含在 DOM 就绪处理程序中

```
$(document).ready( function() {
    $('#the_form').submit(function(e){
         alert("Submit!");
         e.preventDefault();
    });
}); 
```

# c++ - C++ 私有常量指针

> ID：13041496
> 
> 赞同：3
> 
> 时间：2012-10-24T00:50:34.633
> 
> 标签：c++

我正在学习 c++ 中的指针并且遇到了一些麻烦。我有一个`Foo`在头文件中声明一些数据的类：

```
private:
const Bar *obj; 
```

哪里`Bar`有课。

然后在 c++ 实现中我想替换`*obj`它，使其指向一个完全不同的`Bar`对象。`*obj`是恒定的，那么我如何更改`*obj`指向的内容，或者更确切地说，更改内存中的内容`*obj`？同样在`Foo`的析构函数中，我该如何解除分配`*obj`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T01:15:14.877

给定你的类定义

```
class A {
private:
  const Bar *obj;
}; 
```

`obj`是一个指向常量`Bar`对象的指针。您可以更改该指针所指向的内容，但不能更改所指向对象的内容。

所以，如果你有一个新`Bar`对象并且你想改变`obj`它指向那个，你可以简单地分配新值：

```
/* New object: */
Bar *new_bar = new Bar;
/* Change the pointer: */
obj = new_bar; 
```

然而，有两个问题。

1.  如果新`Bar`对象是在**类之外**创建的，则不能直接将其分配给它，`obj`因为后者是**私有**的。因此，您需要一个 setter 函数：

    ```
    class A {
    private:
      const Bar *obj;
    public:
      void set_obj(const Bar *new_obj) { obj = new_obj; }
    }; 
    ```

2.  **您必须确定谁最终将拥有该`Bar`对象**，即谁负责释放它所占用的堆空间。如果调用者负责，那么您可以按上述方式对其进行编码，即`class A`永远不会创建新`Bar`对象，也不会删除任何对象。它只会维护一个指向`Bar`在类之外创建和删除的对象的指针。

    但是如果`class A`上面确实负责`Bar`对象占用的内存空间，则必须在析构函数中使用以释放空间，并且在分配`delete obj`新对象时也必须释放空间。`Bar`也就是`set_obj`上面的函数需要改成这样：

    ```
    void set_obj(const Bar *new_obj) { delete obj; obj = new_obj; } 
    ```

    否则你会有内存泄漏。在复制构造函数（除非你删除它）和赋值运算符中必须采取类似的措施：这两个函数在创建对象的*副本*`class A`时都会使用，在这种情况下，你必须确保*不要简单地复制*指针，而是分配新空间并复制对象（即您必须执行深层复制）：

    ```
    A(const A& a):obj(new Bar(*a.obj)) {}
    A& operator=(const A& a) { delete obj; obj = new Bar(*a.obj); return *this; } 
    ```

    话虽如此，如果您的类负责内存空间，那么使用智能指针类而不是原始指针*会更好。*主要原因是： (i) 上面比较复杂，容易出错；(ii) 上述情况仍然不是很好——当抛出异常时，可能仍然存在内存泄漏或更严重的问题，例如在`Bar`. C++11 提供了一个名为 的智能指针类`std::unique_ptr`，它似乎非常适合您的目的：

    ```
    class A {
    private:
      std::unique_ptr<const Bar> obj;
    public:
      ~A() {}
      void set_obj(std::unique_ptr<const Bar> new_obj) { obj = new_obj; }
    }; 
    ```

    有了这个，智能指针将处理需要自动释放的任何内存空间，无论是在销毁时还是在将新`Bar`对象分配给指针时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:53:27.140

您不能使用该指针来更改所指向的值，这就是它是 const 的原因，但您应该能够更改它所指向的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T01:00:14.170

在 c++ "const Bar *obj;" 意味着您有一个指向只读 Bar 对象的指针；这意味着您可以将其指向任何只读 Bar 对象。

您还可以指向一个非常量变量，从而保证您不会使用该指针更改它。

如果你想要一个指针，在某种意义上它是恒定的，它不能指向其他任何东西，那么你应该这样写：

```
Bar * const obj = some_object; 
```

这将编译并正常工作：

```
const int p = 1, q = 2;
int r = 3;
const int* i = &p;
i = &q; // point it to a different const variable.
i = &r; // point it to a different non const variable. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T00:56:39.267

正如所写，我相信这是一个指向 const Bar 对象的指针，而不是一个常量指针。

# c++ - 不兼容的类型 - 是因为数组已经是指针吗？

> ID：13041497
> 
> 赞同：0
> 
> 时间：2012-10-24T00:50:51.000
> 
> 标签：c++

在下面的代码中，我基于书籍结构创建了一个对象，并让它保存多个我设置的“书籍”是一个数组（即定义/启动的对象）。但是，每当我去测试我的指针知识（实践有帮助）并尝试创建一个指向创建对象的指针时，它都会给我一个错误：

*C:\Users\Justin\Desktop\Project\wassuip\main.cpp|18|错误：“books* ”分配给“books* [4]”时的类型不兼容|*

请问，这是因为对象 book_arr[] 已经被认为是一个指针，因为它是一个数组？谢谢（C++ 新手，只是想验证一下）。

```
#include <iostream>
#include <vector>
#include <sstream>

#define NUM 4

using namespace std;

struct books {
    float price;
    string name;
    int rating;
} book_arr[NUM];

int main()
{
    books *ptr[NUM];
    ptr = &book_arr[NUM];

    string str;

    for(int i = 0; i < NUM; i++){
        cout << "Enter book name: " << endl;
        cin >> ptr[i]->name;
        cout << "Enter book price: " << endl;
        cin >> str;
        stringstream(str) << ptr[i]->price;
        cout << "Enter book rating: " << endl;
        cin >> str;
        stringstream(str) << ptr[i]->rating;
    }

    return 0;
} 
```

**回答后的新代码（无错误）**

```
#include <iostream>
#include <vector>
#include <sstream>

#define NUM 4

using namespace std;

/* structures */
struct books {
    float price;
    string name;
    int rating;
} book[NUM];

/* prototypes */
void printbooks(books book[NUM]);

int main()
{
    string str;

    books *ptr = book;

    for(int i = 0; i < NUM; i++){
        cout << "Enter book name: " << endl;
        cin >> ptr[i].name;
        cout << "Enter book price: " << endl;
        cin >> str;
        stringstream(str) << ptr[i].price;
        cout << "Enter book rating: " << endl;
        cin >> str;
        stringstream(str) << ptr[i].rating;
    }

    return 0;
}

void printbooks(books book[NUM]){
    for(int i = 0; i < NUM; i++){
        cout << "Title: \t" << book[i].name << endl;
        cout << "Price: \t$" << book[i].price << endl;
        cout << "Racing: \t" << book[i].rating << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-24T07:10:25.120

![数组不是指针](../Images/871cfcd4ae1438c4452f1e41a6903ee8.png)

请参阅[如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/)详情。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-10-24T00:55:27.787

这是正确的。对于任何数组：

```
BlahClass myArray[COUNT]; 
```

`&myArray[0]`相当于只是`myArray`。即标识符`myArray`是指向数组第一个元素的指针。这就是为什么你会听到它说，相当混乱，“数组和指针在 C++ 中是同一个东西”。真正的意思是数组标识符被隐式转换为指向数组第一个元素的指针。

# ruby-on-rails - 未定义的方法`fog_host='

> ID：13041498
> 
> 赞同：15
> 
> 时间：2012-10-24T00:51:19.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, fog

当我尝试运行我的应用程序时，出现以下错误：

> config/initializers/carrierwave.rb:4：CarrierWave::Uploader::Base:Class 的未定义方法 `fog_host=' (NoMethodError)

这是我的**初始化程序/carrierwave.rb**文件：

```
CarrierWave.configure do |config|
  config.storage = :fog
  config.fog_directory = 'media.domain.pl'
  config.fog_host = 'http://s3-eu-west-1.amazonaws.com/media.domain.pl'

  config.fog_credentials = {
    :provider => 'AWS',
    :aws_access_key_id => '***',
    :aws_secret_access_key => '***',
    :region => 'eu-west-1',
  }
end 
```

我有`carrierwave`并`fog`包含在我的中`Gemfile`，它一直工作到最后一次使用`bundle update`. 你知道我的代码有什么问题吗？我在谷歌找不到任何关于它的东西

红宝石 v. 1.8.7
轨道 v. 3.2.6
雾 v. 1.6.0
载波 v. 0.7.0

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-24T00:54:48.003

`fog_host`似乎不是配置选项。从[Carrier wave](https://github.com/jnicklas/carrierwave#using-amazon-s3)文档看来，您可能需要`asset_host`：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',       # required
    :aws_access_key_id      => 'xxx',       # required
    :aws_secret_access_key  => 'yyy',       # required
    :region                 => 'eu-west-1'  # optional, defaults to 'us-east-1'
  }
  config.fog_directory  = 'name_of_directory'                     # required
  config.fog_public     = false                                   # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
  config.asset_host     = 'https://assets.example.com'            # optional, defaults to nil
end 
```

**更新：**

这是引入该更改的提交：[https ://github.com/jnicklas/carrierwave/commit/7046c93d6b23cffef9f171a5f7f0dd14267a7057](https://github.com/jnicklas/carrierwave/commit/7046c93d6b23cffef9f171a5f7f0dd14267a7057)

# gcc - C中的内联汇编

> ID：13041499
> 
> 赞同：1
> 
> 时间：2012-10-24T00:51:24.697
> 
> 标签：gcc, assembly, inline-assembly

非常不言自明的代码。为什么它不起作用！

```
#include <stdio.h>

int main() {
    __asm__("number dw 0"); // declare number?
    printf("%d",number);
    __asm__("mov %eax,number"
            "inc %eax"
            "mov number,%eax");
    printf("%d",number);
    return 0;
}

cc     ex1.c   -o ex1
ex1.c: In function ‘main’:
ex1.c:22:17: error: ‘number’ undeclared (first use in this function)
ex1.c:22:17: note: each undeclared identifier is reported only once for each function it appears in
make: *** [ex1] Error 1 
```

谢谢。

我有很多知识空白要填补...... gcc 手册让我对内联汇编感到困惑，谷歌的教程结果也是如此......

在英特尔 i7 处理器上工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T02:18:38.487

`C`使用此语法，您可以访问从内联程序集中声明的变量

```
#include <stdio.h>

int main() {
    int number = 0;
    printf("%d\n",number);
    asm(
        "mov %[number],%%eax\n"
        "inc %%eax\n"
        "mov %%eax,%[number]\n"
        : [number] "=m" (number) : "m" (number) : "eax", "cc" );
    printf("%d\n",number);
    return 0;
} 
```

您可以通过在输入上指定约束让编译器为您加载`number`到寄存器中`eax``"a"`

```
#include <stdio.h>

int main() {
    int number = 0;
    printf("%d\n",number);
    asm(
        "inc %%eax\n"
        "mov %%eax,%[number]\n"
        : [number] "=m" (number) : "a" (number) : "cc" );
    printf("%d\n",number);
    return 0;
} 
```

由于 x86`inc`指令可以直接对内存进行操作，因此您可以将其简化为

```
#include <stdio.h>

int main() {
    int number = 0;
    printf("%d\n",number);
    asm(
        "incl %[number]\n" /* incl -> "long" (32-bits) */
        : [number] "=m" (number) : "m" (number) : "cc" );
    printf("%d\n",number);
    return 0;
} 
```

有关更多信息，请参阅 gcc 文档：

[6.41 带有 C 表达式操作数的汇编器指令](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Extended-Asm)

# php - 使用 PHP 动态创建内容的 JSON mime 类型

> ID：13041507
> 
> 赞同：2
> 
> 时间：2012-10-24T00:51:58.740
> 
> 标签：php, json, dynamic

> **可能重复：**
> [json 文件的正确 HTTP 标头](https://stackoverflow.com/questions/267546/correct-http-header-for-json-file)

我使用以下行设置了 php 文件的标题：

```
header('Content-Type', 'application/json'); 
```

服务器失败并显示错误消息：

```
"Tue Oct 23 16:20:09 2012] [error] [client 111.111.111.111] malformed header from script. Bad header=Content-Type: xyz.php, referer:...." 
```

我按照网上的一些建议将其添加到 .htaccess 文件中

```
AddType application/json .json 
```

两者都没有工作。我将不胜感激任何进一步的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T00:57:19.180

```
header('Content-type: application/json'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:57:25.390

注意引号在哪里`header()`

`header('Content-type: application/json');`

# c# - 通过 LightSwitch OData 服务构建 Asp.net 动态数据 Web 应用程序

> ID：13041508
> 
> 赞同：1
> 
> 时间：2012-10-24T00:52:06.737
> 
> 标签：c#, asp.net, odata

我有一个从 LightSwitch 暴露的 OData 服务，我试图通过服务注册 asp.net 数据动态 Web 应用程序的上下文

```
northwindData context = new LSService.northwindData(new Uri("http://localhost/northwindlob/northwinddata.svc/"));

DefaultModel.RegisterContext(//Not sure what i should type here!); 
```

任何想法？

# c++ - 模拟鼠标事件和键盘事件 c++ linux

> ID：13041511
> 
> 赞同：1
> 
> 时间：2012-10-24T00:52:36.833
> 
> 标签：c++, mouseevent

我需要为我的项目模拟一些鼠标事件和键盘事件，并且无法找到很多相同的信息。

我尝试了从stackoverflow帖子获得的用于模拟鼠标的原始X11代码，它似乎工作正常，但我无法理解代码：

```
void mouseClick(int button)
{
   Display *display = XOpenDisplay(NULL);

   XEvent event;

   if(display == NULL)
   {
      fprintf(stderr, "Errore nell'apertura del Display !!!\n");
      exit(EXIT_FAILURE);
   }

   memset(&event, 0x00, sizeof(event));

   event.type = ButtonPress;
   event.xbutton.button = button;
   event.xbutton.same_screen = True;

   XQueryPointer(display, RootWindow(display, DefaultScreen(display)), &event.xbutton.root, &event.xbutton.window, &event.xbutton.x_root, &event.xbutton.y_root, &event.xbutton.x, &event.xbutton.y, &event.xbutton.state);

   event.xbutton.subwindow = event.xbutton.window;

   while(event.xbutton.subwindow)
   {
      event.xbutton.window = event.xbutton.subwindow;

      XQueryPointer(display, event.xbutton.window, &event.xbutton.root, &event.xbutton.subwindow, &event.xbutton.x_root, &event.xbutton.y_root, &event.xbutton.x, &event.xbutton.y, &event.xbutton.state);
   }

   if(XSendEvent(display, PointerWindow, True, 0xfff, &event) == 0) fprintf(stderr, "Error\n");

   XFlush(display);

   usleep(100000);

   event.type = ButtonRelease;
   event.xbutton.state = 0x100;

   if(XSendEvent(display, PointerWindow, True, 0xfff, &event) == 0) fprintf(stderr, "Error\n");

   XFlush(display);

   XCloseDisplay(display);
} 
```

所以我想问一下 xlib 库是否有任何更简单的抽象，而无需经历所有这些，因为我什至需要模拟可以与 g++ 一起使用的键盘操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:12:23.977

[xdotool](http://www.semicomplete.com/projects/xdotool/)是我以前使用过的命令行界面，它在 Fedora 存储库中可用。

还有相关的[libxdo](http://www.semicomplete.com/files/xdotool/docs/)似乎是一个更直接的帮助。例如

[`xdo_mousemove (const xdo_t * xdo, int x, int y, int screen)`](http://www.semicomplete.com/files/xdotool/docs/html/xdo_8h.html#a80693b1fa003dd7358a04f9e1a518ad9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T10:59:22.787

XSendEvent 不起作用，因为许多应用程序通过 XSendEvent 丢弃假键盘事件。

模拟键盘事件的最佳方法是使用 XTestFakeKeyEvent api。

以下代码将模拟 F5 按键事件。

```
XTestFakeKeyEvent(display, XKeysymToKeycode(display, XK_F5), True, 0);
XTestFakeKeyEvent(display, XKeysymToKeycode(display, XK_F5), False, 0); 
```

# android - 扫描二维码并显示其价值

> ID：13041512
> 
> 赞同：1
> 
> 时间：2012-10-24T00:52:45.397
> 
> 标签：android, android-camera, zxing

我正在使用 Zxing 条码扫描仪应用程序扫描条码

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
startActivityForResult(intent, 0); 
```

我可以在 onActivityResult 中得到结果。我想显示 QR 码的值和 QR 码本身。我无法弄清楚如何同时扫描和捕获 QR 码的图像。

有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:36:41.867

ZXing 在扫描时实际上并没有拍照。它确实从相机馈送中“捕获”图像，但它不会将任何内容保存到 SSD 卡或内存中。如果您使用他们在其网站上发布的 IntentIntegrator 代码进行扫描，您可以获得原始字节。

[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentResult.java](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/IntentResult.java)

您可以看到 IntentResult 具有原始字节。我不完全知道它是什么格式，但我敢打赌你可以将它传递给 Bitmap 以获取图像。

# javascript - 如果所有覆盖都关闭，则执行函数

> ID：13041513
> 
> 赞同：0
> 
> 时间：2012-10-24T00:52:45.480
> 
> 标签：javascript, javascript-events, yui2

我在页面顶部的横幅上有一个按钮，`yui2`可以在屏幕上启动多个叠加层。每个叠加层都有一个关闭按钮（它只是将可见性更改为隐藏，以便可以重复使用）。启动叠加层后，横幅上还会出现一个按钮，如果单击该按钮将关闭所有叠加层。

这使用户可以选择关闭全部或单独关闭每个。这就是我坚持的：

如果用户关闭了单个覆盖，在我关闭覆盖后，我想检查是否有任何其他覆盖仍然打开。如果他们碰巧单独关闭了所有这些，那么我需要恢复顶部的横幅并删除“关闭所有按钮”。

我可以通过执行以下操作来搜索所有叠加层：

```
var elements = YAHOO.util.Dom.getElementsByClassName('test'); 
```

我想不出每次关闭覆盖时我需要执行的逻辑来查看该数组以查看如果隐藏所有这些都设置为可见性。如果是，则执行一个函数。如果页面上仍有任何可见的叠加层，则什么也不做。

这是我想出的答案。只是不确定它是否正确。

```
 var elements = document.getElementsByClassName('test');
 var visiblecounter = 0;
 for (var i = 0; i < elements.length; i++) {
    if(elements[i].style.visibility!='hidden'){
      alert("not hidden");  
      visiblecounter ++;    
     }     
  }
     ​
if(visiblecounter > 0){
    alert("all overlays are closed individually. you can remove close all button");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:19:08.827

我不确定我是否得到了这个问题，但我会尽力提供帮助。以下是我会做的一些事情。我还定义了一个活动类，所以我的 HTML 元素会这样写：

```
<div class="john active"></div> 
```

在我的CSS中我会写。

```
.john {display: none};
.active {display: block}; 
```

所以默认情况下对象是隐藏的！但是，当您将“活动”类附加到它时，它会出现在屏幕上。所以现在我们可以做下面的魔法了。

```
$(".hideButton").click(function() {
    $(this).removeClass("active");
}); 
```

如果我想隐藏所有其他对象，假设它们在 DOM 中具有相同的父对象

```
$(".hideOthersButton").click(function() {
    $(this).siblings().removeClass("active");
}); 
```

如果我想隐藏所有共享同一个父对象的对象。

```
$(".hideEverything").click(function() {
    $(".parent").children().removeClass("active");
}); 
```

我希望这有帮助！如果您需要更多帮助，请告诉我。该解决方案使用 Jquery，但您可以将逻辑重新用于其他任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:22:44.363

您提到您正在重用这些叠加层，因此由于您正在汇集叠加层以供重用，我假设您将它们放在一个数组或类似的东西中。不是检查 DOM（这总是很昂贵）来查看它们是否可见，而是遍历覆盖数组检查[可见属性](http://developer.yahoo.com/yui/docs/YAHOO.widget.Module.html#config_visible)，例如：

```
 var anyVisible = false;
   for (i = 0; i < myOverlays.length; i+=1) {
        anyVisible |= myOverlays[i].cfg.getProperty("visible");
   } 
```

如果其中任何一个可见，请禁用该按钮。

# javascript - 根据用户输入向 JQuery Validator 添加和删除规则？

> ID：13041514
> 
> 赞同：0
> 
> 时间：2012-10-24T00:52:51.357
> 
> 标签：javascript, jquery, dynamic, validation, validationrules

希望根据用户输入禁用某些字段的验证规则。

使用 jquery 验证器插件，这可能吗？JSfiddle 在这里：http: [//jsfiddle.net/webhelpla/3eQam/](http://jsfiddle.net/webhelpla/3eQam/)

```
 <html>
    <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
      <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>

      <script type="text/javascript">
            $(document).ready(function(){
            $("#form").validate();
          });  

       </script> 
    </head>
    <body>

      <form  id="form" method="get" action="">

         <p>
           <label>Validate all
             <input type="radio" name="fields_to_validate" value="all" id="fields_to_validate_0">
             </label>
         </p>    
         <p>         
             <label> Validate name only   
             <input type="radio" name="fields_to_validate" value="name" id="fields_to_validate_1">
             </label>       
         </p>   

        <p>
          <label for="cname">Name</label>
           *<input id="cname" name="name" size="25" class="required" minlength="2" />
         </p>

         <p>
           <label for="cemail">E-Mail</label>
           *<input id="cemail" name="email" size="25"  class="required email" />
         </p>

         <p>
           <input class ="submit" type="submit" value="Submit"/></p></form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:00:08.997

您正在寻找的是该字段的条件参数

我相信它是这样的，从您的输入元素中删除硬编码的必需类，将表示您的必需字段的两个单选按钮命名为不同的名称，例如 name_only 和：

```
 $('form').validate({
    rules:
       name:{
        required: function() {
         return $("input:radio[name='nameonly']:checked").val() == 'yes';
       }
     }
  }); 
```

所以它不能动态地确定直接用户输入应该需要什么，它的输入是基于条件输入的

# javascript - 动画形状内的 KineticJS 点击检测

> ID：13041516
> 
> 赞同：6
> 
> 时间：2012-10-24T00:52:53.147
> 
> 标签：javascript, kineticjs

好吧，我承认我试图变得聪明：我想如果我覆盖 Shape 的 drawFunc 属性，我可以简单地在矩形内绘制任何内容，并且仍然使用 KineticJS 的点击检测。这是我的尝试：

```
var shape = new Kinetic.Shape({
  drawFunc: function(context) {
    var id = 26;  // Id of a region inside composite image.
    context.beginPath();
    context.rect(0, 0, w, h);
    context.closePath();
    this.fill(context);
    this.stroke(context);
    context.drawImage(copyCanvas, (id % 8) * w, flr(id / 8) * h, 
        w, h, 0, 0, w / 2, h / 2);
  },
  draggable: true
}); 
```

因此，想法是绘制一个矩形，并使用 drawImage() 在矩形顶部绘制一些东西（就像纹理一样，除了它会不时更改，因为 copyCanvas 本身会发生变化）。与此同时，我希望事件处理（尤其是拖放）仍然“正常工作”。好吧，这就是发生的事情：我的 drawImage() 未覆盖的矩形部分正确检测到点击。但是，图像覆盖的矩形的四分之一拒绝响应点击！现在，我的问题是为什么？我深入研究了 KineticJS 代码，并认为点击检测只是意味着绘制到缓冲区并查看给定的 x、y 点是否具有非零 alpha。我看不出这会受到我在矩形顶部绘制图像的影响。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:46:22.863

好的，所以我继续查看源代码。这是*确定*的答案：

KineticJS 为使用从 RGB 颜色到形状对象的全局映射创建的每个形状分配随机且唯一的 RGB 颜色。形状的`draw()`函数被调用了两次：一次使用“真实”画布，一次使用用于命中检测的“缓冲”画布。当使用“缓冲区”画布时，KineticJS 将笔触和填充颜色切换为给定形状的唯一 RGB 颜色。同一个“缓冲”画布用于图层上的所有形状。因此，命中检测只是读取给定点的 RGB 值并在全局地图中查找相应的形状。现在，在我的示例中，我以一种绕过 KineticJS 用于命中检测的颜色杂耍的方式绘制了一个图像。因此，当我点击图像区域时，

解决方案不是为“缓冲区”（或“命中检测”）阶段绘制图像：一个简单的矩形就可以了。如果您想知道，这里是正确的代码`drawFunc`：

```
var width = 200;
var height = 100;
var myShape = new Kinetic.Shape({
  drawFunc: function(context) {
    if (layer.bufferCanvas.context == context) {
      context.beginPath();
      context.rect(0, 0, width, height);
      context.closePath();
      this.fill(context);
      this.stroke(context);
     } else {
       context.drawImage(someCanvasWithAnythingOnIt, 0, 0, width, height,
         0, 0, width, height);
     }
  }}); 
```

我可以领取自己的奖励吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T12:01:29.763

我认为你的问题在于顺序。您绘制的每个对象都有一个深度，默认排序就像一个堆栈，最后绘制的是在顶部。现在您已经修改了代码，在 shape draw 函数中进行了 2 次绘制，我仍然认为保留了顺序，因此对象无法检测到输入。尝试更改顺序，即先绘制图像，然后绘制矩形，看看问题是否解决。否则，以 jsFiddle 为例。

# python - 关于 QtNetworking 和 QtWebkit 的 PyQT4 或 PySide 教程

> ID：13041517
> 
> 赞同：2
> 
> 时间：2012-10-24T00:52:57.177
> 
> 标签：python, pyqt, pyside

我正在尝试查找涵盖 QtNetworking 和 QtWebKit 的 PyQT 或 PySide 教程，我只能找到有关 QtCore 的教程和一些如何创建 bottons 和其他类似 gui 的教程。但我看起来有点不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:16:37.497

虽然不是您问题的真正答案 - 当面临相同的基本问题时 - 以下是我用来启动和运行的资源：

*   虽然在版本方面有点落后，但这是一本包含大量示例和实用设计方法的好书——[使用 Python 和 Qt 进行快速 UI 编程](http://www.qtrac.eu/pyqtbook.html) ——它是为 PyQt 编写的，但只需稍作改动即可轻松适用于 PySide。

*   [pyside-examples](http://qt.gitorious.org/pyside/pyside-examples) - pyside-examples 集合通常是我想办法编写 PySide 代码的第一站。它们具有 C++ 示例的 Python 类似物，涵盖了大多数主题。然而，具体来说，*qwebkit*的内容充其量只是简短的。

*   [PySide API 文档](http://srinikom.github.com/pyside-docs/)- PySide 内容过去很容易在 pyside.org（或类似的东西......）上获得，现在它位于一个时髦的[github 地址](http://srinikom.github.com/pyside-docs/)- [http://qt-project.org/wiki/PySide](http://qt-project.org/wiki/PySide)，对于任何偏执狂URL hawks 在那里，您可以验证是否已发布@新 Qt 项目网页[http://qt-project.org/wiki/PySide](http://qt-project.org/wiki/PySide)

*   如果您不了解 C++ Qt 并且您首先学习 pyside - 请考虑熟悉 C++ 内容。关于 C++ 代码的教程和解释比 PySide（或 PyQt）多得多。如果您了解 MVC、信号/插槽、异步网络和 UI 小玩意——从 PySide 转换到 Qt C++ 不会很痛苦。但如果没有这些技能，最初的学习曲线可能会有点陡峭。有一些东西需要考虑，比如 Qt 的 UI 事件循环、Qt 线程与 Python 线程等（如有疑问，请使用“Qt 方式”）

*   看看其他人的程序 - github、googlecode 和 gitorious 有相当数量的 PySide/PyQt 项目可以通过。

*   如果您想要一个练习大量 PyQt/PySide 功能的“厨房水槽”示例，我建议[您使用 spyderlib](http://code.google.com/p/spyderlib/)。很难从其中“提取”一些东西来重用，但它确实为您提供了一个很好的基础来开始进行更改、重新运行代码并观察更改。

# javascript - 从登录对话框获取登录详细信息

> ID：13041519
> 
> 赞同：-2
> 
> 时间：2012-10-24T00:53:08.847
> 
> 标签：javascript, session, login

我想我已经知道我的答案，但我想确保我是正确的..

我正在使用如下所示的登录对话框在 Web 浏览器中登录我的 GUI：

![在此处输入图像描述](../Images/3cc9918b7525f69875b30cfd5f6e6b17.png)

只是想知道是否可以获取使用 JavaScript 输入的用户名和密码？

另外，有没有办法使用 JavaScript 终止会话，以便在用户单击链接时再次询问您的登录详细信息？

我猜这是不可能的，但只是想确定一下？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T01:01:47.257

是的，假设你有

```
<input id="login"></input>
<input id="password"></input>
<span class="submit"></span> 
```

您可以将其保存到全局 json 对象，例如..

```
var information = {
     username: "",
     password: ""
} 
```

并使用类似这样的代码在点击事件中抓取它......

```
$(".submit").click(function() {
     information.username = document.getElementById("login").value;
     information.password = document.getElementById("password").value;
}); 
```

希望这可以帮助..

# php - 具有本地 SVN 存储库的作曲家

> ID：13041520
> 
> 赞同：5
> 
> 时间：2012-10-24T00:53:13.647
> 
> 标签：php, svn, symfony, composer-php

我正在尝试使用本地 SVN 存储库运行作曲家，我可以点击我想要的存储库，但作曲家不断添加`/branch`到 URL 的末尾。

我怎样才能覆盖这个？

以下是文档：

*   [http://getcomposer.org/doc/05-repositories.md#vcs](http://getcomposer.org/doc/05-repositories.md#vcs)

我所拥有的示例

```
"repositories": [
    {
        "type": "vcs",
        "url": "http://host.com/externals/project",
        "trunk-path": "trunk",
        "branches-path": "branches",
        "tags-path": "tags",
        "reference": "symfony/symfony"
    }
],
"require": {
    "project/project": "svn-project"
} 
```

输出是这样的：

```
[RuntimeException]                                                                                                                                                      
Repository http://host.com/externals/project/version could not be processed, 
svn: URL 'http://host.com/externals/project/version/branches' 
non-existent in that revision 
```

这是我的颠覆布局：

```
http://host.com/externals/project/version 
```

*   外部是像 Symfony 这样的库
*   项目是 Symfony
*   版本是 2.1.2

所以我的 svn repo 是这样的：

```
http://host.com/externals/symfony/2.1.2 
```

有什么想法吗？

这就是我为存储我们正在使用的外部库工作的公司的方式

更新：

我已将我们的仓库更改为：

```
http://host.com/externals/symfony/trunk/ <-- empty directory
http://host.com/externals/symfony/branches/ <-- empty directory
http://host.com/externals/symfony/trunk/2.1.2 <-- holds the Symfony 2.1.2 release code 
```

现在我收到这条消息：

```
Reading composer.json of http://host.com/externals/symfony/ (2.1.2)
Importing tag 2.1.2 (2.1.2.0) 
```

但它仍然从 github 存储库而不是我的 svn 存储库中提取。

我也读过Satis

*   [http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md](http://getcomposer.org/doc/articles/handling-private-packages-with-satis.md)

但如果我在那里，我在哪里举办这个？

*   哪个项目？
*   在我的 SVN 存储库上？
*   别处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:58:10.370

看起来 Composer 假设您坚持使用`/trunk`、`/branches`和`/tags`. 另外，您必须输入存储库根目录的 URL，而不是完整的项目路径。您可以使用 指定项目特定的路径`package-path`。

请参阅文档[作曲家 | 颠覆选项](http://getcomposer.org/doc/05-repositories.md#subversion-options)。

> 由于 Subversion 没有原生的分支和标签概念，Composer 默认假定代码位于`$url/trunk`,`$url/branches` 和`$url/tags`. 如果您的存储库具有不同的布局，您可以更改这些值。

# java - 不匹配的关闭 ')' 模式异常

> ID：13041522
> 
> 赞同：2
> 
> 时间：2012-10-24T00:53:20.293
> 
> 标签：java, regex

我有这个正则表达式：

```
"\\(d+)(,)\\(w+)(,)\\(w+)(,)\\(w+)(,)\\(\")(d+)(,)(d+)(.)(d+)(\")(,)\\(w+)(,)\\(w+)(,)\\(w+)"; 
```

我收到了这条消息：

> 索引 3 附近无与伦比的关闭 ')'

有人可以提示我的正则表达式有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T00:57:18.963

您正在转义第一个括号（因此其含义将是字面意思）但不是下一个，因此它是无效的正则表达式。

```
"\\(d+)(,)
   ^  ^
   |  |
    --+- // You have escaped this one...
      |
       - // ...but not this one. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T00:57:48.347

而不是`\\(d+)`你可能想要`(\\d+)`甚至更好`\\d+`。您收到错误是因为不`\\`影响。`(``d`

# graph - 允许到达最大所有其他顶点的最小顶点集。一个边缘

> ID：13041524
> 
> 赞同：5
> 
> 时间：2012-10-24T00:53:32.507
> 
> 标签：graph, minimum, vertices

这可能是一个愚蠢的问题，但是什么是规范问题，它要求从图中获取最小的顶点集，以便从这些顶点中，通过“旅行”不超过一条边可以到达所有其他顶点？现实生活中的应用是：我需要认识哪些人，才能与地球上的其他人只有一个度数？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T11:26:44.083

我认为这是[Domination Set Problem](http://en.wikipedia.org/wiki/Dominating_set)，与正常的 set cover 问题密切相关

# xcode - OSX 10.8 xcrun（没有这样的文件或目录）

> ID：13041525
> 
> 赞同：26
> 
> 时间：2012-10-24T00:53:40.900
> 
> 标签：xcode, macos, gcc, osx-mountain-lion, xcrun

在 OSX 10.8 上执行`gem install jekyll`安装了来自 Apple 开发人员站点的独立命令行工具包（无 Xcode）时，我遇到以下错误：

> 构建原生扩展。这可能需要一段时间...
> 
> 错误：安装 jekyll 时出错：
> 
> 错误：无法构建 gem 原生扩展。

…</p>

```
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c porter.c
xcrun: Error: failed to exec real xcrun. (No such file or directory) 
```

gcc 已安装：

```
$ which cc
/usr/bin/cc 
```

xcrun 的查找路径已设置：

```
xcode-select -print-path
/usr/bin 
```

但无论我尝试哪种参数，xcrun 都会返回

> xcrun：错误：无法执行真正的 xcrun。（没有这样的文件或目录）

`man xcrun`读取“当使用名称 xcrun 调用 xcrun 时，标志 -log 和 -verbose 是有用的调试辅助工具。标志 -no-cache 可用于绕过缓存查找。” 但这似乎都没有任何效果：唯一的输出仍然是上面的……</p>

**解决方案：**按照下面 Ned Deily 的建议，我将 xcrun 替换为 shell 脚本，以简单地调用给定的参数：

```
#!/bin/bash
$@ 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-24T01:18:51.233

不幸的是，至少在我上次玩它时，我发现你真的不能`xcrun`只使用独立`Command Line Tools`包。它显然不是为那个用例设计的。独立包是 Xcode 4 的一项相当新的创新。如果您尝试安装的产品确实依赖于`xcrun`，您可能需要安装完整的`Xcode.app`发行版才能绕过它。那，或者修改发行版的 Makefile 等以不使用`xcrun`. 或者，可能（未经测试），创建一些目录和/或符号链接以假装`xcrun`认为您已经`Xcode.app`安装 - 一个凌乱的黑客。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-13T20:47:48.893

在控制台上输入以下命令：

```
sudo xcode-select -switch /usr/bin
sudo mv /usr/bin/xcrun /usr/bin/xcrun-orig
sudo vim /usr/bin/xcrun 
```

在您的虚拟 xcrun 文件中输入以下内容：

```
#!/bin/sh
$@ 
```

然后使其可执行：

```
sudo chmod 755 /usr/bin/xcrun 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-24T00:59:23.363

即使安装了命令行工具，您的 xcode-select 也很奇怪。它应该指向您的 XCode 包，而不是`/usr/bin`：

```
$ xcode-select -print-path
/Applications/Xcode.app/Contents/Developer 
```

像这样切换到 Xcode：

```
$ sudo xcode-select --switch /Applications/Xcode.app 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-01T20:26:57.397

我在使用 brew install hg 时遇到问题。xcodebuild -version 的输出令人窒息。

这是一个可怕的 hack，但我用一个 shell 脚本替换了 /usr/bin/xcodebuild，它刚刚回显“4.3”并且能够成功安装 mecurial。

# azure - Azure 备份还原

> ID：13041527
> 
> 赞同：1
> 
> 时间：2012-10-24T00:54:00.533
> 
> 标签：azure, backup

我想将现有的服务器 2008 实例从 Rackspace/Hostway 移动到 Azure。我可以进行完整的操作系统/数据备份，将备份文件复制到 Azure 服务器，然后从备份文件中恢复吗？您如何建议我将此服务器迁移到 Azure？Hostway 不会让我得到 VMDK 文件的副本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:59:49.950

你可以在 Azure 云中预配 SQL VM，然后直接将数据库同步到它或将数据库文件直接复制到它。与 SQL Azure 服务相比，这也有巨大的性能改进，对于具有大量数据库访问权限的大型商业应用程序，我们发现这几乎是一种要求，而不是一种选择。（DB 应该在您的 C 驱动器上，以便它在本地磁盘上运行。）由于数据复制方式的原因，SQL Azure 很慢，强烈建议使用运行该服务的本地 VM。我们有一个 11GB 的数据库，这是从中获得一些合理性能的唯一方法。

有关我们的基准测试，请参阅[https://stackoverflow.com/questions/2711868/azure-performance/13091125#13091125](https://stackoverflow.com/questions/2711868/azure-performance/13091125#13091125)。我已经在 VMS 上对 SQL 进行了测试，它与本地解决方案相当。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:35:32.843

您是否尝试联系支持以向您提供 VMDK 或 VHD 文件？为什么你这么肯定他们不会给你？

如果他们不这样做，您可以使用 Windows 备份或任何映像软件进行完整的系统备份。在本地获取该备份。在虚拟机上本地还原备份。在该本地 VM 上[运行 sysprep 。](http://www.windowsazure.com/en-us/manage/windows/how-to-guides/capture-an-image/)获取 VHD，将其上传到 Azure，最后从该 VHD 创建一个 Windows Azure VM。

# spring - @Bean (autowire = Autowire.BY_NAME)

> ID：13041536
> 
> 赞同：0
> 
> 时间：2012-10-24T00:54:49.333
> 
> 标签：spring

**将@Bean**的 autowire 属性设置为***Autowire.BY_NAME*的目的是什么**

查看 JavDocs，我真的不知道我什么时候会使用它，或者为什么它会被设置为***Autowire.BY_NAME***

```
/**
 * Are dependencies to be injected via autowiring?
 */
Autowire autowire() default Autowire.NO; 
```

我有一个现有的原型 bean，它是用

```
@Bean (autowire = Autowire.BY_NAME) 
```

但我不明白为什么。评论仅说明：

> 注意：我们必须在 bean 定义中显式设置 Autowire.BY_NAME 才能在其他 spring 配置类中使用 @Autowired

这是否意味着我们必须将 bean 设置为 @Bean (autowire = Autowire.BY_NAME) 以便能够将 Bean 与 @Autowired 一起使用，并且它将通过来自 @Bean 的名称自动装配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:55:43.147

`@Bean(autowire=Autowire.BY_NAME)`相当于这个 xml 配置：

```
<bean class="Person" id="person" autowire="byName"></bean> 
```

这表明使用上述`Person`类创建的 bean 是否需要在“按名称”中自动装配其字段 - 如果上面的测试 bean 有一个字段 say `address`，Spring 将寻找一个具有名称的 bean`address`作为依赖项注入（而不是按类型`Address`）。

如果可能有超过 1 个特定类型的实例，则通常使用此方法，然后您将使用名称选择特定实例 - 再次考虑上面的示例，如果有两个具有 names 的地址 bean `addressHome`，`addressWork`并且如果`Person`class有一个名为 name 的字段`addressHome`并将其设置为`Autowire.BY_NAME`，具有 name 的 bean`addressHome`将设置为该字段。如果是`Autowire.BY_TYPE`这样，它就会失败，因为有两个相同类型的地址实例`Address`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-28T08:33:56.283

```
As @Bean (autowire = Autowire.BY_NAME) is deprecated. 
```

没有语法替代方案，Autowire by Name 被理解。您只需提供与@Bean 方法名称或@Component 名称相同的名称。

# regex - 如何在通过 sed/perl 保留某些字符的同时删除行？

> ID：13041537
> 
> 赞同：0
> 
> 时间：2012-10-24T00:54:57.707
> 
> 标签：regex, linux, perl, sed, replace

我正在尝试对所有 .php 文件进行大规模搜索并替换以下字符串以进行恶意软件清理：

```
<?php ob_start("security_update"); function security_update($buffer){return $buffer.base64_decode('PHNjcmlwdD5kb2N1bWVudC53cml0ZSgnPHN0eWxlPi52Yl9zdHlsZV9mb3J1bSB7ZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApO29wYWNpdHk6IDAuMDt3aWR0aDogMjAwcHg7aGVpZ2h0OiAxNTBweDt9PC9zdHlsZT48ZGl2IGNsYXNzPSJ2Yl9zdHlsZV9mb3J1bSI+PGlmcmFtZSBoZWlnaHQ9IjE1MCIgd2lkdGg9IjIwMCIgc3JjPSJodHRwOi8vd3d3Lml3cy1sZWlwemlnLmRlL2NvbnRhY3RzLnBocCI+PC9pZnJhbWU+PC9kaXY+Jyk7PC9zY3JpcHQ+');} 
```

我可以通过删除整行`sed '/buffer.base64_decode/d' file.php`。但是，我仍然需要开口`<?php`

所以真正需要做的是搜索和替换`buffer.base64_decode`for `<?php`，在这台邪恶的电脑前度过漫长的一天后，我的大脑全是土豆泥。

或者，也许我认为自己进入了一个小盒子，而这一切都错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:26:36.273

而不是删除该行，您不只是*更改*它吗？以下是如何使用`GNU sed`：

```
sed -i '/buffer.base64_decode/c \<?php ' file.php 
```

现在对于您工作目录中的所有文件：

```
find . -type f -name "*.php" -exec sed -i '/buffer.base64_decode/c \<?php ' {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:17:10.687

`perl -pe 's/<\?php ob_start\("security_update"\);.*?\?>//gsm; s/<\?php ob_start\("security_update"\);.*/<?php/g;' test.php`

# javascript - jQuery/js 可以帮我确定一个 URL 是否存在

> ID：13041538
> 
> 赞同：1
> 
> 时间：2012-10-24T00:55:03.707
> 
> 标签：javascript, jquery

我不知道是否更重要，jQuery/Ajax 可以帮助我确定给定的 URL 是否在线。

我真正要寻找的是与 URL 的 http 连接的 HTTP 状态代码，但问的可能太多了？

url 是用户输入，因此我无法修改要连接的服务器上的环境。

每一个帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:25:46.567

这在浏览器内部是不可能的，但是如果您要向您的网络服务器发出 ajax 请求，您可以要求它进行验证。

客户代码

```
$.ajax({
    url: "urltest.py",
    cache: false, 
    dataType: "text"
    success: function(data){
        if(data === "SUCCESS"){
        //do things
        } else {
        //else do other things
        }
    }
}); 
```

服务器代码

```
def call_server(self, url):
    headers = {'Content-Type': 'application-json'
              , 'Accept' : 'application-json'
              , 'Accept-Encoding' : 'gzip, deflate'
              }
    r = requests.get(url)
    if r.status_code == 200:
        print "SUCCESS"
    else:
        print "No soup for you" 
```

没有经过测试或任何东西，但你明白了。

# java - 无法正确显示 Java GUI 布局

> ID：13041539
> 
> 赞同：0
> 
> 时间：2012-10-24T00:55:11.560
> 
> 标签：java, swing, layout, awt, layout-manager

我正在处理这个应用程序，但我无法让 GUI 正确显示。我正在使用 FlowLayout，一切看起来都很混乱（任何其他布局看起来更糟）。如果只有某种方法可以在部分之间添加水平规则，那将起作用，但我尝试过的任何方法都不起作用。

这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import java.sql.*;
import javax.swing.*;

public class ConnectToDB implements ActionListener {
    public static void main(String[] args){

        //GUI STUFF
        //constants
        final int windowX = 640; //pixels
        final int windowY = 655; //pixels
        final int fieldX = 20;   //characters
        final FlowLayout LAYOUT_STYLE = new FlowLayout();

        //window
        JFrame window = new JFrame("Mike's MySQL GUI Client");

        //Connection Details
        JLabel enterInfo = new JLabel("Enter Connection Details: ");
        JLabel driver = new JLabel("Database Driver: ");
        JTextField driverText = new JTextField(fieldX);
        JLabel dburl = new JLabel("Database URL: ");
        JTextField dburlText = new JTextField(fieldX);
        JLabel dbuser = new JLabel("Username: ");
        JTextField dbuserText = new JTextField(fieldX);
        JLabel dbpass = new JLabel("Password: ");
        JTextField dbpassText = new JTextField(fieldX);

        //Enter a SQL Command
        JLabel enterSQL = new JLabel("Enter a SQL Command:");
        JTextArea enterSQLText = new JTextArea(10, 30);

        //Connection Status and Command Buttons
        JLabel connectionStatus = new JLabel ("No Connection Now");
        JButton connectButton = new JButton("Connect");
        JButton executeButton = new JButton("Execute SQL Command");
        JButton clearCommandButton = new JButton("Clear Command");

        //SQL Execution Result
        JLabel executionResult = new JLabel("SQL Execution Result:");
        JButton clearResultsButton = new JButton("Clear Results");
        JTextArea executionResultText = new JTextArea(20, 50);

        //Configure GUI
        window.setSize(windowX, windowY);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        driverText.setEditable(false);
        dburlText.setEditable(false);
        dbuserText.setEditable(false);
        dbpassText.setEditable(false);
        executionResultText.setEditable(false);

        //Register Event Listeners
        connectButton.addActionListener(null);
        executeButton.addActionListener(null);
        clearCommandButton.addActionListener(null);
        clearResultsButton.addActionListener(null);

        //Construct Container
        Container c = window.getContentPane();

        c.setLayout(LAYOUT_STYLE);

        c.add(enterInfo);
        c.add(driver);
        c.add(driverText);
        c.add(dburl);
        c.add(dburlText);
        c.add(dbuser);
        c.add(dbuserText);
        c.add(dbpass);
        c.add(dbpassText);
        c.add(connectionStatus);
        c.add(connectButton);
        c.add(enterSQL);
        c.add(enterSQLText);
        c.add(executeButton);
        c.add(clearCommandButton);
        c.add(new JSeparator(SwingConstants.VERTICAL));
        c.add(executionResult);
        c.add(clearResultsButton);
        c.add(executionResultText);

        window.setVisible(true);//END GUI STUFF

        //DB Connection details
        System.out.println("Attempting to connect to database...");
        Connection conn = null;
        String url = "jdbc:mysql://localhost/";
        String dbName = "project3";
        String DBdriver = "com.mysql.jdbc.Driver";
        String userName = "root"; 
        String password = "OMGnpw=-0";

        driverText.setText(DBdriver);
        dburlText.setText(url);
        dbuserText.setText(userName);
        dbpassText.setText(password);

        try 
        {
          //Connect to DB and notify user
          Class.forName(DBdriver).newInstance();
          conn = DriverManager.getConnection(url+dbName,userName,password);
          System.out.println("Connected to the database");

          /*>>>>>>Do everything you need to do while connected to DB<<<<<<*/

          //HOW TO EXECUTE A STATEMENT AND PRINT IT
          //Create a statement
          Statement statement = conn.createStatement();
          //Execute a statement
          ResultSet resultSet = statement.executeQuery("SELECT * FROM riders");
          //Process query results
          ResultSetMetaData metaData = resultSet.getMetaData();
          int numberOfColumns = metaData.getColumnCount();

          for(int i = 1; i<= numberOfColumns; i++){
              System.out.printf("%20s\t", metaData.getColumnName(i));
          }
          System.out.println();

          while (resultSet.next()){
              for (int i = 1; i <= numberOfColumns; i++){
                  System.out.printf("%20s\t", resultSet.getObject(i));
              }
              System.out.println();
          }
          /*>>>>>>Finish DB activities<<<<<<*/

          //Disconnect from DB
          conn.close(); 
          System.out.printf("Disconnected from database");
        } 
        catch (Exception e) {
        e.printStackTrace();
        }
    }

    public void actionPerformed(ActionEvent e){
        System.out.println("Button Works!");
    }
} 
```

我可能需要使用不同的布局，但 FlowLayout 是我唯一熟悉的布局。谁能建议一个简单的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:10:40.223

尝试盒子布局。并添加一些面板。使面板流动布局并在每个面板中放置一对标签和文本字段

```
|-----container with box layout-----|
panel[[flow]label texfield] 
panel[[flow]label texfield] 
panel[[flow]label texfield] 
panel[[flow]label texfield] 
panel[[flow]label texfield] 
panel[[flow]sqltextfields] 
panel[[flow]buttons] 
|-----------------------------------| 
```

并在底部附近放置您的 sql 文本字段和按钮

[http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:55:17.390

所以，我们在你身边玩一点就可以实现这个...

这使用了卡片布局、边框布局、网格包布局和流布局的组合

连接窗格...

![在此处输入图像描述](../Images/548f6560d8bbeb4e1565c66dc2d9a107.png)

查询窗格

![在此处输入图像描述](../Images/4c62fc79b9c967d7f0a4e14d284dffd0.png)

```
public class TestLayout11 {

    public static void main(String[] args) {
        new TestLayout11();
    }

    public TestLayout11() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SQLPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class SQLPane extends JPanel {

        private ConnectionPane connectionPane;
        private QueryPane queryPane;

        public SQLPane() {

            setLayout(new CardLayout(8, 8));

            connectionPane = new ConnectionPane();
            connectionPane.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {

                    // Perform login...
                    ((CardLayout) getLayout()).show(SQLPane.this, "query");

                }
            });
            queryPane = new QueryPane();

            add(connectionPane, "connection");
            add(queryPane, "query");

            ((CardLayout) getLayout()).show(this, "connection");

        }
    }

    public static class ConnectionPane extends JPanel {

        protected static final int FIELD_CHARACTER_WIDTH = 20;   //characters
        private JButton connectButton;
        private JTextField driverText;
        private JTextField dburlText;
        private JTextField dbuserText;
        private JTextField dbpassText;

        public ConnectionPane() {

            JLabel enterInfo = new JLabel("Enter Connection Details: ");
            JLabel driver = new JLabel("Database Driver: ");
            driverText = new JTextField(FIELD_CHARACTER_WIDTH);
            JLabel dburl = new JLabel("Database URL: ");
            dburlText = new JTextField(FIELD_CHARACTER_WIDTH);
            JLabel dbuser = new JLabel("Username: ");
            dbuserText = new JTextField(FIELD_CHARACTER_WIDTH);
            JLabel dbpass = new JLabel("Password: ");
            dbpassText = new JTextField(FIELD_CHARACTER_WIDTH);

            setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.anchor = GridBagConstraints.WEST;
            gbc.gridwidth = 2;
            gbc.insets = new Insets(2, 2, 2, 2);
            add(enterInfo, gbc);
            gbc.anchor = GridBagConstraints.EAST;
            gbc.gridwidth = 1;
            gbc.gridy++;
            add(driver, gbc);
            gbc.gridy++;
            add(dburl, gbc);
            gbc.gridy++;
            add(dbuser, gbc);
            gbc.gridy++;
            add(dbpass, gbc);

            gbc.gridx++;
            gbc.gridy = 1;
            gbc.anchor = GridBagConstraints.WEST;
            add(driverText, gbc);
            gbc.gridy++;
            add(dburlText, gbc);
            gbc.gridy++;
            add(dbuserText, gbc);
            gbc.gridy++;
            add(dbpassText, gbc);

            gbc.gridx = 0;
            gbc.gridy++;
            gbc.anchor = GridBagConstraints.CENTER;
            gbc.gridwidth = 2;
            connectButton = new JButton("Connect");
            add(connectButton, gbc);
        }

        public void addActionListener(ActionListener listener) {
            connectButton.addActionListener(listener);
        }

        public void removeActionListener(ActionListener listener) {
            connectButton.removeActionListener(listener);
        }
    }

    public static class QueryPane extends JPanel {

        private JTextArea enterSQLText;

        public QueryPane() {

            JLabel enterSQL = new JLabel("Enter a SQL Command:");
            enterSQLText = new JTextArea(10, 30);
            JButton clearResultsButton = new JButton("Clear Results");
            JButton executeButton = new JButton("Execute SQL Command");

            setLayout(new BorderLayout());

            add(enterSQL, BorderLayout.NORTH);
            add(new JScrollPane(enterSQLText));

            JPanel buttons = new JPanel();
            buttons.add(executeButton);
            buttons.add(clearResultsButton);
            add(buttons, BorderLayout.SOUTH);

            executeButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Execute query...
                    String text = enterSQLText.getText();
                    enterSQLText.setText("I've being executed....");
                }
            });

            clearResultsButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    enterSQLText.setText(null);
                }
            });

        }
    }
} 
```

# objective-c - Xcode 4.5 未将事件连接到 IBAction

> ID：13041540
> 
> 赞同：2
> 
> 时间：2012-10-24T00:55:16.023
> 
> 标签：objective-c, xcode, ios6

长话短说：我有一个用 Xcode 4.2 为 iOS5 开发的项目。我在模拟器上运行它，一切都很顺利。

最近我在 Xcode 4.5.1 中将项目移植到 iOS6。不久之后，我注意到没有按钮（内部事件的修饰）正在触发它们的 connected `IBActions`。我通过将`NSLog`函数调用放在`IBActions`. 看起来好像连接根本不存在，尽管我在 Interface Builder 中检查了三次是否存在连接。

我最近建立了一个简单的测试项目。一个只有一个按钮的单页故事板应用程序，连接到`IBAction`Touch Up Event 中的一个按钮。`IBAction`根本没有被解雇。然后我为按钮制作了一个插座并使用以下方法手动连接它：

```
[btn addTarget:self action:@selector(onButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

这次它起作用了——输出显示在控制台上。但是，如果我注释掉该行，它就不起作用，尽管它使用 Interface Builder 连接到同一个事件。这个问题的解决方法是显而易见的，但也非常乏味和不切实际。

关于可能导致此问题的任何想法？

# java - (Java SE/Android) 跨平台日志记录

> ID：13041550
> 
> 赞同：5
> 
> 时间：2012-10-24T00:56:37.530
> 
> 标签：java, android, logging

我希望我正在开发的这个库支持日志记录，但 Android 和 SE 有自己的日志记录方式。在 SE 中，您可以使用`System.out.println`方法或`java.util.logging.Logger`类。Android 用于`android.util.Log`登录 logcat。一开始我用反射来检查android是否可用，然后反射性地调用日志中的方法`Log.class`；但这不是一个好主意。

我的解决方案是让使用我的库的开发人员自己处理日志。他们会设置一个 Handler 接口，并有一个 onLog 方法

```
public void onLog(int level, String tag, String msg); 
```

该库将在我的自定义 Logger 类中的处理程序上调用 onLog 方法。让开发人员处理日志而不是库本身是个好主意吗？似乎是迄今为止最好的解决方案，如果我把它记录好，那么它应该不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T00:33:34.043

我同意你的观点，日志记录应该委托给客户，你的本土方法确实是明智的。

IMO，[SLF4J](http://www.slf4j.org)外观将非常适合您的情况。您的库将包含`slf4j-api`jar 并包含 SLF4J 日志记录语句。如果客户想要日志记录，他们只需将日志记录后端（和一个可选的配置文件）放入其应用程序的类路径中即可捕获/查看您的日志语句。

这种方法的优点是它为客户提供了获取日志所需的零编码的最大控制权；并且它允许客户端在许多可用的后端中进行选择。

我将[`logback`](http://logback.qos.ch)用作 J2SE 应用程序和[`logback-android`](http://logback.qos.ch/android/)Android 的后端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:09:55.263

你可以试试微博

[http://code.google.com/p/microlog4android/](http://code.google.com/p/microlog4android/)

它可以帮助您在 android 和 java 之间使用一致的日志记录机制。如果您使用 slf4j，它可以用作 microlog（对于您的 android 项目）和 log4j（对于您的 java 项目）的包装器

# java - 无法让图像显示在摇摆中

> ID：13041554
> 
> 赞同：1
> 
> 时间：2012-10-24T00:56:43.253
> 
> 标签：java, swing, embedded-resource

我是一名大学生，这是我第一次用 Java 创建 gui。现在，我[使用 Swing 在 Java 中查看了这个答案 GUI，](https://stackoverflow.com/questions/5837325/gui-in-java-using-swing)并按照说明进行操作，但仍然没有任何反应。这是代码。我删除了所有不相关的垃圾。

```
import javax.imageio.ImageIO;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Lab4Shell 
{
    // this holds the current game board
        private char[][] gameBoard = new char[7][8];
        private JButton[][] gameButtons = new JButton[7][8];

        private ImageIcon red = new ImageIcon("Red.jpg");
        private ImageIcon black = new ImageIcon("Black.jpg");
        private ImageIcon empty = new ImageIcon("Empty.jpg");

        private JPanel panel = new JPanel();

        private int currentPlayer = 1;
        private int numMoves = 0;
        //Why do you want everything in constructor?
        public Lab4Shell()
        {
            CreateWindow();
            ResetGame();

            // set layout
            // loop through buttons array creating buttons, registering event handlers and adding buttons to panel
            // add panel to frame
            // do other initialization of applet
        }

        public static void CreateWindow()
        {
            //Sets window title and create window object.
            JFrame aWindow = new JFrame("Connect Four");
            //Set window position and size
            aWindow.setBounds(500,100,400,400);
            //What close button does.
            aWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            //Make window visible.
            aWindow.setVisible(true);

        }

        public static void main(String args[])
        {
            SwingUtilities.invokeLater(new Runnable()
            {
                public void run()
                {

                    Lab4Shell game = new Lab4Shell();

                }
            });

        }
void ResetGame()
        {

            JLabel label = new JLabel();
            label.setIcon(empty);
            for(int r=0;r<gameBoard.length;r++)
            {
                java.util.Arrays.fill(gameBoard[r],0,gameBoard[r].length,'0');

                //loop through board columns
                for(int c=0;c<gameBoard[r].length;c++)
                {

                }

            }
            // loop through array setting char array back to ' ' and buttons array back to empty pic
            // reset currentPlayer and numMoves variables
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:31:12.197

正如 Manos 所说，您必须将创建的 ImageIcons 添加到面板中，并且作为 Eclipse 项目的 src 文件夹中的图像，请执行以下操作：

```
java.net.URL url = getClass().getResource("red.JPEG");
ImageIcon red = new ImageIcon(url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:08:16.780

你可以试试这个

```
BufferedImage myPicture = ImageIO.read(new File("path-to-file"));
JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
add( picLabel ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T01:39:06.050

如果资源嵌入到应用程序中（在 jar 中），您需要使用`Class#getResource`它们来加载它们。

加载图像的首选机制是通过[`ImageIO`API](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html)。它支持更多的图像格式（以及提供可插拔的架构）并保证一旦`read`方法返回就可以显示图像

```
BufferedImage redImage;

// ... 

URL url = getClass().getResource("red.JPEG");
if (url != null) {
    redImage = ImageIO.read(url);
} else {
    throw new NullPointerException("Unable to locate red image resource");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T04:36:04.680

你从来没有在你的框架中添加任何东西——这导致了你的问题。所以在你的`createWindow`方法中，你需要调用：

```
aWindow.setContentPane(panel); 
```

然后稍后（如在您的`resetGame`方法中），您将向`JLabel`面板添加内容（如 ）：

```
panel.add(empty); 
```

添加到面板的位置由面板的[LayoutManager](http://docs.oracle.com/javase/6/docs/api/java/awt/LayoutManager.html)确定（其中有很多 - 默认为`BorderLayout`）

其他有用的东西：

*   通常，当有意义时，在构造函数中创建/初始化您的对象并在运行时添加/删除/更新它们。
*   对于故障排除，请对您想要查看的内容使用`.setOpaque(true)`和方法。`.setBackground(Color.blue)`如果你当时没有看到它，要么有什么东西在掩盖它，要么它从未被添加

祝你好运。

# c# - 服务器连接到 NAT 后面的客户端

> ID：13041555
> 
> 赞同：5
> 
> 时间：2012-10-24T00:56:54.580
> 
> 标签：c#, .net, networking, network-programming

我用 C# 制作了一个服务器/客户端应用程序。

我的问题如下：假设客户端位于 NAT（如路由器）后面并尝试连接到服务器。从服务器的角度来看，服务器只知道客户端的外部 IP 地址。您如何准确确定将数据包发送到哪台计算机位于 NAT 后面？我了解客户端路由器的端口转发是解决此类问题的常用方法，但如果您查看 Skype 等应用程序，则无需端口转发即可在服务器与 NAT 后面的许多客户端之间正确建立连接. 反之亦然，也可以问这个问题（即：NAT 后面的客户端到服务器）。

我对套接字编程很陌生，所以我很想听听我可以阅读以完全理解这些东西的任何指南或材料。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:17:59.287

您不必担心应用层中的 NAT。如果您收到一条 IP 为 200.51.255.79 的消息，您可以将答案发送到同一个 IP。路由器将自动处理 NAT 和进一步的路由。当然，端口转发不是这样，但 NAT 是这样。

Skype 以一种非常有趣的方式工作，使用服务器端的当前 ips 和端口数据库绕过端口转发和防火墙，每个用户都在等待响应。您应该在互联网上查找完整的解释。这是一个非常好的阅读=）。

# python - chmod heroku 应用程序上的文件夹

> ID：13041556
> 
> 赞同：1
> 
> 时间：2012-10-24T00:56:57.310
> 
> 标签：python, heroku, flask, chmod

这个问题可能看起来有点愚蠢。我是 Web 开发的新手，我只是开始编写一个简单的 Web 应用程序。我正在使用烧瓶。该应用程序从其他一些站点获取一些图像并将它们保存到文件夹“savedimages”。问题是我在heroku上部署它后，我无法打开'savedimages'文件夹中的任何图像。我猜这是因为文件夹的 chmod 没有设置为 755 左右……那么我该如何 chmod 这个文件夹呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T21:10:32.677

问题很可能不是权限关闭 - Flask 很可能安装在您的应用程序的根目录中，并且您的 Flask 应用程序中没有任何规则来提供图像。尝试向您的应用添加规则：

```
@app.route("/savedimages/<picture>")
def display_picture(picture):
    return "The picture is: {}".format(picture) 
```

如果显示，则只需将您的退货更改为使用[`flask.send_file`](http://flask.pocoo.org/docs/api/#flask.send_file)：

```
file_name = werkzeug.security.safe_join("/path/to/savedimages", picture)
return send_file(file_name) 
```

# javascript - 当对象在 iframe 中时，JqueryUI 可拖动不会触发停止事件

> ID：13041558
> 
> 赞同：1
> 
> 时间：2012-10-24T00:57:16.543
> 
> 标签：javascript, jquery-ui, iframe

请看我的例子：

[http://fiddle.jshell.net/Msd7v/10/](http://fiddle.jshell.net/Msd7v/10/)

```
console.log($('#app').contents().find('.widget').draggable({
  iframeFix:true,
  start:function(){ console.log('started') },
  drag:function(){ console.log('dragging') },
  stop:function(){ console.log('stopped') }
}));​ 
```

你可以在控制台看到拖动一个item的时候，会触发start和drag的事件，但是如果你放手，stop动作不会触发。您也无法再次拖动该项目，可能是因为未正确处理 mouseup 状态。

有人对修复有一些想法吗？提前致谢。

编辑：添加了没有 srcdoc 的新示例，以显示这种情况发生在工作 iframe 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T00:47:16.333

主流浏览器都不支持 srcdoc 属性，我认为这就是它无法正常运行的原因：[http ://w3schools.com/html5/att_iframe_srcdoc.asp](http://w3schools.com/html5/att_iframe_srcdoc.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T02:45:39.133

在这里查看 jsfiddle：http: [//fiddle.jshell.net/Msd7v/30/](http://fiddle.jshell.net/Msd7v/30/)

更新 jQuery 到 1.10.1 和 jquery-ui 到 1.10.3 修复了这个

# css - 顶部的背景图片（使用 CSS）

> ID：13041569
> 
> 赞同：2
> 
> 时间：2012-10-24T00:58:26.430
> 
> 标签：css, background

当您将鼠标悬停在产品图片上时，我有这张图片想要显示在我的产品图片之上。

![http://i47.tinypic.com/vz2oj.gif](../Images/bd3aae50e57ee300b655d86b70340f1f.png)

这就是我正在使用的：

```
.centerBoxContentsFeatured img:hover {
    background-image:url('http://i47.tinypic.com/vz2oj.gif');
    } 
```

它确实有效，但它显示在产品图像的后面而不是在它的顶部。我尝试了绝对定位和 z-index，但似乎没有任何效果。

[http://www.pazzle.co.uk](http://www.pazzle.co.uk) - 尝试在主页上的图像上应用。<<

编辑：

```
#featuredProducts.centerBoxWrapper {
   position: relative;
   }
#featuredProducts.centerBoxWrapper:hover:before {
    content: '';
    width: 187px;
    height: 179px;;
    position: absolute;
    top: 0;
    left: 0;
    background-image:url('http://i47.tinypic.com/vz2oj.gif');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T01:03:09.733

```
a {
    display: block;   
    position: relative;
    width: 100px;
    height: 100px;
}
a:hover:before {
    content: '';
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-image:url('http://i47.tinypic.com/vz2oj.gif');
}​ 
```

[演示](http://jsfiddle.net/pzd3n/1/)

使用伪元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T01:02:43.323

它正在做它应该做的事情。它是一个背景，所以它会出现在容器内容的后面。

您在这里要做的是在您悬停的图像上覆盖一个 div。我认为使用纯 CSS 解决方案是可能的，但使用一些 JavaScript 可能更容易。

看到这个问题：[on hover overlay image in CSS](https://stackoverflow.com/questions/2474198/on-hover-overlay-image-in-css)

# visual-studio-2010 - 在 2012 年打开 Visual Studio 2010 项目是什么创建了备份文件夹以及如何控制它？

> ID：13041575
> 
> 赞同：2
> 
> 时间：2012-10-24T00:59:26.803
> 
> 标签：visual-studio-2010, web-config, visual-studio-2012

我有一个问题。我们正在工作中升级到 VS 2012。当我们打开一个 VS 2010 项目时，Visual Studio 会转换该项目。这很好，因为 VS 2010 仍然可以使用该项目（yay microsoft）。但是，在解决方案目录中创建了一个 \Backup 文件夹。这是作为迁移的一部分创建的吗？有没有办法控制它？

我问的原因是创建此文件夹的过程将 web.config 文件复制到该文件夹​​中。如果您随后尝试构建解决方案（这些是 MVC 项目），我们会收到“ `It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level. This error can be caused by a virtual directory not being configured as an application in IIS.`”错误。原因是子文件夹而不是根文件夹中有一个 web.config 文件。我们没有做出也不想做出这种改变，也无法弄清楚如何控制它。删除 Backup\Web.config 文件可修复该错误。将其从 web.config 重命名为 web.config.bak 可以解决问题。

我真的不想必须亲自打开和转换每个项目，也不希望随机的人碰到这个问题。知道如何阻止 VS 创建备份文件夹，或者如何使其在我的文档工作室文件夹等中创建它们？我找不到任何设置来控制它，也找不到任何好的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:12:56.170

碰巧，您是否使用 MvcBuildViews 属性在构建时预编译您的视图？如果是这样，这就是您遇到此问题的原因（因为它在同一目录中进行预编译，它不会过滤掉项目目录下的任何文件）。

请注意，如果您为此项目使用发布功能，也会遇到此问题。Publish 在应用 web.config 转换之前和之后复制中间构建输出目录（默认为 obj/）下的 web.config。

好消息是，在 VS2012 或安装了最新 Azure SDK 的 VS2010 中，Web 应用程序项目（包括 MVC）现在支持预编译。这些设置当前位于项目属性中的 Package/Publish Web 选项卡下。

（这并没有直接解决您关于备份文件夹的问题，但评论太长了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:49:45.943

我发现没有办法控制它。我们必须继续运行并将每个项目转换为 2012 年并删除备份文件夹以防止任何其他团队遇到它。

# python - 构建models.py的正确方法是什么？

> ID：13041581
> 
> 赞同：0
> 
> 时间：2012-10-24T01:00:57.347
> 
> 标签：python, django, model

我正在尝试为我的 Django 应用程序构建正确的模型。我正在尝试构建一些允许用户将 URL 保存到与该用户相关的一个（或多个）播放列表中的东西。在我实现它之前，我想确保这是构建我的 models.py 的最佳方式。

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, primary_key=True)    #what is the difference between ForeignKey and OneToOne?  Which one should I use?
    Playlist = models.CharField('Playlist', max_length = 2000)  #1 user should be able to have multiple playlists and the default playlist should be "Favorites"
    def __unicode__(self):
        return self.User

class Videos(models.Model):
    Video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)
    Playlist = models.ManyToManyField(Playlist) #this should connect to the playlists a user has.  A user should be able to save any video to any plalist, so perhaps this should be ManyToMany?
    def __unicode__(self):
        return self.Video_url 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:05:17.090

哇。首先，对于 SO，这个问题可能过于“本地化”。反正。我会这样做：

```
class PlayList(models.Model):
    playlist = models.CharField(max_length=2000)

class UserProfile(models.Model):
    # do you want each `User` to only have one `UserProfile`? If so then OneToOne
    # primary keys are automatically formed by django
    # how django handles profiles: https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users
    user = models.ForeignKey(User)

    def __unicode__(self):
        return self.User

class UserPlayList(models.Model):
    # don't capitalise attributes, if you haven't seen PEP8 before, do now: http://www.python.org/dev/peps/pep-0008/
    profile = models.ForeignKey(User)
    playlist = models.ForeignKey(PlayList)

class Video(models.Model):
    video_url = models.URLField(max_length=200, null=True, blank=True, help_text="Link to video")

    def __unicode__(self):
        return self.video_url

class VideoPlayList(models.Model):
    video = models.ForeignKey(Video)
    play_list = models.ForeignKey(UserPlayList) 
```

# xcode - 带有 UIAlertView 的 xcode iOS 6 本地通知在 5 或 6 秒后消失？

> ID：13041586
> 
> 赞同：1
> 
> 时间：2012-10-24T01:01:18.690
> 
> 标签：xcode, ios5, ios6, uialertview, localnotification

我正在使用 UILocalNotification 来安排 UIAlertView，效果很好。但是，在 iOS 6（可能是 iOS 5）中，通知会在 5 或 6 秒后消失。有什么办法可以防止通知消失吗？

```
...
    UILocalNotification *notif = [[cls alloc] init];
    notif.fireDate = [datePicker date];
    notif.timeZone = [NSTimeZone defaultTimeZone];

    notif.alertBody = @"Blabla?";
    notif.alertAction = @"Show me";
    notif.soundName = UILocalNotificationDefaultSoundName;
    notif.hasAction = true;

    [[UIApplication sharedApplication] scheduleLocalNotification:notif];
    [notif release];

...

- (void)showReminder:(NSString *)text {

    alert = [[UIAlertView alloc] initWithTitle:@"Blabla?"
                                            message:text delegate:self
                                        cancelButtonTitle:@"YES"
                                            otherButtonTitles:nil];

    [alert show];
    [alert release];
} 
```

谢谢！

# java - Google App Engine 多租户 API

> ID：13041588
> 
> 赞同：1
> 
> 时间：2012-10-24T01:01:53.747
> 
> 标签：java, api, google-app-engine, multi-tenant

根据[多租户 API 上的 GAE 文档](https://developers.google.com/appengine/docs/java/multitenancy/overview)：

> 多租户是一种软件架构的名称，其中一个应用程序实例在远程服务器上运行，服务于许多客户组织（也称为租户）。

但这不是*每个*Web 应用程序的情况吗？数十、数百甚至数千用户都登录到系统，访问相同的软件，但从他们自己的“用户帐户”的上下文中？还是 Google 的 Multitenancy API 是某种用于开发可用作多个应用程序后端的通用数据抽象层的 API？

我想我不明白“谷歌多租户”应用程序的含义，因此不了解多租户 API 的目的或有用性。在此先感谢您的澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:52:28.227

考虑实现多租户的标准方式：您将“租户 ID”字段添加到一个或多个表，然后将该 ID 包含在 WHERE 子句中。然后你索引那个字段。

您可以在 App Engine 中采用相同的方法，将索引属性添加到您的某些实体以保存租户 ID，并在 GQL WHERE 子句（或过滤器）中小心地包含该 ID。这将花费您更多的写入成本（对于该属性上的两个索引），如果 ID 参与包含其他过滤器的查询，则会花费更多，因为这些将需要包含 ID 的附加复合索引。

或者您使用我们的多租户 API，它可以为您提供相同的效果，而无需额外的索引写入成本。你会得到稍微简单的代码，并且花费更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T03:04:22.063

此处的多租户不是指您的应用程序的用户，而是指您的应用程序的“实例”以及“单独的”数据存储。

它们并不是真正独立的实例或独立的数据存储，因为这些请求可能由共享实例提供服务，并且它们肯定是在与同一个数据存储通信。但是，通过使用 API，您可以设置您的应用程序，以便将数据划分到不会相互污染的单独命名空间中。

如果您的应用程序只有一个用户，那么多用户和多租户几乎是一回事。如果您有多个用户，那么通常您将在用户之间共享数据。如果是这样，您可以使用多租户仅在特定用户组内共享数据，并将其余部分划分为他们自己的租户。

正如 jtahlborn 正确地指出的那样，我们的每个 GAE 应用程序都已经是 GAE 基础架构上的租户。我们无法在不同的应用程序之间共享数据，因为它们彼此完全分开。

正如 Dave 所说，我们可以通过向所有数据添加某种域名或分区 ID 来自己实现多租户。API 只是提供了一种更简单的方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T01:24:48.647

不同之处在于您在谈论谁的租户。GAE 从第一天开始就是多租户的，因为每个程序（租户）都运行在一个通用的 GAE 基础架构中。但是，最初，您的程序本身只管理一组数据（当 GAE 首次发布时）。GAE“多租户 API”使您的单个程序能够管理其（您的）自己的租户（因此*您的*租户而不是*GAE 的*租户）。

简明扼要地说：“多租户 API”允许您在单个 GAE 程序中管理自己的租户（用户），该程序又作为租户（程序）托管在 GAE 基础架构中。

当然，从理论上讲，您总是可以从 GAE 的第一天开始就这样做，但是管理租户之间数据的所有工作都将在您的代码中处理。“多租户 API” 试图消除程序员的痛苦，并使在程序中分割数据变得更加简单。

# php - 使用 Javascript 通过 PHP 函数刷新数据库信息

> ID：13041590
> 
> 赞同：0
> 
> 时间：2012-10-24T01:02:03.793
> 
> 标签：php, javascript

我正在尝试使用查询数据库中的空格的 php 函数来刷新跨度。但是，我不知道如何让它动态地刷新实际的数据库内容（最好通过计时器）。这是我到目前为止所拥有的

```
<script type="text/javascript">
window.onload = startInterval;
function startInterval()
{
        setInterval("startTime();",1000);
}

function startTime()
{
    document.getElementById('spaces').innerHTML = <?php echo get_spaces($id)?>;  
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:05:57.080

您将不得不使用 Ajax 动态加载内容而无需重新加载页面。

您将必须制作一个 PHP 脚本，该脚本将仅输出您希望在页面上动态加载的内容，然后使用 Ajax 加载此脚本。

使用 jQuery 有一种简单的方法可以做到这一点，请参见以下示例：[http ://www.sitepoint.com/ajax-jquery/](http://www.sitepoint.com/ajax-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:18:33.023

我假设 get_spaces 通过参数 id 执行查询

让此函数通过以下方式返回结果

```
 echo json_encode($result); 
```

现在，而不是函数 start_timer 像上面的示例那样静态调用您的 php 函数，而是让它通过 ajax 返回

```
 function start_timer(){
 $.ajax ({
 url: get_spaces.php?id=1, // replace the parameter with dynamic assignment
 dataType: json,
 Success: function(result){
 //iterate thru result json obj
 }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T01:15:58.517

就像其他海报指出的那样，您必须使用 AJAX 才能完成这项工作。这是一些可能对您有所帮助的伪代码，

```
<script type="text/javascript">

window.onload = // Start your setInterval, pass it interval.ajax_call()

var interval = (function(

    // Store data here
    var data;

    return {

        // Make your ajax call within this function
        ajax_call: function(),
    }

)();
</script> 
```

这样，您可以通过 ajax 回调将数据库中的信息存储到数据中。

# c - 用设定的运行环境编译程序？

> ID：13041595
> 
> 赞同：2
> 
> 时间：2012-10-24T01:02:46.933
> 
> 标签：c, compilation, environment

我正在尝试编译一个程序，该程序在运行时将在 c 中的预定义环境中运行。

更具体地说，我希望以某种方式包含`LD_PRELOAD=./lib.so`，以便在我运行时`./program`它会像我使用过命令一样运行`LD_PRELOAD=./lib.so ./program`

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:11:28.517

设置程序`LS_PRELOAD`，如果`LS_PRELOAD`未设置，则自行运行。为此使用`execv()`。

# javascript - 如何在 Shift-jis 中获取 XMLHttpRequest 的响应数据

> ID：13041596
> 
> 赞同：2
> 
> 时间：2012-10-24T01:02:56.117
> 
> 标签：javascript, xmlhttprequest

我使用 XMLHttpRequest 。

如果数据以 UTF-8 写入，则没有问题。

但是数据是用 Shift-jis 写入的，我无法读取响应。

我尝试像下面这样设置请求标头，但它没有用。

setRequestHeader("Content-Type", "text/plain;charset=Shift-JIS");

如何在 Shift-JIS 中获取响应数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-14T16:11:14.937

JavaScript 字符串的内部表示是 UTF-16。因此，您将首先将 Shift-JIS 字节数组转换为 JavaScript 字符串。

现代浏览器可以为此目的使用 TextDecoder ( [https://caniuse.com/#feat=textencoder )。](https://caniuse.com/#feat=textencoder)首先，您必须设置`responseType`为：`XMLHttpRequest``arraybuffer`

```
var req = new XMLHttpRequest();
req.responseType = "arraybuffer";
var arrayBuffer = req.response; 
```

您将获得一个字节数组，该数组表示 Shift-JIS 编码中的响应数据`arrayBuffer`。

然后，`Uint8Array`为文本创建一个对象`Shift-JIS`，并将其转换为有序的 JavaScript 字符串。

```
var byteArray = new Uint8Array(arrayBuffer);
var decoder = new TextDecoder('shift_jis');
var str = win1251decoder.decode(byteArray); 
```

你会得到一个 UTF-16 字符串`str`。

# c# - 具有多个参数的三元语句

> ID：13041600
> 
> 赞同：4
> 
> 时间：2012-10-24T01:03:26.567
> 
> 标签：c#, dictionary, conditional, ternary-operator

我有一个字典定义为：

```
Dictionary<string, string> typeLookup = new Dictionary<string, string>(); 
```

我想根据用户选择的语言向字典中添加一个键/值，在我的例子中可以找到：

```
Request.Cookies["language"].Value == "ja-JP" //if true, Japanese, if false, English 
```

我可以只做 if/elses，但我很好奇是否有某种方法可以使这项工作：

```
typeLookup.Add((Request.Cookies["language"].Value == "ja-JP") ? "6","中間" : "6","Q2"); 
```

因为它是字典，所以需要指定两个字符串。这不起作用，给我“语法错误，'：'预期”。这是一个失败的原因，还是我需要更改/添加一些东西才能使这个想法生效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:05:43.490

由于条件的双方使用相同的密钥，您可以作弊：

```
typeLookup.Add("6", (Request.Cookies["language"].Value == "ja-JP") ? "中間":"Q2"); 
```

然而，在一般情况下，你最终会得到一个相当丑陋、重复的语句：

```
typeLookup.Add(
    (Request.Cookies["language"].Value == "ja-JP") ? "6" : "7"
,   (Request.Cookies["language"].Value == "ja-JP") ? "中間" : "Q2"
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:11:53.887

假设密钥始终保持不变，将三元组短路以仅应用于该值（另外，如果您要多次比较，我会存储一个`isEnglish`或`isJapanese`值）：

```
typeLookup.add("6", Request.Cookies["language"] == "ja-JP" ? "中間" : "Q2"); 
```

但是，您始终可以创建一个助手：

```
Dictionary<string, string> typeLookup = new Dictionary<string, string>();

System.Action<String,String,String> japEng = (key,japaneseValue,englishValue) => {
  if (Request.Cookies["language"].Value == "ja-JP")
    typeLookup.Add(key, japaneseValue);
  else
    typeLookup.Add(key, englishValue);
};

japEng("6", "中間", "Q2"); 
```

*只是另一种选择...*

# sql - Rails：如何获取深度为 2 'has_many' 级别的记录？

> ID：13041605
> 
> 赞同：1
> 
> 时间：2012-10-24T01:03:58.533
> 
> 标签：sql, ruby-on-rails, activerecord

我设置了这些模型：

```
Course
  has_and_belongs_to_many Student

Student
  has_and_belongs_to_many Course
  has_many Books

Book
  belongs_to Student 
```

如何使用 ActiveRecord 有效地获取课程的所有书籍？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T01:16:37.660

尝试这个：

```
Course.includes(:students => { :books }) 
```

文档在[这里](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)，在“Eager loading of associations”下。

**已编辑**

对不起，我误读了这个问题。我看到您的重点是给定课程的书籍。在这种情况下，我会推荐这样的东西：

```
Book.includes(:student => :courses).where(["course.id = ?", @course.id]).limit(5) 
```

将其添加为模型上的方法可能会更容易`Course`：

```
class Course < ActiveRecord::Base
  def books(max = 10)
    Book.includes(:student => :courses).where(["course.id = ?", self]).limit(max)
  end
end 
```

该代码可能不完全正确，但它应该为您提供正确的想法。

此外，您可能想查看[这个](https://stackoverflow.com/questions/2150582/has-many-through-a-has-and-belongs-to-many-association)问题，以寻找自己定义这些东西的潜在替代解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T13:02:30.057

我想知道您是否可以使用直通关联并执行类似...

```
Course
  has_and_belongs_to_many :students
  has_many :books, :through => :students

Student
  has_and_belongs_to_many :courses
  has_many :books

Book
  belongs_to :student 
```

现在您可以调用 Course.books 来返回与课程相关的所有书籍。

# android - Android 摩托罗拉设备总是使用选择图像进行裁剪

> ID：13041606
> 
> 赞同：1
> 
> 时间：2012-10-24T01:04:09.360
> 
> 标签：android, motorola

我的应用程序有一个从库中选择图像的选项以上传到服务器，当我在其他设备（包括 Android 版本 2.3 和 4.0.3）上选择它时，它可以正常上传。但是，在我的个人设备上，它是运行 4.0.3 的摩托罗拉 Droid Razr（在单独的 Razr 上确认），它迫使我首先裁剪图像。它让我可以选择从裁剪屏幕保存或丢弃，当我选择保存时，它会导致我的应用程序崩溃。（编辑：出现错误 java.lang.RuntimeException：传递结果 ResultInfo 失败）还有其他人在摩托罗拉或特别是 Razr 设备上遇到过这个问题吗？对此有任何修复，还是这个问题更适合摩托罗拉开发论坛？

```
final Intent intent = new Intent(Intent.ACTION_PICK,
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    intent.putExtra("return-data", true);
    intent.setType("image/*");
    parent.startActivityForResult(intent, REQUEST_IMAGE_LIBRARY); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:03:41.787

我终于通过注释掉这一行来解决这个问题

```
intent.putExtra("return-data", true); 
```

我不知道为什么这会导致 RAZR 在选择后想要裁剪图像。

# jquery - PHP网站仅在查询时传递特定信息

> ID：13041610
> 
> 赞同：4
> 
> 时间：2012-10-24T01:05:02.127
> 
> 标签：jquery, ajax

我很难想出一个聪明的方法来做我需要做的事情。基本上我有一个通用站点，由自定义构建 CMS 编辑器创建，一切都很好。我想要发生的是，当用户在我们的 CMS 编辑器中时，通过后台的 AJAX 请求，它将快速查询用户正在查看的页面并根据接收到的数据返回特殊指令。如：

联系页面对 CMS 有一些特殊说明，可能所有内容都需要有标题和副标题。因此，这些触发器被编码到contact.php 中，但不会显示给查看该网站的普通joe。没有字段。

但是当用户在我们的 CMS 中时，我希望它向[http://www.something.com/contact.php](http://www.something.com/contact.php)发送一个特殊请求，contact.php 会知​​道它的 CMS 敲门，并会回复带有特殊说明。无论是 JSON 还是 XML，我都不挑剔。

我遇到的真正问题是让 contact.php 显示其自身的任一版本。我可以返回一个 JSON 字符串，但 jQuery Ajax 不知道如何处理它，因为响应中有其他元素。如果 jQuery->Ajax 可以忽略整个页面而只获取应该没问题的 JSON。

```
<html>
<body>
<h1>blah blah</h1>
...etc
...etc
<script>var requiredSettings = {[json blah blah blha ]};</script>
<p>loreum ipsum etc..</p>
</body>
</html> 
```

这就是我必须使用的，jQuery->Ajax 请求如何忽略所有 wqrong 标头和 html 垃圾，只使用 JSON。

我对其他方法非常开放，只要contact.php 可以保持完整并且对用户可见，但在CMS 请求信息时发挥双重职责并向CMS 报告。

CMS 和contact.php 将位于不同的服务器上。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T01:09:30.967

在您的 PHP 文件中，您总是可以这样做：

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    return jsonencode(JSON);
    die();
}

HTML site here. 
```

如果页面是使用 ajax 请求的，这将返回 json，如果不是，则移动到 HTML 部分（或其他）。

# php - Doctrine2 日期时间

> ID：13041612
> 
> 赞同：0
> 
> 时间：2012-10-24T01:05:25.193
> 
> 标签：php, mysql, datetime, doctrine, doctrine-orm

我有以下代码，据我所知，没关系，但它不起作用：S

created_at 和 updated_at 是日期时间格式...

有什么线索吗？

> 致命错误：在第 44 行对 D:\Zend\Apache2\htdocs\AR\vendor\doctrine\dbal\lib\Doctrine\DBAL\Types\DateTimeT‌​ype.php 中的非对象调用成员函数 format()

```
public function __construct()
{
    if(!$this->getCreatedAt()){
        $this->created_at = new \DateTime();
    }

    $this->updated_at = new \DateTime();
} 
```

编辑：我试过 \DateTime("now"); 也是，但同样的问题 EDIT2：我也使用了这个，而不是构造函数，但同样的问题

```
 lifecycleCallbacks:
    prePersist: [setCreatedAtValue]
    preUpdate: [setUpdatedAtValue] 
```

```
/**
 * @ORM\PrePersist
 */
public function setCreatedAtValue()
{
    $this->created_at = new \DateTime('now');
}

/**
 * @ORM\PreUpdate
 */
public function setUpdatedAtValue()
{
    $this->updated_at = new \DateTime('now');
} 
```

# jar - 在源代码中和编译期间包含 jar 文件

> ID：13041613
> 
> 赞同：1
> 
> 时间：2012-10-24T01:05:24.993
> 
> 标签：jar, classpath, javac, java

我已经制作了我的自定义 jar 文件并使用它编译它

```
path C:\Program Files\Java\jdk1.7.0_04\bin;%path%
javac *.java
jar cvf QLibrary.jar *.class 
```

然后我把那个jar文件放在我所在的同一个目录`Main.java`中

`Main.java`将使用 jar 中的类

所以我决定把`import QLibrary.*;`里面`Main.java`

我编译使用

```
path C:\Program Files\Java\jdk1.7.0_04\bin;%path%
javac -cp ".;*.jar" *java 
```

但显然它不识别库或其中的类。我到底做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:08:17.690

您应该列出所有 jar 文件的名称：

```
javac -cp ".;QLibrary.jar" *java 
```

或者您可以通过这种方式使用通配符：

```
javac -cp ".;*" *java 
```

类路径条目可以包含基本名称通配符`*`，这被认为等同于指定目录中所有文件的列表，扩展名为`.jar`或`.JAR`。例如，类路径条目`foo/*`指定名为 foo 的目录中的所有 JAR 文件。一个简单的类路径条目`*`扩展为当前目录中所有 jar 文件的列表。... 例如，如果目录`foo`包含`a.jar`、`b.jar`和`c.jar`，则类路径`foo/*`扩展为`foo/a.jar;foo/b.jar;foo/c.jar`.

[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:21:37.323

如[javac -cp 选项](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/javac.html)中所述，如果您正在使用`Windows`，请尝试`java -cp .;QLibrary.jar mysource`

# vba - 当用户开始在 Outlook 中编写新电子邮件时触发函数运行 - VBA

> ID：13041614
> 
> 赞同：2
> 
> 时间：2012-10-24T01:05:30.170
> 
> 标签：vba, outlook

每当有人在 Outlook 中创建新电子邮件时，我都想运行 VBA 函数。这可能是因为他们点击了“新邮件”按钮，或者是因为第三方程序生成了一个新的邮件窗口。

我尝试使用 Application_ItemLoad() 并检查作为事件参数传递的 Item 对象，但是在 2007 年，我收到一条消息，上面写着“该项目的属性和方法不能在此事件过程中使用。” 显然这是 Outlook 2007 中的一个已知问题。

有没有人有一个可靠的方法来做到这一点？

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:10:18.140

在 Outlook 2010 中，它对我有用，但我没有找到错误报告。你的确切代码是什么？你是什​​么意思，“检查项目对象”？

您只需将代码放在这样的事件中：

```
Private Sub Application_ItemLoad(ByVal Item As Object)
    MsgBox "New mail item."
End Sub 
```

就这样。

我希望MS提供的这些评论对您有用：http: [//msdn.microsoft.com/en-us/library/office/ff868544.aspx](http://msdn.microsoft.com/en-us/library/office/ff868544.aspx)

评论：

此事件在 Outlook 项目开始加载到内存时发生。该项目的数据尚不可用，除了 Outlook 项目的 Class 和 MessageClass 属性的值，因此在调用 Item 中返回的 Outlook 项目的 Class 或 MessageClass 以外的任何属性时会发生错误。同样，如果您尝试从 Outlook 项目调用任何方法，或者如果您在 Item 中返回的 Outlook 项目上调用 Application 对象的 GetObjectReference 方法，则会发生错误。

**编辑**：
我能想到的最好的方法是将此代码放入 Application_ItemSend 事件方法中：

```
Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)

Dim myInspector
Dim wdDoc
Dim rng

Set myInspector = Item.GetInspector
Set wdDoc = myInspector.WordEditor

Set rng = wdDoc.Application.Selection

With rng
    With rng.Style.Font
        .Name = "Arial Black"
        .Size = 12
    End With
End With

Set myInspector = Nothing
Set wdDoc = Nothing

End Sub 
```

问题是您无法在尚不可用的项目上设置属性（如 MS 所述）。好吧，从这个角度来看，这实际上是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T14:07:34.620

I came up with a way to do this for replies. I have not yet figured out how to do this for new compositions though.

```
Public WithEvents myExplorer As Outlook.Explorer 'Gives us the ability to trigger off explorer events
Public WithEvents myMailItem As Outlook.MailItem 'Gives us the ability to trigger off MailItem events

Private Sub Application_Startup()   
    Set myExplorer = Application.ActiveExplorer 'Initialize
End Sub

Private Sub myExplorer_SelectionChange()
    If (myExplorer.Selection.Count > 0) Then
        If (myExplorer.Selection.Item(1).Class = olMail) Then
            Set myMailItem = myExplorer.Selection.Item(1) 'Initialize
        End If
    End If
End Sub

Public Sub NewHTMLEmail(htmlToUse As String, Addressee As String, SubjectLine As String)
    Dim NewEmail As Outlook.MailItem
    Set NewEmail = Application.CreateItem(olMailItem)
    NewEmail.BodyFormat = olFormatHTML
    NewEmail.Subject = SubjectLine
    NewEmail.To = Addressee
    NewEmail.HTMLBody = htmlToUse
    NewEmail.Display
End Sub

'This trigger executes when we hit the "Reply" button while viewing a mail item
Private Sub myMailItem_Reply(ByVal Response As Object, Cancel As Boolean)
    Dim htmlString As String, thisMailItem As Outlook.MailItem, MissingText As String
    Set thisMailItem = Response
    Call NewHTMLEmail(thisMailItem.HTMLBody, thisMailItem.To, thisMailItem.Subject)

    Response.Close olDiscard
    thisMailItem.Delete    
End Sub 
```

# file - 在其程序中访问传递给 Fortran 可执行文件的文件名

> ID：13041627
> 
> 赞同：0
> 
> 时间：2012-10-24T01:06:51.060
> 
> 标签：file, fortran

我正在尝试创建一个 Fortan 程序，该程序在编译为可执行文件时可以将文件作为参数（例如 progexe afile）。

我需要对程序进行编码，使传递的文件名（afile）在 Fortran 程序中可用。我无法弄清楚如何做到这一点。我在 Windows 上的 MingW 中使用 gfortran。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T03:16:17.727

使用[GET_COMMAND_ARGUMENT](http://gcc.gnu.org/onlinedocs/gfortran/GET_005fCOMMAND_005fARGUMENT.html)。它适用于 gfortran 4.6.3。示例使用：

```
PROGRAM Main
    IMPLICIT NONE
    CHARACTER(LEN=4096) :: FileName
    CALL GET_COMMAND_ARGUMENT(1, FileName)
    WRITE(*,*) 'Your file name is ', TRIM(FileName)
STOP
ENDPROGRAM 
```

编译并运行：

```
brady@rocky:~/tmp$ gfortran -o gcatest gcatest.f90 
brady@rocky:~/tmp$ ./gcatest myfile.txt
 Your file name is myfile.txt
brady@rocky:~/tmp$ 
```

# python - 2 元组 wxpython

> ID：13041629
> 
> 赞同：0
> 
> 时间：2012-10-24T01:07:24.430
> 
> 标签：python, user-interface, bitmap, wxpython

我一直在研究一个菜单界面，我希望在其中使用背景，然后将自定义图像用作按钮，但是无法显示它们

```
import wx
import pygame
import os

class menu(wx.Frame):
    def __init__(self,parent,id):

        wx.Frame.__init__(self,parent,id,'Compsci Vs. Sheep: The Game',size=(640,640))#defining the properties of the window
        MainPanel=wx.Panel(self)

        image_file='main_screen.jpeg'
        bmp=wx.Bitmap(image_file)
        self.bitmap = wx.StaticBitmap(self, wx.ID_ANY, bmp, (0, 0))

        PlayButton=wx.Bitmap('exit.jpeg', wx.BITMAP_TYPE_ANY)
        self.PlayButton=wx.BitmapButton(self.bitmap, -1, PlayButton, pos=())
        self.Bind=(wx.EVT_BUTTON, self.closeMe, self.PlayButton)
        self.PlayButton.SetDefault()

        self.Bind(wx.EVT_CLOSE,self.closecorner)

    def closeMe(self,event):
        self.Destroy()

    def closecorner(self,event):
        self.Destroy()
        pygame.mixer.quit()#defining all events 

if __name__=='__main__':
    pygame.mixer.init(frequency=22050, size=-16, channels=2, buffer=4096)
    pygame.mixer.music.load("exorcist.ogg")
    pygame.mixer.music.play(-1)
    app=wx.PySimpleApp()
    frame=menu(parent=None,id=-1)
    frame.Show()
    app.MainLoop() 
```

任何人都可以解释为什么我不断收到错误：Traceback（最近一次通话最后一次）：

```
 File "/Users/Matthew/Desktop/pygame sheep/interface.py", line 35, in <module>
    frame=menu(parent=None,id=-1)
  File "/Users/Matthew/Desktop/pygame sheep/interface.py", line 16, in __init__
    self.PlayButton=wx.BitmapButton(self.bitmap, -1, PlayButton, pos=())
  File "/usr/local/lib/wxPython-unicode-2.8.12.1/lib/python2.7/site-packages/wx-2.8-mac-unicode/wx/_controls.py", line 192, in __init__
    _controls_.BitmapButton_swiginit(self,_controls_.new_BitmapButton(*args, **kwargs))
TypeError: Expected a 2-tuple of integers or a wxPoint object. 
```

我正在运行 Python 2.7.2、wxPython 2.8.12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:11:57.573

```
self.PlayButton=wx.BitmapButton(self.bitmap, -1, PlayButton, pos=())
                                                             ^^^^^^ 
```

这是无效的——你要么需要给它一个元组，`(0, 0)`要么不指定`pos`，让它默认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:13:22.763

`self.PlayButton=wx.BitmapButton(self.bitmap, -1, PlayButton, pos=())`

这条线是问题所在。位置需要是一个元组`(x, y)`

# jquery - 用于动态控制的 JQuery 部分回发不起作用

> ID：13041630
> 
> 赞同：1
> 
> 时间：2012-10-24T01:07:23.770
> 
> 标签：jquery, asp.net, dynamic-controls, partial-postback

我正在使用[Eric Hynds 的 jQuery](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)作为多选列表。我已经在后面的代码中动态创建了控件，并且可以成功绑定到它。

源代码如下所示：

```
<div class="multiselectlist">
  <select id="MainContent_List" multiple="multiple" name="ctl00$MainContent$List">
</div> 
```

动态控件位于更新面板中。当我点击一个按钮时，它会进行部分回发，并且会丢失与之关联的 jQuery 功能。

我假设我需要“重新注册脚本”，所以我这样做了：

```
ScriptManager.RegisterClientScriptInclude(this, GetType(), "multiselect", Page.ResolveClientUrl("../../Assets/Scripts/jquery.multiselect.min.js")); 
```

不幸的是，什么也没有发生。我相当确定它是未运行的javascript。我没有正确注册javascript吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:16:21.417

尝试重新初始化多选列表，如下所示

```
$.ajaxStop(function(){
    $("#MainContent_List").multiselect();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:44:13.513

如果我的理解是正确的，您只需将 JQuery Multiselect 重新绑定到`select`控件。

这是因为`UpdatePanel`每次出现部分帖子时都会重新渲染 an 的内容，这意味着在每个帖子上都会删除并重新创建 DOM 元素

为了实现您的目标，只需按如下方式重新绑定事件：

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function (a, e) {
     // place here the re-initialization of your multiselect plugin
}); 
```

此外，您可以使用`shortcut`该功能：

```
function pageLoad() {
    // place here the re-initialization of your multiselect plugin
} 
```

# c# - 在 nopcommerce 插件中添加另一个数据库连接？

> ID：13041639
> 
> 赞同：0
> 
> 时间：2012-10-24T01:09:10.763
> 
> 标签：c#, nopcommerce

我想连接到 nopcommerce 中的另一个数据库。可以在插件内部做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T12:47:31.220

是的，有可能，当您在插件基类中覆盖 install 方法时，您可以添加数据库表。

# r - 在 R 中读取文本文件的特定行

> ID：13041641
> 
> 赞同：6
> 
> 时间：2012-10-24T01:09:19.547
> 
> 标签：r, file, line

我有一个由制表符分隔的 txt 格式的文件。我的问题是，如果可以跳转到特定行，但不使用 for 循环，例如，如果我想跳转到第二行，我已经这样做了：

```
 fileName="table.txt"
  con=file(fileName,open="r")
  for (i in 1:2){
      ctable<-readLines(con,n=1)
  } 
```

但我不想使用 for 循环，我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T01:15:37.100

在参数中使用`read.table()`并提供要跳过的行数`skip`。在`?read.table`控制台输入以获取有关您可以使用的其他参数和包装器的更多信息。

# alfresco - Mule ESB 使用 CMIS 连接器将文件移动到 Alfresco

> ID：13041645
> 
> 赞同：2
> 
> 时间：2012-10-24T01:09:57.647
> 
> 标签：alfresco, mule, cmis

因此，我正在使用 Mule 抓取放入文件夹中的文件，并且我想通过 CMIS 连接器将这些文件推送到 Alfresco。我已经启动并运行了 Alfresco，但是在尝试移动文件时，我在 Mule 中不断收到错误消息。以下是我的流程：

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:cmis="http://www.mulesoft.org/schema/mule/cmis" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/cmis http://www.mulesoft.org/schema/mule/cmis/current/mule-cmis.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">
   <cmis:config name="CMIS" username="*****" password="*****" repositoryId="6ddd8d97-e591-4327-bdaf-3e7be8604273" baseUrl="http://localhost:8080/alfresco/service/api/cmis" 
   doc:name="CMIS"/>
   <flow name="createDocumentFlow" doc:name="createDocumentFlow">
    <file:inbound-endpoint path="/home/administrator/Downloads/Output" responseTimeout="10000" doc:name="File"/>
       <cmis:create-document-by-path filename="#[header:originalFilename]"  folderPath="/Sites" 
       mimeType="application/pdf" objectType="cmis:document" versioningState="NONE" config-ref="CMIS" doc:name="CMIS"/>
   </flow>
</mule> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:40:04.607

这最终工作得很好。使用 Object-to-byte-array-transformer 而不是 File-to-byte-array-transformer。

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
    xmlns:cmis="http://www.mulesoft.org/schema/mule/cmis" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/cmis http://www.mulesoft.org/schema/mule/cmis/current/mule-cmis.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd ">
   <cmis:config name="CMIS" username="*****" password="*****" repositoryId="6ddd8d97-e591-4327-bdaf-3e7be8604273" baseUrl="http://localhost:8080/alfresco/service/api/cmis" 
   doc:name="CMIS"/>
   <flow name="createDocumentFlow" doc:name="createDocumentFlow">
    <file:inbound-endpoint path="/home/administrator/Downloads/Output" responseTimeout="10000" doc:name="File" />
       <object-to-byte-array-transformer mimeType="application/pdf" doc:name="Object to Byte Array"/>        
       <cmis:create-document-by-path filename="#[header:originalFilename]"  folderPath="/OCR" 
       mimeType="application/pdf" objectType="cmis:document" versioningState="NONE" config-ref="CMIS" doc:name="CMIS"/>
   </flow>
</mule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-06T03:57:00.387

尝试 cmis 同步[cmissync.com/](http://cmissync.com/)

它对我来说很好，它总是与你的系统同步。可用选项：版本控制、签出、签入、编辑方面、元数据等。

# javascript - 从 javascript Node.js 调用 mongoexport

> ID：13041648
> 
> 赞同：2
> 
> 时间：2012-10-24T01:10:31.393
> 
> 标签：javascript, node.js, mongodb, csv, export-to-csv

我想将 Mongo 集合导出到 .csv。Mongo 对此提供了解决方案，但仅限于 shell。

[http://docs.mongodb.org/manual/reference/mongoexport/](http://docs.mongodb.org/manual/reference/mongoexport/)

我正在使用 node.js 的本机驱动程序，并且希望能够在脚本中执行此操作，而不是从 shell 调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:19:05.837

如果您只是想`mongoexport`从您的 node.js 应用程序运行命令，您可以使用它[`child_process.spawn`](http://nodejs.org/api/all.html#all_child_process_spawn_command_args_options)来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:49:09.467

您可以编写 shell 脚本。看一下这个。可能有帮助。

[http://www.mongodb.org/display/DOCS/Scripting+the+shell](http://www.mongodb.org/display/DOCS/Scripting+the+shell)

# expressionengine - 如何在 ExpressionEngine 中获取条目的年度列表？

> ID：13041650
> 
> 赞同：8
> 
> 时间：2012-10-24T01:10:46.133
> 
> 标签：expressionengine

我需要获取所有条目的年份列表以在下拉列表中使用。基本上我需要按年份分组输入日期并在列表中输出分组年份。

像这样的东西：[https ://dzwonsemrish7.cloudfront.net/items/2G161x0v1U0d2U0k133a/2012-10-23_19-50-41.jpeg?v=9c5b44e8](https://dzwonsemrish7.cloudfront.net/items/2G161x0v1U0d2U0k133a/2012-10-23_19-50-41.jpeg?v=9c5b44e8)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T01:19:36.973

EE1 或 EE2 的这个插件将为您提供所需的内容：http: [//devot-ee.com/add-ons/yearlist](http://devot-ee.com/add-ons/yearlist)

```
{exp:yearlist channel="yourchannel"}
         <a href="{path=archive}/{year}">{year}</a>
{/exp:yearlist} 
```

然后在您的模板中使用 year="" 参数限制条目：

```
{exp:channel:entries channel="news" year="{segment_2}"}
    <h1>{title}</h1>
    {body}
{/exp:channel:entries} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T01:54:53.507

使用这个附加组件[http://devot-ee.com/add-ons/yearlist](http://devot-ee.com/add-ons/yearlist)你可以这样做：

像这样设置你的下拉列表：

```
<form name="yourform" action="">
    <select id="yourselect" name="yourselect">
        {exp:yearlist channel="yourchannel"}
            <option value="{path=archive}/{year}">{year}</option>
        {/exp:yearlist}
    </select>
</form> 
```

在您的登录页面上，您将执行以下操作以根据年份显示您的条目：

```
{exp:channel:entries channel="news" year="{segment_2}"}
    <h1>{title}</h1>
    {body}
{/exp:channel:entries} 
```

并使用一些 jQuery 重定向到您的年份页面：

```
<script type="text/javascript">
    $('#yourselect').change(function() {
        window.location = $(this).val();
    });
</script> 
```

如果您想通过 javascript 而不是 jQuery 查看[这篇文章](http://return-true.com/2010/08/go-on-select-drop-down-menu/)

# objective-c - 如何将 NSNumber 与十进制值进行比较？

> ID：13041651
> 
> 赞同：1
> 
> 时间：2012-10-24T01:10:46.670
> 
> 标签：objective-c, ios6, nsnumber, ocunit

我最近从 iOS 5 升级到 iOS 6，发现这个单元测试失败了

```
- (void)testCalculatesDistanceBetweenTwoPoints
{
    self.sut = [[DistanceCalculator alloc] init];
    CLLocationCoordinate2D start = {.latitude = 34.32, .longitude = 99.13};
    CLLocationCoordinate2D finish = {.latitude = 105.94, .longitude = 27.73};
    NSNumber *distance = [self.sut kilometresBetweenPlace1:start andPlace2:finish];
    NSNumber *expected = [NSNumber numberWithDouble:3822.23073702318];
    STAssertEqualObjects(distance, expected, @"");
} 
```

失败的断言

> '3822.23073702318' 应该等于 '3822.23073702318'

当我打印每个数字的原始值时，我得到的值看起来相同

```
2012-10-23 20:01:42.970 HelloWorld[1573:c07] 1 3822.23073702318
2012-10-23 20:01:42.970 HelloWorld[1573:c07] 2 3822.23073702318 
```

当我打印每个数字的类型时，我得到的结果看起来是一样的（我做错了吗？）

```
2012-10-23 20:06:37.309 HelloWorld[1611:c07] 1 __NSCFNumber 
2012-10-23 20:06:37.309 HelloWorld[1611:c07] 2 __NSCFNumber 
```

如果有帮助，这是完整的实现

```
- (NSNumber *)kilometresBetweenPlace1:(CLLocationCoordinate2D)place1 andPlace2:(CLLocationCoordinate2D)place2
{
    MKMapPoint start = MKMapPointForCoordinate(place1);
    MKMapPoint finish = MKMapPointForCoordinate(place2);

    double distance = MKMetersBetweenMapPoints(start, finish) / 1600;

    return [NSNumber numberWithDouble:distance];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:10:48.560

对于任何可能关注此讨论的人-这就是我最终得到的

```
- (void)testCalculatesDistanceBetweenTwoPoints
{
    double accuracy = 0.00000000001;
    self.sut = [[DistanceCalculator alloc] init];
    CLLocationCoordinate2D start = {.latitude = 34.32, .longitude = 99.13};
    CLLocationCoordinate2D finish = {.latitude = 105.94, .longitude = 27.73};
    NSNumber *distance = [self.sut kilometresBetweenPlace1:start andPlace2:finish];
    NSNumber *expected = [NSNumber numberWithDouble:3822.23073702318];
    STAssertEqualsWithAccuracy([distance doubleValue], [expected doubleValue], accuracy, @"");
} 
```

# python - 如何在 Django 中存储对象集合

> ID：13041658
> 
> 赞同：1
> 
> 时间：2012-10-24T01:12:06.573
> 
> 标签：python, django

我有这个代码

```
# data = {blah blah};

for object in my_queryset():
    object.data = data 
```

但我想用新数据返回原始查询集。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:18:52.027

把它变成一个列表，这样它就存储在内存中，而不仅仅是一个可迭代的。

```
data = {blah blah}
objects = list(my_queryset())
for object in objects:
    object.data = data
return objects 
```

# android - 我的 Android 应用程序崩溃：OnClickListener

> ID：13041661
> 
> 赞同：0
> 
> 时间：2012-10-24T01:12:29.767
> 
> 标签：android, nullpointerexception, double, tostring, onclicklistener

我是 android 新手，正在尝试创建一个简单的程序，将三个输入相加，然后将输出打印到 EditText。每当我按下按钮时，我的代码的第 63 行（我在下面发布的最后一行）就会崩溃......我认为这可能是由于一个空对象或类似的东西。我 99% 确定我的所有变量和其他所有内容都已正确声明。无论如何，这是我的 onClick 方法代码，如果有人能找出导致崩溃的原因，我将不胜感激。

```
Button solve = (Button) findViewById(R.id.solve);

solve.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {

        if  ((a.getText().length() == 0)
            || (" ".equals(a.getText().toString()))
            || (" ".equals(b.getText().toString()))
            || (" ".equals(c.getText().toString()))
            || (b.getText().length() == 0)
            || (c.getText().length() == 0)) {
Toast.makeText(getApplicationContext(), "Some of your inputs are empty.",  Toast.LENGTH_SHORT).show();

        } else {

            double sol = new Double(a.getText().toString())
            + new Double(b.getText().toString())
            + new Double(c.getText().toString());
            res1.setText(Double.toString(sol)); //line that is causing the crash 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:29:23.277

你可以尝试使用`Double.Parse`...

和

```
res1.setText(String.valueOf(sol)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:46:54.367

您以错误的方式将 String 值转换为 Double ，请参阅以下两种方式，

1.  使用 Double.parseDouble()

    ```
    double sol = new Double.parseDouble((a.getText().toString().trim());     // also don't forget to use trim() method to remove white spaces 
    ```

2.  使用新的 Double( 值 ).doubleValue()

    ```
    double sol = new Double(a.getText().toString().trim()).doubleValue(); 
    ```

现在将此`sol`变量的值设置为 EditText 尝试以下方式，

1.  `res1.setText((String)sol));`
2.  `res1.setText(String.valueOf(sol));`
3.  `res1.setText( sol + "" );`

# forms - 如何为 Activiti 工作流中的所有用户任务表单添加标题？

> ID：13041662
> 
> 赞同：0
> 
> 时间：2012-10-24T01:12:37.627
> 
> 标签：forms, workflow, share, alfresco, activiti

我正在使用 Alfresco Share 中的 Activiti 工作流，我需要为工作流中的所有用户任务表单添加一个通用的标题。此标题将是一组只读属性（字段），在工作流中所有用户任务表单的顶部显示上下文工作流信息。例如，在客户管理工作流中，标题可能会显示客户姓名和姓氏、客户文件代码等，在只读文本框或标签中显示每个值。

是否有一种简单的方法可以向工作流中的所有用户任务表单添加一组信息字段（并填充它们）？我知道可以创建一个包含所需属性的新方面，但是如何在运行时将该方面添加到我的任务类型并在需要时通过 JavaScript 设置它们的属性值？目前，工作流中的每个用户任务在工作流模型定义（XML 文件）中都有自己的自定义类型（即表单），除了一些“标准”审查任务使用“wf:activitiReviewTask”作为表单键。只读信息字段集应出现在所有表单中，包括标准审阅任务表单。

我想实现这样的目标（见红色方块）：

[带有信息字段的任务表](http://imageshack.us/a/img18/4524/taskform.jpg)

提前感谢您的帮助。

**更新 1**

我没有使用表单模板的经验。由于我的表单非常简单，所以我只是使用了一些模型定义（方面和类型）和一些共享自定义配置来组合来设计它们。我希望在标题中显示的信息可以很容易地从 JavaScript 代码中检索，因为它存储在几个工作流上下文变量中。这是我的想法，尚未测试，请告诉我这是否可行。如果没有，您能否提供一个如何使用表单模板进行操作的示例？

mynsModel.xml

```
<aspect name="myns:customerTaskHeader">
    <title>Customer task header</title>
    <properties>
        <property name="myns:customerName">
            <title>Name</title>
            <type>d:text</type>
        </property>
        <property name="myns:customerSurname">
            <title>Surname</title>
            <type>d:text</type>
        </property>         
    </properties>
</aspect> 
```

工作流模型.xml

```
<type name="wf:customerDelivery">
    <title>Delivery to customer</title>
    <parent>bpm:workflowTask</parent>
    <properties>
        <property name="wf:customerDeliveryType">
            <title>Delivery type</title>
            <type>d:text</type>         
        </property>
        <property name="wf:customerDeliveryStatus">
            <title>Signed</title>
            <type>d:boolean</type>                  
        </property>
    </properties>
    <mandatory-aspects>
        <aspect>myns:customerTaskHeader</aspect>
    </mandatory-aspects>    
</type> 
```

共享配置-custom.xml

```
<config evaluator="task-type" condition="wf:customerDelivery">
    <forms>
        <form>
            <field-visibility>
                <show id="myns:customerName" />
                <show id="myns:customerSurname" />
                <show id="packageItems" />
                <show id="wf:customerDeliveryType" />
                <show id="wf:customerDeliveryStatus" />
                <show id="bpm:comment" />   
                <show id="transitions" />
            </field-visibility>
            <appearance>
                <set id="" appearance="title" label-id="workflow.set.general" />
                <set id="items" appearance="title" label-id="workflow.set.items" />
                <set id="response" appearance="title" labelid="workflow.set.response" />
                <field id="bpm:comment" labelid="workflow.field.message">
                    <control template="/org/alfresco/components/form/controls/textarea.ftl">
                        <control-param name="style">width: 95%</control-param>
                    </control>
                </field>
                <field id="packageItems" set="items" />
                <field id="transitions" set="response" />
                <field id="myns:customerName" read-only="true">
                    <control template="/org/alfresco/components/form/controls/info.ftl" />
                </field>
                <field id="myns:customerSurname" read-only="true">
                    <control template="/org/alfresco/components/form/controls/info.ftl" />
                </field>
            </appearance>
        </form>
    </forms>
</config> 
```

我在这个（可能的）解决方法中看到了一些缺点：

1.  所有任务类型定义都必须包含`customerTaskHeader`方面。问题是工作流中的许多用户任务都有内置类型，而不是自定义类型。如果能够在运行时通过 JavaScript 代码将具有所有必需值的方面添加到任务类型中，那就太好了，但这可能是不可能的。
2.  对于 share-config-custom.xml 中的每种任务类型，我需要一个不同的自定义配置评估器。同样的问题。
3.  我发现它使用起来很麻烦，而且很难维护。此外，如果我错了，请纠正我，我看不到为工作流中所有任务表单的标题字段设置值的简单方法。我认为我应该使用以下代码为每个用户任务添加一个“创建”事件侦听器：

[JavaScript 代码]

```
 var customerName = execution.getVariable('customerName');
    var customerSurname = execution.getVariable('customerSurname');
    task.setVariable('myns_customerName', customerName);
    task.setVariable('myns_customerSurname', customerSurname); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:24:41.847

定义自定义表单模板非常容易，如[http://wiki.alfresco.com/wiki/Forms](http://wiki.alfresco.com/wiki/Forms)中所述。作为该模板的一部分，您可以在开始呈现字段本身之前显示您需要的任何信息。如果您需要在多个表单模板中显示它，您甚至可以创建一个通用的“包含”模板。

问题是您希望在标题中显示哪些信息，这些信息存储在哪里？这将影响您需要如何检索它以显示给用户。

如果您需要的属性在任务项上可用，那么很容易通过表单字段值检索它们。然后可以将它们直接呈现到输出 HTML 中。

但是，从您的问题来看，我怀疑更有可能的是这些值存储在其他地方，并且必须在显示之前从那里检索。在这种情况下，您需要使用标准共享模式实现客户端功能（或组件），并修改表单模板，以便它生成的 HTML 会导致该代码在被浏览器加载时运行。

在该组件中，您可以对存储库 API 进行 XHR 调用，以检索属性值，然后使用回调函数更新 HTML 页面以填充数据以供用户显示。

作为类似的示例，请参阅`task owner.ftl`Share 提供的字段模板

```
<#if field.value?? && field.value?length &gt; 0>
...
<script type="text/javascript">//<![CDATA[
YAHOO.util.Event.onContentReady("${fieldHtmlId}", function ()
{
   YAHOO.util.Dom.get("${fieldHtmlId}").innerHTML = Alfresco.util.userProfileLink("${userName}", "${fullName}", "", ${disableLink?string});
}, this);
//]]></script>
</#if> 
```

这里客户端函数使用`Alfresco.util.userProfileLink`，但您可以实现自己的函数，该函数使用`Alfresco.util.Ajax.jsonGet()`或类似的方法来检索数据，然后使用 YAHOO.util.Dom 函数填充它。

但正如我所说，确切的方法取决于您的数据在哪里以及您需要如何显示它。

# c# - 如何在更新 ADO.NET 生成的实体时访问 ObjectContext 对象

> ID：13041664
> 
> 赞同：1
> 
> 时间：2012-10-24T01:13:04.303
> 
> 标签：c#, linq, ado.net, linq-to-entities

首先，我对 ADO.NET、LINQ 和那些数据访问技术非常陌生。据我了解，我在 Internet 上阅读和发现的内容 LINQ2SQL 演变为 LINQ 到演变为 ADO.NET 的实体。也许我对这些概念有误，所以让我知道。

现在的问题。我正在使用 ADO.NET 在 VS2010 (.NET 4.0) 中开发一个系统来管理学校。该解决方案分为 3 层：表示层（仅 GUI）、业务层（所有过程都在这里完成）和数据层（仅查询和数据库访问）。

该数据库有一个 People 表，用于存储人员（学生、教师、行政人员等）的数据，其中包含一个 Nationality 字段，该字段存储对 Country 表的引用以及所有现有国家/地区。

在我的第一种方法中，我创建了一个名为 ConnectionManager 的单例类，它存储连接字符串和对数据库模型的引用（由 ADO.NET 实体数据模型设计器生成的代码），这是一个继承自 ObjectContext 的对象，称为 SystemEntities。

此时一切都很好，但是我想知道以下场景：当受托人到达时，用户正在编辑个人信息并请求她的付款账单；然后用户切换到账单表格，填写数据并在打印前保存。在此过程中，将调用 SystemEntities.SaveChanges，以便将所有更改保存到数据库中，然后保存对已编辑人员所做的未完成更改，但这是不希望的行为。

然后我读到我不能有一个保持与数据库的连接打开的单例。每个 ObjectContext 都必须在获取数据后进行处理，因此应该使用这样的代码。

获取所有人

```
public static T[] QueryAll<T>() where T : Person
{
    using (SystemEntities context = ConnectionManager.Instance.GetContext())
    {
        return context.People
            .OfType<T>()
            .Include("Emails")
            .Include("Phones")
            .OrderBy(affiliate => affiliate.LastName + " " + affiliate.FirstName)
            .ToArray();
    }
} 
```

获取一个国家

```
public static Country GetByID(string id)
{
    using (SystemEntities context = ConnectionManager.Instance.GetContext())
    {
        return context.Countries.FirstOrDefault(country => country.CountryID == id);
    }
} 
```

现在，当我试图编辑一个人，专门改变一个人的国家时，会出现一个例外：

```
The relationship between the two objects cannot be defined
because they are attached to different ObjectContext objects. 
```

这是通过以下代码完成的：

```
public Person Person
{
    get { ... }
    set
    {
        this.person = value;
        ...
        this.cmbNationality.DataBindings.Add("SelectedItem", person, "Nationality");
        this.cmdAddressCountry.DataBindings.Add("SelectedItem", person, "Country");
        ...
    }
}

private void form_Load(object sender, EventArgs e)
{
    Country[] countries = Country.QueryAll();
    Country mexico = Country.GetByA2("MX");
    this.cmbNationality.DataSource = countries;
    this.cmdAddressCountry.DataSource = countries;
    this.cmbNationality.SelectedItem = mexico;
    this.cmdAddressCountry.SelectedItem = mexico;
} 
```

因此，当您更改 cmbNationality 和 cmdAddressCountry 组合框中的项目时，将引发异常。请注意，这只是一个更改，没有执行保存。

据我了解，这是因为 Person 和 Country 对象是从不同 SystemEntities (ObjectContext) 对象的数据库中获取的。

还有问题和疑问。如果我不能使用单例并且必须在使用后处理所有上下文，我该如何解决？当然，我可以创建几种方法来避免此问题，手动进行更新或不使用数据绑定，但是，如果您必须手头进行更新，那么 ADO.NET 的意义何在？

也许是一个愚蠢或微不足道的问题（或者可能是我只是不知道如何搜索答案），但我无法找到答案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:42:53.367

为什么不在类中以及在构造函数中使用时设置 gobal 对象“SystemEntities 上下文”

`"context = ConnectionManager.Instance.GetContext()"`，所以你会得到相同的

```
SystemEntities (ObjectContext) objects. 
```

我希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:33:20.013

听起来您正在使用标准的断开连接模型。由于您已断开连接，因此无论何时持久化已修改的对象，您都必须从当前上下文中重新水合您的实体。以下希望能更好地说明我在说什么：

```
 public static Person PersistPerson(Person person)
    {
        using (SystemEntities context = ConnectionManager.Instance.GetContext())
        {
            bool doInsert = false;
            var p = context.People.Where(d => d.PersonId == person.PersonId).FirstOrDefault();
            if (p == null)
            {
                p = new Person();
                doInsert = true;
            }

            //update connected Entity
            p.LastName = person.LastName;
            p.Emails = person.Emails;
            //etc...
            if(doInsert)                    
                context.People.AddObject(person);

            context.SaveChanges();
            person.PersonId = p.PersonId;
        }
        return person;
    } 
```

# c - 不兼容的指针类型 char** 和 char* 错误

> ID：13041667
> 
> 赞同：1
> 
> 时间：2012-10-24T01:13:26.537
> 
> 标签：c, pointers

```
void decimal2binary(char *decimal, char *binary) {   
    //method information goes here    
} 
```

这是主要

```
int main(int argc, char **argv) {

char *data[100];
if (argc != 4) {
    printf("invalid number of arguments\n");
    return 1;
}
if (strcmp(argv[1] , "-d")) {

    if (strcmp(argv[3] , "-b")) {
        decimal2binary(temp, data);
    }
    }
} 
```

现在我得到这个错误

```
 warning: passing argument 2 of ‘decimal2binary’ from incompatible pointer type [enabled by default]

     note: expected ‘char *’ but argument is of type ‘char **’ 
```

所以它说它们是不兼容的类型，但我必须使用 argv 来获取数据（我被问到）还有其他方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T01:15:26.333

将声明更改`data`为简单：

```
char data[100]; 
```

您不需要指向 type 的指针数组`char`，这就是您现在在代码中声明的内容。您只需要一个字节数组。我相信您的困惑源于这样一个事实，即虽然数组不是指针，但当作为函数参数传递时，它们确实会衰减为指向数组第一个元素的指针。因此，简单地说`decimal2binary(temp, data);`，您传递的是指向 的第一个元素的指针`data`，在这种情况下，您需要将其作为指向 a 的指针`char`，而不是 a `char*`。

# algorithm - 识别可以表达任何算法的三种控制流

> ID：13041669
> 
> 赞同：-2
> 
> 时间：2012-10-24T01:13:42.153
> 
> 标签：algorithm

确定可以表达任何算法的三种类型的控制流？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:16:46.257

我想你的意思是：序列、分支（if-else）和循环（while）

# sql-server-2008 - 考虑迁移到 tfs 2012

> ID：13041672
> 
> 赞同：-1
> 
> 时间：2012-10-24T01:14:11.620
> 
> 标签：sql-server-2008, visual-studio, tfs, tfs-migration

我目前正在使用 tfs 2010 /sql server 2008 r2 和 vs.net 2010。考虑将 tfs 升级到 2012。有人试过吗？这相对容易吗？我也应该升级到 vs.net 2012 吗？它仍然适用于 sql server 2008 r2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:42:40.373

来自[Team Foundation Server 的 SQL Server 要求](http://msdn.microsoft.com/en-us/library/dd631889.aspx)

> **支持的版本**
> 
> *   SQL Server 2008，R2 Express¹
> *   SQL Server 2008，R2 标准版¹
> *   SQL Server 2008，带有 SP 1 CU1 的 R2 企业版（2011 年 8 月 25 日）²
> *   SQL Server 2012，Express¹
> *   SQL Server 2012，标准版¹
> *   SQL Server 2012，企业版
> 
> ¹ 有限或没有 SQL Server 高可用性支持。
> 
> ² 如果您使用的是 SQL Server 2008 R2 Enterprise Edition，则需要更新到 SQL Server 2008 R2 Service Pack 1 的累积更新包 1，以解决 SQL Server 表压缩问题。

对于[Visual Studio 2010，您需要 GDR 补丁](http://www.microsoft.com/en-us/download/details.aspx?id=29082)以实现兼容性。

升级本身相当容易，并且有很多指南。如果您还没有自定义流程模板并且只使用 scrum v1 模板，那么[启用新功能真的很容易。](http://msdn.microsoft.com/en-us/library/ff432837.aspx)要自动升级其他模板，您需要即将发布的仍在测试中的补丁（我几乎建议您等待它发布），或者您可以手动完成。

[手动升级](http://msdn.microsoft.com/en-us/library/hh500409.aspx)需要大量命令行和 xml 编辑。

# java - Android java在动画发生后更新图像的坐标

> ID：13041673
> 
> 赞同：0
> 
> 时间：2012-10-24T01:14:12.380
> 
> 标签：java, android

我有一个动画，当我点击它时它会向右移动。但是，当我尝试再次单击它时，我必须在它之前所在的位置单击它。

我该如何解决这个问题以及它可以在哪里点击它的新位置？

这是我的代码

```
 public void sideBar()
   {

       ImageView sidebar = (ImageView)findViewById(R.id.sidebar);

       if(out == 0)
       {
       mSlideInRight = AnimationUtils.loadAnimation(this, R.anim.slide_in_right);
       mSlideInRight.setFillAfter(true);
       sidebar.startAnimation(mSlideInRight);
       out= 1;
       }
       else if(out == 1)
       {
               mSlideInLeft = AnimationUtils.loadAnimation(this, R.anim.slide_in_left);
               sidebar.startAnimation(mSlideInLeft);
               out=0;
       }

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:43:37.270

发生这种情况是因为它`ImageView`本身并没有“实际”移动。您必须实现一个动画侦听器并`ImageView`在动画结束时移动 。

请参考这个问题：[Android Animation Flicker](https://stackoverflow.com/questions/9387711/android-animation-flicker) 和这个：[Android Button Don't Respond After Animation](https://stackoverflow.com/questions/2125694/android-button-doesnt-respond-after-animation?rq=1)

# c# - 为任何方法创建 Func 或 Action（在 c# 中使用反射）

> ID：13041674
> 
> 赞同：15
> 
> 时间：2012-10-24T01:14:24.323
> 
> 标签：c#, reflection, lambda, expression-trees

我的应用程序根据数据库中的设置（文件、类和方法名称）动态加载 dll。为了方便、加快和减少反射的使用，我想有一个缓存....

遵循使用的想法：

```
 MethodInfo.Invoke 
```

没有什么表演（[反射性能 - 创建委托（属性 C#）](https://stackoverflow.com/questions/10820453/reflection-performance-create-delegate-properties-c)）我想翻译任何对方法的调用。我想到了一些可以像这样工作的东西：

```
public static T Create<T>(Type type, string methodName) // or
public static T Create<T>(MethodInfo info) // to use like this:
var action = Create<Action<object>>(typeof(Foo), "AnySetValue"); 
```

一个要求是所有参数都可以是对象。

我正在尝试处理表达式，到目前为止，我有这样的事情：

```
 private void Sample()
    {
        var assembly = Assembly.GetAssembly(typeof(Foo));

        Type customType = assembly.GetType("Foo");

        var actionMethodInfo = customType.GetMethod("AnyMethod");
        var funcMethodInfo = customType.GetMethod("AnyGetString");
        var otherActionMethod = customType.GetMethod("AnySetValue");
        var otherFuncMethodInfo = customType.GetMethod("OtherGetString");

        var foo = Activator.CreateInstance(customType);
        var actionAccessor = (Action<object>)BuildSimpleAction(actionMethodInfo);
        actionAccessor(foo);

        var otherAction = (Action<object, object>)BuildOtherAction(otherActionMethod);
        otherAction(foo, string.Empty);

        var otherFuncAccessor = (Func<object, object>)BuildFuncAccessor(funcMethodInfo);
        otherFuncAccessor(foo);

        var funcAccessor = (Func<object,object,object>)BuildOtherFuncAccessor(otherFuncMethodInfo);
        funcAccessor(foo, string.Empty);
    }

    static Action<object> BuildSimpleAction(MethodInfo method)
    {
        var obj = Expression.Parameter(typeof(object), "o");

        Expression<Action<object>> expr =
            Expression.Lambda<Action<object>>(
                Expression.Call(
                    Expression.Convert(obj, method.DeclaringType),
                    method), obj);

        return expr.Compile();
    }

    static Func<object, object> BuildFuncAccessor(MethodInfo method)
    {
        var obj = Expression.Parameter(typeof(object), "o");

        Expression<Func<object, object>> expr =
            Expression.Lambda<Func<object, object>>(
                Expression.Convert(
                    Expression.Call(
                        Expression.Convert(obj, method.DeclaringType),
                        method),
                    typeof(object)),
                obj);

        return expr.Compile();

    }

    static Func<object, object, object> BuildOtherFuncAccessor(MethodInfo method)
    {
        var obj = Expression.Parameter(typeof(object), "o");
        var value = Expression.Parameter(typeof(object));

        Expression<Func<object, object, object>> expr =
            Expression.Lambda<Func<object, object, object>>(
                    Expression.Call(
                        Expression.Convert(obj, method.DeclaringType),
                        method,
                        Expression.Convert(value, method.GetParameters()[0].ParameterType)), 
                        obj, value);

        return expr.Compile();

    }

    static Action<object, object> BuildOtherAction(MethodInfo method)
    {
        var obj = Expression.Parameter(typeof(object), "o");
        var value = Expression.Parameter(typeof(object));

        Expression<Action<object, object>> expr =
            Expression.Lambda<Action<object, object>>(
                Expression.Call(
                    Expression.Convert(obj, method.DeclaringType),
                    method,
                    Expression.Convert(value, method.GetParameters()[0].ParameterType)),
                obj,
                value);

        return expr.Compile();
    } 
```

* * *

```
public class Foo
{
    public void AnyMethod() {}

    public void AnySetValue(string value) {}

    public string AnyGetString()
    {            return string.Empty;        }

    public string OtherGetString(string value)
    {            return string.Empty;        }
} 
```

有没有办法简化这段代码？（我相信只使用泛型来创建方法是可能的。。）当你有 3、4、5 时，像我一样有任何参数吗？

* * *

我在想，如果有这样的事情怎么办：

[https://codereview.stackexchange.com/questions/1070/generic-advanced-delegate-createdelegate-using-expression-trees](https://codereview.stackexchange.com/questions/1070/generic-advanced-delegate-createdelegate-using-expression-trees)

但我将有多个参数（在动作或函数中），这个参数（第一个参数）是一个要执行的对象。这可能吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T02:16:27.447

我制作了一个满足您所有要求的示例程序（我认为！）

```
class Program
{
    class MyType
    {
        public MyType(int i) { this.Value = i; }

        public void SetValue(int i) { this.Value = i; }

        public void SetSumValue(int a, int b) { this.Value = a + b; }

        public int Value { get; set; }
    }

    public static void Main()
    {
        Type type = typeof(MyType);

        var mi = type.GetMethod("SetValue");

        var obj1 = new MyType(1);
        var obj2 = new MyType(2);

        var action = DelegateBuilder.BuildDelegate<Action<object, int>>(mi);

        action(obj1, 3);
        action(obj2, 4);

        Console.WriteLine(obj1.Value);
        Console.WriteLine(obj2.Value);

        // Sample passing a default value for the 2nd param of SetSumValue.
        var mi2 = type.GetMethod("SetSumValue");

        var action2 = DelegateBuilder.BuildDelegate<Action<object, int>>(mi2, 10);

        action2(obj1, 3);
        action2(obj2, 4);

        Console.WriteLine(obj1.Value);
        Console.WriteLine(obj2.Value);

        // Sample without passing a default value for the 2nd param of SetSumValue.
        // It will just use the default int value that is 0.
        var action3 = DelegateBuilder.BuildDelegate<Action<object, int>>(mi2);

        action3(obj1, 3);
        action3(obj2, 4);

        Console.WriteLine(obj1.Value);
        Console.WriteLine(obj2.Value);
    }
} 
```

委托生成器类：

```
public class DelegateBuilder
{
    public static T BuildDelegate<T>(MethodInfo method, params object[] missingParamValues)
    {
        var queueMissingParams = new Queue<object>(missingParamValues);

        var dgtMi = typeof(T).GetMethod("Invoke");
        var dgtRet = dgtMi.ReturnType;
        var dgtParams = dgtMi.GetParameters();

        var paramsOfDelegate = dgtParams
            .Select(tp => Expression.Parameter(tp.ParameterType, tp.Name))
            .ToArray();

        var methodParams = method.GetParameters();

        if (method.IsStatic)
        {
            var paramsToPass = methodParams
                .Select((p, i) => CreateParam(paramsOfDelegate, i, p, queueMissingParams))
                .ToArray();

            var expr = Expression.Lambda<T>(
                Expression.Call(method, paramsToPass),
                paramsOfDelegate);

            return expr.Compile();
        }
        else
        {
            var paramThis = Expression.Convert(paramsOfDelegate[0], method.DeclaringType);

            var paramsToPass = methodParams
                .Select((p, i) => CreateParam(paramsOfDelegate, i + 1, p, queueMissingParams))
                .ToArray();

            var expr = Expression.Lambda<T>(
                Expression.Call(paramThis, method, paramsToPass),
                paramsOfDelegate);

            return expr.Compile();
        }
    }

    private static Expression CreateParam(ParameterExpression[] paramsOfDelegate, int i, ParameterInfo callParamType, Queue<object> queueMissingParams)
    {
        if (i < paramsOfDelegate.Length)
            return Expression.Convert(paramsOfDelegate[i], callParamType.ParameterType);

        if (queueMissingParams.Count > 0)
            return Expression.Constant(queueMissingParams.Dequeue());

        if (callParamType.ParameterType.IsValueType)
            return Expression.Constant(Activator.CreateInstance(callParamType.ParameterType));

        return Expression.Constant(null);
    }
} 
```

## 这个怎么运作

核心是**BuildDelegate**方法：

`static T BuildDelegate<T>(MethodInfo method)`

*   T 是您要创建的委托类型。
*   method 是您希望生成的委托调用的方法的 MethodInfo。

示例调用：`var action = BuildDelegate<Action<object, int>>(mi);`

**参数规则：**

*   如果传递的方法是实例方法，则生成的委托的第一个参数将接受包含方法本身的对象的实例。所有其他参数将传递给该方法。

*   如果传递的方法是静态方法，那么生成的委托的所有参数都将传递给该方法。

*   缺少的参数将传递默认值。

*   额外的参数将被丢弃。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T03:38:48.230

`Delegate.CreateDelegate`比构建表达式树要简单得多。

```
 var assembly = Assembly.GetAssembly(typeof(Foo));

    Type customType = assembly.GetType("Foo");

    var actionMethodInfo = customType.GetMethod("AnyMethod");

    var foo = Activator.CreateInstance(customType);

    Action action = (Action)Delegate.CreateDelegate(typeof(Action), foo, actionMethodInfo); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T02:55:40.430

我遇到了一个非常相似的场景，我发现以下工作非常好。

首先，让我们设置我们的测试 Foo 类：

```
public class Foo
{
    private string _name;

    public Foo(string name)
    {
        _name = name;
    }

    public void AnyMethod()
    {
        Console.WriteLine("{0} Called: AnyMethod()", _name);
    }

    public void AnySetValue(string value)
    {
        Console.WriteLine("{0} Called: AnySetValue(string) with {1}", _name, value);
    }

    public string AnySetString(string value)
    {
        Console.WriteLine("{0} Called: AnySetString(string) with {1}", _name, value);
        return value;
    }
} 
```

接下来，我们创建一组方法来创建可重用的方法包装器：

```
public static Action<object> CreateReusableAction<TClass>(string methodName)
{
    var method = typeof(TClass).GetMethod(methodName);
    var del = Delegate.CreateDelegate(typeof(Action<TClass>), method);
    Action<object> caller = (instance) => del.DynamicInvoke(instance);
    return caller;
}

public static Action<object, object> CreateReusableAction<TClass, TParam1>(string methodName)
{
    var method = typeof(TClass).GetMethod(methodName, new Type[] { typeof(TParam1) });
    var del = Delegate.CreateDelegate(typeof(Action<TClass, TParam1>), method);
    Action<object, object> caller = (instance, param) => del.DynamicInvoke(instance, param);
    return caller;
}

public static Func<object, object, object> CreateReusableFunction<TClass, TParam1, TReturn>(string methodName)
{
    var method = typeof(TClass).GetMethod(methodName, new Type[] { typeof(TParam1) });
    var del = Delegate.CreateDelegate(typeof(Func<TClass, TParam1, TReturn>), method);
    Func<object, object, object> caller = (instance, param) => (TReturn)del.DynamicInvoke(instance, param);
    return caller;
} 
```

然后我们可以按如下方式使用它：

```
var myFoo = new Foo("myFoo");
var otherFoo = new Foo("otherFoo");

var anyMethod = CreateReusableAction<Foo>("AnyMethod");
anyMethod(myFoo);
anyMethod(otherFoo);

var anySetValue = CreateReusableAction<Foo, string>("AnySetValue");
anySetValue(myFoo, "Value 1");
anySetValue(otherFoo, "Value 2");

var anySetString = CreateReusableFunction<Foo, string, string>("AnySetString");
var firstResult = anySetString(myFoo, "MyFooValue1");
var secondResult = anySetString(otherFoo, "OtherFooValue1"); 
```

产生输出：

```
myFoo Called: AnyMethod()
otherFoo Called: AnyMethod()
myFoo Called: AnySetValue(string) with Value 1
otherFoo Called: AnySetValue(string) with Value 2
myFoo Called: AnySetString(string) with MyFooValue1
otherFoo Called: AnySetString(string) with OtherFooValue1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T16:47:43.280

如果您可以在项目中使用库，请尝试 Impromptu Interfaces（可在此处获得：[http](http://code.google.com/p/impromptu-interface/) ://code.google.com/p/impromptu-interface/ ）或在 nuget 上。

这有很多处理类型反射的功能，还实现了内部缓存。我一直在一个严重依赖反射的项目中使用它，并且性能非常好。

该库本身具有很多功能，但它也可以处理像您这样的场景。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T08:41:50.027

我有点不确定你真正想要做什么，但也许这有帮助？

```
 public static Func<object, object[], object> CreateDelegate(MethodInfo method)
    {
        return new Func<object, object[], object>((object instance, object[] args) => method.Invoke(instance, args));
    }
    // Merely providing syntactic suger, ie able to write 
    // method.MyInvoke(instance, arg1, arg2, arg3, arg4) 
    // instead of having to put the args in an array, ie Invoke(instance, new object[]{arg1, arg2}) etc
    public static object MyInvoke(this Func<object, object[], object> func, object instance, params object[] args)
    {
        return func(instance, args);
    }

    public static void TestCode()
    {
        var method = typeof(string).GetMethod("get_Length");

        var wrappfunc = CreateDelegate(method);
        // Calling get_Length (ie Length property) on the string "klasjf"
        wrappfunc.MyInvoke("klasjf"); 
    } 
```

但是，您将失去强类型，因为所有参数都是`object`，我有点不确定您真正想要完成什么。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T03:20:44.697

我不确定，但为什么你不使用这种`dynamic`类型？例如：

```
dynamic foo = Activator.CreateInstance(customType);
foo.AnyMethod();
foo.AnySetValue("test string");
foo.OtherMethod("method", "with", "many", "parameters"); 
```

# sql - 根据角色选择值

> ID：13041675
> 
> 赞同：3
> 
> 时间：2012-10-24T01:14:59.963
> 
> 标签：sql, sql-server, tsql

以下来自临时表的结果。
请注意：下面的数据只是一个示例，所以我不需要硬编码查询，我需要一个适用于各种数据的查询。

值 = 1 表示用户有角色，0 表示用户没有角色。与第一行一样，测试 1 具有角色 A，但没有角色 D。

我需要查询以下情况。

案例＃1，当`Role ID = ( A,B,C,D )` 我只需要分配了至少一个角色的用户时。我应该取回用户测试 1、测试 2 和测试 3。测试 4 不会到来，因为它没有分配任何角色。

案例#2 当`Role ID = ( A,B,C,D )`. 我只需要分配给它的所有角色的用户。我应该得到 4 行的 User Testing2。

> 用户名 值 角色 ID
> 测试1 1 A
> 测试1 1 B
> 测试1 1 C
> 测试1 0 D测试2
> 1 A 测试2 1
> B测试2 1
> C测试
> 2 1 D
> 测试3 1 A
> 测试3 1 B
> 测试3 1 C
> 测试3 0 D
> 测试4 0 A
> 测试4 0 B
> 测试4 0 C
> 测试4 0 天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:19:58.560

案例#1（*至少分配了一个角色*）

```
SELECT b.*
FROM   
    (
      SELECT DISTINCT [username], Value
      FROM tableName
      WHERE value = 1
    ) a
      INNER JOIN TableName b
        ON a.username = b.username
WHERE  a.value = 1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/cb29f/6)

案例#2（*将所有角色分配给它*）

```
SELECT username
FROM tableName
WHERE RoleID IN ('A','B','C','D')
GROUP BY username
HAVING COUNT(DISTINCT roleID) = 4 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/0b915/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:32:07.720

要获得最终结果（用户的所有记录），请使用以下查询之一（CASE X）并将其连接回完整表，例如对于 CASE 1：

```
 select t.*
    from (
          select username
            from tbl
           where value = 1
        group by username) g
    join tbl t on t.username = g.username
order by t.username, t.roleid 
```

案例 1：至少拥有一个角色的用户

```
 select username
    from tbl
   where value = 1
group by username 
```

案例 2：拥有所有角色的用户（角色数量未知）

```
 select username
    from tbl
   where value = 1
group by username
  having count(distinct roleid) = (select count(distinct roleid) from tbl) 
```

案例 2：拥有所有角色的用户（预先知道的角色数量，例如 A、B、C、D => 4）

```
 select username
    from tbl
   where value = 1
group by username
  having count(distinct roleid) = 4 
```

# ruby-on-rails - 如何垂直列出一个月中的日子

> ID：13041676
> 
> 赞同：0
> 
> 时间：2012-10-24T01:15:08.597
> 
> 标签：ruby-on-rails

我有以下图像。这基本上代表的是一个轮换。我想要做的是将它实现到我正在使用 Ruby On Rails 构建的系统中。但是我已经确定我要做的第一件事是垂直列出月份的日期。我有点困惑。横向的标题代表不同的医院。与日期和医院相对的名称显示了谁在哪家医院工作。颜色编码现在不相关。

水平标题是医院。这些是10家医院的固定值。我发现困难的是生成当天，在我的图像中使用当天作为 16 日并一直到 5 月 12 日。

我试图想出一些伪代码，但不太确定我是否朝着正确的方向前进

`(Date.today..23.days.from_now).each do |d|; td= d.to_s(:short);`

尽管我在想也许将循环封装在内部会自动为我生成单元格以及日期

是否有可能的解决方案来实现我想要做的事情。

我的模型如下：

*   部门
*   Hospital_booking
*   医院
*   角色用户
*   角色
*   轮播日
*   用户

想到的另一件事是，因为我知道医院的固定值是 10。我在想也许我可以做以下事情：

```
<table class="rota">
        <thead>
            <th> Dates </th>
                     <th> Hospital </th>
            <% end %>
        </thead>
        <% @Hospital.each do |Hospital| %>
            <tr class="rota_days" id="rota_days<%= hospital_id %>"> 
```

这样它可以遍历医院并生成标题但是我仍然会被困在生成日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:50:12.953

我认为您在正确的轨道上，但不能 100% 确定您在哪里遇到问题。

为了解决这个问题，我将传递视图`@hospitals`以及`@days`哪些对应于您要列出的医院以及您要列出的日期。这`get_hospital_booking_for_day`将是您创建的视图助手，它返回值班人员的姓名或 a`nbsp;`以便空白单元格正确显示。

同样，我不确定这对您来说是否 100% 正确，但希望它能让您走上正确的轨道：

```
<table class="rota">
    <thead>
    <% @hospitals.each do |hosp| %>
        <th><%= hosp.name %></th>
    <% end %>
    </thead>
    <tbody>
    <% @days.each do |day| %>
        <tr>
            <td><%= day.to_s(:short) %></td>
            <% @hospitals.each do |hosp| %>
                <td><%= get_hospital_booking_for_day(hosp, day) %></td>
            <% end %>
        </tr>
    <% end %>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:31:14.867

垂直列出月份是视图造成的错觉。最简单的方法是有一个数据字段，如

> 月, 1, 3, 约翰

并将其放在 json 对象中。（***注意****：在 JS 中有其他方法吗？继续 - 无论如何，您的格式问题都会在之后讨论*）。我将使用一个数组。

```
var outputs = [];
for (i = 0; i < amountOfOutputs; i++) {
     outputs[i] = { month: "",
                    datafield1: "",
                    datafield2: "",
                    datafield3: "" }
} 
```

然后我会将对象附加到您的表格中（如果您必须使用表格......）。您的问题的答案在这里公开。

```
for (i = 0; i < outputs.length; i++ ) {
    var $row =     $('<tr class="'+i+'">').
    var $month =   $('<td>').text(outputs[i].month);
    var $df1 =     $('<td>').text(outputs[i].datafield1);
    var $df2 =     $('<td>').text(outputs[i].datafield2);
    var $df3 =     $('<td>').text(outputs[i].datafield3);
    $row.appendTo('table');
    $month.appendTo('tr.'+i+'');
    $df1.appendTo('tr.'+i+'');
    $df2.appendTo('tr.'+i+'');
    $df3.appendTo('tr.'+i+'');
} 
```

你应该让你的表格垂直显示月份。

我希望这会有所帮助，如果我没有接近解决方案，请告诉我，我会再试一次。它不是一个 100% 完整的解决方案，但它应该是你在**格式化**的正确轨道上。

# excel - 删除 Excel 2010 中的某些字符

> ID：13041680
> 
> 赞同：0
> 
> 时间：2012-10-24T01:15:38.190
> 
> 标签：excel, excel-2007, excel-2010

我在 Excel 2010 中有大约 4000 条数据记录，如下所示：

```
QW3-WE-2232-322-A-2
WETE-33-3REE-33-WEWE-3
DEE-3YED-3432-DXSDDD-3FESE-2
343-34SE-34323-AWBE-3
ABDC-343-3THYT-2 
```

我希望数据看起来像这样，其中最后一个破折号之后的所有内容都被删除。

```
QW3-WE-2232-322-A
WETE-33-3REE-33-WEWE
DEE-3YED-3432-DXSDDD-3FESE
343-34SE-34323-AWBE
ABDC-343-3THYT 
```

想知道是否有一种简单的方法来执行此 Excel？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:20:55.303

回答最多出现两个“-”分隔符的原始问题：

```
=LEFT(A1,FIND("-",A1,FIND("-",A1)+1)-1) 
```

回答出现任意数量的“-”分隔符的修改后的问题：

```
=LEFT(A1,FIND("|",SUBSTITUTE(A1,"-","|",LEN(A1)-LEN(SUBSTITUTE(A1,"-",""))))-1) 
```

这个答案是通过[如何在不使用 VBA 的情况下在 Excel 中执行反向字符串搜索？](https://stackoverflow.com/questions/350264/how-can-i-perform-a-reverse-string-search-in-excel-without-using-vba)，其中也可以找到几个适应性强的选项。

这是非常聪明的，但是使用一点 VBA 可以设计出更直接的答案。执行此操作的 VBA 可能非常简单，但我建议引入正则表达式以获得更灵活的解决方案，您可以将其用于其他类似问题。

```
Function RegExReplace(pattern As String, sourceString As String, replaceVar As String) As String
    Dim RE As Object
    Set RE = CreateObject("vbscript.regexp")
    RE.pattern = pattern
    RE.Global = True
    RegExReplace = RE.Replace(sourceString, replaceVar)
End Function 
```

然后在你的工作表中你会使用

```
=RegExReplace("-[^-]*$",A1,"") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:46:58.217

在我看来，您只想摆脱字符串末尾的最后两个字符。如果是这样，那么您可以尝试`=Left(A1,Len(A1)-2)`

# php - 同一查询中的多个 MySQL SELECTS

> ID：13041685
> 
> 赞同：0
> 
> 时间：2012-10-24T01:16:28.360
> 
> 标签：php, mysql, sql

是否可以将多个 SELECTS 中的元素检索到 PHP 中？

以这个为例：

```
$query= mysql_query("SELECT ...; SELECT ...;") 
```

如果可能，我们如何组织信息？

我不认为这很简单：

```
while($row = mysql_fetch_array($query)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:25:44.253

您应该`Union`按照@JLibert 的建议使用。

请参阅文档：[http ://dev.mysql.com/doc/refman/5.1/en/union.html](http://dev.mysql.com/doc/refman/5.1/en/union.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:46:18.047

```
$query = mysql_query("SELECT [blank] FROM [blank]
UNION
SELECT [blank] FROM [blank]"); 
```

（以前的人建议的，只是它的样子）

# c# - 选择除一个扩展名之外的所有文件

> ID：13041691
> 
> 赞同：2
> 
> 时间：2012-10-24T01:17:58.157
> 
> 标签：c#, regex

我想通过目录中的文件扩展名删除文件。现在，我的程序只需使用过滤器“点星号”选择所有文件类型，如下所示：

```
.* 
```

我现在需要它来删除所有文件，但文件扩展名为*.abc*的文件除外。我将如何更改正则表达式过滤器以反映这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:29:43.883

或者，最简单的：

```
(?i)\.abc$ 
```

甚至不需要花哨的正则表达式引擎（具有环视支持）来匹配那个引擎。只需否定代码中的匹配即可。如果匹配，请不要删除它。如果没有，请删除它。

该`(?i)`部分是可选的。它使正则表达式不区分大小写（因此它将匹配*file1.abc*和*FILE2.ABC*）。[您可以使用Regex options](http://msdn.microsoft.com/en-us/library/h5845fdz.aspx)实现相同的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:20:01.203

负前瞻~~后视~~（假设您所指的[正则表达式支持它）：](/questions/tagged/regex "显示标记为“正则表达式”的问题")

```
^.*(?<!\.abc)$ 
```

*抱歉，您要向后看，而不是向前看。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T01:48:19.623

只是我们也有一个“真实”正则表达式的回复：

```
(^.?.?.?|[^.]...|\.[^a]..|\..[^b].|\...[^c])$ 
```

但是您可以看到这变得非常复杂，尤其是当您需要第二个扩展时，因此您实际上真的想使用其他一些解决方案:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T07:19:04.630

试试这个简单的`regex`：

```
^.*(?=[.]abc$) 
```

解释：

> ***`^`*** 匹配必须从字符串或行的开头开始。
> 
> ***`(?= subexpression)`*** 零宽度正向超前断言。
> 
> ***`[ character_group ]`*** 匹配 character_group 中的任何单个字符。
> 
> ***`$`*** 匹配必须出现在字符串`\`的末尾或行或字符串末尾的 n 之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T01:24:51.700

您可以在后面使用否定的外观，锚定到输入的末尾，如下所示：

```
^.*(?<!\.abc)$ 
```

或者更简单地使用锚定到输入开始的否定前瞻：

```
^(?!.*\.abc$) 
```

# android - 为什么android socket中的connect()不起作用？

> ID：13041694
> 
> 赞同：0
> 
> 时间：2012-10-24T01:18:32.060
> 
> 标签：android, sockets, exception, connect, wifi-direct

我编写了与 Android WiFiDirect 的演示类似的代码，但我的 socket.connect() 无法工作。它终止并跳转到“finally”部分，没有抛出任何异常。我检查了connect()的所有输入参数，它们和demo中的完全一样。

有没有人遇到过类似的问题？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:15:28.060

问题解决了。详情如下。

Exception 可以覆盖的不仅仅是 IOException；使用异常，问题描述被捕获。由于socket的连接不能在最新SDK版本的UI线程中运行，socket终止。打开了一个工作线程来执行套接字的工作，并且工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:15:25.000

很明显，它抛出了一个`RuntimeException`你`SecurityException`没有 catch 块的东西。

# ruby-on-rails - Facebook Javascript SDK 父页面和弹出页面都在 facebook 登录页面中重定向

> ID：13041699
> 
> 赞同：0
> 
> 时间：2012-10-24T01:18:59.717
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, facebook-javascript-sdk

![这是我的问题的打印屏幕](../Images/e92fb0cb4e9f159b9d1757b6b705c8a3.png)

我的 facebook Javascript SDK 有问题....它正在工作，但是。当您单击登录时...会有弹出显示显示您在 facebook 上登录（没关系）..问题是，当您登录弹出登录时，窗口不要关闭它那里的股票...第二个问题是，父页面也被重定向到 facebook 登录页面.. 我该如何解决这个问题？顺便说一句，我在轨道上使用红宝石。

**这是我的 facebook.js：**

```
window.fbAsyncInit = function() {
  FB.init({
    appId      : "XXXXXXXXXXXXXXXX", // App ID
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML

  });

    $(function() {
      $("#signin").click(function() {
        FB.login(function(response, event) {
           if (response.authResponse) {
             $.cookie("user_id", response.authResponse.userID);
             $.cookie("access_token", response.authResponse.accessToken);
             window.location = "#{auth_facebook_callback_url}";
          } else {
          }
        }, {scope: 'email,read_stream,publish_stream,offline_access'});
      });
    });

    $(function() {
        $("#signout").click(function(){
            FB.getLoginStatus(function(response){
                if(response.authResponse){
                    FB.logout();
                }
            });
        });
    }); 
 };
// Load the SDK Asynchronously
(function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = '//connect.facebook.net/en_US/all.js';
   ref.parentNode.insertBefore(js, ref);
 }(document)); 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T12:23:41.220

我认为您需要提供 `redirect_uri` 此处所述的参数（您还指定范围）： [https ://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

# batch-file - REG DELETE 一个包含引号的值，在批处理文件中？

> ID：13041700
> 
> 赞同：0
> 
> 时间：2012-10-24T01:18:59.620
> 
> 标签：batch-file, registry

我正在尝试删除我制作的批处理文件中的一些注册表项。

我在这里找到了以下代码，它运行良好，直到它到达 REG DELETE

```
for /F "tokens=1,*" %%a in ('REG QUERY "%KEY%" ^| findstr /I /C:"%VALUE%"') do (REG DELETE %KEY% /v %%a) 
```

该值位于 [HK_CLASSES_ROOT\Installer\Assemblies\Global]
正如您可能看到的那样，这里的大多数值都有引号，例如：

```
ADODB,fileVersion="7.10.2346.0",version="7.0.3300.00",culture="neutral",publicKeyToken="B03F5F7F11D50A3A" 
```

这不完全是我想要删除的，但它非常接近。

因此，如果我回显 %%a 它会显示值名称，因为它在 regedit 中带有引号和所有内容。但是一旦它通过 REG DELETE（现在它要求确认）报价不存在，所以如果我点击是，它告诉我它找不到密钥。

显然它不能，因为它没有解析它最初发现的相同的东西。我一直在努力寻找解决方案，但到目前为止我还没有找到任何可以帮助我朝着正确方向前进的东西。我知道我可以在 vbs 中做同样的事情，但这是一行很长，而在 vbs 中做同样的工作会更长。

任何帮助表示赞赏，如果您需要更多信息，请询问，我刚刚开始处理批处理文件。我这样做是因为我每次在学校工作时都需要自动化我学校项目的所有依赖项的安装过程。（计算机被重影）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:05:45.767

*注意 - 您`"tokens=1,*"`不需要，因为您只使用第一个令牌。但这也不会引起问题*

正如您在评论中发现并声明的那样，引号必须转义为`\"`. 您可以使用环境变量搜索和替换以编程方式转义引号。由于必须在代码块中设置和扩展变量，因此必须使用延迟扩展。这是因为在解析行时会发生正常扩展，并且一次解析整个块，因此正常扩展将产生循环执行之前存在的值！。执行该行时会发生延迟扩展。

```
@echo off
setlocal enableDelayedExpansion

::some additional code to setup KEY and VALUE

for /F %%A in ('REG QUERY "%KEY%" ^| findstr /I /C:"%VALUE%"') do (
  set val=%%A
  REG DELETE "%KEY%" /v !val:"=\"!
) 
```

我不知道是否可以包含`!`该值，但如果是，那么您必须在循环内打开和关闭延迟扩展。否则 %%A 的扩展在包含 时将被破坏`!`。

```
@echo off
setlocal disableDelayedExpansion

::some additional code to setup KEY and VALUE

for /F %%A in ('REG QUERY "%KEY%" ^| findstr /I /C:"%VALUE%"') do (
  set val=%%A
  setlocal enableDelayedExpansion
  REG DELETE "%KEY%" /v !val:"=\"!
  endlocal
) 
```

# c - C将char与“\ n”进行比较警告：指针和整数之间的比较

> ID：13041701
> 
> 赞同：4
> 
> 时间：2012-10-24T01:19:07.330
> 
> 标签：c, pointers, cc

我有以下 C 代码部分：

```
char c;
int n = 0;
while ( (c = getchar()) != EOF ){
    if (c == "\n"){
        n++;
    }
} 
```

在编译期间，编译器告诉我

```
warning: comparison between pointer and integer [enabled by default] 
```

问题是，如果替换`"\n"`为`'\n'`根本没有警告。谁能解释一下原因？另一个奇怪的事情是我根本没有使用指针。

我知道以下问题

*   [警告：c中指针和整数[默认启用]之间的比较](https://stackoverflow.com/questions/8435432/warning-comparison-between-pointer-and-integer-enabled-by-default-in-c)
*   [警告：C 中指针和整数之间的比较](https://stackoverflow.com/questions/5654685/warning-comparison-between-pointer-and-integer-in-c)

但在我看来，它们与我的问题无关。

PS。如果不是`char c`会有`int c`，仍然会有警告。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T01:22:00.260

*   `'\n'`称为**字符**文字，是标量整数类型。

*   `"\n"`称为**字符串**文字，是一种数组类型。请注意，数组会衰减为指针，这就是您收到该错误的原因。

这可以帮助您理解：

```
// analogous to using '\n'
char c;
int n = 0;
while ( (c = getchar()) != EOF ){
    int comparison_value = 10;      // 10 is \n in ascii encoding
    if (c == comparison_value){
        n++;
    }
}

// analogous to using "\n"
char c;
int n = 0;
while ( (c = getchar()) != EOF ){
    int comparison_value[1] = {10}; // 10 is \n in ascii encoding
    if (c == comparison_value){     // error
        n++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:26:48.890

基本上 '\n' 是一个计算为字符的文字表达式。"\n" 是一个计算结果为指针的文字表达式。因此，通过使用此表达式，您实际上是在使用指针。

有问题的指针指向一个内存区域，该区域包含一个字符数组（在本例中为 \n），后跟一个终止字符，告诉代码数组在哪里结束。

希望有帮助吗？

# java - 在其他线程完成后调度周期性任务

> ID：13041708
> 
> 赞同：0
> 
> 时间：2012-10-24T01:20:13.520
> 
> 标签：java, multithreading, thread-synchronization

我想让 3 个线程同时执行一项任务，并且我想要一个线程在一段时间内执行计划任务（每 10 秒运行一次）。但是我希望当 3 个线程完成时只运行一次计划任务，然后我希望这个线程终止。实现这些线程的最佳方法是什么？ExecutorService 接口是否适合这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:41:02.183

这是我刚刚写的一个例子：

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.TimeUnit;

public class Example {

    public static void main(String[] args) throws InterruptedException {
        ScheduledFuture future = Executors.newScheduledThreadPool(1).scheduleAtFixedRate(new MyScheduledTask(), 0, 10, TimeUnit.SECONDS);
        ExecutorService executor = Executors.newFixedThreadPool(3); // pool composed of 3 threads
        for (int i = 0; i < 3; i++) {
            // for the example assuming that the 3 threads execute the same task.
            executor.execute(new AnyTask()); 
        }
        // This will make the executor accept no new threads
        // and finish all existing threads in the queue
        executor.shutdown();
        // expect current thread to wait for the ending of the 3 threads
        executor.awaitTermination(Long.MAX_VALUE, TimeUnit.TimeUnit.NANOSECONDS); 
        future.cancel(false); // to exit properly the scheduled task
        // reprocessing the scheduled task only one time as expected
        new Thread(new ScheduledTask()).start(); 

    }

}

class MyScheduledTask implements Runnable {
    @Override
    public void run() {
        //Process scheduled task here
    }
}

class AnyTask implements Runnable {
    @Override
    public void run() {
        //Process job of threads here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:53:03.500

这是一个周期性任务计划程序的示例，它一个接一个地执行任务。任务调度程序接受一组任务，并在指定的时间间隔后在单独的线程中终止每个任务。20 秒后，主线程关闭调度程序并停止所有等待任务。

```
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;
import java.util.concurrent.CancellationException;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.TimeUnit;

public class Example {

    class ScheduledRepeatingTask implements Runnable {
        final ScheduledExecutorService scheduler = Executors
                .newScheduledThreadPool(1);

        List<Runnable> taskCollection;
        Iterator<Runnable> taskIterator;

        Runnable getCancelRunnable(final ScheduledFuture<?> future) {

            Runnable cancelFuture = new Runnable() {
                public void run() {
                    future.cancel(true);
                }
            };
            return cancelFuture;
        }

        public ScheduledRepeatingTask(Runnable[] tasks) {
            super();
            taskCollection = Arrays.asList(tasks);
            taskIterator = taskCollection.iterator();
        }

        public void shutdownScheduler() throws InterruptedException {
            scheduler.shutdown();
            boolean execTerminated = scheduler.awaitTermination(5,
                    TimeUnit.SECONDS);

            if (!execTerminated) {
                scheduler.shutdownNow();
            }
        }

        public boolean isShutdown(){            
            return scheduler.isShutdown();
        }

        public void scheduleRepeatingTask(ScheduledFuture<?> future,
                ScheduledFuture<?> futureCancel) {

            try {
                futureCancel.get();
                future.get();

            } catch (CancellationException e) {
                System.out.println("cancelled.");
            } catch (ExecutionException e) {
                Throwable exp = e.getCause();
                if (exp instanceof RuntimeException) {
                    System.out.println("failed.");
                    RuntimeException rt = (RuntimeException) exp;
                    throw rt;
                }
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            } finally {
                if (!scheduler.isShutdown() && taskIterator.hasNext()) {
                    future = scheduler.scheduleAtFixedRate(taskIterator.next(),
                            2, 2, TimeUnit.SECONDS);
                    futureCancel = scheduler.schedule(
                            getCancelRunnable(future), 5, TimeUnit.SECONDS);
                    scheduleRepeatingTask(future, futureCancel);

                }
            }
        }

        @Override
        public void run() {
            if (!scheduler.isShutdown() && taskIterator.hasNext()) {
                ScheduledFuture<?> future = scheduler.scheduleAtFixedRate(
                        taskIterator.next(), 2, 2, TimeUnit.SECONDS);
                ScheduledFuture<?> futureCancel = scheduler.schedule(
                        getCancelRunnable(future), 5, TimeUnit.SECONDS);
                scheduleRepeatingTask(future, futureCancel);
            }
        }

    }

    public static void main(String[] args) throws InterruptedException {
        Example example = new Example();
        ExecutorService executor = Executors.newCachedThreadPool(); 

        Runnable[] tasks = { new Task1(), new Task2(), new Task1() };

        ScheduledRepeatingTask scheduledRepeatingTask = example.new ScheduledRepeatingTask(tasks);

        executor.execute(scheduledRepeatingTask);

        Thread.sleep(20000);

        scheduledRepeatingTask.shutdownScheduler();

        executor.shutdown();

    }

}

class Task1 implements Runnable {
    @Override
    public void run() {
        System.out.println("Task 1");
    }
}

class Task2 implements Runnable {
    @Override
    public void run() {
        System.out.println("Task 2");
    }
} 
```

# c - C：用参数声明函数会改变它的行为......？

> ID：13041713
> 
> 赞同：1
> 
> 时间：2012-10-24T01:21:04.820
> 
> 标签：c, parameters, fork, execve

我正在玩信号、fork 和 execve，并且我编写了一个玩具程序，用于`fork()`创建一个调用另一个玩具程序的子进程。然后父级设置警报以在一定秒数后终止该功能。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <ctype.h>
#include <signal.h>

pid_t childPid;

pid_t Fork()
{
    pid_t pid;

    if ((pid = fork()) < 0)
        printf("Error:\n");
    return pid;
}

void killhandler(int sig)
/*This will be called when we receive a SIGALRM*/
{
    int status;
    printf("\nAssassin: *ksh* Received order to kill process: %d\n", (int)childPid);
    if (!(status = kill(childPid, SIGKILL))) {
        printf("Assassin: Clean and discreet. My work here is done. *ksh*\n");
    } else {
        printf("Assassin: He got away!\n");
    }
}

void forkyMcFork()
{
    pid_t pid;
    int status;
    /*Generate information for new program*/
    char* argv[] = {"problem5", "Hello"};
    char* envp[] = {"PANTS=JEANS"};
    char* func = "problem5";

    /* Create child process, child process calls executable "problem5" */
    if ((pid = Fork()) == 0) {
        printf("Child: I am a child! Woohoo!\n");
        if (execve(func, argv, envp) < 0)
            printf("Child: error, %s not found\n", func);
        while(1);
    }
    else {
        /* Parent process sets alarm, then prints a message depending on exit status*/
        childPid = pid;
        alarm(3);
        printf("Parent: I am the parent!\n");
        waitpid(-1, &status, 0);
        if (!WIFEXITED(status)) {
            printf("Parent: Oh no, what happened to my baby!!!\n");
            exit(0);
        } else {
            printf("Parent: Child came home without any problems.\n");
        }
    }
}

int main(int argc, char const *argv[])
{
    signal(SIGALRM, killhandler);
    forkyMcFork();
    return 0;
} 
```

这是奇怪的部分：如果我声明该函数`forkyMcFork()`不带参数，然后`alarm()`手动设置参数，那么它就像我期望的那样工作：子进程启动`problem5`，它要求用户输入一些输入，然后在 3秒，`killhandler`运行，找到子进程并杀死它：

```
$ ./forkfun
Parent: I am the parent!
Child: I am a child! Woohoo!
Please type name. If finished press enter: Haha
Please type name. If finished press enter: 
Assassin: *ksh* Received order to kill process: 42409
Assassin: Clean and discreet. My work here is done. *ksh*
Parent: Oh no, what happened to my baby!!!
$ 
```

但是，如果我改为声明`forkyMcFork(int secs)`然后使用，则找不到`alarm(secs)`应该由子程序中的语句调用的外部程序。`execve()`警报按预期运行，因此在几秒钟后，子进程被取消。

这是非工作代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <ctype.h>
#include <signal.h>

pid_t childPid;

pid_t Fork()
{
    pid_t pid;

    if ((pid = fork()) < 0)
        printf("Error:\n");
    return pid;
}

void killhandler(int sig)
/*This will be called when we receive a SIGALRM*/
{
    int status;
    printf("\nAssassin: *ksh* Received order to kill process: %d\n", (int)childPid);
    if (!(status = kill(childPid, SIGKILL))) {
        printf("Assassin: Clean and discreet. My work here is done. *ksh*\n");
    } else {
        printf("Assassin: He got away!\n");
    }
}

void forkyMcFork(int secs)
{
    pid_t pid;
    int status;
    /*Generate information for new program*/
    char* argv[] = {"problem5", "Hello"};
    char* envp[] = {"PANTS=JEANS"};
    char* func = "problem5";

    /* Create child process, child process calls executable "problem5" */
    if ((pid = Fork()) == 0) {
        printf("Child: I am a child! Woohoo!\n");
        if (execve(func, argv, envp) < 0)
            printf("Child: error, %s not found\n", func);
        while(1);
    }
    else {
        /* Parent process sets alarm, then prints a message depending on exit status*/
        childPid = pid;
        alarm(secs);
        printf("Parent: I am the parent!\n");
        waitpid(-1, &status, 0);
        if (!WIFEXITED(status)) {
            printf("Parent: Oh no, what happened to my baby!!!\n");
            exit(0);
        } else {
            printf("Parent: Child came home without any problems.\n");
        }
    }
}

int main(int argc, char const *argv[])
{
    signal(SIGALRM, killhandler);
    forkyMcFork(5);
    return 0;
} 
```

这是它的输出：

```
$ ./forkfun 
Parent: I am the parent!
Child: I am a child! Woohoo!
Child: error, problem5 not found

Assassin: *ksh* Received order to kill process: 42400
Assassin: Clean and discreet. My work here is done. *ksh*
Parent: Oh no, what happened to my baby!!!
$ 
```

所以要清楚，这里唯一的代码区别是是否`forkyMcFork`声明为 take `void`，在这种情况下它有效，或者 astaking `int secs`，在这种情况下它不。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:15:29.800

鸭子评论中有一个答案 - 总结一下：

> int execve(const char *filename, char *const argv[], char *const envp[]);
> 
> *argv*是传递给新程序的参数字符串数组。 *envp* 是一个字符串数组，通常采用 key=value 的形式，作为环境传递给新程序。argv 和 envp 都必须以空指针终止。

所以我建议添加 NULL 也用于终止**envp**。

# c++ - 特殊成员函数是 noexcept 还是 throw()？

> ID：13041715
> 
> 赞同：4
> 
> 时间：2012-10-24T01:21:28.467
> 
> 标签：c++, c++11

C++11 规范明确隐式生成的特殊函数（即默认构造函数、析构函数、复制/移动构造函数和复制/移动赋值运算符）具有异常规范。但该规范似乎仅根据现已弃用的*动态*异常规范（即“throw (T1, T2, T3)”）编写。这由 15.4/14 中的示例支持：

```
struct A {
  A();
  A(const A&) throw();
  A(A&&) throw();
  ~A() throw(X);
};
struct B {
  B() throw();
  B(const B&) throw();
  B(B&&) throw(Y);
  ~B() throw(Y);
};
struct D : public A, public B {
  // Implicit declaration of D::D();
  // Implicit declaration of D::D(const D&) throw();
  // Implicit declaration of D::D(D&&) throw(Y);
  // Implicit declaration of D::D() throw(X, Y);
}; 
```

我知道，注释不是规范的，但值得注意的是 D 的复制构造函数被声明`throw()`而不是`noexcept`. `throw()`它会有所不同，因为如果违反 a 与违反a ，程序的行为是不同的`noexcept`。

示例上方 15.4/14 中的文本是规范性的，它说：

> 隐式声明的特殊成员函数（第 12 条）应具有异常规范。如果 f 是隐式声明的默认构造函数、复制构造函数、移动构造函数、析构函数、复制赋值运算符或移动赋值运算符，则其隐式异常规范指定类型 ID T 当且仅当 T 的异常规范允许f 的隐式定义直接调用的函数；如果 f 直接调用的任何函数允许所有异常，则 f 应允许所有异常；如果 f 直接调用的每个函数都不允许异常，则 f 应不允许异常。

鉴于这里只提到了动态异常规范，我担心隐式生成的特殊成员函数永远不会被声明`noexcept`。真的是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:38:54.817

我不相信是这样的。实际的要求只是“...f 如果它直接调用的每个函数都不允许异常，则不应允许异常”。

如上所述（§15.4/12）：

> `throw()`如果异常规范的形式为 ,`noexcept`或`noexcept(`*常量表达式*`)`，其中*常量表达式*产生，则异常规范是非抛出的`true`。具有非抛出*异常规范*的函数不允许任何异常。

非抛出异常规范不允许任何异常并不完全是一个启示，但我认为它说明了非抛出异常规范描述中的措辞几乎逐字地反映在对隐式声明的特殊成员函数的要求中. 因此，在我看来，任何形式的非抛出异常规范（`throw()`or`noexcept`或`noexcept(<anything that converts to true>)`）都是允许的——而且这是专门设计的，而不仅仅是措辞上的意外。

# php - 从mysql中检索一批图像

> ID：13041716
> 
> 赞同：0
> 
> 时间：2012-10-24T01:21:29.043
> 
> 标签：php, mysql

我正在尝试从包含表中文件名的列中显示 8 张图片，这些表是正确的，并且字段`interest_id`和`interest_pic`（存储文件名的位置）是正确的。

```
$interest_image_query = mysql_query("SELECT interest_pic FROM interest_pictures WHERE interest_id='$i_id'");
$i = 0;
while($interest_display_image = mysql_fetch_array($interest_image_query) && $i < 8){
  echo '<td><img src ="/uploads/images/interestpics/'.$interest_display_image['interest_pic'].'" width=60px height=60px /></td>'; 
  $i++;
} 
```

输出似乎显示文件夹位置但没有文件名。在这种情况下`$i_id`= 20，并且经过验证并且可以正常工作。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T01:55:40.667

发现`&& $i < 8`导致`$interest_display_image`设置为布尔值“true”

替换为`if($i < 8){}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:57:35.753

你确定你运行了 mysql_select_db() 来选择正确的表吗？这对我有用。

我还在查询中添加了一个 LIMIT 以仅返回 8 个结果，并在 img 标记后的括号中回显文件名，以确认它正在提取文件名。

```
$link = mysql_connect('localhost', 'user', 'password');
mysql_select_db("tablename");

$i_id = 1;
$interest_image_query = mysql_query("SELECT interest_pic FROM interest_pictures WHERE interest_id='$i_id' LIMIT 8");

while($interest_display_image = mysql_fetch_array($interest_image_query, MYSQL_BOTH)){
    echo '<td><img src ="/uploads/images/interestpics/'.$interest_display_image['interest_pic'].'" width=60px height=60px /> (' . $interest_display_image['interest_pic'] . ')</td>';
} 
```

# regex - 使用 perl 对文件中的唯一高值进行排序

> ID：13041718
> 
> 赞同：0
> 
> 时间：2012-10-24T01:21:41.170
> 
> 标签：regex, perl

我有一个包含以下几行的数据文件：

```
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b171_b174_b236_b242_qreg/d2    19.33    18.65    -0.67 (VIOLATED)
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b186_b196_b210_b223_qreg/d2    15.09    11.70    -3.39 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b103_b104/d2    40.35    36.61    -3.74 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b105_b106/d1    11.06     8.77    -2.29 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b105_b106/d1    40.08    29.18   -10.90 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b119_b120/d2    11.37     8.34    -3.03 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b11_b12/d2    14.56     4.41   -10.15 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b11_b12/d2    45.82    27.47   -18.34 (VIOLATED) 
```

我需要获得第四列的唯一值和最小的值以及对应的第一列。

输出应该是：

```
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b171_b174_b236_b242_qreg/d2    19.33    18.65    -0.67 (VIOLATED)
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b186_b196_b210_b223_qreg/d2    15.09    11.70    -3.39 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b103_b104/d2    40.35    36.61    -3.74 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b105_b106/d1    40.08    29.18   -10.90 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b119_b120/d2    11.37     8.34    -3.03 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b11_b12/d2    45.82    27.47   -18.34 (VIOLATED) 
```

我尝试使用模式匹配来获取哈希中的第 1 列和第 4 列，然后对哈希进行排序。但它没有按我想要的方式工作。请帮忙。

```
while(<FILE1>) {
    my $path = $_;
    $path =~ /([^\s]+)/;
    $path = $1; #Extracting path
    chop($path);
    my $slack = $_;
    #$slack =~ /([^\s+]+)[\d+][\s+][\d+][\s+]([^\f+]+)[\s](VIOLATED)/;
    $slack =~ /[^\f+][\s+][\f+][\s+][\f+][\s+]([\f+]+)[\s](VIOLATED)/;
    $slack = $1;
    print "$slack\n";
    chop($slack);
    print FILE2 "$slack\n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:55:52.610

我会做类似的事情（如果文件名中不包含空格）：

```
my %res;
while(<DATA>) {
    chomp;
    my @vals = split/\s+/;
    $res{$vals[0]} = {} unless exists $res{$vals[0]};
    if (!exists($res{$vals[0]}{value}) || $vals[3] < $res{$vals[0]}{value}) {
        $res{$vals[0]}{value} = $vals[3];
        $res{$vals[0]}{line} = $_;
    }
}
say $res{$_}{line} for keys %res;

__DATA__
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b171_b174_b236_b242_qreg/d2    19.33    18.65    -0.67 (VIOLATED)
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b186_b196_b210_b223_qreg/d2    15.09    11.70    -3.39 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b103_b104/d2    40.35    36.61    -3.74 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b105_b106/d1    11.06     8.77    -2.29 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b105_b106/d1    40.08    29.18   -10.90 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b119_b120/d2    11.37     8.34    -3.03 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b11_b12/d2    14.56     4.41   -10.15 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b11_b12/d2    45.82    27.47   -18.34 (VIOLATED) 
```

**输出：**

```
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b186_b196_b210_b223_qreg/d2    15.09    11.70    -3.39 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b105_b106/d1    40.08    29.18   -10.90 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b103_b104/d2    40.35    36.61    -3.74 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b119_b120/d2    11.37     8.34    -3.03 (VIOLATED)
gtssmpar11/dmunit1/mt_dm_fifo_csr_flopped_out/u_gt_ram/wrdataR_reg_0_b171_b174_b236_b242_qreg/d2    19.33    18.65    -0.67 (VIOLATED)
gtssmpar21/flunit1/flunitx1/fl_flex1/fl_mt_input_fifo/u_gt_ram/wrdataR_dreg_b11_b12/d2    45.82    27.47   -18.34 (VIOLATED) 
```

# python - python解析条件xml值

> ID：13041720
> 
> 赞同：0
> 
> 时间：2012-10-24T01:22:12.707
> 
> 标签：python, xml, parsing, xml-parsing, elementtree

这是我的 XML 文件：

```
<METAR>
<wind_dir_degrees>210</wind_dir_degrees>
<wind_speed_kt>14</wind_speed_kt>
<wind_gust_kt>22</wind_gust_kt>
</METAR> 
```

这是我解析风向和风速的脚本。但是，阵风是一个条件值，并不总是出现在我的 xml 文件中。如果它确实存在，我想显示该值，如果不存在则什么都没有。

```
import xml.etree.ElementTree as ET
from urllib import urlopen

link = urlopen('xml file')

tree = ET.parse(link)
root = tree.getroot()

data = root.findall('data/METAR')
for metar in data:
    print metar.find('wind_dir').text 
```

我尝试过这样的事情，但得到错误

```
data = root.findall('wind_gust_kt')
for metar in data:
        if metar.find((wind_gust_kt') > 0:
           print "Wind Gust: ", metar.find('wind_gust_kt').text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:50:47.290

您可以使用`findtext`默认值`''`，例如：

```
print "Wind Gust: ", meta.findtext('wind_gust_kt', '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:57:07.297

当你遍历`findall`函数的结果时，不需要`find`再次调用——你已经有了元素。

您可以将代码简化为如下所示：

```
tree = ET.parse(link)
for wind_gust in tree.findall('wind_gust_kt'):
    print "Wind gust:", wind_gust.text 
```

您可能一直在关注本教程：

[http://docs.python.org/library/xml.etree.elementtree.html#tutorial](http://docs.python.org/library/xml.etree.elementtree.html#tutorial)

In the example there, the `find` method of the loop variable is called in order to find child elements of the loop element. In your case, the `wind_gust` variable is the element that you want, and it has no child elements.

# grails - Grails 以一对多的关系排序

> ID：13041721
> 
> 赞同：0
> 
> 时间：2012-10-24T01:22:17.497
> 
> 标签：grails

我在 Grails 应用程序中有两个具有一对多关系的域：Course 和 Person。一门课程可能有很多人。当我查看课程的 show.gsp 时，它将显示所有已注册课程的人员姓名的列表。

我希望该列表按姓氏字母顺序排序。但是，每次我刷新 show.gsp 时，列表的顺序都会发生变化（似乎无法识别模式）。我在我的个人域中设置了一个映射以按姓氏“asc”排序，但这没有效果。

我修改了脚手架 show.gsp 以在表格中显示名称以及其他复选框。这是修改后的代码：

```
<g:if test="${courseInstance?.persons}">
            <br />
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <g:sortableColumn property="person"
                            title="${message(code: 'person.lastName.label', default: 'Person')}" />
                        <g:sortableColumn property="paid"
                            title="${message(code: 'person.paid.label', default: 'Paid')}" />
                        <g:sortableColumn property="attended"
                            title="${message(code: 'person.attended.label', default: 'Attended')}" />
                    </tr>
                </thead>
                <tbody>
                    <g:set var="counter" value="${1}" />
                    <g:each in="${courseInstance.persons}" status="i" var="p">
                        <tr class="${(i % 2) == 0 ? 'even' : 'odd'}">
                            <td>
                                ${counter}
                            </td>
                            <td class="property-value" aria-labelledby="persons-label"><g:link
                                    controller="person" action="show" id="${p.id}">
                                    ${p?.encodeAsHTML()}
                                </g:link></td>
                            <td><g:checkBox name="paid" value="${p.paid}"
                                    onclick="${remoteFunction(action:'togglePaid', id:p.id,
                                params:'\'completed=\' + this.checked')}" /></td>
                            <td><g:checkBox name="attended" value="${p.attended}"
                                    onclick="${remoteFunction(action:'toggleAttended', id:p.id,
                                params:'\'completed=\' + this.checked')}" /></td>
                        </tr>
                        <g:set var="counter" value="${counter + 1}" />
                    </g:each>
                </tbody>
            </table>
        </g:if> 
```

我可以在 show.gsp 或域中进行任何修改以使列表默认按字母顺序排序（除非单击可排序的列）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:38:11.887

你能展示一下你是如何在域级别上设置它的吗？它应该是这样的......

```
class Person {
    …
    static mapping = {
        sort "lastName"
    }
} 
```

[在此处](http://grails.org/doc/latest/ref/Database%20Mapping/sort.html)查看文档。如果排序似乎正确但仍然无法正常工作，您可以尝试停止应用程序并执行`grails clean`并重新运行它。

**更新：** 答案是下面的评论......

# java - 优化 GWT 片段加载序列

> ID：13041725
> 
> 赞同：1
> 
> 时间：2012-10-24T01:24:02.830
> 
> 标签：java, gwt

我第一次阅读 GWT，并看到[了这篇关于 codeplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)的文章。在其中，作者说：

> 如果您知道应用程序中的哪个分割点将首先出现，您可以通过指定初始加载顺序来提高应用程序的性能...

关于这个的几个问题：

1.  这个“*初始加载顺序*”是什么以及如何/在哪里指定它？
2.  为什么指定/配置加载顺序会以不同方式影响应用程序性能？换句话说，这里执行的实际优化是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:23:19.240

好吧，代码拆分只会影响浏览器加载运行应用程序所需的所有 js 所花费的时间，但不会影响应用程序的性能（我的意思是该 js 的执行）。

如果你的 Fragment 的加载可以随机执行，这意味着首先应该下载一个初始数量的 js（包含所有公共代码），如果所有 Fragment 共享这么多代码，这个初始 Fragment 可能会很大。

如果您定义了加载的逻辑顺序，它将允许编译器以更好的方式分发共享代码，因此片段 1 包括使用 1 和 2 的代码，而 2 具有用于 2 和 3 的代码等，但请注意如果在 1 之前加载 3，将强制浏览器下载 1 和 2。

# javascript - 当 HTML 元素在 contenteditable 中被删除时如何触发事件

> ID：13041726
> 
> 赞同：5
> 
> 时间：2012-10-24T01:24:03.500
> 
> 标签：javascript, html, events

我有一个内容可编辑的 div，其中包含一些 html 元素。例如，假设我有：

```
<div contenteditable="true" id="myTextArea">
   Some content, <div id="div1">content in div</div>, 
   and more <span id="span1">content</span></div> 
```

当用户在 myTextArea 中编辑文本并删除一些 html 元素（通过粘贴新内容或只是退格文本）时，我希望每个 html 元素触发一个事件并告诉我它已被删除。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-07T15:32:09.903

您可以使用 a[`MutationObserver`](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver?redirectlocale=en-US&redirectslug=DOM%2FDOM_Mutation_Observers)来实现这一点。要跟踪从`contenteditable`元素中删除的任何类型的节点，请观察以下示例

```
<div id="myTextArea" contenteditable="true">
    <input value="input" />
    <span contenteditable="false">span</span>
</div> 
```

* * *

```
var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {

        //console.log($(mutation.removedNodes)); // <<-- includes text nodes as well

        $(mutation.removedNodes).each(function(value, index) {
            if(this.nodeType === 1) {
                console.log(this) // your removed html node
            }
        });
    });
});

var config = { attributes: true, childList: true, characterData: true };

observer.observe($('#myTextArea')[0], config); 
```

## [JSFiddle 链接](http://jsfiddle.net/hjtookf3/)

# graphviz - 如何更改 Graphviz 子图排名？

> ID：13041728
> 
> 赞同：18
> 
> 时间：2012-10-24T01:24:47.650
> 
> 标签：graphviz, dot

我希望子图 clusterCG 具有与 3 相同的等级（clusterCG 不应包含 3）

```
digraph G{
 rankdir = LR;
 node [shape = none]

 1->2->3->4[arrowhead=none]

 node [shape = ellipse]

 A->A2->A3;

 subgraph clusterCG{
  shape = rect;
  rank=same;
  A2;
  B;
  C;
  color=blue;
  label="C";
 }

 { rank=same; 1; A;}
 { rank=same; 3; CG;}
 { rank=same; 4; A3;}
} 
```

![在此处输入图像描述](../Images/09ecb808a66211c8e0523d580bbf761e.png)

CG 生成为具有等级 3 的独立节点。

我希望子图 clusterCG 的排名为 3。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-06-07T06:35:10.600

使用带有“newrank=true”的不同等级算法

```
 digraph G {
 newrank=true
 rankdir = LR;
 node [shape = none]

 1->2->3->4[arrowhead=none]

 node [shape = ellipse]

 A->A2->A3;

 subgraph clusterCG{
  shape = rect;
  rank=same;

  A2;
  B;
  C;
  color=blue;
  label="C";
 }

 { rank=same; 1; A;}
 { rank=same; 3; A2}
 { rank=same; 4; A3;}
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-10T17:40:10.233

也许不是最好的解决方案，但似乎零大小节点是唯一有效的方法

```
digraph G{
 rankdir = LR;
 node [shape = none]

1->2->3->4[arrowhead=none]

node [shape = ellipse]
ACG[shape = none,label="",width=0, height=0];

CG->A2 [style=invis,constraint=false];

A->ACG[arrowhead=none];
ACG->A2->A3;

 subgraph clusterCG{
  shape = rect;
  rank=same;
  A2;
  B;
  C;
  color=blue;
  label="C";
 }

 { rank=same; 1; A;}
 { rank=same; 2; ACG;}
 { rank=same; 4; A3;}

} 
```

![在此处输入图像描述](../Images/4bac8cb5119ee1d06c68e6cf83a16e42.png)

# python - 通过 Python 子进程的 SSH 密码

> ID：13041732
> 
> 赞同：4
> 
> 时间：2012-10-24T01:25:11.840
> 
> 标签：python, ssh

我正在编写一个 GUI 程序来为一群害怕使用命令行的用户生成和监视 SSH 隧道。

不幸的是，有问题的服务器非常严格。通过 RSA SecurID 令牌进行的双因素身份验证是唯一官方认可的打开 SSH 连接的方式。不允许使用无密码 RSA 公钥/私钥身份验证。

因此，我的程序有必要从文本输入框中读取密码并将其发送给子 SSH 进程。不幸的是，`ssh`我们竭尽全力确保密码仅来自真正的键盘。

我强烈不喜欢使用第三方模块。我知道 paramiko 和 pexpect （它们都被提出来作为类似问题的可能解决方案），但是试图向我的用户解释如何从源代码安装 Python 模块太让人头疼了。

那么：如何*仅*使用标准 python`subprocess`模块向 ssh 子进程发送密码？有什么办法可以让子进程误以为我在使用 TTY？是否可以使用 SSH_ASKPASS 从我的程序中读取？

其他标准库模块（例如，模块的低级命令`os`）也是允许的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T23:08:24.933

最后，我能够使用 pty 模块通过伪终端控制 ssh。我在 中编写了一个解决方案`pexpect`，然后通过查看 pexpect 源代码并从[这个 StackOverflow 答案](https://stackoverflow.com/questions/7173878/using-os-forkpty-to-create-a-pseudo-terminal-to-ssh-to-a-remote-server-and-com)中获得一些帮助，我能够弄清楚该怎么做。这是相关代码的摘录（作为对象方法的一部分执行；因此引用`self`）。

```
command = [
        '/usr/bin/ssh',
        '{0}@{1}'.format(username, hostname),
        '-L', '{0}:localhost:{1}'.format(local_port, foreign_port),
        '-o', 'NumberOfPasswordPrompts=1',
        'sleep {0}'.format(SLEEP_TIME),
]

# PID = 0 for child, and the PID of the child for the parent    
self.pid, child_fd = pty.fork()

if not self.pid: # Child process
    # Replace child process with our SSH process
    os.execv(command[0], command)

while True:
    output = os.read(child_fd, 1024).strip()
    lower = output.lower()
    # Write the password
    if lower.endswith('password:'):
        os.write(child_fd, self.password_var.get() + '\n')
        break
    elif 'are you sure you want to continue connecting' in lower:
        # Adding key to known_hosts
        os.write(child_fd, 'yes\n')
    elif 'company privacy warning' in lower:
        pass # This is an understood message
    else:
        tkMessageBox.showerror("SSH Connection Failed",
            "Encountered unrecognized message when spawning "
            "the SSH tunnel: '{0}'".format(output))
        self.disconnect() 
```

# php - 如何让一个简单的 php 应用程序从 heroku cedar 堆栈发送电子邮件？

> ID：13041733
> 
> 赞同：11
> 
> 时间：2012-10-24T01:25:16.843
> 
> 标签：php, heroku, cedar

我有一个非常简单的 php 网站，它有一个使用 php mail() 函数发送电子邮件的联系表。我怎样才能在heroku上托管这个？我应该使用哪个附加组件，以及如何将其设置为与 php 一起使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T23:22:16.930

这是我为解决同样的问题所做的工作：

1.你需要使用一个自定义的 buildpack 来安装 pear 包 mail 和 Net_SMTP。您可以通过运行以下命令来使用我创建的那个：

```
heroku config:add BUILDPACK_URL=https://github.com/antonyevans/heroku-buildpack-php.git 
```

关键的变化是增加了以下几行：

```
php/bin/pear install Mail
php/bin/pear install Net_SMTP 
```

进入 bin/编译。

2.然后你需要告诉你的应用程序加载邮件包：

```
require_once 'Mail.php'; 
```

3.最后heroku阻塞了邮件端口，所以你需要配置使用外部邮件服务器。例如，如果您添加了 SendGrid 插件（'heroku addons:add sendgrid:starter'），那么您可以使用以下内容：

```
$wgSMTP = array(
    'host' => 'tls://smtp.sendgrid.net',
    'IDHost' => 'heroku.com',
    'port' => 587,
    'username' => getenv("SENDGRID_USERNAME"), 
    'password' => getenv("SENDGRID_PASSWORD"),
    'auth' => true
 ); 
```

# c# - 哪个更快，递归地绘制一次位图或递归地绘制到屏幕？

> ID：13041739
> 
> 赞同：1
> 
> 时间：2012-10-24T01:26:00.423
> 
> 标签：c#, winforms, user-interface, recursion, bitmap

这是对类似问题的补充：[动画 UI 时哪个更快：控件还是图片？](https://stackoverflow.com/questions/12944701/which-is-faster-when-animating-the-ui-a-control-or-a-picture).

我递归地遍历形状树并将每个可见形状绘制到屏幕上。在大约 2-3 代时，当用户实时放大或平移时，事情会顺利处理，但是当它达到大约 4-6 代时，事情会变慢。

为了帮助提高性能，最好在每次树更新时绘制位图，然后在每次失效时绘制该位图，还是在每次失效时都进行递归？

我现在正在研究解决方案，但在我完成之前，您的回答仍然值得赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:33:16.407

在内存中绘制位图比在屏幕上绘制要快。*如果您在每次更新时都重新绘制整个屏幕，那么*您最好先合成位图，然后将该位图传送到屏幕上。如果您只更新屏幕的一部分，那么您必须权衡屏幕上的多个 blits 是否比组合位图和将整个内容绘制到屏幕上更快。

一般来说，最好在内存中合成位图，然后将合成的位图写入屏幕。这通常更快，并且还可以减少重叠区域快速连续更新时您会看到的闪烁。

附加信息：

根据位图的大小，您可能不想在每次无效调用时都绘制整个内容。一种解决方案是如上所述更新内存中的位图，但也要跟踪更新的区域（边界框）。然后，您可以组合边界框并可能执行几个比将整个位图绘制到屏幕上更快的小绘制操作。这可以更有效，但代码变得相当复杂。通常，我看到的代码实际上是这样写的：“如果区域的数量大于 N，或者如果多个区域覆盖的区域超过总面积的 X%，则只需绘制整个位图。” N 和 X 的数字在程序启动时确定。

# python - 为什么下划线没有全部从列表中删除？Python

> ID：13041743
> 
> 赞同：-2
> 
> 时间：2012-10-24T01:26:48.093
> 
> 标签：python, list, char

> **可能重复：**
> [从 Python 列表中删除所有出现的值](https://stackoverflow.com/questions/1157106/remove-all-occurences-of-a-value-from-a-python-list)

对于列表：

```
char = ['a', '_', '_', 'b' ] 
```

如何从列表中删除“_”的所有实例，所以它最终看起来像：

```
char = ['a', 'b' ] 
```

我试过了：

```
char.remove('_') 
```

这给了我：

```
char = ['a', '_', 'b'] 
```

为什么会这样，我怎样才能让它删除列表中的所有下划线？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T01:28:26.240

`list.remove`仅删除匹配的第一个实例 - 您可以使用列表理解：

```
char = [el for el in char if el != '_'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:30:53.850

[这篇](https://stackoverflow.com/questions/1157106/remove-all-occurences-of-a-value-from-a-python-list)文章中考虑了几个选项，可能与这篇文章非常相似。其中之一是：

```
>>> x = [1,2,3,2,2,2,3,4]  
>>> filter (lambda a: a != 2, x)  
[1, 3, 3, 4] 
```

# java - java：自动更新哈希图

> ID：13041744
> 
> 赞同：3
> 
> 时间：2012-10-24T01:27:35.930
> 
> 标签：java, date, timer, hashmap

所以现在我有一个存储日历对象的哈希图（只需要一种存储日期的方法）。每个值存储两个 Calendar 对象，一个表示事件的开始，另一个表示事件的结束。用户通过 gui 输入这些内容，它们可以跨越数周和数月。

我需要做的是能够在这些条目过期时删除它们，这意味着它们的第二个日历对象已经根据真实世界的日期过去了。只要实例正在运行，我希望它自动完成。

我的想法是运行一个计时器线程，每周一次，它可以遍历哈希图中的所有条目并删除已过期的条目。我知道它不是那么实用，它是一个学校项目。但我只是在寻找可以帮助以有效方式实现这一点的想法或设计模式。

谢谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:35:54.943

拥有一个执行维护任务的后台线程是一个好主意，并且是非常常见的做法。请注意，尽管 Hashmap 不是线程安全的，因此您需要同步其访问，或替换为 ConcurrentHashMap 等线程安全类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:15:18.330

也许这对： [http](http://code.google.com/p/guava-libraries/wiki/CachesExplained) ://code.google.com/p/guava-libraries/wiki/CachesExplained Guava 有一个“缓存”机制，可以处理超时，...

所以处理是为你做的，但要注意：后台没有运行线程。维护是在写入期间完成的。信息也包含在链接中。

番石榴解决方案以另一种方式“解释”。为什么不处理超时元素的列表/映射，它们会在访问期间告诉您它们超时或自行关闭。您不必从外部管理元素，它们可以自己处理超时。这种方式对用户来说通常非常简单和透明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T01:42:07.720

使用`Calendar`只会导致悲痛——这是一个糟糕的课程，充满了陷阱和错误。

相反，将 start 和 end 存储为`long`值，按照[`Date.getTime()`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime%28%29)并将它们与 进行比较[`System.currentTimeMillis()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#currentTimeMillis%28%29)，以保持简洁明了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T02:59:53.283

另一个选项可以是[`TimerTask`](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)为每个条目实例化一个。实施其`run()`方法以从地图中删除条目，在[`schedule()`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20java.util.Date%29)时间 - 这可能是您的情况的结束时间。这样，您就不需要每周清理，并且条目将在它们过期后立即被删除。

当然，注意线程安全，也许通过使用一些[线程安全的变体](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)，我的意思是`Map`实现。

**[已编辑]**

或者更好的是，使用[`ScheduledThreadPoolExecutor`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html), 代替。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T01:37:02.047

您可以创建一个 TreeSet

```
TreeSet<DateObject> yourTreeSet = new TreeSet<DateObject>(new DateComparator()); 
```

然后实现您的比较器，对象将在您将它们添加到 TreeSet 时进行排序

# utf-8 - 在 clojure 中获取字符的 UTF-8 十六进制代码

> ID：13041746
> 
> 赞同：1
> 
> 时间：2012-10-24T01:27:48.013
> 
> 标签：utf-8, clojure

我似乎无法弄清楚如何在 clojure 中获取字符的 UTF-8 十六进制代码。我最接近相关结果的是尝试`(int \Д)`，但它返回`1044`而不是`0414`or `D094`。我会用什么来获得后一个结果？

提前致谢！

**编辑：**我没有说清楚，但我需要 UTF-8 十六进制字符串，所以我需要`D094`而不是`0414`. 我要将标签打印机的十六进制代码转换`D094`为`_D0_94`（我知道这有点恶心 - 我自己并不完全喜欢它：P）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T02:34:15.157

我将加入：

```
user=> (format "%04x" (int \Д))
"0414" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T01:43:42.527

如果您只是在组成字节之后：

```
(-> (char 1044) str (.getBytes "UTF-8")) 
```

如果您想要字符串化代码，只需将每个字节转换为其十六进制表示并将它们连接起来：

```
(defn stringify-bytes [bytes] (->> bytes (map (partial format "%02x")) (apply str))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T02:31:32.333

```
user> (Integer/toHexString (int \Д))
"414" 
```

是一种选择。虽然没有前导零。

# matlab - 如何在 Matlab 中求解这些耦合微分方程？

> ID：13041748
> 
> 赞同：4
> 
> 时间：2012-10-24T01:27:54.960
> 
> 标签：matlab, solution, pde, differential-equations

如图所示，我有三个偏微分方程 (PDE) 和一个变量的解析解。使用这些方程我想解决 \phi(x,y,t), p(x,y,t), C_{a}(x,y,t) 和 C_{b}(x,y,t)即在空间和时间方面。

我知道 Matlab 中有一个函数`pdepe( )`可以解决一维抛物线椭圆 PDE 的初始边界值问题。我想知道如何使用这个函数或 Matlab 中的其他函数来解决下面描述的二维和耦合问题。

**问题：**

以下两个方程分别代表两个物种 a 和 b 的 PDE： ![在此处输入图像描述](../Images/2f7f8f88ba8e8e579b334f8a195b39d0.png)

其中 D_{h} 和 q 给出为：

![在此处输入图像描述](../Images/c5839dadad9da422a80d19159606e4c3.png)

![在此处输入图像描述](../Images/c42d5a8b10bef584182d11e4a250e678.png)

这里，R_{a}=R_{b}=R，其中 R 为：

![在此处输入图像描述](../Images/3ad0593892bde1fa1c9caa8e3c5a1537.png)

最后，最后一个方程为：

![在此处输入图像描述](../Images/dbbde7fe3bfbd9c85d148e4614f48074.png)

**初始和边界条件：**

![在此处输入图像描述](../Images/c08aa831ec11a91a3e4951d9eaf30086.png)

总域大小为 10 cm x 5 cm，y 形子域的宽度为 0.5 cm。该子域的初始 phi 为 0.50，而在周围矩阵中则为 0.26。1 Pa 和 0 Pa 的常数 p 分别保持在边界 (1) 和 (2) 处，对应于大约 10^-3 mm^-1 的梯度。边界 (3) 和 (4) 上的 p 由边界 (1) 和 (2) 之间的线性梯度确定。C_{a} = 2 mol m^-3 和 C_{b} = 0.2302 mol m^-3 的常数 C 保持在边界 (3)，而边界 (4) 的浓度设置为 C_{a} = 1 mol m^-3 和 C_{b} = 0.4603 mol m^-3。边界 (1) 处的浓度由边界 (3) 和 (4) 之间的恒定梯度确定，同时设置平流通量边界条件 $$(\frac{\partial C}{\partial x} = 0)$$在 (2) 处的出口处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-05T01:32:13.697

这应该可以在 FEATool Matlab FEM Toolbox 中实现。由于 2D（以及 1D 和 3D）对流-扩散-反应 PDE 方程已预先定义且易于耦合，您只需输入扩散、对流和源项即可。尽管您的确切问题不能作为[教程](http://www.featool.com/doc/tutorials.html)提供，但其他一些[对流扩散示例模型](http://www.featool.com/doc/tutorials.html#ex_other)可能是一个很好的起点。（也很抱歉无法发表评论。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:27:02.830

你有 PDE 工具箱吗？

如果是：`pdetool`似乎是要走的路（我没有它，所以我无法验证或试验其中任何一个——你必须自己在那里做一些试验）。

如果不是：您可能会发现[这个](https://math.stackexchange.com/questions/107968/cant-understand-a-simple-wave-equation-matlab-code)或[这个](http://www.mathworks.com/matlabcentral/fileexchange/28736-solve-2d-wave-equation-with-fdm/content/refraction.m)值得调查。这些基本上是二维波动方程的 FDM 实现。您可以获取它们的内核并将它们转换为求解耦合方程的方法。

也许更容易：看看[这里](http://www.fetk.org/)；这是一个相当不错的 FEM 工具包，可以与 Matlab 一起使用。

# facebook - Facebook JavaScript SDK 的 channelURL 初始化

> ID：13041750
> 
> 赞同：0
> 
> 时间：2012-10-24T01:28:23.977
> 
> 标签：facebook, facebook-graph-api, initialization

在相关[主题的文档中](https://developers.facebook.com/docs/reference/javascript/)，它引用了“必须包含指向 JavaScript SDK URL 的单个脚本元素”的“channelURL”（请参阅[​​此页面](https://developers.facebook.com/docs/reference/javascript/FB.init/)）。我看到它是可选的，默认值为 NULL，但措辞让我失望。它必须指向 JS SDK URL，还是为了简单起见，我可以忽略它吗？

这是我第一次涉足 JavaScript（C/C++ 贸易），所以我确信通过尝试可以很容易地回答这个问题，但我不需要从头开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T12:27:56.553

正如页面所述

> 指定自定义 URL 通道文件的 URL。此文件必须包含一个指向 JavaScript SDK URL 的脚本元素。

所以一个可能的 channel.html 文件将只有一行

`<script src="//connect.facebook.net/en_US/all.js"></script>`

没有*must*，包含 channel.html 文件是可选的。

# xml - 在 xslt 中显示简单的 xml

> ID：13041752
> 
> 赞同：1
> 
> 时间：2012-10-24T01:28:36.410
> 
> 标签：xml, xslt

我花了大约 6-7 个小时试图让一个基本的 xml 页面显示至少使用 xsl 可读，并且无法理解它。有那么难吗？或者我只是在苦苦挣扎。

我的 xml 代码是基本的

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="recipepages.xsl"?><!DOCTYPE chefmaster [
<!ELEMENT chefmaster (recipe+)>
  <!ELEMENT recipe (title, dishtype?, dishcategory?, chef, countryshown, episodeshown?, preparationtime, cookingtime, serves, caloriesperserve?, allergenslist?, ingredients, method, recommendedbeverage?, author*, mainingredientlink+)>
  <!ATTLIST recipe cuisine (chinese|french|greek|indian|italian|japanese|mexican|notspecified|thai|western) #REQUIRED>
  <!ELEMENT title (#PCDATA)>
  <!ELEMENT dishtype (#PCDATA)>
  <!ELEMENT dishcategory (#PCDATA)>
  <!ELEMENT chef (#PCDATA)>
  <!ELEMENT countryshown (#PCDATA)>
  <!ELEMENT episodeshown (#PCDATA)>
  <!ELEMENT preparationtime (#PCDATA)>
  <!ELEMENT cookingtime (#PCDATA)>
  <!ELEMENT serves (#PCDATA)>
  <!ELEMENT caloriesperserve (#PCDATA)>
  <!ELEMENT allergenslist (#PCDATA)>
  <!ELEMENT ingredients (main, ingredient+)>
  <!ELEMENT main (#PCDATA)>
  <!ATTLIST main image CDATA #REQUIRED>
  <!ELEMENT ingredient (#PCDATA)>
  <!ATTLIST ingredient amount CDATA #IMPLIED>
  <!ATTLIST ingredient units CDATA #IMPLIED>
  <!ELEMENT method (step+)>
  <!ELEMENT step (#PCDATA)>
  <!ELEMENT recommendedbeverage (#PCDATA)>
  <!ELEMENT author (givenname, surname)>
  <!ELEMENT givenname (#PCDATA)>
  <!ELEMENT surname (#PCDATA)>
  <!ELEMENT mainingredientlink (#PCDATA)>
]>
<chefmaster>
   <recipe cuisine="notspecified">
    <title>Quick carrot and coriander soup</title>
    <dishtype>Entree</dishtype>
    <dishcategory>Vegetarian</dishcategory>
    <chef>Alison Good</chef>
    <countryshown>Australia</countryshown>
    <episodeshown>Season 2, Episode 1</episodeshown>
    <preparationtime>5 mins</preparationtime>
    <cookingtime>15 mins</cookingtime>
    <serves>6</serves>
    <caloriesperserve>85</caloriesperserve>
    <allergenslist>None</allergenslist>
    <ingredients>
      <main image="http://1.bp.blogspot.com/-XaAgu2H_RDk/TmxXBKiOJ8I/AAAAAAAABQg/DrMxd41-b8s/s1600/carrot.jpg">Carrot</main>
      <ingredient amount="4">Large carrots, peeled and cut into large chunks</ingredient>
      <ingredient amount="1" units="tablespoon">Olive oil</ingredient>
      <ingredient amount="1/4">Large onion, diced</ingredient>
      <ingredient amount="4" units="cups">Vegetable stock</ingredient>
      <ingredient>Large bunch of fresh coriander, de-stemmed and roughly chopped</ingredient>
    </ingredients>
    <method>
      <step>1\. Heat the oil in a large saucepan over medium heat and saute the carrots and onion for a few minutes until the onion has softened a little.</step>
      <step>2\. Pour in the vegetable stock and add the coriander. Bring to a boil and cook until the carrots are tender; about 10 minutes. Remove from the heat and allow to cool slightly.</step>
      <step>3\. Puree the soup until smooth using a hand-blender or food processor. Reheat before serving if necessary.</step>
    </method>
    <recommendedbeverage>Water</recommendedbeverage>
    <author>
      <givenname>Sarah</givenname>
      <surname>May</surname>
    </author>
    <mainingredientlink>http://en.wikipedia.org/wiki/Carrot</mainingredientlink>
   </recipe>
   <recipe cuisine="greek">
    <title>Prawns (garides) saganaki</title>
    <dishtype>Entree</dishtype>
    <chef>Alison Good</chef>
    <countryshown>Australia</countryshown>
    <episodeshown>Season 2, Episode 3</episodeshown>
    <preparationtime>5 mins</preparationtime>
    <cookingtime>35 mins</cookingtime>
    <serves>4</serves>
    <caloriesperserve>287</caloriesperserve>
    <allergenslist>Seafood</allergenslist>
    <ingredients>
      <main image="http://images.wikia.com/prawnhub/images/d/df/Going_to_be_a_Fairy_Prawn.jpg">Prawns</main>
      <ingredient amount="500" units="grams">Raw king prawns</ingredient>
      <ingredient amount="3" units="tablespoons">Olive oil</ingredient>
      <ingredient amount="1">Onion, chopped</ingredient>
      <ingredient amount="1" units="teaspoon">Freshly chopped parsley</ingredient>
      <ingredient>Large bunch of fresh coriander, de-stemmed and roughly chopped</ingredient>
      <ingredient amount="1" units="cup">White wine</ingredient>
      <ingredient amount="400" units="gram">Tin chopped tomatoes, drained</ingredient>
      <ingredient amount="1" units="clove">Garlic, finely chopped</ingredient>
      <ingredient amount="200" units="grams">Feta cheese, cubed</ingredient>
    </ingredients>
    <method>
      <step>1\. Place the prawns in a pot and add enough water to cover them. Boil for 5 minutes, then drain, reserving the liquid and set aside.</step>
      <step>2\. Heat about 2 tablespoons of oil in a saucepan. Add the onion and cook and stir until the onions are soft. Mix in the parsley, wine, tomatoes, garlic and remaining olive oil.</step>
      <step>3\. Simmer, stirring occasionally, for about 30 minutes, or until the sauce is thickened.</step>
      <step>4\. While the sauce is simmering, the prawns should have become cool enough to handle. First remove the legs by pinching them, and then pull off the shells, leaving the head and tail on.</step>
      <step>5\. When the sauce has thickened, stir in the prawns. Bring to a simmer, and cook for about 5 minutes.</step>
      <step>6\. Add the feta cheese and remove from the heat. Let stand until the cheese starts to melt. Serve warm.</step>
    </method>
    <author>
      <givenname>George</givenname>
      <surname>Adams</surname>
    </author>
    <author>
      <givenname>Alex</givenname>
      <surname>Antonovich</surname>
    </author>
    <mainingredientlink>http://en.wikipedia.org/wiki/Shrimp_meat</mainingredientlink>
   </recipe>
   <recipe cuisine="greek">
    <title>Spicy Baked Feta</title>
    <dishtype>Entree</dishtype>
    <dishcategory>Vegetarian</dishcategory>
    <chef>Neil Perry</chef>
    <countryshown>Australia</countryshown>
    <episodeshown>Season 2, Episode 3</episodeshown>
    <preparationtime>3 mins</preparationtime>
    <cookingtime>10 mins</cookingtime>
    <serves>4</serves>
    <caloriesperserve>267</caloriesperserve>
    <allergenslist>Chilli</allergenslist>
    <ingredients>
      <main image="http://www.gaganisbros.com.au/images/Greek_Feta_Texture.jpg">Feta Cheese</main>
      <ingredient amount="250" units="gram">Slab of feta cheese</ingredient>
      <ingredient amount="3 to 4" units="tablespoons">Chilli flakes</ingredient>
      <ingredient units="pinch">Oregano</ingredient>
      <ingredient>Olive oil</ingredient>
    </ingredients>
    <method>
      <step>1\. Preheat oven 150 degrees C.</step>
      <step>2\. Place feta in small baking dish. Drizzle with olive oil. Cover liberally with chili flakes, and a sprinkle of oregano.</step>
      <step>3\. Bake uncovered for 10 minutes until feta is soft.</step>
      <step>4\. Serve with crusty bread or toast.</step>
    </method>
    <recommendedbeverage>Glass of shiraz</recommendedbeverage>
    <author>
      <givenname>Christina</givenname>
      <surname>Motso</surname>
    </author>
    <mainingredientlink>http://en.wikipedia.org/wiki/Feta</mainingredientlink>
    <mainingredientlink>http://culinaryarts.about.com/od/glossary/g/Feta.htm</mainingredientlink>
   </recipe>
</chefmaster> 
```

是否可以按顺序显示它，以便可以在 xsl 文档中的几行基本行中轻松阅读食谱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:09:06.483

您可以从使用一些通用规则快速而简单地转换为 HTML 开始，然后通过添加更多规则对其进行自定义以使其更漂亮。这是一个启动器，它根据元素和属性在文档中的深度显示它们；它并不漂亮，但它是一个起点：

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >

<xsl:template match="/">
  <html><body><xsl:apply-templates/></body></html>
</xsl:template>

<xsl:template match="*/*">
  <h1>
   <xsl:value-of select="name()"/>
   <xsl:apply-templates select="@*"/>
  </h1>  
   <table>
     <xsl:apply-templates select="*"/>
   </table>
</xsl:template>

<xsl:template match="*/*/*">
  <tr>
    <td><xsl:value-of select="name()"/></td>
    <td><xsl:apply-templates/></td>
  </tr>
</xsl:template>

<xsl:template match="*/*/*/*">
  <dt>
    <xsl:value-of select="name()"/>
    <xsl:apply-templates select="@*"/>
  </dt>
  <dd><xsl:value-of select="."/></dd>
</xsl:template>

<xsl:template match="@*">
  <xsl:value-of select="concat(' ', name(), ': ', .)"/>
</xsl:template>
</xsl:stylesheet> 
```

# google-chrome-extension - 谷歌浏览器扩展内联安装的统计数据在哪里？

> ID：13041758
> 
> 赞同：0
> 
> 时间：2012-10-24T01:29:15.210
> 
> 标签：google-chrome-extension, google-chrome-devtools

我正在使用 google chrome 的内联安装功能进行新的扩展。我 99% 肯定它今天收到了大量的安装，但 chrome 网上商店的安装量似乎并没有因此而增加。统计数据是否保存在其他地方以进行内联安装？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:12:42.480

您的意思是 chrome 网上商店扩展程序主页上的数字吗？那应该是每周活跃用户的数量，并且不定期更新（通常每天更新一次）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T16:11:48.547

这是 chromium 中的一个错误，使用内联安装时不会累积统计信息

[https://bugs.chromium.org/p/chromium/issues/detail?id=327061&q=inline%20installation&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified](https://bugs.chromium.org/p/chromium/issues/detail?id=327061&q=inline%20installation&colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Component%20Status%20Owner%20Summary%20OS%20Modified)

# regex - 带有多字符串的整个字符串的正则表达式失败

> ID：13041760
> 
> 赞同：1
> 
> 时间：2012-10-24T01:29:22.137
> 
> 标签：regex, perl

编码：

```
#!/usr/bin/perl
my $string="string\nstring2\nstring3";
print "$string\n-----\n";
$string=~s/^.*$/_/;
print "$string\n-----\n"; 
```

输出：

```
string
string2
string3
-----
string
string2
string3
----- 
```

预期产出：

1：

```
string
string2
string3
-----
_
----- 
```

2：

```
string
string2
string3
-----
_
string2
string3
----- 
```

3：（如 /m 修饰符）：

```
string
string2
string3
-----
_
_
_
----- 
```

问题：为什么没有`/m` `^`..`$`破坏了东西？我在正则表达式文档中错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T01:54:38.233

*   `/s`导致`.`匹配换行符。
*   `/m`原因`^`和`$`匹配行的开始和结束，而不是输入的开始和结束。
*   `/g`导致所有匹配被替换。

所以，

*   你可以得到（1）使用`s/^.*$/_/s;`
*   你可以得到（2）使用`s/^.*$/_/m;`
*   您可以使用 (3)`s/^.*$/_/mg;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:37:16.183

使用`s`修饰符：

> 将字符串视为单行。即改“.”。匹配任何字符，甚至是换行符，通常它不会匹配。

```
$string=~s/^.*$/_/s; 
```

# php - php从同一类内的静态方法调用类方法但未实例化

> ID：13041763
> 
> 赞同：12
> 
> 时间：2012-10-24T01:29:46.520
> 
> 标签：php, instance, static-methods

php 5.3+

很抱歉这个问题很长，但我想完全了解这一点。

我知道我不能从静态方法内部调用非静态的相同类方法，而不将该类实例化为对象。

```
class Person 
{
    private $people_array;

    function data_all_get()
    { // touch database, return array of people
      $this->people_array = // etc dbquery results
    }

    static function showPeople()
    {  // call class method
       $people_data = $this->data_all_get();
       // Fatal error: Using $this when not in object context
    }
} // end class Person 
```

通过搜索 SO，我发现了一些有趣的方法，但想知道每种方法如何影响代码环境。

我的问题如下：

我可以将类实例化为静态方法中的对象，以访问非静态方法

```
static function showPeople()
{  // instantiate as object
   $person = New Person();
   // call class method
   $people_data = $this->data_all_get();
} 
```

**Q1 - 这会导致什么问题？** 在我的情况下，该类没有构造函数，因此实例不会影响其他类方法或变量。这个新对象会在脚本执行期间占用一点内存空间吗？好像也不算太差...

* * *

另一种选择是将“data_all_get”方法转换为静态方法，因此可以从静态方法“showPeople”内部调用它，即

```
self::showPeople() 
```

当“data_all_get”方法被实例化为对象时，类中的其他方法正在使用该方法来设置私有变量的值，以减少对数据库的访问（如果已设置）。我知道这可能是构造函数的一部分，但我从来不需要在每个 php 脚本请求中多次实例化这个“Person”对象，该类主要用于将函数和变量组合在一起以进行组织.. .

**Q2 - 将“data_all_get”变成静态方法有什么影响？** 有吗？如果该方法是静态的，但它设置了私有 var $people_array 的值（它不是静态的），我认为如果需要在单个实例中第二次实例化该对象，则该 var 将能够被更新或覆盖脚本请求，对吗？另外，由于该属性不是静态的，因此该类的其他方法可以访问它。

**Q3** - 我可以在不“破坏任何东西”的情况下多次调用静态方法“data_all_get”（加载的问题 IK）。

**Q4** - 每次调用静态方法时是否只是使用额外的内存？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T15:28:33.300

```
class Person 
{
    private static $people_array;

    static public function data_all_get()
    { 
         self::$people_array = //DBStuff
    }

    static public function showPeople()
    {  
        $people_data = self::data_all_get();
    }
 } 
```

只是一些注释，有些可能是显而易见的。1）因为你没有返回任何东西，所以很明显上面的代码会失败。上面的代码没有任何问题。为了回答您的 Q1，您所做的就是使用全局变量进行一对函数调用，并将它们封装在一个类中。我建议不要有时将其用作实例化类，有时不这样做，因为它会使您的最终代码的可读性降低，并且人们在查看它时更难理解。

如果您担心多次实例化它，您可能想查看单例设计模式，但一般来说，如果您打算在某个时候实例化该类，我会重新检查您为什么要静态调用这些首先。没有什么错，每说，除了它对我来说“感觉不对”。

Q2) 将 data_all_get 变成静态数组的唯一含义是它引用了一个静态属性，这反过来意味着如果实例化该属性将无法访问。此外，您将失去实例化此类的多个版本（如果这很重要）并且基本上将 people_array 转换为全局变量的能力。这不一定是坏事，但如果不知道你的其他功能在做什么，就很难说它的含义是什么。

Q3) 多次运行它的唯一问题是 A) 清除人员数组中的任何内容，以及 B) 多个 DB 调用。如果没有看到其他代码正在发生什么，这个问题或多或少是不可能回答的。

Q4）您在此处列出的大小的方法的内存可以忽略不计，以至于不值得谈论。问题在于 DB 调用本身，以及在那里访问的行数

最后，这有点奇怪，因为您现在已经编写了这段代码，因为 showPeople 所做的事情与 data_all_get 完全相同。您可能想在 showPeople 内部编写一些逻辑来查看 $people_array 是否为空，如果是，则运行 data_all_get，如果不是，则返回 people_array。这将避免额外的数据库读取。如果你每次都要去读取数据库，那么你还不如让 data_all_get 返回 $people_array，在这种情况下，这些都不需要在一个类中，它可以只是一个函数调用，它返回它的内容在数据库中找到。

# coldfusion - 如何在 CF9.01+ 上使用 multiselectrow 以编程方式选择 CFGRID 中的行？

> ID：13041764
> 
> 赞同：0
> 
> 时间：2012-10-24T01:29:47.737
> 
> 标签：coldfusion, coldfusion-9, extjs3, coldfusion-10, cfgrid

为什么有`ColdFusion.grid.getSelectedRows`但没有`setSelectedRows()`？

文档：[Adobe ColdFusion 10 * ColdFusion.grid.getSelectedRows](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSaad0660b0585370c5e0a1d2c132ed6578ec-8000.html)

那么如何以编程方式选择行？？？

`<cfgrid>`唉……在我撞墙之前得小心点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:17:31.950

我不确定 9.0.1，但在 CF10 中尝试[selectRange](http://dev.sencha.com/playpen/docs/output/Ext.grid.RowSelectionModel.html#selectRange)或[selectRecords](http://dev.sencha.com/playpen/docs/output/Ext.grid.RowSelectionModel.html#selectRecords)。

```
var grid = ColdFusion.Grid.getGridObject('myGrid');
var model = grid.getSelectionModel();

model.selectRange(4, 6, false);
// ... or
var records = [grid.store.getAt(10)];
model.selectRecords(records , true); 
```

# java - 如何在php中使用java在linux中监控文件

> ID：13041765
> 
> 赞同：0
> 
> 时间：2012-10-24T01:29:48.080
> 
> 标签：java, php, linux

我在 linux 中有一个程序，它在检测到新连接的套接字时创建/修改文件。它将IP记录在该文件中，并在客户端断开连接或断开连接时将其删除..

在 php 中，我知道 inotify，但它与 java 不同的是它不会阻塞和刷新。我如何使用 java 和 php 执行此操作，以便我可以监视 linux 中的文件并更新 linux 中的文件已被修改的网站？

谢谢..

例如在 php..

```
<?php

$fd = inotify_init();

$watch_descriptor = inotify_add_watch($fd, '/tmp/devfile.txt', IN_MODIFY);

touch('/tmp/devfile.txt');

while(true){
$events = inotify_read($fd);

$contents =file_get_contents('/tmp/devfile.txt');

echo $contents;
}

$read = array($fd);
$write = null;
$except = null;

stream_select($read,$write,$except,0);

stream_set_blocking($fd, 0);

inotify_read($fd); 

$queue_len = inotify_queue_len($fd);

inotify_rm_watch($fd, $watch_descriptor);

fclose($fd);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:26:05.160

Java 7 支持类似 inotify 的文件通知。请参阅[此处](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)获取教程。

也许您可以找到或编写一个可以从 PHP 中使用的 C 程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:27:17.277

我不确定您所说的“java 和 php”是什么意思，但是如果您正在寻找的是一种纯 Java 方式来通知文件的更改，那么您可以使用 java.nio.file.Path 和监视服务 API。

[这是 Oracle 文档](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)中对其工作原理的解释。

# css - Div 背景图像不适用于 ie

> ID：13041769
> 
> 赞同：0
> 
> 时间：2012-10-24T01:30:31.290
> 
> 标签：css, internet-explorer, background-image

我知道已经有一千个关于 IE 背景图像错误的问题，但我已经遵循了所有的建议，但我仍然无法找到解决方案。

此样式不会在 IE 7 和 8 上呈现任何背景图像：

```
div#mainComponent {
background-image:url('../images/bg.png');
background-repeat:repeat;
z-index: 100001;
position: absolute;
bottom: 0px;
left: 10%;
color: @blue;
padding: 20px;
height: 424px;
overflow: auto;
width: 780px;
height: 320px;
margin: auto;
} 
```

由于我的目的是拥有 0.8 的不透明度背景，我已经尝试过使用 rgba，但什么也没发生，现在我有了这个简单的解决方案，但我仍然无法正确解决。我已经删除了所有其他属性，看看它是否可能是任何兼容性问题，但仍然没有任何效果。

你能帮我么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:13:59.637

尝试将图像本身拖到浏览器中。图像本身可能有问题。

这是一个显示如何执行 rgba 的页面，包括 IE 的后备： http: [//css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)

这是 IE 的回退：

```
<!--[if IE]>

   <style type="text/css">

   .color-block { 
       background:transparent;
       filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#50990000,endColorstr=#50990000); 
       zoom: 1;
    } 

  </style>

<![endif]--> 
```

# templates - Dojo 1.8：在呈现自定义模板时获取 dest.appendChild 不是函数

> ID：13041770
> 
> 赞同：1
> 
> 时间：2012-10-24T01:30:50.210
> 
> 标签：templates, widget, dojo

添加 WidgetsInTemplateMixin 后，我收到一个错误

```
dest.appendChild is not a function 
```

在文档中，它声称如果 this.containerNode 不能包含任何子对象，则会出现错误。但是，我已经为带有 dojo 类型“dijit/layout/ContentPane”的 div 标记了 containerNode 连接点。谁能向我解释为什么这不起作用？

这是模板文件

```
<div class="${baseClass}">
    <div class="${baseClass}Container"
         data-dojo-type="dijit/layout/BorderContainer"
         data-dojo-props="design: 'headline'">
        <div data-dojo-type="dijit/layout/ContentPane"
             data-dojo-props="region: 'top'">
            Top
        </div>
        <div data-dojo-type="dijit/layout/ContentPane"
             data-dojo-props="region: 'center'"
             data-dojo-attach-point="containerNode">
        </div>
        <div data-dojo-type="dijit/layout/ContentPane"
             data-dojo-props="region: 'leading', splitter: true">
            Sidebar
        </div>
    </div>
</div> 
```

这是javascript定义

```
define([
    "dojo/_base/declare",
    "dijit/_WidgetBase",
    "dijit/_OnDijitClickMixin",
    "dijit/layout/BorderContainer",
    "dijit/layout/ContentPane",
    "dijit/layout/TabContainer",
    "dijit/_TemplatedMixin",
    "dijit/_WidgetsInTemplateMixin",
    "dojo/text!./templates/MainContainer.html"
], function (declare,
             _WidgetBase,
             _OnDijitClickMixin,
             BorderContainer,
             ContentPane,
             TabContainer,
             _TemplatedMixin,
             _WidgetsInTemplateMixin,
             template)
{

    return declare([_WidgetBase, _OnDijitClickMixin, _TemplatedMixin, _WidgetsInTemplateMixin], {

        templateString:template,
        baseClass:"main"
    });

}); 
```

以声明方式定义的自定义小部件

```
<div data-dojo-type="main/ui/MainContainer" data-dojo-props="title: 'Main Application'">
  Hello Center!
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:04:53.190

你的问题值得研究。*appendChild*方法仅适用于 DOM 节点。根据源码，containerNode 必须是一个 DOM Node。

dijit/_TemplatedMixin.js

```
 _fillContent: function(/*DomNode*/ source){
    // summary:
    // Relocate source contents to templated container node.
    // this.containerNode must be able to receive children, or exceptions will be thrown.
    // tags:
    // protected
    var dest = this.containerNode;
        if(source && dest){
            while(source.hasChildNodes()){
            dest.appendChild(source.firstChild);
        }
    }
}, 
```

看看这个 dijit/_WidgetBase.js。注释显示*containerNode*的类型是*DomNode*。

```
// containerNode: [readonly] DomNode
//      Designates where children of the source DOM node will be placed.
//      "Children" in this case refers to both DOM nodes and widgets.
//      For example, for myWidget:
//
//      |   <div data-dojo-type=myWidget>
//      |       <b> here's a plain DOM node
//      |       <span data-dojo-type=subWidget>and a widget</span>
//      |       <i> and another plain DOM node </i>
//      |   </div>
//
//      containerNode would point to:
//
//      |       <b> here's a plain DOM node
//      |       <span data-dojo-type=subWidget>and a widget</span>
//      |       <i> and another plain DOM node </i>
//
//      In templated widgets, "containerNode" is set via a
//      data-dojo-attach-point assignment.
//
//      containerNode must be defined for any widget that accepts innerHTML
//      (like ContentPane or BorderContainer or even Button), and conversely
//      is null for widgets that don't, like TextBox.
containerNode: null, 
```

因此，*containerNode*被设计为*DomNode*，而不是错误。它不能是一个小部件。也许你应该尝试一些其他的方法。

**更新：** 在自定义小部件中添加一些 BorderContainers

ModuleWithGuideBar.html

```
<div data-dojo-attach-point="containerNode" class="${class} ModuleWithGuideBar">
    <div class="ModuleGuideBar"
         data-dojo-type="dijit.layout.BorderContainer"
         data-dojo-props="region:'top', gutters:false"
         data-dojo-attach-point="guideBarFirst">
    </div>
    <div class="ModuleGuideBar"
         data-dojo-type="dijit.layout.BorderContainer"
         data-dojo-props="region:'top', gutters:false"
         data-dojo-attach-point="guideBarSecond">
    </div>
    <div class="ModuleContent"
         data-dojo-type="dijit.layout.BorderContainer"
         data-dojo-props="region:'center', gutters:false, liveSplitters:false"
         data-dojo-attach-point="moduleContent">
    </div>
</div> 
```

js文件

```
define([
    "dojo/_base/declare",
    "dijit/layout/BorderContainer",
    "dijit/_TemplatedMixin",
    "dijit/_WidgetsInTemplateMixin",
    "dojo/text!./templates/ModuleWithGuideBar.html"

], function (declare, BorderContainer, TemplatedMixin, _WidgetsInTemplateMixin, template) {
    return declare("common.widget.ModuleWithGuideBar", [BorderContainer, TemplatedMixin, _WidgetsInTemplateMixin], {
        templateString:template,
        region:"center",
        gutters:false,
        guideBarFirst:null,
        guideBarSecond:null,
        moduleContent:null
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T03:46:01.893

```
define([
//...
    "dijit/_WidgetBase" 
```

然后

```
return declare('YourWidget',[_WidgetBase , _TemplatedMixin, _WidgetsInTemplateMixin],{
     templatePath: 'local/to/your/template.html',
     widgetsInTemplate: true,
     //... 
```

然后

```
var yourWidget= new YourWidget({},'YourWidgetNodeId'); 
```

# coordinates - 如何在vcg库中提取顶点坐标

> ID：13041772
> 
> 赞同：1
> 
> 时间：2012-10-24T01:30:57.267
> 
> 标签：coordinates, vertex, vcg

我正在尝试使用 VCG 库从网格对象中提取顶点的 3d 坐标。有谁知道如何做到这一点？我已经尝试了整个晚上，但一无所获。大写字母似乎代表顶点的某些属性，但我找不到表。谁能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T10:31:09.517

对于您的目的，答案可能为时已晚。但也许答案可以帮助其他人。

您可以通过以下方式访问顶点：

```
MyMesh m;
m.clear();
// cloud->points[i] is how I store the points in a PCL point cloud format
for(int i=0; i<m.VN(); i++)
{
    cloud->points[i].x = m.vert[i].P()[0]; 
    // so m.vert[i].P()[0] is how to access the x coordinate of the i-th vertex.
    cloud->points[i].y = m.vert[i].P()[1];
    cloud->points[i].z = m.vert[i].P()[2];
} 
```

# wpf - 如何在没有代码隐藏的情况下在我的视图模型中使用来自 xaml 的 wpf 事件？

> ID：13041775
> 
> 赞同：2
> 
> 时间：2012-10-24T01:31:37.203
> 
> 标签：wpf, events, xaml, viewmodel

在 WPF 通过 XAML 到我的 viewModel 中，**我想检测画布上的鼠标移动，**并仅在按下鼠标左键时对其做出反应。具体来说，我想**从我的 viewModel 中的方法获取事件，**包括鼠标位置和鼠标按钮状态。有人可以帮我弄这个吗？

我知道我可以在代码隐藏中使用常规 WPF 事件，但在我看来，这样做会“投降”，屈服于 XAML 学习曲线，所以这是最后的手段。

我发现了这个问题，但我买不起 Expression Blend，所以它对我没有帮助： [WPF Mouse Over](https://stackoverflow.com/questions/1429597/wpf-mouse-over)

我看着

```
<EventTrigger RoutedEvent="Canvas.MouseMove"> . . ., 
```

但这看起来只适用于动画。

这似乎是人们想要做的常见事情，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:36:59.283

您可以创建一个附加的画布行为来接受命令并引发它，您的视图模型将订阅该命令并执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:29:55.217

第一：你不需要 Expression Blend，你只需要 SDK

或者如果您查看 mvvm light 框架，还有一个 EventToCommand 行为

# javascript - 了解 TodoMVC 示例

> ID：13041777
> 
> 赞同：6
> 
> 时间：2012-10-24T01:31:53.430
> 
> 标签：javascript, node.js, backbone.js, model-view-controller, todomvc

开始学习 node.js 和 backbone.js，并使用 TodoMVC 示例作为我的指南。有几个部分我很难理解。见下文。

这是 app.js。

```
var express = require('express')
  , http = require('http')
  , mongoose = require('mongoose')
  , models = require('./models')
  , routes = require('./routes')
  , app = express();

app.configure(function () {
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(require('stylus').middleware({ src: __dirname + '/public' }));
  app.use(express.static(__dirname + '/public'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
});

app.configure('development', function () {
  app.use(express.errorHandler());
});

routes.init(app);

mongoose.connect("127.0.0.1", "todomvc", 27017);

http.createServer(app).listen(3000);

console.log("Express server listening on port 3000"); 
```

这是./models：

```
var mongoose = require('mongoose'),

  TodoSchema = new mongoose.Schema({
    title: { 'type': String, 'default': 'empty todo...' },
    order: { 'type': Number },
    done: { 'type': Boolean, 'default': false }
  });

module.exports = mongoose.model('Todo', TodoSchema); 
```

最后，安迪，这里是 ./routes：

```
(function (exports) {

  "use strict";

  var mongoose = require('mongoose')
    , crudUtils = require('../utils/crudUtils')
    , Todo = mongoose.model('Todo');

  function index(req, res) {
    res.render('index', { 'title': 'Backbone.js, Node.js, MongoDB Todos' });
  }

  exports.init = function (app) {
    app.get('/', index);
    crudUtils.initRoutesForModel({ 'app': app, 'model': Todo });
  };

}(exports)); 
```

所以我的问题是，路由模块中的 mongoose.model('Todo') 中的“Todo”模型如何在此范围内可用？我看到模型模块正在导出 mongoose.model('Todo', TodoSchema); 所以我必须相信路由模块是如何访问它的，但我不知道为什么。我错过了什么？我有一种感觉，在这种情况下，它只是不完全理解范围。另外，我不确定路由功能匿名的原因。

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T03:19:45.650

这是从 Node 和 Mongoose 开始时要处理的更令人困惑的事情之一。

当您`require('mongoose')`第一次使用时，它会创建一个Mongoose 的[单例](http://en.wikipedia.org/wiki/Singleton_pattern)实例 - 以后每次需要它时都会返回相同的实例。

这使得它非常容易使用，但是在开始时有点难以理解的“魔法”。

这意味着当您调用`mongoose.connect("127.0.0.1", "todomvc", 27017);`app.js 时，它会创建一个与应用程序持续存在的连接。

这也意味着`mongoose.model('Todo', TodoSchema);`使 Todo 模型在任何其他调用`require('mongoose')`, via的范围内可用`mongoose.model('Todo')`。如上例所示，这可以在另一个文件的顶部进行 var'd `require`，或者在回调中间需要它的那一刻。

这就是您将 Todo 模型放入您的 routes.js 的方式，并且有一个很好的理由确保告诉 Mongoose 您的模型是您在应用程序中做的第一件事。

回答您关于理解范围的问题；您实际上拥有的每个文件`require`都有自己的范围，并且除了进程之类的全局对象外，无权访问任何内容。你必须拥有`require`你想要使用的所有东西，并且只能通过调用函数或创建通过`exports`对象公开的类来传递变量。

因此，对于上面的实际示例，从models.js 导出模型没有任何好处，因为它随后没有在需要models.js 的app. 中引用。正是 routes.js 中的这些行使 Todo 模型可用：

```
var mongoose = require('mongoose')
, Todo = mongoose.model('Todo'); // returns the Todo model that was registered by models.js 
```

这就是 Todo 在这条线上的存在方式：

```
crudUtils.initRoutesForModel({ 'app': app, 'model': Todo }); 
```

将路由包装在匿名函数中也没有任何好处（据我所知），因为这本质上是由`require`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:57:03.803

您将要查看 Express。

> Express 是一个最小且灵活的 node.js Web 应用程序框架，为构建单页和多页以及混合 Web 应用程序提供了一组强大的功能。

您复制和粘贴的很多内容都是使用 Express Scaffold - 所以很多都是为您预先构建的，您可以在此处查看： http: [//expressjs.com/](http://expressjs.com/)

我希望这能为您指明正确的方向。

# delphi - 在菜单项单击时检测鼠标左键/右键？

> ID：13041782
> 
> 赞同：0
> 
> 时间：2012-10-24T01:32:13.190
> 
> 标签：delphi, mouseevent, menuitem

在 Delphi XE2 中，如何检测用户是用鼠标左键还是右键单击弹出菜单项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:46:01.940

使用该单元，将其作为组件安装并替换`TPopupMenu`添加`OnMenuRightClick`事件的标准。

```
unit RCPopupMenu;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, Forms, Dialogs,
  Menus;

type
  TMenuRightClickEvent = procedure (Sender: TObject; Item: TMenuItem) of object;

  TRCPopupList = class(TPopupList)
  protected
    procedure WndProc(var Message: TMessage); override;
  end;

  TRCPopupMenu = class(TPopupMenu)
  private
    FOnMenuRightClick: TMenuRightClickEvent;
  protected
    function DispatchRC(aHandle: HMENU; aPosition: Integer): Boolean;
    procedure RClick(aItem: TMenuItem);
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
    procedure Popup(X, Y: Integer); override;
  published
    property OnMenuRightClick: TMenuRightClickEvent read FOnMenuRightClick write FOnMenuRightClick;
  end;

procedure Register;

var
  RCPopupList: TRCPopupList;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [TRCPopupMenu]);
end;

{ TRCPopupList }

procedure TRCPopupList.WndProc(var Message: TMessage);
var
  i: Integer;
  pm: TPopupMenu;
begin
  if Message.Msg = WM_MENURBUTTONUP then
  begin
    for I := 0 to Count - 1 do
    begin
      pm := TPopupMenu(Items[i]);
      if pm is TRCPopupMenu then
        if TRCPopupMenu(Items[i]).DispatchRC(Message.lParam, Message.wParam) then
          Exit;
    end;
  end;
  inherited WndProc(Message);
end;

{ TRCPopupMenu }

constructor TRCPopupMenu.Create(AOwner: TComponent);
begin
  inherited;
  PopupList.Remove(Self);
  RCPopupList.Add(Self);
end;

destructor TRCPopupMenu.Destroy;
begin
  RCPopupList.Remove(Self);
  PopupList.Add(Self);
  inherited;
end;

function TRCPopupMenu.DispatchRC(aHandle: HMENU; aPosition: Integer): Boolean;
begin
  Result := False;
  if Handle = aHandle then
  begin
    RClick(Items[aPosition]);
    Result := True;
  end;
end;

procedure TRCPopupMenu.Popup(X, Y: Integer);
const
  Flags: array[Boolean, TPopupAlignment] of Word =
    ((TPM_LEFTALIGN, TPM_RIGHTALIGN, TPM_CENTERALIGN),
    (TPM_RIGHTALIGN, TPM_LEFTALIGN, TPM_CENTERALIGN));
  Buttons: array[TTrackButton] of Word = (TPM_RIGHTBUTTON, TPM_LEFTBUTTON);
var
  AFlags: Integer;
begin
  DoPopup(Self);
  AFlags := Flags[UseRightToLeftAlignment, Alignment] {or Buttons[TrackButton]};
  if (Win32MajorVersion > 4) or ((Win32MajorVersion = 4) and (Win32MinorVersion > 0)) then
  begin
    AFlags := AFlags or (Byte(MenuAnimation) shl 10);
    AFlags := AFlags or TPM_RECURSE;
  end;
  TrackPopupMenuEx(Items.Handle, AFlags, X, Y, RCPopupList.Window, nil);
end;

procedure TRCPopupMenu.RClick(aItem: TMenuItem);
begin
  if Assigned (FOnMenuRightClick) then
    FOnMenuRightClick(Self, aItem);
end;

var
  oldPL: TPopupList;

initialization
  RCPopupList := TRCPopupList.Create;
finalization
  RCPopupList.Free;

end. 
```

然后，您可以使用该`OnMenuRightClick`事件在右键单击时执行一些操作！

注意：我没有制作这个单元——我不知道是谁制作的，但功劳归于制作的人……但是我刚刚在 Delphi XE2 中对其进行了测试，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T23:20:58.527

感谢 TLama 和该代码的作者！非常有用，但只需要一个小更新：该程序只检查第一级项目，如果您的菜单包含子项目，它不起作用......所以我们必须重载 DispatchRC 函数来递归搜索单击的项目。我这样做了，效果很好：

```
function TRCPopupMenu.DispatchRC(aHandle: HMENU; aPosition: Integer): Boolean;
begin
  //Result := False; // freezebit : now, unused value
  if Handle = aHandle then
  begin
    RClick(Items[aPosition]);
    Result := True;
    Exit; // freezebit : found, so leave
  end;
  Result := DispatchRC(aHandle, aPosition, Items); // freezebit : now make a recursive search in all sub-items
end;

// freezebit : this function search in all sub-items recursively if we found the right-clicked TMenuItem
function TRCPopupMenu.DispatchRC(aHandle: HMENU; aPosition: Integer; aItems: TMenuItem): Boolean;
var
  i: integer;
  itm: TMenuItem;
begin
  Result := False;
  for i := 0 to aItems.Count - 1 do begin
    itm := aItems[i];
    if itm.Count = 0 then
      Continue;
    if itm.Items[0].Parent.Handle = aHandle then begin
      RClick(itm.Items[aPosition]);
      Result := True;
      Exit;
    end;
    if DispatchRC(aHandle, aPosition, itm) then begin
      Result := True;
      Exit;
    end;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:16:32.220

弹出菜单处理发生`user32.dll`在一个名为`TrackPopupMenu`Windows 的函数内部。响应左键或右键单击，`WM_COMMAND`会生成一条消息，由 Delphi VCL 框架代码处理。该`wParam`参数包含正在执行的菜单项的索引，并且`LParam`似乎始终为零。

创建对左键和右键单击响应不同的菜单的唯一方法是自己生成弹出菜单，而不是从 Windows 生成。

如果 Windows 的设计者决定将此信息作为窗口消息中 WParam 或 LParam 的一部分传递给您，您可能已经对此做了一些事情，或者您可以挂钩作为弹出窗口一部分的鼠标按下事件菜单的窗口消息循环，您也许可以这样做，但我不知道这样做的可靠方法。

如果您确实需要对左右单击的菜单进行不同的处理，那么创建自己的弹出菜单可能会少一些工作。但是没有用户会知道如何使用您的应用程序。对于标准 Win32 菜单，不推荐这种想法，而且我所知道的任何方式都无法实现。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-06-12T21:55:46.387

感谢作者和 freezebit，但我觉得这个解决方案有点漂亮（也改变了 DispatchRC）：

```
function TRCPopupMenu.DispatchRC(aHandle: HMENU; aPosition: Integer): Boolean;
var FParentItem: TMenuItem;
begin
  Result := False;
  if Handle = aHandle then
    FParentItem := Items
  else
    FParentItem := FindItem(aHandle, fkHandle);
  if FParentItem <> nil then
    begin
      RClick(FParentItem.Items[aPosition]);
      Result := True;
    end;
{  if Handle = aHandle then
  begin
    RClick(Items[aPosition]);
    Result := True;
  end;}
end; 
```

# jquery - 可以使用 jQuery 深度克隆 HTML5 画布元素吗？

> ID：13041783
> 
> 赞同：3
> 
> 时间：2012-10-24T01:32:20.497
> 
> 标签：jquery, html, canvas, html5-canvas

我们看到了这篇关于克隆 HTML5 画布元素的 SO 帖子：[Any way to clone HTML5 canvas element with its content？](https://stackoverflow.com/questions/3318565/any-way-to-clone-html5-canvas-element-with-its-content)

我们尝试使用 jQuery 进行深度克隆（即 $(canvas).clone(true) ），但图像数据似乎没有复制过来。

这对 jQuery 来说是不可能的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T02:28:54.063

如果您不需要复制任何附加的事件处理程序（通常，我怀疑这是可能的），我只需使用当前接受的解决方案来[使用 base64 将画布图像从一个画布显示到另一个画布](https://stackoverflow.com/questions/4137372/display-canvas-image-from-one-canvas-to-another-canvas-using-base64)

```
//grab the context from your destination canvas
var destCtx = destinationCanvas.getContext('2d');

//call its drawImage() function passing it the source canvas directly
destCtx.drawImage(sourceCanvas, 0, 0); 
```

当然，您必须先创建目标画布，因此，在此之前，您必须：

```
var destinationCanvas    = document.createElement('canvas');
destinationCanvas.width  = sourceCanvas.width;
destinationCanvas.height = sourceCanvas.height; 
```

# ios - 如何更改 NSString 编码

> ID：13041786
> 
> 赞同：3
> 
> 时间：2012-10-24T01:32:43.087
> 
> 标签：ios, encoding, nsstring, nsdata

我有一个看起来像这样的 NSString。

> 雪铁龙

这是 Citron 的 ASCII。因此，努力尝试将此 NSString 转换为像这样的正确形式

```
string = [dict valueForKey:@"WIGMIGDIGFIG"]; //myBadString
NSData *data = [string dataUsingEncoding:NSASCIIStringEncoding];
//sent it back to NSData with ACII encoding
NSString* mystring = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
// put it back into a NSString but with the correct encoding
NSLog(@"%@", mystring);// check result. 
```

因此，我通过一个循环运行它以检查我的字典数组中的所有字符串，并且每个返回到日志中的字符串都接受其中包含 CitroÃƒÂ«n 的一个字符串。它只是从日志中遗漏了。

更新的问题，有人知道如何做我想做的事吗？我什至不确定这是否可能。我要做的就是修复已经创建但显然编码错误的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:56:27.813

我刚刚尝试了您的示例，问题出在以下行：

```
NSData *data = [string dataUsingEncoding:NSASCIIStringEncoding]; 
```

如果我`NSLog`的内容`data`被`nil`退回。这大概意味着“CitroÃƒÂ«n”不是一个有效的 ASCII 字符串开头。如果我`NSUTF8StringEncoding`改用，我会在`data`对象中获取数据。

我的理解是，`nil`如果无法使用指定的字符串编码转换字符串，则字符串转换方法将返回。

# c - 从C字符串中提取“整数”和“小数”？

> ID：13041790
> 
> 赞同：0
> 
> 时间：2012-10-24T01:34:00.547
> 
> 标签：c, string

如何在最初包含 C 中的小数的两部分中转换字符串或中断字符串。我必须逐位解析这个数字。

```
char s[] = "2.03";
// -->
double a = 2;
double b = 0.03; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:37:19.670

这是一个简单的方法吗？

```
#include <stdlib.h> /* you need this header for conversion functions */
char s[] = "2.03";
double a = (int)atoi(s);
double b = atof(s)-a; 
```

好的。不使用简单函数（仅 pow 和 strlen 函数）。

```
#include <stdio.h>
#include <math.h>

int main()
{
  char s[] = "2.03";
  double a = 0,b = 0;
  int i,n = 0;
  char d = 0;
  for(i = 0; i < strlen(s); i++) /* don't want strlen? for(i = 0; s[i] != '\0'; i++) */
  {
    if(d == 1)
    {
      b += (s[i]-'0')/(pow(10,++n)); /* don't want pow? make the function w/ a loop */
    }
    else if(s[i] == '.')
      d = 1;
    else
    {
      a *= 10;
      a += s[i]-'0'; /* convert chars to numbers */
    }
  }
  printf("%f %f",a,b);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T01:38:01.450

使用`strtod`和`modf`：

```
#include <stdlib.h>
#include <math.h>

double d = strtod(s, NULL);
double a;
double b = modf(d, &a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:00:23.020

那么像下面的函数呢。

```
void makeTwoPieces (char *str, double *dMost, double *dLeast)
{
  double  dMultiplier;
  *dMost = *dLeast = 0.0;

  for (; *str; str++) {
    if (*str == '.') {
        break;
    } else if (*str >= '0' && *str <= '9') {
       *dMost *= 10;
       *dMost += (*str - '0');
    }
  }
  dMultiplier = 1.0;
  for (; *str; str++) {
    if (*str >= '0' && *str <= '9') {
       dMultiplier /= 10;
       *dLeast += (*str - '0') * dMultiplier;
    }
  }
} 
```

然后您可以在测试工具中使用此功能，如下所示：

```
int main(int argc, char * argv[])
{
    double d1, d2;
    char *str = "2.03";
    makeTwoPieces (str, &d1, &d2);
    return 0;
} 
```

# c - 3d轨迹路径计算

> ID：13041794
> 
> 赞同：-4
> 
> 时间：2012-10-24T01:34:16.297
> 
> 标签：c, 3d

我正在开发一个足球游戏，用户必须选择速度、角度、方位角，以便用户可以使用所需的选择发布目标。任何人都可以制定我如何为游戏创建轨迹路径。请帮助我，因为我无法找到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T02:24:18.883

是基础物理。假设 Z 向上，您的初始 X 和 Y 速度是恒定的，并由初始角度确定（使用三角）。Z 分量完全由重力决定。您获取仰角并（再次使用 trig）将其转换为组件。那是您的初始 Z 速度。

这是最简单的公式，它忽略了风、旋转和阻力（*即*球在飞行过程中不会横向移动，只受重力影响）。

```
vx = power * cos(elevation) * sin(azimuth);
vy = power * cos(elevation) * cos(azimuth);
vz = power * sin(elevation); 
```

现在，时间位置`t`是简单的牛顿物理学：

```
x = vx * t;
y = vy * t;
z = vz * t - 0.5 * g * t * t; 
```

重力在哪里`g`(9.81 m/s/s)

但是直接使用这些公式并不能让您计算反弹等。为此，您需要逐步计算它。这意味着，对于较小的时间增量 ( `dt`)，您可以获取当前位置和速度并对其进行修改。

```
vx;             // unchanged
vy;             // unchanged
vz -= g * dt;   // gravity
x += vx * dt;
y += vy * dt;
z += vz * dt; 
```

如果您的 Z 位置低于地面，则否定`vz`允许反弹。如果你碰到一个表面，你会做类似的反射（将矢量反射到表面法线）。

如果您希望飞行受到旋转（马格努斯效应）和其他力的影响，事情就会变得更加棘手。您可能还想抑制反射，因为每当球反弹时能量都会丢失。

这取决于你。我已经给出了基础知识，希望对您有所帮助。

你应该阅读弹丸运动。一旦你得到一些基本的工作并想让运动更逼真，阅读运动球的空气动力学/流体动力学...... Rabindra Mehta 的几乎任何书籍或文章都是一个很好的起点。

# c# - 将数据集拆分为数据表

> ID：13041795
> 
> 赞同：1
> 
> 时间：2012-10-24T01:34:26.457
> 
> 标签：c#, sql, sql-server-2005, dataset

我有一个我正在“尝试”维护和升级的软件系统。我没有接受过正式的 c# 培训，只有 1 类 sql。我的大部分有限经验是使用 Java、C++。我们正在使用 MSSQL 2005。

我有一个在 c# 中运行的查询，它获取一个包含 1 个表和 15 个左右列的数据集。每次运行时返回的行数都不同。第一列是 storeid。我需要通过 storeid 将记录分隔到他们自己的数据表中。一旦我知道了，就有一种将其发送到 CSV 文件的现有方法。

到目前为止，我找到了 Datatable.Select，按 storeid 排序。

一种选择是从数据集中提取所有唯一的 storeid 并将它们放入数组中。然后我可以根据现有的 storeid 进行查询，并使用 foreach 将这些行复制或移动到新的数据表中。

如果有人能指出我正确的方向，那将不胜感激。

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:57:28.253

```
if you know number of tables you can use this methode..

            DataSet ds = new DataSet();
            DataTable dt1 = new DataTable();
            DataTable dt2 = new DataTable();
                dt1 = ds.Tables[0];
                dt2 = ds.Tables[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:46:50.883

按 storeid 对查询进行排序，然后在代码中循环数据表，并在每次 storeid 更改时创建一个新表。您还可以使用 LINQ 将其复制过来或手动进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:02:42.890

当然有几种方法可以做到这一点，但这样的事情应该有效：

```
 DataSet dsMain = GetMyMainDataSet();
        DataSet dsTablesById = new DataSet();

        foreach (DataRow row in dsMain.Tables[0].Rows)
        {
            string storeId = row["storeid"].ToString();
            if (!dsTablesById.Tables.Contains(storeId))
            {
                dsTablesById.Tables.Add(storeId);
                foreach (DataColumn col in dsMain.Tables[0].Columns)
                {
                    dsTablesById.Tables[storeId].Columns.Add(col.ColumnName, col.DataType);
                }
            }
            dsTablesById.Tables[storeId].Rows.Add(row.ItemArray);
            dsTablesById.Tables[storeId].AcceptChanges();
        } 
```

dsTablesById 将包含您的所有数据表，每个数据表都由您不同的 storeid 值命名。

# c# - 从 GridView 发送电子邮件

> ID：13041800
> 
> 赞同：0
> 
> 时间：2012-10-24T01:36:29.110
> 
> 标签：c#, asp.net

我正在尝试发送我的 GridView 中列出的所有电子邮件，但由于某种原因，电子邮件没有发送出去。我怀疑我的发送功能 (smtpClient.Send(mailMessage); 不工作或我遗漏了一些东西。请帮忙，因为我花了很多时间来解决这个问题。谢谢

```
protected void chkAll_CheckedChanged(object sender, EventArgs e) 
{ 
    foreach(GridViewRow gr in GridView1.Rows) 
    { 
        CheckBox cb = (CheckBox)gr.FindControl("chkItem"); 
        if(((CheckBox)sender).Checked) 
            cb.Checked = true; 
        else 
             cb.Checked = false; 
    } 
} 

protected void Button3_Click(object sender, EventArgs e) 
{ 
    StringBuilder sb = new StringBuilder(); 

    foreach(GridViewRow gr in GridView1.Rows) 
    { 
        CheckBox cb = (CheckBox)gr.FindControl("chkItem"); 
        if(cb.Checked) 
        { 
            sb.Append(GridView1.DataKeys[gr.RowIndex]["Email"].ToString()); 
            sb.Append(","); 
        } 
    } 

    //Create instance of main mail message class. 
    System.Net.Mail.MailMessage mailMessage=new System.Net.Mail.MailMessage(); 

        mailMessage.From = new System.Net.Mail.MailAddress(
                   System.Configuration.ConfigurationManager
                                 .AppSettings["fromEmailAddress"]); 

        mailMessage.Priority = System.Net.Mail.MailPriority.High; 
        //Text/HTML 
        mailMessage.IsBodyHtml = false; 
        mailMessage.Body = "Hello, here is new email"; 
        mailMessage.Subject = "RCA APPROVAL IS REQUIRED"; 

        System.Net.Mail.SmtpClient smtpClient=new System.Net.Mail.SmtpClient();

        try 
        { 
            smtpClient.Send(mailMessage); 

            Response.Write("<B>Email Has been sent successfully.</B>"); 
        } 
        catch (Exception ex) 
        { 
            Response.Write(ex.Message); 
        } 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:50:33.017

您需要设置`To`地址`MailMessage`

你可能想这样做：

```
protected void Button3_Click(object sender, EventArgs e) 
{
    MailMessage mailMessage=new MailMessage(); 

    foreach(GridViewRow gr in GridView1.Rows) 
    { 
        CheckBox cb = (CheckBox)gr.FindControl("chkItem"); 
        if(cb.Checked) 
        { 
            //sb.Append(GridView1.DataKeys[gr.RowIndex]["Email"].ToString()); 
            //sb.Append(","); 

            //SETUP THE EMAIL ADDRESSES TO WHICH YOU WANT TO SEND EMAIL
            mailMessage.To.Add(new MailAddress(
                     GridView1.DataKeys[gr.RowIndex]["Email"].ToString()));
        } 
    } 
```

此外，如果您的`SMTP`服务器需要身份验证，您还需要提供`Credentials`。或者您可以将所有设置放入**web.config**中的`<system.net><mailSettings>`标记中，如此[处所示](http://weblogs.asp.net/scottgu/archive/2005/12/10/432854.aspx)，这正是强大的**[Scott Gu](http://weblogs.asp.net/scottgu/default.aspx)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:57:21.713

这是因为您没有将电子邮件发送给任何人。

使用网格视图上的选定地址设置 mailMessage.To 属性的值。

此外，请检查您的 SMTP 服务，可能需要提供凭据并启用 SSL。**

# sql - 从 SQL 查询中删除反向重复项

> ID：13041802
> 
> 赞同：19
> 
> 时间：2012-10-24T01:36:45.023
> 
> 标签：sql

假设查询结果应该返回字符串对 (x, y) 的列表。我正在尝试消除反向重复。我的意思是，如果 (x, y) 是结果之一，则 (y, x) 不应稍后出现。

例子：

```
column 1 (foreign key)    column 2 (int)     column 3 (string)
4                         50                 Bob
2                         70                 Steve 
3                         50                 Joe 
```

此表中表示的人员可以多次出现，并具有不同的第 2 列值。

我的查询需要打印每对具有相同第 2 列值的名称：

```
select e.column3, f.column3 from example as e, example as f where e.column2 = f.column2 

(Bob, Bob)
(Bob, Joe)
(Joe, Bob)
(Joe, Joe) 
```

我升级了查询，以便它删除双打：

```
select e.column3, f.column3 from example as e, example as f where e.column2 = f.column2
       and e.column3 <> f.column3

(Bob, Joe)
(Joe, Bob) 
```

现在我希望它只返回：

```
(Bob, Joe). 
```

(Joe, Bob) 是反向复制的，所以我不希望它出现在结果中。有没有办法在一个查询中处理它？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-24T01:41:17.703

首先，欢迎来到 2012。我们已经不再使用逗号关联表。它是在 ANSI 89 中引入的，但严重缺乏。现在，正确的方法是使用 ANSI 92/99/2003 JOIN 语法编写查询。

您的问题的解决方案是将您的双向不等式`<>`变成**单向不等式**，无论`<`您`>`喜欢哪种方式。

```
select e.column3, f.column3
from example as e
join example as f on e.column2 = f.column2 and e.column3 < f.column3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:40:16.360

```
select e.column3, f.column3 from example as e, example as f where e.column2 = f.column2
       and e.column3 <> f.column3 where e.id < f.id 
```

添加一个简单的 where 子句应该可以做到。

# c# - 如果特定应用程序打开和关闭，我如何触发启动我的 Windows 服务应用程序？

> ID：13041805
> 
> 赞同：2
> 
> 时间：2012-10-24T01:37:06.230
> 
> 标签：c#, .net, windows-services

示例：Skype 将是触发我的服务的应用程序，如果 Skype 打开，那么我的服务应该启动。如果Skype关闭，那么我的服务应该关闭。那可能吗？

我想将状态放入我的 eventLog 以检查它是否确实可以使用以下内容：

```
protected override void OnStart(string[] args)
    {
        galaxyeventLog.WriteEntry("Skype Start");
    }

    protected override void OnStop()
    {
        galaxyeventLog.WriteEntry("Skype Stop");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:31:07.620

这是你如何做到的

1.  您需要开发一个 SkypeMonitor 服务（第三个服务应用程序）。它的工作是跟踪 Skype 进程。这可以使用 WMI 接口来完成。示例代码可以在

    [.NET 进程监视器](https://stackoverflow.com/questions/1986249/c-sharp-process-monitor/1986856#1986856)

2.  使用它，您可以使用下面的代码挂钩启动和停止 Skype 进程事件以启动/停止您的服务

    服务控制器控制器 = 新服务控制器（服务名称）；if (controller.Status==ServiceControllerStatus.Stopped) controller.Start();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:11:59.183

简单解决方案的问题在于**它们需要服务已经在运行**。

但是，您可以做的是，当您在列表中看不到 Skype 时禁用所有服务行为，并在您实际看到它时启用它。

为此，您应该使用以下方法定期检查打开的进程：

```
Process[] processlist = Process.GetProcesses(); 
```

的`System.Diagnostics;`命名空间。

希望这会有所帮助=)

# asp.net-mvc - MVC 控制器：从 HTTP 主体获取 JSON 对象？

> ID：13041808
> 
> 赞同：73
> 
> 时间：2012-10-24T01:37:23.313
> 
> 标签：asp.net-mvc, json, post

我们有一个 MVC (MVC4) 应用程序，它有时可能会从第 3 方获取一个 JSON 事件 POST 到我们的特定 URL（“ [http://server.com/events/](http://server.com/events/) ”）。JSON 事件在 HTTP POST 的正文中，并且正文是严格的 JSON（`Content-Type: application/json`-不是在某些字符串字段中带有 JSON 的表单发布）。

如何在控制器主体内接收 JSON 主体？我尝试了以下但没有得到任何东西

**[编辑]**：当我说*没有得到任何东西*时，我的意思是 jsonBody 始终为空，无论我是否将其定义为`Object`或`string`。

```
[HttpPost]
// this maps to http://server.com/events/
// why is jsonBody always null ?!
public ActionResult Index(int? id, string jsonBody)
{
    // Do stuff here
} 
```

请注意，我知道如果我使用强类型输入参数声明方法，MVC 会执行整个解析和过滤，即

```
// this tested to work, jsonBody has valid json data 
// that I can deserialize using JSON.net
public ActionResult Index(int? id, ClassType847 jsonBody) { ... } 
```

但是，我们得到的 JSON 是多种多样的，所以我们不想为每个 JSON 变体定义（和维护）数百个不同的类。

我正在通过以下`curl`命令对此进行测试（此处使用 JSON 的一种变体）

```
curl -i -H "Host: localhost" -H "Content-Type: application/json" -X POST http://localhost/events/ -d '{ "created": 1326853478, "data": { "object": { "num_of_errors": 123, "fail_count": 3 }}} 
```

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-10-29T06:26:34.893

好像如果

*   `Content-Type: application/json`和
*   如果 POST 主体没有紧密绑定到控制器的输入对象类

然后 MVC 并没有真正将 POST 主体绑定到任何特定的类。您也不能只获取 POST 正文作为 ActionResult 的参数（在另一个答案中建议）。很公平。您需要自己从请求流中获取并处理它。

```
[HttpPost]
public ActionResult Index(int? id)
{
    Stream req = Request.InputStream;
    req.Seek(0, System.IO.SeekOrigin.Begin);
    string json = new StreamReader(req).ReadToEnd();

    InputClass input = null;
    try
    {
        // assuming JSON.net/Newtonsoft library from http://json.codeplex.com/
        input = JsonConvert.DeserializeObject<InputClass>(json)
    }

    catch (Exception ex)
    {
        // Try and handle malformed POST body
        return new HttpStatusCodeResult(HttpStatusCode.BadRequest);
    }

    //do stuff

} 
```

**更新：**

对于 Asp.Net Core，`[FromBody]`对于复杂的 JSON 数据类型，您必须在控制器操作中的参数名称旁边添加属性：

```
[HttpPost]
public ActionResult JsonAction([FromBody]Customer c) 
```

此外，如果您想以字符串的形式访问请求正文以自己解析它，您应该使用`Request.Body`而不是`Request.InputStream`：

```
Stream req = Request.Body;
req.Seek(0, System.IO.SeekOrigin.Begin);
string json = new StreamReader(req).ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-24T05:17:27.980

用于`Request.Form`获取数据

控制器：

```
 [HttpPost]
    public ActionResult Index(int? id)
    {
        string jsonData= Request.Form[0]; // The data from the POST
    } 
```

* * *

我写这个来试试

看法：

```
<input type="button" value="post" id="btnPost" />

<script type="text/javascript">
    $(function () {
        var test = {
            number: 456,
            name: "Ryu"
        }
        $("#btnPost").click(function () {
            $.post('@Url.Action("Index", "Home")', JSON.stringify(test));
        });
    });
</script> 
```

并写入`Request.Form[0]`或`Request.Params[0]`在控制器中可以获取数据。

我不写`<form> tag`视图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-17T17:57:24.523

我一直试图让我的**ASP.NET MVC 控制器解析我使用**[**Postman**](https://www.getpostman.com/downloads/)提交给它的一些模型。

我需要以下内容才能使其正常工作：

*   控制器动作

    ```
    [HttpPost]
    [PermitAllUsers]
    [Route("Models")]
    public JsonResult InsertOrUpdateModels(Model entities)
    {
        // ...
        return Json(response, JsonRequestBehavior.AllowGet);
    } 
    ```

*   模型类

    ```
    public class Model
    {
        public string Test { get; set; }
        // ...
    } 
    ```

*   邮递员请求的标头，具体来说，`Content-Type`

    [![邮递员标题](../Images/e09621faf26090010277414eada8a239.png)](https://i.stack.imgur.com/Exh8i.png)

*   请求正文中的json

    [![在此处输入图像描述](../Images/37017d64c48acebce60c79a1486c6014.png)](https://i.stack.imgur.com/mE48e.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-13T14:43:45.573

一旦你定义了一个类（MyDTOClass）来表明你期望收到什么，它应该像......

```
public ActionResult Post([FromBody]MyDTOClass inputData){
 ... do something with input data ...
} 
```

感谢朱莉娅：

[解析 Json .Net Web Api](https://stackoverflow.com/questions/37447427/parsing-json-net-web-api)

确保您的请求使用 http 标头发送：

内容类型：应用程序/json

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T05:26:49.863

您可以将 json 字符串作为您的参数，`ActionResult`然后使用[**JSON.Net对其进行序列化**](http://json.codeplex.com/)

[**这里**](https://stackoverflow.com/questions/2246694/how-to-convert-json-object-to-custom-c-sharp-object)展示了一个例子

* * *

为了以序列化形式接收它作为控制器操作的参数，您必须编写自定义模型绑定器或操作过滤器（OnActionExecuting），以便将 json 字符串序列化为您喜欢的模型并在控制器内部可用身体使用。

* * *

[**HERE**](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)是使用动态对象的实现

# javascript - 是否可以在离线 Web 应用程序中上传图像？

> ID：13041809
> 
> 赞同：3
> 
> 时间：2012-10-24T01:37:25.100
> 
> 标签：javascript, html, web-applications, file-upload, offline

我正在寻找的是一种在离线 Web 应用程序中“上传”图像的方法。我希望有一种方法可以将所选图像存储在缓存中，然后在他们再次访问 Internet 时上传。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T03:17:13.810

您可以使用 HTML5 FileSystem 来存储图像文件，它已在许多浏览器中实现，但尚未全部实现。然后您可以使用 HTTP POST 消息将图像文件上传到服务器。并且，通过 HTTP 上传时，将图像文件编码为 Base64 格式是安全的。

要检查 Internet 连接，您可以使用 XMLHTTPRequest。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T03:28:37.183

> 这样的事情可能吗？

# 是的

^(...对于小文件。)

[您可以使用HTML5 File API](http://dev.w3.org/2006/webapi/FileAPI/)加载文件数据，并通过 AJAX 将其发布到服务器。没有连接将返回一个 HTTP 状态代码，可用于触发某种存储机制。

`localStorage`有大约 5MB 的限制，这就是我说“小文件”的原因。

[Web SQL 数据库](http://www.w3.org/TR/webdatabase/)可能能够存储更多数据，但不再对其进行维护：

> 谨防。该规范不再处于积极维护中，Web 应用程序工作组也不打算进一步维护它。

# tl;博士：

如果您尝试缓存小图像或文本文件，可以将其存储在本地并轮询互联网连接。

如果您试图允许用户上传 Tolstoy，您可能应该让他们等到他们有一个有效的互联网连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T01:43:34.867

最接近实现此效果的方式是，Web 应用程序提供**了某种客户端程序**，该客户端程序安装并运行在客户端上。

然后，此本地客户端将考虑上传特定文件的任何请求（无论是将这些文件复制到缓存还是简单地记下文件位置以供将来访问），然后继续尝试有效地将每个此类文件发送到服务器，当它变成重新可用。

这只是一个技巧，因为当服务器**处于脱机状态时**（从客户端的角度来看）**绝对不可能与服务器交互**。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T01:40:17.600

您可以尝试使用 Java 小程序。它可以在客户端运行。因此，您可以编写一些代码，以便在稍后上传图像之前将图像存储在某处。**

# php - 头像生成器的实时视图

> ID：13041813
> 
> 赞同：1
> 
> 时间：2012-10-24T01:37:45.317
> 
> 标签：php, javascript, ajax

我找到了一个教程，展示了如何生成头像，然后我用它做了一个简单的事情，你有下拉框并选择你想要的头像功能，点击提交，然后它会生成并显示你的头像。这一切都是使用 PHP 完成的。在 Photoshop 中，我（很快）设计了我希望它的外观，但我不知道实现这一目标的最佳方法。我希望它显示实时更新，因此它会在右侧显示您的头像，当您单击它时，它会更新图像。

这是我想要的外观：

[所需外观的图片 http://my.iheff.net/featuresselection.jpg](http://my.iheff.net/featuresselection.jpg)

我现在拥有的实时视图：

[这里](http://my.iheff.net/avatartest1.php)

这是我现在拥有的代码。

```
<?php
if (isset($_REQUEST['submit'])) {
//Custom avatar with php
//Author: Joshua Bolduc
//Website: http://www.bolducpress.com
//Disclaimer: This document may be freely used and distributed
//Date: 7/23/2007

class avatar
{
var $filename;              //the filename of the image
var $width  = 100;          //the final width of your icon
var $height = 100;          //the final height of the icon
var $parts  = array();      //the different images that will be superimposed on top of each other
/**
*   SET WIDTH
* This function sets the final width of our avatar icon. Because we want the image to      be 
* proportional we don't need to set the height (as it will distort the image)
* The height will automatically be computed. 
*
* @param Integer $width
*/
function set_width($width)
{
    //setting the width
    $this->width  = $width; 
}
/**
*   SET FILENAME
* This sets the final filename of our icon. We set this variable if we want 
* to save the icon to the hard drive. 
*
* @param String $filename
*/
function set_filename($filename)
{
    $this->filename = $filename; 
}

/**
* SET BACKGROUND
* From this function we can add one of two types of backgrounds
* either an image or a solid color. 
*
* @param String $background
*/
function set_background($background)
{ 
    $this->background_source = $background; 
}

/**
*   ADD LAYER
* This is the meat and potatoes of this class (And it's so small!)
* This function let's us add images to our final composition 
*
* @param String $filename
*/
function add_layer($filename)
{
    //by using the syntax $this->parts[] we are automatically incrementing the array pointer by 1
    //There is no need to do $this->parts[$index] = $filename; 
    // $index = $index + 1; 
    $this->parts[] = $filename; 
}
/**
*   BUILD BACKGROUND
*  This function takes our background information and compiles it
*/
function build_background()
{
    //----------------------------------------
    // Getting the height
    //----------------------------------------
    //grabbing the first image in the array
    $first_image = $this->parts[0];

    //getting the width and height of that image
    list($width, $height) = getimagesize($first_image);

    //finding the height of the final image (from a simple proportion equation) 
    $this->height = ($this->width/$width)*$height; 

    //----------------------------------------
    // Compiling the background
    //----------------------------------------
    //the background canvas, it will be the same width and height
    $this->background = imagecreatetruecolor($this->width, $this->height);
    //----------------------------------------
    // Adding a background color
    // I'm going to be sending hex color values (#FFFFFF), 
    //----------------------------------------  
    //checking to make sure it's a color 
    if(substr_count($this->background_source, "#")>0)
    {
        //converting the 16 digit hex value to the standard 10 digit value
        $int = hexdec(str_replace("#", "", $this->background_source));

        //getting rgb color
        $background_color = imagecolorallocate ($this->background, 0xFF & ($int >> 0x10), 0xFF & ($int >> 0x8), 0xFF & $int);

        //filling the background image with that color 
        imagefill($this->background, 0,0,$background_color); 

    //----------------------------------------
    // Adding a background image
    // If $background is not a color, assume that it's an image
    //----------------------------------------
    }else{
        //getting the width and height of the image 
        list($bg_w, $bg_h) = getimagesize($this->background_source); 

        // Make sure that the background image is a png as well. 
        $img = imagecreatefrompng($this->background_source); 

        //This function copies and resizes the  image onto the background canvas
        imagecopyresampled($this->background, $img, 0,0,0,0,$this->width, $this->height, $bg_w, $bg_h); 
    }
}
/**
 * Build Composition
 * This function compiles all the information and builds the image
*/
function build_composition()
{
    //----------------------------------------
    // The Canvas
    // Creating the canvas for the final image, by default the canvas is black
    //----------------------------------------
    $this->canvas = imagecreatetruecolor($this->width, $this->height); 

    //----------------------------------------
    // Adding the background
    // If the background is set, use it gosh darnit 
    //----------------------------------------
    if($this->background)
    {
        imagecopyresampled($this->canvas, $this->background, 0,0,0,0,$this->width, $this->height, $this->width, $this->height); 
    }

    //----------------------------------------
    // Adding the body parts
    // Here we go, the best part
    //----------------------------------------
    //looping through the array of parts
    for($i=0; $i<count($this->parts); $i++)
    {
        //getting the width and height of the body part image, (should be the same size as the canvas)
        list($part_w, $part_h) = getimagesize($this->parts[$i]); 

        //storing that image into memory (make sure it's a png image) 
        $body_part = imagecreatefrompng($this->parts[$i]); 

        //making sure that alpha blending is enabled
        imageAlphaBlending($body_part, true);

        //making sure to preserve the alpha info
        imageSaveAlpha($body_part, true);

        //finally, putting that image on top of our canvas  
        imagecopyresampled($this->canvas, $body_part, 0,0,0,0,$this->width, $this->height, $part_w, $part_h);  
    }
}
/**
*   OUTPUT
*  This function checks to see if we're going to ouput to the header or to a file   
*/
function output()
{
    // If the filename is set, save it to a file 
    if(!empty($this->filename))
    {
        //notice that this function has the added $this->filename value (by setting this you are saving it to the hard drive)
        imagejpeg($this->canvas, $this->filename,100); 

    //Otherwise output to the header
    }else{
        //before you can output to the header, you must tell the browser to interpret this document 
        //as an image (specifically a jpeg image) 
        header("content-type: image/jpeg"); 

        imagejpeg($this->canvas, "member/1637/pic1.jpg");

        //Output, notice that I ommitted $this->filename
        imagejpeg($this->canvas, "", 100); 
    }
    //Removes the image from the buffer and frees up memory
    imagedestroy($this->canvas);    
}
/**
* BUILD
* The final function, this builds the image and outputs it
*/
function build()
{
    //Builds the background
    $this->build_background(); 

    //builds the image
    $this->build_composition(); 

    //outputs the image
    $this->output(); 
}
}

$avatar = new avatar;
$base = "base";
$bgcolor = $_POST['bgcolor'];
$hand = $_POST['hand'];
$headgear = $_POST['headgear'];
$leggear = $_POST['leggear'];
$face = $_POST['face'];

//setting the width of your final image (the image will
//resize themselves dynamically)
$avatar->set_width(200);

//setting your background color to black
$avatar->set_background("#$bgcolor");

//you can also send it an image
//$avatar->set_background("my_background_image.png");

//ah hah! adding your body parts, think of it like layers
//in photoshop in reverse order.
$avatar->add_layer("base.png");
if($hand != "none"){
$avatar->add_layer("$hand.png");
}
if($headgear != "none"){
$avatar->add_layer("$headgear.png");
}
if($leggear != "none"){
$avatar->add_layer("$leggear.png");
}
if($face != "none"){
$avatar->add_layer("$face.png"); 
}
$avatar->build(); 
}
?>
<form method="post" action="avatartest1.php" name="myform" id="myform"> 
```

```
 <tr>
      <td align="right">
 Background Color          </td>
      <td>
        <div id='myform_bgcolor_errorloc' class="error_strings"></div>

 <select name="bgcolor">
  <option value="000000">Black</option>

  <option value="FFFFFF">White</option>
  <option value="FF7F50">Coral</option>

  <option value="DC143C">Crimson</option>
  <option value="E9967A">Salmon</option>

  <option value="FFB6C1">Pink</option>
  <option value="BA55D3">Orchid</option>

  <option value="008080">Teal</option>
  </select>          </td>
  </tr>

    <tr>
      <td align="right">
 Hand          </td>
      <td>
        <div id='myform_hand_errorloc' class="error_strings"></div>

 <select name="hand">
  <option value="beer">Beer</option>

  <option value="martini">Martini</option>
  <option value="pickle">Pickle</option>
  </select>          </td>
  </tr>
    <tr>
      <td align="right">
 Head Gear          </td>
      <td>
        <div id='myform_headgear_errorloc' class="error_strings"></div>

 <select name="headgear">

  <option value="hat">Hat</option>

  <option value="none">None</option>  
  </select>          </td>
  </tr>

       <tr>
      <td align="right">
 Leg Gear          </td>
      <td>
        <div id='myform_leggear_errorloc' class="error_strings"></div>

 <select name="leggear">
  <option value="shorts">Shorts</option>

  <option value="none">None</option>

  </select>          </td>
  </tr>

           <tr>
      <td align="right">
 Face          </td>
      <td>
        <div id='myform_face_errorloc' class="error_strings"></div>

 <select name="face">
  <option value="mustache">Mustache</option>

  <option value="none">None</option>

  </select>          </td>
  </tr>

<tr>
      <td align="right"></td>
      <td>
        <input type="submit" name="submit" value="Submit" />
      </td>
</tr>
</table>
</form><script language="JavaScript" type="text/javascript"
xml:space="preserve">//<![CDATA[
//You should create the validator only after the definition of the HTML form
var frmvalidator  = new Validator("myform");
frmvalidator.EnableOnPageErrorDisplay();
frmvalidator.EnableMsgsTogether();

frmvalidator.addValidation("hand","req","Choose what your avatar holds");
frmvalidator.addValidation("headgear","req","Choose head gear");
frmvalidator.addValidation("leggear","req","Choose leg gear");
frmvalidator.addValidation("face","req","Choose face stuff");

//]]></script> 
```

简而言之，从我的代码到我想要的输出的最佳方式是什么。用户单击显示的功能之一的输出，一旦单击，它就会更新完整图像。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:14:58.917

设置您的 PHP 脚本以构建图像并返回它（即，php 应该不返回 html，只返回图像/png 或图像/jpeg 或其他）。您已经定义了所有函数，因此应该非常简单。

设置 HTML 表单以选择要应用的图层 - 让它漂亮是您自己的特权。

（这是错误的，请参阅下面的编辑）当您的表单中触发 onchange 事件时，使用 AJAX 从 html 表单调用 php 脚本。对 XMLHTTPRequest 做一些研究，了解这一步背后的原理。

发出请求后，您可以使用 javascript 将图像放入页面上的元素中。

如果这太高了，而且在我完成工作时没有其他人已经这样做了，我很乐意举一个更深入的例子。

编辑：好的，所以当我第一次读到这篇文章时，我发现我脑子里放了个屁，因为我以前尝试过这样做，但我已经知道它不起作用。为了通过 AJAX 检索图像，您需要将其实际保存在 php 中的服务器上，并通过 ajax 传回文件名，表单上的 javascript 将使用该文件名来提供图像的来源。这是一个漫长的过程，我很抱歉，但我不会经历它，你可以自己研究那个。

好消息是有一种非常、非常、非常、非常、非常简单的方法可以做到这一点。

1：将以下功能添加到表单页面-

```
function updateImage() {
    var bgcolor=document.getElementById("bgcolor").value,
        face=document.getElementById("face").value,
        hand=document.getElementById("hand").value,
        headgear=document.getElementById("headgear").value,
        leggear=document.getElementById("leggear").value;
    var path="http://my.iheff.net/avatartest1.php?bgcolor=" + encodeURIComponent(bgcolor) 
        + "&face=" + encodeURIComponent(face) 
        + "&hand=" + encodeURIComponent(hand) 
        + "&headgear=" + encodeURIComponent(headgear) 
        + "&leggear=" + encodeURIComponent(leggear) 
        + "&submit=Submit";
    document.getElementById("resultImage").src = path;  
} 
```

2：将图像添加到表单，并将 id 属性设置为“resultImage”。图像 src 应该指向图像，因为它会在进行任何更改之前出现（默认背景，无覆盖）

3：修改您的 php 代码以从 $_GET[] 而不是 $_POST[] 获取数据（在下面的部分中，将 POST 替换为 GET）

```
$bgcolor = $_POST['bgcolor'];
$hand = $_POST['hand'];
$headgear = $_POST['headgear'];
$leggear = $_POST['leggear'];
$face = $_POST['face']; 
```

4：对于表单中的每个选择框，添加 onchange="updateImage()"

# java - java.sql.SQLSyntaxErrorException：语法错误：遇到“（”在行

> ID：13041817
> 
> 赞同：4
> 
> 时间：2012-10-24T01:38:51.027
> 
> 标签：java, sql, prepared-statement, sqlexception

我正在执行以下操作：

```
private void createTable() {
    try {       
        PreparedStatement psCreateTable = con.prepareStatement("CREATE TABLE     COMPANIES(" +
                "name VARCHAR(50), " +
                "location VARCHAR(50), " +
                "address VARCHAR(50), " +
                "website VARCHAR(50), " +
                "pit VARCHAR(50), " +
                "asset_class VARCHAR(50), " +
                "telephone INTEGER, " +
                "shares INTEGER, " +
                "value DOUBLE(,2) UNSIGNED)");
        psCreateTable.execute();
    } catch (SQLException e) {
        System.out.println("already exists");
        e.printStackTrace();
        ; //bestaat al
    }
} 
```

我收到以下错误：java.sql.SQLSyntaxErrorException：语法错误：在第 1 行第 195 列遇到“（”。

不太确定现在该做什么，因为 SQL 查询对我来说似乎有效并重新检查了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T01:41:50.827

`(,2)`在 double 数据类型中删除。

```
CREATE Table Companies
(
    ....,
    value DOUBLE UNSIGNED
) 
```

[见示范](http://sqlfiddle.com/#!2/723e1/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:41:31.573

您的 SQL 查询有错误：`"value DOUBLE(,2) UNSIGNED)");`

将您的 PreparedStatement 更改为以下内容：

```
PreparedStatement psCreateTable = con.prepareStatement("CREATE TABLE COMPANIES(" +
                "name VARCHAR(50), " +
                "location VARCHAR(50), " +
                "address VARCHAR(50), " +
                "website VARCHAR(50), " +
                "pit VARCHAR(50), " +
                "asset_class VARCHAR(50), " +
                "telephone INTEGER, " +
                "shares INTEGER, " +
                "value DOUBLE UNSIGNED)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T01:44:59.887

```
DOUBLE(,2) 
```

这是错误的。

你可以试试

```
DOUBLE(5,2) 
```

# jquery - 如果 div 已经淡出，则 JQuery 使 div 淡入

> ID：13041819
> 
> 赞同：1
> 
> 时间：2012-10-24T01:39:03.043
> 
> 标签：jquery

```
$('#slider').hover(function()
{
    $('#LayerHover').fadeTo(400, 0.4);
}, function()
{
    $('#LayerHover').fadeOut(400);
}); 
```

这个功能就像你期望代码能够工作一样，但是当你将鼠标悬停在它上面并以快的速度移出和移入等时，淡出会变得有问题，因为它仍在完成之前的淡入/淡出调用。如何取消“旧电话”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:43:30.853

您可以使用 .stop() 取消排队的动画。例如：

```
$('#slider').hover(function(){
    $('#LayerHover').stop(true,true).fadeTo(400, 0.4);
}, function(){
    $('#LayerHover').stop(true,true).fadeOut(400);
}); 
```

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# c++ - 分段错误 - 奇怪的调试语句

> ID：13041820
> 
> 赞同：0
> 
> 时间：2012-10-24T01:39:04.683
> 
> 标签：c++, singleton, segmentation-fault, stack-trace

我正在尝试使用函数跟踪构建自己的异常类（我想知道调用异常的所有函数的文件和行号，以及它们函数被调用的总次数）

功能跟踪似乎在构建它时起作用，但是当尝试正确使用它时，我被分段错误所困扰。我已经追踪了其中的一些（愚蠢的错误，比如忘记返回任何东西或丢弃 & 号），但是这个让我很生气——而且我还无法弄清楚我是如何得到我看到的调试语句的。

我希望我的代码需要大量改进（对于任何关于我绝对不应该做的事情的建议或严厉评论，我将不胜感激），但谁能帮我弄清楚这里发生了什么。我试图利用我的 FunctionTrace 类，并在我认为有用的地方抛出 cout 语句，但我无处可去。

我包括一个剥离的 int main()、FunctionTrace.{c,h}pp、MathsException.hpp（还没有 .cpp）和 gdb 的输出（仍在学习使用它）

主文件

```
#include <iostream>
#include "FunctionTrace.hpp"
#include "MathsException.hpp"

using namespace std;

int main(int argc, char* argv[])
{
    LOG_FUNC_CALL
    try
    {
        std::string test = "";
        MathsException oExc(test);
        throw oExc;
    }
    catch(MathsException& iException)
    {
        iException.what();
    }
    return 0;
} 
```

函数跟踪.cpp

```
#include "FunctionTrace.hpp"
#include <vector>
#include <string>
#include <iostream>
#include <stdio.h>

static int countDebugStatic = 0; //TODO delete me!

int& FunctionCallDetails::getLine(){return lineNumber;}

const char* FunctionCallDetails::getFile(){return file;}

int& FunctionCallDetails::getNoOfTimesCalled(){return noOfTimesCalled;}

FunctionTrace::FunctionTrace(const int iLineNumber, const char* iFile)
{
    FunctionTraceManager& fnTraceMgr = FunctionTraceManager::getInstance();

    int oTimesCalled = ++fnTraceMgr.getAllTimesCalled()[std::make_pair(iLineNumber, iFile)];
    fnTraceMgr.getAllFunctionCalls().push_back(FunctionCallDetails(iLineNumber, iFile, oTimesCalled));
}

std::vector<std::string>& FunctionTraceManager::gatherFunctionCalls()
{
    FunctionTraceManager& fnTraceMgr = FunctionTraceManager::getInstance();
    std::vector<FunctionCallDetails>::iterator fnCallsIter =  fnTraceMgr.getAllFunctionCalls().begin();
    std::vector<std::string> oFnDetails;
    for(; fnCallsIter != fnTraceMgr.getAllFunctionCalls().end(); ++fnCallsIter)
    {
        countDebugStatic++;
        std::cout << "count: " << countDebugStatic << "\n";
        std::string fnDetail = "Function at line: ";
        char lineCalled[11]; //I'd never live long enough to generate this many lines of code in one file
        snprintf(lineCalled, 10, "%d", fnCallsIter->getLine());
        fnDetail += lineCalled;
        fnDetail += ", in file: ";
        fnDetail += fnCallsIter->getFile();
        fnDetail += " called: ";
        char noOfTimesCalled[11]; //log(2^32)/log(10) = 9.~~ (need a null char) 
        snprintf(noOfTimesCalled, 10, "%d", fnCallsIter->getNoOfTimesCalled());
        fnDetail += noOfTimesCalled;
        fnDetail += " times.";
        oFnDetails.push_back(fnDetail);
        std::cout << "fnDetail: " << fnDetail << "\n";
    }
    if(oFnDetails.size() > 0)
    {
        return oFnDetails;
    }
    else
    {
        oFnDetails.push_back("");
        return oFnDetails;
    }
}

FunctionTrace::~FunctionTrace()
{
    FunctionTraceManager& fnTraceMgr = FunctionTraceManager::getInstance();
    fnTraceMgr.getAllFunctionCalls().pop_back();
} 
```

函数跟踪.hpp

```
#ifndef FUNCTION_TRACE_HPP
#define FUNCTION_TRACE_HPP

#include <vector>
#include <string>
#include <map>
#include <iostream>

class FunctionCallDetails
{
    int lineNumber;
    const char* file;
    int noOfTimesCalled;
    public:
        FunctionCallDetails(const int iLineNumber, const char* iFile, int iTimesCalled): lineNumber(iLineNumber), file(iFile), noOfTimesCalled(iTimesCalled){};
        int& getLine();
        const char* getFile();
        int& getNoOfTimesCalled();
};

class FunctionTraceManager
{
    //singleton
    std::vector<FunctionCallDetails> functionCalls;
    std::map<std::pair<const int,const char*>,int> timesCalled;

    FunctionTraceManager(){}
    FunctionTraceManager(FunctionTraceManager const&){}
    ~FunctionTraceManager(){}
    void operator = (FunctionTraceManager const&){}

    public:
        //this method will be the only way to get a FnTraceMgr object, and once statically created, further calls will retrieve the first (and only) FnTraceMgr
        //Object created.
        static FunctionTraceManager& getInstance()
        {
            static FunctionTraceManager fnTraceMgrInstance;
            return fnTraceMgrInstance;
        }
        std::vector<FunctionCallDetails>& getAllFunctionCalls()
        std::map<std::pair<const int,const char*>,int>& getAllTimesCalled()
        {
            if(functionCalls.size() > 0)
            {
                return functionCalls;
            }
            else
            {
                functionCalls.push_back(FunctionCallDetails(-1,"",-1));
                return functionCalls;
            }
        }
        std::map<std::pair<const int,const char*>,int>& getAllTimesCalled(){return timesCalled;}
        std::vector<std::string>& gatherFunctionCalls();
};
class FunctionTrace
{
    public:
        FunctionTrace(const int iLineNumber, const char* iFile);
        ~FunctionTrace();
};

#define LOG_FUNC_CALL FunctionTrace functionTrace(__LINE__,__FILE__);
#endif 
```

数学异常.hpp

```
#ifndef MATHS_EXCEPTION_HPP
#define MATHS_EXCEPTION_HPP
#include <exception>
#include "FunctionTrace.hpp"

#include <iostream>
class MathsException : public std::exception
{
    std::string errMsg;
    public:
        MathsException() throw() { LOG_FUNC_CALL };
        MathsException(const std::string iMsg): errMsg(iMsg){ LOG_FUNC_CALL }
        MathsException(const char* iMsg): errMsg(iMsg){ LOG_FUNC_CALL }
        std::string appendFunctionTracing()
        {
            LOG_FUNC_CALL
            std::string oStr = "";
            FunctionTraceManager& fnTraceMgr = FunctionTraceManager::getInstance();

            std::cout << "Why am I not seeing this at all !???";
            std::cout << "Why am I only seeing this once !???  fnTraceMgr.gatherFunctionCalls().size(): " << fnTraceMgr.gatherFunctionCalls().size() << "\n";
            std::vector<std::string>::iterator fnCallsIter = fnTraceMgr.gatherFunctionCalls().begin();
            for(; fnCallsIter != fnTraceMgr.gatherFunctionCalls().end(); ++fnCallsIter)
            {
                oStr += *fnCallsIter;
                oStr += "\n";
            }
            oStr += errMsg;
            return oStr;
        }
        void what()
        {
            LOG_FUNC_CALL
            std::cout << appendFunctionTracing();
        }

        ~MathsException() throw(){LOG_FUNC_CALL}
};

#endif 
```

gdb 输出

```
greg@greg-Aspire-5742:~/Documents/MMath/c++projects/2012_revision/Solver$ gdb Solver
GNU gdb (Ubuntu/Linaro 7.3-0ubuntu2) 7.3-2011.08
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-linux-gnu".
For bug reporting instructions, please see:
<http://bugs.launchpad.net/gdb-linaro/>...
Reading symbols from /home/greg/Documents/MMath/c++projects/2012_revision/Solver/Solver...done.
(gdb) r
Starting program: /home/greg/Documents/MMath/c++projects/2012_revision/Solver/Solver 
Why am I not seeing this at all !???count: 1
fnDetail: Function at line: -1, in file:  called: -1 times.
count: 2
fnDetail: Function at line: 10, in file: main.cpp called: 1 times.
count: 3
fnDetail: Function at line: 35, in file: MathsException.hpp called: 1 times.
count: 4
fnDetail: Function at line: 18, in file: MathsException.hpp called: 1 times.
Why am I only seeing this once !???  fnTraceMgr.gatherFunctionCalls().size(): 4
count: 5
fnDetail: Function at line: -1, in file:  called: -1 times.
count: 6
fnDetail: Function at line: 10, in file: main.cpp called: 1 times.
count: 7
fnDetail: Function at line: 35, in file: MathsException.hpp called: 1 times.
count: 8
fnDetail: Function at line: 18, in file: MathsException.hpp called: 1 times.
count: 9
fnDetail: Function at line: -1, in file:  called: -1 times.
count: 10
fnDetail: Function at line: 10, in file: main.cpp called: 1 times.
count: 11
fnDetail: Function at line: 35, in file: MathsException.hpp called: 1 times.
count: 12
fnDetail: Function at line: 18, in file: MathsException.hpp called: 1 times.

Program received signal SIGSEGV, Segmentation fault.
0xb7f6e478 in std::string::append(std::string const&) () from /usr/lib/i386-linux-gnu/libstdc++.so.6
(gdb) info locals
No symbol table info available.
(gdb) bt
#0  0xb7f6e478 in std::string::append(std::string const&) () from /usr/lib/i386-linux-gnu/libstdc++.so.6
#1  0x0804b564 in operator+= (__str=..., this=0xbffff138) at /usr/include/c++/4.6/bits/basic_string.h:925
#2  MathsException::appendFunctionTracing (this=0x80530d8) at MathsException.hpp:27
#3  0x0804989b in what (this=0x80530d8) at MathsException.hpp:36
#4  main (argc=Cannot access memory at address 0x1
) at main.cpp:19
(gdb) info locals
No symbol table info available.
(gdb) up
#1  0x0804b564 in operator+= (__str=..., this=0xbffff138) at /usr/include/c++/4.6/bits/basic_string.h:925
925       { return this->append(__str); }
(gdb) info locals
No locals.
(gdb) up
#2  MathsException::appendFunctionTracing (this=0x80530d8) at MathsException.hpp:27
27              oStr += *fnCallsIter;
(gdb) info locals
functionTrace = {<No data fields>}
oStr = {static npos = <optimized out>, _M_dataplus = {<std::allocator<char>> = {<__gnu_cxx::new_allocator<char>> = {<No data fields>}, <No data fields>}, _M_p = 0x80523ac ""}}
fnCallsIter = {_M_current = 0x8053310}
(gdb) up
#3  0x0804989b in what (this=0x80530d8) at MathsException.hpp:36
36          std::cout << appendFunctionTracing();
(gdb) info locals
functionTrace = {<No data fields>}
(gdb) up
#4  main (argc=Cannot access memory at address 0x1
) at main.cpp:19
19      iException.what();
(gdb) info locals
iException = @0x80530d8
functionTrace = {<No data fields>}
(gdb) up
Initial frame selected; you cannot go up. 
```

**编辑：**在我错过的 FunctionTrace.hpp 的最后几行中添加

Const'd 我能看到的所有参数，看看编译器是否会帮助我 - 仍然没有用

在我返回可能为空的对象之前添加了一些 ifs - 我仍然遇到相同的段错误，但 gdb 输出不同（尽管仍然很奇怪）

**进展：** 改变电话喜欢

```
std::vector<FunctionCallDetails>::iterator fnCallsIter =  fnTraceMgr.getAllFunctionCalls().begin(); 
```

至

```
std::vector<FunctionCallDetails> fnCalls =  fnTraceMgr.getAllFunctionCalls();
std::vector<FunctionCallDetails>::iterator fnCallsIter =  fnCalls.begin(); 
```

（并更新 for 循环）已消除 seg 错误；不知何故，我的迭代器一直指向某个愚蠢的地方

并撤消最后一步我没有遇到段错误（以前我做过）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:49:23.150

您正在返回对`FunctionTraceManager::gatherFunctionCalls`.

引用很像指针，返回引用基本上返回变量的地址。但是，由于函数返回时函数中的局部变量超出范围，因此无法引用这些变量（通过指针或引用）。这是*未定义的行为*，有时可能会起作用，但经常会发生奇怪的事情，例如程序崩溃。

# azure - 如何在windows azure表的同一张表中存储具有相同partitionkey的不同类型？

> ID：13041824
> 
> 赞同：0
> 
> 时间：2012-10-24T01:39:19.577
> 
> 标签：azure, azure-table-storage, azure-storage

我有两个相关的实体。

水果.苹果汽车.宝马

这些实体属于同一个用户，我想使用 userId 作为两个实体的 partitionKey。

我将它们存储在同一个分区中，但是当我使用 CreateQuery 传递 partitionKey 时，查询返回具有该分区的所有实体，而不仅仅是苹果。

这是抛出异常：

“当前值 'Fruits.Apple' 类型与预期的 'Cars.Bmw' 类型不兼容。”

是否有按类型过滤的乳清以避免此类错误？

谢谢，

穆里洛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T03:47:16.990

添加一个固定长度的“类型”指示符作为 Row Key 前缀，并将 PartitionKey 和 RowKey 前缀过滤为范围（>= 前缀 && < 前缀+）将允许您在一个表中存储多个实体并使用相同的分区键.

# python - 如何构建 USB 驱动程序和数据提取器（磁卡读卡器）？

> ID：13041829
> 
> 赞同：0
> 
> 时间：2012-10-24T01:41:03.383
> 
> 标签：python, ruby, usb, drivers

我有[这个磁卡读卡器](https://dx.com/p/usb-universal-magnetic-stripe-credit-debit-card-bidirectional-track-2-swipe-reader-75-210bpi-25053)（通用）。说明书是中文的，看不懂。我有两台 Linux 机器，如果你通过 USB 插入它，它就会开机，如果你通过一张卡（打开一个文本编辑器），你会得到一个有点像这样的代码/字符串：

```
1303031110012015¿999999999999999 
```

显然，某处有卡信息（那是电影院附属卡），我想从该号码中提取信息（例如所有者的姓名和其他数据）。如果我运行`lsusb`，我会得到如下信息：

### 阅读器未插电

```
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 04f2:b293 Chicony Electronics Co., Ltd 
Bus 007 Device 003: ID 0cf3:3005 Atheros Communications, Inc. AR3011 Bluetooth 
```

### 读卡器已插入

```
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 04f2:b293 Chicony Electronics Co., Ltd 
Bus 007 Device 003: ID 0cf3:3005 Atheros Communications, Inc. AR3011 Bluetooth
Bus 005 Device 005: ID 05fe:1010 Chic Technology Corp. Optical Wireless 
```

我知道一些 Python 和 Ruby，但不知道从哪里开始。如果有人能指出我正确的方向，那就太好了。你能？（如果有一个适用于 Windows、Linux 和 Mac 的跨平台驱动程序，那就太好了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:04:44.530

您已经有了驱动程序，因为阅读器是伪装成键盘的 HID 设备。卡上的数据正是你已经发布的。您不会从中提取名称或任何其他信息；它只是一个数字——很可能是用于在商店数据库中查找其他信息的 ID，而您无法访问这些信息。

# opengl - Texture的内部格式

> ID：13041830
> 
> 赞同：2
> 
> 时间：2012-10-24T01:41:05.790
> 
> 标签：opengl, graphics

看下面的OpenGL函数：

```
void glTexImage2D(GLenum    target,
                  GLint     level,
                  GLint     internalFormat,
                  GLsizei   width,
                  GLsizei   height,
                  GLint     border,
                  GLenum    format,
                  GLenum    type,
                  const GLvoid * data); 
```

我知道参数格式和类型描述了图像数据的格式和类型，但我不了解参数**internalFormat**。我应该如何在我的应用程序中设置它的值？

例如，我创建这样的纹理：

```
glTexImage2D(GL_TEXTURE_2D,0,GL_LUMINANCE8,size,size,0,GL_LUMINANCE,GL_UNSIGNED_BYTE,buffer); 
```

当我在我的 GLSL 着色器中获取纹理时，我得到的值似乎在 [0,1] 之间。为什么？不应该在 [0,255] 之间吗？

我的着色器代码的一部分是：

```
vec = EntryPoint + delta_dir * texture(noiseTex,EntryPoint.xy * 32).x; 
```

我的 C++ 代码的一部分：

```
for (int i = 0;i < temp;++i)
    {
        buffer[i] = 255.0 * rand() / (float)RAND_MAX;
    }
    glGenTextures(1,&noiseTex);
    glActiveTexture(GL_TEXTURE0 + activeTexUnit);
    glBindTexture(GL_TEXTURE_2D,noiseTex);
    glTexImage2D(GL_TEXTURE_2D,0,GL_LUMINANCE8,size,size,
                            0,GL_LUMINANCE,GL_UNSIGNED_BYTE,buffer);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T01:48:20.850

`format`和`type`参数描述了作为[像素传输操作](http://www.opengl.org/wiki/Pixel_Transfer)的一部分传递给 OpenGL的数据。`internalformat`描述*[纹理](http://www.opengl.org/wiki/Image_Format)*的格式。你告诉OpenGL你给它看起来像X，而OpenGL是将它存储在数据为Y的纹理中。这`internalformat`是“Y”。

内部`GL_LUMINANCE8`格式表示*标准化*的无符号整数格式。这意味着数据在概念上是浮点数，但作为一种压缩方式以标准化整数形式存储。

就此而言，`format`of`GL_LUMINANCE`表示您正在*传递*浮点数据或标准化整数数据（`type`表示它是标准化整数数据）。当然，由于没有`GL_LUMINANCE_INTEGER`（这就是您所说的要传递*整数*数据，以用于整数内部格式），因此您不能真正使用这样的亮度数据。

如果您确实需要纹理中的8 位无符号*整数*，请`GL_RED_INTEGER`用于格式和内部格式。请注意，整数纹理支持需要 OpenGL 3.x 类硬件。`GL_R8UI`

 *话虽如此，您***不能***使用`sampler2D`整数纹理。如果您使用的纹理使用无符号整数纹理格式，则***必须***使用`usampler2D`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:47:16.313

值如何在内部存储不一定与您在 GLSL 中如何访问它相关。在实践中使用标准化颜色值 (0-1) 要容易得多。您是否出于某种原因想要在 (0-255) 范围内操作像素着色器中的像素值？*

# iphone - 设置时间倒计时

> ID：13041835
> 
> 赞同：-2
> 
> 时间：2012-10-24T01:41:32.247
> 
> 标签：iphone, objective-c, sdk

我想设置时间倒计时，使用`NSTimer`从 20 分钟开始然后经过 19 分钟、18 分钟等（只有分钟而不是秒）这个经过的时间显示在文本文件中，请帮助。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T02:03:05.520

您将要创建一个如下所示的计时器：

```
NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:60 target: self selector:@selector(time:) userInfo: nil repeats: true];
//the timer takes seconds, so by feeding it 60, it will tick every minute 
```

然后你的`time:`函数必须如下所示：

```
- (void)time:(NSTimer *)timerObject{
    //do whatever needs to be done every minute, like updating your UI
    //and subtracting from your counter variable
} 
```

（您不必使用 timerObject）

# php - Geocore - TPL 和 PHP 文件 (Smarty)

> ID：13041842
> 
> 赞同：0
> 
> 时间：2012-10-24T01:42:38.407
> 
> 标签：php, smarty

我正在使用 Geocore 开发一个网站。

在为特定页面分配模板时，我们有一个 .tpl 文件。
这是为了将业务逻辑与模板（前端）分离，等等。

我已经掌握了如何使用 smarty 语法在 .tpl 文件中包含 php 变量的基本知识。问题是，如何分配 .php 文件以便可以在模板（.tpl）中读取变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T15:34:19.357

您不能将 PHP 文件“分配”给模板。这种关系反过来起作用：在给定的 PHP 文件中，您调用一个特定的模板来呈现其内容。`assign()`您可以通过 smarty's从使用它的 PHP 文件中将单个变量分配给该模板。

如果您需要在整个 PHP 文件和给定模板之间创建一个接口，最好的办法是根据[http://www.smarty.net/docs/en/plugins.tpl](http://www.smarty.net/docs/en/plugins.tpl)创建一个自定义 Smarty 插件。GeoCore 有几个内置插件可以帮助您入门：查看`/classes/geo_smarty_plugins/`目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:31:55.487

我猜你说的是在 geoCore 中已经存在的 .tpl 文件。一个特定的 .tpl 文件将被一个已经存在的 .php 文件调用。如果你需要将一个新的 smarty 变量传递给 .tpl 文件，你需要找出哪个 PHP 文件调用了 .tpl 文件，然后将新变量添加到那个特定的 PHP 文件中。

# ms-access - Microsoft Access 从字段中隐藏 0

> ID：13041843
> 
> 赞同：0
> 
> 时间：2012-10-24T01:42:43.217
> 
> 标签：ms-access, formatting

在 Access 报告中，我可以使用属性表中的文本框格式隐藏带有 0 的字段：

0;;"";

上面的代码将隐藏该列中所有字段的所有零。但是，如果不使用分号（实际上只使用单个字符），是否可以与上面的代码相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:29:37.783

您要查找的字符是哈希：#

阅读[格式属性 - 数字和货币数据类型](http://msdn.microsoft.com/en-us/library/office/aa159672%28v=office.10%29.aspx)以获取更多信息。大多数情况下，请查看 MSDN。办公室的文章似乎变得越来越糟。

# css - 固定内联元素的边框大小

> ID：13041855
> 
> 赞同：1
> 
> 时间：2012-10-24T01:44:15.393
> 
> 标签：css

我有一个清单，这样说：

家长甲

——孩子 1

--孩子2

父母蜂

父母抄送

——孩子 1

父母埃克特拉

我无法弄清楚如何在每个父元素周围创建一个边框（我不希望这个边框覆盖子元素），其中父元素周围的“框”的宽度是固定的。

更具体地说，我想知道如何给每个内联类元素（ul a）一个固定的宽度（这样边框将覆盖相同的区域）。我试过 [ul a. {显示：内联块；宽度：200px；边框：1px纯黑色；}]，但这不起作用。

现在，我需要为锚“a”本身设置样式的原因是因为我正在使用动态数据（更具体地说是 Wordpress 自定义菜单）。“a”是我唯一可以瞄准的东西。

![在此处输入图像描述](../Images/59a57ddb8d232a099b5fa00daa1894b2.png)

# django - 如何在 Django 项目/应用程序中组织和加载 CSS？

> ID：13041861
> 
> 赞同：4
> 
> 时间：2012-10-24T01:45:16.733
> 
> 标签：django, django-templates, django-views

我是 Django 的新手。我阅读了文档，我对媒体根文件和静态根文件以及我应该将我的 css 文件和我的 javascript 文件放在哪里感到困惑。

你们能指出我正确的方向吗？项目设置：

```
Project
     -myapp
         -model,view,and test
     -template
         - base.html
         - index.html
         - view1
         - view2
         - media
             - css
                 - style.css
                 - ie.css
             - js
             - img

     -setting.py
     -url.py 
```

我的 static_url、static_root、media_url、media_root、STATICFILES_DIRS 和 STATICFILES_FINDERS 应该是什么样子？

我目前如何加载我的 css 文件是通过 base.html 使用以下内容：

```
{% load staticfiles %}
<link rel="stylesheet" type="text/css" href="{% static user_stylesheet %}"type="text/css" media="screen"/> 
```

那么管理我的静态文件的最佳和最有效/正确的方法是什么？谢谢大家的帮助。我感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T05:09:18.697

静态文件是一个简单的过程：

*   Django 将搜索`static/`在任何应用程序中命名`INSTALLED_APPS`为静态文件的目录。如果您有未绑定到任何应用程序的文件，您可以将它们放在单独的目录中。这个目录应该被添加到`STATICFILES_DIRS`（一个元组）以便 django 知道它。在你的情况下，你应该有`STATICFILES_DIRS = ('/home/user/Project/template/media',)`

*   添加`django.contrib.staticfiles`到您的`INSTALLED_APPS`

现在，如果您正在使用 进行测试`runserver`，请打开`urls.py`并添加`from django.contrib.staticfiles.urls import staticfiles_urlpatterns`到顶部，在定义完所有 URL 之后，在文件末尾添加`urlpatterns += staticfiles_urlpatterns()`

您已经有了访问问题中静态文件的正确方法。另一种方法是使用`{{ STATIC_URL }}`，并确保您发送回复时使用`RequestContext`. 如果您使用基于类的视图，则无需更改任何内容。对于您的其他普通视图方法，只需使用[`render`快捷方式](http://django.me/render).

* * *

`STATIC_URL`并`STATIC_ROOT`在您部署时派上用场。

*   `STATIC_URL`是您的 Web 服务器已配置的 URL 前缀，用于指向系统中包含您的静态文件的位置。这是一个*url 组件*，*必须以斜杠结尾*。例如`/static/`

*   `STATIC_ROOT`这是系统上目录的路径。当你准备好部署时，运行`collectstatic`命令，django 会找到你所有的静态文件并将它们转储到`STATIC_ROOT`. 然后您可以获取此目录，将其放在您`DOCUMENT_ROOT`的 Web 服务器配置的文件夹中。然后，将`/static/`URL 指向此文件夹。例子是`STATIC_ROOT = /home/user/project/www/`

如果 Apache 配置了`DOCUMENT_ROOT`of `/var/www/`，并且您的`STATIC_URL`设置是`/static/`; 运行后`collectstatic`，将文件夹中的内容移动`/home/user/project/www/`到`/var/www/static/`.

* * *

*   `STATICFILES_FINDERS`. 这个设置列出了 django 在你运行时可以用来搜索你的静态文件的方法，`collectstatic`你通常根本不修改它。

* * *

*   `MEDIA_ROOT`, `MEDIA_URL`. **这些设置控制文件系统位置，以及使用 django 上传**的任何文件的 URL 前缀；这些***不能与 相同`STATICFILES_DIRS`***。您需要手动处理，因为`collectstatic`不会触及这些位置。如果您在开发中测试文件上传，您可以使用[`django.views.static.serve()`](https://docs.djangoproject.com/en/dev/howto/static-files/#django.views.static.serve)从`MEDIA*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:46:31.767

我建议您将所有 js 和 css 文件保存在应用程序文件夹之外的某个名为“static”的文件夹中（这就是 django 推荐的方式）例如，如果您将其保存在 /var/www/static/ 下，那么，在这种情况下，这就是您的属性的样子： STATIC_DIR = "/var/www/static/" STATIC_URL = "/static/" （可以是任何东西） STATICFILES_FINDERS = ('django.contrib.staticfiles.finders.FileSystemFinder', )

在模板中，您可以使用模板标签 {{STATIC_URL}} 引用静态文件夹，并将路径的其余部分附加到静态文件夹中的文件。注意，要使用 {{STATIC_URL}} 模板标签，您需要从视图代码中传递 context_instance。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T04:47:35.210

媒体服务是 Django 是一个“东西”。

您可以在此处查看文档的链接： [https ://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

但神奇的一点如下**如果这不是生产中**您可能需要将以下内容添加到您的底部`urls.py`：

```
from django.conf import settings

# ... the rest of your URLconf goes here ...

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

对于生产服务器，您通过您的网络服务器（apache 或其他）提供媒体老派风格，使用相同的域但实际上完全独立于您的 Django/Python 站点。

# api - Foursquare API - 如何回复用户关于他们的签到？

> ID：13041864
> 
> 赞同：1
> 
> 时间：2012-10-24T01:45:58.177
> 
> 标签：api, foursquare, checkin, reply

我们正在尝试实现回复功能： [https ://developer.foursquare.com/docs/checkins/reply](https://developer.foursquare.com/docs/checkins/reply)

当我们执行下面的代码时，我们收到“HTTP Error 400: Bad Request”。我已验证 checkinId 和 oauth 令牌是有效的。（我刚刚从foursquare 的测试控制台发送到我们服务器的'checkin' 数据结构中提取了值）。

```
checkinId="508XXXXXXXXXXXXXXXXXXX"
oauth="123456789877655ADGHJETJNKK"
data = {"CHECKIN_ID":checkinId,
        "text":"Hello World!",
        "url":"https://ourwebsite.com",
        "contentId":"12345",
   }

postUrl = "https://api.foursquare.com/v2/checkins/"+str(checkinId)+"/reply?oauth_token="+oauth

data = urllib.urlencode(data)
req = urllib2.Request(url=postUrl,data=data)
resp = urllib2.urlopen(req)
print resp.read() 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:58:26.213

我得到了那个错误。

我的问题的解决方法是包含这样的 HTTP 标头内容类型：`Content-Type: application/x-www-form-urlencoded`

之后，我使用了这样的普通帖子数据：

text="t"&url=xxx&v=20130224

我注意到版本和 url 不能被引用，并且 url 需要进行 HTML 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:27:21.673

尝试将 oauth_token 包含在您的数据字典中，而不是直接包含在 url 中。还可以尝试删除 CHECKIN_ID。如果失败，您应该发送电子邮件至 api@foursquare.com 并附上您的 oauth_token 以查看我们是否可以通过这种方式诊断问题。

# c - C - 尝试在循环中比上一行多添加一个空格

> ID：13041877
> 
> 赞同：2
> 
> 时间：2012-10-24T01:47:46.543
> 
> 标签：c, for-loop

我想在每个新行的开头添加一个额外的空间。当前输出为：

```
$****
 $***
  $**
   $*
    $
     Press any key to continue . . . 
```

我想要的是：

```
$****
 $***
  $**
   $*
    $
Press any key to continue . . . 
```

我添加了for循环！它看起来几乎完美，除了“按任意键继续...”消息是选项卡。如何解决这个问题？

代码：

```
for(r=1; r<=5; r++) {
  printf("$");
  for(c=1; c<=5;c++) {
    if(6-r<=c) {
      printf(" ");
    } else {
      printf("*");
    }
  }
  printf("\n");
  n++;
  for (f=0;n>f;f++)
    {
        printf(" ");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T01:58:57.793

编写以下代码时可以使用变量左填充的技巧`$`：

```
printf("%*s", r, "$"); 
```

字符串格式字段中的`*`允许您指定填充宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:58:20.807

最简单的形式：只打印空格，然后是'$'，然后是星号。

```
int r, c;
for(r=0; r<5; r++) {
  for(c=0; c<r; c++){
    printf(" ");
  }
  printf("$");
  for(c=r+1; c<5;c++) {
      printf("*");
  }
  printf("\n");
  n++;//What is this here for?
} 
```

你可以用一个很棒的 printf 技巧来减少它（已经由其他人提交，所以我不会在这里讨论：

```
int r, c;
for(r=0; r<5; r++) {
  printf("%*s", r+1, "$");
  for(c=r+1; c<5;c++) {
      printf("*");
  }
  printf("\n");
  n++;//What is this here for?
} 
```

但是等等，还有更多！使用句点 ( `.`)，您可以强制截断字符串，因此：

```
int r;
for(r=1; r<6; r++) {
  printf("%*s%.*s\n", r, "$", 5-r, "*****");
} 
```

砰！把整个事情归结为一个声明！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T02:02:40.467

目前你`n++;`什么都不做。到`print(" ")`n 次你需要使用类似 for 循环的东西。一种方法：打印空格的数量，然后打印你需要的星星数量，应该是 4 - n。

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    int r;
    int c;
    int n = 0;
    for(r=1; r<=5; r++)
    {
        for (int i = 1; i<=n; i++) { //Print " " n number of times.
            printf(" ");
        }
        printf("$"); //Print dollar sign.
        for(c=0; c<(4-n);c++) //Print * 4-n times.
        {
            printf("*");
        }
        printf("\n");
        n++;

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T02:10:55.330

好吧，您的问题本身就得到了答案，“如何说 printf(" "); 'n' times" 说 printf 'n' 次的最简单方法是运行它 'n' 次，就像您问程序打印'*'（6-r）次！

那么这里有一个非常简单的代码来帮助你得到你想要的输出

```
#include<stdio.h>
void main()
{
    int r,c,n=0;

    for(r=1; r<=5; r++)
    {
        for(c=n;c>0;c--)
        {
            printf(" ");

        }
        printf("$");
        for(c=1; c<=5;c++)
        {
            if((6-r)<=c)
            {
                printf(" ");
            }
            else
            {
                printf("*");
            }
        }

        printf("\n");
        n++;

    }
} 
```

如果您想查看代码，只需在[此处访问 Codepad.org，您可以运行您的代码并查看输出](http://codepad.org/EZod6hQU)

# actionscript-3 - 解决 AS3 中的库冲突

> ID：13041881
> 
> 赞同：0
> 
> 时间：2012-10-24T01:48:44.257
> 
> 标签：actionscript-3

是否有布尔值或函数来设置“解决库冲突”以在 Flash ActionScript3 中自动替换？我已经搜索了 addItem 和 Paste，但我仍然得到提示。

# android - 智能手机文件读取性能：内部存储 vs. SD 卡 vs. PC 硬盘

> ID：13041882
> 
> 赞同：14
> 
> 时间：2012-10-24T01:48:48.967
> 
> 标签：android, inputstream, smartphone, seek, persistent-storage

我的 Android 应用程序将使用大文件和非常大的文件（即大小在 10MB 和 2GB 之间）。

我一直想知道智能手机使用什么硬件来进行稳定存储，以及软件（文件读取/查找）考虑是否与 PC 硬盘相似。我试图查找有关硬件的信息并获得一些关于它的图片（内部存储、SD 卡），但我检查的所有来源都不够全面和/或具体。我的（相互关联的）问题是：

1.  在“现代”智能手机（例如 Android 2.2\. 手机）上读取大文件时，与在 PC 上使用 Java 应用程序执行相同操作时，我必须考虑哪些主要差异？（就磁盘查找/读取性能而言；显然，手机 RAM 比 PC 小，因此在缓冲区等情况下必须考虑到这一点。）
2.  与 PC 硬盘相比，智能手机中使用的稳定存储硬件有哪些（相关的）主要区别？（我知道这是一个非常广泛的问题，所以我什至很欣赏这里的一个非常简短的答案，可能还有一些可靠的外部 URL）
3.  在`InputStream`读取和查找（skipBytes）方面，使用内部存储和SD卡之间是否有区别（例如在Android上）（我故意没有写“外部存储”，因为它不一定是每个设备上的SD卡)? SD卡慢吗？
4.  例如，我想从一个 2GB 的文件中读取 2MB 的数据，而这 2MB 的数据分布在文件的许多不同/遥远的部分。所有偏移量都是已知的，因此我创建了一个升序的偏移量，然后使用`BufferedInputStream.read()`（例如在 a 中`DataInputStream`）来读取它们（并`skipBytes()`在必要时用于查找）。因此，在底层文件系统中，这可能需要“遍历”整个 2GB 文件。（例如，Android 在需要时使用 linux 函数在文件中查找。）但是，查找是否与在 PC 硬盘中一样有效？SD卡与内部存储在寻道效率方面如何？
5.  典型的数据读取速度是多少？（智能手机内部存储 vs. SD 卡 vs. PC 非 SSD 硬盘）

我知道对我的具体应用程序进行基准测试是必须的，但我也欢迎对此事进行理论上的澄清。

**重要提示**：当我问“......寻求与 PC 硬盘一样高效？”时，我（仅）不是指绝对值，还指它**的机制**。也就是说，如果它基于相同的逻辑原理工作（= 尽可能跳过大部分），或者存在一些缺点（例如，在 SD 卡上不可能进行这种“基于跳过”的搜索，因此跳过更多 - - 即*不成比例*- 在智能手机硬件上比在 PC 硬盘上没用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T01:37:56.283

试图回答你的问题

1.  只有一个区别，那就是如果您的文件在应用程序包中（在应用程序内），因为您需要使用不同的方法打开它，但是如果它在应用程序包内并进入**package/file/**，那么您可以使用相同的 File 文件布拉...

2.  智能手机的内存比 HDD 快，但如果将其存储在外部 SDC 卡中，这将改变，因为 SDC 卡具有最高的读写速度。

3.  是的，有区别...如果从内部或 SDCard（不是外部 SD 卡）读取，否则我们不应该使用 1 或 2GB 和 16Gb 的设备进行存储。它在主内存中的所有内容都会运行得更快。

4.  查找始终是一项缓慢的任务，即使您没有到达文件末尾，您也可以获得关闭流所需的所有日期。你可以做的更快的是每次你的应用程序读取了一些 KB 或 MB 时重新加载缓存......而不是你可以午餐 asyncTask 去加载它，一旦主线程完成将寻找更多数据如果存在。这应该会加快很多，因为您将只在内存中进行搜索。

5.  You will need a app for that or write your own, that shouldn't be too difficult, you can use handler, and load as much as you can in an array or list, and count the bytes, and repeat it on other memory types (internal SD card and external SDCard).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T00:04:34.830

你的问题太具体了，需要太多的数据:-)我认为很难找到另一个对你有非常具体要求的人。

一般来说，SD卡数据访问速度不仅取决于驱动硬件（设备），还取决于卡本身和要访问的软件（Android版本）。

另一方面，您可以在以下位置找到有关 SD 卡速度的一些信息：

*   [http://www.verboom.net/blog/index.html?single=20120607.0](http://www.verboom.net/blog/index.html?single=20120607.0)
*   [http://forum.xda-developers.com/showthread.php?t=1005633](http://forum.xda-developers.com/showthread.php?t=1005633)

即使在 Google Play 上，您也可以找到一些应用程序来测试您设备上 SD 卡的速度（搜索 SD Card Tester、SD Tools 等）

# jsf - javax.faces.FacesException：启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel

> ID：13041889
> 
> 赞同：2
> 
> 时间：2012-10-24T01:49:40.333
> 
> 标签：jsf, primefaces, java-ee-6

对于这个问题，我还有另一种情况，即我有一个扩展基本实体的模型，并且该基本实体具有属性 id。我使用该 id 作为 rowKey，它会引发此错误。当我将 rowKey 的值设置为模型（不是抽象基础）中的任何属性时，数据表可以工作。

请注意，我正在研究 JavaEE6。

型号：

```
@Entity
@SequenceGenerator(name = "ID_GENERATOR", sequenceName = "USER_ADDRESS_SEQ")
public class UserAddress extends BaseEntity { //.. }

@MappedSuperclass
public abstract class BaseEntity implements Serializable, IEntity {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(generator = "ID_GENERATOR")
    @Column(name = "ID")
    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    } .. 
```

JavaEE6 bean：

```
@Stateless
@Named
public class UserAddressBean implements Serializable {
    private static final long serialVersionUID = -6104153017102665096L; 

    private List<UserAddress> addresses;
    private UserAddress address;

    public List<UserAddress> getAddresses() {
        addresses = new ArrayList<UserAddress>();
        UserAddress temp = new UserAddress();
        temp.setDescription("test");
        addresses.add(temp);

        temp = new UserAddress();
        temp.setDescription("test");
        addresses.add(temp);

        return addresses;
    }

    public UserAddress getAddress() {
        return address;
    }

    public void setAddress(UserAddress address) {
        this.address = address;
    }.. 
```

和 xhtml 页面：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    template="/shared/page/_oneColumn.xhtml">
    <ui:define name="content">
        <h:form id="form">
            <p:panel>
                <f:facet name="header"></f:facet>
                <p:dataTable id="addresses" var="address"
                    value="#{userAddressBean.addresses}" rowKey="#{address.id}"
                    selection="#{userAddressBean.address}" selectionMode="single">
                    <p:column headerText="#{msg['field.description']}">
                        <h:outputText value="#{address.description}" />
                    </p:column>
                </p:dataTable>
                <f:facet name="footer"></f:facet>
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition> 
```

对这个问题有任何想法吗？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T01:58:02.490

哦，对不起，我太笨了，问题是 id 为空。我忘记了我对这些值进行了硬编码。所以无论如何，对于将来遇到同样问题的人来说，要使用较少的代码行键，请确保您设置了以下数据表属性：1.) rowKey 2.) selection 3.) selectionMode

还要确保 rowKey 属性不为空。

# android - 测试 Activity 是否返回预期结果

> ID：13041890
> 
> 赞同：5
> 
> 时间：2012-10-24T01:49:43.260
> 
> 标签：android, testing, junit, android-activity, instrumentation

我有以下活动：

```
package codeguru.startactivityforresult;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class ChildActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.child);

        this.resultButton = (Button) this.findViewById(R.id.result_button);
        this.resultButton.setOnClickListener(onResult);
    }

    private View.OnClickListener onResult = new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent result = new Intent();
            result.putExtra(ChildActivity.this.getString(R.string.result), ChildActivity.this.getResources().getInteger(R.integer.result));
            ChildActivity.this.setResult(RESULT_OK, result);
            ChildActivity.this.finish();
        }
    };
    private Button resultButton = null;
} 
```

以及以下 JUnit 测试：

```
package codeguru.startactivityforresult;

import android.app.Activity;
import android.test.ActivityInstrumentationTestCase2;
import android.test.UiThreadTest;
import android.widget.Button;
import junit.framework.Assert;

public class ChildActivityTest extends ActivityInstrumentationTestCase2<ChildActivity> {

    public ChildActivityTest() {
        super(ChildActivity.class);
    }

    @Override
    public void setUp() throws Exception {
        super.setUp();

        this.setActivityInitialTouchMode(false);

        this.activity = this.getActivity();
        this.resultButton = (Button) this.activity.findViewById(R.id.result_button);
    }

    @Override
    public void tearDown() throws Exception {
        super.tearDown();
    }

    @UiThreadTest
    public void testResultButtonOnClick() {
        Assert.assertTrue(this.resultButton.performClick());
        Assert.fail("How do I check the returned result?");
    }
    private Activity activity;
    private Button resultButton;
} 
```

如何确保单击按钮设置正确的结果（通过调用`setResult()`）将返回到任何以 开始此活动的活动`startActivityForResult()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T21:21:20.337

对于问题中的当前 Activity 实现，即通过单击 ChildActivity 中的按钮设置结果然后立即销毁 Activity，我们在 ChildActivityTest 中对测试结果相关的东西无能为力。

相关问题[测试 onActivityResult()](https://stackoverflow.com/questions/13042015/testing-onactivityresult)中的答案显示了如何在 MainActivityTest 中独立地对 startActivityForResult() 和/或 onActivityResult() 进行单元测试。通过独立方式 MainActivityTest 不依赖于 ChildActivity 的交互，仪器将捕获 ChildActivity 创建并立即将其终止，然后返回准备好的模拟 ActivityResult，因此对MainActivity 进行**单元测试。**

如果您不希望检测中断并返回模拟 ActivityResult，您可以让 ChildActivity 继续运行，然后模拟 ChildActivity 中的交互，并将真实的 ActivityResult 返回给 MainActivity。表示如果 MainActivity 启动 ChildActivity 以获取结果，然后更新 TextView，以测试整个端到端交互/合作，请参见下面的示例代码：

```
public class MainActivityTest extends ActivityInstrumentationTestCase2<MainActivity> {
  ... ...

  public void testStartActivityForResult() {
    MainActivity mainActivity = getActivity();
    assertNotNull(activity);

    // Check initial value in TextView:
    TextView text = (TextView) mainActivity.findViewById(com.example.R.id.textview1);
    assertEquals(text.getText(), "default vaule");

    try {
      Thread.sleep(2000);
    } catch (InterruptedException e) {
      e.printStackTrace();
    }

    // Create an ActivityMonitor that monitor ChildActivity, do not interrupt, do not return mock result:
    Instrumentation.ActivityMonitor activityMonitor = getInstrumentation().addMonitor(ChildActivity.class.getName(), null , false);

    // Simulate a button click in MainActivity that start ChildActivity for result:
    final Button button = (Button) mainActivity.findViewById(com.example.R.id.button1);
    mainActivity.runOnUiThread(new Runnable() {
      public void run() {
        button.performClick();
      }
    });

    try {
      Thread.sleep(2000);
    } catch (InterruptedException e) {
      e.printStackTrace();
    }

    getInstrumentation().waitForIdleSync();
    ChildActivity childActivity = (ChildActivity) getInstrumentation().waitForMonitorWithTimeout(activityMonitor, 5);
    // ChildActivity is created and gain focus on screen:
    assertNotNull(childActivity);

    // Simulate a button click in ChildActivity that set result and finish ChildActivity:
    final Button button2 = (Button) childActivity.findViewById(com.example.R.id.button1);
    childActivity.runOnUiThread(new Runnable() {
      public void run() {
        button2.performClick();
      }
    });

    try {
      Thread.sleep(2000);
    } catch (InterruptedException e) {
      e.printStackTrace();
    }

    getInstrumentation().waitForIdleSync();
    // TextView in MainActivity should be changed:
    assertEquals(text.getText(), "default value changed");
  }

  ... ...
} 
```

我在这里添加了三个 Thread.sleep() 调用，以便您在运行 JUnit 测试时有机会看到按钮单击模拟。正如你在这里看到的，一个独立的 ChildActivityTest 不足以测试整个合作，我们实际上是通过 MainActivityTest 间接测试 ChildActivity.setResult()，因为我们需要从一开始就模拟整个交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:56:00.433

我可以推荐使用 Robotium 框架。Robotium 使用了一个类 Solo，它有一个非常有用的 API。

它允许您查看当前活动是什么。允许您断言活动已开始等。

[http://code.google.com/p/robotium/](http://code.google.com/p/robotium/)

执行点击后，您可以执行类似的操作

 void assertCurrentActivity(java.lang.String message, java.lang.Class expectedClass, boolean isNewInstance) 所以这就是我要做的。代码后点击按钮

```
Activity callingActvity  = solo.getCurrentActivity();
  solo.assertCurrentActivity("ShouldbeCallingActivity","NameOfCallingActivity"); 
```

如果不知道回调是如何工作的，我无法给出完整的解决方案。但是假设一些文本显示为 RESULT_OK 而不是其他一些文本，

你可以做类似的事情

```
assertTrue(solo.waitForText("Text that is supposed to show for Result OK"); 
```

PS：robotium 仅适用于同一应用程序中的活动。

# python - 在 Python 中生成动画 GIF

> ID：13041893
> 
> 赞同：14
> 
> 时间：2012-10-24T01:50:23.650
> 
> 标签：python, gif, animated-gif

我正在尝试使用 images2gif.py 生成动画 GIF（粘贴到最新版本：bit.ly/XMMn5h）。

我正在使用这个 Python 脚本：

```
__author__ = 'Robert'
from images2gif import writeGif
from PIL import Image
import os

file_names = sorted((fn for fn in os.listdir('.') if fn.endswith('.gif')))
#['animationframa.png', 'animationframb.png', ...] "

images = [Image.open(fn) for fn in file_names]

size = (150,150)
for im in images:
    im.thumbnail(size, Image.ANTIALIAS)

print writeGif.__doc__

filename = "my_gif.GIF"
writeGif(filename, images, duration=0.2) 
```

但是，我收到以下错误：

```
File "C:\Python27\lib\images2gif.py" , line 418, in writeGifToFile
globalPalette = palettes[ occur.index(max(occur)) ] ValueError: max() 
arg is an empty sequence 
```

在我看来，发生是空的。出了什么问题，有没有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:40:41.620

好的，我已经在两台不同的机器上测试了你的确切代码，它在两台机器上都能完美运行。一台机器是 Ubuntu 12.04，另一台运行的是 Windows XP。他们都使用 Python 2.7，以及[我从这里下载](http://python-learning-tools.googlecode.com/svn-history/r16/trunk/images2gif.py)的最新版本的 images2gif 。我推荐以下内容：

1.  检查您正在使用的 python 版本和库，尝试获取最新版本。
2.  在另一台机器上测试
3.  尝试卸载 python 和所有库并尝试重新安装

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-16T03:17:06.523

**Python，从代表图像的 numpy ndarrays 的 numpy ndarray 创建一个 .gif ：**

```
import os
import numpy as np
from moviepy.editor import ImageSequenceClip
#Installation instructions: 
#    pip install numpy
#    pip install moviepy
#    Moviepy needs ffmpeg tools on your system
#        (I got mine with opencv2 installed with ffmpeg support)

def create_gif(filename, array, fps=10, scale=1.0):
    """creates a gif given a stack of ndarray using moviepy
    Parameters
    ----------
    filename : string
        The filename of the gif to write to
    array : array_like
        A numpy array that contains a sequence of images
    fps : int
        frames per second (default: 10)
    scale : float
        how much to rescale each image by (default: 1.0)
    """
    fname, _ = os.path.splitext(filename)   #split the extension by last period
    filename = fname + '.gif'               #ensure the .gif extension
    if array.ndim == 3:                     #If number of dimensions are 3, 
        array = array[..., np.newaxis] * np.ones(3)   #copy into the color 
                                                      #dimension if images are 
                                                      #black and white
    clip = ImageSequenceClip(list(array), fps=fps).resize(scale)
    clip.write_gif(filename, fps=fps)
    return clip

randomimage = np.random.randn(100, 64, 64)       
create_gif('test.gif', randomimage)                 #example 1

myimage = np.ones(shape=(300, 200))
myimage[:] = 25
myimage2 = np.ones(shape=(300, 200))
myimage2[:] = 85
arrayOfNdarray = np.array([myimage, myimage2])

create_gif(filename="grey_then_black.gif",          #example 2
           array=arrayOfNdarray, 
           fps=5, 
           scale=1.3) 
```

印刷：

```
[MoviePy] Building file test.gif with imageio
100%|██████████████████████████████████████████| 100/100 [00:00<00:00, 905.27it/s]

[MoviePy] Building file grey_then_black.gif with imageio
 67%|█████████████████████████▎                | 2/3 [00:00<00:00, 65.65it/s] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T01:15:12.033

在列表构造函数中

```
 (fn for fn in os.listdir('.') if fn.endswith('.gif')) 
```

结尾是区分大小写的，所以如果你碰巧有所有的 GIF 图片，那么它们将不会被找到，你会得到一个

```
 ValueError: max() arg is an empty sequence 
```

错误。

我建议使用

```
 (fn for fn in os.listdir('.') if fn.endswith('.gif') or fn.endswith('.GIF')) 
```

为了成功。此外，最好在父（或至少另一个）目录中创建动画 gif 文件。

# php - 使用 iOS6 WebKit 上传照片，处理无响应

> ID：13041895
> 
> 赞同：0
> 
> 时间：2012-10-24T01:50:38.330
> 
> 标签：php, ios, ios6, mobile-webkit

由于 iOS6 现在支持照片/视频上传，我想在我的移动应用程序中使用它。在上传脚本提供的指定文件夹中没有上传照片或视频时会出现问题。不知道我做错了什么。

这是我用来抓取文件或捕获文件的内容......

```
<form action="" method="POST">
<input type="file" accept="image/* capture="camera"><br><br>
<input type="submit" value="Upload" class="login-button"/>
</form> 
```

这会处理同一页面上的照片...

```
<?php
 function findexts ($filename) 
 { 
 $filename = strtolower($filename) ; 
 $exts = split("[/\\.]", $filename) ; 
 $n = count($exts)-1; 
 $exts = $exts[$n]; 
 return $exts; 
 } 
  $ext = findexts ($_FILES['uploaded']['name']) ; 
 $ran = rand () ;
 $ran2 = $ran.".";
 $target = "files/";
 $target = $target . $ran2.$ext; 
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target)) 
 {
 echo "The file has been uploaded as ".$ran2.$ext;
 } 
 else
 {
 echo "Sorry, there was a problem uploading your file.";
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:19:23.903

我认为您缺少标签`enctype="multipart/form-data"`上的属性。`form`否则，表单默认提交`enctype`，`application/x-www-form-urlencoded`不支持二进制数据上传。

# algorithm - 小数据集的跳过列表

> ID：13041897
> 
> 赞同：4
> 
> 时间：2012-10-24T01:51:17.600
> 
> 标签：algorithm, data-structures, language-agnostic, skip-lists

我对使用跳过列表作为 A* 的开放列表很感兴趣。然而，让我感到困扰的是它的概率性质。开放列表可以从非常小的节点集到大量节点，并且需要保持每个节点的性能。

据我了解，跳过列表对于小数据集随机给出错误结果的可能性更高。我认为这可能会在生成大量短路径时出现问题。

我正在考虑解决这个问题，为什么不在一定程度上监视随机数。保持每个级别的节点数量的运行总数，并且为了保持每个级别之间的理想节点分布，有时会干预并强制节点成为特定级别。

我不确定这在我给定的应用程序中的效果如何，如果我应该专注于我的开放列表的另一个数据结构。

我在跳过列表上阅读的所有文章都没有提到这种优化。由于我对整个性能分析游戏相当陌生，因此我不愿尝试改进已记录的数据结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:06:22.683

我建议您创建一个程序，该程序随机生成您希望 A* 算法创建的长度的跳过列表。检查这些列表，看看其中有多少不是最佳的。

我不建议尝试创建具有您建议的监控的生产跳过列表数据结构。您可能会发现监控和干预代码会导致跳过列表在一般情况下表现不佳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T12:17:52.787

1.  是的，**你是对的**- 在谈论小型跳过列表时，跳过列表有更高的衰减机会。
    一般来说，根据[这篇论文](http://www.cse.iitd.ernet.in/~ssen/journals/skip.pdf)，有一个常数`alpha`使得跳过列表超出`alpha * n`空间的概率小于- 所以随着跳过列表变大，这个（超过这个限制）的概率变得越来越小。`1/2^(Ω(sqrt(n)))`

2.  为了避免跳过列表最坏的情况，可以使用原始跳过列表的一种变体，即**确定性跳过列表**。这个主题在[本论文工作中进行了讨论](https://cs.uwaterloo.ca/research/tr/1993/28/root2side.pdf)

3.  其他替代方案是[**平衡 BST**](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)，例如[AVL](http://en.wikipedia.org/wiki/AVL_tree)和[红黑树](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)，甚至是[B+ 树](http://en.wikipedia.org/wiki/B+_tree)（文件系统通常首选这些树）。

4.  如果您的“开放集”确实如此之小 - 您的分支因子也非常小（接近 1），或者确切地说`B^d`（d = 解决方案深度；B = 分支因子）也将很小。这将导致**快速查找，无论跳过列表**实现如何，因为预计需要很少的节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:59:10.727

当你说“跳过列表更有可能随机给出小数据集的坏结果”时，你到底害怕什么？

你不应该害怕的是，对于一个包含 10 个元素的列表，没有足够的 2 级或 3 级节点来加速遍历。迭代 2 个元素或 10 个元素的链表（没有 2+ 级节点的skiplist 归结为）之间的区别基本上不存在，即使在紧密循环中（数据所需的节点引用管理类型）结构可能会产生更大的影响）。

显然，一旦获得更多元素，没有足够的更高级别节点的影响就会增加。但幸运的是，获得更高级别节点的机会也增加了。例如，如果添加 8 个元素，它们都成为 1 级节点的机会是 0.5^8 = 0.39%，即极不可能。

# python - 将 `cimport numpy` 添加到 pyx 文件编译正常，但运行时抛出 ValueError

> ID：13041898
> 
> 赞同：1
> 
> 时间：2012-10-24T01:51:21.637
> 
> 标签：python, build, numpy, cython

我正在尝试优化我编写的一个简单的 cython 例程，该例程接受 1D numpy 数组作为输入并返回 1D numpy 数组作为输出。

我有一个幼稚的版本正在工作，现在正尝试对cython 代码的 numpy 部分进行一些[标准优化。](http://docs.cython.org/src/tutorial/numpy.html)

但是，一旦我添加`cimport numpy`到我的 cython 源文件，我就无法运行扩展模块（尽管它可以编译），抛出一个`ValueError: numpy.dtype does not appear to be the correct type object`.

我的 numpy 版本是 1.6.0 和 python 版本 2.6.5（默认，Ubuntu 10.04 apt-get 安装）

导致问题的最小示例：

* * *

## test_ext.pyx

```
import numpy as np
cimport numpy as np #Commenting this line un-breaks the extension

def test_ext(refls, str mode, int nguard, int nblock):

    cdef int i
    cdef int _len = refls.shape[0]
    _out = np.zeros([_len])

    for i in range(_len):
        _out[i] = refls[i] + 1
    return _out 
```

* * *

## 安装程序.py

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

ext_modules = [Extension("test_ext", ["test_ext.pyx"])]

setup(
    name = 'test',
    cmdclass = {'build_ext': build_ext},
    ext_modules = ext_modules
) 
```

* * *

## run_ext.py

```
import numpy
from test_ext import test_ext

a = np.array([x for x in range(260)])
_res = test_ext.test_ext(a, 'avg', 2, 3) 
```

## 构建：

`python setup.py build_ext --inplace`

## 我的构建输出：

```
running build_ext
cythoning my_ext.pyx to my_ext.c
building 'my_ext' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.6 -c my_ext.c -o build/temp.linux-x86_64-2.6/my_ext.o
/usr/include/python2.6/numpy/__multiarray_api.h:968: warning: ‘_import_array’ defined but not used
my_ext.c:732: warning: ‘__pyx_k_3’ defined but not used
my_ext.c:733: warning: ‘__pyx_k_4’ defined but not used
my_ext.c:753: warning: ‘__pyx_k_24’ defined but not used
my_ext.c:759: warning: ‘__pyx_k_26’ defined but not used
my_ext.c:760: warning: ‘__pyx_k_27’ defined but not used
my_ext.c:1118: warning: ‘__pyx_pf_5numpy_7ndarray___getbuffer__’ defined but not used
my_ext.c:1876: warning: ‘__pyx_pf_5numpy_7ndarray___releasebuffer__’ defined but not used
gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions build/temp.linux-x86_64-2.6/my_ext.o -o /home/path/to/my_ext.so 
```

然后运行`run_ext.py`。

`cimport`未注释该行，我收到错误：

```
Traceback (most recent call last):
  File "run_ext.py", line 2, in <module>
    from test_ext import test_ext
  File "numpy.pxd", line 43, in test_ext (test_ext.c:2788)
ValueError: numpy.dtype does not appear to be the correct type object 
```

* * *

是什么原因造成的，我该如何解决它以继续优化我的扩展程序？我试图按照上面的链接继续进行优化，但是无论我走了多远，对我来说没有什么能解决这个问题。

我见过其他一些有这个问题的人有 python/numpy 的版本问题，但我不认为这对我来说是这种情况（尽管我愿意接受那里的建议）。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:07:36.697

看起来我的构建文件只需要包含 numpy 包含文件。将 setup.py 更改为以下内容可以解决所有问题：

## 安装程序.py

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext
import numpy   # << New line

ext_modules = [Extension("test_ext", ["test_ext.pyx"])]

setup(
    name = 'test',
    cmdclass = {'build_ext': build_ext},
    include_dirs = [numpy.get_include()], # << New line
    ext_modules = ext_modules
) 
```

# php - 我可以使用 javascript\php 将文件从 URL 下载到服务器吗

> ID：13041899
> 
> 赞同：0
> 
> 时间：2012-10-24T01:51:23.537
> 
> 标签：php, javascript, html, canvas

这是我的困境：我希望用户能够通过提供图像的 URL（它可以是任何图像文件）来将图像加载到画布上。我可以这样做，但是直接从 URL 添加图像会阻止画布导出到文件。所以我想做的是在服务器上创建一个临时副本，并能够将其路径作为 javascript var.... 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:25:17.310

您始终可以尝试让您的服务器对该 url 发出 http 请求，但有几个问题：

1.  您需要检查以确保 http 请求不会在内部解析；也就是说，应该只允许外部站点，否则，如果一个人知道正确的路径，就允许曾经只能在内部看到的东西现在可以从外部访问，从而为您的网络制造了一个安全漏洞。
2.  无法保证您从中提取图像的服务器会满足您的请求。他们可能会检查图像是否是从“授权”（此处松散地使用术语）页面引用的，或者他们可能会拒绝某些用户代理字符串，或断言设置了某些 cookie，或以上的某种组合.
3.  您可能需要执行某种检查以确保用户有权请求您的服务器发出 url 的请求，并且返回的内容确实是某种图像类型，否则您刚刚制作了一个半功能代理，可能被滥用（特别是如果您担心对您的网站的跨站点脚本攻击；）理想情况下，您也不希望让您的用户在没有真正目的的情况下过度使用您的服务器。

一旦你解决了 #1 和 #3 的问题，严格来说，没有理由必须将文件实际复制到您的服务器，但如果您确实将其保存到服务器，使用可能会更稳定。但如果你要保存它，那么还有其他问题。

1.  您将如何限制当前用户对文件的访问？
2.  你的清理策略是什么？
3.  请求是否需要使用某种客户端缓存以获得合理的性能？文件将如何提供？文件将被命名为什么？
4.  如果这些文件是受版权保护的，或者更糟的是*非法*的怎么办？

当然，您不必考虑所有这些问题来实施基本解决方案，但我认为至少考虑一次是明智的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T01:53:25.973

是的。您可以通过[AJAX](http://www.w3schools.com/ajax/default.asp)做到这一点。

# php - PHP 回显代码

> ID：13041909
> 
> 赞同：2
> 
> 时间：2012-10-24T01:54:01.933
> 
> 标签：php

这很痛苦。我将以下文本复制并粘贴到一个新的 html 文件中：

```
<html>
  <head>
    <title>PHP Test</title>
  </head>
  <body>
    <?php echo '<p>Hello World</p>'; ?>
  </body>
</html> 
```

当我尝试在 Firefox 中打开文件时，它会回显 '; ?> 除了Hello World这几个字。在 IE 中打开时，我得到一个空白页面。

Hello World 被正确格式化为段落。我在 Win7 32 位 PC 上运行 PHP 5.2.17 和 Apache 2.0。

遇到这么多问题真是令人沮丧，我想我可能会开始接受，对于我的技能组合来说，汉堡翻转是一个比编码更可行的未来职业。

任何人都可以建议可能有什么问题吗？我怀疑这与 Apache/PHP 软件有关，在缺少 .dll、端口故障和劣质防病毒软件之间，需要大约 5 个小时来设置 - 我想在此过程中可能会出现许多问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T01:58:10.837

如果您是新手，请不要手动设置 PHP、Apache 和 MySQL；而是下载并安装[WAMPServer](http://www.wampserver.com/en/)以使自己快速启动并运行。这将在您的 c:/ 驱动器中创建一个目录，该目录将充当您的根主机 - 当 WAMP（Windows、Apache、MySQL 和 PHP）运行时，您将能够通过访问`http://localhost/`.

其次，确保将 PHP 代码放在 .php 文件而不是 .html 文件中。Apache 可能未配置为解释 .html 文件中的 PHP，但它会为 .php 文件这样做。

如果您想在安装 WAMPServer 时获得一些视觉帮助，YouTube 上有许多视频提供了演练。这是一个：[http](http://www.youtube.com/watch?v=3j5lxcV_320) ://www.youtube.com/watch?v=3j5lxcV_320 - 它会引导您完成在 32 位 Windows 7 机器上的安装，因此您应该非常熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T01:57:12.507

确保该文件以 .php 扩展名保存。PHP 不会在 .html 文件中运行，除非 Apache 配置为针对 PHP 解析它们。不值得深入研究，只需更改文件名即可。

[为了将来参考，您可以使用名为Xampp](http://www.apachefriends.org/en/xampp.html)的出色工具在大约 5 分钟内设置 PHP、MySQL 和 Apache 。有适用于 Windows、OSX 和 Linux 的版本。它使您不必弄清楚所有棘手的配置内容，并让您专注于有趣的事情 - 编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T01:57:34.677

您的 PHP 配置可能设置为仅将`.php`文件识别为自己的文件。尝试将扩展名从 .html 更改为 .php。然后，如果可行，并且您仍然希望 .html 页面由 PHP 处理，则可能必须处理 PHP 配置选项...

# ruby-on-rails - 用 ruby 安装 RVM - 安装正确吗？

> ID：13041910
> 
> 赞同：1
> 
> 时间：2012-10-24T01:54:07.407
> 
> 标签：ruby-on-rails, rvm

输入`$ curl -L https://get.rvm.io | bash -s stable --ruby`

从输出看来它运行成功：

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100   185  100   185    0     0    132      0  0:00:01  0:00:01 --:--:--   296
100 10009  100 10009    0     0   5244      0  0:00:01  0:00:01 --:--:-- 75255
Please read and follow further instructions.
Press ENTER to continue.
Downloading RVM from wayneeseguin branch stable
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100   125  100   125    0     0    261      0 --:--:-- --:--:-- --:--:--  1168
100 1123k  100 1123k    0     0   760k      0  0:00:01  0:00:01 --:--:-- 1366k

Installing RVM to /Users/themaktravels/.rvm/
Adding rvm PATH line to /Users/themaktravels/.bashrc /Users/themaktravels/.zshenv.
RVM sourcing line found in /Users/themaktravels/.bash_profile          
/Users/themaktravels/.zprofile.

# RVM:  Shell scripts enabling management of multiple ruby environments.
# RTFM: https://rvm.io/
# HELP: http://webchat.freenode.net/?channels=rvm (#rvm on irc.freenode.net)
# Cheatsheet: http://cheat.errtheblog.com/s/rvm/
# Screencast: http://screencasts.org/episodes/how-to-use-rvm

# In case of any issues read output of 'rvm requirements' and/or 'rvm notes'

Installation of RVM in /Users/themaktravels/.rvm/ is almost complete:

  * To start using RVM you need to run `source /Users/themaktravels/.rvm/scripts/rvm`
in all your open shell windows, in rare cases you need to reopen all shell windows.

Installation of RVM in /Users/themaktravels/.rvm/ is almost complete:

* To start using RVM you need to run `source /Users/themaktravels/.rvm/scripts/rvm`
in all your open shell windows, in rare cases you need to reopen all shell windows. 
```

但是有人能解释一下 run 是什么意思 `source /Users/themaktravels/.rvm/scripts/rvm`吗？

我是否被指示将其作为命令运行？我会关闭我的终端窗口，然后打开一个新窗口。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:22:58.667

您根据屏幕输出成功安装了 RVM。

您必须将 RVM 设置（信息）加载到您的 PATH 中，这样您只需要键入`rvm`并且 shell 知道您在提及`/home/blabla.../.rvm/bin/rvm`，并成功运行它。

我建议您将这行代码放入您的 ~/.bashrc 或 ~/.bash_login 文件中（取决于您的 Linux 发行版本），以便在您登录后自动加载。

# java - Java Swing 组件未显示

> ID：13041915
> 
> 赞同：1
> 
> 时间：2012-10-24T01:54:32.400
> 
> 标签：java, swing, layout, layout-manager, flowlayout

帮我！每当我尝试启动下面的代码时，它只显示底部的按钮和其他任何地方的密码字段。我想看到一切，但我不能

```
public void setup(){
    frame = new JFrame("Votinator 3000");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    voteconfirm = new JLabel("");
    textarea = new JTextField(1);
    submit = new JButton("Submit Vote!");
    chooser = new JList(items);
    password = new JPasswordField(1);
    password.setVisible(true);
    choices = new JComboBox();
    choices.addItem("Choose");
    choices.addItem("Submit Own");
    type = new JPanel();
    type.add(textarea);
    choices.setEditable(false);
    choices.setSelectedIndex(0);
    frame.setBounds(300, 300, 400, 400);
    frame.getContentPane().add(type);
    frame.getContentPane().add(choices);
    frame.getContentPane().add(voteconfirm);
    frame.getContentPane().add(chooser);
    frame.getContentPane().add(textarea);
    frame.getContentPane().add(password,BorderLayout.CENTER);
    frame.getContentPane().add(submit,BorderLayout.SOUTH);
    frame.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T02:02:08.090

`BorderLayout`是 的默认布局`JFrame`。`BorderLayout.CENTER`当方法中没有参数时，将添加代码中的所有组件`add()`。因此仅`password`在`BorderLayout.CENTER`替换其他组件时出现。尝试创建一个面板，用控件填充它并将这个面板添加到框架中，即：

```
JPanel content = new JPanel();
content.add(type);
content.add(choices);
content.add(voteconfirm);
content.add(chooser);
content.add(textarea);
content.add(password);
content.add(submit);
frame.getContentPane().add(content); 
```

这里的样子：

![在此处输入图像描述](../Images/1015160c9351b2dd18598821c9d24454.png)

编辑：

来自[BorderLayout](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)规范：

> 为方便起见，BorderLayout 将缺少字符串规范解释为与常量 CENTER 相同：
> 
> ```
> Panel p2 = new Panel();
> p2.setLayout(new BorderLayout());
> p2.add(new TextArea());  // Same as p.add(new TextArea(), BorderLayout.CENTER); 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T02:02:46.703

这

```
frame.getContentPane().add(password,BorderLayout.CENTER); 
```

将替换您添加到屏幕上的任何其他内容...

这会将按钮添加到屏幕底部...

```
frame.getContentPane().add(submit,BorderLayout.SOUTH); 
```

您可以将布局更改为 a `FlowLayout`，这将显示所有内容...

![在此处输入图像描述](../Images/e3672b8ee4471a52952bb44784f86f3f.png)

```
frame.setLayout(new FlowLayout());
frame.setBounds(300, 300, 400, 400);
frame.getContentPane().add(type);
frame.getContentPane().add(choices);
frame.getContentPane().add(voteconfirm);
frame.getContentPane().add(chooser);
frame.getContentPane().add(textarea);
frame.getContentPane().add(password);
frame.getContentPane().add(submit); 
```

但我几乎不认为那是你真正想要的。

通读一遍

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)
*   [使用布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

看看你是否能找到一种或多种符合你要求的布局

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T02:02:59.333

这是快速修复：

```
public void setup(){
frame = new JFrame("Votinator 3000");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
voteconfirm = new JLabel("");
textarea = new JTextField(1);
submit = new JButton("Submit Vote!");
chooser = new JList(items);
password = new JPasswordField(1);
password.setVisible(true);
choices = new JComboBox();
choices.addItem("Choose");
choices.addItem("Submit Own");
type = new JPanel();
type.add(textarea);
choices.setEditable(false);
choices.setSelectedIndex(0);
frame.setBounds(300, 300, 400, 400); 
```

* * *

```
JPanel p = new JPanel();
p.setLayout(new BoxLayout(p, BoxLayout.PAGE_AXIS));
frame.setContentPane(p); 
```

* * *

```
frame.getContentPane().add(type);
frame.getContentPane().add(choices);
frame.getContentPane().add(voteconfirm);
frame.getContentPane().add(chooser);
frame.getContentPane().add(textarea);
frame.getContentPane().add(password);
frame.getContentPane().add(submit);
frame.setVisible(true);
} 
```

但是，您需要进一步了解 LayoutManagers。看看这里： [http ://docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

还要检查 miglayout.net

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T02:21:41.447

您需要将所有项目添加到 JPanel**类型**中，然后将 JPanel 组件添加到 JFrame；这是一个例子

```
  frame = new JFrame("Votinator 3000");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        voteconfirm = new JLabel("");
        textarea = new JTextField(1);
        submit = new JButton("Submit Vote!");
        chooser = new JList(items);
        password = new JPasswordField(1);
        password.setVisible(true);
        choices = new JComboBox();
        choices.addItem("Choose");
        choices.addItem("Submit Own");
        type = new JPanel();
        type.add(textarea);
        choices.setEditable(false);
        choices.setSelectedIndex(0);
        frame.setBounds(300, 300, 400, 400);
        frame.add(type);
        type.add(choices);
        type.add(voteconfirm);
        type.add(chooser);
        type.add(textarea);
        type.add(password);
        type.add(submit);
        frame.setVisible(true); 

```

那应该很简单。

# json - 从 CSV 文件以 JSON 格式创建多维数组

> ID：13041917
> 
> 赞同：3
> 
> 时间：2012-10-24T01:54:40.997
> 
> 标签：json, csv, multidimensional-array

我正在尝试从多个 CSV 文件创建一个 JSON 文件。这些文件将被命名为 bugs.csv 和 executions.csv。

bugs.csv 文件示例：

```
month,,1,2,3,4
app1,ownerA,42,34,38,12
app2,ownerA,13,23,24,43
app3,ownerB,48,72,39,62 
```

executions.csv 文件的示例：

```
month,,1,2,3,4
app1,ownerA,1200,1500,900,1000
app2,ownerA,600,650,660,540
app3,ownerB,2750,3500,3000,3200 
```

我希望 JSON 看起来像什么：

```
[{"Application":"app1",
"Owner":"ownerA",
"bugs":[[1,42],[2,34],[3,38],[4,12]],
"executions":[[1,1200],[2,1500],[3,900],[4,1000]]},

{"Application":"app2":,
"Owner":"ownerA",
"bugs": [[1,13],[2,23],[3,24],[4,43]],
"executions":[[1,600],[2,650],[3,660],[4,540]]}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T12:10:49.290

我使用了 OpenRefine，一旦你创建了一个项目，它让我可以将 excel 文件的一种布局转换为所需的 JSON 布局，而无需每次都重新编码。这有点手动，但我每个月只做一次，所以 2-3 分钟不会杀死我。

# vmware - 在 Linux Mint 13 上安装 VMware Tools 时出现问题

> ID：13041920
> 
> 赞同：3
> 
> 时间：2012-10-24T01:54:51.107
> 
> 标签：vmware, vmware-workstation, linux-mint, vmware-tools

我已按照此处找到的安装程序进行操作：

[http://install-climber.blogspot.com/2012/08/linuxmint13cinnamoninstallvmwaretools.html](http://install-climber.blogspot.com/2012/08/linuxmint13cinnamoninstallvmwaretools.html)

但是，最后当我执行命令“/usr/bin/vmware-user”时，我收到以下错误：

```
jay-virtual-machine vmware-tools-distrib # /usr/bin/vmware-user
jay-virtual-machine vmware-tools-distrib # /usr/lib/vmware-tools/lib/libstdc++.so.6/libstdc++.so.6: version `GLIBCXX_3.4.9' not found (required by /usr/lib/x86_64-linux-gnu/libproxy.so.1)
Failed to load module: /usr/lib/x86_64-linux-gnu/gio/modules/libgiolibproxy.so
jay-virtual-machine vmware-tools-distrib # 
```

我在 VMware Workstation 9.0 上运行。

我是 Linux 新手，所以任何方向都会对我有用。

谢谢，杰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T02:04:37.343

我真的应该早点想到这一点。我在 linux 上使用 VMWare 工具，我使用包：“open-vm-tools”，它工作得很好。在你的 synaptics 包管理器中找到它。

或者直接转到终端并输入：

```
sudo apt-get install open-vm-tools 
```

可选的，额外的 vmware 东西：

```
sudo apt-get install open-vm-dkms
sudo apt-get install open-vm-toolbox 
```

（我认为 dkms 是用于模块的，所以您可能想要拥有它）

另一种方法是降级到安装版本想要的包版本，等到他们更新包，或者修改包脚本本身。这些事情可能需要更多的工作，如果不能访问类似的虚拟机设置，我将无法帮助您。

降级软件包：

```
sudo apt-get install packagename=version 
```

希望能帮助到你。

# ruby-on-rails - FactoryGirl 与多个模型的复杂关联

> ID：13041924
> 
> 赞同：6
> 
> 时间：2012-10-24T01:55:35.550
> 
> 标签：ruby-on-rails, factory-bot, factory

我试图弄清楚如何编写一个属于 2 个不同模型的工厂，每个模型都应该具有相同的父模型。这是人为的示例代码：

```
class User < ActiveRecord::Base
  has_many :widgets
  has_many :suppliers

  attr_accessible :username
end

class Widget < ActiveRecord::Base
  belongs_to :user
  has_many :parts

  attr_accessible :name
end

class Supplier < ActiveRecord::Base
  belongs_to :user
  has_many :parts

  attr_accessible :name
end

class Part < ActiveRecord::Base
  belongs_to :supplier
  belongs_to :widget

  attr_accessible :name
end 
```

这是我到目前为止所拥有的：

```
factory :user do
  name 'foo'
end

factory :widget do
  association :user
  name 'widget'
end

factory :supplier do
  association :user
  name 'supplier'
end

factory :part do
  association :widget
  association :supplier
  name 'part'
end 
```

问题在于`part.widget.user != part.supplier.user` 它们必须相同。

我尝试了以下但没有成功：

```
factory :part do
  association :widget
  association :supplier, user: widget.user
  name 'part'
end 
```

有什么建议么？还是我必须在创建零件后对其进行修改？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T02:30:46.880

我相信你可以通过[回调](http://robots.thoughtbot.com/post/23039827914/get-your-callbacks-on-with-factory-girl-3-3)来做到这一点：

```
factory :part do
  association :widget
  association :supplier
  name 'part'
  after(:create) do |part|
    user = FactoryGirl.create(:user)
    part.widget.user = part.supplier.user = user
  end
end 
```

另请参阅：[在工厂中获取两个关联以共享另一个关联](https://stackoverflow.com/questions/8820114/get-two-associations-within-a-factory-to-share-another-association)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T23:11:11.900

另一种选择是使用瞬态变量来允许传入关联的对象。

我一般使用两个变量：

*   保存要在工厂中使用的关联的变量
*   一个布尔变量，用于指示是否为关联变量生成默认值——在您的特定情况下可能不需要，但可能非常有用

这是它的样子：

```
factory :part do
  transient do
    # this variable is so we can specify the user
    with_user { no_user ? nil : Factory.create(:user) }

    # this variable allows the user to be nil
    no_user false 
  end

  # The transient variable for_user can now be used to create the 
  # associations for this factory
  widget { Factory.create(:widget, :user => with_user) }
  supplier { Factory.create(:supplier, :user => with_user) }

  name 'part'
end 
```

然后可以通过以下方式使用它：

```
# use the default user
part = Factory.create :part
part.widget.user.should == part.supplier.user

# use a custom created user
user = Factory.create :user, :name => 'Custom user'
part = Factory.create :part, for_user: user
part.widget.user.should == user
part.supplier.user.should == user

# create a part without any user
# (again this probably isn't need in your specific case, but I have 
#  found it a useful pattern)
part = Factory.create :part, no_user: true
part.widget.user.should be_nil
part.supplier.user.should be_nil 
```

# mobile - 识别用户当前连接的AP的BSSID

> ID：13041928
> 
> 赞同：2
> 
> 时间：2012-10-24T01:55:55.223
> 
> 标签：mobile, wifi, httprequest, access-point, bssid

从事特定于大学网络的课程项目。

这个想法是，如果我们可以获取校园网络会话/连接的识别特征，我们可以绘制出 AP 并将其与其位置坐标相关联，并将它们绘制在地图上。更具体地说，我们正在尝试确定设备连接到哪个 AP。

基本上，用户会从支持 wi-fi 的设备（最好是 iPad 或 iPod Touch）在 Intranet 上打开网页，然后在页面加载时或通过操作事件捕获唯一标识符；我们可以反过来将其与纬度和经度坐标相关联。这里的想法是唯一标识符将被发送并存储到数据库字段中（几乎就像留言簿提交一样）。然后，在外部单独的公共网页上——查看者将能够看到这些唯一标识符返回并翻译为地图上绘制的最近访问的位置。这将转化为手动“登记”跟踪服务。

捕获 IP 地址将不起作用，因为它们不是静态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:07:01.427

BSSID is part of the active connection attributes set and as such is stored inside the client networking component of the OS. You need to query it by calling the appropriate API of your OS (e.g., in Windows it would be `WlanQueryInterface`). You'll also need to be able to call this API from script, you can find some info about this here: [How to call Windows API functions in JScript?](https://stackoverflow.com/questions/3503562/how-to-call-windows-api-functions-in-jscript)

# ios - 将 iOS 6 设备作为 BLE 外围设备运行

> ID：13041930
> 
> 赞同：16
> 
> 时间：2012-10-24T01:56:01.447
> 
> 标签：ios, core-bluetooth, peripherals

众所周知，iOS 6 支持运行设备（iPhone 4s 及更高版本，以及新 iPad）作为 BLE 外围设备。WWDC 2012 Session 705 中有一个名为“高级核心蓝牙”的演示。我向 Apple 索要源代码。他们向我发送了源代码的修改版本 (BTLE_Transfer_Draft)。然后我：

*   在 iPhone 5 (iOS 6) 中以“外围模式”运行应用程序并启动“广告”
*   在“中央模式”下在新 iPad (iOS 5.1.1) 中运行应用程序

问题是外围设备根本没有被发现。所以我使用其他测试应用程序，包括一些从 App Store 下载的应用程序。都未能发现外围设备。我认为问题应该出在 BTLE_Transfer_Draft。因为我不确定是否允许我展示整个源代码。所以我在这里只展示“外围模式”部分：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // Start up the CBPeripheralManager
    _peripheralManager = [[CBPeripheralManager alloc] initWithDelegate:self queue:nil];
}

- (void)peripheralManagerDidUpdateState:(CBPeripheralManager *)peripheral {
    // Opt out from any other state
    if (peripheral.state != CBPeripheralManagerStatePoweredOn) {
        return;
    }

    // We're in CBPeripheralManagerStatePoweredOn state...
    NSLog(@"self.peripheralManager powered on.");

    // ... so build our service.

    // Start with the CBMutableCharacteristic
    self.transferCharacteristic = [[CBMutableCharacteristic alloc] initWithType:[CBUUID UUIDWithString:TRANSFER_CHARACTERISTIC_UUID]
                                                                  properties:CBCharacteristicPropertyNotify
                                                                       value:nil
                                                                 permissions:CBAttributePermissionsReadable];

    // Then the service
    CBMutableService *transferService = [[CBMutableService alloc] initWithType:[CBUUID UUIDWithString:TRANSFER_SERVICE_UUID]
                                                                    primary:YES];

    // Add the characteristic to the service
    transferService.characteristics = @[self.transferCharacteristic];

    // And add it to the peripheral manager
    [self.peripheralManager addService:transferService];
}

/** Start advertising
 */
- (IBAction)switchChanged:(id)sender
{
    if (self.advertisingSwitch.on) {
        // All we advertise is our service's UUID
        [self.peripheralManager startAdvertising:@{ CBAdvertisementDataServiceUUIDsKey : @[[CBUUID UUIDWithString:TRANSFER_SERVICE_UUID]] }];
    }
    else {
        [self.peripheralManager stopAdvertising];
    }
} 
```

BLE 处于开机状态并调用 startAdvertising。但是 BLE 中心永远无法发现它。

**帖子更新：**

根据[mttrb](https://stackoverflow.com/users/1320303/mttrb)的建议，我在开始广告时添加了“CBAdvertisementDataLocalNameKey”。但是我的服务仍然无法被大多数应用程序发现，包括来自应用商店的一些应用程序。唯一可以发现我的服务的应用是来自应用商店的一个名为“BLE 扫描仪”的应用。

我的问题是：这是否意味着我的应用程序正在作为外围设备工作？但是为什么我自己的代码无法发现服务呢？我应该如何调试它？

我在中央模式下的代码是这样的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Start up the CBCentralManager
    _centralManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil];
}

- (void)centralManagerDidUpdateState:(CBCentralManager *)central
{
    if (central.state != CBCentralManagerStatePoweredOn) {
        return;
    }
    [self.centralManager scanForPeripheralsWithServices:nil options:nil];
}

- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI
{
......
}

- (void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error
{
    if (error) {
        NSLog(@"Error discovering services: %@", [error localizedDescription]);
        return;
    }
}

- (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error
{
    // Deal with errors (if any)
    if (error) {
        NSLog(@"Error discovering characteristics: %@", [error localizedDescription]);
        return;
    }
}

- (void)centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)peripheral error:(NSError *)error
{
    NSLog(@"Peripheral Disconnected");
    self.discoveredPeripheral = nil;
} 
```

didDiscoverPeripheral 和 didDiscoverServices 永远不会被调用。有什么问题？任何想法？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T23:37:24.327

还有一个名为[LightBlue](https://itunes.apple.com/us/app/lightblue/id557428110?mt=8&ign-mpt=uo=4)的高质量免费应用程序，您可以使用它来测试您的代码。它应该能够接收所有在外围模式下广告的设备，如果您想确保您的设备正常工作，它甚至可以将自己变成一个广告外围设备。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T04:01:44.147

我会尝试将`startAdvertising:`方法调用移动到您的`peripheralManagerDidUpdateState:`委托方法的末尾，看看是否有帮助。

我还将在您的方法调用中添加一个`CBAdvertisementDataLocalNameKey`键值对。`startAdvertising:`当广告没有名字时，我发现事情是不可靠的。

最后，我将投资App Store 中提供的[BLExplr 应用程序，以帮助扫描您的外围设备。](https://itunes.apple.com/us/app/blexplr/id524018027?mt=8)它消除了您的中心工作正常的假设。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-08T10:43:14.657

这个 Git 中心项目还对 CBPeripheralManager API 有所了解。称为[PeripheralModeTest](https://github.com/KhaosT/CBPeripheralManager-Demo)。此行对于设置广告数据特别有用

```
 NSDictionary *advertisingData = @{CBAdvertisementDataLocalNameKey : @"Device Name", CBAdvertisementDataServiceUUIDsKey : @[[CBUUID UUIDWithString:CBUUIDGenericAccessProfileString]]}; 
```

虽然我在 Apple iOS Developer Library 中还看不到任何官方文档。更具体地说，有关设置广告重复周期的任何内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-12T09:57:10.653

[BTLE Transfer](https://developer.apple.com/library/ios/samplecode/BTLE_Transfer/Introduction/Intro.html)示例中有这段（奇数）代码，可能会造成一些麻烦：

```
- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI
{
    // Reject any where the value is above reasonable range
    if (RSSI.integerValue > -15) {
        return;
    }

    // Reject if the signal strength is too low to be close enough (Close is around -22dB)
    if (RSSI.integerValue < -35) {
        return;
    } 
```

只需删除这两个 if 语句，因为它没有任何意义！

[我在这里](https://github.com/marchv/btle-transfer)提供了一个简化版本，可用于测试从外围设备发送到中心的大量消息。

请注意，`CBPeripheralManager`该类最初是在 iOS 6.0 中引入的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-26T13:11:49.130

我不知道您实际测试过的[BTLE Central Peripheral Transfer](http://developer.apple.com/library/ios/#samplecode/BTLE_Transfer/Introduction/Intro.html)的女巫版本，但当前版本要求 iOS 6。

所以我建议测试与 iOS 5.1 的链接，看看它显示了哪些兼容性问题。

# php - 在 Linux 上为 PHP5 配置 xDebug

> ID：13041936
> 
> 赞同：2
> 
> 时间：2012-10-24T01:56:45.207
> 
> 标签：php, linux, ubuntu, configuration, xdebug

据我所知，我已经将 xDebug 设置为在我的本地机器上工作，但显然不是。我试图从

![没有 xdebug](../Images/84250c1dcb0d059d06c2b0cf161b9745.png)

到

![用 xdebug](../Images/b2f6ddacf369343c8bbfa7ed37e03fda.png).

谁在乎？第二张图片是 xDebug 工作的，这意味着我可以让堆栈跟踪等工作。帮助！

我按照 xdebug 站点上的安装说明进行操作。我在 /etc/php5/apache2/php.ini 文件中包含以下内容：

```
zend_extension=/etc/php5/xdebug/xdebug.so
xdebug.default_enable = 1
xdebug.auto_trace = 1
xdebug.collect_vars = 1
xdebug.collect_params = 4 
```

查看 phpinfo() 时，我得到：

> 此程序使用 Zend 脚本语言引擎：Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies with Xdebug v2.2.1，版权所有 (c) 2002-2012，Derick Rethans

此外，在模块部分的下方，我看到带有它的设置的 xDebug 就在那里。

但是，当有错误时，我似乎无法让 xDebug 在我的页面上显示任何信息？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:09:36.313

> Xdebug 不格式化输出。

确保在 php.ini 中将PHP 的**html_errors设置为 1**

*   [xdebug 是否美化了 var_dump？](https://stackoverflow.com/questions/4678389/does-xdebug-beautify-var-dump)
*   [xdebug var_dump 函数颜色](https://stackoverflow.com/questions/4534312/xdebug-var-dump-function-colors)

# ruby-on-rails - Rails seed.rb 以管理员身份

> ID：13041938
> 
> 赞同：2
> 
> 时间：2012-10-24T01:57:02.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authorization, seed

我已经为我的应用推出了基于 Hartl 的自己的身份验证/授权系统。我想允许管理员让其他用户成为管理员，所以我在我的 user.rb 文件中做了这个：

```
attr_accessible :name, :email, :password, :password_confirmation, :order_id
attr_accessible :name, :email, :password, :password_confirmation, :order_id, :admin, :as => :administrator 
```

并将其放入我的用户更新操作中：

```
def update
   if current_user.admin?
      if @user.update_attributes(params[:user], :as => :administrator) 
```

这对我来说非常有用，但是必须进入控制台并输入变得很烦人

```
User.find(2).toggle!(:admin) 
```

或者无论如何，每当我想在数据库重置后成为我的第一个管理员用户时，或者就此而言，必须使用控制台或个人编辑来创建其他管理员。如果我可以播种“：as => administrator”，我会很高兴，所以我在我的seed.rb文件中尝试了这个，但它不起作用（质量分配错误）：

```
 admin = User.create(
    :name => "My Name",
    :email => "my email",
    :password => "password",
    :password_confirmation => "password",
    :admin => true,
    :as => :administrator
) 
```

知道是否有办法做到这一点？这会让我的生活轻松很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:54:39.917

我找到的最简单的解决方案是在创建用户后立即在种子.rb 文件中切换 admin。这样，我避免了“大量”分配，而不必在控制台中分配。所以：

```
admin = User.create(
    :name => "My Name",
    :email => "my email",
    :password => "password",
    :password_confirmation => "password"
)
admin.toggle!(:admin)
# I assume "admin.update_attribute(:admin, true)" would work as well. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:18:09.827

由于您有质量分配错误，我认为您应该只保留 `attr_accessible`User.rb 中的第二行并丢弃导致错误的第一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:25:29.777

我一直在寻找执行相同的操作并最终在seeds.rb 中这样做：

```
# db/seeds.rb
users = User.create({email: 'email@admin.com', username: 'admin', password: 'sEcReT', password_confirmation: 'sEcReT', role: 'admin'},
                    :as => :admin)

# models/user.rb
attr_accessible :email, :username, :password, :password_confirmation, :role, :as => :admin 
```

# c++ - 二叉树高度函数

> ID：13041948
> 
> 赞同：4
> 
> 时间：2012-10-24T01:57:37.373
> 
> 标签：c++, data-structures, binary-tree

我正在开发一个函数来查找二叉搜索树的高度。我找到了一种似乎应该可以工作的方法，但我一直收到此错误，我不知道它有什么问题： PA5.exe 中 0x00903417 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000004。

这是我的高度函数...

```
template <class T>
int BST<T>::height()
{

    return displayHeight(mRootNode);    

}

template <class T>
int BST<T>::displayHeight(BST<T> *node)
{
    if (node = NULL)
    {
        return 0;
    }

    int left = displayHeight(node->mLeft);
    int right = displayHeight(node->mRight); 

    if (left > right)
        return 1 + left;
    else
        return 1 + right;
} 
```

这是主要功能中的实现......

```
 cout << endl << "height: " << tree.height(); 
```

如果我应该包括其他任何内容，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T02:03:19.207

```
if (node = NULL) 
```

应该

```
if (node == NULL) 
```

因为在 C++`=`中是赋值运算符，并且`==`是用于比较的关系运算符。

**为什么会崩溃？**

当您这样做时`if (node = NULL)`，您将分配`NULL`给节点，并且由于 NULL 是`0`条件`if`失败。因此，您继续在节点的子节点上递归调用该函数。现在假设`node`第一次调用该函数时实际上是 NULL，您将对 NULL 的左右孩子进行递归调用！！！导致崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:04:23.480

您在 if 语句中将 null 分配给您的节点参数变量。

```
if (node = NULL)
{
    return 0;
} 
```

应该

```
if(node == NULL) ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T05:42:53.973

创建树时查找高度的方法（BST）：对于左子树和右子树：：

在创建实际树之前，将要放入二叉树的元素放入数组中。计算大于根的元素的数量，这将向树的左侧移动，右侧类似。

然后，当您将元素添加到树中时。每次将标志位设置为 1 或 0，具体取决于您是将其添加到左子树还是右子树。

```
if(root->right && flagleft==1)
     no_left--;
     else if(root->right && flagright==1)
         no_right--; 
```

这是在您将节点附加到左侧时。

```
if(root->left && flagl==1)
nl--;
else if(root->left && flagr==1)
nr--; 
```

这是在您将节点附加到右侧时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T03:48:48.053

这是因为您已将节点分配给 NULL 即 NULL 值为 0 ，因此条件失败。

做 if(node==NULL) 而不是 **if(node=NULL)**

# android - 将图像保存到所有设备上的 SD 卡

> ID：13041950
> 
> 赞同：2
> 
> 时间：2012-10-24T01:57:48.450
> 
> 标签：android

我的应用程序涉及从设备的图库中选择图像，然后将该图像的较小版本保存到 SD 卡上的文件夹中。我遇到的问题是一些用户报告说图像没有保存到文件夹中。然而，大多数用户报告说该应用程序运行良好，我不知道其他少数用户发生了什么。到目前为止，被报告遇到问题的设备如下：华为 T-Mobile myTouch、三星 GT-S5830i、HTC Evo 4G 和三星 Galaxy S2。我自己有一个摩托罗拉 Atrix 2，我没有遇到过这样的问题。

我的清单中已经有标签。我的大部分代码来自其他 stackoverflow 解决方案，用于从图库中获取图像，然后将其保存到 sd 卡。

从图库中获取图像：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) 
    {
         switch(requestCode) 
         {
            case SELECT_IMAGE:
                 image_dir = getPath(data.getData());

                 Bitmap myBitmap = decodeFile(new File(image_dir));

                 resizedBitmap = Bitmap.createScaledBitmap(myBitmap, (int)(myBitmap.getWidth()/2), (int)(myBitmap.getHeight()/2), true);
                 break;
         }
    }
    else
    {
         image_dir = "None";
    }
} 
```

将图像保存到 SD 卡：

```
OutputStream fOut = null;
File file = new File(Environment.getExternalStorageDirectory()+"/MyApp",imgname+".jpg");
fOut = new FileOutputStream(file);

resizedBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOut);
fOut.flush();
fOut.close(); 
```

对于大多数用户来说，这一切似乎都很好，但对于某些用户来说，图像并没有得到保存。这可能是权限问题还是我在代码本身中忽略的某种设置？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:42:43.313

原因可能是这些设备不使用流行的外部存储约定 /mnt/sdcard/ 。以下是[三星 Galaxy S2](https://stackoverflow.com/questions/5524105/how-could-i-get-the-correct-external-storage-on-samsung-and-all-other-devices)和[HTC Evo 4G](http://grokbase.com/t/gg/cerberus-support-forum/124hafmz1f/internal-vs-external-sd-card)的一些提示。可能问题不在于未安装 SD，但您应该按照 jaredzhang 的建议明确运行该检查。我还建议侦听最可能的错误并报告它们 - 例如，检查 SD 是否已安装，目标文件夹是否存在等。不用说，最好将您的手放在其中一个设备上并检查你自己。也许您也可以在线搜索这些设备的 getExternalStorageDirectory() 结果是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:24:47.073

据此，[_](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)

```
This directory may not currently be accessible if it has been mounted by the user on their computer, has been removed from the device, or some other problem has happened 
```

`Environment.getExternalStorageDirectory()`将返回 null，因此您应该先检查`Environment.getExternalStorageState()`。

# python - Python 发出的 grep 正则表达式，匹配这个模式

> ID：13041951
> 
> 赞同：2
> 
> 时间：2012-10-24T01:57:52.227
> 
> 标签：python, terminal, grep

我无法弄清楚如何通过我通过 Python 发出的 grep 命令来匹配此模式。

我想以以下形式匹配一个字符串

`foo.bar([anything including newlines, spaces, tabs])`.

我正在尝试：

```
regex = " foo.bar(.*) "
bashCommand = "grep"+" -r -h"+regex+baseDir
process = subprocess.Popen(bashCommand.split(), stdout=subprocess.PIPE)
requires = process.communicate()[0] 
```

但我无法匹配这个字符串

```
dojo.require("abc.def"

    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:39:00.383

Grep 逐行工作，所以“。” 实际上不匹配换行符。您可能会发现[此答案](https://stackoverflow.com/a/7167115/1739226)很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:38:02.237

默认情况下，python 的 "re" 模块有 "." 匹配除换行符以外的所有内容。您想将 re.DOTALL 作为标志传递给您的正则表达式。

例子：

```
rx = re.compile('foo\.bar\(.*\)', re.DOTALL)
assert rx.match('foo.bar("mystuff"\n\nand here!)') 
```

[http://docs.python.org/library/re.html#re.S](http://docs.python.org/library/re.html#re.S)

# php - PHP图像上传问题

> ID：13041954
> 
> 赞同：2
> 
> 时间：2012-10-24T01:57:55.283
> 
> 标签：php, javascript, jquery, html

我一直在创建 HTML5 拖放图像上传器。Javascript 方面的一切都很好，但是 PHP 让我发疯了！

我已经能够创建一个脚本，该脚本在放置图像时成功地将图像放置在文件夹中，但是一旦它尝试为图像创建缩略图并将图像链接放入用户数据库表中，它就会全部转到锅。我已经在这里坐了好几个小时了，尝试并尝试无济于事，所以我相信现在是格林威治标准时间凌晨 3 点左右，我应该承认失败并寻求一点帮助。

JavaScript：

```
$(function(){

var dropbox = $('#dropbox'),
    message = $('.message', dropbox);

dropbox.filedrop({
    paramname:'pic',

    maxfiles: 5,
    maxfilesize: 200,
    url: 'uploadCore.php',

    uploadFinished:function(i,file,response){
        $.data(file).addClass('done');
    },

    error: function(err, file) {
        switch(err) {
            case 'BrowserNotSupported':
                showMessage('Your browser does not support HTML5 file uploads!');
                break;
            case 'TooManyFiles':
                alert('Too many files!');
                break;
            case 'FileTooLarge':
                alert(file.name+' is too large! Please upload files up to 200mb.');
                break;
            default:
                break;
        }
    },

    beforeEach: function(file){
        if(!file.type.match(/^image\//)){
            alert('Only images are allowed!');

            return false;
        }
    },

    uploadStarted:function(i, file, len){
        createImage(file);
    },

    progressUpdated: function(i, file, progress) {
        $.data(file).find('.progress').width(progress);
    }

});

var template = '<div class="preview">'+
                    '<span class="imageHolder">'+
                        '<img />'+
                        '<span class="uploaded"></span>'+
                    '</span>'+
                    '<div class="progressHolder">'+
                        '<div class="progress"></div>'+
                    '</div>'+
                '</div>'; 

function createImage(file){

    var preview = $(template), 
        image = $('img', preview);

    var reader = new FileReader();

    image.width = 100;
    image.height = 100;

    reader.onload = function(e){            
        image.attr('src',e.target.result);
    };

    reader.readAsDataURL(file);

    message.hide();
    preview.appendTo(dropbox);

    $.data(file,preview);
}

function showMessage(msg){
    message.html(msg);
}

}); 
```

现在对于 PHP：

```
<?php

// db connection
 include("db-info.php");
    $link = mysql_connect($server, $user, $pass);
        if(!mysql_select_db($database)) die(mysql_error());

 include("loadsettings.inc.php");

//$upload_dir = 'pictures/';
$allowed_ext = array('jpg','jpeg','png','gif');

if(strtolower($_SERVER['REQUEST_METHOD']) != 'post'){
    exit_status('Error! Wrong HTTP method!');
}

if(array_key_exists('pic',$_FILES) && $_FILES['pic']['error'] == 0 ){

if (isset($_SESSION["imagehost-user"]))
   { 
      $session = true;
      $username = $_SESSION["imagehost-user"];
      $password = $_SESSION["imagehost-pass"];

      $q = "SELECT id FROM `members` WHERE (username = '$username') and (password = '$password')";
      if(!($result_set = mysql_query($q))) die(mysql_error());
      $number = mysql_num_rows($result_set);

      if (!$number) {
         session_destroy();
         $session = false;
      }else {
         $row = mysql_fetch_row($result_set); 
         $loggedId = $row[0];
    }
}

    $date = date("d-m-y");
    $lastaccess = date("y-m-d");
    $ip = $_SERVER['REMOTE_ADDR'];
    $type = "public";

    $pic = $_FILES['pic'];
        $n = $pic;
            $rndName = md5($n . date("d-m-y") . time()) . "." . get_extension($pic['name']);
                $upload_dir = "pictures/" . $rndName;
                    move_uploaded_file($pic['tmp_name'], $upload_dir.$pic['name']);

                    // issues starts here

                     $imagePath = $upload_dir;

                     $img = imagecreatefromunknown($imagePath);
                        $mainWidth = imagesx($img);
                        $mainHeight = imagesy($img);

                        $a = ($mainWidth >= $mainHeight) ? $mainWidth : $mainHeight; 

                         $div = $a / 150;
                         $thumbWidth = intval($mainWidth / $div);
                         $thumbHeight = intval($mainHeight / $div);

                            $myThumb = imagecreatetruecolor($thumbWidth, $thumbHeight);
                             imagecopyresampled($myThumb, $img, 0, 0, 0, 0, $thumbWidth, $thumbHeight, $mainWidth, $mainHeight);
                             $thumbPath = "thumbnails/" . basename($imagePath);
                             imagejpeg($myThumb, $thumbPath);

                             $details = intval(filesize($imagePath) / 1024) . " kb (" . $mainWidth . " x " . $mainHeight . ")" ; 
                             $id = md5($thumbPath . date("d-m-y") . time());

                             $q = "INSERT INTO `images`(id, userid, image, thumb, tags, details, date, access, type, ip)
                             VALUES('$id', '$loggedId', '$imagePath', '$thumbPath', '$tags', '$details', '$date', '$lastaccess', 'member-{$type}', '$ip')";
                                 if(!($result_set = mysql_query($q))) die(mysql_error());*/

                                    exit_status('File was uploaded successfuly!');

                            // to here

    $result = mysql_query("SELECT id FROM `blockedip` WHERE ip = '$ip'");
    $number = mysql_num_rows($result);
        if ($number) die(""); // blocked IP message

    function imagecreatefromunknown($path) {

        $exten = get_extension($path);

       switch ($exten) {
          case "jpg":
            $img = imagecreatefromjpeg($path);
            break;
          case "gif":
            $img = imagecreatefromgif($path);
            break;
          case "png":
            $img = imagecreatefrompng($path);
            break;
  }

  return $img;
}

}

exit_status('Something went wrong with your upload!');

// Helper functions

function exit_status($str){
    echo json_encode(array('status'=>$str));
    exit;
}

function get_extension($file_name){
    $ext = explode('.', $file_name);
    $ext = array_pop($ext);
    return strtolower($ext);
}   

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:59:57.660

似乎您将错误的路径传递给该`imagecreatefromunknown()`函数。你通过`$imagePath`等于`$upload_dir`，但你的图像目的地是`$upload_dir.$pic['name']`

# iphone - iPhone 和 iPad 的资产命名

> ID：13041967
> 
> 赞同：2
> 
> 时间：2012-10-24T01:58:55.113
> 
> 标签：iphone, objective-c, ios, ipad

是否可以有一个名为 architecture.png 的图像资产并将其重命名为 architecture~ipad.png 用于 iPad 版本？并且仍然在代码中使用它：

```
[UIImage imageWithName:@"architecture.png"]; 
```

那么这会为iPad版本寻找架构〜ipad吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T21:40:46.730

如果您的应用中有两个图像资源：

*   "architecture.png" (iPhone 版)
*   “architecture~ipad.png”（iPad版）

然后

```
[UIImage imageWithName:@"architecture.png"] 
```

将自动在 iPhone/iPad 设备上**加载正确的。**

（正如 DOOManiac 正确注意到的那样，这适用于 iOS 4 及更高版本。）

For more information, see "iOS Supports Device-Specific Resources" in the [Resource Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T04:05:35.990

**更新：**

从[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html)iOS Supports Device-Specific Resources 看来，从 iOS 4.0 开始，这似乎是可能的。

> 在 iOS 4.0 及更高版本中，可以将单个资源文件标记为仅在特定类型的设备上可用。此功能简化了您必须为通用应用程序编写的代码。您可以让捆绑加载例程选择正确的文件，而不是创建单独的代码路径来为 iPhone 加载一个版本的资源文件和为 iPad 加载不同版本的文件。您所要做的就是适当地命名您的资源文件。
> 
> 要将资源文件与特定设备相关联，请在其文件名中添加自定义修饰符字符串。包含此修饰符字符串会产生具有以下格式的文件名：
> 
> `<basename><device>.<filename_extension>`
> 
> 该`<basename>`字符串表示资源文件的原始名称。它还代表您从代码访问文件时使用的名称。同样，`<filename_extension>`字符串是用于标识文件类型的标准文件扩展名。该`<device>` 字符串是区分大小写的字符串，可以是以下值之一：
> 
> **~ipad** - 资源只能在 iPad 设备上加载。
> 
> **~iphone** - 资源只能加载到 iPhone 或 iPod touch 设备上。
> 
> 您可以将设备修饰符应用于任何类型的资源文件。例如，假设您有一个名为 MyImage.png 的图像。要为 iPad 和 iPhone 指定不同版本的图像，您将创建名称为 MyImage~ipad.png 和 MyImage~iphone.png 的资源文件，并将它们都包含在您的包中。要加载图像，您将继续在代码中将资源称为 MyImage.png 并让系统选择适当的版本，如下所示：
> 
> `UIImage* anImage = [UIImage imageNamed:@"MyImage.png"];`在 iPhone 或 iPod touch 设备上，系统加载 MyImage~iphone.png 资源文件，而在 iPad 上，它加载 MyImage~ipad.png 资源文件。如果未找到特定于设备的资源版本，系统将回退到查找具有原始文件名的资源，在前面的示例中，该文件名是名为 MyImage.png 的图像。

对于支持 iOS < 4.0 的设备，您可以按照以下方法进行操作。但我认为不再需要它了。仍然保持原样。

我能想到的一种解决方案是，通过为 iPad 定义一个宏来为每个图像文件附加 ~ipad.png。然后在使用此方法时始终调用此宏，因为`[UIImage imageWithName:imageName(@"architecture")];`它会将其转换`[UIImage imageWithName:@"architecture.png"];`为 iPhone 和`[UIImage imageWithName:@"architecture~ipad.png"];`iPad。

例如：-

```
#define IMAGENAME(Name) (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)?[(Name) stringByAppendingString:(@"~ipad.png")]:[(Name) stringByAppendingString:(@".png")] 
```

然后将其用作`[UIImage imageWithName:IMAGENAME(@"architecture")];`

它也可以定义为，

```
#define IMAGENAME(Name) (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)?[(Name) stringByReplacingOccurrencesOfString:@".png" withString:@"~ipad.png"]:(Name) 
```

然后将其用作`[UIImage imageWithName:IMAGENAME(@"architecture.png")];`

另一种解决方案是子类化`UIImage`类并覆盖`imageWithName`方法以在此处实现此逻辑。您需要在名称参数中搜索 .png 并将其替换为 iPad 的 ~ipad.png。之后，您可以直接将其`[UIImage imageWithName:@"architecture.png"]`用于 iPad 和 iPhone。这也可以通过创建`category`on`NSObject`或来实现`UIImage`。我认为没有其他方法可以实现这一目标。

# c# - 将 JSON 响应流转换为字符串

> ID：13041970
> 
> 赞同：5
> 
> 时间：2012-10-24T01:59:02.323
> 
> 标签：c#, .net, json

我正在尝试进行 POST，然后将 JSON 响应读入字符串。

我相信我的问题是我需要将自己的对象传递给 DataContractJsonSerializer 但我想知道是否有某种方法可以将响应转换为关联数组或某种键/值格式。

我的 JSON 格式如下： {"license":"AAAA-AAAA-AAAA-AAAA"} 我的代码如下：

```
using (Stream response = HttpCommands.GetResponseStream(URL, FormatRegistrationPost(name, email)))
{
   string output = new StreamReader(response).ReadToEnd();
   response.Close();

   DataContractJsonSerializer json = new DataContractJsonSerializer(typeof(string));
   MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(output));
   string results = json.ReadObject(ms) as string;

   licenseKey = (string) results.GetType().GetProperty("license").GetValue(results, null);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-24T02:02:54.240

我强烈建议您查看 Newtonsoft.Json：

[http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)

NuGet：[https ://www.nuget.org/packages/newtonsoft.json/](https://www.nuget.org/packages/newtonsoft.json/)

添加对项目的引用后，您只需`using`在文件顶部包含以下内容：

```
using Newtonsoft.Json.Linq; 
```

然后在您的方法中，您可以使用：

```
var request= (HttpWebRequest)WebRequest.Create("www.example.com/ex.json");
var response = (HttpWebResponse)request.GetResponse();
var rawJson = new StreamReader(response.GetResponseStream()).ReadToEnd();

var json = JObject.Parse(rawJson);  //Turns your raw string into a key value lookup
string license_value = json["license"].ToObject<string>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:03:25.113

你可以用字典做这样的事情

```
Dictionary<string, string> values = 
JsonConvert.DeserializeObject<Dictionary<string, string>>(json); 
```

或类似的东西，如果你已经知道你的对象

```
var yourobject = JsonConvert.DeserializeObject<YourObject>(json); 
```

用这个工具

[http://james.newtonking.com/projects/json/help/](http://james.newtonking.com/projects/json/help/)

参考这里 [使用 JsonConvert.DeserializeObject 将 Json 反序列化为 C# POCO 类](https://stackoverflow.com/questions/11126242/using-jsonconvert-deserializeobject-to-deserialize-json-to-a-c-sharp-poco-class)

# ruby-on-rails-3 - Rails/ActiveModel 将参数传递给 EachValidator

> ID：13041971
> 
> 赞同：13
> 
> 时间：2012-10-24T01:59:02.880
> 
> 标签：ruby-on-rails-3, validation, mongoid, aggregation, activemodel

我有一个非常通用的验证器，我想向它传递参数。

这是一个示例模型：

```
class User
  include Mongoid::Document

  field :order_type
  has_many :orders, inverse_of :user
  validates: orders, generic: true #i want to pass argument (order_type)

  field :task_type
  has_many :tasks, inverse_of :user
  validates: tasks, generic: true #i want to pass argument (task_type)
end 
```

和示例验证器：

```
class GenericValidator < ActiveModel::EachValidator
  def validate_each(object, attribute, value)
    if some_validation?(object)
      object.errors[attribute] << (options[:message] || "is not formatted properly") 
    end
  end
end 
```

有没有办法根据验证的字段将参数传递给验证器？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-28T11:27:57.540

我也不知道这一点，但是如果你想传递一个参数，那么将一个哈希传递给`generic:`而不是`true`. [这篇文章](http://www.perfectline.ee/blog/building-ruby-on-rails-3-custom-validators)详细介绍了您要遵循的确切过程：

```
class User
  include Mongoid::Document

  field :order_type
  has_many :orders, inverse_of :user
  validates: orders, generic: { :order_type => order_type }

  field :task_type
  has_many :tasks, inverse_of :user
  validates: tasks, generic: { :task_type => task_type }
end 
```

`GenericValidator`现在应该可以访问您要在验证中传递的两个参数：`options[:order_type]`和`options[:task_type]`.

然而，将它们分成两个验证器可能更有意义，它们都继承了[dpassage](https://stackoverflow.com/users/603989/dpassage)提到的共享行为：

```
 class User
    include Mongoid::Document

    field :order_type
    has_many :orders, inverse_of :user
    validates: orders, order: { type: order_type }

    field :task_type
    has_many :tasks, inverse_of :user
    validates: tasks, task: { type: task_type }
  end 
```

# sql-server-2008 - 条件 WHERE 子句

> ID：13041972
> 
> 赞同：1
> 
> 时间：2012-10-24T01:59:20.900
> 
> 标签：sql-server-2008, stored-procedures, where-clause

问题很简单——我相信答案也可能很简单。

系统是 SQL Server 2008 R2。

有一个带有`sp_WHYWHYWHY`3 个参数的存储过程 - 2 个是日期，一个是供应商代码。

语句中的`WHERE`子句如下所示：

```
OrderDate BETWEEN @StartDate AND @EndDate
AND SupplierCode = @SupplierCode 
```

业务流程已经改变 - 一如既往。所以现在在供应商代码中只有一个供应商（比如说`YY`）现在在业务方面与另一个供应商（假设`ABC`）保持一致。

因此，代码在查询时也需要说明`ABC`- 包括`YY`。

就像是

```
OrderDate BETWEEN @StartDate AND @EndDate
AND SupplierCode = CASE WHEN @SupplierCode = 'ABC' THEN 'YY','ABC' ELSE @SupplierCode END 
```

我知道你不能这样写——但这正是最终结果应该是的。

我该怎么做，真的吗？

感谢您抽出时间阅读和回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:22:42.003

不要想太多！您希望供应商代码与提供的值匹配，*或者*提供的值`ABC`与存储的供应商代码匹配`YY`。

尝试这个

```
AND ([SupplierCode] = @SupplierCode
OR ([SupplierCode] <> @SupplierCode 
    AND @SupplierCode ='ABC' 
    AND [SupplierCode] = 'YY')) 
```

# php - (php/oop) 方法不能双向工作

> ID：13041977
> 
> 赞同：0
> 
> 时间：2012-10-24T02:00:21.370
> 
> 标签：php, static-methods, method-chaining

我在 PHP 中有一些问题，我把这段代码放在我的 index.php 中：

```
$test = $wke ->sql
             ->insert("test")
             ->values(array("foo" => "bar"))
             ->go(); 
```

这段代码运行良好，但是当我在这样的方法（debug.class.php）中使用这段代码时：

```
$test = sql::insert("test")
             ->values(array("foo" => "bar"))
             ->go(); 
```

它不起作用：

```
Fatal error: Call to undefined method template::values() [...] 
```

我的“插入”（和“值”）方法在我的 SQL 类中，而不是我的模板类中。我知道我的第二个例子是在我的模板类中调用的，但最后我调用的是 sql::insert，而不是 self::insert 或 template::insert。这就是我迷路的原因。

对不起我的英语不好 ！先感谢您。

PS：这是我的 sql::insert 方法

```
static $queryBuffer;
public function insert($in) {
   self::$queryBuffer->type = "insert";
   self::$queryBuffer->data->insert = $in;
   return $this;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-24T04:37:37.937

如下更改插入功能。

```
static $queryBuffer;
public static function insert($in) {
   self::$queryBuffer->type = "insert";
   self::$queryBuffer->data->insert = $in;
   return $this;
} 
```

插入应该是静态的，以使用没有对象的类名调用。

# lisp - 如何格式化字符串列表

> ID：13041979
> 
> 赞同：6
> 
> 时间：2012-10-24T02:00:28.107
> 
> 标签：lisp, elisp

我有一个需要使用 emacs lisp 格式化*的字符串列表。*这是我能想到的唯一方法：

```
(setq slist '("is there" "any" "way" "directed iteration"))    
(format "%s _%s_ %s to do %S in elisp?" 
        (elt slist 0)
        (elt slist 1)
        (elt slist 2)
        (elt slist 3)
        (elt slist 4)) 
```

给我我想要的。

```
is there _any_ way to do "directed iteration" in elisp? 
```

一定有更优雅的方式，但经过深思熟虑，我没有看到它。我对 emacs lisp 很陌生，我可能会遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:50:29.507

使用`apply`：

```
(apply 'format "%s _%s_ %s to do %S in elisp?" slist) 
```

该`apply`函数将一个函数（或符号）作为其第一个参数，然后是多个单独的参数，最后是一个参数列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T17:08:02.870

我决定通过添加更多功能、修复一些错误和添加更多错误来将其变成一个独立项目！是的：）

您可以在此处找到该项目：[http ://code.google.com/p/formatting-el/source/browse/trunk/formatting.el](http://code.google.com/p/formatting-el/source/browse/trunk/formatting.el)

不确定这是多少错误，但乍一看它似乎有效：

```
(defun directive-end (c)
  (member c "csdoxXeg%"))

(defun pp-if-nil (spec)
  (position ?\% spec))

(defun pp-list (spec args)
  (let ((pos 0) (last 0) (fstring "% ") current seen-^)
    (catch 't
      (while t
        (setq pos (1+ (or (position ?% spec :start pos) -1))
              current (aref spec pos))
        (unless (and seen-^ (char-equal current ?\}) (null args))
          (princ (substring spec last (1- pos))))
        (setq last pos pos (1+ pos))
        (cond
         ((char-equal current ?^)
          (incf last)
          (setq seen-^ t))
         ((char-equal current ?\{)
          (setq pos (+ pos (pp-list (substring spec pos) (car args)))
                args (cdr args)
                last pos
                seen-^ nil ))
         ((char-equal current ?\})
          (if args (setq pos 0 last 0)
            (throw 't nil)))
         ((char-equal current ?%)
          (setq seen-^ nil last (1+ last))
          (write-char ?%))
         (t (unless args (error "Not enough argumens for list iteration"))
            (setf (aref fstring 1) current)
            (princ (format fstring (car args)))
            (setq args (cdr args)
                  seen-^ nil
                  last 
                  (or (position-if #'directive-end spec :start pos)
                      pos)))))) pos))

(defun cl-format (spec &rest args)
  (with-output-to-string
    (let ((pos 0) (last 0) (fstring "% ") current)
      (catch 't
        (while t
          (setq pos (1+ (or (position ?\% spec :start pos) -1))
                current (aref spec pos))
          (when (= pos 0) (throw 't nil))
          (princ (substring spec last (1- pos)))
          (setq last pos pos (1+ pos))
          (cond
           ((char-equal current ?^)
            (unless args
              (setq last (pp-if-nil spec)
                    pos last)))
           ((char-equal current ?\{)
            (setq pos (+ pos (pp-list (substring spec pos) (car args)))
                  args (cdr args)
                  last pos))
           ((char-equal current ?\})
            (error "Unmatched list iteration termination directive"))
           ((char-equal current ?%)
            (write-char ?%)
            (incf last))
           (t (unless args (error "Not enough argumens"))
              (setf (aref fstring 1) current)
              (princ (format fstring (car args)))
              (setq args (cdr args)
                    last 
                    (or (position-if #'directive-end spec :start pos)
                        pos))))
          (incf pos))))))

(cl-format "begin: %{%s = %d%^,%}; %% %c %% %{%{%s -> %d%^.%},%}"
           '(a 1 b 2 c 3) ?\X '((a 2 b 4 c 6) (a 1 b 3 c 5)))
"begin: a = 1,b = 2,c = 3; % X % a -> 2.b -> 4.c -> 6,a -> 1.b -> 3.c -> 5," 
```

这试图复制`~{ ... ~}`指令的一些（非常简单的）Common Lisp-like 打印行为。

# javascript - 在函数外更新函数内的变量？

> ID：13041980
> 
> 赞同：2
> 
> 时间：2012-10-24T02:00:48.133
> 
> 标签：javascript, cordova

我正在使用 PhoneGap LocalNotification 插件，它允许我在特定时间设置本地通知。

LocalNotification 插件的基本结构是这样的：

```
var notification = {
    init: function () {

    },
    clear_all: function () {
        notification.clear();
        plugins.localNotification.add({
            badge: 0,
        });

    },
    alert_ten: function () {
        var d = new Date();
        d = d.getTime() + 10 * 1000; //60 seconds from now
        d = new Date(d);
        plugins.localNotification.add({
            date: d,
            repeat: 'daily',
            message: varone + ' - ' + vartwo + '!',
            hasAction: true,
            badge: 1,
            id: '1',
            sound: 'horn.caf',
            background: 'app.background',
            foreground: 'app.running'
        });
    },
} 
```

如果您查看通知的消息部分，它由以下内容组成`varone + ' - ' + vartwo + '!'`。在页面加载时，`varone`从项目`vartwo`中填充。`localStorage`然后我调用`notification.alert_ten()`onLoad。

**这一切都很好，但有一个例外：**

这些`localStorage`项目是在用户与某个 div 交互时设置的，即单击它。然后，当应用程序加载时，它会检查这些值，并在 10 秒后提醒消息，说`this`和`that`，它从 LS 获取它们的值。

**如果**用户改变主意，并与改变 LS 项的不同 div 交互，LocalNotification 仍会使用原始 LS 项集运行。

这是意料之中的，因为 JS 会在函数中缓存变量。我认为可行的解决方案是在全局定义变量 above `var notification = {`，然后当用户与 div 交互时，更新 vars 以表示新变量。

全局变量：

```
var varone = localStorage.getItem("favorite");
var vartwo = localStorage.getItem("favorite-status").substr(2).toLowerCase();
... 
```

更新变量：

```
...
var varone = text;
var vartwo = favstatus;
... 
```

该函数`notification.alert_ten()`仍然使用全局变量中定义的原始值运行，而不是更新后的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T02:39:29.693

您可以编写 getter/setter 函数。这只是一个概念证明，您可以添加任何您喜欢的方法。只需确保`this.`在您想要在对象内部的函数之间共享的任何属性之前添加，或者您想要从对象外部访问的任何属性。

```
var notification = {
  setX : function (newX) {
    this.x = newX;
  },
  getX : function () {
    return this.x;
  },
  outputX : function () {
    document.write('x is ' + this.x + '<br>');
  }
} 
```

初始化和使用：

```
notification.setX(42);
console.log(notification.getX()); 
```

或者

```
notification[x] = 42;
console.log(notification[x]); 
```

甚至

```
notification.x = 42;
console.log(notification.x); 
```

[演示](http://jsfiddle.net/HFtVy/1/)

所以你的代码可能是这样的（除有趣的部分之外的所有部分）

```
var notification = {
    getMessage: function() {
        return this.message;
    },
    setMessage: function() {
        this.message = localStorage.getItem("favorite") + ' - ' + 
                       localStorage.getItem("favorite-status").substr(2).toLowerCase() + '!';
    },
    alert_ten: function () {
        plugins.localNotification.add({
            message: this.getMessage()
        });
    }
}

// After some event I guess
notification.setMessage();
// After some other event?
notification.alert_ten(); 
```

# wcf - WCF、数据更新和 EntityReference 对象无法序列化

> ID：13041984
> 
> 赞同：1
> 
> 时间：2012-10-24T02:01:24.257
> 
> 标签：wcf, entity-framework, .net-4.0, self-tracking-entities

我用 WCF 做了很多事情，我首先想到的是：“嗯，这个问题很奇怪”——但是在我弄清楚每一个之后，它总是在某种程度上是有意义的（有时更多，有时更少）。
但是现在我陷入了困境，并且凭借我所有的想象力，我想不出为什么会出现此错误的原因：

> 无法序列化 EntityReference 对象。当RelationshipManager 属于没有实现IEntityWithRelationships 的实体对象时，这种类型的对象不能被序列化。

把它放在一个上下文中，让我简单地告诉你我的程序：
我有一个客户端，它向我的 WCF 发送一个 ID。如果此 ID 正在使用中，我将从 EF 中获取它的相关对象（否则我将创建一个新对象）并将其发回。

这一切都是由 Selftracking Entities 完成的 - 并且让对象工作正常，以及第一次更新：

```
public static void UpdatePaperOnServer(ref PAPER p)
{
    var newP = ServiceClient.UpdatePaper(p);
    p = newP;
} 
```

引用“p”是 <Program> 中的一个字段，任何更改都将发生在此变量上。

这是 UpdatePaper 的服务器端实现。
如您所见，这里也不会发生任何魔术：

```
public PAPER UpdatePaper(PAPER p)
{
    p.ChangePaperOnDb(); //Simple static DAL-Accessor, works fine

    return p; //The Client should get any changes made by other users so far, that's why I'll give the obj back... or if it's a new obj and it has an ID now
} 
```

正如我所说，我的第一个更新工作正常，但是一旦我再次触发更新例程，我就会收到上面提到的这个错误。

在与我的好伙伴 google 相处了一段时间后，我发现只有一种方法可以将 .NET 版本从 4.0 更改为 3.5。但我不知道这是否适合我，因为我无法将运行时从 4.0 更改为 3.5。

如果有人知道发生了什么 - 请告诉我。非常感谢！

# c++ - 在 C++ 中跨进程边界发送对象的深层副本

> ID：13041987
> 
> 赞同：4
> 
> 时间：2012-10-24T02:02:21.350
> 
> 标签：c++, linux, serialization, pipe

我有一种情况，我在 C++ 中有一个类的对象，它需要使用 Linux 管道跨进程边界（进程 1 到进程 2）发送。我在网上搜索了如何在 C++ 中进行序列化。我找到了[boost](http://www.boost.org/doc/libs/1_47_0/libs/serialization/doc/index.html)，但它需要在课堂上进行一些更改。在我的情况下，我无法更改课程。

这个类有很多指针，嵌套持续到3层（类1有类2类型的指针1->类2有类3类型的指针2->类3有类4类型的指针3->类4）。有什么方法可以使用管道发送这个对象，以便可以在第二个进程中重新创建它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T02:10:12.537

您需要以某种方式序列化该类。您的选择究竟如何，但您可以使用[`JSON`](http://json.org/)、`XML`或 之类的格式或您决定的某种二进制格式。没有看到任何关于你的课程的更多细节，没有什么要补充的。

另一种选择可能是使用[共享内存](http://en.wikipedia.org/wiki/Shared_memory)段来存储类，但这会带来指针数学、并发性和其他复杂性的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:09:06.237

您是否考虑过[Memento 模式](http://en.wikipedia.org/wiki/Memento_pattern)的应用？您可以创建一个或多个类来处理如何序列化对象（文本或二进制）的细节。

您为保存对象而创建的类也将知道如何从您在下一个过程中选择的序列化格式中实例化新对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T02:09:57.803

您将不得不进行某种序列化，因为您不能跨管道或类似的东西复制构造。如果您无法更改类，那么您唯一的选择是编写一个使用顶级类的公共 API 的外部函数或类来获取所有部分并序列化该数据。然后在另一端，您必须从流中重建它。

# scripting - VBscript 输出未正确写入

> ID：13041988
> 
> 赞同：2
> 
> 时间：2012-10-24T02:02:24.783
> 
> 标签：scripting, vbscript

您好脚本专家，

我在远程服务器上有一个日志文件.. 在远程服务器中`c:\vb\text.log`

我已将我的远程系统包含在`list.Txt`类似

```
server1
server2 
```

下面是日志的示例..

```
application working
[10/23/2012 working

[10/24/2012 nos appdown
error found you need to check this 
```

下面是我的脚本。

```
Set Fso = CreateObject("Scripting.FileSystemObject")
Set InFile = fso.OpenTextFile("list.Txt")
Set out = fso.CreateTextFile("error.log")

Const ForReading = 1
Do While Not (InFile.atEndOfStream)
  strComputer = InFile.ReadLine
  today = Date()
  Set fso = CreateObject("Scripting.FileSystemObject")
  strFilePath = "\\" & strComputer & "\c$\vb\"

  Set InputFile = fso.OpenTextFile(strFilePath & "text.log", 1)
  Do While Not (InputFile.AtEndOfStream)
    strLine = InputFile.ReadLine

    If Left(line, Len(today)+1) = "[" & today Then
      ' line timestamped with today's date
      If InStr(line, "nos") > 0 Then
        ' line contains "error"
        out.WriteLine InStr & vbTab & strComputer
      End If
    End If
  Loop
  InputFile.close
Loop

out.Close
InFile.Close 
```

基本上，上面的脚本应该从当前日期行仅从`text.log`. `[10/24/2012 nos appdown`然后如果在当前日期行中发现为“Nos”..那么它应该写入`error.log`带有计算机名称。

在我的情况下，输出没有出现，但看起来它正在搜索字符串“Nos”。

请让我摆脱这种情况......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T06:50:01.060

错误是您没有指定显式选项。像这样，

```
option explicit 
```

这将迫使 VBScript 抱怨未声明的变量。通过这样做，您可以轻松地发现拼写错误的变量名。带有 dim 语句的 Delcare 变量，就像这样

```
dim Fso, out 
```

再次运行脚本，发现您在比较中使用了一个不存在且未初始化的变量：

```
strLine = InputFile.ReadLine ' Read stuff to strLine
If Left(line, Len(today)+1) = "[" & today Then ' ERROR. line has no value! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:34:33.100

您对我的脚本的改编存在几个问题：

*   [正如vonPryz](https://stackoverflow.com/a/13044177/1630171)已经指出的那样，这是问题的原因：

    > `strLine = InputFile.ReadLine`
    > `If Left(line, Len(today)+1) = "[" & today Then`

    当您将变量名称从`file`更改为时，`strFile`您必须更改该变量的*每次*出现，而不仅仅是分配它的行。

*   `out.WriteLine InStr & vbTab & strComputer`

    此行也会失败，因为[`InStr`](http://msdn.microsoft.com/en-us/library/wybb344c%28v=vs.84%29.aspx)它是一个函数，并且您没有使用正确数量的参数调用它。

*   `today = Date()`

    这不应该在循环中，除非您希望在脚本运行期间更改日期*并且*需要在每个循环周期中都有当前日期。

*   `Set fso = CreateObject("Scripting.FileSystemObject")`

    `fso`在脚本的开头实例化。无需重新实例化它，尤其是在每个循环周期中。那只是浪费资源。

*   `Const ForReading = 1`

    当您从不使用常量时，定义常量是没有意义的。

*   `Do While Not ...`

    使用`Do Until ...`会更容易阅读和理解。

# php - 当输入值为 '0' 时，empty($_POST['var']) 返回 true

> ID：13041989
> 
> 赞同：5
> 
> 时间：2012-10-24T02:02:25.970
> 
> 标签：php, html, post, input

> **可能重复：**
> [php: '0' 作为带有 empty() 的字符串](https://stackoverflow.com/questions/4139301/php-0-as-a-string-with-empty)

我有一个像这样的形式的输入

```
<input name='var' type='number'> 
```

提交表单时，输入通过 POST 发送到 PHP 文件。在 PHP 文件上，它通过检查来检查输入是否已填写

```
empty($_POST['var']) 
```

当我在文本框中输入“0”（零）并提交表单时，PHP 代码为空（$_POST['var']）返回“1”，即使我已经清楚地尝试了 print_r($_POST) 和 'var'值为“0”。

这应该发生吗？我是否还需要检查 == 0 这个异常？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:08:14.287

要检查该字段是否填写，请使用`isset($_POST['var'])`代替`empty($_POST['var'])`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:07:17.003

您不能`empty`仅用于检查它是否为空字符串或字符串仅包含空白字符。

像这样使用：

```
function isEmpty($key) {
  return isset($_POST[$key]) && trim($_POST[$key]) === '';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T02:31:05.530

如果要检查的变量未定义，则 empty() 返回 true、0、空字符串 ''、false、空数组或 null。所以你看到的结果是 100% 正确的。

如果 0 是合法值，请使用 is_set()。

# windows-server-2008 - 一台虚拟主机不响应子域，而其他所有主机正常工作

> ID：13041990
> 
> 赞同：1
> 
> 时间：2012-10-24T02:02:30.540
> 
> 标签：windows-server-2008, subdomain, httpd.conf

我有一台运行 Windows Server 2008 的服务器在工作。我在上面安装了 wamp 并用它来托管我的所有网站。对于多个站点，我在 httpd.conf 文件中包含以下内容：

```
<VirtualHost *:80>
    ServerName www.NewURL.com
    ServerAlias NewURL.com *.NewUrl.com
    DocumentRoot "X:/www/NewURL/"
</VirtualHost> 
```

保存 httpd.conf 文件后，我打开我的 DNS 管理器，添加域，并添加 2 条记录。第一个的“名称”设置为 *（使 FQDN = *.NewURL.com）。我将 IP 地址更改为我的服务器本地地址（比如 192.158.5.5）。

这个过程对大约 40-50 个 URL 非常有效，甚至允许我访问 customerName.OldURL.com 并仍然正确检索 index.php 文件。

我有一个新站点添加到我的 httpd.conf 文件以及我的 DNS 管理器中。该网站在我的工作 IP 地址范围内是 100% 可用的，但是当我在家测试该网站时，只能访问主域 (www.NewURL.com)，而不是 clientName.NewURL.com。根据 www.isup.me，clientName.NewURL.com 超时并且无法访问。但是，NewURL.com 工作得很好。

我已经完全按照我在此服务器上运行的所有其他 URL 设置了 NewURL.com。我已经完成了事件并从头开始......结果相同。

除了虚拟主机设置和 DNS 管理器之外，任何人都知道我可以检查的其他内容吗？

# php - 如何在点击时设置 Cookie？

> ID：13041995
> 
> 赞同：1
> 
> 时间：2012-10-24T02:02:46.523
> 
> 标签：php, jquery, cookies, session-cookies

> **可能重复：**
> [使用 JavaScript 获取和设置单个 cookie 值的“最佳”方式是什么](https://stackoverflow.com/questions/260749/what-is-the-best-way-to-get-and-set-a-single-cookie-value-using-javascript)

我制作了一个通知栏，您可以在网站顶部看到它。有一个带有文本“close x”的 ap 标签，单击该标签将使用 jquery 向容器添加一个类并隐藏该栏。我想要做的是在用户单击它时为用户创建一个 cookie，以便保存隐藏栏的选择，直到他们结束在网站上的会话。

我真的不太了解设置cookies，有什么想法吗？

这是现场版：[http ://www.brainbuzzmedia.com/themes/simplybusiness/](http://www.brainbuzzmedia.com/themes/simplybusiness/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:14:28.950

使用 jQuery -Cookie 插件

**设置饼干**

```
$.cookie('SampleKey', 'SampleValue', { path: '/' }); 
```

**获取饼干**

```
$.cookie('SampleKey'); 
```

我假设您有一个 div，您想在其中写入文本“已关闭” **更新**

HTML

```
<div id="close"></div> 
```

JS

```
if($.cookie('CookieKey')=='closed'){
    $("#close").html('Closed');
} 
```