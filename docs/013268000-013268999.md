# StackOverflow 问答 13268000-13268999

# twitter-bootstrap - 空的 Twitter Bootstrap 图标

> ID：13268002
> 
> 赞同：0
> 
> 时间：2012-11-07T10:42:11.437
> 
> 标签：twitter-bootstrap

```
<a>
   <i class="icon-trash"></i>
</a> 
```

这实际上是我在我的网站上用作按钮的东西。但有时我的 . 我很困惑。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:10:16.213

你需要刷新浏览器，或者清除它的缓存。

# android - 如何在键入时隐藏密码的字母

> ID：13268004
> 
> 赞同：7
> 
> 时间：2012-11-07T10:42:11.950
> 
> 标签：android

我正在处理一个带有 Android 的应用程序。我的要求是在用户输入密码时隐藏密码。我知道如何隐藏密码，但用户输入的密码在转换为不可读格式之前是可见的一段时间。任何人都可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T21:29:03.530

输入时隐藏密码字母的 TransformationMethod 的实现：

```
public class LoginActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // example of usage
    ((TextView) findViewById(R.id.password)).setTransformationMethod(new HiddenPassTransformationMethod());
}

private class HiddenPassTransformationMethod implements TransformationMethod {

    private char DOT = '\u2022';

    @Override
    public CharSequence getTransformation(final CharSequence charSequence, final View view) {
        return new PassCharSequence(charSequence);
    }

    @Override
    public void onFocusChanged(final View view, final CharSequence charSequence, final boolean b, final int i,
                               final Rect rect) {
        //nothing to do here
    }

    private class PassCharSequence implements CharSequence {

        private final CharSequence charSequence;

        public PassCharSequence(final CharSequence charSequence) {
            this.charSequence = charSequence;
        }

        @Override
        public char charAt(final int index) {
            return DOT;
        }

        @Override
        public int length() {
            return charSequence.length();
        }

        @Override
        public CharSequence subSequence(final int start, final int end) {
            return new PassCharSequence(charSequence.subSequence(start, end));
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T11:15:57.283

不要将默认编辑文本属性设置为**密码**。相反，您可以使用`addTextChangedListener()`which 将在用户输入字符后立即被调用。维护一个活动级别字符串，例如“mPass”。在`TextWatcher()`,`onTextChanged`方法中，将字符附加到您的 mPass 并用 * 替换输入字符。

但是您必须小心，因为`TextWatcher()`即使您将字符替换为 *. 如果处理不当，它将被递归调用，导致应用程序崩溃。

乏味的方式，但它会工作......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-24T06:34:15.023

一个更简单的原因是将其添加到您的 xml 文件中：

```
android:inputType="textPassword" 
```

例子：

```
<android.support.v7.widget.AppCompatEditText
                android:id="@+id/password_edit_text"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="textPassword"
                android:singleLine="true" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-23T09:41:49.370

如果您希望在键入时仅显示最后一个字符或第一个字符（如果字符序列长度 == 1）（未屏蔽）。

```
public class LoginActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // example of usage
    ((TextView) findViewById(R.id.password)).setTransformationMethod(new AsteriskPasswordTransformationMethod());
}
public class AsteriskPasswordTransformationMethod extends PasswordTransformationMethod {
    @Override
    public CharSequence getTransformation(CharSequence source, View view) {
        return new PasswordCharSequence(source);
    }

    private static class PasswordCharSequence implements CharSequence {
        private CharSequence mSource;
        public PasswordCharSequence(CharSequence source) {
            mSource = source; // Store char sequence
        }
        public char charAt(int index) {
            // Only the last character or the first character if length == 1 is visible to the user
            return (mSource.length() == index + 1) ? mSource.charAt(index) : '*'; 
        }
        public int length() {
            return mSource.length(); // Return default
        }
        @NotNull
        public CharSequence subSequence(int start, int end) {
            return mSource.subSequence(start, end); // Return default
        }
    }
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T10:47:40.693

android中有TextView的属性：

> android:password 字段的字符是否显示为密码点而不是它们本身。

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:password](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3apassword)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-07T10:47:05.653

设置`android:password="true"`。它会做你所期望的。

例子：

```
 <EditText 
            android:id="@+id/editText1"
            android:inputType="number"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:password="true" /> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-06-29T18:47:40.427

只需进入一般，安全性，然后滚动直到找到“使密码可见”（键入密码时简要显示密码字符），这将在短时间内阻止字母出现，并减少有人阅读您的密码的机会当你输入它。

# iis-7 - Wix3.6 是否同时支持 IIS6 和 IIS7？

> ID：13268010
> 
> 赞同：0
> 
> 时间：2012-11-07T10:42:34.960
> 
> 标签：iis-7, wix, iis-6, wix3.6

我打算编写一个支持 IIS6 和 IIS7+ 的 wix 设置。Wix3.6 的 IIS 扩展是否支持两者？这意味着编写一次，同时运行？或者我应该为每个服务器版本编写单独的代码，甚至是自定义操作？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:03:52.640

好消息是：我使用默认的 IIS 扩展编写了 wix3.6 代码，它可以在服务器 II6 和 IIS7 上运行，而无需针对特定服务器进行任何特殊的代码调整:-) –

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:06:43.223

据我所知， WiX [IIsExtension](http://wix.sourceforge.net/manual-wix3/iis_xsd_index.htm)能够处理任何版本的 IIS。至少，我已经成功地将它与 IIS 5+ 一起使用。该扩展包含许多用于创建（和修改）网站、应用程序池、虚拟目录等的元素。

针对不同版本 IIS 的代码的不同之处在于，某些属性（或元素）适用于更高版本的 IIS，而其他属性（或元素）则适用于旧版本。例如，`<iis:WebAppPool>`元素对于 IIS6 之前的版本没有意义。另一方面，元素的`Isolation`属性`<iis:WebApplication>`只对 IIS5 及更早版本有效。

因此，如果您打算支持不同的 IIS 版本，例如 5 / 6 / 7+，您很可能最终会拥有许多`<iis:WebSite>`定义，并针对相应的目标 IIS 版本进行适当的配置。

# javascript - console.log() 不输出 jQuery 选择对象的 HTML

> ID：13268015
> 
> 赞同：22
> 
> 时间：2012-11-07T10:42:51.203
> 
> 标签：javascript, google-chrome, console

`console.log`在 Google Chrome 中使用时遇到问题。突然，当我输出一个元素时，`$(this)`它的显示如下：

```
[<div>, context: <div>] 
```

或者

```
[jQuery.fn.jQuery.init[1]] 
```

在控制台中。（两者都来自同一行`console.log($(this))`：）

这个问题昨天不知从何而来。代码没有问题。我在另一台计算机上记录了完全相同的内容，它的显示如下：

```
[<div class='element'></div>, ...] 
```

**更新：**新的 Chrome 版本改变了输出`console.log()`

有谁知道我怎样才能恢复到 Google Chrome 控制台的原始设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T10:45:50.087

要回答这个问题：

*   有谁知道我怎样才能恢复到 Google chrome 控制台的原始设置？

没有设置来获取 console.log() 的先前输出。您可以：

*   降级浏览器（使用旧版本的 chrome 或[基于 chromium 的替代品](http://www.howtogeek.com/108384/6-alternative-browsers-based-on-google-chrome/)）
*   `console.log()`通过添加自己的覆盖`function log()`
*   在某些情况下使用 outerHTML 或升级到 chrome 25.0.1323.1 (dev channel) where console.log($(#Selector)[0]); 再次返回 outHMTL（见下文）。

### Chrome 23/24：console.log() 的输出***有时会发生变化***

根据 user916276，console.log(jQuery-Object) 的输出发生了变化：

```
// output of console.log($jQuerObject) 
[<div class='element'></div>, ...] // in chrome <= 23
[<div>, context: <div>]            // in chrome 24 
```

用户[brentonsrine](https://stackoverflow.com/users/925897/brentonstrine)让我意识到我的 context.outerHTML 并不总是有效。

[我用一个新示例](http://jsfiddle.net/jXjb2/8/)更新了我的代码。似乎存在`jqObject.context.outerHTML`取决于您如何将 jQuery-Object 传递给函数。我使用[chrome 开发通道](http://www.chromium.org/getting-involved/dev-channel)(25.0.1323.1) 和两个基于铬的版本 (21、22) 对其进行了测试。

```
console.log($(this)); // old chrome versions 
// new chrome version >23
// if you pass this to the function see my getThis(_this) function
console.log($(this).context.outerHTML); 
// if you use a jQuery selector
console.log($(this)[0]);   // at least in chrome build 25.0.1323.1 
```

以免产生误会。这个答案是关于将 jQuery 对象写入最近的 google chrome 浏览器（版本 24、25）的[内置控制台的更改行为。](http://paulirish.com/2011/a-re-introduction-to-the-chrome-developer-tools/)

### 铬源代码

[我查看了 Console.cpp](http://trac.webkit.org/changeset/133614/trunk/Source/WebCore/page/Console.cpp)和[时间线视图](http://trac.webkit.org/timeline?from=2012-11-06T08:14:27-08:00&precision=second)中的 chrome 源代码更改，以了解[WebInspector](http://trac.webkit.org/wiki/WebInspector)中的更改。我找不到导致`console.log()`. 我认为这与[对 ConsoleView.js](http://trac.webkit.org/changeset/133150/trunk/Source/WebCore/inspector/front-end/ConsoleView.js)、[2](http://trac.webkit.org/changeset/127412/trunk/Source/WebCore/inspector/front-end/ConsoleView.js)、[3](http://trac.webkit.org/changeset/126709/trunk/Source/WebCore/inspector/front-end/ConsoleView.js)的更改有关。如果有人想启动`console.log()`返回与 Chrome 21、22 相同的输出，他可以提交错误。这[两个](https://bugs.webkit.org/show_bug.cgi?id=101021) [错误](https://bugs.webkit.org/show_bug.cgi?id=99941)可以用作模板来放置更改请求。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-27T22:28:19.863

`console.log.apply(console, $(this));`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-07T10:46:30.800

输出是正确的，因为 $(this) 指的是 jQuery 选择对象，而不是底层的 DOM 对象。

如果您希望输出原始 DOM 元素，可以尝试以下操作：

```
 console.log( $( this ).get(0) ) 
 // Or just 
 console.log( this ) 
```

或者你也可以这样做：

```
 console.log( $( this ).html() ) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-04T04:34:04.200

这是一个比`console.log.apply(console, obj);`我刚刚发现的更好的解决方案。查看jQuery 选择器结果集`console.dirxml(obj);`时，哪个输出几乎相同。`obj`但是，只有后者在`obj`jQuery 选择器结果集中的特定元素时才有效。

这是您可以在此页面上执行的演示...

```
var i=0
console.log(++i);
console.dirxml($$('.answer'));
console.log(++i);
console.dirxml($$('.answer')[0]);
console.log(++i);
console.log.apply(console, $$('.answer'));
console.log(++i);
console.log.apply(console, $$('.answer')[0]); 
```

您会看到#4 日志“未定义”。

![在此页面上的控制台上执行。](../Images/a1598b9de8db2fd5e5b0a8c93c06d3f2.png)

因此，从现在开始，我将使用`console.dirxml`它，因为它简单、有效且内置。必须`console`作为第一个参数传递，否则`apply`无论如何都不会和我坐在一起。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-28T22:55:25.663

我对@brentonsrine 答案的编辑被拒绝了，所以我要为它做一个新的答案。但是请参阅[此页面上的其他答案以](https://stackoverflow.com/a/15802584/117471)获得**更好的解决方案**。

这个演示向您展示了为什么我们关心记录这种新方式而不是普通方式......

```
// paste this whole block into the console of THIS PAGE and see a working demo!

var domlog = function(obj){ console.log.apply(console, obj); };

domlog($('#answer-13594327'));

// compare ^that^ to the normal element logging...

var normallog = function(obj){ console.log(obj); };

normallog($('#answer-13594327')); 
```

![2 种不同登录方法的演示](../Images/8274b538f9043e50b9b25e112a30b72e.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-14T16:49:07.703

默认情况下，当您执行 console.log($(element)) 时，chrome 现在会返回一个对象，其中包含与该元素有关的所有详细信息。

它实际返回的示例

```
 console.log($('input:first'));
  [<input>, prevObject: c.fn.c.init[1], context: #document, selector: "input:first"] 
  0: <input>
  context: #document
  length: 1
  prevObject: c.fn.c.init[1]
  selector: "input:first"
  __proto__: Object[0] 
```

所以如果你做 console.log($('input:first')[0]) 你会得到你想要的结果。

希望这可以帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-27T21:24:14.583

```
console.log.apply(console, [].slice.call($('p'), 0))
-> ►&lt;p>…&lt;/p>, ►&lt;p>…&lt;/p>, <p class="label-key">viewed</p> 
```

**更新：** [更简单的解决方案](https://stackoverflow.com/questions/13268015/console-log-not-outputting-html-of-jquery-selection-object/13594327#13594327)。

* * *

控制台输出更改背后的基本原理：

> 请求不包含属性/文本内容的理由是什么？

来自 DevTools 开发人员 pfeldman 的回应：

> 转储 DOM 列表的人欣赏密集的外观。

[crbug.com/50316](https://code.google.com/p/chromium/issues/detail?id=50316#c37)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-26T20:29:53.690

这是我的解决方案，将 console.log 包装在我自己的函数中，它有一些缺点，比如它没有告诉你问题发生的行号，但我通过输出重要的日志消息来弥补......如果有人想随意改进它！

注意：`underscore.js`是一个依赖，我相信你可以在纯 JS 中做到这一点，但我总是依赖 underscore.js :)

```
// wrap the console.log function
var log = function(data) {
    // switch setting
    var allowed = true;
    if (allowed) {
        console.log("LOG");
        console.log(typeof data);
        if (typeof data == "object" || typeof data == "array") {
            _.each(data, function(item) {
                console.log(item);
            });
        } else {
            console.log(data);
        }
    }; 
```

带回家的信息是：

```
if (typeof data == "object" || typeof data == "array") {
            _.each(data, function(item) {
                console.log(item);
            });
        } else {
            console.log(data);
        } 
```

然后你就这样做：并在控制台中`log($(".some.class"));`获取元素作为DOM 对象。`old school`

# scala - 在 Scala 中执行 map/getOrElse 返回 Unit 的惯用方式是什么？

> ID：13268017
> 
> 赞同：8
> 
> 时间：2012-11-07T10:42:57.767
> 
> 标签：scala, functional-programming

如果一个值是 Some(...) 并且如果一个值是 None 做另一个副作用，那么最惯用的方法是什么。以下是我目前倾向于写的内容：

```
def doSideEffectA(value: Int) {
  // ...
}

def doSideEffectB() {
  // ...
}

def doSideEffect(valueOption: Option[Int]) {
  valueOption map { value =>
    doSideEffectA(value)
  } getOrElse {
    doSideEffectB()
  }
} 
```

我的问题是，如果 valueOption 为 None，我不需要做任何事情，这就是我要写的：

```
def doSideEffectNothingIfNone(valueOption: Option[Int]) {
  valueOption foreach { value =>
    doSideEffectA(value)
  }
} 
```

map/getOrElse 通常不用于副作用上下文，而 foreach 是。我对 valueOption map { ... } getOrElse { ... } 返回 Unit 不太满意，因为我并没有真正从我的 Option[Int] 中“获取”任何东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T10:51:29.653

Kim Stebel 说的：模式匹配是一个简单的解决方案。

```
valueOption match {
  case Some(value) => doSideEffectA(value)
  case None => doSideEffectB()
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T14:11:41.470

Scala 2.10 包含一个`fold`方法`Option`，适用于您需要两者`None`并`Some`解析为相同类型（包括`Unit`）的任何情况：

```
scala> Option("salmon").fold(println("No fish")){f => println(s"I like $f")}
I like salmon 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T11:13:14.870

使用 scalaz 你会得到一个`fold`方法 on `Option`，它接受两个函数并根据你是 a`Some`还是 a来执行其中一个函数`None`：

```
scala> some(3).fold({ x => println(x) }, println("FOO"))
3

scala> none[String].fold({ x => println(x) }, println("FOO"))
FOO 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-07T11:37:35.717

[Scalaz](http://code.google.com/p/scalaz/) has `cata`，这将允许您像这样声明它：

```
valueOption.cata(doSideEffectA, doSideEffectB) 
```

从未使用过它，但对我来说它看起来非常有用且可读。这是它的实现方式：

```
 /**
   * Catamorphism over the option. Returns the provided function `some` applied to item contained in the Option
   * if it is defined, otherwise, the provided value `none`.
   */
  def cata[X](some: A => X, none: => X): X = value match {
    case None => none
    case Some(a) => some(a)
  } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-07T11:11:41.863

尽管我仍然认为模式匹配是最易读的选项，但您也可以按照自己的方式使用它，并`Option`使用隐式转换定义一个包装器。

```
class Else(doit:Boolean) {
  def orDoThis[A](f: =>A) {
    if (doit) f
  }
}

class OptionWrapper[A](o:Option[A]) {
  def each[B](f: A=>B):Else = o match {
    case Some(v) => f(v); new Else(false)
    case None => new Else(true)
  }
}

implicit def wrapOption[A](o:Option[A]):OptionWrapper[A] = new OptionWrapper(o) 
```

然后你可以写例如：

```
Some(1) each println orDoThis println("nothing there") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-07T11:02:22.657

最惯用*的*方式确实是模式匹配。否则，您可以创建一个提供所需方法的隐式包装器：

```
class RichOption[T](o: Option[T]) {
  def ifEmpty(action: => Unit) { if (o.isEmpty) action }
}

object RichOption {
  implicit def enrich(o: Option[T]) = return new RichOption(o)
} 
```

编辑：@KimStebel 的答案中的那个更符合所需的用法。

# mysql - 如何将星号传递给 bash heredoc？

> ID：13268018
> 
> 赞同：7
> 
> 时间：2012-11-07T10:42:59.447
> 
> 标签：mysql, bash, glob, heredoc

我从 bash shell 中执行带有星号的 MySQL 语句：

```
query=`cat <<EndOfMySQL
INSERT tmp_table
SELECT * FROM table
;
EndOfMySQL
`

echo $query

echo $query | mysql database 
```

问题是星号被当前目录中的文件列表替换，查询变得错误。如何避免这种行为？无论我使用反引号还是`$()`. 我希望有一些转义序列，例如`\*`，但至少这个不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T10:49:45.110

您可以通过引用分隔符字符串来防止此处文档中的参数扩展、命令替换和算术扩展：

```
... <<\EndOfMySQL
...
EndOfMySQL 
```

转义单个字符也将阻止上面列出的扩展。

编辑：请注意，here-doc 的行不受文件名生成（通配符）的影响！

我想在这种情况下的问题是你没有引用传递给*mysql*的变量：

```
echo $query | mysql database 
```

应该：

```
echo "$query" | mysql database 
```

或者更好：

```
printf '%s\n' "$query" | mysql database 
```

你为什么不使用：

```
query='INSERT into tmp_table
SELECT * FROM table;'
printf '%s\n' "$query" | mysql 
```

或（如果您的 shell 支持*here-strings*，最新版本的*bash*支持它们）：

```
mysql <<< "$query" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-28T23:18:32.813

防止`*`和其他 glob 字符扩展。禁用*通配符*——`set -f`在您的*Here Document之前使用*

转义*Here Document*的分隔符的任何字符确实意味着*执行**No `parameter expansion`, `command substitution`, `arithmetic expansion`, or`pathname expansion`* - 但是，`pathname expansion`有一个***警告***！

从`man bash`

*   路径名扩展 — 分词后，* 除非**`-f`**已设置该选项，否则 bash 会扫描每个单词中的字符 *、? 和 [。如果出现这些字符之一，则该词被视为一个模式，并替换为按字母排序的与该模式匹配的文件名列表。

*   Shell Builtin Commnds - set **`-f`**- 禁用路径名扩展。

从`help set`

*   **`-f`**– 禁用文件名生成（通配符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T00:30:39.710

> 如何将星号传递给 bash heredoc？

这样做没有诀窍——[这里的文档](https://en.wikipedia.org/wiki/Here_document)带有星号可以正常工作。

这个问题是基于对症状的误解（这是一个容易犯的错误）。

星号的问题与 here-doc 或`cat`. 期间`*`扩展。`echo $query`

您可以通过替换`cat`为`tee temp.txt`和查看生成文件的内容来证明这一点。

* * *

*但是，会*处理其他类型的扩展（默认情况下），因此如果您*确实*想扩展星号，可以执行以下操作：

```
SELECT $(echo *) FROM table 
```

您可以在 heredoc 的名称周围加上引号以完全禁用扩展：

```
cat <<'EndOfMySQL' 
```

另请参阅：[如何将 heredoc 写入 Bash 脚本中的文件？](https://stackoverflow.com/q/2953081/86967)

# iphone - activityindicator 在 iPhone 中的 UIButton 点击 上不起作用？

> ID：13268019
> 
> 赞同：0
> 
> 时间：2012-11-07T10:43:01.937
> 
> 标签：iphone, xcode, uiactivityindicatorview

我想在单击 UIButton 时添加一个活动指示器并继续为其设置动画，直到加载来自服务 url 的数据。如果加载，则它移动到下一个视图。但我无法这样做..

这是我的代码..

```
 -(IBAction)switchtoGetProviders
    {
        UIActivityIndicatorView *activity = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(225, 115, 30, 30)];
        [activity setBackgroundColor:[UIColor clearColor]];
        [activity setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
        [self.view addSubview:activity];
        [activity release];
        [activity startAnimating];

        NSURL *urlString= [NSString stringWithFormat:@"http://www.something.net/service.svc/Xml"];

        if(arr.count>0)
        {
            [activity stopAnimating];
            ViewController2 *gp=[ViewController2 alloc];
            [self presentModalViewController:gp animated:NO];
            [gp release];
        }
else
{
 UIAlertView *alert = [[[UIAlertView alloc]initWithTitle: @"Results not found"
                                                                  message: @""
                                                                 delegate: self
                                                        cancelButtonTitle:@"OK"
                                                        otherButtonTitles:nil]autorelease];

                  [alert show];         
       }
    } 
```

实际上，当 arr 为空时，我会得到一个`alertView`. 出现时`alertView`然后`activityindicator`开始。当我点击确定按钮时，`alertView`它会停止动画。但我希望它在被触摸时立即开始。`UIbutton`我该怎么做？我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:48:08.710

在停止动画之前不要释放它。如果你释放它，那么你就会失去它的参考。

```
 [activity release];//Dont Release here 
 [activity startAnimating]; 

     [activity stopAnimating];
[activity release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:52:24.543

您的代码存在多个问题。

首先是早期的发布，其次你不给 UI 任何时间来添加它`UIActivityIndicatorView`并让它开始动画。你也忘记了`init`你`ViewController2`分配的。

我也猜想你还没有发布你所有的代码，因为`NSURL *urlString= [NSString stringWithFormat:@"http://....`不会创建一个有效的`NSURL`对象。我也很想知道你`arr`从哪里得到变量。

如果您真的想用一种方法完成所有操作，则必须使用 GCD。

```
-(IBAction)switchtoGetProviders
{
    UIActivityIndicatorView *activity = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(225, 115, 30, 30)];
    [activity setBackgroundColor:[UIColor clearColor]];
    [activity setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
    [self.view addSubview:activity];
    [activity startAnimating];

    int64_t delayInSeconds = 0.1;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

        NSURL *urlString= [NSString stringWithFormat:@"http://www.something.net/service.svc/Xml"];

        if(arr.count>0) {
            [activity stopAnimating];
            [activity  removeFromSuperview];
            [activity release];
            ViewController2 *gp= [[ViewController2 alloc] init];
            [self presentModalViewController:gp animated:NO];
            [gp release];
        } else { 
            UIAlertView *alert = [[[UIAlertView alloc]initWithTitle: @"Results not found" message: @"" delegate: self cancelButtonTitle:@"OK" otherButtonTitles:nil]autorelease];
            [alert show];
            [alert release];
    });
} 
```

# jquery - 如何使用带有复杂html的jquery查找id？

> ID：13268025
> 
> 赞同：0
> 
> 时间：2012-11-07T10:43:42.477
> 
> 标签：jquery

`div45452314234`如果我点击“在 Facebook 上分享”如何获得

```
<div id="div45452314234" class="Display">Display</div>
    <div class="Actions">
        <span>
            <div id="count">0</div>
            <a>Like</a>
        </span> 
        <span class="Author">Author</span>
        <span class="Recency">Recency</span> |
        <span><a class="ShareFB"  href="">Share on Facebook</a></span> |
        <span><a href="">Share on Twitter</a></span> |
    </div> 
```

见鬼：-

> [http://jsfiddle.net/WLS5T/](http://jsfiddle.net/WLS5T/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:46:04.317

这将为您提供所需的...

```
$(function() {
    $(".ShareFB").on("click", function() {
        var $div = $(this).closest(".Actions").prev();
        alert($div.attr('id'));
    });
}); 
```

`closest()`将解析 DOM 树，直到找到具有该类的元素的第一个实例，`Actions`然后`prev()`将选择前一个元素。 `$div`然后将是一个 jQuery 对象，您可以随意使用它。

**编辑**

我已经更新了你的小提琴......

[http://jsfiddle.net/WLS5T/1/](http://jsfiddle.net/WLS5T/1/)

一个问题是对 ShareFB 的调用导致脚本的其余部分停止运行，我也修复了我之前不正确的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T10:52:28.630

尝试这个：

```
$('.ShareFB').click(function(){
        alert($(this).parent().parent().prev().attr("id"));
    }); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-07T11:03:19.877

您需要使用递归。

```
function getTargetParent(node){
if($(node).attr('class')=='Actions'){
    alert($(node).prev().attr('id'));
}
 getTargetParent($(node).parent());
return;
}

 var targnode=$('.Actions').find('.ShareFB');//replace with $(this) in real scenario
 getTargetParent(targnode); 
```

看到这个jsfiddle。[http://jsfiddle.net/harendra/tAssd/](http://jsfiddle.net/harendra/tAssd/)

# oracle - 拆分 oracle 顶点导出

> ID：13268029
> 
> 赞同：0
> 
> 时间：2012-11-07T10:43:50.960
> 
> 标签：oracle, oracle-apex

是否可以将导出的应用程序文件拆分为单独的文件？

例如，我导出了一个应用程序并有`f115.sql`文件。它包含所有组件，但在单个文件中。我想将其拆分为单独的文件，例如页面、支持组件等。如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:46:43.540

操作，我刚刚找到了顶点导出拆分器。看看它是否是我想要的[http://ruepprich.wordpress.com/2011/07/15/exporting-an-apex-application-via-command-line/](http://ruepprich.wordpress.com/2011/07/15/exporting-an-apex-application-via-command-line/)

# bluetooth - 数据在到达目的地之前如何流动（通过蓝牙）？

> ID：13268032
> 
> 赞同：1
> 
> 时间：2012-11-07T10:43:51.310
> 
> 标签：bluetooth

我目前正在查看大量文档，以自行解决此问题，但排除不相关的路径会很有帮助。

所以，这就是我试图可视化数据流的场景：

*   两个相同的 CSR04 BT-Modules 通过 SPP 连接
*   两者都通过 USB 连接到主机
*   当其中一个正在发送数据时，有趣的是这些数据如何到达另一个模块

现在，这就是我到目前为止所拥有的：

1.  接收 BT-Module 的 Radio-Layer 正在接收数据
2.  数据通过 BT 层直到 SPP 层
3.  数据由 BT 模块缓冲

4.  数据通过 USB 传送到主机

5.  主机将此数据缓冲到虚拟串行端口的缓冲区中
6.  应用程序读取此缓冲数据

我的差距在 3 和 4 之间以及 4 和 5 之间。我不太确定 SPP 层如何传递其数据，以便主机可以缓冲它。

这条数据路径是正确的还是我在这里遗漏了什么？如果是这样，是什么？SPP 层如何将数据传递给 USB 连接的主机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:05:55.637

SPP 层不在 BT 模块上运行。BT 模块在 HCI 层通过 USB 将数据推送到主机。SPP 层由您 PC 上的驱动程序完成，该驱动程序从 BT 模块获取 HCI 数据，并在另一侧为 PC 上的应用程序提供常规串行端口接口。

# html - 当它有一个绝对子div时，为什么包装器div不会扩展

> ID：13268044
> 
> 赞同：2
> 
> 时间：2012-11-07T10:44:39.537
> 
> 标签：html, parent, wrapper, expand, absolute

我有一个设置为 960px 的包装 div，在其中，我有另一个名为“slider”的 div。使用以下代码，滑块绝对位于屏幕中间：

```
#slider {width:390px; height:100px; position:absolute; 
         margin:-100px 0 0 -200px; top:50%; left:50%; border:1px solid;} 
```

我已经为包装器和滑块 div 添加了边框，以便我可以看到它们在屏幕上的位置，但是，这表明包装器没有扩展到包含绝对滑块 div。

如何解决此问题以使包装器的高度正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:52:46.767

当您`position:absolute;`在一个元素上使用它时，它位于文档流之外并且不会影响其他内容。

如果可以，删除`position:absolute;`并使用其他方法使滑块 div 居中。如果你需要`position:absolute;`那么它是不可能的。

# jenkins - 如何使声纳显示从过去一天而不是过去 5 天或 1 个月开始发生变化？

> ID：13268045
> 
> 赞同：1
> 
> 时间：2012-11-07T10:44:43.600
> 
> 标签：jenkins, sonarqube

当我单击 Sonar 正在分析的项目时，它会在顶部显示一个下拉菜单，上面写着“ `Time changes`”，选项是

*   自上次构建以来
*   自 5 天以来
*   自 1 个月以来

我如何获得自过去 1 天或任意时间以来的更改？我`Sonar 3.3`作为插件使用`Jenkins 1.487`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:32:48.443

您正在寻找的是所谓的声纳差分服务。有在线文档描述了如何修改这些选项以满足您的需求：

一般来说，您可以有三个全局选项（所有项目通用）和每个不同项目的两个选项

[http://docs.sonarqube.org/display/SONAR/Differential+Views#DifferentialViews-DifferentialViewsSettings](http://docs.sonarqube.org/display/SONAR/Differential+Views#DifferentialViews-DifferentialViewsSettings)

# magento - Magento 从静态块页面中删除左侧面板

> ID：13268046
> 
> 赞同：0
> 
> 时间：2012-11-07T10:44:44.187
> 
> 标签：magento, e-commerce, magento-1.7, static-block

我从管理员的管理类别选项中创建了一个子类别名称“NEW”。在此类别的“显示设置”选项卡中，我选择了一个我之前创建的 CMS 块。

单击导航菜单链接“NEW”时会显示此块。我使用的是一列布局。即便如此，它仍显示左侧面板，用于比较产品选项和内容。

现在我的问题是如何从这个块中删除这个左侧面板。我只想要这个块上的内容。我附上了我的问题的快照 [http://d.pr/i/l5bO](http://d.pr/i/l5bO)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:10:47.370

感谢您的回复，但我得到了答案：-转到类别->添加子类别->自定义设计->自定义布局更新粘贴此代码。

```
<reference name="root">
 <action method="setTemplate"><template>page/1column.phtml</template></action>
</reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:07:10.887

用这个

```
<remove name="catalog.leftnav"/> 
```

这里的**名字**是你独一无二的`left panel name`

还

请在里面插入 `**<remove name="catalog.leftnav"/>**`代码

```
<reference name="left">
</reference> 
```

像这样

```
<reference name="left">
     <remove name="catalog.leftnav"/>
 </reference> 
```

***有用***

# java - 为什么要为 logger.debug() 使用额外的 if 条件？

> ID：13268053
> 
> 赞同：12
> 
> 时间：2012-11-07T10:45:24.387
> 
> 标签：java, log4j

> **可能重复：**
> [在 log4j 中，在记录之前检查 isDebugEnabled 是否会提高性能？](https://stackoverflow.com/questions/963492/in-log4j-does-checking-isdebugenabled-before-logging-improve-performance)

我见过人们以下列方式使用 log4j：

```
if(logger.isDebugEnabled())
{
    logger.debug(" message ");
} 
```

但是，我检查了`logger.debug`API 的文档，发现它`debug`在记录消息之前检查是否已启用。在那种情况下，多写 if 有什么意义？

只写不就完全一样了吗

```
logger.debug(" message "); 
```

?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T10:48:29.730

如果你*真的*只是在写作

```
logger.debug(" message "); 
```

那么没有任何好处。但请考虑：

```
logger.debug("This: " + message + " happened on thread " + thread +
            "because " + cause); 
```

如果结果将被丢弃，您不希望执行该字符串连接（以及可能更昂贵的转换 - 考虑您*可能*想要记录但转换为字符串的成本很高的事情）。

如果日志记录在正常情况下会对性能产生重大影响，那么添加日志记录代码将不利于您在突然想要打开诊断的情况下*真正为您提供帮助。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T10:48:30.363

我认为这里的想法是防止任何参数评估 - 在你的情况下它很简单，但例如让我们说它更像是：

```
logger.debug("Foo" + bar() + " bar: " + foo()); 
```

好的，这是人为的，但是如果未启用调试，您可能不想执行`bar()`和`foo()`字符串连接......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T10:50:35.287

一个原因可能是因为在构建消息时存在一些开销。例如：

```
if(debug.isDebugEnabled()) {
    String message = buildLogMessage()
    logger.debug(message);
} 
```

如果`buildLogMessage()`运行需要一段时间，当您知道永远不会记录输出时，您可能不想运行它。

但是，解决此问题的更好方法是使用 an [`ObjectRender`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/or/ObjectRenderer.html)，以便仅在要记录该值时才完成到 String 的转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T10:57:29.377

如果你花一点时间看看 log4j 的实现，你就会知道这是什么原因。当您编写时：`logger.debug(" message ");`log4j 附加程序始终附加 loggingEvent。这是昂贵的转换。if 条件是最好的，但在某些情况下很有用。

```
// AppenderAttachableImpl.class
public int appendLoopOnAppenders(LoggingEvent event) {
        int size = 0;
        if (appenderList != null) {
            size = appenderList.size();
            for (int i = 0; i < size; i++) {
                Appender appender = (Appender) appenderList.elementAt(i);
                appender.doAppend(event);
            }

        }
        return size;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T13:08:30.750

另一个原因是修改 HotSpot VM 的行为。不太确定它是如何工作的，但如果你在生产模式下运行（调试注销）——HotSpot VM 应该优化代码，就好像 if 语句和里面的所有东西都不存在一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T10:49:31.617

在调用调试方法之前，可以执行可以通过条件句避免的代码，例如字符串连接。例子：

```
log.debug("Value of variable1:"+variable+" Value of variable2:"+variable2); 
```

如果添加条件 if log.isDebugEnabled()，则不执行字符串连接。

这是唯一的好处。

# xml - 如何调试 OpenXML SDK 声称有效但 PowerPoint 说包含不可读部分的生成的 .pptx？

> ID：13268056
> 
> 赞同：1
> 
> 时间：2012-11-07T10:45:30.380
> 
> 标签：xml, debugging, validation, powerpoint

我正在尝试从脚本生成 pptx 文件，使用“使用 powerpoint 创建 pptx，解压缩并生成类似的内容”方法，有时建议使用该方法作为使用库或 SDK 的替代方法。

问题是我设法创建了一个根据“Open XML SDK 2.0 Productivity Tool for Microsoft Office (build 2.0.5022.0)”有效的 .pptx（它没有发现问题），但是当我尝试使用 PowerPoint 打开时（ Office 2007 SP3），我得到一个可怕的“PowerPoint 检测到文件中不可读的内容，尝试恢复是/否”和“这个文件无法用 PowerPoint 打开，你想找到一个转换器来打开 Microsoft Office Online 上的文件网页？” 对话框。（我有一个非英文办公室，所以这些文本已被翻译回英文。）分别回答是和否，powerpoint 似乎可以很好地打开文件，如果我保存它，我会得到一个稍微不同的文件，然后可以在没有可怕的对话框的情况下打开，

任何想法如何从 PowerPoint 中获取更详细的错误消息，或缩小问题的原因？（我最好的猜测是尝试区分生成的和从 powerpoint 恢复并保存的文件，并缩小差异，但在我看来，所有差异都是非必要的，比如用于参考的 id ， ETC。）

我已上传到[https://dl.dropbox.com/u/17196313/piechart_n_titleslide_only.pptx的文件本身](https://dl.dropbox.com/u/17196313/piechart_n_titleslide_only.pptx)

# python - 为什么使用webpy时中文乱码，使用mysqldb时正常？

> ID：13268061
> 
> 赞同：6
> 
> 时间：2012-11-07T10:45:40.503
> 
> 标签：python, mysql-python, web.py

我在 mysql 中创建了一个数据库并使用 webpy 来构建我的 Web 服务器。

但是webpy和mysqldb分别使用它们访问数据库时的行为之间的汉字就很奇怪了。

以下是我的问题：

我的表 t_test（utf8 数据库）：

```
id     name
1      测试 
```

“测试”的utf8代码为：\xe6\xb5\x8b\xe8\xaf\x95

当使用 MySQLdb 做这样的“选择”时：

```
 c=conn.cursor()
    c.execute("SELECT * FROM t_test")
    items = c.fetchall()
    c.close()
    print "items=%s, name=%s"%(eval_items, eval_items[1]) 
```

结果是正常的，它打印：

```
 items=(127L, '\xe6\xb5\x8b\xe8\xaf\x95'), name=测试 
```

但是当我使用 webpy 做同样的事情时：

```
 db = web.database(dbn='mysql', host="127.0.0.1", 
             user='test', pw='test', db='db_test', charset="utf8")
    eval_items=db.select('t_test')
    comment=eval_items[0].name
    print "comment code=%s"%repr(comment)
    print "comment=%s"%comment.encode("utf8") 
```

出现中文乱码，打印结果为：

```
 comment code=u'\xe6\xb5\u2039\xe8\xaf\u2022'
    comment=忙碌鈥姑€ 
```

我知道 webpy 的数据库也是依赖 MySQLdb 的，但是这两种方式有很大的不同。为什么？

BTW，由于上面的原因，我可以直接使用MySQLdb来解决我的汉字乱码问题，但是它丢失了表中的列名——太不雅了。我想知道如何用 webpy 解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:43:12.217

确实，发生了一些非常错误的事情——正如你在评论中所说的，unicode repr。“测试”的字节是 E6B5 8BE8 AF95 - 它适用于我的 utf-8 终端：

```
>>> d
'\xe6\xb5\x8b\xe8\xaf\x95'
>>> print d
测试 
```

但是看看你的“评论”unicode对象上的字节：

```
comment code=u'\xe6\xb5\u2039\xe8\xaf\u2022' 
```

这意味着您的内容的一部分是注释的 utf-8 字节（表示为 "\xYY" 的字符和部分编码为 Unicode 点（用 \uYYYY 表示的字符） - 这表示严重的垃圾。

MySQL 有一些可以正确解码（utf-8 或其他）编码文本的问题——其中之一是将正确的“charset”参数传递给连接。但你已经这样做了——

您可以做的一种尝试是传递连接选项`use_unicode=False` - 并在您自己的代码中解码 utf-8 字符串。

```
db = web.database(dbn='mysql', host="127.0.0.1", 
         user='test', pw='test', db='db_test', charset="utf8", use_unicode=False) 
```

检查选项以连接此参数和您可能尝试的其他参数：

[http://mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)

不管如何让它正常工作**，**有了上面的提示，我为你找到了一个解决方法——看起来你的编码字符串中的 Unicode 字符（不是 unicode 对象中的 utf-8 原始字节）被编码为其中之一编码：（“cp1258”，“cp1252”，“palmos”，“cp1254”）

其中，cp1252 与“latin1”几乎相同——如果它在连接中没有获得“charset”参数，则这是 MySQL 使用的默认字符集。但这不仅是 web2py 没有将其传递给数据库的问题，因为您得到了损坏的字符，而不仅仅是错误的编码 - 就好像 web2py 正在来回编码和解码您的字符串，并忽略编码错误

从所有这些编码中，我可以检索您的原始“测试”字符串，作为 utf-8 字节字符串，例如：

```
comment = comment.encode("cp1252", errors="ignore") 
```

所以，现在放置这条线可能对你有用，但是用 unicode 猜测从来都不是一件好事 - 正确的事情是缩小 web2py 的范围，首先为你提供那些半解码的 utf-8 字符串，然后让它停在那里。

**更新**

我在这里检查过 - 这是发生了什么 -`'\xe6\xb5\x8b\xe8\xaf\x95'`从 mysql 读取正确的 utf-8 字符串，然后在将其交付给您之前，（在 use_unicode=True 情况下）0- 这些字节正在被解码，就好像它们是“cp1252 " - 这会产生不正确的`u'\xe6\xb5\u2039\xe8\xaf\u2022'`unicode。这可能是一个 web2py 错误，例如，它没有将您的“charset=utf8”参数传递给实际连接。当您设置“use_unicode=False”而不是给您原始字节时，它显然会选择不正确的 unicode，使用“utf-8”对其进行解码 - 这会产生 `'\xc3\xa6\xc2\xb5\xe2\x80\xb9\xc3\xa8\xc2\xaf\xe2\x80\xa2'`您在下面评论的序列（这甚至更不正确）。

总而言之，我上面提到的解决方法似乎是检索原始正确字符串的唯一方法 - 也就是说，给定错误的 unicode，做`u'\xe6\xb5\u2039\xe8\xaf\u2022'.encode("cp1252", errors="ignore")`- 也就是说，没有做一些其他事情来建立数据库连接（或者也许如果可能，更新 web2py 或 mysql 驱动程序）

** 更新 2 ** 我进一步检查了 web2py`dal.py`文件本身中的代码 - 它默认尝试将连接设置为 utf-8 - 但它看起来会同时尝试 MySQLdb 和 pymysql 驱动程序 - 如果你都安装了尝试卸载pymysql，只留下 MySQLdb。

# android - android实现AlertDialogSamples类

> ID：13268063
> 
> 赞同：1
> 
> 时间：2012-11-07T10:45:42.883
> 
> 标签：android, android-activity, android-alertdialog

感谢您提供了一个了不起的资源，我有一个关于实现 android sdk apidemo AlertDialogSamples.java 的问题。基本上，我想将 AlertDialogSamples 类添加到我的应用程序中，并从我的任何活动中调用它以获取各种警报对话框（即`DIALOG_YES_NO_MESSAGE`，`DIALOG_PROGRESS`...）。我很惊讶所有在线示例在每个活动类中都有 alertdialog 代码。

我在这个想法上尝试了一些迭代：

```
public class My1Activity extends SherlockActivity implements View.OnClickListener {
   ...
   AlertDialogSamples alert = new AlertDialogSamples();
   ...
   private void changeEmailCommand(){
         alert.showAlertDialog(My1Activity.this, DIALOG_TEXT_ENTRY, title); 
```

接着：

```
public class AlertDialogSamples extends Activity {
   ...
public void showAlertDialog(Context context, int i, String title) {
        showAlertDialog(context, i, title);
  ... (rest is existing code and modifying the .setTitle to accept title message)
    } 
```

并且没有运气让警报对话框出现（只是崩溃）

有没有办法用意图来做到这一点？异步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:05:54.823

```
public static void showAlerDialog(Context context, String title,
        String msg, AlertDialogDelegate delegate, int code) {
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);
    alertDialog.setTitle(title);
    alertDialog.setMessage(msg);
    alertDialog.setCancelable(false);

    if (title.equalsIgnoreCase(ERROR)) {
        alertDialog.setIcon(context.getResources().getDrawable(
                R.drawable.error_icon));
    } else if (title.equalsIgnoreCase(SUCCESS)) {
        alertDialog.setIcon(context.getResources().getDrawable(
                R.drawable.success));
    } else {
        alertDialog.setIcon(context.getResources().getDrawable(
                R.drawable.warning));
    }

    alertDialog.setPositiveButton("OK", new AlertDialogListenter(delegate,
            code));
    alertDialog.show();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:56:11.100

我使用以下代码显示进度对话框：

1.  使用静态方法创建实用程序类。
2.  当您想显示对话时，从您的活动中调用它们： Utility.showActionIndicator("Your message", Acitivty.this); 和 Utility.dismissActionIndicator();

你可以参考这个例子，试试运气。

更新代码以添加实用程序方法以显示警报对话框 - 只需调用 Utility.showAlertDialog(YourActivity.this)

**更新：（**提示 - 将 Morfy A Wounded Lion 的方法添加到此类 - 感谢 Morfy A Wounded Lion 的代码。太棒了）

```
public class Utility {

    private static ProgressDialog   actionIndicator = null;
    private static AlertDialog.Builder alertDialogBuilder   = null;

    private Utility() {

    }

    public static void showAlertDialog(Activity activity) {

        if (alertDialogBuilder == null) {
            alertDialogBuilder = new AlertDialog.Builder(activity);
        }
            // set title
            alertDialogBuilder.setTitle("Your Title");

            // set dialog message
            alertDialogBuilder
                .setMessage("Click yes to exit!")
                .setCancelable(false)
                .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {

                    }
                  })
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {

                        dialog.cancel();
                    }
                });

                // create alert dialog
                AlertDialog alertDialog = alertDialogBuilder.create();

                // show it
                alertDialog.show();

    }

    public static void showActionIndicator(String message,Activity activity) {

        if (actionIndicator == null) {
            actionIndicator = 
            new ProgressDialog(activity);
        }
        actionIndicator.setCancelable(false);
        actionIndicator.setCanceledOnTouchOutside(false);
        actionIndicator.setMessage(message);
        if (!actionIndicator.isShowing()) {
            try {
                actionIndicator.show();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                Log.d("exception","something went wrong",e);
            }
        }
        System.out.println("Dialog is showing");
    }

    public static void changeActionIndicatorMessage(String message) {

        if (actionIndicator != null && actionIndicator.isShowing()) {
            actionIndicator.setMessage(message);
        }
    }

    public static void dismissActionIndicator() {
        if (actionIndicator != null && actionIndicator.isShowing()) {
            try {
                actionIndicator.dismiss();
            } catch (Exception e) {
                e.printStackTrace();
            }
            actionIndicator = null;
            System.out.println("Dialog dismissed");
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:01:27.837

```
public static void showAlerDialog(Context context, String title,
        String msg, AlertDialogDelegate delegate, int code) {
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);
    alertDialog.setTitle(title);
    alertDialog.setMessage(msg);
    alertDialog.setCancelable(false);

    if (title.equalsIgnoreCase(ERROR)) {
        alertDialog.setIcon(context.getResources().getDrawable(
                R.drawable.error_icon));
    } else if (title.equalsIgnoreCase(SUCCESS)) {
        alertDialog.setIcon(context.getResources().getDrawable(
                R.drawable.success));
    } else {
        alertDialog.setIcon(context.getResources().getDrawable(
                R.drawable.warning));
    }

    alertDialog.setPositiveButton("OK", new AlertDialogListenter(delegate,
            code));
    alertDialog.show();

} 
```

然后像这样调用 AlertDialog

ClassName.showAlerDialog(context,title,msg,delegate,code);

这里上下文->上下文

标题 --> 警报对话框标题 -- 字符串

msg ---> alertdialog msg -- 字符串

委托 ---> 在某些情况下调用函数的接口对象是 -- 没有事件

code -- integer -- 代表一些不同的动作

# c# - 当Repeater中的下拉列表更改时如何触发事件

> ID：13268068
> 
> 赞同：2
> 
> 时间：2012-11-07T10:45:57.093
> 
> 标签：c#, asp.net, events

当用户更改下拉列表的 selectedIndex 时，我想在我的数据库中执行一些操作。现在我有以下内容。

```
<td class="shop-item-qty">
<asp:DropDownList ID="qtyDropDownList" OnSelectedIndexChanged="changeCount" AutoPostBack="true"  runat="server"/>
<asp:HiddenField ID="ItemId" runat="server" Value='<%#Eval("GiftVoucher.ID") %>'/>
</td> 
```

我想要的只是在`changeCount`方法中获取我的隐藏字段值。问题是我不能直接获取隐藏字段的值，因为这段代码在`Repeater`element. 我怎样才能实现该功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T11:00:07.170

```
protected void qtyDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
      DropDownList control = (DropDownList)sender;

      RepeaterItem rpItem = control.NamingContainer as RepeaterItem;
      if (rpItem != null)
      {
         HiddenField hiddenField = ((HiddenField)rpItem.FindControl("ItemId"));    
      }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:30:27.793

您可以将`GiftVoucher.ID`值绑定到 DropDown 的自定义属性并跳过 HiddenField：

`<asp:DropDownList runat="server" ID="qtyDropDownList" OnSelectedIndexChanged="changeCount" AutoPostBack="true" data-itemId='<%# Eval("ID") %>' />`

```
protected void changeCount(object sender, EventArgs e)
{
    var id = ((DropDownList)sender).Attributes["data-itemId"];
} 
```

# c# - 如何使用 XSLT 和 C# 将 DOCTYPE 添加到 HTML

> ID：13268073
> 
> 赞同：1
> 
> 时间：2012-11-07T10:46:08.077
> 
> 标签：c#, xml, xslt, xhtml, doctype

我将 XSLT 与 C# 结合使用，将我的 xml 文档转换为 HTML。我需要 DOCTYPE 在 HTML 文档中。但不知何故，我似乎无法让它出现。请帮忙...

我的 xsl 包括以下内容。

```
<?xml version="1.0"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml">
    <xsl:output method="xml" encoding="utf-8" doctype-public="-//W3C//DTD XHTML 1.0 Strict//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" indent="yes"/> 
```

我的 C# 代码如下所示：

```
try
{
    XPathDocument myXPathDoc = new XPathDocument(myPath);

    XslTransform myXslTrans = new XslTransform();

    myXslTrans.Load(ConfigurationManager.AppSettings["XsltFilePath"] == null ? 
        "MyTransform.xsl" : 
        ConfigurationManager.AppSettings["XsltFilePath"]);

    String htmlFile = Path.Combine(myFolder, myName, "index.html");

    XmlTextWriter myWriter = new XmlTextWriter(htmlFile, null);

    myXslTrans.Transform(myXPathDoc, null, myWriter);

    myWriter.Close();
}
catch (Exception e)
{
    System.Console.WriteLine(e.Message + "\n" + e.StackTrace);
} 
```

任何想法我做错了什么？我正在使用 .NET 4.0。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:03:08.443

好吧，不要写入 XmlTextWriter，只需使用写入文件的重载，例如

```
XslCompiledTransform proc = new XslCompiledTransform();
proc.Load(ConfigurationManager.AppSettings["XsltFilePath"] == null ? "MyTransform.xsl" : ConfigurationManager.AppSettings["XsltFilePath"]);

String resultFileName = Path.Combine(myFolder, myName, "index.html");

proc.Transform(myPath, resultFileName); 
```

我使用`XslCompiledTransform`而不是，`XslTransform`因为后者自 .NET 2.0 以来已被弃用。

如果您真的想使用，`XslTransform`那么您可以使用类似的`Transform`方法[http://msdn.microsoft.com/en-us/library/x6e130yd.aspx 。](http://msdn.microsoft.com/en-us/library/x6e130yd.aspx)

# webstorm - 在 WebStorm 中创建 var 语句的快捷方式

> ID：13268080
> 
> 赞同：0
> 
> 时间：2012-11-07T10:46:39.463
> 
> 标签：webstorm

是否有`var`使用 WebStorm 创建语句的快捷方式？例如在以下行中我想`var parameter`在选择时创建`parameter`：

```
someFunctionCall(parameter); 
```

预期结果

```
var parameter;
someFunctionCall(parameter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:48:37.743

使用`Refactor`| `Extract`| `Variable`. 快捷方式取决于操作系统和选定的键盘映射。

# javascript - 获得未禁用的输入值

> ID：13268082
> 
> 赞同：0
> 
> 时间：2012-11-07T10:46:47.467
> 
> 标签：javascript, jquery, html

我有几个输入文本元素，

我有`disable some input`禁用某些输入元素的按钮，

我还有 button `see values`，用于查看所有输入值，

我需要什么：例如我点击按钮`disable some input`，现在一些输入被禁用了对吗？

现在如果单击按钮`see values`，我只想看到未禁用的输入值。

我几乎全部制作，但我不知道如何制作这种条件：`if element already is disabled`

请看演示 [http://jsfiddle.net/WW8UF/4/](http://jsfiddle.net/WW8UF/4/)

身体是：

```
<form>
      <ul id="my_ul">
             <li><input type="text" value="a" /></li>
             <li><input type="text"  value="s" /></li>
             <li><input type="text" value="d" /></li>
       </ul>
</form>

<div id="disable_btn">disable some input</div>
<div id="see_values">see values</div> 
```

js，使用 jQuery 1.8.2

```
$(document).ready( function () {  

        $("#disable_btn").on("click", function () {
            $("#my_ul li:eq(0) input").prop("disabled", true);
        });

        $("#see_values").on("click", function () {
            $("#my_ul li").each ( function () {
                if (1==1/*if this input is not disabled*/) {
                    alert ( $(this).find("input").val()  );
                }
            });
        });
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T10:53:31.030

无需遍历 every `li`，只需获取未禁用的输入：

```
$("#my_ul li input:not([disabled])").each ( function () { ... }); 
```

现场示例：http: [//jsfiddle.net/WW8UF/10/](http://jsfiddle.net/WW8UF/10/)

你也可以使用

```
$("#my_ul li input:enabled").each ( function () { ... }); 
```

这有点清洁。现场示例：http: [//jsfiddle.net/WW8UF/11/](http://jsfiddle.net/WW8UF/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T10:49:39.527

条件是：

```
!$(this).find('input').attr('disabled') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T10:54:17.630

这是另一个尝试：

```
$("#see_values").on("cick", function () {
        $("#my_ul li input").not(":disabled").each ( function ()
                alert ( $(this).val());

        });

    }); 
```

JQuery 提供了伪选择器“:disabled”，所以你可以忽略它们。

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T10:51:44.990

使用更好的选择器。

改变：-

```
$("#my_ul li").each ( function () {
  if (1==1/*if this input is not disabled*/) {
    alert ( $(this).find("input").val()  );
  }          
}); 
```

到：-

```
// Perform search with selector
$("#my_ul li input:enabled").each ( function () {
  // No if statement required
  alert ( $(this).find("input").val()  );          
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T10:51:53.583

另一种可能：

```
$(document).ready( function () {  

        $("#disable_btn").on("click", function () {
            $("#my_ul li:eq(0) input").prop("disabled", true);
        });

        $("#see_values").on("click", function () {
            $("#my_ul li input").each ( function () {
                if (!$(this).is(':disabled')) { //or if ($(this).is(':enabled'))
                    alert ( $(this).val()  );
                }

            });

        });

}); 
```

工作[jsfiddle](http://jsfiddle.net/WW8UF/6/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T10:52:15.637

只需检查您的*disabled*属性值，就像您分配它一样，如下所示：

```
if (!$(this).find("input").prop("disabled")) {
     // do something to this
} 
```

# javascript - select2动态更改项目

> ID：13268083
> 
> 赞同：72
> 
> 时间：2012-11-07T10:46:48.693
> 
> 标签：javascript, jquery-select2

我有两个链接的选择：第一个选择的每个值确定哪些项目将在第二个选择中显示。

第二个选择的值存储在一个二维数组中：

```
[ [{"id":1,"text":"a"}, {"id":2,"text":"b"},...],
  [{"id":"1a","text":"aa"},{"id":"1b","text":"ba"},...],
  ...
] 
```

第一个选择值确定用于填充第二个选择的索引。因此，在第一个“更改”事件中，我应该能够修改 select-two 包含的项目。

阅读文档我认为我需要使用“数据”选项......但不知道该示例如何在初始化时加载数组数据，如果我在初始化后尝试这样做似乎不起作用。

**HTML**

```
Attribute:
<select name="attribute" id="attribute">
    <option value="0">Color</option>
    <option value="1">Size</option>
</select>

Value:
<select name="value" id="value"></select>

<script>
   var data = [ [{"id":1,"text":"black"}, {"id":2,"text":"blue"},...],
                [{"id":"1","text":"9"},{"id":"1","text":"10"},...],
              ];
   $('#attribute').select2().bind('change', function(){
      // Here I need to change `#value` items.
      $('#value').select2('data',data[$(this).val()]);  // This does not work
   );

   $('#value').select2();
</script> 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-07T12:19:14.007

我为你做了一个例子，展示了如何做到这一点。

请注意 js，但我也将 #value 更改为输入元素

```
<input id="value" type="hidden" style="width:300px"/> 
```

并且我正在触发`change`事件以获取初始值

```
$('#attribute').select2().on('change', function() {
    $('#value').select2({data:data[$(this).val()]});
}).trigger('change'); 
```

[**代码示例**](http://jsfiddle.net/bbAU9/)

**编辑：**

在当前版本的 select2 中，class 属性正在从隐藏输入转移到 select2 创建的根元素中，甚至是将元素放置在`select2-offscreen`页面限制之外的类。

要解决此问题，只需`removeClass('select2-offscreen')`在第二次对同一元素应用 select2 之前添加。

```
$('#attribute').select2().on('change', function() {
    $('#value').removeClass('select2-offscreen').select2({data:data[$(this).val()]});
}).trigger('change'); 
```

我添加了一个新的**[代码示例](http://jsfiddle.net/eGXPe/)**来解决这个问题。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-06-30T16:21:25.870

我成功地使用以下动态更新选项：

`$control.select2('destroy').empty().select2({data: [{id: 1, text: 'new text'}]});`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-27T01:14:42.413

Try using the trigger property for this:

```
$('select').select2().trigger('change'); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-18T02:59:01.327

我在这里修复了缺少示例库的问题：

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.js"> 
```

[http://jsfiddle.net/bbAU9/328/](http://jsfiddle.net/bbAU9/328/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-22T07:31:10.587

对于 v4，这是一个在 4.0 中不会解决的已知问题，但有一个解决方法。检查[https://github.com/select2/select2/issues/2830](https://github.com/select2/select2/issues/2830)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-08-24T08:51:44.657

在我的项目中，我使用以下代码：

```
$('#attribute').select2();
$('#attribute').bind('change', function(){
    var $options = $();
    for (var i in data) {
        $options = $options.add(
            $('<option>').attr('value', data[i].id).html(data[i].text)
        );
    }
    $('#value').html($options).trigger('change');
}); 
```

尝试注释掉 select2 部分。其余的代码仍然可以工作。

# grails - 如何使用链式命名查询获取 PagedResultList 并添加额外的条件闭包？

> ID：13268084
> 
> 赞同：1
> 
> 时间：2012-11-07T10:46:49.820
> 
> 标签：grails, grails-orm, criteria

我正在尝试使用链式命名查询获取 pagedResultList，但我似乎失败了。关于如何实现这一点的任何提示或技巧？

请参阅以下 Grails 文档中的修改示例，该示例应说明我的需求

```
def books = Publication.recentPublications.grailsInTitle.list(params) {
    or {
        like 'author', 'Tony%'
        like 'author', 'Phil%'
    }
} 
```

这总是返回一个 ArrayList..

何时或删除附加条件并像下面一样使用它可以工作

```
def books = Publication.recentPublications.grailsInTitle.list(params) 
```

我想添加一些标准闭包，关于如何实现这一点的任何提示或提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:09:36.463

我在命名查询方面面临同样的问题。这是我应用于您的课程的解决方案。评论它是否适合您。

```
class Publication {
    //fields, constraints, etc.
    namedQueries = {
        authoredLike { String authorName ->
        if (authorName) {
            like 'author', authorName
        }
        // untested, but you get the point, please experiment
        authoredLikeMany { List<String> authors ->
            authors.each { String authorName -> like 'author', authorName }
        }
    }
}

def tonyBooks = Publication.recentPublications.grailsInTitle.authoredLike('Tony%').list(params)
def tonyAndPhilBooks = Publication.recentPublications.grailsInTitle.authoredLikeMany(['Tony%', 'Phil%']).list(params) 
```

# json - SaaS CMS API 可能和/或有用吗？

> ID：13268088
> 
> 赞同：0
> 
> 时间：2012-11-07T10:47:01.647
> 
> 标签：json, content-management-system, saas

一切都越来越分散。使用 Facebook 或 OpenID 外包您的身份验证，使用 Disqus 进行评论，使用 filepicker.io 进行文件上传以及使用 AWS 进行存储。也许在未来，网站将仅仅是以一种对用户有意义的方式将所有这些服务链接在一起的界面。可能外包的网站的另一部分是内容。想象一下检索带有页面内容、菜单结构和博客文章列表的 JSON。内容将在与您自己的网站不同的网站上进行编辑。

像这样的 CMS 可能面临的一个问题是页面的自动创建。要求客户端安装 htaccess 文件可能是一种选择。也许客户只想允许自动加载特定子目录（如 domain.com/blog）上的页面。可能路由应该完全留给客户端，API 可以在他们的`content-page.php`

我认为它应该非常少，并且不强制客户端使用某些模板引擎。它应该只加载内容的 HTML。

我不确定这是否有用，考虑到您可能希望您的 CMS 也处理到内容页面的路由，并且我认为这不能通过 API 完成，但如果您看到方法请纠正我。

我的问题是：你会使用这样的东西吗？你预见到我没有看到的任何问题吗？有什么建议么？

为了更清楚地说明我的意思，这里`content-page.php`有一个客户的例子：

```
$cms = new SaaSCMS($apiKey);
$content = $cms->getContent($_GET['page']);

if ($content)
{
    // Display content
}
else
{
    // 404
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T02:45:39.690

不确定，但它很好地提醒了[Jekyll](http://jekyllrb.com/)，它实现了你上面提到的大部分目标

# php - 为什么需要自定义 php 安装来安装 APC

> ID：13268091
> 
> 赞同：0
> 
> 时间：2012-11-07T10:47:05.910
> 
> 标签：php, shell, hosting, apc

我不知道这是问这个问题的正确地方，但对我来说仍然是问这个问题的最佳地方，所以我问这个

“我的目​​标是在我的网站（由 dreamhost 托管）上安装替代 php 缓存（apc）”

我的问题是它没有按照 wiki [http://wiki.dreamhost.com/Pecl_APC](http://wiki.dreamhost.com/Pecl_APC)进行安装。该wiki 明确指出我需要运行自定义 php 安装才能安装 APC，但为什么？没有办法在现有的 php 版本中安装 APC。我的网站使用 php 5.2.17。请帮助我，我很长时间以来都陷入了这个困境。dreamhost wiki根本没有帮助我需要在他们的服务器上安装了APC的人的回答，请帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:24:11.113

我猜你需要安装一个自定义的 PHP，因为 APC 是一个配置需要用 PHP 编译的插件。所以我猜dream host不想让你访问默认安装。

您是否尝试安装自定义 PHP？

你遇到了什么错误？

# java - 将给定的字符串开始与另一个字符串进行比较

> ID：13268095
> 
> 赞同：1
> 
> 时间：2012-11-07T10:47:17.707
> 
> 标签：java, string

将给定的字符串开始与另一个字符串进行比较的最佳方法是什么

例子 ：

```
 if("ABCD1234".startsWith("ABCD")){
        System.out.println("This is true ");
    }

    if("ABCD1234".substring(0,4).equalsIgnoreCase("ABCD")){
        System.out.println("This also true ");
    } 
```

或者还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T10:53:09.573

我认为这[`startsWith()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)是最好的选择，因为它让任何阅读您的代码的人都清楚您的意图。如果您希望它不区分大小写，则在调用该方法之前将两个值转换为相同的大小写。

```
String prefix = "ABCD";
prefix = prefix.toLowerCase();

if("ABCD1234".toLowerCase().startsWith(prefix)) {
    System.out.println("This is true ");
} 
```

如果您想格外小心，您可能需要传递一个`Locale`to`toLowerCase()`或至少确保在两个字符串上调用它，以确保您的代码[通过土耳其测试](http://www.moserware.com/2008/02/does-your-code-pass-turkey-test.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T10:50:04.080

另一种解决方案是：

```
if (s.indexOf("ABCD") == 0) {
  ...
} 
```

但是，我更喜欢您的首选。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T10:51:48.327

`equalsIgnoreCase`在不区分大小写的情况下使用可能会更好，但在子字符串之前，您应该检查长度，它还将在内存字符串池中创建一个新字符串。

喜欢的另一种方式

```
 if("ABCD1234".substring(0,4).compareTo("ABCD")==0){
        System.out.println("This also true ");
    }
    if("ABCD1234".substring(0,4).compareToIgnoreCase("ABCD")==0){
        System.out.println("This also true ");
    } 
```

但我认为`startsWith`这里是更好的选择，但要确保区分大小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T10:56:43.197

也可以：

```
"ABCD1234".matches("ABCD.*"); 
```

我脑海中还有许多其他疯狂的解决方案 :) 恕我直言，“最好的”方法是使用您的第一个建议。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T10:56:54.043

您可以使用来自 Apache Commons 的 StringUtils：

```
StringUtils.startsWith("abcdef", "abc") = true
StringUtils.startsWith("ABCDEF", "abc") = false
StringUtils.startsWithIgnoreCase("ABCDEF", "abc") = true 
```

[http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-07T10:57:54.320

老实说，首先你应该问自己“abcd”是否等于“ABCD”？

如果不是，那么我认为第一个解决方案要好得多，它更清洁和可读

如果您的回答是肯定的，那么显然，您不能使用第一个解决方案

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-07T11:45:12.990

我会更喜欢第二选择：

```
if("ABCD1234".substring(0,4).equalsIgnoreCase("ABCD")){
        System.out.println("This also true "); 
```

在这种情况下，您还可以通过将字符串转换为小写来进行检查。

```
if(string.toLowerCase().startswith(string2)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-07T10:50:53.360

当我必须为工作编写 Java 应用程序时，我使用[startsWith](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#startsWith%28java.lang.String%29)方法。

# c - 前导零 - 以单词打印数字的数字

> ID：13268097
> 
> 赞同：1
> 
> 时间：2012-11-07T10:47:19.923
> 
> 标签：c, int

`switch`我需要一个 C 程序，它将使用语句打印输入数字的数字。

例如：- 如果我输入 '001' 作为值，它应该打印`zero zero one`为输出。

我知道如何将数字打印到其他数字的单词中，即首先反转数字，然后使用模数运算符提取数字，然后使用切换条件打印单词。

默认情况下自动`C`取值。我怎么能阻止它？我也想打印前导零。`001``1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:52:25.950

要使用前导零，您可以将字符串作为输入。如果需要，之后，您可以使用`atoi`ou从字符串中提取数字`strto*`。

例子：

```
#include <stdio.h>
#include <string.h>

char buf[SIZE];
const char *text_number[] = { 
    "zero", "one", "two", "three", "four", "five", "six", 
    "seven", "eight", "nine"
};

if (fgets(buf, sizeof buf, stdin) != NULL) {
    char *peol = strchr(buf, '\n');

    if (peol != NULL) {
        size_t size = peol - buf; /* assume `peol` is a valid pointer */

        for (i = 0; i < size; ++i) {
            switch (buf[i]) {
            case '0': 
            case '1': 
            case '2': 
            case '3': 
            case '4': 
            case '5':
            case '6':
            case '7':
            case '8':
            case '9':
                putchar(text_number[buf[i]]);
                break;
            default:
                /* treat "not a digit" error */
            }
        }
        putchar('\n');
    } else {
        /* treat strchr error */
    }
} else {
    /* treat fgets error */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:05:57.623

像字符串一样扫描输入，并在打印时使用 ASCII 表示将其作为字母进行，如下所示（仅想法）：

```
int main (void)
{
   char number[ 30 ];
   int i = 0;

   printf( "Enter the number: " );

   /*You should use fgets here for safe scan*/
   scanf( "%s", number );

   while( *( number + i ) != '\0' ){
   switch( *( number + i) ){
      i++;

      /* Cause numbers are stored in their ASCII code*/
      case 48: /* 0 */
         printf('zero');
         break;
      case 49: /* 1 */
         printf('one');
         break;
      case 50: /* 2 */
         printf('two');
         break;
      case 51: /* 3 */
         printf('three');
         break;
      case 52: /* 4 */
         printf('four');
         break;
      case 53: /* 5 */
         printf('five');
         break;
      case 54: /* 6 */
         printf('six');
         break;
      case 55: /* 7 */
         printf('seven');
         break;
      case 56: /* 8 */
         printf('eight');
         break;
      case 57: /* 9 */
          printf('nine');
          break;
      default:
          /*In case you enter a symbol, or a letter enter something here*/
   }
   return 0;        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:13:41.850

我注意到需要的话。将字符作为字符串读入 digits[] 并像以下片段所示那样循环。如果需要，请添加错误检测。你真的需要一个开关吗？以下使用更少的代码行。

```
#include "ctype.h" // isdigit()

int const *digits[] = {“零”、“一”、“二”、“三”、“四……、……九”}；

字符数[10]；

诠释n;
for ( n = 0; n < sizeof(number) && isdigit(number[n]); n++ )
{
    printf( "%s%s", n ? " " : "", digits[number[n] - '0'] );
}

如果 ( n )
    printf("\n");

```

免责声明：未编译或运行。

# c# - Windows 商店应用程序 - 如何在 C# 中对 ListBoxItem 使用自定义模板？

> ID：13268103
> 
> 赞同：1
> 
> 时间：2012-11-07T10:47:40.390
> 
> 标签：c#, templates, listbox, windows-8, listboxitem

这是我的 ListBoxItem 在具有自定义模板的 ListBox 中的示例：

```
<ListBox Margin="0,140,0,0" x:Name="ListBox_Main" VerticalAlignment="Top" Foreground="Black" SelectionChanged="ListBox_Main_SelectionChanged" FontFamily="Segoe UI" Grid.RowSpan="2" FontSize="26.667">
            <ListBox.Resources>
                <Style x:Key="CustomStyle_ListBox" TargetType="ListBox">
                    <Setter Property="Foreground" Value="{StaticResource ListBoxForegroundThemeBrush}"/>
                    <Setter Property="Background" Value="{StaticResource ListBoxBackgroundThemeBrush}"/>
                    <Setter Property="BorderBrush" Value="{StaticResource ListBoxBorderThemeBrush}"/>
                    <Setter Property="BorderThickness" Value="{StaticResource ListBoxBorderThemeThickness}"/>
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>
                    <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="True"/>
                    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Enabled"/>
                    <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="True"/>
                    <Setter Property="ScrollViewer.ZoomMode" Value="Disabled"/>
                    <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
                    <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True"/>
                    <Setter Property="IsTabStop" Value="False"/>
                    <Setter Property="TabNavigation" Value="Once"/>
                    <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
                    <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
                    <Setter Property="ItemsPanel">
                        <Setter.Value>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel/>
                            </ItemsPanelTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListBox">
                                <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal"/>
                                            <VisualState x:Name="Disabled">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="LayoutRoot">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxDisabledForegroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                        <VisualStateGroup x:Name="FocusStates">
                                            <VisualState x:Name="Focused">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxFocusBackgroundThemeBrush}"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Unfocused">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="LayoutRoot">
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#FFFFFFFF"/>
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <ScrollViewer x:Name="ScrollViewer" BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Padding="{TemplateBinding Padding}" TabNavigation="{TemplateBinding TabNavigation}" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="{TemplateBinding ScrollViewer.ZoomMode}">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListBox.Resources>
            <ListBox.Style>
                <StaticResource ResourceKey="CustomStyle_ListBox"/>
            </ListBox.Style>
                <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical" />                                     
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="Padding" Value="120 10 120 10 " />
            </Style>
        </ListBox.ItemContainerStyle>
            <ListBoxItem Background="#19000000" Template="{StaticResource CustomStyle_ListBoxItem}" Content="Item 1"/>
            <ListBoxItem Background="#19000000" Template="{StaticResource CustomStyle_ListBoxItem}" Content="Item 2"/>
            <ListBoxItem Background="#19000000" Template="{StaticResource CustomStyle_ListBoxItem}" Content="Item 3"/>
            <ListBoxItem Background="#19000000" Template="{StaticResource CustomStyle_ListBoxItem}" Content="Item 4"/>
        </ListBox> 
```

现在我想在 C# 中添加另一个 ListBoxItem：

```
ListBoxItem item = new ListBoxItem();
item.Content = "item 5";
ListBox_Main.add(item); //credit goes to Danilo Vulović 
```

现在我想使用 {StaticResource CustomStyle_ListBoxItem} 这是我的 ListBoxItems 在 XAML 中使用的模板，我该如何在 C# 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:41:34.243

如果您总是使用相同的模板，则不必为每个项目设置模板，只需为此使用 ItemTemplate 属性！

```
 <ListBox ItemTemplate="{StaticResource }" x:Name="ListBox_Main" ... > 
```

如果由于某种原因您更喜欢专门为后面代码中的每个项目执行此操作：

```
ListBoxItem item = new ListBoxItem();
item.Content = "item 5";
item.Template = Resources["CustomStyle_ListBoxItem"] as ControlTemplate;
ListBox_Main.Items.Add(item); 
```

# ant - Jenkins 和 Sonar，如何将参数从 Jenkins 传递到 Ant 以创建多个 Sonar 项目

> ID：13268109
> 
> 赞同：0
> 
> 时间：2012-11-07T10:47:55.913
> 
> 标签：ant, jenkins, sonarqube

我正在使用 Jenkins+Sonar+Ant+java。我现在正在夜间触发 Jenkins 的声纳分析。但是，因为我们的完整分析需要很长时间，所以我想定义一个 Jenkins 作业，它使用 Cutoff 插件仅分析过去 1 天的代码（所以在每次提交中，Sonar 都会分析提交的代码+一天的新代码。实际上我只想分析新提交的代码，也许 Cutoff 应该是 0 呢？）。为此，我认为我需要设置两个不同的声纳项目名称。在声纳服务器上，我将有项目“完整分析”和“新代码分析”。问题是，如何在 Jenkins 中定义名称？我想不知怎么的，启动Sonar分析的Ant任务需要取Jenkins的项目名，但是这是怎么做的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:56:09.657

声纳蚂蚁任务从属性中获取项目名称，您可以指定`sonar.projectKey`并`sonar.projectName`进行不同的分析。[细节](http://docs.codehaus.org/display/SONAR/Analyzing+with+Sonar+Ant+Task)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:35:48.257

在 ant 命令行上而不是在属性文件中定义属性 sonar.projectKey 和 sonar.projectName。在 Jenkins 中，您可以在 Ant 构建器的高级参数中执行此操作。

# automation - 以自动方式从 AppStore 安装应用程序

> ID：13268116
> 
> 赞同：3
> 
> 时间：2012-11-07T10:48:39.170
> 
> 标签：automation, app-store

我正在尝试编写一个脚本，以便以自动方式（在越狱设备上）从 Apples AppStore 下载应用程序。所以我可以告诉脚本应用程序的名称（或 ID）（例如通过 JSON），脚本开始自行下载和安装。

有人知道如何实现这些东西吗？

# objective-c - StoryBoard 中未设置视图出口

> ID：13268121
> 
> 赞同：0
> 
> 时间：2012-11-07T10:48:53.637
> 
> 标签：objective-c, ios, uiview

我能用异常做什么

```
[UIViewController _loadViewFromNibNamed:bundle:] loaded the "TripDetailView" nib but the view outlet was not set.' 
```

注意：我使用 StoryBoard。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:57:14.287

转到您的故事板文件。选择`yellow colored option (viewController)`of`TripDetailView`并选择视图出口并将其拖到视图中。

![主板](../Images/5cbc48831f46ddaee273c40d5aa0fc0e.png)

# php - PHP PDO 检查 mysql 错误

> ID：13268123
> 
> 赞同：0
> 
> 时间：2012-11-07T10:49:01.353
> 
> 标签：php, oop, pdo

我有这个让我发疯的问题。我想要的只是检查查询是否有错误，如果是则显示错误，否则运行查询。

我有以下几乎（因为它运行插入查询两次）工作

```
[..]

$dbdata = new mySQLAccessData();
$db = new PDO($dbdata->hostname,$dbdata->username,$dbdata->password);
$defaults = new Defaults();

[..]

if(!$db->exec($sql)){
    echo($defaults->throwError('MySql error',implode(":",$db->errorInfo())));
}else{
    $db->exec($sql);
    $defaults->writeLog($table,$db->lastInsertId(),'add');
} 
```

我尝试了很多东西（其中包括`try(){}catch(){}`方法），但除了上面的代码之外没有任何效果。它以我想要的方式显示错误，并且仅在发生错误时显示错误，但运行`exec()`两次...

有人可以保释我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:51:41.987

如果您想在发生错误时看到抛出的异常，只需[设置 PDO 错误模式](http://php.net/manual/en/pdo.setattribute.php)（另请参见：[连接和连接管理](http://www.php.net/manual/en/pdo.connections.php)）：

```
$db = new PDO($dbdata->hostname,$dbdata->username,$dbdata->password);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

例如，这将使您的代码自动抛出异常。可能正是您正在寻找的。

您的代码的实际问题是`exec`两次。你不需要：

```
$success = $db->exec($sql);

if (!$success) {
    echo $defaults->throwError('MySql error', implode(":", $db->errorInfo()));
} else {
    # do not exec *again* here.
    $defaults->writeLog($table, $db->lastInsertId(), 'add');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:52:50.907

为什么要在`else`零件中再次执行查询？通常您只是尝试运行查询，如果发生错误，请对其做出反应。

```
[..]

$dbdata = new mySQLAccessData();
$db = new PDO($dbdata->hostname,$dbdata->username,$dbdata->password);
$defaults = new Defaults();

[..]

if(!$db->exec($sql)){
    echo($defaults->throwError('MySql error',implode(":",$db->errorInfo())));
}else{
    $defaults->writeLog($table,$db->lastInsertId(),'add');
} 
```

据我所知，在实际执行查询之前没有“测试”查询的选项。

# c++ - 从存储容器显式设置 adjacency_list 图的 EdgeList

> ID：13268128
> 
> 赞同：1
> 
> 时间：2012-11-07T10:49:16.110
> 
> 标签：c++, boost, boost-graph

我有一个程序，我需要在其中反复销毁和恢复图表。我已将其声明为

```
typedef boost::adjacency_list<boost::hash_mapS, boost::vecS, boost::undirectedS, VertexProperties> Graph; 
```

我想做的是将 EdgeOutList 复制`hash_map`到一个单独的变量中，然后将其复制回去以恢复它。我一直在使用`copy_graph`完整的图表，但它必须以这种方式重新分配所有内容，我更愿意将 edge_list 复制到原始对象。

这种程序似乎没有任何文档，尽管我可能不明白一些东西。

# php - 这个 PHP 对象中的数据隐藏在哪里？

> ID：13268130
> 
> 赞同：0
> 
> 时间：2012-11-07T10:49:30.087
> 
> 标签：php, object, simplexml

我正在调试我的代码以检查当前对象。

它是从 xml 加载的 SimpleXml，看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?><epreuves><epreuve id="467" noteSur="20"><![CDATA[Civil Engineering China 2012]]></epreuve></epreuves> 
```

我正在使用此代码加载对象。

```
$result=simplexml_load_string($xml_string,null,LIBXML_NOCDATA); 
```

当我调试我的代码时，我看到了这个：

![在此处输入图像描述](../Images/0881c52326a8a78feb975f0400c5ef47.png)

当我将对象转换为字符串时，它给了我想要的数据，但为什么我在对象的内脏中没有看到“Civil Engineering China 2012”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:11:27.607

简而言之，@Gordon 是非常正确的：`SimpleXMLElement`类具有一些非常不寻常的属性，因此期望它的对象在调试器中与“正常”对象一样具有启发性是不明智的。

不过，让我们再分析一下。简单的搜索`lxr.php.net`（我选择了 PHP 5.3 分支，坦率地说，我不希望这在 5.4 中有所不同）最终导致我们得到[以下结构](http://lxr.php.net/xref/PHP_5_3/ext/simplexml/php_simplexml.h#57)：

```
typedef struct {
    zend_object zo;
    php_libxml_node_ptr *node;
    php_libxml_ref_obj *document;
    HashTable *properties;
    xmlXPathContextPtr xpath;
    struct {
        xmlChar               *name;
        xmlChar               *nsprefix;
        int                   isprefix;
        SXE_ITER              type;
        zval                  *data;
    } iter;
    zval *tmp;
    zend_function *fptr_count;
} php_sxe_object; 
```

这里有几件值得注意的事情——我想，在问题的上下文中，重要的是“正常”对象本身（如[这里](http://lxr.php.net/xref/PHP_5_3/Zend/zend.h#297)定义的）只是这个结构的一部分。

# visual-studio - 添加收藏夹后 VS2012 中的错误消息和构建定义的空列表

> ID：13268132
> 
> 赞同：0
> 
> 时间：2012-11-07T10:49:32.537
> 
> 标签：visual-studio, build, tfs, visual-studio-2012

我们有一堆通过 TFS 可用的构建定义，这些在*Team Explorer - Builds* in VS 下可见，直到几分钟前，当我尝试将其中几个添加到“收藏夹”时。

我所做的只是右键单击一个构建定义，然后选择“添加到收藏夹”，然后为另一个构建定义重复该过程：

![在此处输入图像描述](../Images/bcd5cd24182cff8ce43ea181491e57b5.png)

然而，结果是一个现在空的构建定义列表——我似乎再也找不到它们中的任何一个了。此外，我收到以下错误消息：

**已添加具有相同密钥的项目。**

任何想法如何解决这一问题？有人知道“收藏夹”列表存储在哪里吗？（我的理由是，如果我能找到并清空该列表，那么这个问题也许会消失？）

![在此处输入图像描述](../Images/1d73cc7977595a05c788b75300f1a5cf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:25:11.517

我今天遇到了同样的问题。我能够通过以下步骤解决它。

*   关闭 Visual Studio
*   打开 C:\Users[用户名]\AppData\Local\Microsoft\Team Foundation\4.0\FavoritesStore
*   将 xml 文件从该文件夹移动到其他位置
*   启动 Visual Studio，打开团队资源管理器并导航到 Builds
*   此时，“构建”窗格打开且没有错误，“我最喜欢的构建定义”为空
*   将 xml 文件移回其原始位置
*   刷新构建窗格。

刷新后，我最喜欢的构建定义又回来了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T09:13:09.253

您可以尝试（这对我有同样的问题）删除以下文件夹中的所有文件并重新启动 VS2012（[Source](http://henrywrites.wordpress.com/2012/11/19/tfs-vs2012-an-item-with-the-same-key-has-already-been-added/comment-page-1/#comment-12)）： **C:\Users[USERNAME]\AppData\Local\Microsoft\Team Foundation\4.0\Cache**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T23:48:57.080

今天我遇到了这个问题，当时我打开了一个神秘的对话框并且它阻止了用户输入。我找不到它，也找不到它。我不得不强制关闭 VS，重新启动后我的收藏夹已损坏。

我发现您可以直接删除收藏夹的缓存并重新启动IDE。一旦它启动，您将看到 VS 将重新创建该文件夹，并且一旦您添加了您的第一个收藏夹，就会在该位置创建一个新的收藏夹文件。C:\Users\\AppData\Local\Microsoft\Team Foundation\4.0\FavoritesStore

无需编写应用程序或清除相邻的缓存文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:00:13.513

收藏夹存储在用户或组的元数据中。您需要编写一个应用程序来清除它们。

[http://geekswithblogs.net/TarunArora/archive/2012/10/18/tfs-api-add-favorites-programmatically.aspx](http://geekswithblogs.net/TarunArora/archive/2012/10/18/tfs-api-add-favorites-programmatically.aspx)

# android - Android 按钮文字移动

> ID：13268137
> 
> 赞同：0
> 
> 时间：2012-11-07T10:49:52.020
> 
> 标签：android, layout, button, text

我遇到的问题是，当我单击下面 xml 中显示的按钮之一时，按钮上的文本会跳下一行。因此，如果按钮为 1 行，则不显示任何文本。如果按钮是 2 行，则在按钮的底部仅显示第一行。

onClick 方法中的任何内容都不会更改布局。

继承人的XML

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:id="@+id/layout_main">

    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"  >

.. a few other layouts and controls that works fine 

        <TableLayout
                android:id="@+id/tableLayout276"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TableRow
                    android:id="@+id/TableRow10"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="left"
                    android:gravity="center"
                    android:orientation="vertical" >

                    <Button
                        android:id="@+id/BtnRet"
                        android:layout_width="120dp"
                        android:layout_height="wrap_content"
                        android:text="Ret"
                        android:gravity="center"
                        android:textSize="18dp" />      

                    <Button
                        android:id="@+id/BtnVisningsType"
                        android:layout_width="120dp"
                        android:layout_height="wrap_content"
                        android:text="Decimaltal"
                        android:gravity="center"
                        android:textSize="18dp" />

                    <Button
                        android:id="@+id/BtnFunktioner"
                        android:layout_width="120dp"
                        android:layout_height="wrap_content"
                        android:text="Funktioner"
                        android:gravity="center"
                        android:textSize="18dp" />      
            </TableRow>
        </TableLayout>

.. a few other layouts and controls that works fine

</LinearLayout>
</ScrollView>
</LinearLayout> 
```

现在，如果我将按钮上的 layout_width 更改为 wrap_content，一切正常（从[更改 textview 时得到的想法，textview 下方按钮上的文本向下移动。帮助！](https://stackoverflow.com/questions/6047987/when-changing-textview-the-text-on-a-button-below-the-textview-moves-down-help)） - 除了按钮现在显然没有相同宽度，看起来很乱。

有谁知道为什么会发生这种情况，以及我如何既保留文本又决定按钮的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:03:19.620

这增加了布局的复杂性，但可能是一个解决方案。

将 LinearLayout 添加到表格行并使用权重来控制按钮的精确布局。像这样的东西：

```
<TableRow
                android:id="@+id/TableRow10"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="left"
                android:gravity="center"
                android:orientation="vertical" >

    <LinearLayout android:layout_height="match_parent"
                  android:layout_width="match_parent"
                  android:weightSum="3"
                  android:orientation="horizantal"/>

                <Button
                    android:id="@+id/BtnRet"
                    android:layout_weight="1"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:text="Ret"
                    android:gravity="center"
                    android:textSize="18dp" />      

                <Button
                    android:id="@+id/BtnVisningsType"
                    android:layout_weight="1"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:text="Decimaltal"
                    android:gravity="center"
                    android:textSize="18dp" />

                <Button
                    android:id="@+id/BtnFunktioner"
                    android:layout_weight="1"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:text="Funktioner"
                    android:gravity="center"
                    android:textSize="18dp" />      

    </LinearLayout>

</TableRow> 
```

注意事项：

*   可能会影响性能
*   凭记忆输入，如有错别字请见谅
*   未测试
*   使用填充/边距来调整精确的大小

一个 RelativeLayout 也可能工作。

# javascript - Android 上的 Phonegap：让 Drawables/AppIcons 回到 Javascript 环境以在“浏览器”中显示

> ID：13268138
> 
> 赞同：3
> 
> 时间：2012-11-07T10:49:55.237
> 
> 标签：javascript, android, cordova, icons, drawable

我正在使用 PhoneGap 构建一个基于 Android 的 WebApp，并试图将几个当前安装的应用程序的应用程序图标返回到 Javascript 环境中，以便在“浏览器”中显示。

掌握安卓层中的图标是没有问题的。我已经使用类似于此的代码完成了此操作：

可绘制的 myNewIcon = myResolveInfoInstance.loadIcon(mycontext.getPackageManager());

...但我正在努力研究如何将图标恢复到 Javascript 回调中，以便我可以将其放入“网页”中。

如果有人可以就如何实现这一目标给我一两个提示，将不胜感激。好像应该不会太难吧……！？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:52:43.063

如果这些drawable 将纯粹用于项目的Web 端，那么将它们放在assets 文件夹中是最好的主意。然后可以通过以下方式访问它们：

```
file:///android_asset/www/images/icon.png 
```

例如。

# c++ - C++ - 创建文件夹方法

> ID：13268142
> 
> 赞同：2
> 
> 时间：2012-11-07T10:50:11.507
> 
> 标签：c++, winapi, null, directory, case

我在 C++ 中有以下方法：

如果文件夹已经存在，屏幕上会显示正确的消息。但是，如果文件夹不存在，则屏幕上不显示任何内容，即不执行 case NULL 标识的部分。我怎么解决这个问题？

换句话说，如果文件夹不存在，我怎样才能让 case NULL 之后的代码运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:56:33.527

首先，如果文件夹不存在，`CreateDirectory()`可能会成功并返回一个非零值，因此`if`条件将返回`false`，您将永远无法到达该`switch`语句。

其次，`GetLastError()`正如所宣传的那样：它返回最后一个错误。如果`CreateDirectory()`没有引发错误，它将返回任何其他函数设置的最后一个错误。检查`NULL`不是很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T10:54:56.907

规范说只要 CreateDirectory 成功，返回值就是非零。

[创建目录](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363855%28v=vs.85%29.aspx)

那么为什么不使用*if 子句的**else*来打印它

 *最多可以使用开关中的*默认值进行打印*

“发生了一些错误”。

由于 switch 仅在发生错误时执行*

# php - 重用 MySQL 连接 PHP 对象继承

> ID：13268143
> 
> 赞同：4
> 
> 时间：2012-11-07T10:50:19.663
> 
> 标签：php, mysql, mysqli

我正在编写一个 PHP 脚本来将主题从旧论坛站点迁移到新站点。

*   旧论坛站点使用数据库“old_forums”
*   Thew 新论坛站点使用数据库“new_forums”
*   MySQL 用户“论坛”拥有两个数据库的所有权限（为方便起见，我使用 1 个单用户，但如果需要，使用 2 个不同的用户不会有任何问题）

我将两个论坛都托管在同一主机上 - localhost

脚本我有以下结构

```
<?php  
class Forum {  
   //constants  
   const HOST = "localhost";  
   const DB_USER = "forums";  
   const DB_PASS = "forums";  
   ...  
   //properties e.g. topic title, topic content
}
class OldForum extends Forum {  
   const DB_NAME_OLD = "old_forums";  
   public static function exportTopics() {  
       //some code
   }  
}
class NewForum extends Forum {
   const DB_NAME_NEW = "new_forums";
   public static function importTopics() {  
       //some code
   }
}  
OldForum::exportTopics();  
NewForum::importTopics();  
?> 
```

我知道我在这里混合了过程和面向对象的编程 PHP (OOPP)。我是面向对象的 PHP 新手，但是（我有 Java 经验，所以我非常愿意接受一些指南来制作这个纯 OOPP）

我想为 OldForum 和 NewForum 类使用 1 个单一的 MySQL 连接。
我应该在哪里实例化 mysqli 对象？
例如，在 Forum 类的构造函数中，或者有一个新的 mysqli 对象作为 Forum 类的属性，
这样我就可以创建一个新的 Forum 对象来启动 MySQL 连接

```
$a_forum = new Forum(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:05:46.327

mysqli 连接很容易在实例之间共享，只需在引导文件中创建一次，然后将其传递给需要它的实例，例如

```
$mysqli = new mysqli(/* connection params */);
$someClassUsingMySqli = new SomeClassUsingMySqli($mysqli);
$anotherClassUsingMySqli= new AnotherClassUsingMySqli($mysqli); 
```

这将有效地将连接限制为一个，并且您无需在对象内使用全局变量。这称为依赖注入，应该是您将依赖项分配给对象的首选方式。它使依赖关系明确且易于交换，从而有利于更改、测试和维护。

至于您的导入和导出任务，我想知道您为什么要在 PHP 中执行此操作。它显然是同一个数据库服务器，所以你可以在你的 MySql 实例中完成它。如果你想用 PHP 来做，我可能会做这样的事情：

```
class MigrateForum
{
    private $dbConnector;

    public function __construct(DBConnector $dbConnector)
    {
        $this->dbConnector = $dbConnector;
    }

    public function migrate()
    {
        // orchestrate the migration (consider transactions)
        $this->exportOldForum();
        $this->importNewForum();
    }

    private function exportOldForum()
    {
        // code to export old_database_name.table_name 
    }

    private function importOldForum()
    {
        // code to import new_database_name.table_name 
    }
} 
```

您可以将 Import 和 Export 方法提取到它们自己的类中，然后使用某种[复合](https://stackoverflow.com/questions/3253067/php-classes-validation/3253781#3253781) [命令模式](https://stackoverflow.com/questions/3209697/questions-about-command-pattern-php/3211043#3211043)，但这实际上取决于您需要的模块化程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:52:44.867

不同的方法是`VIEW`在 new_forums 数据库中创建一些指向 old_forum 数据库。在这种情况下，所有“视图”都可以有，例如，“old_”前缀？与此类似的东西：

```
CREATE VIEW old_tbl_name AS
     SELECT *
       FROM old_forum.tbl_name 
```

在这种情况下，您只有一个与一个数据库的连接。

# c# - C#：将数组转换为在带有附加参数的参数中使用

> ID：13268151
> 
> 赞同：14
> 
> 时间：2012-11-07T10:50:56.630
> 
> 标签：c#, arrays, params

我有一个需要参数的方法。在方法内部，应将另一个变量添加到输出中：

```
private void ParamsTest(params object[] objs)
{
  var foo = "hello";
  // Invalid: Interpretes objs as single array parameter:
  Console.WriteLine("{0}, {1}, {2}", foo, objs);
} 
```

当我打电话

```
ParamsTest("Hi", "Ho"); 
```

我想看看输出。

```
hello Hi Ho 
```

我需要做什么？

我可以复制`foo`并`objs`进入一个新数组并将该数组传递给，`WriteLine`但是有没有更优雅的方式来强制`objs`再次充当参数？种`objs.ToParams()`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T10:56:08.117

如果您的问题只是向数组添加另一个元素，您可以使用 List

```
List<object> list = new List<object> { "hello" };
list.AddRange(objs);
Console.WriteLine("{0}, {1}, {2}, ...", list.ToArray()); 
```

`params`不是数据类型。参数数据类型仍然是一个普通数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T10:59:04.660

我会[`string.Join`](http://msdn.microsoft.com/en-us/library/dd988350.aspx)用来做格式化：

```
Console.WriteLine("{0}, {1}", foo, string.Join(", ", objs)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T10:54:53.040

您可以像这样使用 foreach 循环

```
string objsString = string.Empty;
foreach (var ob in objs)
    objsString += ", " + ob.ToString();
Console.WriteLine("{0}{1}", foo, objsString); 
```

或者还有更好的方法：

```
string paramsString = string.Join(", ", objs);
Console.WriteLine("{0}, {1}", foo, paramsString ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T10:55:41.553

循环遍历`params`数组

```
var foo = "hello";
Console.Write(foo);
objs.ForEach(obj => Console.Write(", {0}", obj.ToString()));
Console.WriteLine(); 
```

或用于[**`String.Join()`**](http://msdn.microsoft.com/en-us/library/dd783876.aspx)创建数组的字符串表示。

```
var foo = "hello";
string output = String.Join(", ", objs);
Console.WriteLine("{0}, {1}", foo, output); 
```

# ios - ios Facebook SDK 编译指示，GCC 错误

> ID：13268152
> 
> 赞同：0
> 
> 时间：2012-11-07T10:51:00.127
> 
> 标签：ios, facebook, pragma

我必须实现一个 Facebook 分享方法......我看了视频，阅读了几个导师，等等...... 1：我注册了我的应用程序，下载了 sdk，示例运行良好 2：当我拖放FacebookSDK.framework 到我的应用程序（不是新应用程序，它具有自定义框架），并将#import 包含到所需的类和 appdelegate 中，在构建期间，我在 FBRequest.h 中不断收到以下错误：

```
LLVM GCC 4.2 error
'#pragma' is not allowed here

LLVM GCC 4.2 error
instance variable '<unnamed>' has unknown size

LLVM GCC 4.2 error
expected `;' before 'NSError' 
```

这是有问题的区域

```
@interface FBRequest : NSObject {
 @private
    id<FBRequestDelegate> _delegate;
    NSString*             _url;
    NSURLConnection*      _connection;
    NSMutableData*        _responseText;
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"
    FBRequestState        _state;
#pragma GCC diagnostic pop
    NSError*              _error;
    BOOL                  _sessionDidExpire;
    id<FBGraphObject>     _graphObject;
} 
```

XCode 4.5，试图在 ios 5.1 模拟器和 ios6 iPod 4 中运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:29:22.747

尝试在 Project > Build Settings > Build Options > Compiler for C/C++/Objective-C 中切换到 Apple LLVM 编译器 4.1 而不是 LLVM GCC 4.2

![构建设置 > 构建选项 > C/C++/Objective-C 编译器](../Images/7f416a0d147dabc9adfcabce4bb6ce6a.png)

ps 如果您没有在此处看到“Compiler for C/C++/Objective-C”，请选择“全部”。

# java - 总重量。排除共享域对象以分离 Maven 模块

> ID：13268158
> 
> 赞同：1
> 
> 时间：2012-11-07T10:51:18.453
> 
> 标签：java, gwt, maven, multi-module

我有一些域类，例如 `Student`，`User`等，它们用于服务器和客户端（gwt）端。

我可以排除这个域类以分离*maven* -module，所以我可以将此模块作为依赖项添加到其他 maven-modules（即将此模块作为依赖项添加到包含 gwt 相关内容的 maven-module，因此将生成此域类JavaScript，并将此模块作为依赖项添加到“普通”（不是 gwt）Java maven 模块，因此不会将这个域类生成到 JavaScript）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:58:29.917

是的，当然，为什么不呢？考虑以下结构：

```
root-pom--->common
        |
        +-->frontend
        |
        +-->backend 
```

拥有`frontend`并`backend`依赖`common`并将您的域对象放入`common`.

您应该记住`*.gwt.xml`在项目中公开您的 VO 的文件，`common`并将其包含在您`frontend`的`gwt.xml`描述符中，例如。

```
<module>
    <source path="your.vo.package" />
</module> 
```

并且 - 正如 Thomas Broyer 指出的那样 - 请记住将源代码提供给`frontend`，但这不一定必须在单独的 jar 中。您可以将源代码与 .class 文件一起打包。的`gwt-maven-plugin`目标`gwt:resources`对此很有用：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>resources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        ...
    </plugins>
</build> 
```

干杯，

# sql - 合并语句：不要更新空白字段

> ID：13268170
> 
> 赞同：2
> 
> 时间：2012-11-07T10:52:09.210
> 
> 标签：sql, sql-server, sql-server-2008, merge, case

我正在执行从临时表`t`到主表的 MERGE 语句`ts`，匹配 ID 字段。它包含以下内容：

```
WHEN MATCHED THEN UPDATE
   SET ts.username = t.username, ts.password = t.password, ts.title = t.title, ts.firstname = t.firstname, ts.surname = t.surname, ts.email = t.email 
```

如果临时表中的用户名和密码为空`t`，我不想更新主表`ts`。我怎样才能做到这一点？

编辑：似乎`CASE`声明或使用`COALESCE(NULLIF(t.username, ''), ts.username)`会起作用。哪个最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:55:57.533

处理空格（即空字符串）时，则使用 case 语句

```
WHEN MATCHED THEN UPDATE
   SET case when t.username = '' then ts.username else t.username end 
```

如果您正在处理 null，则使用 isnull

```
WHEN MATCHED THEN UPDATE
   SET ts.username = isnull(t.username, ts.username), 
```

如果它可以是空白或 null，则可以在 case 语句中处理两者

```
WHEN MATCHED THEN UPDATE
   SET case when t.username = '' or t.username is null then ts.username else t.username end 
```

# php - PHP class_exists 总是返回 true

> ID：13268171
> 
> 赞同：0
> 
> 时间：2012-11-07T10:52:12.547
> 
> 标签：php

我有一个 PHP 类，在包含文件之前需要一些预定义的全局变量：

文件：includes/Product.inc.php

```
if (class_exists('Product')) {
    return;
}

// This class requires some predefined globals
if ( !isset($gLogger) || !isset($db) || !isset($glob) ) {
    return;
}

class Product
{
   ...
} 
```

以上内容包含在其他需要使用 Product 使用**require_once**的 PHP 文件中。然而，任何想要使用 Product 的人都必须确保这些全局变量可用，至少是这样的想法。

我最近在 Product 类中的一个函数中调试了一个问题，该问题是由于 $gLogger 为空而引起的。需要上述 Product.inc.php 的代码无需费心创建 $gLogger。所以问题是如果 $gLogger 为空，这个类是如何包含的？

我尝试调试代码（NetBeans 中的 xdebug），在 Product.inc.php 的开头放置一个断点来查找，每次遇到 if (class_exists('Product')) 子句时，它都会简单地介入并return 因此永远不会进入全局检查。那么它是如何第一次包含在内的呢？

这是在 MAMP (Apache/MySQL) 下运行的 PHP 5.1+。我没有定义任何自动装载机。

> 感谢您提供信息丰富的答案。我的信念是，当您包含一个文件时，PHP 从第一行开始逐行执行它，因此如果未定义全局变量，它将不允许我包含该文件。我会将检查移到构造函数中。基于原始问题，我接受@deceze 的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T10:58:43.753

文件在执行之前被*解析。*类通过解析“加载”，但函数在解析后执行。通过将函数调用与类放在同一个文件中，类总是在该函数执行之前被解析和“加载”，因此它总是`true`.

如果您总是使用`require_once`（这很好）包含文件，那么无论如何检查都没有意义。类定义不应有条件地依赖于某些全局变量。重新考虑你在这里做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:06:41.413

我在这里看到一个主要问题：

```
// This class requires some predefined globals 
```

这可能会让您感到惊讶，但我认为您真正想要做的是，如果是这种情况，您不会在定义类时检查它，而是在实例化它时检查。

当一个类被实例化时，它的构造函数被调用。这对我来说似乎是一个完美的地方来检查：

```
class Product
{
    public function __construct() {
        // This class requires some predefined globals
        $this->needGlobal('gLogger', 'db', 'glob');
    }

    private function needGlobal() {
        foreach (func_get_args() as $global) {
            if (!isset($GLOBALS[$global])) {
                throw new RuntimeException(sprintf('Global %s needed but not set.', $global));
            }
        }
    }

    ...
} 
```

当您实例化 a`Product`时，它会自动检查是否满足先决条件：

```
$blueShoes = new Product(); 
```

如果不满足前提条件，这将不起作用，但如果它会起作用。

但这只是部分解决了您的问题。您的代码的真正问题是`Product` *需要*全局变量才能工作。

而是让产品只使用它需要使用的东西：

```
class Product
{
    private $gLogger;
    private $db;
    private $glob;

    public function __construct(LoggerInterface $gLogger, DbInterface $db, GlobInterface $glob) {
        $this->gLogger = $gLogger;
        $this->db      = $db;
        $this->glob    = $glob;
    }    

    ...
} 
```

用法：

```
$redShoes = new Product($gLogger, $db, $glob); 
```

然后你就不需要再关心内部的`Product`任何全局了。

* * *

您评论说您希望逐步改进代码。你可以这样做，方法如下。正如上面所写的第二个变体是要走的路，但目前遗留代码与它不兼容。无论如何，如果`Product`该类是新代码，您应该使用依赖注入来编写它。这对于将旧代码与新代码分开很重要。您不希望旧代码被新代码吞噬。那将使新代码遗留代码，因此您将无法逐步改进。您只需添加新的遗留代码。

所以使用依赖注入来定义类。对于您的遗留需求，编写第二个类来屏蔽这个：

```
class ProductLegacy extends Product
{
    public function __construct() {
        // This class requires some predefined globals
        list($gLogger, $db, $glob) = $this->needGlobal('gLogger', 'db', 'glob');
        parent::__construct($gLogger, $db, $glob);
    }

    private function needGlobal() {
        $variables = array();
        foreach (func_get_args() as $global) {
            if (!isset($GLOBALS[$global])) {
                throw new RuntimeException(sprintf('Global %s needed but not set.', $global));
            }
            $variables[] = $GLOBALS[$global];
        }
        return $variables;
    }
} 
```

如您所见，这个小存根将全球的做事方式与新的方式结合在一起。您可以`Product`在新代码中使用该类，如果您需要与旧代码交互，则可以使用`ProductLegacy`与全局变量一起使用的类进行类实例化。

您还可以创建一个辅助函数来执行此操作，以便您可以将它用于不同的类。取决于你的需要。只需找到一个可以在旧代码和新代码之间划清界限的边界。

# php - PHP 如何处理重复的 URL 参数？

> ID：13268173
> 
> 赞同：2
> 
> 时间：2012-11-07T10:52:18.503
> 
> 标签：php, http, get

快速提问：如果我提交如下表格

```
<form action='something.php'>
   <input type='text' name='a' />
   <input type='text' name='a' />
</form> 
```

$_GET['a'] 会输出什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T10:52:54.730

如果名称以`[]`它结尾，则为您提供一个数组，否则为您提供最后一个结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T10:54:49.467

`$_GET['a']`将是最后一个或第一个参数（我不记得了）。

你有两个选择：

1.  要么解析你自己的字符串（可以用 GET 和 POST 完成）

2.  使用“a[]”作为名称。这将触发 PHP 填充`$_GET['a']`为数组。但是，这种行为不是标准的，可能会给您带来客户端 javascripting 的问题。

对于解析，要么使用 (for GET)

```
 $_SERVER['QUERY_STRING'] 
```

或（对于 POST）

```
 file_get_contents("php://input") 
```

`php://input`是一个流，相当于请求的原始正文数据。

# drupal - Drupal - 在特定页面上显示内容

> ID：13268179
> 
> 赞同：1
> 
> 时间：2012-11-07T10:52:40.193
> 
> 标签：drupal, drupal-7, drupal-theming

我是否可以将以下字段添加到内容类型，以便我创建的每条内容都可以调整到页面？

![特定页面字段](../Images/5e92f1d7dd13ae09e6d1f153d086bea2.png)

或者是否有一个扩展发布选项的模块，通过它添加我创建的所有页面（就像“提升到首页”一样）？如果没有，为什么没有人这样做？作为 Drupal 的新用户，这似乎是一个方便的操作。（我已经尝试过[这个模块](http://drupal.org/project/custom_pub)，但没有达到我想要的结果）。

如果这些解决方案都不可用，那么最好的替代方法是什么？

我已经在[Stack Exchange for Drupal](https://drupal.stackexchange.com/questions/49915/show-content-on-specific-page)上发布了这个问题，但我需要一个快速的答案，而且这里似乎有一个更大的社区：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:13:10.057

你应该使用[Context](http://drupal.org/project/context)。使用 Context，您将能够为您的 drupal 管理上下文条件和反应，例如 Regions。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:52:31.393

你用过视图吗？它是最常用的drupal 模块之一。它不会直接扩展发布选项，但会以某种方式取代它。您可以举例说，列出所有内容类型：your_own_Content_type，它们具有提升到首页的发布选项。然后按标题，日期，你喜欢什么对它们进行排序。

您也可以只创建一个视图并从中创建多个块。你必须了解drupal的逻辑：如果你想在不同的页面上有不同的块，你必须创建不同的页面和不同的块

为一种内容类型创建视图并从中制作一个块。将此块放在所需的页面上。所有其他块都使用相同的视图制作，只需调整视图中的条件并从中创建一个新块。您还应该将所有块放在同一区域中，并将其设置为正确的页面

如果遇到任何问题，您可以在这里找到很多文档... [drupal.org/project/views](http://drupal.org/project/views)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:27:25.367

我认为 Views 对于很多简单的请求来说太复杂了。

有几个解决思路：

1.  **简单的方法**- 您可以创建一个特定的模板文件或添加一些 if 语句到 node.tpl.php（特定的 tpl 更好）
2.  **对于较小的更改**-使用“路径”过滤器和“主题 html”反应创建一个新[上下文，而不是通过 css 隐藏该字段](http://drupal.org/project/context)
3.  **最好但复杂（大量使用）** - 创建一个新的[“查看模式”](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_entity_info_alter/7)并通过新的[“hook_menu”](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)实现显示。

~ 阿尔莫格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T10:41:28.883

Views 最擅长在您的网站上创建图像或任何类型数据的幻灯片。

与 nodequeue 结合使用，它可能会提供接近或您试图实现的全部功能（看看[这个](http://mustardseedmedia.com/podcast/episode44)......还有[这个](http://mustardseedmedia.com/podcast/episode20)） - 但我不完全理解你的问题。

# google-chrome - 在 Chrome 中嵌入 .WMV 文件

> ID：13268187
> 
> 赞同：5
> 
> 时间：2012-11-07T10:52:58.113
> 
> 标签：google-chrome, video, embed, wmv

我有一个解决方案可以同时显示`.MP4`并`.WMV`嵌入在浏览器中。它在 IE 和 Chrome 中运行良好，但前一段时间它停止在 Chrome 中运行。Chrome 不会显示任何文件（`mp4`或`wmv`），但在 IE 中可以正常工作。我用谷歌搜索了一下，发现 Chromes 较新版本无法处理这个问题的几个原因，但没有解决我的问题。

有效的解决方案是`<object><embed>`，但这仅适用于 IE。然后我尝试添加`<video>`标签并让它`mp4`在 Chrome 中使用，但不适用于`wmv`.

那么，是否有人有解决方案来嵌入在 Chrome 中运行而不会出现问题的 wmv 文件？

要求是它应该能够在 Chrome 和 IE 中播放`MP4`和文件。`WMV`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T09:30:02.707

总而言之，没有解决方案。[现在几乎所有浏览器](http://caniuse.com/video)`<video>`都支持该标签，但对不同格式的支持程度不同：

*   MP4 -[良好的支持](http://caniuse.com/mpeg4)（反正没有人使用 Opera）。适用于您提到的两种浏览器。
*   WebM - [Patchy 支持](http://caniuse.com/webm)，IE 上暂时没有
*   WMV - 我什至找不到任何人对此给出明确的答案，但我认为普遍的共识是这`<video>`是要走的路，而使用上述两种格式中的一种是要走的路。MP4 似乎暂时是更好的选择。如果有要求说您必须实现不可能/毫无意义，我建议您的需求制定者熟悉 ffmpeg :)

# xcode - 用于 Diff/Compare 的 Subversion 客户端 (Mac)

> ID：13268188
> 
> 赞同：2
> 
> 时间：2012-11-07T10:53:03.607
> 
> 标签：xcode, svn, compare, diff, svnx

我正在寻找一个（免费）颠覆客户端，它可以在两个版本之间提供完整的 DIFF/比较。Xcode 的源代码控制比较工具一次只比较一个文件，并没有给你一个在两个版本之间更新的文件列表。

我尝试使用 svnX，但我无法使用我的本地存储库配置它：

> svn+ssh://username@server-machine.local/Users/Path/subversion/ProjectName/

关于适当的颠覆客户端和/或如何使 svnX 工作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:43:19.003

我在 Mac OS 10.7.5 中使用 svnX，你可以[在这里下载 Max OS X 的 svnX](http://code.google.com/p/svnx/downloads/list)。

有一些服务器为颠覆提供免费/私人空间。我使用[了 Assembla 的这个免费/私人空间](https://www.assembla.com/spaces/free-private-subversion-repository-only/prepare_copy?type=private)

这是显示如何在 Mac OS X 中设置 svnX 的屏幕截图。 ![在此处输入图像描述](../Images/093a9417260ab2b2ba19b10af35fa064.png)

![在此处输入图像描述](../Images/a710f9d7bcb59d36791586f014b215c8.png)

在工作副本中，您可以看到修订版本的差异。svnX 使用 fileMerge 来显示差异。它是 mac os x 的最佳颠覆客户端之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:32:32.997

我发现的最好的工具是[subclipse](http://subclipse.tigris.org/)。它是 Eclipse 的附加组件，但您也可以使用它来管理您的存储库。

Collabnet 还提供了一个名为[Collabnet Destktop](http://desktop-eclipse.open.collab.net/)的产品，其中包括 subclipse 客户端。

一个主要的警告是您必须安装 JavaHL 库。请务必**阅读[操作系统的特定](http://subclipse.tigris.org/wiki/JavaHL#head-5bf26515097c3231c1b04dfdb22c036bc511926b)说明**！

您可能需要稍微玩一下，但存储库浏览器非常强大。

# copy - Automator：复制或原地复制

> ID：13268193
> 
> 赞同：1
> 
> 时间：2012-11-07T10:53:15.243
> 
> 标签：copy, osx-mountain-lion, automator, duplication, in-place

我正在尝试构建以下服务：

1.  更改图片类型，生成相同的文件夹（image.jpg => image.jpg + image.png）
2.  更改图像大小，生成相同的文件夹（image.jpg => image.jpg + image-800x600.jpg）

我被困在原始图像在同一文件夹中以不同名称复制的部分（副本查找器项目工作流程需要硬编码目标或我不熟悉的其他选项）。

也许我可以使用 shell 脚本来执行复制部分。我知道如何将文件路径传递给运行 shell 脚本工作流，但我不知道如何将有效路径发送到下一个任务（更改类型或调整大小）。

MAC OS 版本是山狮 10.8.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:42:43.043

您可以在缩放文件之前复制文件：

```
on run {input}
    set newFiles to {}
    repeat with aFile in input
        tell application "Finder" to set myFile to duplicate aFile
        set end of newFiles to myFile as alias
    end repeat
    delay 1
    return newFiles
end run 
```

![在此处输入图像描述](../Images/6d340559f2a4f329643bda82d2ae755e.png)

您可以在末尾添加另一个 AppleScript 来处理文件名：

```
on run {input}
    repeat with myFile in input
        tell application "System Events" to set oldName to myFile's name
        set newName to do shell script "echo " & quoted form of oldName & " | sed -E 's/ ?copy ?[0-9?]*//'"
        tell application "System Events" to set myFile's name to newName
    end repeat
end run 
```

# xml - 从 xml 更新 infowindows

> ID：13268196
> 
> 赞同：1
> 
> 时间：2012-11-07T10:53:22.813
> 
> 标签：xml, google-maps-api-3, infowindow

我有这段代码，它加载一个 xml 文件并将一些标记推送到地图中。此 xml 文件每 5 秒再次调用一次，我使用 marker.setPosition 更新标记的位置，我想要的是在单击标记时更新信息窗口。现在的问题是总是显示在开始时加载的第一个数据。因此，如果有人知道如何编码，我将不胜感激。

```
 //<![CDATA[

var gmarkers = []; 
var map = null;
var infoWindow = null;
var markerclusterer = null;

var infowindow = new google.maps.InfoWindow();

function createMarker(latlng, imei, alias, speed, timestamp, estado, conectado, altitude, angle, soloFecha, hora, html, fechaUk) {
if(estado == 1)
image = '/artworks/icons/truck_green3.png';
else
image = '/artworks/icons/truck_red.png';
var textoLabel= html
var contentString = html;
var marker = new MarkerWithLabel({
position: latlng,
icon: image,
draggable: true,
// map: map,
labelContent: textoLabel,
labelAnchor: new google.maps.Point(40, 0),
labelClass: "labels", // the CSS class for the label
labelStyle: {opacity: 0.50},
zIndex: Math.round(latlng.lat()*-100000)<<5
});

google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString); 
    infowindow.open(map,marker);
    map.setZoom(map.getZoom()+2);
    map.setCenter(latlng);
    });

gmarkers.push(marker);

}//end function createMarker

// This function picks up the click and opens the corresponding info window
function myclick(i) {
google.maps.event.trigger(gmarkers[i], "click");
}//end function picks up the click

// create the map
function initialize() {

var myOptions = {
zoom: 12,
center: new google.maps.LatLng(37.169619,-3.756981),
mapTypeControl: true,
mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
navigationControl: true,
mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"),
                        myOptions);
}// end create the map

setInterval(getMarkers, 5000); // call every 5 seconds the function getMarkers

function getMarkers() {
google.maps.event.addListener(map, 'click', function() {
infowindow.close();
});
// Read the data from example.xml
downloadUrl("vehiculos.asp", function(doc) {
var xmlDoc = xmlParse(doc);
var markers = xmlDoc.documentElement.getElementsByTagName("marker");
for (var i = 0; i < markers.length; i++) {
  // obtain the attribues of each marker
  var lat = parseFloat(markers[i].getAttribute("lat"));
  var lng = parseFloat(markers[i].getAttribute("lng"));
  var point = new google.maps.LatLng(lat,lng);
  var imei = markers[i].getAttribute("imei");
  var alias = markers[i].getAttribute("alias");
  var speed= markers[i].getAttribute("speed");
  var timestamp= markers[i].getAttribute("timestamp");
  var estado= markers[i].getAttribute("estado");
  var conectado= markers[i].getAttribute("conectado");
  var altitude= markers[i].getAttribute("altitude");
  var angle= markers[i].getAttribute("angle");
  var soloFecha= markers[i].getAttribute("soloFecha");
  var hora= markers[i].getAttribute("hora");
  var fechaUk= markers[i].getAttribute("fechaUk");
  var html="<b>"+alias+"</b><br> a una velocidad de "+speed+" km/h <br/>     ultima posicion  a las: "+timestamp;

    // start, check if marker is already created, if so we update it, if not we create it
     if (gmarkers[i] != undefined)
             gmarkers[i].setPosition(point);

     else
            var marker = createMarker(point, imei, alias, speed, timestamp, estado, conectado, altitude, angle, soloFecha, hora, html, fechaUk);
    // end, check if marker is already created, if so we update it, if not we create it
}

markerCluster = new MarkerClusterer(map, gmarkers);

});
}//end function getMarkers 
```

# excel - 如何在 VBA 中为 Select Case 使用数据和条件？

> ID：13268198
> 
> 赞同：0
> 
> 时间：2012-11-07T10:53:23.373
> 
> 标签：excel, vba

基本上我想做的是：

```
Select Case test_expression
   Case condition_1
      result_1   
   Case condition_n
      result_n
End Select 
```

我需要它`condition_n`，`result_n`从电子表格中读取，其中`condition_1`和`result_1`在列 A 和 B 中。然后有时会将行添加到电子表格中！

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:57:28.050

不知道你想完成什么，但这里是一个尝试

```
Select Case test_expression 
    Case Sheets(1).Range("A1").Value 
        Dim s as String
        resultText = Sheets(1).Range("B1").Value

        'Now do something with resultText

    Case condition_n 
         result_n 
End Select 
```

# android - 旋转 ImageVIew 应在 HoneyComb 版本以下的 android 中的旋转位置单击

> ID：13268199
> 
> 赞同：0
> 
> 时间：2012-11-07T10:53:24.243
> 
> 标签：android, animation, rotation, android-imageview

我正在尝试旋转 ImageView 及其原始位置（旋转图像和视图）。这样旋转后，当我在当前位置单击旋转图像时，它应该只能在旋转位置单击。

对于此解决方案，我正在尝试以下代码。但是它正在旋转一切正常。旋转结束后，我需要将 ImageView 和 Image 放在旋转的位置，使其只能点击那里。但它不会成功。我无法旋转图像位置轴点以正确放置。任何人都可以提出解决此问题的方法。

仅供参考-它应该适用于 Gingerbread 版本 android-9

```
 aniView1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.e("", "Clicked on IMAGE VIEW - 1");
            }
        });

        RotateAnimation rotate5 = new RotateAnimation(0, 150,
                Animation.INFINITE, 100, Animation.INFINITE, 250);
        //rotate5.setFillAfter(true);
        rotate5.setDuration(2000);
        rotate5.setInterpolator(new LinearInterpolator());
        aniView1.setAnimation(rotate5);

        rotate5.setAnimationListener(new Animation.AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {

            }

            @Override
            public void onAnimationRepeat(Animation animation) {

            }

            @Override
            public void onAnimationEnd(Animation animation) {

                int newTop = (int) (aniView1.getTop() + aniView1.getWidth());

                aniView1.layout(aniView1.getLeft()-200, newTop,
                        aniView1.getRight(),
                        aniView1.getBottom() + aniView1.getMeasuredWidth());

                // aniView1.setLayoutParams(new
                // RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT));

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:58:12.060

尝试这个。它对我有用。动画状态将从那里持续存在

编辑：

好的，我可以在我的应用程序中使用以下代码来做到这一点：

```
Animation rotateAnim = new RotateAnimation(0, 360, Animation.ABSOLUTE, Animation.ABSOLUTE, Animation.ABSOLUTE, Animation.RELATIVE_TO_SELF);
        rotateAnim.setDuration(5000);
        rotateAnim.setRepeatCount(1);
        rotateAnim.setInterpolator(new AccelerateInterpolator());
        rotateAnim.setRepeatMode(Animation.REVERSE);
        rotateAnim.setFillEnabled(true);
        rotateAnim.setFillAfter(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:21:07.187

把这个文件放在android res --> anim --> loading_rotation.xml下

```
<?xml version="1.0" encoding="UTF-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:duration="1200" 
    android:interpolator="@android:anim/linear_interpolator"/> 
```

在你的活动中

```
view.startAnimation(AnimationUtils.loadAnimation(context,
                R.anim.loading_rotation)); 
```

和你想停下来的地方只是打电话

```
view.clearAnimation(); 
```

# c# - 从 DotNetOpenAuth 开始

> ID：13268201
> 
> 赞同：0
> 
> 时间：2012-11-07T10:53:40.000
> 
> 标签：c#, oauth-2.0, dotnetopenauth, vk

我正在为使用**OAuth 2.0**协议 (vk.com)的社交网络中具有自动化**功能的移动设备工作应用程序。**看起来 DotNetOpenAuth 是完成这项任务的好工具，但我有点困惑从哪里开始。有没有关于如何设置 DotNetOpenAuth 的教程？我只需要自动化并执行一些简单的请求，例如：获取照片、姓名等。或者，我可以使用其他工具吗？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:32:28.317

如果您正在编写在 Windows Phone 等移动设备上运行的 OAuth 2*客户端*，则 DotNetOpenAuth 目前不适用于您，因为它不针对该平台。

不过不用担心。没有库的帮助，OAuth 2 客户端通常很容易编写。通常只有一两个 URL 您必须向其发送请求，然后您就完成了。**

# c# - 我们可以用 Razor 在 MVC3 中做 DBContext 吗？

> ID：13268203
> 
> 赞同：2
> 
> 时间：2012-11-07T10:53:53.273
> 
> 标签：c#, .net, asp.net-mvc, razor

我可以通过在 Web.config`DBContext`中定义来连接到使用 MVC3的数据库吗？`ConnectionString`

如果可能的话，谁能给我一些链接？

# python - 如何使用 Python 爬取各种网站以查找特定部门？

> ID：13268204
> 
> 赞同：-1
> 
> 时间：2012-11-07T10:53:52.797
> 
> 标签：python, web-crawler

我有一个大学网址列表等`www.harvard.edu, www.berkeley.edu`。我需要在各自的网站中找到 cse 部门网址我最初打算做的是通过给定的 url 中的链接并通过指定深度来爬行，比如 3 它会跟随链接并尝试在该页面上抓取的链接中查找 cse 或计算机或单词列表，匹配链接及其锚文本作为结果返回到 csv 文件中。如果没有包含 cse 的链接或这样的词，它应该返回 not found 或类似的想法是稍后将 csv 文件推送到数据库中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:00:28.150

为了解决您的问题，您可以使用[scrapy](http://scrapy.org/)框架。

从scrapy web中提取：

> Scrapy 是一个快速的高级屏幕抓取和网络抓取框架，用于抓取网站并从其页面中提取结构化数据。它可用于广泛的用途，从数据挖掘到监控和自动化测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:10:18.330

这是一项相当复杂的任务，我建议使用如下结构的数据库：

```
TABLE pages (
    `absolute_url` VARCHAR(255) NOT NULL,
    `visited` TINYINT(1) DEFAULT 0,
    -- Additional fields
    UNIQUE KEY (`absolute_url`)
) 
```

小解释：

*   `absolute_url`包含页面的完整 URL（以 开头`http[s]://`）并在其上放置了唯一索引。这样你就可以确保你不会递归或处理多个链接两次
*   `visited`通知您网站是否已被访问（和处理）。该字段对于防止再次访问非常重要，并允许您在程序崩溃（即网络停机）时优雅地恢复

你可以通过 CSV 自己实现这些东西，或者关联数组，但数据库对我来说是最熟悉的解决方案。

该算法将如下所示：

```
database.insert( 'http://www.harvard.edu')
database.insert( 'http://www.berkeley.edu')

# In case of failure you'll start at this point:
while database.get_count( WHERE visited = 0) < 0:

    for url in database.get_records( WHERE visited = 0):
        content = http_client.load(url)
        time.sleep(5) # You don't want to flood server

        # Problematic URLs will be parsed later
        if (not content) or (http_client.is_error):
            continue; 

        for i in content.get_all_urls():
            i = make_absolute(i, url)

            # Also don't crawl remote sites, images, ...
            if not is_valid_url(i):
                continue
            database.insert(i) 
```

*这是伪代码，我不会全部为你实现。*

# android - Instagram 和 Facebook 整合

> ID：13268206
> 
> 赞同：0
> 
> 时间：2012-11-07T10:54:06.263
> 
> 标签：android, facebook, instagram

当用户开始使用我的 android 应用程序时，我正在尝试向 facebook 的新闻提要发布消息，而不是将其发布到用户的墙上，我注意到 instagram 正在使用 facebook 执行此操作。我在developers.facebook.com 中找不到任何与我的需求相似的东西有人知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:10:58.857

我相信你看到的很可能是这样的：

[https://developers.facebook.com/docs/concepts/mobile-ads/](https://developers.facebook.com/docs/concepts/mobile-ads/)

做类似事情的唯一其他方法是创建和发布一个名为“开始使用”的开放图形操作，但我不相信这种操作会被批准，无论如何，它不符合您不发布的要求到用户的时间线。

# ios - MapView 的 UIImageView 子视图

> ID：13268207
> 
> 赞同：0
> 
> 时间：2012-11-07T10:54:10.170
> 
> 标签：ios, uiimageview, mkmapview, addsubview

我必须添加一个 ImageView 作为 MapView 的子视图。我不能通过代码做到这一点，因为 ImageView 总是落后于 mapView。我不能在 IB 中做到这一点，因为在文件的所有者中 UIImageView 始终是 mapView 的外部尊重（我尝试了几次）。我使用的是 Xcode 4.5。我可以添加 UIImageView 作为 MapView 的子视图吗？

这是 MapViewController.h 中的代码

```
 @property (nonatomic, strong) UIImageView *iphoneLegenda;
 @property (nonatomic, strong)IBOutlet MKMapView *mapView; 
```

在 MapViewController.m

```
@synthesize iphoneLegenda;
@synthesize mapView;

- (void)viewDidLoad
{
  //.....
    self.iphoneLegenda.frame = CGRectMake(self.mapView.bounds.origin.x, 
                            self.mapView.bounds.origin.y, 200, 100);

  //......

   [self.mapView addSubview:self.iphoneLegenda];
   [self.iphoneLegenda bringSubviewToFront:self.mapView];
  //.....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:55:06.330

我认为 AntonPalich 和 MashDup 的答案是最好的方法。要在 mapView 中添加子视图，您必须添加 QuartzCore.framework，这是代码：

```
- (void)viewDidLoad
{
 CALayer *layer = [CALayer layer];
 layer.backgroundColor = [[UIColor whiteColor] CGColor];
 layer.bounds = CGRectMake(mapView.frame.origin.x, mapView.frame.origin.y, 200, 100);
 [[mapView layer] addSublayer:layer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:05:04.187

如果您希望图像视图位于地图视图的顶部，就像您使用 xib 一样。mapview 已经在一个视图上，只需在 xib 中添加 imageview 就像您为 mapview 所做的一样并将其链接起来。使该 alpha 在 xib 中具有 0（以后更适合动画）。然后在您的代码中，我假设您想要一个按钮或某种按钮来打开它。所以换线有iboutlet。

```
@property (nonatomic, strong) IBOutlet UIImageView *iphoneLegenda; 
```

然后是淡入淡出的动作：

```
[UIView animateWithDuration:0.5 animations:^{
        [iphoneLengenda setAlpha:1.];
    }]; 
```

不必乱设置框架等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:16:55.190

这个方案怎么样：

```
UIView
 - MKMapView
 - UIImageView 
```

MKMapView 将与 UIView 大小相同，并且 UIImageView 将始终位于顶部。

# maven - 如何在 Tycho 构建中使用包含第三方包的目录

> ID：13268213
> 
> 赞同：12
> 
> 时间：2012-11-07T10:54:28.207
> 
> 标签：maven, eclipse-rcp, dependency-management, tycho

过去，我们在文件系统上拥有我们的包和特性，并通过具有“目录”位置的目标定义文件使它们在 Eclipse 中可用。通过这种方式，很容易将它们与 Eclipse 中的导出向导一起使用。

现在我正在尝试`eclipse-plugin`使用具有第三方依赖项的 Tycho 构建一个，例如*javax.vecmath*和*org.apache.commons.math*。

据我所知，在 Tycho 构建中获取依赖项的最佳方式是通过 p2 存储库。所以我将一个用于 Eclipse 捆绑包。但是对于我的第三方捆绑包，似乎没有可用的 p2 存储库。

所以我的问题是：如何轻松地将 JAR（vecmath、commons-math）放入 p2 存储库？

我以为我可以用 Tycho 构建一个 p2 存储库，但是当我无法访问 Tycho 中的第三方捆绑包时，该怎么做呢？我尝试使用目标定义，但 Tycho 仅支持指向 p2 存储库的链接，而不支持目录或安装。那么还有其他方法可以在 Maven/Tycho 构建中使用我的第三方依赖项吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T11:17:34.580

几个不同的选择...

**P2 插件**

使用[p2-maven-plugin](https://github.com/reficio/p2-maven-plugin)将所有非 OSGi 依赖项打包到包中，并创建一个 p2 存储库。

我还没有尝试过 p2-maven-plugin （在我设置当前项目时它不存在）。它的实现是基于 tycho 的，但您可能会发现它提供了一种比单独的 tycho 插件更方便的方法来解决您的问题。

**捆绑插件**

使用[maven-bundle-plugin](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)*包装*您的非 OSGi 依赖项（每个依赖项一个包装器 pom），并将其安装到您的存储库中。我认为 commons-math 已经是一个依赖项，所以你可能只需要包装 vecmath。`<dependencies>`然后，您可以在基于 tycho 的 pom 文件中列出这些依赖项。

这种方法的优点是您不需要为了构建项目而设置 p2 存储库。缺点是管理你的 bundle 项目中的依赖不再是仅仅修改 MANIFEST.MF 文件的情况：你可能还需要更新 pom。

**捆绑插件和 Tycho**

如果您使用*Bundle 插件*方法将依赖项包装到 OSGi 包中，那么为这些依赖项设置 p2 存储库可能仍然有用，因为这简化了在 Eclipse PDE 中设置目标平台的过程。

为此，您可以创建一个新的基于 tycho 的项目来将依赖项收集到 p2 存储库中：即，已经捆绑的依赖项以及非 OSGi 依赖项的包装版本。这样，创建 p2 存储库的项目会在其 pom 中列出包装的依赖项，并且您的捆绑项目可以使用 p2 存储库而不在其 pom 中列出任何依赖项。

这是我正在使用的方法。具体来说，我正在使用一个`eclipse-feature`项目来定义一个包含所有第三方依赖项的*基本功能。*我还将`<deployableFeature>`打包插件上的配置选项设置为`true`，这将在目标目录中创建一个 p2 存储库。这个特性可以安装到我常用的 Eclipse 实例中，这样可以很容易地使用当前的 Eclipse 平台作为目标平台。它也可以用作 p2 存储库，可以在 tycho 构建的其他地方使用（即通过我的代码），或者用作 Eclipse`.target`文件中的存储库。

`eclipse-feature`似乎是第谷 0.13.0 中最好的包装类型。在更新的版本中可能有更合适的包装类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T15:17:20.473

在 p2 repos 中寻找 3rd 方捆绑 jar 的好地方是 eclipse orbit

[http://download.eclipse.org/tools/orbit/downloads/](http://download.eclipse.org/tools/orbit/downloads/)

commons.math 在那里。

如果您的第 3 方 OSGi 包在 p2 存储库中不可用，但在 maven 存储库中可用，例如

[http://search.maven.org/](http://search.maven.org/)

你可以使用 tycho 的 pomDependency=consider 开关：

[http://wiki.eclipse.org/Tycho/How_Tos/Dependency_on_pom-first_artifacts](http://wiki.eclipse.org/Tycho/How_Tos/Dependency_on_pom-first_artifacts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:05:10.890

根据您的问题，第三方依赖项已经是捆绑包。这很好——剩下要做的就是为包生成 p2 元数据。

这可以通过[Features and Bundles Publisher 应用程序](http://wiki.eclipse.org/Equinox/p2/Publisher#Features_And_Bundles_Publisher_Application)轻松完成。结果是一个 p2 存储库。显然，您不希望所有开发人员都必须在本地执行此操作才能运行 Tycho 构建，因此您应该将发布者应用程序的结果放到 Web 服务器上。然后，通过项目目标文件中的 http URL 引用包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-25T06:29:04.767

这是一个实际示例：[https ://github.com/skosmalla/generate-p2-repository-from-maven-artifacts](https://github.com/skosmalla/generate-p2-repository-from-maven-artifacts)

# asp-classic - 将日期更新为空值 SQL

> ID：13268215
> 
> 赞同：1
> 
> 时间：2012-11-07T10:54:34.007
> 
> 标签：asp-classic

我有一个这样的重置按钮：

```
<% If Request("Reset") = "Reset" Then
Dim cn
Dim strSQLCommand
Set cn = Server.CreateObject("ADODB.Connection")
cn.Open MM_DD_DB_STRING
For Each variableName in Request.Form
    If Instr(variableName, "selected") = "1" Then
        Dim prodCode
        prodCode = Split(variableName, "selected_")(1)

        strSQLCommand = "UPDATE DB.STOCK SET DUE_DATE= NULL WHERE ID=x'" & prodCode & "'"

        cn.Execute strSQLCommand

    End If
Next
cn.Close
Set cn = Nothing
     End if 

     %> 
```

如果我单击重置，我希望仅重置 DUE_DATE 或者更确切地说 = NULL 现在，当我选择一个复选框并单击重置按钮时，它不会使 DUE_DATE 字段为空。但我使用了这段代码：`UPDATE DB.STOCK SET DUE_DATE= NULL`我做错了吗？

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:49:48.447

正如 SearchAndResQ 在他对您的问题的评论中所建议的那样：在执行调用之前做一个快速的 response.write，看看查询是否正确。如果看起来不错，请直接快速检查数据库，检查它是否接受它。

最后检查您的 .asp 站点是否没有错误。我怀疑这一点，因为您正在`dim prodCode`for 循环中定义变量 ( )，如果循环重复 2 次或更多次，这将导致页面出错。将此行移到 for 循环之外。

# c# - 在同一个地方用新的表单域替换现有的 pdf 表单域

> ID：13268218
> 
> 赞同：0
> 
> 时间：2012-11-07T10:54:45.237
> 
> 标签：c#, java, asp.net, pdf, itextsharp

我需要使用 ItextSharp 将现有 pdf 中的复选框替换为新复选框。

在阅读 Pdf 时，我如何知道我正在阅读的表单字段的位置。

矩形尺寸和页面信息（如果我现在正在阅读的表单域在第 6 页）。

正是我想知道的是如何在阅读时知道现有的表单域位置？任何人都可以提供一些有关查找位置和页面的示例代码。

为什么我要尝试替换现有的 pdf？你可以在这里找到原因..

[无法在 pdf 中打印复选框](https://stackoverflow.com/questions/13265592/unable-to-print-check-boxes-in-pdf)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:53:34.303

拥有 PdfReader 后，您可以轻松访问包含所有字段坐标的阅读器的 AcroFields：

```
PdfReader pdfReader = new PdfReader(inputFilename);
AcroFields acroFields = pdfReader.AcroFields;
IList<FieldPosition> positions = acroFields.GetFieldPositions(fieldName); 
```

您会得到一个 FieldPosition 元素的列表（每个元素都包含一个页码和一个矩形），因为 PDF 表单域可能有多个可视化。在您的情况下，列表很可能只包含一个元素。

不过，GetFieldPositions 的方法文档有点过时了。;)

# android - 如何在不使用 DatePickerDialog 的情况下使用 OnDateChangedListener、OnDateSetListener？

> ID：13268228
> 
> 赞同：6
> 
> 时间：2012-11-07T10:55:14.540
> 
> 标签：android, datepicker, datepickerdialog

一旦用户开始更改它，我希望能够检测到日期选择器上的更改。但是，我不想使用 datrpickerdialog。有谁知道为什么当我更改 datepicker 上的日期时 onDateSet(DatePicker arg0, int arg1, int arg2, int arg3) 不会触发？

我非常感谢您对此发表任何评论。干杯

这是我的代码的简化版本：

```
public class AddItem extends Activity  implements OnDateChangedListener,OnDateSetListener{

DatePicker start ;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.entryelements);
    start = (DatePicker) findViewById(R.id.start);

@Override
public void onDateChanged(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {

    // TODO Auto-generated method stub
    Toast.makeText(getApplicationContext(),
            " thiv view"+year,
            Toast.LENGTH_LONG).show();
    Log.v("indatechange", "ok");

}

@Override
public void onDateSet(DatePicker arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub
    Toast.makeText(getApplicationContext(),
            " thiv view"+arg0,
            Toast.LENGTH_LONG).show();
    Log.v("indatechange", "ok");
} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:55:47.250

您需要告诉 DatePicker 您的 OnDateChangedListener。与常规小部件不同，DatePicker 没有~~`setOnDateChangedListener()`~~……但它确实有[`init()`](http://developer.android.com/reference/android/widget/DatePicker.html#init%28int,%20int,%20int,%20android.widget.DatePicker.OnDateChangedListener%29). 用于`init()`设置默认日期和一起声明监听器：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.entryelements);

    // Set the date to now
    Calendar calendar = Calendar.getInstance();
    start = (DatePicker) findViewById(R.id.start);
    start.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T08:25:56.610

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.entryelements);
start = (DatePicker) findViewById(R.id.start);

expirationDate=(EditText) findViewById(R.id.expirationDate);
Calendar calendar = Calendar.getInstance();
start = (DatePicker) findViewById(R.id.start);
MyOnDateChangeListener onDateChangeListener = new MyOnDateChangeListener();
start.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), onDateChangeListener);
}

public class MyOnDateChangeListener implements OnDateChangedListener {
    @Override
    public void onDateChanged(DatePicker view, int year, int month, int day) {
        int mon=month+1;
        expirationDate.setText(day+"/"+mon+"/"+year);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T02:53:13.963

如果您想主动了解交互，则需要在 DatePicker 上调用[init(year, month, day, onDateChangedListener)方法进行设置。](https://developer.android.com/reference/android/widget/DatePicker.html#init%28int,%20int,%20int,%20android.widget.DatePicker.OnDateChangedListener%29)

假设你想初始化它以显示一个特定的开始日期，调用它而不是它的 updateDate 方法是有意义的（这是你在做什么？或者你不关心起始值是什么？）

请注意，它不像 DatePickerDialog 那样支持 OnDateSetListener，因为这意味着 UI 可以通过某种方式知道用户何时完成与选取器的交互。因为它不是对话，所以当你认为它们完成时，你必须自己决定。只需跟踪 OnDateChangedListener，它就会有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T05:16:45.223

```
DatePicker dpEndDate,dpStartDate;
dpStartDate=(DatePicker)findViewById(R.id.dpStartDate);
dpEndDate=(DatePicker)findViewById(R.id.dpEndDate);
  Calendar today = Calendar.getInstance();
        dpStartDate.init(today.get(Calendar.YEAR),
                today.get(Calendar.MONTH),
                today.get(Calendar.DAY_OF_MONTH),
                new DatePicker.OnDateChangedListener() {
                    @Override
                    public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
                        SmartUtils.ting(MicaAttendanceFilter.this,"Start Date Changes");
                        try {
                            SimpleDateFormat simpleDateFormat=new SimpleDateFormat("dd M yyyy");
                            Calendar startCalendar = Calendar.getInstance();
                            int startDay=dpStartDate.getDayOfMonth();
                            int startMonth=dpStartDate.getMonth()+1;
                            int startYear=dpStartDate.getYear();
                            String startDate = startDay+" "+startMonth+" "+startYear;
                            startCalendar.setTime(simpleDateFormat.parse(startDate));
                            dpEndDate.setMinDate(startCalendar.getTimeInMillis());
                        } catch (ParseException e) {
                            e.printStackTrace();
                        }
                    }
                }
        ); 
```

# php - Opencart：产品名称打印多次，如何修复。？

> ID：13268233
> 
> 赞同：1
> 
> 时间：2012-11-07T10:55:25.960
> 
> 标签：php, mysql, sql, opencart

我为我的订单报告列表添加了以下 Opencart 模块... [http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3597&filter_search=order%20list%20filter%20model&page=4](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3597&filter_search=order%20list%20filter%20model&page=4)

我对“产品”列有疑问。如果有多个选项，产品名称会打印多次。因此，如果我得到一个具有三个选项的产品，则产品名称会打印 3 次。有没有办法解决这个问题？

我只想打印一次产品名称和型号，知道吗？

**我将附上我现在得到的结果...** ![在此处输入图像描述](../Images/6ece761cba621f8df591b63d67b8812d.png)

**这是我的 sql 查询...**

```
public function getOrders($data = array()) { 
$sql = "select o.order_id,o.email,o.telephone,CONCAT(o.shipping_address_1, ' ', o.shipping_address_2) AS address,CONCAT(o.firstname, ' ', o.lastname) AS customer,o.payment_zone AS state,o.payment_address_2 AS block, o.payment_address_1 AS address,o.payment_postcode AS postcode,(SELECT os.name FROM " . DB_PREFIX . "order_status os WHERE os.order_status_id = o.order_status_id AND os.language_id = '" . (int)$this->config->get('config_language_id') . "') AS  status,o.payment_city AS city,GROUP_CONCAT(pd.name) AS pdtname,GROUP_CONCAT(op.model) AS model,o.date_added,sum(op.quantity) AS quantity,GROUP_CONCAT(opt.value ) AS options, GROUP_CONCAT(opt.order_product_id )  AS ordprdid,GROUP_CONCAT(op.order_product_id )  AS optprdid, GROUP_CONCAT(op.quantity) AS opquantity from `" . DB_PREFIX . "order` o LEFT JOIN " . DB_PREFIX . "order_product op ON (op.order_id = o.order_id)  LEFT JOIN " . DB_PREFIX . "product_description pd ON (pd.product_id = op.product_id and pd.language_id = '" . (int)$this->config->get('config_language_id') . "') LEFT JOIN " . DB_PREFIX . "order_option opt ON (opt.order_product_id = op.order_product_id) "; 
```

产品名称 =`GROUP_CONCAT(pd.name) AS pdtname,`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:58:11.913

添加`DISTINCT`

```
GROUP_CONCAT(DISTINCT pd.name) 
```

# asp.net-mvc - 从 ApiController 返回 JSON 流

> ID：13268237
> 
> 赞同：3
> 
> 时间：2012-11-07T10:55:35.433
> 
> 标签：asp.net-mvc, vb.net, json, streaming, json.net

我有一个需要从 MVC ApiController 返回的*大型JSON 对象。*

我不能简单地将 JSON 对象作为内部序列化程序返回，因为序列化内容太长。

我不想序列化为字符串然后返回字符串，因为我们可能要处理 5-6MB 的数据，这似乎是无缘无故地浪费内存。

我想要做的是使用 Newtonsoft JSON Serializer 直接写入响应流。

```
Dim Ret = Client.Search(Model) ''Get the results object
Dim Response As New HttpResponseMessage()
Using MemoryStream As New IO.MemoryStream
    Using StreamWriter As New StreamWriter(MemoryStream)
        Using JsonWriter As JsonWriter = New JsonTextWriter(StreamWriter)
            Dim Serializer As New JsonSerializer
            Serializer.Serialize(JsonWriter, Ret)
        End Using
    End Using
    Response.Content = New StreamContent(MemoryStream)
    Return Response
End Using 
```

不幸的是，这会导致连接被意外重置——我猜这是由于流在完成发送结果之前被处理掉了？

即使我去掉所有的`Using`块并把所有的东西都留给 GC，如下所示：

```
Dim Ret = Client.Search(Model)
Dim Response As New HttpResponseMessage()
Dim MemoryStream As New IO.MemoryStream
Dim StreamWriter As New StreamWriter(MemoryStream)
Dim JsonWriter As JsonWriter = New JsonTextWriter(StreamWriter)
Dim Serializer As New JsonSerializer
Serializer.Serialize(JsonWriter, Ret)
Response.Content = New StreamContent(MemoryStream)
Return Response 
```

我得到一个 0 字节的响应。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:33:05.433

您是否尝试过检查 web.config/machine.config 中的超时设置？也许 IIS 认为获取 Response.Content 花费的时间太长。

[无论如何，您应该使用Failed Requests Using Tracing](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing/troubleshooting-failed-requests-using-tracing-in-iis)来检查这个问题- 这应该会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T04:18:24.000

事实证明这是我的一个愚蠢的错误......我没有刷新作家并重置流位置......

```
JsonWriter.Flush()
MemoryStream.Seek(0, StreamPosition.Beginning) 
```

解决了问题

# php - 搜索并从结果中删除？

> ID：13268239
> 
> 赞同：0
> 
> 时间：2012-11-07T10:55:36.653
> 
> 标签：php

我得到了这个结果，我想从文件夹中提取第一张图像 clear just the first

结果示例

```
http://i.i.com.com/cnwk.1d/i/tim/2012/07/12/Les_Horribles_Cernettes_in_1992_620x350.jpg
http://i.i.com.com/cnwk.1d/i/tim/2012/07/03/IBM-350-publicdomain_220x157.jpg
http://cbsdigitalmedia.112.2o7.net/b/ss/cbscbsnewscomatlantisuat/1/H.21--NS.png
http://dw.com.com/clear/c.gif
http://i.i.com.com/cnwk.1d/i/tim/2012/07/03/IBM-350-publicdomain_220x157.jpg
http://dw.com.com/clear/test2.gif
http://cbsdigitalmedia.112.2o7.net/b/ss/cbscbsnewscomatlantisuat/1/H.21--NS.png
http://dw.com.com/clear/test.gif 
```

我要的图

```
http://dw.com.com/clear/c.gif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:33:52.353

好的，所以我实际上对你的问题很感兴趣.. 所以我想出了一些东西......

```
$firstFile;

//This is the array with your URL values
$imgUrls[0] = "http://i.i.com.com/cnwk.1d/i/tim/2012/07/12/Les_Horribles_Cernettes_in_1992_620x350.jpg";
$imgUrls[1] = "http://i.i.com.com/cnwk.1d/i/tim/2012/07/03/IBM-350-publicdomain_220x157.jpg";
$imgUrls[2] = "http://cbsdigitalmedia.112.2o7.net/b/ss/cbscbsnewscomatlantisuat/1/H.21--NS.png";
$imgUrls[3] = "http://dw.com.com/clear/c.gif";
$imgUrls[4] = "http://i.i.com.com/cnwk.1d/i/tim/2012/07/03/IBM-350-publicdomain_220x157.jpg";
$imgUrls[5] = "http://dw.com.com/clear/test2.gif";
$imgUrls[6] = "http://cbsdigitalmedia.112.2o7.net/b/ss/cbscbsnewscomatlantisuat/1/H.21--NS.png";
$imgUrls[7] = "http://dw.com.com/clear/test.gif";

//This foreach loop goes through the array and checks the containing directory
foreach($imgUrls as $value){
    $urlParts = explode("/",$value);
    if($urlParts[count($urlParts)-2] == "clear"){
        $firstFile = $value;
        break;
    }
}

//After setting $firstFile as the Image URL, echo it out.
echo $firstFile; 
```

# ruby - 永无止境的正则表达式：匹配 69 个字符的字符串时，正则表达式无法终止（一周后被杀死）

> ID：13268240
> 
> 赞同：2
> 
> 时间：2012-11-07T10:55:38.073
> 
> 标签：ruby, regex, scala

从来没有想过有可能编写一个永远不会返回的正则表达式。

正则表达式

```
/^((?:\d|\w{1,2}[-\d\s])(?:[-\s\d]|\w{1,2}[-\d\s])*\d)$/ 
```

旨在匹配以数字或两个字母开头的数字，后跟破折号、空白或数字并以数字结尾。在开始模式之间可能会重复，或者可能会出现空格或破折号。

示例：1234、de-12943、EN - 12de -50

以下示例代码不会终止：

红宝石

```
#!/usr/bin/ruby
string = "101000000750000000000000000000000001000038127OXMOO0OOOOO00000000000N9"
re = /^((?:\d|\w{1,2}[-\d\s])(?:[-\s\d]|\w{1,2}[-\d\s])*\d)$/
p re.match("101000000750000000000000000000000001000038127OXMOO0OOOOO00000000000N9") 
```

斯卡拉

```
"""^((?:\d|\w{1,2}[-\d\s])(?:[-\s\d]|\w{1,2}[-\d\s])*\d)$""".r findFirstIn "101000000750000000000000000000000001000038127OXMOO0OOOOO00000000000N9" 
```

删除锚 (^, $) 可以让正则表达式快速终止。

尝试使用 Ruby 和 Scala。

那里发生了什么？锚不应该导致更快的终止吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T11:08:20.597

首先，`\w`不是字母，而是`[a-zA-Z0-9_]`。所以，如果你真的只是想要那里的字母，那就去做吧`[a-zA-Z]`。

其次，我想你可能会遇到[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)的情况。

您的正则表达式显然不会过去`OXM`，因为无法匹配您的模式中的三个连续字母。如果您移除`$`锚点，正则表达式将很乐意在那里匹配，但是当您离开它时，正则表达式将失败并开始回溯。

所以假设它与`OX`with匹配`\w{1,2}`并且失败了。然后它会丢弃整个第二个非捕获组的最后一个重复并返回一步，它与`7`with匹配`[-\s\d]`。现在它将尝试匹配or `7O`，`7`但`\w{1,2}`随后又无法分别匹配or 。再退一步，它尝试重新匹配或再次失败。等等等等。往回走得越远，有可能再次匹配到一个字母，然后引擎将一路前进到`[-\d\s]``X``O``27``2``\w{1,2}``[-\d\s]``OXM`再次开始乐趣。当回溯最终到达字符串的开头和您的第一个交替时，它也会尝试该交替的所有三个选项，并且会一遍又一遍地做整个事情。

让我试着通过写出在重复中使用了哪些交替来想象回溯的第一步。每两行中的第一行是测试字符串，第二行包含使用的相应正则表达式结构。每次尝试都在最后一个字符处失败。

```
... 1       2       7       O
... [-\s\d] [-\s\d] [-\s\d] [-\s\d] 

... 1       2       7       OX    M
... [-\s\d] [-\s\d] [-\s\d] \w{2} [-\d\s]

... 1       2       7       O     X
... [-\s\d] [-\s\d] [-\s\d] \w{1} [-\d\s]

... 1       2       7O    X
... [-\s\d] [-\s\d] \w{2} [-\d\s]

... 1       2       7     O
... [-\s\d] [-\s\d] \w{1} [-\d\s]

... 1       27    O      
... [-\s\d] \w{2} [-\d\s]

... 1       2     7       O
... [-\s\d] \w{1} [-\d\s] [-\s\d]

... 1       2     7       OX    M
... [-\s\d] \w{1} [-\s\d] \w{2} [-\d\s]

... 1       2     7O    X
... [-\s\d] \w{1} \w{2} [-\d\s] 
```

等等。我希望你能明白。用几行 ASCII 码很难将其可视化。

我想，只是更改`\w`为适当的字符组可能已经解决了问题，因为等效组合较少。试试看。

# sql - SQL Server 中 SELECT 查询中的随机函数行为

> ID：13268241
> 
> 赞同：1
> 
> 时间：2012-11-07T10:55:38.247
> 
> 标签：sql, sql-server

我写了一个随机函数`dbo.UDF_Q_RandomNumber()`，它生成一个介于 0 和 1 之间的浮点型随机数。

```
DECLARE @upper = 10    
DECLARE @lower = 1    

SELECT  
    ROUND(CAST((@lower + (@upper - @lower) * dbo.UDF_Q_RandomNumber()) AS INT), 0) 
```

上面的代码生成一个介于 1 到 10 之间的随机数。

现在我创建了一个`#tempTable`包含 10 行的临时表，其中包含列`Id`和`Number`.

```
Id  Number
1   1
2   2
3   3
4   4
5   5
6   6
7   7
8   8
9   9
10  10 
```

SQL查询：

```
CREATE TABLE #tempTable(Id INT, Number INT)

INSERT INTO #tempTable VALUES (1,1)
INSERT INTO #tempTable VALUES (2,2)
INSERT INTO #tempTable VALUES (3,3)
INSERT INTO #tempTable VALUES (4,4)
INSERT INTO #tempTable VALUES (5,5)
INSERT INTO #tempTable VALUES (6,6)
INSERT INTO #tempTable VALUES (7,7)
INSERT INTO #tempTable VALUES (8,8)
INSERT INTO #tempTable VALUES (9,9)
INSERT INTO #tempTable VALUES (10,10)

DECLARE @maxCount INT;

SELECT @maxCount=  COUNT(1) FROM #tempTable

SELECT * FROM #tempTable

SELECT Number 
FROM #tempTable 
WHERE Id = ROUND(CAST((1+(@maxCount-1)*dbo.UDF_Q_RandomNumber())AS INT),0)
DROP TABLE #tempTable 
```

这里是查询

```
SELECT Number 
FROM #tempTable 
WHERE Id = ROUND(CAST((1+(@maxCount-1)*dbo.UDF_Q_RandomNumber()) AS INT), 0) 
```

有时它返回 2 行，有时返回 null 不应该出现，因为选择的 Id 介于 1 和 10 之间（临时表中的行），并且每个 Id 也有值。

请帮忙 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:04:56.927

没有看到函数，很难说，但我怀疑你的函数是不确定的，所以它被解释为表的每一行。

如果你使用`rand()`它只返回一行

```
 SELECT Number FROM #tempTable WHERE Id= ROUND(CAST((1+(@maxCount-1)*rand())AS INT),0) 
```

或者，如果您只想要随机`@n`行...

```
 select top (@n) * from #tempTable order by newid() 
```

# asp.net - 重定向时数据库连接会自动关闭吗？

> ID：13268243
> 
> 赞同：2
> 
> 时间：2012-11-07T10:55:49.143
> 
> 标签：asp.net, database-connection

我在 ASP.NET 中做一个项目。

我想知道在 Web 应用程序中从一个页面跳转到另一个页面时连接是否会自动关闭。

还是会显示错误`MAX POOL SIZE WAS REACHED`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T10:59:49.773

数据库连接是服务器端的事情，与“从一个页面跳转到另一个页面”几乎没有关系——服务器只看到请求。

现在：如果您在请求期间打开连接，那么您*也*必须关闭它；否则，它只会被垃圾收集器关闭。在很多情况下，关闭一个连接*实际上*意味着“将*底层*连接释放到池中”。

所以：如果您看到“MAX POOL SIZE WAS REACHED”，那么您确实很有可能未能关闭您的连接。但是，这并没有真正映射到“从页面跳转到另一个页面”。只是：没有正确清理自己的请求。

确保执行此操作的最简单方法是通过`using`语句，但这在一定程度上取决于您的情况。

# c# - 值不在预期范围内，IsolatedStorage

> ID：13268246
> 
> 赞同：0
> 
> 时间：2012-11-07T10:55:54.960
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, isolatedstorage

我有一个我编写的类，可以将任何对象保存并检索到 Windows Phone 隔离存储系统。看一看...

```
public class DataCache
{
    // Method to store an object to phone ************************************
    public void StoreToPhone(string key, Object objectToStore)
    {
        var settings = IsolatedStorageSettings.ApplicationSettings;

        try
        {
            if (existsInStorage(key))
            {
                settings.Remove(key);
                settings.Add(key, objectToStore);
            }
            else
            {
                settings.Add(key, objectToStore);
            }
        }
        catch (Exception e)
        {
            MessageBox.Show("An error occured while trying to cache data: " + e.Message);
        }
    }

    // Method to retrieve an object ******************************************
    public Object retrieveFromPhone(string key)
    {            
        var settings = IsolatedStorageSettings.ApplicationSettings;            
        Object retrievedObject = null;

        try
        {
            if (existsInStorage(key))
            {
                settings.TryGetValue<Object>(key, out retrievedObject);
            }
            else
            {
                MessageBox.Show(string.Format("Cannot find key {0} in isolated storage", key));
            }
        }
        catch(Exception e)
        {
            MessageBox.Show("An error occured while trying to retrieve cache object: "+e.Message);
        }
        return retrievedObject;
    }

    // Helper method to check if there is space on the phone to cache the data
    private bool IsSpaceAvailable(long spaceReq)
    {
        using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
        {
            long spaceAvail = store.AvailableFreeSpace;
            if (spaceReq > spaceAvail)
            {
                return false;
            }
            return true;
        }
    }

    // Method to check if key exists in isolated storage *********************
    public bool existsInStorage(string key)
    {
        var settings = IsolatedStorageSettings.ApplicationSettings;
        bool objectExistsInStorage = settings.Contains(key);
        return objectExistsInStorage;
    }
} 
```

当我运行我的应用程序并尝试使用我的 StoreToPhone() 方法存储一些数据时，我收到以下错误：

> 尝试缓存数据时出错：值不在预期范围内

我不完全知道这意味着什么。它不期待这种类型的对象吗？我不确定......我正在传递一个我写的自定义类，仅供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:33:29.643

之前我也遇到过同样的问题。

似乎错误说“存储中可能存在重复值”。所以我在“添加”之前使用了“删除”，然后我发现并没有保存所有内容，所以我在“添加”之后使用了“保存”功能。

它对我有用...

```
IsolatedStorageSettings appSettings = IsolatedStorageSettings.ApplicationSettings;
  appSettings.Remove("name");
  appSettings.Add("name", "James Carter");
  appSettings.Save();
  tbResults.Text = (string)appSettings["name"]; 
```

# java - Calendar 和 DateFormat 的奇怪行为

> ID：13268248
> 
> 赞同：0
> 
> 时间：2012-11-07T10:56:00.427
> 
> 标签：java, date, formatting

在构建 Calendar 对象然后以特定样式对其进行格式化时，我遇到了非常奇怪的行为。

让代码说话：

```
public class Test 
{
    public static void main(String[] args) 
    {
        SimpleDateFormat frmt = new SimpleDateFormat();
        frmt.applyPattern("yyyy-MM-dd");
        GregorianCalendar date = new GregorianCalendar(2012,1,1);
        System.out.println(frmt.format(date.getTime()));
    }
} 
```

输出是：

```
2012-02-01 
```

预期的输出当然是：

```
2012-01-01 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T10:57:00.017

月份从 0 开始，`new GregorianCalendar(2012,1,1);`2 月 1 日也是如此。对于 1 月 1 日，您将使用

```
new GregorianCalendar(2012,0,1);
// or even better 
new GregorianCalendar(2012,Calendar.JANUARY,1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T10:57:31.420

月份以 0 开头`GregorianCalendar`。

```
public static final int JANUARY = 0; 
```

它在 Clanedar 类中声明。2 月是 1。所以更新代码 -

```
GregorianCalendar date = new GregorianCalendar(2012,Calendar.JANUARY,1); 
```

或者

```
GregorianCalendar date = new GregorianCalendar(2012,0,1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T10:57:29.827

月份是从 0 开始的。一月 == 0。来自`Calendar#MONTH`javadoc：

> get 和 set 的字段编号，指示月份。这是特定于日历的值。一年中的第一个月是 JANUARY，即 0；最后一个取决于一年中的月数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T10:58:40.463

如果您不想要索引为 0 的月份，请尝试[Joda 时间](http://joda-time.sourceforge.net/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:00:33.087

这是[记录在案的行为](http://docs.oracle.com/javase/7/docs/api/java/util/GregorianCalendar.html#GregorianCalendar%28int,%20int,%20int%29)：

> month - 用于在日历中设置 MONTH 日历字段的值。月份值从 0 开始。例如，0 表示一月。

建议在 Calendar 中使用常量，例如`[Calendar.JANUARY][2]`在使用此构造函数时。

# c# - 如何将此json数组转换为列表

> ID：13268249
> 
> 赞同：0
> 
> 时间：2012-11-07T10:55:59.407
> 
> 标签：c#, asp.net, web-services, bytearray, arrays

我的 json 数组：

```
 {"lstResult":[{"food_photo":[255,216,255,224,0,16,74,70,73,70,0,1........3,5],"food":"12","qty_uom":"Pcs","unit":null}]} 
```

我的 C# 类：

```
 public class lstresult
    {
    public photo[] lstResult{get;set;}
    }

public class photo
{
public byte[] food_photo{get;set;}
}
public class Food
{
    public photo[] food_photo { get; set; }
    public int food_qty { get; set; }
    public string qty_uom { get; set; }
    public string unitcost { get; set; }
} 
```

我的问题：

> 我的 json 字符串包含一个“food_photo”键如何将此字节数组转换为图像？或转换为asp.net中的列表提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:23:57.893

```
public class LstFooddtlResult
{
    public List<int> food_photo { get; set; }
    public string food { get; set; }
    public string qty_uom { get; set; }
    public string unitcost { get; set; }
}

public class RootObject
{
    public List<LstFooddtlResult> lstResult { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:05:14.863

使用[Javascript 序列化器](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

这是一些关于使用 Javascript Serializer 的示例代码

```
string json = "[{Name:'John Simith',Age:35},{Name:'Pablo Perez',Age:34}]"; 

public class Person
{
   public int Age {get;set;}
   public string Name {get;set;}
}

JavaScriptSerializer js = new JavaScriptSerializer();
Person [] persons =  js.Deserialize<Person[]>(json); 
```

# c# - 如何将事件提升到多个级别？

> ID：13268251
> 
> 赞同：1
> 
> 时间：2012-11-07T10:56:05.553
> 
> 标签：c#, .net, delegates, event-handling, event-bubbling

我正在努力正确地冒泡一个事件。

我有一个带有用户控件的母版页，以及一个作为母版页子页的页面。

用户控件和页面共享公共数据，因此当用户控件更新时，它会更新页面，反之亦然。

用户控件向母版页公开了一个事件。这是我使用的格式。

课外：

```
public delegate void OfferBookmarkRemoved(int OfferID); 
```

课内：

```
public event OfferBookmarkRemoved OfferBookmarkRemoved;

protected void LV_Bookmarks_ItemCommand(object source, ListViewCommandEventArgs e)
{
    if (e.CommandName == "RemoveOffer")
    {
        var offerId = (int)e.CommandArgument;

        OnOfferBookmarkRemoved(offerId);
    }

}

void OnOfferBookmarkRemoved(int offerId)
{
    offerId.ThrowDefault("offerId");

    if (OfferBookmarkRemoved != null)
    {
        OfferBookmarkRemoved(offerId);
    }
} 
```

现在这可以在母版页中使用了。我没有在母版页中做任何事情，并且想公开该事件以便 aspx 页面可以使用它，如下所示：

```
Master.OfferBookmarkRemoved += OnBookmarkRemoved;

void OnBookmarkRemoved(int offerId)
{
    offerId.ThrowDefault("offerId");

    OfferList1.UpdateBookmark(offerId);
} 
```

所以缺少的一点是监听主控中的事件并使其可用于页面。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:01:56.323

您还需要在母版页中定义此事件，如下所示：

```
public event EventHandler<OfferEventArgs> OfferBookmarkRemoved
{
   add
   {
       userControl.OfferBookmarkRemoved += value;
   }
   remove
   {
       userControl.OfferBookmarkRemoved -= value;
   }
} 
```

这样，注册到主事件的任何页面都将注册到用户控件事件。

顺便说一句，您没有遵循事件模式。您的活动应如下所示：

```
public class OfferEventArgs : EventArgs
{
   public int OfferID { get; set; }
}

public event EventHandler<OfferEventArgs> OfferBookmarkRemoved; 
```

并在调用时：

```
OfferBookmarkRemoved(new OfferEventArgs() { OfferID = offerId }); 
```

# iphone - 在 Cocos 3d 中加载 3d 对象动态

> ID：13268262
> 
> 赞同：1
> 
> 时间：2012-11-07T10:56:24.317
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, cocos3d

我是 iOS 的开发人员，但是 Cocos 中的新蜜蜂，我正在构建一个增强现实应用程序，我想在运行时加载 3d 对象并在检测到特定标记时显示它们。但是我的以下问题是关于 Cocoas 的，并且与我自己的任务有关，如果我问了一些愚蠢的问题，请原谅我。

1.  我可以在 Cocos 3d 的运行时加载 3d 对象吗？
2.  这是否有可能我可以通过调用 web 服务从我的服务器获取这些 3d 对象，因为这些对象可以是 .fbx 格式，所以可可理解这种类型还是我应该使用其他东西。
3.  可可是否支持objective-c，因为我只有objective-c的知识。
4.  我在 iOS 中开发的应用程序的第一部分将很容易集成，因为我想在 Unity 中完成这项任务，但集成太忙了所以我决定移动任何其他的，我得到了使用 Cocos 3d 的建议。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:13:29.910

1.  是的
2.  从服务器下载：是的。您可以使用 NSData (dataFromURL) 下载文件。但是上次我检查（4个月前左右）cocos3d只支持POD文件格式。
3.  是的，Cocos3d 是用 Objective-C 编写的（你还没下载代码吗？）。
4.  容易是相对的。对于专业人士来说可能非常容易，而对于初学者来说几乎是不可能的。很难在不了解您、您的项目、您的要求、您的目标的情况下说出来。

# windows-phone-7 - WP7 TextBox 自动加点

> ID：13268269
> 
> 赞同：0
> 
> 时间：2012-11-07T10:56:43.383
> 
> 标签：windows-phone-7, textbox

我有一个非常简单的带有一个 TextBox 的 Windows Phone 应用程序。当我输入一些文本，然后按两次空格键时，WP7 会自动添加一个点。

我不想要那个点。如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:03:40.923

按两次“空格”时添加一个点是 WP7 键盘的一项功能。用户可以从电话设置中禁用它。

由于它是全局设置，因此您无法更改它。最好的办法是禁止用户完全输入点（按两次空格和按点键时）。如果您想这样做，只需订阅您的 TextBox 的 TextChanged 事件，然后删除这些点。

# javascript - 开发大型 Web 应用程序所需的建议

> ID：13268270
> 
> 赞同：-2
> 
> 时间：2012-11-07T10:56:44.647
> 
> 标签：javascript, php, mysql, mongodb, database

我得到了为一家私人巴士运输公司制作大型 Web 应用程序的合同。在我详细说明问题之前，这里有几件事：

它是一个完整的基于 Web 的应用程序，可用于：

*   管理车辆、路线、巴士站
*   使用 GPS 和计算的当前位置。
*   打印门票
*   网上购买
*   会员资格
*   全面的账户管理（即收入、支出、图形报告等）
*   一个同时工作的网站，允许预订/取消门票和实时聊天。

尽管如此，我的问题是构建应用程序的合适环境和工具是什么？

1.  Programming Lingo：（我的选择，基于 MVC 的 JavaScript 框架，在后面用 PHP 提供数据和视图）给我你的建议。
2.  数据库：这是我最困惑的地方。我应该使用mysql吗？或者像mongoDB这样的OOP？
3.  其他工具：还有哪些其他工具可以帮助我？请建议。

而且，我必须一个人做这件事。雇用人员/外包/团队合作不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:18:39.090

如果您希望有任何准时交付的机会，请让一切尽可能简单。

如果您以前使用过 MySQL 或类似的东西，请使用它，因为如此大的项目可能不是学习新事物的好地方，尤其是在时间紧迫的情况下。

如果您以前使用过 MVC 框架，请再次使用它，因为您不想花几天时间为如此大的项目学习新的框架，除非您确定有切实的好处。

一旦你选择了一个框架，你就可以寻找可以帮助你的工具。例如，如果您选择了 java 框架 Tapestry，您可以使用 Eclipse IDE 来帮助您高效地编程。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:22:55.393

**编程**——如果你想要基于 PHP 的 MVC，我建议去 CodeIgniter。它简单易学。我之前用过，感觉还不错。

**数据库**：如果没有特别需要使用基于 NOSQL 的数据库，请使用 MySQL。

首先创建一个数据模型，然后创建 API 来读写它们。将所有这些集成到一个网站中。

如果一个人必须独自完成这一切，这将是一项非常艰巨的工作。一种选择可能是探索各种组件的工具和框架，并将它们集成到您的站点中。例如用于聊天的 openfire，用于会计和报告的开源网络软件。

# android - 为什么 ArrayAdapter 类中的 getView 执行两次？

> ID：13268278
> 
> 赞同：1
> 
> 时间：2012-11-07T10:57:14.160
> 
> 标签：android, view, android-arrayadapter

我有一个应用程序，护理人员可以使用该应用程序来获取特定日期的名单。用户在日期选择器中设置日期。此日期将传递给名为 NfcScannerActivity 的活动。此活动使用该日期调用 Web 服务以获取列表。轮换数据是一个数组。NfcScannerActivity 将此数组传递给 GetRota，GetRota 是一个具有数组适配器的活动，该适配器用于显示轮播数据。

所有这一切都很好，直到在 GetRota 的 getView 方法中我检查是否没有特定日期的数据。在这一点上，我向用户敬酒，说明这一事实，然后用另一个日期（希望是一个有效的日期）重新调用 NfcScannerActivity。如果没有数据，则 getView 方法似乎执行两次，因为用户被烤了两次。为什么是这样？

NfcScannerActivity 的片段：

```
if(intent.getAction().equalsIgnoreCase("NEXT_ROTA")){

            Log.e(TAG, "next rota action");
            String date = intent.getStringExtra("nextRota");

            getNextRota(date);
        } 

private void getNextRota(String stringExtra) {

    String[] params = new String[]{nfcscannerapplication.getCarerID(), stringExtra}; 
    AsyncGetRota agr = new AsyncGetRota();
    agr.execute(params);

    }

//////////snippet of async result of webservice call
...........
..........
 @Override
        protected void onPostExecute(Void result)
        {
            super.onPostExecute(result);
            if(progressDialog != null)
            progressDialog.dismiss();

           if(isRotaArrayNull == false){

            Intent intent = new Intent(NfcscannerActivity.this,
                            GetRota.class);
             Bundle b = new Bundle();
             b.putSerializable("rotaArray", rotaArray);

             intent.putExtra("rotaArrayBundle", b);
             startActivity(intent);
        }else{...........
              ........... 
```

.

来自 GetRota 的片段，显示 rota 的活动

```
@Override
    protected void onNewIntent(Intent intent) {
        setIntent(intent);
        super.onNewIntent(intent);
    }

@Override
    protected void onResume(){
        super.onResume();

       Log.e(TAG, "global date in onresume getrota = " + nfcscannerapplication.getglobalDateTime());
         array = (ArrayList<String[]>)getIntent().getBundleExtra("rotaArrayBundle").get("rotaArray");
        Log.e(TAG, "array size in onresume = " + array.size());

..............
...............

/////////adapter class in getrota

private class MySimpleArrayAdapter extends ArrayAdapter<String> {
        private final Context context;
        private final ArrayList<?> list;

        public MySimpleArrayAdapter(Context context, ArrayList<?> list) {

            super(context, R.layout.rotarowlayout);
            Log.e(TAG, "inside adapter constructor");
            this.context = context;
            this.list = list;

        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View rowView = inflater.inflate(R.layout.rotarowlayout, parent,
                    false);

            TextView startTime = (TextView) rowView
                    .findViewById(R.id.rowstarttime);
            TextView duration = (TextView) rowView
                    .findViewById(R.id.rowduration);
            TextView status = (TextView) rowView.findViewById(R.id.rowstatus);
            TextView name = (TextView) rowView.findViewById(R.id.rowclientname);
            //ImageView imageView = (ImageView)rowView.findViewById(R.id.rowimagestatus);

            String record = list.get(position).toString();
            rowView.setTag(record);
            String[] itemsInRecord = record.split(",");
            Log.e(TAG, "itemin record = " + itemsInRecord.length);
            String[] recordItem = new String[itemsInRecord.length];

            for (int x = 0; x < itemsInRecord.length; x++) {

                recordItem[x] = itemsInRecord[x];

            }

            if(recordItem[9].toString().trim().equalsIgnoreCase("Out of range]")){

                Toast.makeText(GetRota.this, "No rota available", Toast.LENGTH_LONG).show();
                nfcscannerapplication.setGobalDateTime(new DateTime());
                //onBackPressed();

                DateTime globalDateTime = nfcscannerapplication.getglobalDateTime();
                DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
                String formattedglobalDateTime = fmt.print(globalDateTime);
                Intent i = new Intent(GetRota.this, NfcscannerActivity.class);
                i.putExtra("nextRota", formattedglobalDateTime);
                i.setAction("NEXT_ROTA"); 
                startActivity(i);

            }else if(recordItem[0].toString().trim().equalsIgnoreCase("[nodata")){

                Toast.makeText(GetRota.this, "You have no calls", Toast.LENGTH_LONG).show();
                Log.e(TAG, "you have no calls");

                nfcscannerapplication.setGobalDateTime(new DateTime());
                //onBackPressed();

                DateTime globalDateTime = nfcscannerapplication.getglobalDateTime();
                DateTimeFormatter fmt = DateTimeFormat.forPattern("d-MMM-Y");
                String formattedglobalDateTime = fmt.print(globalDateTime);
                Intent i = new Intent(GetRota.this, NfcscannerActivity.class);
                i.putExtra("nextRota", formattedglobalDateTime);
                i.setAction("NEXT_ROTA"); 
                startActivity(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:22:15.170

您无法控制**getView()**的调用。arrayadapter 充当数据和列表视图之间的桥梁。当列表视图加载、刷新或有一些滚动等时，列表视图会调用数组适配器的 get view 方法。因此，您无法控制何时调用**getView() 。**
此外，为列表的每个项目调用 getView()。因此，如果有两个项目 `recordItem[0] as no data`，则 toast 将出现两次。

**recorditem是从****ArrayList** : **list**的特定位置创建的数组。

```
recorditem=list.get(position).split(); 
```

所以 listview 的 row1 将保存一个 recorditem 数组， row2 将保存另一个 recorditem 数组。因此，如果两行的**recorditem[0]**都**没有 data**，则 Toast 将显示多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:30:45.130

这是因为 getView 是我们无法控制的。根据 Android 系统的决定，它被设计为持续刷新视图。

也许您可以将 toast 移动到代码中的其他位置。您可以检查 onResume 或 onActivityResult 中是否没有 rota。通常，您应该只关注 getView 方法中 ArrayList 中的特定项目。

# javascript - 使用 javascript 选择选项的多动作表单

> ID：13268279
> 
> 赞同：0
> 
> 时间：2012-11-07T10:57:17.617
> 
> 标签：javascript, select

```
<form id="check" action="." method="POST">
    <input id="act" type="hidden" name="action"/>
        <select id="blk">
            <option value="blk">Bulk Actions</option>
            <option value="tes">Active</option>
            <option>Inactive</option>
            <option>Delete</option>
        </select>
     <input type="submit" value="Submit" onclick="document.getElementById('act').value = 'document.getElementById('blk').selectedIndex.value'"/>
</form> 
```

我想通过选择标签获取值，并且值操作将在输入时更改，名称操作作为值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:05:11.463

你混合了两个概念。

*   该`select`元素具有`value`反映当前选择的属性

```
document.getElementById('blk').value 
```

*   该`select`元素有一个带有值的选项列表和一个`selectedIndex`反映当前选择位置的属性。像这样使用它：

```
var sel = document.getElementById('blk');
if (sel.selectedIndex >= 0) // could be -1 as well
    return sel.options[sel.selectedIndex].value 
```

但是，您实际上似乎想要的是

```
<form id="check" action="." method="POST">
    <select name="action">
         <option value="blk">Bulk Actions</option>
         <option value="tes">Active</option>
         <option>Inactive</option>
         <option>Delete</option>
    </select>
    <input type="submit" value="Submit" />
</form> 
```

您忘记了`name`您的`select`控制权，因此不会发布任何值。有了它，您既不需要隐藏输入，也不需要按钮上的单击侦听器（它也应该是`onsubmit`表单上的侦听器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:12:38.670

```
try this
<form id="check" action="." method="POST">
    <input id="act" type="hidden" name="action"/>
        <select id="blk" onchange="javascript:CallMe(this.value)">
            <option value="blk">Bulk Actions</option>
            <option value="tes">Active</option>
            <option>Inactive</option>
            <option>Delete</option>
        </select>
<input type="submit" value="Submit" onclick="document.getElementById('act').value = 'document.getElementById('blk').selectedIndex.value'"/>
</form>

<script>
function CallMe(String str)
{
alert(str+" : is the value selected , call the according action now");
}
</script> 
```

# ocean - ToggleWindow 中的多个视口

> ID：13268281
> 
> 赞同：0
> 
> 时间：2012-11-07T10:57:26.080
> 
> 标签：ocean

我有一个`2D`带有多个`Viewports`. 我现在如何`Viewport`激活哪个？有没有`API`我可以访问的地方`Viewports`？我还没有找到任何关于此的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:36:46.573

目前还没有可访问视口的 Ocean API。然而，Ocean 2012.1 中引入了一个新的 API，它可以扩展可用的视口，即将您的自定义切换窗口添加到 2D Plot 窗口。

# google-maps - gwt 和 google maps v3 api 哪个库

> ID：13268285
> 
> 赞同：2
> 
> 时间：2012-11-07T10:57:30.720
> 
> 标签：google-maps, gwt, google-maps-api-3

我正在 gwt 中构建一个应用程序，我想使用 google maps api V3，但我已经搜索并尝试了一些库，但找不到哪个更好。我的应用程序将在谷歌地图上有一些复杂的用途，如折线、路线等。

现在我有 3 个选项：

[http://code.google.com/p/gwt-google-apis/downloads/detail?name=gwt-maps-3.8.0-pre1.zip](http://code.google.com/p/gwt-google-apis/downloads/detail?name=gwt-maps-3.8.0-pre1.zip) 但已弃用。

这个： [https ://github.com/branflake2267/GWT-Maps-V3-Api](https://github.com/branflake2267/GWT-Maps-V3-Api)

最后我可以使用 JSNI 但我认为这不是正确的选择。

所以我需要帮助来选择上面的一个或我没有提到的其他库。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:49:35.263

由于第一个库处于早期开发阶段，我建议您使用第二个，说实话它非常好，我在迁移到 openlayers 之前就在使用它。

任何方式似乎它们都只是原始谷歌地图库的包装，所以我不认为将来从一个到另一个移动会很困难。

# c# - .net 中的事务使用 c#

> ID：13268287
> 
> 赞同：0
> 
> 时间：2012-11-07T10:57:30.603
> 
> 标签：c#, asp.net, .net, ado.net

> **可能重复：**
> [.net 中的交易](https://stackoverflow.com/questions/224689/transactions-in-net)

我只是想了解使用 c# 语言在 .net 中的事务。我在网上浏览了不同的文章。但是，我从理论上了解了交易，但我想实时了解它的确切用途。例如，我应该在什么时候实时使用事务。假设，我正在编写代码，我正在对链接的点击事件执行一些操作。可以说，我正在点击 SQL 连接以获取一些值。我应该在那里使用交易吗？如果我正在编写简单的代码，在不使用 sql 连接的情况下获取值，我应该在那里使用事务吗？使用 Transactions 的优缺点是什么。获得理论知识是不同的，但我想知道它的确切用途。什么时候用什么时候不用。可以在简单代码中使用事务吗？欢迎任何关于交易的基本内容的回复或链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:06:57.033

> 我正在点击 SQL 连接以获取一些值。我应该在那里使用交易吗？

不，当您不更改数据库中的数据时，不需要使用事务。

> 使用 Transactions 的优缺点是什么。

正如您所说，您已经学习了各种文章，所以您可能已经弄清楚使用交易的原因。关注数据库中的所有这些。

*三层应用程序在创建可扩展和健壮的应用程序方面的优势通过事务处理系统变得可行。能够在不同的服务器之间分发组成应用程序的组件，而无需明确地为该架构进行开发，这是事务服务器处理的另一个优势。事务处理系统还确保事务是原子的、一致的、隔离的和持久的。这使开发人员不必显式地支持这些特性。*

[为什么我们需要事务处理？](http://msdn.microsoft.com/en-us/library/ms953169.aspx)
[事务处理的优势](http://msdn.microsoft.com/en-us/library/aa480440.aspx)  

> 可以在简单代码中使用事务吗？

是的，您可以使用 ADO.Net 在 C# 中简单地编写代码。（例如 SQLTransaction 类）

例如

```
SqlConnection db = new SqlConnection("connstringhere");
      SqlTransaction transaction;

      db.Open();
      transaction = db.BeginTransaction();
      try 
      {
         new SqlCommand("INSERT INTO TransactionDemo " +
            "(Text) VALUES ('Row1');", db, transaction)
            .ExecuteNonQuery();
         new SqlCommand("INSERT INTO TransactionDemo " +
            "(Text) VALUES ('Row2');", db, transaction)
            .ExecuteNonQuery();
         new SqlCommand("INSERT INTO CrashMeNow VALUES " +
            "('Die', 'Die', 'Die');", db, transaction)
            .ExecuteNonQuery();
         transaction.Commit(); 
```

参考：
[使用 ADO.NET](http://msdn.microsoft.com/en-us/library/2k2hy99x%28v=vs.71%29.aspx)
[.NET 2.0 事务模型执行事务](http://www.simple-talk.com/content/print.aspx?article=190)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:04:22.870

参考这篇文章：

[http://www.codeproject.com/Articles/10223/Using-Transactions-in-ADO-NET](http://www.codeproject.com/Articles/10223/Using-Transactions-in-ADO-NET)

这将回答您有关交易的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:11:32.410

如果您对使用 Transactions 很认真，您还可以阅读一些关于`TransactionScope`.NET 中的类的文章。以这种方式实现事务非常简单。

[http://simpleverse.wordpress.com/2008/08/05/using-transactionscope-for-handling-transactions/](http://simpleverse.wordpress.com/2008/08/05/using-transactionscope-for-handling-transactions/)

例子：

```
using ( var transaction = new TransactionScope() )
{
     // My Database Operations. It doesn't matter what database Type

     transaction.Complete();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:14:44.013

事务的本质是确保代表单个进程的一个或多个更改到达数据库一次，如果其中一个失败，其他的应该被撤消。如果您将资金从一个银行账户转移到另一个银行账户，则从一个账户扣款和存入另一个账户必须完全成功。否则，钱会在运输途中丢失

```
using(SqlConnection conn = new SqlConnection())
{
   try
   {
    conn.Open();
    SqlTransaction tran = conn.BeginTransaction();

    //command to remove from account A
    //command to deposit into account B

    tran.Commit(); //both are successful
   }
   catch(Exception ex)
   {
      //if error occurred, reverse all actions. By this, your data consistent and correct
      tran.Rollback();
   }
} 
```

另一种选择是[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)，[System.Transactions](http://msdn.microsoft.com/en-us/library/a90c30fy.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:30:08.207

一般来说，正如大多数人所建议的那样，您可能应该使用`TransactionScope`，尽管这确实有一些需要注意的地方。

```
using(TransactionScope ts = TransactionUtils.CreateTransactionScope()){
  using(SqlConnection conn = new SqlConnection(connString)){
    conn.Open();
    using(SqlCommand cmd = new SqlCommand("DELETE FROM tableName WHERE somethingorother", conn)){
    cmd....

    }
    using(SqlCommand cmd ....) ...
    thingy.Save();//uses another command/connection possibly
   }

//all above Sql Calls will be done at this point. all or nothing
  ts.Complete();
} 
```

根据它的使用方式（以及您使用的数据库/版本），`TransactionScope`可能会将事务升级到 MSDTC，这需要在运行应用程序的机器上进行设置（运行提示中的 dcomcnfg）。（[TransactionScope 在某些机器上自动升级为 MSDTC？](https://stackoverflow.com/questions/1690892/transactionscope-automatically-escalating-to-msdtc-on-some-machines)）

也值得一读这个 [http://blogs.msdn.com/b/dbrowne/archive/2010/06/03/using-new-transactionscope-considered-harmful.aspx](http://blogs.msdn.com/b/dbrowne/archive/2010/06/03/using-new-transactionscope-considered-harmful.aspx) 而不是空白地使用新的 TransactionScope() -那篇文章建议制作一种静态方法来生成具有一些更有用的默认值的方法。

```
public class TransactionUtils {
  public static TransactionScope CreateTransactionScope()
  {
    var transactionOptions = new TransactionOptions();
    transactionOptions.IsolationLevel = IsolationLevel.ReadCommitted;
    transactionOptions.Timeout = TransactionManager.MaximumTimeout;
    return new TransactionScope(TransactionScopeOption.Required, transactionOptions);
  }
} 
```

hth

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T12:17:12.823

我可以告诉你，使用事务取决于业务规则。

从技术上讲，只有在系统上修改数据（更新、删除、插入）**时才**可以使用事务。当您只是从源获取值并且您 100% 确定没有数据被修改/生成时，请不要将此步骤包含在您的事务中。

为简单起见，如果您对以下任何一种情况回答“是”，请使用事务：

a) 在您的点击中影响多个表格。

b) 在您的点击中影响多个系统。这包括位于不同服务器中的数据库，即使您在同一服务器中有两个不同的实例，它也算作不同的系统。Web 服务调用也算作另一个系统。

c) 有这样的场景：“执行步骤 a，执行步骤 b，如果一切正常，则返回 OK，否则恢复步骤 b，恢复步骤 a，然后返回错误”。

现在如何在现实世界中使用交易。好吧，如果您在模型中只使用一个数据库，那么请使用 ADO.NET 事务模型。 [http://adotutorial.blogspot.de/2008/11/transaction-management-in-adonet.html](http://adotutorial.blogspot.de/2008/11/transaction-management-in-adonet.html)

但是，如果您在同一台服务器中调用不同的数据库实例，或者您正在混合使用不同的技术（SQL、Oracle、Web 服务），那么事务管理的痛苦将增加 1000 倍。然后你需要使用事务范围使它更简单一点。在 .NET 2.0 的 C# 中，您有 TransactionScope。这是您可以告诉运行时帮助我们管理事务的方式。

检查本教程，它可能会有所帮助。 [http://codingcramp.blogspot.de/2009/06/how-to-setup-and-use-transactionscope.html](http://codingcramp.blogspot.de/2009/06/how-to-setup-and-use-transactionscope.html)

如果您使用的是 microsoft 技术并且在同一台计算机上工作，那么您的代码将运行良好。但是，如果您在网络环境中运行，或者如果您正在混合不同的供应商，那么另一个关键组件进入了这个游戏，它被称为“事务监视器”。如果是这种情况，那么您可能需要检查您的环境中是否启用了 Microsoft DTC，因为它将是用于协调事务的默认选择。

# javascript - Telerik MVC 网格中的展开/折叠 DetailView

> ID：13268291
> 
> 赞同：1
> 
> 时间：2012-11-07T10:57:44.557
> 
> 标签：javascript, jquery, asp.net-mvc-3, telerik, telerik-mvc

我试图在扩展其中一个时强制 javascript 折叠所有其他行，我只想一次保持一行扩展。我对javascript相当陌生，所以我希望有人能指出我正确的方向。

我查看了我发现的这个示例，但由于某种原因，我的代码没有折叠行： [Expand/Collapse all DetailViews in a grid](http://www.telerik.com/community/forums/aspnet-mvc/grid/expand-collapse-all-detailviews-in-a-grid.aspx)

我不应该像在 javascript 中那样折叠索引吗？

**MVC Razor 视图中的我的 Telerik 网格：**

```
<div>
@(Html.Telerik().Grid<RentableUnit>()
           .Name("RentableUnits")
           .Columns(columns =>
                        {
                            columns.Bound(e => e.UnitID).Hidden();
                            columns.Bound(e => e.Name).Width(800);
                            columns.Bound(e => e.IsExpanded).Hidden();
                        })
           .ClientEvents(events => events.OnRowDataBound("employees_onRowDataBound")
                                       .OnDetailViewExpand("unit_onDetailViewExpand")
                                       .OnDetailViewCollapse("unit_onDetailViewCollapse")
                                       .OnDetailViewExpand("toggleDetail")
                                       )
           .DetailView(details => details.ClientTemplate(
               //stuff in template
           )
    .DataBinding(dataBinding => dataBinding.Ajax().Select("RentableUnits", "Home"))
    .Sortable()
)
</div> 
```

**我的Javascript：**

```
 function toggleDetail(e) {
        var grid = $(this).data('tGrid');
        grid.$rows().each(function (index) {
            //TODO: exclude the expanded row
            grid.collapseRow(index); //doesn´t collapse!
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:37:42.773

这可以解决问题：

```
function toggleDetail(e){

  var grid = $(this).data('tGrid');
  grid.$rows().not(e.masterRow).each(function(index, row){
    grid.collapseRow(row);
  });
} 
```

请注意，您为 OnDetailViewExpand 事件定义了 2 个处理程序。

# android - 充气 ChildView 后未启动子页面活动

> ID：13268295
> 
> 赞同：2
> 
> 时间：2012-11-07T10:57:56.460
> 
> 标签：android

我是安卓新手。

我想像`SplitView`在 Android 中那样做 iPhone。我是用`LayoutInflater`.

视图出现在我的孩子身上，`LinearLayout`但该视图的活动尚未开始。

所以它只是渲染它不是开始活动的视图`childview`。

我尝试使用 Intent 但它没有给我它只给我的父视图`childview`。

帮助我摆脱困境。

如何开始充气视图的活动？

```
@Override public void onCreate(Bundle savedInstanceState) {  
   super.onCreate(savedInstanceState);
   super.setContentView(R.layout.ParentActivity); 
   LinearLayout ChildView; ChildView = (LinearLayout) findViewById(R.id.ChildView); 
   ChildView.removeAllViews(); 
   setContentView(R.layout.ChildActivity); 
} 
```

而且我还覆盖了`setContentView`类似的方法

```
 @Override public void setContentView(int id) { 
    LayoutInflater inflater = (LayoutInflater)getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
     inflater.inflate(id, ChildView);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:32:52.857

我什至不确定您的应用程序是如何编译的。

您的布局文件以大写字母开头。Android 抱怨 - “基于文件的资源名称必须以小写字母开头。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:13:42.443

你有没有考虑过这样做[`Fragments`](http://developer.android.com/guide/components/fragments.html)？

# php - 在 codeigniter 中反向通配符搜索

> ID：13268300
> 
> 赞同：1
> 
> 时间：2012-11-07T10:58:14.133
> 
> 标签：php, mysql, codeigniter

我正在将基于片段的内容管理系统实施到我当前的项目中。片段可以通过完整网址的完全匹配回退到部分网址上的通配符匹配或最后一个默认片段与页面相关联。

为了实现这一点，我创建了一个带有通配符标志的页面关联表，系统首先根据非通配符关联检查当前 url，如果找不到匹配项，它会检查设置通配符标志的部分 url .

为了实现这一点，我从数据库中获取所有部分 url 并将它们放入一个数组中，然后遍历数组以检查与当前 url 的匹配：

```
protected function _check_wildcard($url = NULL)
{
    if($url)
    {
        $q = $this->db->where('wildcard' ,'Y')
                ->from('content')
                ->get();
        $wildcards = $q->result_array();

        foreach($wildcards AS $wildcard)
        {
            if(strpos($url,$wildcard['url']) !== FALSE )
            {
                return $wildcard['snippet_id'];
            }
        }
    }
    else
    {
        return NULL;
    }
} 
```

任何人都可以建议一种更好的方法来做到这一点 - 最好是不需要每次加载页面时都必须不断下载所有通配符的完整列表，因为我担心这会对可扩展性产生负面影响系统下线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:17:24.773

您可以直接查询数据库，而不是加载所有通配符。假设[MySQL](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_instr)，此查询检查给定 URL 字符串中的通配符 URL。前任 ：

```
// Keeping your current wildcard = 'Y' condition and adding the wildcard check.
$where = "wildcard = 'Y' AND INSTR('" . $url . "', url) > 0 ";
$this->db->where($where)->from('content')->get(); 
```

您可以检查您的数据库的文档以查看它是否支持 INSTR 或类似功能。

如果此查询没有返回任何行，则可以返回`NULL`，如果有行，则可以返回第一个`snippet_id`。

希望这可以帮助！

# android - 替代 setButton

> ID：13268302
> 
> 赞同：29
> 
> 时间：2012-11-07T10:58:16.803
> 
> 标签：android

我在我的 android 项目中使用此代码：

```
alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    }); 
```

但是，Eclipse 表示`setButton()`已弃用。请帮助我提供替代解决方案。谢谢！

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-07T11:02:31.710

```
AlertDialog.Builder builder = new AlertDialog.Builder(activity);
        builder.setTitle("ALERTTILESTRING")
        .setMessage("alertNameString")
        .setCancelable(false)
        .setNegativeButton("Close",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }
        });
        AlertDialog alert = builder.create();
        alert.show();
    } 
```

我希望上面的代码是一个很好的代码，其中对话框工作得很好

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-06-14T04:22:19.707

setButton() 不是被弃用的，而是函数+参数组合。仍然存在 setButton()，但您需要为按钮提供一个 ID 作为 setButton() 的第一个参数：

```
alertDialog.setButton(0, "OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
      <do something>;
    }
}); 
```

如果您想为所有按钮提供相同的 OnClickListener，这将很有用：

```
class alertDialogOnClickListener implements DialogInterface.OnClickListener {
    public void onClick(DialogInterface dialog, int which) {
        switch(which){
            case 1:
                <do something>;
                break;
            case 2:
                <do something>;
                break;
        }
    }
}
alertDialog.setButton(1, "OK", new alertDialogOnClickListener());
alertDialog.setButton(2, "Cancel", new alertDialogOnClickListener()); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-30T18:02:27.183

采用：`setButton(int whichButton, CharSequence text, DialogInterface.OnClickListener listener);`

用于`whichButton`以下其中一项：

```
DialogInterface.BUTTON_POSITIVE 
DialogInterface.BUTTON_NEGATIVE
DialogInterface.BUTTON_NEUTRAL 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-18T11:51:15.820

```
AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
            builder.setTitle("Alert");
            builder.setIcon(R.drawable.ic_launcher);
            builder.setMessage("Attention");
            builder.setPositiveButton("Get Location",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();

                        }
                    });

            builder.setNeutralButton("Set Location",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {

                        }
                    });

            builder.setNegativeButton("Exit",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();

                        }
                    });
            builder.show(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T11:00:55.873

使用它并设置正或负按钮

setButton(int whichButton, CharSequence text, DialogInterface.OnClickListener listener);

参考这个 [http://developer.android.com/reference/android/app/AlertDialog.html#setButton(int](http://developer.android.com/reference/android/app/AlertDialog.html#setButton(int) , java.lang.CharSequence, android.content.DialogInterface.OnClickListener)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-31T17:17:41.700

这是我的简短而甜蜜的一个，Android Developer 的优化。它更简洁，使用更少的内存。

```
 (new AlertDialog.Builder(/*activity*/))
    .setTitle("ALERTTILESTRING")
    .setMessage("alertNameString")
    .setCancelable(false)
    .setNegativeButton("Close",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
        }
    })
    /*insert other Alert Dialog Builder methods here*/
    .show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T11:08:32.337

您可以使用 alertDialog 设置三种按钮

```
.setPositiveButton("name_of_button",LISTENER);

.setNegativeButton("name_of_button",LISTENER);

.setNeutralButton("name_of_button",LISTENER); 
```

听众可能在课堂外或匿名课堂上

```
.setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            alertDialog.cancel();
        }
    }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-04T03:42:38.273

[托尼·斯塔克（Tony Stark）在这里](https://stackoverflow.com/a/13268371/1114170)发表的好帖子，您可以通过添加图标来美化您的对话框。确保您的可绘制文件夹中有图片。

```
 builder.setTitle("Message Sent!").setCancelable(false).setNegativeButton("Close",new DialogInterface.OnClickListener() 
                            {public void onClick(DialogInterface dialog, int id) {dialog.cancel();}});
                            AlertDialog alert = builder.create();
                            alert.setIcon(R.drawable.send);//call your image for your icon here
                            alert.show(); 
```

例子 ![在此处输入图像描述](../Images/f785e652cebd9e8547d257a98493c597.png)

# objective-c - 找到右键单击显示的 NSMenu 位置

> ID：13268303
> 
> 赞同：2
> 
> 时间：2012-11-07T10:58:18.920
> 
> 标签：objective-c, macos, nsmenuitem, nsmenu

在我的应用程序中，我有三个`NSImageView`. 当用户在图像视图上单击鼠标右键时，我将显示`NSMenu`其中两个`NSMenuItem`“添加照片”、“删除照片”。由于我有三个 Imageview 我需要知道哪个 imageview 显示菜单。这样我就可以只为那个 imageview 做我的事情。

那么我该怎么做呢？我在窗口中找不到 NSMenu 的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:04:35.853

如果您知道上下文（右键单击）菜单何时出现在您的应用程序中，您应该能够获得`NSEvent`它发生的原始“”数据。要检测它的发生，您有几个选项（例如[在您的“ ”子类中](https://stackoverflow.com/a/5120932/981049)[覆盖“ ” ）`rightMouseDown:``NSWindow`](https://stackoverflow.com/a/5120932/981049)。

在那个“ `NSEvent`”中，您可以获取[`locationInWindow`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/locationInWindow)（我已经为您链接了 Apple 文档）。使用该信息，您可以检查鼠标向下是否落在三个图像视图框架的边界内。

然后您就会知道要添加或删除哪张照片。

# javascript - 如何使用 jQuery 知道“选择”输入值已更改？

> ID：13268304
> 
> 赞同：1
> 
> 时间：2012-11-07T10:58:26.330
> 
> 标签：javascript, html, events, jquery

我知道有与 type 的输入相关的`change`事件处理。但我想知道用户是否在选择元素中选择了另一个值！所以我不想在用户在选择中选择一个新元素时运行代码，但我想知道用户是否选择了不同的值！事实上，我的表单中有两个选择元素，我只想在两个选择元素发生更改时启动一个 ajax。那么如何知道这两个元素发生了变化呢？`jQuery``select`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:07:56.987

您可以通过在 Javascript 文件中设置绑定来专门监听所选元素的更改事件。

不过，这只解决了一半的问题。您想知道何时选择了不同的元素。

您可以通过创建一个在每次触发事件时更新的跟踪变量来做到这一点。

首先，给您的跟踪变量一个永远不会出现在下拉列表中的值。

```
// Hugely contrived!  Don't ship to production!
var trackSelect = "I am extremely unlikely to be present"; 
```

然后，您需要设置一个函数来处理更改事件。

一些简单的事情： -

```
var checkChange = function() {
  // If current value different from last tracked value
  if ( trackSelect != $('#yourDD').val() )
  {
     // Do work associated with an actual change!
  }

  // Record current value in tracking variable
  trackSelect = $('#yourDD').val();
} 
```

最后，您需要在 document.ready 中连接事件。

```
$(document).ready(function () {
  $('#yourDD').bind('change', function (e) { checkChange() });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:00:00.823

首先，您可以使用`select`事件处理程序（为某些标志设置值）。这是它的工作原理：

```
$('#select').change(function () {
  alert($(this).val());
});​ 
```

演示：http: [//jsfiddle.net/dXmsD/](http://jsfiddle.net/dXmsD/)

或者您可以将原始值存储在某处，然后检查它：

```
$(document).ready(function () {
  var val = $('#select').val();    
  ...
  // in some event handler
  if ($('#select').val() != val) ...
  ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:03:02.453

您可以将页面加载时的值保存在某个隐藏字段中。

喜欢

```
 $(document).ready(function(){
 $('hiddenFieldId').val($('selectBoxId').val());
then on change you can grab the value of select:
});
    $('selectBoxId').change(function(){
    var valChng = $(this).val();
    // now match the value with hidden field
    if(valChng == $('hiddenFieldId').val()){ 
    }
    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T11:17:55.947

首先，您需要存储所选选项的先前值，然后您应该检查新选择的值是否与存储的值不同。

查看[样品](http://jsfiddle.net/P9B8u/)！

```
$(document).ready(function() {
    var lastValue, selectedValue;
    $('#select').change(function() {
        selectedValue = $(this).find(':selected').val();
        if(selectedValue == lastValue) {
            alert('the value is the same');
        }            
        else {
            alert('the value has changed');
            lastValue = selectedValue;
        }
    }); 
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:04:38.770

```
 $("select").change(function () {
      var str = "";
      $("select option:selected").each(function () {
            str += $(this).text() + " ";
          });
      $("div").text(str);
    })
    .change(); 
```

[http://docs.jquery.com/Events/change](http://docs.jquery.com/Events/change)

# jquery - Rails 3中jquery表单提交和远程表单提交的区别

> ID：13268307
> 
> 赞同：0
> 
> 时间：2012-11-07T10:58:37.473
> 
> 标签：jquery, ajax, ruby-on-rails-3

我见过一些应用程序，在ajax请求中有两种类型

1.  `link_to :remote =>true`喜欢 ........
2.  `$(ajax).save`按钮点击功能.......

它们之间有什么区别？哪一种是轨道的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:37:06.887

我不太清楚你到底想知道什么，但第一个是自 Rails 3 以来处理 Ajax 请求的新方法。从这个版本开始，Rails 中集成了 Unobtrusive JavaScript (UJS)。创建新的 Rails 3 应用程序后，将使用 JavaScript 文件 rails.js。恕我直言，您应该使用第一个，因为这是 Rails 方式。

第二个是 - 据我了解 - 普通的 jQuery 实现。这也是一种可能的方式，但您必须自己实现更多功能。

这是一篇关于 UJS 的好文章：[http ://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/](http://www.simonecarletti.com/blog/2010/06/unobtrusive-javascript-in-rails-3/)

这是一个非常好的（修订版）railscast：[http: //railscasts.com/episodes/136-jquery-ajax-revised](http://railscasts.com/episodes/136-jquery-ajax-revised)

# postgresql - 为什么这个 postgres 函数只在一个特定的数据库上失败？

> ID：13268312
> 
> 赞同：3
> 
> 时间：2012-11-07T10:58:58.357
> 
> 标签：postgresql

我正在尝试解决遗留数据库的问题。quote_literal 函数不适用于 8.4 安装的 postgres 上的特定数据库。

这是我在新测试数据库上的结果：

```
select quote_literal(42);
 quote_literal 
---------------
 '42'
(1 row) 
```

现在在目标数据库上也是如此

```
select quote_literal(42);
ERROR:  function quote_literal(integer) is not unique
LINE 1: select quote_literal(42);
           ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts. 
```

AIUI，quote_literal(anyvalue) 函数应该可以处理整数值，这似乎在第一次测试中得到了支持。

所以我认为 quote_literal 函数必须在这个数据库中被覆盖，但事实并非如此。我可以用特定的 quote_literal(integer) 函数覆盖它，但我不明白为什么我必须这样做。

问题是**什么可能导致此特定数据库中的此功能失败，同时不影响新数据库？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:02:41.280

另一种可能性：有人添加了从文本到数据库的隐式转换。[这是 8.3 中故意 BC 中断的常见解决方法](http://petereisentraut.blogspot.com.au/2008/03/readding-implicit-casts-in-postgresql.html)。请参阅[8.3、*E.57.2 的发行说明。迁移到 8.3 版*](http://www.postgresql.org/docs/current/static/release-8-3.html#AEN122074)

演示：

```
regress=# \df quote_literal
                              List of functions
   Schema   |     Name      | Result data type | Argument data types |  Type  
------------+---------------+------------------+---------------------+--------
 pg_catalog | quote_literal | text             | anyelement          | normal
 pg_catalog | quote_literal | text             | text                | normal
(2 rows)
regress=# CREATE FUNCTION pg_catalog.text(integer) RETURNS text STRICT IMMUTABLE LANGUAGE SQL AS 'SELECT textin(int4out($1));';
CREATE FUNCTION
regress=# CREATE CAST (integer AS text) WITH FUNCTION pg_catalog.text(integer) AS IMPLICIT;
CREATE CAST
regress=# SELECT quote_literal(42);
ERROR:  function quote_literal(integer) is not unique
LINE 1: SELECT quote_literal(42);
               ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts.
regress=# 
```

这将解决它，但可能会破坏仍然依赖于演员表的其他代码：

```
regress=# DROP CAST (integer AS text);
DROP CAST
regress=# SELECT quote_literal(42);
 quote_literal 
---------------
 '42'
(1 row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:40:55.960

可能有人定义了另一个单参数`quote_literal`函数，其参数类型与赋值兼容`integer`，例如`bigint`.

在`psql`中，连接并运行：

```
\df quote_literal 
```

您会看到多个条目，如下所示：

```
regress=> \df quote_literal
                              List of functions
   Schema   |     Name      | Result data type | Argument data types |  Type  
------------+---------------+------------------+---------------------+--------
 pg_catalog | quote_literal | text             | anyelement          | normal
 pg_catalog | quote_literal | text             | text                | normal
 public     | quote_literal | text             | bigint              | normal
(3 rows) 
```

你只想要第一个两个，在`pg_catalog`. 但是，我不能建议您这样做：

```
DROP FUNCTION public.quote_literal(bigint); 
```

...因为您可能有期望它存在的代码。是时候去挖掘看看它在哪里使用了。玩得开心。

演示表明这可能是问题所在：

```
regress=> SELECT quote_literal(42);
 quote_literal 
---------------
 '42'
(1 row)

regress=> CREATE OR REPLACE FUNCTION quote_literal(bigint) RETURNS text AS 'SELECT ''borkborkbork''::text;' LANGUAGE sql;
CREATE FUNCTION
regress=> SELECT quote_literal(42);
ERROR:  function quote_literal(integer) is not unique
LINE 1: SELECT quote_literal(42);
               ^
HINT:  Could not choose a best candidate function. You might need to add explicit type casts.
regress=> 
```

# file - Nuget 如何比较文件以检查修改？

> ID：13268314
> 
> 赞同：1
> 
> 时间：2012-11-07T10:59:10.227
> 
> 标签：file, comparison, nuget, nuget-package

Nuget 在更新操作期间使用什么比较机制来检查包内容文件是否在宿主项目中被修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:59:10.227

Nuget 使用 CRC（循环冗余校验）将原始包文件与已在宿主项目中提取的版本进行比较。

它计算包文件和提取文件的 32 位 CRC 并比较这些值。以下 Stream 扩展方法用于比较：

```
 public static bool ContentEquals(this Stream stream, Stream otherStream)
    {
        return Crc32.Calculate(stream) == Crc32.Calculate(otherStream);
    } 
```

# javascript - 以时间延迟重复 Javascript 函数执行

> ID：13268319
> 
> 赞同：0
> 
> 时间：2012-11-07T10:59:29.073
> 
> 标签：javascript, ajax, jquery

我即将制作一些 JS 功能

*   执行一个功能预先定义的次数（迭代）
*   **在每个函数执行后延迟预先定义的秒数**

一个很大的要求是解决方案必须与 Ajax 兼容。

说：

```
<script>
functon my_function(numberoftimes, secondsdelay){
//do ajax requests for numberoftimes, separeted by secondsdelay
$.ajax(
            {
                type: "GET/POST",
                url: "exampleurl",
                data: "key=value",
            }
        )
}
<script>

<button onclick="my_function(3,1)">Do it</button> 
```

如何？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:02:44.250

```
function my_function(numberoftimes, secondsdelay) {
    //do ajax requests for numberoftimes, separeted by secondsdelay
    var i = 0;

    function doIt() {
        $.ajax({
            type: "GET/POST",
            url: "exampleurl",
            data: "key=value",
            complete: function() {
                if (i++ < numberoftimes) {
                    setTimeout(doIt, secondsdelay * 1000);
                }
            }
        });
    }

    doIt();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:03:56.880

采用

```
setInterval() 
```

在你的 ajax 回调中，并保持你运行函数的次数。并在回调上做

```
callback : function() {
    contor++;
    if(contor < 3) {
       setInterval(yourFunction, delayMilliseconds)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:04:27.490

采用 -

window.setInterval("javascript 函数",毫秒);

参考 -

[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

# iphone - NSUserDefaults 在 tableView 中显示日期和数据

> ID：13268324
> 
> 赞同：-1
> 
> 时间：2012-11-07T10:59:50.290
> 
> 标签：iphone, nsstring, nsdate, tableview, nsuserdefaults

在我的调查应用程序的 FirstViewController 中，我有包含数据（字符串）的 NSMutableArray。我还创建了日期变量。这是代码

```
NSDateFormatter *dateformater=[[NSDateFormatter alloc] init];
[dateformater setDateFormat:@"EEEE,dd MMMM yyyy HH:mm a"];

NSDate *today=[NSDate date];
NSString *currentDate=[dateformater stringFromDate:today]; 
```

现在我想在 NSUserDefaults 的帮助下保存数组中的数据，并在进行调查时保存日期变量并将其显示在 SecondViewController 的表格视图中（第一个用户可以查看调查日期，然后点击日期 - 来自数组的数据）。

我知道 NSUSerDefaults 是如何工作的，但我不知道如何按日期变量放置数组以显示在 SecondViewController 中。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:09:46.180

在`AppDelegate.h`文件中只声明变量...

```
NSUserDefaults  *userDefaults;
NSMutableArray *arrDate; 
```

后...

`AppDelegate.m`填入`applicationDidFinishLonching:`法_

```
 userDefaults = [NSUserDefaults standardUserDefaults];
    NSData *dataRepresentingtblArrayForSearch = [userDefaults objectForKey:@"arrDate"];
    if (dataRepresentingtblArrayForSearch != nil) {
        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingtblArrayForSearch];
        if (oldSavedArray != nil)
            arrDate = [[NSMutableArray alloc] initWithArray:oldSavedArray];
        else
            arrDate = [[NSMutableArray alloc] init];
    } else {
        arrDate = [[NSMutableArray alloc] init];
    }
    [arrDate retain]; 
```

之后，当您想从此 UserDefaults 插入、更新或删除数据时，请使用波纹管代码...

从数组中删除记录

```
[appDelegate.arrDate removeObjectAtIndex:Index];/// give the integer value instead of Index 
```

这是用于在数组中添加记录..

```
[appDelegate.arrDate addObject:currentDate];///add value or add date here 
```

在最终将这个修改保存在数组中之后，就像下面这样存档..

```
NSData *data=[NSKeyedArchiver archivedDataWithRootObject:appDelegate.arrDate];
[appDelegate.userDefaults setObject:data forKey:@"arrDate"];
[appDelegate.userDefaults synchronize]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:10:18.817

`NSDictionary`使用日期和数据对象创建一个：

`NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:[NSString stringWithFormat:@"%@",currentDate], @"date", @"yourData", @"data", nil];`

然后把它放在`NSUserDefault`使用中：

```
[NSUserDefaults standardUserDefaults] setObject:yourDictionary forKey:@"item1"]; 
```

这会将单个数据存储到 NSUserDefault。

您可以使用以下方法检索对象：

```
NSDictionary * dictionary = [[NSUserDefaults standardUserDefaults] dictionaryForKey:@"item1"]; 
```

现在您将使用以下方式获取日期`[dictionary objectForKey:@"date"];`和数据：`[dictionary objectForKey:@"data"];`

# design-patterns - 滥用“初始化”一词？

> ID：13268341
> 
> 赞同：1
> 
> 时间：2012-11-07T11:00:37.743
> 
> 标签：design-patterns, naming

我正在对现有应用程序的一部分进行重新设计，但我遇到了最棘手的编程问题：正确命名:)

我有一个类 ( `A`)，它可以创建`B`. 每个`A`都有一个活动`B`对象。要激活对象，它调用`Initialize`on方法`B`，传递对自身的引用。`B`将检查 的状态`A`，订阅 的更改`A`等。

在某个时候，`A`可以决定它不再需要`B`，此时`B`进入一个可以重用的对象池。一个不同的实例`A`可以决定选择现有的`B`对象而不是创建一个。

发生这种情况时，将`Initialize`在现有对象上再次调用该方法`B`。

现在，我觉得这可能会令人困惑，因为人们可能会期望初始化只发生一次。在这种情况下**我可以使用更好的通用术语吗？**我还想介绍一个补充`Initialize`方法，告诉`B`它可以停止关注`A`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:04:34.373

我想你已经在描述中提到了这个词：

> 为了激活对象，它调用 B 上的 Initialize 方法，传递对自身的引用。

激活和停用将是适当的方法名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:33:42.523

在类似的情况下，我使用了 Attach() 和 Dettach() 来表示对象之间的临时连接。

```
bInstance.Attach(this) 
```

后来把它放回游泳池时

```
bInstance.Dettach() 
```

# css - 推特引导图像网格

> ID：13268342
> 
> 赞同：1
> 
> 时间：2012-11-07T11:00:37.393
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter bootstrap，我想创建一个网格，该网格将根据屏幕的宽度缩小并将其单元格向下移动。现在我设法创建了一个这样的网格：http: [//jsfiddle.net/D2RLR/3179/](http://jsfiddle.net/D2RLR/3179/)。

问题是网格没有很好地对齐，如果我缩小窗口，图像会变小而不是移动到下一行。

有没有众所周知的做法可以做到这一点？

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div id="search" class="well form-search search">
                <input id="search-term" type="text" placeholder="Type search term">
                <button id="search-button" class="btn btn-primary">Search</button>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div class="row-fluid">
        <div id="grid" class="span9">
            <div class="span3">
                <img class="img-polaroid" src="http://lh5.googleusercontent.com/public/zSxr-JuTje4AqFmN8zOFNcRaRm7L_QxmCaqzYSdnzHfKSHCIeM9G5NHKsdNy8BwnMLwhYHI4h_G6gNXA3c_3Zc8ggsXtPeG-fhk_IALFoH0b1HPrdxsBIszYLsUye_lvyffBsdxn_hfF9Ktng7BAgWjT56mDYBqpZXX25BC-odQ2mn8O" alt=""/>
            </div>
            <div class="span3">
                <img class="img-polaroid" src="http://lh3.googleusercontent.com/public/tN2kf46FC7y_IEd2vzJz9v4PhVsMFjV4scZovvLYRVTMk8OdYRBBlM1l263Nuak7rQVQHT107NfwWsZQ-9_MFoiOXKozErla4banQF51QyT5igHT-QKo6cRmUiTvVbQVkjgRYIh8sPutpY-XTrG8nEludMnt6GTuOg" alt=""/>
            </div>
            <div class="span3">
                <img class="img-polaroid" src="http://lh6.googleusercontent.com/public/AF-Zvxnq21ZQFZNwC4_XQnwN9-sudTFlohx7d7llv11R_60jpmPNhW679uLMzcShWd73vNAHhuTYZHFJF3rsCh7EVczcRnm-cd6KcrLDJEWWceyBUePnOPDerPf_5sovWzACyipV4JMf4k9-HomEbOwYIrwa0SwoBDXc1mwhSxVWreCs8DLNpeMRx-o" alt=""/>
            </div>
            <div class="span3">
                <img class="img-polaroid" src="http://lh3.googleusercontent.com/public/IYgOn9vXVD4zHB1d67KpX9--z0NDR0URCxEPTA32KFWTSDn9l2f7XR3tt0TTRAekThgUOCH0f0dGJn5ZLh3dUAXh1IDDrlbFJNmxGeVZt_eTTIG4YB23pXSfDH1Cx5OhNoEiaCCz4QAr-e8c" alt=""/>
            </div>
            <div class="span3">
                <img class="img-polaroid" src="http://lh3.googleusercontent.com/public/QDiY5hfLbDwEbvJmAgrcX4vRURGFEMBO6V66-EW_4YJGW5xJNCSLwwCltUB0YT1f0QMkUeztQZaI07KcsnxqEaaByAIq-ihvwPxg4B6wJuhEDjBIh1Bu5Txz0NBijb9y1dRdnSbtPImzk2HoSAcHUqfphDJwE1gfmErGtT0Apw" alt=""/>
            </div>

            <div class="span3">
                <img class="img-polaroid" src="http://lh6.googleusercontent.com/public/jIGAV-2KIt3YoKQ7zDtJN44qj6puwAk5J_GVCJCRnTTOB_idlMB-cyI9d0KTy-FL965GcOJbBeH1C8ros9FMhGxQW6ZToyr-qOYYx18FomndcKpC8TxsJAMpaz9IsT48WGfe_OgsKf9heJoEGhHGTw" alt=""/>
            </div>
        </div>
        <div id="term-history" class="span3">
            <h2>Search history:</h2>
            <ul>
                <li>
                    <a href="javascript:void(0);">camera</a>
                </li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:16:53.397

`container-fluid`将和`row-fluid`类更改为`container`和`row`。然后包含 bootstrap-responsive.css 文件。从那里工作。流动性和响应性不是一回事，尽管它们是相关的并且经常一起使用。流体布局在调整大小时会调整其**宽度**，这似乎不是您想要的。响应式布局通常会在调整大小时调整其**布局**。

[http://jsfiddle.net/tylergreen/9v296/](http://jsfiddle.net/tylergreen/9v296/)

您可能仍然想稍微弄乱布局，但功能就在那里。

# .net - 动态更改子用户控件的位置

> ID：13268345
> 
> 赞同：0
> 
> 时间：2012-11-07T11:00:48.717
> 
> 标签：.net, wpf

我创建了一个用户控件，其中包含另一个用户控件作为子控件。我尝试移动子用户控件 bu 发出以下语句

`this.versionDisplay.SetValue(Canvas.TopProperty,10.0);`

但是VS2010显示错误如下

> 错误 23 'MainApp.MainGui.MainControls.MainTitleControl' 不包含 'versionDisplay' 的定义并且没有扩展方法 'versionDisplay' 接受类型为 'MainApp.MainGui.MainControls.MainTitleControl' 的第一个参数（您是否缺少使用指令还是程序集引用？）

我确信子控件的名称是 versionDisplay。

MainTitleControl 的代码

```
<UserControl x:Class="Main.MainGui.MainControls.MainTitleControl"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
     xmlns:wcontrols="clr-namespace:WEPA.MainGui.MainControls"
     Height="80" Width="395" Loaded="UserControl_Loaded" >

     <Grid Background="Transparent"  >
         <Image  HorizontalAlignment="Left"  Name="image1" Stretch="Fill" VerticalAlignment="Top"  Width="635" Height="120" Source="/MainApplication;component/images/UnCategorized/Wireless.png" Margin="12,0,0,0" / >
         <wcontrols:supportInfoControl Name="versionDisplay" Height="20" Canvas.Left="185" Canvas.Top="70" Margin="200,95,-114,-35" />
    </Grid>
</UserControl> 
```

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:26:17.460

您嵌套的 UserControl (wcontrols:supportInfoControl) 似乎包含在网格中，因此即使您正确设置了 Canvas.Top 属性，如下所示：

```
Canvas.SetTop(this.versionDisplay, 10.0); 
```

那么它仍然没有任何效果。我会试试这个：

```
this.versionDisplay.RenderTransform = new TranslateTransform(0.0, 10.0); 
```

您没有指定希望此重定位对兄弟元素和父元素产生什么影响，因此我建议使用 RenderTransform。如果您想要不同的整体行为，则需要更具体。

我希望这有帮助。

# java - 如何在缓存中同步文件创建（不写入文件，只是创建）

> ID：13268350
> 
> 赞同：1
> 
> 时间：2012-11-07T11:01:00.817
> 
> 标签：java, file-io, concurrency, synchronized, concurrent-programming

我有一个存储旧文件的存储库，例如存档。
用户使用一个简单的 Web 应用程序来获取这些文件。
我在运行我的 Web 应用程序的服务器上维护一个简单的文件系统缓存。
至少它看起来很简单，而这只是一个想法:)

我需要以一种方式同步该缓存中的文件创建，即一次只允许一个线程从存档中获取相同的文件。

碰巧需要该文件的所有其他线程必须等到第一个线程完成将其写入缓存，然后从那里获取它。
起初我使用 File.exists() 方法，但这并不好，因为它在线程（锁所有者）创建一个空文件后立即返回 true（因此它可以开始从存储库流写入它）。

我不确定这是否是正确的方法，但我正在使用静态 Map（将 file_ID 映射到 syncDummyObject）来跟踪当前正在获取哪些文件。
然后我（试图）在该 syncDummyObject 上同步文件获取。

这是正确的方法吗？该代码正在运行，但在我将其投入生产之前，我需要确保它是好的。

我考虑使用暂存目录，在其中创建文件并在完成后将它们传输到缓存中，但这会带来另一组问题......

为了更好的可读性，我删除了错误处理的日志记录和不相关的部分。

谢谢！

```
public class RepoFileFetcher{

    private static volatile ConcurrentHashMap<String, Object> syncStrings = new ConcurrentHashMap<String, Object>();    
    private static final Object mapSync = new Object(); // map access sync
    private Boolean isFileBeingCreated = new Boolean(false);
    private Boolean isFileReadyInCache = new Boolean(false);

    public File getFileById(MikFileIdentifier cxfi){        
        File theFile = null; // file I'm going to return in the end

        try{
            Object syncObject = null;

            // sync map access
            synchronized(mapSync){

                if(syncStrings.containsKey(cxfi.getFilePath())){
                    // if the key exists in the map it means that
                    // it's being created by another thread
                    // fetch the object from the map 
                    // and use it to wait until file is created in cache
                    syncObject = syncStrings.get(cxfi.getFilePath());

                    isFileBeingCreated = true;

                }else if(!(new File(cxfi.getFilePath())).exists()){
                    // if it doesn't exist in map nor in cache it means that
                    // I'm the first one that fetches it from repo
                    // create new dummyLockObject and put it in the map
                    syncObject = new Object();
                    syncStrings.put(cxfi.getFilePath(), syncObject);

                }else{
                    // if it's not being created and exists in cache
                    // set flag so I can fetch if from the cache bellow
                    isFileReadyInCache = true;
                }
            }

            // potential problem that I'm splitting the critical section in half,
            // but I don't know how to avoid locking the whole fetching process
            // I want to lock only on the file that's being fetched, not fetching of all files (which I'd get if the mapSync was still locked)
            // What if, at this very moment, some other thread starts fetching the file and isFileBeingCreated becomes stale? Is it enough to check whether I succeeded renaming it and if not then fetch from cache? 

            if(!isFileBeingCreated && !isFileReadyInCache){

                // skip fetching from repo if another thread is currently fetching it
                // sync only on that file's map object

                synchronized(syncObject){
                    File pFile = new File(cxfi.getFilePath());
                    pFile.createNewFile();

                    // ...
                    // ... the part where I write to pFile from repo stream
                    // ...

                    if(!pFile.renameTo(theFile)){
                        // file is created by someone else 
                        // fetch it from cache
                        theFile = fetchFromCache(cxfi, syncObject);
                    }

                    syncStrings.remove(cxfi.getFilePath());

                    // notify all threads in queue that the file creation is over
                    syncObject.notifyAll();
                }//sync

            }else{

                theFile = fetchFromCache(cxfi, syncObject);
            }

            return theFile;

        }catch(...{
            // removed for better readability
        }finally{
            // remove from the map, otherwise I'll lock that file indefinitely
            syncStrings.remove(cxfi.getFilePath());
        }

        return null;
    }

    /**
     * Fetches the file from cache
     * @param cxfi File identification object
     * @param syncObject Used to obtain lock on file
     * @return File from cache
     * @throws MikFileSynchronizationException
     * @author mbonaci
     */
    private File fetchFromCache(FileIdentifier cxfi, Object syncObject)
            throws MikFileSynchronizationException{

        try{
            // wait till lock owner finishes creating the file
            // then fetch it from the cache

            synchronized(syncObject){   

                // wait until lock owner removes dummyObject from the map
                // while(syncStrings.containsKey(cxfi.getFilePath()))
                // syncObject.wait();                   

                File existingFile = new File(cxfi.getFilePath());
                if(existingFile.exists()){
                    return existingFile;
                }else{
                    // this should never happen
                    throw new MikFileSynchronizationException();
                }
            }

        }catch(InterruptedException ie){
            logger.error("Synchronization error", ie);
        }
        return null;
    } 
```

**编辑我：** 谢谢大家的帮助。关于在 CHM 上使用 putIfAbsent() 的建议是关键。我最终这样做了（欢迎任何其他评论）：

**编辑二：**在类 的其他分支中添加了 CHM 元素删除`if`（因为现在我将元素放在地图中，即使我不需要）。

**编辑三：** 在变量中移动了上面文件存在的检查`isFileInCache`。

```
public class RepoFileFetcher{               
    private static volatile ConcurrentHashMap<String, Object> syncStrings = new ConcurrentHashMap<String, Object>();    

    // save some time so I can lock syncObject earlier 
    private boolean isFileInCache = false;

    // remember whether we put the elem in the map or not 
    // so we know whether to remove it later 
    private boolean insertedMapElem = false; // added in EDIT II 

    /**
     * Fetches the file from repository (anc caches it) or directly from cache if available
     * @param cxfi File identification object
     * @return File
     * @author mbonaci
     */
    public File getFileById(FileIdentifier cxfi){
        String fileId = cxfi.getFileId();
        String fileName = cxfi.getOnlyPath() + fileId;
        File theFile = null; // file I'm going to return in the end

        try{
            Object syncObject = null;
            Object dummyObject = new Object();                  
            isFileInCache = (new File(fileName)).exists();
            syncObject = syncStrings.putIfAbsent(fileId, dummyObject);

            if(syncObject == null){ // wasn't in the map                            
                insertedMapElem = true; // we put the new object in

                if(!isFileInCache){ // not in cache

                    // if it doesn't exist in map nor in cache it means that
                    // I'm the first one that fetches it from repo (or cache was deleted)
                    // syncObject = new lock object I placed in the map
                    syncObject = dummyObject;

                    synchronized(syncObject){
                        File pFile = new File(cxfi.getFilePath());
                        pFile.createNewFile();

                        // ...
                        // ... the part where I write to pFile from repo stream
                        // ...

                        pFile.renameTo(theFile)
                        theFile = pFile;

                        syncStrings.remove(cxfi.getFilePath());

                        // notify all threads in queue that the file is now ready to be fetched from cache
                        syncObject.notifyAll();
                    }//sync

                }else{
                    // if it's not being created and exists in cache it means that it's complete
                    // fetch it from cache without blocking (only reading)
                    syncStrings.remove(cxfi.getFilePath()); // added in EDIT II
                    theFile = new File(fileName);
                }

            }else{
                // if the key exists in the map it means that
                // it's being created by another thread
                // fetch the object from the map 
                // and use it to wait until file is created in cache
                // don't touch the map (I haven't added anything)
                // the lock owner will remove the elem
                // syncObject = the object that what was in the map when I called putIfAbsent()
                theFile = fetchFromCache(cxfi, syncObject);
            }

            return theFile;

        }catch(...{
            // removed for better readability
        }finally{ 
            // no good cuz' this way I'd sometimes remove the map elem
            // while lock owner still writes to a file
            // only the one who placed the elem in the map should remove it
            // remove from the map, otherwise I'll lock that file indefinitely
            // syncStrings.remove(fileId); // commented out in EDIT II
        }
        // remove in case of exception (but only if we added it)
        if(insertedMapElem)
            syncStrings.remove(fileId);
        return null;
    }

    /**
     * Fetches the file from cache after it obtains lock on <code>syncObject</code>
     * @param cxfi File identification object
     * @param syncObject Used to obtain lock on file
     * @return File from cache
     * @author mbonaci
     */
    private File fetchFromCache(FileIdentifier cxfi, Object syncObject){
        String fileId = cxfi.getFileId();
        String fileName =  fileId + ".tif";

        synchronized(syncObject){

            File existingFile = new File(cxfi.getAbsPath() + fileName);

            if(existingFile.exists()){
                return existingFile;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:26:53.613

我可以建议几个调整：

1.  您已经在使用`ConcurrentHashMap`，不需要额外的锁。
2.  我会将“文件”包装在一个更智能的对象中，它有自己的同步。因此，您可以执行以下操作：

    *   `putIfAbsent()`使用路径和包装文件的“智能”对象调用地图。
    *   以上将返回值（如果路径不存在，则返回新值，或者现有包装器）
    *   在包装器中有状态，它知道它是否已经被缓存
    *   调用`cache()`它检查它是否已被缓存，如果是，则不执行任何操作，否则缓存
    *   然后从包装器中返回“文件”（比如一个`getFile()`方法）

然后确保在公共函数的包装器内使用锁，这意味着在`cache()`同时发生时会阻塞。

这是一个草图：

```
class CachedFile
{
  File realFile;
  // Initially not cached
  boolean cached = false;

  // Construct with file

  public synchronized boolean isCached()
  { return cached; }

  public synchronized void cache()
  {
    if (!cached)
    {
      // now load - safe in the knowledge that no one can get the file (or cache())
      ..
      cached = true; // done
    }
  }

  public synchronized <File> getFile()
  {
    // return the "file"
  }
} 
```

现在你的代码变成了这样：

```
ConcurrentHashMap<String, CachedFile> myCache = ConcurrentHashMap<>();
CachedFile newFile = new CachedFile(<path>);
CachedFile file = myCache.putIfAbsent(<path>, newFile);
// Use the new file if it did not exist
if (file == null) file = newFile;
// This will be no-op if already cached, or will block is someone is caching this file.
file.cache();
// Now return the cached file.
return file.getFile(); 
```

我的建议有意义吗？

# asp.net - 日历控制的奇怪行为（工具提示）

> ID：13268351
> 
> 赞同：0
> 
> 时间：2012-11-07T11:01:13.913
> 
> 标签：asp.net, html, calendar

我通过代码将工具提示添加到 ASP.NET 日历控件：

```
string newToolTip = string.Format(@"<div class='tooltip'><div class='toolHead'>{0}</div><div class='toolDate'>{1}-{2}</div></div>",sEvent.Title, sEvent.FromDate, sEvent.ToDate);
e.Cell.ToolTip = newToolTip;
e.Cell.Attributes.Add("OnClick", string.Format("javascript:__doPostBack('Karl Ender','{0}')", sEvent.Title)); 
```

其中“e”是 DayRenderEventArgs ：

```
Calendar.DayRender += new DayRenderEventHandler(SpecialDayRender); 
```

在页面的第一次加载时一切正常，产生以下（正确的）html代码：

```
<td title="" class="calendarcell" align="center" onclick="javascript:__doPostBack('Karl Ender','Hallo Welt')" style="color:White;background-color:Silver;width:14%;">7<div class="tooltip"><div class="toolHead">Hallo Welt</div><div class="toolDate">11/7/2012-5/9/2013</div></div></td> 
```

当我在日历控件中更改月份（或进行另一个部分回发）时，Html 代码突然变得头晕目眩：

```
<td title="&lt;div class='tooltip'&gt;&lt;div class='toolHead'&gt;Hallo Welt&lt;/div&gt;&lt;div class='toolDate'&gt;11/7/2012-5/9/2013&lt;/div&gt;&lt;/div&gt;" class="calendarcell" align="center" onclick="javascript:__doPostBack('Karl Ender','Hallo Welt')" style="color:White;background-color:Silver;width:14%;">7</td> 
```

因此，工具提示被呈现为该单元格的“标题”属性

有什么线索吗？

（日历在更新面板中）

调试代码时，单元格的 Title-Attribute 永远不会充满奇怪的内容

# driver - 从 UMDF 打印机驱动程序到用户模式应用程序的命名管道

> ID：13268352
> 
> 赞同：1
> 
> 时间：2012-11-07T11:01:13.583
> 
> 标签：driver, named-pipes, wdk, umdf

我对 WDK 很陌生，我正在尝试创建一个虚拟打印机驱动程序，它将使用命名管道将数据发送到用户应用程序。我使用“XPSDrv 驱动程序和过滤器示例”作为开始。我在放置此客户端代码的末尾添加了新过滤器：

```
HANDLE hPipe; 
LPTSTR lpvMessage=TEXT("Message from UMDF!"); 

BOOL   fSuccess = FALSE; 
DWORD  cbToWrite, cbWritten, dwMode; 
LPTSTR lpszPipename = TEXT("\\\\.\\pipe\\mynamedpipe"); 

  hPipe = CreateFile( 
     lpszPipename,
     //GENERIC_READ |
     GENERIC_WRITE, 
     0,             
     NULL,          
     OPEN_EXISTING, 
     0,             
     NULL);         

dwMode =  PIPE_READMODE_MESSAGE; 
fSuccess = SetNamedPipeHandleState( 
  hPipe,    
  &dwMode,  
  NULL,     
  NULL);    

if (fSuccess) 
{
cbToWrite = (lstrlen(lpvMessage)+1)*sizeof(TCHAR);

fSuccess = WriteFile( 
  hPipe,
  lpvMessage,
  cbToWrite,
  &cbWritten,
  NULL);
} 
```

代码适用于控制台应用程序项目，但不适用于 UMDF 打印机驱动程序。服务器也是一个始终启动的控制台应用程序。有人知道为什么吗？或者，也许您知道如何调试打印机驱动程序的简单方法？

一切顺利，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:23:34.963

The reason can be found [here](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379583%28v=vs.85%29.aspx):

> There is an important difference between an empty and a nonexistent DACL. When a DACL is empty, it contains no access control entries (ACEs); therefore, no access rights are explicitly granted. As a result, access to the object is implicitly denied.
> 
> When an object has no DACL (when the pDacl parameter is NULL), no protection is assigned to the object, and all access requests are granted.

You're passing a null pDacl, so you're making the pipe accessible to everyone.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:34:30.927

I've added those lines before CreateNamedPipe to my server and now it works, not sure why but it's working. If someone has any idea why I would love to know that. Before that I was haveing NULL passed despite m_pSecAttrib as last CreateNamedPipe parameter.

```
SECURITY_ATTRIBUTES m_pSecAttrib;
SECURITY_DESCRIPTOR* m_pSecDesc;

  m_pSecDesc = (SECURITY_DESCRIPTOR*)LocalAlloc(LPTR,SECURITY_DESCRIPTOR_MIN_LENGTH);
  InitializeSecurityDescriptor(m_pSecDesc,SECURITY_DESCRIPTOR_REVISION);
  SetSecurityDescriptorDacl(m_pSecDesc,TRUE,(PACL)NULL,FALSE);

  m_pSecAttrib.nLength = sizeof(SECURITY_ATTRIBUTES);
  m_pSecAttrib.bInheritHandle = TRUE;
  m_pSecAttrib.lpSecurityDescriptor = m_pSecDesc;

  Pipe[i].oOverlap.hEvent = hEvents[i]; 

  Pipe[i].hPipeInst = CreateNamedPipe(
     lpszPipename,
     PIPE_ACCESS_DUPLEX |
     FILE_FLAG_OVERLAPPED,
     PIPE_TYPE_MESSAGE |
     PIPE_READMODE_MESSAGE |
     PIPE_ACCEPT_REMOTE_CLIENTS |
     PIPE_WAIT,
     INSTANCES,
     BUFSIZE*sizeof(TCHAR),
     BUFSIZE*sizeof(TCHAR),
     PIPE_TIMEOUT,
     &m_pSecAttrib); 
```

# php - htaccess 只允许在 ip 专用网站中使用正确的域名

> ID：13268355
> 
> 赞同：0
> 
> 时间：2012-11-07T11:01:25.310
> 
> 标签：php, .htaccess

我试图只允许我的域名查看我的网站...我有一个专用的 ip，任何人基本上都可以将您的域设置为我的 ip，它会创建我网站的重复内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:21:46.313

试试这个代码，它会将用于访问您网站的所有域名重写为正确的域名：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.domain.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301] 
```

这意味着与 www.domain.com 不匹配的所有内容都将被重定向/重写到 www.domain.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:10:58.393

我是否正确理解您，您担心其他人会将他们的域指向您的 IP，从而降低您的 SEO 评级？首先：哇。其次：使用虚拟主机配置 Web 服务器以仅响应特定域名，而不是响应所有请求，无论 HTTP`Host`标头如何。如何做到这一点完全取决于您正在运行的 Web 服务器以及您是否可以在其上配置虚拟主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:18:54.030

据我所知，主机只会响应配置的正确域名。

您还可以确保使用 htaccess 将所有传入请求重写到正确的域。

在这个例子中，.domain.com 被改写为 www.domain.com 并且永远不会以其他方式可用。

[http://www.tech-recipes.com/rx/296/rewrite-domaincom-to-wwwdomaincom-using-htaccess-in-apache/](http://www.tech-recipes.com/rx/296/rewrite-domaincom-to-wwwdomaincom-using-htaccess-in-apache/)

# objective-c - UIAlertView 文本字段捕获 onchange

> ID：13268358
> 
> 赞同：0
> 
> 时间：2012-11-07T11:01:29.087
> 
> 标签：objective-c, ios, uitextfield, uialertview

我正在尝试实现自定义 AlertView。

这个想法是让 alertview 带有文本字段和取消按钮。

我不能做的是实时检查文本字段中输入的字符。我知道我可以使用它，`– alertViewShouldEnableFirstOtherButton:`但我不想要另一个按钮。我希望在没有按钮的情况下做同样的事情。

在 android 中，您可以将侦听器添加到文本字段 onchange。

尝试使用此 uitextfield 函数来执行此操作，但它没有被实时调用，或者我可能以错误的方式使用它。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    textField = [alert textFieldAtIndex:0];
    if ([textField.text length] == 0)
    {
        NSLog(@"Hello");
        return NO;
    }
    return NO;
} 
```

那么如何正确地做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:55:50.257

试试这个

```
 UIAlertView *myAlertView = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"New List Item", @"new_list_dialog")
                                                          message:@"this gets covered" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
   UITextField *myTextField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
    myTextField.delegate = self;
    [myTextField setBackgroundColor:[UIColor whiteColor]];
    [myAlertView addSubview:myTextField];
    [myAlertView show];
    [myAlertView release]; 
```

和文本字段方法

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    NSLog(@" %@", [textField.text stringByReplacingCharactersInRange:range withString:string]);
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:48:46.287

您可以添加观察者，`UITextFieldTextDidChangeNotification`只要`text` `changes`在`textfield`.

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(controlTextDidChange:)
   name:UITextFieldTextDidChangeNotification object:[alert textField]]; 
```

选择器如下：

```
- (void)controlTextDidChange:(NSNotification *)notification {
{
    if ([notification object] == [alert textField]) 
    {
      // [alert textField] has changed
    }
} 
```

**编辑**：做的`remove` `Observer`时候`finish`

```
[[NSNotificationCenter defaultCenter] removeObserver:UITextFieldTextDidChangeNotification]; 
```

# ssl - 带有 ssl 的 Typo3 多域：TOO_MANY_REDIRECTS

> ID：13268360
> 
> 赞同：1
> 
> 时间：2012-11-07T11:01:41.330
> 
> 标签：ssl, cross-domain, typo3, extbase, realurl

使用typo3 4.5/extbase 1.3 我正在尝试在多域环境中运行我的商店扩展：商店页面应该在HTTP 域A 上运行，并且在HTTPS 域B 上运行以下结帐过程。域B 是https://www。 ssl-id.de/[domainA]（主机是 Strato）。因此，我设置了：

1.  两个根分别具有域 A 和域 B 的域条目的两个页树
2.  HTTPS 页面树中​​的结帐页面已将“使用协议”设置为 HTTPS
3.  TS:baseURL 有条件地设置为域 A 或域 B（基于 ENV:HTTP_HOST）
4.  为两个域设置了 realurl 配置（使用 $TYPO3_CONF_VARS['EXTCONF']['realurl']['[domainA]'] 和 $TYPO3_CONF_VARS['EXTCONF']['realurl']['www.ssl-id.德'])

不幸的是，从 HTTP 商店重定向到 HTTPS 结帐导致 chrome 出现错误 310 (net::ERR_TOO_MANY_REDIRECTS)。网络报道说

```
Request URL:https://www.ssl-id.de/[domainA]/de/checkout.html?FE_SESSION_KEY=bc04cd0f5b835bcbdd8c475bafb037f7-ab3700f6a9fae520b75981130b31ec77&cHash=6d7e7195735947b09becbfa9c26c8bf0
Request Method:GET
Status Code:301 Moved Permanently
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Cache-Control:max-age=0
Connection:keep-alive
Cookie:fe_typo_user=bc04cd0f5b835bcbdd8c475bafb037f7
Host:www.ssl-id.de
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4
Query String Parametersview URL encoded
FE_SESSION_KEY:bc04cd0f5b835bcbdd8c475bafb037f7-ab3700f6a9fae520b75981130b31ec77
cHash:6d7e7195735947b09becbfa9c26c8bf0
Response Headersview source
Connection:Keep-Alive
Content-Length:0
Content-Type:text/html; charset=utf-8
Date:Wed, 07 Nov 2012 09:54:06 GMT
Keep-Alive:timeout=3, max=99
Location:https://www.ssl-id.de/[domainA]/de/checkout.html?FE_SESSION_KEY=bc04cd0f5b835bcbdd8c475bafb037f7-ab3700f6a9fae520b75981130b31ec77&cHash=6d7e7195735947b09becbfa9c26c8bf0
Server:Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r
Set-Cookie:fe_typo_user=bc04cd0f5b835bcbdd8c475bafb037f7; path=/[domainA]/
X-Powered-By:PHP/5.3.8 
```

其内容为“目标页面网址不存在，请再次查看相同的网址”。当使用第二个 HTTP url 而不是 HTTPS url 时，设置运行良好。直接调用结帐页面而不从商店页面重定向时，结果是相同的错误 310。

.htaccess 是一个非常标准的typo3-realurl .htaccess：

```
AddDefaultCharset utf-8

AddType video/mp4 mp4
AddType video/mp4 m4v
AddType video/ogg ogv
AddType video/webm webm
AddType video/webm webmv

<FilesMatch "\.(js|css)$">
  <IfModule mod_expires.c>
    ExpiresActive on
    ExpiresDefault "access plus 7 days"
  </IfModule>
  FileETag MTime Size
</FilesMatch>

<IfModule mod_rewrite.c>

RewriteEngine On
#RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L]

RewriteRule ^(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]

RewriteRule ^typo3$ typo3/index_re.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule .* index.php [L]

</IfModule> 
```

关于如何消除重定向问题或如何更接近导致无限循环的重定向调用者的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T12:07:48.557

问题是特定于主机（Strato）的：他们的 SSL 代理没有发送相关的 $_SERVER['HTTPS'] ，这以某种方式使typo3发疯。

解决方案是通过将以下行添加到 localconf.php 的末尾来自己设置 $_SERVER['HTTPS']：

```
if ($_SERVER['HTTP_X_FORWARDED_HOST'] == "www.ssl-id.de") {  
    $_SERVER['HTTPS'] = 1;  
} 
```

或更一般的

```
if (this_is_a_ssl_request()) {  
    $_SERVER['HTTPS'] = 1;  
} 
```

# javascript - 引导“工具提示”和“弹出框”在表格中添加额外的大小

> ID：13268361
> 
> 赞同：83
> 
> 时间：2012-11-07T11:01:45.593
> 
> 标签：javascript, twitter-bootstrap, twitter-bootstrap-3, tooltip

> **注意：**
> 根据您的 Bootstrap 版本（是否在 3.3 之前），您可能需要不同的答案。
> 注意笔记。

当我在此代码中激活工具提示（悬停在单元格上）或弹出框时，表格的大小正在增加。我怎样才能避免这种情况？

这里 emptyRow - 用 100 生成 tr 的函数

```
<html>
<head>
    <title></title>
    <script type="text/javascript" language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css">
    <script type="text/javascript" language="javascript" src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.1/bootstrap.min.js"></script>
    <style>    
    #matrix td {
        width: 10px;
        height: 10px;
        border: 1px solid gray; 
        padding: 0px; 
    }
    </style>
<script>
function emptyRow() {
        str = '<tr>'
        for (j = 0; j < 100; j++) {
            str += '<td rel="tooltip" data-original-title="text"></td>'
        }
        str += '</tr>'
        return str
    }
    $(document).ready(function () {
        $("#matrix tr:last").after(emptyRow())
        $("[rel=tooltip]").tooltip();
    });
    </script>
</head>
<body style="margin-top: 40px;">
<table id="matrix">
    <tr>
    </tr>
</table>
</body>
</html> 
```

谢谢指教！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2015-02-13T07:59:17.627

> **注意：** Bootstrap 3.3+ 的解决方案

## 简单的解决方案

在`.tooltip()`通话中，将`container`选项设置为`body`：

```
$(function () {
  $('[data-toggle="tooltip"]').tooltip({
    container : 'body'
  });
}); 
```

或者，您可以使用以下`data-container`属性执行相同操作：

```
<p data-toggle="tooltip" data-placement="left" data-container="body" title="hi">some text</p> 
```

## 为什么这行得通？

这解决了这个问题，因为默认情况下，工具提示具有`display: block`并且元素插入到调用它的位置。由于`display: block`，它在某些情况下会影响页面流，即向下推其他元素。

通过将容器设置为 body 元素，工具提示被附加到 body 而不是从它被调用的位置，因此它不会影响其他元素，因为没有什么可以“下推”。

*   [引导工具提示文档](http://getbootstrap.com/javascript/#tooltips)

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2012-11-07T12:31:38.243

> **注意：** Bootstrap 3.0 ~ 3.2 的解决方案

您需要在 a 中创建一个元素`td`并对其应用工具提示，就像[这样](http://jsfiddle.net/sZdYE/3/)，因为工具提示本身就是一个 div，当它放在`td`元素之后时，它会破坏表格布局。

这个问题是在最新版本的 Bootstrap 中引入的。[在GitHub 上](https://github.com/twbs/bootstrap/issues/5687)有关于修复的持续讨论。希望下一个版本包含固定文件。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-01-19T16:48:46.713

> **注意：** Bootstrap 3.3+ 的解决方案

如果您想在将工具提示应用于`<td>`元素时避免破坏表格，可以使用以下代码：

```
 $(function () {
        $("body").tooltip({
            selector: '[data-toggle="tooltip"]',
            container: 'body'
        });
    }) 
```

您的 html 可能如下所示：

```
<td data-toggle="tooltip" title="Your tooltip data">
    Table Cell Content
</td> 
```

这甚至适用于动态加载的内容。例如与数据表一起[使用](https://www.datatables.net/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-03-18T15:55:01.547

*我想为接受的答案增加一些精度，我决定使用答案格式以提高可读性。*

> **注意：** Bootstrap 3.0 ~ 3.2 的解决方案

现在，[将工具提示包装在 div 中是解决方案](https://github.com/twitter/bootstrap/issues/5687#issuecomment-11148964)，但如果您希望整体`<td>`显示工具提示（由于 Bootstrap CSS），则需要进行一些修改。一种简单的方法是将其`<td>`填充转移到 wrapper ：

**HTML**

```
<table class="table table-hover table-bordered table-striped">
    <tr>
        <td>
            <div class="show-tooltip" title="Tooltip content">Cell content</div>
        </td>
    </tr>
</table> 
```

**JS (jQuery)**

```
$('.show-tooltip').each(function(e) {
    var p = $(this).parent();
    if(p.is('td')) {
        /* if your tooltip is on a <td>, transfer <td>'s padding to wrapper */
        $(this).css('padding', p.css('padding'));
        p.css('padding', '0 0');
    }
    $(this).tooltip({
        toggle: 'toolip',
        placement: 'bottom'
    });
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-22T06:02:45.180

如果您对表使用数据表，那么它将使用完整的

```
$('#TableId').DataTable({
                "drawCallback": function (settings) {
                    debugger;
                    $('[data-toggle="tooltip"]').tooltip({
                        container: 'body'
                    });

                }
            }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-23T12:46:46.117

您应该在数据表函数**fnDrawCallback 中初始化****Tooltip**

 **`"fnDrawCallback": function (data, type, full, meta) { $('[data-toggle="tooltip"]').tooltip({ placement: 'right', title: 'heyo', container: 'body', html: true }); },`

并将您的列定义如下

```
 {
      targets: 2,
      'render': function (data, type, full, meta) {
       var htmlBuilder = "<b>" + data + "</b><hr/><p>Description: <br/>" + full["longDescrioption"] + "</p>";
      return "<a href='#' class='Name'>" + (data.length > 50 ? data.substr(0, 50) + '…' : data) + "</a>" +
      "<sup data-toggle='tooltip' data-original-title=" + htmlBuilder + ">"+
      "<i class='ic-open-in-new ic' style='font-size:12px;margintop:-3px;'></i></sup>";
    }
 }, 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-22T05:30:29.187

如果您使用 AngularJS 的引导指令，请使用 tooltip-append-to-body 属性。

```
<td ng-repeat="column in row.columns" uib-tooltip="{{ ctrl.viewModel.leanings.tooltip }}" tooltip-append-to-body="true"></td> 
```**

# python - 在python中使用正则表达式从锚标签中提取数据

> ID：13268365
> 
> 赞同：1
> 
> 时间：2012-11-07T11:01:59.100
> 
> 标签：python, html, regex, parsing

我正在尝试使用Python中的[正则表达式从网页中提取超链接。](http://docs.python.org/2/library/re.html)

假设我的文本字符串是：

```
text = '<a href="/status/ALL">ALL</a></td>/n<a href="/status/ASSIGN">ASSIGN</a></td>' 
```

我想提取 ALL 和 ASSIGN，我正在使用这个正则表达式：

```
re.findall(r'<a href=.*>(\w+)</a>', text, re.DOTALL) 
```

这只是返回分配。

有人可以帮我指出正则表达式中的错误吗？我对这个话题真的很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:04:01.787

您正在使用正则表达式，并且将 XML 与此类表达式匹配变得[太复杂、太快](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

请不要为难自己，而是使用 HTML 解析器，Python 有几个可供选择：

*   [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)是标准库的一部分
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)是一个流行的第三方库
*   [lxml](http://lxml.de/)是一个快速且功能丰富的基于 C 的库。

元素树示例：

```
from xml.etree import ElementTree

tree = ElementTree.parse('filename.html')
for elem in tree.findall('a'):
    print ElementTree.tostring(elem) 
```

# templates - Play Framework 2.0 从模板访问外键对象

> ID：13268366
> 
> 赞同：2
> 
> 时间：2012-11-07T11:02:01.960
> 
> 标签：templates, foreign-keys, playframework-2.0, ebean

我有 2 个 Ebean 模型与 ManyToOne 连接。

```
@Entity
public class Interview extends Model {
   @Id
   Long id;
   @ManyToOne(cascade = CascadeType.MERGE)
   public User user;
   ....
} 
```

和

```
@Entity
public class User extends Model {
   @Id
   public Long id;
   @Email
   @Required
   @Column(unique=true)
   public String email;
   @Required
   public String name;
   public String department;
   public String phone;
....
} 
```

当尝试通过 Interview 实例从 Scala 模板访问 User 类字段时，我只能访问 id 字段，但其他人返回空字符串。这是模板：

```
@(interviewsList[Interview])
....
<table>
.....
    @for(i <- interviewsList) {
     <tr>
            <td>@i.user.name</td> // EMPTY, while changing to @i.user.id returns an id
            <td>@i.date.format("dd MMM yyyy")</td>
         </tr>
     }
 </table> 
```

有没有办法在不使用 Finder 的情况下访问其他字段？

# uart - XBee Pro S1 - Nibo2 - 接收数据不流畅

> ID：13268368
> 
> 赞同：0
> 
> 时间：2012-11-07T11:02:21.177
> 
> 标签：uart, xbee

我目前正在从事 ac 项目，在我的电脑上安装了 XBee Pro Series 1，允许我将数据发送到我的 nibo2 机器人，还连接了那个 xbee 模块。

将数据从 nibo2 机器人发送到我的电脑效果很好，并且没有任何数据丢失。

将数据从我的电脑发送到 nibo2 工作不正常：当我尝试在某个时间点发送 16 个字节时，只有前 8 个字节到达我的 nibo2。第二个 8 字节丢失。当我发送分成 8 个字节的数据并以可能 1s - 2s 的时间差发送它们时，它工作正常。

此处列出了您应该了解的可能有趣的事情：

XBee 数据表：http: [//ftp1.digi.com/support/documentation/90000982_H.pdf](http://ftp1.digi.com/support/documentation/90000982_H.pdf)

机器人使用的库（使用 uart0）： http: [//nibo.sourceforge.net/doc/html/](http://nibo.sourceforge.net/doc/html/)

有没有人有想法或有人知道这个问题？是关于配置 xbee 模块的事情吗？中断问题？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:38:51.813

您是如何配置 XBee 模块的？哪个固件版本？什么波特率？您是否使用硬件流控制（CTS 和 RTS 信号）？

您可以使用 PC 上 X-CTU 终端选项卡上的“组装数据包”按钮发送 16 字节数据包并正确接收吗？

NIBO2的串口一次请求可以处理16字节吗？如果您使用有线连接而不是无线连接，它是否有效？

# android - Android NativeActivity + 其他活动

> ID：13268372
> 
> 赞同：2
> 
> 时间：2012-11-07T11:02:31.977
> 
> 标签：android, android-ndk, android-activity

我有一个原生的android应用程序，那么入口main是android_main。我的问题：是否可以使用 NativeActivity 生成另一个活动？我必须只插入代码 java con android/src/com... 并在 androidmanifest.xml 上插入类？对不起，但我是“android”世界的新手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:03:49.427

在 Android 开发者页面有一些关于这个特性的理论，都是基于 Activity Stack 和管理它，查看 [http://developer.android.com/intl/es/guide/components/tasks-and-back-stack。 html](http://developer.android.com/intl/es/guide/components/tasks-and-back-stack.html)，也有一些描述性的图像。

欢迎来到安卓世界！:)

编辑：

```
Intent myIntent = new Intent(CurrentActivity.this, NextActivity.class);
CurrentActivity.this.startActivity(myIntent); 
```

# javascript - 通过 ajax 从 Servlet 检索值时，JavaScript 比较失败

> ID：13268376
> 
> 赞同：1
> 
> 时间：2012-11-07T11:02:37.710
> 
> 标签：javascript, ajax, servlets

使用该函数`storeSessionId()`，我检索了 storedSession 的值并使用 AJAX 从 servlet 分配给 sessionId。

```
 var storedSession;
   var sessionId;       

function storeSessionId(){
    try
    {
        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                storedSession = xmlhttp.responseText.toString();
                sessionIdValue(storedSession);

            }
        };
        xmlhttp.open("POST","JoinAction?subject="+subject+"&userId="+userId+"&secureKey="+secureKey,true);
        xmlhttp.send();
    }
    catch(err)
    {
        alert(err.description);
    }
} 
```

当我比较时，`sessionId!=null`只有我的 div 会显示，否则无法显示。

但即使我`sessionId==null`也得到了，我的 div 也被显示了。我的 div 在这两种情况下都显示。

```
function sessionIdValue(storedSession){
    sessionId = storedSession;
    if(sessionId != null && sessionId != "null"){
        document.getElementById("div").style.display="inline";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:05:28.280

很可能`sessionId`是一个空字符串`""`。尝试将条件更改为

```
if(sessionId && sessionId != "null") 
```

这只会检查空字符串不是的真实值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:10:52.743

您正在比较`sessionId != null`哪个不正确。

知道`alert(sessionId)`响应值。

尝试：

```
if(sessionId && sessionId != "null"){
 document.getElementById("div").style.display="inline";
} 
```

第一个条件检查是否`sessionId`不是`undefined`，然后检查`null`字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T09:06:32.087

解决方案是，

```
function trim(stringToTrim) {
    return stringToTrim.replace(/^\s+|\s+$/g, "");
} 
```

我将 sessionId 值传递给 trim()...

感谢所有帮助过我的人。。

# php - Mediawiki 与现有网站集成

> ID：13268379
> 
> 赞同：2
> 
> 时间：2012-11-07T11:02:44.187
> 
> 标签：php, mediawiki, mediawiki-api

大家好，我拥有一个完全包含视频内容的网站。我想做的是我必须将 mediawiki 页面与我的网站集成。我已经下载了 mediawiki 包并安装在我的系统中。现在我想使用我自己的站点播放器显示来自我站点的视频文件。但是网站的功能应该像 mediawiki 一样。这意味着如果任何用户访问我的页面并进行编辑，则意味着它应该保存在媒体 wiki 历史记录中。是否可以在我们的站点中使用媒体 wiki 功能。请建议我任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T18:42:05.920

您可以使用[MediaWiki API](https://www.mediawiki.org/wiki/API%3aMain_page)做到这一点。

[但是坚持包含来自 MediaWiki的渲染](https://www.mediawiki.org/w/index.php?action=render&title=MediaWiki)页面并将想要编辑的人发送到 MediaWiki会更容易，也可能更清洁。在包含渲染页面时，最好注意重复内容问题 (SEO)。

# java - 如何使用 DefaultCellEditor 使 JTable 的列仅获取数字并在点后用两个符号将它们四舍五入？

> ID：13268382
> 
> 赞同：0
> 
> 时间：2012-11-07T11:02:59.333
> 
> 标签：java, swing, jtable, tablecellrenderer, decimalformat

我不确定这是否是正确的方法，但我认为是的。我曾尝试使用 DecimalFormat 但我无法理解。有人能帮我吗？这是执行此 DefaultCellEditor + DecimalFormat 的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:19:34.693

*   通过使用覆盖[列类](https://stackoverflow.com/a/7392163/714968)`Double.Class`

*   for`XxxTableCellEditor`使用`JFormattedTextField`or`JSpinner`作为编辑器，由`NumberFormat`or的适当方法格式化`DecimalNumberFormat`，包括四舍五入

*   设置`DefaultTableCellRenderer`为所需的列

*   `Rounding method`您可以（也）正确设置`NumberFormat`

例如

```
TableColumnModel tcmAmount = myTable.getColumnModel();    
TableColumn tcAmount = tcmAmount.getColumn(2);
tcAmount.setCellRenderer(new DRManMmAmount(1)); // decimal precision 
```

和

```
 private static class DRManMmAmount extends DefaultTableCellRenderer {

        private static final long serialVersionUID = 1L;
        int precision = 0;
        Number numberValue;
        NumberFormat nf;

        public DRManMmAmount(int p_precision) {
            super();
            setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
            precision = p_precision;
            nf = NumberFormat.getNumberInstance();
            nf.setMinimumFractionDigits(p_precision);
            nf.setMaximumFractionDigits(p_precision);
            //nf.setMinimumFractionDigits(2);
            //nf.setMaximumFractionDigits(2);
        }

        @Override
        public void setValue(Object value) {
            if ((value != null) && (value instanceof Number)) {
                numberValue = (Number) value;
                value = nf.format(numberValue.doubleValue()); 
            }
            super.setValue(value);
        }
    } 
```

# javascript - Javascript setTimeout 函数重复

> ID：13268385
> 
> 赞同：2
> 
> 时间：2012-11-07T11:03:04.717
> 
> 标签：javascript, settimeout

有没有办法使用 setTimeout 函数在 Javascript 中重复一个函数？例如，我需要每五秒调用两个函数。我有这样的事情：

```
$(document).ready(function(){    
    setTimeout('shiftLeft(); showProducts();', 5000);    
}); 
```

但它只发生一次，在页面加载后五秒钟，我需要它每五秒钟发生一次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T11:05:18.207

如果您希望重复执行函数，请使用[`setInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)而不是。将函数的执行延迟 x 秒，而每 x 秒执行一次函数。`setTimeout()``setTimeout()``setInterval()`

^(两者都在 JavaScript 事件队列的边界内，所以不要太自信，你的函数会在你指定的确切时间执行)

```
$(document).ready(function(){    
    setInterval( function(){ shiftLeft(); showProducts(); }, 5000);    
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:05:06.210

每 x 秒可以通过以下方式完成`setInterval`：

```
$(document).ready(function(){    
  setInterval(function(){
    shiftLeft(); showProducts();
  }, 5000);    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:04:08.260

```
$(document).ready(function(){    
  setTimeout(function(){
    shiftLeft(); showProducts();
  }, 5000);    
}); 
```

# ussd - 交互式 USSD 会话的 SMSLib 示例

> ID：13268389
> 
> 赞同：2
> 
> 时间：2012-11-07T11:03:18.817
> 
> 标签：ussd, smslib

我有一个为用户提供交互式会话的 USSD 应用程序，例如：

```
User> Dial USSD Shortcode
Serv> Return Main Menu
User> Select Option 1, e.g. "View Movie Times"
Serv> Return List of Cities
User> Select Option 3, e.g. Mumbai
Serv> Return List of Cinemas
User> etc ... 
```

我想通过使用 SMSLib 来模拟用户来测试 USSD 服务器。

是否有任何示例 SMSLib 代码片段显示如何与 USSD 服务器执行交互式 USSD 会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:33:05.217

此[链接](http://code.google.com/p/smslib/issues/attachmentText?id=318&aid=-1267774050858280969&name=SendUSSD.java)中的代码给出了使用 smslib 发送和接收 USSD 数据的示例：

> ```
> // SendUSSD.java - Sample application.
> //
> // This application shows you the basic procedure for sending messages.
> // You will find how to send synchronous and asynchronous messages.
> //
> // For asynchronous dispatch, the example application sets a callback
> // notification, to see what's happened with messages.
> 
> package examples.modem;
> 
> import org.smslib.AGateway;
> import org.smslib.AGateway.Protocols;
> import org.smslib.IUSSDNotification;
> import org.smslib.Library;
> import org.smslib.Service;
> import org.smslib.USSDResponse;
> import org.smslib.modem.SerialModemGateway;
> 
> public class SendUSSD
> {
>         public void doIt() throws Exception
>         {
>                 Service srv;
>       USSDNotification ussdNotification = new USSDNotification();
>                 System.out.println("Example: Send USSD Command from a serial gsm modem.");
>                 System.out.println(Library.getLibraryDescription());
>                 System.out.println("Version: " + Library.getLibraryVersion());
>                 srv = new Service();
>                 SerialModemGateway gateway = new SerialModemGateway("modem.com1", "COM4", 19200, "Huawei", "E220");
>                 gateway.setProtocol(Protocols.PDU);
>       gateway.setInbound(true);
>                 gateway.setOutbound(true);
>                 gateway.setSimPin("0000");
>       srv.setUSSDNotification(ussdNotification);
>                 srv.addGateway(gateway);
>                 srv.startService();
>                 System.out.println();
>                 System.out.println("Modem Information:");
>                 System.out.println("  Manufacturer: " + gateway.getManufacturer());
>                 System.out.println("  Model: " + gateway.getModel());
>                 System.out.println("  Serial No: " + gateway.getSerialNo());
>                 System.out.println("  SIM IMSI: " + gateway.getImsi());
>                 System.out.println("  Signal Level: " + gateway.getSignalLevel() + "%");
>                 System.out.println("  Battery Level: " + gateway.getBatteryLevel() + "%");
>                 System.out.println();
> 
>       String resp = gateway.sendUSSDCommand("*888#"); // not working
> //      String resp = gateway.sendCustomATCommand("AT+CUSD=1,\"*888#\",15\r"); // working
>       System.out.println(resp);
> 
>       System.out.println("Now Sleeping - Hit <enter> to terminate.");
>                 System.in.read();
>                 srv.stopService();
>         }
> 
>    public class USSDNotification implements IUSSDNotification
>    {
>       public void process(AGateway gateway, USSDResponse response) {
>                         System.out.println("USSD handler called from Gateway: " + gateway.getGatewayId());
>                         System.out.println(response);
>       }
>    }
> 
>         public static void main(String args[])
>         {
>                 SendUSSD app = new SendUSSD();
>                 try
>                 {
>                         app.doIt();
>                 }
>                 catch (Exception e)
>                 {
>                         e.printStackTrace();
>                 }
>         }
> } 
> ```

# php - 使用互斥锁的 Linux 并发脚本

> ID：13268392
> 
> 赞同：6
> 
> 时间：2012-11-07T11:03:22.637
> 
> 标签：php, linux, shell, concurrency

在我的 Linux 服务器上，我需要同步多个用 BASH 和 PHP 编写的脚本，以便其中只有一个能够启动系统关键作业，这是一系列 BASH/PHP 命令，如果由两个或多个脚本同时执行。根据我在 C++ 中使用多线程的经验，我熟悉互斥锁的概念，但是如何为在不同进程中运行并且当然不是用 C++ 编写的一堆脚本实现互斥锁？

好吧，想到的第一个解决方案是确保每个脚本最初都创建一个“锁定标志”文件，让其他脚本知道该作业已“锁定”，然后在完成作业后删除该文件。但是，正如我所看到的，文件写入*和*读取操作必须是*完全原子*的，才能让这种方法以 100% 的概率起作用，并且同样的要求也适用于任何其他同步方法。而且我很确定文件写入/读取操作不是原子的，它们至少在所有现有的 Linux/Unix 系统中都不是原子的。

*那么同步并发 BASH和*PHP 脚本最灵活可靠的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T06:52:24.227

我不是 PHP 程序员，但文档说它提供了[`flock`](http://www.php.net/manual/en/function.flock.php)您可以使用的可移植版本。第一个示例片段看起来非常接近您想要的。尝试这个：

```
<?php

$fp = fopen("/tmp/lock.txt", "r+");

if (flock($fp, LOCK_EX)) {  // acquire an exclusive lock

    // Do your critical section here, while you hold the lock

    flock($fp, LOCK_UN);    // release the lock
} else {
    echo "Couldn't get the lock!";
}

fclose($fp);

?> 
```

请注意，默认情况下`flock`会等待直到它可以获取锁。`LOCK_EX | LOCK_NB`如果您希望它在程序的另一个副本已经在运行的情况下立即退出，您可以使用。

使用名称“/tmp/lock.txt”可能是一个安全漏洞（我不想想太多来决定它是否真的存在），因此您可能应该选择一个只能由您的程序写入的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:16:57.713

您可以使用[**flock**](http://linux.die.net/man/1/flock)以原子方式锁定您的标志文件。`-e`选项是获取排他锁。

从手册页：

> 默认情况下，如果不能立即获得锁，flock 会一直等待，直到锁可用。

因此，如果您所有的 bash/php 脚本都试图以独占方式锁定文件，那么只有一个可以成功获取它，其余脚本将等待锁定。

如果您不想等待，请使用`-w`超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T13:12:22.527

[Bash 中基于fuser](http://linux.die.net/man/1/fuser)的锁（它保证没有两个进程同时访问受保护的资源，但即使没有进程访问资源也可能导致负锁定尝试，尽管几乎不可能）：

```
#!/bin/bash
set -eu
function mutex {
 local file=$1 pid pids
 exec 8>>"$file"
 { pids=$(/sbin/fuser -f "$file"); } 2>&- 9>&-
 for pid in $pids; do
   [[ $pid = $$ ]] && continue
   exec 8>&-
   return 1 # locked by other pid
 done
} 
```

# z3 - 在 Z3 中避免使用量词

> ID：13268394
> 
> 赞同：9
> 
> 时间：2012-11-07T11:03:35.650
> 
> 标签：z3, smt, theorem-proving

我正在试验 Z3，我结合了算术、量词和相等的理论。这似乎不是很有效，事实上，在可能的情况下用所有实例化的地面实例替换量词似乎更有效。考虑以下示例，其中我为一个函数编码了唯一名称公理，该函数`f`接受两个 sort 参数`Obj`并返回一个解释的 sort `S`。这个公理表明每个唯一的参数列表都`f`返回一个唯一的对象：

```
(declare-datatypes () ((Obj o1 o2 o3 o4 o5 o6 o7 o8)))
(declare-sort S 0)

(declare-fun f (Obj Obj) S)
(assert (forall ((o11 Obj) (o12 Obj) (o21 Obj) (o22 Obj))
    (=> 
        (not (and (= o11 o21) (= o12 o22)))
        (not (= (f o11 o12) (f o21 o22)))))) 
```

尽管这是在逻辑中定义这样一个公理的标准方法，但像这样实现它在计算上是非常昂贵的。它包含 4 个量化变量，每个变量可以有 8 个值。这意味着这会导致`8^4 = 4096`平等。这需要 Z3 0.69s 和 2016 量词实例化来证明这一点。当我编写一个生成此公式实例的简单脚本时：

```
(assert (distinct (f o1 o1) (f o1 o2) .... (f o8 o7) (f o8 o8))) 
```

生成这些公理需要 0.002 秒，在 Z3 中证明它需要 0.01 秒（或更少）。当我们增加域中的对象或函数的参数数量时，`f`这种差异会迅速增加，量化的情况很快就会变得不可行。

这让我想知道：当我们有一个有界域时，为什么我们首先要在 Z3 中使用量词？我知道 SMT 使用启发式方法来寻找解决方案，但我觉得它仍然无法与一个简单的特定领域接地器在效率上竞争，后者将接地实例提供给 SMT，这只不过是 SAT 解决方案。我的直觉正确吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T14:42:55.003

你的直觉是正确的。Z3 中处理量词的启发式算法没有针对通用变量范围在有限/有界域上的问题进行调整。在这类问题中，仅当需要极小百分比的实例来表明问题不可满足时，才使用量词是一个不错的选择。

我通常建议用户应该使用编程 API 来扩展这个量词。这里有两个相关的帖子。它们包含指向实现此方法的 Python 代码的链接。

*   [与饱和结果相比，Z3 是否需要更长的时间才能给出未饱和结果？](https://stackoverflow.com/questions/12659098/does-z3-take-a-longer-time-to-give-an-unsat-result-compared-to-a-sat-result)

*   [量词与非量词](https://stackoverflow.com/questions/10011478/quantifier-vs-non-quantifier)

这是代码片段之一：

```
VFunctionAt = Function('VFunctionAt', IntSort(), IntSort(), IntSort())

s = Solver()
s.add([VFunctionAt(V,S) >= 0 for V in range(1, 5) for S in range(1, 9)])
print s 
```

在这个例子中，我本质上是在编码`forall V in [1,4] S in [1,8] VFunctionAt(V,S) >= 0`.

最后，您的编码`(assert (distinct (f o1 o1) (f o1 o2) .... (f o8 o7) (f o8 o8))`比将量词扩展 4096 倍更紧凑。但是，即使我们使用朴素编码（只需将量词扩展 4096 倍），求解扩展版本仍然更快。

# animated-gif - 通过 api 将视频转换为 gif 的服务

> ID：13268401
> 
> 赞同：9
> 
> 时间：2012-11-07T11:03:58.277
> 
> 标签：animated-gif, video-conversion

我一直在使用 Zencoder 的 api 将视频从一种格式转换为另一种格式，但我现在需要将视频转换为 Zencoder 输出格式中不包含的动画 gif。

任何人都知道能够做到这一点的服务，或者任何相对简单的后端库（理想情况下基于 php）可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-28T15:01:26.163

我认为由于难以大规模高效地运行这样的 Web 服务 (API)，很少有供应商提供通过 REST API 自动将视频转换为 GIF 的功能。

但是，我最近发现自己处于类似情况，做了一些研究，发现了两个可能为您完成这项工作的 API 产品：

1.  **[giflayer API](https://giflayer.com)**

    这是一个专门用于将视频转换为 GIF 动画的 REST API。它适用于门户网站的视频 URL`YouTube`和直接视频链接，如`http://website.com/video.mp4`.

    以下是您提出 API 请求的方式：

    ```
    https://apilayer.net/api/capture
       ? access_key = YOUR_ACCESS_KEY
       & url = https://www.youtube.com/watch?v=3W6hZR29l5o
       & start = 170
       & duration = 1.5 
    ```

    然后，几秒钟后，API 会根据请求中提供的参数直接返回您的 GIF 动画：

    [![在此处输入图像描述](../Images/39c320afe2a04bc81b373c022611205b.png)](https://i.stack.imgur.com/wwFHu.gif)

就是这样，现在还有第二个服务可能符合上述要求：

2.  **[gfycat](http://gfycat.com/about)**

    虽然他们不创建实际的 GIF，但他们通过转换为 HTML5 视频来补充它们，这在尺寸上更轻量级。如果您还不确定它是否是您需要的实际 GIF 转换，只需包含此链接即可。

希望我能帮上忙。

# php - 将大量数据从 XML 存储到 PDF 的 MYSQL 数据库

> ID：13268407
> 
> 赞同：1
> 
> 时间：2012-11-07T11:04:13.870
> 
> 标签：php, mysql, xml

我需要一个建议来使用 php 将 XML 数据转换为 pdf 格式。我想在单击下载链接时提供下载 pdf 的选项。

我有一个包含数千条记录的 XML 文件。我想将我的 XML 记录转换为 pdf 格式。以前，我曾经从 mysql 生成 pdf。我不知道如何使用 php 将我的 xml 数据直接转换为 pdf。

一种选择是逐个检索每个 XML 记录，然后使用 php 和 mysql 将其插入数据库。

**我的问题是：**

***如果我将解析 xml 记录并运行 mysql insert 语句*千次以将数千条记录存储到数据库中，效率会不会降低？**

此外，需要更多时间从数据库中检索这些记录以生成 pdf。有没有其他方法可以有效地处理这个问题？请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:20:15.777

这里最薄弱的环节是 XML 解析器——这通常是最慢和最消耗内存的过程，所以我会将 XML 导出到 MySQL 数据库，然后按需生成 PDF 报告。但这只有在您需要根据用户请求动态生成 PDF 时才有意义。否则最好将 XML 转换为 PDF 一次并将静态文件保存在服务器上。

PHP 世界中最流行的 PDF 引擎之一是[http://www.tcpdf.org/](http://www.tcpdf.org/)

# css - 处理 Retina 显示器的最佳方式是什么？

> ID：13268422
> 
> 赞同：0
> 
> 时间：2012-11-07T11:05:05.410
> 
> 标签：css, html, ipad

> **可能重复：**
> [如何为我的网站设置视网膜图形？](https://stackoverflow.com/questions/11060654/how-do-i-set-retina-graphics-for-my-website)

将 2x 图像添加到将在具有 Retina 图形的新 iPad 上显示的网页的最佳方法是什么？

我已经浏览了这些文章。

[http://www.kylejlarson.com/blog/2012/creating-retina-images-for-your-website/](http://www.kylejlarson.com/blog/2012/creating-retina-images-for-your-website/)

[http://www.teamdf.com/web/automatically-serve-retina-artwork/191/](http://www.teamdf.com/web/automatically-serve-retina-artwork/191/)

[http://retinajs.com/](http://retinajs.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:26:07.910

有各种建议的方法可以解决 Retina 显示器（和大显示屏等）的问题。不幸的是，其中大多数只是这些建议。

最流行的两个是添加标签的建议，它接受多个图像并且浏览器将仅加载一个（取决于开发人员指定的媒体查询）：

```
<picture alt="angry pirate">
   <source src=hires.png media="min-width:800px">
   <source src=midres.png media="min-width:480px">
   <source src=lores.png>
      <!-- fallback for browsers without support -->
      <img src=midres.png alt="angry pirate">
</picture> 
```

另一个建议是在图像上使用“srcset”为图像指定多个来源：

```
<img alt="Cat Dancing" src="small-1.jpg"
srcset="small-2.jpg 2x,  // this is pretty cool
large-2.jpg 100w,       // meh
large-2.jpg 100w 2x     // meh@2x
"> 
```

我个人认为这更丑陋（并且当浏览器决定要加载哪个图像时，它让您的控制更少）但据我了解，第二个解决方案已添加到官方规范中（以某种身份）

除了这些建议之外，当前唯一真正的解决方案是从原始尺寸的 2 倍（或 1.5 倍，具体取决于您的偏好）的图像开始

或许可以尝试并获得所有幻想并做一个 JavaScript 解决方案，但我认为这会使事情变得过于复杂......

下面是一篇非常好的文章，讨论了您描述的问题（我觉得我有点漫无边际！）： [http ://www.alistapart.com/articles/mo-pixels-mo-problems/](http://www.alistapart.com/articles/mo-pixels-mo-problems/)

# javascript - 删除 jQuery 中的 $(window).resize 事件

> ID：13268424
> 
> 赞同：44
> 
> 时间：2012-11-07T11:05:08.483
> 
> 标签：javascript, jquery, resize

我正在开发的部分页面需要在用户单击按钮时将 $(window).resize 事件添加到 div 中，以便在使用窗口调整窗口大小和将其固定为原始大小之间切换：

```
function startResize() {
    $(window).resize(function() {
        $("#content").width(newWidth);
        $("#content").height(newHeight);
    });
} 
```

我无法解决的是如何在再次单击按钮时“关闭”此事件，以便内容停止调整大小。

```
function endResize() {
    // Code to end $(window).resize function
    $("#content").width(originalWidth);
    $("#content").height(originalHeight);
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-11-07T11:05:59.753

```
function endResize() {
    $(window).off("resize");
    $("#content").width(originalWidth);
    $("#content").height(originalHeight);
} 
```

请注意，这是非常突兀的，可能会破坏其他代码。

这是更好的方法：

```
function resizer() {
    $("#content").width(newWidth);
    $("#content").height(newHeight);
}

function startResize() {
    $(window).resize(resizer);
}

function endResize() {
    $(window).off("resize", resizer);
} 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-12-20T00:29:44.760

```
function startResize() {
   $(window).on("resize.mymethod",(function() {
     $("#content").width(newWidth);
     $("#content").height(newHeight);
   }));
}

function endResize() {
   $(window).off("resize.mymethod");
} 
```

在查询方法上使用命名空间将允许只为您的方法关闭调整大小事件。

# xml - 如何在 php 中解析数组中的 KML 文件（用于谷歌地图）？

> ID：13268430
> 
> 赞同：0
> 
> 时间：2012-11-07T11:05:35.113
> 
> 标签：xml, maps, kml

我想解析 KML 文件并放入数组，以便我可以更好地访问它的元素。我需要在 php 中以 XML 方式解析它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:36:02.193

它会像：

```
function parseKML1(){
    $contents = file_get_contents('cotest.kml'); // filename
 $xml      = new SimpleXMLElement($contents);  //getting the contents
 $value    = (string)$xml->Document->Folder->Placemark->Polygon->outerBoundaryIs->LinearRing->coordinates; ///KML Structure
 $values   = explode(" ", trim($value));
 $coords   = array();
 foreach($values as $value) {    
    $args     = explode(",", $value);
    $coords[] = array($args[0], $args[1],$args[2]);
 }

 echo('<pre>');
 print_r($coords);  //printing the array

 } 
```

就是这样，我们将数据解析为php中的数组

```
<kml><Document><Folder><name>sql_statement</name><Schema name="sql_statement" id="sql_statement"></Schema><Placemark><name>Hall                                                                                      </name><ExtendedData></ExtendedData><Polygon><outerBoundaryIs><LinearRing><coordinates>-100.944938999999906,34.748280999999963,0 -100.84772799999989,34.748310999999966,0 -100.655293999999884,34.748058999999962,0 -100.600692999999907,34.747958999999966,0 -100.572734999999895,34.747869999999963,0 -100.555416999999892,34.747772999999967,0 -100.54070299999988,34.747722999999965,0 -100.523008999999888,34.747637999999966,0 -100.415894999999907,34.747524999999968,0 -100.415911999999906,34.590452999999961,0 -100.415797999999882,34.561719999999966,0 -100.415795999999887,34.561262999999961,0 -100.415880999999899,34.528678999999961,0 -100.415949999999896,34.517005999999967,0 -100.415949999999896,34.515623999999967,0 -100.41773099999989,34.362238999999967,0 -100.417782999999901,34.313523999999965,0 -100.498192999999901,34.313526999999965,0 -100.503372999999897,34.314078999999964,0 -100.517339999999891,34.314101999999963,0 -100.624037999999899,34.314191999999963,0 -100.625403999999904,34.313398999999961,0 -100.627353999999897,34.313391999999965,0 -100.672836999999888,34.313473999999964,0 -100.682781999999904,34.313389999999963,0 -100.693753999999885,34.313298999999965,0 -100.721133999999893,34.313324999999963,0 -100.723279999999903,34.313318999999964,0 -100.728890999999891,34.313304999999964,0 -100.766540999999904,34.313280999999968,0 -100.769850999999903,34.313256999999965,0 -100.897068999999888,34.312961999999963,0 -100.897904999999895,34.313171999999966,0 -100.897904999999895,34.313034999999964,0 -100.919962999999882,34.312879999999964,0 -100.946161999999887,34.312762999999961,0 -100.94604099999988,34.314444999999964,0 -100.946118999999882,34.333875999999961,0 -100.946152999999896,34.338639999999963,0 -100.946345999999892,34.370078999999961,0 -100.945927999999896,34.379509999999968,0 -100.945818999999901,34.386378999999963,0 -100.945465999999897,34.483357999999967,0 -100.945461999999893,34.484496999999962,0 -100.945575999999903,34.491797999999967,0 -100.9455379999999,34.492196999999962,0 -100.945423999999903,34.494767999999965,0 -100.945156999999895,34.622261999999964,0 -100.945175999999904,34.627944999999961,0 -100.945176999999887,34.630168999999967,0 -100.944938999999906,34.748280999999963,0</coordinates> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T10:07:14.263

For a KML file like this one :

```
<?xml version="1.0" encoding="UTF-8" ?>
<kml>
<Document>
    <Placemark>
        <name><![CDATA[wail]]></name>
        <Polygon>
            <extrude>1</extrude>
            <altitudeMode>relativeToGround</altitudeMode>
            <outerBoundaryIs>
                <LinearRing>
                    <coordinates>
                        1.2799072000000002,41.78769700000001
                        1.005249,40.8138092
                        3.7463379000000003,41.00477540000001
                        3.652954100000001,42.1185987
                        2.208252,42.45994040000001
                        1.2799072000000002,41.78769700000001
                    </coordinates>
                </LinearRing>
            </outerBoundaryIs>
        </Polygon>
    </Placemark>
</Document>
</kml> 
```

I use this function :

```
function kmlToArray($filePath)
{
    if (file_exists($filePath)) {
        $xml = simplexml_load_file($filePath);
        $value    = (string)$xml->Document->Placemark->Polygon->outerBoundaryIs->LinearRing->coordinates;
        $values   = explode("\n", trim($value));
        $coords   = array();
        foreach($values as $value) {   
            $value = trim(preg_replace('/\t+/', '', $value));
            $args     = explode(",", $value);
            array_push($coords,$args[0]." ".$args[1]);
        }
    } else {
        return 'Error : Failed to open the file';
    }
    return $coords;
} 
```

# c - 如何避免库查找 CMakeLists 功能

> ID：13268431
> 
> 赞同：0
> 
> 时间：2012-11-07T11:05:37.780
> 
> 标签：c, cmake, ftdi

我正在尝试根据我的需要调整第三人称代码。此代码随用于构建和安装它的 CMake 配置文件一起提供。有可能选择图书馆之一。并且在代码中经常使用`#ifdef USE_FTD2XX`指令。我看到这是在 CMamkeFiles.txt 文件中定义的，如下所示：

```
option(USE_FTD2XX "Use FTDI libFTD2XX instead of free libftdi" ON)

if(USE_FTD2XX)
  find_package(libFTD2XX)
endif(USE_FTD2XX)

if(LIBFTD2XX_FOUND)
  include_directories(${LIBFTD2XX_INCLUDE_DIR})
  add_definitions( -DUSE_FTD2XX )
else(LIBFTD2XX_FOUND)
  set(LIBFTD2XX_LIBRARIES "")
endif(LIBFTD2XX_FOUND) 
```

但是，如果我只是使用 *.c 和 *.cpp 文件并从 IDE（代码块）中分析和运行它，我如何在 C++ 代码中而不是在 CMake 中设置使用这个库？我也确定我想一直使用这个，以便修复它。

我应该简单地`#define USE_FTD2XX`放在主文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:43:18.250

您不能仅仅`#define USE_FTD2XX`因为您还需要特定的链接器选项才能使其工作（即要链接的库）。如果`option`在`OFF`cmake 中，特定的链接选项将不会出现在 中，`Makefile`并且很可能会出现链接器错误。

所以 CMake 会自动为您处理所有事情，但是每次您想要打开/关闭选项时，您都需要重新生成您的 makefile。

如果仅涉及标头并且没有要链接的库（例如 Boost 框架的某些部分），那么是的，`USE_FTD2XX`在您的定义中就足够了。

# phpmailer - PHPmailer 类返回 true，但未发送电子邮件

> ID：13268432
> 
> 赞同：6
> 
> 时间：2012-11-07T11:05:40.277
> 
> 标签：phpmailer, php

我正在尝试通过以下方式发送电子邮件 -

```
from : xyz@domain1.com  
reply-to : xyz@domain1.com  
to : abc@domain2.com  
cc : abc@domain3.com 
```

我的电子邮件正在发送到抄送中提到的地址（如果我将电子邮件替换为和抄送，则电子邮件将发送到中提到的地址）

出于某种原因，电子邮件没有发送到地址 abc@domain2.com。如果我使用 Outlook 或 gmail 手动将电子邮件发送到此地址，则实际上已发送电子邮件。我该如何调试这个问题？

我也检查了垃圾邮件/垃圾目录，那里没有电子邮件。我尝试使用 php mail() 函数以及 phpmailer 类。它们都返回 TRUE。可能是什么原因？请帮忙。

```
$mail->From = "xyz@domain1.com";   
$mail->AddReplyTo("xyz@domain1.com");  
$mail->AddAddress("abc@domain2.com");  
$mail->AddCC("abc@domain3.com");  
$mail->Subject = $subject;  
$mail->Body = $message;  

if(! $mail->Send()) {  
    echo "Message was not sent";  
    echo "Mailer Error: " . $mail->ErrorInfo;  
    exit; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:31:00.480

```
Try to set cofigurations beffore send (Gmail config):

    $mail = new Mailer();
    $mail->SMTPDebug = true;
    $mail->SMTPAuth = true;
    $mail->CharSet = 'utf-8';
    $mail->SMTPSecure = 'ssl';
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = '465';
    $mail->Username = 'your login here';
    $mail->Password = 'your password here';
    $mail->Mailer = 'smtp';
    $mail->From = 'form mail address';
    $mail->FromName = 'from name';
    $mail->Sender = 'form mail';
    $mail->Priority = 3;

    $mail->AddAddress('mail', 'admin name');
    $mail->AddReplyTo('replay to', 'admin name');
    $mail->Subject = 'subject';
    $mail->Body = 'some HTML message here';
    $mail->IsHTML(true);
    if(!$this->Send()) {
        print_r('error: '. $mail->ErrorInfo); // Show errors   
 }
    $mail->ClearAddresses();
    $mail->ClearAttachments(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-20T17:32:20.450

如果您从一个电子邮件地址发送电子邮件，但针对不同的电子邮件地址（或域）进行身份验证，也会发生这种情况

> 将 $mail.setFrom() 设置为您对其进行身份验证的同一电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:07:45.227

检查您的服务器是否可以大声发送电子邮件 在我使用 plesk 的情况下，我也遇到了同样的情况，由于某种原因，我无法发送和发送电子邮件，直到我收到并发送电子邮件我更改了此配置并正常工作检查您是否使用发送邮件o qmail 如果是 qmail 你必须告诉 php mailer

# php - 自动处理 Symfony Bundle 资源

> ID：13268434
> 
> 赞同：1
> 
> 时间：2012-11-07T11:05:56.133
> 
> 标签：php, xml, symfony, xsd

我正在开发一个 XML 验证服务，该服务使用多个 XML 模式文件来验证我的应用程序中的 XML 文件。XML Schema 文件大量使用导入。出于这个原因，我需要一个服务，它将命名空间与它们的模式定义（文件位置）相关联。

每个 XML 命名空间都在单独的 XSD 中定义。

我知道我可以使用*schemaLocation*属性将模式与其文件连接起来，但这需要使用大量相对路径，并且不适用于任意项目结构：

```
<-- schema.xsd -->
<xsd:import namespace="urn.my.namespace" schemaLocation="..."/>

<-- actual.xml -->
<root xmlns="urn.my.namespace"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn.my.namespace schema.xsd">
</root> 
```

我想创建一个服务，它遍历捆绑包，发现 xsd 文件并将它们的名称空间 - 文件位置关联注册到某种可用于其他 XML 服务的注册表中。

我的 Symfony 项目具有以下结构：

```
AbcBundle/
    Resources/config/services.xml
    Resources/xsd/
        schema.xsd
        ns1.xsd
        ns2.xsd
        ...
    AbcBundle.php
XyzBundle/
    [same structre] 
```

计划使用：

```
$nsLocator = $container->get('xml.ns_locator');
$nsLocator->getNamespaceMap();
/* returns array(
    'urn:my:ns1' => '/realpath/to/ns1.xsd',
    'urn:my:ns2' => '/otherpath/to/ns2.xsd',
*/ 
```

*$nsLocator*应该从 Bundle/Resources/xsd/ 目录中自动构建该映射。我喜欢 Symfony 使用其堆栈注册 Bundle/Command 或 Bundle/Controller 的方式。

我正在考虑某种事件侦听器，它会挂接到内核中，一旦注册了所有 Bundle，它就会扫描所有 XSD 并创建一个映射。如果这样做，它将需要缓存，因此它不会在每次执行新请求或命令时重新扫描所有文件。

如何构建该组件并将其连接到内核中？该组件的正确连接点在哪里？它通常是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:47:20.900

您应该能够创建一个编译器通道，该通道将在构建容器时运行（在主通道之后）。

在传递过程中，获取捆绑包列表并遍历它们以创建 xsd 文件列表。最后，将列表传递给您的服务。

要获取捆绑包列表：

```
$container->getParameter('kernel.bundles') 
```

阅读更多：

*   [如何使用编译器通行证](http://symfony.com/doc/master/cookbook/service_container/compiler_passes.html)
*   [创建编译器通行证](http://symfony.com/doc/current/components/dependency_injection/tags.html#create-a-compilerpass)
*   [编译容器](http://symfony.com/doc/current/components/dependency_injection/compilation.html)
*   [容器构建工作流程](http://symfony.com/doc/current/components/dependency_injection/workflow.html)

# android - 从android中的主线程连接到互联网

> ID：13268438
> 
> 赞同：0
> 
> 时间：2012-11-07T11:06:02.780
> 
> 标签：android, thread-safety, android-asynctask

我需要在我的应用程序的第二个活动的 oncreate 方法中从互联网下载图像。我知道在主线程上访问互联网会导致 android.os.NetworkOnMainThreadException 在 3.x 和更高版本上。我可以从后台线程启动该活动，而不是在第二个活动的后台线程中下载图像吗？我的意思是，我可以在 AsyncTask 类的 doInbackground() 方法中使用下面的行吗？

```
 startActivity(new Intent(FirstActivity.this, SecondActivity.class)); 
```

它可以在 3.x 上运行吗？还是会给出同样的例外？

我没有 3.x 设备。对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:09:16.773

不，但你可以在`onPostExecute`你的任务方法中使用它..

```
protected void onPostExecute() {
   startActivity(new Intent(FirstActivity.this, SecondActivity.class)); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:13:34.470

您可以做的是正常启动第二个活动，然后在您的第二个活动的 onCreate() 方法中，启动一个 AsyncTask，该任务在 doInBackground 中下载图像，然后在 onPostExecute 方法中显示图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:11:32.370

在显示您的活动之前，您绝对*需要*下载图像吗？如果没有，特别是如果活动中除了查看和操作图像之外还有其他事情要做，请在背景中使用 加载图像`AsyncTask`，并显示占位符图像或微调器等。

# c# - 在 edmx 建模 Db 中获取扩展属性

> ID：13268446
> 
> 赞同：2
> 
> 时间：2012-11-07T11:06:33.100
> 
> 标签：c#, sql-server, entity-framework, extended-properties

我有一个实体框架的数据库建模。我需要通过与我的 Db 关联的对象上下文来读取每个表的扩展属性。我能怎么做？

提前致谢

# php - jquery搜索和替换

> ID：13268447
> 
> 赞同：3
> 
> 时间：2012-11-07T11:06:33.727
> 
> 标签：php, jquery, html, smarty

这是我拥有的功能

```
function set(sub) {
    var input = prompt("Insert your desired " + sub + " information, leave blank if you use an automated system to generate this information.");
    $('#' + sub).html(input).show();
    var textarea = $('textarea');
    textarea.html(textarea.html().replace(sub+"=",sub+"="+input));
} 
```

通常 sub 是 s1，或 s2，或 s3。现在的问题是，如果输入为空白，我希望重置替换值。

所以假设我输入我想将 s1 设置为等于 a，因此在文本区域中它将替换 s1= 为 s1=a，现在如果输入为空，我希望 s1=a 恢复为 s1=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:02:04.700

这个怎么样？它使用正则表达式 (Regex) 进行替换。

```
function set(sub) {
    var input = prompt("Insert your desired " + sub + " information, leave blank if you use an automated system to generate this information.");
    $('#' + sub).html(input).show();

    var pattern = new RegExp('(' + sub + '=[^&]*)', 'ig');    
    var $textarea = $('textarea');

    // Do Replacements
    var content = $textarea.html().replace(pattern, sub + '=' + input);
    $textarea.html(content);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:08:19.997

您可以将 html 替换为以下内容：

```
$(selector).html(function(i, orig) {
    return orig.replace("1234", "5678");
}); 
```

# drupal - Drupal - 如何判断节点是否已通过 UI 表单更新，而不是以编程方式？

> ID：13268455
> 
> 赞同：2
> 
> 时间：2012-11-07T11:06:56.110
> 
> 标签：drupal, drupal-7, drupal-modules

我正在使用 node_save 从 Web 服务导入/更新节点。我想要实现的一项功能是，当导入的节点在本地更改时，它不应该从 Web 服务接收任何进一步的更新。

所以，我想要实现的是：

*   检测节点何时更新
*   如果更新是由提交表单的用户执行的（与以编程方式相反）
*   然后标记该节点不应从 Web 服务接收进一步的更新（我不需要这部分的任何帮助）

我想使用 hook_node_update 但我不确定如何判断更新是否由提交表单的用户执行。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:43:35.910

在用户创建节点期间（初始设置）：为节点创建一个隐藏字段，默认值设置为“**用户提交**”。由于它是一个隐藏字段，它在节点编辑表单中不可用，但它仍然会带有默认值。

用户更新节点：使用 hook_form_alter 将隐藏输入的值设置为“**用户提交**”。

在使用 webservice 创建/更新节点期间：创建节点时，以编程方式使用“**由 webservice 提交**”更新隐藏字段值。

现在在 hook_node_update 中，您可以检查此隐藏字段值并做出相应决定。

# ocean - PIP 构建不包含其他 dll

> ID：13268459
> 
> 赞同：0
> 
> 时间：2012-11-07T11:07:18.447
> 
> 标签：ocean, petrel

当进行 PIP 构建时，它将在解决方案中复制来自 DeployList.xml 的其他项目输出，但对于此解决方案之外的不同项目，我只在 dll 中复制。但是它不喜欢这样并引发错误：

忽略 C:\Test.dll，因为它无法正确加载，原因是：尝试加载格式不正确的程序。（HRESULT 异常：0x8007000B） 来源：Slb.Ocean.Core

我还包含了其他文件，它可以很好地复制它们。似乎只是dll和exe的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:44:43.603

如果您尝试添加的 .dll 是本机 DLL（没有托管标头），则 PluginPackager 会显示您提供的警告消息，例如尝试添加 Inventor.dll 时的警告消息：

*忽略 D:\Program Files\Schlumberger\Petrel 2012\Extensions\OceanLab\Inventor.dll，因为它无法正确加载，原因是：尝试加载格式不正确的程序。（HRESULT 异常：0x8007000B） 来源：Slb.Ocean.Core*

[虽然您永远不需要包含任何属于 Petrel 的 .dll，但这只是一个示例]

但是，这些消息不会阻止 .PIP 构建，也不会阻止引用的本机 .dll 包含在生成的 .PIP 文件中。

记录了一项增强要求以清除这些误导性消息。

# c# - PushSharp：收到没有推送消息的Android GCM推送通知

> ID：13268460
> 
> 赞同：3
> 
> 时间：2012-11-07T11:07:18.980
> 
> 标签：c#, push-notification, google-cloud-messaging

我正在使用 PushSharp 库从我的应用程序发送推送通知。

```
PushService push = new PushService();
var reg_id_d = "APA91bETd-LsqnZjA-HKrnBOY3FbEhmWchpiwuhRkiv4gUdGDuvwDRB7YURICZ131XppDAUNUBLGe_vEPkQ-JR8UaVX7Y-NCkEfastCBLIYcUoFtt5cPafeKXHywi0WGDYW33ZQqr3oy";
var project_id_d = "482885626272";
var api_key_d = "AIzaSyAbh7R5KQR3KM7W_y-yS-Ao-JNiihNz7tE"; // "AIzaSyDcKfuW77GTwA46L6sqD41YhGf2j5S8o2w";
var package_name_d = "com.get.deviceid";

push.StartGoogleCloudMessagingPushService(new GcmPushChannelSettings(project_id_d, api_key_d, package_name_d));
push.QueueNotification(NotificationFactory.AndroidGcm()
                .ForDeviceRegistrationId(reg_id_d)
                .WithCollapseKey("NONE")
                .WithJson("{\"alert\":\"Alert Text!\",\"badge\":\"1\"}")); 
```

我在我的设备上收到通知，但消息为空白..

我尝试使用 C# 中可用的服务器代码发送 GCM 推送通知，但遇到同样的问题，即出现空白消息。

我尝试使用 PHP 发送通知。它按预期工作。所以，我不确定我上面的代码有什么问题。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T19:32:39.977

我尝试使用周围可用的不同代码..但这些都不起作用..

最后我尝试了[https://stackoverflow.com/a/11651066/1005741](https://stackoverflow.com/a/11651066/1005741)它就像一个魅力！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T15:02:02.353

我遇到了同样的问题，我收到一条空消息。我的代码有点不同，我使用了不同的库：客户端用 phonegap pushPlugin 包装，服务器代码如下：

```
...
// com.google.android.gcm.server.Sender.Sender(String key)‬
gcmSender = new Sender(androidAPIkey);
// com.google.android.gcm.server.Message
Message message = new Message.Builder().addData("alert", "test message" /*notif.getAlert()*/).build();
Result result = gcmSender.sendNoRetry(message, /* device token */ notif.getToken());
nr.add(result, notif.getToken());
... 
```

我的消息为空的原因是 phonegap 在解析意图中的附加内容时会查找 "message" 、 "msgcnt" 或 "soundname" 。所以，这就是我的解决方案：

```
Message message = new Message.Builder().addData("message", notif.getAlert()).build(); 
```

希望这会对某人有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T05:15:34.230

**将警报**更改为**消息**，请参阅下面的代码以供参考：

```
 ////---------------------------
        //// ANDROID GCM NOTIFICATIONS
        ////---------------------------
        ////Configure and start Android GCM
        ////IMPORTANT: The API KEY comes from your Google APIs Console App, under the API Access section, 
        ////  by choosing 'Create new Server key...'
        ////  You must ensure the 'Google Cloud Messaging for Android' service is enabled in your APIs Console
        push.RegisterGcmService(new GcmPushChannelSettings("senderid", "apikey", "com.xx.m"));
        //Fluent construction of an Android GCM Notification
        //IMPORTANT: For Android you MUST use your own RegistrationId here that gets generated within your Android app itself!
        push.QueueNotification(new GcmNotification().ForDeviceRegistrationId("regid")
                              .WithCollapseKey("score_update")
            .WithJson("{\"message\":\"syy!\",\"badge\":7,\"sound\":\"sound.caf\"}")
            .WithTimeToLive(108)
            ); 
```

# asp.net-mvc-4 - ASP.NET MVC 4 Razor 视图无法识别 HTML Helper 的下拉列表

> ID：13268462
> 
> 赞同：6
> 
> 时间：2012-11-07T11:07:44.240
> 
> 标签：asp.net-mvc-4, razor-2

我正在尝试将下拉列表添加到强类型剃刀视图中。ASP.Net MVC 4.0，Razor View 引擎版本 2.0.0.0

```
@using System;
@model SampleApp.Models.ServiceRequestModel

@{
  ViewBag.Title = "ServiceRequest";
}

@Html.DropDownListFor(m=>m.CategoryID, Model.Categories) 
```

型号如下：

```
public class ServiceRequestModel
{
    public int ID { get; set; }
    public int CategoryID { get; set; }

    public SelectList Category { get; set; }
} 
```

它总是在 CSHTML 文件中显示智能感知错误，如下所示：

> System.Web.WebPages.Html.HtmlHelper'不包含'DropDownListFor'的定义，并且没有扩展方法'DropDownListFor'接受'System.Web.WebPages.Html.HtmlHelper'类型的第一个参数（你错过了吗？ using 指令或程序集引用？）

而且它也给出了错误：

> 错误 3 当前上下文中不存在名称“模型”

我检查了 View 文件夹中的 web.config：

```
<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
  </namespaces>
</pages> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:49:27.933

下面的配置代码行必须更改为 4.0.0.0

```
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, **Version=3.0.0.0**, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

**变成**

```
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, **Version=4.0.0.0**, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T03:29:13.727

我在这个错误上花了一天多的时间，它最终成为与下拉列表的 VM 数据源的数据类型冲突（即它不是 IEnumerable 类型的列表）。出于某种原因，VS2012 认为错误出在命名空间上，即使它出现在 Intellipath 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T01:18:48.220

我有这个确切的问题（仅与 html.displayFor）。

我不确定它是如何开始的，但我通过替换以下内容解决了它：

```
<appSettings>
    <add key="webpages:Enabled" value="false" />
</appSettings> 
```

和

```
<appSettings>
    <add key="webpages:Version" value="3.0.0.0" />
</appSettings> 
```

在 View 文件夹的 Web.config 文件中。

[在这里](https://www.devexpress.com/Support/Center/Question/Details/KA18612)找到我的解决方案

# firefox - Firefox：如何在两个单独的窗口中运行 HTML 文件

> ID：13268464
> 
> 赞同：0
> 
> 时间：2012-11-07T11:07:43.510
> 
> 标签：firefox, browser

我有两个 HTML 文件，当我点击这些 HTML 文件时，它们在 Mozilla Firefox 的同一个窗口中运行

是否可以在 Firefox 的两个窗口中分别运行它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:09:57.670

单击并将其中一个选项卡拖离窗口。这将为该选项卡创建一个新窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:12:23.390

要在新窗口而不是新选项卡中打开文件系统上的文件，请转到*Firefox* >*选项*>*选项卡*并取消选中*在新选项卡中打开新窗口*。

如果您尝试从网页链接执行此操作，[则](http://jsfiddle.net/68jd2/1/)应该可以使用以下方法：

```
link.onclick=function(evt){
    window.open('http://example.com','windowName','menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes,toolbar=yes,personalbar=yes');

    evt.preventDefault();
} 
```

您可以在 Mozilla Developer wiki找到有关[window.open的更多信息。](https://developer.mozilla.org/docs/DOM/window.open)

# git - 使用版本控制管理 ini 文件

> ID：13268465
> 
> 赞同：1
> 
> 时间：2012-11-07T11:07:46.003
> 
> 标签：git, unix

我正在寻找一种智能方法来管理对 php.ini 和 httpd.conf 等配置文件的更改，这些更改都是我自己进行的，以及由它们所属软件的版本更新强制执行的更改。

现在，工作流程是这样的：

1.  生鲜系统
2.  编辑ini文件
3.  安装新的软件版本或操作系统
4.  手动将我自己的 ini 文件与新的新 ini 文件结合起来（无聊！）

难道不能为此使用版本控制吗？为软件开发人员创建一个分支，为我创建一个分支，并使用合并来优雅地将他们的更改与我的更改合并，从而导致我们都更改了某些内容的冲突？

我想知道是否有人可以提出使用 git 的好方法的具体示例。或者其他更好的方法来优雅地做到这一点。

（我还有一个名为 ~/ln/ 的文件夹，我在其中符号链接到我在 UNIX 中编辑的所有不同的 ini 文件，因为它们出现在完全不同的位置。这样它们也可以自动备份。如果一个版本控制系统可以考虑到这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:27:26.163

我通常在单个目录中跟踪我的（用户）配置以及可以“填充”主目录的脚本 - 通过创建符号链接或将文件硬复制到正确的位置。我看不出有什么可以阻止你在系统范围内做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:41:20.587

有一个名为[etckeeper](http://joeyh.name/code/etckeeper/)的项目旨在做到这一点。

# android - 将软键盘的下一个按钮更改为搜索

> ID：13268469
> 
> 赞同：0
> 
> 时间：2012-11-07T11:08:16.493
> 
> 标签：android

我想将虚拟键盘的下一个按钮更改为搜索按钮，有没有办法将该下一个按钮的文本更改为搜索按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:09:43.083

尝试这个。

```
android:imeOptions="actionSearch" 
```

**在哪里写？**

```
<EditText
        android:id="@+id/editTextSearch"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:imeOptions="actionSearch"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:11:37.823

```
 <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:imeOptions="actionSearch" //ADD THIS LINE TO YOUR REQUIRED EDITTEXT
        android:inputType="textPassword" >

        <requestFocus />
    </EditText> 
```

# php - 抓取页面并将内部链接与外部链接分开

> ID：13268472
> 
> 赞同：1
> 
> 时间：2012-11-07T11:08:25.950
> 
> 标签：php, dom, web-scraping

构建一个小 PHP**刮板**，我正在编写一个小函数，它应该分隔我的内部和外部链接，

我正在向函数传递 html 源代码的副本以及基本主机地址

```
$source = file_get_contents('http://www.example.com');
$host   = "mysite.com"; 
```

到目前为止，这是我的功能...

```
function find_page_links($source, $host){

    if($source){

    $htmlDoc = new DomDocument();
    @$htmlDoc->loadhtml($source);

    $int_links = array();
    $ext_links = array();

    // GET LINKS
    foreach($htmlDoc->getElementsByTagName('a') as $link) {

        $url   = trim($link->getAttribute('href'));
        $title = trim($link->getAttribute('title'));
        $text  = trim($link->nodeValue);
        $rel   = trim($link->getAttribute('rel'));

        $pos = strpos($url,$host);

        if( $pos === false ){ // NO MATCH EXTERNAL              
            if( (substr($url, 0, 1) == '/') || 
                        (substr($url, 0, 1) == '#') )
                    {
            // INTERNAL
            $int_links[] = array( 'link_url' => $url, 
                                          'link_text' => $text, 
                                          'link_title' => $title, 
                                          'link_rel' => $rel 
                                        );
            }else{
            // EXTERNAL
            $ext_links[] = array( 'link_url' => $url, 
                                          'link_text' => $text, 
                                          'link_title' => $title, 
                                          'link_rel' => $rel 
                                        );
            }
        }else{
             if( $pos < 20 ){
             // INTERNAL
             $int_links[] = array( 'link_url' => $url, 
                                       'link_text' => $text, 
                                       'link_title' => $title, 
                                       'link_rel' => $rel );
             }else{
             // EXTERNAL
             $ext_links[] = array( 'link_url' => $url, 
                                         'link_text' => $text, 
                                         'link_title' => $title, 
                                         'link_rel' => $rel 
                                        );  
             }
        } // end else
    } // end foreach

    $content = array();
    $content['int_links'] = $int_links;
    $content['ext_links'] = $ext_links;

    return $content ;
  }
} 
```

所以发生的事情是函数通过 DomDocument 加载 HTML 我创建了 2 个数组来存储内部和外部

循环遍历文档并 getElementsByTagName('a')

然后它使用 strpos 检查主机地址“example.com”是否在链接 URL 中，如果没有匹配/错误，那么它是外部的，但我们会进一步检查以确保链接 URL 不以正斜杠开头，即：“ **/contact-us.php** ”这意味着它是一个内部的，同样在检查中我们检查开头的“ **#** ”标签，这将是页面上的锚链接......

所以那是 IF pos === false / no match now 如果主机在链接 URL 中它是匹配的，我会再次检查主机的位置是否在字符串中较低，这将是内部的，即： [http ://example.com/about/](http://example.com/about/)

但如果位置大于 20（只是从空中提取的一个数字），那么.. 就像 google plus 链接或 facebook 链接一样，主机 url 将出现在链接中，但沿着字符串更远，这意味着它是外部的，

即：[http ://www.facebook.com/plugins/like.php?href=http://example.com/](http://www.facebook.com/plugins/like.php?href=http://example.com/)

呸...

如果你们有任何其他更好的方法来发现外部或内部链接，请告诉我..我的结果，真的因站点而异，如果链接使用完整路径，

# google-drive-api - 使用 Google Drive API，一个唯一的文件夹被多次列出

> ID：13268476
> 
> 赞同：0
> 
> 时间：2012-11-07T11:08:39.423
> 
> 标签：google-drive-api

我正在使用 Google Drive API 列出我的 Google Drive 文件，我发现我的根目录中的一个文件夹被 API 列出了 3 次。

文件夹名称（标题）相同，但 ID 不同。修改日期也不同。

这是我经常在我的物理驱动器中覆盖（通常每天一次）的文件夹（不使用 API）。

有谁知道为什么会发生这种情况以及我该如何解决？我唯一的想法是检查所有具有相同标题（文件名）的文件，并且只保留最新的（根据修改日期），但这似乎是我不应该做的事情。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:35:34.737

如果 ID 不同，那么您只需 3 个同名文件。这在云端硬盘中是完全合法的。您可能已经删除了之前的两个版本，但您的查询不包含“trashed=false”，因此您在列表中看到了已删除的文件。

# jquery - 在父元素中定位元素

> ID：13268478
> 
> 赞同：0
> 
> 时间：2012-11-07T11:08:42.610
> 
> 标签：jquery, jquery-ui, jquery-selectors, jquery-ui-sortable

我有以下脚本，它将一些按钮（现在是假按钮）添加到 div：

```
$("<div class='divButtons'>").appendTo( $(this).closest(".widget").find(".widget_header") );
// not real buttons, just text at the moment.  Trying to get the position right first.
$(".divButtons").text("(close), (min), (max), (help)").css({background:"red",float:"right"}); 
```

问题是，我不知道如何让 的右上角将`divButtons`自己定位到 parent 的右上角`.widget_header`。我试过添加`top:some_number_here`，但是用 jQueries 移动 div 时效果不佳`ui-sortable`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:13:39.463

您不必通过 javascript 指定样式属性，尝试在 .css 文件中添加类似这样的内容：

```
.widget_header {
    position: relative;
}

.your-top-right-corner-class {
    position: absolute;
    top: 0;
    right: 0;
} 
```

# javascript - 递归函数完成后退出 node.js

> ID：13268479
> 
> 赞同：0
> 
> 时间：2012-11-07T11:08:48.670
> 
> 标签：javascript, node.js, asynchronous, recursion, callback

我尝试重新连接我的大脑以进行异步编码，但我仍然似乎仍然失败。不幸的是，在这种情况下，我无法弄清楚如何正确地做到这一点。让我举个例子吧：

```
var nconf = require('nconf');

 nconf.argv()
 .env();

 function runme(callback){
   var nummessages = nconf.get('SMS_MESSAGES');
   decodemessage(0, nummessages);
   callback();
 }

 function decodemessage(i, nummessages) {
  if( i < nummessages ) {
    var message = 'SMS_'+(i+1)+'_TEXT';
    var number = 'SMS_'+(i+1)+'_NUMBER';
    console.log('number: '+number);
    console.log('message: '+message);
    console.log('message text: '+ nconf.get(message));
    console.log('message number: '+ nconf.get(number));
    decodemessage(i+1);
  }
} 

runme(function(){
  process.exit(0);
}); 
```

这由 gammu-smsd 调用，它接收 SMS 消息并将它们放入 ENV vars 并启动脚本。只要我自己运行它就可以正常工作，返回代码似乎也可以。当我从 gammu-smsd 运行它时，它失败了，看起来 decodemessage 从未执行过。一些调试输出显示我确实进入了 runme()。

我的猜测是 runme() 中的回调在递归 decodemessage() 调用完成之前执行。我是对的，如果是这样，有人可以解释我如何正确地做到这一点吗？

如果你想像这样测试运行它：

```
node server.js --SMS_MESSAGES 2 --SMS_1_TEXT blabliblo --SMS_1_NUMBER=47796546546 --SMS_2_TEXT Iammessagetwo --SMS_2_NUMBER 12345678 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:26:36.317

好像你忘了`nummessages`在你的递归调用中传递：

```
decodemessage(i+1, nummessages); 
```

这就是为什么我个人在使用递归时大多向后循环（到零）。

# java - 使用条件在活动之间传递数据

> ID：13268481
> 
> 赞同：1
> 
> 时间：2012-11-07T11:08:48.937
> 
> 标签：java, android, android-intent

我成功地尝试在三个活动之间传递数据。那是 ：

> (Data3)Activity1(Data1)-->(Data1)Activity2(Data2)-->(Data2)Activity3)

现在的问题是：

1.  我想使用条件在这些活动之间传递数据。那是在Activity2中，在向Activity3发送数据之前我想检查一下

> ```
> WORD = "word building"
> DROP = "word built"
> 
> if  WORD FROM EDITTEXT == WORD
>       pass data to Activity1 AND
>       goto Activity1
> else 
>       if WORD FROM EDITTEXT == DROP
>           pass data to Activity3 AND
>           goto Activity3 
> ```

这是名为 PickCard.java 的 Activity1 的代码

```
public class PickCard extends Activity {

    String card = "Card Picked";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        displayIntentData();

        findViewById(R.id.sendButton).setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent intent = new Intent(PickCard.this, BuildWord.class);
                intent.putExtra("key", card);
                startActivity(intent);
            }
        });
    }

    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        setIntent(intent);//must store the new intent unless getIntent() will return the old one
        displayIntentData();
    }

    private void displayIntentData() {
        Intent intent = getIntent();
        TextView tv = (TextView) findViewById(R.id.intentData);
        Bundle extras = intent.getExtras();

        if (extras != null) {
            tv.setText("Data received: " + extras.getString("key"));
        } else {
            tv.setText("No extradata received");
        }
    }
} 
```

这是 Activity2 BuildWord.java 的代码

```
public class BuildWord extends Activity {

    String word = "Word Building";
    String finished = "Word Built";
    EditText simulate = (EditText) findViewById(R.id.dataToSend);
    String getdata = simulate.getText().toString();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.buildword);

        displayIntentData();

        if (getdata == word) {
            findViewById(R.id.sendButton1).setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Intent intent = new Intent(BuildWord.this, MainActivity.class);
                    intent.putExtra("key", getdata);
                    startActivity(intent);

                }
            });
        } else {
            findViewById(R.id.sendButton1).setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Intent intent = new Intent(BuildWord.this, DropCard.class);
                    intent.putExtra("key", finished);
                    startActivity(intent);
                }
            });
        }
    }

    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        setIntent(intent);
        displayIntentData();
    }

    private void displayIntentData() {
        Intent intent = getIntent();
        TextView tv = (TextView) findViewById(R.id.intentData1);
        Bundle extras = intent.getExtras();

        if (extras != null) {
            tv.setText("Data received: " + extras.getString("key"));
        } else {
            tv.setText("No extradata received");
        }
    }
} 
```

这是名为 DropCard.java 的 Activity3 的代码

```
public class DropCard extends Activity {

    String drop = "Card Dropped";
    String declared = "User Declared";
    boolean won = false;
    /*Intent intent = getIntent();
     TextView tv = (TextView)findViewById(R.id.intentData2);
     Bundle extras=intent.getExtras();*/
    String get = "word building";//extras.getString("key");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dropcard);

        displayIntentData();

        if (get == "word built") {
            findViewById(R.id.sendButton2).setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Intent intent = new Intent(DropCard.this, Declare.class);
                    intent.putExtra("key", declared);
                    startActivity(intent);
                }
            });
        } else {
            findViewById(R.id.sendButton2).setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Intent intent = new Intent(DropCard.this, MainActivity.class);
                    intent.putExtra("key", drop);
                    startActivity(intent);
                    //notice we dont call finish() here
                }
            });
        }
    }

    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        setIntent(intent);//must store the new intent unless getIntent() will return the old one
        displayIntentData();
    }

    private void displayIntentData() {
        Intent intent = getIntent();
        TextView tv = (TextView) findViewById(R.id.intentData2);
        Bundle extras = intent.getExtras();

        if (extras != null) {
            tv.setText("Data received: " + extras.getString("key"));
        } else {
            tv.setText("No extradata received");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:20:48.160

它很简单，你必须`compare`这样做`default method equalsIgnoreCase()`。

```
 String name = edit_text.getText().toString();

    if(name.equalsIgnoreCase("WellCome"))
    {

        //CALL YOUR ACTIVITY ONE

    }
    else
    {

        //CALL YOUR ACTIVITY THREE

    }
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:14:36.413

利用

```
if (getdata.equals(word)){

} 
```

代替

```
if (getdata == word){

} 
```

用于比较当前代码中的 Strings.as 将全部替换`==`为`equals`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:15:57.750

```
 if (getData.getText().toString().equalsIgnoreCase("String name"))//change this line in your code for checking
    {
        findViewById(R.id.sendButton1).setOnClickListener(new OnClickListener() 
        {   
            public void onClick(View v) 
            {
                Intent intent = new Intent(BuildWord.this,MainActivity.class);
                intent.putExtra("key", getdata);
                startActivity(intent);

            }
        });
    }
    else
    {
        findViewById(R.id.sendButton1).setOnClickListener(new OnClickListener() 
        {   
            public void onClick(View v) 
            {
                Intent intent = new Intent(BuildWord.this,DropCard.class);
                intent.putExtra("key", finished);
                startActivity(intent);                  
            }
        });
    } 
```

# c++ - CreateProcess 在 Windows7 64 位中失败，错误代码为“740”

> ID：13268486
> 
> 赞同：1
> 
> 时间：2012-11-07T11:09:34.067
> 
> 标签：c++, windows-7, visual-studio-2005, uac

我在 Windows 7 64 位平台上使用 VS2005。我的一个应用程序正在尝试使用`CreateProcess`API 创建一个新进程。创建进程时，API 返回错误 0。我使用检查错误代码`GetLastError()`，我得到`740`：*请求的操作需要提升*。尝试创建新进程的应用程序具有管理权限。

我使用以下代码创建流程：

```
// Create the process using modified stratup info
int nRetVal = CreateProcess( (LPSTR)strFullPath.c_str(),
                             (LPSTR)strCmdLine.c_str(),
                             0, 0, FALSE, 0 , 0,
                             (LPSTR)strWorkingDir.c_str(),
                             //NULL,
                             &StartupInfo, &ProcInfo ); 
```

如何在不关闭 UAC 的情况下从我的应用程序启动新进程？

在构建父应用程序时，我收到以下警告：

> App.manifest：清单创作警告 81010002：命名空间“urn:schemas-microsoft-com:asm.v2”中无法识别的元素“requestedPrivileges”。

问候，尼克松

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-23T16:56:05.353

尝试使用`ShellExecute()`函数而不是`CreateProcess()`

更新：

*   `CreateProcess()`创建一个具有相同权限的子进程，它是最底层的 API
*   `ShellExecute/Ex()`将进程创建委托给 shell（可以检测应用程序是否需要权限）。如果清单允许以非管理员身份运行应用程序，则传递`lpOperation=L"runas"`以手动提升它
*   `_wsystem()`创建一个新`cmd.exe /c app.exe`进程（我猜是通过`CreateProcess`），从而将进程创建委托给命令提示符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T06:28:18.937

您遇到的错误描述了该问题：*The Requested Operation Requires Elevation*。所以你必须从它开始：

*   您确定您的父应用程序具有*完整*的管理权限吗？
*   当你启动它时它是否请求提升？

由于您在构建它时收到警告，因此您必须有一个无效的清单。[UAC清单](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx "第 6 步：创建和嵌入应用程序清单 (UAC)")没有`requestedPrivileges`元素，而是`requestedExecutionLevel`：

```
<requestedExecutionLevel
    level="asInvoker|highestAvailable|requireAdministrator"
    uiAccess="true|false"
/> 
```

# wpf - WPF窗口切换

> ID：13268487
> 
> 赞同：1
> 
> 时间：2012-11-07T11:09:35.320
> 
> 标签：wpf

我的 wpf 应用程序有两个窗口。一个用于播放音乐，一个用于做其他事情。我使用以下代码从 Windows 1 切换到 Windows 2：

```
Window2 window2 = new Window2 ();
App.Current.MainWindow = window2 ;
window2 .Show();
this.Close(); 
```

问题是显示了 window2 但 window1 仍在运行（音乐仍在播放）虽然 window1 消失了（我听到音乐的声音）

如何在切换到 window2 之前停止所有 window1 的业务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T15:30:55.610

```
private void Window1_Deactivated(object sender, EventArgs e)
{
    //TODO: Pause/stop music
}

private void Window1_Activated(object sender, EventArgs e)
{
    //TODO: Resume music
} 
```

# ruby - Ruby中的任何字符串到XML

> ID：13268489
> 
> 赞同：0
> 
> 时间：2012-11-07T11:09:35.767
> 
> 标签：ruby, libxml2

我正在尝试将随机字符串（以 XML 格式构建）转换为 xml，因此我可以对其应用“to_hash”函数。

这就是我所拥有的：

```
model = live_requests[3]
parser = XML::Parser.string(model)
model_xml = parser.parse

puts model.to_hash 
```

现在，当“model_xml”应该是 XML 文件时，为什么会出现错误？

顺便说一句，我正在使用 LibXML。 [http://libxml.rubyforge.org/rdoc/index.html](http://libxml.rubyforge.org/rdoc/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:29:15.907

Libxml 不支持该`to_hash`方法。如果您正在寻找一种不需要遍历 XML 节点和手动构建散列的方法，您应该看看[`Nori`](https://github.com/savonrb/nori).

```
Nori.parse("<tag>This is the contents</tag>")
# => { 'tag' => 'This is the contents' } 
```

如果您想了解如何遍历 Libxml 的节点树，请查看[此问题的答案](https://stackoverflow.com/questions/1230741/convert-a-nokogiri-document-to-a-ruby-hash)。

# storage - Google Apps/Drive 与本地服务器上的共享存储同步

> ID：13268496
> 
> 赞同：1
> 
> 时间：2012-11-07T11:09:53.070
> 
> 标签：storage, google-drive-api, shared

作为一家公司，我们使用谷歌应用程序已经快 2 年了，我们对此非常满意。随着 Google Drive 的引入，我们正在寻找一种将我们的网络驱动器与 Google Drive 同步的方法，以用于整个 Google Apps 域。通过这种方式，我们可以让每个人都可以在他们喜欢的任何地方工作，并可以访问每个用户的所有文件。

但不知何故，我无法弄清楚这怎么可能，或者即使有可能。有没有人可能以前做过这个或者可以指出我正确的方向？

# yii - 如何在 yii 应用程序中查找所有型号名称？

> ID：13268500
> 
> 赞同：1
> 
> 时间：2012-11-07T11:09:58.387
> 
> 标签：yii

我在 yii 中使用了一个模块，当应用程序模型的属性为真时，将使用该模块。

如何获取应用程序中可用的所有模型名称，以便我可以在具有属性的应用程序模型和模块之间建立有条件的关系？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-07T11:37:26.633

您可以使用以下方法获取类名：

```
public function modelName()
{
    return __CLASS__;
} 
```

并这样称呼它：

```
$model = new State();
echo $model->getModelName(); 
```

# iphone - 在OCMock的andDo中访问参数时出现EXC_BAD_ACCESS

> ID：13268502
> 
> 赞同：15
> 
> 时间：2012-11-07T11:10:02.570
> 
> 标签：iphone, ios, xcode, ocunit, ocmock

我正在尝试使用 OCMock 的 stub *andDo*方法编写一段代码。

在这种情况下，正在测试 UIImageView 扩展类。我想检查扩展调用*[self setImage:]*的参数是否为非零（稍后将使用其他图像比较）。

使用 OCMock 的*andDo*方法时，测试在块完成后会因 EXC_BAD_ACCESS 而崩溃。

```
id mockView = [OCMockObject mockForClass:[UIImageView class]];
[[[mockView stub] andDo:^(NSInvocation *invocation)
  {
      UIImage *img;
      [invocation getArgument:&img atIndex:2]; <---- line causing the exception
      somebodySetImage |= (img != nil);

  }] setImage:OCMOCK_ANY];

  [mockView do_something_that_calls_setImage]; 
```

我现在找到的唯一解决方案是使用*andCall*而不是*andDo*，但这会使测试复杂化。

我可以使用*andDo*避免崩溃吗？

**更新** 好吧，我将尝试在这里举一个更好的例子：这是新的测试代码：

```
- (void)testDownloadingThumbnail
{
    PInfo *_sut = [[PInfo alloc] init];

    __block id target = nil;

    id mock = [OCMockObject mockForClass:[NSOperationQueue class]];

    [[[mock expect] andDo:^(NSInvocation *inv)
    {
        NSInvocationOperation *op;
        [inv getArgument:&op atIndex:2];
        target = [[op invocation] target]; /* replacing this line with STAssert does not help either */
    }] addOperation:OCMOCK_ANY];

    [_sut setDownloadQueue:mock];
    [_sut startDownloadingImagesAsync:YES];

    [mock verify];

    STAssertEqualObjects(target, _sut, @"invalid op target");
} 
```

这是经过测试的代码（来自 PInfo 的单一方法）：

```
- (void)startDownloadingImagesAsync:(bool)isThumbnailImg
{
    NSInvocationOperation *inv;

    inv = [[NSInvocationOperation alloc] initWithTarget:self
                                     selector:@selector(loadThumbnailWorker:)
                                       object:nil];
    [[self downloadQueue] addOperation:inv];
} 
```

使用 EXC_BAD_ACCESS从*startDownloadingImagesAsync*退出时，代码仍会崩溃。如果我在*andDo*块中添加断点，我会看到控件到达该点并通过*getArgument*检索正确的对象。

然而，如果我在块内使用*getArgument*，无论我尝试做什么，它都会崩溃。

PS感谢您的帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-12T00:56:47.277

我在使用 NSProxy 的 forwardInvocation: 方法时遇到了类似的问题。

你可以试试下面的吗？

```
NSInvocationOperation *op; // Change this line
__unsafe_unretained NSInvocationOperation *op; // to this line 
```

或者另一种方法可能是保留 NSInvocation 的参数：

```
[invocation retainArguments]; 
```

[http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html#//apple_ref/occ/instm/NSInvocation/retainArguments](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html#//apple_ref/occ/instm/NSInvocation/retainArguments)

稍后我将尝试添加更详细的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:42:21.690

我认为问题在于您试图直接调用模拟对象。对于你想要做的事情，你不应该需要一个模拟对象。只需调用该方法并验证图像是否已设置：

```
expect(myObject.imageView.image).to.beNil();
[myObject do_something_that_calls_setImage];
expect(myObject.imageView.image).not.to.beNil(); 
```

如果您出于某种原因真的想使用模拟，您可以使用真实`UIImageView`模拟和部分模拟：

```
UIImageView *imageView = myObject.imageView;
id mockView = [OCMockObject partialMockForObject:imageView];
__block BOOL imageSet = NO;
[[[mockView stub] andDo:^(NSInvocation *invocation) {
      UIImage *img;
      [invocation getArgument:&img atIndex:2];
      imageSet = (img != nil);
  }] setImage:OCMOCK_ANY];

[myObject do_something_that_calls_setImage];
expect(imageSet).to.beTruthy(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T07:13:21.010

在我的例子中，这是因为我在这个方法中引入了另一个参数，所以块参数被移动了一个。

我通过更改`[inv getArgument:&op atIndex:2]`为`[inv getArgument:&op atIndex:3]`

# activerecord - 如何在 yii MANY_MANY 关系中消除列名的歧义

> ID：13268508
> 
> 赞同：0
> 
> 时间：2012-11-07T11:10:19.807
> 
> 标签：activerecord, yii, disambiguation

我有一个很好的文件夹和文件夹中的项目。为了清楚起见，所有 mysql 都被缩写。

```
CREATE TABLE folder
  folder_id INT,
  name VARCHAR(32),
  sort_weight INT

CREATE TABLE item
   item_id INT,
   name VARCHAR(32) 
```

当然还有链接表

```
 CREATE TABLE item_folder
   folder_id INT,
   item_id INT,
   sort_weight INT 
```

正如您可能已经猜到的那样，一个项目可以在多个文件夹中（有点像 linux 文件系统中的硬链接），并注意文件夹也有 sort_weight 因为它可以在另一个文件夹中排序。现在我正在使用 Yii，我在 Item 模型中有一个很好的关系，如下所示：

```
public function relations()
{
    return array(
        'folderitems' => array(self::MANY_MANY, 'Folder', 'item_folder(item_id, folder_id)'),
    );
} 
```

问题是，当我尝试提出一些不错的 AR 请求并尝试对其进行排序时，我遇到了问题。我的 AR 请求：

```
$items = Item::model()->with(array(
  'folderitems' => array(
     'condition' => "folderitems.folder_id = $someid"
   ),
))->findAll(array('order'=> "folderitems.sort_weight")); 
```

现在的问题是，使用这样的语法，它不是按 item_folder.sort_weight 排序，而是按 folder.sort_weight 排序。

如果我将字段名称更改为 item_folder.sort_weight2 并尝试：

```
[...] ))->findAll(array('order'=> 'sort_weight2')); 
```

有用。

但是，如果我保持两个名称相同并尝试

```
[...] ))->findAll(array('order'=> 'item_folder.sort_weight')); 
```

它说`unknown column`。

所以问题是 - 如何正确消除歧义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:23:50.537

尝试

```
[...] ))->findAll(array('order'=> 't.sort_weight')); 
```

[http://www.yiiframework.com/doc/guide/1.1/en/database.arr#disambiguating-column-names](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#disambiguating-column-names)

“当列名出现在两个或多个连接在一起的表中时，需要消除歧义。这是通过在列名前加上其表的别名来完成的。

在关系型AR查询中，主表的别名固定为t，而关系表的别名默认与对应的关系名相同。”

# wcf - 创建 WCF dns 路由器

> ID：13268510
> 
> 赞同：2
> 
> 时间：2012-11-07T11:10:38.073
> 
> 标签：wcf, service, dns, forward

我有一个使用 WCF 服务的 winforms 应用程序。到目前为止，WCF 服务是本地 pc 上的自托管服务。它包含几个接口（每个程序功能一个）。作为一项改进，我想将服务公开给互联网，这样我就可以使用新的移动应用程序调用它。这可以通过配置路由器/防火墙并使用某种动态 dns 或记住 IP 地址来轻松完成（在最坏的情况下）。

但是现在，真正的问题来了：下一步，我会将 winforms 应用程序分发到多个位置（称为客户），并与他们的移动应用程序中的本地 WCF 服务一起。为了让客户连接到他们的 wcf 服务（使用移动应用程序），我现在可以为每个客户设置一个动态 dns，但我不想这样做。首先，最好的 dyndns 服务不是免费的，或者你必须定期更新。其次，我想为客户提供我自己的 dns 服务，以便我可以将他们的 wcf 呼叫“转发”到他们自己的本地服务。wcfdnsrouter 应该位于公共网络主机上，客户的 ip 地址由 ip-updater 提供（其他 dyndns 服务通常是这种情况）

例如，想象一下：

客户 A；IP1; 端点：[http ://wcfdnsrouter.com/A](http://wcfdnsrouter.com/A)

客户乙；IP2; 端点：[http ://wcfdnsrouter.com/B](http://wcfdnsrouter.com/B)

我希望 wcfdnsrouter.com/ **A**将所有呼叫转发（或路由？）到**IP1** 和 wcfdnsrouter.com/ **B**将转发（或路由？）所有呼叫到**IP2**

在这种情况下，客户可以从地球上的每个地方使用移动应用程序访问他的服务。客户现场的硬件配置不是问题。

目标是使用一个参数，而不是为每个客户设置一个其他 url。这应该会减少配置并避免重复我的服务。但是，它仍然是一个开放的trace（在这种情况下，我需要创建一个子域并复制wcfdnsrouter，这无非是一个普通的routingservice）。

因此，入口点似乎是一个将消息路由到另一个 ip address\service 的 restfull 服务。我已经对路由服务进行了一些研究，但我想我不会得到我想要的。基于内容的路由不是一个选项，因为我不想将所有接口都更改为具有标准。我看不到如何在 restfull 服务中的参数与我需要调用的 ip 地址之间建立链接（所以是另一个服务）。

目前，安全性并不是真正的问题。

请注意，问题与（免费）dns 服务无关。目的是自己创造。在示例中，激活新客户不应该只是安装 auto-ip-updater 并分配某种代码（如 A 和 B）。

我需要一些建议如何做到这一点。也许我在考虑路由时走错了路？也许有一种我想念的非常简单的方法？

提前致谢！

# iphone - 没有aps徽章或徽章= 0就无法清理通知中心？

> ID：13268513
> 
> 赞同：4
> 
> 时间：2012-11-07T11:11:01.973
> 
> 标签：iphone, ios, apple-push-notifications

我向用户推送没有徽章密钥或徽章 = 0 的通知有效负载，无法从通知中心删除通知。这是我的有效载荷：

```
{
     "aps" : {"alert" : "bala bala"}
//or "aps" : {"alert" : "bala bala", "badge" : 0}
} 
```

然后从NC打开app，通知停留在NC，无法删除。如果我在 aps 中设置的徽章值大于 0，则应用启动后通知将被删除。

```
{
    "aps" : {"alert" : "bala bala", "badge" : 1}
} 
```

我**已经**`[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];`在应用启动后设置了。

为什么没有徽章密钥或徽章 = 0 无法删除通知？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:18:46.577

徽章为0，表示“不变”。所以，你必须为徽章设置-1。

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:-1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:01:18.923

来自：[iOS 5 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-5_0/_index.html)

*   > 应用程序的推送和本地通知出现在 iOS 5 的新通知中心中。通知中心显示被视为“未读”的通知。要适应没有未读状态的推送和本地通知，请将应用程序的标记计数设置为 0 以从通知中心清除该应用程序的通知。

所以解决方法是在应用打开时将应用徽章设置为0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:39:42.457

我有同样的问题。解决方案非常简单：首先将徽章设置为 1，然后设置为 0。这应该会清除 NC 中的通知。

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:1];
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
// Now the notification should be cleared out of the NC 
```

# opencv - 如何检测 PizzaMarker

> ID：13268515
> 
> 赞同：3
> 
> 时间：2012-11-07T11:11:09.827
> 
> 标签：opencv, feature-detection

到目前为止，是否有人试图用“仅”OpenCV 找到像这样的比萨标记器？

![PizzaMarker01](../Images/d550a5dcc6535dc589a526178235c4b0.png)

我试图检测到这一点，但到目前为止还没有得到好的结果。我不知道这个标记在图片中的什么位置（不可能有 ROI），标记将在房间的某个地方（不同的光照效果），而不是正对着我们。我想要什么 - 角落和后来这个标记的方向用角落提取，但首先只有 5Corners。（上、下、左、右、中）

到目前为止，我一直在尝试：阈值、噪声清除、查找轮廓，但没有任何帮助获得好的结果。通常发现棋盘或方形标记是因为它们的（平行）线 - 我想这对我没有帮助......

找到这些标记的简单方法是什么？你会怎么开始？使用其他颜色格式，如 HSV？

一步一步的想法或教程将非常有帮助。因为我在网上找不到 tuts。也许这个标记不叫比萨标记 -> 有人知道真名吗？

谢谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:36:02.167

首先 - 感谢您的所有帮助。似乎有几种方法很有用。或多或少有些时间膨胀。对我来说，使用模板匹配但不是使用相同的标记是最简单的。我只用了一小部分...

![在此处输入图像描述](../Images/fa3d88165b979cf75aa3f64007a3bd2a.png)

在这个新标记中可以找到 5 次（4 次阴性和 1 次阳性）：

![在此处输入图像描述](../Images/008cbf0ac1d97959a97c047973c68a4e.png)

现在我只使用了 4 个最消极的点和最积极的点，得到了我最终想要的 5 点。为了更确定这一点，我检查它们是否彼此靠近并执行cornerSubPix()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:40:25.263

您可以使用 VJ 训练和使用 cvHaarDetectObjects 来检测标记。
可能不是最快的方法，但它应该可以工作。您可以在此处找到有关使用 OpenCV 的对象检测方法的更多信息：http: [//opencv.willowgarage.com/documentation/object_detection.html](https://web.archive.org/web/20120706062114/http://opencv.willowgarage.com/documentation/object_detection.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T13:02:38.253

如果您需要可以实时操作的东西，我会沿着边缘检测路线寻找相交线，就像[这些人所做](http://vesta.informatik.rwth-aachen.de/opus/volltexte/2011/3095/pdf/6.pdf)的那样。对照明变化似乎快速而稳健。

阅读 openCV 中的霍夫线变换以开始使用。

附录：

黑到白是你可以拥有的最强优势。如果您创建渐变图像并使用场景中发现的最强边缘（通过直方图或其他方式），您将能够将检测限制为仅黑/白边缘。寻找交叉点。这应该为您提供少量的中心点来应用霍夫椭圆检测（或替代）。如果您愿意，您可以在模板中旋转以进一步检查。

BTW .. OpenCV 有边缘检测、霍夫变换和 FitEllipse，如果你真的走这条路的话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:31:24.317

实际上，这种“披萨”模式是 [Viola-Jones 对象检测框架](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)中使用的 haar 特征的构建块之一。

所以我要做的是计算总面积表或积分图像`cv::integral(img)`，然后在各种尺度（取决于大小）上对这种模式进行详尽的搜索。在每个窗口中，您仅使用 9 个点（左上、中上、...、左下）。

# http - 强制 HTTP 标头

> ID：13268516
> 
> 赞同：3
> 
> 时间：2012-11-07T11:11:11.197
> 
> 标签：http, java-me, nokia-s40

该`HttpConnection.setRequestProperty`方法允许设置 HTTP 标头。

诺基亚 6234 等一些设备坚持自己设置`User-Agent`，导致请求中出现两个标头。

除了实现 HTTP over 之外，有没有办法强制标头`SocketConnection`？

如果没有，有没有办法检测哪些设备有这个问题？

# c - 无法为多个文件指定 -c

> ID：13268517
> 
> 赞同：5
> 
> 时间：2012-11-07T11:11:13.743
> 
> 标签：c, file, gcc, makefile

我有这个问题`makefile`：

```
gcc -c src/uno.c src/uno.h -o src/uno.o
gcc: fatal error: cannot specify -o with -c, -S or -E with multiple files 
```

如何创建`.o`包含多个文件的文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T12:03:55.443

头文件（`src/uno.h`在这种情况下）是从文件中引用的，不应在命令行上再次命名：

```
gcc -c src/uno.c -o src/uno.o 
```

您*可能*`-I`必须使用标志命名找到它们的目录。但是，如果您`#include "uno.h"`在源代码中，那么 gcc 将已经找到该文件，因为它会在同一目录中搜索它，该目录还包含`uno.c`.

您可以编译多个文件并将它们链接到单个二进制文件中，例如

```
gcc -o myApp myAppMain.c myAppUtil.c myAppStuff.c 
```

但这意味着如果单个源发生更改，则必须重新编译所有内容，因为不会保留中间对象。如果您使用目标文件，每个翻译单元总是有一个编译器调用。

有一个预编译头文件的功能，但在这种情况下，您*只会*编译头文件，而不是`uno.c`文件。无论如何，这是相当先进的，所以你可能不需要它。

# controller - 带有一个主背景窗口的 MDI 或模态

> ID：13268518
> 
> 赞同：0
> 
> 时间：2012-11-07T11:11:14.300
> 
> 标签：controller, modal-dialog, javafx-2, mdi

我已经在网上搜索了 JavaFX 中的 MDI 表单的概念，或者至少是其中的某种形式。但是我没有找到我需要的东西，或者我搜索的单词可能不正确。如果我正在寻找错误的东西，请告诉我。

MDI-多文档接口。您有一个主窗口，您可以启动在主窗口内运行的各个窗口。（类似照片在 Photoshop 中编辑）

或者

甚至如何拥有一个主窗口并从主窗口启动单独的窗口，例如......例如......客户......发票。这些窗口不必同时打开……但如果你关闭它们，主窗口应该再次获得焦点。（类似于如果您在 word 中转到 File>>Options - 选项窗口是模态的，而主 word 文档是打开的）我可能会补充说我想在 windows（非 web）环境中执行此操作。

如果有人可以分享一些关于如何使用多个窗口的好网站。

我问过我工作的朋友，他问我为什么要首先做这个。

这里有一些想法（如果有更好的方法，请告诉我：

1.  该应用程序在主窗口全部禁用的情况下启动，并在顶部打开一个带有用户名和密码的单独窗口......</li>
2.  打开几个图标并管理它们的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:13:00.993

JavaFX 2.2 没有真正的 MDI 框架。您最好使用[NetBeans](http://netbeans.org/features/platform/)或 Eclipse 平台，如果您愿意，可以在其中嵌入 JavaFX 面板。

对于纯 JavaFX 版本，您可以查看自定义[VFXWindows](http://mihosoft.eu/?p=365)。

# asp.net-mvc - “错误加载页面”消息，显示错误

> ID：13268519
> 
> 赞同：0
> 
> 时间：2012-11-07T11:11:20.697
> 
> 标签：asp.net-mvc

我正在开发我的第一个 MVC4 应用程序，现在已经多次收到“加载页面错误”消息。如果您在生产环境中，这很好，但是在开发应用程序时，查看错误会更有效率，请参阅异常详细信息。是否有某种方法或设置可以获取导致此消息的异常信息？

问候，Jurjen。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:14:29.050

它是一个 .Net 异常，`customErrors`在您的 Web.config 中找到该元素并设置属性`mode="Off"`或`mode="RemoteOnly"`.

如果它是一个 javascript 错误，请打开您的 javascript 控制台并观察错误。

如果它是一个 .Net 异常，但浏览器没有呈现 YSOD，因为它是通过 ajax 请求的，那么获取输出的最快方法是使用像 fiddler 这样的调试代理并在那里观察 html 结果。

如果这两个选项都不是，您必须提供更多详细信息。您是否尝试过在调试器中运行应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:45:42.033

在 _layout 集中

> $.mobile.ajaxEnabled = 假；

这解决了我的问题

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:15:22.810

您可以在 web.config 中启用调试并设置错误显示模式

```
<configuration>
  <system.web>
    <compilation debug="true" ...>
        ...
    </compilation>
    <customErrors mode="On|Off|RemoteOnly" ...> 
        (set this to Off or RemoteOnly) when debugging
        ...
    </customErrors>
  </system.web>
</configuration> 
```

*   [**如何为 ASP.NET 应用程序启用调试**](http://msdn.microsoft.com/en-us/library/e8z01xdh%28v=vs.100%29.aspx)

*   [**如何设置`customErrors`元素**](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.100%29.aspx)

# ruby - 如何为 Ruby 重构这段代码？

> ID：13268527
> 
> 赞同：0
> 
> 时间：2012-11-07T11:11:40.663
> 
> 标签：ruby, refactoring

我创建了以下辅助方法，它工作正常，但我想改进它的调用方式。

```
def display_if_present(attribute, i18key, hours=nil)
  unless attribute.blank?
    content_tag :li do

      if hours.present?
        concat content_tag :h2, get_translation_by_model_attr('achievment', i18key) + ' ('+t(:hours)+'): '
      else
        concat content_tag :h2, get_translation_by_model_attr('achievment', i18key)+': '
      end

      if i18key.include? 'date'
        concat content_tag :p, attribute.strftime('%m/%Y')
      elsif hours.present?
        concat content_tag :p, h(attribute) + "(" + t(:hours) + ")"
      else
        concat content_tag :p, h(attribute) 
      end
    end
  end
end 
```

另一方面`view`，我有以下内容：

```
<%= display_if_present(academic_achievment.institution,'institution') %>

<%= display_if_present(academic_achievment.ativs_description,'ativs_description') %>

<%= display_if_present(academic_achievment.date_start,'date_start') %>

<%= display_if_present(academic_achievment.date_finished,'date_finished') %>

<%= display_if_present(academic_achievment.load, 'load', :hours) %>

<%= display_if_present(academic_achievment.tags, 'tags') %> 
```

我想做一些重构。所以我尝试了：

```
<% elements = %w(institution ativs_description date_start date_finished load tags) %>

<% elements.collect! do |item| %>
  <% params = (item == "load") ? "item, :hours" : "item" %>
  <%= display_if_present("academic_achievment.#{item}".constantize, params.constantize) %>
<% end %> 
```

上面的代码块返回错误：

```
wrong constant name academic_achievment.institution
Extracted source (around line #15):

12: 
13:         <% elements.collect! do |item| %>
14:           <% params = (item == "load") ? "item, :hours" : "item" %>
15:           <%= display_if_present("academic_achievment.#{item}".constantize, params.constantize) %>
16:         <% end %>
17:  
18:       </ul> 
```

我感谢一些帮助以获得更好的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:06:04.417

我推荐使用这样的[`send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)方法：

```
<% %w(institution ativs_description date_start date_finished load tags).each do |item| %>
  <%= display_if_present(academic_achievment.send(item), item, item == 'load' ? :hours : nil) %>
<% end %> 
```

# c# - C#如何在main void中传输引用void

> ID：13268529
> 
> 赞同：0
> 
> 时间：2012-11-07T11:11:46.763
> 
> 标签：c#, .net, static, webclient, void

这可能是一个（另一个）菜鸟问题，但我不知道该怎么做。

我在引用静态方法的私有方法中有一段代码。

```
using (WebClient wc = new WebClient())
{
    wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
    wc.DownloadStringAsync(new Uri(requestUri));
} 
```

它所指的静态方法：

```
static void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{

    var xmlElm = XElement.Parse(e.Result);

    var status = (from elm in xmlElm.Descendants()
                  where elm.Name == "status"
                  select elm).FirstOrDefault();
    if (status.Value.ToLower() == "ok")
    {
        var res = (from elm in xmlElm.Descendants()
                   where elm.Name == "formatted_address"
                   select elm).FirstOrDefault();
        formatted = res.Value;

    }          
} 
```

现在我需要静态方法的内容来替换WebClient的内容。像：

```
using (WebClient wc = new WebClient())
{
    var xmlElm = XElement.Parse(e.Result);

    var status = (from elm in xmlElm.Descendants()
                  where elm.Name == "status"
                  select elm).FirstOrDefault();
    if (status.Value.ToLower() == "ok")
    {
        var res = (from elm in xmlElm.Descendants()
                   where elm.Name == "formatted_address"
                   select elm).FirstOrDefault();
        formatted = res.Value;

    }
} 
```

由于我不确定“e”的来源，我不知道如何让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:50:58.463

您似乎错过了*异步调用*的要点。这样做的重点是开始执行异步方法，然后继续执行您的代码，忘记该方法的所有内容，只留下一个*回调方法*来处理其响应。

为了简单起见，您无法`formatted`以您想要的方式使用变量，因为您只能在回调方法中使用异步调用的结果。

但是，您可以使用匿名方法的这种 lambda 语法将整个代码放在同一个块中（不需要单独的方法）：

```
myLabel.Text = "loading...<br />";
using (WebClient wc = new WebClient())
{
    wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler((sender2, e2) =>
    {
        var xmlElm = XElement.Parse(e2.Result);
        var status = (from elm in xmlElm.Descendants()
            where elm.Name == "status"
            select elm).FirstOrDefault();
        if (status.Value.ToLower() == "ok")
        {
            var res = (from elm in xmlElm.Descendants()
                where elm.Name == "formatted_address"
                select elm).FirstOrDefault();
            myLabel.Text = res.Value;
        }
        else
        {
             myLabel.Text = "Bad status: " + status.Value;
        }
    });
    wc.DownloadStringAsync(new Uri(requestUri));
} 
```

例如，一旦准备好，这将在页面中使用结果填充标签。

如果要等到加载完成，只需使用普通`DownloadString`方法即可：

```
string formatted = "";
using (WebClient wc = new WebClient())
{
    string raw = wc.DownloadString(new Uri(requestUri));
    var xmlElm = XElement.Parse(raw);
    var status = (from elm in xmlElm.Descendants()
        where elm.Name == "status"
        select elm).FirstOrDefault();
    if (status.Value.ToLower() == "ok")
    {
        var res = (from elm in xmlElm.Descendants()
            where elm.Name == "formatted_address"
            select elm).FirstOrDefault();
        formatted = res.Value;
    }
    else
    {
         formatted = "Bad status: " + status.Value;
    }
}

//use the variable as you wish... 
```

# plsql - 使用 Oracle ApEx 4.1 的可更新 Oracle SQL 报告

> ID：13268530
> 
> 赞同：2
> 
> 时间：2012-11-07T11:11:58.703
> 
> 标签：plsql, oracle-apex

基本上，我有一个基于以下示例 SQL 查询的 SQL 可更新报告：

```
select A, B, C from my_table; 
```

根据此报告，我已将 B 列设为基于命名 LOV 的 SELECT LIST - 我还为该列分配了“lov_select”的 id

这里的C列也是一个文本区域

我的问题并且不确定如何执行此操作，因为此报告的行数可能有所不同，假设此报告返回 3 行，基于从 B 列 - 选择列表中选择的值，我想在 B 列选择列表中使用此值从表中检索另一个值，然后将此值返回到 C 列文本字段中，以及使用的此选择列表值。

我想通过动态操作来做到这一点。

例如：

```
Column A                Column B (select list LOV)   Column C
----------------------- ---------------------------- ------------------------------------
Row 1                   NAME1                        returns 5                       
Row 2                   NAME2                        returns 6
Row 3                   NAME3                        returns 7 
```

因此，如果我更改第 2 行 B 列并选择“NAME2”，然后我想使用值“NAME2”执行查询，该值将返回值 6，然后我希望将其填充到列 C 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T13:47:54.767

带有源的手动表格形式：

```
select 
apex_item.text(1, empno) empno,
apex_item.text(2, ename) ename,
apex_item.text(p_idx => 3, p_value => deptno, p_size => 4, p_maxlength => 2, p_attributes => 'class="deptno"') deptno,
apex_item.text(4, null) dname
from emp 
```

2个可能的解决方案：

1.  使用 ajax 进程的动态操作

    *   事件：变化
    *   选择类型：jQuery 选择器
    *   jQuery 选择器：.deptno
    *   条件：无条件

    真正的行动：执行javascript代码

    *   页面加载时触发：未选中

        ```
        var lFetchFor = $(this.triggeringElement).val(), 
            lTarget = $(this.triggeringElement).closest('tr').find('input[name="f04"]');

        $.post('wwv_flow.show', 
               {"p_request"      : "APPLICATION_PROCESS=fetch_value",
                "p_flow_id"      : $v('pFlowId'),
                "p_flow_step_id" : $v('pFlowStepId'),
                "p_instance"     : $v('pInstance'),
                "x01"            : lFetchFor}, 
               function(data){
                  lTarget.val(data);
               }); 
        ```

    *   没有受影响的元素类型

2.  仅动态动作和隐藏项

    *   事件：变化
    *   选择类型：jQuery 选择器
    *   jQuery 选择器：`.deptno`
    *   条件：无条件
    *   真正的行动：设定价值
        *   设置类型：Javascript 表达式
        *   Javascript 表达式：`$(this.triggeringElement).val()`
        *   页面加载时触发：未选中
        *   受影响的元素：

            *   选择类型：项目
            *   项目）：`P37_FIND_DEPTNO`
    *   真正的行动：设定价值

        *   集合类型：SQL语句
        *   SQL 语句：`select dname from dept where deptno = :P37_FIND_DEPTNO;`
        *   要提交的页面项目：`P37_FIND_DEPTNO`
        *   页面加载时触发：未选中
        *   受影响的元素：

            *   选择类型：项目
            *   项目）：`P37_FIND_DEPTNO_RESULT`
    *   真正的行动：执行javascript代码

        *   代码：

            ```
            $(this.triggeringElement).closest('tr').find('input[name="f04"]').val($v ('P37_FIND_DEPTNO_RESULT')); 
            ```

        *   页面加载时触发：未选中

        *   没有受影响的元素类型
    *   2 个隐藏项目，值保护设置为否

        *   P37_FIND_DEPTNO
        *   P37_FIND_DEPTNO_RESULT

两者都负责获取价值，这取决于您希望如何解决它。

# ruby - 查找具有特定值的所有哈希的简单方法

> ID：13268531
> 
> 赞同：0
> 
> 时间：2012-11-07T11:12:09.967
> 
> 标签：ruby, arrays, hash

我有以下哈希数组

```
h = [{:foo=>:bar}, {:qqq=>:ppp}, {:xxx=>123}] 
```

我想找到值中`Symbol`的所有哈希值。

目前我使用这种方法，但我实际上并不喜欢它，因为我必须为每个散列创建数组并提取第一个元素 ( `hash.values[0]`)。

```
h.select { |hash| hash.values[0].is_a?(Symbol) }
# => [{:foo=>:bar}, {:qqq=>:ppp}] 
```

也许有更优雅的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:33:40.280

如果您不想使用数组，请使用哈希）

```
h = { :foo=>:bar, :qqq=>:ppp, :xxx=>123 }
h.select { |k, v| v.is_a?(Symbol) }
=> { :foo=>:bar, :qqq=>:ppp } 
```

# c# - 在家里和办公室共享 C# 项目的文件

> ID：13268532
> 
> 赞同：3
> 
> 时间：2012-11-07T11:12:11.120
> 
> 标签：c#, .net, svn, version-control, project-management

我已经形成了许多源代码文件作为我的库。例如，我编写了提供*Median()*函数的*LinqExtension.cs 。*

 *现在我正在做一个需要 LinqExtension.cs 的项目。通常，我将文件链接到项目。正如[这里](http://greenicicleblog.com/2010/12/01/link-whole-directories-into-visual-studio-projects/)介绍的那样。我链接文件而不是复制它们的原因是将文件保存在一个位置。如果我修改文件，所有相关项目都会受到影响。

我还将项目添加到 Subversion 并从 Google Code 上传和下载。链接文件不受版本控制。

我在家里和办公室都在做这个项目。我讨厌将链接的文件复制到我的办公室，这会使文件不单一。

我想出了一个添加`<Compile Include="http://www.example.com/LinqExtension.cs"/>`到 csproj 文件的解决方案，以便该文件仅存在于 Internet 上。一旦我上传了文件的新版本，所有相关项目都会受到影响。不幸的是，该解决方案不起作用。

还有其他建议或更好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:26:51.887

更好的方法是在二进制级别而不是源代码共享您的核心库。您可以设置一个[私有 Nuget 存储库](http://haacked.com/archive/2010/10/21/hosting-your-own-local-and-remote-nupack-feeds.aspx)来简化此操作。

如果绝对需要共享文件，您可以在项目中使用预构建操作从公共位置复制文件，甚至从 google 代码下载它们。它不干净，但是如果您不想对其使用源代码控制，那么我认为您不会找到干净的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:45:09.057

我喜欢在我的 Dropbox 中保留一个二进制库文件夹。这样，我可以从我的家庭和工作项目工作区访问我使用的公共库，并且该服务使版本保持最新。*

# objective-c - - webview 不调用 (void)flagsChanged

> ID：13268533
> 
> 赞同：1
> 
> 时间：2012-11-07T11:12:13.563
> 
> 标签：objective-c, macos, cocoa

我创建了一个可编辑的 WebView，我正在尝试编写一些代码

```
- (void)flagsChanged:(NSEvent *)theEvent 
```

检测，如果用户按下选项键。

但是，如果我键入任何内容，则不会调用此方法。什么可能导致此问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:28:37.940

您是否检查过其他方法没有收到事件？

在这种情况下，您应该将事件发送给下一个响应者，这可能是您的方法。

# regex - perl sed 从正则表达式中转义量词

> ID：13268535
> 
> 赞同：1
> 
> 时间：2012-11-07T11:12:14.970
> 
> 标签：regex, perl

使用 sed 从正则表达式中删除量词和元字符时遇到问题。为了使事情复杂化，该代码旨在在 eval 中使用。

```
$word_check = "about\s*[\w\s]+";
$word_check =~ s/\\\[.+\\\]//g;
$$word_count[$#$word_count + 1] += () = $word_check =~ /(\w+)\s*/g; 
```

Word_check 是正则表达式的副本。想要将正则表达式简化为仅匹配的单词。使用正则表达式来做到这一点。然后计算单词并将结果保存在数组中。选择背后的原因是正则表达式是几个中的一部分，并且在使用匹配 ($&) 时，单词会被删除。从评估。下面的代码旨在作为一个字符串。

```
for ( my \$i = 0; \$i < \$\$ref_word_count[\$R]; \$i++ ) {
    \$temp_str =~ s/^\\w+\\s*//;
} 
```

OK 找到了答案。只需要分解一些 sed 语句并将方括号单独视为一个字符。

```
$word_check =~ s/i$//;
$word_check =~ s/[\.\+]//g;
$word_check =~ s/\\[sdwSWD]//g;
$word_check =~ s/[[]//g;
$word_check =~ s/[]]//g;
$word_check =~ s/[*]//g;
$word_check =~ s/[?]//g; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:13:05.990

可能这有帮助

> \Q 引用（禁用）模式元字符直到 \E
> 
> \E 结束大小写修改或引用部分，想想 vi

见[perldoc perlre](http://perldoc.perl.org/perlre.html#Escape-sequences)

# android - 如何获取 Word/Excel 文档的页数/页数？

> ID：13268541
> 
> 赞同：3
> 
> 时间：2012-11-07T11:12:28.290
> 
> 标签：android, apache-poi, docx4j

在我的项目中，我需要显示 Word 文档（.doc、.docx）文件中的页数和 Excel 文档（.xls、.xlsx）中的工作表数。我尝试使用 Docx4j 读取 .docx 文件，但性能很差，但我只需要字数并尝试使用 Apache POI。我收到一个错误，例如：

```
"trouble writing output: Too many methods: 94086; max is 65536\. By package:" 
```

我想知道是否有任何可用于 android 的付费/开源库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:19:35.613

没有办法在 MS Word 文件中显示确切的页数，因为不同的用户会有所不同。确切数字取决于打印机设置、纸张设置、字体、可用图像等。

不过，您可以对二进制文件执行以下操作：

*   打开文件使用 POIFSFileSystem 或 NPOIFSFileSystem
*   仅提取 FileInformationBlock，因为它在构造函数 HWPFDocumentCore 中完成
*   使用来自 FileInformationBlock 的信息创建 DocumentProperties，因为它是在 HWPFDocument 的构造函数中完成的
*   获取 DOP 的属性 cPg 的值：DocumentProperties::getCPg()

该字段的描述是：“一个有符号整数值，它指定主文档中最后计算或估计的页数，具体取决于 fExactCWords 和 fIncludeSubdocsInStats 的值。”

对于 DOCX/XLSX 文档，您将需要使用 SAX 或 StAX 方法访问相同的（我假设）属性。

# jdbc - 在特定的 AS400 子系统中打开 JDBC 连接

> ID：13268542
> 
> 赞同：2
> 
> 时间：2012-11-07T11:12:37.230
> 
> 标签：jdbc, ibm-midrange, jtopen

我有一个 Web 服务，它通过 JTOpen 在 AS400 上调用一些存储过程。

我想做的是，用于调用存储过程的连接是在具有特定用户的特定子系统中打开的，而不是现在的 qusrwrk/quser（默认）。

我想我可以克隆 qusrwrk 子系统以使其以特定用户启动，但我无法弄清楚在特定子系统中打开连接的机制。

我想应该在连接级别有一个属性来表示subsystem=MySubsystem。

但不幸的是，我还没有找到那个属性。

任何提示将不胜感激。

弗拉维奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:51:52.397

让系统负责启动作业数据库服务器作业的子系统。

您应该只关注应用程序（这是 IBM i 擅长的）。

如果需要，您可以调整 QUSRWRK 的子系统参数，以通过分配内存等来提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T04:31:53.953

系统使用[常见问题解答中所述的预启动作业池：当我执行 WRKACTJOB 时，为什么主机服务器作业在 QUSER 下运行，而不是在 AS400 对象上指定的配置文件下运行？](http://www-03.ibm.com/systems/i/software/toolbox/faq.html#faqW)

> 为了提高性能，主机服务器作业是在 QUSER 下运行的预启动作业。当工具箱连接到主机服务器作业以执行 API 调用、运行命令等时，工具箱会向可用的预启动作业发送请求。此请求包括在表示连接的 AS400 对象上指定的用户配置文件。主机服务器作业接收请求并在运行请求之前切换到指定的用户配置文件。主机服务器本身最初在 QUSER 配置文件下运行，因此 WRKACTJOB 命令的输出将显示该作业由 QUSER 拥有。但是，该作业实际上是在请求中指定的配置文件下运行的。要确定用于任何给定主机服务器作业的配置文件，您可以执行以下三件事之一：

```
1\. Display the job log for that job and find the message indicating which user profile is used as a result of the swap.
2\. Work with the job and display job status attributes to view the current user profile.
3\. Use Navigator for i to view all of the server jobs, which will list the current user of each job. You can also use Navigator for i to look at the server jobs being used by a particular user. 
```

# .htaccess - Codeigniter - 删除 index.php

> ID：13268547
> 
> 赞同：0
> 
> 时间：2012-11-07T11:12:52.273
> 
> 标签：.htaccess, codeigniter-2, codeigniter-url

我已经尝试了几个小时，但无法使其工作。到处寻找答案，似乎没有什么能解决我的问题。

我什至尝试了这里描述的解决方案：[Remove index.php in codeigniter 2.1.0](https://stackoverflow.com/questions/9667226/remove-index-php-in-codeigniter-2-1-0)。一点运气都没有。

我已将 config['index_page'] 设置为 ''。

我的 .htaccess 位于根文件夹（sys 和 app 文件夹所在的位置）上，写法如下：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

尽管如此，我可以访问我的控制器方法的唯一方法是在 url 中使用该死的 index.php。是的，我的 apache conf 启用了 mod rewrite。

任何帮助都会非常好。

**编辑**

我会添加更多信息，也许它是相关的。

*   我正在使用 ZendServer。
*   我现在在 localhost 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:16:37.713

```
RewriteEngine On
RewriteBase /yourdirectoryname/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/ [L] 
```

我在 ZendServer 上没有经验，但是今晚我在 localhost 上使用 xampp（没有 ZendServer）也遇到了这个问题，终于让它工作了：

1.  检查您的 httpd.conf，并确保“LoadModule rewrite_module modules/mod_rewrite.so”行没有被注释。
2.  打开 config.php，设置 $config['base_url'] = 'http://localhost/yourdirectoryname/'
3.  仍在 config.php 中，设置 $config['index_page'] = ''
4.  在与您的 index.php 相同的目录中创建 .htaccess 文件（在我的情况下，htdocs/yourdirectoryname）
5.  该 .htaccess 文件的内容如上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:52:17.433

我没有使用代码点火器的经验，但是如果我理解正确，您正在尝试向用户提供 /index.php/my-page 之类的内容，而无需他在 index.php 之前添加它？

如果我是正确的，你可以尝试这样的事情：

```
RewriteBase /                                 # make sure we always rewrite from within the root directory

RewriteCond %{REQUEST_FILENAME} !-f           # make sure the request is not to an existing file
RewriteCond %{REQUEST_FILENAME} !-d           # nor an existing directory
RewriteCond %{REQUEST_FILENAME} !^index\.php  # make sure we do only interpret requests that DO NOT start with index.php
RewriteRule ^(.*)$ index.php/$1 [L,QSA]       # interpret request as if it were to index.php/...

# make sure we do only interpret requests that DO start with index.php
RewriteRule ^index\.php/(.*)$ $1 [L,R,QSA]    # redirect user to new URL, which will be handled by the first rewriterule 
```

让我知道这是否有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T17:29:50.593

试试这个，我在任何地方的许多主机上都使用过这个，检查：

```
RewriteEngine On
RewriteBase /yoursitedirectory/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果还不够，则转到`config.php`文件并搜索此行：

```
|--------------------------------------------------------------------------
| URI PROTOCOL
|--------------------------------------------------------------------------
|
| This item determines which server global should be used to retrieve the
| URI string.  The default setting of 'AUTO' works for most servers.
| If your links do not seem to work, try one of the other delicious flavors:
|
| 'AUTO'            Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO
|
*/
$config['uri_protocol'] = 'AUTO'; 
```

我使用`AUTO`，但您可能需要将其切换为`REQUEST_URI`or `QUERY_STRING`，尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:11:03.180

我终于设法解决了这个问题。感谢所有答案，特别感谢@ddanurwenda。他的重写规则是唯一解决我问题的规则。

我忽略了一个 Apache 配置：我更改了这一行（来自 httpd.conf）：

```
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory> 
```

到以下：

```
<Directory />
    Options FollowSymLinks
    AllowOverride All
    Order deny,allow
    Deny from all
    Satisfy all
</Directory> 
```

该配置使我的 htaccess 文件无法被读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T09:53:10.600

这就是我使用和工作的。在您的 .htaccess 中使用此代码

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* website/index.php/$0 [PT,L] 
```

只需确保 .htaccess 在您的根文件夹中。（即：xampp/htdocs）

然后在您的 config.php(application\config) 中替换 `config['index_page']='index.php'` 为 `config['index_page']=''`.

# iphone - 如何使用手势识别 Xcode 拖动图像

> ID：13268548
> 
> 赞同：0
> 
> 时间：2012-11-07T11:13:01.567
> 
> 标签：iphone, objective-c, ios, xcode, drag-and-drop

我做了一个小测试，将 UIScrollView 中的视图拖到 UIView 中，我可以在其中调用任何操作。

我正在尝试制作我在 UIScrollView Draggable 中制作的图像。我无法完成这项工作。

我能够创建不是能够拖动的图像的测试视图。

**测试视图控制器.h**

```
#import "JDDroppableView.h"

@interface TestViewController : UIViewController <JDDroppableViewDelegate>
{
UIScrollView* mScrollView;
UIView* mDropTarget;
UIImageView *images;
UIImageView *image;
CGPoint mLastPosition;
}

- (void) relayout;
- (void) addView: (id) sender;
- (void) scrollToBottomAnimated: (BOOL) animated;
@property (nonatomic, retain) IBOutlet UIImageView *images;
@property (nonatomic, retain) IBOutlet UIImageView *image;
@end 
```

**测试视图控制器.m**

```
#import "TestViewController.h"
#import "JDDroppableView.h"
#import <QuartzCore/QuartzCore.h>

// setup view vars
static NSInteger sDROPVIEW_MARGIN = 3;
static CGFloat   sCOUNT_OF_VIEWS_HORICONTALLY = 1.0;
static CGFloat   sCOUNT_OF_VIEWS_VERTICALLY   = 1.0;

@implementation TestViewController
@synthesize images;
@synthesize image;

- (void)loadView
{
[super loadView];
self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];

// increase viewcount on ipad
if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {
    sCOUNT_OF_VIEWS_HORICONTALLY = 0;
    sCOUNT_OF_VIEWS_VERTICALLY   = 0;
}

// add button
UIButton* button = [UIButton buttonWithType: UIButtonTypeCustom];
[button setImage:[UIImage imageNamed:@"002.jpg"] forState:UIControlStateNormal];
button.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth;
[button setTitle: @"+" forState: UIControlStateNormal];
[button addTarget: self action: @selector(addView:) forControlEvents: UIControlEventTouchUpInside];
button.backgroundColor = [UIColor colorWithRed: 0.75 green: 0.2 blue: 0 alpha: 1.0];
button.layer.cornerRadius = 5.0;
button.showsTouchWhenHighlighted = YES;
button.adjustsImageWhenHighlighted = YES;
button.frame = CGRectMake(20,
                          self.view.frame.size.height - 52,
                          self.view.frame.size.width - 40, // width
                          32); // height
[self.view addSubview: button];

// drop target
mDropTarget = [[UIView alloc] init];
mDropTarget.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
mDropTarget.backgroundColor = [UIColor orangeColor];
mDropTarget.frame = CGRectMake(0, 0, 30, 30);
mDropTarget.center = CGPointMake(self.view.frame.size.width/2, button.frame.origin.y - 50);
mDropTarget.layer.cornerRadius = 15;
[self.view addSubview: mDropTarget];
[mDropTarget release];

// scrollview
mScrollView = [[UIScrollView alloc] init];
mScrollView.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
mScrollView.backgroundColor = [UIColor colorWithRed: 0.75 green: 0.2 blue: 0 alpha: 1.0];
mScrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
mScrollView.scrollIndicatorInsets = UIEdgeInsetsMake(5, 5, 5, 5);
mScrollView.contentInset = UIEdgeInsetsMake(6, 6, 6, 6);
mScrollView.layer.cornerRadius = 5.0;
mScrollView.frame = CGRectMake(20,20, self.view.frame.size.width - 40, mDropTarget.center.y - 70);
mScrollView.userInteractionEnabled = NO;
mScrollView.canCancelContentTouches = NO;

[self.view addSubview: mScrollView];
[mScrollView release];

// animate some draggable views in
int numberOfViews            = sCOUNT_OF_VIEWS_HORICONTALLY*floor(sCOUNT_OF_VIEWS_VERTICALLY) + 2;
CGFloat animationTimePerView = 0.15;
for (int i = 0; i < numberOfViews; i++) {
    [self performSelector: @selector(addView:) withObject: nil afterDelay: i*animationTimePerView];
    if (i%(int)sCOUNT_OF_VIEWS_HORICONTALLY==0) {
        [self performSelector: @selector(scrollToBottomAnimated:) withObject: [NSNumber numberWithBool: YES] afterDelay: i*animationTimePerView];
    }
}

CGRect myImageRect = CGRectMake(0, 0, 320, 100);
image = [[UIImageView alloc] initWithFrame:myImageRect];
[image setImage:[UIImage imageNamed:@"002.jpg"]];
[image setUserInteractionEnabled:YES];
[self.view addSubview:image];
[mScrollView addSubview:image];

// reenable userinteraction after animation ended
[mScrollView performSelector: @selector(setUserInteractionEnabled:) withObject: [NSNumber numberWithBool: YES] afterDelay: numberOfViews*animationTimePerView];
}

#pragma layout

- (void) relayout
{
// cancel all animations
[mScrollView.layer removeAllAnimations];
for (UIView* subview in mScrollView.subviews)
    [subview.layer removeAllAnimations];

// setup new animation
[UIView beginAnimations: @"drag" context: nil];

// init calculation vars
float posx = 0;
float posy = 0;
CGRect frame = CGRectZero;
mLastPosition = CGPointMake(0, -100);
CGFloat contentWidth = mScrollView.contentSize.width - mScrollView.contentInset.left - mScrollView.contentInset.right;

// iterate through all subviews
for (UIView* subview in mScrollView.subviews)
{
    // ignore scroll indicators
    if (!subview.userInteractionEnabled) {
        continue;
    }

    // create new position
    frame = subview.frame;
    frame.origin.x = posx;
    frame.origin.y = posy;

    // update frame (if it did change)
    if (frame.origin.x != subview.frame.origin.x ||
        frame.origin.y != subview.frame.origin.y) {
        subview.frame = frame;
    }

    // save last position
    mLastPosition = CGPointMake(posx, posy);

    // add size and margin
    posx += frame.size.width + sDROPVIEW_MARGIN;

    // goto next row if needed
    if (posx > mScrollView.frame.size.width - mScrollView.contentInset.left - mScrollView.contentInset.right)
    {
        posx = 0;
        posy += frame.size.height + sDROPVIEW_MARGIN;
    }
}

// fix last posy for correct contentSize
if (posx != 0) {
    posy += frame.size.height;
} else {
    posy -= sDROPVIEW_MARGIN;
}

// update content size
mScrollView.contentSize = CGSizeMake(contentWidth, posy);

[UIView commitAnimations];
}

- (void) addView: (id) sender
{
CGFloat contentWidth  = mScrollView.frame.size.width  - mScrollView.contentInset.left - mScrollView.contentInset.right;
CGFloat contentHeight = mScrollView.frame.size.height - mScrollView.contentInset.top;
CGSize size = CGSizeMake(((contentWidth-sDROPVIEW_MARGIN*(sCOUNT_OF_VIEWS_HORICONTALLY-1))/sCOUNT_OF_VIEWS_HORICONTALLY),
                         floor((contentHeight-sDROPVIEW_MARGIN*(sCOUNT_OF_VIEWS_VERTICALLY-1))/sCOUNT_OF_VIEWS_VERTICALLY));

JDDroppableView * dropview = [[JDDroppableView alloc] initWithDropTarget: mDropTarget];
dropview.backgroundColor = [UIColor blackColor];
dropview.layer.cornerRadius = 3.0;
dropview.frame = CGRectMake(mLastPosition.x, mLastPosition.y, size.width, size.height);
dropview.delegate = self;

[mScrollView addSubview: dropview];
[dropview release];

[self relayout];

// scroll to bottom, if added manually
if ([sender isKindOfClass: [UIButton class]]) {
    [self scrollToBottomAnimated: YES];
}
}

- (void) scrollToBottomAnimated: (BOOL) animated
{
[mScrollView.layer removeAllAnimations];

CGFloat bottomScrollPosition = mScrollView.contentSize.height;
bottomScrollPosition -= mScrollView.frame.size.height;
bottomScrollPosition += mScrollView.contentInset.top;
bottomScrollPosition = MAX(-mScrollView.contentInset.top,bottomScrollPosition);
CGPoint newOffset = CGPointMake(-mScrollView.contentInset.left, bottomScrollPosition);
if (newOffset.y != mScrollView.contentOffset.y) {
    [mScrollView setContentOffset: newOffset animated: animated];
}
}

#pragma -
#pragma droppabe view delegate

- (BOOL) shouldAnimateDroppableViewBack: (JDDroppableView *)view wasDroppedOnTarget: (UIView *)target
{
[self droppableView: view leftTarget: target];

CGRect frame = view.frame;
frame.size.width *= 0.3;
frame.size.height *= 0.3;
frame.origin.x += (view.frame.size.width-frame.size.width)/2;
frame.origin.y += (view.frame.size.height-frame.size.height)/2;

[UIView beginAnimations: @"drag" context: nil];
[UIView setAnimationDelegate: view];
[UIView setAnimationDidStopSelector: @selector(removeFromSuperview)];

view.frame = frame;
view.center = target.center;

[UIView commitAnimations];

[self relayout];
[mScrollView flashScrollIndicators];

return NO;
}

- (void) droppableViewBeganDragging:(JDDroppableView *)view
{
[UIView beginAnimations: @"drag" context: nil];
view.backgroundColor = [UIColor colorWithRed: 1 green: 0.5 blue: 0 alpha: 1];
view.alpha = 0.8;
[UIView commitAnimations];
}

- (void) droppableView:(JDDroppableView *)view enteredTarget:(UIView *)target
{
target.transform = CGAffineTransformMakeScale(1.5, 1.5);
target.backgroundColor = [UIColor greenColor];
//  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"image Collided"
//                                                message:@"FuckYea"
//                                                delegate:nil
//                                      cancelButtonTitle:@"Reset!"
//                                      otherButtonTitles:nil];
//[alert show];
CGRect myImageRect = CGRectMake(0, 0, 320, 100);
images = [[UIImageView alloc] initWithFrame:myImageRect];
[images setImage:[UIImage imageNamed:@"002.jpg"]];
[self.view addSubview:images];
}

- (void) droppableView:(JDDroppableView *)view leftTarget:(UIView *)target
{
target.transform = CGAffineTransformMakeScale(1.0, 1.0);
target.backgroundColor = [UIColor orangeColor];
}

- (void) droppableViewEndedDragging:(JDDroppableView *)view
{
[UIView beginAnimations: @"drag" context: nil];
view.backgroundColor = [UIColor blackColor];
view.alpha = 1.0;
[UIView commitAnimations];
}

@end 
```

**JDDroppableView.h**

```
@class JDDroppableView;

@protocol JDDroppableViewDelegate <NSObject>
@optional
- (void) droppableViewBeganDragging: (JDDroppableView*) view;
- (void) droppableViewDidMove: (JDDroppableView*) view;
- (void) droppableView: (JDDroppableView*) view enteredTarget: (UIView*) target;
- (void) droppableView: (JDDroppableView*) view leftTarget: (UIView*) target;
- (BOOL) shouldAnimateDroppableViewBack: (JDDroppableView*) view wasDroppedOnTarget: (UIView*) target;
- (void) droppableViewEndedDragging: (JDDroppableView*) view;
@end

@interface JDDroppableView : UIView
{   
UIView * mDropTarget;

UIView * mOuterView;
UIScrollView * mScrollView;

BOOL mIsDragging;
BOOL mIsOverTarget;
CGPoint mOriginalPosition;
}

@property (nonatomic, assign) id<JDDroppableViewDelegate> delegate;

- (id) initWithFrame:(CGRect)frame;
- (id) initWithDropTarget:(UIView*)target;

@end 
```

**JDDroppableView.m**

```
#import "JDDroppableView.h"

@interface JDDroppableView (hidden)
- (void) beginDrag;
- (void) dragAtPosition: (UITouch *) touch;
- (void) endDrag;

- (void) changeSuperView;
- (BOOL) handleDroppedView;
@end

@implementation JDDroppableView

@synthesize delegate = _delegate;

- (id)init
{
return [self initWithFrame: [UIApplication sharedApplication].keyWindow.frame];
}

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    mIsDragging = NO;
    mIsOverTarget = NO;
}
return self;
}

- (id) initWithDropTarget: (UIView *) target;
{
self = [self init];
if (self != nil) {
    mDropTarget = target;
}
return self;
}

#pragma mark touch handling

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
[self beginDrag];
[self dragAtPosition: [touches anyObject]];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
[self dragAtPosition: [touches anyObject]];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{   
[self endDrag];
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
 {
[self endDrag];
}

#pragma mark dragging logic

- (void) beginDrag
{
mIsDragging = YES;

if ([_delegate respondsToSelector: @selector(droppableViewBeganDragging:)]) {
    [_delegate droppableViewBeganDragging: self];
};

mOriginalPosition = self.center;

[self changeSuperView];
}

- (void) dragAtPosition: (UITouch *) touch
{
[UIView beginAnimations: @"drag" context: nil];
self.center = [touch locationInView: self.superview];
[UIView commitAnimations];

if ([_delegate respondsToSelector: @selector(droppableViewDidMove:)]) {
    [_delegate droppableViewDidMove:self];
}

if (mDropTarget) {
    CGRect intersect = CGRectIntersection(self.frame, mDropTarget.frame);
    if (intersect.size.width > 10 || intersect.size.height > 10)
    {
        if (!mIsOverTarget)
        {
            mIsOverTarget = YES;

            if ([_delegate respondsToSelector: @selector(droppableView:enteredTarget:)]) {
                [_delegate droppableView: self enteredTarget: mDropTarget];
            }
        }
    }
    else if (mIsOverTarget)
    {
        mIsOverTarget = NO;

        if ([_delegate respondsToSelector: @selector(droppableView:leftTarget:)]) {
            [_delegate droppableView: self leftTarget: mDropTarget];
        }
    }
}
}

- (void) endDrag
{
mIsOverTarget = NO;

if([_delegate respondsToSelector: @selector(droppableViewEndedDragging:)]) {
    [_delegate droppableViewEndedDragging: self];
}

if (mDropTarget) {
    CGRect intersect = CGRectIntersection(self.frame, mDropTarget.frame);
    if (intersect.size.width > 10 || intersect.size.height > 10) {

        if([self handleDroppedView]) {
            mIsDragging = NO;
            return;
        }
    }
}

[self changeSuperView];
mIsDragging = NO; // this needs to be after superview change

[UIView beginAnimations: @"drag" context: nil];
self.center = mOriginalPosition;
[UIView commitAnimations];
}

- (BOOL) handleDroppedView
{
if (mDropTarget && [_delegate respondsToSelector: @selector(shouldAnimateDroppableViewBack:wasDroppedOnTarget:)]) {
    return ![_delegate shouldAnimateDroppableViewBack: self wasDroppedOnTarget: mDropTarget];
}

return NO;
}

#pragma mark superview handling

- (void)willMoveToSuperview:(id)newSuperview
{
if (!mIsDragging && [newSuperview isKindOfClass: [UIScrollView class]]) {
    mScrollView = newSuperview;
    mOuterView = mScrollView.superview;
}
}

- (void) changeSuperView
{
if (!mScrollView) {
    [self.superview bringSubviewToFront: self];
    return;
}

UIView * tmp = self.superview;

[self removeFromSuperview];
[mOuterView addSubview: self];

mOuterView = tmp;

// set new position

CGPoint ctr = self.center;

if (mOuterView == mScrollView) {

    ctr.x += mScrollView.frame.origin.x - mScrollView.contentOffset.x;
    ctr.y += mScrollView.frame.origin.y - mScrollView.contentOffset.y;
} else {

    ctr.x -= mScrollView.frame.origin.x - mScrollView.contentOffset.x;
    ctr.y -= mScrollView.frame.origin.y - mScrollView.contentOffset.y;
}

self.center = ctr;
}
@end 
```

**AppDelegate.h**

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
UIWindow* mWindow;
TestViewController* mViewController;
}

@end 
```

**AppDelegate.m**

```
#import "AppDelegate.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
mWindow = [[UIWindow alloc] initWithFrame: [[UIScreen mainScreen] bounds]];
mWindow.backgroundColor = [UIColor whiteColor];

TestViewController* viewController = [[TestViewController alloc] init];
[mWindow addSubview: viewController.view];

[mWindow makeKeyAndVisible];

return YES;
}

- (void)dealloc
{
[mWindow release];
[mViewController release];

[super dealloc];
} 
```

@结尾

任何帮助深表感谢。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:46:35.367

[您发布了https://github.com/jaydee3/JDDroppableView/](https://github.com/jaydee3/JDDroppableView/)的完整示例代码。

也许您只问一个问题并参考该项目。但是要将它用于 UIImageViews，您需要分配 init 一个 JDDroppableView 并将您的 imageView 放在上面。

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:...];
imageView.autoresizingMask = UIAutoresizingFlexibleWidth | UIAutoresizingFlexibleHeight;
JDDroppableView *droppableView = [[JDDroppableView alloc] initWithFrame:imageView.bounds];
[droppableView addSubview:imageView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:21:29.437

根据苹果的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)

> 新的图像视图对象默认配置为忽略用户事件。如果要在 UIImageView 的自定义子类中处理事件，则必须在初始化对象后将 userInteractionEnabled 属性的值显式更改为 YES。

您需要在 UIImageView 上将 userInteractionEnabled 设置为 YES，如下所示：

```
[image setUserInteractionEnabled:YES]; 
```

希望这有帮助。

# android - 如何在 Android 上处理不同的屏幕分辨率？

> ID：13268549
> 
> 赞同：1
> 
> 时间：2012-11-07T11:13:05.503
> 
> 标签：android

Nexus 10 拥有 2500*1600 分辨率，而同一密度系列中的前一个邻居拥有 1024*800 - ** DOUBLE **

我完全关心图像，我已经拥有 x*x px 的图像，如果我在 Nexus 中使用相同的图像 - 它会伸展吗？

如何处理这些类型的决议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:43:22.180

[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

您应该有替代资源，具体取决于屏幕分辨率。

例如，如果您想要超大屏幕的替代布局，则需要将替代布局放置在 layout-xlarge 中。一般规则是resources_name-qualifier。您可以在 android 指南中找到支持多种分辨率和屏幕尺寸的选项：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:28:19.423

有很多可能的方法来实现这一点，其中一个主要的事情是使用组件大小

width -- dp 中的高度，sp 中的文本大小

其他是您可以使用 layout-ldpi、layout-mdpi、layout-hdpi、layout-xhdpi

dp 和 sp 会解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T20:41:52.640

您可以通过代码确定屏幕的大小，然后应用必要的代码。例如，我需要根据不同的屏幕分辨率更改文本大小。

```
public void setMainButtonTextSize(){
    if (isXLargeScreen()){
        mainButtonTextSize = 38;
        mainButtonDownTextSize = 32;
        titleTopButtonTextSize = 80;
        titleBottomButtonTextSize = 60;
        timeTextSize = 36;
        dayTextSize = 26;
        dateTextSize = 36;

    } else if (isLargeScreen()){
        mainButtonTextSize = 28;
        mainButtonDownTextSize = 22;
        titleTopButtonTextSize = 70;
        titleBottomButtonTextSize = 50;
        timeTextSize = 26;
        dayTextSize = 16;
        dateTextSize = 26;
    } else if (isNormalScreen()){
        mainButtonTextSize = 18;
        mainButtonDownTextSize = 14;
        titleTopButtonTextSize = 40;    
        titleBottomButtonTextSize = 30;
        timeTextSize = 16;
        dayTextSize = 12;
        dateTextSize = 16;
    }  else if (isSmallScreen()){
        mainButtonTextSize = 12;
        mainButtonDownTextSize = 10;
        titleTopButtonTextSize = 30;
        titleBottomButtonTextSize = 20;
        timeTextSize = 12;
        dayTextSize = 8;
        dateTextSize = 12;
    }
} 

public Boolean isLargeScreen(){
    if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE) {
        return true;
    } else 
        return false;       
}

public Boolean isNormalScreen(){
    if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_NORMAL) {
        return true;
    } else 
        return false;       
}

public Boolean isSmallScreen(){
    if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_SMALL) {
        return true;
    } else 
        return false;       
}

public Boolean isXLargeScreen(){
    if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_XLARGE) {
        return true;
    } else 
        return false;       
} 
```

根据返回值，我相应地更改文本大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:32:48.733

阿伦·钱德拉万希

在android中处理多种分辨率：

1) 在 android Application project anatomy 4 文件夹 1) hdpi、mdpi、ldpi 和 xhdpi（在 res 文件夹中）中，您可以将图像放在这里以用于多种屏幕尺寸的设备。系统会根据设备自动从这些文件夹中选择图像。

2) 指定字体大小时使用 sp 而不是 dp。

3) us dp 代替 px。

4）主要是我们线性布局和相对布局而不是其他布局。

5) 使用 9 个补丁图像。

6) 避免使用绝对布局。

7）使用png图像。

8) 横向模式使用 layout-land 文件夹。

谢谢。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-07T13:02:07.520

该线程中的要点是设计多屏幕布局的通用技巧-

我得到了答案——

我们甚至可以使用drawing-sw1200-xhdpi根据分辨率对drawable进行子分类

问候 SS

# java - CXF-Servlet 初始启动

> ID：13268550
> 
> 赞同：0
> 
> 时间：2012-11-07T11:13:08.433
> 
> 标签：java, tomcat, cxf

我有一个非常基本且重要的问题要问您：当我将 url 调用到我的 servlet 时，由 EmbeddedTomcat 控制的我的 CXFServlet 部署了 web 服务。

我该如何改变呢？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:22:36.047

`<load-on-startup>1</load-on-startup>`在 web.xml 中使用：

```
<servlet>
    <servlet-name>cxf</servlet-name>
    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
    <init-param>
        <param-name>config-location</param-name>
        <param-value>classpath:cxf-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

# java - Java 中的 Lucene(QueryParser)

> ID：13268552
> 
> 赞同：2
> 
> 时间：2012-11-07T11:13:13.677
> 
> 标签：java, lucene

我通过 QueryParser 创建查询：

```
QueryParser parser = new QueryParser(Version.LUCENE_30, "Text", new RussianAnalayzer());
parser.setDefaultOperator(QueryParser.Operator.AND);
Query query = parser.parse(searchString); 
```

当我使用单词有变化的短语时，我得到了与“AND”的统一，例如：“term1 term2”->“term1 AND “term2_1 AND term2_2”。如何在不为单词拆分字符串的情况下获得如下查询：“term1 AND “term2_1 OR term2_2””？

太谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:45:24.587

我不完全确定我理解你。term2如何拆分成多个term？它只是存储在您正在谈论的变量中的术语列表吗，例如： term1 = "term1" term2 = "term2_1 term2_2" query = term1 + " " + term2;

还是真的只有两个术语，它们是自动拆分的（可能是由分析器或其他东西）？

无论如何，我认为将第二行更改为：

```
parser.setDefaultOperator(QueryParser.Operator.OR);
//Or just delete this line if you prefer, OR is the default behavior. 
```

并根据该行为传递一个有意义的查询，例如：

```
"term1 AND (term2)" 
```

这大概相当于：

```
"term1 AND (term2_1 term2_2)" 
```

# java - 为 tomcat-apache,axis2,jdk 设置 ubuntu 服务器

> ID：13268555
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:13:16.267
> 
> 标签：java, tomcat, webserver, axis2, ubuntu-12.04

我必须为以下要求设置一台服务器：

```
jdk,
Apache-tomcat,
axis-2 
```

在这里我收到以下错误：

```
Terminating connection listener    org.apache.axis2.transport.http.server.DefaultConnectionListener@73d2c4aa after 10retries in 0 seconds.
java.net.BindException: Address already in use
   at java.net.PlainSocketImpl.socketBind(Native Method)
   at java.net.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:376)
   at java.net.ServerSocket.bind(ServerSocket.java:376)
   at java.net.ServerSocket.<init>(ServerSocket.java:237)
   at java.net.ServerSocket.<init>(ServerSocket.java:128)
   at org.apache.axis2.transport.http.server.DefaultConnectionListener.run(DefaultConnectionListener.java:80)
   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
   at java.lang.Thread.run(Thread.java:722) 
```

我该如何解决这个错误。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:18:42.190

似乎您的 tomcat 端口/进程已经在运行。尝试杀死它们并重新启动。

```
 ps -ef | grep java 
```

命令将为您提供与 java 相关的运行进程作为关键字，您将找到搜索进程的进程 ID。然后你可以通过进程 ID 杀死进程（例如 - ：123456）

```
 kill -9 123456 
```

你可以在这里[学习](http://www.cyberciti.biz/faq/kill-process-in-linux-or-terminate-a-process-in-unix-or-linux-systems/)

# android - 以编程方式暂时禁用自动更新

> ID：13268557
> 
> 赞同：8
> 
> 时间：2012-11-07T11:13:23.737
> 
> 标签：android, auto-update

我有一个自行车计算机应用程序，可以在用户骑行时记录数据。我有一个用户报告了一个我没有考虑过的问题。他出去长途骑行（100 多英里），但在外出并记录数据时，该应用程序通过 Google 更新后会自动更新。不幸的是，这导致应用程序在录制过程中中断，用户丢失数据，直到他们发现发生了什么并重新启动应用程序。

理想情况下，我希望能够在应用程序记录数据时以编程方式停止发生的自动更新。我所有的研究表明这是不可能的，但我可能错过了一些东西，所以有人知道这样做的方法吗？

如果没有解决方案，我能做的最好的就是建议用户在 Play 应用程序中**仅通过 wifi**选项启用更新，这在这种情况下会有所帮助。不幸的是，我的应用程序的关键点之一是它会使用 ANT+ 传感器记录室内会话，所以我有很多人在 wifi 活跃的情况下使用它。

**编辑**

我设法做了这个实验，看看昨晚我自己会发生什么。我有一个应用程序进入后台数据记录，然后将一个新版本推送到 Google Play。不幸的是，当我不得不在 10 小时后离开时，它并没有完全自动获取，但我打开了 Play 商店应用程序，它发现更新它没有自动开始更新，但我强迫它。下载和安装新版本的行为扼杀了正在进行的工作。在我使用通知进入新版本之前，它已经死了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:23:02.670

正如你自己所说，你不能按照你的要求去做。您可以通过每次更新时更改权限来破解它。然后会以常规方式提示用户。

我不确定正在运行的自动更新应用程序的“生命周期”。但是我在某个地方读到的不是重新安装，而是重新打开导致它崩溃的应用程序。如果是这种情况，您可以设置一个标志，指示用户当前正在记录，然后在重新启动时恢复记录。但是我们再次需要更多地了解正在运行的活动/应用程序的内部运作并获得自动更新（实际上并不认为它会发生）。

**编辑**

根据您的发现，我会说您必须处理应用程序在 onDestroy 等中关闭或/并确保您持久保存所有内容。然后，您可能需要 2 个应用程序，其中 1 个应用程序监听另一个正在重新安装的应用程序，当这种情况发生时，它会再次启动它（[这里有一个有趣的讨论](https://stackoverflow.com/q/10297149/969325)）。如果您的目标是 api >= 12，那么广播操作[ACTION_MY_PACKAGE_REPLACED](http://developer.android.com/reference/android/content/Intent.html#ACTION_MY_PACKAGE_REPLACED)也可能有兴趣。

# mysql - 由于 NULL 值而创建 MySQL 视图

> ID：13268558
> 
> 赞同：1
> 
> 时间：2012-11-07T11:13:23.503
> 
> 标签：mysql

我尝试设置以下 VIEW 并定义了 3 种情况，这些情况导致 WHERE 子句中 2 个表的列之间的指定匹配。

这或多或少有效，因为该视图具有由于我的陈述而应该被排除的条目。因此，请查看带有 select * 输出的屏幕截图。

你能帮我吗？非常感谢事先。

```
CREATE OR REPLACE VIEW `match` AS SELECT 
a.`werksnr`,
b.`werksnr` AS `werksnr_ref`, 
a.`EAN`,
b.`EAN` AS `EAN_ref`, 
a.`lieferant`,
b.`lieferant` AS `lieferant_ref`, 
a.`artikel`, 
b.`artikel` AS `artikel_ref`,  
a.`artikelbezeichnung` AS `bezeichnung_suspect`,
b.`artikelbezeichnung1`, 
b.`artikelbezeichnung2`

FROM suspect as a, reference as b WHERE 

(a.EAN IS NOT NULL AND b.EAN IS NOT NULL AND a.werksnr IS NOT NULL and b.werksnr IS NOT NULL AND a.EAN = b.EAN AND a.werksnr = b.werksnr) OR
(a.lieferant IS NOT NULL AND b.lieferant IS NOT NULL AND a.werksnr IS NOT NULL AND b.werksnr IS NOT NULL AND a.lieferant = b.lieferant AND a.werksnr = b.werksnr) OR
(a.lieferant IS NOT NULL AND b.lieferant IS NOT NULL AND a.EAN IS NOT NULL AND b.EAN IS NOT NULL AND a.lieferant = b.lieferant AND a.EAN = b.EAN); 
```

[截屏](http://s1.directupload.net/file/d/3067/7uu5asw4_png.htm)

# windows - 网络访问windows服务

> ID：13268559
> 
> 赞同：1
> 
> 时间：2012-11-07T11:13:24.207
> 
> 标签：windows, windows-services

我在创建可以访问网络磁盘上文件的服务时遇到问题。

服务必须具有管理员权限，并且它将由没有管理员权限的用户运行。

我发送路径`UNC` 和文件被服务看到，但是`ACCES_DENIED`当尝试打开网络驱动器或在网络驱动器上做任何事情时它返回错误。

当我将服务作为 server 运行时，一切正常。

我试图找到答案，但在任何地方我都只能找到对我没有帮助的部分答案。

========

我读到标准服务记录为 SYSTEM 无法访问网络。所以我尝试将 id 记录为

1.  `NetworkService`,`LocalService` 它没有工作。以这些用户之一的身份运行后，我的服务无法将文件保存在 c 上：
2.  某种管理员帐户。但我没有成功。
3.  实际登录的用户。我不知道如何获取当前用户的密码。这仍然不适用于没有管理员权限的用户。

========

请告诉我我能做什么？有很多服务以某种方式使用网络资源。他们是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:16:50.263

您需要将服务配置为以具有足够权限的用户身份运行。在这种情况下，您正在寻找网络共享的权利。通常，这需要具有适当权限的域用户。通常，您会要求您的网络管理员为此目的创建一个专用用户帐户。

您似乎在了解有关服务如何运作的一些虚假信息。您谈论在登录用户的帐户下运行服务。请记住，服务在没有用户登录时运行。请记住，在任何时间点都可能有多个登录用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-24T15:14:02.117

对我来说，端口被防火墙阻止了，我必须添加一个入站规则并指定我在我的应用程序中使用的端口。这样防火墙就不会阻止我的端口进行传出连接。

参考：

[https://www.firehousesoftware.com/webhelp/FH/Content/FHEnterprise/FHEnterpriseInstallationGuide/24_StaticPort.htm](https://www.firehousesoftware.com/webhelp/FH/Content/FHEnterprise/FHEnterpriseInstallationGuide/24_StaticPort.htm)

# c# - Winform datagridview 不刷新

> ID：13268564
> 
> 赞同：0
> 
> 时间：2012-11-07T11:13:35.623
> 
> 标签：c#, winforms, datagridview

我已经从工具中创建了一个 datagridview 并从 db 中选择了数据源。通过使用表的数据集，我在 datagridview 中显示数据。但是当我向数据库添加新数据时，我的 gridview 看起来仍然一样，它没有用新数据刷新:(请协助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:04:30.127

当你向数据库中添加数据时，你需要从数据库中重新读取数据到`DataSet`绑定到`DataGridView`控件的那个来查看变化。为什么不向 中添加数据`DataSet`，它会更新，`DataGridView`完成后，您可以使用`DataSet`. 本来就是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:06:17.843

将新数据插入数据库时​​刷新 DataGridView.DataSource。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T21:10:09.947

添加记录后调用：

```
yourDataGridView.DataSource = someTableData   
yourDataGridView.DataBind(); 
```

那应该重新加载数据。

# php - 如何从 Amazon CloudSearch 中的表字段中获取不同的记录

> ID：13268566
> 
> 赞同：1
> 
> 时间：2012-11-07T11:13:39.973
> 
> 标签：php, mysql, amazon-s3, amazon-web-services, amazon-cloudsearch

嗨，我是 Amazon CloudSearch 的新手。在 mysql 中，我们使用 Distinct 关键字来获取唯一记录。如何在 Amazon CloudSearch 中使用此功能..请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T00:20:23.803

Cloudsearch 无法以与 SQL 数据库相同的方式执行“DISTINCT”查询，即返回某些指定字段的值且不重复。

Cloudsearch 始终至少返回与您的搜索条件匹配的所有文档的 ID。

如果您正在寻找一个特定的文档，并且您有它的文档 ID，您可以像这样检索它：

```
.../2011-02-01/search?bq=docid:'mydocid' 
```

否则，您需要在文档中有一个唯一的字段，由您的应用程序强制执行，您可以通过该字段进行搜索。

# hibernate - 在休眠 hsql 中可以“拥有”吗？

> ID：13268570
> 
> 赞同：1
> 
> 时间：2012-11-07T11:13:43.360
> 
> 标签：hibernate

我是新来的冬眠。我想在我的休眠 sql 查询中使用关键字，如下所示：

```
 select from Store where storeName like 'a%' having productCount >1 
```

这里 Store 与 store 表映射，storeName 与 store 表的 store_name 映射，productCount 与 store 表的 product_count 映射。

所有映射工作正常。但是当我运行此查询时，它返回以下错误：

```
 org.hibernate.hql.ast.QuerySyntaxException: unexpected token: having near line 1, column 43. 
```

所以有人帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:52:59.673

您只能`HAVING`与 一起使用`GROUP BY`。没有 GROUP BY 没有意义。在您的示例中，缺少 GROUP BY 子句。

也许你的意思是这个（如果你想计算行数）

```
from Store where storeName like 'a%' group by storeName having count(*) >1 
```

或者这个（如果有一个映射成员变量名称 productCount 的列）

```
from Store where storeName like 'a%' and productCount >1 
```

（PS 在您的示例中更好地使用`from`而不是`select`- 但这与您的错误没有任何关系。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:22:41.210

你不能拥有，两者都应该像

```
 from Store where storeName like 'a%' and productCount >1 
```

# web-services - 可以创建 CXF 非阻塞 Web 服务

> ID：13268571
> 
> 赞同：1
> 
> 时间：2012-11-07T11:13:47.290
> 
> 标签：web-services, jaxb, cxf

**是否可以创建非阻塞 CFX Web 服务？**

使用 2.3.3 版我试图只使用 Async 功能，但如果我同时尝试 1000 个连接，我会得到：

```
Connection closed, 
Caused by: java.net.SocketException: Unexpected end of file from server 
```

我在 jboss 6.1 上运行我的 web 服务。

有什么好的指南吗？我是否需要在服务器端做任何事情，或者在异步方面仅在客户端生成它们就足够了？

我在客户端使用此代码。

```
Response<SearchResponse> response =  getDeliveryInWebservice().searchAsync(getCredentials(), ss);

while(!response.isDone()){
    Thread.sleep(50);
}
SearchResponse searchResponse =  response.get(); 
```

//三连

# c++ - Visual Studio 2005 C++ 继承错误的解决方法

> ID：13268575
> 
> 赞同：5
> 
> 时间：2012-11-07T11:14:05.953
> 
> 标签：c++, inheritance, nested-class, visual-c++-2005

以下代码无法在 Visual Studio 2005 中编译：

```
class OriginalClass
{
public:
    class Delegate
    {
        virtual void original_func()=0;
    };
};

class BaseClass
    :public OriginalClass::Delegate //  Problem line 1
{
public:
    class Delegate
    {
        virtual void base_func(int x) = 0;
    };

    void original_func()override{}  //  Problem line 2
};

class DerivedClass : public BaseClass::Delegate
{
public:
    virtual void base_func(int x) override {};
};

int main ()
{
    DerivedClass derived_object;

    derived_object.base_func(10);
} 
```

构建输出是：

```
1>inherit\main.cpp(26) : error C3668: 'DerivedClass::base_func' : method with override specifier 'override' did not override any base class methods
1>inherit\main.cpp(32) : error C2259: 'DerivedClass' : cannot instantiate abstract class
1>        due to following members:
1>        'void OriginalClass::Delegate::original_func(void)' : is abstract
1>        inherit\main.cpp(7) : see declaration of 'OriginalClass::Delegate::original_func' 
```

如果我注释掉标记为*问题行 1*和*问题行 2*的行，它就可以构建。因此，使用**override**不是问题，从嵌套类继承也不是问题。似乎很难确定哪个 Delegate 类是正确的。

VC2008不存在这个问题。

任何人都可以为此提出解决方法吗？除了显而易见的：升级到现代编译器！

另外，如果有人能指出该错误的任何文档（如果它是一个错误），我将不胜感激。

**编辑：** @Anonymous Coward 建议使用 typedefs，如果 OriginalClass 更改为以下内容，它将编译：

```
class OriginalClass
{
public:
    class Delegate_t
    {
        virtual void original_func()=0;
    };
    typedef Delegate_t Delegate;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:41:39.107

这似乎确实是一个名称解析问题。它在使用 typedef 时编译：

```
class OriginalClass {
    // class Delegate { ... };
    typedef Delegate delegate_t;
};

class BaseClass : public OriginalClass::delegate_t {
    // class Delegate { ... };
    typedef Delegate delegate_t;
};

class DerivedClass : public BaseClass::delegate_t {
    // ...
}; 
```

# continuous-integration - MS Web 部署脚本错误和 TeamCity

> ID：13268577
> 
> 赞同：0
> 
> 时间：2012-11-07T11:14:12.783
> 
> 标签：continuous-integration, teamcity, web-deployment

所以我们使用 TeamCity 作为 CI 服务器 (v 7.1.1)。我们使用 MS 自己的 Web 部署工具作为发布到我们服务器的一种方式（标准 ASP.NET 票价）。但是，我注意到由 web 部署生成的批处理文件似乎与 TeamCity 配合不佳。

这是构建日志中显示的内容：http: [//dpaste.com/826346/](http://dpaste.com/826346/)

脚本清楚地表明发生了错误。然而，TC 似乎无法检测到这一点，因为没有红灯亮起。有没有（好的）方法来解决和检测这个问题，所以我们不会得到不正确的构建运行器状态报告？当前已设置 TC，以便部署脚本由命令行运行程序执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:02:05.713

要修复它，请将 IIS 站点 AppPool 更改为 .net 版本 4.0 - 您的错误消息说应用程序需要 4.0，但 Web 部署工具正在查找 2.0

为了检测它，我认为您可以配置构建失败条件，以在“构建运行程序记录错误消息”时使构建失败。![当构建运行器记录错误消息时构建失败](../Images/007e2ef8c114bfb342bbdefc358bd1d0.png)

# jenkins - Coverity & Jenkins：如何仅分析新提交的代码

> ID：13268578
> 
> 赞同：3
> 
> 时间：2012-11-07T11:14:13.607
> 
> 标签：jenkins, static-analysis, qa

我最近在我的自动化套件中添加了一个新的 Jenkins 作业，以在 C++ 应用程序上运行覆盖率分析。该作业使用 svn 更新到最新代码，然后使用覆盖率（cov-build、cov-analyze 和 cov-format-errors）并创建覆盖率错误的文本文件。但是，该应用程序已经存在了很长时间，并且突出显示了许多覆盖错误。我正在寻找一种方法来运行覆盖，以便它只分析新添加的内容？？有谁知道实现这一目标的方法？也非常欢迎任何其他 Coverity 提示：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:23:53.680

你真的不能这样做。Coverity 不知道什么是新代码，什么不是。

但是有一个解决方法。首先，在您的代码上运行 Coverity，然后在 CIM 服务器中将所有 Coverity 问题标记为 Ignore 和 Intentional。然后，将 Coverity 插件设置为仅在发现新问题时报告。

现在，当 Coverity 在新代码更新后扫描您的代码时，如果发现任何与现有问题基线不匹配的问题，它将触发失败。注意：失败将继续触发，直到您修改代码以使问题消失，或将新问题标记为新问题。

# mysql - PHP/MySQL 多对多。如何？

> ID：13268579
> 
> 赞同：3
> 
> 时间：2012-11-07T11:14:22.893
> 
> 标签：mysql, sql, database, database-design, many-to-many

我最近认为在 MySQL 数据库中存储一个数组可以解决我的问题……然后我把头撞到了墙上，直到我意识到我的问题有一个更简单的解决方案。不幸的是，我似乎无法弄清楚我到底需要做什么。

我有两张桌子。用户和条目。每个用户都可以是任意数量条目的作者。一对多对吗？那么问题来自这样一个事实，即每个条目可以有很多用户。-_-;

正如您所想象的那样，使用数组这样做会......不仅麻烦而且愚蠢，尤其是如果有人设法积累了 2000 个条目。我曾预计我可能需要创建一个额外的表，并且某些资源似乎确实建议这样做，但资源并不像我希望的那样清晰。我需要获取所有用户的帖子，而在其他地方，我需要获取用户的所有帖子。

有人可以解释这样做的最佳方法吗？（当然不使用数组=p）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:22:51.273

你需要制作3张桌子：

*   用户（主键 = id）
    *   ID
    *   姓名
    *   ...
*   条目（主键 = id）
    *   ID
    *   文本
    *   ...
*   userentry（主键=复杂的关键用户，入口）
    *   用户
    *   入口

如果您想获得条目用户，只需执行

```
SELECT
  user.*
FROM
  userentry
INNER JOIN
  user
ON
  userentry.user = user.id
WHERE
  userentry.entry = [your entry-id] 
```

并获取用户的所有条目，只需反过来：

```
SELECT
  entry.*
FROM
  userentry
INNER JOIN
  entry
ON
  userentry.entry = entry.id
WHERE
  userentry.user = [your user-id] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:22:02.770

最好的方法是拥有三个表：

**用户：**

*   `Id`,
*   `Name`,
*   ...

**帖子：**

*   `Id`,
*   `PostName`,
*   ...

**用户帖子：**

*   `Id`代理键，
*   `UserId`,
*   `PostId`.

然后让所有用户发帖

```
SELECT u.*
FROM users u 
INNER JOIN posts p ON u.id = p.userid
WHERE p.id = apostid 
```

要获取用户的所有帖子：

```
SELECT p.*
FROM posts p 
INNER JOIN users u  ON u.id = p.userid
WHERE u.id = auserid 
```

# python - 如何在 matplotlib 中使用下标文本进行注释？

> ID：13268587
> 
> 赞同：2
> 
> 时间：2012-11-07T11:14:40.147
> 
> 标签：python, annotations, matplotlib

我试图用 matplotlib 绘制一些数据，我需要像数学/化学公式一样格式化一些注释。这是我的一些代码。

```
#!/usr/bin/python2 
import numpy as np
import matplotlib.pyplot as pytl
from matplotlib import rc
rc('font',**{'family':'sans-serif','sans-serif':['Helvetica']})
rc('text', usetex=True)
recdt = np.dtype([('compound',str,4),('H_v','f4'),('B_o','f4')]);
gat =  np.loadtxt('tra',dtype=object, usecols=(0,1,2),unpack=True);
gct,ght,gbt=[],[],[]
for c,h,b in np.transpose(gat):
    gct=np.append(gct,c)
    ght=np.append(ght,h)
    gbt=np.append(gbt,b)
ght= ght.astype(np.float)
gbt= gbt.astype(np.float)
hard = pytl
four = hard   #####  
four.scatter(gbt,ght)
hard.title( 'physical stuff' )
hard.xlabel('physical prop 1')
hard.ylabel('physical prop2 ')
for l,x1,y2 in zip ( gct,gbt,ght):
    hard.annotate( l,xy=(x1,y2),xytext=(-24,12),textcoords = 'offset points', arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'),rotation=0 )
hard.ylim([0,10])
hard.savefig('hardcomp.png')
hard.show() 
```

这是一些测试数据

```
ZrC 6.8 1
NbC 8   2
NbN 7   13
RuB2    30  5
BP  3   1
AlP 9.4 3
InSb    2.2 47
C   6   4 
```

数据分为三列，一列是文本，另外两列是数字。我希望 'RbB2' 中的 '2' 以下标结尾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:42:13.803

我们可以用下标显示`2`in `'RbB2'`，使用`TeX`符号： `$\tt{RbB_{2}}$`。在代码中，您只需要修改`c`：

```
import re
for c,h,b in np.transpose(gat):
    c = r'$\tt{{{c}}}$'.format(c = re.sub(r'(\d+)',r'_{\1}', c)) 
```

产生

![在此处输入图像描述](../Images/ded496fc1943daada35853824131434f.png)

* * *

```
import re
import numpy as np
import matplotlib.pyplot as pytl
from matplotlib import rc

rc('font', **{'family':'sans-serif', 'sans-serif':['Helvetica']})
rc('text', usetex = True)
recdt = np.dtype([('compound', str, 4), ('H_v', 'f4'), ('B_o', 'f4')]);
gat =  np.loadtxt('tra', dtype = object, usecols = (0, 1, 2), unpack = True);
gct, ght, gbt = [], [], []
for c, h, b in np.transpose(gat):
    c = r'$\tt{{{c}}}$'.format(c = re.sub(r'(\d+)', r'_{\1}', c))
    gct = np.append(gct, c)
    ght = np.append(ght, h)
    gbt = np.append(gbt, b)
ght = ght.astype(np.float)
gbt = gbt.astype(np.float)
hard = pytl
four = hard   #####  
four.scatter(gbt, ght)
hard.title( 'physical stuff' )
hard.xlabel('physical prop 1')
hard.ylabel('physical prop2 ')
for l, x1, y2 in zip ( gct, gbt, ght):
    print(l, x1, y2)
    hard.annotate(
        l, xy = (x1, y2), xytext = (-24, 12), textcoords = 'offset points',
        arrowprops = dict(arrowstyle = '->', connectionstyle = 'arc3,rad=0'),
        rotation = 0 )
hard.ylim([0, 10])
hard.savefig('hardcomp.png')
hard.show() 
```

# c# - .Net MVC 4 Dropdownlistfor SelectedItem（不仅仅是选定的值，而是选定的文本）

> ID：13268589
> 
> 赞同：1
> 
> 时间：2012-11-07T11:14:43.823
> 
> 标签：c#, asp.net, asp.net-mvc, razor, html.dropdownlistfor

我有一个 for 循环来生成 IEnumerable 列表：

```
public static IEnumerable<SelectListItem> loadData()
{
    DataTable dt = load_from_database;
    List<SelectListItem> list = new List<SelectListItem>();
    foreach (DataRow dr in dt.Rows)
    {
        SelectListItem listItem = new SelectListItem();
        listItem.Text = dr["name"].ToString();
        listItem.Value = dr["id"].ToString();
        list.Add(listItem);
    }
    return list;
} 
```

我有以下模型：

```
public class Models
{
    public string selectedUserApp { get; set; }
    public IEnumerable<SelectListItem> userApps  { get; set;  }
} 
```

和控制器：

```
public ActionResult Index()
{
    var model = new UserApplicationModels();
    userAppsList = loadData();
    model.userApps = userAppsList;
    model.selectedUserApp = model.userApps.First().Value;

    return View(model);
} 
```

然后是视图：

```
@model Models

@Html.DropDownListFor(x=>x.selectedUserApp , Model.userApps) 
```

我得到的是所选项目的值，但我需要获取所选项目的文本。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:53:30.310

如果你想有一个自定义的选择值，那么你需要在你的下拉列表中添加一些代码

```
@Html.DropDownListFor(m => m.selectedUserApp , new SelectList(Model.userApps, "Name", "Name")) 
```

SelectList 是您所需要的，因为您可以设置对象的哪些属性将是值或将是文本：

```
public SelectList(IEnumerable items, string dataValueField, string dataTextField); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:07:11.163

MVC 必须使用标准的 HTTP 发布机制，并且该机制不包含下拉列表的文本。它只包含值。因此，您必须.. 在服务器上，根据 id 查找该值。

你如何做到这一点，取决于你的应用程序。一种选择是再次调用 loadData()，然后执行简单的 linq 查询以返回文本。

```
var data = loadData();

var text = data.Where(x => x.Value == value).Single().Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:30:09.790

1.  正确的方法是提交后重新查询数据库并按项目值搜索项目文本。
2.  您可以缓存**load_from_database**结果值（在 Session 或 HttpCache 中）并从那里搜索项目文本。
3.  另一种方法是将模型附加到另一个字符串字段（例如：
    public string selectedUserAppText { get; set; } 将其传递给您的视图：

@Html.HiddenFor(m => m.selectedUserAppText)

使用 jQuery 代码设置其值，例如：

```
$("#your_dropdown_id").change(function(e) {
  var selectedText = $("#your_dropdown_id").children("option:selected").text();
  $('#your_hidden_for_id').val(selectedText);
}); 
```

提交此表单后，您的 selectedUserAppText 字段将获得选定的项目文本。
请在以下网址查看此操作：http: [//jsfiddle.net/m4zuH/1/](http://jsfiddle.net/m4zuH/1/)

# c++ - 通过 MinGW 上的 Swig/Python 以二进制模式使用 C++ 标准流

> ID：13268591
> 
> 赞同：2
> 
> 时间：2012-11-07T11:14:45.657
> 
> 标签：c++, stream, binary, mingw, swig

我有一个用 C++ 编写的库，它使用标准流来读取和写入对象。我还有一个使用 Swig 生成的 Python 接口，用于访问该库。在 Linux 上一切正常，但在 Windows（在 MinGW 上）似乎不可能通过 Python 接口以二进制模式使用 C++ 标准流。如果流在文本模式下使用，额外的 CR 字符会破坏库。标准流完全封装在 C++ 库中，即我没有通过 Python 接口传递它们。

我尝试了一种适用于使用该库的 C++ 程序的解决方案，即添加行

```
#include <fcntl.h>
int _CRT_fmode = _O_BINARY; 
```

块内

```
%{
#define SWIG_FILE_WITH_INIT
...
%} 
```

在 Swig libfoo.i 文件中，但它没有效果。还添加了一个功能

```
void set_binary_mode() {
  assert(stdin == freopen(0, "rb", stdin));
  assert(stdout == freopen(0, "wb", stdout)); 
} 
```

在 Python 程序的开头调用它似乎什么也没做。同样在 Python 程序的开头执行这些行

```
sys.stdin = os.fdopen(sys.stdin.fileno(), 'rb', 0)
sys.stdout = os.fdopen(sys.stdout.fileno(), 'wb', 0) 
```

和/或

```
if sys.platform == "win32":
  import msvcrt
  msvcrt.setmode(sys.stdout.fileno(), os.O_BINARY)
  msvcrt.setmode(sys.stdin.fileno(), os.O_BINARY)
  msvcrt.setmode(sys.stderr.fileno(), os.O_BINARY) 
```

没有效果。前一个的任何组合也不起作用。

我正在 Windows XP 版本 2002 上编译 MinGW32 上的 C++ 库和 Swig/Python 绑定（在 20120426 上下载的版本）。我使用的工具版本是 Python (2.7.3)、Swig (2.0.8) ) 和 gcc (4.6.2)。

# delphi - TidCookieManager & Redirects

> ID：13268594
> 
> 赞同：0
> 
> 时间：2012-11-07T11:14:55.213
> 
> 标签：delphi, authentication, delphi-xe2, indy, indy10

I get cookie from InternetGetCookieEx on DownloadComplete WebBrwoser. When trying to login to hotmail it get's through but then get's redirected. Even though Gmail works. I am trying to figure out a universal solution to transfer Authenication from WebBrowser to IdCookieManager for Web Parsing.

Test Project = [http://www.megafileupload.com/en/file/373536/Cookie-Tester-rar.html](http://www.megafileupload.com/en/file/373536/Cookie-Tester-rar.html)

**Cookies aswell as redirects are enabled on IdHTPP.**

> Cookies must be allowed Your browser is currently set to block cookies. Your browser must allow cookies before you can use Windows Live ID.

```
 function GetCookie(host: string): string;
    const
      INTERNET_COOKIE_HTTPONLY = 8192;
    var
      hModule: THandle;
      lp: Pointer;
      InternetGetCookieEx: function(lpszUrl, lpszCookieName, lpszCookieData
        : PAnsiChar; var lpdwSize: DWORD; dwFlags: DWORD; lpReserved: pointer)
        : BOOL; stdCall;
      CookieSize: DWORD;
      CookieData: PAnsiChar;
    begin
      LoadLibrary('wininet.dll');
      hModule := GetModuleHandle('wininet.dll');
      if hModule <> 0 then
      begin
        @InternetGetCookieEx := GetProcAddress(hModule, 'InternetGetCookieExA');
        if @InternetGetCookieEx <> nil then
        begin
          CookieSize := 1024;
          Cookiedata := AllocMem(CookieSize);
          if InternetGetCookieEx(PAnsiChar(AnsiString(host)), nil, Cookiedata, CookieSize, INTERNET_COOKIE_HTTPONLY, nil) then
          result:=cookiedata;
          FreeMem(Cookiedata);
        end;
      end;
    end;

procedure EmbeddedWB1DocumentComplete(ASender: TObject; const pDisp: IDispatch;
  var URL: OleVariant);
var
  document: IHTMLDocument2;
  cookies: TStringList;
  uri: TIdURI;
begin
  document := EmbeddedWB1.Document as IHTMLDocument2;
  cookies := TStringList.Create;
  try 
    cookies.Delimiter:=';';
    //cookies.DelimitedText:=GetCookie(document.url);
    cookies.DelimitedText:=document.cookie;
    uri := TIdURI.Create(document.url);
    try
      IdCookieManager1.AddServerCookies(cookies,uri);
      EmbeddedWB1.LoadFromString(http.Get(document.url));
    finally
      uri.Free;
    end;
  finally
    cookies.Free;
  end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:54:45.613

As I mentioned in your [other question](https://stackoverflow.com/questions/13235897), you need to pre-parse the cookies you are extracting from the web browser. It is not enough to simply split the cookie string as-is on `;` characters, since that delimiter is used to both delimit individual cookies from each other as well as delimit `name=value` data from `parameter` data within a single cookie. If you just split the entire string without taking that into account, your `TStringList` is not going to end up with correct cookie data, so you end up passing bad data to `TIdCookieManager`.

You might also consider using the `NavigateComplete/2` events, as the `DocumentComplete` event might be too late when redirects are involved.

# c# - 类似 WPF 页面中的回发功能

> ID：13268597
> 
> 赞同：1
> 
> 时间：2012-11-07T11:15:02.107
> 
> 标签：c#, wpf, xaml

我正在构建一个包含大量页面的 WPF 应用程序。我想知道 Asp.Net 中是否有类似于 IsPostBack 的函数。我只是想知道这是第一次加载特定页面。提前致谢。

xml

```
<Window x:Class="Custom_Track_Reports.LoginWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="LoginWindow" >
<Viewbox Stretch="Fill">
<Grid Background="#FF58B0DF" Height="401">
        <Rectangle Fill="#FFF0F3F4" Height="173" Margin="45,197,58,0" Stroke="Black" VerticalAlignment="Top" AllowDrop="True" />
        <Image Height="125" Margin="340,10,330,0" VerticalAlignment="Top" Source="Images/logo_lrg.png"/>
        <Label Content="Custom Track Reports" HorizontalAlignment="Left" Margin="287,147,0,0" VerticalAlignment="Top" RenderTransformOrigin="0.607,1.112" Width="268" Height="47" FontFamily="Arial" FontSize="26" Foreground="White"/>
        <TextBox Margin="128,0,0,110" TextWrapping="Wrap" VerticalAlignment="Bottom" Height="25" BorderThickness="1" FontFamily="Arial" FontSize="21" Text="" Name="userTextBox" FontStretch="Expanded" Opacity="1" HorizontalAlignment="Left" Width="546" AcceptsReturn="False" KeyDown="userTextBox_KeyDown" />
        <Button x:Name="enterButton" Content="Enter" HorizontalAlignment="Right" Margin="0,311,166,0" VerticalAlignment="Top" Width="110" Height="26" FontSize="14" Style="{DynamicResource button}" Click="enterButton_Click"/>
        <Label Content="User ID" FontSize="20" FontWeight="Bold" Height="40" HorizontalAlignment="Left" Margin="122,215,0,0" Name="label1" VerticalAlignment="Top" Width="105" />
    </Grid>
</Viewbox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:11:43.870

如果您的页面导航是通过 进行`Frame`的，则附加到该`Frame.Navigated`事件。如果您提供更多详细信息（一些 XAML 和代码），那么我们可能会更有帮助......

# java - 使用 JAXB 将空列表编组为不存在的节点

> ID：13268598
> 
> 赞同：2
> 
> 时间：2012-11-07T11:15:05.777
> 
> 标签：java, xml, jaxb, moxy

使用 JAXB，我希望有可能将空列表编组为不存在的节点。我认为 EclipseLink MOXy 有这种可能性，但我无法让它工作。

根据：[http](http://wiki.eclipse.org/User:Rick.barkhouse.oracle.com/Test1) ://wiki.eclipse.org/User:Rick.barkhouse.oracle.com/Test1你应该可以这样做：

```
@XmlElementWrapper(name="line-items", nillable=true)
@XmlNullPolicy(shouldMarshalEmptyCollections=false)
List<LineItem> item = null; 
```

但

```
shouldMarshalEmptyCollections 
```

不是有效属性。

我试过使用 eclipselink 2.4.0、2.4.1 和 2.5.0-M4。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:22:29.187

您可以使用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)的`@XmlPath`映射来映射此用例。我将通过下面的示例演示它与 using 的比较`@XmlElementWrapper`。

**根**

```
package forum13268598;

import java.util.List;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElementWrapper(name="line-items-element-wrapper")
    List<LineItem> item1 = null;

    @XmlPath("line-items-xml-path/item1")
    List<LineItem> item2 = null;

} 
```

**jaxb.properties**

要将 MOXy 用作您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package forum13268598;

import java.util.ArrayList;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        root.item1 = new ArrayList<LineItem>();
        root.item2 = new ArrayList<LineItem>();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

在`@XmlElementWrapper`用例中，为空集合写出一个元素，但不是为`@XmlPath`用例写的。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <line-items-element-wrapper/>
</root> 
```

# c# - C#标志解析

> ID：13268604
> 
> 赞同：2
> 
> 时间：2012-11-07T11:15:23.483
> 
> 标签：c#, parsing, flags

我写了枚举：

```
[Flags]
public enum BundleOS {
    Win32 = 0,
    Win64 = 1,
    Mac = 2
} 
```

我需要从字符串中解析它，然后写入字符串。字符串示例：`"Win32|Win64"`. 下一个代码返回无效结果：

```
BundleOS os;
Boolean result = TryParse<BundleOS>("Win32|Win64", out os); 
```

在`result`变量中，我得到了`false`值。但我需要`true`，`os`价值必须`BundleOS.Win32|BundleOS.Win64`有价值。

* * *

如果我做这样的操作：

```
String x = (BundleOS.Win32|BundleOS.Win64).ToString(); 
```

我需要得到这样的价值：`"Win32|Win64"`，但我得到`"Win64"`。

是否存在这些问题的简单解决方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T11:17:55.667

您的问题是您执行按位运算并且 Win32 等于
0。`Win64 OR Win32`实际上`Win64 OR 0`返回`Win64`.

你可以像这样设置你的枚举：

```
[Flags]
public enum BundleOS 
{
     Win32 = 1,
     Win64 = 2,
     Mac = 4
} 
```

附带说明：我还将指出本周早些时候提出的一个非常好的问题，该问题是关于[如何定义标志枚举](https://stackoverflow.com/q/13222671/1379664)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:23:36.677

除了@Blachshma 给出的关于您的特定标志的答案之外，如果您想采用字符串形式`"Win32|Win64"`并将其转换为您的枚举的实际实例，您还需要做更多的工作。

首先，您只需要`split()`通过 '"|"' 获取字符串即可获取各个值。

然后，您可以使用`Enum.GetNames()`and`Enum.GetValues()`获取原始枚举中元素的名称和值的列表。然后，您可以遍历拆分组件，并从原始枚举中找到匹配的条目（及其值）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T11:25:03.433

试试这个来解析你的标志字符串。我还没有测试，但它应该让你开始：

```
BundleOS flags = "Win32|Win64"
                    .Split('|')
                    .Select(s => (BundleOS)Enum.Parse(typeof(BundleOs), s))
                   .Aggregate((f, i) => f|i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:34:09.950

除了 Blachshma 的回答之外，[MSDN 文档`FlagsAttribute`](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)实际上在“FlagsAttribute 和枚举指南”部分中非常简洁地解释了：

> 以 2 的幂定义枚举常数，即 1、2、4、8 等。这意味着组合枚举常量中的各个标志不重叠。
> 
> 使用 None 作为值为零的标志枚举常量的名称。您不能在按位与运算中使用 None 枚举常量来测试标志，因为结果始终为零。但是，您可以在数值和 None 枚举常量之间执行逻辑比较，而不是按位比较，以确定数值中是否设置了任何位。

# regex - 数字的正则表达式只允许 1 个逗号和小数

> ID：13268605
> 
> 赞同：1
> 
> 时间：2012-11-07T11:15:25.583
> 
> 标签：regex, numbers

我只有有效数字的这个表达式......

```
^[0-9,-\.]+$ 
```

这工作正常，但我需要确保最多可以输入1`,`和 1 ？这需要迎合不同的文化，所以对我来说哪个订单和进来`.`并不重要。`,``.`

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:23:21.270

如果您的正则表达式支持前瞻，您可以使用：

```
^(?=[^,],[^,]$)(?=[^.]\.[^.]$)[\d,.-]+$ 
```

如果没有，那么您可以执行以下操作：

```
^(?:[\d-]*,?[\d-]*\.?[\d-]*|[\d-]*\.[\d-]*,[\d-]*)$ 
```

但我觉得这很丑陋。

请注意，我更改了您的角色类别。`[0-9]`可以缩短为`\d`（请注意，取决于您的正则表达式风格，这可能匹配其他 Unicode 数字而不仅仅是`0-9`），`.`不需要在字符类中转义，并且`-`属于字符类的开头或结尾，否则它们需要转义. 有趣的是，在您的情况下，它甚至没有任何区别，因为`,-.`创建了一系列从`,`to的字符`.`（按 ASCII 顺序）。然而，这个范围内的所有字符都是`,`,`-`和`.`。幸运的你 ;）

然而，这两个答案真的只是做你明确要求的。你的模式仍然会匹配`--.--34,---1--2`和类似的东西。如果您真的想将有效数字与与文化无关的小数点匹配，您可能应该改用它：

```
^-?\d*([.,]\d+)?$ 
```

如果你想匹配一个带`.`小数点和最多`,`一千个分隔符的有效数字（反之亦然），这个：

```
^-?\d{0,3}(?:(?:,\d{3})?(?:\.\d+)?|(?:\.\d{3})?(?:\,\d+)?)$ 
```

我不认为有更短的版本，真的。不用担心所有的`?:`。他们只是使子模式不被捕获。由于无论如何您都不需要它，因此通常会显着提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:00:38.930

这就是我可能会使用的。

```
/^-?\d{0,2}((\.?\d{3})*(,\d+)?|(,?\d{3})*(\.\d+)?)$/
/*

^                   beginning of string
-?                  0 or 1 minus sign
\d{0,2}             0-2 numbers
(
    (\.?\d{3})*     0 or more (3-digit numbers, alternatively preceded by a dot)
    (,\d+)?         0 or 1 (comma and at least 1 number)
|                   or
    (,?\d{3})*      0 or more (3-digit numbers, alternatively preceded by a comma)
    (\.\d+)?        0 or 1 (dot and at least 1 number)
)
$                   end of string

*/ 
```

**编辑：**您可以将其更改为

```
/^-?\d{0,2}((\.?\d{3})*(,\d{1,2})?|(,?\d{3})*(\.\d{1,2})?)$/
                            ^^^                    ^^^ 
```

如果您想将浮动部分限制为 2 位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T12:01:00.873

你可以简单地使用这个正则表达式..它非常简单明了..

```
^(\d*|\d*\,\d*|\d*\.\d*|\d*\.\d*\,\d*|\d*\,\d*\.\d*)$ 
```

# android - 验证电话号码

> ID：13268606
> 
> 赞同：0
> 
> 时间：2012-11-07T11:15:28.693
> 
> 标签：android, telephonymanager

在我的应用程序中，用户应该做的第一件事就是注册。为此，我需要电话号码。所以用户会给出他们的 10 位数字。现在我需要验证用户输入的电话号码是否相同。怎么做 ？我试过`.getLine1Number()`了，但它什么也没有。

按下注册按钮后，我正在调用一个 URL，该 URL 将向用户输入的电话号码发送验证码。直到我显示一个警报对话框。只有在收到消息后，我才会关闭对话框。

因此，当用户提供一个可能不是他们的号码的有效号码时，就会出现问题。

PS：我只需要通过消息获得响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:20:32.687

只有少数服务提供商通过 getLine1Number() 方法提供电话号码。相反，您可以使用 getSimSerialNumber() 方法为每个 sim 获取唯一编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:20:46.160

1.  您是否在 Manifest READ_PHONE_STATE 中设置了权限？
2.  方法仍然可以返回 null

> 返回第 1 行的电话号码字符串，例如 GSM 电话的 MSISDN。如果不可用，则返回 null。

# database - 复制 Oracle 数据库以在同一台服务器上测试数据库的最简单方法？

> ID：13268607
> 
> 赞同：2
> 
> 时间：2012-11-07T11:15:37.573
> 
> 标签：database, oracle, copy, clone

我习惯于使用 SQL Server，当我想在那里复制一个数据库时，我只需要在向导中单击几下，瞧……一个完整的数据库副本，而无需使源数据库脱机。

我们现在还有一个 Oracle 11g，因为有些机器需要它，我想制作一个数据库的副本。只是在同一台服务器上的一个副本，用作我的软件开发的测试数据库。

我发现的所有指令都是充满步骤的页面，无论是否使用 RMAN，您都必须编写脚本，使用命令行的东西......我很惊讶这样一个常见的任务在使用 Oracle 时是多么低效。

没有任何简单的方法来复制数据库吗？也许只是将所有内容导出到 SQL 文件，然后对其进行编辑以使用另一个数据库名称，然后再次执行它？

我看到在 SQL Developer 中，您可以从“工具”菜单中选择“数据库复制...”，但它会询问目标连接。创建目标数据库时如何选择目标是运行向导的重点？或者连接与数据库不同？

感谢您在这里帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:26:54.693

您通常需要一个新数据库来将数据复制到，并且可以使用数据泵导出/导入来复制数据。恐怕没有很多解决方法，但是您可能会考虑的一种选择是更多地使用 VM，例如 Oracle 自己的 VirtualBox，因为它们可以非常容易地克隆，并且可以绝对确定地逐字节-字节保真度。

顺便说一句，制作数据库的逻辑副本（通过导出/导入）的一个问题是，很容易最终得到与表和索引不同的物理模式，这可能会导致查询优化出现意想不到的差异。

# c++ - boost::variant - 为什么“const char *”转换为“bool”？

> ID：13268608
> 
> 赞同：19
> 
> 时间：2012-11-07T11:15:37.867
> 
> 标签：c++, boost, boost-variant

我已声明 a`boost::variant`接受三种类型`string`：`bool`和`int`. 以下代码显示我的变体接受`const char*`并将其转换为`bool`. `boost::variant`接受和转换不在其列表中的类型是正常行为吗？

```
#include <iostream>
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

using namespace std;
using namespace boost;

typedef variant<string, bool, int> MyVariant;

class TestVariant
    : public boost::static_visitor<>
{
public:
    void operator()(string &v) const
    {
        cout << "type: string -> " << v << endl;
    }
    template<typename U>
    void operator()(U &v)const
    {
        cout << "type: other -> " << v << endl;
    }
};

int main(int argc, char **argv) 
{
    MyVariant s1 = "some string";
    apply_visitor(TestVariant(), s1);

    MyVariant s2 = string("some string");
    apply_visitor(TestVariant(), s2);

    return 0;
} 
```

输出：

> 类型：其他 -> 1
> 类型：字符串 -> 一些字符串

如果我从 MyVariant 中删除 bool 类型并将其更改为：

```
typedef variant<string, int> MyVariant; 
```

`const char*`不再转换为`bool`. 这次它被转换为`string`，这是新的输出：

> 类型：字符串 -> 一些字符串
> 类型：字符串 -> 一些字符串

这表示`variant`尝试先将其他类型转换`bool`为`string`. 如果类型转换是不可避免的并且应该总是发生，有没有办法将转换赋予`string`更高的优先级？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T11:30:59.980

这与 无关`boost::variant`，而是与 C++ 选择要应用的转换的顺序有关。在尝试使用用户定义的转换之前（记住这`std::string`是一个用于此目的的用户定义的类），编译器将尝试内置转换。`const char*`没有从to的内置转换`int`，但根据标准中的 §4.12：

> [...] 指针 [...] 类型的纯右值可以转换为 bool 类型的纯右值。

因此编译器很乐意将您转换`const char*`为 a`bool`并且永远不会考虑将其转换为 a `std::string`。

更新：看起来这个明显不需要的转换正在修复。[您可以在此处](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0608r3.html)找到该修复程序的技术说明。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-07T11:23:02.877

我认为这与 没有什么特别的关系`boost::variant`，它与重载决议选择了哪个构造函数有关。重载函数也会发生同样的事情：

```
#include <iostream>
#include <string>

void foo(bool) {
    std::cout << "bool\n";
}

void foo(std::string) {
    std::cout << "string\n";
}

int main() {
    foo("hi");
} 
```

输出：

```
bool 
```

我不知道如何更改变体具有的构造函数[编辑：正如詹姆斯所说，您可以编写另一个在其实现中使用变体的类。然后你可以提供一个`const char*`做正确事情的构造函数。]

也许您可以更改 Variant 中的类型。另一个重载示例：

```
struct MyBool {
    bool val;
    explicit MyBool(bool val) : val(val) {}
};

void bar(MyBool) {
    std::cout << "bool\n";
}

void bar(const std::string &) {
    std::cout << "string\n";
}

int main() {
    bar("hi");
} 
```

输出：

```
string 
```

不幸的是，现在您必须编写`bar(MyBool(true))`而不是`foo(true)`. 更糟糕的是`string/bool/int`，如果您只是将其更改为`string/MyBool/int`then的变体，`MyVariant(true)`则会调用`int`构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-22T19:06:46.833

我猜你想要使用的是字符串文字（不是 const char * 本身）。

然后，您可以尝试 std::string_literals（std::string 的 s-suffix）。

```
#include <iostream>
#include "boost/variant/variant.hpp"
#include "boost/variant/apply_visitor.hpp"

#include <string>
using namespace std::string_literals; // enables s-suffix for std::string literals

using namespace std;
using namespace boost;

typedef variant<string, bool, int> MyVariant;

class TestVariant
    : public boost::static_visitor<>
{
public:
    void operator()(string &v) const
    {
        cout << "type: string -> " << v << endl;
    }
    template<typename U>
    void operator()(U &v)const
    {
        cout << "type: other -> " << v << endl;
    }
};

int main(int argc, char **argv) 
{
    MyVariant s1 = "some string"s; // use s-suffix ("some string"s is std::string, not const char *
    apply_visitor(TestVariant(), s1);

    MyVariant s2 = string("some string");
    apply_visitor(TestVariant(), s2);

    return 0;
} 
```

输出：

```
type: string -> some string
type: string -> some string 
```

# r - 从R中的当前日期获取上个月的开始日期和结束日期

> ID：13268610
> 
> 赞同：29
> 
> 时间：2012-11-07T11:15:40.880
> 
> 标签：r, date

有没有简单的方法可以从 R 中的当前日期获取上个月的开始日期和结束日期？

我只有当前日期。从中，我想获取上个月，上个月的开始日期，上个月的结束日期。

```
currentDate<-Sys.Date() #return today's date as "2012-11-07" 
```

我希望上个月的开始日期为 2012-10-01，结束日期为今天的 2012-10-31。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-07T11:27:28.593

许多包都有方便的日期功能，但要自己动手：

月初功能：

```
som <- function(x) {
  as.Date(format(x, "%Y-%m-01"))
} 
```

和月末函数（虽然你在这里不需要这个）：

```
eom <- function(x) {
  som(som(x) + 35) - 1
} 
```

那应该让你继续前进。例如，要获得上个月的月底：

```
som(Sys.Date()) - 1
[1] "2012-10-31" 
```

和月初：

```
som(som(Sys.Date()) - 1)
[1] "2012-10-01" 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-07T06:53:04.513

使用`lubridate`它是小菜一碟：

```
library(lubridate)
floor_date(Sys.Date() - months(1), "month") 
```

R中有很多好的库。似乎你需要的一切都已经创建了。

**更新后的版本：**

```
library(lubridate)
floor_date(as.Date("2011-03-29"), "month") - months(1) 
```

*这一项已更正，以便在 3 月 29 日正常工作。*

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-11-07T15:17:17.463

你可以使用这个库`lubridate`，它非常擅长做日期运算。

```
library(lubridate)

currentDate <-Sys.Date()
# end of previous month:
eopm <- currentDate - days(day(currentDate))
# [1] "2012-10-31"

# start of previous month:
sopm <- currentDate - days(day(currentDate))
sopm <- sopm - days(day(sopm) - 1)
# [1] "2012-10-01" 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-03-29T18:51:20.290

lubridate 包的另一个选项是使用**回滚**功能，正如描述所说，就是这样做的。

> 回滚将日期更改为上个月的最后一天或该月的第一天。或者，新日期可以保留相同的小时、分钟和秒信息。

```
library(lubridate)

currentDate <- Sys.Date()

end_last_month <- rollback(currentDate)

init_last_month <- rollback(end_last_month, roll_to_first = TRUE) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-06T21:32:22.147

上个月开始日期：

```
format(Sys.Date() - 30, '%Y-%m-01') 
```

上个月结束日期：

```
as.Date(format(Sys.Date(), '%Y-%m-01')) - 1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-03T08:38:02.937

用于`timeperiodsR`获取任何时期的开始和结束日期。

```
# install.packages("timeperiodsR")
timeperiodsR::previous_month() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-03-04T17:39:50.110

该解决方案考虑了这样一个事实，即当您从“2022-03-01”中减去 30 天时，您会在 1 月而不是 2 月到达。

```
# Get end date of previous month
end <- (as.Date(format(Sys.Date(), "%Y-%m-01")) - 1) 

# Get start date of previous month after knowing end date
start <- as.Date(format(end, "%Y-%m-01")) 

start
#> [1] "2022-02-01"
end
#> [1] "2022-02-28"

# Works in edge cases where subtracting 30 days 
# from the current datewill not give you the previous month
date <- "2022-03-01"
end <- (as.Date(format(date, "%Y-%m-01")) - 1) 
#> Error in format.default(date, "%Y-%m-01"): invalid 'trim' argument

# Get start date of previous month after knowing end date
start <- as.Date(format(end, "%Y-%m-01")) 

start 
#> [1] "2022-02-01"
end
#> [1] "2022-02-28" 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2022-03-04 创建(v2.0.1))

这是我编写的一个函数，以更灵活的方式解决这个问题，使用可变时间段（日、周、月、年）并且全部在基础 R 中：

```
calc_previous_date_range <- function(x,
                                     time_period = c("day", "week", "month", "year"),
                                     multiplier = 1,
                                     is_complete = TRUE,
                                     week_start = 1) {

  time_period <- match.arg(time_period)

  if (multiplier == 0) stop(call. = FALSE, "`multiplier` cannot equal 0")

  if (time_period == "day") {

    if (is_complete) {

      start <- x - multiplier

      end <- Sys.Date() - 1

    } else {

      start <- x - (multiplier - 1)

      end <- x

    }

  } else if (time_period == "week") {

    if (is_complete) {

      start <- cut(x - (7 * multiplier), breaks = 'week', start.on.monday = week_start) 
      start <- as.Date(start)

      end <- cut(x, breaks = "week", start.on.monday = week_start) 
      end <- as.Date(end)

      end <- end - 1

    } else {

      start <- cut(x, breaks = 'week', start.on.monday = week_start) 

      if (multiplier > 0) {
        start <- as.Date(start) - (7 * (multiplier - 1)) 
      }

      end <- x

    }

  } else if (time_period == "month") {

    if (is_complete) {

      end <- as.Date(format(x, "%Y-%m-01")) - 1

      start <- as.Date(format(as.Date(end), "%Y-%m-01"))

      if (multiplier > 1) {

        old_month <- as.numeric(format(start, "%m"))

        old_year <- as.numeric(format(start, "%Y"))

        # Calc new month
        new_month <- format(seq(start, length = multiplier, by = "-1 months")[multiplier], "%m")

        # Calc new year
        if (multiplier >= old_month) {

          new_year <- old_year - (1 + floor(((multiplier - old_month) / 12)))

        } else {

          new_year <- old_year

        }

        start <- as.Date(paste0(new_year, "-", new_month, "-01")) 

      }

    } else {

      start <- format(x, "%Y-%m-01")

      start <- as.Date(start)

      if (multiplier > 1) {

        old_month <- as.numeric(format(start, "%m"))

        old_year <- as.numeric(format(start, "%Y"))

        # Calc new month
        new_month <- format(seq(start, length = multiplier, by = "-1 months")[multiplier], "%m")

        # Calc new year
        if (multiplier >= old_month) {

          new_year <- old_year - (1 + floor(((multiplier - old_month) / 12)))

        } else {

          new_year <- old_year

        }

        start <- as.Date(paste0(new_year, "-", new_month, "-01")) 

      }

      end <- x

    }

  } else if (time_period == "year") {

    if (is_complete) {

      end <- as.Date(format(x, "%Y-01-01")) - 1

      start <- as.Date(format(as.Date(end), paste0(as.numeric(format(end, "%Y")) - (multiplier - 1), "-01-01"))) 

    } else {

      start <- format(x, "%Y-%m-01") 

      start <- as.Date(start)

      if (multiplier > 1) {

        old_year <- as.numeric(format(as.Date(start)))

        start <- format(start, old_year - (multiplier - 1), "-%m-01") 

        start <- as.Date(start)

      }

      end <- x

    }

  }

  c(start, end)

} 
```

一些例子：

```
# Last 6 days (including partial days, i.e. today)
calc_previous_date_range(Sys.Date(), "day", 6, is_complete = FALSE)
#> [1] "2022-02-27" "2022-03-04"

# Last complete 6 days 
calc_previous_date_range(Sys.Date(), "day", 6, is_complete = TRUE)
#> [1] "2022-02-26" "2022-03-03"

# Last 3 weeks (including current week)
calc_previous_date_range(Sys.Date(), "week", 3, is_complete = FALSE)
#> [1] "2022-02-14" "2022-03-04"

# Last 3 complete weeks
calc_previous_date_range(Sys.Date(), "week", 3, is_complete = TRUE)
#> [1] "2022-02-07" "2022-02-27"

# Last 3 complete weeks where week start is Sunday instead of Monday
calc_previous_date_range(Sys.Date(), "week", 3, is_complete = TRUE, week_start = 0)
#> [1] "2022-02-06" "2022-02-26"

# Last month (including current month)
calc_previous_date_range(Sys.Date(), "month", 1, is_complete = FALSE)
#> [1] "2022-03-01" "2022-03-04"

# Last complete month
calc_previous_date_range(Sys.Date(), "month", 1, is_complete = TRUE)
#> [1] "2022-02-01" "2022-02-28"

# Last 6 complete months
# Note that the year is handled properly 
calc_previous_date_range(Sys.Date(), "month", 6, is_complete = TRUE)
#> [1] "2021-09-01" "2022-02-28"

# Last year (including current year)
calc_previous_date_range(Sys.Date(), "year", 1, is_complete = FALSE)
#> [1] "2022-03-01" "2022-03-04"

# Last year (excluding current year)
calc_previous_date_range(Sys.Date(), "year", 1, is_complete = TRUE)
#> [1] "2021-01-01" "2021-12-31"

# Last 3 years (excluding current year)
calc_previous_date_range(Sys.Date(), "year", 3, is_complete = TRUE)
#> [1] "2019-01-01" "2021-12-31" 
```

# php - 导出表格到excel symfony2

> ID：13268615
> 
> 赞同：2
> 
> 时间：2012-11-07T11:15:58.490
> 
> 标签：php, symfony

我正在尝试使用 Symfony2 如何使用 php 将 html 表导出到 Excel 文件，谁能帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:19:18.680

您可以使用具有此类功能的 Symfony2 包。

例如：[https](https://github.com/liuggio/ExcelBundle) ://github.com/liuggio/ExcelBundle应该可以。

它提供依赖注入和轻松创建[PHPExcel](http://phpexcel.codeplex.com/)对象。使用 composer 管理依赖并自动加载所需的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:19:18.990

试试[PHPExcel](http://phpexcel.codeplex.com/)。它支持大多数常用的 Excel 功能。

# php - 在 magento 中为类别显示不同的产品图像

> ID：13268616
> 
> 赞同：0
> 
> 时间：2012-11-07T11:16:07.050
> 
> 标签：php, magento, categories

我正在为一家仅销售跳线的公司开发一个 magento 网站。每个跳线可以有三个图像，

图 1：没有模特的套头衫 图 2\. 穿着套头衫的男模特 图 3：穿着套头衫的女模特

一些套头衫将拥有全部 3 个，而一些套头衫将具有基本形象和男性或女性形象

在主页上，我显示没有模型的跳线图像。

我想创建 2 个类别（男性，女性）

当假设选择了男性类别页面时，我想在此页面中显示男性图像。

有什么想法我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:35:38.797

如果您不想创建重复的产品，我能想到的最快方法之一是：

在管理 -> 产品 -> 图像选项卡中

始终在女性照片上选择“缩略图”，为男性选择“small_image”（您也可以创建自己的图像类型，见下文）

在 /app/design/frontend/default/contempospace/template/catalog/product/list.phtml

```
if([category == female])
     <img src="<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->resize(170, 174); ?>
else
     <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(170, 174); ?> 
```

您还可以添加一种新的图像类型，一种用于男性和女性。

如何在 Magento 中添加新的图像类型：

转到管理 -> 目录 -> 属性 -> 管理属性

然后为“商店所有者的目录输入类型”创建一个新的“媒体图像”属性

请参阅[如何在 Magento 的 list.phtml 中访问自定义图像属性](https://stackoverflow.com/questions/13390051/how-to-get-access-to-custom-image-attribute-in-list-phtml-in-magento)

# macos - Mac OSX - 在小程序上运行的 Swing 应用程序中拖放

> ID：13268617
> 
> 赞同：2
> 
> 时间：2012-11-07T11:16:20.720
> 
> 标签：macos, swing, drag-and-drop, applet

我在使我的 Swing 应用程序在 Mac OSX 中工作时遇到了一些问题。这个 Swing 应用程序应该在浏览器内的小程序上运行。

**请注意，这个问题是 mac osx 独有的，只有当小程序在浏览器上运行时才会出现**

我看到的问题是 drop 事件没有正确传递到 Applet 内的组件。以下示例包含一个标签和一个输入字段。如果从标签拖动到输入字段，标签文本应复制到输入字段中。

```
package com.example;

import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

import javax.swing.*;

public class DND extends JApplet {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    JTextField txtField;
    JLabel lbl;

    private void doStart() {

        this.setLayout(new FlowLayout(FlowLayout.CENTER));

        txtField = new JTextField(20);

        lbl = new JLabel("Drag this text to the input field");
        lbl.setPreferredSize(new Dimension(250, 100));
        lbl.setBackground(Color.lightGray);
        lbl.setBorder(BorderFactory.createLineBorder(Color.black));
        lbl.setTransferHandler(new TransferHandler("text"));
        MouseListener ml = new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                JComponent jc = (JComponent) e.getSource();
                TransferHandler th = jc.getTransferHandler();
                th.exportAsDrag(jc, e, TransferHandler.COPY);
            }
        };
        lbl.addMouseListener(ml);

        add(txtField);
        add(lbl);

        setBackground(Color.lightGray);
        setVisible(true);
    }

    @Override
    public void start() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                public void run() {
                    doStart();
                }
            });
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

使用此代码，您必须生成一个 .jar 文件，该文件将在以下 html 中使用，以便您可以在浏览器中运行小程序：

```
<html>
<head>
<title>Menu test Applet</title>
</head>
<body>
<applet id="AppletID" height="800" width="600" 
  code="com.example.DND" 
  archive="*jar_file*.jar">
</applet>
</div>
</body>
</html> 
```

如果您使用 cmd+shift 从浏览器中弹出小程序，一切都会按预期工作。

系统规格：Firefox 16.0.2 Mac OS X 10.7.5 JRE 版本 1.6.0_37-b06（带有插件 1.6.0_37 但这个问题也发生在 1.6.0_31 中）

有人知道我在做什么错吗？

# c++ - 创建文件夹时的安全属性

> ID：13268625
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:16:48.757
> 
> 标签：c++, security, winapi, directory

我有以下代码行：

```
CreateDirectory(full_folder, attr); 
```

现在 attr 变量的类型为 LPSECURITY_ATRRIBUTES 并且当前设置为 NULL。任何人都可以向我提供此变量接受的所有关键字的列表。我在互联网上搜索过，但似乎找不到合适的列表。也许我没有正确搜索。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:24:02.707

`LPSECURITY_ATTRIBUTES`不带关键字，它是指向结构的指针。文档： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa379560 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379560(v=vs.85).aspx)

结构的有用负载是`SECURITY_DESCRIPTOR`一个有效的不透明结构，您可以使用各种 API 函数对其进行操作。文档： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa379561 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379561(v=vs.85).aspx)

# c# - .net 中没有 httpwebrequest 的 Web 数据抓取工具

> ID：13268634
> 
> 赞同：0
> 
> 时间：2012-11-07T11:17:13.723
> 
> 标签：c#, .net

在 .net 中有一些使用 IE 组件的 .net 类。通过它们我们可以读取 htmldom 并进行登录和数据抓取。任何机构都可以给我那些存在的类/程序集的名称。我自己用它来登录和数据报废很早以前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:20:31.950

如果您想从现有网页中抓取数据，请考虑使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T14:47:14.190

我能够做到这一点。关于 HTMLTableRowCollection 的小事是 HTMLTable 留下的。我的代码如下

```
 object o = null;
        InternetExplorer ie = new InternetExplorerClass();
        IWebBrowserApp wb = ie;
        wb.Visible = chkShowBrowser.Checked;
        wb.Navigate("http://LoginPage.aspx", ref o, ref o, ref o, ref o);

        do
        {
            Thread.Sleep(10000);
        } while (wb.Busy);

        if (ie.Document != null)
        {
            var myDoc = ie.Document as HTMLDocument;

            if (myDoc != null)
            {
                var oUserName = (HTMLInputTextElement)myDoc.getElementById("ctl00_MainBodyPlaceholder_PublicPortalLogin_UserName");
                oUserName.value = ConfigurationManager.AppSettings.Get("userName");

                var oPassword =
                    (HTMLInputTextElement)
                    myDoc.getElementById("ctl00_MainBodyPlaceholder_PublicPortalLogin_Password");
                oPassword.value = ConfigurationManager.AppSettings.Get("password");

                var btnSubmitLogin =
                    (HTMLInputElement)myDoc.getElementById("ctl00_MainBodyPlaceholder_PublicPortalLogin_Login");
                btnSubmitLogin.click();

                do
                {
                    Thread.Sleep(10000);
                } while (wb.Busy);

                if (ie.Document != null)
                {
                    wb.Navigate("http://SearchPage.aspx", ref o, ref o, ref o, ref o);

                    do
                    {
                        Thread.Sleep(10000);
                    } while (wb.Busy);

                    if (ie.Document != null)
                    {

                        var oIncidentNumber =
                            (HTMLInputTextElement)
                            myDoc.getElementById("ctl00_MainBodyPlaceholder_txtIncidentNumber");
                        oIncidentNumber.value = ConfigurationManager.AppSettings.Get("incidentNumber");

                        var btnTicketNumberSearch =
                            (HTMLInputElement)myDoc.getElementById("ctl00_MainBodyPlaceholder_btnSearch");
                        btnTicketNumberSearch.click();

                        do
                        {
                            Thread.Sleep(10000);
                        } while (wb.Busy);

                        HTMLTable searchResultTable = myDoc.getElementById("ctl00_MainBodyPlaceholder_gdView_DXMainTable") as HTMLTable;

                        if (searchResultTable != null)
                        {
                            //foreach (var VARIABLE in searchResultTable.T)
                            //{

                            //}
                        }

                        if (chkRenderBody.Checked)
                        {
                            txtFinalTextBox.Text = myDoc.body.outerHTML;
                        }
                    }
                }
            }
        } 
```

# bitmap - Monotouch：位图和参考的问题

> ID：13268636
> 
> 赞同：0
> 
> 时间：2012-11-07T11:17:23.157
> 
> 标签：bitmap, xamarin.ios

我有用 C# VS2010 编写的 dll。它内部有 UserControl 和一些公共 API。dll的主要思想是绘制图像。

问题 1：我有返回 System.Drawing.Bitmap 的公共方法。我如何在 GUI 中显示它，例如使用 UIImageView。

问题 2：我添加了我的 dll 作为参考，编写了代码（只是我的类的构造函数）。编译器说无法导入类型 MyType。为什么以及如何解决。

问题 3：我希望将我的 UserControl 添加到 GUI。所以我需要有能力改变他的属性（这些将反映在绘制的图像上）。如何 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:12:20.083

你不能在 VS 中使用 dll 并在 MT 中使用它。您必须使用 MT 从源代码编译。此外，MT 只了解完整 .NET 框架的一个子集，因此如果您的 dll 包含 UserControl，它可能无法由 MT 构建。

MT 仍然完全依赖原生 iOS API 进行所有用户交互，它并不打算让您在 iOS 上使用 .NET UI 对象/控件。

# unity3d - 减少统一制作的平面的顶点和三角形

> ID：13268644
> 
> 赞同：0
> 
> 时间：2012-11-07T11:17:54.510
> 
> 标签：unity3d

我正在使用统一创建一个平面。问题是这个平面有 200 个三角形和 100 多个顶点。因为我的平面没有改变（我只在上面设置了纹理），我认为平面应该有 2 个三角形和 4 个顶点。这可以做到吗？

更新：我想我需要为我的飞机更换网状过滤器。我在搅拌机中创建了一个只有 4 个顶点的模型，但是在统一删除原始平面网格并放置新的 4 顶点网格后，我只能得到一种可以在我的纹理上找到的颜色，而不是纹理本身。我可以在 4 个顶点的网格上放置纹理吗？如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:24:28.357

使用 4 个顶点/2 个三角形平面应该可以工作，这也是一个好主意 :-)

它可能只显示部分纹理，因为它有一些错误的 UV 坐标。

尝试使用这架飞机：

[https://dl.dropbox.com/u/4375689/Permanent/Plane.3DS](https://dl.dropbox.com/u/4375689/Permanent/Plane.3DS)

我不确定大小是否正确，但它应该具有正确的 UV 坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T02:13:30.447

没错，默认的Unity平面有超过2个tris和4个顶点。要拥有这样的网格，您需要导入它或在代码中创建它。

我已经构建了这个名为 ProceduralPlane 的脚本，它允许您在编辑器中设置段数：[https ://github.com/doukasd/Unity-Components/tree/master/UnityPackages](https://github.com/doukasd/Unity-Components/tree/master/UnityPackages)

# java - java中有没有好的数据流并发库

> ID：13268647
> 
> 赞同：4
> 
> 时间：2012-11-07T11:17:56.903
> 
> 标签：java, clojure, dataflow

我目前正在研究 Clojure 和 Groovy GPars 中的并发数据流模型。是否有任何用纯 Java 编写的库可以让我受益？

我知道我可以导入或委托给 Clojure 或 Java，但如果可能的话，我想要一个不错的专用 Java API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T15:23:38.747

有[Akka](http://akka.io)的数据流模块。它的底层 future/promises 抽象有一个专用的 Java API，但数据流模块被设计为从 Scala 中使用。但根据您的具体需求，Akka 的 futures 和 promise 就足够了。它们的设计、实施和记录都非常好。甚至有一本书专门介绍 Akka 的未来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:12:14.307

[df4j](https://github.com/rfqu/df4j)字面意思是“Java 的数据流”。我认为它是一个很好的库，但请注意，我是作者 :)。

# c++ - 正确初始化智能指针数组

> ID：13268651
> 
> 赞同：5
> 
> 时间：2012-11-07T11:18:33.893
> 
> 标签：c++, arrays, pointers, initialization

对于这种情况：

```
 class A
    {
        //implementation
    };

    class B
    {
     public:
         B();
        ~B();
     private:
         std::vector<std::shared_ptr<A>> _innerArray;
    }; 
```

我应该怎么做`B()`才能创建一个具有有效状态的对象？我是否需要为`A`数组中的每个对象手动调用默认构造函数？我需要做一些特别的事情`~B()`吗？如果 B 类是糟糕设计的例子，请随意说出如何使它变得更好。谢谢。

**编辑** 所以，这是我在这里真正需要的方案。

![在此处输入图像描述](../Images/d810612bd19492f354ec1c13b0cfc14d.png)

因此，仅存储在 A 数组和所有其他对象中的实际值用于存储连接。最简单的示例 - A = 点，B = 通过选定点的线（或曲线），C = 由线描述的平面。希望它使问题更准确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T11:41:21.637

要创建`B`处于有效状态的对象，您无需再做任何事情。您甚至不必为`B`. `std::vector<std::shared_ptr<A>>`那是 的成员`B`将在`B`的构造函数中默认初始化，这意味着它在容器中还没有任何元素。它也将在`~B`感谢`std::vector`和`std::shared_ptr`析构函数中正确删除。

另一方面，例如，如果您想以某种方式对其进行初始化（即 3 个值），则可以在 a的构造函数初始化列表中使用`std::vector`'构造函数。例如：`std::initializer_list``B`

```
class B
{
 public:
     B(): _innerArray{ std::make_shared<A>(),
                       std::make_shared<A>(),
                       std::make_shared<A>() } {}
    ~B() {}
 private:
     std::vector<std::shared_ptr<A>> _innerArray;
}; 
```

请记住，`std::make_shared`使用完美转发，因此您将`A`的构造函数参数作为函数参数而不是类对象本身传递。

回答您对设计的担忧，我想鼓励您在决定共享向量之前先考虑成员的专有所有权。

```
class B
{
 public:
     B();
    ~B();
 private:
     std::vector<std::unique_ptr<A>> _innerArray;
}; 
```

上述实施在许多方面更为有效。首先，它使您的设计更清楚谁负责`A`s 的生命周期。Next`std::unique_ptr`更快，因为它不需要线程安全的引用计数。最后但并非最不重要的一点是，它不会花费任何额外的内存（与常规 C 指针相比），而`std::shared_ptr`可能需要数十字节（24-48）来存储共享状态数据，这在您对小型类进行操作时非常无效。这就是为什么我总是将`std::unique_ptr`智能指针用作我的首选，并且我只`std::shared_ptr`在真正需要它时才回退到它。

**编辑：**

回答您的编辑我将创建 3 个类容器`A`, `B`, `C`. 根据您是否需要它们是多态的事实，我会存储这样的值（非多态类型）：

```
std::deque<A> as;
std::deque<B> bs;
std::deque<C> cs; 
```

或（多态类型）：

```
std::vector<std::unique_ptr<A>> as;
std::vector<std::unique_ptr<B>> bs;
std::vector<std::unique_ptr<C>> cs; 
```

按此顺序（`as`必须比 寿命更长，`bs`并且`bs`必须比 寿命更长`cs`）。然后我将只使用`std::vector<A*>`内部`B`类和`std::vector<B*>`内部`C`类，而不使用任何智能指针。

我希望这会有所帮助。

**编辑：**

更改`std::vector`为`std::deque`在第一种情况下允许容器元素的引用/指针在具有`push_back()`. 然而，它们将无法在擦除元素、排序或其他内容时存活下来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:21:09.823

如果你这样做，向量的大小为零元素，即内容被简单地正确初始化。如果向量是正大小（例如在调用`resize`向量之后），每个元素都会被正确初始化。由于元素是`shared_ptr`s，因此将调用的默认构造函数`shared_ptr`，这意味着您最终将得到一个空指针向量。

如果要从另一个容器复制内容，请使用向量构造函数的迭代器版本：

```
B (SomeContainerTypeContainingSharedPointers container)
: _innerArray (container.begin (), container.end () ) {
} 
```

如果您不想从容器中初始化向量，而是从其他地方（例如动态创建对象）- 自己编写一个输入迭代器类型（即一种“工厂迭代器”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:22:07.370

该向量是空的，因此您不必在默认构造函数中执行任何特殊操作。你也不需要做任何事情`B()`。当调用向量的析构函数时，引用计数`shared_ptrs`将自动减少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T11:22:18.230

Bt 默认`std::shared_ptr<A>`将用`NULL`. 要创建智能指针，请使用`std::make_shared`：

```
_innerArray.push_back(std::make_shared<A>(/*constructor params here*/)); 
```

但是在您的示例中，向量是空的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:23:38.883

默认构造函数已经完成了所需的一切。你甚至可以`B()`不带任何损失地离开。

# openxml-sdk - 当书签在表格中时，我如何替换书签的文本？

> ID：13268652
> 
> 赞同：1
> 
> 时间：2012-11-07T11:18:32.557
> 
> 标签：openxml-sdk

我使用此代码替换 word 中的书签文本：

```
using (WordprocessingDocument wordDoc = WordprocessingDocument.Open("doc3.docx", true))
{

    var bookmarkStarts = wordDoc.MainDocumentPart.Document.Body.Descendants<BookmarkStart>();

    foreach (var start in bookmarkStarts)
    {
       OpenXmlElement elem = item.NextSibling();

                while (elem != null && !(elem is BookmarkEnd))
                {
                    OpenXmlElement nextElem = elem.NextSibling();
                    elem.Remove();
                    elem = nextElem;
                }

                item.Parent.InsertBefore<Run>(new Run(new Text("Hello")), item);
    }  
    wordDoc.Close();
} 
```

但这不适用于书签在表格中的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:59:32.493

您是否检查过您的方法没有删除任何书签？我在稍微编辑后运行了您的测试代码（您的示例代码中没有 var name items），并且我成功地将 Hello 插入到表中的 2 个书签和表中的 2 个中，没有任何问题。

这使我相信您的问题出在其他地方。运行程序后，您是否查看过文档中的 open-xml？有没有错误？

当您将位置留给单词而不是您时，我经历过书签被放置在单词文档中最奇怪的位置。

您也可以像这样使书签相互重叠

```
<bookmark1 start><xml xml><bookmark2 start><bookmark1 end><xml xml><bookmark2 end> 
```

如果您遇到这种情况，您的代码将在书签开始 2 到达书签结束 1 之前删除它，这将导致您的书签不会被替换。

对于较大的复杂文档，您很容易遇到这个问题。我解决它的方法是在进行任何编辑之前对书签进行“排序”。

所以上面的例子会变成

```
<bookmark1 start><xml xml><bookmark1 end><bookmark2 start><xml xml><bookmark2 end> 
```

排序后

我用来执行此操作的代码如下所示：

```
var bookmarks = mainPart.Document.Body.Descendants<BookmarkStart>(); 
for (int i = 0; i < bookmarks.Count(); i++)
{
    var bks = bookmarks.ElementAt(i);
    var next = bks.NextSibling();
    if (next is BookmarkEnd)
    {
        var bme = (BookmarkEnd)next;
        if (int.Parse(bks.Id) - int.Parse(bme.Id) == 1)
        {
            var copy = (BookmarkEnd)next.Clone();
            bks.Parent.RemoveChild<BookmarkEnd>(bme);
            bks.Parent.InsertBefore<BookmarkEnd>(copy, bks);
        }
    }
} 
```

我承认这并不完全是万无一失的，但对我来说效果很好。您可以添加的另一项检查，以避免删除书签在您的替换方法中

这将确保您在插入文本时删除元素时不会删除书签开始

```
while (elem != null && !(elem is BookmarkEnd)) //fjern elementer
            {
                OpenXmlElement nextElem = elem.NextSibling();
                if (elem.LocalName != "bookmarkStart")
                    elem.Remove();
                elem = nextElem;
            } 
```

祝你好运 ：）

# c++ - 是否可以保证不会在 C++ 中优化执行内存写入的代码？

> ID：13268657
> 
> 赞同：29
> 
> 时间：2012-11-07T11:18:42.480
> 
> 标签：c++, optimization, compiler-construction, compiler-optimization

允许 C++ 编译器[优化写入内存](https://stackoverflow.com/q/3785366/57428)：

```
 {
     //all this code can be eliminated
     char buffer[size];
     std::fill_n( buffer, size, 0);
 } 
```

在处理敏感数据时，典型的方法是使用`volatile*`指针来确保编译器发出内存写入。下面是`SecureZeroMemory()`Visual C++ 运行时库 (WinNT.h) 中函数的实现方式：

```
FORCEINLINE PVOID RtlSecureZeroMemory(
     __in_bcount(cnt) PVOID ptr, __in SIZE_T cnt )
{
    volatile char *vptr = (volatile char *)ptr;
#if defined(_M_AMD64)
    __stosb((PBYTE )((DWORD64)vptr), 0, cnt);
#else
    while (cnt) {
        *vptr = 0;
        vptr++;
        cnt--;
    }
#endif
    return ptr;
} 
```

该函数将传递的指针转换为一个`volatile*`指针，然后通过后者写入。但是，如果我在局部变量上使用它：

```
char buffer[size];
SecureZeroMemory( buffer, size ); 
```

变量本身不是`volatile`。因此，根据可观察行为的 C++ 标准定义，写入`buffer`不计为可观察行为，并且看起来可以对其进行优化。

现在下面有很多关于页面文件，缓存等的评论，这些评论都是有效的，但是我们在这个问题中忽略它们。这个问题的唯一问题是内存写入的代码是否被优化掉了。

是否可以确保不会在 C++ 中优化写入内存的代码？解决方案`SecureZeroMemory()`是否符合 C++ 标准？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T09:18:31.390

没有便携式解决方案。如果它愿意，编译器可以在您在内存中的多个位置使用数据时制作数据的副本，并且任何零函数只能将它当时使用的那个函数归零。任何解决方案都将是不可移植的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T08:41:07.380

对于像之类`SecureZeroMemory`的库函数，库编写者通常会努力确保编译器不会内联此类函数。这意味着在片段中

```
char buffer[size];
SecureZeroMemory( buffer, size ); 
```

编译器不知道`SecureZeroMemory`用做什么`buffer`，因此优化器无法证明取出片段不会影响程序的可观察行为。换句话说，库编写者已经做了所有可能的事情来确保这样的代码不会被优化掉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T10:00:58.973

`volatile`关键字可以应用于指针（或 C++ 中的引用）而不需要强制转换，这意味着不会优化通过此指针进行的访问。变量的声明无关紧要。

该行为类似于`const`：

```
char buffer[16];
char const *p = buffer;

buffer[0] = 'a';          // okay
p[0] = 'b';               // error 
```

指向缓冲区的`const`指针的存在不会以任何方式改变变量的行为，只会改变修改后的指针的行为。如果声明了变量`const`，则禁止生成`const`指向它的非指针：

```
char const buffer[16];
char *p = buffer;         // error 
```

相似地，

```
char buffer[16];
char volatile *p = buffer;

buffer[0] = 'a';          // may be optimized out
p[0] = 'b';               // will be emitted 
```

和

```
char volatile buffer[16];
char *p = buffer;         // error 
```

编译器可以自由地删除通过非`volatile` [*左*](http://en.wikipedia.org/wiki/Value_%28computer_science%29)值的访问以及可以证明没有对左值的访问`volatile`发生的函数调用。

该`RtlSecureZeroMemory`函数可以安全使用，因为编译器可以看到定义（包括`volatile`循环内部的访问，或者根据平台，汇编程序语句，它对编译器是不透明的，因此被认为是不可优化的），或者它必须假设该函数将执行`volatile`访问。

如果您希望避免对 <winnt.h> 头文件的依赖，那么类似的函数将适用于任何符合要求的编译器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T09:53:49.717

在内存中存在敏感信息和清除它的时间之间总是存在竞争条件。在那个时间窗口内，您的应用程序可能会崩溃并转储核心，或者恶意用户可能会获得进程地址空间的内存转储，其中包含纯文本的敏感信息。

可能您不应该将敏感信息以纯文本形式存储在内存中。通过这种方式，您可以获得更好的安全性并完全绕过此问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-30T16:12:23.113

C 和 C++ 标准都没有对实现如何在物理内存中存储东西提出任何要求。然而，实现可以自由地指定这些东西，并且适用于需要某些物理内存行为的应用程序的质量实现将指定它们将始终以合适的方式运行。

许多实现处理至少两种不同的方言。在处理他们的“优化禁用”方言时，他们经常详细记录有多少动作将与物理内存交互。不幸的是，启用优化通常会切换到语义较弱的方言，这几乎无法保证任何操作将如何与物理内存交互。虽然在某些可能很重要的易于识别的情况下，虽然它应该可以处理许多简单直接的优化，同时仍然以与“禁用优化”方言一致的方式处理事物，但编译器编写者并不感兴趣提供专注于安全且容易实现的模式的模式。

确保以某种方式处理物理内存的唯一可靠方法是使用一种承诺以这种方式处理物理内存的方言。如果这样做，通常很容易获得所需的治疗。如果不这样做，没有任何东西可以保证“创造性”实现不会做一些意想不到的事情。

# xmpp - smack api给登录gtalk错误

> ID：13268659
> 
> 赞同：0
> 
> 时间：2012-11-07T11:18:48.677
> 
> 标签：xmpp, google-talk

我使用了所有与 smack 相关的 api，以便我可以登录并在我的应用程序中使用 gtalk。所有的 api（smack 3.22、asmack、qsmack）都给了我同样的错误。错误是从 logcat 复制并粘贴在下面。请帮助我，我现在几乎很沮丧:(

```
 XMPPConnection xmppConnection;
            String host = "talk.google.com";
            int port = 6222; 
            String service = "gmail.com";
            String username = "test1";
            String password = "password";

            try {
                xmppConnection = new XMPPConnection(new ConnectionConfiguration(host,
                        port, service));
                xmppConnection.connect();
                xmppConnection.login(username, password);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

服务器无响应：

```
 at    org.jivesoftware.smack.NonSASLAuthentication.authenticate(NonSASLAuthentication.java:74)
   at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:404)
   at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:349)
   at com.android.xmppproject.XmppManager.performLogin(XmppManager.java:56)
   at com.android.xmppproject.XMPPProjectActivity.onCreate(XMPPProjectActivity.java:29)
   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:123)
   at android.app.ActivityThread.main(ActivityThread.java:4627)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:521)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:01:19.360

我认为您提供了不正确的 GTalk 端口。请尝试**端口 = 5222**

# c# - 将信息从类发送到表单到列表框

> ID：13268664
> 
> 赞同：1
> 
> 时间：2012-11-07T11:19:08.583
> 
> 标签：c#, winforms, listbox

我正在尝试将信息发送到列表框到类中的表单。听起来很简单。但是，在方法运行后它不会显示任何内容。

这是我的类和方法“Testclass”，从表格一中调用

```
 public void testclass()
    {
        Form1 m = new Form1();
        int tostng = "36183464";
        m.listBox1.Items.Add(tostng).ToString();
    } 
```

在 Form1 中，我有一个列表框，它的修饰符设置为“公共”，因此不会弹出错误。它会运行，但不会在列表框中输入任何内容。当一切都在 Form1 中时，此代码有效。

谢谢你的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:34:20.637

您正在做的是创建表单的新实例 - 我假设您正在尝试在现有表单的列表框中添加项目？

如果是这样，请这样做。

使用列表框在表单上创建一个函数，例如：

```
public void addItemToListBox(string item)
{
     listBox1.Items.Add(item);
} 
```

然后，在类中（记得添加 using System.Windows.Forms 引用）

```
public void doStuff()
{
     //Change Form1 to whatever your form is called
     foreach (Form frm in Application.OpenForms)
     {
          if (frm.GetType() == typeof(Form1))
          {
               Form1 frmTemp = (Form1)frm;
               frmTemp.addItemToListBox("blah");

          }
     }
} 
```

# c# - 修改EF5 Code First创建的多对多表

> ID：13268665
> 
> 赞同：2
> 
> 时间：2012-11-07T11:19:13.140
> 
> 标签：c#, entity-framework, entity-framework-4, ef-code-first

我有 2 个类，一个是另一个的集合属性，如下所示。

```
public class NotificationMessage
{
    public int ID { get; set; }
    public string Message { get; set; }
    public virtual ICollection<Device> Devices { get; set; }
}

public class Device
{
    public int ID  { get; set; }
    public string Token  { get; set; }
    public virtual ICollection<NotificationMessage> NotificationMessages { get; set; }
}

public class NotificationMessageDevice
{
    [Column(Order = 0), Key, ForeignKey("NotificationMessage")]
    public int NotificationMessageID { get; set; }

    [Column(Order = 1), Key, ForeignKey("Device")]
    public int DeviceID { get; set; }

    public virtual Device Device { get; set; }
    public virtual NotificationMessage NotificationMessage { get; set; }
} 
```

当您像上面那样创建关系时，实体框架非常聪明，可以通过创建 NotificationMessageDevices 在数据库上创建多对多关系。

问题就出现在这里。现在我想将 CreateDate 添加到表 'NotificationMessageDevices' 中。我所做的是，我以实体框架在现有数据库中创建表“NotificationMessageDevices”的方式创建了一个名为“NotificationMessageDevice”的新类。我添加了新属性并调用了 Update-Verbose。第一个例外是关于缺少 ID 属性，它希望我添加 public int ID {get;set;} 但是当我添加它时，它意识到 ID 属性是索引属性，因此我需要删除该表中的所有数据。

这种情况在实体框架上没有数据丢失的解决方法是什么:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:44:20.697

您可以像这样创建链接实体：

```
public class DeviceNotificationMessages
{
    public DeviceNotificationMessages()
    {
        CreateDate = DateTimeOffset.Now;
    }

    [Column(Order = 0), Key, ForeignKey("NotificationMessage")]
    public int NotificationMessageId { get; set; }
    public virtual NotificationMessage NotificationMessage { get; set; }
    [Column(Order = 1), Key, ForeignKey("Device")]
    public int DeviceID { get; set; }
    public virtual Device Device { get; set; }

    public DateTimeOffset CreateDate { get; set; }
} 
```

然后，您需要自己处理向这个新实体的迁移，以避免数据丢失。如果您使用的是代码优先迁移，则需要添加手动迁移（自动迁移将导致数据丢失），然后编辑脚本以防止数据被删除。

# c# - C#线程，线程不是持久的

> ID：13268673
> 
> 赞同：0
> 
> 时间：2012-11-07T11:19:25.723
> 
> 标签：c#, multithreading

大家早，

使用 C# .NET 4.0 和 Visual Studio 2012 Express。

我有一个程序运行一些 SQL 存储过程，然后打开并访问数据库并自动生成报告，然后通过电子邮件发送它们。

我把它设置在一个日期，所以它会在午夜到来时运行。

下面是一个代码示例。

```
private void button1_Click(object sender, EventArgs e)
{
    Thread myUltiThread = new Thread(GetCurrentDate);
    myUltiThread.Start();
}

private void GetCurrentDate()
{
    string myDate = "";
    myDate = DateTime.Today.Day.ToString();

    if(myDate == "7" && myDateToggle == false)
    {
        Task t = new Task(() => RunMonthBackUp());
        t.Start();
    }

    if (myDate == "8" && myDateToggle == true)
    {
        myDateToggle = false;
    }
} 
```

因此，您可以看到，一旦按下按钮，我的程序就会启动线程，该线程使用 getdate 方法，该方法检查日期是否正确。

如果是，那么它会启动一个运行整个过程的任务。

我的问题是这没有发生，我相信这是因为该方法只运行一次。我有一种感觉，这是由于我对使用线程缺乏了解（通常只处理任务）。

有人可以向我指出我哪里出错以及如何正确设置吗？

非常感谢各位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:21:14.163

您的方法只运行一次，因为您没有代码在完成后重复检查时间。

您需要启动一个每天激活一次的计时器，然后`GetCurrentDate`从中调用。

或者最好还是将代码编写为一个简单的程序，该程序只执行一次任务并将其作为计划任务运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:27:25.977

为什么不这样做呢？

```
 private void button1_Click(object sender, EventArgs e)
    {
        Task.Factory.StartNew( () => GetCurrentDate() );
    }

    private void GetCurrentDate()
    {
        if ( DateTime.Today.Day == 7 && myDateToggle == false )
        {
            Task.Factory.StartNew( () => RunMonthBackUp());
        }
        else if ( DateTime.Today.Day == 8 && myDateToggle == true )
        {
            myDateToggle = false;
        }
    } 
```

如果这有其他问题，则与您奇怪的“切换”有关

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:54:35.913

`GetCurrentDate`当方法结束时，您的线程将被终止。您应该在您的方法中提供一个循环并定期检查条件。或者，您可以设置一个计时器 ( `System.Threading.Timer`) 来定期检查条件。

这是第一种方法：

```
private void button1_Click(object sender, EventArgs e)
{
    Thread myUltiThread = new Thread(GetCurrentDate);
    myUltiThread.IsBackground = true;
    myUltiThread.Start();
}

private void GetCurrentDate()
{
    while(true)
    {
        int = DateTime.Today.Day;

        if(myDate == 7 && myDateToggle == false)
        {
            Task t = new Task(() => RunMonthBackUp());
            t.Start();
        }

        if (myDate == 8 && myDateToggle == true)
        {
            myDateToggle = false;
        }

        Thread.Sleep(1);
    }
} 
```

我还将线程设置为后台线程，因此您无需担心终止线程。线程将继续运行，直到程序退出。

# sql - 这个数据检索代码有什么问题？

> ID：13268675
> 
> 赞同：0
> 
> 时间：2012-11-07T11:19:31.160
> 
> 标签：sql, spring, jakarta-ee, callback, jdbctemplate

我是 Java EE 的新手，并且编写了一段代码来填充列表。但是在调试时我发现回调函数没有被执行并且没有数据被检索。请帮忙。

```
public List<VDRNote> getStdVDRNotes()
{
     final List<VDRNote> notes=new ArrayList<VDRNote>();
     String sql="Select NOTE_ID, NOTES from DCTM_VDR_STD_NOTES ORDER BY NOTE_ID ASC";
         RowCallbackHandler rch1=new RowCallbackHandler() {
             public void processRow(ResultSet rs) throws SQLException
             {
                 VDRNote note=new VDRNote();
                 note.setNoteId(rs.getInt("NOTE_ID"));
                 note.setNote(rs.getString("NOTES"));
                 notes.add(note);
             }};
         jdbcTemplate.query(sql,rch1);
         return notes;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:37:21.910

你的代码看起来基本没问题。你确定 jdbcTemplate.query() 被执行了吗？
确保表中有行，否则 processRow() 将不会被执行。
也使用`queryForList`（[API docs](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#queryForList%28java.lang.String,%20java.lang.Class%29)），它更容易阅读。

# jquery - jQuery图片库滑块问题

> ID：13268681
> 
> 赞同：0
> 
> 时间：2012-11-07T11:19:41.763
> 
> 标签：jquery, css

我有一个完整的网页，实现了图像滑块。在我的本地机器上，它工作正常，但是当我将它上传到服务器上时，滑块的右箭头图像不显示。在萤火虫中，图像无法加载，即使转到图像的 url，它也会显示。

将页面向下滚动一点，我们可以在图库标题下找到滑块。您可以看到右箭头不见了，即使您单击箭头的不可见点，它仍然可以使用滑块。

我尝试更新图像/css，但没有成功。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:25:23.953

你的网址是错误的。

在你的页面是 [http://www.domainandseo.com/portfolio/villa/images/RightArrow-normal.png](http://www.domainandseo.com/portfolio/villa/images/RightArrow-normal.png)

正确的是 [http://www.domainandseo.com/portfolio/villa/images/rightArrow-normal.png](http://www.domainandseo.com/portfolio/villa/images/rightArrow-normal.png)

将 R 更改为 r。

# c# - MS 图表，在特定点向现有图表添加三角形

> ID：13268682
> 
> 赞同：0
> 
> 时间：2012-11-07T11:19:46.880
> 
> 标签：c#, mschart

我想知道是否可以在现有图表的特定点 (x,y) 处添加彩色三角形（向上或向下），以便在滚动/缩放图表时更新它们的位置。

我有一个谷歌，但没有偶然发现任何似乎符合这些要求的东西。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:37:03.883

如[MS Chart Samples](http://archive.msdn.microsoft.com/mschart)中所述，您可能可以为此使用注释

```
private void AddLineAnnotation()
{
 LineAnnotation annotation = new LineAnnotation();
 annotation.AnchorDataPoint = Chart1.Series[0].Points[2];
 annotation.Height = -25;
 annotation.Width = -25;
 annotation.LineWidth = 2;
 annotation.StartCap = LineAnchorCapStyle.Arrow;
 annotation.EndCap = LineAnchorCapStyle.Arrow;
 Chart1.Annotations.Add(annotation);
} 
```

您甚至可以将自定义多边形定义为注释

```
private void AddPolygonAnnotation()
{
 PolygonAnnotation annotation = new PolygonAnnotation();
 annotation.AnchorDataPoint = Chart1.Series[0].Points[2];

 // explicitly set the relative height and width
 annotation.Height = 50;
 annotation.Width = 30;

 annotation.BackColor = Color.FromArgb(128, Color.Orange);
 annotation.LineColor = Color.Black;
 annotation.LineDashStyle = ChartDashStyle.Solid;

 // define relative value points for a polygon
 PointF [] points = new PointF[5];
 points[0].X = 0;
 points[0].Y = 0;                
 points[1].X = 100;
 points[1].Y = 0;       
 points[2].X = 100;
 points[2].Y = 100;        
 points[3].X = 0;
 points[3].Y = 100;       
 points[4].X = 50;
 points[4].Y = 50;

 annotation.Path.AddPolygon(points);      
 Chart1.Annotations.Add(annotation);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T17:02:14.753

用标记绘制点图。创建自己的图像并使用 MarkerImage 属性加载自定义图像

解答 解释如何 [在 Microsoft 图表控件中获得倒三角形自定义 MarkerStyles？](https://stackoverflow.com/questions/6682404/custom-markerstyles-possible-in-microsoft-chart-controls)

# android - android EditText 上的自动预测/字典/建议支持

> ID：13268684
> 
> 赞同：2
> 
> 时间：2012-11-07T11:19:49.550
> 
> 标签：android

Android Messaging EditText 支持自动建议，我想为自定义编辑文本提供相同类型的建议或字典支持。

我已经添加了自动更正和自动完成的输入类型

`android:inputType="textAutoCorrect|textAutoComplete"`

但它不起作用，我在 Android 2.3 和 4.0.3 上验证了实现是否有任何适当的方法可以为 EditText 提供自动建议或字典支持？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T04:05:50.023

尝试删除该行`android:inputType="textAutoCorrect|textAutoComplete"`，并且不要调用`setInputType`代码。

# php - PHP 在 MySQL 中节省时间 HH:MM

> ID：13268685
> 
> 赞同：0
> 
> 时间：2012-11-07T11:19:50.080
> 
> 标签：php, mysql

我需要`HH:MM`在 MySQL 中节省时间。

更好的选择是使用`strtotime`PHP 函数保存为 TIMESTAMP 还是`HH:MM:00`TIME？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:37:28.213

这实际上取决于您将如何处理日期。如果您更喜欢在 MySQL 中进行日期计算，那么它的大部分函数都可以使用 DateTimes（或 Times）。或者，如果您在 PHP 中处理日期，大多数函数都依赖于时间戳，所以它们可能是要走的路。

另一个需要考虑的因素是您将存储的日期范围。时间戳最终将在 2038 年用完，而 MySQL DateTimes 将持续到未来。我知道你只存储时间，而不是日期......所以这可能与你无关。

[http://en.wikipedia.org/wiki/Year_2038_problem](http://en.wikipedia.org/wiki/Year_2038_problem)

# mysql - where 子句中的列“u_id”不明确

> ID：13268686
> 
> 赞同：0
> 
> 时间：2012-11-07T11:19:56.807
> 
> 标签：mysql

```
SELECT  `attendence`.`u_id` ,
        DATE_FORMAT(date,'%d-%m-%Y') as  `date`,
        `attendence`.`checkin`, 
        `attendence`.`checkout`,
         `users`.`firstname`,
         `users` .`lastname`
 FROM  `attendence`
 INNER JOIN  `users` ON  `attendence`.`u_id` = `users`.`u_id`
 WHERE  DATE_FORMAT( DATE,  '%Y-%m' ) =  '$combined' AND `u_id`='$u_id'; 
```

请帮助伙计们

当我删除 AND `u_id`='#u_id 它可以工作但返回所有员工详细信息'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:21:37.013

您需要指定该列应`u_id`来自哪个表，因为两个表都有此列。

```
AND `attendence`.`u_id`='$u_id'; 
```

或者

```
AND `users`.`u_id`='$u_id'; 
```

选择一个满足您的需求。无论如何，这两个函数中的任何一个都是相同的，因为它们是两个表的链接列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:21:38.277

代替

```
`u_id`='$u_id'; 
```

经过

```
`users`.`u_id`='$u_id'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:21:58.837

如果您`u_id`在查询中使用多个表，则需要指定`u_id`要使用的表。

在你的 where 子句中使用它：

```
`attendence`.`u_id` = '$u_id'; 
```

# jquery - 使用 jQuery 伪选择器时的奇怪行为 - :visible

> ID：13268687
> 
> 赞同：0
> 
> 时间：2012-11-07T11:19:56.940
> 
> 标签：jquery

请我确认一下

```
$("#myElement").is(":visible"); 
```

仅当 id 为 myElement 的 div 在页面上可见时才应该为真。

我发现无论 myElement 是否修改为**：**

```
$("#myElement").css("visibility","visible"); 
```

或者

```
$("#myElement").css("visibility","hidden"); 
```

**然而：**

```
$("#myElement").is(":visible") 
```

如果 myElement 被修改为**：**

```
$("#myElement").css("display","none"); 
```

所以换句话说，如果元素没有被显示，它可能是假的，也可能不是**假的。**

我已经阅读并重新阅读了文档。我一定遗漏了一些东西，因为我根本无法从文档中找出为什么会这样。它并没有说不要使用隐藏的可见性，也没有说你必须使用 display none。

所以我不确定我是否完全理解其原因以及伪选择器**:visible**的作用。

注意我在尝试使用伪选择器时也有奇怪的行为**:animated**。

谁能解释一下这里发生的事情，特别是参考**:visible**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:28:17.290

[文档](http://api.jquery.com/visible-selector/)中的第一段：

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零。

`Visibility: hidden`仍然在页面上占用空间

# android - Android - 获取在视图上触摸的像素

> ID：13268692
> 
> 赞同：3
> 
> 时间：2012-11-07T11:20:11.107
> 
> 标签：android, android-layout, android-widget

我需要将位置放入`imageview`用户触摸的像素中。

我在我的 中添加了 OnTouch 方法`imageviewer`，但我认为它发送给我的像素不是像素在我`imageviewer`的位置，而是像素在整个视图中的位置。因为我得到的颜色和我触摸的像素颜色不一样

```
miViewer.setOnTouchListener(new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == MotionEvent.ACTION_UP) {
                    // do something here when the element is clicked

                    Bitmap miBitmap = ((BitmapDrawable)miViewer.getDrawable()).getBitmap();

                    int[] viewCoords = new int[2];
                    miViewer.getLocationOnScreen(viewCoords);

                    int touchX=(int)event.getX();
                    int touchY=(int)event.getY();

                    int imageX = touchX - viewCoords[0]; // viewCoords[0] is the X coordinate
                    int imageY = touchY - viewCoords[1]; // viewCoords[1] is the y coordinate

                    //el ontouch da coordenada globales
                Log.e("PixelsView", String.valueOf(imageX) +" " +String.valueOf(imageY));
                Log.e("Screenpx", String.valueOf(touchX) +" " +String.valueOf(touchY));
                int pixelInt=miBitmap.getPixel(imageX,imageY);

                MyColorClass myColorClass=new MyColorClass();
                colorViewer.setBackgroundColor(myColorClass.CalculateSimilarColor(pixelInt));

                }

                return true;
            }
        }); 
```

# objective-c - iPhone 在 Facebook 上分享照片

> ID：13268694
> 
> 赞同：1
> 
> 时间：2012-11-07T11:20:14.213
> 
> 标签：objective-c, ios, facebook-graph-api

我正在使用 facebook SDK 在 facebook 上分享照片，它在模拟器上运行良好，但在设备上崩溃了。谁能帮我摆脱这个？

崩溃日志：

```
observeValueForKeyPath:ofObject:change:context: message was received
but not handled. Key path: state Observed object:     FBSession:
0x62a8b10, state: FBSessionStateClosedLoginFailed, loginHandler: 0x0,
appID: 478897658797357, urlSchemeSuffix: ,
tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0x628d1d0>,
expirationDate: (null), refreshDate: (null), attemptedRefreshDate:
0001-12-30 00:00:00 +0000, permissions:( "status_update" ) 
```

# string - 连接字符串中的数值

> ID：13268698
> 
> 赞同：37
> 
> 时间：2012-11-07T11:20:26.193
> 
> 标签：string, r, concatenation, paste, cat

我想将此输出存储在一个字符串中：

```
> x=1:5
> cat("hi",x)
hi 1 2 3 4 5 
```

所以我使用`paste`，但我得到了这个不同的结果：

```
> paste("hi",x)
[1] "hi 1" "hi 2" "hi 3" "hi 4" "hi 5" 
```

知道如何获取字符串：

```
"hi 1 2 3 4 5" 
```

非常感谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-07T11:23:09.897

`x`您可以通过将字符串连接`"hi"`到来强制强制转换为字符`x`。然后只需`paste()`与`collapse`参数一起使用。如在

```
x <- 1:5
paste(c("hi", x), collapse = " ")

> paste(c("hi", x), collapse = " ")
[1] "hi 1 2 3 4 5" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-07T11:24:01.783

你可以`capture.output`和猫一起使用

```
capture.output(cat('hi',x))
[1] "hi 1 2 3 4 5" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-09T11:12:20.437

您使用`sprintf`：

```
> x=1:5
> str=sprintf("hi %d",x)
> str
[1] "hi 1" "hi 2" "hi 3" "hi 4" "hi 5"
> 
```

# jquery - 从 html 响应评估 javascript？

> ID：13268706
> 
> 赞同：0
> 
> 时间：2012-11-07T11:20:50.973
> 
> 标签：jquery, browser, javascript

var htmlResponse 是包含完整 html 响应的变量，即包含 javascript 函数和 html 内容

现在我想从这个响应中评估 javascript

我在 jquery 函数下面尝试了但不起作用并给出了一些奇怪的错误

```
 $.globalEval(htmlResponse); 
```

我不确定是否有任何标准的 javascript 函数可以提供完整的 html 响应并且函数从中提取 javascript 并对其进行评估（以便它可以执行并可以放入当前浏览器上下文中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:42:30.123

$("#divSelector").html( htmlResponse ) 在追加时会自动评估 javascript

# java - 一般问题。遗产

> ID：13268713
> 
> 赞同：0
> 
> 时间：2012-11-07T11:21:13.380
> 
> 标签：java, generics

我厌倦了下面的问题。请帮忙？我有一个下面的界面

```
/**
* <T> Type of Timestamp. For ex: Date, long, Calendar etc
* 
*/
public interface TimeStamp<T> extends Comparable<TimeStamp<T>>
{

/**
* Returns the timestamp. 
 * @return 
*/
 public T getTimeStamp();

 } 
```

在我的代码中，我有 2 个列表：

```
 List<FileTimeStamp> f = new ArrayList<FileTimeStamp>();
    List<DefaultTimeStamp> t = new ArrayList<DefaultTimeStamp>(); 
```

我想创建一个方法，该方法采用上述 2 个包含时间戳的列表，然后将它们合并。前任：

```
void merge(List<TimeStamp> l1, List<TimeStamp> l2)
{
    l1.addAll(l2);
    Collections.sort(l1);
} 
```

但是上面会产生编译时警告。

> void merge(List l1, List l2)
> 缺少泛型类 TimeStamp 的类型参数，
> 其中 T 是类型变量：T 扩展接口 TimeStamp 中声明的对象

我应该如何在没有任何编译时警告的情况下定义上述方法？我的应该是什么`void merge(List<TimeStamp<????>> l1, List<TimeStamp<????>> l2)`？？？在左边是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:44:50.963

如果您关心类型安全，则必须具有相同的类型。

您的问题的解决方案是：

```
public static <T> void  merge(List<T> left, List< ? extends T> right) {
         left.addAll(right);
} 
```

这将如何工作：

```
 List<TimeStamp> timeList = new ArrayList<>();
  List<DefaultTimeStamp> defaultTimeList = new ArrayList<>();
  List<FileTimeStamp> fileTimeList = new ArrayList<>(); 
```

我们能够很好地执行：

```
 merge(timeList, defaultTimeList);
 merge(timeList, fileTimeList);

 merge(timeList, timeList);
 merge(defaultTimeList, defaultTimeList);
 merge(fileTimeList, fileTimeList); 
```

我们将无法：

```
 merge(fileTimeList, defaultTimeList); 
```

成功的关键是`right`列表项必须分配给列表中的项目类型`left`。

合并后要排序，这是任务的另一部分。要对列表进行排序，存储在列表中的类应实现接口`Comparable`

所以我们最终得到这样的结构：

```
 public interface TimeStamp extends Comparable<TimeStamp> {

    }

    public interface DefaultTimeStamp extends TimeStamp {

    }

    public interface FileTimeStamp extends TimeStamp {

    } 
```

要合并和排序，我们需要限制至少`T`实现的 to 类型[`Comparable<T>`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html)`T`

这看起来像这样：

```
public static <T extends Comparable<? super T>> void  mergeAndSort(List<T> left, List< ? extends T> right) {

    left.addAll(right);
    Collections.sort(left);
} 
```

所以我们可以说你有你想要的。

* * *

但是我会将操作分开并使用[Iterables.concat(Iterable ...)](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html)，在[将多个集合合并到一个逻辑集合中？](https://stackoverflow.com/questions/4896662/combine-multiple-collections-into-a-single-logical-collection)描述它是如何工作的；合并，然后我会对其进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:40:43.557

这对我有用，

```
public interface TimeStamp<T> extends Comparable<TimeStamp<T>> {
    public T getTimeStamp();
}
public class FileTimeStamp<T> implements TimeStamp<T>{

    @Override
    public int compareTo(TimeStamp<T> arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public T getTimeStamp() {
        // TODO Auto-generated method stub
        return null;
    }

}
public class DefaultTimeStamp<T> implements TimeStamp<T>{

    @Override
    public int compareTo(TimeStamp<T> arg0) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public T getTimeStamp() {
        // TODO Auto-generated method stub
        return null;
    }

}
public class Abcd<T> {
    public static void main(String[] args) {
        List<FileTimeStamp<Date>> l1 = new ArrayList<FileTimeStamp<Date>>();
        List<DefaultTimeStamp<Long>> l2 = new ArrayList<DefaultTimeStamp<Long>>();
        Abcd abcd = new Abcd();
        abcd.merge(l1, l2);
    }

    void merge(List<TimeStamp> l1, List<TimeStamp> l2)  {
        l1.addAll(l2);
        Collections.sort(l1);
    }
} 
```

# selenium - 无法使用 selenium 网格在 IE 上运行脚本

> ID：13268716
> 
> 赞同：0
> 
> 时间：2012-11-07T11:21:17.920
> 
> 标签：selenium, internet-explorer-8, grid, testng

我正在使用 selenium 网格在同一台机器上的不同浏览器上运行我的脚本（集线器和节点在同一台机器上）。我的代码在 Firefox 上运行良好，但在 Internet Explorer 上出现错误。

我使用以下命令来配置 Internet Explorer：

**java -jar selenium-server-standalone-2.25.0.jar -role webdriver -hub http://:4444/grid/register -port 5554 -browser platform=WINDOWS,ensureCleanSession=true,browserName="iexplore",version= 8、ignoreProtectedModeSettings=true, javascriptEnable=true**

我正在使用**testng**来运行脚本。

运行测试时，Internet Explorer 窗口打开，但显示“这是 Webdriver 的初始起始页”。测试中指定的 URL 未打开，我收到以下错误：

**org.openqa.selenium.UnhandledAlertException：存在模态对话框**

这是我设置 IE 所需功能的代码：

```
if(browser.equalsIgnoreCase("iexplore")){
            System.out.println("iexplore");
            capability= DesiredCapabilities.internetExplorer();
            capability.setBrowserName("iexplore");
            capability.setVersion("8");
            capability.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);
            capability.setPlatform(org.openqa.selenium.Platform.WINDOWS);
        } 
```

这是打开浏览器的代码：

```
URL url = new URL("http://<hostname>:4444/wd/hub");
driver = new RemoteWebDriver(url, capability);
driver.get("http://google.com"); 
```

请帮助解决我的问题。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:38:12.807

我有一个非常相似的问题。就我而言，这是从 http 切换到 https 时出现的警报。使用以下语句来处理警报：

```
WebDriverWait wait = new WebDriverWait(driver, 5);
wait.until(ExpectedConditions.alertIsPresent());
Alert alert = driver.switchTo().alert();
alert.accept(); 
```

这对我有用。希望这个解决方案会有所帮助。

# ios - Facebook“apprequest”对话框要求登录 Facebook，因为应用程序已将其记录到 Facebook

> ID：13268717
> 
> 赞同：1
> 
> 时间：2012-11-07T11:21:27.550
> 
> 标签：ios, facebook, session, single-sign-on, facebook-ios-sdk

我正在关注 facebook 身份验证的示例

[https://developers.facebook.com/docs/tutorials/ios-sdk-games/authenticate/](https://developers.facebook.com/docs/tutorials/ios-sdk-games/authenticate/)

对于登录，我使用过：

```
 [FBSession openActiveSessionWithPermissions:permissions allowLoginUI:YES 
                                  completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                      if (session.isOpen) 
                                      {
                                          appDelegate.session=session; 

                                      }
                                  }//end completionHandler
         ]; 
```

对于 facebook apprequest 对话框：

```
 if (nil == appDelegate.facebook) 
{
    appDelegate.facebook = [[Facebook alloc]
                            initWithAppId:FBSession.activeSession.appID
                            andDelegate:nil];

    // Store the Facebook session information
    appDelegate.facebook.accessToken = FBSession.activeSession.accessToken;
    appDelegate.facebook.expirationDate = FBSession.activeSession.expirationDate;
}

[self.facebook dialog:APPREQUEST
       andParams:params
     andDelegate:self]; 
```

一段时间后，当我再次尝试运行应用程序时，应用程序已连接到 facebook，并且 FBSession 也处于活动状态，但是当我调用 apprequest 对话框时，它会要求登录。

appDelegate.facebook = [[Facebook alloc] 是否有任何问题或我的会话已过期？

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:10:32.590

尝试将您的 Facebook 对象会话设置代码放在完成处理程序中。每当会话更改时，都应调用完成处理程序，例如，稍后扩展令牌时，应再次调用它。这样您就可以保持 Facebook 对象会话的刷新。您不必自己扩展访问令牌，SDK 现在会自动为您完成。

```
[FBSession openActiveSessionWithPermissions:permissions 
                               allowLoginUI:YES 
                          completionHandler:
    ^(FBSession *session, FBSessionState status, NSError *error) {
        if (session.isOpen) 
        {
            appDelegate.session=session; 

            if (nil == appDelegate.facebook) 
            {
                appDelegate.facebook = [[Facebook alloc]
                        initWithAppId:FBSession.activeSession.appID
                        andDelegate:nil];
            }

            // Store the Facebook session information
            appDelegate.facebook.accessToken = FBSession.activeSession.accessToken;
            appDelegate.facebook.expirationDate = FBSession.activeSession.expirationDate;
        } // if session open
        else 
        {
            appDelegate.facebook = nil;
        } // session not open
    } //end completionHandler
]; 
```

# python - python - 如何在python中使用命名组和datadict从正则表达式模式组合字符串？

> ID：13268721
> 
> 赞同：5
> 
> 时间：2012-11-07T11:21:37.623
> 
> 标签：python, regex

简洁版本：

我想创建一个函数，用来自 datadict 的对应数据替换正则表达式中的所有命名组。例如：

```
Input: expr=r"/(?P<something>\w+)/whatever/(?P<something2>\w+)" data={"something":123, "something2": "thing"}
Output: "/123/whatever/thing" 
```

但我不知道该怎么做。

一些附加信息：

我有代码迭代包含名称和模式的元组列表并尝试使用re.search。如果 re.search 匹配给定的字符串，它会从当前元组和 groupdict() （它是带有来自 re.search 的数据的字典）返回名称。

这是代码

```
class UrlResolver():
def __init__(self):
    self.urls = {}

def parse(self, app, url):
    for pattern in self.urls[app]:
        data = re.search(pattern[1], url)
        if data:
            return {"name": pattern[0], "data": data.groupdict()} 
```

现在我想创建函数：

```
def compose(self, app, name, data):
    for pattern in self.url[app]:
        if pattern[0] == name:
            return string composed from regex expression and data from data dict. 
```

上面的函数应该用来自 datadict 的对应数据替换所有命名组。

## **解决方案**

使用 Hans Then 提供的答案（谢谢！）和其他一些信息是解决方案：

```
 def _group_replacer(data, match):
        data_key = match.group(1)
        return data[data_key]

    expression = r"\([^\(]*<([^<]*)>[^\(]*\)"
    expression = re.compile(expression)

    reversed = re.sub(expression, partial(_group_replacer, data), string) 
```

函数“部分”可以从 functools 导入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T11:33:13.460

看看`re.sub()`功能。可以使用替换函数作为第二个参数调用此函数。请参阅[http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

您必须自己定义该功能。它必须将匹配对象作为其参数。在其中，您应该查看匹配对象，提取匹配组并将其替换为字典中的值。

您可以通过循环遍历组并调用它们，从字符串中提取*不需要从原始字符串中替换的文本。*`start, end = span(group)`

**编辑**

我误读了你原来的问题。我现在看到您不想替换正则表达式中的匹配项，而是替换正则表达式本身。在这种情况下，困难的部分将是创建一个与命名正则表达式匹配的正则表达式。我的解决方案仍然成立，但可以稍微简单一些。

为了进行适当的忏悔，我创建了以下示例。

```
d = { 'something': 'completely',
      'something2': 'different' }

def repl(m):
    s = m.group(1)
    return d[s]

s = "/(?P<something>\w+)/whatever/(?P<something2>\w+)"
p = re.compile(r'\(\?P<(.*?)>\\w\+\)')

print p.sub(repl, s) 
```

这将打印

`/completely/whatever/different`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:32:19.197

使用[FJ here 演示](https://stackoverflow.com/a/4928400/190597)的方法，您可以通过以下方式执行替换：

```
import re

data = {"something" : 123, "something2" : "thing"}
expr = r"/(?P<something>\w+)/whatever/(?P<something2>\w+)"

def matchsub(match, data):
    result = list(match.string)
    pat = match.re
    # print(pat)
    for key, index in pat.groupindex.items():
        # print(key, index, data[key], match.start(index), match.end(index))
        result[match.start(index):match.end(index)] = str(data[key])
    return ''.join(result)

result = matchsub(re.search(expr, "hi/ABC/whatever/DEF/there"), data)
print(result) 
```

产量

```
hi/123/whatever/thing/there 
```

# java - ScrolledPageBook 的替代品？

> ID：13268722
> 
> 赞同：1
> 
> 时间：2012-11-07T11:21:40.103
> 
> 标签：java, swt, jface, rcp

是否存在与不属于 Forms API的[ScrolledPageBook](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/forms/widgets/ScrolledPageBook.html)具有相同行为的本机 SWT 或 RCP 组件？

我需要动态更改视图的内容。例如，我想做类似的事情：

```
Composite content1;
Composite content2;
Composite content3;    
myView.showContent(content1); // Draw the content1 into the view client area
myView.showContent(content2); // Draw the content1 with content2
myView.showContent(content3); // Draw the content2 with content3 
```

非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:06:43.323

`TabFolder`如果您只寻找本机 SWT 小部件，我会想到。

RCP： `org.eclipse.ui.part.PageBook`

# sql - SQL 如何使用所有引用更改值

> ID：13268724
> 
> 赞同：0
> 
> 时间：2012-11-07T11:21:43.130
> 
> 标签：sql, reference, updates

有没有一种更简单的方法来更改一行中的单个值及其 Reference 以及该 Reference 的引用，而不是回溯 20 个表来找到这一切的开始？

答案的链接——[在级联上](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqls.doc/sqls118.htm)（感谢哈维尔）

```
ALTER TABLE catalog DROP CONSTRAINT aa

ALTER TABLE catalog ADD CONSTRAINT
   (FOREIGN KEY (stock_num, manu_code) REFERENCES stock
   ON DELETE CASCADE CONSTRAINT ab) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:30:47.213

您是否尝试将引用定义为“ON UPDATE CASCADE”？

# sql - 如何在动态 sql 查询中传递输出变量

> ID：13268728
> 
> 赞同：1
> 
> 时间：2012-11-07T11:21:50.527
> 
> 标签：sql, sql-server, dynamic-sql

我正在查看一个存储过程，我在下面找到了一段代码。查看代码，我的看法是我们正在创建一个名为 @QuestionInclude 的变量并在动态 sql 语句中传递它的值。但是这段代码是如何工作的？

这对我来说很奇怪而且很新鲜。

```
declare @QuestionInclude varchar(10)
select @sqln =  'select @QuestionInclude = 1 from ##Stg_Prelim' 
exec sp_executesql @sqln,N'@QuestionInclude varchar(10) output',@QuestionInclude output 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:26:13.287

可能这会帮助你

[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

过程`sp_executesql`有参数`@stmt`，这是要运行的实际语句，`@params`- 参数声明，然后是声明的所有参数`@params`

通过名称传递参数也更好

```
declare @QuestionInclude varchar(10), @stmt nvarchar(max), @params nvarchar(max)

select @stmt = 'select @QuestionInclude = 1 from ##Stg_Prelim'
select @params = '@QuestionInclude varchar(10) output'

exec sp_executesql
    @stmt = @stmt,
    @params = @params,
    @QuestionInclude = @QuestionInclude output 
```

# r - 方面ggplot2的内部排序

> ID：13268737
> 
> 赞同：3
> 
> 时间：2012-11-07T11:22:20.260
> 
> 标签：r, sorting, ggplot2, facet

我试图在 ggplot2 中绘制一个方面，但我很难让不同方面的内部排序正确。数据如下所示：

```
head(THAT_EXT)
  ID          FILE           GENRE      NODE
1 CKC_1823_01  CKC          Novels    better
2 CKC_1824_01  CKC          Novels    better
3  EW9_192_03  EW9 Popular Science    better
4  H0B_265_01  H0B Popular Science       sad
5  CS2_231_03  CS2  Academic Prose desirable
6    FED_8_05  FED  Academic Prose   certain

str(THAT_EXT)
'data.frame':   851 obs. of  4 variables:
 $ ID   : Factor w/ 851 levels "A05_122_01","A05_277_07",..: 345 346 439 608 402 484 319 395 228 5 ...
 $ FILE : Factor w/ 241 levels "A05","A06","A0K",..: 110 110 127 169 120 135 105 119 79 2 ...
 $ GENRE: Factor w/ 5 levels "Academic Prose",..: 4 4 5 5 1 1 1 5 1 5 ...
 $ NODE : Factor w/ 115 levels "absurd","accepted",..: 14 14 14 89 23 16 59 59 18 66 ... 
```

部分问题是无法正确排序。这是我使用的 NODE 排序代码：

```
THAT_EXT <- within(THAT_EXT, 
               NODE <- factor(NODE, 
                              levels=names(sort(table(NODE), 
                                                decreasing=TRUE)))) 
```

当我用下面的代码绘制它时，我得到一个图表，其中节点在各个 GENRE 中没有正确排序，因为不同的节点在不同的 GENRE 中更频繁：

```
p1 <- 
ggplot(THAT_EXT, aes(x=NODE)) +
geom_bar() +
scale_x_discrete("THAT_EXT", breaks=NULL) + # supress tick marks on x axis
facet_wrap(~GENRE) 
```

![NODE 顺序错误的结果图](../Images/8c46f0c845c1f955f1cd3d487b00d734.png)

我想要的是每个方面都有节点按该特定类型的降序排序。有人能帮忙吗？

```
structure(list(ID = structure(c(1L, 2L, 3L, 4L, 10L, 133L, 137L, 
138L, 139L, 140L, 141L, 142L, 143L, 144L, 145L, 146L, 147L, 148L, 
149L, 150L, 151L, 152L, 153L, 154L, 155L, 156L, 157L, 158L, 159L, 
160L, 161L, 162L, 163L, 164L, 165L, 166L, 167L, 168L, 169L, 170L, 
171L, 172L, 173L, 174L, 175L, 176L, 177L, 178L, 179L, 180L, 181L, 
182L, 183L, 184L, 185L, 186L, 187L, 188L, 189L, 190L, 191L, 192L, 
193L, 194L, 195L, 196L, 197L, 198L, 199L, 200L, 201L, 202L, 203L, 
204L, 205L, 206L, 207L, 208L, 212L, 213L, 214L, 215L, 216L, 217L, 
218L, 219L, 220L, 221L, 222L, 223L, 224L, 225L, 226L, 227L, 228L, 
229L, 230L, 231L, 232L, 233L, 234L, 235L, 236L, 237L, 238L, 239L, 
240L, 241L, 267L, 268L, 269L, 270L, 271L, 272L, 273L, 274L, 275L, 
276L, 277L, 278L, 279L, 280L, 281L, 282L, 283L, 284L, 290L, 291L, 
298L, 299L, 300L, 303L, 304L, 305L, 306L, 307L, 308L, 309L, 310L, 
313L, 314L, 315L, 316L, 317L, 318L, 319L, 327L, 328L, 329L, 330L, 
331L, 332L, 333L, 334L, 335L, 336L, 337L, 338L, 339L, 340L, 341L, 
342L, 343L, 344L, 345L, 346L, 347L, 348L, 352L, 353L, 354L, 355L, 
356L, 357L, 358L, 359L, 360L, 349L, 350L, 351L, 361L, 362L, 363L, 
364L, 365L, 366L, 367L, 368L, 369L, 370L, 371L, 372L, 373L, 374L, 
375L, 376L, 377L, 378L, 379L, 380L, 381L, 12L, 13L, 14L, 15L, 
16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 
29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 41L, 42L, 43L, 44L, 45L, 
46L, 50L, 54L, 72L, 73L, 74L, 75L, 76L, 90L, 91L, 92L, 97L, 98L, 
102L, 115L, 125L, 126L, 127L, 128L, 129L, 130L, 131L, 132L, 209L, 
210L, 211L, 242L, 243L, 244L, 245L, 246L, 289L, 292L, 293L, 294L, 
295L, 296L, 297L, 301L, 302L, 311L, 312L, 320L, 321L, 322L, 323L, 
324L, 325L, 326L, 382L, 383L, 384L, 385L, 386L, 387L, 388L, 5L, 
6L, 7L, 8L, 9L, 11L, 37L, 38L, 39L, 40L, 47L, 48L, 49L, 51L, 
52L, 53L, 55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 63L, 64L, 65L, 
66L, 67L, 68L, 69L, 70L, 71L, 77L, 78L, 79L, 80L, 81L, 82L, 83L, 
84L, 85L, 86L, 87L, 88L, 89L, 93L, 94L, 95L, 96L, 99L, 100L, 
101L, 103L, 104L, 105L, 106L, 107L, 108L, 109L, 110L, 111L, 112L, 
113L, 114L, 116L, 117L, 118L, 119L, 120L, 121L, 122L, 123L, 124L, 
134L, 135L, 136L, 247L, 248L, 249L, 250L, 251L, 252L, 253L, 254L, 
255L, 256L, 257L, 258L, 259L, 260L, 261L, 262L, 263L, 264L, 265L, 
266L, 285L, 286L, 287L, 288L), .Label = c("A05_122_01", "A05_277_07", 
"A05_400_01", "A05_99_01", "A06_1283_02", "A06_1389_01", "A06_1390_01", 
"A06_1441_02", "A06_884_03", "A0K_1190_03", "A77_1684_01", "A8K_525_03", 
"A8K_582_01", "A8K_645_01", "A8K_799_01", "A90_341_02", "A90_496_01", 
"A94_217_01", "A94_472_01", "A94_477_03", "A9M_164_01", "A9M_259_03", 
"A9N_199_01", "A9N_489_01", "A9N_591_01", "A9R_173_01", "A9R_425_02", 
"A9W_536_02", "AA5_121_01", "AAE_203_01", "AAE_243_01", "AAE_412_01", 
"AAW_14_03", "AAW_244_02", "AAW_297_04", "AAW_365_04", "ADG_1398_01", 
"ADG_1500_01", "ADG_1507_01", "ADG_1516_01", "AHB_336_01", "AHB_421_01", 
"AHJ_1090_02", "AHJ_619_01", "AR3_340_01", "AR3_91_03", "ARF_879_01", 
"ARF_985_01", "ARF_991_02", "ARK_1891_01", "ASL_33_04", "ASL_43_01", 
"ASL_9_01", "AT7_1031_01", "B09_1162_01", "B09_1475_01", "B09_1493_01", 
"B09_1539_01", "B0G_197_01", "B0G_320_01", "B0N_1037_01", "B0N_624_01", 
"B0N_645_02", "B0N_683_01", "B3G_313_04", "B3G_320_03", "B3G_398_02", 
"B7M_1630_01", "B7M_1913_01", "BNN_746_02", "BNN_895_01", "BP7_2426_01", 
"BP7_2777_01", "BP7_2898_01", "BP9_410_01", "BP9_599_01", "BPK_829_01", 
"C93_1407_02", "C9A_181_01", "C9A_196_01", "C9A_365_01", "C9A_82_02", 
"C9A_9_01", "CB9_306_02", "CB9_63_04", "CB9_86_01", "CBJ_439_01", 
"CBJ_702_02", "CBJ_705_01", "CCM_320_01", "CCM_665_01", "CCM_669_02", 
"CCN_1036_02", "CCN_1078_01", "CCN_1119_01", "CCN_784_01", "CCW_2284_02", 
"CCW_2349_03", "CE7_242_02", "CE7_284_01", "CE7_39_01", "CEB_1675_01", 
"CER_145_03", "CER_23_01", "CER_235_02", "CER_378_10", "CET_1056_02", 
"CET_680_01", "CET_705_01", "CET_797_01", "CET_838_01", "CET_879_05", 
"CET_946_03", "CET_986_01", "CEY_2977_01", "CJ3_107_02", "CJ3_114_03", 
"CJ3_20_01", "CJ3_81_01", "CK2_112_01", "CK2_22_01", "CK2_392_01", 
"CK2_42_01", "CK2_75_01", "CKC_1776_01", "CKC_1777_01", "CKC_1823_01", 
"CKC_1824_01", "CKC_1860_01", "CKC_1883_01", "CKC_1883_02", "CKC_2127_01", 
"CMN_1439_02", "CRM_5767_01", "CRM_5770_03", "CRM_5789_01", "CS2_110_01", 
"CS2_131_01", "CS2_139_01", "CS2_187_01", "CS2_187_03", "CS2_231_03", 
"CS2_249_02", "CS2_301_01", "CS2_35_01", "CS2_58_02", "EV6_16_01", 
"EV6_206_02", "EV6_240_01", "EV6_244_02", "EV6_28_01", "EV6_30_01", 
"EV6_32_01", "EV6_450_01", "EV6_69_01", "EV6_80_01", "EV6_91_01", 
"FAC_1019_01", "FAC_1026_01", "FAC_1027_01", "FAC_1235_01", "FAC_1269_05", 
"FAC_1270_05", "FAC_1393_01", "FAC_1406_03", "FAC_933_01", "FAC_950_01", 
"FAC_960_01", "FED_105_01", "FED_120_02", "FED_21_02", "FED_281_02", 
"FED_302_02", "FED_53_01", "FED_8_05", "FEF_498_03", "FEF_674_03", 
"FR2_410_01", "FR2_557_02", "FR2_593_01", "FR2_691_01", "FR4_232_01", 
"FR4_331_01", "FR4_346_01", "FS7_818_01", "FS7_919_01", "FU0_368_02", 
"FYT_1138_01", "FYT_1183_01", "FYT_901_05", "G08_1336_01", "G1E_385_01", 
"G1N_824_01", "G1N_860_01", "G1N_868_01", "G1N_975_01", "GU5_854_01", 
"GUJ_423_01", "GUJ_501_01", "GUJ_611_01", "GUJ_629_03", "GUJ_700_01", 
"GV0_10_01", "GV0_104_01", "GV0_111_01", "GV0_122_01", "GV0_160_01", 
"GV0_232_02", "GV2_1465_01", "GV2_1899_01", "GV6_2683_01", "GW6_297_01", 
"GW6_306_05", "GW6_307_01", "GW6_322_01", "GW6_330_02", "GW6_335_01", 
"GW6_338_01", "GW6_367_02", "GW6_373_01", "GW6_407_01", "GW6_411_01", 
"GW6_413_01", "GW6_421_01", "GW6_423_01", "GW6_424_01", "GW6_428_01", 
"GW6_447_01", "GWM_480_01", "GWM_533_02", "GWM_554_02", "GWM_554_03", 
"GWM_609_01", "GWM_609_04", "GWM_610_01", "GWM_730_01", "GWM_731_01", 
"GWM_738_01", "GWM_804_06", "GWM_815_01", "GWM_832_03", "GVP_179_01", 
"GVP_211_01", "GVP_393_02", "GVP_443_02", "GVP_710_01", "H0B_171_04", 
"H0B_216_01", "H0B_265_01", "H0B_32_01", "H0B_361_03", "H0B_365_01", 
"H0B_369_01", "H0B_74_01", "H0B_93_01", "H10_1002_01", "H10_1032_04", 
"H10_653_01", "H10_803_01", "H10_824_01", "H10_825_03", "H10_881_01", 
"H10_986_01", "H78_851_04", "H78_891_01", "H78_946_04", "H79_1959_19", 
"H7S_110_05", "H7S_130_06", "H7S_131_03", "H7S_131_04", "H7S_146_01", 
"H7S_148_01", "H7S_164_01", "H7S_179_01", "H7S_54_01", "H7S_56_05", 
"H7S_62_03", "H7S_79_01", "H7S_8_01", "H7S_81_01", "H7S_83_01", 
"H7S_87_01", "H7S_92_03", "H7X_1028_02", "H7X_1091_01", "H7X_691_01", 
"H7X_695_01", "H8H_2917_01", "H8K_153_01", "H8K_55_01", "H8M_1897_01", 
"H8M_2104_02", "H8T_3316_03", "H98_3204_01", "H98_3410_01", "H98_3490_02", 
"H9R_130_02", "H9R_39_01", "H9S_1297_01", "HA2_3107_02", "HA2_3284_01", 
"HPY_754_04", "HPY_785_09", "HPY_799_03", "HPY_807_04", "HPY_830_04", 
"HPY_838_02", "HPY_843_01", "HPY_869_11", "HR7_190_01", "HR7_440_01", 
"HTP_540_01", "HTP_585_01", "HTP_588_05", "HTP_593_01", "HTP_601_01", 
"HTP_613_01", "HTP_648_02", "HTW_197_01", "HTW_494_01", "HTW_750_01", 
"HWL_2770_01", "HWL_2919_01", "HWM_45_01", "HWM_45_02", "HXY_1047_03", 
"HXY_701_01", "HXY_781_01", "HXY_783_01", "HXY_784_01", "HXY_836_01", 
"HXY_931_01", "HXY_963_01", "HXY_972_01", "HXY_985_03", "HY6_1024_01", 
"HY6_1025_01", "HY6_1164_01", "HY6_1223_01", "HY6_988_03", "HY6_989_01", 
"HY8_160_01", "HY8_164_01", "HY8_292_03", "HY8_316_01", "HY9_778_03", 
"HY9_845_02", "HYX_235_08", "HYX_245_01", "HYX_88_01", "J12_1474_02", 
"J12_1492_01", "J12_1571_01", "J12_1845_01", "J14_341_01", "J18_597_04", 
"J18_698_02", "J18_759_01", "J18_828_01", "J3R_197_01", "J3R_219_02", 
"J3R_277_04", "J3T_267_01", "J3T_269_02", "J3T_57_02", "J41_41_02", 
"J41_58_03", "J9B_133_03", "J9B_341_02", "J9B_341_03", "J9D_147_05", 
"J9D_218_01", "J9D_411_01", "J9D_616_01", "J9D_616_02", "JNB_563_02", 
"JT7_118_01", "JT7_129_02", "JT7_218_02", "JT7_344_02", "JXS_3663_01", 
"JXU_407_01", "JXU_468_02", "JXU_559_01", "JXV_1439_04", "JXV_1592_01", 
"JY1_100_01"), class = "factor"), GENRE = structure(c(1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L), .Label = c("Academic Prose", "Conversation", "News", 
"Novels", "Popular Science"), class = "factor"), NODE = structure(c(9L, 
10L, 10L, 10L, 4L, 10L, 71L, 35L, 49L, 6L, 5L, 15L, 28L, 44L, 
64L, 64L, 28L, 28L, 18L, 18L, 32L, 18L, 58L, 10L, 72L, 28L, 18L, 
10L, 64L, 10L, 35L, 64L, 64L, 69L, 8L, 10L, 50L, 69L, 49L, 49L, 
15L, 69L, 10L, 49L, 8L, 64L, 49L, 10L, 69L, 18L, 61L, 67L, 67L, 
61L, 57L, 69L, 11L, 10L, 64L, 10L, 59L, 61L, 49L, 10L, 59L, 1L, 
61L, 35L, 54L, 54L, 39L, 44L, 61L, 64L, 69L, 1L, 23L, 49L, 49L, 
8L, 69L, 49L, 69L, 49L, 49L, 69L, 35L, 49L, 49L, 49L, 35L, 10L, 
49L, 48L, 10L, 49L, 11L, 44L, 50L, 11L, 50L, 69L, 49L, 10L, 59L, 
68L, 47L, 69L, 49L, 35L, 29L, 8L, 49L, 50L, 35L, 10L, 35L, 8L, 
35L, 8L, 10L, 35L, 10L, 10L, 10L, 35L, 44L, 61L, 35L, 44L, 28L, 
47L, 39L, 39L, 49L, 61L, 43L, 60L, 19L, 10L, 10L, 10L, 44L, 44L, 
62L, 44L, 10L, 59L, 10L, 61L, 1L, 53L, 33L, 10L, 8L, 8L, 64L, 
64L, 10L, 57L, 61L, 64L, 66L, 19L, 61L, 64L, 10L, 10L, 8L, 19L, 
35L, 28L, 10L, 61L, 35L, 42L, 35L, 28L, 32L, 64L, 10L, 18L, 28L, 
25L, 35L, 35L, 10L, 18L, 10L, 22L, 55L, 28L, 10L, 1L, 55L, 51L, 
1L, 38L, 28L, 28L, 33L, 10L, 44L, 29L, 16L, 8L, 28L, 69L, 32L, 
10L, 61L, 20L, 35L, 10L, 28L, 10L, 32L, 10L, 46L, 59L, 64L, 35L, 
66L, 2L, 35L, 28L, 30L, 18L, 69L, 32L, 10L, 28L, 17L, 36L, 64L, 
61L, 10L, 64L, 33L, 3L, 37L, 26L, 28L, 64L, 44L, 28L, 64L, 64L, 
6L, 6L, 64L, 50L, 32L, 8L, 64L, 50L, 28L, 24L, 18L, 47L, 35L, 
40L, 24L, 55L, 44L, 22L, 1L, 49L, 44L, 18L, 45L, 63L, 64L, 35L, 
12L, 35L, 10L, 35L, 10L, 10L, 10L, 44L, 44L, 44L, 65L, 44L, 55L, 
32L, 49L, 64L, 39L, 69L, 1L, 60L, 7L, 14L, 44L, 33L, 10L, 19L, 
10L, 70L, 53L, 8L, 61L, 61L, 44L, 61L, 65L, 28L, 68L, 69L, 27L, 
61L, 28L, 72L, 34L, 61L, 32L, 10L, 49L, 35L, 49L, 10L, 10L, 69L, 
39L, 40L, 19L, 59L, 53L, 49L, 49L, 44L, 49L, 35L, 49L, 61L, 61L, 
1L, 10L, 28L, 49L, 35L, 49L, 61L, 50L, 69L, 35L, 61L, 35L, 50L, 
10L, 28L, 69L, 61L, 21L, 69L, 29L, 35L, 35L, 35L, 11L, 69L, 8L, 
41L, 56L, 35L, 61L, 69L, 49L, 49L, 49L, 1L, 13L, 64L, 64L, 52L, 
44L, 64L, 64L, 50L, 49L, 69L, 11L, 59L, 49L, 31L), .Label = c("apparent", 
"appropriate", "awful", "axiomatic", "best", "better", "breathtaking", 
"certain", "characteristic", "clear", "conceivable", "convenient", 
"crucial", "cruel", "desirable", "disappointing", "emphatic", 
"essential", "evident", "expected", "extraordinary", "fair", 
"fortunate", "Funny", "good", "great", "imperative", "important", 
"impossible", "incredible", "inescapable", "inevitable", "interesting", 
"ironic", "likely", "Likely", "lucky", "ludicrous", "natural", 
"necessary", "needful", "notable", "noteworthy", "obvious", "odd", 
"paradoxical", "plain", "plausible", "possible", "probable", 
"proper", "relevant", "remarkable", "revealing", "right", "Sad", 
"self-evident", "sensible", "significant", "striking", "surprising", 
"symptomatic", "terrible", "true", "typical", "understandable", 
"unexpected", "unfortunate", "unlikely", "unreasonable", "untrue", 
"vital"), class = "factor")), .Names = c("ID", "GENRE", "NODE"
), class = "data.frame", row.names = c(NA, -388L)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:47:02.657

正如我已经提到的：`facet_wrap`不适合拥有个人规模。至少我没有找到解决办法。因此，设置标签`scale_x_discrete`并没有带来预期的结果。

但这是我的解决方法：

```
library(plyr)
library(ggplot2)

nodeCount <- ddply( df, c("GENRE", "NODE"), nrow )
nodeCount$factors <- paste( nodeCount$GENRE, nodeCount$NODE, sep ="." )
nodeCount <- nodeCount[ order( nodeCount$GENRE, nodeCount$V1, decreasing=TRUE  ), ]
nodeCount$factors <- factor( nodeCount$factors, levels=nodeCount$factors )
head(nodeCount)

              GENRE       NODE V1                    factors
121 Popular Science   possible 14   Popular Science.possible
128 Popular Science surprising 11 Popular Science.surprising
116 Popular Science     likely  9     Popular Science.likely
132 Popular Science   unlikely  9   Popular Science.unlikely
103 Popular Science      clear  7      Popular Science.clear
129 Popular Science       true  5       Popular Science.true

g <- ggplot( nodeCount, aes( y=V1, x = factors ) ) +
  geom_bar() +
  scale_x_discrete( breaks=NULL ) + # supress tick marks on x axis
  facet_wrap( ~GENRE, scale="free_x" ) +
  geom_text( aes( label = NODE, y = V1+2 ), angle = 45, vjust = 0, hjust=0, size=3 ) 
```

这使：

![在此处输入图像描述](../Images/fcd0097f4838eba41000dd98f2786d16.png)

# python - Python OpenCV，无法将视频（.avi）写入文件

> ID：13268740
> 
> 赞同：4
> 
> 时间：2012-11-07T11:22:23.537
> 
> 标签：python, video, opencv, avi

我正在使用 Python 和 OpenCV 在 Windows XP 中编写一个程序，它将从网络摄像头捕获的图像帧添加到视频 (.avi) 中，但前提是满足特定条件。出于测试目的，此条件是基于时间的，但这会改变。唯一的问题是，我的程序没有输出任何东西。一切似乎都运行良好，但是当我检查它应该输出的 .avi 文件时，什么都没有。

这是我的代码。有人告诉我我的风格有点非传统，但希望你能看到我在做什么。先感谢您。

```
import cv, time ##Import modules
cv.NamedWindow("Experiment", cv.CV_WINDOW_AUTOSIZE)                         ##Open window
camera_index = 1
capture = cv.CaptureFromCAM(camera_index)
x = time.clock()+5

try:
    while 1:
        if time.clock() < x:                                                ##Clock to capture 5 seconds of footage
            frame = cv.QueryFrame(capture)                                  ##Capture webcam frame
            cv.ShowImage("Experiment", frame)                               ##Display image
            writer = cv.CreateVideoWriter("C:\/test.avi", cv.CV_FOURCC('F', 'M', 'P', '4'),
                                          24, (640, 480), 1)                ##Write video file (codec = MPEG-4 - .avi)
            if writer:                                                      ##Write frame to file
                cv.WriteFrame(writer, frame)
            if not writer:                                                  ##Failure to register video writer
                print "Error: Video writer malfunction"
                sys.exit(1)
                cv.DestroyWindow("Experiment")
                break
        else:
            if writer:
                print "Video capture succeeded"
                cv.DestroyWindow("Experiment")
                camera_index += 1
                capture = cv.CaptureFromCAM(-1)
                break
        c = cv.WaitKey(10)
        if(c=="n"):
            camera_index += 1
            capture = cv.CaptureFromCAM(-1)
except:
    print "Video capture failed"                                            ##Total systems failure escape routine!!!
    cv.DestroyWindow("Experiment") 
```

- 编辑 -

如果我将`cv.CV_FOURCC('F', 'M', 'P', '4')`第 12 行更改为“-1”，则会输出视频，但它是 0 字节。

# c++ - 如何在 Windows XP 中获得快速启动栏大小？

> ID：13268746
> 
> 赞同：0
> 
> 时间：2012-11-07T11:22:48.667
> 
> 标签：c++, winapi, user32

我想获得快速启动栏的大小，但我的代码返回 false，问题出在哪里？

```
REBARBANDINFOW prbi;
memset(&prbi, 0, sizeof(REBARBANDINFOW));

prbi.cbSize = sizeof(REBARBANDINFOW);
prbi.fMask = 892;

HWND hWndTray = ::FindWindow(L"Shell_TrayWnd", 0);
HWND hRebar = ::FindWindowEx(hWndTray, NULL, L"ReBarWindow32", 0);
int i = ::SendMessage(hRebar, RB_GETBANDINFOW, 0, (LPARAM)(LPREBARBANDINFOW)&prbi); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:51:17.217

问题出在 RB_GETBANDINFOW 的 LPARAM 上。您发送的结构的地址仅在您自己的地址空间中有效，在 Explorer 中无效。幸运的是，Explorer 检测到了这一点并优雅地失败而不是崩溃。

解决这个问题的一种方法是使用 VirtualAllocEx 在 Explorer 的内存中分配 REBARBANDINFOW，使用 WriteProcessMemory 对其进行初始化，发送消息，最后调用 ReadProcessMemory 读取结果。

我已经在 Python 脚本中成功地使用了这种技术来自动设置快速启动的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:44:04.363

您试图获取太多信息。放置`prbi.fMask = 32;`或`prbi.fMask = 64;`。

# php - TinyMCE 更改语言

> ID：13268748
> 
> 赞同：2
> 
> 时间：2012-11-07T11:22:51.677
> 
> 标签：php, javascript, tinymce

早上好，

今天我在我定制的 CMS 上安装了 TinyMCE。现在我想将语言更改为荷兰语，我的整个 tinyMCE 文本框将消失。

我已将荷兰文文件上传到 TinyMCE 指定的位置。当我不添加语言时：“nl”，在我的 TinyMCE javascript 中添加它会起作用（语言是英语）。但是当我添加该行时，整个文本框从我的页面中消失了。

这是我的代码

```
 <script type="text/javascript" src="jscripts/tiny_mce/jquery.tinymce.js"></script>
    <script type="text/javascript">
        $().ready(function() {
            $('textarea.tinymce').tinymce({

                // Location of TinyMCE script
                script_url : 'jscripts/tiny_mce/tiny_mce.js',

                // General options
                theme : "advanced",

                relative_urls : false,
                plugins : "youtubeIframe,jbimages,autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,images,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist,jbimages",

                // Theme options
                theme_advanced_buttons1 : "code,preview,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect",
                theme_advanced_buttons2 : "cut,copy,paste,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,|,insertdate,inserttime",
                theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,youtubeIframe,jbimages,advhr,|,print,|,ltr,rtl,|,fullscreen",

                //COMPLETE LIJST VAN FUNCTIES
                //theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
                //theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                //theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
                //theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",

                theme_advanced_toolbar_location : "top",
                theme_advanced_toolbar_align : "left",
                theme_advanced_statusbar_location : "bottom",
                theme_advanced_resizing : true,
                language : "nl",
                // Example content CSS (should be your site CSS)
                content_css : "css/style.css",

                // Drop lists for link/image/media/template dialogs
                template_external_list_url : "lists/template_list.js",
                external_link_list_url : "lists/link_list.js",
                external_image_list_url : "lists/image_list.js",
                media_external_list_url : "lists/media_list.js",

                // Replace values for the template plugin
                template_replace_values : {
                    username : "Some User",
                    staffid : "991234",
                width : "858"
                }
            });
        });
    </script>
    <!-- /TinyMCE --> 
```

我试图将线路放在其他地方，但没有任何帮助。

有没有人解决这个问题的想法，我真的需要荷兰语。

PS。我正在使用 TinyMCE 的 jQuery 版本

不，我试图将 nl 文件重命名为 en.js 并更改了文件内的 2 个字母。但现在什么都没有出现。我现在看到的唯一内容是示例 print.print_desc 而不是打印或打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-09-24T19:27:25.580

1- 从这里下载您的语言包：[https](https://www.tiny.cloud/get-tiny/language-packages/)
://www.tiny.cloud/get-tiny/language-packages/ 2- 使 sur 解压缩路径中的包：（`yourProject/public/assets/js/langs/yourLangagePack.js` 如果文件夹不存在，请添加... )
3- 像这样初始化 tinyMce

```
 tinymce.init({
            selector: '#your_textArea_id',
            language: "fr_FR", // french for example ...
            // other options ...
            height: "1000"
        }); 
```

ps：写下网站下面提到的语言缩写（例如：`en`not `eng`, `fr_FR`not only `fr`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T17:18:14.057

您必须像这样通过 tinyMCE.init 初始化语言包：

```
<html>
<head>
</head>
<body>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("jquery", "1.4");
</script>
<script type="text/javascript" src="tinymce/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
    mode : "specific_textareas",
    editor_selector: "editor", 
    theme : "advanced",
    language : 'nl',
});
</script>

<textarea class="editor">
</textarea>

</body>
</html> 
```

tinyMCE.init 在 tiny_mce.js 中定义，它与“tinymce\jscripts\tiny_mce”中的下载捆绑在一起。据我所知，在 tinyMCE 的 jQuery 版本中不能使用语言包。

# javascript - raphaeljs 倒置 X 坐标

> ID：13268750
> 
> 赞同：1
> 
> 时间：2012-11-07T11:22:57.090
> 
> 标签：javascript, html, svg, raphael

我想制作滚动动画，其中一些对象使用变换（水平翻转）方法进行动画处理。我的代码是：

```
obj.attr('transform', 's-1,1'); 
```

但似乎当我在动画翻转时尝试滚动时，坐标 x 倒置了。这是我按下 prev 按钮时滚动的代码：

```
button.hover(function(){
  var el_x = obj.attr('x');
  obj.attr('x', el_x-1);
}); 
```

当我翻转时，有什么方法可以不反转 x 坐标吗？拜托，我非常需要你的帮助

# caching - 即使在更新的情况下也会触发 afterCreate 事件 -Gemfire 中的事件如何工作？

> ID：13268754
> 
> 赞同：0
> 
> 时间：2012-11-07T11:23:04.267
> 
> 标签：caching, distributed-caching, gemfire

**客户端缓存配置 -**

```
<region name="test" refid="PROXY">
    <region-attributes>
        <cache-listener>
            <class-name>com.test.cache.SimpleCacheListener</class-name>
        </cache-listener>
    </region-attributes>
</region> 
```

对于上面的客户端配置，我使用了一个 CacheListener 来监听这个缓存“测试”上的事件。

我面临的问题甚至是更新事件，即在缓存中为相同的键放置不同的值，触发 afterCreate 事件。

IE

```
region.put("test key","test value") 
```

和

```
region.put("test key","test updated value") 
```

两者都在 Listener 中生成 afterCreateEvent。

**已编辑**

让我更清楚地了解我想要在这里实现的目标。我希望在创建条目时通知我的客户端，该条目是否已经存在于缓存服务器中。

例如

如果某个区域的缓存服务器上已经存在条目 [Test,Value]，则在进行 put [Test,Value1] 时，客户端应该知道这是一个更新，并且无论该条目是否存在于客户端缓存中，都应该执行此操作.

我试过这样的东西-

```
<region name="test" refid="PROXY" >
        <region-attributes data-policy="normal">
        <!--  <region-attributes> -->
        <subscription-attributes interest-policy="all"/>
            <cache-listener>
                <class-name>com.cache.test.SimpleCacheListener</class-name>
            </cache-listener>
        </region-attributes>

    </region> 
```

进行上述更改后，它会检测更新事件，但前提是同一个客户端刚刚创建了一个条目并尝试更新它，而不是早期创建的条目。

如果我遗漏了什么，请帮助并告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:35:01.950

如果密钥在不同的缓存上被修改并且它不存在于您的客户端代理缓存中，那么是的，这是一个创建事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:26:27.930

我刚刚在 GemFire 的 VMware 论坛上回答了您的问题：

[http://communities.vmware.com/thread/424682?tstart=0](http://communities.vmware.com/thread/424682?tstart=0)

# cakephp - 通过 II6 和 windows 2003 更改 CakePHP 的本地路径

> ID：13268758
> 
> 赞同：0
> 
> 时间：2012-11-07T11:23:19.447
> 
> 标签：cakephp, iis-6, cakephp-2.0, isapi-rewrite, cakephp-2.2

我已经按照这篇文章在 II6 上配置 CakePHP：http: [//bakery.cakephp.org/articles/jamesmking/2008/04/12/cakephp-on-iis6-with-fastcgi-sql-server-2005-and-isapi_rewrite](http://bakery.cakephp.org/articles/jamesmking/2008/04/12/cakephp-on-iis6-with-fastcgi-sql-server-2005-and-isapi_rewrite)

但我想将“本地路径”从“C:\Inetpub\wwwroot\CakePHP\app\webroot”更改为“C:\Inetpub\wwwroot\”，以便能够执行不同的 Web 应用程序，而不仅仅是 CakePHP一。

我已经尝试过更改 IIS 管理器上的“本地路径”，但我不起作用。我想这应该与 ISAPI 重写及其条件有关。

您知道我如何进行必要的更改以使其正常工作吗？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:29:18.887

将 .htaccess 文件移动到站点根文件夹的根目录中。

# sql - 更改存储过程或函数添加了额外的空行间隙

> ID：13268760
> 
> 赞同：1
> 
> 时间：2012-11-07T11:23:26.483
> 
> 标签：sql, sql-server, sql-server-2012

在 SQL Server 2012 中，当我为存储过程和任何函数编写代码时。在那之后，当我想改变它时添加了额外的空白行间隙，这就是为什么它看起来非常不可接受的长度..

```
CREATE proc sp_delete_Rte_article_admin_Latest   
(    
@id int    
)    
as    
begin    
if exists (select * from tblRte where Id=@id )    
begin    
    declare @IvanID bigint  

    set @IvanID=(select [IvanArtId] from tblRte where Id=@id )  
    insert into tblRteOnDelete([IvanArtId],[StoryType],[ChannelType],[Filename],
                [Headline],[PublishDate],[Title],[DocScope],[KeyWord],[Byline],[City],
                [State],[StoryDate],[BodyContents],[DownloadedDate],DeleteDate)
    select [IvanArtId],[StoryType],[ChannelType],[Filename],[Headline],[PublishDate],
           [Title],[DocScope],[KeyWord],[Byline],[City],[State],[StoryDate],
           [BodyContents],[DownloadedDate],GETDATE()
      from tblIvanhoeXmlFeeds
     where Id=@id   

    delete from tblRte where Id=@id   
    delete from tblUpdatedRteTopics where IvanArtId=@IvanID  
    delete from tblCheckAllowRte where ArticleID=@IvanID  
    delete from tblAddRteeApprove where ArticleID=@IvanID  

    return 1    
end    
else    
begin    
    return 0    
end    
end 
```

应该怎么做才能一直移动它……任何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:57:43.553

我想知道 Sqlserver 2012 配置设置或代码设置，以便我可以删除黑色空格线，它们会在何时改变并再次打开......

# iphone - MKMapAnnotationView 子视图动画在 iOS 5 上不起作用

> ID：13268761
> 
> 赞同：3
> 
> 时间：2012-11-07T11:23:36.043
> 
> 标签：iphone, objective-c, cocoa-touch, mkannotationview

我有一个`MKMapPinAnnotationView`子类，它应该显示一个看起来或多或少与您在`showsUserLocation`启用`MKMapView`. 动画在 iOS 6 上就像一个魅力，但在 iOS 5.1 上什么也没有。经过一番调查，我发现在 iOS 5 上添加子视图`MKAnnotationView`什么都不做，除非你`setNeedsDisplay`之后明确调用。是否有一些我需要在 iOS 5 上覆盖以使其工作的方法，或者我还缺少什么？

# ios - 为 AppStore 审阅者提供 Facebook 测试帐户

> ID：13268765
> 
> 赞同：3
> 
> 时间：2012-11-07T11:23:44.203
> 
> 标签：ios, appstore-approval, facebook-test-users

我们的 iOS 应用程序要求用户使用他们的 Facebook 帐户登录，我们需要为 AppStore 审阅者提供一个测试帐户。

*   我们是否可以理所当然地认为 Apple 拥有自己的 Facebook 帐户，用于测试仅依赖 Facebook 登录的应用程序？
*   我们是否需要通过他们的测试用户 API 设置 Facebook“测试用户”？

感谢这样做的人的任何指示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T12:13:28.430

简短的回答：假设他们有一个帐户。

我认为你在这里有点赶上 22。创建一个测试帐户并将这些详细信息交给第三方可能违反了 Facebook 的服务条款……但是，您是对的，Apple*可能会*要求您提供详细信息。

然而，在实践中，他们似乎没有。我的一个应用程序需要登录第三方网站，我只是在 iTC 注释部分输入“您需要一个帐户”。我曾被拒绝一次（自 2008 年以来），因为我没有指定特定的用户名/密码。我解释了原因（见第一段），并在下一次尝试中顺利通过。

话虽如此，显然[Facebook 允许创建测试帐户](https://webapps.stackexchange.com/questions/17529/how-do-i-make-a-test-account-on-facebook)。如果他们坚持，这可能是您想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:05:39.677

对于任何需要登录的应用程序，您需要向 Apple 提供访客/演示登录帐户以测试该应用程序。所以，是的，给苹果一个登录名/密码来使用。

# javascript - 使用正则表达式拆分字符串以使其成为没有空元素的数组

> ID：13268770
> 
> 赞同：6
> 
> 时间：2012-11-07T11:24:04.970
> 
> 标签：javascript, regex

在这里，我有示例 javascipt 字符串：

```
example_string = "Answer 1| Answer 2| Answer 3|"; 
```

我正在尝试使用正则表达式获得这样的数组：

```
Array ["Answer 1", " Answer 2", " Answer 3"] 
```

我努力了：

```
result = example_string.split('/[|]+/g'); 
```

还有以下模式

```
'/[|]+/g'
'/[|]+\b/g'
'/[|]+[^$]/g' 
```

而且我仍然在它的末尾得到一个带有空元素的数组：

```
 Array ["Answer 1", " Answer 2", " Answer 3", ""] 
```

这给我带来了很多麻烦。有谁知道我的模式在哪里出错或如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T11:28:06.980

我一直喜欢匹配我一直讨厌拆分的所有内容，但是：

用于拆分的正则表达式：`(\|(?!$))` [DEMO](http://regex101.com/r/iP8lV6)

匹配而不是拆分：

正则表达式：`(?:([\w\s]+)\|?)`

您甚至可以使用`[^\|]+`To match what you have to match BUT`|`

[演示](http://regex101.com/r/fL9yG9)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T11:28:02.653

没有错误。这是绝对正确的行为（如何`split`知道这不是最后一列具有空值的 CSV 文件？）。如果你知道你的字符串总是以 结尾`|`，你可以先手动删除最后一个。或者，如果数组为空，您可以只取走数组的最后一个元素。但是，我似乎找不到（在 JavaScript 中）告诉内置`split`函数忽略空结果的可能性。

# perl - 无法在 search.pl 第 10 行的未定义值上调用方法“标题”

> ID：13268774
> 
> 赞同：3
> 
> 时间：2012-11-07T11:24:20.100
> 
> 标签：perl, mojolicious

```
#!/usr/bin/perl
use Mojo::Base -strict;
use Mojo::DOM;
use Mojo::Util qw(decode);
use Mojo::UserAgent;
my $uri = 'http://efremova.info/word/statja.html';
my $sel = 'td#centerCnt ol li';
my $charset = 'windows-1251';
my $tx = Mojo::UserAgent->new()->get($uri);
my $res->headers->content_type("text/html; charset=$charset");
my $dom = $res->dom;
my $el = $dom->at($sel) or die "selector $sel not found";
$el->find('span.nobr')->each(sub { $_->replace($_->text) });
my $text = $el->text;
binmode(STDOUT, ':encoding(UTF-8)'); 
```

得到错误：无法在 search.pl 第 10 行的未定义值上调用方法“标题”。

我应该怎么办？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:18:25.493

你忘记了，你需要先从 tx.

```
my $tx = Mojo::UserAgent->new()->get($uri);

my $res = $tx->res;

$res->headers->content_type("text/html; charset=$charset");
my $dom = $res->dom; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:19:53.010

变量声明`my`的结构如下：

```
my [TYPE] NAME [ATTRIBUTES] [= EXPRESSION] 
```

（括号中的部分是可选的。）

当你这样做时`my $name`，你声明了一个新变量但还没有分配给它，所以值是`undef`. 请注意，在表达式内部，正在定义的变量不可访问。

表达式`undef eq (my $undef)`计算结果为真：新变量的值为`undef`。实际上，声明本身就是表达式，返回左值。

```
$ perl -Mstrict -E'my $three = my $foo + 2 + (my $bar=1); say $three'
3 
```

在非严格模式下，您可以说`my $weird = $weird + 2`，这将评估为`2`。在严格模式下，除非您有一个同名的全局变量，否则这是不允许的。

您的语法`my $undefined->method_call`有点不寻常，并且评估为`(undef)->method_call`不可能*（*自动装箱除外）。

解决方案：

1.  `use strict; use warnings;`

2.  首先声明并初始化你的变量，然后调用它的方法。

在这种特殊情况下，要*检索*内容类型，您可以这样做

```
my $content_type = $tx->res->headers->content_type; 
```

设置内容类型没有任何意义。要检索 DOM，您可以这样做

```
my $dom = $tx->res->dom; 
```

如果你喜欢长方法链，你可以这样做

```
my $el =
   Mojo::UserAgent->new()
     ->get($uri)
     ->dom
     ->at($sel)
   or die "..."
;; 
```

Mojo 模块的文档：

[http://metacpan.org/pod/Mojo::Transaction::HTTP](http://metacpan.org/pod/Mojo%3a%3aTransaction%3a%3aHTTP)

[http://metacpan.org/pod/Mojo::UserAgent](http://metacpan.org/pod/Mojo%3a%3aUserAgent)

文档`my`：

[http://perldoc.perl.org/functions/my.html](http://perldoc.perl.org/functions/my.html)（推荐点击链接）

# perl - 在 Perl 中读取网页内容而不使用任何 LWP 模块

> ID：13268776
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:24:35.963
> 
> 标签：perl

除了 LWP 模块，还有其他模块在 perl 中提取网页内容吗？我想在不使用任何 LWP 模块的情况下阅读 perl 中的网页内容。

谢谢，克里希纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:13:34.123

HTTP::小

依赖项：

字节 Carp IO::Socket strict Time::Local 警告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:51:46.200

作为 Web 框架的一部分，[Mojolicious](http://mojolicio.us)中包含一个非常强大的替代方案。有一个[UserAgent](http://mojolicio.us/perldoc/Mojo/UserAgent)与[DOM](http://mojolicio.us/perldoc/Mojo/DOM)解析器配合得很好。

通过一个小的现实世界示例查看此[答案](https://stackoverflow.com/a/13034932/1184510)。

# javascript - 如何设置跨域的iframe高度

> ID：13268778
> 
> 赞同：0
> 
> 时间：2012-11-07T11:24:51.847
> 
> 标签：javascript, jquery, html, iframe

我想创建一个动态高度 Iframe。

我正在构建一个自定义搜索引擎，我必须在其中使用谷歌搜索数据显示我的数据。

意思是：如果我在搜索文本框中输入“asdq”，那么它将显示我的数据结果和自定义谷歌搜索结果。

我想根据谷歌发送的内容更改 iframe 的高度。意思是：让谷歌发送 10 行然后我的 iframe 大小将是 100 像素，如果谷歌发送 1 数据然后 10 像素等。

如果我修复了 iframe 的高度，那么如果更多数据来自 Google，则滚动条会出现在 iframe 中。

[你可以在这里](http://img692.imageshack.us/img692/4366/myproblemw.jpg)看到我的问题

实际上我想删除 iframe 的滚动条，以便只有一个滚动条是页面滚动条。

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:52:41.280

如果 iframe 从其他域获取数据，则我们无法设置它的大小，这意味着如果我们无权访问 iframe 的主体。

我们可以用它来克服这个问题。

```
<script type="text/javascript">
    google.load('search', '1'); // loads Google Search library, v 1
// get a custom search control & keep it in cseControl
// note: put your own custom search ID number here
var cseControl = new  google.search.CustomSearchControl('009827885688477640989:igzwimalyta');
// open pages from search results clicks on the same page
cseControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
// when there are no matches, explain why
cseControl.setNoResultsString("Sorry, there are no pages in this web site that match  all the search terms.");
// make the search field visible in div with ID 'cseDiv'
cseControl.draw('divGoogleResult');

 cseControl.execute(userInput);

</script> 
```

# html - 如何使用 django（前端）创建用户帐户配置文件

> ID：13268787
> 
> 赞同：0
> 
> 时间：2012-11-07T11:25:29.040
> 
> 标签：html, django

我有一个正在进行的项目，正在使用 DJANGO 网络框架构建。我已经成功创建了一个注册页面，并在成功注册和登录后；

# 我需要你帮助的地方

1.  当用户登录到他的帐户时，我希望该用户能够看到他的帐户、个人资料和最近的操作。（注意：从前端而不是 Django 管理端）

2.  是否建议拥有 2 个不同的应用程序，并且我想将在一个应用程序上提交的用户输入与另一个应用程序上的注册用户相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:34:02.740

1.  [Django userena](http://www.django-userena.org/)可用于保存和显示用户配置文件，并且可以根据我们的需要进行定制（显示帐户信息和最近的操作）。
2.  Django 多数据库路由概念可用于跨项目共享用户和会话。[这里](http://dustinfarris.com/2012/2/sharing-django-users-and-sessions-across-projects/)解释得更清楚。

# actionscript-3 - AS3 cacheAsBitmap 问题？

> ID：13268790
> 
> 赞同：0
> 
> 时间：2012-11-07T11:25:43.387
> 
> 标签：actionscript-3, vector, bitmap

我有点困惑。如果我导入 png 图片，将其拖到我的舞台上，然后右键单击 > 转换为位图。如果我在代码中创建了一个向量，然后是 apple ，那是一样的`cacheAsBitmap = true`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:41:02.377

PNG图片是一个光栅对象，它已经有一个Bitmap的父类。但是，您可以将该位图封装成一个绘制的矩形（实际上是用位图填充创建一个矩形，这实际上是一个矢量对象），然后转换为位图，应用于`cacheAsBitmap = true`由光栅对象构成的矢量对象。我不明白你为什么首先要双重转换 raster->vector->raster 。如果您只是将由 PNG 制作的库资源拖到舞台上，可能 Flash 并没有那么愚蠢，它会让您成为一个基于位图的对象，而“转换为位图”不会做任何事情。

# html - IE7 无法加载图片

> ID：13268791
> 
> 赞同：1
> 
> 时间：2012-11-07T11:25:43.700
> 
> 标签：html, internet-explorer-7

我有一个图像，它被指定为 h1 标签的背景图像（图像类型为 PNG）。当页面加载时，该图像第一次没有在 IE7 中加载，而是在页面刷新时加载。有人可以帮我在解决这个问题？

h1 { 背景图片： url(/images/song/live.png); }

```
<h1 style="margin-left: 15px;">Welcome... Do you know that New song. "I want to Live"?</h1> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:58:15.840

还在使用 IE 7？如果您开始修复 IE 7 问题，则没有尽头。你会花更多的钱来解决问题。看看下面的链接，你会看到挫败感。Windows XP 的销售在 2008 年本身就被取消了。IE 7 无法安装在 Windows 7 中。花精力修复 IE 7 问题也不值得。

[http://www.v3.co.uk/v3-uk/it-sneak-blog/2184533/australian-retail-firm-web-tax-internet-explorer-customers](http://www.v3.co.uk/v3-uk/it-sneak-blog/2184533/australian-retail-firm-web-tax-internet-explorer-customers)

作为临时解决方案，将内部包裹在一张桌子上。

# php - 首次访问时将 IE6 用户带到特定页面，并且仅在主页上

> ID：13268795
> 
> 赞同：0
> 
> 时间：2012-11-07T11:26:16.850
> 
> 标签：php, javascript, redirect

我在静态网站上使用 PHP 包含，我对所有页面使用相同的 header.php，并使用 php 更改页面标题等内容。

对于 IE6 用户，我只是在主页上希望他们被重定向到 unsupported.php，在此提示他们升级浏览器。

他们得到一个纯文本样式表，我觉得我需要解释为什么该网站看起来没有样式。

任何人都可以提供如何做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:32:52.057

只需要某种标志来指定用户是否在主页上，一个带有简单布尔值的变量就足够了：

```
$home = true;

if (isset($home) && $home === true) {
    echo 'You are on the home page';
    // do IE warning here
} 
```

从那里你可以说，检查浏览器用户代理字符串。如果它*是*IE 6（我不知道我头顶上的用户代理字符串），那么您可以设置一个 cookie，说明已查看警告并进行`header()`重定向。然后，每当使用 IE 6 的访问者访问您的网站时，请检查 cookie 是否设置并正常显示页面。

```
<?php
if (!isset($_COOKIE['ie_warned'])) {
    setcookie('ie_warned', true, strtotime('1 month'));
    header('HTTP/1.1 307 Temporary Redirect');
    header('Location: unsupported.php');
    exit;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T16:30:30.763

或者你可以在你的 PHP 头文件中包装这样的东西。

```
<!--[if IE 6]>
<script language="Javascript">
window.location = "http://www.site.com/unsupported.php";
</script>
<![endif]--> 
```

除非您在所有页面上都有此功能，否则各个页面仍可通过 IE6 访问

# unix - 0022和022的umask区别

> ID：13268796
> 
> 赞同：26
> 
> 时间：2012-11-07T11:26:18.087
> 
> 标签：unix, file-permissions, umask

`0022`umask和有什么区别`022`？我想将我的 umask 更改为`022`. 我该怎么做？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-07T12:08:54.630

`0022`umask和 umask之间没有区别`022`。

八进制 umask 使用按位非通过参数的一元补码的按位与来计算。

**像这样设置umask：**

```
el@apollo:~$ umask 0077
el@apollo:~$ umask
0077
el@apollo:~$ umask 0022
el@apollo:~$ umask
0022 
```

**umask值含义简要总结：**

umask 077 - 分配权限，以便只有您对文件具有读/写访问权限，并对您拥有的目录进行读/写/搜索。所有其他人都没有访问您的文件或目录的权限。

umask 022 - 分配权限，以便只有您对文件具有读/写访问权限，并对您拥有的目录进行读/写/搜索。所有其他人仅对您的文件具有读取权限，并且对您的目录具有读取/搜索权限。

umask 002 - 分配权限，以便只有您和您的组成员对文件具有读/写访问权限，对您拥有的目录具有读/写/搜索访问权限。所有其他人只能读取您的文件，并读取/搜索您的目录。

**有关 umask 功能的更多信息：**

如何设置您的默认 umask，请参阅这篇文章：[http ://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html](http://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html)

如果您想了解更多详细信息，这是一篇有趣的文章：[http ://articles.slicehost.com/2010/7/17/umask-and-unusual-file-permissions-and-types](http://articles.slicehost.com/2010/7/17/umask-and-unusual-file-permissions-and-types)

这篇文章的答案还提供了一些关于 umask 位的见解： [https ://stackoverflow.com/questions/4056912/question-about-umask-in-linux](https://stackoverflow.com/questions/4056912/question-about-umask-in-linux)

# java - 创建一个 JSONArray

> ID：13268799
> 
> 赞同：8
> 
> 时间：2012-11-07T11:26:22.053
> 
> 标签：java, android, json

如何创建 JSONArray，因为创建 JSONObject 非常简单：

```
JSONObject j = new JSONObject();
j.put("key",value); 
```

现在我可以在 JSONObject 中放入另一个字符串，或者 JSONObject 的字符串表示形式。

但是如何创建 JSONArray 并将其插入 JSONObject？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T11:29:24.417

> 但是如何创建 JSONArray 并将其插入 JSONObject？

您可以像创建 JSONObject 一样创建 JSONArray。

## 创作时间：

例如：

```
JSONArray myArray = new JSONArray();
JSONObject j = new JSONObject();
j.put("key",value);
j.put("array",myArray); 
```

## 检索时间：

您可以通过键名获取 String 或 JSONObject 的值或任何值。例如：

```
JSONArray myArray = objJson.getJSONArray("array"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T11:29:37.433

你可以这样做：

```
String[] data = {"stringone", "stringtwo"};
JSONArray json = new JSONArray(Arrays.toString(data)); 
```

或者，创建一个 JSONArray 对象并使用 put 方法添加您想要的任何字符串。要输出结果，只需使用 toString() 方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-07T11:53:52.747

为什么不使用 Gson 库很容易将任何对象转换为 json 数组、json 对象

下载 Gson 库，然后像这样使用

```
Gson gson=new Gson();

String json=gson.toJson(object); 
```

如果 Object 是 List 对象，它将创建 json 数组

Gson gson = 新 Gson();

```
reverse parsing for array -- 
        listObject = gson.fromJson(json,
                new TypeToken<List<ClassName>>() {
                }.getType()); 
```

对于单个对象

```
object = gson.fromJson(json, ClassName.class); 
```

# php - 如何使用数组访问多选的值？

> ID：13268811
> 
> 赞同：0
> 
> 时间：2012-11-07T11:27:12.787
> 
> 标签：php, arrays, forms, input, multi-select

我得到了多个选择字段：

```
<select name="cars[]" id="cars" multiple="multiple">
     <option value="yellow">Yellow</option>
     <option value="black">Black</option>
     [..]
</select> 
```

和这个：

```
<select name="cars[]" id="cars" multiple="multiple">
     <option value="audi">Audi</option>
     <option value="volk">Volkswagen</option>
     [..]
</select> 
```

当我选择一个随机选项并提交表单时，`print_r`输出`$_POST`是：

```
[group] => Array
(
    [0] => audi
    [1] => volk
    [2] => black
) 
```

我现在想访问颜色（在这种情况下，它将是`2`数组中的键号），但问题是当我选择其他字段时它可能会改变，例如。我选择了一个汽车品牌和一种颜色……然后它看起来像：

```
[group] => Array
(
    [0] => audi
    [1] => yellow
) 
```

所以问题是：有什么方法可以始终访问选定的汽车颜色和汽车品牌？如果将它分开就好了，但它不是，并且数组键是可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:32:41.547

只需使用不同的名称（+ 重复`id`是非法的，可能会导致问题）

```
<select name="cars_type[]" id="cars_type" multiple="multiple">
...
<select name="cars_color[]" id="cars_color" multiple="multiple"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:33:28.557

您不必为您的选择使用相同的 id。命名它们`cars_names`，`cars_colors`您将拥有 2 个单独的数组。

# php - 更改模型属性标签

> ID：13268812
> 
> 赞同：0
> 
> 时间：2012-11-07T11:27:15.183
> 
> 标签：php, yii

我有一个模型类，我在许多视图中使用它。

```
class Translations extends CActiveRecord
{
...
    public function attributeLabels()
    {
        return array(
            'row_id' => 'Row',
            'locale' => 'Locale',
            'short_title' => 'Short Title',
            'title' => 'Title',
            'sub_title' => 'Sub Title',
            'description' => 'Description',
            'content1' => 'Content1',
            'content2' => 'Content2',
            'com_text1' => 'Com Text1',
            'com_text2' => 'Com Text2',
            'com_text3' => 'Com Text3',
            'com_text4' => 'Com Text4',
            'com_text5' => 'Com Text5',
            'com_text6' => 'Com Text6',         
        );
    }
...
} 
```

我可以更改每个视图的模型属性标签值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:41:17.803

您可以根据要使用的视图为模型声明一个场景并根据场景定义参数吗？假设您的不同观点适用于不同的人：

```
public function attributeLabels()
{
    switch($this->scenario)
    {
        case 'PersonA':
            $labels = array(
                ...
                'myField' => 'My Label for PersonA',
               ...
            );
            break;
        case 'PersonB':
            $labels = array(
                ...
                'myField' => 'My Label for PersonB',
               ...
            );
            break;
        case 'PersonC':
            $labels = array(
                ...
                'myField' => 'My Label for PersonC',
               ...
            );
            break;
    }
    return $labels;
} 
```

然后在每个人的控制器中，您可以定义场景，例如；

```
$this->scenario = 'PersonA'; 
```

然后在将“PersonA”声明为场景后的视图中，您会看到“ `myField`PersonA 的我的标签”的标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-14T03:58:14.143

没有允许您以官方方式更改属性标签的方法或变量，因此我建议您扩展模型以支持它。

在 CActiveRecord 中，您可以定义名为 attributeLabels 的字段和名为 setAttributeLabels 的方法，并覆盖 attributeLabels 方法。

```
protected $attributeLabels = [];

public function setAttributeLabels($attributeLabels = []){
    $this->attributeLabels = $attributeLabels;
}

/**
 * @inheritDoc
 *
 * @return array
 */
public function attributeLabels(){
    return array_merge(parent::attributeLabels(), $this->attributeLabels);
} 
```

并从 \yii\base\Model::attributeLabels 的文档中说

> 注意，为了继承父类中定义的标签，子类需要使用诸如`array_merge()`.

因此，在 Translations 类中，您应该合并来自父级的属性标签，以及 CActiveRecord 类。所以 CActiveRecord attributeLabels 方法应该是这样的：

```
public function attributeLabels(){
    return array_merge([
        'row_id' => 'Row',
        'locale' => 'Locale',
        'short_title' => 'Short Title',
        'title' => 'Title',
        'sub_title' => 'Sub Title',
        'description' => 'Description',
        'content1' => 'Content1',
        'content2' => 'Content2',
        'com_text1' => 'Com Text1',
        'com_text2' => 'Com Text2',
        'com_text3' => 'Com Text3',
        'com_text4' => 'Com Text4',
        'com_text5' => 'Com Text5',
        'com_text6' => 'Com Text6',
    ], parent::attributeLabels());
} 
```

# tridion - 在 SDL Tridion 2011 Sp1 的 Dreamweaver 中直接检索关键字的键

> ID：13268817
> 
> 赞同：1
> 
> 时间：2012-11-07T11:27:33.917
> 
> 标签：tridion, tridion-2011

我的组件“somefield”中有一个关键字字段。它有一个键和一个值。

```
key: msg
Value: message 
```

是否可以直接在 DreamWeaver 中检索关键字的键值。

任何人都可以帮助我吗

提前感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:26:52.813

在 Dreamweaver 中，无法直接执行此操作。您需要使用 TOM.NET API 来获取密钥并将其放入包中。然后，您可以使用 Dreamweaver TBB 中的软件包项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T14:58:19.377

您可以使用[此处](https://stackoverflow.com/questions/12908803/how-to-get-the-keyword-from-category-name-in-c-sharp-tbb)的示例代码来获取关键字。使用 c# tbb 将它们推送到打包或使用自定义函数中的逻辑。

# php - Magento：允许用户在添加到订单的购物车上输入消息

> ID：13268818
> 
> 赞同：0
> 
> 时间：2012-11-07T11:27:40.293
> 
> 标签：php, magento

我想知道是否可以允许购物车上的用户输入将添加到订单中的消息。下面的屏幕截图显示了我的意思：

[http://i46.tinypic.com/3523rll.jpg](http://i46.tinypic.com/3523rll.jpg)

这可能吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:15:08.577

看一看 @

*   [Magento。为订单添加订单评论属性](https://stackoverflow.com/questions/8152186/magento-add-order-comment-attribute-to-order)

*   [http://www.magentocommerce.com/magento-connect/customer-order-comment.html](http://www.magentocommerce.com/magento-connect/customer-order-comment.html)

*   [http://www.brimllc.com/2010/07/magento-adding-custom-shipping-comments-at-checkout/](http://www.brimllc.com/2010/07/magento-adding-custom-shipping-comments-at-checkout/)

# sharepoint - 可以在 Sharepoint2010 列表中获得类似 asp.net 的上传按钮吗？

> ID：13268819
> 
> 赞同：0
> 
> 时间：2012-11-07T11:27:41.577
> 
> 标签：sharepoint, sharepoint-2010

有没有可能得到`asp.net like upload button in Sharepoint2010 List?`。在 Sharepoint 2010 上。

我正在向列表中添加一列。要求是在列表中填写条目时，一列应该有一个上传按钮。这会将图像上传到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:53:23.480

您能否提供更多详细信息，您主要想做什么？

请在下面找到可能对您有帮助的链接，您可以使用 Field Control 来满足您的要求。

[http://www.sharepointings.com/creating-a-field-control-for-sharepoint-a-filepicker/](http://www.sharepointings.com/creating-a-field-control-for-sharepoint-a-filepicker/)

# c - linux-kernel 模块分配的最大内存

> ID：13268824
> 
> 赞同：0
> 
> 时间：2012-11-07T11:27:53.260
> 
> 标签：c, linux, linux-kernel, linux-device-driver, kernel-module

我想编写一个模块，其任务是捕获传入的数据包而不将它们发送到用户空间应用程序并对捕获的数据包进行一些修改。然后这个模块将发送这个数据包传输到网卡。

但主要问题是我的模块尺寸非常大并且它也做了很多处理。那么在内核模块内部进行这个处理会更好，还是我们应该将信息和数据包传递给用户空间进行处理以避免复杂性。

& 我这样做只是为了快速处理数据包。
所以最大可以由 linux-kernel 模块分配多少内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:18:02.557

当在内核空间而不是用户空间运行时，网络数据包总是会更快。请记住，它必须被复制到用户空间，这是一项昂贵的操作。然而，并不是所有的东西都应该在内核空间中运行，因为这会使系统非常不稳定，因为每个错误都是潜在的内核崩溃。因此，如果您想使用内核或用户空间对应用程序进行编程，很大程度上取决于您的规范。

相反，要分配的内存量根本不重要。在 linux 模块中使用`kmalloc()`，您可以分配系统中物理可用的尽可能多的内存，所以应该没问题。

# android - 如何在 Android 上进行不可阻挡的每日重复动作？

> ID：13268830
> 
> 赞同：0
> 
> 时间：2012-11-07T11:28:08.423
> 
> 标签：android, service, android-workmanager

我怎样才能做每天重复而不被停止的不可阻挡的动作（检查没有 UI 的背景）？例如：每天在某个时间检查明天是否是格鲁吉亚日历月的偶数。
注意：我已经尝试过 alarmManger.setRepeating & WorkManagers 这样做，但一天或两天后它停止运行，我必须重新打开应用程序才能让它再次工作！
此问题发生在 Android Oreo (8) 及更高版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:41:26.843

您是否将 scringo.properties 文件放在 assets 文件夹中？

# iphone - [__NSArrayI objectAtIndex:]：索引 8 超出范围 [0 .. 7]'

> ID：13268831
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:28:10.493
> 
> 标签：iphone, ios6

我是 iOS 开发的新手，当我按照教程进行操作时，我的应用程序继续崩溃，但我不明白为什么..

```
2012-11-07 11:52:30.657 SliderList[2725:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 8 beyond bounds [0 .. 7]'
*** First throw call stack:
(0x1c8d012 0x10cae7e 0x1c42b44 0x2cb2 0x10de705 0x15920 0x158b8 0xd6671 0xd6bcf 0x15c52d 0xd5968 0x451bd 0x45552 0x233aa 0x14cf8 0x1be8df9 0x1be8ad0 0x1c02bf5 0x1c02962 0x1c33bb6 0x1c32f44 0x1c32e1b 0x1be77e3 0x1be7668 0x1265c 0x26bd 0x25e5 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

```
 #import "ViewController.h"
   NSArray *keuzeArray;

   @interface ViewController ()

   @end

   @implementation ViewController
   @synthesize keuze;
   - (IBAction)sliderValueChanged: (UISlider *)sender
   {
self.keuze.text = [keuzeArray objectAtIndex:sender.value];
   }

   - (void)viewDidLoad
   {
[super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

keuzeArray = [NSArray arrayWithObjects:
              @"Koffie zwart", @"Koffie melk", @"Koffie melk&suiker", @"cafe au lait",               @"Koud water", @"Heet water", @"Chocomel", @"Wiener melange", nil];
   }
   - (void) viewDidUnload
   {
[super viewDidUnload];
   }

   - (BOOL) shouldAutorotateToInterfaceOrientation:
   (UIInterfaceOrientation)InterfaceOrientation
   {
return (InterfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
   }

   @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:30:10.227

您正在从数组中调用索引不在数组上的对象。

基本上你的数组有 8 个元素（`0 to 7`），你正在调用索引`8`

只需更改此行：

```
self.keuze.text = [keuzeArray objectAtIndex:(sender.value - 1)]; 
```

这一切都应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:30:29.660

您的滑块的最大值超出了模型数组中的元素数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:30:57.663

看来，方法`UISlider`中的`sliderValueChanged:`是用 的值传递的`8`。由于 in 中的索引`NSArray`是从零开始的，因此您不能要求超出`7`.

您需要重新配置滑块，将最小值设置为`0`，最大值设置为`7`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:30:18.447

你只有`8`元素。 **在数组中，索引从 0 开始**。所以数组中的最后一个元素索引是`7`. 如果您尝试获取位于 index`8`或以上的元素，则会发生异常 ( `NSRangeException`) 并且您的应用程序将崩溃。 **因此，当您尝试从数组中获取元素时，请检查数组边界。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:32:44.010

您的数组有 8 个索引为 0 到 7 的对象。您正试图访问索引为 8 的对象。这就是它抛出异常错误的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-22T17:42:02.397

如果它在 UITableView 中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return arrayResponse.count-1;
} 
```

# go - time.Time 未定义

> ID：13268834
> 
> 赞同：4
> 
> 时间：2012-11-07T11:28:15.180
> 
> 标签：go

尝试使用 time.Time 类型的片段，但它不会将 time.Time 识别为类型。获取错误*time.Time 未定义（类型 int 没有字段或方法 Time）*我已在导入的顶部导入时间并将其声明为

```
var alarmTime []time.Time 
```

但没有运气。

有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T10:07:25.497

显然，您的代码中某处有一个名为 的变量`"time"`，类型为 。`int`

找到它并删除它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T11:34:15.333

在文件顶部添加`import "time"`（在`package ...`语句之后）

# eclipse - jRebel 中断了 Application 和 Session Scoped bean 的加载

> ID：13268840
> 
> 赞同：0
> 
> 时间：2012-11-07T11:28:38.987
> 
> 标签：eclipse, maven, jetty, jrebel

在没有 jRebel 的情况下启动时，jetty 的调试日志包含许多引用 MyApplicationScopedBean 的消息，例如：

```
13:46:29.620 [main] DEBUG o.e.jetty.webapp.WebAppClassLoader - loaded class MyApplicationScopedBean  from WebAppClassLoader=571787213@2214c7cd
13:46:32.132 [main] DEBUG o.e.jetty.webapp.WebAppClassLoader - loaded class MyApplicationScopedBean$1 from WebAppClassLoader=571787213@2214c7cd
13:46:32.162 [main] DEBUG o.e.jetty.webapp.WebAppClassLoader - loaded class MyApplicationScopedBean$2 from WebAppClassLoader=571787213@2214c7cd
... 
```

但是对于 jRebel，日志只包含一个关于 MyApplicationScopedBean 的字符串：

```
13:44:12.351 [main] DEBUG o.e.jetty.webapp.WebAppClassLoader - loaded class MyApplicationScopedBean from WebAppClassLoader=1298169768@4d607fa8 
```

任何想法为什么会发生？

这里是maven插件：

```
 <plugins>         
        <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>scala-maven-plugin</artifactId>
            <version>3.0.1</version>
            <executions>
                <execution>
                    <id>scala-compile-first</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>add-source</goal>
                        <goal>compile</goal>
                    </goals>
                </execution>
                <execution>
                    <id>scala-test-compile</id>
                    <phase>process-test-resources</phase>
                    <goals>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <webAppConfig>
                    <sessionHandler implementation="org.eclipse.jetty.server.session.SessionHandler">
                        <sessionManager
                            implementation="org.eclipse.jetty.server.session.HashSessionManager">
                            <!-- Disable url sessions using JSessionID -->
                            <sessionIdPathParameterName>none</sessionIdPathParameterName>
                        </sessionManager>
                    </sessionHandler>
                </webAppConfig>
                <!-- <failOnMissingWebXml>false</failOnMissingWebXml> -->
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <configuration>
                <systemProperties>
                    <systemProperty>
                        <name>logback.configurationFile</name>
                        <value>./src/etc/logback.xml</value>
                    </systemProperty>

                </systemProperties>

            </configuration>
            <dependencies>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-classic</artifactId>
                    <version>1.0.7</version>
                </dependency>
            </dependencies>

        </plugin>
        <plugin>
            <groupId>org.zeroturnaround</groupId>
            <artifactId>jrebel-maven-plugin</artifactId>
            <version>1.1.1</version>
            <executions>
                <execution>
                    <id>generate-rebel-xml</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:01:33.290

我使用的是没有 Eclipse 插件的 jRebel 5.0。安装最新的 jRebel 5.1 eclipse 插件解决了这个问题。

更新：在我将试用许可证升级到社交许可证后，它再次停止加载 JSF bean。我也对他们可疑的营销解决方案感到恼火：
1\. 在 coderanch 上的每个主题中都有愚蠢的误导性陈述，例如：“这里是：jRebel ...”。
2\. 社交许可假设允许发布到您的 FB（或 Twitter）。看起来男人们真的很专注于不惜一切代价赚钱。

所以，我决定摆脱这些废话并安装 DCEVM。它只是工作！它是免费和开源的。

[http://ssw.jku.at/dcevm/](http://ssw.jku.at/dcevm/)

# iphone - 如何在 iOS6 中更改 ADBannerView 的内容大小？

> ID：13268842
> 
> 赞同：0
> 
> 时间：2012-11-07T11:28:49.380
> 
> 标签：iphone, ios, iad

`currentContentSizeIdentifier`在 iOS6 中已弃用。我试过

```
_adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait; 
```

但它只适用于 iOS4/5。

如何在 iOS6 中更改 ADBannerView 的内容大小？

特别感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:02:25.653

```
[_adView setAutoresizingMask:UIViewAutoresizingFlexibleHeight] 
```

希望它会有所帮助。

了解更多信息：

[iOS 6 iAd 属性和方法已弃用](https://stackoverflow.com/questions/12557566/ios-6-iad-property-and-methods-deprecated)

[http://useyourloaf.com/blog/2010/09/16/placing-iad-banners-at-the-top-of-a-table-view.html](http://useyourloaf.com/blog/2010/09/16/placing-iad-banners-at-the-top-of-a-table-view.html)

# php - 使用get方法的php复选框

> ID：13268843
> 
> 赞同：1
> 
> 时间：2012-11-07T11:28:50.783
> 
> 标签：php, forms, checkbox, getmethod

我有这个：

```
<form action="index.php" method="get">
     <input  type="checkbox" name="Convs_revenue"
      <? echo (isset($_GET['extra_Data'])?"value='yes'":"value='no'");?>  
      <? if (isset($_POST['extra_Data']) ) echo 'checked="checked"'; ?> >extra_Data </input>
      <input type="submit" value="send">
</form> 
```

现在我需要保持 tp 的值保持复选框的值，并在未选中时取消设置它。我必须对这个表单使用 GET 方法，并且这也需要在同一页面上。

发生的事情是，无论我做什么，它似乎总是被检查，并且 get 数组总是保持这个状态......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:37:20.617

首先，`<input />`不需要结束标签。我还对代码进行了一些整理，使其更具可读性。

我添加了一个额外的检查以确保`$_POST['extra_Data']`它不为空。如果它以某种方式发布为空，它将显示为设置，我看不到您如何生成 POST 本身。

```
<form action="index.php" method="get">
     <input name="Convs_revenue" type="checkbox" value="<?php (isset($_GET['extra_data']) ? 'yes':'no'); ?>" <?php (isset($_POST['extra_Data']) && !empty($_POST['extra_Data'] ? 'checked="checked"' : '') ?> />
     <input type="submit" value="send">
</form> 
```

# facebook - 使用 javascript api 以管理员身份发布 Facebook 页面

> ID：13268844
> 
> 赞同：0
> 
> 时间：2012-11-07T11:28:53.100
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我在我的 javascript 代码中做了很多事情，以将页面中的提要发布为 m`，但是我如何只需单击一下即可通过 javascript 获得许可。

这是我的代码。

```
<body>
<div id='fb-root'></div>
<script src='http://connect.facebook.net/en_US/all.js'></script>
<p>
    <a href="javascript:;" onclick='postToFeed(); return false;'>Post to Group</a>
</p>
<p id='msg'></p>

<script> 
  FB.init({appId: "apid", status: true, cookie: true});
  function postToFeed() {
  FB.api('/page_id/feed', 'post', 
             { 
                 message     : "It's awesome ...",
                 link        : 'http://csslight.com',
                 picture     : 'http://csslight.com/application/upload/WebsitePhoto/567-grafmiville.png',
                 name        : 'Featured of the Day',
                 from: 'pageid',
                 description : 'CSS Light is a showcase for web design encouragement, submitted by web designers of all over the world. We simply accept the websites with high quality and professional touch.'
         }, 
         function(response) {
             alert(JSON.stringify(response));
         });
  }
  </script>
  </body> 
```

上述脚本的输出是

![在此处输入图像描述](../Images/213756030e4c8691c651f6ad011ca0a5.png)

但我不想以`BeCrazzy.com`非 Rajnish 的身份发布..！

简单地说，我想以管理员身份在页面中发布提要。请帮我。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:54:43.027

这里有一个教程向您展示了如何做到这一点：

[https://developers.facebook.com/docs/howtos/login/login-as-page/](https://developers.facebook.com/docs/howtos/login/login-as-page/)

您将无法使用 Facebook Javascript SDK 使用页面访问令牌对 API 调用进行签名，您需要使用 jQuery.ajax() 之类的东西来执行此操作。

# javascript - JS/JSF Session超时信息展示

> ID：13268845
> 
> 赞同：2
> 
> 时间：2012-11-07T11:28:55.100
> 
> 标签：javascript, jsf, session, logout

我将 JSF 1.2 与 JBoss 4.2 和 Richfaces 3.3 一起使用。对于我当前的应用程序，我必须构建一个小面板，它始终显示一个进度条和会话暂停（用户退出）之前的时间（以分钟为单位）。好吧，到目前为止一切正常。我通过 javascript 实现了我的解决方案，并且完美无缺。

但是现在我对 ajax 请求有一个大问题。我看到目前没有解决方案来获取处理程序或在每个 ajax 请求上触发的东西（重置我的进度条和注销前的分钟数）。

到目前为止，这是我的代码：

```
var timeLeft = document.getElementById('valueObject').value;
var maxTimeoutTime = document.getElementById('valueObject').value;
var intervalID;
function updateProgress() {
var percentageValue = timeLeft / (maxTimeoutTime / 100);
$('form:sessionTimeoutBar').component.setValue(percentageValue);
timeLeft = timeLeft - 1000;
if (timeLeft <= 0){
    clearInterval(intervalID);
 }
}

function resetProgress() {
alert("CALLED");
timeLeft = document.getElementById('valueObject').value;
$('form:sessionTimeoutBar').component.setValue(100);
clearInterval(intervalID);
intervalID = setInterval(updateProgress, 1000);
} 

function startProgress() {
$('form:sessionTimeoutBar').component.enable();
$('form:sessionTimeoutBar').component.setValue(100);
intervalID = setInterval(updateProgress, 1000);
} 
```

`timeLeft`并`maxTimeoutTime`通过从托管 bean 方法获取信息的隐藏输入字段进行检索。 `startProgress()`由 body 标签通过 onload 调用。

# yum - 如何配置 puppet 以便它以调试模式安装 yum repos？

> ID：13268846
> 
> 赞同：1
> 
> 时间：2012-11-07T11:28:53.793
> 
> 标签：yum, puppet

当我运行时`puppet apply`，它会尝试使用以下命令安装软件包：

```
/usr/bin/yum -d 0 -e 0 -y install couchdb-1.2.0-7.el6 
```

我如何配置以便它按以下方式运行它：

```
/usr/bin/yum -y install couchdb-1.2.0-7.el6 
```

也就是说，不删除调试日志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:30:00.363

您可以创建一个包含 exec 资源的模块。

```
>  exec { 
> 
>           "couchdb":
>            command => "/usr/bin/yum -y -d 0 install couchdb-1.2.0-7.el6",
>            path => "/usr/local/bin/:/bin/", 
> 
> } 
```

作为测试，我对我的 wget 进行了更新。在运行模块之前 wget 位于 1.11.4-2.el5。在我的存储库中，我有 1.11.4-3.el5_8.1。

以下是我的 'yum update list wget.x86_64' 的结果：

```
Installed Packages
wget.x86_64                1.11.4-2.el5                             installed

Available Packages   
wget.x86_64                1.11.4-3.el5_8.1                         update 
```

这是应用类后我的木偶输出（带有调试选项向您显示输出）：

> debug: Executing '/usr/bin/yum -y -d 0 update wget.x86_64' 通知: /Stage[main]/Yum-update-test/Exec[wget]/returns: 执行成功

这是应用类/模块后“yum update list wget.x86_64”的输出：

```
Installed Packages
wget.x86_64                1.11.4-3.el5_8.1                            installed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T17:58:14.217

通过这张票等待真正的修复： [https ://tickets.puppetlabs.com/browse/PUP-3453](https://tickets.puppetlabs.com/browse/PUP-3453)

您唯一的解决方案是直接修改 yum 包提供程序：/usr/lib/ruby/site_ruby/1.8/puppet/provider/package/yum.rb

```
 def install
wanted = @resource[:name]
# If not allowing virtual packages, do a query to ensure a real package exists
unless @resource.allow_virtual?
  yum *['-d', '0', '-e', '0', '-y', install_options, :list, wanted].compact
end 
```

将“-d”值更改为 10 即可完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-19T14:08:07.113

如果您多次提供 yum`-d`或选项，它将使用最新的值。`-e`所以，你也可以`install_options`在你的包资源上使用。例如：

```
package { 'wget':
  install_options => ['-d' , '10' , '-e' , '1' , '-v'],
} 
```

然后，您的 puppet 日志将包括以下内容：

```
2017-10-19 14:02:48 +0000 Puppet (debug): Executing: '/usr/bin/yum -d 0 -e 0 -y -d 10 -e 1 -v install wget' 
```

...以及所有调试输出。

# python - 使用 python 编辑文本文件

> ID：13268847
> 
> 赞同：0
> 
> 时间：2012-11-07T11:29:02.920
> 
> 标签：python, text

我有一个自动生成的参考书目文件来存储我的参考文献。生成文件中的 citekey 格式为`xxxxx:2009tb`. 有没有办法让程序检测到这种模式并将 citekey 形式更改为`xxxxx:2009`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:37:44.553

我不太清楚您要匹配哪个表达式，但是您可以使用正则表达式构建所有内容，如图所示使用 import re 和 re.sub。[0-9]*4 正好匹配 4 个数字。（编辑，纳入建议）

```
import re                                                                                                                                                                                          

inf = 'temp.txt'                                                                                      
outf = 'out.txt'                                                                                      

with open(inf) as f,open(outf,'w') as o:                                                              
    all = f.read()                                                                                    
    all = re.sub("xxxxx:[0-9]*4tb","xxxxx:tb",all) # match your regex here                                                  
    o.write(all)                                                                                      
    o.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:27:10.013

您实际上只想在参考中删除年份之后的两个字母。假设我们可以将引用唯一标识为一个冒号，后跟四个数字和两个字母，那么下面的正则表达式就可以工作（至少它在这个示例代码中是有效的）：

```
import re

s = """
according to some works (newton:2009cb), gravity is not the same that
severity (darwin:1873dc; hampton:1956tr).
"""

new_s = re.sub('(:[0-9]{4})\w{2}', r'\1', s)
print new_s 
```

解释：“匹配一个冒号`:`，后跟四个数字`[0-9]{4}`，后跟任意两个“单词”字符`\w{2}`。括号仅捕获您要保留的部分，`r'\1'`这意味着您将每个完整匹配替换为第一个 (并且唯一的) 括号组。`r`字符串之前存在，因为有必要将其解释`\1`为原始字符串，而不是转义序列。

希望这可以帮助！

# javascript - 带有 || 的 Javascript 变量声明

> ID：13268848
> 
> 赞同：0
> 
> 时间：2012-11-07T11:29:09.487
> 
> 标签：javascript

我目前正在研究 Three.js，并且在主源文件的顶部遇到了这个变量声明：

```
var THREE = THREE || { REVISION: '52' }; 
```

我只是想知道 OR (||) 在那里做什么 - 它的功能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:30:19.860

上面的意思是：

如果 的值`THREE`计算为`true`，则将 的值赋给`THREE`变量`THREE`，否则将其初始化为对象`{ REVISION: '52' }`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:33:48.640

在代码中，这就像说：

```
var THREE;
if (THREE) {
    THREE = { REVISION: '52' };
}
else {
    THREE = THREE;
} 
```

或者：

```
var THREE = (THREE) ? { REVISION: '52' } : THREE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:32:58.300

惰性实例化。如果变量已声明，则为其赋值。

# c# - 基于 Empty XML 示例合并丢失的 XML 记录

> ID：13268851
> 
> 赞同：2
> 
> 时间：2012-11-07T11:29:32.230
> 
> 标签：c#, .net, xml

我有一个 XML 模板文件和一个以前保存的 XML 数据库记录：

*   XML 文件 - 包含我想要的对象的所有当前字段 - 这可能会随着时间的推移随着添加的项目而改变
*   XML 数据库记录 - 这是保存的 XML。它可能与第一点中的 XML 不同，因为“模板”xml 可能已更新为包含更多字段等。

一个例子将清楚这一点..

我有一个看起来像这样的“模板”xml：

```
<dvd displayText="">
  <field id="txtTitle" displayText="true" required="true" type="textbox" width="100" label="DVD 标题" />
  <field id="txtDescription" displayText="true" required="true" type="textbox" width="50" label="你的描述" />
</dvd>

```

这告诉 UI 在创建新记录时收集标题和描述。这完美地工作。

因此，当我创建一个新的 DVD 记录时，它将向用户显示这两个字段并收集“标题”和“描述”值并将值保存到 SQL Server 表中的 XML 字段中。

但我现在要做的是向模板 xml 添加一个新的“字段”定义。我已经完成了这个.. 就本示例而言，让我们将“PurchasedDate”字段定义添加到模板 XML 中。

```
<dvd displayText="">
  <field id="txtTitle" displayText="true" required="true" type="textbox" width="100" label="DVD 标题" />
  <field id="txtDescription" displayText="true" required="true" type="textbox" width="50" label="你的描述" />
  <field id="txtPurchaseDate" displayText="true" required="true" type="textbox" width="50" label="购买日期" />
</dvd>

```

如果我正在创建新的 DVD 记录，系统会提示我输入 3 个值；标题、描述、购买日期，因为那是模板 XML 中的内容。但如果我回想以前保存的 DVD 记录，它在 XML 中没有新的“购买日期”字段。

```
<dvd displayText="我的 DVD">
  <field id="txtTitle" displayText="true" required="true" type="textbox" width="100" label="DVD Title">我的电影 DVD</field>
  <field id="txtDescription" displayText="true" required="true" type="textbox" width="50" label="Your Description">这部电影很棒</field>
</dvd>

```

所以我想要做的是获取保存在数据库中的 XML（如上所示），比较或合并模板 XML 文件中任何缺少的“字段”定义..并最终得到以下结果：

```
<dvd displayText="我的 DVD">
  <field id="txtTitle" displayText="true" required="true" type="textbox" width="100" label="DVD Title">我的电影 DVD</field>
  <field id="txtDescription" displayText="true" required="true" type="textbox" width="50" label="Your Description">这部电影很棒</field>
  <field id="txtPurchaseDate" displayText="true" required="true" type="textbox" width="50" label="购买日期" />
</dvd>

```

我正在使用 Linq 从数据库中的现有记录中获取值（如果存在）。我目前正在执行 XmlDocument.LoadXml(xmlstring) 或 XmlDocument.Load(filename) ，具体取决于它是新记录还是现有记录。

然后，我想获取 XmlDocument 并将模板合并到其中以生成上述 XML 输出以在屏幕上显示。

如果有比使用 XmlDocuments 更好的方法，请告诉我.. 我很乐意去研究它然后使用它..

我正在使用 C#...

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:01:10.403

您的解决方案存在巨大的冗余问题，例如，如果您更改其中一个字段的显示文本或更改必填字段，您将面临类似的问题。

我会将元数据与实际数据分开，即保留一份描述字段的记录：

```
<dvd displayText="">
  <field id="txtTitle" displayText="true" required="true" type="textbox" width="100" label="DVD Title" />
  <field id="txtDescription" displayText="true" required="true" type="textbox" width="50" label="Your Description" />
  <field id="txtPurchaseDate" displayText="true" required="true" type="textbox" width="50" label="Purchase Date" />
</dvd> 
```

并将数据记录剥离为字段 ID 和值：

```
<dvd displayText="A movie">
  <field id="txtTitle">Some title</field>
  <field id="txtDescription">Some description</field>
  <field id="txtPurchaseDate">2012-12-21</field>
</dvd> 
```

使用元 xml 来确定可以加载哪些字段并从精简的 xml 中获取值。

否则，每次记录布局更改时，您都需要同步所有数据。

# outlook - 功能区无效不起作用

> ID：13268854
> 
> 赞同：2
> 
> 时间：2012-11-07T11:29:37.510
> 
> 标签：outlook, vsto, outlook-addin

我有一个带有编辑框的简单 Outlook 功能区。用户单击发送按钮后，我会在编辑框中捕获字符串并在 Application_ItemSend 中使用它。

我的问题是，功能完成后，我想重置功能区的 UI（只是编辑框），以便用户在打开新消息屏幕时不会在同一个框中输入先前键入的字符串。我尝试了 Ribbon.Invalidate 但我似乎无法摆脱那个字符串值。当我重新打开“新电子邮件”屏幕时，旧值仍然存在。

这是代码：

```
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui" onLoad="Ribbon_Load_2010">
<ribbon>
<tabs>
  <tab idMso="TabNewMailMessage">
    <group id="TaskManager" insertBeforeMso="GroupSend" label="Task Manager">
      <editBox id="editboxTaskID" label="Task ID #: " onChange="editboxTaskID_OnChange" 
imageMso="RecordsAddFromOutlook" sizeString="wwwwww"/>
    </group>
  </tab>
</tabs>
</ribbon>
</customUI> 
```

和VB代码：

```
<Runtime.InteropServices.ComVisible(True)> _
Public Class CustomRibbon
Implements Office.IRibbonExtensibility

Private ribbon As Office.IRibbonUI
Public strTask_ID As String = ""

Public Sub New()

End Sub

Public Function GetCustomUI(ByVal ribbonID As String) As String Implements Office.IRibbonExtensibility.GetCustomUI
    Return GetResourceText("Addin.Ribbon.xml")
End Function

Private Sub Application_ItemSend(ByVal Item As Object, ByRef Cancel As Boolean)
    Me.ribbon.Invalidate()
    Try

 'SOME CODE HERE WHICH WORKS FINE!

    Catch ex As Exception
    End Try

End Sub

'Create callback methods here. For more information about adding callback methods, select the Ribbon XML item in Solution Explorer and then press F1.
Public Sub Ribbon_Load_2010(ByVal ribbonUI As Office.IRibbonUI)
    Me.ribbon = ribbonUI
    AddHandler Globals.ThisAddIn.Application.ItemSend, AddressOf Application_ItemSend
End Sub

Public Sub editboxTaskID_OnChange(ByVal control As Office.IRibbonControl, ByVal Text As String)
    strTask_ID = Text
End Sub

Public Sub AttachmentRibonClick(ByVal control As Microsoft.Office.Core.IRibbonControl)
    Globals.ThisAddIn.TriggerTaskWindow("Attachment")
End Sub

Private Shared Function GetResourceText(ByVal resourceName As String) As String
    Dim asm As Reflection.Assembly = Reflection.Assembly.GetExecutingAssembly()
    Dim resourceNames() As String = asm.GetManifestResourceNames()
    For i As Integer = 0 To resourceNames.Length - 1
        If String.Compare(resourceName, resourceNames(i), StringComparison.OrdinalIgnoreCase) = 0 Then
            Using resourceReader As IO.StreamReader = New IO.StreamReader(asm.GetManifestResourceStream(resourceNames(i)))
                If resourceReader IsNot Nothing Then
                    Return resourceReader.ReadToEnd()
                End If
            End Using
        End If
    Next
    Return Nothing
End Function
End Class 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T15:43:42.093

invalidate 方法用于表示控件已更新并且需要在屏幕上重新呈现。它不会清除控件中的数据。您需要做的是将有问题的字符串值存储为空字符串的控件（在本例中为编辑框）上设置属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T14:10:39.037

好的，我想通了。

显然，在您使控件无效后，您需要使用 Editbox 的 GetText 函数来初始化值。

```
 Public Function editboxTaskID_GetText(ByVal control As Office.IRibbonControl) As String
        Return ""
    End Function 
```

我还注意到其他网站对该功能使用不同的签名 - 这不起作用。我相信微软在迁移到 2010 Interop 时将其从 Sub 更改为 Function。

我希望微软对此有更好的文档。

快乐编程！

# android - 对 ActionBar 项进行排序

> ID：13268855
> 
> 赞同：0
> 
> 时间：2012-11-07T11:29:38.993
> 
> 标签：android

目前，操作栏中的项目似乎默认排序为：

1.  扩展菜单 XML 文件的顺序。例如调用`onCreateOptionsMenu()`或`onCreateActionMode()`在`Activity`类层次结构中。

2.  在菜单 XML 文件中声明操作项的单个顺序。

现在问题在于上述第 1 点。是否有另一种方法来确保正确的顺序？也就是说，操作栏项按特定顺序排列，如更可用的优先，不太可用的可以停留在溢出菜单中。

据我所知，菜单项只有`showAsAction`属性，不足以排序项目。还有其他可以使用的属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:05:08.550

在当前的 API 中没有办法做到这一点。劫持`super()`呼叫是另一种（艰难而丑陋的）选项。

# javascript - html文档中的javascript和css，最佳实践？

> ID：13268857
> 
> 赞同：1
> 
> 时间：2012-11-07T11:29:43.210
> 
> 标签：javascript, css, html, include

我需要为我正在开发的框架实现 javascript 和 css 资源，但我有一个**大**问题。

如果您查看当前的网站，如 Facebook、Google、Youtube 和其他顶级网站，它们的源代码会在代码的各个位置显示它们对 javascript 的使用。我想到的第一个问题是......不应该在文档开头分配javascript源**文件吗？**您可以/应该能够将javascript命令放在脚本块中，但是......源文件呢？

我一直在阅读的书籍建议（我猜是最佳实践）所有源文件都应该分配在 head 部分，同时将所有代码块移到页面末尾，就在关闭 body 部分之前（如果可能）。

同样适用于 CSS。我已经看到在页面中间找到源文件包含的页面，而正常的声明是在开头包含所有 css 文件（因为它比就地包含更有效，因为它们并行加载方式）。

在我看来，如果我要遵循我一直在阅读的书籍，源文件（javascript 和 css）总是放在最上面，脚本块（如果可能的话）放在文档的底部，CSS 包含是就地避免（除非您想使用 scope 属性或者它是 html 标记内的样式声明，如果可能，也应避免使用）。

是对的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T11:32:03.210

因此，最佳实践规定：

CSS 文件应该放在`<head>`文档的顶部，尽可能靠近顶部。我通常把我的放在任何`<meta>`标签之后。

JavaScript 文件应尽可能靠近结尾`<body>`，通常直接位于`</body>`标记之前。

这是因为 JavaScript 文件是串行加载并且是阻塞的，所以如果 JavaScript 文件包含在`<head>`页面中，则必须在加载文档主体之前全部加载所有文件，这通常会产生延迟的感觉。

实际上，JavaScript 文件和 JavaScript 脚本块之间几乎没有区别。他们都使用`<script>`元素，只是外部引用的文件有一个`src`属性。从解析器的角度来看，它们是相同的。

从有效性的角度来看，`<script>`元素可以放置在页面中的任何位置`<head>`，`<body>`并且有时`<script>`文件应该放在页面中`<head>`，例如使用 typekit 之类的东西时，因为这将确保字体文件及时加载页面加载后立即显示字体，防止 FOUF（无样式字体闪烁）

# debugging - wp7中的试用+付费应用

> ID：13268860
> 
> 赞同：0
> 
> 时间：2012-11-07T11:30:07.660
> 
> 标签：debugging, windows-phone-7, upload, trial

当我在我的 windows phone silverlight 应用程序中实现试用体验时，我在我的设备上以我最近制作的 DebugTrial 模式对其进行了测试，我想问哪个 XAP 文件要上传到市场，是 Debug 文件夹还是 DebugTrial 文件夹？

# android - Android：用户选择textView背景的颜色

> ID：13268863
> 
> 赞同：0
> 
> 时间：2012-11-07T11:30:10.403
> 
> 标签：android, styles, spinner

我正在尝试创建一个菜单选项，用户可以在其中选择 textView 可以显示的颜色。例如，用户选择红色，选择将 textView 背景设置为红色的预览按钮。任何建议将不胜感激。

```
public class UserMenu extends Activity implements OnClickListener {
Button preview;
Spinner spinnerColor;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_user_menu);

        spinnerColor = (Spinner) findViewById(R.id.spinnerColorMenu);
        TextView Title = (TextView)findViewById(R.id.ViewModuleTitle);

        preview = (Button)findViewById(R.id.previewButton);
           preview.setOnClickListener(this);
    }

    public void onClick(View v)
    {
        String color = spinnerColor.getSelectedItem().toString();
        Title.setBackgroundResource(R.color.color);

    }
} 
```

布局

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/ViewModuleTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/darkBlue"
        android:paddingBottom="10dp"
        android:paddingLeft="10dp"
        android:paddingTop="10dp"
        android:text="@string/addModule"
        android:textColor="@color/white"
        android:textSize="22dp" />

    <TextView
        android:id="@+id/lableTextModuleCode"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/enterModuleCode"
        android:layout_marginLeft="10dp"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        style="@style/textColor"/>

     <Spinner
        android:id="@+id/spinnerColorMenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:entries="@array/colorMenu"/>

     <Button
          android:id="@+id/previewButton"
          android:layout_width="150dp"
          android:layout_height="wrap_content"
          android:layout_marginBottom="10dp"
          android:onClick="previewButton"
          android:text="@string/addModule" />

     </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:51:56.410

您可以尝试以下方法：-

1.  让 colormenu.xml 中的 color_array 如下：-

    ```
    <item>red</item>
    <item>blue</item>
    <item>green</item>
    <item>black</item> 
    ```

2.  在您的 onClick 中添加以下行：-

    **int parsed_color = Color.parseColor(color);**

3.  这是修改后的代码：-

公共类 MainActivity 扩展 Activity 实现 OnClickListener {

按钮预览；

微调微调器颜色；

文本视图标题；

```
@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    spinnerColor = (Spinner) findViewById(R.id.spinnerColorMenu);
   Title = (TextView)findViewById(R.id.ViewModuleTitle);

    preview = (Button)findViewById(R.id.previewButton);
       preview.setOnClickListener(this);
}

public void onClick(View v)
{
    String color = spinnerColor.getSelectedItem().toString();
    int parsed_color = Color.parseColor(color);

   Title.setBackgroundColor(parsed_color );

} 
```

}

这工作正常。不需要任何 if else 语句或任何开关。

**PS parseColor() 方法支持#RRGGBB #AARRGGBB 'red', 'blue', 'green', 'black', 'white', 'gray', 'cyan', 'magenta', 'yellow', 'lightgray' , '深灰色' 格式。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:39:47.887

```
 public void onClick(View v)
 {
        String color = spinnerColor.getSelectedItem().toString();
        if(color.equalsignorecase("Red"))
         {
            Title.setBackgroundColor(Color.RED);
         }
         else if(color.equalsignorecase("Blue"))
         {
            Title.setBackgroundColor(Color.Blue);
         }
} 
```

更多的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:41:46.520

```
String color = spinnerColor.getSelectedItem().toString();
Title.setBackgroundResource(R.color.color); 
```

它不起作用，你应该使用`switch (color)`

# android - 如何从sql server中的日期字符串中获取月份

> ID：13268866
> 
> 赞同：-2
> 
> 时间：2012-11-07T11:30:17.200
> 
> 标签：android, date, date-difference

如问题标题中所述，我在不同帐户中有不同的日子，如何获取这些日期的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:37:07.557

只需根据您的日期格式更改以下日期格式：

```
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
try {
    Date date = (Date)formatter.parse(str); 
    DateFormat df = new SimpleDateFormat("MM"); // you can use 'dd' for date
    return df.format(date);
} catch (ParseException e) {
    e.printStackTrace();
    return null;
} 
```

# iphone - 通过代码粘贴文本

> ID：13268868
> 
> 赞同：1
> 
> 时间：2012-11-07T11:30:21.177
> 
> 标签：iphone, objective-c, ios, xcode, keyboard

> **可能重复：**
> [使用按钮复制和粘贴文本](https://stackoverflow.com/questions/12150586/copy-and-paste-text-with-buttons)

我想通过代码从剪贴板中过去，而无需在 iPhone 中切换屏幕，有人知道吗？

我想通过不像这些的代码来进行这些操作。

![在此处输入图像描述](../Images/caf0fae370e1c63b93e752a8ca8f4ea2.png)

嗯，问这些是否可能，或者在那种情况下访问iOS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:58:16.690

`[UIPasteboard generalPasteboard]`为您提供一个实例，[`UIPasteboard`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPasteboard_Class/Reference.html)该实例向用户当前剪贴板内容忏悔。像这样使用它

```
- (IBAction)pasteButtonPressed {
    self.myTextView.text = [[UIPasteboard generalPasteboard] string];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:12:38.260

[`UIResponderStandardEditActions`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponderStandardEditActions_Protocol/UIResponderStandardEditActions.html)非正式协议声明了`paste:`为此目的而设计的方法。`UITextView`（连同其他`UIResponder`子类）符合此非正式协议，因此响应此方法。

这样做的好处是可以管理粘贴操作的各个方面，尤其是在插入点的位置粘贴文本，或者替换选定的文本（如果有的话），就像经典的粘贴操作一样。

* * *

另一种解决方案是在你的文本视图中插入包含在`UIPasteboard`你自己中的文本。但请确保在这种情况下替换`selectedTextRange`（选定的文本或插入点）而不是替换`UITextView`.

为此，请使用**`UITextView`实现`UITextInput`正式协议**`UITextView`的事实，该协议声明了处理管理文本输入（如，`UITextField`等）的对象所需的每个方法，**尤其****是`replaceRange:withText:``selectedTextRange`**：

```
NSString* pasteboardText = [[UIPasteboard generalPasteboard] string];
[self.myTextView replaceRange:self.myTextView.selectedTextRange withText:pasteboardText]; 
```

# dynamics-crm-2011 - 通过创建新实体预分配属性

> ID：13268875
> 
> 赞同：0
> 
> 时间：2012-11-07T11:30:37.993
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

在 CRM 中创建新实体时，会预先分配一些字段。示例：对于新联系人 - transactioncurrency 和 ownerid 将填充值。我怎么能以编程方式找出哪些规则将用于此类预分配。我不能调用“initializefromrequest”来找出它，因为我想构建离线数据库并应用规则

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:43:56.660

获取`EntityMetadata`您的实体，然后检查`AttributeMetadata`每个`Attribute`以确定该`IsCustomAttribute`属性是否是`true`

1.  [使用检索实体元](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.messages.retrieveentityrequest.aspx)数据[`EntityFilters = EntityFilters.Attributes`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.metadata.entityfilters.aspx)
2.  迭代响应中的[`Attribute`集合`EntityMetadata`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.metadata.entitymetadata_members.aspx)
3.  检查`IsCustomAttribute`每个属性`AttributeMetadata`

# php - Ajax 注册表单的奇怪行为

> ID：13268884
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:30:59.523
> 
> 标签：php, jquery, ajax, forms

我在主页上注册时事通讯 ajax 表单时遇到了这个莫名其妙的问题。如果我第一次在[http://bit.ly/LP3phc](http://bit.ly/LP3phc)打开并尝试使用右下角的注册表单，表格不起作用。当我单击徽标并且主页重新加载表单正常工作时。

预先感谢您的任何帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:51:17.367

它位于 2 个不同的域上。

第一个链接转到 www.ducashop.ro，但 AJAX 请求转到 ducashop.ro。当您单击徽标时，它会将您带到 ducashop.ro。

这被视为跨域，出于安全原因被阻止。您应该将 AJAX 请求发送到您所在的域（在 javascript 中，您可以使用 访问域`window.location.host`），或者更好的是强制所有流量在具有 www 的域或没有 www 的域上（[您可以使用 htaccess 执行此操作](http://css-tricks.com/snippets/htaccess/www-no-www/)）。

如果您想了解更多关于为什么会发生这种情况，请查看[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

# java - Eclipse RCP 应用程序中的全局异常处理

> ID：13268889
> 
> 赞同：6
> 
> 时间：2012-11-07T11:31:24.997
> 
> 标签：java, logging, eclipse-rcp

我想在我的`RCP`应用程序中覆盖全局异常处理。每当发生未捕获的异常时，我想记录它（使用`java`日志记录）然后退出应用程序。我已经覆盖了类中的`eventLoopException(Throwable exception)`方法`ApplicationWorkbenchAdvisor`。但这仅捕获事件循环异常。到目前为止，我还覆盖了`postStartup()`这样的方法：

```
public void postStartup()
{
    Policy.setStatusHandler(new StatusHandler()
    {
       @Override
          public void show(IStatus status, String title)
          {
            LOGGER.log(Level.SEVERE, "Uncaught Exception", status.getException());
            UnexpectedErrorDialog();
            PlatformUI.getWorkbench().close();
          }
    });
} 
```

它在我的日志文件中记录异常并退出应用程序。但这显然是不对的，异常在控制台中显示了两次，因为我所做的只是拦截向`gui dialog`用户显示的异常。那么如何正确覆盖/更改全局异常处理，以便使用我的代码（日志）而不是默认代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T13:04:07.807

我建议你使用`org.eclipse.ui.statusHandlers`扩展点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:38:33.010

感谢 sambi reddy 的提示，我现在已经覆盖了 ApplicationWorkbenchAdvisor 类中的 AbstractStatusHandler

```
@Override
public synchronized AbstractStatusHandler getWorkbenchErrorHandler() {
    if (myStatusHandler == null) {
        myStatusHandler = new MyStatusHandler();
    }
    return myStatusHandler;
} 
```

MyStatusHandler 扩展了 AbstractStatusHandler 并且我已经像这样覆盖了句柄方法：

```
@Override
public void handle(StatusAdapter statusAdapter, int style)
{
    if(statusAdapter.getStatus().matches(IStatus.ERROR) && ((style != StatusManager.NONE)))
    {
            LOGGER.log(Level.SEVERE, "Uncaught Exception", statusAdapter.getStatus().getException());
            UnexpectedErrorDialog();
            PlatformUI.getWorkbench().close();
    }
} 
```

似乎工作正常，唯一的缺点是我仍然得到 2 个控制台输出。

# cakephp - CakePHP2 上 javascript 的相对路径

> ID：13268890
> 
> 赞同：1
> 
> 时间：2012-11-07T11:31:26.487
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我想知道是否有任何方法可以做类似于`HtmlHelper`Cake 视图中所做的事情：不必手动编写 URL，而是调用某种帮助器来为您制作。

我看过[这篇文章](https://stackoverflow.com/questions/3352350/best-practice-to-use-action-url-while-calling-ajax-in-cakephp)，但它是从 2010 年开始的，也许现在有一些新的东西......

目前我的javascript文件中有这样的代码：

```
window.location.href = 'http://' + document.domain +'/cakephp/posts/view/'+$(this).attr('data-id'); 
```

但是，如果我更改 cakephp 文件夹名称，或者我在服务器上使用其他配置或类似的配置，则 URL 会更改，我应该手动更改具有此类 URL 的所有代码。

我想知道是否有类似的东西：

```
echo $this->Html->link('controller' => 'users' , 'action' => 'login'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:49:49.357

您指的是内联 JavaScript 还是外部 JavaScript？使用该方法内联相当容易，它接受与（包含 URL 的数组或字符串）`url`相同的参数。`link`

在外部文件中使用它有点棘手。在加载 JS 文件之前，我定义了一个包含站点路径的 JS 变量。

```
<script type="text/javascript">
//<![CDATA[
var SITE_URL = "http://www.example.com/cakeapp/";
//]]>
</script> 
```

在我的外部 JavaScript 文件中，我可以`SITE_URL`在需要时引用它。当您更改域或重命名`cakeapp`目录时，您只需更改`SITE_URL`变量。

# django - 翻译 Django 管理界面

> ID：13268891
> 
> 赞同：0
> 
> 时间：2012-11-07T11:31:28.507
> 
> 标签：django, translation

我正在尝试自定义 Django 生成的管理界面，以便它以我的母语希伯来语（包括从右到左的方向）显示，但我似乎找不到操作方法或任何参考。[Django 翻译文档](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)
没有给我一个明确 的答案，尽管显然有人已经创建了[希伯来语翻译](https://github.com/django/django/commit/8a861942cd)。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:34:39.447

在这里您有您要查找的信息： [https ://docs.djangoproject.com/en/1.1/topics/i18n/localization/](https://docs.djangoproject.com/en/1.1/topics/i18n/localization/)

编辑：

我没有在 1.4 文档上找到该页面，但这里是针对 1.3 的，它应该仍然是正确的。AFAIK 在 1.4 中没有任何改变。 [https://docs.djangoproject.com/en/1.3/topics/i18n/localization/](https://docs.djangoproject.com/en/1.3/topics/i18n/localization/)

编辑2：

这是 django 1.4 的信息[https://docs.djangoproject.com/en/1.4/topics/i18n/translation/](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/)

关于生成 po 文件的信息在这里[https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#message-files](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#message-files)

# javascript - 如何在单行中交替滑出和滑入两个div？

> ID：13268894
> 
> 赞同：1
> 
> 时间：2012-11-07T11:31:36.937
> 
> 标签：javascript, jquery, css, jquery-ui

我正在尝试使用jQuery幻灯片效果来滑动新添加的内容，但我无法应用任何解决方案将两个div放在一行中。如何修复下面的代码以从左到右并排滑动？也许这段代码是完全重建的？

jsfiddle： [jsfiddle](http://jsfiddle.net/2xuKz/2/)

JS：

```
$(function() {
    $("#hello").html("Hello");
    $('#edit').toggle(function() {
        var newhtml = '<input type="text" id="hello_input" value="" />';
        slideNewContent(newhtml);
    }, function() {
        var newhtml = $("#hello_input").val();
        slideNewContent(newhtml);
    });
});

function slideNewContent(c) {
    $("#slideOut").empty();
    $("#slideIn").children().clone().appendTo("#slideOut");
    $("#slideIn").find("#hello").html(c);
    var slideOut = $("#slideOut");
    var slideIn = $("#slideIn");
    slideOutIn(slideOut, slideIn);
}

function slideOutIn(outElement, inElement) {
    var hideoptions = { "direction": "right", "mode": "hide" };
    var showoptions = { "direction": "left", "mode": "show" };
    $(outElement).effect("slide", hideoptions, 1000);
    $(inElement).effect("slide", showoptions, 1000);
} 
```

​HTML：

```
<div class="span3">
    <div id="slider">
        <div id="slideIn" class="content">
            <span>       
                <span id="hello"></span>
                <button class="btn btn-mini" id="edit">Edit</button>
            </span>           
        </div>
        <div id="slideOut" class="content"></div>
    </div>
</div>​ 
```

CSS：

```
#slider {
  /*float:left;*/
    display: inline-block;
}
#slideIn {
   width: 270px;
  /*display: inline;*/
}
#slideOut {
    width: 270px;
  /*display: inline;*/
}
#hello_input {
  width:160px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:48:31.287

对此进行编辑

```
$(outElement).effect("slide", hideoptions, 0);
    $(inElement).effect("slide", showoptions, 0); 
```

# magento - Magento，在产品创建或编辑期间获得“新”或“编辑”

> ID：13268896
> 
> 赞同：0
> 
> 时间：2012-11-07T11:31:58.983
> 
> 标签：magento, url, product

在 Magento 中，当我创建或编辑产品时，我需要知道该产品是新产品还是已编辑产品。

我找到了一个带有“new”或“edit”的部分或 URL，但我没有在网上找到任何东西来帮助我抓住这个。

你能帮助我吗？

编辑：

好的，我发现了一些东西：
我正在尝试获取控制器的 ActionName，但我在创建或编辑产品时运行自定义选项选项卡的块上。所以当我得到 ActionName 时，我得到“选项”，它是孩子，我需要上面的 ActionName（它可能是父母？）。
欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:01:28.263

在创建产品期间，product_id 为 NULL，如果它是现有产品，则 product_id 将大于零。

# java - 是否可以在 Eclipse-RCP 中定义 ViewPart 或 Workbench 的最小尺寸？

> ID：13268900
> 
> 赞同：2
> 
> 时间：2012-11-07T11:32:10.293
> 
> 标签：java, user-interface, layout, eclipse-rcp

我有一个无法在某些宽度和高度下调整大小的`Eclipse`应用程序。`ViewPart`

是否可以限制调整大小以使整体`workbench`不能小于我要设置的 Point 值？

这个要求是因为里面的图片是`ViewPart`不能隐藏的。

现在我有一个`DIALOG_TRIM`整体选项，`workbench`所以它不能调整大小，但我被要求最大化应用程序，所以最小大小是问题。

我在 stackoverflow.com 上没有找到任何关于这样做的信息。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T13:01:14.167

您只需要在 main 上设置最小尺寸`Shell`

```
ApplicationWorkbenchWindowAdvisor

    @Override
    public void postWindowCreate() {
        super.postWindowCreate();
       final Shell shell = getWindowConfigurer().getWindow().getShell();
       shell.setMinimumSize(700, 800);
    } 
```

# php - 导入 CSV 时出现字符集问题（Windows 操作系统）

> ID：13268903
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:32:24.067
> 
> 标签：php, mysql, csv

我正在尝试将 CSV 文件中的数据插入 mysql 但是，我无法保存英语以外的语言。表明 '？？？？？？？' 在 csv 文件中，我想将它保存在 csv 文件和 mysql 中。它在 ubuntu 上正常工作，但在 Windows 上产生问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:26:32.910

您必须设置 mysql 以使用 UTF-8 字符编码。看到[这个线程](https://stackoverflow.com/questions/5405236/jdbc-mysql-utf-8-string-writing-problem)

还要确保以 UTF-8 格式打开 CSV。

# javascript - 当我们在前两个文本框中输入值时，自动在第三个框中生成输出的 HTML 程序？

> ID：13268904
> 
> 赞同：2
> 
> 时间：2012-11-07T11:32:26.407
> 
> 标签：javascript, html

我的页面上有三个文本框和三个单选按钮。我已经编写了算术运算程序，即 add、sub、mul 等。现在我想在第一个文本框中输入值时在第三个文本框中自动生成结果两个文本框而不单击任何按钮。即，如果选择了添加单选按钮并且我在前两个文本框中输入了值，我应该在第三个文本框中得到添加结果，而无需再次检查单选按钮。请有人帮助并告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:02:25.920

您要做的是在输入字段上侦听更改或 keyup 事件。

一旦文本字段失去焦点，就会触发 change 事件，当按下键盘上的某个键并且不再按下时，将触发 keyup 事件。在我看来，这种情况下的 Keyup 更有意义。

以下代码应该让您继续前进：

```
function recalculate() {
  // recalculate your operation here
}

// assign a keyup handler to your fields
document.all.inputFieldA.onkeyup = recalculate;
document.all.inputFieldB.onkeyup = recalculate; 
```

# android - 如何动态改变舞台大小

> ID：13268905
> 
> 赞同：2
> 
> 时间：2012-11-07T11:32:33.413
> 
> 标签：android, actionscript-3, air, flash-cs5

我是 android 的 flash 新手，所以很高兴能帮助我解决我的问题。

我为我的**桌面**使用`AIR 2.6`. 现在我想在不改变分辨率和纵横比的情况下在我的安卓平板电脑上试试我的这款游戏。

我使用`this.scaleMode = StageScaleMode.NO_BORDER;`它确实保持了纵横比，但切断了我游戏的某些方面。我想知道是否有代码可以根据设备更改我的游戏分辨率，而无需手动更改我的游戏分辨率..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:59:48.267

在 android 中处理图像的多个屏幕分辨率：

1.  在 android Application project anatomy 4 文件夹 1) `hdpi`、和（在 res 文件夹中）中`mdpi`，您可以将图像放在这里以用于多种屏幕尺寸的设备。系统会根据设备自动从这些文件夹中选择图像。`ldpi``xhdpi`

2.  使用`9patch`图像。

3.  避免使用`AbsoluteLayout`.

4.  使用`.png`图像。

5.  横向模式使用`layout-land`文件夹。

谢谢。

# c# - 在 C# 的 MySQL 查询中使用文字下划线字符

> ID：13268907
> 
> 赞同：1
> 
> 时间：2012-11-07T11:32:41.390
> 
> 标签：c#, mysql, escaping

从我的 ASP.NET 应用程序中，我想向 MySQL 发出这个查询

```
SELECT * FROM responses WHERE field_id LIKE '3\_%' 
```

换句话说，我正在寻找第二个字符是下划线文字字符的记录。

模型设计器生成的代码如下所示：

```
 public virtual RiskAnalysis.responsesDataTable GetResponseGroupForAnalysis(int raid, string fieldid) {
    this.Adapter.SelectCommand = this.CommandCollection[2];
    this.Adapter.SelectCommand.Parameters[0].Value = ((int)(raid));
    if ((fieldid == null)) {
        throw new global::System.ArgumentNullException("fieldid");
    }
    else {
        this.Adapter.SelectCommand.Parameters[1].Value = ((string)(fieldid));
    }
    RiskAnalysis.responsesDataTable dataTable = new RiskAnalysis.responsesDataTable();
    this.Adapter.Fill(dataTable);
    return dataTable;
} 
```

如果我这样调用这个函数：

```
string filter_string = @"3\_%";    
ResponsesAdapter.GetResponseGroupForAnalysis(10, filter_string); 
```

MySQL 日志报告查询如下所示：

```
SELECT     *
FROM         responses
WHERE     (ra_id = 10) AND (field_id LIKE '3\\_%') 
```

换句话说，我知道我在这里遗漏了一些非常明显的东西，但是我如何在查询中放置 MySQL 的转义反斜杠而不用 C#（un）帮助转义它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:36:28.290

在标准 SQL 中，您可以使用`ESCAPE`关键字设置转义字符。

MySQL 在此遵循标准 SQL，如`LIKE`谓词文档所述：

*   **[`expr LIKE pat [ESCAPE 'escape_char']`](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)**

像这样：

```
...

field_id LIKE '3\_%' ESCAPE '\' 
```

这将使通配符`_`被视为字符串文字。

希望这是你所问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:48:53.850

好的，似乎（通过实验 - 很高兴听到解释或文档链接）在 MySQL`(field_id LIKE '3\_%');`中等同于`(field_id LIKE '3\\_%');`并且两者都会找到 field_id 以“3_”开头的记录。让我自己很困惑 - 感谢 Mahmoud 和 René 试图理解我的意思！

# json - 从 Sencha ExtJS4 树中获取 JSON 数据

> ID：13268908
> 
> 赞同：1
> 
> 时间：2012-11-07T11:32:42.057
> 
> 标签：json, extjs

我有一个树店，它以我的形式喂养一棵树。我想更改树的结构并将整个新树 JSON 编码发布到服务器？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:45:30.047

您必须在 treeStore 的模型上配置代理。您添加正确的 api url（用于读取、创建、更新、销毁）。现在您可以在模型上调用 save 或在 store 上同步。

不舒尔，但我认为您也可以在 treeStore 上放置代理...

[在这里您可以找到有关树店](http://docs.sencha.com/ext-js/4-1/#!/guide/tree)的详细信息

# android - 如何在 Android 日历中添加事件，每 3 天重复一次？

> ID：13268914
> 
> 赞同：2
> 
> 时间：2012-11-07T11:33:00.500
> 
> 标签：android, calendar

我想使用以下代码将事件添加到 Android 日历：

```
cr = getContentResolver();
ContentValues values = new ContentValues();
values.put(Events.DTSTART, startMillis);
values.put(Events.DURATION, "P3600S");
values.put(Events.TITLE, "MyTestNew");
values.put(Events.DESCRIPTION, "Group workout");
values.put(Events.CALENDAR_ID, calID);
values.put(Events.EVENT_TIMEZONE, "India");
values.put(Events.ALL_DAY, 1);
values.put(Events.RRULE, "FREQ=WEEKLY;WKST=SU;BYDAY=SA");
uri = cr.insert(Events.CONTENT_URI, values); 
```

但是我想添加这个事件，该事件应该每三天重复一次，而不是我的`(Events.RRULE,`参数中将更改的事件。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:30:38.980

最后我找到了解决方案。

```
values.put(Events.DTSTART, startMillis);
values.put(Events.DURATION, "P1800S");
values.put(Events.TITLE, "MyTestNew");
values.put(Events.DESCRIPTION, "Group workout");
values.put(Events.CALENDAR_ID, calID);
values.put(Events.EVENT_TIMEZONE, "India");
values.put(Events.RRULE, "FREQ=DAILY;INTERVAL=3");
uri = cr.insert(Events.CONTENT_URI, values); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:55:06.410

```
This code start the default calender of android and you can add event on it.

String dtStart = "2012" + "" + "06-11-01T10:50:00Z";
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");
try {Date date = format.parse(dtStart);
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(System.currentTimeMillis());
//cal.setTime(date);

Intent intent = new Intent(Intent.ACTION_EDIT);                                        intent.setType("vnd.android.cursor.item/event");                     
intent.putExtra("beginTime", cal.getTimeInMillis());                            
intent.putExtra("allDay", false);                           
intent.putExtra("rrule", "FREQ=DAILY;COUNT=1");                         
intent.putExtra("endTime", cal.getTimeInMillis() + 60 * 60 * 1000);                     
intent.putExtra("title", "Booking Confirm Notification");                           
intent.putExtra("Description", "Please check details");                         
startActivity(intent);

Arun chandravanshi
Thanks. 
```

# android - Android 保存复选框首选项

> ID：13268916
> 
> 赞同：3
> 
> 时间：2012-11-07T11:33:12.463
> 
> 标签：android, checkbox, sharedpreferences

我要疯了才能在我的项目中保存一组复选框的状态。想象一组 8 个复选框，用户必须检查或不记住某个集合之类的东西。这就是我已经完成的......但几乎没有使用。我粘贴了该课程的所有代码。抱歉，如果我没有很好地使用代码块..我真的不明白如何..谢谢。

```

`package com.example.eurocollection;

import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.TextView;

public class Francia extends Activity {
    // Identificatore delle preferenze dell'applicazione
    private final static String MY_PREFERENCES = "MyPref";
    // Costante relativa al nome della particolare preferenza
    private final static String TEXT_DATA_KEY = "textData";

   @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_francia);
        updatePreferencesData();//carica le preferenze
        getActionBar().setDisplayHomeAsUpEnabled(true);
    }

   @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_francia, menu);
        return true;
    }

   @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    //come salvare le preferenze
    public void savePreferencesData(View view) {
        // Otteniamo il riferimento alle Preferences
        SharedPreferences prefs = getSharedPreferences(MY_PREFERENCES, Context.MODE_PRIVATE);
        // Otteniamo il corrispondente Editor
        SharedPreferences.Editor editor = prefs.edit();
        // Modifichiamo il valore con quello inserito nell'EditText
        //EditText outputView = (EditText) findViewById(R.id.inputData);
        CheckBox cb1 = (CheckBox) findViewById(R.id.checkBox2efrance99);

        cb1.setOnCheckedChangeListener(new CheckBox.OnCheckedChangeListener(){
            public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
                if (isChecked){
                    editor.putBoolean("MY_PREFERENCES", cb1.isChecked());

               cb1.setChecked(settings.getBoolean("MY_PREFERENCES",true));

               }

            }
            });
 updatePreferencesData();
} 
// fine copiato
private void updatePreferencesData(){
// Leggiamo le Preferences
  SharedPreferences prefs = getSharedPreferences(MY_PREFERENCES, Context.MODE_PRIVATE);
// Leggiamo l'informazione associata alla proprietà TEXT_DATA
  Boolean textData = prefs.getBoolean(TEXT_DATA_KEY, false);
// Lo impostiamo alla TextView
  CheckBox cb1 = (CheckBox) findViewById(R.id.checkBox2cfrance99);
  cb1.setChecked(textData);
}

}` 

            回答 #1

赞同：0

时间：2012-11-07T11:36:11.050

那么你在哪里调用`savePreferencesData()`方法？editor.commit() 在哪里？

            回答 #2

赞同：0

时间：2012-11-07T11:37:39.673

您需要调用`editor.commit()`，以便您所做的任何更改都实际发生。

在您的 之后执行此操作`putBoolean`，它应该可以工作。

```

# php - Magento购物车：检查购物车中的物品是否是重新订购的物品

> ID：13268919
> 
> 赞同：1
> 
> 时间：2012-11-07T11:33:24.133
> 
> 标签：php, magento

可以检查购物车中的物品是否为重新订购的物品。当客户更改商店时，先前商店的购物车物品将被删除。当从用户区域完成重新订购时，我已经重定向到购买商品的相应商店。所以问题是，当我将重新订购的商品从购物车重定向到原来的商店时，它也会从购物车中删除买了。是否有任何解决方案来检查购物车中的物品是否被重新排序而不是删除这些物品。我正在使用 magento 1.7 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:54:25.537

假设客户已登录。在查看我的购物车页面上，您可以查找那里的订单历史记录并比较他们当前的购物车项目。

# javascript - 从 HTML 代码向 JS 函数传递参数

> ID：13268922
> 
> 赞同：0
> 
> 时间：2012-11-07T11:33:34.440
> 
> 标签：javascript, html

我有选择的列表，该列表应在选择选项时更改图像。我有以下代码：

```
<select id="p1_choise" onchange="change(image)">
  <option value=0>Choose</option>
  <option value=1>Rock</option>
  <option value=2>Paper</option>
  <option value=3>Scissors</option>
</select>

<p><img src="rps.jpg" id="image"></p> 
```

然后在我的 .ps 文件中我有这个：

```
function change(image) {
    var icon = document.getElementById("p1_choise").value;
    switch (parseInt(icon)) {
        case 1: document.getElementById(image).src="rock.jpg"; break;
        case 2: document.getElementById(image).src="paper.jpg"; break;
        case 3: document.getElementById(image).src="scissors.jpg"; break;
    }
} 
```

但我不断得到

> 未捕获的类型错误：无法将属性“src”设置为 null

image 参数告诉函数要改变什么图像。还有其他可能会更改的图像。

如何正确传递参数？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:36:01.897

用于`document.getElementById`获取`change`函数中的图像元素

```
<select id="p1_choise" onchange="change()">
  <option value=0>Choose</option>
  <option value=1>Rock</option>
  <option value=2>Paper</option>
  <option value=3>Scissors</option>
</select>

<p><img src="rps.jpg" id="image"></p> 
```

JS：

```
 function change() {
       var image = document.getElementById("image");
        var icon = document.getElementById("p1_choise").value;
        switch (parseInt(icon)) {
            case 1: image.src="rock.jpg"; break;
            case 2:image.src="paper.jpg"; break;
            case 3: image.src="scissors.jpg"; break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:42:10.063

在`onchange`赋值中，你必须指定`img`元素的 id 值，即字符串。所以你必须引用这个论点：

```
<select id="p1_choise" onchange="change('image')">
  <option value=0>Choose</option>
  <option value=1>Rock</option>
  <option value=2>Paper</option>
  <option value=3>Scissors</option>
</select> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-07T11:37:10.133

一个更通用的js函数会是这样（可以指定select元素和image元素）

```
<select id="p1_choise" onchange="change(this,document.getElementById('image'))">
  <option value=0>Choose</option>
  <option value=1>Rock</option>
  <option value=2>Paper</option>
  <option value=3>Scissors</option>
</select>

<p><img src="rps.jpg" id="image"></p>

<script>
function change(options,imageElement) {
    var icon = options.value;
    switch (parseInt(icon)) {
        case 1: imageElement.src="rock.jpg"; break;
        case 2: imageElement.src="paper.jpg"; break;
        case 3: imageElement.src="scissors.jpg"; break;
    }
}
</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T11:39:52.890

```
<select id="p1_choise" onchange="change(this)">
  <option value=0>Choose</option>
  <option value=1>Rock</option>
  <option value=2>Paper</option>
  <option value=3>Scissors</option>
</select>

<p><img src="rps.jpg" id="image"></p>

function change(this) {
    var icon = this.value;
    switch (parseInt(icon)) {
        case 1: document.getElementById("image").src="rock.jpg"; break;
        case 2: document.getElementById("image").src="paper.jpg"; break;
        case 3: document.getElementById("image").src="scissors.jpg"; break;
    }
} 
```

# unicode - 我在哪里可以找到语言 + 地区代码的列表？

> ID：13268930
> 
> 赞同：65
> 
> 时间：2012-11-07T11:33:59.633
> 
> 标签：unicode, internationalization, iso, region

我已经用谷歌搜索（好吧，实际上是 DuckDuckGo'ed），直到我脸色发青，但找不到该类型`en-GB`或`fr-CA`任何地方的语言代码列表。

有关于组件的优秀资源，特别是[W3C I18n 页面](http://www.w3.org/International/articles/language-tags/#region)，但我希望有一个简单的按字母顺序排列的列表，如果可能的话，相当规范（类似于[这个](http://www.iana.org/assignments/language-subtag-registry)）。找不到。

谁能指出我正确的方向？非常感谢！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-07T12:03:10.817

有几种语言代码系统和几种地区代码系统，以及它们的组合。当您提到 W3C 页面时，我假设您指的是[BCP 47](http://www.inter-locale.com/ID/rfc5646.html)中定义的系统。该系统是正交的，因为像 en-GB 和 fr-CA 这样的代码只是简单地结合了语言代码和区域代码。这意味着有大量可能的组合，其中大部分没有什么意义，例如 ab-AX，这意味着在奥兰说的阿布哈兹语（我不认为任何人，更不用说任何社区，在那里说阿布哈兹语，尽管理论上是当然可能）。

因此，任何语言-区域组合列表都只是一个实用的组合列表，这些组合在某种意义上很重要，或者在某种特殊意义上被某些软件支持。

您找到的规范定义了一般原则以及不同“子标签”（如主要语言代码和区域代码）的权威来源。对于最重要的部分，官方注册机构维护语言的[三字母和两字母 ISO 639 代码](http://www.loc.gov/standards/iso639-2/php/code_list.php)，ISO 网站包含区域的[两字母 ISO 3166 代码](http://www.iso.org/iso/country_codes/iso_3166_code_lists/country_names_and_code_elements.htm)。这些列表非常易读，我认为没有理由考虑使用这些主要资源之外的其他资源，尤其是在可能的更改方面。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-07T11:52:00.540

这里有两个组件：

1.  通常由[ISO 639-1 alpha-2定义的语言标签](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)
2.  通常由[ISO 3166-1 alpha-2定义的区域标签](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements)

您可以以任何对您有意义的组合来混合和匹配语言和地区，因此没有所有可能性的列表。

顺便说一句，您有效地使用了[BCP47 标记](http://tools.ietf.org/html/bcp47)，它定义了每个语言环境段的标准。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-06T16:37:15.253

Unicode 维护这样一个列表： [http](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/index.html) ://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/index.html 更好的是，您可以使用 XML 格式（非常适合解析列表）以及每种语言使用的常用书写系统：http: [//unicode.org/repos/cldr/trunk/common/supplemental/supplementalData.xml](http://unicode.org/repos/cldr/trunk/common/supplemental/supplementalData.xml) （查看/LanguageData）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-10T07:20:01.437

一种解决方案是解析此列表，它会为您提供创建所需列表所需的所有键。

[http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry](http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-01-26T19:32:12.450

这可以在[Unicode 的 Common Locale Data Repository](http://cldr.unicode.org/)中找到。具体来说，此信息的[JSON 文件](https://github.com/unicode-org/cldr-json/blob/master/cldr-json/cldr-core/availableLocales.json)可在他们的[cldr-json 存储库中找到](https://github.com/unicode-org/cldr-json)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-17T12:39:11.017

我想你可以从这里[http://www.unicode.org/cldr/charts/latest/supplemental/territory_language_information.html](http://www.unicode.org/cldr/charts/latest/supplemental/territory_language_information.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-06T15:32:44.390

我们有一个工作列表，用于为 Localizejs 引用语言代码/语言名称。希望有帮助

[YAML 或 JSON 中的语言代码列表？](https://stackoverflow.com/questions/3217492/list-of-language-codes-in-yaml-or-json/28902032#28902032)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-21T04:28:45.413

主要语言子标签列表，每种语言都有公共区域子标签（基于每个地区的语言使用者人数）：

[https://www.unicode.org/cldr/charts/latest/supplemental/language_territory_information.html](https://www.unicode.org/cldr/charts/latest/supplemental/language_territory_information.html)

例如，对于[英语](https://www.unicode.org/cldr/charts/latest/supplemental/language_territory_information.html#en)：

*   美国（320,000,000）
*   en-IN (250,000,000)
*   恩-NG (110,000,000)
*   en-PK (100,000,000)
*   en-PH (68,000,000)
*   zh-CN (64,000,000)

[（[Jukka K.](https://stackoverflow.com/a/13269403/10366669) Korpela和[tigrish](https://stackoverflow.com/a/13269204/10366669)很好地解释了为什么语言 + 区域代码的*任何*组合都是有效的，但是拥有一个最有可能在实际使用中的代码列表可能会有所帮助。 [sf](https://stackoverflow.com/a/49878390/10366669)的链接对这些有用的信息进行了排序按地区划分，因此按语言对这些信息进行排序也可能会有所帮助。）]

# ruby-on-rails - Rails 应用程序中的猴子修补数据库适配器

> ID：13268935
> 
> 赞同：1
> 
> 时间：2012-11-07T11:34:19.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 PosgreSQL 适配器连接到 Vertica 数据库，该数据库主要与 PostgreSQL 兼容，但不支持诸如 client_min_messages 之类的选项（`PGconn.connect`尽管不存在于 中，但仍然传递给它`database.yml`）。我已经为它制作了一个快速而肮脏的猴子补丁，`ActiveRecord::ConnectionAdapters::PostgreSQLAdapter`但问题是我猜 AR 中的所有内容都是延迟加载的，并且在我的补丁之后读取了原始文件。

如果我`require 'active_record/connection_adapters/postgresql_adapter'`在猴子补丁的顶部添加，那么 ActiveRecord 会尝试建立连接并失败。是否可以改变这种行为以使猴子补丁工作，或者我应该只编写一个成熟的连接适配器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:48:27.653

您可以将代码挂钩到 railties 初始化。包括来自我的 gem [multi_config](http://shadabahmed.com/blog/2012/09/18/introducing-multiconfig-gem-for-activerecord)的示例：

```
module <YourModule>
  # Railtie subclass for the gem/plugin
  class Railtie < Rails::Railtie

    # Railtie initializer method
    initializer '<your_plugin>.active_record' do

      # When active_record is loaded, only then run this.
      ActiveSupport.on_load :active_record do
        # Hook your code here. For .e.g. 
        ActiveRecord::Base.send(:include, <YourPluginModule>)
      end
    end
  end
end 
```

# php - Magento - 待付款时标记为已使用的单张优惠券

> ID：13268938
> 
> 赞同：15
> 
> 时间：2012-11-07T11:34:24.800
> 
> 标签：php, sql, magento, paypal, coupon

**我遇到了 Magento 单一优惠券代码的问题，该代码在客户单击“下订单”**按钮时被标记为已使用。如果Paypal支付失败或客户在订单完成前离开页面，他将无法使用此设置为仅使用一次且已标记为已使用的优惠券返回重新订购。

我发现一段代码可以减少用户使用优惠券的次数，并允许他重复使用优惠券。不幸的是，他在点击下订单按钮时​​尝试连接 Paypal 页面时出现错误。为了能够再次使用优惠券并访问 Paypal 页面，我必须删除 SQL 数据库中表**salesrule_coupon_usage**和**salesrule_customer**中具有此客户 ID 的行。

这是我需要更改以自动删除客户 ID 的优惠券使用信息的代码：

```
public function cancel($observer)
{
    $order = $observer->getEvent()->getPayment()->getOrder();
    if ($order->canCancel()) {
        if ($code = $order->getCouponCode()) {
            $coupon = Mage::getModel('salesrule/coupon')->load($code, 'code');
            if ($coupon->getTimesUsed() > 0) {
                $coupon->setTimesUsed($coupon->getTimesUsed() - 1);
                $coupon->save();
            }

            $rule = Mage::getModel('salesrule/rule')->load($coupon->getRuleId());
            error_log("\nrule times used=" . $rule->getTimesUsed(), 3, "var/log/debug.log");
            if ($rule->getTimesUsed() > 0) {
                $rule->setTimesUsed($rule->getTimesUsed()-1);
                $rule->save();
            }

            if ($customerId = $order->getCustomerId()) {
                if ($customerCoupon = Mage::getModel('salesrule/rule_customer')->loadByCustomerRule($customerId, $rule->getId())) {
                    $couponUsage = new Varien_Object();
                    Mage::getResourceModel('salesrule/coupon_usage')->loadByCustomerCoupon($couponUsage, $customerId, $coupon->getId());

                    if ($couponUsage->getTimesUsed() > 0) {
                        /* I can't find any #@$!@$ interface to do anything but increment a coupon_usage record */
                        $resource = Mage::getSingleton('core/resource');
                        $writeConnection = $resource->getConnection('core_write');
                        $tableName = $resource->getTableName('salesrule_coupon_usage');

                        $query = "UPDATE {$tableName} SET times_used = times_used-1 "
                            .  "WHERE coupon_id = {$coupon->getId()} AND customer_id = {$customerId} AND times_used > 0";

                        $writeConnection->query($query);
                    }

                    if ($customerCoupon->getTimesUsed() > 0) {
                        $customerCoupon->setTimesUsed($customerCoupon->getTimesUsed()-1);
                        $customerCoupon->save();
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T07:51:12.350

我相信这是一个从 1.4 到 1.6 左右的老错误。但是，无论您是否有旧版本，如果您了解 Magento 的方法，都可以很容易地解决这个问题。

问题是，当他们单击付款按钮时，您的代码正在更新 salesrule_coupon_usage 表。这根本不是你想要的。您希望将其包装到付款交易中。我不知道这个错误是否发生是因为你有自定义代码或使用的是旧版本的 Magento，但我会告诉你*我*将如何解决这个问题。然后我会给你一个类似于你建议的修复：

Magento 已经有一个称为“事务”的抽象。事务用于将需要全部成功或全部失败的对象放在一起，没有半途而废。Magento 将通过交易并尝试保存您放置在其中的每个对象。如果其中任何一个失败（例如，付款未通过），则所有已保存的事件都将“回滚”。

幸运的是，Magento 已经创建了一个交易对象来处理需要在成功支付时一起更新的各种事物的支付。您可以利用该交易并使用它来正确更新优惠券使用情况。

这是您需要做的事情的 10,000 英尺视图。

*   过早地找出更新 salesrule_coupon_usage 表的任何东西并将其杀死。我们将添加我们自己的事务安全版本，因此我们不希望它被保存在其他任何地方。最简单的方法是找出连接到该表的模型并搜索该模型的创建。对于 1.7 和 1.8，这是规则/客户模型。
*   创建一个观察者来捕捉支付交易的开始。在大多数现代版本的 magento 中，此事件称为 sales_order_payment_place_start 并且可以在 app/code/core/Mage/Sales/Model/Order/Payment.php 中见证
*   将订单拉出活动，将优惠券代码拉出活动。
*   拉出您要更新的实际模型。看起来有人在您的代码中找不到它，但应该有一些模型使用 salesrule_coupon_usage 表隐藏在某处。在 .xml 文件中搜索“salesrule_coupon_usage”并查看使用该表的模型。同样，对我来说，在 1.7 上，这就是规则/客户模型。
*   加载该模型，让客户更改与您的优惠券代码相关的值，以表明客户已使用优惠券，但尚未保存。
*   从事件中取出交易并使用 addObject 方法注册您更新的优惠券对象。

你完成了。事务将自动尝试保存已添加到其中的所有对象。如果任何部分失败（包括支付失败），它将回滚整个过程，您的优惠券将不会被使用。耶！

现在，在我看来，以上是解决问题的最佳方法，但如果您由于某种原因遇到问题，这里是基于捕获不成功的付款然后使用您的代码的替代方法。

同样，这是 10,000 英尺的视图：

*   创建一个观察者来捕捉失败的支付事件。在大多数版本中，您想要的事件是 sales_order_payment_cancel。
*   运行你拥有的代码......它应该这样做。但要澄清其他人：
    *   将订单从活动中拉出，从中拉出优惠券代码和客户 ID。
    *   更新 customer、rule 和 salesrule_coupon_usage 表。（虽然确实应该有一个模型，但我相信你能找到它）

现在，当销售失败时，您可以手动返回并展开所有内容。这不像我的第一个解决方案那样干净，但根据您对 Magento 的熟悉程度，可能对您来说更容易。

我相当确定新的、干净的 Magento 版本没有这个问题，所以让我提供一个相当明显的建议作为第三种解决方案。

*   更新 Magento
*   如果 Magento 是最新的，请测试禁用任何自定义模块，因为某些东西破坏了它。我注意到 Amasty 优惠券插件特别有问题。
*   如果您对 Magento 核心进行了自定义更改...祝您好运。

祝你好运！

# google-drive-api - 使用 Google Drive PHP SDK 构建的应用程序不断重定向到同一页面

> ID：13268941
> 
> 赞同：0
> 
> 时间：2012-11-07T11:34:40.040
> 
> 标签：google-drive-api

我正在按照[本指南](https://developers.google.com/drive/examples/php)创建一个实现 Google Drive PHP SDK 的示例网络应用程序。

当我访问 URL 时，应用程序会不断地无限循环重定向到同一页面，因此实际上没有显示任何内容。知道为什么会这样吗？是不是因为我在配置文件中犯了一些错误？

该文档说明了如何将示例应用程序（称为 DrEdit）实现为 Google Chrome 应用程序。谁能告诉我是否可以使用 SDK 创建非 Google Chrome 应用程序？另外，有没有人有任何 Google Drive SDK 的示例实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:35:00.840

如果您提供更多信息和代码，我们可以调试您的第一个问题。

否则：

*   是的，您可以为云端硬盘编写非 Chrome 应用程序的应用程序。Chrome Web Store 是 API 的可选分发机制。您的应用程序可以在任何浏览器中运行。

*   每个 API 方法都有记录在案的 PHP 片段，例如[https://developers.google.com/drive/v1/reference/files/get](https://developers.google.com/drive/v1/reference/files/get)

# php - PHPUnit分段错误11

> ID：13268942
> 
> 赞同：8
> 
> 时间：2012-11-07T11:34:55.470
> 
> 标签：php, segmentation-fault, phpunit

我今天早上尝试运行 PHPUnit，它产生了 Segmentation Fault 11 错误（使用命令`phpunit unit/`- 如果我使用 Selenium 在我的功能测试中运行 PHPUnit，那么一切正常，只有单元测试受到影响，我已经尝试了中的选项这里的其他线程并没有解决问题，我尝试在本地重新安装 MAMP 并通过 PEAR 重新安装 PHPUnit。我还尝试在命令行上切换 PHP 版本。

测试在同事的笔记本电脑上运行良好，在 Jenkins 中运行良好。有人对这个问题有任何想法吗？我已经包含了控制台的输出。

```
Process:         php [2337]
Path:            /Applications/MAMP/*/php
Identifier:      php
Version:         ???
Code Type:       X86-64 (Native)
Parent Process:  bash [586]
User ID:         502

Date/Time:       2012-11-07 11:09:51.924 +0000
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: EXC_I386_GPFLT

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   php                             0x0000000100653e75 zend_hash_get_current_key_type_ex + 69
1   php                             0x000000010044d783 zif_spl_autoload_call + 611
2   php                             0x0000000100626111 zend_call_function + 5617
3   php                             0x0000000100626b83 zend_lookup_class_ex + 1267
4   php                             0x0000000100628116 zend_fetch_class_by_name + 86
5   php                             0x000000010068bfb5 ZEND_FETCH_CLASS_SPEC_CONST_HANDLER + 261
6   php                             0x00000001006866cc execute + 1788
7   php                             0x000000010063cba3 zend_execute_scripts + 707
8   php                             0x0000000100593e40 php_execute_script + 1232
9   php                             0x00000001007e0c1a do_cli + 3642
10  php                             0x00000001007e2765 main + 3461
11  php                             0x0000000100001064 start + 52

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x737469762f656f73  rbx: 0x0000000000000000  rcx: 0x00007fff5fbfdb20  rdx: 0xffffffffffffff13
  rdi: 0x0000000101a378c8  rsi: 0x00007fff5fbfdb20  rbp: 0x00007fff5fbfda90  rsp: 0x00007fff5fbfda90
   r8: 0x00007fff5fbfd338   r9: 0x0000000000000002  r10: 0x0000000000000000  r11: 0x0000000102dd2138
  r12: 0x0000000000000000  r13: 0x0000000000000000  r14: 0x0000000000000000  r15: 0x0000000000000000
  rip: 0x0000000100653e75  rfl: 0x0000000000000202  cr2: 0x0000000101ba6e00
Logical CPU: 0

Binary Images:
       0x100000000 -        0x100ec7fe7 +php (???) <61B89CD8-FA9E-3D2B-BDCE-35DFCA7CC017> /Applications/MAMP/*/php
       0x10112d000 -        0x101143fff +libexslt.0.dylib (9.15) <10AA2D0E-42B0-30DC-BC01-6C10BD757061> /Applications/MAMP/*/libexslt.0.dylib
       0x10114a000 -        0x101255fe7 +libiconv.2.dylib (8.1) <19C34294-DBD8-3DA6-8663-35549D3A80BF> /Applications/MAMP/*/libiconv.2.dylib
       0x101263000 -        0x1012c7fff +libt1.5.dylib (7.2) <BB17E324-EA0E-3716-88F8-4EDF9AC61B21> /Applications/MAMP/*/libt1.5.dylib
       0x1012ea000 -        0x1013b6fef +libfreetype.6.dylib (15) <C6D12969-73A9-3C8D-ADCF-D2CDC72167AD> /Applications/MAMP/*/libfreetype.6.dylib
       0x1013cf000 -        0x10140cfef +libpng15.15.dylib (23) <D5E80405-5E4B-38A9-B668-9E7112122A3E> /Applications/MAMP/*/libpng15.15.dylib
       0x101414000 -        0x10146dfef +libjpeg.8.dylib (13) <253D68BC-090B-3FC1-BE0E-FB663612C639> /Applications/MAMP/*/libjpeg.8.dylib
       0x101475000 -        0x1014c1ff7 +libcurl.4.dylib (7) <42B08966-8867-305A-9FEB-7D969D69A0C7> /Applications/MAMP/*/libcurl.4.dylib
       0x1014cf000 -        0x10169cfff +libxml2.2.dylib (10.8) <3A40C660-9099-309E-A108-4B68471D1579> /Applications/MAMP/*/libxml2.2.dylib
       0x1016d3000 -        0x101706fef +libidn.11.dylib (18) <73EAB24B-0A33-39C4-8FA5-FDAE0C99DC1E> /Applications/MAMP/*/libidn.11.dylib
       0x10170c000 -        0x101759ff7 +libxslt.1.dylib (3.26) <F85DB243-D7D4-3C21-B94C-118754A6D9DD> /Applications/MAMP/*/libxslt.1.dylib
       0x101765000 -        0x101775fe7 +libintl.8.dylib (10.1) <1024FD8E-208D-3620-8044-153D50FFE252> /Applications/MAMP/*/libintl.8.dylib
       0x1017dd000 -        0x1017e9fff +yaz.so (???) <CCE413E9-517D-3273-8F1C-4F4555227B2B> /Applications/MAMP/*/yaz.so
       0x1017ee000 -        0x1017f8ff7 +mcrypt.so (???) <AA475210-CD61-390F-B70D-45AD57D81E18> /Applications/MAMP/*/mcrypt.so
       0x101b8f000 -        0x101bb7fff +xcache.so (???) <2BE6192A-B4F9-3BB5-9354-E63AC94C8A90> /Applications/MAMP/*/xcache.so
       0x101bc4000 -        0x101cbbff7 +imap.so (???) <1F9C357E-C2E6-3696-BA29-B4289B570053> /Applications/MAMP/*/imap.so
       0x101cf1000 -        0x101dbdfe7 +libyaz.4.dylib (5) <442CDE8C-28B0-38BF-BD96-50D5C3FD4891> /Applications/MAMP/*/libyaz.4.dylib
       0x101ea6000 -        0x101ee5ff7 +libmcrypt.4.dylib (9.8) <AFF632C5-CB59-34B1-A1EE-930D3A7360C0> /Applications/MAMP/*/libmcrypt.4.dylib
       0x101ef8000 -        0x101f03fef +libltdl.7.dylib (11) <06131575-5BE7-34DD-A39B-6384B31EF9B6> /Applications/MAMP/*/libltdl.7.dylib
       0x101f08000 -        0x101f09ff7 +gettext.so (???) <49C7C695-9117-3405-919A-5AC4CEC8201E> /Applications/MAMP/*/gettext.so
       0x101f0c000 -        0x101f31fff +pgsql.so (???) <9B7AC465-52F3-321F-BAB0-7DDEC76F89B7> /Applications/MAMP/*/pgsql.so
       0x101f3c000 -        0x101f68ff7 +libpq.5.dylib (5.2) <1CDE4910-D92A-33B8-A891-C66A41F2E8C0> /Applications/MAMP/*/libpq.5.dylib
       0x101f72000 -        0x101f7bff7 +pdo_pgsql.so (???) <441676E4-EA9A-35D3-ABFA-C00AF11D0489> /Applications/MAMP/*/pdo_pgsql.so
       0x101f80000 -        0x101f81fff  com.apple.heimdalodpac (10.8 - 198) <AE9D93D6-C970-368B-A89C-2DA0EB225204>     /System/Library/KerberosPlugins/KerberosFrameworkPlugins/heimdalodpac.bundle/Contents/MacOS/heimdalodpac
       0x101f86000 -        0x101f88fff  com.apple.KerberosHelper.LKDCLocate (4.0 - 1.0) <6276FDFA-EB44-374C-9BFC-2AB5F68F2145>     /System/Library/KerberosPlugins/KerberosFrameworkPlugins/LKDCLocate.bundle/Contents/MacOS/LKDCLocate
       0x101f8c000 -        0x101f8dff7  com.apple.kerberos.reachability (3.0 - 2.0) <8DC5EA50-F572-31C7-9443-5F6C9363A58D>     /System/Library/KerberosPlugins/KerberosFrameworkPlugins/Reachability.bundle/Contents/MacOS/Reachability
       0x101f91000 -        0x101f92ff7  com.apple.kerberos.sckerberosconfig (3.0 - 1) <6981ADC2-C901-3F8A-A3D0-7334DE61BF3E>     /System/Library/KerberosPlugins/KerberosFrameworkPlugins/SCKerberosConfig.bundle/Contents/MacOS/SCKerberosConfig
       0x102800000 -        0x102a42ff7 +pdo_mysql.so (???) <941A3356-75E9-303B-A1BF-774B9458CB63> /Applications/MAMP/*/pdo_mysql.so
    0x7fff68009000 -     0x7fff6803d93f  dyld (210.2.3) <A40597AA-5529-3337-8C09-D8A014EB1578> /usr/lib/dyld
    0x7fff8dffd000 -     0x7fff8e01fff7  com.apple.Kerberos (2.0 - 1) <C49B8820-34ED-39D7-A407-A3E854153556> /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
    0x7fff8e020000 -     0x7fff8e021ff7  libdnsinfo.dylib (453.18) <E7595861-ECF9-336E-9901-BED2620FAA80> /usr/lib/system/libdnsinfo.dylib
    0x7fff8e0b7000 -     0x7fff8e413fff  com.apple.Foundation (6.8 - 945.11) <A5D41956-A354-3ACC-9355-BE200072223B> /System/Library/Frameworks/Foundation.    framework/Versions/C/Foundation
    0x7fff8e819000 -     0x7fff8eae9fff  com.apple.security (7.0 - 55179.1) <639641EF-8156-3190-890C-1053658E044A> /System/Library/Frameworks/Security.framework/Versions/A/Security
    0x7fff8eb02000 -     0x7fff8eb0afff  liblaunch.dylib (442.26.2) <2F71CAF8-6524-329E-AC56-C506658B4C0C> /usr/lib/system/liblaunch.dylib
    0x7fff8eb12000 -     0x7fff8eb9fff7  com.apple.SearchKit (1.4.0 - 1.4.0) <C7F43889-F8BF-3CB9-AD66-11AEFCBCEDE7> /System/Library/Frameworks/CoreServices.    framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
    0x7fff8eccd000 -     0x7fff8edcafff  libsqlite3.dylib (138.1) <ADE9CB98-D77D-300C-A32A-556B7440769F> /usr/lib/libsqlite3.dylib
    0x7fff8edcb000 -     0x7fff8ede0ff7  libdispatch.dylib (228.23) <D26996BF-FC57-39EB-8829-F63585561E09> /usr/lib/system/libdispatch.dylib
    0x7fff8ede1000 -     0x7fff8ede6fff  com.apple.OpenDirectory (10.8 - 151.10) <CF44120B-9B01-32DD-852E-C9C0E1243FC0> /System/Library/Frameworks/OpenDirectory.    framework/Versions/A/OpenDirectory
    0x7fff8f5c8000 -     0x7fff8f8dfff7  com.apple.CoreServices.CarbonCore (1037.3 - 1037.3) <DF7CABCA-F2CB-345B-8EFF-F0F4E937B7FF> /System/Library/Frameworks/CoreServices.    framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
    0x7fff8feb1000 -     0x7fff8fed0ff7  libresolv.9.dylib (51) <0882DC2D-A892-31FF-AD8C-0BB518C48B23> /usr/lib/libresolv.9.dylib
    0x7fff9021c000 -     0x7fff90405fff  com.apple.CoreFoundation (6.8 - 744.12) <EF002794-DAEF-31C6-866C-E3E3AC387A9F> /System/Library/Frameworks/CoreFoundation.    framework/Versions/A/CoreFoundation
    0x7fff90606000 -     0x7fff90641fff  com.apple.LDAPFramework (2.4.28 - 194.5) <0190B746-F684-3F43-B4D0-148EFE386CA4> /System/Library/Frameworks/LDAP.framework/Versions/A/LDAP
    0x7fff90642000 -     0x7fff907b6fff  com.apple.CFNetwork (596.2.3 - 596.2.3) <6A16C2BD-1035-30F9-AE96-D9E3BB54A976> /System/Library/Frameworks/CFNetwork.    framework/Versions/A/CFNetwork
    0x7fff907b7000 -     0x7fff907d9ff7  libxpc.dylib (140.41) <FAC04D8B-680E-325F-8F0C-DD69859D0E01> /usr/lib/system/libxpc.dylib
    0x7fff9116b000 -     0x7fff9116bfff  libOpenScriptingUtil.dylib (148.2) <B8061D13-C1B2-38D5-A723-9A98D64E67AC> /usr/lib/libOpenScriptingUtil.dylib
    0x7fff91295000 -     0x7fff9129afff  libcache.dylib (57) <65187C6E-3FBF-3EB8-A1AA-389445E2984D> /usr/lib/system/libcache.dylib
    0x7fff91426000 -     0x7fff914a7fff  com.apple.Metadata (10.7.0 - 707.3) <A45D75C1-B311-39F0-AF4A-63FCCC098C1D> /System/Library/Frameworks/CoreServices.    framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
    0x7fff91510000 -     0x7fff91547ff7  libssl.0.9.8.dylib (47) <923945E6-C489-3406-903B-A362410753F8> /usr/lib/libssl.0.9.8.dylib
    0x7fff919f5000 -     0x7fff91a0cfff  com.apple.CFOpenDirectory (10.8 - 151.10) <FFBBA538-00B5-334E-BA5B-C8AD6CDCDA14> /System/Library/Frameworks/OpenDirectory.    framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
    0x7fff91bbb000 -     0x7fff91bc0fff  libcompiler_rt.dylib (30) <08F8731D-5961-39F1-AD00-4590321D24A9> /usr/lib/system/libcompiler_rt.dylib
    0x7fff91dc4000 -     0x7fff91dd7ff7  libbsm.0.dylib (32) <F497D3CE-40D9-3551-84B4-3D5E39600737> /usr/lib/libbsm.0.dylib
    0x7fff91dd8000 -     0x7fff91dd9ff7  libSystem.B.dylib (169.3) <365477AB-D641-389D-B8F4-A1FAE9657EEE> /usr/lib/libSystem.B.dylib
    0x7fff91e09000 -     0x7fff91e0afff  libsystem_blocks.dylib (59) <D92DCBC3-541C-37BD-AADE-ACC75A0C59C8> /usr/lib/system/libsystem_blocks.dylib
    0x7fff9208a000 -     0x7fff9208afff  libkeymgr.dylib (25) <CC9E3394-BE16-397F-926B-E579B60EE429> /usr/lib/system/libkeymgr.dylib
    0x7fff92c04000 -     0x7fff92c04fff  com.apple.CoreServices (57 - 57) <9DD44CB0-C644-35C3-8F57-0B41B3EC147D> /System/Library/Frameworks/CoreServices.    framework/Versions/A/CoreServices
    0x7fff92c08000 -     0x7fff92d0afff  libcrypto.0.9.8.dylib (47) <74F165AD-4572-3B26-B0E2-A97477FE59D0> /usr/lib/libcrypto.0.9.8.dylib
    0x7fff92d0b000 -     0x7fff92d2cff7  libCRFSuite.dylib (33) <736ABE58-8DED-3289-A042-C25AF7AE5B23> /usr/lib/libCRFSuite.dylib
    0x7fff92d64000 -     0x7fff92e7c92f  libobjc.A.dylib (532.2) <90D31928-F48D-3E37-874F-220A51FD9E37> /usr/lib/libobjc.A.dylib
    0x7fff92ee1000 -     0x7fff92f92fff  com.apple.LaunchServices (539.7 - 539.7) <DA7C602E-5E01-31B8-925D-B45360CA089F> /System/Library/Frameworks/CoreServices.    framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
    0x7fff93062000 -     0x7fff9312efe7  libsystem_c.dylib (825.25) <8CBCF9B9-EBB7-365E-A3FF-2F3850763C6B> /usr/lib/system/libsystem_c.dylib
    0x7fff9312f000 -     0x7fff9313cfff  libbz2.1.0.dylib (29) <CE9785E8-B535-3504-B392-82F0064D9AF2> /usr/lib/libbz2.1.0.dylib
    0x7fff93289000 -     0x7fff9328aff7  libremovefile.dylib (23.1) <DBBFAF35-AC78-3856-92F6-6E4FD9DF14A2> /usr/lib/system/libremovefile.dylib
    0x7fff9340c000 -     0x7fff9345bff7  libcorecrypto.dylib (106.2) <CE0C29A3-C420-339B-ADAA-52F4683233CC> /usr/lib/system/libcorecrypto.dylib
    0x7fff93f5b000 -     0x7fff93f61fff  com.apple.DiskArbitration (2.5.1 - 2.5.1) <F7DAF7CC-5893-3F06-9168-3B0192B66D15> /System/Library/Frameworks/DiskArbitration.    framework/Versions/A/DiskArbitration
    0x7fff93f63000 -     0x7fff93f94ff7  com.apple.DictionaryServices (1.2 - 184.4) <054F2D6F-9CFF-3EF1-9778-25C551B616C1> /System/Library/Frameworks/CoreServices.    framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
    0x7fff94015000 -     0x7fff94066ff7  com.apple.SystemConfiguration (1.12.2 - 1.12.2) <E095637C-457F-3D8F-AE32-A032F9D5A46C> /System/Library/Frameworks/SystemConfiguration.    framework/Versions/A/SystemConfiguration
    0x7fff94067000 -     0x7fff94164ff7  libxml2.2.dylib (22.3) <47B09CB2-C636-3024-8B55-6040F7829B4C> /usr/lib/libxml2.2.dylib
    0x7fff94621000 -     0x7fff94623ff7  libunc.dylib (25) <92805328-CD36-34FF-9436-571AB0485072> /usr/lib/system/libunc.dylib
    0x7fff946f7000 -     0x7fff948f7fff  libicucore.A.dylib (491.11.1) <CC318A27-878A-38CE-9292-1B98353FA9C7> /usr/lib/libicucore.A.dylib
    0x7fff948f8000 -     0x7fff94903fff  libsystem_notify.dylib (98.5) <C49275CC-835A-3207-AFBA-8C01374927B6> /usr/lib/system/libsystem_notify.dylib
    0x7fff94998000 -     0x7fff94a3eff7  com.apple.CoreServices.OSServices (557.4 - 557.4) <841878A8-6F3E-300D-8F01-444B3CC1F41D> /System/Library/Frameworks/CoreServices.    framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
    0x7fff94d70000 -     0x7fff94dddff7  com.apple.framework.IOKit (2.0 - 755.18.10) <142E19DD-1C8D-3D61-ABC8-83994A73279F> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
    0x7fff94e7a000 -     0x7fff94e88ff7  libsystem_network.dylib (77.10) <0D99F24E-56FE-380F-B81B-4A4C630EE587> /usr/lib/system/libsystem_network.dylib
    0x7fff94e89000 -     0x7fff94e8bfff  libquarantine.dylib (52) <4BE2E642-A14F-340A-B482-5BD2AEFD9C24> /usr/lib/system/libquarantine.dylib
    0x7fff95049000 -     0x7fff95077ff7  libsystem_m.dylib (3022.6) <B434BE5C-25AB-3EBD-BAA7-5304B34E3441> /usr/lib/system/libsystem_m.dylib
    0x7fff955cc000 -     0x7fff95639fff  com.apple.datadetectorscore (4.0 - 269.1) <C94C372B-3821-3A46-A8C2-091AB1CFF7F4> /System/Library/PrivateFrameworks/DataDetectorsCore.    framework/Versions/A/DataDetectorsCore
    0x7fff9563a000 -     0x7fff9563dff7  libdyld.dylib (210.2.3) <F59367C9-C110-382B-A695-9035A6DD387E> /usr/lib/system/libdyld.dylib
    0x7fff956f8000 -     0x7fff956fcfff  libpam.2.dylib (20) <C8F45864-5B58-3237-87E1-2C258A1D73B8> /usr/lib/libpam.2.dylib
    0x7fff9590a000 -     0x7fff95911fff  libcopyfile.dylib (89) <876573D0-E907-3566-A108-577EAD1B6182> /usr/lib/system/libcopyfile.dylib
    0x7fff95b16000 -     0x7fff95b28ff7  libz.1.dylib (43) <2A1551E8-A272-3DE5-B692-955974FE1416> /usr/lib/libz.1.dylib
    0x7fff95b4b000 -     0x7fff95b76fff  libxslt.1.dylib (11.3) <441776B8-9130-3893-956F-39C85FFA644F> /usr/lib/libxslt.1.dylib
    0x7fff95b77000 -     0x7fff95badfff  libsystem_info.dylib (406.17) <4FFCA242-7F04-365F-87A6-D4EFB89503C1> /usr/lib/system/libsystem_info.dylib
    0x7fff95bb3000 -     0x7fff95bbbff7  libsystem_dnssd.dylib (379.32.1) <62AA0B84-188A-348B-8F9E-3E2DB08DB93C> /usr/lib/system/libsystem_dnssd.dylib
    0x7fff95cda000 -     0x7fff95cffff7  libc++abi.dylib (24.4) <E7BD9363-1D25-3551-A68A-2E2FF6ABECD7> /usr/lib/libc++abi.dylib
    0x7fff95d00000 -     0x7fff95d69fff  libstdc++.6.dylib (56) <EAA2B53E-EADE-39CF-A0EF-FB9D4940672A> /usr/lib/libstdc++.6.dylib
    0x7fff96e72000 -     0x7fff96e74fff  com.apple.TrustEvaluationAgent (2.0 - 23) <A97D348B-32BF-3E52-8DF2-59BFAD21E1A3> /System/Library/PrivateFrameworks/TrustEvaluationAgent.    framework/Versions/A/TrustEvaluationAgent
    0x7fff96e75000 -     0x7fff96e86ff7  libsasl2.2.dylib (166) <649CAE0E-8FFE-3C60-A849-BE6300E4B726> /usr/lib/libsasl2.2.dylib
    0x7fff96efc000 -     0x7fff96f7efff  com.apple.Heimdal (3.0 - 2.0) <660A6C64-4912-32C8-A332-B64164032A2D> /System/Library/PrivateFrameworks/Heimdal.framework/Versions/A/Heimdal
    0x7fff972dd000 -     0x7fff972ebfff  libcommonCrypto.dylib (60026) <2D6537F5-1B5E-305C-A1CF-D1FA80CA3939> /usr/lib/system/libcommonCrypto.dylib
    0x7fff97730000 -     0x7fff97798ff7  libc++.1.dylib (65.1) <20E31B90-19B9-3C2A-A9EB-474E08F9FE05> /usr/lib/libc++.1.dylib
    0x7fff98016000 -     0x7fff9810bfff  libiconv.2.dylib (34) <FEE8B996-EB44-37FA-B96E-D379664DEFE1> /usr/lib/libiconv.2.dylib
    0x7fff99a4b000 -     0x7fff99a62fff  com.apple.GenerationalStorage (1.1 - 132.2) <3F5C87BD-D866-3732-8CB9-D23ED9784D6E> /System/Library/PrivateFrameworks/GenerationalStorage.    framework/Versions/A/GenerationalStorage
    0x7fff99d95000 -     0x7fff99d99ff7  com.apple.TCC (1.0 - 1) <F2F3B753-FC73-3543-8BBE-859FDBB4D6A6> /System/Library/PrivateFrameworks/TCC.framework/Versions/A/TCC
    0x7fff99d9a000 -     0x7fff99da1fff  com.apple.NetFS (5.0 - 4.0) <82E24B9A-7742-3DA3-9E99-ED267D98C05E> /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS
    0x7fff99da2000 -     0x7fff99dafff7  com.apple.NetAuth (4.0 - 4.0) <F5BC7D7D-AF28-3C83-A674-DADA48FF7810> /System/Library/PrivateFrameworks/NetAuth.framework/Versions/A/NetAuth
    0x7fff99db4000 -     0x7fff99dcfff7  libsystem_kernel.dylib (2050.18.24) <C0535565-35D1-31A7-A744-63D9F10F12A4> /usr/lib/system/libsystem_kernel.dylib
    0x7fff99e52000 -     0x7fff99e53ff7  libsystem_sandbox.dylib (220) <3C3B03CF-C525-3CB3-8557-62E91B93AC95> /usr/lib/system/libsystem_sandbox.dylib
    0x7fff99e99000 -     0x7fff99e9ffff  libmacho.dylib (829) <BF332AD9-E89F-387E-92A4-6E1AB74BD4D9> /usr/lib/system/libmacho.dylib
    0x7fff9a0fb000 -     0x7fff9a147ff7  libauto.dylib (185.1) <73CDC482-16E3-3FC7-9BB4-FBA2DA44DBC2> /usr/lib/libauto.dylib
    0x7fff9a220000 -     0x7fff9a22eff7  libkxld.dylib (2050.18.24) <7027CE49-007D-3553-8FFA-3E3B428B2316> /usr/lib/system/libkxld.dylib
    0x7fff9a241000 -     0x7fff9a242fff  liblangid.dylib (116) <864C409D-D56B-383E-9B44-A435A47F2346> /usr/lib/liblangid.dylib
    0x7fff9a243000 -     0x7fff9a249ff7  libunwind.dylib (35.1) <21703D36-2DAB-3D8B-8442-EAAB23C060D3> /usr/lib/system/libunwind.dylib
    0x7fff9a7aa000 -     0x7fff9a7b9ff7  libxar.1.dylib (105) <370ED355-E516-311E-BAFD-D80633A84BE1> /usr/lib/libxar.1.dylib
    0x7fff9a867000 -     0x7fff9a8a1fff  com.apple.GSS (3.0 - 2.0) <0BDF8090-5EF4-3759-94DE-8521D74188AA> /System/Library/Frameworks/GSS.framework/Versions/A/GSS
    0x7fff9a94d000 -     0x7fff9a9aaff7  com.apple.AE (645.3 - 645.3) <FF867ACA-8628-3E5A-8FA0-AF429B42C5D7> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.    framework/Versions/A/AE
    0x7fff9aa0f000 -     0x7fff9aa10fff  libDiagnosticMessagesClient.dylib (8) <8548E0DC-0D2F-30B6-B045-FE8A038E76D8> /usr/lib/libDiagnosticMessagesClient.dylib
    0x7fff9aa11000 -     0x7fff9aa1cfff  com.apple.CommonAuth (3.0 - 2.0) <74A86DDD-57D0-3178-AB74-E1F31DBFFC39> /System/Library/PrivateFrameworks/CommonAuth.    framework/Versions/A/CommonAuth

External Modification Summary:
  Calls made by other processes targeting this process:
    task_for_pid: 0
    thread_create: 0
    thread_set_state: 0
  Calls made by this process:
    task_for_pid: 0
    thread_create: 0
    thread_set_state: 0
  Calls made by all processes on this machine:
    task_for_pid: 1596
    thread_create: 0
    thread_set_state: 0

VM Region Summary:
ReadOnly portion of Libraries: Total=111.2M resident=43.1M(39%) swapped_out_or_unallocated=68.1M(61%)
Writable regions: Total=27.0M written=6936K(25%) resident=9208K(33%) swapped_out=0K(0%) unallocated=18.0M(67%)

REGION TYPE                      VIRTUAL
===========                      =======
MALLOC                             17.7M
MALLOC guard page                    32K
STACK GUARD                        56.0M
Stack                              8192K
VM_ALLOCATE                           4K
__DATA                             6248K
__LINKEDIT                         55.5M
__TEXT                             55.6M
__UNICODE                           544K
shared memory                        12K
===========                      =======
TOTAL                             199.5M 
```

我正在使用 PHP 5.4.4（但尝试过使用 5.3.14 和 5.2.17），PHPUnit 版本是 3.7.9。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T11:11:49.977

我今天早上早些时候解决了这个问题。问题是 Yii 试图取消注册一个不存在的自动加载函数，它可能在 PHPUnit 的更高版本中被删除，因为我比我的同事早了几个小版本。当试图注销一个不存在的自动加载器时，PHP 会抛出一个 SIGSEGV。

所以我在 Yii 中更改了这些行：framework/test/CTestCase.php

```
spl_autoload_unregister('phpunit_autoload');
Yii::registerAutoloader('phpunit_autoload'); 
```

到：

```
if (in_array('phpunit_autoload', spl_autoload_functions())) {
    spl_autoload_unregister('phpunit_autoload');
    Yii::registerAutoloader('phpunit_autoload');
} 
```

这已经解决了这个问题。此更改已在 Git 存储库的 Yii 中实施，但尚未公开发布。bugs.php.net 上也已经存在错误报告。我已经回答了这个问题，所以它可以帮助其他有同样问题的人。

# java - java swing不能扩展JFrame的高度？

> ID：13268943
> 
> 赞同：2
> 
> 时间：2012-11-07T11:34:58.463
> 
> 标签：java, swing, height, layout-manager, pack

我创建了一个 JFrame 并将一个 JPanel 设置为其内容面板，我在该容器中添加了大约 30 个按钮，但 JFrame 向我显示了一行按钮，它不允许我扩展高度。

```
public class UIDemo{
    private JPanel contentPanel = new JPanel();
    private JButton buttons[] = new JButton[30];
    public UIDemo(JFrame frame){
        for(int i = 0; i < buttons.length; i++){
           buttons[i] = new JButton("Button"+Integer.toString(i));
           contentPanel.add(buttons[i]);
        }//Add all buttons into content panel.

        frame.setContentPane(contentPanel);
        frame.pack();
        frame.setVisible(true);
    }
    public static void main(String[] args){
        SwingUtilities.invokeLater(new Runnable(){
             public void run(){
                 new UIDemo(new JFrame());
             }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:38:58.303

*   `JPanel`已`FlowLayout`在 API中实现

*   `FlowLayout`只接受`PreferredSize`，然后`JComponents`in`JPanel`不可调整大小

*   看看`GridLayout`，

*   另一种选择是`GridBagLayout`或今天的习惯`MigLayout`

# text - 是否有允许手动突出显示文本的文本编辑器？

> ID：13268946
> 
> 赞同：1
> 
> 时间：2012-11-07T11:35:17.760
> 
> 标签：text, colors, editor, highlighting

我需要一个简单的文本编辑器来处理一些在将它们放入程序之前必须手动分析的文件。但是我希望能够手动更改我正在使用的文本的背景颜色和字体颜色；以便更容易看到我已经去过的地方。

我正在处理类似于这个的文件：

```
 #sequence  identifier  exp_freq    occ exp_occ occ_P   occ_E   occ_sig rank    ovl_occ forbocc
ttcttgtt    ttcttgtt    0.0000219976814 28  3.97    4.3e-15 2.4e-10 9.61    1   0   196
tcttgttt    tcttgttt    0.0000210107885 21  3.80    7.8e-10 4.4e-05 4.36    2   0   147
tttttata    tttttata    0.0000121341839 16  2.19    1.7e-09 9.8e-05 4.01    3   0   112
ttcttgct    ttcttgct    0.0000144367046 17  2.61    2.9e-09 1.6e-04 3.79    4   0   119
gttttttt    gttttttt    0.0000167341636 18  3.02    4e-09   2.3e-04 3.64    5   0   126
cttgtttt    cttgtttt    0.0000193716955 19  3.50    6.5e-09 3.7e-04 3.43    6   0   133
ttttttta    ttttttta    0.0000101585213 14  1.84    1e-08   5.8e-04 3.24    7   0   98 
```

目的是识别具有某些共同特征的序列，然后将它们组合在一起，但是在没有某种标记来标记哪个序列属于哪个组的情况下，这样做确实很费劲。我真的不想使用 excel，更喜欢使用文本编辑器来处理这些东西。

什么是最好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:17:04.570

emacs[通过 regexp 突出显示](http://www.masteringemacs.org/articles/2010/10/13/highlighting-by-word-line-regexp/)。

# javascript - Python 和读取 JavaScript 变量值

> ID：13268947
> 
> 赞同：3
> 
> 时间：2012-11-07T11:35:19.990
> 
> 标签：javascript, python, webkit

我对 Python 编程很陌生，所以请多多包涵。

我有一个带有几个 div 层的 HTML 文件。此文件在 webkit.WebView 对象中打开。单击时，每个 div 层都会在全局变量 (JavaScript) 中保存一个值。

如何从我的 Python 脚本中读取该全局 JavaScript 变量的值？

我找到了一些答案，但它们似乎不适合我的情况（但我当然可能是错的）：

[将 JavaScript 变量传递给 Python](https://stackoverflow.com/questions/2894946/passing-javascript-variable-to-python)

[使用 Python 解析 JavaScript 变量](https://stackoverflow.com/questions/3690116/parse-javascript-variable-with-python)

[编辑]
我正在使用 webkit.WebView 因为我必须在现有的 glade (libglade) 应用程序中显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:29:11.383

试试这个。它使用 addToJavaScriptWindowObject 方法将 QObject 添加到 QWebView 中。这将启用您的 python 脚本和 webview 中的 HMTL/Javascript 之间的通信。下面的示例将允许您通过 JavaScript 提示将 javascript 全局变量消息的值更改为您想要的任何值，然后每当您单击 Python Print Message 链接时，它将执行您的 python 代码，该代码将获取 javascript 值并打印它到控制台。

```
import sys
from PyQt4 import QtCore, QtGui, QtWebKit

HTML = """
<html><body onload="broker.print_msg(message)">
<script>var message = 'print_msg message'</script>
<a href="javascript:message=prompt('Enter Message')">Change Message</a><br/>
<a href="javascript:broker.print_msg(message)">Python Print Message</a>
</body></html>
"""

class Broker(QtCore.QObject):
    @QtCore.pyqtSlot(str)
    def print_msg(self, data):
        print data

app = QtGui.QApplication(sys.argv)
view = QtWebKit.QWebView()
view.page().mainFrame().addToJavaScriptWindowObject('broker', Broker(view))
view.setHtml(HTML)
window = QtGui.QMainWindow()
window.setCentralWidget(view)
window.show()
sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:13:02.487

我知道这是一个老问题，但仍然希望它对某人有用。

您可以使用警报处理程序并在 python 端读取值。[http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-script-alert](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-script-alert)

单击按钮的示例您可以执行以下操作

```
 alert("Button Clicked"); 
```

在 python 端，您将收到警报通知，您可以解析字符串。如果对象不是简单对象，则必须将其转换为可以在 python 端解析的字符串格式。我见过几个警报处理程序的例子。[https://github.com/nhrdl/notesMD/blob/master/notesmd.py](https://github.com/nhrdl/notesMD/blob/master/notesmd.py)是我编写的，它使用警报处理程序在 javascript 和 python 之间传递大量数据

# vba - 以贴纸格式放置的 VBA 列表

> ID：13268954
> 
> 赞同：1
> 
> 时间：2012-11-07T11:35:56.650
> 
> 标签：vba, excel, excel-2010

我有一个需要打印在贴纸上的数据列表（想象一下 Avery 那种）。我无法提出将产生所需结果的代码：

到目前为止，我的代码是：

```
With wsEtiketten
    ' erase old data
    .Cells.Clear
    ' enter new data
    With .Cells(1, 2)
        .Value = "Lettrine"
        .Font.Bold = True
    End With
    .Cells(2, 2).Value = sAuswertungsLettrine
    For i = 0 To MaxRow - 1
        For j = 0 To 4
            r.Copy .Cells(4, 2).Offset(i * 5, j * 5)
            .Cells(4, 2).Offset((i * 5) + 1, (j * 5) + 0) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 1).Value 'Page
            .Cells(4, 2).Offset((i * 5) + 1, (j * 5) + 1) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 2).Value 'Ordernr
            .Cells(4, 2).Offset((i * 5) + 1, (j * 5) + 2) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 8).Value 'Surf
            .Cells(4, 2).Offset((i * 5) + 1, (j * 5) + 3) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 9).Value 'Indice DB
            .Cells(4, 2).Offset((i * 5) + 3, (j * 5) + 0) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 3).Value 'Count
            .Cells(4, 2).Offset((i * 5) + 3, (j * 5) + 1) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 4).Value 'CA Brut
            .Cells(4, 2).Offset((i * 5) + 3, (j * 5) + 3) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 7).Value 'Marge
        Next j
    Next i
End With 
```

与之相关的信息只是在行中重复。每次字段偏移时，我都需要更改。我怎样才能做到这一点？我敢肯定这可能是编程幼儿园的东西，但我不明白。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T12:09:02.650

也许是一个出人意料的答案。您也可以将 Excel 表格与 Word 结合使用来获得您想要的结果。这是标准的 Office 功能：

[http://support.microsoft.com/kb/318117/en](http://support.microsoft.com/kb/318117/en)

或德语：

[http://support.microsoft.com/kb/318117/de](http://support.microsoft.com/kb/318117/de)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T09:19:41.473

好的。我设法在 Excel 中找到答案。一旦我有了它，它就很明显了。开始：

```
With wsEtiketten
    ' Alte Daten werden gelöscht
    .Cells.Clear
    ' Neue Daten werden eingelesen
    With .Cells(1, 2)
        .Value = "Lettrine"
        .Font.Bold = True
    End With
    .Cells(2, 2).Value = sAuswertungsLettrine
    For i = 0 To MaxRow - 1
            r.Copy .Cells(4, 2).Offset(WorksheetFunction.RoundDown(i / 5, 0) * 5, ((i + 5) Mod 5) * 5)
            .Cells(4, 2).Offset((WorksheetFunction.RoundDown(i / 5, 0)) * 5 + 1, ((i + 5) Mod 5) * 5 + 0) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 1).Value 'Page
            .Cells(4, 2).Offset((WorksheetFunction.RoundDown(i / 5, 0)) * 5 + 1, ((i + 5) Mod 5) * 5 + 1) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 2).Value 'Bestellnummer
            .Cells(4, 2).Offset((WorksheetFunction.RoundDown(i / 5, 0)) * 5 + 1, ((i + 5) Mod 5) * 5 + 2) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 8).Value 'Surf
            .Cells(4, 2).Offset((WorksheetFunction.RoundDown(i / 5, 0)) * 5 + 1, ((i + 5) Mod 5) * 5 + 3) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 9).Value 'Indice DB
            .Cells(4, 2).Offset((WorksheetFunction.RoundDown(i / 5, 0)) * 5 + 3, ((i + 5) Mod 5) * 5 + 0) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 3).Value 'Anzahl
            .Cells(4, 2).Offset((WorksheetFunction.RoundDown(i / 5, 0)) * 5 + 3, ((i + 5) Mod 5) * 5 + 1) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 4).Value 'CA Brut
            .Cells(4, 2).Offset((WorksheetFunction.RoundDown(i / 5, 0)) * 5 + 3, ((i + 5) Mod 5) * 5 + 3) = wsSheet.ListObjects(1).DataBodyRange.Cells(i + 1, 7).Value 'Marge
    Next i
End With 
```

# caching - 带有 ZF2 注释缓存的 Doctrine2？

> ID：13268957
> 
> 赞同：1
> 
> 时间：2012-11-07T11:36:03.657
> 
> 标签：caching, doctrine-orm, annotations, zend-framework2

我将 Doctrine2 与 ZF2（Zend Framework2）一起使用。根据[http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)
我在 Doctrine 中使用注释，我需要知道注释是否默认被缓存，如果那么在哪里，如果不是，我如何缓存它们。

**我知道 Symfony2/Doctrine2 缓存注释数据，我该如何用 Zend2 来做呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T20:38:52.707

使用 memcache 进行注释缓存的示例是（module.config.php）：

```
'service_manager' => array(

    'factories' => array(
        'doctrine.cache.my_memcache' => function(\Zend\ServiceManager\ServiceManager $sm) {
            $cache = new \Doctrine\Common\Cache\MemcacheCache();
            $memcache = new \Memcache();
            $memcache->connect('localhost', 11211);
            $cache->setMemcache($memcache);

            return $cache;
        }
    ) 
```

这为学说创建了基本的内存缓存对象。之后，您必须告诉教义将此缓存用于这样的注释（同样，module.config.php）：

```
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'my_memcache', // <- this points to the doctrine.cache.my_memcache factory we created above
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            ),
        ),
    ),
), 
```

或者，您可以使用学说的数组缓存。只需将 'cache' => 'my_memcache' 更改为 'cache' => 'array' （据我所知，这应该是默认值。希望对您有所帮助！

# java - 总重量。如何用一个事件处理两个相似的动作？

> ID：13268958
> 
> 赞同：1
> 
> 时间：2012-11-07T11:36:06.500
> 
> 标签：java, events, gwt

我遇到了下一个问题。我有产品列表，每个产品都有打开其 QuickLook 弹出窗口的按钮。我为这个按钮创建了特殊事件，在 EventBus 中注册并触发它们。一切似乎都很好，但是当我单击一个按钮时，不仅会显示该项目的弹出窗口，还会显示列表中的所有项目（我的意思是“显示”的数字）。发生这种情况是因为我对所有这些按钮都有一个事件类，但我能以某种方式将它们与另一个分开吗？

我只想为每个按钮设置一些 ID 或类似的东西，并在触发或（这会更好）仅触发我真正需要的事件时检查此条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:00:56.063

为此，您不需要 EventBus。您可以创建一个简单的 ClickHandler 并将其附加到您的按钮。创建 ClickHandler 时，您将产品 ID（或用于区分产品的任何内容）传递给显示弹出窗口的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:04:38.443

您可以将`productId`其作为属性添加到您的自定义事件中。事件处理程序将对其进行检查并仅显示所需的产品信息。

# manifest - 如果尚未安装功能的依赖项，如何建议 p2 在功能安装期间添加存储库？

> ID：13268960
> 
> 赞同：0
> 
> 时间：2012-11-07T11:36:11.020
> 
> 标签：manifest, p2

我正在设计一个 Eclipse 功能，其中包含需要安装目标中可能存在的依赖项的捆绑包，但这不一定是这种情况。我想避免安装不必要的 IU。我想知道如何建议 p2 安装程序仅在安装中不存在所需的 IU 时才安装一个功能，并提供存储库位置以从中下载 IU。

依赖于 IU D 的主 IU M 的期望场景是：

1.  p2尝试安装M，发现需要D
2.  p2发现当前安装中缺少D
3.  根据安装建议，p2 从与 D 关联的存储库 URL 中获取 D
4.  p2 安装 D
5.  p2 安装 M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:21:20.930

AFAIK，既不可能

*   仅在不满足依赖项时有条件地添加 p2 存储库，也不
*   在安装之前添加 p2 存储库 - 您只能添加 p2 存储库，例如在安装功能期间，然后可以在下一个操作中使用，例如更新。

但是，您可以通过将 p2 存储库与您的功能的依赖项包含在您自己的 p2 存储库中来实现您的用例。

从技术上讲，对此有不同的解决方案，但最简单的一种可能是创建一个所谓的“复合存储库”，其中包括具有您自己的内容的存储库以及具有外部依赖项的存储库。

# php - 如何将我的 JSON 输出检索到 JavaScript 变量中？

> ID：13268963
> 
> 赞同：1
> 
> 时间：2012-11-07T11:36:40.393
> 
> 标签：php, javascript, jquery, ajax, json

我有这样的 jsonOutput.php 页面：

```
 $response['imgsrc'] =  $filename[1];
 echo json_encode($response); 
```

它输出一个文件名，如`{"imgsrc":"071112164139.jpg"}`

现在我的问题是，如何在 index.php 中使用 jQuery 将文件名放入使用 ajax 的变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T11:38:53.623

```
$.getJSON('jsonOutput.php', function(data) {
  var filename = data.imagesrc;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:38:56.853

尝试这个：

```
$.get('<your php file>', {}, function(response) {
   var imagesrc = response.imgsrc;
   alert(response.imgsrc);
}); 
```

阅读[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T11:43:21.900

您可以使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)将 json 输出解析为 javascript 对象。

以下代码将起作用：

```
var json = json_encode(<?php echo $response ?>);
var obj = jQuery.parseJSON(json);
alert("file name is: " + obj.imgsrc); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T11:38:44.123

您所要做的就是执行一个 jQuery ajax 调用 -

```
var imgSrc = '';
$.ajax(PATH_TO_PHP_SCRIPT,{},function(response){
  imgSrc = response.imgsrc;
},'json'); 
```

您的`imgsrc`参数现在将是一个名为 的 JavaScript 变量`imgSrc`。不要忘记指定 your`dataType`是`json`.

### 参考 -

*   [`ajax()`](http://api.jquery.com/jQuery.ajax/)

# hadoop - Hive NR 地图进度不一致并定期从 0% 重新启动

> ID：13268965
> 
> 赞同：2
> 
> 时间：2012-11-07T11:36:55.250
> 
> 标签：hadoop, mapreduce, hive

我在大约一千个 avro 记录的数据集上有一个 Yarn MR（有两个用于 mapreduce 的 ec2 实例）作业，并且 map 阶段的行为不规律。请参阅下面的进度。当然，我检查了 resourcemanager 和 nodemanagers 上的日志，并没有发现任何可疑之处，但是这些日志太冗长了

那里发生了什么事？

```
 hive> select * from nikon where qs_cs_s_aid='VIEW' limit 10;

        Total MapReduce jobs = 1
        Launching Job 1 out of 1
        Number of reduce tasks is set to 0 since there's no reduce operator
        Starting Job = job_1352281315350_0020, Tracking URL = http://blabla.ec2.internal:8088/proxy/application_1352281315350_0020/
        Kill Command = /usr/lib/hadoop/bin/hadoop job  -Dmapred.job.tracker=blabla.com:8032 -kill job_1352281315350_0020
        Hadoop job information for Stage-1: number of mappers: 4; number of reducers: 0

        2012-11-07 11:14:40,976 Stage-1 map = 0%,  reduce = 0%
        2012-11-07 11:15:06,136 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 10.38 sec
        2012-11-07 11:15:07,253 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 12.18 sec
        2012-11-07 11:15:08,371 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 12.18 sec
        2012-11-07 11:15:09,491 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 12.18 sec
        2012-11-07 11:15:10,643 Stage-1 map = 2%,  reduce = 0%, Cumulative CPU 15.42 sec
        (...)
        2012-11-07 11:15:35,441 Stage-1 map = 28%,  reduce = 0%, Cumulative CPU 37.77 sec
        2012-11-07 11:15:36,486 Stage-1 map = 28%,  reduce = 0%, Cumulative CPU 37.77 sec

here restart at 16% ?

        2012-11-07 11:15:37,692 Stage-1 map = 16%,  reduce = 0%, Cumulative CPU 21.15 sec
        2012-11-07 11:15:38,815 Stage-1 map = 16%,  reduce = 0%, Cumulative CPU 21.15 sec
        2012-11-07 11:15:39,865 Stage-1 map = 16%,  reduce = 0%, Cumulative CPU 21.15 sec
        2012-11-07 11:15:41,064 Stage-1 map = 18%,  reduce = 0%, Cumulative CPU 22.4 sec
        2012-11-07 11:15:42,181 Stage-1 map = 18%,  reduce = 0%, Cumulative CPU 22.4 sec
        2012-11-07 11:15:43,299 Stage-1 map = 18%,  reduce = 0%, Cumulative CPU 22.4 sec

here restart at 0% ?

        2012-11-07 11:15:44,418 Stage-1 map = 0%,  reduce = 0%
        2012-11-07 11:16:02,076 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 6.86 sec
        2012-11-07 11:16:03,193 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 6.86 sec
        2012-11-07 11:16:04,259 Stage-1 map = 2%,  reduce = 0%, Cumulative CPU 8.45 sec
        (...)
        2012-11-07 11:16:31,291 Stage-1 map = 22%,  reduce = 0%, Cumulative CPU 35.34 sec
        2012-11-07 11:16:32,414 Stage-1 map = 26%,  reduce = 0%, Cumulative CPU 37.93 sec

here restart at 11% ?

        2012-11-07 11:16:33,459 Stage-1 map = 11%,  reduce = 0%, Cumulative CPU 19.53 sec
        2012-11-07 11:16:34,507 Stage-1 map = 11%,  reduce = 0%, Cumulative CPU 19.53 sec
        2012-11-07 11:16:35,731 Stage-1 map = 13%,  reduce = 0%, Cumulative CPU 21.47 sec
        (...)
        2012-11-07 11:16:46,839 Stage-1 map = 17%,  reduce = 0%, Cumulative CPU 24.14 sec

here restart at 0% ?

        2012-11-07 11:16:47,939 Stage-1 map = 0%,  reduce = 0%
        2012-11-07 11:16:56,653 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 7.54 sec
        2012-11-07 11:16:57,814 Stage-1 map = 1%,  reduce = 0%, Cumulative CPU 7.54 sec
        (...) 
```

不用说，一段时间后作业会因错误而崩溃：java.io.IOException: java.io.IOException: java.lang.ArrayIndexOutOfBoundsException: -56

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:58:24.357

这看起来就像 hadoop 在失败时重试 map 任务（默认情况下，它重试 3 次，每次在不同的主机上），这就是它使您的作业更具容错性的方式。

如果故障是由特定主机上的临时问题引起的（这种情况比您想象的要多），这很有用。但是，在您的情况下，您确实有一个由配置单元查询中的某些内容引起的数组越界异常。我会检查失败的任务日志以尝试调试原因。

# html - 下拉导航栏

> ID：13268968
> 
> 赞同：-1
> 
> 时间：2012-11-07T11:37:02.377
> 
> 标签：html, css

子菜单显示不正确请帮帮我，我希望它在 CSS 和 HTML 中子菜单应该像一个列表，它应该一个一个向下显示，但是
在将鼠标悬停在主菜单上后，它会在同一行中一个接一个地显示子菜单应该显示

```
 <style>
        #navbar {
            position: absolute;
            top: 0;
            left: 0;
            margin: 0;
            padding:0;}
        #navbar li 
        {
            list-style: none;
            float: left; 
        }
        #navbar li a {
            display: block;
            padding: 3px 8px;
            text-transform: uppercase;
            text-decoration: none; 
            color: #999;
            font-weight: bold; }
        #navbar li a:hover {
            color: #000; }
            #navbar li ul {
            display: none;  }
        #navbar li:hover ul, #navbar li.hover ul {
            position: absolute;
            display:list-item;
            left: 0;
            width: 100%;
            margin: 0;
            padding: 0; }
        </style>
        </head>
        <body>

        <ul id="navbar">
          <li><a href="#">Home</a></li>
          <li><a href="#">About Us</a>
          <ul>
          <li><a href="#">Subitem One</a></li>
                <li><a href="#">Second Subitem</a></li>
                <li><a href="#">thrid subitem</a></li>
        </ul>
            </li>
          <li><a href="#">Services</a></li>
          <li><a href="#">Products</a></li>
          <li><a href="#">Contact</a></li>
        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:41:54.447

***[现场演示](http://jsfiddle.net/rohitazad/3qPbE/28/)***

HI 现在习惯了这个 css 并在纯 css中创建了下拉**导航**

**CSS**

```
#navbar{
background:#0082c8;
position:relative;
margin-top:15px;
}
    #navbar > li{
        float:left;
        margin:0 10px;
        position:relative;
        padding:14px 0;
    }

    #navbar li a, .subnavi li a{
        color:white;
        text-decoration:none;
        display:inline-block;
        line-height:29px;
        padding:0 13px;
        font-size:16px;
        font-family:arial;
        text-shadow: 0px 2px 2px #034e9f;
        filter: dropshadow(color=#034e9f, offx=0, offy=2);
    }

    #navbar > li:hover > a, li:hover > a , #navbar li a.active{
        background:#055c9f;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        -webkit-box-shadow: inset 0px 3px 3px 0px #042960;
        -moz-box-shadow: inset 0px 3px 3px 0px #042960;
        box-shadow: inset 0px 3px 3px 0px #042960;
        border:1px solid #009ada;
        color:#f7cf00;
        line-height:27px;
        padding:0 12px;               
    }

    .subnavi{
        position:absolute;
        display:none;
        top:51px;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        -webkit-box-shadow: 0px 0px 3px 1px #979395;
        -moz-box-shadow: 0px 0px 3px 1px #979395;
        box-shadow: 0px 0px 3px 1px #979395;
        background:#0082c8;
        border:1px solid #005890;
        padding:10px 0;
        white-space:nowrap;
    }

    #navbar li:hover .subnavi{
        display:block;

    }
    #navbar .subnavi li{
        margin:0;
    }
    #navbar .subnavi li a{
        display:block;
        font-size:13px;
        padding:0 15px;
        border-radius:0;
        line-height:27px;
    }
    #navbar .subnavi li a:hover{
        padding:0 15px;
        border-radius:0;
        border-left:0;
        border-right:0;
        line-height:25px;
    }

    #navbar:after{
    content:'';
        clear:both;
        display:block;
        overflow:hidden;
    } 
```

**HTML**

```
<ul id="navbar">
    <li><a href="" class="active">About</a></li>
    <li><a href="">Demo</a>
        <ul class="subnavi">
            <li><a href="">Demo</a></li>
            <li><a href="">Demo</a></li>
<li><a href="">Demo</a></li>
<li><a href="">Demo</a></li>
<li><a href="">Demo</a></li>            
        </ul>

    </li>
    <li><a href="">Demo</a></li>

</ul> 
```

***[现场演示](http://jsfiddle.net/rohitazad/3qPbE/28/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T11:50:47.263

在你的CSS中添加这个

```
#navbar li 
{
list-style: none;
float: left; 
position:relative;
} 
```

这是[jsFiddle 文件](http://jsfiddle.net/rr8Xp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:41:47.603

为您的子菜单添加此样式：

```
#navbar li ul li
{
    float: none; 
} 
```

# html - 使用结束的事件循环html5视频

> ID：13268972
> 
> 赞同：2
> 
> 时间：2012-11-07T11:37:15.073
> 
> 标签：html, loops, video, html5-video

我正在寻找一个简单的循环html5视频的圣杯，我目前正在使用以下似乎不起作用的代码

```
<video width="650" height="650" class="outer_shadow" autoplay="" ended="this.play()" loop>
    <source src="/videos?video_id=ag1kZXZ-anQtd2luZG93cg4LEghUaW1lRGF0YRgNDA">
</video> 
```

谁能强调为什么这段代码不起作用/建议他们最好的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:44:13.447

当然，您只需要设置`loop`属性（请参阅在 Chrome 中测试的[小提琴）：](http://jsfiddle.net/HMHMt/)

```
<video id="myVideo" width="650" height="650" class="outer_shadow" autoplay loop>
    <source src="http://content.bitsontherun.com/videos/nPripu9l-60830.mp4">
</video>​ 
```

如果 Firefox 仍然不喜欢该`loop`属性，请尝试以下修复：

```
document.getElementById('myVideo').addEventListener('ended', function(){
    this.currentTime = 0;
}, false); 
```

**更新：**

也许不像您希望的那么简单，但作为解决该问题的方法，可能值得尝试许多 HTML5 视频库之一，例如[video.js](http://videojs.com/)。如果问题仍然存在，作为最坏的情况，您可以强制库在支持的地方（即桌面）使用 Flash，并在不支持的地方回退到 HTML5（如此[处](http://help.videojs.com/discussions/questions/147-force-use-of-flash-player)所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T02:26:33.453

这是循环多个视频的[HTML5](http://jsfiddle.net/j2knz6sv/)视频播放器的工作示例。只需将您的 URL 添加到 src 数组...

```
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
<video id="video" width="500" height="400" controls autoplay></video>
<script>
var src = [
 "http://content.adfox.ru/131007/adfox/205544/865991_11.mp4",
 "http://all.rutube.ru/130627/gpmdigital/217059/805529_11.mp4"
];
var curSrc = 0;
$(function() {
 $('#video').attr("src", src[curSrc % src.length]);
 curSrc++;
 var video = $('#video').get(0);

 $('#video')
 .on('loadedmetadata', function() {
  video.currentTime=0.01;
  video.play();
 })
 .on('ended', function() {
  console.log('ended');
  video.src = src[curSrc % src.length];
  video.load();
  curSrc++;
 });
});
</script> 
```

# c++ - 使用 boost::phoenix 适配一个 BOOST_CHECK 宏

> ID：13268978
> 
> 赞同：3
> 
> 时间：2012-11-07T11:37:27.643
> 
> 标签：c++, boost, c++11, boost-test, boost-phoenix

在使用 c++ 11 进行测试期间，我使用了以下构造：

```
std::for_each( coll.begin(), coll.end(), 
    [ &obj, expRes ]( const value_type& val )
    {
       BOOST_CHECK_EQUAL( expRes, obj.someFunc( val ) );
    } ); 
```

我目前正在研究一个不使用 C++11 的项目，我是否正在寻找一种方法来生成类似的 lambda 表达式，而不必创建单独的函数/仿函数。

我了解`boost::phoenix`创建 lambda 的基本用法，但我想不出一种方法来创建能够调用`boost::test`宏的 phoenix lambda。

我能想到的最好的是：

```
template< typename T >
void MakeCheck( const T& lhs, const T& rhs )
{
    BOOST_CHECK_EQUAL( lhs, rhs );
}

/// inside some other function...
std::for_each( coll.begin(), coll.end(), 
    ph::bind( MakeCheck<bool>, true, 
              ph::bind( &MyClass::someFunc, obj, ph::arg_names::arg1 ) ) ); 
```

不幸的是，这种方法会丢失检查失败的行号信息，因为宏 BOOST_CHECK_EQUAL 报告的是宏的行号，而不是`std::for_each`调用的行号。

有没有更好的方法来创建涉及使用“boost::phoenix”的宏调用的 lambda？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:12:52.800

宏总是首先展开，因此获得正确行号的唯一方法是：

*   不在模板中嵌入宏
*   或从模板主体中提取任何`__LINE__`,`__FILE__`或其他上下文相关的宏，方法是将它们转换为模板参数，并使用这些提取的值用宏包装顶级表达式（宏或模板）。

[重构 boost代码](http://www.boost.org/doc/libs/1_52_0/boost/test/test_tools.hpp)以包含这些修改（大约 4 级嵌套代码）可能并不难，但之后维护起来并不容易。

# spring - Spring中的@ExceptionHandler

> ID：13268985
> 
> 赞同：3
> 
> 时间：2012-11-07T11:37:45.447
> 
> 标签：spring, model-view-controller

在我的应用程序中，我在 web.xml 中配置了一个错误页面。我需要根据条件为特定控制器覆盖它。在这里，当条件变为真时，我需要重定向到特定的错误页面，否则应该呈现正常的错误页面。这是代码。请帮我。

```
@Controller
public class Test{

 @ExceptionHandler(Exception.class)
 public ModelAndView generateException(HttpServletRequest httpServletRequest){
  if(condition) {
   return new ModelAndView("myError.jsp");
  } else {
   //should execute default error page.
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T12:07:55.423

再次抛出将由 DefaultHandlerExceptionResolver 处理的异常，以响应 web.xml 中定义的错误页面；它不会调用控制器的相同异常处理程序。

```
@ExceptionHandler(Exception.class)
public ModelAndView generateException(Exception ex) throws Exception{
    if(condition) {
        return new ModelAndView("myError.jsp");
    } else {
        //should execute default error page.
        throw ex;
    }   
} 
```

# paypal - Wordpress cp-appointment-calendar 重定向到贝宝问题

> ID：13268990
> 
> 赞同：0
> 
> 时间：2012-11-07T11:37:56.743
> 
> 标签：paypal, wordpress

我在[http://studioglamour.co.uk](http://studioglamour.co.uk)上使用 cp-appointment-calendar 进行预订系统，但问题是当您输入日期/时间和信息时，您需要重定向到贝宝。我知道 PayPal 不允许使用 ifames。

问题是：当我按下**继续**时，它会关闭fancybox iframe，并重定向到主页中的PayPal，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:21:07.277

在适当的形式/链接中使用 target="_top"。

在表单中使用时，表单将提交到整个窗口。

在链接中使用时，链接将在整个窗口中打开。

# html - 浏览器之间相对框中的绝对位置顶部不同

> ID：13268991
> 
> 赞同：3
> 
> 时间：2012-11-07T11:37:57.143
> 
> 标签：html, css, position

我有一个子导航，它位于不同浏览器的两个不同位置，我不确定为什么。我确实意识到使用 margin-top 而不是 top 确实可以解决这个问题，但问题是当子导航出现时我有一个 jQuery 幻灯片动画，当我使用 margin-top 时它看起来不太好，因为它出现了比现在更远。这是差异的图片：

[http://jsfiddle.net/eAqev/](http://jsfiddle.net/eAqev/) <-- JS 小提琴

![Internet Explorer 和 Google Chrome 的区别](../Images/63398e0917b67ad6a3942d15fd3c3c52.png)

HTML：

```
 <div id="navigation">
        <ul>
            <li><h1>01\. About</h1><h2>Learn about us</h2></li>
            <li class="button"><h1>02\. Products</h1><h2>View our selection of products</h2>
                <ul class="scrollDown">
                    <li><p>Kitchen Worktops</p></li>
                    <li><p>Upstands/Splashbacks</p></li>
                    <li><p>Gables/ Panels</p></li>
                    <li><p>Glass</p></li>
                    <li><p>High Gloss</p></li>
                    <li><p>Bathroom Tops</p></li>
                    <li><p>Sinks/ Taps</p></li>
                </ul>
            </li>
            <li><h1>03\. Contact</h1><h2>Contact us!</h2></li>
            <li><h1>04\. Gallery</h1><h2>View photos of us</h2></li>
        </ul>
    </div> 
```

CSS：

```
#navigation ul {
    display: inline;
    position: relative;
}

#navigation ul li {
    float: left;
    width: 200px;
    height: 35px;
    margin: 10px;
    list-style: none;
    border-bottom: 3px solid #ccc;
}

#navigation ul li:hover {
    border-bottom: 6px solid #eee;
    cursor: pointer;
}

#navigation ul ul {
    position: absolute;
    z-index: 1500;
    margin: 0;
    padding: 0;
    list-style:none;
    background: #fff;
    width: 200px;
    top: 60px;
    opacity:0.95;
    filter:alpha(opacity=95);
    -moz-opacity:0.95;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T11:47:45.873

你把一切都说清楚了只需添加下面的代码。它会解决你的问题

```
 #navigation ul ul {
    position: absolute;
    z-index: 1500;
    margin: 0 !important;
    padding: 0 !important;
    list-style:none;
    background: #fff;
    width: 200px;
    top: 60px;
    opacity:0.95;
    filter:alpha(opacity=95);
    -moz-opacity:0.95;
     }  

      #navigation ul {
      display: inline;
      z-index:10;
       position: relative;
        } 
```

很可能 IE7 将有一个错误的环境。这将适用于 IE8+。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T11:59:46.827

***[演示](http://jsfiddle.net/rohitazad/eAqev/1/)***

嗨，现在定义您的**ID** `#navigation ul` `display:inline-block;`，而不是 在其中添加您的**ID** `#navigation ul ul``top`

**像这样**

```
 #navigation ul {
        display: inline-block;
        position: relative;
        vertical-align: top;
    }
 #navigation ul ul {
        top:48px;
    } 
```

**[现场演示](http://jsfiddle.net/rohitazad/eAqev/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T11:44:43.363

不同的浏览器在 ul/li 元素上有不同的默认边距和填充。您是否尝试将这些全部重置为0？

```
#navigation ul, #navigation li {
    padding: 0px;
    margin: 0px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T11:46:32.720

也许你应该尝试[css-reset](http://meyerweb.com/eric/tools/css/reset/)？把它放在你的css的开头但是它可能会弄乱布局，所以你需要自己设置一些值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T11:53:52.120

**尝试这个：**

```
 #navigation ul li {float: left;
 width: 200px;
line-height:17px;
margin: 10px;
list-style: none;
border-bottom: 3px solid #ccc;
} 
```

# android - 我的网站包含几个工作清单，因此如何获取这些工作清单内容并使其显示在 android 应用程序中

> ID：13268996
> 
> 赞同：0
> 
> 时间：2012-11-07T11:38:16.473
> 
> 标签：android, wordpress, parsing

我的网站包含几个工作列表，因此如何获取这些工作列表内容并使其显示在 android 应用程序中，我遵循了 json 解析教程，但仍然可以得到输出，请任何人帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:44:01.370

尝试遵循这些教程。可能有助于您的事业。

1.  [http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/](http://www.ingeniumblog.net/2012/01/making-a-slick-rss-reader-in-android/)
2.  [http://inhoo.net/mobile-development/android-development/simple-android-json-parsing-example-with-output-into-listactivity/](http://inchoo.net/mobile-development/android-development/simple-android-json-parsing-example-with-output-into-listactivity/)

# r - 计算R中具有不同数据点的两条曲线的残差

> ID：13268998
> 
> 赞同：2
> 
> 时间：2012-11-07T11:38:17.307
> 
> 标签：r, plot, interpolation

我有两个不同的数据集（`c1`和`c2`），它们一起绘制在一个图中。两条曲线都有不同的 x 和 y 值：

```
c1 = data.frame(
  x=c(0,1.1,2,  3,  4,  5),
  y=c(0,1.1,1.9,3.2,4.3,5.2)
)
c2 = data.frame(
  x=c(0,0.3,0.9,2.1,3.2,4.2,5),
  y=c(0,0.4,1.5,2.3,3.2,4.1,5.1)
)
plot(c1, type="o", col=2)
lines(c2, type="o", col=3) 
```

`res=c1-c2`现在我想为所有唯一的 x 值 ( )绘制两条曲线 ( ) 的残差`unique(c(c1$x, c2$x))`。如果我有相同的 x 值，这将很容易。但似乎，我必须插入所有缺失的 x 值并将它们添加到测量数据集中。

有没有一种简单的方法可以在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:47:59.617

这个怎么样：

关于价值观`c1$x`：

```
c1$y - approx(c2$x, c2$y, c1$x)$y
# [1]  0.0000000 -0.5333333 -0.3333333  0.1636364  0.3800000  0.1000000 
```

关于价值观`c2$x`：

```
approx(c1$x, c1$y, c2$x)$y - c2$y
# [1]  0.00 -0.10 -0.60 -0.27  0.22  0.38  0.10 
```

或者，把它们放在一起，

```
x <- sort(unique(c(c1$x, c2$x)))
approx(c1$x, c1$y, x)$y - approx(c2$x, c2$y, x)$y
# [1] 0.0000000 -0.1000000 -0.6000000 -0.5333333 -0.3333333 -0.2700000  0.1636364  0.2200000
# [9] 0.3800000  0.3800000  0.1000000 
```

# java - 有没有一种简单的方法可以用 Processing 创建圆角？

> ID：13268999
> 
> 赞同：1
> 
> 时间：2012-11-07T11:38:20.377
> 
> 标签：java, image-processing, processing

我已经开始使用 Processing 来尝试绘制交互式图表。我想做的第一步是为某些表示为圆角矩形的事物创建“节点”。

然而，这似乎不是一个简单的任务。我知道的常用`rect`构造函数没有正确的方法 - 并试图手动使用它`beginShape()`并`curveVertex()`证明是绝对的噩梦。

有谁知道是否有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:38:20.377

因此，在发布此问题之前，我在进行更多研究的同时找到了答案-我想无论如何我都会发布它以防万一有人需要它。

事实证明，这很容易做到——只是我有点笨。

`rect()`在 Processing API 中指定了一个八参数构造函数（在其[Reference / API](http://processing.org/reference/rect_.html "API")中），它允许您指定矩形每个角的半径：

`rect(x, y, width, height, top-left radius, top-right radius, bottom-right radius, bottom-left radius);`