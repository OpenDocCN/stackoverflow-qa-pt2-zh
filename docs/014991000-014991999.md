# StackOverflow 问答 14991000-14991999

# php - 使用 fpdf 每页添加一张图片

> ID：14991000
> 
> 赞同：0
> 
> 时间：2013-02-20T22:17:11.083
> 
> 标签：php, image, add, fpdf

我正在尝试使用 fpdf php 库创建一个每页一张图像的 PDF 文档。

我可以使用以下方法创建带有图像的单个页面：

```
$pdf = new FPDF();
$pdf->AddPage();
$pdf->Image($imagePath,10,10,0,0); 
```

但问题是我如何移动到新页面并在相同坐标处添加图像但在第 2、3 页等

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:21:25.410

您可以`$pdf->AddPage();`再次使用该方法在 PDF 文档中开始新页面。坐标系将被重置到新页面的角落。

3 页文档的示例：

```
$pdf = new FPDF();

//page 1
$pdf->AddPage();
$pdf->Image($imagePath,10,10,0,0);

//page 2
$pdf->AddPage();
$pdf->Image($imagePath,10,10,0,0);

//page 3
$pdf->AddPage();
$pdf->Image($imagePath,10,10,0,0); 
```

从手册：

> 坐标系的原点在左上角，坐标递增向下。

但是如果图像需要在每一页上，那么我建议**扩展**FPDF 类并覆盖该`header()`功能。

> 此方法用于呈现页眉。它由 AddPage() 自动调用，不应由应用程序直接调用。FPDF 中的实现是空的，因此如果您想要特定的处理，您必须对其进行子类化并覆盖该方法。

[有关标头功能的更多信息](http://www.fpdf.org/en/doc/header.htm)

# python - Django表单：获取forms.CharField的值作为日期

> ID：14991002
> 
> 赞同：1
> 
> 时间：2013-02-20T22:17:23.997
> 
> 标签：python, django, forms, date, callback

我有一个表格，其中有一个欧洲日期的 CharField 输入。

我需要将其转换为日期 python 对象。

有没有办法让表单在验证中关心它？一些回调？

当有表单处理时，我不想在视图中这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:26:49.727

这就是`clean_FOO`填充`cleaned_data`字典的钩子。

```
class MyFrom(..):
    field = forms....

    def clean_field(self):
        data = self.cleaned_data.get('field')
        try:
            return datetime.datetime.strptime(data)
        except Exception:
             raise forms.ValidationError("That ain't no time!") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:27:54.873

为什么不只是 DateField 呢？

# ios - 从 xib 文件启动 APP 时出错

> ID：14991003
> 
> 赞同：0
> 
> 时间：2013-02-20T22:17:29.967
> 
> 标签：ios, objective-c

我使用 Storyboards 来启动 APP，但最后我不得不删除它们。所以，我在 Xcode 中更改了控制器的主界面选项。现在，当我启动 APP 时，我得到下一个错误：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIApplication 0x711d750> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key view. 
```

在我的 AppDelegate 我有下一个功能

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:23:10.063

出现此类问题是因为您的 Outlets 可能未正确连接或被错误删除，因此请确保您`IBOutlet`正确连接，例如您可能在 XIB/storyboard 中有一个 outlet 链接指向`IBOutlet`您的代码中不再存在的.

其次确保你`UIWindow`在你的`didFinishLaunchingWithOptions`方法中添加你的根控制器，像这样

```
self.window.rootViewController = yourRootViewContoller;
[self.window makeKeyAndVisible]; 
```

# php - RoR 服务器上发生了什么 - OpenUri / link_to remote: true

> ID：14991011
> 
> 赞同：0
> 
> 时间：2013-02-20T22:17:55.470
> 
> 标签：php, ruby-on-rails, ruby

我需要从 Rails 应用程序调用一些 php 脚本，我想知道服务器上发生了什么，以及当我..时运行这个 php 脚本的最佳选择是什么

像这样调用 php 脚本：

`= link_to('Run', 'http://domain.tld/myscript.php', remote: true)`

或链接到某些操作，其中：

`open('http://domain.tld/myscript.php)`

我认为最好的选择是link_to。当我使用 open 时，它正在等待响应.. PHP 脚本运行大约 30 分钟..

现在我使用open和delayed_job，但我认为link_to对服务器要求不高。

谢谢

# iphone - 是否可以为特定的 AVAudioPlayer 实例启用 AirPlay

> ID：14991014
> 
> 赞同：3
> 
> 时间：2013-02-20T22:18:10.520
> 
> 标签：iphone, ios, objective-c, avaudioplayer, mpvolumeview

我有一个包含多个 AVAudioPlayer 实例的应用程序。一个实例用于背景音乐，其他实例用于音效。

我希望用户能够让音乐通过空中播放而不是声音效果。我总是希望声音效果留在手机扬声器/耳机上。

MPVolumeView 允许我将 AVAudioPlayer 的所有实例路由到空中播放。但是，我想为我的应用程序中的每个 AVAudioPlayer 实例控制它。

这可能吗？还是我必须深入研究较低层的音频 API 才能获得这种级别的控制？

注意：由于我在我的应用程序中播放的音效的性质，我无法使用系统声音 API。我知道默认情况下永远不会去播放，但在这种情况下它不适合我。

# c# - 我不能只是将值添加到数组中，然后我想打印这些值

> ID：14991020
> 
> 赞同：0
> 
> 时间：2013-02-20T22:18:23.763
> 
> 标签：c#

/*这是一个使用 c# 向数组添加值然后打印它们的简单代码。但是为了做到这一点，我遇到了一个错误。可能的错误是什么？*/

```
 int size = 0, k = 0;
        Console.WriteLine("Enter size of array: ");            
        size = Console.Read();
        string[] array = new string[size];  

        for (int i = 0; i < size; i++)
        {
            Console.WriteLine("Enter at index: {0}", i);
            array[i] = Console.ReadLine();                
        }

        foreach (string s in array)
        {
            Console.WriteLine("Value at index: {0}", k++ + " = " + s);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:21:50.997

```
k++ 
```

在 foreach 循环中会起作用。

* * *

我实际上只是写：

```
Console.WriteLine("Value at index: {0} = {1}", k++, s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:22:38.237

两件事情：

1）字符串[]数组=新字符串[大小]；可能无法编译，你可以得到一个负数

2) Console.WriteLine("索引处的值：{0}", k + " = " + s); -> 我认为应该是 Console.WriteLine("索引处的值：{0}" + k + " = " + s);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:50:28.337

这有效（经过测试）：

```
 int size = 0, k = 0;
        Console.WriteLine("Enter size of array: ");
        size = int.Parse(Console.ReadLine());
        string[] array = new string[size];

        for (int i = 0; i < size; i++)
        {
            Console.WriteLine("Enter at index: {0}", i);
            array[i] =  Console.ReadLine();
        }

        foreach (string s in array)
        {
            Console.WriteLine("Value at index: {0} = {1}", k++, s);
        }

        Console.Read(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T22:31:21.257

我相信您可以通过更改 foreach 循环中的代码来实现您想要的，如下所示：

```
Console.WriteLine("Value at index {0}: {1}", k++, s); 
```

（看起来乔在他的回答中也已经有了这个解决方案）。

`{0}`是格式字符串参数后 Console.WriteLine 方法的第一个参数值的占位符。 `{1}`是格式字符串参数后 Console.WriteLine 方法的第二个参数值的占位符。

我`k++`用来增加`k`foreach 循环每次迭代的值。

foreach 循环简单地遍历一个`IEnumerable`对象（或者更具体地说，`IEnumerable<int>`在这种情况下是一个`IEnumerable`对象），并且对象的功能是它只是为您提供集合中的每个项目。它没有“索引”的概念，因此如果您想将索引与每个项目相关联，那么您需要自己处理。

请注意，对于某些集合，例如数组和列表，您将始终按照它们在这些结构中存在的顺序获取项目。但是，`IEnumerable`和`IEnumerable<T>`接口本身并不一定保证您将以任何特定顺序获取项目，或者如果您第二次循环它们，您将以相同的顺序获取项目。迭代的顺序由底层实现决定，`int[]`在这种情况下是一个整数数组 ( )。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T22:32:56.520

我认为 Console.Read() 会给你带来问题，请尝试 ReadLine() 并在必要时转换为 Int，并增加 k：

```
 int size = 0, k = 0;
 Console.WriteLine("Enter size of array: ");
 size = Convert.ToInt32(Console.ReadLine());
 string[] array = new string[size];

 for (int i = 0; i < size; i++)
 {
     Console.WriteLine("Enter at index: {0}", i);
     array[i] = Console.ReadLine();
 }

 foreach (string s in array)
 {
     Console.WriteLine("Value at index: {0}", k + " = " + s);
     k++;
 }

 Console.ReadLine(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T22:35:13.290

你为什么用`Console.Read()`？它读取与输入流中的每个字符相对应的*整数*，但直到您按下回车键（它本身将发送两个整数，一`13`和一`10`）。

也许你应该`Console.ReadLine()`改用？

# ruby-on-rails - 如何检查谷歌用户是否已经在我的网站上注册了一个帐户？

> ID：14991023
> 
> 赞同：1
> 
> 时间：2013-02-20T22:18:30.383
> 
> 标签：ruby-on-rails, ruby, omniauth, access-token

在我的网站中，用户可以使用他们的谷歌帐户注册。我可以很好地做到这一点，并且我存储了他们的访问令牌以及访问令牌何时过期。如果他们以前的访问令牌一旦过期，我也会得到一个新令牌。如果他们已经使用他们注册的谷歌帐户登录，我希望能够自动登录用户。这甚至可能吗？我正在使用omniauth-google-oauth2 和google-ruby-api-client，因为我想在将来使用google docs 和google calendar。

这是我处理用户保存和注册的方式。

```
def self.find_for_google_oauth2(access_token, signed_in_resource=nil)
      data = access_token.info
      user = User.where(:email => data["email"]).first

      unless user
          user = User.create(name: data["name"],
                   email: data["email"],
                   password: Devise.friendly_token[0,20],
                   access_token: access_token.credentials.token,
                   expiredate: DateTime.now + (access_token.credentials.expires_at/1000).seconds,
                   expires: access_token.credentials.expires
                  )
      end

      if (user.expires && (DateTime.now > user.expiredate))
        user.access_token = access_token.credentials.token
        user.expiredate = DateTime.now + (access_token.credentials.expires_at/1000).seconds
        user.expires = access_token.credentials.expires
      end

      user
  end 
```

# templates - 将变量从 Flexget make_html 插件传递到 jinja2 模板？

> ID：14991024
> 
> 赞同：0
> 
> 时间：2013-02-20T22:18:33.207
> 
> 标签：templates, jinja2

我对 jinja 完全陌生，对 python 还很陌生。我试图编写一个基本模板，flexget 使用它来自动编写一个 html 文件（使用 flexget [http://flexget.com/wiki/Plugins/make_html](http://flexget.com/wiki/Plugins/make_html)中的 make_html 插件）。我写的模板如下：

```
 <title>{{ tvdb_series_name }}</title>
     <meta name="description" content="{{ tvdb_rating }}" />
   </head>

   <body>

     <div id="content">
       <p>Why, hello there!</p>
     </div>

     </body>
    </html> 
```

我的问题是，运行 flexget 时出现错误，因为 tvdb_series_name 和 tvdb_rating 都未定义，但我找不到任何 flexget 文档来指示如何传递变量。我也已经知道它的定义是因为它在我的 config.yml 文件的早期部分中使用过。基本上我想知道是否有人让这个插件正常工作，或者有一种默认方法可以将传入的变量拉入我在 jinja2 文档中错过的 jinja 模板。任何有关这方面的帮助都会很棒，因为关于 flexget 的文档很少可以参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:31:31.463

您需要添加`thetvdb_lookup: yes`到任务中，它将使用所有相关的 tvdb_* 变量填充条目。

更多信息： http: [//flexget.com/wiki/Plugins/thetvdb_lookup](http://flexget.com/wiki/Plugins/thetvdb_lookup)

# c#-4.0 - 三状态变量的简单按位运算

> ID：14991029
> 
> 赞同：1
> 
> 时间：2013-02-20T22:18:45.417
> 
> 标签：c#-4.0, logic

我有一个对象可以有 3 个不同的布尔状态变量。规则是在任何时候只有三个中的一个可以为真。其他的都必须是假的。

我正在编写服务器端验证，需要确认此规则。有没有我可以使用的简单操作来测试只有一个状态为真？

我更愿意为此避免使用三重 If 逻辑。

更新：这不在 ASP.NET 中。正在传递的记录是 3 个布尔值。对象通过 json 序列化传递。所以我正在使用给我的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:26:31.020

如果您的对象具有三个`bool`属性并且只有一个应该是`true`，我喜欢这种方法：

```
public static int TrueCount(params bool[] booleans)
{
    return booleans.Count(b => b);
} 
```

然后很简单：

```
bool onlyOneTrue = TrueCount(obj.Pprop1, obj.Prop2, obj.Prop3) == 1; 
```

[**演示**](http://ideone.com/bvXvmX)

^(注意[`Enumerable.Count`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)需要`using System.Linq;`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:23:55.303

听起来您没有使用正确的类型 - 您可能应该使用具有三个值的枚举。

```
public enum ThreeThings
{
  state1,
  state2,
  state3
} 
```

对于枚举，给定一个有效的枚举值，它只能是三者之一。

# javascript - 使用谷歌应用脚 本在电子表格的一列中获取值

> ID：14991030
> 
> 赞同：36
> 
> 时间：2013-02-20T22:18:46.003
> 
> 标签：javascript, google-apps-script, google-apps

我想使用 Google 应用程序脚本从电子表格中的一列中获取一个字符串值 - 稍后将其与 if 条件进行比较。我搜索了互联网，发现了这个链接 - 对不起，如果这听起来很愚蠢，我是谷歌应用程序脚本的新手 - [https://developers.google.com/apps-script/class_spreadsheet](https://developers.google.com/apps-script/class_spreadsheet)

```
var values = SpreadsheetApp.getActiveSheet().getRange(2, 3, 6, 4).getValues(); 
```

我想这一定很有帮助，唯一的问题是我想从中获取值的列是动态的，所以我该如何设置该列的范围

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-20T22:37:12.087

如果您简单地使用：

`var values = SpreadsheetApp.getActiveSheet().getDataRange().getValues()`

您将获得工作表中按行和列索引的所有数据的 2 维数组。

因此，要获取 A 列中的值，您使用的第 1 行`values[0][0]`，对于 A 列`values[1][0]`，第 2 行，`values[0][2]`对于 C 列第 1 行，等等...

如果您需要在 for 循环中迭代（在单个列中）：

```
for(n=0;n<values.length;++n){
var cell = values[n][x] ; // x is the index of the column starting from 0
} 
```

如果您需要在 for 循环中迭代（在单行中）：

```
for(n=0;n<values[0].length;++n){
var cell = values[x][n] ; // x is the index of the row starting from 0
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-11-13T00:16:18.023

这是我用来获取动态列中的值的脚本：

```
var SS = SpreadsheetApp.getActiveSheet()
var Avals = SS.getRange("A1:A").getValues();
var numberOfValues = Avals.filter(String).length;
var RangeVals = SS.getRange(1,1,numberOfValues).getValues(); 
```

不过，我从来不必根据动态变化的起点来更改起始行。有兴趣看看如何做到这一点。

这是一个类似[的帖子](https://stackoverflow.com/questions/44562592/google-script-get-last-row-of-specific-column)。另一个例子[在这里](https://stackoverflow.com/questions/43108046/google-script-reducing-execution-time-below-exec-time-limit)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-03-12T05:36:15.777

`A`假设您希望使用[getRange(a1Notation)](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getrangea1notation)列中的所有行/单元格：

```
 var values = SpreadsheetApp.getActiveSheet().getRange("A:A").getValues(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-06T16:53:45.850

循环遍历行并获取列值的更简单方法..希望有所帮助

```
var values = SpreadsheetApp.getActiveSheet().getDataRange().getValues();

values.forEach( function(row) {
  row[4] // column index as 4
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-05T11:15:37.493

这个答案下面提到的所有函数都会输出一个一维数组，我觉得操作起来会更方便一些。

#### 解决方案1：

获取列或行的另一种方式：

```
function getColumn(activeSheet, columnIndex) {
  return activeSheet.getRange(1, columnIndex)
    .getDataRegion(SpreadsheetApp.Dimension.ROWS)
    .getValues()
    .flat();
}

function getRow(activeSheet, rowIndex) {
  return activeSheet.getRange(rowIndex, 1)
    .getDataRegion(SpreadsheetApp.Dimension.COLUMNS)
    .getValues()[0];
} 
```

**注意：**这只会获取给定方向上相邻单元格中的数据。

示例：1, 2, 3, blank, 4, blank, 5 ----- 4 和 5 将被跳过。另外，请参阅[`getDataRegion(dimension)`](https://developers.google.com/apps-script/reference/spreadsheet/range#getdataregiondimension)。如果数据区域内没有空单元格，这是一个理想的解决方案。

#### 解决方案2：

扩展@itazzad 的[解决方案](https://stackoverflow.com/a/66594718/11200630)，

```
// JS object containing indices as keys and capital letters as value.
const INDEX_ALPHABET = Array.from(new Array(26))
  .reduce((accumulatedObj, _, index) =>
    (accumulatedObj[index + 1] = String.fromCharCode(index + 65), accumulatedObj), {});

// uses a1 notation
function getColumn(activeSheet, columnIndex) {
  var columnA1Notation = INDEX_ALPHABET[columnIndex]
  return activeSheet.getRange(columnA1Notation + ':' + columnA1Notation)
    .getValues()
    .flat();
}

// uses a1 notation
function getRow(activeSheet, rowIndex) {
  return activeSheet.getRange(rowIndex + ':' + rowIndex) 
    .getValues()[0];
} 
```

见[`getRange(a1Notation)`](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getrangea1notation)。我不确定 R1C1 表示法和 A1 表示法是什么意思，但[这篇文章](https://www.automateexcel.com/basics/cell-references/#:%7E:text=cell%20references%20work.-,A1%20vs.%20R1C1%20References,-Excel%20worksheets%20contain)有点帮助。

### 解决方案3：

如果您认为[`getValues()`](https://developers.google.com/apps-script/reference/spreadsheet/range#getvalues)这可能是一个昂贵的调用并且随着`Range`大小的增加而增加了执行时间，那么请检查一下。基本上它获取最后一行或最后一列并使用它来减少`Range`而不省略任何相关数据。

```
function getRow(activeSheet, rowIndex) {
  var lastColumn = activeSheet.getDataRange().getLastColumn()
  return activeSheet.getRange(rowIndex, 1, 1, lastColumn)
    .getValues()[0]
}

function getColumn(activeSheet, columnIndex) {
  var lastRow = activeSheet.getDataRange().getLastRow()
  return activeSheet.getRange(1, columnIndex, lastRow, 1)
    .getValues()
    .flat()
} 
```

**注意：**如果您想获取行或列的切片，请查看[`getRange(row, column, numRows, numColumns)`](https://developers.google.com/apps-script/reference/spreadsheet/sheet#getrangerow,-column,-numrows,-numcolumns)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-03T09:30:16.233

我认为这是迄今为止最好的答案。假设您想要列“D1:D”的值

```
var numrows = SpreadsheetApp.getActiveSpreadsheet().getDataRange().getNumRows();
var columnValues = sheet.getRange(1,4,numrows,1).getValues(); 
```

# azure - 我可以将 Windows Azure 用作 DDoS 防护罩吗？

> ID：14991031
> 
> 赞同：1
> 
> 时间：2013-02-20T22:18:52.113
> 
> 标签：azure, ddos

我的服务器位于未受保护的设施中，没有任何类型的 DDoS 保护。我的问题是如何使用 Windows Azure 服务来保护我的服务器免受 DDoS 攻击？

# php - 命名空间/组/密钥标识

> ID：14991032
> 
> 赞同：1
> 
> 时间：2013-02-20T22:18:58.693
> 
> 标签：php, laravel

当使用 Laravel 4 配置类时，你可以调用`Config::set('namespace::file.key', 'new value')`它，它会遵循这个过程：

检查是否有一个名为`file`.
如果有，设置（在内存中）的值：

*   `key`关键_
*   在`file`文件中
*   来自`namespace`命名空间（大致翻译为包）

至`new value`

如果没有，
调用会被静默地翻译成`Config::set('namespace::config.file.key', 'new value')`哪个集合（在内存中）的值：

*   子`key`键
*   在`file`数组中
*   在`config`文件中
*   来自`namespace`命名空间（大致翻译为包）

至`new value`

这是因为你只处理内存，这很好用。

但是，如果您想实际保存调用时所做的更改怎么`Config::set(...`办？

您遇到的问题是，您如何知道是否要创建一个新组（又名文件），`file`如果它不存在则调用它，然后`key`在其中设置密钥？或者如果您使用速记来引用该`config`组？

我的想法是，除了几个例外，总是假设命名空间之后的第一部分（在 . 上爆炸）是文件/组，但我想知道它是否违反任何“laravelian”或有任何边缘情况我已经错过了？

* * *

`Config::set('key', 'value')`== `Config::set('config.key', 'value')` **exception**在文件中设置to
的值（无命名空间） `key``value``config`

* * *

`Config::set('namespace::key', 'value')`== `Config::set('namespace::config.key', 'value')` **exception**将命名空间文件中的
值设置为`key``config``namespace``value`

* * *

`Config::set('file.key', 'value')`
`key`将`file`文件中 的值设置为`value`（无命名空间）

* * *

`Config::set('namespace::file.key', 'value')`
将命名空间文件中`key`的 值设置为`file``namespace``value`

* * *

`Config::set('namespace::file.key.arrk1.arrk2', 'value')`
将命名空间文件中键`arrk2`的`arrk1`数组中 的值设置为`key``file``namespace``value`

* * *

# jquery - 可排序表 Jquery 脚本在 Firefox 中本地工作，但不托管

> ID：14991034
> 
> 赞同：0
> 
> 时间：2013-02-20T22:19:04.793
> 
> 标签：jquery, firefox, blogger

在无休止的搜索之后，我一直在尝试在博客中实现一个排序表，它可以在 Chrome/Safari 上运行，但是在 Firefox 上加载时它不起作用。

我已经在 Firefox 上本地尝试了该脚本，它可以工作。

我正在使用来自：[http ://tablesorter.com/docs/ 的 Tablesorter](http://tablesorter.com/docs/)

我的页面托管在这里：[http ://www.shellyinreallife.com/p/restaurants-nyc.html](http://www.shellyinreallife.com/p/restaurants-nyc.html)

脚本在这里：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script src="http://artknow.googlecode.com/svn-history/r14/trunk/Site/librarys/jquery.tablesorter.js" type="text/javascript"></script> 
<script type="text/javascript">
  $(document).ready(
     function() {
        $("#myTable").tablesorter({sortList: [[3,1], [4,0]]});
     }); 
</script> 
```

我尝试将功能从 更改`$(document).ready`为`$(document).load`，但没有奏效。还将脚本向下移动到表格所在的位置。

任何帮助都会很棒！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:02:08.740

原来这是一个有点愚蠢的问题，Blogger 需要帖子中的所有 javascript 都没有空格或换行符，所以一旦我把所有这些都放在我的脚本中，它就开始工作了。只是想在这里为可能正在寻找的其他人留下答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:48:41.443

这是基于 tablesorter 运行所需的：

1）可排序的标题位于`<th>`标签内的`<thead>`标签中。

2）确保`<script>`在调用之前包含 tablesorter 标签`.tablesorter()`

这些是`.tablesorter()`功能正常工作所必需的。

您也可以尝试更改`$(document).ready(`为`$(function() {`

希望这可以帮助。

# c++ - 错误：需要类型说明符。C++ 继承

> ID：14991037
> 
> 赞同：1
> 
> 时间：2013-02-20T22:19:12.840
> 
> 标签：c++, class, inheritance, compiler-errors, identifier

我一直在为我的班级创建 Shape 类文件，直到增加了大约 15 行代码，一切都很顺利。当我创建一个“矩形”对象时，我得到了标准的“预期类型说明符”之一。创建其他两个类（三角形和圆形）的对象可以完美地工作。我注意到它在我添加第二个向量（shapesTest2）后就出现了问题，所以也许它与此有关？

具体来说，有问题的行是：

```
shapes.push_back(new Rectangle(1, 2, 3, 4, Blue));
shapesTest2.push_back(new Rectangle(11, 22, 33, 44, Black)); 
```

错误列表说：

```
 IntelliSense: expected a type specifier     29
    IntelliSense: expected a type specifier     30
Error 1 error C2661: 'std::vector<_Ty>::push_back' : no overloaded function takes 5 arguments   31
Error 2 error C2143: syntax error : missing ';' before ')' 31
Error 3 error C2061: syntax error : identifier 'Rectangle' 31 
```

无论如何，这是 main.cpp 文件中的代码：

```
// main.cpp - Shape class test program
// Written by _______
#include <vector>
#include <Windows.h>
#include "Circle.h"
#include "Triangle.h"
#include "Rectangle.h"

using namespace std;

void main()
{
    // Container of Shapes
    vector<Shape*> shapes;
    vector<Shape*> shapesTest2; // Used for second test case of Move and Scale.

    // Must allocate my object on heap now

    Circle *myCircle = new Circle(10, 10, 100, Red);
    shapes.push_back(myCircle);

    // Create new, unnamed stack-allocated instance of a Circles and push_back() to vector
    shapesTest2.push_back(new Circle(20, 20, 20, Red));

    // Populate the Container with 2 Rectangles

    shapes.push_back(new Rectangle(1, 2, 3, 4, Blue));
    shapesTest2.push_back(new Rectangle(11, 22, 33, 44, Black));

    // Populate the Container with 2 Triangles

    shapes.push_back(new Triangle(3, 4, 5, 7, 15, 4, Black));
    shapesTest2.push_back(new Triangle(6, 7, 9, 8, 43, 15, Green));

// There's more to the file, but this is the only time this pops up, and the rest is
// just messing around with the vector<Shape*>. I figured I'd try and save time and
// space by only posting what's needed, but if you think that the error is caused by
// code below, ask me and I'll upload the rest of this main.cpp file

} 
```

作为参考，这是我的 Rectangle.h 文件：

```
#pragma once

#include <string>
#include "Shape.h"

using namespace std;

// Enum Colors = {Red, Blue, Green, Black, White}; is located in "Shapes.h"

class Rectangle : public Shape
{
public:
Rectangle(int x, int y, int width, int height, Colors color) : Shape(x, y, color)
{
    Width = width;
    Height = height;
}

virtual void Scale(float scaleFactor)
{
    Width = int(Width*scaleFactor);
    Height = int(Height*scaleFactor);
}

virtual void Draw() const // const b/c it doesn't alter Radius, X, Y, nor Color
{
    cout << "Rectangle of width " << Width << " and height " << Height << " with the top left corner at (" << X << ", " << Y << ") and color " << GetColor() << ".\n" << endl;
}

private:
int Width;
int Height;
}; 
```

感谢所有帮助人员，我已经尝试阅读所有其他问题，看起来人们刚刚忘记了其中的“#include” *_* “”部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:54:41.953

错误的原因是由于包含`windows.h`. 删除线

```
#include <Windows.h> 
```

一切都会编译。

**编辑：** 为避免这种冲突，您可以将类放在命名空间中。在标题中写下类似的内容：

命名空间 Foo { 类矩形 { ... }; }

# jquery - jQueryUI Buttonset CSS 问题

> ID：14991040
> 
> 赞同：3
> 
> 时间：2013-02-20T22:19:45.787
> 
> 标签：jquery, jquery-ui, jquery-ui-button

我有一组复选框，我使用 Buttonset 使它们看起来像按钮

```
<div id="ButtonList">

    <input type="checkbox" id='Check0' value="true" /><label for="Check0">0000</label>
    <input type="checkbox" id='check1' value='false' /><label for="check1">0100</label>
    <input type="checkbox" id='check2' value='true' /><label for="check2">0200</label>
    <input type="checkbox" id='check3' value='false' /><label for="check3">0300</label>

</div> 
```

和

```
$('#ButtonList').buttonset();

$('#ButtonList input[type=checkbox]').change(function () {
    $(this).css("color", "red");
}); 
```

我想要的是，当用户单击按钮以便更改按钮下的复选框时，颜色将在这种情况下变为红色。

我已经尝试了几个小时，但没有运气，谷歌也没有多大帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:47:18.947

您当前的代码将红色文本颜色添加到隐藏的复选框元素，而不是样式化的 jQuery UI 按钮集。

您可以仅使用 CSS 覆盖列表中活动按钮的 jQuery UI 的默认样式。

**JS**

```
$('#ButtonList').buttonset(); 
```

**CSS**

```
#ButtonList .ui-button.ui-state-active .ui-button-text {
    color: red;
    background-color: pink;
} 
```

[jsfiddle](http://jsfiddle.net/mbAwC/1/)

**更新：**

根据您的评论，听起来您想使用`.each()`迭代项目而不是使用 CSS。您可以通过选择正确的项目并调整 JS 中的样式来做到这一点。

```
$('#ButtonList input[type=checkbox]').change(function () {
    var jquiButtonLabel = $(this).next('.ui-button');
    var jquiButtonText = jquiButtonLabel.children('.ui-button-text');
    if (jquiButtonLabel.hasClass('ui-state-active')) {
        jquiButtonText.css({
            'color': 'red',
            'background-color': 'pink'
        });
    } else {
        jquiButtonText.css({
            'color': '',
            'background-color': ''
        });
    }
}); 
```

[jsfiddle](http://jsfiddle.net/mbAwC/2/)

# c++ - 如何编译 Apache Avro C++ 示例

> ID：14991042
> 
> 赞同：3
> 
> 时间：2013-02-20T22:20:21.953
> 
> 标签：c++, makefile, avro

可能是新手的错误，但是谁能告诉我我在这里做错了什么？
任何帮助深表感谢。

我写了这个简单的 Makefile：

```
CC=g++
INC=-I/usr/local/avro-cpp-1.7.2 -I/usr/local/boost_1_53_0

cpx : generated.cc
        $(CC) -o cpx generated.cc $(INC) 
```

这会产生这些错误：

```
g++ -o cpx generated.cc -I/usr/local/avro-cpp-1.7.2 -I/usr/local/boost_1_53_0
/tmp/ccYymUVo.o: In function `main':
generated.cc:(.text+0x84): undefined reference to `avro::memoryOutputStream(unsigned long)'
generated.cc:(.text+0xb0): undefined reference to `avro::binaryEncoder()'
generated.cc:(.text+0x11e): undefined reference to `avro::memoryInputStream(avro::OutputStream const&)'
generated.cc:(.text+0x150): undefined reference to `avro::binaryDecoder()'
collect2: ld returned 1 exit status
make: *** [cpx] Error 1 
```

这是 Avro 示例目录中提供的源代码：

```
#############################
# cpx.hh
#############################
#ifndef CPX_HH_1278398428__H_
#define CPX_HH_1278398428__H_

#include "boost/any.hpp"
#include "avro/Specific.hh"
#include "avro/Encoder.hh"
#include "avro/Decoder.hh"

namespace c {
struct cpx {
    double re;
    double im;
};

}
namespace avro {
template<> struct codec_traits<c::cpx> {
    static void encode(Encoder& e, const c::cpx& v) {
        avro::encode(e, v.re);
        avro::encode(e, v.im);
    }
    static void decode(Decoder& d, c::cpx& v) {
        avro::decode(d, v.re);
        avro::decode(d, v.im);
    }
};

}
#endif 
```

和

```
#############################
# generated.cc
#############################
#include "cpx.hh"
#include "avro/Encoder.hh"
#include "avro/Decoder.hh"

int
main()
{
    std::auto_ptr<avro::OutputStream> out = avro::memoryOutputStream();
    avro::EncoderPtr e = avro::binaryEncoder();
    e->init(*out);
    c::cpx c1;
    c1.re = 1.0;
    c1.im = 2.13;
    avro::encode(*e, c1);

    std::auto_ptr<avro::InputStream> in = avro::memoryInputStream(*out);
    avro::DecoderPtr d = avro::binaryDecoder();
    d->init(*in);

    c::cpx c2;
    avro::decode(*d, c2);
    std::cout << '(' << c2.re << ", " << c2.im << ')' << std::endl;
    return 0;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-30T05:14:32.170

1)

在您的输出中，您没有链接到 avrocpp 库，尽管您对 LD_LIBRARY_PATH 的评论表明您获得了可以使用的链接，但是示例程序在执行时未能找到该库。您的编译行需要链接器选项：`-l avrocpp`

2)

如果 avrocpp 库 .so 未安装在运行时链接器配置为搜索的路径中，则可以使用链接器选项将库路径添加到二进制文件本身中`-rpath`。

示例 1：假设您的 avrocpp 库安装在 /usr/local/lib 中（即 /usr/local/lib/libavrocpp.so），并且您的运行时链接器不在 /usr/local/lib 中查找，`rpath`通过添加添加这个选项到你的编译器命令行：

`-Wl,-rpath,/usr/local/lib`

示例 2：假设您的 avrocpp 库安装在 /usr/local/avro-cpp-1.7.2/lib 中（即 /usr/local/avro-cpp-1.7.2/lib/libavrocpp.so），`rpath`通过添加添加这个选项到你的编译器命令行：

`-Wl,-rpath,/usr/local/avro-cpp-1.7.2/lib`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T22:18:03.463

尝试使用带有选项的 avrogencpp -i < schema_file > -o < header_file >

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T16:13:35.770

*   下载并编译 Avro c++ 源[https://stackoverflow.com/questions/40889705/how-to-compile-apache-avro-c-on-windows](https://stackoverflow.com/questions/40889705/how-to-compile-apache-avro-c-on-windows)（这将生成“ **avrogencpp.exe** ”）
*   下载 avro-tools [http://avro.apache.org/releases.html#Download](https://stackoverflow.com/questions/40889705/how-to-compile-apache-avro-c-on-windows)，和（安装了**java**）
*   跑：

    java -jar avro-tools-1.8.1.jar idl ***file.avdl*** > ***file.json***

*   编辑生成的json文件，删除以下内容

    1.  如果您在开头所需的结构之前有任何行，请删除它们。（我有“协议”：“**文件**”，“命名空间”：“ **some_optional_namespace** ”，“**类型**”:)
    2.  **消息**条目（在底部）
*   如果您在同一个 json 文件中定义了多个结构，请用“ **[]** ”将它们全部括起来（不同结构之间应该有逗号，并确保最后一个结构没有以“ **，** ”开头

*   运行 avrogencpp.exe -p - -n **some_optional_namespace** -U --input ***file.json*** --output ***file.hh***

# jquery - 使用 AJAX 在 Rails 中自动保存表单

> ID：14991046
> 
> 赞同：7
> 
> 时间：2013-02-20T22:20:48.253
> 
> 标签：jquery, ruby-on-rails, ajax, post-parameter

我正在尝试为 Post#new 操作自动保存表单。每隔一分钟左右，我想 POST 到 Post#autosave，然后我会检查 first_or_create 并保存/更新 Posts 表中的记录。不过我的问题是，我无法再从表单中访问 POST 参数。我正在尝试这样做：

```
$(function() {
  if ($("#new_post").length > 0) {
    setTimeout(autoSavePost, 60000); 
  }    
});

function autoSavePost() {
  $.ajax({
    type: "POST",
    url: "/posts/autosave",
    dataType: "script",
    success: function(data) {
      console.log(data);
    }
  });
  setTimeout(autoSavePost, 60000);
} 
```

我有这条路线：

```
post 'posts/autosave', as: :autosave_post_path 
```

问题是，服务器日志显示参数哈希仅包含：action 和：controller。我怎样才能访问作为 POST 数据的一部分发送的等效内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T22:23:43.447

您还需要通过[序列化](http://api.jquery.com/serialize/)方法传递`data`参数：

```
$.ajax({
  type: "POST",
  url: "/posts/autosave",
  data: $("#new_post").serialize(),
  dataType: "script",
  success: function(data) {
    console.log(data);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:23:33.723

看一下 serialize() 函数：[http](http://api.jquery.com/serialize/) ://api.jquery.com/serialize/ ：您可以使用它来创建一个数据数组以作为参数传递给您的控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-22T09:17:25.543

**所以，我正在解释新的表单脚本**

```
function autoSavePost() {
  $.ajax({
      type: "POST",
      url: '/quotes',
      data: $("#new_post").serialize(),
      dataType: "script",
  });
} 
```

> 将发布请求发送到控制器，控制器在将对象插入数据库后呈现编辑表单，或者更好地说是在持久化记录后。

渲染编辑页面后，我们在那里编写了一个脚本，以在一段时间后更新对象

```
function autoSavePost() {
    $.ajax({
      type: "PATCH",
      url: "/post/<%= post.id %>",
      data: $("#edit_post").serialize(),
      dataType: "script",
      success: function(data) {
        console.log("data")
      }
    });
    setTimeout(autoSavePost, 60000);
  } 
```

> 因此，这种方法非常有用，它是一个完全有效的自动保存表单功能，它可以在任何类型的对象上实现。谢谢 ！

# asp.net-mvc-3 - ko.bindingHandlers.validationCore.init 不起作用

> ID：14991055
> 
> 赞同：0
> 
> 时间：2013-02-20T22:21:15.397
> 
> 标签：asp.net-mvc-3, knockout.js, knockout-validation

我正在尝试自定义绑定以作为日期选择器输入：代码在这里：[http ://sdrv.ms/Xc5HZw](http://sdrv.ms/Xc5HZw)

我有以下代码，但验证在无效时不会突出显示控件：

```
ko.bindingHandlers.datepicker = {
        init: function (element, valueAccessor, allBindingsAccessor) {
           // code here

          ko.bindingHandlers.validationCore.init(element, valueAccessor, allBindingsAccessor);

        },
        update: function (element, valueAccessor) {

           // code here
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T17:17:04.463

我有一个非常相似的问题......我添加 ko.validation.js 的那一刻，init: 函数和更新都被跳过了......函数内部没有任何东西会触发......

你至少打了 ko.bindingHandlers.validationCore 方法吗？

# python - 试图在python中将字符串转换为json

> ID：14991056
> 
> 赞同：0
> 
> 时间：2013-02-20T22:21:15.043
> 
> 标签：python

我是 python 新手，我很确定我在做一些非常愚蠢的事情。

我有一个字符串：

```
s = '{"l":1,"oE":{"n":"name","rN":["1","2","3","3","5","6","7","8","9","10"],"dir":"out","ed":["1","1","1","1","1","1","1","1","1","1"]}' 
```

我做了 json.loads(s)

但我得到一个错误？

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/json/__init__.py", line 328, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 365, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 381, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting , delimiter: line 1 column 72 (char 72) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:23:26.780

您的代码中缺少引号。也是一个闭括号。代替：

```
s = '{"l":1,"oE":{"n":"name","rN":["1","2","3","3","5","6","7","8","9","10],"dir":"out","ed":["1","1","1","1","1","1","1","1","1","1"]}' 
```

采用

```
s = '{"l":1,"oE":{"n":"name","rN":["1","2","3","3","5","6","7","8","9","10"],"dir":"out","ed":["1","1","1","1","1","1","1","1","1","1"]}}' 
```

您可以从堆栈跟踪中弄清楚这一点：

```
ValueError: Expecting , delimiter: line 1 column 72 (char 72) 
```

如果您查看该行中的第 72 个字符，您将看到错误发生的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:23:06.547

`"10]`好像少了一个`"`。试试`"10"]`吧。

# php - MySQL 查询优化（花费的时间太长）

> ID：14991066
> 
> 赞同：1
> 
> 时间：2013-02-20T22:22:12.807
> 
> 标签：php, sql, performance, optimization

我使用以下准备好的语句：

```
 SELECT * 
    FROM 
        c_members,c_users,c_positions,c_done_meetings
    WHERE 
        c_positions.POS_ID=c_users.POS_ID 
        AND c_members.CLUB_ID = ? 
        AND USER_POINTS >= ?
        AND USER_POINTS <= ? 
        AND c_users.POS_ID LIKE ? 
        AND MEM_ACADEMY LIKE ? 
        AND MEM_SEX LIKE ? 
        AND MEM_GRADELVL LIKE ? 
        AND MEM_GPA >= ? 
        AND MEM_GPA <= ? 
        AND MEM_ARCHIVE = 0 
GROUP BY 
    c_members.MEM_ID, c_members.CLUB_ID 
HAVING 
    SUM(c_done_meetings.MEDONE_ATTEND = 'u') >= 1 
ORDER BY 
    USER_POINTS DESC 
```

但是，此查询需要 21.971405982971 秒才能加载 111 条记录。当我删除“Having SUM(...)”子句时，性能提高了 100%。有没有办法更好地优化它？

编辑：（表结构）

```
 CREATE TABLE IF NOT EXISTS `c_done_meetings` (
  `MEM_ID` int(11) NOT NULL,
  `CLUB_ID` int(11) NOT NULL,
  `MEETING_ID` int(11) NOT NULL,
  `MEDONE_ATTEND` varchar(1) NOT NULL COMMENT 'E=excused, U=unexcused, P=present',
  UNIQUE KEY `unique` (`MEM_ID`,`CLUB_ID`,`MEETING_ID`),
  KEY `MEETING_ID` (`MEETING_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

    CREATE TABLE IF NOT EXISTS `c_members` (
  `MEM_ID` int(11) NOT NULL,
  `CLUB_ID` int(11) NOT NULL,
  `MEM_FIRST` varchar(50) NOT NULL,
  `MEM_MIDDLE` varchar(50) DEFAULT NULL,
  `MEM_LAST` varchar(50) NOT NULL,
  `MEM_SEX` tinyint(1) NOT NULL COMMENT '0-Male 1-Female',
  `MEM_EMAIL` varchar(100) DEFAULT NULL,
  `MEM_GRADELVL` int(11) NOT NULL,
  `MEM_ACADEMY` varchar(50) DEFAULT '',
  `MEM_GPA` double DEFAULT '0',
  `MEM_ADDRESS` varchar(500) DEFAULT NULL,
  `MEM_CITY` varchar(100) DEFAULT NULL,
  `MEM_STATE` varchar(100) DEFAULT NULL,
  `MEM_ZIP` int(11) DEFAULT NULL,
  `MEM_TELEPHONE` varchar(25) DEFAULT NULL,
  `MEM_AP` tinyint(1) NOT NULL,
  `MEM_HONORS` tinyint(1) NOT NULL,
  `MEM_ESOL` tinyint(1) NOT NULL,
  `MEM_HISP` tinyint(1) NOT NULL,
  `MEM_WHITE` tinyint(1) NOT NULL,
  `MEM_MULTI` tinyint(1) NOT NULL,
  `MEM_NATIVE` tinyint(1) NOT NULL,
  `MEM_BLACK` tinyint(1) NOT NULL,
  `MEM_ASIAN` tinyint(1) NOT NULL,
  `MEM_EXTRA` varchar(10000) DEFAULT NULL,
  `MEM_ARCHIVE` tinyint(1) NOT NULL DEFAULT '0',
  UNIQUE KEY `MEM_ID` (`MEM_ID`,`CLUB_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

    CREATE TABLE IF NOT EXISTS `c_positions` (
  `POS_ID` int(11) NOT NULL AUTO_INCREMENT,
  `CLUB_ID` int(11) NOT NULL,
  `POS_NAME` varchar(20) NOT NULL,
  `POS_DESC` varchar(500) NOT NULL,
  `POS_ADMIN` tinyint(1) NOT NULL,
  `POS_ATN_VIEW` tinyint(1) NOT NULL,
  `POS_ATN_CHKIN` tinyint(1) NOT NULL,
  `POS_ATN_FINALIZE` tinyint(1) NOT NULL,
  `POS_MEM_VIEW` tinyint(1) NOT NULL,
  `POS_MEM_ADD` tinyint(1) NOT NULL,
  `POS_MEM_EDIT` tinyint(1) NOT NULL,
  `POS_POS_VIEW` tinyint(1) NOT NULL,
  `POS_POS_ADD` tinyint(1) NOT NULL,
  `POS_POS_EDIT` tinyint(1) NOT NULL,
  `POS_MEET_VIEW` tinyint(1) NOT NULL,
  `POS_MEET_ADD` tinyint(1) NOT NULL,
  `POS_MEET_EDIT` tinyint(1) NOT NULL,
  `POS_EVENT_VIEW` tinyint(1) NOT NULL,
  `POS_EVENT_ADD` tinyint(1) NOT NULL,
  `POS_EVENT_EDIT` tinyint(1) NOT NULL,
  `POS_EVENT_UPDATE` tinyint(1) NOT NULL,
  `POS_REPORT_VIEW` tinyint(1) NOT NULL,
  `POS_ARCHIVE_VIEW` tinyint(1) NOT NULL,
  `POS_ANNOUNCEMENTS` tinyint(1) NOT NULL,
  `POS_WEB_CUSTOM` tinyint(1) NOT NULL,
  PRIMARY KEY (`POS_ID`),
  UNIQUE KEY `UNIQUE_NAME` (`CLUB_ID`,`POS_NAME`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=14 ;

    CREATE TABLE IF NOT EXISTS `c_users` (
  `MEM_ID` int(11) NOT NULL,
  `CLUB_ID` int(11) NOT NULL,
  `USER_PIN` int(11) NOT NULL,
  `USER_POINTS` double NOT NULL,
  `POS_ID` int(11) NOT NULL,
  `USER_ARCHIVE` tinyint(1) NOT NULL DEFAULT '0',
  UNIQUE KEY `MEM_ID` (`MEM_ID`,`CLUB_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

编辑 2：是的，所有 id 都已编入索引，SUM(...) >= # 计算错过的会议次数。# 是用户设置的参数（我只是硬编码了一个 1 用于测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:33:16.420

您需要索引 WHERE 子句中使用的所有字段，在所有表连接的字段上（您需要明确说明您的连接条件，因为现在，您正在获得笛卡尔连接），用于分组的所有字段以及用于排序的所有字段。

最后一个问题是`HAVING`那里的条款。您根本无法使用索引，因为它是一个计算值。如果这是您将在系统中经常使用的查询（即不仅仅是用于报告），您可能会考虑添加一个可以用作此过滤目的的标志的字段。每当您`c_done_meetings.MEDONE_ATTEND = 'u'`在任何查询中设置时，您还可以为成员或用户或与之关联的任何内容设置此标志，以便您在 WHERE 子句中拥有一个易于过滤的字段。

`u`除此之外，您实际上可以通过在子选择中获得具有该值的用户或成员的减少列表，然后使用该子选择作为表进行连接，从而获得更好的性能。

编辑：

在看到你的实际表结构后，我可以清楚地看到你需要在哪里添加索引。我也想知道为什么你有表`c_users`并且`c_members`具有相同的主键。为什么这些不仅仅是一张桌子？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:32:16.307

一些突然出现在我身上的东西：

你用得很多。尝试用你的 php 代码做一些事情，这样就没有必要了。例如，mem_sex 的选择数量有限。将前端设置为单选按钮或下拉菜单，以便发送一个可以使用 = 而不是 like 的值。

第二，如果在 select 子句中添加 sum() 和适当的 group by 子句，它应该运行得更快。值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:36:47.810

您可以对表进行非规范化并将字段添加到**c_members代表您的 SUM(c_done_meetings.MEDONE_ATTEND = 'u') >= 1 但是在更新****c_done_meetings**时，您需要始终更新该字段（可以使用触发器完成）

还要尽量避免 LIKE 条件。使用 = insead（至少 SEX 是可能的）

# android - 在 MonoDroid 中以编程方式隐藏键盘

> ID：14991071
> 
> 赞同：1
> 
> 时间：2013-02-20T22:22:33.723
> 
> 标签：android, android-layout, xamarin.android

我正在使用以下代码来检测用户在键盘上按下 Return 键：

```
EditText etMyEditText = FindViewById<EditText>(Resource.Id.etMyEditText);
etMyEditText.KeyPress += (intentSender, e) =>
{
    if (e.Event.Action == KeyEventActions.Down && e.KeyCode == Keycode.Enter)
    {
        e.Handled = true;
    }
}; 
```

但是我想在他们按下返回键后关闭键盘。

谁能阐明如何做到这一点？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T00:04:53.083

这段代码将以编程方式关闭软键盘。

```
InputMethodManager manager = (InputMethodManager) GetSystemService(InputMethodService);
manager.HideSoftInputFromWindow(etMyEditText.WindowToken, 0); 
```

传递给的第二个参数`manager.HideSoftInputFromWindow`是[`flag`](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#hideSoftInputFromWindow%28android.os.IBinder,%20int%29)

> 提供额外的操作标志。当前可能为 0 或设置了[HIDE_IMPLICIT_ONLY](http://developer.android.com/reference/android/view/inputmethod/InputMethodManager.html#HIDE_IMPLICIT_ONLY)位。

# highcharts - 更改 Highcharts 中特定数据点的工具提示的背景颜色

> ID：14991075
> 
> 赞同：1
> 
> 时间：2013-02-20T22:22:41.517
> 
> 标签：highcharts

我有一个 Highcharts 折线图并启用了工具提示，但是，我想为图表上的单个数据点更改工具提示的背景颜色。
有可能这样做吗？
到目前为止我所拥有的
`tooltip: { formatter: function () { return this.y; }, backgroundColor: '#68BD49', borderColor: '#000000', borderWidth: '1' },`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:28:08.983

是的，可以通过使用 HTML 选项并定义自定义参数。显然，您可以使用 CSS 样式/类禁用填充/边距，但以最简单的方式，您可以通过以下方式实现：

```
 tooltip: {
        useHTML:true,
        formatter: function() {
            console.log(this);
            if(this.point.customBck)
                return '<div style="background-color:red;">The value for <b>'+ this.x + '</b> is <b>'+ this.y +'</b></div>';
            else
                return '<div>The value for <b>'+ this.x + '</b> is <b>'+ this.y +'</b></div>';
        }
    }, 
```

[http://jsfiddle.net/XnLpH/1/](http://jsfiddle.net/XnLpH/1/)

# mysql - 当结果是单行时，MySQL distinct 或 group by 结合没有给出结果

> ID：14991077
> 
> 赞同：1
> 
> 时间：2013-02-20T22:22:47.570
> 
> 标签：mysql, sql, group-by, distinct

看来我的查询并不完全符合我的要求。只要结果是 2 行或更多行，查询就会得到结果。当我得到一行时，查询没有得到任何结果。

在`SELECT`I can do`DISTINCT (ct.name)`但这给出了与 group by 相同的问题。

```
SELECT  
   ct.name, 
   ( 3959 * acos(cos(radians(52.779716)) * cos(radians( com.gps_lat )) * cos(radians( com.gps_lon ) -
   radians(21.84803)) + sin( radians(52.779716) ) * sin( radians( com.gps_lat )))) as distance 
FROM cuisine_types as ct 
```

离开加入公司以检查公司是否附属于美食类型

```
LEFT JOIN company AS com ON (com.cuisine_type_id = ct.id) 
```

在这里，我将结果分组，因此没有美食类型出现两次。这似乎只在结果为 2 行或更多行时才有效......

```
GROUP BY ct.name 
```

在这里，我正在检查公司的距离是否在用户偏好的搜索范围内

```
HAVING distance < 20; 
```

例如，如果我将“快餐”、“素食”和“健康”作为美食类型，那么无论搜索距离中有多少公司与该美食类型相关，我都只想要每种美食类型中的一种。因此，我使用 GROUP BY 过滤掉双重美食类型，希望这有助于理解我在此查询中的方法。

注意：公司只有一种美食类型。

没有注释的完整sql查询在这里

> SELECT ct.name, ( 3959 * acos( cos( 弧度(52.779716) ) * cos( 弧度( com.gps_lat ) ) * cos( 弧度( com.gps_lon ) - 弧度(21.84803) ) + sin( 弧度(52.779716) ) * sin( 弧度( com.gps_lat ) ) ) ) 作为距离从美食类型作为 ct 左加入公司作为 com ON (com.cuisine_type_id = ct.id) GROUP BY ct.name HAVING distance < 20;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:47:45.130

尝试这个：

```
SELECT 
   ct.name, 
   min( ( 3959 * acos( cos( radians(52.779716) ) * cos( radians( com.gps_lat ) ) * cos( radians( com.gps_lon ) - radians(21.84803) ) + sin( radians(52.779716) ) * sin( radians( com.gps_lat ) ) ) ) ) as distance 
FROM
   cuisine_types as ct 
      LEFT JOIN company AS com ON (com.cuisine_type_id = ct.id) 
GROUP BY 
   ct.name 
HAVING 
   distance < 20; 
```

# django - Pip 升级安装错误的 Django 版本：怎么办？

> ID：14991078
> 
> 赞同：1
> 
> 时间：2013-02-20T22:22:50.633
> 
> 标签：django, version-control, pip

我在安全外壳中，并决定`--upgrade`使用我正在使用的 django 应用程序之一。我输入`pip install django-guardian --upgrade`并注意到它还在下载和解压缩比我目前使用的更早版本的 Django：1.3。哎呀！

我的调试屏幕显示我正在使用 django 1.4.2 和 python 2.7，但由于我`upgraded`监护我的应用程序工作方式不同，可能是因为 django 版本冲突？重要的区别在于使用`django-ratings`. 使用[django-ratings](https://github.com/Kronuz/django-ratings/blob/master/djangoratings/views.py#L128)投票时，重定向用户并记录投票时不会显示任何消息：

```
def authentication_required_response(self, request, context):
    message = _("You must be logged in to vote.")
    response = HttpResponse(message)
    response.status_code = 403
    return response 
```

现在显示一个空白页。我没有更改 django 应用程序中的任何内容，但现在它的行为有所不同。`--upgraded`我应该如何解决这个问题以在我错误地混淆之前将我的应用程序恢复到以前的状态？谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:32:06.873

我强烈建议使用[virtualenv](http://www.virtualenv.org/en/latest/)。它允许您控制机器上每个单独的 django 应用程序的环境。您创建一个虚拟环境，安装所需的包，然后在启动应用程序之前启动环境。

它可以像在文件中列出您的应用程序一样简单，然后在您的 virtualenv 中`requirements`安装该文件 -`requirements`

```
psycopg2==2.4.2
Django==1.4.3
Markdown==2.0
http://www.crummy.com/software/BeautifulSoup/download/3.x/BeautifulSoup-3.0.7a.tar.gz
Pygments==1.3.1
Twisted==10.0.0 
```

[这里](http://www.saltycrane.com/blog/2009/05/notes-using-pip-and-virtualenv-django/)有一个很棒的教程。

# ssis - SSIS 临时临时表

> ID：14991084
> 
> 赞同：0
> 
> 时间：2013-02-20T22:23:10.930
> 
> 标签：ssis

数据流任务> ole DB Source1, ole DB Source2 > Union All > Ole DB Destination(table)。

与其将数据集/结果集推送到 Ole DB 目标中，我可以暂时将数据集/结果集保存在某个地方并稍后引用** 数据集。

参考**：意思是根据该结果集/数据集编写 sql。

这还可能吗。让我知道。

注意：2 Ole DB Sources（两者都有不同的连接，不同的服务器，但如果重要的话，两者都是 MSSQl）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:17:20.120

您将不得不在 SQL Server 上使用某种临时表来执行此类操作。记录集目标不支持 SQL 化语句。在查找转换中，您可以在高级编辑器选项卡中修改 SQL 查询（仅限部分和完全缓存模式）。

# iphone - 从我们的应用程序在 ios 中的“facebook 页面”上共享文本

> ID：14991085
> 
> 赞同：0
> 
> 时间：2013-02-20T22:23:21.373
> 
> 标签：iphone, ios, objective-c, ipad, facebook-graph-api

我有一个 Facebook 页面，我想在该页面上分享一些文本，就像我们在应用程序的“我/提要”上分享的状态一样。

请有人建议我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:47:49.383

这里有一些代码片段可以帮助您，但您也应该看看 Facebook 开发人员示例，这些示例非常好。

```
 // To log in to Facebook with permission to post...
        m_Facebook = [[Facebook alloc] initWithAppId:YOUR_FACEBOOK_APPID
                                     andDelegate:self];
        m_FacebookPermissions = [[NSArray 
            arrayWithObjects:/*@"read_stream",*/ @"publish_stream", nil] retain];
        [m_Facebook authorize:m_FacebookPermissions]; 
```

在 fbDidLogin 回调告诉您您已登录之后，在其他一些方法中：

```
// After successful login…
NSMutableDictionary *params = [NSMutableDictionary  dictionaryWithObjectsAndKeys:
                               WHAT_YOU_WANT_TO_SAY, @"message",
                            nil];
[m_Facebook requestWithGraphPath:@"/me/feed"
                      andParams:params
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:28:51.177

对于 iOS 6.0，您可以执行以下操作：

```
 NSString *text1 = [NSString stringWithFormat:@"%@ %@", NSLocalizedString(@"Check out this nice'... ", @""), self.title];
    NSString *text2 = [NSString stringWithFormat:@"%@ %@", NSLocalizedString(@"in", @""), self.restaurant.title];
    NSString *text3 = NSLocalizedString(@"Sent from FoodRock Menus App", @"");
    NSURL *appURL = [NSURL URLWithString:@"http://testappstorelink.com"];
    NSArray *activityItems = [NSArray arrayWithObjects:text1, text2, text3, appURL, photo, nil];
    UIActivityViewController *actVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems
                                                                        applicationActivities:nil];
    actVC.excludedActivityTypes = [NSArray arrayWithObjects:UIActivityTypeAssignToContact, UIActivityTypeCopyToPasteboard,
                                   UIActivityTypePrint, UIActivityTypeSaveToCameraRoll, nil];
    actVC.completionHandler = ^(NSString *activityType, BOOL completed){
        DLog(@"ACTIVITYTYPE: %@ FINISHED: %@", activityType, completed ? @"YES" : @"NO");
        if (completed) {
            NSString *socialString = @"";
            if ([activityType containsSubstring:@"PostToTwitter"]) {
                socialString = @"Twitter";
            } else if ([activityType containsSubstring:@"PostToFacebook"]) {
                socialString = @"Facebook";
            } else if ([activityType containsSubstring:@"Message"]) {
                socialString = @"Message";
            } else if ([activityType containsSubstring:@"Mail"]) {
                socialString = @"Mail";
            }
            [[FRNWAchievementsController controller] reportSocialShareEvent:socialString menuItem:self];
        }
    };
    return actVC; 
```

# reporting-services - ssrs 中的两个数据集问题？

> ID：14991086
> 
> 赞同：0
> 
> 时间：2013-02-20T22:23:23.340
> 
> 标签：reporting-services, dataset

我有一个列名“APPs % of total”，它需要填充两个不同的数据集。这似乎不起作用。任何提示将不胜感激。谢谢

```
=(Fields!AppQty.Value/Fields!AppQty.Value,"second dataset") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T02:48:51.000

问题是：SSRS 如何知道从第二个数据集中提取哪一行来获取字段？所以你必须使用聚合或查找：

**方法一：简单聚合在当前级别**

通常不需要仅用于总和的辅助数据集。您可以使用以下公式在当前数据集中的组级别进行聚合：

```
=Fields!AppQty.Value / SUM(Fields!AppQty.Value, "table1_Group1") 
```

where`table1_Group1`是汇总数据的组。

**方法2：聚合整个数据集**

在数据集级别聚合当前数据集或辅助数据集：

```
=Fields!AppQty.Value / SUM(Fields!AppQty.Value, "SomeDataset") 
```

**方法 3：从另一个数据集中查找值**

您将需要一个在组级别汇总值的数据集。您通常使用方法 1 和分组来实现此结果，但这里是为了完整性。因此，假设您按 分组`DepartmentId`，您将拥有一个像这样聚合的数据集：

```
SELECT DepartmentId, SUM(AppQty) AS AppQty
FROM MyTable
GROUP BY DepartmentId 
```

然后从当前行（在当前表的数据集中）为部门查找适当的值：

```
=Fields!AppQty.Value / Lookup(Fields!DepartmentId.Value, Fields!DepartmentId.Value, Fields!AppQty.Value, "SummaryDataset") 
```

因此 将来自该数据集的 与in`Lookup`匹配并返回值。`DepartmentId``DepartmentId``SummaryDataset``AppQty`

# linq - 使用逻辑名称时 CRM 2011 LINQ 无效的“位置”条件

> ID：14991087
> 
> 赞同：0
> 
> 时间：2013-02-20T22:23:22.867
> 
> 标签：linq, where, crm

这里明显的尝试是通过特定的帐户 ID 接听电话，并且只接听具有“帐户”相关对象类型的电话（这只是完整通话的基本部分，但即使这样也失败了）。

```
var linqPhonecalls = from pc in svcContext.PhoneCallSet
     where ((pc.RegardingObjectId.Id == account.Id) && (pc.RegardingObjectId.LogicalName == "account"))
     select new
     {
         subj = pc.Subject,
         stateCD = pc.StateCode,
     }; 
```

通过对网络的研究，我遇到了这个想法（[http://informeddynamicscrm.blogspot.com/2012/01/linq-restrictions-with-crm-2011-xrm.html](http://informeddynamicscrm.blogspot.com/2012/01/linq-restrictions-with-crm-2011-xrm.html)）并尝试了以下方法：

```
pc.RegardingObjectId.LogicalName.Equals("account") == true 
```

以及使用 Contains() 和我可以尝试的任何其他比较操作。似乎这里的主要问题是使用.LogicalName（也尝试过.Name）

因为我无法让它发挥作用，所以我暂时不考虑那个检查，但我真的很想把它放在那里，因为我将加入其他相关类型并想要整理东西。

# perl - Net::Openssh (host ,async =>1) 选项中的错误处理

> ID：14991088
> 
> 赞同：1
> 
> 时间：2013-02-20T22:23:25.813
> 
> 标签：perl, perl-module

我正在使用 Openssh 模块使用 (async => 1) 选项连接到主机。如何为那些无法连接的主机捕获连接错误。我不希望错误出现在终端中，而是存储在数据结构中，因为我想最终将所有数据格式化为 cgi脚本。当我运行脚本时，有连接问题的主机会在终端中抛出错误。代码会进一步执行并尝试在断开连接的主机上运行命令。我想隔离断开连接的主机。

```
my (%ssh, %ls);        #Code copied from CPAN Net::OpenSSH
my @hosts = qw(host1 host2 host3 host4 );
 # multiple connections are stablished in parallel:
  for my $host (@hosts) {
  $ssh{$host} = Net::OpenSSH->new($host, async => 1); 
  $ssh{$host}->error and die "no remote connection "; <--- doesn't work here! :-(  
  }
# then to run some command in all the hosts (sequentially):
 for my $host (@hosts) {
 $ssh{$host}->system('ls /');
} 
```

$ssh{$host}->error 并死掉“没有远程连接不起作用”。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:07:20.817

您运行异步连接。所以程序继续工作并且在连接建立时不要等待。在*new* with *async*选项之后，您尝试检查错误，但它没有被定义，因为连接正在进行中并且没有关于错误的信息。

据我了解，您需要在第一个循环后等待，直到连接过程得到结果。

尝试使用 ->wait_for_master(0);

> 如果给出错误值，它将完成连接过程并等待多路复用套接字可用。
> 
> 连接成功后返回真值。如果连接过程失败或尚未完成，则返回 False（然后，可以使用“错误”方法来区分这两种情况）。

```
for my $host (@hosts) {
    $ssh{$host} = Net::OpenSSH->new($host, async => 1); 
}

for my $host (@hosts) {
    unless ($ssh{$host}->wait_for_master(0)) {
        # check $ssh{$host}->error  here. For example delete $ssh{$host}
    }
}

# Do work here 
```

我不检查此代码。

PS：对不起我的英语。希望它可以帮助你。

# android - adb devices 可以看到我的手机，但是 eclipse Android Device Chooser 没有

> ID：14991090
> 
> 赞同：0
> 
> 时间：2013-02-20T22:23:31.287
> 
> 标签：android, eclipse, debugging, sdk, adb

我正在使用 Windows，SDK。我的设备是索尼爱立信 xperia mini pro (SK17i)。我已将其插入，连接 USB 调试等。我已经尝试过重启手机以及 PC，以及许多其他解决方案，但没有一个对我有用。

如主题`adb devices`显示我的设备。在 eclipse LogCat 中，当我在设备上做某事时，我可以看到新条目。但是当我运行我的项目时，Android 设备选择器中的设备列表是空的。

有任何想法吗？

# c - 方向，方向对象

> ID：14991091
> 
> 赞同：0
> 
> 时间：2013-02-20T22:23:33.290
> 
> 标签：c, animation

如何根据方向移动对象？我的意思是，我在一个位置有一个立方体，我想绕 Y 轴旋转并根据它们的方向移动。然后再次移动和旋转以改变你的方向。像这样的东西：

![在此处输入图像描述](../Images/f00176cf39ac0e5475b7be99d5d02ec4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T12:47:43.260

在 JS 中你可以尝试这样的事情：

```
var previousPosition = [x, y]; //change x and y with the coordinate of the object
var nextPosition = [x, y]; //change x and y with the new coordinate of the object

var x = previousPosition[0] - previousPosition[0];
var y = nextPosition[1] - nextPosition[1];

var rad = Math.atan(y/x);
var deg = rad * 180 / 3.14; 
```

在变量 deg 中，您具有旋转立方体的度数

# python - Aspell PIL 无法使用 setup.py Python 3 安装

> ID：14991094
> 
> 赞同：0
> 
> 时间：2013-02-20T22:23:46.000
> 
> 标签：python, python-imaging-library

终端错误返回

```
root@sys:~/Downloads/PIL-fork-1.1.7-py3# python3 setup.py build
running build
running build_py
running build_ext
building 'PIL._imaging' extension
gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security -Werror=format-security -fPIC -IlibImaging -I/usr/include -I/usr/local/include -I/usr/include/python3.2mu -c _imaging.c -o build/temp.linux-x86_64-3.2/_imaging.o
_imaging.c:75:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1
root@sys:~/Downloads/PIL-fork-1.1.7-py3# 
```

这个文件是从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)下载的。 如何安装这个 Aspell PIL Python 3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:02:52.737

按照以下步骤完成安装 PIL

```
sudo aptitude install python3-setuptools
sudo easy_install3 pip
sudo apt-get install python3-dev
download the Pillow-master.zip
wget https://github.com/python-imaging/Pillow/archive/master.zip
go to downloaded directory and,
sudo unzip Pillow-master.zip
python3 setup.py build
python3 setup.py install 
```

# objective-c - 比较 NSStrings 似乎不起作用

> ID：14991098
> 
> 赞同：-4
> 
> 时间：2013-02-20T22:24:12.467
> 
> 标签：objective-c, cocoa, nsstring

对于我确定是一个非常简单的问题，我遇到了一些非常令人沮丧的麻烦，但我似乎无法解决它。我有一个名为 final 的 NSArray，其输出如下：

```
final = (
".DS_Store",
"hey.txt"
) 
```

我希望以下 for 循环在第一次通过时返回 false，在第二次通过时返回 true。据我所知，我做得正确，但两次通过的输出都是正确的。

```
for (int i = 0; i < [final count]; i++) {
   if (final[i] != @".DS_Store") {
    NSLog(@"true");
   }
   else {
    NSLog(@"false");
   } 
```

输出：

```
2013-02-20 17:20:39.042 myAppName [40636:403] true
2013-02-20 17:20:39.042 myAppName [40636:403] true 
```

我无法弄清楚为什么第一个不返回错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:27:56.417

您正在比较指针。用于`[final[i] isEqualToString:@".DS_Store"]`比较字符串。

# java - 在 Java 中创建我的第一个子类时遇到问题

> ID：14991100
> 
> 赞同：0
> 
> 时间：2013-02-20T22:24:20.280
> 
> 标签：java, inheritance, subclass, superclass

我正在尝试为我的 Java 课程制作一个 Breakout 游戏程序，其中包括一组彩色块（砖）。我已经成功完成了这项工作，但现在我的导师希望我们添加不同的 Bricks 子类。他想要的子类之一是 ColorBrick，它从 Brick 超类继承了它的所有行为，除了它有一个颜色数组，每 5 个滴答声就会改变一次。构造函数采用颜色数组而不是单一颜色。

这就是我的 Brick 超类：

```
package Breakout;

import java.awt.Color;
import java.awt.Graphics;

    public class Brick {

        public int x, y, i, j;
        public Color c;
        Brick[][] brick;

        public Brick() {
        }

        public Brick(Color c, Brick[][] brick, int i, int j) {
            this.c = c;
            this.brick = brick;
            this.x = i * 40;
            this.y = j * 10 + 50;
            this.i = i;
            this.j = j;

        }

        public void tick() {
        }

        public void paint(Graphics g) {
            g.setColor(c);
            g.fillRect(x, y, Breakout.brickWidth, Breakout.brickHeight);

        }

        public void hit(Ball b) {
            if (b.yThen > y + Breakout.brickHeight) {
                b.yv = -b.yv;
                b.yNow = 2 * (y + Breakout.brickHeight) - b.yNow;
            }
            if (b.yThen < y) {
                b.yv = -b.yv;
                b.yNow = 2 * (y) - b.yNow;
            }
            if (b.xThen > x + Breakout.brickWidth) {
                b.xv = -b.xv;
                b.xNow = 2 * (x + Breakout.brickWidth) - b.xNow;
            }
            if (b.xThen < x) {
                b.xv = -b.xv;
                b.xNow = 2 * (x) - b.xNow;
            }
            brick[i][j] = null;
        }
    } 
```

这就是我到目前为止的 colorBrick 子类：

```
package Breakout;

import java.awt.Color;

    public class ColorBrick extends Brick {

        Color colors[] = {Color.red, Color.green, Color.blue, Color.yellow}; 

        public ColorBrick(Color[] colors, Brick[][] brick, int i, int j){
            this.colors = colors; 
            this.brick = brick; 
            this.i = i; 
            this.j = j; 
        }

        public void tick(){

        }

    } 
```

在这一点上，我碰壁了，我不确定从这里该怎么做。我的导师说，由于某种原因，超类中的 tick 方法需要为空。如果它需要是空的，那么他为什么要我们把它放在那里？我也不确定我应该在子类 tick 方法中放什么。我的子类是否朝着正确的方向前进，或者到目前为止我所做的一切都是完全错误的？任何指导将不胜感激！

如果有用，这是我的主要突破代码：

```
package Breakout;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import javax.swing.JPanel;
import javax.swing.Timer;

    public class Breakout extends javax.swing.JFrame {

        public static final int fieldHeight = 600;
        public static final int fieldWidth = 400;
        public int diameter = 5;
        public int xNow = 200 - (diameter / 2);
        public int yNow = 300 - (diameter - 2);
        public int paddleWidth = 50;
        public int paddleHeight = 5;
        public int platform = 580;
        public static int mousex;
        public int mousey;
        public static int brickWidth = 40;
        public static int brickHeight = 10;
        public Random randoms = new Random();
        Brick[][] bricks = new Brick[arrayWide][arrayHigh];
        public static boolean startUp;
        public static int arrayWide = 10;
        public static int arrayHigh = 5;
        Ball ball = new Ball(200 - (diameter / 2), 20 /*300 - (diameter /2)*/, 0, 0, diameter, Color.white);
        Paddle myPaddle = new Paddle(platform, paddleWidth, paddleHeight);

        /**
         * Creates new form Breakout
         */
        public Breakout() {
            initComponents();
            clock.start();
        }

        public class MyPanel extends JPanel {

            @Override
            public void paint(Graphics g) {
                super.paint(g);
                if (startUp) {
                    ball.paint(g);
                }
                myPaddle.paint(g);

                for (int i = 0; i < arrayWide; i++) {
                    for (int j = 0; j < arrayHigh; j++) {
                        if (bricks[i][j] != null) {
                            bricks[i][j].paint(g);
                        }

                    }
                }
                // Insert code to paint the scene here.
                // Use methods in the Graphics class to do the painting
                // Remember coordinates use (0,0) at the top left

            }
        }
        public Timer clock = new Timer(50, new ActionListener() {  // 50ms delay between ticks
            public void actionPerformed(ActionEvent e) {
                tick();               // Write a method named tick to advance your game
                jPanel1.repaint();
            }
        });  // panel is the name of the JPanel that displays the game

        public void launchball() {
        }

        public void tick() {
            ball.move();
            Brick brick2 = brickAt(ball);
            if (brick2 != null) {
                brick2.hit(ball);
            }

            myPaddle.move(mousex);
            myPaddle.bounce(ball);
            System.out.println();

        }

        public Brick brickAt(Ball b) {
            int j = (int) (b.yNow - 50) / 10;
            int i = (int) (b.xNow / 40);
            if (i < arrayWide && i >= 0 && j < arrayHigh && j >= 0) {
                return (bricks[i][j]);

            }

            return null;
        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
        private void initComponents() {

            jPopupMenu1 = new javax.swing.JPopupMenu();
            jPanel2 = new javax.swing.JPanel();
            jPanel1 = new MyPanel();
            jLabel1 = new javax.swing.JLabel();
            start = new javax.swing.JButton();

            org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
            jPanel2.setLayout(jPanel2Layout);
            jPanel2Layout.setHorizontalGroup(
                jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(0, 100, Short.MAX_VALUE)
            );
            jPanel2Layout.setVerticalGroup(
                jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(0, 100, Short.MAX_VALUE)
            );

            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

            jPanel1.setBackground(new java.awt.Color(0, 0, 0));
            jPanel1.addMouseMotionListener(new java.awt.event.MouseMotionAdapter() {
                public void mouseMoved(java.awt.event.MouseEvent evt) {
                    mouseMove(evt);
                }
            });

            org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
            jPanel1.setLayout(jPanel1Layout);
            jPanel1Layout.setHorizontalGroup(
                jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(0, 400, Short.MAX_VALUE)
            );
            jPanel1Layout.setVerticalGroup(
                jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(0, 600, Short.MAX_VALUE)
            );

            jLabel1.setFont(new java.awt.Font("Hobo Std", 1, 24)); // NOI18N
            jLabel1.setForeground(new java.awt.Color(153, 51, 255));
            jLabel1.setText("Breakout");

            start.setFont(new java.awt.Font("Hobo Std", 0, 13)); // NOI18N
            start.setForeground(new java.awt.Color(255, 51, 0));
            start.setText("Start");
            start.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    startActionPerformed(evt);
                }
            });

            org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
            getContentPane().setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createSequentialGroup()
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                        .add(layout.createSequentialGroup()
                            .add(164, 164, 164)
                            .add(jLabel1))
                        .add(layout.createSequentialGroup()
                            .add(15, 15, 15)
                            .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                        .add(layout.createSequentialGroup()
                            .add(175, 175, 175)
                            .add(start)))
                    .addContainerGap(17, Short.MAX_VALUE))
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createSequentialGroup()
                    .add(16, 16, 16)
                    .add(jLabel1)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(start)
                    .addContainerGap(10, Short.MAX_VALUE))
            );

            pack();
        }// </editor-fold>                        

        private void mouseMove(java.awt.event.MouseEvent evt) {                           
            mousex = evt.getX();
            mousey = evt.getY();
        }                          

        private void startActionPerformed(java.awt.event.ActionEvent evt) {                                      

            startUp = true;
            ball.xNow = 200 - (diameter / 2);
            ball.yNow = 300 - (diameter - 2);
            ball.xv = 0;
            ball.yv = 8;
            for (int i = 0; i < arrayWide; i++) {
                for (int j = 0; j < arrayHigh; j++) {
                    if ((j % 2 == 0 && i % 2 == 0) || (j % 2 == 1 && i % 2 == 1)) {
                        bricks[i][j] = new Brick(Color.magenta, bricks, i, j);
                    } else {
                        bricks[i][j] = new Brick(Color.gray, bricks, i, j);
                    }

                }
            }
        }                                     

        /**
         * @param args the command line arguments
         */
        public static void main(String args[]) {
            /* Set the Nimbus look and feel */
            //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
            /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
             * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
             */
            try {
                for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        javax.swing.UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (ClassNotFoundException ex) {
                java.util.logging.Logger.getLogger(Breakout.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (InstantiationException ex) {
                java.util.logging.Logger.getLogger(Breakout.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                java.util.logging.Logger.getLogger(Breakout.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                java.util.logging.Logger.getLogger(Breakout.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            }
            //</editor-fold>

            /* Create and display the form */
            java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                    new Breakout().setVisible(true);
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:29:52.510

由于这听起来像 homework.classwork，我不打算详细介绍。

据推测，某些东西（待定）将每 5 秒（或定期）调用一次 tick()。正常人`Brick`什么都不做。您`ColorBrick`应该每 5 秒更改一次颜色。不知何故，它需要知道它的当前颜色并更改为下一个颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:30:05.493

需要有一个空`tick`方法，`Brick`以便另一个类只需要处理Bricks；调用的类`tick`不需要知道它是 a`Brick`还是 a `ColorBrick`。的行为`tick`由运行时类指定；这就是多态性——相关类对同一方法调用做出不同反应的能力。

子类`tick`方法需要跟踪已生成的刻度数。需要时，它会更改 Color 变量`c`。

我可能会在您的`ColorBrick`构造函数中进行另一项更改：利用`super`调用超类构造函数，以免重复您的代码。

此外，声明您的实例变量（`c`、`x`、`y`等）`protected`，以便只有类本身和子类可以直接访问它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:32:51.093

tick 方法需要存在于超类中，因为我猜测其意图是对于存在的每个 Brick，都会调用 tick() （可能在主 Breakout 类中，可能在循环中）。超类中的 tick() 方法指定了“默认”行为，即什么也不做。对于您的 ColorBrick 类，当调用 tick 时，颜色需要每五个 tick 改变一次，因此您需要在子类 (ColorBrick) 中指定这种特殊的行为情况。

为此，ColorBrick 需要一种方法来记录调用 tick() 的次数。一旦添加了一些可以执行此操作的代码，您就可以考虑在某些刻度上更改 ColorBrick 的颜色：您的 ColorBrick 已经“知道”其当前颜色，因为它从具有 Color 属性的 Brick 扩展而来（ c)，因此这是在某些刻度上更改该值的情况。

我故意含糊其辞，因为我不想为你完成你的任务，但请随时提出任何问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T22:35:16.330

您需要以如下方式实现您的`tick`方法`ColorBrick`：

```
private int i = 0;
public void tick(){
    c = colors[i++ % colors.length];
} 
```

现在，在制作图形应用程序时，您也可以简单地使用`Brick`该类来创建`ColorBricks`。例如，添加多个砖块来制作墙壁：

```
Brick[][] wall = new Brick[5][5]; 
```

上面数组中的一些`Brick`可能是`ColorBrick`. 这允许有一个通用接口，即`tick()`每个`Brick`对象的方法。但是对于`ColorBrick`这种方法实际上改变了`Brick`where-as in other的颜色，`Brick`它什么也不做！

你可以做更多的事情，比如`DancingBrick`在每个`tick`. 您的图形实现不需要为了添加不同类型而进行大幅更改，`Brick`因为它使用基本类型 as `Brick`。

# linux-kernel - select() 是否使用内核计时器（在 jiffies 中）或高分辨率计时器

> ID：14991101
> 
> 赞同：2
> 
> 时间：2013-02-20T22:24:24.337
> 
> 标签：linux-kernel, operating-system, sleep, linux-device-driver

我有一个应用程序，我必须在其中睡很短的时间（大约几微秒）。幸运的是，我的 Linux 内核 2.8.* 支持高分辨率计时器。

我现在有 2 个选择睡觉

1.  纳米睡眠
2.  select() 超时。

我选择使用 select() 因为它非常便携。select() 是使用普通内核计时器（jiffies）还是使用高分辨率计时器？

这可以提供以微秒为单位的睡眠功能吗？

# c# - 队列到并发队列

> ID：14991102
> 
> 赞同：2
> 
> 时间：2013-02-20T22:24:44.627
> 
> 标签：c#, parallel-processing, queue, backgroundworker

我在 C# (4.0) 中有一个常规的队列对象，并且我正在使用访问此队列的 BackgroundWorkers。

我使用的代码如下：

```
 do
    {
        while (dataQueue.Peek() == null // nothing waiting yet 
            && isBeingLoaded == true // and worker 1 still actively adding stuff
        )
            System.Threading.Thread.Sleep(100);

        // otherwise ready to do something: 
        if (dataQueue.Peek() != null) // because maybe the queue is complete and also empty 
        {
            string companyId = dataQueue.Dequeue();
            processLists(companyId);
            // use up the stuff here //
        } // otherwise nothing was there yet, it will resolve on the next loop.
    } while (isBeingLoaded == true // still have stuff coming at us 
           || dataQueue.Peek() != null);   // still have stuff we haven’t done 
```

但是，我想在处理线程时我应该使用`ConcurrentQueue`. `ConcurrentQueue`我想知道是否有像上面那样在 Do While 循环 中使用 a 的示例？

我用 TryPeek 尝试的一切都不起作用..

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:34:26.713

您可以将 a[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)用作生产者-消费者队列。

我的回答对您的架构做出了一些假设，但您可以根据自己的需要对其进行塑造：

```
public void Producer(BlockingCollection<string> ids)
{
    // assuming this.CompanyRepository exists
    foreach (var id in this.CompanyRepository.GetIds())
    {
        ids.Add(id);
    }

    ids.CompleteAdding(); // nothing left for our workers
}

public void Consumer(BlockingCollection<string> ids)
{
    while (true)
    {
       string id = null;
       try
       {
           id = ids.Take();
       } catch (InvalidOperationException) {
       }

       if (id == null) break;

       processLists(id);
    }
} 
```

您可以根据需要启动尽可能多的消费者：

```
var companyIds = new BlockingCollection<string>();
Producer(companyIds);

Action process = () => Consumer(companyIds);

// 2 workers
Parallel.Invoke(process, process); 
```

# java - 用于提取视频格式元数据的 Java 库

> ID：14991104
> 
> 赞同：0
> 
> 时间：2013-02-20T22:25:00.857
> 
> 标签：java, audio, video, metadata, extraction

我想知道 StackOverflowers 是否知道任何可以为多种视频格式（mp4、flv、webm、ogg 等）进行元数据提取（比特率、纵横比、音频比特率等）的 Java 库。 ...）。越多越好（与许多元数据属性以及许多数据格式一样）。谢谢。

# sql-server - 从存储过程中丢失前导 0

> ID：14991105
> 
> 赞同：0
> 
> 时间：2013-02-20T22:25:01.833
> 
> 标签：sql-server, sql-server-2008

我正在尝试从城市和州值中获取正确的邮政编码。但是我从邮政编码中丢失了前导 0。

例子

```
create procedure sp_getCorrectvalue
as
Begin
     declare @value as nvarchar(5)
     set @value = '00254'
     return @value
End

declare @getValue as nvarchar(5)
Exec @getValue = sp_getCorrectvalue
select @getValue as zipCode 
```

它应该返回`00254`，但它返回`254`的是不正确的

请帮忙谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:28:47.530

一个过程的返回值只能是一个`int`，所以当你返回它时它会被转换。要返回一个字符串，您需要在结果或输出参数中返回它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T22:35:20.583

你应该创建一个函数

```
CREATE FUNCTION fn_getCorrectvalue()
RETURNS NVARCHAR(5)
AS
BEGIN
     declare @value as nvarchar(5)
     set @value = '00254'
     return @value
END 
```

演示在[http://sqlfiddle.com/#!3/29fa9/1/0](http://sqlfiddle.com/#!3/29fa9/1/0)

* * *

存储过程返回一个整数 ( [http://msdn.microsoft.com/en-us/library/ms174998.aspx](http://msdn.microsoft.com/en-us/library/ms174998.aspx) )

> 存储过程可以将整数值返回给调用过程或应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T18:13:36.087

实际上，我在 Mysql 中遇到了类似的问题，我有一个存储过程，它需要一个学生 ID IN Char(8)。如果 ID 为“00002563”并且 Out 为 VarChar。

如果我传入'00002563'并将其传递给put参数......所有如果get是varchar中的'2563'。

该程序的初衷是让学生输入他们的 ID，并让该程序对其进行处理并确定分配给他们的宿舍和房间号（如果找到）。

他们都没有找到..我怀疑原因是 varchar 正在转换为 INT。

# visual-studio-2012 - VS2012 - 除了 Mindscape Web Workbench 或 Web Essentials 2012 之外，免费的支持更少？

> ID：14991110
> 
> 赞同：4
> 
> 时间：2013-02-20T22:25:16.150
> 
> 标签：visual-studio-2012, less

我需要 LESS 的语法高亮和编译，但是 Web Essentials 2012 刚刚放弃了他们的 LESS 编辑器（并且编译对我来说也坏了），Mindscape Web Workbench 只是在降低了大约 40 澳元之后才变成了一个完整的解决方案。

如今，LESS 是一种相当常见的 Web 开发技术，我希望 VS 支持它而无需支付额外费用。

有没有可以免费提供这种支持的免费解决方案？

需要明确的是，这是必需的功能：

*   LESS 语法高亮
*   LESS（到 CSS）编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:56:33.900

是的...Web Essentials 2012 + Web Tools 2012

..实际上 Web Essentials 放弃了对语法的支持，因为现在它完全内置在 VS2012 中

[http://vswebessentials.com/](http://vswebessentials.com/)

# c# - WPF MVVM - 更新 UI 线程

> ID：14991111
> 
> 赞同：0
> 
> 时间：2013-02-20T22:25:16.050
> 
> 标签：c#, wpf, user-interface, mvvm

我从 WPF 扩展工具包中填充 aa `DataGridControl`，并在用户选择时填充 DataTables。当用户选择被修改时，不仅显示具有 200 x 1000 行的 DataTable 会有很大的延迟，而且还会存在阻止用户与其他控件交互的用户交互延迟，即使绑定到的 DataTable 的填充`DataGridControl`发生在一个单独的线程。

如何消除延迟，以便用户可以在 DataGridControl 更新时与视图中的其他控件进行交互？

```
 public string ListBoxSelection {
                get { 
                    return listBoxSelection;
                }
                set {
                    listBoxSelection = value;
                    OnPropertyChanged("ListBoxSelection"); //  DataGridSelection

                    BackgroundWorker threadPreviewLoader = new BackgroundWorker();
                    threadPreviewLoader.DoWork += (LoadDataGridPreview); 
                    threadPreviewLoader.RunWorkerAsync();
                }
            }

    private DataTable dTPreviewWindow; //modified in thread 

    public DataView dvLbSelection {
            get {
                return dTPreviewWindow.DefaultView;  //DataGridControl binding 
            }
        }

private void LoadDataGridPreview(object sender, DoWorkEventArgs e) {

            if (listBoxSelection != null) {
                try {
                    DataTable testImmediateChange = new DataTable();
                    testImmediateChange = DataSetModel.ChunkFlatFile(listBoxSelection, 1, PREVIEW_WINDOW_MAX_ROWS); //labor itensive work 
                    dTPreviewWindow = testImmediateChange;
                    fileOpenGood = true;
                } catch {

                    fileOpenText = DATAGRID_TEXT_BADFILE;
                    fileOpenGood = false;

                }
                fileOpenText = DATAGRID_TEXT_NOFILECHOSEN;

                OnPropertyChanged("FileOpenGood");
                OnPropertyChanged("FileOpenBad");
                OnPropertyChanged("FileOpenText");
                OnPropertyChanged("dvLbSelection");
            } else {
                ValidatePreviewWindow(true);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:58:06.397

如果您的数据视图（即 dvLbSelection）是 UI 绑定的，即使在后台线程中更新它也会导致 UI 刷新。当用户尝试与其他控件交互时，这反过来会导致延迟。所以在这里你可以尝试几件事。

1.  断开数据视图与 UI 的连接，直到加载所有数据。（使用临时变量加载后台线程中的值）
2.  在数据网格上使用虚拟化并设置 VirtualizingStackPanel.VirtualizationMode ="Recycling"
3.  避免创建多个后台线程（根据提供的代码片段，为每个 ListBox Selection 创建一个新线程）。使用多线程运行昂贵的操作将是延迟的主要原因之一。

希望这可以帮助！

# android - textview 的重力属性未使文本居中

> ID：14991115
> 
> 赞同：1
> 
> 时间：2013-02-20T22:25:46.397
> 
> 标签：android, android-layout, android-widget

我在 LinearLayout 中有一个文本视图，宽度设置为匹配父级，重力设置为中心。好吧，这不是在文本视图中居中文本。它使文本的左侧从视图的中心开始。我一直在阅读有关堆栈溢出的一些答案，似乎一切正常。

这里是简单的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@android:color/white" 
    />

</LinearLayout> 
```

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:55:12.903

尝试为您的 LinearLayout 设置重力 center_vertical。这会将您的 TextView 设置在屏幕的中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:47:56.893

你想把什么对齐到中心？TextView 对象本身还是文本？

我认为有两个重力属性。

android:layout_gravity 在您的情况下，它将对齐 LinearLayout 中的 TextView 对象，可以是左、右中心等。

android:gravity 将在 TextView 中对齐您的文本/字符串，它可以再次向左、向右、居中等。

我希望这对你有所帮助。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T12:55:07.873

尝试将 更改`API`为`Android 2.2`。我也有同样的问题，它有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T13:29:39.730

这听起来有点奇怪，但我将代码带到另一台计算机上，它就可以正常工作。真的很奇怪。

谢谢！。

# c - C 无符号整数减法、宏和类型转换

> ID：14991116
> 
> 赞同：0
> 
> 时间：2013-02-20T22:25:46.750
> 
> 标签：c, casting, macros

为示例代码的 Objective-C 特性道歉，但我很确定我的问题的答案在 C 标准库和/或 Apple`clang`编译器中。

我有`NSArray`一个可变数量的项目。我想使用项目计数来创建一个介于 1 和 3 之间的值。我正在使用 C`MAX`宏，但它有一些奇怪的行为：

```
NSLog( @"%d %d %d %d", 1, [tasks count], 3 - [tasks count], MAX( 1, 3 - [tasks count] ) ); 
```

增加项目数时，此日志语句的输出`tasks`如下：

```
1 0 3 3
1 1 2 2
1 2 1 1
1 3 0 1
1 4 -1 -1 
```

我深入研究了文档，发现该`count`函数正在返回一个`NSUInteger`. 我的困境的解决方案只是将返回值类型转换为`NSInteger`：

```
NSLog( @"%d %d %d %d", 1, (NSInteger)[tasks count], 3 - (NSInteger)[tasks count], MAX( 1, 3 - (NSInteger)[tasks count] ) );

1 0 3 3
1 1 2 2
1 2 1 1
1 3 0 1
1 4 -1 1 
```

（如果你不熟悉 Objective-C，在 32 位架构`NSInteger`上是 typedef'd to `int`and `NSUInteger`is `unsigned int`。）

我很难理解原始代码中隐含的类型转换，导致我的结果不直观。有人可以照亮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:35:35.933

3 - [tasks count] 使用无符号类型完成，因此减法环绕，变为 0xffffffff。所以你会得到无符号类型的 MAX(1, 0xffffffff) 。

但是，您将其打印为有符号整数，因为您的 NSLog 格式化字符串是“%d”，它将使 NSLog 将参数的位视为有符号整数，并且位模式 0xfffffff 为 -1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:36:36.087

打开编译器警告。正如您所说，Objective C 位无关紧要，所以我将从这里开始引用 C。

假设您的`MAX()`宏是这样定义的（使用 GCC 扩展）：

```
#define MAX(x, y) ({ typeof (x) _x = (x); \
                     typeof (y) _y = (y); \
                     _x > _y ? _x : _y }) 
```

（`MAX()`宏是非标准的

当您计算 时`MAX(1, 3 - [tasks count])`，您会得到：

```
int x = 1;
unsigned y = 3 - [tasks count];
x > y ? x : y; 
```

现在，可以在 C 中正确比较 an`int`和 an `unsigned`，但这不是您`x > y`在 C 中使用时得到的行为。相反，两个操作数都被转换为`unsigned`（由于“通常的算术转换”）。

因此，您的比较是`(unsigned) 1 > (unsigned) -1`，这是错误的，因为`(unsigned) -1`是最大的可能`unsigned`，这`0xffffffff`在大多数系统（32 位和 64 位）上都是如此。

## 错误在哪里？

```
NSLog(@"%d", [tasks count]); 
```

这在技术上是错误的，您传递`unsigned`给`NSLog()`但使用的是`%d`格式说明符 for `int`。改为使用`%u`，或将您的值转换为`int`第一个。

## 编译器警告

编译器会发出两个警告：

*   它*可能会*告诉您在计算时正在比较有符号和无符号`MAX(1, 3 - [tasks count])`。

*   当格式需要`unsigned`一个.`NSLog()``int`

# playframework-2.1 - JSON：如何根据另一个字段的值验证一个字段

> ID：14991117
> 
> 赞同：2
> 
> 时间：2013-02-20T22:25:53.500
> 
> 标签：playframework-2.1

我有一堂课

```
/**
 * If stub == true data == length of the binary data
 * If stub == false data == binary data
 */
case class Attachment(contentType: String,
                      stub: Boolean,
                      data: Either[Int, Array[Byte]]) 
```

我正在尝试`Format`为它写一个：

```
implicit val attachmentFormat = new Format[Attachment] {

    def reads(json: JsValue): JsResult[Attachment] = (
      "content_type".read[String] ~
      "stub".read[Boolean] ~
      /// ??? How do i validate data based on the value of stub
    )(Attachment.apply)

    def writes(o: Attachment): JsValue = obj(
      "content_type" -> toJson(o.contentType),
      "stub" -> toJson(o.stub),
      "data" -> o.data.fold(
        length => toJson(length),
        bytes => toJson(new String(Base64.encode(bytes)))
      )
    )
  } 
```

我可以进行有条件的写入，`data`但我不明白如何`data`根据`stub`.

# java - Java/Swing如何处理不同的屏幕DPI和密度设置？

> ID：14991121
> 
> 赞同：5
> 
> 时间：2013-02-20T22:26:16.497
> 
> 标签：java, swing, dpi

大家好，我最近遇到了一个问题，现在有些显示器有不同的 DPI 设置，有些显示器的密度要高得多，例如 Apple 的 Retina 显示器。

如何使用 Java 补偿各种显示器上的不同 DPI 设置和密度？是否可以在任何显示器上将控件缩放为相同大小。我知道在为 Android 编程时，所有测量值都在“DP”中，您可以为三种不同的显示密度指定不同的图像。

有没有一种方法可以使用 Java / Swing 为不同的显示密度选择不同的图像，这样我的应用程序在更高密度的显示器上看起来就不会模糊？或者这不是那么重要或可能吗？我知道 Chrome 目前不考虑 DPI，但 Internet Explorer 和其他应用程序会。

感谢您的帮助，我是一名长期的 Java 开发人员，我以前从未考虑过 DPI，我想知道我该怎么做 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:41:54.170

首先，相信平台的外观设计人员会为文本和控件选择合理的默认大小。然后，避免挫败这些默认设置的诱惑。以下是一些启发式方法：

*   使用[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)；在考虑绝对定位时，请考虑自定义布局。

*   尊重组件的[首选尺寸](https://stackoverflow.com/q/7229226/230513)。

*   避免[不可调整大小的组件](https://stackoverflow.com/a/12532237/230513)。

*   在[动画](https://stackoverflow.com/a/3256941/230513)中，将图形缩放到包围的大小`Window`。

*   根据需要使用仿真在一系列平台上进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-03T17:54:56.127

首先感谢垃圾神为您提供的有用链接，他们非常有帮助。

下面我列出了一些关于如何处理我遇到的有关 DPI 更改的问题的细节。

字体问题：

如果字体不适合组件，请查看下面的组件大小调整问题，因为组件通常不适合内部大小。否则，在 JLabel 中，您可以应用 HTML 标记来自动换行文本（还有其他解决方案，但这对我有用）。

如果组件的文本自然是默认字体、大小和样式（Tahoma 11 plain），那么一切都会自动为您完成。知道 user574171在他对[如何在 Windows/Linux 上设置 Java Swing 应用程序的 DPI 的](https://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux)[回答中给出的图片显示了不同字体和布局管理器的问题和优势。](http://kynosarges.org/GuiDpiScaling.html). 这个问题在这里询问“Swing”问题，但他的链接在比较 WPF、JavaFX 和 Swing 布局与基本组件和不同字体时也很有用。你可以看到那里的“Swing a”字体是最好的，那就是 Tahoma 11 Plain。但是，它仅在组件自然是默认字体、大小和样式（Tahoma 11 Plain）时才有效。这意味着文本的粗体、下划线、调整大小和不同的字体将取消针对不同 DPI 的自动调整大小。

如果文本是默认字体 (Tahoma) 但加粗、下划线或不同大小，则文本不会针对不同的 DPI 进行缩放。要修复不同 DPI 的缩放比例，请选中标有“从默认字体导出字体”的框。“相对”选项将采用默认的 DPI 缩放字体并应用您的相对更改，例如更大或更小、粗体和下划线。还要知道，如果组件是 JLabel，则 DPI 缩放是使用 HTML 标签自动进行的，尽管您如何格式化文本（也换行）。

如果组件本身不是默认字体、样式和大小（Tahoma 11 纯文本），或者您想要不同的字体（即不是 Tahoma），那么您需要关联另一个组件中的更改，该组件自然是默认的，例如 JLabel。因此，如果 125 DPI 将字体增加 3，那么您将所需的字体增加相同的值。

组件尺寸问题：

所有组件都有首选、最小和最大尺寸属性，但我发现它们不能很好地适应 DPI 更改。垃圾神回答中的“尊重组件的[首选大小](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi)”项目符号告诉您所有相关信息。总而言之，让组件的默认大小自行处理，因为它会尝试调整内部的大小。

如果组件可以使用默认大小，则可以为您完成 DPI 处理。正如trashgod 所说：“首先，相信平台的外观设计人员会为文本和控件选择合理的默认大小。然后，避免挫败这些默认设置的诱惑。” 同样，默认大小的组件通常按内部大小调整（或重新调整大小）。根据我自己的经验，当我设置可调整大小的组件时，我通过“水平调整大小”或“垂直调整大小”来完成它，因为我发现它在 DPI 更改和窗口调整大小方面效果很好。

如果组件的默认大小不起作用，那么首先尝试查看下面我发现的一些具体问题。或者尝试根据正确缩放的组件的变化来缩放组件。IE，应用您期望缩放组件为 100% DPI 的比率以及对新 DPI 的更改。需要缩放到其他组件更改的组件示例是它的文本由代码填充或它是图像。

作为最后的手段，使用 JScrollPane 允许用户滚动查看整个内容。如果窗口/对话框相当大，那么 JScrollPane 是一个好主意，因为如果 DPI 对于用户的视力来说更高，那么窗口通常会比屏幕大。

注意：我发现在 JPanel 中封装组件组有助于更好地处理 DPI 变化。

JTextField 大小问题：

如果您愿意，可以设置 columns 属性，只设置文本。columns 属性是要显示的字母或数字的数量。通常在允许用户输入数字时使用。知道 columns 属性适用于多个平台。

JSpinner 大小问题：

将模型设置为准确、有效和默认值。因此，组件的自动调整大小是针对最大值完成的，并且适用于 DPI 更改和其他平台。

表格行高问题：

表格行高不会随着 DPI 的提高而改变。我遇到了这个问题，这似乎是因为我试图与旧版本的 Java 兼容。修复因 DPI 变化而导致的字体大小比例变化或 JLabel 高度比例变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-01T00:09:31.117

使用 JRE 9（或更高版本）。

这是因为 Java 运行时（旧版本）宣称自己是“DPI-aware”，但并不真正支持 AWT 和 Swing。Java 应用程序的大小和渲染基于像素而不是适当缩放，这包括 HiDPI 显示。无论如何，最近已经解决了这个问题。请参阅问题[JEP 263：Windows 和 Linux 上的 HiDPI 图形](http://openjdk.java.net/jeps/263) 和[升级](https://docs.oracle.com/javase/9/whatsnew/toc.htm)。

所以，增加字体大小是行不通的（因为它不会增加其余的东西）；jvm 参数`-Dsun.java2d.dpiaware=false`不起作用（因为它不被真正支持）；并且清单文件+注册表编辑（对于Windows）不起作用。

然后，您需要在 JRE 9 上运行它，因为它确实支持此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-24T16:08:44.337

通过使用

```
System.setProperty( "sun.java2d.uiScale", "1.0" ); 
```

在您的 java 代码中，应该禁用 ui 缩放。

# c++ - ifstream 不工作

> ID：14991123
> 
> 赞同：1
> 
> 时间：2013-02-20T22:26:18.417
> 
> 标签：c++

我正在尝试使用 ifstream 打开一个文件，但无论我发现我尝试过什么解决方案，似乎都没有任何效果；我的程序总是输出“无法打开”。以下是我的完整代码。任何帮助都将不胜感激！

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char ** argv)
{
    string junk;
    ifstream fin;
    fin.open("somefile.txt");

    if(fin.is_open())
    {
        fin >> junk;
        cout << junk;
    }
    else
    {
        cout << "unable to open" << endl;
    }

    fin.close();
    return 0;
} 
```

此外，与创建的可执行文件位于同一目录中的 somefile.txt 的内容如下：

```
SOME
FILE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:26:21.537

正如一些评论者所建议的那样，很可能该文件确实不存在，因为您在错误的位置查找它。尝试使用文件的绝对路径，而不是仅仅假设它在您期望的位置。

并使用 . 输出更有用的错误消息`strerror(errno)`。

```
// ...
fin.open("C:\\path\\to\\somefile.txt");

// ...
else
{
    cout << "unable to open: " << strerror(errno) << endl;
} 
```

# php - 如何将重影文本添加到 Drupal 网络表单文本区域？

> ID：14991124
> 
> 赞同：0
> 
> 时间：2013-02-20T22:26:19.513
> 
> 标签：php, drupal, textarea, drupal-webform

我想知道，有谁知道如何将幻影（浅灰色）文本添加到 Drupal 网络表单文本区域以进行描述？一旦用户在文本区域输入内容，幻影文本应该消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:59:23.377

非常简单，无需安装任何模块，使用 javascript 作为占位符

将此代码粘贴到 page.tpl 的 head 部分

```
<script language="javascript" type="text/javascript"> 

function placeholder()
{
var input = document.getElementById ("edit-message");
input.placeholder = "Add Your Text Here";   

}
</script> 
```

将“edit-message”替换为您的文本区域 ID（使用 fire bug）

添加这个 **onload="javascript:placeholder();"** 在正文标签中

```
<body onload="javascript:placeholder();"  class="<?php print $body_classes; ?>"> 
```

最简单的占位符使用方法，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T00:37:07.727

您正在寻找的行为由 HTML5 'placeholder' 属性解决，该属性针对现代浏览器中的输入字段实现：Firefox 4+、Opera 11+、Safari 4+、Chrome 4+ ...并且仅在 IE10+ 中：(

所以恕我直言，您有两种方法可以在输入字段中实现“占位符功能”：

1）快速而肮脏的方式：使用Javascript事件处理程序。通过这种方式，如果启用了 JS，您可以同时支持旧浏览器和现代浏览器。

2) 正确且有前途的解决方案：使用 HTML5 'placeholder' 属性。

正如您可能猜到的那样，第二种方法更难实现，因为 Drupal 7 表单本身不支持占位符属性。要让 Drupal 使用 placeholder="hint..." 属性呈现字段：

a) 如果您使用 Webform Module v.7.x-3.x 或 7.x-4.x 来构建您的表单，只需将在此线程中发布的补丁应用到它：http: [//drupal.org/node/ 1305826](http://drupal.org/node/1305826)和/或...

b) 预处理主题的 template.php 文件中的表单标记，如下所述： http: [//nathanbuskirk.com/drupal7-placeholder-text-and-html5-forms](http://nathanbuskirk.com/drupal7-placeholder-text-and-html5-forms)

在这两种情况下，对 IE6-9 和其他旧浏览器的支持都需要您额外使用一些 pollyfill JS 库，例如 Placeholder.js ( [https://github.com/jamesallardice/Placeholders.js](https://github.com/jamesallardice/Placeholders.js) ) 或 JQuery 的 Simple-Placeholder。 js ( [https://github.com/marcgg/Simple-Placeholder](https://github.com/marcgg/Simple-Placeholder) )

希望能帮助到你。

# java - Android 如何通过公共静态方法在 TextView 中设置文本？

> ID：14991129
> 
> 赞同：4
> 
> 时间：2013-02-20T22:27:01.290
> 
> 标签：java, android, methods, textview

我在 onCreate 有这个：

```
final TextView text1 = (TextView) findViewById(R.id.txtNextAlarm); 
```

我正在尝试在同一类中的方法中设置文本：

```
public static void NextTxt(){
        text1.setText("");
} 
```

但它不识别“text1”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:37:44.797

问题是静态方法不与任何特定对象相关联，而是与整个类相关联。因此，他们只能看到您班级中的静态字段。`text1`如果你说的是真的，你的变量甚至不是那个。相反，它是一个局部变量，只存在于`onCreate()`方法的长度。如果您知道您的活动只会有一个实例（这可能不是一个不合理的假设），那么您可以做的是使用

```
private static TextView text1; 
```

在你的类的顶部（或者，基本上，在方法之外的任何地方）。`final`修饰符不会给你带来任何东西。您可以选择将其设为公开还是私有，但默认情况下我倾向于私有（除非有其他原因）。

另一种方法是问自己为什么`NextTxt()`是静态的；如果你让它成为一个普通的实例方法，那么你仍然需要`text1`在类中声明，但它不需要是静态的。但是你需要一个实例来调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T22:29:12.667

```
TextView text1;

@Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      text1 = (TextView) findViewById(R.id.txtNextAlarm);
} 
```

在 onCreate 方法中进行初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:39:30.033

如果方法是静态的，则不能访问该类的任何非静态字段。您必须将 textField 设为静态或将其作为参数传递。

```
static TextView text1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MyClass.text1 = (TextView) findViewById(R.id.txtNextAlarm);
}

public static void NextTxt(){
    MyClass.text1.setText("");
} 
```

当然你一次只能设置一个 textField，因为它是类的静态字段。其他选项包括制作单例或从 NextTxt 方法中删除静态修饰符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T22:58:56.703

如果这条线在你的 onCreate 方法中是真的

```
final TextView text1 = (TextView) findViewById(R.id.txtNextAlarm); 
```

那么问题的答案是 text1 超出了NextTxt 方法的[范围。](https://en.wikipedia.org/wiki/Scope_%28computer_science%29)您已经在一个方法中声明并初始化了一个变量，并且您正试图从另一个方法访问它。为了让 NextTxt 方法“看到”text1，您需要将该成员移动到两个方法都可以访问它的位置。

正如其他答案中提到的，您还要处理 onCreate 是一个实例方法而 NextTxt 是一个静态方法的事实。您可能很想开始将所有内容都设置为静态以“解决”您的问题，但这是一条危险且草率的道路。您无法控制 Android 何时终止您的 UI，因此 text1 可能会在没有警告的情况下变为无效。下次您尝试对其调用方法时，您将不喜欢结果。

重新考虑您正在尝试做的事情，如有必要，将其勾画出来，如果您不理解错误，请不要只在 Eclipse 中应用快速修复。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-20T22:34:12.167

text1 是一个`local`变量，您必须将其声明为类的属性

```
public final TextView text1;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
      text1 = (TextView) findViewById(R.id.txtNextAlarm);
} 
```

并在您的静态方法中使用：

```
public static void NextTxt(){
        text1.setText("");
} 
```

# html - 没有背景的透明png按钮悬停

> ID：14991137
> 
> 赞同：1
> 
> 时间：2013-02-20T22:27:40.267
> 
> 标签：html, css, png

我有 40*40px png，透明背景，中间有一个 30*30px 的圆圈。

我想将该 png 用作具有简单悬停效果的按钮，但我希​​望仅当光标实际位于圆圈上而不是透明背景上时才会发生悬停效果。

有没有一个简单的 HTML+CSS 解决方案？我试图在这里和其他论坛上查看它，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:33:39.677

是的，您可以使用 HTML 和 CSS 做到这一点。首先创建一个圆形元素并将其放在图像之前。然后将您的图像和圆圈包装在一个容器中，如下所示：

```
<div class="container">
  <div class="circle"></div>
  <img src="your-image.jpg" />
</div> 
```

然后，使用`position: absolute`将圆圈置于图像顶部（将其与图像中的圆圈对齐），并`+`在圆圈悬停时使用选择器选择下一个相邻元素。

```
.container {
  position: relative;
}
.circle {
  position: absolute;
  top: 100px;
  left: 100px;
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: #222;
}
.circle:hover+img {
  border: 5px solid aqua;
} 
```

见[**演示**](http://jsfiddle.net/FT5HK/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T00:20:37.523

如果您需要仅当鼠标在圆圈内（而不是在方形边界框内）时才需要激活悬停/单击，请查看此脚本[http://tympanus.net/codrops/2011/11/22/hover-and-click-触发圆形元素/](http://tympanus.net/codrops/2011/11/22/hover-and-click-trigger-circular-elements/)

仅在 CSS 中是不可能的，因为所有元素都被视为矩形，即使它们以圆角呈现。

# css - 如何使用 CSS 为 .jpg 图像设置动画？

> ID：14991140
> 
> 赞同：2
> 
> 时间：2013-02-20T22:27:47.233
> 
> 标签：css, animation

我正在尝试为图像设置动画，即从左到右移动它，但在实现 css 动画关键帧之前，我注意到我无法让 html 中的元素遵循 css 样式 - 无论我在 css 中进行的样式更改，图片网页保持相同的大小，在相同的位置等。

html:

```
<div id="animate"><img class="thumbnail" src="flower.jpg"> </div> 
```

CSS：

```
#animate 
{
    width:200x;
    height:100px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:29:28.717

您需要选择`img`：

```
img {
    width: 200x;
    height: 100px;
} 
```

# java - Java 的 WCF 通讯员是什么？

> ID：14991141
> 
> 赞同：12
> 
> 时间：2013-02-20T22:27:50.647
> 
> 标签：java, .net, wcf

是否有像 WCF for Java 这样的独特服务集中器，我可以在其中为不同的媒体创建和托管服务？

* * *

变化：在java世界里好像有一个不同的概念，是不是叫应用服务器？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-03T20:47:18.927

[JAX-WS / 地铁](http://metro.java.net/)

*   允许您对 Web 服务类和方法进行注释，并从这些注释生成 WSDL，就像 WCF 一样。
*   允许您首先生成服务 wsdl，就像 WCF
*   允许您生成 Web 服务客户端，就像 WCF
*   允许您在任何 Java EE 容器中托管您的 Web 服务。这可与 WCF 的 IIS 托管相媲美。
*   允许您使用`Endpoint`api 托管您的 Web 服务。这可与 WCF 自托管相媲美。
*   允许您在[SOAP 或 Fast InfoSet](http://metro.java.net/guide/ch02.html#using-fastinfoset) over [HTTP 或 TCP 协议](http://metro.java.net/guide/ch09.html)之间进行选择，例如[WCF 传输选项](http://msdn.microsoft.com/en-us/library/ms733769.aspx)。（虽然我不认为它允许命名管道......）

所以在很多方面它对应于 WCF。不过，它比 WCF 更关注 Web 服务。就像名字所说的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:50:02.500

我找到了一些博客，它很旧，但它很好地解释了**java jax-ws 和 .net-wcf。**

希望[这](http://www.intertech.com/Blog/Post/NET-WCF-vs-Java-JAX-WS-and-JAX-RS.aspx)有帮助..！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:51:39.263

我发现的选项是

[网络](http://netty.io/)http://netty.io/

阿帕奇米娜 [http://mina.apache.org/](http://mina.apache.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T22:29:52.020

是的，使用它非常简单，它被称为 java webservices，它使用 WCF 之类的 wsdl 文件和一切。参考这个：[http ://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/](http://www.mkyong.com/webservices/jax-ws/jax-ws-hello-world-example/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T13:51:20.747

看来您想在`application` 本地托管您的...为此，有几个 [应用程序服务器](http://en.wikipedia.org/wiki/Application_server)之类的`Jboss,Glassfish,Tomcat,IBM Web sphere`...

# c# - 获取 AutoCAD 项目详细信息

> ID：14991146
> 
> 赞同：0
> 
> 时间：2013-02-20T22:28:09.087
> 
> 标签：c#, autocad-plugin

我正在尝试通过插件中的 C# 获取 Autocad 项目的项目详细信息。我可以访问以下类中的一些属性。

```
Autodesk.ProcessPower.PlantInstance.PlantApplication.CurrentProject 
```

但是，此类不提供所有项目详细信息，例如项目编号等。如何通过 C# 访问项目详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:38:27.253

您必须将 CurrentProject 转换为适当的项目部分，如下所示：http: [//adndevblog.typepad.com/autocad/2012/05/getting-all-the-properties-of-a-selected-pipe-in -plant3d-using-cnet.html](http://adndevblog.typepad.com/autocad/2012/05/getting-all-the-properties-of-a-selected-pipe-in-plant3d-using-cnet.html)

他们使用对 P3dProjectParts.dll 的引用来获取 PipingProject 类。有一个基础 ProjectPartsMgd.dll，其中包含通用项目部分实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T00:40:48.303

花了一点时间从项目详细信息中获取项目编号，所以我想我会在这里发布我的解决方案：

```
PnIdProject oPnIdProject =
    (PnIdProject)PlantApplication.CurrentProject.ProjectParts["PnID"];

//Assuming you want Project Number from the "General" category.  If you have
//a custom category property you want, just replace "General" with the name
//of the custom category
List<ProjectProperty> metaData = 
    oPnIdProject.GetProjectPropertyMetadata("General");

string projectNumberString = "";

foreach (ProjectProperty prop in metaData)
{
    if (prop.Name == "Project_Number")
    {
        projectNumberString = oPnIdProject.GetProjectPropertyValue(prop);
    }
} 
```

我假设任何项目部分都可以这样做......

# perl - 这个 bash 脚本如何导致无限循环？

> ID：14991148
> 
> 赞同：1
> 
> 时间：2013-02-20T22:28:28.207
> 
> 标签：perl, bash, tee, ifs

通过一些谷歌搜索（无论如何我都不是 bash 专家），我能够编写一个 bash 脚本，它允许我运行一个测试套件并在它运行时在底部输出一个状态栏。通常需要大约 10 个小时，状态栏会告诉我有多少测试通过，多少​​失败。

有时它工作得很好，但偶尔我会遇到一个无限循环，这很糟糕（mmm-kay？）。这是我正在使用的代码：

```
#!/bin/bash
WHITE="\033[0m"
GREEN="\033[32m"
RED="\033[31m"

(run_test_suite 2>&1) | tee out.txt |
while IFS=read -r line;
do
    printf "%$(tput cols)s\r" " ";
    printf "%s\n" "$line";

    printf "${WHITE}Passing Tests: ${GREEN}$(grep -c passed out.txt)\t"         2>&1;
    printf "${WHITE}Failed Tests: ${RED}$(   grep -c FAILED out.txt)${WHITE}\r" 2>&1;
done 
```

当我遇到这个错误时会发生什么，我将有一个错误消息无限重复，导致日志文件 ( `out.txt`) 变成一些数兆字节的怪物（我认为它进入了 GB 一次）。这是一个重复的示例错误（每组之间有四行空白）：

```
warning caused by MY::Custom::Perl::Module::TEST_FUNCTION
print() on closed filehandle GEN3663 at /some/CPAN/Perl/Module.pm line 123. 
```

我尝试取消`2>&1`重定向，并尝试更改`while IFS=read -r line;`为`while read -r line;`，但我不断进入无限循环。奇怪的是，这似乎在大多数情况下都会发生，但有时我完成了长长的测试套件而没有任何问题。

**编辑**：

我写这篇文章的原因是从黑白测试套件升级到彩色测试套件（因此是 ANSI 代码）。以前，我会使用

```
run_test_suite > out.txt 2>&1 &
watch 'grep -c FAILED out.txt; grep -c passed out.txt; tail -20 out.txt' 
```

以这种方式运行它会从 Perl 获得相同的警告，但会将其打印到文件中并继续前进，而不是陷入无限循环。使用 watch，也会打印类似的东西，`[32m`而不是实际将文本渲染为绿色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:49:44.267

该错误在您的脚本中。这不是 IO 错误；这是一个非法的参数错误。当您作为句柄提供的变量根本不是句柄或者是您已关闭的句柄时，就会发生该错误。

写入损坏的管道会导致进程被杀死`SIGPIPE`或`print`返回 false 并`$!`设置为`EPIPE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:08:21.333

经过一些修改，我能够修复 perl 错误，并且 bash 脚本现在似乎运行良好。但是，如果将来发生类似的事情，这似乎是运行测试套件的一种更安全的方法：

```
#!/bin/bash
WHITE="\033[0m"
GREEN="\033[32m"
RED="\033[31m"

run_full_test > out.txt 2>&1 &
tail -f out.txt | while IFS= read line; do
    printf "%$(tput cols)s\r" " ";
    printf "%s\n" "$line";

    printf "${WHITE}Passing Tests: ${GREEN}$(grep -c passed     out.txt)\t"         2>&1;
    printf "${WHITE}Failed Tests: ${RED}$(   grep -c 'FAILED!!' out.txt)${WHITE}\r" 2>&1;
done 
```

这有一些缺点。主要是，如果我点击`Ctrl-C`停止测试，它似乎已经停止，但实际上run_full_test仍在后台运行，我需要记住手动杀死它。此外，当测试完成时`tail -f`仍在运行。换句话说，这里有两个进程在运行并且它们不同步。

这是原始脚本，稍作修改，解决了这些问题，但并非万无一失（即，如果 run_full_test 有问题，可能会陷入无限循环）：

```
#!/bin/bash
WHITE="\033[0m"
GREEN="\033[32m"
RED="\033[31m"

(run_full_test 2>&1) | tee out.txt | while IFS= read line; do
    printf "%$(tput cols)s\r" " ";
    printf "%s\n" "$line";

    printf "${WHITE}Passing Tests: ${GREEN}$(grep -c passed     out.txt)\t"         2>&1;
    printf "${WHITE}Failed Tests: ${RED}$(   grep -c 'FAILED!!' out.txt)${WHITE}\r" 2>&1;
done 
```

# sql - 为非 IT 用户远程运行存储过程

> ID：14991149
> 
> 赞同：1
> 
> 时间：2013-02-20T22:28:33.970
> 
> 标签：sql, sql-server, stored-procedures, data-warehouse, business-intelligence

我们有一个用于数据仓库的 SQL 服务器。我们希望让部门能够在需要时（而不仅仅是按时）更新数据。

是最好的方法吗？我们有一个我们正在考虑从批处理脚本调用的 SP，但有没有更优雅的方法？

数据最终将进入 Palo Jedox for BI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:34:30.123

我通过编写一个用户可以运行的 ColdFusion 网页来做这种事情。也可以使用 .net、php、java 等来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:46:00.993

不要让用户直接更改表格。

相反，创建一个或多个存储过程来执行您想要执行的更新/插入/删除。如果是一条记录，您可以将值作为参数传入。如果是一堆记录，您需要一种机制将更大的数据传输到数据库中——要么从文本文件中读取，要么以某种方式将其放入数据库中的表中。

确保存储过程与基础表具有相同的所有者。使用所有者链接，存储过程将能够对表进行更改。任何时候用户都不能直接更改数据，只能通过存储过程。

然后，记录，记录，记录所有完成的事情。您想知道每次调用此存储过程来更改数据的时间。

# android - 将 Android RecognizerIntent 与蓝牙耳机一起使用

> ID：14991158
> 
> 赞同：26
> 
> 时间：2013-02-20T22:29:00.743
> 
> 标签：android, bluetooth, speech-recognition

我使用以下代码在 Android 中启动语音识别：

```
PackageManager pm = getPackageManager();
List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);

if (activities.size() == 0) {
    displayWarning("This device does not support speech recognition");
    return;
}

Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);

startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE); 
```

这工作正常。但是，它似乎不接受来自使用“电话音频”配置文件配对和连接的蓝牙耳机的语音输入。

我可以使用名为[SoundAbout](https://play.google.com/store/apps/details?id=com.woodslink.android.wiredheadphoneroutingfix)的应用程序将“媒体音频”强制为“蓝牙（单声道）（SCO）”。有了这个应用程序集，我的语音识别现在可以从我的耳机中获取我的语音输入。

如何使用 RecognizerIntent 并从蓝牙耳机获取语音输入？

我在 API 级别 16 中看到有一个新的意图操作[ACTION_VOICE_SEARCH_HANDS_FREE](http://developer.android.com/reference/android/speech/RecognizerIntent.html#ACTION_VOICE_SEARCH_HANDS_FREE)。这对我来说太新了，但是这能解决我的问题吗？

我是否必须在 AudioManager 中混混（就像我假设 SoundAbout 正在做的那样）才能使用[setBluetoothScoOn](http://developer.android.com/reference/android/media/AudioManager.html#setBluetoothScoOn%28boolean%29) () 或[startBluetoothSco](http://developer.android.com/reference/android/media/AudioManager.html#startBluetoothSco%28%29) () 路由音频输入？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-21T02:29:44.530

清单许可

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

`BluetoothHelper extends BluetoothHeadSetUtils`在你的`Activity`or中创建一个内部类`Service`。声明一个类成员`mBluetoothHelper`并在其中实例化它`onCreate()`

```
BluetoothHelper mBluetoothHelper;

@Override
public void onCreate()
{ 
     mBluetoothHelper = new BluetoothHelper(this);
}  

@Override
onResume()
{ 
    mBluetoothHelper.start();
}

@Override
onPause()
{
    mBluetoothHelper.stop();
}

// inner class
// BluetoothHeadsetUtils is an abstract class that has
// 4 abstracts methods that need to be implemented.
private class BluetoothHelper extends BluetoothHeadSetUtils
{
    public BluetoothHelper(Context context)
    {
        super(context);
    }

    @Override
    public void onScoAudioDisconnected()
    {
        // Cancel speech recognizer if desired
    }

    @Override
    public void onScoAudioConnected()
    {           
        // Should start speech recognition here if not already started  
    }

    @Override
    public void onHeadsetDisconnected()
    {

    }

    @Override
    public void onHeadsetConnected()
    {

    }
} 
```

要将蓝牙耳机与 Text To Speech 一起使用，您需要在调用 speak 之前将 AudioManager 设置为 STREAM_VOICE_CALL。或者使用下面的代码

```
protected void speak(String text)
{

    HashMap<String, String> myHashRender = new HashMap<String, String>();

    if (mBluetoothHelper.isOnHeadsetSco())
    {
        myHashRender.put(TextToSpeech.Engine.KEY_PARAM_STREAM, 
            String.valueOf(AudioManager.STREAM_VOICE_CALL));
    }
    mTts.speak(text, TextToSpeech.QUEUE_FLUSH, myHashRender);
} 
```

将 BluetoothHeadsetUtils 类复制到您的项目中。

```
import java.util.List;

import android.annotation.SuppressLint;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothClass;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothHeadset;
import android.bluetooth.BluetoothProfile;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.media.AudioManager;
import android.os.Build;
import android.os.CountDownTimer;
import android.util.Log;

/**
 * This is a utility to detect bluetooth headset connection and establish audio connection
 * for android API >= 8\. This includes a work around for  API < 11 to detect already connected headset
 * before the application starts. This work around would only fails if Sco audio
 * connection is accepted but the connected device is not a headset.
 * 
 * @author Hoan Nguyen
 *
 */
public abstract class BluetoothHeadsetUtils
{
    private  Context mContext;

    private BluetoothAdapter mBluetoothAdapter;
    private BluetoothHeadset mBluetoothHeadset;
    private BluetoothDevice mConnectedHeadset;

    private AudioManager mAudioManager;

    private boolean mIsCountDownOn;
    private boolean mIsStarting;
    private boolean mIsOnHeadsetSco;
    private boolean mIsStarted;

    private static final String TAG = "BluetoothHeadsetUtils"; //$NON-NLS-1$

    /**
     * Constructor
     * @param context
     */
    public BluetoothHeadsetUtils(Context context)
    {
        mContext = context;
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        mAudioManager = (AudioManager) mContext.getSystemService(Context.AUDIO_SERVICE);
    }

    /**
     * Call this to start BluetoothHeadsetUtils functionalities.
     * @return  The return value of startBluetooth() or startBluetooth11()
     */
    public boolean start()
    {
        if (!mIsStarted)
        {
            mIsStarted = true;

            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB)
            {
                mIsStarted = startBluetooth();
            }
            else
            {
                mIsStarted = startBluetooth11();
            }
        }

        return mIsStarted;
    }

    /**
     * Should call this on onResume or onDestroy.
     * Unregister broadcast receivers and stop Sco audio connection
     * and cancel count down.
     */
    public void stop()
    {
        if (mIsStarted)
        {
            mIsStarted = false;

            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB)
            {
                stopBluetooth();
            }
            else
            {
                stopBluetooth11();
            }
        }
    }

    /**
     * 
     * @return  true if audio is connected through headset.
     */
    public boolean isOnHeadsetSco()
    {
        return mIsOnHeadsetSco;
    }

    public abstract void onHeadsetDisconnected();

    public abstract void onHeadsetConnected();

    public abstract void onScoAudioDisconnected();

    public abstract void onScoAudioConnected();

    /**
     * Register for bluetooth headset connection states and Sco audio states.
     * Try to connect to bluetooth headset audio by calling startBluetoothSco(). 
     * This is a work around for API < 11 to detect if a headset is connected before 
     * the application starts.
     * 
     * The official documentation for startBluetoothSco() states
     * 
     * "This method can be used by applications wanting to send and received audio to/from 
     *  a bluetooth SCO headset while the phone is not in call."
     *  
     * Does this mean that startBluetoothSco() would fail if the connected bluetooth device
     * is not a headset?
     * 
     * Thus if a call to startBluetoothSco() is successful, i.e mBroadcastReceiver will receive
     * an ACTION_SCO_AUDIO_STATE_CHANGED with intent extra SCO_AUDIO_STATE_CONNECTED, then
     * we assume that a headset is connected.
     * 
     * @return  false if device does not support bluetooth or current platform does not supports
     *                use of SCO for off call.
     */
    @SuppressWarnings("deprecation")
    private boolean startBluetooth()
    {
        Log.d(TAG, "startBluetooth"); //$NON-NLS-1$

        // Device support bluetooth
        if (mBluetoothAdapter != null)
        {       
            if (mAudioManager.isBluetoothScoAvailableOffCall())
            {
                mContext.registerReceiver(mBroadcastReceiver, 
                                        new IntentFilter(BluetoothDevice.ACTION_ACL_CONNECTED));
                mContext.registerReceiver(mBroadcastReceiver, 
                                        new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED));
                mContext.registerReceiver(mBroadcastReceiver, 
                                        new IntentFilter(AudioManager.ACTION_SCO_AUDIO_STATE_CHANGED));

                // Need to set audio mode to MODE_IN_CALL for call to startBluetoothSco() to succeed.
                mAudioManager.setMode(AudioManager.MODE_IN_CALL);

                mIsCountDownOn = true;
                // mCountDown repeatedly tries to start bluetooth Sco audio connection.
                mCountDown.start();

                // need for audio sco, see mBroadcastReceiver
                mIsStarting = true;

                return true;
            }
        }

        return false;
    }

    /**
     * Register a headset profile listener
     * @return false    if device does not support bluetooth or current platform does not supports
     *                  use of SCO for off call or error in getting profile proxy.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private boolean startBluetooth11()
    {
        Log.d(TAG, "startBluetooth11"); //$NON-NLS-1$

        // Device support bluetooth
        if (mBluetoothAdapter != null)
        {
            if (mAudioManager.isBluetoothScoAvailableOffCall())
            {
                // All the detection and audio connection are done in mHeadsetProfileListener
                if (mBluetoothAdapter.getProfileProxy(mContext, 
                                                    mHeadsetProfileListener, 
                                                    BluetoothProfile.HEADSET))
                {
                    return true;
                }
            }
        }

        return false;
    }

    /**
     * API < 11
     * Unregister broadcast receivers and stop Sco audio connection
     * and cancel count down.
     */
    private void stopBluetooth()
    {
        Log.d(TAG, "stopBluetooth"); //$NON-NLS-1$

        if (mIsCountDownOn)
        {
            mIsCountDownOn = false;
            mCountDown.cancel();
        }

        // Need to stop Sco audio connection here when the app
        // change orientation or close with headset still turns on.
        mContext.unregisterReceiver(mBroadcastReceiver);
        mAudioManager.stopBluetoothSco();
        mAudioManager.setMode(AudioManager.MODE_NORMAL);
    }

    /**
     * API >= 11
     * Unregister broadcast receivers and stop Sco audio connection
     * and cancel count down.
     */
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    protected void stopBluetooth11()
    {
        Log.d(TAG, "stopBluetooth11"); //$NON-NLS-1$

        if (mIsCountDownOn)
        {
            mIsCountDownOn = false;
            mCountDown11.cancel();
        }

        if (mBluetoothHeadset != null)
        {
            // Need to call stopVoiceRecognition here when the app
            // change orientation or close with headset still turns on.
            mBluetoothHeadset.stopVoiceRecognition(mConnectedHeadset);
            mContext.unregisterReceiver(mHeadsetBroadcastReceiver);
            mBluetoothAdapter.closeProfileProxy(BluetoothProfile.HEADSET, mBluetoothHeadset);
            mBluetoothHeadset = null;
        }
    }

    /**
     * Broadcast receiver for API < 11
     * Handle headset and Sco audio connection states.
     */
    private BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver()
    {
        @SuppressWarnings({"deprecation", "synthetic-access"})
        @Override
        public void onReceive(Context context, Intent intent)
        {
            String action = intent.getAction();

            if (action.equals(BluetoothDevice.ACTION_ACL_CONNECTED))
            {       
                mConnectedHeadset = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                BluetoothClass bluetoothClass = mConnectedHeadset.getBluetoothClass();
                if (bluetoothClass != null)
                {
                    // Check if device is a headset. Besides the 2 below, are there other 
                    // device classes also qualified as headset?
                    int deviceClass = bluetoothClass.getDeviceClass();
                    if (deviceClass == BluetoothClass.Device.AUDIO_VIDEO_HANDSFREE 
                        || deviceClass == BluetoothClass.Device.AUDIO_VIDEO_WEARABLE_HEADSET)
                    {
                        // start bluetooth Sco audio connection.
                        // Calling startBluetoothSco() always returns faIL here, 
                        // that why a count down timer is implemented to call
                        // startBluetoothSco() in the onTick.
                        mAudioManager.setMode(AudioManager.MODE_IN_CALL);
                        mIsCountDownOn = true;
                        mCountDown.start();

                        // override this if you want to do other thing when the device is connected.
                        onHeadsetConnected();
                    }
                }

                Log.d(TAG, mConnectedHeadset.getName() + " connected"); //$NON-NLS-1$
            }
            else if (action.equals(BluetoothDevice.ACTION_ACL_DISCONNECTED))
            {
                Log.d(TAG, "Headset disconnected"); //$NON-NLS-1$

                if (mIsCountDownOn)
                {
                    mIsCountDownOn = false;
                    mCountDown.cancel();
                }

                mAudioManager.setMode(AudioManager.MODE_NORMAL);

                // override this if you want to do other thing when the device is disconnected.
                onHeadsetDisconnected();
            }
            else if (action.equals(AudioManager.ACTION_SCO_AUDIO_STATE_CHANGED))
            {
                int state = intent.getIntExtra(AudioManager.EXTRA_SCO_AUDIO_STATE, 
                                                AudioManager.SCO_AUDIO_STATE_ERROR);

                if (state == AudioManager.SCO_AUDIO_STATE_CONNECTED)
                {
                    mIsOnHeadsetSco = true;

                    if (mIsStarting)
                    {
                        // When the device is connected before the application starts,
                        // ACTION_ACL_CONNECTED will not be received, so call onHeadsetConnected here
                        mIsStarting = false;
                        onHeadsetConnected();
                    }

                    if (mIsCountDownOn)
                    {
                        mIsCountDownOn = false;
                        mCountDown.cancel();
                    }

                    // override this if you want to do other thing when Sco audio is connected.
                    onScoAudioConnected();

                    Log.d(TAG, "Sco connected"); //$NON-NLS-1$
                }
                else if (state == AudioManager.SCO_AUDIO_STATE_DISCONNECTED)
                {
                    Log.d(TAG, "Sco disconnected"); //$NON-NLS-1$

                    // Always receive SCO_AUDIO_STATE_DISCONNECTED on call to startBluetooth()
                    // which at that stage we do not want to do anything. Thus the if condition.
                    if (!mIsStarting)
                    {
                        mIsOnHeadsetSco = false;

                        // Need to call stopBluetoothSco(), otherwise startBluetoothSco()
                        // will not be successful.
                        mAudioManager.stopBluetoothSco();

                        // override this if you want to do other thing when Sco audio is disconnected.
                        onScoAudioDisconnected();
                    } 
                }
            }
        }
    };

    /**
     * API < 11
     * Try to connect to audio headset in onTick.
     */
    private CountDownTimer mCountDown = new CountDownTimer(10000, 1000)
    {

        @SuppressWarnings("synthetic-access")
        @Override
        public void onTick(long millisUntilFinished)
        {
            // When this call is successful, this count down timer will be canceled.
            mAudioManager.startBluetoothSco();

            Log.d(TAG, "\nonTick start bluetooth Sco"); //$NON-NLS-1$
        }

        @SuppressWarnings("synthetic-access")
        @Override
        public void onFinish()
        {
            // Calls to startBluetoothSco() in onStick are not successful.
            // Should implement something to inform user of this failure
            mIsCountDownOn = false;
            mAudioManager.setMode(AudioManager.MODE_NORMAL);

            Log.d(TAG, "\nonFinish fail to connect to headset audio"); //$NON-NLS-1$
        }
    };

    /**
     * API >= 11
     * Check for already connected headset and if so start audio connection.
     * Register for broadcast of headset and Sco audio connection states.
     */
    private BluetoothProfile.ServiceListener mHeadsetProfileListener = new BluetoothProfile.ServiceListener()
    {

        /**
         * This method is never called, even when we closeProfileProxy on onPause.
         * When or will it ever be called???
         */
        @Override
        public void onServiceDisconnected(int profile)
        {
            Log.d(TAG, "Profile listener onServiceDisconnected"); //$NON-NLS-1$
            stopBluetooth11();
        }

        @SuppressWarnings("synthetic-access")
        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        @Override
        public void onServiceConnected(int profile, BluetoothProfile proxy)
        {
            Log.d(TAG, "Profile listener onServiceConnected"); //$NON-NLS-1$

            // mBluetoothHeadset is just a headset profile, 
            // it does not represent a headset device.
            mBluetoothHeadset = (BluetoothHeadset) proxy;

            // If a headset is connected before this application starts,
            // ACTION_CONNECTION_STATE_CHANGED will not be broadcast. 
            // So we need to check for already connected headset.
            List<BluetoothDevice> devices = mBluetoothHeadset.getConnectedDevices();
            if (devices.size() > 0)
            {
                // Only one headset can be connected at a time, 
                // so the connected headset is at index 0.
                mConnectedHeadset = devices.get(0);

                onHeadsetConnected();

                // Should not need count down timer, but just in case.
                // See comment below in mHeadsetBroadcastReceiver onReceive()
                mIsCountDownOn = true;
                mCountDown11.start();

                Log.d(TAG, "Start count down"); //$NON-NLS-1$
            }

            // During the active life time of the app, a user may turn on and off the headset.
            // So register for broadcast of connection states.
            mContext.registerReceiver(mHeadsetBroadcastReceiver, 
                            new IntentFilter(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED));
            // Calling startVoiceRecognition does not result in immediate audio connection.
            // So register for broadcast of audio connection states. This broadcast will
            // only be sent if startVoiceRecognition returns true.
            mContext.registerReceiver(mHeadsetBroadcastReceiver, 
                            new IntentFilter(BluetoothHeadset.ACTION_AUDIO_STATE_CHANGED));
        }
    };

    /**
     *  API >= 11
     *  Handle headset and Sco audio connection states.
     */
    private BroadcastReceiver mHeadsetBroadcastReceiver = new BroadcastReceiver()
    {

        @SuppressWarnings("synthetic-access")
        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        @Override
        public void onReceive(Context context, Intent intent)
        {
            String action = intent.getAction();
            int state;
            if (action.equals(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED))
            {
                state = intent.getIntExtra(BluetoothHeadset.EXTRA_STATE, 
                                            BluetoothHeadset.STATE_DISCONNECTED);
                Log.d(TAG, "\nAction = " + action + "\nState = " + state); //$NON-NLS-1$ //$NON-NLS-2$
                if (state == BluetoothHeadset.STATE_CONNECTED)
                {
                    mConnectedHeadset = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

                    // Calling startVoiceRecognition always returns false here, 
                    // that why a count down timer is implemented to call
                    // startVoiceRecognition in the onTick.
                    mIsCountDownOn = true;
                    mCountDown11.start();

                    // override this if you want to do other thing when the device is connected.
                    onHeadsetConnected();

                    Log.d(TAG, "Start count down"); //$NON-NLS-1$
                }
                else if (state == BluetoothHeadset.STATE_DISCONNECTED)
                {
                    // Calling stopVoiceRecognition always returns false here
                    // as it should since the headset is no longer connected.
                    if (mIsCountDownOn)
                    {
                        mIsCountDownOn = false;
                        mCountDown11.cancel();
                    }
                    mConnectedHeadset = null;

                    // override this if you want to do other thing when the device is disconnected.
                    onHeadsetDisconnected();

                    Log.d(TAG, "Headset disconnected"); //$NON-NLS-1$
                }
            }
            else // audio
            {
                state = intent.getIntExtra(BluetoothHeadset.EXTRA_STATE, BluetoothHeadset.STATE_AUDIO_DISCONNECTED);
                Log.d(TAG, "\nAction = " + action + "\nState = " + state); //$NON-NLS-1$ //$NON-NLS-2$
                if (state == BluetoothHeadset.STATE_AUDIO_CONNECTED)
                {
                    Log.d(TAG, "\nHeadset audio connected");  //$NON-NLS-1$

                    mIsOnHeadsetSco = true;

                    if (mIsCountDownOn)
                    {
                        mIsCountDownOn = false;
                        mCountDown11.cancel();
                    }

                    // override this if you want to do other thing when headset audio is connected.
                    onScoAudioConnected();
                }
                else if (state == BluetoothHeadset.STATE_AUDIO_DISCONNECTED)
                {
                    mIsOnHeadsetSco = false;

                    // The headset audio is disconnected, but calling
                    // stopVoiceRecognition always returns true here.
                    mBluetoothHeadset.stopVoiceRecognition(mConnectedHeadset);

                    // override this if you want to do other thing when headset audio is disconnected.
                    onScoAudioDisconnected();

                    Log.d(TAG, "Headset audio disconnected"); //$NON-NLS-1$
                }
            }   
        }
    };

    /**
     * API >= 11
     * Try to connect to audio headset in onTick.
     */
    private CountDownTimer mCountDown11 = new CountDownTimer(10000, 1000)
    {
        @TargetApi(Build.VERSION_CODES.HONEYCOMB)
        @SuppressWarnings("synthetic-access")
        @Override
        public void onTick(long millisUntilFinished)
        {
            // First stick calls always returns false. The second stick
            // always returns true if the countDownInterval is set to 1000.
            // It is somewhere in between 500 to a 1000.
            mBluetoothHeadset.startVoiceRecognition(mConnectedHeadset);

            Log.d(TAG, "onTick startVoiceRecognition"); //$NON-NLS-1$
        }

        @SuppressWarnings("synthetic-access")
        @Override
        public void onFinish()
        {
            // Calls to startVoiceRecognition in onStick are not successful.
            // Should implement something to inform user of this failure
            mIsCountDownOn = false;
            Log.d(TAG, "\nonFinish fail to connect to headset audio"); //$NON-NLS-1$
        }
    };

} 
```

（2013 年 4 月 30 日）必要时进行编辑以更改为 @TargetApi(Build.VERSION_CODES.HONEYCOMB)。如果您对 API 8 或 9 的 java.lang.NoClassDefFoundError 有问题，只需删除所有 API >= 11 代码。startBluetoothSco() 适用于所有 API 版本。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-01T13:55:07.273

我认为您所要做的就是更改应用程序上的音频设置。

当您想通过蓝牙从耳机接收和发送声音时，您应该输入以下代码。

```
 AudioManager audioManager;

audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);

audioManager.setMode(AudioManager.MODE_IN_COMMUNICATION);
audioManager.startBluetoothSco();
audioManager.setBluetoothScoOn(true); 
```

不使用蓝牙时，不要忘记通过以下方式恢复手机上的正常设置。

```
audioManager.setMode(AudioManager.MODE_NORMAL);
audioManager.stopBluetoothSco();
audioManager.setBluetoothScoOn(false); 
```

所需的权限如下：

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

这简单！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T02:16:52.433

即使蓝牙耳机已配对并连接到电话音频配置文件 (HF/HS)，实际音频连接 (SCO) 也仅在来电并被接听时建立。

为了让您的 VR 应用程序接受来自蓝牙耳机的语音输入，您的应用程序必须在某些 VR 输入触发器上为耳机建立 SCO，您需要使用以下命令 - [isBluetoothScoAvailableOffCall](http://developer.android.com/reference/android/media/AudioManager.html#isBluetoothScoAvailableOffCall%28%29)来检查平台是否支持此功能，然后使用startBluetoothSco 和[stopBluetoothSco](http://developer.android.com/reference/android/media/AudioManager.html#startBluetoothSco%28%29)启动 SCO 到耳机。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T09:51:05.507

startBluetoothSco 需要很长时间才能建立，如果您需要使用它进行语音控制，这是一个问题。

有没有一种快速的方法可以使用蓝牙麦克风收听，然后在收听后将其关闭？

如果连接一直处于打开状态，则无法通过 A2DP 流式传输音频。

所以，理想世界：

通过 A2DP 输出音频。当它开始收听时，它使用 SCO 蓝牙麦克风。任何响应都是 A2DP。

事实上，如果它已经连接 - 你可以通过将媒体流更改为调用流来即时切换吗？如果是这样，是否有任何明显的延迟？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-14T16:36:23.697

添加这些权限：

```
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" /> 
```

然后为蓝牙创建一个广播接收器。

```
public class BTReceiver extends BroadcastReceiver {
    private static final String TAG = "BTReceiver";
    int state = 0;
    AudioManager audioManager;

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("Z", "Received: Bluetooth");
        try {
            Bundle extras = intent.getExtras();
            if (extras != null) { //Do something
                audioManager = (AudioManager) context.getSystemService(AUDIO_SERVICE);

                String action = intent.getAction();
                Toast.makeText(context, action, Toast.LENGTH_LONG).show();
                int state;
                if (action.equals(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED)) {
                    state = intent.getIntExtra(BluetoothHeadset.EXTRA_STATE,
                            BluetoothHeadset.STATE_DISCONNECTED);
                    Log.d(TAG, "\nAction = " + action + "\nState = " + state); //$NON-NLS-1$ //$NON-NLS-2$
                    if (state == BluetoothHeadset.STATE_CONNECTED) {
                        setModeBluetooth();
                    } else if (state == BluetoothHeadset.STATE_DISCONNECTED) {
                        // Calling stopVoiceRecognition always returns false here
                        // as it should since the headset is no longer connected.
                        setModeNormal();

                        Log.d(TAG, "Headset disconnected"); //$NON-NLS-1$
                    }
                } else // audio
                {
                    state = intent.getIntExtra(BluetoothHeadset.EXTRA_STATE, BluetoothHeadset.STATE_AUDIO_DISCONNECTED);
                    Log.d(TAG, "\nAction = " + action + "\nState = " + state); //$NON-NLS-1$ //$NON-NLS-2$
                    if (state == BluetoothHeadset.STATE_AUDIO_CONNECTED) {
                        Log.d(TAG, "\nHeadset audio connected");  //$NON-NLS-1$
                        setModeBluetooth();
                    } else if (state == BluetoothHeadset.STATE_AUDIO_DISCONNECTED) {
                        setModeNormal();
                        Log.d(TAG, "Headset audio disconnected"); //$NON-NLS-1$
                    }
                }
            }
        } catch (Exception e) {
            Log.d("Exception", "Exception " + e.toString());
        }
    }

    private void setModeBluetooth() {
        try {

            audioManager.setMode(AudioManager.MODE_IN_COMMUNICATION);
            audioManager.startBluetoothSco();
            audioManager.setBluetoothScoOn(true);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void setModeNormal() {
        try {
            audioManager.setMode(AudioManager.MODE_NORMAL);
            audioManager.stopBluetoothSco();
            audioManager.setBluetoothScoOn(false);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

在 Manifest 中注册接收者：

```
 <receiver
            android:name=".speech.BTReceiver"
            android:enabled="true"
            android:permission="android.permission.BLUETOOTH">
            <intent-filter>
                <action android:name="android.bluetooth.adapter.action.CONNECTION_STATE_CHANGED" />
            </intent-filter>
        </receiver> 
```

在您的活动中注册和取消注册此接收器：

首先初始化它，在 onCreate

```
 mHeadsetBroadcastReceiver = new BTReceiver(); 
```

然后

```
@Override
protected void onResume() {
    super.onResume();

    registerReceiver(mHeadsetBroadcastReceiver,
            new IntentFilter(BluetoothHeadset.ACTION_CONNECTION_STATE_CHANGED));
    // Calling startVoiceRecognition does not result in immediate audio connection.
    // So register for broadcast of audio connection states. This broadcast will
    // only be sent if startVoiceRecognition returns true.
    registerReceiver(mHeadsetBroadcastReceiver,
            new IntentFilter(BluetoothHeadset.ACTION_AUDIO_STATE_CHANGED));
}

@Override
protected void onPause() {
    unregisterReceiver(mHeadsetBroadcastReceiver);

    super.onPause();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-16T00:13:44.330

Hoan Nguyen 做得很好！
测试他的代码我注意到在某些情况下 stopBluetoothSco() 没有被调用。

我建议对 CountDownTimer 做一点改动：

```
private CountDownTimer mCountDown11 = new CountDownTimer(10000, 1000)
{
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    @SuppressWarnings("synthetic-access")
    @Override
    public void onTick(long millisUntilFinished)
    {

        mBluetoothHeadset.startVoiceRecognition(mConnectedHeadset);

        Log.d(TAG, "onTick startVoiceRecognition"); //$NON-NLS-1$
    }

    @SuppressWarnings("synthetic-access")
    @Override
    public void onFinish()
    {
        mIsCountDownOn = false;

        /* START EDIT: Unregister broadcast receivers and stop Sco audio connection
           and cancel count down if fails to connect. */

        stopBluetooth11();

        /* END EDIT */

        Log.d(TAG, "\nonFinish fail to connect to headset audio"); //$NON-NLS-1$
    }
}; 
```

# java - 为什么我不能在 return 语句中指定两个字段

> ID：14991159
> 
> 赞同：2
> 
> 时间：2013-02-20T22:29:09.743
> 
> 标签：java

我正在做官方 Java 教程的[练习 1](http://docs.oracle.com/javase/tutorial/java/javaOO/QandE/creating-questions.html)。到目前为止，我有这个程序：

```
public class Card {
    public final int rank;
    public final int suit;

    public Card(int rank, int suit){
        this.rank = rank;
        this.suit = suit;
    }

    public final static int Diamonds = 1;
    public final static int Clubs =2;
    public final static int Hearts = 3;
    public final static int Spades =4;

    public final static int Ace =1;
    public final static int Deu=2;
    public final static int Three =3;
    public final static int Four =4;
    public final static int Five = 5;
    public final static int Six = 6;
    public final static int Seven = 7;
    public final static int Eight =8;
    public final static int Nine = 9;
    public final static int Ten =10;
    public final static int Jack =11;
    public final static int Queen =12;
    public final static int King=13;

    public int returnSuit() {
        return suit;
        return rank;
    }
} 
```

但是，Eclipse 不断给我该`returnSuit`方法中第二个字段的“无法访问的代码”错误。我用谷歌搜索了我的问题，但似乎找不到解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:31:25.937

*Java*`return`中的是当前方法的结束点。此时，该方法存在并返回指定的值。

 *它给你一个错误，因为你永远不会到达第二个`return`，因为方法已经完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:30:54.497

您不能一个接一个地拥有多个返回语句。当编译器看到返回语句时，它基本上会终止该方法并返回到前一个控件。如果你有两个一个接一个的返回，编译器肯定会确定第一个返回将通过终止方法返回值。你的第二个 return 语句永远不会回复，因此编译器抱怨`unreachable code`我猜你需要类似下面的东西：

```
public int returnSuit(){
    if(somecond is true)
        return suit;
    else
        return rank;
} 
```*

# python - 如何阻止 Python 在执行时检查文件

> ID：14991160
> 
> 赞同：0
> 
> 时间：2013-02-20T22:29:10.057
> 
> 标签：python, file, order-of-execution

我已经编写了一个脚本，它通过调用另一个 python 模块来生成许多包含 json 数据的文件。然后，我希望能够在它们生成后导入它们并使用它们包含的数据进行处理。

问题是，当我尝试运行此脚本时，它抱怨文件不存在。我猜是因为 Python 在执行代码之前会检查所有要打开的文件，而不管打开的语句在代码中的什么位置。有没有办法解决这个问题，所以在生成器调用模块创建文件之前它不会尝试打开文件？下面的示例代码：

```
#!/usr/bin/python

import os, sys
import json
import random
import ships_levels_stats_generator

def main():
    number = 10
    ships_levels_stats_generator.interface(str(number))

    for i in range(0, number):
        with open('../Test/attack%s.json' % i) as attack_json:
            attack_data = json.load(attack_json)
        with open('../Test/hp%s.json' % i) as hp_json:
            hp_data = json.load(hp_json)
        with open('../Test/repair%s.json' % i) as repair_json:
            repair_data = json.load(repair_json)

    for key in attack_data.iterkeys():
        if len(attack_data[key]) < 20:
            print "Under 20."
        elif len(attack_data[key]) < 30:
            print "Under 30."
        elif len(attack_data[key]) < 60:
            print "Under 50."
        elif len(attack_data[key]) < 80:
            print "Under 80."
        else:
            print "Over 80." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:36:04.380

这只是一个缩进问题：for 循环需要缩进成为 main 函数的一部分。就像现在一样，它在每次加载文件时运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:38:31.590

你从不打电话 `ships_levels_stats_generator.interface()`，这大概是你创建文件的地方，丢失`def main():`

# objective-c - 'Login:' 实现中的参数类型冲突：'__strong id' vs '__strong Callback'（又名 'void (^__strong)(RESTResponse *__strong)'）

> ID：14991162
> 
> 赞同：4
> 
> 时间：2013-02-20T22:29:14.683
> 
> 标签：objective-c, objective-c-blocks, codeblocks

对目标 C 非常新鲜，无法弄清楚我错过了什么。

.h 文件

```
#import <Foundation/Foundation.h>
#import "RESTResponse.h"
typedef void (^Callback)(RESTResponse*);

@interface AquaUser : NSObject

....

-(void)Login:Callback;
-(void)Register:Callback;

@end 
```

.m 文件

```
-(void)Login:(Callback) handler
{
...
 RESTResponse *result = [RESTResponse new];
         result.sucesss = true  ;
         result.response = @"Login succesfull";
         handler(result);
...
} 
```

在 .mi 中收到有关登录声明的警告，并在“登录：”的实现中注册冲突的参数类型：“_ *strong id”与“* _strong 回调”（又名“void (^ *_strong)(RESTResponse ** _strong)”）

尽管代码可以编译并且可以工作，但我还是想在这里吸取教训。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T22:31:50.180

看起来您缺少 .h 文件中的类型。

```
@interface AquaUser : NSObject

....

-(void)Login:(Callback)handler;
-(void)Register:(Callback)handler;

@end 
```

编辑：

顺便说一句，在目标 c 中，最好让您的方法以小写字符开头。没什么大不了的，但这是常见的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-20T12:43:27.980

Happens also if you don't #import class that is declaring used Type in your .h file and use @class instead. @class doesn't work in this case. I had an enum defined in class I only mentioned with @class and wrote function that uses that enum in .h of my other class. Switching to #import worked.

# box-api - 如何获取 ITEM_SHARED_CREATE 和 ITEM_SHARED_UNSHARE 事件的来源？

> ID：14991166
> 
> 赞同：0
> 
> 时间：2013-02-20T22:29:39.193
> 
> 标签：box-api

对于 Box API 中的大多数事件，事件的源字段会通知客户端哪个对象已更改。

对于 ITEM_SHARED_CREATE 和 ITEM_SHARED_UNSHARE 这两个共享事件，事件的源字段始终设置为空。AFAIK，事件条目中没有 ID 指向已共享或未共享的对象。如果不通过 API 对 Box 文件系统进行全面重新扫描，有没有办法确定哪些文件/文件夹已共享/取消共享？

这是一个示例响应，请注意 null 源字段：

```
{"type":"event",
 "event_id":"57b34bc08ed2720fb72c2a1aba56cc6b399e8e7d",
 "created_by":
    {"type":"user",
     "id":"xxx",
     "name":"Joe Polastre",
     "login":"joe@xxx"},
 "created_at":"2013-02-14T20:39:22-08:00",
 "recorded_at":"2013-02-14T20:39:23-08:00",
 "event_type":"ITEM_SHARED_CREATE",
 "session_id":"925514914511d78b532462",
 "source":null} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:06:50.047

This looks like something we need to fix on our end. Please email into us at API AT box.com if you'd like to be updated on the progress we make.

# .net - 在 .NET 中使用哪些好的倒排索引库？

> ID：14991167
> 
> 赞同：5
> 
> 时间：2013-02-20T22:29:41.407
> 
> 标签：.net, solr, lucene, indexing, lucene.net

我有一个 .NET 桌面应用程序，我需要在其中搜索大型数据集。每个数据集大约有 100000 个项目，包含 10 个字段。字段的类型是字符串、日期时间、int、float 和自定义项类型。可以有大约 5 个并发数据集，但搜索仅在一个数据集内。

搜索类型是

*   全文支持通配符
*   搜索特定字段
*   日期范围

我正在考虑以下替代方案：

1.  Lucene.NET。但是移植和维护似乎是一项巨大的工作，因此 Solr 满足服务器需求，我对 Lucene.NET 的未来感到担忧。您对 Lucene.NET 的未来发展有何看法？
2.  在桌面上使用 Solr 作为单独的进程。
3.  是否有基于 Lucene 的解决方案的替代方案？
4.  创建我自己的。有一些参考/教程吗？好消息是，我不需要复杂的文本分析或任何评分/刻面功能。只需搜索一个术语（可选通配符）并返回一个项目列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T02:31:03.420

使用 Solr (4.1) 和[SolrNet](https://code.google.com/p/solrnet/)。您需要从源代码编译最新的 SolrNet 以允许它连接到 Solr 4+（这很容易）。

包含 10 个字段的 10 万个文档是您可以使用 Solr 在您的个人计算机上进行原型制作而不会费力的东西。

最困难的部分是“自定义”项目。您需要弄清楚要搜索它们的内容并将它们转换为 Solr 可识别的格式之一。

关于其他点：

1) Lucene.Net 落后于最新的可能，从 .Net 与 Solr 的集成非常容易

3) 我认为 Lucene/Solr/ElasticSearch 在开源领域处于领先地位，甚至正在扼杀专有解决方案

4）不要！只是不要。你会想要一个接一个地添加一个功能（地理？），并且只是重新发明轮子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-30T22:49:37.267

我最近发现了一家名为[FlexSearch](http://flexsearch.net)的公司，它似乎直接通过 IKVM 使用 Lucene。[他们在http://github.com/flexsearch/flexlucene](http://github.com/flexsearch/flexlucene)开源了他们的构建脚本，并且发布了当前的 NuGet 包。

我现在正处于从 Lucene.NET 迁移到 FlexLucene 的过程中，但到目前为止，它看起来很简单，并且让我得到了一个似乎保持最新的东西。

# asp.net - 在“RowUpdating”事件 ASP.NET/VB 时从 Gridview 中的指定列获取单元格值

> ID：14991169
> 
> 赞同：0
> 
> 时间：2013-02-20T22:29:49.500
> 
> 标签：asp.net, vb.net, visual-studio-2010, gridview

我想做的是跟随...我有一个从SQL服务器加载数据的gridview，我有e.NewValue和e.oldValue来确定哪些数据正在被修改/更新，但我需要获得唯一的存储在“ID_ControlCharts”列中的记录 ID

那么，您能否提供一个代码片段/简要说明，说明当我更新 1 个单元格（e.new/old）时如何从 gridview 已填充的“ID_controlCharts”中获取值？

注意：索引不是我需要的，因为可以删除该行并且对该行的引用现在丢失了，因此由于 SQL 服务器键自动填充“ID_controlCharts”，因此非常适合我的情况。

代码隐藏

```
 If e.Equals("Control_SeqRef_CH") = False Then
        Dim oldvalue As String = e.OldValues("Control_SeqRef_CH")
        Dim newvalue As String = e.NewValues("Control_SeqRef_CH")
        Dim rowindex As Integer = e.RowIndex
        Dim IDfromcontrol as integer = ???

        MsgBox(oldvalue)
        MsgBox(newvalue)
        MsgBox(rowindex)
        Msgbox(IDfromcontrol)

    Else
        MsgBox("same")
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:52:33.107

你有几个选择：

如果该`ID_ControlCharts`列在记录中，您不能从 e.OldValues 中获取它吗？

```
Dim IDfromcontrol = e.OldValues("ID_ControlCharts") 
```

如果做不到这一点，如果您设置`ID_ControlCharts`为`DataKeyNames`属性的列，您应该能够使用以下方法获取它`ItemIndex`：

```
Dim IDfromcontrol = GridView1.DataKeys(e.ItemIndex).Values(0) 
```

（这都是记忆中的，所以语法可能有点不对。）

# image - 在 GNU Octave 中绘制显示的图像

> ID：14991177
> 
> 赞同：1
> 
> 时间：2013-02-20T22:30:02.800
> 
> 标签：image, plot, octave

我正在 Octave 中开发一些例程，需要显示图像，然后在顶部绘制一条曲线，希望能覆盖一些图像特征。

但是，我无法弄清楚如何匹配图像和绘图的原点/比例。例如，给定一个 1024x1024 像素的图像，我可以这样做：

```
a=imread('image.png');
x=linspace(1,1024,100);
y=x;
imshow(a);
hold on;
plot(x,y); 
```

但这条线没有缩放到图像，也没有从角落开始。（我知道图像和情节应该起源于不同的角落）。当我从光标位置检查图形坐标时，图像显然不在原点，所以我猜这就是问题的根源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:58:32.300

在这种情况下使用`image()`代替`imshow()`

```
a = imread ('image.png');
x = linspace (1, 1024, 100);
y = x;
image (a);
hold on
plot (x, y);
axis square 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T04:29:55.857

**您可以通过这种方式在图像上绘制函数：**

1.  像这样创建一个名为 stuff.jpg 的图像，任何大小都是可能的，但我制作了大约 6x6 像素，所以我可以测试：

![在 gnu octave 中的图像上绘制函数](../Images/d7dc211891189350a980dad5aaf75ac9.png)

**您可以通过这种方式将函数绘制在其他函数之上：**

```
octave> x = 0:1:5;
octave> plot(x, (3/2).^x, "linewidth", 2, "color", "blue");
octave> hold on
octave> plot(x, 2.^x, "linewidth", 2, "color", "red");
octave> plot(x, factorial(x), "linewidth", 2, "color", "green");
octave> plot(x, x.^3, "linewidth", 2, "color", "black");
octave> 
```

对我来说，它显示了这一点：

![octave，gnu octave 绘制多行](../Images/8d1e8e16ee538cf1ba2b5aebfe033fb6.png)

**发现这里，有一个演练：**

[http://ericleschinski.com/c/algorithm_complexity_big_o_notation/](http://ericleschinski.com/c/algorithm_complexity_big_o_notation/)

考虑到我的年龄，它绘制了我的功率水平。已经九千多了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T21:50:11.853

image 的问题在于它把 (0,0) (而不是 (min_x,min_y)) 放在左上角，而我们通常期望 (0,0) 在左下角。

此外，它仅使用 x 和 y 向量的最大值和最小值，因此 y(end:-1:1) 不起作用。

```
im = imread('file.png'); %read the file
image([xmin xmax],[ymin ymax],im(end:-1:1,:,:)); %put the image on the screen upside down
axis('xy'); % flip the image by putting (0,0) at bottom left. Image now right side up
axis('square'); if you want to aspect ratio of the image to be 1:1
hold on;
plot([xmin xmax],[ymin ymax]) % this should draw a diagonal from bottom left to upper right.
% plot whatever you want to overlay 
```

# django - Django，TemplateDoesNotExist 错误：Heroku 找不到模板目录。如何显示它在哪里看？

> ID：14991180
> 
> 赞同：2
> 
> 时间：2013-02-20T22:30:09.410
> 
> 标签：django, templates, heroku, django-templates

我已经做了很多点击和同步数据库，但还没有找到解决方案。我收到此错误：

```
TemplateDoesNotExist at /quotes/
quotes/index.html
Request Method: GET
Request URL:    http://quoteboard94.herokuapp.com/quotes/
Django Version: 1.4.4 
Exception Type: TemplateDoesNotExist
Exception Value:    
quotes/index.html
Exception Location: /app/.heroku/python/lib/python2.7/site-packages/django/template/loader.py in find_template, line 138
Python Executable:  /app/.heroku/python/bin/python
Python Version: 2.7.3
Python Path:    
['/app',
 '/app/.heroku/python/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/app',
 '/app/.heroku/python/lib/python27.zip',
 '/app/.heroku/python/lib/python2.7',
 '/app/.heroku/python/lib/python2.7/plat-linux2',
 '/app/.heroku/python/lib/python2.7/lib-tk',
 '/app/.heroku/python/lib/python2.7/lib-old',
 '/app/.heroku/python/lib/python2.7/lib-dynload',
 '/app/.heroku/python/lib/python2.7/site-packages',
 '/app/.heroku/python/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info'] 
```

我的设置是这样的：

```
PROJECT_DIR = os.path.dirname(__file__) #for heroku

TEMPLATE_DIRS = (
    os.path.join(PROJECT_DIR, '/templates/'), # for heroku
    '/Users/jacksongonzales/projects/QuoteBoard/templates/',
) 
```

`import os.path`也是最高的。

TEMPLATE_DIRS 下的路径是我的模板的绝对路径。

我没有为 PROJECT_DIR 和 TEMPLATE_DIRS 变量添加正确的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:22:48.980

我相信应该是

`os.path.join(PROJECT_DIR, 'templates'), # for heroku`

没有斜线。

`os.path.join(PROJECT_DIR, '/templates/'), # for heroku`

返回`/templates/`不是您期望的路径

来自[文档](http://docs.python.org/2/library/os.path.html#os.path.join)：

> 如果任何组件是绝对路径，则所有先前的组件（在 Windows 上，包括先前的驱动器号，如果有的话）都将被丢弃，并继续加入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:05:52.080

这是我为 heroku 项目设置的。

```
# here() gives us file paths from the root of the system to the directory
# holding the current file.
here = lambda * x: os.path.join(os.path.abspath(os.path.dirname(__file__)), *x)

PROJECT_ROOT = here("..")
# root() gives us file paths from the root of the system to whatever
# folder(s) we pass it starting at the parent directory of the current file.
root = lambda * x: os.path.join(os.path.abspath(PROJECT_ROOT), *x)

....

TEMPLATE_DIRS = (
    root('templates'),
) 
```

更新：我的项目与部署的项目具有相同的本地模板结构，因此我不需要在模板目录中添加直接路径。你有一个：

```
'/Users/jacksongonzales/projects/QuoteBoard/templates/', 
```

如果你的第一个条目`TEMPLATE_DIRS`是正确的，你需要第二个吗？

# junit - JUnit测试报告testsuite的时间戳是epoch

> ID：14991183
> 
> 赞同：0
> 
> 时间：2013-02-20T22:30:33.410
> 
> 标签：junit, gradle

在我的测试执行中，一些 junit 类报告它们的时间戳是 1970。为什么会发生这种情况？

```
<testsuite name="my.BlahTest" tests="2" failures="0" errors="0" 
    timestamp="1970-01-01T00:00:00" hostname="DEV-DT22" time="1.36139893834E9"> 
```

每次测试运行的相同类不会发生这种情况。它也不会发生在所有课程中。我正在使用 gradle 的 java 插件来执行 JUnit 测试，并且在通过 Ant 使用 JUnit 时从未*注意到这个问题。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:52:04.987

可能是一个错误。请在[http://forums.gradle.org](http://forums.gradle.org)上报告，并尽可能多地提供详细信息（测试任务配置、重现方式、Gradle 版本等）。

# asp.net - 如何从 ApiController 创建 MVC 操作的 url？

> ID：14991184
> 
> 赞同：4
> 
> 时间：2013-02-20T22:30:46.540
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

有没有办法从 ApiController 创建一个喜欢 MVC 操作的 url？[我看到了相反的例子，使用 MVC 的 UrlHelper ( http://blogs.msdn.com/b/roncain/archive/2012/07/17/using-the-asp-net](http://blogs.msdn.com/b/roncain/archive/2012/07/17/using-the-asp-net-web-api-urlhelper.aspx)从 MVC 到达 ApiController [-web-api-urlhelper.aspx](http://blogs.msdn.com/b/roncain/archive/2012/07/17/using-the-asp-net-web-api-urlhelper.aspx)）。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:59:44.653

您可以使用 API 控制器上的 Url 属性来查找到 Web api 或 MVC 控制器的路由。下面是创建指向默认项目模板 MVC 方法 AccountController.Login(string returnURL) 的链接的示例。

```
 public class SOExampleController : ApiController
{

    public SOExample GetSOExample()
    {
        var url = Url.Route("Default", new {controller = "Account", action = "Login", returnUrl = "hello"});
        return new SOExample{URL = url};
    }
}

public class SOExample
{
    public string URL {get;set;}
} 
```

运行时，您将获得“/Account/Login?returnUrl=hello”的 url 值。看起来您可能需要预先添加域，这应该很容易找到。

# ios - Tweetbot 横幅图像下拉以缩放图像

> ID：14991190
> 
> 赞同：7
> 
> 时间：2013-02-20T22:31:20.687
> 
> 标签：ios, objective-c, cocoa-touch, uiimageview

适用于 iOS 的 Tweetbot 和 Kickstarter 在具有横幅图像的用户个人资料上使用了一项很酷的功能。如果你下拉`tableView`图像缩放。

我使用以下方法使其部分工作，它改变了图像的高度，但奇怪的是，不是宽度：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

    UIImageView *imageView = (UIImageView *)self.tableView.tableHeaderView;
    CGFloat y = -scrollView.contentOffset.y;
    imageView.frame = CGRectMake(0, scrollView.contentOffset.y, self.cachedImageViewSize.size.width+y, self.cachedImageViewSize.size.height+y);
    NSLog(@"%@", NSStringFromCGRect(imageView.frame));

} 
```

有谁知道如何重现这种效果？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-20T23:39:17.827

好的，我想通了。这是我所做的：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"church-welcome.png"]];
    self.imageView.contentMode = UIViewContentModeScaleAspectFill;
    self.cachedImageViewSize = self.imageView.frame;
    [self.tableView addSubview:self.imageView];
    [self.tableView sendSubviewToBack:self.imageView];
    self.tableView.tableHeaderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 170)];

}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {

    CGFloat y = -scrollView.contentOffset.y;
    if (y > 0) {
        self.imageView.frame = CGRectMake(0, scrollView.contentOffset.y, self.cachedImageViewSize.size.width+y, self.cachedImageViewSize.size.height+y);
        self.imageView.center = CGPointMake(self.view.center.x, self.imageView.center.y);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-07T11:14:48.700

斯威夫特的上述答案：

**可变减速：**

```
var imageView: UIImageView!
var cachedImageViewSize: CGRect! 
```

**viewDidLoad：**

```
var imageView: UIImageView!
var cachedImageViewSize: CGRect!

override func viewDidLoad() {
    super.viewDidLoad()

    self.imageView = UIImageView(image: UIImage(named: "image-plane"))
    imageView.frame = CGRect(x: 0, y: 0, width: self.view.frame.size.width, height: 170)
    self.imageView.contentMode = .ScaleAspectFill
    self.cachedImageViewSize = self.imageView.frame
    self.tableView.addSubview(self.imageView)
    self.imageView.center = CGPointMake(self.view.center.x, self.imageView.center.y)
    self.tableView.sendSubviewToBack(self.imageView)
    self.tableView.tableHeaderView = UIView(frame: CGRectMake(0, 0, self.view.frame.size.width, 170))
} 
```

**scrollViewDidScroll：**

```
override func scrollViewDidScroll(scrollView: UIScrollView) {

        let y: CGFloat = -scrollView.contentOffset.y
        if y > 0 {
            self.imageView.frame = CGRectMake(0, scrollView.contentOffset.y, self.cachedImageViewSize.size.width + y, self.cachedImageViewSize.size.height + y)
            self.imageView.center = CGPointMake(self.view.center.x, self.imageView.center.y)
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-12T16:08:07.150

Nic Hubbard 的 Swift 3.0 版本的回答：

```
override func viewDidLoad() {

    self.imageView = UIImageView(image: UIImage(named: "header-image"))
    imageView.frame = CGRect(x: 0, y: 0, width: self.view.frame.size.width, height: 170)
    self.imageView.contentMode = .scaleAspectFill
    self.cachedImageViewSize = self.imageView.frame
    self.tableView.addSubview(self.imageView)

    self.imageView.center = CGPoint(x: self.view.center.x, y:self.imageView.center.y)
    self.tableView.sendSubview(toBack: self.imageView)
    self.tableView.tableHeaderView = UIView(frame: CGRect(x: 0, y: 0, width: self.view.frame.size.width, height: 170))
}

override func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let y: CGFloat = -scrollView.contentOffset.y
    if y > 0 {
        self.imageView.frame = CGRect(x: 0, y: scrollView.contentOffset.y, width: self.cachedImageViewSize.size.width + y, height: self.cachedImageViewSize.size.height + y)
        self.imageView.center = CGPoint(x: self.view.center.x, y: self.imageView.center.y)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T22:37:09.270

我认为它只是调整图像视图的大小以适应垂直空间，同时保持相同的纵横比。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-02T22:51:39.820

Nic Hubbard 的 Swift 2 版本的回答：

```
var imageView: UIImageView!
var cachedImageViewSize: CGRect!

override func viewDidLoad(){

   super.viewDidLoad()

   self.imageView = UIImageView(image: UIImage(named: "church-welcome.png"))
   self.imageView.contentMode = .ScaleAspectFill
   self.cachedImageViewSize = self.imageView.frame
   self.tableView.addSubview(self.imageView)
   self.tableView.sendSubviewToBack(self.imageView)
   self.tableView.tableHeaderView = UIView(frame: CGRectMake(0, 0, self.view.frame.size.width, 170))

}

func scrollViewDidScroll(scrollView: UIScrollView) {
var y: CGFloat = -scrollView.contentOffset.y
if y > 0 {
    self.imageView.frame = CGRectMake(0, scrollView.contentOffset.y, self.cachedImageViewSize.size.width + y, self.cachedImageViewSize.size.height + y)
    self.imageView.center = CGPointMake(self.view.center.x, self.imageView.center.y)
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-24T02:03:39.920

上述解决方案实际上并不能真正提供它在 Tweetbot 或 Tinder [目标的个人资料图片缩放] 中的确切实现方式。

我还必须解决这个问题，我发现最完美的实现是使用 2 个主要元素：

1）具有内容插图的表格视图

2）该表视图顶部的图像视图，该视图具有顶部约束和高度约束的出口，并且位于表视图内容插图提供的空白空间的顶部。

所以首先要确保为 tableView 设置插图和为 imageView 设置初始高度约束。例如，您可以在 viewDidLoad 中执行此操作。

```
imageViewHeightConstraint.constant = view.frame.height * 0.3
tableView.contentInset = UIEdgeInsets(top: view.frame.height * 0.3, left: 0, bottom: 0, right: 0) 
```

然后只需听 w scrollViewDidScroll 委托方法并相应地修改约束。

```
func scrollViewDidScroll(_ scrollView: UIScrollView) {
    let contentOffset = scrollView.contentOffset.y

    if -contentOffset >= view.frame.height * 0.3 {
        //reset the top constraint
        topConstraint.constant = 0
        //make the imageview bigger by the additional content offset value
        imageViewHeightConstraint.constant = -contentOffset
    } else {
        topConstraint.constant = -(view.frame.height * 0.3 + contentOffset)
    }
} 
```

您可能需要根据自己设置约束的方式反转符号。也许有一种方法可以优化而不是经常修改约束，但你明白了。

另请注意，您需要：

```
imageView.contentMode = .scaleAspectFill
layer.masksToBounds = true 
```

否则，图像将被绘制在您的第一个 tableView 单元格之上[取决于它可能覆盖整个表格视图的图像大小]，因为它是在其“边界”之外绘制的。

# python - 如何在python中从第k列开始删除具有空值的行

> ID：14991195
> 
> 赞同：35
> 
> 时间：2013-02-20T22:31:29.910
> 
> 标签：python, pandas

我需要删除所有从第 3 列开始的元素都是 NaN 的行

```
df = DataFrame(np.random.randn(6, 5), index=['a', 'c', 'e', 'f', 'g','h'], columns=['one', 'two', 'three', 'four', 'five'])

df2 = df.reindex(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'])
df2.ix[1][0] = 111
df2.ix[1][1] = 222 
```

在上面的示例中，我的最终数据框不会包含行“b”和“c”。

`df.dropna()`在这种情况下如何使用？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-20T23:58:41.307

您可以[`dropna`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.dropna.html)使用参数`subset`和调用`how`：

```
df2.dropna(subset=['three', 'four', 'five'], how='all') 
```

顾名思义：

*   `how='all'`需要删除`subset`行中的每一列 (of )，而不是默认的.`NaN``'any'`
*   `subset`是要检查`NaN`s 的那些列。

正如[@PaulH](https://stackoverflow.com/users/1552748/paul-h)指出的那样，我们可以概括为删除最后一`k`列：

```
subset=df2.columns[k:] 
```

事实上，如果需要，我们甚至可以做一些更复杂的事情：

```
subset=filter(lambda x: len(x) > 3, df2.columns) 
```

# android - 读取命令时没有输出？

> ID：14991200
> 
> 赞同：2
> 
> 时间：2013-02-20T22:31:42.263
> 
> 标签：android, bash, shell, sh, busybox

我有一个相当奇怪的问题。我无法弄清楚它为什么会发生或如何解决它。

**剧本：**

```
#!system/bin/sh
#set -x

reader() {
    t2=-1
    grep -v -E "add device|name:" | while IFS=' ' read -r t1 a b c d _; do
        t1=${t1%%-*}
        t=`expr $t1 - $t2`
        if let 't > 0 && t2 > -1'; then
            echo "sleep $t"
        fi
        printf 'sendevent %s' "${a%?}"
        printf '%5d %5d %5d\n' "0x$b" "0x$c" "0x$d"
        t2=$t1
    done
}

let() {
    IFS=, command eval [ '$(($*))' -ne 0 ]
}

countDown() {
    echo 'Starting in...'
    i=4
    while [[ $i -gt 1 ]]; do
        i=$(($i-1))
        echo "$i"
        sleep 1
    done
    printf '%s\n\n\n' 'Go!'
#   echo "$*"
    "$@" | reader
}

clear
printf '%s >' 'Catch by [n]umber of events or [t]imeout?'
read type

case $type in
    n)
        printf '%s >' 'Events to catch?' 
        read arg
        echo "Gonna catch $arg events!"
        countDown getevent -t -c "$arg"
        ;;
    t)
        printf '%s >' 'Timeout (in seconds)?' 
        read arg
        echo "Gonna catch events for $arg seconds!"
        countDown timeout -t $arg getevent -t
esac 
```

**脚本的目标：**

使用 getevent 命令捕获用户的交互（例如按键、屏幕点击等）并将脚本输出到标准输出，该脚本可用于复制这些事件。

**附加信息：**

getevent 的输出是十六进制格式 sendevent 接受十进制格式

预期输出：

```
Catch by [n]umber or by [t]imeout? n
Events to catch? > 4
Gonna catch 4 events...
Starting in...
3
2
1
Go!
sendevent /dev/input/event5 1 102 1
sendevent /dev/input/event5 0 0 0
sleep 3
sendevent /dev/input/event5 1 102 0
sendevent /dev/input/event5 0 0 0 
```

**问题：**

选择“n”时，代码按预期运行。When "t" is picked, the script exits after the specified amount of seconds. 但是，它不输出任何东西——while 循环的第一行甚至没有运行。

使用 set -x，如下所示（最后几行）：

```
+ printf %s\n\n\n Go!
Go!
+ reader
+ t2=-1
+ grep -v -E add device|name:
+ timeout -t 5 getevent -t
+ IFS =  read -r t1 a b c d _ 
```

单独运行它会显示到 stdout 的输出（应该在 while 循环内读取和修改的输出）：

```
timeout -t 5 getevent -t 
```

有任何想法吗？

谢谢。

**编辑：**

好吧，所以我认为这是一个缓冲问题。基本上这给出了一个类似的问题： `getevent > output` 文件会在每一组事件中更新，但不是立即更新（如果没有足够的事件，可能永远不会更新）。我不知道在 Android 上有任何解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T01:29:33.927

我认为没有办法在busybox中启用**行缓冲**`grep`，但你可以这样做：

```
$ adb shell timeout -t 10 getevent -t | \
    grep --line-buffered -v -E "add device|name:" | \
    while read line; do echo "READ: $line"; done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T02:49:11.970

这基本上是我在被错误解决方法破坏之前从您的代码中翻译的内容。替换我在 timeout 分支上没有的一个命令`cat`，它可以使用您在 Busybox sh、dash、mksh、bash 和 ksh93 中的示例输入正确运行。

由于关于 shell 和应用程序的许多基本内容都被破坏了，所以这不起作用也就不足为奇了。我会确保 Busybox 是最新的，并查看您经常遇到的算术和其他错误是否可以在其他系统上重现，如果此代码不起作用，请报告错误。

```
#!/bin/sh

reader() {
    t2=-1
    grep -vE '^(add device|[[:space:]]+name:)' | 
    while IFS=' ' read -r t1 a b c d _; do
        let "(t = (t1 = ${t1%%-*}) - t2) > 0 && t2 > -1" && echo "sleep $t"
        printf 'sendevent %s' "${a%[[:digit:]]:}"
        printf '%5d %5d %5d\n' "0x$b" "0x$c" "0x$d"
        let t2=t1
    done
}

let() {
    IFS=, command eval test '$(($*))' -ne 0
}

countDown() {
    echo 'Starting in...'
    i=4
    while let 'i-=1 > 0'; do
        echo "$i"
        sleep 1
    done
    printf '%s\n\n\n' 'Go!'
    echo "$*"
    "$@" <&3 | reader
}

isDigit() {
    while ! ${1+false}; do
        case $1 in
            *[^[:digit:]]*|'') return 1
        esac
        command shift
    done 2>/dev/null
}

main() {
    printf '%s >' 'Catch by [n]umber of events or [t]imeout?'
    read type

    case $type in
        n)
            printf '%s >' 'Events to catch?' 
            read arg
            isDigit "$arg" || return 1
            echo "Gonna catch $arg events!"
            countDown getevent -t -c "$arg"
            ;;
        t)
            printf '%s >' 'Timeout (in seconds)?' 
            read arg
            isDigit "$arg" || return 1
            echo "Gonna catch events for $arg seconds!"
            countDown busybox timeout -t "$arg" cat -
            ;;
        *)
            return 1
    esac
}

main "$@" 4<&0 <<\EOF 3<&0 <&4 4<&-
add device 1: /dev/input/event8
  name:     "bcm_headset"
add device 2: /dev/input/event7
  name:     "max8986_ponkey"
add device 3: /dev/input/event6
  name:     "sec_touchscreen"
add device 4: /dev/input/event5
  name:     "sec_keypad"
add device 5: /dev/input/event4
  name:     "orientation"
add device 6: /dev/input/event3
  name:     "accelerometer"
add device 7: /dev/input/event0
  name:     "proximity_sensor"
add device 8: /dev/input/event2
  name:     "geomagnetic_raw"
add device 9: /dev/input/event1
  name:     "geomagnetic"
45534-48646 /dev/input/event6: 0001 008b 00000001
45534-48646 /dev/input/event6: 0000 0000 00000000
45534-48646 /dev/input/event6: 0001 008b 00000000
45534-48646 /dev/input/event6: 0000 0000 00000000
EOF

# vim: set fenc=utf-8 ff=unix ft=sh : 
```

输出：

```
 $ bb --help
BusyBox v1.21.0 (2013-02-20 20:39:21 CST) multi-call binary.

Usage: bb [-/+OPTIONS] [-/+o OPT]... [-c 'SCRIPT' [ARG0 [ARGS]] / FILE [ARGS]]

Unix shell interpreter
 $ bb answers/countdown
Catch by [n]umber of events or [t]imeout? >t
Timeout (in seconds)? >5
Gonna catch events for 5 seconds!
Starting in...
3
2
1
Go!

busybox timeout -t 5 cat -
sendevent /dev/input/event6:    1   139     1
sendevent /dev/input/event6:    0     0     0
sendevent /dev/input/event6:    1   139     0
sendevent /dev/input/event6:    0     0     0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T16:22:06.703

有同样的问题，并记得我第一次在 MS-DOS 3.30 中使用的技巧，后来在 Cygwin 中使用（不是用于超时，但 more 命令是解决许多重定向问题的神奇子弹）：

```
timeout -t 8 getevent | more > getevent.txt 
```

使用 su（不是 sh）在 Total Commander 的 shell 中运行良好

别客气 ：-）

# c# - 实时流畅流式传输：点开始

> ID：14991202
> 
> 赞同：0
> 
> 时间：2013-02-20T22:31:55.537
> 
> 标签：c#, video-streaming, smooth-streaming

我想从 iphone（或任何其他设备，例如网络摄像头）进行简单的直播。我已经阅读了很多文章，并且为我形成了下一个视图：

*   播放前的视频必须经过编码。
*   可以在指定的流媒体地址访问视频。

[这个](https://www.google.by/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CE8QFjAD&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2FA%2FA%2FB%2FAABEB56E-45B7-4145-BDB1-595DE745F61F%2FSMEast2010-Microsoft.pdf&ei=D1QlUc-fGImYtQbY3IGwDw&usg=AFQjCNHaDoBXYcSmQbjicpE9tg9tyHPP1g&sig2=N80VCzFS4_VfPxKK0atIjQ&bvm=bv.42661473,d.Yms&cad=rja)“演示”展示了整个架构

[这个](http://www.iis.net/learn/media/on-demand-smooth-streaming/getting-started-with-iis-smooth-streaming)简单的示例展示了如何从静态内容（位于服务器上的视频文件）进行广播

[这个](https://stackoverflow.com/questions/3879049/how-to-specify-encoding-bitrate-while-capturing-from-a-webcam-ms-expression-en)问题显示了如何开始编码

但是我无法将所有内容链接在一起（并且本文不包含太多代码）-如何处理“在线”视频-我只需要几行代码即可理解这一点。我必须创建任何 TCP 通道或其他东西吗？您的建议非常好赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:03:58.263

你应该看看这个[http://blog.gingertech.net/2012/06/04/video-conferencing-in-html5-webrtc-via-web-sockets/](http://blog.gingertech.net/2012/06/04/video-conferencing-in-html5-webrtc-via-web-sockets/)

它显示了一个完整工作的 node.js 服务器后端和一个 HTML5 WebRTC 客户端，用于创建一个视频会议演示。

# python - 为什么这不会产生 JIRA 问题？

> ID：14991203
> 
> 赞同：1
> 
> 时间：2013-02-20T22:31:55.647
> 
> 标签：python, api, rest, jira, pycharm

```
from jira.client import JIRA
import requests
import jira.exceptions
import json
import re

class MyJira(JIRA):

    def _create_http_basic_session(self, username, password):
        url = self._options['server'] + '/rest/auth/1/session'
        payload = {
            'username': username,
            'password': password
        }
        verify = False
        self._session = requests.session(verify=verify,
            hooks={'args': self._add_content_type})
        r = self._session.post(url, data=json.dumps(payload))
        jira.exceptions.raise_on_error(r)

options = {'server':'http://localhost:8080',
           'verify': False}
username = 'usrName'
password = 'passWord'

basic_auth =(username,password)
jira = MyJira(options, basic_auth)

issue_dict = {
    'project':{'key':'PROJKEY'},
    'summary': 'New Issue from jira-python',
    'description': 'Test Description for new issue created from jira-python',
    'issueType': {'name': 'Bug'}}

new_issue = jira.create_issue(fields=issue_dict,preftech=True)
print new_issue.id 
```

这产生了我这个错误堆栈跟踪/日志

```
/home/ve/bin/python/home/PycharmProjects/RestJira/restjira.py
Traceback (most recent call last):
  File "/home/PycharmProjects/RestJira/myrestjira.py", line 81, in <module>
    new_issue = jira.create_issue(fields=issue_dict,preftech=True)
  File "/home/ve/lib/python2.6/site-packages/jira/client.py", line 369, in create_issue
    raise_on_error(r)
  File "/home/ve/lib/python2.6/site-packages/jira/exceptions.py", line 29, in raise_on_error
    error = errorMessages[0]

IndexError: list index out of range 
```

我究竟做错了什么？我不明白为什么除了我目前正在使用的文件（myrestjira.py）之外，还有对另一个文件（restjira.py）的引用我正在使用 python 2.7，jira-python 库，请求 0.14.1，jira- python 0.12 和 pycharm 作为 IDE 有人吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-28T05:34:42.493

试试这个，它的工作...

```
from jira.client import JIRA

jira_options={'server': 'http://jira-address'}
jira=JIRA(options=jira_options,basic_auth=('user','password'))

#Creating an issue:

new_issue = jira.create_issue(project={'key': 'key'}, summary='New issue from jira-   python',   description='Look into this one', issuetype={'name': 'Bug'})

# or creating issues using dict:

issue_dict = {
    'project': {'key': 'PROJ'},
    'summary': 'New issue from jira-python',
    'description': 'Look into this one',
    'issuetype': {'name': 'Bug'},
}
new_issue = jira.create_issue(fields=issue_dict) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:23:36.647

您的问题在于这两行：

```
r = self._session.post(url, data=json.dumps(payload))
jira.exceptions.raise_on_error(r) 
```

您的回复`self._session.post`是一个错误，但收到的错误有问题。这导致了几个问题。

*   您能否确认您的 Jira 服务器已启动并正在运行`localhost:8080`？
*   如果你会发生什么`pprint(r)`？
*   用户名和密码是否正确？
*   设置`self._session.verify`为`False`？

至于为什么`restjira.py`被调用，嗯，很可能是加载了这个模块的那个模块。

* * *

其他一些想法：

*   `jira`除非您更改为`import jira.exceptions`类似`import jira.exceptions as jiraexceptions`. 它使代码更易于阅读。
*   `verify = False... verify=verify`有点无关紧要。为什么不直接放在`False`kwargs 中？

# c++ - Qt5 OpenFileDialog 在 Gnome3 上的行为很奇怪

> ID：14991205
> 
> 赞同：3
> 
> 时间：2013-02-20T22:32:07.943
> 
> 标签：c++, qt, gnome, qt5, gnome-3

我正在尝试在我的 Qt 项目中获取文件路径。当我使用 KDE4 和 Qt 4.8 时一切正常，但现在我更新到 Qt 5 和 Gnome 3。`QFileDialog`现在看起来像这样：

![在此处输入图像描述](../Images/7f98a36843e8430e664d968b5212aad3.png)

甚至像这样：

![在此处输入图像描述](../Images/9f87f15044428be3ce782f89517402cb.png)

但更多时候它看起来像这样：

![在此处输入图像描述](../Images/517ae3885b028d92cabc427a33a055c7.png)

我注意到行为的变化取决于作为对话框的初始路径传递的路径。例如，如果我打电话

```
QString path = QFileDialog::getOpenFileName(qobject_cast<QWidget*>(this->parent()), tr("Choose model"), QCoreApplication::applicationDirPath(), QLatin1String("*.obj")); 
```

然后我得到第二个案例截图。

然而，如果我打电话

```
QString path = QFileDialog::getOpenFileName(qobject_cast<QWidget*>(this->parent()), tr("Choose model"), QString(), QLatin1String("*.obj")); 
```

然后我得到任何空的文件夹，而它不是（第一个案例截图）。

此外，使用[这个提示](https://bbs.archlinux.org/viewtopic.php?pid=999078#p999078)，我管理在我的文件中注释一行`~/.gtkrc-2.0`并将主题更改为`ambiance`而不是`adwaita`at`gnome-tweak-tool`使我的应用程序显示第二种情况的屏幕截图。

我使用此代码显示对话框：

```
QString path = QFileDialog::getOpenFileName(qobject_cast<QWidget*>(this->parent()), tr("Choose model"), QCoreApplication::applicationDirPath(), QLatin1String("*.obj")); 
```

这里，`this`指向`QGraphicsScene`祖先，`OpenGLScene`。这是我创建的代码：

```
int main(int argc, char **argv)
{
    QApplication app(argc, argv);

    GraphicsView view;
    view.setViewport(new QGLWidget(QGLFormat(QGL::SampleBuffers)));
    view.setViewportUpdateMode(QGraphicsView::FullViewportUpdate);
    view.setScene(new OpenGLScene);
    view.show();

    view.resize(1024, 768);

    return app.exec();
} 
```

# mahapps.metro - 如何在 MahApps Metro Layout 中实现拖放

> ID：14991211
> 
> 赞同：6
> 
> 时间：2013-02-20T22:32:43.357
> 
> 标签：mahapps.metro

谁能建议我如何在 MahApps Metro 布局中实现瓷砖的拖放。谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-06T00:09:18.850

我们已经成功使用了 punker76 的另一个库。

它轻巧且易于实施！

GitHub [https://github.com/punker76/gong-wpf-dragdrop](https://github.com/punker76/gong-wpf-dragdrop)

NuGet [https://www.nuget.org/packages/gong-wpf-dragdrop/](https://www.nuget.org/packages/gong-wpf-dragdrop/)

# qt - 读取 Qsqlquerymodel 中用户当前选择的行

> ID：14991218
> 
> 赞同：0
> 
> 时间：2013-02-20T22:33:17.310
> 
> 标签：qt, qt4, qsqlquery

我有一张`QSqlQueryModel`桌子。用户可以查看和访问它。我想知道用户选择了哪些行/行。

我查看了 qt-centre 的许多其他帖子和文档，我认为我认为最接近的是使用`QModelIndex`，如下所示：

```
// for QSqlQueryModel or subclasses:
QSqlQueryModel *qmod = qobject_cast<QSqlQueryModel*>(md);
if(!qmod) return false;
QSqlRecord rec = qmod->record(curr.row()); // you have data inside the "rec" object 
```

取自[http://www.qtcentre.org/archive/index.php/t-3104.html](http://www.qtcentre.org/archive/index.php/t-3104.html)。

但是，这对我不起作用。我不想使用`Qtableview`，因为我只想使用`sqlQueryModel`.

如何检测用户选择？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T07:07:06.360

`QTableView`有一个选择模型。您可以使用该`currentRowChanged`选择模型的信号：

```
YourWidget : public QWidget
{
   Q_OBJECT
public:
   YourWidget(QWidget *parent = 0);
private slots:
   void onRowChanged(QModelIndex index);
}

YourWidget::YourWidget (QWidget *parent) :
    QWidget(paret)
{
    ...
    QTableView *view = new QTableView;
    view->setModel(yourModel);
    connect(view->selectionModel(), 
            SIGNAL(currentRowChanged(QModelIndex, QModelIndex)), 
            this, 
            SLOT(onRowChanged(QModelIndex)));
    ...
}

void YourWidget::onRowChanged(QModelIndex index)
{
    int row = index.row();
    QSqlRecord rec = yourModel->record(row);
    ...
} 
```

# c++ - 未指定时，C++ 运算符的操作数的值类别是什么？

> ID：14991219
> 
> 赞同：18
> 
> 时间：2013-02-20T22:33:26.940
> 
> 标签：c++, c++11, operators, language-lawyer, rvalue

**前提：**

C++11 标准将表达式分为三个不相交的**值类别**：*lvalues*、*xvalues*和*prvalues* (§ 3.10/1)。例如[**，此处**](https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues)提供了有关哪些值类别的说明。

我正在努力弄清楚不同运算符对其操作数的*值类别*的要求是什么。第 3.10/1 段规定：

> [...] 每个表达式都属于该分类法中的基本分类之一：左值、xvalue 或 prvalue。表达式的这个属性称为它的值类别。[注意：第 5 章中对每个内置运算符的讨论**表明了它产生的值的类别以及它所期望的操作数的值类别**。例如，**内置赋值运算符期望左操作数是左值，右操作数是纯右值并产生左值作为结果**。用户定义的运算符是函数，它们期望和产生的值的类别由它们的参数和返回类型决定。——尾注]

尽管上面的注释声称，第 5 条并不总是很清楚运算符操作数的值类别。例如，这就是关于*赋值*运算符的操作数的值类别的所有内容（第 5.17/1 段）：

> 赋值运算符 (=) 和复合赋值运算符都从右到左分组。**所有这些都需要一个可修改的左值作为它们的左操作数，并返回一个指向左操作数的左值**。如果左操作数是位域，则所有情况下的结果都是位域。在所有情况下，赋值都在左右操作数的值计算之后和赋值表达式的值计算之前进行排序。对于不确定顺序的函数调用，复合赋值的操作是单次求值。[注意：因此，**函数调用不应干预左值到右值的转换**以及与任何单个复合赋值运算符相关的副作用。——尾注]

正确的操作数怎么样？

整个 5.17 节中不再出现“rvalue”和“lvalue”这两个词。虽然第 3.10/1 段中的注释明确指出内置赋值运算符期望纯右值作为右操作数，但在第 5.17 节中并未明确提及。即使是 5.17/1 的最后一个注释，它提到了左值到右值的转换，似乎也暗示了右值是以某种方式被预期的（否则需要什么转换？），但注释毕竟是非规范的。

有关其他运算符的部分，包括乘法和加法运算符，通常对其操作数的值类别保持沉默。我在标准中找不到任何“默认语句”指出，如果未另行指定，内置运算符的操作数是右值。因此，问题。

**问题：**

1.  **赋值运算符的右操作数的值类别是什么**；而且，更一般地说
2.  **未指定时如何确定运算符操作数的值类别**？是否不受约束（意味着接受任何值类别）？如果是这样，为什么左值到右值的转换应该应用于赋值表达式？

高度赞赏对 C++11 标准的引用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T22:39:38.530

是的，它没有详细说明，[之前已经介绍过](https://stackoverflow.com/a/5101759/150634)。基本上，每次需要左值表达式时都会枚举，因此我们假设每个其他操作数都必须是纯右值表达式。

所以回答你的问题：

1.  一个prvalue。
2.  如果未指定，则为prvalue。

链接答案中引用的注释似乎已经更改了几次。C++11 标准第 3.10 节的引用如下（目前在最新草案中是相同的）：

> [ 注意：第 5 章中对每个内置运算符的讨论表明了它产生的值的类别以及它所期望的操作数的值类别。例如，内置赋值运算符期望左操作数是左值，右操作数是纯右值并产生左值作为结果。用户定义的运算符是函数，它们期望和产生的值的类别由它们的参数和返回类型决定。——尾注]

这里甚至明确表示赋值运算符期望正确的操作数是纯右值。当然，这是一个注释，因此是非规范性的。

# java - 在eclipse中的tomcat中部署另一个war文件

> ID：14991223
> 
> 赞同：0
> 
> 时间：2013-02-20T22:33:43.013
> 
> 标签：java, eclipse, tomcat6, war

我在 Eclipse 中有两个 Java EE 动态 Web 项目 - a) Calculator 项目和 b) CalculatorUser 项目。两者都有 HTTP 端点。我可以独立运行。

我想使用从项目计算器创建的战争文件并将其放入 CalculatorUser。目的是两个 Web 应用程序在同一个 tomcat 实例（在本地主机上）中运行，并且 CalculatorUser 可以向 Calculator 发送 http 消息。

这一点很重要：由于业务原因，CalculatorUser 不能只调用 Calculator 中的方法，而是需要与它进行 webapp-to-webapp 通信。

整个事情是用户的样本。我不能将 Calculator.war 放在 tomcat/webapps 文件夹中，因为用户应该能够获取 CalculatorUser 项目并运行整个项目。

如何在 CalculatorUser 项目的 eclipse 中的 Tomcat 服务器上部署 Calculator.war？Tomcat中是否有一些配置可以指定这个war文件的路径？

# r - 计算函数内向量中的每个值

> ID：14991225
> 
> 赞同：4
> 
> 时间：2013-02-20T22:34:01.117
> 
> 标签：r, function, vector

我做了一个函数来计算某一年是否是闰年，如下所示：

```
isLeapday<-function(x) {
     if (as.numeric(x)%%100==0 & as.numeric(x)%%400==0 | as.numeric(x)%%4==0 &      as.numeric(x)%%100!=0) return (TRUE) 
     else return (FALSE)
}

isLeapday(x) 
```

我收到错误消息

> “在 if (as.numeric(x)%%100 == 0 & as.numeric(x)%%400 == 0 | as.numeric(x)%%4 == 中：条件的长度 > 1 并且只有将使用第一个元素”

基本上只计算第一个值，我如何使它计算向量中的每个值，如果可能，返回一个逻辑向量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T22:40:57.853

```
isLeapday<-function(x) {
  x %% 100 == 0 & x %% 400 == 0 | x %% 4 == 0 & x %% 100 != 0
}

years <- 2004:2013

isLeapday(years)

# [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE 
```

或如 mnel 所述：

```
library("chron")
leap.year(years)

 [1]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE 
```

对于代码`leap.year{chron}`：

```
library("chron") 
edit(leap.year)

function (y) 
{
    if (inherits(y, "dates")) 
        y <- month.day.year(as.numeric(y), origin. = origin(y))$year
    y%%4 == 0 & (y%%100 != 0 | y%%400 == 0)
} 
```

# javascript - 在 Javascript 中调用多个函数

> ID：14991229
> 
> 赞同：0
> 
> 时间：2013-02-20T22:34:14.510
> 
> 标签：javascript, jquery, ajax, json

我正在尝试使用 Yahoo 的 YQL 调用多个函数。我要显示的是每天的天气。XML 文件有 [0] 表示今天 [1] 明天 [2] 后天等。当我运行代码时，它会查看最后一个调用的数字，并且不会加载其他数字。我哪里错了？

```
<script type="text/javascript"       src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript">
// javascript will go here
$(function(weatherone){

var query = "select * from rss where url='http://xml.weather.yahoo.com/forecastrss/SPXX0050_f.xml'";
var cacheBuster = Math.floor((new Date().getTime()) / 1200 / 1000);
var url = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent(query) + '&format=json&_nocache=' + cacheBuster;

window['wxCallback'] = function(data) {
    var info = data.query.results.item.forecast[0];
    $('#wxDay').text(info.day);
    $('#wxIcon').css({
        backgroundPosition: '-' + (61 * info.code) + 'px 0'
    }).attr({
        title: info.text
    });
    $('#wxIcon2').append('<img src="http://l.yimg.com/a/i/us/we/52/' + info.code + '.gif" width="74" height="74" title="' + info.text + '" />');
    $('#wxTemp').html(info.high + '&deg;' + (u.toUpperCase()));
    $('#wxText').html(info.text);
};

$.ajax({
    url: url,
    dataType: 'jsonp',
    cache: true,
    jsonpCallback: 'wxCallback'
});

});

$(function(weathertwo){

var query = "select * from rss where url='http://xml.weather.yahoo.com/forecastrss/SPXX0239_f.xml'";
var cacheBuster = Math.floor((new Date().getTime()) / 1200 / 1000);
var url = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent(query) + '&format=json&_nocache=' + cacheBuster;

window['wxCallback'] = function(data) {
    var info = data.query.results.item.forecast[1];
    $('#wxDay').text(info.day);
    $('#wxIcon').css({
        backgroundPosition: '-' + (61 * info.code) + 'px 0'
    }).attr({
        title: info.text
    });
    $('#wxIcon2').append('<img src="http://l.yimg.com/a/i/us/we/52/' + info.code + '.gif" width="74" height="74" title="' + info.text + '" />');
    $('#wxTemp').html(info.high + '&deg;' + (u.toUpperCase()));
    $('#wxText').html(info.text);
};

$.ajax({
    url: url,
    dataType: 'jsonp',
    cache: true,
    jsonpCallback: 'wxCallback'
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:37:47.460

你做

```
window['wxCallback'] = function(data) { ... };
$.ajax({ ..., jsonpCallback: 'wxCallback' }); 
```

两次，第二次击败第一次。使用不同的回调名称，所以

```
window['wxCallback1'] = ...;
$.ajax({ ..., jsonpCallback: 'wxCallback1' });

window['wxCallback2'] = ...;
$.ajax({ ..., jsonpCallback: 'wxCallback2' }); 
```

# jquery - 带有ajax表单内部javascript的jQueryUI对话框仅适用于后续加载

> ID：14991231
> 
> 赞同：0
> 
> 时间：2013-02-20T22:34:22.617
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

好的，这个标题是一个拗口，但几乎说明了我的整个问题。

我的页面上有一个 jQueryUI 对话框，初始化为：

```
$('#dialog').dialog({
    width: 1024,
    height: 768
}); 
```

并且打开它的链接被初始化为：

```
 // Dialog Link
$('.dialog_link').click(function(){
    $('#dialog').dialog('open');
    return false;
}); 
```

因此，我使用以下代码将 php 文档加载到对话框中并显示它

```
$("#openLink123").click(function()
{
 $('#dialog').load("/scripts/dialogContent.php",
  function() {
   $('#dialog').dialog("option","title","Add")
  }
 )
}); 
```

内容加载到对话框和表单等工作得很好，但我在该 php 文档中运行的任何 javascript 都没有。但是，如果我关闭对话框并重新打开它，所有的 javascript 都可以工作。

我对如何使它在第一次加载对话框时运行 javascript 感到有些困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:37:18.870

```
$("#openLink123").on('click', function() {
 $('#dialog').load("/scripts/dialogContent.php",function() {
    $('#dialog').dialog("option","title","Add")
  });
}); 
```

# android - 调用 takePicture() 后 AutoExposureLock 重置

> ID：14991237
> 
> 赞同：5
> 
> 时间：2013-02-20T22:34:55.563
> 
> 标签：android, camera

我在 Android Camera.Parameters 类中的曝光锁定有问题。我可以在拍照前锁定曝光，但在调用`camera.takePicture(shutterCallback, rawCallback, jpegCallback)`曝光后又开始自动调整。

此外，即使预览和最终保存的图像显示调整后的曝光，`getAutoExposureLock()`仍会返回。`true`

Android文档说曝光锁定不会通过拍照来改变：http: [//developer.android.com/reference/android/hardware/Camera.Parameters.html#setAutoExposureLock(boolean)](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setAutoExposureLock(boolean))

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T11:46:12.333

我设法在我的 Galaxy S4 上锁定曝光补偿

```
Camera.Parameters parameters = mCamera.getParameters();
parameters.setAutoExposureLock(true);
mCamera.setParameters(parameters);
mCamera.startPreview(); 
```

然后在每个`takePicture`回调中，我基本上将锁重置为 true

```
Camera.Parameters parameters = mCamera.getParameters();
parameters.setAutoExposureLock(true);
mCamera.setParameters(parameters); 
```

这设法*做某事*。所有拍摄的图像几乎同样明亮。更改`exposureCompensation`没有效果，但更改 ISO 时会自动调整曝光时间。

我将对此进行深入研究并相应地更新这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T16:32:22.413

在我的三星 Galaxy Note 3 上，在回调中将锁定重置为 true`takePicture`效果不佳。它使情况好一些，但仍会产生亮度完全不同的图像。这些 jepg 中的 Exif 确认`exposure time`从 1/120 秒到 1/400 秒不等。

我还注意到一些 jpeg 具有相似`exposure time`（1/120 秒）但`brightness`保存在 exif 中的不同值。所以，我猜测图像后处理器是游戏破坏者。

我已经通过 转储了所有相机参数`native_getParameters`，找到了图像校正参数并将它们全部设置为`5`. 这些参数是：

```
set("min-brightness", 5);
set("max-brightness", 5);

set("contrast", 5);
set("min-contrast", 5);
set("max-contrast", 5);

set("max-saturation", 5);
set("min-saturation", 5);
set("saturation", 5); 
```

现在输出好多了。图像几乎同样明亮。所有 500 个测试图像都有`exposure time`= 1/120 ± 1（很少是 1/125）和`brightness`= 5 ± 0.1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T13:48:57.680

我自己也遇到过这个问题，我假设它是一个 API 错误，因为它对我和你一样有效。除非您在此期间设法修复它？让我知道！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T08:06:13.720

我也有同样的问题。那是因为`camera.takePicture(shutterCallback, rawCallback, jpegCallback)`停止预览；您必须致电`camera.startPreview();`以继续预览。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-07T12:16:02.633

我在 S3 上遇到了同样的问题。我结束了将这些行放在回调的开头：

```
public void onPictureTaken(byte[] data, Camera camera) {
    //Relock the camera for S3 device
    camera.startPreview();
    UnLockCamera(camera);
    LockCamera(camera);
    // your code 
```

具有以下两个功能

```
public void LockCamera(Camera camera){
    //stop auto white balance and auto exposure lock
    Camera.Parameters params = camera.getParameters();
    if (params.isAutoExposureLockSupported()) {
        params.setAutoExposureLock (true);
    }
    if (params.isAutoWhiteBalanceLockSupported()) {
        params.setAutoWhiteBalanceLock(true);
    }
    camera.setParameters(params);
}
public void UnLockCamera(Camera camera){
    //stop auto white balance and auto exposure lock
    Camera.Parameters params = camera.getParameters();
    if (params.isAutoExposureLockSupported()) {
        params.setAutoExposureLock (false);
    }
    if (params.isAutoWhiteBalanceLockSupported()) {
        params.setAutoWhiteBalanceLock(false);
    }
    camera.setParameters(params);
} 
```

# oracle - 字符集编码和存储大小因素

> ID：14991238
> 
> 赞同：2
> 
> 时间：2013-02-20T22:35:00.317
> 
> 标签：oracle, character-encoding, size

对于 Oracle，在给定各种字符编码的情况下，是否有关于存储分配的矩阵/表格信息。

例如：

size_of_col_in(AL32UTF8) == 4 * size_of_col_in(WE8ISO8859P1)

我对那个因子值 4 感兴趣

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:52:52.653

除非您只对最大变化感兴趣，否则您的示例是不正确的。

AL32UTF8 是一个可变长度字符集。一般来说，US7ASCII字符集中的任何字符都需要1个字节，欧洲字符一般需要2个字节，各种亚洲语言字符需要3个字节，少数非常稀有的字符需要4个字节。实际上，如果您正在讨论将实际的 WE8ISO8859P1 数据转换为 AL32UTF8，您通常会在实践中看到 1 和 2 之间的转换因子更接近 1 而不是 2。无需查找每个有效 WE8ISO8859P1 字符的 Unicode 映射，如果在 AL32UTF8 字符集中需要 3 或 4 个字节的存储空间，我会感到惊讶。

在 Globalization Support Guide 中有一个关于[字符集](http://docs.oracle.com/cd/E11882_01/server.112/e10729/applocaledata.htm#i635016)的部分，它告诉您哪些字符集是单字节的，哪些是多字节的，以及哪些多字节字符集是固定宽度的。几乎所有多字节字符集都是可变宽度的，因此您要寻找的因素取决于您的数据。

在大多数情况下，你最好声明你的列使用字符长度语义而不是字节长度语义，让数据库在幕后计算要分配多少数据。例如，如果您声明一个列

```
CREATE TABLE foo (
  col1 VARCHAR2(10 CHAR)
) 
```

Oracle 将为 10 个字符的存储分配空间，而不管数据库字符集如何，也不管存储该数据所需的实际字节数（受每`VARCHAR2`列 4000 字节的限制）。这通常使定义列大小变得更加容易，因为您不必过大列，以防有人决定将 10 个 4 字节 UTF-8 字符放入一行，并且您不必向用户解释该列将接受取决于语言和/或所选特定字符的不同字符数的字符串。

尽管定期处理全球化的 Oracle人员[不鼓励这样做](https://forums.oracle.com/forums/thread.jspa?messageID=9868167)，但更喜欢在声明列时显式指定字符长度语义或至少仅在会话级别设置它，但您可以设置[`NLS_LENGTH_SEMANTICS`初始化参数](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDAQFjAA&url=http://docs.oracle.com/cd/B19306_01/server.102/b14237/initparams127.htm&ei=a1MlUc-oKITYqQHu24GIDw&usg=AFQjCNEUQLo22x5siColSVJk3D1oNfosQg&bvm=bv.42661473,d.aWM)以`VARCHAR2(10)`使用默认情况下，字符长度语义而不是字节长度语义（`VARCHAR2(10 BYTE)`如果需要字节长度语义，您仍然可以指定）。

# regex - angular.toJson 中的 RegExp 错误

> ID：14991243
> 
> 赞同：0
> 
> 时间：2013-02-20T22:35:25.637
> 
> 标签：regex, angularjs

我正在尝试在 mongodb 中进行“喜欢”查询。我看到这是用正则表达式完成的，所以我试图这样设置：

```
$scope.clients = Client.query({
        q:angular.toJson({
            name: RegExp($routeParams.str)
        })
    }); 
```

问题是 angular.toJson 函数没有得到任何正则表达式： [http ://plnkr.co/edit/idXMT1](http://plnkr.co/edit/idXMT1)

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:05:46.140

根据我对您问题的理解，您希望您的 JSON 对象包含正则表达式作为字符串吗？

在这种情况下，您可以在声明中手动将其转换为字符串，即：

```
$scope.object = angular.toJson({
    "param" : new RegExp(str).toString()
}); 
```

查看更新的 plunk：

[http://plnkr.co/edit/yLogI8](http://plnkr.co/edit/yLogI8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T19:26:16.627

我终于找到了解决方案。

问题是使用 toJon 函数，因为它不允许任何以 / 或 $ 开头的键，因此解决方案是避免使用此函数，只需将对象写为字符串

```
$scope.clients = Client.query({
    q:'{src:{$regex:"' + $routeParams.str + '"}}'
}; 
```

# python - 如果我的鼻子测试失败，如何截取屏幕截图？

> ID：14991244
> 
> 赞同：6
> 
> 时间：2013-02-20T22:35:29.737
> 
> 标签：python, webdriver, selenium-webdriver, nosetests, webpage-screenshot

我正在使用nosetests 运行selenium webdriver 测试。每当鼻子测试失败时，我想捕获屏幕截图。我怎样才能以最有效的方式做到这一点，无论是使用 webdriver、python 还是 nosetests 功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T16:58:56.477

My solution

```
import sys, unittest
from datetime import datetime

class TestCase(unittest.TestCase):

    def setUp(self):
        some_code

    def test_case(self):
        blah-blah-blah

    def tearDown(self):
        if sys.exc_info()[0]:  # Returns the info of exception being handled 
            fail_url = self.driver.current_url
            print fail_url
            now = datetime.now().strftime('%Y-%m-%d_%H-%M-%S-%f')
            self.driver.get_screenshot_as_file('/path/to/file/%s.png' % now) # my tests work in parallel, so I need uniqe file names
            fail_screenshot_url = 'http://debugtool/screenshots/%s.png' % now
            print fail_screenshot_url
        self.driver.quit() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T15:09:58.950

首先，webdriver 有命令：

```
driver.get_screenshot_as_file(screenshot_file_path) 
```

我不是鼻子专家（实际上这是我第一次研究它），但是我使用[`py.test`](http://pytest.org/latest/)框架（类似，但优于`nose`恕我直言）。

很可能您必须为鼻子创建[“插件”](https://nose.readthedocs.org/en/latest/plugins/interface.html)，您必须在其中实现[`addFailure(test, err)`](https://nose.readthedocs.org/en/latest/plugins/interface.html#nose.plugins.base.IPluginInterface.addFailure)“测试失败时调用”的钩子。

在此`addFailure(test, err)`您可以从[Test 对象](https://nose.readthedocs.org/en/latest/api/test_cases.html#nose.case.Test)获取测试名称并生成文件的路径。

在那次通话之后`driver.get_screenshot_as_file(screenshot_file_path)`。

在`py.test`我创建带有`def pytest_runtest_makereport(item, call):`钩子实现的插件时。`call.excinfo`如有必要，我在里面分析并创建屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T16:48:25.047

也许您设置了不同的测试，但根据我的经验，您需要手动构建这种类型的功能并在失败时重复它。如果您正在执行 selenium 测试，很可能像我一样，您使用了很多 find_element_by_ *something*。我编写了以下函数来解决此类问题：

```
def findelement(self, selector, name, keys='', click=False):

    if keys:
        try:
            self.driver.find_element_by_css_selector(selector).send_keys(keys)
        except NoSuchElementException:
            self.fail("Tried to send %s into element %s but did not find the element." % (keys, name))
    elif click:
        try:
            self.driver.find_element_by_css_selector(selector).click()
        except NoSuchElementException:
            self.fail("Tried to click element %s but did not find it." % name)
    else:
        try:
            self.driver.find_element_by_css_selector(selector)
        except NoSuchElementException:
            self.fail("Expected to find element %s but did not find it." % name) 
```

在您的情况下，屏幕截图代码（self.driver.get_screenshot_as_file（screenshot_file_path））将在self.fail之前。

使用此代码，每次您想与元素交互时，您都会调用 self.findelement('selector', 'element name')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T04:44:37.043

在 Python 中，您可以使用以下代码：

```
driver.save_screenshot('/file/screenshot.png') 
```

# localization - 视觉力页面如何本地化selectOptions

> ID：14991246
> 
> 赞同：2
> 
> 时间：2013-02-20T22:35:33.633
> 
> 标签：localization, salesforce, visualforce

我正在尝试在 Visual Force 页面上本地化 selectOptions。

这是 .class 代码片段：

```
List<SelectOption> options = new List<SelectOption>();
List<MyOption__c> dropDownValues = [SELECT Id, Display_Label_Name__c FROM MyOption__c];
for (MyOption__c val : dropDownValues) {
    // Display_Label_Name__c field is the label from *.labels that needs to be translated
    options.add(new SelectOption(val.Id, val.Display_Label_Name__c));
} 
```

这是 .page 代码片段：

```
<apex:selectList value="{!myVal}">
    <apex:selectOptions value="{!options}"/>
</apex:selectList> 
```

现在下拉列表显示 Display_Label_Name__c 详细信息。我正在尝试查看如何显示 .labels 文件中的翻译版本。是否可以？如果没有，解决方法是什么？

谢谢您的反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:21:52.617

页面文本的所有本地化都可以使用[自定义标签](http://na14.salesforce.com/help/doc/en/cl_about.htm)完成。

1.  使用您需要的语言启用翻译工作台。
2.  为页面上的所有可本地化文本创建标签。
3.  用标签替换页面文本。
4.  [为每个标签](http://na14.salesforce.com/help/doc/en/cl_translate_edit.htm)添加翻译。
5.  更改您的个人资料语言以进行测试。

但是对于您的情况，您从自定义对象中提取选择选项文本。如果选择列表的值预计不会频繁更改，每周少于一次左右，那么我会改为使用自定义标签。

否则，您将失去 Salesforce 自动语言选择的价值，并且必须自己实施某些东西。

我建议扩展自定义对象`MyOption__c`以包含所有受支持语言的列。您可以使用 if/else 块或[动态顶点](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_dynamic_soql.htm)来选择选择选项文本。

使用动态 Apex 的示例

```
string language = ParseForSupportedLangauges(UserInfo.getLanguage()); // includes __c

list<sobject> dropDownValues = Database.query('SELECT Id, '+language+' FROM MyOption__c');

for (sobject val : dropDownValues) {
    options.add(new SelectOption(val.get('Id'), val.get(language)));
} 
```

`ParseForSupportedLangauges()`将是一种自定义方法，用于检查支持的语言并在必要时分配默认值。

**编辑**

事实证明有一个解决方案：在需要之前不要寻找东西，对吗？

Spring '12 中引入了动态选择标签以显示调用数组语法的能力。此外，还添加了从控制器创建 visualforce 组件的功能，但使用数组语法就足以解决您的问题。此方法允许您使用来自 的查询结果来选择所需的标签`MyOption__c`。

在visualforce中使用repeat循环查询结果

```
<apex:repeat value="{!displayResultsValues}" var="labelName">
<apex:outputText value="{!$Label[labelName]}"/>
</apex:repeat> 
```

[这是一篇很好的文章来展示用法和语法。](http://zachelrath.wordpress.com/2012/01/12/the-first-fruits-of-spring-12-dynamic-custom-label-retrieval/)

# java - 使用 java 连接到本地网络设备

> ID：14991256
> 
> 赞同：0
> 
> 时间：2013-02-20T22:36:21.690
> 
> 标签：java, sockets, tcp, network-programming, network-protocols

我正在尝试编写一个 java 程序来通信/控制连接在我的 LAN 中的网络设备。网络设备具有 web-GUI 并使用 TCP，我尝试使用 java 套接字与设备建立连接，但设备在建立连接后不断重置连接。

我正在尝试使用wireshark/netcat/tcpflow 来嗅探web-GUI 和设备之间的数据，但是wireshark 被数据淹没了，我还在netcat/tcpflow 上阅读，找不到简单的教程。

我只是想知道是否有人可以给我一些灯光让我滚动。

提前致谢

这是我试过的代码

```
import java.io.*;
import java.net.*;
import java.util.*;

class draft{
    public static void main (String args[]) throws Exception{
        String data;
        String host = new String ("192.168.100.223");
        int port = 80;
        Socket ndsocket = new Socket(host, port);   

        DataOutputStream outToServer = new DataOutputStream(ndsocket.getOutputStream());
        BufferedReader inFromServer = new BufferedReader (new InputStreamReader(ndsocket.getInputStream())); 
```

来自wireshark，它使用HTTP 1.1，我应该使用类似的东西来强制http 1.1连接吗？

```
 con_out = connection.getOutputStream();
    con_in  = connection.getInputStream();
    PrintWriter out_writer = new PrintWriter(con_out, false);
    out_writer.print("GET / HTTP/1.1\r\n");
    out_writer.print("Host: thehost\r\n");
    out_writer.print("\r\n");
    out_writer.flush(); 
```

从 tcpflow，我可以看到它发回了一个 http 页面更新，所以我必须以某种方式解析我需要的代码，但首先需要让连接正常工作。

而且我不能一直使用该设备（它在我兄弟的房子里），所以我可能无法像我喜欢的那样经常测试建议。

对不起，如果我是一个菜鸟，因为我没有编写自己的程序的经验，谢谢你的再次帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:32:16.647

> 设备建立后不断重置连接

这可能意味着您没有发送正确的协议。你将不得不找出那是什么，而且只有你能做到，因为只有你知道设备是什么。

# java - Java用户名密码检查

> ID：14991265
> 
> 赞同：3
> 
> 时间：2013-02-20T22:36:44.610
> 
> 标签：java, network-programming, authorization

有一个需要身份验证的特定服务器 IP 地址我通常通过 cmd 行“ftp xyz0”访问输入我的 u/n，输入我的 p/w，然后我就进入了。我想让我的程序询问用户凭据，检查是否他们可以登录到此服务器/IP 地址，如果可以，则简单地返回 true，否则返回 false。我不拥有这台服务器，也不是很了解它，我只需要知道我的应用程序的最终用户是否可以访问它。我不想使用任何外部包，如果可能的话，只使用标准 java 库中可用的包。对此的任何帮助表示赞赏。

我最近的尝试：

```
 URL url = new URL("ftp://1.0.0.0/");
 URLConnection uc = url.openConnection();
 String userpass = username + ":" + password;
 String basicAuth = "Basic " + javax.xml.bind.DatatypeConverter.printBase64Binary(userpass.getBytes());
 uc.setRequestProperty ("Authorization", basicAuth);
 InputStream in = uc.getInputStream(); 
```

不确定它到底在做什么，但无论我为用户名和密码字符串输入什么，它似乎都会给出相同的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:46:14.630

要通过尝试连接到 FTP 服务器来检查登录，您将需要使用套接字并对 FTP 协议和身份验证进行大量解析。所以我建议使用[Commons Net](http://commons.apache.org/net/)，它也可以让你通过 HTTP/NNTP/etc 处理其他身份验证内容。

# php - 使用 PHP GET 清理字符串以在 href 中使用

> ID：14991267
> 
> 赞同：4
> 
> 时间：2013-02-20T22:36:50.377
> 
> 标签：php, javascript, regex, get, href

我正在尝试将用户定义的字符串添加到通过 href 传递给第三方的信息中。所以我有一些看起来像的东西

```
<a href="http://thirdparty.com/?data_set=USERSTRING" target="_blank">Link Text</a> 
```

USERSTRING 在页面加载时是已知的，因此可以在页面加载时通过 php 将其放入 href，或者我可以使用 javascript 动态添加它。

我不知道的是我需要做些什么来转义任何特殊字符，以便链接正常工作并且可以在另一端读取 - USERSTRING 可能真的很烦人，比如：[他说，“90% 不好足够了吗？”] 数据仅用于自动生成的文件名，因此不需要 100% 保留，但我试图避免无端丑陋。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:40:40.033

[urlencode](http://php.net/manual/en/function.urlencode.php) () 函数提供了您正在寻找的内容，即：

```
<a href="http://thirdparty.com/?data_set=<?php echo urlencode('USERSTRING'); ?>" target="_blank">Link Text</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:40:07.613

您需要对其进行[urlencode](http://php.net/manual/en/function.urlencode.php)。如果您最终使用的 urlencode 变体没有按照应有的方式对 '&'、'#'、'"' 和尖括号进行编码，那么您也需要对其进行 HTML 编码。

# regex - 如何使用正则表达式替换持续时间

> ID：14991268
> 
> 赞同：1
> 
> 时间：2013-02-20T22:37:02.293
> 
> 标签：regex, perl, splunk

我正在为一些正则表达式而苦苦挣扎。我正在编写一个 splunk 查询，其中一个字段是持续时间，我需要进行一些文本替换。以下是示例值及其替换。

```
value| replacement
01| 01 sec
01:02| 01 min 02 sec
01:02:03|01 hr 02 min 03 sec
01+02:03:04|01 day 02 hr 03 min 04 sec 
```

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:51:01.863

我相信这会奏效：

```
((((?<day>\d{2})\+)?(?<hr>\d{2}):)?(?<min>\d{2}):)?(?<sec>\d{2}) 
```

以上在 .NET 中运行良好，应该与 perl 100% 兼容（根据文档，这是 splunk 使用的风格）。

您必须自己添加“sec”、“min”等内容，但您可以使用命名捕获仅提取数字（并且您可以测试命名捕获是否成功以确定添加多少）。

分解：

```
(
    (
        (
            (?<day>\d{2})\+   # day is optional, but req hr ('+' not captured)
        )?
        (?<hr>\d{2}):         # hr is optional, but req min (':' not captured)
    )?
    (?<min>\d{2}):            # min is optional, but req sec (':' not captured)
)?
(?<sec>\d{2})                 # sec is required 
```

# functional-programming - 如何强制 OCaml 中的值限制？

> ID：14991270
> 
> 赞同：0
> 
> 时间：2013-02-20T22:37:04.897
> 
> 标签：functional-programming, ocaml

我希望实现一个`stack`with `value restriction`。

我想要的是`pop`and`push`总是在谈论完全相同的类型。

* * *

这是我的`sig`。

```
module type MyStackSig = 
sig

  type 'a stack

  exception EmptyStack

  val create : unit -> 'a stack
  val push : 'a stack -> 'a -> unit
  val pop : 'a stack -> 'a
  val is_empty : 'a stack -> bool
  val size : 'a stack -> int

end;; 
```

* * *

这个签名够`value restriction`吗？

**我的意思是会`push`一直`pop`在谈论同一种类型吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T06:14:04.603

您的签名看起来正确。这些类型告诉 push 和 pop 在采用相同堆栈时处理相同的内容类型。stack 的类型参数 'a 确保了这一点。

```
let st = create () in
push st 1;
print_string (pop st) 
```

是错误类型的，因为由于值限制，st 不能具有多态类型，但是，它用于不止一种类型：int 堆栈和字符串堆栈：对于一个堆栈 st，“它们不谈论相同的类型”，其参数类型是值限制的。

另一方面，以下是良好类型的：

```
let st1 = create () in
let st2 = create () in
push st1 1;
print_string (pop st2) (* it should raise EmptyStack, but do not care it here *) 
```

在这里，push 和 pop 谈论不同的类型，但涉及不同的堆栈。所以，没问题。

（放松的）价值限制不是你可以强迫的。你被迫忍受它。这是在 OCaml 中键入副作用的类型系统的限制。

# c# - 具有自定义属性的 MVC 角色

> ID：14991274
> 
> 赞同：1
> 
> 时间：2013-02-20T22:37:17.950
> 
> 标签：c#, .net, asp.net-mvc-4, roles, simplemembership

我正在研究如何在 MVC 4 (.NET 4.5) 中实现授权，并且一直在阅读有关[SimpleMembership](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)的信息。MVC 中是否有任何典型或公认的方式来让角色除了名称之外还有其他属性？

例如，假设您正在设计一个 CMS，并且希望能够拥有一个名为类似的角色`Writer`，让用户进行修改。但是，您还希望角色仅限于单个页面。我知道的唯一方法是为每个页面设置一个单独的角色，其中每个角色可能被命名为`Writer_<PageID>`. 有没有比这更好的模式，或者这几乎是我们所能做的？

理想情况下，我想知道是否有某种方法可以远程获得类似的东西：

```
public ActionResult EditPage(Page page) {
    WriterRole role = new WriterRole(page);

    if (!User.IsInRole(role)) {
        return NotAuthorized();
    }

    // Edit...
} 
```

代替：

```
public ActionResult EditPage(Page page) {
    string role = "Writer_" + page.Id;

    if (!User.IsInRole(role)) {
        return NotAuthorized();
    }

    // Edit...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:13:55.443

我要做的是拥有一个 Writer 角色，然后检查 UserId 以查看此人是否拥有可编辑资源。

```
[Authorize(Roles = "Writer")]
public ActionResult EditPage(Page page) {
    if (User.UserId == page.UserId) { ... }
} 
```

# jquery - 带有升序数字的jQuery正则表达式输入名称

> ID：14991278
> 
> 赞同：2
> 
> 时间：2013-02-20T22:37:35.170
> 
> 标签：jquery, regex

单击时`#checkbox-subscribe-everything`，我希望所有带有`name`s 的输入都遵循以下模式，交替选中和取消选中：

`name=checkbox-subscribe-game`, `name=checkbox-subscribe-game1`, `name=checkbox-subscribe-game2`, `name=checkbox-subscribe-game3`等等...

这是我当前使用 NUMBER 作为占位符的 jQuery 代码：

```
$("#checkbox-subscribe-everything").click(function() {
    var checkBoxes = $("input[name=checkbox-subscribe-gameNUMBER]");
    checkBoxes.prop("checked", !checkBoxes.prop("checked"));
}); 
```

如何使用正则表达式匹配遵循该命名模式的所有输入？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:41:33.723

您可以使用`attribute starts with`选择器：

```
$("#checkbox-subscribe-everything").change(function() {
    $("input[name^=checkbox-subscribe-game]").prop('checked', this.checked);
}); 
```

由于选择器不是很快，如果不是动态创建元素，还可以缓存对象：

```
var $checkboxes = $("input[name^=checkbox-subscribe-game]");

$("#checkbox-subscribe-everything").change(function() {
    $checkboxes.prop('checked', this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:41:37.603

像这样的东西怎么样：name^=checkbox ...

cf [http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:42:00.983

这就是我喜欢 jQuery 选择器的原因。请注意名称属性选择器中的 ^。

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

```
var checkBoxes = $("input[name^='checkbox-subscribe-game']"); 
```

# ruby-on-rails - Cookie 在 IE 或 Firefox 中不起作用

> ID：14991280
> 
> 赞同：1
> 
> 时间：2013-02-20T22:37:46.233
> 
> 标签：ruby-on-rails, ruby, session, cookies

我有一个 Rails 3.2.8 和 Ruby 1.9.3 应用程序。

我正在尝试像这样设置一个cookie：

```
cookies['role'] = {
      :value => params['commit'],
      :expires => Time.now + 30.days,
  } 
```

它在 chrome 中运行良好，但 IE 和 Firefox 似乎完全忽略了这一点。在 IE 上，我关闭了隐私设置以允许所有 cookie，但仍然没有。我的子域中没有下划线，这是我能找到的与我的问题相关的唯一解决方案。

域名是：projects.mikksdesign.com

只是一个简单的小应用程序。一旦你选择了项目经理或开发人员，它应该保存一个角色设置为“pm”或“dev”的cookie。虽然没有发生...

任何想法都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:49:23.520

好的，事实证明这与 cookie 无关，而是与表单提交有关。我有两个提交按钮，每个按钮都有一个唯一的值。在控制器中，它正在寻找参数 ['commit']，并根据该提交设置 cookie 值。不要问我为什么这不是跨浏览器，但事实证明，我只能在 Chrome 中使用它。我将做事的方式更改为基于路由的参数，并以这种方式链接图像。没有更多的cookie问题！

所以我想我跳了枪。cookie 未设置，因为它从未进入设置它的块（如果 params['commit']）

谢谢你们的帮助！

# html - 在 vimeo 视频上浮动 div

> ID：14991285
> 
> 赞同：1
> 
> 时间：2013-02-20T22:38:16.410
> 
> 标签：html, css, flash, video

我试图在 vimeo 视频上浮动一个 div，我认为这很简单，但似乎不是。这是html：

```
<div id="wrap">
<iframe id="video" src="http://player.vimeo.com/video/15888399" width="100%" height="100%" wmode="transparent" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
</div> 
```

这里也有一个 js fiddle：http: [//jsfiddle.net/wfX55/](http://jsfiddle.net/wfX55/)
我已经尝试过这种`wmode="transparent"`技术，如所见，但它似乎不起作用。是否可以将 div 浮动在 vimeo 视频的顶部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:42:04.247

你必须`z-index`使用`position: absolute or relative;`

[小提琴](http://jsfiddle.net/wfX55/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:42:26.400

您的 div 是您的视频的父级，因此位于它的“下方”。如果你想在视频上浮动一个 div，你最好用这样的东西

```
<div class="parent">
<iframe></iframe>
<div class="floatedDiv"></div>
</div>

with this css

.parent{position:relative;}
iframe{position: relative;}
.floatedDiv{position: absolute; z-index: 2;} 
```

您还需要设置 Flash 对象的 wmode

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T22:50:08.010

看来您对 z-index'ing 有点困惑。尝试这个...

```
<style>
#wrap {
    position: relative;
    width: 400px;
    height: 250px;
    background-color: silver;
}

#video {
    position: absolute;
    z-index: 99999;
}
</style>
<div id="wrap">
<div class="video">Something here I guess</div>
<iframe id="video" src="http://player.vimeo.com/video/15888399" width="100%" height="100%" wmode="transparent" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen>
</iframe>
</div> 
```

# javascript - 使用图层（zIndex）在画布中设置背景

> ID：14991286
> 
> 赞同：0
> 
> 时间：2013-02-20T22:38:22.543
> 
> 标签：javascript, canvas

我需要使用图层在画布上获得背景。它的背景变量。我知道我应该使用 CSS 并设置 z-index，但在这种情况下不知道该怎么做。

JS：

```
function doFirst(){
var x = document.getElementById('canvas');
canvas = x.getContext('2d');

var item1 = new Image();
item1.src = "images/sheep.png";
item1.addEventListener("load", function() { canvas.drawImage(item1,20,300)}, false);

var item2 = new Image();
item2.src = "images/tshirt.png";
item2.addEventListener("load", function() { canvas.drawImage(item2,300,300)}, false);

var background = new Image();
background.src = "images/background.png";
background.addEventListener("load", function() {       canvas.drawImage(background,0,0,1024,768)}, false);
} 
```

HTML：

```
<canvas id="canvas" width="1024" height="768"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:00:31.423

Canvas 元素并非旨在解决元素内的图层，您需要使用多个画布元素来解决您的问题。

[这是一篇很好的文章，可以帮助您使用该方法](http://www.ibm.com/developerworks/library/wa-canvashtml5layering/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T01:26:11.850

如果您想在同一层（画布）上显示多个图像，那么要对图像进行排序，只需按照您希望它们显示的顺序将它们绘制到屏幕上即可。第一个绘制的图像将在底部，每个绘制的图像在顶部。

如果要将图层视为单独的画布，可以使用 css 设置 z-index，或使用 Javascript，如下所示：

```
canvas.style.zIndex = 99; 
```

# android - 异步批量数据传输

> ID：14991293
> 
> 赞同：2
> 
> 时间：2013-02-20T22:38:53.973
> 
> 标签：android, asynchronous, usb, transfer, bulk

我正在研究 Android Galaxy S III 智能手机和不符合 Android Open Accessory 设备定义的设备之间的 USB 通信。我想将异步批量数据从设备传输到主机。主机和设备之间的连接工作正常，已通过向设备发送控制命令进行验证。

1.  是否可以使用批量类型 (USB_ENDPOINT_XFER_BULK) 的端点完成此传输，或者它必须是 MissileLauncher 应用程序示例中指定的中断类型 (USB_ENDPOINT_XFER_INT)？

2.  request.queue 调用是否在 connection.requestWait 返回后填充数据缓冲区或需要检查其他一些条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-29T09:21:21.243

您必须使用批量端点进行批量传输，无论是异步传输还是同步传输 (USB_ENDPOINT_XFER_BULK)。

我不能给你第二个问题明确的答案，因为我对这个问题太有问题了。我可以用下面的代码填充我的缓冲区。通常 connection.requestWait() 方法在 request.queu(...) 方法之后调用。但我在这种状态下有问题

```
 ByteBuffer buffer = ByteBuffer.allocate(512);
    buffer.order(ByteOrder.LITTLE_ENDIAN);
    UsbRequest request = new UsbRequest();
    request.initialize(usbDeviceModel.getConnection(), usbEndpoint2);
    request.queue(buffer, 512);

    if(request == usbDeviceModel.getConnection().requestWait()){
            Message msg = imageViewFragment.usbDataHandler.obtainMessage();
            msg.obj = buffer.array();
            imageViewFragment.usbDataHandler.sendMessage(msg);
    } 
```

我想在 if 条件之后使用处理程序将数据发送到我的活动，但是当我的设备插入到 android 设备时我无法发送。仅当我在条件正常的情况下拔出设备并且我可以使用处理程序将数据发送到活动时。（[https://stackoverflow.com/questions/35350251/android-asynchronous-bulk-transfer-with-usb-host-api#](https://stackoverflow.com/questions/35350251/android-asynchronous-bulk-transfer-with-usb-host-api#)）

# c# - 解决“超出最大请求长度”和 FileUpload 单次上传

> ID：14991294
> 
> 赞同：4
> 
> 时间：2013-02-20T22:38:54.480
> 
> 标签：c#, asp.net, file-upload, iis-7.5

我基本上有一个 ASP.NET FileUpload 控件，为此我需要满足以下消息引发的异常：

> 超出最大请求长度。

限制是我只需要限制用户上传一个文件，因为我已将某些文本框中的其他详细信息保存到数据库中。

最大文件大小设置在 web.config 中设置如下：

```
<system.webServer>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="41943040" />
        </requestFiltering>
    </security>
</system.webServer>
<system.web>
    <httpRuntime maxRequestLength="40960" requestValidationMode="2.0" />
</system.web> 
```

因此，我搜索了许多解决方案，命名如下：

1.  使用 Global.asax 在“Application_BeginRequest()”中验证文件大小，但它没有解决我的问题，当文件大小更大并且重定向到错误页面不起作用时，它在重定向时崩溃。

2.  使用 AjaxFileUpload 而不是 ASP.NET FileUpload 控件，这再次在检查文件大小大于 Web.config 中允许的最大大小时崩溃。其次，我必须限制用户总共只能上传一个文件，不能超过一个文件，因此使用 AjaxFileUpload 它不适用于我的情况，因为我必须上传一个文档并将其他详细信息保存在一些与该文件相关的文本框。第三，当文件大小超过限制，即 40MB 时，AjaxFileUpload 会变成红色，不显示任何消息。

我想知道我怎样才能完成我的要求，因为这几天我就被困住了。

**更新：**发现其中很少有用，但无法在其基础上完成要求：

*   [当文件上传超出 ASP.NET MVC 中允许的大小时显示自定义错误页面](https://stackoverflow.com/questions/2759193/display-custom-error-page-when-file-upload-exceeds-allowed-size-in-asp-net-mvc)
*   [超出最大请求长度](https://stackoverflow.com/questions/3853767/maximum-request-length-exceeded)
*   [http://dotnetslackers.com/Community/blogs/haissam/archive/2008/09/12/upload-large-files-in-asp-net-using-httpmodule.aspx](http://dotnetslackers.com/Community/blogs/haissam/archive/2008/09/12/upload-large-files-in-asp-net-using-httpmodule.aspx)
*   [http://geekswithblogs.net/sglima/archive/2011/09/20/how-to-handle-maximum-request-length-exceeded-exception.aspx](http://geekswithblogs.net/sglima/archive/2011/09/20/how-to-handle-maximum-request-length-exceeded-exception.aspx)
*   [http://dotnetpools.com/Article/ArticleDetiail/?articleId=52&title=Ajax%20AsyncFileUpload%20Example%20In%20Asp.net%20To%20Upload%20Files%20To%20Server%20Using%20AjaxFileUpload%20Control](http://dotnetpools.com/Article/ArticleDetiail/?articleId=52&title=Ajax%20AsyncFileUpload%20Example%20In%20Asp.net%20To%20Upload%20Files%20To%20Server%20Using%20AjaxFileUpload%20Control)

以下是标记：

```
<asp:Label ID="lblStatus" runat="server" Text=""></asp:Label>
<asp:FileUpload ID="theFile" runat="server" />
<asp:Button ID="Button2" runat="server" Text="Upload 1"  onclick="Button2_Click" />
<asp:Button ID="Button1" runat="server" Text="Upload 1"  onclick="btnUpload1_Click" />
<asp:Button ID="btnUpload" runat="server" Text="btnUpload_Click" onclick="btnUpload_Click" />
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<asp:AjaxFileUpload ID="AjaxFileUpload2" runat="server" ToolTip="Upload File" ThrobberID="MyThrobber" onclientuploaderror="IsFileSizeGreaterThanMax" onuploadcomplete="AjaxFileUpload1_UploadComplete" AllowedFileTypes="jpg,jpeg,gif,png,pjpeg,zip,rar,pdf,xls,xlsx,doc,docx" MaximumNumberOfFiles="1" Height="50px" Width="350px"/>
<asp:Image id="MyThrobber" ImageUrl="~/UploadedFiles/Penguins.jpg" AlternateText="Saving...."  Style="display:None"  Height="1px" Width="350px" runat="server" /> 
```

以下是 C# 代码：

```
protected void Button2_Click(object sender, EventArgs e)
{
    if (theFile.HasFile)
    {
         HttpRuntimeSection runTime = (HttpRuntimeSection)System.Configuration.ConfigurationManager.GetSection("system.web/httpRuntime");
        double maxRequestLength = (runTime.MaxRequestLength - 100) * 1024;
        double xxx = theFile.PostedFile.ContentLength;
        double ck = xxx / 1024 / 1024;
        bool f = false;
        if (ck > maxRequestLength)
        {
            f = true;
        }
        lblStatus.Text = xxx.ToString() + " " + (f ? "too big" : "size ok");
    }
 }

protected void btnUpload1_Click(object sender, EventArgs e)
{
     try
     {

        if ((theFile.PostedFile != null) && (theFile.PostedFile.FileName != ""))
         {
             if ((theFile.PostedFile != null) && (theFile.PostedFile.FileName != ""))
             {
                 fileName = theFile.PostedFile.FileName;
                 Session["FileAttached"] = fileName;
             }
             else
             {
                 Session["FileAttached"] = "";
                 lblStatus.Focus();
                 lblStatus.ForeColor = System.Drawing.Color.Red;
                 lblStatus.Text += "<br/>Attachment file not found.";
                 return;
             }
             if (fileName != "")
             {
                 cFilePath = Path.GetFileName(fileName);

                /*UpPath = "../UploadedFiles";
                 fullPath = Server.MapPath(UpPath);
                 fileNpath = fullPath + "\\" + cFilePath;*/

                if (theFile.HasFile)
                 {
                     string CompletePath = "D:\\Visual Studio 2010\\DevLearnings\\FileAttachSizeMax\\UploadedFiles\\";
                     if (theFile.PostedFile.ContentLength > 10485760)
                     {
                         lblStatus.Focus();
                         lblStatus.ForeColor = System.Drawing.Color.Red;
                         lblStatus.Text += "File size is greater than the maximum limit.";
                     }
                     else
                     {
                         theFile.SaveAs(@CompletePath + theFile.FileName);
                         lblStatus.Text = "File Uploaded: " + theFile.FileName;
                     }
                 }
                 else
                 {
                     lblStatus.Text = "No File Uploaded.";
                 }
             }
        }
     }
     catch (Exception ex)
     {
         lblStatus.Focus();
         lblStatus.ForeColor = System.Drawing.Color.Red;
         lblStatus.Text += "Error occurred while saving Attachment.<br/><b>Error:</b> " + ex.Source.ToString() + "<br/><b>Code:</b>" + ex.Message.ToString();
     }
 }

protected void AjaxFileUpload1_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    HttpRuntimeSection runTime = (HttpRuntimeSection)System.Configuration.ConfigurationManager.GetSection("system.web/httpRuntime");
    int maxRequestLength = (runTime.MaxRequestLength - 100) * 1024;

    if (e.FileSize <= maxRequestLength)
    {
         string path = MapPath("~/UploadedFiles/");
         string fileName = e.FileName;
         AjaxFileUpload2.SaveAs(path + fileName);
     }
     else
     {
         lblStatus.Text = "File size exceeds the maximum limit. Please use file size not greater than 40MB. ";
         return;
     }
}

protected void btnUpload_Click(object sender, EventArgs e)
{
     //AsyncFileUpload.SaveAs();
     //AjaxFileUpload1.SaveAs();

    HttpContext context = ((HttpApplication)sender).Context;
     //HttpContext context2 = ((System.Web.UI.WebControls.Button)sender).Context;

    HttpRuntimeSection runTime = (HttpRuntimeSection)System.Configuration.ConfigurationManager.GetSection("system.web/httpRuntime");
    double maxRequestLength = (runTime.MaxRequestLength - 100) * 1024;

    if (context.Request.ContentLength > maxRequestLength)
    {
         IServiceProvider provider = (IServiceProvider)context;
         HttpWorkerRequest wr = (HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));
         FileStream fs = null;
         // Check if body contains data
         if (wr.HasEntityBody())
         {
             // get the total body length
             int requestLength = wr.GetTotalEntityBodyLength();
             // Get the initial bytes loaded
             int initialBytes = wr.GetPreloadedEntityBody().Length;

            if (!wr.IsEntireEntityBodyIsPreloaded())
            {
                 byte[] buffer = new byte[512000];
                 string[] fileName = context.Request.QueryString["fileName"].Split(new char[] { '\\' });
                 fs = new FileStream(context.Server.MapPath("~/UploadedFiles/" + fileName[fileName.Length - 1]), FileMode.CreateNew);
                 // Set the received bytes to initial bytes before start reading
                 int receivedBytes = initialBytes;
                 while (requestLength - receivedBytes >= initialBytes)
                 {
                     // Read another set of bytes
                     initialBytes = wr.ReadEntityBody(buffer, buffer.Length);
                     // Write the chunks to the physical file
                     fs.Write(buffer, 0, buffer.Length);
                     // Update the received bytes
                     receivedBytes += initialBytes;
                 }
                 initialBytes = wr.ReadEntityBody(buffer, requestLength - receivedBytes);
            }
         }
         fs.Flush();
         fs.Close();
         context.Response.Redirect("About.aspx");
     }
} 
```

除了上述之外，我还得出了下面提到的解决方案。

我使用了以下代码，虽然它现在正在运行 Application_Error() 代码部分，但问题是它没有重定向到 About.aspx 页面。

我试图重定向到 Hotmail.com，但这也不起作用，也没有抛出异常。

请找到以下代码部分：

```
private void Application_Error(object sender, EventArgs e) 
{ 
    // Code that runs when an unhandled error occurs
    Exception exc = Server.GetLastError();
    try
    {
        if (exc.Message.Contains("Maximum request length exceeded"))
        {
            //Response.Redirect("~/About.aspx", false);
            Response.Redirect("http://www.example.com", false);
        }
        if (exc.InnerException.Message.Contains("Maximum request length exceeded"))
        {
            Response.Redirect("http://www.HOTMAIL.com", false);
        }
    }
    catch (Exception ex)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-08-24T05:55:20.280

在 Web 配置文件中尝试以下设置。

```
<system.web>
<httpRuntime executionTimeout="9999" maxRequestLength="2097151"/>
</system.web> 
```

**httpRuntime** - HTTP 运行时设置。

**executionTimeout** - 没有。秒超时。

**maxRequestLength** - 文件的最大上传大小

更多详情请点击[链接](http://www.aspdotnet-suresh.com/2010/12/how-to-restrict-size-of-upload-file-in.html)

# qt - 具有透明背景图像的 Qt 窗口

> ID：14991301
> 
> 赞同：1
> 
> 时间：2013-02-20T22:40:02.697
> 
> 标签：qt

我这样放置背景图片：

```
setWindowFlags(Qt::FramelessWindowHint);

    QPixmap slika("some_image.png");
    QPalette paleta;
    paleta.setBrush(this->backgroundRole(), QBrush(slika));
    this->setPalette(paleta); 
```

如果我让这张图片透明，当应用程序加载时，它只会闪烁并消失。但是，如果我制作没有透明度的图像，那么一切都很好。为什么 Qt 拒绝使用透明图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:08:59.933

我不知道你的用例是什么，但你也可以尝试使用`setStyleSheet`方法使背景透明。

```
setStyleSheet("background:transparent;");
setAttribute(Qt::WA_TranslucentBackground);
setWindowFlags(Qt::FramelessWindowHint); 
```

希望这可以帮助。

# django - 我将如何使用 django-userena 但 URL 上没有用户

> ID：14991306
> 
> 赞同：1
> 
> 时间：2013-02-20T22:40:15.377
> 
> 标签：django, url, django-users

标准的 django-userena URL 期望用户名在 URL 上：

```
/accounts/USER/  # for profile view
/accounts/USER/edit/ # to edit the profile 
```

我的用户资料都将被关闭，所以我宁愿我的网址不包括用户：

```
/accounts/ # would show the profile view (or signin if they aren't logged in)
/accounts/edit/ # to edit the profile 
```

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:29:40.100

浏览他们的文档，看起来不像。您需要为此编写自己的网址/视图。

# objective-c - Blocks / dispatch_async：我的简单代码有什么问题？

> ID：14991308
> 
> 赞同：1
> 
> 时间：2013-02-20T22:40:32.693
> 
> 标签：objective-c, cocoa-touch, objective-c-blocks, grand-central-dispatch

我试图修改一个**简单**的CS193P iTunes U 示例/作业，它只**在 UIScrollView 中显示 UIImage**。我是 Obj-C 块的新手。

一旦我尝试将下载图像的代码行包装在 *dispatch_async* 块中，我就会中断缩放并获得

`Uncaught exception: CALayer position contains NaN: [nan nan]`

（虽然显示图像和“滚动”作品）

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [self.activityIndicatorView startAnimating];

    [self resetImage];
}

- (void)resetImage
{
    if (self.detailItem && self.scrollView) {
        //reset 
        self.scrollView.contentSize = CGSizeZero;
        self.imageView.image = nil;

        NSURL *imageURL = [FlickrFetcher urlForPhoto:self.detailItem format:FlickrPhotoFormatLarge];

        __block NSData *imageData;

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

            imageData = [[NSData alloc] initWithContentsOfURL:imageURL];

            dispatch_async(dispatch_get_main_queue(), ^{    //because of UI Stuff

                UIImage *image = [[UIImage alloc] initWithData:imageData];
                if (image) {                        
                    [self.activityIndicatorView stopAnimating];
                    [self.activityIndicatorView removeFromSuperview];

                    self.scrollView.zoomScale = 1.0;
                    self.scrollView.contentSize = image.size;
                    self.imageView.image = image;

                    CGRect frame = { CGPointZero , image.size };
                    self.imageView.frame = frame;

                    [self addToRecentPhotosList:self.detailItem];

                    NSLog(@"\n self.imageView.frame:%@ \n self.imageView.bounds: %@ \n self.scrollView.contentSize: %@ \n self.scrollView.frame: %@ \n self.scrollView.bounds: %@ ", NSStringFromCGRect(self.imageView.frame), NSStringFromCGRect(self.imageView.bounds), NSStringFromCGSize(self.scrollView.contentSize), NSStringFromCGRect(self.scrollView.frame), NSStringFromCGRect(self.scrollView.bounds));
                }

            });
        });

    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.scrollView addSubview:self.imageView];
    [self.scrollView addSubview:self.activityIndicatorView];
    self.scrollView.minimumZoomScale = 0.2;
    self.scrollView.maximumZoomScale = 5.0;
    self.scrollView.delegate = self;
}
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    if  (self.imageView.image)  [self.scrollView zoomToRect:self.imageView.bounds animated:YES];
    else                        self.activityIndicatorView.center = self.view.center;

}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return self.imageView;
} 
```

记录的帧/边界：

```
without dispatch_async blocks:
self.imageView.frame: {{0, 0}, {1024, 768}}
self.imageView.bounds: {{0, 0}, {1024, 768}}

with dispatch_async blocks:
self.imageView.frame: {{-7.62939e-06, -1.52588e-05}, {1024, 768}}  
self.imageView.bounds: {{0, 0}, {204.8, 153.6}}  
self.scrollView.contentSize: {1024, 768}
self.scrollView.frame: {{0, 0}, {320, 367}}
self.scrollView.bounds: {{0, 0}, {320, 367}} 
```

堆栈跟踪：

```
0   CoreFoundation                      0x01ca002e __exceptionPreprocess + 206
1   libobjc.A.dylib                     0x010dde7e objc_exception_throw + 44
2   CoreFoundation                      0x01c9fdeb +[NSException raise:format:] + 139
3   QuartzCore                          0x02293e0b _ZN2CA5Layer12set_positionERKNS_4Vec2IdEEb + 151
4   QuartzCore                          0x0229eba1 -[CALayer(CALayerPrivate) setDoublePosition:] + 81
5   UIKit                               0x000874a2 -[UIScrollView setZoomScale:withAnchorPoint:validatingScrollOffset:allowRubberbanding:animated:duration:notifyDelegate:force:] + 1476
6   UIKit                               0x00083004 -[UIScrollView _updatePinchGestureForState:] + 3499
7   UIKit                               0x00083960 -[UIScrollView handlePinch:] + 59
8   UIKit                               0x002ec85a _UIGestureRecognizerSendActions + 139
9   UIKit                               0x002eb99b -[UIGestureRecognizer _updateGestureWithEvent:] + 333
10  UIKit                               0x002ed0df -[UIGestureRecognizer _delayedUpdateGesture] + 46
11  UIKit                               0x002efd2d ___UIGestureRecognizerUpdate_block_invoke_0543 + 57
12  UIKit                               0x002efcac _UIGestureRecognizerRemoveObjectsFromArrayAndApplyBlocks + 331
13  UIKit                               0x002e7a28 _UIGestureRecognizerUpdate + 1348
14  UIKit                               0x00054972 -[UIWindow _sendGesturesForEvent:] + 1283
15  UIKit                               0x00054e53 -[UIWindow sendEvent:] + 98
16  UIKit                               0x00032d4a -[UIApplication sendEvent:] + 436
17  UIKit                               0x00024698 _UIApplicationHandleEvent + 9874
18  GraphicsServices                    0x01bfbdf9 _PurpleEventCallback + 339
19  GraphicsServices                    0x01bfbad0 PurpleEventCallback + 46
20  CoreFoundation                      0x01c15bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
21  CoreFoundation                      0x01c15962 __CFRunLoopDoSource1 + 146
22  CoreFoundation                      0x01c46bb6 __CFRunLoopRun + 2118
23  CoreFoundation                      0x01c45f44 CFRunLoopRunSpecific + 276
24  CoreFoundation                      0x01c45e1b CFRunLoopRunInMode + 123
25  GraphicsServices                    0x01bfa7e3 GSEventRunModal + 88
26  GraphicsServices                    0x01bfa668 GSEventRun + 104
27  UIKit                               0x00021ffc UIApplicationMain + 1211
28  CS193P.4.SPoT                       0x00002b84 main + 164
29  CS193P.4.SPoT                       0x00002a95 start + 53 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:42:42.517

也许，如果您想在另一个线程上创建的线程上使用对象，那么首先将线程彼此同步是一个好主意。`imageData`在准备好使用之前开始使用它不会是一个屡获殊荣的想法。

```
// ...

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    dispatch_semaphore_t _semaphore = dispatch_semaphore_create(0);
    imageData = [[NSData alloc] initWithContentsOfURL:imageURL];
    dispatch_semaphore_signal(_semaphore);

    dispatch_async(dispatch_get_main_queue(), ^{    //because of UI Stuff

        dispatch_semaphore_wait(_semaphore, DISPATCH_TIME_FOREVER);
        dispatch_release(_semaphore);
        UIImage *image = [[UIImage alloc] initWithData:imageData];

        // etc...

    };
};

// ... 
```

**更新**

试试这个解决方案，它的工作原理和`GCD`版本应该有的一样。

**SPoTDetailViewController.h**

```
@interface SPoTImageViewController : UIViewController <UISplitViewControllerDelegate, UIScrollViewDelegate> {
    dispatch_semaphore_t _semaphore;
    __block NSData *imageData;
}

// ...

@end 
```

**SPoTDetailViewController.m**

```
- (void)resetImage
{
    // Update the user interface for the detail item.
    [self.activityIndicatorView startAnimating];

    if (self.detailItem && self.scrollView) {
        self.scrollView.contentSize = CGSizeZero;
        self.imageView.image = nil;

        [self performSelectorInBackground:@selector(downloadImageDataOnBackgroundThread) withObject:nil];

        dispatch_semaphore_wait(_semaphore, DISPATCH_TIME_FOREVER);
        // dispatch_release(_semaphore);
        UIImage *image = [[UIImage alloc] initWithData:imageData];
        if (image) {

            [_activityIndicatorView stopAnimating];

            _scrollView.zoomScale = 1.0;
            _scrollView.contentSize = image.size;
            _imageView.image = image;

            CGRect frame = { CGPointZero , image.size };
            NSLog(@"\n new CGRect frame:%@ \n ", NSStringFromCGRect(frame));

            _imageView.frame = frame;
            NSLog(@"\n self.imageView.frame:%@ \n self.imageView.bounds: %@", NSStringFromCGRect(self.imageView.frame), NSStringFromCGRect(self.imageView.bounds));
        }
    }
}

- (void)downloadImageDataOnBackgroundThread {
    _semaphore = dispatch_semaphore_create(0);
    NSURL *imageURL = [FlickrFetcher urlForPhoto:self.detailItem format:FlickrPhotoFormatLarge];
    imageData = [[NSData alloc] initWithContentsOfURL:imageURL];
    dispatch_semaphore_signal(_semaphore);
} 
```

# hadoop - hadoop reducer 是否在每个节点中顺序或并行执行键？

> ID：14991310
> 
> 赞同：1
> 
> 时间：2013-02-20T22:40:46.320
> 
> 标签：hadoop

刚开始使用hadoop，有几个关于reducer执行的问题。

当键、值对分配给一个 reducer 任务时。它是顺序处理还是并行处理。

例如 (A,5) (A,3) (B,10) 用于 reducer 任务。A,B 是否并行进入减速器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:57:33.960

当使用一个 reducer 时，KV 对不是并行处理的，而是按排序顺序处理的。在上面的示例中，这些对将从一个或多个映射器任务（如果多个映射器并行）发送到单个 reduce 任务。在将这些值传递给您的减速器类之前，它们被聚合（（A,5）和（A,3）变成（A，{5,3}）），然后在减速器任务实际运行用户代码之前排序“减少”输入集。

# drupal - 如果访问被拒绝，Drupal 6 自定义模块重定向到主页

> ID：14991311
> 
> 赞同：0
> 
> 时间：2013-02-20T22:40:57.710
> 
> 标签：drupal, redirect, drupal-6

我有兴趣创建 Drupal 表单和页面，如果“拒绝访问”为真，那么它们会自动重定向到主页。这些表单和页面已经包含由用户类型定义的 _perm 函数。

这可能吗？如果是这样，怎么做？有什么资源可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:14:54.943

我建议您将用户重定向到登录页面，因为您只希望经过身份验证的用户访问该页面。因此，将用户重定向到登录页面并在他/她登录后添加目的地。

在这里，您可以使用此模块：[http ://drupal.org/project/r4032login](http://drupal.org/project/r4032login)

# bash - 如何将 shell 变量导出到所有会话？

> ID：14991313
> 
> 赞同：15
> 
> 时间：2013-02-20T22:41:03.110
> 
> 标签：bash, shell

我想知道有没有办法将我的 shell 变量导出到系统中的所有会话（不仅是当前会话）。我不想在 .bashrc 文件中设置它，因为 shell 变量是动态变量，它会不时更改。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T22:57:34.947

您可以通过在 DEBUG 中设置陷阱来设置会话以继续重新读取磁盘上的文件`.bashrc`：

```
trap 'source ~/.myvars' DEBUG 
```

如果您打开终端 A，`echo VAR=42 >> ~/.myvars`在终端 B 中运行，然后切换回终端 A `echo $VAR`，它会“神奇地”设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T10:14:41.490

你似乎误解了什么`export`。它所做的只是将一个局部变量移动到进程（`/proc/$$/environ`）中的环境块中。

当创建一个新进程时（a `fork`），程序数据区域，包括环境块，被复制到新进程（实际上它们最初是共享的，然后在写入时复制）。当运行不同的*程序*(execve) 时，默认情况下，环境块保留在前一个程序中。另见`env(1)`程序。

所以环境变量通常是从它们的父进程继承（复制）的。让新环境变量进入运行进程的唯一方法是使用某种接种技术，就像调试器一样。编写这样的程序并非易事，我相信您可以想象其中的安全隐患。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T22:56:46.547

你不能。可以在[此处](https://unix.stackexchange.com/questions/8342/export-an-env-variable-to-be-available-at-all-sub-shells-and-possible-to-be-mod)的 unix stackexchange 部分找到更好的解释！

shell 变量可能不适合您尝试实现的用途。也许您想改用文件。

# ms-access - 多日期字段数据库设计

> ID：14991314
> 
> 赞同：0
> 
> 时间：2013-02-20T22:41:20.063
> 
> 标签：ms-access, database-design

我正在设计一个`.accdb`用于项目管理的 Access。项目合同规定了每个项目的多个里程碑，并附有相关日期。里程碑的确切数量取决于项目规模的“非此即彼”情况，但最多 6 个

我的雇主想跟踪每个里程碑的`[Forecast]`日期、`[Actual]`日期和`[Paid]`日期，这意味着大型项目最终有 24 个与之相关的日期，通常重复（如果项目按时运行，所有四个日期都将相同）

目前，我有`tblMilestones`，它有一个 FK 链接`tblProject`和每个里程碑的记录，其中 4 个关联的日期作为记录中的字段和一个用于将里程碑标记为完成或当前的字段。

我觉得我们正在收集、存储和输入大量毫无意义的数据——尤其是`[Forecast]`日期，我们从项目经理那里收集数据（无论如何都不是最可靠的数据）。一旦里程碑完成并`[Actual]`输入日期，`[Forecast]`日期就毫无意义

我宁愿将合同日期放在一个表中，在添加新项目时输入，在可变预测日期的报告表中输入，在用户将里程碑标记为完成时设置实际日期，并从交易记录中提取付款日期。

这是更好的设计方法吗？数据库很小 - 不到 50 个项目，所以我的一部分认为我只会让事情变得比他们需要的更复杂，特别是在所需的额外 UI 方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:08:40.473

从维度数据仓库设计中取出一个页面，并将日期存储在他们自己的带有 DateID 的表中：

```
DateID  DateValue
------ ----------
     1 2000-01-01
   ...        ...
  9999 2012-12-31 
```

然后将您的所有日期字段——预测、实际、支付等——转换为对日期表的 DateID 字段的外键引用。

要填充日期表，您可以采用两种方式：

1.  使用一些 VBA 生成大量日期，例如 2005-01-01 到 2100-12-31，并将它们作为一次性操作插入到日期表中。

2.  每当有人输入新日期时，请检查日期表以查看它是否已存在，如果不存在，请插入它。

无论采用哪种方式，显然都需要 DateValue 上的索引。

Taking a step back from the actual question, I'm realising that you're trying to fit two different uses into the same database--regular transactional use (as your project management app) and analytical use (tracking several different dates for your milestones--in other words, the milestone completion date is a Slowly Changing Dimension). You might want to consider splitting up these two uses into a regular transactional database and a data warehouse for analysis, and setting up an ETL process to move the data between them.

This way you can track only a milestone completion date and a payment date in your transactional database and the data warehouse will capture changes to the completion date over time. And allow you to do analysis and forecasting on that without bogging down the performance of the transactional (application) database.

# asp.net-mvc - MVC 中的单元测试不创建/访问数据库

> ID：14991316
> 
> 赞同：0
> 
> 时间：2013-02-20T22:41:26.257
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, asp.net-mvc-4, mstest

我有一个 MVC 项目的解决方案，该项目在核心项目之上包含一个服务项目。

我刚刚添加了一个单元测试项目并引用了核心和服务 - 我正在尝试测试服务。

我在测试中有一个基本的调用：

```
public class CrudTests
    {
        private readonly SetServices _setService = new SetServices();

        [TestMethod]
        public void TestMethod()
        {
            _setService.CreateSet("Test Set", "Test Set Details", null); 
```

最终失败，因为测试无法连接到数据库。我的配置有这个：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.\;Initial Catalog=Project.Services.Tests;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\Project.Services.Tests.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

我尝试通过创建数据库 Project.Services.Tests 然后运行，但我得到了这个：

> 消息=数据库 'C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\App.Services.Tests.mdf' 已经存在。选择不同的数据库名称。无法将文件“C:\PROJECTS\App\App\Services.Tests\bin\Debug\Services.Tests.mdf”附加为数据库“App.Services.Tests”。Source=.Net SqlClient 数据提供程序 ErrorCode=-2146232060 Class=16 LineNumber=65536 Number=1801 Procedure="" Server=.\ State=2 StackTrace:

我尝试删除数据库并让测试完成它，我得到了这个：

> 发生文件激活错误。物理文件名“\Project.Services.Tests.mdf”可能不正确。诊断并更正其他错误，然后重试该操作。

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:05:37.880

在单元测试中，您必须在没有任何依赖关系的情况下测试代码，例如数据库或文件系统等。单元测试意味着仅独立测试该部分代码。如果你想通过集成到数据库来测试你的代码，你必须创建集成测试。这意味着您应该在运行测试之前为数据库使用创建一个初始化，并在完成测试后为处置资源创建一个拆除。

也许这个链接可以帮助您更多地了解[单元测试和集成测试之间的区别](http://www.typemock.com/unit-tests-integration-tests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T23:59:31.580

您应该只修复连接字符串，它应该可以工作，您正在从 |DataDirectory| 附加数据库文件 的测试项目，

# android - 如何设置键盘始终显示在屏幕上？

> ID：14991317
> 
> 赞同：0
> 
> 时间：2013-02-20T22:41:28.707
> 
> 标签：android, eclipse, keyboard

我正在尝试在 Android 中创建一个页面，即使用户按下后退按钮（在这种情况下，我希望应用程序返回最后一页），键盘也始终显示。
例如：当您在该应用程序中撰写帖子时，Facebook 所做的页面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:48:14.407

在文件中添加`android:windowSoftInputMode="stateAlwaysVisible"`您的活动`AndroidManifest.xml`：

```
<activity android:name=".MainActivity"
android:label="@string/app_name"
android:windowSoftInputMode="stateAlwaysVisible" /> 
```

# java - 使用 java 应用程序模拟按键

> ID：14991318
> 
> 赞同：0
> 
> 时间：2013-02-20T15:39:12.130
> 
> 标签：java, key

我可以使用 java 应用程序模拟按键以使系统听到它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:46:50.740

您可以使用 Java 模拟键盘按下（使用[AWT Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)类），但只有当您有一个焦点 GUI（或者如果您与本机 C 代码交互，但这将非常复杂）时，您才能监听键事件

对于全局热键，正如 MBraedley 建议的那样，使用[AutoHotkey](http://www.autohotkey.com/)而不是 Java很容易做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T08:50:04.833

您可以通过实现 KeyListener 来使用 java 模拟键盘按下。

# r - 我如何在 R 中将列转置/剪切成行

> ID：14991323
> 
> 赞同：2
> 
> 时间：2013-02-20T22:41:38.443
> 
> 标签：r, reshape, reshape2

我正在处理一个国家级数据的大型数据集，该数据集采用国家年格式，并以下列形式出现（为方便起见而进行了删节）：

```
Country     Variable of Interest  Year
Bolivia     5                     1990
Bolivia     6                     1991
Bolivia     7                     1992
Cambodia    8                     1990
Cambodia    9                     1991
Cambodia    10                    1992
Russia      11                    1990
Russia      12                    1991
Russia      13                    1992 
```

由于与同事的合作，如何将数据放入此表格中？：

```
Country   1990    1991   1992
Bolivia    5        6     7
Cambodia   8        9     10
Russia     11       12    13 
```

我正在使用 R 版本 2.15.2 并使用库 WDI 来轮询世界银行以获取信息。我附上我的代码，因为它目前适用于一个国家。然后，当我尝试为所有国家/地区执行此操作时，我将粘贴代码。任何帮助将不胜感激。谢谢。

```
library(WDI)
x<-WDI(country="US",indicator="NY.GDP.MKTP.CD",start = 1980, end=2012)
a<-as.matrix(x$country)
b<-x$year
x<-as.data.frame(t(x))
colnames(x)<-b
x<-x[-1:-2,][-2,]
x<-x[,order(ncol(x):1]
a<-a[1,]
rownames(x)<-a
x 
```

当我尝试更改为所有国家/地区时的更改是将 WDI 中的论点“美国”更改为“全部”。

我感谢任何和所有的帮助！先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:46:17.793

使用`reshape2`包：

假设您`data.frame`是`df`（我将第二列名称更改为`Interest`）：

```
require(reshape2)
# use dcast as:
dcast(df, Country ~ Year, value.var="Interest")

#    Country 1990 1991 1992
# 1  Bolivia    5    6    7
# 2 Cambodia    8    9   10
# 3   Russia   11   12   13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:51:41.317

```
 reshape(dfrm, timevar="Year", direction="wide", idvar='Country')
#-------------
   Country Variable_of_Interest.1990 Variable_of_Interest.1991 Variable_of_Interest.1992
1  Bolivia                         5                         6                         7
4 Cambodia                         8                         9                        10
7   Russia                        11                        12                        13 
```

如果您想根据自己的喜好修改名称，那么 setNames 可能会很有用：

```
setNames( reshape(dfrm, timevar="Year", direction="wide", idvar='Country'), 
           c("Country", unique(dfrm$Year) )  )
#--------------
   Country 1990 1991 1992
1  Bolivia    5    6    7
4 Cambodia    8    9   10
7   Russia   11   12   13 
```

请注意，除非引用，否则带有前导数字的列名实际上是无效的。

# xml - 向位于 XML 模式中多个子元素内的元素添加唯一 ID

> ID：14991324
> 
> 赞同：2
> 
> 时间：2013-02-20T22:41:42.003
> 
> 标签：xml, xsd, schema, unique

我正在尝试创建一个 XML 模式，以便为位于 XML 中的多个子元素内的元素提供唯一的 id。在这种情况下，一个元素是“actor”，它位于“actors”内部，而“actors”又位于“cast”元素内部。

我希望每个电影 ID 都是唯一的，并且每个演员 ID 在该电影 ID 中都是唯一的。我不确定我需要为位于“actors”和“cast”子元素内的“actor”元素放置“唯一”。

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<movie_database
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="test.xsd">

<movie movieID="1">
    <title>Movie 1</title>
    <cast>
        <directors>Bob</directors>
        <writers>Tom</writers>      
        <actors>
            <actor actorID="1"> 
                <name>Jack</name>
            </actor>
            <actor actorID="2">
                <name>James</name>
            </actor>
        </actors>   
    </cast>
</movie>
</movie_database> 
```

XML 架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"  
    elementFormDefault="qualified" 
    attributeFormDefault="unqualified">

    <xs:element name="movie_database">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="movie" type="movietype" minOccurs="1" maxOccurs="unbounded">
                <xs:unique name="unique_actorid">
                    <xs:selector xpath="actor"/>
                    <xs:field xpath="@actorID"/>
                </xs:unique>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:unique name="unique_movieid">
        <xs:selector xpath="movie"/>
        <xs:field xpath="@movieID"/>
    </xs:unique>
    </xs:element>

    <xs:complexType name="movietype">
        <xs:sequence>
            <xs:element name="title" type="xs:string"/>
            <xs:element name="cast" type="casttype"/>
        </xs:sequence>
        <xs:attribute name="movieID" type="xs:integer"/>
    </xs:complexType>

    <xs:complexType name="casttype">
        <xs:sequence>
            <xs:element name="directors" type="xs:string"/>
            <xs:element name="writers" type="xs:string"/>
            <xs:element name="actors" type="actorsAll"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="actorsAll">
        <xs:sequence>
            <xs:element name="actor" type="actorType"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="actorType" mixed="true">
        <xs:sequence>
            <xs:element name="name" type="xs:string"/>
        </xs:sequence>
        <xs:attribute name="actorID" type="xs:integer"/>
    </xs:complexType>

</xs:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:22:55.160

一般规则是，`<xs:unique>`最上面的元素给出了你需要唯一性的范围，选择器给出了从这个点到应该唯一的元素的路径，并且字段是相对于所选元素的.

因此，对于电影中的独特演员，您有几个选择。由于每个`movie`都有一个`cast`，而反过来又恰好有一个，`actors`您可以使用 选择器将约束放在演员元素上，使用 选择器在演员元素`actor`上`actors/actor`或使用选择器 的电影上放置约束`cast/actors/actor`。在所有情况下，字段 xpath`@actorID`都是相对于所选`actor`元素的。

顺便说一句，你给出的模式只允许一部电影有一个演员，我猜你已经忘记了里面`maxOccurs="unbounded"`的`actor`元素`actorsAll`。

# iphone - UIView opaque 属性在实现 drawRect 时被忽略：

> ID：14991325
> 
> 赞同：2
> 
> 时间：2013-02-20T22:41:45.540
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个覆盖 drawRect 的 UIView 子类：以实现各种效果（渐变背景、具有不同半径的圆角等）。当我分析应用程序并在模拟器/仪器中启用颜色混合层时，此类的实例永远不会是绿色的，即使它只是绘制一个纯色渐变并且将 opaque 属性设置为 YES。在 drawRect: 中是否有什么特别的事情要做才能尊重该属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:18:50.727

正如Apple Doc所说，您可能应该将“不透明”属性设置为 NO ：

> 一个不透明的视图应该用完全不透明的内容填充它的边界——也就是说，内容的 alpha 值应该是 1.0。如果视图是不透明的并且没有填充其边界或包含完全或部分透明的内容，则结果是不可预测的。如果视图完全或部分透明，则应始终将此属性的值设置为 NO。

所以在drawRect方法中，如果你画了一些不透明的图层，你应该确保视图的不透明属性的值设置为NO。

[UIView 参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)

# php - 将数组推入另一个数组

> ID：14991327
> 
> 赞同：1
> 
> 时间：2013-02-20T22:41:48.757
> 
> 标签：php, arrays, multidimensional-array

我有一个用 php 开发的网站，我有一个函数，我想在其他数组中创建一个数组。我的查询是这样的（我正在使用 cakephp，但在这种情况下只是数组的问题，不要告诉我使用 cakephp 中的包含或类似的东西，因为它是一个大查询，我需要在其中构造我的查询和我的数组这种模式）

我的数组 $product_ingredient 包含一些值。

```
foreach ($product_ingredient as $key) {         
                $ingredient_level1 = $this->ProductIngredientVersion->query('SELECT * FROM ingredients_ingredients
                WHERE ingredients_ingredients.ingredient_id = :ingredient_id
                AND  ingredients_ingredients.product_id = :id 
                AND  ingredients_ingredients.version_id = :version_id 
                AND  ingredients_ingredients.level = 1', array('id' => $id, 'ingredient_id' => $key['products_ingredients']['ingredient_id'], 'version_id' => $key['products_ingredients']['version_id']));

                foreach($ingredient_level1 as $key2){
                    $ingredient_level2 = array($this->ProductIngredientVersion->query('SELECT * FROM ingredients_ingredients
                    WHERE ingredients_ingredients.ingredient_id = :ingredient_id
                    AND  ingredients_ingredients.product_id = :id 
                    AND  ingredients_ingredients.version_id = :version_id 
                    AND  ingredients_ingredients.level = 2', array('id' => $id, 'ingredient_id' => $key2['ingredients_ingredients']['ingredient2_id'], 'version_id' => $key2['ingredients_ingredients']['version_id'])));
                    array_push($ingredient_level1, $ingredient_level2);
                }
                array_push($ingredient_ingredient, $ingredient_level1);
            } 
```

结果是：

```
array(
    (int) 0 => array(
        (int) 0 => array(
            'ingredients_ingredients' => array(
                'id' => '34',
                'level' => '1'
            )
        ),
        (int) 1 => array(
            (int) 0 => array(
                (int) 0 => array(
                    'ingredients_ingredients' => array(
                        'id' => '35',
                        'level' => '2'
                    )
                )
            )
        )
    ) 
```

但我想要这个结果

```
array(
    (int) 0 => array(
        (int) 0 => array(
            'ingredients_ingredients' => array(
                'id' => '34',
                'level' => '1',
                array(
                    'ingredients_ingredients' => array(
                        'id' => '35',
                        'level' => '2'
                    )
            )
        )
    ) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:16:52.073

代替

```
array_push($ingredient_ingredient, $ingredient_level1); 
```

经过

```
array_push(
    $ingredient_ingredient[0][0]['ingredients_ingredients'],
    $ingredient_level1
); 
```

这会将阵列推到适当的级联级别。但是，如果您无法在其他地方修改 SQL 或数组结构，这很可能是最有效的方法。

# iphone - 状态栏中的文本，如邮箱

> ID：14991328
> 
> 赞同：1
> 
> 时间：2013-02-20T22:41:51.567
> 
> 标签：iphone

我过去曾四处查看在状态栏中显示短消息/文本的方法，并且总是得出这样的结论，即它实际上不可能，或者不可能可靠 - 但邮箱应用程序广泛使用它，而且似乎工作得很好。

有谁知道可以在状态栏中显示文本的方法或框架或其他东西？这是一个相对较新的发展吗？我找到了 MTStatusBarOverlay，但它看起来几乎一年都没有被触及，这让我很紧张。还有其他好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:49:34.043

这可能是您正在寻找的[http://bit.ly/WXpUEg](http://bit.ly/WXpUEg) FDStatusBarNotifierView 看起来不错

# lync-2010 - UCMA 通用 QuestionAnswer 活动

> ID：14991329
> 
> 赞同：0
> 
> 时间：2013-02-20T22:41:52.803
> 
> 标签：lync-2010, ucma

我正在开发一个 UCMA 3.0 工作流应用程序，并试图在我们的客户管理系统中生成查询，从而允许最终用户通过语音或即时消息获取有关特定客户的数据。我想知道是否有人知道如何使用允许通用输入的 UCMA 创建通用问答活动。我知道我可以设置预期的输入和语法，但是使用双大写选项，以及最终用户知道确切的客户名称（或客户编号）的可能性，我更愿意允许用户输入姓名的一部分，然后在数据库中搜索可能符合条件的姓名列表。有谁知道一种方法，并且有示例代码可以让我在可能的情况下这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:25:23.557

我遇到了同样的问题，不得不编写一个自定义活动来捕获用户的通用输入。这需要一些工作才能使其生产就绪。请注意 system.exception 在多个地方的经典捕获，以及如果在超时期限内未收到输入而不是重新提示用户则抛出异常。用户输入也没有正则表达式...

InstanceDependencyProperty 是另一个让 Workflow 感到沮丧的东西。如果不使用 InstanceDependencyProperties，您将无法在活动完成后检索任何结果。

希望这可以帮助！

```
using System;
using System.ComponentModel;
using System.ComponentModel.Design;
using System.Collections;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Threading;

using System.Workflow.Activities;
using System.Workflow.Activities.Rules;
using System.Workflow.ComponentModel;
using System.Workflow.ComponentModel.Design;
using System.Workflow.ComponentModel.Compiler;
using System.Workflow.ComponentModel.Serialization;
using System.Workflow.Runtime;
using Microsoft.Rtc.Collaboration;
using Microsoft.Rtc.Workflow.Activities;
using Microsoft.Rtc.Workflow.Common;

namespace ActivityLibrary
{
    public partial class CaptureIMInput : Activity, IInstanceDependencyContainer
    {
        #region Private member variables
        private CallProvider _callProvider;
        private Timer _maximumTimer;
        private string _imText;
        private bool messageReceived = false;
        private bool _maximumTimerElapsed = false;
        #endregion

        public CaptureIMInput()
        {
            InitializeComponent();
            _instanceDependencyProperties = new Dictionary<string, object>();
        }

        protected override ActivityExecutionStatus Execute(ActivityExecutionContext executionContext)
        {
            try
            {
                this._callProvider = Utilities.GetCallProviderFromParent<InstantMessagingCall>(this);
                InstantMessagingCall call = (InstantMessagingCall)this._callProvider.Call;

                try
                {

                    if (call.State == CallState.Established)
                    {
                        call.Flow.EndSendInstantMessage(call.Flow.BeginSendInstantMessage(MainPrompt, null, null));
                        _maximumTimer = new Timer(new TimerCallback(OnMaximumTimerFired), null, MaximumPrompt, new TimeSpan(0, 0, 0, 0, -1));
                        call.Flow.MessageReceived += this.InstantMessagingFlow_MessageReceived;
                        while (!messageReceived)
                            {
                                if (_maximumTimerElapsed)
                                    throw new TimeoutException("User input was not detected within alloted time");
                            }
                        if (!string.IsNullOrEmpty(_imText))
                        {
                            IMText = _imText;
                            {
                                this.Stop();
                                return ActivityExecutionStatus.Closed;
                            }
                        }
                    }

                }
                catch (Exception ex)
                {
                    throw ex;
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }

            return ActivityExecutionStatus.Closed;
        }

        protected override ActivityExecutionStatus Cancel(ActivityExecutionContext executionContext)
        {
            this.Stop(); //Clean up timer
            return ActivityExecutionStatus.Canceling;
        }

        private void Stop()
        {
            if (_maximumTimer != null)
            {
                _maximumTimer.Dispose();
                _maximumTimer = null;
            }
        }

        private void InstantMessagingFlow_MessageReceived(object sender, InstantMessageReceivedEventArgs e)
        {
            //Can't set dependencyproperties directly from sub-thread
            _imText = e.TextBody;
            //Mark bool so main while loop exits
            messageReceived = true;
        }

        //Callback to 
        private void OnMaximumTimerFired(object state)
        {
            _maximumTimerElapsed = true;
        }

        #region InstanceDependency dictionary
        private Dictionary<string, object> _instanceDependencyProperties;
        [Browsable(false)]
        public Dictionary<string, object> InstanceDependencyProperties
        {
            get { return _instanceDependencyProperties; }
        }
        #endregion

        #region Maximum Prompt Timeout
        [NonSerialized]
        private static readonly InstanceDependencyProperty MaximumPromptProperty = InstanceDependencyProperty.Register("MaximumPrompt", typeof(TimeSpan), typeof(CaptureIMInput), new TimeSpan(0, 0, 30));

        [TypeConverter(typeof(TimeSpanConverter))]
        public TimeSpan MaximumPrompt
        {
            get
            {
                if (base.DesignMode)
                    return (TimeSpan)InstanceDependencyHelper.GetValue<CaptureIMInput>(this, MaximumPromptProperty);
                else
                    return (TimeSpan)InstanceDependencyHelper.GetValue<CaptureIMInput>(this, this.WorkflowInstanceId, MaximumPromptProperty);
            }
            set
            {
                if (base.DesignMode)
                    InstanceDependencyHelper.SetValue<CaptureIMInput>(this, MaximumPromptProperty, value);
                else
                    InstanceDependencyHelper.SetValue<CaptureIMInput>(this, this.WorkflowInstanceId, MaximumPromptProperty, value);
            }
        }
        #endregion

        #region MainPrompt
        public static DependencyProperty MainPromptProperty =
            DependencyProperty.Register("MainPrompt", typeof(string), typeof(CaptureIMInput));

        [ValidationOption(ValidationOption.Required)]
        public string MainPrompt
        {
            get
            {
                return (string)base.GetValue(MainPromptProperty);
            }
            set
            {
                base.SetValue(MainPromptProperty, value);
            }
        }
        #endregion

        #region Instant Message Text
        public static InstanceDependencyProperty IMTextProperty =
            InstanceDependencyProperty.Register("IMText",
                typeof(string),
                typeof(CaptureIMInput));

        [Description("InstantMessaging Text from user")]
        [Browsable(true)]
        [DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
        public string IMText
        {
            get
            {
                if (base.DesignMode) return ((string)InstanceDependencyHelper.GetValue<CaptureIMInput>(this, CaptureIMInput.IMTextProperty));
                else return ((string)(InstanceDependencyHelper.GetValue<CaptureIMInput>(this, this.WorkflowInstanceId, CaptureIMInput.IMTextProperty)));
            }
            set
            {
                if (base.DesignMode) InstanceDependencyHelper.SetValue<CaptureIMInput>(this, CaptureIMInput.IMTextProperty, value);
                else InstanceDependencyHelper.SetValue<CaptureIMInput>(this, this.WorkflowInstanceId, CaptureIMInput.IMTextProperty, value);
            }
        }
        #endregion

    }
} 
```

# jquery - 使用 jquery 的 asp.net 中继器

> ID：14991330
> 
> 赞同：2
> 
> 时间：2013-02-20T22:41:56.187
> 
> 标签：jquery, asp.net, repeater

我有一个转发器，它直接列出了来自与我的 Outlook 绑定的应用程序的电子邮件。我需要中继器列出文件夹名称，然后列出该文件夹中的每条消息。但是，我得到的是该文件夹中的每条消息的文件夹名称都会重复。

我还尝试使用 jquery 来切换文件夹名称以显示其下方的消息，但是当我使用时`style="display:none;"`不显示任何消息。我不认为我尝试使用的 jquery 是正确的。它被称为jsfiddle。

任何帮助将不胜感激，因为我正在画一个空白。我已经盯着这个太久了，可能只是需要休息一下。

这是我的代码：

```
<script type="text/javascript">
    $(function () {
        $('a.toggler').on('click', function () {
            $('+ div', this).toggle();
        });
    });
</script>

<asp:Repeater runat="server" ID="ListServRepeater">
            <ItemTemplate>
                <div class="dataContentSection">
                    <a href="javascript:void(0);" class="folders toggler">
                        <h4>
                            <%# Eval("FolderName") %>
                        </h4>
                    </a>
                </div>
                <div class="dataContentSection">
                    <div>
                        <%# Eval("Message") %>
                    </div>
                </div>
            </ItemTemplate>
</asp:Repeater> 
```

编辑：我嵌套了转发器，但我不能做正确的事情，因为所有文件夹名称仍然显示在每条消息中。

```
<div runat="server">
    <ul>
        <asp:Repeater runat="server" ID="FolderRepeater">
            <ItemTemplate>
                <li class="dataContentSection">
                    <a href="javascript:void(0);" class="folders toggler">
                        <h4>
                            <%# Eval("FolderName") %>
                        </h4>
                    </a>
                </li>
                <asp:Repeater runat="server" ID="MessagesRepeater">
                    <ItemTemplate>
                        <li class="dataContentSection" >
                            <div id="messages">
                                <%# Eval("Message") %>
                            </div>
                        </li>
                    </ItemTemplate>
                </asp:Repeater>
            </ItemTemplate>
        </asp:Repeater>
    </ul>
</div> 
```

**更新：**感谢@rs 提供文章帮助，我能够让中继器正常工作。如果您查看评论，该文章应该仍然存在。我几乎逐字逐句地替换了列名以及与我的代码相关的任何其他内容。仍在查看 jquery，无法弄清楚为什么它不起作用。我唯一能想到的是我试图显示和隐藏的数据是动态的，而不是静态的。

```
<div class="dataContentSection">
    <a href="javascript:void(0);" class="folders toggler">
        <h4>
           Folder Name
        </h4>
     </a>
 </div>
 <ul>
    <div class="dataContentSection">
        <div id="message">
          Message Text
        </div>
    </div>
 </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:02:47.870

这个问题是一个两部分的问题。rs 关于每个文件夹下消息的子转发器控件是正确的。一旦通过 .Net 解决了该问题，您就可以解决将显示/隐藏每个文件夹的 jquery 部分。

jquery 部分可以通过多种不同的方式来处理。这是一个示例代码，您可以在准备好处理 jquery 部分后参考：

```
<script type="text/javascript">
    $(function () {
        $('a').click(function() {
            $(this).parent().children('.dataContentSectionMessages').toggle();
        });
    });
</script>

<div class="dataContentSection">
    <a href="javascript:void(0);" class="folders toggler">
        <h4>
            Folder 1
        </h4>
    </a>
    <div class="dataContentSectionMessages">
        <div id="message1a">
            Message 1a
        </div>
        <div id="message1b">
            Message 1b
        </div>
    </div>
</div>
<div class="dataContentSection">
    <a href="javascript:void(0);" class="folders toggler">
        <h4>
            Folder 2
        </h4>
    </a>
    <div class="dataContentSectionMessages">
        <div id="message2a">
            Message 2a
        </div>
    </div>
</div> 
```

这是一个演示上述内容的 jsfiddle：http: [//jsfiddle.net/4PPdz/](http://jsfiddle.net/4PPdz/)

# c# - 如何确定“x[]”可能抛出哪些异常？

> ID：14991333
> 
> 赞同：5
> 
> 时间：2013-02-20T22:42:05.073
> 
> 标签：c#, exception, square-bracket

方括号的 C# 参考说：方括号 [] 用于数组、索引器和属性。它们也可以与指针一起使用。（它还说，对于数组）如果数组索引超出范围，则会引发异常。

所以当你在数组以外的东西上使用方括号时，你怎么知道可能会抛出什么异常？

对于字典（例如），如果您使用诸如[Dictionary.TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx)之类的访问器方法，则可以轻松查找该方法可能引发的异常，但[方括号 [] 的 C# 参考](http://msdn.microsoft.com/en-us/library/a3hd7ste.aspx)仅表示它可能会为 index out of数组上的范围。

*因此，如果您想对某些数据类型使用方括号，您可以在哪里查找该数据类型可能会引发哪些异常？*

我尝试访问字典中不存在的成员，只是为了看看会发生什么，然后我得到了 KeyNotFoundException。我知道你也可以得到 NullReferenceException。这是在哪里记录的？完整的清单是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:46:04.753

它记录在每个实现中。没有一个详尽的列表，因为运算符可能会被重载，因此理论上可能会引发任何异常。操作员通常被记录为`Item`财产。

以下是有关特定用途的一些文档：

[Dictionary.Item](http://msdn.microsoft.com/en-us/library/9tee9ht2.aspx)

[数组项](http://msdn.microsoft.com/en-us/library/bb494734.aspx)

但是，您不应该需要一份关于*可以*抛出什么的详尽清单。捕获异常通常有以下两个原因之一：要么您想对其*做点什么*（比如前几天`TryParse`捕获异常是捕获错误日期格式的最简单方法），要么您只想注意发生了异常并记录它，在这种情况下，您通常会重新处理实际的异常。

捕获特定异常对前一种情况有好处。例如，如果您捕获 a`NullReferenceException`它通常是重新抛出一个不同的异常，该异常指示*哪个*引用为空（因为这不是 stock 的一部分`NullReferenceException)`。

在后一种情况下，`Exception`如果您只想记录并重新抛出，则捕获泛型很好，因为您可能无能为力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T22:46:23.460

当[[] 运算符](http://msdn.microsoft.com/en-us/library/a3hd7ste.aspx)应用于 Dictionary<TKey, TValue> 或 List<T> 时，它会调用实例的[indexer](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。索引器是带有参数的特殊属性，通常称为`Item`.

*   [Dictionary<TKey, TValue>.Item 属性](http://msdn.microsoft.com/en-us/library/9tee9ht2.aspx)
    ArgumentNullException –*键*是`null`.
    KeyNotFoundException – 检索到属性，但集合中不存在*键。*

*   [List<T>.Item 属性](http://msdn.microsoft.com/en-us/library/0ebtbkkc.aspx)
    ArgumentOutOfRangeException –*索引*小于 0 -或-*索引*等于或大于*Count*。

*   ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:50:20.927

当用于访问数组时，它可以抛出一个`IndexOutOfRangeException`.

当用于属性时，它根本不会抛出任何异常，因为任何错误都会在编译时出现。

当用于访问索引器时，它可以抛出任何异常。索引器可以以任何你想要的方式实现，并抛出它喜欢的任何异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T22:45:29.993

一般来说，方括号本质上可以让您访问索引属性 - 因此，无论您正在使用的对象的属性索引器中提到什么错误。

对于数组，可能是索引超出范围，对于DataRow，可能是未找到列等等。

# perl - 提取部分数字的 Perl 脚本

> ID：14991335
> 
> 赞同：0
> 
> 时间：2013-02-20T22:42:12.943
> 
> 标签：perl

我写了一个 Perl 脚本，它从文件中读取并进行计算。基本上我正在尝试计算网络流量的吞吐量。我正在读取的文件具有以下格式：

```
- 0.152416 1 2 tcp 1040 ------- 2 12.0 2.9 2 13
r 0.153584 1 2 tcp 1040 ------- 2 12.0 2.9 1 12
+ 0.154208 1 2 tcp 1040 ------- 2 10.0 2.7 3 15
- 0.154208 1 2 tcp 1040 ------- 2 11.0 2.8 3 15
r 0.155248 1 2 tcp 1040 ------- 2 12.0 2.9 2 13 
```

我正在提取列 [0]、[3]、[7]、[8]、[9]。由于列 [8] 和 [9] 是双列（iexy），我试图只获取列 [8] 和 [9] 的第一部分（即 x 部分）。换句话说，我不关心点“。”之后的第二部分。. 我只需要第一部分。我想，我有两种方法，是否处理正则表达式或添加更多额外代码来自定义 [8] 和 [9] 中我将阅读的每一行的标记？。任何简短的建议。脚本的一部分：

```
#input parameters:
$infile=$ARGV[0];
$dest=$ARGV[1];
$from=$ARGV[2];
$to=$ARGV[3];
$fId=$ARGV[4];
$TimeShift=$ARGV[5]; 
```

我想让 $from 和 $to 只包含第一部分。

```
open (DATA,"<$infile") || die "error in  $infile $!";
while (<DATA>) 
   {  
  @x = split(' ');  Im using space 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:47:35.893

关于什么

```
$from = int $ARGV[2]; 
```

有关详细信息，请参见[int](http://p3rl.org/int)。

更确切地说，

```
my ($infile, $dest, $from, $to, $fId, $TimeShift) = @ARGV;
$_ = int for $from, $to; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:43:00.133

如果你只是想扔掉点和后面的数字，你可以使用`s/[.][0-9]+\z//`. 这样，将不涉及浮点转换。

```
#!/usr/bin/env perl

use strict; use warnings;
use Data::Dumper;

while (my $line = <DATA>) {
    last unless $line =~ /\S/;
    my @cols = (split ' ', $line)[0, 3, 7 .. 9];
    s/[.][0-9]+\z// for @cols[-2 .. -1];
    print Dumper \@cols;
}

__DATA__
- 0.152416 1 2 tcp 1040 ------- 2 12.0 2.9 2 13
r 0.153584 1 2 tcp 1040 ------- 2 12.0 2.9 1 12
+ 0.154208 1 2 tcp 1040 ------- 2 10.0 2.7 3 15
- 0.154208 1 2 tcp 1040 ------- 2 11.0 2.8 3 15
r 0.155248 1 2 tcp 1040 ------- 2 12.0 2.9 2 13 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:21:25.380

不过，您应该知道，虽然您可以使用`int`，但它有一些危险的警告。

来自`perldoc -f int`：

> 您不应该使用此函数进行舍入：一是因为它会截断为 0，二是因为浮点数的机器表示有时会产生违反直觉的结果。例如，“int(-6.725/0.025)”产生 -268 而不是正确的 -269；那是因为它实际上更像是 -268.99999999999994315658。通常，“sprintf”、“printf”或“POSIX::floor”和“POSIX::ceil”函数会比 int() 更好地为您服务。

相反，考虑这样做：

```
using POSIX;
...
...

$from = POSIX::floor($ARGV[2]); 
```

# mono - 类与 .NET 兼容 CLS，但在 Mono 中不兼容

> ID：14991336
> 
> 赞同：0
> 
> 时间：2013-02-20T22:42:20.707
> 
> 标签：mono, cls-compliant

我必须建立自己的 Version 类。在 .NET 中它符合 CLS，但在 Mono 中它不是出于某种原因。任何想法为什么？

```
[Serializable]
public class Version : ICloneable, IComparable, IComparable<Version>, IEquatable<Version>
{
    private int major;
    private int minor;
    private int revision;
    private int build;

    protected Version()
    {
    }

    public Version(int major, int minor)
    {
        Major = major;
        Minor = minor;
    }

    public Version(int major, int minor, int revision, int build) : this(major, minor)
    {
        Revision = revision;
        Build = build;
    }

    public Version(string version)
    {
        if (string.IsNullOrWhiteSpace(version))
        {
            throw new ControlInfluence.Exceptions.ArgumentNullStringException("version");
        }

        string[] parts = version.Split('.');
        if ((parts.Length != 4) && (parts.Length != 2))
        {
            throw new ArgumentException("'version' must have 2 or 4 numbers separated by '.'.", "version");
        }
        if (!int.TryParse(parts[0], out major))
        {
            throw new ArgumentException("'version' must have 2 or 4 numbers separated by '.'.", "version");
        }
        if (!int.TryParse(parts[1], out minor))
        {
            throw new ArgumentException("'version' must have 2 or 4 numbers separated by '.'.", "version");
        }
        if (!int.TryParse(parts[2], out revision))
        {
            throw new ArgumentException("'version' must have 2 or 4 numbers separated by '.'.", "version");
        }
        if (!int.TryParse(parts[3], out build))
        {
            throw new ArgumentException("'version' must have 2 or 4 numbers separated by '.'.", "version");
        }
    }

    public int Major
    {
        get
        {
            return major;
        }
        set
        {
            major = value;
        }
    }

    public int Minor
    {
        get
        {
            return minor;
        }
        set
        {
            minor = value;
        }
    }

    public int Build
    {
        get
        {
            return build;
        }
        set
        {
            build = value;
        }
    }

    public int Revision
    {
        get
        {
            return revision;
        }
        set
        {
            revision = value;
        }
    }

    public override string ToString()
    {
        return string.Format(CultureInfo.InvariantCulture, "{0}.{1}.{2}.{3}", Major, Minor, Revision, Build);
    }

    public static bool operator <(Version left, Version right)
    {
        if ((left == null) || (right == null))
        {
            return false;
        }

        return left.CompareTo(right) < 0;
    }

    public static bool operator >(Version left, Version right)
    {
        if ((left == null) || (right == null))
        {
            return false;
        }

        return left.CompareTo(right) > 0;
    }

    #region ICloneable Members

    public object Clone()
    {
        return new Version(Major, Minor, Revision, Build);
    }

    #endregion

    #region IComparable Members

    public int CompareTo(object obj)
    {
        Version other = obj as Version;
        if (other == null)
        {
            return -1;
        }
        return CompareTo(other);
    }

    #endregion

    #region IComparable<Version> Members

    public int CompareTo(Version other)
    {
        if (other == null)
        {
            return -1;
        }

        int compareMajor = Major.CompareTo(other.Major);
        if (compareMajor != 0)
        {
            return compareMajor;
        }
        int compareMinor = Minor.CompareTo(other.Minor);
        if (compareMinor != 0)
        {
            return compareMinor;
        }
        int compareRevision = Revision.CompareTo(other.Revision);
        if (compareRevision != 0)
        {
            return compareRevision;
        }
        return Build.CompareTo(other.Build);
    }

    #endregion

    #region IEquatable<Version> Members

    public bool Equals(Version other)
    {
        return CompareTo(other) == 0;
    }

    #endregion

    public override bool Equals(object obj)
    {
        Version version = obj as Version;
        if (version == null)
        {
            return false;
        }
        return Equals(version);
    }

    public static bool operator ==(Version left, Version right)
    {
        if (Object.ReferenceEquals(left, null) && Object.ReferenceEquals(right, null))
        {
            return true;
        }
        if (Object.ReferenceEquals(left, null) || Object.ReferenceEquals(right, null))
        {
            return false;
        }

        return left.Equals(right);
    }

    public static bool operator !=(Version left, Version right)
    {
        if ((left == null) || (right == null))
        {
            return false;
        }

        return !left.Equals(right);
    }
} 
```

我抛出的自定义异常类只是 ArgumentNullException 的包装器，它为我“自动填充”消息，因此它们实际上并没有添加任何类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:36:01.883

如果它在 .NET 中与 CLS 兼容，但在 Mono 上不兼容，则它是 Mono 中的错误。[请在http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)中提交错误

# python - Python 使用高阶函数

> ID：14991344
> 
> 赞同：3
> 
> 时间：2013-02-20T22:43:25.063
> 
> 标签：python

我正在尝试以下列方式填充 3D 列表：

```
l1 = []
for _ in range(5):
    l2 = []
    for _ in range(10):
        l2.append([0] * 20)
    l1.append(l2) 
```

它看起来真的很恶心，我觉得应该有一些方法来使用高阶函数或匿名函数或列表理解来实现这一点。任何 python ninjas 都可以告诉我如何实现这一目标吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:46:25.817

`numpy`如果您计划进行“矢量化”计算，您可以考虑使用：

```
l1 = np.zeros((5, 10, 20)) 
```

[文档。](http://docs.scipy.org/doc/numpy/reference/generated/numpy.zeros.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:00:08.503

试试这个：

```
[[[0]*20 for _ in xrange(10)] for _ in xrange(5)] 
```

@zch 最初给出的答案有一个*非常*严重的问题：它在结果矩阵中一遍又一遍地复制相同的列表，因此一个位置的变化将同时反映在其他不相关的位置！

My solution is indeed equivalent to your definition of `l1`, but written a bit more concisely thanks to the use of list comprehensions. Notice that we're not using the iteration variables, so it's ok to use `_` as placeholder. And, assuming you're using Python 2.x, it's a better idea to use `xrange` because we don't need the list created by `range`. (If using Python 3.x, it's ok to use `range`)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:47:06.110

```
>>> l1 == [[[0]*20]*10]*5
True 
```

但是这种方式存在别名 - 例如更改`a[0][1][2]`也会更改`a[4][5][2]`，为了避免它，副本是必要的：

```
[[[0]*20 for i in range(10)] for j in range(5)] 
```

# c# - WinRT，TextBox的焦点，奇怪的行为

> ID：14991345
> 
> 赞同：0
> 
> 时间：2013-02-20T22:43:36.923
> 
> 标签：c#, xaml, textbox, windows-runtime, focus

在我的 WinRT 应用程序的一个视图中，我希望在失去焦点`BottomAppBar`时显示。`TextBox`我玩了`GotFocus`和`LostFocus`事件，我可以使用这些事件手动更改相应的`IsOpen`属性`BottomAppBar`。

问题是，当`BottomAppBar`打开时，如果用户单击`TextBox`，`BottomAppBar`则关闭（标准 AppBar 行为），但`TextBox`没有聚焦（即使用户单击它右）。用户需要再次聚焦`TextBox`才能再次键入内容。

如果我在尝试以编程方式将焦点设置为 的`Closed`情况下将自己连接起来，它很快就会成为焦点，但会立即失去焦点，相反，它的 ScrollViewer 会获得焦点。`BottomAppBar``TextBox`

知道为什么`TextBox`第二次失去焦点吗？知道如何做我想要实现的目标吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:33:42.123

当您点击它时，您可能`BottomAppBar`会关闭，`ScrollViewer`然后将焦点设置为您的焦点，然后`TextBox`将焦点设置为`ScrollViewer`右侧。如果您只想将焦点放在`TextBox`- 您可以禁用焦点`ScrollViewer`。您也可以尝试在延迟后设置焦点（使用`await Task.Delay(50);`或使用，`await Dispatcher.RunAsync(() => /*set focus)`因此它可能会在`ScrollViewer`获取焦点或处理`GotFocus`之后`ScrollViewer`设置，并将焦点设置回`TextBox`您希望它保持焦点的时间。最后确保`TextBox`完全可以集中注意力。

# c++ - 为什么允许我从 const 成员函数调用 this->deviceContext->map() ？

> ID：14991347
> 
> 赞同：1
> 
> 时间：2013-02-20T22:43:47.050
> 
> 标签：c++, constants, direct3d, const-correctness, direct3d11

我不明白为什么这是允许的：

```
void Renderer::UpdateTextureFromArray(unsigned int* colors, unsigned int size, TextureData* textureData) const
{
    D3D11_MAPPED_SUBRESOURCE ms;
    this->deviceContext->Map(textureData->texture, 0, D3D11_MAP_WRITE_DISCARD, NULL, &ms);

    memcpy(ms.pData, colors, sizeof(unsigned int) * size * size);
    this->deviceContext->Unmap(textureData->texture, 0);
} 
```

我将 UpdateTextureFromArray 函数设为 const，但我仍然可以在其成员上调用非常量函数吗？

在这种情况下，将函数标记为 const 对我来说是不好的风格吗？

编辑：澄清一下，如果我有这样的函数，它是对社会“撒谎”吗？在一个完美的世界里，这段代码不会编译，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:50:07.680

推测`deviceContext`是指针数据成员，所以`const`方法不能修改指针。但是允许修改指针指向的对象：

```
struct Bar {
  void bar() {} // non const method
};

struct Foo {
  Foo() : p(0) {}
  void foo() const { p->bar();} // const method calling non-const method of Bar
  Bar* p;
};

int main()
{
  const Foo f;
  f.foo();  // OK, Foo::p is not modified
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T22:51:38.117

您不是在其成员上调用非常量函数，而是在取消引用其成员（不会修改它，因此允许使用`const`指针完成），然后在结果上调用非常量成员取消引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:05:44.097

您不是在其成员上调用非常量函数，而是在访问指向非常量对象的指针（即常量）。因此，您可以在其上调用非常量函数。

关于样式， const 方法是一种不会从用户角度改变对象状态的方法。因此，您必须考虑此指针访问是否执行此操作。一些类是并行化的候选者，在这种情况下，const 方法被认为是安全的并行化方法，因为它们应该没有副作用。

因此，为了限定一个方法的 const，我建议它：

*   不是并行化的候选者并且没有用户可见的副作用
*   是并行化的候选者，但具有适当的同步或根本没有副作用。

# python - 如何在python中递归地写出这个总和？

> ID：14991348
> 
> 赞同：0
> 
> 时间：2013-02-20T22:43:54.347
> 
> 标签：python, recursion, for-loop, sum

我将如何在 python 中递归地编写这个函数：[我的问题](https://math.stackexchange.com/questions/309015/rolling-5-6-sided-dice-where-top-3-equal-15-how-many-rolls-how-in-recursion)（第一个答案）？这是我到目前为止所拥有的：

```
def f(n, p, k, t):
    sum(for p in xrange(1, 7):
        sum(for i in xrange(1,7):
                if n == 3: return 1
                if k == 1: return 0
                return (1/36) * f(n-1,p,k-1,t-max(p,i))
            )
        )

print sum([f(5,j,3,15) for j in xrange(1, 7)]) 
```

任何帮助表示赞赏，谢谢！:D

**编辑：**链接中的问题是这样的：

“假设我有 5 (n)、6 面 (d) 普通骰子。我如何计算出有多少可能的掷骰，其中前 3 (k) 个数字掷出的数字等于 15 (t)？我使用诸如 f(n,d,k,t)=∑i=1jf(something,with,n,d,k,t...) 之类的递归来做到这一点，其中基本情况是别的东西。我怎么想这出来了？请帮忙。谢谢。

我得到的答案是：

离开我的评论，如果我们添加一个参数 p 是不在当前顶部 k 中的顶部骰子（并丢弃 d，因为无论如何所有骰子都是 6 面的），那么我相信我们会得到以下结果：f( n,p,k,t)=∑p′=16∑i=16136⋅f(n−1,p′,k−1,t−(max(p′,i))) 变量i代表结果下一个骰子被抛出。

我不知道这是否正确。我只是对这个问题很感兴趣，想试一试。这就是我想出的。

总和 15 的最终概率将是 ∑p=16f(5,p,3,15)，递归基本情况为 n=3,k=1。

提出这样的递归背后的一般思想如下：您想知道到达状态 A 的概率。然后查看所有可以立即到达 A 的情况，并将到达这些状态的概率乘以从那个“前状态”到达 A。然后你总结所有的前状态。

我没有复制它的原因是因为 sigma 符号和 LaTeX 点点滴滴没有出现在 stackoverflow 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:47:53.173

你只是混杂了一些东西。

## For 循环与生成器表达式

对于循环：

```
for p in range(1, 7):
    statement() 
```

生成器表达式：

```
expression() for p in range(1, 7) 
```

请注意，没有冒号，并且该值位于`for`.

## If 语句与条件表达式

如果声明：

```
if predicate():
    true_stmt()
else:
    false_stmt() 
```

如果表达式：

```
true_expr() if predicate() else false_expr() 
```

## 把它放在一起

```
def f(n, p, k, t):
    return sum(sum(1 if n == 3 else
                   (0 if k == 1 else
                    (1/36) * f(n-1, p, k-1, t-max(p,i))))
                   for i in range(1, 7))
               for p in range(1, 7)) 
```

# javascript - 在 UIWebview 上禁用缩放/镜头而不禁用用户选择

> ID：14991349
> 
> 赞同：0
> 
> 时间：2013-02-20T22:43:56.973
> 
> 标签：javascript, ios, css, uiwebview

我喜欢禁用 uiwebview 上的缩放/镜头。但是，我不希望任何用户选择在此过程中被禁用，即我不能在我的 css 中使用以下内容。

```
-webkit-user-select:none 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:02:50.630

如果您有权访问 UIWebView，则可以执行以下操作：'[myWebView setScalesPageToFit:NO]'

这将禁用 Web 视图中的缩放。

[资源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

# android - Android 添加“values-en”文件夹会导致“无法解析资源”警告

> ID：14991350
> 
> 赞同：1
> 
> 时间：2013-02-20T22:44:02.053
> 
> 标签：android, eclipse, android-resources

我有下一个问题：

当我添加一个名为*"values-en"*的新文件夹并将*strings.xml*文件从默认文件夹*"values"*移动到该*"values-en"*时，我总是会收到下一个错误：

`Couldn't resolve resource @string/my_string`

我已经清理了项目并刷新了，警告总是在那里。

是否有任何限制，我必须始终在设备文件夹“值”中有一个 strings.xml？

有人做过同样的实验吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T22:53:23.137

您必须拥有 values 文件夹。要支持多种语言，您可以添加其他值文件夹（values-en、values-fr 等）。在默认值文件夹中，您可以使用应用程序的默认语言和 values-en 声明字符串，但使用相同的字符串但带有英文翻译。

# jquery - 第 N 个孩子和祖父母或第二级孩子

> ID：14991357
> 
> 赞同：2
> 
> 时间：2013-02-20T22:44:44.300
> 
> 标签：jquery, jquery-selectors, parent, css-selectors

这可能很简单，但无法弄清楚！

我有这样的代码：

```
<div class="grandparent">
    <div class="parent">
        <div class="child" id="1"></div>
        <div class="child" id="2"></div>
        <div class="child" id="3"></div>
        <div class="child" id="4"></div>
    </div> 
    <div class="parent">
        <div class="child" id="5"></div>
        <div class="child" id="6"></div>
    </div> 
</div> 
```

我试过了：

```
$('.grandparent .child:nth-child(3n)').css("margin-right","0px"); 
```

所以我需要**孩子#3**和**孩子#6**有margin-right:0px。

但它总是将**.parent**称为 3n 孩子，而不是选定的类**.grandparent**，因此只有**孩子 #3**受到影响。

知道解决它的简单方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:47:41.943

我建议：

```
$('.grandparent .child').filter(function(i){
    return (i+1)%3 === 0;
}).css('margin-right', '0px'); 
```

[JS Fiddle 概念验证](http://jsfiddle.net/davidThomas/YqA2D/)（`color`用于使其更易于查看）。

参考：

*   [`filter()`](http://api.jquery.com/filter/).

# c++ - 努力使用 gdb 调试带有 Ada 库的 C++ 代码

> ID：14991358
> 
> 赞同：1
> 
> 时间：2013-02-20T22:45:00.337
> 
> 标签：c++, linux, gcc, gdb, ada

由于各种原因，我无法详细说明，但这是我正在使用的基本架构

*   我有一个 C++ 框架，它使用我构建的 C++ 目标文件来执行动态模拟。
*   除其他外，C++ 库调用一个用 Ada 编写的共享 (.so) 库。

据我所知，Ada 库（它是大量重要代码的集合）在边缘情况下生成异常，但我在隔离生成异常的函数时遇到了麻烦。

这是我正在使用的：

*   CentOS 4.8（最终版）
*   gcc 3.4.6 (w/ gnat)
*   gdb 6.3.0.0-1.162.el4rh

这是我在正常执行下遇到的错误：

```
terminate called without an active exception
raised PROGRAM_ERROR : unhandled signal 
```

我可以让 gdb 在异常返回到 C++ 后立即捕获它，但我无法让它在 Ada 代码中捕获。我已经确保用 编译所有内容`-g`，但这似乎无助于解决问题。

当我尝试捕捉/中断信号/异常时`gdb`（礼貌地告诉我`Catch of signal not yet implemented`），我得到了这个：

```
[Thread debugging using libthread_db enabled]
[New thread -1208371520 (LWP 14568)]
terminate called without an active exception
Program received signal SIGABRT, Aborted.
[Switching to thread -1208371520 (LWP 14568)]
0x001327a2 in _dl_sysinfo_int80 () from /lib/ld-linux.so.2 
```

我相信这`terminate called [...]`条线来自框架。当我尝试捕获该中断，然后运行回溯（`bt`）时，我得到如下信息：

```
#0  0x001327a2 in gdb makes me want to flip tables.
#1  0x00661825 in raise () from /lib/tls/libc.so.6
#2  0x00663289 in abort () from /lib/tls/libc.so.6
#3  0x0061123e in __gnu_cxx: __verbose_terminate_handler () from /usr/lib/libstdc++.so.6
#4  0x0060eed1 in __xac_call_unexpected () from /usr/lib/libstdc++.so.6
#5  0x0060ef06 in std::terminate () from /usr/lib/libstdc++.so.6
#6  0x0060f0a3 in __xax_rethrow () from /usr/lib/libstdc++.so.6
#7  0x001fe526 in cpputil::ExceptionBase::Rethrow (scope=@0xbfe67470) at ExceptionBase.cpp:140 
```

那时，它进入了框架代码。

我已经在线阅读了几个指南、教程和手册页，但我有点不知所措。我希望这里有人可以帮助我指出正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T01:31:15.167

听起来您可以编译 Ada 源代码。假设是这种情况，在通过其执行引发异常的子程序中，在转储异常信息的末尾添加一个异常处理程序：

```
when E : others =>
    Ada.Text_IO.Put_Line(Ada.Exceptions.Exception_Information(E));
    raise; 
```

您还需要将 Ada.Exceptions 的“with”添加到包中。和 Ada.Text_IO 如果它不存在的话。

我不确定你会从那个版本的 GNAT 中得到什么，但它可能是你可以使用 addr2line 解码的调用地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:57:40.423

你能从 Ada main 启动 C++ 框架吗？如果是这样，并且您可以通过 C++ 框架将异常传播到 Ada 主程序，它的最后机会处理程序应该为您提供一个非常好的报告，其中包含异常、源文件和发生的行以及 addr2line 的堆栈转储。我对这些的经验是，之后通常不需要调试器。

我可能会在这里走神，因为我没有使用过任何像你一样古老的蚊子......

# ruby-on-rails - 在 Rails 应用程序中使用 Grape 有什么好处？

> ID：14991359
> 
> 赞同：3
> 
> 时间：2013-02-20T22:45:00.997
> 
> 标签：ruby-on-rails, ruby, api, rack, grape

我有一个 Rails 网络应用程序，我想提供 API。我找到了 Grape，它看起来不错，它也可以安装到 Rails 中，但我不确定将 Grape 安装到我的 Rails 应用程序中并将其用于 API 而不是 Rails 控制器的好处。

据我了解，Grape 非常适合构建仅提供 API 的应用程序，但我的情况并非如此。

你认为在 Rails 应用程序中使用 Grape 有什么好处，我为什么要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:55:54.633

Rails 中的 Grape 可以轻松标准化 API 的语法。

例如，参数验证和强制、与 Rails 开箱即用的 API 不同的错误处理，以及典型响应的简单快捷方式。

当然，您可以使用 Rails 完成所有这些工作。葡萄只是让它变得容易。

# android - Android 应用程序从睡眠中醒来时更改语言

> ID：14991361
> 
> 赞同：0
> 
> 时间：2013-02-20T22:45:24.157
> 
> 标签：android

我的申请有问题。我正在为用户提供更改语言的选项。使用以下代码效果很好：

```
public void jezik_slo(View view)
{
     Locale locale = new Locale("SI_sl");
     Locale.setDefault(locale);
     Configuration config = new Configuration();
     config.locale = locale;
     this.getApplicationContext().getResources().updateConfiguration(config, null);
}

public void jezik_ang(View view)
{
     Locale locale = new Locale("en_US");
     Locale.setDefault(locale);
     Configuration config = new Configuration();
     config.locale = locale;
     this.getApplicationContext().getResources().updateConfiguration(config, null);
} 
```

一切都很好，除了锁定手机，或者手机进入睡眠状态，然后醒来。此时应用程序使用默认字符串值（Values -EN）我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:57:49.923

两个元素： - 为什么在方法中有参数“查看视图” - 如果要保存所选语言，可以将其保存在某处。就像在“SharedPreference”中一样：

添加保存方法：

```
private static final String BASE_LANGUAGE = "base", KEY_LANGUAGE = "lang";

private void saveLanguage(String lang) {
SharedPreferences sp = this.getSharedPreferences(BASE_LANGUAGE, Context.MODE_PRIVATE);
Editor editor = sp.edit();
editor.putString(KEY_LANGUAGE, lang);
editor.commit();
} 
```

添加获取方法：

```
private String getLanguage() {
SharedPreferences sp = this.getSharedPreferences(BASE_LANGUAGE, Context.MODE_PRIVATE);
return sp.getString(KEY_LANGUAGE, "en_US"); //en_US is default language
} 
```

删除重复代码

```
public void jezik(String lang)
{
     Locale locale = new Locale(lang);
     Locale.setDefault(locale);
     Configuration config = new Configuration();
     config.locale = locale;
     this.getApplicationContext().getResources().updateConfiguration(config, null);
     saveLanguage(lang);
} 
```

要加载语言，在“onCreate”方法中，试试这个：

```
jezik(getLanguage()); 
```

在这段代码中，“this”是 Activity 或 Context。对不起我的英语，我希望这是你想要的

# php - 使测试依赖于其他测试 Selenium Server

> ID：14991362
> 
> 赞同：1
> 
> 时间：2013-02-20T22:45:26.157
> 
> 标签：php, selenium, phpunit

对于测试，使用 @depends 可以使测试方法依赖于另一个测试方法，这样，如果第一个测试失败，依赖它的测试将被忽略，有没有办法用测试类做到这一点

例如，假设我有一个页面要测试其布局，检查图像是否显示，如果链接正确，这将是一个测试类，在这个页面上是一个表单的链接，对于那个页面我会创建一个新的测试类检查它的布局，验证等。

我想尝试的是，如果第一个测试类的任何测试失败，那么第二个应该被跳过，因为第一页应该是正确的，因为它将是用户在进入第一个之前看到的页面（除非他们输入第二页的网址，但必须假设用户很愚蠢，因此不知道地址栏是如何工作的）

我还应该注意，所有测试都是使用 TFS 存储的，因此虽然团队将进行相同的测试，但我们可能有不同的 phpunit.xml 文件（一个人显然使用 php.xml.dist 并且不会改变它，因为它被提到过一次在 Magento TAF 中，即使我使用 .xml 并且没有问题），因此，尝试在 phpunit.xml 中强制执行命令不会那么有用（在 .xml 中强制执行命令也不会执行此依赖项）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:59:23.333

**仅仅因为我们可以做一件事，并不意味着我们应该做。** 让测试依赖于其他测试的成功执行是一个坏主意。每一篇关于测试的体面文字都会告诉你这一点。听他们说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T00:21:48.837

我不认为 phpUnit 有办法让一个测试类依赖于另一个。（我开始写下一些让我想起的黑客，但它们是如此丑陋和脆弱，我再次删除了它们。）

我认为最好的方法是为所有功能测试提供一大类。然后你可以根据需要使用@depends。<-- 这就是我对您的实际问题的回答结束的地方:-)

在您对罗斯回答的评论中，您说：“*我被告知，如果您在一个班级中有大量（测试）方法，那么您应该将其分成单独的班级*”要了解为什么我们被允许违反此规则，您必须深入了解为什么这通常是一个好主意：一个类中的大量代码表明该类做得太多，使其更难更改，更难测试。因此，您使用提取类重构将类拆分为更精细的功能。但绝不是机械地：每个类仍然应该是对*某事物*的一个好的、干净的抽象。

在单元测试中，最好将类视为将相关测试收集在一起的一种方式。当一个测试依赖于另一个测试时，显然它们是相关的，因此它们应该属于同一类。

如果一个 2000 行的文件让您不满意，您可以做并且应该做的一件事是提取父类。所有辅助函数和自定义断言都进入您的父类。您将把所有实际测试留在派生类中，但仔细检查每个测试，看看哪些常见功能可以移动到共享函数中，然后将该共享函数放入父类中。

回应罗斯的`@depends`邪恶建议，我更愿意将其视为帮助您找到理想主义和现实世界约束之间的平衡。在理想的世界中，您希望所有测试都完全独立。这意味着每个测试都需要自己创建和拆除夹具。如果使用数据库，它应该创建自己的数据库（一个唯一的名称，因此将来它们可以并行运行），然后创建表，用数据填充它们等。（使用父类中的辅助函数分享这个通用的夹具代码。）

另一方面，我们希望我们的测试在 100 毫秒内完成，这样它们就不会中断我们的创作流程。夹具共享有助于加快测试速度，但代价是消除了独立性。

对于网站的功能测试，我建议将`@depends`其用于登录等显而易见的事情。如果您的大多数测试将首先登录到该站点，那么创建 loginTest() 并让所有其他测试 @depend 依赖于它是很有意义的。如果登录不起作用，您肯定知道所有其他测试都将失败......并且在此过程中浪费了大量最有价值的程序员资源。

当它不是那么明确时，我会在理想主义方面犯错，如果需要，稍后再回来优化。

# ruby-on-rails - 预编译资产时“命令失败并显示状态 ()”

> ID：14991365
> 
> 赞同：19
> 
> 时间：2013-02-20T22:45:42.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake, asset-pipeline

在他们的生产机器上编译资产时，我遇到了很多用户类似的问题。唯一的区别是我无法从跟踪中得到任何提示来解决问题。

```
rake assets:precompile RAILS_ENV=production --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/usr/local/rbenv/versions/1.9.3-p362/bin/ruby /usr/local/rbenv/versions/1.9.3-p362/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Command failed with status (): [/usr/local/rbenv/versions/1.9.3-p362/bin/r...]
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/file_utils.rb:53:in `block in create_shell_runner'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/file_utils.rb:45:in `call'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/file_utils.rb:45:in `sh'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/file_utils_ext.rb:39:in `sh'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/file_utils.rb:80:in `ruby'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/file_utils_ext.rb:39:in `ruby'
/home/app/application/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/home/app/application/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/home/app/application/ruby/1.9.1/gems/actionpack-3.2.12/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/task.rb:205:in `call'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/task.rb:205:in `block in execute'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/task.rb:200:in `each'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/task.rb:200:in `execute'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/task.rb:151:in `invoke_with_call_chain'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/task.rb:144:in `invoke'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:116:in `invoke_task'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:94:in `each'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:94:in `block in top_level'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:88:in `top_level'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:66:in `block in run'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rbenv/versions/1.9.3-p362/lib/ruby/1.9.1/rake/application.rb:63:in `run'
/usr/local/rbenv/versions/1.9.3-p362/bin/rake:32:in `<main>'
Tasks: TOP => assets:precompile 
```

实际上没有状态码，只有失败。如果我直接或通过调用 rake 也没有任何区别`bundle exec`。

**关于** 带有全局 rbenv 安装的环境 debian 挤压盒（`/usr/local/rbenv`就像您从跟踪中看到的那样）。Ruby 1.9.3 2012-12-25 补丁级别 362。

对此有任何提示/想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-03T09:42:03.257

我将自己回答这个问题，因为我或多或少可以解决它。如果有人有补充，请不要犹豫，写一个自己的答案或评论这个答案/问题。

**到目前为止我发现了什么：**

如果您`assets:precompile`只是通过编译主要资产 ( `assets:precompile:primary`) 或显式调用`assets:precompile:all`您可能会得到有关问题根源的提示。就我而言，我同时遇到`Errno::EACCES`了`public/`和`tmp/`。不知何故未显示，因此请确保您的用户拥有在那里创建/删除文件和文件夹的完全权限。

就我而言，它有时会起作用，因为我已经关闭了 rails 应用程序并在它关闭时进行了预编译。由于预编译会分配大量内存，因此我进行了一些试验和错误，最终`Killed`在 rake 尝试执行时得到了已知消息`asstes:precompile:primary`。由于使用了太多内存，该任务被简单地杀死了。

另一个问题是 sprockets 在预编译时找不到`bootstrap`将其放入资产管道中。搬到`gem 'bootstrap'`外面`group :assets`解决了这个问题。这也是我在玩命令时得到的提示。

解决（或更好：解决）这个问题的最佳方法是简单地在本地编译您的资产。只需将 a`rake assets:precompile RAILS_ENV=development`放入您的终端，然后部署`public/assets`. **请记住在部署后在开发环境中删除该文件夹，否则您将最终调试为什么您的更改`app/assets/*`在开发中没有生效。**至少这对我有用（tm）。

或者，增加交换分区也可能有效。但是，在需要使用 swap 的 VPS 上编译可能需要一段时间，所以我会坚持使用本地方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T15:00:52.643

我也有同样的问题。我通过添加交换来修复它（在我的情况下，我的服务器上可用的 512RAM 为 1gb）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-31T13:08:50.873

尝试`htop`在您的资产编译时运行，看看您是否用完了 RAM。添加交换为我修复了它。

请参阅本指南以添加交换：[https ://www.digitalocean.com/community/articles/how-to-add-swap-on-ubuntu-12-04](https://www.digitalocean.com/community/articles/how-to-add-swap-on-ubuntu-12-04)

# c - Syntastic C make checker 不报告错误

> ID：14991366
> 
> 赞同：0
> 
> 时间：2013-02-20T22:45:52.803
> 
> 标签：c, vim, syntastic

我正在编写 C 代码，最初使用的是 gcc 检查器。在 C 文件中报告了错误。由于例如检查器中的 gcc 命令行上没有包含目录开关，因此报告了许多无关紧要的错误。因为我们正在使用 icc 并且设置所有已在我们的 makefile 中设置的参数感觉很笨拙，所以我决定切换到使用 make 检查器。

切换到 make checker 后，我没有得到任何结果。查看 make.vim 中的 makeprg 命令，它是`make -sk`. 我意识到我们的 makefile 没有设置为进行语法检查，所以我创建了一个名为 syntax_check 的新目标，它添加了`-fsyntax-only`and`-c`标志。然后我将 make.vim makeprg 命令更改为`make -sk clean syntax-check`以便运行适当的目标。

当我保存文件时，我`top`在另一个窗口中查看并看到构建正在发生。但是，我仍然没有收到任何错误。我的意思是我没有看到绿色侧边栏指示没有错误的行。运行`:Errors`不会显示位置列表。

有任何想法吗？我是否理解如何查看语法错误中生成的错误（很可能是这样）？

作为这里问题的旁注，我也在 Syntastic [github](https://github.com/scrooloose/syntastic)页面上提出了这个问题[。](https://github.com/scrooloose/syntastic/issues/525)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:40:17.033

事实证明，`errorformat`处理 icc 是错误的。当然，这完全有道理。

`errorformat`到目前为止，我得到的for icc 是：

```
let errorformat = '%W%f(%l): %tarning #%n: %m,%E%f(%l): %trror: %m' 
```

当我发现此格式未涵盖的错误或发现我需要不同的格式时，我将添加更多内容。

# javascript - moment.js 如何知道它的对象何时被序列化？

> ID：14991374
> 
> 赞同：15
> 
> 时间：2013-02-20T22:46:22.290
> 
> 标签：javascript, date, datetime, momentjs

## 从 moment.js 文档

> 时刻().toJSON(); 将对象序列化为 JSON 时，如果有 Moment 对象，则表示为 ISO8601 字符串。

```
JSON.stringify({
    postDate : moment()
}); // {"postDate":"2013-02-04T22:44:30.652Z"} 
```

我不明白 moment 对象如何检测在其上运行的函数。它如何在序列化时返回不同的值，以及简单地存储在对象中或作为字符串返回时？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T23:01:12.177

使用 stringify 时，对象可以定义它的表示方式，如本文档所示：

来自[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)

**toJSON 行为**

> 如果被字符串化的对象有一个名为 toJSON 的属性，其值为一个函数，则 toJSON 方法自定义 JSON 字符串化行为：而不是被序列化的对象，调用时 toJSON 方法返回的值将被序列化。

例如：

```
var x = {
  foo: 'foo',
  toJSON: function () {
    return 'bar';
  }
};
var json = JSON.stringify({x: x});
//json will be the string '{"x":"bar"}'. 
```

moment.js 的文档（见此处：[https](https://raw.github.com/timrwood/moment/2.0.0/moment.js) ://raw.github.com/timrwood/moment/2.0.0/moment.js ）表明这确实是受支持的，这里是确切的代码

```
toJSON : function () {
 return moment.utc(this).format('YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
} 
```

所以，这就是它在被字符串化时如何知道如何表示自己的方式。

# facebook - Facebook - 如何获得永久用户访问令牌

> ID：14991377
> 
> 赞同：4
> 
> 时间：2013-02-20T22:46:37.950
> 
> 标签：facebook, access-token

我的公司有一个公司 Facebook 帐户，他们在不同的相册中发布活动图片。我的要求是从 Facebook 相册中获取所有照片并在我们的公司网站上展示。我可以获取照片，但用户访问令牌的有效期仅为 60 天，这意味着每隔两个月我必须登录公司的公司 Facebook 帐户，重新生成令牌并在我的应用程序中更新令牌。

有没有办法生成永久访问令牌？或者有什么方法可以在我的应用程序级别重新生成令牌（不显示登录对话框）？

有没有其他方法可以在不创建应用程序的情况下获取照片？

我按照以下步骤操作：[https://www.facebook.com/dialog/oauth?client_id=%3CCLIENT_ID%3E&scope=manage_pages&redirect_uri=](https://www.facebook.com/dialog/oauth?client_id=%3CCLIENT_ID%3E&scope=manage_pages&redirect_uri=)我从这个 API 调用中获得了代码。然后我得到了如下令牌：[https://graph.facebook.com/oauth/access_token?client_id=](https://graph.facebook.com/oauth/access_token?client_id=) &redirect_uri=&client_secret=&code= 我使用访问令牌调试器验证了令牌。令牌有效期为 60 天。要获取页面令牌，我使用了 url：graph.facebook.com/me/accounts?access_token= 我获得了我的应用页面的令牌。我在工具中验证了这个令牌，它的有效期只有 60 天

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:03:53.260

我还想在不创建应用程序的情况下访问数据。我尝试了很多东西，但最后我不得不为应用程序创建它只是为了它。所以你必须创建一个应用程序。

此外，如果您看到开发者网站，它会说他们在 2012 年 12 月删除了“offline_access”权限。请参见此处：[https](https://developers.facebook.com/roadmap/offline-access-removal/) ://developers.facebook.com/roadmap/offline-access-removal/ 。所以，就在那时，他们带来了长期存在的访问令牌。他们还说，我引用，“如果你想刷新一个仍然有效的长期 access_token，你必须先获取一个新的短期用户 access_token，然后调用下面的同一个端点。”

因此，您必须再次获取短期访问令牌并使用短期令牌获取长期令牌。要获得长期访问令牌，您可以发送如下 HTTP 请求：

```
var short_access_token; //Get this
var xhr = new XMLHttpRequest();
var f_url = "https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=CLIENT_ID&client_secret=APP_CLIENT_SECRET&fb_exchange_token="+short_access_token;

xhr.open("GET", f_url , true);
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
        obj = xhr.responseText;
        long_token =  obj.split('=')[1].split('&')[0];
    }
}
xhr.send(); 
```

希望能帮助到你

# java - 在异常情况下记录过去的一些日志消息的所有级别，在正常情况下登录信息级别

> ID：14991382
> 
> 赞同：1
> 
> 时间：2013-02-20T22:47:01.413
> 
> 标签：java, logging, log4j

出于某些故障排除原因，如果发生异常，我想在 TRACE 级别记录所有过去的消息（例如最后 20 条消息），但如果代码运行良好，我想从 INFO 级别记录以清除我的日志文件不必要的日志消息。

例如：

```
public void m( String arg ){
    log.trace( "arg value: " + arg );
    log.info( "Hi Bob!" );
    try{
        //code
    }catch( Exception e ){
         log.error( "error msg", e );
    }
} 
```

我想登录类似：

```
*INFO* Hi Bob! 
```

但是，如果发生错误，我想进入日志，例如：

```
*TRACE* arg value: test
*INFO* Hi Bob!
*ERROR* error msg //and stacktrace 
```

换句话说，我希望有一个日志消息缓冲区，如果代码运行良好，它将从低级别消息中清除，并在出现错误时将其推送到日志文件中。java日志框架可以从盒子里做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:55:14.833

不幸的是，我怀疑你可以用 log4j 做这样的事情。我认为你可以做另外两件事：

1.  在错误消息中写下您需要的信息（并不总是实用）

    ```
    log.error( "error with arg value " + arg, e ); 
    ```

2.  配置 log4j，使其在控制台或日志文件中打印到级别 INFO，并在另一个文件中打印到级别 TRACE，称为“detailed.log”，只有在出现错误时才会查看。有关如何执行此操作的详细信息，[请参阅此问题](https://stackoverflow.com/questions/728295/creating-multiple-log-files-of-different-content-with-log4j)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:15:02.623

**更新** 说没有办法做到这一点是不正确的。看看 log4j `MappedDiagnosticContext`，[这](http://veerasundar.com/blog/2009/10/log4j-mdc-mapped-diagnostic-context-what-and-why/)似乎是一个很好的指导

* * *

没有办法做到这一点。

考虑当前的跟踪级别是`INFO`并且代码进行以下日志调用：

1.  痕迹
2.  信息
3.  错误

`#1`没有办法知道代码最终会在下游结束，`ERROR`所以唯一的解决方案是*缓冲*它。然后`#2`需要进行日志记录，因为当前级别是`INFO`.

当`#3`发生错误时，INFO 日志`#2`已经发生。没有办法回滚并在`#1`之前插入跟踪`#2`。

不登录`#2`并等待方法/函数执行完成通常是一个坏主意。它可能对您有用，但您最终可能会丢失日志行，这很糟糕。

您最好的选择是存储在内存中——比如在本地线程中——在出现错误时记录附加信息。所以输出将是：

```
10:15 INFO
10:20 ERROR
      10.10: TRACE 
```

日志记录的一大开销是构造那些要从对象写入的字符串。因此，您不需要缓冲实际的字符串，而是需要说一些`Callable`或一些类似的东西。这一切都变得非常混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:51:18.837

我猜这没有标准配置，我会查看一个自定义附加程序，用一种缓冲区覆盖您最喜欢的附加程序，并在出现错误时仅附加元素。

在我看来，与尝试记录过去的事情相比，记录详细的错误消息可能会更好。

# highslide - Highslide JS-无法将以前的设置加载到编辑器中

> ID：14991387
> 
> 赞同：0
> 
> 时间：2013-02-20T22:47:07.513
> 
> 标签：highslide

你好 Highslide 人。

我以前遇到过这个问题，Hilde 在这篇较早的帖子中帮助我解决了这个问题：[http ://www.highslide.com/forum/viewtopic.php?f=7&t=19754](http://www.highslide.com/forum/viewtopic.php?f=7&t=19754)

我正在尝试更新我网站上的 Highslide JS 画廊并添加 2 张新图片。（图库和编辑器在过去 30 天内未使用）。为此，我的方法是这样的：

*   从 highslide/editor-config.txt 文件将以前的画廊设置加载到编辑器中
*   上传我想添加到画廊的新图片，并使用编辑器为新图片生成我的 HTML（带标题）
*   从编辑器下载（不上传到 FTP）Highslide 文件夹，然后将大小合适的大图和缩略图添加到我根目录中现有的 Highslide>Images 文件夹中
*   手动将新图像的 HTML 添加到我的 Highslide JS（不确定那里的术语是否正确）

问题是我无法通过第一步。我在我的浏览器中收到一个错误，它无法处理请求，因为 URL 太长，或者它进入编辑器起始页面，当我单击“开始使用并且不再显示此内容”链接时，它没有不做任何事。

上次我遇到这个问题时，Hilde 表示编辑器有问题，她能够向我发送一个有效的链接。

感谢您帮助找出这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:17:20.277

不幸的是，我们的开发人员还不能解决这个问题。但是，您可以自己删除断开与编辑器的链接的部分。

打开 editor-config.txt 文件。找到链接的这两个部分：`+%22userdir`和 `jpg%22],`
删除`+%22userdir`之间的所有内容，以及：确保链接之间`jpg%22],`没有空格。现在您的链接应该已经准备好供[Editor](http://highslide.com/editor/)使用了。`,``+`

# python - 如何设置 Selenium Grid Python 测试用例以跨多台机器进行测试？

> ID：14991393
> 
> 赞同：6
> 
> 时间：2013-02-20T22:47:27.810
> 
> 标签：python, selenium

我已成功设置 SeleniumGrid 以在具有不同操作系统和浏览器的多台机器上运行我的 Python 测试。但是，我仍然需要编写相同的测试用例 3 次，每个节点一次，因为对节点的引用在测试用例内部。

我查看了有关 Python 的各种在线建议，例如。将节点 ips 分离到外部文件中并将其导入测试用例，但它们似乎都不起作用，或者说明适用于 Java。

有了来自 Mozilla 的这个，我不确定如何用我的测试用例设置这个文件/如何运行它：http: [//viewvc.svn.mozilla.org/vc/projects/sumo/tests/frontend/python_tests /suite_sumo.py?view=标记](http://viewvc.svn.mozilla.org/vc/projects/sumo/tests/frontend/python_tests/suite_sumo.py?view=markup)

如何设置我的 Python 测试用例，以便只编写一次？

**我的 Hub 命令提示符指令是：**

```
java -jar selenium-server-standalone-2.29.0.jar -host http://localmachineipaddress -port 4444 -role hub 
```

**我的节点命令提示符说明是：**

```
*FireFox PC, Chrome PC, Safari PC, and IE9 PC on local machine*
 java -jar selenium-server-standalone-2.29.0.jar -host localhost -role webdriver -hub http://theHubIP:4444/grid/register  -port 5555 -browser browserName=firefox,maxInstances=5,platform=WINDOWS -browser browserName=chrome,maxInstances=5,platform=WINDOWS  -Dwebdriver.chrome.driver=c:\SeleniumGrid\chromedriver.exe -browser browserName=iehta,maxInstances=5,platform=WINDOWS -Dwebdriver.ie.driver=c:\SeleniumGrid\IEDriverServer.exe -browser browserName=safari,maxInstances=5,platform=WINDOWS -Dwebdriver.safari.driver=c:\Python27\SafariDriver2.28.0.safariextz    

*FireFox MAC, Safari MAC, and Chrome MAC machine*
java -jar selenium-server-standalone-2.29.0.jar -role webdriver -hub http://theHubIP:4444/grid/register -debug -port 5556 -browser browserName=firefox,maxInstances=5,platform=MAC -browser browserName=chrome,maxInstances=5,platform=MAC -browser browserName=safari,maxInstances=5,platform=MAC -Dwebdriver.safari.driver=c:\Python27\SafariDriver2.28.0.safariextz 

*IE8 PC machine*
java -jar selenium-server-standalone-2.29.0.jar  -role webdriver -hub http://theHubIP:4444/grid/register -port 5559 -browser browserName=iehta,maxInstances=5,platform=WINDOWS -Dwebdriver.ie.driver=c:\SeleniumGrid\IEDriverServer.exe 
```

**我的测试用例命令提示符说明是：**

```
python Python27/Test_Cases/SeleniumTest.py 5555 firefox WINDOWS 
python Python27/Test_Cases/SeleniumTest.py 5555 chrome WINDOWS
python Python27/Test_Cases/SeleniumTest.py 5555 iehta WINDOWS
python Python27/Test_Cases/SeleniumTest.py 5555 safari WINDOWS
python Python27/Test_Cases/SeleniumTestIE8.py 5559 iehta WINDOWS
python Python27/Test_Cases/SeleniumTestApple.py 5556 chrome MAC
python Python27/Test_Cases/SeleniumTestApple.py 5556 firefox MAC
python Python27/Test_Cases/SeleniumTestApple.py 5556 safari MAC 
```

**我的测试用例是：**

```
# coding: utf-8
from selenium import webdriver
from selenium.common.exceptions import TimeoutException
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC 
from selenium.webdriver.common.keys import Keys
import HTMLTestRunner
import unittest, time
import sys

class SeleniumTest1(unittest.TestCase):
    def setUp(self):
    self.driver = webdriver.Remote(command_executor="http://theNodeIP:5555/wd/hub",desired_capabilities={ "browserName": browser, "platform": platform, "node":node })
   self.driver.implicitly_wait(2)

def mytest(self):
    self.driver.get("http://url.com")
    self.driver.find_element_by_css_xpath("test_some_stuff").click()

def tearDown(self):
    self.driver.quit()

def suite():
    s1 = unittest.TestLoader().loadTestsFromTestCase(SeleniumTest1)
    return unittest.TestSuite([s1])

def run(suite, report = "C:\\Python27\\Test_Cases\\Reports\\SeleniumTest1.html"):
with open(report, "w") as f:
    HTMLTestRunner.HTMLTestRunner(
                stream = f,
                title = 'SeleniumTest1',
                verbosity = 2,
                description = 'SeleniumTest1'
                ).run(suite)

if __name__ == "__main__":  
args = sys.argv

node=args[1]

browser = args[2]

platform = args[3]

run(suite()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-05T20:05:27.253

我能够使用该[`nose_parameterized`](https://github.com/wolever/nose-parameterized)模块一次测试两个浏览器。（您不需要使用鼻子测试运行器来使用该`nose_parameterized`模块。）

```
from django.test import LiveServerTestCase
from nose_parameterized import parameterized
from selenium import webdriver

class UITest(LiveServerTestCase):

    def setUp(self):
        self.selenium = {
            'chrome': webdriver.Chrome(),
            'firefox': webdriver.Firefox(),
        }

    def tearDown(self):
        for browser in self.selenium:
            self.selenium[browser].quit()

    testdata = [
        ('chrome',),
        ('firefox',),
    ]

    @parameterized.expand(testdata)
    def test_something(self, browser):
        driver = self.selenium[browser]
        # [...] 
```

如您的问题所问，要使用 Selenium Grid，只需更改 webdrivers 以适应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T20:03:43.417

您可以让 Python 脚本读取配置文件，而不是通过 shell 调用传递浏览器和平台的参数。本质上，您将拥有一个配置文件，其中列出了您希望在其上运行的浏览器以及平台列表。

诀窍是您需要有一个更高级别的套件文件，该文件将使用每个组合调用其他测试。因此，您将有一个套件文件轮询此配置文件以获取浏览器和平台组合，执行具有不同组合的套件。

如果 Python 支持多线程，您甚至可以并行化测试执行。

例如，在 Ruby 中，我将从 .yml 文件中读取我的配置，然后使用每个浏览器平台组合在多个线程中执行 rake 调用。

# opengl - QtQuick 2 中的简单文本项目在屏幕上可见之前会发生什么？

> ID：14991401
> 
> 赞同：4
> 
> 时间：2013-02-20T22:48:00.287
> 
> 标签：opengl, qt5, qt-quick, scenegraph

在尝试将 Qt5 移植到 N900 时，我遇到了与 QtQuick2/OpenGL 相关的错误。为了调查这一点，我想现在，会发生什么

```
Text { text:"Hello!" } 
```

直到它在屏幕上可见，换句话说，我想解释一下中间最重要的函数调用（你可以跳过一些字体细节、rtl 相关的东西或类似的东西）。它应该是这样的：

```
QQuickText::setText(QString("Hello!"))
//calls:
QQuickTextPrivate::updateLayout();
//provokes a call to:
QQuickText::updatePaintNode()
//calls:
QQuickTextNode::addTextLayout()
//calls:
SelectionEngine::addGlyphsForRanges()
...
//what happens to the scenegraph
...
//calls:
glBindTexture()
glDrawElements()
...swapBuffers() 
```

# php - 开发模板库

> ID：14991403
> 
> 赞同：0
> 
> 时间：2013-02-20T22:48:06.140
> 
> 标签：php, codeigniter

我正在尝试开发自己的模板库，因为我已经看过很多模板库，它们所做的超出了我的需要。我希望能够在我的模板库中使用资产和主题以及模块。

我找到的最好的一个是 Phil Sturgeon's，他用于 PyroCMS。我想开发一些接近于此的东西，但那里的东西比我需要的要多。

我的主要工作是找到一个可以处理主题、模块和资产使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:33:18.760

1.  将 Template.php 文件从您下载的包中复制到库文件夹。

2.  将 template.php 文件复制到 config 文件夹

3.  你有视图/模板下的模板吗

4.  编辑template.php（配置文件）如下

    ```
    //Default Template Configuration (adjust this or create your own)
    //Default template - This is the Main template

    $template['default']['template'] = 'template/template';
    $template['default']['regions'] = array('menu','content','title');

    $template['default']['parser'] = 'parser';
    $template['default']['parser_method'] = 'parse';
    $template['default']['parse_template'] = TRUE;

    //Login Template
    $template['login']['template'] = 'template/template_login';
    $template['login']['regions'] = array('content');

    $template['login']['parser'] = 'parser';
    $template['login']['parser_method'] = 'parse';
    $template['login']['parse_template'] = TRUE; 
    ```

这是基本配置，如果您想了解有关如何从视图发送数据的更多信息，请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:07:37.913

另一个想法是 CodeIgniter 模板。

在这里你有链接： [http ://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)

您可以下载、阅读文档并轻松创建自己的模板。

# apache - Apache SSI 命令在我的 HTML 中添加了空格

> ID：14991407
> 
> 赞同：0
> 
> 时间：2013-02-20T22:48:17.827
> 
> 标签：apache, cgi, ssi

这是当前状态：

```
HTML FILE:
<!--#set var="header-title" value="Help - Frequently Asked Questions - FAQ" -->
<!--#set var="header-description" value="Answers to common questions about ..." -->
<!--#include virtual="includes/header-basic.htm" -->

INCLUDE FILE:
<!--#if expr="" -->
  Variables:
    header-title
    header-description
<!--#endif -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" />
<head>
...

RENDERED HTML:

<!DOCTYPE... (output starts here after several blank lines) 
```

但我想从呈现的 HTML 中挤出空白。这可能吗？另外，我使用 hexdump 来确认我的文件中没有 UTF8 BOM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:08:00.973

感谢 (Ivan Shmakov) comp.infosystems.www.servers.unix。一种方法是：

```
<!--#set var="header-title" value="Help - Frequently Asked Questions - FAQ" 
--><!--#set var="header-description" value="Answers to common questions about ..." 
--><!--#include virtual="includes/header-basic.htm" --> 
```

此外，另一种选择（未记录的 Apache 行为？）是组合 set 指令：

```
<!--#set 
  var="header-title" value="Help - Frequently Asked Questions - FAQ"
  var="header-description" value="Answers to common questions about..."
--><!--#include virtual="includes/header-basic.htm" --> 
```

# json - Backbone.js .save() JSON 响应属性问题

> ID：14991412
> 
> 赞同：0
> 
> 时间：2013-02-20T22:48:47.417
> 
> 标签：json, backbone.js, attributes, response

所以我的问题是这样的。

使用主干将某些内容保存在 MYSQL 数据库中。

当我调用 this.model.save() 时，我遇到了一个非常奇怪的问题。

该模型会将 JSON 响应保存为对象，并且不会更新新值。

所以我在开发工具中的属性看起来像这样。

属性：对象

```
0: Object

ID: "4"

Name: "TEST"

Title: "MEOW"

Stuff: "1"

When: "2013-02-14 22:17:14" 
```

0 不应该在那里。我确实确认了 json 对象是有效的，所以我知道这不是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:56:00.813

看起来您的 JSON 响应实际上是一个具有单个元素的数组，而不是一个对象。

该属性`0`是在 Backbone 调用时创建的`model.set(response)`，它反过来将响应对象的所有键复制到属性哈希中。如果将数组传递给`set`，则会发生这种情况。

您应该修复您的服务器以使用原始对象 ( `{...}`) 而不是数组 ( `[{...}]`) 进行响应。如果您无法更改服务器行为，则可以覆盖[`Model.parse`](http://backbonejs.org/#Model-parse)以解开客户端上的响应：

```
var Model = Backbone.Model.extend({
  parse: function(response) {
    return _.isArray(response) ? response[0] : response;
  }
}); 
```

# visual-studio-2012 - 如何更改 Visual Studio 2012 错误列表中的突出显示颜色？

> ID：14991413
> 
> 赞同：7
> 
> 时间：2013-02-20T22:48:54.340
> 
> 标签：visual-studio-2012, themes

我正在使用 Visual Studio 2012 主题中的 Dark 主题。我已经安装了 VS 2012 颜色主题编辑器。我想要做的是更改选择错误时出现在错误列表中的背景颜色。

目前，该背景颜色是高度饱和的亮蓝色。错误文本为白色。亮蓝色上的白色很难阅读。我想调低那种蓝色。但我无法在颜色主题编辑器中找到会调整它的属性。我可以在编辑器中调整什么颜色属性来改变它？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-27T18:06:44.230

在使用 Visual Studio 2013 Dark Theme 查找和替换字符串时，我遇到了类似的问题。搜索会将所有找到的项目突出显示为浅蓝色。当我去选择突出显示的字符串的一部分时，它会以几乎相同的颜色突出显示所选部分，这使得很难判断字符串的哪个部分被突出显示以进行编辑。

我进入工具 -> 选项... -> 字体和颜色 -> 文本编辑器 -> 选定文本并将其更改为“黄色”，这对我来说效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T22:57:31.570

如果它类似于 Visual Studios 2010：

工具 -> 选项 -> 环境 -> 字体和颜色 -> 显示项目（错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T02:35:41.103

在主题编辑器中，选择“显示所有元素”。

然后编辑“环境-> 突出显示”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-13T12:40:41.567

您可以通过以下菜单列表实现此目的：

`Tools -> Options... -> Fonts and Colors -> Text Editor -> Find Match Highlight`

# php - PHP文件上传isset失败

> ID：14991415
> 
> 赞同：0
> 
> 时间：2013-02-20T22:49:09.120
> 
> 标签：php, forms, file-upload

似乎有很多人问这个问题并没有得到答案。检查表单的文件上传部分是否已填写是否存在问题？这是因为它是一个全局变量并且总是设置的吗？

我遇到的问题是检查文件输入 ytpe 是否已填写。

下面的代码显示了检查文件字段是否由用户填写的各种示例。

当它被填写时，他们都没有发现：

```
<?php
if (isset($_POST['add'])) 
{

//if (!isset($_POST['pic'])) { echo"pic not filled in";}else{echo"pic filled in";}

if (!isset($_POST['pic'])) { echo"pic not filled in";}
if (isset($_POST['pic']))  { echo"pic filled in";}//end of check to see if picture     has been filled in

//if (!isset($_POST['userfile[]'])) { echo"pic not filled in";}
//if (isset($_POST['userfile[]']))  { echo"pic filled in";}//end of check to see if   picture has been filled in

//$pictureName = $_REQUEST['pic'];
//if ($pictureName == ''){echo"pic is blank";}
//else{echo"pic is NOT blank";}

//if ($_POST['pic'] == ""){echo"pic is blank";}
//else {echo"pic is NOT blank";}
}

else 
{

 /////////render form
?>
<form enctype="multipart/form-data" action="" method="post" id="save"><fieldset>
<input type="text" name="fileName" id="fileName" value=""/>
<input type="file" name="userfile[]" id="pic" />
<input name="add" id="save_button" type="submit" value="Update"/>
</fieldset></form>
<?php

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:51:43.477

因为你使用'pic'而不是'userfile'。是使 post 键值的 html 名称，而不是 id。

除非你有一个多输入表单，否则它应该`userfile`不是 `userfile[]`

PS 我没有看到大量此类未回答的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:01:25.730

我终于找到了我一直在寻找的答案。非常感谢[您对](https://stackoverflow.com/users/147845/you)[这个问题](https://stackoverflow.com/questions/3901709/avoid-using-isset-in-php-when-accessing-post-get-and-other-variables/3901732#3901732)的回答对我有很大帮助：

我遇到的问题是，如果您检查表单中的字段是否为 isset，一旦按下提交按钮，它将始终被设置。

如果像我一样，您想检查是否确实在该字段中输入了某些内容，那么我会说您需要进行 if(!empty) 检查。

**如果将 enctype="multipart/form-data" 添加到表单中，这将对文件类型字段停止工作。**

请看下面我的例子，再次感谢[你](https://stackoverflow.com/users/147845/you)：

```
<h1>test</h1>
    <p>check to see if a field in a form as been filled in:</p>
    <?php
    if (isset($_POST['info'])) {
      // do some stuff
      echo"info isset. it will always be set when you click the submit button</br>"; 

      if(!empty($_POST['info'])){ echo"info has been filled in</br>";}else{ echo"info is still empty</br>";}

      if(!empty($_POST['filename'])){ echo"filename has been filled in</br>";}else{ echo"filename is still empty</br>";}

    }
    else
    {
    ?>
    <form method="post">
    <input type="text" name="info" /></br>
    <input type="file" name="filename" /></br>
    <input type="submit" />
    </form>
    <?php }?> 
```

# svn - 什么是“工作副本合并源需要显式修订”？

> ID：14991416
> 
> 赞同：4
> 
> 时间：2013-02-20T22:49:11.913
> 
> 标签：svn

我从我的存储库中检查了主干和分支（我们称之为 B1）。我想将主干中的一些修订合并到 B1 中，所以我这样做（pwd 是 B1）：

`svn merge 6057:6068 ../trunk ./`

然后SVN告诉我：

`svn: E195002: A working copy merge source needs an explicit revision`

错误信息是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T23:44:03.357

在我看来，你离开了`-r`旗帜。所以你的命令可能应该是：

```
svn merge -r 6057:6058 ../trunk ./ 
```

您也不需要同时签出主干和分支以进行合并。您可以使用存储库相对 URL 语法。假设主干位于您的存储库中的 /trunk 并且当前目录是分支 B1 的工作副本的根目录，则以下内容应该可以工作：

```
svn merge -r 6057:6058 ^/trunk 
```

`^/`替换为存储库根 URL。

如果您不是故意尝试挑选，您可能希望完全关闭修订，这会将所有更改从主干拉到您的分支。

最后，为自己省去一些麻烦并使用`-c`，`-r`然后你可以这样做：

```
svn merge -c 6058 ^/trunk 
```

您没有提及您使用的是什么版本，因此如果您不在 1.6 或 1.7 上，您的里程可能会因其中一些而有所不同。

# sitecore - 覆盖 Sitecore 的链接提供程序时 CPU 峰值

> ID：14991423
> 
> 赞同：1
> 
> 时间：2013-02-20T22:49:50.957
> 
> 标签：sitecore

覆盖 Sitecore 的链接提供程序后，我们的 CPU 会出现峰值。我们重写 GetItemUrl 以获取某些类型模板的别名 url，当访问网站的唯一内容是 keepalive 页面时，它会占用 CPU 的 80%。

这是默认链接提供程序的配置行，可以正常工作：

```
<add name="sitecore" type="Sitecore.Links.LinkProvider, Sitecore.Kernel" addAspxExtension="false" alwaysIncludeServerUrl="false" encodeNames="true" languageEmbedding="never" languageLocation="filePath" shortenUrls="true" useDisplayName="false" /> 
```

这是我们的自定义链接提供程序的配置行，它使 CPU 达到峰值：

```
<add name="sitecore"
type="Library.Pipelines.CustomLinkProvider, Library"
addAspxExtension="false"
alwaysIncludeServerUrl="false"
encodeNames="true"
languageEmbedding="never"
languageLocation="filePath"
shortenUrls="true"
useDisplayName="false" /> 
```

CustomLinkProvider 类：

```
public class CustomLinkProvider : LinkProvider
{
    public override string GetItemUrl(Item item, UrlOptions options)
    {
        // check if item is factsheet or story, if it is then get the alias url
        if (item.TemplateID == ItemConstants.Pages.Factsheet.TemplateID 
        || item.TemplateID == ItemConstants.Pages.Story.TemplateID)
        {
            if (Sitecore.Context.Database != null)
            {
                if (SitecoreHelpers.HasAlias(item, Sitecore.Context.Database))
                {
                    Item alias = SitecoreHelpers.GetAlias(item, Sitecore.Context.Database);
                    string friendlyUrl = alias.Name;
                    return friendlyUrl;
                }
            }
        }
        return base.GetItemUrl(item, options);
    }
} 
```

这是 GetAlias 函数：

```
public static Item GetAlias(Item currentItem, Database database)
{
    Item aliasFolder = database.GetItem(ItemConstants.Common.SystemAliasFolder);

    Item alias =
        aliasFolder.Children.FirstOrDefault(
        x => ((LinkField) x.Fields["Linked item"]).TargetID == currentItem.ID);

    return alias;
} 
```

任何人都知道为什么这会刺激 CPU？目前大约有 600 个别名，但我认为这不会导致如此大的峰值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:58:45.347

我猜这是导致您的问题的 HasAlias 和 GetAlias 的组合。迭代 600 个站点核心项目确实会导致 CPU 峰值，尤其是在可能对链接提供程序进行多次调用的情况下。诸如 ANTS 之类的分析器将允许您确认。

我建议您不要在每次调用时都这样做，而是读取所有别名并缓存将您的项目与其别名相关联的数据结构。添加、编辑或删除别名时，您需要清除缓存，但这应该会为您节省大量 CPU 周期。

# php - 哪里错了？php 字母矩阵

> ID：14991424
> 
> 赞同：0
> 
> 时间：2013-02-20T22:49:57.010
> 
> 标签：php, boggle

我在这里找到了这些 php 代码，但代码无法正常工作。似乎`if(isset($words[$word]))`没有通过，因为我总是得到一个空的结果数组

```
 $boggle = "fxie
           amlo
           ewbx
           astu";

$alphabet = str_split(str_replace(array("\n", " ", "\r"), "", strtolower($boggle)));
$rows = array_map('trim', explode("\n", $boggle));
$dictionary = file("C:/dict.txt");
$prefixes = array(''=>'');
$words = array();
$regex = '/[' . implode('', $alphabet) . ']{3,}$/S';
foreach($dictionary as $k=>$value) {
    $value = trim(strtolower($value));
    $length = strlen($value);
    if(preg_match($regex, $value)) {
        for($x = 0; $x < $length; $x++) {
            $letter = substr($value, 0, $x+1);
            if($letter == $value) {
                $words[$value] = 1;
            } else {
                $prefixes[$letter] = 1;
            }
        }
    }
}

$graph = array();
$chardict = array();
$positions = array();
$c = count($rows);
for($i = 0; $i < $c; $i++) {
    $l = strlen($rows[$i]);
    for($j = 0; $j < $l; $j++) {
        $chardict[$i.','.$j] = $rows[$i][$j];
        $children = array();
        $pos = array(-1,0,1);
        foreach($pos as $z) {
            $xCoord = $z + $i;
            if($xCoord < 0 || $xCoord >= count($rows)) {
                continue;
            }
            $len = strlen($rows[0]);
            foreach($pos as $w) {
                $yCoord = $j + $w;
                if(($yCoord < 0 || $yCoord >= $len) || ($z == 0 && $w == 0)) {
                    continue;
                }
                $children[] = array($xCoord, $yCoord);
            }
        }
        $graph['None'][] = array($i, $j);
        $graph[$i.','.$j] = $children;
    }
}

function to_word($chardict, $prefix) {
    $word = array();
    foreach($prefix as $v) {
        $word[] = $chardict[$v[0].','.$v[1]];
    }
    return implode("", $word);
}

function find_words($graph, $chardict, $position, $prefix, $prefixes, &$results, $words) {
    $word = to_word($chardict, $prefix);
    if(!isset($prefixes[$word])) return false;

    **if(isset($words[$word])) {
        $results[] = $word;
    }**

    foreach($graph[$position] as $child) {
        if(!in_array($child, $prefix)) {
            $newprefix = $prefix;
            $newprefix[] = $child;
            find_words($graph, $chardict, $child[0].','.$child[1], $newprefix, $prefixes, $results, $words);
        }
    }
}

$solution = array();
find_words($graph, $chardict, 'None', array(), $prefixes, $solution);
print_r($solution); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:19:41.010

最后调用 find_words() 时，您只传递了 6 个参数

```
find_words($graph, $chardict, 'None', array(), $prefixes, $solution); 
```

变量 $words 是 find_words() 定义中的第 7 个参数

```
function find_words($graph, $chardict, $position, $prefix, $prefixes, &$results, $words) { 
```

因此，$words 将始终为空，并且 isset($words[$word]) 将始终为 false

# php - 在列名查询中使用数组

> ID：14991425
> 
> 赞同：0
> 
> 时间：2013-02-20T22:49:58.523
> 
> 标签：php, mysql, loops

我想查询一个表的列名，放入一个数组，然后将该数据用于 html 的表中，就像这样

```
<?php
$ser='localhost';
$usr='root';
$pas='password';
$bsd='basedata';
$tab='contact';

try
{
    $dbh = new PDO('mysql:host='.$ser.';dbname='.$bsd.'', $usr, $pas);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $query = $dbh->prepare("SHOW FIELDS FROM $tab ");
    $query->execute();
    echo "<tr>";
    $i=0;

    while ($dat = $query->fetch()) {
        $nombre_columna[$i]=$dat[0];
        echo "<th>".$nombre_columna[$i]."</th>";
        $i++;
    }
    echo "</tr>\n";
    $dbh = new PDO('mysql:host='.$ser.';dbname='.$bsd.'', $usr, $pas);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $query = $dbh->prepare("SELECT * FROM $tab");
    $query->execute();
    $j=$i;
    $i=0;
    while ($dat = $query->fetch()) {
        echo "<tr>";
        while ($i<$j) {
            echo "<td>".$dat[$nombre_columna[$i]]."</td>";
            $i++;
        }
        echo "</tr>\n";
    }
    $dbh=null;
    ?> 
```

所以当我运行代码时，它只显示查询的第一行，但不再显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:09:33.320

我认为您误解了输出。它遍历表中的每一行，但你的问题是*循环*`while ($i<$j)`只会在第一次通过，因为你不断增加 的值`$i`，所以它永远不会小于`$j`第一次迭代之后。您需要`$i`在每次迭代时重置 的值，而不是在循环之前重置。

```
while ($dat = $query->fetch()) {
    $i=0; // <-- This will fix it
    echo "<tr>";
    while ($i<$j) {
        echo "<td>".$dat[$nombre_columna[$i]]."</td>";
        $i++;
    }
    echo "</tr>\n";
} 
```

如果你查看源代码，我猜你会看到一堆这样的：

```
<tr></tr>
<tr></tr>
<tr></tr>
<tr></tr> 
```

# c# - 生成非流利类的流利等价物的生产力工具？

> ID：14991429
> 
> 赞同：2
> 
> 时间：2013-02-20T22:50:17.773
> 
> 标签：c#, fluent

流畅接口的基本特征之一是，通常声明为的方法`void`将返回可用的东西，通常是它们所属的类的实例（即`this`）。StringBuilder 举例说明了这种约定，虽然它本身并不*完全流畅，但它确实为您提供了链式方法调用的便利：*

```
sb.Append("Foo")
  .Append("Bar")
  .AppendLine(); 
```

`System.Web.Mvc.TagBuilder`但是，不遵循此约定；方法都是`void`。

一种快速而肮脏的整理方法可能是将私有 TagBuilder( `_instance`) 封装在一个`FluentTagBuilder`类中，然后实现所有相同的方法，但将工作委托给实例并返回`this`而不是`void`.

实现这一目标的最好的不那么快速和肮脏的方法是什么？继承显然不行，因为方法只会因返回类型而异。如果可能的话，我宁愿保持简单并且不涉及模拟/替换框架。感谢您分享的任何智慧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:12:45.620

您可以创建一个扩展方法来传播构建器对象：

```
public static T Do<T>(this T obj, Action<T> action)
{
    action(obj);
    return obj;
}

TagBuilder builder;
builder.Do(b => b.SetInnerText("text"))
       .Do(b => b.AddCssClass("class"))
       .Do(b => b.GenerateId("id")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:27:43.360

我刚刚创建了一个小型 Git 存储库，并启动了一个工具来执行此操作。

它非常业余，编码很糟糕，并且有很多问题，是的，但是你它很简单，你可以适应它。

Fluentizer 抓取一个类，通过反射生成一个新的类，封装了原有的方法。

在此处检查[Fluentizer](https://github.com/eklam/Fluentizer)。

# ruby - Ruby 风格的正则表达式： A[[:digit:]]* 接受字符串开头的字符

> ID：14991433
> 
> 赞同：1
> 
> 时间：2013-02-20T22:50:23.237
> 
> 标签：ruby, regex

我有以下 Ruby 风格的正则表达式：

```
data.to_s.match(/\A[[:digit:]]*+((.|,)[[:digit:]]+)?\Z/) ? true : false 
```

对于以下示例，这将按预期返回 true：

```
data = "13"
data = "1,3"
data = "13,3"
data = "1.3"
data = ",3"
data = ".3" 
```

我不清楚的是为什么第一个 [[:digit:]] 之后的星号还允许在字符串的开头传递一个字符：

```
irb > "a3".match(/\A[[:digit:]]*+((.|,)[[:digit:]]+)?\Z/)
=> #<MatchData "a3" 1:"a3" 2:"a"> 
```

我怎样才能让它只匹配数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:59:25.790

`.`是一个匹配任何字符（换行符除外）的正则表达式元字符，您需要在交替中对其进行转义：

```
data.to_s.match(/\A[[:digit:]]*((\.|,)[[:digit:]]+)?\Z/) ? true : false
# this dot needs escaping         ^ 
```

此外，`+`第一个之后`*`是多余的（零个或多个数字的一​​个或多个重复）。ruby 也有一种更简短友好的说法`[[:digit:]]`：`\d`。由于这是一个完整的字符串匹配，你真的想`\n`在字符串末尾允许吗？如果没有，请使用`\z`over`\Z`

```
data.to_s.match(/\A\d*((\.|,)\d+)?\z/) ? true : false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:52:34.150

正`.`则表达式中的 匹配任何字符，需要转义为`\.`：

```
data.to_s.match(/\A[[:digit:]]*+((\.|,)[[:digit:]]+)?\Z/) ? true : false 
```

# java - Java 运行时异常

> ID：14991437
> 
> 赞同：0
> 
> 时间：2013-02-20T22:50:40.210
> 
> 标签：java, validation, methods

我无法理解 RuntimeException 的工作原理。我已经通过谷歌搜索。

我想使用的应用程序是一个收银机程序，它只模拟两个收银机工作。我将使用两个类：一个用于输入和输出，另一个用于我的所有方法等。

在我的作业描述中，它说要确保您的方法捕获任何违反的先决条件，并抛出带有信息性错误的 RuntimeException。

我不知道如何实现这一点 - 我不是在这里寻找语法，而只是如何设置这样的东西，因为我不完全了解 RuntimeException 的工作原理或方法的先决条件。我怎么能实现一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:54:10.777

先决条件是您的方法文档*必须*为真，然后方法才能正确执行。例如，您可以有一个前提条件，即参数必须是肯定的。（另一个例子是对象必须处于某种状态。）

`RuntimeException`是一个子类，`Exception`其特殊之处在于*未检查*`RuntimeException`类型（及其子类）的异常- 您无需声明将它们作为方法签名的一部分抛出。a 的一个例子是。*`RuntimeException`[`IllegalArgumentException`](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)*

 *因此，如果我们有一个仅在使用正数调用*时才有效的方法，您可能有：*

```
public void foo(int x) {
    if (x <= 0) {
        throw new IllegalArgumentException("x must be positive");
    }
    // Rest of the code here
} 
```

这可以保护该方法的其余部分免于尝试在它从未打算用于的情况下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:16:37.597

我认为您需要在实施之前阅读一些文章来提高您的专业知识水平，这是更进一步的步骤。首先你可以研究一下[Throwable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Throwable.html)类，它是 Java 中所有错误和异常的超类。你也可以检查[这个问题](https://stackoverflow.com/questions/2129647/exception-vs-throwable-in-java)。

然后需要访问[异常。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html)Oracle 教程详细介绍了[运行时处理](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.3)。或者您也可以查看[这篇文章](http://www.artima.com/designtechniques/exceptions.html)，该文章将标题说明为现实生活中的示例。

此外，关于错误和异常层次结构，此图更易于理解：

![可投掷的家庭](../Images/a789b43f32def65b1c512139b5b4dd41.png)*

# c++ - 两个旋转之间的关系

> ID：14991439
> 
> 赞同：1
> 
> 时间：2013-02-20T22:50:48.633
> 
> 标签：c++, c, opengl

我有两个对象，每个对象都有自己相对于同一个底座的旋转矩阵。但我想以一个对象为基础，并让其他对象以此为基础旋转。

我在opengl中做了什么：

两个旋转矩阵R1和R2；

我所做的是（不是实际的代码，而是相同的数学）

```
glPushMatrix();
glMultMatrix(R1^-1);
glMultMatrix(R2);
glPopMatrix(); 
```

但是输出结果是偏航和俯仰切换并反转

有谁知道问题是什么？

# java - 无法使用 Hector 插入具有复合键的行

> ID：14991443
> 
> 赞同：0
> 
> 时间：2013-02-20T22:51:00.700
> 
> 标签：java, cassandra, hector

我有一个本地 Cassandra 服务器（1.1.10）和一个使用 cql3 创建的列族：

```
CREATE TABLE test_columnfamily (
    key1 text,
    key2 text,
    column1 text,
    PRIMARY KEY (key1, key2)); 
```

我正在尝试使用 Hector Java 客户端（版本 1.1-2）插入一行

```
public class Test {

    private static final CompositeSerializer compSerializer = new CompositeSerializer();
    private static final StringSerializer strSerializer = new StringSerializer();

    public static void main(String[] args) {
        CassandraHostConfigurator conf = new CassandraHostConfigurator("localhost:9160");

        conf.setCassandraThriftSocketTimeout(10000);
        conf.setRetryDownedHostsDelayInSeconds(30);
        conf.setRetryDownedHostsQueueSize(128);
        conf.setMaxWaitTimeWhenExhausted(60000);
        conf.setRetryDownedHosts(true);
        conf.setLoadBalancingPolicy(new LeastActiveBalancingPolicy());
        conf.setAutoDiscoverHosts(true);
        conf.setHostTimeoutCounter(20);

        Cluster cluster = HFactory.getOrCreateCluster("test", conf);
        Keyspace ks = HFactory.createKeyspace("test_keyspace", cluster);
        Mutator<Composite> compMutator = HFactory.createMutator(ks, compSerializer);

        ColumnFamilyDefinition cfDef = HectorUtils.getColumnFamily(cluster, "test_keyspace", "test_columnfamily");
        System.out.println("Found column family: " + cfDef.getName());

        Composite key = new Composite();
        key.addComponent("key1", strSerializer);
        key.addComponent("key2", strSerializer);
        compMutator.addInsertion(key, "test_columnfamily", HFactory.createColumn(
            "column1", "col1 value", HFactory.createClock(), strSerializer, strSerializer));
        compMutator.execute();
    }
} 
```

我得到了这个例外：

```
Exception in thread "main" me.prettyprint.hector.api.exceptions.HInvalidRequestException: InvalidRequestException(why:Not enough bytes to read value of component 0)
    at me.prettyprint.cassandra.service.ExceptionsTranslatorImpl.translate(ExceptionsTranslatorImpl.java:45)
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:264)
    at me.prettyprint.cassandra.model.ExecutingKeyspace.doExecuteOperation(ExecutingKeyspace.java:113)
    at me.prettyprint.cassandra.model.MutatorImpl.execute(MutatorImpl.java:243)
    at com.bninc.job.Test.main(Test.java:46)
Caused by: InvalidRequestException(why:Not enough bytes to read value of component 0)
    at org.apache.cassandra.thrift.Cassandra$batch_mutate_result.read(Cassandra.java:20350)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:926)
    at org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:912)
    at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:246)
    at me.prettyprint.cassandra.model.MutatorImpl$3.execute(MutatorImpl.java:243)
    at me.prettyprint.cassandra.service.Operation.executeAndSetResult(Operation.java:104)
    at me.prettyprint.cassandra.connection.HConnectionManager.operateWithFailover(HConnectionManager.java:258)
    ... 3 more 
```

您能否告诉我如何使我的代码工作（使用复合键将行插入列族）？我确实在这里和那里看到过类似的问题，但找不到确切的答案。提前致谢！

* * *

编辑：

在 CREATE TABLE 语句的末尾添加 WITH COMPACT STORAGE 后，异常消失了。但表中的行是：

```
 key1                             | key2    | column1
----------------------------------+---------+------------
 \x00\x04key1\x00\x00\x04key2\x00 | column1 | col1 value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:06:41.710

您需要使用不同的行键和列名。对于这个例子，你的行键应该是 key1，你的列名应该由两个值 key2 和 "column1" 组成（注意 "column1" 是一个文字字符串常量）。

这完全是因为使用 CQL3 进行的映射。第一个主键用作行（或分区）键，其余主键值用作复合列名称的一部分，该列名称还包含所存储的非键字段的名称（不是值）。

进一步看这个例子，这意味着如果你存储三行恰好具有相同的 key1 值，你最终将只存储一个 Cassandra 行。该行将有三列，一列用于三行中每一行中非关键字段“column1”的每个值。

# php - 计算一个字段的多个条目的总计

> ID：14991450
> 
> 赞同：0
> 
> 时间：2013-02-20T22:51:22.550
> 
> 标签：php, sql

我有一个看起来像这样的数据库：

```
Employee_id  dev_hours Pm_hours
1                2         2
1                3         3
2                3         3
3                2         1 
3                1         1 
```

我将如何使用 php 来查找每个员工的总工作时间？例如，员工 1 总共工作了 10 个小时，而员工 3 总共工作了 5 个小时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:54:59.480

您需要使用[`SUM()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)和[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)。尝试：

```
SELECT Employee_id, SUM(dev_hours + Pm_hours) as total_hours FROM tbl GROUP BY Employee_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:59:15.987

此处取自 w3 学校 PHP 指南的细微变化：

[http://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp)

```
<?php
$con = mysql_connect("server","user","password");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("my_db", $con);

$result = mysql_query("SELECT Employee_id, SUM(dev_hours + Pm_hours) as Hours FROM EmployeeTable GROUP BY Employee_id");

while($row = mysql_fetch_array($result))
{
  echo $row['Employee_id'] . " " . $row['Hours'];
  echo "<br />";
}

mysql_close($con);
?> 
```

# windows-7 - 在 Windows 7 64 位上将 16 位 DLL 加载到 32 位进程中

> ID：14991459
> 
> 赞同：2
> 
> 时间：2013-02-20T22:52:07.367
> 
> 标签：windows-7, windows-7-x64, 32-bit, 16-bit

我编写了一个 32 位应用程序，它启动一个 16 位可执行文件，它加载一些 16 位 DLL 来执行应用程序的某些功能。它在 Windows 7 32 位上运行良好，但不能在 Windows 7 64 位上运行，因为该版本的操作系统不包含 NTVDM。

代码的 16 位部分非常广泛，移植到 32 位会非常昂贵。此外，它使用了一些来自不再经营的公司的第 3 方 16 位 API；因此，必须完全重新创建该代码，从而增加成本。

**有没有办法直接从 32 位应用程序加载现有的 16 位 DLL，完全删除 16 位可执行文件？**

我已经研究过 thunking，但它似乎也不支持 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:27:37.370

不，这在 Windows 中是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T19:50:20.183

您必须使用模拟器或虚拟机。

或者，如果这不是一个选项，那么您*可以*自己编写一个原始模拟器，逐条读取机器代码并相应地修改假寄存器和内存，当程序向外调用时，您将不得不生成响应。

# javascript - d3.js：按时间顺序查看

> ID：14991460
> 
> 赞同：0
> 
> 时间：2013-02-20T22:52:09.897
> 
> 标签：javascript, d3.js

我如何在 x 轴上渲染条形图，相对于时间。

例如：

我的网站上的浏览量：10、20、30、60 期间：1 月、2 月、6 月、12 月

x 轴应显示前 2 列彼此靠近，然后到 6 月有一个相对差距，然后到 12 月又有一个更大的差距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:02:28.810

只要每个数据项可以以相同的比例表示，您就可以执行以下操作。例如，如果您的第一个值是小时，而下一组是月，则您可以将所有内容都与小时相关。

给定：1 个月 = 744 小时

使用 x 值：10、20、30、60、744、1488、4464、8928

# linux - linux中的虚拟内存

> ID：14991463
> 
> 赞同：0
> 
> 时间：2013-02-20T22:52:29.167
> 
> 标签：linux, memory, virtual

我正在调试一个问题，即同一个程序在不同的 Linux 机器（所有 2.6 内核）上的行为不同。基本上在某些 linux 机器上，16MB 的 mmap() 总是成功，但在其他 linux 机器上，相同的 mmap() 会因“ENOMEM”而失败。

我检查了 /proc//maps，发现不同 linux 机器上的虚拟内存映射完全不同。一件事是：堆的地址范围：

```
linux box1: the mmap() would return address of 31162000-31164000
linux box2: the mmap() would return address of a9a67000-a9a69000 
```

我的问题是：对于一个特定的进程，linux虚拟内存是如何安排的？什么决定了实际的地址范围？为什么即使我仍然可以看到一些大型未使用的虚拟地址范围， mmap() 也会失败？

更新：这是一个地址空间示例，其中 16MB 的 mmap() 将失败：

```
10024000-10f6b000 rwxp 10024000 00:00 0 [heap]
30000000-3000c000 rw-p 30000000 00:00 0 
3000c000-3000d000 r--s 00000000 00:0c 5461 /dev/shm/mymap1
3000d000-3000e000 rw-s 00001000 00:0c 5461 /dev/shm/mymap2
3000e000-30014000 r--s 00000000 00:0c 5463 /dev/shm/mymap3
30014000-300e0000 r--s 00000000 00:0c 5465 /dev/shm/mymap4
300e0000-310e0000 r--s 00000000 00:0b 2554 /dev/mymap5
310e0000-31162000 rw-p 310e0000 00:00 0 
31162000-31164000 rw-s 00000000 00:0c 3554306 /dev/shm/mymap6
31164000-312e4000 rw-s 00000000 00:0c 3554307 /dev/shm/mymap7
312e4000-32019000 rw-s 00000000 00:0c 3554309 /dev/shm/mymap8
7f837000-7f84c000 rw-p 7ffeb000 00:00 0 [stack] 
```

在上面的例子中：最后一个 mymap8 和 [stack] 之间还有很大的空间。但是进一步的 16MB 的 mmap() 会失败。我的问题是：Linux 如何决定 mmap() 基数和允许的范围？

谢谢。

# asp.net-mvc-3 - 实体框架、Ninject 依赖注入和 ASP.NET MVC 3，使用现有的 .MDF 文件作为数据库

> ID：14991464
> 
> 赞同：0
> 
> 时间：2013-02-20T22:52:32.127
> 
> 标签：asp.net-mvc-3, dependency-injection, ninject

我在这里写了一篇又长又详细的帖子，但我真诚地相信最好提前提供尽可能多的信息。如果需要进一步澄清，请询问。衷心感谢您阅读我的查询。

我正在使用 Adam Freeman 和 Steven Sanderson 所著的*Pro ASP.NET MVC3 Framework*一书（Apress，第三​​版），并从第 VII 章开始研究 Sports Store 示例。请注意，该项目需要通过使用 Ninject 来使用 DI，这是我想花时间进行本演练的主要原因。本教程中另一个令人印象深刻的贡献是，它向您展示了如何将 MVC 3 解决方案开发到单独的项目中，就像它在现实世界的实现中可能完成的那样——我发现几乎每一个项目都缺乏这一点。我看过的另一本书。（顺便说一句，我认为 Apress 的书籍几乎是最好的，一般来说。）

好的，所以我已经完成了第 7 章和第 8 章，这意味着我已经成功地创建和填充了一个数据库并检索了它的内容以显示在我的列表视图中。我还通过 .css 文件获得了格式。然而，这里有一个问题：当第一次经历这个时，我**创建了**IDE 本身的数据库，这没问题，因为只有一个小表（产品）需要担心。一切正常。但后来，出于我将很快说明的原因，我决定重新开始。这一次，我想完成相同的演练，但我将通过附加到现有的 .MDF 文件来访问数据，而不是在我对项目进行编码时从头开始创建新的数据库。所有这些都是为我在实际项目中使用类似模式铺平道路，我已经为此构建了一个复杂的数据库，其中充满了表、FK 关系、视图、函数和数据。我几乎不需要说我想在我的“真实”项目中使用我现有的数据库，因为从头开始重新创建所有这些几乎是不可能的。

好的，现在让我们回到 Sports Store 示例。尽我所能，我无法将数据从数据库获取到我的 UI 视图。在编译时或运行时没有错误消息，但在列表视图中看不到数据，我只看到一个空白页。请注意，在这种情况下，没有列标题或窗格是正确的，因为这里没有任何脚手架。

据我所知，我拥有我需要的所有零件。让我们从 Ninject 控制器工厂开始：

```
 NinjectControllerFactory : DefaultControllerFactory
    {
        private IKernel ninjectKernel;
        public NinjectControllerFactory()
        {
            ninjectKernel = new StandardKernel();
            AddBindings();
        }
        protected override 
        IController GetControllerInstance
        (RequestContext requestContext,   Type controllerType)
        {
             return controllerType == null ? null 
                   : (IController)ninjectKernel.Get(controllerType);
        }
        private void AddBindings()
        {
            //Had the mockup here before, which worked fine.
            ninjectKernel.Bind<IProductRepository>().To<SportsStore2.Domain.Concrete.EFProductRepository>();
        }   ...

    } 
```

IProductRepository 如下：

```
 namespace SportsStore2.Domain.Abstract
    {
        public interface IProductRepository
        {
            IQueryable<Product> Products { get; }
        }
    } 
```

EFProductRepository 是这样实现的：

```
 namespace SportsStore2.Domain.Concrete
    {
        public class EFProductRepository:IProductRepository
        {

            private EFDbContext context = new EFDbContext();

            public IQueryable<Product> Products
            {
                get { return context.Products; }
            }

        }
    } 
```

为什么是的，当然定义了 EFDbContext；即声明：

```
 namespace SportsStore2.Domain.Concrete
   {
        class EFDbContext : DbContext
        {
             public DbSet<Product> Products { get; set; }
        }
   } 
```

以及 Web.config 文件中的连接字符串；这应该将上下文对象定义与 .MDF 文件中的实际数据库连接起来，至少据我了解。

```
 <connectionStrings>
        <add name="EFDbContext" 
            connectionString="Data Source=Owner-PC\SQLEXPRESS;Initial Catalog = SportsStore20130205; Integrated security=SSPI"
            providerName="System.Data.SqlClient" />
    </connectionStrings> 
```

最后，几乎可以肯定的是，我将 Product 控制器定义如下。我说“最少”是因为我几乎可以肯定问题不在这里。在调试模式下，我可以看出 productRepository 对象没有被填充。我可以在其中看到一些应该运行的 SQL 代码，或者此时已经运行。但是对 repository.Products 的调用什么也不返回。

命名空间 SportsStore2.WebUI.Controllers { 公共类 ProductController ：控制器 { 私有 IProductRepository 存储库；

```
 public ProductController(IProductRepository productRepository)
    {
        repository = productRepository;
    }

    public ViewResult List()
    {
        return View(repository.Products);
    }

    public ViewResult Count() 
    {
        int counter = repository.Products.Count();
        return View(repository.Products.Count());
    }
} 
```

}

```
 namespace SportsStore2.WebUI.Controllers
    {
         public class ProductController : Controller
         {
             private IProductRepository repository;

             public ProductController(IProductRepository productRepository)
             {
                 repository = productRepository;
             } 

             public ViewResult List()
             {
                 return View(repository.Products);
             }

        }
    } 
```

# jquery - Flexslider jQuery 插件，延迟显示标题

> ID：14991466
> 
> 赞同：0
> 
> 时间：2013-02-20T22:52:33.743
> 
> 标签：jquery

我正在使用 Flexslider ( [http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/) ) 插件进行幻灯片放映，并且希望字幕在出现之前延迟。

我已经用初始化代码做到了这一点，

```
 $(window).load(function() {
              $('.flexslider').flexslider({slideshow:false});

            });

$('.slide1caption').css("display","none");
$('.slide1caption').slideUp(300).delay(800).fadeIn(400); 
```

每次有新幻灯片进来时，我只需要重置标题部分。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:01:31.340

您可能想要更接近他们在高级使用示例中的代码：

```
$(window).load(function() {
    $('.flexslider').flexslider({
      animation: "slide",
      controlsContainer: ".flex-container",
      after: function(slider) {
         // animate your caption ... 
         // find the item that is the current slide's .slidecaption and animate it
         $('.current-slide').find('.slidecaption').slideUp(300).delay(800).fadeIn(400);
      }
    });
}); 
```

请记住，您需要在每张幻灯片中设置足够长的延迟，以便在下一张幻灯片开始之前完成字幕动画！

# hibernate - 让 JPA 标准查询与继承的列表一起使用

> ID：14991474
> 
> 赞同：0
> 
> 时间：2013-02-20T22:53:06.570
> 
> 标签：hibernate, jpa, jpa-2.0, criteria-api

说我有一个实体

```
@Entity
public class Test {
   @ManyToMany
   @JoinTable(..etc..)
   private List<Subject> subjects; // School subjects this test is associated with
   .... 
```

和一个实体

```
@Entity
public class Exam extends Test {
   // Inherits subjects from test
   // Does some things specific to exams
   ... 
```

而且我想编写一个标准查询（带有元模型），它只给我`Exam`与某个关联的 s `Subject`。我的问题是：我该如何编写这个查询？

我尝试过的是以下内容：

如果我写

```
 CriteriaBuilder cb = em.getCriteriaBuilder();  // em is the EntityManager
    CriteriaQuery<Exam> cq = cb.createQuery(Exam.class);
    Root<Exam> root = cq.from(Exam.class);

    cq.where(cb.isMember(subject, root.get(Exam_.subjects)));

    return em.createQuery(cq); 
```

编译器不会编译它，说`error: no suitable method found for get(ListAttribute<Test,Subject>)`. 直觉上感觉这应该是解决方案，但继承还远远不够。如果我在查询中省略元模型引用并将其替换为`root.get("subjects")`.

如果我写

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Exam> cq = cb.createQuery(Exam.class);
Root<Test> root = cq.from(Test.class);

cq.where(cb.isMember(subject, root.get(Exam_.subjects)));

return em.createQuery(cq); 
```

这感觉不对，但它确实可以编译。但是，在实际执行代码时，我遇到了一个异常：`IllegalStateException: No explicit selection and an implicit one could not be determined`我将其解释为在`Root`. 尝试`root.get(Test_.subjects)`会产生相同的结果。

我使用 Hibernate 作为我的 JPA 实现，但我尝试坚持使用 JPA Criteria Queries。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:03:59.873

在 JPQL 中（我真的建议您在不需要动态生成的查询时使用它），您可以这样编写：

```
select e from Exam e
inner join e.students student
where student.id = :studentId 
```

如果您真的想使用 Criteria API 来编写此查询，请执行相同的操作：创建一个连接并检查连接实体的 ID 是否等于给定的学生 ID。它应该如下所示：

```
Join<Exam, Student> studentJoin = root.join(Exam_.students);
cq.where(qb.equal(studentJoin.get(Student_.id), student.getId()); 
```

# android - Android : 使用相机的手势识别

> ID：14991475
> 
> 赞同：2
> 
> 时间：2013-02-20T22:53:05.193
> 
> 标签：android

我希望 android 手机摄像头能够识别手势，并且如果摄像头识别出它应该执行指定操作的手势，还可以为单个手势分配操作。谢谢请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:28:19.727

尝试探索 OpenCV 库，它可能会对您有所帮助。访问 opencv.org

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T04:43:49.523

Android 库 HandWave 具有您正在寻找的功能。你有没有仔细研究过？

# r - 在 R 中查找非零值和这些值的频率

> ID：14991476
> 
> 赞同：3
> 
> 时间：2013-02-20T22:53:12.287
> 
> 标签：r

我有一个数据，它有两个参数，它们是数据/时间和流量。流量数据为间歇流量。假设有时流量为零，突然流量开始，一段时间内会有非零值，然后流量将再次为零。我想了解非零值何时出现以及每个非零流持续多长时间。我已在此位置附加示例数据集[https://www.dropbox.com/s/ef1411dq4gyg0cm/sampledataflow.csv](https://www.dropbox.com/s/ef1411dq4gyg0cm/sampledataflow.csv)

数据为 1 分钟数据。

我能够将数据导入 R，如下所示：

```
 flow <- read.csv("sampledataflow.csv")
summary(flow)
names(flow) <- c("Date","discharge")
flow$Date <- strptime(flow$Date, format="%m/%d/%Y %H:%M")
sapply(flow,class)
plot(flow$Date, flow$discharge,type="l") 
```

我绘制了图表来查看分布，但不知道从哪里开始获取每个非零值的频率。我想看到如下输出表：

```
Date    Duration in Minutes 
```

如果我在这里不清楚，请告诉我。谢谢。

**附加信息：**

我认为我们需要先检查非零值，然后在它再次达到零值之前连续找到多少个非零值。我想了解的是流量释放持续时间。例如。一天之内可能会有多个版本，我想指出版本是从什么时间开始的，以及它在达到零值之前持续了多长时间。我希望这能更好地解释这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:27:56.400

第一点是你的数据太多了`NA`。如果你想调查一下。如果我理解正确，您需要连续 0 的计数，然后是每个日期的连续非零、零、非零等。

这当然可以实现`rle`，正如@mnel 在评论下提到的那样。但是有不少陷阱。

首先，我将使用非 NA 条目设置数据：

```
flow <- read.csv("~/Downloads/sampledataflow.csv")
names(flow) <- c("Date","discharge")
flow <- flow[1:33119, ] # remove NA entries

# format Date to POSIXct to play nice with data.table
flow$Date <- as.POSIXct(flow$Date, format="%m/%d/%Y %H:%M") 
```

接下来，我将创建一个`Date`列：

```
flow$g1 <- as.Date(flow$Date) 
```

最后，我更喜欢使用`data.table`. 所以这里有一个使用它的解决方案。

```
# load package, get data as data.table and set key
require(data.table)
flow.dt <- data.table(flow)
# set key to both "Date" and "g1" (even though, just we'll use just g1)
# to make sure that the order of rows are not changed (during sort)
setkey(flow.dt, "Date", "g1") 
# group by g1 and set data to TRUE/FALSE by equating to 0 and get rle lengths
out <- flow.dt[, list(duration = rle(discharge == 0)$lengths, 
        val = rle(discharge == 0)$values + 1), by=g1][val == 2, val := 0]

> out # just to show a few first and last entries

#              g1 duration val
#   1: 2010-05-31      120   0
#   2: 2010-06-01      722   0
#   3: 2010-06-01      138   1
#   4: 2010-06-01       32   0
#   5: 2010-06-01       79   1
#  ---                        
#  98: 2010-06-22      291   1
#  99: 2010-06-22      423   0
# 100: 2010-06-23      664   0
# 101: 2010-06-23      278   1
# 102: 2010-06-23      379   0 
```

因此，例如，对于`2010-06-01`，有 722`0's`后跟 138 `non-zeros`，然后是 32`0's`后跟 79`non-zeros`等等......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:17:51.217

我看了前两天的一个小样本

```
> do.call( cbind,  tapply(flow$discharge, as.Date(flow$Date), function(x) table(x > 0) ) )
      2010-06-01 2010-06-02
FALSE       1223        911
TRUE         217        529    # these are the cumulative daily durations of positive flow. 
```

您可能希望在这种情况下转置 t() 函数应该成功。或者你可以使用 rbind。

如果您只需要流量正分分钟数，这也可以：

```
 tapply(flow$discharge, as.Date(flow$Date), function(x) sum(x > 0, na.rm=TRUE)  ) 
#--------
2010-06-01 2010-06-02 2010-06-03 2010-06-04 2010-06-05 2010-06-06 2010-06-07 2010-06-08 
       217        529        417        463          0          0        263        220 
2010-06-09 2010-06-10 2010-06-11 2010-06-12 2010-06-13 2010-06-14 2010-06-15 2010-06-16 
       244        219        287        234         31        245        311        324 
2010-06-17 2010-06-18 2010-06-19 2010-06-20 2010-06-21 2010-06-22 2010-06-23 2010-06-24 
       299        305        124        129        295        296        278          0 
```

要获得放电值大于零的间隔长度：

```
tapply(flow$discharge, as.Date(flow$Date), function(x) rle(x>0)$lengths[rle(x>0)$values]  )
#--------
$`2010-06-01`
[1] 138  79

$`2010-06-02`
[1]  95 195 239

$`2010-06-03`
[1]  57 360

$`2010-06-04`
[1]   6 457

$`2010-06-05`
integer(0)

$`2010-06-06`
integer(0)

... Snipped output 
```

如果您想查看这些持续时间的分布，您需要取消列出该结果。（请记住，在午夜分割的持续时间可能会影响计数和持续时间。）如果您只想要没有日期的持续时间，请使用以下命令：

```
flowrle <- rle(flow$discharge>0)
flowrle$lengths[!is.na(flowrle$values) & flowrle$values]
#----------
 [1] 138  79  95 195 296 360   6 457 263  17 203  79  80  85  30 189  17 270 127 107  31   1
[23]   2   1 241 311 229  13  82 299 305   3 121 129 295   3   2 291 278 
```

# php - CakePHP 的 Twig

> ID：14991482
> 
> 赞同：1
> 
> 时间：2013-02-20T22:53:28.247
> 
> 标签：php, cakephp, twig

我正在尝试将 Twig 与 CakePHP 一起使用，所以我安装了这个插件：
[https ://github.com/predominant/TwigView](https://github.com/predominant/TwigView)

在 CakePHP 的演示中，我们建立了一个博客，我可以在 tpl 文件中使用它：

```
{% for post in posts %}
<tr>
    <td>{{post.Post.id}}</td>
    <td>{{post.Post.title}}</td>
    <td>Edit | Delete</td>
    <td>{{post.Post.created|date("F j, Y")}}</td>
</tr>
{% endfor %} 
```

我无法开始工作，正在转换它：

```
<?php
echo $this->Html->link(
    'Add Post', array('controller' => 'posts', 'action'     => 'add')
);
?> 
```

我已经尝试了所有这些，但它们都不起作用：

```
{{ html.link("Add Post", {"controller" : "posts", "action" : "add"}) }}
{{ _view.html.link("Add Post", {"controller" : "posts", "action" : "add"}) }}
{{ this.html.link("Add Post", {"controller" : "posts", "action" : "add"}) }} 
```

我没有收到任何错误，它只是被什么都替换了。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T08:54:53.977

您必须在控制器中显式声明助手以使其工作：

```
public $helpers = array('Html', 'Form'); 
```

请参阅 GitHub 问题[#14](https://github.com/predominant/TwigView/issues/14)和[#13](https://github.com/predominant/TwigView/issues/13)我是从哪里得到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T16:10:36.257

超链接 html 帮助器的正确语法是：

```
{{ html.link('Add Post', '/posts/add') }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T06:48:41.800

它是否逃避输出？如果是这样，要获取完整的 HTML，请使用 RAW

```
{{ html.link("Add Post", {"controller" : "posts", "action" : "add"})|raw }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T02:26:09.987

也许它只是不会将数组作为参数，或者不理解控制器或动作是什么。尝试：

```
{{ html.link("Add Post", "/posts/add" }} 
```

# php - mod_rewrite 重定向到 CSS 文件

> ID：14991483
> 
> 赞同：0
> 
> 时间：2013-02-20T22:53:39.430
> 
> 标签：php, .htaccess, mod-rewrite

我有一个用于清理 URL 的 mod_rewrite 规则：

```
RewriteRule ^tshirts*$ /thsirt.php 
```

这个想法是访问`myurl.com/tshirt`或`myurl.com/tshirts`应该重定向到`myurl.com/tshirt.php`.

访问`myurl.com/tshirt`正确显示`tshirt.php`，直到我添加了一个外部样式表链接`tshirt.php`- 现在它实际上重定向到 CSS 文件，所以我留下了 CSS 文件的原始源 ( `tshirt.css`)。

更令人困惑的是，如果我导航到`myurl.com/tshirts`，它会抛出 404。

来源`tshirt.php`：

```
<html>
<head>
    <title>Page title</title>
    <link rel="stylesheet" type="text/css" href="/tshirt.css" />
</head>
<body>
    <h1>Hello, world.</h1>
</body>
</html> 
```

来源`tshirt.css`：

```
body{
    background-color: #4F5557;
} 
```

知道可能导致此问题的原因或如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:13:10.587

最好的解决方案是覆盖你所有的基础，基本上确保你只重写你需要的，而不是不应该的。

首先，默认情况下，您应该注意不要重写任何引用特定文件或目录的内容，使用：

```
# Do Not apply if a specific file or folder exists
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

添加以下 Next 还允许您指定某些目录以忽略规则，这些目录可能用于其他目的，例如调用脚本或要外部链接的资源。

```
# Do Not apply if refering to a resource in one of these folders
RewriteCond %{REQUEST_URI} "/admin/" [OR]
RewriteCond %{REQUEST_URI} "/scripts/" [OR]
RewriteCond %{REQUEST_URI} "/external/"
RewriteRule (.*) $1 [L] 
```

最后，你可以有你的规则

```
RewriteRule ^tshirts*$ /tshirt.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:59:01.523

通常，您不希望重写任何现有文件或目录的 url，因此在您的规则之前添加 2 个条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^tshirts*$ /thsirt.php 
```

不同类型资源的清晰文件夹结构也有助于保持项目的可管理性。

# c# - 对象模型，正确或最直观的方式

> ID：14991484
> 
> 赞同：1
> 
> 时间：2013-02-20T22:53:40.753
> 
> 标签：c#, object, inheritance

我正在尝试找出设置此模型的最佳方法。我几乎以一种方式做到了，但我正在考虑另一种方式。这是一次学习经历，所以浪费时间并不重要。

```
namespace FirstWay
 {

public class CrateOfBags
{
    public string crateId { get; set; }
    public string originCountry { get; set; }
    public List<BagOfApples> bagList { get; set; }
}

public class BagOfApples
{
    public double weight { get; set; }
    public string bagId { get; set; }
    public List<apple> appleList { get; set; }
}

public class apple
{
    public string appleId { get; set; }
    public string color { get; set; }
    public Boolean rotten { get; set; }
}
} 
```

//或这个

```
 namespace SecondWay
   {
public class CrateOfBags
{
    public string crateId { get; set; }
    public string originCountry { get; set; } 
}

public class BagOfApples : CrateOfBags
{
    public string bagId { get; set; }
    public double weight { get; set; }
}

public class apple : BagOfApples
{
    public string appleId {get;set;}
    public string color { get; set; }
} 
```

}

可能的问题

苹果问题：交付了多少烂苹果？烂苹果来自哪些袋子和/或哪些板条箱？第一种方式：可以遍历每个板条箱，然后是袋子，然后是苹果和计数。第二种方式：可以循环遍历苹果并将父属性添加到 HashSet（一种防止重复的方法）

板条箱问题。查找每个国家/地区的板条箱数量？第一种方式：循环遍历箱子并保留一个计数列表、数组等。第二种方式：必须遍历所有苹果并且只关心板条箱。

我遇到的一个问题是我对苹果作为它自己的实体知之甚少。我只知道它来自哪个板条箱，方法是从板条箱启动 foreach 循环

但是，如果我想问一个问题，例如“特定批次中有多少青苹果（按 id）？” 我也有问题，具体取决于方式。

说苹果是袋子的孩子，就像狗是动物的孩子一样，对我来说似乎很尴尬。然而，我喜欢能够自由移动操纵苹果的想法，例如通过更改父属性 bagid 来切换它们所在的包。我并不是在寻找特定问题的解决方案，而只是其中一个更好（更灵活，更有效，更直观）然后另一个，或者如果我完全错过了某些东西，例如使用另一种技术。非常感谢。

PS 这不是真正的模型，而是一个相当不错的表示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T22:56:42.943

从数据建模的角度来看，第二种方法显然是错误的：苹果*不是*BagOfApples。继承应该创造可替代性：你能*总是*把苹果放在需要 BagOfApples 的地方吗？我不这么认为。这是 Liskov 替换原则（它被违反了）。

在数据库方面，第二个模型是非规范化的。它可以通过将所有 3 个表连接在一起从第一个模型创建，从而创建冗余数据。这是一种反模式，因为当您更改某些内容时，您必须在多个地方进行更改（如果您忘记这是无声的数据损坏）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T23:00:42.103

> 说苹果是袋子的孩子对我来说似乎很尴尬

上帝，因为那是错误的。苹果*不是*袋子，因此不应继承它。

你的第一个模型看起来不错。我会考虑的唯一建议是泛化`Bag`，以便可以重复使用：

```
public class CrateOfBags<T>
{
    public string crateId { get; set; }
    public string originCountry { get; set; }
    public List<Bag<T> bagList { get; set; }
}

public class Bag<T>
{
    public double weight { get; set; }
    public string bagId { get; set; }
    public List<T> ItemList { get; set; }
}

public class apple
{
    public string appleId { get; set; }
    public string color { get; set; }
    public Boolean rotten { get; set; }
} 
```

> 我对苹果作为它自己的实体知之甚少。我只能通过从 crate 启动 foreach 循环来知道它来自哪个 crate。

这是通过使用反向引用来解决的，这意味着一个苹果有一个对它的包的引用，它有一个对它的创建的引用。然而，这并不总是有意义的，特别是如果有多种容器类型可以包含一个`Apple`或者如果 Apple 不应该知道它的包。

# highcharts - Highcharts：删除绘图边框和实际图表之间的空间

> ID：14991486
> 
> 赞同：12
> 
> 时间：2013-02-20T22:54:12.167
> 
> 标签：highcharts

我们正在从基于 Flash 的图表库 (FusionCharts) 迁移到基于 JavaScript 的图表库 (HighCharts)。

这就是我们当前的闪存图表的样子 ![目前的快闪图](../Images/dd8683ad57f92eb12f4c67d173e53f0f.png)

这就是我迄今为止对 HighCharts 的了解。 ![在此处输入图像描述](../Images/054e6458ca30b465d230da148571fef1.png)

如何删除绘图边框和实际图表数据之间的空格（标有大哑红色箭头）？

这是我的代码：http: [//jsfiddle.net/ChrisMBarr/7JAcN/1/](http://jsfiddle.net/ChrisMBarr/7JAcN/1/)

```
var chart = new Highcharts.Chart({
        chart:{
            renderTo: 'container',
            type: 'areaspline',
            plotBorderWidth: 1,
            spacingTop:2,
            spacingRight:5,
            spacingBottom:5,
            spacingLeft:2,
            borderWidth:1,
            borderRadius:0,
            borderColor:'#999'
        },
        credits: {
            enabled: false
        },
        title: {
            text: 'Total spam in the last 7 days'
        },
        legend: {
            verticalAlign: 'bottom',
            borderWidth: 1,
            backgroundColor: '#FFFFFF'
        },
        xAxis: {
            allowDecimals:false,
            categories: [
                'Thu 2/14',
                'Fri 2/15',
                'Sat 2/16',
                'Sun 2/17',
                'Mon 2/18',
                'Tue 2/19',
                'Wed 2/20'
            ],
            labels: {
                staggerLines: 2
            },
            tickmarkPlacement: 'on',
        },
        yAxis: {
            allowDecimals:false,
            alternateGridColor: '#F7F7F7',
            title: {
                text: 'Number of Emails',
                margin:5
            }
        },
        tooltip: {
            formatter: function() {
                var isSpam = this.series.name === _chartOptions.series[1].name
                return ''+this.x +': <strong>'+ this.y +(isSpam ? " Spam" : "") +' Emails</strong>';
            }
        },

        plotOptions: {
            areaspline: {
                fillOpacity: 0.5
            }
        },

        series:  [{
                "name": "Total Mail",
                "color":"#339999",
                "data": [2,3,4,7,8,8,8]
            },{
                "name": "Spam",
                "color":"#003399",
                "data": [2,2,4,4,4,6,8]
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T23:09:07.493

这可能会有所帮助：

```
xAxis: {
    min: 0.5, max: 5.5
... 
```

其中 max = 数据点数减 1.5

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T11:20:38.747

您应该使用 minPadding/maxPadding 参数，但它不适用于类别。所以我建议删除categoreis，使用最小值和tickInterval

[http://jsfiddle.net/7JAcN/3/](http://jsfiddle.net/7JAcN/3/) [http://api.highcharts.com/highcharts#xAxis.minPadding](http://api.highcharts.com/highcharts#xAxis.minPadding)

```
xAxis: {
        allowDecimals:false,
        minPadding:0,
        maxPadding:0,
        /*categories: [
            'Thu 2/14',
            'Fri 2/15',
            'Sat 2/16',
            'Sun 2/17',
            'Mon 2/18',
            'Tue 2/19',
            'Wed 2/20'
        ],*/
        labels: {
            staggerLines: 2
        },
        tickmarkPlacement: 'on',
    }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-22T11:39:55.140

删除填充的最佳方法是添加**pointPlacement: 'on'**

```
plotOptions: {
    areaspline: {           
        pointPlacement: 'on'
    }       
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:24:46.003

将选项“tickmarkplacement”设置为“on”，xAxis“ **startontick** ”选项可能会帮助您：

```
xAxis: {
    startOnTick: false,
    tickmarkplacement:"on",
    ... 
```

看到 [这个 jsfiddle，来自 Highcharts API 文档](http://jsfiddle.net/martyk/T45rQ/)

# iphone - 创建包含许多产品的数据库

> ID：14991488
> 
> 赞同：0
> 
> 时间：2013-02-20T22:54:14.150
> 
> 标签：iphone, ios, objective-c, parse-platform, inventory

我正在使用[Parse为 iPhone 创建一个库存应用程序](http://www.parse.com)让公司跟踪他们所有的工具、用品和库存。现在，我想允许用户/公司在将新项目添加到他们的数据库时，让他们可以选择从预制的项目数据库中搜索，例如在添加简单的 Dewalt Drill Battery 时从建筑公司搜索到他们的库存将在预制数据库中搜索“Dewalt #DC9096 18V XRP 2.4A 电池”，或者办公室将按品牌/序列号/名称搜索铅笔。我正在寻找一种简单的方法来制作包含多个品牌产品的数据库甚至表格，包括它们的价格、产品规格、订购更多的网站、公司网站、保修电话号码等......我已经考虑解析所有零售网站获取信息，但不知道其背后的合法性，如果网站发生变化，那么我 d 需要更新代码。如果有任何（更简单/更好）的方法可以做到这一点，那么帮助或指导会很棒！

一直感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:11:35.447

我不会尝试解析网站，除非您拥有大量资源，否则这将是一个巨大的痛苦并且无法维护（并且正如您所提到的那样，它可能违反了大多数网站的服务条款）。您最好的选择是通过 API 连接到现有的产品数据库，例如 Google 的购物搜索 API，或者亚马逊的 API。如果您想使用 Google，可以从这里开始：

[https://developers.google.com/shopping-search/](https://developers.google.com/shopping-search/)

希望这能让你朝着正确的方向前进。

**编辑：**这里列出了更多可能是不错选择的购物 API：

[http://www.programmableweb.com/apis/directory/1?apicat=购物](http://www.programmableweb.com/apis/directory/1?apicat=Shopping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:34:21.547

如果您确实发现自己需要解析许多不同的供应商网站（我们称之为“屏幕抓取”）并且您有这样做的合法权利，那么您应该使用像[SelectorGadget](http://www.selectorgadget.com)这样的工具来获取您的 XPath，它更快、更容易并且比手工操作更不容易出错。

但是，如果您的网站不止几个，您可能会发现您必须经常更新抓取规则，这绝对不是一劳永逸的操作。

# c - 使用 qsort 对字符串数组进行排序

> ID：14991489
> 
> 赞同：0
> 
> 时间：2013-02-20T22:54:30.837
> 
> 标签：c

所以有一个任务要求我从文件中读取输入并对输入进行排序。因此，如果我有一个文件包含：

```
banana
apple
orange 
```

我已经成功地将这些字符串插入到数组中。数组包含如下：

```
{'b','a','n','a','n','a','\n','a','p','p','l','e','\n','o','r','a','n','g','e'} 
```

现在让我感到困惑的部分是，我必须使用 qsort 对这些字符串进行排序。我创建了一个比较两个 char 数组的方法，它可以工作。但是，它成功地比较了两个不同的字符串。但是，如何使用 qsort 对数组进行排序？

# c++ - C ++错误：'struct ...的前向声明？

> ID：14991497
> 
> 赞同：4
> 
> 时间：2013-02-20T22:55:16.123
> 
> 标签：c++, compiler-errors, include, cyclic-reference

**周期性包容问题**

我转发在另一个类的标题中声明其中一个类，以尝试解决它们的循环包含问题。这是我的两个文件：

第一个文件（*Parameter.h*）：

```
#pragma once
#include "Token.h"`

class Expression;

class Parameter {
public:

    Parameter() {
        string = new Token();
        identifier = new Token();
        expr = new Expression();
    }

    Token* string;
    Token* identifier;
    Expression* expr;
}; 
```

第二个文件（*Expression.h*）：

```
#pragma once
#include "Token.h"
#include "Parameter.h"

class Expression {
public:
    Expression() {
        param1 = new Parameter();
        param2 = new Parameter();
        op = new Token();
    }

    Expression(Parameter* p1, Token* o, Parameter* p2) {
        param1 = p1;
        param2 = p2;
        op = o;
    }

    Parameter* param1;
    Parameter* param2;
    Token* op;
}; 
```

如您所见，我在 Parameter.h 中转发声明 Expression，但仍然收到以下两个错误：

> “结构表达式”的前向声明
> 
> 不完整类型“结构表达式”的无效使用

我看了几个以前发布的问题，但仍然无法解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T22:57:13.030

您不能转发声明`Expression`，因为您需要完整的声明：

```
Parameter() {
    string = new Token();
    identifier = new Token();
    expr = new Expression();  // here!
} 
```

您可以做的是将`Parameter()`构造函数的实现移出标题并放入`.cpp`文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T22:57:21.563

您需要将 Parameter 构造函数放在 cpp 文件中，当您`expr = new Expression();`在构造函数中调用时，需要知道 Expression 具体类型。

参数.h

```
#pragma once
#include "Token.h"

class Expression;

class Parameter {
public:

    Parameter();

    Token* token;
    Token* identifier;
    Expression* expr;
}; 
```

参数.cpp

```
#include "Parameter.h"

Parameter::Parameter()
: token(new Token()),
  identifier(new Token()),
  expr(new Expression())
{
} 
```

旁注：可以使用智能指针而不是原始指针作为类成员吗？变量名`string`也可能影响`std::string`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T22:58:12.437

在单独的 cpp 文件中定义构造函数的主体。类的前向声明允许您使用指针或引用，而不是前向声明类的构造函数，就像您在“其他”类的构造函数中使用的那样。在 ccp 文件中：

```
#include "Parameter.h"
#include "Expression.h"   //   ??

Parameter::Parameter():   string (new Token()),
                          identifier(new Token()),
                          expr ( new Expression())
{}

Expression::Expression() param1 (new Parameter()),
                         param2 (new Parameter()),
                         op ( new Token())
{    } 
```

（现在如果 new/constructors 抛出你是安全的）

# android - 在 android 上恢复到 google maps API v1 的问题

> ID：14991499
> 
> 赞同：0
> 
> 时间：2013-02-20T22:55:21.813
> 
> 标签：android, api, maps

我有一个基于 google maps api v1 构建的应用程序。我去升级到 v2，所以删除了我的 api 密钥并创建了一个新密钥。

我确信这是调试键，但我的应用程序上仍然出现灰色方块。

是否仍然支持原始 api，如果可以，是否可以获得一个可以使用它的 api 密钥，或者新密钥是否仅适用于 v2 api？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:08:29.557

> 原来的api还支持吗

是的。

> 是否有可能获得一个可以使用它的 api 密钥

再过几个星期，是的。请访问[Maps V1 文档以获取获取 Maps V1 API 密钥的说明和表单](https://developers.google.com/maps/documentation/android/v1/mapkey)。此优惠将于 2013 年 3 月 3 日到期。

> 还是新密钥仅适用于 v2 api？

它们是完全独立的键。Maps V1 密钥不适用于 Maps V2，反之亦然。

# linq - LINQ 不适用于 IEnumerable

> ID：14991500
> 
> 赞同：2
> 
> 时间：2013-02-20T22:55:29.207
> 
> 标签：linq, ienumerable, intellisense, autofac

我正在使用 Autofac（我已经在控制台应用程序中注册了基本 nuget 包）并想查看注册列表。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Autofac;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            // First, create your application-level defaults using a standard
            // ContainerBuilder, just as you are used to.
            var builder = new ContainerBuilder();
            var appContainer = builder.Build();

            appContainer.ComponentRegistry.Registrations.Where(x => true);
        }
    }
} 
```

问题是线路

```
appContainer.ComponentRegistry.Registrations.Where(x => true); 
```

这里的智能感知没有给我 Where linq 方法，但是它确实编译了，据我所知，没有任何警告，消息中的错误。

我进一步尝试了这个

```
 IEnumerable<string> list = new List<string>();

    list.Where(x => true); 
```

智能感知工作正常，并为我提供了所有标准列表方法。

我从头开始在几个不同的应用程序中尝试过这个，我得到了相同的行为。

关于发生了什么的任何想法？

编辑：

以下工作并在智能感知中正确显示

```
IEnumerable<IComponentRegistration> test = new List<IComponentRegistration>();
            test.Where(x => true); 
```

我在用着

`<package id="Autofac" version="3.0.1" targetFramework="net45" />`从nuget。

并将鼠标悬停在 ComponentRegistrations 上给出 ![在此处输入图像描述](../Images/ec3a0b8957a40b1db15916eeb373fb1d.png)

在这种情况下，范围定义为

```
 ILifetimeScope _scope; 
```

但是，如果我直接尝试，我会得到同样的结果

```
 var builder = new ContainerBuilder();
 var appContainer = builder.Build();
 appContainer.ComponentRegistry.Registrations.Where(x => true); 
```

IComponentRegistry 也被定义为（在 Autofac 中）

```
public interface IComponentRegistry : IDisposable
{
    ...
    IEnumerable<IComponentRegistration> Registrations { get; }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:06:02.043

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Autofac;

namespace ConsoleApplication2
{
  class Program
   {
    static void Main(string[] args)
    {
        // First, create your application-level defaults using a standard
        // ContainerBuilder, just as you are used to.
        var builder = new ContainerBuilder();
        var appContainer = builder.Build();

        var registrations = appContainer.ComponentRegistry.Registrations.Where(x => x.Target.Equals("test"));
    }
 }
} 
```

尝试将 linq 表达式分配给一个变量，看看它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:21:29.160

评论复制到答案。

如果我对您的理解正确并且您的问题是智能感知无法正常工作

```
appContainer.ComponentRegistry.Registrations.Where(x => true); 
```

您可能应该尝试禁用您的插件，看看是否可以解决它，因为它对我来说工作正常。既然你说你有其他人确认，也许从你的安装有共同的任何插件开始。

# java - Android/Eclipse 中的选项卡问题

> ID：14991504
> 
> 赞同：2
> 
> 时间：2013-02-20T22:55:46.373
> 
> 标签：java, android, eclipse, android-layout, tabs

我是 android 开发/eclipse 的新手，遇到了问题。我有 3 个工作应用程序，我自己编写了这些应用程序。其中之一是一个应用程序，它只显示 2 个选项卡，单击这些选项卡并不会真正执行任何操作。我需要做的是将我的三个程序集成在一起，这样当您单击选项卡时，它们会启动其他 2 个应用程序。我现在最大的问题是布局。我将它们全部放在一起并且编译时没有错误，但是当我运行它时，所有内容都显示为选项卡并且一团糟。我的问题是，我怎样才能使它只有在单击选项卡时才显示正确的内容。我的 xml 文件混杂着三种不同的 LinearLayout。我太新了，不知道从哪里开始。任何帮助将不胜感激！

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:42:57.867

一次在屏幕上显示的内容称为 Activity。看起来你想要 3 个活动，但你只有一个主要活动。您应该在 Main Activity 上显示 2 个选项卡，然后在按下选项卡时使用 Intent 在活动之间进行切换。如需参考，您可以参考 android 开发者网站： http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html) 希望对您有所帮助！

# r - 关于持续时间与期间如何在 lubridate 中添加月份的混淆

> ID：14991505
> 
> 赞同：4
> 
> 时间：2013-02-20T22:55:57.263
> 
> 标签：r, date, lubridate

这是我认为可能的错误：

```
require(lubridate)
d = as.Date("1994-03-31")
> d + months(1)
  [1] "1994-05-01" 
```

我的理解是这应该返回 1994 年第 4 个月的月底。请告知这是否确实是一个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T23:02:12.493

这不是一个错误，它是一个记录在案的功能。~~这绝对不是`lubridate` as中的错误，`months`并且`as.Date`都是`base`包函数。~~. （编辑。`months.numeric`并且`months.integer`都是`lubridate`包中不可见的功能。

不过，`luibridate`确实有答案！

它完全按照帮助文件中指定的方式进行操作`%m+%`（这是`lubridate`软件包的一部分。）

> 添加月份会使基本算术受挫，因为连续的月份有不同的长度。与其他元素一起，有助于算术执行自动翻转。例如，12:00:00 + 61 秒变为 12:01:01。但是，人们通常更喜欢这种行为不会在几个月内发生。例如，我们有时想要 1 月 31 日 + 1 个月 = 2 月 28 日而不是 3 月 3 日。months(n) 总是返回 Date 之后第 n 个月的日期。如果新日期通常会溢出到第 n + 1 个月，月份。日期前 n 个月的日期。

该功能`%m+%`旨在确保您想要的功能，确保月份不滚动

```
d %m+% months(1)

## [1] "1994-04-30" 
```

请注意，此功能是在[1.2.0 版本](http://cran.r-project.org/web/packages/lubridate/NEWS)中引入的，因此在[http://www.jstatsoft.org/v40/i03/paper](http://www.jstatsoft.org/v40/i03/paper)中没有记录，因为这是在实现之前编写的

另请注意，您还可以使用 `duration(1, 'months')`

```
 d + duration(1, 'months')
 ## [1] "1994-04-30" 
```

# phpexcel - 无法在 PHPExcel 中将单元格格式化为月-日-年？

> ID：14991509
> 
> 赞同：0
> 
> 时间：2013-02-20T22:56:03.153
> 
> 标签：phpexcel

我正在尝试使用 setFormatCode 方法在使用 PHPExcel 创建的 Excel 文档中格式化单元格。我一直在浏览与此方法相关的“FORMAT_DATE_xxxxxxx”选项列表，但我找不到按该顺序列出月份、日期和年份的选项。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:49:52.067

您错过了 FORMAT_DATE_XLSX14 和 FORMAT_DATE_XLSX22

您还错过了这样一个事实，即这些只是预定义的字符串值，并且您可以使用您自己设置的任何有效的 Excel 数字格式字符串值。

```
$objPHPExcel->getActiveSheet()->getStyle('C9')
    ->getNumberFormat()
    ->setFormatCode(
        'mm-dd-yyyy'  // my own personal preferred format that isn't predefined
    ); 
```

# javascript - 向每个函数中的元素添加数据

> ID：14991510
> 
> 赞同：5
> 
> 时间：2013-02-20T22:56:03.927
> 
> 标签：javascript, jquery, html

我创建了一个每个函数来计算 div 内的图像，我试图将 div 内的图像数量设置为 div 的数据属性，但它不起作用。

我是否因为它似乎不起作用而以错误的方式解决了这个问题？

这是网站[http://www.touchmarketing.co.nz/test/](http://www.touchmarketing.co.nz/test/)

```
 var mostImages = 0;

    numSliders = $wowSlides.length,
    lastVindex = numSliders-1;

    $wowSlides.each(function(){

        var $this = $(this),
        $images = $this.find('img'),
        numImages = $images.length;

        $images.css({width:$slideWidth, 'float':'left', 'position':'relative'}).wrapAll('<div class="slider" />');
        $slider = $this.find(".slider");
        $slider.width($slideWidth*numImages).css({'float':'left'});                     

        $this.data('count', numImages); // add data-count="insert number here" to this .wowSlides div

        console.log(numImages); 

        if(numImages > mostImages){

            mostImages = numImages;

        }                   

    }); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T22:59:09.047

这会将数据设置为 jQuery 的专有数据缓存：

```
$this.data('count', numImages); 
```

它没有设置为`data-`元素的属性。通常不需要`data-`在客户端上设置属性，因为它的目的是将数据从服务器传输到客户端。

不过，如果要设置它，请使用

```
$this.attr('data-count', numImages) 
```

或者

```
this.setAttribute('data-count', numImages) 
```

* * *

就个人而言，如果我想将少量数据与元素相关联，我只需将其作为属性直接存储在元素本身上即可。

```
this.count = numImages; 
```

对于原始数据，它是无害的。对于较大的对象或其他 DOM 元素，我会更犹豫。

# joomla - 如何强制链接在 Joomla 中打开新的浏览器会话

> ID：14991512
> 
> 赞同：1
> 
> 时间：2013-02-20T22:56:09.533
> 
> 标签：joomla, browser

Joomla 允许我打开一个新的浏览器窗口和一个新选项卡，但我想强制一个链接打开一个全新的浏览器会话。这将允许某人打开同一程序的两个不同会话而不会发生冲突。我看到我可以用 javascript 做到这一点，但如果有人知道如何在 Joomla CMS 中轻松做到这一点，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:26:53.300

不在 Joomla 中，它是自我的，但您可以轻松构建扩展，或者可能已经有一个扩展？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:13:13.943

我认为没有核心黑客是不可能的，因为 Joomla 身份验证是基于会话的，您需要更改它以获取或自定义命名的 cookie 或会话变量

# java - 在 Java 中解析巨大的 XML

> ID：14991516
> 
> 赞同：0
> 
> 时间：2013-02-20T22:56:33.373
> 
> 标签：java, xml, parsing, xml-parsing

我有一个需要使用 Java 解析的 20 GB XML 文件。有谁知道如何解析这么大的文件？常规文件 IO 操作不起作用并引发错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:59:41.387

一般来说，20GB 是非常不寻常的。唯一可能的解决方案是使用一些[SAX](http://docs.oracle.com/javase/tutorial/jaxp/sax/parsing.html)解析器，如果您无法预处理文件并将其拆分为一些较小的块。只要您可以编写文件，它就不会导致任何 IO 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:00:28.797

您可能无法一次将整个文件解析为 DOM 树或类似文件，但 SAX 或 StAX 等流式处理方法应该可以正常工作。

# c# - 如何获取串行端口设备 ID？

> ID：14991517
> 
> 赞同：3
> 
> 时间：2013-02-20T22:56:36.397
> 
> 标签：c#, serial-port

在这个程序中，我首先尝试连接到可用端口。找到并连接后，我想读取连接的 USB 设备 ID 和供应商 ID，我该怎么做？

亲切的问候

```
Program()
    {

        // Get a list of serial port names. 
        string[] ports = SerialPort.GetPortNames();

        // Search for the right port. 
        foreach (string port in ports)
        {
            _serialPort = new SerialPort(port, 250000, Parity.None, 8, StopBits.One);
            _serialPort.Handshake = Handshake.None;
            _serialPort.ReadTimeout = 300;
            _serialPort.WriteTimeout = 300;

            try
            {
                _serialPort.Open();
                break;
            }
            catch (Exception e)
            {
                Console.WriteLine("Serial port " + port + ": " + e.Message);
            }
        }
        /* ENTER CODE TO GET ID HERE */

        Console.WriteLine("Using: " + _serialPort.PortName);
        Console.WriteLine("Device ID: " + _serialPort.DeviceID); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-07T02:36:10.210

几天前，我终于自己解决了这个问题。有两个部分，一个检查注册表，另一个检查设备的 vid/pid。

我使用的注册表方法只是为了确保我不会捕获像 com0com 这样的空调制解调器模拟器。

```
 /// <summary>
    /// Removes any comm ports that are not explicitly defined as allowed in ALLOWED_TYPES
    /// </summary>
    /// <param name="allPorts">reference to List that will be checked</param>
    /// <returns></returns>
    private static void nullModemCheck(ref List<string> allPorts)
    {
        // Open registry to get the COM Ports available with the system
        RegistryKey regKey = Registry.LocalMachine;

        // Defined as: private const string REG_COM_STRING ="HARDWARE\DEVICEMAP\SERIALCOMM";
        regKey = regKey.OpenSubKey(REG_COM_STRING);

        Dictionary<string, string> tempDict = new Dictionary<string, string>();
        foreach (string p in allPorts)
            tempDict.Add(p, p);

        // This holds any matches we may find
        string match = "";
        foreach (string subKey in regKey.GetValueNames())
        {
            // Name must contain either VCP or Seial to be valid. Process any entries NOT matching
            // Compare to subKey (name of RegKey entry)
            if (!(subKey.Contains("Serial") || subKey.Contains("VCP")))
            {
                // Okay, this might be an illegal port.
                // Peek in the dictionary, do we have this key? Compare to regKey.GetValue(subKey)
                if(tempDict.TryGetValue(regKey.GetValue(subKey).ToString(), out match))         
                {
                    // Kill it!
                    allPorts.Remove(match);

                    // Reset our output string
                    match = "";
                }

            }

        }

        regKey.Close();
    } 
```

vid/pid 部分来自[techinpro](http://t6953.techinpro.us/q/508141744f1eba38a4429885 "这里")

```
 /// <summary>
    /// Compile an array of COM port names associated with given VID and PID
    /// </summary>
    /// <param name="VID">string representing the vendor id of the USB/Serial convertor</param>
    /// <param name="PID">string representing the product id of the USB/Serial convertor</param>
    /// <returns></returns>
    private static List<string> getPortByVPid(String VID, String PID)
    {
        String pattern = String.Format("^VID_{0}.PID_{1}", VID, PID);
        Regex _rx = new Regex(pattern, RegexOptions.IgnoreCase);
        List<string> comports = new List<string>();
        RegistryKey rk1 = Registry.LocalMachine;
        RegistryKey rk2 = rk1.OpenSubKey("SYSTEM\\CurrentControlSet\\Enum");
        foreach (String s3 in rk2.GetSubKeyNames())
        {
            RegistryKey rk3 = rk2.OpenSubKey(s3);
            foreach (String s in rk3.GetSubKeyNames())
            {
                if (_rx.Match(s).Success)
                {
                    RegistryKey rk4 = rk3.OpenSubKey(s);
                    foreach (String s2 in rk4.GetSubKeyNames())
                    {
                        RegistryKey rk5 = rk4.OpenSubKey(s2);
                        RegistryKey rk6 = rk5.OpenSubKey("Device Parameters");
                        comports.Add((string)rk6.GetValue("PortName"));
                    }
                }
            }
        }
        return comports;
    } 
```

# javascript - jquery - 返回ajax响应值

> ID：14991520
> 
> 赞同：1
> 
> 时间：2013-02-20T22:57:03.777
> 
> 标签：javascript, jquery, ajax

这听起来可能很愚蠢，但我一直试图从 ajax 响应中获取价值。

我有一个 dummy.php 文件，它只是回显“hello world”，我正在发出 ajax 请求来获取文本并 console.log 它。

我的代码是：

```
$(function(){
    console.log( getResponse() );
})

function getResponse(){
var request = $.ajax({
    url: "dummy.php",
    type: "POST"
});

request.success(function(data, textStatus, jqXHR){
    // part i'm missing
});

return return_value_from_the_dummy_file;
} 
```

我希望 getResponse 函数返回响应文本，或者如果出现错误，我稍后会设置一些文本。

我应该怎么办？

# ios - Facebook 请求不返回电子邮件

> ID：14991523
> 
> 赞同：1
> 
> 时间：2013-02-20T22:57:25.873
> 
> 标签：ios, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

Facebook 请求不会输出任何电子邮件。我怎么得到这个？我的登录/注册过程需要它

```
- (void)request:(FBRequest *)request didLoad:(id)result{

    NSLog(@"FACEBOOK RESULT %@ ", result);

} 
```

这是最初的请求：

```
[facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:48:06.237

`email`如果不请求获得额外许可，则无法获得该属性，请参阅[https://developers.facebook.com/docs/reference/login/email-permissions/](https://developers.facebook.com/docs/reference/login/email-permissions/)。

我的应用程序使用以下代码首先检查 Facebook 会话是否有效（`self.facebook`是一个`Facebook`用 初始化的对象`initWithAppId`）：

```
 if (![self.facebook isSessionValid]) { 

    NSArray* permissions =  [NSArray arrayWithObjects: @"email", nil];

    [self.facebook authorize:permissions];

  } else { 
    // Since we have a valid session we can get the userinfo
    [self getFacebookUserInfo];
  } 
```

您的应用程序提示将显示“使用此应用程序需要：* 您的基本信息 * 您的电子邮件地址” 如果用户授权您获取此信息，您返回的访问令牌将设置位以允许您获取电子邮件地址，以下将起作用：

```
-(void)getFacebookUserInfo {
  [self.facebook requestWithGraphPath:@"me" andDelegate:self];
} 
```

假设您的`-(void)request:(FBRequest *)request didLoad:(id)result`方法可用（看起来确实如此）。

请注意，本文未提供 SSO（单点登录）的完整流程，您需要通过[https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/#implementsso](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/#implementsso)细节。

另请注意，您可能正在为 iOS 6 使用已弃用的 API，在进一步操作之前，您应该查看[https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-2.0-to-3.1/ 。](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-2.0-to-3.1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-17T10:01:22.497

在 2.4 api 中，使用参数来指定您有兴趣接收哪些用户数据项。例如：

FBSDKGraphRequestConnection *connection2 = [[FBSDKGraphRequestConnection alloc] init];

```
FBSDKGraphRequest *selfRequest = [[FBSDKGraphRequest alloc] initWithGraphPath:@"me?"
                                                                   parameters:@{@"fields":@"id,name,first_name,last_name,verified,email"}];
[connection2 addRequest:selfRequest
      completionHandler:^(FBSDKGraphRequestConnection *innerConnection, NSDictionary *result, NSError *error) {
          if (error) {
              NSLog(@"%@", error);
              return;
          }

          if (result) {
              // get user data
              NSMutableDictionary *facebookUserData = [NSMutableDictionary dictionaryWithDictionary:result];
              NSLog(@"result=%@", result); 
```

然而，他们显然搞砸了很多时间，因为电子邮件目前没有被退回给开发人员，并且目前正在开发应用程序中。顺便说一句，在开发中的应用程序上提交错误是不可能的，因为它们需要在反馈系统中获得批准的应用程序......

我想知道他们认为我们将如何确保在提交应用程序以供批准之前某些东西可以工作，或者在可以测试 Facebook 集成之前要求无法批准的应用程序的 App Store id 的逻辑是什么最充分的。

此外，谁是 Facebook 的天才，他决定一天又一天地破坏工作代码？

# configuration - jboss as 7 - 在同一个 linux 服务器中运行多个实例 - 独立与域

> ID：14991529
> 
> 赞同：6
> 
> 时间：2013-02-20T22:57:38.903
> 
> 标签：configuration, jboss, installation, jboss7.x

1.  我下载了 jboss tar 文件。
2.  复制到我的测试服务器。
3.  解压并安装在 $HOME/jboss/

现在，我需要在单个服务器上同时运行三个实例——Dev、QA、UAT。

域模式适合这种情况吗？我的结论是，它不是。该域模式是跨多个服务器管理 JVM。例如，如果我希望 QA 在 server1 和 server2 中。那是对的吗？

但是，我不需要跨多个服务器管理 JBOSS 实例。

鉴于我应该使用独立模式吗？如果是这样，我将如何同时运行三个 JBOSS 实例（Dev、QA 和 UAT）。

我尝试了这里给出的说明（方法 2）：[https ://community.jboss.org/wiki/MultipleInstancesOfJBossAS7OnTheSameMachine](https://community.jboss.org/wiki/MultipleInstancesOfJBossAS7OnTheSameMachine)

但我不断收到这样的错误：

```
MSC00001: Failed to start service jboss.serverManagement.controller.management.http: org.jboss.msc.service.StartException in service jboss.serverManagement.controller.management.http: Address already in use /127.0.0.1:9990 
```

有没有我可以遵循的简单教程。我看到这个问题被问了很多次，但似乎都没有一个令人满意的答案……我觉得很有帮助。这是不是底层开发者不应该独自在家中尝试的黑魔法？

新加坡国标

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T18:07:44.497

为了让多个 jboss 实例在 linux 上运行，在 JBOSS_HOME/standalone/configuration/standalone.xml 中，我更改了一行：

```
<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}"> 
```

到以下...

```
<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:100}"> 
```

注意：我遇到问题的原因是因为我按照 jboss 安装说明在 .bash_profile 中设置了 JBOSS_HOME。我需要删除它，这样两个实例就不会使用相同的 JBOSS_HOME。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-20T10:13:44.253

**上述评论略有变化。**

bash$ ./standalone.sh -Djboss.socket.binding.port-offset= **10000**

这会将服务器端口启动为**18080。**

默认端口是**8080 + 10000 将给出 18080。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-17T13:51:09.053

在启动standalone.sh 时添加“-Djboss.socket.binding.port-offset=1000”更容易，例如：

```
./standalone.sh -Djboss.socket.binding.port-offset=1000

```

这将在端口 +1000 上启动 jboss 到标准端口（因此 8080 将变为 18080）。无需更改 xml 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T21:35:12.297

如果您在 Intellij 上使用 Jboss，您想将偏移量添加到服务器配置中，只需转到运行 --> 编辑配置：

![在此处输入图像描述](../Images/a85b12eaec36161c72230840f295b261.png)

# javascript - SenchaTouch 2：跨视图使用的相同工具栏多次触发相同的事件

> ID：14991532
> 
> 赞同：1
> 
> 时间：2013-02-20T22:58:08.123
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

背景：我在所有视图中使用相同的工具栏，该工具栏在单独的视图中定义。该工具栏有四个按钮。由于此按钮具有“id”属性，因此视图中一个按钮上的点击事件也会触发来自其他视图的类似点击事件，因为跨视图使用相同的工具栏。

我的工具栏如下。

```
Ext.define("WU.view.WUToolBar", {
    extend: "Ext.Toolbar",
    alias: "widget.wuToolBar",
    xtype:"wuToolBar",
    config: {
        docked : 'bottom',
        cls : 'tabBar',
        ui:'widgetBottombarUI',
        items : [ 
            {
            xtype : 'button',
            text : 'My Account',
            cls : 'profileTabBar',
            id : 'myProfileButton',
            listeners : {
                tap : function(button, e, eOpts) {
                    console.log('myProfileButton is clicked');
                }
            }, 
            {
            xtype : 'button',
            text : 'Help',
            cls : 'helpTabBar',
            id : 'helpTabButton',
            listeners : {
                tap : function(button, e, eOpts) {
                    console.log('helpButton is clicked');
                }
            }, 
        ]
    },
}); 
```

我将其添加到项目配置中的不同视图中，如下所示。

```
xtype : 'wuToolBar' 
```

因此，单个视图中按钮上的点击事件将从所有视图中触发点击事件，因为此工具栏在页面之间共享。如果我要删除 id 属性，那么应用程序可以正常工作，但我需要将 id 分配给按钮，因为我必须使用`getCmp`方法访问它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:03:37.667

如果它在所有视图上，那么我建议将其添加到您的 app.js 中，然后在您从一个屏幕移动到另一个屏幕时简单地添加到视口：

在 app.js 中：

```
...
launch: function() {
  ...
  // Add static components
  Ext.Viewport.add([
    {
      xtype: 'wuToolBar'
      docked: 'bottom' // I would recommend moving this out of your customized config
    }
  ]);
  ...
},
... 
```

您可以稍后使用相同的方法 ( `Ext.Viewport.add(...)`) 添加视图，也可以使用 [`Ext.navigation.View`组件](http://docs.sencha.com/touch/2-1/#!/api/Ext.navigation.View)。

# c++ - 记录数据时磁盘写入延迟

> ID：14991535
> 
> 赞同：0
> 
> 时间：2013-02-20T22:58:18.497
> 
> 标签：c++, linux, raspbian

我目前正在树莓派上运行 raspbian，其中我正在运行一个应用程序，该应用程序从传感器以 400Hz 采样原始数据并将其记录到文件中。我的问题是，由于一些内部缓冲区写入 SD 卡，程序每 10-15 秒挂起大约 500 毫秒到 1 秒。

我尝试使用以下代码将缓冲区设置为 0，但这似乎没有任何区别，在使用 flush() 期间也没有

```
std::fstream Log;
Log.rdbuf()->pubsetbuf(0, 0); 
```

我假设这个问题是由内核中的某些东西引起的，而不是我的应用程序，但我不知道从哪里开始寻找。非常感谢您解释我的问题最可能出在哪里。

谢谢

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:25:50.003

检查 linux`pdflush`可调参数：[http ://www.westnet.com/~gsmith/content/linux-pdflush.htm](http://www.westnet.com/~gsmith/content/linux-pdflush.htm)

我会尝试的第一件事是让页面更快过期，例如设置`/proc/sys/vm/dirty_expire_centiseconds`为`500`. 如果这不起作用，请减少`/proc/sys/vm/dirty_writeback_centisecs`并`dirty_expire_centiseconds`随之减少。

请注意，一般来说，这可能会*降低*系统的整体性能——激进的缓存是有原因的。不过，在您的情况下，这可能有助于使写入更规律。

# objective-c - 获取 NSMutableArray 的大小

> ID：14991543
> 
> 赞同：-1
> 
> 时间：2013-02-20T22:59:07.053
> 
> 标签：objective-c

我已经像这样初始化了一个 NSMutableArray：

```
tileArray = [[NSMutableArray alloc]initWithObjects:
                 (tile1,tile2,tile3,tile4,tile5,tile6,tile7,tile8,tileBlank), nil]; 
```

我正在尝试通过执行以下操作打印出数组的大小：

```
NSLog(@"Size2: %i", [tileArray count]); 
```

它告诉我大小为 0。这是什么原因造成的？

.h 文件

```
@interface STView : UIView{
NSMutableArray *tileArray;
TileView *tile1;
TileView *tile2;
TileView *tile3;
TileView *tile4;
TileView *tile5;
TileView *tile6;
TileView *tile7;
TileView *tile8;
TileView *tileBlank;

int width;
int height;
}

- (void) getScreenSize;
@end 
```

瓦片视图.m

```
- (id)initWithFrame:(CGRect)frame   withImageNamed: (NSString*) imageName{
if (self = [super initWithFrame:frame]) {
    //initilization code
    image = [[UIImageView alloc]
             initWithImage: [UIImage imageNamed: imageName]];
    image.frame = self.bounds;
    image.opaque = YES;
    [self addSubview:image];
} return self;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:04:40.757

首先，去掉括号。表达式的`(tile1,tile2,tile3,tile4,tile5,tile6,tile7,tile8,tileBlank)`值为`tileBlank`。

其次，这些`tile*`人在哪里被宣布？它们都是可靠的非空值吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:04:59.273

您需要将数组定义为 .h 中的属性并合成它，然后使用 self.titleArray。无论您在其中声明数组的什么函数（例如 viewDidLoad），它都只是将信息存储在该函数中。在所有其他函数中它都是零，这就是你需要保留属性的原因。

# jquery - dataTables - 无法获得水平滚动和固定列来完成他们的工作。似乎到处渲染不同。我究竟做错了什么？

> ID：14991545
> 
> 赞同：6
> 
> 时间：2013-02-20T22:59:13.807
> 
> 标签：jquery, css, twitter-bootstrap, scrollbar, datatables

我花了几个小时试图弄清楚这一点。我需要制作一个与此链接上显示的表格几乎相同的表格：

[https://datatables.net/extensions/fixedcolumns/](https://datatables.net/extensions/fixedcolumns/)

它垂直和水平滚动的地方，同时保持一列固定在侧面。最终，我想固定右列而不是左列，但这并不是我目前的问题。

我的问题是，尽管有功能性 .js，它对列进行排序并且几乎完成了它应该做的所有事情，甚至使用相同的 CSS，中间容器 - 应该水平滚动的容器 - 没有。垂直滚动工作得很好。它显然在示例中工作，并且一旦构建表，.js 几乎应该处理所有事情。现在，我只想在尝试从左列切换到右列之前让它工作。如果你能同时帮助我，那就更好了，但正如我所说，这不是目前最重要的。

[http://jsfiddle.net/biggest/WCpYx/6/](http://jsfiddle.net/biggest/WCpYx/6/)

```
//jquery
$(document).ready( function () {
var oTable = $('#example').dataTable( {
    "sScrollY": "300px",
    "sScrollX": "100%",
    "sScrollXInner": "150%",
    "bScrollCollapse": true,
    "bPaginate": false
} );
new FixedColumns( oTable );
} );

//HTML
<div id="container" style="width: 700px;">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
<thead>
    <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
    </tr>
</thead>
<tfoot>
    <tr>
        <th>Rendering engine</th>
        <th>Browser</th>
        <th>Platform(s)</th>
        <th>Engine version</th>
        <th>CSS grade</th>
    </tr>
</tfoot>
<tbody>
    <tr class="gradeX">
        <td>Trident</td>
        <td>Internet Explorer 4.0</td>
        <td>Win 95+</td>
        <td class="center">4</td>
        <td class="center">X</td>

    </tr>
    <tr class="gradeC">
        <td>Trident</td>
        <td>Internet Explorer 5.0</td>
        <td>Win 95+</td>
        <td class="center">5</td>
        <td class="center">C</td>

    </tr>
    <tr class="gradeA">
        <td>Trident</td>
        <td>Internet Explorer 5.5</td>
        <td>Win 95+</td>
        <td class="center">5.5</td>
        <td class="center">A</td>

    </tr>
    <tr class="gradeA">
        <td>Trident</td>
        <td>Internet Explorer 6</td>
        <td>Win 98+</td>
        <td class="center">6</td>
        <td class="center">A</td>

    </tr>
    <tr class="gradeA">
        <td>Trident</td>
        <td>Internet Explorer 7</td>
        <td>Win XP SP2+</td>
        <td class="center">7</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Trident</td>
        <td>AOL browser (AOL desktop)</td>
        <td>Win XP</td>
        <td class="center">6</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Firefox 1.0</td>
        <td>Win 98+ / OSX.2+</td>
        <td class="center">1.7</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Firefox <br>1.5</td>
        <td>Win 98+ / OSX.2+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Firefox 2.0</td>
        <td>Win 98+ / OSX.2+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Firefox 3.0</td>
        <td>Win 2k+ / OSX.3+</td>
        <td class="center">1.9</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Camino 1.0</td>
        <td>OSX.2+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Camino 1.5</td>
        <td>OSX.3+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Netscape 7.2</td>
        <td>Win 95+ / Mac OS 8.6-9.2</td>
        <td class="center">1.7</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Netscape Browser 8</td>
        <td>Win 98SE+</td>
        <td class="center">1.7</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Netscape Navigator 9</td>
        <td>Win 98+ / OSX.2+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.0</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">1</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.1</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">1.1</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.2</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">1.2</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.3</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">1.3</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.4</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">1.4</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.5</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">1.5</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.6</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">1.6</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.7</td>
        <td>Win 98+ / OSX.1+</td>
        <td class="center">1.7</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Mozilla 1.8</td>
        <td>Win 98+ / OSX.1+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Seamonkey 1.1</td>
        <td>Win 98+ / OSX.2+</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Gecko</td>
        <td>Epiphany 2.20</td>
        <td>Gnome</td>
        <td class="center">1.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Webkit</td>
        <td>Safari 1.2</td>
        <td>OSX.3</td>
        <td class="center">125.5</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Webkit</td>
        <td>Safari 1.3</td>
        <td>OSX.3</td>
        <td class="center">312.8</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Webkit</td>
        <td>Safari 2.0</td>
        <td>OSX.4+</td>
        <td class="center">419.3</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Webkit</td>
        <td>Safari 3.0</td>
        <td>OSX.4+</td>
        <td class="center">522.1</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Webkit</td>
        <td>OmniWeb 5.5</td>
        <td>OSX.4+</td>
        <td class="center">420</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Webkit</td>
        <td>iPod Touch / iPhone</td>
        <td>iPod</td>
        <td class="center">420.1</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Webkit</td>
        <td>S60</td>
        <td>S60</td>
        <td class="center">413</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera 7.0</td>
        <td>Win 95+ / OSX.1+</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera 7.5</td>
        <td>Win 95+ / OSX.2+</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera 8.0</td>
        <td>Win 95+ / OSX.2+</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera 8.5</td>
        <td>Win 95+ / OSX.2+</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera 9.0</td>
        <td>Win 95+ / OSX.3+</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera 9.2</td>
        <td>Win 88+ / OSX.3+</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera 9.5</td>
        <td>Win 88+ / OSX.3+</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Opera for Wii</td>
        <td>Wii</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Nokia N800</td>
        <td>N800</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>Presto</td>
        <td>Nintendo DS browser</td>
        <td>Nintendo DS</td>
        <td class="center">8.5</td>
        <td class="center">C/A</td>
    </tr>
    <tr class="gradeC">
        <td>KHTML</td>
        <td>Konqureror 3.1</td>
        <td>KDE 3.1</td>
        <td class="center">3.1</td>
        <td class="center">C</td>
    </tr>
    <tr class="gradeA">
        <td>KHTML</td>
        <td>Konqureror 3.3</td>
        <td>KDE 3.3</td>
        <td class="center">3.3</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeA">
        <td>KHTML</td>
        <td>Konqureror 3.5</td>
        <td>KDE 3.5</td>
        <td class="center">3.5</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeX">
        <td>Tasman</td>
        <td>Internet Explorer 4.5</td>
        <td>Mac OS 8-9</td>
        <td class="center">-</td>
        <td class="center">X</td>
    </tr>
    <tr class="gradeC">
        <td>Tasman</td>
        <td>Internet Explorer 5.1</td>
        <td>Mac OS 7.6-9</td>
        <td class="center">1</td>
        <td class="center">C</td>
    </tr>
    <tr class="gradeC">
        <td>Tasman</td>
        <td>Internet Explorer 5.2</td>
        <td>Mac OS 8-X</td>
        <td class="center">1</td>
        <td class="center">C</td>
    </tr>
    <tr class="gradeA">
        <td>Misc</td>
        <td>NetFront 3.1</td>
        <td>Embedded devices</td>
        <td class="center">-</td>
        <td class="center">C</td>
    </tr>
    <tr class="gradeA">
        <td>Misc</td>
        <td>NetFront 3.4</td>
        <td>Embedded devices</td>
        <td class="center">-</td>
        <td class="center">A</td>
    </tr>
    <tr class="gradeX">
        <td>Misc</td>
        <td>Dillo 0.8</td>
        <td>Embedded devices</td>
        <td class="center">-</td>
        <td class="center">X</td>
    </tr>
    <tr class="gradeX">
        <td>Misc</td>
        <td>Links</td>
        <td>Text only</td>
        <td class="center">-</td>
        <td class="center">X</td>
    </tr>
    <tr class="gradeX">
        <td>Misc</td>
        <td>Lynx</td>
        <td>Text only</td>
        <td class="center">-</td>
        <td class="center">X</td>
    </tr>
    <tr class="gradeC">
        <td>Misc</td>
        <td>IE Mobile</td>
        <td>Windows Mobile 6</td>
        <td class="center">-</td>
        <td class="center">C</td>
    </tr>
    <tr class="gradeC">
        <td>Misc</td>
        <td>PSP browser</td>
        <td>PSP</td>
        <td class="center">-</td>
        <td class="center">C</td>
    </tr>
    <tr class="gradeU">
        <td>Other browsers</td>
        <td>All others</td>
        <td>-</td>
        <td class="center">-</td>
        <td class="center">U</td>
    </tr>
</tbody>
</table>
</div> 
```

这是一个显示问题的jsfiddle。奇怪的是，hoz-scroll 实际上出现在此（在我的本地示例中完全不存在），但它仍然不允许左侧（渲染引擎）列保持不变，并扩展整个表格，您可以请参阅示例链接，它不应该这样做。

我还应该提到，这是在 Bootstrap 环境中完成的，从我目前所读到的内容来看，dataTables 和 Bootstrap 应该可以很好地协同工作。我认为某处可能存在禁用水平滚动的样式，但我尚未发现任何差异。

此外，经过进一步检查，在 jsfiddle 示例中未显示的最左侧列上应该有一个 class="DTFC_LeftWrapper"，这可能是 hoz-bar 一直延伸到左侧的原因。我不知道为什么它不会出现在那里，但会出现在本地文件以及示例链接中。

据我所知，class="dataTables_scrollBody" 中的表并没有超出它包含在 class="dataTables_scroll" 中的 div，jsfiddle 版本似乎也没有。在本地版本中，任何将其强制到外部的尝试只会扩大 div 的宽度。

我不知道，我只是想尽可能多地给你继续。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:17:04.950

我认为您需要设置要在初始化程序中固定多少列...

```
new FixedColumns( oTable, {
      "iLeftColumns": 0,
      "iRightColumns": 1
    } ); 
```

此信息来自[http://www.datatables.net/extras/fixedcolumns/options](http://www.datatables.net/extras/fixedcolumns/options)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T13:26:11.353

感谢@Biggest，您关于引导表宽度的观点导致了我们的解决方案。至少在 chrome 中，*auto*不起作用，但*没有一个*起作用，所以我们只是将它添加到我们的 .less 工作表中：

```
table{
  max-width: none
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T04:15:25.907

最新版本的 JQuery 已弃用`$.browser`。积极开发的插件包括检查效果`if($.browser && $.browser.msie))`而不是`if($.browser.msie))`. 您可以通过以下方式之一解决您的问题

1.  在您的项目中包含[$.browser 。](https://github.com/jquery/jquery-browser)

2.  使用旧版本的 JQuery。

3.  像其他人一样使用 $.browser 检查修补 FixedColumns.js。

您的 jsfiddle 在使用旧版本的 JQuery 时有效。

# knockout.js - 如何将 $data 分配给 css 类？

> ID：14991559
> 
> 赞同：0
> 
> 时间：2013-02-20T23:00:19.293
> 
> 标签：knockout.js

我有一个字符串值数组。我正在像这样循环遍历数组，

```
<!-- ko foreach: items -->
<div data-bind="css: {'dkblue': true, $data: true }">
    <span data-bind="text: $data"></span>
</div>
<!-- /ko --> 
```

div 以这样的方式结束，`<div class="dkblue data">`而不是 $data（和 dkblue）的实际值。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:32:54.840

在 KO 2.2 中，`css`绑定可用于动态应用类。这意味着您可以执行以下操作：

```
<div class="dkblue" data-bind="css: $data"> 
```

或者

```
<div data-bind="css: 'dkblue ' + $data"> 
```

# java - 在Java中使用foreach对整数数组进行排序

> ID：14991561
> 
> 赞同：2
> 
> 时间：2013-02-20T23:00:24.437
> 
> 标签：java, arrays, sorting, foreach, int

所以我得到了这个学校作业：

> 编写一个方法来获取两个整数数组并`x[]`使用`y[]`foreach 循环进行排序。

`x[]`大小为 10，所有元素都用 初始化`Math.random()`，`y[]`大小 >10 并用零填充。该方法应将`x[]`数组排序为`y[]`和`return y[]`。

由于我只剩下 foreach 我无法找到一种方法来引用数组中的其他元素以比较它们。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:42:18.023

这是我 100% 认真的回答。

```
public static void completelyLegitSort(int[] x,int[] y){
    for(int n:x){
        System.arraycopy(x, 0, y, 0, x.length);
        java.util.Arrays.sort(y);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:13:14.800

```
int[] crazySort(int[] x, int[] y) {

    System.arraycopy(x, 0, y, 0, x.length);

    int i = 1; // cheating
    for (int n : y) { // <- this is your foreach, you will never use the n variable :D
        if (i == x.length) break; // cheating again
        for (int j = i-1; j >= 0; j--) { // finally doing something reasonable
            if (y[j+1] < y[j]) {
                int temp = y[j+1];
                y[j+1] = y[j];
                y[j] = temp;
            }
        }
        i++;
    }

    return y;

} 
```

希望老师觉得有趣，至少和练习陈述一样有趣。此解决方案使用 java“foreach”循环，并且练习语句不会告诉您*仅*使用它。

# c++ - 构建 yaml C++ 给出问题

> ID：14991562
> 
> 赞同：0
> 
> 时间：2013-02-20T23:00:27.503
> 
> 标签：c++, yaml-cpp

虽然我从 yaml-cpp 网站复制了文件，但出现以下错误：

```
2>c:\git_sandbox\sandbox\templatematching\templatematchingframework\prj.thirdparty\yaml-cpp\src\stream.h(9): fatal error C1083: Cannot open include file: 'yaml-cpp/noncopyable.h': No such file or directory
2>  scantag.cpp
2>c:\git_sandbox\sandbox\templatematching\templatematchingframework\prj.thirdparty\yaml-cpp\src\ptr_vector.h(8): fatal error C1083: Cannot open include file: 'yaml-cpp/noncopyable.h': No such file or directory 
```

为什么windows找不到这些文件？

# ruby-on-rails - 从 Rails 应用程序收到的电子邮件中仅提取已回复的电子邮件正文

> ID：14991564
> 
> 赞同：0
> 
> 时间：2013-02-20T23:00:28.920
> 
> 标签：ruby-on-rails, email, actionmailer

My Rails 应用程序允许用户回复某些电子邮件，以便对应用程序发表评论。回复电子邮件时，包括原始电子邮件在内的整个正文都会被包括在内。一些客户在原始消息和消息详细信息之间划了一条线，而有些则没有。我想知道是否有一种标准方法来解析电子邮件，而不是在帖子正文中包含邮件详细信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:50:57.007

理想情况下，所有邮件都需要遵循 RFC 标准来编写邮件，以便所有 Web 浏览器和客户端都可以正确解析它们。有很多 rfc 与之对应。

> MIME 在六个链接的 RFC 备忘录中指定：RFC 2045、RFC 2046、RFC 2047、RFC 4288、RFC 4289 和 RFC 2049，它们共同定义了规范

参考：[http ://en.wikipedia.org/wiki/MIME](http://en.wikipedia.org/wiki/MIME)

但这是理想的情况，一些客户也会以不同的格式附加消息。我不知道任何现成的软件，但即使 rediffmail/yahoo 使用的一种方法是解析邮件正文并搜索不同的模式，如

> - - - - - 转发消息 - - - - -
> 
> 来自：xyza@gmail.com
> 
> 日期：2013年2月17日18:50
> 
> 主题：回复：开口
> 
> 至：abc@rediffmail.com

或者

> 来自：xyz [xyz@tcs.com]
> 
> 发送：2013 年 2 月 20 日星期三下午 4:18
> 
> 至：安舒尔
> 
> 主题：回复：你好

它必须是正则表达式检查和模式匹配才能完成所需的输出。

# ruby - Ruby String.index("/") 返回 -1

> ID：14991572
> 
> 赞同：0
> 
> 时间：2013-02-20T23:01:12.793
> 
> 标签：ruby, string, indexing

我需要方法索引返回 -1 而不是 NIL，还有其他方法吗？（红宝石编程）

```
index="asddsa".index("/")
if index==nil
    puts -1
else
    puts index
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:03:56.020

自己做吧：

```
index = "asddsa".index("/") || -1 
```

这是有效的，因为表达式`a = b || c`分配`b`给`a`if`b`不是`nil`/ `false`，如果`b`是`nil`/ `false`，它会分配`c`给`a`。所以在这种情况下，当`String#index`返回时`nil`，它分配`-1`给你的`index`变量（当它返回一个数字时，它只是把它分配给`index`）。

# java - Android CursorWindowAllocationException

> ID：14991573
> 
> 赞同：1
> 
> 时间：2013-02-20T23:01:27.690
> 
> 标签：java, android, cursor

我收到此错误：

```
E/AndroidRuntime(8223): Caused by: android.database.CursorWindowAllocationException: Cursor window allocation of 2048 kb failed. # Open Cursors=940 (# cursors opened by this proc=940) 
```

我知道这可能是因为我以错误的方式使用光标或没有在正确的时间关闭它。我认为这可能是因为我正在填充相同的光标而没有关闭/清空它？

```
public static void NextAlarmTxt(){
        int dan = c.get(Calendar.DAY_OF_WEEK);
        long trenutnovrijeme = c.getTimeInMillis();
        long bazavrijeme;
        long pamti = 0;
        String danString = dani(dan);       
        Cursor CursorDan = DatabaseManager.getAllDataDay(danString);

        CursorDan.moveToFirst();
        if (!CursorDan.isAfterLast())
        {
            do
            {
                bazavrijeme = CursorDan.getInt(2);

                if (trenutnovrijeme<bazavrijeme)
                {
                    if (pamti==0)
                    {
                        pamti = bazavrijeme;
                    }

                    if (pamti>0)
                    {
                    if (pamti > bazavrijeme)
                    {
                        pamti = bazavrijeme;
                    }
                    }                   
                }
                if (trenutnovrijeme > bazavrijeme)
                {
                    dan = dan+1;
                    dani(dan);
                    CursorDan = DatabaseManager.getAllDataDay(danString);
                }
            }
            while (CursorDan.moveToNext());         
        }               
        CursorDan.close();
        text1.setText(new StringBuilder("Sljedeći : " ).append(pamti).toString());
    }       
    public static String dani(int dan){

    String danString = null;

        if (dan==1)
        {
        danString = "Nedjelja";
        }
        else if (dan==2)
        {
            danString = "Ponedjeljak";
        }
        else if (dan==3)
        {
            danString = "Utorak";
        }
        else if (dan==4)
        {
            danString = "Srijeda";
        }
        else if (dan==5)
        {
            danString = "Četvrtak";
        }
        else if (dan==6)
        {
            danString = "Petak";
        }
        else if (dan==7)
        {
            danString = "Subota";
        }
        return danString;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:10:04.140

光标打开：

```
Cursor CursorDan = DatabaseManager.getAllDataDay(danString); 
```

之后，您遍历光标，

```
do {
...
if (trenutnovrijeme > bazavrijeme)
                {
                    dan = dan+1;
                    dani(dan);
                    CursorDan = DatabaseManager.getAllDataDay(danString);
                }
....
}
while (CursorDan.moveToNext()); 
```

现在，在迭代循环中，您用一个新的光标覆盖现有的光标，从而使现有的光标保持打开状态。我不确定您要达到什么目的，但是您不应该以这种方式嵌套游标迭代，即使您这样做，也应该以正确的顺序进行。

1.  关闭现有游标
2.  检索新光标
3.  通过 cursor.moveToFirst() 将新光标移动到第一项

# javascript - 更改 If - Else 函数以返回多个值？

> ID：14991575
> 
> 赞同：1
> 
> 时间：2013-02-20T23:01:28.543
> 
> 标签：javascript, function, if-statement

所以下面的 JavaScript 代码是我用来从我们的自动化营销软件 Eloqua 中提取数据的代码。这适用于单选下拉菜单。我想要它做的是用于多选下拉菜单。

我知道 ProductValue 变量有效。因此，话虽如此，我很肯定它在 if(ProductValue == ProductList[i].value) 特别是“ .value ”中，因为这是在下拉菜单中调用值。有没有办法让这个倍数？这几天让我发疯了。

```
function CustomerInformation()

{

var ProductValue = "<span class=eloquaemail>MarketingCustomerInformation1</span>"; //Field Merge...Field merge is working
var ProductList = document.getElementById('C_Marketing_Customer_Information1').options; //Calling the contact record field

for(var i=0; i< ProductList.length; i++) 
    {       
        if(ProductValue == ProductList[i].value) 
            {
                document.getElementById('C_Marketing_Customer_Information1').value = ProductValue;
                break;
            }
        else 
            {
                document.getElementById('C_Marketing_Customer_Information1').value = "Select";
            }
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:07:24.850

您可以使用多个 for 循环：

```
var ProductValue = "<span class=eloquaemail>MarketingCustomerInformation1</span>"; //Field Merge...Field merge is working
var ProductList = document.getElementById('C_Marketing_Customer_Information1').options; //Calling the contact record field

for(var i=0; i< ProductList.length; i++) 
{      
    for(var j=0;j<ProductValue.length;j++)
    {
        if(ProductValue[j] == ProductList[i].value) 
        {
          document.getElementById('C_Marketing_Customer_Information1').option[i].selected="selected";
        }
    }
} 
```

还可以添加一个布尔变量来选择默认值，以便在未选择任何内容时使用。

**基本理念**

*   第一个循环将遍历多选列表中的所有值。
*   第二个循环将遍历您传递的所有值（这意味着 ProductValue 将需要是您要选择的所有值的数组）。
*   如果第一个数组 (ProductList[i]) 中的当前项等于 (==) 第二个数组 (ProductValue[j]) 中的当前项，那么您将选项标记为已选择。

满足您的 JS 需求的一些有用工具：

*   谷歌
*   W3Schools.com
*   Firebug（Firefox 插件，尽管大多数浏览器都有与 F12 相关的功能可以提供帮助，使用它来查看变量并逐步执行函数）

# wordpress - 使用自定义权限将自定义角色添加到 Wordpress

> ID：14991580
> 
> 赞同：0
> 
> 时间：2013-02-20T23:02:05.490
> 
> 标签：wordpress, roles, user-roles

我想为我的 Wordpress 网站添加一个新角色。它需要比作者更多的权限，但比管理员少。搜索 codex 和 Stack，我遇到了将此代码添加到 functions.php 的一致方法，但重复的错误导致我尝试了 User Role Editor 插件。

这个新角色下的用户需要能够编辑、查看、删除和管理所有帖子、类别和标签。他们还必须能够管理所有已批准和待定的评论。此外，他们应该有权访问讨论设置。不过，这最后一点似乎是不可能的。我可以赋予他们管理选项的能力，但不能赋予他们管理特定选项的能力。有没有办法授予这种特定的能力？

谢谢。

# c# - AutoMapper：将子成员从复杂类型映射到字符串 []

> ID：14991581
> 
> 赞同：1
> 
> 时间：2013-02-20T23:02:08.297
> 
> 标签：c#, automapper, automapper-2

我有一个带有 string[] 属性的目标类型。

```
Animal
  string[] Barks; 
```

我的源对象是：

```
 AnimalDTO
     List<BarkTypes> Barks; 
```

如何将**BarkTypes.NameOfBark**映射到**string[] Barks**？

像这样的东西：？

```
Mapper.CreateMap<AnimalDTO, Animal>()
   .ForMember(dest => dest.Barks, y => y.MapFrom(x=>x.??????)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:19:51.853

你想要`ResolveUsing`：

```
Mapper.CreateMap<AnimalDTO, Animal>()
      .ForMember(dest => dest.Barks,
                    y => y.ResolveUsing(x=>x.Barks
                                            .Select(b=>b.NameOfBark)
                                            .ToArray())
              ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:14:27.890

完全未经测试，但是：

```
Mapper.CreateMap<AnimalDTO, Animal>()
   .ForMember(dest => dest.Barks, 
              y => y.MapFrom(x=>x.Barks
                                 .Select(z => z.NameOfBark)
                                 .ToArray()); 
```

# android - 如何从可绘制资源创建 ImageView 动画序列？

> ID：14991584
> 
> 赞同：0
> 
> 时间：2013-02-20T23:02:15.613
> 
> 标签：android, animation, imageview, android-resources

我正在尝试从可绘制资源中加载 11 个图像并延迟显示在 ImageView 中。实际上做类似 AnimationDrawable 的事情，因为创建这样的结果会导致 OutOfMemory 异常和崩溃。它既是重新发明轮子，也是一些实践，但仍然会导致应用程序崩溃。如果我只是初始化 imgView 并`imgView.setImageResource(R.drawable.pic1);`加载图像。当我设置一个处理程序并尝试像下面那样执行 postDelayed() 时，我只能在应用程序崩溃之前看到布局的背景图像，而 Logcat 中什么也没有。这是代码：

```
package com.forms.test;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;

public class Animacia extends Activity {

final static int[] imgGalleryResources = { 
    R.drawable.pic1, R.drawable.pic2, R.drawable.pic3,
    R.drawable.pic4, R.drawable.pic5, R.drawable.pic6,
    R.drawable.pic7, R.drawable.pic8, R.drawable.pic9,
    R.drawable.pic10, R.drawable.pic11
};

ImageView imgView;
Handler   handlerTimer = new Handler();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.animation);

    initGUI();
}

private void initGUI() {
    int i;
    imgView = (ImageView)findViewById(R.id.imgView);
    imgView.setAnimation(AnimationUtils.loadAnimation(this, R.anim.alpha));

    for(i = 0; i < imgGalleryResources.length ;i++) {
        final int res = imgGalleryResources[i];
        handlerTimer.postDelayed(
                new Runnable() {
                    public void run() {
                        imgView.setImageResource(res);
                    }
                }, 
                5000
        );
    }
}
} 
```

与此代码相关的是 layout/animation.xml 中的 imgView：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical" 
   android:layout_width="fill_parent" 
   android:layout_height="fill_parent"
   android:background="@drawable/heart"
   android:id="@+id/frameLayout1">

   <ImageView
       android:id="@+id/imgView"  
       android:layout_width="wrap_content" 
       android:layout_height="wrap_content" />

</FrameLayout> 
```

以及来自 anim/alpha.xml 的 imgView 的 alpha 动画：

```
<?xml version="1.0" encoding="utf-8"?>
<alpha>
    <alpha
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromAlpha="0.3"
android:toAlpha="0.9"
android:duration="2000" />
</alpha> 
```

欢迎所有提示和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:36:22.417

你试过这个方法吗？

```
private int pos = 0;
private Timer timer;
private static final int UPDATE_PICTURE = 5;
private void initGUI() {
    imgView = (ImageView)findViewById(R.id.imgView);
    imgView.setAnimation(AnimationUtils.loadAnimation(this, R.anim.alpha));

    handlerTimer = new Handler() {
        public void handleMessage(Message msg) {
            if(msg.what == UPDATE_PICTURE)
            {
                 //start animation here
                imgView.setImageResource(msg.arg1);
                imgView.invalidate();
            }
        }
    };

    timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {

        public void run() {
            Message msg = new Message();
            msg.what = UPDATE_PICTURE;
            msg.arg1 = imgGalleryResources[pos++];
            handlerTimer.sendMessage(msg);
            if(pos>=imgGalleryResources.length)
                timer.cancel();
        }
    }, 0, 2000);

} 
```

# vb.net - 更改选择时显示 ValueMember

> ID：14991585
> 
> 赞同：0
> 
> 时间：2013-02-20T23:02:23.470
> 
> 标签：vb.net, winforms, datagridview

我整天都在寻找我认为是一个简单的概念，但这就是我思考的结果。

我有一个带有 ComboBox 列的 DataGridView 控件，该列使用 DataTable 作为其 DataSource，如下所示：

```
 With CType(dgvICS213.Columns(GridCol("CostBasis").Name), DataGridViewComboBoxColumn)
        .DataSource = Common.ExecuteQuery("SELECT ID, CostBasis FROM ICS213CostBasis", CommandType.Text)
        .DisplayMember = "CostBasis"
        .ValueMember = "ID"
    End With 
```

数据库表存储组合框中的值 (ID)。

我使用 DefaultValuesNeeded 事件将新值设置为 DisplayMember (CostBasis) 值：

```
Dim dgv As DataGridView = sender
CType(e.Row.Cells(GridCol("CostBasis").Index), DataGridViewComboBoxCell).Value = CType(dgv.Columns(GridCol("CostBasis").Index), DataGridViewComboBoxColumn).Items(0).Item(1) 
```

我还使用 DisplayMember 值填充数据库查询中的现有行（处理 DataError 事件）

到目前为止，一切都很好，但是当我从组合框中选择一个条目时，ValueMember 将显示在组合中，而不是 DisplayMember。有人可以解释我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T06:44:10.867

我遇到了同样的问题，并通过将数据库中的字段从更改`byte`为`int16`.

# java - 创建新实例时，如何检查它是否重复，如果是则返回原始指针？

> ID：14991588
> 
> 赞同：0
> 
> 时间：2013-02-20T23:02:40.850
> 
> 标签：java

我有一个名为 Token 的类，它用`new Token(String)`. 因为 Token 类在实例化时会生成一个随机数，所以每个 String 输入只有一个 Token 实例很重要。为了保证这种行为，我想在尝试创建重复实例时返回原始实例指针。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:04:30.587

创建一个`TokenFactory`具有`Map<String, Token>`数据成员的类。在您的 create 方法中，如果您`String`在`Map`. 如果没有，请`Map`在返回之前将其添加到。

如果您想阻止用户`Token`自己创建实例，您必须尝试将构造函数设为私有并制作`TokenFactory`静态内部类，就像`Builder`模式一样。

```
public class TokenFactory {
    private static final Map<String, Token> INSTANCES = new ConcurrentHashMap<String, Token>();

    public Token create(String key) {
        if (INSTANCES.containsKey(key) { 
            return INSTANCES.get(key);
        } else {
            Token t = new Token(key);
            INSTANCES.put(key, t);
            return t;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:12:10.467

如果您的 Token 类是不可变的，您可以考虑使用Google Guava 的[Interner](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Interner.html)。从javadoc：

> 为彼此相等的任何实例集合选择并返回代表实例。如果为此方法提供了两个相等的输入，则两个调用都将返回相同的实例。也就是说，intern(a).equals(a) 始终成立，并且当且仅当 a.equals(b) 时，intern(a) == intern(b)。请注意，如果原始实习实例被垃圾回收，则允许 intern(a) 现在返回一个实例，稍后返回另一个实例。

例如

```
Interner<Token> tokenInterner = Interners.newStrongInterner();
Token token = tokenInterner.intern(new Token("String")); 
```

将确保始终为相同的 String 值返回相同的 Token 实例（假设您正确实现了 equals ）。

# c++ - 如何在 OpenCL 中使用模板？

> ID：14991591
> 
> 赞同：4
> 
> 时间：2013-02-20T23:02:59.727
> 
> 标签：c++, templates, opencl

根据[本文档第 6 页（由 AMD 发布）](http://developer.amd.com/wordpress/media/2012/10/CPP_kernel_language.pdf) [（以及此主题？）](https://stackoverflow.com/questions/4465309/how-to-use-c-templates-in-opencl-kernels)，有一些方法可以将模板与 OpenCL 一起使用。但是，第一个文档报告这可以通过使用一些似乎不存在的 clBuildProgramWithSource 选项来完成......无论如何，假设它是[clBuildProgram](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clBuildProgram.html)而不是前一个，我尝试使用所谓的“-x”选项使用“clc++”，但仍然无法识别：

```
warning: ignoring build option: "-x" 
```

事实上，根据来自 Khronos 的文档，此选项不可用！该文档可能会以某种方式被弃用，但是还有其他方法可以在 OpenCL 代码中使用模板吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T03:11:24.743

该`-x`选项仅适用于支持 OpenCL 1.2 和静态 C++ 语言扩展的最新 AMD OpenCL 运行时。你不会在官方的 Khronos 文档中找到关于它的任何信息，因为这完全是 AMD 的一项举措，并且最终是供应商的扩展。

我假设你有正确的运行时，所以你的内核需要使用这些选项来构建：

```
-x clc++ 
```

如果您能够使用它构建带有类的内核，那么您应该能够使用模板。

如果这不起作用，则意味着您的运行时安装很糟糕，例如您以某种方式使用了错误的编译器，或者意味着您没有正确的运行时。如果是这样，请提供您的平台信息。

前段时间我弄乱了静态 C++ 扩展，我可以证明它`-x clc++`确实有效。

* * *

另请注意，使用此扩展程序会使您的代码无法移植并锁定在兼容 AMD 的设备上，因为其他供应商不太可能自己引入完全相同的扩展程序（如果有的话）。

此外，关于 Khronos 文档的注释 - 谷歌返回的通常是 OpenCL 1.0 版本，这可能会令人恼火。如果您经常使用 OpenCL，我建议您下载 1.1 或 1.2 标准以及获取相关 HTML 文档的本地副本以便快速访问。它有助于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-19T08:43:31.963

新的[SYCL](https://www.khronos.org/sycl) Khronos 标准为 OpenCL 平台之上的模板元编程提供原生支持，包括 AMD OpenCL 平台。

# python - 检索 YouTube 评论的时间戳

> ID：14991592
> 
> 赞同：0
> 
> 时间：2013-02-20T23:03:02.040
> 
> 标签：python, youtube, youtube-api, gdata

以下是用于检索 YouTube 视频评论的 API 响应，取自[https://developers.google.com/youtube/2.0/developers_guide_protocol_comments](https://developers.google.com/youtube/2.0/developers_guide_protocol_comments)：

```
<feed>
  <entry>
    ...
    <media:group>
      ...
    </media:group>
    <gd:comments>
      <gd:feedLink
        href='https://gdata.youtube.com/feeds/api/videos/VIDEO_ID/comments'/>
    </gd:comments>
  </entry>
</feed> 
```

我不确定使用哪个 API 来获取这些数据。我用 Python 编写了我的代码，它给了我视频的作者姓名和评论。我想为我的研究工作获取每条评论的时间戳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:38:17.783

好吧，这将有助于查看您用于获取作者和评论文本的代码，以便我可以为您提供执行此操作的实际代码。但如果没有这个，查看 API 响应，每条评论都在`<entry>`顶级标签下的`<feed>`标签中。

对于每条评论，都有一个`<published>`和一个`<updated>`带有时间戳的标签。我猜这些是原始评论的日期和最后一次编辑的日期。如果我有你的代码来看看你是如何解析 xml 的，我可能会添加一个片段让你检索这些。

编辑：给出下面链接中的代码。这是应该做你想做的主循环的修改。

```
for comment in comments_generator(client, VIDEO_ID):
        author_name = comment.author[0].name.text
        text = comment.content.text

        post_date = comment.published.text
        last_update_date = comment.update.text            

        print("{}(date:{}): {}".format(author_name, post_date, text)) 
```

请注意，日期为文本格式。如果您想从中提取 python 日期时间对象，请查看[dateutil](http://labix.org/python-dateutil)和[这个问题](https://stackoverflow.com/questions/1302161/how-do-i-parse-timezones-with-utc-offsets-in-python)。

# python - 打印彩色输出 - 从控制台而不是从脚本工作

> ID：14991594
> 
> 赞同：4
> 
> 时间：2013-02-20T23:03:17.330
> 
> 标签：python, windows, console

我有一个奇怪的问题，我无法解决。我使用（并且不时提供）一个具有彩色控制台输出的程序。在我重新安装 Windows 之前，一切都很好。现在我无法获得彩色输出。

这是用于着色的[脚本。](https://bitbucket.org/alefnula/tea/src/dc14009a19d66f92463549332a321b29c71d47b8/src/tea/console/color.py?at=default)

我已经设法将问题缩小到或多或少简单的情况，但我不知道出了什么问题。

这是按预期工作的控制台提示符（字符串`test`以红色打印）：

```
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path.insert(0, r'c:\bin\SV\tea\src')
>>> from tea.console.color import cprint, Color
>>> cprint('test\n', Color.red)
test
>>> 
```

但是当我使用相同版本的 python 运行以下脚本时，我得到输出`test`但不是红色（没有颜色，只有默认控制台颜色）：

```
import sys
sys.path.insert(0, r'c:\bin\SV\tea\src')

from tea.console.color import cprint, Color
cprint('test\n', Color.red) 
```

*   在我重新安装系统之前，相同的设置有效。
*   我查过，交互模式下的环境变量和脚本是一样的。
*   我在标准的 Windows 命令提示符和控制台（我通常使用的程序）中尝试过这个。
*   有问题的操作系统是 Windows 8，在重新安装之前，它也用于 Windows 8。
*   具有相同设置的相同代码适用于工作计算机（Windows 7）。
*   我已经安装了 Python 2.7 和 Python 3.3（就像我以前一样）。我曾尝试通过直接调用 python 解释器 ( `c:\Python27\python.exe`) 或 with来运行脚本`py -2`，但它没有帮助。
*   IPython 和 mercurial 会按应有的方式对输出进行着色。

有什么想法可以尝试使这项工作吗？

**编辑**：

也许不清楚，但我用来着色输出的脚本在有问题的链接中给出。又来了： [https ://bitbucket.org/alefnula/tea/src/dc14009a19d66f92463549332a321b29c71d47b8/src/tea/console/color.py?at=default](https://bitbucket.org/alefnula/tea/src/dc14009a19d66f92463549332a321b29c71d47b8/src/tea/console/color.py?at=default)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T16:48:42.443

我找到了问题和解决方案。

我相信问题出在 x64 ctypes 模块中的错误。我安装了 Python 2.7 x64 并使用该版本以下行（来自我有问题链接的脚本）：

```
ctypes.windll.kernel32.SetConsoleTextAttribute(std_out_handle, code) 
```

返回带有描述的错误代码 6 `The handle is invalid`。经过一番调查，我推断问题可能是 x64 版本的 python，所以我安装了 32 位版本，一切正常。

由于这解决了我的问题，而且我没有时间进行更深入的分析，所以我将把它留在这里，只是想给出一些问题的解决方案。

# c++ - 使用引用实现状态模式

> ID：14991598
> 
> 赞同：0
> 
> 时间：2013-02-20T23:03:29.563
> 
> 标签：c++, inheritance, design-patterns, reference, state-pattern

我正在尝试重构我的代码，其中包括应用状态模式。我更像是一名 Java 程序员，所以请保持友善 ;) 所以，这里我有我的基本状态类，没什么特别的：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include "FaceRegion.hpp"

class AlghorithmState {
public:
    AlghorithmState(FaceRegion context);
    virtual ~AlghorithmState();
    virtual cv::Mat processImage(cv::Mat frame) = 0;

private:
    FaceRegion CONTEXT;

}; 
```

和其中一个孩子状态：

```
class HaarClassifierState : public AlghorithmState {
public:
    HaarClassifierState(FaceRegion context);
    virtual ~HaarClassifierState();
    cv::Mat processImage(cv::Mat frame);
}; 
```

然后是 Context 类，它保存当前状态并在其 fromImage 方法/函数内部调用 processImage：

```
#include "AlghoritmState.hpp"
using namespace cv;

class FaceRegion {
public:
    FaceRegion();
    virtual ~FaceRegion();
    Mat fromImage(Mat& image);
    void setAlghoritmState(AlghorithmState state); // line 10
private:
    AlghorithmState alghoritm; //line 
} 
```

问题是，当我尝试编译此代码时，我在第 10 行收到以下错误

```
In file included from AlghoritmState.hpp:15:0,
                 from FaceRegion.hpp:10,
                 from newmain.cpp:93:
FaceRegion.hpp:35:28: error: ‘AlghorithmState’ has not been declared
FaceRegion.hpp:39:5: error: ‘AlghorithmState’ does not name a type 
```

我做错什么了？我尝试在 CONTEXT 类头文件中添加不完整的 AlghoritmState 类声明，但它只会引发另一个错误：

```
In file included from AlghoritmState.hpp:15:0,
                 from FaceRegion.hpp:10,
                 from newmain.cpp:93:
FaceRegion.hpp:40:21: error: field ‘alghoritm’ has incomplete type
FaceRegion.hpp:36:10: error: cannot declare parameter ‘state’ to be of abstract type ‘AlghorithmState’
In file included from FaceRegion.hpp:10:0,
                 from newmain.cpp:93:
AlghoritmState.hpp:17:7: note:   because the following virtual functions are pure within ‘AlghorithmState’:
AlghoritmState.hpp:21:21: note:     virtual cv::Mat AlghorithmState::processImage(cv::Mat) 
```

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:25:45.563

您的通知包括：

`AlghoritmState.hpp`是`#include`ing `FaceRegion.hpp`，反之亦然。使用包含守卫，这意味着一个标头将看到另一个标头，但不是其他方式。

您的问题是您同时使用`AlghoritmState`the`FaceRegion`和相反的方式。是一个接口，因此`AlghoritmState`您应该将成员变量放在那里并将其添加到实现中，`HaarClassifierState`

这样，您可以像这样包含：

*   `FaceRegion`包括`AlghoritmState`
*   `HaarClassifierState`包括`FaceRegion`和`AlghoritmState`

正如你所看到的，你没有更多的循环，你的编译问题就会消失。

**重要提示**：您当前按值存储对象。当您对继承的对象执行此操作时，它们很容易被[*切片*](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)，这意味着您最终可能会得到一个比它应有的更小的对象，从而导致发生令人讨厌的事情 (UB)。因此，在所有情况下，您都应该停止将对象超类存储为值，而是将它们存储为指针。（这当然会导致我们遇到变量所有权的问题，但这是另一个问题）。因此，如果它是存储在那里的实际超类型，则只有超类型的成员变量。

# ruby - 可以使用 mixin 来减少 Rake 文件中的冗余吗？

> ID：14991601
> 
> 赞同：1
> 
> 时间：2013-02-20T23:03:45.393
> 
> 标签：ruby, rake, mixins

我有一个带有 5 个不同名称空间的 Rakefile，每个名称空间都有相同的 6 个方法签名。每个签名的正文完全相同。它们仅在方法使用的实例变量的值上有所不同。

一个具体的例子：

```
namespace :db do
  namespace :foo do
    @user = "foo"
    task :create do
      function_call_to_do_stuff @user
    end
  end

  namespace :bar do
    @user = "bar"
    task :create do
      function_call_to_do_stuff @user
    end
  end
end 
```

理想情况下，我希望能够做这样的事情：

```
module Migratable
  task :create do
    function_call_to_do_stuff @user
  end
end

namespace :db do
  namespace :foo do
    include Migratable
    @user = "foo"
  end

  namespace :bar do
    include Migratable
    @user = "bar"
  end
end 
```

当我执行上面显示的操作时，mixin 中的任务不会注册为适当命名空间的任务 - 或者根本就不会注册为任务。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:48:42.747

Rake 只是 Ruby，因此您可以根据需要使用包含和扩展的模块。

也就是说，有一种更简单的方法可以实现您想要的：使您的模块只是普通的 Ruby。

例子：

```
# migratable.rb
module Migratable
  def create x
    puts x
  end
end

# rakefile.rb
require_relative 'migratable'
include Migratable

namespace :db do

  task :foo do
    @user = "foo"
    create(@user)
  end

  task :bar do
    @user = "bar"
    create(@user)
  end

end 
```

在 Rake 中，您应该设置可以在任务中覆盖的实例变量，而不是在命名空间中。这是因为命名空间都是在任务运行*之前解析的。*

# jquery - 打开带有链接的 jQuery 手风琴面板（手风琴外）

> ID：14991602
> 
> 赞同：2
> 
> 时间：2013-02-20T23:03:49.787
> 
> 标签：jquery, accordion

还是 jQuery 的新手！

我有一个使用 jQuery UI 1.10.1 构建的手风琴。这是非常基本的；默认情况下显示第一项，其他项在单击之前隐藏。我想使用 jQuery 手风琴上方的链接在单击时打开某个手风琴面板。它看起来像这样：

链接1 链接2 链接3

| 手风琴标题 1 |

| 手风琴内容1显示|

| 手风琴标题 2 |

| 手风琴内容 2 隐藏 |

| 手风琴标题 3 |

| 手风琴内容3隐藏|

..这样当您单击“Link2”时，它会隐藏 Accordion 内容 1 并显示 Accordion 内容 2。

我搜索了该网站，但没有一个答案似乎合适。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:37:21.787

您可能可以使用不同的方法将按钮链接到标题部分，我只是使用了按钮中的 id。

但本质上：

```
$( "#accordion" ).accordion();

$('.section-button').on('click', function(){
  var header = $('#accordion').find('.' + this.id);
  header.click();
}); 
```

[演示在这里](http://jsbin.com/oyuwos/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-02T00:59:08.193

截至 2018 年 7 月 1 日，如果您遇到此问题，您可以执行以下操作：

```
$('#accordion').accordion({active:0}) 
```

将 0 替换为选项卡的索引。0 将打开第一个，1 将打开下一个，依此类推。

# objective-c - 在 ObjectiveC 中使用指针的最大优势是什么

> ID：14991608
> 
> 赞同：7
> 
> 时间：2013-02-20T23:04:33.630
> 
> 标签：objective-c, c, cocoa, pointers

我意识到你们中 99% 的人都认为“这是什么鬼……”但是请帮助我理解使用`pointers`. 我相信我的具体问题会帮助很多新手。

我了解指针是什么，它们是对内存中地址的引用，并且通过使用 (*) 运算符，您可以获得该地址中的值。

比方说：

```
int counter = 10;
int *somePointer = &counter; 
```

现在我在内存中有地址`counter`，我可以通过这样做间接指向它的值：

```
int x = *somePointer; 
```

哪个使`x = 10`，对吗？

但这是最基本的示例，对于这种情况，我可以使用`int x = counter;`并获取该值，所以请解释为什么指针在 Objective-C 和其他一些语言中真的如此重要......感觉？

欣赏它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T23:13:24.573

Objective-C 有指针，因为它是 C 的演变，它广泛使用指针。在像 Objective-C 这样的面向对象语言中指针的优点是，在创建对象后，您可以传递指向对象的指针，而不是传递对象本身。换句话说，如果您有一些占用大量存储空间的对象，则传递指针比传递对象本身的副本更节省内存。当您只处理像`int`s 这样的原始类型时，这在简单的情况下可能并不明显，但是当您开始处理更复杂的对象时，内存和时间节省是巨大的。

更重要的是，指针使代码的不同部分*更*容易相互通信。如果变量只能“按值”而不是“按引用”传递给函数（使用指针时会发生这种情况），那么函数永远不会改变它们的输入。它们只能通过返回值或更改全局变量来更改程序的状态——过度使用通常会导致代码草率、无组织。

这是一个具体的例子。假设您有一个将解析 JSON 字符串并返回的 Objective-C 方法`NSDictionary`：

```
+ (NSDictionary *)parseJsonString:(NSString *)json
                            error:(NSError **)error; 
```

`NSDictionary`如果一切顺利，该方法将进行解析并返回一个。但是如果输入字符串有问题怎么办？我们想要一种方法来向用户（或至少向程序员）表明发生了什么，所以我们有一个指向 an 的指针的指针`NSError`，它将包含该信息。如果我们的方法失败（可能返回`nil`），我们可以取消对参数的引用`error`，看看出了什么问题。我们有效地做的是给我们的方法两种不同的返回值：通常，它会返回一个`NSDictionary`，但它也可以返回一个`NSError`。

如果您想了解更多关于此的内容，您可能会更幸运地搜索“C 中的指针”而不是“Objective-C 中的指针”；指针当然在 Objective-C 中广泛使用，但所有底层机制都与 C 本身相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:13:10.760

> 在 ObjectiveC 中使用指针的最大优势是什么

我想说最大的优点是你可以使用 Objective-C - 所有的 Objective-C 对象~~都是指针~~，都是使用指针访问的（编译器和运行时不会让你静态地创建对象），所以你不会没有他们就走得更远...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:19:42.480

**物品：**

如果我告诉你写一个程序来维护一组计数器，但计数器的数量将由用户在启动程序时输入。我们使用分配在堆上的整数数组对此进行编码。

```
int *counters = malloc(numOfCounters * sizeof(int)); 
```

Malloc 直接使用内存，因此它本质上返回一个指针。所有 Objective-C 对象都是用 进行堆分配的`malloc`，所以它们总是指针。

**物品：**

如果我告诉你给我写一个读取文件的函数，然后在完成后运行另一个函数会怎样。但是，这个其他功能是未知的，并且会被其他人添加，我什至不认识的人。

为此，我们有“回调”。您将编写一个如下所示的函数：

```
int ReadAndCallBack(FILE *fileToRead, int numBytes, int whence, void(*callback)(char *)); 
```

最后一个参数是指向函数的指针。当有人调用您编写的函数时，他们会执行以下操作：

```
void MyDataFunction(char *dataToProcess);

ReadAndCallBack(myFile, 1024, 0, MyDataFunction); 
```

**物品：**

将指针作为函数参数传递是从函数返回多个值的最常见方式。在 OSX 上的 Carbon 库中，几乎所有的库函数都返回错误状态，如果库函数必须返回对程序员有用的东西，就会出现问题。所以你传递你希望函数将信息传回给你的地址......

```
int size = 0;
int error = GetFileSize(afilePath,&size); 
```

如果函数调用返回错误，则它在 中`error`，如果没有错误，`error`则可能为零并且`size`包含我们需要的内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-22T15:00:59.810

在 Objective-C 或任何具有动态分配的语言中，指针的最大优点是您的程序可以处理比您在源代码中发明的名称更多的项目。

# python - 配置passenger_wsgi.py 以使用Pelican

> ID：14991613
> 
> 赞同：2
> 
> 时间：2013-02-20T23:04:59.230
> 
> 标签：python, passenger, pelican

我一直在尝试配置 python 环境以使用 Pelican 进行静态博客。这是 Django 的常见设置，所以我想知道我需要输入什么才能开始使用 Pelican。

```
import os, sys
sys.path.append('/path/to/your/DjangoProjects')
os.environ['DJANGO_SETTINGS_MODULE'] = 'example_com.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

顺便说一句，我的服务器在此设置下工作正常。

```
def application(environ, start_response):
start_response('200 OK', [('Content-type', 'text/plain')])
return ["Hello, world!"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T08:17:01.757

Pelican 是一个静态博客生成器，**静态**意味着一旦生成，内容存储在文件中，不会改变。Tt 与 Django 不同，Django 会在用户访问您的博客时动态生成内容。

因此，您所要做的就是将文件从`output`文件夹复制到 Web 服务器的文档根文件夹，例如`apache`或`nginx`.

或者，您只需输入`python -m SimpleHTTPServer`终端，即可访问您的博客`http://localhost:8000/`。（`make serve`在你的鹈鹕博客文件夹中执行也会这样做。）。这对开发很有效。

或者，您可以使用 github 为您的博客提供服务，请参阅：[http ://docs.getpelican.com/en/3.1.1/tips.html#publishing-to-github](http://docs.getpelican.com/en/3.1.1/tips.html#publishing-to-github)

# java - 为什么序列版 UID 使用随机数？

> ID：14991614
> 
> 赞同：13
> 
> 时间：2013-02-20T23:05:11.283
> 
> 标签：java, serialization

编辑：随机我的意思是一个大的计算数字，对我们作为开发人员来说没有语义意义

在实现 Serializable 接口时，它的最佳实践是指定串行版本 UID 非常重要。在许多地方，我经常看到使用随机数。例如

有效的 Java（第 2 版）第 312 页：

```
private static final long serialVersionUID = 234098243823485285L; 
```

来自 Java 6 中的 String 类：

```
private static final long serialVersionUID = -6849794470754667710L; 
```

来自 Java 6 中的 ArrayList 类：

```
private static final long serialVersionUID = 8683452581122892189L; 
```

等等。甚至 eclipse 也提供了生成这些随机数的选项（尽管主要的默认值似乎是生成一个 serialVersionUID `1L`）

为什么要使用随机数？当它像任何明智的修订控制一样发生变化时，从 1L 开始并增加到 2L 不是更有意义吗？我能想到的唯一一次使用看似随机的数字是，如果您没有指定一个 serialVersionUID 开头并且现在想要这样做（它将您与运行时自动生成的版本联系起来以提供向后兼容性支持）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T23:14:16.797

这些“随机”数字可能是*按照*[Java 对象序列化规范](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serialTOC.html)以“当前”形式自动为类生成的数字......其中“当前”是“`serialVersionUID`第一次声明时的当前”。

这将允许以前序列化的数据仍然被*反序列*化- 同时向前更明确地声明未来的重大变化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T23:17:05.317

它们几乎肯定*不是*随机数，而是`serialver`工具的输出。

# wcf - 常量“System.ServiceModel.EndpointNotFoundException：没有端点监听 " 错误

> ID：14991615
> 
> 赞同：5
> 
> 时间：2013-02-20T23:05:14.800
> 
> 标签：wcf, endpoint, wcf-endpoint

我有许多`WCF`服务，在`IIS`专用服务器上运行。这些服务有他们的客户。总而言之，它可以工作，但是每当我在客户端级别查找日志时，我通常会看到以下类型的错误：

```
System.ServiceModel.EndpointNotFoundException: There was no endpoint listening at <Service URL> that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. 

---> System.Net.WebException: Unable to connect to the remote server 
---> System.Net.Sockets.SocketException: A socket operation was attempted to an unreachable network <Service IP>:80
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
   at System.Net.HttpWebRequest.GetRequestStream()
   at System.ServiceModel.Channels.HttpOutput.WebRequestHttpOutput.GetOutputStream()
   --- End of inner exception stack trace ---

Server stack trace:
   at System.ServiceModel.Channels.HttpOutput.WebRequestHttpOutput.GetOutputStream()
   at System.ServiceModel.Channels.HttpOutput.Send(TimeSpan timeout)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.SendRequest(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

但在那之后，同样的程序将发送可以正常工作的请求。

这是`WCF`服务的配置：

```
<netTcpBinding>
        <binding   name="config" closeTimeout="0:5:0" openTimeout="0:5:0" sendTimeout="0:5:0" receiveTimeout="0:5:0"
                 maxBufferPoolSize="8388608" maxBufferSize="8388608" maxReceivedMessageSize="8388608" maxConnections="8388608">
          <readerQuotas maxArrayLength="8388608" maxNameTableCharCount="8388608" maxStringContentLength="8388608"/>
          <security mode="None"/>
        </binding>
</netTcpBinding> 
```

和

```
<basicHttpBinding>
        <binding  name="config2" closeTimeout="0:5:0" openTimeout="0:5:0" sendTimeout="0:5:0" receiveTimeout="0:5:0"
                 maxBufferPoolSize="838860800" maxBufferSize="838860800" maxReceivedMessageSize="838860800">
          <readerQuotas maxArrayLength="838860800" maxNameTableCharCount="838860800" maxStringContentLength="838860800"/>
          <security mode="None"/>
        </binding>
</basicHttpBinding> 
```

* * *

服务行为：

```
<behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="false"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="838860800"/>
</behavior> 
```

我认为同时连接的数量可能在某个地方存在限制。或者可能是`IIS`设置中的某些内容或`WCF`服务配置中的某些内容。但我找不到什么和在哪里。

此外，`NetTcpBinding`配置有一个属性`MaxConnection`，但`basicHttpBinding`没有。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-23T15:38:36.693

以下是我自己的 Web.config 的解决版本（适合我的项目）。可以从以下工作示例中挑选有用的提示。——苏杰扬迪伦

```
 <service name="WelcomeSOAPXMLService">
    <endpoint address="http://localhost:16672/Service.svc" binding="basicHttpBinding"  contract="IWelcomeSOAPXMLService"/> 
```

# php - PHP 解析错误：语法错误，意外的 '}'

> ID：14991619
> 
> 赞同：-2
> 
> 时间：2013-02-20T23:05:39.407
> 
> 标签：php, post, if-statement

好的，我在几年不使用 PHP 后返回到 PHP，我正在尝试对 $_POST 变量进行简单检查。

我有：

```
if(isset($_POST['partydate'])) { $partydate = $_POST['partydate'] } else { $partydate = "No Date Selected" }; 
```

这是该行中唯一的内容，但是当页面运行时我不断收到以下信息：

```
Parse error: syntax error, unexpected '}' in C:\xampp\htdocs....... on line 3 
```

我在这里忽略的明显非常简单的事情是什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:08:22.430

单行代码不利于代码的可读性。如果显示得更好，您的代码将变为：

```
if (isset($_POST['partydate'])) {
    $partydate = $_POST['partydate']
}
else { 
    $partydate = "No Date Selected"
}
; 
```

如您所见，您的 if 和 else 块中缺少分号。正确的代码是：

```
if (isset($_POST['partydate'])) {
    $partydate = $_POST['partydate'];
}
else { 
    $partydate = "No Date Selected";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:10:05.140

`if`如果您真的想使用单线，请使用三元：

```
$partydate = isset($_POST['partydate']) ? $_POST['partydate'] : "No Date Selected"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:08:05.967

试试这个大小，适当放置“;”

```
if(isset($_POST['partydate'])) { 
    $partydate = $_POST['partydate'];
} else { 
   $partydate = "No Date Selected";

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:08:45.920

你错过了两个

> ;

在分配字符串后尝试以下代码：

```
if(isset($_POST['partydate'])) { 
      $partydate = $_POST['partydate']; 
} else { 
     $partydate = "No Date Selected"; 
}; 
```

# html - 添加高度后的文本溢出容器：自动到容器

> ID：14991622
> 
> 赞同：0
> 
> 时间：2013-02-20T23:05:45.633
> 
> 标签：html, css

我有一个网页，其中文本溢出容器 div，即使在应用`height:auto;`到包含 div 之后也是如此。页面的组成如下所示：

```
<html>
<head>
<body>
<div id="wrapper"> 

    <div id="inner_wrapper">

        <div id="content_left">
                <div class="main_content_text">
                      Overflowing text
                </div><!--end of main_content_text-->
        </div><!--end of content_left-->

        <div id="content_right">
        </div><!--end of content_right-->

    </div><!--end of inner_wrapper-->
 </div><!--end of wrapper-->
 </body>
 </html> 
```

我使用的 CSS 如下所示：

```
#inner_wrapper{
width: 100%;
background-color: white;
min-height: 900px;
height: auto;
margin: 0px auto;
  }

#content_left{
padding: 10px;
margin: 10px 10px 30px 20px;
width: 57%;
min-height: 300px;
float: left;
 }

.main_content_text{
width: 625px;
height: auto;
font-weight: normal;
font-family: 'Source Sans Pro','Ubuntu Light','Ubuntu Condensed',Ubuntu,Tahoma,Arial,sans-serif;
font-size: 15px;
line-height: 20px;
margin-top: 30px;
padding-bottom: 10px;
} 
```

我正在应用它的页面在这里[网站](http://types4u.org/blog/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:39:15.793

设置`overflow:auto`你需要的 div ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:51:03.140

添加以下规则

> #inner_wrapper:after { 内容: " "; 显示：块；溢出：隐藏；明确：两者；高度：0；}

它将清除浮动，无需添加其他`<div class="clear">`元素

# php - 验证唯一的用户名或电子邮件

> ID：14991624
> 
> 赞同：0
> 
> 时间：2013-02-20T23:05:51.337
> 
> 标签：php, pdo, unique-constraint

我有两个文件，一个包含 reg_db 类，在另一个我调用 reg_db 的对象。我希望它检查数据库中的用户输入和列，以确保它只是唯一值。如果停止代码不是唯一的，则带有消息。现在我什么也没得到， var_dump($conn -> uniqueInput($_POST['reg_username'], ' `username`')); 输出 NULL。我希望代码灵活，并且我可以设置哪个用户输入来检查数据库中的哪个列。

```
//reg_db class
class reg_db{
    private $input;
    private $column;

    public function __construct(){

    }

    public function uniqueInput($reg_input, $reg_column){
        $this -> input = $reg_input;
        $this -> column = $reg_column;
        $pdo = new PDO('mysql:host=localhost;dbname=fail once again;', 'root', '');
        $db_user = $pdo -> prepare('SELECT :column FROM `users` WHERE :column = :input');
        $db_user -> bindParam(':input', $this -> input, PDO::PARAM_STR);
        $db_user -> bindParam(':column', $this -> column, PDO::PARAM_STR);
        $db_user -> execute();
        $row = $db_user -> fetch(PDO::FETCH_ASSOC);
        if($this -> input == $row[$this -> column]){
            die($this -> column . ' ' . $this -> input . ' is already taken');
        }
    }
}

//object of reg_db
$conn = new reg_db();
$conn -> uniqueInput($_POST['reg_username'], '`username`'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:47:35.820

您可以通过用户名获取用户并检查它是否不是您正在更新的用户。

```
class reg_db{
    private $pdo;

    public function __construct(){
        $this->pdo = new PDO('mysql:host=localhost;dbname=fail once again;', 'root', '');
    }

    public function getUserBy($reg_column, $reg_input){
        $db_user = $this->pdo->prepare("SELECT * FROM `users` WHERE `$reg_column` = :input");
        $db_user->bindParam(':input', $reg_input, PDO::PARAM_STR);
        $db_user->execute();
        return $db_user->fetch(PDO::FETCH_OBJ);
    }
}

$conn = new reg_db();
$user = $conn->getUserBy('username', $_POST['reg_username']);
if ($user && $user->id != $_POST['reg_id']) {
    die("Username '{$_POST['reg_username']}' is already taken");
} 
```

# java - 接口参考

> ID：14991626
> 
> 赞同：-4
> 
> 时间：2013-02-20T23:05:53.650
> 
> 标签：java, interface

我不确定如何解决这个问题。这是我的代码：

```
public interface Stuff {
    public String description();
    public double weight();
}

class Bag implements Stuff {
    public String description() {
       return "bag of";
    }
    public double weight() {
       return 10.50;
    }
}

class StuffWrapper implements Stuff {

    Stuff item;

    public StuffWrapper(Stuff item) {
        this.item = item;
    }

    public String description() {
        return item.description();
    }

    public double weight() {
        return item.weight();
    }
}

class Material extends StuffWrapper {

    String material;
    double weight;

    public Material(Stuff item, String material, double weight) {
        super(item);
        this.material = material;
        this.weight = weight;
    }

    public String description() {
        return item.description() + " :" + material+ ":";
    }

    public double weight() {
        return item.weight() + weight;
    }
} 
```

然后我有这个：

```
Stuff icStuff = new Bag();
icStuff = new Material(icStuff, "leather", 10.30);
icStuff = new Material(icStuff, "plastic", 20.50);
System.out.println(icStuff.description() + Double.toString(icStuff.weight())); 
```

哪个输出

```
bag of :leather: :plastic:41.3 
```

在完成所有这些之后，如果我希望 icStuff 不再引用它：

```
icStuff = new Material(icStuff, "plastic", 20.50); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:08:27.370

将它分配给其他东西，或 null，或任何你想要它引用的东西

```
icStuff = null;
icStuff = Somethingelse; 
```

# php - 如何在 php 文件中使用 $.get 在 javascript 中提取两个变量

> ID：14991627
> 
> 赞同：1
> 
> 时间：2013-02-20T23:05:55.720
> 
> 标签：php, javascript, jquery, mysql

我有一个变量，我在用户按下按钮 (artist_id) 时检索该变量，我已成功获得该变量。我想使用这个艺术家 ID 来查找我在数据库中的艺术家姓名。到目前为止，我一直未能成功将艺术家姓名作为变量导出到 javascript。

这是javascript/jquery：

```
<script>
$(function() {
  $( "#dialog-modal" ).dialog({autoOpen: false, height: 250, width: 400, modal: true});

  $( "#opener" ).click(function() {
                       $( "#dialog-modal" ).dialog( "open" );

                       $.get('/like_artist.php', {artist_id : $(this).data('artist_id'), stage_name : $stage_name}, function(data) {
                             alert("Data Loaded: " + data.artist_id);

                                                  var text = '';
                                                  var artistId = data.artist_id;
                                                  var stage_Name = data.stage_name;

                                                  text = 'You have liked ' + artistId + stage_Name;
                                                  $('#dialog-modal').text(text);

                             }, "json");

        });

  });
</script> 
```

这是php（like_artist.php）：

```
<?php 

session_start();
require_once "database.php";
db_connect();
require_once "auth.php";
$current_user = current_user();
include_once("config.php");

    $artist_id = $_GET['artist_id'];

    $query_two = "SELECT stage_name FROM artists WHERE id='.$artist_id.'";
    $stage_name = mysql_fetch_row(mysql_query($query_two));
    $stage_name = $stage_name[0];

    echo json_encode(array('artist_id' => $artist_id));

   echo json_encode(array('stage_name' => $stage_name));

    $user_id = $current_user['id'];

    $query = "INSERT INTO `user_artists`
    (`artist_id`, `user_id`)
    VALUES
    ('$artist_id', '$user_id')";

    $result = mysql_query($query);

?> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:10:46.497

您想使用 JSON 将您的信息捆绑到您的 PHP 代码中，然后使用 JavaScript 对其进行解析：

[http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP](http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP)

附带说明一下，您还应该考虑使用准备好的语句进行查询。

编辑：这是一个更好的链接，显示一个简单的演示：

[http://www.caveofprogramming.com/php/php-json-an-example-javascript-json-client-with-php-server/](http://www.caveofprogramming.com/php/php-json-an-example-javascript-json-client-with-php-server/)

# imacros - 使用 iMacros 从网站中提取数据

> ID：14991628
> 
> 赞同：0
> 
> 时间：2013-02-20T23:05:56.760
> 
> 标签：imacros

我对 iMacros 真的很陌生，但似乎对它的工作原理有基本的了解。但是，我有两个问题似乎无法解决。iMacros 加载自可执行服务，该服务在需要时运行以获取信息。提取数据后，服务将获取数据并将其写入服务器 C 驱动器上的文件。直到大约一个月前，这一直运行良好。亚马逊改了网站，现在无法让脚本配合。解决此问题的所有帮助将不胜感激。

1.  该脚本不提取文本，并且
2.  每次运行脚本后都会打开一个新的 iMacros 浏览器。

我研究了互联网，以多种不同的方式操作脚本，我使用了记录选项，以及创建脚本以提取数据的向导。我不确定我错过了什么。我的脚本如下。

```
VERSION BUILD=7401598
TAB T=1
URL GOTO=https://sellercentral.amazon.com/gp/fba/revenue-calculator/index.html/ref=au_xx_cont_xx?ie=UTF8&lang=en_US
WAIT SECONDS=10
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:search-form ATTR=ID:search-string CONTENT={{Asin}}
WAIT SECONDS=10
TAG POS=1 TYPE=BUTTON ATTR=ID:search-products
WAIT SECONDS=10
TAG POS=1 TYPE=BUTTON ATTR=ID:update-fees-link
WAIT SECONDS=10
TAG POS=1 TYPE=SPAN ATTR=TXT:Order<SP>Handling
WAIT SECONDS=10
TAG POS=1 TYPE=SPAN ATTR=TXT:Pick<SP>&<SP>Pack
WAIT SECONDS=10
TAG POS=1 TYPE=SPAN ATTR=TXT:Weight<SP>Handling
WAIT SECONDS=10 
```

![亚马逊 FBA 计算器](../Images/bed73f7433e40fb73e07e636b6ec0a9a.png)

我需要提取的文本是订单处理、拣货和包装、重量处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:32:08.300

您应该尝试在命令之后放置 EXTRACT=TXT。还要检查页面的 html 并在记录不起作用时发出命令。例如，如果您在页面上有一个链接，这将是它的 HTML 代码。

```
<a href="www.somestuff.com">click me</a> 
```

iMacros 从中提取链接和文本。

```
TAG POS=1 TYPE=A ATTR=HREF:www.somestuff.com EXTRACT=TXT

TAG POS=1 TYPE=A ATTR=HREF:www.somestuff.com EXTRACT=HREF 
```

几乎没有其他变化，但这是主要部分。在您的情况下，这将是正确的代码。

```
TAG POS=1 TYPE=BUTTON ATTR=ID:search-products EXTRACT = TXT
WAIT SECONDS=10
TAG POS=1 TYPE=BUTTON ATTR=ID:update-fees-link EXTRACT = TXT
WAIT SECONDS=10
TAG POS=1 TYPE=SPAN ATTR=TXT:Order<SP>Handling EXTRACT = TXT
WAIT SECONDS=10
TAG POS=1 TYPE=SPAN ATTR=TXT:Pick<SP>&<SP>Pack EXTRACT = TXT
WAIT SECONDS=10
TAG POS=1 TYPE=SPAN ATTR=TXT:Weight<SP>Handling EXTRACT = TXT
WAIT SECONDS=10 
```

试试看，请为此使用 iMacros FireFox 插件。

编辑：

您可以在 JavaScript 中声明一个抓取宏。

```
var macroScrape;

macroScrape ="CODE:";
macroScrape +="TAG POS=1 TYPE=BUTTON ATTR=ID:search-products EXTRACT = TXT";

iimPlay(macroScrape)
var text=iimGetLastExtract();

alert(text); 
```

我在一次宏中只使用一次 EXTRACT 命令。如果我需要更多信息，我会在上面的示例中使用更多声明为变量的宏代码。如果您知道如何使用它，这可能会起作用。

iMacros 支持有时真的很慢。

# javascript - onchange 并不总是有效

> ID：14991630
> 
> 赞同：0
> 
> 时间：2013-02-20T23:06:19.253
> 
> 标签：javascript, mootools, onchange

我正在制作一个表格，我在各个页面中显示“X”行数据......这个“X”行可能是 10、20 或 30，所以我做了这样的选择

```
<select id="lala" name="lal">
    <option value="10">10</option>
    <option selected="selected" value="20">20</option>
    <option value="30">30</option>
</select> 
```

我的脚本（我正在使用 mootools）是这个

```
 window.addEvent('domready', function(){
    $('lala').addEvent(
   'change', function() { 
   alert('Has cambiado el campo select');
   }); 
   }); 
```

我的问题是该事件在第一页和最后一页中不起作用，但在其余页面中起作用……例如：我有 10 页，在第 1 页和第 10 页中，事件什么也不做，在第 2 页和第 9 页中起作用。 ...

注意：对不起我的英语不好

编辑：这是我的桌子（一部分但很重要）

```
 <table id="rounded-corner" width="100%">
        <thead>
            <tr>
                <th class="rounded-r">Dia <img class="difcursor" src="Imagenes/<?php echo $a ?>.png" id="ordendia" /></th>
                <th>Hora</th>
                <th>Desde <img class="difcursor" src="Imagenes/<?php echo $b ?>.png" id="ordensrc" /></th>
                <th>Destino <img class="difcursor" src="Imagenes/<?php echo $c ?>.png" id="ordendst" /></th>
                <th>Estado <img class="difcursor" src="Imagenes/<?php echo $d ?>.png" id="ordenest" /></th>
                <th class="rounded-l">Duracion <img class="difcursor" src="Imagenes/<?php echo $e ?>.png" id="ordendur" /></th>
                </tr>
        </thead> 
```

```
$consulta2 = "SELECT * FROM table ORDER BY $bot $orden LIMIT $g, $cantm";
    $result2 = $dbh->prepare($consulta2);
    $result2->execute();

foreach ($result2 as $valor) {
             $separar = explode(' ',$valor['calldate']);
             $dia = explode('-',$separar[0]);
             switch ($valor['disposition']){
                case "ANSWERED":
                    if ($valor['lastapp']=="VoiceMail"){
                        $estado="Buzon de Voz";
                        }
                    else{
                        $estado="Contestado";
                        }
                    break;
                case "NO ANSWER":
                    $estado="No Contestado";
                    break;
                case "BUSY":
                    $estado="Ocupado";
                    break;
                }
                $minutos = 0;
                $horas = 0;
                while ($valor['duration'] > 60){
                    $minutos++;
                    $valor['duration'] -= 60;
                }
                while ($minutos > 60){
                    $horas++;
                    $minutos -=60;
                }
                if ($valor['duration'] < 10){
                    $segundos = "0".$valor['duration'];
                }
                else { 
                    $segundos = $valor['duration']; 
                }
                if ($minutos < 10){
                    $minutos = "0".$minutos;
                }
                if ($horas < 10){
                    $horas = "0".$horas;
                }

            ?>

            <tr>
            <td><?php echo "$dia[2]-$dia[1]-$dia[0]"; ?></td>
            <td><?php echo "$separar[1]"; ?></td>
            <td><?php echo "$valor[src]"; ?></td>
            <td><?php echo "$valor[dst]"; ?></td>
            <td><?php echo "$estado"; ?></td>
            <td><?php echo "$horas : $minutos : $segundos"; ?></td>
            </tr>
  <tfoot>
          <tr>
                <td colspan=5 class="rounded-foot-left"><a href="lrecibidas.php?call=<?php echo $opcion; ?>&bot=<?php echo $bot; ?>&orden=<?php echo $orden; ?>&bot2=primera&pag=<?php echo $act; ?>&cantm=<?php echo $cantm; ?>"><?php echo $imag; ?></a>
                                                        <a href="lrecibidas.php?call=<?php echo $opcion; ?>&bot=<?php echo $bot; ?>&orden=<?php echo $orden; ?>&bot2=atras&pag=<?php echo $act; ?>&g=<?php echo $g; ?>&cantm=<?php echo $cantm; ?>&g=<?php echo $g; ?>"><?php echo $imag2; ?></a>
                                                         Pagina <?php echo $act ?>/<?php echo $cantp ?>
                                                        <a href="lrecibidas.php?call=<?php echo $opcion; ?>&bot=<?php echo $bot; ?>&orden=<?php echo $orden; ?>&bot2=adelante&pag=<?php echo $act; ?>&g=<?php echo $g; ?>&cantm=<?php echo $cantm; ?>"><?php echo $imag3; ?></a>
                                                        <a href="lrecibidas.php?call=<?php echo $opcion; ?>&bot=<?php echo $bot; ?>&orden=<?php echo $orden; ?>&bot2=ultima&pag=<?php echo $act; ?>&cantm=<?php echo $cantm; ?>&g=<?php echo $g; ?>"><?php echo $imag4; ?></a>
                </td>
                <td colspan=2 class="rounded-foot-right">
                <form>  
                    <select id="lala" name="lal">
                      <option value="10">10</option>
                      <option selected="selected" value="20">20</option>
                      <option value="30">30</option>
                    </select>
                </form> 
            </td>

          </tr>
        </tfoot>
    </table> 
```

这些图像是从一个页面到另一个页面的箭头（如果有人知道如何在不使用 URL 的情况下将变量从 php 传递到 JS，我全神贯注 :)）问题是我正在使用 javascript 来订购表格我想要，并且适用于所有页面...

做分页我用这个：

```
$result = $dbh->query("SELECT count(*) AS cantidad FROM table");
    $row = $result->fetch(PDO::FETCH_ASSOC);
    while ($row["cantidad"]>$cantm){
    ++ $cantp;
    $row["cantidad"]-=$cantm;
    }
    ++ $cantp;
    switch ($bot2){
        case "primera":
            $g = 0;
            $act = 1;
        break;

        case "atras":
            $g -= $cantm;
            $act -= 1;
        break;

        case "adelante":
            $g += $cantm;
            $act += 1;
        break;

        case "ultima":
            $aux = $cantp - 1;
            $g = $aux * $cantm;
            $act = $cantp;
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:23:37.040

我发现了问题....现在一切都很好..这是我的问题“ `<?php echo $imag2; ?>`”在 $imag2（和其他 3 个 $imag）我有“ `<img class="difcursor" src="Imagenes/adelante.png" id="adelante" />`”我改变了这个，现在我没有问题了......总有一天我会明白为什么....（当我使用 php 超过 2 个月和使用 JS 超过 2 周时）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T23:34:28.877

试试 $('#lala')。我想你正在使用 jQuery。$('#lala') 表示“选择 id 为 'lala' 的元素”。$('lala') 试图获取文档中的所有元素 <lala> ，当然这些元素是不存在的。

# encryption - 没有 base 64 编码的 TripleDES：给定最终块未正确填充

> ID：14991632
> 
> 赞同：0
> 
> 时间：2013-02-20T23:06:22.057
> 
> 标签：encryption, encoding, tripledes

我正在尝试使用 TrippleDES 算法加密和解密字符串，而不使用 Base64 编码（我的应用程序将与具有这些要求的另一个应用程序通信）。当我使用 Base64 编码/解码测试东西时，一切都运行良好，但是当我切换到纯文本样式（比如我调用的应用程序需要）时，一切都坏了。

我读过这篇文章[Given final block not proper padded](https://stackoverflow.com/questions/8049872/given-final-block-not-properly-padded)，这说明解码时密钥错误，但这不可能，因为这些行实际上为密钥和转换传递了相同的变量：

```
ecipher = Cipher.getInstance(transformation);
dcipher = Cipher.getInstance(transformation);
ecipher.init(Cipher.ENCRYPT_MODE, key, iv);
dcipher.init(Cipher.DECRYPT_MODE, key, iv); 
```

另外，我打印了编码字符串和数组的长度，它们的长度是 8 的倍数。

我得到的输出是：

```
originalText: Abcdefgh
number of bites: 16
cryptText: d4167d9e2b3b1b2d1f940bc45099da0a
cryptText.length: 32
cryptText.getBytes().length: 32
Exception in thread "main" javax.crypto.BadPaddingException: Given final block not properly padded
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
    at com.sun.crypto.provider.DESedeCipher.engineDoFinal(DashoA13*..)
    at javax.crypto.Cipher.doFinal(DashoA13*..)
Java Result: 1 
```

我的完整代码（本教程稍作修改的版本[http://eternusuk.blogspot.com/2008/09/java-triple-des-example.html](http://eternusuk.blogspot.com/2008/09/java-triple-des-example.html)）：

```
package com.test.encrypt;

import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.DESedeKeySpec;
import javax.crypto.spec.IvParameterSpec;
import org.apache.commons.codec.binary.Hex;

public class TrippleDESTest
{
    private Cipher ecipher;
    private Cipher dcipher;
    private String algorithm = "DESede";
    private String transformation = "DESede/CBC/PKCS5Padding";
    private String keyPhrase = "123456789012345678901234"; //your keyphrase 24 bit
    private SecretKey key;
    private IvParameterSpec iv;
    private static TrippleDESTest cryptoUtil;
    private String ENCODING = "UTF-8";

    public static TrippleDESTest getInstance() throws Exception
    {
        if (cryptoUtil == null)
        {
            cryptoUtil = new TrippleDESTest();
        }

        return cryptoUtil;
    }

    private TrippleDESTest() throws Exception
    {
            DESedeKeySpec keySpec = new DESedeKeySpec(keyPhrase.getBytes());
            key = SecretKeyFactory.getInstance(algorithm).generateSecret(keySpec);
            iv = new IvParameterSpec(new byte[8]);
            ecipher = Cipher.getInstance(transformation);
            dcipher = Cipher.getInstance(transformation);
            ecipher.init(Cipher.ENCRYPT_MODE, key, iv);
            dcipher.init(Cipher.DECRYPT_MODE, key, iv);
    }

    public String encrypt(String str) throws Exception
    {
            byte[] utf8 = str.getBytes(ENCODING);    
            byte[] enc = ecipher.doFinal(utf8);                
            System.out.println("number of bites: " + enc.length);    
            return Hex.encodeHexString(enc);
    }

    public String decrypt(String str) throws Exception
    {
            byte[] dec = str.getBytes();
            byte[] utf8 = dcipher.doFinal(dec);    
            return Hex.encodeHexString(utf8);
    }

    public static void main(String[] args) throws Exception
    {
        TrippleDESTest test = TrippleDESTest.getInstance();        
        String originalText = "Abcdefgh";        
        System.out.println("originalText: " + originalText);        
        String cryptText = test.encrypt(originalText);        
        System.out.println("cryptText: " + cryptText);        
        System.out.println("cryptText.length: " + cryptText.length());
        System.out.println("cryptText.getBytes().length: " + cryptText.getBytes().length);        
        System.out.println("decote text: " + test.decrypt(cryptText));

    }
}// end class TrippleDESTest 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T01:11:44.300

您以错误的顺序执行十六进制编码。您需要对密文进行解码，而不是在您的`decrypt`方法中对纯文本进行编码。

# php - 在“YOURLS”网址缩短器上重定向失败

> ID：14991635
> 
> 赞同：0
> 
> 时间：2013-02-20T23:07:08.323
> 
> 标签：php, html, .htaccess, url, yourls

所以我刚刚成功地实现了[YOURLS](http://yourls.org)脚本，或者我是这么认为的。

它成功生成缩短的 URL 并将其添加到[YOURLS](http://yourls.org) url ID 表中，但是当我尝试通过使用新的缩短的 URL 导航到该网站时。我总是在浏览器中收到相同的错误消息。

```
Not Found

The requested URL /4 was not found on this server.

Apache/2.4.3 (Unix) Server at scof.me Port 80 
```

如果您能提供帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:56:10.433

[您的此页面](http://code.google.com/p/yourls/source/search?q=htaccess&origq=htaccess&btnG=Search%20Trunk)上有关于手动创建 .htaccess 文件的信息。

对于 root 安装，文件必须如下所示：

> **案例：您的安装在根目录下**
> 
> 如果您的根 URL 是[http://www.example.com/](http://www.example.com/)，根目录中的 .htaccess 文件必须是这样的：
> 
> ```
> # BEGIN YOURLS
> <IfModule mod_rewrite.c>
> RewriteEngine On
> RewriteBase /
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteCond %{REQUEST_FILENAME} !-d
> RewriteRule ^(.*)$ /yourls-loader.php [L]
> </IfModule>
> # END YOURLS 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T08:49:42.323

我在 amazon aws ubuntu 12 上遇到了同样的问题，并在这里解决了：

[https://askubuntu.com/questions/48362/how-to-enable-mod-rewrite-in-apache](https://askubuntu.com/questions/48362/how-to-enable-mod-rewrite-in-apache)

> “如果您打算在 .htaccess 文件中使用 mod_rewrite，您还需要通过将 AllowOverride None 更改为 AllowOverride FileInfo 来启用 .htaccess 文件的使用。对于默认网站，请编辑 /etc/apache2/sites-available/default:”

是的，我打算在 .htacess 中使用 mod_rewrite 然后..

然后你必须重新启动apache。

# jquery - 即使没有使用 Uploadify 选择文件，也运行服务器脚本

> ID：14991636
> 
> 赞同：0
> 
> 时间：2013-02-20T23:07:19.537
> 
> 标签：jquery, uploadify

我使用带有表单的 Uploadify flash 版本来选择性地上传文件。它工作正常，除非用户在队列中没有文件，然后上传脚本不会被命中。无论是否选择了要上传的文件，我都想点击它。任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:22:36.290

我通过检查队列中是否有文件来做到这一点。如果有，执行uploadify 并返回false 给.submit()。如果没有文件，则返回 true 到 .submit()

```
$('#file-upload-form').submit(uploadFiles);

uploadFiles = function(event){

        //check if files in the queue, if so, execute uploadify and return false
        if(checkIfFile()){
          $('#uploadify-button-wrapper').uploadify("upload", "*");  
          return false;
        }    

// no file so return true
return true;
} 
```

# string - 这个字符串操作代码的空间复杂度是多少？

> ID：14991637
> 
> 赞同：6
> 
> 时间：2013-02-20T23:07:22.940
> 
> 标签：string, algorithm, complexity-theory

这段代码来自Cracking the Coding interview book。

```
public static boolean isUniqueChars2(String str) {
    boolean[] char_set = new boolean[256];
    for (int i = 0; i < str.length(); i++) {
        int val = str.charAt(i);
        if (char_set[val]) return false;
        char_set[val] = true;
    }
    return true;
} 
```

作者提到，

> 时间复杂度是O(n)，其中n是字符串的长度，空间复杂度是O(n)。

我理解时间复杂度是 O(n) 但我不明白空间复杂度怎么可能是 O(n)

我的想法：无论输入（str）大小是多少，char_set 都将保持一个大小为 256 的数组。即使“str”的长度是 100,000，char_set 仍然是一个 256 元素的数组。所以我想，由于这个函数的内存需求不会随着输入的大小而改变并且保持一个常数256，所以空间复杂度是常数，即O(1)。

有人可以解释一下，如果我错了（为什么？）

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-08T23:11:53.107

该示例中的空间复杂度为 O(N)，因为字符串是作为参数接收的；我们并不确切地知道它的大小，并且考虑到空间复杂度对算法时间内存消耗的影响，它会根据“str”的大小而有所不同。因为应该使用N。

例如，如果我有完全相同的情况：

```
public void someMethod(int a[], char s, int w){...} 
```

由于“a[]”（我们不知道它的大小），它将是 O(N)。

另一方面：

```
public void someMethod(char s, int a, int x){...} 
```

它将是 O(1)（常数）。由于我们已经知道为必要属性分配的内存。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:00:11.003

这有点复杂，我认为：

在遇到某个字符两次之前的最大迭代次数是构建字符串的字母表的大小。

如果这个大小是有限的，则时间复杂度为 O(1)，如果不是，则布尔数组的大小不能是有限的，因此，空间复杂度将为 O(n)。

# c++ - C++ HTTP 请求

> ID：14991639
> 
> 赞同：0
> 
> 时间：2013-02-20T23:07:24.533
> 
> 标签：c++, http, request

我现在一直在搜索有关 HTTP 请求的信息，但由于只部分解释了论坛的答案，因此无法到达任何地方。到目前为止，我看到的最有帮助的是 stackoverflow： [http-get-request-in-c](https://stackoverflow.com/questions/14004550/http-get-request-in-c)据 我所知，没有外部库就无法轻松完成。任何人都可以帮助处理一般的 HTTP 请求以及程序与互联网的连接吗？也许发布您第一次看到它的链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T00:56:24.407

对我来说，在 C++ 中执行 http 的最简单方法是使用**Boost.Asio**。它是一个负责连接服务器/客户端的外部库。

您应该查看他们的 c++ 示例/教程：[HTTP Client, HTTP Server, HTTP Server 2, HTTP Server 3, HTTP Server 4](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)。您可以在此处看到一些**http**通信**client-side**和**server-side**的示例。

**Boost Library**非常接近 C++。乍一看可能很吓人，但确实值得努力学习。

# twitter-bootstrap - 图像没有排列在它们应该在的位置？

> ID：14991642
> 
> 赞同：0
> 
> 时间：2013-02-20T23:07:41.783
> 
> 标签：twitter-bootstrap, fluid-layout

我四处寻找答案，但似乎找不到任何东西（也许我使用了错误的关键字）。我正在将 Bootstrap 与以下网格系统一起使用。22 个网格，每个 47px 宽，每个网格之间的边距为 0。这意味着对于每 4 个网格，我总共有 188px。每 4 个网格包含两个图像，一个 1 像素的垂直条和一个 187 像素的徽标。

这应该足以并排显示两个图像，但徽标不断被踢下。如果我放在 `class="pull-left"`竖条上，徽标将回到它们应该在的位置，直到我缩小浏览器窗口的最小量以使流体行调整大小。

起初我认为这可能只是列的容差/舍入问题，所以我将图像缩小了 5px，但这并没有改变任何东西。关于可能导致此问题或如何解决此问题的任何想法？唯一适用于此的 CSS 是标准`bootstrap.css`样式表和 1040 像素的最大正文宽度。

```
<div class="row-fluid ">
    <div class="span4 offset1">
        <img src="img/verticalBar.jpg">
        <img src="img/logo1.jpg">
    </div>
    <div class="span4">
        <img src="img/verticalBar.jpg">
        <img src="img/logo2.jpg">
    </div>
    <div class="span4">
        <img src="img/verticalBar.jpg">
        <img src="img/logo3.jpg">
    </div>
    <div class="span4">
        <img src="img/verticalBar.jpg">
        <img src="img/logo4.jpg">
    </div>
    <div class="span4">
        <img src="img/verticalBar.jpg">
        <img src="img/logo5.jpg">
        <img src="img/verticalBar.jpg">
    </div>
</div> 
```

这是页面当前的样子。红色箭头指示徽标的位置。 ![在此处输入图像描述](../Images/72d2e078b045b1166306a1b0c1eba4f7.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T23:15:30.633

尝试将此添加到您的CSS：

```
html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, del, dfn, em, img, ins, kbd, q,      samp, small, strong, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, table, tbody, tfoot, thead, tr, th, td, article, aside, footer, header, nav, section {
  margin:0;
  padding:0;
  border:0;
  outline:0;
  font-size:100%;
  vertical-align:baseline;
  background:transparent;
} 
```

# c# - 抛出异常与 Contract.Requires ?

> ID：14991647
> 
> 赞同：18
> 
> 时间：2013-02-20T23:08:20.567
> 
> 标签：c#, exception, error-handling, code-contracts

我想知道是否应该抛出异常或调用[`Contract.Requires<TException>`](http://msdn.microsoft.com/en-us/library/dd782896.aspx)

例如：

```
public static void Function(String str)
{
    if (str == null) throw new ArgumentNullException("str", "Input string cannot be null.");

    // ...
} 
```

对比

```
public static void Function(String str)
{
    Contract.Requires<ArgumentNullException>(str != null, "Input string cannot be null.");

    // ...
} 
```

由于[`Contract.Requires<TException>`](http://msdn.microsoft.com/en-us/library/dd782896.aspx)不需要`CONTRACTS_FULL`符号，我也可以将其保留在我的发布版本中。

这是我的考虑：

**缺点：**您不能调用自定义异常类型构造函数的重载版本。根本没有办法将额外的参数传递给构造函数。

**Pro：**静态工具支持（例如通知调用者违反合同）。

我应该使用哪一个，在什么样的情况下？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T22:28:18.080

`if-then-throw`CodeContract 用户指南中记录的和之间的基本权衡`Requires<TException>`是如何使用发布位进行构建。

**案例1**：你只用`if-then-throw`，没有`Requires<TException>`。在这种情况下，您无需在 dll/exe 上运行合约工具即可构建发布位。优点是您可以更快地构建，并且没有工具引入错误的风险。第二个优势是团队成员可以选择不使用 CodeContract 工具。缺点是您没有对需求的合同继承，并且您的合同不一定对工具可见（除非您使用`EndContract`）。您可以使用组装模式指定这种情况：自定义参数验证

**案例 2**：您决定始终在您的发布位上运行 CodeContract 工具。这使您可以使用`Requires<TException>`并获得合同的继承，包括接口的检测等。您的合同是干净的并且是工具可识别的。缺点是每个构建代码的人都必须安装 CodeContracts 工具。您可以使用组装模式指定这种情况：合同属性窗格中的标准。

希望这能把事情弄清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T14:40:23.950

我不确定这两种方法之间是否存在任何惊天动地的差异，但我更喜欢合同的原因有两个……

1) 代码更加简洁，因为您在方法的顶部编写了一条语句，显示了该方法所基于的假设。如果违反假设，您不会因为执行而阻塞代码。

2) 当您编写代码时，您将受益于 Visual Studio 获取代码契约，并提示您将要调用的方法期望什么。这可以帮助您确保发送方法有效参数，而无需跳转到方法定义以检查那里的代码。

一旦代码编译并运行，我认为没有任何显着差异。

希望这可以帮助。

# android - Android列表处理

> ID：14991656
> 
> 赞同：1
> 
> 时间：2013-02-20T23:09:18.850
> 
> 标签：android

我的代码有什么问题？当我尝试将名称与上一个名称不同的项目分开时，我的 Android 还会将元素添加到新列表（

```
s = songs.get(0);
lastSong = s.song;
temp_songs.add(s);

for(int i=0; i<songs.size();i++) {
    s = songs.get(i);
    songg = s.song;

    if(songg != lastSong) {
        temp_songs.add(s);
        lastSong = songg;
    }
} 
```

例如，我有一个排序列表：

```
ABC
ABC
ABC
BCD
BCD
CDE 
```

处理新列表（temp_songs）后应该是：

```
ABC
BCD
CDE 
```

但相反，我得到：

```
ABC
ABC
ABC
BCD
BCD
CDE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:13:12.803

尝试这个：

```
 lastSong = "";

   for(int i=0; i<songs.size();i++) {
       s = songs.get(i);
       songg = s.song;

       if(!songg.equals(lastSong)){
           temp_songs.add(s);
           lastSong = songg;
       }
   } 
```

1.  更简单的开始
2.  在 java 字符串中使用 == 或 != 是不对的，.equals 是正确的，在这里阅读更多内容：http: [//www.leepoint.net/notes-java/data/strings/12stringcomparison.html](http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html)

# java - 将 Object 转换为泛型类型时未引发 Invalid ClassCast 异常

> ID：14991657
> 
> 赞同：4
> 
> 时间：2013-02-20T23:09:20.007
> 
> 标签：java, android, generics, casting

我有一个项目，我正在使用很多泛型，但也需要类型安全。由于堆栈跟踪大约有 200 次调用，所以当出现当前错误时，恐怕我无法提供所涉及的完整源代码。我将尝试将其归结为到目前为止我发现的问题并提供一个简短的示例。

首先，有类，持有通用值。每个泛型都实现了 Comparable。这可能是 Long、Boolean - 甚至是实现此接口的自定义类。

每个这样的类都有一个 DatabaseID，它是一个包含某种类型的默认值的枚举条目。**大多数时候，**此 DatabaseId 的默认值与 Holdingclass 的 Generic-Class 类型相同。

像这样的东西：

```
public enum DatabaseId{
   A_LONG_VALUE(0L),
   A_BOOLEAN_VALUE(false),
   A_INTERVAL("");
} 
```

Interval 就是这样一个实现 Comparable 接口的自定义类。但间隔也是上述规则的一个例外。"intervals" 的 Generic-Holding Class 具有 "Interval.class" 的通用类型 T，而持久化 Interval 的 DatabaseValue 将其存储为字符串。喜欢`[5,250]`或`[5]`用于离散值。

现在，在某些时候，我需要“加载”存储在数据库 id 后面的值并将其注入到控股的 CurrentValue 属性中。

由于这是在整个层次结构的“非常”父类上完成的，因此也以通用方式完成：

```
 public void initialize() {
    Database db = Database.getInstance();
    try {
        this.setValue((T) db.get(this.getDatabaseId()));
    } catch (Exception ex) {
        Log.e(LOG_TAG, "Invalid cast while initializing Value Holder.", ex);
        this.setValue(null);
    }
} 
```

对于上面提到的示例，其中持有一个 ValueHoler`Interval.class`并且 DatabaseId id 提供一个`String`，这**显然**会失败。在这一点上，我期待一个异常，因为我正在尝试将`Object`(db.get Delivers `Object`) 转换为通用类型`T`（`Interval`在本例中）。然而，数据库条目的真实类型是`String`.

**但是**：没有抛出异常，所以`setValue(null)`永远不会执行。应用程序一直持续到一个点，该点`ValueHolder.getCurrentvalue()`被调用并用于将其与我期望的相同类型的另一个值进行比较`currentValue`。（`Interval`在这种情况下）

```
this.getCurrentValue().containsInterval(this.getRequiredValue()); 
```

此时，JAVA 注意到“CurrentValue”是一个字符串，并抛出一个异常：

> java.lang.ClassCastException：java.lang.String 无法转换为 my.namespace.Interval

**实际问题**

我可以很容易地抓住这个场景，像这样：

```
public void initialize() {
    Database db = Database.getInstance();
    try {
        if (this.getValueHolderValueType() == Interval.class){
          //Interval has an constructor for the string represenatation of it                
          this.setValue((T) new Interval((String)db.get(getDatabaseId())); 
        }else{
            this.setValue((T) db.get(this.getDatabaseId()));
        }
    } catch (Exception ex) {
        Log.e(LOG_TAG, "Invalid cast while initializing valueHolder",ex);
        this.setValue(null);
    }
} 
```

但是，如果另一个开发人员出现并实现了一个扩展 Comparable 的新类，他可能不会意识到“手动”转换，并遇到了同样的麻烦。

在写这篇文章时，我找到了一个通知开发人员的解决方案，如下所示：

-首先进行非泛型转换

- 比较两种类型

- 如果无法进行通用转换，则发出通知。

```
 if (this.getValueHolderValueType() == Interval.class){
            this.setValue((T) new Interval((String)db.get(getDatabaseId())));
        }else if (this.getValueHolderValueType() != this.getDatabaseId().getType()){
            Log.e(LOG_TAG, "Invalid cast while initializing ValueHolder. DatabaseId delivers '"+this.getDatabaseId().getType()+"', but valueHolder expects '"+this.getValueHolderValueType()+"'. Maybe you are missing a non-generic-cast right here?");    
        }else{
            this.setValue((T) db.get(this.getDatabaseId()));
        } 
```

**所以唯一没有答案的问题：**

**为什么**不引发异常，当 T 是 type 时，DatabaseID 的 value 是 type并且 db.get 返回`this.setValue((T) db.get(this.getDatabaseId()));` **一个**？`Interval``String``Object`

**为什么**当我尝试访问“错误的类”而不是在进行演员表时抛出异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:26:20.443

因为 Java 泛型是在编译器级别实现的，它将所有内容转换为（或其他绑定）并在*使用*`Object`对象的代码中插入适当的转换，而不是简单地传递它的代码。

 ***编辑**：为了解决您的问题，您可能希望在您的持有人中有一个抽象方法，该方法返回它可以存储的正确类型，并将其与从数据库返回的值的类型进行比较（`==`比较或其他类型） ，如果比较失败，则抛出异常（或执行其他操作）。

**编辑**：例如：

```
Object candidate = db.get(this.getDatabaseId());
boolean canBeStored = this.getStorageType().isInstance(candidate);
... 
```

**编辑**：我看到你已经有了类似的逻辑。为了使其更加面向对象工作，我建议：

```
Object original = db.get(this.getDatabaseId());
T modified = this.adaptObjectToContainer(original);
...

protected T adaptObjectToContainer(Object original) {
    if(this.getValueHolderValueType().isInstance(original)) {
        return (T)original;
    }
    throw new ClassCastException(...);
}

// subclasses may do relevant conversions, throw an exception, etc
protected Interval adaptObjectToContainer(Object original) {
    ...
    if(original instanceof String) {
        return new Interval(original);
    }
    ...
} 
```

理想情况下，为了最小化代码，每个存储类型都可以有一个实用程序类来负责转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:30:07.403

正如在上一个答案中指出的那样， setValue(Object) 由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)而成功。

如果它对您的应用程序有意义，您可以尝试以下方法，其中保留对预期类的引用：

```
class Foo<T> {

 private final Class<T> klass;
 private T value;

 Foo(Class<T> klass) {
  this.klass=klass;
 }

 void setValue(Object obj) {
   value=klass.cast(obj); 
 }
} 
```

然后

```
Foo<Integer> foo = new Foo<Integer>(Integer.class);
foo.setValue("bar");//throws exception 
```

见[Class.cast(Object)](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)*

# c++ - 第一次尝试时循环失败

> ID：14991661
> 
> 赞同：1
> 
> 时间：2013-02-20T23:10:03.890
> 
> 标签：c++

我正在完成一项实验室任务，如果用户想要订购鱼，系统会提示他们输入类型，并输入每磅的价格。在打印报告之前，需要两次提示用户输入鱼的类型和价格。

问题是程序在循环的第一个实例完成之前结束。（代码的编写方式报告上的标题将打印两次，但那是在说明中。）

代码如下，非常感谢任何帮助。

```
#include <iostream> 
#include <iomanip>
#include <string>

using namespace std;

int main()
{
        float price;
    string fishType;
    int counter = 0;

    // Change the console's background color.
    system ("color F0");

    while (counter < 3){

    // Collect input from the user.
    cout << "Enter the type of seafood: ";
    cin >> fishType; // <------ FAILS AT THIS POINT. I GET THE PROMPT AND AT THE                                  "ENTER" IT DISPLAYS THE REPORT

    cout << "Enter the price per pound using dollars and cents: ";
    cin >> price;

    counter++;
    }

    // Display the report.
    cout << "          SEAFOOD REPORT\n\n";
    cout << "TYPE OF               PRICE PER" << endl;
    cout << "SEAFOOD                   POUND" << endl;
    cout << "-------------------------------" << endl;
    cout << fixed << setprecision(2) << showpoint<< left << setw(25) 
        << fishType << "$" << setw(5) << right << price << endl;

    cout << "\n\n";
    system ("pause");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T23:13:29.093

新行字符不会被读取，使用[`std::istream::operator>>(float)`](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)，消耗`price`：

```
cin >> price; // this will not consume the new line character. 
```

在下一次读取期间存在换行符，使用[`operator>>(std::istream, std::string)`](http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt)) 进入`fishType`：

```
cin >> fishType; // Reads a blank line, effectively. 
```

然后打算成为下一个的用户输入`fishType`将被读取（并且失败），`price`因为它不是有效值`float`。

要更正，[`ignore()`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)直到读取`price`. 就像是：

```
cin.ignore(1024, '\n');
// or: cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
```

始终检查输入操作的状态以确定它们是否成功。这很容易实现：

```
if (cin >> price)
{
    // success.
} 
```

如果`fishType`can 包含空格，则 using`operator>>(std::istream, std::string)`不合适，因为它将在第一个空格处停止读取。改用[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
if (std::getline(cin, fishType))
{
} 
```

* * *

当用户输入时，将写入一个换行符`stdin`，即`cin`：

```
鳕鱼\n
1.9\n
三文鱼\n
2.7\n

```

在循环的第一次迭代中：

```
cin >> fishType; // fishType == "cod" as operator>> std::string
                 // will read until first whitespace. 
```

现在`cin`包含：

```
\n
1.9\n
三文鱼\n
2.7\n

```

然后：

```
cin >> price; // This skips leading whitespace and price = 1.9 
```

现在`cin`包含：

```
\n
三文鱼\n
2.7\n

```

然后：

```
cin >> fishType; // Reads upto the first whitespace
                 // i.e reads nothin and cin is unchanged.
cin >> price;    // skips the whitespace and fails because
                 // "salmon" is not a valid float. 
```

# c++ - 基类的weak_ptr，而shared_ptr 是派生类的？

> ID：14991664
> 
> 赞同：8
> 
> 时间：2013-02-20T23:10:13.610
> 
> 标签：c++, templates, inheritance, c++11, shared-ptr

我有一个管理从基类派生的对象的结构`Entity`，但不控制它们的生命周期。我希望这个结构被赋予弱指针，`weak_ptr<Entity>`这样它就可以知道对象是否已在其他地方被破坏。

但是，在共享指针所在的管理结构之外，我希望共享指针更具体`shared_ptr<SpecificEntity>` （SpecificEntity 使用 Entity 作为基类）。

有没有办法做到这一点，或类似的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T23:17:51.100

这是很有可能的。您始终可以将`shared_ptr<Derived>`a`shared_ptr<Base>`隐式转换为 a ，并且对于您拥有的另一个方向`std::static_pointer_cast`和`std::dynamic_pointer_cast`，它会执行您所期望的 - 即您最终会得到一个与原始指针共享所有权的不同类型的新指针。例子：

```
std::shared_ptr<Base> p(new Derived);

std::shared_ptr<Derived> q = std::static_pointer_cast<Derived>(p);

std::shared_ptr<Base> r = q; 
```

或者，更多 C++11 风格：

```
auto p0 = std::make_shared<Derived>();

std::shared_ptr<Base> p = p0;

auto q = std::static_pointer_cast<Derived>(p); 
```

# cuda - 使用 cudaMallocPitch 分配二维数组并使用 cudaMemcpy2D 进行复制

> ID：14991667
> 
> 赞同：2
> 
> 时间：2013-02-20T23:10:41.410
> 
> 标签：cuda

我是 CUDA 的新手，感谢您的帮助，希望您能帮助我。

我需要将二维数组的多个元素存储到一个向量中，然后使用该向量，但是我的代码不能很好地工作，当我调试时，我发现在设备中分配二维数组`cudaMallocPitch`并复制到那个错误数组与`cudaMemcpy2D`. 这是我的代码：

```
#include <stdio.h>
#include <cuda.h>
#include <cuda_runtime.h>
#include <cmath>

#define maxThreads 96

__global__ void extract(int mSize, float* dev_vector, float* dev_matrix, int N)
{
    int idx = threadIdx.x + blockIdx.x * blockDim.x;

    while(idx<N)
    {
        dev_vector[idx] = *(dev_matrix+(mSize*idx+N));
        idx += blockDim.x * gridDim.x;
    }
}

int main()
{
    //CPU variables
    int mSize = 5;
    float* matrix;
    int N = 4; // Vector size
    int i,j;
    float* vector;
    int blocks, threads;

    float* dev_matrix;
    float* dev_vector;

    blocks = 1+((N-1)/maxThreads);
    threads = 1+((N-1)/blocks);

    unsigned long int pitch;
    unsigned long int memsize_vector = N*sizeof(float);
    unsigned long int memsize_matrix = mSize*sizeof(float);

    matrix = new float[memsize_matrix*memsize_matrix];
    vector = new float[memsize_vector];

    //Create 2D array
    for(i=0; i<mSize; i++)
        for(j=0; j<mSize; j++)
        {
            matrix[i+mSize*j] = ((i+1)+(j+1));
        }

    printf("\n");
    for (i=0; i<mSize; i++){
        for(j=0; j<mSize; j++){
            printf("% 1.5f ", matrix[i+mSize*j]);
        }
        printf("\n");
    }
    printf("\n");

    cudaMallocPitch((void **)&dev_matrix, &pitch, memsize_matrix, mSize);
    cudaMalloc((void **)&dev_vector, memsize_vector);

    cudaMemcpy2D(dev_matrix, pitch, matrix, memsize_matrix, memsize_matrix, mSize,
                     cudaMemcpyHostToDevice);

    extract<<<blocks,threads>>>(mSize, dev_vector, dev_matrix, N);
    cudaDeviceSynchronize();

    cudaMemcpy(vector, dev_vector, memsize_vector, cudaMemcpyDeviceToHost);

    printf("Vector values are:\n");
    for(i=0; i<N; i++)
        printf(" % 1.5f ", vector[i]);
    printf("\n");

    cudaFree(dev_matrix);
    cudaFree(dev_vector);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:00:46.197

谢谢大家，亚历克斯我还没有看到，并修复它，谢谢。

talonmies，谢谢你，我的代码工作，你的建议。非常感谢，最后这是我的内核：

```
__global__ void sumreduct(size_t pitch, float* dev_vector, float* dev_matrix, int  columns, int N)
{
int idx = threadIdx.x + blockIdx.x * blockDim.x;
int stride = blockDim.x * gridDim.x;

while(idx<N)
{
    dev_vector[idx] = *(float *)( ((char*)dev_matrix + idx * pitch) + columns);
    idx += stride;
} 
} 
```

关于“size_t”，我使用的是“Unsigned int”，因为 Nsight 向我显示下一个警告：

**类型“size_t”无法解析**

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:40:09.720

这段代码有*很多*问题，包括但不限于在代码中的几个地方交替使用字节数组大小和字大小，使用不正确的类型（注意这`size_t`是有充分理由的），潜在的截断和类型转换问题，和更多。

但核心问题是内核内部的音高内存的寻址，您甚至从未将音高值传递给它。阅读[文档](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g80d689bc903792f906e49be4a0b6d8db)将为`cudaMallocPitch`您提供解决内核内倾斜内存的正确方法。你的内核*可能*看起来像这样：

```
__global__ void extract(size_t mpitch, float* dev_vector, float* dev_matrix, int N)
{
    int idx = threadIdx.x + blockIdx.x * blockDim.x;
    int stride = blockDim.x * gridDim.x;

    while(idx<N)
    {          
        dev_vector[idx] = *(float *)( ((char*)dev_matrix + idx * mpitch) + N );
        idx += stride;
    }
} 
```

[免责声明：从未编译或测试，使用风险自负]。

您将不得不修复主机代码中的所有问题，以反映您所做的任何内核更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:38:56.267

您真的要声明长度为 [memsizeMatrix*memsizeMatrix] 的源矩阵吗？

这将分配 400 个浮点数，或 1600 个字节。这意味着您的源音调已关闭，并且 Memcpy2D 调用失败。

我假设你的意思是说

```
matrix = new float[mSize*mSize]; 
```

# javascript - 在 Three.js 中旋转后沿世界轴平移

> ID：14991669
> 
> 赞同：1
> 
> 时间：2013-02-20T23:10:57.657
> 
> 标签：javascript, three.js

我刚刚开始学习 Three.js 和一般的 3D 编程。我有一个围绕 x 轴“向下”旋转 45 度的相机。当我旋转后平移时，相机仅沿其局部轴移动。我怎样才能让它沿着世界 x 和 z 轴移动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T23:24:31.240

```
camera.position.x += delta;
camera.position.z += delta; 
```

# php - 使用 SSH 导入 SQL

> ID：14991670
> 
> 赞同：1
> 
> 时间：2013-02-20T23:11:06.207
> 
> 标签：php, mysql, sql, linux, ssh

我想通过 ssh 导入一个转储 sql 文件，例如：

```
mysql -hlocalhost -uUSER -pPASS DATABASE < dump.sql 
```

但它实际上覆盖并删除了旧数据库。转储标记为“如果存在则删除表”，但为什么它会删除旧条目？此转储应该将新（唯一）条目添加到数据库中，但它会删除旧的数据库条目。

有没有办法避免这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:36:03.067

> 转储标记为“如果存在则删除表”，但为什么它会删除旧条目？

正是这样`DROP TABLE IF EXISTS`做的；如果表在那里，它与其中的所有行一起被删除（删除）。

创建转储时，您可以添加`--skip-add-drop-table`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:15:21.573

您可以将各种选项传递给 MySQLDump，以便脚本只包含您需要的内容（例如，省略创建表语句并仅插入数据）：[http ://dev.mysql.com/doc/refman/5.1/en/ mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

我认为您特别对 --no-create-info 和 --no-create-db 感兴趣。

如果您需要使用已有的转储，只需手动删除有问题的“DROP TABLE”行。

# c++ - cin 导致 cout 冲洗，在我解开两个流之后

> ID：14991671
> 
> 赞同：1
> 
> 时间：2013-02-20T23:11:07.617
> 
> 标签：c++, iostream

我试图了解 iostreams 关于 tie() 的行为。根据我的发现，以下代码不应向屏幕输出任何内容。

```
 cin.tie(NULL);
    int i;
    cout << "TEST";
    cin >> i;
    while (true); 
```

相反，它应该表现得像

```
 cin.tie(NULL);
    int i;
    cout << "TEST";
    read(0, &i, sizeof(int));
    while (true); 
```

换句话说，当调用 cin 输入时， cout 缓冲区会被刷新，即使流是解开的。我试过用 g++ 4.8.0 和 4.6.3 编译这段代码。我也尝试过调用`cin.tie()`，之后`cin.tie(NULL)`正确返回 NULL，因此不应绑定流。

还有更多我想念的 tie() 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:34:17.957

您没有执行`cout.sync_with_stdio(false);`，因此您`std::cout`与CI/O*同步*，这意味着每个输出都单独并立即发送到 CI/O 库调用，然后受 glibc 的实现定义规则的约束，在您的案子。

快速检查一下，[这个 glibc 手册](http://ftp.gnu.org/old-gnu/Manuals/glibc-2.2.3/html_chapter/libc_12.html)提到

> ...流上的缓冲输出会自动刷新：
> 
> *   每当对任何流的输入操作实际从其文件中读取数据时。

（虽然这听起来并不令人信服，因为还没有从标准输入中读取任何内容。无论如何，`cout.sync_with_stdio(false)`这使得这个`cin.tie(NULL)`测试用例在我的 Linux 上表现得如预期）。

# c# - 如何将枚举传递给父类的静态函数以实例化子类第二部分？

> ID：14991673
> 
> 赞同：2
> 
> 时间：2013-02-20T23:11:12.403
> 
> 标签：c#

[这是对上一个问题](https://stackoverflow.com/questions/14990906/how-to-pass-an-enum-to-a-parent-classs-static-function-to-instantiate-a-child-c)的跟进。这个问题有一个错误（我实际上发布了我当前的解决方案，而不是我正在寻找的更好的解决方案）。

我有 3 节课，`ParentClass`, `ClassA`, `ClassB`. `ClassA`和都是`ClassB`的子类`ParentClass`。我想尝试创建类型的对象`ClassA`或`ClassB`使用某种枚举来识别类型，然后将对象实例化为父类型。我怎样才能动态地做到这一点？请看下面的代码，以及上面写着的部分`//what do I put here?`。谢谢阅读！

公共枚举 ClassType { ClassA, ClassB };

```
public abstract class ParentClass
{
    public static readonly Dictionary<ClassType, Type> Types = 
        new Dictionary<ClassType, Type>{
            {ClassType.ClassA, typeof(ClassA) },
            {ClassType.ClassB, typeof(ClassB) }
        };

    public ParentClass()
    {
        //....
    }

    public static ParentClass GetNewObjectOfType(ClassType type)
    {
        //What do I put here?
    }
}

public class ClassA:ParentClass
{
    //....
}
public class ClassB:ParentClass
{
    //.......
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:15:47.537

您可以使用`Activator`该类轻松完成此操作，尤其是在构造函数没有任何参数的情况下：

`return Activator.CreateInstance(Types[type]);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:22:28.680

重申您的问题：您正在寻找有关如何编写静态工厂方法的建议。

我认为您不需要单独的枚举来完成此操作。这是我放在一起的 LINQPad 脚本（编辑：添加静态常量，使用它们创建演示）

```
void Main()
{
    var a = ParentClass.Create(typeof(ClassA));
    var b = ParentClass.Create(typeof(ClassB));
    var c = ParentClass.Create(ParentClass.ClassAType);
    a.Dump();
    b.Dump();
    c.Dump();
}

public abstract class ParentClass
{
    public static readonly Type ClassAType = typeof(ClassA); 
    public static readonly Type ClassBType = typeof(ClassB);
    public string SomeProp { get; set; }
    protected ParentClass() {}

    public static ParentClass Create(Type typeToCreate)
    {
        // validate that type is derived from ParentClass
        return (ParentClass)Activator.CreateInstance(typeToCreate);
    }
}

public class ClassA:ParentClass {
    public ClassA()
    {
        SomeProp = "ClassA~";
    }

}
public class ClassB:ParentClass
{
    public ClassB()
    {
        SomeProp = "ClassB~";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:31:01.097

如上一个问题所述：

> 反射很慢，经常在不需要的地方使用

Activator.CreateInstance 使用反射来追踪无参数的构造函数。要解决这个问题 - 这不是必需的。父类已经知道它负责创建的所有类型。

* * *

使用静态工厂方法的原因之一是创建子类可能需要大量工作或不同类型的工作。我认为如果你加强你的地图，你会更容易编写静态工厂：

```
public static readonly Dictionary<ClassType, Func<ParentClass>> Types = 
    new Dictionary<ClassType, Func<ParentClass>>{
        {ClassType.ClassA, () => new ClassA(1, 2, 3) },
        {ClassType.ClassB, () => new ClassB("1") }
    };

public static ParentClass GetNewObjectOfType(ClassType type)
{
    Func<ParentClass> maker = Types[type];
    ParentClass result = maker();
    return result;
} 
```

# javascript - 从当前打开的浏览器窗口复制数据并粘贴到另一个程序中？

> ID：14991674
> 
> 赞同：0
> 
> 时间：2013-02-20T23:11:19.677
> 
> 标签：javascript, xml, groovy, soapui

我正在研究一种方法来完成标题所描述的内容。这里有更多细节：

我打开了一个 Internet Explorer 窗口，其中一些字段填充了数据。我打开了一个名为 SoapUI 的程序，我需要用所述数据填充它。当然，我可以手动复制和粘贴，但是我正在运行的测试的性质会使这种方法相当乏味。我正在寻找一种自动化的方法。

SoapUI 有几个活动窗口，我感兴趣的是 XML 请求。我需要使用在同一台机器上的浏览器窗口中打开的数据来填充各种 XML 字段。

这并不像编写一个 Groovy 脚本来解析一个网址的 HTML 那样简单，因为浏览器中的数据是由来自某个硬件的数据动态填充的。据我所知，从字段为空到字段填充数据的时间，URL 不会发生变化。

如果有人有任何想法或可以指出我正确的方向，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:33:15.197

使用 AutoHotKey 是一种选择吗？

您可以让 AHK 转到 URL，等到字段填写完毕，然后按照您手动完成的方式进行复制/粘贴。

# javascript - $.proxy 和原生 js 'call' / 'apply' 有什么区别？

> ID：14991676
> 
> 赞同：9
> 
> 时间：2013-02-20T23:11:28.513
> 
> 标签：javascript, jquery

我相信它们都允许您控制“this”的值，但除此之外，我有点不清楚，到目前为止，Google/SO 并没有多大帮助。任何澄清表示赞赏。我确实找到了这个，但我怀疑它是否能说明整个故事：

> “当我第一次了解 jQuery 的 proxy() 方法时，我觉得有点傻；毕竟 Javascript 已经有了 call() 和 apply() 方法来改变执行上下文。但是，一旦你意识到 jQuery 的 proxy() 方法无论上下文如何，您都可以轻松地 bind() 和 unbind() 事件处理程序，很明显这个方法有多强大。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T23:24:57.170

call/apply 是单次调用。$.proxy 创建了一个永久绑定到某物的新函数：

```
fn.call(foo);  //call once

var otherFn = $.proxy(fn, foo);  // you can call it again later

var otherOtherFn = fn.bind(foo);  // ES5 standard way 
```

作为简化（*非常简化*），`$.proxy`正在创建一个新函数，该函数调用`call`：

```
$.proxy = function(fn, newThis) {
    return function() {
        fn.call(newThis);
    }
} 
```

它类似于 ES5 的[`Function.prototype.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T23:20:30.090

看一下 jQuery 源码：

```
proxy: function( fn, context ) {
    var tmp, args, proxy;

    if ( typeof context === "string" ) {
        tmp = fn[ context ];
        context = fn;
        fn = tmp;
    }

    // Quick check to determine if target is callable, in the spec
    // this throws a TypeError, but we will just return undefined.
    if ( !jQuery.isFunction( fn ) ) {
        return undefined;
    }

    // Simulated bind
    args = core_slice.call( arguments, 2 );
    proxy = function() {
        return fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
    };

    // Set the guid of unique handler to the same of original handler, so it can be removed
    proxy.guid = fn.guid = fn.guid || jQuery.guid++;

    return proxy;
}, 
```

如果你删除缓存代码并让它更短一点，你基本上得到`.apply()`（我想我正确地翻译了切片代码）：

```
proxy: function(fn, context) {
    var args = [].slice.call(arguments, 2);

    return function() {
        return fn.apply(context || this, args.concat([].slice.call(arguments)));
    };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:24:23.160

`$.proxy`你可以调用一个函数，它返回的函数总是有一个特定的上下文。这意味着如果你跑

```
$.proxy(function() {console.log(this.val)}, {val: 1}).call({val: 2}); 
```

它会记录`1`，因为该函数始终绑定到最初传递给的对象`proxy`

# html - 解析html页面上的相对链接

> ID：14991680
> 
> 赞同：0
> 
> 时间：2013-02-20T23:11:46.217
> 
> 标签：html, parsing

我正在尝试解析页面以查找所有有效的 url，但这是一个问题。页面上有 3 种类型的链接：url (_http://site.com/dir/page.html)、绝对 uri (/dir/page.html) 和相对 uri (dir/page.html 没有斜线开始) . 可能我对术语有误，我不是 html 编码器。但无论如何，情况并非如此。

我需要查找并收集所有 url（即 _http://site.com/dir/subdir/page.html 等）。这就是问题所在。如果有一个页面 _http://site.com/dir/page.html 有一个像 <a href="subdir/page.html">link</a> 这样的链接，它应该把我们带到 _http://site .com/dir/subdir/page.html。但是如果页面头部有<base href="/">，则相同的链接指向_http://site.com/subdir/page.html，即不同于_http://site。

问题是页面上的 html 代码中是否还有其他内容可以影响目标 url。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:17:17.483

在 HTML 中，除了你提到的 href 基础之外没有别的东西

可能会变得棘手并且应该考虑的是脚本执行可能会在页面上建立链接，因此诸如 window.location.href = something 之类的东西。如果清楚地说明链接，这将很容易，但它们也可能由脚本计算，然后您可能会错过链接或通过使用简单的解析误读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:25:27.687

您的问题实际上是 html 中的 url 链接如何工作，请阅读：[http](http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3) ://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3 。所以说你在 /admin/ 并且你需要 /admin/login.aspx 。我的相对 URL 是 login.aspx，而我的绝对 URL 是 /admin/login.aspx 有意义吗？

所以基本上我所说的是考虑你的链接是从哪个目录提供的。这将确定要使用的 url 链接的类型和内容。

除此之外，如前所述，jscript 和服务器端代码也可以进行链接。

# java - 如何在 Eclipse 中调试类似于常规 Java 程序的 JUnit 测试

> ID：14991682
> 
> 赞同：26
> 
> 时间：2013-02-20T23:11:57.140
> 
> 标签：java, eclipse, debugging, junit

在 Eclipse 中，如果我在没有断点的调试模式下运行 Java 程序，并且如果 JVM 遇到 NullPointerException，Eclipse 会高亮显示有问题的代码行，并显示局部变量等。执行被暂停。我可以使用“显示”选项卡评估代码，等等。

但是，如果我在调试模式下运行 JUnit 测试，并且 jvm 遇到 NullPointerException，则 jvm 不会暂停，并且我没有机会看到局部变量。

是否可以运行 JUnit 测试，以便 JVM 在我遇到 NullPointerException 时自动暂停，而不使用断点？

编辑：使用 JUnit 4 和 Juno

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-01-22T23:56:41.410

当抛出的异常未被捕获并将您从 main() 中弹出时，Eclipse 将停止。但是，当您使用 JUnit 框架运行时，所有异常都会被 JUnit 捕获，因此 Eclipse 不会停止。

想到了两个解决方案：

*   `NullPointerException`设置异常断点以在抛出时停止
*   使用 JUnit 报告的异常堆栈跟踪并在引发异常的行上设置断点（这是我更喜欢的那个）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-07-05T06:34:01.950

1.  打开您要运行的 Junit 测试用例或 Junit 测试套件。
2.  放置你的断点。
3.  右键单击文件，然后单击调试为 > Junit 测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-22T16:31:53.613

1.  双击设置断点

2.  在 Eclipse 中使用 Debug 模式运行

将鼠标悬停在该行代码上，然后单击`step over`或`f6`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-28T17:38:48.477

您可以在 JUnit 选项卡上看到它，如果您双击有问题的行，您将转到发生空指针异常的位置。

```
java.lang.NullPointerException        <--First line of the error
at.com.myProject.MyClass.myMethod(MyClass.java:theLineOfMyCode) <-- the line that you should double-click 
```

执行此操作后，您将被重定向到错误行。

# html - bootstrap 如何在其文档中的 div 上创建“示例”选项卡？

> ID：14991683
> 
> 赞同：1
> 
> 时间：2013-02-20T23:12:06.490
> 
> 标签：html, css, twitter-bootstrap

我试图查看代码，但无法确定它是如何放置在 div 之上的。此外，谷歌搜索“div 上的选项卡”、“div 上的嵌套选项卡”似乎没有显示任何相关内容，因此我的术语已关闭。

![Twitter 引导程序上的示例](../Images/1b66e50260626bacb6b552b7291b91a0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:15:01.147

我想他们使用了绝对定位的`<div>`.

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/955bV/)]]]

### 输出：

> ![输出](../Images/72b94611a9aed11e6a144a95a1e04e63.png)

### CSS：

```
#container {
    border: 1px solid lightgrey;
    border-radius: 5px;
    height: 100px;
    position: relative;
    width: 200px;    
}

.tab {
    background-color: rgb( 242, 242, 242 );
    border-right: 1px solid lightgrey;
    border-bottom: 1px solid lightgrey;
    border-radius: 0 0 5px 0;
    color: grey;
    display: inline-block;
    font: 12px Arial;
    left: 0;
    padding: 5px;
    position: absolute;
    top: 0;
} 
```

### HTML：

```
<div id="container"><div class="tab">Example</div></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:17:35.820

只需使用这个：

CSS

```
.bs-docs-example {
   position: relative;
   margin: 15px 5px;
   padding: 39px 19px 14px;
   *padding-top: 19px;
   background-color: #fff;
   border: 1px solid #ddd;
   -webkit-border-radius: 4px;
   -moz-border-radius: 4px;
   border-radius: 4px; 
}

.bs-docs-example:after {
   content: "Condiciones de uso";
   position: absolute;
   top: -1px;
   left: -1px;
   padding: 3px 7px;
   font-size: 12px;
   font-weight: bold;
   background-color: #f5f5f5;
   border: 1px solid #ddd;
   color: #9da0a4;
   -webkit-border-radius: 4px 0 4px 0;
   -moz-border-radius: 4px 0 4px 0;
   border-radius: 4px 0 4px 0;
} 
```

HTML

```
<div id="content">
   <div class="container">
     <div class="bs-docs-example" style="text-align: justify;">
   <h2>Header</h2>
       <p>Paragraph</p>
     </div>
   </div>
</div> 
```

[演示](http://jsfiddle.net/MgcDU/2060/)

# c# - 将项目添加到字典中的列表

> ID：14991688
> 
> 赞同：16
> 
> 时间：2013-02-20T23:12:45.153
> 
> 标签：c#, list, dictionary

我正在尝试将值放入依赖于键的字典中......例如，如果在索引 0 处的键列表中有一个字母“a”。我想将索引为 0 的 val 添加到具有键“a”的字典内的列表中（字典（键为索引 0 处的“a”，索引 0 处的 val）...字典（键为“b”索引 2 ，索引 2)) 处的值

我期待这样的输出：

> 在列表视图 lv1：1,2,4 在列表视图 lv2：3,5
> 
> 我得到的是两个列表视图中的 3,4,5

```
List<string> key = new List<string>();
List<long> val = new List<long>();
List<long> tempList = new List<long>();
Dictionary<string, List<long>> testList = new Dictionary<string, List<long>>();

key.Add("a");
key.Add("a");
key.Add("b");
key.Add("a");
key.Add("b");
val.Add(1);
val.Add(2);
val.Add(3);
val.Add(4);
val.Add(5);    

for (int index = 0; index < 5; index++)
{

    if (testList.ContainsKey(key[index]))
    {
        testList[key[index]].Add(val[index]);
    }
    else
    {
        tempList.Clear();
        tempList.Add(val[index]);
        testList.Add(key[index], tempList);
    }
}    
lv1.ItemsSource = testList["a"];
lv2.ItemsSource = testList["b"]; 
```

解决方案：

将 else 代码部分替换为：

testList.Add(key[index], new List { val[index] });

谢谢大家的帮助=）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T23:28:52.430

您对字典中的两个键使用相同的列表

```
 for (int index = 0; index < 5; index++)
    {
        if (testList.ContainsKey(key[index]))
        {
            testList[k].Add(val[index]);
        }
        else
        {
            testList.Add(key[index], new List<long>{val[index]});
        }
    } 
```

当键不存在时，只需创建一个新的 List(Of Long) 然后将 long 值添加到它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T23:28:44.080

摆脱`tempList`并替换您的`else`条款：

```
testList.Add(key[index], new List<long> { val[index] }); 
```

并且不要使用`Contains`. `TryGetValue`好多了：

```
for (int index = 0; index < 5; index++)
{
    int k = key[index];
    int v = val[index];
    List<long> items;
    if (testList.TryGetValue(k, out items))
    {
        items.Add(v);
    }
    else
    {
        testList.Add(k, new List<long> { v });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:27:11.527

替换为：

```
else
{
    tempList.Clear();
    tempList.Add(val[index]);
    testList.Add(key[index], new List<long>(tempList));
} 
```

问题是，您正在向两个键添加对 TempList 的引用，它是相同的引用，因此它在第一个中被替换。

我正在创建一个新列表，因此它不会被替换：`new List<long>(tempList)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:25:23.840

听起来像一个家庭作业问题，但是

```
for (int index = 0; index < 5; index++)
{
    if (!testList.ContainsKey(key[index]))
        testList.Add(key[index], new List<string> {value[index]});
    else
        testList[key[index]].Add(value[index]);
} 
```

阅读[本文](http://msdn.microsoft.com/en-us/library/aa288465%28v=vs.71%29.aspx)（以及其他相关教程）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T23:31:09.817

我不完全确定您在这里要做什么，但我保证您不希望每个字典条目中都有相同的列表。

templist 是你的问题`templist.Clear()`交换`templist = new List<Long>()`

或者去

```
for (int index = 0; index < 5; index++)
{
if (!testList.ContainsKey(key[Index]))
{
testList.Add(key[Index], new List<Long>());
}
testList[key[index]].Add(val[index]);
} 
```

# sencha-architect - Sencha Architect View 在第一次 setActiveItem 后消失

> ID：14991692
> 
> 赞同：0
> 
> 时间：2013-02-20T23:13:01.440
> 
> 标签：sencha-architect

这是问题所在。我有一个看法

```
Ext.define('Journal.view.CreateGoal', {
extend: 'Ext.form.Panel', 
```

它是主要的一部分

```
Ext.define('Journal.view.Main', {
extend: 'Ext.Container',

requires: [
    'Journal.view.GoalList',
    'Journal.view.CreateToDo',
    'Journal.view.Choice',
    'Journal.view.CreateGoal'
],

config: {
    layout: {
        type: 'card'
    },
    items: [
        {
            xtype: 'GoalList'
        },
        {
            xtype: 'createtodo'
        },
        {
            xtype: 'choice'
        },
        {
            xtype: 'creategoal'
        }
    ]
}

}); 
```

我在 GoalList 中有一个按钮可以触发

```
var createGoalForm= Ext.create('Journal.view.CreateGoal');
console.log('create goal view');
Ext.Viewport.setActiveItem(createGoalForm); 
```

我第一次按下那个按钮时，一切都很好。

如果我使用了触发其中任何一个的后退按钮

```
Ext.Viewport.setActiveItem(0); 
```

或 Ext.Viewport.setActiveItem(Journal.view.GoalList);

下次我按下按钮时，我看不到 createGoalForm 的内容

console.log 仍然触发，所以它进入了函数。

我尝试了几种方法，例如

```
Ext.Viewport.setActiveItem(Journal.view.CreateGoal); 
```

和其他一些人。我尝试过的每个版本，第一次去视图都很好，每隔一次它都是空白的。

我已将 autoDestroy 设置更改为无济于事。

那么我做错了什么？

谢谢

# windows-services - 已创建 MSI，但此处理器类型错误不支持获取安装包

> ID：14991693
> 
> 赞同：5
> 
> 时间：2013-02-20T23:13:09.953
> 
> 标签：windows-services, windows-installer, setup-project

我是MSI的新手。我创建了一个 Window 的服务，它是我的 MSI 的输出项目。我的本地机器是 64 位 Win 7 机器。我要安装的服务器是在 VM 上运行的 Win 2008 32 位服务器。我正在使用.NET 4 VS2010。

目前，我的服务的 exe 正在构建为发布目标 = 配置管理器中的任何 CPU。MSI，没有给我任何改变平台的选择。

我可以在本地 64 位 Win7 机器上安装没有问题。但是，每当我尝试在 32 位 Win 2008 上安装时，我都会收到以下错误：“此处理器类型错误不支持此安装包。请联系您的产品供应商。”

我尝试将服务的目标更改为 x86 重建 exe 和设置，但我得到了相同的结果。该服务引用了许多类库。我也将它们从 Any Cpu 更改为 x86，只是为了看看是否有任何不同。

我还确保我的安装项目和服务先决条件设置为 .NET Framework 4（x86 和 x64）。我还尝试将 Prerequisites Windows Installer 从 3.1 更改为 4.5。

似乎没有任何效果。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-10T09:54:25.967

就我而言，在 HKLM/SOFTWARE（64 位）注册表节点下指定条目足以导致在 32 位 Win7 主机上安装失败。

使用免费的集成 InstallShield 产品的 VS 2010/2013 的症状相同。我能够在正在安装的项目上保留任何 CPU 设置。MSI 设置项目不需要其他特殊设置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T19:41:45.140

好的，我知道 TargetPlatform 在哪里。它与其他 VS 项目不同。

要访问 TargetPlatform，请选择 MSI 项目并按 F4 键。中提琴！在“属性”网格中，您将找到 TargetPlatform 字段，其中包含以下选项：x86、x64、Itanium。注意：这是一组完全不同的属性，当您右键单击项目并从上下文菜单中选择“属性（Alt-Enter）”项时，您会得到一组完全不同的属性。“Alt-Enter”属性与“F4”属性。

不幸的是，这与其他 VS Project 属性不同。通常，项目属性是在主窗口中设置的，而不是在“F4”属性网格中。因此，当其他线程讨论项目的属性时，我一直感到困惑，因为这是不同的。

比如[这个](https://stackoverflow.com/questions/753412/setup-targeting-both-x86-and-x64)

VS 中的 ConfigurationManager 不会影响 MSI。我将所有依赖程序集保留在“任何 CPU”上。另外，不要忘记在“启动条件”窗口中定位正确的框架（右键单击项目 -> 查看 -> TargetConditions）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T02:24:01.287

我回答这个问题有点晚了！F4 在 Visual Studio 2017 上不起作用。只需突出显示安装项目，然后右键单击右侧边栏上的属性选项卡。然后将“TargetPlatform”更改为您想要的选项。请注意：这与右键单击安装项目不同。

# php - 在 PHP 中使用河豚来存储密码

> ID：14991698
> 
> 赞同：2
> 
> 时间：2013-02-20T23:13:20.153
> 
> 标签：php, mysql, hash, passwords, blowfish

整个密码学的东西让人难以接受，但它真的很有趣，我最近一直在阅读它。

我的问题是关于使用河豚来散列您的密码以进行存储。我知道需要盐，但我不确定该怎么做。我有一些疑问。

1.  我读过的许多教程，人们似乎只是随机地提出了一个像“oidsjf03”这样的教程，并将它用于他们所有的盐。他们只是捣碎键盘还是什么？

2.  我也读过很多书说每个密码都应该有一个唯一的哈希值。所以我为我存储的每个密码生成一个单独的盐。然后我必须把它存储在某个地方。然而在哪里？如果我只是将它作为一个条目存储在用户的行中，如果数据库遭到破坏，他们是否可以不只是使用该盐生成彩虹表？

    我是否正确地说这是不可行的，因为他们需要为每个密码生成一个彩虹表，并且使用河豚创建每个哈希需要一段时间，所以这不实用吗？

3.  为什么为每个用户拥有一个独特的如此重要？假设您正在使用河豚，并且您的数据库遭到破坏，并且您的盐也被捕获。黑客可以创建一个彩虹表来测试您的密码，但是如果对哈希进行大量轮次，例如，每个密码可能需要 0.1 秒。如果他们想创建一个包含 10 亿个条目的彩虹表，那么创建它需要 1 亿秒（或大约 3 年）。

    如果你使用独特的盐并且有 1000 个密码，他们必须创建 1000 个彩虹表，将时间增加到 3000 年。这是为什么？每个存储密码的时间会增加吗？

4.  你如何为哈希生成这个盐？PHP 的`uniqid()`功能是否足够，还是我应该做一些花哨的事情？

5.  我真的需要创建一个完整的类等，还是可以创建一个简单的函数？

6.  最后，我听说 phpass 提到了很多关于它的安全性以及用户应该如何使用它而不是自己可能犯错误。这真的是推荐的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:25:15.207

> 1- 我读过的许多教程，人们似乎只是随机地提出了一个像“oidsjf03”这样的教程，并将其用于他们所有的盐。他们只是捣碎键盘还是什么？

对所有东西都使用相同的盐是个坏主意。时期。

> 2-我也读过很多书说每个密码都应该有一个唯一的哈希值。所以我为我存储的每个密码生成一个单独的盐。然后我必须把它存储在某个地方。然而在哪里？如果我只是将它作为一个条目存储在用户的行中，如果数据库遭到破坏，他们是否可以不只是使用该盐生成彩虹表？

盐是哈希的一部分。只有当您有多个使用相同盐的用户时，彩虹表才有效。但它们都是独一无二的，对吧？因此，将其与哈希一起存储就可以了。#3 也是如此。

> 4-你如何为哈希生成这个盐？PHP 的`uniqid()`功能是否足够，还是我应该做一些花哨的事情？

自 PHP 5.5 起，[密码散列函数](http://php.net/password_hash)已直接内置于 PHP 中。同时，请参阅上述链接，评论中是指向与这些功能前向兼容且适用于 PHP >= 5.3.7 的 Github 项目的链接。

> 6- 最后，我听说 phpass 提到了很多关于它的安全性以及用户应该如何使用它而不是自己可能犯错误。这真的是推荐的做法吗？

内置的 PHP 函数更好，因为一旦发现任何安全漏洞，它们将始终保持最新状态。我会改用它们。然而 phpass 是一个很好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:37:20.903

除了上述答案之外，您还可以在 DB 中使用哈希值保存盐，因为如果您的数据库受到攻击，攻击者需要知道您的盐算法。像 hash($pass.$salt) 或 hash(hash($pass).$salt) 等。

# windows-8 - Windows 8 软键盘未隐藏

> ID：14991704
> 
> 赞同：2
> 
> 时间：2013-02-20T23:13:40.417
> 
> 标签：windows-8, winrt-xaml

我们有一个 Windows Store 应用程序，它需要输入用户名和密码才能访问服务。当身份验证连接到服务失败时，我们会显示一个弹出窗口，要求重新输入他们的用户名和密码。

在平板电脑上，当用户将焦点放在用户名或密码字段上时，软键盘会正确显示。我们的登录屏幕会在检测到软键盘时进行调整，以便所有字段和按钮都可见。

这一切都没有问题，当他们输入详细信息并点击登录按钮时，弹出窗口关闭，应用程序继续。

但是由于某种原因，我无法确定用户是否将注意力集中在用户名文本框上，然后点击登录按钮，软键盘没有隐藏。弹出窗口被关闭，应用程序继续运行，但仍显示软键盘。如果焦点在密码框中，则键盘按预期隐藏。

我尝试将焦点设置到按钮单击事件中的按钮控件，但这并不能解决问题。可能是因为按钮单击也会关闭弹出控件。

有没有人遇到过这个？除了将焦点设置到另一个控件（在我的情况下不起作用）之外，还有其他方法可以关闭软键盘吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T00:10:45.993

我通过在显示弹出窗口之前将焦点设置在虚构按钮（宽度 = 0，高度 = 0）上解决了这个问题。因此，当弹出窗口关闭时，焦点放在不需要键盘的按钮上。没有这个，焦点将放在最后一个焦点“控件”上，它可能对键盘有奇怪的行为。

希望有所帮助。

狐狸

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:33:39.573

您无法控制触摸键盘何时显示或隐藏。 [本白皮书](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx)详细描述了显示和/或隐藏键盘时的逻辑。从最后一段：

> 这意味着应用程序无法通过焦点操作以编程方式调用触摸键盘。

# objective-c - NSObject 子类位置

> ID：14991706
> 
> 赞同：0
> 
> 时间：2013-02-20T23:14:08.000
> 
> 标签：objective-c, ios6, xcode4.2

我目前正在尝试向我的 iOS 应用程序添加一个类，我需要找到一个 NSObject 子类。指示说它将位于 cocotouch 内，但不是。里面有什么；Objective-C 类，Objective-c 类别，Objective-c 类扩展，Objective -c 协议，有谁知道我在哪里可以找到这个子类文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:16:28.327

你想要 Objective-C 类。然后你可以选择让你的新类成为哪个类的子类。

# java - 在序列化期间进行 URL 编码/解码的 Jackson 注释或方法？

> ID：14991708
> 
> 赞同：4
> 
> 时间：2013-02-20T23:14:20.220
> 
> 标签：java, scala, jackson, riak

我想知道在杰克逊中序列化和反序列化对象时是否有一种简单的方法来进行 URL 编码/解码。这样做的原因是确保要在 Riak 中编制索引的传入字段不包含非法字符。

例如，我有以下课程（在 Scala 中）：

```
case class Client(
  @(JsonProperty@field)("guid")
  @(RiakKey@field)
  val guid: String,

  @(JsonProperty@field)("name")
  @(RiakIndex@field)(name = "name")
    val name: String,

  @(JsonProperty@field)("address")
    val address: String,

  @(JsonProperty@field)("contact")
    val contact: String,

  @(JsonProperty@field)("phone")
    @(RiakIndex@field)(name = "phone")
    val phone: String,

  @(JsonProperty@field)("suspended")
  val suspended: Boolean=false,

  @(JsonProperty@field)("created")
  val created: Date=now,

  @(JsonProperty@field)("updated")
    val updated: Date=now

) 
```

所以在`name`现场，我可能在作为 Riak 索引一部分的名称之间有一个空格。当我将 JSON 对象存储在 Riak 中时，它会产生以下错误：

```
Caused by: java.net.URISyntaxException: Illegal character in path at index 82: http://db2.3tierlogic.com:8098:8098/buckets/accounts-client/index/name_bin/Calgary Flames
        at java.net.URI$Parser.fail(URI.java:2810)
        at java.net.URI$Parser.checkChars(URI.java:2983)
        at java.net.URI$Parser.parseHierarchical(URI.java:3067)
        at java.net.URI$Parser.parse(URI.java:3015)
        at java.net.URI.<init>(URI.java:577)
        at java.net.URI.create(URI.java:839)
        ... 105 more 
```

是否有注释或非常简单的 URL 编码和解码该字段的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T23:20:27.640

简单的方法是指定您想要使用的序列化器/反序列化器

```
@JsonSerialize(using=classOf[YourSerializer])
@JsonDeerialize(using=classOf[YourDeserializer])
var customEncodedProperty: String = _ 
```

# python - concurrent.futures 是 GIL 的药物吗？

> ID：14991710
> 
> 赞同：14
> 
> 时间：2013-02-20T23:14:33.993
> 
> 标签：python, future, gil, concurrent.futures

我只是在搜索这个新实现，我使用 python 2.7，我必须安装[它](https://pypi.python.org/pypi/futures)，所以如果我使用它，我会忘记 CPython 上的 GIL 这个词吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-20T23:18:01.970

不，`concurrent.futures`与 GIL 几乎没有任何关系。

使用进程而不是线程是 GIL 的良药。（当然，像所有药物一样，它有副作用。但它有效。）

该模块只是为您提供了一种比直接使用或`futures`更简单的方法来安排和等待任务。它还有一个额外的优势，即您可以在线程池和进程池之间进行交换（甚至可能是一个 greenlet 循环，或者您发明和构建的一些疯狂的东西），而无需更改代码。所以，如果你不知道你的代码是否会出现 GIL 问题，你可以将它构建为使用线程，然后通过一行更改将其切换为使用进程，这非常好。`threading``multiprocessing``future`

但是，如果您使用`ThreadPoolExecutor`，它将具有完全相同的 GIL 问题，就好像您使用`threading`和手动创建线程池、任务队列等一样`queue`。如果您使用`ProcessPoolExecutor`，它将以与`multiprocessing`手动使用相同的方式（并且具有相同的权衡）避免 GIL 问题。

PyPI 包只是`concurrent.futures`从 3.2 到 2.x（和 3.0-3.1）的模块的简单反向移植。（它不会神奇地为您提供新的和改进的 3.2 GIL，或者更改进的 3.3 GIL，更不用说删除 GIL。）

* * *

我什至不应该提到 GIL 的变化，因为这似乎只是增加了混乱……但是现在，让我尝试通过过度简化来理顺它。

如果您只有 IO 绑定的工作，线程是获得并发性的好方法，达到合理的限制。并且 3.3 确实使它们工作得更好——但在大多数情况下，2.7 已经足够好，而对于大多数情况下，3.3 仍然不够好。如果您想同时处理 10000 个客户端，您将需要使用事件循环（例如 、、`twisted`、`tornado`等）而不是线程。`gevent``tulip`

如果您有任何 CPU 密集型工作，线程根本无助于并行化该工作。事实上，它们让事情变得更糟。3.3 让这个点球没有那么糟糕，但它仍然是一个点球，你仍然不应该这样做。如果要并行化 CPU 工作，则必须使用进程，而不是线程。3.3 的唯一优点是`futures`比 更容易使用`multiprocessing`，并且是内置的，无需安装。

我不想阻止您迁移到 3.3，因为它是比 2.7 更好的语言的更好实现。但更好的并发性并不是移动的理由。

# entity-framework - 实体框架不是单一化类

> ID：14991715
> 
> 赞同：0
> 
> 时间：2013-02-20T23:15:20.580
> 
> 标签：entity-framework, naming-conventions, entity-framework-5

我在数据库中有大约 30-35 个表。但是当我使用 EF 5 时，我生成了类并且还勾选了单数/复数选项（如下图所示），所有类都不会被单数化！

![在此处输入图像描述](../Images/fc7139e319f1e269302f8cde03c1c17b.png)

![在此处输入图像描述](../Images/779b997c6360155a6ff83c317bf570d6.png)

任何解决方案，还是我做错了什么？针对框架 4.0 并尝试使用 4.5。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:51:27.017

后来我发现 Entity Framework 不会用下划线对表进行单数化/复数化，所以我不得不重命名这些表并且现在可以正常工作。

# javascript - 与 mongoskin 相关的 safe:true 和 safe:false 有什么区别？以及如何使用它？

> ID：14991718
> 
> 赞同：1
> 
> 时间：2013-02-20T23:15:32.870
> 
> 标签：javascript, node.js, mongodb, mongoskin

我与 mongoskin 和 nodejs 有联系：

```
var db = mongo.db("root:toor@127.0.0.1:27017/cordoba"); 
```

但我不知道在这种情况下哪个是最佳做法......

```
db.collection('usuarios').insert(campos,{safe:true}, function(err, result) 
```

我想在 mongodb 中插入 campos，我使用的是 safe:true ......那么如果我使用 safe:false 会发生什么，最佳实践是什么？

这：

```
 var db = mongo.db("root:toor@127.0.0.1:27017/cordoba");
 db.collection('usuarios').insert(campos,{safe:true}, function(err, result) 
```

或这个：

```
var db = mongo.db("root:toor@127.0.0.1:27017/cordoba",{safe:true});
db.collection('usuarios').insert(campos, function(err, result) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:21:35.023

{safe:true} 保证回调函数只有在插入完成后才会执行，而 {safe:false} 不保证这一点。我总是使用 {safe:true}，只是为了确保我拥有最新版本的数据库。

# python - 使用 Python 重命名文件夹时如何避免错误 32 - os.rename()

> ID：14991720
> 
> 赞同：1
> 
> 时间：2013-02-20T23:15:42.903
> 
> 标签：python

我使用包含函数的 python 脚本：

```
def listdirs(folder):
        return [d for d in os.listdir(folder) if os.path.isdir(os.path.join(folder, d))] 
```

该函数被重复调用以构建一组路径，这些路径用于将来自各个 GPS 单元的数据集的多个副本附加到单个数据库中的操作。

我希望能够将一些字符附加到已附加数据的文件夹的名称中，以便下次运行较大的脚本时可以从操作中省略这些文件夹。我希望这将防止我不得不将一堆冗余数据加载到数据库中，然后将其删除，因为它没有用。

我的问题是，当我尝试调用 os.rename() 并使用它来“标记”所涉及的文件夹时，代码失败，我得到：

> WindowsError：[错误 32] 进程无法访问该文件，因为它正被另一个进程使用

在这一点上，我不打算将文件夹视为“正在使用” - 我需要做什么才能使文件夹处于可以重命名它们的状态？

# java - 文本文件上写入的文本或字符串与前一个单词重叠。它应该逐行写入每个字

> ID：14991722
> 
> 赞同：1
> 
> 时间：2013-02-20T23:15:47.183
> 
> 标签：java, android, file

我可以访问我使用此代码创建的文件，该代码将从 Android 中的 EditTExt 输入的每个单词保存到文件中。但是，在输入更多单词后，文件上只写了最后一个单词。按 SAVE 按钮后，之前的单词似乎被覆盖了。每次将单词保存在文本文件中时，都会单击此按钮。我想在文本文件中逐行列出输入的单词。应该怎么做？

**这是我使用的代码。**

```
File dir = new File (getFilesDir(), "myFolder");
dir.mkdirs();
File file = new File(dir, "myData.txt");

try {
    FileOutputStream f = new FileOutputStream(file);
    PrintWriter pw = new PrintWriter(f);

    pw.println("\n" + stringWord);

    pw.flush();
    pw.close();
    f.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();

} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:23:08.723

以“`FileOutputStream`覆盖”模式打开文件，以附加到文件使用：

```
FileOutputStream f = new FileOutputStream(file, true); 
```

# generics - 用 Iterable 和泛型阐述文档问题

> ID：14991724
> 
> 赞同：0
> 
> 时间：2013-02-20T23:15:49.980
> 
> 标签：generics, documentation, iterable, enunciate

我正在尝试使用 enunciate 为我的基于 Jersey 的 REST API 重新生成文档。遇到几个绊脚石：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public Iterable<Project> listAll() {
    ...
} 
```

Enunciate 似乎无法插入 Iterable。在我的文档中，我只得到“元素：（自定义）”。请注意，项目类型使用@XmlRootElement 和@JsonRootType 进行注释。

同样，对于此代码：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
public Response save(final T persistable) {
    ...
} 
```

我为方法参数（注意：T 具有扩展限制）和返回类型（其中 Response 为：javax.ws.rs.core.Response）都获得了“元素：（自定义）”。此外，enunciate 似乎无法弄清楚返回的媒体类型：它列出了 XML、JSON 和 *（想想看，我不确定我到底想要什么，但我知道不是那样.)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T20:28:04.187

Enunciate 使用[JAX-RS](https://jax-rs-spec.java.net/)规范生成其文档。不幸的是，该`Iterable`接口不是正式支持的 JAX-RS 对象类型，所以不知何故，您正在使用自定义消息正文编写器序列化为`Iterable`JSON（我猜是[Jackson](http://wiki.fasterxml.com/JacksonHome)吗？）。

因此，如果您想正式地了解您的返回类型，您可以创建一个 Enunciate 可以识别并返回它而不是返回的 wrapper bean `Iterable`，例如：

```
@XmlRootElement
public class Projects {
  public Collection<Project> projects;
} 
```

# testng - 在 linux 的命令行中运行时 testng 给出 noclassdeffound 错误

> ID：14991727
> 
> 赞同：0
> 
> 时间：2013-02-20T23:16:10.093
> 
> 标签：testng

在 linux 机器的命令行中运行 testNG 程序时出现以下错误。

echo $CLASSPATH（确认 testng jar 在 CLASSPATH 中）

然后运行以下（testng.xml 并且 testclass 在当前目录中）

bash-2.05b# java org.testng.TestNG testNG.xml

线程“主”java.lang.NoClassDefFoundError 中的异常：com/beust/jcommander/ParameterException

我读了一些关于添加 jcommander 类的线程，但这些线程是从 ant 运行时......而不是从命令行运行时......对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T22:32:32.967

对不起。好像这是我的错误。

类路径没有 jcommander jar 的正确文件夹。这似乎已经解决了这个问题。

# css - 以固定位置向右浮动导航？

> ID：14991732
> 
> 赞同：21
> 
> 时间：2013-02-20T23:16:30.653
> 
> 标签：css, position, css-float, css-position

我的网站导航需要浮动到容器的右侧，但要处于固定位置，这样每当页面滚动时，导航仍然在距离顶部 350 像素的右侧。这在我申请之前一直有效`position:fixed`，之后导航卡在右侧。有什么想法可以让我两全其美（右侧和固定位置）？

[http://jsfiddle.net/eeCgr/](http://jsfiddle.net/eeCgr/)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-20T23:22:08.893

position:fixed 的使用需要调整 top/right/bottom/left CSS 来让你的 nav 元素到想要的位置。

例如：

```
nav { 
    right: 0; 
    top: 50%; 
} 
```

或者

```
nav {
    right: 0; 
    top: 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-01T14:21:18.973

方法十：

只需在另一个部门中创建所需的部门。

给定位置：固定；宽度：100%；外部 div 的属性。

给浮动：对；属性到内部 div。

由于 float 和 position 属性被赋予了两个不同的部门，因此它将生效。确保两个部门的所有其他属性相同。

（要隐藏外部 div，使用 HSLa 代码将其颜色的 alpha 值 (a) 更改为 0.00）

# google-chrome - 仅在 Chrome 上定位两种屏幕尺寸

> ID：14991733
> 
> 赞同：5
> 
> 时间：2013-02-20T23:16:31.530
> 
> 标签：google-chrome, css, media-queries

我正在使用@media 查询**仅使 Chrome 浏览器**将“.l-triangle”定位在特定位置。所以我使用以下方法

```
@media screen and (-webkit-min-device-pixel-ratio:0) { 
/* Fix for Chrome / Safari Users ONLY */

.l-triangle {
   background: transparent url('../images/menu_bg_left.gif') no-repeat;
   position: absolute;
   float: left;
   width: 55px;
   height:75px;
   display: block;
   left: 0px;
   top:0px;
   z-index: 0;
    -webkit-box-shadow: 0 8px 6px -6px rgba(0,0,0,0.7);
       -moz-box-shadow: 0 8px 6px -6px rgba(0,0,0,0.7);
            box-shadow: 0 8px 6px -6px rgba(0,0,0,0.7);
} 
```

它适用于屏幕尺寸大于 968 像素但不适用于小于 968 像素的 Chrome 浏览器。

我的问题是如何才能为只有2 个不同屏幕尺寸的**Chrome 浏览器传递 2 个不同的 css 值？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:58:49.800

我想你在[这里](https://stackoverflow.com/questions/945428/how-to-do-a-chrome-opera-specific-stylesheet)也有同样的问题。

此代码仅适用于 Chrome：

```
.chrome #thingie {
   do: this;
} 
```

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T09:25:16.557

您可以在媒体查询中使用“and”或“not”等运算符。

```
@media screen and (-webkit-min-device-pixel-ratio:0) and (min-width: 968px) {
...code here...
} 
```

# r - 使用 KnitR 的 R 图中的 LaTeX 图形标签？

> ID：14991735
> 
> 赞同：35
> 
> 时间：2013-02-20T23:16:43.117
> 
> 标签：r, latex, knitr

我无法让 R/KnitR 为`\label{}`图形创建 LaTeX 语句。该[手册](http://yihui.name/knitr/options)似乎表明`\label{}`将通过将 fig.lp 中的字符串（默认为“fig:”）与 R 代码块的标签连接起来来创建语句。但是，我无法让它发挥作用。没有`\label{}`为通过编织下面的 MWE 创建的第一个图形创建任何语句。第二个图的标签添加了我刚刚发现的解决方法，将 R 块放在图环境中，并将标签放在`\label`标签之后或`\caption`标签内。

```
\documentclass[12pt, english, oneside]{amsart}
\begin{document}

Figure \ref{fig:plot} doesn't have it's label.

<<plot>>=
plot(x=0, y=0)
@

Figure \ref{fig:plot2} has its label.

\begin{figure}
\caption{\label{fig:plot2}}
<<>>=
plot(x=1,y=1)
@
\end{figure}

\end{document} 
```

好的，我通过将 R 块放在`\begin{figure} . . .\end{figure}`LaTeX 的环境中找到了一种解决方法。我可以在相同的环境中创建标签。不过，我想了解 Yihui 打算如何使用 KnitR 来处理这个问题。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-21T00:08:52.013

您需要设置`fig.cap = ''`（或任何您希望的）以确保在`latex`文档中使用图形环境。（您可能已经注意到`\begin{figure} ... \end{figure}`与`\label{}`组件一起丢失

例如

```
\documentclass[12pt, english, oneside]{amsart}
\begin{document}
See Figure \ref{fig:plot}.
<<plot, fig.lp="fig:", fig.cap = ''>>=
plot(x=0, y=0)
@
\end{document} 
```

我同意[网站上的描述](http://yihui.name/knitr/options)不太清楚这是必要的。

> *   fig.env: ('figure') 用于数字的 LaTeX 环境，例如设置 fig.env='marginfigure' 来获取 \begin{marginfigure}
>     
>     
> *   fig.cap: (NULL; character) 在 LaTeX 中的图形环境中使用的图形标题（在 \caption{} 中）；如果为 NULL 或 NA，它将被忽略，否则图形环境将用于块中的图（在 \begin{figure} 和 \end{figure} 中输出）

虽然[图形手册很清楚](http://yihui.name/knitr/demo/graphics/)，推理也有道理

> ## 图说明
> 
> 如果块选项 fig.cap 不为 NULL 或 NA，当输出格式为 LATEX 时，绘图将被放置在图形环境中，该选项用于在此环境中使用 \caption{} 编写标题。其他两个相关选项是 fig.scap 和 fig.lp，它们为图形标签设置短标题和前缀字符串。默认短标题是通过在第一个句点或冒号或分号处截断来从标题中提取的。标签是 fig.lp 和块标签的组合。因为 figure 是一个浮动环境，所以当编译 TEX 文档时，它可以从块输出浮动到其他地方，例如页面的顶部或底部。

If you were wishing to replicate a `R` session output, you wouldn't want the figures to float away from the line of code which defines how they were created.

# java - jinterop Win32_Process 创建

> ID：14991736
> 
> 赞同：2
> 
> 时间：2013-02-20T23:16:59.757
> 
> 标签：java, wmi, win32-process, j-interop

我正在尝试使用 j-interop 实现以下 wmic 命令。

```
wmic /NODE:192.168.0.195 /USER:Test /PASSWORD:password123 process call create "calc.exe" 
```

我的代码在我的方法中是这样写的。我还有另外两种方法可以创建会话并连接到 WMI 服务，以便处理该部分。

```
public void wmiExecute() throws JIException {

    // Obtain Win32_Process and narrow it as IJIDispatch
    Object[] params = new Object[] {
        new JIString("Win32_Process"),
        new Integer(0),
        JIVariant.OPTIONAL_PARAM()
    };
    JIVariant[] servicesSet = this._wbemServices.callMethodA("InstancesOf", params);
    IJIDispatch wbemObjectSet = (IJIDispatch) JIObjectFactory.narrowObject(servicesSet[0].getObjectAsComObject());

    params = new Object[] {
            "calc.exe",
             JIVariant.OPTIONAL_PARAM(),
             JIVariant.OPTIONAL_PARAM(),
             new Integer(0),
    };
    wbemObjectSet.callMethodA("Create", params);
} 
```

我一直得到一个例外

```
Caught Throwable: org.jinterop.dcom.common.JIException: Unknown name. [0x80020006]
org.jinterop.dcom.common.JIException: Unknown name. [0x80020006] 
```

知道有什么问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T16:31:18.637

这是解决方案...

您不应该使用 InstanceOf 来获取 Win32_Process ，因为您只会获得当前正在运行的进程的列表。相反，您应该使用“Get”来获取默认的 Win32_Process。

```
public void wmiExecute() throws JIException {

    // Obtain Win32_Process and narrow it as IJIDispatch
    Object[] params = new Object[] {
        new JIString("Win32_Process"),
        JIVariant.OPTIONAL_PARAM(),
        JIVariant.OPTIONAL_PARAM()
    };

    // Obtain the default Win32_Process
    JIVariant[] service = this._wbemServices.callMethodA("Get", params);

    // Convert it to a IJIDispatch object
    IJIDispatch wbemObject = (IJIDispatch) JIObjectFactory.narrowObject(service[0].getObjectAsComObject());

    // Create input params
    Object[] paramsCalc = new Object[] {
             new JIString("calc.exe"),
             JIVariant.OPTIONAL_PARAM(),
             JIVariant.OPTIONAL_PARAM()
    };

    // Create the calculator process
    JIVariant[] results = wbemObject.callMethodA("Create", paramsCalc);
} 
```

# python - 从python中的字典制作表格

> ID：14991738
> 
> 赞同：4
> 
> 时间：2013-02-20T23:17:07.973
> 
> 标签：python, dictionary

我正在尝试从 python 字典创建一个表：字典是这样生成的：

```
for line in input_file:
  key = line.split()[0]
  value_1 = line.split()[1]
  value_2 = line.split()[2]
dic = {}
if not key in dic:
  dic[key] = value_1, value_2
else:
  dic[key] = dic[key], value_1, value_2 
```

我想按以下格式制作表格：

"/t" value_1 "\t" value_1 key "\t" value_2 "\t" value_2 key "\t" value_2 "\t" value_2

这是我的实际字典：

```
COL1A1_31 (((('RD013939-Fetal', '1392.85'), 'RD013938-Fetal', '2306.23'), 'RD013937-Fetal', '2825.40'), 'RD013936-Fetal', '3246.35')
COL1A1_32 (((('RD013939-Fetal', '5217.01'), 'RD013938-Fetal', '3914.62'), 'RD013937-Fetal', '5879.18'), 'RD013936-Fetal', '5843.70')
COL1A1_33 (((('RD013939-Fetal', '2937.83'), 'RD013938-Fetal', '2351.07'), 'RD013937-Fetal', '3439.43'), 'RD013936-Fetal', '4121.72') 
```

有任何想法吗？

抱歉这个令人困惑的问题和我糟糕的代码......我对python很陌生。

让我提供更多信息。我有几个样本中的每一个都有一个文本。所有看起来像这样的文本文件：

Target Chr Start End Mean_Cov Shallow_Count Shallow_Bases COL2A1_38 chr12 48374677 48374771 175.6 0 none COL1A1_30 chr17 48269320 48269405 512.76 0 none COL1A1_36 chr17 48267341 48267489 548.89 0 none CRTAP_7 chr3 33183866 33184060 571.77 0 none

有一个基因名称（目标），然后是一些元数据。我需要生成这些文本文件的摘要，如下所示：

目标 Mean_Cov_sample_1 Mean_Cov_sample_2 COL2A1_38 175.6 some_value_from_sample_2 COL1A1_30 512.76 some_value_from_sample_2

这更有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:26:46.707

很难弄清楚您的输入字典实际上是什么样子，但请对其进行排序，然后在必要时修改以下示例：

```
>>> d = {'key{}'.format(n): 'value{}'.format(n) for n in xrange(3)}
>>> table =  '\t'.join(['{}\t{}'.format(d.get(k), k) for k in sorted(d)])
>>> print table
value0  key0    value1  key1    value2  key2 
```

# c++ - 奇怪的 QT 无符号整数错误

> ID：14991740
> 
> 赞同：2
> 
> 时间：2013-02-20T23:17:18.913
> 
> 标签：c++, qt, runtime-error

我正在研究一个 RPN 计算器，现在我的 main.cpp 以及这些其他类文件应该接受一串代数运算，例如“3 + 4 / 2.34”，它可以采用算术运算符并且可以读取双精度数，整数、分数和混合分数（一个整数、一个空格，然后是一个分数）。

在命令控制台中，我收到此错误：

```
ASSERT: "uint(i) < uint(size())" in file c:\QtSDK\Desktop\Qt\4.8.1\mingw\include
/QtCore/qstring.h, line 701

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.
Press <RETURN> to close this window... 
```

我对 QT 的理解不够好，无法找出这个错误的来源，所以除了显示我的代码并希望有人能帮助我之外，我没有其他选择。有很多代码：/我已经排除了 Fraction 和 Mixed 类的头文件和源代码，因为它们不使用编译器似乎在抱怨的 qstring.h。如果您认为这些是必需的，我可以发布它们。

据我所知，它与将无符号整数与整数进行比较有关，可能试图将负整数分配给 uint？这是奇怪的部分，在 main.cpp 文件中，输入字符串是“1345/43143 - 2”，这会导致错误。此外，“3+4”也会导致错误。奇怪的是，如果我将输入字符串设置为“2341 + (23 ^ 4.421) / 23/321 - 5 6/7”，它确实有效，但似乎没有其他输入字符串有效。

令牌.h

```
#ifndef TOKEN_H
#define TOKEN_H

#include "Mixed.h"
#include "Fraction.h"

class Token
{
public:
    Token();
    Token(const QString& Substring);
    void SetIntPart(const QString& Substring);
    void SetDoublePart(const QString& Substring);
    void SetFractionPart(const QString& Substring);
    void SetMixedPart(const QString& Substring);
    void SetOperatorPart(const QString& Substring);

    bool isDouble(const QString& Substring);
    bool isInt(const QString& Substring);
    bool isFraction(const QString& Substring);
    bool isMixed(const QString& Substring);
    bool isOperator(const QString& Substring);
    bool isNumber()
    { return (inttoken || doubletoken || fractiontoken || mixedtoken); }
    bool isLeftParen();
    bool isRightParen();
    bool isOperator();

    int IntPart() { return intpart; }
    double DoublePart() { return doublepart; }
    Fraction FractionPart() { return fractionpart; }
    Mixed MixedPart() { return mixedpart; }
    char OperatorPart() { return operatorpart; }
    bool IntToken() { return inttoken; }
    bool DoubleToken() { return doubletoken; }
    bool FractionToken() { return fractiontoken; }
    bool MixedToken() { return mixedtoken; }
    bool OperatorToken() { return operatortoken; }
    QString toQString();
    void Print(ostream& out) const;
    friend ostream& operator<<(ostream& out, const Token& T);

private:
    int intpart;
    double doublepart;
    Fraction fractionpart;
    Mixed mixedpart;
    char operatorpart;

    bool inttoken;
    bool doubletoken;
    bool fractiontoken;
    bool operatortoken;
    bool mixedtoken;

    void ClearBools();
    void ClearParts();
    void ClearAll() { ClearBools(); ClearParts(); }
};

#endif // TOKEN_H 
```

解析器.h

```
#ifndef PARSER_H
#define PARSER_H

#include <iostream>
#include <cstdlib>
#include "Fraction.h"
#include "Mixed.h"
#include "Queue.h"
#include "Stack.h"
#include "Token.h"

class Parser
{
public:
    Parser();
    void LoadInputQueue(const QString& QS);
    void LoadOutputQueue();
    void CopyInputToString(QString &QS);
    void CopyOutputToString(QString &QS);
    bool isOperator(const QChar& Qch);
    bool isSpace(const QChar& Qch);
    bool isRightParen(const QChar& Qch);
    bool isLeftParen(const QChar& Qch);
    bool isParen(const QChar& Qch);
    bool isDigit(const QChar& Qch);
    void PrintInputQueue(ostream& out);
    void PrintOutputQueue(ostream& out);
    void PrintOperatorStack(ostream& out);
    int precedence(Token T);

private:
    Queue<Token> InputQueue;
    Queue<Token> OutputQueue;
    Stack<Token> OperatorStack;

    void Tokenize(const QString& InputString, int n);
};

#endif // PARSER_H 
```

主文件

```
#include <QtCore/QCoreApplication>
#include <cstdlib>
#include <iostream>
#include "Token.h"
#include "Parser.h"

using namespace std;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    /*cout << "Fractiontoken: " << A.FractionToken() << endl;
    cout << "Fraction part: " << A.FractionPart() << endl;
    cout << "Inttoken: " << A.IntToken() << endl;
    cout << "Int part: " << A.IntPart() << endl;
    cout << "Doubletoken: " << A.DoubleToken() << endl;
    cout << "Double part: " << A.DoublePart() << endl;
    cout << "Mixedtoken: " << A.MixedToken() << endl;
    cout << "Mixed part: " << A.MixedPart() << endl;
    cout << "Operatortoken: " << A.OperatorToken() << endl;
    cout << "Operator part: " << A.OperatorPart() << endl;*/

    QString inputstring = "1345/43143 - 2";
    Parser P;
    QString displaystring;

    P.LoadInputQueue(inputstring);
    P.CopyInputToString(displaystring);
    cout << qPrintable(displaystring);
    cout << endl;

    P.LoadOutputQueue();
    P.CopyOutputToString(displaystring);
    cout << qPrintable(displaystring);
    cout << endl;

    return a.exec();
} 
```

解析器.cpp

```
#include "Parser.h"
enum PARENTHESIS_1{P1};
enum PARENTHESIS_2{P2};

bool Parser::isOperator(const QChar& Qch)
{
    char ch = Qch.toAscii();
    if (ch == '+' ||
            ch == '-' ||
            ch == '*' ||
            ch == '/' ||
            ch == '(' ||
            ch == ')' ||
            ch == '^' )
        return 1;
    return 0;
}

bool Parser::isSpace(const QChar& Qch)
{
    if (Qch.toAscii() == ' ')
        return 1;
    return 0;
}

bool Parser::isLeftParen(const QChar& Qch)
{
    char ch = Qch.toAscii();
    if (ch == '(')
        return 1;
    return 0;
}

bool Parser::isRightParen(const QChar& Qch)
{
    char ch = Qch.toAscii();
    if (ch == ')')
        return 1;
    return 0;
}

bool Parser::isParen(const QChar& Qch)
{
    if (isRightParen(Qch) || isLeftParen(Qch))
        return 1;
    return 0;
}

bool Parser::isDigit(const QChar &Qch)
{
    char ch = Qch.toAscii();
    if (ch > 47 && ch < 58)
        return 1;
    return 0;
}

Parser::Parser() : InputQueue(100), OutputQueue(100)
{

}

void Parser::Tokenize(const QString& InputString, int n)
{
    if (n >= InputString.size())
        return;
    else
    {
        if (isOperator(InputString[n]))
        {
            QString temp;
            temp.append(InputString[n]);
            Token temptoken(temp);
            InputQueue.enqueue(temptoken);
            Tokenize(InputString, n+1);
        }
        else if (isSpace(InputString[n]))
            Tokenize(InputString, n+1);
        else
        {
            QString temp;
            while (n < InputString.size() && !isSpace(InputString[n]) && !isParen(InputString[n]))
            {
                temp.append(InputString[n]);
                n++;
            }
            if (isSpace(InputString[n]))
            {
                if (isDigit(InputString[n+1]))
                {
                    temp.append(' ');
                    n++;
                    while (n < InputString.size() && !isSpace(InputString[n]) &&
                                    !isParen(InputString[n]))
                    {
                        temp.append(InputString[n]);
                        n++;
                    }
                    Token temptoken(temp);
                    InputQueue.enqueue(temptoken);
                    Tokenize(InputString, n);
                }
                else if (isOperator(InputString[n+1]))
                {
                    Token temptoken(temp);
                    InputQueue.enqueue(temptoken);
                    Tokenize(InputString, n+1);
                }
            }
            else if (isParen(InputString[n]))
            {
                Token temptoken(temp);
                InputQueue.enqueue(temptoken);
                temp.clear();
                temp.append(InputString[n]);
                Token temptoken2(temp);
                InputQueue.enqueue(temptoken2);
                Tokenize(InputString, n+1);
            }

        }

     }
}

int Parser::precedence(Token T)
{
    if (T.OperatorToken())
    {
        char temp = T.OperatorPart();
        if (temp == '^')
            return 4;
        if (temp == '*' || temp == '/')
            return 3;
        if (temp == '+' || temp == '-')
            return 2;
    }
    return 1;
}

void Parser::LoadOutputQueue()
{
    while (!InputQueue.empty())
    {
        Token temptoken;
        InputQueue.dequeue(temptoken);
        if (temptoken.isNumber())
            OutputQueue.enqueue(temptoken);
        else if (temptoken.isLeftParen())
            OperatorStack.push(temptoken);
        else if (temptoken.isRightParen())
        {
            while (!OperatorStack.empty() && !(OperatorStack.Peek()).isLeftParen())
            {
                Token temp;
                OperatorStack.pop(temp);
                OutputQueue.enqueue(temp);
            }
            if (!OperatorStack.empty() && (OperatorStack.Peek()).isLeftParen())
                OperatorStack.pop(temptoken);
            else if (OperatorStack.empty())
                throw P1;
        }
        else if (temptoken.isOperator())
        {
            while (!OperatorStack.empty() && precedence(temptoken) < precedence(OperatorStack.Peek()))
            {
                Token temp;
                OperatorStack.pop(temp);
                OutputQueue.enqueue(temp);
            }
            OperatorStack.push(temptoken);
        }

    }
    while (!OperatorStack.empty())
    {
        Token temptoken;
        OperatorStack.pop(temptoken);
        if (temptoken.isLeftParen())
            throw P2;
        OutputQueue.enqueue(temptoken);
    }

}

//this function takes a QString (of chars) and from that builds its queue of tokens
void Parser::LoadInputQueue(const QString &QS)
{
    Tokenize(QS,0);
}

void Parser::CopyOutputToString(QString &QS)
{
    QString tempstring;
    Token temptoken;
    for (int i=OutputQueue.Size()-1; i>=0; i--)
    {
        temptoken = OutputQueue.Element(i);
        tempstring.append(temptoken.toQString());
    }
    QS = tempstring;

}

void Parser::CopyInputToString(QString& QS)
{
    QString tempstring;
    Token temptoken;
    for (int i=InputQueue.Size()-1; i>=0; i--)
    {
        temptoken = InputQueue.Element(i);
        tempstring.append(temptoken.toQString());
    }
    QS = tempstring;
}

void Parser::PrintInputQueue(ostream& out)
{
    out << InputQueue << endl;
}

void Parser::PrintOutputQueue(ostream& out)
{
    out << OutputQueue << endl;
}

void Parser::PrintOperatorStack(ostream& out)
{
    out << OperatorStack << endl;
} 
```

令牌.cpp

```
#include "Token.h"
#include <QStringList>

enum TOKEN_EXCEPTIONS{UNKNOWN_TOKEN};

Token::Token()
{

}

Token::Token(const QString& Substring)
{
    if (isInt(Substring))
        SetIntPart(Substring);
    else if (isDouble(Substring))
        SetDoublePart(Substring);
    else if (isFraction(Substring))
        SetFractionPart(Substring);
    else if (isMixed(Substring))
        SetMixedPart(Substring);
    else if (isOperator(Substring))
        SetOperatorPart(Substring);
    else
    {
        cout << qPrintable(Substring) << endl;
        throw UNKNOWN_TOKEN;
    }
}

void Token::SetIntPart(const QString& Substring)
{
    ClearAll();
    intpart = Substring.toInt();
    inttoken = 1;
}

void Token::SetDoublePart(const QString& Substring)
{
    ClearAll();
    doublepart = Substring.toDouble();
    doubletoken = 1;

}

void Token::SetFractionPart(const QString& Substring)
{
    ClearAll();
    QStringList Q;
    Q = Substring.split('/');
    Fraction frac(Q[0].toInt(),Q[1].toInt());
    fractionpart = frac;
    fractiontoken = 1;

}

void Token::SetMixedPart(const QString& Substring)
{
    ClearAll();
    QStringList Q1, Q2;
    Q1 = Substring.split(' ');
    QString wholepart = Q1[0];
    Q2 = Q1[1].split('/');
    QString numeratorstring = Q2[0];
    QString denominatorstring = Q2[1];
    Mixed M(wholepart.toInt(),numeratorstring.toInt(),denominatorstring.toInt());
    mixedpart = M;
    mixedtoken = 1;
}

void Token::SetOperatorPart(const QString& Substring)
{
    ClearAll();
    operatorpart = Substring[0].toAscii();
    operatortoken = 1;
}

bool Token::isDouble(const QString& Substring)
{
    int pointcount=0;
    int intcount=0;
    int pointloc=0;

    for (int i=0; i<Substring.size(); i++)
    {
        if (isdigit(Substring[i].toAscii()))
            intcount++;
        if (Substring[i].toAscii() == '.')
        {
            pointcount++;
            pointloc = i;
        }
    }

    if (pointcount != 1)
        return 0;
    if (intcount != Substring.size() - 1)
        return 0;
    return 1;

}

bool Token::isInt(const QString& Substring)
{
    if (Substring[0].toAscii() == '0')
        return 0;

    for (int i=0; i<Substring.size(); i++)
    {
        if (!isdigit(Substring[i].toAscii()))
            return 0;
    }

    return 1;
}

bool Token::isFraction(const QString& Substring)
{
    int slashcount=0;
    int intcount=0;
    int slashloc=0;

    for (int i=0; i<Substring.size(); i++)
    {
        if (Substring[i].toAscii() == '/')
        {
            slashcount++;
            slashloc = i;
        }
        if (isdigit(Substring[i].toAscii()))
            intcount++;
    }

    if (slashcount != 1) // if there is not exactly 1 slash in substring
        return 0;
    if (intcount != Substring.size() - 1) //if the rest of the chars are not integers
        return 0;
    if (slashloc == 0 || slashloc == Substring.size() - 1) //if slash is at wrong location
        return 0;
    if (Substring[slashloc+1].toAscii() == '0' ||
            Substring[0].toAscii() == '0')
        return 0;
    return 1;
}

bool Token::isMixed(const QString& Substring)
{
    if (Substring[0].toAscii() == '0')
        return 0;

    int spacecount=0;
    int slashcount=0;
    int intcount=0;
    int slashloc=0;
    int spaceloc=0;

    for (int i=0; i<Substring.size(); i++)
    {
        if (isspace(Substring[i].toAscii()))
        {
            spacecount++;
            spaceloc = i;
        }
        if (isdigit(Substring[i].toAscii()))
            intcount++;
        if (Substring[i].toAscii() == '/')
        {
            slashcount++;
            slashloc = i;
        }
    }

//    cout << "spacecount: " << spacecount << endl;
//    cout << "slashcount: " << slashcount << endl;
//    cout << "intcount: " << intcount << endl;
//    cout << "slashloc: " << slashloc << endl;
//    cout << "spaceloc: " << spaceloc << endl;

    if (spacecount != 1)
        return 0;
    if (slashcount != 1)
        return 0;
    if (intcount != Substring.size() - 2)
        return 0;
    if (slashloc == 0 || slashloc == Substring.size()-1)
        return 0;
    if (spaceloc == 0 || spaceloc == Substring.size()-1)
        return 0;
    if (slashloc < spaceloc)
        return 0;
    if (!isdigit(Substring[slashloc-1].toAscii()) || !isdigit(Substring[slashloc+1].toAscii()))
        return 0;
    if (!isdigit(Substring[spaceloc-1].toAscii()) || !isdigit(Substring[slashloc+1].toAscii()))
        return 0;
    return 1;

}

bool Token::isOperator(const QString& Substring)
{
    if (Substring.size() != 1)
        return 0;
    if (Substring[0] == '+' ||
            Substring[0] == '-' ||
            Substring[0] == '*' ||
            Substring[0] == '^' ||
            Substring[0] == '/' ||
            Substring[0] == '(' ||
            Substring[0] == ')')
        return 1;
    return 0;

}

void Token::ClearBools()
{
    mixedtoken = 0;
    inttoken = 0;
    doubletoken = 0;
    fractiontoken = 0;
    operatortoken = 0;

}

void Token::ClearParts()
{
    intpart = 0;
    doublepart = 0;
    Fraction f(0);
    fractionpart = f;
    Mixed m(0);
    mixedpart = m;
    operatorpart = NULL;
}

QString Token::toQString()
{
    QString tempstring;
    if (inttoken)
    {
        QString temp;
        temp.setNum(intpart);
        tempstring.append('[');
        tempstring.append(temp);
        tempstring.append(']');
        return tempstring;
    }
    else if (doubletoken)
    {
        QString temp;
        temp.setNum(doublepart);
        tempstring.append('[');
        tempstring.append(temp);
        tempstring.append(']');
        return tempstring;
    }
    else if (fractiontoken)
    {
        Fraction F = fractionpart;
        QString temp;
        tempstring.append('[');
        temp.setNum(F.Numerator());
        tempstring.append(temp);
        tempstring.append('/');
        temp.setNum(F.Denominator());
        tempstring.append(temp);
        tempstring.append(']');
        return tempstring;
    }
    else if (mixedtoken)
    {
        Mixed M = mixedpart;
        QString temp;
        tempstring.append('[');
        temp.setNum(M.WholePart());
        tempstring.append(temp);
        tempstring.append(' ');
        temp.setNum(M.Numerator());
        tempstring.append(temp);
        tempstring.append('/');
        temp.setNum(M.Denominator());
        tempstring.append(temp);
        tempstring.append(']');
        return tempstring;
    }
    else if (operatortoken)
    {
        tempstring.append('[');
        tempstring.append(operatorpart);
        tempstring.append(']');
    }
    else
        throw UNKNOWN_TOKEN;
}

void Token::Print(ostream& out) const
{
    if (inttoken)
    {
        out << intpart;
    }
    else if (doubletoken)
    {
        out << doublepart;
    }
    else if (fractiontoken)
    {
        out << fractionpart;
    }
    else if (mixedtoken)
    {
        out << mixedpart;
    }
    else if (operatortoken)
    {
        out << operatorpart;
    }
    else
        throw 1;

}

ostream& operator<<(ostream& out, const Token& T)
{
    T.Print(out);
    return out;
}

bool Token::isLeftParen()
{
    if (operatortoken && operatorpart == '(')
        return 1;
    return 0;
}

bool Token::isRightParen()
{
    if (operatortoken && operatorpart == ')')
        return 1;
    return 0;
}

bool Token::isOperator()
{
    if (operatortoken)
        return 1;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:26:52.673

我认为这肯定是错误的：

```
 while (n < InputString.size() && !isSpace(InputString[n]) && !isParen(InputString[n]))
        {
            temp.append(InputString[n]);
            n++;
        }
        if (isSpace(InputString[n])) 
```

应该：

```
 while (n < InputString.size() && !isSpace(InputString[n]) && !isParen(InputString[n]))
        {
            temp.append(InputString[n]);
            n++;
        }
        if (n < InputString.size() && isSpace(InputString[n])) 
```

真正的错误可能在其他地方没有读取您的所有代码，而是在您运行到字符串结尾然后访问它之后的字符的地方类似。

在调试器中运行您的代码，并在它断言时查看它在您的代码中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:30:17.107

长话短说——

```
ASSERT: "uint(i) < uint(size())" in file c:\QtSDK\Desktop\Qt\4.8.1\mingw\include
/QtCore/qstring.h, line 701 
```

这基本上意味着您正在运行字符串长度。它也可能是引用未初始化或释放的内存区域的效果。

我最有根据的猜测是解析器正在尝试读取输入字符串长度，这表明某些停止条件没有得到满足。

知道这一点，您可能更容易找到解析器问题本身。

如果您有一个允许调试的环境（例如 eclipse），那就去吧。如果没有，您可以尝试在代码的不同位置插入各种调试 printf 语句（我将从 Parser 开始）并查看它在哪里遇到错误。

我查看了代码，但没有发现明显的问题。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:29:34.890

有很多地方可以在不先检查索引的情况下访问字符（或类似的数组条目）：

```
void Parser::Tokenize(const QString& InputString, int n)
            if (isSpace(InputString[n]))
            {
                if (isDigit(InputString[n+1]))
                ...
                else if (isOperator(InputString[n+1]))

void Token::SetFractionPart(const QString& Substring)
    Fraction frac(Q[0].toInt(),Q[1].toInt());

void Token::SetMixedPart(const QString& Substring)
    QString wholepart = Q1[0];
    Q2 = Q1[1].split('/');
    QString numeratorstring = Q2[0];
    QString denominatorstring = Q2[1];

void Token::SetOperatorPart(const QString& Substring)
    operatorpart = Substring[0].toAscii();

bool Token::isInt(const QString& Substring)
    if (Substring[0].toAscii() == '0')

bool Token::isMixed(const QString& Substring)
    if (Substring[0].toAscii() == '0') 
```

通过在调试器中运行并查看堆栈跟踪，您可以更轻松地找到特定问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:34:51.473

以下是对您的代码的一些观察：

1.  您正在返回 0 或 1 而不是`false`或`true`在返回 a 的函数中`bool`。
2.  您可以搜索它，而不是与每个运算符字符进行比较：

    `bool is_operator(char c)
    {
    static const char operators_text[] = "+-/*()^";
    std::string operators_str(operators_text);
    return operators_str.find_first_of(c) != std::string::npos;
    }`

3.  您*的 is-a*函数可以简化：

    bool Parser::isSpace(const QChar& qch)
    {
    return qch == ' ';
    }

4.  让您的 isDigit 更具可读性：

    bool Parser::isDigit(const Qchar& qch)
    {
    return (qch >= '0') || (qch <= '9');
    }

或使用`std::isdigit()`.

# twitter - jQuery-oEmbed 有什么替代品吗？

> ID：14991742
> 
> 赞同：2
> 
> 时间：2013-02-20T23:17:32.670
> 
> 标签：twitter, youtube-api, oembed

我需要为一个项目做一些客户端oEmbedding。我一直在使用 jQuery-oEmbed，但我发现当我最需要的服务提供商真的是大公司时，它有点矫枉过正：YouTube、SoundCloud、Twitter、Wikipedia。此外，我们最近向我们的网站添加了严格的 HTTPS 访问策略，因此我们不能查询不支持 SSL 的 API。

我可以手动编辑 que jQuery-oEmbed 代码以删除我认为合适的网站，但我想知道是否有更好的选择 - 即支持上述主要 API 并且默认仅使用 HTTPS 的更简洁的 oEmbed 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T04:27:07.873

有 fork jquery-oembed-all，位于此处：

[https://github.com/starfishmod/jquery-oembed-all](https://github.com/starfishmod/jquery-oembed-all)

它不一定比图书馆更轻，实际上甚至可能有更多选择，但它至少是一种替代方案，也许值得进行一些比较。AFAIK，这些是 oEmbed 的唯一编程解决方案......但我也很想知道其他人是否知道任何其他库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T11:46:46.140

我刚刚挖出的另一种选择是[http://www.mediaelementjs.com/](http://www.mediaelementjs.com/)

此 JS 可以独立运行或与 jQuery 一起运行，以包装*视频*和*音频*HTML5 元素，包括 youtube，并为任何设备提供合适的播放器。

另一个不错的功能是它为播放器提供了皮肤功能，就像 [ytChromeless](http://viget.com/inspire/youtube-chromeless-video-jquery-plugin)所做的一样（不幸的是，它无法在没有 Flash 的情况下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T02:04:49.273

我最终为此目的建造了[ohembed 。](https://github.com/symeapp/ohembed)它是轻量级的、便携的，并且支持开箱即用的 SSL。

# perl - 如何使用 Cache::FileCache 清除所有缓存的对象？

> ID：14991745
> 
> 赞同：2
> 
> 时间：2013-02-20T23:17:40.577
> 
> 标签：perl, mod-perl

我正在使用[`Cache::FileCache`](http://search.cpan.org/perldoc/Cache%3a%3aFileCache)并且缓存存储在`/tmp/FileCache/`

里面`/tmp/FileCache/`有3个目录：

*   `__AUTO_PURGE__`
*   `Default`
*   `namespace`

哪个可以安全删除以清除缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:31:39.097

[`Cache::FileCache`](http://search.cpan.org/perldoc/Cache%3a%3aFileCache)实现[`Cache::Cache`](http://search.cpan.org/perldoc/Cache%3a%3aCache)接口。

您可能想要编写一个简短的脚本，而不是直接弄乱文件系统，例如

```
use strict; use warnings;
use Cache::FileCache;

my $cache = Cache::FileCache->new(
   {namespace => 'whatever namespace you are using'}
);
$cache->clear; # or Clear to remove all objects from all caches of this type. 
```

# ruby-on-rails - 遍历多个二维数组并对它们进行排序

> ID：14991753
> 
> 赞同：1
> 
> 时间：2013-02-20T23:18:02.417
> 
> 标签：ruby-on-rails

我对 ruby​​ 和 rails 很陌生，我正在构建我的第一个应用程序。我有一个方法（enroll_again），它遍历所有代理合同并对它们进行排序，其中最快到期。此方法返回一个带有 [[Agentname, numdays]] 的二维数组。我正在尝试在更高级别上为所有帐户的所有合同运行此方法。

```
<% @accounts.each do |account| %>
    <% account.contracts.enroll_again.each do |x,y| %>
        <li>
            <%= "#{y} Days remain on \n #{x}" %>
        </li>
    <%end%>
 <%end%> 
```

上面的代码返回特定于帐户的已排序元素列表，但整个列表仍未排序。我尝试将enroll_again 返回的所有元素放入一个单独的数组中，但我的语法一定是错误的，因为它总是返回一个空列表。
编辑 ：

```
def self.enroll_again
  d= Date.today
  contract = Contract.all
  temp = contract.map do |x|
    [
      Account.where(:accounts => { :id => x.account_id }).first.name),
      ((Date.strptime(x.startd,'%m/%d/%Y') + x.duration.months)-d).to_i
    ]
  end
  temp.sort_by{|x,y|y}
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:47:42.587

您应该能够在数据库级别执行排序。我假设您想根据合同中剩余的天数对结果进行排序。

```
def self.enroll_again
  days_left = "DATEDIFF(DATE_ADD(contacts.startd, INTERVAL x.duration MONTHS), CURDATE())"
  Contract.select("accounts.name account_name, #{days_left} days_left").
    joins(:account).order("days_left DESC").
    map {|c| [c.account_name, c.days_left]}
end 
```

我假设您使用的是 MySQL 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:29:26.103

您应该能够执行以下操作

```
<% @accounts.each do |account| %>
  <% account.contracts.sort_by(&:remaining_days).each do |contract| %>
    <li>
      <%= "#{contract.remaining_days} Days remain on \n #{account.name}" %>
    </li>
  <%end%>
<%end%>

def remaining_days
  @remaining_days ||= ((Date.strptime(startd,'%m/%d/%Y') + duration.months) - Date.today).to_i
end 
```

这一点，我认为更容易理解，而且您可以重复使用 remaining_days 方法。

# functional-programming - 如何实现具有 LinkedList 样式的堆栈并就地修改？

> ID：14991754
> 
> 赞同：1
> 
> 时间：2013-02-20T23:18:03.983
> 
> 标签：functional-programming, ocaml

在`Java`中，很容易实现一种`linkedlist`风格`stack`。

我们只是创建了一个内部类`Item`，它有两个属性：`value`和`next`。

然后我们总是主要的第一项。

然后`push`，我们创建一个新的`Item`并让它的下一个指向当前，`first item`然后让当前`first item`成为新的`item`。

可以做类似的事情`pop`。

* * *

但是我怎样才能在 OCaml 中做到这一点？尤其是当我们想要`in place modification`( `mutable`) 时？

我说`mutable`是因为正常`pop`只弹出值，而不是新堆栈。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T23:39:20.327

OCaml 是一种多范式语言。使用可变数据一点也不难。但是学习没有它真的值得付出努力（恕我直言）。好处出奇的大，成本出奇的小。

尽管如此，这里是一个可变堆栈类型的快速草图。

```
type 'a stack = { mutable stack: 'a list }

let new_stack () = { stack = [] }

let is_empty stack = stack.stack = []

let push x stack = stack.stack <- x :: stack.stack

let pop stack =
    match stack.stack with
    | [] -> raise Not_found
    | x :: xs -> stack.stack <- xs; x 
```

（你也可以从定义开始`type 'a stack = 'a list ref`，但是这个版本展示了如何拥有你自己的可变记录字段。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:40:44.067

为了补充 Jeffrey 的出色回答，我想指出，在这种情况下，很容易为 Stack 数据结构实现持久接口*和*可变接口，因为可变接口可以构建在持久接口之上。

```
module Impl = struct
  type 'a t = 'a list
  let empty = []
  let is_empty = function [] -> true | _ -> false
  let push x stack = x::stack

  let pop = function
    | [] -> raise Not_found
    | x::xs -> (x,xs)
end

module PersistentStack : sig
  type +'a t
  val empty : 'a t
  val is_empty : 'a t -> bool
  val push : 'a -> 'a t -> 'a t
  val pop : 'a t -> 'a * 'a t
end = struct
  include Impl
end

module MutableStack : sig
  type 'a t
  val new_stack : unit -> 'a t
  val is_empty : 'a t -> bool
  val push : 'a -> 'a t -> unit
  val pop : 'a t -> 'a
end = struct
  type 'a t = 'a Impl.t ref
  let new_stack () = ref Impl.empty
  let is_empty stack = Impl.is_empty !stack
  let push x stack = (stack := Impl.push x !stack)
  let pop stack =
    let (x, xs) = Impl.pop !stack in
    stack := xs;
    x
end 
```

# c++ - 将 GL_TRIANGLE_STRIP 显示为线框

> ID：14991756
> 
> 赞同：1
> 
> 时间：2013-02-20T23:18:20.783
> 
> 标签：c++, c, opengl, gl-triangle-strip

我正在努力让opengl三角形条显示为线框。我的显示算法如下所示：

```
// want to display by strip here to allow for quick processing of each of the polygons that we need
// allow a quick strip of polygons to be drawn
glBegin(GL_TRIANGLE_STRIP); 
// set the triangle strip up for front-facing drawing to allow for clockwise
// glFrontFace(GL_CW);

// cache height / width etc of this element
int height = int(heightField->getHeight()),
    width = int(heightField->getWidth());   

// want to loop through each row, stopping one from the bottom
for (int y = height -2; y >= 0; --y) {

    // we want to circle for each element in the next for loop and counter-clockwise add our vertices to the point
    for (int x = 0; x < width - 2; ++x ) {

        // http://en.wikipedia.org/wiki/Triangle_strip -- for reference on the element
        glVertex3fv(heightField->getVertex(x, y+1));//add the left corner point -- point 1
        glVertex3fv(heightField->getVertex(x, y));//add the current point -- point 2
        glVertex3fv(heightField->getVertex(x+1, y+1));//add the next point -- point 3
        glVertex3fv(heightField->getVertex(x+1, y));//add the 4th point -- point 4
    }
}

// end the triangle strip   
glEnd();
glDisable(GL_POLYGON_OFFSET_LINE); 
```

基本上，我正在做的是启动 gl_triangle_strip，然后为我的 heightfield 对象中的每个点绘制 x、y、z 坐标。

基本上这画出来的是一个大的白色斑点，我试图只显示不同点的线框。有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:19:32.700

试一试[`glPolygonMode()`](http://www.opengl.org/sdk/docs/man2/xhtml/glPolygonMode.xml)：

```
glPolygonMode( GL_FRONT, GL_LINE ); 
```

# jquery - 使用 ajax 和 jquery 发送 div id

> ID：14991757
> 
> 赞同：2
> 
> 时间：2013-02-20T23:18:26.007
> 
> 标签：jquery, html, send

如何使用相同的脚本发送我的 div 的 ID！就像当用户发送表单时，我也想发送 de div 的 id。我想为我的图片上传系统制作评论系统。

```
$(function() {
    $(".submit").click(function() {
        var name = $("#name").val();
        var email = $("#email").val();
        var comment = $("#comment").val();
        var dataString = 'name='+ name + '&email=' + email + '&comment=' + comment;

        if( comment=='')
        {
            alert('Please Give Valide Details');
        }
        else
        {
            $("#flash").show();
            $("#flash").fadeIn(400).html('<img src="ajax-loader.gif" align="absmiddle">&nbsp;<span class="loading">Loading Comment...</span>');
            $.ajax({
            type: "POST",
                url: "piccommentajax.php?id=<? echo $idcom ?>",
                data: dataString,
                cache: false,
                success: function(html){

                    $("ol#show").append(html);
                    $("ol#show li:first").fadeIn("slow");
                    document.getElementById('comment').value='';
                    $("#name").focus();

                    $("#flash").hide();
                }
            });
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:22:43.727

给定您的代码，您将执行以下操作：

```
datastring += '&divid=' + $('...').attr("id"); 
```

你投入的`...`一切都不同。我们无法从问题中得知。

进行疯狂的*猜测*，但是？尝试：`$(this).closest("div").attr("id");`这将为您提供最接近单击的提交按钮的*封闭div。*

# java - “StdIn.isEmpty()”java:

> ID：14991760
> 
> 赞同：-3
> 
> 时间：2013-02-20T23:19:05.890
> 
> 标签：java, stdin

“StdIn.isEmpty()”java：我正在使用 Eclipse，控制台从不显示输出，因为我不知道如何终止输入。我尝试按空格/制表符/回车，但控制台仍然不显示输出并继续要求更多输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T22:54:07.097

我假设您正在传递一个文本文件......如果是这样，请使用

```
java foo < bar.txt 
```

代替

```
java foo bar.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T17:28:20.327

问题是控制台一直要求用户输入，并且永远不会终止。只需按“Control + d”即可解决此问题。

这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:29:27.607

您可以按 ctrl-z（至少在 Windows 中这对我有用），但您可能不想这样做。这意味着您的程序只能从控制台读取一次。最好一次只读取一行，而不是尝试读取“整个文件”。然后，您只需按 Enter 键即可完成阅读。像这样的东西：

```
Scanner s = new Scanner(System.in);
String t = s.nextLine(); 
```

# java - 访问 EJB 分离的接口时出现 IllegalAccessException

> ID：14991761
> 
> 赞同：1
> 
> 时间：2013-02-20T23:19:17.710
> 
> 标签：java, maven, glassfish, ejb

我的 EJB 项目具有以下结构并使用 maven 打包。它在 core.jar 文件中打包了 ejb。*通过将所有接口和 POJO 移动到打包为 jar (core-common.jar)*的单独项目中，远程查找成为可能，然后将其作为依赖项添加到 web 模块中，以使其能够将它们用于远程 EJB 调用。

```
├── core.jar
├── app_war
│   ├── META-INF
│   └── WEB-INF       
├── lib
    └──core-common.jar 
```

当我部署我的应用程序时，我最终`IllegalAccessException - access denied`会尝试在核心尝试实例化任何 POJO 和`core-common.jar`. POJO 或类都没有私有方法或构造函数。这让我很困惑。

另外让我指出，过去这些 POJO 有其构造函数`protected`，在重新分解它以分层 POJO 和接口之后，我决定将所有这些都公开。

有谁知道重构后可能导致这种非法访问的原因是什么？该应用程序部署在 Glassfish 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:14:34.500

经过数小时的痛苦和毫无乐趣的网络挖掘后，我决定`core-common.jar`使用`core`. 这解决了它。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>resource-dependencies</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>unpack-dependencies</goal>
                    </goals>
                    <configuration>
                        <includeGroupIds>net.proj-alkaline</includeGroupIds>
                        <includeArtifactIds>core-common</includeArtifactIds>
                        <outputDirectory>${project.build.outputDirectory}</outputDirectory>
                        <includes>**/*</includes>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

# android - TouchImageView 留下痕迹

> ID：14991770
> 
> 赞同：0
> 
> 时间：2013-02-20T23:19:55.067
> 
> 标签：android, zooming

我正在使用 TouchImageView 来获得 ImageView 上的放大/缩小功能。虽然它有效，但当我缩小时，它不会清除先前放大的图像，导致图像周围出现痕迹，如下图所示。请查看当我缩小时出现的顶部和底部的波浪，留下缩放图像的痕迹。

我在 matrix.postTranslate 之前尝试了 invaldiate()，但这并没有解决这个问题。无论如何，要在不留下痕迹的情况下完成这项缩小工作。

[![带轨迹的图像](../Images/67d6d6f9142a3d7b9e6005ffb2c77bef.png)](https://i.stack.imgur.com/Crxdt.png)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:27:27.013

在将背景颜色设置为 ImageView 后，这个问题就消失了。就我而言，我将其设置为 Color.Black

# php - 如何使用 PHP 在 multilpe 字符串中搜索 HTML 标签？

> ID：14991774
> 
> 赞同：0
> 
> 时间：2013-02-20T23:20:11.050
> 
> 标签：php, arrays, loops, string-search

您可以使用`strpos()`搜索 HTML 标记吗？似乎产生无效的结果。还尝试转换为`htmlentities()`- 仍然没有运气。如何正确搜索文本装饰，例如：粗体、斜体和下划线？

**示例**：（[演示](http://codepad.viper-7.com/AIszYb)）

```
/* HTML Tags to search for. */
$html_tags = array(
    'bold' => array(
        'before' => '<strong>',
        'after' => '</strong>'
    ),
    'italics' => array(
        'before' => '<em>',
        'after' => '</em>'
    ),
    'underline' => array(
        'before' => '<span style="text-decoration: underline;">',
        'after' => '</span>'
    )
);
/* Sample Strings... */
$html_test = array(
    'bold_with_html' => '<strong>Some string containing HTML tags.</strong>',
    'italics_with_html' => '<em>Some string containing HTML tags.</em>',
    'underline_with_html' => '<span style="text-decoration: underline;">Some string containing HTML tags.</span>',
    'without_html' => 'Some string containing no HTML tags.'
);
/* Check for HTML Tags. */
$results = array();
foreach($html_test as $key => $value){
    foreach($html_tags as $decoration => $html_tag){
        if(stripos($html_tag['before'], $value) !== false && strripos($html_tag['after'], $value) !== false){
            $results[$key][$decoration] = 'Located HTML: '.$decoration.'!';
        } else{
            $results[$key][$decoration] = 'No HTML located.';
        }
    }
}
print_r($results); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:30:48.767

你把参数的顺序弄错了`stripos`，应该是干草堆，然后是针...

```
if(stripos($value,$html_tag['before']) !== false && strripos($value,$html_tag['after']) !== false){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:27:10.617

为什么要使用 RegEx 执行此操作？你最好的选择是 DOM。

[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags?page=1&tab=votes#tab-top)

# .net - 为什么 PostSharp 会跳过我在构建服务器上的一个项目？

> ID：14991781
> 
> 赞同：3
> 
> 时间：2013-02-20T23:21:17.297
> 
> 标签：.net, teamcity, postsharp

我最近通过 NuGet 升级了 PostSharp，但它已停止工作，但仅在极少数情况下。它不适用于我的构建服务器（TeamCity），也不适用于我的*一个*项目。其他项目都正确转换。

仅在我的一个项目中丢失 PostSharp 转换可能会发生什么变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:21:17.297

如果发生这种情况，有两件事需要检查：

首先，确保*您的调试和发布配置*不包含以下 XML：

```
<SkipPostSharp>True</SkipPostSharp> 
```

该指令可以出现在一种或两种配置中，如果你像我一样，你只能通过你的构建服务器测试后者。

* * *

其次，最近的 PostSharp 版本（至少 2.1.7.28+）改变了将 MSBuild 目标导入项目的方式，特别是使用 NuGet。以前是 PS 只是简单地导入了目标，如果 PostSharp 目标文件不存在，则项目没有加载。这很麻烦，因为必须先加载项目，然后 NuGet 才能自动下载目标文件。

现在，导入指令如下所示：

```
<Import Project="..\packages\PostSharp.2.1.7.28\tools\PostSharp.targets"
        Condition="Exists('..\packages\PostSharp.2.1.7.28\tools\PostSharp.targets')" /> 
```

这真的很方便，因为这意味着项目仍然可以在 NuGet 完成之前加载。

不幸的是，这也意味着当您第一次加载项目时，不会加载 PostSharp 目标。在 TeamCity 上，出于某种原因——即使未选中“在构建之前清理所有文件”——它也*从未*加载过这些目标。

将以下文件签入源代码管理解决了该问题：

*   PostSharp.properties
*   PostSharp.targets
*   PostSharp.tasks

* * *

最后，作为预防措施，我绝对推荐一些运行时测试（例如单元测试），以确保 PostSharp 正确地转换了您期望的所有内容。对于每个使用 PostSharp 方面的项目，请考虑这样的单元测试：

```
Assert.That(MyProject.IsTransformedByPostSharp, Is.True); 
```

属性`IsTransformedByPostSharp`只是检查[`Post.IsTransformed`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/P_PostSharp_Post_IsTransformed.htm)属性。

# c++ - Django 作为 mysql 代理服务器？

> ID：14991783
> 
> 赞同：3
> 
> 时间：2013-02-20T23:21:20.230
> 
> 标签：c++, python, mysql, c, django

我正在构建一个由 MySQL 服务器支持的 Django 支持的站点。这个 MySQL 服务器将从网站以外的其他来源访问，以读取和写入表数据；例如用户在本地运行的连接到数据库的程序。

目前本地运行的程序是使用 MySQL/C Connector 库直接连接到 sql server 并执行查询。在最终向公众发布的版本中，这似乎是不安全的，因为我会在代码或配置文件中将连接字符串暴露给数据库。

我正在考虑的一种替代方法是将所有查询发送到 Django 网站（使用用户的登录名和密码进行身份验证），然后该站点将代表用户清理和执行查询并将结果返回给他们。

这有很多我能想到的缺点。通过处理所有 SQL 查询，网络服务器将承受更大的负载，这可能会超出我主机的限制。此外，我必须想办法在 Python 中序列化和传输 sql 结果，然后在客户端用 C/C++ 反序列化它们。这将是需要编写和维护的大量自定义代码。

人们能想到这种方法的任何其他缺点吗？

这听起来合理吗？如果合理，任何可以减轻工作的事情；例如 Python 或 C 库来帮助开发代理接口？

如果这听起来是个坏主意，对替代解决方案的任何建议，即专门研究这种类型的代理 sql 服务器逻辑的 Python 库，一种加密 sql 连接字符串的方法，以便我可以安全地使用我当前的解决方案，等等......？

最后，这是一个有效的担忧吗？该数据库目前不包含任何关于用户的非常敏感的信息（最敏感的是他们的电子邮件和他们可能从其他来源重复使用的网站密码），但如果它不安全，将来可能会引起我的担忧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:43:56.530

这是一个完全有效的问题，也是一个非常普遍的问题。您已经描述了创建 RESTful API。我想它可以被认为是数据库的代理，但通常不被称为代理。

Django 是一个很好的工具，用于完成此任务。Django 甚至有几个包可以帮助快速开发，Django REST Framework、Tastiepy 和 django-piston 是最受欢迎的。当然，您可以只使用普通的旧 Django。

您的 Django 项目将是唯一与数据库交互的东西，并且客户端可以向 Django 发送经过身份验证的请求；所以客户端永远不会直接连接到您的数据库。这将为您在每个客户端、每个资源的基础上提供细粒度的权限控制。

> 通过处理所有 SQL 查询，网络服务器将承受更大的负载，这可能会超出我主机的限制

我相信扩展 Web 服务比扩展从客户端到数据库的直接连接要容易得多。有许多经过验证的方法可用于扩展每秒对数据库有数百个请求的应用程序。因为您和网络服务器之间有 Django，所以您可以为频繁请求的资源实现缓存。

> 此外，我必须想办法在 Python 中序列化和传输 SQL 结果，然后在客户端用 C/C++ 反序列化它们

这应该是一个有争议的问题。有许多非常流行的数据交换格式。我从未使用过 C/C++，但快速搜索我看到了几个 c/c++ json 序列化程序。python 有免费内置的 JSON，如果你使用预制的 C/C++ JSON 库，不应该有任何自定义代码需要维护。

> 人们能想到这种方法的任何其他缺点吗？

我认为没有任何缺点，这是一种久经考验的真实方法。它已经被证明了十年，世界上最受欢迎的网站通过 restful api 暴露自己

> 这听起来合理吗？如果合理，任何可以减轻工作的事情；例如 Python 或 C 库来帮助开发代理接口？

听起来很合理，我在答案开头提到的 Django 应用程序应该提供一些样板，让您更快地开始使用您的 API。

# sql - 当我们可以简单地使用 SELECT INTO 时，为什么我们需要创建视图？

> ID：14991789
> 
> 赞同：0
> 
> 时间：2013-02-20T23:21:40.667
> 
> 标签：sql, sql-server

为什么我们需要创建视图，而我们可以简单地使用 select into？

例如：

```
select table1.columnX,...,table2.columnY 
into newtable 
from table1,table2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:22:58.577

`SELECT INTO`在新表中创建查询结果的副本。本质上，这变成了当时查询结果的固定快照，除非您构建机制以使结果保持最新（例如基表上的 DML 触发器）。

另一方面，视图根本不存储数据。* 它只是一个查询，通常不出于性能原因使用，而是通过创建可重用模块来简化对底层数据的访问，也许还可以在某些方面实现安全性方式（例如，拒绝`SELECT`基础表并仅公开视图中的某些列和/或行）。

*-除了索引视图，它实现了结果。

另外，[请不要使用没有指定的坏、坏、坏的内部连接语法`INNER JOIN`](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)。

# backbone.js - Backbone.js：无法读取 undefiend 的属性“等待”

> ID：14991792
> 
> 赞同：0
> 
> 时间：2013-02-20T23:22:13.330
> 
> 标签：backbone.js

我遇到了 Backbone.js 的问题。

我正在使用[siuying 的 memorySync 插件](https://github.com/siuying/Backbone.memorySync)来利用模型、集合及其相关方法，但实际上并没有将它们同步到服务器。

这段代码：

```
n0 = karass.nodes.create();
n1 = karass.nodes.create();
Backbone.memorySync('update', karass.nodes, {}); 
```

给我以下错误：

```
Uncaught TypeError: Cannot read property 'wait' of undefined backbone.js:466
_.extend.save.options.success backbone.js:466 
Backbone.memorySync backbone.memory.js:78 
Backbone.sync backbone.localStorage.js:188
_.extend.sync backbone.js:276
_.extend.save backbone.js:476
_.extend.create backbone.js:847 (anonymous function) test.js:21 
```

哪里 `nodes`是 Backbone.Collection 的节点，它们只是 Backbone.Models （有两个函数，但将它们注释掉会给我同样的错误）。所以实际上是一个空模型。这是节点的代码：

```
nodes = new (Backbone.Collection.extend({

    model: Node,

    store: new MemoryStore('nodes'),

}))(); 
```

正如您从堆栈跟踪中看到的那样，我也在使用我知道 memorySync 已有一年的历史，并且我正在使用 Backbone.js 0.9.10，所以也许你知道我可以做些什么来修复 memorySync 插件。

最让我困惑的是 localStorage 出现在堆栈跟踪中，即使我在节点集合中使用 MemoryStore。

**编辑：**哦，我还重新定义`Backbone.getSyncMethod`为：

```
Backbone.getSyncMethod = function(model) {
  if(model.localStorage || (model.collection && model.collection.localStorage)) {
    return Backbone.localSync;
  }

  if(model.store || (model.collection && model.collection.store)){
    return Backbone.memorySync;
  }

  return Backbone.ajaxSync;
}; 
```

在包括 Backbone、localStorage 和 memorySync 之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:27:39.260

查看 memorySync 的源代码（第 78 行）：

[https://github.com/siuying/Backbone.memorySync/blob/master/backbone.memory.js#L78](https://github.com/siuying/Backbone.memorySync/blob/master/backbone.memory.js#L78)

似乎它正在尝试调用成功函数，即使未定义一个。

作为一种解决方法，您可以尝试传递一个空的成功函数：

```
Backbone.memorySync('update', karass.nodes, { success: function () {} }); 
```

对于长期使用，您可能需要向 memorySync 项目提交错误报告或补丁。

# php - 发布带有值的多维选择数组

> ID：14991793
> 
> 赞同：0
> 
> 时间：2013-02-20T23:22:22.237
> 
> 标签：php, html, forms, multidimensional-array, foreach

我有一个显示 50 个产品的页面。每个产品最多可以有 4 个类别。

这个页面需要一个保存按钮，所以我想弄清楚如何发送 3 条信息。产品`id`、所有 4 个产品`categories`和类别`values`。

提交时我得到：

```
35:Array
88:Array 
```

这是当前结构：（请记住，其中将有 50 个，因为每个产品可以有 4 个类别）

```
<select name="[ PRODUCT ID ][ CATEGORY ONE ]">
<option value="[ CATEGORY ID ]"> CATEGORY NAME </option>
</select>
<select name="[ PRODUCT ID ][ CATEGORY TWO ]">
<option value="[ CATEGORY ID ]"> CATEGORY NAME </option>
</select>
<select name="[ PRODUCT ID ][ CATEGORY THREE ]">
<option value="[ CATEGORY ID ]"> CATEGORY NAME </option>
</select>
<select name="[ PRODUCT ID ][ CATEGORY FOUR ]">
<option value="[ CATEGORY ID ]"> CATEGORY NAME </option>
</select> 
```

这是 2 个产品的代码：

```
<?
if(isset($_POST['productCat'])){
    foreach($_POST['productCat'] as $a=>$b){
        echo $a.':'.$b.'<br>';
    }
}

?>
<form method="post">
<select name="productCat[35][1]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<select name="productCat[35][2]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<select name="productCat[35][3]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<select name="productCat[35][4]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<select name="productCat[88][1]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<select name="productCat[88][2]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<select name="productCat[88][3]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<select name="productCat[88][4]">
    <option value="[3]">3</option>
    <option value="[4]">4</option>
    <option value="[5]">5</option>
    <option value="[6]">6</option>
    <option value="[7]">7</option>
    <option value="[8]">8</option>
</select>
<input type="submit" value="Save">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:37:34.383

您应该将 jQuery 与`data-`属性一起使用，以便您可以轻松地将数据收集到要发布到服务器的对象中。

您可能可以存储在 GET 查询变量中的产品 ID：`?prodId=43`

```
<select data-category="1">
   <option value="3">3</option>
   <option value="4">4</option>
   <option value="5">5</option>
   <option value="6">6</option>
   <option value="7">7</option>
   <option value="8">8</option>
</select> 
```

和 jQuery 部分：

```
var info = [];

$('select').each(function() {
   info.push({
              'category': $(this).data('category'),
              'value': $(this).val()
            });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:33:22.860

既然你有

```
<select name="productCat[35][1]">
<select name="productCat[35][2]">
...
<select name="productCat[88][1]">
<select name="productCat[88][2]"> 
```

的价值

$_POST['productCat']

实际上是一个数组。像这样的数组：

```
 array( 35 => array( 1 => .., 2 => .., 3 => ..., ... ),
          88 => array( 1 => .., 2 => .., 3 => ..., ... )
        ); 
```

因此，您的调试输出**非常合理**。

您可以像这样访问数组：

```
$_POST[ 'productCat' ][ 35 ][ 3 ] 
$_POST[ 'productCat' ][ 88 ][ 5 ] 
```

一般来说，如果一个变量（表达式）引用了一个数组——甚至是一个数组作为另一个数组的一部分——**只需追加`[...]`访问这个子数组**。

*   $_POST[ 'productCat' ] 是您的脚本返回的全部内容
*   $_POST[ 'productCat' ][ 35 ] 都是产品 35 的值
*   $_POST[ 'productCat' ][ 35 ][ 5 ] 是产品 35 的类别 5 的选定值

# vb.net - 使用 VB.Net 获取图像的宽度和高度

> ID：14991802
> 
> 赞同：6
> 
> 时间：2013-02-20T23:23:06.917
> 
> 标签：vb.net

在 VB.net 中，我需要通读一个充满图像的文件夹并获取它们：文件名、像素高度和像素宽度，并将它们的值分配给各个变量。

谢谢。

麦克风。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T23:32:09.223

试试这个：

```
Imports System.IO
Imports System.Drawing
Module Module1

    Sub Main()
        Dim s As New DirectoryInfo("C:/Files")
        Dim files As FileInfo() = s.GetFiles("*.jpg")
        For Each f As FileInfo In files
            Dim bmp As New Bitmap(f.FullName)
            Console.WriteLine("Width: " & bmp.Width.ToString() + " > Height: " & bmp.Height.ToString())
        Next
        Console.Read()
    End Sub

End Module 
```

# ruby - 如果缺少 ERb 标签，中间人不会在模板链上解析源文件

> ID：14991807
> 
> 赞同：0
> 
> 时间：2013-02-20T23:23:45.953
> 
> 标签：ruby, middleman, tilt

我正在将 Jekyll 网站转换为 Middleman。我已将我的文件命名为 filename.html.md.liquid.erb，以便按以下顺序处理这些库：ERb，然后是liquid，然后是 kramdown。我发现如果我在文件中没有至少一个 erb 标签，模板解析就会停止，整个文件将呈现为纯文本，而不是先被液体解析，然后再被 kramdown 解析。只需添加

```
<% if nil %>
<% end %> 
```

在源文档的底部会导致整个模板链被渲染，但我不想*被迫*包含这些。我只是想拥有*选择权*。

*编辑：我刚刚发现，如果通过扩展指定的任何*模板实际上没有任何处理要做，这也适用。因此，例如，如果我有 filename.html.md.liquid.erb 并且我有 ERb 标签但没有液体标签，则 ERb 将呈现正常，但 Markdown 将作为静态文本输出。

我将其标记为倾斜和中间人只是因为我不确定问题可能出在哪里。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:20:48.250

看起来原因与缓存有关。当我删除缓存调用时，模板会一直呈现在链上。我还更改了缓存键以使用模板扩展名，这似乎也有效。通过将[rendering.rb:257](https://github.com/middleman/middleman/blob/3.0-stable/middleman-core/lib/middleman-core/core_extensions/rendering.rb#L257)更改为

```
template = cache.fetch("compiled_template_#{extension}".to_sym, options, body) do
    ::Tilt.new(path, 1, options) { body }
end 
```

即使前一个模板的处理不包含任何模板语言标签，模板链也会解析其余的扩展。我在 Middleman 中打开[了一个问题](https://github.com/middleman/middleman/issues/798)，因为可能有比这更好的方法来解决它。

# asp.net - 根据 IP 地址限制对 Elmah 的访问

> ID：14991808
> 
> 赞同：4
> 
> 时间：2013-02-20T23:24:14.793
> 
> 标签：asp.net, iis-6, elmah

我需要限制对 elmah.axd 的访问。elvue.html 基于某些 IP 地址。该网站位于 IIS 6.0 和 .Net 3.5 上。我无法使用表单身份验证或 Windows 身份验证。我正在考虑使用http模块的方法。 [http://www.codeproject.com/Articles/16384/Using-ASP-NET-HTTP-Modules-to-restrict-access-by-I](http://www.codeproject.com/Articles/16384/Using-ASP-NET-HTTP-Modules-to-restrict-access-by-I)

我不能在 web.config 中使用限制访问的方法，因为这仅适用于 IIS 7。 [http://boseca.blogspot.com/2010/12/programmatically-addremove-ip-security.html](http://boseca.blogspot.com/2010/12/programmatically-addremove-ip-security.html)

有人对我如何解决这个问题有意见吗？请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T23:19:46.953

我使用以下代码实现了这一点：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
        {
            var ClientSourceIP = Context.Request.Headers["CLIENT_SRC_IP"];
            var HTTPClientSourceIP = Context.Request.Headers["HTTP_CLIENT_SRC_IP"];
            var isValidClientSourceIP = ClientSourceIP == null || 
                Regex.IsMatch(ClientSourceIP, ConfigurationManager.AppSettings["ValidClientSourceIP"]);
            var isValidHTTPClientSourceIP = HTTPClientSourceIP == null || 
                Regex.IsMatch(HTTPClientSourceIP, ConfigurationManager.AppSettings["ValidHTTPClientSourceIP"]);

            if (
                (Context.Request.Path.Contains("elmah.axd") || Context.Request.Path.Contains("elvue.aspx")) &&
                ((isValidClientSourceIP && isValidHTTPClientSourceIP) == false)
            )
            {
                this.Context.Response.StatusCode = 403;
                return;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:28:09.800

我在 IIS 7 中使用一个模块完成了此操作：IP 限制。

这是有关如何在 IIS 6 中执行此操作的指南：http: [//www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/4117d9e2-c7e0-46db-88f6-6e804b4325b0.mspx? mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/4117d9e2-c7e0-46db-88f6-6e804b4325b0.mspx?mfr=true)

另外，您是否尝试过像这样修改 web.config：[http ://weblogs.asp.net/gurusakar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder -in-web-config.aspx](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)？

# facebook - 我如何按地点或场地.id/name 查找活动

> ID：14991810
> 
> 赞同：1
> 
> 时间：2013-02-20T23:24:23.887
> 
> 标签：facebook, events, location

我正在执行此查询以获取用户的所有事件。这工作正常。

```
SELECT name, pic, start_time, end_time, location, description 
FROM event WHERE
  eid IN ( SELECT eid FROM event_member WHERE uid = '252874629056' ) 
LIMIT 200 
```

但是当 facebook 页面/用户是活动的场地/位置时，我遇到了这个查询的问题。如果页面/用户是场地/位置，则它不是活动成员。

由于我无法按活动或场地 ID 搜索的原因，我不知道如何通过位置或场地 ID 查找活动。

我怎样才能？

# c# - 使用 BookSleeve 从 Redis 检索排序集的正确方法

> ID：14991819
> 
> 赞同：1
> 
> 时间：2013-02-20T23:25:07.213
> 
> 标签：c#, .net, date, booksleeve

根据[一些建议](https://stackoverflow.com/questions/14446531/how-to-save-and-retrieve-channel-data-from-redis-pub-sub-with-date-ranges)，我`ZADD`通过 BookSleeve使用 Redis`SortedSets.Add()`来按时间顺序保存数据，如下所示：

```
TimeSpan span = DateTime.UtcNow.Subtract(new DateTime(1970, 1, 1, 0, 0, 0)); 
_connection.SortedSets.Add(_db, thisChannel, message, span.TotalSeconds, false); 
```

使用 ServiceStack 的 AdminUI，我可以看到隐藏在 Redis 中的值。

这些值存储为 UTC，我现在希望能够返回一系列值。

简单地说，因为我最近保存了这些值，所以我尝试了：

```
var subset = _connection.Wait(_connection.SortedSets.Range(_db, thisChannel, span.TotalSeconds - 10000, span.TotalSeconds, offset: 0, count: 50)); 
```

在 VS 中，集合包含双精度值和 Byte[] 类型的 Key。我假设这是保存的数据的字节数组 - 即使我将它保存为字符串？

我在[这里](https://code.google.com/r/tobias-booksleeve/source/browse/Tests/SortedSets.cs?spec=svn3c4ab6a659ea1cfc89102fb6ac8eae87744285d5&r=3c4ab6a659ea1cfc89102fb6ac8eae87744285d5)查看了一些代码，想知道是否有关于如何使用此功能的大量文档和一些示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:18:59.040

我在此注意到的有趣的事情是`RangeString`，它应该是您的场景的理想选择，但缺少`offset`参数；我将纠正这一点 - 但现在，我们可以`Range`手动使用和解码密钥（redis 允许二进制密钥；它们不需要是字符串）；但是，以下内容成功通过：

```
[Test]
public void SO14991819()
{
    const int _db = 0;
    const string thisChannel = "SO14991819";
    const string message = "hi";
    using (var _connection = Config.GetUnsecuredConnection())
    {
        _connection.Keys.Remove(_db, thisChannel); // start from known state

        TimeSpan span = DateTime.UtcNow.Subtract(new DateTime(1970, 1, 1, 0, 0, 0));
        double val = span.TotalSeconds;

        _connection.SortedSets.Add(_db, thisChannel, message, val, false);

        var subset = _connection.Wait(_connection.SortedSets.Range(
            _db, thisChannel, span.TotalSeconds - 10000, span.TotalSeconds, offset: 0, count: 50));

        Assert.AreEqual(1, subset.Length);
        Config.AssertNearlyEqual(val, subset[0].Value);
        Assert.AreEqual(message, Encoding.UTF8.GetString(subset[0].Key));
    }
} 
```

我当然没有`MethodNotImplementedException`。我应该声明：我正在测试当前的“头部”，仅仅是因为那是我可用的。

* * *

供参考：在我的本地副本中，我`RangeString`使用偏移量/计数实现了，所以以下通过：

```
var subset = _connection.Wait(_connection.SortedSets.RangeString(
    _db, thisChannel, span.TotalSeconds - 10000, span.TotalSeconds, offset: 0, count: 50));

Assert.AreEqual(1, subset.Length);
Config.AssertNearlyEqual(val, subset[0].Value);
Assert.AreEqual(message, subset[0].Key); 
```

# php - PHP PDO LIKE 语句不成功

> ID：14991825
> 
> 赞同：0
> 
> 时间：2013-02-20T23:25:30.587
> 
> 标签：php, mysql, pdo

我已经用谷歌搜索并阅读了很多关于如何使用 PDO 在 mysql 中创建搜索的信息，但是我尝试为自己创建一个搜索仍然没有成功。

我在表中的两个字段中搜索同一组关键字。

```
$str = explode(' ','app ban');
$p_id = 5;
$search_term = '';
$stmt = $db->prepare('SELECT id from the_table WHERE p_id=:p_id AND (name LIKE :search_term1 OR text LIKE :search_term2)');
$stmt->bindValue(':p_id',$p_id, PDO::PARAM_INT);
$stmt->bindValue(':search_term1',$search_term, PDO::PARAM_STR);
$stmt->bindValue(':search_term2',$search_term, PDO::PARAM_STR);
foreach($str as $key => $value)
{
    $search_term = '%'.$value.'%';
    $stmt->execute();
    while($row = $stmt->fetchObject())
    {
        if(!isset($res[$row->id]))
            $res[$row->id] = 0;
        $res[$row->id] = $res[$row->id] + 1*strlen($value);
    }
}
print_r($res); 
```

即使我在名称和文本的几个字段中都有字符串“app”和“ban”，这也会给出一个空结果。当我在 phpmyadmin 中进行相同的搜索时，我得到了很多结果。

我尝试在关键字周围添加一些引号：'"%'.$value'%"'; 没有成功。我觉得我别无选择。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:44:17.383

关于 bindValue 上面的两个答案是正确的 - 它在执行时只解析一次值。您可以使用在 ->execute() 发生时解决的 bindParam。

根据[PHP bindParam 手册页](http://php.net/manual/en/pdostatement.bindparam.php)

> 将 PHP 变量绑定到用于准备语句的 SQL 语句中的相应命名或问号占位符。与 PDOStatement::bindValue() 不同，该变量被绑定为引用，并且只会在调用 PDOStatement::execute() 时进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:32:59.830

好吧，您定义**了 $search_term = '';** 清空字符串，然后您使用 bindValue 并使用具有空字符串值的相同变量。

在您尝试分配的循环内

```
$search_term = '%' . $value . '%'; 
```

但它已经被绑定，因此你不能修改它。移动你的

```
$stmt->bindValue(':search_term1',$search_term, PDO::PARAM_STR);
$stmt->bindValue(':search_term2',$search_term, PDO::PARAM_STR); 
```

在foreach循环之后

```
$search_term = '%' . $value . '%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:33:16.960

1.  您设置`$search_term`为空白字符串
2.  您将两个搜索词绑定为空白字符串
3.  然后您进入一个重新设置 的值`$search_term`但不重新绑定的循环。
4.  然后，由于某种原因，您仍在 #3 的循环中执行查询并检索结果。

# c# - 从 DataGridTemplateColumn ContentPresenter 中删除 ErrorTemplate

> ID：14991826
> 
> 赞同：2
> 
> 时间：2013-02-20T23:25:30.633
> 
> 标签：c#, wpf, wpfdatagrid

我发现当行的项目包含验证错误时，`ContentPresenter`用于显示内容的`DataGridTemplateColumn`默认显示。`ErrorTemplate`我看不到任何直接的方法来防止这种情况。有任何想法吗？

这是我第一次尝试确保没有显示验证错误模板：

```
<DataGridTemplateColumn Width="70" Header="Enabled" Validation.ErrorTemplate="{x:Null}" >
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox IsChecked="{Binding Enabled.Value}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center" Validation.ErrorTemplate="{x:Null}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellStyle>
        <Style >
            <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
        </Style>
    </DataGridTemplateColumn.CellStyle>
</DataGridTemplateColumn> 
```

![例子](../Images/95c5705ed9974d89c492b766ddbe27f6.png)

使用 Snoop 我看到单元格包含一个`ContentPresenter`显示验证错误的单元格。

我发现我只能通过删除数据网格中所有内容呈现器上的错误模板来禁用此功能，如下所示：

```
<DataGrid.Resources>
    <Style TargetType="ContentPresenter">
        <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
    </Style>
</DataGrid.Resources> 
```

有没有办法只影响单身`DataGridTemplateColumn`？

这篇文章看起来很相似： [DataGridCell Validation.ErrorTemplate 被忽略](https://stackoverflow.com/questions/9721960/datagridcell-validation-errortemplate-ignored)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T18:31:40.800

我找到了解决方案。`ContentPresenter`添加以from 为目标的资源样式可以`DataGridTemplateColumn.CellStyle`解决问题。

```
<DataGridTemplateColumn.CellStyle>
    <Style TargetType="{x:Type DataGridCell}">
        <Style.Resources>
            <Style TargetType="{x:Type ContentPresenter}">
                <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
            </Style>
        </Style.Resources>
    </Style>
</DataGridTemplateColumn.CellStyle> 
```

# c++ - MVC 4 将数据传递给部分视图 - 格式

> ID：14991827
> 
> 赞同：1
> 
> 时间：2013-02-20T23:25:31.973
> 
> 标签：c++, asp.net-mvc-4

我很难理解 MVC4 中的部分视图。我目前有一个用户配置文件页面，我希望有一个部分视图来显示另一个表中包含其用户 ID 的每条记录。

这是我用来在控​​制器中调用我的函数的 HTML 助手。

```
 @Html.Action("DisplayArticles", "Articles") 
```

这是我在我的文章控制器中调用以显示用户文章的方法。

```
 [HttpGet]
   [ChildActionOnly]
    public ActionResult DisplayArticles()
         {
           int id = WebSecurity.CurrentUserId;
           var articleList = new List<Article>();

           //Article articles = (from j in db.Article
           //         where j.UserID == id
           //         select j).ToList();

           //articleList.AddRange(articles);
           foreach (Article i in db.Article)
           {
               if (i.UserID == id)
               {
                   articleList.Add(i);
               }
           }

           return PartialView("_DisplayWritersArticle", articleList);
         } 
```

我的局部视图 _DisplayWriterArticle 只是使用 HTML 助手来显示数据。

```
@model Writegeist.Models.Article

    <table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.UserID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Content)
        </th>
    </tr>
    <tr>
        <th>
            @Html.DisplayFor(model => model.UserID)
        </th>
        <td>
            @Html.DisplayFor(model => model.Title)
        </td>
        <td>
            @Html.DisplayFor(model => model.Type)
        </td>
        <td>
            @Html.DisplayFor(model => model.Content)
        </td>
    </tr>

</table> 
```

我的问题是我将列表传递到视图中的方式，它没有被识别并且我得到了错误

```
> The model item passed into the dictionary is of type
> 'System.Collections.Generic.List`1[Writegeist.Models.Article]', but
> this dictionary requires a model item of type
> 'Writegeist.Models.Article'. 
```

如果我改变

```
return PartialView("_DisplayWritersArticle", articleList); 
```

至

```
return PartialView("_DisplayWritersArticle", new Writegeist.Models.Article()); 
```

我认为 articleList 的格式不正确。谁能指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:30:13.447

您的部分视图需要一篇文章，您正在给它一个它们的列表。

将模型更改为文章列表：

```
@model List<Writegeist.Models.Article> 
```

然后你必须遍历列表以显示它们：

```
<table>
@foreach(Article article in Model) {
    <tr>
        <th>
            @Html.DisplayNameFor(a => article.UserID)
        </th>
        <th>
            @Html.DisplayNameFor(a => article.Title)
        </th>
        <th>
            @Html.DisplayNameFor(a => article.Type)
        </th>
        <th>
            @Html.DisplayNameFor(a => article.Content)
        </th>
    </tr>
}
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:36:01.200

问题是我认为你正在传递一个列表，但你告诉视图它只是一篇文章。

改变你的

```
@model Writegeist.Models.Article to @model List<Writegeist.Models.Article> 
```

然后，您将需要遍历该列表以获取您期望的数据。

# jquery - 寻找用于拖放上传图像，拖放排序和删除的插件

> ID：14991830
> 
> 赞同：0
> 
> 时间：2013-02-20T23:25:40.393
> 
> 标签：jquery, image, file-upload, graphics

我正在寻找一个 jQuery/HTML5 插件，用户基本上可以在其中收集一组图像以获得设计灵感……比如灵感板或情绪板

所以拖放上传，从多个来源上传，可拖动，多选等

从我目前的搜索来看，Filepicker.io 看起来不错，但需要进行大量自定义。

有人知道其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:22:02.703

对于文件上传，我最喜欢的工具是[http://www.dropzonejs.com](http://www.dropzonejs.com)。

dropzone.js 是一个开源的 jQuery 插件，它提供拖放文件上传和 HTML5 中的图像预览。

它支持多张图片上传，并在浏览器中自动生成缩略图。

您可以配置最大文件大小、缩略图尺寸和可接受的文件类型。适用于现代浏览器和 IE 10+。

这只会让你走到一半……在文件上传之后，你有更多的选择来构建一个自定义界面，让你的用户标记它们、组织它们等等。

# ruby-on-rails - 测试不创建新指南

> ID：14991831
> 
> 赞同：0
> 
> 时间：2013-02-20T23:25:42.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在运行我的测试时，它实际上并没有创建新的指南。我根本看不到我缺少什么，因为我拥有所有属性...

```
1) Failure:
test_should_create_guideline_when_logged_in(GuidelinesControllerTest) [test/functional/guidelines_controller_test.rb:47]:
"Guideline.count" didn't change by 1.
<4> expected but was
<3>. 
```

**模型指南.rb**

```
attr_accessible :content, :hospital, :title, :user_id, :guideline_id, :specialty 
```

**guides_controller_test.rb**

```
test "should create guideline when logged in" do
    sign_in users(:testuser)
    assert_difference('Guideline.count') do
      post :create, guideline: { content: @guideline.content, hospital: @guideline.hospital, title: @guideline.title, user_id: users(:testuser).id, specialty: @guideline.specialty }
    end

    assert_redirected_to guideline_path(assigns(:guideline))

  end 
```

**固定装置/users.yml**

```
testuser:
  first_name: "Jonny"
  last_name: "Rotten"
  email: "jonnyrotten@gmail.com"
  base_hospital: "Rottem Hospital"
  profile_name: "jjrotten"
  encrypted_password: "password" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:34:24.570

在您的测试中，`@guideline`它的属性是从哪里获取的？我一直使用`rspec`而不是 Rails 的测试套件，所以不确定，但认为您需要执行以下操作：

```
post :create, guideline: { content: "This is the content", hospital: "Children's hospital", title: ... } 
```

如我错了请纠正我...

# uml - 用例图：在一个用例的几个参与者中，只有一些参与者可以访问扩展用例

> ID：14991833
> 
> 赞同：1
> 
> 时间：2013-02-20T23:25:47.793
> 
> 标签：uml, diagram, actor, use-case

如果我只是在主要的“使用案例”，这意味着每个人都可以访问它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T07:34:01.953

当一个用例扩展主要用例时，主要用例的扩展点可以有条件。作为条件，您可以指定特定的参与者。

![在此处输入图像描述](../Images/7e46154426880e2753fe39282d3bb43c.png)

如果演员可以概括，我也看到了这个解决方案。但我更喜欢第一个，因为我不确定它在技术上是否正确（正如您所指出的，扩展用例默认情况下每个人都可以访问）。

![在此处输入图像描述](../Images/55e941475bd0edea6c3b0c816218562b.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:59:51.797

*   制作两个（或更多）用例，一个是所有参与者都可以访问的“主要”用例，另一个用例是该主要用例的扩展。

*   使用扩展箭头将“主要”用例与另一个用例连接起来。

*   将所有参与者连接到主要用例

*   将某个参与者连接到另一个用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:05:36.793

I think the answer depends on what is the relation between the behaviors of the base use case (available to all the actors), and the behaviors of the restricted use case.

Let A the base use case and B the "restricted" use case.

If B consists of a sequence of "restricted" behaviors that must be performed at a certain point x in the execution of A, then it is an extend relationship:

```
 B --extend(x)--> A (extension point:x) 
```

If the behavior of A is executed at a single location of B, then it is an include relationship:

```
 B --include--> A 
```

Otherwise, I think it is better described as an specialization.

```
 B --------▷ A 
```

# scala - 带有 scala 播放表单助手的文本字段

> ID：14991841
> 
> 赞同：4
> 
> 时间：2013-02-20T23:26:27.483
> 
> 标签：scala, playframework, playframework-2.0, textfield

Scala 表单助手并不像我预期的那样一致

```
@form(action = routes.Admin.insertNewArticle, 'class -> "form-horizontal") {
  <fieldset>
    @textarea(field = articleForm("text"), args = 'rows -> 3, 'cols -> 50)
    @input(articleForm("author"), "author")
  </fieldset> 
} 
```

这些`input`字段看起来非常漂亮，左侧有标签，右侧有字段。但这`textarea`很奇怪，它没有用`<div>`标签包裹在 a 中，而是在`<dl>`标签中，底部有一个“必填”标志，我不知道如何删除。

这是它的外观图像：

![在此处输入图像描述](../Images/532f49465cc1595fb0c476790ddfb146.png)

关于如何使表格看起来一致的任何提示？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T00:50:51.167

你有几个选择。

首先，您可以覆盖帮助器，只为 textarea 控件放入您自己的手动 HTML。这在“自己处理 HTML 输入创建”部分下的[“使用表单模板帮助程序”下的文档中进行了描述，并且](http://www.playframework.com/documentation/2.0.3/ScalaFormHelpers)[在此处](https://stackoverflow.com/questions/10392302/creating-a-custom-field-constructor-in-play-2-scala)描述了常见的陷阱。如果你想要一个包含标签的 div，你可以这样做：

```
@helper.input(field = articleForm("text")) { (id, name, value, args) =>
    <div>
        <label>text</label>
        <textarea name="@name" id="@id" rows='3' cols='50'>@value</textarea>
    </div>
} 
```

您还可以使用 CSS 来设置`textarea`助手生成的默认 HTML 样式。`<dl>`标签只是一个[定义列表](http://www.w3schools.com/html/html_lists.asp)，可以像任何 html 列表一样设置样式。[作为参考，您可以在github](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/defaultFieldConstructor.scala.html)中找到默认的字段构造函数代码，该代码向您展示了生成的 html 的样子。

我假设您正在谈论的“必需”标志是`<dd>`您可以在生成的 HTML 中看到的错误标记。如果您不采用手动 HTML 路线，那么要摆脱它，您需要定义自己的字段构造函数。我在上面链接到的 Play 帮助页面也对此进行了描述。但是，如果您关心的只是消除错误，那应该很容易，只需复制默认字段构造函数代码（也在上面链接），然后更改或删除读取的部分`@if(elements.hasErrors) {error}`以及以开头的三行`@elements.errors(elements.lang).map`. “必需”错误本身来自`@elements.infos...`.

或者这个字段*不*应该是必需的问题？这是表单定义的问题，而不是助手的问题。将表单中的“文本”字段设为可选，如[Scala Forms 帮助页面](http://www.playframework.com/documentation/2.0.3/ScalaForms)中的“可选值”下所示。例如，如果您的任务定义位于`Application.scala`：

```
 val taskForm = Form (
     "text" -> optional(text) // changed from 'nonEmptyText'
   ) 
```

这也将使“文本”字段映射到 an`Option[String]`而不是 plain `String`。如果您的表单由案例类（或其他映射逻辑）支持，则您必须相应地更改它。

# javascript - 将脚本应用于具有唯一 ID 的多个视频标签

> ID：14991842
> 
> 赞同：0
> 
> 时间：2013-02-20T23:26:27.310
> 
> 标签：javascript, jquery

我有一个脚本，将皮肤应用于 id="videoLabel1" 的视频标签

```
$(function() {
    $('#videoLabel1').vp1_html5_Video({
        skin: 'futuristicChrome',
        seekBarAdjust:255
    });
}); 
```

我想修改脚本以将皮肤应用于任意数量的视频标签，每个标签都标记为 id="videoLabelX"，其中 X 是我选择的任意数字，以保持每个 id 唯一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:29:02.410

使用starts-with选择器[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

```
$(function() {
    $('[id^="videoLabel"]').vp1_html5_Video({
        skin: 'futuristicChrome',
        seekBarAdjust:255
    });
}); 
```

或向视频标签添加一个类 ( `class="videoLabel"`) 并将其用作选择器

```
$(function() {
    $('.videoLabel').vp1_html5_Video({
        skin: 'futuristicChrome',
        seekBarAdjust:255
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:30:04.633

您将使用`attribute-starts-with`选择器 ( `^=`)：

```
$('[id^=videoLabel]').vp1_html5_Video({
    skin: 'futuristicChrome',
    seekBarAdjust:255
}); 
```

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

***但是***，如果您可以控制 HTML，则最好在 video 标签中添加一个类：

```
<video class="skinnedVideoClass" id="videoLabel4">...</video> 
```

JS：

```
$('.skinnedVideoClass').vp1_html5_Video({ ... }); 
```

# jquery - 使用正则表达式和 Jquery 操作日期字段

> ID：14991846
> 
> 赞同：0
> 
> 时间：2013-02-20T23:26:44.330
> 
> 标签：jquery, regex

我希望有人可以帮助我从帖子中定位日期

从此“2013 年 2 月 27 日星期三 09:00:00 +1100”

对此

```
 <span class="day">27</span>
         <span class="month">Feb</span> 
```

忽略年份和时间。我的想法是，然后我可以设置日期和月份的样式，使其位于标题的左侧。

然后，班级日期和月份可以坐在一个带有深色背景的父 div 中，例如[1 http://www.canberra.edu.au/media/test/date.jpg](http://www.canberra.edu.au/media/test/date.jpg)

我猜是这样的？

```
 $("h6").html(function(index, old) {
   return old.replace(some regular expression/, '<span class="day">$1</span><span class="month>$2</span>"');
 }); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:02:03.940

```
var matches = /^.{3}, (\d+) (.{3}) \d+/.exec("Wed, 27 Feb 2013 09:00:00 +1100")

// matches[1] --> "27"
// matches[2] --> "Feb" 
```

# ruby - Ruby/DataMapper 查找属性为空的行

> ID：14991850
> 
> 赞同：1
> 
> 时间：2013-02-20T23:26:56.490
> 
> 标签：ruby, sqlite, datamapper

我有以下代码：

```
require 'data_mapper'

class Dataset
    include DataMapper::Resource

    property :id,        Serial
    property :name,      String,   :required => true
    property :year,      String,   :required => true

end

DataMapper.setup(:default, "sqlite://#{Dir.pwd}/database.db")
DataMapper.finalize.auto_upgrade!

Dataset.all(:year => nil).each do |dataset|
    puts dataset.inspect
    puts    
end 
```

我想找到`year`属性为空的所有行。但是当我运行这个脚本时，它给出了空输出。当我像这样运行它时：

```
Dataset.all(:year => "2005").each do |dataset|
    puts dataset.inspect
    puts    
end 
```

我得到正确的输出：

```
#<Dataset @id=178 @name="Supernatural" @year="2005"> 
```

在 sqlite shell 上运行这个查询会给我 7 行空`year`列：

```
sqlite> SELECT COUNT(`name`) FROM datasets WHERE `year` IS NULL;
COUNT(`name`)
-------------
7 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T19:11:22.167

听起来问题的根源是糟糕的迁移。DataMapper 认为没有年份为 NULL 的行，因为您告诉 DataMapper 不可能有任何年份为 NULL 的行。

但是数据库仍然保存它们，因此使用原始 SQL 绕过 DatamMapper 将产生它们。

解决方案是通过 DataMapper ( `:required => false`) 允许 NULL，或者修复数据库中的 NULL（即`UPDATE datasets SET year = '-1' WHERE year IS NULL`）

# javascript - 无法使用 javascript 获取属性的值

> ID：14991852
> 
> 赞同：1
> 
> 时间：2013-02-20T23:27:07.827
> 
> 标签：javascript

我收到错误消息“无法获取 'checked' 属性的值。对象为空或未定义。” 单击复选框时。

表单的名称是“test”，我想根据选中的第一个复选框显示更多输入字段，如果它们通过它，那么我不希望显示其他字段。

这是脚本：

```
function showhidefield()
{
    if (document.test.submode.checked) {
        document.getElementById("hideablearea").style.display = "block";
    } else {
        document.getElementById("hideablearea").style.display = "none";
    }
} 
```

这是我的输入行：

```
<input type="checkbox" name="submode" onclick="showhidefield()"> 
```

有没有办法让我的 JS 更稳固，以便在其他网页和任何浏览器上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:33:27.817

在复选框上放置一个 ID，然后使用`getElementById`. 这比其他方法更可靠，因为 ID 必须是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:36:06.927

页面上不会总是有一个`<form>`带有名称的`"test"`。

您可以通过使用`this`引用当前元素使其在没有 id 的情况下工作：

```
<input type="checkbox" name="submode" onclick="showhidefield(this, 'hideablearea')"> 
```

JavaScript：

```
function showhidefield(element, id)
{
  var node = document.getElementById(id);

  if (node) {
    node.style.display = element.checked ? 'block' : 'none';
  }
} 
```

[**演示**](http://jsbin.com/eyirub/1/)

该函数的第一个参数是复选框本身，第二个参数是您希望显示或隐藏的元素的 id。

# sql - 如何聚合我的 SQL 查询的结果？

> ID：14991857
> 
> 赞同：2
> 
> 时间：2013-02-20T23:27:36.530
> 
> 标签：sql, sum

我目前有以下查询，它返回特定员工和月份的时间表条目：

```
SELECT supervisors.employee, 
       hourscharged.project, 
       hourscharged.chargedescription, 
       hourscharged.account, 
       hourscharged.org, 
       hourscharged.entered_hrs 
FROM   accounting 
       INNER JOIN hourscharged 
               ON hourscharged.period_no_cd = accounting.period_no_cd 
       INNER JOIN supervisors 
               ON hourscharged.employeeid = supervisors.employeenumber 
WHERE  supervisors.employee = 'JOHN' 
       AND accounting.accountingmonth = 'FEB-13' 
GROUP  BY supervisors.employee, 
          hourscharged.project, 
          hourscharged.chargedescription, 
          hourscharged.account, 
          hourscharged.org, 
          hourscharged.entered_hrs 
```

该查询返回 7 行，其中包含以下值

```
员工 | 项目 | 收费说明 | 帐户 | 组织 | ENTERED_HRS：
约翰 | 15113 | MBT升级 | 0510 | 1.1.10.5 | 2.00
约翰 | 15113 | MBT升级 | 0510 | 1.1.10.5 | 3.50
约翰 | 15113 | MBT升级 | 0510 | 1.1.30.4 | 2.00
约翰 | 15113 | MBT升级 | 0510 | 1.1.30.4 | 3.50
约翰 | 34188 | KY13科技 | 0320 | 1.1.30.4 | 1.00
约翰 | 34188 | KY13科技 | 0320 | 1.1.30.4 | 4.00
约翰 | 34188 | KY13科技 | 0320 | 1.1.30.4 | 8.00
```

这些是时间表条目。我想显示具有这些行总数的唯一行，即：

```
约翰 | 15113 | MBT升级 | 0510 | 1.1.10.5 | 5.50
约翰 | 15113 | MBT升级 | 0510 | 1.1.30.4 | 5.50
约翰 | 34188 | KY13科技 | 0320 | 1.1.30.4 | 13.00
```

我试过了：

```
SELECT supervisors.employee, 
       hourscharged.project, 
       hourscharged.chargedescription, 
       hourscharged.account, 
       hourscharged.org, 
       Sum(hourscharged.entered_hrs) <-- * 
FROM   accounting 
       INNER JOIN hourscharged 
               ON hourscharged.period_no_cd = accounting.period_no_cd 
       INNER JOIN supervisors 
               ON hourscharged.employeeid = supervisors.employeenumber 
WHERE  supervisors.employee = 'JOHN' 
       AND accounting.accountingmonth = 'FEB-13' 
GROUP  BY supervisors.employee, 
          hourscharged.project, 
          hourscharged.chargedescription, 
          hourscharged.account, 
          hourscharged.org, 
          hourscharged.entered_hrs 
```

并得到：

```
约翰 | 15113 | MBT升级 | 0510 | 1.1.10.5 | 38.50
约翰 | 15113 | MBT升级 | 0510 | 1.1.30.4 | 38.50
约翰 | 34188 | KY13科技 | 0320 | 1.1.30.4 | 91.00
```

这很奇怪，因为以下查询（例如）

```
SELECT chargedescription, 
       Sum(entered_hrs) 
FROM   hourscharged 
WHERE  employeeid = '123456' 
       AND chargedescription LIKE 'KY13 S & T' 
GROUP  BY chargedescription 
```

给出了正确的总小时数，即：

```
约翰 | 34188 | KY13科技 | 0320 | 1.1.30.4 | 70.00
```

我可以用 SUM 做我想做的事吗？如果是这样，请指导我。我对聚合 SUM 函数的应用进行了广泛搜索，但似乎无法将其应用于我自己的问题。我也觉得奇怪的是，在我的复杂查询中使用 SUM 而不是 ENTERED_HRS 给了我完全错误的总小时数。如果 SUM 不起作用，那会怎样？我无法理解我需要应用的原则。此查询所基于的架构可能并不理想，但它是遗留的，我需要使用它。我也在使用 SQL Server 2005。谢谢。

我的查询`INNER JOIN`相当于：

```
SELECT supervisors.employee, 
       hourscharged.project, 
       hourscharged.chargedescription, 
       hourscharged.account, 
       hourscharged.org, 
       hourscharged.entered_hrs 
FROM   supervisors, 
       accounting, 
       hourscharged 
WHERE  supervisors.employee = 'JOHN' 
       AND hourscharged.employeeid = supervisors.employeenumber 
       AND accounting.accountingmonth = 'FEB-13' 
       AND hourscharged.period_no_cd = accounting.period_no_cd 
GROUP  BY supervisors.employee, 
          hourscharged.project, 
          hourscharged.chargedescription, 
          hourscharged.account, 
          hourscharged.org, 
          hourscharged.entered_hrs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:37:32.990

sum() 函数工作正常。您选择的其他字段会导致问题。或者它可能是您的数据。

在这两行中：

约翰 | 15113 | MBT升级 | 0510 | 1.1.10.5 | 38.50

约翰 | 15113 | MBT升级 | 0510 | 1.1.30.4 | 38.50

HoursCharged.Org 结果有不同的值。你应该看看是什么原因造成的。

# c - 从哪里调用我的可执行文件

> ID：14991859
> 
> 赞同：2
> 
> 时间：2013-02-20T23:27:43.447
> 
> 标签：c, bash, shell

我有一个“C”可执行文件 c_out，它可以从两个不同的脚本 scriptA 和 scriptB 执行。有没有办法在 c_out 中找出哪个脚本执行了我？没有传递给 c_out 的参数，但我想找出执行 c_out 的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:57:16.430

这是在 Linux 上确定这一点的快速方法。

```
#include <stdio.h>

int main(int argc, char* argv[])
{
        int ppid = 0;
        char syscmd[32];
        ppid = getppid();
        sprintf(syscmd,"cat /proc/%d/cmdline\n",ppid);
        system(syscmd);
        return 0;
} 
```

~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:31:57.270

您可以尝试找出父进程的可执行路径，但这不是一个可靠的解决方案，因为父进程可能在子进程之前终止，然后您的 C 进程将被转移到`init`*nixes 中。或者父母可能会用`exec`孩子代替自己，然后就没有可靠的方法来找到它。

根据您尝试解决的问题，最干净的方法可能会更改您的 C 程序以使其行为不同，而不取决于执行它的人，而是取决于[环境](http://pubs.opengroup.org/onlinepubs/009696799/functions/getenv.html)或命令行参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:29:45.117

只有在脚本运行它自己的 bash 进程时，读取 /proc/../cmdline 才有效。

如果它包含在 中`source script`，它将打印调用脚本/shell。

实际脚本存储在 bash 变量 BASH_SOURCE 中。

从 ac 程序中读取并不是那么容易，但是您可以使用 gdb 来做到这一点。

例如，在 amd64 上，这总是打印调用脚本（即使是源脚本）：

```
#include <stdio.h>

int main(int argc, char* argv[])
{
    int ppid = 0;
    char syscmd[256];
    ppid = getppid();
    sprintf(syscmd,"gdb --batch -ex \"attach %d\" -ex 'print *(*((*((char****)find_variable(\"BASH_SOURCE\") + 1) + 8) + 2) + 1)'\n",ppid);
    system(syscmd);
    return 0;
} 
```

# scala - 返回具有协变类型的 immutable.Map

> ID：14991861
> 
> 赞同：1
> 
> 时间：2013-02-20T23:27:46.727
> 
> 标签：scala, collections, types, covariance

我有一个容器类型，它的类型参数是协变的。

```
 class Container[+T](val map: Map[Int, T] = Map.empty[Int, T]){
    def add[B >: T](i: Int, b: B) = new Container(map + (i->b))
//    lazy val freqs = (map.toList groupBy (x=>x._2) mapValues(_.size))
//    lazy val uniq = map.toSet
      lazy val keySet = map.keySet
  } 
```

我在想我在尝试使用 freqs 或 uniq uncommented 进行编译时出错的原因与 Spiewak 先生在他的回答中所写的内容有关，即`Set`s 和`Map`s 在相关参数中是不变的。

[为什么 Scala 的不可变 Set 在其类型上不是协变的？](https://stackoverflow.com/questions/676615/why-is-scalas-immutable-set-not-covariant-in-its-type)

`Set`然而，我有点惊讶地发现包含返回类型为 T 的keySet 没有问题。

我能够通过写作部分解决这个问题

```
lazy val freqs:Map[_ <: Any, Int] = 
  (map.toList groupBy (x=>x._2) mapValues(_.size)) 
```

但这并不理想，因为密钥类型显示为 Any。我也想说

```
lazy val uniqueValues = freqs.keySet 
```

并得到 a`Set[T]`而不是 a`Set[Any]`

*   我怎样才能最好地实现`freqs`上述？
*   `keySet`其他方法失败时如何返回 Set[T]？
*   如何`Set[T]`在地图中获得唯一值？
*   为什么 _ <: Any 允许它编译？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:57:13.210

> 然而，我有点惊讶地发现包含 keySet 没有问题，它返回一个类型为 T 的 Set

不，不是的。`map`是类型的`Map[Int, T]`，所以虽然它的**值**是类型`T`，但它的**键**是类型`Int`。所以`keySet`这里是类型`Set[Int]`（而**不是** `Set[T]`），这意味着`T`' 的协方差没有问题。

> 当其他方法失败时，keySet 如何返回 Set[T]？

它没有（见上文）

> 如何在 Map 中获得一组唯一值的 Set[T]？

鉴于`Set`它的类型参数是不变的，根本没有办法在`Set[T]`里面有任何类型的 val `Container`，除非你将这些 val 标记为`private[this]`，或者使`Container`in 保持不变`T`。

> 我怎样才能最好地实现上述频率？

和上面一样的问题。

> 为什么 _ <: Any 允许它编译？

因为当明确声明 that`freq`是类型时，`Map[_ <: Any, Int]`您删除了对 的任何依赖`T`，因此就方差而言没有问题。如果您没有明确说明 的类型`freq`，则 scala （正确地）将类型推断为`Map[T, Int]`，这**确实**取决于`T`不变的位置。

# ruby - 如何使用 heroku-api.rb 文件将公共链接存储在变量中以在 heroku 上进行备份（使用 pgbackup:url）

> ID：14991872
> 
> 赞同：2
> 
> 时间：2013-02-20T23:28:29.323
> 
> 标签：ruby, api, heroku, add-on

我在 Heroku 上有一个应用程序，我想将 Heroku 上的生产数据库备份到单独的云服务提供商站点上的备份文件存储库中。为此，我需要从 heroku 获取公共 URL 以进行备份，我只是不确定如何调用 api 来获取它。这是我想如何获得它的一些粗略的 sudo 代码，但显然语法来自我的头脑/其他人的示例，所以它不是工作代码。

> 需要'heroku-api'
> 
> heroku = Heroku::API.new(:api_key => API_KEY)
> 
> *> （如果备份文件太大，那么你的数据库会被分割成多个备份文件，所以我需要遍历每个生成的公共 URL）*
> 
> heroku.get_addons('my-heroku-app').pgbackup.url.each 做 |public_file|
> 
> current_url = public_file.url.link
> *（在这里我会使用该链接将文件复制到另一台服务器）*
> 
> 结尾

Heroku 提供了有关如何从命令行而不是 api 执行此操作的文档。这是他们网站上关于如何从命令行执行此操作的片段。

```
> Downloading a backup
> 
> You can create a publicly accessible backup URL with the pgbackups:url
> command. This is useful when migrating data between applications,
> upgrading starter tier plans, and exporting your data.
> 
> $ heroku pgbackups:url
> "http://s3.amazonaws.com/hkpgbackups/app1234567@heroku.com/b004.dump?AWSAccessKeyId=ABCD1234&Expires=1289261668&Signature=3mMBeKISewgEUDT%2FL5mRz4EYS4M%3D"
> By default the URL will reference the most recent backup. To access
> another backup pass the backup ID to the pgbackups:url command. 
```

此外，他们在 github [https://github.com/heroku/heroku.rb](https://github.com/heroku/heroku.rb)上的文档中提供了一些帮助，但是该站点上的示例还不足以让我了解如何实际使用此 add-在。

对此的任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:51:37.943

因为它是一个单独的插件，所以它有自己的 api，而不是 heroku-rb 的一部分。如果您想查看 CLI 调用的 API，请查看此文件：[https ://github.com/heroku/heroku/blob/master/lib/heroku/client/pgbackups.rb](https://github.com/heroku/heroku/blob/master/lib/heroku/client/pgbackups.rb)

但是请注意，虽然您可以找出 api，但它**没有**记录在案，并且可以并且将会更改，恕不另行通知。这不是出于恶意，而是我们还没有花时间为 pgbackups 确定一个可靠的 api，我们会为站在后面感到自豪。

与此同时，尽管继续使用它，但请注意它。

# session - 获取旧的 REST 会话密钥

> ID：14991874
> 
> 赞同：1
> 
> 时间：2013-02-20T23:28:39.460
> 
> 标签：session, facebook-rest-api

因为 facebook 还没有将某些功能迁移到 GRAPH，所以我仍然需要通过 REST 进行一些调用。不幸的是，似乎没有办法为今天接受我的应用程序的用户获取 REST 会话密钥。

有什么方法可以从 facebook 请求 REST 会话密钥？我几乎所有的电话都是通过 GRAPH 进行的，但是在他们完成迁移功能之前，我一直没有一个....

提前致谢！

德国之声

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T00:23:04.663

所有需要会话密钥的 REST API 方法都应该使用访问令牌。

我刚刚测试了你之前提到的 links.preview 方法：

`https://api.facebook.com/method/links.preview?url=http://www.google.com&format=json&access_token=<REMOVED>`

回应是：

```
 {
   "href":"http:\/\/www.google.com\/",
   "name":"Google",
   "caption":"www.google.com",
   "description":"Search the world's information, including webpages, images, videos and more. Google has many special features to help you find exactly what you're looking for.",
   "media":[
      {
         "type":"image",
         "src":"http:\/\/www.google.com\/intl\/en_ALL\/images\/srpr\/logo1w.png"
      },
      {
         "type":"image",
         "src":"http:\/\/www.google.com\/images\/google_favicon_128.png"
      }
   ]
} 
```

# ios - 使用 iphone 在 xcode 中进行测试时，应用内购买将无法完成

> ID：14991877
> 
> 赞同：1
> 
> 时间：2013-02-20T23:28:52.017
> 
> 标签：ios, objective-c, xcode, in-app-purchase, app-store-connect

我刚刚使用 Ray Wenderlich 的教程将 IAP 添加到我的应用程序中。在我的输出中，我看到该产品未购买，然后我正在加载产品列表，然后提示我确认我要购买该产品，然后我单击购买，然后它在输出中显示它正在购买..仅此而已。

我将弹出一个显示先前删除的沙盒帐户的预填充旧 ID 的弹出窗口，其中密码字段为空。或者弹出一个消息说我已经在应用程序购买中购买了这个，但它还没有下载。

我现在正在使用消耗品。在我在教程中做一个测试应用程序之前，它是非消耗性的，这一切都通过了。但是现在我已经尝试过，即使是非消耗品，它也不会完成。此外，现在我曾经工作的测试应用程序达到了相同的点并且无法完成。

当我删除旧的 sanbox 帐户时，我是否在 iTunes Connect 中搞砸了？或者是什么？令人沮丧！

我绕着圈子转来转去。任何帮助都是极好的！

# java - 在 CentOS 上运行 SymmetricDS 作为服务

> ID：14991881
> 
> 赞同：4
> 
> 时间：2013-02-20T23:29:30.347
> 
> 标签：java, linux, centos, symmetricds

我已经在 CentOS 6.3 64 位上成功安装了 SymmetricDS。我可以启动它：

```
../bin/sym --port 8080 --server 
```

现在我正在尝试将其作为服务启动。

我按照以下说明进行操作：

[http://www.symmetricds.org/doc/3.2/html/advanced-topics.html#running-service](http://www.symmetricds.org/doc/3.2/html/advanced-topics.html#running-service)

命令

```
/etc/init.d/sym_service status 
```

返回

> SymmetricDS 未运行。

当我发出：

```
/etc/init.d/sym_service start 
```

我明白了

```
Starting SymmetricDS/etc/init.d/sym_service: /opt/symmetric-ds/bin/sym_service: /lib/ld-linux.so.2: bad ELF interpreter: No such file or directory 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T19:29:34.173

使用 SymmetricDS 打包的服务使用的是 x86 32 位版本的 Java Service Wrapper。您需要为您的平台下载最新版本的 JSW，即 Linux x86 64 位社区版，可在此处找到：

[http://wrapper.tanukisoftware.com/doc/english/download.jsp](http://wrapper.tanukisoftware.com/doc/english/download.jsp)

然后将文件复制到位：

```
jsw/bin/wrapper -> symmetricds/bin/sym_service
jsw/lib/wrapper.jar -> symmetricds/lib/wrapper.jar
jsw/lib/libwrapper.so -> symmetricds/lib/libwrapper.so 
```

# c++ - 错误 C2512：“平铺”：没有合适的默认构造函数可用

> ID：14991883
> 
> 赞同：1
> 
> 时间：2013-02-20T23:29:35.530
> 
> 标签：c++, default-constructor

**即使使用默认构造函数仍然有错误。**

```
class Foo {
    public:
    Foo ( int x, int y, int type );
} 
```

在 .cpp 文件中

```
Foo::Foo ( int x = 0, int y = 0, int type = 0 ) { 
```

然而，当我称之为

```
Foo foo_array[5][5]; 
```

我得到了错误。这可能是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T23:31:23.590

将默认参数放在构造函数的**声明**中。事实上，当您尝试创建数组时，编译器并不知道它们。

# php - 如何使用 Crypt_RSA 获取公钥

> ID：14991887
> 
> 赞同：1
> 
> 时间：2013-02-20T23:29:59.363
> 
> 标签：php, public-key, crypt, phpseclib

我编写了一个简单的测试，但它发送给我：“未验证”，我猜是因为我使用的是整个证书而不是公钥。什么方法给我公钥？

```
$rsa = new Crypt_RSA();
$rsa->setPassword('here I include password');
$rsa->loadKey(file_get_contents('i.pem')); // private key
$plaintext = 'abc';
$rsa->setSignatureMode(CRYPT_RSA_SIGNATURE_PKCS1);
$signature = $rsa->sign($plaintext);
//now the verification
$rsa->loadKey(file_get_contents('instancia_ope.crt')); //here maybe WRONG
echo $rsa->verify($plaintext, $signature) ? 'Verified' : 'Unverified'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:33:19.800

啊对不起你的验证，试试这个

```
$rsa->loadKey($rsa->getPublicKey()); 
echo $rsa->verify($plaintext, $signature) ? 'Verified' : 'Unverified'; 
```

# mule - 保存 mule 流时出现 java.lang.assertion 失败错误 - mule studio

> ID：14991888
> 
> 赞同：3
> 
> 时间：2013-02-20T23:30:01.103
> 
> 标签：mule, mule-studio

现在，每当我通过图形编辑器保存流程时，我总是在 mule studio 中收到 java.lang.assertionError 错误。如果我直接对 XML 进行更改，我不会收到任何错误。以前有人遇到过这个问题吗？

我在 Eclipse 问题选项卡中看到以下错误，

元素：响应不允许是元素 HTTP 的子元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T19:47:09.393

我做了一个流的副本，并删除了原来的，并重命名了副本。这个对我有用。

# sql-server-2008 - SQL Server 2008 和 2012 中 CONTAINSTABLE 的不同结果

> ID：14991893
> 
> 赞同：-1
> 
> 时间：2013-02-20T23:30:19.600
> 
> 标签：sql-server-2008, sql-server-2012, containstable

我在 SQL Server 2008 和 2012 中有 2 个相同的数据库，它们具有相同的全文索引设置。但是当我执行时`CONTAINSTABLE`，我得到了非常不同的结果。

```
SELECT course_id,course_name, full_desc, KEY_TBL.rank*20,MembershipType,cpl  
FROM Course_Search_TBL_WithDup AS cda with (nolock)INNER JOIN CONTAINSTABLE   
(Course_Search_TBL_WithDup, full_desc, '"children"',500) 
AS KEY_TBL ON cda.id = KEY_TBL.[KEY] 
```

似乎 2012 年和 2008 年`CONTAINSTABLE`会以不同的方式计算排名。因为来自两个数据库的结果具有非常不同的排名，因此记录的顺序非常不同。

事实是，在属性“full_desc”中，我有值为“children”或“children's”的记录，我猜这可能是原因。

但我也尝试在文本'"children*"' 上进行匹配，但 2008 年和 2012 年的结果仍然有很大不同。再次，返回的排名值`CONTAINSTABLE`是不同的。

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:32:00.020

全文搜索在 SQL Server 2012 中发生了显着变化，请参阅以下博客文章了解不同之处以及如何在需要时恢复到旧行为的详细信息：

[SQL Server 全文搜索 (FTS) 博客](http://blogs.msdn.com/b/sqlfts/archive/2011/11/18/new-word-breakers-may-return-different-results-in-sql-server-2012-full-text-search.aspx)

# html-helper - 使用带有 ForeignKey 列的 Telerik ASP.Net MVC 扩展显示多个值

> ID：14991895
> 
> 赞同：0
> 
> 时间：2013-02-20T23:30:35.860
> 
> 标签：html-helper, telerik-grid, telerik-mvc

根据我的阅读，似乎不可能将 ForeignKey 列关联为多选列表框。这是真的？

如果不是这样，我很熟悉 ForeginKey 列的使用，如果可能的话，我想知道如何使用代码片段来完成此操作。

如果确实不支持它（我有工具的最新扩展），我将如何实现它？如果 Telerik 没有解决方法，我想在下面。

下一个最好的事情是**在多行中显示用户（为指定的组选择每个不同的值）**，我猜。**我将如何使用 ForeignKey 或其他方式实现这个场景？**这意味着，**许多组可以有许多用户**。一张图片胜过千言万语。请参阅下面我想要实现的内容。

仅供参考，我有两列的值和文本信息，但**Groups 列不是列表框；它是一个文本框**并显示文本值。**用户列表框将具有为每个用户选择的值（假设用户列表框包含 10 个用户的列表）。**

```
Grid abc
Groups column (contains text value)    Users column (this is a ForeignKey ListBox)
-----------------------------------    -----------------------------------------------------------
grp1                                                        user1
grp1                                                        user2
grp1                                                        user3      
grp2                                                        user2
grp2                                                        user3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:29:12.647

我个人建议您创建 Grid 的层次结构来编辑这种关系。

例如

```
grp1
   user1
   user2
   user3
grp2
   user2
   user3 
```

可以在[此处](http://www.telerik.com/community/code-library/aspnet-mvc/grid/enable-crud-in-ajax-bound-grid-with-hierarchical-master-details-views.aspx)找到有关带有编辑的层次结构的实现。

选项 2 -> 由于扩展没有多选，因此添加这样的编辑器模板并不容易。无论如何，如果您以某种方式手动实现多选，则可以使用将其添加为编辑器，如此[处所示](http://demos.telerik.com/aspnet-mvc/grid/clientedittemplates)。

关于 ForeignKey - 这不是一个选项。

# c# - 以特定格式将项目添加到列表框

> ID：14991902
> 
> 赞同：0
> 
> 时间：2013-02-20T23:31:21.267
> 
> 标签：c#

我需要构建一个简单的应用程序，`listbox`通过填写 a`textbox`并单击 'Add'对用户添加到 a 的数据进行排序`button`。我大部分都没有问题，但有一件事给我带来了麻烦。我需要用户以特定格式输入数据：

```
<name>=<age> 
```

如果单击“添加” `button`，而格式错误的数据位于`textbox`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:45:51.937

解决此问题的一种方法是使用 MaskedTextBox：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)

而且由于您的格式并不复杂，您还可以使用简单的检查：

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (isValidFormat())
            MessageBox.Show("Valid Format");
        else
            MessageBox.Show("Invalid Format");
    }

   bool isValidFormat()
    {
        return (textBox1.Text.StartsWith("<") && textBox1.Text.IndexOf(">=<") > -1 && textBox1.Text.EndsWith(">"));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:50:18.880

您需要先验证您的项目，然后再将其添加到列表中。对于不太复杂的格式，您可以使用正则表达式：在将数据添加到列表之前，将文本框内容与正则表达式进行匹配。

您可以使用如下正则表达式检查您的输入是否与“name=age”之类的内容匹配：

```
if (Regex.IsMatch(textBox.Text, @"^.*?\=.*$"))
   // add item to the list 
```

# javascript - 如何对所有下一个可见表行执行条件检查？

> ID：14991904
> 
> 赞同：0
> 
> 时间：2013-02-20T23:31:27.227
> 
> 标签：javascript, jquery

当用户在文本输入字段内单击并按下向下或向上箭头键时，我会触发一些 javascript。此功能的目的是搜索表值，然后能够按向下和向上箭头键选择一个。我让它工作得很好，但我唯一遇到的问题是，当用户到达最后一个可见的表格行并再次按下时，突出显示的表格行消失了。我想要发生的是当用户到达最后一个表格行并再次按下时，我希望突出显示第一个可见表格行，以便用户可以再次开始键入可见表格行。这是相关的代码：

//javascript

```
$(function(){
    $("#main").on("keyup", "#search", function(e){
    e.preventDefault();
    searchTable($(this).val());
    });

    $("#main").on("keydown", "#search", hoverDown);
});

function hoverDown(e) {
    var $tbl = $('#tblDataBody');
    var $cur = $('.active', $tbl).removeClass('active').first();

if (e.keyCode === 40) { //down
  if ($cur.length) {

        // here is where we need to check to see if we are on the last one
        // and if we are we need to remove class active and add class active 
        // to the first visible table row
      $cur.nextAll(':visible:first').addClass('active');

        var $current = $('.active', $tbl).nextAll(':visible');
          console.log($current.length);

  } else {
      $("#tblDataBody tr:visible:first").addClass('active');
      console.log("down else");
  }
} else if (e.keyCode == 38) { //up
      e.preventDefault();
  if ($cur.length) {
      $cur.prevAll(':visible:first').addClass('active');
      console.log($cur);
  } else {
      $tbl.children().last().addClass('active');
  }
} else if (e.keyCode == 13) {
  if ($cur.length) {
        // manually invoke pjax after enter has been pressed
      var $url = $cur.find("a").attr("href");
      $.pjax({url: $url, container: '#main'});
  }
}
}
function searchTable(inputVal)
{

    var table = $('#tblData');
    table.find('tr').each(function(index, row)
    {
        var allCells = $(row).find('td');
        if(allCells.length > 0)
        {
            var found = false;
            allCells.each(function(index, td)
            {
                var regExp = new RegExp(inputVal, 'i');
                if(regExp.test($(td).text()))
                {
                    found = true;
                    return false;
                }
            });
            if(found == true)$(row).show();else $(row).hide();
        }

    });

} 
```

//HTML

```
<div id="main">
<input type="text" class="table-search" id="search" autocomplete="off"   placeholder="Search Clients…">
<table class="table" id="tblData">
<thead><tr><th>Name</th> <th>Title</th></tr></thead>
<tbody id="tblDataBody">
<tr><td><a href="http://lar.loc/cases">Scott</a></td> <td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Billy</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">George</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Sara</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">John</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Megan</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Ben</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Jully</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Bethany</a></td><td>Client</td></tr><tr><td><a href="http://lar.loc/cases">Alen</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Jane</a></td><td>Client</td></tr>
<tr><td><a href="http://lar.loc/cases">Alice</a></td><td>Client</td></tr></tbody></table>
</div> 
```

//CSS

```
.active {
    background-color: #f9f9f9;
} 
```

如果您想查看此代码的运行情况并想了解我在说什么，请查看此 jsfiddle：http: [//jsfiddle.net/scottm28/VDCyd/1/](http://jsfiddle.net/scottm28/VDCyd/1/)

单击文本输入并按向下箭头键，直到一直到底部。您会注意到，如果您再次按下向下箭头键，将不会有突出显示的表格行 - 这是我试图避免的。我希望它立即跳回顶部可见表行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:38:59.340

将您的相关代码更改为

```
if (e.keyCode === 40) { //down
    e.preventDefault();    

    var next = $cur.nextAll(':visible:first');
    if (next.length === 0){
        next = $('tr:visible:first', $tbl);
    }
    next.addClass('active');

} else if (e.keyCode == 38) { //up
    e.preventDefault();    

    var next = $cur.prevAll(':visible:first');
    if (next.length === 0){
        next = $('tr:visible:last', $tbl);
    }
    next.addClass('active');

} 
```

演示在[http://jsfiddle.net/VDCyd/3/](http://jsfiddle.net/VDCyd/3/)

# eclipse - 使用 PHP Explorer 中的 Aptana 插件从 Eclipse FTP 上传文件

> ID：14991906
> 
> 赞同：1
> 
> 时间：2013-02-20T23:31:43.453
> 
> 标签：eclipse, ftp, aptana

是否有一种快速简单的方法可以从 Eclipse 上传 php 文件。在 Dreamweaver 中，我会使用 shift-command-u。我已经设置了 Aptana 插件并且 FTP 正在工作，但是我可以弄清楚如何上传单个文件的唯一方法是导航远程连接，找到文件，然后右键单击并选择上传。

我认为也应该有来自 PHP 或项目资源管理器的上传文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:59:03.163

我在我的 Eclipse 安装中使用 Aptana 插件进行了尝试，确实有一个“上传”命令，您可以将键绑定分配给`Window > Preferences > General > Keys`. 尝试时遇到了一些麻烦，因为我`Ctrl + Shift + U`的操作系统（PeppermintOS 3）已经使用了我的快捷方式，但是我可以通过进入我的首选项>输入法切换器并选择 xim 而不是默认值来清除它。不知道这是否与您的情况有关。

# php - 没有在带有循环的html表中接收到正确的输出

> ID：14991907
> 
> 赞同：0
> 
> 时间：2013-02-20T23:31:49.813
> 
> 标签：php, loops

我开始通过一本初学者的书学习 PHP，并且在特定的练习中遇到了困难。这是关于决策和循环的一章末尾的练习文本：

> 编写一个以 1 为步从 1 到 10 的脚本。对于每个数字，显示该数字是奇数还是偶数，如果该数字是质数，还显示一条消息。在 HTML 表格中显示此信息。

我搜索了 www.php.net 并在 stackoverflow 上寻找与我所拥有的类似的问题，但没有找到任何可以正确完成代码的东西。这是我的代码，然后是它生成的输出的描述：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Counting to ten</title>
    <link rel="stylesheet" type="text.css" href="common.css" />
    <style type="text/css">
        th { text-align: center; background-color: #999; }
        th, td ( padding: 0.6em; )
        tr.alt td { background: #ddd }
    </style>
</head>
<body>

    <h3>Counting to ten</h3>

    <table cellspacing="1" border="1" style="width: 20em; border: 1px solid #999;">
        <tr>
            <th>Number</th>
            <th>Odd/Even</th>
        </tr>

<?php

$count = 10;

$num1 = 0;
$num2 = 1;

for ( $i=2; $i <= $count; $i++ )

{
$sum = $num1 + $num2;
$num1 = $num2;
$num2 = $sum;
}

?>
    <tr <?php if ( $i % 2 == 0 ) echo ' class="alt"' ?>>
        <td><?php echo $i?></td>
        <td><?php echo "even" ?></td>
    </tr>
    <tr <?php if ( $i % 2 == 1 ) ?>>
        <td><?php echo $i?></td>
        <td><?php echo "odd" ?></td>
    </tr>
</body>
</html> 
```

我没有收到错误。我正在接收带有表格的输出，正确的标题和格式，下面的两行说“11，偶数”[下一行]“11，奇数”。我尝试将 $count 的值更改为 0，这在本练习中没有意义，因为我使用的是“$i <= $count”。我的代码无法以正确的输出完成表格怎么办？感谢您阅读的好意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:35:16.140

您需要将输出表格的部分放在 for 循环中......

```
<?php

$count = 10;

$num1 = 0;
$num2 = 1;

for ( $i=2; $i <= $count; $i++ ){
  $sum = $num1 + $num2;
  $num1 = $num2;
  $num2 = $sum;
  ?>
    <tr <?php if ( $i % 2 == 0 ) echo ' class="alt"' ?>>
        <td><?php echo $i?></td>
        <td><?php echo "even" ?></td>
    </tr>
    <tr <?php if ( $i % 2 == 1 ) ?>>
        <td><?php echo $i?></td>
        <td><?php echo "odd" ?></td>
    </tr>
  <?php
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:39:16.947

您需要将 html 生成放在循环中**，并且**每次迭代只想输出一行

```
for ( $i=2; $i <= $count; $i++ )
{
   ?>
    <tr <?php if ( $i % 2 == 0 ) echo ' class="alt"'; ?>>
        <td><?php echo $i?></td>
        <td><?php 
            if ( $i % 2 == 0 ) echo 'even';
            else echo 'odd'; # there's a shorter way to do this bit too
         ?></td>
    </tr>
  <?php

} 
```

# facebook - Facebook Connect 生日烫发

> ID：14991911
> 
> 赞同：1
> 
> 时间：2013-02-20T23:32:08.800
> 
> 标签：facebook, connect, fbconnect

我对 Facebook 连接有一点问题，关于生日许可。

在我的 html 正文上：

```
<div class="fb-login-button" scope="user_birthday, user_about_me" perms="email,user_birthday"> Login with Facebook </div> 
```

在标题上，对于 jS，我有：

```
<script>
    // Additional JS functions here

    window.fbAsyncInit = function() {
        FB.init({
            appId      : 'XXXXXXX', // App ID
            channelUrl : '//connect.facebook.net/en_US/all.js', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML
        });

        // Additional init code here
        FB.getLoginStatus(function(response) {
            if (response.status === 'connected') {
                // connected
                FB.api('/me??accessToken='+response.authResponse.accessToken, function(user) {
                    var monthfb = user.birthday.substr(0,2);
                    var dayfb = user.birthday.substr(3,2);
                    var yearfb = user.birthday.substr(6,4);

                    $("input[id=year]").val(monthfb);
                    $("input[id=month]").val(dayfb);
                    $("input[id=day]").val(yearfb);

                    $("a.age_gate_submit").click();
                    alert('1');

                    console.log(user);
                    //$.cookie('age_gate', 'gohome',{ expires: 99 });
                    window.location = "home.html";
                });
            }
        });
    };

    function login() {
        FB.login(function(response) {
            if (response.authResponse) {
                // connected
                FB.api('/me??accessToken='+response.authResponse.accessToken, function(user) {
                    var monthfb = user.birthday.substr(0,2);
                    var dayfb = user.birthday.substr(3,2);
                    var yearfb = user.birthday.substr(6,4);

                    $("a.age_gate_submit").click();
                    alert('2');

                    //console.log(response.birthday);
                    console.log(user);
                    //$.cookie('age_gate', 'gohome',{ expires: 99 });
                    window.location = "home.html";
                });
        }
        });
    }

    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=XXXXXXX";
        ref.parentNode.insertBefore(js, ref);
    }(document));

</script> 
```

当我点击我的按钮时，我有一个好的窗口，我接受了 FB 应用程序，但是 jS 没有调用任何函数，所以 window.locations 不起作用。但是我刷新没关系，我可以过生日等等......所以问题就在我接受应用程序的那一刻：请如何重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:05:19.483

抱歉，您的回答对我没有帮助。但我找到了解决方案：

我必须实现 FB.Event.subscribe()，这个函数在一个人接受登录时起作用。

# email - html邮件问题

> ID：14991912
> 
> 赞同：0
> 
> 时间：2013-02-20T23:32:11.810
> 
> 标签：email, outlook

下面显示了我想要的电子邮件行中的图像。

但是，当我在其中一个图像周围添加 ahref 标记时，它会在 Outlook 2010 中显示时将最后一个图像推离该行。

我做错了什么，为什么标签会增加宽度？

```
<center>
<table style="border-collapse: collapse; padding: 0px; margin: 0px; width: 640px;"     cellspacing="0" cellpadding="0" bgcolor="#ffffff">
<tbody>
<tr style="margin: 0px; border: 0px; padding: 0px;">
<td style="height: 50px; margin: 0px; border: 0px; padding: 0px;" valign="top"><a  href="yn"><img src="images/yn1.png" border="0" width="528" height="50" align="left" style="float: left; margin: 0px; border: 0px; padding: 0px;display: block;" />   </a><img src="images/yn2.png" border="0" width="42" height="50" align="left" style="float: left; margin: 0px; border: 0px; padding: 0px;display: block;" /><img src="images/yn3.png" border="0" alt="The NSW Nationals" width="17" height="50" align="left" style="float: left; margin: 0px; border: 0px; padding: 0px;display: block;" /><img src="images/yn4.png" border="0" width="42" height="50" align="left" style="float: left; margin: 0px; border: 0px; padding: 0px;display: block;" /><img src="images/yn5.png" border="0" width="11" height="50" align="left" style="margin: 0px; padding: 0px; float: left;display: block;" />  </td>
</tr>
</tbody>
</table>
</center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:01:40.683

我解决了这个问题 - 我把我的图像放在一个表格中，每个单元格一个图像。

# git - 垃圾收集在 git 中的提交

> ID：14991916
> 
> 赞同：15
> 
> 时间：2013-02-20T23:32:22.907
> 
> 标签：git

我创建了一些提交`git subtree`，我希望收集垃圾（更多的是任何实际目的，只是为了了解可以收集什么以及为什么可以收集）。

我已经检查过这些提交没有通过以下方式引用：

```
# In any reflog
> git reflog --all --no-abbrev-commit | grep <hash>
(no output)

# In any branch, local or remote
> git branch --contains <hash>
(no output)
> git branch -r --contains <hash>
(no output)

# In any tag
> git tag --contains <hash>
(no output)

# In the current index
> git rev-list HEAD | grep <hash>
(no output)

# In references from filter-branch
> ls .git/refs/original/
(the folder does not exist) 
```

这些是[git gc 文档](http://www.kernel.org/pub/software/scm/git/docs/git-gc.html)列出的可能包含参考的地方。

之后仍然存在给定的提交`git gc`。

我错过了什么吗？或者是否有任何 git 管道命令可以检查所有这些引用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-21T05:33:01.390

每次我想删除松散的对象时，我都会使用以下命令：

```
rm -rf .git/refs/original/*
git reflog expire --all --expire-unreachable=0
git repack -A -d
git prune 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T23:36:06.427

提交（或一般的对象）实际上并没有被删除，直到它们被解压缩成松散的对象并保持这种状态至少 2 周。您可以使用`git gc --prune=now`跳过 2 周的延迟。

通常情况下，git 会将您的对象打包到一个包文件中。这提供了比松散对象更好的压缩和效率。这通常在执行 a 时发生`git gc`。但是，如果一个对象未​​被引用，那么`git gc`会将其解包回一个松散的对象中。

一旦解包，`git gc`将自动修剪旧的松散未引用对象。这由`--prune=<date>`标志控制，默认为 2 周前，因此它会修剪任何超过 2 周的旧的未引用对象。通过指定`--prune=now`，您要求`git gc`修剪任何比现在更旧的对象，这基本上意味着修剪任何存在的未引用对象。

# java - 数组列表 用作 HashMap 中的键，但 X[] 数组不起作用

> ID：14991917
> 
> 赞同：2
> 
> 时间：2013-02-20T23:32:27.383
> 
> 标签：java, arrays, collections, hashmap

当我尝试将数组和数组列表作为键放在 Map 中时遇到了这个问题。第一段代码：

```
 LinkedHashMap<ArrayList<String>, String> lhm = new LinkedHashMap<ArrayList<String>, String>();
    for (int i =0;i < strs.length; i++){
        ArrayList<String> arr = new 
            ArrayList<String>(Arrays.asList(strs[i].toLowerCase().split(" "))); 
        Collections.sort(arr);
        lhm.put(arr, strs[i]);
    } 
```

第二段代码：</p>

```
LinkedHashMap<String[], String> lhm = new LinkedHashMap<String[], String>();
for (int i =0;i < strs.length; i++){
    String[] str = strs[i].toLowerCase().split(" ");
        Arrays.sort(str);
        System.out.println("***********");
        for (String strin :str)
        {
            System.out.println(strin);
        }
        System.out.println("***********");
        lhm.put(str, strs[i]);
    } 
```

第一段代码按预期工作，每当我放置重复键（Arraylist 作为相同内容的键）时，它都会覆盖前一个键的值。但第二部分没有按预期工作。它只是把所有的价值都放进去。任何人都可以解释这是如何工作的吗？将 Array/ArrayList（或者集合作为键）是一个好习惯吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T23:39:04.793

Java 中的数组使用继承自 Object 的默认 equals 方法。hashCode 方法也是如此。因此，即使您使用与键相同的元素放置数组，最终也会出现“重复”。另一方面，列表覆盖 hashcode 方法，以返回更能代表其内容的值。

在任何情况下，使用可变对象作为 hashmap 中的键通常是一个坏主意，尽管在某些情况下这是不可避免的。特别是使用集合作为键可能会以多种方式绊倒你；

*   向列表中添加元素
*   改变列表中的对象，以改变它们的 hashCode/equality contract 的方式

# filepicker.io - Filepicker.io 适用于 IE10，不适用于 IE9 或 IE8

> ID：14991919
> 
> 赞同：1
> 
> 时间：2013-02-20T23:32:42.593
> 
> 标签：filepicker.io

我在使 filepicker.io 与最新 10 以外的 IE 版本一起工作时遇到问题。其他浏览器工作正常。

![在此处输入图像描述](../Images/8c4965940200da737c1f21d32b4f0a9f.png)

我附上了一个简单的代码示例（jQuery 就绪部分是我试图让它工作）。在 IE8 和 IE9 上，“选择文件”按钮不显示。而是显示空白文本输入。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/json2/20121008/json2.js"></script>
<script>
    $(document).ready(function () {
        filepicker.setKey('mykeygoeshere');
    });
</script>
<body>
    <input type="filepicker" />
    <script src="//api.filepicker.io/v1/filepicker.js"></script>
</body> 
```

同时，这个[https://developers.filepicker.io/docs/web/#widgets-pick](https://developers.filepicker.io/docs/web/#widgets-pick)有效。我在这里想念什么？

**更新：**

我忘了提，我们正在测试的 IE9

*SCRIPT5009：“JSON”未定义*

我们必须添加

```
<script src="//cdnjs.cloudflare.com/ajax/libs/json2/20121008/json2.js"></script> 
```

到代码。上面的代码更新了。

当我们转到调试器时，它不再显示任何错误。此外，网络分析器显示，文件选择器初始化自身并拉取：

```
https://www.filepicker.io/dialog/comm_iframe/   GET 200 text/html   1,02 KB 171 ms  appendChild <frame> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:28:21.893

答案很简单，只是寻找它的地方需要一点开箱即用的方法。

我们使用了不同的兼容模式，结果证明 IE 选择了这种特殊的渲染模式：

```
<meta http-equiv="X-UA-Compatible" content="IE=5" /> 
```

并不是说示例文件有任何元标记......但它开始工作，当内容设置为任何 IE=8、IE=9（不足为奇）时，如[http://blogs.msdn.com/b/ askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx](http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx)

希望这会对某人有所帮助。结案。

# c# - 在 C# 中使用 XMLSerializer 将 xml 字符串反序列化为对象时出错

> ID：14991920
> 
> 赞同：0
> 
> 时间：2013-02-20T23:32:43.997
> 
> 标签：c#, xml, xmlserializer

这是我的 DTO

```
[XmlTypeAttribute(TypeName="XAttributes")]
public class XAttributes
{
    [XmlArray(ElementName="Attributes")]
    [XmlArrayItem(ElementName="Attribute")]
    public List<Attribute> Attributes { get; set; }    
    public XAttributes()
    {
        Attributes = new List<Attribute>();
    }
}
public class Attribute
{      
    [XmlElement(ElementName = "Name")]
    public string Name { get; set; }

    [XmlElement(ElementName = "Value")]
    public string Value { get; set; }      

    [XmlElement(ElementName = "ValueType")]
    public ValueType ValueType {get; set; }

    [XmlArray(ElementName="Children" )]
    public List<Attribute> Children { get; set; }
} 
```

这是我的反序列化代码

```
 public static T ToObject<T>(this string XMLData)
    {
        var s = new XmlSerializer(typeof(T));
        object obj=null;
        using (var sr = new StringReader(XMLData))
        {
            obj = s.Deserialize(sr);
        }
        return (T)obj;
    } 
```

这是我调用来反序列化它的代码

```
string attr = @"<XAttributes><Attributes>                          
                        <Attribute>
                        <Name>Test</Name>
                        <Value>TestVlau</Value>
                        <ValueType>STRING</ValueType>
                        <Children/>
                        </Attribute>
                        <Attribute>
                        <Name>Test1</Name>
                        <Value>TestVlau1</Value>
                        <ValueType>STRING</ValueType>
                        <Children/>
                        </Attribute>
                        </Attributes><XAttributes>";

        var attribute = attr.ToObject<XAttributes>(); 
```

我得到错误

```
There is an error in XML document (14, 55). 
```

在线

```
 obj = s.Deserialize(sr); 
```

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:38:54.543

很难说这是问题所在，但请尝试以下操作.... 替换

```
[XmlTypeAttribute(TypeName="XAttributes")]
public class XAttributes 
{
    ....
} 
```

有了这个：

```
[XmlRoot("XAttributes")]
public class XAttributes 
{
    ....
} 
```

另外，不要忘记在您的 XML 字符串中包含 XML 声明：

```
string attr = @"<?xml version="1.0" encoding="utf-8"?>
    <XAttributes><Attributes>                          
        <Attribute>
        <Name>Test</Name>
        <Value>TestVlau</Value>
        <ValueType>STRING</ValueType>
        <Children/>
        </Attribute>
        <Attribute>
        <Name>Test1</Name>
        <Value>TestVlau1</Value>
        <ValueType>STRING</ValueType>
        <Children/>
        </Attribute>
        </Attributes><XAttributes>"; 
```

PS：我创建了一个通用的 XmlSerializer 可能有用，请看我在 CodeProject 中的文章：

[使用泛型的 XML 序列化](http://www.codeproject.com/Articles/233908/Xml-serialization-using-generics)

# sql - Access 中的 SQL 语法错误

> ID：14991921
> 
> 赞同：-1
> 
> 时间：2013-02-20T23:32:52.480
> 
> 标签：sql, ms-access

```
CREATE TABLE COMPUTER
    SerialNumber Numeric NOT NULL,
    Make Char(12) NOT NULL,
    Model Char(24) NOT NULL,
    ProcessorType Char(24) NULL,
    ProcessorSpeed Numeric NOT NULL,
    MainMemory Char(15) NOT NULL,
    DiskSize Char(15) NOT NULL,
    CONSTRAINT COMPUTER_PK PRIMΑRY KEY(SerialNumber); 
```

返回错误（突出显示第二行中的第一个数字语句）。问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:35:26.390

我会尝试使用括号（[在文档](http://msdn.microsoft.com/en-us/library/office/bb177893%28v=office.12%29.aspx)中使用）

```
CREATE TABLE computer (
    ...
); 
```

文档中的示例：

```
CREATE TABLE MyTable
(FirstName CHAR, LastName CHAR, 
DateOfBirth DATETIME, 
CONSTRAINT MyTableConstraint UNIQUE 
(FirstName, LastName, DateOfBirth)); 
```

如评论中所述，您拼写错误`PRIMARY`。

# scala - 无法使用 java.lang.System.currentTimeMillis() 在 scala 中访问当前毫秒时间；

> ID：14991925
> 
> 赞同：4
> 
> 时间：2013-02-20T23:33:03.837
> 
> 标签：scala

当我在 scala 中使用以下代码时，我得到一个运行时异常：

java.lang.NoSuchMethodError：线程“main”中的主要异常

```
object Driver {

    def main(args:Array[String]) = {

      java.lang.System.currentTimeMillis();

    }

} 
```

但是当我删除 java.lang.System.currentTimeMillis(); 主要方法找到了。

为什么是这样 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T23:38:00.857

是等号！

这导致 Scala 推断返回类型为`main`( `Long`Scala) / `long`（在 JVM 级别）。当您删除它时，它会推断`Unit`/ `void`。同样，当您删除对`currentTimeMillis`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:40:28.380

`def main(args:Array[String]): Unit = {`是 的确切签名`main()`。删除`=`似乎也是一种解决方案，但不太容易出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:37:46.190

如果你需要的只是你可以使用的时间`compat.Platform.currentTime`

你的对象也应该是

```
object Driver {

    def main(args:Array[String]){

      java.lang.System.currentTimeMillis();

    }

} 
```

# perl - 从网上执行perl？

> ID：14991927
> 
> 赞同：-3
> 
> 时间：2013-02-20T23:33:05.053
> 
> 标签：perl, apache2, cgi

我有一个 Perl 脚本，`Main.pl`它读取文本并输出 XML 文档。当我通过 SSH 连接到我的 Unix 服务器并从命令行运行脚本时，它会输出正确的 XML；但是当我`http://localhost/Main2.pl`在浏览器中访问时，它只显示 Perl 代码，当我尝试在启用 jQuery 的网页中向它发布（使用`$.post("http://localhost/Main2.pl")`）时，它不起作用。

我究竟做错了什么？

[您可以在http://moxie.cs.oswego.edu/~cmunger2/coursework/Poetry_project/Main2.pl](http://moxie.cs.oswego.edu/~cmunger2/coursework/Poetry_project/Main2.pl)看到 Perl 脚本；尝试使用它的页面是[http://moxie.cs.oswego.edu/~cmunger2/coursework/Poetry_project/index.html](http://moxie.cs.oswego.edu/~cmunger2/coursework/Poetry_project/index.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:45:23.233

Perl 脚本在服务器上执行，而 JavaScript 在用户机器上执行。因此，您需要配置您的 Web 服务器以允许执行脚本，以及它们可以执行的路径。这是因为当从 Web 运行时，您基本上允许任何人运行代码在您的服务器上，这可能是一个很大的安全问题。您可以在 SSH 时正常执行脚本，因为您已经以特权用户身份登录。出于我提到的安全原因，Web 权限被锁定。

通常，大多数 Web 服务器允许从默认`/cgi-bin`目录执行 Perl 脚本，并且它们通常以`.cgi`扩展名命名。有时服务器只允许`.cgi`执行脚本，尽管它们可以与脚本完全相同`.pl`。

我会研究如何从您的网络服务器配置可执行文件，或者如果您使用的是网络主机（或者看起来您正在使用大学服务器），请研究它们如何配置可执行文件访问。可能已经有一个默认的可执行区域，例如`/cgi-bin`.

您的特定大学服务器完全有可能不允许可执行访问，但是在您进行一些研究/询问之前您不会知道。目录的存在/不存在`/cgi-bin`可能是一个迹象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T23:52:32.450

服务器未配置为从该位置运行 CGI 脚本。

此外，即使是这样，您也会收到`500`错误，因为您的 Perl 脚本不是正确的 CGI 脚本。至少，您需要输出一个标头，指定您返回的内容类型以及与 XML 文档的编码相匹配的编码。

# chocolatey - 如何使用 Chocolatey 安装 DotNet4.0？

> ID：14991937
> 
> 赞同：2
> 
> 时间：2013-02-20T23:33:43.247
> 
> 标签：chocolatey

我想我会创建一个文件来将我最喜欢的应用程序安装到全新的 Windows Server 2008 r2 SP1 安装中。

我在尝试安装 ChocolateyGUI 时遇到了关于 .NET 4.0 和 Nuget 的错误，所以我想我会用 Chocolatey 安装 .NET 4.0，因为它已在图库中列出。

我仍然得到同样的错误。

```
C:\Users\me>cinst DotNet4.0
Chocolatey (v0.9.8.20) is installing DotNet4.0 and dependencies. By installing y
ou accept the license for DotNet4.0 and each dependency you are installing.
Execution of NuGet not detected. Please make sure you have .NET Framework 4.0 i
nstalled and are passing arguments to the install command.
At C:\Chocolatey\chocolateyinstall\functions\Run-NuGet.ps1:52 char:10
+     Throw <<<<  $noExecution
    + CategoryInfo          : OperationStopped: (Execution of Nu...nstall comm
   and.:String) [], RuntimeException
    + FullyQualifiedErrorId : Execution of NuGet not detected. Please make sur
   e you have .NET Framework 4.0 installed and are passing arguments to the i
  nstall command. 
```

在 Chocolatey 工作之前，我是否需要手动将 .NET 4.0 安装到 Windows 中，还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:19:43.880

.NET 框架 4.0 包是为包目的和可能的未来消费者而提供的。您不能使用当前版本的 Chocolatey 安装它，因为它是 Chocolatey 已经安装它的先决条件。

高温高压

# c++ - 带有函数特化的 C++ 模板部分类特化

> ID：14991938
> 
> 赞同：0
> 
> 时间：2013-02-20T23:33:46.030
> 
> 标签：c++, templates

我正在尝试使用模板做一些看起来很简单的事情，但我就是无法让它工作。该课程正在为 AVR 处理器实现各种串行 IO 实现，但问题是通用 C++ 问题。目标是在编译时根据模板参数做出选项，以提高用户友好性并增加代码重用，以及由于重用而在某些地方获得更好的性能。

问题很简单，但我找不到解决方案（如果有的话）。使用 Visual Studio 2008 编译以下代码时，我得到：

```
error C2039: 't1' : is not a member of 'Interface<T1,0,_C>
error C2039: 't1' : is not a member of 'Interface<T1,1,_C>
error C2039: 't2' : is not a member of 'Interface<T2,0,_C>
error C2039: 't2' : is not a member of 'Interface<T2,1,_C> 
```

** 我已将我的测试代码分成解释性的块，将它们放在一起用于整个测试用例 **

这是“通用”基本模板：

```
enum eType { T1,  T2 };
enum eT1  { T1_I1, T1_I2 };
enum eT2  { T2_I1, T2_I2 };

//This defines the 'global/default' interface that is required
template< eType _T, int _I, typename _C>
struct Interface
{
    bool initialise();
}; 
```

为此，我根据 _T 参数对模板进行了部分专门化，以添加由 initialise() 等使用的成员变量：

```
//t1 has a new member function which initialise() uses
template< int _I, typename _C>
struct Interface< T1, _I, _C >
{
    bool initialise();
    void t1();
};

//t2 has a new member function which initialise() might uses
template< int _I, typename _C>
struct Interface< T2, _I, _C >
{
    bool initialise();
    void t2();
};

//We can implement a function for T1 type
template< int _I, typename _C>
bool Interface< T1, _I, _C >::initialise()
{ printf( "T1 initialise\n"); return true; }

//We can implement a function for T2 type
template< int _I, typename _C>
bool Interface< T2, _I, _C >::initialise()
{ printf( "T2 initialise\n"); return true; }

//We can implement a function for T1 special function
template< int _I, typename _C>
void Interface< T1, _I, _C >::t1()
{ printf( "T1\n"); }

//We can implement a function for T2 special function
template< int _I, typename _C>
void Interface< T2, _I, _C >::t2()
{ printf( "T2\n"); } 
```

现在我无法弄清楚如何根据第二个模板参数 _I 来专门实现 t1() 和 t2() 函数的实现。

```
//################ ISUE BELOW ###################

//ERROR: We can't implement the special function for T1 based on _I specialization
template< typename _C>
void Interface< T1, (int)T1_I1, _C >::t1()
{ printf( "T1_I1 Special function\n"); }

//ERROR: We can't implement the special function for T1 based on _I specialization
template< typename _C>
void Interface< T1, (int)T1_I2, _C >::t1()
{ printf( "T1_I2 Special function\n"); }

//ERROR: We can't implement the special function for T2 based on _I specialization
template< typename _C>
void Interface< T2, (int)T2_I1, _C >::t2()
{ printf( "T2_I1 Special function\n"); }

//ERROR: We can't implement the special function for T2 based on _I specialization
template< typename _C>
void Interface< T2, (int)T2_I2, _C >::t2()
{ printf( "T2_I2 Special function\n"); }

//################ ISUE END ################### 
```

现在到测试它的 main() 函数编译：

```
int _tmain(int argc, _TCHAR* argv[])
{
    struct Config {};
    Interface<T1, T1_I1, Config> t1i1;
    Interface<T1, T1_I2, Config> t1i2;
    Interface<T2, T2_I1, Config> t2i1;
    Interface<T2, T2_I2, Config> t2i2;

    t1i1.initialise();
    t1i2.initialise();
    t1i1.t1();
    t1i2.t1();

    t2i1.initialise();
    t2i2.initialise();
    t2i1.t2();
    t2i2.t2();
    return 0;
} 
```

该问题似乎是由于编译器没有看到原始类专业化的存在，并且它使用了没有 t1() 或 t2() 的非专业化接口。我在哪里弄错了语法，或者是否有一个简单的破解/解决方法来完成我想要做的事情。只要一个解决方案可以产生一种形式，`Serial<UART,Hardware,Config> io`它就符合我的目标！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:44:57.700

您必须一一拼出所有偏*类专业化。*例子：

```
template <eType E, int I, typename T> struct Interface;

template <int I, typename T> struct Interface<T1, I, T>
{ 
    void t1() { /* ... */ }
    bool initialize() { /* ... */ }
};

template <typename T> struct Interface<T1, static_cast<int>(T1), T>
{ 
    void t1() { /* ... */ }
    bool initialize() { /* ... */ }
}; 
```

你总是可以在适当的时候考虑你的代码以避免重复。例如：

```
namespace detail
{
    template <typename T, int I> struct T1Helper
    {
        static bool initialize() { /* ... */ }
    };
}

// ... primary template as above ...

template <int I, typename T> struct Interface<T1, I, T>
{
     void t1() { /* ... */ }
     bool initialize() { return detail::T1Helper<T, I>::initialize(); }
};

// etc. 
```

或者您可以将通用代码分解为 mixin 模板：

```
template <int I, typename T>
struct Interface<T1, I, T> : Mixin<T, I>
{
    void t1() { /* ... */ }
}; 
```

# php - 我不断收到相同的错误消息，无法修复

> ID：14991939
> 
> 赞同：0
> 
> 时间：2013-02-20T23:33:53.153
> 
> 标签：php, sql

继承人的错误：

> 警告：mysql_num_rows() 期望参数 1 是资源，在第 36 行的 /home/rspslabe/public_html/Toplist/index.php 中给出 null

这是代码：

```
<?

    $maxdate = time() - ($MaxDays * 86400);

    if ($p == 0)
    {
        $site_info = mysql_query("SELECT
$Members.title AS title, $Members.url AS url, count(*) AS hits,
avg($IPLogg.vote) AS avrating,
$Members.siteid AS id FROM 
$IPLogg,$Members WHERE $Members.siteid = $IPLogg.siteid AND $IPLogg.time > '$maxdate' 
GROUP BY $Members.siteid ORDER BY hits DESC, avrating DESC");
    }
    else if ($p == 1)
    {
        $site_info = mysql_query("SELECT
$Members.title AS title, $Members.url AS url, count(*) AS hits,
avg($IPLogg.vote) AS avrating,
$Members.siteid AS id FROM 
$IPLogg,$Members WHERE $Members.siteid = $IPLogg.siteid AND $IPLogg.time > '$maxdate' 
GROUP BY $Members.siteid ORDER BY avrating DESC, hits DESC");
    }

    $site_num = mysql_num_rows($site_info);
    if ($f == "")
        $f = 0;
    $maxsites = $f + $TopListSize;

    if ($site_num > $maxsites)
        $site_num = $maxsites;

    $i = $f; 
```

它本身的实际网页是这样的：[http ://rspslab.com/Toplist/](http://rspslab.com/Toplist/)

谢谢，如果有人可以帮忙！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:02:14.360

看到`<?`，我假设这是完整的代码。如果这是完整的代码...您忘记连接到您的数据库。

您可以使用以下 mysql 代码连接到数据库：

```
$link = mysql_connect('hostname/ipaddress', 'mysql_user', 'mysql_password'); 
```

但是请记住，mysql 已经过时，不应该在新项目中使用，如[本网站上的红色所示。](http://www.php.net/manual/en/function.mysql-connect.php)相反，我建议使用 mysqli（改进了 mysql）。

要将 mysqli 与您的代码一起使用，您可以尝试以下操作：

```
$maxdate = time() - ($MaxDays * 86400);
// CONNECT TO THE DATABASE
    $DB_NAME = 'DATABASE_NAME';
    $DB_HOST = 'DATABASE_HOST';
    $DB_USER = 'DATABASE_USER';
    $DB_PASS = 'DATABASE_PASSWORD';

    $mysqli = new mysqli($DB_HOST, $DB_USER, $DB_PASS, $DB_NAME);

    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    if ($p == 0){
    $query = "SELECT
$Members.title AS title, $Members.url AS url, count(*) AS hits,
avg($IPLogg.vote) AS avrating,
$Members.siteid AS id FROM 
$IPLogg,$Members WHERE $Members.siteid = $IPLogg.siteid AND $IPLogg.time > '$maxdate' 
GROUP BY $Members.siteid ORDER BY hits DESC, avrating DESC";

else if ($p == 1){
            $query = "SELECT
    $Members.title AS title, $Members.url AS url, count(*) AS hits,
    avg($IPLogg.vote) AS avrating,
    $Members.siteid AS id FROM 
    $IPLogg,$Members WHERE $Members.siteid = $IPLogg.siteid AND $IPLogg.time > '$maxdate' 
    GROUP BY $Members.siteid ORDER BY avrating DESC, hits DESC";
}
else{ die("P isn't set?");}

    $result = $mysqli->query($query) or die($mysqli->error.__LINE__);
$maxsites = $f + $TopListSize;
    if($result->num_rows > $maxsites) {
        $site_num = $maxsites;
    }
echo $site_num;

// CLOSE CONNECTION
    mysqli_close($mysqli); 
```

请注意，您必须在插入查询的任何字符串上使用“mysqli_real_escape_string”。通过以下方式执行此操作：

```
$myescapedstring = $mysqli->real_escape_string($myunescapedstring); 
```

where`$myescapedstring`是插入到查询`$myunescapedstring`中的字符串，是需要转义的字符串。

# javascript - 脚本加载完成后隐藏源代码

> ID：14991941
> 
> 赞同：1
> 
> 时间：2013-02-20T23:34:18.113
> 
> 标签：javascript, client-side, copy-protection, data-protection

这个问题是不同的，因为我不想阻止用户查看源代码。我想以编程方式隐藏部分源代码。“重复”问题没有解决这个问题，这个问题的一些答案开始解决这个问题。

脚本完成加载后是否可以在 javascript 中隐藏代码？在限制性许可制度之外，我想保护我的脚本不被窥视。

我认为删除代码将禁用页面的任何交互部分，离开静态外壳，具体取决于库。但是人们/行业如何解决这个问题？

它只是法院强制执行的许可制度和版权登记吗？或者有什么更聪明的东西可以在关于客户端javascript的软件中完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:45:20.003

您不能根据浏览器的需要隐藏所有源代码。想想 firebug 或 dom 检查器是如何工作的。如果您更改某些内容，它会影响您在浏览器屏幕中看到的内容。但是有一些方法可以让它“有点不可见”或“几乎不可读”。例如，如果您使用一些动态构建脚本的开发工具或脚本。

看看我的网站 [http://elmin.org](http://elmin.org)并尝试阅读源代码。如您所见，您看不到太多，即使您看到，也太复杂而无法分析或理解。在这种情况下，使用 google web 工具包。

如上所述，混淆代码是一种解决方案，但这还不够，因为虽然很难，但程序员可以破译您的代码并“窃取”您的脚本。

我想说一个想法是限制从您嵌入代码的页面之外访问您的外部 js 文件。因此，如果有人试图在浏览器中访问该文件，则该脚本源将被拒绝访问。在 php 或您使用的任何服务器端语言中，您可以通过将 request_uri 服务器变量与您的域进行比较来控制访问。

但是您应该意识到混淆代码的风险。想象一下它替换了一个清晰可读的 JavaScript 片段：

```
window.onload = function() { alert("Hi " + username) }; 
```

经过：

```
eval(unescape("var%20_0xc5b2%3D%5B%22onload%22%2C%22Hi%20%22%5D%3Bwindow"+
"%5B_0xc5b2%5B0%5D%5D%3Dfunction%20%28%29%7Balert%28_0xc5b2%5B1%5D+username"+
"%29%3B%7D%20%3B")); 
```

风险在于许多防病毒软件或其他在线保护软件可能会警告您的访问者它不安全，因为可能无法检测到那里的 javascript 代码是否试图做一些有害的事情。因此，它可能无法通过验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:37:11.527

你会得到的最好的结果是使用像[UglifyJS](https://github.com/mishoo/UglifyJS)这样的缩小器。它会混淆代码并使人们更难阅读，但你不能隐藏它。您的所有代码都以纯文本格式传输到浏览器，因此它可以解释它，并且没有浏览器会阻止用户看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T00:31:25.013

> 脚本完成加载后是否可以在javascript中隐藏代码

=> 没有

> 我认为删除代码会禁用页面的任何交互部分，留下静态外壳

=> 您可以从 html 结构中删除脚本标签，但是由于代码已经被解析，您的交互部分仍然可以工作

> 有没有更聪明的东西可以在关于客户端 javascript 的软件中完成

=> 接受人们可以阅读您的缩小代码并且不会花太多时间尝试破译它，因为无论如何他们已经拥有 jQuery、主干和其他库。将宝贵的时间投入到更好的 vnext 上，而不是试图隐藏当前版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T23:40:53.973

这是不可能的......或者即使有办法，它也会是部分的，因为唯一对你的代码感兴趣的人是程序员......所以他们只需要加载你的页面而不执行js来获取来源...对不起：/

~~“它会混淆代码并使人们更难阅读” 大多数文本编辑器或网络浏览器都有语法突出显示和缩进，所以这不是一个解决方案。~~（我误解了）是的，这是一个解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T23:46:29.927

不。

这就是为什么 PHP 在这个意义上具有主要优势 - 它是在服务器端执行的 - 因此查看者永远不会看到生成结束标记的代码。但不要误会我的意思，PHP 有它自己的安全问题，例如 MySQL 注入攻击。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T23:37:18.740

执行后无法隐藏代码，但您可以轻松混淆它。

# java - 备忘：Rememo

> ID：14991945
> 
> 赞同：2
> 
> 时间：2013-02-20T23:34:25.123
> 
> 标签：java, optimization, memoization, knapsack-problem

该数组`memo[][]`正在返回位于 中的布料`memo[X][Y]`。我已经测试了这个类，它似乎只存储第一块适合的布料`memo[X][Y]`，但我希望它返回最有价值的适合的布料`memo[X][Y]`。我怎样才能做到这一点？

```
class ClothCutter {
    static ArrayList <Pattern> patterns; //array of patterns to try
    static Cloth maxCloth; //the maximum cloth 
    static Cloth memo[][]; // memo for maximum cloth (X,Y), memo[X][Y]
    int width;
    int height;

    //Constructor
    public ClothCutter(int w, int h,ArrayList<Pattern> p) {
        width = w;
        height = h;
        patterns = p;
        maxCloth = new Cloth(w,h);
        memo = new Cloth [w+1][h+1];
        for (int i = 0; i<patterns.size();i++)  {
            Pattern z = patterns.get(i);
            System.out.println(z.name);
            Cloth m = new Cloth(z.width,z.height);
            m.add(z);
            memo[z.width][z.height]=m;
            System.out.println(memo[z.width][z.height].value);
        }
    }

    public Cloth optimize() {
        return optimize(maxCloth);
    }

    public Cloth optimize(Cloth c){
        Cloth temp1 = new Cloth(); 
        Cloth temp2 = new Cloth();
        Cloth max = new Cloth(c.width,c.height);//temporary max

        if (memo[c.width][c.height]!=null) // return memo if there is one
            return memo[c.width][c.height];
        if (c.width==0||c.height==0) //if (X||Y ==0)
            memo[c.width][c.height]=max;
            return max;
        }

        for (int i=0;i<patterns.size();i++) { //for each pattern
            Pattern p = patterns.get(i);
            if (p.width<=c.width && p.height<=c.height) {
                if (p.width<c.width) {
                    //if the pattern's width is less than the cloth's width
                    Cloth a = new Cloth(c.width-p.width,c.height);//cut vertically
                    a.pattern = p;
                    Cloth b = new Cloth(p.width,c.height);//remainder after vertical cut
                    b.pattern = p;

                    temp2=optimize(b);//recurse 
                    temp1=optimize(a);//recurse
                }
                if (c.width==p.width) {
                    //if the cloth's width is equal to a patterns with start cutting horizontally 
                    Cloth a = new Cloth(c.width,c.height-p.height);//horizontal cut
                    a.pattern=p;
                    Cloth b = new Cloth(c.width,p.height);//remainder after horizontal cut
                    b.pattern = p;
                    temp2=optimize(b);//recurse
                    temp1=optimize(a);//recurse
                }
                if (temp1.value+temp2.value>max.value) {
                    //if the value of the optimal cloths is greater than the value of max
                    max.add(temp1,temp2);//add the two cloths to max
                    max.pattern = p;
                    if (max.width == maxCloth.width && max.height == maxCloth.height && maxCloth.value < max.value)
                        // if the max dimentions is equal to maxCloth dimetions and the value of the maxCloth is less than max
                        maxCloth=max;//set maxCloth to max
                }
            }
        }

        if (memo[max.width][max.height]==null) //if memo is equal to null
            memo[max.width][max.height]=max;// create memo  
    return max;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:37:21.177

你的代码让我有点困惑，无法快速找出问题，但我只是为我的朋友编写了这个伪代码，当我运行我的代码时，我总是得到正确的最优值。也许你可以比较一下！

```
optimize() {

    Rectangle memo[width][height]
    optimize(0,0,totalwidth, totalheight, memo)
}

optimize(x, y, width, height, memo) {

    if memo[width][height] != null
        return memo[width][height]

    rect = new Rectangle(width, height, value = 0)
    for each pattern {

        //find vertical cut solution
        leftVerticalRect = optimize (x, y + pattern.height, pattern.width, height-pattern.height,memo)
        rightVerticalRect = optimize(x  + pattern.width, y, width-pattern.width, height)
        verticalcut = new Cut(x + pattern.width, y, x + pattern.width, y + height)

        //find horizontal cut solution
        topHorizontalRect = optimize ( --parameters-- )
        bottomHortizonalRect = optimize( --parameters--)
        horizontalcut = new Cut( --parameters--)

        //see which solution is more optimal
        if (leftVerticalRect.val + rightVerticalRect.val > topHorizontalRect.val + bottomHorizontalRect.val)
            subprobsolution = vertical cut solution
        else
            subprobsolution = horizontal cut solution

        //see if the solution found is greater than previous solutions to this subproblem
        if (subprobsolution.value + pattern.value > rect.value) {
            rect.subrect1 = subprobsolutionrect1
            rect.subrect2 = subprobsolutionrect2
            rect.pattern = pattern
            rect.cut = subprobsolutioncut
            rect.value = rect.subrect1.value + rect.subrect2.value + rect.pattern.value
        }
    }

    memo[width][height] = rect
    return rect
} 
```

# ios - UITextField 控制关闭按钮和键盘返回键

> ID：14991951
> 
> 赞同：3
> 
> 时间：2013-02-20T23:34:44.490
> 
> 标签：ios, ios5, uitextfield

这对某人来说可能是一个简单的问题。

如何控制键盘的返回键。我有一个这样的设置：

```
usernameField.returnKeyType = UIReturnKeyNext; 
```

另一个是这样的：

```
passwordField.returnKeyType = UIReturnKeyDone; 
```

我希望每个方法都有不同的方法，但如果需要，也可以通过 textField.tag 上的 if 语句来控制。

其次，当单击 UITextField 中的关闭按钮时，无论如何都可以控制（运行一些代码）。我指的是一旦字段中有文本，文本字段中显示的灯 x 就会清除其数据的字段。或者在字段中没有这个关闭图标的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:50:23.763

您可以检查文本字段，然后调用所需的相应方法，

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField //or implement - (void)textFieldDidEndEditing:(UITextField *)textField
{
    if (textField == self.usernameField) {
       [self callUserNameMethod];
    } else if (textField == self.passwordField) {
       [self callPasswordMethod];
    }

    [textField resignFirstResponder];
    return YES;
} 
```

也可以使用标签属性，如您的问题中所述。请注意，除了使用这些委托之外，没有其他方法可以设置点击键盘中默认返回按钮的方法。 如果需要，可以使用[键盘显示和隐藏](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/cl/UITextField)的通知。

您可以将清除按钮的委托方法实现为：

```
- (BOOL)textFieldShouldClear:(UITextField *)textField {
     //write code to be executed on tap of clear button
     return YES;
} 
```

或者您可以将其设置`clearButtonMode`为`UITextFieldViewModeNever`禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:37:11.340

要回答您问题的第二部分，

```
usernameField.clearButtonMode = UITextFieldViewModeNever; 
```

# android - 何时在 Libgdx 中使用 ShapeRenderer、Mesh + SpriteBatch、Box2D 和 Scene2D？

> ID：14991953
> 
> 赞同：11
> 
> 时间：2013-02-20T23:34:46.817
> 
> 标签：android, libgdx, box2d, scene2d

我是 Android 游戏开发的新手，在我开始使用 libgdx ShapeRenderer 并进行了更多搜索后，如果我从右脚开始，我会感到困惑。

所以，我真正想知道的是何时应该使用 ShapeRenderer、Mesh + SpriteBatch、Box2D 和 Scene2D。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-21T02:39:41.587

LibGDX 有很多（大部分是正交的）用于渲染的 API。我仍在学习其中的许多方法，但我可以概述不同的部分。

[`ShapeRenderer`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html)让您快速轻松地在屏幕上放置基本的纯色多边形和线条。它不是特别有效（它在每次渲染时上传大量顶点数据）。但它可以很快开始。它强烈地面向屏幕（它默认为全屏上的正交项目，其单位通常是像素）。

该类[`Mesh`](https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/Mesh.html)使您可以更直接地控制几何图形，但您会接触到更多细节（例如将颜色编码为浮点数并将顶点数据、颜色数据和纹理数据都存储在同一个浮点数组中，以及索引数组）。

[`SpriteBatch`](https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html)围绕“精灵”（通常是其中带有纹理的矩形区域）定向。这隐藏了网格纹理的一些复杂性（和灵活性）。

Box2D 用于物理建模，与您提到的任何其他 API 部分不同（主要与渲染有关）。

最后，[Scene2D](https://github.com/libgdx/libgdx/wiki/Scene2d)主要是关于创建动画用户界面元素，如按钮、列表和滑块。但它足够强大（并且对动画和交互事件有足够简洁和灵活的支持），您也可以在其中实现相当多的“游戏”。

您也可以使用原始的“OpenGL”命令（请参阅 参考资料[`GL20`](https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/GL20.html)）。

您可以完全混合和匹配这些不同的原语（一个警告是，在开始不同的风格之前，您通常必须“刷新”和“结束”任何//渲染）`ShapeRenderer`。因此，例如，您可以将 Scene2D 用于您的“主菜单”和游戏中的一些元操作，a来渲染游戏的核心，并使用 a来生成调试覆盖（考虑可视化边界框等）。`SpriteBatch``Mesh``SpriteBatch``ShapeRenderer`

另请注意，大多数 libGDX 都面向 2D。Raw`OpenGL`和`Mesh`API 也可用于构建 3D 对象。

查看[gdx-invaders 示例](https://github.com/libgdx/libgdx-demo-invaders)，了解它如何使用.OpenGL`Mesh`和`SpriteBatch`. （我认为这个例子早于 Scene2d，所以没有那个......）。查看这些类的实现以了解它们在幕后所做的工作也是值得的。

# shell - 如何使用 AppleScript 使 Terminal.app 运行 shell 脚本而不将输出评估为脚本？

> ID：14991954
> 
> 赞同：0
> 
> 时间：2013-02-20T23:34:50.093
> 
> 标签：shell, applescript

我正在使用 AppleScript 来启动一个又快又脏的 shell 脚本：

```
tell application "Terminal"
activate
do script "$(" & quoted form of MyScriptPath & ")"
end tell 
```

哪个正确启动终端窗口并输入我期望的内容：

```
~$ $('/my script path/myscript.sh') 
```

但是，似乎在首先评估/调用脚本时，输出到 STDOUT（通过 echo）的任何内容都被评估为好像它在 $( ) 内：

```
#!/bin/sh
echo "foobar" 
```

产生：

```
-bash: foobar: command not found 
```

在将脚本位置发送到终端之前，我已经进行了广泛的搜索，并没有真正找到一种合适的方法来在 AppleScript 中转义路径中的空格（而不是使用“引用的形式”），但我更喜欢这样。我使用的是“do script”而不是“do shell script”，因为在终端中启动的脚本是交互式的，需要集中注意力。

通过 $( ) 调用脚本时如何回显到 STDOUT？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:07:20.863

您不需要`$(...)`运行命令，只需将该命令的输出包含在另一个字符串中*。*你只需要

```
tell application "Terminal"
activate
do script "/my script path/myscript.sh"
end tell 
```

# c# - 如何在 C# 中创建具有多个命名空间属性的 XML

> ID：14991959
> 
> 赞同：4
> 
> 时间：2013-02-20T23:35:12.387
> 
> 标签：c#, .net, xml, serialization

例如，如何在 C# 中生成此 XML

```
<?xml version='1.0'?>
<oneshot xmlns='http://www.w3.org/2002/xforms' xmlns:dm='http://mobileforms.foo.com/xforms' xmlns:h='http://www.w3.org/1999/xhtml' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>
  <dm:form_namespace>Foo</dm:form_namespace>
  <Days>6</Days>
  <Leave_Type>Option 3</Leave_Type>
</oneshot> 
```

我特别为 xmlns:dm 声明而苦苦挣扎。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T00:49:19.000

您最好的选择（阅读：最少的黑客攻击）可能是自定义`IXmlSerializable`实现；您可以通过 , 等的组合获得您想要的部分，如下所示*：*`XmlRootAttribute``XmlElementAttribute`

```
[Serializable]
[XmlRoot("oneshot")]
public class OneShot 
{
    [XmlElement("form_namespace", Namespace="http://mobileforms.foo.com/xforms")]
    public string FormNamespace {get; set;}
    [XmlElement("Days")]
    public int Days {get; set;}
    [XmlElement("Leave_Type")]
    public string LeaveType {get; set;} 
```

这将产生类似的东西：

```
<?xml version="1.0" encoding="utf-16"?>
<oneshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <form_namespace xmlns="http://mobileforms.foo.com/xforms">Foo</form_namespace>
  <Days>6</Days>
  <Leave_Type>Option 3</Leave_Type>
</oneshot> 
```

但是，如果您实施`IXmlSerializable`，您将拥有完全的控制权：

```
public class OneShot : IXmlSerializable
{
    public string FormNamespace {get; set;}
    public int Days {get; set;}
    public string LeaveType {get; set;}

    #region IXmlSerializable
    public void WriteXml (XmlWriter writer)
    {
        writer.WriteStartElement("oneshot");
        writer.WriteAttributeString("xmlns", null, "http://www.w3.org/2002/xforms");
        writer.WriteAttributeString("xmlns:dm", null, "http://mobileforms.foo.com/xforms");
        writer.WriteAttributeString("xmlns:h", null, "http://www.w3.org/1999/xhtml");
        writer.WriteAttributeString("xmlns:xsd", null, "http://www.w3.org/2001/XMLSchema");
        writer.WriteElementString("dm:form_namespace", null, FormNamespace);
        writer.WriteElementString("Days", Days.ToString());
        writer.WriteElementString("Leave_Type", LeaveType);
        writer.WriteEndElement();
    }

    public void ReadXml (XmlReader reader)
    {
        // populate from xml blob
    }

    public XmlSchema GetSchema()
    {
        return(null);
    }
    #endregion
} 
```

这给了你：

```
<?xml version="1.0" encoding="utf-16"?>
<OneShot>
  <oneshot xmlns="http://www.w3.org/2002/xforms" xmlns:dm="http://mobileforms.foo.com/xforms" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <dm:form_namespace>Foo</dm:form_namespace>
    <Days>6</Days>
    <Leave_Type>Option 3</Leave_Type>
  </oneshot>
</OneShot> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:46:25.543

使用不同命名空间中的节点编写 XML 的一种方法是使用 4 参数版本的[XmlWriter.WriteElementString](http://msdn.microsoft.com/en-us/library/dw1cdthw.aspx)以您想要的方式显式指定命名空间和前缀：

```
var s = new StringWriter();
using (var writer = XmlWriter.Create(s))
{
    writer.WriteStartElement("oneshot", "http://www.w3.org/2002/xforms");
    writer.WriteElementString("dm", "form_namespace", 
         "http://mobileforms.foo.com/xforms","Foo");
    // pick "http://www.w3.org/2002/xforms" by default for Days node
    writer.WriteElementString("Days", "6");
    // or you can explicitly specify "http://www.w3.org/2002/xforms"
    writer.WriteElementString("Leave_Type", 
         "http://www.w3.org/2002/xforms", "Option 3");
    writer.WriteEndElement();
}

Console.Write(s.ToString()); 
```

请注意，您的示例 XML 定义了比 XML 中使用的更多的前缀。如果您的要求是生成“文本相同的 XML”（相对于从 XML 的角度来看相同，但不必用相同的文本表示），您可能需要付出更多努力在您需要的地方添加名称空间前缀和 xmlns 属性。

注意 2：首先创建 XML 对象（现代/LINQ 方式为[XDocument ，如果您更喜欢 DOM，则为](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)）可能是更简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T00:52:41.537

尝试使用 .NET 4.0+ 的程序集 System.Xaml 中的 XAML 序列化程序。

您可能需要添加属性以将属性标记为内容而不是 XML 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T19:56:52.083

谢谢大家的帮助！这是上述两个答案的组合，为我做到了。我将设置一个建议 IXmlSerializable 方法的方法，因为这是解决方案的主要部分。

我只好在类名上声明XMLRoot标签，去掉WriteStartElement和WriteEndElement，然后用四个参数声明。

这是最终起作用的课程：

```
[Serializable]
[XmlRoot("oneshot")]
public class LeaveRequestPush : IXmlSerializable
{
    public string FormNamespace { get; set; }
    public int Days { get; set; }
    public string LeaveType { get; set; }

    #region IXmlSerializable

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteElementString("dm", "form_namespace", "http://mobileforms.devicemagic.com/xforms", FormNamespace);
        writer.WriteElementString("Days", Days.ToString());
        writer.WriteElementString("Leave_Type", LeaveType);
    }
}

public void ReadXml (XmlReader reader)
{
    // populate from xml blob
}

public XmlSchema GetSchema()
{
    return(null);
} 
```

再次感谢大家的共同努力。我自己不会得到这个！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-13T12:29:56.353

这段代码可以解决问题！

```
public void WriteXml(XmlWriter writer)
        {
            const string ns1 = "http://firstline.com/";
            const string xsi = "http://www.w3.org/2001/XMLSchema-instance";
            writer.WriteStartElement("myRoot", ns1);
            writer.WriteAttributeString("SchemaVersion", "1.0");
            writer.WriteAttributeString("xmlns", "xsi", "http://www.w3.org/2000/xmlns/", xsi);
            writer.WriteAttributeString("xsi", "schemaLocation", xsi, ns1 + " schema1.xs");

        writer.WriteStartElement("element1", ns1);
        writer.WriteElementString("test1", ns1, "test value");
        writer.WriteElementString("test2", ns1, "value 2");
        writer.WriteEndElement();
        writer.WriteEndElement();//to close classname that has root xml
} 
```

具有多个很棒的命名空间的 XML！

```
<?xml version="1.0" encoding="utf-16"?>
<myClassNameWhereIXmlSerializableIsImplemented>
  <myRoot SchemaVersion="1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://firstline.com/ schema1.xs" xmlns="http://firstline.com/">
    <element1>
      <test1>test value</test1>
      <test2>value 2</test2>
    </element1>
  </myRoot>
</myClassNameWhereIXmlSerializableIsImplemented> 
```

这条线有些令人困惑

```
writer.WriteAttributeString("xmlns", "xsi", "http://www.w3.org/2000/xmlns/", xsi); 
```

如果您提供一个随机 url 而不是`"http://www.w3.org/2000/xmlns/"`，它将失败。出现在 xml 中的 url 实际上来自“xsi”变量。再举一个例子来证明这一点

```
writer.WriteAttributeString("xml", "base", "http://www.w3.org/XML/1998/namespace", base1); 
```

在哪里`base1 = "<custom url>"`

如果你想用这样的前缀输出，`<d:test1>somevalue<\d:test1>`那么`writer.WriteElementString("d","test1", ns1, "somevalue");`如果上面没有定义ns1，那么它将被添加到xml输出中。

但是对于 `<d:test1> <blah>... <\d:test1>` StartElement 需要`writer.WriteStartElement("test1", ns1);`在需要时关闭`writer.WriteEndElement();`

# railo - 我的查询是否被缓存？

> ID：14991960
> 
> 赞同：2
> 
> 时间：2013-02-20T23:35:15.383
> 
> 标签：railo, cfml

我习惯了 Adob​​e ColdFusion，并且一直在使用`cachedafter`“简单”日期缓存查询：

```
<cfparam name="application.icons_last_changed" default="#now()#">
<cfquery name="get_icons" cachedafter="02/02/1978" datasource="#application.datasources.main#">
SELECT icon_id, icon_name
FROM REF_Icon
WHERE #application.icons_last_changed#=#application.icons_last_changed#
ORDER BY sort_order
</cfquery> 
```

我将我的项目从 ColdFusion/MSSQL 转移到 Railo/PostgreSQL。今天，Railo 诊断程序中的某些内容引起了我的注意。

*   我习惯在 /path/qry_get_ref_icon.cfm 中看到“get_ref_icon (Datasource=Workstream, **Time=cached** , Records=39)”
*   但在 Railo 中，我在 /pathqry_get_ref_icon.cfm 中看到“get_ref_icon (Datasource=Workstream, **Time=0.974 ms** , Records=39)”。

`cachedafter`考虑到Railo 可能不支持简单的数据值（“02/02/1978”） ，我尝试使用 设置日期`createodbcdatetime('1978-02-02 16:37:00')`，但这似乎没有什么不同。

当然，0.974 毫秒是如此之短，以至于查询可能会被缓存，而且 Railo 不像 ColdFusion 那样明确。

我的查询是被缓存了，还是我用错了方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:43:20.193

**不，查询没有被缓存。**

我遵循了 Busches 的建议并查看了以下结果`<cfdump var="#get_icons#" />`：

```
Query
Template:/super/double/secret/path/qry_get_ref_icon.cfm 
Execution Time (ms):0.624 
Recordcount:39 
Cached:No                                     <--UH OH, SPAGHETTI-O's
Lazy:No 
SQL: 
SELECT icon_id, icon_name 
FROM REF_Icon 
WHERE active_ind=1 /*{ts '1978-02-02 16:37:00'}*/ 
AND {ts '2013-02-20 22:25:14'}={ts '2013-02-20 22:25:14'} 
ORDER BY sort_order 
```

因为我是一个不信任的类型，所以我也按照 Adam Cameron 的建议更改了一些数据，然后重新运行了查询。查询结果已更新，因此没有缓存。

* * *

我已经向优秀的 Railo 人员报告了这个问题：[https ://issues.jboss.org/browse/RAILO-2318](https://issues.jboss.org/browse/RAILO-2318)

# node.js - Socket.IO 服务器限制快速客户端

> ID：14991963
> 
> 赞同：4
> 
> 时间：2013-02-20T23:35:49.283
> 
> 标签：node.js, socket.io

我有一个使用 socket.io 的服务器，我需要一种方法来限制发送服务器数据过快的客户端。服务器公开了一个 TCP 接口和一个 socket.io 接口——`net`我可以使用 TCP 服务器（来自模块）`socket.pause()`和`socket.resume()`，这有效地限制了客户端。但是对于 socket.io 的`socket`类，没有`pause()`and`resume()`方法。

向客户端反馈服务器不堪重负并需要减速的最简单方法是什么？我喜欢它`socket.pause()`，`socket.resume()`因为它不需要客户端上的任何额外代码——备份 TCP 套接字，事情自然会变慢。socket.io 的任何等价物？

更新：我提供了一个与服务器交互的 API（目前有一个通过 TCP 运行的 python 版本和一个使用 socket.io 的 JavaScript 版本）。所以我对客户的行为没有任何真正的控制权。这就是为什么使用`socket.pause()`and`socket.resume()`非常棒的原因——无论它试图做什么，备份 TCP 流都会减慢 Python 客户端的速度。我正在寻找 JavaScript 客户端的等价物。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T20:21:27.483

经过足够的挖掘，我发现了这个：

```
this.manager.transports[this.id].socket.pause(); 
```

和

```
this.manager.transports[this.id].socket.resume(); 
```

当然，如果 socket.io 连接不是 Web 套接字连接，这可能不起作用，并且可能会在未来的更新中中断，但现在我将继续使用它。当我将来有时间时，我可能会将其更改为`QUOTA_EXCEEDED`Pascal 提出的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-28T08:37:40.080

这是实现节流的一种肮脏方式。虽然这是一个旧帖子；有些人可能会从中受益：

首先注册一个中间件：

```
io.on("connection", function (socket) {

 socket.use(function (packet, next) {
    if (throttler.canBeServed(socket, packet)) {
        next();
    }
 });
 //You other code ..
}); 
```

canBeServed 是一个简单的节流器，如下所示：

```
function canBeServed(socket, packet) {
 if (socket.markedForDisconnect) {
     return false;
 }

 var previous = socket.lastAccess;
 var now = Date.now();
 if (previous) {
    var diff = now - previous;

    //Check diff and disconnect if needed.
    if (diff < 50) {
        socket.markedForDisconnect = true;
        setTimeout(function () {
            socket.disconnect(true);
        }, 1000);
        return false;
    }
}

socket.lastAccess = now;

return true;
} 
```

您可以使用 process.hrtime() 而不是 Date.time()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T00:32:59.787

看起来你应该放慢你的客户。如果一个客户端的发送速度太快以至于您的服务器无法跟上，那么这对于 100 多个客户端来说不会很顺利。

一种方法是让客户端在发出任何其他内容之前等待每个发出的回复。通过这种方式，服务器可以控制客户端发送的速度，例如仅在准备好时回复，或者仅在设定时间后回复。

如果这还不够，当客户端每秒超过 x 个请求时，开始回复类似 QUOTA_EXCEEDED 错误的内容，并忽略它们发送的数据。这将迫使外部开发人员让他们的应用程序按照您希望的方式运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T01:34:19.680

如果您的服务器上有一个回调，通常将响应发送回您的客户端，您可以尝试像这样更改它：

前：

```
 var respond = function (res, callback) {
    res.send(data);
  }; 
```

后

```
var respond = function (res, callback) {
    setTimeout(function(){
        res.send(data);
      }, 500); // or whatever delay you want.
  }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T18:43:13.313

作为另一个建议，我会提出这样的解决方案： MySQL 获得大量请求是很常见的，这需要比请求进来的速率更长的时间来应用。服务器可以将请求记录在 db 的表中假设此操作对于请求进入的速率足够快，然后以正常速率处理队列以供服务器维持。这个缓冲系统将允许服务器运行缓慢但仍处理所有请求。

但是如果你想要一些顺序的东西，那么应该在客户端发送另一个请求之前验证请求回调。在这种情况下，应该有一个服务器就绪标志。如果客户端在标志仍为红色时发送请求，则可能会有一条消息告诉客户端减速。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-08T20:06:12.510

只需将您的客户端发射器包装成如下所示的函数

```
let emit_live_users = throttle(function () {
    socket.emit("event", "some_data");
}, 2000); 
```

使用如下节流阀功能

```
function throttle(fn, threshold) {
    threshold = threshold || 250;
    var last, deferTimer;

    return function() {
        var now = +new Date, args = arguments;
        if(last && now < last + threshold) {
            clearTimeout(deferTimer);
            deferTimer = setTimeout(function() {
                last = now;
                fn.apply(this, args);
            }, threshold);
        } else {
            last = now;
            fn.apply(this, args);
        }
    }
} 
```

# java - 如何/错误声明 google-play-services-component

> ID：14991967
> 
> 赞同：2
> 
> 时间：2013-02-20T23:36:07.067
> 
> 标签：java, android, eclipse, google-maps

我正在使用 eclipse/Java ADT 包，我正在尝试让谷歌地图 api 工作。

在文档中引用以启动和运行谷歌地图是“设置 Google Play SDK”>“为 Eclipse 引用库项目”

[http://developer.android.com/tools/projects/projects-eclipse.html#ReferenceLibraryProject](http://developer.android.com/tools/projects/projects-eclipse.html#ReferencingLibraryProject)

在该页面的最底部，设置项目属性后，它说我需要“在清单文件中声明库组件”

例如：

```
<manifest>
  ...
  <application>
    ...
    <activity android:name="com.example.android.tictactoe.library.GameActivity" />
    ...
  </application>
</manifest> 
```

所以在我的 android 清单中，我尝试包括以下内容：

```
 <activity android:name="com.example.android.MainActivity.library.google-play-services_lib" />
   <activity android:name="com.example.android.MainActivity.library.google-play-services" /> 
```

但是，google play 服务库 .jar 的名称中包含破折号，在 Eclipse 中，这些破折号显示为错误（我得到了红色的波浪线）。

另外，我正在尝试将其包含在 google play sdk 下载附带的 google maps 示例项目中（在“extras”下），因此我不能 100% 确定是否必须执行此步骤。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T23:38:57.600

> 在该页面的最底部，设置项目属性后，它说我需要“在清单文件中声明库组件”

对于 Maps V2，您无需担心此类组件。仅当库项目发布了活动、服务或其他组件时，您才尝试使用这些活动、服务或其他组件，而无需对它们进行子类化。

> 我怎样才能解决这个问题？

只需删除这两`<activity>`行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T00:03:55.347

[https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

这是 google maps api v2 的快速指南。我在办公室的项目中使用了它。

[无法实例化 android.gms.maps.MapFragment](https://stackoverflow.com/questions/13719263/unable-instantiate-android-gms-maps-mapfragment)

如果您在使用 MapFragment 或 google play 服务库时遇到问题，请使用此 stackoverflow 线程进行故障排除。

如果您在获取 SHA1 指纹时遇到问题，请按照以下步骤操作。

1.  如果您使用的是 linux，请打开您的 DOS 命令行或终端。

2.  cd（更改目录）到 JDK 7 的 Java\jdk1.7.0\bin 目录。在我的情况下，它是 C:\Program Files\Java\jdk1.7.0\bin。为了更容易将该目录添加到您的系统路径中。

3.  执行您的 java 的 keytool 并使用您的调试密钥库或官方密钥库。（以图像为例）。

![在此处输入图像描述](../Images/2f492898e2690dc7574b96288d11a217.png)

通常的语法是，keytool.exe -list -alias androiddebugkey -keystore "[你的密钥库的目录]" -storepass android -keypass android

复制并粘贴 SHA1 指纹并保留它并使用它在 api 控制台上生成 google map api 密钥。它应该在 API 访问上，然后是 Google Maps API V2。

在那里，您将应用程序包的名称附加到您的 SHA1 指纹中。像这样的东西。

```
55:87:D6:B4:60:35:AD:CA:C8:86:84:7D:62:D2:5B:3D:18:34:EB:16;com.my.package 
```

最后，您现在应该拥有宝贵的地图 api 密钥，并按照我发布的快速和故障排除链接进行操作。

![在此处输入图像描述](../Images/f3b43404d8e4990d9549ac5296b7a7dd.png)

如果您执行上面的命令，JDK7 默认会生成 SHA1。如果您使用的是 JDK6，它会产生 MD5 指纹。我认为您需要在命令末尾添加 -v 以便 JDK6 为您提供 SHA1。在我的例子中，我有 JDK7，所以当我添加 -v 时，它会显示不同的指纹。

玩得开心 :D

# java - iReport 错误评估表达式

> ID：14991969
> 
> 赞同：2
> 
> 时间：2013-02-20T23:36:09.920
> 
> 标签：java, xml, ireport

我们使用的是 iReport 5.0.1，并且已经成功地转换了我们的许多 Crystal Reports 包。

我正在处理混合了整数和双精度数据类型的数据，并且我正在详细信息部分的变量字段内执行计算。

然后我有 3 个变量对详细数据求和。第一个变量是它上面的细节变量的直接和。第二个根据 IF..THEN..ELSE 语句添加一个参数或第二个参数，第三个根据类似的 IF..THEN..ELSE 语句减去相同的参数值。

我需要对组页脚中的 3 个变量字段进行舍入，因此我将 Math.round(variable_name) 应用于 3 个变量中的每一个。原始的和最后一个（减去参数）都可以完美地工作。中间变量（添加参数）会引发错误，“错误评估表达式：Math.round(variable_name)”。如果我取出格式，它运行良好。

我已经复制并粘贴了工作变量，将其重命名为正确的名称，以确保我没有遗漏我最初设置它们的方式，但无济于事。当我使用 Empty Datasource 运行它时，它会运行，但当然没有数据。

这会让我相信数据有问题，但我已经检查了一遍，数据对于数据源都是有效的，没有 NULL、空白或字符数据。

在这一点上我很困惑。该报表在 Crystal Reports 中编译和运行得很好，使用非常接近相同的功能。

如果有人有任何建议，我很乐意倾听，我将在下面发布报告的 XML。

提前感谢您提供的任何帮助。

M·斯奈德

```
 <?xml version="1.0" encoding="UTF-8"?>
    <jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports         http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MarginRequirement"         language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20"         rightMargin="20" topMargin="20" bottomMargin="20" uuid="70f7c2ab-dba2-420a-98b9-        dc041beb65a7">
        <property name="ireport.zoom" value="1.0"/>
        <property name="ireport.x" value="0"/>
        <property name="ireport.y" value="0"/>
        <property name="ireport.jasperserver.reportUnit"         value="/reports/Risk_Management/MarginRequirement"/>
        <property name="ireport.jasperserver.url"         value="http://reports.beefnw.com/jasperserver/services/repository"/>
<parameter name="LCF" class="java.lang.Float">
    <defaultValueExpression><![CDATA[0.0]]></defaultValueExpression>
</parameter>
<parameter name="LCO" class="java.lang.Float">
    <defaultValueExpression><![CDATA[0.0]]></defaultValueExpression>
</parameter>
<parameter name="FCF" class="java.lang.Float">
    <defaultValueExpression><![CDATA[0.00]]></defaultValueExpression>
</parameter>
<parameter name="FCO" class="java.lang.Float">
    <defaultValueExpression><![CDATA[0.0]]></defaultValueExpression>
</parameter>
<parameter name="GF" class="java.lang.Float">
    <defaultValueExpression><![CDATA[0.0]]></defaultValueExpression>
</parameter>
<parameter name="GO" class="java.lang.Float">
    <defaultValueExpression><![CDATA[0.0]]></defaultValueExpression>
</parameter>
<queryString>
    <![CDATA[select *,
    if (mid(symbol,-3,1) in("F", "G", "H", "J", "K", "M", "N", "Q", "U", "V", "X", "Z"),         "Future", "Option") AS type from margin_requirements
    order by location, clearing_house
    ]]>
</queryString>
<field name="open_price" class="java.lang.Float">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="equity" class="java.lang.Float">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="close_price" class="java.lang.Float">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="open_total_value" class="java.lang.Float">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="close_total_value" class="java.lang.Float">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="liquidating_value" class="java.lang.Float">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="commission" class="java.lang.Float">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="account_id" class="java.lang.Integer">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="position_id" class="java.lang.Integer">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="id" class="java.lang.Integer">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="contract_weight" class="java.lang.Integer">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="contracts" class="java.lang.Integer">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="account_name" class="java.lang.String">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="account_number" class="java.lang.String">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="location" class="java.lang.String">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="clearing_house" class="java.lang.String">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="type" class="java.lang.String"/>
<field name="group" class="java.lang.String">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="symbol" class="java.lang.String">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="fill_date" class="java.sql.Date">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="updated_at" class="java.sql.Timestamp">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<field name="created_at" class="java.sql.Timestamp">
    <fieldDescription><![CDATA[]]></fieldDescription>
</field>
<variable name="loc_clHouse" class="java.lang.String" resetType="None">
    <variableExpression><![CDATA[$F{location} + " - " + $F{clearing_house}]]></variableExpression>
</variable>
<variable name="LC_Orig" class="java.lang.Float" resetType="None">
    <variableExpression><![CDATA[$F{group}=="LIVE_CATTLE"?((($F{contracts}*$F{contract_weight}*$F{open_price})/100)*-1) + (($F{contracts}*$F{contract_weight}*$F{close_price})/100):0.0]]></variableExpression>
</variable>
<variable name="LCOrig_Total" class="java.lang.Float" resetType="Group" resetGroup="ClearingHouse" calculation="Sum">
    <variableExpression><![CDATA[Math.round($V{LC_Orig})]]></variableExpression>
</variable>
<variable name="Suppression" class="java.lang.String" resetType="None">
    <variableExpression><![CDATA["NO"]]></variableExpression>
</variable>
<variable name="LCUpPrice" class="java.lang.Float" resetType="None">
    <variableExpression><![CDATA[$F{type}=="Future"?$F{close_price}+$P{LCF}:$F{close_price}+$P{LCO}]]></variableExpression>
</variable>
<variable name="LCDownPrice" class="java.lang.Float" resetType="None">
    <variableExpression><![CDATA[$F{type}=="Future"?$F{close_price}-$P{LCF}:$P{LCO} > $F{close_price}?0.0:$F{close_price}-$P{LCO}]]></variableExpression>
</variable>
<variable name="LC_Decrease" class="java.lang.Float" resetType="None">
    <variableExpression><![CDATA[$F{group}=="LIVE_CATTLE"?((($F{contracts}*$F{contract_weight}*$F{open_price})/100)*-1)+(($F{contracts}*$F{contract_weight}*$V{LCDownPrice})/100):0.0]]></variableExpression>
</variable>
<variable name="LCDecr_Total" class="java.lang.Float" resetType="Group" resetGroup="ClearingHouse" calculation="Sum">
    <variableExpression><![CDATA[Math.round($V{LC_Decrease})]]></variableExpression>
</variable>
<variable name="LCIncr_Total" class="java.lang.Float" resetType="Group" resetGroup="ClearingHouse" calculation="Sum">
    <variableExpression><![CDATA[Math.round($V{LC_Increase})]]></variableExpression>
</variable>
<variable name="LC_Increase" class="java.lang.Float" resetType="None">
    <variableExpression><![CDATA[$F{group}=="LIVE_CATTLE"?((($F{contracts}*$F{contract_weight}*$F{open_price})/100)*-1)+(($F{contracts}*$F{contract_weight}*$V{LCUpPrice})/100):0.0]]></variableExpression>
</variable>
<group name="ClearingHouse">
    <groupExpression><![CDATA[$V{loc_clHouse}]]></groupExpression>
    <groupHeader>
        <band height="25">
            <printWhenExpression><![CDATA[$V{Suppression}=="YES"]]></printWhenExpression>
            <textField>
                <reportElement uuid="51b78c4d-3747-4282-8b9f-17be6f84feea" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{loc_clHouse}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="ad970881-452b-42aa-bb9f-a19e735643c5" x="179" y="5" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{Suppression}]]></textFieldExpression>
            </textField>
        </band>
    </groupHeader>
    <groupFooter>
        <band height="116">
            <textField>
                <reportElement uuid="79587964-7211-4761-9221-0c063a1aebf0" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{loc_clHouse}]]></textFieldExpression>
            </textField>
            <textField pattern="¤ #,##0.00">
                <reportElement uuid="3bd9ce71-5cf4-4ae3-b678-8f3942fc9e7a" x="100" y="0" width="100" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA[$V{LCOrig_Total}]]></textFieldExpression>
            </textField>
            <textField pattern="¤ #,##0.00">
                <reportElement uuid="20ef4729-88b0-4ab2-a5a6-56594bb716d5" x="100" y="40" width="100" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA[$V{LCDecr_Total}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="16a8b6f9-5e24-4ee6-9e84-e2730d78dea1" x="100" y="20" width="100" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA[$V{LCIncr_Total}]]></textFieldExpression>
            </textField>
        </band>
    </groupFooter>
</group>
<background>
    <band splitType="Stretch"/>
</background>
<title>
    <band height="79" splitType="Stretch"/>
</title>
<pageHeader>
    <band height="142" splitType="Stretch">
        <image>
            <reportElement uuid="eef5e5ab-7b5d-4f86-a20f-5dd51bbd56bd" x="5" y="4" width="310" height="93"/>
            <imageExpression><![CDATA["/home/marlin/bnw_logo_trans.gif"]]></imageExpression>
        </image>
        <rectangle>
            <reportElement uuid="957ac037-7238-46e1-809c-4ded5f76b72b" x="0" y="102" width="572" height="38" forecolor="#E6D8AB" backcolor="#E6D8AB"/>
        </rectangle>
        <staticText>
            <reportElement uuid="3b2925af-f556-4c0c-84bb-e5b5b021128e" x="126" y="110" width="341" height="30"/>
            <textElement textAlignment="Center">
                <font size="18" isBold="true"/>
            </textElement>
            <text><![CDATA[MARGIN REQUIREMENT REPORT]]></text>
        </staticText>
    </band>
</pageHeader>
<columnHeader>
    <band height="27" splitType="Stretch">
        <rectangle>
            <reportElement uuid="a2f2bf6a-6f14-48e5-9d19-5f153caed5a5" x="0" y="0" width="572" height="27" forecolor="#E6D8AB" backcolor="#E6D8AB"/>
        </rectangle>
    </band>
</columnHeader>
<detail>
    <band height="96" splitType="Stretch">
        <printWhenExpression><![CDATA[$V{Suppression}=="NO"]]></printWhenExpression>
        <textField>
            <reportElement uuid="ed06c6f7-7b44-4033-8c4a-9364d9c22e13" x="100" y="0" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{LC_Orig}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement uuid="55b4791f-dfe7-415c-89d5-ebd937c6a329" x="0" y="0" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{Suppression}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement uuid="aba93e69-1ab0-476a-81e0-c65d8f482233" x="100" y="40" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{LC_Decrease}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement uuid="6f9026a6-abf5-4017-974c-9e972bed8181" x="0" y="20" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$P{LCF}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement uuid="ff53c29d-4006-4b99-8b77-295717483c79" x="0" y="40" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$P{LCO}]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement uuid="e305cdbe-e93c-47bb-aedd-f2fc1478e33d" x="100" y="20" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{LC_Increase}]]></textFieldExpression>
        </textField>
    </band>
</detail>
<columnFooter>
    <band splitType="Stretch"/>
</columnFooter>
<pageFooter>
    <band height="54" splitType="Stretch"/>
</pageFooter>
<summary>
    <band height="42" splitType="Stretch"/>
</summary>
    </jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:30:34.640

感谢 iReport/Jasper 论坛的回答：

[http://community.jaspersoft.com/questions/803533/ireport-error-evaluation-expression#comment-802119](http://community.jaspersoft.com/questions/803533/ireport-error-evaluating-expression#comment-802119)

M·斯奈德

# java - 在我从内存数据存储切换到在 Spring Security 中使用数据库后无法登录

> ID：14991976
> 
> 赞同：1
> 
> 时间：2013-02-20T23:36:34.057
> 
> 标签：java, spring, spring-security

我正在尝试为我的 Web 应用程序使用 Spring 安全性。我即将制作登录功能，以便用户可以登录到我网站中的安全页面。到目前为止，我一直在使用 Spring security's own ，在那里我使用了内存数据存储进行身份验证（主要是为了测试它是否有效，因为我还在学习。）

当我尝试使用存储了不同用户的数据库时，就会出现我的问题。当我尝试登录时，spring security 会将我重定向到我的“authentication-failure-url”，而不是让我登录。

我创建了一个自定义 UserDetails 类

```
package dk.chakula.web.security;

import dk.chakula.web.domain.User;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.userdetails.UserDetails;
/**
 *
 * @author Martin Rohwedder
 * @since 20-02-2013
 * @version 1.0
 */
public class ChakulaUserDetails implements UserDetails {

    private User user;
    private List<? extends GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();

    public ChakulaUserDetails(User user, List<? extends GrantedAuthority> authorities)         {
        this.user = user;
        this.authorities = authorities;
    }

    @Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
        return authorities;
    }

    @Override
    public String getPassword() {
        return this.user.getPassword();
    }

    @Override
    public String getUsername() {
        return this.user.getUsername();
    }

    @Override
    public boolean isAccountNonExpired() {
        return true;
    }

    @Override
    public boolean isAccountNonLocked() {
        return true;
    }

    @Override
    public boolean isCredentialsNonExpired() {
        return true;
    }

    @Override
    public boolean isEnabled() {
        return true;
    }

} 
```

我还创建了一个自定义 UserDetailsS​​ervice，我的“身份验证提供者”正在引用它。那堂课看起来像这样。

```
package dk.chakula.web.security;

import dk.chakula.web.domain.User;
import dk.chakula.web.service.UserService;
import java.util.ArrayList;
import java.util.List;
import org.apache.commons.lang.StringUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Component;
/**
 *
 * @author Martin Rohwedder
 * @since 20-02-2013
 * @version 1.0
 */
@Component("chakulaUserDetailsService")
public class ChakulaUserDetailsService implements UserDetailsService {

    @Autowired
    private UserService userService;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        if (StringUtils.isBlank(username)) {
            throw new UsernameNotFoundException("Username was empty");
        }

        User user = userService.getUserByUsername(username);

        if (user == null) {
            throw new UsernameNotFoundException("User with username '" + username + "' was not found");
        }

        List<GrantedAuthority> grantedAuthorities = new ArrayList<GrantedAuthority>();
        grantedAuthorities.add(new SimpleGrantedAuthority(user.getUserRole()));

        return new ChakulaUserDetails(user, grantedAuthorities);
    }

} 
```

我的完整春季安全上下文如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:security="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                       http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http use-expressions="true">

        <!-- Form Login Filter -->
        <security:form-login login-page="/login" default-target-url="/app/start" authentication-failure-url="/login?authenticationNok=1" username-parameter="username" password-parameter="password" always-use-default-target="true" />

        <!-- Logout Filter -->
        <security:logout logout-success-url="/home?logoutOk=1" logout-url="/logout" invalidate-session="true" />

        <!-- Intercept Url filters -->
        <security:intercept-url pattern="/" access="permitAll" />
        <security:intercept-url pattern="/home" access="permitAll" />
        <security:intercept-url pattern="/about" access="permitAll" />
        <security:intercept-url pattern="/login" access="permitAll" />
        <security:intercept-url pattern="/resources/**" access="permitAll" />

        <security:intercept-url pattern="/app/**" access="fullyAuthenticated" />

    </security:http>

    <bean id="chakulaUserDetailsService" class="dk.chakula.web.security.ChakulaUserDetailsService" />

    <security:authentication-manager>
        <security:authentication-provider user-service-ref="chakulaUserDetailsService">
            <security:password-encoder hash="sha-256">
                <security:salt-source user-property="username" />
            </security:password-encoder>
            <!--
            <security:user-service>
                <security:user name="test" password="e9233bd61e14137a7e28f92c50ce279215e774a1772d1e9dad5f275b9cc8177c" authorities="ROLE_CUSTOMER" />
            </security:user-service>
            -->
        </security:authentication-provider>
    </security:authentication-manager>

</beans> 
```

您可以查看我在 GITHUB 上的 Chakula 项目中的所有源代码，如果您需要它来帮助我 - [https://github.com/martin-rohwedder/chakula](https://github.com/martin-rohwedder/chakula)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:16:44.057

这似乎是我的 Dao 实现类的失败，因为当我显示 AuthenticationException 的消息时，它告诉我以下内容 - 无法解析属性： USERNAME of: dk.chakula.web.domain.User [来自 dk.chakula .web.domain.User u 其中 u.USERNAME = :USERNAME]

我所要做的就是用非大写字母写 u.USERNAME。

我用以下值改写了我的安全上下文 xml 文件 form-login tags authentication-failure-url 属性。

```
 <security:form-login login-page="/login" default-target-url="/app/start" authentication-failure-url="/login/failure" username-parameter="username" password-parameter="password" always-use-default-target="true" /> 
```

此后，我在 AuthenticationController 中创建了一个新方法来呈现失败视图，并将 AuthenticationException 消息作为模型添加到视图中

```
@RequestMapping(value = {"/login/failure"}, method = RequestMethod.GET)
public ModelAndView renderLoginFailureView(HttpServletRequest request) {
    ModelAndView mav = new ModelAndView("login");
    AuthenticationException authEx = (AuthenticationException) request.getSession().getAttribute(WebAttributes.AUTHENTICATION_EXCEPTION);

    mav.addObject("authEx", authEx.getMessage());
    return mav;
} 
```

下次我知道在冲入 stackoverflow 之前显示所有异常消息。尽管现在其他人将来可能会从我的回答中受益。

感谢 Arun P Johny 在这里帮助我。

# c++ - 我可以在 C++/MFC 项目中覆盖全局定义的 API 吗？

> ID：14991977
> 
> 赞同：0
> 
> 时间：2013-02-20T23:37:08.923
> 
> 标签：c++, winapi, visual-studio-2008

我需要确保仅当我的应用程序在交互式桌面中运行时才显示消息框。所以我在想，我可以用自己的实现覆盖 ::MessageBox 和 AfxMessageBox 吗（来自 C++/MFC 项目，用 VS 2008 编译）？

PS。我不需要全局挂钩。这只需要从我的应用程序代码中工作。例如，如果在我拥有的代码中的某个地方，`::MessageBox(...);`它应该让我调用自己的方法，而不是链接到系统 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:59:30.830

如果您使用 MFC，您可以覆盖[CWinApp::DoMessageBox](http://msdn.microsoft.com/en-us/library/zf7k5hh8%28v=vs.80%29.aspx)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T01:27:54.020

默认的 MessageBox（实际上是 MessageBoxA 或 MessageBoxW）被定义为一个导出，所以很遗憾，您不能只定义一个本地版本来首先链接。如果您可以访问所有使用 MessageBox 的源，那么在包含 windows.h 之后重新定义 MessageBox 宏很简单：

```
#include <windows.h>
#undef MessageBox
#define MessageBox MyMessageBox 
```

如果您有 3rd 方二进制文件或不编译代码的东西，这当然行不通。

# android - Actionbarsherlock 搜索视图：setOnQueryTextListener

> ID：14991980
> 
> 赞同：2
> 
> 时间：2013-02-20T23:37:18.390
> 
> 标签：android, actionbarsherlock, searchview

我正在尝试使用 ActionBarSherlock 的搜索视图在列表中进行过滤。我目前拥有的代码如下：

```
@Override
public boolean onCreateOptionsMenu(final Menu menu) {
    getSupportMenuInflater().inflate(R.menu.building_search, menu);

    SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());

    SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() 
    {
        public boolean onQueryTextChange(String newText) 
        {
            // this is your adapter that will be filtered
            listAdapter.getFilter().filter(newText);
            return true;
        }

        public boolean onQueryTextSubmit(String query) 
        {
            // this is your adapter that will be filtered
            listAdapter.getFilter().filter(query);
            return true;
        }
    };
    searchView.setOnQueryTextListener(queryTextListener);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

这些是我的进口：

```
import android.os.Bundle;
import android.widget.AbsListView;
import android.widget.ArrayAdapter;
import be.ugent.zeus.hydra.AbstractSherlockActivity;
import be.ugent.zeus.hydra.R;
import be.ugent.zeus.hydra.data.caches.AssociationsCache;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.widget.SearchView;
import com.dd.plist.NSArray;
import com.dd.plist.NSDictionary;
import com.dd.plist.NSString;
import com.dd.plist.XMLPropertyListParser;
import com.emilsjolander.components.stickylistheaders.StickyListHeadersListView;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.logging.Level;
import java.util.logging.Logger; 
```

大部分都有效：在我的操作栏中，我得到一个搜索图标，可点击并展开搜索视图。然而，真正的监听器不起作用。我在这两种方法中都设置了断点，但是当我调试时，什么也没有发生。该程序没有中断，没有任何内容被过滤，我不知道为什么。

有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T09:48:03.513

这就是我使用 ActionBarSherlock 实现搜索的方式：

在 res/menu 文件夹下的 menu.xml 中，我添加了一个图标：

```
 <item android:id="@+id/search"
      android:title="@string/search_title"
      android:icon="@drawable/ic_search"
      android:showAsAction="collapseActionView|ifRoom" 
      android:actionViewClass="com.actionbarsherlock.widget.SearchView"/> 
```

然后我创建了一个类，负责接收动作搜索查询并呈现数据：

```
 public class SearchActivity extends SherlockFragmentActivity{

    @Override
        protected void onCreate(Bundle savedInstanceState) {
       Log.d(TAG, "This is the search view activity");
       // TODO Auto-generated method stub
       super.onCreate(savedInstanceState);
       setContentView(R.layout.search_result_layout);
            }

    private void handleIntent(Intent intent){
        if(Intent.ACTION_SEARCH.equals(intent.getAction())){
        searcdhQuery = intent.getStringExtra(SearchManager.QUERY);
        //here we shall do e search..
        Log.d(TAG, "This is the search query:" + searcdhQuery);

                    //This is the asynctask query to connect to the database...
        String[] value = {searcdhQuery};
        SearchQuery searchQuery = new SearchQuery();
        searchQuery.execute(value);
        }
        }

            @Override
        protected void onNewIntent(Intent intent) {
         // TODO Auto-generated method stub
         super.onNewIntent(intent);
         handleIntent(intent);
        }
        } 
```

在清单中，此活动包含在搜索和查看过滤器中，如下所示：

```
 <activity android:name=".SearchActivity"
        android:launchMode="singleTop">
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
        </intent-filter>
        <meta-data 
            android:name="android.app.searchable"
            android:resource="@xml/searchable"/>
    </activity> 
```

同样在清单中，不要忘记应用程序中显示活动默认搜索的元数据，如下所示：

```
 <meta-data android:name="android.app.default_searchable"
                    android:value=".SearchActivity" /> 
```

最后在 onCreateOptionsMenu 中，确保通过将搜索配置与搜索服务关联来添加搜索配置：

```
 //associating the searchable configuration with the search service...
    SearchManager searchManager = (SearchManager)getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView)menu.findItem(R.id.search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName())); 
```

onOptionsItemSelected 方法中不需要任何内容​​。

这对我来说非常有效。如果您需要更多详细信息，请从actionBarSherlock 中的[搜索视图演示和](http://actionbarsherlock.com/samples.html)[设置搜索界面的开发人员教程](http://developer.android.com/training/search/setup.html)中找到更多信息。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T10:48:28.307

如果您还没有找到答案，我就是这样做的（我正在使用 ActionBarSherlock）：

*   在菜单声明中添加一个条目

    ```
     <item android:id="@+id/menu_search"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"
        android:icon="@drawable/wfm_menu_search"
        android:showAsAction="always|withText|collapseActionView"
        android:title="@string/menu_search"/> 
    ```

*   在您的活动中覆盖“onCreateOptionsMenu”以膨胀您的菜单并关联您的 SearcView ：

    ```
    public boolean onCreateOptionsMenu(final Menu menu) {
        getSupportMenuInflater().inflate(R.menu.main_menu, menu);
        this.refreshMenuItem = menu.findItem(R.id.menu_refresh);

        this.searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        this.searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {

        @Override
        public boolean onQueryTextSubmit(String query) {
            // collapse the view ?
            menu.findItem(R.id.menu_search).collapseActionView();
            return false;
        }

        @Override
        public boolean onQueryTextChange(String newText) {
            // search goes here !!
            // listAdapter.getFilter().filter(query);
            return false;
        }

    }); 
    ```

就这样，没有其他活动。希望你觉得它有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:46:16.583

那是你的完整代码吗？现在在`onCreateOptionsMenu`你创建 a`SearchView`并分配给它 a`OnQueryTextListener`但这就是你所做的一切。我没有在您的代码中看到将其添加`SearchView`到膨胀菜单的位置。

正如您所说，您在屏幕上看到了小部件，我假设您已经在`R.menu.building_search`文件中声明了小部件，在这种情况下，您应该查找该小部件（它没有设置侦听器，因此不执行任何操作）并且不声明一个新的（不会与用户交互）：

```
SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView(); 
```

（这是来自 android 开发者网站上的搜索指南，如果我没记错的话，这也应该适用于 ActionBarSherlock）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-16T14:18:16.337

由于其他所有答案都包含一些事实，但没有完全回答问题，我将创建自己的答案。

半年前创建此问题时，ABS 并未完全实现 SearchView 功能。从 ABS 4.2.0 开始，这已经实施。

通过遵循 ABS 示例应用程序，我的完整实现可以在[这里](https://github.com/ZeusWPI/hydra/pull/139/files)找到。

# mobile - 网站移动浏览器

> ID：14991990
> 
> 赞同：0
> 
> 时间：2013-02-20T23:37:58.873
> 
> 标签：mobile, browser, web, emulation

希望有人可能知道我的意思以及我在哪里可以找到这样的东西。

我正在创建一个新网站，作为其中的一部分，我将提供移动网页设计。如果可能的话，我需要的是，如果用户单击我的一个示例，它会加载移动浏览器（而不是普通 Web 浏览器上的移动站点）。更像是一个模拟器，可以让他们看到潜在站点的工作示例。

有没有什么可以做到这一点，或者我正在寻找一个新窗口以设置大小并在其中显示网站？

请注意——在写这篇文章时，我可能偶然发现了一个潜在的楼层，因为这可能会暴露代码。

我在想我或许应该考虑放置他们可以滚动浏览的 JPEG 或 PNG，以免暴露移动网站本身背后的代码？！

如果有这样的模拟器或类似的可用（并且不在后台显示代码），我会非常乐意指出正确的方向！

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:50:20.363

如果我误解了你的问题，请纠正我，但听起来你想让用户预览不同屏幕尺寸的响应式设计，同时拒绝他们访问源代码。

如果是这种情况，将设计渲染为平面图像文件以进行预览是您最好的选择，即使它会牺牲您设计的任何交互方面。这是一个粗略的权衡。

我认为您有正当理由隐藏代码。但是，如果还没有，您可能想问问自己是什么促使您首先隐藏您的源代码。网络建立在开放标准和可访问性之上；您将不得不经历很多扭曲才能从浏览器中隐藏 HTML、CSS 和 javascript 等静态资产。我了解您是否担心粗略的客户无偿使用您的作品，但这更多的是合同/法律问题，而不是技术问题。

也就是说，您始终可以将移动网站的主要内容（或如果您必须隐藏代码，则为内容的图像）放置在指定宽度和高度的 div 中，以在视觉上模拟手机。用一些电话图形包裹它，用`overflow-y: scroll;`和控制溢出，`overflow-x: hidden;`你就拥有了。

[网页设计周刊](http://web-design-weekly.com/)是这个概念的一个很好的例子。

编辑：在我看来，您可以探索的另一个选择是视频而不是静态图像。如果您需要让客户惊叹，始终是一个选择。[Typeform.com](http://www.typeform.com/)就是我所说的一个很好的例子。

# asp.net-mvc-4 - 如何使用 MVC 4 实现三足 OAuth？

> ID：14991992
> 
> 赞同：3
> 
> 时间：2013-02-20T23:38:07.343
> 
> 标签：asp.net-mvc-4, oauth, quickbooks, intuit-partner-platform, quickbooks-online

我正在尝试使用 ASP .NET MVC 4 的内置 OAuth 功能来连接到 QuickBooks。问题（我的意思是，呃挑战）是内置模板（facebook、google 等）都提供两条腿授权。QuickBooks 使用三个。结果，这真的在我的屁股上踩了一个泥坑。

好消息是 QuickBooks 提供了一个 MVC 3 示例。你可以在这里找到它：

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App)

引起我问题的最相关代码在这里：

```
 private String consumerSecret, consumerKey, oauthLink, RequestToken, TokenSecret, oauth_callback_url;

    /// <summary>
    /// Action Result for Index, This flow will create OAuthConsumer Context using Consumer key and Consuler Secret key
    /// obtained when Application is added at intuit workspace. It creates OAuth Session out of OAuthConsumer and Calls 
    /// Intuit Workpsace endpoint for OAuth.
    /// </summary>
    /// <returns>Redirect Result.</returns>
    public RedirectResult Index()
    {
        oauth_callback_url = Request.Url.GetLeftPart(UriPartial.Authority) + ConfigurationManager.AppSettings["oauth_callback_url"];
        consumerKey = ConfigurationManager.AppSettings["consumerKey"];
        consumerSecret = ConfigurationManager.AppSettings["consumerSecret"];
        oauthLink = Constants.OauthEndPoints.IdFedOAuthBaseUrl;
        IToken token = (IToken)Session["requestToken"];
        IOAuthSession session = CreateSession();
        IToken requestToken = session.GetRequestToken();
        Session["requestToken"] = requestToken;
        RequestToken = requestToken.Token;
        TokenSecret = requestToken.TokenSecret;

        oauthLink = Constants.OauthEndPoints.AuthorizeUrl + "?oauth_token=" + RequestToken + "&oauth_callback=" + UriUtility.UrlEncode(oauth_callback_url);
        return Redirect(oauthLink);
    }

    /// <summary>
    /// Gets the Access Token
    /// </summary>
    /// <returns>Returns OAuth Session</returns>
    protected IOAuthSession CreateSession()
    {
        OAuthConsumerContext consumerContext = new OAuthConsumerContext
        {
            ConsumerKey = consumerKey,
            ConsumerSecret = consumerSecret,
            SignatureMethod = SignatureMethod.HmacSha1
        };

        OAuthSession s = new OAuthSession(consumerContext,
                                        Constants.OauthEndPoints.IdFedOAuthBaseUrl + Constants.OauthEndPoints.UrlRequestToken,
                                        oauthLink,
                                        Constants.OauthEndPoints.IdFedOAuthBaseUrl + Constants.OauthEndPoints.UrlAccessToken);

        return s;
    } 
```

从那里，您可以看到 MVC 3 示例创建了一个会话并获取了一个请求令牌。我的直接问题是在 MVC 4 中找到可以检索此请求令牌的代码位。我*认为*它在我的 AccountController 中：

```
 //
    // POST: /Account/ExternalLogin
    //
    // Go to me first!!!

    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult ExternalLogin(string provider, string returnUrl)
    {
        return new ExternalLoginResult(provider, Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
    }

    //
    // Go to me second!!!

    internal class ExternalLoginResult : ActionResult
    {
        public ExternalLoginResult(string provider, string returnUrl)
        {
            Provider = provider;
            ReturnUrl = returnUrl;
        }

        public string Provider { get; private set; }
        public string ReturnUrl { get; private set; }

        public override void ExecuteResult(ControllerContext context)
        {
            if(Provider.Equals("Quickbooks Online")){
                // oauthLink = Constants.OauthEndPoints.AuthorizeUrl + "?oauth_token=" + RequestToken + "&oauth_callback=" + UriUtility.UrlEncode(oauth_callback_url);
                // oauthLink    "https://workplace.intuit.com/Connect/Begin?oauth_token=qyprdvh1kZ3dpyobhKfJ54C10xPJPDy0vtwdNCeZmUmbLJdr&oauth_callback=http%3A%2F%2Flocalhost%3A50671%2FOauthResponse" string
                string requestToken = "";  // How do I get this?
                string oauthCallback = context.HttpContext.Request.Url.Scheme + "/OauthResponse";

    //
    // Now do I get a request token?  How?

                string returnUrl = "https://workplace.intuit.com/Connect/Begin" + "?oauth_token=" + requestToken + "&oauth_callback=" + HttpUtility.UrlEncode(oauthCallback);
                OAuthWebSecurity.RequestAuthentication(Provider, returnUrl);
            }
            else{
                OAuthWebSecurity.RequestAuthentication(Provider, ReturnUrl);
            }
        }
    } 
```

但从这里我迷路了。任何帮助，将不胜感激。我用谷歌搜索了很多，我猜到目前为止我已经投入了超过 40 小时的时间来尝试让它发挥作用。

谢谢，威尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:59:57.863

Intuit 合作伙伴平台目前支持 OAuth1.0a。3-legged OAuth 的第一站是获取 OAuth 请求令牌。

我没有使用 MVC4 的 OAuthWebSecurity；但是，根据我从文档/源代码中快速收集到的内容，您似乎需要创建一个独特的“QuickBooksClient”（并且，开源它？）。我会按照[LinkedInClient 类](https://github.com/AArnott/dotnetopenid/blob/master/src/DotNetOpenAuth.AspNet/Clients/OAuth/LinkedInClient.cs)作为食谱。在[IPP docs](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App)中，OAuth 端点是：

获取请求令牌：[https](https://oauth.intuit.com/oauth/v1/get_request_token)
://oauth.intuit.com/oauth/v1/get_request_token 登录页面：[https](https://appcenter.intuit.com/Connect/Begin)
://appcenter.intuit.com/Connect/Begin 获取访问令牌：[https ://oauth.intuit.com/oauth /v1/get_access_token](https://oauth.intuit.com/oauth/v1/get_access_token)

# internet-explorer - 无法让 div 在 IE9 中正确呈现

> ID：14991993
> 
> 赞同：1
> 
> 时间：2013-02-20T23:38:09.717
> 
> 标签：internet-explorer, html, rendering

我正在构建的这个网页有 10 个 div 类堆叠成两行（顶部 5 个，底部 5 个）。每个里面都有一个图像。Chrome 和 Firefox 正在正确呈现所有内容，除了一个不应该显示为超链接的小文本短语（有关更多信息，请参阅本文底部）。这向我表明我的代码中的某些内容已关闭，但我一生都无法弄清楚是什么。在我 FTP 将其上传到实时站点之前，一切看起来都很正常。非常感谢您的帮助。

HTML：

```
<div id="text-brands">
      <h2 class="blueheader">Learn More About Our Featured Brands</h2>
      <br />
  <div class="featuredBrands">
   <a href="http://www.attvtedetails.com" target="_blank"><img src="images/Brand Logos/ATT.jpg" width="150" height="150" alt="AT&amp;T" /> </a> </div>
    <div class="featuredBrands"><a href="http://www.brotherdetails.com" target="_blank"><img src="images/Brand Logos/BROTHER.jpg" width="150" height="150" alt="Brother" /> </div>
    <div class="featuredBrands"><a href="http://www.dymodetails.com" target="_blank"><img src="images/Brand Logos/DYMO.jpg" width="150" height="150" alt="Dymo" /></div>
    <div class="featuredBrands"><a href="http://www.fujifilmdetails.com" target="_blank"><img src="images/Brand Logos/FUJI.jpg" width="150" height="150" alt="Fuji Film" /> </div>
    <div class="featuredBrands"><a href="http://www.hpdetails.com" target="_blank"><img src="images/Brand Logos/HP.jpg" width="150" height="150" alt="HP" /> </div>
    <div class="featuredBrands"><a href="http://www.imation-memorexdetails.com" target="_blank"><img src="images/Brand Logos/IMATION.jpg" width="150" height="150" alt="Imation" /> </div>
    <div class="featuredBrands"><a href="http://www.kensingtondetails.com" target="_blank"><img src="images/Brand Logos/KENSINGTON.jpg" width="150" height="150" alt="Kensington" /> </div>
    <div class="featuredBrands"><a href="http://www.logitechdetails.com" target="_blank"><img src="images/Brand Logos/LOGITECH.jpg" width="150" height="150" alt="Logitech" /> </div>
    <div class="featuredBrands"><a href="http://www.verbatimdetails.com" target="_blank"><img src="images/Brand Logos/VERBATIM.jpg" width="150" height="150" alt="Verbatim" /> </div>
    <div class="featuredBrands"><a href="http://www.lexmarkdetails.com" target="_blank"><img src="images/Brand Logos/LEXMARK.jpg" width="150" height="150" alt="Lexmark" /> </div>

<br />
<br />
<br />
</div> 
```

CSS：

```
#text-brands {
   width: 925px;
   float: left;
   padding-top: 30px;
   padding-right: 10px;
   padding-bottom: 20px;
   padding-left: 20px;
 }

.featuredBrands {
   margin: 0px;
   padding: 10px;
   float: left;
   width: 150px;
   border: 5px solid #EAEAEA;
   clear: none;
   height: 150px;
   overflow: hidden;
} 
```

这是我遇到问题的链接：[http ://www.officesolutions.com/technology-products.html](http://www.officesolutions.com/technology-products.html)

最后一个问题（如果有人可以提供帮助，我真的认为这是一个奖励）。页面底部“产品类别”最左侧的类别呈现为超链接（特别是 lexmark 徽标应该指向的链接） . 我无法弄清楚，因为该短语附近根本没有任何标记。它只是应该是一个标题，但由于某种原因显示为一个链接。

HTML：

```
<div id="content-bottom">
          <div id="sitelinks">
            <div class="column" style="border-left: none;">
              <p><strong>Product Categories</strong></p>
              <ul>
                <li><a href="office-supplies.html">Office Supplies</a></li>
                <li><a href="furniture-space-planning.html">Furniture &amp; Space Planning</a></li>
                <li><a href="facility-maintenance-supplies.html">Facility &amp; Maintenance Supplies</a></li>
                <li><a href="coffee-services.html">Coffee Services</a></li>
                <li><a href="printing-promotional-products.html">Printing &amp; Promotional Products</a></li>
                <li><a href="technology.html">Technology</a></li>
              </ul>
            </div>
         </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:55:38.110

我很困惑第二个和第一个问题接缝是否与链接结转相同？在您的实际问题中看不到任何有关 IE9 显示问题的信息？

检查代码时的*第二个问题*，该列表中的任何链接都没有结束标记。

您那里可能没有最新版本，或者可能由于某些非常奇怪的原因而被删除。

代码原样：

```
 <div class="featuredBrands"><a href="http://www.attvtedetails.com" target="_blank"><img src="images/Brand Logos/ATT.jpg" width="150" height="150" alt="AT&amp;T" /> </a> </div>
        <div class="featuredBrands"><a href="http://www.brotherdetails.com" target="_blank"><img src="images/Brand Logos/BROTHER.jpg" width="150" height="150" alt="Brother" /> </div>
        <div class="featuredBrands"><a href="http://www.dymodetails.com" target="_blank"><img src="images/Brand Logos/DYMO.jpg" width="150" height="150" alt="Dymo" /></div>
        <div class="featuredBrands"><a href="http://www.fujifilmdetails.com" target="_blank"><img src="images/Brand Logos/FUJI.jpg" width="150" height="150" alt="Fuji Film" /> </div>
        <div class="featuredBrands"><a href="http://www.hpdetails.com" target="_blank"><img src="images/Brand Logos/HP.jpg" width="150" height="150" alt="HP" /> </div>
        <div class="featuredBrands"><a href="http://www.imation-memorexdetails.com" target="_blank"><img src="images/Brand Logos/IMATION.jpg" width="150" height="150" alt="Imation" /> </div>
        <div class="featuredBrands"><a href="http://www.kensingtondetails.com" target="_blank"><img src="images/Brand Logos/KENSINGTON.jpg" width="150" height="150" alt="Kensington" /> </div>
        <div class="featuredBrands"><a href="http://www.logitechdetails.com" target="_blank"><img src="images/Brand Logos/LOGITECH.jpg" width="150" height="150" alt="Logitech" /> </div>
        <div class="featuredBrands"><a href="http://www.verbatimdetails.com" target="_blank"><img src="images/Brand Logos/VERBATIM.jpg" width="150" height="150" alt="Verbatim" /> </div>
        <div class="featuredBrands"><a href="http://www.lexmarkdetails.com" target="_blank"><img src="images/Brand Logos/LEXMARK.jpg" width="150" height="150" alt="Lexmark" /> </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:02:16.373

您在第一个代码块的图像末尾缺少关闭锚标记。添加它们，这可以解决您的问题。其他一些浏览器会考虑到此类错误并自动正确呈现，而 IE 则不会。您还可以通过 W3C 标记验证器运行您的代码，它会告诉您一堆错误在哪里。

# ios - Admob 插页式异常

> ID：14991994
> 
> 赞同：2
> 
> 时间：2013-02-20T23:38:10.933
> 
> 标签：ios, nullpointerexception, admob

我有 2 个带有 Admob 插页式广告的应用程序。Admob 插页式广告在 1 个应用程序中停止工作。我得到异常调用 loadRequest 方法。

**例外：-[__NSCFDictionary setObject:forKey:]: 尝试插入 nil 键**

```
 interestial = [[GADInterstitial alloc] init];
    interestial.adUnitID = PUBID;
    //interestial.delegate = interestialDelegate;
    GADRequest *request = [GADRequest request];
    [interestial loadRequest:request]; 
```

我花了很多时间编写代码。我在另一个应用程序中也有相同的工作代码。可能是项目中的某些东西，例如缺少框架或其他

我试过 Admob 6.3.0、6.2.1、6.1.5

我的 Admob 代码的主要更改是升级到 6.3.0，但第二个应用程序也升级了。

我正在记录 PUBID。它不是零。

我没有将 NSDictionary 传递给我自己的 Admob。应用程序之间的区别在于它适用于带有 ARC 的应用程序，而在非 ARC 应用程序中则失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:44:39.593

最常见的问题是`-ObjC`flag in`Other Linker Flags`

# r - 转换 R 对象，以便将行转换为行和列

> ID：14991995
> 
> 赞同：3
> 
> 时间：2013-02-20T23:38:12.373
> 
> 标签：r, dataframe, row, transformation

我在 R 中有一个 3x168 的数据框。每行有三列 - 日、小时和值。日和小时对应星期几，小时列对应当天的小时，值对应我关心的值。

我希望转换这些数据，使其存在于 24x7 矩阵中，行（或列）对应于特定日期，列（或行）对应于特定小时。

在 R 中执行此操作的最有效方法是什么？我已经能够将一些杂乱的命令串放在一起来接近一些东西，但我觉得有一个非常有效的解决方案。

示例起始数据：

```
> print(data)
    weekday hour       value
1         M    1  1.11569683
2         M    2 -0.44550495
3         M    3 -0.82566259
4         M    4 -0.81427790
5         M    5  0.08277568
6         M    6  1.36057839
...
156      SU   12  0.12842608
157      SU   13  0.44697186
158      SU   14  0.86549961
159      SU   15 -0.22333317
160      SU   16  1.75955163
161      SU   17 -0.28904472
162      SU   18 -0.78826607
163      SU   19 -0.78520233
164      SU   20 -0.19301032
165      SU   21  0.65281161
166      SU   22  0.37993619
167      SU   23 -1.58806896
168      SU   24 -0.26725907 
```

我希望得到以下类型的东西：

```
 M          .... SU
1  1.11569683
2  -0.44550495
3  -0.82566259
4  -0.81427790
5
6
. 
.
.
19
20
21                 0.65281161
22                 0.37993619
23                -1.58806896
24                -0.26725907 
```

您可以通过这种方式获得一些实际的样本数据：

```
weekday <- rep(c("M","T","W","TH","F","SA","SU"),each=24)
hour <- rep(1:24,7)
value <- rnorm(24*7)
data <- data.frame(weekday=weekday, hour=hour, value=value) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:56:03.850

像这样的东西（假设 dfrm 是数据对象）：

```
 M <- matrix( NA, nrow=24, ncol=2, 
         dimnames = list(Hours = 1:24, Days=unique(dfrm$weekday) ) )
 M[ cbind(dfrm$hour, dfrm$weekday) ] <- dfrm$value

> M
     Days
Hours           M         SU
   1   1.11569683         NA
   2  -0.44550495         NA
   3  -0.82566259         NA
   4  -0.81427790         NA
   5   0.08277568         NA
   6   1.36057839         NA
   7           NA         NA
   8           NA         NA
   9           NA         NA
   10          NA         NA
   11          NA         NA
   12          NA  0.1284261
   13          NA  0.4469719
   14          NA  0.8654996
   15          NA -0.2233332
   16          NA  1.7595516
   17          NA -0.2890447
   18          NA -0.7882661
   19          NA -0.7852023
   20          NA -0.1930103
   21          NA  0.6528116
   22          NA  0.3799362
   23          NA -1.5880690
   24          NA -0.2672591 
```

或者，如果它们“密集”，您可以“折叠值”：

```
 M <- matrix(dfrm$value, 24, 7) 
```

然后相应地重命名您的尺寸。提供实际测试用例时提供的测试代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T23:57:24.013

这对于包来说非常简单`reshape2`：

```
# Sample data - please include some with your next question!
x <- data.frame(day = c(rep("Sunday", 24),
                        rep("Monday", 24),
                        rep("Tuesday", 24),
                        rep("Wednesday", 24),
                        rep("Thursday", 24),
                        rep("Friday", 24),
                        rep("Saturday", 24)),

                hour = rep(1:24, 7),

                value = rnorm(n = 24 * 7)

)

library(reshape2)

# For rows representing hours
acast(x, hour ~ day) 

# For rows representing days
acast(x, day ~ hour) 

# If you want to preserve the ordering of the days, just make x$day a factor
# unique(x$day) conveniently gives the right order here, but you'd always want
# check that (and make sure the factor reflects the original value - that's why
# I'm making a new variable instead of overwriting the old one)
x$day.f <- factor(x$day, levels = unique(x$day))

acast(x, hour ~ day.f)
acast(x, day.f ~ hour) 
```

您拥有的三列数据集是所谓的“熔化数据”的一个示例 - 每行代表一个`x$value`带有一个或多个标识符（此处为`x$day`和）的单个结果 ( `x$hour`)。里面的小公式`acast`让您表达您希望如何配置新数据集 - 波浪号左侧的变量名称用于定义行，右侧的变量名称用于定义列。在这种情况下，只剩下一列 - `x$value`- 所以它会自动用于填充结果`matrix`。

我花了一些时间来思考所有这些问题，但考虑重塑数据是一件非常强大的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T04:50:01.163

`xtabs`这在基础 R中非常简单：

```
output <- as.data.frame.matrix(xtabs(value ~ hour + weekday, data))
head(output)
#            SU          M           T           W         TH           F         SA
# 1 -0.56902302 -0.4434357 -1.02356300 -0.38459296  0.7098993 -0.54780300  1.5232637
# 2  0.01023058 -0.2559043 -2.79688932 -1.65322029 -1.5150986  0.05566206 -0.6706817
# 3  0.18461405  1.2783761 -0.02509352 -1.36763623 -0.4978633  0.20300678  1.4211054
# 4  0.54194889  0.5681317  0.69391876 -1.35805959  0.4208977  1.65256590  0.3622756
# 5 -1.68048536 -1.9274994  0.24036908 -0.21959772  0.7654983  1.62773579  0.6760743
# 6 -1.39398673  1.7251476  0.36563174  0.04554249 -0.2991433 -1.47331314 -0.7647513 
```

要以正确的顺序（如上）获取日期，请在执行步骤*之前*`factor`在“工作日”变量上使用：*`xtabs`*

 *```
data$weekday <- factor(data$weekday, 
                       levels = c("SU", "M", "T", "W", "TH", "F", "SA")) 
```*