# StackOverflow 问答 13227000-13227999

# linux - 在 Ubuntu 12.04 上编译 2.6 内核

> ID：13227000
> 
> 赞同：1
> 
> 时间：2012-11-05T06:27:25.487
> 
> 标签：linux, linux-kernel, kernel

我需要在 2.6 内核（普通内核，而不是 ubuntu 内核）上进行内核开发。我正在运行 Ubuntu 12.04、x86。我的第一个障碍是获得正确的 gcc 版本来编译 2.6 内核。我已经过去了，并且能够安装 gcc 4.2。但是，当我尝试执行**make menuconfig**时，会出现错误，其中一些我已在下面发布：

```
/usr/include/arpa/inet.h:38: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘inet_lnaof’
/usr/include/arpa/inet.h:42: error: expected ‘)’ before ‘__net’
/usr/include/arpa/inet.h:46: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘inet_netof’
/usr/include/arpa/inet.h:50: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘inet_network’
/usr/include/arpa/inet.h:54: error: storage class specified for parameter ‘inet_ntoa’
/usr/include/arpa/inet.h:60: error: storage class specified for parameter ‘inet_pton’
/usr/include/arpa/inet.h:66: error: expected declaration specifiers or ‘...’ before ‘socklen_t’
/usr/include/arpa/inet.h:67: error: storage class specified for parameter ‘inet_ntop’
/usr/include/arpa/inet.h:74: error: storage class specified for parameter ‘inet_aton’
/usr/include/arpa/inet.h:78: error: expected ‘)’ before ‘__net’
/usr/include/arpa/inet.h:84: error: storage class specified for parameter ‘inet_net_ntop’
/usr/include/arpa/inet.h:90: error: storage class specified for parameter ‘inet_net_pton’
/usr/include/arpa/inet.h:96: error: storage class specified for parameter ‘inet_nsap_addr’
/usr/include/arpa/inet.h:101: error: storage class specified for parameter ‘inet_nsap_ntoa’
/usr/include/arpa/inet.h:104: error: expected declaration specifiers before ‘__END_DECLS’ 
```

我认为这是因为我试图在具有版本 3 内核头文件的系统上编译 2.6 内核？

有谁知道我如何在 Ubuntu 12.04 上编译我的普通 2.6 内核？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:29:59.583

Ubuntu 并没有真正使用 vanilla 内核，您需要修补 vanilla 内核才能使用 Ubuntu 内核的 linux 源代码。

请参阅[此链接](https://help.ubuntu.com/community/Kernel/Compile)以获取完整指南。

# android - 从android应用程序调用javaScript函数时保留选择

> ID：13227004
> 
> 赞同：1
> 
> 时间：2012-11-05T06:27:42.267
> 
> 标签：android, android-webview

我在我的 android 应用程序中嵌入了一个 WebView 并使用了

> webview.loadUrl("javascript:myFunction()")

在加载的 url 上调用 javaScript 函数，但我面临的问题是，如果我在 webview 上有任何选择，它会在调用 webview.loadUrl() 调用时被清除。

当从android应用程序调用javascript函数时，有什么方法可以保留**选择？**

# android - 从另一个应用程序调用应用程序的主要活动

> ID：13227007
> 
> 赞同：0
> 
> 时间：2012-11-05T06:28:16.167
> 
> 标签：android, android-intent, android-activity

我想在我的应用程序中使用 zirco 浏览器，因此我已经获取了代码并开始将其嵌入到我的应用程序中。所以zirco中有这个MainActivity，它是应用程序的起点，即主要活动。Zirco 代码单独运行良好，但由于我必须从我的应用程序中调用 Zirco 的 MainActivity，我已将代码更改如下。

增加了额外的活动。将此作为应用程序的主要活动。从新创建的活动中调用 Zirco 代码的 MainActivity。

新创建的活动具有以下代码

```
 public  void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    Intent intent = new Intent();
    intent.setComponent(new ComponentName("org.zirco", "org.zirco.ui.activities.MainActivity"));
    startActivity(intent);
} 
```

所以预期的行为是浏览器应该正常运行，因为我刚刚创建了一个额外的活动，使其成为主要活动并从中调用原始 MainActivity。但是浏览器只是打开，然后在对其执行任何操作（搜索、单击链接）时重新启动应用程序。

如何纠正这一点。有没有其他方法可以调用应用程序的 MainActivity 并使其运行。

Zirco 代码可在此处[获得 http://code.google.com/p/zirco-browser/](http://code.google.com/p/zirco-browser/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:44:18.203

试试这个代码或 [关注更多细节](http://glorious-arvind.blogspot.in/2012/11/launching-other-application-using-code.html)

这对我有用。例如你的

> 包名 = com.abc.xyz
> 
> 活动名称 = MainActivity

而不是按照下面的代码。

```
final Intent intent = new Intent(Intent.ACTION_MAIN, null);
intent.addCategory(Intent.CATEGORY_LAUNCHER);

final ComponentName cn = new ComponentName("com.abc.xyz", "com.abc.xyz.MainActivity");
intent.setComponent(cn);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity( intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:03:09.597

如果您的问题有答案，您确定嵌入浏览器吗？

这是非常非标准的，并且再次符合 Android 意图的理念。通常您使用意图打开外部浏览器：

[向浏览器发送 Intent 以打开特定 URL](https://stackoverflow.com/questions/3004515/android-sending-an-intent-to-browser-to-open-specific-url)

# php - 如何对三个变量使用explode

> ID：13227010
> 
> 赞同：0
> 
> 时间：2012-11-05T06:28:24.980
> 
> 标签：php, arrays, sorting

我以以下方式存储数组

```
$pos[$k] = $total[$k]." / ".$posts_ids[$k]." / ".$time[$k]; 
```

我正在使用以下方式从 pos 数组中提取值。

```
$a = $b = array();
foreach ($pos as $key => $value){
  list($a[$key], $b[$key], $t[$key]) = explode('/', $value);
  array_multisort($a, SORT_DESC, SORT_NUMERIC, $b ,$t);
} 
```

但是我无法提取变量 $t 的值，也无法在不更改数组位置的情况下对其进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:39:35.693

您尚未`t`在代码中定义为数组，除非您没有值，否则这应该不是问题（但在这种情况下，您会收到警告）。

至于[multisort](http://php.net/manual/en/function.array-multisort.php)，正确的语法是

```
array_multisort($a, $b, $t, SORT_NUMERIC, SORT_DESC); 
```

但**不是很清楚你想要做什么**，并且以不同的方式组织值的解析可能更方便（例如，在多维数组中而不是多个数组中，或者使用自定义排序函数）。

```
<?php

        $a = array();
        $b = array();
        $t = array();

        $values = array("5/7/12","1/9/3");

        foreach($values as $key => $value)
        {
                list($a[$key], $b[$key], $t[$key]) = explode('/', $value);
        }
        array_multisort($a, $b, $t, SORT_NUMERIC, SORT_DESC);

        print_r($a);
        print_r($b);
        print_r($t);
?> 
```

> 以及无法在不更改数组位置的情况下对其进行排序。

这是设计使然。*对您传递的第一个*`array_multisort`数组进行排序，即. 其他数组中的相应元素将根据项目在 中的位置进行排序。*`$a``$a`*

 *例如，如果 的第一个元素`$a`是最小的，它将被放在最后`SORT_DESC`。但是由于第一个元素`$a`是最后一个，所以最后一个元素`$t`也将放在最后一个内`$t`，*不管它的值*是什么。

如果你想`$t`“统治”排序，你必须把它放在第一位。

如果您希望所有三个数组都独立排序，则不能使用`array_multisort`.*

# c# - 基于自定义角色的授权（无成员身份）

> ID：13227012
> 
> 赞同：3
> 
> 时间：2012-11-05T06:28:33.167
> 
> 标签：c#, asp.net-mvc-4, authorization

我对 MVC 很陌生，并且使用 ASP.NET MVC 4 开发应用程序。对于身份验证，我在域中使用带有 Active Directory 的 Windows 身份验证。下一步是授权用户（不使用会员资格）。浏览了几篇文章，仍然找到了一个好的方法。

我有自己的 3 个数据库表 ( `Users`, `Roles`, `UserRoles`) 来维护具有多个管理员级别的授权用户。这是多对多。例如，可能有“管理员”（具有创建权限的系统的完全访问权限）、“数据操作员”（仅对部分更新权限）和“支持用户”（只读/仅查看访问权限）。由于这是多对多 - 用户可能是“支持用户”以及“数据输入操作员”。

对于特定部分，我需要根据方法控制访问。例如，假设有一个名为“InvoiceController”的控制器。可能有以下方法。

```
CreateNewInvoice() // Accessible only by admin

UpdateInvoice(...) // Accessible for admin and data operator

ViewInvoice(...) // Accessible for admin, data operator and support user 
```

（只有角色表中存在的用户才能访问系统。其他人拒绝访问。）

请让我知道如何根据存储在数据库中的角色在方法级别使用身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:41:26.860

你可以通过两种方式做到这一点：

要么创建一个自定义`AuthorizeAttribute`，您可以在其中加载并检查角色。

但更好的解决方案是创建一个自定义`IPrincipal/IIdentity`并将其分配到`Application_OnPostAuthenticateRequest`. 通过这样做，您可以充分利用内置授权模型，而无需进一步定制。

在这里查看我的答案：[https ://stackoverflow.com/a/10949178/70386](https://stackoverflow.com/a/10949178/70386)

# security - 来自服务器的跨域请求

> ID：13227014
> 
> 赞同：0
> 
> 时间：2012-11-05T06:28:36.323
> 
> 标签：security, http, webserver, cross-domain, httprequest

我知道由于安全措施（可以通过 CORS 或 JSONP 避免），浏览器通常会阻止对服务器的跨域 http 请求，但是服务器向另一台服务器发出 http 请求呢？可以通过安全限制阻止吗？

我想我要问的是，由于服务器发出请求而不是浏览器，我是否仍需要处理诸如 CORS 和/或 JSONP 之类的事情，或者这些解决方法是否专门针对浏览器级安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:31:13.613

计算机可以自由发送它想要的任何请求。

在 CORS 的情况下，这是一种软件（浏览器）限制在同一台计算机上运行的不太受信任的代码（Javascript）。但是，如果您可以完全访问计算机，则可以做任何事情。

这是一种特定于浏览器的措施，旨在解决人们经常在浏览器中运行不受信任的代码并有意限制它的事实。更具体地说，同源策略会导致限制，由于需要合法的跨站点 AJAX，CORS 是参与服务器的一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:31:01.927

*被谁的*安全限制阻止了？当然*可以*，但不是用户。服务器向另一个 Web 服务器发出 HTTP 请求与您的浏览器发出相同请求没有什么不同。

# sdk - OPENXML SDK 读写的性能问题

> ID：13227015
> 
> 赞同：1
> 
> 时间：2012-11-05T06:28:41.180
> 
> 标签：sdk, openxml-sdk

根据我的客户要求，我们正在用OPENXML SDK代替ASPOSE技术来读写Excel 2007（.xlsm宏文件），实际上我们可以使用openxml sdk来完成这项工作。

然而，当我们比较执行时间时，问题就开始了，如果数据太大（例如 18k 的数据）无法读取或写入，ASPOSE 与 OPEN XML SDK 相比太快了。

我们采用以下链接中给出的以下方法，它可以完美运行，但真正的问题是执行时间太长，在此期间我们会释放 trasaction 超时。

[http://msdn.microsoft.com/en-us/library/office/hh180830.aspx](http://msdn.microsoft.com/en-us/library/office/hh180830.aspx)

如果 OPENXML SDK 未能在比 ASPOSE 更短的时间内交付结果，那么只有 OPENXML SDK 才会被接受，否则我们寻找和编写开放 xml sdk 代码的努力是徒劳的。

基本上，我们已经在数据集中获取整个巨大的数据，并使用上述任何技术进行写入。

任何有助于提高编码方面的性能的帮助都将受到高度评价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:49:17.623

问题是工作集之一，而不是 IO 时间之一。分配过多的内存会减慢您的应用程序速度，而不仅仅是任何其他因素。最好使用流式方法。前段时间，我录制了一个使用流式传输方法的屏幕录像 - 它以每秒 10,000 行左右的速度生成工作表（对于具有 20 列数据的行）。这接近 IO 限制，因此很难加快速度。您将需要使用更快的磁盘。

您可以在此处找到截屏视频和示例代码：

[http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/01/10/screen-cast-using-open-xml-and-linq-to-xml-in-a-streaming-fashion-to-创建巨大的电子表格.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/01/10/screen-cast-using-open-xml-and-linq-to-xml-in-a-streaming-fashion-to-create-huge-spreadsheets.aspx)

-埃里克

# ios - XMPPFramework - 如何更新我自己的头像图像？

> ID：13227017
> 
> 赞同：4
> 
> 时间：2012-11-05T06:29:07.413
> 
> 标签：ios, xmpp, xmppframework, avatar

我正在开发一个应用程序，我想更新我的头像图像。我正在遵循`XEP-0153`更新我的头像图像的指南，我构建了一个`NSXMLElement`对应于以下代码的代码`XEP-0153`并将该元素发送到`XMPPStream`.

```
<iq from='juliet@capulet.com' 
    type='set'
    id='vc1'>
  <vCard xmlns='vcard-temp'>
    <PHOTO>
      <TYPE>image/jpeg</TYPE>
      <BINVAL>
        Base64-encoded-avatar-file-here!
      </BINVAL>
    </PHOTO>
  </vCard>
</iq> 
```

服务器响应以下错误：

```
<iq xmlns="jabber:client" type="error" id="vc1" to="vvreddy50@gmail.com/83557F96">
<vCard xmlns="vcard-temp">
      <photo>
        <type>image/jpeg</type>
        <binval>Base64-encoded-avatar-file-here</binval>
      </photo>
</vCard>
<error code="500" type="wait">
      <internal-server-error xmlns="urn:ietf:params:xml:ns:xmpp-stanzas">
      </internal-server-error>
</error>
</iq> 
```

代替 `<iq to='juliet@capulet.com' type='result' id='vc1'/>`

请任何人都可以发布与更新头像图像相关的代码或链接吗？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-18T09:46:14.530

```
- (void)updateAvatar:(UIImage *)avatar 
{
    NSData *imageData = UIImagePNGRepresentation(avatar);
    dispatch_queue_t queue = dispatch_queue_create("queue", DISPATCH_QUEUE_PRIORITY_DEFAULT);
    dispatch_async(queue, ^{
        XMPPvCardTempModule *vCardTempModule = [[XMPPHandler sharedInstance] xmppvCardTempModule];
        XMPPvCardTemp *myVcardTemp = [vCardTempModule myvCardTemp];
        [myVcardTemp setName:[NSString stringWithFormat:@"%@",name.text]];
        [myVcardTemp setPhoto:imageData];
        [vCardTempModule updateMyvCardTemp:myVcardTemp];
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-30T09:46:44.423

#import "XMPPvCardTemp.h"

```
 - (void)updateAvatar:(UIImage *)avatar{  
  NSData *imageData1 = UIImageJPEGRepresentation(avatar,0.5);
        NSXMLElement *vCardXML = [NSXMLElement elementWithName:@"vCard" xmlns:@"vcard-temp"];
        NSXMLElement *photoXML = [NSXMLElement elementWithName:@"PHOTO"];
        NSXMLElement *typeXML = [NSXMLElement elementWithName:@"TYPE"stringValue:@"image/jpeg"];
        NSXMLElement *binvalXML = [NSXMLElement elementWithName:@"BINVAL" stringValue:[imageData1 base64Encoding]];

        [photoXML addChild:typeXML];
        [photoXML addChild:binvalXML];
        [vCardXML addChild:photoXML];
        XMPPvCardTemp *myvCardTemp = [[[self appDelegate] xmppvCardTempModule]myvCardTemp];
        if (myvCardTemp) {
            [myvCardTemp setPhoto:imageData1];
            [[[self appDelegate] xmppvCardTempModule] updateMyvCardTemp
             :myvCardTemp];

        }
        else{

            XMPPvCardTemp *newvCardTemp = [XMPPvCardTemp vCardTempFromElement:vCardXML];
            [[[self appDelegate] xmppvCardTempModule] updateMyvCardTemp:newvCardTemp];
        }
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T17:38:15.257

来自[XMPP Core RFC](http://xmpp.org/rfcs/rfc6120.html#stanzas-error-syntax)，`<error type='wait'>`意味着：

> 等待后重试（错误是暂时的）

所以你的代码应该等待一段时间并重新发送请求。

（这是假设您实际上是在发送一个 base64 编码的 JPEG 图像作为`BINVAL`您的电子名片。来自服务器的回复与您说您发送的请求不对应，所以我假设您已经编辑了两者。它最好在您的问题中包含确切的请求和回复，但为了简洁起见，将 base64 编码的图像截断为几个字符。）

# image - 与单个图像相比，使用精灵有什么优势？

> ID：13227019
> 
> 赞同：0
> 
> 时间：2012-11-05T06:29:22.170
> 
> 标签：image, sprite, css-sprites

我最近注意到这个网站上的每张图片——标志、徽章颜色、向上/向下投票箭头——不胜枚举——实际上是单个精灵表的一部分，设置为背景图像，并根据所需的状态重新定位。与使用多个图像相比，使用此方法有什么优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:33:19.117

简单的。您发送的 HTTP 请求更少。一个用于所有图像，而不是一个用于每个图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:35:27.937

此外，可以更好地压缩包含所有图像的大型压缩精灵，从而导致文件大小比所有图像本身更小。例如，如果您有 10 个文件，每个文件大小为 20kB，则 sprite 通常会远小于 200kB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:32:38.553

对于 sprite，浏览器只需对整个图像发出一个 HTTP 请求，而不是对 N 个图像发出 N 次请求。创建 TCP 连接（三次握手）有很大的开销和延迟，因此将其限制为仅一个请求可以节省大量时间。

# jquery - jQuery html css 滑动切换效果

> ID：13227022
> 
> 赞同：1
> 
> 时间：2012-11-05T06:29:54.607
> 
> 标签：jquery, html, css, web

我正在尝试制作一个电影预订系统网站，该网站也包含电影信息。我想实现一种机制，当用户单击特定电影的海报时，其信息（描述和演员表）会显示并向下滑动。我已经实现了这一点。但是我遇到的问题是，当对特定电影的描述向下滑动时，同一行中的所有其他电影海报都会随之向下滑动。我想要的是让所有其他元素保持静态。

**这是我的 HTML 代码：**

```
 <div class="contents">
    <table id="movies">
        <tr>
            <td class="Horror"><img id="Image1" src="<?php echo "$image_1"; ?>" width=250 height=400> <p><?php echo "Name: $name_1";?></p>
                                                                                                <p class="description" id="desc1"><?php echo "<span>Description:</span> $description_1"?>
                                                                                                <p class="cast" id="cast1"> <?php echo "<span>Cast:</span> $cast_1" ?></p></td>
            <td class="Action"><img id="Image2" src="<?php echo "$image_2"; ?>" width=250 height=400> <p><?php echo "Name: $name_2";?></p>
                                                                                            <p class="description" id="desc2"><?php echo "<span>Description:</span> $description_2"?>
                                                                                            <p class="cast" id="cast2"> <?php echo "<span>Cast:</span> $cast_2" ?></p></td>
            <td class="Action"><img id="Image3" src="<?php echo "$image_3"; ?>" width=250 height=400> <p><?php echo "$name_3";?></p>
                                                                                            <p class="description" id="desc3"><?php echo "<span>Description:</span> $description_3"?>
                                                                                            <p class="cast" id="cast3"> <?php echo "<span>Cast:</span>$cast_3" ?></p></td>
        </tr>
        <tr>
            <td class="Action"><img id="Image4" src="<?php echo "$image_4"; ?>" width=250 height=400> <p><?php echo "Name: $name_4";?></p>
                                                                                            <p class="description" id="desc4"><?php echo "<span>Description:</span> $description_4"?>
                                                                                            <p class="cast" id="cast4"> <?php echo "<span>Cast:</span> $cast_4" ?></p></td>
            <td class="Horror"><img id="Image5" src="<?php echo "$image_5"; ?>" width=250 height=400> <p><?php echo "Name: $name_5";?></p>
                                                                                            <p class="description" id="desc5"><?php echo "<span>Description:</span> $description_5"?>
                                                                                            <p class="cast" id="cast5"> <?php echo "<span>Cast:</span> $cast_5" ?></p></td>
            <td class="Comedy"><img id="Image6" src="<?php echo "$image_6"; ?>" width=250 height=400> <p><?php echo "Name: $name_6";?></p>
                                                                                            <p class="description" id="desc6"><?php echo "<span>Description:</span> $description_6"?>
                                                                                            <p class="cast" id="cast6"> <?php echo "<span>Cast:</span> $cast_6" ?></p></td>
        </tr>
    </table>
</div>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/show.js"></script> 
```

**这是我的 CSS：**

```
 td .description{

display:none;
padding:40px;
/*background-image: url('Images/desc_back.jpg');*/
background-color: rgba(230, 230, 239, 0.3);
color:#222;
position:relative;
right:-120px;
top:-290px;
/*margin:0, auto;*/
border: 3px solid transparent;
border-radius: 10px;
overflow:hidden;
}

    td .cast {
display:none;
/*background-color: rgba(34, 34, 34, 0.4);
color:#f3f2f1;*/
background-color: rgba(230, 230, 239, 0.3);
color:#222;
position:relative;
right:-120px;
top:-290px;

border: 3px solid transparent;
border-radius: 10px;
}
    span{
font-size:16px;
font-weight: bold;
text-decoration: underline;
} 
```

**和我的 jQuery：**

```
 $('document').ready(function(){
var count=1;

    $('#Image1').click(function(){
if(count === 1){
    $('#desc1').slideToggle('slow');
    $('#cast1').slideToggle('slow');
     count=0;
}
else{
    $('#cast1').slideToggle('fast');
    $('#desc1').slideToggle('fast');
     count=1;
}
});
    $('#Image2').click(function(){
if(count === 1){
    $('#desc2').slideToggle('slow');
    $('#cast2').slideToggle('slow');
     count=0;
}
else{
    $('#cast2').slideToggle('fast');
    $('#desc2').slideToggle('fast');
     count=1;
}
});
    $('#Image3').click(function(){
if(count === 1){
    $('#desc3').slideToggle('slow');
    $('#cast3').slideToggle('slow');
     count=0;
}
else{
    $('#cast3').slideToggle('fast');
    $('#desc3').slideToggle('fast');
     count=1;
}
 });
    $('#Image4').click(function(){
if(count === 1){
    $('#desc4').slideToggle('slow');
    $('#cast4').slideToggle('slow');
     count=0;
}
else{
    $('#cast4').slideToggle('fast');
    $('#desc4').slideToggle('fast');
     count=1;
}
});
    $('#Image5').click(function(){
if(count === 1){
    $('#desc5').slideToggle('slow');
    $('#cast5').slideToggle('slow');
     count=0;
}
else{
    $('#cast5').slideToggle('fast');
    $('#desc5').slideToggle('fast');
     count=1;
}
});
    $('#Image6').click(function(){
if(count === 1){
    $('#desc6').slideToggle('slow');
    $('#cast6').slideToggle('slow');
     count=0;
}
else{
    $('#cast6').slideToggle('fast');
    $('#desc6').slideToggle('fast');
     count=1;
}
});
}); 
```

我想要实现的只是希望我的描述和演员能够滑动并保持其他所有内容不变。非常感谢我得到的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:46:08.030

我会说忘记表、ID、计数器、if...else 语句。这个问题比你想象的要容易。关键是使用类和`this`.

查看**[演示](http://jsbin.com/avixob/6)**。

首先创建*适当的*标记。如有必要，您可以使用另一个 div 更改段落，重点是*不要*为此使用表格，因为它们可能不是必需的，而且它无缘无故地使事情复杂化。

```
<div class="movie">
  <img src="http://placekitten.com/270/390"/>
  <p>
    <strong>Title</strong>
    <span>Lorem ipsum dolor sit amet...</span>
  </p>
</div> 
```

然后用css定位所有东西。如果你使用`border-box`它会更容易调整，因为你不必担心宽度。

```
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.movie { 
  width: 270px;
  height: 390px;
  position: relative;
  cursor: pointer;
}
.movie strong {
  display: block;
  font-size: 20px;
}
.movie p {
  position: absolute;
  bottom: 0;
  padding: 1em;
  margin: 0;
  width: 100%;
  background: rgba(255,255,0,.8);
  display: none;
} 
```

最后，您只需要*一行*jQuery：

```
$('.movie').click(function() { $('p', this).slideToggle(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:37:04.587

你可以这样做：

```
$('[id^="Image"]').each(function() {
    $(this).click(function() {
        if(count === 1){
            $(this).siblings('.description').slideToggle('slow');
            $(this).siblings('.cast').slideToggle('slow');
            count=0;
        }
        else{
            $(this).siblings('.description').slideToggle('fast');
            $(this).siblings('.cast').slideToggle('fast');
            count=1;
        }
    });
}) 
```

# sql - 在 SQL Server 的列中查找第一个匹配的字符串

> ID：13227030
> 
> 赞同：2
> 
> 时间：2012-11-05T06:30:35.093
> 
> 标签：sql, sql-server, sql-server-2005

我有一张如下表：

```
TABLE1

No  Description
1   Hello Hai Hello
2   Good Bad Good
3   Hello Good Hai
4   Hai Hello Bad
5   Hello Hello Hello 
```

现在，如果我运行以下查询：

```
Select * 
from TABLE1 
where Description like '%Hai%' 
   OR  Description like '%Hello%' 
   OR Description like '%Good%' 
```

我希望结果如下（通过添加一个额外的列“FIRST MATCHED WORD”）：

```
No  Description     First Matched Word
1   Hello Hai Hello     Hai
2   Good Bad Good       Good
3   Hello Good Hai      Hai
4   Hai Hello Bad       Hai
5   Hello Hello Hello   Hello 
```

听到我的意图是找出第一个匹配的单词取决于我们的查询。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:45:22.507

您可以通过以下方式`CASE statement`在`SELECT`查询中使用：

```
Select No,Description, 
  CASE 
      WHEN Description like '%Hai%' THEN 'Hai' 
      WHEN Description like '%Hello%' THEN 'Hello'
      WHEN Description like '%Good%' THEN 'Good'
   END 
from TABLE1 
where Description like '%Hai%' 
   OR  Description like '%Hello%' 
   OR Description like '%Good%' 
```

请参阅[**SQLFIDDLE**](http://sqlfiddle.com/#!3/f5550/3)

`Case Statement`返回计算结果为 的第一个布尔表达式的结果`TRUE`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:18:39.967

尝试这个：

```
select *,'Hai' as 'First Matched Word' from Table1 where [Description] like '%Hai%'
union
select *,'Hello' as 'First Matched Word' from Table1 where [Description] like '%hello%' 
and [No] not in(select [No] from Table1 where [Description] like '%Hai%')
union
select *,'Good' as 'First Matched Word' from Table1 where [Description] like '%Good%' 
and [No] not in(select [No] from Table1 where [Description] like '%hello%' 
or [Description] like '%Hai%'
); 
```

[**小提琴演示**](http://www.sqlfiddle.com/#!3/871d5/20)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T07:01:22.503

尝试这个：

如果要添加更多单词进行匹配，只需将单词添加到具有排名的优先级表中即可。如果你有大量的单词要匹配，你可以将优先表作为永久表。

```
with precedence as(
select 1 rnk, 'Hai' as word union all
select 2 rnk, 'Hello' union all
select 3 rnk, 'Good' ),
cte as 
    (select * 
     from Table1
     join precedence
     on  [Description] like '%'+word+'%' ),
cte1 as(select [No],[Description],word,
               ROW_NUMBER() over (partition by [No] order by rnk) as row_num 
        from cte)
select [No],[Description],word from cte1 where row_num=1 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/302ae/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T06:33:50.780

尝试这个：

```
;WITH CTE AS
(
    SELECT
      t1.No,
      t1.Description, 
      t2.Description AS matched,
      ROW_NUMBER() OVER(PARTITION BY t1.DESCRIPTION 
                            ORDER BY t1.DESCRIPTION) row_num
    FROM @TABLE1 t1
    INNER JOIN
    (
        SELECT Description = 'Hai'
        UNION ALL 
        SELECT 'Hello'
        UNION ALL
        SELECT 'Good'
    ) t2 ON t1.Description LIKE '%' + t2.Description + '%'
)
SELECT 
  No,
  Description,
  matched AS 'first matched word'
FROM CTE
WHERE row_num = 1
ORDER BY no; 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/84274/finding-first-matched-string-in-a-column-in-sql-server)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T06:47:53.677

如果是这种情况，您可以使用下面的 if else 语句，

```
if exists(select * from Table1 where description like '%Hai%')
begin
     update table1 set FirstMatchedWord = 'Hai' where No = @No
end
else
begin
     if exists(select * from Table1 where description like '%Hello%')
     begin
         update table1 set FirstMatchedWord = 'Hello' where No = @No
     end
     else
     begin
         if exists(select * from Table1 where description like '%Good%')
         begin
             update table1 set FirstMatchedWord = 'Good' where No = @No
         end
     end
end 
```

希望这会有所帮助：D

# ios - 编辑时如何将tableview向右滑动

> ID：13227034
> 
> 赞同：0
> 
> 时间：2012-11-05T06:30:57.057
> 
> 标签：ios, uitableview

我想要的是在编辑表格视图时。

比如删除。当我处于删除模式时，tableview 将动画向右滑动，这样看起来更漂亮。

我怎样才能做到这一点？谢谢。

# android - 每个星期一或每个星期二的android重复警报

> ID：13227035
> 
> 赞同：1
> 
> 时间：2012-11-05T06:31:00.647
> 
> 标签：android, alarmmanager, android-alarms

我正在开发一个基于警报的应用程序，其中我必须根据用户输入在每个工作日（每个星期一、星期二、星期三）重复警报。我用了这个片段

```
Intent intent = new Intent(context, AlarmReceiver.class);
PendingIntent sender = PendingIntent.getBroadcast(context, id, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, alarmToSetInMilliSeconds, sender); 
```

如果用户选择每个星期一的方法，我发现到下星期一日期还有几毫秒，我设置了一个闹钟，它工作正常，我如何在下一个星期一重复它，我想要一些想法来实现它，感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:49:33.260

这是我的代码，用于设置每月在 4 日重复的闹钟

```
public void init(Context context) {

    Intent intent = new Intent(context, AlarmReceiver.class);
    pendingIntent = PendingIntent.getBroadcast(context, 0, intent,
            PendingIntent.FLAG_UPDATE_CURRENT);

    // Get the AlarmManager service
    alarmManager = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
}   
public void createAlarmControler(Context context) {

    init(context);
    Calendar cal = Calendar.getInstance();

    cal.set(Calendar.DAY_OF_MONTH, 4);
    cal.set(Calendar.HOUR_OF_DAY, 10);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    Date now = new Date(System.currentTimeMillis());
    if (cal.getTime().before(now)) {
        cal.add(Calendar.MONTH, 1);
    }
    long firstTime = cal.getTime().getTime();

    alarmManager.cancel(pendingIntent);
    Log.e("", "firstTime: " + firstTime);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, firstTime, 1000 * 60
            * 60 * 24 * 30, pendingIntent);
}

public void cancelAlarmControler(Context context) {

    init(context);

    alarmManager.cancel(pendingIntent);
} 
```

# android - Android媒体播放器即使在播放也不会产生声音

> ID：13227043
> 
> 赞同：0
> 
> 时间：2012-11-05T06:31:38.210
> 
> 标签：android, bluetooth, media-player

我使用 Android MediaPlayer API 创建了一个媒体播放器应用程序。除非接到电话，否则该应用程序运行良好。我正在我的应用程序中处理电话事件并暂停和播放媒体播放器。

问题是暂停和播放后，当电话到来时，歌曲正在播放，但扬声器没有声音。

另一件事是当我仅使用蓝牙耳机时会发生这种情况。

如果有人遇到这个问题，请回复我的问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:08:23.050

我通过在播放音乐曲目之前停止蓝牙的 SCO 来解决这个问题，如果它是 ON 的话。

# mysql - 在 MySQL 中执行返回多行的子查询？

> ID：13227051
> 
> 赞同：2
> 
> 时间：2012-11-05T06:32:44.187
> 
> 标签：mysql, sql, select, subquery

我正在执行一个显然包含 MySQL 子查询的查询。

让我直接进入代码：

```
SELECT DATEDIFF(CURDATE(), 
(SELECT due FROM checkOut JOIN People ON checkOut.p_id = People.p_id
 WHERE CASE WHEN DATE_SUB(date_add(CURDATE(),INTERVAL 4 MONTH), INTERVAL 3 MONTH) 
 >= checkOut.checkTime THEN 1 ELSE 0 END ORDER BY checkOut.due)
 ); 
```

主要查询是`SELECT DATEDIFF()`. 其中是我的子查询，它实质上是在表中搜索以根据时间间隔查找过期的项目。我知道查询将返回多行，并且它不适用于我目前的设置方式。

我想要的是从我的返回多个值`SELECT DATEDIFF()`，以便我以后可以用 php 循环它。详细地说，我希望子查询中返回的每一行都具有来自`DATEDIFF()`. 如何修改此查询以执行我想要的操作？或者如果有人有更好的方法，请告诉我。

任何帮助表示赞赏。

如果您想知道为什么在 中存在 a `DATE_ADD()`，`DATE_SUB()`那么只需使查询适用于今天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:37:02.737

去掉子查询，可以直接计算差值。

```
SELECT  DATEDIFF(CURDATE(), due), due 
FROM    checkOut JOIN People 
            ON checkOut.p_id = People.p_id
WHERE   CASE 
           WHEN DATE_SUB(date_add(CURDATE(),INTERVAL 4 MONTH), INTERVAL 3 MONTH) 
                    >= checkOut.checkTime 
           THEN 1 
           ELSE 0 
        END 
ORDER BY checkOut.due 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:37:00.810

将子查询用作表。例如下面：

```
SELECT DATEDIFF(CURDATE(), d.due)
FROM 
 (SELECT due FROM checkOut JOIN People ON checkOut.p_id = People.p_id
  WHERE CASE WHEN DATE_SUB(date_add(CURDATE(),INTERVAL 4 MONTH), INTERVAL 3 MONTH) 
       >= checkOut.checkTime THEN 1 ELSE 0 END ORDER BY checkOut.due) 
  ) AS d; 
```

# c - 将 unsigned char * 转换为 jbytearray

> ID：13227055
> 
> 赞同：3
> 
> 时间：2012-11-05T06:32:59.660
> 
> 标签：c, java-native-interface, type-conversion

我正在尝试`unsigned char *`使用`jbyteArray`以下代码转换为

```
int callWR(const char *name,unsigned char *ubuf)
{

    jbyteArray bArray=env->NewByteArray(strlen((const char *)ubuf));
    env->SetByteArrayRegion(bArray, 0, strlen((const char *)ubuf), (jbyte *)ubuf);
    jstring tableName= (env)->NewStringUTF(name);       
    int status;     
    status=(int)(env)->CallStaticIntMethod(clsMC,midWRow,tableName,bArray);
    env->DeleteLocalRef(bArray);
    return status;
} 
```

这是通过 JNI 将字节数组参数传递给 java 函数的正确方法吗？类型转换是将 a 转换为`(jbyte *)ubuf`的有效方法吗？我在目的地得到的价值似乎被搞砸了。请帮忙。`unsigned char *``jbyte *`

# java - 从java代码导入mysql数据库

> ID：13227057
> 
> 赞同：0
> 
> 时间：2012-11-05T06:33:07.863
> 
> 标签：java, mysql, mysql-workbench

**此代码确实恢复了 mysql 表，但应用程序几乎进入睡眠状态（超过 20 分钟）。而且我的数据库例程没有出现在 mysql 工作台中，有人可以告诉我实际的解决方案是什么吗？**

```
public static boolean restoreDB(String dbName, String dbUserName, String dbPassword, String source) {

    String[] executeCmd = new String[]{"C:\\Program Files\\MySQL\\MySQL Server 5.5\\bin\\mysql", "--user=" + dbUserName, "--password=" + dbPassword, "-e", "source \"D:/khokher/mydb.sql\""};

    Process runtimeProcess;
    try {

        runtimeProcess = Runtime.getRuntime().exec(executeCmd);
        int processComplete = runtimeProcess.waitFor();

        if (processComplete == 0) {
            System.out.println("Backup restored successfully");
            return true;
        } else {
            System.out.println("Could not restore the backup");
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:33:12.907

使用该`Runtime.exec`方法时，您必须从它创建的进程中读取输出。否则，该进程会填充其输出缓冲区并停止等待，直到您通过读取输出清空缓冲区。

要从进程中读取输出，您可以从返回的`Process`对象中 获取输入流`exec`。您可以从返回的流中读取标准输出，从返回的流中读取`getInputStream`标准错误`getErrorStream`。

如果可以，请使用[Apache Commons Exec](http://commons.apache.org/proper/commons-exec/)库。它使启动外部进程并更容易处理其输入和输出。

# node.js - 获取——类型错误：对象# has no method 'toSource' Command Executed : arguments.toSource(); I am getting the below error when I am accessing the arguments in any function to display the arguments. 问问题 问问题 2012-11-05T06:33:52.887 1101 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Command Executed : arguments.toSource(); I am getting the below error when I am accessing the arguments in any function to display the arguments. TypeError: Object # has no method 'toSource' Is arguments is array or not ? arguments is array-like, but not a full JavaScript Array. It has no toSource method; see the docs. node.js 4 1 回答 1 This answer is useful 1 arguments类似于数组，但不是完整的 JavaScript Array。 它没有toSource方法；请参阅文档。 于 2012-11-05T13:33:02.033 回答 Related 1 java - JSP 获取属性值 1 c# - 包括有关编译视觉工作室的资源 4 go - 如何在 Go 模板中转义“{{”和“}}”分隔符？ 1 linux - 无法使用 rm 删除文件 2 string - 查找给定字符串匹配的模式列表中的哪一个 1 android - PhoneGap + Android + AdMob = 网络不可用？ 2 javascript - 让ajax数据给超时jquery 1 jquery - 使用jQuery对无序列表中的列表项进行无限循环 1 java - AsyncTask doInBackground 停止...没有抛出异常 2 mysql - MySQL查询计算上个月 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13227069
> 
> 赞同：0
> 
> 时间：
> 
> 标签：node.js

Command Executed :

```
 arguments.toSource(); 
```

I am getting the below error when I am accessing the arguments in any function to display the arguments.

```
 TypeError: Object #<Object> has no method 'toSource' 
```

Is arguments is array or not ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:33:02.033

`arguments`类似于数组，但不是完整的 JavaScript `Array`。

它没有`toSource`方法；请参阅[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)。

# android - 如何确定android中的网络不可用

> ID：13227071
> 
> 赞同：0
> 
> 时间：2012-11-05T06:34:04.017
> 
> 标签：android, android-wifi, android-networking, android-internet

我想在我的 android 应用程序中显示连接不可用的警报。

我在我的应用程序中调用了一些休息请求。为了检查这种网络不可用情况，我手动断开了笔记本电脑中的 wifi（我正在模拟器中进行测试）。

我称之为服务的代码在这里

```
resp = client.execute(httpPostRequest); 
```

在这里我遇到了异常

```
catch (IllegalStateException e) {
            //assertTrue(e.getLocalizedMessage(), false);
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            //assertTrue(e.getLocalizedMessage(), false);
            e.printStackTrace();
        } catch (IOException e) {
            //assertTrue(e.getLocalizedMessage(), false);
            e.printStackTrace();
        } 
```

当我遇到异常时，我尝试使用此功能获取设备网络连接的状态

```
public boolean IsInternetConnectted()
    {
        ConnectivityManager conMgr =  (ConnectivityManager)this.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo i = conMgr.getActiveNetworkInfo();
        conMgr = null;
        if (i == null)
            return false;
        if (!i.isConnected())
            return false;
        if (!i.isAvailable())
            return false;
        return true;        
    } 
```

即使 wi-fi 断开连接，我的模拟器也会从此函数返回 true。

这种情况怎么解决？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:37:23.620

使用这个片段：

```
 // added as an instance method to an Activity
boolean isNetworkConnectionAvailable() {  
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();     
    if (info == null) return false;
    State network = info.getState();
    return (network == NetworkInfo.State.CONNECTED || network == NetworkInfo.State.CONNECTING);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:03:21.830

您好，请检查以下答案：

```
http://stackoverflow.com/questions/13217676/how-to-check-the-real-internet-connected-in-android/13217956#13217956 
```

但我想建议你，建议你应该在真机而不是模拟器中测试连接代码。因为模拟器有时没有给出准确的输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:45:28.793

我在我的模拟器中发现了同样的错误......但是在移动设备上尝试你的代码这个代码运行完美并且在真实设备中没有任何错误......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:36:42.380

试试这个

```
public static Boolean checknetwork(Context mContext) {

    NetworkInfo info = ((ConnectivityManager) mContext
            .getSystemService(Context.CONNECTIVITY_SERVICE))
            .getActiveNetworkInfo();
    if (info == null || !info.isConnected()) 
    {

        return false;
    }
    if (info.isRoaming()) {
        // here is the roaming option you can change it if you want to
        // disable internet while roaming, just return false
        return true;
    }

    return true;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T06:39:10.193

试试这个：

```
public static boolean isOnline(Context context) {
        boolean state=false;
        ConnectivityManager cm = (ConnectivityManager)
        context.getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo wifiNetwork =
            cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
            if (wifiNetwork != null) {
            state=wifiNetwork.isConnectedOrConnecting();
             }

            NetworkInfo mobileNetwork =
            cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
            if (mobileNetwork != null) {
            state=mobileNetwork.isConnectedOrConnecting();
            }

            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
            if (activeNetwork != null) {
            state=activeNetwork.isConnectedOrConnecting();

            }

            return state;
      } 
```

为了获得更好的结果，请检查真实设备..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T06:39:41.637

发送 HttpRequest 并检查您获得的响应代码，如果`200` 您已连接到互联网，否则您未连接到互联网，并且可以相应地通知用户

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T06:40:06.023

检查 Internet 连接

```
 public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         //Toast.makeText(context, "No Internet Connection", 1000);
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
 } 
```

在你的活动课上

```
 if(CheckNetwork.isInternetAvailable(YourActivity.this))
             {
               //your studd
             } 
```

在模拟器中使用 f7 断开和连接。我不确定。去谷歌上查询。或者，您可以使用广播接收器或服务。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-05T06:49:58.910

试试这个：

```
public static boolean isNetworkAvailable(Context context)
{
    ConnectivityManager cm = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();

    return (info != null);
} 
```

# bash - bash 查找格式换行

> ID：13227072
> 
> 赞同：2
> 
> 时间：2012-11-05T06:34:06.443
> 
> 标签：bash, find

我运行一个输出类似于 ls -l 的 find 命令，我需要插入一个新行但它不起作用

```
find $dir_name -size $sizeFile -printf '%M %n %u %g %s %Tb %Td %Tk:%TM %p\n' 
```

我得到的输出是这样的：

```
-rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/vimtutor -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/cdlist -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/.phones -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/testdir1/vimtutor -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/sample.txt -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/testdir1/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/testdir1/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/testdir1/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/sample.txt -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/vimtutor -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/cdlist -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/testdir2/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir2/testdir2/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/testdir2/cdlist -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/testdir2/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/sample.txt 
```

有谁知道我错过了什么或做错了什么？？？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:42:11.083

寻找 。-size 0 -printf '%M %n %u %g %s %Tb\n \b%Td %Tk:%TM %p\n'

使用 \n 上面是一个例子。

顺便说一句，如果您想要“ls”格式，那么已经有一个选项。例子。

寻找 。-大小 0 -ls

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:36:18.317

尝试双引号而不是单引号：

```
find $dir_name -size $sizeFile -printf "%M %n %u %g %s %Tb %Td %Tk:%TM %p\n" 
```

（编辑：实际上我只是在我的系统上尝试了双引号和单引号，并且两者都在单独的行上正确输出文件）

您是否将输出保存到变量？

如果你正在做这样的事情：

```
files=$(find $dir_name -size $sizeFile -printf '%M %n %u %g %s %Tb %Td %Tk:%TM %p\n')
echo $files 
```

然后确保`$files`在使用它时用双引号括起来：

```
echo "$files" 
```

# android - WifiDirect 捕捉发现(Android4.x)

> ID：13227077
> 
> 赞同：1
> 
> 时间：2012-11-05T06:34:54.573
> 
> 标签：android

我正在尝试Android4.0 上`catch`的 Discover-command。`WifiDirect`但 BroadcastReceiver 无法捕捉到它只有 cathcing

*   WIFI_P2P_CONNECTION_CHANGED_ACTION

*   WIFI_P2P_PEERS_CHANGED_ACTION

*   WIFI_P2P_STATE_CHANGED_ACTION

*   WIFI_P2P_THIS_DEVICE_CHANGED_ACTION

如何捕捉 Discover-command 的`WifiDirect`？

# html - 知道如何在css中做到这一点吗？

> ID：13227078
> 
> 赞同：2
> 
> 时间：2012-11-05T06:34:54.773
> 
> 标签：html, css

知道如何使用 css 做到这一点吗？

![任何想法如何使用css做到这一点](../Images/fdc577dc16cdb9b0a8cb798577a629d5.png)

我正在寻找一种好的和清晰的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T06:40:17.923

**HTML**

```
<div class="line"></div>
<span>OR</span>
<div class="line"></div>​ 
```

**CSS**

```
div.line
{
width:1px;
background-color:Gray;
height:40px;
margin:10px;
}

span
{
font-weight:bold;
} 
```

**[现场样品](http://jsfiddle.net/UsYwT/)**

​</p>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T06:41:21.113

**HTML**

```
<div class="orWrapper">Or</div>​ 
```

**CSS**

```
.orWrapper {
    text-transform: uppercase;
}
.orWrapper:before, 
.orWrapper:after {
    content: "";
    display: block;
    height: 50px;
    margin-left: 10px;
    border-left: 1px solid #000000;
}
​ 
```

[**演示**](http://jsfiddle.net/CNhYh/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:41:37.970

最简单的方法就是使用三个 div 和边框属性：
你的 html:

```
<div class="vertical">
</div>
<div>
OR
</div>
<div class="vertical">
</div> 
```

你的CSS：

```
.vertical{
    border-left:thin solid black;
    height:30px;
    margin-left:10px;
}​ 
```

用于测试的小提琴：http: [//jsfiddle.net/SURzN/](http://jsfiddle.net/SURzN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:43:13.400

工作示例：http: [//jsfiddle.net/fTGuV/](http://jsfiddle.net/fTGuV/)

CSS：

```
.line
{
    height:30px;
    float:left;
    margin-left:10px;
    border: solid 0px #000000;
    width:1px;
    border-left-width: 2px;
} 
```

html:

```
<div class="line">
</div>
<div style="clear:both;"></div>
<div>OR</div>
<div class="line">
</div>
<div style="clear:both;"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T06:44:06.010

HTML

```
<div class="line"><div class="txt">Or</div> <span></span></div>​ 
```

CSS

```
span{height:100%; display:block; margin:0 15px; border-left:1px solid black}
.line{width:30px; margin:10px;  position:relative; height:200px; text-align:center}
.txt{position:absolute; top:45%; left:4px; width:20px; height:25px; background:white} 
```

[**演示**](http://jsfiddle.net/Ux8e8/1/)

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T06:47:35.127

我做的最简单的事情：-

```
​&lt;div Class="myclass"></div>
<div>OR</div>
<div Class="myclass"></div>​ 
```

CSS

```
 ​.myclass{
        width:1px;
        height:30px;
        background-color:black;
    margin-left:10px;

    } 
```

[**演示**](http://jsfiddle.net/drWXG/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T06:53:57.260

我会把它们都放在同一个盒子里...

**HTML**

```
<span class="vertical-bar">
    <span>Or</span>
</span>​ 
```

**CSS**

```
.vertical-bar {
    background: url(http://dl.dropbox.com/u/2179487/black_pixel.png) center top repeat-y;
    float: left;
    padding: 100px 0;
}

.vertical-bar span {
    background-color: white;
    text-transform: uppercase;
}​ 
```

演示：http: [//jsfiddle.net/PjPAU/](http://jsfiddle.net/PjPAU/)

# function - Prolog 允许多个查询参数顺序

> ID：13227080
> 
> 赞同：1
> 
> 时间：2012-11-05T06:35:00.470
> 
> 标签：function, prolog

我正在Prolog中做一些家庭作业，我必须使用足够类似的东西：

规则：

```
brothers(a,b)
brothers(c,d) 
```

而且我必须实现查询`brothers(b,a)`和获取真实的能力，而不会在数据库中重复。

我考虑过使用：`brothers(X,Y):- brothers(Y,X)`但它只是无限递归。我不确定我还能做什么，因为两个名称必须相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:21:19.407

好吧，你必须打破无限递归！这可以通过多种方式完成：

1）订购
在每个`brother(X,Y)`规则中创建您的数据库`X>Y`。然后，添加一条规则`brother(X,Y):- Y>X, brother(Y,X).`

2) 包装谓词
`brother(X,Y):- brother_facts(X,Y) ; brother_facts(Y,X).`

3)
如果您使用 XSB（或其他一些支持它的 prolog 实现），则可以使用表格。制表有点像记忆，会打破循环

# php - PHP POST 数组到表

> ID：13227095
> 
> 赞同：-2
> 
> 时间：2012-11-05T06:36:24.637
> 
> 标签：php

我是 PHP 新手。我正在尝试用我从其他人的工作中拼凑起来的代码片段来制作一个巧合发生率 (IC) 计算器。除了发布到表格的部分外，一切正常。我希望它在 50 岁后停止制造新细胞。我已经研究了几个小时并尝试了其他几种方法，但我自己也很困惑。请问有什么帮助吗？

这是编写表格的代码：

```
<?php
  if ( $showTable ) {
    // display tabulated values
    echo "<table class=\"trans\" width=\"1000\" border=\"1\" cellpadding=\"0\">"; 
    for ( $i = 1; $i < 50; $i++ ) {
         echo "<tr>"; 
         for ($c=0; $c <$cols; $c++) 
         {
         echo "<td>"; 
         echo($cells.': '.round($history[$i+$c], 3));
         $cells++;
         echo "</td>"; 
         }
    }
    echo "</tr>";
     $i += $c; 
  }
     echo "</table>";  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:43:39.690

如果我理解正确的话，

```
<?php
  if ( $showTable ) {
    // display tabulated values
    echo "<table class=\"trans\" width=\"1000\" border=\"1\" cellpadding=\"0\">"; 

    for ( $i = 1; $i < 50; $i++ ) { // 50 rows will be created
    echo "<tr>";      
         for ($c=0; $c <50; $c++) // each row will contain 50 <td>
         {
         echo "<td>"; 
         echo($cells.': '.round($history[$i+$c], 3));
         $cells++;
         echo "</td>";
         $i += $c;
         }
     echo "</tr>";    
    }

  }
     echo "</table>";  
?> 
```

# c# - 如何在 Windows 8 和 Visual Studio 2012 中纠正 Windows Store 类库中的命名空间错误？

> ID：13227099
> 
> 赞同：1
> 
> 时间：2012-11-05T06:36:54.543
> 
> 标签：c#, windows-8

我正在为 Windows 8 中的 XMPP 开发一个类库（Windows 应用商店应用程序），我遇到了这些错误，我提供了所有必需的参考，例如，

```
System.Net
System.Threading 
```

等等，但仍然出现这些错误，

> 错误 15 找不到类型或命名空间名称“Formatting”（是否缺少 using 指令或程序集引用？）
> 错误 16 找不到类型或命名空间名称“Formatting”（是否缺少 using 指令或程序集引用？）
> 错误 17 找不到类型或命名空间名称“格式化”（您是否缺少 using 指令或程序集引用？）
> 错误 7 命名空间“系统”中不存在类型或命名空间名称“ICloneable” （您是否缺少程序集引用？）
> 错误 9 找不到类型或命名空间名称“IPAddress”（您是否缺少 using 指令或程序集引用？）
> 错误 12 找不到类型或命名空间名称“IPAddress”（是否缺少 using 指令或程序集引用？）
> 错误 13 找不到类型或命名空间名称“IPEndPoint”（是否缺少 using 指令或程序集引用？）
> 错误 6 找不到类型或命名空间名称“ListDictionary”（是否缺少 using 指令或程序集引用？）
> 错误 14 找不到类型或命名空间名称“ListDictionary”（是否缺少using 指令或程序集引用？）
> 错误 2 命名空间“System.Net”中不存在类型或命名空间名称“Sockets”（您是否缺少程序集引用？）
> 错误 3 名称空间“System.Net”中不存在类型或名称空间名称“Sockets”（您是否缺少程序集引用？）
> 错误 4 名称空间“System.Net”中不存在类型或名称空间名称“Sockets” '（是否缺少程序集引用？）
> 错误 5 找不到类型或命名空间名称“Stack”（是否缺少 using 指令或程序集引用？）
> 错误 1 ​​类型或命名空间名称“Timer”无法找到找到（您是否缺少 using 指令或程序集引用？）
> 错误 8 找不到类型或命名空间名称“Timer”（您是否缺少 using 指令或程序集引用？）
> 错误 10 找不到类型或命名空间名称“Timer”（是否缺少 using 指令或程序集引用？）
> 错误 18 找不到类型或命名空间名称“XmlTextWriter”（是否缺少 using 指令或程序集参考？）
> 错误 11 使用泛型类型“System.Collections.Generic.Queue”需要 1 个类型参数

请任何人帮助我或建议我解决方案。. .

```
/// <summary>
/// returns the Xml, difference to the Xml property is that you can set formatting properties
/// </summary>
/// <param name="format"></param>
/// <param name="indent"></param>
/// <returns></returns>
public string ToString(Formatting format, int indent)
{           
    return BuildXml(this, format, indent, ' ');
}

#region << Xml Serializer Functions >>

private string BuildXml(Node e, Formatting format, int indent, char indentchar)
{
    if ( e != null )
    {
        System.IO.StringWriter tw = new StringWriter();
        XmlTextWriter w = new XmlTextWriter(tw);
        w.Formatting    = format;
        w.Indentation   = indent;
        w.IndentChar    = indentchar;

        WriteTree(this, w, null);

        return tw.ToString();
    }
    else
    {
        return "";
    }
} 
```

“格式化”错误来自此代码块，即使我已将参考作为 system.xml

没有解决的选项，

![显示错误的 Visual Studio 2012 的屏幕截图](../Images/0fd1f16fff1447f4ed14a2aaea473dcf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:27:50.237

基于对您提供的代码中的评论之一的[快速谷歌搜索](https://www.google.co.uk/search?q=returns%20the%20Xml,%20difference%20to%20the%20Xml%20property%20is%20that%20you%20can%20set%20formatting%20properties&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-GB%3aofficial&client=firefox-a&source=hp&channel=np#hl=en&client=firefox-a&hs=VH0&rls=org.mozilla%3aen-GB%3aofficial&channel=np&sclient=psy-ab&q=%22returns%20the%20Xml,%20difference%20to%20the%20Xml%20property%20is%20that%20you%20can%20set%20formatting%20properties%22&oq=%22returns%20the%20Xml,%20difference%20to%20the%20Xml%20property%20is%20that%20you%20can%20set%20formatting%20properties%22&gs_l=serp.3...2689.3041.0.3263.2.2.0.0.0.0.72.141.2.2.0.les;..0.0...1c.1.kKuu-ogyThc&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=a3172285415346e8&bpcl=37189454&biw=1680&bih=921)，我发现它来自[这里](http://svn.apocdev.com/quickirc/trunk/QuickIRC2/Jabber/agsXMPP/Xml/Dom/Node.cs)。

由于这不是您自己的代码（我假设 - 可能是错误的！），您正在尝试为 Windows 应用商店应用程序编译，这些应用程序目前以[3.5 框架](http://svn.apocdev.com/quickirc/trunk/QuickIRC2/QuickIRC2.csproj)为目标并且引用`System.Windows.Forms`了项目文件中列出的内容，它很可能除非您重写部分代码以针对框架的 Windows 应用商店版本，否则无法正常工作。例如，`XmlTextWriter`未`System.Xml`在 [.NET For Windows Store Apps] API [4](http://msdn.microsoft.com/en-us/library/windows/apps/hh454055.aspx/system.xml%28v=vs.105%29.aspx)的命名空间下列出。

简而言之 - “完整” .net 框架的代码（除了最简单的片段）不能仅针对 Windows Store .NET API 重新编译。

# android - SpeechRecognizer : 未连接到识别服务

> ID：13227105
> 
> 赞同：8
> 
> 时间：2012-11-05T06:37:26.247
> 
> 标签：android, speech-recognition

在我的应用程序中，我直接使用 SpeechRecognizer。我销毁 Activity 的 SpeechRecognizer onPause 并在 onResume 方法中重新创建它，如下所示...

```
public class NoUISpeechActivity extends Activity {

protected static final String CLASS_TAG = "NoUISpeechActivity";
private SpeechRecognizer sr;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_no_uispeech);

    sr = getSpeechRecognizer();
}

@Override
protected void onPause() {

    Log.i(CLASS_TAG, "on pause called");
    if(sr!=null){
        sr.stopListening();
        sr.cancel();
        sr.destroy();       

    }

    super.onPause();
}

@Override
protected void onResume() {

    Log.i(CLASS_TAG, "on resume called");       

    sr = getSpeechRecognizer();

    super.onResume();
}

....

private SpeechRecognizer getSpeechRecognizer() {
    if(sr == null){
        sr = SpeechRecognizer.createSpeechRecognizer(getApplicationContext());
        CustomRecognizerListner listner = new CustomRecognizerListner();
        listner.setOnListeningCallback(new OnListeningCallbackImp());
        sr.setRecognitionListener(listner);
    }
    return sr;
}
} 
```

第一次通过 Eclipse 安装应用程序时，会调用 SpeechRecognition 服务并正确进行识别。但是当应用程序从暂停状态返回时，如果我尝试识别语音，则会收到“SpeechRecognition：未连接到识别服务”错误

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T08:27:17.517

我找到了问题的原因。在`onPause`方法中虽然`SpeechRecognition.destroy()`调用了方法，但我猜它只是分离了服务，但对象`sr`将指向某个实例并且它不会为空。将对象重置`sr`为 null 将解决问题。

不销毁方法中的`SpeechRecognition`对象`onPause`会阻止其他应用程序使用`SpeechRecognition`服务

```
@Override
protected void onPause() {

    Log.i(CLASS_TAG, "on pause called");
    if(sr!=null){
        sr.stopListening();
        sr.cancel();
        sr.destroy();              

    }
    sr = null;

    super.onPause();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-17T11:25:12.333

只需停止调用 stopListening() 和 cancel() 方法。而是只调用destroy() 方法。这应该可以解决问题:)

# ios - 向上滚动后UITableViewCell的高度变化？

> ID：13227107
> 
> 赞同：4
> 
> 时间：2012-11-05T06:37:45.557
> 
> 标签：ios, uitableview, uiscrollview, uilabel

目前，在我的 tableView 中向上滚动时，我发现了一个奇怪且烦人的错误。当我决定释放“滚动”时，意味着我正在放下“滚动”，因此“视图”将返回到显示所有 TableView 内容的正常位置，我的一些单元格可以出于某种原因重新调整自己的大小宽度。我不知道为什么会发生这种情况或问题可能是什么。

我的单元格（commentLabel）被定制为 fitSize，具体取决于我论坛中标签的高度。我认为问题可能在于我如何尝试自定义单元格的内容。我将发布我的相关代码并发布到下面的图片中。

**在开始向上拖动滚动之前：** [http ://tinypic.com/view.php?pic=2rfsum9&s=6](http://tinypic.com/view.php?pic=2rfsum9&s=6)

**释放/放下卷轴后，再次回到正常位置。现在其中一个单元格发生了变化：** [http ://tinypic.com/view.php?pic=swxnqv&s=6](http://tinypic.com/view.php?pic=swxnqv&s=6)

**代码：**

```
- (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ForumthreadCell";
    UITableViewCell *cell = [pTableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Feedback *item = [self.items objectAtIndex:indexPath.row];

    UILabel *aliasLabel = (UILabel *)[cell viewWithTag:1];
    UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
    UILabel *dateLabel = (UILabel *)[cell viewWithTag:3];

    [aliasLabel setText:item.alias];
    [commentLabel setText:item.comment];
    [dateLabel setText:[self.dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:(double)item.time]]];

    commentLabel.numberOfLines = 0;
    [commentLabel sizeToFit];

    return cell;

}

-(CGFloat)getLabelHeightForText:(NSString *)text andWidth:(CGFloat)labelWidth
{

    CGSize maximumSize = CGSizeMake(labelWidth, 10000);

    //provide appropriate font and font size
    CGSize labelHeighSize = [text sizeWithFont: [UIFont fontWithName:@"Trebuchet MS" size:12.0f]
                     constrainedToSize:maximumSize
                         lineBreakMode:UILineBreakModeTailTruncation];
    return labelHeighSize.height;

}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    Feedback *item = [self.items objectAtIndex:indexPath.row];

    CGFloat commentTextHeight = [self getLabelHeightForText:item.comment andWidth:162];
    return commentTextHeight + 39;

} 
```

**编辑**

**新代码：**

```
CGRect frame = commentLabel.frame;
frame.size.width = kLabelWidth;
frame.size.height = 10000;
commentLabel.frame = frame;

frame = commentLabel.frame;
frame.size.height += kOffset;
commentLabel.frame = frame; 
```

但是我做错了，因为现在来自commentLabel 的文本没有正确显示，有人能在我如何尝试设置框架方面看到我的错吗？这就是细胞现在的样子[http://oi50.tinypic.com/2w5u0s6.jpg](http://oi50.tinypic.com/2w5u0s6.jpg)

**新的完整代码：**

```
static const CGFloat kLabelWidth = 162;
static const CGFloat kOffset = 39;

- (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ForumthreadCell";
    UITableViewCell *cell = [pTableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    Feedback *item = [self.items objectAtIndex:indexPath.row];

    UILabel *aliasLabel = (UILabel *)[cell viewWithTag:1];
    UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
    UILabel *dateLabel = (UILabel *)[cell viewWithTag:3];

    [aliasLabel setText:item.alias];
    [commentLabel setText:item.comment];
    [dateLabel setText:[self.dateFormatter stringFromDate:[NSDate dateWithTimeIntervalSince1970:(double)item.time]]];

    CGRect frame = commentLabel.frame;
    frame.size.width = kLabelWidth;
    frame.size.height = 10000;
    commentLabel.frame = frame;

    frame = commentLabel.frame;
    frame.size.height += kOffset;
    commentLabel.frame = frame;

    commentLabel.numberOfLines = 0;
    [commentLabel sizeToFit];

    return cell;

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:20:58.247

您应该在重用单元格之前调整标签框。在您的情况下，您正在更改单元格高度，同时重用它

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是您还应该根据单元格的高度调整标签的框架，使其不会超出单元格的范围。

# java - jnlp文件可以通过服务器的响应动态生成吗？

> ID：13227111
> 
> 赞同：0
> 
> 时间：2012-11-05T06:38:08.177
> 
> 标签：java, jnlp, java-web-start

> **可能重复：**
> [没有 .jnlp 文件可以存在 java web start 应用程序吗？](https://stackoverflow.com/questions/13207945/can-a-java-web-start-application-exist-without-jnlp-file)

我的应用程序既没有 jnlp 文件也没有 main() 方法，但它是一个 java web start 应用程序。当我们通过请求 http:\[ip address]:[port no] 启动应用程序时，是否会生成 jnlp 文件并通过 xml 通过 jar 发送？谁能解释一下....提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:55:25.907

首先，我不明白没有`main()`. 应用程序必须有 main 方法。要使用 JNLP 启动应用程序，您只需对返回 JNLP 描述符的 URL 执行 HTTP 请求，该描述符是具有 mime 类型的 XML 文件`application/x-java-jnlp-file`。因此，要动态创建它，您只需创建生成描述符并定义 HTTP 标头的 JSP 或 servlet

`Content-Type: application/x-java-jnlp-file`

# python-2.7 - 使用 scipy odeint 及时向后积分

> ID：13227115
> 
> 赞同：2
> 
> 时间：2012-11-05T06:38:59.253
> 
> 标签：python-2.7, scipy

是否可以使用 scipy.integrate.odeint 及时向后积分任何常微分方程？如果可能的话，有人可以告诉我“odeint”中的争论“时间”应该是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T21:30:11.233

`odeint`处理参数的负值`t`。无需特殊处理。

这是一个例子：

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt

def mysys(z, t):
    """A slightly damped oscillator."""
    return [z[1] - 0.02*z[0], -z[0]]

if __name__ == "__main__":
    # Note that t starts at 0 and goes "backwards"
    t = np.linspace(0, -50, 501)

    z0 = [1, 1]
    sol = odeint(mysys, z0, t)

    plt.plot(t, sol)
    plt.xlabel('t')
    plt.show() 
```

剧情： ![及时求解 ODE](../Images/3db3dec4815ab72238220f5abc334e9b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:49:05.900

你可以改变变量`s = t_0 - t`，并积分关于 的微分方程`s`。odeint 不会为您执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T23:22:52.787

没有必要更改变量。这里有一个例子：

```
import math
import numpy
import scipy
import pylab as p

from math import *
from numpy import *
from scipy.integrate import odeint
from scipy.interpolate import splrep
from scipy.interpolate import splev

g1=0.01
g2=0.01
w1=1
w2=1 
b1=1.0/20.0
b2=1.0/20.0
b=1.0/20.0
c0=0
c1=0.2
wf=1

def wtime(t):
  f=1+c0+c1*cos(2*wf*t)
  return f

def dv(y,t):
  return array([y[1], -(wtime(t)+g1*w1+g2*w2)*y[0]+w1*y[2]+w2*y[3], w1*y[2]-g1*w1*y[0], w2*y[3]-g2*w2*y[0]])

tv=linspace(100,0,1000)
v1zero=array([1,0,0,0])
v2zero=array([0,1,0,0])
v1s=odeint(dv,v1zero,tv)
v2s=odeint(dv,v2zero,tv)

p.plot(tv,v1s[:,0])
p.show() 
```

我用 Wolfram Mathematica 检查结果（该程序可以解决反向颂歌）。

# iphone - iPad Retina - iPad 使用 iPhone 视网膜图像

> ID：13227116
> 
> 赞同：2
> 
> 时间：2012-11-05T06:38:59.443
> 
> 标签：iphone, ios, xcode, ipad, retina-display

这有点奇怪。现在，我正在开发一个通用的应用程序。但是，我不提供适用于 iPad 视网膜（iPad 3 和 4）的图像，但仍然提供适用于 iPhone 的视网膜图像。现在，该应用程序在 iPad 3 和 4 上使用 iPhone 的视网膜图像，而不是使用非视网膜但尺寸正确的 iPad 图像。

要清除这一点： - iPad 1 和 2 使用 iPad 非视网膜图像（正常）。- iPad 3 和 4 使用 iPhone 视网膜图像而不是 iPad 非视网膜图像！

我尝试了一个解决方案，将 iPhone 视网膜图像重命名为以 ~iphone@2x 结尾。这解决了 iPad 3 和 4 上的问题，但现在 iPhone 4、4s 和 5 使用非视网膜图像！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:45:24.090

IIRC，你反其道而行之。应该是`myimage@2x~iphone.png`。

# android - 如何在使用 android:background="@drawable/view1" 时滚动列表

> ID：13227120
> 
> 赞同：1
> 
> 时间：2012-11-05T06:39:16.643
> 
> 标签：android, android-listview

我有一些项目，我在下面`Listview`放了一个。`ImageButton``listview`

当我使用`android:src ="@drawable/view1"`获取所有项目并能够使用滚动时。

但是每当我使用**背景**代替**src**

`android:background="@drawable/view1"`在图像按钮中，滚动不起作用，为什么？

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent" android:background="#ffffff">

 <include
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    layout="@layout/header"/>

<ListView android:layout_height="wrap_content"
    android:layout_weight="1" android:id="@+id/listView1"
    android:layout_width="fill_parent" 
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="20dp"
    android:cacheColorHint="#00000000"
    android:divider="#00000000"
    android:dividerHeight="20dp"/>

<ImageButton 
    android:layout_width="wrap_content" 
    android:id="@+id/ButtonViewCart"
    android:layout_height="wrap_content" 
    android:background="@drawable/view1"
    android:layout_margin="5dip"
    android:layout_gravity="right"/>

  </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:45:56.767

ListViews 默认是可滚动的。如果您的 ListViews 中的项目数超过屏幕上可以显示的数量，则滚动会自动发生。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T06:42:22.720

创建`<ScrollView>`为根节点并尝试以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/mainbk" >

<LinearLayout
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent" android:background="#ffffff">

 <include
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    layout="@layout/header"/>

<ListView android:layout_height="wrap_content"
    android:layout_weight="1" android:id="@+id/listView1"
    android:layout_width="fill_parent" 
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="20dp"
    android:cacheColorHint="#00000000"
    android:divider="#00000000"
    android:dividerHeight="20dp"/>

<ImageButton 
    android:layout_width="wrap_content" 
    android:id="@+id/ButtonViewCart"
    android:layout_height="wrap_content" 
    android:background="@drawable/view1"
    android:layout_margin="5dip"
    android:layout_gravity="right"/>

  </LinearLayout>

</ScrollView> 
```

# ruby - JSON::ParserError (399: 意外令牌在

> ID：13227121
> 
> 赞同：2
> 
> 时间：2012-11-05T06:39:23.760
> 
> 标签：ruby, json

当我要解析这个时：

```
Product = [{"Productname":"Acer 18.5" LED Monitor}] 
```

使用 Ruby JSon，它向我显示了错误`JSON::ParserError (399: unexpected token at`。我知道这是字符串中的 18.5"。我该如何解析这个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:43:22.797

你必须给这样的字符串

```
Product = [{"productname":%q{"Acer 18.5" LED Monitor}}] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-01T11:44:01.870

如果您对`Mongoid`+有疑问，`Devise`请将其添加到您的`User`模型（[错误页面](https://github.com/plataformatec/devise/issues/2949#issuecomment-53201813)）：

```
def to_key
  id.to_s
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-01T09:14:55.333

在 /app/views/layouts/application.html.erb 第 5 行和第 6 行中，将第一个参数从 application 更改为默认值。

对于我的情况，我也遇到了同样的问题，在更改它后，问题在 Windows 上得到解决。参数应用程序在 Web 服务器上运行。

# linux - 使用命令行编译 C++ 代码

> ID：13227126
> 
> 赞同：0
> 
> 时间：2012-11-05T06:39:46.847
> 
> 标签：linux, g++

我正在使用下面的命令来编译我的 c++ 代码，它正在使用 OpenCV 库，我的命令就像

```
 opencv main.cpp -o binary_name 
```

其中 opencv 是一个别名命令，例如

```
alias opencv="g++ `pkg-config --cflags opencv`  `pkg-config --libs opencv`" 
```

但如果我忘记了“-o binary_name”，该命令会删除我的源文件。为什么会这样……？

我应该对上面的别名命令进行什么修改来编译我的源文件，比如

```
 opencv main.cpp binary_name 
```

提前致谢.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:51:28.923

您可以使用函数而不是别名，并使用参数：

```
function opencv() { g++ `pkg-config --cflags opencv` `pkg-config --libs opencv` "$1" -o "$2"; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:47:57.190

参数的**顺序`gcc`很重要**，源文件或目标文件应该在库之前给出，并且库应该在它们使用的低级库之前被更高级别的库调用。

所以你应该编译

```
 g++ -Wall -g $(pkg-config --cflags opencv) main.cpp \
              $(pkg-config --libs opencv) -o binaryprog 
```

但是你真的应该使用 a `Makefile`，或者至少有一个 shellscript。

不要忘记`-Wall`获取所有警告的选项。改进你的代码，直到编译器没有给出警告。使用该`-g`选项获取调试信息，以便能够用于`gdb ./binaryprog`调试您的程序。

一旦你的程序被调试，替换`-g`为`-O3`（或者可能是`-O2 -g`）以要求 GCC 优化生成的代码。

# javascript - 关闭窗口时如何显示警报消息？

> ID：13227127
> 
> 赞同：13
> 
> 时间：2012-11-05T06:39:50.437
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何防止关闭浏览器窗口？](https://stackoverflow.com/questions/333665/how-to-prevent-closing-browser-window)

当用户尝试关闭窗口并且单击注销按钮后可以关闭窗口时，我想使用注销按钮显示警告消息“请在关闭窗口之前注销”。如何做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T06:56:40.863

您可以尝试的另一种实现：

```
<html>
  <head>
    <script type="text/javascript">
      window.onbeforeunload = function() {
          return "Did you save your stuff?"
      }
    </script>
  </head>
  <body>

  </body>
</html> 
```

**更新**

正如@JohnnyFun 评论中提到的“从 Firefox 44、Chrome 51、Opera 38 和 Safari 9.1 开始，将针对不同的浏览器显示通用消息并且无法自定义”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T06:43:46.877

```
window.onbeforeunload = function() {
    return "Are you sure?";
 }; 
```

试试这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:45:53.147

Javascript 中没有这样的关闭事件。您可以发送消息 onUnload 事件。但这并不妨碍应用程序关闭。当用户单击任何链接、提交表单等时，将执行此功能。

```
window.onunload=function(){SomeJavaScriptCode}; 
```

供参考：[http ://www.w3schools.com/jsref/event_onunload.asp](http://www.w3schools.com/jsref/event_onunload.asp)

# javascript - d3js平行坐标分类数据

> ID：13227136
> 
> 赞同：7
> 
> 时间：2012-11-05T06:40:37.597
> 
> 标签：javascript, d3.js, parallel-coordinates

我正在寻找一种将分类数据添加到 d3js 平行坐标的方法。D3js 对我来说是新的，我可以理解一些正在做的事情，但还没有找到一种方法来做到这一点。并行集不是一个好的选择，因为我的大部分数据都是连续的。

如果您考虑汽车示例，我希望能够在轴上按品牌进行过滤（例如过滤，以便仅显示福特的数据）。我假设需要一个变量来定义每辆车（例如标致、福特、宝马、奥迪等......）

这是汽车的例子。

[http://bl.ocks.org/1341281](http://bl.ocks.org/1341281)

感谢任何回复的人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T22:38:43.583

实际上，您所需要的只是一个序数比例！轴将负责其余的工作。

[在这里](http://jsfiddle.net/yFXqj/)查看。

基本上我改变了：

```
x.domain(dimensions = d3.keys(cars[0]).filter(function(d) {
  return d != "name" && (y[d] = d3.scale.linear()
      .domain(d3.extent(cars, function(p) { return +p[d]; }))
      .range([h, 0]));
})); 
```

至：

```
x.domain(dimensions = d3.keys(cars[0]).filter(function(d) {

    if(d === "name") return false;

    if(d === "colour") {
        y[d] = d3.scale.ordinal()
          .domain(cars.map(function(p) { return p[d]; }))
          .rangePoints([h, 0]);

    }
    else {
        y[d] = d3.scale.linear()
          .domain(d3.extent(cars, function(p) { return +p[d]; }))
          .range([h, 0]);
    }

    return true;
})); 
```

我在数据中添加了一个字符串值的分类列。对于哪个属性是字符串值的硬编码，我有点懒惰。

# ios - Xcode 应用内购买验证收据 在哪里查看收据？

> ID：13227141
> 
> 赞同：0
> 
> 时间：2012-11-05T06:40:59.237
> 
> 标签：ios, in-app-purchase

我观看了有关在应用程序购买收据中验证的教程，但我仍然想到一件事：我已经拥有检查收据是否有效及其工作的功能，但是如果我的服务器出现问题，我担心一些一天，有人购买了该应用程序，收据将无效，尽管它应该是有效的，它会向他收费，然后告诉他收据出现问题并且不会向他提供内容。那么应该在什么功能我检查收据？（我希望它在收费之前检查它是否无效，所以它不会）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:26:39.330

我只是在

```
- (void)completeTransaction:(SKPaymentTransaction *)transaction 
```

功能

# postgresql - 使用带有嵌套连接的 row_to_json()

> ID：13227142
> 
> 赞同：106
> 
> 时间：2012-11-05T06:41:01.357
> 
> 标签：postgresql

`row_to_json()`我正在尝试使用PostgreSQL 9.2 中添加的函数将查询结果映射到 JSON 。

我无法找出将连接行表示为嵌套对象的最佳方法（1:1 关系）

这是我尝试过的（设置代码：表，示例数据，然后是查询）：

```
-- some test tables to start out with:
create table role_duties (
    id serial primary key,
    name varchar
);

create table user_roles (
    id serial primary key,
    name varchar,
    description varchar,
    duty_id int, foreign key (duty_id) references role_duties(id)
);

create table users (
    id serial primary key,
    name varchar,
    email varchar,
    user_role_id int, foreign key (user_role_id) references user_roles(id)
);

DO $$
DECLARE duty_id int;
DECLARE role_id int;
begin
insert into role_duties (name) values ('Script Execution') returning id into duty_id;
insert into user_roles (name, description, duty_id) values ('admin', 'Administrative duties in the system', duty_id) returning id into role_id;
insert into users (name, email, user_role_id) values ('Dan', 'someemail@gmail.com', role_id);
END$$; 
```

查询本身：

```
select row_to_json(row)
from (
    select u.*, ROW(ur.*::user_roles, ROW(d.*::role_duties)) as user_role 
    from users u
    inner join user_roles ur on ur.id = u.user_role_id
    inner join role_duties d on d.id = ur.duty_id
) row; 
```

我发现如果我使用`ROW()`，我可以将结果字段分成一个子对象，但它似乎仅限于一个级别。我无法插入更多`AS XXX`语句，因为我认为在这种情况下我应该需要。

我获得了列名，因为`::user_roles`在该表的结果的情况下，我转换为适当的记录类型，例如 with 。

这是该查询返回的内容：

```
{
   "id":1,
   "name":"Dan",
   "email":"someemail@gmail.com",
   "user_role_id":1,
   "user_role":{
      "f1":{
         "id":1,
         "name":"admin",
         "description":"Administrative duties in the system",
         "duty_id":1
      },
      "f2":{
         "f1":{
            "id":1,
            "name":"Script Execution"
         }
      }
   }
} 
```

我想要做的是以我可以添加连接的方式为连接生成 JSON（同样 1:1 很好），并将它们表示为它们加入的父对象的子对象，即如下所示：

```
{
   "id":1,
   "name":"Dan",
   "email":"someemail@gmail.com",
   "user_role_id":1,
   "user_role":{
         "id":1,
         "name":"admin",
         "description":"Administrative duties in the system",
         "duty_id":1
         "duty":{
            "id":1,
            "name":"Script Execution"
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-11-05T07:03:06.353

[更新：在 PostgreSQL 9.4 中，这随着,](http://www.postgresql.org/docs/9.4/static/functions-json.html)[和](http://www.postgresql.org/docs/9.4/static/functions-json.html)[的引入而`to_json``json_build_object``json_object``json_build_array`](http://www.postgresql.org/docs/9.4/static/functions-json.html)改进了很多[，](http://www.postgresql.org/docs/9.4/static/functions-json.html)尽管由于需要显式命名所有字段而显得冗长：

```
select
        json_build_object(
                'id', u.id,
                'name', u.name,
                'email', u.email,
                'user_role_id', u.user_role_id,
                'user_role', json_build_object(
                        'id', ur.id,
                        'name', ur.name,
                        'description', ur.description,
                        'duty_id', ur.duty_id,
                        'duty', json_build_object(
                                'id', d.id,
                                'name', d.name
                        )
                )
    )
from users u
inner join user_roles ur on ur.id = u.user_role_id
inner join role_duties d on d.id = ur.duty_id; 
```

对于旧版本，请继续阅读。

* * *

它不限于单排，它只是有点痛苦。不能使用别名复合行类型`AS`，所以需要使用别名子查询表达式或CTE来达到效果：

```
select row_to_json(row)
from (
    select u.*, urd AS user_role
    from users u
    inner join (
        select ur.*, d
        from user_roles ur
        inner join role_duties d on d.id = ur.duty_id
    ) urd(id,name,description,duty_id,duty) on urd.id = u.user_role_id
) row; 
```

通过[http://jsonprettyprint.com/](http://jsonprettyprint.com/)产生：

```
{
  "id": 1,
  "name": "Dan",
  "email": "someemail@gmail.com",
  "user_role_id": 1,
  "user_role": {
    "id": 1,
    "name": "admin",
    "description": "Administrative duties in the system",
    "duty_id": 1,
    "duty": {
      "id": 1,
      "name": "Script Execution"
    }
  }
} 
```

`array_to_json(array_agg(...))`当你有一个 1:many 关系时，你会想要使用，顺便说一句。

理想情况下，上述查询应该可以写成：

```
select row_to_json(
    ROW(u.*, ROW(ur.*, d AS duty) AS user_role)
)
from users u
inner join user_roles ur on ur.id = u.user_role_id
inner join role_duties d on d.id = ur.duty_id; 
```

...但 PostgreSQL 的`ROW`构造函数不接受`AS`列别名。可悲的是。

值得庆幸的是，他们优化了相同的。比较计划：

*   [嵌套子查询](http://explain.depesz.com/s/UUU)版本；对比
*   后一个[嵌套`ROW`构造函数版本](http://explain.depesz.com/s/jxy)删除了别名，因此它执行

因为 CTE 是优化栅栏，所以将嵌套子查询版本改写为使用链式 CTE（`WITH`表达式）可能效果不佳，并且不会产生相同的计划。在这种情况下，在我们得到一些改进或更直接地覆盖构造函数`row_to_json`中的列名之前，你会被难看的嵌套子查询所困扰。`ROW`

* * *

无论如何，一般来说，原则是您想在其中创建一个带有 columns 的 json 对象`a, b, c`，并且您希望您可以只编写非法语法：

```
ROW(a, b, c) AS outername(name1, name2, name3) 
```

您可以改为使用返回行类型值的标量子查询：

```
(SELECT x FROM (SELECT a AS name1, b AS name2, c AS name3) x) AS outername 
```

或者：

```
(SELECT x FROM (SELECT a, b, c) AS x(name1, name2, name3)) AS outername 
```

此外，请记住，您可以在`json`没有额外引用的情况下组合值，例如，如果您将 a 的输出`json_agg`放在 a 中`row_to_json`，内部`json_agg`结果将不会被引用为字符串，它将直接合并为 json。

例如在任意示例中：

```
SELECT row_to_json(
        (SELECT x FROM (SELECT
                1 AS k1,
                2 AS k2,
                (SELECT json_agg( (SELECT x FROM (SELECT 1 AS a, 2 AS b) x) )
                 FROM generate_series(1,2) ) AS k3
        ) x),
        true
); 
```

输出是：

```
{"k1":1,
 "k2":2,
 "k3":[{"a":1,"b":2}, 
 {"a":1,"b":2}]} 
```

请注意，`json_agg`产品 ,`[{"a":1,"b":2}, {"a":1,"b":2}]`并没有像以前那样再次被转义`text`。

这意味着您可以*组合*json 操作来构造行，您不必总是创建非常复杂`row_to_json`的 PostgreSQL 组合类型然后调用输出。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-18T07:55:34.223

我正在添加此解决方案，因为接受的响应不考虑 N:N 关系。又名：对象集合的集合

如果您有 N:N 关系，则 clausula`with`就是您的朋友。在我的示例中，我想构建以下层次结构的树视图。

```
A Requirement - Has - TestSuites
A Test Suite - Contains - TestCases. 
```

以下查询表示连接。

```
SELECT reqId ,r.description as reqDesc ,array_agg(s.id)
            s.id as suiteId , s."Name"  as suiteName,
            tc.id as tcId , tc."Title"  as testCaseTitle

from "Requirement" r 
inner join "Has"  h on r.id = h.requirementid 
inner join "TestSuite" s on s.id  = h.testsuiteid
inner join "Contains" c on c.testsuiteid  = s.id 
inner join "TestCase"  tc on tc.id = c.testcaseid
  GROUP BY r.id, s.id; 
```

由于您不能进行多个聚合，因此您需要使用“WITH”。

```
with testcases as (
select  c.testsuiteid,ts."Name" , tc.id, tc."Title"  from "TestSuite" ts
inner join "Contains" c on c.testsuiteid  = ts.id 
inner join "TestCase"  tc on tc.id = c.testcaseid

),                
requirements as (
    select r.id as reqId ,r.description as reqDesc , s.id as suiteId
    from "Requirement" r 
    inner join "Has"  h on r.id = h.requirementid 
    inner join "TestSuite" s on s.id  = h.testsuiteid

    ) 
, suitesJson as (
 select  testcases.testsuiteid,  
       json_agg(
                json_build_object('tc_id', testcases.id,'tc_title', testcases."Title" )
            ) as suiteJson
    from testcases 
    group by testcases.testsuiteid,testcases."Name"
 ),
allSuites as (
    select has.requirementid,
           json_agg(
                json_build_object('ts_id', suitesJson.testsuiteid,'name',s."Name"  , 'test_cases', suitesJson.suiteJson )
            ) as suites
            from suitesJson inner join "TestSuite" s on s.id  = suitesJson.testsuiteid
            inner join "Has" has on has.testsuiteid  = s.id
            group by has.requirementid
),
allRequirements as (
    select json_agg(
            json_build_object('req_id', r.id ,'req_description',r.description , 'test_suites', allSuites.suites )
            ) as suites
            from allSuites inner join "Requirement" r on r.id  = allSuites.requirementid

)
 select * from allRequirements 
```

它的作用是在小项目集合中构建 JSON 对象，并将它们聚合到每个`with`子句上。

结果：

```
[
  {
    "req_id": 1,
    "req_description": "<character varying>",
    "test_suites": [
      {
        "ts_id": 1,
        "name": "TestSuite",
        "test_cases": [
          {
            "tc_id": 1,
            "tc_title": "TestCase"
          },
          {
            "tc_id": 2,
            "tc_title": "TestCase2"
          }
        ]
      },
      {
        "ts_id": 2,
        "name": "TestSuite",
        "test_cases": [
          {
            "tc_id": 2,
            "tc_title": "TestCase2"
          }
        ]
      }
    ]
  },
  {
    "req_id": 2,
    "req_description": "<character varying> 2 ",
    "test_suites": [
      {
        "ts_id": 2,
        "name": "TestSuite",
        "test_cases": [
          {
            "tc_id": 2,
            "tc_title": "TestCase2"
          }
        ]
      }
    ]
  }
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-10T23:32:08.010

我对长期可维护性的建议是使用 VIEW 构建查询的粗略版本，然后使用如下函数：

```
CREATE OR REPLACE FUNCTION fnc_query_prominence_users( )
RETURNS json AS $$
DECLARE
    d_result            json;
BEGIN
    SELECT      ARRAY_TO_JSON(
                    ARRAY_AGG(
                        ROW_TO_JSON(
                            CAST(ROW(users.*) AS prominence.users)
                        )
                    )
                )
        INTO    d_result
        FROM    prominence.users;
    RETURN d_result;
END; $$
LANGUAGE plpgsql
SECURITY INVOKER; 
```

在这种情况下，对象 prominence.users 是一个视图。由于我选择了 users.*，如果我需要更新视图以在用户记录中包含更多字段，我将不必更新此功能。

# android - 明确停止服务

> ID：13227143
> 
> 赞同：0
> 
> 时间：2012-11-05T06:41:08.907
> 
> 标签：android, service

我有一个应用程序，其中包含两个活动和一个服务和一个接收器，服务用于始终获取位置更新，我将第一次在接收器中启动服务，我的要求是，我需要停止当我的应用程序处于前台（运行）时服务，当我的应用程序停止时我需要启动服务。在两个活动中，initActivity 是应用程序启动时启动的第一个活动，而 homegridActivity id 是第二个活动，我在 homegridactivity 中提供了退出应用程序的选项。下面是我启动服务和停止服务的代码。

```
class initActivity extends Activity {
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.app); 
    System.out.println("VANDROID service status inside oncreate of init" );
    ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.vaayoo.android.service.VLocationFetchService".equals(service.service.getClassName())) {
            Intent intent = new Intent( VUiHelper.getInstance().getApplicationContext(), VLocationFetchService.class);
            boolean result = ((Vandroid)VUiHelper.getInstance().getApplicationContext()).stopService(intent);
            System.out.println("VANDROID service status" + result);
            manager = null;
        }

    }

} 
```

} //第二个Activity

```
Class HomeGridActivity extends Activity
{
 protected void onDestroy() {
    super.onDestroy();
    System.out.println("Homegrid activity onDestroy called");
    VUiHelper.getInstance().clearControlCache();
    ActivityManager manager = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.vaayoo.android.service.VLocationFetchService".equals(service.service.getClassName())) {
            Intent intent = new Intent( VUiHelper.getInstance().getApplicationContext(), VLocationFetchService.class);
        ComponentName compname  =((Vandroid) VUiHelper.getInstance().getApplicationContext()).startService(intent);
       System.out.println("COMPONENT NAME" +  compname.toString() );
            manager = null;
        }
    }
} 
```

}

我在 initactivity 的 oncreate 中停止服务，并在 homegridActivity 的 ondestroy 中启动相同的服务，我面临的问题是，这只是第一次工作，如果我多次关闭并启动应用程序，服务不会停止开始，我发现该服务一直在运行。我已将该服务设为 start_sticky，因此在任何时候都不应该被 android 运行时杀死，我应该完全控制该服务以停止和启动。无法找出为什么它不能一直工作，为什么它只是第一次工作。我做错了什么？如何解决这个问题？是因为将服务设为 start_sticky 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:49:04.987

此方法返回 true 或 false 表示。当服务运行时返回 true 否则为 false。因此，当您像这样使用时，您可以使用此方法。

```
private boolean isMyServiceRunning() {
        ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager
                .getRunningServices(Integer.MAX_VALUE)) {
            if ("packagename".equals(service.service
                    .getClassName())) {
                return true;
            }
        }
        return false;
    } 
```

并像这样检查。

```
if (isMyServiceRunning()) {
    stopService(new Intent(A.this, MusicService.class));

    } 
```

# c# - 更改 AppBar 的菜单文本

> ID：13227144
> 
> 赞同：0
> 
> 时间：2012-11-05T06:41:13.383
> 
> 标签：c#, windows-8, microsoft-metro

我有以下 AppBar。

```
<Page.BottomAppBar>
    <AppBar x:Name="bottomAppBar" Padding="10,0,10,0">
        <Grid>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="switchMeasurementMode" AutomationProperties.Name = "Breath rate" Style="{StaticResource AppBarButtonStyle}" Click="switchMeasurementMode_Click" />
            </StackPanel>
        </Grid>
    </AppBar>
</Page.BottomAppBar> 
```

看起来像这样

![在此处输入图像描述](../Images/b4efc2c121f9cf88c1f13123fbf8bc6b.png)

我倾向于在运行时使用以下 C# 代码更改其文本

```
 private void switchMeasurementMode_Click(object sender, RoutedEventArgs e)
    {
        this.switchMeasurementMode.Name = "111";
    } 
```

但是按钮文本没有改变。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T12:13:35.307

如果您在 Windows 8 C# 项目中使用 AppBar 的默认样式，则必须在 XAML 中使用以下命令更改附加属性**AutomationProperties.Name ：**

> AutomationProperties.Name = "新名称"

或在代码中使用：

> Button.SetValue(AutomationProperties.NameProperty, "新值");
> 或
> AutomationProperties.SetName(Button, "new value");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:56:55.220

该按钮是一个内容控件。您设置 Content 属性以更改内容。

```
 this.switchMeasurementMode.Content= "111"; 
```

Name 属性是您为 Button 设置程序化“句柄”的方式。您使用代码编辑器中的名称来修改控件。在您的情况下，您正在更改名称，这意味着您失去了说 this.switchMeasurementMode... 的能力

仅供参考，内容可以不仅仅是文本。大多数 XAML 元素都可以作为内容添加。

# c# - 在编写代码部分时想要一个想法

> ID：13227146
> 
> 赞同：0
> 
> 时间：2012-11-05T06:41:24.557
> 
> 标签：c#, sql-server, database, sql-server-2008, database-administration

场景：我正在用 C# 创建一个管理工具，它将在服务器中恢复完整的 sql server 备份并应用事务日志。db上来后。我已经运行了一些如下所示的脚本。

```
use master
EXEC sp_addlogin '<destsid>', '<sidadmpass>','<dbname>'
use <dbname>
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
EXEC sp_change_users_login 'Update_One','<destsid>','<destsid>'
use master
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use msdb
EXEC sp_grantdbaccess '<destsid>'
EXEC     sp_addrolemember 'db_owner', '<destsid>'
use model
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use tempdb
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use master
grant all on xp_cmdshell to <destsid>
EXEC sp_addsrvrolemember '<destsid>', 'serveradmin'
EXEC sp_addsrvrolemember '<destsid>', 'dbcreator'
EXEC sp_addsrvrolemember '<destsid>', 'bulkadmin'
use <dbname>
if object_id('sp_change_sapuser') is not null
    drop procedure sp_change_sapuser 
create procedure sp_change_sapuser @oldid sysname, @newid sysname
as begin
declare @oldid_uid  smallint
declare @newid_uid  smallint    
declare @object     sysname
declare @object_full    nvarchar(999)
set @oldid_uid = user_id(@oldid)
set @newid_uid = user_id(@newid)
if @oldid_uid is not null and @newid_uid is not null
begin
declare object_cursor cursor local for 
select name from sysobjects where((xtype='U' and name <> 'dtproperties') or (xtype='V' and name not in ('syssegments','sysconstraints')) or (xtype='P' and name not like 'dt_%') or (xtype='D' and name not like 'DF__dtpropert%') or (xtype in ('FN','TF','IF'))) and @oldid_uid = uid
open object_cursor
fetch next from object_cursor into @object
while @@fetch_status=0
begin
set @object_full = user_name(@oldid_uid) + '.' + @object
exec sp_changeobjectowner @object_full, @newid
fetch next from object_cursor into @object
end
end
else
if @oldid_uid is null
begin
print '*** old database user does not exist ***'
end
if @newid_uid is null
begin
print '*** new database user does not exist ***'
end
end
exec sp_change_sapuser '<sourcesid>', '<destsid>'
use master
EXEC sp_grantlogin   'AMR\<destsid>adm'
EXEC sp_grantlogin   'AMR\SAPService<dbname>'
EXEC sp_defaultdb    'AMR\<destsid>adm','<dbname>'
EXEC sp_defaultdb    'AMR\SAPService<dbname>','<dbname>'
EXEC sp_addsrvrolemember 'AMR\<destsid>adm',     'sysadmin'
EXEC sp_addsrvrolemember 'AMR\SAPService<dbname>', 'sysadmin'
EXEC xp_sqlagent_proxy_account 'SET', '<servername>', 'SAPMssXPUser',N'<sidadmpass>'
use master
EXEC sp_addlogin '<destsid>', '<sidadmpass>', <dbname>
use <dbname>
EXEC sp_change_users_login 'Update_One','<destsid>','<destsid>'
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use master
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use msdb
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use model
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use tempdb
EXEC sp_grantdbaccess '<destsid>'
EXEC sp_addrolemember 'db_owner', '<destsid>'
use master
grant all on xp_cmdshell to <destsid>
EXEC sp_addsrvrolemember '<destsid>', 'serveradmin'
EXEC sp_addsrvrolemember '<destsid>', 'dbcreator'
EXEC sp_addsrvrolemember '<destsid>', 'bulkadmin'
--EXEC xp_sqlagent_proxy_account 'SET', '<servername>', 'SAPMssXPUser', N'<sidadmpass>'
EXEC sp_grantlogin   '<destsid>adm'
EXEC sp_grantlogin   'SAPService<dbname>'
EXEC sp_defaultdb    '<destsid>adm','<dbname>'
EXEC sp_defaultdb    'SAPService<dbname>','<dbname>'
EXEC sp_addsrvrolemember '<destsid>adm',     'sysadmin'
EXEC sp_addsrvrolemember 'SAPService<dbname>', 'sysadmin' 
```

注意：给出的值将替换为实际值。

在运行这些脚本时，很少有人会抛出异常。但即使某些脚本抛出错误，我也想继续。而且我还删除了 GO(batch terminator)，因为我无法将单独的 dll 添加到服务器中。请提出一些想法来解决这个问题。

详细信息：编程语言：C# Db - Sql Server 2005,08

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:41:57.413

你不能错过`GO`s。对于某些语句（例如`CREATE PROCEDURE`），重要的是它们存在于自己的单独批次中。

`GO`是对客户端工具（例如 SSMS）的指令，它应该将前面的文本（返回到前一个`GO`或脚本的开头，以较晚者为准）作为批处理发送到服务器。因此，如果您通过代码将 SQL 发送到服务器，您应该做同样的事情 - 或者将每个批次存储为单独的文本片段，这样您就不必担心解析文本（考虑多行字符串可能包含单词 GO 的文字）。

对于每个批次（最初在原始脚本中由 s 分隔），您需要通过调用或类似`GO`方法将其作为单独的批次发送到服务器- 然后用下一批创建一个新对象（或替换现有对象的文本）被执行。`ExecuteNonQuery``SqlCommand`

然后，您可能决定处理来自 C# 代码中 SQL 执行的任何错误，然后开始设置下一批并执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:46:25.037

将每个“部分”包装到它自己的[Try/Catch 块](http://msdn.microsoft.com/en-us/library/ms179296.aspx)中，您的脚本应该能够克服任何错误。如果遇到错误，脚本将直接跳转到下一个“部分”。

此外，根据[MSDN：GO (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188037.aspx)：

> GO 不是 Transact-SQL 语句；它是 sqlcmd 和 osql 实用程序以及 SQL Server Management Studio 代码编辑器识别的命令。

# php - php 中的动态 url 或页面

> ID：13227148
> 
> 赞同：1
> 
> 时间：2012-11-05T06:41:26.993
> 
> 标签：php, mysql, phpmyadmin

嗯，这是我第一个用 php 构建动态页面的倡议。由于我是 php 的新手，我对 php 编程了解不多。我创建了一个名为“动态”的数据库，它的表名是“答案”，之后我插入了四个字段，即“id”、“A1”、“A2”、“A3”。

我在 id=1 中插入了 A1=1,A2 和 A3-0 的值，

在 id=2 中，我插入了 A1=0、A2=1、A3=0

在 id-3 中，我插入了 A1 和 A2=0 A3=1

所以现在我想要的是每当我点击 id=1 的链接时，它就会显示 id=1 的内容等等......到目前为止我所做的是： -

```
 $conn= mysql_connect("localhost","root", "");
      $db= mysql_select_db("dynamic", $conn);
      $id=$_GET['id'];
      $sql= "select * from answer order by id";
      $query= mysql_query($sql);

       while($row=mysql_fetch_array($query, MYSQL_ASSOC))
      {
          echo "<a href='dynamic.php?lc_URL=".$row['id']."'>Click Here</a>"; 
          if($row['A1']==1)
          {
              echo "A1 is 1";
          }
          else if($row['A2']==1)
          {
              echo "A2 is 1";

          }
          else if($row['A3']==1)
          {
              echo "A3 is 1";
          }
          else {
              echo "Wrong query";

            }

        }

       ?> 
```

当我执行此代码时，它会向我显示确切的 id，它会转到确切的 id，但值没有改变..

我希望每当我点击 id 时，它就会显示确切的值，就像我点击 id=2 一样，它会回显“A2 为 1”，仅此而已....

谁能帮帮我？

我也注意到了

```
 $id=$_GET['id']; 
```

它是什么以及如何使用它。谁能给我解释一下..提前非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T04:39:51.230

在深入研究之前，最好从[这里开始对 php 有一个很好的了解。](http://php.net/manual/en/tutorial.php)但要回答你在这里提出的具体问题......

php变量[在这里](http://www.w3schools.com/php/php_get.asp)`$_GET`定义得很好：

> 在 PHP 中，预定义的 $_GET 变量用于以 method="get" 的形式收集值。

这意味着通过 URL 中的查询字符串（在 GET 请求上）传递的任何参数都可以通过`$_GET`php.ini 中的变量访问。例如，请求`dynamic.php?id=1`将允许您通过 访问 id `$_GET['id']`。

由此我们可以得出一个简单的解决方案。在以下解决方案中，`answer`如果 id 参数作为 url 的一部分传递，我们使用相同的 php 页面来显示数据库中表或单行中的项目列表。

```
<!DOCTYPE HTML>
<html>
  <head>
  </head>
  <body>
  <?php
    $mysqli = new mysqli("localhost", "user", "password", "dynamic");

    $query = 'SELECT * FROM answer';
    if ($_GET['id']) {
      $query .= ' WHERE id = '.$_GET['id'];
    } else {
      $query .= ' ORDER BY id';
    }
    $res = $mysqli->query($query);

    if ($res->num_rows == 0) {
      echo '<p>No Results</p>';
    } else if ($res->num_rows == 1) {
      // Display Answer
      $row = $res->fetch_assoc();
      echo '<h3>Answer for '.$row['id'].'</h3>';
      echo '<ul>';
      echo '<li>A1 = '.$row['A1'].'</li>';
      echo '<li>A2 = '.$row['A2'].'</li>';
      echo '<li>A3 = '.$row['A3'].'</li>';
      echo '</ul>';
    } else {
      // Display List
      echo '<ul>';
      while ($row = $res->fetch_assoc()) {
        echo '<li><a href="dynamic.php?id='.$row['id'].'">Answers for '.$row['id'].'</a></li>';
      }
      echo '</ul>';
    }
  ?>
  </body>
</html> 
```

好的，这可能不是您想要的，但它应该可以帮助您更好地了解事物的工作原理。如果我们在页面中添加一点 javascript，那么我们可以在不使用 GET 参数和额外页面请求的情况下显示/隐藏答案。

```
<!DOCTYPE HTML>
<html>
  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  </head>
  <body>
  <?php
    $mysqli = new mysqli("localhost", "user", "password", "dynamic");

    $query = 'SELECT * FROM answer ORDER BY id';
    $res = $mysqli->query($query);

    if ($res->num_rows == 0) {
      echo '<p>No Results</p>';
    } else {
      // Display List
      echo '<ul>';
      while ($row = $res->fetch_assoc()) {
        echo '<li><a href="javascript:toggleAnswers('.$row['id'].')">Answers for '.$row['id'].'</a>';
        echo '<ul id="answers_'.$row['id'].'" style="display:none;">';
        echo '<li>A1 = '.$row['A1'].'</li>';
        echo '<li>A2 = '.$row['A2'].'</li>';
        echo '<li>A3 = '.$row['A3'].'</li>';
        echo '</ul>';
        echo '</li>';
      }
      echo '</ul>';
    }
  ?>

    <script>
      function toggleAnswers(answer) {
        $('#answers_' + answer).toggle();
      }
    </script>
  </body>
</html> 
```

还有更多的解决方案，每一个都比我在这里介绍的更复杂。例如，我们可以设置一个 ajax 请求，仅在单击某个项目时才将答案加载到列表页面中。我的建议是阅读一些关于 php 的初学者教程，并查看一些流行的 PHP 框架：Zend、CodeIgniter、CakePHP 等。根据您的总体目标，其中之一可能真的可以帮助您更快地到达那里。

请注意，此处提供的代码只是如何完成您所要求的示例。它绝对没有遵循所有（如果有的话）最佳实践。

# javascript - 如何只允许在java脚本中输入rh因子

> ID：13227150
> 
> 赞同：1
> 
> 时间：2012-11-05T06:41:34.600
> 
> 标签：javascript, regex

我必须允许用户仅输入血液的 RH 因子，例如`-ve,+ve`如何在 java 脚本中执行此操作。我也可以在java中使用同样的东西吗？

请帮忙。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:49:01.837

使用[正则表达式](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)。它在 java 和 javascript 中都可用。

检查[Javascript 的 RegEx 以仅允许字母数字](https://stackoverflow.com/questions/388996/regex-for-javascript-to-allow-only-alphanumeric?rq=1)，以便更好地理解 regex 表达式。

```
for +ve and -ve 
var regex = /^[-+]+[v]+[e]$/i; 
```

这是工作..我刚刚检查过..享受

# c++ - 从一个点开始找到具有最小成本的矩阵中的元素

> ID：13227154
> 
> 赞同：0
> 
> 时间：2012-11-05T06:41:56.117
> 
> 标签：c++, algorithm, search

我有 n*n 矩阵，我想从矩阵中找到具有最小成本的元素，节点的成本意味着成本 = Manhattandistance(startingnode,node) + costof(node) 其中起始节点是哪个角度的节点我正在寻找！

我只使用了 4 个 for 循环，它可以工作，但我想优化它，我做了类似 bfs 的操作：我使用了一个队列并首先添加了起始节点，然后在一个 while 循环中我从队列中弹出了节点并使用Manhatttan 1将该节点周围的所有元素添加到队列中。我这样做的同时，我刚刚从队列中弹出的节点的距离+整个矩阵的最低价格（我从一开始就知道）更小比我刚刚找到的最低价格（我将我刚刚弹出的节点的价格与 min 进行比较）如果它更大，我停止搜索，因为我找到的最小节点是可能的最低值。问题是这个算法可能会因为我使用 std::queue 而变慢？它的工作时间比 4 个 for 循环版本更长。（我还使用了一个标志矩阵来查看我添加到队列时正在检查的元素是否已经添加）。最耗时的代码块是我扩展节点的部分不知道为什么我只检查元素是否有效我的意思是它的坐标小于 n 并且大于 0 如果可以我将元素添加到队列中！

我想知道如何改进这一点，或者是否是另一种方法！希望我足够明确。

这是需要很长时间的代码部分：

```
if((p1.dist + 1 + Pmin) < pretmincomp || (p1.dist + 1 + Pmin) < pretres){
                std::vector<PAIR> vec;  
                PAIR pa;
                int p1a=p1.a,p1b = p1.b,p1d = p1.dist;
                if(isok(p1a+1,p1b,n)){
                    pa.a = p1a + 1;
                    pa.b = p1b;
                    pa.dist = p1d + 1;

                    vec.push_back(pa);
                }
                if(isok(p1a-1,p1b,n)){
                    pa.a = p1a - 1;
                    pa.b = p1b;
                    pa.dist = p1d + 1;
                    vec.push_back(pa);
                }

                if(isok(p1a,p1b+1,n)){
                    pa.a = p1a;
                    pa.b = p1b + 1;
                    pa.dist = p1d + 1;
                    vec.push_back(pa);
                }
                if(isok(p1a,p1b -1 ,n)){
                    pa.a = p1.a;
                    pa.b = p1.b - 1;
                    pa.dist = p1d + 1;
                    vec.push_back(pa);
                }

                for(std::vector<PAIR>::iterator it = vec.begin();
                         it!=vec.end(); it++){
                    if(flags[(*it).a][(*it).b] !=1){
                        devazut.push(*it);
                        flags[(*it).a][(*it).b] = 1;
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:42:39.087

您正在处理[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)，可以使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)（如果图未加权）或[A* 算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)有效地解决该问题- 如果您在图上有一些“知识”并且可以估计它将“花费”多少您从每个节点中找到一个目标。

您的解决方案与 BFS 非常相似，但有一个区别 - **BFS 还维护一`visited`组**- 您已经访问过的所有节点。这个`visited`集合的想法是你不需要重新访问一个已经访问过的节点，因为任何通过它的路径都不会比你第一次访问这个节点时找到的最短路径更短。
请注意，如果没有`visited`集合 - 每个节点都会被重新访问很多次，这使得算法非常低效。

BFS 的伪代码（带有访问集）：

```
BFS(start):
  q <- new queue
  q.push(pair(start,0)) //0 indicates the distance from the start
  visited <- new set
  visited.add(start)
  while (not q.isEmpty()):
     curr <- q.pop()
     if (curr.first is target):
        return curr.second //the distance is indicated in the second element
     for each neighbor of curr.first:
        if (not set.contains(neighbor)): //add the element only if it is not in the set
           q.push(pair(neighbor,curr.second+1)) //add the new element to queue
           //and also add it to the visited set, so it won't be re-added to the queue.
           visited.add(neighbot) 
  //when here - no solution was found
  return infinity //exhausted all vertices and there is no path to a target 
```

# c - 在 Linux 中检测 RS-232 com 端口

> ID：13227155
> 
> 赞同：1
> 
> 时间：2012-11-05T06:42:00.147
> 
> 标签：c

我有一个 ECR（电子收银机）设备，它有一个 RS-232 com 端口电缆用于连接到 PC，但我没有得到任何驱动程序。我正在尝试将设备连接到 PC，但 PC 无法检测到电缆。如何检测连接在此 RS-232 上的此设备？我在 Linux 下工作。任何有关如何找到设备的帮助表示赞赏？

以下是我在 C 中找到的代码片段，用于根据波特率和 Com 端口号连接到设备。

```
int OpenComport(int comport_number, int baudrate)

int SendByte(int comport_number, unsigned char byte)

int SendBuf(int comport_number, unsigned char *buf, int size) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:59:34.437

请参阅[我](https://stackoverflow.com/a/6947758/198536)对相关问题的回答，该问题显示了如何打开和配置串行端口。

在 Linux 上，串行端口几乎总是`/dev/ttyS[0123]`（即`/dev/ttyS0`、`/dev/ttyS1`等）用于硬连线端口和`/dev/ttyUSB*`USB 端口。只有在某些发行版上存在硬件时，才会出现硬连线“设备”。在其他人身上，无论有没有硬件，它们总是出现。（尝试`cat /dev/ttyS2`看看你是否得到错误“没有这样的设备”。）这是一个内核配置选项，经常设置它来创建设备条目，无论硬件是否存在。

USB 端口仅在插入硬件时才存在，但如果有多个 USB 串行端口，则可能难以识别哪个是哪个。

`/etc/udev/rules.d/*`如果设备的某些方面是一致的，则可以在其中配置一种机制。详情请参阅`man 7 udev`。

对于我编写的应用程序，我通过写入设备并识别其响应来确定哪个设备是哪个设备。对于没有响应的设备，这要么是一个有价值的编程挑战，要么是一个普通的配置解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:46:21.277

我认为您需要阅读有关 RS-232 以及 C 编程的一些知识。RS-232 没有驱动程序。这是一个非常“愚蠢”的协议——你基本上只是将数据推出端口。

PC无法检测到电缆？那是因为它不是USB。信不信由你，即插即用并不总是存在。您告诉软件设备应该连接到哪个端口，然后它会尝试与它通信。

此外，这些不是“代码片段”，它们只是函数原型。那里没有任何实际代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:34:33.243

1>由于您的 ECR 上没有操作系统，所以我想您不需要任何驱动程序，而是 ECR 中将有一个固件，它会尝试与您的 Linux UART 驱动程序进行通信

2> Rs-232 基本上是一种串行协议，我的意思是它有 9 根线，因此使用 9 针连接器 DB-9 连接器，处理器内部的所有通信都是并行格式，因此使用称为 UART 的芯片将所有并行数据转换成串行数据，由于yu要传递Rs-232格式的数据，所以需要以该格式打包。

3> Linux 内核已经有一个 uart 驱动程序，它是为 RS-232 实现的。所以需要担心来自Linux端的驱动程序。

4> 打开终端类型“dmesg | grep tty”（仅将 ECR 连接到 PC 的 rs-232 端口）。它会返回 ttyS 或 ttyUSB 等内容，但是如果您仅通过 rs-232 电缆连接，您只需专注于 ttyS。

5> 一旦你确定来自 dmesg 的 ttyS 设备，使用 minicom（它易于使用）与设备通信。

问候，祖布拉伊

# html - 如何修复此布局？

> ID：13227158
> 
> 赞同：-1
> 
> 时间：2012-11-05T06:42:09.957
> 
> 标签：html, css

我得到这个输出

![在此处输入图像描述](../Images/e9d974c314351b27d176ec3d62c5f1a6.png)

当这是我想要的结果时

![在此处输入图像描述](../Images/d11b2c2346c6da9f170b22b7ab3c85ee.png)

HTML是

```
<div class="fl20">Ans&ouml;kans beroende:</div>
    <div class="fl20">Fullföljd</div>
    <div class="fl10">&nbsp;</div>
    <div class="fl1">&nbsp;</div>
    <div class="fl20"></div>
    <div class="clear"></div>

    <div class="fl1">&nbsp;</div>
        <div class="fr10 smallg">F&ouml;rnamn Efternamn,<br>handl&auml;ggarkod<br><br></div>
        <div class="fl20"></div>

                <div id="ff" class="fl20">          
        Fullföljd från:</div>
        <div class="fl20">  
        <strong>1201191-2                     </strong>
    </div>  <div class="fl20"></div>

            <div id="wo" class="fl20">          
        WO-nummer:</div>
        <div class="fl20">  
        <strong>432432                        </strong>
    </div>

        <div class="fl20"></div>
            <div class="clear"></div>
        <div id="datum" class="fl20">           
        Internationell ingivningsdag:</div>
        <div class="fl20">  
        <strong>2012-11-11</strong>
    </div> 
```

而CSS是

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}    

.sub_meny_search{
    position: absolute;
    right: 265px;
    font-size: 70%;
    vertical-align: text-top;
}

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popuphandlaggare{ 
    border-color: #000;
    border-style: groove;      
    border-width: 2px;      
    padding: 0px;      
    background-color: #FFF;     
    font-size: 70%;     
    position: absolute;     
    top: 900px; 
    }

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}    
.checkmarginL {margin-left: 25px;}    

.pusher {padding-left: 15px;}
.pusherR {margin-right: 40px;}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 700px; color: #ffffff; }
.column1 {     color: #000000; margin: 0;      padding: 0;     width: 600px;     border:0;     float: left; }
.column2 {     color: #000000;margin: 0;      padding: 0;     border:0;     width: 80px;     float: right; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}
.f220 {
    width: 400px;
}
.f1450 {
    width: 600px;
    float:left;
}
.f1550 {
    width: 150px;
    float:left;
    padding:15px;
}
.paddedcell {
    padding:15px;
}
.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.fl21{float:left; padding:5px; margin:5px; width:150px;} .fl455{float:left; padding:5px; margin:5px; width:120px;} 

.form-bg {
  background: #eeefdf;
  width:1000px;
  overflow:hidden;
}
.form-bg2 {
  background: #eeefdf;
  width:100%;
  overflow:hidden;
}
.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}
.discount {
float:right;
width:500px;

}
.discounts {
width:900px;

}
.right {
float:right;
width:700px;
}
.yta20 {
background: #eeefdf;
width:1100px;
}

.yta2 {

width:1100px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
#table td { 
margin:120px; 
} 

#personName {     float:left;     width:300px;   }  #otherDetails {     float:right;     width:450px;      }

.th_rad_sort {border-bottom: 2px solid #000000; text-decoration: none;}

a img { border: 0; outline:0;}

.f { float: right;     color: white; }

.handlaggare { width: 1000px; }

div.data-box-nat{
    margin-bottom: 10px;
    padding: 2px;
    border: 2px solid gray;
    width: 600px;
}
div.data-box-pct{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 75%;
}

.horizontal-gradient {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
    width: 1055px;
}

.horizontal-gradient-hlsok {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
    width: 785px;
}

#topBar {width:100%; background-color:#EFEFDC; display:inline-block;}
#topBar h2 {float:left}
#close {position:relative; float:right;}â€‹ 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:48:03.567

为 top 2 large 获取两个块元素。您可以为此使用以下 css。

```
.blockelement{
    display:block;
    overflow:auto;
 } 
```

对于底部 3 列，创建 3 个 float:left div 以创建 3 列并使用 blockelement 再次向每列添加行。您为此使用了过于复杂的代码。我认为表格会让事情变得更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T09:12:35.687

将此代码与新结构一起使用

```
<style>
.data{width:800px; background:#eeefdf;}
.data div.hed{ font-size:18px; font-weight:bold; height:40px; border-bottom: #CCC 1px solid; padding:7px;}
.data div.group{font-weight:800px; clear:both; padding:7px;}
.group div.line{width:250px; margin-right:10px; float:left;}
</style> 
```

和 HTML

```
<div class="data">
<div class="hed">Grunduppgiffter</div>
<div class="group">
    <div class=" line"><strong>ingv</strong></div>
    <div class=" line"><strong>Ans&ouml;kans beroende</strong></div>
    <div class=" line"><strong>Fullföljd</strong>
    </div>
    <div style="clear:both;"></div>
</div>

<div class="group">
    <div class=" line">&nbsp;</div>
    <div class=" line">Fullföljd från:</div>
    <div class=" line">: 12313</div>
    <div style="clear:both;"></div>
</div>

<div class="group">
    <div class=" line">&nbsp;</div>
    <div class=" line">WO-nummer:</div>
    <div class=" line">: 147754</div>
    <div style="clear:both;"></div>
</div>

<div class="group">
    <div class=" line">&nbsp;</div>
    <div class=" line">Internationell ingivningsdag:</div>
    <div class=" line">: 5586764545</div>
    <div style="clear:both;"></div>
</div>

</div> 
```

让我看看你的结果是什么

祝你今天过得愉快

# html - 如何使用正则表达式在 Matlab 中解析 HTML 标签？

> ID：13227160
> 
> 赞同：4
> 
> 时间：2012-11-05T06:42:18.243
> 
> 标签：html, regex, matlab, tags

我的时间很短，特别想提取一个像下面这样的字符串。问题是标签不是形式的`<a> data </a>`。

鉴于，

```
s = <em style="font-size:medium"> 5,888 </em> 
```

如何在 matlab 中仅提取 5,888 个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:52:33.367

[您会在此处](https://stackoverflow.com/questions/6582250/extracting-data-between-two-tags-in-html-file-matlab)、或[此处](https://stackoverflow.com/questions/5867093/regexp-for-html-tags-with-matlab)或[此处](http://www.mathworks.nl/matlabcentral/newsreader/view_thread/110107)找到有用的信息，所有这些都是 google-first-page 的结果，并且会比在这里提问更快。

无论如何，快速-'n-dirty方式：您可以过滤`<>`符号：

```
>> s = '<em style="font-size:medium"> 5,888 </em> <sometag> test </sometag>'    
>> a = regexp(s, '[<>]');    
>> s( cell2mat(arrayfun(@(x,y)x:y, a(2:2:end-1)+1, a(3:2:end)-1, 'uni',false)) )

ans = 

   5,888 test 
```

或者，更健壮和更简洁，将任何标签（包括标签）之间的所有内容替换为空：

```
>> s = regexprep(s, '<.*?>', '')
ans = 

   5,888 test 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T08:26:29.420

谢谢大家的帮助。我基本上是想在 Matlab 上获取美国某个县的人口。以为我会分享我的代码，虽然不是最优雅的。可能会帮助一些灵魂。:)

```
county = 'morris';
state = 'ks';

county = strrep(county, ' ' , '+');
str = sprintf('https://www.google.com/search?&q=population+%s+%s',county,state);
s = urlread(str);
pop = regexp(s,'<em[^>]*>(.*?)</em>', 'tokens');
pop = char(pop{:});
pop = strrep(pop, ',' , '');
pop = str2num(pop); 
```

# fedora - 在构建 RPM 包之前自动安装构建依赖项

> ID：13227162
> 
> 赞同：51
> 
> 时间：2012-11-05T06:42:32.797
> 
> 标签：fedora, rpmbuild

我正在尝试构建一个 .rpm 包。我刚刚按照步骤来做到这一点。到目前为止，所有步骤都很好，但现在我只是坚持这一步。我刚刚运行以下命令并收到此错误：

`rpmbuild -ba asterisk.spec`

```
error: Failed build dependencies: 
    gtk2-devel is needed by asterisk-1.8.12.2-1.fc15.x86_64
    libsrtp-devel is needed by asterisk-1.8.12.2-1.fc15.x86_64
    [... more ...]
    freetds-devel is needed by asterisk-1.8.12.2-1.fc15.x86_64
    uw-imap-devel is needed by asterisk-1.8.12.2-1.fc15.x86_64 
```

我正在使用fedora-15。如何解决此错误？

`src.rpm`在安装软件包期间如何安装所有依赖项。可能吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-11-05T09:12:39.583

您可以使用包中的`yum-builddep`命令`yum-utils`来安装包的所有构建依赖项。

参数可以是规范文件的路径、源 RPM 的路径或在配置的存储库中作为源 RPM 存在的包的名称，例如：

```
yum-builddep my-package.spec 
```

或者

```
yum-builddep my-package.src.rpm 
```

`dnf`通过确保`dnf-plugins-core`已安装然后执行以下操作，可以在用作软件包管理器的较新版本的 Fedora 上实现相同的目标：

```
dnf builddep my-package.spec 
```

或者

```
dnf builddep my-package.src.rpm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-08T18:28:34.393

`yum-builddep`如果您使用的镜像不提供源 RPM，则似乎不起作用。这可能无法处理所有情况，但通常对我有用：

```
sudo yum install -y $(<rpmbuild> | fgrep 'is needed by' | awk '{print $1}') 
```

`<rpmbuild>`您的命令在哪里`rpmbuild`（例如，`rpmbuild -ba foo.spec`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-06T13:13:03.120

在 PHP 构建上 - 特别是`phpbrew`我使用`dnf builddep php`的，它有效。

# vb.net - vb.net 转换

> ID：13227163
> 
> 赞同：0
> 
> 时间：2012-11-05T06:42:48.547
> 
> 标签：vb.net

您好我有以下用于将文件从 .xlsm 转换为 .xlsx 的代码片段。代码在 C# 中，但我需要它在 vb 中。请建议。

```
byte[] byteArray = File.ReadAllBytes("C:\\temp\\test.xlsm");
using (MemoryStream stream = new MemoryStream())
{
stream.Write(byteArray, 0, (int)byteArray.Length);
using (SpreadsheetDocument spreadsheetDoc = SpreadsheetDocument.Open(stream, true))
 // Change from template type to workbook type
{
spreadsheetDoc.ChangeDocumentType (SpreadsheetDocumentType.Workbook);
}
File.WriteAllBytes ("C:\\temp\\test.xlsx", stream.ToArray()); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:56:08.273

你有没有试过自己做？网上很少有用于这种转换的好工具，比如那个： http: [//www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

```
Dim byteArray As Byte() = File.ReadAllBytes("C:\temp\test.xlsm")
Using stream As New MemoryStream()
    stream.Write(byteArray, 0, CInt(byteArray.Length))
    Using spreadsheetDoc As SpreadsheetDocument = SpreadsheetDocument.Open(stream, True)
        ' Change from template type to workbook type
        spreadsheetDoc.ChangeDocumentType(SpreadsheetDocumentType.Workbook)
    End Using
    File.WriteAllBytes("C:\temp\test.xlsx", stream.ToArray())
End Using 
```

# iphone - 选择另一个带有 UIPickerView 错误的 UITextField 时隐藏键盘

> ID：13227168
> 
> 赞同：0
> 
> 时间：2012-11-05T06:43:00.130
> 
> 标签：iphone, xcode, uitextfield, uipickerview

当用户选择`UITextField`. 我目前有三个文本字段：两个`UIPickerView`（由同一个选择器控制）和一个文本输入字段。当我单击“返回”或在后台单击时，键盘通过`resignFirstResponder`呼叫消失。

问题：

当我当前正在编辑文本输入字段然后立即选择`UITextField`w/`UIPickerView`功能时，键盘不会消失。我觉得我已经尝试了所有解决方案，并且正在用头撞墙......

代码：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField{
    [pickerView setHidden:YES];
    if (fldQuiver.editing == YES) {
        [fldTitle resignFirstResponder];
        [fldQuiver resignFirstResponder];
        [pickerView setHidden:NO];
        variabla = 1;
    }else if (fldCategory.editing == YES) {
        [fldTitle resignFirstResponder];
        [fldCategory resignFirstResponder];
        [pickerView setHidden:NO];
        variabla = 2;
    }
    NSLog(@"variabla %d",variabla);
    [pickerView reloadAllComponents];
} 
```

任何帮助，将不胜感激。提前致谢。

编辑的王子代码：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField;        // return NO to disallow editing.
{
    //set logic for picker view here
    if (textField == fldQuiver)
    {
        variabla = 1;
    }
    else if (textField == fldCategory) {
        variabla = 2;
    }
    else
    {
    }
    NSLog(@"variabla %d",variabla);
    [pickerView reloadAllComponents];

    if (textField == fldQuiver)
    {
        [fldTitle resignFirstResponder];
        [pickerView setHidden:NO];
        return NO;
    }
    else if (textField == fldCategory) {
        [fldTitle resignFirstResponder];
        [pickerView setHidden:NO];
        return NO;
    }
    else
    {
        [pickerView setHidden:YES];
        return YES;
    }
} 
```

另外：我已经“合成”并声明了`@property` `fldQuiver`and `fldCategory`。我有`IBOutlet`, `fldTitle`, `fldQuiver`.`fldCategory`

`pickerView`加载了一个基于变量的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:14:20.933

使用`textFieldShouldBeginEditing` `delegate`方法：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField;        // return NO to disallow editing.
{
   //set logic for picker view here 
   if (textField == fldQuiver) 
   {
      //picker view hidden or show here
      return NO;
   }
   else if (textField == fldCategory) {
       //picker view hidden or show here
      return NO;
   }
   else
   {
      return YES;
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:00:23.600

为文本字段设置委托

```
textField.delegate=self;

-(void)textFieldDidBeginEditing:(UITextField *)textField
{
...........
[textField resignFirstResponder];  //it common for all text field,so not use multi resignFirstResponder
............
} 
```

# php - 如何回显多维数组？

> ID：13227169
> 
> 赞同：2
> 
> 时间：2012-11-05T06:43:01.330
> 
> 标签：php, codeigniter

我有字符串数据

```
$data="100,200,300,400|500,600,700,800|900,100,200,300|400,500,600,700|800,900,100,200|300,400,500,600|700,800,900,100"; 
```

我想得到这样的结果

```
a   |b   |c   |d   |
100 |200 |300 |400 |
500 |600 |700 |800 |
900 |100 |200 |300 |
.   |.   |.   |.   |
etc |etc |etc |etc | 
```

我必须做些什么才能得到这样的结果

我是编程新手，不知道多维数组

我只知道我把这个字符串炸了两次

```
$data = explode(';',$data);
foreach($data as &$d)
    $d=explode(':',$d); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:48:37.310

试试这个方法

```
<?php
$data="100,200,300,400|500,600,700,800|900,100,200,300|400,500,600,700|800,900,100,200|300,400,500,600|700,800,900,100";
$data = explode('|',$data);
foreach($data as $d){
   $newdata_arr = explode(',',$d);
      foreach($newdata_arr as $newdata)
      echo $newdata."|";

   echo "\r\n";
}
?> 
```

## [演示](http://codepad.org/Fp70rTSU)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:51:38.067

You can change the second argument to str_pad to change how much padding each element in the row has.

```
<?php
$data="100,200,300,400|500,600,700,800|900,100,200,300|400,500,600,700|800,900,100,200|300,400,500,600|700,800,900,100";

$rows = explode("|", $data);
$headers = "a,b,c,d";
array_unshift($rows, $headers);

foreach ($rows as $row) {
  $parts = explode(",", $row);
  foreach ($parts as $part) {
    echo str_pad($part, 10) . "|";
  }
  echo "\n";
} 
```

**OUTPUT**

```
a         |b         |c         |d         |
100       |200       |300       |400       |
500       |600       |700       |800       |
900       |100       |200       |300       |
400       |500       |600       |700       |
800       |900       |100       |200       |
300       |400       |500       |600       |
700       |800       |900       |100       | 
```

If you are going to have varying data, but always want to have at least 1 space between the values and the column seperator, then you can use the following:

```
<?php
$data="100,200,30,400|500,600,70,8000|900,100,200,300|4004532,500,60,700|800,900,100,200|300,400,500,600|700,800,900,100";

function splitvals($str) {
  return explode(",", $str);
}

$multi_data = array_map('splitvals', explode('|', $data));
array_unshift($multi_data, null);
$val_for_sizes = call_user_func_array('array_map', $multi_data);
$sizes = array();
foreach ($val_for_sizes as $vals) {
  $sizes[] = strlen(max($vals));
}

$rows = explode("|", $data);
$headers = "a,b,c,d";
array_unshift($rows, $headers);

foreach ($rows as $row) {
  $parts = explode(",", $row);
  $col = 0;
  foreach ($parts as $part) {
    echo str_pad($part, $sizes[$col++] + 1) . "|";
  }
  echo "\n";
} 
```

**OUTPUT**

```
a       |b   |c   |d    |
100     |200 |30  |400  |
500     |600 |70  |8000 |
900     |100 |200 |300  |
4004532 |500 |60  |700  |
800     |900 |100 |200  |
300     |400 |500 |600  |
700     |800 |900 |100  | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:46:46.227

```
$data = explode('|',$data);
$arr = array();
foreach($data as &$d)
    $arr[] = explode(',',$d);

<pre>
<?php print_r ($arr); ?>
</pre> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:51:16.193

try this

```
$data="100,200,300,400|500,600,700,800|900,100,200,300|400,500,600,700|800,900,100,200|300,400,500,600|700,800,900,100";
$dt = $data = explode('|',$data);
echo 'a | b | c | d';
echo '<br/>';
foreach($dt as $key => $val){
  echo str_replace(',', ' | ',$val);
  echo '<br/>';
 } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-05T06:44:44.503

```
<pre>
<?php print_r ($array); ?>
</pre> 
```

# c# - 使用 LINQ 递归查找通用列表 C#

> ID：13227170
> 
> 赞同：0
> 
> 时间：2012-11-05T06:43:04.227
> 
> 标签：c#, winforms, linq, recursion

我有一个具有 2 个属性的自定义类的通用列表。这些属性存储了一个表单和另一个表单之间的关系。该列表被构造为分层列表（父/子）关系。我想要做的是根据将传递给函数的父表单引用获取所有表单的列表。我认为解决此问题的最佳方法是使用递归方法进行 LINQ 查询。我相信有人可以为我指明正确的方向

这是列表中使用的类

```
class FormStack    {

    #region Declares

    private Form _form;
    private Form _parent;

    #endregion

    #region Constructor

    static FormStack()
    {
    }

    #endregion

    public Form Form
    {
        get { return _form; }
        set { _form = value; }
    }

    public Form Parent
    {
        get { return _parent; }
        set { _parent = value; }
    }

} 
```

所以我希望能够调用一个方法并将表单引用传递给该函数并获取与该父级相关的所有子表单。

这是我一直在绊倒的一些代码

```
// create a lookup list
var list = formStack.ToLookup( p => object.ReferenceEquals( p.Parent, parent ) );

// create a function
Func<IEnumerable<Form>, IEnumerable<Form>> recurse = null;
recurse = qs =>
{
    return
        qs
            .Concat(
                from q in qs
                from q2 in recurse( list[] )
                select q2 );
};

// filter the list
var children = recurse( list[parent] ).ToList(); 
```

我有一个具有标准 CRUD 功能的 winform 应用程序。假设有一个客户列表，每个客户可以有多个地址，每个地址都有多个建筑物，我构建表格的方式是有一个客户列表，从这个列表中你可以打开一个详细的表格一个特定的客户。此表格包含客户的详细信息和列表中的所有地址。此列表允许用户现在在列表中选择一个地址并打开包含建筑物列表等的地址详细信息表单......我的问题是我想关闭该客户的客户详细信息和所有相关表单. 我的想法是保持表格之间的关系，但也许我有更好的方法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:17:25.743

好的，在我看来，您有两个问题。一个是语法错误（`recurse(list[])`是错误的），但另一个是您的 FormStack 并不是真正的堆栈。它只是两种形式，没有办法创建递归链。我想你想要这个：

```
public class FormStack : IEnumerable<Form> // or just implement SelectMany
{    
    public Form Form { get; set; }
    public FormStack Parent { get; set; }  
    //implement IEnumerable<Form> or the SelectMany method
} 
```

然后我认为您可以这样做，但这似乎是一件尴尬的事情：

```
Func<FormStack, IEnumerable<Form>> recurse = qs =>
{
    return from q in qs
           select (new[] { qs.Form }).Concat(recurse(qs.Parent));
};

var list = recurse(formStack).ToList(); 
```

那是如果您坚持使用查询语法。

**但是，如果我是你，**我会忘记所有这些并实施 an`IEnumerator<Form>`来为你做这一切：

```
public class FormStack : IEnumerable<Form> 
{    
    public Form Form { get; set; }
    public FormStack Parent { get; set; }  
    public IEnumerator IEnumerable:GetEnumerator() 
    { 
        return (IEnumerator)GetEnumerator();
    }
    public IEnumerator<Form> GetEnumerator() 
    { 
        return new FormStackEnumerator(this);
    }
}
public class FormStackEnumerator : IEnumerator<Form>
{
    private FormStack _stack;
    private FormStack _first;
    public Form Current { get { return _stack.Form; } }
    object IEnumerator.Current { get { return Current; } }

    public FormStackEnumerator(FormStack stack)
    {
        _stack = stack;
        _first = stack;
    }
    public bool MoveNext()
    {
        if (_stack.Parent == null)
        {
            return false;
        }
        _stack = _stack.Parent;
        return true;
    }
    public void Reset() { _stack = _first; }
    void IDisposable.Dispose() { }
} 
```

那么你需要在你的主代码中做的就是：

```
var list = new List<Form>();
foreach (var node in formStack)
{
    list.Add(node.Form);
} 
```

* * *

顺便说一句，我只是查找了 Form 类（我不是 WinForms 开发人员）并且 Forms 本身有一个 Parent 成员。因此，您实际上不需要将它们包装在节点类型的构造中；他们已经是节点！这让一切变得简单：

```
var list = new List<Form>();

Action<Control> recurse = target =>
{
    var form = target as Form;
    if (form != null)
    {
        list.Add(form);
        recurse(target.Parent);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:58:04.993

这是我编造的：

为所有表单创建一个基本表单：

> ```
> public class MyFormBase : Form
> {
>     public MyFormBase()
>     {
>         FormRepository.RegisterForm(this);
>     }
> 
>     public MyFormBase(MyFormBase parent)
>         : this()
>     {
>         Parent = parent;
>     }
> 
>     public MyFormBase Parent { get; set; }
> } 
> ```

每个表单只能有一个在构造函数中传递的父级。

创建一个存储库（或类似的东西）来存储您的表单->我不想将所有子项存储在表单本身中

```
//infrastructure - simulated with a static class
public static class FormRepository
{
    private static List<MyFormBase> _allForms = new List<MyFormBase>();

    public static void RegisterForm(MyFormBase form)
    {
        _allForms.Add(form);
    }

    public static void CloseFormAndChildren(MyFormBase form)
    {
        _allForms.Where(x => x.Parent.Equals(form)).ToList().ForEach(x => CloseFormAndChildren(x));
        form.Close();
    }
} 
```

在您要关闭的任何表单（包括孩子）上调用 CloseFormAndChildren。这可以在结束事件中调用...

# iphone - 脸书和推特与 iPhone 应用程序的集成无法在设备上运行

> ID：13227171
> 
> 赞同：0
> 
> 时间：2012-11-05T06:43:04.710
> 
> 标签：iphone, ios, facebook, twitter

我对 iOS 开发非常陌生。我正在制作一个应用程序，我需要在其中集成 twitter 和 Facebook 以进行墙贴。我已经为此完成了所有必需的编码，并且在模拟器上它工作正常，但在设备上却不行。

另一个问题是 Facebook 集成的编码，我已经从其他“演示”应用程序中复制了它。那么我们还需要在其中进行哪些更改才能使其适用于我自己的应用程序。因为当我在 Facebook 墙上看到我的应用程序完成了我的更新时，“演示”应用程序名称随帖子一起出现。

请指导我！！提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:49:53.683

**Facebook**

在阅读文档之前，您似乎已经跳到了编码部分。在集成 facebook sdk 并编写代码之前，您需要在 facebook 开发者控制台中创建一个新的应用程序部分，获取一个 Facebook 应用程序 ID。您需要在项目中使用该应用程序 ID，而不是 Facebook 演示应用程序附带的应用程序 ID。

[文档](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)完整地解释了这个过程，这里不需要重写。确保你读到最后。

**推特**

我不确定你在推特上是否也有问题（问题还不清楚）。如果是，您应该说明您是如何连接到 Twitter 的。但总的来说，从你的问题的语气来看，你似乎没有阅读文档，在各自的开发者控制台中创建一个应用程序部分，并获取应用程序 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:02:49.727

您可以使用共享工具包框架，[http ://getsharekit.com](http://getsharekit.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:02:07.687

根据在您的应用程序中集成 twitter。试试这个代码

在 self.fullimage 写任何图像的 url。

调用 buildTweetSheet 方法发布到 Twitter。

导入 Twitter.framework

# 进口

@property(nonatomic,strong) TWTweetComposeViewController *_tweetSheet;

@synthesize _tweetSheet; -(void)buildTweetSheet { NSLog(@"buildTweetSheet");

```
_tweetSheet = [[TWTweetComposeViewController alloc] init];

UIImage *eimage=UIImage *eimage=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.fullimage]]];

[_tweetSheet setInitialText:@""];

[_tweetSheet addImage:eimage];

[_tweetSheet setInitialText:@""];

[self presentModalViewController:_tweetSheet animated:YES];

TWTweetComposeViewControllerCompletionHandler completionHandler = ^(TWTweetComposeViewControllerResult result)

{
    if(result == TWTweetComposeViewControllerResultDone) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Done" message:@"Image Posted Successfully" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];

    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failed" message:@"Image Posted Failed" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];

    }

    [self dismissModalViewControllerAnimated:YES];
};

[_tweetSheet setCompletionHandler:completionHandler]; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T07:04:58.697

我不知道您需要多少集成，或者您是否愿意需要 iOS 6，但在 iOS 6 中，集成 Facebook 和 Twitter 要容易得多。

这是所有代码：

在头文件中：

```
#import "Social/Social.h" 
```

在主文件中：

```
 //Twitter
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {
        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {
                NSLog(@"Cancelled");
            } else {
                NSLog(@"Done!");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler = myBlock;

        [controller setInitialText:@"Status Text"];

        [self presentViewController:controller animated:YES completion:Nil];

    } else {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Sorry" message:@"You can't send a tweet right now. You must be online and signed into at least one Twitter account." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alertView show];
    }

    //Facebook
    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {
                NSLog(@"Cancelled");
            } else {
                NSLog(@"Done!");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler = myBlock;

        [controller setInitialText:@""];

        [self presentViewController:controller animated:YES completion:Nil];

    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook Error" message:@"Either you are not logged into Facebook or your Facebook username and password are incorrect." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
    } 
```

# mysql - MySQL Group Concat 单列 NULL

> ID：13227175
> 
> 赞同：-1
> 
> 时间：2012-11-05T06:43:12.213
> 
> 标签：mysql, group-concat

我有一列，我希望检索一行中的所有匹配项。我也在查询其他数据。目前我正在使用 group_concat。到目前为止，这一直很好。有时此列中可能存在 NULL 值，这会阻止返回任何内容。

我尝试了此处发布的各种其他解决方案，但均未成功。

```
CREATE TABLE table1 (
id mediumint(9) NOT NULL AUTO_INCREMENT,
item_num mediumint(9) NOT NULL,
PRIMARY KEY (id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

CREATE TABLE table2 (
id mediumint(9) NOT NULL AUTO_INCREMENT,
oneid mediumint(9) NOT NULL,
item_desc varchar(16) NOT NULL,
PRIMARY KEY (id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

SELECT item_num, GROUP_CONCAT(item_desc) AS alldesc FROM table1 LEFT JOIN table2 ON table1.id = table2.oneid 
```

所以基本上，可以有几个项目描述可能是 NULL；它们也没有特定的顺序。因此，当出现 NULL 时，我正在寻找一个带有占位符的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:46:01.087

这对你有用吗（当它为NULL时使用描述作为空字符串）？

```
SELECT item_num, 
       REPLACE(GROUP_CONCAT(IFNULL(item_desc,' ')), ', ,', ',') AS alldesc 
FROM table1 
LEFT JOIN table2 
ON table1.id = table2.oneid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:00:53.023

`GROUP BY`您在查询中丢失了。很有可能，如果您有多个`item_num`，它将始终返回一行。

```
SELECT   item_num, GROUP_CONCAT(item_desc) AS alldesc 
FROM     table1 LEFT JOIN table2 
            ON table1.id = table2.oneid
GROUP BY item_num 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:45:55.943

尝试以下查询

```
SELECT item_num, GROUP_CONCAT(ISNULL(item_desc,'')) AS alldesc FROM table1 LEFT JOIN table2 ON table1.id = table2.oneid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T07:01:38.977

```
SELECT item_num, 
REPLACE(
    GROUP_CONCAT(
      IFNULL(item_desc,'*!*') -- replace this with something not in a normal item_desc
      ORDER BY if(item_desc is null, 1, 0) desc
), '*!*,','') AS alldesc 
FROM table1 
LEFT JOIN table2 
ON table1.id = table2.oneid
GROUP BY item_num 
```

# java - 在 play 1.2.5 中使用 @before 注释？

> ID：13227177
> 
> 赞同：0
> 
> 时间：2012-11-05T06:43:16.037
> 
> 标签：java, playframework, playframework-1.x, japid

我希望在将用户发送到登录之前检查会话 - 每个 URL 请求都会导致检查这是否来自有效会话 - 如果不是，则将它们发送到登录页面，否则正常处理。如果用户已经有一个活动会话，我们不会向他们显示登录页面，而是将他们带到预定义的主页。

我在谷歌上搜索了与它相关的东西，知道它会通过`@Before`在控制器中使用注释来完成，但不知道如何`@Before`工作以及如何使用？我正在使用播放 1.2.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T16:37:50.303

您可以通过这种方式使用@Before：

```
@Before
static void addUser() {
    User user = connected();
    if(user != null) {
        renderArgs.put("user", user);
    }
}

static User connected() {
    if(renderArgs.get("user") != null) {
        return renderArgs.get("user", User.class);
    }
    // Find your user from session
    String username = session.get("user");
    if(username != null) {
        return User.find("byUsername", username).first();
    } 
    return null;
}

// ~~render your login if the user is not finded in session

public static void index() {
    if(connected() != null) {
         render();
    }
    login();
} 
```

您可以在 YOUR_PLAY_DIR/samples-and-tests/booking 中找到此示例代码。

正如@emt14 所说，您可以使用 Play 安全模块更轻松地做到这一点。查看 YOUR_PLAY_DIR/samples-and-tests/forum 中的论坛应用示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:28:16.043

Play 安全模块开箱即用。它被大多数应用程序使用，并且还与不同的插件集成。[在此处](http://www.playframework.org/documentation/1.2.5/secure)查看文档。

如果您仍然想自己实现它，您可以使用安全代码作为示例。

否则**，@Before**可以用于您的任何控制器静态方法，并且可以访问所有范围对象，包括会话。

# ios - 在 wikiitude phonegap 应用程序中添加 poi

> ID：13227186
> 
> 赞同：0
> 
> 时间：2012-11-05T06:44:07.850
> 
> 标签：ios, cordova, wikitude

我正在开发一个使用 WikitudeAR Cordova 插件的应用程序，我已经成功实现了该应用程序，并且应用程序在没有 POI 的设备上运行良好。我想在应用程序中添加兴趣点，这样做的程序是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:28:58.573

您可以查看已下载的 Wikitude SDK 包中的示例和教程。特别是教程系列应该给你一个很好的概述，让你了解如何使用 Architect API 在 AR 中创建对象。[这](http://forum.wikitude.com/documentation?p_p_id=2_WAR_knowledgebaseportlet&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-2&p_p_col_count=1&_2_WAR_knowledgebaseportlet_mvcPath=/display/view_article.jsp&_2_WAR_knowledgebaseportlet_resourcePrimKey=35778)是另一个快速入门指南，它向您展示了创建简单的 AR 体验所需的操作。

# html - 表格中的固定分隔线

> ID：13227188
> 
> 赞同：0
> 
> 时间：2012-11-05T06:44:35.020
> 
> 标签：html, html-table, scrollbar, gsp

我的表格有些问题，因为随着文本的增加，我似乎无法修复分隔线。随着文本变长，它会将分隔线移动几个像素。我将发布一些屏幕截图供您查看。

![截屏](../Images/c5f7ffd5f37178ec6c8505cec00b2218.png)

在添加一些文本后：

![截屏](../Images/3785c717a1ee32faef71d42e16eea648.png)

变成这样。那么有没有人可以帮助我解决这个问题？顺便说一句，这是我的代码

```
 <table border="2" style='overflow:scroll' height=50px >
        <th width=100px nowrap>Username</th>
        <th width=100px nowrap>Email</th>
 </table>
         <div style="height: 200px; overflow: scroll; width: 100%;">   
<table border="2" style='overflow:scroll' height=200px >     
   <g:each in="${result}" >
    <tr>
        <td width=100px nowrap style='overflow:hidden'>${it.username}aaaaaaaa</td>
        <td width=100px nowrap style='overflow:hidden'>${it.email}</td>
    </tr>       
        </g:each>
 </table> 
```

我也想删除底部滚动条，但我似乎也无法隐藏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:50:21.460

1) To remove bottom scrollbar change overflow:scroll to `overflow-y:scroll` or `overflow:auto`

2) To fix width issue either put width property of TD in style attribute (recommended)

```
style='overflow:hidden; width:100px' 
```

OR

set `width='100'` only without word px

# c++ - 内存不足错误

> ID：13227191
> 
> 赞同：1
> 
> 时间：2012-11-05T06:45:09.483
> 
> 标签：c++, memory, opencv

在我构建它的某个时间后，我得到了内存不足错误。如果 resultImage != NULL 我尝试不再创建图像，但我仍然遇到这个问题。

我做了很多搜索，但我找不到解决这个问题的方法。谁能帮我解决这个问题？它是一个非常简单的代码，仅从网络摄像头捕获帧并将其转换为颜色。我使用的是 VB2010 C++ express edition 和 opencv2.4

好吧，我也是 opencv 和语言 c 的新手。如果可以，请更正我的错误代码。

```
#include "stdafx.h"

int main(){
    CvCapture* capture = cvCaptureFromCAM(0);
    if(!capture) return -1;

    char key;

    cvNamedWindow("Frame");

    IplImage* frameImage = NULL;
    IplImage* resultImage = NULL;
    IplImage* HSVImage = NULL;

    while(1){
        frameImage = cvQueryFrame(capture);
        if(!frameImage) break;

        if(resultImage == NULL){
            resultImage = cvCreateImage(cvGetSize(frameImage),IPL_DEPTH_8U,3);
            HSVImage = cvCreateImage(cvGetSize(frameImage),IPL_DEPTH_8U,3);
        }
        resultImage = cvCloneImage(frameImage);

        cvCvtColor(resultImage,HSVImage,CV_RGB2HSV);

        cvShowImage("Frame",HSVImage);

        key = cvWaitKey(20);
        if(key == 27) break;
    }

    cvReleaseCapture(&capture);
    cvReleaseImage(&resultImage);
    cvReleaseImage(&HSVImage);
    cvDestroyAllWindows();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:58:46.153

很可能`cvCloneImage()`分配从未被释放的内存。尝试使用这个：

```
IplImage* HSVImage = cvCreateImage(cvGetSize(frameImage),IPL_DEPTH_8U,3);

while(1){
    IplImage* frameImage = cvQueryFrame(capture);
    if(!frameImage) break;

    cvCvtColor(frameImage,HSVImage,CV_RGB2HSV);

    cvShowImage("Frame",HSVImage);

    cvReleaseImage(frameImage);

    key = cvWaitKey(20);
    if(key == 27) break;
} 
```

# ruby-on-rails - human_attribute_name 默认为错误的语言环境

> ID：13227193
> 
> 赞同：0
> 
> 时间：2012-11-05T06:45:20.033
> 
> 标签：ruby-on-rails, heroku, internationalization, yaml, rails-i18n

我正在用 Rails 3.2.8 开发一个本地化的应用程序，部署在 Heroku 上。我创建了一个具有以下结构的本地化 it.yml 文件：

```
it:
  activerecord:
    attributes:
      company:
        name:             "Nome"
        address:          "Indirizzo"
        phone:            "Telefono" 
```

然后我使用：

```
Company.human_attribute_name(:name) 
```

在我的视图中获取本地化标签。默认语言环境是 :it。

当我切换到英语时，在我的本地环境中一切正常，但是一旦我部署到 Heroku，本地化就会出现问题，即使我切换语言环境，human_attribute_name 似乎也会返回意大利语。

我在上面做错了什么，还是遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:56:12.993

找到了原因。在我的生产环境中，我有：

```
config.i18n.fallbacks = true 
```

将其切换为*false*可使应用程序正常运行。

# node.js - sockect.io 创建 http 服务器和不创建 http 的区别

> ID：13227199
> 
> 赞同：1
> 
> 时间：2012-11-05T06:45:31.523
> 
> 标签：node.js, express, websocket, socket.io

我正在尝试使用 nodejs 创建一个新的通知系统，因为我正在使用 socket.io。以下两种编码有什么区别。

编码1：//创建HTTP服务器和Socket连接

```
var app = require('express').createServer() 
var io = require('socket.io').listen(app); 
app.listen(8080); 
```

编码2：//只创建Socket连接

```
var io = require('socket.io').listen(8080); 
```

请建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:26:28.633

没有真正的区别。后者只是前者的捷径。

但是确实存在一个微小的差异：该快捷方式将添加一个默认的 HTTP 请求处理程序（用于非 websocket 请求），该处理程序以`Welcome to socket.io.`.

# ruby-on-rails - 用户模型中的 before_create -- 根据电子邮件 (RAILS) 设置整数

> ID：13227202
> 
> 赞同：0
> 
> 时间：2012-11-05T06:45:39.997
> 
> 标签：ruby-on-rails, ruby, devise, email-validation

我正在尝试根据他们的电子邮件域将用户分配到他们的公司组。我正在使用设计+确认，所以我避免使用正则表达式（不需要验证它是否是有效的电子邮件......），并试图以一种简单的方式做到这一点。所以本质上，它会强制用户 company_id （与该表匹配）在注册时分配，然后如果他们的公司不存在则不允许他们注册。所以这适用于 test@company.com 和 test@recruiting.company.com

在用户模型中

```
before_create :company_placement 
```

...

```
def company_placement
  user_domain = (:email).split('@').last

  while user_domain.split('.').count > 2
    user_domain = user_domain.split('.', 2).last
  end

  if Company.find_by_domain(user_domain) != nil
    (:company_id) = Company.find_by_domain(user_domain).id
  else
    #error out
  end
end 
```

当我逐步在rails控制台中执行此操作时，它似乎有效。但是当我运行时在控制台中，

```
> user = User.create!(name: "test", email: "test@example.com", password: "foobar") 
```

我得到未定义的局部变量或方法'user' for #<'User....

感谢您的帮助，仍在学习rails...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:04:35.313

所以我又玩了一些，并认为我找到了我喜欢的解决方案

**在用户模型中**

```
before_validation :company_placement

...

def company_placement
  user_domain = self.email.split('@').last

  while user_domain.split('.').count > 2
    user_domain = user_domain.split('.', 2).last
  end

  if Company.find_by_domain(user_domain) != nil
    self.company_id = Company.find_by_domain(user_domain).id
  end
end 
```

*创建了设计注册控制器——控制器/**注册*_controller.rb

 ***在新的注册控制器中**

```
class RegistrationsController < Devise::RegistrationsController
  before_filter :verify_company, only: :create

  private

    def verify_company
      build resource #necessary for devise

      user_domain = resource.email.split('@').last

      while user_domain.split('.').count > 2
        user_domain = user_domain.split('.', 2).last
      end

      unless Company.find_by_domain(user_domain) != nil
        flash[:error] = 'Sorry, your company does not exist yet'
        redirect_to root_path
      end
    end
end 
```

**路线.rb**

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

所以我确信有一个更优雅的解决方案，但这对我有用。处理控制器中的错误/闪烁，然后如果公司存在，则用户通过模型自动分配给公司。*

# widget - 按名称动态添加小部件

> ID：13227210
> 
> 赞同：1
> 
> 时间：2012-11-05T06:46:12.023
> 
> 标签：widget, dojo

如果我有一堆菜单链接，每个链接都包含一个要加载到中心内容窗格中的小部件名称，并且每个链接都有一个自定义小部件怎么办？我可以只将一次点击事件绑定到所有菜单链接，然后有点 EVAL 小部件名称并加载它吗？或者我是否必须将每个小部件名称加载到相应的菜单链接点击事件中？

# ios5 - 应用程序试图在 iOS 5 中以模态方式呈现活动控制器错误

> ID：13227211
> 
> 赞同：1
> 
> 时间：2012-11-05T06:46:13.213
> 
> 标签：ios5, presentmodalviewcontroller

我发现了一些关于这个问题的其他帖子，但这些建议都没有真正帮助我。我知道在新的 iOS 中，presentModalViewController 已经过时，应该用我已经做过的 presentViewController 替换。一些帖子还建议设置委托，我也这样做了。所以让我解释一下我的应用程序在做什么，希望有人可以帮助我。:)

我认为我的应用程序一直运行良好，直到 iOS 5。

我有一个选项卡式控件。其中一个选项卡是我使用 UISearchDisplayController 的搜索。因此，例如，在文本区域中，键入“音乐”，然后在下面的表格视图中将显示与搜索匹配的条目。然后用户将单击一个条目，然后我将使用 presentViewController（原为 presentModalViewController）呈现另一个视图（显示有关该条目的详细信息）。这一直有效，直到最近......它崩溃了！我已经尝试了几件事，但都没有奏效，因为其他帖子中提到的其他一些场景是不同的......

我记录了异常，它说的完全一样：“应用程序试图以模态方式呈现一个活动控制器。”

我测试的方式：我启动应用程序。单击“搜索”选项卡。然后在文本区域中输入一些内容。匹配条目的列表出现在表中。我点击一个条目。此时它应该呈现另一个视图，但它崩溃了，这是正在记录的错误。

在 didSelectRowAtIndexPath:(NSIndexPath *)indexPath {} 函数中，我创建了详细视图：

```
controller = [[SlaveReportPageViewController alloc] initWithNibName:@"SlaveReportPageViewController" bundle:nil]; 
```

然后我打电话：

[self presentViewController:controller animated:NO completion:nil];

启动它。

我很感激任何建议。谢谢你。

# python - app.yaml 中的这个东西是什么意思

> ID：13227212
> 
> 赞同：0
> 
> 时间：2012-11-05T06:46:15.113
> 
> 标签：python, google-app-engine, oauth-2.0, yaml

这是 app.yaml 代码

```
application: hellodashboard
version: 1
runtime: python
api_version: 1

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /oauth2callback
  script: oauth2client/appengine.py

- url: .*
  script: main.py 
```

我想知道什么是

```
 - url: /oauth2callback
  script: oauth2client/appengine.py 
```

意思是？我知道第二行表明在 oauth2client 目录中有一个名为 appengine.py 的脚本。但是**url:/oauth2callback**表示什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:52:55.100

这意味着文件中有一个处理程序`oauth2client/appengine.py`来处理对url的请求`/oauth2callback`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:53:11.770

后面的部分`-url:`表示您的应用程序将如何处理对该特定 URL 的调用。使用您的示例（针对 OAuth2），当您的应用程序接收到 形式的请求时，它`/oauth2callback`不会查看内部`main.py`以找出如何处理请求，而是使用在`oauth2client/appengine.py`

# c# - Linq to XML 没有获取所有节点

> ID：13227217
> 
> 赞同：2
> 
> 时间：2012-11-05T06:46:58.547
> 
> 标签：c#, xml, linq, linq-to-xml

```
<?xml version="1.0" encoding="utf-8"?>
<OrdersReport Date="2012-08-01">
<Returns>
      <Amount>
        <OrderId>2</OrderId>
        <OrderId>3</OrderId>
        <OrderId>21</OrderId>
        <OrderId>23</OrderId>
      </Amount>
    </Returns>
</OrdersReport> 
```

这是我试图获取 OrderId 的代码：

```
 var amount = doc.Descendants("Amount")                         
  .Select(y => new
  {
   OrderId = (int)y.Element("OrderId")
   });
foreach (var r in amount)
  {
   Console.WriteLine(r.OrderId);
  }

 Console.Read(); 
```

我的输出是：

```
2
2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:55:23.273

你可以做：

```
var orderIds = doc.Descendants("OrderId");
foreach (var orderId in orderIds)
{
    Console.WriteLine(orderId.Value);
} 
```

或者，在这种情况下将是相同的：

```
var orders = doc.Descendants("Amount")
                .Descendants("OrderId"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:02:24.310

```
var orderIds = doc.Descendants("OrderId")
                  .Select(e => e.Value)
                  .ToArray(); 
```

结果将是：

```
[2, 3, 21, 23] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:21:10.627

仅供参考

[**XContainer.Descendants 方法 (XName)**](http://msdn.microsoft.com/en-us/library/bb353813.aspx) - 按文档顺序返回此文档或元素的后代元素的过滤集合。只有具有匹配 XName 的元素才会包含在集合中。

所以在你的代码中

```
var amount = doc.Descendants("Amount")                         
  .Select(y => new
  {
   OrderId = (int)y.Element("OrderId")
   }); 
```

这会给你元素`Amount`，当你写的时候，你`y.Element("OrderId")`会返回它孩子的第一个元素。

因此，要获取所有 OrderID 元素，您需要写下`doc.Descendants("OrderId")`或`documentRoot.Descendants("Amount").Descendants()`

`Descendants`- 并不意味着它返回您在 desendant 方法中编写的元素名称的子元素。

* * *

最后以适当的方式为我提供以下解决方案

```
XElement documentRoot  = XElement.Parse (@"<OrdersReport Date='2012-08-01'>
                                                  <Returns>
                                                      <Amount>
                                                             <OrderId>21</OrderId>
                                                             <OrderId>3</OrderId>
                                                        </Amount>
                                                </Returns>
                                                </OrdersReport>");

           var orderids = from order in
                             documentRoot.Descendants("Amount").Descendants()
                          select new
                          {
                              OrderId = order.Value
                          }; 
```

# ios-simulator - AVAudioPlayer 在 ipad 模拟器上崩溃，但在 iPhone 模拟器上工作正常

> ID：13227221
> 
> 赞同：1
> 
> 时间：2012-11-05T06:47:13.480
> 
> 标签：ios-simulator, avaudioplayer

这很奇怪，我的应用在 iPhone（模拟器和设备）上运行良好，但在 ipad 模拟器上崩溃。错误总是指向 prepareToPlay 方法。当我取消该方法时，它会指向播放方法。调试区域不显示任何错误或警告。我唯一的线索是方法树，但我无法找到解决方案。顺便说一下音频文件是mp3

任何帮助将不胜感激。

_ ***viewDidLoad* __**

NSError *error = nil; [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&error]; //AudioSessionInitialize(NULL, NULL, NULL, NULL);

```
timerSong = [[AVAudioPlayer alloc] initWithContentsOfURL:alarmSong error:&error];

[self loadSongTitles];

//Make sure the system follows our playback status
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
//infinite loops
audio1.numberOfLoops = -1;
audio2.numberOfLoops = -1;
timerSong.numberOfLoops = -1;

//set volume according to volume label
[audio1 setVolume:0.5];
[audio2 setVolume:0.5];
//strat playing track(s)
[audio1 play];
[audio2 play]; 
```

***加载歌曲标题***

```
for (NSNumber *number in passingArray) {
    //set the correct titles for each audio
    if (number == [NSNumber numberWithInt:10]) {
        firstSong = title;
        NSURL *audioFileLocationURL = [[NSBundle mainBundle] URLForResource:[backgroundTracks objectAtIndex:firstSong] withExtension:@"mp3"];
        audio1 = [[AVAudioPlayer alloc] initWithContentsOfURL:audioFileLocationURL error:&error];
        [audio1 setDelegate:self]; //setting delagate to restart after interruptions
        [audio1 prepareToPlay];
        audio1Label.text = [titles objectAtIndex:title];
        //when two songs selected make label empty
        onlyOneAudioLabel.text = @"";
    } 
```

更新：我已经让它工作了，只需使用 WAV 文件而不是 mp3 就可以了。不知道为什么。希望这可以帮助某人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:41:51.150

Found a permanent solution. You can use mp3's for both iPhone and iPad but you have to be very careful with the bit rates. I just set both bit rates as "normal" (~128kbits/s) and it works. Hope this helps.

# android - 从非活动类发送通知

> ID：13227226
> 
> 赞同：0
> 
> 时间：2012-11-05T06:47:44.177
> 
> 标签：android, notifications

我正在使用一项服务，该服务会在后端发生特定情况时向用户设备发出通知。但是现在这一次在非活动类中登录（一段成功的代码运行）。在这种情况下，我如何从非活动类发送通知？？？

代码：

```
public XMPPConnection checkXMPPConnection(String userName,String password) {

        connection = new XMPPConnection(connConfig);

        try {
            connection.connect();
            System.out.println("Logginnnngggg innn");

            connection.login(userName, password);

            PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
            final PacketCollector collector = connection.createPacketCollector(filter);
            connection.addPacketListener(new PacketListener() {

                @Override
                public void processPacket(Packet packet) {
                    // TODO Auto-generated method stub
                    //notification(packet.getFrom());
                    packet = collector.nextResult();
                    Message message = (Message)packet;
                    notification(""+message.getBody(), 0);

                    System.out.println("Messageeeee isisssssss......."+message.getBody());               

                }

            }, filter); 
```

通知代码：

```
public void notification(CharSequence message, int notificationID) {

        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager)UserMenuActivity.context.getSystemService(ns);
        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = message;
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);

        CharSequence contentTitle = "ABC";
        CharSequence contentText = message;

        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.flags |= Notification.FLAG_SHOW_LIGHTS;
        notification.ledARGB = 0xff00ff00;
        notification.ledOnMS = 300;
        notification.ledOffMS = 1000;
        mNotificationManager.notify(notificationID, notification);

    } 
```

以上两种方法都属于非活动类。

此方法在非活动类中。我只想在触发上述代码时发送通知现在告诉我同样的情况我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:10:08.360

可能有几种选择：

*   向您的`checkXMPP`方法添加参数：参数将是一个上下文。这通常是最简单的，但会导致大量代码与上下文相关联，因此耦合度更高。实际上，在这里您需要为数据包侦听器提供上下文。

*   您还可以启动自己的[IntentService](http://developer.android.com/reference/android/app/IntentService.html)，它将通过 NotificationManager 更新通知。使用 Intent 启动服务。这看起来很困难，但实际上并非如此。

这是一个例子：[http ://androidhotel.wordpress.com/2011/12/14/a-simple-notification-system-with-the-intentservice-part-i/](http://androidhotel.wordpress.com/2011/12/14/a-simple-notification-system-with-the-intentservice-part-i/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T07:34:55.943

这是我是如何做到的，创建一个这样的`NotificationProvider.java`类

```
public class NotificationProvider {

public NotificationProvider() {
}

public void setNotification(Context context, String notificationTitle, String notificationMessage, int notificationRequestCode){
    NotificationCompat.Builder builder =
            new NotificationCompat.Builder(context)
                    .setSmallIcon(R.drawable.icon_mother_and_child_care)
                    .setContentTitle(notificationTitle)
                    .setColor(101)
                    .setContentText(notificationMessage);

    Intent intent = new Intent(context, DashboardActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, notificationRequestCode, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    builder.setContentIntent(contentIntent);

    NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    manager.notify(0, builder.build());
} 
```

}

并像这样调用`setNotification()`函数`activity.class`

```
public class MainActivity extends AppCompatActivity {

private NotificationProvider notificationProvider;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    notificationProvider = new NotificationProvider();
    notificationProvider.setNotification(this, "Title", "Message", 1);
} 
```

# mongodb - mongodb 与 Bindata UUID 分片键不分片

> ID：13227228
> 
> 赞同：0
> 
> 时间：2012-11-05T06:47:51.380
> 
> 标签：mongodb, sharding, bson

我的典型文件是：

```
{ "_id" : ObjectId("5093c2fbf6c07ab5a3ac779b"), "msid" : BinData(3,"3xGNFeKqXR4Zx0Q+FgCviA=="), "mt" : ISODate("2010-01-01T03:41:07Z")} 
```

我有2个碎片。“msid”是文档推荐的用于空间效率的二进制形式的 UUID。但是当 msid 是字符串分片时，它正在工作。现在只有一个分片被填充。

```
mongos> sh.status()
--- Sharding Status --- 
  sharding version: { "_id" : 1, "version" : 3 }
  shards:
    {  "_id" : "shard0000",  "host" : "rs1/vserver-dev-2:37018,vserver-dev-3:37018" }
    {  "_id" : "shard0001",  "host" : "rs2/vserver-dev-2:47018,vserver-dev-3:47018" }
  databases:
    {  "_id" : "admin",  "partitioned" : false,  "primary" : "config" }
    {  "_id" : "test",  "partitioned" : false,  "primary" : "shard0000" }
    {  "_id" : "ifms",  "partitioned" : true,  "primary" : "shard0000" }
        ifms.measurement_event chunks:
                shard0000   1
            { "msid" : { $minKey : 1 } } -->> { "msid" : { $maxKey : 1 } } on : shard0000 Timestamp(1000, 0) 
    {  "_id" : "mongo",  "partitioned" : false,  "primary" : "shard0001" } 
```

最小/最大键似乎有问题。

和块：

```
mongos> db.chunks.find().pretty()
{
    "_id" : "ifms.measurement_event-msid_MinKey",
    "lastmod" : Timestamp(1000, 0),
    "lastmodEpoch" : ObjectId("5093afb369b03db47a1311eb"),
    "ns" : "ifms.measurement_event",
    "min" : {
        "msid" : { $minKey : 1 }
    },
    "max" : {
        "msid" : { $maxKey : 1 }
    },
    "shard" : "shard0000"
} 
```

数据库现在有大约 1 亿个文档，每个文档约 180 字节。

# javascript - 如何在javascript中将异步调用转换为同步？

> ID：13227231
> 
> 赞同：2
> 
> 时间：2012-11-05T06:47:57.277
> 
> 标签：javascript, node.js, asynchronous

我在客户端使用javascript，在服务器端使用node.js，实际上我试图对输入字段进行远程验证，结果必须是布尔值，它应该基于服务器调用，我的代码如下，

```
 jQuery.validator.addMethod("remoteValidation", function(value, element) {

    var accountName = $("#accountName").val();
    var accountType = $("#accountType").val();
    var valid = this.Validation(accountType,accountName);
   //returning undefined becoz return statement executing before server side execution
    return valid;

}, "Entered email or username already exists");

 this.validation = function(accountType,accountName,cb){
    var valid =null;
  ss.rpc('AccountsManagement.userNameChecker',accountType,accountName,function(res) {
            // res will return boolean
        valid = res;
    });
            //valid is null becoz this line is executing before valid = res line.
    return valid;
}; 
```

我的服务器端代码：

```
 services.imAccountsService.getAllImAccounts(accountType,accountName,
   function(err,result){
    if(err){
    return;
    }
    if(result == null){
       res(true);
    }
    else{
       res(false);
    }

   }); 
```

我的问题是异步执行，在这种情况下如何使代码同步..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:50:45.593

在 jquery 验证方法中添加了功能。

```
 if(param.type === "rpc"){
            var args = param.data.remoteArgs();
            ss.rpc(param.url, args, function(response) {
                validator.settings.messages[element.name].remote = previous.originalMessage;
                var valid = response === true;
                if ( valid ) {
                    var submitted = validator.formSubmitted;
                    validator.prepareElement(element);
                    validator.formSubmitted = submitted;
                    validator.successList.push(element);
                    validator.showErrors();
                } else {
                    var errors = {};
                    var message = response || validator.defaultMessage( element, "remote" );
                    errors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;
                    validator.showErrors(errors);
                }
                previous.valid = valid;
                validator.stopRequest(element, valid);
            });
        } 
```

它工作正常......谢谢大家......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:08:19.977

您将不得不等到**res**的值可用。看看下面的代码是否有效。

```
 jQuery.validator.addMethod("remoteValidation", function(value, element) {

        var accountName = $("#accountName").val();
        var accountType = $("#accountType").val();
        var valid = this.Validation(accountType,accountName);
       //returning undefined becoz return statement executing before server side execution
        return valid;

    }, "Entered email or username already exists");

     this.validation = function(accountType,accountName,cb){
        var valid =null;
      ss.rpc('AccountsManagement.userNameChecker',accountType,accountName,function(res) {
                // res will return boolean

            while(res <> null)
            {
               window.setInterval(function(){waitFunc()}, 1000);
            }
            valid = res;
        });
                //valid is null becoz this line is executing before valid = res line.
        return valid;
    };

function waitFunc()
{
//do nothing
} 
```

# c# - 将带有点（。）的参数传递给 javascript 函数

> ID：13227241
> 
> 赞同：1
> 
> 时间：2012-11-05T06:48:40.053
> 
> 标签：c#, javascript, datagridview

我正在尝试将文件名作为参数从 gridview Row (C#) 传递给 JS 函数：

```
onclick='<%# Eval("ImageName", "return loadImage({0})") %>' 
```

呈现为：

```
onclick="return loadImage(Happy.jpg)" 
```

和错误：

```
Uncaught ReferenceError: Happy is not defined 
```

当我***手动***添加单引号（''）时，它工作正常，就像

```
onclick="return loadImage('Happy.jpg')" 
```

**现在如何以编程方式添加引号，或者如何使用 dot(.) 传递 JS 参数？**

('{0}') 不起作用，错误：“服务器标记格式不正确。”

===============**解决方案**==================

好的，这样解决了：

添加`onclick="javascript:loadImage(this.src);"`

```
 <asp:Image ID="Image1" runat="server" ImageUrl='<%# "~/UploadedImages/"+ Eval("ImageName") %>' Height="43px" Width="55px" onclick="javascript:loadImage(this.src);"   CssClass="dlImage" /> 
```

在 js 函数中得到完整路径，即

> “http://localhost:52636/ChuttiTime_Alka/UploadedImages/Happy.jpg”

切片它以获取文件名

```
function loadImage(imageName) {
 var bigImage = document.getElementById("ctl00_ContentPlaceHolder1_FEPropertyImageControl1_propertyBigImage")
 var filename = imageName.replace(/^.*[\\\/]/, '')
 bigImage.src='../UploadedImages/'+filename;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:50:49.410

好的，这样解决了：

添加`onclick="javascript:loadImage(this.src);"`

```
 <asp:Image ID="Image1" runat="server" ImageUrl='<%# "~/UploadedImages/"+ Eval("ImageName") %>' Height="43px" Width="55px" onclick="javascript:loadImage(this.src);"   CssClass="dlImage" /> 
```

在 js 函数中得到完整路径，即

> “http://localhost:52636/ChuttiTime_Alka/UploadedImages/Happy.jpg”

切片它以获取文件名

```
function loadImage(imageName) {
 var bigImage = document.getElementById("ctl00_ContentPlaceHolder1_FEPropertyImageControl1_propertyBigImage")
 var filename = imageName.replace(/^.*[\\\/]/, '')
 bigImage.src='../UploadedImages/'+filename;
} 
```

# php - 如何将值与 JQuery 一起从 url 中的单独表单传递？

> ID：13227242
> 
> 赞同：0
> 
> 时间：2012-11-05T06:48:42.617
> 
> 标签：php, jquery, jquery-jtable

我在 php 页面中有一个单独的表单，它也有 Jquery jtable 插件来显示来自 Mysql 数据库的数据。该表单有一个下拉列表框。我必须将这些下拉列表中的值与 url 中的 Jtable 操作列表一起传递，以列出与从下拉列表中选择的条件相关的表。

```
 <div id="machinelog">
    <form id="intermediate" name="inputMachine" method="post">
    <select id="selectMachine" name="selectMachine"> 
        <option value="M1" >Machine 1</option>
        <option value="M2" >Machine 2</option>
        <option value="M3" >Machine 3</option>
    </select>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<input id="Button" class="button" type="submit" value="Submit" />
</form> 
```

如果我从下拉列表中选择机器 1，我必须使 jtable 仅显示机器为机器 1 的行。

我必须访问 Jtable 容器内的表单值，以便我可以在 url 中传递这些值。

```
 <div id="MachineLogTableContainer" style="width: 1000px; margin-left: 254px;margin-top: -440px;position: static;"></div>
    <script type="text/javascript">

        $(document).ready(function () {
            //var s=$('#selectMachine').val();
            //alert(s);
            var machineLogMessages = {
                    addNewRecord: '+ New Machine Log'
                };

            //Prepare jTable
            $('#MachineLogTableContainer').jtable({
                messages:machineLogMessages,
                title: 'Machine Log',
                paging: true, //Enable paging
                pageSize: 10,
                actions: {
                    listAction: 'MachineLogActions.php?action=list',
                    createAction: 'MachineLogActions.php?action=create',
                    updateAction: 'MachineLogActions.php?action=update',
                    deleteAction: 'MachineLogActions.php?action=delete'
                },
                fields: {
                    event_id: {
                        key: true,
                        edit: false,
                        title: 'Event Id',
                        width: '5.8693%',
                        create:false,
                        edit:false,
                        list: false
                    },
                    event_type: {
                        title: 'Event Type',
                        width: '9%',
                        options: 'MachineLogActions.php?action=list_type'
                    },
                    machine: {
                        title: 'Machine',
                        width: '16%',
                        options: 'MachineLogActions.php?action=list_name'
                    },
                    user: {
                        title: 'User',
                        width: '11%',
                        options: 'MachineLogActions.php?action=list_user'
                    },
                    timestamp: {
                        title: 'Timestamp',
                        width: '15%'
                    },
                    shift: {
                        title: 'Shift',
                        width: '9%',
                        options: 'MachineLogActions.php?action=list_shift'
                    },
                    reason: {
                        title: 'Reason',
                        width: '25%',
                        options: 'MachineLogActions.php?action=list_reason'
                    },
                    count: {
                        title: 'Count',
                        width: '3%'
                    }
                }
            });

            //Load person list from server
            $('#MachineLogTableContainer').jtable('load');

        });

    </script> 
```

一旦我按下提交按钮，我的列表 URL 也应该包含机器值。

```
 listAction: 'MachineLogActions.php?action=list&MachineId=',+machineId 
```

在 Jquery 中是否可能。

我试过这样

```
 var s=$('#selectMachine').val();
alert(s); 
```

我在 chrome 中收到以下错误

```
 Uncaught SyntaxError: Unexpected token , 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:51:51.937

试试去掉逗号？

```
listAction: 'MachineLogActions.php?action=list&MachineId='+machineId 
```

代替

```
listAction: 'MachineLogActions.php?action=list&MachineId=',+machineId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T05:05:57.457

这东西解决了我的过滤问题。

```
 select = document.getElementById("selectShift");
            select.onchange = function(){
                //alert(this.value); 
                //alert(this.innerHTML); 
            var options = this.getElementsByTagName("option");
            optionHTML = options[this.selectedIndex].innerHTML;  

            $('#ShiftLogTableContainer').jtable('load', {
                ShiftId: optionHTML
                });
            }; 
```

你应该添加它而不是

```
 $('#MachineLogTableContainer').jtable('load'); 
```

# war - Apache Camel在war文件中的资源路径

> ID：13227248
> 
> 赞同：0
> 
> 时间：2012-11-05T06:49:11.400
> 
> 标签：war, apache-camel

我试图在 war 文件中部署一个 Apache Camel 应用程序。Webapp结构如下：

```
webapp
..WEB-INF
...folder1
....event.xsl 
```

下面的代码不起作用，我收到错误“在类路径中找不到资源”

```
 <route>
        <from uri="seda:trade2confirmation" />
        <to uri="xslt:/WEB-INF/folder1/event.xsl" />
        <to uri="log:output?showAll=true" />
    </route> 
```

访问 event.xsl 文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:14:53.760

你使用什么网络容器？什么骆驼版本？

你有没有试过没有前导/斜线。

```
<to uri="xslt:WEB-INF/folder1/event.xsl" /> 
```

# c# - 为什么 \n 在 Log.Info 方法中不起作用？

> ID：13227249
> 
> 赞同：4
> 
> 时间：2012-11-05T06:49:17.670
> 
> 标签：c#, .net, log4net, string-formatting

Log.Info 中 String.Format 方法中的 \n 将“\n”打印为文本，而不是开始新行；为什么它不起作用？任何的想法？我怎样才能让它工作？

```
Log.Info(String.Format("Some arguments : \n Since : {0}\nBefore: {1}\nLog file name : {2}", since, before,logFileName)); 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T06:52:50.930

在 Windows 上，换行符实际上是`\r\n`. 尝试`Environment.NewLine`：

```
Log.Info(String.Format("Some arguments : "+Environment.NewLine+" Since : {0}"+Environment.NewLine+"Before: {1}"+Environment.NewLine+"Log file name : {2}", since, before,logFileName)); 
```

# html5-audio - wav 字符串到 Html5 blob

> ID：13227250
> 
> 赞同：3
> 
> 时间：2012-11-05T06:49:19.590
> 
> 标签：html5-audio

是否可以将 wav 字符串转换为 html5 blob？

（我不是在寻找跨浏览器兼容的解决方案，我只需要它在 Chrome 中工作）。

```
wavString = "RIFF  WAVEfmt D¬Xdata ¦®µ¼ÃÊÐÖÜáæêïòõøúüýþþþþüûøöóïëçâÜ×ÑËÄ½¶¯§ xph`YQJC<5/~)~#~~~~~~  ~~~~~~~~~~~~~~~~~~!~'~,~3~9~@~GNV^emu}¥¬´»ÂÈÏÕÛàåéîñõøúüýþþþþýûùöóðìèãÞØÒÌÅ¿¸°©¡zrjb~Z~S~K~D~=~6~0~*~$}}}}}
}.....a lot of ugly chars....."; 
```

我可以将 wavString 转换为 html5 音频对象，如果播放声音，我可以听到 wav 声音：

```
var wave = new Audio('data:audio/wav;base64,' + btoa(wavString));
wave.controls = true;
document.body.appendChild(wave); 
```

但是我无法从中创建一个 wav blob，这是我尝试过的没有运气的方法：（我尝试了 type 和 blob vars 的所有组合）：

```
var type = "audio/x-wav";
var type = "application/octet-stream";

var blob = new Blob([btoa(wavString)], {type: type});
var blob = new Blob(['data:audio/wav;base64,' + btoa(wavString)], {type: type});
var blob = new Blob([wavString], {type: type}); 
```

这些都不起作用：它们创建 blob，但我无法将它们保存到服务器并将它们作为 wav 文件收听。我想要做的是创建一个可以作为 wav 文件导出到服务器的 blob。实际上我可以将有效的 wav blob 导出到服务器，问题实际上是将此 wavString 转换为有效的 wav blob。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T09:00:45.583

创建 ArrayBuffer 可能有效。

```
var wavString = "RIFF  WAVEfmt.....a lot of ugly chars.....";
var len = wavString.length;
var buf = new ArrayBuffer(len);
var view = new Uint8Array(buf);
for (var i = 0; i < len; i++) {
  view[i] = wavString.charCodeAt(i) & 0xff;
}
var blob = new Blob([view], {type: "audio/x-wav"}); 
```

# c# - 如何在 C# 中固定十进制值中的点

> ID：13227251
> 
> 赞同：0
> 
> 时间：2012-11-05T06:49:19.603
> 
> 标签：c#, vb.net

我在下面的 VB.net 中有代码：

```
me.Index = Format(Convert.ToDouble(g.Trim()), "##.##") 
```

结果：120.00

我如何在 C# 中做同样的事情。我不在 C# 中使用格式函数。我只希望结果不会在点之后放置超过两个值。我的意思是如果我发送值 120.120000 那么结果将是 12.12

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:50:56.740

目前尚不清楚“我不在 C# 中使用格式函数”是什么意思，但您当然*可以*使用`string.Format`. 但是，使用`double.ToString`可能会更简单：

```
Index = Convert.ToDouble(g.Trim()).ToString("0.##"); 
```

（我已更改前导`##`以`0`确保*始终*有前导数字，因此您不会得到例如“.5”。显然，如果您*真的*希望前导数字是可选的，请将其更改为`"#.##"`. 我不看到使用`##`作为前缀的好处。）

然而：

*   这将使用当前区域性的小数分隔符；那是你想要的，还是你*一直*想使用的`.`？
*   如果数字的十进制表示很重要，您可能根本不想使用`double`。你确定你不应该使用`decimal`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:55:58.947

你可以这样做，

```
decimal.Round(yourValue, 2, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:56:56.137

要么你用这个

```
var value = 2.346;
var str = value.ToString("0.00"); 
```

或者

`decimal.Round(yourValue, 2, MidpointRounding.AwayFromZero);` //就像在 msdn 站点中一样，它将十进制值四舍五入到指定的精度。

或者像这样使用 Round 函数

```
decimal a = 1.994444M;

Math.Round(a, 2); 
```

# c# - 使用 SaveFileDialog 选择一个文件夹

> ID：13227255
> 
> 赞同：1
> 
> 时间：2012-11-05T06:49:36.757
> 
> 标签：c#, winforms

大家。我只是很困惑，我怎么能用 SaveFileDialog 选择一个文件夹。有没有办法自定义 SaveFileDialog 以允许选择一个文件夹？期待您的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T06:51:57.063

使用[FolderBrowserDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx) 而不是 SaveFileDialog。

> 提示用户选择文件夹。

来自 MSDN 的示例。

```
DialogResult result = folderBrowserDialog1.ShowDialog();
if( result == DialogResult.OK )
{
    string folderName = folderBrowserDialog1.SelectedPath;
    //........
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:51:54.550

而不是使用[`SaveFileDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.aspx)考虑使用[`FolderBrowserDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)选择文件夹。

这将允许您选择文件夹路径，否则选择带有 的文件夹[`SaveFileDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.aspx)充其量是细微的，不推荐使用。

# cobol - Cobol 中的除法动词

> ID：13227256
> 
> 赞同：2
> 
> 时间：2012-11-05T06:49:41.870
> 
> 标签：cobol

我在 COBOL 中的 DIVIDE 动词的其余部分有这个奇怪的输出。目标只是将 213.20 除以 10，然后将商保存到另一个变量以及余数。我期望其余部分的值是 3.2，但它只给了我 0。请赐教。

请参阅下面的代码片段：

```
WORKING-STORAGE SECTION.
    01 VAR-A  PIC S9(09)V99 COMP-3 VALUE 213.20
    01 VAR-B  PIC S9(09)V99 COMP-3 VALUE 10.00
    01 VAR-C  PIC S9(09)V99 COMP-3 VALUE 0.
    01 VAR-D  PIC S9V99     COMP-3 VALUE 0\.  

PROCEDURE DIVISION.
MAIN-PARAGRAPH.
    DIVIDE VAR-A
      BY VAR-B
      GIVING VAR-C
      REMAINDER VAR-D.

    DISPLAY 'VAR-A: 'VAR-A.
    DISPLAY 'VAR-B: 'VAR-B.
    DISPLAY 'VAR-C: 'VAR-C.
    DISPLAY 'VAR-D: 'VAR-D.
********************************************
RESULTS:

VAR-A: 00000021320
VAR-B: 00000001000
VAR-C: 00000002132
VAR-D: 000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T16:50:00.623

问题是您已经`VAR-C`用小数点后 2 位定义了接收变量。我认为您想要整数除法，因此请尝试将其定义如下：

```
01 VAR-C    PIC S9(09) COMP-3. 
```

现在`VAR-C`只能保存整数（例如 21），余数 ( `VAR-D`) 将包含残差（例如 3.20）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:48:40.073

这可能会有所帮助，有人遇到了类似的问题：

[http://www.ibmmainframes.com/about44677.html](http://www.ibmmainframes.com/about44677.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T03:53:19.600

如果您的余数 PIC 与除数 PIC 不匹配，我过去曾看到过奇怪的结果。将剩余部分更改为 PIC S9(9)V99 并发布结果。

# php - Wordpress 如何检查特定类别中有多少帖子可用？

> ID：13227258
> 
> 赞同：0
> 
> 时间：2012-11-05T06:49:48.000
> 
> 标签：php, wordpress

使用 cat id 如何检查该类别中有多少帖子可用，如果帖子不可用则返回 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:00:47.147

使用[get_term_by()](http://codex.wordpress.org/Function_Reference/get_term_by)

```
$result = get_term_by( 'id', 0, 'category' );
echo count( $result ); 
```

将 替换为`0`您所需的类别 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:52:09.123

it may help you check it..

```
<?php
$postsInCat = get_term_by($field, $value, $taxonomy, $output, $filter );
$postsInCat = $postsInCat->count;
echo $postsInCat;
?> 
```

# android - 从活动或片段调用设置屏幕

> ID：13227259
> 
> 赞同：0
> 
> 时间：2012-11-05T06:49:50.873
> 
> 标签：android, android-activity, fragment

我正在开发一个 android 应用程序，我必须从我的活动中调用 android 的无线设置活动。我正在使用此代码

```
Intent i = new Intent();
final ComponentName cn = new ComponentName("com.android.settings",
                                        "com.android.settings.WirelessSettings");
i.setComponent(cn);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i); 
```

这段代码在 android 2.3.7 上运行良好。但是当我在 android 4.0.1 (ICS) 上运行它时，
它给了我以下错误。

```
android.content.ActivityNotFoundException: Unable to find explicit activity class {com.android.settings/com.android.settings.WirelessSettings}; have you declared this activity in your AndroidManifest.xml? 
```

我检查了 android 的源代码，发现在 android 2.3.7 WirelessSettings 是一个活动，而在 android 4.0.1 无线设置更改为片段。看看这2张图片。 ![在此处输入图像描述](../Images/303a9227072a22bda05cc82726475abc.png)

![在此处输入图像描述](../Images/dd70f9d2ae55bda499b1160335b525aa.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:58:24.217

您可以使用以下代码打开无线设置屏幕

```
Intent intent = new Intent(Settings.ACTION_WIRELESS_SETTINGS);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

# iphone - Setting up padding for websites in mobile devices

> ID：13227267
> 
> 赞同：6
> 
> 时间：2012-11-05T06:50:26.657
> 
> 标签：iphone, css, mobile, padding, media-queries

I had finished this website a while ago but something happened to it and I've now spent all day fixing it and getting it back from scratch as my backup wasn't correctly done. I don't quite understand what it's doing as I've done this technique on many other websites with no troubles, maybe I've looked at this website too long?

[Here is the website](http://ambergoodwin.com/barnett). I'm wanting to put some space on the left and right hand side, however I dont just have one container as I was needing the dark grey bar at 100% of the screen and always under the banner no matter where it was. So there are 4 "containing" divs that I want to have the space. I've placed soem CSS3 media queries in but now I'm getting a gap to the right. I was thinking it was because my background mages are going all the way across but they set at 100% so I'm just not understanding whats going on. It's somethign simple, I'm not seeing it right now..

This is what I have for the media queries

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {

#header, #banner, #main, #footer-widget-area { padding: 0 2em 0 2em; }

} 
```

This is what t looks like on my iPhone

![enter image description here](../Images/ef09c86ec48e357cc403579f341608b7.png)

Any advice is helpful and appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:57:22.617

查看`viewport`元标记。如果您要将代码添加到页面的`<head>`：

```
<meta name="viewport" content="width=1100"> 
```

这将迫使 iPhone 的视口呈现 1100 像素宽。iPhone 上的默认视口是 980 像素，因此您的页面暗示 100% 宽度是 980 像素，而不是真实内容的宽度。

视口可能很棘手，这里有一些关于它的更多信息：

[用于非响应式设计的视口元标记](http://webdesignerwall.com/tutorials/viewport-meta-tag-for-non-responsive-design)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:01:55.037

**这个怎么样：**

```
#wrapper { padding:0 2em; margin:0 auto; overflow:hidden; height:auto; }
#header, #content, #stuff, #etc { margin:0;padding:0; }
#inside stuff { whatever else; } 
```

`#wrapper`把你最外层的东西包起来`DIV`（紧跟在`<body>`前面，紧跟在前面`</body>`）。

除非您的计划是将某些元素放置在 2em 填充区域之外，否则我无法想象为什么这不是解决您的问题的更有效的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:07:17.040

我检查了实时站点，看起来问题只是右侧只有 3 像素的额外空间。我还注意到导航菜单中有一个换行符。看起来将智能手机媒体查询更改为以下内容将解决最后一个问题：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {

#header, #main, #footer-widget-area { padding: 0 1em 0 1em; }
#banner { padding: 0; }
#header-right { width: auto; }
#access .menu-header { width: auto; }

h4 { font-size: 1.4em; line-height: 1em; }
} 
```

# php - 为什么以下代码返回空白页但仍上传照片

> ID：13227278
> 
> 赞同：0
> 
> 时间：2012-11-05T06:51:08.000
> 
> 标签：php, html, forms

这是我的页面。我的问题是为什么当我上传图片时表单返回空白页。在我添加最后一个 switch 语句之前它工作得很好。创建图像的那个。（imagejpeg 函数）当我没有 switch 语句时它可以工作。但在我添加 switch 语句后，表单消失了。所以我的问题是，我在 switch 语句中做错了什么？还是总共有代码？

```
 $imageFile = $_FILES['image']['tmp_name']; 
    $filename = basename( $_FILES['image']['name']);

    list($width, $height) = getimagesize($imageFile);
    $picture = getimagesize($imageFile);

    if ($width >= $height) 
    {
        $orig_w = 500;
        $orig_h =($height/$width)*$orig_w;
    } else
    {
        $orig_h = 500;
        $orig_w = ($width/$height)*$orig_h;
    }

    $picture['format'] = strtolower(preg_replace('/^.*?\//', '', $picture['mime']));

    switch( $picture['format'] ) {
    case 'jpg':
    case 'jpeg': 
        $src = imagecreatefromjpeg($imageFile);
    break;
    case 'png':
        $src = imagecreatefrompng($imageFile);
    break;
    case 'gif':
        $src = imagecreatefromgif($imageFile);
    break;
    default:
        echo "unsproted format";
    break;
}

    $tmp = imagecreatetruecolor($orig_w, $orig_h);
    imagecopyresampled($tmp, $src , 0,0,0,0, $orig_w,$orig_h, $width, $height);

    switch( $picture['format'] ) {
        case 'jpg':
        case 'jpeg':
            return imagejpeg($tmp, $folder.$filename, 100);
        break;
        case 'png':
            return imagepng($tmp, $folder.$filename);
        break;
        case 'gif':
            return imagegif($tmp, $folder.$filename);
        break;
        default:
            echo "unsproted format";
        break;
    }

    imagedestroy($tmp);
    imagedestroy($src);
}

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<h1 > php image upload form </h1>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data">
    <p>
        <label for="image" > Image: </label>
        <input type="file" name="image" id="image" /> <br/>
    </p>
    <p>
        <input type="submit" name="submit" value="upload image" />
    </p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:08:13.793

我做到了。显然我无法弄清楚 switch 语句有什么问题（我仍然是 php 中的菜鸟）呵呵.. 但将 switch 语句替换为：

```
$xtention = explode(".",$filename); 

if ($xtention[1] == 'jpg' || $xtention[1] == 'jpeg' ) {
        imagejpeg($tmp, $folder.$filename, 100);
    }
    elseif ($xtention[1] == 'png') {
        imagepng($tmp, $folder.$filename);
    }
    elseif ($xtention[1] == 'gif') {
        imagegif($tmp, $folder.$filename);
    }
    else {
        echo "unsproted format";
    } 
```

# c++ - 在 C++ 中访问 dgemm

> ID：13227280
> 
> 赞同：5
> 
> 时间：2012-11-05T06:51:17.033
> 
> 标签：c++, fortran

我需要在 C++ 中实现一个矩阵类，其中一项操作必须是通过 dgemm 进行矩阵乘法。我的教授在课堂上用 C 做过一个例子，但由于某种原因，我无法让它在 C++ 中工作。这是我的头文件matrix.h：

```
#include <iostream>
#include <stdlib.h>

extern "C" {
#include "blas.h"
}

[blah blah blah, matrix class here; overloaded * operator will do the matrix      
multiplication]

matrix operator* (const matrix &other){

matrix AxB(Nrows, other.Ncolumns, "(" + name + "*" + "other.name" + ")");

char TRANSA = 'N';
char TRANSB = 'N';
int M = Nrows;
int N = other.Ncolumns;
int K = Ncolumns;
double alpha = 1.;
double beta = 0.;

dgemm_ (&TRANSA,
        &TRANSB,
        &M,
        &N,
        &K,
        &alpha,
        data,
        &M,
        other.data,
        &K,
        &beta,
        AxB.data,
        &M);

return AxB;

[blah blah blah, overloaded = operator here; i'm positive this is not the problem 
 since it works for matrix addition] 
```

主功能：

```
#include "matrix.h"

main(){

// entries of A and B are randomized between 0 and 1
matrix A(5,5);
matrix B(5,5);

matrix C = A*B;

} 
```

现在是 blas.h 头文件：

```
void dgemm_ (char *TRANSA,
             char *TRANSB,
             int *M,
             int *N,
             int *K,
             double *ALPHA,
             double **A,
             int *LDA,
             double **B,
             int *LDB,
             double *BETA,
             double **C,
             int *LDC); 
```

我将使用此处概述的子例程：http: [//www.netlib.org/blas/dgemm.f](http://www.netlib.org/blas/dgemm.f)

基本上，我们在 C 类实现中使用 (double*) calloc(rows*columns, sizeof(double)) 将矩阵构建为一个长数组。

我的 C++ 实现是：

```
double **data;

data = new double[rows];

for(int i=1; i<=rows; ++i){
    data[i-1] = new double[columns];
} 
```

然后我可以使用 data[i][j] 进行索引。但是由于 dgemm 子例程应该采用双 *A、双 *B 等，但我的矩阵是双 **A 等等，我该如何解决这个问题？

这是我从 valgrind 收到的错误消息：

```
==18845== Invalid write of size 8
==18845==    at 0x4165C1C: ATL_dgezero (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4149DA7: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas   
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478d680 is 8 bytes after a block of size 16 alloc'd
==18845==    at 0x402B454: operator new[](unsigned int) (in /usr/lib/valgrind   
/vgpreload_memcheck-x86-linux.so)
==18845==    by 0x8049045: dmatrix::dmatrix(int, int, std::string) (dmatrix.hpp:77)
==18845==    by 0x8049532: dmatrix::operator*(dmatrix const&) (dmatrix.hpp:218)
==18845==    by 0x8048DCB: main (main.cpp:17)
==18845== 
==18845== Invalid write of size 8
==18845==    at 0x4165C1F: ATL_dgezero (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4149DA7: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas   
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478d678 is 0 bytes after a block of size 16 alloc'd
==18845==    at 0x402B454: operator new[](unsigned int) (in /usr/lib/valgrind 
/vgpreload_memcheck-x86-linux.so)
==18845==    by 0x8049045: dmatrix::dmatrix(int, int, std::string) (dmatrix.hpp:77)
==18845==    by 0x8049532: dmatrix::operator*(dmatrix const&) (dmatrix.hpp:218)
==18845==    by 0x8048DCB: main (main.cpp:17)
==18845== 
==18845== Invalid write of size 8
==18845==    at 0x4165C22: ATL_dgezero (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4149DA7: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas    
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478d690 is not stack'd, malloc'd or (recently) free'd
==18845== 
==18845== Invalid write of size 8 
==18845==    at 0x4165C25: ATL_dgezero (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4149DA7: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478d688 is not stack'd, malloc'd or (recently) free'd
==18845== 
==18845== Invalid read of size 8
==18845==    at 0x4143D60: ATL_dJIK0x0x0NN0x0x0_aX_bX (in /usr/lib/atlas-base/atlas
/libblas.so.3gf.0)
==18845==    by 0x4149A9D: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478cf80 is not stack'd, malloc'd or (recently) free'd
==18845== 
==18845== Invalid read of size 8
==18845==    at 0x4143D64: ATL_dJIK0x0x0NN0x0x0_aX_bX (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4149A9D: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas    
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478d130 is 0 bytes after a block of size 16 alloc'd
==18845==    at 0x402B454: operator new[](unsigned int) (in /usr/lib/valgrind 
/vgpreload_memcheck-x86-linux.so)
==18845==    by 0x8049045: dmatrix::dmatrix(int, int, std::string) (dmatrix.hpp:77)
==18845==    by 0x8048D49: main (main.cpp:6)
==18845== 
==18845== Invalid read of size 8 
==18845==    at 0x4143D4C: ATL_dJIK0x0x0NN0x0x0_aX_bX (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4149A9D: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478d678 is 0 bytes after a block of size 16 alloc'd
==18845==    at 0x402B454: operator new[](unsigned int) (in /usr/lib/valgrind 
/vgpreload_memcheck-x86-linux.so)
==18845==    by 0x8049045: dmatrix::dmatrix(int, int, std::string) (dmatrix.hpp:77)
==18845==    by 0x8049532: dmatrix::operator*(dmatrix const&) (dmatrix.hpp:218)
==18845==    by 0x8048DCB: main (main.cpp:17)
==18845== 
==18845== Invalid write of size 8
==18845==    at 0x4143D93: ATL_dJIK0x0x0NN0x0x0_aX_bX (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4149A9D: ATL_dNCmmJIK (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x415BE8E: ATL_dgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x4182F54: ATL_dptgemm_nt (in /usr/lib/atlas-base/atlas 
/libblas.so.3gf.0)
==18845==    by 0x4183140: ATL_dptgemm (in /usr/lib/atlas-base/atlas/libblas.so.3gf.0)
==18845==    by 0x40818F6: atl_f77wrap_dgemm_ (in /usr/lib/atlas-base/atlas   
/libblas.so.3gf.0)
==18845==    by 0x4E4E0004: ???
==18845==  Address 0x478d678 is 0 bytes after a block of size 16 alloc'd
==18845==    at 0x402B454: operator new[](unsigned int) (in /usr/lib/valgrind 
/vgpreload_memcheck-x86-linux.so)
==18845==    by 0x8049045: dmatrix::dmatrix(int, int, std::string) (dmatrix.hpp:77)
==18845==    by 0x8049532: dmatrix::operator*(dmatrix const&) (dmatrix.hpp:218)
==18845==    by 0x8048DCB: main (main.cpp:17)
==18845== 
==18845== Invalid read of size 8
==18845==    at 0x8048DEA: main (main.cpp:19)
==18845==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==18845== 
==18845== 
==18845== Process terminating with default action of signal 11 (SIGSEGV)
==18845==  Access not within mapped region at address 0x0
==18845==    at 0x8048DEA: main (main.cpp:19)
==18845==  If you believe this happened as a result of a stack
==18845==  overflow in your program's main thread (unlikely but
==18845==  possible), you can try to increase the size of the
==18845==  main thread stack using the --main-stacksize= flag.
==18845==  The main thread stack size used in this run was 8388608.
==18845== 
==18845== HEAP SUMMARY:
==18845==     in use at exit: 3,581 bytes in 39 blocks
==18845==   total heap usage: 49 allocs, 10 frees, 7,760 bytes allocated
==18845== 
==18845== LEAK SUMMARY:
==18845==    definitely lost: 128 bytes in 4 blocks
==18845==    indirectly lost: 0 bytes in 0 blocks
==18845==      possibly lost: 88 bytes in 4 blocks
==18845==    still reachable: 3,365 bytes in 31 blocks
==18845==         suppressed: 0 bytes in 0 blocks
==18845== Rerun with --leak-check=full to see details of leaked memory
==18845== 
==18845== For counts of detected and suppressed errors, rerun with: -v
==18845== ERROR SUMMARY: 111 errors from 9 contexts (suppressed: 0 from 0)
Segmentation fault (core dumped) 
```

直到我尝试实现 dgemm 矩阵乘法，我没有错误也没有泄漏，所以我很确定我所有的麻烦都在于 dgemm 实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:27:16.327

C 版本的内存布局与 C++ 版本的内存布局不同。由于 BLAS 期望 C 版本使用的那种布局，您的 C++ 版本将无法工作。

因此，您还需要在 C++ 版本中分配一个大的一维数组；您可以重载 operator() 以获得二维数组的索引。或者对于生产代码，使用诸如[Eigen](http://eigen.tuxfamily.org)之类的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:54:42.160

抱歉，我没有意识到在响应时按 Enter 会发送响应。

我更改了索引：

```
double *data;

data = new double[rows*columns]; 
```

然后每次我想索引它时，我只是对 data[(i-1)*columns + (j-1)] 进行行主要索引。该代码现在确实可以工作，并且编译时出现 0 个错误和 0 个内存泄漏！唯一的问题是我现在得到一个完全乱码的结果。

这是否与 fortran 执行列优先排序而我执行行优先的事实有关？我将如何调和这一点？

# android - How to post hyperlink text in twitter using twitter4j in android

> ID：13227281
> 
> 赞同：0
> 
> 时间：2012-11-05T06:51:22.087
> 
> 标签：android, twitter, status, twitter4j, updates

I want to post a text on twitter which will hyperlink with one Url. is this Possible? any way to implement this.I read some blog and posts that this is not supported by Twitter. There is any alternate to implement this one in my android application.

M using Twitter4J . Code is below.

```
String verifier = uri.getQueryParameter("oauth_verifier");
AccessToken accessToken = twitter.getOAuthAccessToken(requestToken, verifier);
String token = accessToken.getToken(), secret = accessToken.getTokenSecret();
twitter.setOAuthAccessToken(token, secret);
StatusUpdate status = new StatusUpdate("Listening"+"<a href "+base_link_url+"</a>");
//status.setMedia(file);
twitter.updateStatus(status); 
```

This is posting hyperlink as text. Kindly suggest me on that issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:48:49.343

你不必做任何事情。Twitter 会自动识别你的链接（URL） 这样做

```
 StatusUpdate status = new StatusUpdate("Listening  "+"https://www.google.co.in/"); 
```

# c# - Delicious API call with RestSharp

> ID：13227284
> 
> 赞同：2
> 
> 时间：2012-11-05T06:51:34.457
> 
> 标签：c#, restsharp, delicious-api

I am trying to access the delicious API and decided to start using the RestSharp library for the calls. My test code looks like this:

```
var client = new RestClient("https://api.del.icio.us/");
client.Authenticator = new HttpBasicAuthenticator("username", "password");            
client.UserAgent = "my_user_agent";            
var request = new RestRequest("v1/tags/get");

client.ExecuteAsync(request, response =>
{
   if (response.ResponseStatus == ResponseStatus.Error)
   {
      Dispatcher.BeginInvoke(() =>
      {
          MessageBox.Show(response.ErrorMessage);
      });
   }
   else if (response.ResponseStatus == ResponseStatus.Completed)
   {                    
      Dispatcher.BeginInvoke(() =>
      {
          MessageBox.Show(response.Content);
      });
   }
}); 
```

For this code the delicious API returns "access denied" code although my username and password used in the code are correct. I suspect that I may be doing something wrong with RestSharp as I just started using this library. Can anyone help me with the code above? What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:57:23.543

您可能必须使用

```
client.Credentials = new NetworkCredential("username", "password"); 
```

查看 [标准 curl，例如从 dotnet 访问](https://stackoverflow.com/questions/16045182/standard-curl-like-access-from-dotnet)

至于为什么在地球上你不会像世界上任何其他系统一样允许访问..不要问我..

# ajax - AJAX 和 node.js 交互的问题

> ID：13227287
> 
> 赞同：1
> 
> 时间：2012-11-05T06:51:39.343
> 
> 标签：ajax, node.js

我是 node.js 的新手，我正在尝试将数据从 AJAX 发送到 Node.js 服务器并取回东西。我的服务器端代码是

```
var http = require('http');
var url=require('url');
http.createServer(function (req, res) {
    console.log(req.url);
     var url_parts = url.parse(req.url, true);
    switch(url_parts.pathname)
    {
        case '/':
        res.writeHead(302,{'location':'http://localhost/testajax/index.html'});
        res.end();
        break;
        case '/test':
    console.log('request received');
    res.writeHead(200, {'Content-Type': 'text/html'});
    console.log(url_parts.query["page"]);
    res.end(url_parts.query["page"]);
    break;
}
}).listen(8124); 
```

在客户端运行的是

```
 <script type="text/javascript">

   $(document).ready(function() {
    $('a').click(function(){

            $.get('http://localhost:8124/test', {'page':$(this).text()}, function(data){
            alert(data);
                $('#content').html(data);

            });                       

        });

    });

    </script> 
```

内容在其中，`<div>`但没有显示，也没有提醒任何内容。在安慰浏览器时，我收到此错误。

```
XMLHttpRequest cannot load http://localhost:8124/test?page=ProfilePage. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

这是一种错误的做事方式吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:44:26.470

您似乎正在尝试在您的域之外发出请求。看看这个答案：[https ://stackoverflow.com/a/9327231/1417431](https://stackoverflow.com/a/9327231/1417431)

您可以在这里进一步阅读：[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)

# php - Compile PHP source code into extension (.so / .dll)

> ID：13227290
> 
> 赞同：1
> 
> 时间：2012-11-05T06:51:44.283
> 
> 标签：php, compilation, php-extension

Is there a way to make one of my PHP API libraries compiled into PHP extensions? I don't want my client see the source code of that PHP API.

I searched and found the same, BUT with Cython (of Python): [How to protect and compile python source code into a .so library?](https://stackoverflow.com/questions/11436484/how-to-protect-and-compile-python-source-code-into-a-so-library)

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:55:13.630

PHP 世界中的等价物是“HipHop for PHP”，它采用 PHP 代码，将其翻译成 C++，然后编译。当然，这会将依赖项要求添加到使用您的库的任何 Web 服务器。

链接：[https ://github.com/facebook/hiphop-php/wiki](https://github.com/facebook/hiphop-php/wiki)

# oracle - Oracle 11g 数据库创建

> ID：13227291
> 
> 赞同：1
> 
> 时间：2012-11-05T06:51:51.170
> 
> 标签：oracle, oracle10g, oracle11g

我是 Oracle 数据库的新手，与我使用 SQL Server 和 MySQL 的经验相比，Oracle 并不容易。问题是，当我尝试使用 DB Configuration Assistant 创建数据库时，当我使用 SQL Developer 查看数据库时，上面已经有表。如果它是自定义数据库，为什么它上面有类似系统表的东西。我怎样才能把我自己的表放在那个数据库上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:58:48.723

请阅读 Oracle 文档。它是全面的、在线的和免费的。我知道与构成 MSSQL 文档的相关小册子相比，它的大小可能会让人望而却步：) 但您会发现 Oracle 做得更多。

为了帮助您入门，有一份为期 2 天的 DBA 指南。 [在这里找到它](http://docs.oracle.com/cd/B19306_01/server.102/b14196/toc.htm)。[这有关于创建数据库](http://docs.oracle.com/cd/B19306_01/server.102/b14196/install.htm#CHDGJGHB)（也许您应该已经阅读过）和[管理用户](http://docs.oracle.com/cd/B19306_01/server.102/b14196/users_secure.htm#CHDJBHHI)的章节，这将解决您的直接问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:55:59.443

您应该开始以 sys 身份连接并创建用户（并且隐式地创建模式）。在该架构中，您可以放置​​您的表格。

[查看文档以创建用户](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_8003.htm)

# java - how can i pass a variable from jvm to mule then call a web service by those variable and return respond to jvm?

> ID：13227293
> 
> 赞同：1
> 
> 时间：2012-11-05T06:51:53.643
> 
> 标签：java, mule, business-process-management, activiti

hi i have a flow in mule like this

```
<flow name="MuleService">
    <vm:inbound-endpoint path="ms" exchange-pattern="request-response" />
            <!-- I have a Payload here want to conver it to what my service want -->
            <logger message="Received message #[payload]" level="INFO" />
<!--    <cxf:jaxws-client    HERE !!! i need to call a SOAP service-->

             <!-- here i need to return service respond to jvm now i just return string      -->
    <script:transformer>
        <script:script engine="groovy">return 'this is mule'</script:script>
    </script:transformer>
</flow> 
```

i want to send message from vm to mule then call a soap service and return response to vm so i can change my service implementation and its proxies without having to change my client! **how can i do that ?** i think process involves discovering service proxies and transfrom my message to proxy type and then getting response and return it to jvm.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:37:44.787

实现这一点的最简单方法是使用[WS 代理模式](http://www.mulesoft.org/documentation/display/MULE3USER/Web+Service+Proxy+Pattern)

这将允许您使用所需的端点（即 vm 作为入站，http 作为出站）应用适当的转换并相对独立于代理的 Web 服务

# javascript - javascript中未设置div的高度和宽度

> ID：13227296
> 
> 赞同：0
> 
> 时间：2012-11-05T06:52:00.353
> 
> 标签：javascript, html, css

我正在尝试在 javascript 中设置 div 的宽度和高度，但它没有被设置。我已经尝试了很多，但没有任何效果。这是我尝试过的，

```
<div id="d1">asdasd</div>

<script>
  var d = document.getElementById("d1");
  d.style.width = "100px";
  d.style.height = "100px";
  d.style.cssText = 'border:1px solid black;'
</script>
```

请检查是什么问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:54:13.843

我认为`d.style.cssText`覆盖`width`和`height`属性

试试这个：

```
var d = document.getElementById("d1");
d.style.width = "100px";
d.style.height = "100px";
d.style.cssText += 'border:1px solid black;' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T07:01:08.710

正如 karaxuna 提到的，您`d.style.cssText`正在覆盖宽度和高度设置。只需将您的代码更改为：

```
var d = document.getElementById("d1");
d.style.width = "100px";
d.style.height = "100px";
d.style.border = '1px solid black'; 
```

或这个：

```
var d = document.getElementById("d1");
d.style.cssText = 'border:1px solid black;'
d.style.width = "100px";
d.style.height = "100px"; 
```

完美运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T07:03:18.053

您的问题与`d.style.cssText = 'border:1px solid black;'`. 它覆盖了 JS 设置的宽度和高度。

检查这个小提琴： -

[http://jsfiddle.net/RZKnQ/1/](http://jsfiddle.net/RZKnQ/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T06:53:34.663

这有效：

```
<div id="d1" style="border:1px solid black;">asdasd</div>​
<script>
var d = document.getElementById("d1");
d.style.height = "200px";
</script> 
```

[http://jsfiddle.net/dandv/emnMb/4/](http://jsfiddle.net/dandv/emnMb/4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T06:56:53.533

另一种方法是在 CSS 中定义一个新的样式元素并简单地设置`d.className`为该 CSS 元素。

我猜

```
d.style.cssText 
```

是问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T06:57:56.463

更改您的 JS 语句的顺序它将起作用，即

```
<script>
    var d = document.getElementById("d1");
    d.style.cssText = 'border:1px solid black;'
    d.style.width = "100px";
    d.style.height = "100px";
</script> 
```

**最好**只将宽度、高度属性放在样式属性中。IE

d.style.cssText = 'border:1px 纯黑色; 宽度：100 像素；高度：100px'

**或在 CSS 类中**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T07:00:12.907

```
d.style.cssText = 'border:1px solid black;'
d.style.float="left";
d.style.width = "100px";
d.style.height = "100px";​ 
```

您需要使用 float:left 属性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-05T07:01:35.713

我不知道你的问题是什么，但我已经使用了这个并且它有效

```
 function fnc1()
{
    document.getElementById("d1").style.width="100px";
    document.getElementById("d1").style.height="100px";
    document.getElementById("d1").style.backgroundColor="red";
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-05T07:02:33.920

HTML：

```
<div id="d1">asdasd</div>​ 
```

Javascript

```
document.getElementById('d1').style.height = 90+'px';​ 
```

[在这里工作演示](http://jsfiddle.net/eEeLz/)（适用于 chrome，不检查其他浏览器）

# java - Simple Image Recognition Task in Android: Dominoes Reading

> ID：13227297
> 
> 赞同：5
> 
> 时间：2012-11-05T06:52:06.153
> 
> 标签：java, android, computer-vision, image-recognition

I am newbie to the CV field and I am on a relatively simple task, I want to analyse dominoes rock values.

I used blob analysis method, which wasn't really efficient on android for that I used a pure java code which tends to be slower than native C. And background data caused me problems as it could have blobs too.

After too much reading I ran through 'template matching' method which sounds like the best to me, for its low resources need and rotation/scaling tolerance, I can easily save the template of every piece of the dominoes and then match it in the coming image for analysis and counting.

Now all I want is your guidance to libraries/methods that can help me implementing template matching, I prefer pure java but can use native C libs if no choice is found.

P.S: If you find me wrong regarding algorithm I chose, please provide me with your advice.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T07:14:19.997

图像识别是计算机视觉中的高级处理，首先您必须进行一些预处理并首先检测对象。

要进行模板匹配，首先必须找到要识别的图像的感兴趣区域。为此，您可以从许多算法中选择一种，例如基于特征的检测和基于外观的检测。找到 ROI（Region of Interest）后就可以进行模板匹配了（我假设你已经理解了模板匹配的概念）

它的摘要你可以在下面的流程图中看到它

![模板匹配流程图](../Images/64db347e97a66438e65ba8543370f659.png)

和模板匹配的例子

![在此处输入图像描述](../Images/7f7a94ff95d37951a8ebe2026ebe2184.png)

在您了解整个过程后，您可以使用一些支持 Android 平台的可用库，例如​​高通的[OpenCV](http://opencv.org/platforms/android.html)（开源）或[FastCV](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv)，它们都使用原生 C，因此您必须使用 android NDK 来编译它。

如果您有任何问题，请随时在评论中问我：）

# database-design - 按天显示个人资料页面中访问者数量的数据结构

> ID：13227306
> 
> 赞同：0
> 
> 时间：2012-11-05T06:52:59.650
> 
> 标签：database-design, data-structures

我需要以图形方式显示有多少访问者访问了个人资料，可以按天或按月表示。你能建议我什么样的数据结构完全适合它。如果我存储在 RDBMS 中，如何快速获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:27:57.310

如果数据存储在关系数据库中，则可能有内置的日期和时间函数，可以与 groupby 子句结合使用，为您提供所需的灵活性。对于 mysql：[http](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html) ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html 您可以在日期上使用 Month() 函数。您只需为您的 rdbms 以正确的格式存储完整日期。

# ios - iOS: AutoresizingMask not resizing to fit map or view on screen

> ID：13227307
> 
> 赞同：2
> 
> 时间：2012-11-05T06:53:00.693
> 
> 标签：ios, uiviewcontroller, autoresizingmask

My views are not resizing correctly using something like:

self.someview.autoresizingMask = (UIViewAutoresizingFlexibleHeight| UIViewAutoresizingFlexibleWidth);

Using all the possible resizing masks did not solve the problem either. I am running iOS 5.1 on my phone and 6.0 on the simulator but the result is the same either way. I have attached pictures to better describe the problem. How can I set the autoresizingMask so the view ALWAYS fills the screen?

![enter image description here](../Images/0d15ab3722335cd1a85452135f71555e.png)

![enter image description here](../Images/3eddc73ef3f83f866e65bcf4661b43ce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:36:45.997

检查 superview 的`autoresizesSubviews`设置，`YES`并且您没有为地图设置不正确的框架`layoutSubviews`。我刚刚添加了地图视图，它按预期调整了大小。

我使用的调整大小蒙版是

```
UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleRightMargin 
```

# java - 不使用 XPath（Selenium Web 驱动程序 + Java）从 webtable 中的元素获取文本

> ID：13227309
> 
> 赞同：0
> 
> 时间：2012-11-05T06:53:07.873
> 
> 标签：java, selenium, automation, automated-tests, selenium-webdriver

```
<table class="shoppingCart" cellspacing="0" cellpadding="0" border="0" width="100%">
<thead>
<tfoot>
<tr>
<tr>
<tr>
<!-- show if promo discount applied -->
<!-- end discount -->
<tr>
<td/>
<td/>
<th scope="row" colspan="2">Order total</th>
<td class="total ajaxCart_total"> $284.96  </td>
</tr>
</tfoot>
<tbody>
</table> 
```

有人可以帮我解决这个问题吗？我想在运行时捕获文本 $284.96。而且我不想使用绝对 Xpath(//table/tfoot/tr[4]/td[3]) 因为页面是动态的并且 Xpath 可能经常更改。我怎么能做到这一点？

提前致谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:13:14.147

如果所需的 td 中提到的类是唯一的，您可以像这样使用 xpath：

```
//td[@class='total ajaxCart_total'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:31:57.687

driver.findElement(By.className("总 ajaxCart_total"))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:24:19.033

我推荐这个 xpath-

`"//table[@class='shoppingCart']//td[@class='total ajaxCart_total']"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T23:50:33.513

如果桌子经常变化，你最好的选择是：

`//td[contains(@class,'total') and contains(@class, 'ajaxCart_total')]`

在这种情况下，如果开发人员决定添加另一个 CSS 类，你仍然是安全的。

# vb.net - VB getting garbage textbox output at end of loop

> ID：13227312
> 
> 赞同：0
> 
> 时间：2012-11-05T06:53:14.360
> 
> 标签：vb.net

I made a VBA application that pulls from a text file, and goes through a list of servers running the QWINSTA command against them to look for Terminal Services sessions for a particular user, the idea is our helpdesk can type in a username and click a button and it crawls a list of servers, quickly and identifies where someone is logged on.

for some reason at the end of my loop I get some odd output in the textbox it writes to that appears to be the query data, but not in the proper format, repeated several times

here's the code, the "END OF OUTPUT" line was added to the end to determine if the garbage data was before of after this line and it seems to occur before, because this line writes after the loop has been exited.

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    'Creates Thread
    Dim T1 As New System.Threading.Thread(AddressOf SessionFinder)

    'Start Thread
    T1.Start()

    LabelStatus.Text = "Running..."

End Sub

'SessionFinder 2.0 - searches for RDP Sessions on terminal servers

Sub SessionFinder()

    Control.CheckForIllegalCrossThreadCalls = False

    ProgressBar1.Value = 0

    'declares variables
    Dim objFSO, objShell, profile, server, oFSO, WSHshell, oTextStream, RemotePC

    'Inputbox that collects username

    profile = TextBoxProfile.Text

    'Creates Class Objects
    objFSO = CreateObject("Scripting.FileSystemObject")
    objShell = CreateObject("Wscript.Shell")

    TextBoxResults.Text = "RDP Sessions for user " & profile & " exists on the following servers" & ControlChars.CrLf
    'TextBoxResults.Text &= "_______________________________________________________________________________" & ControlChars.CrLf
    TextBoxResults.Text &= " " & ControlChars.CrLf

    'open the file system object
    oFSO = CreateObject("Scripting.FileSystemObject")
    WSHshell = CreateObject("wscript.shell")
    'open the data file
    oTextStream = oFSO.OpenTextFile("phlist.txt")
    'make an array from the data file
    RemotePC = Split(oTextStream.ReadAll, vbNewLine)
    'close the data file
    oTextStream.Close()

    ProgressBar1.Minimum = 0
    ProgressBar1.Maximum = 100
    ProgressBar1.Step = 1

    For Each server In RemotePC

        Label8.Text = server

        'The Query is launched
        Dim Query As New Process

        Query.StartInfo.FileName = "C:\windows\system32\qwinsta.exe"
        Query.StartInfo.Arguments = "/server:" & server & " " & profile
        Query.StartInfo.UseShellExecute = False
        Query.StartInfo.RedirectStandardOutput = True
        Query.StartInfo.WindowStyle = ProcessWindowStyle.Minimized
        Query.StartInfo.CreateNoWindow = True

        Query.Start()
        Query.WaitForExit(3000)

        If Query.HasExited = False Then
            TextBoxResults.Text &= "_________________________________________________________________" & ControlChars.CrLf
            TextBoxResults.Text &= server & " Not Responding, skipping..."

            Query.Kill()

        Else

            'Do Nothing
        End If

        Dim output As String = Query.StandardOutput.ReadToEnd

        If Not String.IsNullOrEmpty(output) Then

            'MsgBox("/server:" & server & " " & profile)
            'MsgBox(output)

            'Results are Echoed to TextboxResults
            TextBoxResults.Text &= "_________________________________________________________________" & ControlChars.CrLf
            TextBoxResults.Text &= server & ControlChars.CrLf
            TextBoxResults.Text &= output

        Else

            'Do nothing

        End If

        output = Nothing

        ProgressBar1.PerformStep()
    Next

    LabelStatus.Text = "Complete"

    TextBoxResults.Text &= "_________________________________________________________________" & ControlChars.CrLf
    TextBoxResults.Text &= "END OF OUTPUT"

    ProgressBar1.Value = 100

    Me.BringToFront()

End Sub 
```

Here's a sample of what the output is supposed to look like

```
RDP Sessions for user amis5235 exists on the following servers

_________________________________________________________________
XDIS1
SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________
XAXCL4 Not Responding, skipping...
_________________________________________________________________
XAXCL6 Not Responding, skipping...
_________________________________________________________________ 
```

Here's what ends up trailing on the end, which I'd like to eliminate

```
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________

 SESSIONNAME       USERNAME                 ID  STATE   TYPE        DEVICE 
>ica-tcp#4         amis5235                  6  Active  wdica               
_________________________________________________________________
END OF OUTPUT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:31:16.050

好的，我现在几乎要笑了，Ahmad 的评论提示我检查我正在阅读的文本文件，查看文件末尾有许多空回车，好像我的应用程序正在尝试处理空行作为服务器，这现在很有意义。感谢大家的共鸣板，正是我所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:01:00.083

我认为这是因为线程正在被终止。尝试这个：

```
Dim T1 As System.Threading.Thread;

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    'Creates Thread
    T1 = New System.Threading.Thread(AddressOf SessionFinder)

    'Start Thread
    T1.Start()

    LabelStatus.Text = "Running..."

End Sub 
```

注意：这只是一个示例，不是生产代码；）

# python - Python将长字符串转换为不带单引号的列表

> ID：13227313
> 
> 赞同：1
> 
> 时间：2012-11-05T06:53:20.607
> 
> 标签：python, string, list, quotes

我有一个长字符串，我想将它存储为一个列表。但它的开头和结尾总是有单引号。如何删除它们？谢谢。

样品

```
>>> string
>>> '"2012-11-05", "filename", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33'
>>> string.split("'")
>>> ['"2012-11-05", "filename", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33'] 
```

问题是如何在没有单引号的情况下获得下面这样的结果？

```
>>> ["2012-11-05", "filename", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T06:58:43.427

您的数据似乎是一个有效的 python 元组。

```
import ast

list(ast.literal_eval('"2012-11-05", "filename", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33')) 
```

ast 模块中的 literal_eval 函数比普通 eval 更安全，因为 literal_eval 不会计算任意代码，只会计算普通值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T06:58:34.280

试试这个：

```
[s.replace('"', '').strip() for s in string.split(',')]

>>> ['2012-11-05', 'filename', '1', '2', '3', '4', '5', '6', '7', '0.11', '0.22', '0.33'] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T14:24:23.460

```
 python 3.2

      string='"2012-11-05", "filename", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33'
      a=eval(string)
      res=list(a) 
```

# mysql - Event scheduler MySql without expired time

> ID：13227314
> 
> 赞同：0
> 
> 时间：2012-11-05T06:53:20.810
> 
> 标签：mysql

I read article about the event scheduler on MySql.Then I got this structure,

```
CREATE
[DEFINER = { user | CURRENT_USER }]
EVENT
[IF NOT EXISTS]
event_name
ON SCHEDULE schedule
[ON COMPLETION [NOT] PRESERVE]
[ENABLE | DISABLE | DISABLE ON SLAVE]
[COMMENT 'comment']
DO event_body; 
```

I got some interested thing to know about it, 1\. Could this event schedule havent expired time? 2\. What is the ENABLE | DISABLE | DISABLE ON SLAVE mean?

Any respon will be appreciate,Thx.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:02:38.820

1.  *这个活动时间表会不会过期？*利用 -`ON COMPLETION PRESERVE`
2.  *什么是启用 | 禁用 | DISABLE ON SLAVE 是什么意思？*ENABLE/DISABLE - 表示事件处于活动/非活动状态。

DISABLE ON SLAVE（来自文档）-*为复制从属上的事件状态设置，以指示该事件是在主控上创建并复制到从属，但不在从属上执行。*

# c - 使用 linux-kernel 模块发送 UDP 数据包而不使用套接字

> ID：13227315
> 
> 赞同：5
> 
> 时间：2012-11-05T06:53:22.910
> 
> 标签：c, linux, sockets, linux-kernel, kernel-module

我正在编写一个创建 IP 数据包的内核模块。现在我想发送这个数据包，但还没有为它的传输创建任何套接字。

有没有办法在内核例程的帮助下直接发送它。

因为我已经跟踪了用于数据包传输的 linux 内核代码，所以在 **net/core/dev.c**中定义了一个名为**dev_hard_start_xmit()**的函数。我们可以使用它吗？

其实我不想使用套接字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T14:18:34.300

在内核中发送UDP包不需要socket，只需要分配一个skb，自己构造IP头和UDP头，最后通过dev_queue_xmit()发送出去。

```
skb = alloc_skb(len, GFP_ATOMIC);
if (!skb)
        return;

skb_put(skb, len);

skb_push(skb, sizeof(*udph));
skb_reset_transport_header(skb);
udph = udp_hdr(skb);
udph->source = htons(....);
udph->dest = htons(...);
udph->len = htons(udp_len);
udph->check = 0;
udph->check = csum_tcpudp_magic(local_ip,
                                remote_ip,
                                udp_len, IPPROTO_UDP,
                                csum_partial(udph, udp_len, 0));

if (udph->check == 0)
        udph->check = CSUM_MANGLED_0;

skb_push(skb, sizeof(*iph));
skb_reset_network_header(skb);
iph = ip_hdr(skb);

/* iph->version = 4; iph->ihl = 5; */
put_unaligned(0x45, (unsigned char *)iph);
iph->tos      = 0;
put_unaligned(htons(ip_len), &(iph->tot_len));
iph->id       = htons(atomic_inc_return(&ip_ident));
iph->frag_off = 0;
iph->ttl      = 64;
iph->protocol = IPPROTO_UDP;
iph->check    = 0;
put_unaligned(local_ip, &(iph->saddr));
put_unaligned(remote_ip, &(iph->daddr));
iph->check    = ip_fast_csum((unsigned char *)iph, iph->ihl);

eth = (struct ethhdr *) skb_push(skb, ETH_HLEN);
skb_reset_mac_header(skb);
skb->protocol = eth->h_proto = htons(ETH_P_IP);
memcpy(eth->h_source, dev->dev_addr, ETH_ALEN);
memcpy(eth->h_dest, remote_mac, ETH_ALEN);

skb->dev = dev;

dev_queue_xmit(skb); 
```

# php - 我的 Facebook 脚本无法使用 appserv

> ID：13227321
> 
> 赞同：0
> 
> 时间：2012-11-05T06:53:45.623
> 
> 标签：php, facebook

我编写了一个脚本，可以将图像上传到 facebook 上的粉丝专页，我尝试了一个虚拟主机，但 open_basedir 被“realpath”禁用，所以我不能使用它（但登录、facebook 状态更新和所有这些东西都很好用）。所以我在 VPS 中尝试了，我使用 Apache 2.2.8 和 PHP 5.2.6 安装了 appserv，但是当我尝试使用该应用程序进行身份验证时出现错误：

```
Warning: file_get_contents(https://graph.facebook.com/me/accounts?access_token=) [function.file-get-contents]: failed to open stream: No error in C:\AppServ\www\editor_imagenes\index.php on line 58

Warning: Invalid argument supplied for foreach() in C:\AppServ\www\editor_imagenes\index.php on line 79

Warning: file_get_contents(https://graph.facebook.com/me?access_token=) [function.file-get-contents]: failed to open stream: No error in C:\AppServ\www\editor_imagenes\index.php on line 106 
```

我知道我的代码没问题，因为当我尝试使用虚拟主机时工作正常……我能做什么？谢谢阅读：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:16:56.717

问题解决了：

我用这个替换了 file_get_contents：

```
if(!extension_loaded('curl') && !@dl('curl_php5.so'))
{
    return 0;
}

$parseurl = parse_url($token_url);

$c = curl_init();
$opts = array(
CURLOPT_URL => $token_url,
CURLOPT_RETURNTRANSFER => 1,
CURLOPT_TIMEOUT => 10,
CURLOPT_HTTPHEADER => array("Host: " . $parseurl['host']),
CURLOPT_SSL_VERIFYHOST => 0,
CURLOPT_SSL_VERIFYPEER => false
);
curl_setopt_array($c, $opts);

$response = @curl_exec($c); 
```

感谢“gladius”，他给了我代码。

# php - 排序规则类型 葡萄牙语

> ID：13227323
> 
> 赞同：2
> 
> 时间：2012-11-05T06:54:02.037
> 
> 标签：php, collation

我想插入“ã”、“é”、“ó”、“ç”（德沃夏克国际），就像葡萄牙语-巴西语言中的文本一样。我在数据库中设置的排序规则类型是： **utf8_general_ci** 但它不起作用。我试图将它粘贴到这里，但这里显示正常。但在数据库中它没有以正确的方式显示。

所以，请告诉我哪种排序规则适合葡萄牙语。

我的 HTML 页面字符编码是：

```
<meta http-equiv="Content-Type" content="text/html; charset=pt-BR" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:20:23.663

UTF-8 应该适用于葡萄牙语。

尝试这个：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

编辑：

然后可能会发生两件事：

1.  数据库中的编码对于其中的字符串是错误的
2.  文件编码错误。（以 UTF-8 以外的其他方式编码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T17:18:02.483

作为一名巴西程序员，我曾多次遇到这种情况。问题是，根据我的经验，简单地使用正确的字符集对页面进行编码（如果是 ISO-8859-1 的巴西葡萄牙语），并不能解决问题。

数据库和页面都必须进行相应的编码。据我所知，在问题的 HTML 部分中，元标记应如下所示：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /> 
```

注意：正如 Tivie 在另一个答案中指出的那样，仅通过元标记设置字符集是不够的。文件（example.htm）的编码也必须设置为 Ansi 而不是 Unicode 或 UTF-8，否则重音字符（如 á ô í ç）将无法正确显示。

关于数据库，为了正确检索信息和显示，您还必须设置正确的字符集和排序规则，如下所示（对于 MySQL）：

字符集：latin1 -- cp1252 西欧

排序规则：latin1_swedish_ci（尽管有“瑞典语”，但它是最适合巴西葡萄牙语的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:57:25.083

我敢打赌，您的文件编码与您的元标记不匹配，因为传递无效字符集似乎可以正确显示字符。

例子：

你有一个 index.html

如果你添加`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />`index.html，那么文件编码应该是 UTF-8 而不是别的。

您可以在 Windows 上使用 notepad++ 找到文件的编码。如果您使用的是 MAC，您的文件可能以 MacRoman 编码。

检查此链接，它解释了如何使用 Notepad++ 检查文件编码：[http ://www.abdullahyahya.com/2011/09/22/find-out-a-files-encoding-on-windows/](http://www.abdullahyahya.com/2011/09/22/find-out-a-files-encoding-on-windows/)

# java - 使用java在文件系统中创建文件

> ID：13227324
> 
> 赞同：0
> 
> 时间：2012-11-05T06:54:11.810
> 
> 标签：java

我正在`xml`使用类似这样的文档对象创建一个文件。

```
DOMSource ds=new DOMSource(doc);

PrintStream ps=new PrintStream("file.xml");
StreamResult sr=new StreamResult(ps);    
javax.xml.Transformer.transform(ds,sr); 
```

文件创建很好，它正在我的本地目录中创建。

我想要的是`fs:///myresources/myproject/`使用 java 创建/上传到文件系统（）中的这个文件。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:58:22.843

只需使用文件名中的路径：

```
 PrintStream ps=new PrintStream("fs:///myresources/myproject/file.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:59:43.563

使用以下代码：

```
PrintStream ps=new PrintStream("fs:///myresources/myproject/file.xml");
StreamResult sr=new StreamResult(ps);
javax.xml.Transformer.transform(ds,sr); 
```

# ibatis - ibatis 抛出 NullPointerException

> ID：13227326
> 
> 赞同：0
> 
> 时间：2012-11-05T06:54:20.707
> 
> 标签：ibatis

我正在尝试使用 DB 测试 iBATIS。我得到一个 NullPointerException。下面是类和 iBATIS bean 配置，

```
 <select id="getByWorkplaceId"
  parameterClass="java.lang.Integer" resultMap="result">
  select * from WorkDetails where workplaceCode=#workplaceCode#
  </select>

  <select id="getWorkplace" resultClass="com.ibatis.text.WorkDetails">
  select * from WorkDetails
  </select> 
```

**POJO**

```
public class WorkplaceDetail implements Serializable {
private static final long serialVersionUID = -6760386803958725272L;
private int code;
private String plant;
private String compRegNum;
private String numOfEmps;
private String typeIndst;
private String typeProd;    
private String note1;
private String note2;
private String note3;
private String note4;
private String note5;       
} 
```

**DAO实现**

```
public class WorkplaceDetailImpl implements WorkplaceDetailsDAO {

private SqlMapClient sqlMapClient;

public void setSqlMapClient(SqlMapClient sqlMapClient) {
    this.sqlMapClient = sqlMapClient; 
    }

@Override
public WorkplaceDetail getWorkplaceDetail(int code) {
    WorkplaceDetail workplaceDetail=new WorkplaceDetail();
    try{
            **workplaceDetail= (WorkplaceDetail) this.sqlMapClient.queryForObject("workplaceDetail.getByWorkplaceId", code);**

    }catch (SQLException sqlex){
        sqlex.printStackTrace();
    }
    return workplaceDetail;
} 
```

**测试代码**

```
public class TestDAO {

public static void main(String args[]) throws Exception{
    WorkplaceDetail wd = new WorkplaceDetail(126, "Hoonkee", "1234", "22", "Service", "Tele", "hsgd","hsgd","hsgd","hsgd","hsgd");

    WorkplaceDetailImpl impl= new WorkplaceDetailImpl();
    **impl.getWorkplaceDetail(wd.getCode());**
    impl.saveOrUpdateWorkplaceDetails(wd);
    System.out.println("dhsd"+impl);

}
} 
```

我想选择并插入。我在上面的代码中标记为 ** ** 作为异常点

```
Exception in thread "main" java.lang.NullPointerException
at com.ibatis.text.WorkplaceDetailImpl.getWorkplaceDetail(WorkplaceDetailImpl.java:19)
at com.ibatis.text.TestDAO.main(TestDAO.java:11) 
```

# jqgrid - 如何在 jqgrig 中使用内联导航传递外部数据？

> ID：13227329
> 
> 赞同：1
> 
> 时间：2012-11-05T06:54:31.863
> 
> 标签：jqgrid

我在 jqgrid 中使用内联导航。所以我想添加新行。当我使用此行数据添加新行时，我想传递一些其他外部数据。怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:04:39.037

您需要使用`addParams`选项的属性`inlineNav`。例如，请参见[此处](https://stackoverflow.com/a/9565527/315935)、[此处](https://stackoverflow.com/a/10396691/315935)和[此处](https://stackoverflow.com/a/8551798/315935)的示例。

**更新**：以下是代码示例：

```
$("#list").jqGrid("inlineNav", "#pager", {
    addParams: {
        addRowParams: {
            keys: true,
            extraparam: {
                Patient_Id: function () {
                    return $("#sId").val();
                }
            }
        }
    }
}); 
```

# java - 在 catch 子句中再次抛出异常后会发生什么？

> ID：13227332
> 
> 赞同：0
> 
> 时间：2012-11-05T06:54:55.300
> 
> 标签：java, exception, exception-handling

好吧，我在 API 和其他相关问题中看到了这一点：

```
try {

} catch (IOException e) {
    throw new SampleException("Other IOException", e);
} 
```

这调用了一个新的异常。

但现在我看到了这个自称的例子。我正在尝试编写文档，它似乎再次调用自己。

```
try {
    statements;
}catch(TheException e) {
    //perform operations before exits;
    throw e; 
} 
```

> 重新抛出异常，以便其他处理程序有机会处理异常

我想我们不能`TheException`在我们的`catch`异常之后再添加一个！那么在这种情况下，谁是另一个处理程序？我对其进行了测试，我意识到即使在 catch 子句之后的代码也没有编译！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:07:33.790

> 那么在这种情况下，谁是另一个处理程序？

几乎就好像该`catch`子句从未存在过一样 - 稍微添加了*以后*的catch 子句将不会被使用。例如：

```
try {
    methodWhichCanThrowIOException();
} catch (IOException e) {
    throw e;
} catch (Exception e) {
    // This won't be hit for IOException
} 
```

所以：

*   如果围绕此代码有另一个 try/catch 语句，则那里的 catch 块*可能*会捕获异常
*   否则，假设它是一个检查异常，该方法必须声明它可以抛出异常（或超类），并且异常将以正常方式传播到方法之外

有关所有详细信息，请参阅JLS 的[第 11.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.3)和[第 14.20 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:01:39.693

尝试修改异常在 JAVA 中的工作方式，尤其是`throw/throws`关键字以及它们的区别。

这是一个很好的[页面](http://www.tutorialspoint.com/java/java_exceptions.htm)来解释这一点。

您可以随时参考[文档](http://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html)以获取更多信息。

关于您的问题，您的代码可能无法编译，因为该方法`throw`可能没有`throws TheException`。您可以添加`throws TheException`方法标题以使其正常工作，或者您可以尝试将您的方法包含`try/catch`在另一个`try/catch`处理（捕获）`TheException`中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:19:06.753

假设您有两种方法。

第一：

```
public void methodA() throws IOException {

    try {

        // methodWhichCanThrowIOException();

    } catch (IOException e) {

        // //perform operations before exits;
        throw e;
    }
} 
```

第二个：

```
public void methodB() {

    try {

        methodA();

    } catch (IOException e) {

        // //perform operations;
    }
} 
```

看看方法 B 如何调用方法 A。最初在方法 A 内部引发的异常是方法 A 本身的处理程序，但是一旦完成，方法 A 决定抛出异常，以便其他处理程序有机会处理该异常。作为方法 A 的其他处理程序。请注意，方法 A 可以在不同的类中，在不同的层中。

对于方法 A，抛出异常是通知方法 B 发生了某些事情的好方法。

# php - 从两个多维数组中选择常用数组 - PHP

> ID：13227333
> 
> 赞同：0
> 
> 时间：2012-11-05T06:54:56.170
> 
> 标签：php, multidimensional-array, array-intersect

我的第一个数组是

```
Array (
 [0] => Array
     (
         [user_id] => 1
         [name] => name1
     )

 [1] => Array
     (
        [user_id] => 2
        [name] => name2
    )
) 
```

我的 Secondarray 是

```
Array (
 [0] => Array
     (
         [user_id] => 2
         [name] => name2
     )

 [1] => Array
     (
        [user_id] => 3
        [name] => name3
    )
) 
```

常见的数组是 user_id=2 的数组如何选择该数组？
我想要这两个数组的交集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:38:12.817

```
<?php
$array1 = array(
    array(
        'user_id' => 1,
        'name'    => 'foo'
     ), 
    array(
        'user_id' => 2,
        'name'    => 'foobar'
    )
);
$array2 = array(
    array(
        'user_id' => 2,
        'name'    => 'foobar'
    ), 
    array(
       'user_id' => 3,
       'name'    => 'baz'
    )
);

/**
 * Return the common sub_array of tow arrays with tow dimensions
 *
 * @param $arrayA - the first tow dimension array
 * @param $arrayB - the second tow dimension array
 *
 * @return array - an empty array in case the tow arrays don't
 * have any common elements, otherwise an tow dimension array
 * containing the common elements
 */
function get_common_array($arrayA, $arrayB) {
    $result = array();

    foreach($arrayA as $keyA=>$sub_arrayA) {
        foreach($sub_arrayA as $metadata=>$data) {
            if('user_id' === $metadata) {
                foreach($arrayB as $keyB=>$sub_arrayB){
                   if(in_array($data, $sub_arrayB)) {
                        $result[] = $sub_arrayB;
                    }
                }
            }
        } 
    }

    return $result;
}

var_dump(get_common_array($array1, $array2)); 
```

这是一种解决方法，但如果我考虑改变拖曳数组的几何形状，以便能够使用 PHP 中实现的专用函数，那么这会更快。

# android - 数据更改后 ListView 强制重新膨胀列表行布局

> ID：13227335
> 
> 赞同：1
> 
> 时间：2012-11-05T06:55:04.660
> 
> 标签：android, listview

我的 ListAdapter 中有以下代码

```
 @Override
    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View childView, ViewGroup parent)
    {
        I dataItemForChild = null;
        if (childPosition >= dataModel.size())
        {
            // its an extra row
        }
        else
        {
            dataItemForChild = (I) getChild(groupPosition, childPosition);
        }

        boolean isEvenRow = (childPosition % 2 == 0);
        if (childView == null)
        {
            final HashMap<Integer, View> viewMap = new HashMap<Integer, View>();
            childView = inflateChildView(isLastChild, isEvenRow, childPosition, groupPosition, dataItemForChild);
            childView.setTag(viewMap);
            addViewMappingCache(viewMap, childView);
            populateChildView(isLastChild, isEvenRow, childPosition, groupPosition, dataItemForChild, childView, viewMap);
        }
        else
        {
            populateChildView(isLastChild, isEvenRow, childPosition, groupPosition, dataItemForChild, childView, (HashMap<Integer, View>) childView.getTag());
        }
        return childView;
    } 
```

问题是我有不同的布局用于列表中的不同行。当我更新数据然后调用 adapter.notifyDataChanged() 时，由于 childView 不为 null，它不会再次调用 inflateChildView，因此某些行上的布局不再与数据所需的布局匹配。

有没有办法使特定行“无效”或清除其布局缓存，使其传入的 childView 为空？

我试图实现的具体用例是最后一行，上面写着“加载更多”。再次加载后，我希望用数据行替换 LoadMore 行，然后（如果有的话）新的最后一行应该是 LoadMore 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:24:16.710

您是否尝试使用[getItemViewType](http://developer.android.com/reference/android/widget/Adapter.html#getItemViewType%28int%29)。当您的列表包含不同类型的行时，这很棒。适配器实现将独立管理每种行的缓存。

# c++ - HASH 函数和实现多键哈希映射

> ID：13227340
> 
> 赞同：2
> 
> 时间：2012-11-05T06:55:23.853
> 
> 标签：c++, c, math, hash, hashmap

**目标**：创建一个带有 2 个整数键的哈希映射（使用无符号整数转换将指针转换为整数，是的，这是可行的）并将其映射到单个值。

**尝试的解决方案**：所以我已经有一个哈希映射，它采用单个键并将其成功映射到值。我现在将它扩展到使用[“配对功能”](http://en.wikipedia.org/wiki/Pairing_function)来获取两个键。所以我拿了两个密钥，使用 Cantor 配对函数将它们配对，然后对这个组合密钥进行哈希处理。

**瓶颈：**所以两个键的问题是康托尔配对函数进行乘法运算，导致整数溢出，因此“不”给我唯一的输出，因为它应该在数学上做。

**问题**：

1.  我看到很多散列函数做乘法。整数溢出是散列中的正常现象还是很糟糕？
2.  我还考虑将另一个键附加到一个新的 64 位整数中。就像 aaaaaaaabbbbbbbb 一样，然后将其传递给哈希映射。但是我担心这可能会由于浮点表示而导致出现像 NaN 这样的异常数字，这可能很糟糕。
3.  欢迎任何更好的想法。

如果某些部分不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:05:23.957

你可能想看看[boost::hash_combine](http://www.boost.org/doc/libs/1_51_0/doc/html/hash/combine.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T09:22:16.930

1.  整数溢出并不是那么糟糕。确实，它可能会导致冲突，但是对于哈希映射的哈希来说，很少有冲突是可以的。

2.  也许是个坏主意。它可能会导致太多的冲突。

3.  如果您的输入是`N`位宽，那么您的输出必须至少是`2N`位宽。所以为了适应`uint`输入，你需要一个`ulong`大小的输出。如果输入高于该值，则会导致溢出。如果输出小于该值，则会出现冲突/重复。

但确实没有多少功能适合内部`2N`尺寸。你可以试试

```
a * uint.MaxValue + b 
```

或者[这个](http://szudzik.com/ElegantPairing.pdf)

```
a >= b ? a * a + a + b : a + b * b 
```

这两个都是无符号长的。这两个是它可以获得的最节省空间的。

另请参阅[以唯一且确定的方式将两个整数映射为一个](https://stackoverflow.com/questions/919612/mapping-two-integers-to-one-in-a-unique-and-deterministic-way)。

# javascript - 使用javascript跨浏览器解决方案上传前获取文件信息

> ID：13227341
> 
> 赞同：0
> 
> 时间：2012-11-05T06:55:23.960
> 
> 标签：javascript, file-upload, internet-explorer-8, fileapi

我知道任何版本的 IE 都不支持 HTML5 的文件 API。但是在使用 javascript 将文件信息上传到服务器之前，是否有任何解决方法可以获取文件信息（大小、类型）。我需要在上传之前检查文件的大小。File Api 为我工作，但不适用于 IE。我也需要它来支持 IE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:07:27.413

在纯 JS 中这是不可能的。

由于安全原因，Javascript 无法访问本地文件。

你可以使用这个库，做你想做的事：[http ://code.google.com/p/swfupload/](http://code.google.com/p/swfupload/)

# ruby-on-rails - 如何在 ruby on rails 中验证搜索表单？

> ID：13227345
> 
> 赞同：0
> 
> 时间：2012-11-05T06:55:36.753
> 
> 标签：ruby-on-rails, search, post, blogs, message

我已经为我的 rails 3 博客应用程序实现了一个简单的搜索功能。我想以这样的方式验证它，即使用不匹配的关键字，或者当搜索文本字段为空白时，&当用户单击搜索按钮时，它应该显示一条消息“您的搜索条件无效。请尝试使用有效关键字"

我的代码如下：

在后期模型中，

```
class Post < ActiveRecord::Base
attr_accessible :title, :body
validates_presence_of :search
validates :title, :presence => true, :uniqueness => true
validates :body, :presence => true, :uniqueness => true
  def self.search(search)
    if search
      where("title LIKE ? OR body LIKE ?","%#{search.strip}%","%#{search.strip}%")
    else
      scoped
    end
  end
end 
```

在后控制器中，

```
 class PostsController < ApplicationController
  def index    
   @posts=Post.includes(:comments).search(params[:search])
   .paginate(per_page:2,page:params[:page]).order("created_at DESC")
  end
end 
```

在 Posts/index.html.erb (视图)

```
<div class = "search">
 <span>
  <%= form_tag(posts_path, :method => :get, :validate => true) do %>
    <p>
    <%= text_field_tag (:search), params[:search] %>
    <%= submit_tag 'Search' %>
  </br>
    <% if params[:search].blank? %>
    <%= flash[:error] = "Sorry... Your Search criteria didnt match. 
     Please try using  different keyword." %>
    <% else %>
    </p>
  <% end %>  
  </p>
  <% end %>
 </span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:06:17.710

您可以检查 params[:search] 是否为空白，这意味着文本字段是否为空白：

```
if params[:search].blank?
   flash[:notice] = "your search criteria is invalid. Please try using valid keywords"
   render 'index'
end 
```

编辑：

如果没有关键字匹配：

```
if @posts.nil?
  flash[:notice] = "your search criteria is invalid. Please try using valid keywords"
  render 'index'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:05:17.167

将 ActiveModel 用于具有验证的无表模型 - 可能是类似的模型`PostSearch`，您可以在其上添加验证，就像对任何其他模型一样。

该模型：

```
class PostSearch
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :input

  validates_presence_of :input
  validates_length_of :input, :maximum => 500

end 
```

和你的表格：

```
<%= form_for PostSearch.new(), :url=>posts_path, :method=>:get, :validate=>true do |f| %>
  <p>
    <%= f.label :input %><br />
    <%= f.text_field :input %>
  </p>
  <p><%= f.submit "Search" %></p>
<% end %> 
```

将它与[客户端验证](https://github.com/bcardarella/client_side_validations)结合使用可以带来良好的用户体验。

关于 ActiveModel 的信息：

[http://railscasts.com/episodes/219-active-model](http://railscasts.com/episodes/219-active-model)

Railscast 源代码：

[https://github.com/ryanb/railscasts-episodes/tree/master/episode-219/](https://github.com/ryanb/railscasts-episodes/tree/master/episode-219/)

# python - 使用远程驱动程序设置 chrome 选项

> ID：13227346
> 
> 赞同：22
> 
> 时间：2012-11-05T06:55:40.673
> 
> 标签：python, selenium, webdriver, selenium-chromedriver

所以有很[长的开关列表](http://peter.sh/experiments/chromium-command-line-switches/)可以传递给 chromedriver。

我想使用其中的一些，特别是`--disable-logging`.

我不想（只）在本地使用 chromedriver，我想编写我所有的代码来使用 `webdriver.Remote()`.

这是我用来设置 chrome 驱动程序的代码，它适用于 vanilla chrome 实例。

```
driver = webdriver.Remote(
    command_executor = 'http://127.0.0.1:4444/wd/hub',
    desired_capabilities = {
        'browserName': 'chrome',
    }
) 
```

但是我不知道如何传递其他选项。

当我查看时，`driver.capabilities`我看到以下内容

```
{
    u'rotatable': False,
    u'browserConnectionEnabled': False,
    u'acceptSslCerts': False,
    u'cssSelectorsEnabled': True,
    u'javascriptEnabled': True,
    u'nativeEvents': True,
    u'databaseEnabled': False,
    u'chrome.chromedriverVersion': u'23.0.1240.0',
    u'locationContextEnabled': False,
    u'takesScreenshot': True,
    u'platform': u'MAC',
    u'browserName': u'chrome',
    u'webdriver.remote.sessionid': u'1352096075502',
    u'version': u'22.0.1229.94',
    u'applicationCacheEnabled': False,
    u'webStorageEnabled': True,
    u'handlesAlerts': True,
    u'chrome.nativeEvents': False
} 
```

我没有[看到任何其他参数](http://selenium-python.readthedocs.org/en/latest/api.html)（除了`desired_capabilities`）用于将参数传递给 chromedriver 通过`webdriver.Remote`. 这是真的？我错过了什么吗？还有其他自定义chromedriver的策略吗？

CromeDrive wiki 页面上有一个很好的示例，显示[“使用特定标志启动 Chromium”，](http://code.google.com/p/selenium/wiki/ChromeDriver)但是所有示例都是针对`webdriver.Chrome()`; 该示例也在 java 中，因此它甚至可能在 python 中不起作用。

如果有人让这个工作或可以告诉我这只是行不通，我将不胜感激。谢谢。

**新问题**

我不确定处理后续问题的最佳方式。

所以，我得到了问题的答案，但我仍然无法关闭日志记录。签出以下记录器行。

```
[0.455][INFO]:      Launching chrome: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome --enable-logging --log-level=1 --disable-hang-monitor --disable-prompt-on-repost --dom-automation --full-memory-crash-report --no-default-browser-check --no-first-run --disable-background-networking --disable-sync --disable-translate --disable-web-resources --safebrowsing-disable-auto-update --safebrowsing-disable-download-protection --disable-client-side-phishing-detection --disable-component-update --disable-default-apps --use-mock-keychain --ignore-certificate-errors --disable-logging about:blank 
```

我可以将参数传递`--disable-logging`给 chromedriver，但它似乎只关心启用日志记录的第一个参数。我想我需要找出 Chrome 新实例的默认参数保存在哪里。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-05T07:14:50.170

这应该为您提供可用的标志：

```
from selenium import webdriver
options = webdriver.ChromeOptions()
# set some options
# for example:
# options.add_argument('--disable-logging')
driver = webdriver.Remote(desired_capabilities=options.to_capabilities()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-23T19:20:04.560

自从 selenium 远程和 chrome 网络驱动程序发生变化以来，这只是我的两分钱。

```
import os
from selenium import webdriver

class RemoteBrowser:

    chrome_options = webdriver.ChromeOptions()
    chrome_options.add_argument('whitelisted-ips')
    chrome_options.add_argument('headless')
    chrome_options.add_argument('no-sandbox')
    chrome_options.add_argument('window-size=1200x800')

    def __init__(self):
        self.hub_url = os.environ['HUB_URL']
        self.driver = webdriver.Remote(
            command_executor='http://' + self.hub_url + '/wd/hub',
            desired_capabilities = {'browserName': 'chrome'},
            options=self.chrome_options
        ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T07:15:45.503

从源代码看来，唯一可行的方法就是通过`desired_capabilities`. 该字典通过 POST 请求[直接发送到删除驱动程序。](http://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/remote/webdriver.py#105)

在查看了如何使用特定标志启动铬之后，也许这样的事情会起作用：

```
desired_capabilities = {
    'browserName': 'chrome',
    'chrome.switches': ['--disable-logging']
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T07:29:32.993

ChromeOptions() 用于传递附加参数。试试这个来禁用 chromedriver.log

```
driver = webdriver.Chrome(service_log_path='/dev/null') 
```

# model-view-controller - MVC 作为客户端的 Nginx 配置

> ID：13227347
> 
> 赞同：4
> 
> 时间：2012-11-05T06:55:48.633
> 
> 标签：model-view-controller, nginx, provider

有人可以发光吗？这就是问题所在：我需要在运行 Nginx 的服务器上创建一个站点。我对这台服务器没有经验，所以我一直在关注它。我想省略 index.php，这样

```
http://www.mydomain.com/index.php/welcome/index 
```

变成

```
http://www.mydomain.com/welcome/index 
```

然后我想提取 /welcome/index 以便我可以在 MVC 应用程序中开始并使用它。我一直在环顾四周，但我迷失在那些可能在做自己的配置的人的俱乐部中。

我的问题是我是否可以作为客户端影响服务器响应，就像通过 htaccess 文件使用 Apache 完成的那样，或者我是否需要让托管服务器的提供商参与进来？我已请求为此更改服务器，但我得到的支持不是很有帮助。

我能够在 nginx.conf 文件中模拟所需的服务器响应。这告诉我这是可以做到的。对于那些感兴趣的人。通过 $_SERVER['REQUEST_URI'] 读取 url 上的值。

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;

        location / {
            root   html;
            index  index.php index.html index.htm;

           try_files $uri $uri/ /index.php;

        }

                include mime.types;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        location ~ \.php$ {
            root           html;
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            include        fastcgi_params;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T07:04:45.587

我这样做：

```
location / {
    try_files $uri $uri/ /index.php?uri=$uri&$args;
} 
```

然后你`$_GET['uri']`从你的`index.php`. 你应该看看 nginx 的[try_files](http://wiki.nginx.org/HttpCoreModule#try_files)文档。

或者，如果您想通过以下方式访问它`$_SERVER['REQUEST_URI']`：

```
location / {
    try_files $uri $uri/ /index.php?$args;
} 
```

### 编辑：

仅查看您的服务器配置的几件事：

*   您已经在块中包含了 mime.types `http`，因此无需在`server`块中再次包含它们

*   `root html;`移动到`index index.php...`你的`server`街区可能是个好主意

*   一定要通读[这些](https://calomel.org/nginx.html)示例配置（评论中解释的所有内容），这是开始掌握 nginx conf 的好方法

*   [Nginx 网站](http://wiki.nginx.org/Resources)有一些非常好的资源

# sql - 如何在 SQL 查询中尽量减少转换函数的使用？

> ID：13227349
> 
> 赞同：0
> 
> 时间：2012-11-05T06:55:56.443
> 
> 标签：sql, oracle10g

我的 SQL 查询包含大量 ltrim() 、 rtrim() 、 substring() 等转换函数...它们显着影响查询性能...请回答我的以下查询：

*   如何在我的查询中最小化转换函数的使用？
*   除了可以在查询中使用的转换函数之外，还有哪些可能的替代方法？
*   替代方案会显着提高我的查询性能吗？

...请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:54:00.260

How do you know these functions are consuning time in execution? have you run it without these functions and noticed that it is quicker?

Are all the columns in the where clause indexed?

If you look at the query plan can you see table scans?

How many rows are in this table?

You could create a new column in your table that contains cleaned up data out of the emp_info column. i.e.

```
UPDATE YourTable SET NewColumn = ltrim(rtrim(substr(emp_info, 1, 9))) 
```

Then add a trigger to your table to ensure it is always up to date

Then add an index to the column.

Then alter your select to use the new column

You might see some performance improvement. It's impossible to say based on the information you've given.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:19:08.480

您可以在获取输入时在前端处理这些转换函数，例如 ltrim、Rtrim、Substring。这些类型的字符串函数在前端也可用。例如：Trim(),Substring()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T20:07:15.053

`ltrim(rtrim(`您可以通过替换为节省一点时间`trim(`

例子：

```
create table test1(a varchar2(4000));

--Create 1 million rows
--This is hopefully a "large" amount of rows, but small enough to fit
--in memory.  This way we can test the CPU time to process the rows
--instead of the IO time to read the data.
begin
    for i in 1 .. 10 loop
        insert into test1 select '          '||level||'          '
        from dual connect by level <= 100000;
    end loop;
    commit;
end;
/

--Note: You'll want to run the statements several times first to
--"warm up" the database, and get everything in memory.

--0.33 seconds
select count(*)
from test1
where ltrim(rtrim(a)) = '5';

--0.20 seconds
select count(*)
from test1
where trim(a) = '5'; 
```

但这对于处理 100 万行来说是非常少的时间。

您的系统处理 200 万行需要多长时间？你的数据有什么不寻常的地方吗？例如，您是否使用大型 CLOB 而不是小型 VARCHAR2？您确定问题不是由创建不同解释计划的谓词引起的吗？例如，Oracle 可能认为函数返回的行数明显少于实际返回的行数，因此使用嵌套循环而不是哈希连接。

# iphone - 随机播放 NSMutableArray 而不重复并在 UIButton 中显示

> ID：13227350
> 
> 赞同：2
> 
> 时间：2012-11-05T06:55:57.167
> 
> 标签：iphone, ios, uibutton, nsmutablearray

在我看来，我有 12 个按钮，一个数组包含 6 个名称，我想在`UIButton`标题中打印数组名称。这是我的代码：

```
texts = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",nil];
UIButton *button;
NSString *name;
NSUInteger count = [texts count];
int i=0;

for(UIView *view in self.view.subviews)
{
    if([view isKindOfClass:[UIButton class]])
    {
        button= (UIButton *)view;
        if(button.tag >= 1||button.tag <= 20)
        {
            int value = rand() % ([texts count] -1) ;
            int myTag= i+1;
            button = [self.view viewWithTag:myTag];
            name=[NSString stringWithFormat:@"%@",[texts objectAtIndex:value]];
            [button setTitle:name forState:UIControlStateNormal];
            NSLog(@"current  name :%@",name);
        }
        i++;
    }

}
[super viewDidLoad]; 
```

我面临的问题是：

1.  在重复洗牌值时，我尝试使用[What's the Best Way to Shuffle an NSMutableArray？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)，它不工作。

2.  我想要 12 个按钮中的 6 个标题，这意味着每个标题将在 2 个按钮中。请帮我解决这个问题。我应该做出哪些改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:13:52.293

基本上，您需要将洗牌逻辑与将名称添加到按钮功能分开。所以首先打乱数组，然后设置按钮的名称。

```
[super viewDidLoad]; //Always super call should be the first call in viewDidLoad
texts = [[NSMutableArray alloc] initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6", @"1",@"2",@"3",@"4",@"5",@"6", nil];
//adding all 12 button titles to array, use your own logic to create this array with 12 elements if you have only 6 elements

NSUInteger count = [texts count];

for (NSUInteger i = 0; i < count; ++i) {
        // Select a random element between i and end of array to swap with.
        NSInteger nElements = count - i;
        NSInteger n = (arc4random() % nElements) + i;
        [texts exchangeObjectAtIndex:i withObjectAtIndex:n];
}

UIButton *button = nil;
NSString *name = nil;
int i = 0;

for(UIView *view in self.view.subviews)
{
    if([view isKindOfClass:[UIButton class]])
    {
        button= (UIButton *)view;
        if(button.tag >= 1 && button.tag <= 20)
        {
            name = [NSString stringWithFormat:@"%@",[texts objectAtIndex:i]];
            //assuming that the above texts array count and number of buttons are the same, or else this could crash
            [button setTitle:name forState:UIControlStateNormal];
            NSLog(@"current  name :%@",name);
            i++;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:38:20.977

制作 NSMutableArray 的类别

```
@implementation NSMutableArray (ArrayUtils)
- (void)shuffle{
static BOOL seeded = NO;
if(!seeded)
{
    seeded = YES;
    srandom(time(NULL));
}
NSUInteger count = [self count];
for (NSUInteger i = 0; i < count; ++i) {
    // Select a random element between i and end of array to swap with.
    int nElements = count - i;
    int n = (random() % nElements) + i;
    [self exchangeObjectAtIndex:i withObjectAtIndex:n];
}
}
@end 
```

# windows - 警告：找不到入口符号 nable-stdcall-fixup；违约

> ID：13227354
> 
> 赞同：4
> 
> 时间：2012-11-05T06:56:08.150
> 
> 标签：windows, qt, linker, mingw, linker-errors

这`mingw`包含`gcc 4.6.3`，名称为 - i686-w64-mingw32。

在**Windows 上，** Qt 的`.pro`文件 wrt 是一个 hello world 程序：

```
QT          += core gui
TEMPLATE    = app
TARGET      = ef

SOURCES     = ef.cpp
DEPENDPATH  += .

INCLUDEPATH += . 
INCLUDEPATH += c:/R-2.15.1/include
INCLUDEPATH += c:/R-2.15.1/library/Rcpp/include
INCLUDEPATH += c:/R-2.15.1/library/RInside/include

LIBS        += -L c:/R-2.15.1/bin/i386 -lR
LIBS        += -L c:/R-2.15.1/library/Rcpp/libs/i386 -lRcpp
LIBS        += -L c:/R-2.15.1/library/RInside/libs/i386 -lRInside 
```

程序编译如下：

![在此处输入图像描述](../Images/0a0cbb48b44f9f5297a4c08f233fc1b1.png)

注意最后有一个警告。

系统路径如下：

![在此处输入图像描述](../Images/f25152e22beb62c0e9e6a590a1c9f449.png)

Qt的路径：

![在此处输入图像描述](../Images/9994d0022f6527e140aed3a5c2a3bc8b.png)

请指出我遗漏的一点。

**更新：**

* * *

现在我已经更新`qmake.conf`如下：

```
#
# qmake configuration for win32-g++
#
# Written for MinGW
#

MAKEFILE_GENERATOR  = MINGW
TEMPLATE        = app
CONFIG          += qt warn_on release link_prl copy_dir_files debug_and_release debug_and_release_target precompile_header
QT          += core gui
DEFINES         += UNICODE QT_LARGEFILE_SUPPORT
QMAKE_COMPILER_DEFINES  += __GNUC__ WIN32

QMAKE_EXT_OBJ           = .o
QMAKE_EXT_RES           = _res.o

QMAKE_CC        = gcc
QMAKE_LEX       = flex
QMAKE_LEXFLAGS      =
QMAKE_YACC      = byacc
QMAKE_YACCFLAGS     = -d
QMAKE_CFLAGS        =
QMAKE_CFLAGS_DEPS   = -M
QMAKE_CFLAGS_WARN_ON    = -Wall
QMAKE_CFLAGS_WARN_OFF   = -w
QMAKE_CFLAGS_RELEASE    = -O2
QMAKE_CFLAGS_DEBUG  = -g
QMAKE_CFLAGS_YACC   = -Wno-unused -Wno-parentheses

QMAKE_CXX       = g++
QMAKE_CXXFLAGS      = $$QMAKE_CFLAGS
QMAKE_CXXFLAGS_DEPS = $$QMAKE_CFLAGS_DEPS
QMAKE_CXXFLAGS_WARN_ON  = $$QMAKE_CFLAGS_WARN_ON
QMAKE_CXXFLAGS_WARN_OFF = $$QMAKE_CFLAGS_WARN_OFF
QMAKE_CXXFLAGS_RELEASE  = $$QMAKE_CFLAGS_RELEASE
QMAKE_CXXFLAGS_DEBUG    = $$QMAKE_CFLAGS_DEBUG
QMAKE_CXXFLAGS_YACC = $$QMAKE_CFLAGS_YACC
QMAKE_CXXFLAGS_THREAD   = $$QMAKE_CFLAGS_THREAD
QMAKE_CXXFLAGS_RTTI_ON  = -frtti
QMAKE_CXXFLAGS_RTTI_OFF = -fno-rtti
QMAKE_CXXFLAGS_EXCEPTIONS_ON = -fexceptions -mthreads
QMAKE_CXXFLAGS_EXCEPTIONS_OFF = -fno-exceptions

QMAKE_INCDIR        =
QMAKE_INCDIR_QT     = $$[QT_INSTALL_HEADERS]
QMAKE_LIBDIR_QT     = $$[QT_INSTALL_LIBS]

QMAKE_RUN_CC        = $(CC) -c $(CFLAGS) $(INCPATH) -o $obj $src
QMAKE_RUN_CC_IMP    = $(CC) -c $(CFLAGS) $(INCPATH) -o $@ $<
QMAKE_RUN_CXX       = $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $obj $src
QMAKE_RUN_CXX_IMP   = $(CXX) -c $(CXXFLAGS) $(INCPATH) -o $@ $<

QMAKE_LINK      = g++
QMAKE_LINK_C        = gcc
QMAKE_LFLAGS        = -Wl, -enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc
QMAKE_LFLAGS_EXCEPTIONS_ON = -mthreads
QMAKE_LFLAGS_EXCEPTIONS_OFF =
QMAKE_LFLAGS_RELEASE    = -Wl,-s
QMAKE_LFLAGS_DEBUG  =
QMAKE_LFLAGS_CONSOLE    = -Wl,-subsystem,console
QMAKE_LFLAGS_WINDOWS    = -Wl,-subsystem,windows
QMAKE_LFLAGS_DLL        = -shared
QMAKE_LINK_OBJECT_MAX   = 10
QMAKE_LINK_OBJECT_SCRIPT= object_script

QMAKE_LIBS      =
QMAKE_LIBS_CORE         = -lkernel32 -luser32 -lshell32 -luuid -lole32 -ladvapi32 -lws2_32
QMAKE_LIBS_GUI          = -lgdi32 -lcomdlg32 -loleaut32 -limm32 -lwinmm -lwinspool -lws2_32 -lole32 -luuid -luser32 -ladvapi32
QMAKE_LIBS_NETWORK      = -lws2_32
QMAKE_LIBS_OPENGL       = -lopengl32 -lglu32 -lgdi32 -luser32
QMAKE_LIBS_COMPAT       = -ladvapi32 -lshell32 -lcomdlg32 -luser32 -lgdi32 -lws2_32
QMAKE_LIBS_QT_ENTRY     = -lmingw32 -lqtmain

!isEmpty(QMAKE_SH) {
    MINGW_IN_SHELL      = 1
    QMAKE_DIR_SEP       = /
    QMAKE_COPY      = cp
    QMAKE_COPY_DIR      = xcopy /s /q /y /i
    QMAKE_MOVE      = mv
    QMAKE_DEL_FILE      = rm
    QMAKE_MKDIR     = mkdir
    QMAKE_DEL_DIR       = rmdir
    QMAKE_CHK_DIR_EXISTS = test -d
} else {
    QMAKE_COPY      = copy /y
    QMAKE_COPY_DIR      = xcopy /s /q /y /i
    QMAKE_MOVE      = move
    QMAKE_DEL_FILE      = del
    QMAKE_MKDIR     = mkdir
    QMAKE_DEL_DIR       = rmdir
    QMAKE_CHK_DIR_EXISTS    = if not exist
}

QMAKE_MOC       = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}moc.exe
QMAKE_UIC       = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}uic.exe
QMAKE_IDC       = $$[QT_INSTALL_BINS]$${DIR_SEPARATOR}idc.exe

QMAKE_IDL       = midl
QMAKE_LIB       = ar -ru
QMAKE_RC        = windres
QMAKE_ZIP       = zip -r -9

QMAKE_STRIP     = strip
QMAKE_STRIPFLAGS_LIB    += --strip-unneeded
load(qt_config) 
```

错误现在已更改为：

![在此处输入图像描述](../Images/b5a6086c268910362abe39fa10587db0.png)

**更新**

我刚刚删除了`Wl, and -enable-std`.. 之间的空格，上面的错误就消失了：

![在此处输入图像描述](../Images/8df6b6180a10440df00ff251e10fac08.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T13:08:33.943

正如在[这个合并请求](https://qt.gitorious.org/qt/qt/merge_requests/1154)中看到的，文件中有一个错误，`qmake.conf`它配置了每当您使用 qmake 的默认配置时使用的变量。

该选项`-enable-stdcall-fixup`需要以 a 为前缀`-Wl,`才能正确解析，`mingw32-g++`因为在解析时`-e...`将被拆分`-e ...`。该前缀仅表示“不要将以下内容解析为`-e nable-stdcall-fixup`而是解析为`-enable-stdcall-fixup`”。

该`qmake.conf`文件包含`-Wl`但在错误的行中，因此合并请求，它说

> 领先的“-Wl”显然是不小心分到了错误的行上。

补丁将`-Wl`一行向上移动。您可以在`qmake.conf`文件上手动执行此操作，该文件应位于 Qt 安装下的`mkspecs/win32-g++/qmake.conf`. 更改以下行：

```
QMAKE_LFLAGS    = -enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc
QMAKE_LFLAGS_EXCEPTIONS_ON = -mthreads -Wl 
```

进入这个：

```
QMAKE_LFLAGS    = -Wl,-enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc
QMAKE_LFLAGS_EXCEPTIONS_ON = -mthreads 
```

注意和之间*不能有空格*。它应该作为*一个参数*传递给以实现我们想要的。`-Wl,``-enable-stdcall-fixup`*`g++`*

# android - Sqlite 查询以字节形式检查列的大小

> ID：13227358
> 
> 赞同：1
> 
> 时间：2012-11-05T06:56:33.587
> 
> 标签：android, sqlite

我已经尝试过大量搜索如何获取磁盘中使用的表的内存大小。我想 SQLite 不可能。

我认为。如果我得到行大小，我可以获得表格大小。是否有查询 Sqlite 以检查列的内存大小为字节。

**例如，** 我有以下字段的表格。

Id (int) 名称 (text) Img (blob)。

如何检查表中使用的 id、name、img 的总内存大小。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:15:23.923

SQLite 本身不会为您提供此信息，但该[`sqlite-analyzer`工具](http://www.sqlite.org/download.html)可以。

[如果您想从您的应用程序中执行此操作，您必须读取所有记录值并从中推断出磁盘记录格式](http://www.sqlite.org/fileformat2.html#record_format)中使用了多少字节。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-05T07:00:16.290

你可以从中得到桌子的大小。

[如何找到表的当前大小（在内存中）？](https://stackoverflow.com/questions/3286061/how-to-find-current-size-in-memory-of-table)

这可能是列

[http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/08d53163-5d40-49d0-a6ed-b1b1eccca235/](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/08d53163-5d40-49d0-a6ed-b1b1eccca235/)

试试这个可能对你有一些帮助。

# javascript - Javascript——在循环中附加事件

> ID：13227360
> 
> 赞同：0
> 
> 时间：2012-11-05T06:56:44.597
> 
> 标签：javascript, jquery

> **可能重复：**
> [在循环中添加“点击”事件监听器](https://stackoverflow.com/questions/8909652/adding-click-event-listeners-in-loop)

我做了一个演示。所以让我们先看看HTML。

```
<a href="#" id="testA">testA</a>
<a href="#" id="testB">testB</a>    

<div id="showA">showA</div>
<div id="showB">showB</div> 
```

我想将`click`事件绑定到 Elements `a`。当它点击时，`alert`相关的`div`. （点击`id="testA"`，提醒`id="showA"`...）

我编写了 jQuery 代码。

```
var arr = ["A","B"];    
  for(var i=0;i<arr.length;i++){
    $("#test"+arr[i]).click(function(){
      alert($("#show"+arr[i]).text())
    });
  } 
```

但它不起作用。我调试这段代码，发现这段代码`alert($("#show"+arr[i]).text())`

仅在我单击`a`元素时运行。当我点击`a`. 变量`i`已经存在`3`。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:58:39.663

问题是一旦事件处理程序被执行，`i`将达到它的最终值并停留在`arr.length`. 您可以使用闭包来捕获`i`循环每次迭代的值：

```
var arr = ["A","B"];    
for(var i=0;i<arr.length;i++) {
    (function (i) {
        $("#test"+arr[i]).click(function(){
            alert($("#show"+arr[i]).text())
        });
    }(i));
} 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/DHrk6/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:02:41.783

最简单/最干净的解决方案是使用`forEach`循环。

```
arr.forEach(function(val) {
  $("#test"+ val).click(function() {
    alert($("#show"+ val).text())
  });
}); 
```

如果你想支持旧版浏览器，网上有很多 polyfill。

**编辑：**由于您使用 jQuery，您也可以使用`$.each`：

```
$.each(arr, function(idx, val) { ... }); 
```

# autosys - autosys 中的通配符

> ID：13227362
> 
> 赞同：0
> 
> 时间：2012-11-05T06:56:53.383
> 
> 标签：autosys

我想在 autosys 中编写一个文件观察器来等待像`imsbestex_20111012`. 附加到文件名末尾的日期每天都在变化。因此，我希望我的 autosys 作业搜索以 . 开头的文件名`imbestex_%`。即使我正在使用

`watch_file: /v/global/user/s/sr/sritamd/BESTEX/imsbestex_%`

这项工作没有按预期的方式工作。不能使用通配符来指定通用文件名吗？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:15:48.870

AutoSys 中用于作业名称的通配符是百分比 (%)，但对于文件名，它是星号 (*)。

```
watch_file: /v/global/user/s/sr/sritamd/BESTEX/imsbestex_* 
```

-t。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T06:43:03.233

如果您特别想根据日期查找特定文件名：

您可以使用配置文件中定义的环境变量。可以使用今天的日期更新此变量，如下面的示例所示。由于配置文件是在每次运行作业时获取的，因此该变量将可用于 autosys 作业。

在基于 unix 的环境中，将以下内容添加到配置文件中：

```
export TODAYS_DATE=`date +%Y%m%d` 
```

在 autosys 文件观察程序作业中，使用如下变量：

```
watch_file: /v/global/user/s/sr/sritamd/BESTEX/imsbestex_${TODAYS_DATE} 
```

# java - 模拟大量用户对 Web 服务的请求的好方法？

> ID：13227366
> 
> 赞同：0
> 
> 时间：2012-11-05T06:56:59.880
> 
> 标签：java, multithreading, web-services, simulation

我有一个由不同的 tomcat 容器组成的 Web 服务。它们在 Web 服务系统中执行不同的任务。比如有的作为登录服务，有的作为注册服务，有的作为RESTapi服务。

我想模拟大量不同的用户请求，比如10000多个，找出web服务的瓶颈在哪里，测试系统的稳定性。

有没有用java模拟的好方法？据我所知，使用 java 多线程的线程数量有限，具体取决于不同的 JVM 或操作系统。那么还有其他更好的方法来模拟这些请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:05:24.257

根据您的要求，JMeter 是更好的选择。您可以使用该工具测试您的 Web 服务性能。

[在这里](https://docs.google.com/open?id=0Bw1KnQBZ4LY7aTVLZXRwdlVGSFU)，我附上了如何使用 JMeter 测试 Web 服务的视频。我想这会对你有所帮助。

# java - 如何加入两个类并基于第三个“桥实体”打印报告 [java]

> ID：13227367
> 
> 赞同：1
> 
> 时间：2012-11-05T06:57:02.893
> 
> 标签：java, collections

我有一些 .txt 文件，我读入这些文件以构建两个对象。

项目，带字段：

```
Description|SKU|Retail Price|Discount 
```

和存储字段：

```
ID|Description|Street|City|Province|Postal Code|Store Phone|Auto Service 
```

我有另一个 .txt 文件用于 Inventory 对象，这是一个将它们联系在一起的桥梁实体。库存的字段是：

```
Store ID|Item SKU|Item Count 
```

显然，这些来自 Item 和 Store 类。

这是我的目标：

**我想创建一个库存报告，将三个列表合成为单个控制台打印输出，但我遇到了如何到达那里的问题。**

据我所知，这大约是：

```
public static void write(List<Item> items, List<Store> stores, List<Stock> stocks) {
    System.out.println();
    System.out.println("Inventory Report");
    System.out.println("----------------");

    for (Item it : items) {
        for (Stock s : stocks) {
            if(it.getProductNumber() == s.getItemSKU()) {
                for (Store st: stores) {
                    if(st.getId() == s.getStoreID()) {
                        System.out.println(it.getDescription() + "is from store" + st.getId() + "in" + st.getCity()  + "and costs" + it.getPrice());
                    }
                }
            }
        }
    }
} 
```

我知道显而易见的解决方案应该是创建表并将信息放入其中，但这是一个作业，表明我应该使用纯 Java 来完成...

我可能很接近，但我的逻辑在这里不正确......如何最好地交叉引用基于第三类的两个类？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:09:34.837

我认为您可以执行以下操作：

创建拖车地图为：

```
 Map<String, Item> itemMap = new HashMap<String, Item>();
    Map<String, Store> storeMap = new HashMap<String, Store>(); 
```

在阅读 时`items`，填充`itemMap`using`SKU`作为键和`Item`对象作为值。同样，在读取时，使用as 键和object 作为值`stores`填充。`storeMap``id``Store`

现在，当您读取第二个文件时，分别使用and检索相应的`Item`和`Store`对象，`itemMap`并根据需要使用属性。`storeMap``SKU``ID`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:15:35.090

将您的项目和商店存储在地图中，其中它们的 ID 是关键：

```
 Map<Integer, Item> items = new HashMap<Integer, Item>();
    Map<Integer, Store> stores = new HashMap<Integer, Store>(); 
```

将它们传递给您的输出方法，就像蛋糕一样简单：

**编辑**：*在带有评论的行中几乎没有错误，修复它。*

```
public static void write(Map<Integer, Item> items, Map<Integer, Store> stores, List<Stock> stocks) {
    System.out.println();
    System.out.println("Inventory Report");
    System.out.println("----------------");

    for(Stock stock : stocks) { // <-- for all Stocks
        Store store = stores.get(stock.getStoreID()); // <-- get Store
        Item item = items.get(stock.getItemSKU());  // <-- get Item
        System.out.println(item.getDescription() + "is from store" + store.getId() + "in" + store.getCity()  + "and costs" + item.getPrice());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:09:23.160

考虑使用地图，而不是进行顺序搜索。

```
for (Item it : items) {
    Stock stock = stockMap.get(it.getProductNumber());
    Store store = storeMap.get(stock.getStoreId());

    System.out.println(".....");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T07:11:02.063

假设`Item.SKU`是唯一键。

您可以通过迭代多侧的条目并选择一侧的相应条目来执行多对一连接。在这里，您有一个可以迭代的表，即桥：

```
- build an index for the first table:
 - for every row, insert it to a map ID => row. You can use a HashMap
- build an index for the second table

- for every row in the bridge table
 - select the appropriate row in the first table using your index
 - select the appropriate row in the second table
 - print/store the data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T07:01:43.717

不完全确定这里的 *point 是什么，但我认为最简单的做法是创建一个合并对象，该对象将包含所有三个中的值，并将每个列表的值加载到此合并对象的各个项目中。显然，你加入他们是任意的。正如您所说，这是最适合数据库的工作，但如果您必须在纯 Java 中使用它，我认为保存所有值的单个对象是要走的路。

# java - “消费者关闭输入通道或发生错误。” - 尝试在 android 上使用 openGL 绘制一个矩形

> ID：13227373
> 
> 赞同：0
> 
> 时间：2012-11-05T06:57:49.383
> 
> 标签：java, android, opengl-es

这大约是我第二次在 android 上使用 openGL，我似乎无法破译这两个奇怪的错误消息：

```
E/InputDispatcher(60): channel '407a76f8 root.AirGates/root.AirGates.AirGatesActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
E/InputDispatcher(60): channel '407a76f8 root.AirGates/root.AirGates.AirGatesActivity (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

我试图在下面分离出我所有的openGL代码：

### 设置视口：

```
GL10 graphics = glGraphics.getGlGraphics();

graphics.glClearColor(0.0f, 0.0f, 0.0f, 1);
graphics.glViewport(0, 0, glGraphics.getWidth(), glGraphics.getHeight());

graphics.glMatrixMode(GL10.GL_PROJECTION);
graphics.glLoadIdentity();

graphics.glOrthof(0, glGraphics.getWidth(), 0, glGraphics.getHeight(), 1, -1); 
```

### 在我渲染之前（设置顶点索引和值）：

```
// allocate a 'raw' byte buffer, then 'cast it' into a ShortBuffer a short has 2 bytes of memory and there are 6 values
// (6 values because 2 tris with 3 vertices each, make up a quad)
// 0---1
// | / |
// 3---2
ByteBuffer tempBuffer = ByteBuffer.allocate(6 * 2);
tempBuffer.order(ByteOrder.nativeOrder());
vertexNumIndexes = tempBuffer.asShortBuffer();
vertexNumIndexes.put(new short[]{0,1,3, 1,2,3});
vertexNumIndexes.flip();

// need to allocate memory to hold the vertices: float is 4 bytes, times 4 vertices, times 2 (each vertex has an x and y)
ByteBuffer byteBuffer = ByteBuffer.allocateDirect(4 * 2 * 4);
byteBuffer.order(ByteOrder.nativeOrder());
vertices = byteBuffer.asFloatBuffer();
Point temp;
for(int counter = 0; counter < 4; counter++){
    temp = gate.getPoint(counter);
    vertices.put(temp.x);
    vertices.put(temp.y);
}
vertices.flip();

// values in 'vertices' are:
// 140.18016, 387.5
// 339.81982, 387.5
// 339.81982, 412.5
// 140.18016, 412.5 
```

### 在我实际的 render() 方法调用中：

```
GL10 graphics = glGraphics.getGlGraphics();

// set colour, RGBA
graphics.glColor4f(1, 1, 0, 1);

graphics.glEnableClientState(GL10.GL_VERTEX_ARRAY);
graphics.glVertexPointer(2, GL10.GL_FLOAT, 0, vertices);
graphics.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT, vertexNumIndexes);
graphics.glDisableClientState(GL10.GL_VERTEX_ARRAY); 
```

我的应用程序弹出，全屏黑屏（由视口设置），然后退出。知道这意味着什么吗？我现在正在尝试绘制一个简单的红色矩形（由 2 个三角形组成）。

# php - 什么情况下可以使用facebook上的getUser()函数？

> ID：13227376
> 
> 赞同：0
> 
> 时间：2012-11-05T06:58:00.713
> 
> 标签：php, facebook

同题，什么情况下可以使用facebook上的getUser()函数？PS我正在使用facebook php sdk api。

为什么我问这个问题是因为我发现如果我不将网站放在 facebook.com 中，那么 getUser() 函数将始终返回 null 或 0。

真的吗？getUser() 函数只能在 facebook.com 内的网站中使用？

谢谢。脸书新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:43:21.983

`getUser`如果有足够的数据可用于确定该方法，则该方法应返回活动的 facebook 用户 ID。这些数据可能来自不同的地方：

1.  签名请求 - 这可能来自 oauth 身份验证流程，或者如果它是一个画布应用程序，当您的页面加载到 by 时，facebook 会将其嵌入到 http POST`<iframe>`
2.  先前保存的会话数据 - 如果先前尝试确定用户成功，则生成的用户 ID 将保存到会话变量中
3.  访问令牌 - 在某些情况下，访问令牌可用于确定用户 ID

有关详细信息，请参阅[getUserFromAvailableData](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L564)方法，从开发人员的角度来看，`getUser()`当用户在 facebook 上进行身份验证并安装/授权您的应用程序时，它将返回当前 facebook 用户的 id。要实现这一点，请参阅[login 上的文档](http://developers.facebook.com/docs/concepts/login/)，对于外部网站，最好的选择是使用 facebook 的 javascript sdk 的`login`方法来获取后端所需的数据（存储在 cookie 中）。

# domain-driven-design - 我应该更喜欢在域对象中使用 eventtaggregator 吗？

> ID：13227383
> 
> 赞同：1
> 
> 时间：2012-11-05T06:58:24.687
> 
> 标签：domain-driven-design, prism

在阅读了许多关于 Prism 的文章后。我还是一头雾水！！

我正在尝试创建一个应用程序，其域对象将完全独立于 GUI。用户也可以从命令行与应用程序交互。所以完全解耦。我正在尝试制作可以使用某些事件相互交谈的域对象的独立组件。我应该如何实现这个？

我应该更喜欢在域对象中使用事件聚合器吗？相同的帖子很少，但没有一个能给我满意的答案。

如果不是，那么在域对象中实现相同功能的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:01:56.387

您不应将 Prism 中的事件聚合器用于域对象，因为它适用于 UI 事件。如果你想在你的领域模型中有类似的行为，你应该使用[领域事件](http://lostechies.com/jimmybogard/2010/04/08/strengthening-your-domain-domain-events/)。实际上，事件聚合器被域事件发布者所取代。

# oracle10g - oracle：获取 clob 列的长度

> ID：13227387
> 
> 赞同：0
> 
> 时间：2012-11-05T06:58:39.120
> 
> 标签：oracle10g

我`m using oracle10g,I have included "dbms_lob.getlength" to get length of a clob column,but it`无法获取并抛出错误，例如 ->

```
"ORA-00932: inconsistent datatypes: expected - got CLOB" 
```

请提出一些答案。

# angularjs - 在angularjs中设置初始值并触发点击应用程序init

> ID：13227391
> 
> 赞同：2
> 
> 时间：2012-11-05T06:58:47.540
> 
> 标签：angularjs

我被这个困住了。

我有一个使用 html5 历史 API 的搜索页面。

所以如果我搜索“html5”，我的网址是“/search/html5”。

现在我希望我的应用程序处理页面刷新。当我按“F5”时，我想看到我的应用程序用“html5”填充文本输入并触发单击按钮以启动搜索方法。

```
 <form>
        <input type="text" ng-model="searchText" />
        <button class="btn btn-primary" ng-disabled="!searchText" ng-click="search()" >search</button>
    </form> 
```

我真的很感激一些帮助。

UPD：我的意思是我需要手动（在角度的控制器之外）做类似的事情

```
$scope.searchText = 'html5';
$scope.search(); 
```

但我不知道如何访问 $scope。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T05:39:42.417

还有另一个很好的解决方案。

我喜欢它，因为它是原生的并且不需要任何 3rd 方库。

只需将其添加到您的 html 中的某个位置（同样，我使用 ejs 进行服务器模板）：

```
<p ng-init="searchText = '<%= searchText %>'; search();"></p> 
```

这种方式比[https://stackoverflow.com/a/13232922/801426](https://stackoverflow.com/a/13232922/801426)更好，因为使用后一个输入的值在搜索完成之前不会更新，而且它是一个 ajax 调用，所以需要一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:10:20.713

[http://plnkr.co/edit/VT5ss4](http://plnkr.co/edit/VT5ss4)

这可能是一种方法。它正在使用 Angular 的路由功能。 `$routeParams`在这种情况下，将为您提供访问 searchText 的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:15:15.067

我找到了解决方案（我使用 ejs 进行服务器模板）：

```
<script type="text/javascript">
    (function( $ )
    {
        "use strict";
        $(document).ready(function (){
            var $scope = angular.element($('#search-text')).scope();
            $scope.searchText = "<%= searchText %>";
            $scope.search();
        });
    }( jQuery ));
</script> 
```

感谢这个问题 -[从遗留代码调用 Angular JS](https://stackoverflow.com/questions/10490570/call-angular-js-from-legacy-code)

# android - 在 Android 上使用 Google 地图绘制路线的示例代码

> ID：13227392
> 
> 赞同：0
> 
> 时间：2012-11-05T06:59:00.583
> 
> 标签：android, google-maps

我想为我的自定义地图应用程序在给定的开始和结束方向之间绘制一条路径。

是否有任何库可以为 Android 本机应用程序绘制路线（行驶路径）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:03:00.980

尝试这个

```
String uri = "http://maps.google.com/maps?f=d&hl=en&saddr="+latitude+","+longitude+"&daddr="+location.getLatitude()+","+location.getLongitude();
            Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
            intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
            startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:03:45.870

如果您想在本机应用程序中绘制路径，那么此意图将帮助您

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?saddr="+ String.valueOf(current_lattitude) +","+ String.valueOf(current_longitude) +"&daddr="+ String.valueOf(dest_lati) +","+ String.valueOf(dest_longi)));
                        startActivity(intent); 
```

# svn - SVN限制分支删除

> ID：13227394
> 
> 赞同：1
> 
> 时间：2012-11-05T06:59:07.667
> 
> 标签：svn

我是svn的新手。在我的项目中，有人正在从 svn 中删除分支。如何限制用户删除分支。我们的 svn 服务器在 linux 中，开发人员正在使用 TSVN 开发 Windows 环境。谁能帮我限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:13:16.513

1.  预提交挂钩中的[svnperms.py](http://prabhugs.wordpress.com/tag/svnperms-py/)
2.  不用担心 snd 什么都不做 - 物理删除的分支仍存储在历史记录中，以后可以使用带有 PEG-revision 的相应 URL 检出

    `svn ls http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/`
    `Leichtbau-Deutsch/`
    `branche-francaise/`
    `i18n/`

但是在图中 Greetings 分支是可发现的并且可以被检出

![修订图](../Images/93c5c59bc8138707d93f496e2533f720.png)

```
>svn co http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Greetings@16
A    Greetings\Hello.txt
 U   Greetings
Checked out revision 16. 
```

# parsing - GDS 伽利略 MIR 文件

> ID：13227395
> 
> 赞同：2
> 
> 时间：2012-11-05T06:59:11.940
> 
> 标签：parsing, integration, galileo

我有很多 Galileo MIR 文件，想解析其中的信息。我在谷歌代码上看到了一个 VB 脚本代码。但是有没有其他方法可以实现这一点。我的目标是获取航段、PNR、乘客详细信息等的所有详细信息。任何帮助将不胜感激。

谢谢

# android - 调试时调试器在 Eclipse 中不起作用：无法为调试器绑定到本地 8616 无法连接到远程 VM。连接被拒绝

> ID：13227397
> 
> 赞同：1
> 
> 时间：2012-11-05T06:59:20.497
> 
> 标签：android, eclipse, debugging, android-emulator

调试项目时，调试器在我的 Eclipse 中不起作用。我已经卸载了 JDK、JRE 和 Eclipse，并安装了所有最新版本。JDK7、JRE7 和 Eclipse 经典版本：4.2.1。

但是调试器仍然无法正常工作。与我安装的以前版本一样出现相同的错误。IE

> 无法为调试器绑定到本地 8616
> 
> 无法连接到远程虚拟机。连接被拒绝。

我正在使用 Windows 8 操作系统。我已经尝试了所有其他方法。我已经从清单文件中设置了真正的可调试。我手动设置了端口还是不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:58:47.687

在 Windows 8 上运行可能存在一般问题。请参阅[http://code.google.com/p/android/issues/detail?id=39286](http://code.google.com/p/android/issues/detail?id=39286)

我尝试了很多修复，但无法让模拟器和调试器持续运行。

在调查期间，我注意到一些解压缩的 Android/Eclipse 文件被阻止。我运行了流（一个 sysinternals 工具）来解锁 Android SDK 中的所有内容，但这对我不起作用。

我还尝试关闭我的防火墙，从主机文件中删除“：1”条目并确保我使用的 ADBHOST 设置为 127.0.0.1。这些都是来自类似问题的建议，但没有一个能解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:38:11.130

基于在 32 位和 64 位 Windows 8 上的测试。

1）安装32位版本的Android SDK（即使在64位windows上）

2) 确保您安装了 32 位 Java 运行时

3) 将作为 Android 下载的一部分安装的 Eclipse exe 设置为在 Windows XP SP3 兼容模式下运行

4) 配置 Eclipse 以使用 ADBHost

# javascript - 避免多次发布表单

> ID：13227402
> 
> 赞同：0
> 
> 时间：2012-11-05T06:59:50.893
> 
> 标签：javascript, forms

我对提交的表格进行了澄清。当一个页面再次提交时，当我们再次刷新时，我不应该再次发布它。

我该怎么做？如何避免用户再次提交表单？

它可能是刷新或任何允许用户再次提交表单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:03:43.037

在前端，您可以在提交后禁用提交按钮。

在服务器端，您可以分配一个唯一的 id 或生成的随机密钥，您可以检查重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:06:06.510

您可以做的一件事是，在您的服务器中，您可以查找发出请求的 IP 地址，并在从同一用户发送的类似请求之间设置特定的时间间隔。

如果您使用的是 PHP，您可以查找 in`$_SERVER['REMOTE_ADDR']`以获取 IP 地址。

# c - gcc 4.6.3 中的 libm 链接问题

> ID：13227406
> 
> 赞同：1
> 
> 时间：2012-11-05T07:00:12.507
> 
> 标签：c, linux, math, gcc, linker

在 gcc 4.6.3 中，使用 -lm 链接 math.lib 是一种不同的方式。

它用于工作**gcc -lm file.c**但在**gcc 4.6.3**中它的**gcc file.c -lm**。

这种变化的原因是什么？或者它是一个错误？

谢谢

这是代码的一部分。

```
 float i = 100;
    printf("%f", sqrt(i));
    return 0; 
```

我是这样遵守的

gcc -lm mat.c

/tmp/ccPxTEjS.o：在函数“main”中：

mat.c:(.text+0x2c): 未定义对“sqrt”的引用

collect2: ld 返回 1 个退出状态

操作系统：Ubuntu 12.04

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:21:23.787

您说您尝试将其编译为：

```
gcc -lm mat.c 
```

gcc 的一些配置需要严格的选项排序，这要求库在使用它们的源代码之后：

```
gcc mat.c -lm 
```

这行得通吗？

# android - 将整数值存储到android数据库中

> ID：13227412
> 
> 赞同：0
> 
> 时间：2012-11-05T07:00:26.883
> 
> 标签：android, database, integer

在android中，如何获取一个值（整数类型）`EditText`并将其插入到具有整数字段的数据库中？

我正在使用下面的代码，但它不会将整数数据保存到数据库中！

```
EditText Price;
name = (EditText)findViewById(R.id.txt_GoodsName);
Price = (EditText)findViewById(R.id.txt_Price);
db.insertQuote(name.getText().toString(),Price.getText());

// ----------------------------------------------------------

public long insertQuote(String Quote,int Price1) 
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(GoodName, Quote);
    initialValues.put(Price, Price1);
    return db.insert(DATABASE_TABLE, null, initialValues);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:02:35.633

试试这个。您需要将 String 解析为 int，因为在函数中的第二个参数是 int 而不是字符串。

```
db.insertQuote(name.getText().toString(),Integer.parseInt(Price.getText().toString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:03:32.537

采用

```
db.insertQuote(name.getText().toString(),Integer.valueOf(Price.getText().toString())); 
```

或者

```
db.insertQuote(name.getText().toString(),new Integer(Price.getText().toString())); 
```

代替

```
 db.insertQuote(name.getText().toString(),Price.getText()); 
```

因为`db.insertQuote(String,Integer)`接受第二个参数作为整数而不是字符串。

# java - 如何使用服务监视文件夹

> ID：13227425
> 
> 赞同：1
> 
> 时间：2012-11-05T07:01:26.560
> 
> 标签：java, filesystemwatcher

我编写了一个程序，可以监视文件夹并让我知道这些文件夹中的更改。但这应该整天运行，直到系统打开。这应该作为后台任务运行（如批处理）。
我正在使用 Java WatchService 来监视文件夹。
我需要一些建议，

1.  如何使它成为作为批处理在后台运行的服务？
2.  如果我把它作为服务，这会影响系统的性能吗？因为文件夹中至少每 5 分钟会添加一次文件。

请提出你的想法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:57:26.357

当您的系统有足够的资源时，您可以并且它不应该影响您的系统性能。

**在java中执行此操作的步骤**

1.  编写一个小型 java 类`FolderMonitor`来监视特定文件夹。
    1.  加载目录`File("C:\folder1")`
    2.  迭代所有文件并将其最后修改时间保存在`Map` 映射键中，可以是 foderName+fileName，值是修改时间。
    3.  检查最后一次迭代值，如果发现修改或添加新文件，请处理您需要的内容。
    4.  `ScheduledExecutorService`以所需的时间间隔运行上述程序
2.  `FolderMonitor`把课堂变成罐子。

**让它服务**

1.  您可以使用`apache's procrun`或`tanukisoftware`服务包装器从 java 可执行 jar 创建服务
    1.  链接[Java 服务包装器](http://wrapper.tanukisoftware.com/doc/english/download.jsp)和[Apache Procrun](http://commons.apache.org/daemon/procrun.html)

希望你能做到。祝一切顺利

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T21:50:50.263

Q> 如何将其作为一个服务在后台作为批处理运行？
A> 看到[这个](https://stackoverflow.com/questions/68113/how-to-create-a-windows-service-from-java-app)SO 帖子，它解决了同样的问题。

Q> 如果我把它作为服务，这会影响系统的性能吗？因为文件夹中至少每 5 分钟会添加一次文件。
A> 因为你正在使用`WatchService`，这应该是非常便宜的。引用[文档](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)：

> 大多数文件系统实现都对文件更改通知提供本机支持。Watch Service API 在可用的情况下利用此支持。但是，当文件系统不支持这种机制时，Watch Service 会轮询文件系统，等待事件。

如果有疑问，您可以随时监控您的服务器并查看您的应用程序使用了多少 CPU 和 I/O。我敢打赌这不会很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T09:31:52.497

制作一个无限循环的线程，比如

```
while(true) {
   //code and logic
   Thread.sleep(theTimeYouWantBetweenTheScans);
} 
```

创建一个 .bat 文件以方便使用，例如 java -jar myMonitor.jar

性能取决于您的代码，但它不应该很重。享受。

# javascript - 如何将属性添加到元素方法？

> ID：13227431
> 
> 赞同：0
> 
> 时间：2012-11-05T07:01:42.803
> 
> 标签：javascript

代码看起来像`document.getElementById.a = 1`. 这在 IE 中除外。正如文件所说

> 该函数也是一个对象

所以它可以添加属性，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:42:57.600

在 Javascript 中，您可以设置或获取任何值的属性，**除非**：

*   它是`null`或`undefined`
*   它已被[冷冻](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/freeze)或[密封](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/seal)

向本机对象/方法添加属性通常是不好的做法，因为这样做可能会与页面上的其他代码冲突。我想有更好的方法来做你正在做的任何事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T07:06:42.247

尝试使用方法`setAttribute`即

```
document.getElementById('<IDofElement>').setAttribute('a',1); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-05T07:24:48.183

You can add 'a' to Function prototype. Then it will be available for all Functions.

```
Function.prototype.a = 1;
console.log(document.getElementById.a); //logs 1
console.log(document.getElementsByClassName.a); //also logs 1 
```

This is not the best solution, but should work even on IE.

# python - 如何设置基于模型表单实例的查询集结果

> ID：13227434
> 
> 赞同：0
> 
> 时间：2012-11-05T07:01:55.527
> 
> 标签：python, django, filter, django-queryset, modelform

我有一个查询列表，可以返回问题的可能解决方案。该列表返回我期望的结果。我正在尝试添加一个与查询列表中的每个项目相关的复选框表单。它不是太花哨，我只需要选中该框并更新模型。我有两个**模型**：

```
149 class TaskSolution(models.Model):                                                                                                           
150     solution          = models.TextField()                                                                                                  
151     submitter         = models.ForeignKey(User, null=True, blank=True)                                                                       
152     relatedtask       = models.ForeignKey(Task, null=True, blank=True)                                                                      
153     solutionnumber    = models.IntegerField(editable=False)                                                                                 
154     date_created      = models.DateTimeField(editable=False)                                                                                 
155     date_updated      = models.DateTimeField(editable=False)                                                                                
156     confimed_solution = models.BooleanField()                                                                                               
157     objects           = SolutionVoteManager()

160     def save(self, *args, **kwargs):                                                                                                        
161         if not self.id:                                                                                                                     
162             self.date_created = datetime.now()                                                                                              
163         self.date_updated = datetime.now()                                                                                                  
164         super(TaskSolution, self).save(*args, **kwargs)                                                                                     

166     def __unicode__(self):                                                                                                                  
167         return self.id                                                                                                                      

169     def __unicode__(self):                                                                                                                  
170         return "%s" % self.object_pk                                                                                                        

172     def __unicode__(self):                                                                                                                  
173         return self.solution  

184 class MarkedSolved(models.Model):                                                                                                           
185     is_solution      = models.BooleanField(verbose_name='')                                                                                 
186     related_idea     = models.ForeignKey(Idea, editable=False)                                                                              
187     related_task     = models.ForeignKey(Task, editable=False)                                                                              
188     related_solution = models.IntegerField(editable=False)                                                                                  
189     date_updated     = models.DateTimeField(editable=False)                                                                                 

191     def save(self, *args, **kwargs):                                                                                                        
192         self.date_updated = datetime.now()                                                                                                  
193         super(MarkedSolved, self).save(*args, **kwargs)                                                                                     

195     def __unicode__(self):                                                                                                                  
196         return self.id                                                                                                                      

198     def __unicode__(self):                                                                                                                  
199         return "%s" % self.object_pk                                                                                                        

201     def __unicode__(self):                                                                                                                  
202         return "%s" % self.is_solution

204 class MarkedSolved(ModelForm):                                                                                                          
205     class Meta:                                                                                                                             
206         model = MarkedSolved 
```

现在在我看来，我有以下查询集**：**

```
solution_list = TaskSolution.objects.filter(relatedtask__id=task_id) 
```

这很好，因为它按预期返回解决方案。我现在遇到的问题是我希望 MarkSolved 表单初始值与 solution_list 值相关。

```
 393 if request.method == 'POST':                                                                                                                                                                                                                              
 394         mark_solved_form = PostMarkedSolved(data=request.POST, instance=solution_task) 
```

本质上，我正在寻找这样的查询：

```
select * from markedsolved a, tasksolution b where a.related_solution=b.solutionnumber and a.related_solution=1 and b.solutionnumber=1 and a.related_task_id = 5 and b.relatedtask_id=5; 
```

查询集中两个模型的所有值都匹配。该查询返回我想要的确切结果，但我现在无法根据 solution_list 结果填充初始值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:11:43.840

我认为 MarkedSolved 模型需要与 TaskSolution 模型相关的字段

重新

related_solution = models.IntegerField(editable=False)

和

related_solution = models.ForeignKeyField(TaskSolution)

**模板**

```
 {% for item in solved_list%}
        <input type = "checkbox" name="{{item.id}}" > {{item.solution}}
   {% endfor %} 
```

**意见**

```
 if request.method == 'POST':
      for soln in solutions_list: 
         solution_id = request.POST.get(str(soln.id))    
         if solution_id:
            MarkedSolved.objects.create(
             is_solution = True,
             related_task = Task.objects.get(id=task_id),
             related_solution = soln
            ) 
```

我没有测试上面的代码，但这会给你的想法

# java - Eclipse J2ME - 部署应用程序期间发生错误

> ID：13227446
> 
> 赞同：2
> 
> 时间：2012-11-05T07:02:38.817
> 
> 标签：java, eclipse, java-me

嗨，我是 J2ME 编程新手，我在 Eclipse 中创建了一个新的基本 J2ME 项目

新建->项目->J2ME->J2ME Midlet Suite 命名为 HelloWorld

然后

新建->其他->J2ME->J2ME Midlet 命名为 HelloWorld

当我运行它显示的项目时

从 localhost:53803/ota/HelloWorld/HelloWorld.jad 部署应用程序时出现问题原因：未找到 JAD

模拟器启动，但显示 2 选项安装应用程序和管理证书颁发机构

请任何人帮助我

# bash - 从目录中的所有文件中删除多个扩展名 (Bash)

> ID：13227452
> 
> 赞同：1
> 
> 时间：2012-11-05T07:03:07.333
> 
> 标签：bash, file-rename

由于搞砸了我的第一次尝试，我现在有一个充满文件的目录，这些文件现在命名如下：

```
valery-special-music-poetry.txt.mtxt.md.md.txt.mtxt.md.md.md 
```

我需要命名：

```
valery-special-music-poetry.md 
```

如何从命令行执行此操作？

我正在运行：GNU bash，版本 3.2.48(1)-release (x86_64-apple-darwin12)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:33:34.683

```
for file in *; do mv "$file" "${file/.*./.}"; done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T07:46:52.667

壳牌本身：

```
for i in *; do mv "$i" "${i%%.*}.${i##*.}"; done 
```

除非你的目录是单级的，否则我建议使用 find，如果你在 Apple 中有的话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T07:26:30.653

这可能会帮助你

```
#!/bin/bash
for filename in *
do
    x=`echo $filename | sed 's/\..*\./\./g'`
    mv $filename $x
done 
```

将其保存到名为 rename.sh 的文件中

```
chmod +x rename.sh
./rename.sh 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T07:25:49.870

```
ls -1 *.txt.mtxt.md.md.txt.mtxt.md.md.md | nawk -F"." '{cmd="mv "$0" "$1".md";system(cmd)}' 
```

# javascript - 字符串与正则表达式匹配？

> ID：13227459
> 
> 赞同：0
> 
> 时间：2012-11-05T07:03:35.050
> 
> 标签：javascript, regex

嘿，我有一个要求，我必须将上传文件的文件名与我们客户指定的标准化文件名格式进行比较

标准化格式 FW12_CommunicatedArticles.xlsx 用户上传的任何文件都应符合以下格式 FW12_CommunicatedArticles.xlsx 整数（FW 中的 1、2 可以更改，但名称的其余部分应与指定的格式完全匹配）

例如，有效的文件上传可以是 FW13_CommunicatedArticles.xlsx 、 FW23_CommunicatedArticles.xlsx 等

无效上传 = sW13_CommunicatedArticles.xlsx、FW13_CommuArticles.xlsx、FW1324_CommuArticles.xlsx 等

只有整数的值可以不同，字符串长度，它的排列和一切都必须与约定完全相同我必须通过javascript进行验证，请你们帮我设计正确的正则表达式验证解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:05:31.663

这个简单的正则表达式可以解决问题。`\d`将匹配一个数字。

```
/^FW\d\d_CommunicatedArticles\.xlsx$/.test(filename) 
```

这是一个[jsfiddle](http://jsfiddle.net/dandv/FDZ4m/)。在 Chrome 中按 F1 和 Esc 以显示控制台。

# r - 对列作为 chr 类型的列求和

> ID：13227460
> 
> 赞同：1
> 
> 时间：2012-11-05T07:03:38.507
> 
> 标签：r, sum, dataframe, chr

我有这样的事情：

```
Date        Point1 Point2 Point3
01-03-2000     23     57    98
02-03-2000     67     36    77 
03-03-2000     67     25    47 
... 
```

我想用类似的函数得到每列的总和`colSums`，但我的第一列不是数字，是字符类型。我如何得到总和？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T07:07:31.327

如果`dat`是您的数据框，您可以尝试

```
colSums(dat[ , -1]) 
```

这将返回除第一列（带有日期的列）之外的每一列的总和。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T12:20:01.553

更通用的解决方案：

```
# set up some fake data with text and numeric columns 
numchr <- list(1:3,letters[1:3])
test <- data.frame(numchr[sample(1:2,10,replace=TRUE)])
names(test) <- letters[1:10]

# which looks like...
> test
  a b c d e f g h i j
1 1 a a a a 1 a 1 1 a
2 2 b b b b 2 b 2 2 b
3 3 c c c c 3 c 3 3 c

# get the sums only for the numeric columns
colSums(test[sapply(test,is.numeric)])

a f h i 
6 6 6 6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T12:36:25.023

另一种可能性（使用@thelatemail 的示例）：

```
library(plyr)
numcolwise(sum)(test) 
```

# c++ - Friend 函数中的 STL 问题

> ID：13227461
> 
> 赞同：2
> 
> 时间：2012-11-05T07:03:39.273
> 
> 标签：c++, stl, implementation, binary-search-tree, friend

我正在研究二叉搜索树类，并且在编写重载流操作符函数时遇到了麻烦。这是我的代码......我已经完成了我在网上找到的所有内容（以及在我教授的幻灯片中），所以我不知道我做错了什么。

*几秒钟前编辑以更新对我的代码的更改。决定从发送给朋友的对象调用函数，该函数与朋友函数中的代码相似......

头文件（.h 文件）中的相关头文件：

```
friend ostream& operator<<(ostream& out, const BST& tree);

void leveltraversal(ostream& out); 
```

头文件（.h 文件）中的相关“私有”数据/嵌套类：

```
private:
  class BinNode {
  public:
    T data;
    BinNode* left;
    BinNode* right;
    BinNode() : left(NULL), right(NULL) {}
      BinNode (T item): data(item), left(NULL), right(NULL) {}
  };

  typedef BinNode* BinNodePtr;
  BinNodePtr myRoot; 
```

相关实现文件功能：

```
ostream& operator<<(ostream& out, const BST& tree)
{
  tree.leveltraversal(out);
  return out;
}

template <typename T>
void BST<T>::leveltraversal(ostream& out)
{
  int level = 0;
  BinNodePtr temp = myRoot;
  queue<BinNodePtr> nodes;
  nodes.push(temp);
  out << endl << endl;
  while (!nodes.empty()){
      temp = nodes.front();
      level = recursive_level(temp->data);
      out << endl << endl;
      out << "Node data: " << temp->data;
      out << endl;
      out << "Level: " << level;
      nodes.pop();
      if (temp->left)
        nodes.push(temp->left);
      if (temp->right)
        nodes.push(temp->right);
  }
} 
```

我会发布编译器错误，但它们持续了好几行，我觉得问题是不言而喻的。但是，如果有人愿意，将与他们一起更新！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:07:55.537

由于您没有列出错误消息，甚至没有说明您遇到的问题类型，因此很难提供帮助。但是，我尝试填写一些空白以复制您的问题，并发现代码存在一些问题：

*   如果您看到 的缺少符号错误`operator<<`，这可能是因为模板朋友很棘手。见[http://www.parashift.com/c++-faq/template-friends.html](http://www.parashift.com/c++-faq/template-friends.html)；最简单的解决方法是在类声明中定义函数：

```
template <typename T>
class BST {
   ...
   friend std::ostream& operator<<(std::ostream& out, const BST& tree)
   {
       tree.leveltraversal(out);
       return out;
   } 
```

*   在`operator<<`您使用 a 时`const BST& tree`（意味着您不能通过此引用更改原始对象），因此`leveltraversal`还必须声明该函数`const`。您不能`const`在对象上调用非成员函数`const`；如果允许的话，那会让你修改对象，打破这种`const`本质。

```
void leveltraversal(std::ostream& out) const; 
```

*   如果学习该语言，我建议避免使用`using namespace std;`，请参阅[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c).

通过这些更改，使用 clang 和 g++ 构建的代码对我来说都很好。

# android - 如何使用 Android XmlPullParser 获取 xml 特定元素内容

> ID：13227468
> 
> 赞同：0
> 
> 时间：2012-11-05T07:04:08.130
> 
> 标签：android, xml, xmlpullparser

我正在使用 XmlPullParse 解析这样的 xml：

```
<root>
    <node description="this is a node">
        <number key="ID">0</number>
        <number key="room">3324</number>
        <desc key="title">software engineer</desc>
        <desc key="job">eat donuts</desc>
    </node>
</root> 
```

如何将“吃甜甜圈”添加到字符串中？

现在我的代码是这样的：

```
String expectedResult;

while (xrp.getEventType() != XmlResourceParser.END_DOCUMENT) {
  if (xrp.getEventType() == XmlResourceParser.START_TAG) {
      String name = xrp.getName();
          if (name.equals("desc") && xrp.getAttributeValue(0).equals("job")){
    //I can get here
      if (xrp.getEventType() == XmlPullParser.TEXT) {
         //I can NOT get here
          expectedResult=xrp.getText(); 
      } 
      }
   } 
 xrp.next(); 
} 
```

调试时我的代码可以达到“//我可以到这里”，这意味着我通过使用找到了该行

```
name.equals("desc") && xrp.getAttributeValue(0).equals("job" 
```

但我无法达到“我无法到达这里”，这意味着不知何故

```
(xrp.getEventType() == XmlPullParser.TEXT) 
```

是错的。如何更正我的代码并使用 getText() 获取字符串并将其分配给 expectedResult？谢谢。

# wireshark - 如何使用 Wireshark 解码和播放 rtp 捕获的数据包？

> ID：13227470
> 
> 赞同：2
> 
> 时间：2012-11-05T07:04:14.230
> 
> 标签：wireshark, rtp, packet-capture, packet-sniffers, decoder

我已经在Wireshark中捕获了[RTP](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol)的数据包捕获的数据包是.mp3的，现在我应该如何解码这些数据包，以便我可以在任何播放器中再次播放它们？

有没有办法解码这些捕获的数据包，无论是音频还是视频，并让它们再次播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:22:10.083

Wireshark 提供了一种功能来捕获 RTP 流，然后对其进行解码并播放。

您可以在菜单*Telephony* -> *RTP*中找到它。如果您使用的是旧版本的 Wireshark，则可能不存在此功能。

我有 Wireshark 1.6.8 版，它有这样的功能。

# javascript - 尝试检查 div 标签中的文本并附加结果

> ID：13227471
> 
> 赞同：1
> 
> 时间：2012-11-05T07:04:37.807
> 
> 标签：javascript, jquery, html

我一直在尝试使用 Javascript 和 HTML5 创建游戏，但我无法检查 ScoreValue 文本字段（附加到 Score 变量）以查看玩家是赢还是输。

评分：

```
var Contacts;
var Contacts2;
var Contact;
var Contact2;
var Contact3;
var Contact4;
var Contact5;
var Contact6;
var Contact7;
var Contact8;
var Score;

var Score = 1;

var Contact = function(){
    document.getElementById('Alien1').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
};

var Contact2 = function(){
//for(var Contacts = 1; Contacts > 2;)
    document.getElementById('Alien2').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
};

var Contact3 = function(){
//for(var Contacts = 1; Contacts > 2;)
    document.getElementById('Alien3').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
    //Contacts++
};

var Contact4 = function(){
//for(var Contacts = 1; Contacts > 2;)
    document.getElementById('Alien4').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
    //Contacts++
};

var Contact5 = function(){
//for(var Contacts = 1; Contacts > 2;)
    document.getElementById('Alien5').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
    //Contacts++
};

var Contact6 = function(){
//for(var Contacts = 1; Contacts > 2;)
    document.getElementById('Alien6').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
    //Contacts++
};

var Contact7 = function(){
//for(var Contacts = 1; Contacts > 2;)
    document.getElementById('Alien7').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
    //Contacts++
};

var Contact8 = function(){
//for(var Contacts = 1; Contacts > 2;)
    document.getElementById('Alien8').style.display="none";
    document.getElementById('ScoreValue').innerHTML = Score++;
    //Contacts++
}; 
```

到目前为止的分数检查：

```
//timer = setTimeout(LevelChangeCheck,1000000);

//var LevelChangeCheck = function(){

if (document.getElementById('ScoreValue').value == "8"){
        if(confirm("Hello, do you like cake?")){
            alert("BLAH")
        };
    };
//}; 
```

注意-这是一个故意的小样本（整页是 1000 多行混合代码），所以如果你想查看完整的东西，请访问 hordeattack.tumblr.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:13:04.820

您编写的方式可能适用于某些浏览器，但不适用于其他浏览器。为了使其更可靠，您应该使用 Jquery 等库。使用 jquery，您可以通过以下方式进行操作。

```
if($('#ScoreValue').text()=='8') 
```

# api - google youtube api v3 获取播放列表项目返回无结果

> ID：13227477
> 
> 赞同：7
> 
> 时间：2012-11-05T07:04:50.550
> 
> 标签：api, youtube, playlist

我尝试使用此链接获取播放列表项
[http://developers.google.com/youtube/v3/docs/playlistItems/list](http://developers.google.com/youtube/v3/docs/playlistItems/list)

页面底部有一个“try-it”界面，我在“part”中输入“contentDetails”或“snippet”，在“ID”字段中输入“PL4BF5198F14EEC8A5”，然后按“execute”。但结果中没有项目。

如果我在 youtube 中使用此链接，我可以获得播放列表。
[http://www.youtube.com/playlist?list=PL4BF5198F14EEC8A5](http://www.youtube.com/playlist?list=PL4BF5198F14EEC8A5)

所以我想问一下我是否在“try-it”表中填写了任何错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-16T11:47:22.543

确保将播放列表 ID 放在页面下方的“playlistId”字段下，而不是第一个“id”字段下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T17:52:21.163

您需要获得授权才能通过该呼叫，您是否单击“使用 OAuth 2.0 授权请求”开关以授权页面代表您获取该列表（使用 oAuth2）？

# amazon-ec2 - 无法使用 iOS 的 XMPP 框架连接亚马逊上的 ejabberd 服务器

> ID：13227480
> 
> 赞同：1
> 
> 时间：2012-11-05T07:05:04.810
> 
> 标签：amazon-ec2, xmpp, ejabberd, xmppframework

我正在研究 XMPP 框架来创建文本聊天应用程序。我们已经在亚马逊 ec2 上配置了 ejabberd 服务器。我已经在本地配置的服务器上测试了我的应用程序并且工作正常，但是当我用 amazone ec2 详细信息替换主机和用户名时，我收到错误“读取操作超时”。我寻求帮助，但问题仍未解决。

请帮助我找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:16:45.163

我为自己的问题找到了解决方案。我从下载了最新的框架

[https://github.com/robbiehanson/XMPPFramework/archive/master.zip](https://github.com/robbiehanson/XMPPFramework/archive/master.zip)。

我还与我的网络团队检查了防火墙设置。现在我可以连接到亚马逊 ec2 服务器了。

谢谢。

# plone - Plone - 覆盖另一个产品的 skins.xml

> ID：13227481
> 
> 赞同：1
> 
> 时间：2012-11-05T07:05:06.680
> 
> 标签：plone, zope

在使用 Plone 时，我需要使用图像映射。所以我[将此](http://pypi.python.org/pypi/zopyx.tinymceplugins.imgmap)产品添加到我的构建中。但是，我注意到我无法在我的应用程序中使用该产品。经过调查，我注意到这个特定的产品已经指定了要使用的特定主题，即克隆默认主题。

这是产品中的 skins.xml：

```
<?xml version="1.0"?>
<object name="portal_skins" allow_any="False" cookie_persistence="False">

 <object name="zopyx_tinymceplugins_imgmap"
    meta_type="Filesystem Directory View"
    directory="zopyx.tinymceplugins.imgmap:skins/zopyx_tinymceplugins_imgmap"/>

 <skin-path name="Plone Default">
  <layer name="zopyx_tinymceplugins_imgmap"
     insert-after="custom"/>
 </skin-path>
 <skin-path name="Sunburst Theme">
  <layer name="zopyx_tinymceplugins_imgmap"
     insert-after="custom"/>
 </skin-path>

</object> 
```

现在我的应用程序有一个特定的主题，即 MyCustomTheme。当我激活它时，我无法使用插件产品的功能，但是当我恢复到 Plone 默认主题时，它可以正常工作。我推断这是从特定产品中主题的硬编码得出的。

如何解决此问题以确保 MyCustomTheme 始终能够使用该产品？我正在考虑编辑我的 skins.xml 文件并将产品作为依赖项包含在内。

**更新：**产品的作者终于修复了这个错误。来自 0.3.2 的最新版本产品现在应该适用于所有皮肤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:25:53.297

您还需要将相同的图层 ( `zopyx_tinymceplugins_imgmap`) 添加到您自己的主题中；它不依赖于默认皮肤，但是作者忘记添加通配符定义以将图层注册到*所有*皮肤。

如果您已经有`skins.xml`自己主题的文件，只需向其中添加相同的图层定义：

```
 <skin-path name="Your Theme Name">
  <layer name="zopyx_tinymceplugins_imgmap"
     insert-after="custom"/>
  <!-- your other skin layer definitions -->
 </skin-path> 
```

确保将此产品的通用设置配置文件添加到您自己的配置文件的`medadata.xml`依赖项中：

```
<dependencies>
    <dependency>profile-zopyx.tinymceplugins.imgmap:default</dependency>
    <!-- any other dependencies -->

</dependencies> 
```

并再次运行您的设置配置文件。

# ruby-on-rails - 在 Rails 3 (ActiveRecord) 中限制内部关联

> ID：13227485
> 
> 赞同：0
> 
> 时间：2012-11-05T07:05:19.347
> 
> 标签：ruby-on-rails, postgresql, activerecord, ruby-on-rails-3.2

我与以下活动记录模型（示例）有一对一的关联：

```
User <-1-1-> employee <-1-1-> contact <-1-1-> 
permanentAddress contact <-1-1-> communicationAddress 
```

当使用 ActiveRecord 触发查询时：

```
User Load (1.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "49"]]
  Employeedetail Load (1.8ms)  SELECT "employeedetails".* FROM "employeedetails" WHERE "employeedetails"."User_id" = 49 LIMIT 1
  Contactdetail Load (0.6ms)  SELECT "contactdetails".* FROM "contactdetails" WHERE "contactdetails"."employeedetail_id" = 40 LIMIT 1
  Address Load (1.1ms)  SELECT "addresses".* FROM "addresses" WHERE "addresses"."contactdetail_id" = 52 LIMIT 1
  CACHE (0.0ms)  SELECT "addresses".* FROM "addresses" WHERE "addresses"."contactdetail_id" = 52 LIMIT 1 
```

问题：如何将`LIMIT`地址表增加到 2 `[inner association]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:58:44.703

我认为没有办法覆盖这个 has_one 和 belongs_to 案例中的限制，因为默认情况下，当我们编写 user.employer 时会触发的 SQL 设置了 LIMIT 1 约束......如果你想要一个联系人有两个地址那么您应该将关系从 has_one 更改为 has_many，然后使用验证对其应用 2 的限制...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:12:14.853

您可以使用`limit`：

```
Address.limit(2).where("contactdetail_id = ?", 52) 
```

因此，它将返回前 2 个地址有 contactdetail_id = 52。查看更多[Limit 和 Offset](http://guides.rubyonrails.org/active_record_querying.html#limit-and-offset)。

# html - 跨浏览器支持三维模型

> ID：13227488
> 
> 赞同：0
> 
> 时间：2012-11-05T07:05:27.420
> 
> 标签：html, svg, webgl, jquery-svg

我必须在基于浏览器的应用程序中创建一个三维模型。此应用程序应适用于所有主要浏览器。我想要除 java applet 和 flash 以外的技术。谁能澄清我的以下问题？

1.  在基于浏览器的环境（即 WebGL 或 SVG）中创建三维模型的最佳选择是什么？

2.  我们是否有任何第三方库可以在 Web 浏览器中进行三维应用程序？

3.  我发现 WebGL 支持 Google chrome 和 Firefox。那么在其他浏览器中支持 WebGL 的工作将是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:48:32.983

1.  它更有可能是 WebGL 和 Canvas 之间的选择。[在所有主要的现代浏览器中，对Canvas](http://caniuse.com/#search=canvas)的支持几乎是普遍的。[WebGL](http://caniuse.com/webgl)则更少。理论上，正确的库（见下文）将允许您根据特征检测选择合适的渲染上下文。
2.  [three.js](https://github.com/mrdoob/three.js/)可能是您最好的选择，并且能够让您导入和操作您的模型。
3.  请参阅答案 1：直接以 Canvas 为目标，或作为 WebGL 渲染上下文的后备。

如果您需要支持 IE 8 及以下版本，您可能需要考虑 Flash 作为后备。three.js，据我了解，或多或少是流行的 Flash 3D 引擎[Papervision](http://code.google.com/p/papervision3d/)的一个端口。我不确定该项目是否已得到维护，但如果您确实需要 Flash 后备，由于 API 中的相似性，可能值得考虑。

# javascript - 如何在 node.js 中获取调用者函数的文件路径？

> ID：13227489
> 
> 赞同：39
> 
> 时间：2012-11-05T07:05:27.807
> 
> 标签：javascript, node.js

以下是来自三个文件的一些示例代码：

```
// foo.js
var myFunc = require("./myFunc");
function foo(){
   myFunc("message");
}

// bar.js
var myFunc = require("./myFunc");
function bar(){
   myFunc("message");
}

// myFunc.js
module.exports = myFunc;
function myFunc(arg1){
   console.log(arg1);
   // Here I need the file path of the caller function
   // For example, "/path/to/foo.js" and "/path/to/bar.js"
} 
```

我需要动态获取调用者函数的文件路径，而不需要传递任何额外的参数，对于`myFunc`.

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-05T07:32:44.893

你需要摆弄`v8`. 请参阅：[关于 JavaScript Stack Trace API 的 wiki 条目](http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi)。

我对[提议的提交中的一些代码进行了](https://github.com/joyent/node/commit/007b7181e307a8d52970947d2b6432a2addd9ef0)一些测试，它似乎有效。你最终得到一个绝对路径。

```
// omfg.js

module.exports = omfg

function omfg() {
  var caller = getCaller()
  console.log(caller.filename)
}

// private

function getCaller() {
  var stack = getStack()

  // Remove superfluous function calls on stack
  stack.shift() // getCaller --> getStack
  stack.shift() // omfg --> getCaller

  // Return caller's caller
  return stack[1].receiver
}

function getStack() {
  // Save original Error.prepareStackTrace
  var origPrepareStackTrace = Error.prepareStackTrace

  // Override with function that just returns `stack`
  Error.prepareStackTrace = function (_, stack) {
    return stack
  }

  // Create a new `Error`, which automatically gets `stack`
  var err = new Error()

  // Evaluate `err.stack`, which calls our new `Error.prepareStackTrace`
  var stack = err.stack

  // Restore original `Error.prepareStackTrace`
  Error.prepareStackTrace = origPrepareStackTrace

  // Remove superfluous function call on stack
  stack.shift() // getStack --> Error

  return stack
} 
```

还有一个包含`omfg`模块的测试：

```
#!/usr/bin/env node
// test.js

var omfg = require("./omfg")

omfg() 
```

您将在控制台上获得`test.js`.

* * *

**解释**

这与其说是“node.js”问题，不如说是“v8”问题。

请参阅：[自定义异常的堆栈跟踪集合](http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi#Stack_trace_collection_for_custom_exceptions)

[`Error.captureStackTrace(error, constructorOpt)`](https://github.com/joyent/node/blob/c3ca783525c3de368572a12e627e56090e49f594/deps/v8/src/messages.js#L1112)向`error`参数添加一个`stack`属性，默认情况下评估为 a `String`（通过[`FormatStackTrace`](https://github.com/joyent/node/blob/c3ca783525c3de368572a12e627e56090e49f594/deps/v8/src/messages.js#L1052)）。如果`Error.prepareStackTrace(error, structuredStackTrace)`是 a `Function`，则调用它而不是`FormatStackTrace`。

`Error.prepareStackTrace`所以，我们可以用我们自己的函数覆盖，它会返回我们想要的任何东西——在这种情况下，只是`structuredStackTrace`参数。

然后，`structuredStackTrace[1].receiver`是一个代表调用者的对象。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-11-12T00:20:26.340

或者，您无需摆弄 V8 引擎的内部工作原理，而是使用`module.parent.filename`获取需要您的模块的模块的绝对路径。如此处所示：[https ://gist.github.com/capaj/a9ba9d313b79f1dcd9a2](https://gist.github.com/capaj/a9ba9d313b79f1dcd9a2)

请记住，模块是缓存的，因此如果任何其他文件需要它并调用它，它将始终是第一个导入器的路径。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-02T15:15:07.793

您可以使用[`caller-callsite`](https://www.npmjs.com/package/caller-callsite)包：

```
console.log(callerCallsite().getFileName()); 
```

替代方案是[`callsites`](https://www.npmjs.com/package/callsites)和[`stackman`](https://www.npmjs.com/package/stackman)包。为您提供所有调用站点（术语中`callsites`的“堆栈框架” ）。`v8`并`stackman`为调用站点提供自定义功能和行为。源上下文等。这是围绕呼叫站点行的代码行。如果可用，它还使用源映射。

问题`stackman`在于它异步返回调用站点。从调试器运行时，这不是特别有用。

这是我使用的一些代码，您可能会发现它们很有用：

```
var callsites = require('callsites');
var util = require('util');
var path = require('path');
function printStackTrace() {
    callsites().slice(1).forEach(function(cs) {
        printCallSite(cs);
    });
}
function printCallSite(cs) {
    console.log(util.format('%s:%i',
        path.relative(process.cwd(), cs.getFileName()),
        cs.getLineNumber()));
    console.log('  getTypeName(): ' + cs.getTypeName());
    console.log('  getFunctionName(): ' + cs.getFunctionName());
    console.log('  getMethodName(): ' + cs.getMethodName());
    // console.log('  getEvalOrigin(): ' + cs.getEvalOrigin());
    // console.log('  isTopLevel(): ' + (cs.isTopLevel ? cs.isTopLevel() : null));
    // console.log('  isEval(): ' + cs.isEval());
    // console.log('  isNative(): ' + cs.isNative());
    // console.log('  isConstructor(): ' + cs.isConstructor());
}
function getCallSiteIndexes(cond) {
    var cond = cond || function() { return true; };
    var options = arguments[1] || {};
    var css = options['callsites'] || callsites().slice(1);
    var r = [];
    for (var i = 0; i < css.length; i++) {
        var cs = css[i];
        if (cond(cs)) {
            if (options['first'])
                return i;
            r.push(i);
        }
    }
    return options['first'] ? null : r;
}
function getFirstCallSiteIndex(cond) {
    var css = callsites().slice(1);
    return getCallSiteIndexes(cond, {first: true, callsites: css});
}
function getCallSites(cond) {
    var options = arguments[1] || {};
    var css = options['callsites'] || callsites().slice(1);
    var indexes = getCallSiteIndexes(cond,
        Object.assign({}, {callsites: css}, options));
    if (options['first'])
        return css[indexes];
    return indexes.map(function(i) {
        return css[i];
    });
}
function getFirstCallSite(cond) {
    var css = callsites().slice(1);
    return getCallSites(cond, {first: true, callsites: css});
}

fucntion f() {
    var firstCS = callsites()[0];
    var runAsChildCSIndex = getFirstCallSiteIndex(function(cs) {
        return cs.getFileName() == firstCS.getFileName() && cs.getFunctionName() == 'Compiler.runAsChild';
    });
    if (runAsChildCSIndex) {
        printCallSite(callsites()[runAsChildCSIndex + 1]);
    } else {
        var compilerRunCS = getFirstCallSite(function(cs) {
            return cs.getFileName() == firstCS.getFileName() && cs.getFunctionName() == 'Compiler.run';
        });
        printCallSite(compilerRunCS);
    }
    ... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-07-22T16:46:58.517

获取节点中调用者函数路径的唯一方法是通过堆栈跟踪（忘记外部库）：

```
function getCallerFilePath(path) {
    let stack = new Error().stack.split('\n')
    return stack[2].slice(
        stack[2].lastIndexOf('(')+1, 
        stack[2].lastIndexOf('.js')+3
    )
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-30T13:17:42.193

我的 2 美分：

假设您有一个*`log`*对象，该对象将调用者的文件名作为额外信息添加到控制台，例如*`log`*响应`log.info(msg)`并将执行类似以下操作：

```
// my_module.js
log.info('hello')
$> [[my_module.js]] hello 
```

`info`将会：

```
info: function(msg) {
  let caller = path.basename(module.parent.filename);
  console.log(`[[${caller}]] ${msg}`);
} 
```

**问题**：如前所述，`parent.filename`将返回首先需要模块的人，而不是调用者本身。

**替代方案**：[堆栈跟踪](https://github.com/felixge/node-stack-trace)是一个可以解决问题的模块：

```
const stackTrace = require('stack-trace');
...
info: function(msg) {
  let caller = path.basename(stackTrace.get()[0].getFilename());
  console.log(`[[${caller}]] ${msg}`);
} 
```

要点：**`stackTrace.get()[0]`**返回[`Caller`](https://github.com/felixge/node-stack-trace/blob/master/lib/stack-trace.js#L104)响应的最后一个（只是其中一些）

*   `getFileName()`
*   `getColumnNumber()`
*   `getFunctionName()`
*   `getLineNumber()`
*   `getMethodName()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-17T20:41:53.770

如果您不想使用第三方库，可以这样做：

```
 function getFileCallerURL(): string {
        const error: Error = new Error();

        const stack: string[] = error.stack?.split('\n') as string[];

        const data: string = stack[3];

        const filePathPattern: RegExp = new RegExp(`(file:[/]{2}.+[^:0-9]):{1}[0-9]+:{1}[0-9]+`);

        const result: RegExpExecArray = filePathPattern.exec(data) as RegExpExecArray;

        let filePath: string = '';

        if (result && (result.length > 1)) {
            filePath = result[1];
        }

        return filePath;
    } 
```

# python - 打印语句的分页输出

> ID：13227494
> 
> 赞同：16
> 
> 时间：2012-11-05T07:05:47.120
> 
> 标签：python, python-2.7

我基本上是在努力实现这一目标：

```
>>>print "SOME_VERY_LONG_TEXT" | more 
```

当然，它在 Python 2.7(IDLE) 中不起作用。

另外，我尝试了[pager 1.2](http://pypi.python.org/pypi/pager/1.2)的`page()`功能，但我不知道如何让它正常工作。

有任何想法吗？

**[更新]**

我找到了一个偷懒的方法，如下：

```
import pydoc
pydoc.pager("SOME_VERY_LONG_TEXT") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:19:19.453

您可以将其称为外部进程。（不过，你必须[小心](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)`shell=True`。）

```
import subprocess
longStr = 'lots of text here'
subprocess.call(['echo "'+longStr+'" | more'], shell=True) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-20T07:11:14.627

虽然有点晚了，但以下内容对我有用：

```
def less(data):
    process = Popen(["less"], stdin=PIPE)

    try:
        process.stdin.write(data)
        process.communicate()
    except IOError as e:
        pass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T07:39:24.643

编写独立于终端和操作系统的东西可能是一项更大的任务。

但是如果你能得到终端的高度，那么你可以使用这样的东西假设你的输入是一个生成器/行分隔文本列表，否则你可以在调用这个函数之前调用 text.split('\n')

```
def pagetext(text_lined, num_lines=25):
   for index,line in enumerate(text_lined):
       if index % num_lines == 0 and index:
           input=raw_input("Hit any key to continue press q to quit")
           if input.lower() == 'q':
               break
       else:
           print line 
```

pypy 上还有一个[寻呼机](http://pypi.python.org/pypi/pager)模块没有使用它，但作者说它应该包含在标准库中。

# php - PHP 警告：mysql_num_rows() 期望参数 1 是资源

> ID：13227495
> 
> 赞同：0
> 
> 时间：2012-11-05T07:05:51.017
> 
> 标签：php, mysql

PHP 警告：mysql_num_rows() 期望参数 1 是第 x 行的资源。我检查了所有缺少的单引号和 sql 链接。

```
$v = html_entity_decode($v);
            $query_1 = sprintf("select part_of_speech_id from word_parts_of_speech where word = '%s'", mysql_real_escape_string($v));
            $res = Commons::query($query_1) ;
            if(mysql_num_rows($res) != 0){
                    while  ($row  =  mysql_fetch_assoc($res))  {

                            if($row['part_of_speech_id']!=15){//see table down for reference

                                    $query_url = "insert into freetext_keywords(RANDOM_ID,URL,TAG_NAME,KEYWORD) values('$random_id','$url','$tagName','$v') on duplicate key update WEIGHT = WEIGHT + 1";
                                    $result = Commons::query($query_url);
                            }
                    }
            }else{
                    $query_url = "insert into freetext_keywords(RANDOM_ID,URL,TAG_NAME,KEYWORD) values('$random_id','$url','$tagName','$v') on duplicate key update WEIGHT = WEIGHT + 1";
                    $result = Commons::query($query_url);
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:17:37.990

只需在 php 中回显 MySql 查询并在 phpmyadmin 中针对数据库运行（我希望您使用 phpmyadmin 来访问您的数据库）

并查看查询是否执行良好并返回结果。如果显示任何错误，请相应地更正您的查询。

```
<?php

echo $query_1 = sprintf("select part_of_speech_id from word_parts_of_speech where word = '%s'", mysql_real_escape_string($v));

?> 
```

从浏览器复制查询并直接针对数据库运行。

# jquery - 使用 jQuery 的 asp.net 按钮回发

> ID：13227496
> 
> 赞同：0
> 
> 时间：2012-11-05T07:05:51.500
> 
> 标签：jquery, asp.net

我需要为 jQuery 模态对话框中的 asp.net 按钮做一个回帖。我拥有的标记是这样的

```
 <div id="content">
        <h1>
            Join Our Community</h1>`enter code here`
        <hr />
       Some Context..
        <br />
        <br />
         Some Context..
        <hr />
        <br />
        <!-- Modal Dialog -->
        <a id="tos" href="#serviceterms" title="You must agree with our tems of service.">Click
            HERE to Agree to our Terms </a>
        <div style="display: none">
            <div id="serviceterms" style="width: 440px; height: 250px; overflow: auto;">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                <br />
                <br />
       Some Context..
                <br />
                <br />
                <hr />
                <input type="button" value="Yes" onclick="ToS_Agree()" />&nbsp;&nbsp;
                <input type="button" value="No" onclick="ToS_NotAgree()" />
            </div>
        </div>
        <br />
        <br />
        <asp:Button ID="HiddenButton" runat="server" Text="Button" OnClick="Button1_Click" />
        <asp:Button ID="SubmitButton" runat="server" Text="Submit Form" Enabled="False" ClientIDMode="Static"
            OnClick="SubmitButton_Click" />
        <br />
        <br />
        <asp:Label ID="LabelResult" runat="server" Text=""></asp:Label> 
```

在 jQuery 部分中，代码类似于

```
$(document).ready(function () {

    $("#tos").fancybox({
        'titlePosition': 'inside',
        'modal': 'true',enter code here
        'transitionIn': 'none',
        'transitionOut': 'none'
    });
});

function ToS_Agree() {
    $('#SubmitButton').removeAttr('disabled');
    __doPostBack('<%# HiddenButton.ClientID %>', '')

}

function ToS_NotAgree() {
    $('#SubmitButton').attr('disabled', 'disabled');
    $.fancybox.close();
} 
```

**问题：**当我在模式对话框中点击“是”按钮时，它会正确回发。但它会将我定向到 page_load 事件正文，而不是转到 Button1_Click 正文。请在这里帮助我。我个人认为必须有一种方法可以使用 jQuery 获得我想要的事件主体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:43:05.183

带有`#`符号的表达式是数据绑定表达式。它只会评估`DataBind()`被调用。使用`=`标志：

```
__doPostBack('<%= HiddenButton.UniqueID %>', '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:31:49.203

代替：

```
__doPostBack('<%# HiddenButton.ClientID %>', '') 
```

做这个：

```
$("#<%=HiddenButton.ClientID%>").click(); 
```

它将使单击按钮被单击并触发您的服务器端事件。

# c# - 是否有一个简单的技巧可以让 FlipView 在当前项目的左侧和右侧显示一些项目？

> ID：13227498
> 
> 赞同：2
> 
> 时间：2012-11-05T07:06:09.113
> 
> 标签：c#, xaml, windows-8

FlipView 控件很棒，但有时很难向用户显示还有更多项目。

我能做些什么来“正确地”让 FV 在当前显示项目的左侧和右侧显示一些对象（如果它们当然存在的话）？

我查看了模板，找不到任何东西。也想到了以下几点，但还是决定反对：

*   使用水平列表视图：使列表视图快照看起来非常困难和 hacky。
*   手动将上一个/下一个项目添加到左侧和右侧。当 FV 动画时，Hacky 并且不动画。

还有其他想法吗？

(Win8)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:16:10.943

Flipview 可能不适合您想要实现的目标。您可以使用三个图像占位符。左侧的一个部分可见。一个主要和中心。右侧的一个部分可见。当用户在中央图像上滑动时，找到右侧/左侧的图像并替换中心的图像，从而在您的图像集合中移动索引。您还可以在图像占位符上方/旁边添加两个按钮。这有帮助吗？

# performance - KnockoutJS IE8 性能问题和内存泄漏

> ID：13227501
> 
> 赞同：15
> 
> 时间：2012-11-05T07:06:22.937
> 
> 标签：performance, internet-explorer-8, knockout.js, memory-leaks

我们使用 KnockoutJS 构建复杂的企业应用程序并面临性能不佳的问题，尤其是在 IE8 中。应用程序可能会占用超过 1GB 的 RAM，并且永远不会释放内存。在调查过程中，我们发现 KnockoutJS 保留对 DOM 节点的引用并且从不删除它。这可以使用 IESieve 对任何公共 KnockoutJS 示例进行重现，只需在玩添加和删除 DOM 节点的示例时观察 DOM 利用率。

有没有人遇到过这个问题并且对如何解决这个问题有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:36:23.130

我们在 IE 8 上遇到过类似的淘汰 JS 问题。其中一个问题是拥有一个可观察数组（包含 500 多个元素）并使用所有这些构建一个 UI（想象一个类似表格或类似列表的结构）。唯一对我们有用的解决方法是更改​​视图模型，使其只包含很少的项目可以放在屏幕上。此外，我们必须为滚动事件添加处理程序，以便可观察数组不断刷新。而且（不要为此感到太自豪），我们必须在显示的记录顶部添加一个空 div 以产生视图滚动的错觉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:33:14.580

可能与删除 DOM 元素时未释放事件绑定有关。如果这是在淘汰赛的幕后发生的事情，您将不得不修补并提交拉取请求。

我在backbonejs上也经常发生这种事情。JavascriptMVC 更适合自己清理。

# asp.net - 经典 ASP 和 ASP.Net 会话桥接，传递数组

> ID：13227502
> 
> 赞同：1
> 
> 时间：2012-11-05T07:06:30.697
> 
> 标签：asp.net, session, asp-classic, session-variables, session-state

我看过很多关于 Classic ASP 和 ASP.Net 之间会话桥接的文章。但是，我找不到一种既能将原始类型保存到会话状态，又能将引用类型保存到会话状态的方法。

我想知道如何将数组保存到经典 ASP 会话并从 ASP.Net 会话中检索，反之亦然。

我知道这并不容易，因为诸如编组和序列化之类的东西将被纳入主题。但我想猜测我需要走多远才能实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:16:03.950

您始终可以对普通数组进行自己的序列化：在经典 ASP 中，使用分隔符将它们转换为字符串，然后将字符串解析回 ASP.NET 代码中的数组。

两者都为您提供了开箱即用的简单方法：`Split()`并且`Join()`，在经典 ASP 中：

```
myArray = Array("Jon", "Bob", "Don")
Session("SerializedArray") = Join(myArray, "|") 
```

然后在 ASP.NET 中读取时：

```
string[] myArray = (Session["SerializedArray"] + "").Split('|'); 
```

# r - 在 spplot() 中将单位添加到比例尺

> ID：13227503
> 
> 赞同：1
> 
> 时间：2012-11-05T07:06:36.327
> 
> 标签：r, gis, lattice

我在 Ubuntu 12.04 上使用 R 版本 2.14.1-1，使用 spplot 绘制 GIS 数据，特别是 2008 年的选区投票记录。

我对 R 有点陌生。我研究了我的问题但没有找到解决方案。我想将单位添加到比例尺，在这种情况下，类似于垂直向下运行的“投票百分比”。

到目前为止，我的代码是：

```
library(gpclib)
gpclibPermit()
library(maptools)
library(maps)
library(classInt)
library(RColorBrewer)
library(sp)
require(graphics)
library(rgdal)
library(lattice)

pennStateMap <- readShapeSpatial("/home/jgoodson/stateData/Pennsylvania/shapeFiles/pa_final.shp")
plotvar <- pennStateMap@data$USPP2008

nclr <- 10
class <- classIntervals(plotvar, nclr, style="equal")
poliPallet <- colorRampPalette(c("red1", "blue1"), space="Lab")

pennCounties <- unionSpatialPolygons(pennStateMap, as.numeric(pennStateMap@data$COUNTYFP10))

spCounties <- list("sp.polygons", as(pennCounties, "SpatialPolygonsDataFrame"), col.regions="transparent")

spplot(pennStateMap, "USPP2008", main="2008 Presidential Election Results by Precinct in Pennsylvania", col.regions=poliPallet(10), col="transparent", at=round(class$brks, digits=1), sp.layout = list(spCounties)) 
```

我尝试通过添加单位：
`barLabel <- list("sp.text", c(40, -71), "Dem % of Two-Party Vote", srt=-90)`
然后将其添加到`sp.layout`. 但这不会超出地理数据的绘图框，因此当我尝试到达比例尺的正确一侧时它会消失。

对于如何实现这一点，我将不胜感激。

# android-activity - 如何使用长按事件从线性布局中创建的edittext中获取id？

> ID：13227506
> 
> 赞同：1
> 
> 时间：2012-11-05T07:06:44.337
> 
> 标签：android-activity, android-linearlayout

```
LinearLayout cLinearLayout = (LinearLayout) findViewById(R.id.col_linearlayout);
cLinearLayout.setOnCreateContextMenuListener(new View.OnCreateContextMenuListener()
        {
              public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
            if (v == cLinearLayout)  {
              System.out.println("CompID1::" + menu.size());
              System.out.println("Rowcount:"+ cLinearLayout.getChildCount());       
            }
            });
    } 
```

在这段代码中，我只能获得线性布局 ID。我想获取在该线性布局内创建的编辑框的 ID，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:29:50.593

**使您的 EditText 为 final 。** 所以它可以在你的线性内部访问。

# php - 管道中的正则表达式而不是斜杠？

> ID：13227507
> 
> 赞同：0
> 
> 时间：2012-11-05T07:06:46.790
> 
> 标签：php, regex, preg-replace

大多数 PHP 文档显示用斜杠包裹的正则表达式，例如：

```
preg_replace( '/\s+/', ' ', $str ); 
```

我正在查看 WP 的[formatting.php](https://github.com/WordPress/WordPress/blob/master/wp-includes/formatting.php)的源代码，并看到一些正则表达式用管道而不是斜杠包裹。包裹在管道中的行为与包裹在斜线中的行为有何不同？有什么功能上的区别吗？该文件中的一些示例是：

```
preg_replace( '|\s+|', ' ', $str ); # consolidate whitespace

preg_replace( '|%([a-fA-F0-9][a-fA-F0-9])|', '', $str ); # remove octets 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:12:49.023

非斜线分隔符，如管道字符，更容易匹配斜线，因为您不必转义它们。

```
preg_replace( '|/+|', '/', $str );  # collapse consecutive slashes in path 
```

# google-app-engine - 谷歌应用引擎中的密码加解密

> ID：13227509
> 
> 赞同：1
> 
> 时间：2012-11-05T07:06:56.913
> 
> 标签：google-app-engine, encryption, passwords

如何在不使用第三方库的情况下在 Google 应用引擎中加密和解密密码？

有什么例子吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T09:28:55.317

如果您关心用户的安全，您将不得不使用某种第三方库，因为您应该存储密码的*唯一方法是使用 PBKDF2、SCrypt 或 BCrypt 安全地散列 - 例如，使用*[这个模块](http://pypi.python.org/pypi/pbkdf2/1.3)，您可以轻松地将其添加到您的应用程序中。

请注意，您*永远不*应该加密密码（因此永远不要解密它们） - 相反，像 PBKDF2 这样的算法使用散列，以便您可以检查密码是否有效，但永远不要恢复原始密码。

# akka - Akka 接收块

> ID：13227510
> 
> 赞同：1
> 
> 时间：2012-11-05T07:07:07.987
> 
> 标签：akka

在 Erlang 中，可以在我的函数内的下一行代码中发送消息并等待所需的响应。这使得将工作流逻辑（编排逻辑）放在一个函数中变得很容易。我可以用akka java做同样的事情吗？

似乎所有回复都进入了 onRecieve 回调。这意味着我永远不能将我的工作流逻辑放入一个函数中，并且一旦我向演员发送消息，我就需要在另一个函数中从演员那里获得答案，即 onRecieve。这再次扼杀了我扭曲我的工作流程逻辑的一个功能。是这样吗？如果是这样，我对akka scala有同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:53:48.837

不，你不能在 Akka 中做同样的事情，因为这是 Erlang 最有问题的一个特性：它会导致内存泄漏和性能下降。

但是，您可以：

A) 生成一个新的 Actor 来处理对话逻辑

B）使用问/？处理回复

C) 使用 Stash 功能避免处理某些消息，直到满足某些条件

# ios - 带有可变单元格的 UICollectionView 奇怪地显示它们

> ID：13227513
> 
> 赞同：1
> 
> 时间：2012-11-05T07:07:25.880
> 
> 标签：ios, uicollectionview

我有一个 UICollectionView，我希望单元格的高度总是显示的一半，有时是宽度的一半，但有时是宽度的 1/4。在下图中，我绘制了 UICollectionView 显示的内容。在横向中，我告诉它显示一个 1/4 宽度的单元格，然后是一个半单元格，然后是另一个 1/4 的单元格，然后再次重复。理论上屏幕上应该有6个细胞，但细胞最终都分散了。我无法弄清楚我做错了什么。如果我将每个单元格都设置为一个尺寸，它就可以正常工作，只是尺寸不同。

这就是发生的事情：![http://i.imgur.com/5Ifac.jpg](../Images/6045fca8bcd06dfdf6f338d972b3f45a.png)

这就是我想要发生的事情：![http://i.imgur.com/eAX0g.jpg](../Images/0ae8fbc28ed62d4547ea5edaf75cac7d.png)

这是我设置布局和更改单个单元格大小的代码：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    if ([bigCells containsObject: indexPath.row]) {
        return CGSizeMake((CollectionView.frame.size.width/2), (CollectionView.frame.size.height/2));
    } else {
        return CGSizeMake((CollectionView.frame.size.width/4), (CollectionView.frame.size.height/2));
    }
}

- (void)prepareLayout {
    self.itemSize = CGSizeMake((self.collectionView.frame.size.width/2), (self.collectionView.frame.size.height/2));

    self.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    self.minimumInteritemSpacing = 0;
    self.minimumLineSpacing = 0;
} 
```

# retro-computing - MPW 工具的主要符号的结构是什么？

> ID：13227516
> 
> 赞同：3
> 
> 时间：2012-11-05T07:07:35.320
> 
> 标签：retro-computing, mac-classic

这个问题是关于 Mac OS **Classic**的，它已经过时了好几年了。我希望有人仍然对此有所了解！

在过去的几周里，我一直在构建一个[PEF 可执行解析器，并且我已经插入了一个 PowerPC 解释器。](http://en.wikipedia.org/wiki/Preferred_Executable_Format)借助大量的魔法，我希望能够（在某种程度上）在 Mac OS X 下运行一些 Mac OS 9 程序。事实上，我现在已经准备好开始使用小型应用程序进行测试了。

为了帮助我解决这个问题，我在 SheepShaver 中安装了旧版本的 Mac OS 并下载了（现在免费的） MPW Tools ¹，我构建了一个“hello world” MPW 工具（只是你的经典`puts("Hello World!")`C 程序，除了为 Mac OS 编译9）。

构建后，它会生成一个带有代码段和数据段的程序。我希望我能够直接跳转到可执行文件的主符号（在加载程序部分的标题中指定），但我大吃一惊：编译器将主符号*放在数据部分*中。

显然，数据部分中没有可执行代码。

回到[Mac OS Runtime Architectures](http://developer.apple.com/legacy/mac/library/documentation/mac/pdf/MacOS_RT_Architectures.pdf)文档（1997 年发布，令人惊讶的是仍然在 Apple 的网站上），我发现这是完全合法的：

> **使用主符号作为数据结构**
> 
> 如前所述，主符号不必指向例程，而是可以指向数据块。您可以将此事实用于插件，其中主要符号引用的数据块可以包含有关插件的基本信息。以这种方式使用主符号有几个优点：
> 
> *   当您以编程方式准备片段时，代码片段管理器会返回主符号的地址，因此您无需调用 FindSymbol。
> *   您不必为插件保留和记录导出的特定名称。
> 
> 但是，没有特定的符号名称意味着插件的用途并不那么明显。插件可以将其名称、图标或有关其符号的信息存储在主符号数据结构中。以这种方式存储符号信息消除了对多个 FindSymbol 调用的需要。

因此，我的结论是 MPW 工具在 MPW shell 内作为插件运行，并且可执行文件的主要符号指向一些应该告诉它如何启动的数据结构。

但这仍然不能帮助我弄清楚该数据结构中的内容，并且仅查看其十六进制转储并不是很有启发性（我知道编译器将*这个特定程序*`__start`的地址放在哪里，但这绝对不足以做一个通用的 MPW 外壳“替换”）。显然，关于这个主题的最有价值的信息来源似乎在 2004 年随着 Mac OS 9 消失了。

 *那么，一个 MPW 工具的主符号所指向的数据结构的格式是什么？

[1\. 显然，Apple 最近取消了我从中获取 MPW 工具的 FTP 服务器的插件，因此它可能不再可用；虽然谷歌搜索“MPW_GM.img.bin”确实找到了一些替代品）。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:45:21.887

事实证明，它并不太复杂。该“数据结构”只是一个转换向量。

我没有立即意识到这一点，因为我的重定位虚拟机实现中的错误使这两个指针看起来像垃圾。

转换向量是包含（按此顺序）入口点（4 个字节）和“目录”偏移量（4 个字节）的结构。`r2`在执行入口点指向的代码之前，应将此偏移量加载到寄存器中。

（Mac OS Classic 运行时仅使用转换向量的前 8 个字节，但从技术上讲，它们可以是任何大小。转换向量的地址总是被传入，`r12`因此被调用者可以访问它需要的任何附加信息。）*

# visual-c++ - 如何使用 WinRT 类创建公共视图模型库？

> ID：13227517
> 
> 赞同：2
> 
> 时间：2012-11-05T07:07:37.330
> 
> 标签：visual-c++, windows-8, windows-runtime, c++-cx

我想为我的所有视图模型创建一个抽象基类，但我遇到了可访问性问题并且似乎无法浏览错误。这是我的代码示例：

```
public ref class ViewModelBase {
    ...
}

public ref class OtherViewModel : ViewModelBase {
    ...
} 
```

当我将代码定义为上述状态时，出现以下错误：

**错误 C4585：“MyNamespace::ViewModelBase”：WinRT“公共引用类”必须是密封的或派生自现有的未密封类**

相反，如果我将 ViewModelBase 设为私有，则会收到此错误：

**错误 C3213：基类“MyNamespace::ViewModelBase”比“OtherViewModel”更难访问**

这看起来应该非常简单。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T21:32:57.530

您所尝试的在 C++/CX 中是不可能的，因为在 VS 2012 C++/CX 中不支持通用场景的公共类继承。它仅支持 XAML 场景工作；唯一可能的公共未密封类型是在`Windows::UI::Xaml`命名空间下找到的类型，并且用户无法编写自己的公共未密封类型。

如果您想为所有视图模型创建一个基类，您唯一的选择是将所有类设为私有或从基类继承`Windows::UI::Xaml`（例如`DependencyObject`）。

这些方法中的每一个都有缺点：

*   使用 DependencyObject 作为您的基础会使您的所有视图模型成为 STA 对象（因此它们只能从 UI 线程进行操作），此外还会产生大量不必要的开销。
*   将您的类设为私有意味着您不能使用该`[Bindable]`属性进行数据绑定，因此您需要有一个私有的数据绑定实现。（您的私有类需要实现`ICustomPropertyProvider`和相关的接口。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T11:53:35.287

“sealed”关键字意味着类不能被继承。您的实现应如下所示：

```
ref class ViewModelBase sealed 
```

如果你想从 ViewModelBase 继承，那么你只需要让子类是`ref`这样的类：

```
class ViewModelBase

...

public ref class OtherViewModel sealed : ViewModelBase 
```

# javascript - jqGrid 标题和正文/数据列宽度不相等

> ID：13227520
> 
> 赞同：2
> 
> 时间：2012-11-05T07:08:12.240
> 
> 标签：javascript, asp.net, css, jqgrid

我对 jqGrid 列宽有疑问。

我为网格设置的几个选项：
autowidth：true，shrinkToFit：
true，
width：100％，

而我在 ui.jqGrid.css 中所做的更改如下：

```
.ui-jqgrid .ui-jqgrid-htable {
   table-layout:auto;
   margin:0em;
} //for header - auto table layout. 
```

同样，我为正文和页脚做了。

希望这可以帮助。如果需要任何其他信息，请告诉我。

注意：我使用的是最新的 jqGrid。我提到了一个类似的问题[jqGrid header width different from data column width](https://stackoverflow.com/questions/3805381/jqgrid-header-width-different-from-data-column-width)，但在我的情况下没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:20:56.997

我已经找出问题的原因。

我之前为表格添加了一个 CSS（用于我的自定义表格），并且覆盖了导致问题的 jQgrid CSS。

```
 table td {
         padding: 5px;
         border: solid 1px #e8eef4;
    }

    table th {
        padding: 6px 5px;
        text-align: left;
    } 
```

所以我在上面添加了特定的类，这样它就不会覆盖 jqGrid。抱歉，我没有注意到并早点弄清楚。并且不需要更改 jqgrid-css 中的 table-layout 属性。我的动机是shrinktofit 和autowidth。

# c++ - C++11 线程不工作

> ID：13227526
> 
> 赞同：7
> 
> 时间：2012-11-05T07:08:26.973
> 
> 标签：c++, multithreading, gcc, c++11

我的程序如下所示

```
#include <iostream>
#include <thread>
#include <exception>

void hello()
{
    std::cout << "Hello world!!!!" << std::endl;
}

int main()
{
    std::cout << "In Main\n";
    std::thread t(hello);
    t.join();
    return 0;
} 
```

当我使用以下命令编译它时，我没有收到任何错误

```
g++-4.7 -std=c++11 main.cpp
```

但是当我运行它时，我收到以下错误

```
在主要
在抛出 'std::system_error' 的实例后调用终止
what()：不允许操作
中止（核心转储）

```

有人可以帮我解决我哪里出错了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T07:14:28.877

当我在 GCC 中使用 C++11 线程时，我使用：

```
g++ -std=c++0x -pthread -g main.cpp 
```

这对我行得通。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T07:14:13.573

使用 编译代码时`g++`，请使用该`-pthread`选项。

以下是我从 stackoverflow 中找到的答案： [In g++ is C++ 11 thread model using pthreads in the background?](https://stackoverflow.com/questions/11784153/in-g-is-c-11-thread-model-using-pthreads-in-the-background)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T23:53:42.683

每个人都已经回答说您需要将 -pthread 参数传递给编译器。几乎可以肯定它在 4.8 中不会改变，但根据[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52681](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52681)，异常至少会有一个很好的消息说明出了什么问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T07:10:25.560

您可能需要链接到 pthread 库

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T13:21:57.923

你可以试试，

```
g++ --std=c++11 -lpthread main.cpp 
```

# phpmyadmin - 在 php myadmin 中恢复 Localhost 主页

> ID：13227529
> 
> 赞同：0
> 
> 时间：2012-11-05T07:08:39.720
> 
> 标签：phpmyadmin, wamp, wampserver

我使用 NetBeans 创建了一个 php 项目，但不幸的是，我在“www”的根文件夹中创建了该项目，因此我无法查看我的原始版本的主页 (index.php)。我只想将本地主机视为主页。是否有可能使用 Windows 7 操作系统或任何东西恢复它。我刚刚使用 netbeans 删除了项目，但没有恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:19:02.103

在 Windows 7 中，您可以为单独的文件和文件夹“恢复到以前的版本”。您可以尝试右键单击该文件夹，然后单击“恢复以前的版本”。如果这不起作用，我认为没有退路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:32:56.877

从评论和问题看来，您似乎已将 www 目录中的原始 index.php 替换为新的，并且您正在使用 WAMP。

解决方案1：（仅当您想保存数据库时，从复制您的数据文件夹`wamp\bin\mysql\mysql5.5.24`并粘贴到某处）

1.卸载WAMP。2.删除 WAMP 文件夹 3\. 重新安装。（将数据文件夹放在同一文件夹中，替换新文件夹）

解决方案 2：在其他地方安装 wamp（在其他机器上更好），然后简单地将正版 index.php 从 wamp/www 复制粘贴到您的 wamp/www

# shell - 有没有办法让后台任务通知终端打印新的提示？

> ID：13227530
> 
> 赞同：2
> 
> 时间：2012-11-05T07:08:42.900
> 
> 标签：shell, terminal, background-process, backgrounding

我想编写一个*可以*作为后台任务（即`my-thing &`）运行的程序，并在必要时提供相关的输出。

但是，对于打印到终端的后台任务，总是有这个烦人的小进展：

`bash-3.2$ **my-thing &**▏`

`bash-3.2$ my-thing &
bash-3.2$ -- Hello from my-thing!
-- now let me start doing what I do best ...
▏`

…请注意，我们现在在光标之前没有提示，更不用说有一个丑陋的错误提示，我的程序在已打印提示时吐出输出。

因此，我想要三件事，其中只有一件我不知道该怎么做：

1.  检测我的程序是否在后台运行，并相应地改变我的输出/操作（即打印出更少的无用信息；排队进一步的信息，以便仅在程序再次进入前台时输出；等等）
2.  当突然将信息打印到我们后台的终端时，清除提示（如果它已经存在）
3.  **在我完成打印到终端的任何内容后**通知终端，以某种方式强制它在我添加的内容下方重新绘制一个新提示****

 **第三个是唯一一个我完全不知道该怎么做的；尽管我对其他两个有所了解，但也将不胜感激任何链接或建议。

同样值得赞赏的是，链接到已经具有运行此模式的任何程序（任何语言/环境）；因为我可以尝试对他们的实施进行逆向工程/探索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:22:37.590

这对我有用：

```
echo 'sleep 1; echo; echo hi' > /tmp/hi
chmod +x /tmp/hi
zsh
/tmp/hi &
asdfsadf # type whatever, here. 
```

在 'hi' 得到回显后，zsh 知道用完整的 'asdfasdf' 重新绘制提示。

所以，不足为奇：zsh 比 bash 更好。**

# php - CodeIgniter 表单验证配置在分配对象名称时停止工作

> ID：13227536
> 
> 赞同：0
> 
> 时间：2012-11-05T07:09:41.247
> 
> 标签：php, codeigniter, validation, config

我正在使用 CodeIgniter 的表单验证。我有一个配置文件

```
application/config/form_validation.php 
```

在大多数情况下它工作正常，但在我的一个文件中，我有这一行

```
$this->load->library('form_validation', '', 'validation'); 
```

然后配置文件停止工作。

在我看来，如果我分配了不同的对象名称，配置文件将不起作用。

这对我来说似乎很不方便，有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:22:54.237

不确定这是否会有所帮助，但您可以尝试：

```
$this->load->library('form_validation', null, 'validation'); 
```

# windows-phone-7.1 - 适用于 Windows Phone 的 Visual Studio Express 2012 上的 Windows Phone 7.1 Advertising Sdk

> ID：13227537
> 
> 赞同：0
> 
> 时间：2012-11-05T07:09:49.047
> 
> 标签：windows-phone-7.1, windows-phone, windows-phone-8

我正在尝试在 vs2012 express 下为 wp 构建我的 wp7 项目。它使用广告 sdk，但我收到以下错误：

```
Error   7   The name "AdControl" does not exist in the namespace 
    "clr-namespace:Microsoft.Advertising.Mobile.UI;assembly=
    Microsoft.Advertising.Mobile.UI". 
```

有谁知道为什么？

澄清 - 我现在没有尝试将我的项目升级到 wp8 --- 只是在使用新的 sdk 之前尝试为 7.1 构建。

我还应该安装旧的 7.1 手机 SDK 吗？

[http://www.microsoft.com/en-us/download/details.aspx?id=27570](http://www.microsoft.com/en-us/download/details.aspx?id=27570)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T04:39:01.137

我遇到了这个问题 - 从项目中删除 Microsoft.Advertising.Mobile.UI 引用并阅读它，对 Microsoft.Advertising.Mobile 的引用为我修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:28:56.217

您可以检查以下内容：

1.  检查您是否将目标手机框架更新为“Windows Phone 8.0 OS”
2.  检查您是否可以在解决方案资源管理器的引用文件夹中的 Advertising SDK dll 中看到黄色感叹号图标。如果是，则删除该引用并从“添加引用”对话框再次将该引用添加到广告 sdk dll。

# android - ImportError: No Module named bz2 for Python 2.7.3

> ID：13227539
> 
> 赞同：1
> 
> 时间：2012-11-05T07:10:03.643
> 
> 标签：android, linux

> **可能重复：**
> [ImportError: No module named bz2 for Python 2.7.2](https://stackoverflow.com/questions/8115280/importerror-no-module-named-bz2-for-python-2-7-2)

我运行这个命令： `/usr/bin/python -c "import bz2; print bz2.__doc__"`

结果是：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named bz2 
```

也存在 apt-cache search bz2

```
libbz2-dev - high-quality block-sorting file compressor library - development 
```

我该如何解决这个错误？

# http - HAProxy 将 http 重定向到 https (ssl)

> ID：13227544
> 
> 赞同：101
> 
> 时间：2012-11-05T07:10:17.023
> 
> 标签：http, redirect, ssl, https, haproxy

我正在使用 HAProxy 进行负载平衡，并且只希望我的站点支持 https。因此，我想将端口 80 上的所有请求重定向到端口 443。

我该怎么做？

编辑：我们想重定向到 https 上的相同 url，保留查询参数。因此， http: [//foo.com/bar](http://foo.com/bar)将重定向到[https://foo.com/bar](https://foo.com/bar)

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-05-13T18:06:51.783

[我发现这是最大的帮助](http://www.exratione.com/2012/12/websockets-over-ssl-haproxy-nodejs-nginx/)：

使用 HAProxy 1.5 或更高版本，只需将以下行添加到前端配置中：

```
redirect scheme https code 301 if !{ ssl_fc } 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-02-18T15:26:54.453

我没有足够的声誉来评论以前的答案，所以我发布了一个新的答案来补充 Jay Taylor 的答案。基本上他的回答会进行重定向，虽然是隐式重定向，这意味着它将发出 302（临时重定向），但由于问题告知整个网站将作为 https 服务，因此适当的重定向应该是 301（永久重定向）。

```
redirect scheme https code 301 if !{ ssl_fc } 
```

这似乎是一个很小的变化，但根据网站的不同，影响可能很大，通过永久重定向，我们通知浏览器它不应该从一开始就寻找 http 版本（避免将来的重定向） - 为 https 节省时间网站。它也有助于 SEO，但不会分割链接的汁液。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-11-07T21:45:44.437

重定向所有流量：

`redirect scheme https if !{ ssl_fc }`

重定向单个 url（如果有多个前端/后端）

`redirect scheme https if { hdr(Host) -i www.mydomain.com } !{ ssl_fc }`

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-01-12T00:34:38.360

将所有 http 重定向到 https 的最佳保证方法是：

```
frontend http-in
   bind *:80
   mode http
   redirect scheme https code 301 
```

使用“代码 301”有点花哨，但不妨让客户知道它是永久性的。'mode http' 部分对于默认配置不是必需的，但不会受到伤害。如果你有`mode tcp`默认部分（就像我一样），那么它是必要的。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-11-05T08:32:33.277

根据[http://parsnips.net/haproxy-http-to-https-redirect/](http://parsnips.net/haproxy-http-to-https-redirect/)它应该像配置你的 haproxy.cfg 以包含以下内容一样简单。

```
#---------------------------------------------------------------------
# Redirect to secured
#---------------------------------------------------------------------
frontend unsecured *:80
    redirect location https://foo.bar.com

#---------------------------------------------------------------------
# frontend secured
#---------------------------------------------------------------------
frontend  secured *:443
   mode  tcp
   default_backend      app

#---------------------------------------------------------------------
# round robin balancing between the various backends
#---------------------------------------------------------------------
backend app
    mode  tcp
    balance roundrobin
    server  app1 127.0.0.1:5001 check
    server  app2 127.0.0.1:5002 check
    server  app3 127.0.0.1:5003 check
    server  app4 127.0.0.1:5004 check 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-04-22T13:10:56.720

user2966600的解决方案略有不同......

重定向**除**单个 URL 之外的所有内容（如果有多个前端/后端）：

```
redirect scheme https if !{ hdr(Host) -i www.mydomain.com } !{ ssl_fc } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-11-16T00:52:44.123

就像 Jay Taylor 说的，HAProxy 1.5-dev 有`redirect scheme`配置指令，它可以完全满足你的需要。

但是，如果您无法使用 1.5，并且您准备从源代码编译 HAProxy，那么我会反向移植该`redirect scheme`功能，以便它可以在 1.4 中使用。您可以在此处获取补丁：http: [//marc.info/ ?l=haproxy&m=138456233430692&w=2](http://marc.info/?l=haproxy&m=138456233430692&w=2)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-30T08:50:40.597

```
frontend unsecured *:80
    mode http
    redirect location https://foo.bar.com 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-05-07T20:05:13.777

重定向**语句**是遗留的

改用http- request**重定向**

```
acl http      ssl_fc,not
http-request redirect scheme https if http 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-07T15:31:09.860

在较新版本的 HAProxy 中，建议使用

```
http-request redirect scheme https if !{ ssl_fc } 
```

将 http 流量重定向到 https。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-11-06T12:50:13.770

```
 acl host-example hdr(host) -i www.example.com

  # for everything not https
  http-request redirect scheme https code 301 unless { ssl_fc }

  # for anything matching acl
  http-request redirect scheme https code 301 if host-example !{ ssl_fc } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-05T08:31:07.870

如果要重写 url，则必须更改站点虚拟主机添加以下行：

```
### Enabling mod_rewrite
Options FollowSymLinks
RewriteEngine on

### Rewrite http:// => https://
RewriteCond %{SERVER_PORT} 80$
RewriteRule ^(.*)$ https://%{HTTP_HOST}$1 [R=301,NC,L] 
```

但是，如果您想将端口 80 上的所有请求重定向到代理后面的 Web 服务器的端口 443，您可以在 haproxy.cfg 上尝试以下**示例conf：**

```
##########
# Global #
##########
global
    maxconn 100
    spread-checks 50
    daemon
    nbproc 4

############
# Defaults #
############
defaults
    maxconn 100
    log global
    mode http
    option dontlognull
    retries 3
    contimeout 60000
    clitimeout 60000
    srvtimeout 60000

#####################
# Frontend: HTTP-IN #
#####################
frontend http-in
    bind *:80
    option logasap
    option httplog
    option httpclose
    log global
    default_backend sslwebserver

#########################
# Backend: SSLWEBSERVER #
#########################
backend sslwebserver
    option httplog
    option forwardfor
    option abortonclose
    log global
    balance roundrobin
    # Server List
    server sslws01 webserver01:443 check
    server sslws02 webserver02:443 check
    server sslws03 webserver03:443 check 
```

我希望这对你有帮助

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-11-14T10:23:57.433

为什么不使用 ACL 来区分流量？在我的头顶上：

```
acl go_sslwebserver path bar
use_backend sslwebserver if go_sslwebserver 
```

这是马修布朗回答的最重要的内容。

请参阅[ha 文档](http://haproxy.1wt.eu/download/1.4/doc/configuration.txt)，搜索 hdr_dom 和以下内容以查找更多 ACL 选项。有很多选择。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-03-18T16:56:20.020

可以这样做——

```
 frontend http-in
   bind *:80
   mode http
   redirect scheme https code 301 
```

任何访问 http 的流量都会重定向到 https

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-16T01:39:44.453

将此添加到 HAProxy 前端配置中：

```
acl http      ssl_fc,not
http-request redirect scheme https if http 
```

> [HAProxy - 重定向 HTTP 请求](https://www.haproxy.com/documentation/aloha/9-5/traffic-management/lb-layer7/http-redirection/#examples-of-traffic-redirection)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-08-21T09:50:46.580

简单地：

```
frontend incoming_requsts
        bind *:80
        bind *:443 ssl crt *path_to_cert*.**pem**
        **http-request redirect scheme https unless { ssl_fc }**
        default_backend k8s_nodes 
```

# python - Scrapy 抓取第一页但不跟随链接

> ID：13227546
> 
> 赞同：4
> 
> 时间：2012-11-05T07:10:17.433
> 
> 标签：python, scrapy

我不明白为什么 Scrapy 正在抓取第一页，但没有按照链接来抓取后续页面。一定是和规则有关。非常感激。谢谢！

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from craigslist_sample.items import CraigslistItem

class MySpider(CrawlSpider):
    name = "craig"
    allowed_domains = ["sfbay.craigslist.org"]
    start_urls = ["http://sfbay.craigslist.org/acc/"]   

    rules = (Rule (SgmlLinkExtractor(allow=("index100\.html", ),restrict_xpaths=('//p[@id="nextpage"]',))
    , callback="parse_items", follow= True),
    )   

    def parse_items(self, response):
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//p")
        items = []
        for titles in titles:
            item = CraigslistItem()
            item ["title"] = titles.select("a/text()").extract()
            item ["link"] = titles.select("a/@href").extract()
            items.append(item)
        return(items)

spider = MySpider() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T07:44:28.913

Craig 在下一页使用`index100`, `index200`, `index300`... ，最大值为`index900`。

```
rules = (Rule (SgmlLinkExtractor(allow=("index\d00\.html", ),restrict_xpaths=('//p[@id="nextpage"]',))
, callback="parse_items", follow= True),
) 
```

为我工作。

# django - Django-CMS 文本编辑在 Apache 上不起作用

> ID：13227547
> 
> 赞同：0
> 
> 时间：2012-11-05T07:10:19.163
> 
> 标签：django, apache, mod-wsgi, django-cms

当使用 mod_wsgi 在 apache 上提供我的 django-cms 应用程序时，我无法让文本插件工作。

不同之处在于，在 apache 上提供服务时，textedito 会尝试获取不存在的 url。在 Apache 上：/admin/js/iframe/default/wymiframe.html

使用 manage.py runserver /static/cms/wymeditor/iframe/default/wymiframe.html

wymiframe.html 文件存在于我的静态文件夹中，并且可以通过我通过 apache 运行应用程序时获得的错误 URL 进行访问。

我该怎么做才能让文本插件请求正确的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:19:18.480

您在设置文件中将 STATIC_URL 设置为什么？这部分是在创建链接时控制路径的原因。

[https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#serving-the-admin-files](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#serving-the-admin-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:19:28.377

我的问题是我在子域上提供静态内容，并且访问控制有问题。

我的解决方案是设置

```
Header set Access-Control-Allow-Origin * 
```

在我的 apache 配置文件中

# android - 当用户单击后退按钮退出应用程序时显示警告

> ID：13227549
> 
> 赞同：3
> 
> 时间：2012-11-05T07:10:30.583
> 
> 标签：android, android-alertdialog

我想知道当用户尝试退出应用程序时你会如何出现警告？所以这包括他们是否也按下后退按钮。最好的方法是什么？

我已经在一些主流游戏上看到过这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T07:19:55.253

您可以在子类中添加`onBackPressed()`以`Application`拦截后退按钮：

```
public static void onBackPressed(final Activity activity) {
    AlertDialog.Builder builder = new AlertDialog.Builder(activity);
    builder.setTitle(R.string.on_back_button_title);
    builder.setMessage(R.string.on_back_button_message);
    builder.setPositiveButton(R.string.yes, new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            activity.finish();
        }
    });
    builder.setNegativeButton(R.string.no, new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {

        }
    });
    builder.show();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T07:32:34.200

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    /*if (keyCode == KeyEvent.KEYCODE_HOME) {
        Log.i("Home Button", "Clicked");
        // Toast.makeText(this,"Home Button Clicked",Toast.LENGTH_LONG).show();
        return false;
    }*/  // You cannot gain control over home button

    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Toast.makeText(this, "Press back Button to pause Evaluation",
                Toast.LENGTH_LONG).show();
        Log.i("Back Button", "Clicked");
        return false;
        // finish();
    }
    return false;
} 
```

# android - android : 图像加载进度指示器

> ID：13227550
> 
> 赞同：0
> 
> 时间：2012-11-05T07:10:37.880
> 
> 标签：android, progress, image-caching

我正在使用以下算法来下载和缓存图像。它运作良好。正如预期的那样，图像的初始加载需要时间。我想显示一个进度指示来显示这一点。我希望进度指示器仅出现在图像视图中，而不会阻塞屏幕的其他部分。例如，我有一个列表，每行都有一个图像和文本。这些行是可点击的。所以我想显示每行图像的进度指示，直到它被加载。同时文本部分应该是可见的并且列表视图应该是可点击的。用户无需等待完成加载。即使在加载该行的图像之前，他也应该能够单击一行并打开详细信息页面。

通过进度指示器，我的意思只是表示图像正在加载。像一些纺车。我不是在寻找百分比指示或类似的东西。

代码

```
 package com.idg.reelbillboard.utils;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.util.HashMap;
import java.util.Map;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.widget.ImageView;

public class DrawableManager {
    private final Map<String, Drawable> drawableMap;

    public DrawableManager() {
        drawableMap = new HashMap<String, Drawable>();
    }

    public Drawable fetchDrawable(String urlString) {
        if (drawableMap.containsKey(urlString)) {
            return drawableMap.get(urlString);
        }

        Log.d(this.getClass().getSimpleName(), "image url:" + urlString);
        try {
            InputStream is = fetch(urlString);
            Drawable drawable = Drawable.createFromStream(is, "src");

            if (drawable != null) {
                drawableMap.put(urlString, drawable);
                Log.d(this.getClass().getSimpleName(), "got a thumbnail drawable: " + drawable.getBounds() + ", "
                        + drawable.getIntrinsicHeight() + "," + drawable.getIntrinsicWidth() + ", "
                        + drawable.getMinimumHeight() + "," + drawable.getMinimumWidth());
            } else {
              Log.w(this.getClass().getSimpleName(), "could not get thumbnail");
            }

            return drawable;
        } catch (MalformedURLException e) {
            Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
            return null;
        } catch (IOException e) {
            Log.e(this.getClass().getSimpleName(), "fetchDrawable failed", e);
            return null;
        }
    }

    public void fetchDrawableOnThread(final String urlString, final ImageView imageView, Context context) {
        if (drawableMap.containsKey(urlString)) {
            imageView.setImageDrawable(drawableMap.get(urlString));
        }
      //  final ProgressDialog progressDialog = ProgressDialog.show(context, "", "Loading", false); 
        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message message) {
            //   if(progressDialog.isShowing()) 
            //         progressDialog.dismiss(); 
                imageView.setImageDrawable((Drawable) message.obj);
            }
        };

        Thread thread = new Thread() {
            @Override
            public void run() {
                //TODO : set imageView to a "pending" image

                Drawable drawable = fetchDrawable(urlString);
                Message message = handler.obtainMessage(1, drawable);
                handler.sendMessage(message);

            }
        };
        thread.start();
    }

    private InputStream fetch(String urlString) throws MalformedURLException, IOException {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet(urlString);
        HttpResponse response = httpClient.execute(request);
        return response.getEntity().getContent();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:24:07.920

使用您当前的实现，进度条将无法正常工作，因为整个“加载图像数据并构建可绘制对象”是在一行中完成的`Drawable drawable = Drawable.createFromStream(is, "src");`。因此，您无法确定完成了多少百分比的加载。

您可以做的是使用*不确定的进度指示器*（又名纺车）。

[例如，您可以在图像加载时将此类ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)视图的实例覆盖在图像上，并在图像加载完成后立即删除（或隐藏）它。

# c - Visual Studio 2012 中的 Zlib

> ID：13227554
> 
> 赞同：2
> 
> 时间：2012-11-05T07:11:07.910
> 
> 标签：c, visual-studio, visual-studio-2012, zlib, void

我正在按照[这些说明](http://tpgit.github.com/UnOfficialLeptDocs/vs2008/building-image-libraries.html#building-zlib)使用 testzlib 测试 zlibStat 库。当我尝试构建 testzlib 时，它会在[**testzlib.c**](https://github.com/madler/zlib/blob/master/contrib/testzlib/testzlib.c)中引发以下错误，行：167，字符：43：

> `IntelliSense: argument of type "unsigned char **" is incompatible with parameter of type "void **"`

它是 C11 中的规范更改、VC 11 中的错误还是错误的代码？

有解决方法吗？我尝试更改`unsigned char* FilePtr;`为`void* FilePtr;`，但随后*赋值运算符*在第 200 行抛出错误。有什么想法吗？

# 解决方案

我遵循了 Icepack 的回答。然后我在第 141 行遇到错误，所以我将其更改为`*pFilePtr=(unsigned char*)ptr;`. 希望 zlib 人会相应地更新他们的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:16:52.250

隐式转换不适用于双重间接。转换`char*`为可以`void*`，但不是。有关详细信息，请参见此处：http: [//c-faq.com/ptrs/genericpp.html](http://c-faq.com/ptrs/genericpp.html)`char**``void**`

尝试将`ReadFileMemory`签名替换为`ReadFileMemory(const char* filename,long* plFileSize,unsigned char** pFilePtr)`.

# c# - 如何使用 C# 在“使用中”时删除 SQl Server 数据库？

> ID：13227555
> 
> 赞同：1
> 
> 时间：2012-11-05T07:11:06.803
> 
> 标签：c#

我正在尝试删除 sql server 数据库。如果不使用它会被删除。如果数据库正在使用中，则会发生异常`can not delete database while it is in use`。我们可以使用选项从管理工作室中删除使用数据库`Close existing connection`。但是我们如何使用 C# 代码来做到这一点呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:37:36.397

```
ALTER DATABASE AdventureWorks2012
SET SINGLE_USER
WITH ROLLBACK IMMEDIATE;

DROP DATABASE AdventureWorks2012; 
```

通过在其中编写上面的查询来制作一个脚本文件。然后执行此脚本文件，如下所示：

```
string sqlConnectionString = "Data Source=(local);Initial Catalog=AdventureWorks;Integrated Security=True";
            FileInfo file = new FileInfo("C:\\myscript.sql");
            string script = file.OpenText().ReadToEnd();
            SqlConnection conn = new SqlConnection(sqlConnectionString);
            Server server = new Server(new ServerConnection(conn));
            server.ConnectionContext.ExecuteNonQuery(script); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:20:30.947

在 MS SQL Server 上启动所有用户的简单方法是：

```
ALTER DATABASE [MyDB] SET Single_User WITH Rollback Immediate
GO 
```

通过您的代码触发此查询并继续：-

[资源：-](https://stackoverflow.com/questions/4046708/exclusive-access-could-not-be-obtained-because-the-database-is-in-use)

# javascript - 我没有收到我的 jsonp 的回复

> ID：13227556
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:11:21.643
> 
> 标签：javascript, json, html, jsonp

我有这个测试 json url

[这是链接](http://jsfiddle.net/FUWyJ/7/)

```
 jQuery.support.cors = true;

window.Getdata = function() {
  var request = $.ajax({
    type: "POST",
    data: "{}",
    dataType: 'json',
    url: "/gh/gist/response.json/4001105/",
    mimeType: "application/json; cherset=utf-8",
    success: krywaarde,
    failure: givealert
  });

  function krywaarde(result) {
    alert("Name = "+result.fighters[0].name);
    alert("Nickname = "+result.fighters[0].nickname);
    // this changes the text
    document.getElementById("routing").innerHTML = result.fighters[0].name;
  }

  function givealert(error) {
    alert('failed!!' + error);
  }
}

$(document).ready(function() {
  window.Getdata();
});
​ 
```

**我已经编辑了我的整个问题代码**

我现在遇到的问题是，它适用于 JSFiddle，但不适用于我的移动应用程序。两者之间的onlu变化是，Js Fiddle上的ons在页面加载时被调用，而我真正的移动应用程序在buttonclick上调用该函数！

这是jsfiddle：

[小jsfiddle](http://jsfiddle.net/FUWyJ/7/)

我调用函数的html是

```
<a type=button id="processnames" onclick="window.Getdata();" style="color: White; font-size:large;">test json 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:12:55.257

这一行：

```
kryrequest(https://raw.github.com/appcelerator/Documentation-Examples/master/HTTPClient/data/json.txt?callback=awe) 
```

…看起来它正在尝试将字符串文字传递给函数。字符串文字必须用**引号括起来**。

*（本节指的是问题的早期版本）*

* * *

此外，该 URI 返回 JSON 文本，而不是 JSONP 脚本，因此如果您修复它，它仍然无法工作。

* * *

更重要的是，即使该响应确实包含 JSON-P，它也不会起作用，因为该对象具有`fighters`属性，但没有`name`属性。的值`fighters` **是**一个数组（具有 的对象`names`），但这些名称是字符串，而不是数组。

*（本节指的是问题的早期版本）*

# selenium - Selenium 的日志文件

> ID：13227559
> 
> 赞同：2
> 
> 时间：2012-11-05T07:12:05.530
> 
> 标签：selenium

Selenium 在运行 jenkins 时停止了。不知道在哪里调试错误。是否有任何日志文件来调试 selenium 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:15:31.103

如果您正在使用 selenium rc，您可以使用 LoggingSelenium.jar 生成一个非常漂亮的 html 日志。

参考这个链接：

```
http://loggingselenium.sourceforge.net/usage.html 
```

# sql - SQL Server 2005 查询优化

> ID：13227560
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:12:13.667
> 
> 标签：sql, sql-server, sql-server-2005, query-optimization

我的应用程序需要从 SQL Server 数据库中获取数据。我的问题是必须将 3 个表连接到一个视图中。这需要很长时间（生成视图大约需要 30 秒）所以我想知道是否有办法优化这个 SQL 查询？

SQL查询：

```
SELECT TOP (100) PERCENT Request1.RequestID,
                         TrackIT.dbo.Sending.Barcode,
                         TrackIT.dbo.Address_View.AdrID,
                         TrackIT.dbo.Address_View.Name,
                         TrackIT.dbo.Address_View.Street,
                         TrackIT.dbo.Address_View.HouseNo,
                         TrackIT.dbo.Address_View.Postal,
                         TrackIT.dbo.Address_View.City,
                         TrackIT.dbo.Address_View.Country,
                         Request1.Latitude,
                         Request1.Longitude,
                         Request1.ReceivedDate
FROM   (SELECT DISTINCT RequestID,
                        Ltrim([Content]) AS Barcode,
                        Latitude,
                        Longitude,
                        ReceivedDate
        FROM   RequestWithLocation
        WHERE  ( Site LIKE '%Z' )
               AND ( [Content] <> '' )
               AND ( AddressID = '0' )
               AND ReceivedDate > Dateadd(day, -7, Getdate())) AS Request1
       INNER JOIN TrackIT.dbo.Sending
         ON Request1.Barcode = TrackIT.dbo.Sending.Barcode
       INNER JOIN TrackIT.dbo.Address_View
         ON TrackIT.dbo.Sending.DeliveryAdrID = TrackIT.dbo.Address_View.AdrID
ORDER  BY AdrID 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:18:58.500

您应该将连接字段上的索引添加到表中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T07:19:23.910

嗨，你能试试索引视图吗

供参考：[http ://technet.microsoft.com/en-US/library/cc917715.aspx](http://technet.microsoft.com/en-US/library/cc917715.aspx)

# jquery - 使用 jQuery 的 JSON 帖子在 FF、Chrome 和 Safari 上运行良好，但在 IE8 中不起作用

> ID：13227564
> 
> 赞同：0
> 
> 时间：2012-11-05T07:12:31.233
> 
> 标签：jquery, html, json

我必须将**电子邮件和密码发布**到我的 REST 服务，它托管在不同的域上，并且我允许跨域来源 * 以访问任何跨域请求。这是 **工作正常**

*   带 FF 16

*   铬 22

*   野生动物园 5

    但**它在 IE 8.0 中不起作用**

我尝试了几种解决方法，但仍在寻找解决方案。

```
<input type="button" value="POST" onclick="postData();" />

//Call authorization process
function postData() {
    var url = 'http://www.mydomain.com/authorize';
    var data = { 'email': 'myemail@gmail.com', 'password': 'mypassword' };
    jQuery.post(url, data, authorizeCallback, 'json');
}
jQuery.extend({
    post: function (url, data, callback, type, errorcallback) {
        return _ajax_request(url, data, callback, type, 'POST', errorcallback);
    }
});
function _ajax_request(url, data, callback, type, method, errorcallback) {
    if (typeof errorcallback == 'undefined') errorcallback = defaulterrordisplay;
    return jQuery.ajax({
        type: method,
        url: url,
        data: data,
        success: callback,
        dataType: type,
        error: errorcallback
    });
}

 //Callback from authorization process
function authorizeCallback(data, textStatus, jqXHR) {
/*Here i am getting Message :  'Invalid email or password' only for IE,
otherwise it will return Message : "OK" with Authorization ID and Token
*/
} 
```

**注意：**我使用的是纯 HTML，没有使用服务器技术。并且除 IE8 之外的所有浏览器都运行良好。

寻求您的最佳答案和建议。

谢谢并恭祝安康，

伊姆达杜森

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T18:25:10.873

您是否说您收到“无效的电子邮件或密码”。这让我觉得你应该在[http://www.mydomain.com/authorize](http://www.mydomain.com/authorize)上调试服务器代码。

# vb.net - 设置 datagridviewcomboboxcell 值

> ID：13227565
> 
> 赞同：0
> 
> 时间：2012-11-05T07:12:36.457
> 
> 标签：vb.net, winforms

我有以下代码来绑定可以正常工作的组合框单元格：

```
Const colIndex As Integer = 1
        Dim dgvcombo As DataGridViewComboBoxCell
        dgvcombo = gvMain.Rows(_rowindex).Cells("SerialNumber")
        dtGrpBrand = getDataTable("select * from (select SSPERPSerialMaster.ProductID,SSPERPSerialMaster.SizeID,SSPERPSerialMaster.GaugeID, SSPERPSerialMaster.SerialID,SSPERPSerialMaster.SerialNumber,ISNULL(SSPERPSerialEntryOpening.Qty,0)+ISNULL(a.Stock,0) as [Closing Qty] " & _
                        "from SSPERPProductMaster " & _
                        "left join SSPERPSerialMaster on SSPERPSerialMaster.ProductID=SSPERPProductMaster.ProductID " & _
                        "left join SSPERPSerialEntryOpening on SSPERPSerialEntryOpening.SerialID=SSPERPSerialMaster.SerialID and SSPERPSerialMaster.ProductID=SSPERPSerialEntryOpening.ProductID " & _
                        "left join (select SerialId,SUM(ISNULL(case when AL='A' then Qty else - Qty end, 0)) as [Stock] from SSPERPStock group by SerialId) a on a.SerialId=SSPERPSerialMaster.SerialID) a " & _
                        "where a.[Closing Qty]<>0 and a.ProductID=" & gvMain.Rows(_rowindex).Cells("ProductId").Value.ToString() & " and a.SizeID=" & gvMain.Rows(_rowindex).Cells("SizeId").Value.ToString() & " and a.GaugeID=" & gvMain.Rows(_rowindex).Cells("GaugeId").Value.ToString(), CompanyCon)
        dtGrpBrand.Rows.Add()
        dtGrpBrand.Rows(dtGrpBrand.Rows.Count - 1)("SerialNumber") = "-- Select --"
        dtGrpBrand.Rows(dtGrpBrand.Rows.Count - 1)("SerialId") = 0
        dgvcombo.AutoComplete = True
        CType(gvMain.Rows(_rowindex).Cells(colIndex), DataGridViewComboBoxCell).DataSource = dtGrpBrand
        CType(gvMain.Rows(_rowindex).Cells(colIndex), DataGridViewComboBoxCell).DisplayMember = "SerialNumber"
        CType(gvMain.Rows(_rowindex).Cells(colIndex), DataGridViewComboBoxCell).ValueMember = "SerialId"
        CType(gvMain.Rows(_rowindex).Cells(colIndex), DataGridViewComboBoxCell).Value = 0 
```

此代码在我的应用程序中完美运行，而我有数据插入模式，但是当用户从列表中选择记录时，我需要动态绑定“SerialNumber”的单元格，当时我也通过此代码正确绑定 datagridviewcimboboxcell，它正确绑定我的组合框单元格，但是当我给出以下代码来设置值时，它不起作用并给我错误：

```
gvMain.Rows(gvMain.Rows.Count - 1).Cells("SerialNumber").Value = dtrow("SerialId") 
```

我也尝试过以下行来获取选定的值，但没有解决方案：

```
CType(gvMain.Rows(gvMain.Rows.Count - 1).Cells("SerialNumber"), DataGridViewComboBoxCell).Value = dtrow("SerialId") 
```

这里 gvmain 是 datagridview 而 dtrow 是 datarow

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:51:58.727

`dtrow("SerialId")`返回一个对象。您显然对价值感兴趣，因此请尝试`dtrow("SerialId").ToString`

```
gvMain.Rows(gvMain.Rows.Count - 1).Cells("SerialNumber").Value = dtrow("SerialId").ToString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:43:49.967

`DataGridViewComboboxCell`有财产`DataSource`。尝试使用以下方法设置值：

```
 Dim lst As New List(Of String)()
   lst.Add(dtrow("SerialId").ToString)
   DirectCast(DataGridView1.Rows(gvMain.Rows.Count - 1).Cells("SerialNumber"), DataGridViewComboBoxCell).DataSource = lst 
```

它应该可以解决问题。

# web - 关于内容类型的 http 响应

> ID：13227571
> 
> 赞同：0
> 
> 时间：2012-11-05T07:13:02.680
> 
> 标签：web, http-headers, webserver

```
HTTP/1.1 200 OK
Content-Type:text/html

<html><body><img src=\"http://localhost:5000/twitter.png\" alt=\"Smiley face\" height=\"256\" width=\"256\"/></body></html> 
```

如果我更改，请在此 http 响应示例中

```
Content-Type:image/* 
```

其他一切都是一样的。那么它有什么不同呢？当我用我写的简单的测试网络服务器进行测试时：

在第一种情况下 - 浏览器正在接收确切的 html，但没有显示图像。一个带有三角形、圆形嵌入矩形的小图像出现了。

在第二种情况下 content-type: image/* 请求的图像正在下载，但图像无法打开。

例如，如果

```
Content-Type = image/png 
```

图像没有被下载，但浏览器感知的 html 正在改变，比如

```
 <html>
 <body style="margin: 0px;">
 <img style="-web-user-select: none" src="http://localhost:5000"/>
 </body>
 </html> 
```

我的问题是如何使用这些内容类型？

* * *

Http 响应：

```
 HTTP/1.1 200 OK
 Content-Type:image/png
 Content-Lenth:27892
 Server:Learnee

 \211PNG

g9\357ax\257a>\307\365\333\324\3658\313
\234H\245\374\215\321\371\373\317\302Rh \364\263K\353\273\362\312+\243\200\\321\376\217\337\360u)\373X\355q*1\267\235\342;I\316\341\265\310\317I:q\332\325\317{0\245T\334^WH#l  s\200\231\2422\252q>;\346\312d\252X\201\365\312\304%:\216H\316\306\372{\323axDB\215\3178Y\345\254*\245\366R\357a\235    җ\2148\252D\236S\232\231\370z\342w\337\375V\265Z\315c/:,d\311<շ\367D1\356\337\326֖\373\242\263t\351\325\377IRmo\264R\376S\200\352_\276\242K7\214\263\333{\230\267횥\313qc\317\347S\3022<ه\202\273ڟ\203l\310\344\216\356M\322Я\225\240\300=N1\277\271\355\327ߺtv̀ٙ\231\231\374\226-[\204~\265U\341\220OO\344\211q\316\257\246\276\345&\354\352\227\325!\274<\264\233\234\352p\263\301\3237\275\334و\203]\2712\371\332\306I\222\207\233\341獶\215\257&7Y7 K\302u@\373\235\370   0\275\373ؾ$\235B$z?\200zD\343yǯܓ\356\241BW\327\320m\214\337\301f\327@\300a\201\262C\257\244\216p\366\330\220\325\301@\215\332G/-\320Ԃ\267\246X%\344ȔD\216N{\277Q\277\3361M\276\264~/i\213\3529D\320@`\307\314N@=\334\316\200\272\300)\367}?<L\233D\372\227\275-[$\375\330.\222\257T\351\313em\377\263q]:\307@p%Xӭ\204\222\365>8K\266ga\200@
H3\352Z3\200R\320\347SU\301
G>\323!\307tD\200\205{~\370\3524\371鶌&gt;S\220\263D5\224(@\214SN\221{\264L@f\216%\247\200  \360\3455\376Y`\341s\263U2YR\214p\363\320pA[?\237A\270@\357\214\221\273x!\240*\327o\231"\367\215\314\325&E\321Su \220)\200\243\261\363@\200\335a\265\337.\242~Y\300\242d\214f\232\262\231\275E\370㣫W\257\216%\223\3114(~
+=\261\347EP|\264\377G\200L\213řB\241\220۴iS\371\251\247\236r\360OD\231\371G\376a\354tt
\364~6\217\3471\364' 
```

从文件中获取数据的代码：

```
bool ServerFileSystem::getDataFromFile(std::string urlPath, std::string& chunkData)
{
std::stringstream stream;
std::cout << urlPath << std::endl;

if(!strcmp(urlPath.c_str(), "/"))
{
    urlPath = urlPath + "index.html";
    std::cout << "URL Path: " << urlPath;
}

std::string localPath = SERVER_ROOT + urlPath;
std::ifstream file(localPath.c_str());

file.seekg(0, std::ifstream::beg);

while(file.tellg() != -1)
{
    char *p = new char[1024];

    bzero(p, 1024);
    file.read(p, 1024);

    stream << p;
    stream.flush();

    delete p;
}

chunkData = stream.str();

file.close();

return true;
} 
```

我以字符串的形式获取整个数据并附加必要的标题。因此，我发送的最终响应是代码上方显示的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:31:26.737

```
HTTP/1.1 200 OK
Content-Type:text/html

<html>[...]</html> 
```

> 如果我将 [the Content-Type-header] 更改为`Content-Type:image/*`，其他一切都一样。那么它有什么不同呢？

你很幸运：你的浏览器遵循稳健性原则。它可能会说：*“我不知道您要做什么，但我不会将 HTML 呈现为图像。我想我只会发出“无法显示页面”错误”*。

取而代之的是：*“等等，内容看起来确实像 HTML，为什么不试试看呢？”* .

您将希望像这样提供您的 HTML，图像也是如此：使用适当的图像 MIME 类型提供它们。

也可以看看：

> [RFC 2045，第 5 节](https://www.rfc-editor.org/rfc/rfc2045#section-5)：

> Content-Type 字段的目的是充分描述正文中包含的数据，以便**接收用户代理可以选择适当的代理或机制将数据呈现给用户**，或者以适当的方式处理数据。该字段中的值称为媒体类型。

# jquery - 为尚未创建的元素制作 var

> ID：13227574
> 
> 赞同：0
> 
> 时间：2012-11-05T07:13:18.330
> 
> 标签：jquery

我正在尝试为 dom 元素创建一个 var 来清理内容，但它并没有给我预期的结果。我认为这样做的原因是因为在我运行该函数时尚未创建该元素。我可以在调用 .prepend() 之后移动 var，但是如果我想将所有 var 保留在顶部怎么办？

在此脚本中的某处添加 .on() 会解决我的问题，还是应该在运行 .prepend 后将 var 向下移动几行，而忘记将 vars 保持在顶部？

```
 (function () {
        var cp = $(".call-out p")

        $('li').eq(2).prepend('hi');
        $('div.call-out').prepend("<p>MY UL</p>");
        cp.css({
             'font-size': '3em',
             'background': 'orange'
        });
        cp.animate({
              width: "1000px",
              height: "1250px"
        });
        cp.click(function (e) {
             $(this).animate({
              width: "125px",
              height: "90px"
       });
     });
   })(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:20:36.907

可以从 html 构造 jQuery 对象，因此您可以这样做：

```
var cp = $("<p>MY UL</p>").css({....});/* can add css or event handlers before insert into DOM*/

$('li').eq(2).prepend('hi');
$('div.call-out').prepend(cp);
 /* although created outside the DOM, once inserted the object still exists to use jQuery methods on*/
 cp.animate({....}); 
```

诸如此类的方法`html()`将`prepend()`接受多种类型作为内容参数，包括 jQuery 对象

仔细查看API 文档 中的`content`定义：http: [//api.jquery.com/prepend/](http://api.jquery.com/prepend/)`prepend()`

# java - 中央按钮 软键 LWUIT

> ID：13227577
> 
> 赞同：4
> 
> 时间：2012-11-05T07:13:38.483
> 
> 标签：java, java-me, symbian, lwuit, s60

这似乎是一个非常微不足道的问题，但我花了很长时间没有找到可行的解决方案。

诺基亚设备有一个中央选择按钮，允许我们为其分配软键。

根据我的要求，我需要指定一个特定的命令作为软键。例如，它可能是一个屏幕上的“播放”和另一个屏幕上的“选择”。请注意，我已经使用以下命令设置了默认选择命令：

```
setDefaultCommand((Command) v.elementAt(v.size() - 1)); 
```

它始终是右侧菜单中的第一个命令，并在按下中央选择按钮时调用。

根据我的阅读，将命令分配给每个软键的方式非常随意，并且因设备而异。由于我已经设置了默认命令，因此可以通过两种方式解决我的问题：

1.通过设置一个软键到中央按钮使用

```
Display.getInstance().setThirdSoftButton(true); 
```

我试过这个，但是命令的分配方式非常随机。此外，菜单中始终添加一个默认命令“选择”。有没有办法自定义它，以便在中央按钮上方显示一个非常具体的命令？

2.只需分配一个标签，使如上设置的默认命令显示在中央软键中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T08:21:50.623

第三种软按钮模式具有许多可聚焦组件的默认实现，但不适用于标签。您可以通过调用`setSelectCommandText(String)`组件来自定义其标签。

我建议不要为中心命令使用标签，而是使用一个按钮并将其 UIID 设置为 Label，如果您希望它显示为标准标签。

# python - 数组列表的python最大值

> ID：13227578
> 
> 赞同：7
> 
> 时间：2012-11-05T07:13:38.690
> 
> 标签：python, arrays, list, max

我有一个数组列表，例如：

```
a = [array([6,2]),array([8,3]),array([4,2])] 
```

我试过`max(a)`返回以下错误：

```
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

我希望它返回一个列表或数组，如：

```
In: max(a)
Out: [8,3] 
```

我不想将内部数组转换为列表，因为列表的大小非常大。我也有目的地创建这样来执行数组操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T07:22:32.513

最简单的方法是为了比较而转换为元组/列表（或自己实现比较）：

```
>>> max(a, key=tuple)
array([8, 3]) 
```

请注意，这是内置的`max`，而不是`np.max`

编辑：

对于多维数组，使用`.tolist`方法：

```
max(a, key=operator.methodcaller('tolist')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:17:41.230

正如例外中所说，在数组上定义最大值是模棱两可的。如果我们有以下数组：`[6, 2]`, `[5, 1]`，那么我猜输出应该是`[6, 2]`，但是如果我们有以下示例：`[6, 2]`，`[7, 1]`那么输出必须是什么。

事实上，这里有很多不同的 max 定义。如果我们将数组作为向量，那么 max 可以是它们的大小，或者具有最大 x 坐标的向量等。 Max 也可以比较列表中数组的长度并返回具有最多元素的数组或在平局的情况下，第一个等长的平局。

我的建议是创建一个抽象你的数组结构的类，并在那里定义你期望的结果的最大操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:41:05.990

要将最大数组与 idx 一起使用，这就是我现在使用的：

```
a = [array([6,2]),array([8,3]),array([4,2])]

In: max_a = map(max, a)
Out: max_a = [6,8,4]

In: idx = max_a.index(max(max_a))
Out: idx = 1

In: result = a[idx]
Out: reusult = [8,3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T14:35:45.077

```
 python 3.2

     a=[([6,2]),([8,3]),([4,2])]
     max(a)

     Its working well 
```

# java - Java：如何读取文本文件的每一行并将每一行设置为数组元素？

> ID：13227587
> 
> 赞同：2
> 
> 时间：2012-11-05T07:14:37.940
> 
> 标签：java, arrays, file, bufferedreader, filereader

我正在尝试阅读文本文件每一行中列出的问题，然后将每一行添加到一个数组中，以便以后可以单独调用它们。我几乎肯定可以用 Java 做，但我不确定如何做。

我确实想出了如何读取整个文本文件并将其全部设置为字符串：

```
 private static String readFile(String pathname) {
    String line = null;
    try {
        BufferedReader reader = new BufferedReader(new FileReader(pathname));
        while((line = reader.readLine()) != null){
            System.out.println(line);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return line;
} 
```

尽管与此没有太大关系，但正如我所提到的，这是一个包含问题的文件。如果我得到了这个问题的解决方案，我将为所有问题的答案创建另一个文件，然后我将对那个文件做同样的事情。

有谁知道一种不太复杂的方法来做到这一点？如果它必须是复杂的然后告诉我。我想要某种类型的示例，而不仅仅是指向不同站点的链接。我不是说我只会接受那个。

感谢您的时间！

PS 我已经阅读了关于这个主题的其他问题，但找不到合适的答案和/或我在 Java 中尝试做的例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T07:17:44.880

我会使用一个 ArrayList ......就像这样......

```
ArrayList<String> questions = new ArrayList<String>();

/// in your loop...
while((line = reader.readLine()) != null){
  questions.add(line);
} 
```

顺便说一句，正如 jlordo 在评论中指出的那样，你构建方法的方式，唯一的出路是让 line 为空，所以，当你到达你的 return 语句时，你正在返回空值。你到底想回到这里做什么？如果它是整个行文件，您需要随时将它们添加到字符串中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:17:11.703

而不是 array use `ArrayList`，它是动态的并找到具体的代码。

```
private static List<String> readFile(String pathname) {
    String line = null;
    List<String> list = new ArrayList<String>();
    try {
        BufferedReader reader = new BufferedReader(new FileReader(pathname));
        while((line = reader.readLine()) != null){
            list.add(line);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return list;
} 
```

对于第二个文件，您应该维护一个`map<question,answer>`手段 a `Map<String,String>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:17:08.533

```
 private static String readFile(String pathname) {
    List<String> lines = new ArrayList<String> ();
    String line = null;
    try {
        BufferedReader reader = new BufferedReader(new FileReader(pathname));
        while((line = reader.readLine()) != null){
            lines.add(line) ;
            System.out.println(line);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

`ArrayList<String>`像我一样使用，它会动态增长。声明为字段，我在这个例子中只是使用了一个局部变量。您可以稍后遍历它，如下所示：

```
 for(String line : lines)
   {
      System.out.println(line) ;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T07:19:18.907

您不能只创建一个字符串数组列表并将使用 readLine() 读取的每一行添加到其中吗？然后，您可以将 arraylist 转换为普通数组。

```
listArray.toArray(strArray); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T08:25:11.023

使用番石榴[文件](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/Files.html#readLines%28java.io.File,%20java.nio.charset.Charset%29)：

一行代码：

```
System.out.println(Files.readLines(new File("C:\\sample.txt"), Charsets.UTF_8)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-28T18:44:27.567

这在 java 8 中非常简单明了：

```
List<String> fileLines = Files.lines(Paths.get("/file/path/")).collect(Collectors.toList()); 
```

# web - 网站跟踪 cookie

> ID：13227592
> 
> 赞同：2
> 
> 时间：2012-11-05T07:15:08.887
> 
> 标签：web, ads, tracker

[我在“ http://www.newfangled.com/unlimited_vs_limited_web_tracking](http://www.newfangled.com/unlimited_vs_limited_web_tracking) ”阅读了有关网站跟踪 cookie 的信息，我想知道它们是如何实现的。

在文章的第 2 页，作者写道，“使用信标技术的第三方跟踪器可以将他们实时收集的关于您的数据与包含地理位置、财务和医疗信息的其他数据库进行匹配，以扩展您的个人资料以预测您的年龄、性别、邮政编码、收入、婚姻状况、父母身份、房屋所有权以及独特的兴趣。”

我已经想到了几种可以实现跟踪器的方法，并希望对以下问题的回答能帮助我清楚地了解跟踪器的工作原理。

当您访问一个网站时，您的所有 cookie 是否都可供该网站使用？例如，如果我访问了 StackO.com，该网站是否能够访问我的 facebook/google/其他 cookie？

为了跟踪您从一个站点到另一个站点的访问，各个网站是否在数据库中共享信息，即当您访问 FB、谷歌、CNN 时……他们是否将您的活动记录在一个共享数据库中，该数据库可供集团内的公司访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T07:26:47.497

> 当您访问一个网站时，您的所有 cookie 是否都可供该网站使用？

[是的](http://www.codinghorror.com/blog/2008/08/protecting-your-cookies-httponly.html)

> 为了跟踪您从一个站点到另一个站点的访问，各个网站是否在数据库中共享信息，即当您访问 FB、谷歌、CNN 时……他们是否将您的活动记录在一个共享数据库中，该数据库可供集团内的公司访问？

[是的](http://www.networkadvertising.org/choices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:26:48.710

一般来说，是的。例如，如果您查看 CNN.com 设置的 cookie，则会为 scorecardresearch.com 域设置 cookie：

[http://webcookies.info/cookies/cnn.com/11993/](http://webcookies.info/cookies/cnn.com/11993/)

然后是一些 JavaScript 代码或 1x1 图像，它们实际上创建了对 scorecardresearch.com 服务器的请求。通过这种方式，记分卡研究可以在您从 CNN 转移到其他网站时跟踪您。他们肯定会使用他们的技术汇总来自各个网站的信息。

分析只是利用这些聚合的行为数据。

# ruby-on-rails - 什么是“Rails 方式”让表单不直接映射到对象模型？

> ID：13227593
> 
> 赞同：1
> 
> 时间：2012-11-05T07:15:09.470
> 
> 标签：ruby-on-rails, forms

假设我有三个表来容纳多对多关系。

```
class User < ActiveRecord::Base
    has_many :user_hobbies
    has_many :hobbies, :through => :user_hobbies
end
class UserHobbies < ActiveRecord::Base
    belongs_to :user
    belongs_to :hobby
end
class Hobby < ActiveRecord::Base
    has_many :user_hobbies
    has_many :users, :through => :user_hobbies
end 
```

我希望有一个表单，用户可以在其中输入任意数量的爱好，每个爱好都将存储到正确的表中（在我的情况下，“爱好”表是预设的，用户可以从枚举值中进行选择，不要添加它们）

我将如何制作一个表格来实现这一目标？我会为自动完成和动态字段使用 JavaScript（即，每次您输入一个字段时，都会出现另一个字段）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:50:59.887

为了生成此表格，您可以使用两个选项。

一个。第一个选项是使用虚拟属性，该属性将接受用户爱好的逗号分隔值，然后当您保存用户时，虚拟属性将设置与相应用户相对应的爱好。请参阅此 railcast

[http://railscasts.com/episodes/16-virtual-attributes](http://railscasts.com/episodes/16-virtual-attributes)

[http://railscasts.com/episodes/167-more-on-virtual-attributes](http://railscasts.com/episodes/167-more-on-virtual-attributes)

湾。第二个选项是使用accepts_nested_attributes_for，它会自动包含父模型中嵌套关系的属性...有关accepts_nested_attributes_for的更多信息，请参阅API

我还可以在上述定义中看到一个错误，因为在爱好表中应该有 has_many :users :through :user_hobbies 关系，因为我们可能想知道用户拥有..

就自动完成而言，有一个名为 auto-complete-rails 的 gem，它的文档非常简单且易于使用和理解。

# iphone - 从外围知道它是否与中央断开连接

> ID：13227596
> 
> 赞同：1
> 
> 时间：2012-11-05T07:15:30.480
> 
> 标签：iphone, ios6, core-bluetooth, bluetooth-lowenergy

我有一个 BLE 设备作为外围设备，一个 iPhone4s 作为中央设备。两者都通过 BluetoothLE 连接。我的问题是我可以从外围设备端知道它已与中央设备断开连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:23:45.213

根据外围设备的实现（HCI 接口或专有），您将获得断开连接完成事件（[蓝牙核心规范 4.0](https://www.bluetooth.org/docman/handlers/downloaddoc.ashx?doc_id=229737) - 第 2 卷 E 部分第 7.7.5 节）或专有等效事件。

您能否提供有关您正在使用的外围设备的更多信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T20:29:58.147

如果外围设备断开连接，您可以捕获 didDisconnect （在 iOS 端） -(void) centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)peripheral error:(NSError *)

您还可以向 iOS 询问“已知”设备（仅限那些已配对，因此在 iOS6 中被记住/缓存的设备）检查每个设备并检查 peripheral.isConnected 标志。不幸的是，iOS 似乎也缓存了太久，所以有时即使连接已经 lsot，您也会看到 isConnected 标志。

从外围设备端，您必须跟踪 didConnects / didDisconnects。

# python - 如何在python中只比较日期（而不是时间）

> ID：13227597
> 
> 赞同：21
> 
> 时间：2012-11-05T07:15:30.723
> 
> 标签：python, date, datetime

我有 2 个日期时间对象。一个只有日期，另一个有日期和时间。我只想比较日期（而不是时间）。这就是我所拥有的：

```
d2=datetime.date(d1.year,d1.month,d1.day)
print d2 == d1.date 
```

它打印出错误的。知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-05T07:20:35.377

```
d1.date() == d2.date() 
```

来自 Python[文档](http://docs.python.org/3.3/library/datetime.html#datetime.datetime.date)：

> `datetime.date()`返回具有相同年月日的日期对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T07:21:34.100

首先将您的日期时间对象转换为日期对象。一旦它们属于同一类型，比较就会有意义。

```
if d2.date() == d1.date():
    print "same date" 
else:
    print "different date" 
```

对于您的上述情况：-

```
In [29]: d2
Out[29]: datetime.date(2012, 1, 19)

In [30]: d1
Out[30]: datetime.datetime(2012, 1, 19, 0, 0) 
```

所以，

```
In [31]: print d2 == d1.date()
True 
```

您的案例所需要的只是确保您正在使用方括号执行 date 方法`()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-21T07:12:39.260

对于那些想要将特定日期与今天日期进行比较的人。

```
import datetime

# Set specific date
date = '2020-11-21'

# Cast specific date to Date Python Object
date = datetime.datetime.strptime(date, '%Y-%m-%d').date()

# Get today date with Date Python Object
today = datetime.date.today()

# Compare the date
isYesterday = date < today
isToday     = date == today
isTomorrow  = date > today 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T07:20:46.953

```
>>> datetime.date.today() == datetime.datetime.today().date()
True 
```

[欲了解更多信息](http://docs.python.org/2/library/datetime.html#datetime-objects)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-06T21:30:36.480

**TL&DR：**

DateTime 对象有一个名为 date() 的内置函数。您可以使用它来仅获取 datetime 对象的日期。

**例子：**

```
current_time_dt_object  = datetime.datetime.now()
current_time_only_date = current_time_dt_object.date() 
```

您现在可以将此 current_time_only_date 用作您想要的任何相等操作。

# c# - (type)(object)Variable 是在泛型类中使用重载的唯一方法吗？

> ID：13227600
> 
> 赞同：1
> 
> 时间：2012-11-05T07:15:36.987
> 
> 标签：c#, .net

想知道使用“动态”是否是在泛型类型中使用重载的唯一方法。(int)(object) 前缀有点麻烦。

```
public class TOfTestCase<T> {
    public void otherMethod(int arg1) {

    }

    public void method(T arg1) {
        if (typeof(T) == typeof(int)) {
            otherMethod((int)(object)arg1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:19:05.757

是的，恐怕是的。您需要有效地欺骗 C# 编译器，使其不尝试寻找更有意义的转换。

就我个人而言，我*通常*发现，如果一个方法只能处理某些类型，最好有重载而不是一开始就使其成为泛型，但这取决于具体情况。

如果您*真的*想执行重载（示例代码中没有显示重载，因为每个名称只有一个方法）并且如果您使用的是 C# 4，则*可以*使用动态类型：

```
public class SampleClass<T> {
    public void OtherMethod(int arg) {}
    public void OtherMethod(string arg) {}
    public void OtherMethod(DateTime arg) {} 

    public void Method(T arg) {
        dynamic d = arg;
        OtherMethod(d);
    }
} 
```

当然，如果没有合适的重载，这将在执行时失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:34:54.557

实际上，您可以完全避免装箱/拆箱......

```
public class TOfTestCase<T> {
    public void otherMethod(int arg1) {

    }

    public void method(T arg1) {
        if (typeof(T) == typeof(int)) {
            otherMethod(__refvalue(__makeref(arg1), int));
        }
    }
} 
```

...如果您不介意使用这些关键字。=P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:26:50.593

如果您希望它是通用的，这可以是一个选项，否则我同意 Jon 的观点，即重载更干净。

```
public void method<T>(T arg1) where T : IConvertible
{
    OtherMethod(arg1.ToInt32(CultureInfo.InvariantCulture));
} 
```

在您的情况下，您需要对您的类或此方法的 T1 进行约束。请注意，如果您通过像 1.2 这样的双精度数，则可能会丢失数据。

# javascript - 页面刷新后字段不显示在 IE7 中

> ID：13227605
> 
> 赞同：0
> 
> 时间：2012-11-05T07:16:10.807
> 
> 标签：javascript, jquery, internet-explorer-7

当复选框被选中时，我已经写了显示（隐藏/显示）字段的代码。javascript如下

```
if(document.getElementById("checkBox") != null){
            if(!document.getElementById("checkBox").checked){
                document.getElementById("displayField1").style.display = "none";
                document.getElementById("displayField2").style.display = "none";
                document.getElementById("displayField3").style.display = "none";
            }else{
                document.getElementById("displayField1").style.display = "";
                document.getElementById("displayField2").style.display = "";
                document.getElementById("displayField3").style.display = "";
            }
        } 
```

在 JQuery 中

```
$(document).ready(function(){
if ($('#checkBox').is(':checked')) {
                    $("#displayField1").show();
                    $("#displayField2").show();
                    $("#displayField3").show();
                } else {
                    $("#displayField1").hide();
                    $("#displayField2").hide();
                    $("#displayField3").hide();
                } 
        }); 
```

刷新页面后，它在 IE8 中运行良好，但在 IE7 中运行良好。我也尝试过 jquery，但仍然面临这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:30:52.743

您可以使用兼容性库来添加 IE7 支持：

[http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)

# android - 广播接收器和内容解析器

> ID：13227607
> 
> 赞同：0
> 
> 时间：2012-11-05T07:16:16.380
> 
> 标签：android, broadcastreceiver, android-contentresolver

我是 android 开发的新手，我正在创建一个应用程序，它接收格式为“获取名称”的短信，名称是地址簿中的联系人，并将名片返回给发件人。我已经添加了所有权限，但是每当我发送消息“获取名称”时它似乎崩溃了。尽管不涉及函数调用，但它确实适用于无效命令

这是我的主要活动

```
 public class MainActivity extends Activity
    {       

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {        
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);                                
         }        
         } 
```

这是广播接收器

```
 public class SmsReceiver extends BroadcastReceiver
    {
    String str="",phoneno="";
    MainActivity object=new MainActivity();

    @Override
public void onReceive(Context context, Intent intent) 
{

    //---get the SMS message passed in---
    .
    .
    .

    //---retrieve the SMS message received---
    .
    .
    .

        if(command.equalsIgnoreCase("get")){            

            try{

           Intent start_contact_retrieve=new Intent();
           start_contact_retrieve.setClass(context, ContactRetrieve.class); 
           context.startService(start_contact_retrieve); 
           context.stopService(start_contact_retrieve);                               
         }
            catch(Exception e){
            Log.e("receiver function", e.getMessage());
            }

        //---display the new SMS message---
        .
        .
        .

        }       

        else{ 
        SmsManager invalid_command=SmsManager.getDefault();
        invalid_command.sendTextMessage(phoneno, null, "Invalid Command", null, null);
        }         
}   
} 
```

这就是我要调用的服务

```
 public class ContactRetrieve extends Service{

SmsReceiver sreceiver=new SmsReceiver();        
String argument_name=sreceiver.str;
String argument_phoneno=sreceiver.phoneno;

@Override
public IBinder onBind(Intent arg0) {
    throw new UnsupportedOperationException("Not supported yet.");
}

@Override
public void onCreate() {
    super.onCreate();
    String returned_data=retrievecontact();
    SmsManager smsman= SmsManager.getDefault();
        smsman.sendTextMessage(argument_phoneno, null, returned_data, null, null);

}

public String retrievecontact(){    
    String phone="No Contact Found";        

    ContentResolver cr=getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);

     if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
             .
             .
             .
             .
   }    

}
     return phone;
} 

} 
```

我尝试在主要活动本身中调用此函数，但它也不起作用。该程序只是停止响应。在过去的两天里，我一直被这个问题困扰。任何帮助将不胜感激。PS对不起所有的代码。

这是更新的代码....

```
@Override
public void onCreate() {
    super.onCreate();
    Thread t=new Thread(this);
    t.start();                                            
}

public String retrievecontact(){    

    String phone="No Contact Found";        
            try{
    ContentResolver cr=getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);

     if (cur.getCount() > 0) {
        while (cur.moveToNext()) {

        .
        .
        .
        }
   }    

}

}

catch(Exception e){
Log.e("ERROR", e.getMessage());
    }
            return phone;
}

public void run() {
    String returned_data=retrievecontact();
    SmsManager smsman= SmsManager.getDefault();
        smsman.sendTextMessage(argument_phoneno, null, returned_data, null, null);
        stopSelf();
} 
```

日志猫

```
 ??-?? ??:??:??.??? 0       INFO    <unknown>   [ 11-05 14:04:04.204  1571: 1585 E/AndroidRuntime ]
     ??-?? ??:??:??.??? 0       INFO    <unknown>   FATAL EXCEPTION: Thread-144
     ??-?? ??:??:??.??? 0       INFO    <unknown>       at android.minor_project.ContactRetrieve.run(ContactRetrieve.java:172)
     ??-?? ??:??:??.??? 0       INFO    <unknown>   [ 11-05 14:04:04.324   190:  291 W/ActivityManager ]
     ??-?? ??:??:??.??? 0       INFO    <unknown>   [ 11-05 14:04:04.343   190:  291 W/WindowManager ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:42:59.613

您可能需要在清单文件中声明 READ_CONTACTS 的权限，

```
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:44:59.430

我建议进行以下更改：

1）在方法处的服务中创建一个后台线程，并从该线程的方法中`onStartCommand()`调用。由于服务也在进程人线程（UI线程）中运行，如果内容解析器花费时间，它也可能使应用程序崩溃。`retrievecontact()``run()`

3) 尝试将`retrievecontact()`方法放入 try catch 以查看它是否引发任何异常。

4)`context.stopService(start_contact_retrieve);`从`SMSReciever`班级中删除。您不应该在启动服务后立即停止它。而是`stopSelf()`在以下行之后调用：

```
SmsManager smsman= SmsManager.getDefault();
        smsman.sendTextMessage(argument_phoneno, null, returned_data, null, null); 
```

编辑1：

使用以下代码将名称从接收者发送到服务：

在广播接收器中：

```
 Intent start_contact_retrieve=new Intent();
start_contact_retrieve.setClass(context, ContactRetrieve.class); 
start_contact_retrieve.putExtra("contact_name", name_of_contact_retrived_from_sms);
context.startService(start_contact_retrieve); 
```

在服务中：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    String name  = intent.getStringExtra("contact_name");
    //start the thread and pass name as parameter to the retrieve method
    return super.onStartCommand(intent, flags, startId);
} 
```

# ruby-on-rails - Rails 在提交表单时未显示错误

> ID：13227611
> 
> 赞同：0
> 
> 时间：2012-11-05T07:16:42.290
> 
> 标签：ruby-on-rails, ruby

我在 rails 2 工作，我有一个包含两个模型数据的表单，在一个模型中，我正在验证字段并使用 输入错误`self.errors.add_to_base`，但这并未在表单上显示错误并成功提交该请求。

这是我的模型验证\

```
validate :checkPunchingEntries

  def checkPunchingEntries
    if self.punch_in_time.blank? && self.punch_out_time.blank?
      self.errors.add_to_base("Both 'Punch in' and 'Punch out' time can not be blank")
    end
  end 
```

这是我的表格

```
<% form_tag '/punching_requests/create', :method => :post, :class=>"punching_request_form" do %>
    <% @punching_request.errors.full_messages.each do |msg| %>
        <p class="error"><%=msg%></p>
    <% end %>

    <p>
      <label>Date </label>
      <%= text_field_tag 'date'%>  <%= calendar_for("date") %>
    </p>

    <p>
      <label>&nbsp;</label>
      <input type="checkbox" onclick="punch_in_toggle()">Punch In</input>
      <input type="checkbox" onclick="punch_out_toggle()">Punch Out</input>
    </p>

    <div id="punch_in">
      <p>
        <label>Punch In Time </label>
        <%= text_field_tag 'punch_in_time'%>
      </p>
    </div>

    <div id="punch_out">
      <p>
        <label>Punch Out Time </label>
        <%= text_field_tag 'punch_out_time'%>
      </p>
    </div>

    <p>
      <label>Assign To</label>
      <%= select_tag(:approved_by,  options_from_collection_for_select(@human_resource_persons, "id", "login")) %>
    </p>

    <p>
      <label>Reason </label>
      <%=text_area_tag 'reason'%>
    </p>

    <p class="actions"><label></label><%= submit_tag 'Save' %></p>

<% end %> 
```

它进入验证，但验证失败时不显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:30:25.203

您是否尝试过 IRB 控制台？如果没有，请查看那里发生了什么，以确保其中`@punching_request.errors`包含某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:43:51.933

在此您正在使用生成表单`form_tag`，并且您期望的错误将存储在表单构建器中，`form_for`.

而不是`form_tag`使用`form_for(@punching_request)`. 这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:49:50.687

尝试这个

```
def checkPunchingEntries
  if self.punch_in_time.blank? && self.punch_out_time.blank?
    errors[:base]<< "Both 'Punch in' and 'Punch out' time can not be blank"
  end
end 
```

并使用`form_for`和`@punching_request`

**例如**

```
# in your controller
def new
  @punching_request = PunchingRequest.new
end
def create
  ...
  ...
end 
```

你的表格看起来像你的`new.html.erb`

```
form_for(@punching_request)
  ...
  ...
end 
```

# android - build.phonegap.com - 后台进程（无论应用程序是否运行，任务都会定期完成）

> ID：13227612
> 
> 赞同：0
> 
> 时间：2012-11-05T07:16:45.257
> 
> 标签：android, cordova, phonegap-plugins

使用 build.phonegap.com(for Android) ，我可以做一些后台操作吗：
假设今天打开了应用程序，之后，用户才在 30 天后打开它。但是，从今天开始，无论用户是否打开它，每天都应该完成一些更新应用程序的过程。那么，我们可以使用这个操作吗？

# ios - 使用 UIImagePickerControllerSourceTypeSavedPhotosAlbum 从库中选择

> ID：13227615
> 
> 赞同：1
> 
> 时间：2012-11-05T07:16:57.010
> 
> 标签：ios, xcode, ipad, ios6, uiimagepickercontroller

我想在拍摄照片或视频时选择图像或视频作为一种选择。当我似乎单击该选项时，应用程序崩溃了。我正在使用 ios 6，当应用程序尝试搜索现有图像和视频时，苹果似乎包含了一些隐私问题。除此之外，我应该仍然使用 UIImagePickerControllerSourceTypeSavedPhotosAlbum 还是使用其他东西？

我的部分代码：

```
 if (buttonIndex == 2) { 
        imgpPicker           = [[UIImagePickerController alloc] init];
        imgpPicker.sourceType  = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        imgpPicker.mediaTypes  = [NSArray arrayWithObjects:(NSString *)kUTTypeMovie,(NSString *)kUTTypeImage,nil];
        popOverView             = [[UIPopoverController alloc] initWithContentViewController:imgpPicker];
        [popOverView presentPopoverFromRect:self.view.bounds inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

调试器上出现的错误是信号 SIGABRT：

```
*** Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation', reason: 'Supported orientations has no common orientation with the application, and shouldAutorotate is returning YES'

*** First throw call stack:
(0x36a732a3 0x33e9a97f 0x36a731c5 0x3777d897 0x3777d6a1 0x3777d65b 0x3777ce1b 0x3777cb45 0x37735767 0x377355c7 0x377355c7 0x3772fe53 0x377177e5 0x377172cb 0x37b00b95 0x115313 0x378d6ccb 0x378000ad 0x3780005f 0x3780003d 0x377ff8f3 0x377ffde9 0x377285f9 0x37715809 0x37715123 0x3644d5a3 0x3644d1d3 0x36a48173 0x36a48117 0x36a46f99 0x369b9ebd 0x369b9d49 0x3644c2eb 0x37769301 0xe1763 0xe14c0)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

应用程序的隐私也在设置中设置为开启。

难道我做错了什么？

任何指导或提示都会非常有帮助。对不起，如果问题很模糊。如果需要更多信息，我可以提供...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:41:40.387

在您的代码中添加：

```
- (BOOL)shouldAutorotate
{
   return YES;
} 
```

并转到应用程序的摘要选项卡并允许纵向和横向方向。

![摘要选项卡](../Images/a3291fac60457290fe3dac364a187e8a.png)

# html - 在 htmlString ( webView ) Xcode 中设置图像高度 = 70%

> ID：13227616
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:17:01.277
> 
> 标签：html, uiwebview, uiscrollview, xcode4.3

我在 UIScrollView 中加载了一个 uiwebview ..i 在 webView 中加载一个 HTMLString 使用此代码：

```
 NSString * htmlString = [NSString stringWithFormat:@"\
                             <html>\
                             <table width='960'>\<tr>\<td>\
                             <body>\
                             <p style = 'font-size:25px;'> %@ <\p>\
                             </td></tr><tr><td><br><br></td></tr><tr><td align ='center'><br><img src='%@' height='600px'\><br></td></tr></body>\
                             </table>\
                             </html>",authorNAme , cachePath];

    WebV.opaque = NO;
    WebV.backgroundColor = [UIColor clearColor];  
    [self.WebV setScalesPageToFit:YES];
    [self.WebV loadHTMLString:htmlString baseURL:baseURL]; 
```

而不是 Height = '600px' 我需要 height = 原始图像高度的 70% ...如果我写 height = '70%' ，Xcode 会将其视为 70 px 左右，只是无法工作...如何我能解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:08:27.227

像这样写：

```
height = 70%% 
```

当你这样写时：

```
height = 70% 
```

之后 Xcode 将期待一个转义序列。

> 在格式字符串中，'%' 字符表示一个值的占位符，其后的字符确定预期值的类型以及如何格式化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:08:56.227

您需要使用 70%% 而不是 70%

# javascript - 自定义函数类

> ID：13227623
> 
> 赞同：3
> 
> 时间：2012-11-05T07:17:35.580
> 
> 标签：javascript

我正在从事一个涉及从其他功能构建功能的项目。我有编写一个类来简化事情的想法，但如果不使用`__proto__`.

这基本上是我的愿景。

```
function MyFunction () {
    // ...
}
var myFn = new MyFunction();
myFn(); // executes without error
myFn instanceof MyFunction; // returns true 
```

下面的代码就是这样做的`__proto__`

```
function MyFunction () {
    var fn = function () { return 'hello'; };
    fn.__proto__ = this;
    return fn;
}
var myFn = new MyFunction();
alert( myFn() ); // hello
alert( myFn instanceof MyFunction ); // true 
```

这是我尝试使用的东西`valueOf`

```
function MyFunction () {
    this.fn = function () { return 'hello'; };
    this.valueOf = function () { return this.fn; };
}
var myFn = new MyFunction();
alert( myFn instanceof MyFunction ); // true
alert( myFn.valueOf()() ); // hello
alert( myFn() ); // error 
```

这里还有一些扩展函数以包含`MyFunction`.

```
function MyFunction () {
    this.foo = 'hello'
    var fn = function () { return 'hello'; };
    for ( var i in this ) {
        fn[ i ] = this[ i ];
    }
    return fn;
}
var myFn = new MyFunction();
alert( myFn() ); // hello
alert( myFn.foo ); // hello
alert( myFn instanceof MyFunction ); // false 
```

我不想使用`__proto__`，因为它是非标准的。此外，这是一个奇怪的想法，我真的很想让它发挥作用，但如果不可能，我会活下去。但我想我的问题是，我想做的事情可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:42:12.393

迷人的想法。我不相信你可以用标准的 ECMAScript 做到这一点，甚至不能使用 ES5。

ES5 让我们可以更好地访问和控制原型，包括在创建对象时提供一种设置原型的方法（无需通过构造函数）`Object.create`，但您不能通过该机制构造*函数。*这就是你必须要做的，因为`instanceof`使用抽象规范`[[HasInstance]]`方法，目前仅由函数实现，并且[它的函数实现](http://ecma-international.org/ecma-262/5.1/#sec-15.3.5.3)通过查看对象的底层原型 ( `[[Proto]]`) 是否`===`与函数的`prototype`属性来工作。设置对象底层原型的唯一*标准*方法是通过`new MyFunction`或通过创建它`Object.create`，这两种机制都不会创建函数对象。

ES.next 可能使这成为可能。有一个提案被提升为“和谐”状态（因此，相当先进），用于“[设置原型运算符](http://wiki.ecmascript.org/doku.php?id=harmony%3aproto_operator)”，`<|`旨在解决目前通过`__proto__`. 它的用途之一是“将函数的原型设置为`Function.prototype`”。使用它（以其当前形式），您`MyFunction`将看起来像这样：

```
function MyFunction () {
  return MyFunction.prototype <| function () { return 'hello'; };
}
MyFunction.prototype = Object.create(Function.prototype); 
```

最后一点是使其成为`MyFunction.prototype`具有原型的对象`Function.prototype`，以便通过`MyFunction`具有`call`、、、`apply`等构造的函数`bind`。

# oop - 实体集和实体有什么区别？这是定义标准吗？

> ID：13227629
> 
> 赞同：3
> 
> 时间：2012-11-05T07:18:27.733
> 
> 标签：oop, object, entity, set, entityset

我想知道我的教科书是否有非标准定义。我把[这个问题](https://stackoverflow.com/questions/6162746/what-is-the-difference-between-an-entity-entity-set-and-attributes)加红了，它不是重复的。本书将实体和实体集定义为

> 实体是某种抽象对象，相似实体的集合形成实体集。在面向对象编程的意义上，实体在某些方面类似于“对象”。同样，实体集与一类对象有一些相似之处。

当他们说“对象类”时，他们指的是一个类，就像您实例化以创建新对象一样（我知道这只是一个松散的比较）。听起来实体集比实体更通用，但在[这个问题](https://stackoverflow.com/questions/6162746/what-is-the-difference-between-an-entity-entity-set-and-attributes)中，回复指出“实体集通常代表实体数据的一部分”，而恰恰相反。

我认为实体就像数据库中的表，那么实体集是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-05T06:30:37.153

实体是现实世界中的对象，例如人、地点或事物，或抽象对象，例如课程、航班预订等。这里我们使用冠词“a”或“an”来表示特定对象的实例人、特定地点或特定事物作为一个实体。例如，我，名字叫“Vidyasagar”是一个实体，而你也是一个实体。所有相似的实体形成实体集。相似意味着每个实体都具有相同的（为简单起见）属性。所有人员实体都将具有相同的属性，例如名字、中间名、姓氏、出生日期等。实体和实体集分别类似于关系数据库术语行/元组和表/关系。这些也分别类似于对象和对象集合的 OOPS 术语。

显然，我们不能在数据库中存储真实世界的实体，例如人、玩具、城市等！我们只能存储有关现实世界实体的数据。数据由实体的每个属性的值组成。例如，城市实体的数据可以是伦敦城市实体的“London”和“UK”，巴黎城市实体的“Paris”和“France”以及班加罗尔城市实体的“Bangalore”和“India”。为方便起见，我们使用一个或多个属性（键）的值来引用实体。因此，当我们说巴黎实体时，我们指的是位于法国的城市巴黎。那就是我们指的是巴黎和法国的价值观对。这对值一起是一个实体。这三个实体是 ('London', 'UK'), ('Paris', 'France') 和 ('Bangalore', 'India')。这样使用的括号没有意义。这三个实体将形成一个实体集，例如 CITIES。希望这很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:37:30.503

在我看来，你教科书中的定义不是很清楚。我觉得很混乱。我认为你应该停在定义的第一部分：

> 实体是某种抽象对象，相似实体的集合形成实体集。

集合只是一个集合，一组这些实体。通常这些实体的类型是相同的，所以我想这样说：

> 实体集与一类对象有一些相似之处。

这意味着此集合/集中的对象是同一类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T07:29:34.720

实体是某种抽象对象，相似实体的集合形成实体集。在面向对象编程的意义上，实体在某些方面类似于“对象”。同样，实体集与一类对象有一些相似之处

# http - Http 1.1 连接和客户端端口

> ID：13227631
> 
> 赞同：0
> 
> 时间：2012-11-05T07:18:38.377
> 
> 标签：http, tcp, connection, port

客户端远程端口在 HTTP 1.1 连接交换期间是否更改？

我试图弄清楚我是否可以使用请求远程端口和远程 IP 地址以编程方式唯一地识别服务器上的连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:10:29.280

这不是一个 HTTP 问题，而是一个 TCP 问题。不，端口不会改变：[临时端口](http://en.wikipedia.org/wiki/Ephemeral_port)在连接期间保持不变。

但是，一旦建立新连接，客户端*就可以*（并且很可能*会*）使用不同的端口。这完全取决于客户端操作系统的实现和中间路由器的网络地址转换。

无论如何，你不能依赖它来构建像会话这样的东西，因为来自同一客户端的下一个请求很可能来自不同的端口（更不用说 HTTP 不必在 TCP 之上运行）。

只需使用您存储在 cookie 中的会话 ID。

# java - 保留 ImageIcon 或 BufferedImage 数组？

> ID：13227636
> 
> 赞同：0
> 
> 时间：2012-11-05T07:18:49.453
> 
> 标签：java, swing, type-conversion, bufferedimage, imageicon

我的 Java 程序在启动时加载了一堆图像。现在对于每个图像，我称之为这段代码。最终我得到了一个 ImageIcon 数组，它将在用户界面中使用。

```
InputStream is = getClass().getClassLoader().getResourceAsStream(imagePath);
bimage = ImageIO.read(is);
is.close();
Image img = bimage.getScaledInstance(width, height, Image.SCALE_SMOOTH);
return new ImageIcon(img); 
```

但是现在我想实现一个从数组中获取对象并以指定语言添加标题的方法。所以我必须使用Graphics2D.drawString()。但是 ImageIcon 没有 createGraphics() 方法。有没有办法从 ImageIcon 获取图形？

```
Graphics2D g = bimage.createGraphics();
g.setColor(Color.red);
g.setFont(new Font( "SansSerif", Font.BOLD, 25 ));
g.drawString("TEST", 25, 25); 
```

现在的问题是：**我应该保留 ImageIcon 还是 BufferedImage 数组？**

# linux - 会话断开后如何重新连接到后台 GUI 应用程序？

> ID：13227642
> 
> 赞同：0
> 
> 时间：2012-11-05T07:19:09.937
> 
> 标签：linux, process, ssh, background-process, xserver

我们将 Eclipse 设置为中央 Linux 服务器上的 IDE。每个人都将连接到服务器，打开一个 Eclipse 实例，在上面工作。

Eclipse 将作为后台进程运行，向用户显示 GUI。

发生的情况是，有时人们会突然断开 SSH 会话（使笔记本电脑进入睡眠状态等），而没有正确关闭 Eclipse，这有时会使 Eclipse 进程在后台运行。

每当用户下次尝试连接时，他们不知道现有的 Eclipse 会话，并继续启动一个新会话，而现有的 Eclipse 进程继续在后台运行，占用所有资源。

问题是，我们能否以某种方式重新连接到那个废弃的 Eclipse 会话？是否可以在用户离开它的相同状态下启动 Eclipse？

我看着[GNU 屏幕](http://www.gnu.org/software/screen/)。但是，它不能将 GUI 应用程序带回给用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:50:44.037

这对我来说似乎是一个有问题的设置。为什么不首先在本地计算机上工作？但是，如果您想（或必须）在服务器上工作，最好通过[XDMCP](http://en.wikipedia.org/wiki/XDMCP)、[VNC](http://en.wikipedia.org/wiki/VNC)或[Citrix XenAPP](http://en.wikipedia.org/wiki/Citrix_XenApp)（商业）直接在服务器上启动桌面。

编辑：刚刚发现[这篇关于 xmove](https://wiki.archlinux.org/index.php/Allow_a_program_to_continue_after_logoff#X_applications)的文章。我以前没有听说过它，但也许它有效。

# android - 在android中获取传入消息的错误时间戳

> ID：13227650
> 
> 赞同：1
> 
> 时间：2012-11-05T07:19:38.623
> 
> 标签：android, sms, timestamp

我正在制作一个短信应用程序，我想在其中根据日期和短信的原始地址删除短信。`I already know how to delete the sms on the basis of these 2 criterias`.在收件箱中已经存在短信的情况下，我使用以下代码获取短信的正确时间戳：

```
String date =  cursor.getString(cursor.getColumnIndex("date"));
Long timestamp = Long.parseLong(date);    
String DateTime = MyDate.getDate(timestamp, "dd/MM/yyyy hh:mm:ss a");
Log.d("Value: ","Value of date in ApplicationIntialiseCareTaker is "+DateTime); 
```

但是对于新收到的短信，我没有得到正确的短信时间戳，因此无法删除短信。这是我用来在收到短信的情况下获取短信时间戳的代码：

```
body = sms.getMessageBody().toString();
address = sms.getOriginatingAddress();
long date = sms.getTimestampMillis(); 
```

使用此代码，问题是我得到的时间戳应该延迟大约 1 秒。例如，实际时间戳是 12:10:32，但在接收传入短信的情况下使用此代码，它是 12:10:33。我不知道是什么问题。

# mysql - 在mysql中插入时转义特殊字符

> ID：13227656
> 
> 赞同：0
> 
> 时间：2012-11-05T07:20:12.447
> 
> 标签：mysql, escaping, mysql-real-escape-string

我通过在查询中连接值来在 mysql 数据库中插入多行

```
INSERT INTO tableName (col1, col2, col3) VALUES('a', 'b', 'c'), ('d', 'b', 'c'), ('e', 'b', 'c'); 
```

然而，有时整个一堆的一些值需要被转义，就像我`s-â€__83164`输入的值之一一样。当只有一个或两个值有问题时，这会导致整个请求丢失。

有什么方法可以转义字符，`s-â€__83164`或者我是否需要修改字段类型，我正在使用它。我目前`VARCHAR`用于存储这些值。

如果我不清楚我的疑问，请发表评论！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:28:02.080

One thing that you can do, is get all characters into variables and then place those variables in your SQL query. While declaring the variable you can use single quotes to include your data.

# php - Doctrine 不会更新简单的数组类型字段

> ID：13227658
> 
> 赞同：13
> 
> 时间：2012-11-05T07:20:24.333
> 
> 标签：php, symfony, doctrine, doctrine-orm, symfony-forms

## 短篇小说（编辑）

可以存储数组而不是映射关联。在 Symfony2 中，使用[集合 Field Type](http://symfony.com/doc/current/reference/forms/types/collection.html)相当容易。例如，使用此技术，您可以存储填充数组事件字段的文本字段数组。但是，要更新数组，有一个技巧，@Vadim Ashikhman 在接受的答案中很好地解释了这个技巧。

## 很长的故事

有时存储数组而不是映射关联更有用且更有效。但是，一旦创建，如果该数组的大小没有改变，更新这个数组仍然很复杂？

许多人有[类似的问题](https://stackoverflow.com/questions/11084209/how-to-force-doctrine-to-update-array-type-fields)，但没有人找到解决此问题的适当方法。

![存储一个数组](../Images/e58272f03c0284cfa45080301cfa056a.png)

一个团队可以组织许多活动。这些事件使用 Doctrine 而不是使用 OneToMany 关联简单地存储在一个数组中。因此，实体 Event 没有与 Doctrine 映射。

## 实体事件（未映射到 Doctrine）

```
<?php

namespace Acme\TestBundle\Entity;

...

class Event
{

    /**
     * @Assert\NotBlank
     */
    private $name;

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }

} 
```

## 实体团队

```
<?php

namespace Acme\TestBundle\Entity;

...

/**
 * @ORM\Entity()
 * @ORM\HasLifecycleCallbacks
 * @ORM\Table(name="teams")  
 */
class Team 
{

/**
     * @ORM\Column(type="array")
     * @var array
     */
    protected $events;

    public function addEvent($event)
    {
        if (!in_array($event, $this->events, true)) {
            $this->events[] = $event;
        }

        return $this;
    }

    public function removeEvent($event)
    {
        if (false !== $key = array_search($event, $this->events, true)) {
            unset($this->events[$key]);
            $this->events = array_values($this->events);
        }

        return $this;
    }

    public function getEvents()
    {
        return $this->events;
    }

    public function setEvents(array $events)
    {
        $this->events = array();

        foreach ($events as $event) {
            $this->addEvent($event);
        }

        return $this;
    } 
```

## 活动形式

```
<?php
namespace Acme\TestBundle\Form\Type;

...

class EventType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        $builder->add('name', 'text');
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\TestBundle\Entity\Event',
            'cascade_validation' => true,
        ));
    }

    ...
} 
```

## 团队形式

```
<?php

namespace Acme\TestBundle\Form\Type;

...

class TeamType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        $builder->add('events','collection', array(
            'type' => new EventType(),
            'allow_add'   => true,
            'allow_delete' => true,
            'prototype' => true,
            'by_reference' => false,
            'options' => array('data_class' => 'Acme\TestBundle\Entity\Event'),
            )
        );

    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Acme\TestBundle\Entity\Team',
        ));
    }
    ...

} 
```

## 控制器

```
/**
 * Update a team
 *
 * @Route("update/{team_id}", name="updateTeamFromId")
 * @Template("AcmeTestBundle:Team:teamUpdate.html.twig")
 */
public function updateTeamAction($team_id, Request $request)
{

    $em = $this->getDoctrine()->getManager();

    $repository= $em->getRepository('AcmeTestBundle:Team');

    $team_to_update = $repository->find($team_id);

    $form = $this->createForm(new teamType(), $team_to_update);

    if ($request->getMethod() == 'POST')
    {
        $form->bind($request);

        if ($form->isValid()){

            $em->persist($team_to_update);
            $em->flush();

            return $this->redirect($this->generateUrl('homepage'))  ;
        }
    }

    return array(
    'form' => $form->createView(),
    'team_id' => $team_id,
    );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T12:28:51.890

你可以在控制器内部试试这个：

```
public function updateTeamAction($team_id, Request $request)
{

    $em = $this->getDoctrine()->getManager();

    $repository= $em->getRepository('AcmeTestBundle:Team');

    $team_to_update = $repository->find($team_id);

    $form = $this->createForm(new teamType(), $team_to_update);

    if ($request->getMethod() == 'POST')
    {
        $form->bind($request);

        if ($form->isValid()){
            $events = $team_to_update->getEvents();
            foreach($events as $key => $value){
                $team_to_update->removeEvent($key);
            }
            $em->flush();
            $team_to_update->setEvents($events);
            $em->persist($team_to_update);
            $em->flush();

            return $this->redirect($this->generateUrl('homepage'))  ;
        }
    }

    return array(
    'form' => $form->createView(),
    'team_id' => $team_id,
    );

} 
```

可能有更好的方法来做到这一点，我知道这不是一个好方法，但直到你（或其他人）找到解决方案，你可以将它用作临时修复。

# c# - 比较数据网格中复选框列的现有值和修改值

> ID：13227662
> 
> 赞同：0
> 
> 时间：2012-11-05T07:20:35.837
> 
> 标签：c#, asp.net

我有显示活动名称和复选框列的数据网格。如果他/她想要选择该活动并按下提交按钮以成功添加它，则用户选中该复选框。

如果用户想要取消选中选中的复选框，我必须进行某些验证以检查该活动当前是否与任何其他事物相关联。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:53:53.487

如果验证可以在客户端完成，则向 GridView 添加一个模板字段，在模板字段中添加一个 CheckBox 并附加一个 JavaScript 事件

```
<asp:TemplateField HeaderText="IsActive">
    <ItemTemplate>
        <asp:CheckBox ID="chkActive" Checked='<%# Bind("IsActive") %>' runat="server" onClick="checkboxClicked(this)" />
    </ItemTemplate>
</asp:TemplateField> 
```

处理 JavaScript 事件并执行验证。如果用户取消选中该复选框并且验证失败，您可以提示用户并在 JavaScript 中选中该复选框，如下所示：

```
function checkboxClicked(src) {
    if (!src.checked) {
        var valid;
        //Perform validation and set a boolean value to the variable valid
        if(!valid)
            src.checked = true;
     }
} 
```

这可能会帮助您实现您正在寻找的东西。如果您需要任何其他帮助，您可以发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:28:11.240

没有看到你的`HTML`标记，我可以建议你做这样的事情......

```
$('#my_checkbox').click(function(){
if($(this).is(':checked'){
   // do something here
} else {
   // Perform your certain validations here..
} 
```

}

# jsf - 没有为输入文本调用 Setter

> ID：13227667
> 
> 赞同：1
> 
> 时间：2012-11-05T07:20:52.973
> 
> 标签：jsf, valuechangelistener

我有一个包含输入文本和一组单选按钮的表单。单击单选按钮时，我正在调用值更改侦听器。在值更改侦听器中，我正在打印用户在输入文本字段中输入的值。但我总是得到文本字段的旧值，而不是用户输入的新值。我了解 ValueChangeListener 属于验证周期。但是，如果我需要访问输入字段的新值，我该怎么办？ **注意：**托管 bean 是请求范围。如果我将范围更改为会话，它工作正常。欢迎对此进行任何解释。JSP中的代码如下：

```
<h:form>
Enter name:<h:inputText value="#{employee.empId}"></h:inputText>
Choose option: <h:selectOneRadio onclick="this.form.submit()" 
            valueChangeListener="#{employee.check}" >
<f:selectItem itemLabel="one" itemValue="one"/>
<f:selectItem itemLabel="two" itemValue="two"/>
</h:selectOneRadio>
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:39:30.167

您的问题描述（旧值仅在请求范围内可用；并且它在会话范围内“有效”）与情况相匹配，就好像您将直接访问该属性而不是从[`ValueChangeEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/ValueChangeEvent.html). 这确实是不对的。

`ValueChangeEvent`您获取返回旧值和新值的提议。您应该使用它而不是直接访问该属性。

```
public void check(ValueChangeEvent event) {
    Object oldValue = event.getOldValue();
    Object newValue = event.getNewValue();
    // ...
} 
```

* * *

**更新**：根据评论，您实际上对输入字段的值感兴趣。这仅在更新模型值阶段设置，即*在*验证阶段之后，当值更改侦听器运行时。

鉴于您使用的是旧版 JSF 1.2，因此无法使用 JSF2 ajax awesomeness，那么解决此问题的方法之一是将值更改事件手动排队到调用操作阶段，以便您可以获得提交的输入文本价值。

```
public void check(ValueChangeEvent event) {
    if (event.getPhaseId() != PhaseId.INVOKE_APPLICATION) {
        event.setPhaseId(PhaseId.INVOKE_APPLICATION);
        event.queue();
        return;
    }

    System.out.println(empId); // It's available in here.
} 
```

# c# - 通过更改数据表中可用的数据来填充数据网格

> ID：13227669
> 
> 赞同：2
> 
> 时间：2012-11-05T07:21:06.457
> 
> 标签：c#, asp.net, datagridview

我正在尝试从具有从数据库中检索到的数据的数据表中填充数据网格视图。

在填充列和行时，我希望将数据格式化为数据表列中可用的格式。我不希望在填充之前更改数据表中的数据，但是我希望在绑定到网格时更改数据。如果可以使用任何网格属性来完成，请帮助我。

例如：想要用数据库中可用的数据“YES”而不是“Y”填充列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:24:43.760

尝试行数据绑定

```
protected void GridViewProducts_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row .RowType == DataControlRowType .DataRow )
        {
           e.Row.Cells[2].Text = (e.Row.Cells[2].Text=="Y" ? "YES" : "NO"); 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:34:25.783

使用`RowDataBound`事件处理程序：

```
protected void GridView_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
        e.Row.Cells[0].Text = (e.Row.Cells[0].Text == "Y" ? "Yes" : "No"); 
} 
```

**或者**

您可以`DataTable`使用`Copy`以下方法复制原件：

```
DataTable copyDataTable = dataTable.Copy(); 
```

**使用`Loops`：**

```
foreach (DataRow dr in copyDataTable.Rows)
{
    dr["columnName"] = dr["columnName"].ToString().Equals("Y") ? "Yes" : "No";
} 
```

**使用`Linq`：**

```
copyDataTable.AsEnumerable().Where(c => c["columnName"].ToString().Equals("Y"))
         .ToList().ForEach(c => c["columnName"] = "Yes");
copyDataTable.AsEnumerable().Where(c => c["columnName"].ToString().Equals("N"))
         .ToList().ForEach(c => c["columnName"] = "No"); 
```

# android - 对部分文本使用自定义字体

> ID：13227670
> 
> 赞同：3
> 
> 时间：2012-11-05T07:21:08.670
> 
> 标签：android, fonts, spannablestring

```
Typeface robotoBold = Typeface.createFromAsset(activity.getAssets(),
        "fonts/Roboto-Bold.ttf");
Typeface robotoLight = Typeface.createFromAsset(activity.getAssets(),
        "fonts/Roboto-Light.ttf");

SpannableStringBuilder sb = new SpannableStringBuilder("This must be BOLd\nThis must be NORMAL");
sb.setSpan(robotoBold, 0, 17, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
sb.setSpan(robotoLight, 18, 37, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
mTextView.setText(sb); 
```

这为我提供了整个 TextView 的正常文本。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:26:03.987

我们能够做到这一点

**部分文本的字体**

您必须使用alter net，例如获取两个textview并划分您的文本并设置该文本。

或使用

可跨文本

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-05T13:11:57.207

```
mTextView.setText("This must be BOLd\nThis must be NORMAL");
Spannable span = new SpannableString(mTextView.getText());
span.setSpan(robotoBold,0,17,Spannable.SPAN_INCLUSIVE_INCLUSIVE);
span.setSpan(robotoLight,18,37,Spannable.SPAN_INCLUSIVE_INCLUSIVE);
mTextView.setText(span); 
```

# android - 如何使用phonegap设置亮度？

> ID：13227675
> 
> 赞同：0
> 
> 时间：2012-11-05T07:21:36.440
> 
> 标签：android, html, cordova, brightness

在使用 HTML5 和 Phonegap 开发应用程序时，有没有办法访问或设置手机（Android）的亮度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:54:17.000

通过phonegap，您无​​法做到这一点。您需要为此使用`IHardwareService`接口（以本机方式）。

这通过当前的 phonegap API 是不可能的。我们需要开发一些插件来做到这一点。我认为此类插件目前不可用。

# php - 如何读取文本文件并使用 php 生成 html 文件？

> ID：13227686
> 
> 赞同：-2
> 
> 时间：2012-11-05T07:22:42.823
> 
> 标签：php, html

我正在使用文本文件，我将每天更新文本文件。所以我希望这些文本在带有格式的 html 文件上。如何使用文本文件生成 html 文件？谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:47:51.497

取决于您是否要设置 txt 文件中的段落或每一行的样式，

如果每一行，那么你可以有：

```
$myfile = 'filetoread.txt';
$lines = file($myfile);    
for($i=count($lines);$i>0;$i--){
    echo "<span class='yourstyleclass'> $lines[$i] </span>";
}

if paragraphs

$myfile = 'filetoread.txt';
$lines = file($myfile);

$lines = str_replace(array("\n\n", "\n\r"), "</p><p>", $lines);
echo "<p>$lines</p>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:26:49.227

采用`file_get_contents($file_location)`

请访问： http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:30:15.943

假设您在“text_file.txt”中有这个：

```
<div>
<h1>Header</h1>
<p>Some short paragraph...</p>
</div> 
```

您需要做的就是：

```
echo file_get_contents("text_file.txt"); 
```

# java - 关于tomcat的负载能力（选择哪个版本最好？）

> ID：13227688
> 
> 赞同：1
> 
> 时间：2012-11-05T07:22:51.477
> 
> 标签：java, tomcat, webserver

我想制作一个示例项目来测试java服务器上的负载能力，现在我可能将它部署在Tomcat上。此外，网络服务器不限于使用 tomcat，性能更好的服务器是我真正想要的。

要求是，
1，大约可以处理10K/秒的请求并发。
2、对每个请求做出一个json格式的正常响应结果。

问题是，

1，我应该在tomcat上使用集群模块吗？
2，我应该使用任务队列吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:23:13.423

每个应用程序都有其自己的唯一签名，您将无法从这里的任何人那里获得有关特定应用程序最佳性能的确切配置的权威答案。只需测试各种可能的配置并选择最有效的配置。使用负载测试框架，如[jmeter](http://jmeter.apache.org/)或[grinder](http://grinder.sourceforge.net/)。

# https - 如何使用 Microsoft Internet 传输控制访问受自签名证书保护的 URL？

> ID：13227690
> 
> 赞同：0
> 
> 时间：2012-11-05T07:22:54.407
> 
> 标签：https, vb6, msinet

我在 VB 6.0 中创建了一个应用程序，用于将 XML 文件发布到 http url 并使用控件 Microsft Internet Transfer Control (MSinet) 读取响应（以 xml 格式）。它在 HTTP 中工作正常。但实时 url 是 HTTPS，我无法使用此控件调用 URL。

请分享在 VB 6.0 中调用 HTTPS url 的任何替代方式，并分享使用 SSL 认证的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:20:15.467

根据[控件的文档](http://msdn.microsoft.com/en-us/library/aa239740(v=vs.60).aspx)，似乎没有一种方法可以[像使用 .NET HttpWebRequest 那样更改控件验证 SSL 证书的方式。](https://stackoverflow.com/a/526730/137646). 因此，您需要将服务器的证书添加到本地计算机的受信任根证书存储中（请参阅[我需要做什么才能让 Internet Explorer 8 接受自签名证书？](https://stackoverflow.com/questions/681695/what-do-i-need-to-do-to-get-internet-explorer-8-to-accept-a-self-signed-certific)）。

如果 Internet Explorer 可以在没有证书警告的情况下访问 URL，那么 Microsoft Internet 传输控制也应该能够这样做。这是一种很好的技术，用于验证您是否拥有适当受信任的证书。

# java - 通过Java中的反射从调用的方法调用返回方法

> ID：13227695
> 
> 赞同：0
> 
> 时间：2012-11-05T07:23:29.767
> 
> 标签：java, reflection

好的，我确实了解 Java 反射是如何工作的。但是我所做的与反射教程中显示的有点不同。现在我想在下面调用一个方法，该方法通过使用反射调用方法返回。

```
 class Foo{
          private String str = "";

          public Foo(String str){
              str = this.str;
          }

          public void goo(){
            System.out.println(this.str);
          }
    }

    class Bar{
         public Foo met(String str){
              return new Foo(str); 
         }
    }

    class Hee{
         public static void main(String [] args) throws Exception{
                Class cls = Class.forName("Bar");
                Object obj = cls.newInstance();

                Class [] types = {String.class};
                String [] arr = {"hello"};
                Method method = cls.getMethod("met",types);

        Object target = method.invoke(obj, arr);

                target.goo(); //here where the error occurs
                // 123456
        }
    } 
```

现在，我很大程度上依赖于我的经验，即我`method.invoke()`将返回由反映的方法返回的方法返回的对象。但似乎它不起作用..我调试了我的代码，似乎它没有返回任何东西。我做错了什么？如果我做错了什么请告诉我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T07:25:35.953

可能需要将`target`对象转换为`foo type`.

```
((foo)target).goo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:31:47.603

为了在一个变量中调用一个类的方法，你应该声明那个类的变量：

```
Foo target = (Foo) method.invoke(obj, arr); // And do some casting.
target.goo(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:41:55.363

好吧，除了反射（Test 类）中缺少演员表之外，您的 Foo 类还有一个错误。您的代码应该看起来像这样。

```
class Foo {
    private String str = ""; 

    public Foo(String str) {
        this.str = str; //You had str=this.str;
    }

    public void goo() {
        System.out.println(this.str);
    }
}

class Bar {
    public Foo met(String str) {
        return new Foo(str);
    }
}

class Test {
    public static void main(String[] args) throws Exception {
        Class cls = Class.forName("Bar");
        Bar obj = (Bar) cls.newInstance();
        Class[] types = { String.class };
        String[] arr = { "hello" };
        Method method = cls.getMethod("met", types);
        Foo target = (Foo) method.invoke(obj, arr);
        target.goo(); 
   }
} 
```

# excel - Excel VBA复制在常规值上加粗的单元格值，直到下一个粗体值然后将其复制在常规值上等

> ID：13227696
> 
> 赞同：0
> 
> 时间：2012-11-05T07:23:30.197
> 
> 标签：excel, vba

大家好，我在 VB 中使用 Excel 2010

好的，所以我有一个问题，我必须将一列中的粗体单元格值复制到另一列中，并且要复制相同的值，直到它再次碰到带有粗体单元格值的行，然后该值接管并复制到另一个粗体值等和复制数字的前 2 位数字（或我认为数字存储为文本的字符）将被删除。

这可以做到吗？

我找到了将粗体值复制到另一列的代码：

```
Sub yTekhed()
    For Each cell In [A30:A2557]
        If cell.Font.Bold = True Then
            Debug.Print cell.Row
            cell.Copy Range("I" & Range("I65536").End(xlUp).Row + 1)
        End If
    Next cell
End Sub 
```

我想出了删除字符，有一个公式 =RIGHT(A1; LEN(A1)-2)

但据我所知

我仍然不能在常规上复制粗体。所以说我有：

**08479**

代码

082222

093334

084213

**08572**

代码

093212

012321

482123

我希望粘贴看起来像

**08479**

**08479**

**08479**

**08479**

**08572**

**08572**

**08572**

**08572**

因此，将粗体值粘贴到每个常规（非粗体）值上，直到下一个粗体值，然后复制该值，然后将该值粘贴到常规值上。希望这能更好地解释它。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:35:52.063

这应该可以解决问题：

```
Sub yTekhed()
    LastRow = Cells(Rows.Count, "A").End(xlUp).Row

    For i = 1 To LastRow
        If Range("A" & i).Font.Bold = True Then
            Range("A" & i).Copy Range("B" & i)
            x = i
        Else
            Range("A" & x).Copy Range("B" & i)
        End If
    Next i

End Sub 
```

# android - 如何在android中重新启动服务以再次调用服务oncreate

> ID：13227697
> 
> 赞同：35
> 
> 时间：2012-11-05T07:23:36.907
> 
> 标签：android, android-service

我的 Android 应用程序中有一个始终运行的服务。现在我通过 GCM 从我的服务器获得了一个设置，并将这些设置更新到我的服务中。我将我的设置放在服务的 oncreate 中。所以我需要重新启动我的服务以获取最新设置。如何重新启动我的服务？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-05T08:13:26.473

紧接着调用这两个方法，这将导致`Service`停止和启动。不知道任何“重新启动”它的方法。这就是我在我的应用程序中实现它的方式。

```
stopService(new Intent(this, YourService.class));
startService(new Intent(this, YourService.class)); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-12T13:47:14.937

最好的解决方案是使用 onDestroy()。

当需要重启服务时只需调用

```
RESTARTSERVICE = true;
stopService(new Intent(this, CLASS_OF_SERVICE.class)); 
```

和

```
public void onDestroy()
{
   if (RESTARTSERVICE)
    {
       startService(new Intent(this, CLASS_OF_SERVICE.class));
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T07:26:04.847

为什么不将设置内容从 onCreate 移至单独的方法。然后，您可以从 onCreate 调用此方法，并在需要更改设置时调用它。然后就不需要实际重新启动服务了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-07T05:51:06.637

在服务内部使用方法 onTaskRemoved(Intent rootIntent)，因此服务再次重新启动

```
@Override
public void onTaskRemoved(Intent rootIntent) {
    System.out.println("service in onTaskRemoved");
    long ct = System.currentTimeMillis(); //get current time
    Intent restartService = new Intent(getApplicationContext(),
            PushService.class);
    PendingIntent restartServicePI = PendingIntent.getService(
            getApplicationContext(), 0, restartService,
            0);

    AlarmManager mgr = (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
    mgr.setRepeating(AlarmManager.RTC_WAKEUP, ct, 1 * 1000, restartServicePI);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-04T13:42:29.043

在 KOTLIN 中，您可以这样做：

```
 AppLog.i("System UI Service is Restarting")
        val startSystemUiIntent = Intent(context, AwesomeService::class.java)
        val restartServicePendingIntent = PendingIntent.getService(context, 1, startSystemUiIntent, PendingIntent.FLAG_ONE_SHOT)

        val alarmManager = getSystemService(ALARM_SERVICE) as AlarmManager
        alarmManager.setExact(AlarmManager.RTC_WAKEUP, SystemClock.currentThreadTimeMillis(), restartServicePendingIntent)

        stopService(Intent(context, SystemUIService::class.java)) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-01-29T12:14:32.527

或者您可以使用延迟处理程序来启动服务。处理程序需要在单例中声明为静态，因此在重新启动时不会终止其引用：

```
serviceRestartHandler = new Handler ();
serviceRestartHandler.postDelayed (new Runnable () {
            @Override
            public void run() {

                startService (new Intent (mContext, YourWonderfulService.class)
                        .putExtra (flagName, true));
                serviceRestartHandler.removeCallbacksAndMessages (null);
            }
        }, 1000);
        stopSelf (); 
```

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2014-09-30T06:26:37.283

`startService()`如果服务已经运行，再次调用将再次启动服务，这意味着服务将重新启动。

# c# - multi thread client sending burst string to server

> ID：13227701
> 
> 赞同：3
> 
> 时间：2012-11-05T07:23:43.260
> 
> 标签：c#, multithreading, client-server

I was about making client server string sending and receiving using networkstream. and I want to replace 1000 client into one application using thread and thread.join. But i cannot solve this problem. Thanks for the reply.

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        sc = new SocketMe();
        sc.socketStart();
        for (int i = 0; i < 10; i++)
        {
            //sc = new SocketMe();
            //this.Dispatcher.Invoke((Action)(() =>
            //{
            nomor[i] = new Thread(sc.execution);
            nomor[i].Start(10);
            //}));
        }
    }
public class SocketMe
{
    public NetworkStream serverStream; 
    MainWindow mw = new MainWindow();
    public void socketStart()
    {
        mw.clientSocket = new TcpClient();
        try
        {
            mw.clientSocket.Connect("localhost", 4000);
        }
        catch (Exception e)
        {
            //mw.label3.Content = "Error ...." + e.StackTrace;
        }
    }
    public void StringtoSend(String x)
    {
        try
        {
            socketStart();
            serverStream = mw.clientSocket.GetStream();
            byte[] outStream = System.Text.Encoding.ASCII.GetBytes(x);
            serverStream.Write(outStream, 0, outStream.Length);
            serverStream.Flush();

            byte[] inStream = new byte[10025];
            serverStream.Read(inStream, 0, (int)mw.clientSocket.ReceiveBufferSize);
            string returndata = System.Text.Encoding.ASCII.GetString(inStream);
            //textBox2.Text = "Data from Server : " + returndata;
            Console.WriteLine("Data from Server : " + returndata); 
        }
        catch (Exception ex)
        {
            //mw.label3.Content = ex.StackTrace;
        }
    }
    public void execution(object data)
    {
        socketStart();
        string[] pertanyaan = { "one", "two", "three", "four", "five", "six", "seven", "eight", "nine", "ten" ,"'{0}'"};//isi one dengan pertanyaan-pertanyaan yang diinginkan
        int i;
        for (i = 0; i < 10; i++)
        {
            StringtoSend(pertanyaan[i]);
            Thread.Sleep(1000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:52:38.533

您正在从 10 个线程访问相同的函数而没有同步！试试这个（只是为了好玩）：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        for (int i = 0; i < 10; i++)
        {

             this.Dispatcher.BeginInvoke((Action)(() =>
             {
                 SocketMe sc = new SocketMe();
                 sc.socketStart();
                 // etc...
             }));
        }
    } 
```

然后阅读有关线程同步的信息；）。

# php - 声明在 phpmyadmin 上工作，但不通过 php

> ID：13227704
> 
> 赞同：3
> 
> 时间：2012-11-05T07:24:03.400
> 
> 标签：php, mysql, pdo, dynamic-sql, multiple-select-query

> **可能重复：**
> [对多个查询的 PDO 支持（PDO_MYSQL、PDO_MYSQLND）](https://stackoverflow.com/questions/6346674/pdo-support-for-multiple-queries-pdo-mysql-pdo-mysqlnd)

我在这里有一个声明.. 当我从 phpmyadmin 运行它时.. 我得到了我的查询工作.. 但是当我从 php 执行它时它没有..

这是我的查询（声明）

```
SET @sql = NULL;
 SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''', a.Name, ''', ca.value, NULL)) AS ', a.Name )) INTO @sql FROM cust_attribute ca INNER JOIN attribute a ON ca.idAttribute = a.idAttribute INNER JOIN customer c ON c.idCustomer = ca.idCustomer WHERE a.publish = 'Y';
 SET @sql = CONCAT('SELECT c.idCustomer, c.namaCustomer, ' ' c.email, c.noTelp, ', @sql, ' FROM cust_attribute ca', ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', ' INNER JOIN customer c ON c.idCustomer = ca.idCustomer', ' GROUP BY c.idCustomer');
 SELECT @sql;
 prepare stmt FROM @sql;
 execute stmt; 
```

这是我在 php 上的代码...

```
<?php 
$uname = 'root'; //nama username database 
$pwd = ''; //Password database 
$dbname = 'eav_latihan'; //nama Database 

/* Initialisasi database */ 
$db = new PDO('mysql:host=localhost;dbname='.$dbname, $uname, $pwd); 
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING); 

$query = "SET @sql = NULL; ". 
" SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''', ". 
" a.Name, ''', ca.value, NULL)) AS ', a.Name )) INTO @sql ". 
" FROM cust_attribute ca ". 
" INNER JOIN attribute a ON ca.idAttribute = a.idAttribute ". 
" INNER JOIN customer c ON c.idCustomer = ca.idCustomer ". 
" WHERE a.publish = 'Y'; ". 
" SET @sql = CONCAT('SELECT c.idCustomer, c.namaCustomer, ' ". 
" ' c.email, c.noTelp, ', @sql, ' FROM cust_attribute ca', ". 
" ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', ". 
" ' INNER JOIN customer c ON c.idCustomer = ca.idCustomer', ". 
" ' GROUP BY c.idCustomer'); ". 
" SELECT @sql; ". 
" prepare stmt FROM @sql; ". 
" execute stmt;"; 

$result_array = array();
$queryku = $db->query($query);
$result_array = $queryku->fetchAll(PDO::FETCH_OBJ);
var_dump($result_array);
?> 
```

任何人都可以在这里帮助我或给我一个建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:31:23.227

关于 PDO，这个问题之前已经出现过。不确定这是错误还是安全功能（可能与此有关：[Mysql can't perform more than 1 query at a time](https://stackoverflow.com/questions/1942766/mysql-cant-perform-more-than-1-query-at-a-time)）。

看看这个解决方案：[http ://www.php.net/manual/en/book.pdo.php#96264](http://www.php.net/manual/en/book.pdo.php#96264)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:40:40.523

我认为`PDO`无法执行多个查询。尝试`Stored Procedure`对此使用 a 。

```
DELIMITER $$
CREATE PROCEDURE procName
BEGIN
SET @sql = NULL;
 SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(a.Name = ''', a.Name, ''', ca.value, NULL)) AS ', a.Name )) INTO @sql FROM cust_attribute ca INNER JOIN attribute a ON ca.idAttribute = a.idAttribute INNER JOIN customer c ON c.idCustomer = ca.idCustomer WHERE a.publish = 'Y';
 SET @sql = CONCAT('SELECT c.idCustomer, c.namaCustomer, ' ' c.email, c.noTelp, ', @sql, ' FROM cust_attribute ca', ' INNER JOIN attribute a ON ca.idAttribute = a.idAttribute', ' INNER JOIN customer c ON c.idCustomer = ca.idCustomer', ' GROUP BY c.idCustomer');
 SELECT @sql;
 prepare stmt FROM @sql;
 execute stmt;
END $$
DELIMITER ; 
```

并调用`procName`您的 PHP 文件。

# wpf - how to access all stack panel in DataGridTemplateColumn

> ID：13227712
> 
> 赞同：0
> 
> 时间：2012-11-05T07:24:53.223
> 
> 标签：wpf, c#-4.0

how to access all stack panel in DataGridTemplateColumn?

I'm using this code :

```
 <DataGrid HeadersVisibility="None"  Name="dgUser" Grid.Row="0" Grid.Column="0" AutoGenerateColumns="False" ItemsSource="{Binding}"
 CanUserAddRows="False" CanUserDeleteRows="False" CanUserSortColumns="False">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="*" Header="" IsReadOnly="True">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal"  Margin="10,0,0,0" Grid.Column="0"  Name="spGuns">
                                                    <TextBlock Margin="0,0,5,0" Text="Count"/>
                                                    <TextBox Margin="0,0,5,0" MinWidth="50" Width="Auto" Name="txtCount" Text="{Binding Count}"/>
                                                    <TextBlock Margin="0,0,5,0" Text="NameEn"/>
                                                    <TextBox Margin="0,0,5,0" MinWidth="50" Width="Auto" Name="txtGunNameEn" Text="{Binding NameEn}"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid> 
```

data in datagrid :

[http://www.imagetoo.com/?v=untitlfif.png](http://www.imagetoo.com/?v=untitlfif.png)

how to access all stack panel in DataGridTemplateColumn?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:47:21.283

像这样在“x:Name”中更改您的 StackPanel 的属性“名称” `<StackPanel Orientation="Horizontal" Margin="10,0,0,0" Grid.Column="0" x:Name="spGuns"> <TextBlock Margin="0,0,5,0" Text="Count"/> <TextBox Margin="0,0,5,0" MinWidth="50" Width="Auto" Name="txtCount" Text="{Binding Count}"/> <TextBlock Margin="0,0,5,0" Text="NameEn"/> <TextBox Margin="0,0,5,0" MinWidth="50" Width="Auto" Name="txtGunNameEn" Text="{Binding NameEn}"/> </StackPanel>` 您的 StackPanel 将以编程方式可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T06:52:21.320

添加这个类来遍历每一行dataDrid

```
 public IEnumerable<DataGridRow> GetDataGridRows(DataGrid grid)
    {
        var itemsSource = grid.ItemsSource as IEnumerable;
        if (null == itemsSource) yield return null;
        foreach (var item in itemsSource)
        {
            var row = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridRow;
            if (null != row) yield return row;
        }
    } 
```

那么你的问题是找到控制解决方案

```
foreach (DataGridRow row in GetDataGridRows(dgUser))
        {
            if (row.IsEnabled)
            {
                try
                {
                    ContentPresenter cp = dgUser.Columns[i].GetCellContent(row) as ContentPresenter;
                    DataTemplate myDataTemplate = cp.ContentTemplate;
                    TextBox t = (TextBox)myDataTemplate.FindName("textBoxName", cp);
                    t.Text = //Do something 
                }
                catch (Exception)
                { }
            }
        } 
```

# php - 404 error in .htaccess

> ID：13227714
> 
> 赞同：-3
> 
> 时间：2012-11-05T07:25:08.017
> 
> 标签：php

I am new to .htaccess and I want apply .htaccess rule to tags page. The actual page which I am using for tags is tagsearch. Here is my rule

```
RewriteRule tags/([a-z|A-Z|0-9]+)/$ tagsearch.php?tag=$1 
```

Please advise.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:28:40.973

在正则表达式字符集中，`|`不是“或”符号，**而是**文字字符`|`。

您是否可能遗漏了目标 URL 中的初始斜杠`/`，并希望将尾部斜杠设为可选？

尝试这个：

```
RewriteRule ^/tags/([a-zA-Z0-9]+)/?$ /tagsearch.php?tag=$1 
```

尝试**启用日志记录**。有一个“RewriteLog”语句用于调试重写问题。

# actionscript-3 - face detection in flex

> ID：13227715
> 
> 赞同：0
> 
> 时间：2012-11-05T07:25:15.343
> 
> 标签：actionscript-3, apache-flex, flex4, emgucv, face-recognition

I'm trying to write a simple program that will detect a face off a webcam and then trigger an event(optionally take a snapshot of the face)

I don't need anything fancy like to compare it to other faces I just need to send out an email that someone is at the door (hopefully with attached photo)

the problem is im very confused about how and what to use

I see there is a very powerful "opencv" that has a few wrapper classes namely opencv.net and emgu.cv

I've seen a few examples here and there but i have yet to find a working set of source code that works with flex 4

Can anyone recommend what the best course of action for a amateur programmer like me.

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:17:42.503

我推荐[http://code.google.com/p/face-recognition-library-as3/](http://code.google.com/p/face-recognition-library-as3/)它很容易使用它可以裁剪检测到的人脸图像，并且可以根据人脸图像识别人。您可以在项目页面上找到教程和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:24:13.407

有一个名为 MariLena 的用于人脸检测的 OpenCV AS3 端口，这是 Quasimodo 的一篇不错的文章和优化，带有可下载的示例：[http](http://www.quasimondo.com/archives/000687.php) ://www.quasimondo.com/archives/000687.php 希望对您有所帮助！

# encryption - 解码 AES-256 密钥需要多少个组合？

> ID：13227717
> 
> 赞同：2
> 
> 时间：2012-11-05T07:25:24.953
> 
> 标签：encryption

解码 AES-256 密钥需要多少组合？

我在密码学方面不是很好，但我认为它类似于 Combination 256 of 16。它不是太多。

如果使用所有世界的计算能力，解码需要什么时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T07:42:08.257

如果您只是暴力破解每个可能的键，那么您需要尝试 2^256 个键。您希望在通过（平均）一半密钥后找到它，因此平均预期尝试次数为 2^255。这是一个非常大的数字。如果地球上的每个原子（[大约 1.3 * 10^50 个原子](http://wiki.answers.com/Q/How_many_atoms_are_there_on_earth)）都是一台每秒可以尝试 100 亿个密钥的计算机，那么它仍然需要大约 28.4 亿年。暴力破解是不可能的——你需要在算法中找到一个弱点，让你在这里走捷径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-29T16:41:54.750

2^256=16^64=115,792,089,237,316,195,423,570,985,008,687,907,853,269,984,665,640,564,039,457,584,007,913,129,639,936。

根据[mathcats.com](http://www.mathcats.com/explore/reallybignumbers.html)，它写成：

115 quattuorvigintillion、792 trevigintillion、89 duovigintillion、237 unvigintillion、316 vigintillion、195 novemdecillion、423 octodecillion、570 septendecillion、900八十五六十亿、八五十亿、六百八十七四十亿、九百七十亿、八百五十三十二、二百六十九十亿、九百八十四十分、六百六十五非亿、六百四十亿，五百六十四亿，三十九亿，四百五十七亿，五百八十四亿，七万亿，九千一千三亿，一亿二千九百万，六十三万九千，九百三十六！

# java - How to resolve SocketTimeoutException

> ID：13227724
> 
> 赞同：1
> 
> 时间：2012-11-05T07:25:58.997
> 
> 标签：java, opencalais

I have a program that uses a web service called OpenCalais,using it's REST API.The codes are working,it is just that sometimes Eclipse throws an exception on the console when I run the program.How do I resolve this?Below is the stacktrace:

```
java.net.SocketTimeoutException: Read timed out
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:150)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
at java.io.BufferedInputStream.read1(BufferedInputStream.java:275)
at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:641)
at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:589)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1319)
at mx.bigdata.jcalais.rest.CalaisRestClient.post(CalaisRestClient.java:148)
at mx.bigdata.jcalais.rest.CalaisRestClient.analyze(CalaisRestClient.java:117)
at mx.bigdata.jcalais.rest.CalaisRestClient.analyze(CalaisRestClient.java:104)
at entity.UserClientAnalyseData.analyseData(UserClientAnalyseData.java:37)
at servlet.UserClientServlet.doPost(UserClientServlet.java:52)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:33:16.197

要么加快服务器速度，要么解决任何减慢它的问题，或者将读取超时提高到更现实的值。

# jquery - Jquery ajax post not firing in IE9

> ID：13227728
> 
> 赞同：1
> 
> 时间：2012-11-05T07:26:09.413
> 
> 标签：jquery, ajax, internet-explorer-9

I have a simple ajax request that works for most of my users. However, for one user, no ajax request is sent when he clicks the button. The ajax request fails silently - no error message. No network traffic to mydomain.

Here is a simplified version of the problem that still has the error in it. (i.e. when my user clicks the button nothing happens). When I click the button, it works.

The javascript:

```
$(document).ready(function() { 

$("#message").html("<p>GOT HERE</p>");

$("#analyzebutton").click(function() {

    $.ajax({
    url: 'http://www.mydomain.com/myrequest.php' ,
    type: "POST",
    data: {custclass: 'testclass', text: 'this is a test'},
    dataType: 'json',
    success: function(data, textStatus, jqXHR){ var tempp = '<p>SUCCESS!</p>'; $('#message').html(tempp);
    },
    error: function(jqXHR, textStatus, errorThrown) {
        var tempp = '<p>ERROR!</p>' +textStatus;

        $('#message').html(tempp);
    }
    });
})
});

The relevant HTML is: 
<a href="#" id="analyzebutton">BUTTON-CLICK THIS TEXT</a>
<div id="message"></div> 
```

As extra information: the real application that I have extracted this from is much more complex than this. However, on the real page, if my user presses F5 and then clicks the button, the ajax call actually happens correctly.

Both he and I use IE9\. It all works for me but not for him.

Any ideas what the difference may be? My site used to work for him when he had IE8\. Now that he has come back a few months later, he is having this problem.

He has no other browsers on his computer, so I don't know how the ajax behaves on another browser.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:31:41.897

要求您的用户

1.  清除浏览器缓存并重试
2.  检查您的网站（或从 CDN 呈现的任何 javascript 文件）是否列在用户浏览器的阻止列表中
3.  检查用户的浏览器权限是否设置为高

考虑到这些情况，我真的无法想到

# windows - GetSystemMetrics(SM_CXSIZE) returns incorrect value in Win 2012

> ID：13227730
> 
> 赞同：0
> 
> 时间：2012-11-05T07:26:23.080
> 
> 标签：windows, windows-8

I am trying to get the size of the button in Windows in my project using windows API GetSystemMetrics(SM_CXSIZE).

Whereas GetSystemMetrics(SM_CXSIZE) returns '36' in Windows 8 and I am able to adjust the tool bar window correctly. But it returns '22' in Windows Server 2012 and I am not able to adjust my tool bar properly.

A sample code snippet is:

```
#include <windows.h>
#include <stdio.h>
#pragma comment(lib, "user32.lib")

int main()
{    
   printf("Value SM_CXSIZE: %d", GetSystemMetrics(SM_CXSIZE));   
   return 0;
} 
```

Can you please suggest a way to accomplish this.

# oracle - decryption for password reverse to ASCII code multiple location

> ID：13227732
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:26:46.457
> 
> 标签：oracle, plsql

How to create procedure a to decrypt a password reverse ASCII code multiple location char and concatenation with ASCII

example password: 123 encrypted to: 49491005015351

It's encrypted like this:

```
v := v || ASCII(substr(u_pass,i,1)) * instr(u_pass,substr(u_pass,i,1)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:35:11.250

反过来的问题是每个加密字符的长度可以变化。请注意，下面的算法寻找给出字符的最短序列。可能存在不正确的情况。在这些情况下，此代码将无法解密字符串的其余部分。

```
v := <encrypted password>;

i := 1;    -- Character
pos := 1;  -- Position in v
while (pos < length(v)) loop
  j=1;
  found = false;
  while not found  and j + pos <= length(v) loop
    if mod(to_number(substr(v, pos, j), i) = 0 then  
      -- Possible match
      anum := to_number(substr(v, pos, j)/ j;  -- ascii value of the next character
      alen := length(trim(to_char(anum)));
      if substr(v, pos + j, alen) = anum then
        -- Match found!
        u_pass := u_pass || chr(anum);
        found := true;
        pos := pos + j + alen;
        i := i + 1;
      end if;
    end if;
  end loop;
end loop; 
```

# javascript - 使用 JavaScript 计算输入元素中的值的总和

> ID：13227735
> 
> 赞同：2
> 
> 时间：2012-11-05T07:26:58.527
> 
> 标签：javascript, arrays, input, sum, getelementbyid

我正在尝试计算显示的许多输入的总和，以便开具发票。所有必须开票的产品都是我数据库中的记录器，我编写了这个 JavaScript 函数来计算总数：

```
<script type="text/javascript">
function getItems()
 {
 var items = new Array();
 var itemCount = document.getElementsByClassName("items");
 var total = 0;
 for(var i = 0; i < itemCount.length; i++)
 {
     total = total +  document.getElementById("p"+(i+1)).value;
 }

 return total;
 document.getElementById('tot').value= total;
 }
 getItems()</script> 
```

问题是我`Uncaught TypeError: Cannot read property 'value' of null` 上线了 `total = total + document.getElementById("p"+(i+1)).value;`

我真的不明白为什么，因为我所有的变量都被声明了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T07:43:31.810

您已经通过 using 获得了元素`getElementsByClassName`，为什么还要通过 id 获得它？您可以尝试以下操作：

```
function getItems()
{
    var items = document.getElementsByClassName("items");
    var itemCount = items.length;
    var total = 0;
    for(var i = 0; i < itemCount; i++)
    {
        total = total +  parseInt(items[i].value);
    }
    document.getElementById('tot').value = total;
}
getItems();​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:38:45.447

一个或多个带有 id 的项目`"p"+(i+1)`显然不存在。你没有向我们展示你的 HTML，所以我们不能比这更具体。

但是，由于您已经有了一个`nodeList`类似数组的列表，其中包含来自 的项目`getElementsByClassName()`，因此无需重新获取它们。因此，您可以更安全地重写代码以使用它，并且它还应该保护您免于尝试引用不存在的项目，因为`getElementsByClassName()`不会返回空项目。还有其他几个问题：

1.  您需要在添加之前将结果转换为数字，以便添加数字，而不是字符串：

    总计 = 总计 + 数量（items[i].value）；

2.  您还需要在分配总计之后放置回报，否则分配将不会被执行：

    document.getElementById('tot').value = total; 返回总计；

3.  而且，由于您没有向我们展示您的 HTML，我们不知道实际存在哪些项目，因此您可以通过使用返回的实际 nodeList 来保护您的代码免受不存在的项目的影响，`getElementsByClassName()`而不是检索项目再次。从该函数返回的 nodeList 中的所有项目都将存在：

通过这些更改和其他一些清理，整个函数将如下所示：

```
<script type="text/javascript">
function getItems() {
    var items = document.getElementsByClassName("items");
    var total = 0;
    for (var i = 0; i < items.length; i++) {
        total += Number(items[i].value);
    }

    document.getElementById('tot').value = total;
    return total;
 }
 getItems();
 </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:30:36.190

试试这个
**[演示](http://jsfiddle.net/pintu31/aK8aL/3/)**

```
<input type='text' id='p1' class='items' value='10' />
<input type='text' id='p2' class='items' value='10' />
<input type='text' id='p3' class='items' value='10' />
<input type='text' id='p4' class='items' value='10' />
<input type='text' id='tot' value='' />​

function getItems()
{
 var items = new Array();
 var itemCount = document.getElementsByClassName("items");
 var total = 0;
 var id= '';
 for(var i = 0; i < itemCount.length; i++)
 {
   id = "p"+(i+1);
   total = total +  parseInt(document.getElementById(id).value);
 }
document.getElementById('tot').value = total;
return total;
}
getItems(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T07:33:12.023

解析输入值时需要将字符串转换为数字，构建`p`id 时需要将数字转换为字符串。

```
total = total + Number(document.getElementById(id).innerHTML);
var id = 'p'+String(i+1); 
```

这是工作代码，假设段落而不是输入元素：http: [//jsfiddle.net/dandv/HdwZm/1/](http://jsfiddle.net/dandv/HdwZm/1/)

# ios - atos不支持armv7s吗？

> ID：13227747
> 
> 赞同：11
> 
> 时间：2012-11-05T07:28:17.637
> 
> 标签：ios, xcode, crash-reports

我试图用符号表示从 Apple 发送的 iOS 崩溃报告。

```
atos -arch armv7s -o APP_BINARY_PATH 0x0006a23c 0x35000 + 217660 
```

我得到了以下错误。

```
> atos: Unknown architecture: armv7s 
```

我确保二进制文件包含使用 otool 构建的 armv7s。

atos不支持armv7s吗？

当我将 -arch 参数更改为 armv7 时，它工作正常。

我的 Xcode 版本是 4.5.2。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-05T11:19:51.350

您需要使用作为 Xcode 一部分的 atos 版本。你可以在这里找到它：`/Applications/Xcode.app/Contents/Developer/usr/bin/atos`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T21:21:25.390

不，我仍然得到：atop 无法为文件加载符号...对于架构 armv7s。如果我尝试

```
/Applications/Xcode.app/Contents/Developer/usr/bin/atos -arch arm7s -o * -l ... 
```

我明白了

> [无效用法]：未知架构：“（null）”

如果我最终尝试：

```
 /Applications/Xcode.app/Contents/Developer/usr/bin/atos -arch arm64 -o * -l 
```

我收到了我提交的带有我的应用程序名称的第二个值。

xrun 的行为相同，也只是使用 atos。

# dictionary - gpg symmetric brute force using dictionary

> ID：13227748
> 
> 赞同：0
> 
> 时间：2012-11-05T07:28:19.280
> 
> 标签：dictionary, gnupg, brute-force

Is there any library or software which can crack gpg symmetric key based on dictionary? Can the famous John the Ripper do such job?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T03:24:05.460

这取决于密码是弱还是强。人们使用的一些密码短语可能会通过暴力攻击被击败，但标准 OpenPGP 消息中的对称加密使用非常大的、随机生成的密码短语，超过 60 个字符（通常约为 64 到 66 个左右）。

由于实际的解密尝试而不是使用彩虹表等，暴力破解这些消息将需要一段时间。即使单个消息被泄露，它也不会导致任何公钥的泄露。

与普遍的看法相反，OpenPGP 消息并未完全加密为收件人的公钥。它们使用随机生成的会话密钥进行对称加密，然后将该密钥加密为接收者的公钥。当某人收到加密消息时，他们使用他们的私钥来解密会话密钥，他们的软件（例如 GPG 或 PGP）使用该会话密钥来解密消息。

# facebook - 统计联系人时如何忽略通讯录中的 FB/其他社交联系人

> ID：13227749
> 
> 赞同：0
> 
> 时间：2012-11-05T07:28:35.810
> 
> 标签：facebook, cocoa-touch, ios6, abaddressbook, abperson

我只需要从通讯录中获取本地联系人的数量，而不是任何社交网络。如何以编程方式过滤其他联系人？

换句话说，联系人应用程序如何分别显示 iCloud 组和 Facebook 组。他们如何过滤？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:07:21.837

最好的方法是使用“联系人”应用程序并在左上角的“群组”按钮上按一下 - 在底部，您会看到您可以取消选择的 Facebook 联系人。

然后，这将准确计算您的联系人:-)

请注意，这不会删除它们，只是将它们过滤掉。

# solr - 将 Solr 从 3.6 迁移到 4.0，方法，它是否安全？

> ID：13227750
> 
> 赞同：6
> 
> 时间：2012-11-05T07:28:38.463
> 
> 标签：solr

我们在主从配置中使用 Solr 3.6，有 100 个内核，有 100 个数以百万计的文档，并且需要全天候的正常运行时间。我们希望升级到 Solr 4.0。

* * *

我相信正确的方法是将旧索引的**文件系统副本复制**到新位置并配置 SolrConfig：

```
<luceneMatchVersion>LUCENE_33</luceneMatchVersion> 
```

**问题 1：**这会使 Solr 使用过时的格式吗？这会以在线方式**将索引转换为 4.0 格式吗？**

* * *

**问题 2：**有没有更好的方法需要**更少的停机时间**来转换索引？我可以从旧服务器**复制**到新服务器吗？

* * *

**问题 3：**任何人都可以确认 Solr 4.0 是否可以安全地像我们一样大量使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:58:02.237

如果你保持

```
<luceneMatchVersion>LUCENE_33</luceneMatchVersion> 
```

而不是使用：

```
<luceneMatchVersion>LUCENE_40</luceneMatchVersion> 
```

`LUCENE_40`您将无法获得 Solr 4 / Lucene 4 的全部好处。但是，如果不重建所有索引，您就无法切换到。如果你坚持使用`LUCENE_33`它仍然会使用旧的索引格式。

* * *

对于问题 2，如果您有足够的资源，请设置第二个 Solr 实例并将索引复制到 Solr4。这可以通过使用 SolrJ 编写 Java 程序来完成。不确定是否有任何现有的，但可能有。

优点：您可以现场制作。

缺点：如果您的 Solr 3 实例不断更新，则效果不佳。

如果您有一个时间戳字段记录每条记录的更新日期/时间，类似于以下内容：

```
<field name="timestamp" type="date" indexed="true" stored="true" default="NOW" multiValued="false"/> 
```

这可以更容易，因为当您阅读时，您可以在时间戳小于当前日期的情况下进行查询，当您迭代结果时，其结果不太可能发生变化（尽管如果现有记录被更新或删除，这并非不可能）。

* * *

我们已经运行 Solr 4.0 四个多月了，没有任何问题。它是一个拥有 1.5 亿个文档的 Solr 核心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:07:41.940

如何在每台机器上运行 solr 3.6 和 4.0 的两个版本（显然不同的端口），以便您可以试用它并在需要时回滚？

# static-libraries - 无法读取符号：存档没有索引

> ID：13227754
> 
> 赞同：2
> 
> 时间：2012-11-05T07:28:47.920
> 
> 标签：static-libraries, recompile, makefile

我必须照顾一个旧项目并陷入其中。这是一个makefile项目，我得到错误*无法读取符号：存档没有索引；在构建时运行 ranlib 以添加一个*。

我找到了一个关于这个问题的有用链接，[无法读取符号：存档没有索引；运行 ranlib 添加一个](https://stackoverflow.com/questions/2765240/could-not-read-symbols-archive-has-no-index-run-ranlib-to-add-one?answertab=active#tab-top).

我尝试*了 nm liboprt.a*命令并获得了目标文件*无法识别的文件格式*。我还尝试了*文件 planeoprt.o*并得到了结果*planeoprt.o: ELF 32-bit MSB relocatable, MIPS, MIPS-II version 1 (SYSV), not stripped*

问题是我只有静态库 (.a) 和目标文件 (.o)，因此我无法按照他们的说明重新编译源代码 (.c)。

有人帮我解决这个问题而不重新编译源代码吗？

# jquery - 平滑移动到单击的元素

> ID：13227757
> 
> 赞同：0
> 
> 时间：2012-11-05T07:29:06.183
> 
> 标签：jquery, css, jquery-animate

如何使用 jquery移动`div`（#line）到单击区域（ ）？`li`

HTML 菜单：

```
<div class="floor-switch" id="floors">
    <div class="arrw-up"></div>
    <div id='line'></div>
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        <li>Item 4</li>
    </ul>
    <div class="arrw-down"></div>
</div>​ 
```

我想要的示例（但现在它只移动到指定的距离）：http: [//jsfiddle.net/js6CM/](http://jsfiddle.net/js6CM/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:31:27.673

[小提琴](http://jsfiddle.net/gqKx8/)

```
$('.floor-switch li').click(function() {
    $('#line').animate({
        top: $(this).position().top
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:39:20.040

我认为这就是你想要的：

```
$('.floor-switch li').click(function() {
    var clickedElement = this;
    var line = $('#line')[0];
    var movement = clickedElement.offsetTop - line.offsetTop;

    $('#line').animate({
        left: 0,
        top: line.offsetTop + movement
    });
});​ 
```

我得到点击的元素`clickedElement`和红线`line`。然后我计算`movement`已经完成的，最后将这个动作添加到红线。

我希望它有帮助！

问候。

**编辑**：

[jsFiddle 在这里](http://jsfiddle.net/jT6kC/)。

# python - 收货数量及表格字段列表

> ID：13227764
> 
> 赞同：2
> 
> 时间：2012-11-05T07:29:36.663
> 
> 标签：python, sql, database, ms-access, pyodbc

> **可能重复：**
> [如何使用 pyodbc 获取 Access 数据库特定字段的数据类型？](https://stackoverflow.com/questions/4539254/how-to-get-datatypes-of-specific-fields-of-an-access-database-using-pyodbc)

什么sql请求在pyodbc与数据库连接中接收表Access的字段数量？什么sql请求在pyodbc与数据库连接中接收表Access的字段列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:24:46.243

[您可以使用 pyodbc 的cursor.columns](http://code.google.com/p/pyodbc/wiki/Cursor#columns)方法获取表中的列数和这些列的名称。

```
import pyodbc
db_path = r'C:\Users\hans\Documents\sample.mdb'
cnnct_strng = 'DRIVER={Microsoft Access Driver (*.mdb)};DBQ=%s' % db_path
cnxn = pyodbc.connect(cnnct_strng)
cursor = cnxn.cursor()
print 'Columns: %i' % (len(cursor.columns(table='YourTable').fetchall()))
for row in cursor.columns(table='YourTable'):
    print row.column_name
cursor.close()
cnxn.close() 
```

# activemq - 一次使用一条来自 ActiveMQ 的消息

> ID：13227765
> 
> 赞同：1
> 
> 时间：2012-11-05T07:29:41.427
> 
> 标签：activemq

我想做这个：

1.  ActiveMQ 向客户端发送消息。

2.  客户端在处理完消息后向 ActiveMQ 发送确认。

3.  如果客户端已关闭，或者没有确认消息，则此消息将保留在队列中。不会传递所有其他消息。

4.  服务器一次发送一条消息，客户端一次处理一条消息。除非第一条消息已被确认，否则不会传递下一条消息。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:21:28.460

听起来您正在寻找的是低或零[预取](http://activemq.apache.org/what-is-the-prefetch-limit-for.html)限制与客户端确认或个人确认的[确认模式的组合。](http://fusesource.com/docs/esb/4.3.1/amq_tuning/GenTuning-Consumer-Ack.html)零预取将使您的客户端本质上是基于拉取的消费者，如果您的客户端在断开连接时无法确认已发送的消息，则将 ack 设置为客户端将导致代理重新传递消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:46:48.400

关于失败的缺点，这就是 activeMQ 的工作方式。

如果“失败/错误确认”发生在业务逻辑层，那么您应该使用[事务](http://activemq.apache.org/how-do-transactions-work.html)

**警告**不是有效的代码 (pradigm)

```
// at your Listener
public void onMessage(Message message)
{
    if (isValid(message))
    {
        connection.ack();
        commit();
        return;
    }
    rollback();
} 
```

关于消息限制和持久性，以下目标策略配置将为您提供帮助。

```
 <destinationPolicy>
        <policyMap>
          <policyEntries>
            <policyEntry topic=">" producerFlowControl="true" memoryLimit="10mb">
              <pendingSubscriberPolicy>
                <vmCursor />
              </pendingSubscriberPolicy>
            </policyEntry>
            <policyEntry queue=">" producerFlowControl="true" memoryLimit="10mb">
              <pendingQueuePolicy>
                <vmQueueCursor/>
              </pendingQueuePolicy>
            </policyEntry>
          </policyEntries>
        </policyMap>
    </destinationPolicy> 
```

恕我直言，我也会使用 MySQL 来实现这种持久性

```
 <persistenceAdapter>
        <jdbcPersistenceAdapter dataDirectory="${activemq.base}/data" dataSource="#mysql-ds"/>
    </persistenceAdapter> 
```

另外我建议你[使用 Camel](http://camel.apache.org/activemq.html)来配置你的[节流器](http://camel.apache.org/throttler.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:33:03.353

尝试以下...

*   设置队列预取=0
*   使用 TRANSACTED 确认
*   单线程消费者（concurrentConsumers=1/maxConcurrentConsumers=1 等）
*   设置 DispatchAsync = false

# php - codeigniter www子域问题

> ID：13227773
> 
> 赞同：0
> 
> 时间：2012-11-05T07:30:24.757
> 
> 标签：php, .htaccess, codeigniter, subdomain

我对 codeigniter 和 www 子域有奇怪的问题。

当我加载[http://foobar.com](http://foobar.com)页面正常打开但是当我加载[http://www.foobar.com](http://www.foobar.com)我得到 CodeIgniter 的 404 消息

这是 .htaccess 文件的内容

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:35:26.977

某些设置将子域视为根目录中的文件夹。也许它会尝试加载 codeigniter url `www`？故障排除`$route['404_override']`

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

创建一个控制器并指向该控制器，然后在控制器的函数中运行

`print_r($this->router)`和`echo $this->uri->uri_string()`

希望这可以帮助您了解发生了什么

# c++ - 在 C++ 中传递专门的函数指针

> ID：13227774
> 
> 赞同：0
> 
> 时间：2012-11-05T07:30:27.377
> 
> 标签：c++, function, templates, function-pointers

我正在我的代码中使用一个`c`库。`c++`他们`API`要求我传递具有给定签名的某个函数指针。假设它类似于以下内容：

```
typedef int (*api_fun_t)(int); 
```

我想要做的是传递依赖于在运行时确定的某些参数的函数指针。最初我想定义如下内容：

```
api_fun_t my_specialized_fun(int param){
    int fun(int x){
        // decide what to do based on param
    }
    return fun;
} 
```

但问题`c++`不允许嵌套函数定义。接下来我想我可以通过如下模板来实现这一点

```
template <int param>
fun (int x){
    //decide what to do based on param
} 
```

有没有其他不涉及全局和/或静态变量的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:37:10.603

使用 C++11 lambdas 而不是嵌套函数。例如：

```
typedef int (*api_fun_t)(int);

api_fun_t my_specialized_fun(int param){
   return [](int x) {x++; return x;};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:55:18.453

假设 API 允许您传递用户参数（正如所有精心设计的 C 风格回调 API 所做的那样），使用结构来保存数据，并将指向它的指针作为参数传递。然后，您可以使用结构的成员数据或酌情调用成员函数。您必须确保结构的生命周期足够长。

如果 API 不允许您传递用户参数，您唯一的选择是全局变量，如果多线程是一个问题，则为线程本地。并给 API 的设计者写一封愤怒的电子邮件。

# parsing - 解释 FAT32 卷引导记录上每个扇区的字节数

> ID：13227778
> 
> 赞同：2
> 
> 时间：2012-11-05T07:30:43.773
> 
> 标签：parsing, fat32, mbr, sector

下面我附上了与以下问题有关的图像。我正在解析 FAT32 分区的卷引导记录，并被卡住了好几个小时，直到我发现 WinHex 有一个数据解释器。当我点击 0Bh 时，它显示一个 16 位解释，等于 512。

我的问题是，系统如何从中得到 512。它是否以 Big Endian 或类似的方式读取每个扇区的字节数？我只是对这个感到困惑......图片显示了WinHex中的VBR。

[http://i.stack.imgur.com/uCGIS.png](http://i.stack.imgur.com/uCGIS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-16T11:04:03.207

这些值是小端的，因此字节`00,02`是`0200`反转的，因此`02`先出现然后`00`。

`0x0200`以 10 为基数是 512。

# objective-c - 用千位分隔符和 2 个小数格式化长数字（浮点数）

> ID：13227779
> 
> 赞同：1
> 
> 时间：2012-11-05T07:30:44.783
> 
> 标签：objective-c

> ```
> self.numberFormatter = [[NSNumberFormatter alloc] init];
> [self.numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
> [self.numberFormatter setCurrencySymbol:@""];
> [self.numberFormatter setLocale:[NSLocale currentLocale]]; 
> ```

```
//In DataManager sharedClass .h 
- (void)setupCapital:(float)Capital;
- (float)readCapital;
(NSString*)formatCapital:(NSNumber *)Capital;

// In DataManager sharedClass .m
@property (assign, nonatomic) float theCapital;
- (NSString *) formatCapital:(NSNumber *)Capital {
return [self.numberFormatter stringFromNumber:Capital];
}

- (void)formatCapital:(float)Capital {
self.theCapital = Capital;
}

- (float) readCapital {
return self.theCapital;
}

// write the number
 float numberDecimal = [[DataManager sharedClass] readCapital];
self.labelCapital.text = [[DataManager sharedClass] formatCapital:[NSNumber numberWithFloat:numberDecimal]]; 
```

为什么如果我插入 123456,89 我在 labelCapital 中正确地有值 123.456,89

如果我插入 1234567,89 我有 labelCapital 1.234.567,88

如果我插入 123456789,89 我在 labelCapital 123.456.792,00

有什么提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T06:41:42.263

我已经使用该代码解决了：

```
self.numberFormatter = [[NSNumberFormatter alloc] init];
[self.numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[self.numberFormatter setGroupingSize:3];
[self.numberFormatter setCurrencySymbol:@""];
[self.numberFormatter setLocale:[NSLocale currentLocale]];
[self.numberFormatter setMaximumFractionDigits:2]; 
```

并将 float 更改为 double

我还添加了最后一行以得到只有 2 个十进制数字的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:44:51.030

您可以使用这样的单个函数将字符串变量转换为货币格式：

```
 - (NSString *)convertToCommaSeparated:(NSString *)inputAmount{
    NSDecimalNumber *someAmount = [NSDecimalNumber decimalNumberWithString:inputAmount];
    NSNumberFormatter *currencyFormatter = [[NSNumberFormatter alloc] init];
    [currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [currencyFormatter setCurrencyCode:@"USD"];
    [currencyFormatter setMaximumFractionDigits:2];
    [currencyFormatter setFormat:@"#,##0.00"];
    return [currencyFormatter stringFromNumber:someAmount];
} 
```

注意：输入不应包含逗号 (,)。在传递给此函数之前，您应该删除逗号。

# iphone - 一段时间后 UITableView 滚动黑客

> ID：13227780
> 
> 赞同：1
> 
> 时间：2012-11-05T07:30:48.280
> 
> 标签：iphone, uitableview, scroll, nstimer

我有几个`UITableView`，`UIScrollViews`在我的应用程序中。表格视图和滚动视图在初始加载时平滑滚动。但是在应用程序连续使用 7-10 分钟后，滚动真的很糟糕。我为`UITableView`. 我还在`NSTimer`后台运行了轮询。

```
NSRunLoop *runloop = [NSRunLoop currentRunLoop];
pollTimer = [NSTimer timerWithTimeInterval:4 target:self selector:@selector(threadStarter) userInfo:nil repeats:YES];
[runloop addTimer:pollTimer forMode:NSRunLoopCommonModes]; 
```

这就是UITableViews滚动卡住的原因吗？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:56:51.953

导致应用程序随着时间的推移响应变慢的这类问题的一个主要原因是**“内存泄漏”**。

检查您是否正确释放单元格及其内容。如果您对此不熟悉，请参阅[这篇文章](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)以了解如何调试内存泄漏。

# md5 - 解决 md5 谜题 (k = 32) k 前导一位

> ID：13227787
> 
> 赞同：2
> 
> 时间：2012-11-05T07:31:07.353
> 
> 标签：md5

大家好，我在教科书上碰到了这个问题，想问一下，(k = 32) 找到 X 使得 h(C;Ns;Nc;X) 有 k 个前导一位。如果我用这个公式来解决这个难题：这是否意味着我的 md5 输出应该以“0000 0000”或“ffff ffff”开头......谢谢大家的帮助。

# android - 使用 ChartEngine 自定义显示的饼图

> ID：13227789
> 
> 赞同：0
> 
> 时间：2012-11-05T07:31:10.927
> 
> 标签：android, achartengine

我使用图表引擎成功显示图表，但遇到以下问题：

1.  我无法减小图表大小。
2.  图表在屏幕上移动，但我不希望这样。
3.  我想在屏幕底部再显示一张图像，但这里的图表显示在屏幕中间。我只想在图像的顶部和下方显示图表（如何设置边距）。

请任何人都可以帮助我。在此先感谢。

以下是我的代码：

```
public class MainActivity extends Activity {    

private String[] mMonth = new String[] {
            "Jan", "Feb" , "Mar", "Apr", "May", "Jun",
            "Jul", "Aug" , "Sep", "Oct", "Nov", "Dec"
        };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    openChart();                        

}

private void openChart(){       

    double[] distribution = { 10,200,3,400,500,60} ;
    String[] dis = { "10","200","13","400","500","60"} ;
    // Color of each Pie Chart Sections
    int[] colors = { Color.BLUE, Color.MAGENTA, Color.GREEN, Color.CYAN, Color.RED,
                     Color.YELLOW };

    // Instantiating CategorySeries to plot Pie Chart       
    CategorySeries distributionSeries = new CategorySeries("Sample");
    for(int i=0 ;i < distribution.length;i++){
        // Adding a slice with its values and name to the Pie Chart
        distributionSeries.add(dis[i],distribution[i]);

    }   

    // Instantiating a renderer for the Pie Chart
    DefaultRenderer defaultRenderer  = new DefaultRenderer();       
    for(int i = 0 ;i<distribution.length;i++){          
        SimpleSeriesRenderer seriesRenderer = new SimpleSeriesRenderer();       
        seriesRenderer.setColor(colors[i]);
        seriesRenderer.setDisplayChartValues(true);

        // Adding a renderer for a slice
        defaultRenderer.setShowLegend(false);
        defaultRenderer.addSeriesRenderer(seriesRenderer);
        int mar[]=defaultRenderer.getMargins();
        System.out.println(mar);
    }

    // Creating an intent to plot bar chart using dataset and multipleRenderer      
    Intent intent = ChartFactory.getPieChartIntent(getBaseContext(), distributionSeries , defaultRenderer, "");     

    // Start Activity
    startActivity(intent);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:28:16.770

您可以使用以下方法设置边距：

```
defaultRenderer.setMargins(margins); 
```

您可以通过这种方式禁用平移：

```
defaultRenderer.setPanEnabled(false, false); 
```

您可以在视图中创建图表并将其嵌入到您为其定义布局的活动中，请参阅[此](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a/4079692#4079692)。

# c++ - 为了确保 C++ 类型是 POD，我必须遵循哪些规则？

> ID：13227790
> 
> 赞同：7
> 
> 时间：2012-11-05T07:31:14.007
> 
> 标签：c++, inheritance, compiler-construction

> **可能重复：**
> [C++ 中的 POD 类型是什么？](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)
> 
> [什么是聚合和 POD，它们如何/为什么特别？](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special)

我正在用 C++ 编写解释器，并且我想确保某些 C++ 数据类型在通过解释代码访问它们时具有可预测的布局，尤其是在使用反射时。例如，我想确保第一个数据字段始终位于对象地址的零偏移处。现在，这对于纯 POD 类型来说是微不足道的。但是，我想知道这是否也适用于具有继承或构造函数的对象，只要我避免像虚函数或多重继承这样的明显事物。假设编译器将以与 C 编译器相同的方式布局这些类型是否合理，或者 C++ 标准中的“未指定行为”是否是我需要担心的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:34:30.830

c++11 定义了[标准布局](https://stackoverflow.com/a/6496703/476681)：

> 标准布局旨在捕捉第一个意图——使用与 C 中相同的布局创建一些东西

这就是你要找的。因此，您的支票应该是：

```
static_assert( std::is_standard_layout<A>::value, "not standard layout" ); 
```

# c# - 在gridview中获取复选框状态

> ID：13227791
> 
> 赞同：1
> 
> 时间：2012-11-05T07:31:19.270
> 
> 标签：c#, asp.net, gridview, checkbox

如何在 gridview 中获取复选框的复选框状态？我已经像这样以编程方式添加它们，

```
 foreach (GridViewRow gvr in GridView1.Rows)
  {
     tbCell = new TableCell();
     cbGV = new CheckBox();
     tbCell.Controls.Add(cbGV);
     gvr.Cells.Add(tbCell);
  { 
```

通常情况下，当它们位于项目模板中时，我会像这样（如下）那样获得复选框的状态，但这不起作用，所以有什么想法吗？

```
 foreach (GridViewRow getRowItems in GridView1.Rows)
  {
      chkBox = (CheckBox)(getRowItems.Cells[0].FindControl("cbGV"));

      if(chkBox.Checked == false) 
      {
      chkBox.Checked = true;
      }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:38:45.797

尝试像这样添加复选框，即作为模板列，而不是尝试搜索这也将起作用，而不是动态添加复选框

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"> 
<Columns> 
<asp:TemplateField> 
<ItemTemplate> 
<asp:CheckBox ID="cbGV" runat="server" /> 
</ItemTemplate> 
</asp:TemplateField> 
</Columns> 
</asp:GridView> 
```

* * *

这不起作用，因为您忘记给元素提供 id

```
cbGV = new CheckBox();
cbGV.ID="cbGV";
tbCell.Controls.Add(cbGV); 
```

尝试按上述方式提供 id，而不是尝试在行中查找复选框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:31:37.287

```
foreach (GridViewRow gvr in GridView1.Rows)
{
 tbCell = new TableCell();
 cbGV = new CheckBox();
 cdGV.id="cbGV";
 tbCell.Controls.Add(cbGV);
 gvr.Cells.Add(tbCell);
}

foreach (GridViewRow getRowItems in GridView1.Rows)
{
  chkBox = (CheckBox)(getRowItems.Cells[0].FindControl("cbGV"));

  if(chkBox.Checked == false) 
  {
  chkBox.Checked = true;
  } 
```

}

# c - 检测用户模式挂钩

> ID：13227793
> 
> 赞同：0
> 
> 时间：2012-11-05T07:31:23.640
> 
> 标签：c, windows, winapi, visual-c++, hook

有没有办法（以编程方式）检测**用户模式挂钩列表**？我曾尝试阅读一些相关的文章，但无法通过。任何指示或想法或示例都会有很大帮助。由于我直到现在还没有开始编写代码，所以请随时用 C 或 C++ 帮助我。TIA。

**编辑::**我正在尝试一种方法来枚举当前正在运行的所有进程，然后再次枚举每个进程使用的所有模块。我真正想尝试的（正如一些专家所解释的）是比较当前加载到内存中的所有模块的枚举列表和每个进程的磁盘上的模块列表以检查挂钩。有人可以解释一下吗？我不知道我的问题是什么，但如果你明白我的困惑是什么，请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:34:15.840

有几种方法可以实现用户模式挂钩。例如：

1.  可以在函数的开头内嵌插入无条件分支指令。
2.  导入地址表的修补。
3.  某些机制可用于在`int 3`输入函数时引发异常（更改页面保护等），然后使用向量异常处理程序重定向执行。

检测方法因您要检测的用户模式挂钩方法而异。举个例子，

1.  检测用户模式挂钩的最常见方法（`JMP`目标函数开始处的指令）的经典方法是反汇编函数并检查第一条指令。
2.  动态解析 IAT 中预期的函数地址，`GetProcAddress`并检查表是否符合预期。
3.  检查页面保护、反汇编等。

我不打算提供所有可能的挂钩（和检测）方法的详尽枚举，而是要解释没有单一的通用方法可以生成用户模式挂钩列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T21:51:13.713

我建议先寻找其他一些东西。

1.  检查 . 中是否有 RWX 内存块`Process Address Space`。它不像将内存中的每个函数与磁盘进行比较那样的激烈操作。
2.  要检查 IAT 挂钩，请检查是否`Function Address`不在加载的模块范围之外。

# c# - sqllike查询问题

> ID：13227796
> 
> 赞同：0
> 
> 时间：2012-11-05T07:31:31.193
> 
> 标签：c#, sql

我正在尝试获取 data ，它在开头或中间或结尾处具有 description 关键字。

以下是我的查询

```
like '%" + description + "' or '" + description + "%' or '%" + description + "%' 
```

问题是它返回不相关的数据。

例如，如果我在描述中给出了“as”，那么它也会在结果中选择“cake”。

```
Description
------------------------------------------------------------
asd
asdasd
cake
Naw
Tast
ad 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:35:16.897

你只能写

```
like '%" + description + "%' 
```

有了这个，您可以检索您想要的数据，因为它需要开始的数据，中间的字符串并以该字符串结束，而无需使用 or 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:34:43.000

就放

```
LIKE '%" + description + "%' 
```

顺便说一句，如果你有多个“或”语句，你必须重写列名和比较器

```
mycolumn like '%" + description + "' or
mycolumn like '" + description + "%' or 
mycolumn like '%" + description + "%' 
```

但在这种情况下不需要这样做。

您还可以查看准备好的语句！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:35:30.387

既然你有这个`'%" + description + "%'`

为什么不直接

```
SELECT..FROM...WHERE columnName LIKE '%" + description + "%'" 
```

购买您的查询很容易受到`SQL Injection`. 改用参数

```
"
SELECT...
FROM...
WHERE columnName LIKE @description" 
```

然后在查询中定义参数

```
command.Parameters.AddWithValue("@description", "%" + description + "%") 
```

# django - Django - 在模型字段中一起空白

> ID：13227801
> 
> 赞同：1
> 
> 时间：2012-11-05T07:32:04.377
> 
> 标签：django, django-models

如何做这样的事情：

```
class Example(models.Model):
    name = models.CharField(max_length=255)
    alt_name = models.TextField()

    class Meta:
        blank_together = ('name', 'alt_name') #?! 
```

编辑：这类似于`unique_together`. 当一个字段被填写时，用户必须同时填写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-26T15:11:55.437

下面是`mixin`实现这一点的 a 的实现。

```
# your_app/mixins.py

class BlankAble(models.Model):
    # when creating the BlankAble class object it will add a __blank_together__ 
    # attribute corresponding to the same in {YourModel}.MyMeta.blank_together
    def __new__(cls, *args, **kwargs):
        new = super().__new__(cls)
        if hasattr(cls, 'MyMeta'):
            if hasattr(cls.MyMeta, 'blank_together'):
                setattr(new, '__blank_together__', cls.MyMeta.blank_together)
        return new

    def save(self, *args, **kwargs):
        # returns False if any but not all of the __blank_together__ fields 
        # are not blank
        blank_together = not (any([getattr(self, field, None) for field in getattr(self, '__blank_together__', None)]) and \
                              not all([getattr(self, field, None) for field in getattr(self, '__blank_together__', None)]))
        if not blank_together:
            raise ValidationError(f"{getattr(self, '__blank_together__', None)} must all be blank together.")
        return super().save(*args, **kwargs)

    class Meta:
        # prevents Django from having some bad behavior surrounding
        # inheritance of models that are not explicitly abstract
        abstract = True

# your_app/models.py    

class TestModel(BlankAble, models.Model):

    test_field1 = models.CharField(blank=True, null=True, max_length=25)
    test_field2 = models.CharField(blank=True, null=True, max_length=25)
    test_field3 = models.CharField(blank=True, null=True, max_length=25)

    class MyMeta:
        blank_together = ('test_field1', 'test_field2') 
```

如果您有兴趣了解更多关于`mixins`该主题的信息，我强烈推荐 Django 的两个独家新闻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:46:51.700

你可以试试，保存方法；

```
 def save(self,*args, **kwargs):
      if self.name == '' or self.alt_name == '':
         self.name = ''
         self.alt_name = ''
      super(Example, self).save(*args, **kwargs) 
```

# c++ - C ++正则表达式匹配大括号内的内容

> ID：13227802
> 
> 赞同：3
> 
> 时间：2012-11-05T07:32:08.360
> 
> 标签：c++, regex, gcc, c++11, std

假设我想使用 C++11 正则表达式提取匹配花括号的内容。因此，例如，`{foo}`将成功匹配，我可以使用`match_result`来提取内容。看起来很简单，但是下面的代码并不完全符合我的要求

```
std::string foo("{foo}");
std::regex r("\\{(.*)\\}");
std::smatch m;
bool result = regex_match(foo, m, r); // result returns true

cout << m[0] << endl; // prints: {foo}
cout << m[1] << endl; // prints: {foo} instead of just foo as I would expect 
```

鉴于它是第一个捕获组，现在不应该`m[1]`只返回没有大括号吗？`foo`

**编辑：**这个问题的一个重要信息是我使用的编译器是 GCC 4.6.3（目前是 Ubuntu 12.04 LTS 中的最新存储库版本）。答案准确地确定了 GCC 中对正则表达式的支持有多差。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T12:31:27.993

你的模式是正确的。您的代码在很大程度上是正确的，到处都缺少“std”（对于“cout”、“endl”和 regex_match），或者至少不一致（假设您正在“使用命名空间 std”）。

此外，在 Visual Studio 2012 上，您的代码会输出预期结果。我没有尝试 2010，但我怀疑它也在那里运行（微软在 2010 年合并了 TR1）。

我怀疑你正在使用 gcc。正如@Artyom 指出的那样，在 gcc/libstdc++ 中没有实现。它编译得很好，没有警告，但它给出了错误的结果。尽管人们普遍认为 gcc 在每个领域都优于 Microsoft，但在正则表达式中并非如此。

在 gcc 上查找正则表达式的状态：http: [//gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)

# java - 在 JavaFx 标签中显示变化的值

> ID：13227809
> 
> 赞同：23
> 
> 时间：2012-11-05T07:32:54.357
> 
> 标签：java, javafx-2, javafx-8

在 JavaFX 中，如何使用“标签”显示随时间不断变化的值？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-05T08:38:13.623

有很多方法可以实现，最方便的是使用 JavaFX 的 DataBinding 机制：

```
// assuming you have defined a StringProperty called "valueProperty"
Label myLabel = new Label("Start");
myLabel.textProperty().bind(valueProperty); 
```

这样，每次通过调用 set 方法更改 valueProperty 时，标签的文本都会更新。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-29T09:04:24.280

使用 SimpleDateFormat 怎么样？不需要 StringUtilities 类！

```
private void bindToTime() {
  Timeline timeline = new Timeline(
    new KeyFrame(Duration.seconds(0),
      new EventHandler<ActionEvent>() {
        @Override public void handle(ActionEvent actionEvent) {
          Calendar time = Calendar.getInstance();
          SimpleDateFormat simpleDateFormat = new SimpleDateFormat("HH:mm:ss");
          setText(simpleDateFormat.format(time.getTime()));
        }
      }
    ),
    new KeyFrame(Duration.seconds(1))
  );
  timeline.setCycleCount(Animation.INDEFINITE);
  timeline.play();
 }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-06T00:07:11.280

我喜欢塞巴斯蒂安的有约束力的回答。

为了多样化，这里是另一个基于时间修改标签文本的示例。[该示例在标签中显示数字时钟读数，其文本使用Timeline](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html)每秒更改。

```
import java.io.IOException;
import java.net.URL;
import javafx.animation.*;
import javafx.event.*;
import javafx.scene.control.Label;
import javafx.util.Duration;

import java.util.Calendar;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class DigitalClockSample extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws IOException {
    stage.setScene(new Scene(new DigitalClock(), 100, 50));
    stage.show();
  }
}

/**
 * Creates a digital clock display as a simple label.
 * Format of the clock display is hh:mm:ss aa, where:
 * hh Hour in am/pm (1-12)
 * mm Minute in hour
 * ss Second in minute
 * aa Am/pm marker
 * Time is the system time for the local timezone.
 */
class DigitalClock extends Label {
  public DigitalClock() {
    bindToTime();
  }

  // the digital clock updates once a second.
  private void bindToTime() {
    Timeline timeline = new Timeline(
      new KeyFrame(Duration.seconds(0),
        new EventHandler<ActionEvent>() {
          @Override public void handle(ActionEvent actionEvent) {
            Calendar time = Calendar.getInstance();
            String hourString = StringUtilities.pad(2, ' ', time.get(Calendar.HOUR) == 0 ? "12" : time.get(Calendar.HOUR) + "");
            String minuteString = StringUtilities.pad(2, '0', time.get(Calendar.MINUTE) + "");
            String secondString = StringUtilities.pad(2, '0', time.get(Calendar.SECOND) + "");
            String ampmString = time.get(Calendar.AM_PM) == Calendar.AM ? "AM" : "PM";
            setText(hourString + ":" + minuteString + ":" + secondString + " " + ampmString);
          }
        }
      ),
      new KeyFrame(Duration.seconds(1))
    );
    timeline.setCycleCount(Animation.INDEFINITE);
    timeline.play();
  }
}

class StringUtilities {
  /**
   * Creates a string left padded to the specified width with the supplied padding character.
   * @param fieldWidth the length of the resultant padded string.
   * @param padChar a character to use for padding the string.
   * @param s the string to be padded.
   * @return the padded string.
   */
  public static String pad(int fieldWidth, char padChar, String s) {
    StringBuilder sb = new StringBuilder();
    for (int i = s.length(); i < fieldWidth; i++) {
      sb.append(padChar);
    }
    sb.append(s);

    return sb.toString();
  }
} 
```

数字时钟采样输出：

![数字时钟输出](../Images/6dcd93136d99300f458925aad0d190d9.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-27T20:52:27.563

很好的回应，感谢jewelsea 的投入，它对我帮助很大。

[我使用Java 8](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)以更精简的格式更新了之前发布的 DigitalClock 。使用 Java 8 的附加功能，例如[Date API](http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html)，当然还有[lambdas](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)。

```
 import javafx.animation.Animation;
 import javafx.animation.KeyFrame;
 import javafx.animation.Timeline;
 import javafx.scene.control.Label;
 import javafx.util.Duration;

 import java.time.LocalTime;
 import java.time.format.DateTimeFormatter;

 public class DigitalClock extends Label
 {
    private static DateTimeFormatter SHORT_TIME_FORMATTER =       DateTimeFormatter.ofPattern("HH:mm:ss");

    public DigitalClock()
    {
        bindToTime();
    }

    private void bindToTime() {
        Timeline timeline = new Timeline(new KeyFrame(Duration.seconds(0),
                                                      event -> setText(LocalTime.now().format(SHORT_TIME_FORMATTER))),
                                         new KeyFrame(Duration.seconds(1)));

        timeline.setCycleCount(Animation.INDEFINITE);
        timeline.play();
    }
} 
```

# mysql - 列出存储过程函数中的值

> ID：13227812
> 
> 赞同：1
> 
> 时间：2012-11-05T07:33:03.593
> 
> 标签：mysql, delphi, zeos

我是 Delphi 的新手，但我是一个旧的 PHP 和 MySQL 程序员。

我有一个系统也需要在桌面上使用，所以我创建了一些存储过程来列出数据库中的查询。存储过程只是选择并连接表来显示它。

我在 Delphi 7 中使用 zeos 组件。它在 db 网格中很好地显示了我的表，但我需要显示我的存储过程的结果。我尝试使用，`zstoredproc`但它返回错误

> PROCEDURE xxxxx 无法返回给定上下文中的结果集

请帮我; 我只想将存储过程中的数据显示到网格或组合框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:54:09.213

Zeos 无法正确处理多个结果集。我曾经在所有项目中都使用 Zeos，但是一旦我的同事开始使用多个结果集，我就不得不寻找另一种解决方案。也许这不是 Zeos 所固有的，但至少使用 MySQL 驱动程序似乎没有办法完成它。

如果您使用 DBX，您将能够做到。它带有德尔福，所以这是一个加号。不利的一面：它需要在您的项目中使用额外的 .dll。

另一种解决方案是调用存储过程，将其结果写入临时表，并通过普通查询检索结果。这就是我过去解决它的方式。

# mysql - 在 MySQL 中使用 GROUP_CONCAT 并考虑 null

> ID：13227816
> 
> 赞同：0
> 
> 时间：2012-11-05T07:33:19.087
> 
> 标签：mysql, concat, group-concat

我有一个包含 3 个字段的表。该表记录了过去 30 天内每天到相关国家/地区的通话时长。

```
C_Date      Country         C_Time  
2012-10-01  India           1316
2012-10-01  USA             12  
2012-10-01  UK              132     
2012-10-01  Kuwait          134     
2012-10-02  UK              135     
2012-10-02  USA             136     
2012-10-02  Singapore       137 
```

我需要使用这些记录生成一个表和一个折线图，我尝试编写 MySQL 查询。基本上我只需要为选定的国家绘制这个。
说我想要印度、美国和英国；然后我需要拉一个这样的记录集：

```
C_Date     | Calling_Time
-----------+----------------------------------
2012-10-01 | 1316,12,132
2012-10-02 | 0,136,135
2012-10-03 | ...
...        | ... 
```

这是我的查询：

```
SELECT C_Date, GROUP_CONCAT(C_Time
ORDER BY Country
SEPARATOR ',') as Calling_Time
FROM Call_Table t
WHERE Country
IN ('India', 'USA', 'UK')
GROUP BY C_Date
ORDER BY  C_Date 
```

结果更接近，但它忽略了空结果。

```
C_Date     | Calling_Time
-----------+----------------------------------
2012-10-01 | 1316,12,132
2012-10-02 | 136,135   (expected 0,136,135) 
```

我可以更改我的查询以获得像**0,136,135** OR **,136,135** OR **null,136,135**这样的 Calling_Time吗？（用唯一的段数来代表每个国家/地区）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:06:04.843

试试这个查询 -

```
SELECT
  C_Date,
  CONCAT(MAX(IF(country = 'India', C_Time, 0)), ',',
         MAX(IF(country = 'USA', C_Time, 0)), ',',
         MAX(IF(country = 'UK', C_Time, 0))) Calling_Time
  FROM call_table
  GROUP BY C_Date

+------------+--------------+
| C_Date     | Calling_Time |
+------------+--------------+
| 2012-10-01 | 1316,12,132  |
| 2012-10-02 | 0,136,135    |
+------------+--------------+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:09:03.223

```
SELECT   aa.C_Date, 
         GROUP_CONCAT(COALESCE(bb.C_Time,0) ORDER BY bb.Country) Calling_Time
FROM
(
    SELECT a.Country, b.C_DATE
    FROM
          ( 
              SELECT DISTINCT Country
              FROM TableName t
              WHERE Country IN ('India', 'USA', 'UK')
          ) a CROSS JOIN
          (
              SELECT DISTINCT DATE(C_Date) C_Date
              FROM TableName t    
          ) b
) aa LEFT JOIN TableName bb
     ON aa.Country = bb.Country AND
        aa.C_DATE = DATE(bb.C_DATE)
GROUP BY aa.C_Date 
```

*   [**查看 SQLFiddle 演示**](http://sqlfiddle.com/#!2/858e1/33)

# python - “导入错误：动态模块未定义初始化函数 (init_mysql)”在 OS X 上导入 MySQLdb

> ID：13227818
> 
> 赞同：2
> 
> 时间：2012-11-05T07:33:32.533
> 
> 标签：python, python-2.7

我在 mac os x 上安装了 mysqldb for python，但它给了我以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "build/bdist.macosx-10.6-intel/egg/MySQLdb/__init__.py", line 19, in <module>
  File "build/bdist.macosx-10.6-intel/egg/_mysql.py", line 7, in <module>
  File "build/bdist.macosx-10.6-intel/egg/_mysql.py", line 6, in __bootstrap__
ImportError: dynamic module does not define init function (init_mysql) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:19:55.130

这很可能是由于您使用的 Python、您安装的 MySQLdb 适配器和您安装的 MySQL 客户端库之间的架构不匹配。它们都需要至少有一个通用架构并在该架构中执行。你可能有一个只有 32 位的 Python 和一个只有 64 位的 MySQL 客户端库，反之亦然。确保它们匹配。

除非您需要正在使用的 Python，否则我强烈建议您从第三方包管理器安装完整的解决方案。例如，如果您安装 MacPorts 基础，则可以使用一个命令安装所需的一切（Python 2.7、MySQLdb、MySQL 客户端库和所有依赖项）：

```
sudo port install py27-mysql 
```

# expressionengine - ExpressionEngine MSM 网站上的 htaccess

> ID：13227820
> 
> 赞同：5
> 
> 时间：2012-11-05T07:33:50.460
> 
> 标签：expressionengine

我正在使用 MSM 插件在两个不同的域名上运行两个 ExpressionEngine 站点。站点一具有所有系统文件等，站点二位于站点一的子文件夹中。我的问题是如何让站点二在 url 中没有它的 index.php 文件并且仍然可以工作？

目前我在站点一的 htaccess 文件夹中有这个，站点一运行良好，站点二没有：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Removes index.php
    RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php/$1 [L]

    DirectoryIndex index.html index.php

    # Redirect non-www urls to www
    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

    # If 404s, "No Input File" or every URL returns the same thing
    # make it /index.php?/$1 above (add the question mark) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:49:34.450

相同的 .htaccess 应该适用于两个站点。重写只涉及 index.php 文件，该文件位于每个站点的根目录中。

我从您的 .htaccess 中看到的一个可能问题是您将非 www URL 重定向到 www。您的第二个域设置是否与 www 一起使用？如果不是，这显然是个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:46:51.923

我在主站点和辅助站点上都使用了这个 htaccess 文件，一切都很好。

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm

AcceptPathInfo On

Options -Indexes

<IfModule mod_rewrite.c>
RewriteEngine On

Options +FollowSymLinks

# Looks for files and directories that do not exist
# and provide the segments to the index.php file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^/index.php
RewriteCond $1 !.(css|js|png|jpe?g|gif|ico)$ [NC]
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:54:02.133

试着把你的重写放在`# Redirect non-www urls to www`重写**之前**`# Removes index.php`。

在删除 index.php 重写之前进行 www 重写在过去和对我的一个站点的快速测试中给我造成了问题，当 www 重写放置在删除 index.php 重写之前访问 www-version 导致索引.php 不会从 URL 中删除。

# c# - 如何从字节数组创建 Microsoft.Office.Interop.Word.Document 对象，而不将其保存到磁盘？

> ID：13227828
> 
> 赞同：9
> 
> 时间：2012-11-05T07:34:51.477
> 
> 标签：c#, ms-word, office-interop

如何`Microsoft.Office.Interop.Word.Document`从字节数组创建对象，而不使用 C# 将其保存到磁盘？

```
public static int GetCounterOfCharacter(byte[] wordContent)
{
   Application objWord = new Application();
   Microsoft.Office.Interop.Word.Document objDoc = new Document();
   //objDoc = objWord.Documents.Open(("D:/Test.docx"); i want to create document from byte array "wordContent"
   return  objDoc.Characters.Count;      
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T07:53:21.493

据我所知，没有直接的方法可以做到这一点。Word 互操作库无法从字节流中读取。除非您正在处理大量（或大量）文件，否则我建议您只使用 tmp 文件：

```
Application app = new Application();

byte[] wordContent = GetBytesInSomeWay();

var tmpFile = Path.GetTempFileName();
var tmpFileStream = File.OpenWrite(tmpFile);
tmpFileStream.Write(wordContent, 0, wordContent.Length);
tmpFileStream.Close();

app.Documents.Open(tmpFile); 
```

我知道这不是您要寻找的答案，但是在这种情况下（做您真正想做的事情需要相当多的时间和坐立不安）可能值得考虑开发时间是否超过运行时间表现。

如果您仍然想寻找一种方法来按照您想要的方式解决它，我会推荐[这个](https://stackoverflow.com/questions/7056852/how-can-i-form-a-word-document-using-stream-of-bytes "这")线程中的答案。

# c++ - 在指向 C++ 中的缓冲区（字符串“”）的 void 指针上使用 sizeof() 以获得 BYTES 的大小？

> ID：13227832
> 
> 赞同：0
> 
> 时间：2012-11-05T07:35:01.533
> 
> 标签：c++, visual-c++, pointers, sizeof, void-pointers

```
void * ptr0 = (void*)"Buffer_1";
int size0 = sizeof(ptr0);
// WILL THIS RETURN THE NUMBER OF BYTES OCCUPIED BY THE MEMORY POINTED BY ptr0? 
```

我的要求是
1) 将一些数据存储在缓冲区中并创建一个指向它的 void* 指针，我在第一行中执行此操作。
2）稍后我想以字节为单位获取此缓冲区的大小。第二行将完成这项工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T07:36:43.730

`sizeof`返回类型所需的大小。由于`sizeof`在这种情况下传递给的类型是指针，因此它将返回指针的大小。

如果您需要指针指向的数据的大小，则必须通过显式存储来记住它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:39:05.673

不，这只会以字节为单位返回指针的大小。用于`sizeof`获取数组的大小仅适用于这样声明的数组

```
char szArray[10]; 
```

不在动态创建的数组上

```
char* pArray = new char[10];

sizeof(szArray);  // number of elements * sizeof(char) = 10
sizeof(pArray);   // sizeof the pointer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:37:58.713

sizeof() 在编译时工作。所以`sizeof(ptr0)`通常会返回 4 或 8 个字节。而是使用`strlen`? 或实际存储编号。`(void *)`由 保存在单独变量中的字节数。

# uml - 活动图分析以及如何使用

> ID：13227833
> 
> 赞同：0
> 
> 时间：2012-11-05T07:35:03.910
> 
> 标签：uml, diagrams, staruml

我需要为案例绘制活动图，我从黑色圆圈开始并制作主要泳道，但我不明白如何放置动作状态和决策以及如何分析案例并绘制活动图

案例为：客户要求的非标产品。所有非标准产品都需要报价（初始价格）才能下订单。报价生成过程从客户请求报价开始，销售团队的成员利用他们的知识准备报价。作为生成报价的一部分，销售团队成员与生产系统核对产品的制造可行性以及供应产品的能力。如果无法提供所要求的产品，则通知客户，否则，销售人员计算报价，然后在客户收到报价时发出报价和参考号。提供报价后，报价有效期为 30 天，客户可以针对同一报价提出重复订单。

从上面的案例中，我们在这里选择了 3 条泳道，它们是：客户、销售人员和生产系统的独立职责

有朋友可以帮我吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:12:08.873

根据您的问题，描述此活动的最佳方法是使用序列图，因为有些对象相互连接。

当只有一个控制流和一个参与者时，活动图是好的。当然可以使用泳道，但不适用于您的情况。

您还可以使用状态图来显示一些特殊情况，例如“在 30 天结束时......”。

# .net - 无法在 Windows Phone 中添加对本机 Dll 的引用

> ID：13227836
> 
> 赞同：1
> 
> 时间：2012-11-05T07:35:27.290
> 
> 标签：.net, visual-c++, windows-phone-8

我试图在 Windows Phone 8 中将 C++ 代码编译为“Windows 运行时组件”。但是，当我尝试将输出 dll 添加到我的主 windows phone 8 项目中时，我收到一个错误消息框，“无法将对更高版本或不兼容库的引用添加到项目中”。当我在 Windows 资源管理器中看到 dll 的属性时，我看到它的版本为 255.255.255.255，我也和我的 dll 项目中的一样，我无法更改它。

有人能告诉我如何在我的 WinPhone8 项目中使用这个 dll 吗？

感谢乌代·古普塔

# cuda - CUDA 动态共享内存没有获得价值

> ID：13227842
> 
> 赞同：0
> 
> 时间：2012-11-05T07:36:00.010
> 
> 标签：cuda

问题是：

共享数组`perBlockMsg[i]` 保存所有等于 0 的值，但它应该是大于 0 的十进制值，这些值也是如此`d_msg[]`。`d_msg[]`ia 一个 2D 数组，我已将其展平为 1D 并确保其数据已成功传递到设备中。

```
__global__ void add( int *d_msg, int *d_checkSumArray) {

    int i=threadIdx.x;
    int j=blockIdx.x;
    extern  __shared__ int perBlockMsg[];

    if(d_msg[i* gridDim.x + j]<=1)
    {
        perBlockMsg[i]=d_msg[i* gridDim.x + j];
    }

    __syncthreads();

    if(j==2 && i<=gridDim.x)  //here i is the row number
    {
        d_checkSumArray[i]=perBlockMsg[i];
    }
} 
```

内核调用如下（假设）M = 7，R = 4，这两个变量也是动态的

```
add<<<R,(M+R), (M+R)* sizeof(int)>>>( d_msg, d_checkSumArray ); 
```

有人可以指出问题可能出在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T16:24:57.163

提供答案以将其从未答复的列表中删除。

代码中发现的主要问题是这个测试：

```
if(d_msg[i* gridDim.x + j]<=1) 
```

不正确，应该是这样的：

```
if(d_msg[i* gridDim.x + j]>=1) 
```

如问题所示，捕获“大于 0 的十进制值”。

共享变量的[文档](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#shared)中还涵盖了后续问题。

一种方法是使用单个动态分配（指针）处理所有共享变量：

```
extern  __shared__ int perBlockMsg[];
int *msgLength = perBlockMsg + perBlockMsgLength; 
```

# wpf - 如何在 WPF 中对路径进行分组？

> ID：13227844
> 
> 赞同：2
> 
> 时间：2012-11-05T07:36:09.237
> 
> 标签：wpf, geometry-path

我正在使用路径来创建特定的形状。将所有路径分组的最佳方法是什么，以便稍后我可以在另一个位置使用它们而无需重新定位路径？

任何建议都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T08:15:10.873

如果问题是关于一个只有一个填充和描边的复杂形状，一个选项是只使用一个 Path 实例和一个[PathGeometry](http://msdn.microsoft.com/en-us/library/system.windows.media.pathgeometry.aspx)和多个[Figures](http://msdn.microsoft.com/en-us/library/system.windows.media.pathgeometry.figures.aspx)。请参阅 MSDN 中的以下示例：

```
<Path Stroke="Black" StrokeThickness="1">
    <Path.Data>
        <PathGeometry>
            <PathGeometry.Figures>
                <PathFigureCollection>
                    <PathFigure IsClosed="True" StartPoint="10,100">
                        <PathFigure.Segments>
                            <PathSegmentCollection>
                                <LineSegment Point="100,100" />
                                <LineSegment Point="100,50" />
                            </PathSegmentCollection>
                        </PathFigure.Segments>
                    </PathFigure>
                    <PathFigure IsClosed="True" StartPoint="10,10">
                        <PathFigure.Segments>
                            <PathSegmentCollection>
                                <LineSegment Point="100,10" />
                                <LineSegment Point="100,40" />
                            </PathSegmentCollection>
                        </PathFigure.Segments>
                    </PathFigure>
                </PathFigureCollection>
            </PathGeometry.Figures>
        </PathGeometry>
    </Path.Data>
</Path> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T08:00:20.133

然后您可以在画布中分组，然后重新定位您的画布。命名每个路径点将使您能够修改形状......您可以创建一个名为 MyOwnShape 的新类，它继承 Canvas 类，然后为画布的每个点附加一个事件以进行拖放，以便形状得到修改的。您也可以将您的内容放在烤架内，但您无法以这种精度定位您的形状。如果我完全理解你想要达到的目标。你的课程应该是这样的

```
class MyOwnShapes : Canvas { 
```

`List<Path> myListOfPaths;
public void AddPath(Path myPath){ this.Children.Add(path); myListOfPaths.Add(path), // this is used for your internal computation so it wont affect the effective drawin components. }` 我希望这个例子对你有好处。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465055.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465055.aspx) http://www.windowsphonegeek.com/tips/drawing-in-wp7-3-understanding-path-shapes

# c# - 使用 HttpWebRequest 丢失帖子数据

> ID：13227845
> 
> 赞同：4
> 
> 时间：2012-11-05T07:36:15.543
> 
> 标签：c#, post, httpwebrequest, missing-data

我在使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)发布数据时遇到问题。

有一个字符串（即`key1=value1&key2=value2&key3=value3`），我已将其发布到一个站点（即 www.*.com/edit），但是，我不知道为什么有时它没有错，但有时，第一个`key=value1`会丢失, 只有`key2=value&key3=value3`那个可以在`HttpAnalyzer`.

```
public static string SubmitData(string Url, string FormData, CookieContainer _Cc, string ContentType)
        {
            Stream RequestStream = null, ResponseStream = null; StreamReader Sr = null;
            HttpWebRequest HRequest = (HttpWebRequest)WebRequest.Create(Url);
            try
            {

                HRequest.CookieContainer = _Cc;
                HRequest.Method = "POST";
                HRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0)";
                HRequest.ContentType = ContentType;
                HRequest.ContentLength = FormData.Length;
                //byte[] BFromData = new ASCIIEncoding().GetBytes(FormData);
                byte[] BFromData = Encoding.ASCII.GetBytes(FormData);
                BFromData = Encoding.Convert(Encoding.ASCII, Encoding.UTF8, BFromData);//ascii → utf8
                RequestStream = HRequest.GetRequestStream();
                RequestStream.Write(BFromData, 0, BFromData.Length);
                //RequestStream.Write(utf8Bytes,0,utf8Bytes.Length );
                HttpWebResponse HResponse = (HttpWebResponse)HRequest.GetResponse();
                ResponseStream = HResponse.GetResponseStream();
                Sr = new StreamReader(ResponseStream, Encoding.UTF8);
                return Sr.ReadToEnd();
            }
            catch
            {
                return "";
            }
            finally
            {
                if (null != RequestStream) RequestStream.Close();
                if (null != ResponseStream) ResponseStream.Close();
                if (null != Sr) Sr.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:56:04.653

使用[Fiddler](http://www.fiddler2.com/fiddler2/)查看单击表单时请求的外观，然后尝试使用此方法并修改您的请求所需的内容。

```
public static void PostDataAndDoSomething()
        {            
            string URI = "http://www.something.com";
            //make your request payload
            string requestBody = String.Format("{{'param1': {0}, 'param2': {1}}}",value1, value2); //json format

            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URI);  //make request         

            // set request headers as you need
            request.ContentType = "application/json; charset=UTF-8"; 
            request.Accept = "application/json, text/javascript;
            request.Method = "POST";            
            request.UserAgent = "";
            request.Headers.Add("X-Requested-With", "XMLHttpRequest");
            using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))
            {
                writer.Write(requestBody); //write your request payload
            }

            WebResponse response = request.GetResponse();          
            string jsonData = String.Empty;

            using (var reader = new StreamReader(response.GetResponseStream()))
            {
                jsonData = reader.ReadToEnd();
            }           
            response.Close();

            //do something with your data, deserialize, Regex etc....
        } 
```

# java - 使用正则表达式删除模式中的首字母

> ID：13227848
> 
> 赞同：1
> 
> 时间：2012-11-05T07:36:34.943
> 
> 标签：java, regex

我正在尝试按照使用 regex 指定的方式削减模式，但在替换中也替换了想要的字符。在这种情况下，指定边界没有帮助。

```
 String name = "Dr.Dre" ;  
     Pattern p = Pattern.compile("(Mr.|MR.|Dr.|mr.|DR.|dr.|ms.|Ms.|MS.|Miss.|Mrs.|mrs.|miss.|MR|mr|Mr|Dr|DR|dr|ms|Ms|MS|miss|Miss|Mrs|mrs)"+"\\b");
     Matcher m = p.matcher(name);
     StringBuffer sb = new StringBuffer();
     String namef = m.replaceAll("");    
     System.out.println(namef); 
```

> 输入： Dr.Dre 或 Dr Dre 或 Dr. Dre

## > 输出（预期）：Dre 或 Dre 或 Dre

编辑：

感谢您的帮助，但我面临的正则表达式问题很少：程序：

```
String name = "Dr. Dre" ;  
Pattern p = Pattern.compile("(Mr\\.|MR\\.|Dr\\.|mr\\.|DR\\.|dr\\.|ms\\.|Ms\\.|MS\\.|Miss\\.|Mrs\\.|mrs\\.|miss\\.|MR|mr|Mr|Dr|DR|dr|ms|Ms|MS|miss|Miss|Mrs|mrs)"+"\\b");
Matcher m = p.matcher(name);
String namef = m.replaceAll(""); 
System.out.println(namef); 
```

对于上述程序，我收到的输出为：。Dre，而所需的输出是：Dre

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T07:38:31.173

正则表达式中的点表示“任何字符”。您需要使用反斜杠对其进行转义，而反斜杠又需要在字符串文字中进行转义：

```
Pattern p = Pattern.compile("Mr\\.|MR\\.|Dr\\.|mr\\.|DR\\.|dr\\.|ms\\."); // etc 
```

请注意，删除“Dr.”后，您将得到一个双倍空格。虽然来自“或 Dr. Dre”...

编辑：出于某种原因（我还没有弄清楚为什么），点后的空格不算作单词边界。如果您将模式更改为使用`\\s`而不是`\\b`，则替换单个空格字符，它适用于“Dr. Dre” - 但如评论中所述，它会失败用于“Dr.Dre”。您可以完全删除单词边界并在模式的后面部分添加一个空格（“DR | Dr |”等），或者使用`(\\s|\\b)`适用于我尝试过的情况的空格，但很可能会有其他不良副作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:40:57.713

问题有点不清楚（您没有提供有问题的结果），但我的猜测是问题在于使用句点字符。句点在正则表达式中是有意义的——它匹配任何字符，所以“博士”。实际上会匹配 * *Dr.D* *re。你必须像“博士”一样逃避它。或者特别是在您的代码中，转义转义斜杠，如下所示：“Dr\。”

希望有帮助！

# php - 如何检查指定字符串是否出现在 PHP 中的特定字符串之后？

> ID：13227852
> 
> 赞同：0
> 
> 时间：2012-11-05T07:36:58.270
> 
> 标签：php, string

我有一个标题。我想检查指定的字符串是否出现在 php.ini 中的特定字符串之后/之前。

例如，

```
Title = Director, Employee Representative 
```

我想检查这个词是否`Employee`出现在标题之后/之前`Representative`。如果标题包含`Representative`，检查单词之前/之后的单词是否是`Employee`

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:42:10.273

一种方法是将其转换为数组，例如：`explode(" ","Employee Representative")`

```
array(
 0 => Employee
 1 => Representative
) 
```

然后您可以获取您要查找的单词的键（在本例中为 1）并递增或递减它以查看它之前或之后的单词。

# excel - 范围类型不匹配 vba

> ID：13227853
> 
> 赞同：2
> 
> 时间：2012-11-05T07:37:02.797
> 
> 标签：excel, vba

将范围值与`""`or进行比较时出现类型不匹配错误`vbNullString`。我阅读了许多处理此问题的类似 q+a 帖子。

*数据全部为数字或`""`。*

```
Sub vegetableCounting()
Dim ws1 As Worksheet, ws2 As Worksheet, ws3 As Worksheet
Dim ws1Range As Excel.range, ws2Range As Excel.range, ws3Range As Excel.range, ws2Loop As Excel.range
Dim ws1Row As Long, ws1Col As Long, ws2Row As Long, ws2Col As Long
'
Dim rowCounter As Long, colCounter As Long, rowsMendo As Long
Dim mendoSum As Double
'
Set ws1 = Sheets("shareSchedule")
Set ws2 = Sheets("shareDistribution")
Set ws3 = Sheets("vegCount")
'***not yet set to the full ranges***
Set ws1Range = ws1.range("E7:H11") 'shareSchedule
Set ws2Range = ws2.range("D7:BB17") 'shareDistribution
Set ws3Range = ws3.range("D7:BB11") 'vegetableCount
'***not yet set to the full ranges***
rowsMendo = 0
rowCounter = 0
colCounter = 0
mendoSum = 0

For ws1Row = 0 To ws1Range.Rows.count Step 1
    For ws1Col = 0 To ws1Range.Columns.count Step 1
        If ws1Range.Offset(ws1Row, ws1Col).value <> "" Then
            For Each ws2Loop In ws2Range '11rows*51cols = 561
                ws2Row = ws2Row + rowCounter + rowsMendo
                ws2Col = ws2Col + colCounter
                If ws2Range.Offset(ws2Row, ws2Col).value = "" Then
                    Exit For
                Else
                    If ws1Range.Offset(ws1Row, ws1Col).Interior.ColorIndex = 24 And _
                    ws2Range.Offset(ws2Row, ws2Col).Interior.ColorIndex = 24 Then 'a MENDO match
                        If rowCounter < 3 Then
                            mendoSum = mendoSum + ws1Range.Offset(ws1Row, ws1Col).value * ws2Range.Offset(ws2Col, ws2Row)
                            rowCounter = rowCounter + 1
                        ElseIf rowCounter = 3 Then
                            colCounter = colCounter + 1
                            rowCounter = 0
                        ElseIf colCounter = ws2Range.Columns.count + 1 And _
                        ws2Range.Offset(ws2Row, 1).Interior.ColorIndex = 24 And _
                        ws2Range.Offset(ws2Row + 4, 1).Interior.ColorIndex = 24 Then
                            colCounter = 0
                            rowsMendo = rowsMendo + 3
                        ElseIf colCounter = ws2Range.Columns.count + 1 And _
                        ws2Range.Offset(ws2Row, 1).Interior.ColorIndex = xlNone And _
                        ws2Range.Offset(ws2Row + 4, 1).Interior.ColorIndex = xlNone Then
                            colCounter = 0
                            rowsMendo = rowsMendo + 1
                        End If

                        ws3Range.Offset(ws1Row, ws2Col) = ws1Range.Offset(ws1Row, ws1Col).value * ws2Range.Offset(ws2Row, ws2Col).value

                    End If
                End If
            Next
        End If
    Next ws1Col
Next ws1Row

'for ws2
                'Offset(0, 0), Offset(1, 0), Offset(2, 0), then
                'Offset(0, 1), Offset(1, 1), Offset(2, 1), then
                'Offset(0, 2), Offset(1, 2), Offset(2, 2), then
                'etc
End Sub 
```

我得到了错误

```
 If ws1Range.Offset(ws1Row, ws1Col).value <> "" Then 
```

并且很可能会再次使用它

```
If ws2Range.Offset(ws2Row, ws2Col).value = "" Then 
```

有什么想法吗？这是我试图从中提取的工作表的一些图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:28:29.900

查看范围的偏移量时，您会得到整个范围区域，由您的偏移值偏移。

例如

```
set a=sheets(1).range("A1:F40")
debug.print a.offset(1,1).address 
```

由于

```
$B$2:$G$41 
```

注意这是 (A+1,1+1:F+1,40+1) 而不是单个单元格

有2个选项：

1.  将您的范围设置为单个单元格，并使用偏移量查看该单元格周围的区域
2.  使用您现在拥有的范围，并用于`cells(x,y)`查看该范围

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:47:15.397

您可以尝试`CStr`将值转换为字符串。`Format`也可以在处理时使用，`Null`而`CStr`会产生错误。

所以要么：

`If CStr(ws1Range.Offset(ws1Row, ws1Col).value) <> "" Then`

或者

`If Format(ws1Range.Offset(ws1Row, ws1Col).value) <> "" Then`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T08:34:57.640

我通常不使用 Offset 函数，但是您可以通过像数组一样直接指定行和列来访问指定范围内的单元格。

例如：ws2Range(ws2Row, ws2Col).value

但是，您必须从 1 开始进行迭代，从 0 开始时会出现错误。

# ruby-on-rails - 使用无论何时 gem 来安排一个 cron 作业

> ID：13227855
> 
> 赞同：1
> 
> 时间：2012-11-05T07:37:10.103
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, whenever

我一直在测试以弄清楚如何使用它，即使在阅读了 Github 文档之后也遇到了麻烦。

我只是想像这样更新模型的属性（config/schedule.rb）

设置：输出“/log/today.log”

```
every 10.seconds do
  runner "Example.update_all(sample: Time.now)"
end 
```

我既没有看到日志文件，也没有看到模型属性更新。

有什么我做的不对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:59:26.530

首先，您需要在 cron 选项卡中添加您的 cron 作业。如果您不想添加，因为您只是在测试它，您可以尝试下面给出的代码（我为我的 rails 应用程序所做的）。

`cd /home/your_home/your_project && script/your_script -e <environment> "method_call"`

在你的情况下：

`environment = development` `method_call = Example.update_all(sample: Time.now)`

它可能会帮助你。

# c# - 如果调用值类型对象的数组元素的方法，会发生复制吗？

> ID：13227856
> 
> 赞同：0
> 
> 时间：2012-11-05T07:37:24.673
> 
> 标签：c#, performance, optimization, copying

为了节省内存，我定义了一些类似记录的结构并将它们的实例存储在数组中，如以下代码所示：

```
struct Foo
{
    readonly char _bar;
    readonly int _baz;
    // other probable fields ...
    public char Bar{get{return _bar;}}
    public int Baz{get{return _baz;}}

    public Foo(char bar, int baz){_bar = bar; _baz = baz;}
}

static void Main ()
{
    Foo[] arr = new Foo[1000000];
    int baz;
    for(var i = 1000000; i-- > 0;){ arr[i] = new Foo('x',42); }
    for(var i = 1000000; i-- > 0;)
    { 
        baz = arr[i].Baz; //Will the Foo obj resides at arr[i] be copied?
    }
} 
```

我知道如果上面的东西是用 C/C++ 实现的，复制就不会发生，但我不确定 C#，如果我用 替换`Foo[]`怎么`List<Foo>`办？C# 没有返回引用的机制，所以理论上，如果不涉及返回值优化，索引器将返回引用类型的指针（4 字节）或值类型的整个副本。那么，谁能告诉我，.NET/MONO jit 是否可以保证避免这种荒谬的复制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:43:43.230

不，该值不会被复制 -`arr[i]`被归类为变量，因此`Baz`将“就地”获取。我花了一段时间才弄清楚如何验证这一点，但这几乎*是*可能的，通过使属性更改数组中的值......

```
using System;

public struct Foo
{
    private int field;

    public int Value
    {
        get
        {
            Test.array[0].field = 10;
            return field;
        }
    }
}    

public class Test
{
    public static Foo[] array = new Foo[1];

    static void Main()
    {
        Console.WriteLine(array[0].Value); // Prints 10
    }
} 
```

请注意，您对“Foo obj”的评论在 C# 中有些误导 - 这里*没有*对象；只有一个 type 的值`Foo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:43:00.987

```
 for(var i = 1000000; i-- > 0;)
    { 
        baz = arr[i].Baz; //Will the Foo obj resides at arr[i] be copied?
    } 
```

没有。要复制`Foo`对象，您实际上必须将 Foo 对象分配给另一个变量。

```
Foo foo = arr[i] ;//would copy the struct at arr[i] into foo. I'm pretty sure it is this case with C/C++. 
```

# python - 如何从 pandas.DatetimeIndex 转换为 numpy.datetime64？

> ID：13227865
> 
> 赞同：10
> 
> 时间：2012-11-05T07:38:20.453
> 
> 标签：python, datetime, numpy, pandas

如何从 转换`pandas.DatetimeIndex`为`numpy.datetime64`？

我得到：

```
>>> type(df.index.to_datetime())
Out[56]: pandas.tseries.index.DatetimeIndex 
```

这样做安全`numpy.array(datetimeindex,dtype=numpy.datetime64)`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T05:42:40.403

里面的数据*是*`datetime64`dtype （`datetime64[ns]`准确地说）。只需获取`values`索引的属性。请注意，它将是纳秒单位。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T08:05:55.500

我会这样做：-

```
new_array = np.array(df.index.to_pydatetime(), dtype=numpy.datetime64) 
```

使用`to_pydatetime()`方法。

# objective-c - if 语句中的赋值警告？

> ID：13227868
> 
> 赞同：2
> 
> 时间：2012-11-05T07:38:39.563
> 
> 标签：objective-c, xcode

当我分配变量而不是检查相等性时，有没有办法可以得到警告？有很多次我不小心分配，而不是比较，如果有警告就好了！

有没有一种方法 Xcode 可以警告我而无需将编码样式更改为：

```
if (YES == aVariable) {...} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T07:47:40.200

如果您在大多数情况下使用`=`而不是`==`在语句中，Xcode 已经警告您。`if`如果您没有收到警告，请告诉我们您使用的 Xcode 版本、您的项目的年龄以及您从默认设置更改了哪些构建设置。

我的测试：我在 Xcode 4.5.2 中创建了一个全新的 iOS 应用程序，并且没有更改任何构建设置。我只是添加了一些代码`application:didFinishLaunchingWithOptions:`来触发警告。这里是：

![使用赋值的结果作为不带括号的条件](../Images/b0091d3b2e6d01c1cc8b586b28f8817f.png)

您可以通过设置编译器的标志来禁用警告`-Wno-parentheses`（但为什么要这样做？）。您可以通过在分配周围添加一组额外的括号来抑制特定情况下的警告：

```
if ((x = 7)) { 
```

有两种情况默认情况下您不会收到警告。首先，在一个`init`方法中，您可以分配给`self`，如下所示：

```
- (id)init {
    if (self = [super init]) {     // no warning by default
    ... 
```

其次，在任何情况下，您都可以分配`nextObject`选择器的结果，如下所示：

```
while (object = [enumerator nextObject]) {    // no warning by default 
```

在这些情况下，您可以通过设置编译器的`-Widiomatic-parentheses`标志来启用警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:47:08.203

编译器标志`Wparentheses`应该可以解决问题。它将强制您在条件中的分配周围放置括号以便编译。Clang 默认设置了这个标志。

# nginx - Ngine重写语言目录

> ID：13227875
> 
> 赞同：1
> 
> 时间：2012-11-05T07:39:16.573
> 
> 标签：nginx, rewrite

在我的 nginx.conf 中，我想重写 URL，除了域包含 lang 子文件夹，如下所示：

> www.domain.com/vi/ 或 hwww.domain.com/en-us/

如果用户达到

> www.domain.com/whatever_not_lang/

然后我将返回另一个 URL。

我陷入了困境`"/vi/"`，我可以返回另一个 URL，但它会返回包含的所有内容`/vi/`或`/en-us/`

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:36:41.420

一般来说，如果您想在同一主机上为不同的 url 做两件事，您可以创建 2 个位置，如下所示：

```
location /en-us/ {
  # do one thing
}

location / {
  # this catches everything else
  # do your rewrite here
} 
```

对于多种语言代码，您可以添加多个位置，也可以将所有位置组合如下：

```
locaton ~* /(en-US|nl-BE|fr-FR)/ {
  # handle the requests with a lang in them, lang being requested is available as
} 
```

# postgresql - postgres合并字段，求和和分组

> ID：13227878
> 
> 赞同：1
> 
> 时间：2012-11-05T07:39:29.220
> 
> 标签：postgresql

也许有人可以通过 postgres 查询帮助我。

表结构看起来像这样

```
 nummer   nachname   vorname   cash
 +-------+----------+----------+------+
   2       Bert       Brecht    0,758
   2       Harry      Belafonte 1,568
   3       Elvis      Presley   0,357
   4       Mark       Twain     1,555
   4       Ella       Fitz      0,333
   … 
```

如何合并“nummer”相同的字段并对现金值求和？我的输出应该是这样的：

```
 2       Bert, Brecht      2,326
           Harry, Belafonte 
   3       Elvis, Presley    0,357
   4       Mark, Twain       1,888
           Ella, Fitz 
```

我认为合并的部分应该像这样工作：

```
 array_to_string(array_agg(nachname|| ', ' ||coalesce(vorname, '')), '<br />') as name, 
```

谢谢你的帮助，

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:45:22.197

```
SELECT
  nummer, 
  string_agg(nachname||CASE WHEN vorname IS NULL THEN '' ELSE ', '||vorname END, E'\n') AS name,
  sum(cash) AS total_cash
FROM Table1
GROUP BY nummer; 
```

看到[这个 SQLFiddle](http://sqlfiddle.com/#!12/9b539/1)；请注意，它不显示名称之间的换行符，但它们仍然存在。

使用该`CASE`语句代替，`coalesce`因此您在具有姓氏但没有名字的条目上没有尾随逗号。如果您想要尾随逗号，请`format('%s, %s',vorname,nachname)`改用并避免所有丑陋的字符串连接业务：

```
SELECT
  nummer, string_agg(format('%s, %s', nachname, vorname), E'\n'),
  sum(cash) AS total_cash
FROM Table1
GROUP BY nummer; 
```

如果`string_agg`不起作用，请获取更新的 PostgreSQL，或在您的问题中提及该版本，以便清楚您使用的是过时的版本。无论如何`array_to_string`，查询被简单地重写以使用。`array_agg`

如果您要询问如何将`sum`数字实际表示为`1,2345`数据库中的文本字符串：*不要这样做*。修复您的架构。而是在输入和输出上格式化数字，将它们存储为`numeric`, `float8`, `integer`, ... 无论作业的适当数字类型是什么。

# c++ - 从一个模板化容器投射到另一个

> ID：13227880
> 
> 赞同：0
> 
> 时间：2012-11-05T07:39:31.330
> 
> 标签：c++, casting, c++-cx

我目前正在编写 WinRT 代码，但我想这个问题适用于所有 C++。在用户交互时，框架调用我的一个函数，传入一个带有通用 Object^ 指针的向量（对于非 WinRT 人员来说，这与 void* 非常相似）。我已经知道向量中有什么类型的对象，我想将向量转换为该对象类型。

例子：

```
MyClass::SomeFunction(Vector<Object^>^ myList) {
    // Warning: The following line doesn't work!!
    Vector<SpecificType^>^ myTypedList = static_cast<Vector<SpecificType^>^>(myList);

    // Here, I go on to interact with the templated vector.
    ...
} 
```

编译器不允许我使用 static_cast。safe_cast 抛出异常。dynamic_cast 不会抛出异常，而是返回一个空指针。

有没有办法可以转换这个东西，或者我真的必须创建一个新向量并将所有成员复制过来（在插入时将每个成员从 Object^ 转换为 SpecificType^）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:47:04.273

您不能`Vector<Object^>`转换为任何其他人`Vector<>`，因为它们之间不涉及继承。您唯一能做的就是将每个元素转换为正确的类。所以，如果你想要一个`Vector<SpecificType^>`，你确实需要重新创建它。并不是说它太难：

```
Vector<SpecificType^> specificList;
for (Object^ p : myList)
  specificList.push_back(static_cast<SpecificType^>(p)); 
```

# android - 从 url 下载不同格式的图像并将其存储在 sdcard 上

> ID：13227885
> 
> 赞同：1
> 
> 时间：2012-11-05T07:40:10.977
> 
> 标签：android

我正在尝试从 url 下载图像并将其存储在 sd 卡上，它适用于 .jpg 文件但如果图像扩展名是 .png 或 .jpeg 则它会出错，我想同时下载不同格式的图像时间..下面是我输入的代码..

```
 public void DownloadFromUrl(String DownloadUrl, String fileName) {

    try {
        File dir = new File("/sdcard/pluto");

        if (dir.exists() == false) {
            dir.mkdirs();
        }

        URL url = new URL(DownloadUrl); // you can write here any link
        File file = new File(dir, fileName);

        long startTime = System.currentTimeMillis();
        Log.d("DownloadManager", "download begining");
        Log.d("DownloadManager", "download url:" + url);
        Log.d("DownloadManager", "downloaded file name:" + fileName);

        /* Open a connection to that URL. */
        URLConnection ucon = url.openConnection();

        /*
         * Define InputStreams to read from the URLConnection.
         */
        InputStream is = ucon.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);

        /*
         * Read bytes to the Buffer until there is nothing more to read(-1).
         */
        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
        int current = 0;
        while ((current = bis.read()) != -1) {
            baf.append((byte) current);
        }

        /* Convert the Bytes read to a String. */
        FileOutputStream fos = new FileOutputStream(file);
        fos.write(baf.toByteArray());
        fos.flush();
        fos.close();
        Log.d("DownloadManager",
                "download ready in"
                        + ((System.currentTimeMillis() - startTime) / 1000)
                        + " sec");

    } catch (IOException e) {
        Log.d("DownloadManager", "Error: " + e);
    }

} 
```

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:03:55.490

试试这个可能会有所帮助。

相同的帖子具有不同的图像格式。

[图像下载代码适用于所有图像格式，PNG 格式呈现问题](https://stackoverflow.com/questions/5052437/image-download-code-works-for-all-image-format-issues-with-png-format-rendering)

# android - 如何创建识别 onTap 方法的静态 Mapview

> ID：13227892
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:41:08.413
> 
> 标签：android, onclick, overlay, android-mapview

我正在尝试开发一种布局，该布局显示谷歌地图，其路线绘制在与该地图关联的叠加层上。我希望这个 mapView 是一个小的静态地图，以缩略图的形式显示用户遵循的主要路线，然后如果用户点击它，一个意图会带你到另一个活动，以全屏显示地图和路线以及所有缩放功能。

问题是，虽然我重写了 Overlay 的 onTap 方法设置新活动的意图，但它仅在我将 MapView 设置为 setEnabled(true) 时才有效，但如果我这样做，则可以拖动缩略图地图并由用户移动。

如果不够清楚，我很抱歉，但我不知道如何更好地解释它。

提前致谢

这是我自定义的类，它扩展了 Overlay 并覆盖了 onTap 方法：

```
class MapOverlay extends Overlay {

    @Override
    public boolean onTap(GeoPoint p, MapView mapView) {

        Intent i = new Intent(getApplicationContext(),
                RouteMapActivity.class);
        startActivity(i);

        return false;

    }; 
```

这是我的 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detailrun_activity);

    map = (MapView) findViewById(R.id.mvMain);
    map.setEnabled(true);
    map.setClickable(true);
    MapOverlay mapOverlay = new MapOverlay();

    List<Overlay> listOfOverlays = map.getOverlays();
    projection = map.getProjection();
    listOfOverlays.clear();
    listOfOverlays.add(mapOverlay);

    double lat = 28.063119 * 1E6, longi = -82.41128 * 1E6;
    GeoPoint point = new GeoPoint((int) lat, (int) longi);

    MapController myMapController = map.getController();
    myMapController.setCenter(point);
} 
```

现在我只在两个 GeoPoints 之间画一条直线，我没有收到任何 logcat 错误。

确实绘制了带有路线的地图，并且覆盖的 onTap 方法有效，但是如果我的 mapView 被定义为启用和可点击，它似乎只识别点击，但如果我这样做，那么用户也可以移动和拖动地图只要他按住屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:47:01.730

[您可以通过此链接](http://maps.googleapis.com/maps/api/staticmap?zoom=16&size=256x256&maptype=roadmap&markers=color%3ablue%7Clabel%3aS%7C%2272.5%22,%2222.5%22&sensor=false)根据您的位置获取静态谷歌地图图像。您可以在 imageview 中显示并单击您可以定位具有 MapView 的新活动。我认为这对您来说可能是一个不错的选择。

# java - 如何通过 Java swing 执行 cmd 命令

> ID：13227893
> 
> 赞同：2
> 
> 时间：2012-11-05T07:41:08.783
> 
> 标签：java, swing, cmd, runtime.exec, processbuilder

我有一个文件要打印，我想通过 java swing 给他发送一个自定义水印。我有 2 个文件 NewJFrame.java 和 Test.java

```
package test;

import java.io.IOException;
import java.io.OutputStream;

/**
 *
 * @author shaharnakash
 */
public class NewJFrame extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("whater mark name");

        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });

        jButton1.setText("submit");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(30, 30, 30)
                .add(jLabel1)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .add(jTextField1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 251, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
            .add(layout.createSequentialGroup()
                .add(17, 17, 17)
                .add(jButton1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 206, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(layout.createSequentialGroup()
                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(layout.createSequentialGroup()
                        .add(41, 41, 41)
                        .add(jLabel1))
                    .add(layout.createSequentialGroup()
                        .addContainerGap()
                        .add(jTextField1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 57, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                .add(112, 112, 112)
                .add(jButton1)
                .addContainerGap(96, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
    }                                           

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        String value;
        value = jTextField1.getText();
         try{
            String command = "cmd /c start cmd.exe";
            Process child = Runtime.getRuntime().exec(command);

            OutputStream out = child.getOutputStream();
            out.write("C:/PDF>pdfprint.exe -printer 'docPrint' -firstpage 1 -lastpage 1 -wtext 'value' -wo 100 -wa 50 -wf 'Arial' C:/readme.pdf".getBytes());
                out.close();
        }catch(IOException e){

        }
    }                                        

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration                   
} 
```

和执行程序的主要 java 类 Test.java

```
 package test;

/**
 *
 * @author shaharnakash
 */
public class Test {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
         java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
} 
```

这个想法是在文本字段中插入一个值，然后单击提交按钮，它将执行 cmd 命令

```
C:/PDF>pdfprint.exe -printer 'docPrint' -firstpage 1 -lastpage 1 -wtext 'value' -wo 100 -wa 50 -wf 'Arial' C:/readme.pdf 
```

当我执行程序时，它将打开 cmd 并且不会将文件发送到打印机

注意：draft 是水印变化

我更改为 Process child = Runtime.getRuntime().exec("\"PDF\pdfprint.exe -printer docPrint -firstpage 1 -lastpage 1 -wtext "+value+" -wo 100 -wa 50 -wf Arial C:\readme .pdf");

我仍然不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:15:17.830

[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)就个人而言，如果没有其他原因，我会使用`Process`.

```
ProcessBuilder pb = new ProcessBuilder("pdfprint.exe", "-printer", "'docPrint'", "-firstpage", "1", "-lastpage", "1", "-wtext", "'value'", "-wo", "100", "-wa", "50", "-wf", "'Arial'", "C:/readme.pdf");
pb.redirectErrorStream(true);
Process p = pb.start();
InputStream is = p.getInputStream();
int inInt = -1;
while ((inInt = is.read()) != -1) {
    System.out.print((char)inInt);
} 
```

现在，这是一个块调用，这意味着如果您在 UI 的上下文（又名事件调度线程）中执行此操作，UI 将显示为挂起，直到外部进程完成运行。

在这种情况下，您应该调用执行后面的命令。可能最简单的方法是使用[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)

```
public class ExeWorker extends SwingWorker<String, String> {
    public String doInBackground() {
        // Execute command here...
        // Depending on what you want to return, setup a return value
        // This could an error string or the path to the output file for example...

       return result;
    }

    public void done() {
        // Back on the EDT, update the UI ;)
    }
} 
```

阅读[Swing 中的并发以](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:42:12.383

使用`Runtime.getRuntime().exec()`方法。谷歌关于它的不同变体。

# frameworks - yii框架中登录页面的不同布局

> ID：13227895
> 
> 赞同：0
> 
> 时间：2012-11-05T07:41:18.923
> 
> 标签：frameworks, yii, yii-components, yii-events

我有我想在 index.but 之后调用的登录页面。但是登录和索引具有相同的布局。

我的要求是，当我运行`locathost/demo/index.php`所有 tha 登录和其他相关页面显示在同一个 index.php 布局上时。但我只想`login.php`使用 yii 框架运行单个。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:48:41.420

在站点控制器中，在登录操作（*公共函数 actionLogin*）下，您可以指定不同的布局，如下所示：

```
$this->layout = "mylayout"; 
```

显然布局需要存在于*protected/views/layouts下*

# android - 带有两个列表片段的可滚动布局

> ID：13227896
> 
> 赞同：1
> 
> 时间：2012-11-05T07:41:27.433
> 
> 标签：android

我创建了一个带有两个列表片段的滚动视图，代码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/blue_shade_top_gainers_and_loosers"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:paddingBottom="1dip"
        android:paddingLeft="1dip"
        android:paddingRight="1dip"
        android:paddingTop="2dip" >

        <fragment
            android:id="@+id/header_fragment"
            android:name="com.lk.ignitionit.cse.util.HeaderFragmentActivity"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ScrollView13"
        android:layout_width="fill_parent"
        android:layout_height="match_parent" >

        <RelativeLayout
            android:id="@+id/rl_top"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_marginBottom="1dip"
            android:layout_marginLeft="1dip"
            android:layout_marginRight="1dip"
            android:layout_marginTop="1dip"
             >

            <LinearLayout
                android:id="@+id/headg"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:scrollbars="vertical" >

                <include layout="@layout/top_gainer_header" />
            </LinearLayout>

            <fragment
                android:id="@+id/gain"
                android:name="com.lk.ignitionit.cse.application.TopGainersFragmentActivity"
                android:layout_width="match_parent"
                **android:layout_height="wrap_content"**
                android:layout_below="@+id/headg" />

            <LinearLayout
                android:id="@+id/headl"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@+id/gain" >

                <include layout="@layout/top_loosers_header" />
            </LinearLayout>

            <fragment
                android:name="com.lk.ignitionit.cse.application.TopLoosersFragmantActivity"
                android:layout_width="match_parent"
                **android:layout_height="wrap_content"**
                android:layout_below="@+id/headl" />
        </RelativeLayout>
    </ScrollView>

</LinearLayout> 
```

但输出不显示整个列表

然后我将片段布局高度更改为 240dip 而不是“wrap_content”，现在足以显示整个列表。但问题是，这些数据是动态的，每个列表片段都有 10 个列表项。所以我无法预测片段的高度。如果名字很长，这个高度是不够的。

所以我需要将片段高度设置为 wrap_content 并且可以滚动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:54:40.473

为此，已经有几个关于 SO 的问题。似乎没有完美的答案，但有几个指针。请搜索它们。一个例子：

[使用 android 的多个列表视图滚动](https://stackoverflow.com/questions/306626/scrolling-with-multiple-listviews-for-android)

# android - 我如何防止用户在该关卡完成后开始游戏关卡活动？

> ID：13227897
> 
> 赞同：0
> 
> 时间：2012-11-05T07:41:39.813
> 
> 标签：android, android-activity

简单的问题，虽然我找不到与 SO 相关的任何内容。我正在开发一个安卓游戏，只是添加了分数。每个游戏关卡都是一项活动，每个完成的关卡都会在总分中增加一个分数。我想**禁止该级别完成后再次启动游戏级别活动**，以防止用户再次添加相同级别的分数。

我为我糟糕的英语道歉。希望我让自己明白了。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:46:53.433

您可以使用 sharedpreferences 来保存一个变量，该变量会在您的应用安装后持续存在。
我会以这种方式保存一个数字，告诉你玩家已经达到/完成的级别。
您可以[在 android 开发者网站上阅读更多内容](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# java - junit 与基于 php 的应用程序集成

> ID：13227898
> 
> 赞同：1
> 
> 时间：2012-11-05T07:41:50.300
> 
> 标签：java, php, unit-testing, junit

我正在探索[junit](http://www.junit.org/)进行单元测试。我已经看到它是基于java的。我已经探索过了，我还有一些问题

1.  我可以将 junit 与基于 php 的应用程序集成以进行单元测试吗？
2.  测试用例只会用java写吗？我可以使用 junit 在 PHP 中编写测试用例吗？

我浏览了教程，并且看到所有测试用例都是用 Java 编写的。但我有人说这是可以做到的。因此，任何指南将不胜感激。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:17:21.443

JUnit 是一个 Java 单元测试框架。它旨在通过用 Java 编写的测试对 Java 类进行单元测试，这些测试与它们正在测试的实现高度耦合。当他/她说它可以用来对 PHP 进行单元测试时，不确定你所说的“某人”是什么意思。也许您正在寻找[PHPUnit](http://phpunit.de/)。

# excel - Autosum 单元格 VBA Excel

> ID：13227900
> 
> 赞同：4
> 
> 时间：2012-11-05T07:41:59.747
> 
> 标签：excel, vba

我正在尝试使用 VBA 对 Excel 中的一个单元格块中的值进行自动求和。在调试以下代码时，我不断收到类型不匹配错误。我哪里做错了？

```
Sub autosumtest()
    Dim total As Integer
    Worksheets("Sheet1Test").Select
    Range("F16:G20").Select
    total = CInt("=SUM(Selection.Values)")
    MsgBox (total)
End Sub 
```

**`EDIT 1:`这是我的测试数据的简单示例，称为 Autosum Range：**

![在此处输入图像描述](../Images/93d7b2fe31fdb1be59a352a8dd594e67.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:08:03.037

您可以使用 [] 来评估任何电子表格表达式。

```
Sub autosumtest()
   Dim total As Integer
   total = CInt([=sum(sheet1Test!F16:G20)])
   MsgBox (total)
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:50:51.820

您的范围`F16 to G20`将包含不同的格式。确保他们已经解决了`Number`格式和问题。

您还可以使用以下内容；

```
Sub autosumtest()
    Dim total As Integer
    total = [=SUM(Sheet1Test!F16:G20)]
    MsgBox (total)
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T07:58:41.333

是的，存在类型不匹配，因为 "=SUM(F16:G20)" 是一个字符串。

Worksheetfunction 应用于对所需范围求和。除非有进一步选择的愿望，否则 .Select 是不需要的。

```
Option Explicit

Sub autosumtest()
    Dim total As Integer
    Dim rng As Range

    Set rng = Worksheets("Sheet1Test").Range("F16:G20")
       total = CInt(WorksheetFunction.Sum(rng))
    MsgBox (total)
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T09:01:30.467

好的，鉴于其他*一些*答案的长度和多余的`CInt`......

```
Sub Easy()
MsgBox Application.Sum(Sheets("Sheet1Test").Range("F16:G20"))
End Sub 
```

# php - 从数组中选择多次出现的数组 - PHP

> ID：13227910
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:42:36.007
> 
> 标签：php, arrays

我的数组在下面给出。其中包含多个数组。

```
Array
(
[0] => Array
    (
        [user_id] => 1
        [name] => name1
    )

[1] => Array
    (
        [user_id] => 2
        [name] => name2
    )
[2] => Array
    (
        [user_id] => 2
        [name] => name2
    )
[3] => Array
    (
        [user_id] => 3
        [name] => name3
    )

)<br/> 
```

我需要有不止一次出现的数组。在这种情况下

```
Array
(
    [user_id] => 2
    [name] => name2
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:18:58.017

尝试这个。

```
function get_multi_occur($my_array)
{
    foreach ($my_array as $id => $a) {
        $key = $a[user_id] . $a[name];
        if ($s[$key]['cnt'] == 0) {
            $s[$key]['cnt'] = 1;
            $s[$key]['id'] = $id;
        } else {
            $s[$key]['cnt']++;
        }
    }
    foreach ($s as $r) {
        if ($r['cnt'] >= 2) {
            $ret[] = $my_array[$r[id]];
        }
    }
    return $ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:59:45.083

创建一个新数组来存储具有相同值的数据。

试试这个代码：

```
$array_existing = array();

$ctr = 0;
foreach ($first_array as $key => $first) :
    foreach ($second_array as $keytwo => $second) : 
        if ($first['user_id'] == $second['user_id'] && $first['name'] == $second['name']) {
            $array_existing[$ctr]['user_id'] = $first['user_id'];
            $array_existing[$ctr]['name'] = $first['name'];
            $array_existing[$ctr]['first_index'] = $key;
            $array_existing[$ctr]['second_index'] = $keytwo;
            $ctr++;
        }
    endforeach;
endforeach;

var_dump($array_existing); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:58:54.380

```
foreach ($array as $key_1=>$sub_array_1)
{
   foreach ($array as $key_2=>$sub_array_2)
   {
      if ($sub_array_1 == $sub_array_2 && 
          $key_1 != $key_2)//prevent to compare same sub arrays
      print_r($sub_array_1);
   }
} 
```

像这样的东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T08:06:48.553

你可以试试

```
$array = Array(
        "0" => Array("user_id" => 1,"name" => "name1"),
        "1" => Array("user_id" => 2,"name" => "name2"),
        "2" => Array("user_id" => 2,"name" => "name2"),
        "3" => Array("user_id" => 3,"name" => "name3"));

$d = $s = array();
array_map(function ($v) use(&$d, &$s) {
    array_key_exists($v['user_id'], $s) && ! array_key_exists($v['user_id'], $d) ? $d[$v['user_id']] = $v : $s[$v['user_id']] = $v;
}, $array);

var_dump($d); 
```

输出

```
array
  2 => 
    array
      'user_id' => int 2
      'name' => string 'name2' (length=5) 
```

# regex - 正则表达式将句子分成多个组

> ID：13227911
> 
> 赞同：0
> 
> 时间：2012-11-05T07:42:37.440
> 
> 标签：regex, vb.net, split

需要用于句子拆分的正则表达式。
我需要一种正则表达式方法来拆分句子。
下面的句子结构需要分解成它的组成部分：

Question、Options、AnswerType 除以以下分隔符...

```
Question :  OptionA, OptionB, OptionC   ?   AnswerType

EXAMPLES:
Color: Yellow, Green, Red ? ListBox
Color ? ListBox 
```

如您所见，第二个示例没有选项，需要考虑这一点。理想情况下，输出将类似于以下组

如果这有什么不同，我正在 VB.NET 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:12:42.840

我不知道正则表达式在 vb.net 中是如何工作的，但这是一个一般模式，并且在[DEMO中得到了很好的解释](http://regex101.com/r/fM7jB8)

正则表达式：

`(?P<question>\w+)\s*(?::\s*(?P<options>\w+(?:,\s*\w+)*))?\s*\?\s*(?P<type>\w+)`

?P< name> 确定用于反向引用该组的名称，您只需循环并将所有内容分组。

尝试带有（后缀）的新正则表达式：[DEMO](http://regex101.com/r/vO9yR4)我只是在问题之后添加了（后缀）的可能性。

更新的正则表达式：

`(?P<question>\w+)\s*(?P<suffix>\(\w+\))?\s*(?::\s*(?P<options>\w+(?:,\s*\w+)*))?\s*\?\s*(?P<type>\w+)`

更新 2：使用空格和`'`->`(?P<question>[\w '-]+)\s*(?P<suffix>\([\w '-]+\))?\s*(?::\s*(?P<options>[\w '-]+(?:,\s*[\w '-]+)*))?\s*\?\s*(?P<type>[\w '-]+)`

[演示](http://regex101.com/r/pZ2zY6)

# php - 计算一个日期范围内有多少天在另一个日期范围内

> ID：13227912
> 
> 赞同：4
> 
> 时间：2012-11-05T07:42:38.077
> 
> 标签：php

从 10 月 1 日到 3 月 31 日，费用为 1 美元（第 1 季）。从 4 月 1 日到 9 月 30 日，费用为 2 美元（第 2 季）。

如何根据该日期范围的第 1 季和第 2 季的天数计算给定日期范围（用户输入）的总费用？

以下给出了用户日期范围的天数，但我不知道如何针对第 1 季或第 2 季进行测试：

```
$user_input_start_date = getdate( $a );
$user_input_end_date = getdate( $b );

$start_date_new = mktime( 12, 0, 0, $user_input_start_date['mon'], $user_input_start_date['mday'], $user_input_start_date['year'] );
$end_date_new = mktime( 12, 0, 0, $user_input_end_date['mon'], $user_input_end_date['mday'], $user_input_end_date['year'] );

return round( abs( $start_date_new - $end_date_new ) / 86400 ); 
```

鉴于日期范围从 2012 年开始和结束，或者仅在 2012 年开始和 2013 年结束，就给了我 10 种不同的可能性，即日期范围可以在哪个季节开始以及在哪里结束。

对于以下情况，必须有比迭代 if/else 和一遍又一遍地比较日期更好的解决方案：

1.  日期范围完全在第 1 季内
2.  日期范围从第 1 季开始，到第 2 季结束
3.  日期范围从第 1 季开始，跨越第 2 季并在第 1 季的第二部分结束

...等等“从第 2 季开始”等等

这不是[距离 XYZ 日期还有多少天？](https://stackoverflow.com/questions/654363/how-many-days-until-xxx-date)因为这只涉及计算天数。它没有解决将一个日期范围与另一个日期范围进行比较的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:57:41.170

这个问题的关键是尽可能地简化它。我认为使用数组作为一年中每一天的成本的查找表是可行的方法。然后要做的第一件事就是生成数组。该数组仅代表一年中的每一天，并不代表任何特定的年份。我选择使用 2012 来生成查找数组，因为它是闰年，所以每一天都有。

```
function getSeasonArray()
{
    /**
     * I have chosen 2012 as it was a leap year. All we want to do is
     * generate an array which has avery day of the year in it.
     */
    $startDate = new DateTime('1st January 2012');
    //DatePeriod always drops the last day.
    $endDate = new DateTime('1st January 2013');
    $season2Start = new DateTime('1st April 2012');
    $season2End = new DateTime('1st October 2012');

    $allDays = new DatePeriod($startDate, new DateInterval('P1D'), $endDate);
    $season2Days = new DatePeriod($season2Start, new DateInterval('P1D'), $season2End);

    $seasonArray = array();

    foreach($allDays as $day){
        $seasonArray[] = $day->format('d-M');
        $seasonArray[$day->format('d-M')]['season'] = 1;
    }

    foreach($season2Days as $day){
        $seasonArray[$day->format('d-M')]['season'] = 2;
    }

    return $seasonArray;
} 
```

完成后，您只需要计算的时间段：-

```
$bookingStartDate = new DateTime();//Or wherever you get this from
$bookingEndDate = new DateTime();
$bookingEndDate->setTimestamp(strtotime('+ 7 month'));//Or wherever you get this from
$bookingPeriod = new DatePeriod($bookingStartDate, new DateInterval('P1D'),   $bookingEndDate); 
```

然后我们可以进行计算：-

```
$seasons = getSeasonArray();
$totalCost = 0;
foreach($bookingPeriod as $day){
    $totalCost += $seasons[$day->format('d-M')]['season'];
    var_dump($day->format('d-M') . ' = $' . $seasons[$day->format('d-M')]['season']);
}
var_dump($totalCost); 
```

我选择了较长的预订期，以便您可以扫描 var_dump() 输出并验证一年中每一天的正确价格。

这是在工作中分心之间的快速尝试，我相信只要稍加思考，您就可以将其塑造成一个更优雅的解决方案。例如，我想摆脱双重迭代，不幸的是，工作压力使我无法在这方面花费更多时间。

有关这些有用类的更多信息，请参阅 PHP [DateTime 手册页](http://www.php.net/manual/en/book.datetime.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T07:50:44.340

起初我建议使用 PHP 提供的[DateTime 类](http://www.php.net/manual/en/class.datetime.php)，天真地假设它有某种可以使用的深思熟虑的 API。事实证明，事实并非如此。虽然它具有非常基本的 DateTime 功能，但它大多无法使用，因为对于大多数操作，它依赖于`DateInterval`类。结合起来，这些类代表了糟糕的 API 设计的另一个杰作。

间隔*应该*像这样定义：

> Joda-Time 中的间隔表示从一个毫秒瞬间到另一个瞬间的时间间隔。这两个瞬间都是日期时间连续体中完全指定的瞬间，并带有时区。

然而，在 PHP 中，间隔只是一个持续时间：

> 日期间隔存储固定的时间量（以年、月、日、小时等为单位）或相对时间字符串 [例如“2 天”]。

不幸的是，PHP 的 DateInterval 定义不允许交叉/重叠计算（OP 需要），因为 PHP 的 Intervals 在日期时间连续体中没有特定位置。因此，我实现了一个（非常基本的）类，它遵循 JodaTime 的间隔定义。它没有经过广泛的测试，但应该可以完成工作：

```
class ProperDateInterval {
    private $start = null;
    private $end = null;

    public function __construct(DateTime $start, DateTime $end) {
        $this->start = $start;
        $this->end = $end;
    }

    /**
    * Does this time interval overlap the specified time interval.
    */
    public function overlaps(ProperDateInterval $other) {
        $start = $this->getStart()->getTimestamp();
        $end = $this->getEnd()->getTimestamp();

        $oStart = $other->getStart()->getTimestamp();
        $oEnd = $other->getEnd()->getTimestamp();

        return $start < $oEnd && $oStart < $end;
    }

    /**
     * Gets the overlap between this interval and another interval.
     */
    public function overlap(ProperDateInterval $other) {
        if(!$this->overlaps($other)) {
            // I haven't decided what should happen here yet.
            // Returning "null" doesn't seem like a good solution.
            // Maybe ProperDateInterval::EMPTY?
            throw new Exception("No intersection."); 
        }

        $start = $this->getStart()->getTimestamp();
        $end = $this->getEnd()->getTimestamp();

        $oStart = $other->getStart()->getTimestamp();
        $oEnd = $other->getEnd()->getTimestamp();

        $overlapStart = NULL;
        $overlapEnd = NULL;
        if($start === $oStart || $start > $oStart) {
            $overlapStart = $this->getStart();
        } else {
            $overlapStart = $other->getStart();
        }

        if($end === $oEnd || $end < $oEnd) {
            $overlapEnd = $this->getEnd();
        } else {
            $overlapEnd = $other->getEnd();
        }

        return new ProperDateInterval($overlapStart, $overlapEnd);
    }

    /**
     * @return long The duration of this interval in seconds.
     */
    public function getDuration() {
        return $this->getEnd()->getTimestamp() - $this->getStart()->getTimestamp();
    }

    public function getStart() {
        return $this->start;
    }

    public function getEnd() {
        return $this->end;
    }
} 
```

它可以像这样使用：

```
$seasonStart = DateTime::createFromFormat('j-M-Y', '01-Apr-2012');
$seasonEnd = DateTime::createFromFormat('j-M-Y', '30-Sep-2012');

$userStart = DateTime::createFromFormat('j-M-Y', '01-Jan-2012');
$userEnd = DateTime::createFromFormat('j-M-Y', '02-Apr-2012');

$i1 = new ProperDateInterval($seasonStart, $seasonEnd);
$i2 = new ProperDateInterval($userStart, $userEnd);

$overlap = $i1->overlap($i2);
var_dump($overlap->getDuration()); 
```

# traveling-salesman - 如何将 TSP 变成最小哈密顿路径？

> ID：13227914
> 
> 赞同：2
> 
> 时间：2012-11-05T07:42:43.660
> 
> 标签：traveling-salesman

我正在尝试解决这个问题[http://coj.uci.cu/24h/problem.xhtml?abb=1368](http://coj.uci.cu/24h/problem.xhtml?abb=1368)。

经过大量研究并花费大量时间，我能够为 TSP 实现分支定界算法，该算法得到一条通过所有点并返回开始的路径。

我在想从那条路径中删除最长的边我会得到答案，但是当我完成我的算法时，我发现这并非在所有情况下都是正确的，阅读这个问题：[Minimal Distance Hamiltonian Path Javascript](https://stackoverflow.com/questions/7341687/minimal-distance-hamiltonian-path-javascript)

我找到了一些答案，说添加一个与其他点的距离为零的虚拟点，然后删除它可以解决问题，但我不知道具体情况。我已经添加了那个虚拟点，现在不是得到 26.01，而是 16.23 作为答案。我还没有删除虚拟点，因为我不明白“添加虚拟点的全部意义”。

你能指导我解决这个问题吗？还是采用另一种方法而不是 TSP 更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:10:52.310

虚拟点允许您在任意大的距离处连接两端。在 TSP 中，两端也必须彼此非常靠近以最小化总距离。在您的路径问题中，此要求不存在，因此 TSP 最优值对您的问题无效的约束是主观的，因此可能不是您的路径问题的最优值。

如果您引入一个虚拟点（或将其视为一条捷径，一个虫洞），您的两端可能会相距很远，而不会影响您的距离。

# android - 在没有服务器的情况下使用 SVGZ 文件。（本地 iOS/Android）

> ID：13227923
> 
> 赞同：4
> 
> 时间：2012-11-05T07:43:22.747
> 
> 标签：android, ios, cordova, svg, gzip

我正在为 Android 和 iOS 应用程序开发 UI。它可能会使用 PhoneGap（或类似）构建，这意味着 UI 将是 HTML5 实现。

对于大多数图像，我们决定使用 SVG 文件，因为它们可以在各种 Android 屏幕上很好地缩放，并且非常适合 iOS 上的 Retina。

到目前为止，使用 .svg 文件对我们来说效果很好，并且由于 Safari 和 Chrome 的支持，在标准浏览器中易于本地测试。

问题是这些 .svg 文件在我们将它们转换为 sprite 时会变得相当大。因此，我正在研究使用 GZIPped svg 文件 (.svgz)。

快速测试表明，我们使用的 50k SVG 通过 Gzip 压缩到 8k。

然而，问题在于，似乎需要存在客户端/服务器关系才能解压缩 SVGZ 文件。在本地运行时，我无法让 Safari 呈现链接的 .svgz 文件（因为我假设它会在通过 PhoneGap 编译的应用程序中的 web 视图时）。不过，Chrome 似乎能够呈现 svgz。

所以，我的问题：

*   有没有办法通过 PhoneGap 应用程序在 iOS 上本地使用 .svgz 文件（我还没有到通过 PhoneGap 编译的地步，所以目前无法测试该部分）？
*   Android 上的 .svgz 是否存在任何已知问题（考虑到在桌面 Chrome 上看起来没问题）？
*   在没有实际下载速度问题的情况下（在初始应用程序下载之外），我是否应该为 .svgz 烦恼？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T07:59:31.697

我对 iOS 或 Android 上的 svgz 问题了解不多，但你绝对不应该担心 .svg 文件与 .svgz 相比的大小，甚至对于初始下载也不用担心。无论如何，Android 和 iOS 软件包中的所有文件都是压缩的，因此自己压缩这些文件不会给您带来任何好处。实际上，保持它们不压缩可能对您的应用程序性能更好。

# filter - RedCloth：在启用 :filter_html 时避免自定义扩展上的 html 转义

> ID：13227930
> 
> 赞同：1
> 
> 时间：2012-11-05T07:44:00.537
> 
> 标签：filter, extend, textile, redcloth

尝试用谷歌搜索，但没有找到类似的...

我有一个使用纺织品来格式化消息的应用程序。我正在尝试加强安全性，只允许通过纺织品标记生成 HTML。所以我根据 RedCloth 文档启用了 :filter_html 选项。

```
text = RedCloth.new(input_text, [:filter_html]).to_html 
```

现在，我正在尝试使用自定义过滤器扩展 RedCloth。它用一些 HTML（即标签）替换了一些自定义代码。这与笑脸过滤器示例中所做的非常相似： [https ://github.com/jgarber/redcloth/blob/master/spec/extension_spec.rb](https://github.com/jgarber/redcloth/blob/master/spec/extension_spec.rb)

```
text = RedCloth.new(input_text, [:filter_html]).to_html(:custom_filter) 
```

问题是通过启用 :filter_html，redcloth html 对我的自定义过滤器生成的 HTML 输出进行编码。

我尝试使用 html_safe 标记自定义过滤器的输出，但这不起作用。

有什么建议可以避免在我的客户过滤器上发生这种 html 转义吗？

# jquery - 用它包装文本没有用任何 HTML 标记 (jQuery) 包装？

> ID：13227939
> 
> 赞同：1
> 
> 时间：2012-11-05T07:45:10.753
> 
> 标签：jquery

我在以下 div 中有一些文本：`.wpbdp-listing-single` 文本没有包裹它。如何在它周围捕获 HTML 标记？（不包装其他具有 html 标签的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:59:23.820

因此，您只想包装该 div 的纯文本元素。这是执行此操作的 jQuery 代码：

```
$('.wpbdp-listing-single').contents().filter(function() {
  return this.nodeType == 3;
})​.wrap('<b></b>');​​​​​​​​​​ 
```

与`.children()`,不同，`.contents()`也将返回文本节点，您*只能*通过测试`nodeType`属性来过滤文本节点。

小提琴：http: [//jsfiddle.net/dandv/YkgLa/](http://jsfiddle.net/dandv/YkgLa/)

# asp.net - 如何以编程方式创建 Facebook 应用程序？

> ID：13227941
> 
> 赞同：0
> 
> 时间：2012-11-05T07:45:28.100
> 
> 标签：asp.net, facebook, facebook-graph-api

我想从我的代码中创建一个 facebook 应用程序。

手动完成后，我必须访问developers.facebook.com，转到应用程序部分，然后单击“创建新应用程序”。这将创建一个新应用程序，Facebook 会要求我提供基本信息，例如

*   应用显示名称
*   应用命名空间
*   网站网址
*   画布网址

这将创建一个新应用程序。

我想自动做同样的事情。RestFb可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:49:11.503

对您的问题的回答是，**不**，您不能通过任何 Facebook 方法做到这一点，其原因类似于您无法通过 Facebook 的 API 创建页面、Facebook 用户帐户、组的原因，它是其他海报列出的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:18:58.717

想想看。如果你可以通过代码来实现，你可以自动生成无限的应用程序。这对 facebook 来说将是一个危险的安全漏洞。所以，你必须手动完成。

# php - 正则表达式中的问号

> ID：13227944
> 
> 赞同：0
> 
> 时间：2012-11-05T07:45:37.230
> 
> 标签：php, regex

我看到这个正则表达式在一个 url 上执行：

```
$url = 'http://www.domain.com/';
preg_match('/(http)(.*?)\n/', $url, $matches); 
```

我不确定问号“？”有什么用？在这个正则表达式中。根据正则表达式手册，“？” 是等效于 {0,1} 的元字符。那么，有“？”的意义何在？在 * 之后，因为 * 已经代表 {0,}

有人可以启发我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T07:48:59.760

当它跟随另一个量词时，它具有不同的含义。

在这种情况下，它会改变前面量词的匹配行为。默认行为是贪婪的，并将其`?`更改为“不贪婪”。

*   “贪婪”意味着尽可能匹配

*   “不贪婪”意味着匹配尽可能少

请参阅[有关 regular-expression.info 的文章](http://www.regular-expressions.info/repeat.html)

**例如：**

`a.+b`将匹配 aabxb 中的“aabxb **”**

`a.+?b`**将仅匹配aabxb**中的“aab”

 **请参阅[Regexr 上的示例](http://regexr.com?32mv5)

[你可能对我关于这个主题的博客文章感兴趣：[你知道量词。真的吗？](http://blog.xisb.de/?p=43)]

**关于你的正则表达式**

```
preg_match('/(http)(.*?)\n/', $url, $matches); 
```

我不认为这有什么不同。默认情况下`.`匹配除换行符以外的任何字符（您可以通过`s`在结束正则表达式分隔符后添加 a 来更改它），因此如果问号存在与否，它将只匹配到第一个`\n`.

如果你通过使用改变行为`preg_match('/(http)(.*?)\n/s', $url, $matches);`，它会有所作为。`.*\n`将匹配到最后一个`\n`，`.*?\n`并将在第一个停止`\n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:47:28.913

在这种情况下，问号表示“吝啬”的匹配。一旦`\n`遇到第一个，它将停止匹配，否则，它将吞噬干预`\n`s 直到最后一个。

有关贪婪和吝啬匹配的更多信息，[请访问 http://www.perl.com/doc/FMTEYEWTK/regexps.html](http://www.perl.com/doc/FMTEYEWTK/regexps.html)**

# asp.net-mvc-3 - 如何解决 mvc3 razor 视图中的运行时错误（程序集'MvcApplication2，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = null'）

> ID：13227945
> 
> 赞同：1
> 
> 时间：2012-11-05T07:45:37.180
> 
> 标签：asp.net-mvc-3

我想在 Visual Studio 2010 Professional 中创建一个 mvc3 web razor 应用程序。我添加了带有剃刀视图的 mvc3 Web 项目，但是当我编译它时，它给出了 MVC.WEB.dll 旧版本的错误。然后我在我的参考汇编中将 mvc.web.dll 更新为版本 4，将 web.mvc.webpages 更新为版本 2。

当它给出编译时错误时，我已经添加了 web.config 文件配置，如下所示

```
<compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
      </assemblies>
    </compilation> 
```

但现在它没有给出如下所示的编译时错误。

```
Assembly 'MvcApplication2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' uses 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' which has a higher version than referenced assembly 'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:21:58.077

`I want to create a mvc3 web razor application`

接着

`i updated mvc.web.dll to version 4`

什么？

例外`... which has a higher version than referenced assembly ...`

尝试从项目引用中删除引用（左键单击`System.Web.Mvc`并按删除），然后`References -> Add reference`在第一个选项卡上按名称排序，并`System.Web.Mvc`在第二列（版本）中选择 4.0.0.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:00:55.860

在参考资料下，您将找到`System.Web.Mvc`参考资料

![在此处输入图像描述](../Images/20550569155fa1b45fa44d7dfb70a4b0.png)

删除此参考并添加更高版本的新参考，即`4.x`

![在此处输入图像描述](../Images/fe6d303fddccb7e062af9985a7b6dbed.png)

# performance - 评分算法

> ID：13227946
> 
> 赞同：-1
> 
> 时间：2012-11-05T07:45:41.687
> 
> 标签：performance, algorithm, rating

我正在尝试为我正在开发的应用程序开发评级系统。基本上，应用程序允许您从 1 到 5（以星表示）对**对象进行评分。**但我当然知道，保持评分计数并将评分添加到数字本身是**不可行**的。

所以我想到的第一件事就是**将收到的评分除以给出的总评分。**例如，如果对象已从用户那里获得评分 2，并且该对象被评分的次数为 100，则可能会添加 2/100。但是我认为这种方法还不够好，因为 1) 一种天真的方法 2) 为了让我获得该对象被评级的次数，我必须在 db 上进行查找，这可能最终具有时间复杂度 O( n)

所以我想知道有什么替代方法和可能**更好**的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:51:22.123

您可以在 DB 2 中保留附加值 - 评级的次数和所有评级的总和。这种更新对象评级的方法只需要：

1.  将新评级添加到总和。
2.  将总和除以评分的总次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:54:26.860

有很多方法可以解决这个问题，但在此之前检查

1.  如果所有反馈提供者同等对待或某些人比其他人更重要（如小组审查等）
2.  如果目标是仅提供平均值或任何分数带等。考虑像这个网站这样的场景 - 显示总声誉分数
3.  是的 - 如果要计算平均值，你需要有反馈的总数和数量，然后必须计算它 - 这就是简单的数学。但是，如果您需要任何其他方法，请为更多的计算周期做好准备。数据库命中和计算周期之间的平衡，但这是设计的下一个阶段。首先确定您的要求和解决方案的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:58:13.553

我认为你应该为 1 星、2 星、...保留单独的计数器来计算评级，你必须计算`rating = (1*numOneStars+2*numTwoStars+3*numThreeStars+4*numFourStars+5*numFiveStars)/numOneStars+numTwoStars+numThreeStars+numFourStars+numFiveStars)`

这样你就可以像亚马逊一样显示有多少人投了 1 星，有多少人投了 5 星...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:32:39.897

您是否考虑过对星星数量进行投票赞成/反对的机制？它不能直接解决您的问题，但值得注意的是，YouTube、Facebook、StackOverflow 等其他网站都使用 +/- 投票，因为它通常比基于星级的评级更有效。

# java - 如何检查android中事件的更新？

> ID：13227952
> 
> 赞同：0
> 
> 时间：2012-11-05T07:46:30.187
> 
> 标签：java, android

我的应用程序具有以下模块，

1.  收集用户CB位置码。
2.  要将其保存在用户选择的数据库中，例如我的 CB 代码是 465783，我可以将其保存为数据库中的“学院”。
3.  为了提供警报功能，在这个模块中，我可以提供一个文本输入，说我将它作为“学院”，并且如果值学院匹配，则当单元广播更新时发出警报。

现在，在我下面的代码中，我已经实现了前 2 个模块以及所需的数据库条目、数据库搜索等，我无法读取更新的 CB 位置值。

```
public class Alarm extends MainActivity {

public String str;

public void onReceive(Context context, Intent intent) {
    //---get the CB message passed in---
    Bundle bundle = intent.getExtras();        
    SmsCbMessage[] msgs = null;
    str = "";            
    if (bundle != null)  {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsCbMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++) {
            msgs[i] = SmsCbMessage.createFromPdu((byte[])pdus[i]);                
            str += "CB " + msgs[i].getGeographicalScope() + msgs[i].getMessageCode() + msgs[i].getMessageIdentifier() + msgs[i].getUpdateNumber();                     
            str += " :";
            str += "\n";        
        }
        }
        }

EditText user_value;
Button startalarm;
Button stopalarm;

/** Called when the activity is first created. */
@Override
 public void onCreate(Bundle savedInstanceState) 
{
 super.onCreate(savedInstanceState);
 setContentView(R.layout.third);

 startalarm = (Button) findViewById(R.id.startalarm);
 stopalarm = (Button) findViewById(R.id.stopalarm);
user_value = (EditText) findViewById(R.id.user_value);

final Ringtone ringtone;
ringtone = RingtoneManager.getRingtone(getBaseContext(),     RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE));

startalarm.setOnClickListener(new View.OnClickListener() 
{

public void onClick(View arg0)
{
        // TODO Auto-generated method stub
if(user_value.length()==0)
{
    Toast.makeText(getBaseContext(), "Please enter a value.", Toast.LENGTH_LONG).show();
}

    Toast.makeText(getApplicationContext(), "alarm set", Toast.LENGTH_LONG).show();

//I want my alarm event to be started from here whenever a new CB sms arrives.

SQLiteDatabase aa = openOrCreateDatabase("MLIdata", MODE_WORLD_READABLE, null);
    Cursor c = aa.rawQuery("SELECT CblocationName FROM MLITable WHERE CblocationCode = '"+str+"'", null);
    c.moveToFirst();
    c.getString(c.getColumnIndex("CblocationName"));
    String sas = user_value.getText().toString();
    if(sas.equals(c.getString(c.getColumnIndex("CblocationName"))))
    {
        //here comes the alarm code

        if(ringtone == null)
        {
            Log.d("Debug", "ringtone is null");
        }
        else
        {
            ringtone.play();

        }
    }
}

});

stopalarm.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
    // TODO Auto-generated method stub
    ringtone.stop();
}
});
}
} 
```

详细说明：每当用户进入新的塔位置时，他都会从塔中获取更新的小区广播消息，因此当此 cbsms 到达时，我需要开始检索 CB 区号并将其与我的区号数据库（其中显然有用户设置的相应区号名称）并且当用户给定区名的相应区号与我当前的区号匹配时，需要启动警报，这里我无法检测到更新的位置。

如果我的问题陈述需要进一步解释，请发表评论。

从下面收到的评论中，我推断我需要一个接收器类，我为我的小部件创建了一个具有相同功能的小部件（在小部件上显示 Cb 位置代码），现在我不知道如何激活在我的应用程序中。

我的 WidgetReceiver.java

```
public class CbReceiver extends BroadcastReceiver
    {

        public void onReceive(Context context, Intent intent) {
            //---get the CB message passed in---
            Bundle bundle = intent.getExtras();        
            SmsCbMessage[] msgs = null;
            String str = "";            
            if (bundle != null)  {
                //---retrieve the SMS message received---
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsCbMessage[pdus.length];            
                for (int i=0; i<msgs.length; i++) {
                    msgs[i] = SmsCbMessage.createFromPdu((byte[])pdus[i]);                
                    str += "CB " + msgs[i].getGeographicalScope() + msgs[i].getMessageCode() + msgs[i].getMessageIdentifier() + msgs[i].getUpdateNumber();                     
                    str += " :";
                    str += msgs[i].getMessageBody().toString();
                    str += "\n";       

                abortBroadcast();
                Toast.makeText(context, str, Toast.LENGTH_LONG).show();

                    AppWidgetManager appWidgetManager =     AppWidgetManager.getInstance(context);
            RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget);
            ComponentName thisWidget = new ComponentName(context,MyWidget.class);
            remoteViews.setTextViewText(R.id.update,str);
            appWidgetManager.updateAppWidget(thisWidget, remoteViews);

        }                         
    }}
} 
```

需要帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:27:39.990

1.  从您的接收器开始您的活动，以更换塔。使用 Intent 从接收器开始您的活动。示例：请参阅此警报示例以了解以上几点，[警报示例](http://code4reference.com/2012/07/tutorial-on-android-alarmmanager/)

2.  在 Android Manifest.xml 中注册您的接收器。

3.  从接收器类发送广播消息也会更新接收器内的数据库。
4.  在你的活动中抓住同样的东西。您可以为此使用自定义广播。
5.  现在激活您的活动警报。

希望这些步骤对您有所帮助。参考我提到的例子。

# ios - 靠近屏幕边缘放置 ccmenuitem 的触摸精度较低

> ID：13227966
> 
> 赞同：0
> 
> 时间：2012-11-05T07:47:28.390
> 
> 标签：ios, cocos2d-iphone, ios6, iphone-5, ccmenuitem

当我尝试在 iTouch 5 上构建和运行我的游戏（基于 Cocos2d 1.0.1，内置 Xcode 4.5 和 iOS 6.0 SDK）时，我发现 CCMenuItems 行为不正常：当菜单项与屏幕边缘相邻时，边缘边框似乎不太容易在里面被点击来响应触摸事件（对不起我的糟糕表达）。

为了演示这个问题，我用 Cocos2d 模板用 Xcode 4.3 编写了一个 demo 应用程序，只是修改了 HelloWorldLayer 的 init 方法，现象仍然存在。代码如下：

```
 -(void) init
    {
            // always call "super" init
            // Apple recommends to re-assign "self" with the "super" return value
            if( (self=[super init])) {

            CCLayerColor *cl = [CCLayerColor layerWithColor:ccc4(ccWHITE.r, ccWHITE.g, ccWHITE.b, 255)];
            [self addChild:cl];
                    // create and initialize a Label
                    CCLabelTTF *label = [CCLabelTTF labelWithString:@"Hello World" fontName:@"Marker Felt" fontSize:64];

                    // ask director the the window size
                    CGSize size = [[CCDirector sharedDirector] winSize];

                    // position the label on the center of the screen
                    label.position =  ccp( size.width /2 , size.height/2 );

                    // add the label as a child to this Layer
                    [self addChild: label];

                    float width = 160;

                    CCSprite *sp1 = [CCSprite node];
                    [sp1 setContentSize:CGSizeMake(width, width)];
                    [sp1 setTextureRect:CGRectMake(0, 0, width, width)];
                    [sp1 setColor:ccc3(0xff, 0xff, 0)];

                    CCSprite *sp2 = [CCSprite node];
                    [sp2 setContentSize:CGSizeMake(width, width)];
                    [sp2 setTextureRect:CGRectMake(0, 0, width, width)];
                    [sp2 setColor:ccc3(0, 0, 0xff)];

                    CCMenuItemSprite *button = [CCMenuItemSprite itemFromNormalSprite:sp1 selectedSprite:sp2 target:nil selector:nil];
                    CCMenu *menu = [CCMenu menuWithItems:button, nil];
                    [self addChild:menu];
                    menu.position = ccp(0, 0);
                    button.anchorPoint = ccp(1, 1);
                    button.position = ccp([[CCDirector sharedDirector] winSize].width,
                                  [[CCDirector sharedDirector] winSize].height);

            }
            return self;
    } 
```

我查看了整个互联网并且没有运气，不知道有人可以帮助我。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T23:59:26.013

只是一些预感：

*   避免设置精灵 contentSizes。它们应该是自动设置的，并且可以被 CCMenu 使用。
*   确保不要更改 CCMenuItem 的位置或锚点。也不要更改 CCMenu 的 anchorPoint。这会弄乱触摸检测。仅使用 CCMenu 的位置属性。
*   确保项目中其他地方没有其他触摸代码干扰并可能吞食触摸。手势识别器也可能导致 CCMenu 行为不端。

如果您想自由放置菜单项，请确保将每个菜单项包装在 CCMenu 节点中。然后您可以通过菜单定位项目。

# browser - 使用浏览器时触发多个请求，但使用 java httpclient 时未触发

> ID：13227967
> 
> 赞同：0
> 
> 时间：2012-11-05T07:47:33.417
> 
> 标签：browser, apache-httpclient-4.x

这是我的应用程序云环境。我有带有粘性会话的 ELB -> 2 HA 代理 -> 1 台机器，它们在 jboss 上托管我的应用程序。

我正在处理一个需要超过 1 分钟的请求。我在处理请求开始时记录 IP 地址。当我通过浏览器处理此请求时，我看到重复请求在 1 分几秒后被记录。如果第一个请求路由来自 HAProxy1，那么另一个请求路由来自 HAProxy2。在浏览器上，我在 2.1 分钟后收到 HttpStatus=0 响应

我的假设是 ELB 触发了这个重复请求。请帮助我验证这个假设。

当我使用 Apache Http 客户端处理相同的请求时，我没有看到触发重复请求。我也在 1 分几秒后得到异常。org.apache.http.NoHttpResponseException：目标服务器响应失败

请帮助我了解这里发生了什么。-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T18:19:43.643

通过 ELB，我认为您指的是 Amazon AWS 的弹性负载均衡器。

Elastic Load Balancer 的内置请求超时时间为 60 秒，无法更改。浏览器具有智能重试逻辑，因此您会看到两个请求，但您的服务器应该将它们作为两个独立的不相关请求进行处理，因此这实际上使事情变得更糟。使用httpclient，超时导致NoHttpResponseException，不使用重试。

解决方案是要么提高你的请求在服务器上的性能，要么让初始请求触发一个后台任务，然后一个补充请求（可能使用 AJAX）轮询完成。

# python - 如何有效地删除大文件中间的一行？

> ID：13227970
> 
> 赞同：0
> 
> 时间：2012-11-05T07:47:53.447
> 
> 标签：python, file, python-2.7

> **可能重复：**
> [在 Python 中从大文件中删除一行的最快方法](https://stackoverflow.com/questions/2329417/fastest-way-to-delete-a-line-from-large-file-in-python)
> [如何在不覆盖所有内容的情况下编辑 txt 文件中间的一行？](https://stackoverflow.com/questions/8868499/how-to-edit-a-line-in-middle-of-txt-file-without-overwriting-everything)

我知道我可以将每一行读入一个列表，删除一行，然后将列表写回。

但是文件很大，有没有办法把文件中间的一部分去掉，不用重写整个文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T08:07:16.250

我不知道是否有一种方法可以就地更改文件，即使使用低级文件系统命令，但您不需要将其加载到列表中，因此您可以在不占用大量内存的情况下执行此操作：

```
with open('input_file', 'r') as input_file:
    with open('output_file', 'w') as output_file:
        for line in input_file:
            if should_delete(line):
                pass
            else:
                output_file.write(line) 
```

这假设您要删除的部分是文本文件中的一行，这`should_delete`是一个确定是否应保留或删除该行的函数。可以很容易地稍微改变它来使用二进制文件，或者使用计数器而不是函数。

**编辑：** 如果您正在处理二进制文件，您知道要删除的确切位置，并且它不太靠近文件的开头，您可以稍微优化它`io.IOBase.truncate`（参见[http://docs. python.org/2/library/io.html#io.IOBase](http://docs.python.org/2/library/io.html#io.IOBase) )。但是，我只建议在分析器表明您确实需要优化到这种程度时才进行此操作。

# android - ExpandabeListView 在 android 中不支持 ChildClickListener

> ID：13227973
> 
> 赞同：3
> 
> 时间：2012-11-05T07:48:12.353
> 
> 标签：android, android-widget

我正在使用可扩展列表视图根据南、北、东、中心显示印度的状态。状态列表显示类似，但是当将 onChildclickListener 应用于 expandableListView 时没有响应。我希望在单击印度状态时打开一个新活动。

1.  **可展开的列表视图**

    ```
     <ExpandableListView
     android:id="@+id/indiaParts"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:groupIndicator="@null"
     android:listSelector="@null"
     android:scrollbars="none"
    /> 
    ```

2.  **list_group.xml**

    ```
     <?xml version="1.0" encoding="utf-8"?>
     <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/group_header_bg"
    android:gravity="center_vertical" 
     >

    <ImageView
        android:id="@+id/tag_img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="10dip"
        android:src="@drawable/group_down"       
      />

    <TextView
        android:id="@+id/group_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="10dip"
        android:text="Sample"
        android:textColor="#FFFFFF"
        android:textSize="18dip"
        android:textStyle="bold"
        /> 
    ```

3.  **list_group_item.xml**

    ```
     <?xml version="1.0" encoding="utf-8"?>
       <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="@drawable/group_item_normal"
      android:id="@+id/groupItem"
      android:clickable="true"
      >

        <TextView
            android:id="@+id/item_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="15dip"
            android:text="sample"
            android:textColor="#000000"
            android:textSize="20sp"
            android:layout_gravity="center" 
            android:gravity="center"
            />

      </LinearLayout> 
    ```

4.  **适配器类**

    ```
     public class ExpandableListAdapter extends BaseExpandableListAdapter {

    private Context mContext;
    private ExpandableListView mExpandableListView;
    private ArrayList <GroupEntity> mGroupCollection;
    private int[] groupStatus;

    public ExpandableListAdapter(Context pContext,
            ExpandableListView pExpandableListView,
            ArrayList<GroupEntity> pGroupCollection) {
        mContext = pContext;
        mGroupCollection = pGroupCollection;
        mExpandableListView = pExpandableListView;
        groupStatus = new int[mGroupCollection.size()];

        setListEvent();
    }

    private void setListEvent() {

        mExpandableListView
                .setOnGroupExpandListener(new OnGroupExpandListener() {

                    @Override
                    public void onGroupExpand(int arg0) {
                        // TODO Auto-generated method stub
                        groupStatus[arg0] = 1;
                    }
                });

        mExpandableListView
                .setOnGroupCollapseListener(new OnGroupCollapseListener() {

                    @Override
                    public void onGroupCollapse(int arg0) {
                        // TODO Auto-generated method stub
                        groupStatus[arg0] = 0;
                    }
                });

    }

    @Override
    public String getChild(int arg0, int arg1) {
        // TODO Auto-generated method stub
        return mGroupCollection.get(arg0).getStatesList().get(arg1).getStateName();
    }

    @Override
    public long getChildId(int arg0, int arg1) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getChildView(int arg0, int arg1, boolean arg2, View arg3,
            ViewGroup arg4) {
        // TODO Auto-generated method stub

        ChildHolder childHolder;
        if (arg3 == null) {
            arg3 = LayoutInflater.from(mContext).inflate(
                    R.layout.list_group_item, null);

            childHolder = new ChildHolder();

            childHolder.title = (TextView) arg3.findViewById(R.id.item_title);
            arg3.setTag(childHolder);
        }else {
            childHolder = (ChildHolder) arg3.getTag();
        }

        childHolder.title.setText(mGroupCollection.get(arg0).getStatesList().get(arg1).getStateName());
        return arg3;
    }

    @Override
    public int getChildrenCount(int arg0) {
        // TODO Auto-generated method stub
        return mGroupCollection.get(arg0).getStatesList().size();
    }

    @Override
    public Object getGroup(int arg0) {
        // TODO Auto-generated method stub
        return mGroupCollection.get(arg0);
    }

    @Override
    public int getGroupCount() {
        // TODO Auto-generated method stub
        return mGroupCollection.size();
    }

    @Override
    public long getGroupId(int arg0) {
        // TODO Auto-generated method stub
        return arg0;
    }

    @Override
    public View getGroupView(int arg0, boolean arg1, View arg2, ViewGroup arg3) {
        // TODO Auto-generated method stub
        GroupHolder groupHolder;
        if (arg2 == null) {
            arg2 = LayoutInflater.from(mContext).inflate(R.layout.list_group,
                    null);
            groupHolder = new GroupHolder();
            groupHolder.img = (ImageView) arg2.findViewById(R.id.tag_img);
            groupHolder.title = (TextView) arg2.findViewById(R.id.group_title);
            arg2.setTag(groupHolder);
        } else {
            groupHolder = (GroupHolder) arg2.getTag();
        }
        if (groupStatus[arg0] == 0) {
            groupHolder.img.setImageResource(R.drawable.group_down);
        } else {
            groupHolder.img.setImageResource(R.drawable.group_up);
        }
        groupHolder.title.setText(mGroupCollection.get(arg0).getGroupName());

        return arg2;
    }

    class GroupHolder {
        ImageView img;
        TextView title;
    }

    class ChildHolder {
        TextView title;
    }

    @Override
    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return true;
    }

    @Override
    public boolean isChildSelectable(int arg0, int arg1) {
        // TODO Auto-generated method stub
        System.out.println("vcvv.........."+true);
        return true;
    } 
    ```

    }

5.  **活动课**

    ```
     expandableListView=(ExpandableListView) findViewById(R.id.indiaParts);

        expandableListAdapter=new ExpandableListAdapter(StatesScreen.this, expandableListView, groupEntityList);
        expandableListView.setAdapter(expandableListAdapter);

        expandableListView.setOnChildClickListener(new OnChildClickListener() {

            @Override
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                // TODO Auto-generated method stub
                Toast.makeText(StatesScreen.this, "Hi click",Toast.LENGTH_LONG).show();
                System.out.println("clicked..............////."+groupPosition);
                Intent categoryList=new Intent(StatesScreen.this,CategoryList.class);
                startActivity(categoryList);
                return false;
            }
        }); 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:27:46.763

出现此问题后，您的孩子的 View 有自己的可聚焦元素。您可以通过从子布局中删除 android:clickable 或设置为 false 来删除它：

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:background="@drawable/group_item_normal"
  android:id="@+id/groupItem"
  <!-- remove clickable from here -->
  <!-- or android:clickable="false" -->
  > 
```

如果您的子元素没有任何可单击和可聚焦的元素，则可以使用标准的 ListView 可聚焦元素。

对不起，我的英语不好

# cocos2d-iphone - 从 45 度精灵到每一度的精灵径向插值

> ID：13227978
> 
> 赞同：0
> 
> 时间：2012-11-05T07:48:42.447
> 
> 标签：cocos2d-iphone, sprite, interpolation, sprite-sheet

如果可能的话，如何做到这一点的问题。

我在以下每个方向都有精灵（上、下、左、右、直立、左上、右下和左下）。我正在制作一个与旧学校塞尔达类似的游戏，围绕瓷砖地图运行（使用平铺编辑器）。这运作良好，直到现在，我希望能够在地图上的任何位置射箭/咒语。我可以这样做，但是图形看起来很糟糕，因为我的家伙每转 45 度。

我已经纠正了这一点，所以我只能朝我的家伙面对的方向射击，但现在如果他们与我的角度不是 45 度角，我就无法击中他们。为了解决这个问题，我需要每 1 度有一个精灵，或者以某种方式组合 0 度（向上）和 45 度（直立）的图像，以便能够通过插值获得 10 度。这可能吗？关于如何做到这一点的任何想法？

我正在研究使用关键动画，因为我不必拥有这么多精灵并使用更少的视频内存（以及更流畅的动画），但我仍然遇到同样的问题。想知道这在概念上是否可行，如果可以，非常感谢一些伪代码或snipit。

另一个问题，如果可能的话，我是否需要通过 3D 的 openGL 来渲染它？真的不知道 3d 是否会在 2d（正交图块）游戏中有所帮助，但它可能有助于使咒语看起来像是向下掉落，而不是从上到下穿过图块？

# ruby-on-rails - 在rails 3.2中带有单选按钮的fields_for

> ID：13227980
> 
> 赞同：1
> 
> 时间：2012-11-05T07:48:46.167
> 
> 标签：ruby-on-rails, radio-button, nested-attributes, fields-for

我目前确实有一个活动注册表格，注册表格中的参与者数量不限，因此您可以通过 javascript 附加表单，我从第一个必须参与者的 fields_for 生成器中复制了该表单。

现在我有一个性别字段，它被称为：性别，和其他 10 个其他个人数据的输入一样。

然而，性别字段是唯一不为每个参与者发送的字段。该字段只是丢失。

fields_for 助手将其命名为例如：

```
event[participants][][email]
event[participants][][gender] 
```

当我添加 3 个参与者时，我得到一个数组，例如：

```
[{email: email1, gender: male}, {email:email2}, {email:email3}] 
```

设置为导轨。

由于单选按钮按其名称分组，我想我可以将索引添加到空括号中，让它像

```
event[participants][1][gender] 
```

对于第 2 位参与者。

这将导致

```
ERROR TypeError: expected Array (got Rack::Utils::KeySpaceConstrainedParams) for param `participants' 
```

在韦布里克。

我对如何继续感到有些困惑，可能给所有输入提供索引，这感觉一点也不像 rails-way。

有什么建议如何让它工作吗？我的目标是为每个参与者发送性别。

最好的问候和感谢，丹尼尔

代码，简化：

表格：

```
= form_for @signup do |f|
    - participant_count = @signup.participants.count
    - @signup.participants.each_with_index do |participant,index|
      = f.fields_for "participants[]", participant do |p|
      = render :partial=>'participant_form', |
        :locals=>{:p=>p, :participant=>participant, :index=>index, :participant_count => participant_count} 
```

_participant-partial，用于一个有效的输入和性别：

```
%table
  %tr
   %th
    Gender / Only sent for the first participant:(
    %span *
  %td
    =p.radio_button :gender, 'male'
    %span  Male
    =p.radio_button :gender, 'female'
    %span Female

%tr
  %th
    Name
    %span *
  %td
    = p.text_field :first_name / this works just fine! for EACH participant. 
```

生成此 html 代码：

```
 <input id="event_participants__first_name" name="event[participants][][first_name]" size="30" type="text" value="" />
  and
 <input id="event_participants__gender_male" name="event[participants][][gender]" style="float:left; margin-right: 20px;" type="radio" value="male">
  for each participant. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:42:09.620

好的，因为单选按钮需要按它们的名称分组——这就是它们的意义——我不得不在这里破解我的方式。

在我的解决方案中，我刚刚添加了一些与数组无关的索引单选按钮，它们触发了一个 javascript 函数，该函数设置了正确的数组隐藏字段的值，该字段是之前的单选按钮。

作品。

# c - 可以在另一个文件中使用 extern 访问静态声明的全局变量吗？

> ID：13227986
> 
> 赞同：4
> 
> 时间：2012-11-05T07:49:13.520
> 
> 标签：c, static, global

我怀疑我是否用静态声明了全局变量。

## 文件1.c

```
static int a=5;

main()
{
   func();
} 
```

可以使用 extern 在另一个 file2.c 中访问吗？

## 文件2.c

```
func()
{
   extern int a;
   printf(a);
} 
```

还是只能使用 extern 访问没有静态声明的全局变量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T07:50:37.110

不！
`static`将变量的范围限制为相同的**[翻译单元](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)**。
`static`给变量一个**[内部链接](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)**，并且这个变量不能在创建的翻译单元之外访问。

如果您需要访问不同文件中的变量，只需删除`static`关键字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T07:52:08.970

没有。file1.c 中的A`a`用*内部链接*命名一个变量。来自不同翻译单元的相同名称将引用不同的变量。这也可能有*内部链接*，或者它可能（如在本例中）有*外部链接*。

但是，在同一个文件中，您可以通过*内部链接*引用文件范围变量`extern`。

```
static int a;

int main(void) {
    extern int a; // still has internal linkage
    printf("%d\n", a);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T07:56:44.543

这似乎是对static的两种含义的误解：

*   对于全局声明，静态意味着对翻译单元的限制，因此静态正是为了防止您尝试做的事情
*   对于局部变量 static 是一个存储类，这意味着变量在函数调用之间保持其值。对于全局变量（在模块级别，即在函数之外），情况总是如此，因此不需要静态。

# joomla - 将页面标题放在图像上

> ID：13227987
> 
> 赞同：1
> 
> 时间：2012-11-05T07:49:27.813
> 
> 标签：joomla, joomla2.5

我想在自定义 Joomla 网站的内容标签顶部放置一张*图片*`<div>`，然后将*页面标题*放在图片顶部。该网站目前正在本地开发，所以对不起，我没有任何链接。该网站的其余部分进展顺利，对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:34:45.733

您将不得不对您`index.php`的模板进行更改。

在 div 上方添加一个 div，`<div class="container">`然后您可以使用 db 调用`JFactory::getDBO()`并获取您想要的数据并将其显示在 div 中。

```
<div class="page-name"></div>
<div class="custom_div"></div>
<div class="content"></div>
<!-- rest of the index.php divs goes here --> 
```

如果您只想要首页中的特定 div，请使用以下代码。

```
<?php
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
        echo '<div></div>';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:49:19.773

我认为你让这变得比它需要的更难。首先，您可以通过在标题 div 中简单地添加一个模块位置（如果还没有）来在标题中添加图像。接下来，我假设您正在谈论 Joomla 文章的标题。这可以很容易地显示在组件区域中，然后使用 CSS 移动。你已经给了一个容器 div（内容）。只要您不指定内容和页面标题之间的 div 的位置属性，您就可以将标题绝对定位在内容 div 内的任何位置，包括您添加到标题中的图像顶部模块。

# iphone - 创建 ios 应用演示视频

> ID：13227993
> 
> 赞同：5
> 
> 时间：2012-11-05T07:50:13.570
> 
> 标签：iphone, ios

为 ios 应用程序录制视频的最佳方法是什么？我有一个业务应用程序，现在我想为我们的客户创建一些演示视频，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:52:56.770

如果您想在模拟器中执行此操作，Apple 的 quicktime 播放器可以选择记录屏幕活动。试试看。在一个空的背景下，启动你的模拟器并运行 quicktime 播放器。为了运行，转到文件菜单并启动新的屏幕录制选项。它有一个选项可以只选择屏幕的一部分。还有许多其他工具。检查[此链接。](http://mac.appstorm.net/roundups/utilities-roundups/10-screen-recording-tools-for-mac/)我使用 Snapz Pro X 在模拟器中录制 iOS 应用程序的视频。如果您想在设备中执行此操作，请[尝试此操作。](http://howto.cnet.com/8301-11310_39-57455241-285/you-can-now-record-your-ios-devices-screen-with-display-recorder/)

要以编程方式执行此操作，请[尝试此](http://codethink.no-ip.org/wordpress/archives/673).

在该代码中，更改

```
[self.layer renderInContext:context]; 
```

到

```
[[self.layer presentatationLayer] renderInContext:context]; 
```

# java - 如何制作平滑的相机跟随算法？

> ID：13227994
> 
> 赞同：21
> 
> 时间：2012-11-05T07:50:19.067
> 
> 标签：java, opengl, 2d, libgdx, smooth-scrolling

我正在使用 LibGDX (Java) 制作游戏。

我需要相机跟随一个快速移动的角色。最简单的方法就是这样写：

```
this.getCamera().position.set(obj.x, obj.y, 0); 
```

但是，有什么算法可以让这更流畅吗？就像镜头没那么严格，总是有点晚：角色快速向右，镜头跟随稍有延迟，或者如果你突然出现在很远的地方，镜头不会立即传送而是以最快的速度移动到你身边靠近它会放慢一点速度并再次找到你。

是否有任何 libgdx 库可以做到这一点或有人有这种经验？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-13T10:55:22.883

尝试一些简单的事情，比如 lerping 十分之一的距离。它的效果出奇的好。

```
float lerp = 0.1f;
Vector3 position = this.getCamera().position;
position.x += (Obj.x - position.x) * lerp * deltaTime;
position.y += (Obj.y - position.y) * lerp * deltaTime; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T14:25:45.063

看看 Aurelion Ribon 的[Java Universal Tween Engine](http://code.google.com/p/java-universal-tween-engine/)。这会执行插值并有几个缓动方程，我认为它们可以让你得到你想要的东西。它还具有其他高级功能，例如路标和将某些动作链接在一起以获得其他有趣的效果。

您的游戏逻辑可以检查角色是否快速移动或在位置方面是否有阶跃变化。作为对此的回应，将您当前的相机位置转移到补间引擎并让它接管 - 平滑地缩放到角色的当前位置。