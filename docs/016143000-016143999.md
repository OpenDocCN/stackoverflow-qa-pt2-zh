# StackOverflow 问答 16143000-16143999

# c# - C# load default data into CKEDITOR

> ID：16143000
> 
> 赞同：0
> 
> 时间：2013-04-22T08:53:58.820
> 
> 标签：c#, asp.net, ckeditor

I am currently looking for a way to load data into an instance of CKEDITOR using C# the examples I've seen online use jquery, but I need it for c#

my ckeditor looks like so:

```
<asp:TextBox ID="txtArt" runat="server" ></asp:TextBox>

    <script>
        CKEDITOR.replace('<%=txtArt.ClientID %>', {
            htmlEncodeOutput: false,
            height: '400px',
            width: '500px',
            resize_enabled: false,
            removePlugins: 'elementspath'
        });
</script> 
```

and I'm using this code in c#:

```
 public String Value
    {
        get
        {
            EnsureChildControls();
            return txtArt.Text;
        }
        set
        {
            EnsureChildControls();
            txtArt.Text = value;
        }
    }
    protected override void OnInit(EventArgs e)
    {
        if (!Page.ClientScript.IsClientScriptIncludeRegistered("ckeditor.js"))
        {
            Page.ClientScript.RegisterClientScriptInclude("ckeditor.js", "/ckeditor/ckeditor.js");
        }
        base.OnInit(e);
    } 
```

I know that loads the js file, and will save any text in the block, but how do I set default data in said block?

I've tried the normal

```
txtArt.Text = "Hello"; 
```

but that doesn't work. it loads up with empty fields. is there a way to do something like [How to add data to CKEditor using JQuery](https://stackoverflow.com/questions/2108354/how-to-add-data-to-ckeditor-using-jquery) ? or [How to load data into ckeditor onload](https://stackoverflow.com/questions/14150604/how-to-load-data-into-ckeditor-onload) ?

Please be advised, I'm trying to load data from a database. so my code on the .cs page is the code I need for the loading.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:14:33.050

If you are using CKEditor for ASP.NET it has the ASP.NET Control for easy integration. and you can register it as below:

```
<%@ Register Assembly="CKEditor.NET" Namespace="CKEditor.NET" TagPrefix="CKEditor" %> 
```

and place editor control in the body

```
<form id="form1" runat="server">
   <div>
     <CKEditor:CKEditorControl ID="CKEditor1" BasePath="/ckeditor/" runat="server"></CKEditor:CKEditorControl>
   </div>
</form> 
```

and in the code behind on page load or button click function set the content of editor like.

```
 CKEditor1.Text = "This is the text I want to set in CKEDITOR"; 
```

# codeigniter - 如何改进我的 Codeigniter 代码？

> ID：16143002
> 
> 赞同：0
> 
> 时间：2013-04-22T08:54:00.613
> 
> 标签：codeigniter

我在下面发布的代码工作正常，页面显示正确。

控制器：

```
class Articles extends Frontend_Controller {

    public function __construct() {
        parent::__construct();
        $this->homeMetaTags = $this->configOptionsModel->get(1);
        $this->bgimage = $this->configOptionsModel->get(2);
        $this->db->where('catid = "1"');
        $this->services = $this->articlesModel->get();
        $this->projects = $this->projectsModel->get();
    }

    public function displayArticle()
{

        $data['default_metatags'] = $this->homeMetaTags;
        $data['bgimage'] = $this->bgimage;
        $data['services'] = $this->services;
        $data['projects'] = $this->projects;
        $this->load->model('articlesModel');
        $artid = $this->uri->segment(3);
        $this->db->where('artid ='.$artid);
        $data['article'] = $this->articlesModel->get();
        $data['main_content'] = 'articles';
        $this->load->model('articlesImagesModel');
        $this->db->where('artid ='.$artid);
        $data['artimg'] = $this->articlesImagesModel->get();
    $this->load->view('frontEnd/template',$data);       
}
} 
```

看法：

```
<?php echo $article[0]['title'];?>
<?php echo $article[0]['articletext'];?> 
```

在地址栏中显示以下网址：

www.mysite.com/articles/displayArticle/3 到目前为止，一切都很好。

但是......如果我在地址栏中输入：www.mysite.com/articles/displayArticle/3546666

我没有被重定向到自定义 404 错误页面，而是收到以下错误：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined offset: 0
Filename: frontEnd/articles.php
Line Number: 12

A PHP Error was encountered
Severity: Notice
Message: Undefined offset: 0
Filename: frontEnd/articles.php
Line Number: 48 
```

果然，第 12 行和第 48 行是视图中的代码所在的两行。

我想如果有人键入不存在的 id 以重定向到 404 页面而不是看到这些错误。有人可以帮忙吗？

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:03:51.053

```
class Articles extends Frontend_Controller {

    public function __construct() {
        parent::__construct();
        $this->homeMetaTags     =   $this->configOptionsModel->get(1);
        $this->bgimage          =   $this->configOptionsModel->get(2);
        $this->db->where('catid',1);// What is this doing here. This should be in model
        $this->services         =   $this->articlesModel->get();
        $this->projects         =   $this->projectsModel->get();
    }

    public function displayArticle()
    {
        $this->load->model('articlesModel');
        $this->load->model('articlesImagesModel');

        $data['default_metatags']   =   $this->homeMetaTags;
        $data['bgimage']            =   $this->bgimage;
        $data['services']           =   $this->services;
        $data['projects']           =   $this->projects;

        $artid = $this->uri->segment(3);

        $this->db->where('artid',$artid);// What is this doing here. This should be in model

        $data['article']            =   $this->articlesModel->get();
        $data['main_content']       =   'articles';
        /*  What is it doing here */
        $this->db->where('artid ='.$artid);

        $data['artimg']             =   $this->articlesImagesModel->get();

        $this->load->view('frontEnd/template',$data);       
    }
} 
```

我假设当你打电话时`$this->articlesModel->get()`你正在返回 `row_array()`而不是`result_array()`. 该函数返回对象而不是对象数组。将模型更改`row_array()`为`result_array()`或在视图中

```
<?php echo $article['title'];?>
<?php echo $article['articletext'];?> 
```

这应该可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:06:08.477

尝试正确使用 View Model Controller 模型。当前，您正在控制器中检索数据库访问权限。我建议你看这个开始。 [http://www.youtube.com/watch?v=mWsAruzW3Jw](http://www.youtube.com/watch?v=mWsAruzW3Jw)

无论如何，要显示 404 页面，请使用以下命令：

```
show_404(); 
```

404处理程序：

```
 /**
* 404 Page Handler
*
* This function is similar to the show_error() function above
* However, instead of the standard error template it displays
* 404 errors.
*
* @access public
* @return void
*/
 function show_404($page = '', $log_error = TRUE)
 {
  $_error =& load_class('Exceptions', 'core');
  $_error->show_404($page, $log_error);
  exit;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:08:20.077

1) 你必须重构你的代码。模型代码不应与（get、where 函数）之类的控制器混淆。您应该通过传递一些值在模型本身中处理这个问题。

2) 在这一行 '$this->db->where('artid ='.$artid);' 您应该在传入此函数之前验证 $artid。

3) 如果您收到这样的错误消息，请使用 try catch 语句显示 404 页面。

4) 如果您要重定向到 404 页面，您应该正确记录错误以便稍后修复。

5）如果您需要通用功能，请将其保存在助手中并调用函数名称。不要将整个代码保留在构造函数中。这是最佳实践。

如果你还需要什么，可以问我。谢谢。我希望这能帮到您。

# jsf-2 - JSF2 Primefaces轮询div内的不同xhtml页面？

> ID：16143012
> 
> 赞同：1
> 
> 时间：2013-04-22T08:54:17.587
> 
> 标签：jsf-2, primefaces

是否可以使用轮询在具有 Primefaces 的 div 内使用不同的支持 bean 呈现不同的 xhtml 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:33:06.010

在循环中更新 bean 值不是正确的逻辑，因为它不会更新页面/div。您已经在特定间隔后刷新了 div，并且在其刷新时间，您将更新这些值。我建议您为此使用[primefaces ajax 池](http://www.primefaces.org/showcase/ui/poll.jsf)，您可以通过它在所需的间隔后刷新您的 div。

```
 <p:poll interval="3"   
    listener="#{renderBean.updatePagename}" update="whatEverYouWantToUpdate" /> 
```

在侦听器中，您可以更新您的 bean 值并可以解决您的渲染逻辑
另一种方法是，您可以使用 jquery 每 5 秒刷新一次 div
现在问题是，您需要捕获可以通过 javascript 轻松捕获的刷新事件
。是一个简短的例子

```
<script type="text/javascript">
var autoRefresh = setInterval(
function ()
{
$('#load_div').load('record_mypage').fadeIn("slow");
}, 5000); // refresh every 10000 milliseconds

<body>
<div id="load_div"> </div>
</body>

</script> 
```

现在，您将在每次刷新时更新 bean 值，并且页面将在您想要的 div 中更新。

# javascript - 如何将高度设置为单个 Ext 网格的行？

> ID：16143019
> 
> 赞同：0
> 
> 时间：2013-04-22T08:54:43.370
> 
> 标签：javascript, extjs

ExtJs 应用程序中有网格。
在一行中，我想显示一些大约 300 个符号的文本。所以我需要为这一行设置一个高度。
我发现了一些使用 ViewConfig[的示例：](https://stackoverflow.com/questions/7743714/how-to-set-grid-height-row-in-extjs)

```
viewConfig: {
    getRowClass: function (record, rowIndex, rp, store) {
        rp.tstyle += 'height: 50px;';
    }
} 
```

但我如何理解它对所有行的设定高度。但是如何只为一行做同样的事情呢？
另一个问题，它可能很疯狂，但是可以将备忘录放入网格单元中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:58:37.993

您可以询问正确的值（通常是 id）或 rowIndex 并且只为其设置：

```
viewConfig: {
    getRowClass: function (record, rowIndex, rp, store) {
        if(record.id == 439){ //id is some field from the store model
             rp.tstyle += 'height: 50px;';
        }

        //or
        if(rowIndex == 1){
             rp.tstyle += 'height: 50px;';
        }
    }
} 
```

# php - PHP 致命错误：内部 zval 不能是数组

> ID：16143022
> 
> 赞同：0
> 
> 时间：2013-04-22T08:54:53.590
> 
> 标签：php, iis

我在使用`IIS`服务器的 php yii 应用程序上收到此错误。我知道这是一个 PHP 错误，它是在像我这样使用 Windows 服务器时发生的。它始终出现在页面底部，但不会导致我的系统出现任何实际错误。有没有办法可以在没有任何更新的情况下删除它。即使这意味着以某种方式隐藏它？我什至不确定完整的错误是什么这是我得到的全部

```
PHP  Fatal  error:  Internal zval's  can't be  arrays, objects or resources in Unknown on line 0 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:13:36.210

我认为`Yii`应用程序建议`apache`作为网络服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:03:54.553

听起来像一个错误的扩展。

# spring - Jetty 和 tomcat 不加载 AbstractAnnotationConfigDispatcherServletInitializer 的实现

> ID：16143028
> 
> 赞同：4
> 
> 时间：2013-04-22T08:55:16.923
> 
> 标签：spring, maven, model-view-controller, tomcat, jetty

我有一个基于纯 java 配置的 Spring 3.2 应用程序。当我使用“mvn jetty:run”启动应用程序时，一切正常。但是当我在 Jetty(9.0.2) 或 Tomcat(7.0) 中部署战争文件时，我的战争文件中的 webapp 被部署，但它只为我的静态资产 (index.html) 提供服务，但不加载我的配置类. 看来，我的 AbstractAnnotationConfigDispatcherServletInitializer 实现未加载。

是否有一个特殊的配置标志来启用这个文件的扫描？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T14:02:19.017

我的问题是，在我的 Jetty-Standalone 配置中没有启用注释：http: [//www.eclipse.org/jetty/documentation/current/annotations.html#annotations-quick-setup](http://www.eclipse.org/jetty/documentation/current/annotations.html#annotations-quick-setup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-19T06:36:02.067

就我而言，`metadata-complete`在 web.xml 中是正确的。将其替换为 false 后，`AbstractAnnotationConfigDispatcherServletInitializer`调用

# css - 空字符串时div的最小高度

> ID：16143032
> 
> 赞同：2
> 
> 时间：2013-04-22T08:55:40.207
> 
> 标签：css, html

我想匹配 div 中的确切高度，无论它是否带有空字符串。以为我有它，但我意识到即使我可以设置最小高度，当它为空时我也会失去填充，所以会有一个小的偏移量。

应用这个似乎不起作用

```
.docDetails .description {
    min-height: 1em;
    padding: 2px;
} 
```

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:58:22.833

只需通过填充增加最小高度。

您可以通过将 2px 除以基本字体大小来计算 px-to-em 值。例如。2/16 = 0.125em。不要忘记将该值加倍。

```
.docDetails .description {
  min-height: 1.25em;
  padding: 2px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:04:07.773

您将最小高度值更改为像素。

> .docDetails .description { 最小高度：200px; 填充：2px；背景：#003366; }

# android - 亚马逊应用内支付

> ID：16143033
> 
> 赞同：5
> 
> 时间：2013-04-22T08:55:44.573
> 
> 标签：android, amazon

我已按照以下步骤操作，如图所示。在 AppPayment amazon 中的步骤，但问题是当我运行 sdk 中提供的代码时，如图 4 所示，当我单击按钮时，应扣除点击次数，但事实并非如此. 我在这些步骤中将以下值放在 string.xml mi 中吗？

```
 <string name="app_name">amazoncheckout</string>
 <string name="nothing"></string>
<string name="consumable_sku">com.amazon.checkout</string>
<string name="entitlement_sku_purple">com.amazoncheckoutconsumable</string>
<string name="entitlement_sku_green">com.amazoncheckoutentitlementn</string>
<string name="entitlement_sku_blue">com.amazon.buttonclicker.blue_button</string>
<string name="parent_subscription_sku">com.amazoncheckoutsubscription</string>
<string  name="child_subscription_sku_monthly">com.amazoncheckoutsubscriptionmonthly</string> 
```

![在此处输入图像描述](https://i.stack.imgur.com/4vETM.png)

上面的 sku 是我生成的，我也想知道图三中显示的 json 文件，我已经下载并放在了 assert 文件夹中。这个 json 文件是做什么用的？请对我错误的步骤提供评论...点击次数显示为5，但是当我点击它时没有扣除为什么？任何帮助将被应用....谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T08:21:14.830

我将尝试解释如何让演示工作，因为，我认为，这是你的问题，如果我错了，对不起......

1.  **在您的设备中安装 AmazonSDKTester.apk 并打开它**。它位于 SDK 包的工具文件夹中。要安装它，您可以在终端中使用：

    `adb install AmazonSDKTester.apk`

2.  **接下来将您的项目添加到 Eclipse**：

    `File > New > Project...>Android Project from Existing Code , browse the Button Clicker Demo Project in the SDK folder and Finish.`

3.  **将 amazon.sdktester.json 文件复制到 SD 内存**。在 ButtonClicker 项目文件夹中，转到 assets 文件夹并将 amazon.sdktester.json 文件添加到 SD 内存中。使用 DDMS 文件资源管理器将文件拖到 SD 文件夹的简单方法。您的 SD 文件夹可能因设备而异，在我的 Nexus S 中就像您在图像中看到的一样。

![在此处输入图像描述](https://i.stack.imgur.com/FNSTR.png)

就是这样，您必须让 Button Clicker Demo 示例完全正常工作。当您进行购买时，您可以前往 AmazonSDKTester 并查看您的所有购买。希望它可以帮助您并解决您的问题。

**更新：**

我将从开发人员文档中复制并粘贴一些文本[（请阅读此文档，因为它解释了所有内容）](https://developer.amazon.com/sdk/in-app-purchasing/documentation/testing-iap.html)，我希望这对您有所帮助：

> SDK Tester 是一种开发人员工具，它允许 Amazon 移动应用程序 SDK 的用户在将其提交给 Amazon 进行发布之前，在类似生产的环境中测试他们的实施。这将允许开发人员构建涵盖由 Amazon 移动应用 SDK API 生成的所有响应的测试用例，并让他们相信他们的应用将正确发布和运行。

这意味着，您必须使用 AmazonSDKTester.apk**在类似生产的环境中**进行测试，一旦它工作，您就可以提交您的应用程序以供发布。

> SDK 测试器使用 JavaScript Object Notation (JSON) 文本文件来包含用于响应 IAP API 调用的 IAP 项目信息。该文件位于包含被测应用程序和 SDK 测试器的设备上。创建后，该文件需要驻留在设备文件系统的路径下：/mnt/sdcard/amazon.sdktester.json

单击次数不会减少，因为单击按钮时会返回 SKU INVALID 消息（查看 logcat），因为在 sd 卡路径中找不到 .json 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T14:33:08.167

Even i had faced the same issue:

Here's how I got the In App purchases to work on Kindle Fire (after several hrs of struggle...)

1.adb install AmazonSDKTester.apk (Install SDKTester on Kindle Fire)

2.Create a file amazon.sdktester.json in the SDCARD directory (The connected KF shows up as SDCARD in Finder on ur Mac)

3.Contents of amazon.sdktester.json - { "com.yourcompany.yourpkgname.200_coins" : { "itemType": "CONSUMABLE", "price": 0.99, "title": "200 COINS", "description": "2 COINS", "smallIconUrl": "[http://www.yourcompany.com/icon.png](http://www.yourcompany.com/icon.png)" } }

4.Press the power button on KF & press "Disconnect" button - Now KF is no longer a mounted drive on ur Mac.

5.Run the AmazonSDKTester app on KF.

6.Run your app from Eclipse. Make sure the package name in the JSON matches the In App Item package name on Amazon's website & in the PurchasingManager.initiatePurchaseRequest("com.yourcompany.yourpkgname.200_coins");

7.Now you should see the In App interstitials showing up.

8.Still doesn't work - Force Close both ur app & AmazonSDKTester on KF; Hard Reset KF ; Restart Eclipse & Restart from Step 1

If you also want a video link you can follow this:

[VIDEO LINK](http://www.youtube.com/watch?v=E4WL-9WOI5Y&ytsession=Vq1tyugKRAxrTLzeJGDmuNbP-j_qjjxaGfTpxhq2NFsc0TUkw1lvuaMN3Y_bjFKlOkvuxAMX7tM9kGPlfAxxgHZDkzRjqBXU4Yuq9IHt-BL1oiCujW4k1iG8m5POtdGtJsvovhO1kNtBPfUdXUqot-3h546Wf5966PrXTEVNc8OKB5UedyiH4NuGbw9zkrocJmQK4dc95srk3lm_xa469sAVnT9-I4_KslJBUrO81TI0K2eIBIDMIKnJf3BpfHyUzPa2ism7wuuQSrPIyoSNbBBpZ6sLJ758vz0wXLVCMn-BLm5F4DA8DZHXyKVE95LA8OANg1V1wxRkj9zzIAnoSDZNSwuXzautbM-pgXoFOJmCyvN97OtilbgOvhawd2PCjp8AnSXLR76nCL70qaaS4Mas1IirfVpRPeDAEMiuXVMMM7Fz90yMv3TIVA10ykrAR45BXBtU1Je8dBzuW2V_YBHpan_9okz25y-uwd7CbZFZPHyHCespI386HYUwKSIzlMlVTQg9nr27wXbhVpnYzJbJ_mLNO1qNW9ygx_kEpTmJs5CRR8eYXwQiaXTg00_3oT8QRQzkKfRHF805Wbj_W5XdYBx-5pPnnNFIEuErawU)

Finally its very well explained in Developer website [Amazon Developer Link](https://developer.amazon.com/sdk/in-app-purchasing.html)

# angularjs - 如何在 AngularJS 中编写可折叠指令？

> ID：16143034
> 
> 赞同：1
> 
> 时间：2013-04-22T08:55:48.807
> 
> 标签：angularjs, angularjs-directive, angular-ui

我知道作为 UI Bootstrap 的一部分有一个可折叠的指令，但我想创建自己的一个（为了学习如何编写指令;-)）。

现在我有一个小概念问题。

最后，我想要的是：

```
<collapsible collapsed>
  <title>foo</title>
  <body>
    [...]
  </body>
</collapsible> 
```

该指令应该创建组件并显示它。到目前为止，一切都很好。我不明白的是如何访问这两个包含的部分`title`和`body`. 我已经看到有`ng-transclude`，但这会返回完整的内容。

如果我有两个单独的内容，如本例所示，该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:52:59.150

两个单独的内容意味着您必须从指令访问/修改 DOM。

一些提示（没有完整的解决方案，因为您想“编写自己的”；）

*   您将在指令中编写一个链接函数，其中范围和元素作为参数。

    > ```
    > link:  function(scope, element) { ... } 
    > ```

*   您将使用 $watch 知道何时必须隐藏/显示您的*身体*标签。

*   您将使用 angular.element 在您的*body*标签上添加和删除一个类并显示或隐藏它。

您还可以在 egghead.io 上查看有关 angular.element 的视频[25](http://egghead.io)。不是您问题的确切解决方案，但有些相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T08:53:34.997

您可以使用一些简单的 jQuery 方法来遍历 dom 中的 dom `$element`，但是您不会监听更改，因此如果此内容被异步更改，您的小部件将（可能）不会反映这些更改。

相反，您最好为每个属性（自定义 ng-transclude）手动执行 $compile 并将其注入您想要的位置，但是变量太多，很难给您一个具体的答案。

# php - 在最后一次出现特定字符之前获取字符串

> ID：16143037
> 
> 赞同：-1
> 
> 时间：2013-04-22T08:55:51.310
> 
> 标签：php

是否有简单且内置的 PHP 函数可以在最后一次出现“/”字符后删除所有字符串。例如我有字符串：

```
'js/jstree/_lib/jquery.js' 
```

我想要结果：

```
'js/jstree/_lib' 
```

这里斜线的数量是动态的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T08:57:36.363

使用 strrpos 和 substr 来获取从第一个字符到最后出现的 '/' 字符的子字符串

```
$original = 'js/jstree/_lib/jquery.js';
$short = substr($original, 0, strrpos($original, '/')); 
```

[http://www.php.net/manual/en/function.strrpos.php](http://www.php.net/manual/en/function.strrpos.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T08:58:43.400

```
echo dirname('js/jstree/_lib/jquery.js'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:58:08.573

如果它是您正在处理的具体路径信息，只需使用`pathinfo`函数：

```
$result = pathinfo($input, PATHINFO_DIRNAME); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:58:14.553

使用下面的代码：

```
$str = 'js/jstree/_lib/jquery.js'
print_r(explode('/', $str, -1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T09:04:41.620

```
$string = 'js/jstree/_lib/jquery.js';
$x = explode('/', $string, -1);
foreach($x as $y){
    $str1 .= '/'.$y;
}
echo $str1; 
```

# windows-phone-7 - 我从各种来源得知我无法在 Windows Phone 7 项目中导入 .dll 文件。那么实现我的目标的其他方法是什么

> ID：16143040
> 
> 赞同：0
> 
> 时间：2013-04-22T08:55:53.580
> 
> 标签：windows-phone-7

我正在开发一个实时 Windows Phone 应用程序。我必须加密我的数据才能通过用 C++ 编写的第三方 .dll 文件将其发布到服务器上。

我从各种来源得知我无法在 Windows Phone 7 项目中导入 .dll 文件。那么实现我的目标的其他方法是什么。此外，如果我有那个 .dll 文件的源代码，它将对我有多大帮助。

太谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:02:28.347

您绝对可以引用 dll 文件，但不是所有类型的。它必须是为 Windows Phone 或[Portable Class Library](http://msdn.microsoft.com/en-us/library/gg597391.aspx)制作的类库（这个可以被不同的平台使用）。

事实上，拥有源代码会很有帮助，您可以实现加密并制作自己的类库。

**编辑：**

[Andy Dent在这篇文章](https://stackoverflow.com/a/3826839/350749)中描述了在 Windows Phone 项目中使用 C++ 库的理论方法。这是可能的，但不是很舒服，因为大多数 C++ 代码都会抛出异常：`Operation could destabilize the runtime`.

另一种方法是用 C# 重写代码，但这意味着要重新编写几乎所有逻辑。

注意：如果您要为 Windows Phone 8 编写应用程序，则可以使用 C++ 引用而不会出现该问题。看看[这篇文章](http://www.jarredcapellman.com/2012/11/03/how-to-get-c-winrt-in-a-windows-phone-8-application/)。

# vhdl - VHDL - 为什么这个信号永远不会被驱动为低电平？

> ID：16143042
> 
> 赞同：0
> 
> 时间：2013-04-22T08:56:00.390
> 
> 标签：vhdl, synthesis, adc

我希望你能帮帮我！

我正在为 Spartan 3E 原型板编写一个程序，它将计算正弦输入信号的频率。由于我选择使用的 ADC 存在问题，我决定在内部生成这个信号，模拟来自 ADC 的输入。我现在的问题在于负责从模拟 ADC 中检索数据的模块。

整个系统按预期进行模拟，但是在合成时会生成大量警告。这些都追溯到我的芯片选择信号，它应该被驱动到大约 16KHz 的低电平。奇怪的是，综合工具没有产生警告，只是芯片选择一直很高这一事实的信息。

这是合成时生成的信息：

```
Xst:2679 - Register <int_CS> in unit <DataRetrieval> has a constant value of 1 during circuit operation. The register is replaced by logic. 
```

这是有问题的模块：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity DataRetrieval is
Port ( Reset : in  STD_LOGIC;
 C16MHz : in  STD_LOGIC;
       D_in : in  STD_LOGIC;
       CS : out  STD_LOGIC;
       D_clk : out  STD_LOGIC;
       Sample : out STD_LOGIC_VECTOR(7 downto 0));
end DataRetrieval;

architecture Behavioral of DataRetrieval is

signal bit_counter : Integer range 0 to 15;
signal D_reg : STD_LOGIC_VECTOR(15 downto 0);
signal clkDivide : Integer range 1 to 500;
signal int_CS : STD_LOGIC;
signal int_D_clk : STD_LOGIC;
signal edgeBit : STD_LOGIC;

begin

process (Reset, C16MHz, D_in, bit_counter, clkDivide, int_CS, edgeBit, int_D_clk)
begin
    if Reset = '1' then 
        clkDivide <= 1;
        bit_counter <= 15;
        D_reg <= (others => '0');
        Sample <= (others => '0');
        int_CS <= '1';
        edgeBit <= '0';
        int_D_clk <= '0';
    elsif rising_edge(C16MHz) then
        clkDivide <= clkDivide + 1;
        int_D_clk <= not int_D_clk;--8MHz data clock
        if clkDivide = 1000 then
            D_reg <= (others => '0');
            bit_counter <= 15;
            clkDivide <= 1;
            int_CS <= '0'; -- CS driven low here in order to allow time for conversion
        else
            if int_CS = '0' then
                if bit_counter = 0 then
                    D_reg(bit_counter) <= D_in;
                    int_CS <= '1';--disables ADC
                    Sample <= D_reg(11 downto 4);
                else
                    if edgeBit = '0' then
                        edgeBit <= '1';
                        D_reg(bit_counter) <= D_in;
                        bit_counter <= bit_counter - 1;
                    else
                        edgeBit <= '0';
                    end if;
                end if;
            end if;
        end if;
    end if;
end process;

 CS <= int_CS;
 D_clk <= int_D_clk;

end Behavioral; 
```

该模块使用 16MHz 时钟从模拟 ADC 中获取数据，方法是生成一个 8MHz 的数据时钟。时钟分频信号是一个将时钟速度降低到 16KHz 的计数器，它在每次计数结束时将芯片选择驱动为低电平，然后在为一个样本检索到所有数据后将其驱动为高电平。

根据综合工具，CS 永远不会被驱动为低电平，因此会被修整，这意味着系统的其余部分都没有功能。该模块无法自行正确合成，但可以进行模拟。

对此问题的任何意见将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:02:58.707

你声明

`signal clkDivide : Integer range 1 to 500;`

然后检查

`if clkDivide = 1000 then`

综合工具可能会实例化一个 9 位寄存器，`clkDivide`其值永远不会达到 1000。尝试将整数范围更改为 0 到 1024 或类似值。

# mercurial - Mercurial：列出在存储库上工作过的用户

> ID：16143044
> 
> 赞同：8
> 
> 时间：2013-04-22T08:56:04.047
> 
> 标签：mercurial

我通过 TortoiseHG 使用 Mercurial。我想看看哪些用户在存储库上工作过。最好只是一个唯一用户名的列表。但是，向下滚动（长）修订列表并注意每个名称是不切实际的。我可能可以用 grep 解决这个问题，但我在 Windows 上，更喜欢避免安装 Cygwin 或类似的。考虑到这些限制，有可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T09:36:34.747

如果您安装了 PowerShell，那么这可以解决问题：

```
hg log --template "{author}\n" | Select -Unique 
```

我当前的大约 5500 个变更集的存储库需要两到三秒钟。

# backbone.js - 从嵌套在模型中的 JSON 数组填充集合

> ID：16143045
> 
> 赞同：0
> 
> 时间：2013-04-22T08:56:07.767
> 
> 标签：backbone.js

我有一个名为主题的模型。主体的一个属性称为接收器，由一组对象组成。我想从对象数组中创建一个集合。

在主题视图中，我这样做：

```
var receivers = this.model.get('receivers'); 
```

在控制台中一切看起来都很好。正如预期的那样，receives 变量现在由五个对象组成。

然后我这样做：

```
var receiversCollection = new App.Collections.Receivers( receivers ); 
```

现在，当我检查 receiversCollection 时，它只包含两个奇怪的对象：

```
child {length: 2, models: Array[2], _byId: Object, constructor: function, model: function…} 
```

我究竟做错了什么？

编辑 - 附加信息包括在下面。

这些是我的定义：

```
App.Models.Receiver = Backbone.Model.extend({
    defaults: {
        first_name: '',
        last_name: '',
        email: '',
        location: '',
        created_at: null,
        updated_at: null
    }
});

App.Collections.Receivers = Backbone.Collection.extend({
    model: App.Models.Receiver
}); 
```

这是五个接收器在控制台中的样子：

```
0: Object
created_at: "0000-00-00 00:00:00"
email: "info@example.com"
first_name: "Adam"
id: "1"
last_name: "Bertilsson"
location: "Stockholm"
pivot: Object
updated_at: "2013-04-16 07:33:26"
__proto__: Object
1: Object
created_at: "0000-00-00 00:00:00"
email: "info@example.com"
first_name: "Sven"
id: "2"
last_name: "Svensson"
location: "Uppsala"
pivot: Object
updated_at: "0000-00-00 00:00:00"
__proto__: Object
2: Object
created_at: "0000-00-00 00:00:00"
email: "info@example.com"
first_name: "Adam"
id: "1"
last_name: "Bertilsson"
location: "Stockholm"
pivot: Object
updated_at: "2013-04-16 07:33:26"
__proto__: Object
3: Object
created_at: "0000-00-00 00:00:00"
email: "info@example.com"
first_name: "Adam"
id: "1"
last_name: "Bertilsson"
location: "Stockholm"
pivot: Object
updated_at: "2013-04-16 07:33:26"
__proto__: Object
4: Object
created_at: "0000-00-00 00:00:00"
email: "info@example.com"
first_name: "Sven"
id: "2"
last_name: "Svensson"
location: "Uppsala"
pivot: Object
updated_at: "0000-00-00 00:00:00"
__proto__: Object
length: 5
__proto__: Array[0] 
```

这就是控制台中的 receiversCollection 的样子：

```
_byId: Object
  1: child
  2: child
  c56: child
  c57: child
  __proto__: Object
length: 2
models: Array[2]
  0: child
  1: child
  length: 2
  __proto__: Array[0]
__proto__: Surrogate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:16:31.587

这里的问题是因为**Duplicated Id's 。**

```
Id's must be unique.. 
```

在创建集合时，它会浏览 ，正如集合中`id's`的前 2 个模型一样`unique id still not present`，它们被添加。

其他的将被忽略，因为具有该 id 的模型已经存在于集合中。

尝试编辑模型的 id，瞧，您将在集合中看到 5 个模型。

# php - 带有条件注释的 clientScript 包

> ID：16143048
> 
> 赞同：0
> 
> 时间：2013-04-22T08:56:34.983
> 
> 标签：php, yii, assets, conditional-comments, clientscript

搜索了很多无济于事后，我想知道是否有一种方法可以将 JS 和 CSS 文件分配给带有条件语句的包（即`<!--[if lte ie 7]>`）。

**我想要这样的东西：**

```
$packages['my-package'] = array(
    'basePath'=>'path.to.my-package',
    'css'=>array('css/style.css'),
    'js'=>array('js/file-to-load-conditionally.js'=>'<!--[if lte ie 7]>%s<![endif]-->')
);

foreach ($packages as $name => $package):
    Yii::app()->clientScript->addPackage($name, $package);
endforeach; 
```

这是否已经实施，即将实施或有人知道解决此问题的另一种方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:17:07.687

Yii 将不支持此功能。你可以在这里找到官方声明：

[https://code.google.com/p/yii/issues/detail?id=1240#c21](https://code.google.com/p/yii/issues/detail?id=1240#c21)

# python - Jinja2 中的稳定排序

> ID：16143053
> 
> 赞同：5
> 
> 时间：2013-04-22T08:56:50.110
> 
> 标签：python, jinja2

可以在 Jinja2 中连续应用[排序过滤器](http://jinja.pocoo.org/docs/templates/#sort)，先按一个属性对列表进行排序，然后再按另一个属性排序？这似乎是一件很自然的事情，但在我的测试中，前面的排序完全不稳定，所有排序都丢失了。

在将列表传递给模板之前，我已经通过首先在 python 中排序来解决它，但我想知道是否可以在 Jinja2 中对“稳定”进行排序。

我应用过滤器的方式是这样的：

```
{{ item_list|sort(attribute='value')|sort(attribute='color') }} 
```

我希望看到的是按 排序的列表`color`，其中的元素共享按 排序的颜色`value`。相反，它看起来就像`value`这种事情从未发生过一样。

例如，从此列表中：

```
2 red
3 blue
3 red
2 blue
1 blue
4 red 
```

我想要这样的东西：

```
1 blue
2 blue
3 blue
2 red
3 red
4 red 
```

我查看了[groupby](http://jinja.pocoo.org/docs/templates/#groupby)过滤器，但该实现似乎太复杂了（需要嵌套的 for 循环）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T11:24:03.597

我不知道可以做到这一点的本机 jinja2 过滤器。要基于多个属性对列表进行排序，您可以在 jinja2中定义[自定义过滤器。](http://jinja.pocoo.org/docs/api/#custom-filters)

从[这个问题](https://stackoverflow.com/questions/4233476/sort-a-list-by-multiple-attributes)的接受答案中，您可以编写自己的过滤器

```
import operator

def sort_multi(L,*operators): 
    L.sort(key=operator.itemgetter(*operators))
    return L 
```

在您的应用程序环境中注册它。所以`pyramid`，你会做类似的事情

```
env = config.get_jinja2_environment()
env.filters['sort_multi'] = sort_multi 
```

最后在您的模板中

```
{{item_list|sort_multi('value','color')}} 
```

# javascript - AngularJS：只刷新一个来自 ng-repeat 的 div

> ID：16143057
> 
> 赞同：0
> 
> 时间：2013-04-22T08:57:13.443
> 
> 标签：javascript, jquery, angularjs, angularjs-ng-repeat

我在一个页面中有多个 div。每个 div 包含不同的 id。在每个 div 中都有一些高图表，还有一些用于过滤结果的链接。每个 div 来自 angularJS 的 ng-repeat，如下所示：

`<li id="{{record.id}} "ng-repeat = "record in records">`：

此列表中的 div 之一类似于以下结构：

```
<div id="criteria">
    <!--Calling a Pie chart that works fine -->
    <a href="#" onclick="edit();">
</div> 
```

我在同一页面上的脚本如下：

```
<script type= "text/javascript">
function edit(){
    var criteria=prompt("Please enter criteria");
    if (criteria=="Login")
       {
       $("#criteria").load("Loginbar.html");
       }      
    }
</script> 
```

现在我的问题是，当我点击编辑时，它会询问标准，当我输入登录时，饼图被登录栏图表替换，但当时整个页面正在刷新。

我希望只有具有 id="criteria" 的 div 会被刷新。

我已经尝试过，但这不起作用：

```
 $("#criteria").html(); 
```

需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:03:59.147

尝试

```
<a href="#" onclick="edit(); return false;"> 
```

# iphone - iOS 中的 Facebook 页面

> ID：16143060
> 
> 赞同：2
> 
> 时间：2013-04-22T08:57:21.353
> 
> 标签：iphone, ios, facebook, ipad

我知道如何在 Facebook 上点赞照片/评论。但我想通过我的应用点赞 Facebook**页面。**可能吗？如果是的话，谁能给我一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:04:34.780

这是个问题。如果您能够做到这一点，您将能够以编程方式“喜欢”一个页面，而用户不必意识到这是正在发生的事情。这将违反 Facebook 的服务条款。

我认为你最好在你的应用程序中简单地放置一个常规的“喜欢按钮”并让你的用户决定他们是否要点击它。

一些相关的帖子 -

*   [如何通过 Facebook 应用程序以编程方式“按下”“喜欢”按钮？](https://stackoverflow.com/questions/3692527/how-to-programmatically-press-a-like-button-through-a-facebook-application)
*   [iOS应用程序中的点赞按钮](https://stackoverflow.com/questions/4087660/like-button-in-ios-application)
*   [在 iOS 上通过 Facebook Graph API 使用“Like”](https://stackoverflow.com/questions/5281665/using-like-with-the-facebook-graph-api-on-ios)
*   [代表用户喜欢一个页面？](https://stackoverflow.com/questions/5837010/liking-a-page-on-behalf-of-a-user)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T12:19:00.630

Fb like Widget 可以嵌入到我们的应用程序中。您只需添加一个 webView 并在[此处获取 Fb Like Widget html 代码/URL](https://developers.facebook.com/docs/plugins/like-button/)。

在 ViewController.h 中要添加 fb like 按钮：

```
#import <UIKit/UIKit.h>

@interface TestViewController : UIViewController <UIWebViewDelegate>

@property (strong, nonatomic) UIWebView * fbLikeWebView;

-(void)embedFBLikeButton;

@end 
```

在 TestViewController.m

```
#import "AboutUsViewController.h"

@implementation AboutUsViewController

@synthesize fbLikeWebView = _fbLikeWebView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Add this code for FbLike Webview

    self.fbLikeWebView = [[UIWebView alloc] initWithFrame: CGRectMake(100.0, 50.0, 55.0, 70.0)];
    _fbLikeWebView.opaque = NO;
    _fbLikeWebView.backgroundColor = [UIColor clearColor];
    _fbLikeWebView.delegate = self;
    [self.view addSubview:_fbLikeWebView];

    for (UIScrollView *subview in _fbLikeWebView.subviews)
    {
        if ([subview isKindOfClass:[UIScrollView class]]) {
            subview.scrollEnabled = NO;
            subview.bounces = NO;
        }
    }
} 
```

然后在 ViewWillAppear 方法中调用 enbeddFBLikeButton 方法在 web 视图上添加 fbLike 按钮 wigdet：

```
-(void)viewWillAppear:(BOOL)animated
{
    [self embedFBLikeButton];
    [_fbLikeWebView reload];
}

-(void)embedFBLikeButton
{
    NSString *facebookUrl =  //here paste the url you get from fb developer link above;

    [self.fbLikeWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:facebookUrl]]];
} 
```

您现在符合 UIWebViewDelegate ，现在轮到在这里定义 edelegate 方法：

```
#pragma mark - WebView Delgate Methods

- (BOOL)webView:(UIWebView *)webview shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([request.URL.lastPathComponent isEqualToString:@"login.php"])
    {
        [self login];

        return NO;
    }

    return YES;
}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    [_fbLikeWebView stopLoading];
} 
```

此方法用于将用户登录到 facebook 帐户：

```
- (void)login
{
    [FBSession setActiveSession: [[FBSession alloc] initWithPermissions:@[@"publish_actions", @"publish_stream", @"user_photos"]]];

    [[FBSession activeSession] openWithBehavior: FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        switch (status) {
            case FBSessionStateOpen:
                // call the legacy session delegate
                //Now the session is open do corresponding UI changes
                if (session.isOpen) {
                    FBRequest *me = [FBRequest requestForMe];

                    [me startWithCompletionHandler: ^(FBRequestConnection *connection,
                                                      NSDictionary<FBGraphUser> *my,
                                                      NSError *error) {
                        if (!my) {
                            NSLog(@"Facebook error:\n%@", error.description);
                            [[[UIAlertView alloc] initWithTitle: @"Error"
                                                        message: @"Facebook Login error."
                                                       delegate: self
                                              cancelButtonTitle: @"Ok"
                                              otherButtonTitles: nil, nil] show];
                            return;
                        }
                    }];

                    [_fbLikeWebView reload];

                    [[[UIAlertView alloc] initWithTitle: @""
                                                message: @"Successfully Login. Please click on like button"
                                               delegate: self
                                      cancelButtonTitle: @"Ok"
                                      otherButtonTitles: nil, nil] show];
                }
                break;
            case FBSessionStateClosedLoginFailed:
            {
                [_fbLikeWebView reload];
            }
                break;
            default:
                break; // so we do nothing in response to those state transitions
        }
    }];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-25T05:00:46.767

我已经编写了一个调用方法，您可以通过在方法中提供其 url 来喜欢您的页面。对于这种方法，您必须使用 facebook sdk 并且需要添加一些已弃用的 facebook 文件。

```
#import "Facebook.h"
#import "FBCustomLoginDialog.h"
#import "Accounts/Accounts.h" 
```

如何找到这些文件并使用它取决于您。无论如何，这都是类似页面的工作代码。

```
-(void)like
{
    NSString *likePage=@"http://in.yahoo.com/?p=us"; // here you page url

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   likePage, @"object",[[NSUserDefaults standardUserDefaults] valueForKey:@"token"],@"access_token",
                                   nil];

    [FBRequestConnection startWithGraphPath:@"/me/og.likes" parameters:params HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:nil message:[NSString stringWithFormat:@"liked with id %@",[result valueForKey:@"id"]] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];

        NSLog(@"result is %@",result);
    }];
}

- (IBAction)likepageonFB:(id)sender
{
    if ([[FBSession activeSession] isOpen]) {
        [self like];
    }else
    {
        [appDelegate openSession];
    }
} 
```

这是应用程序委托文件中使用的代码....

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[LikeAppViewController alloc] initWithNibName:@"LikeAppViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
        // To-do, show logged in view
//         [self openSession];
    } else {
        // No, display the login page.
        [self showLoginView];
    }

    return YES;
}

#pragma mark- Facebook Methods

- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
        {
            [[NSUserDefaults standardUserDefaults] setValue:[[FBSession activeSession] accessToken] forKey:@"token"];
            NSLog(@"token is %@",[[FBSession activeSession] accessToken]);
            [self.viewController like];
        }
            break;
        case FBSessionStateClosed:
        case FBSessionStateClosedLoginFailed:
            [self showLoginView];
            break;
        default:
            break;
    }

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
}

- (void)openSession
{

    NSLog(@"open session called ");

    NSArray *permissions=[[NSArray alloc] initWithObjects:@"publish_stream",@"publish_actions",@"user_likes",@"user_about_me",nil];

    [FBSession openActiveSessionWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceEveryone allowLoginUI:YES completionHandler:^(FBSession *session,
                                                                                                                                    FBSessionState state, NSError *error) {
        [self sessionStateChanged:session state:state error:error];
    }];
}

- (void)showLoginView
{
    [self.viewController presentedViewController];
}

- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation
{
    return [FBSession.activeSession handleOpenURL:url];
}

- (void)fbDialogLogin:(NSString*)token expirationDate:(NSDate*)expirationDate
{
    NSLog(@"expiry date is %@",expirationDate);
} 
```

使用这个文件[FBCustomLoginDialog.h](http://pastebin.com/VtpZfJTd)和[FBCustomLoginDialog.m](http://pastebin.com/k7BkWhDy)

# java - 从 PC 调用 android-function

> ID：16143061
> 
> 赞同：-2
> 
> 时间：2013-04-22T08:57:22.287
> 
> 标签：java, android, usb, remote-access

我想在 my 中调用一些`Android-app`函数`PC`。

关于`PC`我想写一个短片`java`或`C`程序。

简化后，我想在 PC 上进行类似这样的调用：

```
myApp.Appfunction (); 
```

然后

```
Appfunction(){
} 
```

在我在安卓手机上的应用程序中只是简单地调用了。

可能吗？

有什么办法可以做到这一点

界面仍然是打开的。

我有一个**三星 Galaxy S3**，所以有很多可能的接口：

**NFC、蓝牙、USB、WiFi直连**

我更喜欢`USB`连接，但如果其他东西更容易实现，我也会使用其他接口。

提前感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:24:04.373

您需要在您的 PC 上构建一个服务器并等待您将通过 android 进行的套接字连接。因此，您的 api 变为：

```
public void pcFunction(){
          //estabilish a socket connect
          //send a message "cmd function" to server
} 
```

在服务器上

```
//receives message and parse it
switch(cmd){
     case fun1:
         callFunction1();
         break;
     case fun2:
         //
} 
```

# objective-c - 单击按钮打开新视图

> ID：16143070
> 
> 赞同：0
> 
> 时间：2013-04-22T08:57:51.793
> 
> 标签：objective-c, view

我有一个名为 diffView 的基于导航的应用程序，我想在其中单击按钮打开新视图。为此，我们创建了一个视图，名为 file-new file-cocoa touch class-UIViewControllerSubclass，名为 next1。

在 diffViewAppDelegate.h 我写为

```
IBOutlet UIButton *btn1;
@property (nonatomic,retain) UIButton *btn1;
-(IBAction)buttonPressed:(id)sender; 
```

并在 diffViewAppDelegate.m-

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    CGRect bounds=window.bounds;
    UIView* view=[[UIView alloc]initWithFrame:bounds];
    [view setBackgroundColor:[UIColor redColor]];
    [window addSubview:view];

    CGRect buttonFrame= CGRectMake(80, 240, 200, 30);
    btn1=[[UIButton alloc] initWithFrame:buttonFrame];
    [btn1 setTitle:@"space" forState:UIControlStateNormal];
    [btn1.titleLabel setFont:[UIFont fontWithName:@"Verdana" size:20]];
    [btn1 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchDown];
    [view addSubview:btn1];

    [self.window makeKeyAndVisible];

    return YES;
}

    -(IBAction)buttonPressed:(id)sender
{

    next1 * nxt=[[next1 alloc] initWithNibName:nil bundle:nil];
    [self.navigationController pushViewController:nxt animated:YES];
    [nxt release];
} 
```

我没有收到任何错误，但是当我单击按钮时没有任何反应。

请建议我任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:18:28.873

我如何想象它：

1.  在您的委托中，您加载 - alloc/init`UINaviagationController`并设置其 rootViewController 属性，或者`initWithRootViewController:`在您初始化 NavigationController 时仅使用方法。类似的东西。

    ```
    viewController = [RootViewController alloc] init];
    nvc = [[UINavigationController alloc] initWithRootViewController:viewController];
    nvc.navigationBarHidden = YES;
    [self.window setRootViewController:nvc];
    [window makeKeyAndVisible]; 
    ```

2.  在您的 RootViewController 中，从“viewDidLoad：”方法创建按钮并将其添加到“self.view”，然后实现目标选择器，一切都会好起来的。

编辑1：

这是我`application:didFinishLaunchingWithOptions:`在 AppDelegate 中的方法

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] init] autorelease];

    self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

那是我的 RootViewController

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    CGRect buttonFrame= CGRectMake(80, 240, 200, 30);
    UIButton *btn1=[[UIButton alloc] initWithFrame:buttonFrame];
    btn1.backgroundColor = [UIColor greenColor];
    [btn1 setTitle:@"space" forState:UIControlStateNormal];
    [btn1.titleLabel setFont:[UIFont fontWithName:@"Verdana" size:20]];
    [btn1 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:btn1];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)buttonPressed:(id)sender
{
    NSLog(@"sender: %@", sender);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:26:37.640

是的，我已经在 RootViewController 中创建了按钮，但它不起作用。即使按钮现在也不可见。我的代码是这样的-

```
CGRect buttonFrame= CGRectMake(80, 240, 200, 30);
btn1=[[UIButton alloc] initWithFrame:buttonFrame];
[btn1 setTitle:@"space" forState:UIControlStateNormal];
[btn1.titleLabel setFont:[UIFont fontWithName:@"Verdana" size:20]];
[btn1 addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchDown];
[self.view addSubview:btn1]; 
```

# driver - 驱动程序未在 wince 6.0 问题中加载

> ID：16143074
> 
> 赞同：0
> 
> 时间：2013-04-22T08:58:05.053
> 
> 标签：driver, windows-ce

我在 wince 6.0 平台构建器中添加了我的驱动程序。它成功编译并添加到 nk.bin（我通过在 vs2005 中打开 nk.bin 手动检查）还包含该驱动程序 enrty 的 reg 文件。我做了以下过程来添加我的驱动程序。

1.  将驱动程序代码复制到“$(_TARGETPLATROOT)\Files\MyDriver”

2.  在“<em>platform.bib”处添加以下行</p>

    MyDriver.dll $(_TARGETPLATROOT)\Files\MyDriver\MyDriver.dll NK SHK

3.  在“<em>platform.reg”</p>处添加以下行

    `#include "$(_TARGETPLATROOT)\Files\MyDriver\MyDriver.reg"`

但是当我闪烁它时，nk.bin。驱动程序未加载到板上。我检查了有助于检查板上加载了哪个驱动程序的工具。
有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:23:41.013

我们不知道 mydriver.reg 中有什么，所以如果那里有问题，或者生成的 platform.reg 有问题，那么这可能是个问题。

有几种方法可以诊断此问题。第一步是检查`ce.bib`并`platform.reg`确保预期的条目在那里。如果驱动程序或其注册表项未在操作系统中结束，则会导致问题。

如果看起来不错，那么您可以采取两个步骤。

1.  构建操作系统的调试版本，将调试版本复制`device.exe`到`FLATRELEASEDIR`发布版本并调用`makeimg`. 这将为您提供带有调试版本的 device.exe 的发布版本。启动并查看调试消息以了解何时尝试加载驱动程序并查看故障报告。
2.  创建一个简单的应用程序，调用`ActivateDevice`并查看它的返回值。从驱动程序中输出调试消息`DllMain`通常`XXX_Init`也很有帮助。

# android - 将xml连接到Android中的编程布局

> ID：16143076
> 
> 赞同：0
> 
> 时间：2013-04-22T08:58:11.607
> 
> 标签：android, android-layout, layout, user-interface

我有一个自定义布局 java 文件，我创建并添加视图如下：

```
 PredicateLayout layout = new PredicateLayout(this);

    for (int i = 0; i < someNumberThatChangesEveryTime; i++) 
    {            
        TextView t = new TextView(this);
        t.setText("Hello");
        t.setBackgroundColor(Color.RED);
        t.setSingleLine(true);
       layout.addView(t, new PredicateLayout.LayoutParams(2, 0));
    }
 setContentView(layout); 
```

我想做的是在 xml 中定义我的 TextView，所以我可以像这样添加它：

```
TextView t = (TextView) findViewById(R.id.textview); 
```

当然，还可以添加其他类型的视图。我不知道如何编写这个 xml 文件，或者如何将它连接到这个活动。我正在使用的布局是这样的：[Android 的换行小部件布局](https://stackoverflow.com/questions/549451/line-breaking-widget-layout-for-android)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:05:04.367

在 xml 中找到根布局的 id，并以编程方式将其他 ui 元素添加到根布局。

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
andorid:id="@+id/ll
tools:context=".MainActivity" >

<TextView
    android:id="@+id/tv"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp"
    android:text="Blank text" />
 </RelativeLayout> 
```

你的 MainActivity

```
 public class MainActivity extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
           RelativeLayout ll = (RelativeLayout) findViewById(R.id.ll);
            TextView tv= (TextView) findViewById(R.id.tv);
            // add other ui elements to the root layout ie Relative layout  

     }
    } 
```

# python - IndexError：列表索引超出范围错误

> ID：16143077
> 
> 赞同：-6
> 
> 时间：2013-04-22T08:58:14.117
> 
> 标签：python, xml, python-2.7, minidom

我仍然是 python 和 xml 的初学者。以下错误让我很困扰。以下是我在执行以下代码时得到的回溯混乱（错误）：

```
Traceback (most recent call last):
  File "path", line 66, in <module>
    print slidename[a].childNodes[0].nodeValue
IndexError: list index out of range 
```

从此代码：

```
for object in os.listdir(my_directory):
      print (object)
      if '.zip' in object:
            #print (object)
            new = os.path.splitext(object)
            #print (new[0])
            file_name.append(new[0])
            os.mkdir(my_directory+new[0], 0o777)
            with zipfile.ZipFile(my_directory+new[0]+new[1], "r") as z:
                z.extractall(my_directory+new[0])

count = 0

for len_num in range(0,len(file_name)):

    for doc in os.listdir(my_directory+file_name[len_num]+new_directory):
            if '.xml' in doc:
                  #print doc
                  slide_name = os.path.splitext(doc)
                  #print slide_name
                  print ((file_name)[len_num])+'>>>'+((slide_name)[0])
                  file= xml.dom.minidom.parse(my_directory+((file_name)[len_num])+new_directory+doc)
                  tagname = file.getElementsByTagName('a:t')
                  #print tagname

                  for a in range(0,len(tagname)):
                        print tagname[a].childNodes[0].nodeValue 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:05:27.633

您正在解析没有该特定元素*的*子节点的XML。`slidename[a]`你可能想跳过那个。

您没有充分发挥 Python 循环的潜力。当您可以直接遍历列表本身时，*无需*遍历索引：

```
for a in tagname:
    try:
        print a.childNodes[0].nodeValue
    except IndexError:
        print 'No childNodes for this element' 
```

# actionscript-3 - 在 AMFPHP 调用期间，旧的正在运行的 flash 应用程序中出现错误消息

> ID：16143084
> 
> 赞同：0
> 
> 时间：2013-04-22T08:59:05.063
> 
> 标签：actionscript-3, apache-flex, amfphp, zend-amf

我的应用程序运行良好，直到今天。问题是对 amfphp 的每个请求都会返回一条错误消息，例如：

```
Client.Error.Message Send
Fail to send 
```

其实这个消息就是`fault`我放在调用者里面的函数。

```
<s:CallResponder id="tracefilm"/>
    <trace:Trace id="traceFilm" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)" result="traceMaked(event)" showBusyCursor="true"/> 
```

因为我不知道如何找到问题所在......我将尝试查看在执行期间由于 FF的**firebug插件会发生什么。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:59:05.063

解决方案很简单。我刚刚在一个旧的流媒体应用程序（100% 闪存）中解决了这个问题。

如果您在旧应用程序中遇到问题，您可能在 Web 服务器的根目录中没有**crossdomain.xml文件。**有关详细信息，请参阅[Adob​​e 说明](http://cookbooks.adobe.com/post_Starting_with_AMFPHP-11947.html)。

感谢**firebug** ，我找到了解决方案。事实上，在 Flash 加载期间，浏览器试图访问一个名为`crossdomain.xml`. 当然，就我而言，服务器响应是 404 ......

您只需`crossdomain.xml`在服务器中创建，并在其中添加这段代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
   <allow-access-from domain="*" />
</cross-domain-policy> 
```

现在您的应用程序，就像我的一样，将再次运行。

# android - 安卓 - BB10 兼容性

> ID：16143089
> 
> 赞同：2
> 
> 时间：2013-04-22T08:59:12.603
> 
> 标签：android, blackberry-10

我是将android应用程序转换为bb10的新手。我将一个应用程序转换为 bb10 兼容性。该应用程序与android中的设备和平板电脑兼容。我在bb10模拟器中成功运行它。但该应用程序并未完全显示 UI 部分。为什么？我还有一个疑问，一般 BB10 设备的形状是矩形，但模拟器的形状是正方形。为什么？

**黑莓图像** ![BB10](https://i.stack.imgur.com/HLF1s.png)

**安卓图片**

![安卓图片](https://i.stack.imgur.com/c1ybb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:14:44.953

那是因为您的 UI 需要比分辨率提供的更多空间。如果您将控件放置在可滚动的容器中，您将能够向下滚动到 UI 的缺失部分。
如果您选择该容器来自动显示滚动条，这只会在 Q10 上看到，而不会在 Z10 上看到。尝试将您的模拟器切换到 Z10 分辨率，然后它将适当地显示您的所有 UI 元素。

真正的解决方案是真正定义与分辨率相关的 UI。

首先，[在这里](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)是关于如何为您的 Android 应用程序集群布局资源的一个很好的定义。当为例如 600dp 和一个为 800dp 的最小高度（！）定义适当的布局时，您的问题将消失。一个 600dp 的将用于 Q10（因为它的物理高度为 720 像素），另一个用于 Z10（具有 1280 像素）。

顺便说一句：你应该在某些 Android 设备上遇到同样的问题，因为有一些几乎是方形的显示（我记得 HTC 的“黑莓克隆”？）。但当然，这些设备真的很少见……

# javascript - Javascript原型属性定义为对象

> ID：16143092
> 
> 赞同：0
> 
> 时间：2013-04-22T08:59:39.503
> 
> 标签：javascript, prototypal-inheritance

我正在尝试创建一个简单的 Person 对象，它的原型属性之一将是一个对象，但这似乎不可能，因为范围发生了变化。

```
var Person = function() {};

Person.prototype.set = function(data) {
    this.data = data;
};

Person.prototype.update = {
    name: function(name) {
        this.data.name = name;
    }
};

var me = new Person();
me.set({name: 'Achilleas'});
me.update.name('John'); 
```

你也可以在这个[jsFiddle上运行它](http://jsfiddle.net/Knorcedger/fj5uY/1/)

我想要实现的目标可能吗？我知道我可以通过使用 apply 分配范围来做到这一点，但我不太喜欢这个解决方案。

感谢您花时间回答我关于 Stackoverflow 的第一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:05:20.673

您遇到的问题是因为`this`将引用创建并分配给`update`属性的对象文字。它不指人。`this.data.name`因此，由于对象文字没有数据属性，因此引用会产生错误。

我建议只扩展 的原型`Person`以包含一个更新方法，该方法需要一个要更新的属性和一个值。也添加`data`为 person 的属性。

```
var Person = function() {
   this.data = {};
};

Person.prototype.set = function(data) {
    this.data = data;
};

Person.prototype.update = function(property, value){
   this.data[property] = value;
};

var me = new Person();
me.set({name: 'Achilleas'});
me.update('name','John'); 
```

**工作示例** [http://jsfiddle.net/fj5uY/7/](http://jsfiddle.net/fj5uY/7/)

# network-programming - ATM pcap 文件到以太网 Pcap 文件

> ID：16143096
> 
> 赞同：0
> 
> 时间：2013-04-22T08:59:45.313
> 
> 标签：network-programming, pcap, winpcap

我正在寻找 ATM 的 .pcap 文件格式。它在我的项目中需要。我正在寻找可以将 ATM pcap 文件转换为以太网 pcap 文件的机制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:05:10.400

ATM 的链路层报头类型不止一种。 [链路层标头类型值列表](http://www.tcpdump.org/linktypes.html)既有`LINKTYPE_ATM_RFC1483`/ `DLT_ATM_RFC1483`，其中数据包以 IEEE 802.2 标头开头，也有`LINKTYPE_SUNATM`/ `DLT_SUNATM`，其中数据包以[SunATM 标头开头](http://www.tcpdump.org/linktypes/LINKTYPE_SUNATM.html)。可能还会使用其他一些链路层标头类型；您必须确定您正在查看的 ATM pcap 文件中的哪些文件。

# typescript - 将 typescript 0.8.1 项目升级到 0.8.3.1 后 tsc 编译代码 1 错误

> ID：16143100
> 
> 赞同：1
> 
> 时间：2013-04-22T08:59:49.670
> 
> 标签：typescript

我将 typescript 项目版本 0.8.1 升级到 0.8.3.1 我通过安装 Typescript 0.8.3.1、创建一个新项目并将所有源文件、发布设置和项目文件复制到该项目中来做到这一点。我手动编辑了 csproj 文件以与 0.8.3 项目文件保持一致。

这是我遇到的错误：

> 命令“tsc --comments --sourcemap --target ES5”以代码 1 退出

但是，从命令行使用完全相同的命令：

> tsc --comments --sourcemap --target ES5

一切似乎都很好。该项目是一个 TFS 项目，所以我已经尝试删除所有文件上的所有只读属性。清理和重建项目。关闭所有窗户。重新启动 Visual Studio 等。“奇怪”的事情是打字稿文件在保存时会编译，但不会在完全重建时编译。

FIX，看起来：

似乎我错过了 .csproj 文件的项目组中的一个新属性

```
<ItemGroup>
    <TypeScriptCompile Include="FirstTypescriptFile.ts" />
    <Content Include="com\interfaces\IContext.js"> 
```

我添加了“TypeScriptCompile Include="FirstTypescriptFile.ts"，现在一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:04:26.790

最有可能发生的变化是路径发生了`tsc.exe`变化。事实上，为了防止不断变化的路径出现所有问题，TypeScript 团队决定将其提高一级，这样我们就不必继续编辑路径了。

因此，在您的项目文件中，检查完整路径并进行调整，例如这里：

```
<Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\tsc&quot; --declaration @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" />
</Target> 
```

在旧版本中，路径是`...\TypeScript\0.8.1\tsc`.

# android - Android 屏幕在方向更改时变为空白

> ID：16143104
> 
> 赞同：1
> 
> 时间：2013-04-22T09:00:11.147
> 
> 标签：android, android-activity, android-orientation

我开发了一个带有两个选项卡的选项卡式应用程序，比如**Audio**和**Video**。

在方向更改时，我使标签指向设备的左侧。

但是在更改（我给的`orientation`）时会变成空白。`activity``textview`

我希望`activity`显示在`orientation change`.

我将`android:configChanges="screenSize|orientation"`活动元素放入清单文件中，因为我不希望重新创建选项卡活动。

任何人都可以发布解决此问题的方法吗？

```
公共类 MainTabActivity 扩展 TabActivity 实现
        TabHost.TabContentFactory {

`TabHost tabHost;
Intent intent;
Intent intent2;
Resources res;
Configuration cfg;
boolean hor;
boolean ver;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    System.out.println("onCreate Maintab");
    res = getResources();
    cfg = res.getConfiguration();
    hor = cfg.orientation == Configuration.ORIENTATION_LANDSCAPE;
    ver = cfg.orientation == Configuration.ORIENTATION_PORTRAIT;
    if (hor) {
        setContentView(R.layout.main_view_land);
        tabHost = getTabHost();
        TabWidget tw = tabHost.getTabWidget();
        tw.setOrientation(LinearLayout.VERTICAL);
        intent = new Intent(this, Activity1.class);
        intent2 = new Intent(this, Activity2.class);
        tabHost.addTab(tabHost
                .newTabSpec("tab1")
                .setIndicator(
                        createIndicatorViewLand(tabHost, "Audio",
                                getResources()
                                        .getDrawable(R.drawable.icon1)))
                .setContent(intent));
        tabHost.addTab(tabHost
                .newTabSpec("tab2")
                .setIndicator(
                        createIndicatorViewLand(tabHost, "Video",
                                getResources()
                                        .getDrawable(R.drawable.icon2)))
                .setContent(intent2));
        tabHost = getTabHost();
        tabHost.getTabWidget().getChildAt(0)
                .setBackgroundResource(R.drawable.tab_sellected);
        tabHost.getTabWidget().getChildAt(1)
                .setBackgroundResource(R.drawable.tab_default);
        tabHost.setOnTabChangedListener(new OnTabChangeListener() {
            @Override
            public void onTabChanged(String tabId) {
                // TODO Auto-generated method stub
                for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
                    tabHost.getTabWidget().getChildAt(i)
                            .setBackgroundResource(R.drawable.tab_default);
                }
                tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab())
                        .setBackgroundResource(R.drawable.tab_sellected);

            }
        });
    } else if (ver) {
        setContentView(R.layout.main_view);
        tabHost = getTabHost();
        intent = new Intent(this, Activity1.class);
        intent2 = new Intent(this, Activity2.class);
        tabHost.addTab(tabHost
                .newTabSpec("tab1")
                .setIndicator(
                        createIndicatorView(tabHost, "Audio",
                                getResources()
                                        .getDrawable(R.drawable.icon1)))
                .setContent(intent));
        tabHost.addTab(tabHost
                .newTabSpec("tab2")
                .setIndicator(
                        createIndicatorView(tabHost, "Video",
                                getResources()
                                        .getDrawable(R.drawable.icon2)))
                .setContent(intent2));
        tabHost = getTabHost();
        tabHost.getTabWidget().getChildAt(0)
                .setBackgroundResource(R.drawable.tab_sellected);
        tabHost.getTabWidget().getChildAt(1)
                .setBackgroundResource(R.drawable.tab_default);
        tabHost.setOnTabChangedListener(new OnTabChangeListener() {
            @Override
            public void onTabChanged(String tabId) {
                // TODO Auto-generated method stub
                for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
                    tabHost.getTabWidget().getChildAt(i)
                            .setBackgroundResource(R.drawable.tab_default);
                }
                tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab())
                        .setBackgroundResource(R.drawable.tab_sellected);
            }
        });
    }
}
private View createIndicatorView(TabHost tabHost, CharSequence label,
        Drawable icon) {
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View tabIndicator = inflater.inflate(R.layout.tab_indicator,
            tabHost.getTabWidget(), false);
    final TextView tv = (TextView) tabIndicator.findViewById(R.id.title);
    tv.setText(label);
    final ImageView iconView = (ImageView) tabIndicator
            .findViewById(R.id.icon);
    iconView.setImageDrawable(icon);
    return tabIndicator;
}
private View createIndicatorViewLand(TabHost tabHost, CharSequence label,
        Drawable icon) {
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View tabIndicator = inflater.inflate(R.layout.tab_indicator_land,
            tabHost.getTabWidget(), false);
    final TextView tv = (TextView) tabIndicator.findViewById(R.id.title);
    tv.setText(label);
    final ImageView iconView = (ImageView) tabIndicator
            .findViewById(R.id.icon);
    iconView.setImageDrawable(icon);
    return tabIndicator;
}
@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
    System.out.println("onCOnfig MainTab");
    res = getResources();
    cfg = res.getConfiguration();
    hor = cfg.orientation == Configuration.ORIENTATION_LANDSCAPE;
    ver = cfg.orientation == Configuration.ORIENTATION_PORTRAIT;
    if (hor) {
        System.out.println("onCOnfig Horizontal");
        setContentView(R.layout.main_view_land);
        tabHost = getTabHost();
        TabWidget tw = tabHost.getTabWidget();
        tw.setOrientation(LinearLayout.VERTICAL);
        // intent = new Intent(this, Activity1.class);
        // intent2 = new Intent(this, Activity2.class);
        tabHost.addTab(tabHost
                .newTabSpec("tab1")
                .setIndicator(
                        createIndicatorViewLand(tabHost, "Audio",
                                getResources()
                                        .getDrawable(R.drawable.icon1)))
                .setContent(intent));
        tabHost.addTab(tabHost
                .newTabSpec("tab2")
                .setIndicator(
                        createIndicatorViewLand(tabHost, "Video",
                                getResources()
                                        .getDrawable(R.drawable.icon2)))
                .setContent(intent2));
        tabHost = getTabHost();
        tabHost.getTabWidget().getChildAt(0)
                .setBackgroundResource(R.drawable.tab_sellected);
        tabHost.getTabWidget().getChildAt(1)
                .setBackgroundResource(R.drawable.tab_default);
        tabHost.setOnTabChangedListener(new OnTabChangeListener() {
            @Override
            public void onTabChanged(String tabId) {
                // TODO Auto-generated method stub
                for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
                    tabHost.getTabWidget().getChildAt(i)
                            .setBackgroundResource(R.drawable.tab_default);
                }
                tabHost.getTabWidget()
                        .getChildAt(tabHost.getCurrentTab())
                        .setBackgroundResource(
                                R.drawable.audio_video_sellected);
            }
        });
    } else if (ver) {
        System.out.println("onCOnfig Vertical");
        setContentView(R.layout.main_view);
        tabHost = getTabHost();
        // intent = new Intent(this, Activity1.class);
        // intent2 = new Intent(this, Activity2.class);
        tabHost.addTab(tabHost
                .newTabSpec("tab1")
                .setIndicator(
                        createIndicatorView(tabHost, "Audio",
                                getResources()
                                        .getDrawable(R.drawable.icon1)))
                .setContent(intent));
        tabHost.addTab(tabHost
                .newTabSpec("tab2")
                .setIndicator(
                        createIndicatorView(tabHost, "Video",
                                getResources()
                                        .getDrawable(R.drawable.icon2)))
                .setContent(intent2));
        tabHost = getTabHost();
        tabHost.getTabWidget().getChildAt(0)
                .setBackgroundResource(R.drawable.tab_sellected);
        tabHost.getTabWidget().getChildAt(1)
                .setBackgroundResource(R.drawable.tab_default);
        tabHost.setOnTabChangedListener(new OnTabChangeListener() {
            @Override
            public void onTabChanged(String tabId) {
                // TODO Auto-generated method stub
                for (int i = 0; i < tabHost.getTabWidget().getChildCount(); i++) {
                    tabHost.getTabWidget().getChildAt(i)
                            .setBackgroundResource(R.drawable.tab_default);
                }
                tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab())
                        .setBackgroundResource(R.drawable.tab_sellected);
            }
        });
    }
}

@Override
public View createTabContent(String tag) {
    final TextView tv = new TextView(this);
    tv.setText("Content for tab with tag " + tag);
    return tv;
}` 

}

```

# java - 用于 apache-commons 样式打包的样板 ant/maven 配置

> ID：16143109
> 
> 赞同：1
> 
> 时间：2013-04-22T09:00:40.667
> 
> 标签：java, ant, jar, apache-commons

[Apache Commons](http://commons.apache.org/proper/commons-io/download_io.cgi)系列有一个相当标准的打包模式：5 个 jars（类、源代码、测试、测试源和 javadoc）、一个包含 HTML 内容的 doc 目录和一些文本文件（许可证、自述文件）：

```
.
├── docs
├── LICENSE.txt
├── NOTICE.txt
├── RELEASE-NOTES.txt
├── commons-io-2.4-javadoc.jar
├── commons-io-2.4-sources.jar
├── commons-io-2.4-test-sources.jar
├── commons-io-2.4-tests.jar
└── commons-io-2.4.jar 
```

我想以相同的方式打包我的一些项目，将类和方法引用到它们相应的 javadocs，以便 eclipse 在使用导入的类时可以工具提示引用。

是否有用于以 Apache Commons 样式进行打包的[Ant或 Maven 的 biolerplate 配置？](http://www.vogella.com/articles/ApacheAnt/article.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:29:22.580

其中一部分很简单 - 如果您相应地创建文件夹结构并在 maven 中进行发布构建，则将创建所有 jar：

"${xxx}/src/main/java" 将用于创建 "${xxx}.jar" 和 "${xxx}-sources.jar"

"${xxx}/src/test/java" 将用于创建 "${xxx}-test.jar" 和 "${xxx}-test-sources.jar"

最重要的是，maven 发布插件还将创建 javadocs 并将它们打包为“${xxx}-test-sources.jar”

所有这些都将上传到您的 maven 存储库 - 您只需将所有内容放在正确的位置，然后调用正确的 maven 目标即可。

最重要的是，您可以使用 maven 程序集插件来创建您构建中创建的所有工件的 ZIP。我没有具体的代码，但你必须熟悉 maven 和程序集插件。我没有看到很多并发症。

if you work with several people, you probably need some infrastructure - we have a general nexus for proxying the standard repositories locally, and then one repository per maven project.

when i did the transition to maven in our organisation, it was painful for a few days, because people had to get familiar with it. but it paid off - the projects are much smaller, and deploying release builds is a breeze.

i'd recommend getting into maven, then you will see how nice&friendly dependency management can be.

# c++ - 如何在 Linux 中使用 COM ATL 项目？

> ID：16143110
> 
> 赞同：5
> 
> 时间：2013-04-22T09:00:45.833
> 
> 标签：c++, linux, com, cross-platform, atl

我有一个小型 C++ 库，它是在 Visual Studio 中作为 ATL 项目制作的。我想让它跨平台。它将用于 Windows 和 Linux。它将包含在我使用 Qt 4.x 的项目中。如何轻松转换库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:10:22.133

简短的回答：不容易。

长答案：COM 技术是一种专有的 Windows 技术，ATL 建立在它之上。这意味着你不能在 linux 下编译/运行它，除非你使用 Wine 或类似的东西。

您*可以*执行以下操作： 您可以切换到[XPCOM](https://developer.mozilla.org/en/docs/XPCOM) - COM 技术的跨平台实现，由 Mozilla 平台实现。COM 和 XPCOM 在 Windows 下是二进制兼容的（但只有在 XPCOM 中使用 - MS Windows COM 与 Mozilla 的 XPCOM 无关）。

我不确定您是否能够使用 XPCOM 而不是 COM 作为基础来编译*任何*ATL 代码（但我对此表示怀疑），如果您使用 XPCOM，最好使用 XPCOM GUI（使用相同的代码Mozilla/Firefox 所做的），而不是 Qt。

这意味着使用 Javascript 和[XUL](https://developer.mozilla.org/en/docs/XUL)实现您的 GUI 。

# c# - 在运行时编译的部分枚举 - 替代

> ID：16143113
> 
> 赞同：5
> 
> 时间：2013-04-22T09:00:54.607
> 
> 标签：c#, roslyn

我想做类似的事情`partial enum`。如果我知道 C# 不支持这一点。我的想法是`Dictionary<PartialEnum, MyClass>`在`MyClass2`. 字典包含从文件加载的一些属性，我希望有可能添加一些其他“属性”（的成员`PartialEnum`）。我正在使用 Roslyn，所以我可以在运行时编译*枚举*的一些“第二”部分，但不知道该怎么做。（`partial static class`也不支持，所以我不能使用`public readonly`成员）

```
MyClass{
  string value;

  public string Value{
     get{ return value;}
  }
}

MyClass2{

  private Dictionary<PartialEnum,MyClass> properties;

} 
```

我可以使用`string`like 键，但它不是很好。那么有没有可能做类似的事情：

```
partial enum PartialEnum{
 Name,
 Group, ...
} 
```

和运行时编译部分

```
partial enum PartialEnum{     
 runTimeLasName,
 runTimeTitle, ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:31:13.513

在我看来，您实际上并不需要`enum`这里。您想在运行时为其添加一些值，这意味着`enum`不符合您的需求。但是你可以创建一个类。就像是：

```
class PartialEnum
{
    private static readonly Dictionary<string, PartialEnum> Values =
        new Dictionary<string, PartialEnum>();

    public string Id { get; private set; }

    private PartialEnum(string id)
    {
        Id = id;
    }

    public static PartialEnum GetValue(string id)
    {
        PartialEnum value;
        if (!Values.TryGetValue(id, out value))
        {
            value = new PartialEnum(id);
        }

        return value;
    }

    public static PartialEnum Name { get { return GetValue("Name"); } }

    public static PartialEnum Group { get { return GetValue("Group"); } }
} 
```

如果您想使用预定义值之一，请访问静态属性（例如`PartialEnum.Name`）。如果要使用运行时定义的值，请使用`GetValue()`方法（例如`PartialEnum.GetValue("runTimeLastName")`）。

# jenkins - Jenkins CI LDAP 设置：非常慢

> ID：16143115
> 
> 赞同：1
> 
> 时间：2013-04-22T09:00:56.843
> 
> 标签：jenkins, ldap

我有以下设置：

*   Apache Tomcat 7.0.32
*   詹金斯 CI 1.511

我需要保护 Jenkins，所以我选择了 LDAP 身份验证插件（1.2 版）

LDAP 的设置似乎没问题，因为我可以连接到 LDAP 服务器。

我唯一的问题是登录最多需要 1 分钟。

这似乎很奇怪，因为我们将 LDAP 用于许多其他应用程序，并且在这些应用程序中登录需要 1 或 2 秒。

有没有人遇到过类似的问题并知道如何解决？

谢谢

# c# - C# 以可变参数列表作为参数传递函数

> ID：16143116
> 
> 赞同：1
> 
> 时间：2013-04-22T09:00:58.157
> 
> 标签：c#, delegates, params

我试图隐藏函数中的复杂性以方便函数调用。例如`Log(string msg)`，用于将文本消息写入文本框控件的函数，带有换行符，以及用于多线程的 Invoke()。现在我想避免不得不使用`Log(string.Format("..{0}..", x, ...))`和编写一个`Log(string format, params object[] args)`非常有用的版本。

直到我需要将此 Log() 作为参数传递给另一个需要进行日志记录的函数：

```
AnotherFunction(Action<string, object[]> Log)
{
  Log("formatstring", new object[] { value1, value2, ...});
} 
```

我的问题：如何避免`new object[]`每次必须调用 Log() 时都必须编写构造代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:10:09.013

我同意界面将是最干净的解决方案。但是，如果这不是一个选项，您始终可以创建自己的委托使用`params`：

```
public delegate void FormattingLoggerDelegate(string format,
                                              params object[] args); 
```

`AnotherFunction`看起来像这样：

```
public void AnotherFunction(FormattingLoggerDelegate log)
{
    log("formatstring", value1, value2);
} 
```

使用将是透明的，即无需转换为您的代表。就像`Action`存在隐式转换一样：

```
AnotherFunction(Log); 
```

[演示](http://ideone.com/3rSEk0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:05:41.373

界面会更干净。您可能还想考虑使用现有的日志框架（例如 log4net 或 NLog），并实现一个将输出写入文本框的目标（或使用现有的）。

# android - 在 Google Maps Android API v2 中显示使用 Canvas 制作的 GroundOverlay 的应用程序崩溃

> ID：16143122
> 
> 赞同：1
> 
> 时间：2013-04-22T09:01:23.067
> 
> 标签：android, google-maps, android-canvas, google-maps-android-api-2

我在我的地图上显示了一个 GroundOverlay，它的图像是用画布制作的，我在画布上画了一个弧线，但我遇到了一些问题：首先，应用程序在一段时间后崩溃（它给了我一个 java .lang.OutOfMemoryError），并且它没有显示覆盖。我尝试在叠加层的图片中放置白色背景并显示它，所以我猜问题来自弧线，但我不知道我做错了什么。有人知道吗？

```
Projection projection = map.getProjection();

                    Point point1 = projection.toScreenLocation(latlng1);
                    Point point2 = projection.toScreenLocation(latlng2);

                    float startAngle = (float) (Math.atan2(point1.y - point2.y,
                            point1.x - point2.x));
                    float sweepAngle = (float) (GenericNdData.getLateralTrajectory(
                            T_FplnType.ACTIVE.getId()).getSegment(i).getAngle());

                    float radius = FloatMath.sqrt((float) (Math.pow(
                            (point1.x - point2.x), 2) + Math.pow(
                            (point1.y - point2.y), 2)));
                    RectF rectangle = new RectF(point2.x - radius, point2.y
                            - radius, point2.x + radius, point2.y + radius);

                    Paint paint = new Paint();

                    paint.setARGB(250, 0, 255, 0);
                    paint.setAntiAlias(true);
                    paint.setSubpixelText(true);
                    paint.setFakeBoldText(true);
                    paint.setStrokeWidth(4f * Configuration.General.getScreenFactor());

                    paint.setStyle(Paint.Style.STROKE);

                    Bitmap arc = Bitmap.createBitmap(500, 500, Bitmap.Config.ARGB_8888);

                    Canvas canvas = new Canvas(arc);
                    canvas.drawColor(0xFFFFFFFF);
                    canvas.drawArc(rectangle,
                            (float) (Math.toDegrees(startAngle)),
                            (float) (Math.toDegrees(sweepAngle)), false, paint);

                    GroundOverlay groundArc = map.addGroundOverlay(new GroundOverlayOptions()
                     .image(BitmapDescriptorFactory.fromBitmap(arc))
                     .position(latlng2, 10000)); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:49:05.837

`BitmapDescriptorFactory.fromBitmap()`与标记一起使用时存在一个已知的内存泄漏问题。这可能是一个问题，但首先尝试：

```
GroundOverlay.remove() 
```

调用之前添加的对象`GoogleMap.addGroundOverlay`。

# timer - How to generate requests at a "requests/sec" target rate?

> ID：16143125
> 
> 赞同：2
> 
> 时间：2013-04-22T09:01:36.800
> 
> 标签：timer, load-testing

Say I have a target of `x` requests/sec that I want to generate continuously. My goal is to **start** these requests at **roughly the same interval**, rather than just generating x requests and then waiting until 1 second has elapsed and repeating the whole thing over and over again. I'm not making any assumptions about these requests, some might take much longer than others, which is why my scheduler thread will not perform the requests (or wait for them to finish), but hand them over to a sufficiently sized Thread Pool.

Now if `x` is in the range of hundreds or less, I might get by with .net's `Timer`s or `Thread.Sleep` and checking actually elapsed time using `Stopwatch`.

But if I want to go into the thousands or tens of thousands, I could try going high-resolution timer to maintain my *roughly the same interval* approach. But this would (in most programming environments on a general OS) imply some amount of hand-coding with spin waiting and so forth, and I'm not sure it's worthwhile to take this route.

Extending the initial approach, I could instead use a Timer to sleep and do `y` requests on each Timer event, monitor the actual requests per second achieved doing this and fine-tune `y` at runtime. The effect is somewhere in between "put all x requests and wait until 1 second elapsed since start", which I'm trying not to do, and "wait more or less exactly 1/x seconds before starting the next request".

The latter seems like a good compromise, but is there anything that's easier while still spreading the requests somewhat evenly over time? This must have been implemented hundreds of times by different people, but I can't find good references on the issue.

So what's the easiest way to implement this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:48:25.863

One way to do it:

First find (good luck on Windows) or implement a **`usleep`** or **`nanosleep`** function. As a first step, this could be (on .net) a simple `Thread.SpinWait()` / `Stopwatch.Elapsed > x` combo. If you want to get fancier, do `Thread.Sleep()` if the time span is large enough and only do the fine-tuning using `Thread.SpinWait()`.

That done, just take the inverse of the rate and you have the time interval you need to sleep between each event. Your basic loop, which you do on one dedicated thread, then goes

1.  Fire event
2.  Sleep(sleepTime)

Then every, say, 250ms (or more for faster rates), check the actually achieved rate and adjust the `sleepTime` interval, perhaps with some smoothing to dampen wild temporary swings, like this

```
newRate = max(1, sleepTime / targetRate * actualRate)
sleepTime = 0.3 * sleepTime + 0.7 * newRate 
```

This adjusts to what is actually going on in your program and on your system, and makes up for the time spent to invoke the event callback, and whatever the callback is doing on that same thread etc. Without this, you will probably not be able to get high accuracy.

Needless to say, if your rate is so high that you cannot use `Sleep` but always have to spin, **one core will be spinning continuously**. The good news: We get ever more cores on our machines, so one core matters less and less :) More serious though, as you mentioned in the comment, if your program does actual work, your event generator will have less time (and need) to waste cycles.

Check out [https://github.com/EugenDueck/EventCannon](https://github.com/EugenDueck/EventCannon) for a proof of concept implementation in .net. It's implemented roughly as described above and done as a library, so you can embed that in your program if you use .net.

# jquery - Jquery ajax 上下文未按预期工作

> ID：16143129
> 
> 赞同：1
> 
> 时间：2013-04-22T09:01:51.970
> 
> 标签：jquery

我有以下代码来执行和显示 ajax 请求。在这里，我想将 ajax returened html 注入 mainCanvas。尝试上下文“ `this`”但不工作。你能分享一些想法吗？

我也不想将上下文设置为“ `this.mainCanvas`”，因为我还必须在其他元素中注入 html。

```
 var RequestController = {
            mainCanvas: $("#mainCanvas"),   
            panelCanvas: $("#subDiv"),
            Start:function(){
                $.ajax({
                    url: "http://myserverurl.com",
                    context: this,
                    success:function(data){
                        this.mainCanvas.html(data);
                    }
                });
            }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:03:08.883

看来您正试图在渲染之前将 html 放入潜水中。始终在 DOM 完全加载时注入 html。您可以在`$(document).ready()`函数中检查这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-22T20:02:08.493

尝试这样的事情：

```
 created: function() {
    var vueInstance = this;
    $.ajax({
    url: urls.api.getStates,
    context: vueInstance,
    type: 'GET',
    success: function (response) {
        $.each(response, function (stateCodeId, name) {
            var stateObj = new Object();
            stateObj.id = stateCodeId;
            stateObj.name = name;
            vueInstance.states.push(stateObj);
        });
    },
    error: function (response) {
        console.log(response);
        $('#errorMsg').show();
        $("#errorMsg").focus();
        this.ErrorHeader = "Error(s)";
        this.ErrorMessage = "<li>An error occurred while retrieving the list of schools. Please try again later.</li>";
    }
})
} 
```

刚刚花了半个小时来处理这个问题，我知道线程很旧，但我希望这对某人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:41:33.837

使用[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)

```
var RequestController = {
    mainCanvas : $("#mainCanvas"),
    panelCanvas : $("#subDiv"),
    Start : function() {
        $.ajax({
                    url : "http://myserverurl.com",
                    context : this,
                    success : $.proxy(function(data) {
                                this.mainCanvas.html(data);
                            }, this)
                });
    }
}; 
```

# java - PrimeFaces 两个 fileUpload 控件运行冲突

> ID：16143130
> 
> 赞同：1
> 
> 时间：2013-04-22T09:01:52.960
> 
> 标签：java, jsf-2, primefaces

我有一个包含两个 fileUpload 控件的页面：

```
<h:panelGroup id="distinctAttachmentsPanel" rendered="#{multipleSendingController.selectedAttachmentList == 2}">
<h:outputText value="Allegati distinti" />
  <p:fileUpload id="distinctFileUpload" fileUploadListener="#{multipleSendingController.onDistinctFileUpload}"
    mode="advanced"
    multiple="true"
    sizeLimit="100000000"
    label="Sfoglia"
    uploadLabel="Carica"
    cancelLabel="Annulla"
    update=":form:uploadedDistinctFiles" />
  <p:selectManyCheckbox id="uploadedDistinctFiles" value="#{multipleSendingController.selectedDistinctAttachments}" converter="#{multipleSendingController.fileConverter}" layout="pageDirection">
    <f:selectItems value="#{multipleSendingController.distinctAttachments}" var="a" itemLabel="#{a.name}" itemValue="#{a}" />  
  </p:selectManyCheckbox>
  <h:outputText value="File excel" />
  <p:fileUpload id="excelFileUpload" fileUploadListener="#{multipleSendingController.onExcelFileUpload}"
    mode="advanced"
    multiple="true"
    sizeLimit="100000000"
    label="Sfoglia"
    uploadLabel="Carica"
    cancelLabel="Annulla"
    update=":form:uploadedExcelFiles" />
  <p:selectManyCheckbox id="uploadedExcelFiles" value="#{multipleSendingController.selectedExcelFiles}" converter="#{multipleSendingController.fileConverter}" layout="pageDirection">
    <f:selectItems value="#{multipleSendingController.excelFiles}" var="a" itemLabel="#{a.name}" itemValue="#{a}" />  
  </p:selectManyCheckbox>
</h:panelGroup> 
```

当我在其中一个 fileUpload 控件中选择一个或多个文件时，相同的文件会出现在另一个控件中，就像它在那里被选中一样。我无法弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:17:16.303

你应该把每个 fileUpload 放在一个单独的 h:form 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-24T15:48:47.757

虽然@ktaria 的答案可以解决问题，但它可能不是最好的解决方案。

在这种情况下，您的“widgetVar”值是冲突的，您应该使用不同的值。

# ios - iOS 可挂载文件系统 DMG 或 ISO

> ID：16143131
> 
> 赞同：0
> 
> 时间：2013-04-22T09:01:59.543
> 
> 标签：ios, iphone, objective-c, ipad, filesystems

我们正在创建一个使用数千张图像的 iOS 应用程序，目前我们正在安装我们的应用程序，然后将文件复制到应用程序文件夹。

在 Windows 桌面上，我们使用 ISO 或 VHD 文件，然后挂载存储。

有人知道 iOS 的可挂载文件系统吗？我知道他们在 OSX 上有 DMG，但我找不到任何关于它在 iOS 上受支持的信息。

我想使用可挂载存储的原因是它允许我将文件作为一个大文件而不是小的单个文件更快地复制。

我已经考虑将文件复制为 zip 文件，但解压缩文件需要很长时间。

有任何想法吗？

# python - 我如何在python中编辑json并保存

> ID：16143132
> 
> 赞同：0
> 
> 时间：2013-04-22T09:02:06.380
> 
> 标签：python, django

我有查询集，并且在每个对象上我都有像这样存储 json 的字段

`qs = Student.objects.all()`

现在每个对象都有一个名为的字段`json_data`，其中包含某个对象的嵌套 json 转储。该json对象如下：

```
 "id": 10,
        "subject_set": [
            {
                "number": "9a16b",
                "date": "2013-04-16",
                "id": 30,
                "book_set": [ … ],
                "statement_no": "dc393015"
            },
            { … },
            { … }
        ]
    },
    "status": "active"

} 
```

现在，我想对学生删除的每个主题上的 json 执行一些过滤，然后删除不符合条件的所有学生，然后将该 json 保存在原始主题上。但我无法找到如何从 json 中删除元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:22:30.067

该 json 对象是一个字典。

```
d= {1:1,2:2,3:3}
print d
#{1: 1, 2: 2, 3: 3}
del(d[1])
#{2: 2, 3: 3} 
```

您可以使用普通的字典函数来修改它。

```
subjects= parent_object['subject_set']
for i in list(subjects):
    if i['number'] in ('0000','0001'): #some subjects you want to delete
        subjects.remove(i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:31:53.420

如果您有关于从 json 中删除元素的问题。

```
In [1]: import simplejson
In [30]: h = '{"name":"earth", "status":"died"}'
In [32]: json = simplejson.loads(h)
In [34]: json
Out[34]: {'name': 'earth', 'status': 'died'}
In [35]: json.pop('status')
Out[35]: 'died'
In [36]: json
Out[36]: {'name': 'earth'} 
```

同样，您可以添加、编辑、删除元素。请参阅[此](http://simplejson.readthedocs.org/en/latest/index.html)以获取更多信息。

# android - Android - 类不是视图 android.support.v4.fragment

> ID：16143135
> 
> 赞同：1
> 
> 时间：2013-04-22T09:02:20.673
> 
> 标签：android, fragment

我必须使用带有 v4 支持的片段，但我在应用程序崩溃时出错。我找不到解决方案！

这是我的代码：

**活动广告列表.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<android.support.v4.app.Fragment
    android:id="@+id/advertListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:name="com.myapp.fragment.AdvertListFragment"/> 
```

**AdvertListActivity.java**

```
package com.myapp.app;
import java.util.ArrayList;
import com.myapp.R;
import com.myapp.classmodel.Advert;
import com.myapp.fragment.AdvertDetailFragment;
import com.myapp.interf.OnAdvertSelectedListener;
import com.google.analytics.tracking.android.EasyTracker;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class AdvertListActivity extends FragmentActivity implements     OnAdvertSelectedListener {
private AdvertListActivity activity = this;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_advert_list);
}

@Override
public void onStart() {
    super.onStart();
    // Google Analytics
    EasyTracker.getInstance().activityStart(this);
}

@Override
public void onStop() {
    super.onStop();
    // Google Analytics
    EasyTracker.getInstance().activityStop(this);
}

/**
 * Called by fragment
 * Used to pass advertList & current position to detail fragment
 */
@Override
public void onAdvertItemSelected(ArrayList<Advert> advertList, int currentPosition) {
    AdvertDetailFragment fragment = (AdvertDetailFragment) activity.getSupportFragmentManager().findFragmentById(R.id.advertDetailFragment);
    if (fragment != null && fragment.isInLayout()) {
        fragment.setData(advertList, currentPosition);
    } 
}

} 
```

**编辑**

**带有 android.support.v4.app.Fragment 的 Logcat：**

```
04-22 11:09:48.223: E/AndroidRuntime(30349): FATAL EXCEPTION: main
04-22 11:09:48.223: E/AndroidRuntime(30349): java.lang.RuntimeException: Unable to start    activity ComponentInfo{com.myapp/com.myapp.app.AdvertListActivity}:    android.view.InflateException: Binary XML file line #7: Class is not a View android.support.v4.app.Fragment
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at    android.os.Looper.loop(Looper.java:137)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at java.lang.reflect.Method.invokeNative(Native Method)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at java.lang.reflect.Method.invoke(Method.java:511)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at dalvik.system.NativeStart.main(Native Method)
04-22 11:09:48.223: E/AndroidRuntime(30349): Caused by: android.view.InflateException: Binary XML file line #7: Class is not a View android.support.v4.app.Fragment
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.view.LayoutInflater.createView(LayoutInflater.java:604)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.Activity.setContentView(Activity.java:1881)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at com.myapp.app.AdvertListActivity.onCreate(AdvertListActivity.java:19)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.Activity.performCreate(Activity.java:5104)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-22 11:09:48.223: E/AndroidRuntime(30349):    ... 11 more
04-22 11:09:48.223: E/AndroidRuntime(30349): Caused by: java.lang.ClassCastException: android.support.v4.app.Fragment cannot be cast to android.view.View
04-22 11:09:48.223: E/AndroidRuntime(30349):    at java.lang.Class.asSubclass(Class.java:1380)
04-22 11:09:48.223: E/AndroidRuntime(30349):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
04-22 11:09:48.223: E/AndroidRuntime(30349):    ... 22 more 
```

**带片段的 Logcat**

```
04-22 11:07:39.950: E/AndroidRuntime(30107): FATAL EXCEPTION: main
04-22 11:07:39.950: E/AndroidRuntime(30107): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.app.AdvertListActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.os.Looper.loop(Looper.java:137)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at java.lang.reflect.Method.invokeNative(Native Method)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at java.lang.reflect.Method.invoke(Method.java:511)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at dalvik.system.NativeStart.main(Native Method)
04-22 11:07:39.950: E/AndroidRuntime(30107): Caused by: android.view.InflateException:  Binary XML file line #7: Error inflating class fragment
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.Activity.setContentView(Activity.java:1881)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at  com.myapp.app.AdvertListActivity.onCreate(AdvertListActivity.java:19)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at  android.app.Activity.performCreate(Activity.java:5104)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-22 11:07:39.950: E/AndroidRuntime(30107):    ... 11 more
04-22 11:07:39.950: E/AndroidRuntime(30107): Caused by: java.lang.NullPointerException
04-22 11:07:39.950: E/AndroidRuntime(30107):    at com.myapp.fragment.AdvertListFragment.onCreateView(AdvertListFragment.java:63)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
04-22 11:07:39.950: E/AndroidRuntime(30107):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
04-22 11:07:39.950: E/AndroidRuntime(30107):    ... 21 more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-16T21:00:45.620

对于原生片段 ( `android.app.Fragment`) 和支持片段 ( `android.support.v4.app.Fragment`)，XML 布局文件中的语法是相同的。

```
<fragment
    android:name="com.example.myfragment"
    ... /> 
```

但是当您在活动中使用支持片段时，您的活动必须继承`FragmentActivity`（从支持包）而不是 native `Activity`。另一方面，当您使用本机片段时，您的活动可以扩展`Activity`. 但建议始终使用支持片段而不是原生片段，即使您的目标设备具有 Android 4 或更高版本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T09:10:43.183

就这样用它的工作

```
<fragment
    android:id="@+id/firstf"
    android:name="com.example.fragments_slider.fregment_classOne"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T02:00:59.820

以防万一有人犯和我一样的错误。如果您忘记添加

```
super.onCreate(savedInstanceState); 
```

在 FragmentActivity 的 onCreate 方法中。你会收到错误。

# macos - 从两个来源链接到 libgcc_s.1.dylib 会如何破坏？

> ID：16143136
> 
> 赞同：4
> 
> 时间：2013-04-22T09:02:24.533
> 
> 标签：macos, gcc, macports, dylib

我正在运行 Xcode 4.6.2 的 Mac OS X 10.8.3 主机上使用 MacPorts GCC 4.7.2+universal 构建二进制文件。

我的目标是使用编译标志为 Mac OS X 10.5-10.8 主机构建：

```
-mmacosx-version-min=10.5 
```

生成的二进制文件`my_first_binary`有两个链接到`libgcc_s.1.dylib`：

```
$ otool -L ../bin/my_first_binary
../bin/my_first_binary:
    /opt/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)
    /usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1669.0.0)
    /opt/local/lib/gcc47/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

该二进制文件是用 C++ 编写的，使用 MacPorts `g++`4.7.2+ 通用编译器编译，使用某些 CI/O 例程打开文件时会遇到一些麻烦。

我通过更改编译标志制作了第二个针对 10.6-10.8 主机的二进制文件：

```
-mmacosx-version-min=10.6 
```

第二个二进制文件只有一个指向`libgcc_s.1.dylib`库的链接：

```
$ otool -L ../bin/my_second_binary
../bin/my_second_binary:
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
    /opt/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.17.0)
    /opt/local/lib/gcc47/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0) 
```

第二个二进制文件可以正常工作并且可以毫无问题地打开文件。

我的问题是：

1.  将最低构建版本设置为 10.5 会导致`/usr/lib`-variant`libgcc_s.1.dylib`被链接怎么办？

2.  这会导致我的两个二进制文件中基于 C 的代码出现命名空间冲突或其他问题吗？

3.  如果这是一个问题，我可以做些什么来停止或解决这个问题，同时继续构建到最低 10.5 目标？

# django - Django 测试 - 检查消息以获取重定向的视图

> ID：16143149
> 
> 赞同：28
> 
> 时间：2013-04-22T09:03:04.993
> 
> 标签：django, redirect, testing, messages, django-context

我一直在为我的一个 django 应用程序编写测试，并且一直在寻找解决这个问题已经有一段时间了。我有一个视图可以发送`django.contrib.messages`用于不同情况的消息。该视图如下所示。

```
from django.contrib import messages
from django.shortcuts import redirect

import custom_messages

def some_view(request):
    """ This is a sample view for testing purposes.
    """

    some_condition = models.SomeModel.objects.get_or_none(
        condition=some_condition)
    if some_condition:
        messages.success(request, custom_message.SUCCESS)
    else:
        messages.error(request, custom_message.ERROR)
    redirect(some_other_view) 
```

现在，在测试这个 view`client.get`的响应时不包含包含 的`context`字典，`messages`因为这个 view 使用了重定向。对于呈现模板的视图，我们可以使用`messages = response.context.get('messages')`. 我们如何获得`messages`重定向视图的访问权限？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-22T09:38:15.177

在调用中使用该`follow=True`选项，[`client.get()`](https://docs.djangoproject.com/en/dev/topics/testing/overview/#django.test.client.Client.get)客户端将遵循重定向。然后，您可以测试该消息是否在您重定向到的视图的上下文中。

```
def test_some_view(self):
    # use follow=True to follow redirect
    response = self.client.get('/some-url/', follow=True)

    # don't really need to check status code because assertRedirects will check it
    self.assertEqual(response.status_code, 200)
    self.assertRedirects(response, '/some-other-url/')

    # get message from context and check that expected text is there
    message = list(response.context.get('messages'))[0]
    self.assertEqual(message.tags, "success")
    self.assertTrue("success text" in message.message) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-15T14:34:51.307

您可以像这样将 get_messages() 与 response.wsgi_request 一起使用（在 Django 1.10 中测试）：

```
from django.contrib.messages import get_messages  
...
def test_view(self):
    response = self.client.get('/some-url/') # you don't need follow=True
    self.assertRedirects(response, '/some-other-url/')
    # each element is an instance of  django.contrib.messages.storage.base.Message
    all_messages = [msg for msg in get_messages(response.wsgi_request)]

    # here's how you test the first message
    self.assertEqual(all_messages[0].tags, "success")
    self.assertEqual(all_messages[0].message, "you have done well") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T00:59:32.337

如果您的视图正在重定向并且您`follow=true`在对测试客户端的请求中使用上述内容将不起作用。我最终编写了一个辅助函数来获取与响应一起发送的第一条（在我的情况下是唯一的）消息。

```
@classmethod
def getmessage(cls, response):
    """Helper method to return message from response """
    for c in response.context:
        message = [m for m in c.get('messages')][0]
        if message:
            return message 
```

您将其包含在您的测试类中并像这样使用它：

```
message = self.getmessage(response) 
```

`response`你从 a`get`或`post`到 a得到的东西在哪里`Client`。

这有点脆弱，但希望它可以节省其他人一些时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-24T07:41:58.900

我在使用 3rd 方应用程序时遇到了同样的问题。

如果您想从另一个视图中返回 HttpResponseRedict （您无法从中访问上下文）的视图中获取消息，您可以使用[`get_messages(request)`](https://docs.djangoproject.com/en/dev/ref/contrib/messages/#django.contrib.messages.get_messages)

```
from django.contrib.messages import get_messages  

storage = get_messages(request)  
for message in storage:  
    do_something_with_the_message(message) 
```

不过，这会清除消息存储，因此如果您想稍后从模板访问消息，请添加：

```
storage.used = False 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-23T07:26:59.900

替代方法模拟消息（不需要遵循重定向）：

```
from mock import ANY, patch
from django.contrib import messages

@patch('myapp.views.messages.add_message')
def test_some_view(self, mock_add_message):
    r = self.client.get('/some-url/')
    mock_add_message.assert_called_once_with(ANY, messages.ERROR, 'Expected message.')  # or assert_called_with, assert_has_calls... 
```

# javascript - jQuery has/ contains words

> ID：16143151
> 
> 赞同：3
> 
> 时间：2013-04-22T09:03:12.900
> 
> 标签：javascript, jquery

我想实现这一点，如果“ `clientpsseabq`”字符串包含在变量中，`Var_words`则等于`true`，否则`false`。我只是不知道我需要使用什么方法或功能？

```
var Var_words = "https://www.go.me/outputsearchs/clientpsseabq"

if ( Var_words contains string "`clientpsseabq`"){
   return true;
}else{
   return false;
} 
```

如果有人可以帮助我，我该如何完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:04:29.527

你可以试试这个

```
if (Var_words.indexOf("clientpsseabq") >= 0) 
```

或注意区分大小写

```
if (Var_words.toLowerCase().indexOf("clientpsseabq") >= 0)
{
   // your code
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T09:05:04.583

使用（本机 JavaScript）函数[`String.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)：

```
if(Var_words.indexOf('clientpsseabq') !== -1) {
    return true;
} else {
    return false;
} 
```

`.indexOf()`返回字符串的索引。如果未找到该字符串，则返回`-1`.

一个更小、更简洁的解决方案是直接返回条件的值：

```
return (Var_words.indexOf('clientpsseabq') !== -1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:06:28.097

```
 if(Var_words.indexOf("clientpsseabq") >= 0))
 {

 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:06:35.950

使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)来测试案例

```
if(/clientpsseabq/.test(Var_words)){
    //given string exists
} else {
    //given string does not exists
} 
```

# jquery - 如何将图像动态添加到 Photoswipe？- 概览隐藏

> ID：16143152
> 
> 赞同：0
> 
> 时间：2013-04-22T09:03:18.863
> 
> 标签：jquery, mobile, photoswipe

我正在尝试将图像动态附加到 Photoswipe。

```
$('#imgholder').on('tap', function(event){  
  (function(window,PhotoSwipe){                                                                         var                                                                                        options = {
preventHide: true,
getImageSource: function(obj){
return obj.url;
},
getImageCaption: function(obj){
return obj.caption;
}
},
function(){
for (var i = 0; i < images.length-1; i++)
{
instance = PhotoSwipe.attach([{url:images[i]}],options);
}
}
instance.show(0);
}(window,window.Code.PhotoSwipe));
}); 
```

我试图避免使用图库标签，因为我不想显示图库概览。我的网址存储在一个简单的数组中。

```
var images = result.news[index].bilder_url.split("-,-"); 
```

是否可以将此数组附加到 photoswipe 或运行一个简单的 for 循环？还是有不同的方法？

提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:13:07.923

```
(function(window, PhotoSwipe){
var 
   options = {},
   instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options);
   instance.show(1);   
}(window, window.Code.PhotoSwipe)); 
```

这就是诀窍:)

在 PhotoSwipe 提供的示例中找到。

# ios - 带有 unsigned char * 的内存泄漏

> ID：16143159
> 
> 赞同：4
> 
> 时间：2013-04-22T09:03:39.837
> 
> 标签：ios, objective-c

我有一个返回的方法`unsigned char *`：

```
- (unsigned char *)calledMethod {
    ...
    unsigned char *result = (unsigned char*) calloc(size * 4, sizeof(unsigned char));
    ...
    return result;
} 
```

问题是，当我调用此方法时：

```
unsigned char *myVariable = [myClass calledMethod]; 
```

我遇到内存泄漏。

我应该如何释放内存？

我已经试过了`free(myVariable)`，但没有用。如果我调用`free(result)`我的`calledMethod`方法，就不会有泄漏，但是我不能返回它。提前致谢！

**编辑：**

问题是，我将`myVariable`UIImage 的像素数据存储在其中（每个`CGPoint`:rgba 有 4 个组件）。我必须修改一些像素并重建图像。我正在访问这样一个点的数据：

```
int byteIndex = (bytesPerRow * point.y) + point.x * bytesPerPixel;
CGFloat red   = (myVariable[byteIndex]     * 1.0) / 255.0;
CGFloat green = (myVariable[byteIndex + 1] * 1.0) / 255.0;
CGFloat blue  = (myVariable[byteIndex + 2] * 1.0) / 255.0;
CGFloat alpha = (myVariable[byteIndex + 3] * 1.0) / 255.0; 
```

如果我使用`NSMutableData`，`length`参数是什么，我将`[NSMutableData dataWithBytes:(const void *) length:(NSUInteger)]`如何修改给定的数据`CGPoint`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T09:15:30.727

`free()`是调用释放内存的正确函数。如果你仍然有内存泄漏，你要么根本没有调用，要么`free()`调用的不够多。例如，以下内容会泄漏：

```
myVariable = [foo calledMethod];
// some stuff
myVariable = [foo calledMethod];
// more stuff
free(myVariable); 
```

我是否可以建议，不要使用像这样的原始缓冲区，而是使用[NSMutableData](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html)。这样，您将受益于您正在使用的任何 Objective-C 内存管理方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:11:08.940

你在做什么是正确的。您返回分配给的 malloc-ed 内存块，`myVariable`然后使用`free(myVariable)`. 您向我们展示的代码不对泄漏负责。也许它在于`...`？静态分析告诉你什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:10:09.077

完成后调用`free`将释放内存。你确定你在尝试调用时正确地检测了东西`free(myVariable)`吗？那应该行得通。

# icu - 由于缺少 findBasename，构建 icu4c 失败

> ID：16143161
> 
> 赞同：0
> 
> 时间：2013-04-22T09:03:42.783
> 
> 标签：icu, emscripten

我尝试通过*Emscripten* ( *clang* )交叉编译*icu4c 51.1*

 **```
emconfigure source/configure --host=i386-pc-linux-gnu --prefix=${myprefix} --enable-static --disable-shared --disable-dyload --disable-renaming CXXFLAGS='-DU_USING_ICU_NAMESPACE=0' CPPFLAGS='-DU_DISABLE_RENAMING=1'
emmake make
emmake make install 
```

它可以很好地编译大多数源代码，但失败了

```
Unpacking ../source/data/in/icudt51l.dat and generating out/tmp/icudata.lst (list of data files)
LD_LIBRARY_PATH=../lib:../stubdata:../tools/ctestfw:$LD_LIBRARY_PATH  ../bin/icupkg -d ./out/build/icudt51l --list -x \* ../source/data/in/icudt51l.dat -o out/tmp/icudata.lst
run-detectors: warning: unable to exec /usr/bin/lli-2.8: No such file or directory
run-detectors: warning: unable to exec /usr/bin/lli-2.9: No such file or directory
LLVM ERROR: Program used external function 'findBasename' which could not be resolved!
make[1]: *** [out/tmp/icudata.lst] Error 1
make[1]: Leaving directory `/home/andreas/.emscripten-libs/sources/icu4c/51.1/data'
make: *** [all-recursive] Error 2 
```

所以我想知道，它试图在哪里找到`findBasename`以及这些数据编译的全部内容。

编辑：

错误消息来自`icupkg`使用 clang 构建，在这种情况下没有意义。如何指定库是用*clang*构建的，而工具是用另一个编译器构建的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T01:09:54.170

听起来它无法找到，我猜，ICU 工具实用程序库在 ../lib - 可能会尝试在 icupkg 上运行 ldd 或等效项**

# jquery - jQuery一个元素事件影响另一个

> ID：16143164
> 
> 赞同：0
> 
> 时间：2013-04-22T09:03:47.563
> 
> 标签：jquery, focus, hide, show

如果某处的输入字段被聚焦，我试图实现的是显示/隐藏一个 div。显示有效，但不会隐藏它。我是 jQuery 新手

我无法弄清楚我的代码有什么问题。

```
$(document).ready(function(){

if ($("#a").has(":focus")){
        $("#b").css("visibility","visible");}
    else {
        $("#b").css("visibility","hidden");}
}); 
```

html:

```
 <ul>
<li id="a" >
    <div class="label">
        <label id="company" class="description" for="company">Company</label>
    </div>
    <div class="input">
        <input id="inputcompany" name="company" class="element text medium" type="text" maxlength="255" value=""/> 
    </div> 
</li>
<li id="b" style="visibility: hidden;">
    <div class="label">
        <label class="description" for="company">Name </label>
    </div>
    <div class="input">
        <input id="company" name="company" class="element text medium" type="text" maxlength="255" value=""/> 
    </div> 
</li> 
```

对不起，伙计们，secon li 应该是 id "b"。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:07:47.950

javascript 代码只会执行一次。似乎您想要一个事件处理程序 - 每当`#a`失去/获得焦点时都会执行的代码。

```
$('#a').focus(function() {
  $("#b").css("visibility","visible");
}).blur(function() {
   $("#b").css("visibility","hidden");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:13:47.573

如果您想在第一个 li 时显示下一个 li，我认为您的做法是错误`hovering`的，我会这样做：

```
//For example on mouseover the #a
$('#a').on({
    mouseover:function() {
        $('#b').css("visibility","visible"); //we show the #b
    },
    //on mouseleave
    mouseleave: function() {
        if($('#a').find('input').val().length == 0) { //if nothing was entered in the first input
            $('#b').css("visibility","hidden"); //hide the #b
        }
    }
}); 
```

在这里查看一个[活生生的例子](http://jsfiddle.net/G83fS/)。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:14:34.600

试试这个，

```
$('#a input').focus(function() {
  $("#b").css("visibility","visible");
}).blur(function() {
   $("#b").css("visibility","hidden");
}); 
```

# jpa - 来自任何索引实体的休眠搜索搜索

> ID：16143167
> 
> 赞同：0
> 
> 时间：2013-04-22T09:03:52.210
> 
> 标签：jpa, hibernate-search

我正在使用 Hibernate-search 在我的 Jboss 应用程序中搜索数据。我有 3 个 JPA 实体类，它们都扩展了 BaseEntity 类，每个都由 Lucene 索引。例如：

```
@MappedSuperclass
public abstract class BaseEntity implements Serializable {
    @Temporal(TemporalType.TIMESTAMP)
    private Date created;
    public abstract Long getId();
}

@Entity
@Table(name = "DVD")
public class Dvd extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Field
    private String title;
}

@Entity
@Table(name = "BOOK")
public class Book extends BaseEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Field
    private String author;
} 
```

现在我想通过通配符搜索查询来搜索 DVD 标题或图书作者，并将结果列表作为 List。这就是我到目前为止所拥有的：

```
public List<BaseEntity> search(String query, int firstResult, int maxResults) {
    List<BaseEntity> results = null;
    FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(em);
    Query luceneQuery = new WildcardQuery(new Term("*", "*" + query + "*"));
    FullTextQuery fullTextQuery = fullTextEntityManager.createFullTextQuery(luceneQuery, BaseEntity.class);
    fullTextQuery.setFirstResult(firstResult);
    fullTextQuery.setMaxResults(maxResults);
    results = fullTextQuery.getResultList();
    return results;
} 
```

但是有了这个，我没有得到任何结果。如果不为每个实体使用 buildQueryBuilder 怎么可能让它工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T21:07:06.243

您需要对类使用可变参数样式的方法，如下所示：

```
FullTextQuery fullTextQuery = fullTextEntityManager.createFullTextQuery(luceneQuery, DVD.class, Book.class); 
```

这是因为当 Hibernate Search 创建搜索查询时，它会将类名添加到查询中（对于 _hibernate_class 字段，它是索引类的名称）。

# android - 在android中创建推送通知

> ID：16143175
> 
> 赞同：1
> 
> 时间：2013-04-22T09:04:22.920
> 
> 标签：android, push-notification, google-cloud-messaging

如何使用 GCM 或 C2DM 在 Android 中创建推送通知我已经尝试并检查了一些网站但没有得到确切的答案。我需要知道它是如何工作的。任何人都可以为我提供关于推送通知的好教程

任何人都可以帮助我。谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T09:24:08.360

它取决于您的要求，您必须做什么。

[这是 C2DM 的示例](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)：在此示例中，android 设备在服务器向所有设备发送消息后注册到服务器。所以只有一种通信方式（服务器到 Android 设备）

![在此处输入图像描述](https://i.stack.imgur.com/Vr8Ku.png)

所以所有事情都在服务器端完成。只需下载本[教程](http://developer.android.com/google/gcm/demo.html)。服务器端 (PHP) 和 Android 代码均可用。

## 编辑：

你从谷歌服务获得了应用程序密钥，你必须把它放在服务器端。

**SENDER_ID** – 当您想向服务器注册您的设备时必须发送的 Google 项目 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T05:22:11.057

You can use [GCM demo app](http://developer.android.com/google/gcm/demo.html) supported by Google. One needs to install GCM libs using SDK manager and then create API keys in Google APIs console. Follow instructions from the link and you can create an app that receives push notifications from GCM server. I did try this and it worked even on my Android emulators. You need to use Emulator that targets Google APIs though.

# controller - 隐藏视图并使用带有 extjs 的 clickof 按钮显示另一个视图

> ID：16143180
> 
> 赞同：0
> 
> 时间：2013-04-22T09:04:36.250
> 
> 标签：controller, extjs4, actionview

单击连接按钮后，我有一个登录视图，我希望显示登录表单和主视图。单击连接按钮后，我有一个登录视图，我希望显示登录表单和主视图。单击连接按钮后，我有一个登录视图，我希望显示登录表单和主视图。我用这个

```
'login button[action=connect]': {  
            'click' : function(button, event, opt) {  
                var view = Ext.widget('home');}// home c'est le main view 
```

但是当我运行它时，登录视图并没有消失，我在同一页面上看到了两个视图

任何人都有解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T18:37:21.820

您必须关闭登录视图：

```
Ext.getCmp('login_view_id').close(); //login_view_id : the 'id' of the login view 
```

或者

```
this.getLogin().close(); //login : refrence to the login view 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T04:40:09.163

使用卡片布局将您的视图进出洗牌：[http ://docs.sencha.com/extjs/4.1.3/#!/api/Ext.layout.container.Card](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.layout.container.Card)

# c++ - 传递 const std::auto_ptr<> 作为 std::auto_ptr<_Tp>::operator std::auto_ptr_ref<_Tp1>() 的这个参数丢弃限定符

> ID：16143185
> 
> 赞同：0
> 
> 时间：2013-04-22T09:04:48.507
> 
> 标签：c++, auto, pointers

在编译代码时，我发现了这个错误并且无法跟踪它，因为我在网上没有看到任何对此类错误的引用。请帮忙 - -

```
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/memory:52,
                 from ./PbxComm.h:24,
                 from ./NsaComm.h:23,
                 from ./NsaBundle.h:22,
                 from NsaBundle.C:19:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h: In static member function âstatic _ForwardIterator std::__uninitialized_copy<<anonymous> >::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<SnowTTan>*, std::vector<std::auto_ptr<SnowTTan>, std::allocator<std::auto_ptr<SnowTTan> > > >, _ForwardIterator = std::auto_ptr<SnowTTan>*, bool <anonymous> = false]â:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:117:   instantiated from â_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<SnowTTan>*, std::vector<std::auto_ptr<SnowTTan>, std::allocator<std::auto_ptr<SnowTTan> > > >, _ForwardIterator = std::auto_ptr<SnowTTan>*]â
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:257:   instantiated from â_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<SnowTTan>*, std::vector<std::auto_ptr<SnowTTan>, std::allocator<std::auto_ptr<SnowTTan> > > >, _ForwardIterator = std::auto_ptr<SnowTTan>*, _Tp = std::auto_ptr<SnowTTan>]â
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_vector.h:243:   instantiated from âstd::vector<_Tp, _Alloc>::vector(const std::vector<_Tp, _Alloc>&) [with _Tp = std::auto_ptr<SnowTTan>, _Alloc = std::allocator<std::auto_ptr<SnowTTan> >]â
./NsaForm207.h:45:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:74: error: passing âconst std::auto_ptr<SnowTTan>â as âthisâ argument of âstd::auto_ptr<_Tp>::operator std::auto_ptr_ref<_Tp1>() [with _Tp1 = SnowTTan, _Tp = SnowTTan]â discards qualifiers
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h: In static member function âstatic _ForwardIterator std::__uninitialized_copy<<anonymous> >::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<line_range>*, std::vector<std::auto_ptr<line_range>, std::allocator<std::auto_ptr<line_range> > > >, _ForwardIterator = std::auto_ptr<line_range>*, bool <anonymous> = false]â:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:117:   instantiated from â_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<line_range>*, std::vector<std::auto_ptr<line_range>, std::allocator<std::auto_ptr<line_range> > > >, _ForwardIterator = std::auto_ptr<line_range>*]â
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:257:   instantiated from â_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<line_range>*, std::vector<std::auto_ptr<line_range>, std::allocator<std::auto_ptr<line_range> > > >, _ForwardIterator = std::auto_ptr<line_range>*, _Tp = std::auto_ptr<line_range>]â
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_vector.h:243:   instantiated from âstd::vector<_Tp, _Alloc>::vector(const std::vector<_Tp, _Alloc>&) [with _Tp = std::auto_ptr<line_range>, _Alloc = std::allocator<std::auto_ptr<line_range> >]â
./NsaForm346.h:70:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:74: error: passing âconst std::auto_ptr<line_range>â as âthisâ argument of âstd::auto_ptr<_Tp>::operator std::auto_ptr_ref<_Tp1>() [with _Tp1 = line_range, _Tp = line_range]â discards qualifiers
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h: In static member function âstatic _ForwardIterator std::__uninitialized_copy<<anonymous> >::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<tsg_500>*, std::vector<std::auto_ptr<tsg_500>, std::allocator<std::auto_ptr<tsg_500> > > >, _ForwardIterator = std::auto_ptr<tsg_500>*, bool <anonymous> = false]â:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:117:   instantiated from â_ForwardIterator std::uninitialized_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<tsg_500>*, std::vector<std::auto_ptr<tsg_500>, std::allocator<std::auto_ptr<tsg_500> > > >, _ForwardIterator = std::auto_ptr<tsg_500>*]â
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:257:   instantiated from â_ForwardIterator std::__uninitialized_copy_a(_InputIterator, _InputIterator, _ForwardIterator, std::allocator<_Tp>&) [with _InputIterator = __gnu_cxx::__normal_iterator<const std::auto_ptr<tsg_500>*, std::vector<std::auto_ptr<tsg_500>, std::allocator<std::auto_ptr<tsg_500> > > >, _ForwardIterator = std::auto_ptr<tsg_500>*, _Tp = std::auto_ptr<tsg_500>]â
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_vector.h:243:   instantiated from âstd::vector<_Tp, _Alloc>::vector(const std::vector<_Tp, _Alloc>&) [with _Tp = std::auto_ptr<tsg_500>, _Alloc = std::allocator<std::auto_ptr<tsg_500> >]â
./NsaForm500.h:66:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_uninitialized.h:74: error: passing âconst std::auto_ptr<tsg_500>â as âthisâ argument of âstd::auto_ptr<_Tp>::operator std::auto_ptr_ref<_Tp1>() [with _Tp1 = tsg_500, _Tp = tsg_500]â discards qualifiers 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:07:28.420

从您的消息标题看来，您正在从 auto_ptr 中丢弃 'const' 限定符，这是不允许的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:33:02.027

这是在向量（通常是 STL 容器）中使用 auto_ptr 的问题。我已经能够将 unique_ptr 与适当的编译标志一起使用。这解决了我的问题。

# android - 我可以在 android 4.1.2 中发送“短信接收意图”吗？

> ID：16143186
> 
> 赞同：0
> 
> 时间：2013-04-22T09:04:48.757
> 
> 标签：android, sms

此代码不适用于 android 版本 4.1.2，

```
private static void createFakeSms(Context context, String sender,String body) 
{
  byte[] pdu = null;
  byte[] scBytes = PhoneNumberUtils.networkPortionToCalledPartyBCD("0000000000");
  byte[] senderBytes = PhoneNumberUtils.networkPortionToCalledPartyBCD(sender);
  int lsmcs = scBytes.length;
  byte[] dateBytes = new byte[7];
  Calendar calendar = new GregorianCalendar();
  dateBytes[0] = reverseByte((byte) (calendar.get(Calendar.YEAR)));
  dateBytes[1] = reverseByte((byte) (calendar.get(Calendar.MONTH) + 1));
  dateBytes[2] = reverseByte((byte) (calendar.get(Calendar.DAY_OF_MONTH)));
  dateBytes[3] = reverseByte((byte) (calendar.get(Calendar.HOUR_OF_DAY)));
  dateBytes[4] = reverseByte((byte) (calendar.get(Calendar.MINUTE)));
  dateBytes[5] = reverseByte((byte) (calendar.get(Calendar.SECOND)));
  dateBytes[6] = reverseByte((byte) ((calendar.get(Calendar.ZONE_OFFSET) + calendar
 .get(Calendar.DST_OFFSET)) / (60 * 1000 * 15)));
  try 
  {
    ByteArrayOutputStream bo = new ByteArrayOutputStream();
    bo.write(lsmcs);
    bo.write(scBytes);
    bo.write(0x04);
    bo.write((byte) sender.length());
    bo.write(senderBytes);
    bo.write(0x00);
    bo.write(0x00); // encoding: 0 for default 7bit
    bo.write(dateBytes);
    try 
    {
      String sReflectedClassName = "com.android.internal.telephony.GsmAlphabet";
      Class cReflectedNFCExtras = Class.forName(sReflectedClassName);
      Method stringToGsm7BitPacked = cReflectedNFCExtras.getMethod(
      "stringToGsm7BitPacked", new Class[] { String.class });
      stringToGsm7BitPacked.setAccessible(true);
      byte[] bodybytes = (byte[]) stringToGsm7BitPacked.invoke(null,body);
      bo.write(bodybytes);
     } 
     catch (Exception e) 
     {
     }
     pdu = bo.toByteArray();
     }  
     catch (IOException e) 
     {
     }
    Intent intent = new Intent();
    intent.setClassName("com.android.mms",
            "com.android.mms.transaction.SmsReceiverService");
    intent.setAction("android.provider.Telephony.SMS_RECEIVED");
    intent.putExtra("pdus", new Object[] { pdu });
    intent.putExtra("format", "3gpp");
    context.startService(intent);
}

private static byte reverseByte(byte b) {
    return (byte) ((b & 0xF0) >> 4 | (b & 0x0F) << 4);
} 
```

当我打电话`context.startService(intent)`时，我得到了这个例外

```
java.lang.SecurityException: Not allowed to start service Intent { act=android.provider.Telephony.SMS_RECEIVED cmp=com.android.mms/.transaction.SmsReceiverService (has extras) } without permission not exported from uid 10046** 
```

在虚拟设备 4.1.2 上它可以完美运行，但不能在我的 GS2 设备上运行。

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:42:37.237

在较新版本的 Android 中，这是一个受保护的广播，出于安全原因只能由系统应用程序发送。

让您的应用程序发送它的唯一方法是说服 OEM 使其成为其 ROM 上的系统应用程序

# memory-leaks - 具有递增后缀索引的 gstreamer 元素是否意味着可能的内存泄漏？

> ID：16143195
> 
> 赞同：1
> 
> 时间：2013-04-22T09:05:10.843
> 
> 标签：memory-leaks, element, gstreamer, playbin2

我基于gstreamer-1.0编写了一个简单的代码，使用playbin对某个文件进行循环解码，并且每次playbin创建元素mpeg2dec元素时，该元素都有一个新名称。最开始的名称可能是“mepg2dec0”，然后再次播放文件时，它将后缀索引增加到“mpeg2dec1”，“mpeg2dec2”等等。

以下是部分代码引用：

```
do {
    playbin=gst_element_factory_make("playbin", "play");
    g_object_set(G_OBJECT(playbin), "uri", "file:///home/gst/Videos/1.ts", NULL);
    /* add message receivers ... */
    gst_element_set_state(GST_ELEMENT(playbin), GST_STATE_PAUSED);
    gst_element_set_state(GST_ELEMENT(playbin), GST_STATE_PLAY);
    /* wait until got EOS */
    gst_element_set_state(GST_ELEMENT(playbin), GST_STATE_PAUSED);
    gst_element_set_state(GST_ELEMENT(playbin), GST_STATE_NULL);
    gst_object_unref(GST_ELEMENT(playbin));
} while(1); 
```

这个后缀索引增加是否意味着未释放的元素可能存在内存泄漏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:18:25.120

后缀的递增主要意味着*某些东西*会跟踪当前的后缀。

这*可能*是，gstreamer 分配所有元素并维护它们的列表。当添加一个新元素时，gstreamer 可以检查当前分配的元素名称并根据此知识生成一个新元素（例如，首先尝试“mepg2dec0”作为名称，如果已经使用，请尝试“mepg2dec1”等等, 直到找到一个自由名称）。

然而，这个*东西*也可以是一个单一的整数（每个元素类型），它是单调递增的（没有索引重用），无论何时创建一个新元素（并且完全忽略是否以及哪些元素被破坏）。

所以回答你的问题：

**不**，每个元素都有一个新名称并不能表明是否存在内存泄漏。

# c++ - QObject 使用 setParent() 将 QList 设置为父级

> ID：16143201
> 
> 赞同：0
> 
> 时间：2013-04-22T09:05:27.343
> 
> 标签：c++, qt, qobject, qlist

我正在尝试使用`QObject`树删除机制来删除列表以及`QObject`存储在列表中的所有 s。Qt 仍然是我非常周到的领域......

```
QList<QObject*>* list = new QList<QObject*>();
QObject* obj1 = new QObject();
QObject* obj2 = new QObject();
obj1->setParent(obj2);
obj2->setParent((QObject*)list); 
```

我在最后一行得到“分段错误”。不能`QList`当父母吗？它不是继承自`QObject`吗？

**编辑**：

主要问题 - 是否可以方便地删除列表和所有列表元素而不扩展`QList`类？这需要由客户端调用，所以它必须很简单。

我想简单地打电话：

```
delete list; 
```

并不是

```
qDeleteAll(list);
delete list; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:07:25.110

不 。`QList`不继承自`QObject`。如果您想轻松删除列表的内容，可以使用`qDeleteAll(list)`.

*编辑：* 这是未经测试的，基类可能存在没有虚拟析构函数的问题 - 但请先给出它。

```
template < class T >
class MyList : public QList< T >
{
    static_assert( std::is_pointer< T >::value,
                   "T must be a pointer." );
    //  Constructors...
    ...
    virtual ~MyList() { qDeleteAll( *this ); }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:10:16.703

选项1）

```
QList<QObject*> list;

.. somewhere in the code

QObject * obj = new QObject();
list << obj;

... 

then 

onDelete() {    // variant 1
       QObject * ptr;
       foreach(ptr, list) {
          delete ptr;
       }
       list(clear);
}

onDelete() { // variant 2
     qDeleteAll(list);
} 
```

选项 2)

```
 QObject * parent = new QObject();

 somewhere in a code 
 ...
 QObject * child1 = new QObject(parent);
 QObject * child2 = new QObject(parent);

 onDelete() {
     delete parent;   // all children deleted automatically
 } 
```

升级版：

从您的问题更新中，我可以认为您根本没有 QList，只需使用 QObject 提供的功能，如果您需要孩子，请使用适当的 childer() 方法，该方法将为您提供 QList

# javascript - 如何在asp.net代码后面创建图库

> ID：16143203
> 
> 赞同：-4
> 
> 时间：2013-04-22T09:05:36.990
> 
> 标签：javascript, jquery, asp.net

我想在 vb 下的 asp.net 中从服务器创建一个数据画廊，每个画廊项目应该看起来像下面的快照 ![在此处输入图像描述](https://i.stack.imgur.com/IVqBt.png)

它应该看起来像下面的快照 ![在此处输入图像描述](https://i.stack.imgur.com/hnh2V.png)

请帮助或指导我。亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:21:29.260

第一个解决方案：

使用列表视图或中继器创建图库项目，然后使用 Jquery 为它们设置动画。

第二种解决方案：尝试搜索现成的 asp.net 图片库，例如检查： [Creating an Image Grid (Photo Gallery) with ASP.NET using ListView Controlr](http://geekswithblogs.net/omtalsania7/archive/2012/12/27/how-to-create-an-image-grid-with-asp.net-44.5-using.aspx)

# java - 如何从java程序启动activiti工作流

> ID：16143210
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:01.240
> 
> 标签：java, activiti

我要求在 ui 级别提交表单值后启动工作流。在提交侦听器中表示如何调用工作流，我将所有表单值存储在一个对象中。现在如何调用工作流，如何发送这些提交的表单值（对象）发送到工作流，因为我想在其他表单中显示这些表单值（在 UI 级别）。用户批准这些后，它会转到下一个用户，他也被批准，然后最终完成工作流。

例如：在 ui 级别中，我使用用户名、电子邮件、地址、移动设备等字段创建表单。最后单击提交，在我的工作流程启动并通过用户（用户 A、用户 B）的两级验证批准数据后。

同时我为收件箱实现代码，在该收件箱中我想显示这些表单值。每当用户提交表单时，它都会进入收件箱，在收件箱内我会收到批准请求，我会批准那个。

目前我创建了工作流启动、用户 A、用户 B、结束事件。每当我启动流程实例流程时，我都会显示正在运行的任务、任务服务中的受让人等，但我不知道如何传递提交的表单从 ui 级别到工作流的值，并在收件箱中显示该数据。

我知道通过 getVariables() 我们获得了所有属性。但是如何从 ui 到工作流以及从工作流到 ui？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T12:40:13.850

首先，您必须实例化 ProcessEngine 类，如此处所述：

`ProcessEngine processEngine = ProcessEngineConfiguration.createProcessEngineConfigurationFromResourceDefault() .buildProcessEngine();`

之后得到一个 RuntimeService 的实例，如此处所述：

`RuntimeService runtimeService = processEngine.getRuntimeService();`

您可以使用以下方法创建流程实例：

`ProcessInstance processInstance = runtimeService.startProcessInstanceByKey("processId");`

您需要将 activiti 包中可用的所有 jars 文件附加到您的项目库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T06:04:55.390

提交值后，它会进入流程图中的下一个级别。所以这里`taskId`将创建一个新的。这是用于获取表单属性的`Java APIs`代码`Activiti` ：

```
FormService formService = processEngine.getFormService();
TaskService taskService1 = processEngine.getTaskService();
TaskQuery taskQuery1 = taskService1.createTaskQuery().taskAssignee("gonzo");
List<Task> taskList1 = taskQuery1.list();
int j = 0;
for(Task task : taskList1){
    j++;
TaskFormData taskFormData = formService.getTaskFormData(task.getId());
List<FormProperty> listFormProperty = taskFormData.getFormProperties();
for(FormProperty formProperty : listFormProperty){
       out.println(task.getId()+":"+task.getName()+"id:"+formProperty.getId());
       out.println(task.getId()+":"+task.getName()+"name:"+formProperty.getName());
       out.println(task.getId()+":"+task.getName()+"type:"+formProperty.getType().getName());
       out.println(task.getId()+":"+task.getName()+"value:"+formProperty.getValue());

    }

    out.println("task "+j+"is "+task.getId()+":"+task.getName()+":"+task.getAssignee()+":"+task.getDescription());
} 
```

上面的代码可帮助您获取所有表单属性，例如,`type`等等。`name``value`

您也可以通过 Activiti 提供的 REST API 实现相同的属性。这是 [表单属性 API](http://www.activiti.org/userguide/#N12E90)。

# android - 锁定屏幕

> ID：16143211
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:01.293
> 
> 标签：android, passwords, locking

我想使用用户从应用程序本身指定的特定密码锁定应用程序。

> 例如，如果它收到短信“LOCK WITH PASSWORD abc”，它应该用 abc 锁定手机。

我曾与设备管理员尝试过。但它只会锁定手机。

我使用的代码是......

```
 IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON); 
                filter.addAction(Intent.ACTION_SCREEN_OFF);

                ComponentName mAdminName = new ComponentName(ScreenLockService.this,LockActivity.class);

                if(!mDPM.isAdminActive(mAdminName))
                {
                    Intent intent1 = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
                    intent1.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mAdminName);
                      intent1.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"is locked");
                      intent1.putExtra("force-locked", DeviceAdminInfo.USES_POLICY_FORCE_LOCK);

                    context.startActivity(intent1);
                    System.out.println("The Device Could not lock because device admin not enabled");
                    Toast.makeText(getApplicationContext(), "Activate The DeviceAdmin and then Click start Again", Toast.LENGTH_LONG).show();
                    //mDPM.lockNow();
                }
                else
                {
                    System.out.println("The Device  device admin enabled");
                    Intent  intent1 = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
                    intent1.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mAdminName);
                    intent1.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,"onEnabled");
                    mDPM.lockNow();
                    mDPM.setMaximumTimeToLock(mAdminName, 0);
                    intent1.putExtra("force-locked", DeviceAdminInfo.USES_POLICY_FORCE_LOCK);
                    context.startActivity(intent1); 
}
} 
```

有没有办法让它成为可能..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:16:31.647

你必须使用 resetPassword

来自文档

`public boolean resetPassword (String password, int flags)`

> 强制用户使用新的设备解锁密码（访问整个设备所需的密码，而不是单个帐户的密码）。这立即生效

然后调用lock方法锁定设备

`mDPM.lockNow()`

# python-2.7 - 使用 Python 通过 SSH 的 Mkdir 不起作用

> ID：16143214
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:18.740
> 
> 标签：python-2.7, ssh, pexpect

我正在尝试使用 python 脚本通过 SSH 创建一个新目录。当我使用 Python 命令行尝试我的命令时，它就可以工作。但是当我尝试通过脚本执行相同操作时，它不会创建新的“测试”文件夹（我什至将脚本中的命令复制/粘贴到 Python cmd 中以验证它们是否正确并且它们在那里工作）。那么有什么想法为什么它不能通过脚本工作？

使用的代码：

```
child = pexpect.spawn('ssh 192.168.56.101 -oStrictHostKeyChecking=no')
child.expect=('password:')
child.sendline('MyPwd')
child.sendline('mkdir /home/myUser/Desktop/test') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:29:38.457

当我只添加另一行时似乎工作

例如

```
child.sendline('\n') 
```

所以整个脚本是

```
child = pexpect.spawn('ssh 192.168.56.101 -oStrictHostKeyChecking=no')
child.expect=('password:')
child.sendline('MyPwd')
child.sendline('mkdir /home/myUser/Desktop/test')
child.sendline('\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T12:52:12.313

我通常用来解决这个问题的方法是与主机同步。在我向机器发送一些东西后，我期望得到一个答案，通常会在机器的提示中翻译。所以，在你的情况下，我会这样做：

```
child = pexpect.spawn('ssh 192.168.56.101 -oStrictHostKeyChecking=no')
child.expect('password:')
child.sendline('MyPwd')
child.expect('YourPromptHere')
child.sendline('mkdir /home/myUser/Desktop/test')
child.expect('YourPromptHere') 
```

如果您在单个目标上运行脚本，或者使用正则表达式（例如，“(\$ )|(#)|(>)”），您可以将**YourPromptHere替换为机器的提示符。**

tl;dr ：总结一下我所说的，您需要等到上一个操作完成后再发送一个新操作。

# xpages-ssjs - XPages如何在重复中为每个文档调用函数

> ID：16143215
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:21.433
> 
> 标签：xpages-ssjs

在我的 XPage 中，我有一个重复控件。对于该重复控件中的每个文档，我需要传递一个函数，该函数执行一些疯狂的逻辑并可能更新该文档。

我能想到的唯一方法是使用调用函数的逻辑隐藏计算文本。有没有更好的办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:40:02.843

我决定在 beforePageLoad 事件中使用 currentDocument 来调用一个函数，该函数然后获取文档集合而不是使用重复控制文档。

# asp.net - MVC 4 Web 应用程序中对 Web 服务的异步调用

> ID：16143220
> 
> 赞同：1
> 
> 时间：2013-04-22T09:06:26.867
> 
> 标签：asp.net, asp.net-mvc-4, webservice-client

我正在构建我的第一个真正的 MVC4 应用程序，我遇到了以下问题。

我有一个“用户”类的模型。它的数据是通过异步调用webservice获取的：

```
public sealed class AdminDMSEntities
{
    public List<User> UserList { get; private set; }

    public AdminDMSEntities()
    {
        this.UserList = new List<User>(0);
        ServiceClient client = new ServiceClient();
        client.GetUsersCompleted += (s, e) => 
        {
            if (e.Result == null)
                throw new ArgumentNullException("No users were retrieved");

            UserList = new List<User>(0);
            e.Result.ForEach(w => this.UserList.Add(new User(w.Guid, w.TrusteeType, w.Username, w.Email, w.LastLogin, w.PasswordChanged, w.IsUsingTempPassword)));               
        };

        client.GetUsersAsync();
    }        
} 
```

我打算使用这个类，因为我将使用从 DbContext 派生的类（如果我可以使用我不能使用的实体框架）。到目前为止，我的课堂上只有用户。

我在 UsersController 中使用 tis 类，如下所示：

```
public class UsersController : Controller
{
    private AdminDMSEntities adminEntities = new AdminDMSEntities();
    //
    // GET: /User/

    public ActionResult Index()
    {
        return View(adminEntities.UserList);
    }
} 
```

问题是我最终会遇到 InvalidOperationException，因为控制器没有等待异步调用完成，而是在正确填充用户之前将 UserList 传递给视图。

我暂时可以让调用同步，但是以后很可能会被迫使用异步调用，所以我想知道如何确保该控制器将在传递 UserList 之前等待异步调用完成查看...

提前致谢

编辑：我已经尝试过使用 AsyncController 的方法，如下所示，目前我已将其添加到 AdminDMS 实体类中：

```
public static async Task<AdminDMSEntities> AdminDMSEntitiesAsync()
    {
        AdminDMSEntities result = null;
        Task<AdminDMSEntities> getUsersAsyncTask = Task.Factory.StartNew(() => new AdminDMSEntities());
        await getUsersAsyncTask;
        return result;
    } 
```

这是对控制器的更改：

```
public class UsersController : AsyncController
{
    private AdminDMSEntities adminEntities = null;
    //
    // GET: /User/

    public async Task<ActionResult> Index()
    {
        if (adminEntities == null)
        {
            adminEntities = await AdminDMSEntities.AdminDMSEntitiesAsync();
        }
        return View(adminEntities.UserList);
    }
} 
```

结果是 adminEntities 包含该类的一个实例，但列表中没有用户（应该有 11 个）。

EDIT2：因为我被告知创建新任务不是正确的做法，所以我采用了第一个建议的方法，从代码中删除了 AdminDMSEntities 类。我感谢达林帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:08:05.263

你可以使用一个[`asynchronous controller`](http://msdn.microsoft.com/en-us/library/ee728598%28v=vs.100%29.aspx). 这个想法是让你的控制器从[`AsyncController`](http://msdn.microsoft.com/en-us/library/system.web.mvc.asynccontroller%28v=vs.108%29.aspx)类而不是`Controller`类派生。此类提供允许您执行异步操作的方法。

例如：

```
public class MyController: AsyncController
{
    public void IndexAsync()
    {
        AsyncManager.OutstandingOperations.Increment();
        var client = new SomeClient();
        client.GetUsersCompleted += (s, e) => 
        {
            UserList = new List<User>();
            AsyncManager.Parameters["users"] = e.Result.Select(
                w => new User(
                    w.Guid, 
                    w.TrusteeType, 
                    w.Username, 
                    w.Email, 
                    w.LastLogin, 
                    w.PasswordChanged, 
                    w.IsUsingTempPassword
                )
            )
            .ToList();
            AsyncManager.OutstandingOperations.Decrement();            
        };
        client.GetUsersAsync();
    }

    public ActionResult IndexCompleted(IEnumerable<User> users)
    {
        return View(users);
    }
} 
```

如果您使用的是 .NET 4.5，您甚至可以利用 new`async`关键字进一步简化异步代码。如果您将数据访问层重构为新模式（即返回任务），这是可能的：

```
public class MyController: AsyncController
{
    public async Task<ActionResult> Index()
    {
        var client = new SomeClient();
        var users = await client.GetUsersAsync().Select(
            w => new User(
                w.Guid, 
                w.TrusteeType, 
                w.Username, 
                w.Email, 
                w.LastLogin, 
                w.PasswordChanged, 
                w.IsUsingTempPassword
            )
        )
        .ToList();
        return View(users);
    }
} 
```

# python - lambda 中的条件？

> ID：16143221
> 
> 赞同：1
> 
> 时间：2013-04-22T09:06:27.103
> 
> 标签：python, lambda, conditional-statements

我有比较相邻列表的代码，如果每个列表的第三个元素是 1，则每个列表的第二个元素被添加到它的相邻第二个元素中。然后代码找到这些求和对中的最低值，最后是这个最低的第二个元素一对。但是现在我想忽略每对的第一个元素相同的情况，例如下面的前两个列表。

```
aList = [[10564, 15, 1], [10564, 13, 1], [10589, 18, 1], [10637, 39, 1], [10662, 38, 1], [10837, 1, 1], [3, 17, 13], [7, 21, 13], [46, 26, 13]]

import sys
from operator import itemgetter
from itertools import tee, izip,ifilter

def pairwise(iterable):
    #"s -> (s0,s1), (s1,s2), (s2, s3), ..."
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b)

def neighbouring_minimum(iterable):
    paired = pairwise(iterable)

    # find minimum pair by second elements summed
    minpair = min(paired, key=lambda pair: pair[0][1] + pair[1][1])  
    return min(minpair, key=itemgetter(1))

filtered = ifilter(lambda x: x[2] == 1, aList)
print neighbouring_minimum(filtered) 
```

我是 lambda 新手，如果我改变

```
minpair = min(paired, key=lambda pair: pair[0][1] + pair[1][1]) 
```

对于下面的代码，这是正确的功能吗，是否有更简洁的方法来编写它？

```
minpair = min(paired, key=lambda pair: pair[0][1] if (pair[0][0] != pair[1][0]) else pair[0][1] + pair[1][1] ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:09:00.273

你的逻辑颠倒了；`pair[0][1]`如果该对的第一个元素*不相等*，您将返回。反转条件：

```
minpair = min(paired, key=lambda pair: pair[0][1] if pair[0][0] == pair[1][0] else pair[0][1] + pair[1][1]) 
```

但是，请注意，求和对的价值可能*比*任何单个价值都要大。对于您的示例，您的逻辑将返回`15`，这*绝对*低于您为示例输入生成的任何其他邻居总和：

```
>>> map(lambda pair: pair[0][1] if pair[0][0] == pair[1][0] else pair[0][1] + pair[1][1], pairwise(aList))
[15, 31, 57, 77, 39, 18, 38, 47] 
```

上面的示例向您展示了 lambda 生成的值，并且`15`将作为最小值获胜。

要*忽略*第一个元素相同的对，您应该返回`float('inf')`：

```
minpair = min(paired, key=lambda pair: pair[0][1] + pair[1][1] if pair[0][0] != pair[1][0] else float('inf')) 
```

`float('inf')`（正无穷大）*总是*会高于任何求和的对，所以`min()`不会考虑那个特定的对。

现在输出是：

```
>>> map(lambda pair: pair[0][1] + pair[1][1] if pair[0][0] != pair[1][0] else float('inf'), pairwise(aList))
[inf, 31, 57, 77, 39, 18, 38, 47] 
```

`18`并且将选择总计的对。

# c++ - Qt继承和实例化问题

> ID：16143223
> 
> 赞同：2
> 
> 时间：2013-04-22T09:06:32.587
> 
> 标签：c++, qt, inheritance

我最近拿起了一个我前段时间正在开发的应用程序。

不久之后，我偶然发现了继承问题。

我有一个名为 ModelBase 的基类，它有一个纯虚方法，使它成为一个抽象类。该课程如下所示：

```
#ifndef MODELBASE_H
#define MODELBASE_H

#include <QMetaType>
#include <QString>

class ModelBase
{
public:
    ModelBase();
    virtual ~ModelBase();

    long getId() const;
    void setId(const long id);

    virtual QString toString() const = 0;
private:
    long m_id;

};

Q_DECLARE_METATYPE(ModelBase)

#endif // MODELBASE_H 
```

在阅读其余代码时，可能需要记住它被声明为 METATYPE 的事实。

我从这个基类派生了几个类。对于这个例子，我将使用给我带来最多问题的两个。

```
#ifndef PLATFORM_H
#define PLATFORM_H

#include <QDate>

#include "modelbase.h"
#include "game.h"

class Platform : ModelBase
{
public:
    Platform();
    ~Platform();

    QString toString() const;

    QString getName();
    QDate getPublishDate();

    void setName(QString name);
    void setPublishDate(QDate publishDate);
private:
    QString m_name;
    QDate m_publishDate;
    QList<Game*> m_games;
};

#endif // PLATFORM_H 
```

如您所见，标头还包括来自父类 ModelBase 的虚拟方法。

最后但并非最不重要的; 问题类：

```
#ifndef GAME_H
#define GAME_H

#include <QDate>

#include "modelbase.h"

class Platform;
class Publisher;
class Genre;

class Game : ModelBase
{
public:
    Game();
    ~Game();

    QString getTitle();
    Publisher* getPublisher();
    Genre* getGenre();
    Platform* getPlatform();
    QDate getPublishDate();
    QString getLentTo();

    void setTitle(QString title);
    void setPublisher(Publisher &publisher);
    void setGenre(Genre &genre);
    void setPlatform(Platform &platform);
    void setPublishDate(QDate date);
    void setLentTo(QString lentTo);

    QString toString() const;
private:
    QString m_title;
    Publisher *m_publisher;
    Genre *m_genre;
    Platform *m_platform;
    QDate m_publishDate;
    QString m_lentTo;
};

#endif // GAME_H 
```

现在代码已经到位......

第一个问题来自循环依赖。

一个平台有很多游戏，一个游戏有一个平台。

我通过在 games.h 中前向声明平台并在 platform.h 中包含 games.h 解决了这个问题

既然这已经解决了，我编译了我的程序并得到了以下我真的不明白的抱怨。

```
xxxxx\mingw47_32\include\QtCore\qmetatype.h:382: error: cannot allocate an object of abstract type 'ModelBase' 
```

好吧，很公平..但我从来没有真正直接在类中定义 ModelBase。只能从它派生。

我在同一个日志中得到的另一个错误是：

```
xxxx\mingw47_32\include\QtCore\qmetatype.h:-1: In instantiation of 'static void* QtMetaTypePrivate::QMetaTypeFunctionHelper<T, Accepted>::Create(const void*) [with T = ModelBase; bool Accepted = true]': 
```

我真的不知道这里发生了什么。

我尝试在games.h中根本不使用指针，但后来我得到了我也不理解的不同类型的编译器错误；

```
xxxx\game.h:38: error: field 'm_platform' has incomplete type 
```

我尝试过同时使用#include 和前向声明，但它们都给他们带来了一些问题。另请注意，如果在games.h文件中我将前向类声明替换为includes（platform.h除外，这将带回循环依赖问题），则所有问题的类型都不完整（m_platform除外，因为据我所知，我别无选择，只能转发声明）

我假设我不知道这种继承应该如何在这里工作。

我将 ModelBase 定义为元类型的原因是因为我希望 ModelBase 及其子项在 QVariant 中/从 QVariant 中包装/解包

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T09:30:14.913

最后一个错误发生是因为您的类中不能有不完整类型的对象。编译器将不知道要为该对象分配多少空间，因此您的类的内存布局将不知何故未定义。相反，“指向不完整的指针”是可能的。

我不喜欢 Qt，但看起来你的 Q_DECLARE_METATYPE() 会导致构造函数调用。根据定义，抽象类是不可构造的。

`QMetaTypeFunctionHelper::Create`：

```
static void *Create(const void *t)
{
  if (t)
    return new T(*static_cast<const T*>(t));
  return new T();
} 
```

文档[QMetaType 类参考](http://qt-project.org/doc/qt-4.8/qmetatype.html#Q_DECLARE_METATYPE)说：

> **Q_DECLARE_METATYPE ( Type )**只要它提供了一个公共默认构造函数、一个公共复制构造函数和一个公共析构函数，这个宏就使 QMetaType 知道类型 Type。在 QVariant 中需要使用类型 Type 作为自定义类型。

正如我所提到的：无法构造抽象类。

请参阅[[Qt-interest] Q_DECLARE_METATYPE 和抽象类](http://lists.qt.nokia.com/public/qt-interest/2011-August/035286.html)：

> 2011 年 8 月 8 日星期一 12:36:16 Schimkowitsch Robert 写道：
> 
> > > 如何声明抽象基类的元类型？我在 Q_DECLARE_METATYPE-docs 中没有看到任何禁止它的内容。
> 
> 你没有。元类型需要默认可构造、可公开破坏、可复制和可分配。
> 
> 根本无法构造抽象类型。根据抽象的定义，您也不想复制它们，因为这样做会剪切您拥有的专用对象。
> 
> 您很可能希望将*指针*的元类型注册 到抽象类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T09:35:08.833

on 抽象类`Q_DECLARE_METATYPE`确实是个问题。这并没有“将类定义为元类型”，它使 Qt 的 MOC 可以使用该类，用于在信号/插槽参数中传递它、使其可用`QVariant`等目的。但是，您不能在抽象类上执行此操作 - 这没有道理。你确定你的意思不是：

```
Q_DECLARE_METATYPE(ModelBase*) 
```

关于其余的警告——当编译器注意到一个错误时，他们中的大多数会尝试在你的源代码中找到其他问题。有时它运行良好，有时它只是给你虚假的警告。修复`Q_DECLARE_METATYPE`错误，然后处理其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:43:36.150

`Q_DECLARE_METATYPE`当您希望在 QVariant（Qt 高级联合）中使用特定类的对象或在信号和插槽连接中使用这些对象时使用。

因此，将它用于虚拟类的对象是没有意义的，因为您可以从一开始就构造一个虚拟类的对象。首先是`Q_DECLARE_METATYPE(ModelBase*)`行不通的，因为参数需要是一个类型（解析真的很基础）。其次，这不是必需的，因为您可以在 Qt 中使用任何指针，而无需向系统声明它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-10T15:28:08.750

我刚刚遇到了类似的问题，在编写一些代码时，我稍后想在 QVariant 中找到存储指针的类型。

通过 Using`QVariant::canConvert<ModelBase*>`可以在以后确定指针的类型，因此声明类型化指针而不是使用 default 可能很有用`void*`。

# python - 如何使用cgi + python自动刷新浏览器

> ID：16143226
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:37.033
> 
> 标签：python, html, cgi

我有 form.html 和 form.py 文件。在 form.html 文件中，我有一个文本框和一个按钮，当我在文本框中输入一些关键字并提交它时，它会根据输入的关键字执行 form.py 并显示来自 twitter 的最新推文。现在我的要求是每 5 秒自动刷新一次浏览器以获取最新的推文。

我已经尝试过 meta http-equiv="refresh" content='5' 但它只刷新 form.py 而没有从 form.html 中获取关键字

有什么办法吗，求指点。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:18:53.907

当你第一次调用 form.py 时，发送一个标题来设置一个带有关键字的 cookie，然后在随后的刷新中你应该得到 cookie 而不是作为 post daya 的关键字，所以从那里读取它。

如果 post 数据和 cookie 都存在，您应该忽略 cookie 并将其视为只是 post 数据并在 HTTP 标头中设置新的 cookie。

要设置 cookie，您必须发送这样的标头

```
Set-Cookie: name=value 
```

或者像这样过期

```
Set-Cookie: name2=value2; Expires=Wed, 09-Jun-2021 10:18:14 GMT 
```

我认为在第一种情况下，cookie 将被视为会话 cookie，并在您关闭浏览器时被删除。

检查 python 文档以了解如何使用 CGI 模块设置和读取标头。

# django - 使用表单的 Django ListView 分页

> ID：16143227
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:40.490
> 
> 标签：django, listview, django-generic-views

我正在尝试将“表单”作为上下文传递，我的代码：

```
class BlogSearchView(ListView):
    model = Blog
    paginate_by = 20
    template_name = "base/blog_search.html"

    def get_queryset(self):
        qset = super(BlogSearchView, self).get_queryset()
        new_data = self.request.GET.copy()
        form = BlogSearchForm(new_data)
        if form.is_valid():
            search_term = form.cleaned_data['q']#>> how to insert this in template
            if search_term:
                qset = qset.filter(Q(title__icontains=search_term)|
                                   Q(body__icontains=search_term))
            else:
                qset = []
        else:
            form = BlogSearchForm() #>> how to insert this in template
        return qset 
```

尝试使用 get_context_data 但我收到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:36:14.793

你需要覆盖`get_context_data`你的`BlogSearchView`.

快速解决方案：

```
class BlogSearchView(ListView):

    def get_queryset():
        ...
        #Your queryset definition
        self.search_term = search_term
        self.form = form
        return qset

    def get_context_data(self, **kwargs):
        context = super(BlogSearchView, self).get_context_data(**kwargs)
        context['search_term'] = self.search_term
        context['form'] = self.form
        return context 
```

然后你可以在模板中使用`search_term`和。`form`

# algorithm - “最近的一对点”有哪些例子？

> ID：16143236
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:56.740
> 
> 标签：algorithm, points, closest

我正在寻找“最接近点对问题”的激励示例

[http://en.wikipedia.org/wiki/Closest_pair_of_points_problem](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem)

就其本身而言，这是一个非常不言自明的问题，但我找不到一个合理的情况，即在 o (n ² ) 中的蛮力方法需要这种具有 o(n log n) 的算法。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T10:25:26.150

在 O(n^2) 上使用 O(nlogn) 算法的合理情况是处理大量元素以致 O(n^2) 比 O(nlogn) 需要更多时间来执行的所有情况。例如，具有 100 万个元素的蛮力 O(n^2) 可能需要大约半小时才能解决，而神与征服 O(nlogn) 算法只需几秒钟。一种查看差异的非常快速的方法 (100 万 ^2) 和 (100 万 * log2(100 万))，您可以在那里看到巨大的差异。

# android - Android项目以前可以工作，现在显示不同的logcat错误

> ID：16143237
> 
> 赞同：0
> 
> 时间：2013-04-22T09:06:58.007
> 
> 标签：android, api, manifest, logcat

我的项目运行得很好，但是当我现在运行它时，出现了以下 logcat，我已经阅读并练习了（无效 API 和泄露）下的每一篇文章，但似乎没有任何效果，所以，哪里是问题？

```
04-22 09:03:39.523: W/ActivityManager(289): Unbind failed: could not find connection for android.os.BinderProxy@4100b980
04-22 09:03:39.543: E/ActivityThread(602): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d6b390 that was originally bound here
04-22 09:03:39.543: E/ActivityThread(602): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d6b390 that was originally bound here
04-22 09:03:39.543: E/ActivityThread(602):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-22 09:03:39.543: E/ActivityThread(602):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-22 09:03:39.543: E/ActivityThread(602):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-22 09:03:39.543: E/ActivityThread(602):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-22 09:03:39.543: E/ActivityThread(602):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-22 09:03:39.543: E/ActivityThread(602):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-22 09:03:39.543: E/ActivityThread(602):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-22 09:03:39.543: E/ActivityThread(602):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
04-22 09:03:39.543: E/ActivityThread(602):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
04-22 09:03:39.543: E/ActivityThread(602):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-22 09:03:39.543: E/ActivityThread(602):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-22 09:03:39.543: E/ActivityThread(602):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-22 09:03:39.543: E/ActivityThread(602):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-22 09:03:39.543: E/ActivityThread(602):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-22 09:03:39.543: E/ActivityThread(602):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-22 09:03:39.543: E/ActivityThread(602):  at java.lang.Thread.run(Thread.java:856)
04-22 09:03:39.613: E/StrictMode(602): null
04-22 09:03:39.613: E/StrictMode(602): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d6b390 that was originally bound here
04-22 09:03:39.613: E/StrictMode(602):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
04-22 09:03:39.613: E/StrictMode(602):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
04-22 09:03:39.613: E/StrictMode(602):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
04-22 09:03:39.613: E/StrictMode(602):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
04-22 09:03:39.613: E/StrictMode(602):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
04-22 09:03:39.613: E/StrictMode(602):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
04-22 09:03:39.613: E/StrictMode(602):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
04-22 09:03:39.613: E/StrictMode(602):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
04-22 09:03:39.613: E/StrictMode(602):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
04-22 09:03:39.613: E/StrictMode(602):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
04-22 09:03:39.613: E/StrictMode(602):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
04-22 09:03:39.613: E/StrictMode(602):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-22 09:03:39.613: E/StrictMode(602):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-22 09:03:39.613: E/StrictMode(602):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-22 09:03:39.613: E/StrictMode(602):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-22 09:03:39.613: E/StrictMode(602):  at java.lang.Thread.run(Thread.java:856)
04-22 09:03:39.653: W/ActivityManager(289): Unbind failed: could not find connection for android.os.BinderProxy@40ee8fe0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:43:24.970

一个更简单的解决方法是禁用“设置”下的“交换服务”：应用程序：全部

（您可能需要滑动才能看到“全部”选项卡）

# c++ - 在 C++ 中的可变长度函数中放置默认值参数的位置？

> ID：16143238
> 
> 赞同：2
> 
> 时间：2013-04-22T09:07:03.383
> 
> 标签：c++, parameters, default-value, variable-length

在变长参数函数中，'...' 必须放在最后。并且默认值启用参数也必须在最后。

那么，在同一个功能中需要两者怎么样？

现在我有一个日志实用程序：void MyPrint(int32_t logLevel, const char *format, ...)，它用于根据'logLevel'打印日志。

但是，有时我希望它可以用作：MyPrint("Log test number%d", number)，而不需要'logLevel'。

问题： [默认参数和可变参数函数](https://stackoverflow.com/questions/4130613/default-arguments-and-variadic-functions) 没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T08:37:37.807

在您的特定情况下，您可能只想制作两个版本的 MyPrint，例如：

```
MyPrint(const char *format, ...)
{
    _logLevel = 1;
    // stuff
}
MyPrint(int32_t logLevel, const char *format, ...)
{
    _logLevel = logLevel;
    //stuff
} 
```

另一方面，[命名参数习语](http://www.parashift.com/c++-faq-lite/named-parameter-idiom.html)确实会提供另一种解决方案：

```
class Abc
{
public:
MyPrint(const char *format, ...)
{
    _logLevel = 1;
    // stuff
}
Abc &setLogLevel(int32_t logLevel)
{
    _logLevel = logLevel;
}

// stuff 
```

};

所以你可以这样调用 MyPrint() ：

```
MyPrint("blah,blah", 123); 
```

或像这样：

```
MyPrint("blah,blah", 123).setLogLevel(5); 
```

# nfc - NFC安卓app触发-java卡小程序

> ID：16143240
> 
> 赞同：1
> 
> 时间：2013-04-22T09:07:06.847
> 
> 标签：nfc, apdu

我正在开发一个 NFC 支付项目。当手机触碰POS进行交易时，通常会触发Android应用。如何触发 Android 应用程序？我们开发了一个小程序来处理通信并将 APDU 发送到电话。类似于标签调度系统的东西，但我找不到相同的机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:19:33.723

您的 POS 终端真的是 Java 卡吗？然后你想设置你的 NFC 技术过滤器来捕捉[android.nfc.tech.ISODep](http://developer.android.com/reference/android/nfc/tech/IsoDep.html)意图。据我所知，没有办法将此限制为特定的 Java Card applet AID：您的应用程序将针对您手机附近的所有 ISO 14443 卡启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:34:20.083

您需要某种智能卡来处理 APDU。据我所知，目前还没有在 Android 应用程序中处理 APDU 的 API。原因是Android OS没有为银行等应用程序提供足够的安全性。Google 使用嵌入式智能卡运行 Google Wallet，移动运营商在 SIM 中提供相同的功能。

一旦您可以访问智能卡（顺便说一句，Google 永远不会让您在他们的智能卡上安装任何东西），您必须编写一个 javacard 应用程序将其加载到那里。您最好的选择是启用 NFC 的手机，将卡模拟定向到 SIM 卡，并使用测试 SIM 卡进行试用。

然后，从您的 javacard 应用程序中，您可以触发一个 Android 应用程序来显示一些漂亮的 GUI。

# jquery - 如何用另一个 div 内容替换现有 div 的内容？

> ID：16143245
> 
> 赞同：0
> 
> 时间：2013-04-22T09:07:17.813
> 
> 标签：jquery, asp.net, html, replace

我有一个弹出窗口。单击弹出窗口中的下一个按钮时，当前的内容`div`必须替换为另一个`div`内容。我想在单击同一个下一个按钮时重复此操作`divs`。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:13:56.663

你可以试试这个

```
function fun()
  {
   document.getElementById("div1").innerHTML=    document.getElementById("div2").innerHTML;
   } 
```

调用此函数 onclick 按钮的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:25:46.277

You can use jQuery .html() method to get content from div and then add this content to destination div Checkout sample on jsFiddle [http://jsfiddle.net/btPb6/](http://jsfiddle.net/btPb6/)

```
function replaceContent(source, destination){
    $('#'+destination).html($('#'+source).html());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:12:09.137

尝试这样的事情：

```
var a = $('#div1').html();
var b = $('#div2').html(a); 
```

当然是使用 Jquery。

# android - 无法实例化接收器

> ID：16143246
> 
> 赞同：2
> 
> 时间：2013-04-22T09:07:21.867
> 
> 标签：android, android-intent, broadcastreceiver

向我的应用程序发送意图时出现“无法实例化接收器”错误。似乎 Eclipse 不知何故看不到我的`ExIntentReceiver`课。我不知道为什么会这样；ExIntentReceiver 在同一个包（com.example.app）中。

ExIntentReceiver.java：

```
package com.example.app

public class ExIntentReceiver extends BroadcastReceiver {

 @Override
   public void onReceive(Context context, Intent intent) {
      String action = intent.getAction();
  if(action.equals("com.example.app.START_SERVICE"))    {
        Log.v("service", "is started");
      } else if(action.equals("com.example.app.STOP_SERVICE"))  {
          Log.v("service", "is stopped");
      }

   }
} 
```

显现：

```
 <receiver android:name=".ExIntentReceiver" android:exported="true">  
      <intent-filter>
     <action android:name="com.example.app.START_SERVICE" />
       <action android:name="com.example.app.STOP_SERVICE" />
     </intent-filter>
  </receiver> 
```

日志猫：

```
04-22 10:37:13.361: E/AndroidRuntime(11213): FATAL EXCEPTION: main
04-22 10:37:13.361: E/AndroidRuntime(11213): java.lang.RuntimeException: Unable to instantiate receiver com.example.app.ExIntentReceiver: java.lang.ClassNotFoundException: com.example.app.ExIntentReceiver
04-22 10:37:13.361: E/AndroidRuntime(11213):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2261)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at android.app.ActivityThread.access$1600(ActivityThread.java:140)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1313)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at android.os.Looper.loop(Looper.java:137)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at android.app.ActivityThread.main(ActivityThread.java:4921)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at java.lang.reflect.Method.invokeNative(Native Method)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at java.lang.reflect.Method.invoke(Method.java:511)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at dalvik.system.NativeStart.main(Native Method)
04-22 10:37:13.361: E/AndroidRuntime(11213): Caused by: java.lang.ClassNotFoundException: com.example.app.ExIntentReceiver
04-22 10:37:13.361: E/AndroidRuntime(11213):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-22 10:37:13.361: E/AndroidRuntime(11213):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:15:58.530

您应该在自己的意图过滤器中声明操作。

```
<receiver android:name=".ExtIntentReceiver " android:exported="true">
    <intent-filter>
        <action android:name="com.example.app.START_SERVICE" />
    </intent-filter>
    <intent-filter>
        <action android:name="com.example.app.STOP_SERVICE" />
    </intent-filter>
</receiver> 
```

除此之外，请确保您为`Receiver`内部清单提供正确的包名称。并确保你应该正确拼写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-05T18:45:45.510

如果您想将 BroadcastReceiver 作为内部类并且您想在不创建实例的情况下使用它，您应该像这样使其成为 STATIC

```
public static class MyBroadcastReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        //do what you want
    }
} 
```

# mysql - MySQL中存储分隔值的最佳方式

> ID：16143255
> 
> 赞同：0
> 
> 时间：2013-04-22T09:07:41.230
> 
> 标签：mysql, sql

我有一个数组，它为定义的批次存储任意一组项目。每个项目都在一个单独的表中定义，具有自己的属性和值。

例子

*   第 1 批包含项目 1、3、11、16、17，
*   第 2 批包含项目 5、11、15。

在 MySQL 中存储这样的数组的正确方法是什么？

目前，我将项目作为逗号分隔的字符串存储在项目列中。每当我需要检索信息时，我都会查询该列，将字符串拆分为一个数组，遍历该数组，从拆分值创建一个新查询，然后运行一个新查询加入拆分值。当然必须有更好的方法来做到这一点？

表格布局示例：

```
Batches table:
==============
id|items
--------
1 |1,3,11,16,17
2 |5,11,15

Items table:
============
id|description     |serial
--------------------------
1 |some description|00046552
2 |etc             |00046653
3... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:13:14.703

在列中存储逗号分隔值是一个糟糕的设计。正确规范化数据库。`Items`如果to的关系为 ，`Batches`则将该表转换为 2 表设计`One-to-many`。

例子，

**项目**

*   物品 ID (PK)
*   描述
*   串行

**批次**

*   批号
*   项目 ID (FK)

但如果您有`Many-to-many`关系，请考虑添加在两者之间链接的新表。

项目

*   物品 ID (PK)
*   描述
*   串行

批次

*   批号（PK）
*   其他列...

Batch_Item

*   BatchID (FK) -- 与 ItemID 的唯一对
*   项目 ID (FK)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:14:37.723

我会将数据存储为多对多关系：

```
Batches table:
==============
id | Batch description
---+------------------
 1 | Some description
 2 | Some other desc...

Items table:
============
id|description     |serial
--+----------------+------
1 |some description|00046552
2 |etc             |00046653
3...

Batch items:
============
batch_id | item_id
---------+--------
 1       |  1
 1       |  3
 1       | 11
 1       | 16
 1       | 17
 2       |  5
 2       | 11
 2       | 15 
```

如果批次中的项目顺序很重要，您可以在表格中添加另一列`Batch items`以指示批次中的顺序；或者简单地使用项目 ID 作为排序列。

通过这种方式，您可以使用外键强制执行参照完整性，并使操作批处理中的单个项目变得更加容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:13:02.303

'SQL 正确' 方法将是每行有多个行，并使用`id`以下组合：`PRIMARY KEY``id``item`

```
id| item
--------
1 | 1
1 | 3
1 | 11
...
2 | 15 
```

我不确定这是否会提高整体性能。无论哪种方式，您都将循环数组，您省去了将分隔列表转换为数组的步骤，但您向`SELECT`语句添加了更多数据库行和更多结果。

# php - 将 unicode 字符添加到数据库问题

> ID：16143257
> 
> 赞同：0
> 
> 时间：2013-04-22T09:07:43.737
> 
> 标签：php, encoding, utf-8

你好我真的在努力解决这个问题

我有一个脚本可以将阿拉伯字母插入数据库

我的数据库和表是 utf-unicode_ci

```
$title = make_safe($_POST['title']);
$author = make_safe($_POST['author']);
$category = make_safe($_POST['category']);
$meta = str_replace(array('-', ' ', '*'),",",make_safe($_POST['meta']));
if ($title == "" OR $author == "" OR $category == "")
{
    echo $lang['STORY_FIELDS_MUST_FILL'];
    echo "<META HTTP-EQUIV='refresh' CONTENT='2; URL= stories.php?action=add'>"; 
}
else 
{
    $stmt = $db->prepare ("INSERT INTO stories (title,author,category,meta,date)
    VALUES (:title,:author,:category,:meta)");
    $stmt->execute(array(':title' => $title,
                         ':author' => $author,
                         ':category' => $category,
                         ':meta' => $meta));
    echo "$lang[STORY_ADDED]";
    echo "<META HTTP-EQUIV='refresh' CONTENT='2; URL=" . $_SERVER['HTTP_REFERER'] . "'>";
} 
```

从这个php代码添加文章时，它在phpmyadmin中显示如下

![http://i.stack.imgur.com/bQMag.jpg](https://i.stack.imgur.com/BiYZl.jpg)

当我通过 Phpmyadmin 插入值时

它像这样显示，一切都很好

![http://i.stack.imgur.com/ohmlv.jpg](https://i.stack.imgur.com/oF7K3.jpg)

我如何通过 php 代码添加它以显示与从 phpmyadmin 添加它一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:22:12.590

谢谢解决方案是在连接代码之后执行这个

$pdo->exec('SET NAMES \'utf8\' COLLATE \'utf8_unicode_ci\'');

# java - 如何通过 URL 发送当前文本字段值？

> ID：16143258
> 
> 赞同：0
> 
> 时间：2013-04-22T09:07:44.367
> 
> 标签：java, javascript, jsp

我想通过这样的 URL 发送我的 JSP/HTML 页面的文本字段的值：

```
<a href="some.jsp?uname=Somnath&dob=02/02/89&gender=male"></a> 
```

但是我需要发送当前放置的值而不是静态值。
实际上我想通过 getParameter() 方法接收所有字段的值。但是我们不能使用：

```
<form action="someAnother.jsp" method="post"> 
```

因为表单附带了另一个URL。实际情况是：

```
<form action="someAnother.jsp" method="post">
  <input type='text' name='uname'/>
  <input type='password' name='password'/>
  <input type='text' name='dob'/>
  <input type='text' name='contact'/>
  <a href="some">
    <input type='button' value='Upload Image'/>
  </a>
  <input type='submit' value='Register'/>
</form> 
```

UploadImage 按钮调用一个servlet并进行一些操作并再次转发到该页面。我需要再次填写用户在点击上传图片按钮之前填写的所有字段。
所以我认为在那个 servlet 中获取这些值的唯一方法是通过 URL。请给我你的建议。

*   提醒我们只有通过**表单**标签进行操作才能获取 JSP/Servlet 中的所有字段值，同时提醒嵌套**表单**是不允许的。
*   **因此，在表单**标签中再次调用另一个 servlet/jsp 的唯一方法是**使用**标签，但它不携带任何数据。如果我想用标签发送一些数据，**那么**我们必须使用像第一个示例这样的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:12:32.943

**备选方案 1：**

改变

```
method="post" 
```

至

```
method="get" 
```

**备选方案2：** 将上述表单数据提交给一个servlet（BasicInfoServlet）。在这个 servlet 中，将接收到的数据保存在会话中，并将用户重定向/转发到图像上传页面。将图像上传表单提交给第二个 servlet (ImageInfoServlet)。在第二个 servlet 中编写代码来保存/处理会话中的图像和初始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:19:14.730

使用“获取”方法。

代码 ：-

```
<form action="/servleturl_mappingpath" method="get">
  <input type='text' name='uname'/>
  <input type='password' name='password'/>
  <input type='text' name='dob'/>
  <input type='text' name='contact'/>
  <a href="some">
    <input type='button' value='Upload Image'/>
  </a>
  <input type='submit' value='Register'/>
</form> 
```

如果您的方法是 get，则请求的数据将在 URL 上可见。

当您单击注册按钮时，请求将转到给定的 servlet (/servleturl_mappingpath)。

现在，您可以按如下方式进入 servlet：

```
String namee=request.getParameter("uname"); 
String pass=request.getParameter("password"); 
String dobb=request.getParameter("dob"); 
String contactt=request.getParamenter("contact"); 
```

在您的 servlet 中使用上述代码。最后将您的响应重定向到任何给定的 JSP。

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:48:30.803

使用 POST 方法，表单的 enctype 属性必须设置为“multipart/form-data”

**检查这篇文章**
[https://stackoverflow.com/a/2424824/2106973](https://stackoverflow.com/a/2424824/2106973)

或者

**Java servlet 上传文件教程**
[http://www.servletsuite.com/servlets/upload.htm](http://www.servletsuite.com/servlets/upload.htm)

# bitcoin - 获取比特币历史数据

> ID：16143266
> 
> 赞同：127
> 
> 时间：2013-04-22T09:08:03.540
> 
> 标签：bitcoin

我想做自己的比特币图表。

你知道任何可靠的方法来检索比特币的历史价格数据吗？有没有办法使用 REST 来检索它？我看到了支持 REST 的 Bitfloor，但它没有返回任何有用的值，它有一个“内部服务器错误”。

我也看到了比特币图表，但我认为它仅限于 2000 个数据值。

你会建议我使用任何框架或系统来解决它吗？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2014-01-27T21:29:07.813

实际上，您可以在此处以 CSV 格式从 Bitcoincharts 获取整个比特币交易历史：http: [//api.bitcoincharts.com/v1/csv/](http://api.bitcoincharts.com/v1/csv/)

对于活跃的交易所，它每天更新两次，也有一些死的交易所。

编辑：由于 CSV 中没有列标题，因此它们是：第 1 列）交易的时间戳，第 2 列）价格，第 3 列）交易量

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-07-05T15:22:17.220

你可以在这里找到很多历史数据：[https ://www.quandl.com/data/BCHARTS-Bitcoin-Charts-Exchange-Rate-Data](https://www.quandl.com/data/BCHARTS-Bitcoin-Charts-Exchange-Rate-Data)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-10-11T23:41:29.400

如果您想在更长的时间内以更高的分辨率从他们的[websocket收集 bitstamp 交易数据，您可以使用下面的脚本 log_bitstamp_trades.py。](https://www.bitstamp.net/websocket)

该脚本使用 python websocket-client 和 pusher_client_python 库，因此请安装它们。

```
#!/usr/bin/python

import pusherclient
import time
import logging
import sys
import datetime
import signal
import os

logging.basicConfig()
log_file_fd = None

def sigint_and_sigterm_handler(signal, frame):
    global log_file_fd
    log_file_fd.close()
    sys.exit(0)

class BitstampLogger:

    def __init__(self, log_file_path, log_file_reload_path, pusher_key, channel, event):
        self.channel = channel
        self.event = event
        self.log_file_fd = open(log_file_path, "a")
        self.log_file_reload_path = log_file_reload_path
        self.pusher = pusherclient.Pusher(pusher_key)
        self.pusher.connection.logger.setLevel(logging.WARNING)
        self.pusher.connection.bind('pusher:connection_established', self.connect_handler)
        self.pusher.connect()

    def callback(self, data):
        utc_timestamp = time.mktime(datetime.datetime.utcnow().timetuple())
        line = str(utc_timestamp) + " " + data + "\n"
        if os.path.exists(self.log_file_reload_path):
            os.remove(self.log_file_reload_path)
            self.log_file_fd.close()
            self.log_file_fd = open(log_file_path, "a")
        self.log_file_fd.write(line)

    def connect_handler(self, data):
        channel = self.pusher.subscribe(self.channel)
        channel.bind(self.event, self.callback)

def main(log_file_path, log_file_reload_path):
    global log_file_fd
    bitstamp_logger = BitstampLogger(
        log_file_path,
        log_file_reload_path,
        "de504dc5763aeef9ff52",
        "live_trades",
        "trade")
    log_file_fd = bitstamp_logger.log_file_fd
    signal.signal(signal.SIGINT, sigint_and_sigterm_handler)
    signal.signal(signal.SIGTERM, sigint_and_sigterm_handler)
    while True:
        time.sleep(1)

if __name__ == '__main__':
    log_file_path = sys.argv[1]
    log_file_reload_path = sys.argv[2]
    main(log_file_path, log_file_reload_path 
```

和 logrotate 文件配置

```
/mnt/data/bitstamp_logs/bitstamp-trade.log
{
    rotate 10000000000
    minsize 10M
    copytruncate
    missingok
    compress
    postrotate
        touch /mnt/data/bitstamp_logs/reload_log > /dev/null
    endscript
} 
```

然后你可以在后台运行它

```
nohup ./log_bitstamp_trades.py /mnt/data/bitstamp_logs/bitstamp-trade.log /mnt/data/bitstamp_logs/reload_log & 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-11-27T14:23:43.233

`JSON`Bitstamp 拥有可在[此链接](https://www.bitstamp.net/api/ticker/)中公开获得的实时比特币数据。 **不要**尝试在 10 分钟内访问它超过 600 次，否则它们会阻止您的 IP（另外，无论如何都没有必要；[在此处阅读更多信息](https://www.bitstamp.net/api/)）。以下是`C#`获取实时数据的方法：

```
using (var WebClient = new System.Net.WebClient())
{
     var json = WebClient.DownloadString("https://www.bitstamp.net/api/ticker/");
     string value = Convert.ToString(json);
     // Parse/use from here
} 
```

从这里，您可以解析`JSON`并将其存储在数据库中（或`MongoDB`直接插入），然后访问它。

对于历史数据（取决于数据库——如果你是这样处理的），从平面文件中插入，大多数数据库允许你使用（例如，`SQL Server`你可以`BULK INSERT`从`CSV`文件中插入）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-03T16:22:29.240

我为这种情况编写了一个 java 示例：

使用 json.org 库来检索 JSONObjects 和 JSONArrays。下面的例子使用了 blockchain.info 的数据，可以作为 JSONObject 获得。

```
 public class main 
    {
        public static void main(String[] args) throws MalformedURLException, IOException
        {
            JSONObject data = getJSONfromURL("https://blockchain.info/charts/market-price?format=json");
            JSONArray data_array = data.getJSONArray("values");

            for (int i = 0; i < data_array.length(); i++)
            {
                JSONObject price_point = data_array.getJSONObject(i);

                //  Unix time
                int x = price_point.getInt("x");

                //  Bitcoin price at that time
                double y = price_point.getDouble("y");

                //  Do something with x and y.
            }

        }

        public static JSONObject getJSONfromURL(String URL)
        {
            try
            {
                URLConnection uc;
                URL url = new URL(URL);
                uc = url.openConnection();
                uc.setConnectTimeout(10000);
                uc.addRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)");
                uc.connect();

                BufferedReader rd = new BufferedReader(
                        new InputStreamReader(uc.getInputStream(), 
                        Charset.forName("UTF-8")));

                StringBuilder sb = new StringBuilder();
                int cp;
                while ((cp = rd.read()) != -1)
                {
                    sb.append((char)cp);
                }

                String jsonText = (sb.toString());            

                return new JSONObject(jsonText.toString());
            } catch (IOException ex)
            {
                return null;
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-09T22:32:27.077

Coinbase 有一个[REST API](https://coinbase.com/api/doc/1.0/prices/historical.html)，可让您从他们的网站访问历史价格。数据似乎每十分钟显示一次 Coinbase 现货价格（以美元计）。

结果以 CSV 格式返回。您必须通过 API 查询您想要的页码。每页有 1000 个结果（或价格点）。这相当于每页 7 天的数据量。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-12-20T07:13:38.160

使用 Node.js 将其抓取到 JSON 会很有趣 :)

[https://github.com/f1lt3r/bitcoin-scraper](https://github.com/f1lt3r/bitcoin-scraper)

![在此处输入图像描述](https://i.stack.imgur.com/nXa1P.png)

```
[
  [
    1419033600,  // Timestamp (1 for each minute of entire history)
    318.58,      // Open
    318.58,      // High
    318.58,      // Low
    318.58,      // Close
    0.01719605,  // Volume (BTC)
    5.478317609, // Volume (Currency)
    318.58       // Weighted Price (USD)
  ]
] 
```

# c++ - 为什么在多重定义的情况下 char* 和 char[] 有区别？

> ID：16143269
> 
> 赞同：1
> 
> 时间：2013-04-22T09:08:08.400
> 
> 标签：c++, arrays, memory-management, global-variables, multiple-definition-error

*   在 interface.h 中定义 strInterface

    ```
    // interface.h
    #ifndef INTERFACE_H_
    #define INTERFACE_H_
    const char* strInterface = "the difference between char* and char array";
    #endif 
    ```

*   在 OneUsing 类中，调用 strInterface 字符串

    ```
    // oneUsingInterface.h
    #ifndef ONEUSINGINTERFACE_H_
    #define ONEUSINGINTERFACE_H_

    class OneUsing
    {
    private:
        int mData;
    public:
        OneUsing();
        OneUsing(int a);
        void print();
    };
    #endif  // ONEUSINGINTERFACE_H_

    // oneUsingInterface.cpp
    #include "oneUsingInterface.h"
    #include "interface.h"
    #include <iostream>

    using namespace std;

    OneUsing::OneUsing()
    {}
    OneUsing::OneUsing(int a)
    {
        mData = a;
    }
    void OneUsing::print()
    {
        cout<<"mData: "<<mData<<" strInterface: "<<strInterface<<endl;

    } 
    ```

*   在 main.cpp 中，包含 interface.h，因为 strInterface 被直接调用；它还包括 oneUsingInterface.h，因为将创建 OneUsing 实例。

    ```
    //main.cpp
    #include <iostream>
    #include "interface.h"
    #include "oneUsingInterface.h"

    using namespace std;

    int main()
    {
        cout<<strInterface<<endl;
        OneUsing* pObject = new OneUsing(5);
        pObject->print();
    } 
    ```

*   现在，出现的问题：

    ```
    g++ -I../boost_1_52_0/installation/prefix/include -I../boost_1_52_0/installation/prefix/lib -g -Wall -Wextra -c .//main.cpp
    g++ -I../boost_1_52_0/installation/prefix/include -I../boost_1_52_0/installation/prefix/lib -g -Wall -Wextra -c .//oneUsingInterface.cpp
    g++ -I../boost_1_52_0/installation/prefix/include -I../boost_1_52_0/installation/prefix/lib -g -Wall -Wextra main.o oneUsingInterface.o -o main
    oneUsingInterface.o:(.data+0x0): multiple definition of `strInterface'
    main.o:(.data+0x0): first defined here
    collect2: error: ld returned 1 exit status
    make: *** [main] Error 1 
    ```

*   但是，如果 strInterface 是这样定义的，那么就没有问题了：

    ```
    // interface.h
    #ifndef INTERFACE_H_
    #define INTERFACE_H_
    const char strInterface[] = "the difference between char* and char array";
    #endif 
    ```

有些人可以告诉我更多关于这种情况下`char*`和之间区别的细节吗？`char[]`

PS：我们经常在头文件中用关键字声明全局变量，`extern`在别人的实现文件中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:21:26.180

不同之处在于它`const char strInterface[]`定义了一个常数。常量对于它们包含的每个文件都是本地的。您将在每个文件中获得单独的副本。

指针`const char* strInterface`指向常量数据，但指针本身不是常量。因此默认情况下，它对其他翻译单元可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:26:09.010

You have two different types here:

First, `const char* strInterface` is a pointer to a constant character, and therefore you are creating a pointer of the same name in the global scope in two different compilation units making the linker complain about that. Note, that you could make the pointer point to something totally different later in the code. The pointer itself is mutable; the string it points to is immutable.

Second, `const char strInterface[]` is an array of constant characters, which is created locally for each compilation unit, therefore the linker finds multiple definitions of that string which don't clash. This constant is immutable.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:21:27.840

默认情况下，声明的命名空间范围变量`const`具有*内部链接*，因此您可以在多个翻译单元中定义具有相同名称的此类变量而不会导致链接错误。

这个变量不是`const`，所以它会有*外部链接*，这意味着任何程序中只能存在一个这样的定义：

```
const char* strInterface = "..."; 
```

`const`版本将是：

```
const char* const strInterface = "..."; 
```

这是`const`因为数组的 const 性与其元素的 const 性之间没有区别。（IIRC 在标准中对此事实存在一些形式上的歧义。）您可以在程序中的每个翻译单元有一个这样的定义。

```
const char strInterface[] = "..."; 
```

# url - 如何处理多个网站的谷歌结帐中的回调网址？

> ID：16143274
> 
> 赞同：0
> 
> 时间：2013-04-22T09:08:30.597
> 
> 标签：url, asp-classic, callback, google-checkout, merchant-account

我一直致力于经典 ASP 中的 google checkout 集成，我的客户有各种电子商务网站，并希望对所有网站使用单个商家帐户 (Google Checkout)。我已经在商家账户中设置了回调url，但是我需要识别是从哪个网站下的订单，以便将信息保存在数据库中。

我可以为使用单个商家帐户的每个不同网站指定代码本身的回调 url 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:57:00.053

您可以使用商家私有数据字段来传递有关您的订单的任何自定义数据（包括网站信息）。

当您收到通知时，请从商家私人数据字段中读取自定义信息并确定它来自哪个网站。

有关类似问题的解决方案，请参阅此[答案。](https://stackoverflow.com/questions/3333835/google-checkout-xml-api-associate-callback-serial-number-with-original-order)

# jquery - 如何动态查找下一个 li 标签

> ID：16143275
> 
> 赞同：2
> 
> 时间：2013-04-22T09:08:31.883
> 
> 标签：jquery, search, jquery-mobile, dynamic

我试图在点击时找到下一个`li`标签。`checkbox`我尝试了一些方法（壁橱，父母）但得到未定义的错误。我已经创建了函数并将复选框 id 传递给它。这是我的代码

### HTML

```
<li data-role="fieldcontain" id="liDoorConcerns" style="display: none;">
    <fieldset data-role="controlgroup" data-role="fieldcontain">
        <legend></legend>

        <input type="checkbox" name="DoorMissing" id="DoorMissing" />
        <label style="font-weight: bold; font-size: 14px" for="DoorMissing">Missing</label>

        <input type="checkbox" name="DoorDamaged" id="DoorDamaged" />
        <label style="font-weight: bold; font-size: 14px" for="DoorDamaged">Damaged</label>

        <input type="checkbox" name="DoorBoardedUp" id="DoorBoardedUp" />
        <label style="font-weight: bold; font-size: 14px" for="DoorBoardedUp">Boarded up</label>

        <input type="checkbox" name="DoorPaint" id="DoorPaint" />
        <label style="font-weight: bold; font-size: 14px" for="DoorPaint">Paint</label>

        <input type="checkbox" name="DoorDryRot" id="DoorDryRot" />
        <label style="font-weight: bold; font-size: 14px" for="DoorDryRot">Dry Rot</label>

        <input type="checkbox" name="DoorOther" id="DoorOther" />
        <label style="font-weight: bold; font-size: 14px" for="DoorOther">Other</label>
    </fieldset>
</li>

<li data-role="fieldcontain" id="liDoorConcernsComments" style="display:none;">
    <fieldset data-role="controlgroup" data-role="fieldcontain">
        <legend></legend>
        <textarea cols="20" id="DoorConcernsComments"    name="DoorConcernsComments" rows="2"></textarea>
    </fieldset>
</li> 
```

### JS代码：

```
function test(ida) {
    debugger;
    var element = $('#' + ida);
    var get = element.find('li');
    var li_id = get.first().id;
    alert("id" + li_id);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:14:03.957

据我了解，您的做法是错误的。试试这个：

```
$('input[type="checkbox"]').on('click', function() {
    var li = $(this).closest('li').next('li');

    alert(li.prop('id'));
}); 
```

您需要做的就是获得最接近的`<li>`，然后找到`<li>`之后的。没有必要从字符串构造选择器。

您的未定义错误可能源于此行：

```
alert("id" + li_id); 
```

该元素`li_id`是一个 jQuery 对象，它没有`.id`属性。为此，请使用`li.prop('id')`或`li[0].id`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:17:43.467

检查 jsFiddle [http://jsfiddle.net/rhP3E/上的示例](http://jsfiddle.net/rhP3E/)

我创建了一个函数，它将在复选框单击时找到下一个 li 的 id

```
$('input[type="checkbox"]').click(function(){
        alert($(this).parent().parent().next('li').attr('id'));
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:26:00.373

如果我没记错的话，您正在寻找一个代码，它会`<li>`在您单击复选框后告诉您下一步。

请参阅下面的代码：

```
$('input[type="checkbox"]').click(function () {
 var parentLI = $(this).closest('li').next().attr('id');
 console.clear();
 console.log(parentLI);
}); 
```

请参阅jsfiddle 示例的[链接](http://jsfiddle.net/sZwUA/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T10:20:20.610

jQuery Mobile 通过添加`div`'、`span`' 和`class`es 来动态增强标记。话虽如此，使用`.parent()`在其中查找元素`DOM` *并不总能*达到理想的结果。因此，使用`.closest()`代替是有保证的和更安全的。

这是我一直用来查找元素并获取它们的`id`.

```
$('[type=checkbox]').on('click', function() {
 var first =  $(this).closest('li').next('li')[0].id;
 alert(first);
}); 
```

`$(this).closest('li').next('li')`将产生一个`[object]`, 来获取`id`没有额外的代码，使用`[0].id`where`[0]`是数组中第一个对象的索引。

这种方法在使用时`.nextAll()`以及`.prevAll()`当您的数组产生许多对象时很有用。

> **[演示](http://jsfiddle.net/Palestinian/j37wg/)**

# asp.net - 重复引用不同版本的 Oracle.DataAccess？

> ID：16143277
> 
> 赞同：0
> 
> 时间：2013-04-22T09:08:34.937
> 
> 标签：asp.net, oracle, visual-studio-2008, odp.net

我不得不说我对使用 oracle 数据库开发应用程序非常陌生，现在我正在将 Visual Studio 2003 下的 ASP.NET 项目转换为 Visual Studio 2008。因为这个项目使用对 oracle.DataAccess 的引用，所以我安装了 ODAC来自包含 ODP.NET 的 oracle 库，使用 xcopy 安装程序，ODAC1120320Xcopy_32bit.zip 当我尝试运行项目时，出现此错误：

> 错误 2 该项目当前包含对多个版本的 Oracle.DataAccess 的引用、对版本 2.112.3.0 的直接引用和对版本 9.2.0.2102 的间接引用（通过“oracleDbConnections.openConnection”）。将直接引用更改为使用版本 9.2.0.2102（或更高版本）的 Oracle.DataAccess。

我该如何解决这个问题？

# html - 如何使用 CSS3 和 Bootstrap 创建纸卷曲？

> ID：16143278
> 
> 赞同：-2
> 
> 时间：2013-04-22T09:08:35.877
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Bootstrap 的表。

```
<table class="table table-bordered">
    <tr><td>Hello</td></tr>
    <tr><td>Body content Body content Body content Body content Body content Body content Body content Body content Body content Body content </tr></td>
</table> 
```

我想在这张桌子上应用一个简单的 css 类，让它像纸一样“卷曲”。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:49:00.423

你的意思是这样的：

[http://www.red-team-design.com/wp-content/uploads/2011/04/css3-box-shadow.html](http://www.red-team-design.com/wp-content/uploads/2011/04/css3-box-shadow.html)

这大约是您在不使用图像的情况下可以获得的最接近的值。

# objective-c - 从 NSTableView 获取可可中选定行的单元格值

> ID：16143288
> 
> 赞同：3
> 
> 时间：2013-04-22T09:09:26.770
> 
> 标签：objective-c, cocoa, nstableview

对于通过列表绑定到数组控制器的 NSTableView，我试图获取所选行的单元格的值。代码是 -

```
int row = [minMaxTableView selectedRow];
NSTableColumn *column = [minMaxTableView
                                         tableColumnWithIdentifier:@"min_value"];
NSCell *cell = [column dataCellForRow:row];
NSLog(@"min is --%@",[cell stringValue]); 
```

其中 minMaxTableView 是我的表视图， min_value 是列标识符。但我无法获得单元格的确切值。我的要求是——如果我将编辑后的列值修改为“-asnf”，我应该得到值“-asnf”作为 min 的输出。我在委托中编写了这段代码

```
-(void)controlTextDidEndEditing:(NSNotification *)obj 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:21:28.453

您可以通过此委托方法获取这些行和列。在这里，您还为 tableview 数据源设置了新值。

```
- (void)tableView:(NSTableView *)tableView setObjectValue:(id)value forTableColumn:(NSTableColumn *)column row:(NSInteger)row {          
    [states replaceObjectAtIndex:row withObject:value];
    NSLog(@"You changed %@ for row:%ld, column with identifier:%@",value, row,[column identifier]);
    [tableView reloadData];
} 
```

对于阵列控制器

```
- (void)tableViewSelectionDidChange:(NSNotification *)notification;{

    NSLog(@"here %ld, %@", [[notification object] selectedRow], [self.arrayController arrangedObjects][[[notification object] selectedRow]]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T06:30:49.807

有一种简单的方法，无需子类化`NSTableView`和覆盖`mouseDown`。在`willDisplayCell`获取`selectedRow`和`editedColumn`：

```
- (void)tableView:(NSTableView *)tableView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    if(tableView == self.tableView)
    {
        if (row == [tableView editedRow] && [[tableView tableColumns] indexOfObject:tableColumn] == [tableView editedColumn])
            {
             NSLog(@"cell string value is %@",[cell stringValue]);
            }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T05:36:26.900

您可以继承 NSTableView 并覆盖`mouseDown`事件以获取选定的行索引和列索引：

```
-(void)mouseDown:(NSEvent *)event
{
    NSPoint point = [self convertPoint:[event locationInWindow] fromView:nil];  //Here getting the location of the mouse clicked pont.
    long column = [self columnAtPoint:point];   //Here getting the selected column index.

    long row = [self rowAtPoint:point];     //Here getting the selected row index.
    NSTableColumn* aColumn = [[self tableColumns] objectAtIndex:column];    //Here getting the selected Table Column

    NSCell *aCell = [aColumn dataCellForRow:row];   //Here getting the exactly selected cell

    //Here setting the rspective properties to access them in a controller file.
    [self setSelectedCellRowIndex:[NSNumber numberWithLong:row]];   //Selected Row Index

    [self setSelectedCellColumnIndex:[NSNumber numberWithLong:column]]; //Selected Column Index
    [self setColumnSelected:aColumn];   //Selected Table column
    [self setCustomSelectedCell:aCell]; //Selected Cell

    [super mouseDown:event]; //Here calling the super mouseDown event
} 
```

现在在您的控制器文件中，在表视图的委托中`willDisplayCell`获取单元格值：

```
- (void)tableView:(NSTableView *)inTableView willDisplayCell:(id)inCell forTableColumn:(NSTableColumn *)inTableColumn  row:(NSInteger)inRow
{
 if((inRow ==[myTableView selectedRow]) && inTableColumn == [myTableView columnSelected]) {

NSLog(@"My selected cell %@",[incell stringValue]);// string value of your selected cell
}
} 
```

# joomla - Joomla 2.5 组件控制器加载

> ID：16143293
> 
> 赞同：0
> 
> 时间：2013-04-22T09:09:40.520
> 
> 标签：joomla, components

我一直在尝试学习如何构建 Joomla 组件。

我一直在使用[http://joomlaprogrammingbook.com/](http://joomlaprogrammingbook.com/)这本书很棒。我现在可以毫无问题地做插件和模块。但是，我对如何为组件加载某些控制器感到困惑。如果需要，给出的站点有完整的代码。

加载的初始控制器是：

```
 class JoomproSubsController extends JController
{
    /**
    * @var      string  The default view.
    * @since    1.6
    */
protected $default_view = 'submanager';

/**
 * Method to display a view.
 *
 * @param   boolean         $cachable   If true, the view output will be cached
 * @param   array           $urlparams  An array of safe url parameters and their variable types, for valid values see {@link JFilterInput::clean()}.
 *
 * @return  JController     This object to support chaining.
 */ 
public function display($cachable = false, $urlparams = false)
{
    JLoader::register('JoomproSubsHelper', JPATH_COMPONENT.'/helpers/joomprosubs.php');

    // Load the submenu.
    JoomproSubsHelper::addSubmenu(JRequest::getCmd('view', 'submanager'));

    $view = JRequest::getCmd('view', 'submanager');
    $layout = JRequest::getCmd('layout', 'default');
    $id = JRequest::getInt('id');

    // Check for edit form.
    if ($view == 'subscription' && $layout == 'edit' && !$this->checkEditId('com_joomprosubs.edit.subscription', $id)) {
        // Somehow the person just went to the form - we don't allow that.
        $this->setError(JText::sprintf('JLIB_APPLICATION_ERROR_UNHELD_ID', $id));
        $this->setMessage($this->getError(), 'error');
        $this->setRedirect(JRoute::_('index.php?option=com_joomprosubs&view=submanager', false));

        return false;
    }

    parent::display();

    return $this;
} 
```

}

我可以看到它是如何以及何时加载的。然而，在某些时候，它似乎也加载了`class JoomproSubsControllerSubManager extends JControllerAdmin`

现在我虽然要做到这一点，它需要一个 url，其中包括`com_joomproSubs?task=submanager`

但这不存在。所以我的问题是这怎么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:05:49.353

在 Joomla！一切都通过`index.php`（尽管在前端，`index.php`如果 SEF 选项打开，您将不会在 URL 中看到）。

### 没有 SEF 等

所以入口点是`index.php`或`/administrator/index.php`（对于后端）。对此附加了一些告诉 Joomla! 的参数。如何路由请求。

1.  `option=X`
2.  `task=Y.Z`
3.  `view=V`

### `option`

这是告诉 Joomla 哪个组件来处理请求的参数。例如`option=com_content`处理标准物品的组件。在确定组件值之后，Joomla 期望所有内容都在匹配目录中。在我们的示例中，这将是`/components/com_content/`或用于后端`/administrator/components/com_content/`

### `task`

该`task`参数可以采用格式的点符号值，`controller.method`例如`task=article.edit`在文章管理器中。使用这个值的元素 Joomla! 加载目录`article.php`中的`/com_content/controllers/`文件并触发方法`edit`

### `view`

该`view`参数用于指定同一控制器中的特定视图，例如再次在`com_content`组件中，您会看到视图值的这两种变化：

`/administrator/index.php?option=com_content&view=featured`

`/administrator/index.php?option=com_content&view=articles`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:58:18.707

子控制器用于组件项目的新建、编辑、删除、保存等任务，因为可能有不同类型的这些（横幅/客户端/轨道）具有不同的功能（项目、列表、表单）。

使用 URL `com_joomprosubs?task=item.display`执行`JoomprosubsControlerItem->display()`文件 components/com_joomprosubs/controllers/item.php 中的控制器方法。

如果你使用 `com_joomprosubs?task=submanager`你会`JoomprosubsController->submanager()`在 components/com_joomprosubs/controller.php 中使用。

# maven - 如何多次执行 Maven-Plugin

> ID：16143294
> 
> 赞同：2
> 
> 时间：2013-04-22T09:09:43.420
> 
> 标签：maven, reverse-engineering

我有两个要生成 hbm2java 的数据库。

```
<project>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>hibernate3-maven-plugin</artifactId>
      <version> 2.2</version>
      <executions>
        <execution>
          <id>db1</id>
          <configuration>
          <components>
            <component>
              <name>hbm2java</name>
              ...
            </component>
          </components>
          <componentProperties>
            ...
            <configurationfile>.../hibernate1.cfg.xml</configurationfile>
          </componentProperties>
        </execution>
        <execution>
          <id>db2</id>
          <configuration>
          <components>
            <component>
              <name>hbm2java</name>
              ...
            </component>
          </components>
          <componentProperties>
            ...
            <configurationfile>.../hibernate2.cfg.xml</configurationfile>
          </componentProperties>
        </execution>
      </executions>
      ...
    </plugin>
    ...
  </plugins>
  ...
</project> 
```

好的，如果我运行，`mvn hibernate3:hbm2java`那么它不会执行！

这是日志：

```
[INFO] >>> hibernate3-maven-plugin:2.2:hbm2java (default-cli) @ XXXXXXXXXXXXX >>>
[INFO]
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ XXXXXXXXXXXXX ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 5 resources
[INFO]
[INFO] <<< hibernate3-maven-plugin:2.2:hbm2java (default-cli) @ XXXXXXXXXXXXX <<<
[INFO]
[INFO] --- hibernate3-maven-plugin:2.2:hbm2java (default-cli) @ XXXXXXXXXXXXX ---
[INFO] using configuration task.
11:07:29,370  INFO org.hibernate.cfg.Environment - Hibernate 3.3.1.GA
11:07:29,376  INFO org.hibernate.cfg.Environment - hibernate.properties not found
11:07:29,381  INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
11:07:29,387  INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
[INFO] No hibernate configuration file loaded.
[INFO] No hibernate properties file loaded.
11:07:29,464  INFO org.hibernate.tool.Version - Hibernate Tools 3.2.4.GA
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:14:36.497

执行仅与生命周期有关，这意味着您必须调用：

```
mvn process-resources 
```

而不是简单地调用插件的目标。或以后的阶段，例如：

```
mvn compile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:38:18.507

好吧，我不能通过生命周期分离 hbm2java 的执行。

我有一个使用自定义配置文件“生成”的解决方案：

```
<project>
  <profiles>
    <profile>
      <id>generate</id>
      <build>
        <plugins>
          <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>hibernate3-maven-plugin</artifactId>
            <version>2.2</version>
            <executions>
              <execution>
                <id>db1</id>
                <configuration>
                <components>
                  <component>
                    <name>hbm2java</name>
                    ...
                  </component>
                </components>
                <componentProperties>
                  ...
                  <configurationfile>.../hibernate1.cfg.xml</configurationfile>
                </componentProperties>
              </execution>
              <execution>
                <id>db2</id>
                <configuration>
                <components>
                  <component>
                    <name>hbm2java</name>
                    ...
                  </component>
                </components>
                <componentProperties>
                  ...
                  <configurationfile>.../hibernate2.cfg.xml</configurationfile>
                </componentProperties>
              </execution>
            </executions>
            ...
          </plugin>
          ...
        </plugins>
      </build>
    </profile>
  </profiles>
  ...
</project> 
```

现在我需要执行 3 次不同的执行：

1.  `mvn install -Dmaven.test.skip=true`编译逆向工程策略
2.  `mvn compile -P generate`生成类
3.  `mvn test`测试单元测试

# oracle - Oracle 侦听器不断崩溃并无响应

> ID：16143296
> 
> 赞同：0
> 
> 时间：2013-04-22T09:09:53.093
> 
> 标签：oracle, hibernate, rest, tns

我们有一个使用休眠和 Glassfish 访问 Oracle 数据库的宁静 Web 服务。但是，在一些简单的事务（一些简单的查询和检索一些数据）之后，Oracle 侦听器变得无响应并出现以下错误：

```
ORA-12519, TNS:no appropriate service handler found
org.hibernate.exception.GenericJDBCException: Cannot open connection
at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:91)
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:79)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:363)
at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:122)
at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:125)
at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:57)
at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1308)
at data.CommonUnitOfWork.<init>(CommonUnitOfWork.java:29)
at data.UnitOfWorkFactory.createCommonUnitOfWork(UnitOfWorkFactory.java:14)
at controller.UserController.getUser(UserController.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)

Caused by: java.sql.SQLException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:113)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:263)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:389)
at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:454)
at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:802)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:190)
at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:110)
at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:360)
... 51 more 
```

使服务再次运行的唯一解决方案是重新启动侦听器。

提前谢谢你的帮助。

**编辑：** Oracle 版本是 11g，restful web 服务在 java 中。侦听器在工作几分钟后变得无响应，其中包括运行少量查询（如 4 或 5 个）以检索数据库中少于 5 行的表（由大约 10 列组成）；这项工作一点也不繁重。该数据库由大约 20 个表组成。在某些查询中，使用休眠的标准在 2 或 3 个表之间进行连接，这并不复杂，不应被视为“重负载”。

**编辑 2：** 该模型使用某种 UnitOfWorkFactory 来实现存储库模式。对于每个请求（例如创建新对象、编辑现有对象或搜索），模型都会创建一个 unitOfWork，其中将创建一个休眠会话，执行该工作，然后关闭会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:49:05.113

一定要使用连接池。这可以防止大量不必要且非常昂贵的重新连接到数据库。有关示例，请查看[此处并向下翻页到“首先创建 JDBC 连接池”](http://ronr.blogspot.nl/2012/07/how-to-setup-formspider-apex.html)创建与数据库的连接是一项非常耗时的任务，它会大大降低您的整体系统性能。这是因为它是一个序列化过程。

通过使用连接池，您可以确保始终有可用的会话供您的应用程序使用，即使侦听器本身在短时间内关闭。

# javascript - z-index javascript css issue

> ID：16143297
> 
> 赞同：0
> 
> 时间：2013-04-22T09:09:58.990
> 
> 标签：javascript, jquery, css

I have dynamiclly created divs on a page that are draggable via jquery.

I have added a small button on each div that allows the user to delete the div with a click.

The problem I have is, I set the highlighted div as the foremost item on the page but if the div is overlapping another div and the user clicks the delete button, the div underneath is highlighed and brought to the front instead of the button being clicked.

I have positioned the button inside the div but position does not seem to have any effect. The button is appened to the div.

I am making the assumption that its something to do with the z-index of the button but I may be completely on the wrong track

any help would be appreciated.

here's the code that I use to append the button to the div. This code is called just after the div is created within the create div function loop.

```
 var but=document.createElement('input');
  but.setAttribute('type','button');
  but.setAttribute('class','removebutton');
  but.style.position = "absolute";
  but.style.top = "15px";
  but.style.left = +width+"px";
  but.style.float="right";
  but.style.visibility="hidden";

  but.onclick=function(){
    if(confirm('Really delete?'))
      {                   
       $.post("delete_box.php",{i:i, page_ref:'<? echo $page_ref; ?>', template_ref:'<? echo $template_ref; ?>'}, function(data,status){ });    
    document.getElementById("frmMain").removeChild(newdiv);
    document.getElementById(id).removeChild(but);
    document.getElementById(id).removeChild(newbr);

      }             
   } 
```

here's the code I use to bring the clicked div to the front and push anything else back (each div has the class name of `dragbox`)

```
 $('.dragbox').click(function() 
      { 
         $(".removebutton").css('visibility', 'hidden');
         $(this).css({  
        'background-image':'url(img/move.png)',
        'background-repeat':'no-repeat',
        'width':'15px',
        'height':'15px',
        'zIndex':'1000'
        })
        $(this).find(".removebutton").css('visibility', 'visible');

  });   

$('.dragbox').focusout(function() {   
    $(this).css({
                   'border', '0px',
           'background-color', 'transparent',
           'width', '0px',
           'z-index', '0'
        })      
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:25:52.077

I think you need to stop the propagation of the click event on the button.

When a user clicks the button, then the click event will be passed (aka bubbeling) to all the underlying elements of the click position.

```
but.onclick = function(e){
    e.stopPropagation(); // stop the propagation of the click event to other elements

    // ... your code             
} 
```

# c++ - 这是 CComSafeArray 的使用不好吗？

> ID：16143302
> 
> 赞同：1
> 
> 时间：2013-04-22T09:10:13.070
> 
> 标签：c++, com, safearray

我有一个 COM 功能：

```
GetData(SAFEARRAY ** pRetVal) 
```

并遵循遗留代码：

```
CComSafeArray<double> saDataArray;
hr = pmyInterface->GetData(&saDataArray.m_psa);
SafeArrayLock(saDataArray); 
```

我怀疑手动管理锁是否好。`m_psa`当返回为`NULL`by时，该代码会崩溃`GetData`吗？

下面的代码怎么样？那个更好吗？

```
LPSAFEARRAY psa;
CComSafeArray<double> saDataArray;
hr = pmyInterface->GetData(&psa);
saDataArray.Attach(psa); 
```

**编辑：** 我测试了上面的两个代码。有一个区别。如果`GetData`返回`NULL`，则直接`Attach`不`NULL`检查将调用异常。第一个版本将返回一个`E_INVALIDARG`. 我的问题仍然存在，您是否更喜欢更高版本，因为它使用 SafeArray 对象来维护计数，而不是混合它？

**EDIT2：** 如果出于某种原因我选择了第一个版本，可以忽略`E_INVALIDARG`返回值吗？当某些代码稍后使用它时，这会有什么副作用`saDataArray`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:39:27.320

你写了：

> ```
> SafeArray * psa;
> CComSafeArray<double> saDataArray;
> hr = pmyInterface->GetData(&psa);
> saDataArray.Attach(psa); 
> ```

但我认为实际的代码应该是：

```
LPSAFEARRAY psa; // not "SafeArray *"
hr = pmyInterface->GetData(&psa);
CComSafeArray<double> saDataArray;
saDataArray.Attach(psa); 
```

有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/1778491/how-does-one-return-a-local-ccomsafearray-to-a-lpsafearray-output-parameter)。

**编辑：根据您的问题编辑更新答案。**

我真的不喜欢你的第一个代码：

> ```
> CComSafeArray<double> saDataArray;
> hr = pmyInterface->GetData(&saDataArray.m_psa);
> SafeArrayLock(saDataArray); // <--- Explicit lock on a CComSafeArray-wrapped array 
> ```

事实上，一旦将原始`SAFEARRAY`数据提供给 C++ RAII 包装器 ( `CComSafeArray`)，从那时起，我将只使用此包装器及其方法来操作数组。
如果您想对数组进行“手动”处理，只需`.Detach()`使用 C++ 包装器，并使用 Win32 API 函数调用。但是将两者混合并不是质量好的代码，IMO。

请注意，第二种方法不同，因为您首先使用 raw `SAFEARRAY`，使`GetData()`方法填充它，然后将`.Attach()`其传递给`CComSafeArray`C++ RAII 包装器，*将所有权*（“*移动语义*”）转移到该包装器。然后就可以使用包装器方法来操作数组了。

此外，在生产质量代码中，我不会忽略 error `HRESULT`。

# javascript - 用按钮刷新 Javascript 句柄

> ID：16143303
> 
> 赞同：0
> 
> 时间：2013-04-22T09:10:14.907
> 
> 标签：javascript

我对 Javascript 很陌生。我正在尝试实现一个按钮来控制页面是否刷新。但是，它不起作用（单击按钮会触发一些动作，如警报等，但不会更改标签按钮并且不会停止刷新页面）。

你能告诉我我哪里出错了吗？这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Message log</title>
    <link href="styles.css" rel="stylesheet" type="text/css">
</head>

<body onload="JavaScript:timedRefresh(5000);">

    <button id="bRefresh" onclick="refreshMode()">Stop refreshing</button>

    some content...

</body>
</html>

<script type="text/JavaScript">
    <!--
        var refresh = 1;

        function timedRefresh(timeoutPeriod) {
            if(refresh == 1) {
                setTimeout("location.reload(true);",timeoutPeriod);
            }       
        }

        function refreshMode() {
            if(refresh == 1) {
                var refresh = 2;
                document.getElementById("bRefresh").value="Start refreshing";
            } else {
                var refresh = 1;
                document.getElementById("bRefresh").value="Stop refreshing";
            }       
        };
    //   -->
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:26:18.250

您的代码应如下所示，

```
 var refresh = 1;
        var timedInterval= null;
        function timedRefresh(timeoutPeriod) {
            if(refresh == 1) {
                timedInterval = setInterval(function() { location.reload(true); },timeoutPeriod);
            }       
        }

        function refreshMode() {
            if(refresh === 1) {
                 refresh = 2;
                 clearInterval(timedInterval);
                 document.getElementById("bRefresh").innerHTML="Start refreshing";
            } else {
                 refresh = 1;
                 timedRefresh(5000);
                document.getElementById("bRefresh").innerHTML="Stop refreshing";
            }     
            //document.getElementById("bRefresh").innerHTML="Start refreshing";  
        }; 
```

重复任务使用 setInterval 而不是 setTimeout

您声明了三次刷新变量，因此您的按钮值不会改变。

应该使用 innerHTML 而不是 value 来更改 Buttons 文本。

停止使用 clearInterval 如上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:16:24.130

```
<button id="bRefresh">Stop refreshing</button>

var button = document.getElementById("bRefresh");
var refresh = 1;
var timeoutPeriod = 5000;
var id;

function timedRefresh() {
    if (refresh == 1) {
        window.location.reload(true);
    }
}

function refreshMode() {
    if (refresh == 1) {
        clearInterval(id);
        refresh = 2;
        button.textContent = "Start refreshing";
    } else {
        id = setInterval(timedRefresh, timeoutPeriod);
        refresh = 1;
        button.textContent = "Stop refreshing";
    }
};

button.addEventListener("click", refreshMode, false);

id = setInterval(timedRefresh, timeoutPeriod); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/KqjYw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:20:48.740

使用 innerHTML 来[支持 IE < 9](https://developer.mozilla.org/en/docs/DOM/Node.textContent)

```
var button = document.getElementById("bRefresh");
var refresh = 1;

function refreshMode() {
    if (refresh == 1) {
        refresh = 2;
        button.innerHTML = "Start refreshing";
    } else {
        vrefresh = 1;
        button.innerHTML = "Stop refreshing";
    }
};

button.addEventListener("click", refreshMode, false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:28:56.250

在加载正文时，`prepareRefresh()`函数检查值`refresh`（设置为 1）并开始刷新页面并超时。您应该启动刷新，并且在刷新之前，您必须检查该`refresh`值。因为在第一种情况下，`location.reload`不关心`refresh`. 检查`refresh`超时结束时的值

```
<script type="text/JavaScript">
    <!--
        var refresh = 1;

        function timedRefresh(timeoutPeriod) {
            if(refresh == 1) {
                setTimeout("refreshPage();",timeoutPeriod);
            }       
        }

        function refreshPage ()
        {
          if(refresh == 1) {
                setTimeout("location.reload(true);", 0);
            }  
        }

        function refreshMode() {
            if(refresh == 1) {
                refresh = 2;
                document.getElementById("bRefresh").innerHTML="Start refreshing";
            } else {
                refresh = 1;
                document.getElementById("bRefresh").innerHTML="Stop refreshing";
            }       
        };
    //   -->
</script> 
```

# powerbuilder - 如何部署 PowerBuilder 10.5 项目？

> ID：16143312
> 
> 赞同：0
> 
> 时间：2013-04-22T09:10:50.050
> 
> 标签：powerbuilder, powerbuilder-build-deploy

朋友们，我是vb6开发人员。现在我需要在 PowerBuilder 10.5 上工作。在 vb6 中，我通过创建 exe 或通过“打包和部署”向导将程序部署到其他计算机中来部署项目。像这样，我如何在 PowerBuilder 10.5 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:01:10.107

假设您首先要制作一个普通的 PB 应用程序（不是 .NET 等），您必须执行以下操作：

1.  文件/新建
2.  项目选项卡
3.  选择应用程序向导（或应用程序项目）

编译后你会得到一个项目对象。之后打开此项目文件，然后单击设计/部署项目。这将生成 exe（和 dll-s，如果你已经设置好了）。

完成后，您还需要必要的 Powrbuilder dll-s。您可以使用 Powerbuilder Runtime Packager 制作一个包，这是 Powerbuilder 安装文件的一部分（只需从开始菜单运行它）。在那里您可以选择您正在使用的功能、数据库，并且打包程序将包含必要的 dll-s。

完成后，只需将您自己的应用程序文件（exe、dll）和运行时打包程序制作的文件复制到所选计算机。

兄弟。加博尔

# matlab - Matlab：arrayfun、cellfun、spfun 和 structfun 与简单的 for 循环

> ID：16143314
> 
> 赞同：9
> 
> 时间：2013-04-22T09:10:57.083
> 
> 标签：matlab, for-loop

哪个更好，使用所有`*fun`函数（`arrayfun`、、`cellfun`和）`structfun`还是`spfun`简单地使用`for`循环？

哪种方法可以提供更好的性能，就代码的可读性而言，哪些方法应该被认为是更好的实践？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T10:06:12.310

这真的取决于你所说的“性能”:)

如果您的意思是*minimum execution time*，那么有时`*fun`会更快（例如，`cellfun('isempty', ...);`（是的，字符串参数！）肯定比循环版本更好）。有时循环更快。如果您使用的是小于 2006 的 Matlab 版本，请`*fun`默认使用这些功能。如果您使用的是较新的内容，请默认使用循环。您仍然必须始终进行分析以找出哪个更快。

正如 Amro 所指出的，如果您有一个能够执行 FP 算术的 GPU，以及支持 GpGPU 的最新版本的 Matlab，那么`arrayfun`对`gpuArray`输入的调用将被大规模并行化。但是，不能就执行时间做出一般性陈述；对于较小的数组或绝对庞大的数组，将所有内容复制到 GPU 的开销可能会抵消并行计算的任何好处，因此...分析确实是唯一确定的方法。

如果您的意思是*最短编码*`*fun`时间，那么我会说只要操作简单，编码通常会更快。对于任何复杂的事情，通常最好选择循环。

如果您的意思是*最佳的可读性*，因此*在专业环境中维护和实施更改所需的最少时间*，当然，去循环。

在这个时间点，您的问题并没有一个明确的简单答案:)

# angularjs - AngularJS 报告后端错误

> ID：16143316
> 
> 赞同：1
> 
> 时间：2013-04-22T09:11:04.590
> 
> 标签：angularjs

除了合理的后端错误处理外，设法用 AngularJS 重写了我的项目。

我只希望有一种通用的方法来捕获 Ajax 错误响应并相应地修改范围。

在 JQuery 中，我会执行以下操作：

1.  在 Ajax 设置上设置一个元素（我们称之为 ajaxRoot）
2.  我会确保后端在标题“显示消息”上发送错误，其中每个键与 ajaxRoot 下的元素名称匹配。例如

    ```
    <div id="myAjaxSection">
        <span class="view-port">
              <input name="username"/>
        </span>
    </div>

    $.ajax({
        ajaxRoot : $("#myAjaxSection"), 
        ... 
     }); 
    ```

3.  用于`ajaxError`捕获所有 ajax 错误，看起来像

    ```
    if ( ajaxSettings.ajaxRoot && jqXHR.getResponseHeader("display-messages")){
        var msgs = JSON.parse( jqXHR.getResponseHeader("display-message"));
        var $ajaxRoot = ajaxSettings.ajaxRoot;
        var k;
        for ( k in msgs ){
            $ajaxRoot.find("[name=" + k + "]" ).closest(".view-port" ).addClass("error").popover({content: msgs[k]});
        }
    } 
    ```

假设我决定的约定，这将很容易处理任何页面上的所有错误。

现在我正在尝试使用 AngularJS 达到类似的效果。这是我到目前为止尝试过的

1.  http拦截器-但我无法访问范围。
2.  http 拦截器 + 发布/订阅事件 - 需要在每个控制器中重复代码。
3.  $http 调用上的错误处理程序 - 再次导致代码重复。

目前我被卡住了。我需要有关如何进行的指导？

# 编辑

我讨厌回答我自己的问题。

我现在有一个丑陋但合理的解决方案。将不胜感激有关此主题的更多答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:20:49.597

我现在丑陋但合理的解决方案如下：

即使拦截器无法访问“$scope”——它们也可以访问“$rootScope”。

***注意***- 当我调试拦截器并尝试评估“$rootScope”时，我得到一个“没有这样的引用”错误......这很奇怪。一旦我使用“console.log”打印它，它就运行良好。

在我的应用程序配置下，我会做

```
$httpProvider.responseInterceptors.push('myInterceptor'); 
```

然后我定义我的拦截器如下

```
MyApp.factory( 'myInterceptor', function ( $rootScope, $q, $window )
{
    function success( response )
    {
        $rootScope.formErrors = {};
        return response;
    }

    function error( response )
    {
        var status = response.status;
        if ( status == 401 ) {
            window.location = "/";
            return;
        }

        var hdrs = response.headers();
        if ( hdrs["display-message"]){
            var displayMessages = JSON.parse(hdrs["display-message"]);
            if ( displayMessages["formErrors"]){
                $rootScope.formErrors = displayMessages["formErrors"];
            }
        }
        console.log(["hdrs",hdrs]);
        // otherwise
        return $q.reject( response );
    }

    return function ( promise )
    {
        return promise.then( success, error );
    };
} ); 
```

现在剩下的就是像这样从模板中引用 rootScope.formErrors

```
<div id="myAjaxSection">
    <span class="view-port" ng-class="{'error':formErrors['username'] != null}">
          <input name="username"/>
    </span>
</div> 
```

其中 - 感谢模板在没有太多代码重复的情况下是可行的。

```
<div id="myAjaxSection">
    <span class="view-port" ng-class="{'error':formErrors['@name'] != null}">
          <input name="@name"/>
    </span>
</div> 
```

现在剩下的就是解决如何实现“popover” - 我确信某处存在某些东西。

我讨厌这个解决方案..感觉不对..如果有人有更好的建议 - 请做。

# flash - (Flash) 为什么 on(release) 和 on(rollover) 不能正常工作？

> ID：16143318
> 
> 赞同：0
> 
> 时间：2013-04-22T09:11:10.397
> 
> 标签：flash, actionscript

我是 Flash 动作脚本的新手，我的问题是当我尝试同时使用 on(rollover) 和 on(release) 时 on(rollover) 工作但 on(release) 不起作用！这是我的脚本。

```
on(rollOver){
    gotoAndStop(5);
}
on(rollOut){
    gotoAndStop(1);
}
on(release){ 
    loadMovie("Lesson1(Menu).swf", 0);
} 
```

但是当我只使用`on(release)`它时它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:51:35.273

我的猜测是，当鼠标进入您描述的任何剪辑时，您的翻转被触发，并且您在第 5 帧中没有正确的 on(release) 代码，当您单击鼠标触发 onRelease 时，它​​就在其中。

请注意，您使用的语法非常过时。

# wpf - 如何将 wpf mediakit 添加到我的项目中？

> ID：16143319
> 
> 赞同：1
> 
> 时间：2013-04-22T09:11:13.257
> 
> 标签：wpf, xaml, media-player, wpf-mediakit

我在我的项目中引用了 WPFMediaKit.dll，这是我的 xaml：

```
<Window x:Class="WPFCameraTest.Window2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Controls="clr-namespace:WPFMediaKit.DirectShow.Controls;assembly=WPFMediaKit"
    Title="Window2" Height="300" Width="300">
<Grid>
    <Controls:VideoCaptureElement ></Controls:VideoCaptureElement>
</Grid> 
```

但我得到错误：

> 名称空间“clr-namespace:WPFMediaKit.DirectShow.Controls;assembly=WPFMediaKit”中不存在名称“VideoCaptureElement”。

我在跳过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:20:26.973

1.  有没有可能你写错了 VideoCaptureElement ！？！？！你写：VideoCaputreElemnt
2.  我认为你必须用它来称呼它`<WPFMediaKit:VideoCaptureElement >`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T03:42:11.160

`<Controls:VideoCaptureElement>`为我工作~

您是否在项目中添加了“WPF MediaKit”引用？并确保 WPF MediaKit 中存在“VideoCaptureElement.cs”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T07:38:36.947

不要通过 dll 文件添加引用。

使用 Nuget 包并查找 WPFMediaKit 并添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T02:00:46.080

在此处查看 wiki 条目： [https ://github.com/Sascha-L/WPF-MediaKit/wiki](https://github.com/Sascha-L/WPF-MediaKit/wiki)

```
<WPFMediaKit:VideoCaptureElement
 x:Name="videoCapElement"
 LoadedBehavior="Play"
 DesiredPixelWidth="320"
 DesiredPixelHeight="240"
 Stretch="Fill"
 VideoCaptureSource="{Binding Path=CaptureDeviceName}"
 FPS="30"
 /> 
```

# git - 如何在字段名中使用特殊字符执行 git cvsimport？

> ID：16143320
> 
> 赞同：1
> 
> 时间：2013-04-22T09:11:13.803
> 
> 标签：git, cp1252, cvsimport

我们有大约 100 个 CVS 存储库，我们希望将它们转换为 git。我们尝试使用`git cvsimport`which 工作正常。

但是我们有一些文件名中有特殊字符的文件。特殊字符在新 git 存储库的文件名中最终成为不可打印的字符。

CVS 客户端和 CVS 服务器都在 Windows 上运行。Windows 客户端对所有文件使用 cp1252 字符集。`git cvsimport`使用 cygwin 调用，因为它不适用于 Windows。

运行后在 git 中获取正确文件名的任何想法`git cvsimport`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T06:09:49.520

我们最终编写了两个脚本来修复所有提交中的文件和目录名称。

对于文件：

```
#!/bin/bash
echo "$1 --> $2"

cmd="if [ -f '$1' ]
then
mv '$1' '$2'
fi"

git filter-branch --tree-filter "$cmd" --force -- --all 
```

对于目录：

```
#!/bin/bash
echo "$1 --> $2"

cmd="if [ -d '$1' ]
then
mv '$1' '$2'
fi"

git filter-branch --tree-filter "$cmd" --force -- --all 
```

根据操作系统和终端，您无法输入某些字符。大多数情况下，您只需`?`在第一个模式中键入 a。脚本假定文件/目录在当前签出分支中可见。

# php - 编辑我最近的帖子小部件

> ID：16143321
> 
> 赞同：1
> 
> 时间：2013-04-22T09:11:17.030
> 
> 标签：php, wordpress

我有一个我买的 Wordpress 主题，它附带了许多不同的小部件。我有一个带有以下代码的代码，它的作用是显示最近的帖子。我需要对其进行更改，实际上是两个，而不是向我显示最近的 POST，我需要它来向我显示最近的投资组合项目，并且只显示某个类别。

```
<?php
// =============================== My Recent Posts (News widget) ======================================
class MY_PostWidget extends WP_Widget {
    /** constructor */
    function MY_PostWidget() {
        parent::WP_Widget(false, $name = 'My - Recent Posts');  
    }

  /** @see WP_Widget::widget */
    function widget($args, $instance) {     
        extract( $args );
        $title = apply_filters('widget_title', $instance['title']);
                $category = apply_filters('widget_category', $instance['category']);
                $linktext = apply_filters('widget_linktext', $instance['linktext']);
                $linkurl = apply_filters('widget_linkurl', $instance['linkurl']);
                $count = apply_filters('widget_count', $instance['count']);
        ?>
              <?php echo $before_widget; ?>
                  <?php if ( $title )
                        echo $before_title . $title . $after_title; ?>

                        <?php  $temp = $wp_query;
                                     $wp_query= null;
                                     $wp_query = new WP_Query();  ?>

                                <ul class="latestpost">

                                <?php $querycat = $category; ?>

                                <?php $wp_query->query("showposts=". $count ."&category_name=". $querycat); ?>

                                <?php if ($wp_query->have_posts()) : while ($wp_query->have_posts()) : $wp_query->the_post();?>
                                <li>
                    <?php if(has_post_thumbnail()) {
                            echo '<figure class="featured-thumbnail"><a href="'; the_permalink(); echo '">';
                            echo the_post_thumbnail('small-post-thumbnail');
                            echo '</a></figure>';
                            }
                          ?>
                  <time datetime="<?php the_time('Y-m-d\TH:i'); ?>"><a href="<?php the_permalink(); ?>"><?php the_time('[m-d-Y]'); ?></a></time>
                  <?php $excerpt = get_the_excerpt(); echo my_string_limit_words($excerpt,13);?>
                                </li>
                                <?php endwhile; ?>
                                </ul>
                                <?php endif; ?>

                                <?php $wp_query = null; $wp_query = $temp;?>

                                <!-- Link under post cycle -->
                                <?php if($linkurl !=""){?>
                                    <a href="<?php echo $linkurl; ?>" class="button"><?php echo $linktext; ?></a>
                                <?php } ?>

              <?php echo $after_widget; ?>

        <?php
    }

    /** @see WP_Widget::update */
    function update($new_instance, $old_instance) {             
        return $new_instance;
    }

    /** @see WP_Widget::form */
    function form($instance) {              
      $title = esc_attr($instance['title']);
            $category = esc_attr($instance['category']);
            $linktext = esc_attr($instance['linktext']);
            $linkurl = esc_attr($instance['linkurl']);
            $count = esc_attr($instance['count']);
        ?>
      <p><label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:', 'theme1472'); ?> <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo $title; ?>" /></label></p>

      <p><label for="<?php echo $this->get_field_id('category'); ?>"><?php _e('Category Slug:', 'theme1472'); ?> <input class="widefat" id="<?php echo $this->get_field_id('category'); ?>" name="<?php echo $this->get_field_name('category'); ?>" type="text" value="<?php echo $category; ?>" /></label></p>

      <p><label for="<?php echo $this->get_field_id('count'); ?>"><?php _e('Posts per page:'); ?><input class="widefat" style="width:30px; display:block; text-align:center" id="<?php echo $this->get_field_id('count'); ?>" name="<?php echo $this->get_field_name('count'); ?>" type="text" value="<?php echo $count; ?>" /></label></p>

             <p><label for="<?php echo $this->get_field_id('linktext'); ?>"><?php _e('Link Text:', 'theme1472'); ?> <input class="widefat" id="<?php echo $this->get_field_id('linktext'); ?>" name="<?php echo $this->get_field_name('linktext'); ?>" type="text" value="<?php echo $linktext; ?>" /></label></p>

             <p><label for="<?php echo $this->get_field_id('linkurl'); ?>"><?php _e('Link Url:', 'theme1472'); ?> <input class="widefat" id="<?php echo $this->get_field_id('linkurl'); ?>" name="<?php echo $this->get_field_name('linkurl'); ?>" type="text" value="<?php echo $linkurl; ?>" /></label></p>
        <?php 
    }

} // class  Widget
?> 
```

这是它现在在小部件窗格中的样子：

![小部件](https://i.stack.imgur.com/TDhhB.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:18:25.780

在这一行

```
<?php $wp_query->query("showposts=". $count ."&category_name=". $querycat); ?> 
```

用。。。来代替

```
<?php $wp_query->query("showposts=". $count ."&category_name=". $querycat."&post_type=portfolio"); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T06:50:27.800

我有一个和你类似的小部件。在上面的答案的帮助下，我能够让我的工作。希望这会对您或其他人有所帮助。

```
 <?php
// =============================== My Recent Portfolio (News widget) ======================================
class MY_PortfolioWidget extends WP_Widget {
    /** constructor */
    function MY_PortfolioWidget() {
        parent::WP_Widget(false, $name = 'My - Recent Portfolio');  
    }

  /** @see WP_Widget::widget */
    function widget($args, $instance) {     
        extract( $args );
        $title = apply_filters('widget_title', $instance['title']);
                $category = apply_filters('widget_category', $instance['category']);
                $post_format = apply_filters('widget_post_format', $instance['post_format']);
                $linktext = apply_filters('widget_linktext', $instance['linktext']);
                $linkurl = apply_filters('widget_linkurl', $instance['linkurl']);
                $count = apply_filters('widget_count', $instance['count']);
                $excerpt_count = apply_filters('widget_excerpt_count', $instance['excerpt_count']);

        ?>
              <?php echo $before_widget; ?>
                  <?php if ( $title )
                        echo $before_title . $title . $after_title; ?>

                        <?php if($post_format == 'post-format-standard') { 

                            $args = array(
                                        'showposts' => $count,
                                        'portfolio_category' => $category,
                                        'post_type' => portfolio,
                                        'tax_query' => array(
                                         'relation' => 'AND',
                                            array(
                                                'taxonomy' => 'post_format',
                                                'field' => 'slug',
                                                'terms' => array('post-format-aside', 'post-format-gallery', 'post-format-link', 'post-format-image', 'post-format-quote', 'post-format-audio', 'post-format-video'),
                                                'operator' => 'NOT IN'
                                            )
                                        )
                                        );

                        } else { 

                            $args = array(
                                'showposts' => $count,
                                'category_name' => $category,
                                'post_type' => portfolio,
                                'tax_query' => array(
                                 'relation' => 'AND',
                                    array(
                                        'taxonomy' => 'post_format',
                                        'field' => 'slug',
                                        'terms' => array($post_format)
                                    )
                                )
                                );

                        } ?>

                        <div class="latestpost-container">
                            <?php $wp_query = new WP_Query( $args ); ?>
                                <ul class="latestpost">

                                <?php if ($wp_query->have_posts()) : while ($wp_query->have_posts()) : $wp_query->the_post();?>

                                <li class="clearfix">
                                    <?php if(has_post_thumbnail()) { ?>
                                        <?php
                                        $thumb = get_post_thumbnail_id();
                                        $img_url = wp_get_attachment_url( $thumb,'full' ); //get img URL
                                        $image = aq_resize( $img_url, 200, 146, true); //resize & crop img
                                        ?>
                                        <figure class="featured-thumbnail">
                                            <a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><img src="<?php echo $image ?>" alt="<?php the_title(); ?>" /></a>
                                        </figure>
                                    <?php } ?>
                                        <div class="post-meta">
                                            <time datetime="<?php the_time('Y-m-d\TH:i'); ?>"><?php the_time('l, j F Y'); ?></time>
                                            <?php _e('By', 'theme1796'); ?> <?php the_author_posts_link() ?>
                                        </div>
                                        <h4><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php _e('Permanent Link to', 'theme1796');?> <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h4>
                                    <?php if($excerpt_count!="") { ?>
                                        <div class="excerpt">
                                            <?php $excerpt = get_the_excerpt(); echo my_string_limit_words($excerpt,$excerpt_count);?>
                                        </div>
                                        <div class="post-footer">
                                            <?php comments_popup_link('No Comments', '<span>1</span> Comment', '<span>%</span> Comments', 'comments-link', 'Comments are closed'); ?>
                                            <a href="<?php the_permalink() ?>" class="link"><?php _e('Read more', 'theme1796'); ?></a>
                                        </div>
                                    <?php } ?>
                                </li>
                                <?php endwhile; ?>
                                </ul>
                                <?php endif; ?>

                                <?php $wp_query = null; $wp_query = $temp;?>

                                <!-- Link under post cycle -->
                                <?php if($linkurl !=""){?>
                                    <a href="<?php echo $linkurl; ?>" class="link"><?php echo $linktext; ?></a>
                                <?php } ?>

                        </div>                      

              <?php echo $after_widget; ?>

        <?php
    }

    /** @see WP_Widget::update */
    function update($new_instance, $old_instance) {             
        return $new_instance;
    }

    /** @see WP_Widget::form */
    function form($instance) {              
      $title = esc_attr($instance['title']);
            $category = esc_attr($instance['category']);
            $post_format = esc_attr($instance['post_format']);
            $linktext = esc_attr($instance['linktext']);
            $linkurl = esc_attr($instance['linkurl']);
            $count = esc_attr($instance['count']);
            $excerpt_count = esc_attr($instance['excerpt_count']);
        ?>
      <p><label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title:', 'theme1796'); ?> <input class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" type="text" value="<?php echo $title; ?>" /></label></p>

      <p><label for="<?php echo $this->get_field_id('category'); ?>"><?php _e('Category Slug:', 'theme1796'); ?> <input class="widefat" id="<?php echo $this->get_field_id('category'); ?>" name="<?php echo $this->get_field_name('category'); ?>" type="text" value="<?php echo $category; ?>" /></label></p>

            <p><label for="<?php echo $this->get_field_id('post_format'); ?>"><?php _e('Post format:', 'theme1796'); ?><br />

      <select id="<?php echo $this->get_field_id('post_format'); ?>" name="<?php echo $this->get_field_name('post_format'); ?>" style="width:150px;" > 
            <option value="post-format-standard" <?php echo ($post_format === 'post-format-standard' ? ' selected="selected"' : ''); ?>>Standard</option>
      <option value="post-format-aside" <?php echo ($post_format === 'post-format-aside' ? ' selected="selected"' : ''); ?>>Aside</option>
            <option value="post-format-quote" <?php echo ($post_format === 'post-format-quote' ? ' selected="selected"' : ''); ?> >Quote</option>
            <option value="post-format-link" <?php echo ($post_format === 'post-format-link' ? ' selected="selected"' : ''); ?> >Link</option>
            <option value="post-format-image" <?php echo ($post_format === 'post-format-image' ? ' selected="selected"' : ''); ?> >Image</option>
      <option value="post-format-gallery" <?php echo ($post_format === 'post-format-gallery' ? ' selected="selected"' : ''); ?> >Gallery</option>
            <option value="post-format-audio" <?php echo ($post_format === 'post-format-audio' ? ' selected="selected"' : ''); ?> >Audio</option>
            <option value="post-format-video" <?php echo ($post_format === 'post-format-video' ? ' selected="selected"' : ''); ?> >Video</option>
      </select>
      </label></p>

      <p><label for="<?php echo $this->get_field_id('count'); ?>"><?php _e('Posts per page:'); ?><input class="widefat" style="width:30px; display:block; text-align:center" id="<?php echo $this->get_field_id('count'); ?>" name="<?php echo $this->get_field_name('count'); ?>" type="text" value="<?php echo $count; ?>" /></label></p>

            <p><label for="<?php echo $this->get_field_id('excerpt_count'); ?>"><?php _e('Excerpt length (words):'); ?><input class="widefat" style="width:30px; display:block; text-align:center" id="<?php echo $this->get_field_id('excerpt_count'); ?>" name="<?php echo $this->get_field_name('excerpt_count'); ?>" type="text" value="<?php echo $excerpt_count; ?>" /></label></p>

             <p><label for="<?php echo $this->get_field_id('linktext'); ?>"><?php _e('Link Text:', 'theme1796'); ?> <input class="widefat" id="<?php echo $this->get_field_id('linktext'); ?>" name="<?php echo $this->get_field_name('linktext'); ?>" type="text" value="<?php echo $linktext; ?>" /></label></p>

             <p><label for="<?php echo $this->get_field_id('linkurl'); ?>"><?php _e('Link Url:', 'theme1796'); ?> <input class="widefat" id="<?php echo $this->get_field_id('linkurl'); ?>" name="<?php echo $this->get_field_name('linkurl'); ?>" type="text" value="<?php echo $linkurl; ?>" /></label></p>
        <?php 
    }

} // class Widget
?> 
```

# image - Openlayers-根据缩放区域显示另一个图像层

> ID：16143322
> 
> 赞同：0
> 
> 时间：2013-04-22T09:11:20.013
> 
> 标签：image, zooming, openlayers, layer

是否可以在 OpenLayers 中基于基础图像层上的某些预定义区域从基础图像层打开另一个图像层 (OpenLayers.Layer.Image)。例如，如果我在基本图像层中设置了五个区域，则缩放到任何一个区域都会打开相应的图像层，而缩小会带回基本图像层？

如果是的话，你能指出一些样本或方法如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T09:11:16.793

经过大量的试验和错误，我发现它可以在 Openlayers 中使用**OpenLayers.Layer.Image**到地图层。然后创建一个表示圆圈的矢量叠加层（**OpenLayers.Layer.Vector("Overlay")**）并将其作为叠加层添加到地图中。

然后我注册地图的**zoomend**事件。基于 getZoom() 方法，我可以控制使用**map.setBaseLayer(imageLayer2)更改图像**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T00:26:00.413

我不知道这种功能 - 基于区域的不同图像层。但也许您会对自托管的自定义磁贴感兴趣？这是有关如何设置[的一些信息。](http://trac.osgeo.org/openlayers/wiki/UsingCustomTiles)这个想法是：你从你的图像创建平铺图像（例如256x256px），你只需从一个大图像创建许多缩放级别。但是在您感兴趣的区域，您可以更改那里存在的平铺图像。缺点是您必须执行的操作数量：您必须将所有图像切割成平铺（或者不切割，如果使用大平铺），手动调整图像大小以适应不同的缩放级别，配置缩放级别，最后 - 更改带有区域的平铺你的兴趣。需要一些图像编辑，但应该可以。

# jquery - 性感下拉菜单隐藏点击外部

> ID：16143323
> 
> 赞同：-1
> 
> 时间：2013-04-22T09:11:20.643
> 
> 标签：jquery, css, drop-down-menu

我想你们中的许多人都知道使用 jQuery 和 CSS 来设置下拉菜单样式的[性感下拉菜单。](http://www.google.com/?hl=en#hl=en&gs_rn=9&gs_ri=psy-ab&qe=c2V4eSBkcm8&qesig=YpYi9EK2Zn-pGuFMDpIzHA&pkc=AFgZ2tkSywKF5Ep0oVdlWAAR809JDTirIvODthLK9O7rdyxJcJVq95dxG3QgdtSMhq3CbNz9cd-jxrWF32L-upgJvVviEeW7Rg&pq=hide%20drop%20down%20menu%20on%20click%20out&cp=8&gs_id=4r&xhr=t&q=sexy+drop+down+menu&es_nrs=true&pf=p&safe=off&sclient=psy-ab&oq=sexy+dro&gs_l=&pbx=1&bav=on.2,or.r_cp.r_qf.&fp=5ed0226ea41938e3&biw=1920&bih=1088)

当您单击箭头触发器时，它会显示下拉菜单，当您将鼠标悬停时它会隐藏它。

我的问题是我无法让它在点击外部时隐藏下拉菜单。我在互联网上搜索过，但不幸的是没有找到任何东西。

我的代码是：

```
jQuery(document).ready(function($){
    $('li:has(ul)').addClass('has-children');

    // Sexy Drop Down Menu
    $('li.has-children').append('<span class="dropdown"></span>'); // Adding a span tag with .dropdown class to <li> with child elements

    $("li.has-children .dropdown").click(function(){ // When trigger is clicked...

        // Following events are applied to the subnav itself (moving subnav up and down)
        $(this).parent().find("ul.sub-menu").slideDown('fast').show(); // Drop down the subnav on click

        $(this).parent().hover(function(){
        }, function(){
            $(this).parent().find("ul.sub-menu").slideUp('slow'); // When the mouse hovers out of the subnav, move it back up
        });
    });
}); 
```

我试图替换`$(this).parent().hover(function(){`，`$(this).parent().click(function(){`但它没有用。

有人可以帮我解决这个问题吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T12:18:32.040

利用 Ben 的回答，如果单击菜单会立即隐藏它，为什么不反转单击和悬停功能：

```
 jQuery(document).ready(function($){
    $('li:has(ul)').addClass('has-children');

    // Sexy Drop Down Menu
    $('li.has-children').append('<span class="dropdown"></span>'); // Adding a span tag with .dropdown class to <li> with child elements

    $("li.has-children .dropdown").hover(function(){ // Change click to hover event...

        // Following events are applied to the subnav itself (moving subnav up and down)
        $(this).parent().find("ul.sub-menu").slideDown('fast').show(); // Drop down the subnav on hover

        $('html').click(function(){
        }, function(){
            $(this).parent().find("ul.sub-menu").slideUp('slow'); // When the mouse clicks out of the subnav, move it back up
        });
    });
}); 
```

这样，将鼠标悬停在箭头上将向下钻取并单击其他任何位置将隐藏它...如果这就是您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:54:31.343

代替

```
$(this).parent().hover(function(){ 
```

和

```
$('html').click(function(){ 
```

当您单击页面上的其他位置时，它应该会关闭（我假设这就是您单击外部的意思）。

我在一些网站上使用它来关闭菜单。很难保证它可以在没有测试的情况下在所有站点上运行，因为我预计会遇到 z-index 问题，但它第一次对我有用。

**更新：**

代替

```
 $(this).parent().hover(function(){
    }, function(){
        $(this).parent().find("ul.sub-menu").slideUp('slow'); // When the mouse hovers out of the subnav, move it back up
    }); 
```

和

```
 $('html').click(function(){
        $(this).parent().find("ul.sub-menu").slideUp('slow'); // When the mouse hovers out of the subnav, move it back up
    }); 
```

# elasticsearch - 布尔查询，其中“应该”之一是 Elasticsearc 中的“不”

> ID：16143325
> 
> 赞同：2
> 
> 时间：2013-04-22T09:11:26.737
> 
> 标签：elasticsearch

我想使用一个布尔查询，其中一个条件（例如，在应该部分中）是对某事的否定。

具体来说：

1) 字段不存在。例如，我尝试了以下查询：

```
{"query":{
            "bool":{
                    "must":[
                            {"match":{"field1":"val1"}},
                            ],
                    "should":[
                                {"match":{"field2":"val2"}},
                                {"filtered" : 
                                            {
                                             "query" : {"match_all" : {}},
                                             "filter" : {"missing" : { "field":"field3"}}
                                             }
                                 },
                                ],
                    "minimum_number_should_match":1
                    }
         }
} 
```

2) 字段没有值。例如：

```
{"query":{
            "bool":{
                    "must":[
                            {"match":{"field1":"val1"}},
                            ],
                    "should":[
                                {"match":{"field2":"val2"}},
                                {"filtered" : 
                                            {
                                             "query" : {"match_all" : {}},
                                             "filter" : {"not" : { "field3":"val3"}}
                                             }
                                 },
                                ],
                    "minimum_number_should_match":1
                    }
         }
} 
```

两者都不起作用。我必须应用过滤器或错误地插入内部查询。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T19:32:41.827

不完全确定这是否完全回答了原始问题，但它是相似的，并通过分别运行两个查询的计数来验证。这会找到一些为 null 或 true 的字段：

```
{
    "filtered" : {
        "filter" : {
            "or" : [
                { "missing" : { "field" : "somefield" } },
                { "term" : {  "somefield" : "true" } }
            ]
        }
    }
} 
```

祝你好运。JSON 查询语言让我想念 SQL！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T14:24:35.780

我只成功地使用了 bool 查询之外的**缺失**过滤器而**不是过滤器。**

例如：

```
"filtered_query":{
  "query":{
    "bool":{ ... }
  },
  {"filter": {
    "missing":{ ... }
  }
} 
```

您不会在该条件下获得任何评分（只是结果“过滤掉”或没有），尽管您没有明确表示您需要评分。

您可能需要查看文档以了解您声明的两个要求的**缺失**过滤器，因为它允许您检查不存在或没有值的字段。我不认为**not**函数正在执行您在第二个示例中的期望。供参考：[http ://www.elasticsearch.org/guide/reference/query-dsl/missing-filter/](http://www.elasticsearch.org/guide/reference/query-dsl/missing-filter/)

```
"missing" : { 
     "field" : "user",
     "existence" : true,
     "null_value" : true
} 
```

确保适当地使用存在和 null_value 属性来指示是要匹配缺失字段（“existence”：true）还是要匹配空/空值（“null_value”：true）

# linux - 即将在终端上打印 KERNEL 消息

> ID：16143327
> 
> 赞同：4
> 
> 时间：2013-04-22T09:11:32.753
> 
> 标签：linux, linux-kernel, device-driver, kernel-module, kernel

根据手册页，它告诉如果消息的日志级别的优先级高于默认设置的日志级别，那么它将被打印在终端上。但是当我使用类似的句子时

```
printk(KERN_ALERT " MESSAGE ") 
```

我在终端上打印消息时遇到问题。因为默认的优先级设置为 4 并且`KERN_ALERT`有 priority`1`更高。

那么，如何在终端上打印消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:56:43.537

它应该将消息打印到*控制台*，而不是*终端*。有时控制台和终端看起来一样，但事实并非如此。编辑*/proc/sys/kernel/printk*以设置最低优先级以在控制台中打印

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T12:00:53.970

我知道这并不能完全回答您的问题，但就像我在评论中所说的那样，将`printk`日志记录到控制台通常不是一个好主意。这是我建议的另一种选择，它应该足以满足您的目的。

由于您想将其用于调试目的，您只需打开一个新终端并执行以下命令：

```
tail -f /var/log/messages 
```

或者

```
tail -f /var/log/dmesg 
```

之类的。`tail -f`将打印文件中的最后一条消息，但会继续等待更新。一旦文件中写入了更多行，`tail -f`就会将它们写入控制台。

无论您是使用此方法还是直接打印到控制台，您可能还对定义一个调用的宏感兴趣，`printk`并且在调试模式下还会放一个小的`msleep`after 以确保日志显示在屏幕上，以防崩溃。这样做是这样的：

```
set_current_state(TASK_INTERRUPTIBLE);
msleep(/* amount in milliseconds */); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-13T08:44:02.693

我最初在主机系统上开发骨架驱动程序时遇到了同样的问题。每次我不得不检查“dmesg”命令。

我必须编辑 /proc/sys/kernel/printk 。

要使用窗口管理器在终端上获取消息，例如广告 KED 和 Gnome，请运行“tail -f /var/log/kern.log &”以在终端上获取消息。

它在 Ubuntu 系统中帮助了我。希望它会有所帮助:)

# cocoa-touch - 使用 Hpple 解析 HTML

> ID：16143328
> 
> 赞同：0
> 
> 时间：2013-04-22T09:11:40.797
> 
> 标签：cocoa-touch, xpath, html-parsing, hpple

我正在使用 Hpple 传递 HTML 文件。HTML 文件与以下内容非常相似。

```
 <div class="entry">
        <p>some text here
        <a>Inside a</a>
         another text here
        </p>
       <div class="caption">
        caption here
       </div>
        <p>Blah
        </p>
    </div> 
```

我想看到的结果是“这里有一些文本，这里有另一个文本 Blah”（忽略所有内容是标题 div 并包括内部和之后的内容）

以下是我尝试过的一些查询：

1.  `"//div[@class='entry']/p"` 结果：`"some text here"`
2.  `"//div[@class='entry']//p"` 结果：`"some text here caption here Blah"`
3.  `"//div[@class='entry']/p//text()"` 结果：`Nothing`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T12:54:30.463

尝试这个：

```
//div[@class='entry']//p//text() - should return "Some text here another text here Blah" 
//div[@class='entry']//text() - should return "Some text here another text here caption here Blah" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:56:40.327

您可能自己已经回答了这个问题，但我也遇到了类似的问题。获取我使用的文本

//div[@class='entry']//a[@inside]//*

这让我得到了你所说的里面的文本。让我知道这个是否奏效。我自己还在学习解析 HTML。祝你好运。

# excel - 使用 Excel VBA 生成二维（PDF417 或 QR）条码

> ID：16143331
> 
> 赞同：13
> 
> 时间：2013-04-22T09:12:01.997
> 
> 标签：excel, vba, fonts, barcode

我想使用宏在 Excel 单元格中生成二维条码（PDF417 或 QR 码）。只是想知道是否有任何免费的替代付费图书馆可以做到这一点？

我知道[某些工具](http://www.idautomation.com/barcode-fonts/universal/2d-fonts.html)可以完成这项工作，但对我们来说相对昂贵。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-27T21:44:51.090

VBA 模块[barcode-vba-macro-only](https://github.com/JonasHeidelberg/barcode-vba-macro-only)（Sébastien Ferry 在评论中提到）是 Jiri Gabriel 在 2013 年在 MIT 许可下创建的纯 VBA 1D/2D 代码生成器。

该代码并不完全易于理解，但在上面链接的版本中，许多评论已从捷克语翻译成英语。

要在工作表中使用它，只需将[barcody.bas](https://github.com/JonasHeidelberg/barcode-vba-macro-only/blob/master/barcody.bas)复制或导入到模块中的 VBA 中。在工作表中，输入如下函数：

```
=EncodeBarcode(CELL("SHEET"),CELL("ADDRESS"),A2,51,1,0,2) 
```

用法如下：

1.  保留`CELL("SHEET)`和`CELL("ADDRESS")`原样，因为它只是参考工作表和单元格地址，您有公式
    *   A2 是您要对字符串进行编码的单元格。在我的情况下，它是单元格 A2 你可以传递带有引号的“文本”来做同样的事情。拥有细胞使其更具活力
    *   51 是 QR 码的选项。其他选项为 1=EAN8/13/UPCA/UPCE、2=五个交错的两个、3=Code39、50=Data Matrix、51=QRCode
        *   1 用于图形模式。条形码绘制在 Shape 对象上。0 表示字体模式。我假设您需要安装字体类型。没那么有用。
        *   0 是特定条形码类型的参数。对于 QR_Code，0=低纠错，1=中纠错，2=四分位纠错，3=高纠错。
        *   2 仅适用于一维代码。是缓冲区。我不确定它到底做了什么，但可能与一维条形空间有关？

我添加了包装函数以使其成为纯 VBA 函数调用，而不是将其用作工作表中的公式：

```
Public Sub RenderQRCode(workSheetName As String, cellLocation As String, textValue As String)
   Dim s_param As String
   Dim s_encoded As String
   Dim xSheet As Worksheet
   Dim QRShapeName As String
   Dim QRLabelName As String

   s_param = "mode=Q"
   s_encoded = qr_gen(textValue, s_param)
   Call DrawQRCode(s_encoded, workSheetName, cellLocation)

   Set xSheet = Worksheets(workSheetName)
   QRShapeName = "BC" & "$" & Left(cellLocation, 1) _
       & "$" & Right(cellLocation, Len(cellLocation) - 1) & "#GR"

   QRLabelName = QRShapeName & "_Label"

   With xSheet.Shapes(QRShapeName)
       .Width = 30
       .Height = 30
   End With

   On Error Resume Next
   If Not (xSheet.Shapes(QRLabelName) Is Nothing) Then
       xSheet.Shapes(QRLabelName).Delete
   End If

   xSheet.Shapes.AddTextbox(msoTextOrientationHorizontal, _
       xSheet.Shapes(QRShapeName).Left+35, _
       xSheet.Shapes(QRShapeName).Top, _                          
       Len(textValue) * 6, 30) _
       .Name = QRLabelName

   With xSheet.Shapes(QRLabelName)
       .Line.Visible = msoFalse
       .TextFrame2.TextRange.Font.Name = "Arial"
       .TextFrame2.TextRange.Font.Size = 9
       .TextFrame.Characters.Text = textValue
       .TextFrame2.VerticalAnchor = msoAnchorMiddle
   End With
End Sub

Sub DrawQRCode(xBC As String, workSheetName As String, rangeName As String, Optional xNam As String)
 Dim xShape As Shape, xBkgr As Shape
 Dim xSheet As Worksheet
 Dim xRange As Range, xCell As Range
 Dim xAddr As String
 Dim xPosOldX As Double, xPosOldY As Double
 Dim xSizeOldW As Double, xSizeOldH As Double
 Dim x, y, m, dm, a As Double
 Dim b%, n%, w%, p$, s$, h%, g%

Set xSheet = Worksheets(workSheetName)
Set xRange = Worksheets(workSheetName).Range(rangeName)
xAddr = xRange.Address
xPosOldX = xRange.Left
xPosOldY = xRange.Top

 xSizeOldW = 0
 xSizeOldH = 0
 s = "BC" & xAddr & "#GR"
 x = 0#
 y = 0#
 m = 2.5
 dm = m * 2#
 a = 0#
 p = Trim(xBC)
 b = Len(p)
 For n = 1 To b
   w = AscL(Mid(p, n, 1)) Mod 256
   If (w >= 97 And w <= 112) Then
     a = a + dm
   ElseIf w = 10 Or n = b Then
     If x < a Then x = a
     y = y + dm
     a = 0#
   End If
 Next n
 If x <= 0# Then Exit Sub
 On Error Resume Next
 Set xShape = xSheet.Shapes(s)
 On Error GoTo 0
 If Not (xShape Is Nothing) Then
   xPosOldX = xShape.Left
   xPosOldY = xShape.Top
   xSizeOldW = xShape.Width
   xSizeOldH = xShape.Height
   xShape.Delete
 End If
 On Error Resume Next
 xSheet.Shapes("BC" & xAddr & "#BK").Delete
 On Error GoTo 0
 Set xBkgr = xSheet.Shapes.AddShape(msoShapeRectangle, 0, 0, x, y)
 xBkgr.Line.Visible = msoFalse
 xBkgr.Line.Weight = 0#
 xBkgr.Line.ForeColor.RGB = RGB(255, 255, 255)
 xBkgr.Fill.Solid
 xBkgr.Fill.ForeColor.RGB = RGB(255, 255, 255)
 xBkgr.Name = "BC" & xAddr & "#BK"
 Set xShape = Nothing
 x = 0#
 y = 0#
 g = 0
 For n = 1 To b
   w = AscL(Mid(p, n, 1)) Mod 256
   If w = 10 Then
     y = y + dm
     x = 0#
   ElseIf (w >= 97 And w <= 112) Then
     w = w - 97
     With xSheet.Shapes
     Select Case w
       Case 1: Set xShape = .AddShape(msoShapeRectangle, x, y, m, m): GoSub fmtxshape
       Case 2: Set xShape = .AddShape(msoShapeRectangle, x + m, y, m, m): GoSub fmtxshape
       Case 3: Set xShape = .AddShape(msoShapeRectangle, x, y, dm, m): GoSub fmtxshape
       Case 4: Set xShape = .AddShape(msoShapeRectangle, x, y + m, m, m): GoSub fmtxshape
       Case 5: Set xShape = .AddShape(msoShapeRectangle, x, y, m, dm): GoSub fmtxshape
       Case 6: Set xShape = .AddShape(msoShapeRectangle, x + m, y, m, m): GoSub fmtxshape
               Set xShape = .AddShape(msoShapeRectangle, x, y + m, m, m): GoSub fmtxshape
       Case 7: Set xShape = .AddShape(msoShapeRectangle, x, y, dm, m): GoSub fmtxshape
               Set xShape = .AddShape(msoShapeRectangle, x, y + m, m, m): GoSub fmtxshape
       Case 8: Set xShape = .AddShape(msoShapeRectangle, x + m, y + m, m, m): GoSub fmtxshape
       Case 9: Set xShape = .AddShape(msoShapeRectangle, x, y, m, m): GoSub fmtxshape
               Set xShape = .AddShape(msoShapeRectangle, x + m, y + m, m, m): GoSub fmtxshape
       Case 10: Set xShape = .AddShape(msoShapeRectangle, x + m, y, m, dm): GoSub fmtxshape
       Case 11: Set xShape = .AddShape(msoShapeRectangle, x, y, dm, m): GoSub fmtxshape
                Set xShape = .AddShape(msoShapeRectangle, x + m, y + m, m, m): GoSub fmtxshape
       Case 12: Set xShape = .AddShape(msoShapeRectangle, x, y + m, dm, m): GoSub fmtxshape
       Case 13: Set xShape = .AddShape(msoShapeRectangle, x, y, m, m): GoSub fmtxshape
                Set xShape = .AddShape(msoShapeRectangle, x, y + m, dm, m): GoSub fmtxshape
       Case 14: Set xShape = .AddShape(msoShapeRectangle, x + m, y, m, m): GoSub fmtxshape
                Set xShape = .AddShape(msoShapeRectangle, x, y + m, dm, m): GoSub fmtxshape
       Case 15: Set xShape = .AddShape(msoShapeRectangle, x, y, dm, dm): GoSub fmtxshape
     End Select
     End With
     x = x + dm
   End If
 Next n
 On Error Resume Next
 Set xShape = xSheet.Shapes(s)
 On Error GoTo 0
 If Not (xShape Is Nothing) Then
   xShape.Left = xPosOldX
   xShape.Top = xPosOldY
   If xSizeOldW > 0 Then
     xShape.Width = xSizeOldW
     xShape.Height = xSizeOldH
   End If
 Else
   If Not (xBkgr Is Nothing) Then xBkgr.Delete
 End If
 Exit Sub
fmtxshape:
  xShape.Line.Visible = msoFalse
  xShape.Line.Weight = 0#
  xShape.Fill.Solid
  xShape.Fill.ForeColor.RGB = RGB(0, 0, 0)
  g = g + 1
  xShape.Name = "BC" & xAddr & "#BR" & g
  If g = 1 Then
    xSheet.Shapes.Range(Array(xBkgr.Name, xShape.Name)).Group.Name = s
  Else
    xSheet.Shapes.Range(Array(s, xShape.Name)).Group.Name = s
  End If
  Return

End Sub 
```

使用这个包装器，您现在可以通过在 VBA 中调用它来简单地调用以呈现 QRCode：

```
Call RenderQRCode("Sheet1", "A13", "QR Value") 
```

只需输入工作表名称、单元格位置和 QR_value。QR 形状将在您指定的位置绘制。

您可以使用这部分代码来更改 QR 的大小

```
With xSheet.Shapes(QRShapeName)
       .Width = 30  'change your size
       .Height = 30  'change your size
   End With 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-02-24T15:53:30.400

我知道这是一个相当古老且成熟的帖子（尽管尚未接受非常好的现有答案），但我想分享一个替代方案，我使用免费的[在线 API](http://goqr.me/api/)[为葡萄牙语的 StackOverflow 中的类似帖子做准备](https://pt.stackoverflow.com/q/186452/73)[来自二维码生成器](http://goqr.me/api/)。

代码如下：

```
Sub GenQRCode(ByVal data As String, ByVal color As String, ByVal bgcolor As String, ByVal size As Integer)
On Error Resume Next

    For i = 1 To ActiveSheet.Pictures.Count
        If ActiveSheet.Pictures(i).Name = "QRCode" Then
            ActiveSheet.Pictures(i).Delete
            Exit For
        End If
    Next i

    sURL = "https://api.qrserver.com/v1/create-qr-code/?" + "size=" + Trim(Str(size)) + "x" + Trim(Str(size)) + "&color=" + color + "&bgcolor=" + bgcolor + "&data=" + data
    Debug.Print sURL

    Set pic = ActiveSheet.Pictures.Insert(sURL + sParameters)
    Set cell = Range("D9")

    With pic
        .Name = "QRCode"
        .Left = cell.Left
        .Top = cell.Top
    End With

End Sub 
```

它通过简单地（重新）从根据单元格中的参数构建的 URL 创建图像来完成工作。自然，用户必须连接到互联网。

例如（可以[从 4Shared](https://www.4shared.com/file/FUvqEInPba/QRCode_Simples.html)下载包含巴西葡萄牙语内容的工作表）：

[![在此处输入图像描述](https://i.stack.imgur.com/qPCkG.png)](https://www.4shared.com/file/FUvqEInPba/QRCode_Simples.html)

# c# - 位图文件完整性/有效性检查以确认保存进度完成

> ID：16143332
> 
> 赞同：1
> 
> 时间：2013-04-22T09:12:04.813
> 
> 标签：c#, wpf, image, bitmap, managed

嘿嘿，我正在尝试确定位图文件的保存进度是否已完成，不能为其使用锁定状态或 UNC 日志。这就是为什么：

运行 FileSystemWatcher 我检测文件的创建和更改（还有文件夹..但它们不是问题）。现在，如果我只是期待复制/移动操作，这整个事情都不会成为问题。当 DCC 应用程序发挥作用时，问题就出现了（让我们以 PhotoShop 为例）。

当您在 PS 中打开文件时，它会锁定它（到目前为止还不错），当您保存文件时，它会保存到临时文件中，然后执行一些“魔术”并获得“新”文件（取决于 PS.version 和文件输出）格式化它直接写入文件而不使用临时文件）.. 即使使用临时文件，它也会对文件保持恒定锁定，并且只有在应用程序中关闭文件时才会将 Close 添加到 unc 日志中，而不是在保存之后完成的..

所以你可以在这里看到我的问题。为了在文件被更改（或创建）后进一步处理文件，我需要知道它是否实际上是一个有效的、完整的位图文件。我已经在这方面搜索和阅读了 4 天，并想看看是否有人愿意帮助我。

这是 Watcher 类的简化版本，只有创建和更改处理程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace spacename
{
  public class WatchDog2
  {
    private string RootPath;

    private FileSystemWatcher Watcher;

    // something running in the background chipping away at the cue
    private System.Timers.Timer Clock = new System.Timers.Timer(5000) { AutoReset = true };

    private List<FileSystemEventArgs> FileCheckList = new List<FileSystemEventArgs>();

    private bool CheckLock = false;

    #region Events

    public delegate void OnChangeHandler(object sender, FileSystemEventArgs e);
    public delegate void OnRenameHandler(object sender, RenamedEventArgs e);

    public event OnChangeHandler OnFileCreate;
    public event OnChangeHandler OnFolderCreate;

    public event OnChangeHandler OnFileChange;

    #endregion

    /// <summary>
    /// ctor
    /// </summary>
    public WatchDog2(string rootPath, string filter = "*.*")
    {
      RootPath = rootPath;

      var di = new DirectoryInfo(rootPath);

      if (di.Exists)
      {
        Watcher = new FileSystemWatcher(di.FullName, filter);

        Watcher.NotifyFilter = NotifyFilters.CreationTime | NotifyFilters.LastWrite |
                                NotifyFilters.FileName | NotifyFilters.DirectoryName;

        Watcher.IncludeSubdirectories = true;

        Watcher.InternalBufferSize = 65536; //64kb (max)
      }
      else
      {
        Watcher = new FileSystemWatcher();
      }

      Watcher.Created += Watcher_Created;
      Watcher.Changed += Watcher_Changed;

      Clock.Elapsed += Clock_Elapsed;
    }

    /// <summary>
    /// Create Handler
    /// </summary>
    void Watcher_Created(object sender, FileSystemEventArgs e)
    {
      if (Path.HasExtension(e.FullPath))
      {
        if (App.SupportedExtensions.Contains(Path.GetExtension(e.FullPath).ToLower()))
        {
          if (new FileInfo(e.FullPath).Exists)
          {
            FileCheckList.Add(e);

            Clock.Start();
          }
        }
      }
      else
      {
        if (OnFolderCreate != null)
          OnFolderCreate(sender, e);
      }
    }

    /// <summary>
    /// Change Handler
    /// </summary>
    void Watcher_Changed(object sender, FileSystemEventArgs e)
    {
      if (Path.HasExtension(e.FullPath))
      {
        if (App.SupportedExtensions.Contains(Path.GetExtension(e.FullPath).ToLower()))
        {
          if (new FileInfo(e.FullPath).Exists)
          {
            FileCheckList.Add(e);

            Clock.Start();
          }
        }
      } // no folder change catching
    }

    /// <summary>
    /// Queue check
    /// </summary>
    void Clock_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
      if (!CheckLock)
      {
        CheckLock = true;

        for (int i = 0; i < FileCheckList.Count; i++)
        {
          var fi = new FileInfo(FileCheckList[i].FullPath);

          if (fi.Exists)
          {
            if (fi.Length > 0) //add propper checks for bitmap validity
            {
              switch (FileCheckList[i].ChangeType)
              {
                case WatcherChangeTypes.Created:
                  if (OnFileCreate != null)
                    OnFileCreate(null, FileCheckList[i]);
                  break;

                case WatcherChangeTypes.Changed:
                  if (OnFileChange != null)
                    OnFileChange(null, FileCheckList[i]);
                  break;
              }
            }
          }
          else // if save was aborted
          {
            FileCheckList.RemoveAt(i);
          }
        }
        CheckLock = false;
      }
    }
  }
} 
```

差点忘了..我是在 WPF 应用程序的上下文中执行此操作的。

谢谢你花时间:)

# mysql - Mysql函数删除少于3个字符的单词

> ID：16143337
> 
> 赞同：0
> 
> 时间：2013-04-22T09:12:24.257
> 
> 标签：mysql, string, function

我有个问题。

在我的数据库中，我有某些存储过程可以对我拥有的关键字进行搜索。在我的 GUI（在 asp.net 中）我有一个函数可以解决我的问题，但我需要在 Mysql 中使用相同的函数。

我需要从任何少于 3 个字符的单词中删除一个字符串，并且只保留包含更多字符的单词。例如，“hotels in amsterdam”将返回“hotels amsterdam”。

编辑：这些字段在innodb全文上，因此我需要实际删除所有小于3的单词，因为我的存储过程需要所有“”并将其替换为“+”。FULLTEXT 搜索处于布尔模式。我根本不需要在任何行上执行此操作。我只需要一个从少于 3 个字符的单词中删除字符串的函数。该函数将在存储过程中使用，然后该存储过程将在修改后的字符串值上搜索行

我的 sql 编程技能不如 .Net 中的那么好，我一直在寻找 2 天来寻找一个可以为我做到这一点但没有运气的函数。

对不起，但到目前为止我什至没有任何代码来开始工作，还有其他人知道如何继续或解决这个问题吗？由于存储函数中不允许使用动态 sql 或触发器我完全卡住了！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:58:21.790

假设只有空格分隔单词，您可以使用以下内容：-

```
SELECT SomeId, GROUP_CONCAT(SomeWord ORDER BY aNum SEPARATOR " ")
FROM (SELECT SomeId, SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(" ", SomeText, " "), " ", aNum), " ", -1) AS SomeWord, aNum, item_title_default
FROM SomeTable
CROSS JOIN (SELECT 1 + a.I + b.i * 10 + c.i * 100 AS aNum FROM integers a, integers b, integers c) SubInt
WHERE aNum <= (LENGTH(SomeText) - LENGTH(REPLACE(SomeText, " ", "")) + 2)
AND LENGTH(SUBSTRING_INDEX(SUBSTRING_INDEX(CONCAT(" ", SomeText, " "), " ", aNum), " ", -1)) > 3
ORDER BY SomeId, aNum) Sub1
GROUP BY SomeId 
```

这依赖于一个整数表，其中有一列称为 i，行的值为 0 到 9。它最多可处理 1000 个单词，但很容易扩展。

编辑 - 好的，这是一个 MySQL 存储过程，用于拆分字符串并删除长度为 3 个或更少字符的任何单词。同样只在空格上分裂。

```
DELIMITER //

CREATE FUNCTION `func_Remove_ShortStrings`(InStr LONGTEXT) RETURNS LONGTEXT
    DETERMINISTIC
BEGIN

    DECLARE RetStr LONGTEXT DEFAULT "";
    DECLARE TempStr LONGTEXT DEFAULT "";
    DECLARE aWord LONGTEXT DEFAULT "";
    DECLARE WordLength INT DEFAULT 0;
    SET TempStr = TRIM(InStr);
    WHILE (LENGTH(TempStr) > 0) DO
        SET aWord = SUBSTRING_INDEX(TempStr, " ", 1);
        SET WordLength = LENGTH(aWord);
        IF (WordLength > 3) THEN
            SET RetStr = CONCAT(RetStr, " ", aWord);
        END IF;
        SET TempStr = TRIM(SUBSTRING(TempStr, WordLength + 1));
    END WHILE;

    return TRIM(RetStr);
END 
```

# css - 悬停不适用于子跨度

> ID：16143338
> 
> 赞同：0
> 
> 时间：2013-04-22T09:12:26.000
> 
> 标签：css, hover, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:19:12.433

对于各种跨度上的每种样式，将`display`属性设置为`inline-block`并删除该`float`属性。这将允许`a`标签扩展到其内容的高度。

```
#mainPanel #inbox a #fromSubject {
    display: inline-block;
    /* Rest of Styles */
}

#mainPanel #inbox a #date {
   display:inline-block;
   /* Rest of Styles */
}

#mainPanel #inbox a {
  display:inline-block;
  /* Rest of Styles */
} 
```

**工作示例** [http://jsfiddle.net/Ns6ag/](http://jsfiddle.net/Ns6ag/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:18:20.517

您应该对元素应用“clearfix” `a`，因为它的所有内容都是浮动的，导致`a`高度为 0。

如果您不知道 clearfix 是什么，请查看[我可以使用哪些“clearfix”方法？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:45:13.703

上面的代码在 FireFox 和 Crome 中工作，但在 IE 中不工作，请把下面的标签放在页面顶部

```
<!doctype html> 
```

# c# - 如何转换 web.config 值？

> ID：16143344
> 
> 赞同：14
> 
> 时间：2013-04-22T09:12:37.130
> 
> 标签：c#, .net, web-config, app-config

我正在尝试为不同的情况（调试、发布等）制作不同的配置文件，并且我想为不同的构建更改一些设置。

```
<configuration>
<applicationSettings>
<Program1.Properties.Settings>
  <setting name="CustomerId" serializeAs="String">
    <value>Custormer1-13256</value>
  </setting>
</Program1.Properties.Settings>
</applicationSettings>
</configuration> 
```

如何将标签内的值更改为其他值？

```
 ex. <value>Customer2-343242</value> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-10T14:25:32.790

添加`xdt:Locator="Match(name)"`到[欧文的答案](https://stackoverflow.com/a/16144008/542251)

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
<applicationSettings>
    <Program1.Properties.Settings>
        <setting name="CustomerId" serializeAs="String" xdt:Transform="Replace" 
                                                             xdt:Locator="Match(name)">
            <value>Customer2-343242</value>
        </setting>
    </Program1.Properties.Settings>
</applicationSettings> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-15T04:49:15.817

将您的配置更改为如下所示：

```
<configuration>
  <applicationSettings>
    <Program1.Properties.Settings>
      <setting name="CustomerId" serializeAs="String">
        <value>Custormer1-13256</value>
      </setting>
    </Program1.Properties.Settings>

  </applicationSettings>
</configuration> 
```

并进行如下转换：

```
<configuration>
  <applicationSettings>
    <Program1.Properties.Settings xdt:Transform="Replace">
      <setting name="CustomerId" serializeAs="String">
        <value>Custormer1-13256</value>
      </setting>
    </Program1.Properties.Settings>
  </applicationSettings>
</configuration> 
```

因此，您并没有真正“更改”值内部文本，而是让它为您创建的每个构建配置选择正确的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-22T14:29:53.367

这有效：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <applicationSettings>
        <Program1.Properties.Settings>
            <setting name="CustomerId" serializeAs="String" xdt:Locator="Match(name)" >
                <value xdt:Transform="Replace">Customer2-343242</value>
            </setting>
        </Program1.Properties.Settings>
    </applicationSettings>
</configuration> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:46:15.830

使用[Web 配置转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)：

```
<setting name="CustomerId" serializeAs="String" xdt:Transform="Replace">
  <value>Customer2-343242</value>
</setting> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T12:35:12.720

您需要将转换放在 Web.Config XML 的完整路径中

```
<applicationSettings>
  <Program1.Properties.Settings>
    <setting name="CustomerId">
      <value xdt:Transform="Replace">Customer2-343242</value>
    </setting>
  </Program1.Properties.Settings>
</applicationSettings> 
```

然后使用 Preview Transform 菜单选项对其进行测试

# asp.net-mvc - ASP.NET MVC 中的页面检查器不起作用

> ID：16143345
> 
> 赞同：3
> 
> 时间：2013-04-22T09:12:42.147
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试在页面检查器模式下打开剃刀视图模板，但未显示这些模板。我得到的是错误`The resource cannot be found.`

我打开查看页面的路径是`View/Admin/Login.cshtml`

之前我使用了具有名称的控制器，`AdminController`但现在我使用了具有不同名称的控制器。我所做的是将它们`AdminController`分成多个控制器以简化操作。我有一个名为`LoginController`.

当我运行项目时，所有视图都工作正常，但不是在页面检查器模式下。

如何解决此页面检查器问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T03:57:56.217

检查您的代码的以下位置：

```
webconfig
    <appSettings> 
      <add key="loginUrl" value="[ControllerName]/[LoginActionName]" /> ... 
```

如果它仍然呈现错误，那么也将以下内容添加到 web config 中的 system.web（如果您使用 Form Authenticate）：

```
<authentication mode="Forms">
      <forms loginUrl="[ControllerName]/[LoginActionName]" timeout="2880" />
    </authentication> 
```

# assembly - 调用函数后内核三重故障

> ID：16143349
> 
> 赞同：1
> 
> 时间：2013-04-22T09:13:02.307
> 
> 标签：assembly, crash, kernel, nasm

我在内核中运行了两个函数，函数 A 和函数 B。函数 A 清除屏幕并将控制权传递给函数 B（它目前什么都不做）。当控制权返回给功能 A 时，会发生三重故障。（这是 x86 Intel 语法）

* * *

## 功能A

```
function_a:
pop edx
push ebp
mov ebp, esp
sub esp, 8
push dword 0
pop eax
mov [ebp-4], eax
jmp .il_15
.il_7:
push dword 753664
mov eax, [ebp-4]
push eax
pop eax
pop ebx
add eax, ebx
push eax
push dword 0
pop eax
pop ebx
mov [ebx],al
mov eax, [ebp-4]
push eax
push dword 1
pop eax
pop ebx
add eax, ebx
push eax
pop eax
mov [ebp-4], eax
.il_15:
mov eax, [ebp-4]
push eax
push dword 4000
pop eax
pop ebx
cmp ebx, eax
jl .il_7
push dword 4
call function_b
jmp .methodend
.methodend:
add esp, 8
pop ebp
push edx
ret 
```

* * *

## 功能 B

```
function_b:
pop edx
push ebp
mov ebp, esp
sub esp, 4
jmp .methodend ;This is just an empty function
.methodend:
add esp, 4
pop ebp
push edx
ret 
```

* * *

我很确定我已经为每个函数正确设置了堆栈（弹出返回值、推送 ebp 等），所以我不确定是什么导致了崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:20:57.103

在调用之前，没有任何内容`function_b`或`function_a`似乎可以清理压入堆栈的单词`function_b`：

```
push dword 4
call function_b 
```

此外，`function_b`用于`edx`存储来自`function_a`.

我不确定为什么这些函数具有将返回地址弹出的模式，`edx`以便可以在返回之前将其推回 - 为什么不将返回地址完全留在堆栈上？如果您不想这样做，那么您需要`edx`在调用之前保存`function_b`（可能通过将其压入堆栈）并在之后恢复它。

# php - 为什么结果集不能放入 php 中的会话

> ID：16143351
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:06.243
> 
> 标签：php, session

我编写如下脚本，

```
session_start();
$employees = null;

if (isset($_SESSION['employees'])) {
    $employees= $_SESSION['employees'];

} else {

$con = new mysqli("localhost", "root", "test", "emp_db");
$employees = $con->query("SELECT * from employee");
$_SESSION['employees'] = $employees;
}

echo "<table>";

foreach ($employees as $row) {
   echo '<tr>';
   echo "<td>" . $row['emp_id'] . " </td>";
   echo "<td>" . $row['emp_name'] . " </td>";
   echo "<td>" . $row['emp_address'] . "</td>";
   echo "</tr>";
} 
```

第一页访问顺利，即从db访问。但是当我尝试在第二页请求中从 $_SESSION 中获取时，它说...

```
"Warning: main(): Couldn't fetch mysqli_result in C:\xampp\htdocs\test\dbtemp.php on line 22". My line 22 is: foreach( $employees as $row) { 
```

任何想法？

如果php返回的resultset是已连接的资源（如Java），为什么我们在关闭与DB的连接后仍然可以对其进行迭代？

当我打电话时`get_resource_type($employees)`......它说，它是一个对象，而不是一个资源。那么为什么一个对象没有被存储在会话中呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:17:13.977

引用自 SO question[在会话变量中存储数据库连接](https://stackoverflow.com/questions/6078843/storing-database-connection-in-a-session-variable/6078862#6078862)

您不能在会话中存储数据库连接或结果集，因为它们是资源，并且：

> 某些类型的数据无法序列化，因此存储在会话中。它包括资源变量或具有循环引用的对象（即，将对自身的引用传递给另一个对象的对象）。
> 
> [http://php.net/manual/en/intro.session.php](http://php.net/manual/en/intro.session.php)

您可以将结果集提取到普通数组中，然后像任何其他变量一样将其存储在会话中。无论如何，这将是一个相当典型的会话用例。请注意不要在会话中存储太多数据，因为这比从数据库中获取数据更费力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:15:32.740

尝试替换：

```
$_SESSION['employees'] = $employees; 
```

和：

```
$_SESSION['employees'] = $employees->fetch_all(); 
```

脚本不共享结果集，调用时间不同。换句话说，您无法在数据库连接关闭后正确保存活动`mysqli_result`并`$_SESSION`使用它。但是，您可以保存`array`. [`mysqli_result::fetch_all()`](http://www.php.net/manual/ru/mysqli-result.fetch-all.php)是你需要的。

不过，我认为这不是一个好方法。我建议你监督你的剧本。

# mysql - MySql如何从一张表中选择所有问题及其答案

> ID：16143354
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:18.340
> 
> 标签：mysql

我的表结构是：（我想 q 代表问题，a 代表答案仅描述它是什么，id 和 parent_id 都是 INT 类型，id 是 auto_increment）

```
id title parent_id 
q1 ****  0( 0 means it was a question)
a2 ****  q1
a3 ****  q1
q4 ****  0
q5 ****  0
a6 ****  q4
a7 ****  q1
... 
```

在管理页面上，我希望他们在问题中列出，然后是其答案。就像：

```
Qustion1:****
Answer2: ****
Answer3: ****
Answer7: ****

Question4:****
Answer6: ****

Question5:****
Answer:none 
```

任何建议将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:30:06.383

可能是最简单的答案：

```
SELECT * from qa
ORDER BY case parent_id when 0 then id else parent_id end, id 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/4b964/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:16:40.320

```
SELECT 
    * 
FROM 
    (
        (SELECT 
            *
         FROM qa AS q
         WHERE q.parent_id = 0
         ORDER BY q.id 
         )
UNION ALL 
        (SELECT 
            *
         FROM qa AS q
         WHERE q.parent_id <> 0
         ORDER BY a.id)
) AS r
ORDER BY id , parent_id 
```

## [在此处查看 SQL Fiddle 演示](http://sqlfiddle.com/#!2/4b964/3)

输出

```
| ID | TITLE | PARENT_ID |
--------------------------
|  1 |    Q1 |         0 |
|  2 |    A1 |         1 |
|  3 |    A2 |         1 |
|  4 |    A3 |         1 |
|  5 |    A4 |         1 |
|  6 |    Q2 |         0 |
|  7 |    A1 |         6 |
|  8 |    A2 |         6 |
|  9 |    A3 |         6 |
| 10 |    A4 |         6 |
| 11 |    Q3 |         0 |
| 12 |    A1 |        11 |
| 13 |    A2 |        11 |
| 14 |    A3 |        11 |
| 15 |    A4 |        11 | 
```

编辑：

您也可以使用带有 IF 条件的 Mark Ba​​nnister 答案

```
SELECT 
    * 
from qa
ORDER BY IF(parent_id = 0 ,id ,parent_id ) , id 
```

# javascript - 在 RequireJS 中注册许多对象

> ID：16143358
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:21.850
> 
> 标签：javascript, requirejs

我有一个在浏览器和服务器中应该具有相同结构和行为的模型。为了能够重用代码，我选择了 NodeJS。我认为这不是那么简单的任务，但是感谢[这篇文章](http://sebastianpatten.wordpress.com/2011/12/13/node-sharing-javascript-code-between-client-and-server/)，我现在可以编写通用代码。

尝试序列化我的模型时遇到了问题。每类对象都应该有自己的 ID（如`a.b.C`），所以当对象被序列化时，这个 ID 被添加到 JSON 中，然后用于创建空对象以将其反序列化。

这意味着当我们获取JSON时，我们需要获取ID，然后通过它找到模块，然后创建空对象并填充它。因此，我们需要有模块 ID 和模块的映射。将其命名为“注册”。

寄存器需要初始化。为此，我们需要在序列化开始之前加载所有依赖项。如果我们以常规的 RequireJS 方式执行此操作，它将如下所示：

```
define([
    "odm/model/core/serializing/Person",
    "odm/model/core/serializing/Man"
],
    function (require, Person, Man) {
        var register = {
            _name_cls:{},
            _cls_name:{}
        };
        register.register = function (names) {
            for (var i = 0; i < names.length; i++) {
                var name = names[i];
                var cls = require(name);
                register._name_cls[name] = cls;
                register._cls_name[cls] = name;
            }
        };
        register.byName = function (name) {
            return register._name_cls[name];
        };
        register.byCls = function (name) {
            return register._cls_name[name];
        };

        register.register([
            "odm/model/core/serializing/Person",
            "odm/model/core/serializing/Man"
        ]);

        return register;
    }); 
```

如您所见，要注册新对象，我们需要在 register 的 3 个位置手动添加它 - 链接到模块，模块作为函数参数中的参数，模块作为 register(names) 函数的参数。

有没有更简单的方法来注册对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:20:08.963

我会将注册模块与其他要注册的模块分开：

### 注册.js：

```
define(function (require) {
    var register = {
        _name_cls:{},
        _cls_name:{}
    };
    register.register = function (names) {
        for (var i = 0; i < names.length; i++) {
            var name = names[i];
            var cls = require(name);
            register._name_cls[name] = cls;
            register._cls_name[cls] = name;
        }
    };
    register.byName = function (name) {
        return register._name_cls[name];
    };
    register.byCls = function (name) {
        return register._cls_name[name];
    };

    return register;
}); 
```

### 注册-all.js

用于`Array.prototype.slice`获取模块参数。

```
define(["register", "odm/model/core/serializing/Person", "odm/model/core/serializing/Man"], function (register) {
    var modules = Array.prototype.slice.call(arguments, 1);
    register.register(modules);
}); 
```

# java - servlet 中的 ResultSet 不包含任何值

> ID：16143359
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:25.857
> 
> 标签：java, servlets, resultset

这是我的servlet代码...

```
 try {
        HttpSession session=request.getSession(true);
        String FN= (String)session.getAttribute("FN");
        String h1= request.getParameter("h1"); //contains the password value

        if(h1=="" || h1== null)
        {
            response.sendRedirect("PERROR.html");   // if no value in passwrd field

        }

  else{

        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        Connection con = DriverManager.getConnection("jdbc:odbc:dsn2");
        Statement st=con.createStatement();

        String UNM= (String)session.getAttribute("uname");
        String query= "select * from img_pwd where uname='"+UNM+"' and pwd='"+h1+"')";
                  // validating from the table img_pwd

        ResultSet r= st.executeQuery(query);

        if(r.next())
        {

            con.close();

            response.sendRedirect("ACCOUNT.jsp");  //success, go to dashboard

        }
        else
        {

            response.sendRedirect("PERROR.html"); // if the password-mismatches

        }

 }

    } finally { 
        out.close();
    } 
```

并且表格“img_pwd”如下所示——

```
1\. uname(nvarchar[50])
2\. pwd(nvarchar[20]) 
```

所以我尝试调试，发现程序执行到了查询存储在字符串中的位置，但查询没有执行，程序的进度在存储查询字符串后停止....

我无法找出错误，需要帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:37:36.577

好吧，这看起来很有趣......但我现在意识到我浪费了我的 5 个小时只是因为一个右括号...... **）**

```
"select * from img_pwd where uname='"+UNM+"' and pwd='"+h1+"')" 
```

你能弄清楚**“）”** ..??? 是的，那是错误。删除它后，代码工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:23:07.877

您可以尝试以下方法：

1.  尝试将您的查询更改为`select * from table`您确定应该有一些结果的地方，以确保您对数据库的访问按预期工作。
2.  修剪开头或结尾的任何空格的“uname”和密码，这可以解释为什么您的查询找不到值，并确保您测试的值存在于数据库表中。
3.  根据您的 DBMS，您可以考虑使用 like 运算符`"%"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:05:55.740

是的，从

"select * from img_pwd where uname='"+UNM+"' and pwd='"+h1+"')"

您的查询字符串应该是这样的：

从表中选择 *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:28:32.133

连接数据库时可能有任何异常，您没有提到 catch 块，所以放一个 catch 和调试。

# visual-studio-2008 - VS 2008 + 在 aspx/vb/js/css 页面之间切换需要很长时间

> ID：16143360
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:28.840
> 
> 标签：visual-studio-2008

我一直有这个奇怪的问题..

我正在使用 Visual Studio 2008、asp.net、vb.net 并且在 aspx/vb/js/css 页面之间切换需要很长时间。它太烦人了，减慢了我的工作速度。

早些时候我使用的是 VS 2010，从来没有遇到过这个问题。

我使用的是 Windows 7（64 位）——以防万一您需要此信息

有没有人经历过这种情况？？

请帮忙！阿尔夏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:31:04.487

我可以通过自定义工具栏来修复它。删除了除菜单栏外的所有内容！！

它恢复了全速！

谢谢， 阿夏

# c++ - 如何使用局部变量作为 MySQL 查询的一部分（Qt C++）

> ID：16143361
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:29.777
> 
> 标签：c++, mysql, qt

正如问题所说，我试图`MySQL`使用 where 子句的局部变量来查询数据库。我知道在 java 中你可以使用`+`运算符在查询字符串中插入局部变量，这在`C++`. 所以我想也许 id 使用字符串流：

```
void test::something(double car_id)
{
 std::stringstream ss;
    ss << "SELECT * FROM cars WHERE carID = '";
    ss << car_id << "'";
    QString query_string = QString::fromStdString(ss.str());
    QSqlQuery query(query_string);
    // execute the query
    query.exec();
    std::cout << query.value("carID").toString().toStdString() << std::endl;
} 
```

但这也不起作用，任何帮助都会很棒，因为我似乎找不到答案

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T09:20:20.873

您应该参数化查询，而不是将变量附加到查询字符串。所以，像这样：

```
void test::something(double car_id){
    QSqlQuery query;
    query.prepare("SELECT * FROM cars WHERE carID = ?");
    query.addBindValue(car_id);
    query.exec();
    std::cout << query.value("carID").toString().toStdString() << std::endl;
} 
```

或者使用命名绑定：

```
void test::something(double car_id){
    QSqlQuery query;
    query.prepare("SELECT * FROM cars WHERE carID = :car_id");
    query.bindValue(":car_id", car_id);
    query.exec();
    std::cout << query.value("carID").toString().toStdString() << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:20:23.757

如果 carID 是 DB 中的数字列，则不需要引号

```
QString query_string = "SELECT * FROM cars WHERE carID = " 
+ QString::number(car_id); 
```

否则

```
QString query_string = "SELECT * FROM cars WHERE carID = '" 
+ QString::number(car_id) + "'"; 
```

注意 1：您根本不应该使用这种方法，而是查看绑定查询参数。由于许多不同的原因（注入、转义、类型格式化/转换等）

注 2：为什么人们喜欢将 STL 基本类型与 QT 基本类型（字符串、基本容器等）混合使用。除了完全不可读的代码和转换问题外，从未见过这样做的任何优点。

# javascript - 重叠元素的鼠标离开的jQuery问题

> ID：16143363
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:42.610
> 
> 标签：javascript, jquery, hover, mouseleave

我对 jQuery 有点陌生，并且有一个基本问题。这是我正在使用的代码：

```
$(".v65-productDisplay a img").each(function(){
var productHref = $(this).attr("src");
var productCode = productHref.substring(19,productHref.length-6); 
```

这是在 Volusion 框架中，很多东西都是动态生成的。产品图像都有链接到产品的锚标签，但锚和图像都有 id 或类。我可以通过定位锚标记的 href 属性从产品中获取产品代码，因为链接使用 get 变量。一个例子是`/v/vspfiles/photos/MacFRC-1.jpg`MacFRC 是产品代码。

现在我正在尝试生成一个添加到购物车按钮，您可以使用 GET 变量设置它们，因此对于这个，链接（来自商店内）将是`/ShoppingCart.asp?ProductCode=MacFRC`. 这是我用来生成它作为对 img 的悬停效果的代码。并不是 $(this).parent() 的目标是作为图像父级的锚标记。我这样做是因为 .v65-productDisplay 中还有其他锚标签，但正在使用跨度，而我只是在处理图像标签。

```
$(this).mouseenter(function(){
    $(this).parent().append("<div id='hover_info' style='position:relative;top:-20px;'><div id='add_hover'><a href='/ShoppingCart.asp?ProductCode=" + productCode + "'>Add To Cart</a></div></div>");
})
    .mouseleave(function() {
    $("#hover_info").remove();
}); 
```

现在的问题是，当我将鼠标悬停在新生成的具有链接的“hover_info”div 上时，它就会消失。我猜这是因为从技术上讲，我当时正在“鼠标离开”img，并且 jQuery 正在运行以删除 div。

有没有办法将 jQuery 中的函数设置为“如果我的鼠标离开这个元素以及它的所有子元素”？我想这就是我正在寻找的东西。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:53:12.053

当鼠标离开元素或其子元素时，也会触发 mouseout 事件，但我认为这不是您想要的。

您可以做的是在 mouseleave-ing 图像时检查鼠标是否在 div 上，并对 div 执行相同操作 - 检查鼠标是否在 mouseleave-ing div 上的图像上。您可以使用 .is(":hover") 来检查这一点，但它不适用于所有浏览器，所以我最好添加/删除类来区分这一点。

```
$(this).mouseenter(function(){
    $(this).addClass("hovered").parent().append("<div id='hover_info' style='position:relative;top:-20px;'><div id='add_hover'><a href='/ShoppingCart.asp?ProductCode=" + productCode + "'>Add To Cart</a></div></div>");    
})
.mouseleave(function() {
    $(this).removeClass("hovered"); 
    if (!$(this).parent().find("#hover_info").hasClass("hovered")) 
        $(this).parent().find("#hover_info").remove();
}); 
```

并为#hover_info 添加mouseenter mouseleave，只需使用“live”（或“on”），以便即使元素尚不存在也可以绑定事件处理程序

```
$("#hover_info").live({
    mouseenter: function() { 
        $(this).addClass("hovered");
    },
    mouseleave: function() {
    $(this).removeClass("hovered");
    if (!$(this).parent().find(".v65-productDisplay a img").hasClass("hovered"))
        $(this).remove();
    }
}); 
```

# r - R中滚动数据子集的矩阵代数

> ID：16143365
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:46.427
> 
> 标签：r, matrix

我是 R 新手，遇到以下问题：

**数据输入**：

我有一个包含两列的 CSV，如下所示：

```
1,10
2,20
3,30
4,40
5,50
...
N, M 
```

**问题：**

```
a) Read in the CSV
b) Convert to a matrix
c) Take 4 rows starting with the first row
d) calculate the third column of elements as a simple square of the second column elements
e) Calculate the sumproduct (value11*value12*value13 + value21*value22*value23 + value31*value32*value33 +value41*value42*value43)
f) Do this until the end of the dataset 
```

结果：

前两个矩阵的结果应如下所示：

**第一个矩阵：**

从第一行开始，选择四行。

步骤1

```
1,10
2,20
3,30
4,40 
```

第 2 步（将第 3 列添加为第二列值的平方）

```
1,10,100
2,20,400
3,30,900
4,40,1600 
```

第 3 步（计算 sumproduct）（1*10*100 + 2*20*400 +3*30*900 + 4*40*1600）== 354.000

**第二个矩阵：**

继续第二行并取接下来的 4 行

步骤1

```
2,20
3,30
4,40
5,50 
```

第 2 步（将第 3 列添加为第二列值的平方）

```
2,20,400
3,30,900
4,40,1600
5,50,2500 
```

第 3 步（计算 sumproduct）

```
(2*20*400 +3*30*900 + 4*40*1600 + 5*50*2500) == 978.000 
```

**N 矩阵** 执行步骤 1 到 3 直到数据集结束

**结果**

结果应该是 sumproducts 列表：

```
354.000, 978.000, ..., N 
```

谢谢！

# jquery - 使用 jquery 创建闪烁动画

> ID：16143367
> 
> 赞同：0
> 
> 时间：2013-04-22T09:13:50.660
> 
> 标签：jquery

我正在尝试为图像创建鼠标悬停闪烁动画。我希望动画在第一次鼠标悬停时只被调用一次。要调用另一个闪烁动画，用户必须先将光标拉出图像，然后再次将其悬停。但是即使我还没有拉出图像的光标并重新悬停它，它仍然会被调用（在图像内部运行光标，并且动画会多次调用）。

```
$(document).ready(function () {
    $("div.left > .img > img").mouseenter(function () {
        $("div.left > .flick").show();
        $("div.left > .flick").fadeOut();
    });
}); 
```

[请在这里查看我的代码](http://jsfiddle.net/trongcuong1710/QPMT5/)

P/S：对不起我的英语不好和解释不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:17:50.000

这是一个相当普遍的问题，经常被忽视。

当您的叠加层显示时，它会暂时从下面的图像中移除焦点。当它淡出时，焦点会在鼠标移动时重新回到图像上，这意味着动画会发生不止一次。问题是由这种失去焦点引起的。

[http://jsfiddle.net/QPMT5/1/](http://jsfiddle.net/QPMT5/1/)

您需要做的就是将您的选择器更改为容器，这意味着只有当鼠标离开*容器*时才会失去焦点，*而不是*其中的图像元素：

```
$("div.left").mouseenter(function () {
    $("div.left > .flick").show();
    $("div.left > .flick").fadeOut();
}); 
```

我已更改`div.left > .img > img`为`div.left`. [此处](http://jsfiddle.net/JFCqy/)显示了此行为的稍微干净的版本。

# c# - 将参数传递给没有@符号的存储过程

> ID：16143371
> 
> 赞同：-2
> 
> 时间：2013-04-22T09:14:02.163
> 
> 标签：c#, sql-server, stored-procedures

好吧，我很好奇如果我传递一些没有`@`符号的参数会发生什么

```
public static int Run(string command,string anotherParameter, DataTable dt)
 {
   SqlDataAdapter adapter = new SqlDataAdapter("SPName", Connection.Connect);
   adapter.SelectCommand.CommandType = CommandType.StoredProcedure;
   adapter.SelectCommand.Parameters.Add("@command",SqlDbType.NVarChar).Value=command;

   //another one without @        
   adapter.SelectCommand.Parameters.Add("anotherParameter",SqlDbType.NVarChar).Value=anotherParameter;
     try
        {

            return adapter.Fill(dt);
        }
     catch (Exception ex)
        {
            return -1;
        }
        finally
        {
            adapter.Dispose();
        }     

 } 
```

这可能有时会运行而另一个失败？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:24:04.350

如果您不在`"@"`参数名称前添加，`"@"`则会自动添加。但最好的做法是手动添加`@`，不要依赖自动功能。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.parametername.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.parametername.aspx)

# javascript - slickgrid viewportchanged 事件未触发

> ID：16143374
> 
> 赞同：0
> 
> 时间：2013-04-22T09:14:05.197
> 
> 标签：javascript, slickgrid

无法触发光滑的网格 viewportChanged 事件。它应该在页面加载时触发。有任何想法吗？

javascript:

```
grid.onViewportChanged.subscribe(function (e, args) {
    alert('sdfsdfaasdfdsaf');
    var vp = grid.getViewport();
    loader.ensureData(vp.top, vp.bottom);
}); 
```

CS：

```
namespace OrderCatalog
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e) 
        {

        }
        override protected void OnInit(EventArgs e)
        {
            this.Load += new System.EventHandler(this.Page_Load);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:23:42.640

它不应该在页面加载时触发。顾名思义，它会在视口发生变化时触发，即当用户滚动并且视口中的顶部和底部可见行发生变化时。

# c# - 处理函数式代码中的可变性的策略

> ID：16143378
> 
> 赞同：2
> 
> 时间：2013-04-22T09:14:07.787
> 
> 标签：c#, f#, functional-programming, mutability

我最近研究了[FParsec的代码，它是 Haskell](http://www.quanttec.com/fparsec/) [Parsec](http://www.haskell.org/haskellwiki/Parsec)解析器组合库的 F# 端口。

`FParsec`公共 API 功能齐全，但它依赖于`FParsecCS`依赖于可变数据结构的支持库，并使用 CLR 不安全构造执行显式内存管理。

我认为这样做是出于性能原因。

我在**函数式编程**方面的经验仍然有限，所以我向更有经验的 FP 开发人员询问这是否是在这种情况下采用的一种好技术。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:38:59.213

一般来说，你应该坚持更实用的风格。一些例外是：

1.  公共图书馆（出于性能原因）
2.  应用的性能关键部分
3.  其他语言使用的api（函数式api可能更难被非函数式语言使用）

即使对于这些例外情况，通常也有一种函数式方法可以使用函数式样式（不包括 api 定义）来执行您尝试执行的操作，因此请确保在转向更命令式或 OO 样式之前探索您的函数选项。

# java - Thread 中的共享变量 -> 需要同步它们吗？

> ID：16143380
> 
> 赞同：0
> 
> 时间：2013-04-22T09:14:16.977
> 
> 标签：java, multithreading, synchronization, thread-safety

以下代码从一个大列表中创建任务，该列表分为子列表（列表 l）：

```
 ExecutorService executor = Executors.newFixedThreadPool(cpu);
        KwArrayDuration duration = new KwArrayDuration();
        for (List<Item> l : partition) {
            Runnable readingTask = new MainReadingTask(l, duration);
            executor.execute(readingTask);
        }
        executor.shutdown();
        while (!executor.isTerminated()) {
            // Execute all Threads
        } 
```

工作线程的示例代码：

```
public class MainReadingTask implements Runnable {

private KwArrayDuration duration;
private List<Item> wis;

    public MainReadingTask(List<Item> wis, KwArrayDuration duration) {
       this.wis = wis;
       this.duration = duration;
    }

    @Override
    public void run() {
    try {
      for (Item wi : wis) {
        duration.setValueFromItem(wi.getId(), null, cal);
      }
    } catch (IOException e) {
        e.printStackTrace();
    }   
    }

} 
```

该类的对象`KwArrayDuration`被所有线程用作一个`storage`类，该类将每个任务的结果插入到数组列表 ( `kwContentArray`) 中。

此外，该类`KwArrayDuration`包含一些计算某些东西的方法。这些方法由每个工作线程调用：

```
public synchronized void setValueFromItem(String id, DurationTime duration, Calendar cal) {
   if(duration != null) {
    try {
       this.setDurationValues(id, duration, cal);
    } catch (IOException e) {
       e.printStackTrace();
    }
   } else {
    int currentDay = getCurrentCalendarDay(cal);
    long time = 0;
    for (int i = currentDay; i < kwContentArray.size(); i++) {
       KwArrayWrapper currentDayKW = kwContentArray.get(i);
       currentDayKW.setValues(wi, String.valueOf(time));
       kwContentArray.set(i, currentDayKW);
    }
   }
} 
```

**问题：**

真的需要`setValueFromItem`从共享`KwArrayDuration`实例同步功能吗？我认为是的，因为如果调度程序在此行之后停止，结果可能会有所不同

```
int currentDay = getCurrentCalendarDay(cal); 
```

另一个线程使用这个 int 值进行进一步的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:54:17.893

有两个原因你需要`synchronize`

1.  如果持续时间是可变的和共享的，或者如果 cal 在其他线程之间共享，那么调用`getCurrentCalendarDay(cal)`可能会导致与进入方法时预期的结果不同的结果。`duration`如果它是可变和共享的，这也适用。

2.  如果`kwContentArray`是共享的，您还需要同步。

故事的寓意是同步访问所有共享的可变数据。

# java - 在周模式android上显示错误的日期

> ID：16143381
> 
> 赞同：0
> 
> 时间：2013-04-22T09:14:29.623
> 
> 标签：java, android, date, calendar

我正在使用以下代码显示一周中的所有日期，但是每当我选择一周的最后一个日期时，它就会打印下周的日期。为什么会发生这种情况？我的代码有什么问题吗？

```
/**Calendar week start on Monday**/

        Calendar selectedDate = Calendar.getInstance(Locale.US);        
        // Set current date to 21-april-2013
        selectedDate.set(selectedDate.get(Calendar.YEAR), selectedDate.get(Calendar.MONTH), 21);

        // create another instance of calendar      
        Calendar c = Calendar.getInstance(Locale.US);
        // set current date to this new calendar instance
        c = (Calendar) selectedDate.clone();

        // Set the calendar to monday of the current week   
        c.setFirstDayOfWeek(Calendar.MONDAY);
        c.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);

        // Print dates of the current week starting on Monday
        DateFormat df = new SimpleDateFormat("dd/MM/yyyy", Locale.US);
        for (int i = 0; i < 7; i++) 
        {
            System.out.println(df.format(c.getTime()));
            c.add(Calendar.DATE, 1);
        } 
```

**输出显示日期从**

```
22-april-2013 to 28-april-2013 
```

**但应该是**

```
15-april-2013 to 21-april-2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:22:17.997

您的代码在我的系统中运行良好

![在此处输入图像描述](https://i.stack.imgur.com/8175w.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:18:03.377

您将开始日期（即 4 月 21 日）添加天数。

```
for (int i = 0; i < 7; i++) 
{
    System.out.println(df.format(c.getTime()));
    c.add(Calendar.DATE, 1);
} 
```

这可以解释为什么你的日期会在未来出现 =)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:20:21.713

您将日期设置为 21，即星期日..

当你设置

```
c.setFirstDayOfWeek(Calendar.MONDAY); 
```

它将变为 2013 年 4 月 15 日

所以，`c.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);`明确设置为 15-april-13

# jquery - jQuery pushState 加载内容，不同的 URL

> ID：16143387
> 
> 赞同：0
> 
> 时间：2013-04-22T09:14:43.280
> 
> 标签：jquery, json, pushstate

当我尝试从[http://html5.gingerhost.com/](http://html5.gingerhost.com/)重新创建演示时遇到了一些问题。我将尝试尽可能清楚地描述情况：

在我的页面上有 <a href="index"> ，点击它会触发：

*   **将浏览器的 URL 栏更改为mysite.tld/index**的 pushState 事件
***   一个 getJSON 调用，它加载一个随机 url 并把它而不是当前的 <a href="index">**

 **当用户单击加载的随机 url 时，pushState 事件不会触发，浏览器会跟随随机 url ......这不是我想要的。我想继续触发 pushState 事件并继续加载随机 url。

像这样的东西：

*   点击索引
    *   加载索引 2 和替换索引
        *   CLICK INDEX2 *（在这里它会中断。它会加载真实页面）*
            *   LOAD INDEX3 和 REPLACE INDEX2 *(这里我要到)*

如果我不清楚，我很抱歉。我对自己的 jQuery 技能不是很自信。

你有什么建议吗？

这是源代码：

```
<!DOCTYPE html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function() {
        $('a').click(function(e) {
            href = $(this).attr("href");

            loadContent(href);

            history.pushState('', 'New URL: '+href, href);
            e.preventDefault();
        });
    });

    function loadContent(url){
        $.getJSON("load.php", {pid: url}, function(json) {
            $.each(json, function(key, value){
                $(key).html(value);
            });
        });         
    }   
</script>
</head>

<body>
    <div>
        <a href="index">Go to: index</a>
    </div>
    <p></p>
</body>
</html> 
```

**加载.php**

```
<?php $i = rand(0,10); ?>
{
"div":"<a href='<?php echo $_GET['pid'].$i; ?>'>Go to: <?php echo $_GET['pid'].$i; ?></a>",
"p":"This is the page for <?php echo $_GET['pid']; ?>"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:05:18.230

那是因为

```
$('a').click(function(e) { … 
```

仅适用于`a`执行此行时 DOM 中的元素。稍后您将其替换为*另一个* `a`元素，该元素不会被此捕获。

改为使用[`.on`](http://api.jquery.com/on/)fe，如下所示：

```
$(document).on("click", "a", function(e) { … 
```**

# android - Android USSD回复保存

> ID：16143393
> 
> 赞同：2
> 
> 时间：2013-04-22T09:15:24.233
> 
> 标签：android, ussd

为了从我的应用程序中获得 USSD 的回复，我做了很多研发工作。但在那之后，我可以请求 fot USSD 但不能获得对我的应用程序的响应。

有什么解决办法去USSD的回复。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:35:59.420

简而言之，您需要创建一个`AIDL`文件来公开一些使用android意图的方法`com.android.ussd.IExtendedNetworkService`

查看解释如何拦截 USSD 响应消息的这篇博文，这对您的情况非常有帮助。[在 Android 中拦截 USSD 呼叫](http://www.codedemigod.com/intercepting-ussd-calls-in-android/)

# android - 在 AsyncTask 中显示 Toast 时上传图像和错误

> ID：16143397
> 
> 赞同：0
> 
> 时间：2013-04-22T09:15:34.470
> 
> 标签：android, android-asynctask, toast

我希望把我的上传图片功能放在 AsyncTask 中。因此我改变了，它仍然有错误。现在，我认为我的问题在于 onPostExecute。httpURLConnection 操作需要放在 onPostExecute 吗？我应该改变什么？谢谢你对我的帮助

```
 class upload extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Loading....");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Saving product
     * */
    protected String doInBackground(String... args) {
 {
                   String end = "\r\n";  
                String twoHyphens = "--";  
                 String boundary = "******";  
            try  
            {  
              URL url = new URL(actionUrl);  
              HttpURLConnection httpURLConnection = (HttpURLConnection) url  
                  .openConnection();  
              // setting the memory
               httpURLConnection.setChunkedStreamingMode(128 * 1024);// 128K  
              // allow  input and output
              httpURLConnection.setDoInput(true);  
              httpURLConnection.setDoOutput(true);  
              httpURLConnection.setUseCaches(false);  
              // use POST way  
              httpURLConnection.setRequestMethod("POST");  
              httpURLConnection.setRequestProperty("Connection", "Keep-Alive");  
              httpURLConnection.setRequestProperty("Charset", "UTF-8");  
              httpURLConnection.setRequestProperty("Content-Type",  
                  "multipart/form-data;boundary=" + boundary);  

              DataOutputStream dos = new DataOutputStream(  
                  httpURLConnection.getOutputStream());  
              dos.writeBytes(twoHyphens + boundary + end);  
              dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\"; filename=\""  
                  + srcPath.substring(srcPath.lastIndexOf("/") + 1)  
                  + "\""  
                  + end);  
              dos.writeBytes(end);  

              FileInputStream fis = new FileInputStream(srcPath);  
              byte[] buffer = new byte[8192]; // 8k  
              int count = 0;  

              while ((count = fis.read(buffer)) != -1)  
              {  
                dos.write(buffer, 0, count);  
              }  
              fis.close();  

              dos.writeBytes(end);  
              dos.writeBytes(twoHyphens + boundary + twoHyphens + end);  
              dos.flush();  

              InputStream is = httpURLConnection.getInputStream();  
              InputStreamReader isr = new InputStreamReader(is, "utf-8");  
              BufferedReader br = new BufferedReader(isr);  
              String result = br.readLine();  

              dos.close();  
              is.close(); 

              return result;

            } catch (Exception e)  
            {  
              e.printStackTrace();  
              setTitle(e.getMessage());  
            } 

        }

        return null;
    }
    protected void onPostExecute(String file_url) {
        Toast.makeText(MainActivity.this, file_url, Toast.LENGTH_LONG).show();

        // dismiss the dialog once product uupdated
        pDialog.dismiss();
    }
    } 
```

LOGCAT

```
 04-22 09:01:53.381: E/AndroidRuntime(1154): FATAL EXCEPTION: AsyncTask #1
      04-22 09:01:53.381: E/AndroidRuntime(1154): java.lang.RuntimeException: An error occured while executing doInBackground()
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.os.AsyncTask$3.done(AsyncTask.java:200)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.lang.Thread.run(Thread.java:1096)
      04-22 09:01:53.381: E/AndroidRuntime(1154): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.view.View.invalidate(View.java:5139)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.widget.TextView.checkForRelayout(TextView.java:5364)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.widget.TextView.setText(TextView.java:2688)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.widget.TextView.setText(TextView.java:2556)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.widget.TextView.setText(TextView.java:2531)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at com.android.internal.policy.impl.PhoneWindow.setTitle(PhoneWindow.java:260)
     04-22 09:01:53.381: E/AndroidRuntime(1154):    at android.app.Activity.onTitleChanged(Activity.java:3581)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.app.Activity.setTitle(Activity.java:3547)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at com.example.mmap.MainActivity$upload.doInBackground(MainActivity.java:255)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at com.example.mmap.MainActivity$upload.doInBackground(MainActivity.java:1)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
      04-22 09:01:53.381: E/AndroidRuntime(1154):   ... 4 more
      04-22 09:01:54.411: E/WindowManager(1154): Activity com.example.mmap.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@46047368 that was originally added here
      04-22 09:01:54.411: E/WindowManager(1154): android.view.WindowLeaked: Activity com.example.mmap.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@46047368 that was originally added here
      04-22 09:01:54.411: E/WindowManager(1154):    at android.view.ViewRoot.<init>(ViewRoot.java:247)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.view.Window$LocalWindowManager.addView(Window.java:424)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.app.Dialog.show(Dialog.java:241)
      04-22 09:01:54.411: E/WindowManager(1154):    at com.example.mmap.MainActivity$upload.onPreExecute(MainActivity.java:187)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.os.AsyncTask.execute(AsyncTask.java:391)
      04-22 09:01:54.411: E/WindowManager(1154):    at com.example.mmap.MainActivity$1.onClick(MainActivity.java:68)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.view.View.performClick(View.java:2408)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.view.View$PerformClick.run(View.java:8816)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.os.Handler.handleCallback(Handler.java:587)
     04-22 09:01:54.411: E/WindowManager(1154):     at android.os.Handler.dispatchMessage(Handler.java:92)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.os.Looper.loop(Looper.java:123)
      04-22 09:01:54.411: E/WindowManager(1154):    at android.app.ActivityThread.main(ActivityThread.java:4627)
      04-22 09:01:54.411: E/WindowManager(1154):    at java.lang.reflect.Method.invokeNative(Native Method)
      04-22 09:01:54.411: E/WindowManager(1154):    at java.lang.reflect.Method.invoke(Method.java:521)
      04-22 09:01:54.411: E/WindowManager(1154):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
      04-22 09:01:54.411: E/WindowManager(1154):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
      04-22 09:01:54.411: E/WindowManager(1154):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:35:06.630

移除返回结果，因为不能从子视图返回。
消除

`setTitle(e.getMessage());`

从 doinbackground 并像这样重写 postexecute

```
protected void onPostExecute(String file_url) {
    // dismiss the dialog once product uupdated
    pDialog.dismiss();
    Toast.makeText(MainActivity.this, file_url, Toast.LENGTH_LONG).show();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:47:50.623

您似乎正在尝试在 doInBackground() 中更新 ui。doInBackground() 在后台线程上运行。所以你需要在ui线程上更新ui。

你做如下

```
 runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 

                      _tv.setText("myTitle");

                 }
                 }); 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

当一个异步任务被执行时，任务会经过 4 个步骤：

1.  onPreExecute()，在任务执行之前在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2.  **doInBackground(Params...)，**在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。**计算的结果必须由这一步返回，并将传回最后一步**。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

3.  onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.  **onPostExecute(Result)，在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。**

在 doInBackground() 中返回结果并在 onPostExecute() 中更新 ui

编辑：

从 catch 块中删除 setTitle(e.getMessage())

```
 protected String doInBackground(String... args) 
   {
    .....    
     try
     {
         .......
         result = "success" // example
     } 
    catch (Exception e){  
          e.printStackTrace();    
     } 
    return result; // return result after catch
   }
   protected void onPostExecute(String file_url) {
   pDialog.dismiss();
   Toast.makeText(MainActivity.this, file_url, Toast.LENGTH_LONG).show();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:37:53.990

它看起来像这种方法：

```
setTitle(e.getMessage()); 
```

正在从外部访问 UI 线程。所有 touchech UI 都必须在 doInBackground() 方法之外完成。

# css - 指南针输出样式

> ID：16143401
> 
> 赞同：12
> 
> 时间：2013-04-22T09:15:51.487
> 
> 标签：css, sass, compass-sass

有没有人找到任何关于 Compass 中 output_style 的不同值意味着什么的文档？选项是 :expanded、:nested、:compact 和 :compressed。我可以看到最后一个是什么，但其他人是做什么的？

我必须重新编译所有的 CSS 来弄清楚这些不同的选项会产生什么，这似乎有点浪费。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-22T11:09:58.750

输出样式包含在[SASS 文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#output_style)中。

> 尽管 Sass 输出的默认 CSS 样式非常好，并且反映了文档的结构，但口味和需求各不相同，因此 Sass 支持其他几种样式。
> 
> Sass 允许您通过设置 :style 选项或使用 --style 命令行标志在四种不同的输出样式之间进行选择。
> 
> ### :嵌套
> 
> 嵌套样式是默认的 Sass 样式，因为它反映了 CSS 样式的结构和它们所设计的 HTML 文档。每个属性都有自己的行，但缩进不是恒定的。每个规则都根据嵌套的深度进行缩进。例如：
> 
> ```
> #main {
>   color: #fff;
>   background-color: #000; }
>   #main p {
>     width: 10em; }
> 
> .huge {
>   font-size: 10em;
>   font-weight: bold;
>   text-decoration: underline; } 
> ```
> 
> 嵌套样式在查看大型 CSS 文件时非常有用：它允许您轻松掌握文件的结构，而无需实际阅读任何内容。
> 
> ### ：扩展
> 
> Expanded 是一种更典型的人造 CSS 样式，每个属性和规则占一行。属性在规则中缩进，但规则没有以任何特殊方式缩进。例如：
> 
> ```
> #main {
>   color: #fff;
>   background-color: #000;
> }
> #main p {
>   width: 10em;
> }
> 
> .huge {
>   font-size: 10em;
>   font-weight: bold;
>   text-decoration: underline;
> } 
> ```
> 
> ### ：袖珍的
> 
> 紧凑样式比嵌套或扩展占用更少的空间。它还将焦点更多地吸引到选择器上，而不是它们的属性上。每个 CSS 规则只占一行，每个属性都在该行上定义。嵌套规则彼此相邻放置，没有换行符，而单独的规则组之间有换行符。例如：
> 
> ```
> #main { color: #fff; background-color: #000; }
> #main p { width: 10em; }
> 
> .huge { font-size: 10em; font-weight: bold; text-decoration: underline; } 
> ```
> 
> ### : 压缩
> 
> 压缩样式占用尽可能少的空间，除了分隔选择器和文件末尾的换行符之外没有空格。它还包括一些其他小的压缩，例如选择颜色的最小表示。它并不意味着人类可读。例如：
> 
> ```
> #main{color:#fff;background-color:#000}#main p{width:10em}.huge{font-size:10em;font-weight:bold;text-decoration:underline} 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:29:46.953

啊，我现在明白了.. :expanded 是默认值：

：扩展

```
#date .day {
  display: block;
  padding-top: 5px;
  font-size: 30px;
  color: #AAA;
} 
```

:嵌套

```
#date .day {
  display: block;
  padding-top: 5px;
  font-size: 30px;
  color: #AAA; } 
```

：袖珍的

```
#date .day { display: block; padding-top: 5px; font-size: 30px; color: #AAA; } 
```

: 压缩

```
#date .day{display:block;padding-top:5px;font-size:30px;color:#AAA} 
```

# mysql - 与共享在执行时不工作的一对一关系

> ID：16143405
> 
> 赞同：0
> 
> 时间：2013-04-22T09:16:21.897
> 
> 标签：mysql, database, jpa, eclipselink, one-to-one

我将 EclipseLink(JPA 2.0) 与 MySql 一起使用，但我在模型中遇到了问题。我有 2 个实体：Delincuente、PerfilFisico。他们共享 Delincuente 的 Pk。

数据库工作正常，但是当我插入一个 Delincuente 和 Perfil Fisico 时，我试图显示该 Delincuente 的 PerfilFisico（使用 Delincuente.PerfilFisico。），它只是空的。我检查了数据库中的表格，一切正常。

如果我再次运行系统（我正在 Netbeans 7.2 中开发）并且我咨询了我刚刚在数据库上注册的 Delincuente，它会显示所有字段并且一切都很完美！

有代码：

Delincuente.java

```
@OneToOne(cascade = CascadeType.ALL, mappedBy = "delincuente")
private PerfilFisico perfilFisico; 
```

PerfilFisico.java

```
@JoinColumn(name = "PK_IdDelincuente", referencedColumnName = "PK_Identificacion", insertable = false, updatable = false)
@OneToOne(optional = false)
private Delincuente delincuente; 
```

出了什么问题，我已经阅读了几天，我无法弄清楚问题出在哪里。有小费吗？

正如我所说，它可以工作，但是当您运行它并注册一个新的 Delincuente 时，您必须重新运行系统才能成功完成咨询并查看 PerfilFisico

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:55:02.570

JPA EntityManagers 有一个用于托管实体的一级缓存，而像 EclipseLink 这样的提供程序有一个二级缓存。因此，如果您不维护双向映射的两侧，因此它们与数据库不同步，除非您强制刷新、清除缓存或重新启动，否则它不会显示。该应用程序必须保持双向关系，JPA 不会为您做这件事，因为它们是 pojos。

# python - 如何使用 python 创建 mbox 电子邮件文件

> ID：16143411
> 
> 赞同：0
> 
> 时间：2013-04-22T09:16:43.803
> 
> 标签：python, email, base64, email-attachments, mbox

我有一个包含电子邮件地址和其他数据的 mysql 数据库。我需要创建可以发送到数据库中地址的特定电子邮件。电子邮件的类型将根据 db 上的字段而有所不同。每封电子邮件都会有一个 pdf 附件，该附件取自 db 中的路径字段。由于电子邮件需要从另一台计算机发送，我考虑创建一个 mbox 文件，其中包含作为 base64 ASCII 文本的消息和附件，然后可以在诸如进化之类的电子邮件程序中打开并从另一台计算机发送。我需要获得有关如何使用 python 和 mysql 完成此操作的建议和可能的示例。如何将电子邮件地址、消息正文和 pdf 转换为 ASCII 文本 mbox 文件的示例将是理想的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:33:53.453

要处理 mbox 文件，您可以使用`mailbox`模块：[http](http://docs.python.org/2/library/mailbox.html) ://docs.python.org/2/library/mailbox.html但您的问题不够精确，您似乎只需要发送电子邮件 - 为此，创建 mbox文件不是必需的，为了让您的生活更轻松，您可以使用以下内容： http: [//www.mailgun.com/](http://www.mailgun.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-01T17:17:18.043

要创建和管理 .mbox 文件，您可以尝试使用第三方库[Aspose.Email for Python](https://products.aspose.com/email/python-net?utm_source=https://stackoverflow.com/questions/16143411/how-to-create-a-mbox-email-file-using-python/58663260#58663260&utm_medium=email&utm_campaign=how-to-create-a-mbox-email-file-using-python)。

看下面的例子。这种方法可以帮助您创建 .mbox 文件。

```
# Initialize MboxStorageWriter and pass the above stream to it
writer = MboxrdStorageWriter(dataDir + "ExampleMBox_out.mbox", False)

# Prepare a new message using the MailMessage class
message = MailMessage("from@domain.com", "to@domain.com", "Eml generated for Mbox", "added from Aspose.Email for Python")
message.is_draft = False

# Add this message to storage
writer.write_message(message)

# Close all related streams
writer.dispose(); 
```

要查看更多示例，您可以转到[官方存储库](https://github.com/aspose-email/Aspose.Email-Python-Dotnet/tree/9c4ccb0e4325fe8bb37fb17c347ed96e2647e918/Examples)。

我是 Aspose 的开发人员布道师。

# iphone - 当 pageviewcontroller 的类型为 UIPageViewControllerTypeScroll 时，如何禁用 pageviewcontroller 触摸？

> ID：16143414
> 
> 赞同：1
> 
> 时间：2013-04-22T09:16:58.867
> 
> 标签：iphone, objective-c

我有一个应用程序，我在我的应用程序中使用 pageviewcontroller。我的 pageviewcontroller 是滚动类型。我的问题是当我的 pagviewcontroller 是滚动类型时如何禁用手势识别器。

这在 curl 中是可能的，但在滚动中是不可能的。当类型为 curl 时，我的手势识别器数组返回 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:24:06.303

这是不可能的

从`UIPageViewController.h`

```
// An array of UIGestureRecognizers pre-configured to handle user interaction. Initially attached to a view in the UIPageViewController's hierarchy, they can be placed on an arbitrary view to change the region in which the page view controller will respond to user gestures.
// Only populated if transition style is 'UIPageViewControllerTransitionStylePageCurl'.
@property(nonatomic, readonly) NSArray *gestureRecognizers; 
```

请注意**只有在过渡样式为“UIPageViewControllerTransitionStylePageCurl”时才会填充。**

在这里，您有一个解决方法 [UIPageViewController 在 iOS 6 中不返回手势识别器](https://stackoverflow.com/questions/13103613/uipageviewcontroller-returns-no-gesture-recognizers-in-ios-6)

# c# - c#中的子串并一一相加

> ID：16143416
> 
> 赞同：4
> 
> 时间：2013-04-22T09:17:05.230
> 
> 标签：c#, .net, wpf

我有字符串'name'，并且想要从这个字符串中提取最后一个数字。

```
string name = "1100_PF_R_06230_1";
textBox1.Text = (name.Substring(name.Length - 1, 1)); 
```

name 字符串随着文件号的不同而变化，所以字符串名称就变成了。

```
1100_PF_R_06230_1
1100_PF_R_06230_2
1100_PF_R_06230_3
1100_PF_R_06230_4
1100_PF_R_06230_5
1100_PF_R_06230_6
1100_PF_R_06230_7
1100_PF_R_06230_8
1100_PF_R_06230_9
1100_PF_R_06230_10 
```

当它达到 10 时，我的子字符串给了我 0 并且文件再次从 1 开始。我想从最后一个“_”下划线中替换名称，以便我可以添加数字。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T09:18:40.257

您可以将[`Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法与 LINQ 一起使用[`Last`](http://msdn.microsoft.com/en-us/library/bb358775.aspx)：

```
var result =  name.Split('_').Last(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T09:19:04.797

试试这个代码：

```
 string name = "1100_PF_R_06230_1";
 var num = (name.Substring(name.LastIndexOf('_')+1)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T09:20:07.243

你想使用`Split('_')`如下

```
string strNumber = name.Split('_').Last(); 
```

我希望这有帮助。

# c++ - 模板类的运算符<<(ostream& os, ...)

> ID：16143417
> 
> 赞同：6
> 
> 时间：2013-04-22T09:17:13.310
> 
> 标签：c++, templates, operators

为什么我不能对接受模板参数的友元函数使用相同的模板参数？我的意思是下面的代码是好的！

```
template <class Vertex>
class Edge
{
   template <class T>
   friend ostream& operator<<(ostream& os, const Edge<T>& e);
   /// ...
};

template <class T>
ostream& operator<<(ostream& os, const Edge<T>& e)
{
   return os << e.getVertex1() << " -> " << e.getVertex2();
} 
```

但是这个不行。为什么？问题是什么？（我得到链接器错误。）

```
template <class Vertex>
class Edge
{
   friend ostream& operator<<(ostream& os, const Edge<Vertex>& e);
   /// ...
};

template <class T>
ostream& operator<<(ostream& os, const Edge<T>& e)
{
   return os << e.getVertex1() << " -> " << e.getVertex2();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:21:59.103

您可以使用以下

```
template <class Vertex>
class Edge
{
   friend ostream& operator<< <>(ostream& os, const Edge<Vertex>& e);
   /// ...
}; 
```

交`operator << <Vertex>`朋友`Edge`。

在你的第二种情况下 - 你交朋友非模板运算符，但这个运算符的定义是模板，所以你有未定义的引用，但如果你想要你`operator <<`的具体`Edge`（`Edge<int>`例如），可以使用这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:21:51.147

```
template <class T>
friend ostream& operator<<(ostream& os, const Edge<T>& e); 
```

说，外面有**模板** `operator <<`，和它做朋友，一切OK。

```
 friend ostream& operator<<(ostream& os, const Edge<Vertex>& e); 
```

说，有一个`operator <<`外部，与它成为朋友......编译器找不到这样的东西。

要告诉编译器该运算符是模板化的，请通过`<>`ForEveR 提到的帮助他（他迅速击败了我 :-D ）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T09:35:32.307

问题在于：

```
friend ostream& operator<<(ostream& os, const Edge<Vertex>& e); 
```

您将一个非模板函数（对于 的每个实例化都会不同`Edge`）声明为 a `friend`，而不是模板的实例化。

我在这里看到的最常见的解决方案是`operator<<`在类模板定义中简单地实现内联。或者，您可以提供一个执行输出的公共成员函数，并从 `operator<<`函数模板调用它。或者你可以写：

```
friend ostream& operator<< <Vertex>(ostream&, Edge<Vertex> const& ); 
```

告诉编译器`operator<<`which is a friend 是模板的实例化。但是，IIUC 仅`operator<<`在此时可见目标函数模板的声明时才有效，这意味着您需要转发声明它（并且为了转发声明它，转发声明类模板）。

对于这类问题，我通常的解决方案是提供一个普通的成员函数`print`，然后派生自：

```
template <typename DerivedType>
class IOStreamOperators
{
public:
    friend std::ostream&operator<<(
        std::ostream&       dest,
        DerivedType const&  source )
    {
        source.print( dest ) ;
        return dest ;
    }

    friend std::istream&operator>>(
        std::istream&       source,
        DerivedType&        dest )
    {
        dest.scan( source ) ;
        return source ;
    }

protected:
    ~IOStreamOperators() {}
}; 
```

，例如：

```
template <class Vertex>
class Edge : public IOStreamOperators<Edge<Vertex> >
{
    // ...
    void print( std::ostream& dest )
    {
        //  ...
    }
}; 
```

我发现这通常会使代码更简单，最终更容易理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:47:33.360

我认为如果我们去除无关的噪音并考虑：

```
template <typename T>
struct X
{
    friend void f(X<T>& x) { }
};

template <typename T>
void f(const X<T>& x) { } 
```

*   `f`里面`X`是：`void f(X<T>& x)`
*   `f`外面`X`是：`void f<T>(X<T>& x)`

您可以通过编译并查看生成的符号来了解这一点：

```
00410aa8 t .text$_Z1fR1XIdE
00410ad4 t .text$_Z1fIdEvRK1XIT_E 
```

从每个产生调用 GCC 的**__PRETTY_FUNCTION__ ：**

```
void f(X<double>&)
void f(const X<T>&) [with T = double] 
```

不是特别清楚，但是 GCC 的说法是后者的`void f<double>(...)`.

就个人而言，对于模板，我倾向于在类中定义函数......您根本不需要提及模板方面，只需：

```
friend ostream& operator<<(ostream& os, const Edge& e)
{
    // use e.whatever...
} 
```

# java - 无法理解这背后的逻辑

> ID：16143421
> 
> 赞同：1
> 
> 时间：2013-04-22T09:17:16.293
> 
> 标签：java

```
public class MyClass
{
    public static void main(String args[])
    {
        Boolean b=false;
        if(b=true)
        {
            System.out.println("TRUE");
        }
        if(b=false){
            System.out.println("FALSE");
        }
    }
} 
```

尽管对于大多数人来说这似乎是一个非常简单的问题，但我无法理解当我运行此代码时输出为 TRUE。

由于`=`是赋值运算符，因此在这两种情况下它都应该是正确的，因为值是分配的，即`if(b=true) = true`（有效）和`if(b=false) = true`（有效）。并且由于在此没有其他条件，因此它应该同时给出 TRUE 和 FALSE 作为输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:20:49.600

这种赋值的返回值总是在它的右边。所以 (b=false) 的结果是假的。

它在此处的 Java 语言规范中定义[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26)

> 在运行时，赋值表达式的结果是赋值发生后变量的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:21:42.450

`if(b=false)`被评估为假。在这里，您将 false 的值分配给变量`b`。所以它变成`if(false)`了这意味着该`if`块没有被执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T09:22:40.080

你的想法基本上是正确的。但是，如果赋值成功，则不返回 true，如果不成功，则返回 false（实际上，赋值不可能不成功；无效的赋值要么是语法错误，要么抛出异常）。

相反，分配返回已分配的值。

所以`b = true`返回`true`，`b = false`返回`false`。这就是为什么您的第二个条件不成立的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:28:46.200

```
if(b=true) 
```

表示`true`value 已设置为`b`，现在括号中`b`的 value 将被替换，因此 JVM 将其视为

`if(true)` //变量b替换为它的值。

这就是为什么您会得到 JVM 所期望的输出。`=`是赋值运算符。我们必须使用`==`运算符来比较布尔值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T09:58:48.100

条件语句必须计算为布尔类型。因此，在评估条件语句时，b 中包含的值会自动取消装箱，并且其工作方式与原始类型 boolean 的工作方式相同。因此，由于 if(b=true) 为真，因此它返回该值。它评估为 if(true) 将 true 的值分配给变量 b 和 if(b=false)，将 false 的值分配给变量 b 并退出，因为它是 false。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T09:29:07.157

```
if(b=false) 
```

不同于

```
if(b == false) 
```

if(b==false) 检查 b 是否为假而不是进入 if 部分，但是 if(b=false) aqssigns 给 ba 为假，然后不进入 if 部分，因为它是假的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T09:29:45.723

if 语句的内部部分仅在其为 true 时执行，即 if (true) 内部语句执行 if(false) 内部语句在第二个 if 语句中不执行你将 false 分配给 b 所以它不执行...

# c# - 输入输出优化

> ID：16143422
> 
> 赞同：1
> 
> 时间：2013-04-22T09:17:32.810
> 
> 标签：c#, .net, file, perforce

我正在处理行数可以为 60000 行的文件。这些文件存储在 perforce 中。为了计算添加的行数和注释的行数等一些统计信息，我使用了`repository.GetFileAnnotations()`给出文件内容的方法，结果作为 FileAnnotation 的 Ilist 返回，每个 fileAnnotation 封装了该文件的一行。所以我有义务创建一个临时文件并使用 foreach 读取所有 Ilist 并写入该文件中的每一行。这使得应用程序不够快。我该如何着手优化这种机制。

```
string tempfile = CreateTmpFile();
FileSpec fso = new FileSpec(FileSpec.DepotSpec(fsd.depotPath).DepotPath, Revision.Head);
IList<FileSpec> fsos = new List<FileSpec>();
fsos.Add(fso);
Options opts = new Options(); opts.Add("-a", "");
IList<FileAnnotation> fas = rep.GetFileAnnotations(fsos, opts);

foreach (FileAnnotation fa in fas)
{
    lines4 += fa.Line;
    UpdateTmpFile(tempfile, fa.Line);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:52:35.047

您是否考虑过使用该`diff2`命令？它将为您提供任何两个修订版的差异输出，因此您可以开始比较添加、更改、删​​除等的行。它肯定比解析每一行的注释更有效。

# android - 当我使用“startActivity”安装 apk 时如何获得结果代码

> ID：16143424
> 
> 赞同：6
> 
> 时间：2013-04-22T09:17:36.263
> 
> 标签：android

我安装了一个 apk，它保存在目录中`/data/data/package_name/files`，代码如下：

```
Uri uri = Uri.fromFile(new File(apkSavingPath));
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(uri,"application/vnd.android.package-archive");
mContext.startActivity(intent); 
```

我希望它返回一个结果代码来告诉我apk是否安装成功，我尝试了 的方法`startActivityForResult`，但没有成功。

在方法上`onActivityResult`，它的 resultCode 始终`0(zero)`是 apk 是否安装成功。我能得到这样的结果代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:41:58.773

尝试这个。

```
Intent intent = new Intent(Intent.ACTION_VIEW);           
intent.setDataAndType("ApkFilePath...","application/vnd.android.package-archive");
activity.startActivityForResult(intent,5000); 
```

在 AndroidManifest.xml 上添加您的接收器

```
<receiver android:name=".PackageReceiver" android:enabled="true" android:exported="true">
    <intent-filter>
        <action android:name="android.intent.action.PACKAGE_ADDED" />
        <action android:name="android.intent.action.PACKAGE_CHANGED" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="package" />
    </intent-filter>
</receiver> 
```

然后在安装新包时调用此类：

```
public class PackageReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
    // handle install event here
  }
} 
```

# ios - 在示例核心数据项目中出错

> ID：16143427
> 
> 赞同：11
> 
> 时间：2013-04-22T09:17:42.827
> 
> 标签：ios, objective-c, core-data

我从：[http](http://www.appcoda.com/introduction-to-core-data/) ://www.appcoda.com/introduction-to-core-data/ 了解了核心数据，但是当我自己开发一个示例项目时，两个文件中出现了许多错误。任何帮助将不胜感激，因为我是 iPhone 开发的新手

```
 //
//  PupilViewController.m
//  Pupils
//
//  Created by Lukasz Mozdzen on 21.04.2013.
//  Copyright (c) 2013 Lukasz Mozdzen. All rights reserved.
//

#import "PupilViewController.h"

@interface PupilViewController ()
@property (strong) NSMutableArray *pupils;

@end

@implementation PupilViewController

- (NSManagedObjectContext *)managedObjectContext
{
    NSManagedObjectContext *context = nil;
    id delegate = [[UIApplication sharedApplication] delegate];
    if ([delegate performSelector:@selector(managedObjectContext)]) {
        context = [delegate managedObjectContext];
    }
    return context;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    // Fetch the devices from persistent data store
    NSManagedObjectContext *managedObjectContext = [self managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Pupil"];
    self.pupils = [[managedObjectContext executeFetchRequest:fetchRequest error:nil] mutableCopy];

    [self.tableView reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return self.pupils.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    NSManagedObject *pupil = [self.pupils objectAtIndex:indexPath.row];
    [cell.textLabel setText:[NSString stringWithFormat:@"%@ %@", [pupil valueForKey:@"name"], [pupil valueForKey:@"surname"]]];
    [cell.detailTextLabel setText:[pupil valueForKey:@"telephone"]];

    return cell;
}

@end 
```

错误日志：

```
/Users/Lukasz/Desktop/Pupils/Pupils/PupilViewController.m:36:5: Use of undeclared identifier 'NSFetchRequest'

/Users/Lukasz/Desktop/Pupils/Pupils/PupilViewController.m:36:21: Use of undeclared identifier 'fetchRequest'

/Users/Lukasz/Desktop/Pupils/Pupils/PupilViewController.m:36:38: Use of undeclared identifier 'NSFetchRequest'

/Users/Lukasz/Desktop/Pupils/Pupils/PupilViewController.m:37:62: Use of undeclared identifier 'fetchRequest'

/Users/Lukasz/Desktop/Pupils/Pupils/PupilViewController.m:62:5: Unknown type name 'NSManagedObject'; did you mean 'NSManagedObjectModel'?

/Users/Lukasz/Desktop/Pupils/Pupils/PupilViewController.m:63:67: Receiver type 'NSManagedObjectModel' for instance message is a forward declaration

/Users/Lukasz/Desktop/Pupils/Pupils/PupilViewController.m:64:36: Receiver type 'NSManagedObjectModel' for instance message is a forward declaration 
```

同样在其他文件中：

```
//
//  PupilDetailViewController.m
//  Pupils
//
//  Created by Lukasz Mozdzen on 21.04.2013.
//  Copyright (c) 2013 Lukasz Mozdzen. All rights reserved.
//

#import "PupilDetailViewController.h"

@interface PupilDetailViewController ()

@end

@implementation PupilDetailViewController

- (NSManagedObjectContext *)managedObjectContext {
    NSManagedObjectContext *context = nil;
    id delegate = [[UIApplication sharedApplication] delegate];
    if ([delegate performSelector:@selector(managedObjectContext)]) {
        context = [delegate managedObjectContext];
    }
    return context;
}

- (IBAction)cancel:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (IBAction)save:(id)sender {
    NSManagedObjectContext *context = [self managedObjectContext];

    // Create a new managed object
    NSManagedObject *newPupil = [NSEntityDescription insertNewObjectForEntityForName:@"Pupil" inManagedObjectContext:context];
    [newPupil setValue:self.nameTextField.text forKey:@"name"];
    [newPupil setValue:self.surnameTextField.text forKey:@"surname"];
    [newPupil setValue:self.telephoneTextField.text forKey:@"telephone"];

    NSError *error = nil;
    // Save the object to persistent store
    if (![context save:&error]) {
        NSLog(@"Can't Save! %@ %@", error, [error localizedDescription]);
    }

    [self dismissViewControllerAnimated:YES completion:nil];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

错误日志：

```
/Users/Lukasz/Desktop/Pupils/PupilDetailViewController.m:38:5: Unknown type name 'NSManagedObject'; did you mean 'NSManagedObjectModel'?

/Users/Lukasz/Desktop/Pupils/PupilDetailViewController.m:38:34: Use of undeclared identifier 'NSEntityDescription'; did you mean 'kSecAttrDescription'?

/Users/Lukasz/Desktop/Pupils/PupilDetailViewController.m:38:34: Bad receiver type 'CFTypeRef' (aka 'const void *')

/Users/Lukasz/Desktop/Pupils/PupilDetailViewController.m:39:6: Receiver type 'NSManagedObjectModel' for instance message is a forward declaration

/Users/Lukasz/Desktop/Pupils/PupilDetailViewController.m:40:6: Receiver type 'NSManagedObjectModel' for instance message is a forward declaration

/Users/Lukasz/Desktop/Pupils/PupilDetailViewController.m:41:6: Receiver type 'NSManagedObjectModel' for instance message is a forward declaration

/Users/Lukasz/Desktop/Pupils/PupilDetailViewController.m:45:11: Receiver type 'NSManagedObjectContext' for instance message is a forward declaration 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T09:49:18.610

在使用之前，您需要在包中添加 coredata 框架。

正如你所说，你是 iPhone 开发的新手，我建议你在实现之前参考[coredata 上的苹果文档。](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-09T07:26:45.223

除了在项目设置中添加 Core Data 框架外，您还必须`#import <CoreData/CoreData.h>`在源代码中添加。您可以通过将其`#import`放入项目的 .pch 文件中为整个项目执行一次，该文件通常位于项目树的“支持文件”组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-21T00:09:58.393

问题是，从那时起已经过了一段时间，从 iOS 10 开始，`ManagedObjectContext`已移至`PersistentContainer`属性内部`viewContext`。这也是为什么您需要稍微更改**AppCoda**的代码片段以便它调用上下文的原因#

```
-(NSManagedObjectContext *)managedObjectContext{

    NSManagedObjectContext *context = nil;
    id delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
    // call "persistentContainer" not "managedObjectContext"
    if( [delegate performSelector:@selector(persistentContainer)] ){
        // call viewContext from persistentContainer not "managedObjectContext"
        context = [[delegate persistentContainer] viewContext];
    }

    return context;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T21:24:37.790

```
import CoreData 
```

在“AppDelegate”和“各自的视图控制器”中为我解决了类似的问题。我将 CoreData 添加到现有项目中，因此错过了这个自动导入 CoreData 框架。

用 Swift 3 测试

# iis-7.5 - Active Directory 授权：IIS 与 Visual Studio 开发服务器

> ID：16143432
> 
> 赞同：3
> 
> 时间：2013-04-22T09:17:59.577
> 
> 标签：iis-7.5, windows-authentication, vs-devserver

我有一个使用 Active Directory 授权的 Web 项目（所有控制器都标有`AuthorizeAttribute`）。在 web.config 我有以下身份验证部分：

```
<authentication mode="Windows" />
<authorization>
  <deny users="?" />
</authorization> 
```

问题是：当我在 Visual Studio Development Server 下运行项目时一切正常，它会弹出授权窗口，输入登录名/密码后我可以看到所有站点内容。

但是，当我尝试在 IIS (7.5) 下运行它时，仍然会弹出授权窗口，但登录名/密码总是不正确（看起来它无法访问 AD）。站点配置为使用 Windows 授权。应用程序池使用我的 Windows 登录名/密码运行。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T14:45:04.330

如果您的主机头文件指向 127.0.0.1，则可能是身份验证环回检查。

如果是这种情况，答案已经详细说明了[为什么在 iis 7.5 / windows 7 / 的 asp.net 应用程序上 Windows 身份验证/模拟失败](https://stackoverflow.com/questions/3015434/why-does-windows-authentication-impersonation-fail-on-asp-net-application-with?rq=1)。总之，打开regedit，在HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa中添加一个DWORD DisableLoopbackCheck = 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T12:09:28.600

我遇到了同样的问题，以下解决了我的问题：

1.  选择网站
2.  选择“**功能视图**”。
3.  打开“**身份验证**”部分。注意：我假设您的网站已按照您的上述说明启用了 Windows 身份验证。
4.  选择“ **Windows 身份验证**”
5.  在右侧的“**操作**”部分，单击提供程序。
6.  现在从“ **Providers** ”弹出窗口中选择“ **Negotiate** ”并将其**删除**。
7.  刷新网站并运行

请让我知道它是否适合您。

# sql - 当 DB 操作需要很长时间时，经典 ASP 页面会停止

> ID：16143433
> 
> 赞同：1
> 
> 时间：2013-04-22T09:18:02.170
> 
> 标签：sql, asp-classic

我有一个 ASP 页面，我从中调用 SQL 存储过程。该 SP 正在执行一些繁重的数据库操作，因此有时需要时间。有时可能需要超过 3 分钟。它有时可以正常工作，但有时 ASP 会卡住。即页面只是停止，它不做任何事情。它既没有说数据库操作成功，也不会抛出错误消息。

为什么会这样？我应该在我的页面上设置什么属性以便它等待数据库响应？

再一次问好，

我有更多关于我面临的问题的信息。分析多了，发现问题出在了别的地方。这是场景：

我有一个 ASP 页面说 Base1.asp，这个页面有一个指向弹出窗口的链接，当我点击这个链接时，会打开一个新窗口作为弹出窗口说 pop1.asp。此弹出窗口上的“保存”调用在数据库中执行某些操作的存储过程。在数据库中执行的操作有点耗时（注意这个SP已经足够优化了）。当我在此弹出窗口上点击“保存”时，将调用 SP，执行数据库操作，然后关闭此弹出窗口，并使用 javascript 中的 window.opener.location 参数刷新父页面。这个过程在大多数情况下都能正常工作。

当多个用户说5人同时使用该功能时，发现弹窗无法刷新父页面。我看到数据库操作成功，弹出窗口的代码成功执行，但弹出窗口无法自行关闭并刷新父页面。弹出窗口只是停留在屏幕上。我可以使用窗口右上角的 X 关闭它。

我的问题：

1.  有没有其他方法可以从子窗口重新加载父级？
2.  window.opener.location 是否存在任何已知问题？

另请注意，目前刷新父级和关闭子级的代码是用 JavaScript 函数编写的，该函数在 body 标记的 Onload 事件中调用。

1.  这是调用此函数的正确位置吗？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:40:15.820

如果它只是一个单独的页面超时，我会添加`Server.ScriptTimeout[=NumSeconds]`到违规页面的顶部，如下所述： -

[http://www.w3schools.com/asp/prop_scripttimeout.asp](http://www.w3schools.com/asp/prop_scripttimeout.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:21:31.060

几个问题，首先查询需要很长时间吗？通过重新制定它（添加一个或两个索引）它可以立即发生吗？不是粗鲁，但你所说的“沉重”是什么意思？如果没有，那么我建议您在查询完成或失败时使用 Ajax 调用来更新页面。这些天来做到这一点并不难，那里有很多模型。

# c++ - 如何使用 CMake 和 Eclipse CDT 自动删除构建文件？

> ID：16143435
> 
> 赞同：1
> 
> 时间：2013-04-22T09:18:04.480
> 
> 标签：c++, cmake, eclipse-cdt, rebuild

我将 Eclipse CDT 与 CMake 结合使用，并成功按照[此处](http://www.vtk.org/Wiki/CMake%3aEclipse_UNIX_Tutorial)详述的设置说明进行操作。我使用自定义 make 目标从 Eclipse 中调用 CMake（“创建一个 Make 目标以运行 CMake”）。它在我的源目录的子目录中执行源外构建。

有时我希望 CMake 重建所有内容，因此删除我的构建目录的所有内容以强制 CMake 重建其缓存等。

目前我正在使用项目视图来删除子目录中的所有文件，但这很乏味，我想自动化它。

我尝试使用`rm -rf ./Build/*`命令制作另一个自定义制作目标，但这没有用。它执行没有错误，但没有删除任何文件。

如何通过按一个按钮删除构建子目录中的所有文件（或至少强制 CMake 重建其缓存等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T13:36:50.300

你可以编写一个简单的shell脚本`refresh-cmake.sh`，内容如下

```
#!bin/bash    
rm -rf build
mkdir build
cd build
cmake .. 
```

只需`./refresh-cmake.sh`从您的项目目录中调用它，您就应该一切就绪。对于单击，使用文件浏览器并单击（或双击）shell 脚本的图标。

# batch-file - 批处理 - 删除行范围

> ID：16143437
> 
> 赞同：2
> 
> 时间：2013-04-22T09:18:07.153
> 
> 标签：batch-file

我有一个大文本文件（大约 30,000 行长），我需要从（行号 5-30）中删除一系列行，这可以使用批处理吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:06:38.763

批处理可以做到这一点，但会有性能损失，并且有毒字符可能是一个问题 - 文件的构成可能很重要。

下载 GnuSed 并运行以下命令：

```
sed 5,30d "file.txt" >"file2.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:41:17.140

如果你想要一种简单的方法，你可以使用我的例程，就像编写一个命令一样简单：

```
Call :TEXTMAN SR RANGE_A RANGE_B "Test.txt" 
```

PS：我为你添加了 GetRange 函数 :)

**编辑：**使用 300.000 行的文本文件进行测试，不到一秒钟即可获得结果。

> 更新 2

现在它接受空行，除非 c+ c- 函数。

***文本人.bat***

```
 @Echo OFF

:: TEXT MANIPULATOR ROUTINE v0.5
:: by Elektro H@cker

REM SYNTAX:
::
:: TEXTMAN [ACTION] [LINE(S)] [FILE] [TEXT]
::
:: * [LINE(S)] parameter is Optional for some actions
:: * [TEXT] parameter is Optional for some actions

REM ACTIONS:
::
::  AB  = ADD_BEGINNING      * Add text to the beginning of a line.
::  AE  = ADD_ENDING         * Add text to the end of a line.
::  E   = ERASE              * Delete a line.
::  I   = INSERT             * Add a empty line (Or a line with text).
::  RL  = REPLACE_LINE       * Replace a entire line.
::  RS  = REPLACE_STRING     * Replace word from line.
::  RSA = REPLACE_STRING_ALL * Replace word from all lines.
::  C+  = CHARACTER_PLUS     * Delete the first "X" characters from all lines.
::  C-  = CHARACTER_LESS     * Delete the last  "X" characters from all lines.
::  L+  = LINE_PLUS          * Cut the first "X" amount of lines.
::  L-  = LINE_LESS          * Cut the last  "X" amount of lines.
::  GL  = GET_LINE           * Delete all except "X" line.
::  GR  = GET_RANGE          * Delete all except "X" range of lines.

REM EXAMPLES:
::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::
::                                                                         ::
:: Delete the line 3                                                       ::
:: Call :TEXTMAN E 3 "Test.txt"                                            ::
::                                                                         ::                                                                        
:: Add a string to the beginning of line 3                                 ::
:: Call :TEXTMAN AL 3 "Test.txt" "Elektro H@cker"                          ::
::                                                                         ::                                                                      
:: Add a string to the end of line 3\.                                      ::
:: Call :TEXTMAN AR 3 "Test.txt" "Elektro H@cker"                          ::
::                                                                         ::                                                                       
:: Add a empty line at line 3\.                                             ::
:: Call :TEXTMAN I 3 "Test.txt"                                            ::
::                                                                         ::                                                                       
:: Add a line with a word at line 3\.                                       ::
:: Call :TEXTMAN I 3 "Test.txt" "Elektro H@cker"                           ::
::                                                                         ::    
:: Replace the line 3 with "Elektro H@cker".                               ::
:: Call :TEXTMAN RL 3 "Test.txt" "Elektro H@cker"                          ::
::                                                                         ::
:: Replace the words "Elektro" to "H@cker" in line 3\.                      ::
:: Call :TEXTMAN RS 3 "Test.txt" "Elektro" "H@cker"                        ::
::                                                                         ::
:: Replace the words "Elektro" to "H@cker" in all lines.                   ::
:: Call :TEXTMAN RSA "Test.txt" "Elektro" "H@cker"                         ::
::                                                                         ::
:: Delete the first 3 characters in all lines.                             ::
:: Call :TEXTMAN C+ 3 "Test.txt"                                           ::
::                                                                         ::
:: Delete the last 3 characters in all lines.                              ::
:: Call :TEXTMAN C- 3 "Test.txt"                                           ::
::                                                                         ::
:: Delete the first 3 lines.                                               ::
:: Call :TEXTMAN L+ 3 "Test.txt"                                           ::
::                                                                         ::
:: Delete the last 3 lines.                                                ::
:: Call :TEXTMAN L- 3 "Test.txt"                                           ::
::                                                                         ::
:: Delete all except the line number 3\.                                    ::
:: Call :TEXTMAN SL 3 "Test.txt"                                           ::
::                                                                         ::
:: Delete all except the 3 to 9 range of lines.                            ::
:: Call :TEXTMAN SR 3 9 "Test.txt"                                         ::
::                                                                         ::
:: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: :: ::

:TEXTMAN
(SET /A "A=0", "LINE=0", "TOTAL_LINES=0")  &  (CALL :%~1 %* || (ECHO Invalid parameter & Exit /B 1)) & (GOTO:EOF)
:AB
(For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((Echo %%B)>> "%~3.NEW")) ELSE (if "%%B" EQU "" ((Echo %~4)>> "%~3.NEW") ELSE ((Echo %~4%%B)>> "%~3.NEW"))"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:AE
(For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((Echo %%B)>> "%~3.NEW")) ELSE ((Echo %%B%~4)>> "%~3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:E
(For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((Echo %%B) >> "%~3.NEW"))"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:I
(For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "IF     "%%LINE%%" EQU "%~2" (IF NOT "%~4" EQU "" ((Echo %~4) >> "%~3.NEW") ELSE (Echo+>> "%~3.NEW"))" & (if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((Echo %%B)>> "%~3.NEW"))))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RL
(For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((Echo %%B)>> "%~3.NEW")) ELSE ((Echo %~4)>> "%~3.NEW")"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RS
(For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "IF NOT "%%LINE%%" EQU "%~2" (if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((Echo %%B)>> "%~3.NEW")) ELSE (CALL SET "STRING=%%B" &&     (if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((CALL ECHO %%STRING:%~4=%~5%%)>> "%~3.NEW")))"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:RSA
(For /F "tokens=1* delims=]" %%A in ('type "%~2" ^| find /n /v ""') DO (CALL SET "STRING=%%B" && (if "%%B" EQU "" (Echo+>> "%~2.NEW") ELSE ((CALL ECHO %%STRING:%~3=%~4%%)>>"%~2.NEW")))) && (CALL :RENAMER "%~2") & (GOTO:EOF)
:C+
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~%~2%% >>      "%~3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:C-
(For /F "usebackq tokens=*" %%@ in ("%~3") DO (Call Set   "LINE=%%@" && (CALL ECHO %%LINE:~0,-%~2%% >>   "%~3.NEW"))) && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L+
(Call SET /A "A=%~2") && (Call TYPE "%~3" |@MORE +%%A%% > "%~3.NEW") && (CALL :RENAMER "%~3") & (GOTO:EOF)
:L-
(For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (CALL SET /A "TOTAL_LINES+=1")) & (CALL SET /A "TOTAL_LINES-=%~2-1") & (For /F "tokens=1* delims=]" %%A in ('type "%~3" ^| find /n /v ""') DO (Call Set /A "LINE+=1" & Call echo "%%LINE%%"|@FIND "%%TOTAL_LINES%%" >NUL) && (CALL :RENAMER "%~3" && GOTO:EOF) || (Echo %%B >> "%~3.NEW"))
:GL
(Call SET /A "A=%~2" && Call SET /A "A-=1") && (Call TYPE "%~3" |@MORE +%%A%% > "%temp%\getline.tmp") && (For /F "tokens=1* delims=]" %%A in ('type "%temp%\getline.tmp" ^| find /n /v ""') DO ((if "%%B" EQU "" (Echo+>> "%~3.NEW") ELSE ((Echo %%B)> "%~3.NEW"))) && ((CALL :RENAMER "%~3") & (GOTO:EOF))) 
:GR
(For /F "tokens=1* delims=]" %%A in ('type "%~4" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "(IF "%%LINE%%" GEQ "%~2" IF "%%LINE%%" LEQ "%~3" (if "%%B" EQU "" (Echo+>> "%~4.NEW") ELSE ((Echo %%B)>> "%~4.NEW"))) && (IF "%%LINE%%" EQU "%~3" Exit /B 1)" || ((CALL :RENAMER "%~4") & (GOTO:EOF)))))

:RENAMER
(REN "%~1" "%~nx1.BAK") & (MOVE /Y "%~1.BAK" "%TEMP%\" >NUL) & (REN "%~1.NEW" "%~nx1") & (GOTO:EOF) 
```

**更新：**

您只需要使用我的例程中的这部分代码：

```
@Echo OFF

Call :TEXTMAN 5 30 "TextFile.txt"
Pause&Exit

:TEXTMAN
(SET /A "A=0", "LINE=0", "TOTAL_LINES=0")  &  (CALL :%~1 %* || (ECHO Parametro incorrecto & Exit /B 1)) & (GOTO:EOF)
:GR
(For /F "tokens=1* delims=]" %%A in ('type "%~4" ^| find /n /v ""') DO (Call Set /A "LINE+=1" && (CMD /C "(IF "%%LINE%%" GEQ "%~2" IF "%%LINE%%" LEQ "%~3" (if "%%B" EQU "" (Echo+>> "%~4.NEW") ELSE ((Echo %%B)>> "%~4.NEW"))) && (IF "%%LINE%%" EQU "%~3" Exit /B 1)" || ((CALL :RENAMER "%~4") & (GOTO:EOF)))))
:RENAMER
(REN "%~1" "%~nx1.BAK") & (MOVE /Y "%~1.BAK" "%TEMP%\" >NUL) & (REN "%~1.NEW" "%~nx1") & (GOTO:EOF) 
```

或者你可以一步一步做：

如果我们想要 X 到 Y 的范围（例如 5 到 10），那么......

1 - 将文本文件写入剪切前 5 行的 TempFile：

2 - 在 TempFile 中执行循环以开始将行写入另一个文本文件，然后在到达“Y”行时停止。

```
 @Echo OFF

    Setlocal enabledelayedexpansion

    Set /A "X=5"
    Set /A "Y=10"
    Set /A "Z=%Y%-%X%"

    (Type "Test.txt" | MORE +%X%)>"TempFile.txt"

    (For /F "Usebackq Tokens=*" %%# in ("TempFile.txt") Do (
        Set /A Line+=1
        If not !Line! GTR %Z% (Echo %%#) Else (Exit)
    ))>"MyRange.txt" 
```

# windows - 如何修复 Matlab 中 10800x10800 矩阵的内存不足错误？

> ID：16143438
> 
> 赞同：1
> 
> 时间：2013-04-22T09:18:09.367
> 
> 标签：windows, matlab, out-of-memory

情况：如何处理“内存不足”错误。

基本上问题是我使用 10800x10800 矩阵。我在 32 位 Windows 系统上。执行此操作时出现内存不足错误：

```
a=zeros(10800,10800); 
```

这是我得到的记忆：

```
>> memory
Maximum possible array:    393 MB (4.120e+08 bytes) *
Memory available for all arrays:   1097 MB (1.150e+09 bytes) **
Memory used by MATLAB:    639 MB (6.697e+08 bytes)
Physical Memory (RAM):    895 MB (9.387e+08 bytes)

*  Limited by contiguous virtual address space available.
** Limited by virtual address space available. 
```

系统：Windows 32 位

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:23:38.990

矩阵存储在一个连续的内存块中。在处理非常大的矩阵时，这些块的分配可能会出现问题（仅仅是因为可能找不到足够大的空闲内存块）。

由于您没有提供有关代码的任何详细信息，因此我只能建议规避此问题的方法：

1.  如果您的矩阵包含很多零，请将其表示为[稀疏矩阵](http://www.mathworks.com/help/matlab/ref/sparse.html)。它通过不存储零使用更少的内存来存储这样的矩阵。

2.  将你的矩阵分解成更小的块，并相应地修改你的算法。

3.  如果它们可以容纳您正在使用的值的范围，请使用更有效的数据类型而不是双精度（此建议归功于 Amro 和 Rody）。考虑使用[单精度](http://www.mathworks.com/help/matlab/ref/single.html)或[整数数据类型](http://www.mathworks.com/help/matlab/matlab_prog/integers.html)（并注意无符号整数！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:22:24.837

如果矩阵的很大一部分将保持为零，请使用[稀疏矩阵](http://www.mathworks.se/help/matlab/ref/sparse.html)

```
S = sparse(10800, 10800) 
```

如果不是这种情况（矩阵很密集），您有以下选项：

*   使用几个较小的矩阵部分解决问题。
*   使用具有大量内存和[Matlab 64 位](http://www.mathworks.se/support/solutions/en/data/1-YVO5H/)的计算机来使用大型密集矩阵。

# jquery - 如何使用jquery动态创建radibuttonlist的计数

> ID：16143439
> 
> 赞同：1
> 
> 时间：2013-04-22T09:18:10.767
> 
> 标签：jquery, asp.net, radiobuttonlist

你如何获得动态创建的 Asp.Net Radiobuttonlist 的计数？

这是我的单选按钮列表

```
<asp:RadioButtonList ID="rbl_poll" runat="server"></asp:RadioButtonList> 
```

我试过这个但没有用

```
if ($("#<%=rbl_poll.clientId %>").length == 0) {
   $("#div_poll_box").hide();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:25:55.153

`$("#rbl_poll").length` *should* always be 1 since there *should* only be one element with the **unique** id `rbl_poll`.

You need to instead select the [*descendent*](http://www.w3.org/TR/css3-selectors/#descendant-combinators) elements inside the `id="rbl_poll"` element, for example with

```
if ($('#rbl_poll input[type="radio"]') === 0) {
    $('#div_poll_box').hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:23:55.403

尝试选择列表中的单选按钮项目：

```
if ($("#rbl_poll input:radio").length == 0) {
   $("#div_poll_box").hide();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:24:01.367

id 属性为 HTML 元素指定一个唯一的 id（该值在 HTML 文档中必须是唯一的）。

您可以使用 id(ID="rbl_poll") 的 class(class="rbl_poll") 插入

```
<asp:RadioButtonList class="rbl_poll" runat="server"></asp:RadioButtonList> 
```

并更改脚本

```
if ($(".rbl_poll").length == 0) {
   $("#div_poll_box").hide();
} 
```

# r - 将长数据帧转换为宽数据帧

> ID：16143441
> 
> 赞同：3
> 
> 时间：2013-04-22T09:18:14.703
> 
> 标签：r, dataframe, reshape2

我正在尝试将长数据形式转换为 R 中的宽数据形式。例如，我有以下数据框：

```
a = rep(c("A","B","C","D"),4)
b = rep(c("COL1","COL2","COL3","COL4"),4)
val = 101:116
df = as.data.frame(cbind(a,b,val))
df 
```

我希望看到结果为：

```
row <- as.list(levels(df$a))
col <- as.list(levels(df$b))

test <- data.frame()

i = 1

  for (j in 1:4) {
    for(k in 1:4){
      test[j,k]  =   df$val[i]
      i = i + 1 
    }
  }

colnames(test) <- c("COL1","COL2","COL3","COL4")
rownames(test) <- c("A","B","C","D")
test 
```

如果您能使用一些方便的功能提出一个优雅的解决方案，将不胜感激。谢谢，卡西姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:24:18.443

使用`unstack`：

```
df.out <- unstack(df, val ~ b)
rownames(df.out) <- unique(df$a) 
```

使用`reshape2`，它需要一些技巧来获取一`id`列，因为您的标识符不能*唯一地*标识值。

```
dcast(transform(df, id=rep(1:4, each=4)), id ~ b, value.var="val") 
```

然后，您可以类似地添加行名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T11:17:58.947

如果你的 id 列真的很独特，你可以使用 reshape

```
reshape(data=df, direction = "wide", idvar = "a", timevar = "b", v.names = "val") 
```

但由于它们不是独一无二的，以下内容将带您上路。

```
df$fakeid <- rep(1:4, each=4)
reshape(data=df, direction = "wide", idvar = "fakeid", drop = "a", timevar = "b", v.names = "val") 
```

# r - 数据帧的减法运算

> ID：16143445
> 
> 赞同：23
> 
> 时间：2013-04-22T09:18:25.443
> 
> 标签：r, set, dataframe

我有 2 个数据框 `df1`和`df2`.

```
df1 <- data.frame(c1=c("a","b","c","d"),c2=c(1,2,3,4) )
df2 <- data.frame(c1=c("c","d","e","f"),c2=c(3,4,5,6) )

> df1
  c1 c2
1  a  1
2  b  2
3  c  3
4  d  4

> df2
  c1 c2
1  c  3
2  d  4
3  e  5
4  f  6 
```

我需要对这两个数据帧进行设置操作。我使用`merge(df1,df2,all=TRUE)`and`merge(df1,df2,all=FALSE)`方法来获取这些数据帧的并集和交集，并得到所需的输出。获得这些数据帧的负数的功能是什么，即一个数据帧上存在的所有位置，但另一个数据帧上不存在？我需要以下输出。

```
 c1 c2
1  a  1
2  b  2 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-22T09:58:45.997

我记得几个月前遇到过这个*确切的问题。*设法筛选了我的 Evernote 单行字。

注意：这*不是*我的解决方案。归功于写它的人（我目前似乎找不到）。

如果您不担心，`rownames`那么您可以这样做：

```
df1[!duplicated(rbind(df2, df1))[-seq_len(nrow(df2))], ]
#   c1 c2
# 1  a  1
# 2  b  2 
```

* * *

**编辑：**一个`data.table`解决方案：

```
dt1 <- data.table(df1, key="c1")
dt2 <- data.table(df2)
dt1[!dt2] 
```

或更好的单线（来自 v1.9.6+）：

```
setDT(df1)[!df2, on="c1"] 
```

`df1`这将返回where`df2$c1`与 不匹配的所有行`df1$c1`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-22T09:39:59.213

我更喜欢`sqldf`包：

```
require(sqldf)
sqldf("select * from df1 except select * from df2")

##   c1 c2
## 1  a  1
## 2  b  2 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T09:31:09.120

您可以创建标识符列作为子集：

例如

```
df1 <- data.frame(c1=c("a","b","c","d"),c2=c(1,2,3,4), indf1 = rep("Y",4) )
df2 <- data.frame(c1=c("c","d","e","f"),c2=c(3,4,5,6),indf2 = rep("Y",4) )
merge(df1,df2)
#  c1 c2 indf1 indf2
#1  c  3     Y     Y
#2  d  4     Y     Y

bigdf <- merge(df1,df2,all=TRUE)
#  c1 c2 indf1 indf2
#1  a  1     Y  <NA>
#2  b  2     Y  <NA>
#3  c  3     Y     Y
#4  d  4     Y     Y
#5  e  5  <NA>     Y
#6  f  6  <NA>     Y 
```

然后按照您的意愿进行子集化：

```
 bigdf[is.na(bigdf$indf1) ,]
#  c1 c2 indf1 indf2
#5  e  5  <NA>     Y
#6  f  6  <NA>     Y

 bigdf[is.na(bigdf$indf2) ,]  #<- output you requested those not in df2
#  c1 c2 indf1 indf2
#1  a  1     Y  <NA>
#2  b  2     Y  <NA> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-06T09:00:49.190

我认为最简单的解决方案是使用 dplyr (tidyverse)。

```
require(tidyverse)
anti_join(df1, df2) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-06T17:36:31.900

[https://stackoverflow.com/a/16144262/2055486](https://stackoverflow.com/a/16144262/2055486)的一个问题是它假设两个数据框都没有重复的行。以下函数消除了该限制，也适用于 x 或 y 中的任意用户定义列。

`duplicated.data.frame`该实现使用与使用分隔符将列连接在一起的实现类似的想法。`duplicated.data.frame`使用`"\r"`，如果条目具有嵌入的`"\r"`字符，这可能会导致冲突。这使用了[ASCII 记录分隔符](http://www.asciitable.com/) `"\30"`，它出现在输入数据中的机会要低得多。

```
setdiff.data.frame <- function(x, y,
    by = intersect(names(x), names(y)),
    by.x = by, by.y = by) {
  stopifnot(
    is.data.frame(x),
    is.data.frame(y),
    length(by.x) == length(by.y))

  !do.call(paste, c(x[by.x], sep = "\30")) %in% do.call(paste, c(y[by.y], sep = "\30"))
}

# Example usage
# remove all 4 or 6 cylinder 4 gear cars or 8 cylinder 3 gear rows
to_remove <- data.frame(cyl = c(4, 6, 8), gear = c(4, 4, 3))
mtcars[setdiff.data.frame(mtcars, to_remove), ]
#>                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#> Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
#> Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
#> Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#> Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
#> Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
#> Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
#> Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
#> Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8

# with differing column names
to_remove2 <- data.frame(a = c(4, 6, 8), b = c(4, 4, 3))
mtcars[setdiff.data.frame(mtcars, to_remove2, by.x = c("cyl", "gear"), by.y = c("a", "b")), ]
#>                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
#> Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
#> Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
#> Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
#> Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
#> Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
#> Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
#> Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
#> Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T10:55:25.743

您可以像这样检查列和子集中的值（只需添加另一个解决方案）：

```
na.omit( df1[ sapply( 1:ncol(df1) , function(x) ! df1[,x] %in% df2[,x] ) , ] )
#  c1 c2
#1  a  1
#2  b  2 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T09:34:40.460

如果您不打算使用 中的任何实际数据`d2`，那么您根本不需要`merge`：

```
df1[!(df1$c1 %in% df2$c1), ] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-06T02:39:25.213

您可以`dplyr::setdiff`轻松使用

```
dplyr::setdiff(iris, iris[iris$Sepal.Length >6,])

   Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1           5.1         3.5          1.4         0.2     setosa
2           4.9         3.0          1.4         0.2     setosa
3           4.7         3.2          1.3         0.2     setosa
4           4.6         3.1          1.5         0.2     setosa
5           5.0         3.6          1.4         0.2     setosa
6           5.4         3.9          1.7         0.4     setosa
7           4.6         3.4          1.4         0.3     setosa
8           5.0         3.4          1.5         0.2     setosa
9           4.4         2.9          1.4         0.2     setosa
10          4.9         3.1          1.5         0.1     setosa
11          5.4         3.7          1.5         0.2     setosa
12          4.8         3.4          1.6         0.2     setosa
13          4.8         3.0          1.4         0.1     setosa
14          4.3         3.0          1.1         0.1     setosa
15          5.8         4.0          1.2         0.2     setosa
16          5.7         4.4          1.5         0.4     setosa
17          5.4         3.9          1.3         0.4     setosa
18          5.1         3.5          1.4         0.3     setosa
19          5.7         3.8          1.7         0.3     setosa
20          5.1         3.8          1.5         0.3     setosa
21          5.4         3.4          1.7         0.2     setosa
22          5.1         3.7          1.5         0.4     setosa
23          4.6         3.6          1.0         0.2     setosa
24          5.1         3.3          1.7         0.5     setosa
25          4.8         3.4          1.9         0.2     setosa
26          5.0         3.0          1.6         0.2     setosa
27          5.0         3.4          1.6         0.4     setosa
28          5.2         3.5          1.5         0.2     setosa
29          5.2         3.4          1.4         0.2     setosa
30          4.7         3.2          1.6         0.2     setosa
31          4.8         3.1          1.6         0.2     setosa
32          5.4         3.4          1.5         0.4     setosa
33          5.2         4.1          1.5         0.1     setosa
34          5.5         4.2          1.4         0.2     setosa
35          4.9         3.1          1.5         0.2     setosa
36          5.0         3.2          1.2         0.2     setosa
37          5.5         3.5          1.3         0.2     setosa
38          4.9         3.6          1.4         0.1     setosa
39          4.4         3.0          1.3         0.2     setosa
40          5.1         3.4          1.5         0.2     setosa
41          5.0         3.5          1.3         0.3     setosa
42          4.5         2.3          1.3         0.3     setosa
43          4.4         3.2          1.3         0.2     setosa
44          5.0         3.5          1.6         0.6     setosa
45          5.1         3.8          1.9         0.4     setosa
46          4.8         3.0          1.4         0.3     setosa
47          5.1         3.8          1.6         0.2     setosa
48          4.6         3.2          1.4         0.2     setosa
49          5.3         3.7          1.5         0.2     setosa
50          5.0         3.3          1.4         0.2     setosa
51          5.5         2.3          4.0         1.3 versicolor
52          5.7         2.8          4.5         1.3 versicolor
53          4.9         2.4          3.3         1.0 versicolor
54          5.2         2.7          3.9         1.4 versicolor
55          5.0         2.0          3.5         1.0 versicolor
56          5.9         3.0          4.2         1.5 versicolor
57          6.0         2.2          4.0         1.0 versicolor
58          5.6         2.9          3.6         1.3 versicolor
59          5.6         3.0          4.5         1.5 versicolor
60          5.8         2.7          4.1         1.0 versicolor
61          5.6         2.5          3.9         1.1 versicolor
62          5.9         3.2          4.8         1.8 versicolor
63          6.0         2.9          4.5         1.5 versicolor
64          5.7         2.6          3.5         1.0 versicolor
65          5.5         2.4          3.8         1.1 versicolor
66          5.5         2.4          3.7         1.0 versicolor
67          5.8         2.7          3.9         1.2 versicolor
68          6.0         2.7          5.1         1.6 versicolor
69          5.4         3.0          4.5         1.5 versicolor
70          6.0         3.4          4.5         1.6 versicolor
71          5.6         3.0          4.1         1.3 versicolor
72          5.5         2.5          4.0         1.3 versicolor
73          5.5         2.6          4.4         1.2 versicolor
74          5.8         2.6          4.0         1.2 versicolor
75          5.0         2.3          3.3         1.0 versicolor
76          5.6         2.7          4.2         1.3 versicolor
77          5.7         3.0          4.2         1.2 versicolor
78          5.7         2.9          4.2         1.3 versicolor
79          5.1         2.5          3.0         1.1 versicolor
80          5.7         2.8          4.1         1.3 versicolor
81          5.8         2.7          5.1         1.9  virginica
82          4.9         2.5          4.5         1.7  virginica
83          5.7         2.5          5.0         2.0  virginica
84          5.8         2.8          5.1         2.4  virginica
85          6.0         2.2          5.0         1.5  virginica
86          5.6         2.8          4.9         2.0  virginica
87          6.0         3.0          4.8         1.8  virginica
88          5.9         3.0          5.1         1.8  virginica 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-31T18:19:16.840

使用基本 R 的另一种方法（包括保留行名并检查所有行）是双重使用`duplicated()`：

```
df1 <- data.frame(c1=c("a","b","c","d"),c2=c(1,2,3,4) )
df2 <- data.frame(c1=c("c","d","e","f"),c2=c(3,4,5,6) )

all <- rbind(df1, df2)
all[!duplicated(all) & !duplicated(all, fromLast = TRUE), ] 
```

# python - 数据请求字符串python

> ID：16143448
> 
> 赞同：0
> 
> 时间：2013-04-22T09:18:31.787
> 
> 标签：python, dictionary, response

在站点上发布带有数据的请求后

```
f = urllib.request.urlopen(request,data) 
```

我得到回复，然后

```
res = f.responce.read().decode() 
```

我得到一个`type(res) <class string>`打印的类型：

```
[
  {
    "example": "174 55",
    "example": "example",
    "example": "example",
    "example": "",
    "example": false,
    "example": null,    
  },
  {
    "example": "174 55",
    "example": "example",
    "example": "example",
    "example": "",
    "example": false,
    "example": null,  
  }
] 
```

有没有办法立即将其作为字典列表获取，或者有一种简单的方法将其转换为字典列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:23:40.130

这是json数据。

使用内置`json`模块：

```
import json
...
res = f.responce.read().decode()
data = json.loads(res) 
```

# android - 在 android 2.1(api 7) 上使用谷歌地图 api

> ID：16143451
> 
> 赞同：0
> 
> 时间：2013-04-22T09:18:49.673
> 
> 标签：android, google-maps

我想知道如何在我的应用程序中使用google map api。我发现google add on libraies for android 2.1 其中包含maps.jar。但是google 说android 2.2+ 支持maps api。所以我想知道是否我是否可以使用地图 API。如果可以，请提供任何示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:38:10.173

您不能在 2.1 上使用 Google Maps Android API v2。

你可以：

1.  继续使用 Google Maps Android API v1（如果您有旧地图的密钥 - 您不能请求新密钥）
2.  使用 Google Maps API v3 - 在 WebView 中嵌入 javascript API
3.  通过 Intent 运行 Google Maps 应用程序
4.  使用其他地图提供商，例如[osmdroid](http://code.google.com/p/osmdroid/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:36:18.070

虽然我没有亲自为自己尝试过，但如果他们说这不起作用，我会相信他们所说的话。

我相信这是由于Eclair 上[缺乏对 OpenGL 2.0 的支持](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/XpP2CN2qELE)

但只是为了您的考虑，实际上已经没有 2.1 设备了。您可以安全地将您的应用设置为 2.2+，并且不会失去任何潜在用户。 [http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

# android - 从 SQLite 数据库 Android 获取数据

> ID：16143452
> 
> 赞同：0
> 
> 时间：2013-04-22T09:18:51.743
> 
> 标签：android, arraylist, android-sqlite

我正在尝试从我的资产文件夹中访问 SQLite 数据库中的数据。数据库的名称是“fruits.sql”。

第一的：

```
public class ArticlesTable {        
    public String TABLE_NAME="fruit";
    public String ORANGE="orange";
} 
```

然后我的模态

```
public class Article {
    public String orange;
} 
```

最后我的 DBHelper 类是

```
public class DBHelper {

    private final String DATABASE_PATH = "/data/data/mon.immeuble/databases/";
    private final String DATABASE_NAME = "frui.sqlite";
    private final static int DATABASE_VERSION = 1;

    private Context context;
    private SQLiteDatabase database = null;
    OpenHelper openHelper=null;
    StringBuilder query =null;
    Cursor cursor=null;

    ArticlesTable articlesTable=new ArticlesTable();

    public static DBHelper dbHelper = null;

    private DBHelper(Context context) {

    this.context = context;
    openHelper = new OpenHelper(this.context);
    this.database = openHelper.getWritableDatabase();

    try {

        createDataBase();
        openDataBase();

    } catch (IOException e) {

        e.printStackTrace();
    }

    }
    public static DBHelper getInstance(Context context)
    {
    if(dbHelper == null)
        dbHelper = new DBHelper(context);
    return dbHelper;
    }

   public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DATABASE_PATH + DATABASE_NAME;
    database = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException
    {
    openHelper.getReadableDatabase();
    if(getDBAlreadyCopiedToDeviceOnceFlag(context) == false){
        try {
        copyDataBase();
        setDBAlreadyCopiedToDeviceOnceFlag(context);
        } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Error copying database");
        }
    }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    @SuppressWarnings("unused")
    private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DATABASE_PATH + DATABASE_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

    }catch(SQLiteException e){

        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();

    }

    return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

    //Open your local db as the input stream
    InputStream myInput = context.getAssets().open(DATABASE_NAME);

    // Path to the just created empty db
    String outFileName = DATABASE_PATH + DATABASE_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

    }

    private class OpenHelper extends SQLiteOpenHelper
    {

        @SuppressWarnings("unused")
        SQLiteStatement insertStmt;

        public OpenHelper(Context context)
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {
            // TODO Auto-generated method stub
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
        {
            // TODO Auto-generated method stub
        }
    }

    public void setDBAlreadyCopiedToDeviceOnceFlag(Context ctx)
    {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putBoolean("isDBAlreadyCopiedToDeviceOnce", true);
        editor.commit();
    }

    public boolean getDBAlreadyCopiedToDeviceOnceFlag(Context ctx)
    {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);
        boolean isDBAlreadyCopiedToDeviceOnce = prefs.getBoolean("isDBAlreadyCopiedToDeviceOnce", false);
        return isDBAlreadyCopiedToDeviceOnce; 
    }

    public ArrayList<Article> getArticlesList()
    {
        ArrayList<Article> items=new ArrayList<Article>();

        try
        {
            query = new StringBuilder();
            query.append("select * from "+articlesTable.TABLE_NAME+" ORDER BY nom DESC");

            cursor=this.database.rawQuery(query.toString(),null);
            if (cursor.moveToFirst())
            {
                do
                {
                    Article a=new Article();

                    a.orange=cursor.getString(cursor.getColumnIndex(articlesTable.FRUIT));

                    items.add(a);

                    System.out.println("added_items:"+items);
                }
                while (cursor.moveToNext());
            }
            if (cursor != null && !cursor.isClosed())
            {
            cursor.close();

            }
        }
        catch(SQLiteException e){

            e.printStackTrace();
            return null;
        }

        return items;
    }
    //--here
    public boolean addArticle(Article a){
        this.database.beginTransaction();

        try{

            ContentValues contentValues=new ContentValues();

            contentValues.put(articlesTable.FRUIT, a.fruit);

            this.database.insert(articlesTable.TABLE_NAME,null,contentValues);
        this.database.setTransactionSuccessful();
        }catch(Exception e){
            e.printStackTrace();
            return false;
        }finally{
            this.database.endTransaction();
        }
        return true;
    } 
```

和我的全局类来访问数据

```
public class Globals {
    public static DBHelper dbHelper;

    public static ArrayList<Article> articles;

    public static void copyArticles(ArrayList<Article> articlesList) {
        if(articlesList!=null){

            if(articles==null)

                articles=new ArrayList<Article>();
            else
                articles.clear();

            for(Article a: articlesList)
                articles.add(a);
        }
    } 
```

但是，当我在创建活动中调用一个字段时，使用

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fruit);
System.out.println(Globals.articles.get(0).adresse1);
    } 
```

我得到一个空指针异常。

**更新**

Alex G. 现在解决了这个问题，我的日志中出现了这个错误

```
04-22 13:43:52.375: E/AndroidRuntime(5015): FATAL EXCEPTION: main
04-22 13:43:52.375: E/AndroidRuntime(5015): java.lang.Error: Error copying database
04-22 13:43:52.375: E/AndroidRuntime(5015):     at .db.DBHelper.createDataBase(DBHelper.java:82)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at .db.DBHelper.<init>(DBHelper.java:47)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at .db.DBHelper.getInstance(DBHelper.java:59)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at .utils.Globals.init(Globals.java:17)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at .utils.map.Map.onCreate(Map.java:71)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.ActivityThread.startActivityNow(ActivityThread.java:1491)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:657)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.widget.TabHost.setCurrentTab(TabHost.java:329)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at .TabSample.setProximite(TabSample.java:567)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at .TabSample.onCreate(TabSample.java:81)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.os.Looper.loop(Looper.java:130)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at java.lang.reflect.Method.invoke(Method.java:507)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-22 13:43:52.375: E/AndroidRuntime(5015):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:39:07.950

您正在尝试从 ArrayList 获取项目`articles`，但您没有在任何地方对其进行初始化。在不评论您的类结构的情况下，您至少需要初始化您的 dbhelper 和您的数组列表：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fruit);

    Globals.init(this);

    System.out.println(Globals.articles.get(0).adresse1);
} 
```

注意添加调用`init`. 接着：

```
public class Globals {
    public static DBHelper dbHelper;

    public static ArrayList<Article> articles;

    public static void init(Context ctx) {
        DBHelper helper = DBHelper.getInstance(ctx);
        copyArticles(helper.getArticlesList());
    }

    public static void copyArticles(ArrayList<Article> articlesList) {
        if(articlesList!=null){

            if(articles==null)

                articles=new ArrayList<Article>();
            else
                articles.clear();

            for(Article a: articlesList)
                articles.add(a);
        }
    }
} 
```

同样，我不会对您的代码结构方式发表任何评论，而只是指出您遇到错误的原因。

# python - 在 Tkinter 中拖放？

> ID：16143460
> 
> 赞同：9
> 
> 时间：2013-04-22T09:19:08.113
> 
> 标签：python, python-3.x, drag-and-drop, tkinter

在 tkinter 中完成拖放的正确/官方/适当/推荐方式是什么？我的文档第 24.1.1 节包括：

> Tkdnd 对 Tkinter 的拖放支持。这是实验性的，当它被 Tk DND 替换时应该被弃用。

但我找不到其他*官方*文档。Tkinter 是否有拖放支持？这取决于版本吗？这是否还没有包含在 tk(tcl) 中，然后会过滤到 tkinter？

我应该强调我正在谈论不同应用程序之间的拖放，并且我目前正在使用 python 2（尽管任何依赖于 python 3 的解决方案仍然很有趣）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T11:15:27.007

Tkinter 没有对应用程序之间拖放的内置支持。Tkdnd 是，AFAIK，在不自己编写低级代码的情况下完成它的唯一方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-25T15:27:09.377

查看[这个模块](https://github.com/akheron/cpython/blob/master/Lib/tkinter/dnd.py)，使用 TK 和 Python 3 进行 D&D。

# c - 在运行时检查机器指令

> ID：16143461
> 
> 赞同：-1
> 
> 时间：2013-04-22T09:19:11.377
> 
> 标签：c, linux, assembly, elf

我正在尝试在运行时打印函数的操作码。为此，我编写了一个 C 程序，它应该在该地址打印地址和十六进制数据。这里它尝试打印 mul 函数的内容。

```
#include <stdio.h>

int add(int a, int b)
{
    printf("Adding..\n");
    return a+b;
}

int sub(int a, int b)
{
    printf("Subtracting...\n");
    return a-b;
}

int mul(int a, int b)
{
    printf("Multiplying...\n");
    return add(a,b) * sub(a,b);
}

int main()
{
    char *ptr;
    int i;
    char a;

    int (*func)(int,int);

    mul(4,3);
    func = &mul;
    ptr = (char *)func;

    do
    {
        a = *ptr;
        printf("%p %x\n",ptr,a);
        ptr++;
    }while (a != 0xffffffc3); 
    //op code for ret is c3, which specifies end of function
    //however, i am not certain why it opcode is being padded by 0xffffff
} 
```

它给出的输出是

```
Multiplying...
Adding..
Subtracting...
0x4005a4 55
0x4005a5 48
0x4005a6 ffffff89
0x4005a7 ffffffe5
0x4005a8 53
0x4005a9 48
0x4005aa ffffff83
0x4005ab ffffffec
0x4005ac 18
0x4005ad ffffff89
0x4005ae 7d
0x4005af ffffffec
0x4005b0 ffffff89
0x4005b1 75
0x4005b2 ffffffe8
0x4005b3 ffffffbf
0x4005b4 c
0x4005b5 7
0x4005b6 40
0x4005b7 0
0x4005b8 ffffffe8
0x4005b9 63
0x4005ba fffffffe
0x4005bb ffffffff
0x4005bc ffffffff
0x4005bd ffffff8b
0x4005be 55
0x4005bf ffffffe8
0x4005c0 ffffff8b
0x4005c1 45
0x4005c2 ffffffec
0x4005c3 ffffff89
0x4005c4 ffffffd6
0x4005c5 ffffff89
0x4005c6 ffffffc7
0x4005c7 ffffffe8
0x4005c8 ffffff90
0x4005c9 ffffffff
0x4005ca ffffffff
0x4005cb ffffffff
0x4005cc ffffff89
0x4005cd ffffffc3 
```

输出几乎如我所愿，但一些操作码在左侧被 0xffffff 填充，并被读取为负值。为什么会这样？

ELF文件的objdump如下

```
 00000000004005a4 <mul>:
  4005a4:   55                      push   %rbp
  4005a5:   48 89 e5                mov    %rsp,%rbp
  4005a8:   53                      push   %rbx
  4005a9:   48 83 ec 18             sub    $0x18,%rsp
  4005ad:   89 7d ec                mov    %edi,-0x14(%rbp)
  4005b0:   89 75 e8                mov    %esi,-0x18(%rbp)
  4005b3:   bf 0c 07 40 00          mov    $0x40070c,%edi
  4005b8:   e8 63 fe ff ff          callq  400420 <puts@plt>
  4005bd:   8b 55 e8                mov    -0x18(%rbp),%edx
  4005c0:   8b 45 ec                mov    -0x14(%rbp),%eax
  4005c3:   89 d6                   mov    %edx,%esi
  4005c5:   89 c7                   mov    %eax,%edi
  4005c7:   e8 90 ff ff ff          callq  40055c <add>
  4005cc:   89 c3                   mov    %eax,%ebx
  4005ce:   8b 55 e8                mov    -0x18(%rbp),%edx
  4005d1:   8b 45 ec                mov    -0x14(%rbp),%eax
  4005d4:   89 d6                   mov    %edx,%esi
  4005d6:   89 c7                   mov    %eax,%edi
  4005d8:   e8 a1 ff ff ff          callq  40057e <sub>
  4005dd:   0f af c3                imul   %ebx,%eax
  4005e0:   48 83 c4 18             add    $0x18,%rsp
  4005e4:   5b                      pop    %rbx
  4005e5:   5d                      pop    %rbp
  4005e6:   c3                      retq 
```

十六进制代码几乎相同，除了 0xffffff 的填充。我无法弄清楚为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:21:59.010

这是因为在您的系统上，`char`已签名。改为使用`unsigned char`，或者（如评论中建议的那样）`uint8_t`如果您使用的是具有它的 C 实现。

此外，由于您无法将函数指针可移植地转换为`void *`，因此我认为您不能可移植地假设函数指针指向可读内存，该内存在机器代码中保存函数的表示。

我意识到这是*典型*的并且有点合乎逻辑，但我认为 C 不能保证它。在这种情况下，该程序将触发未定义的行为。希望它不会做任何有害的事情，并且仍然具有指导意义（双关语）。

# java - 将 String 更改为 Int 以便更好地对其进行排序是否合法？

> ID：16143462
> 
> 赞同：-2
> 
> 时间：2013-04-22T09:19:11.520
> 
> 标签：java, string, sorting, integer

我有很多字符串，例如 ("a32ghS:SAD")，我需要对它们进行排序。是否可以得到这样的整数值：

```
String s = "a32ghS:SAD";
int l = 0;
for (int i = 0; i < s.length(); i++) {
    l += (int) s.charAt(i);
} 
```

可以根据整数 l 对字符串进行排序吗？还是我应该根据它的字符串对它们进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:26:44.080

简单地将每个字符的字符值相加会对其进行错误排序（假设您想要按字母顺序排列）。考虑 string `"aZZZZ"`，这将在`"b"`您的代码示例之后出现。您的方法将*通过字符串中包含的字符的字符代码之和对字符串进行排序*，不是特别有用。

假设您想按字母顺序排序，您应该使用 Java 库方法[Collections.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)来完成，因为已经编写了代码来执行此操作。

```
ArrayList<String> list = new ArrayList<String>();

unsortList.add("cc");
unsortList.add("bb");
unsortList.add("dd");
unsortList.add("aa");

Collections.sort(list); 
```

典型的字母排序的工作方式是通过比较第一个位置的 ASCII 字符代码并以这种方式对它们进行排序，如果字符相同，则考虑下一个字符，依此类推。

除非您以特定的方式排序，或者您可以利用一些关于您所知道的字符串的知识，否则您将无法超越这种性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:26:52.483

这将产生`"a32ghS:SAD"`并`"S32gha:SAD"`具有相同的整数表示。另外，您在将整数转换回字符串时会遇到麻烦（您必须使用一些映射结构）。

所以，答案只是对字符串进行排序，并不是说它的操作真的很慢（当然，这取决于项目的数量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:21:43.307

很大程度上取决于你想做什么。:)

但是，如果您根据字符串对其进行排序，您将执行 O(NlogN) string2int 转换。相反，如果您在排序之前转换字符串，您将只进行 O(N) 次转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:36:05.610

不，因为字符串中的位置很重要（请参阅上面的答案），但是如果您知道字符串的最大长度，并且在添加字符后对其进行按位移位，则可能没问题。

请记住，String.compareTo 以几乎相同的方式使用每个字符的 unicode 值，但 compareTo 方法默认区分大小写。

# ruby-on-rails - 启用资产管道后，image_tag 指向 Rails 3 中的 assets/

> ID：16143466
> 
> 赞同：0
> 
> 时间：2013-04-22T09:19:24.910
> 
> 标签：ruby-on-rails, asset-pipeline

我启用了资产管道，但 image_tag 仍然以“assets”而不是“images”为前缀。我错过了什么吗？我已将应用程序从 rails 2.3 升级到 3.2。

# iphone - 在 iOS 中从音频文件或现场录音生成波形

> ID：16143469
> 
> 赞同：2
> 
> 时间：2013-04-22T09:19:35.330
> 
> 标签：iphone, xcode4.5, core-audio, audio-recording, waveform

我想从我的应用程序中的音频文件或实时录音生成波形，我看过[这个](https://github.com/uliwitness/UKSoundWaveformView)教程，但它是为可可平台而不是可可触摸而构建的，我也有谷歌很多教程，但我仍然无法找到教程可以帮助我生成像 SoundCloud 应用程序这样的音频波形信号。我也尝试过苹果 aurioTouch，但它太复杂而无法理解。

请帮助我并提出一个很好的波形生成示例。

提前致谢。

# java - 日志和服务器控制台

> ID：16143471
> 
> 赞同：0
> 
> 时间：2013-04-22T09:19:40.163
> 
> 标签：java, logging

我正在从这里学习日志概述：http://docs.oracle.com/javase/6/docs/technotes/guides/logging/overview.html#1.15 [，](http://docs.oracle.com/javase/6/docs/technotes/guides/logging/overview.html#1.15) 我有以下问题。我创建了一个简单的 WEB 应用程序，并使用以下代码：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    Logger logger = Logger.getLogger("com.NewServlet.severe");
    Logger logger2 = Logger.getLogger("com.NewServlet.Fine");
    Handler fh=new FileHandler("/C:/Html/mylogs.txt");
    Handler fh2=new FileHandler("/C:/Html/mylogs2.txt");
    //Logger.getLogger("com.NewServlet").addHandler(fh);
    //Logger.getLogger("com.NewServlet.Fine").addHandler(fh2);
   // Logger.getLogger("com.NewServlet").setLevel(Level.SEVERE);
   // Logger.getLogger("com.NewServlet.Fine").setLevel(Level.FINE);
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    String number=request.getParameter("value");
    Integer num=Integer.valueOf(number);
    int a= num.parseInt(number);
    int result=0;
    try {
        /*
         * TODO output your page here. You may use following sample code.
         */
        result=20/a;
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet NewServlet</title>");            
        out.println("</head>");
        out.println("<body>");
        //logger2.fine("doing stuff");
        logger2.addHandler(fh2);
        logger2.setLevel(Level.FINE);
        logger2.fine("doing ALL OK");
        //logger2.log(Level.FINE,"doing OK");
        out.println("<h1>Servlet NewServlet at " + result + "</h1>");
        out.println("</body>");
        out.println("</html>");

    }
    catch ( Exception e1){
        logger.addHandler(fh); 
        logger.setLevel(Level.SEVERE);
        logger.log(Level.SEVERE, "troubles", e1);
        e1.printStackTrace();

    }

    finally {            
        out.close();
    }
} 
```

我的问题是日志消息显示两次（一个在服务器控制台中，一个在日志文件中，我该怎么做才能只看到日志文件而不是控制台中的消息？）另一个问题是对于带有 Lever SEVERE 的记录器，我只在服务器控制台中看到错误消息。创建的 .txt mylogs.txt 是空的。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:38:07.707

`e1.printStackTrace();`将在控制台中打印堆栈跟踪。删除它并将日志文件中的堆栈跟踪打印为（您已经在做）

`logger.log(LEVEL, MSG, EXCEPION_OBJECT)`

当您将记录器级别设置为`SEVERE`[具有最高值] 时，所有低于该级别的级别都将被丢弃，并且不会打印到文件中。

将日志文件的扩展名从 重命名`.txt`为`.log`

```
Handler fh=new FileHandler("/C:/Html/mylogs.log");
Handler fh2=new FileHandler("/C:/Html/mylogs2.log"); 
```

# iphone - 如何以编程方式添加多个 uibutton

> ID：16143473
> 
> 赞同：0
> 
> 时间：2013-04-22T09:19:45.773
> 
> 标签：iphone, objective-c, uibutton

我想以`UIButtons`编程方式添加多个。其实我有`NSMutableArray`。我想`UIButtons`在`NSMutableArray`. 而且我还希望`UIView`. 创造`UIButton`对男人来说不是问题，对我来说写`buttons`动态创建算法的问题。这是代码请纠正这个

```
-(IBAction)seeAll:(id)sender
{
    if ([barBtn.title isEqualToString:@"See All"])
    {
        containerVw = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
        [containerVw setBackgroundColor:[UIColor whiteColor]];
        [srcVw removeFromSuperview];
        [self.view addSubview:containerVw];

        NSUInteger i;
        int xCoord;
        int yCoord=20;
        int buttonWidth=80;
        int buttonHeight=50;
        int buffer = 10;
        for (i = 1; i <= imageArray.count; i++)
        {
            UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
             aButton.frame = CGRectMake(xCoord, yCoord,buttonWidth,buttonHeight);
            [aButton setBackgroundImage:[imageArray objectAtIndex:i-1] forState:UIControlStateNormal];
            [aButton addTarget:self action:@selector(whatever:) forControlEvents:UIControlEventTouchUpInside];
            [containerVw addSubview:aButton];

            if (i%4 == 0 )
            {
                yCoord += buttonHeight + buffer;
            }
            NSLog(@"xcoordinate %i",xCoord);
            NSLog(@"ycoordinate %i",yCoord);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:22:46.447

请参阅我的以下答案并从中获得一些想法..

```
 int imageIndex = 0;

        int yOffset = 4;

        while (imageIndex < imageArray.count)        
        {
            int yPos =  7 + yOffset * 30;

            for(int i = 0; i < 4; ++i)//set 4 for 4 columns
            {
                CGRect  rect = CGRectMake((0 + i * 80), yPos, 80, 31);

                if (imageIndex < [imageArray  count]) {

                    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
                    button.frame = rect;
                    button.tag = imageIndex;
                    [button addTarget:self 
                               action:@selector(btnTemp_Clicked:)
                     forControlEvents:UIControlEventTouchDown];

                    [button setTitle:[imageArray objectAtIndex:imageIndex] forState:UIControlStateNormal];
  //                 [button.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
                    [button setBackgroundImage:[imageArray objectAtIndex:imageIndex] forState:UIControlStateNormal];

                    [button setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted ];

                    [button setNeedsDisplay];

                    [containerVw addSubview:button];
                }
                ++imageIndex;
            }
            ++yOffset;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:31:40.433

```
- (void)createButtonGrid
{
    int x, y, width, height, exceedSpace;
    exceedSpace = 6;
    x = y = exceedSpace;
    width = height = 100;

    UIButton *btn;

    for (int i=0; i< 10; i++)
    {
        btn = [UIButton buttonWithType:UIButtonTypeCustom];
        [btn setFrame:CGRectMake(x, y, width/2, height/2)];
        [btn setTag:i];
        [btn addTarget:self action:@selector(yourMethod:) forControlEvents:UIControlEventTouchUpInside];

        [self.scrollview addSubview:btn];

        if((i+1) % 3 == 0)
        {
            x = exceedSpace;
            y += (width/2)+exceedSpace;
        }
        else
            x += (width/2)+exceedSpace;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:24:40.603

你在哪里设置按钮的 xCoord

```
for (i = 1; i <= imageArray.count; i++)
    {
        if (i%4 == 0 )
        {
            yCoord += buttonHeight + buffer;
            xCoord=0;
        }
        else{
            xCoord += buttonWidht + buffer;
        }
        NSLog(@"xcoordinate %i",xCoord);
        NSLog(@"ycoordinate %i",yCoord);

        UIButton *aButton = [UIButton buttonWithType:UIButtonTypeCustom];
        aButton.frame = CGRectMake(xCoord, yCoord,buttonWidth,buttonHeight);
        [aButton setBackgroundImage:[imageArray objectAtIndex:i-1] forState:UIControlStateNormal];
        [aButton addTarget:self action:@selector(whatever:) forControlEvents:UIControlEventTouchUpInside];
        [containerVw addSubview:aButton];
    } 
```

# android - Android：EclipseLink：没有名为 PU 的 EntityManager 的持久性提供程序

> ID：16143475
> 
> 赞同：0
> 
> 时间：2013-04-22T09:19:47.503
> 
> 标签：android, jpa, eclipselink, persistence.xml

我有一个 jpa 程序，我想在 android 上进行转换。这是我的 android 项目中的 src 文件结构：

```
+---org
|   \---manager
|       +---android
|       |       EnterIndexNumberActivity.java
|       |       MainActivity.java
|       |       WrongCredentials.java
|       |       
|       +---controller
|       |       DBStuff.java
|       |       ManagerMain.java
|       |       ServerHandling.java
|       |       
|       +---model
|       |       Person.java
|       |       
|       \---view
\---META-INF
        persistence.xml 
```

这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="PU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>itan.manager.model.Itan</class>
    <properties>          
      <property name="javax.persistence.jdbc.url" value="jdbc:h2:data/.h2/db/manager;CIPHER=AES;IFEXISTS=TRUE;"/>      
      <property name="javax.persistence.jdbc.user" value=""/>
      <property name="javax.persistence.jdbc.password" value=""/>
      <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
    </properties>
  </persistence-unit>
</persistence> 
```

如果我想连接到数据库，则会抛出一个异常，即找不到名为“PU”的 EntityManager 的持久性提供程序。我必须做什么？我认为在设备上找不到persistence.xml。但是如何让类知道 xml 文件呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:58:57.820

您是否在应用程序中打包了 JPA jar？(persistence.jar, eclipselink.jar)

我不知道 JPA 在 Android 上工作。

您可能需要直接访问持久性提供程序，并且可能需要传递一个类加载器。

IE

```
org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory() 
```

见， [http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/config/PersistenceUnitProperties.html#CLASSLOADER](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/config/PersistenceUnitProperties.html#CLASSLOADER)

# java - 多个 JavaFX 组件合二为一

> ID：16143477
> 
> 赞同：0
> 
> 时间：2013-04-22T09:20:01.157
> 
> 标签：java, javafx-2, javafx

我有一个我无法解决的问题。我创建 JavaFX 项目。我创建了主 Java 类，它将调用项目的所有组件：

```
public class SQLBrowser extends Application {

    // Menu Utilization
    CreatingMenus menu;
    // Navigation Utilization
    Navigation navigation;
    // Set window size, color, window label
    private final String windowLabel = "SQL Browser";
    private final int xSize = 1200;
    private final int ySize = 650;
    private final Color backgroundColor = Color.WHITE;

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        // Set Label
        primaryStage.setTitle(windowLabel);

        Group root = new Group();
        Scene scene = new Scene(root, xSize, ySize, backgroundColor);

        // Generate menu from sqlbrowser.menu.CreatingMenus;
        menu = new CreatingMenus();
        menu.initMenu(primaryStage, root, scene);
        // Generate Data table navigation from sqlbrowser.navigation.Navigation;
        navigation = new Navigation();
        navigation.initNavigation(primaryStage, root, scene);

    }
} 
```

我在单独的 Java 类中创建了简单的菜单：

```
public class CreatingMenus {

    // Generate Menu
    public void initMenu(final Stage primaryStage, Group root, Scene scene) {

        // Call Menu Actions from Java Method MenuActions
        final MenuActions ma = new MenuActions();

        MenuBar menuBar = new MenuBar();

        // File menu - new, save, close, exit
        Menu menu = new Menu("File");
        menu.getItems().add(new MenuItem("New"));
        menu.getItems().add(new MenuItem("Save"));
        menu.getItems().add(new MenuItem("Close"));
        menu.getItems().add(new SeparatorMenuItem());

        MenuItem menuItem = new MenuItem("Exit");

        // Exit from the application
        menuItem.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent e) {
                // This Java Method is called from the Java Class MenuActions
                ma.programExit(); // Exit program
            }
        });

        menu.getItems().add(menuItem);

        menuBar.getMenus().add(menu);

        // Options menu - Preferences
        Menu options = new Menu("Options");
        options.getItems().add(new MenuItem("Preferences"));

        menuBar.getMenus().add(options);

        // Help menu - About
        Menu help = new Menu("Help");

        MenuItem helpItem = new MenuItem("About");

        // Exit from the application
        helpItem.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent e) {
                aboutDialog();
            }
        });

        help.getItems().add(helpItem);

        menuBar.getMenus().add(help);

        menuBar.prefWidthProperty().bind(primaryStage.widthProperty());

        root.getChildren().add(menuBar);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    public void aboutDialog() {

        final int xSize = 640;
        final int ySize = 480;
        final String logoImage = "/logo.png";
        final Color backgroundColor = Color.WHITE;
        final String text = "SQL Browser";
        final String version = "Product Version: 1.0";
        final String license = "License Information";

        final Stage aboutDialog = new Stage();
        aboutDialog.initModality(Modality.WINDOW_MODAL);

        GridPane grid = new GridPane();
        grid.setAlignment(Pos.CENTER);
        grid.setHgap(10);
        grid.setVgap(10);
        grid.setPadding(new Insets(20, 20, 20, 20));

        // Logo
        Image image = new Image(getClass().getResourceAsStream(logoImage));
        ImageView logo = new ImageView(image);

        grid.add(logo, 1, 0);

        // Product name
        Text productName = new Text(text);
        productName.setFont(Font.font("Verdana", 12));
        grid.add(productName, 0, 2);

        // Product version
        Text productVersion = new Text(version);
        productVersion.setFont(Font.font("Verdana", 12));
        grid.add(productVersion, 0, 3);

        // Product License
        Text productLicense = new Text(license);
        productLicense.setFont(Font.font("Verdana", 12));
        grid.add(productLicense, 0, 4);

        // Close Button
        Button closeButton = new Button("Close");

        closeButton.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent arg0) {
                // Close the dialog when "Close" button is pressed
                aboutDialog.close();
            }
        });
        grid.add(closeButton, 5, 18);

        // Configure dialog size and background color
        Scene aboutDialogScene = new Scene(grid, xSize, ySize, backgroundColor);
        aboutDialog.setScene(aboutDialogScene);
        aboutDialog.show();

    }
} 
```

然后我添加了用于导航的手风琴组件：

```
public class Navigation {

    private static final Image BLUE_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Blue-Fish-icon.png");
    private static final Image RED_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Red-Fish-icon.png");
    private static final Image YELLOW_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Yellow-Fish-icon.png");
    private static final Image GREEN_FISH = new Image("http://icons.iconarchive.com/icons/fasticon/fish-toys/128/Green-Fish-icon.png");

    public void initNavigation(Stage primaryStage, Group root, Scene scene) {

        VBox stackedTitledPanes = createStackedTitledPanes();

        ScrollPane scroll = makeScrollable(stackedTitledPanes);
        scroll.getStyleClass().add("stacked-titled-panes-scroll-pane");
        scroll.setPrefSize(410, 480);
        scroll.setLayoutX(0);
        scroll.setLayoutY(20);

        primaryStage.setTitle("Fishy, fishy");
        scene = new Scene(scroll);
        //scene.getStylesheets().add(getClass().getResource("fishy-fishy.css").toExternalForm());
        primaryStage.setScene(scene);
        primaryStage.show();

    }

    private VBox createStackedTitledPanes() {
        final VBox stackedTitledPanes = new VBox();
        stackedTitledPanes.getChildren().setAll(
                createTitledPane("One Fish", GREEN_FISH),
                createTitledPane("Two Fish", YELLOW_FISH, GREEN_FISH),
                createTitledPane("Red Fish", RED_FISH),
                createTitledPane("Blue Fish", BLUE_FISH));
        ((TitledPane) stackedTitledPanes.getChildren().get(0)).setExpanded(true);
        stackedTitledPanes.getStyleClass().add("stacked-titled-panes");

        return stackedTitledPanes;
    }

    public TitledPane createTitledPane(String title, Image... images) {
        FlowPane content = new FlowPane();
        for (Image image : images) {
            ImageView imageView = new ImageView(image);
            content.getChildren().add(imageView);

            FlowPane.setMargin(imageView, new Insets(10));
        }
        content.setAlignment(Pos.TOP_CENTER);

        TitledPane pane = new TitledPane(title, content);
        pane.getStyleClass().add("stacked-titled-pane");
        pane.setExpanded(false);

        return pane;
    }

    private ScrollPane makeScrollable(final VBox node) {
        final ScrollPane scroll = new ScrollPane();
        scroll.setContent(node);
        scroll.viewportBoundsProperty().addListener(new ChangeListener<Bounds>() {
            @Override
            public void changed(ObservableValue<? extends Bounds> ov, Bounds oldBounds, Bounds bounds) {
                node.setPrefWidth(bounds.getWidth());
            }
        });
        return scroll;
    }
} 
```

但是由于某些未知的原因，我得到了这个结果：

![在此处输入图像描述](https://i.stack.imgur.com/l9WxY.png)

由于某种原因，菜单没有显示并且窗口的大小发生了变化。你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:03:50.310

在您的示例中，您会覆盖您的场景！

```
primaryStage.setTitle("Fishy, fishy");
// this line are wrong!
scene = new Scene(scroll);
//scene.getStylesheets().add(getClass().getResource("fishy-fishy.css").toExternalForm());
primaryStage.setScene(scene);
primaryStage.show(); 
```

您应该使用一个场景和一个主要布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:51:02.567

在您的 initMethods 中，而不是一次又一次地将场景设置到舞台上，甚至创建一个新的。我建议您添加到容器中：[这是一个关于布局的教程](http://docs.oracle.com/javafx/2/layout/jfxpub-layout.htm)。

并将您的主要课程替换为：

```
 VBox root = new VBox();
    root.setAlignment(Pos.TOP_CENTER);

    // Generate menu from sqlbrowser.menu.CreatingMenus;
    menu = new CreatingMenus();
    menu.initMenu(primaryStage, root);
    // Generate Data table navigation from sqlbrowser.navigation.Navigation;
    navigation = new Navigation();
    navigation.initNavigation(primaryStage, root);

    Scene scene = new Scene(root, xSize, ySize, backgroundColor);
    primaryStage.setScene(scene);
    primaryStage.show(); 
```

在你的 initMethods 中，删除场景，因为你不应该在里面使用它，然后将你正在生成的节点添加到容器中，在这个例子中是一个 VBox。

```
public void initMenu(final Stage primaryStage, VBox root) {
   ....
   root.getChildren().add(menuBar);
}

public void initNavigation(Stage primaryStage, VBox root) {
   ....
   root.getChildren().add(scroll);
} 
```

希望能帮助到你。

# sql-server-2008 - 使用单个表的数据立方体

> ID：16143488
> 
> 赞同：1
> 
> 时间：2013-04-22T09:20:34.373
> 
> 标签：sql-server-2008, analysis, olap-cube, degenerate-dimension

我有一个包含 40 列的数据表。我需要的一切都在里面。
我想知道我是否可以单独在这个表上构建一个数据立方体。

我怎么能对立方体说这些是维度，这些是度量？

能告诉我过程吗？

* * *

我有 HouseNo、Date、Time、IndoorTemp、OutdoorTemp、Relay 等列。

所有这些数据都在一个表中。我想构建一个多维数据集，其中尺寸为 HouseNo，Date。

该表有一个复合主键。它由（房屋编号，日期，时间）组成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T21:07:16.440

您可以通过创建退化维度概念来做到这一点。您将在关系端拥有单个表，您可以为每个所需维度创建单独的 olap 维度结构，并使用“退化维度链接”将它们与事实表链接。

# iphone - 在 ios 上阻止呼叫

> ID：16143489
> 
> 赞同：-4
> 
> 时间：2013-04-22T09:20:46.820
> 
> 标签：iphone, ios, objective-c, jailbreak

我知道这个问题已经被问过很多次了，但是用这段代码：

```
static void callback(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {

NSString *notifyname = (__bridge NSString *)name;

if ([notifyname isEqualToString:@"kCTCallIdentificationChangeNotification"]) {

    NSDictionary *info = (__bridge NSDictionary *)userInfo;
    CTCall *call = (__bridge CTCall *)[info objectForKey:@"kCTCall"];
    NSString *caller = CTCallCopyAddress(NULL, call);
    NSLog(@"RECEIVED CALL: %@", caller);
    CTCallDisconnect(call);

} 
```

我看到了 1 秒的通话（（如何确保它不是并且它作为 iBlacklist 工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T08:21:00.867

我找到了解决方案 - 需要使用 MobileSubstrate 的钩子。[我在阻止呼叫和短信](https://github.com/shyang/cate)中找到示例代码

PS对不起我的英语（（

# sql-server-2012 - T-SQL - 计算布尔表达式字符串的技术

> ID：16143490
> 
> 赞同：0
> 
> 时间：2013-04-22T09:20:47.150
> 
> 标签：sql-server-2012, execute, boolean-expression

我需要根据表达式填充“值”字段可以是“0”或“1”（假或真）。

以下是简单的数据：

```
1   1 * 1 + 1   NULL
2   0 + 0       NULL
3   1 + 0 * 0   NULL
4   0 * 1       NULL
5   0 * 1 * 1   NULL 
```

“表达式”字段是 nvarchar 类型，包含条件和布尔运算符的结果。所以，上面的数据可以这样格式化：

```
1   TRUE AND TRUE OR TRUE     NULL
2   FALSE OR FALSE            NULL
3   TRUE OR FALSE AND FALSE   NULL
4   FALSE AND TRUE            NULL
5   FALSE AND TRUE AND TRUE   NULL 
```

最后，“表达式”字段可以包含 AND/OR 以及多个 TRUE 和 FALSE。

正如我所说，我需要的是计算表达式值 - 检查它是真还是假。

整个逻辑都在过程中，我可以为每一行构建动态 sql 并执行它，但在我的实际情况下，我将有数百行，因此为每一行创建循环并调用 execute_sql 听起来不是一个好的解决方案。

是否有任何内置函数可以帮助我评估这些字符串，因为我无法在过程中使用交叉应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:54:19.363

为什么不在插入时而不是在查询时评估它？一位（结果）的成本与解析和执行查询的成本可能是值得的。您可以将其作为触发器 (yuk) 或带有 UDF 的计算列（更好）。

您所要做的几乎就是将一些动态 SQL 链接到一些搜索和替换（我认为）。

如果您的组合数量有限，另一种方法只是查找表达式（减去空格等）和结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:16:37.777

我创建了一个用户定义的标量函数，其输入参数是用于评估和返回值的字符串 - 0 或 1（假或真）。现在，我可以做愿望交叉应用......

以下是示例：

```
SELECT [dbo].[fn_XxCustom_EvaluateExpression] ('0')                 -- 0
SELECT [dbo].[fn_XxCustom_EvaluateExpression] ('1')                 -- 1
SELECT [dbo].[fn_XxCustom_EvaluateExpression] ('1*1')               -- 1
SELECT [dbo].[fn_XxCustom_EvaluateExpression] ('1+1')               -- 1
SELECT [dbo].[fn_XxCustom_EvaluateExpression] ('1*0')               -- 0
SELECT [dbo].[fn_XxCustom_EvaluateExpression] ('0+1*0*1+0*1+0')     -- 0
SELECT [dbo].[fn_XxCustom_EvaluateExpression] ('1+1+0+1*0*1+1*1+0') -- 1 
```

我相信有更好的方法可以做到这一点，也许使用反向波兰表示法和递归 CTE，但没有时间尝试。无论如何，如果有人需要做类似的事情，这是源代码：

```
IF  EXISTS (SELECT 1 FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[fn_XxCustom_EvaluateExpression]') AND type in (N'FN', N'IF', N'TF', N'FS', N'FT'))
BEGIN
    DROP FUNCTION [dbo].[fn_XxCustom_EvaluateExpression]
END

GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[fn_XxCustom_EvaluateExpression]
(
    @Expression NVARCHAR(MAX)
)
RETURNS TINYINT
AS
BEGIN

    DECLARE @ExpressionValue TINYINT = 0

    IF LEN(@Expression) > 0 AND @Expression IS NOT NULL
    BEGIN

        -- Checking if this is expression 
        IF CHARINDEX('+', @Expression) = 0 AND CHARINDEX('*', @Expression) = 0 
            BEGIN
                SET @ExpressionValue = CAST(@Expression AS TINYINT)
            END
        ELSE
            BEGIN

                -- Checking if the expression is computed (contains both '*' and '+')
                IF CHARINDEX('+', @Expression) > 0 AND CHARINDEX('*', @Expression) > 0
                    BEGIN 

                        DECLARE @ExpressionsTable TABLE
                        (
                             ExpressionID INT IDENTITY(1,1)
                            ,Expression NVARCHAR(MAX)
                            ,ExpressionValue TINYINT
                        )

                        DECLARE @XML XML = N'<r><![CDATA[' + REPLACE(@Expression, '+', ']]></r><r><![CDATA[') + ']]></r>'

                        -- Populate the table with simple expressions (expression which only contains '+' or '*' is simple)
                        INSERT INTO @ExpressionsTable (Expression)
                        SELECT DISTINCT RTRIM(LTRIM(T.c.value('.', 'nvarchar(250)')))
                        FROM @xml.nodes('//r') T(c)

                        -- Creating a simple expressions with result values 
                        UPDATE @ExpressionsTable
                        SET ExpressionValue = IIF(CHARINDEX('+', Expression) = 0 AND CHARINDEX('*', Expression) = 0 , Expression, IIF(CHARINDEX('+', Expression) > 0,IIF(CHARINDEX('1', Expression) > 0, 1, 0),IIF(CHARINDEX('0', Expression) > 0, 0, 1)))

                        -- Evaluating the final expression
                        SET @ExpressionValue = IIF(CHARINDEX('1', SUBSTRING((SELECT '+' + CAST(ExpressionValue AS VARCHAR(1)) FROM @ExpressionsTable FOR XML PATH('')),2,4000)) > 0, 1, 0)

                    END
                ELSE
                -- Checking the type of the simple expression (does it contains '+' or '*')
                    BEGIN
                        SET @ExpressionValue = IIF(CHARINDEX('+', @Expression) > 0,IIF(CHARINDEX('1', @Expression) > 0, 1, 0),IIF(CHARINDEX('0', @Expression) > 0, 0, 1))
                    END
            END
    END

    RETURN @ExpressionValue

END
GO 
```

# python - matplotlib 中的 set_xlim、set_ylim、set_zlim 命令无法裁剪显示的数据

> ID：16143493
> 
> 赞同：6
> 
> 时间：2013-04-22T09:20:51.397
> 
> 标签：python, matplotlib, mplot3d

我正在使用 Tkinter 和 ttk 构建一个 GUI，并使用 matplotlib 来创建交互式绘图 - 再次，就像其他数百万人一样。尽管到目前为止我遇到的大多数问题都有据可查，但这个问题似乎很少见：

当在 3d 中绘制并随后使用命令调整轴比例时`set_lim()`，绘制的线超出了看起来不好的坐标系。另外，我对看起来有点小的框架不满意。这是一个例子：

```
# Missmatch.py
"""Graphical User Interface for plotting the results
calculated in the script in Octave"""

# importing libraries
import matplotlib, ttk, threading
matplotlib.use('TkAgg')
import numpy as nm
import scipy as sc
import pylab as pl
import decimal as dc
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
from matplotlib.figure import Figure
from mpl_toolkits.mplot3d import Axes3D
from oct2py import octave as oc
import Tkinter as tki

class CS:
    """CS - Controlset. This part creates the GUI with all important
    Elements. Major changes and calculations will be executed 
    in the Calculation-Class in a seperate thread. This prevents the 
    GUI from hanging"""

    def __init__(self,parent):
        """Building the main GUI"""
        self.ThisParent=parent
        ### Entire Window
        # Mainframe that contains everything.
        self.main=tki.Frame(parent) 
        # Pack manager to expand the mainframe as the windowsize changes.
        self.main.pack(fill=tki.BOTH, expand=tki.YES)
        # Configure the grid of the mainframe so that only the top left
        # cell grows if the users expands the window.
        self.main.grid_rowconfigure(0, weight=1)
        self.main.grid_rowconfigure(1, weight=1)

        ### Canvas for drawings
        # Creating a figure of desired size
        self.f = Figure(figsize=(6,6), dpi=100)
        # Creating a canvas that lives inside the figure
        self.Paper=FigureCanvasTkAgg(self.f, master=self.main)
        # Making the canvas's drawings visible (updating)
        self.Paper.show()
        # positioning the canvas
        self.Paper.get_tk_widget().grid(row=0,rowspan=3, column=0, sticky='NSWE')
        # creating a toolbarframe for options regarding the plots
        self.toolbarframe=tki.Frame(self.main)
        self.toolbarframe.grid(row=3, column=0, sticky='NWE')
        # Creating a toolbar for saving, zooming etc. (matplotlib standard)
        self.toolbar = NavigationToolbar2TkAgg(self.Paper, self.toolbarframe)
        self.toolbar.grid(row=0,column=0, sticky='NWE')
        # setting the standard option on zoom
        self.toolbar.zoom()

        ### Axis configuration toolbar
        # A frame containing the axis config-menu
        self.axisscaleframe=tki.Frame(self.main)
        self.axisscaleframe.grid(row=5, column=0, sticky='SNEW')
        # In that Frame, some Entry-boxes to specify scale
        self.xaxisscalef=ttk.Entry(self.axisscaleframe, width=10)
        self.xaxisscalef.insert(0,0)
        self.xaxisscalet=ttk.Entry(self.axisscaleframe, width=10)
        self.xaxisscalet.insert(0,15)
        self.yaxisscalef=ttk.Entry(self.axisscaleframe, width=10)
        self.yaxisscalef.insert(0,0)
        self.yaxisscalet=ttk.Entry(self.axisscaleframe, width=10)
        self.yaxisscalet.insert(0,15)
        self.zaxisscalef=ttk.Entry(self.axisscaleframe, width=10)
        self.zaxisscalef.insert(0,0)
        self.zaxisscalet=ttk.Entry(self.axisscaleframe, width=10)
        self.zaxisscalet.insert(0,15)
        # And some Labels so we know what the boxes are for
        self.xaxlab=ttk.Label(self.axisscaleframe, text='X-Axis', width=10)
        self.yaxlab=ttk.Label(self.axisscaleframe, text='Y-Axis', width=10)
        self.zaxlab=ttk.Label(self.axisscaleframe, text='Z-Axis', width=10)
        self.axinfolab=ttk.Label(self.axisscaleframe, text='Adjust axis scale:')
        # And a Button to validate the desired configuration
        self.scaleset=ttk.Button(self.axisscaleframe, text='Set', command=self.SetAxis2)
        self.scaleset.bind('<Return>', self.SetAxis)
        # Let's organize all this in the axisscaleframe-grid
        self.axinfolab.grid(row=0, column=0, sticky='W')
        self.xaxlab.grid(row=1, column=0, sticky='W')
        self.yaxlab.grid(row=2, column=0, sticky='W')
        self.zaxlab.grid(row=3, column=0, sticky='W')
        self.xaxisscalef.grid(row=1,column=1, sticky='W')
        self.yaxisscalef.grid(row=2,column=1, sticky='W')
        self.xaxisscalet.grid(row=1,column=2, sticky='W')
        self.yaxisscalet.grid(row=2,column=2, sticky='W')
        self.zaxisscalef.grid(row=3,column=1,sticky='W')
        self.zaxisscalet.grid(row=3,column=2,sticky='W')
        self.scaleset.grid(row=3,column=3,sticky='E')

    def SetAxis(self,event):
        self.SetAxis2()

    def SetAxis2(self):
        self.x1=float(self.xaxisscalef.get())
        self.x2=float(self.xaxisscalet.get())
        self.y1=float(self.yaxisscalef.get())
        self.y2=float(self.yaxisscalet.get())
        self.z1=float(self.zaxisscalef.get())
        self.z2=float(self.zaxisscalet.get())
        self.a.set_xlim(self.x1, self.x2)
        self.a.set_ylim(self.y1, self.y2)
        self.a.set_zlim(self.z1, self.z2)
        self.Paper.show()
        print "Set axis"

class Calculate3D(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)

    def run(self):
        self.x=range(100)
        self.y=range(100)
        self.z=range(100)
        print 'Done!'
        controlset.a = controlset.f.add_subplot(111, projection='3d')
        controlset.a.clear()
        controlset.a.plot(self.x,self.y,self.z)
        controlset.a.mouse_init()
        controlset.a.set_xlabel('X')
        controlset.a.set_ylabel('Y')
        controlset.a.set_zlabel('Z')
        controlset.a.set_title('Title')
        controlset.Paper.show()
        return

mainw=tki.Tk()
mainw.title("Example")
mainw.geometry('+10+10')
controlset=CS(mainw) 
#for this example code, we run our Calculate3D class automatically
CL=Calculate3D()
CL.run()

mainw.mainloop() 
```

只需运行代码，然后点击“SET”按钮。有我的问题。

**编辑**：添加截图： ![在此处输入图像描述](https://i.stack.imgur.com/Ox25u.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:11:59.783

这里的问题是，mplot3d 没有 OpenGL 后端。因此，用于显示数据的计算基于 2d。我在这里发现了同样的问题[和](https://sites.google.com/site/scigraphs/home/posts/clip3darraypointsoutsideofaxes)[解决](https://github.com/matplotlib/matplotlib/issues/749/)方法。尽管我认为解决方法不是最好的，因为它取决于数据的分辨率。

无论如何，我遵循[了第二个链接。](https://sites.google.com/site/scigraphs/home/posts/clip3darraypointsoutsideofaxes)所以，我现在正在做的是复制数组并将所有高于和低于我想要的比例的值设置为 NaN。绘制这些时，数据点超过所需限制的线将被切断。

```
def SetAxis2(self):
    self.dummyx=CL.x*1
    self.dummyy=CL.y*1
    self.dummyz=CL.z*1
    #clipping manually
    for i in nm.arange(len(self.dummyx)):
        if self.dummyx[i] < self.x1:
            self.dummyx[i] = nm.NaN
        else:
            pass

    for i in nm.arange(len(self.dummyy)):
        if self.dummyy[i] < self.y1:
            self.dummyy[i] = nm.NaN
        else:
            pass

    for i in nm.arange(len(self.dummyz)):
        if self.dummyz[i] < self.z1:
            self.dummyz[i] = nm.NaN
        else:
            pass     

    controlset.a.plot(self.dummyx,\
    self.dummyy,\
    self.dummyz)

    self.a.set_xlim3d(self.x1, self.x2)
    self.a.set_ylim3d(self.y1, self.y2)
    self.a.set_zlim3d(self.z1, self.z2) 
```

如果现在您的比例设置为从 0 到 10，并且您有六个数据点：`[-1, 3 4 12 5 1]`该行将从 3 变为 4，从 5 变为 1，因为 -1 和 12 将设置为 NaN。关于这个问题的改进会很好。 [Mayavi](http://docs.enthought.com/mayavi/mayavi/index.html)可能会更好，但我没有尝试过，因为我想坚持使用 matplotlib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T00:15:47.767

以下代码甚至适用于网格数据表示：

```
@ numpy.vectorize
def clip_z_data(z):
  return z if Z_MIN <= z <= Z_MAX else n.nan

z = clip_z_data(z) 
```

Z_MIN 和 Z_MAX 是全局的，因为 vectorize 无法处理额外的属性。

# java - 搜索任何 .XML 文件的目录

> ID：16143494
> 
> 赞同：1
> 
> 时间：2013-04-22T09:20:51.787
> 
> 标签：java, xml, java-io

我试图让一段代码工作。目的是检查某个目录中是否有 .XML 文件。

这就是我到目前为止所得到的。

```
File f = new File("saves/*.xml");

    if(f.exists()) {
        /* Do Something */
    } else {
        /* do something else */
    } 
```

我正在尝试使用通配符搜索任何以 .XML 结尾的文件，我在这里遗漏了一些简单的东西吗？是否有更简单的方法来检查指定目录中是否存在至少一个 .XML 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T09:27:22.473

你可以使用这个：

```
 File dir = new File("saves");
    if (dir.isDirectory()) {
        File[] xmlFiles = dir.listFiles(new FilenameFilter() {

            @Override
            public boolean accept(File folder, String name) {
                return name.toLowerCase().endsWith(".xml");
            }
        });
    } 
```

现在你所有的 xml 文件都在`File[] xmlFiles`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T09:24:36.697

**备选方案 1：**

您可以使用[PathMatcher](http://docs.oracle.com/javase/7/docs/api/java/nio/file/PathMatcher.html)使用特定模式搜索文件。

**备选方案 2：**

您也可以使用[listFiles(FilenameFilter 过滤器)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28java.io.FilenameFilter%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:27:56.527

您需要使用 PathMatcher，例如：

```
PathMatcher matcher =
    FileSystems.getDefault().getPathMatcher("glob:*.{xml}");

Path filename = ...;
if (matcher.matches(filename)) {
    System.out.println(filename);
} 
```

从[这里](http://docs.oracle.com/javase/tutorial/essential/io/find.html)的 Oracle 文档。如果你想知道 Glob 是什么：[这里](http://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob)解释了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:41:07.813

将过滤器部分与搜索路径分开，用文件名过滤器列出搜索路径中的文件，只过滤xml文件。如果列表 sizee 大于 0，则您知道搜索路径包含至少一个 xml 文件。请参阅下面的示例代码：

```
File f = new File("C:\\");
if (f.isDirectory()){
   FilenameFilter filter =  new FilenameFilter() {
            @Override
            public boolean accept(File dir, String name) {
                if(name.endsWith(".xml")){
                    return true;
                }
                return false;
            }
        };
   if (f.list(filter).length > 0){
      /* Do Something */
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T09:29:19.797

您可以尝试使用此代码作为参考...

```
import java.io.*;

public class FindCertainExtension {

private static final String FILE_DIR = "FOLDER_PATH";
private static final String FILE_TEXT_EXT = ".xml";

public static void main(String args[]) {
    new FindCertainExtension().listFile(FILE_DIR, FILE_TEXT_EXT);
}

public void listFile(String folder, String ext) {

    GenericExtFilter filter = new GenericExtFilter(ext);

    File dir = new File(folder);

    if(dir.isDirectory()==false){
        System.out.println("Directory does not exists : " + FILE_DIR);
        return;
    }

    // list out all the file name and filter by the extension
    String[] list = dir.list(filter);

    if (list.length == 0) {
        System.out.println("no files end with : " + ext);
        return;
    }

    for (String file : list) {
        String temp = new StringBuffer(FILE_DIR).append(File.separator)
                .append(file).toString();
        System.out.println("file : " + temp);
    }
}

// inner class, generic extension filter
public class GenericExtFilter implements FilenameFilter {

    private String ext;

    public GenericExtFilter(String ext) {
        this.ext = ext;
    }

    public boolean accept(File dir, String name) {
        return (name.endsWith(ext));
    }
}
} 
```

希望能帮助到你..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-24T00:31:41.680

我能想到的最简单的代码：

```
File dir = new File(xmlFilesDirectory);
File[] files = dir.listFiles((d, name) -> name.endsWith(".xml")); 
```

然后你可以检查是否有这样的xml文件：

```
if(files.length == 0) {
    /* Do Something */
} else {
    /* do something else */
} 
```

# highcharts - 在 highcharts 中显示空系列

> ID：16143495
> 
> 赞同：1
> 
> 时间：2013-04-22T09:20:55.873
> 
> 标签：highcharts

我似乎无法在我的 highcharts 中显示包含空数据的系列。我在 7 个工作日中的每个工作日都有一些签到。但是当一天没有数据时，它就会被隐藏起来。我想做的是在 x 轴上显示空系列的标签（打印工作日名称）。我试图用空值填充我的数据，对 highcharts 使用不同的选项，...

我也无法设置列的颜色，我尝试将其设置为灰色，但这不起作用。

这是[JSFiddle中的演示](http://goo.gl/FdYnJ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:19:47.697

您可以为 yAxis设置`min`and ，而不是and ，看看：http: [//jsfiddle.net/tgZcc/21/](http://jsfiddle.net/tgZcc/21/)`max``minPadding``maxPadding`

# javascript - Javascript 中的毕达哥拉斯三元组公式 - Project Euler Prob 9

> ID：16143499
> 
> 赞同：1
> 
> 时间：2013-04-22T09:21:03.713
> 
> 标签：javascript, loops, formula

我正在尝试解决[Project Euler 问题 9](http://projecteuler.net/problem=9)：

> 毕达哥拉斯三元组是三个自然数的集合，a < b < c，其中，a2 + b2 = c2
> 
> 例如，32 + 42 = 9 + 16 = 25 = 52。
> 
> 恰好存在一个毕达哥拉斯三元组，其 a + b + c = 1000。求积 abc。

我在[Wikipedia](http://en.wikipedia.org/wiki/Pythagorean_triple#Generating_a_triple)上查找了找到毕达哥拉斯三元组的公式，并试图将其翻译成代码。问题是代码输出了错误的答案，但我认为代码是正确的。

```
var a, b, c;
var pos1, pos2, pos3;
var ans1, ans2, ans3;

for(var n=2; n<=20000; n++) {
  a = 2 * n + 1;
  b = 2 * n * (n +1);
  c = 2 * n * (n +1) + 1;
  if(a<b<c) {
  if(a^2 + b^2 === c^2) {
      pos1 = a;
      pos2 = b;
      pos3 = c;
  }
  if(a + b + c ===1000) {
      ans1 = a;
      ans2 = b;
      ans3 = c;
  }
}
}
console.log(ans1 + " " + ans2 + " " + ans3); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T09:35:59.383

这是一个解决方案

```
var a;
var c;

for (var b = 1; b < 1000; b += 1) {
    a = (500000 - 1000 * b) / (1000 - b);

    if (Math.floor(a) === a) {
        c = 1000 - a - b;

        break;
    }
}

console.log(a, b, c); 
```

结果是 375 200 425

在[jsfiddle上](http://jsfiddle.net/Xotic750/DZj6d/)

毕达哥拉斯
a ² + b ² = c ²

我们还有
a + b + c = 1000

代数，将 c 重新排列到左边
c = 1000 - (a + b)

将 c 插入毕达哥拉斯
a ² + b ² = (1000 - (a + b)) ²

乘以
a ² + b ² = 1000000 - 2000 * (a + b) + (a + b) ²

乘以
a ² + b ² = 1000000 - 2000 * (a + b) + a ² + 2 * a * b + b ²

重新排列 a ² + b ²以简化
0 = 1000000 - 2000 * (a + b) + 2 * a * b

将未知数重新排列到左边
2000 * (a + b) - 2 * a * b = 1000000

简化，/2
1000 * (a + b) - a * b = 500000

分解
a(1000 - b) + 1000 * b = 500000

重新排列
a(1000 - b) = 500000 - 1000 * b

a = (500000 - 1000 * b) / (1000 - b)

现在输入 b，计算 a 并测试 a 是否为[Pythagorean Triples要求的整数](http://en.wikipedia.org/wiki/Pythagorean_triple)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-06T04:23:01.207

TGarr，这是对 Xotic750 答案的解释。

> 我真的不明白你是如何创建算法的。为什么 a = 到 (500000 - 1000 * b) / (1000 - b) ...

他从 a^2 + b^2 = c^2 和 a + b + c = 1000 开始，并将它们结合起来，因为 projecteuler 上的问题指出只有一组数字，这两个陈述都是正确的。这是他如何将它们结合起来的。他将第二个方程解为 c = 1000 - (a + b)。然后他将其代入第一个等式，使其变为 a^2 + b^2 = (1000 - (a + b))^2。他继续，直到他能够解出整个方程的 a。一旦他能够做到这一点，他就能够制作一个`for`增加 b 的循环，这比许多其他选项更简单、更优雅。

> 为什么 if 语句的条件设置为 Math.floor(a) === a？

这只是意味着“是`a`，向下舍入到最接近的整数，与`a`？相同” 换句话说，是`a`整数吗？（复制他的代码，并`console.log ( a );`在语句上方添加`if`。这可能有助于您理解那段代码）既然他能够解出 a 的方程，他所要做的就是为 b 插入不同的数字，并且只要结果是一个整数，他会有答案。或者至少他会知道什么`a`并`b` `c = 1000 - a - b;`告诉他 c 是什么，而这就是她所写的全部内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-02T18:00:03.237

这是另一种代码较少的解决方案：

```
for(var a = 1; a < 500; a++){
  for(var b = a; b < 1000; b++){
    var c = Math.sqrt(a * a + b * b);
    if(c > b && Number.isInteger(c) && a + b + c == 1000){
      console.log(a * b * c);
    }
  }
} 
```

结果是：31875000 :)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T09:22:54.523

你不能这样计算幂。

用于`Math.pow(a,2)`计算 a^2

```
var a, b, c;
var pos1, pos2, pos3;
var ans1, ans2, ans3;

for(var n=2; n<=20000; n++) {
  a = 2 * n + 1;
  b = 2 * n * (n +1);
  c = 2 * n * (n +1) + 1;
  if(a<b<c) {
  if(Math.pow(a,2) + Math.pow(b,2) === Math.pow(c,2)) {
      pos1 = a;
      pos2 = b;
      pos3 = c;
  }
  if(a + b + c ===1000) {
      ans1 = a;
      ans2 = b;
      ans3 = c;
  }
}
}
console.log(ans1 + " " + ans2 + " " + ans3); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-20T03:38:19.750

等式 1：a ² + b ² = c ²

方程 2：a + b + c = 1000

从 eq 1 和 eq 2 我们可以有

方程 3：c = 1000 - a - b

将 eq 3 中的 c 值代入 eq 1 我们得到：

方程 4：a ² + b ² = (1000 - a - b) ²

eq 4 的 RHS 是三项式平方。我们知道这种三项式的平方是

(a - b - c) ² = a ² + b ² + c ² – 2ab + 2bc – 2ca

我们得到：

a ² + b ² = 1000 ² + a ² + b ² – 2*1000*a + 2*a*b – 2*b*1000

现在我们简化到 LHS

a = (1000 ² - 2*1000*b)/(2*1000*b)

现在我可以用它来找出 a 的值，它是一个整数，然后使用 Math.sqrt( a *a + b* b ) 来计算 c 的值。然后我可以检查 a+b+c==1000 是否成立。

我的解决方案：

```
public class ProjectEuler9 {
    public static void main(String[] args) {
        long start = System.nanoTime();
        double a;
        for(int b=1; b<1000; b++){
            a = ( (Math.pow(1000, 2) - 2000*b ) / (2000- 2*b) );
            if(Math.floor(a) == a) {
                // a is an integer
                double c = Math.sqrt((a*a + b*b));
                System.out.println("a : " + a + " b :" + b + " c : " + c);
                long product = (long) (a*b*c);
                System.out.println("product abc : " + product);
                break;
            } else {
               //a is not an integer.
            }
        }
        long stop = System.nanoTime();
        System.out.println("\nTime: " + (stop - start) / 1000 + " ns");
    }
} 
```

输出 ：

```
a : 375.0 b :200 c : 425.0
product abc : 31875000

Time: 3714 ns 
```

# c# - C#线程多次调用但运行一次

> ID：16143500
> 
> 赞同：4
> 
> 时间：2013-04-22T09:21:13.580
> 
> 标签：c#, multithreading, abort

基本上我有一个带有按钮的表单，当按下按钮时，它会创建一个运行线程的类的实例。当线程完成时，它会自动调用 Thread.Abort()。

我目前拥有的代码归结为：

按钮：

```
private void Buttonclick(object sender, EventArgs e)
{
     MyClass c = new MyClass()
     c.Do_your_thing();
} 
```

班级：

```
public class MyClass
{
    Thread t;

    public void Do_your_thing()
    {
         t = new Thread(Running_code);
         t.Start();
    }

    private void Running_code()
    {
         //Perform code here
         t.Abort();
    }
} 
```

当我单击一次按钮时，一切正常。但是当我再次按下按钮时，什么也没有发生。

当我不使用 t.Abort() 时，一切正常。但是不使用 t.Abort() 会导致内存泄漏并且程序无法正常关闭（线程永远不会关闭，因此进程将保持活动状态）。

谁能解释我发生了什么事？我该如何解决？

编辑：根据要求，我发布了一些实际代码

```
public class MyClass
{
    public void Test()
    {
        t = new Thread(() =>
            {
                wb.DocumentCompleted += get_part;
                wb.Navigate("http://www.google.com");
                Application.Run();
            });

        t.SetApartmentState(ApartmentState.STA);
        t.Start();
    }

    public void get_part(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        var br = sender as WebBrowser;
        string url = e.Url.ToString();

        //Here is some code that compares the url to surten predefined url. When there is a match, it should run some code and then go to a new url

        if(url == string_final_url)
        {
            //Finally at the url I want, open it in a new Internet Explorer Window
            Process proc = Process.Start("IExplore.exe", url);           
        }
    }
} 
```

这是一个小的网络爬虫程序的一小部分。它导航到需要一些登录信息的网页。当我到达我真正想要的页面时，他应该在新的 Internet Explorer 中打开它。

当我调用此代码并关闭表单时，它仍然在进程树中可见。而且当我多次单击该按钮时，使用的内存不断增加，我怀疑这是某种内存泄漏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:26:47.507

首先，永远不要使用`Thread.Abort()`, 。请参阅[此 thread.abort() 正常且安全吗？](https://stackoverflow.com/questions/421389/is-this-thread-abort-normal-and-safe)有关原因的更多详细信息。

> [网上](http://www.google.com/search?q=Thread.Abort)[有](http://blogs.msdn.com/ankur/archive/2005/11/30/498293.aspx)[很多](http://msmvps.com/blogs/senthil/archive/2008/12/17/the-dangers-of-thread-abort.aspx) [关于](http://www.interact-sw.co.uk/iangblog/2004/11/12/cancellation)使用. [_](http://www.manning-sandbox.com/message.jspa?messageID=33703) [_](http://haacked.com/archive/2004/11/12/how-to-stop-a-thread.aspx) 除非真的需要，否则我建议避免使用它，在这种情况下，我认为不需要。你最好只实现一个单次计时器，可能有半秒的超时，并在每次击键时重置它。这样，您的昂贵操作只会在用户不活动半秒或更长时间（或您选择的任何长度）后发生。 `Thread.Abort()`

[`Join()`您可以使用Method](http://msdn.microsoft.com/en-gb/library/system.threading.thread.join.aspx)代替使用 abort 。此方法阻塞调用线程，直到线程终止。

它使用的一个例子是

```
Thread t1 = new Thread(() => 
{ 
    Thread.Sleep(4000);
    Console.WriteLine("t1 is ending.");
});
t1.Start();

Thread t2 = new Thread(() => 
{ 
    Thread.Sleep(1000);
    Console.WriteLine("t2 is ending.");
});
t2.Start();

t1.Join();
Console.WriteLine("t1.Join() returned.");

t2.Join();
Console.WriteLine("t2.Join() returned."); 
```

我希望这有帮助。

* * *

*编辑*. 处理您的评论；对 Join() 的调用是取消分配线程的原因。你不必做任何其他事情。只需确保线程在退出之前清理它们可能正在使用的任何资源。

也就是说，我敦促您考虑使用线程池或任务并行库 (TPL)，而不是显式管理线程。它们更易于使用，并且处理此类事情更加顺畅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:41:10.153

您是否可以使用.net 4 +，如果可以的话，您可以使用 TPL，这将大大简化为

```
public class MyClass
    {
        public void Do_your_thing()
        {
            // for async execution
            Task.Factory.StartNew(Running_code);

            // for synchronous execution
            // CAUTION !! If invoked from UI thread this will freeze the GUI until Running_code is returned.
            //Task.Factory.StartNew(Running_code).Wait(); 
        }

        private void Running_code()
        {
           Thread.Sleep( 2000 );
           Debug.WriteLine( "Something was done" );
        }
    } 
```

此外，如果 Running_Code 方法正在执行 IO 绑定的操作，则 TPL 可以利用 IO 完成端口，并且该操作可能完全是无线程的。

编辑：

看看这个 SO 线程。[新线程中的 WebBrowser 控件](https://stackoverflow.com/questions/4269800/webbrowser-control-in-a-new-thread)。

显然 webbrowser 控件不能很好地与非 UI 线程配合使用。

# c++ - linux c++ 应用部署

> ID：16143501
> 
> 赞同：1
> 
> 时间：2013-04-22T09:21:14.443
> 
> 标签：c++, log4cxx

我正在尝试使用 log4cxx.so 部署 c++ 应用程序，并且需要 glibc 2.14，但正在部署的机器具有 2.12 glibc。是否需要将此机器升级到 glibc 2.14 才能运行此应用程序？还是有其他更便携的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:26:51.387

Linux 二进制可移植性是一种痛苦。Linux 使用符号版本控制，因此您应该能够找出需要哪些符号：

```
nm binary | grep @@GLIBC_ | sort -t@ -k14 
```

您也许可以内联函数并删除对 newer 的依赖`glibc`。

[你可以在这里](http://www.pixelbeat.org/programming/linux_binary_compatibility.html)阅读更多。通常，可移植性的最佳选择是针对旧版本进行编译`glibc`或仅提供源代码和`MAKEFILE`.

# c# - 如何记录我的控制台应用程序的 CPU/网络使用情况，替代 c# 中的单元测试

> ID：16143504
> 
> 赞同：0
> 
> 时间：2013-04-22T09:21:26.967
> 
> 标签：c#, performance, logging, profiling, cpu

我有分析和优化一组代码。现在我实际上只是手动查看了单元测试的运行时并一直在查看 Windows 中的资源管理器。

我的单元测试现在可以正常工作，一切正常。我想记录我的发现，并且需要记录 CPU 和网络使用情况，而不是自己查看。

如果我可以直接在我的单元测试中执行它，那会很好，但是确实存在一些开销，因此我确实将代码放在了控制台应用程序中。

我如何最简单地记录 CPU / 网络使用情况，如 Windows 8 中资源管理器中显示的数字（非常详细）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:32:17.980

**计算性能CPU/内存地址的解决方案**

1.  如果您想手动执行此操作，您可以添加“命名空间”“System.Diagnostic”并使用“StopWath”类，它允许您检索计算应用程序性能的时间和调用函数的时间。

    在这里查看使用 Microsoft 示例的“StopWath”类与计算性能。 [秒表如何使用？](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

    1.  或者，您也可以使用名为 Microsoft **“CLR Profiler”**的绝妙工具来计算应用程序的性能。**网络 C# 或 ASP**。应用程序完成了内存上的可视化语音以及每次调用之间的时间来管理“垃圾收集器”

    [如何使用 Clr Profiler](http://msdn.microsoft.com/en-us/library/ff650691.aspx)

    [下载 Clr 分析器](http://download.microsoft.com/download/4/4/2/442d67c7-a1c1-4884-9715-803a7b485b82/clr%20profiler.exe)

**计算性能网络流量的解决方案**

[您可以使用 Visual Studio 中的网络模拟](http://blogs.msdn.com/b/lkruger/archive/2009/06/08/introducing-true-network-emulation-in-visual-studio-2010.aspx)

或者这个应用程序：

[网络嗅探器 c#](http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C)

[网络嗅探器和连接分析器](http://www.codeproject.com/Articles/8254/Network-Sniffer-and-Connection-Analyzer)

[嗅探网络客户端](http://www.codeproject.com/Articles/3961/Sniff-Web-Clients-using-ASP-NET)

# ruby-on-rails - 如何在 Rails 网络应用程序上按国家/地区实施版本

> ID：16143508
> 
> 赞同：1
> 
> 时间：2013-04-22T09:21:31.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, gem

我需要为每个国家创建一个不同的网络应用程序（不仅是不同的语言）。假设该网站列出了该国的保险解决方案。

例如，法国用户输入 example.com 需要被发送到[http://france.example.com](http://france.example.com)，美国用户需要访问[http://us.example.com](http://us.example.com)

所有网站都将具有相同的显示/布局，但页面中的内容会有所不同，因为每个国家/地区的保险公司和公司都不相同。

我想要的是：

*   在我的后端：管理多个“国家版本”，我可以在其中一次改进功能、布局等，而无需更新每个版本的代码。所有国家/地区版本都会以这种方式保持相似的状态。

*   在后端：创建一个过滤器，将我在后台输入的保险项目“发送”到正确的国家/地区-wesbite。

例如，这意味着描述法国保险 ALpha 的页面仅存在于法国版本 ( [http://france.example.com/alpha_insurance_description](http://france.example.com/alpha_insurance_description) ) 中，而不存在于其他国家/地区版本中。

我必须实现什么样的架构？是否有解决此类问题的 Rails 宝石？（如果不是一些描述如何创建这种多国网站的网站）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:25:22.473

I would just use the geoIP data (or user preferences) to find out which country to show and have the content stored in the DB (e.g. insurance companies) with a country code. Seeing as an insurance company will have an address and postcode anyway, this should be pretty simple. That way, both the content and the site language can be set dynamically.

As for the subdomains, you can CNAME all of them to your main site and use a little piece of Rack middleware (hand rolled) to redirect requests to the right subdomain if necessary. After that, the site ignores the subdomain itself and just server content dynamically. Alternatively, you could have some code in the application config that reads the subdomain from the Rack request, extracts the country code, and sets it as a config variable that you then use to flag what country code to use when showing the dynamica content, setting the language, etc.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:29:50.387

“多租户”是您想要的。以下两个 railscasts 解释了实现相同目的的两种不同方法。

[http://railscasts.com/episodes/389-multitenancy-with-postgresql](http://railscasts.com/episodes/389-multitenancy-with-postgresql)

[http://railscasts.com/episodes/388-multitenancy-with-scopes](http://railscasts.com/episodes/388-multitenancy-with-scopes)

您还可以使用[subdomain-fu](https://github.com/mbleigh/subdomain-fu)进行子域处理和路由验证。

# ios - 使用 GCDAsyncSocket 进行同步通信

> ID：16143516
> 
> 赞同：2
> 
> 时间：2013-04-22T09:21:46.590
> 
> 标签：ios, objective-c, grand-central-dispatch, cocoaasyncsocket, gcdasyncsocket

我在我的应用程序中使用`GCDAsyncSocket`( `CocoaAsyncSocket`) 进行套接字通信。由于 的异步特性`GCDAsyncSocket`，我的网络请求（`submitMessage`如下）与接收数据时运行的回调块（`socket:didReadData`）分离。

```
- (void)submitMessage:(NSDictionary *)messageObject onCompletion:(completionBlock)block {
    ...
    [_socket writeData:requestData withTimeout:self.timeout tag:0];
    [_socket readDataToLength:4 withTimeout:self.timeout tag:TAG_HEADER];
}

- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
    ...
    NSDictionary *responseObject = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];
    if (self.completionBlock != nil)
        self.completionBlock(responseObject);
    }
} 
```

这种方法适用于一次性交易。但是在某些情况下，我需要发布一个请求，然后使用接收到的数据，发布另一个请求。我无法让它正常工作。基本上，我需要这样的东西：

```
[self submitMessage:request1 onCompletion:^(NSDictionary *response1) {
    (...callback 1...)
    }];
    [self submitMessage:request2 onCompletion:^(NSDictionary *response2) {
        (...callback 2...)
    }];
}]; 
```

或者

```
[self submitMessage:request1 onCompletion:^(NSDictionary *response1) {
    (...callback 1...)
}];
[self submitMessage:request2 onCompletion:^(NSDictionary *response2) {
    (...callback 2...)
}]; 
```

严格的顺序是 request1 - callback1 - request2 - callback2。

那么问题来了，如何在第一个请求回调后阻止第二个请求运行呢？`GCD`（？`dispatch_sync`）会是要走的路吗？

**编辑**

我最终使用了类似于@tigloo 建议的解决方案（因此接受了他的回答），但使用`NSCondition`了代替`GCD`（如果有人对细节感兴趣，我遵循[了这个很棒的讨论](https://stackoverflow.com/questions/6704072/how-do-i-use-nsconditionlock-or-nscondition)）。我已经在运行多个线程（主线程中的 UI，另一个线程中的高级套接字通信，以及第三个线程中的套接字操作）。设置类属性并使用`NSCondition`锁定`GCDAsyncSocket`委托直到响应到达似乎是最干净的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:06:27.453

我想你几乎在那里。关于什么

```
[self submitMessage:request1 onCompletion:^(NSDictionary *response1) {
    // here, do something with response1 and create request2...
    // then you can make request2 directly at the end of the callback:
    [self submitMessage:request2 onCompletion:^(NSDictionary *response2) {
        // here, do something with response2...
    }];
}]; 
```

不需要 GCD 指令，不需要阻止执行（无论如何这是一个不好的做法）。这能解决你的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:30:33.827

最简单的方法是将您的请求附加到串行调度队列，然后使用 dispatch_sync() 等待它们完成。[可以在这里找到关于 StackOverflow 的讨论](https://stackoverflow.com/questions/4607125/usage-of-dispatch-sync-in-grand-central-dispatch)。

实现它的实际方式取决于您的喜好。一个可能的想法如下：

*   创建一个新类“SyncRequest”
*   理想情况下，此类具有 bool 类型的私有属性“requestFinished”，在类的 init 方法中初始化为 NO
*   在诸如“sendSyncRequest”之类的方法中，您调用 submitMessage:completionBlock：
*   完成块将“requestFinished”属性设置为YES
*   “sendSyncRequest”的最后一行是 dispatch_sync(syncRequestQueue, ^(void){while(!requestFinished);});

这样，您可以构造多个 SyncRequest 实例，每个实例处理一个同步请求。粗略的实现：

```
@interface SyncRequest
@property bool requestFinished;
@end

@implementation SyncRequest

dispatch_queue_t syncRequestQueue;    

-(id)init
{
   self = [super init];
   if ( !self )
      return nil;

   self.requestFinished = NO;
   syncRequestQueue = dispatch_queue_create("com.yourid.syncrequest", DISPATCH_QUEUE_SERIAL);

   return self;
}

-(void) sendSyncRequest:(NSDictionary*)messageObject
{
   // submit message here and set requestFinished = YES in completion block

   // wait for completion here
   dispatch_sync(syncRequestQueue, ^(void){while(!self.requestFinished);});
}

@end 
```

注意：我在没有编译器的情况下编写了代码，您可能必须在 dispatch_sync 调用中创建对“self”的间接引用以避免循环引用。

# c# - 构造函数和析构函数调用

> ID：16143522
> 
> 赞同：1
> 
> 时间：2013-04-22T09:22:01.670
> 
> 标签：c#, c++, oop

当我们创建派生类的对象时，为什么构造函数是以自上而下的方式调用（首先是基构造函数，然后是派生构造函数）并且是自下而上调用的析构函数（先是派生构造函数，然后是基构造函数） )

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T09:33:05.250

为了向新手解释，假设您正在建造一座新建筑。

你建造地下室，一楼，二楼。摧毁时，你摧毁 2 楼、1 楼和地下室。

同样，对象的构造/销毁发生在 C++ 中。

希望这有助于理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:24:45.883

Memory allocation is independent of calling constructors and destructors. When constructing a derived object, memory for the whole type will be allocated.

Then, its constructor is called (not the base constructor). However, this constructor first calls the base class constructor. Per default, the base's default constructor gets called, but you can specify how to call the base constructor within the derived constructor. If no such exists and you don't specify how to construct the base class, it's a compile error.

```
class Base {
    int x;
public:
    Base() : x(42) {}
};

class Derived : public Base {
    int y;
public:
    Derived() : Base(), y(1337) {}
    // is the same as: Derived() {}
}; 
```

Here, `Base()` isn't possible (it doesn't provide a default constructor):

```
class Base {
    int x;
public:
    Base(int x) : x(x) {}
};

class Derived : public Base {
    int y;
public:
    Derived() : Base(),   y(1337) {}  // <-- error!
    Derived() : Base(42), y(1337) {}  // <-- ok!
}; 
```

So as you can see, technically the derived constructor is the first one being called. But since it calls the base constructor at the very beginning, it's effectively the other way around: The base is constructed, then the derived class "adds" its own stuff.

The destruction is simply the other way around: An instance of the derived class needs to clean up the stuff it adds to the base class before the base can be destructed.

Think of this simply as building a house: You have to build the base first, then add the stories, finally the roof. When destructing, first remove the roof, then the stories and finally get rid of the base.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:13:12.637

这是另一个规则的结果：在进入派生构造函数的主体之前调用所有基构造函数，并且在离开派生析构函数的主体之后调用所有基析构函数。

考虑这个（过于简单的）代码：

```
class BaseMember
{
public:
    bool Pred();
};

class DerivedMember
{
public:
    void DoFirst(bool);
    void DoLast(bool);
};

class Base
{
public:
    Base() {baseMember=new BaseMember;}
    ~Base(){delete baseMember;}
protected:
    BaseMember *baseMember;
};

class Derived: public Base
{
public:
    Derived()
    {
        derivedMember=new DerivedMember;
        derivedMember->DoFirst(baseMember->Pred());
    }
    ~Derived()
    {
        derivedMember->DoLast(baseMember->Pred());
        delete derivedMember;
    }
protected:
    DerivedMember *derivedMember;
}; 
```

我们可以写这样的东西，因为在进入 Derived 构造函数体之前，我们依赖于完全构造的 Base（所有 Base 的构造函数都已完成，所有 Base 成员构造函数也已完成，Base 的构造函数体也已完成）。这样，我们可以使用所有基础的成员，知道它们是构造的。当我们进入 Derived 析构函数的主体时，我们知道还没有任何东西被破坏，所以我们可以使用所有基地的成员，知道它们仍然存在并且稍后将被破坏。

构造函数/析构函数调用层次结构是这种逻辑的结果。如果我们在进入 Derived() 的主体之前调用 Base 构造函数，而 Base 本身是从 BaseOfBase 派生的，那么 Base 构造函数会在进入 Base() 的主体之前调用 BaseOfBase() 构造函数。如果我们在离开 ~Derived() 析构函数的主体后调用 ~Base() 析构函数，那么 ~BaseOfBase() 析构函数将在 ~Base() 析构函数完成后调用。

在 C++ 中，多重继承（和虚拟继承）将进一步复杂调用层次结构，但同样的逻辑也适用于这种情况。

# telephony - Avaya IP Office TAPI 驱动程序仅显示第一个分机

> ID：16143523
> 
> 赞同：1
> 
> 时间：2013-04-22T09:21:59.490
> 
> 标签：telephony, tapi, avaya

我已经接管了 Avaya IP Office PBX 的 CTI 项目，并正在尝试解决客户在现场进行新安装的问题，我在办公室的测试系统上也遇到了该问题。我们的 CTI 应用程序使用 Avaya TAPI 驱动程序与 PBX 通信，我已将 TAPI 驱动程序配置为 PBX 的 IP 地址，启用第三方模式（我需要查看来自所有分机的数据），启用 ACD 队列并输入正确的密码。我还在驱动程序中打开了调试跟踪。我正在使用 Astice TAPI 监视器在打开我们的应用程序之前检查一切是否正常，但问题出在：在 Windows 中，只有在交换机上配置的第一个扩展名显示在 Windows 中，

在我的测试系统上，IP Office 本身似乎配置正确（AFAIK 在 PBX 上没有太多配置要做）并且 CTI Link Pro 许可证已启用并显示为有效并设置为永不过期。

有人知道为什么只显示第一个扩展名吗？

编辑：我发现这个问题只发生在 Windows 7 上，在 Windows XP 上很好。这意味着问题极不可能是由 PBX 上的任何设置引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T08:55:49.320

在（不太可能）其他人遇到此问题的情况下，这实际上是由于 Avaya TAPI 驱动程序不支持 Windows 7。我从 Avaya 购买了一个更新的驱动程序来解决该问题。这些驱动程序通常不可用，因此您需要与 Avaya 签订支持或合作合同。据推测，如果您正在查看类似的问题，那么这将不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-13T08:03:27.150

在我的情况下，我尝试为第三方使用密码“Administrator”，并且“phone.exe”中有一个名为“Line unnamed”的扩展名，问题出在密码中：默认为“password”。

# parsing - 反序列化包含 Json 字符串的 Json 对象

> ID：16143529
> 
> 赞同：0
> 
> 时间：2013-04-22T09:22:16.827
> 
> 标签：parsing, json

我有一个问题，在对象中已经有 Json 字符串的情况下，我无法将 Json 字符串反序列化为对象。

前任：

```
Class A { 

int a;

String jsonRpresenationOfSomeObject;

// other stuff
} 
```

我无法反序列化上述 A 类的对象。我得到字段“ `jsonRpresenationOfSomeObject`”的异常

自定义反序列化器不是我的用例的选项。我正在寻找通用的东西。还发现 Gson 库没有运气。
将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:10:12.757

对于您的上述场景，在 JSON 中序列化和反序列化没有问题。我已经尝试过，发现 JSON 能够正确反序列化您的类。我认为他们可能是您班级的访问说明符的问题。

如果您仍然遇到问题，请向我们提供示例源。

# android - RFC_ERROR_LOGON_FAILURE：名称或密码不正确

> ID：16143531
> 
> 赞同：0
> 
> 时间：2013-04-22T09:22:18.990
> 
> 标签：android, sup

我创建了一个以 SAP 作为后端的应用程序。

我的应用程序出现以下错误：

> com.sap.mw.jco.JCO$Exception: (103) RFC_ERROR_LOGON_FAILURE: 尝试与 mbos 同步时，名称或密码不正确（重复登录）。

我在之前的帖子中读到这个错误是因为“用户名和密码不正确”。有人可以指导我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T17:27:15.430

正如错误所暗示的那样，当 RFC 正在执行并且其身份验证参数不正确时，就会发生这种情况。

这可以在 SUP 工作空间中更正。需要在企业资源管理器窗口下的 SUP 连接配置文件中更改身份验证详细信息。

然后，您可以通过 Ping 服务器/预览您的 MBO 来检查这一点。

警告：使用错误密码多次尝试 Ping EIS/预览 MBO 可能会锁定您的系统。

# javascript - 对象不支持属性或方法“按钮”jQuery 自动完成组合框

> ID：16143533
> 
> 赞同：0
> 
> 时间：2013-04-22T09:22:21.670
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-autocomplete

我基本上从其官方网站复制了示例文件并按顺序添加：

```
<script src="js/jquery-1.8.2.min.js" type="text/javascript"></script>
<style type="text/css">
  .ui-autocomplete-loading {
      background: url('js/autocomplete/css/ui-lightness/images/ui-anim_basic_16x16.gif') no-repeat right center;
  }
  .ui-combobox {
    position: relative;
    display: inline-block;
  }
  .ui-combobox-toggle {
    position: absolute;
    top: 0;
    bottom: 0;
    margin-left: -1px;
    padding: 0;
  }
  .ui-combobox-input {
    margin: 0;
    padding: 0.3em;
  }
</style>
<script src="js/autocomplete/js/jquery-ui-1.10.2.custom.min.js" type="text/javascript"></script>
<link href="js/autocomplete/css/ui-lightness/jquery-ui-1.10.2.custom.min.css" rel="stylesheet"/>
<script src="js/combocontrol.js" type="text/javascript"></script> 
```

combocontrol.js 包含与站点中相同的特定自动完成组合框。

有了这个，我得到了错误：`Object doesn't support property or method 'button'`在该行：

```
$("<a />")
                .insertAfter(this.element)
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })... 
```

我知道我正在使用不同的版本。但是我有其他依赖，所以我必须使用它。此外，这应该不是问题，因为我只使用它们一次而不是多次附加！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:26:59.197

真的，我们不应该忘记基础知识。他们都说了。

实际上，我从 jQuery 网站下载的自定义 js 只有自动完成小部件。并且此代码正在调用`button`方法，并且不包含在包中。`button`所以，我用jQuery的组件/小部件重新下载了这个包。我的无知！！

# actionscript-3 - 如何选择数组的一部分？或者将一个数组的部分与另一个数组的部分匹配？

> ID：16143534
> 
> 赞同：0
> 
> 时间：2013-04-22T09:22:21.867
> 
> 标签：actionscript-3, drag-and-drop, flash-cs5

我有一些拖放功能，其中有 8 个项目（dragArray）可以拖放到 2 个大“着陆区”（matchArray）上。但是由于我不希望它们彼此重叠，所以我制作了一个数组，在其中给定了它们的位置 (posArray)。

```
var dragArray:Array = [drag_1, drag_2, drag_3, drag_4, drag_5, drag_6, drag_7, drag_8];
var matchArray:Array = [drop_1, drop_1, drop_1, drop_1, drop_2, drop_2, drop_2, drop_2];
var posArray:Array = [{x:412,y:246},{x:530,y:218},{x:431,y:186},{x:470,y:152},{x:140,y:111},{x:108,y:162},{x:179,y:210},{x:113,y:254}]; 
```

当所有 8 个项目都被丢弃时，会出现一个检查按钮，我想检查它们是否被丢弃到正确的大着陆区。我尝试使用以下内容：

```
if (posArray[i].x != dragArray[i].x || dragArray[i].y != posArray[i].y ) 
```

但是，不仅着陆区必须匹配，而且位置也必须匹配。

当我使用

```
if (matchArray[i].x != dragArray[i].x || dragArray[i].y != matchArray[i].y ) 
```

它不起作用，因为 (dragArray) 项目的位置与 (matchArray) 着陆区域的注册点不匹配。

有没有办法检查前 4 个（drag_1、drag_2、drag_3、drag_4）项目是否与前 4 个 posArray 位置中的任何一个匹配，最后 4 个（drag_5、drag_6、drag_7、drag_8）是否与最后 4 个 posArray 中的任何一个匹配职位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:04:51.373

如果目标是检查一组中的每个元素与另一组的所有元素，那么您需要有两个循环，一个“嵌套”在另一个中。该算法在 AS3 中的一般形式如下所示

```
var allMatched:Boolean = true;

for(var i:Number=0; i<array1.length; i++)
{
    var matchFound:Boolean = false;
    for(var j:Number=0; j<array2.length; j++)
    {
        if(array1[i]==array2[j])
        {
            matchFound=true;
            break; //exit the inner loop we found a match
        }
    }
    if(!matchFound)
    {
        allMatched=false;
        break; //we found an element in one set not present in the other, we can stop searching
    }
}
if(allMatched)
     trace("Everything from array1 was found somewhere in array2");  //For an element a in the set A there exists an element b in set B such that a = b 
```

让我知道这是否有帮助

# c++ - “&”在运算符重载中是什么意思

> ID：16143540
> 
> 赞同：-4
> 
> 时间：2013-04-22T09:22:41.827
> 
> 标签：c++

以下是运算符重载的示例代码。“&”在语法中是什么意思

```
complx operator+(const complx&) const; ? 
```

* * *

```
#include <iostream>
using namespace std;
class complx
{
      double real,
             imag;
public:
      complx( double real = 0., double imag = 0.); // constructor
      complx operator+(const complx&) const;       // operator+()
};

// define constructor
complx::complx( double r, double i )
{
      real = r; imag = i;
}

// define overloaded + (plus) operator
complx complx::operator+ (const complx& c) const
{
      complx result;
      result.real = (this->real + c.real);
      result.imag = (this->imag + c.imag);
      return result;

}

int main()
{
      complx x(4,4);
      complx y(6,6);
      complx z = x + y; // calls complx::operator+()
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:24:10.273

这意味着您传递的是对变量的[引用](http://en.wikipedia.org/wiki/Reference_%28C++%29)，而不是它的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:37:17.640

```
(const complx&) 
```

1.  您通过引用传递值。

2.  引用只是原始对象的别名。

3.  这里避免了额外的复制操作。如果您使用了像 : (const complex) 这样的“按值传递”，则为形参调用 complex 的复制构造函数。

希望这在一定程度上有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:32:07.570

这称为[通过引用传递](http://www-cs-students.stanford.edu/~sjac/c-to-cpp-info/references)，它*并不*特定于`operator overloading`. 这是您将参数传递给函数的方法之一 [1.Pass by Copy, 2.Pass by address, 3.Pass by Reference]。当 您在函数中修改原始参数值时，您可以`C`使用它。[`pointers`](http://denniskubes.com/2012/08/16/the-5-minute-guide-to-c-pointers/)但`Cpp`也提供`pass by reference`，附加的名称`&`类似于传递参数的替代名称。[并且还使您免于所有与指针相关的取消引用和东西]

# c# - 我在 ToolStripSeparator c# 中看不到 RenderMode-property

> ID：16143543
> 
> 赞同：2
> 
> 时间：2013-04-22T09:22:51.993
> 
> 标签：c#, winforms

我的`RenderMode`-property有问题`ToolStripSeparator`。

当我输入以下代码行时：

```
this.toolStripSeparator1.RenderMode = ToolStripRenderMode.System; 
```

我有以下错误：

> 错误 44“System.Windows.Forms.ToolStripSeparator”不包含“RenderMode”的定义，并且找不到接受“System.Windows.Forms.ToolStripSeparator”类型的第一个参数的扩展方法“RenderMode”（您是否缺少使用指令还是程序集引用？）

尽管如此，我还是把参考

```
using System.Windows.Forms; 
```

以下是我的参考列表

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Threading;
using System.Diagnostics; 
```

您有什么想法可能导致此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:32:08.513

ToolStripRenderMode Enumeration 的值可以分配给 ToolStrip 的 RenderMode 属性。ToolStripSeparator 没有任何此类属性。

我认为你应该这样使用它：

```
toolStrip1.RenderMode=ToolStripRenderMode.System; 
```

# php - 贝宝安全漏洞？

> ID：16143548
> 
> 赞同：2
> 
> 时间：2013-04-22T09:23:04.720
> 
> 标签：php, security, paypal, paypal-ipn

我在预订流程结束时有以下表格（简化版）：

```
<form action="https://www.paypal.com/cgi-bin/webscr" name="paypalForm" method="post">
<input type="hidden" name="amount" value="<?=$price;?>">
<input type="hidden" name="business" value="business@email.co.uk">
<input type="hidden" name="notify_url" value="http://website.co.uk/ipn">
</form> 
```

我只省略了地址名称等内容。因此，当他们通过 Paypal 付款时，我使用 paypal IPN 在数据库中将它们标记为已付款。 *然而*..

我已经到了我的预订系统的末尾并查看了网页的来源，修改了企业电子邮件地址和金额。我还没有尝试过完整的交易，但肯定有 Paypal 中的“notify_url”向我的服务器发送 IPN 消息并将此人标记为已付款？这不是可怕的安全吗？当然，这不是所有贝宝付款的运作方式，我一定是遗漏了一些东西。

我能想到两件事可能会阻止这种情况：

1.  如果我删除“notify_url”，我*在*paypal 中设置的 IPN URL 是否可以使用？贝宝在隐藏的 var 上放置了什么值`notify_url`，它会覆盖贝宝后端的设置吗？
2.  在我的 IPN 代码中，我可以检查业务和金额。我目前没有，因为我没有阅读文档中我应该阅读的任何地方。但现在，我想这也许是一个非常好的主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:42:23.470

PayPal 无法进行任何检查以了解正确的金额或使用的电子邮件地址，或者 IPN URL 应仅用于特定的 PayPal 帐户。您的选项将写在您已经提到的附加检查中。除了您已经说明的两种解决方法之外，第三种选择是使用 PayPal 的[BMCreateButton API](https://www.x.com/developers/paypal/documentation-tools/api/bmcreatebutton-api-operation-nvp)即时创建托管或加密按钮。然后买家只会看到加密的按钮代码，他们将无法查看您的 HTML 按钮代码。因此，他们将无法修改任何变量，或查看它们当前设置的内容。

# mysql - 具有许多删除和插入的 Innodb 表 - 是否浪费了任何磁盘空间？

> ID：16143552
> 
> 赞同：0
> 
> 时间：2013-04-22T09:23:15.367
> 
> 标签：mysql, database, innodb

我有一个很大的（500GB）innodb 表，我正在执行许多插入和删除操作。innodb_file_per_table 在我的 var 配置中设置。我知道它可能包含大量“浪费”的磁盘空间，由于 innodb 的性质，问题是预期有多少，以及是否有办法在我的特定表中找出该数字。据我了解，它重新使用了在此期间创建的未使用空间，`delete`所以如果我继续这样做，`inserts`我在执行[重新声明程序](https://stackoverflow.com/questions/3927690/howto-clean-a-mysql-innodb-storage-engine/4056261#4056261)时不应该遇到任何重大差异？作为一个经验法则，磁盘空间浪费的上限和下限是什么？定义它的使用模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:42:31.150

如果你启用了 innodb_file_per_table，我有一些好消息。除了对表格进行碎片整理之外，您还可以做很多事情。您可以缩小表格。为了找出您将回收多少空间，请按照以下步骤操作：

对于这些步骤，让我们使用 InnoDB 表`mydb.mytable`

```
GIVEN_DB=mydb
GIVEN_TB=mytable
MYSQL_CONN="-root -p...."
SQLSTMT="SELECT data_length+index_length FROM information_schema.tables WHERE"
SQLSTMT="${SQLSTMT} table_schema='${GIVEN_DB}' AND table_name='${GIVEN_TB}'"
IBDSIZE=`ls -l /var/lib/mysql/${GIVEN_DB}/${GIVEN_TB}.ibd | awk '{print $5}'`
TBLSIZE=`mysql ${MYSQL_CONN} --skip-column-names -Ae"${SQLSTMT}"`
(( FRGSIZE = IBDSIZE - TBLSIZE ))
FRAGPCT=`echo ${FRGSIZE}00/${IBDSIZE}|bc`
echo ${IBDSIZE} ${TBLSIZE} ${FRGSIZE} ${FRAGPCT} 
```

这将打印 4 个数字

*   `IBDSIZE`: 从 OS 角度看 InnoDB 单个表空间的大小
*   `TBLSIZE`：来自 INFORMATION_SCHEMA 数据库的 InnoDB 表的大小
*   `FRGSIZE`:`IBDSIZE`和的差`TBLSIZE`（以字节为单位）
*   `FRAGPCT``IBDSIZE`:和的百分比差异`TBLSIZE`

如果你不喜欢多高`FRAGPCT`，可以通过三种方式缩小`mydb.mytable`：

选项1 ：`OPTIMIZE TABLE mydb.mytable;`

选项 2：`ALTER TABLE mydb.mytable ENGINE=InnoDB;`

选项 3：分阶段运行压缩

```
CREATE TABLE mydb.mytabletmp LIKE mydb.mytable;
INSERT INTO mydb.mytabletmp SELECT * FROM mydb.mytable;
DROP TABLE mydb.mytable;
ALTER TABLE mydb.mytabletmp RENAME mydb.mytable; 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:30:23.983

MySQL / InnoDB 不提供“释放”空间的功能，但它将重新使用已删除行中的空间用于将来的插入语句。

定期运行`OPTIMIZE TABLE`（[更多信息](http://dev.mysql.com/doc/refman/5.1/en/optimize-table.html)）将有助于最大化您可以重用的数量以及提高 I/O 性能（它基本上就像数据库的碎片整理）。

# bit-manipulation - 将带符号的 13 位值转换为带符号的 16 位

> ID：16143553
> 
> 赞同：0
> 
> 时间：2013-04-22T09:23:15.917
> 
> 标签：bit-manipulation

有没有比我下面得到的更漂亮的方法来将有符号的 13 位值转换为有符号的 16 位值？这两个值都位于 16 位字中，13 位值被移动了 3 位。

```
S = Sign, O = Value bit, X = Unused
a is the signed 13-bit | SOOO OOOO OOOO OXXX
b is the signed 16-bit | SOOO OOOO OOOO OOOO 
```

当前实施

```
b = a & 0x7FF8;        // Remove sign         XOOO OOOO OOOO OXXX
b = b >> 3;            // Shift value 3 bit   XXXO OOOO OOOO OOOO
b = b | (a & 0x8000);  // Add sign            SXXO OOOO OOOO OOOO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:42:33.787

有符号类型的右移是实现定义的（至少在 C 中 - 你实际上没有提到你在这里使用的语言），但假设你的编译器就像 99% 的其他编译器一样，并且对有符号值进行*算术*右移那么你只需要：

```
b = a >> 3; // Syyy yyyy yyyy yxxx => SSSS yyyy yyyy yyyy 
```

显然，您应该对此进行测试和/或检查您的编译器文档。

[还请注意，这假设我们正在讨论值的 2 的补码表示 - 同样它没有在您的问题中指定。]

# java - Java SocketException 已达到最大数据报套接字数

> ID：16143554
> 
> 赞同：0
> 
> 时间：2013-04-22T09:23:23.533
> 
> 标签：java, udp, multicast, socketexception

我有一个`java`应用程序运行在应用程序容器上，目前我遇到一个错误`centos 6.3`：`tomcat 7``java.io.socketexception Maximum number of datagram sockets reached`

我们使用`MulticastSocket`类来发送消息。发生此错误时，我使用以下`UDP socket`命令检查当前服务器计数：`ss -s`

**总计：212（内核 248）** TCP：70（estab 15，关闭 44，孤立 0，synrecv 0，timewait 40/0），端口 22

```
Transport  Total     IP        IPv6
*          248       -         -        
RAW        0         0         0        
UDP        40        40        0        
TCP        26        26        0        
INET       66        66        0        
FRAG       0         0         0 
```

我还检查了

```
ulimits -n 
```

默认设置是`32768`，似乎 UDP 套接字计数不超过最大计数。

对这个错误有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:26:26.050

> 我们使用`MulticastSocket`类来发送消息。

为什么？您只需要`MulticastSocket`接收*多*播。

显然你正在泄漏`MulticastSockets.`大概你正在为每条消息创建一个新的并且永远不会关闭它。

# asp.net - 链接按钮不适用于 IE 10

> ID：16143555
> 
> 赞同：6
> 
> 时间：2013-04-22T09:23:24.427
> 
> 标签：asp.net, cross-browser, windows-server-2008

我有一个与 Internet Explorer 10 上的 asp.net 中的链接按钮单击事件相关的问题。链接按钮单击事件未触发。它显示了javascript错误

```
SCRIPT5009: '__doPostBack' is undefined 
```

我的系统上有**没有 Hyper-v(6.0, Build 6001) 的 Windows Server 2008 Standard**。我试图通过微软提供的[补丁](http://support.microsoft.com/kb/2600088)解决这个问题，但没有奏效。我希望你能很好地理解我的问题并给出有意义的答案。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T13:16:39.507

元 http-equiv="X-UA-Compatible" 内容="IE=EmulateIE9"

元 http-equiv="X-UA-Compatible" 内容="IE=EmulateIE8"

元 http-equiv="X-UA-Compatible" 内容="IE=EmulateIE7"

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-29T06:52:57.157

**出现问题的原因：** .NET 2.0 和 .NET 4 附带的浏览器定义文件中存在错误，即它们包含特定范围浏览器版本的定义。但是某些浏览器（如 IE 10）的版本不再在这些范围内。因此，ASP.NET 将它们视为未知浏览器，默认为下层定义，这有一定的不便，比如它不支持 JavaScript 等特性。

我也有同样的问题，我按照这篇文章，我已经排序了。通过下面的链接，它肯定会有所帮助。

[使固定](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:55:11.467

为 ie10 使用兼容性元标记，使您的应用程序在 ie9 中运行

即使用元标记以实现向后兼容性

# mysql - 在mysql中使用多行触发器将两列合二为一

> ID：16143559
> 
> 赞同：3
> 
> 时间：2013-04-22T09:23:41.240
> 
> 标签：mysql

以下是我的表架构：

```
+--------------+--------------+------+-----+---------+-------+
| Field        | Type         | Null | Key | Default | Extra |
+--------------+--------------+------+-----+---------+-------+
| LicenceID    | int(11)      | NO   | PRI | NULL    |       | 
| PassingRTO   | varchar(4)   | NO   |     | NULL    |       | 
| DLNO         | int(15)      | YES  |     | NULL    |       | 
| DateOfIssue  | date         | NO   |     | NULL    |       | 
| DateOfExpiry | date         | NO   |     | NULL    |       | 
| COV          | varchar(6)   | NO   |     | NULL    |       | 
| DateOfBirth  | date         | NO   |     | NULL    |       | 
| BloodGroup   | varchar(3)   | YES  |     | NULL    |       | 
| FullName     | varchar(50)  | NO   |     | NULL    |       | 
| FathersName  | varchar(50)  | YES  |     | NULL    |       | 
| Address      | varchar(150) | NO   |     | NULL    |       | 
| PinCode      | int(6)       | NO   |     | NULL    |       | 
| IssuingAuth  | int(7)       | NO   |     | NULL    |       | 
| IDIA         | int(11)      | YES  |     | NULL    |       | 
| Valid        | tinyint(4)   | NO   |     | NULL    |       | 
+--------------+--------------+------+-----+---------+-------+ 
```

我想要做的是当我插入一个新行时，我希望我的 DLNO 作为 PassingRTO+LicenceID 和 IDIA 作为 PassingRTO+IssuingAuth。

我尝试了同样的使用 -

```
create trigger insert_combined 
after insert on LicencesDB 
for each row 
BEGIN 
set new.IDIA = concat(new.PassingRTO, new.IssuingAuth);
set new.DLNO = concat(new.PassingRTO,new.LicenceID); 
END; 
```

但给了我一个错误 -

> 错误 1362 (HY000)：在触发器后不允许更新新行 错误 1193 (HY000)：未知系统变量 'DLNO' 错误 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“END”附近使用正确的语法

现在我有两个问题，我们可以在触发器中使用多行吗？我们不能在创建表本身时合并两列吗？像 col1 = col2 + col3？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:27:11.630

不要忘记更改`DELIMITER`

```
DELIMITER $$
create trigger insert_combined 
after insert on LicencesDB 
for each row 
BEGIN 
set new.IDIA = concat(new.PassingRTO, new.IssuingAuth);
set new.DLNO = concat(new.PassingRTO,new.LicenceID); 
END $$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:33:55.553

请在 mysql 触发器上查看此链接。当您想对正在输入的当前行进行更新时，您不能使用 after 子句。

检查[http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html) 当你想使用

```
SET NEW.col_name = value 
```

在您的触发器中，请注意您不能将其与 AFTER 操作一起使用，而必须在操作之前使用它。

因此，这将起作用：

```
CREATE TRIGGER sdata_insert BEFORE INSERT ON `sometable`
FOR EACH ROW
BEGIN
SET NEW.guid = UUID();
END
; 
```

这将不起作用：

```
CREATE TRIGGER sdata_insert AFTER INSERT ON `sometable`
FOR EACH ROW
BEGIN
SET NEW.guid = UUID();
END
; 
```

您甚至可以在进入数据库之前在代码本身中执行此操作。

# java - 字符串比较 - Android

> ID：16143562
> 
> 赞同：43
> 
> 时间：2013-04-22T09:23:53.897
> 
> 标签：java, android, string

我无法使用以下代码比较两个字符串：

我有一个名为“gender”的字符串，它的值将是“Male”或“Female”。

```
if(gender == "Male")
   salutation ="Mr.";
if(gender == "Female")
   salutation ="Ms."; 
```

这不起作用，所以我尝试了以下方法：

```
String g1="Male";
String g2="Female";
if(gender.equals(g1))
   salutation ="Mr.";
if(gender.equals(g2))
   salutation ="Ms."; 
```

再次，它没有工作。有人可以告诉我如何使用 if 语句比较字符串值。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-22T09:25:50.143

Try this

```
if(gender.equals("Male"))
 salutation ="Mr.";
if(gender.equals("Female"))
 salutation ="Ms."; 
```

Also remove `;`(semi-colon ) in your if statement

```
if(gender.equals(g1)); 
```

In Java, one of the most common mistakes newcomers meet is using == to compare Strings. You have to remember, == compares the object references, not the content.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-25T21:21:24.647

与 int 或其他数字变量不同的字符串在 Java 中的比较与其他语言不同。

为了比较 Java (android) 中的字符串，使用方法 .compareTo();

所以代码应该是这样的：

```
if(gender.compareTo("Male")==0){
   salutation ="Mr.";
}
if(gender.compareTo("Female")==0){
   salutation ="Ms.";
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-22T09:27:11.927

在 Java 中，我们不会像上面那样比较字符串……这是字符串比较……

```
 if (gender.equalsIgnoreCase("Male")) {
        salutation = "Mr.";
    } else if (gender.equalsIgnoreCase("Female")) {
        salutation = "Ms.";
    } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-22T09:32:36.823

我认为上面提到的答案是正确的。因为 == 用于测试两个字符串是否是同一个对象，而 .equals() 测试两个字符串是否具有相同的值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-22T09:28:51.617

== 运算符检查两个对象是否完全相同。两个字符串可能是不同的对象，但具有相同的值（其中包含完全相同的字符）。使用 .equals() 方法比较字符串是否相等。

[http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html](http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-22T09:30:12.563

您`gender == "Male"`实际上是在比较 object`gender`和不同 object的对象引用`Male`。您必须使用的是`.equals()`比较对象值的方法。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-22T09:26:18.803

try this

```
String g1="Male";
    String g2="Female";
    if(gender.equals(g1))
       salutation ="Mr.";
    if(gender.equals(g2))
       salutation ="Ms."; 
```

you were ending your if statement `if(gender.equals(g1));` <<--- here by adding ";"

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-22T09:30:42.453

```
String g1="Male";
String g2="Female";
String salutation="";
String gender="Male";
if(gender.toLowerCase().trim().equals(g1.toLowerCase().trim()));
   salutation ="Mr.";
if(gender.toLowerCase().trim().equals(g2.toLowerCase().trim()));
   salutation ="Ms."; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-22T09:31:31.103

尝试这个。

```
 String g1 = "Male";
        String g2 = "Female";
        String gender = "Male";
        String salutation = "";
        if (gender.equalsIgnoreCase(g1))

            salutation = "Mr.";
        else if (gender.equalsIgnoreCase(g2))

            salutation = "Ms.";
        System.out.println("Welcome " + salutation); 
```

输出：

```
Welcome Mr. 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-04-22T09:28:14.967

这应该有效：

```
if(gender.equals("Male")){
 salutation ="Mr.";
}
else if(gender.equals("Female")){
 salutation ="Ms.";
} 
```

记住，不要使用`;`after`if`语句。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-12-24T17:57:39.543

此外，如果要比较两个字符串是否不同，可以使用：

```
String mystring = "something";
!mystring.equals("whatever") 
```

它将返回真实！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-22T09:27:32.690

```
if(gender.equals(g1)); <---
if(gender == "Female"); <--- 
```

if.REMOVE IT 后面有分号。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-22T09:45:42.717

实际上每个代码在这里运行良好，但你的问题可能来自你的`gender`变量。对比之前有没有试过做个简单`System.out.println(gender);`的？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-04-06T18:49:55.697

您可以使用 contentEquals() 函数。它可能会帮助你..

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-05-11T20:42:12.827

这对我有用：

```
 if (email.equals("fahim@gmail.com") && pass.equals("123ss") ){
        Toast.makeText(this,"Logged in",Toast.LENGTH_LONG).show();
    }
    else{

        Toast.makeText(this,"Logged out",Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-03-10T22:39:43.110

实际上，如果我们能看到***性别的输入是什么，我们可以提供更好的帮助***

但是您可以尝试关注，也许这是一个案例问题，例如传入的***性别***是*男性*而不是*男性*

```
if(gender.equalsIgnoreCase("male"){
    salutation = "Mr.";
} else if(gender.equalsIgnoreCase("female"){
    salutation = "Ms.";
} 
```

或者，如果这不起作用，请尝试获取**性别**并让我们知道它是什么，以便我们提供更好的帮助。你可以像这样打印***性别***

```
System.out.println(gender); 
```

您可能会在 IDE 的控制台上看到输出

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-03-22T04:37:13.237

试试看：

```
if (Objects.equals(gender, "Male")) {
    salutation ="Mr.";
} else if (Objects.equals(gender, "Female")) {
    salutation ="Ms.";
} 
```

# c# - Windows 8/RT 使用 linq 从 sqlite 中删除

> ID：16143565
> 
> 赞同：1
> 
> 时间：2013-04-22T09:24:00.083
> 
> 标签：c#, linq, sqlite, windows-runtime

我在 Windows Store App 的隔离存储中有 SQLite 数据库。
我使用`SQLite for Windows Runtime`
当我想删除所有表条目时，我使用以下方法：

```
 public static async void DeleteAllProjects()
    {
        var storageFile = await ApplicationData.Current.LocalFolder.GetFileAsync("myDb.sqlite");
        using (var db = new SQLiteConnection(storageFile.Path))
        {
            try
            {
                db.DeleteAll<Projects>();
            }
            catch
            (Exception ex)
            {
                Debug.WriteLine("Delete error   " + ex.Message);
            }
        }
    } 
```

所有的工作都像一个魅力。
但是当我需要删除部分条目时：

```
 public static async void Delete(List<Projects> projects)
    {
        var storageFile = await ApplicationData.Current.LocalFolder.GetFileAsync("myDb.sqlite");
        using (var db = new SQLiteConnection(storageFile.Path))
        {
            try
            {
                foreach (var project in projects)
                {
                    var existingProject = (db.Table<Projects>().Where(
                        p => p.id == project.Id)).FirstOrDefault();
                    if (existingProject != null)
                    {
                          db.Delete<Projects>(existingProject);
                    }
                }
            }
            catch
            (Exception ex)
            {
                Debug.WriteLine("Delete error   " + ex.Message);
            }
        }
    } 
```

我处理了例外

```
ex.Message = "Cannot delete Projects: it has no PK" string 
```

有人可以帮助我吗？

# angularjs - 我们如何向 ng-grid 添加一行，然后选择该行？

> ID：16143566
> 
> 赞同：4
> 
> 时间：2013-04-22T09:24:00.747
> 
> 标签：angularjs, ng-grid

我的团队一直在尝试以下方法：

```
 $scope.addTest = function () {
        var TestRow = {
            "name": "xx",
            "description": "xx",
            "subjectId": 15
        };
        $scope.gridOptions.selectAll()
        var testRowLength = $scope.gridData.push(TestRow);
        $scope.gridOptions.selectItem(testRowLength - 1, true);
    } 
```

但是最后一个 selectItem 没有正确地进行选择。所以我们尝试了以下方法：

```
 $scope.$apply(function () {
            $scope.gridData.push(TestRow);
            $scope.gridOptions.selectItem(testRowLength - 1, true);
        }); 
```

现在我们收到一条错误消息：

```
Error: $apply already in progress 
```

这个问题作为一个问题发布在 ng-grid 博客上，但它只是刚刚发布，我们需要尽快帮助。我希望有人能给我们建议，我们应该如何做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-08T17:02:37.853

您选择的行太快，请改用`ngGridEventData`事件。我将新行推到网格的开头，所以滚动更容易一些：

```
$scope.add = function(){
    var emptyContact = Utilities.newContact();
    var e = $scope.$on('ngGridEventData', function() {
        $scope.contactsGridOptions.selectItem(0, true);
        window.scrollTo(0,0);
        e();
    });

    $scope.contacts.unshift(emptyContact);
}; 
```

有关滚动的更多信息：[如何滚动 ngGrid 以显示当前选择？](https://stackoverflow.com/questions/18487403/how-do-i-scroll-an-nggrid-to-show-the-current-selection)

相关 ng-grid 问题：[https ://github.com/angular-ui/ng-grid/issues/354](https://github.com/angular-ui/ng-grid/issues/354)

# ruby-on-rails - 你如何“或”两个或更多范围

> ID：16143577
> 
> 赞同：1
> 
> 时间：2013-04-22T09:24:20.493
> 
> 标签：ruby-on-rails, ruby, activerecord

假设用户有两个范围，“non_member”和“new_user”。我想对它们进行 OR，包括加入和订购。

我试图提取 where 子句来构造两个范围的 OR 语句。但是，不包括联接和订单。

例如

```
non_member_where = User.non_member.where_values.reduce(:and)
new_user_where = User.new_user.where_values.reduce(:and)

@users = User.where("#{non_member_where} OR #{new_user_where}") 
```

非成员范围需要加入成员资格表。如果您使用上面的代码，则不会加入，因为它仅与位置有关。

有没有更好的方法来“或”两个范围？就像是

```
@users = User.non_member.or.new_user 
```

输出是这样的：

```
SELECT users.* FROM users LEFT JOINS memberships ON memberships.user_id = users.id
  WHERE((memberships.user_id IS NULL) OR (users.created_at < {{2 days ago}}) 
```

我正在使用导轨 3.2.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:27:24.523

ActiveRecord 建立在名为 AReL 的库之上。您可以下拉到 AReL 表并获得此功能。

或者，您可以使用 Squeel gem，它可以做同样的事情，但会为您提供更高级别的 API。

查看 squeel：[https ://github.com/ernie/squeel](https://github.com/ernie/squeel)

# dojo - dojo tabContainer gets the width of the largest tab

> ID：16143579
> 
> 赞同：0
> 
> 时间：2013-04-22T09:24:32.360
> 
> 标签：dojo, tabcontainer, dijit.layout

I am using a dijit/layout/TabContainer with two tabs. I create them like this:

```
<div dojoType="dijit.layout.TabContainer" doLayout="false">
    <div dojoType="dijit.layout.ContentPane" title="First tab" style="background-color:rgb(237,240,246)" doLayout="false"> Some dynamic content here </div>
    <div dojoType="dijit.layout.ContentPane" title="Second tab" style="background-   color:rgb(237,240,246)" doLayout="false"> Some dynamic content here </div>
</div> 
```

This works fine for Firefox, Chrome and IE9, but doesn't render properly on ipad with Safari. The first time the first tab displays correctly, but then it takes the width of the second tab, which is larger. I believe that this should not happen as I have added the doLayout flag. I don't know if it matters, but I am using dojo with xpages framework.

Thanks a lot in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:00:25.927

我添加了

```
controllerWidget="dijit.layout.TabController" 
```

到 TabContainer 的 div 以及百分比宽度，现在它也在 Safari 中正确显示。

问题是 Safari 需要定义一个宽度。但由于我的内容是动态的，我无法以像素为单位定义固定宽度。因此，为了使用百分比宽度，我还必须添加上面的标志。我不知道这是否是实现此目标的适当方法，但它解决了我的问题。

# jasper-reports - How to create vertical line in iReport?

> ID：16143591
> 
> 赞同：2
> 
> 时间：2013-04-22T09:24:53.720
> 
> 标签：jasper-reports

I'm using iReport-3.7.4 ,

I want to make table in detail like this ,

![enter image description here](https://i.stack.imgur.com/ZlBip.png)

but , the line in this table can't longwise until the end of the table, I've placed this table in detail ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:22:33.357

在 iReport 中，右键单击一个字段，然后转到 Padding and Borders 并将 Line width 设置为 1。如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/mmByk.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-29T01:42:51.073

将重复的东西放在子报表中，并在适当的边缘画出垂直线。在主窗口中加载子报告，其宽度与父宽度一致。再次测试和修改报告，直到您将线条放在正确的位置。此外，请确保您已检查该行的***Print Repeated Values***属性。

我附上了一些我为我的项目创建的报告，希望他们能很好地解释你。

**家长报告** ![家长报告](https://i.stack.imgur.com/cifK9.jpg)

**分报告** ![在此处输入图像描述](https://i.stack.imgur.com/OsVdm.jpg)

**最终输出** ![在此处输入图像描述](https://i.stack.imgur.com/BMB7g.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T05:00:55.633

If you really want to draw a line then just drag line element from palette and drag the bottom middle point of that tile element to increase the size and then decrease the width by dragging left middle point.

# c++ - Function struct array input cin problems

> ID：16143592
> 
> 赞同：0
> 
> 时间：2013-04-22T09:24:55.950
> 
> 标签：c++, arrays, function, struct

I can't figure out how to fix this code.

```
void getInfo(Author a[], int size)
{
    for(int x = 0; x < size; x++)
        {
            cout << "Enter the author's name: ";
            getline(cin, a[x].name);

            if(a[x].name == "NONE")
                break; //Breaks the loop if the author has no further books
            else

            for(int y = 0; y < size; y++)
                {
                    cout << "Enter title " << y+1 << " :";
                    getline(cin, a[x].book[y].title);

                    if(a[x].book[y].title == "NONE")
                        break;
                    else
                        cout << "Enter price " << y+1 << " :  $"; 
                        cin >> a[x].book[y].price;
                }
            cout << endl;
        }
} 
```

This is how it is compiling:

```
Get user's input:
Enter the author's name: John Smith
Enter title 1: How to Tie a Shoe
Enter price 1: 20
Enter title 2: Enter price 2: 
```

Could someone please help me understand how to fix this loop. When I try a `getline(cin, a[x].book[y].price);` ,visual studio tells me that it is overloaded.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:29:12.813

要解决您的问题，请使用[`cin.ignore();`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)after `cin >>`。

[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)接受 a[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)作为其第二个参数。

它认为您通过`getline(cin, a[x].book[y].price);`.

# birt - 在运行时更改 BIRT 超链接

> ID：16143594
> 
> 赞同：0
> 
> 时间：2013-04-22T09:25:11.910
> 
> 标签：birt

我的期望有效吗？如果是，请指导我。

本地机器->本地服务器进程->我生成Birt报告->其中包含硬编码的超链接，例如：[http](http://www.ip_one.com/birtserver/parameters...(this) ://www.ip_one.com/birtserver/parameters...（这很好，指向另一个报告并获取当我从生成的 pdf 报告中点击 URL 时，我也报告了该报告）。

现在，我需要更改 ip_one 以假设 ip_two 一旦我点击 pdf 内的超链接（即时）保持 url 的所有其他部分完好无损。

我正在使用 birt-rcp-report-designer-4_2_2。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:43:40.810

听起来您正试图在报表运行时动态创建超链接。

在具有您的链接（即标签）的报表项的属性编辑器中，编辑超链接。在“位置”字段左侧的超链接选项（弹出窗口）中是按钮 ab| 选择“JavaScript”语法。

您将能够使用 JavaScript 创建 URL。

# ruby - ruby中类似键的值总和问题

> ID：16143598
> 
> 赞同：0
> 
> 时间：2013-04-22T09:25:23.663
> 
> 标签：ruby, arrays, hashmap

我有以下数组

```
[["a", " 3"], ["a", " 5"], ["b", " 5"], ["c", " 2"], ["a", " 5"], ["a", " 5"], [
"b", " 4"], ["c", " 1"], ["c", " 2"], ["d", " 3"]] 
```

我正在寻找以下输出

```
[["a", "18"], ["b", "9"], ["c", " 5"], ["d", "3"]] 
```

18 表示键 'a' 和所有值的总和 3+5+5+5

我有以下代码

```
ary.group_by{|a, b| a} 
```

我得到以下输出

```
{"a"=>[["a", " 3"], ["a", " 5"], ["a", " 5"], ["a", " 5"]], "b"=>[["b", " 5"], [
"b", " 4"]], "c"=>[["c", " 2"], ["c", " 1"], ["c", " 2"], ["c", " 3"]]} 
```

我尝试在按键对它们进行分组后进行合并，然后在合并后对值求和，但出现错误！你能指出我正确的方向吗..

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:33:52.277

你可以这样做：

```
A = [["a", " 3"], ["a", " 5"], ["b", " 5"],
     ["c", " 2"], ["a", " 5"], ["a", " 5"],
     ["b", " 4"], ["c", " 1"], ["c", " 2"],
     ["d", " 3"]]

hash = A.reduce(Hash.new(0)) do |acc, (k, v)|
  acc[k] += v.to_i
  acc
end

array = hash.map { |k, v| [k, v.to_s] }

p array

# => [["a", "18"], ["b", "9"], ["c", "5"], ["d", "3"]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T09:51:44.473

使用功能方法：

```
pairs.group_by(&:first).map do |key, groups|
  [key, groups.map { |k, v| v.to_i }.reduce(:+)]
end 
#=> [["a", 18], ["b", 9], ["c", 5], ["d", 3]] 
```

使用[方面](http://rdoc.info/github/rubyworks/facets/master/Enumerable#map_by-instance_method)：

```
require 'facets'
pairs.map_by { |k, v| [k, v.to_i] }.map { |k, vs| [k, vs.reduce(:+)] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:33:26.293

```
grouped = ary.group_by{|a, b| a}
result = grouped.map do |key, value|
  sum_over_arrays = value.map do |sub_arr|
    sub_arr.last.to_i # get only the second element and transform it in integer
  end.inject(:+) # sum over the resulting array of integer
  [key, sum_over_arrays] # return the new mapping [key, sum]
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:33:30.983

这是我对此的猜测：

```
ary.inject({}) { |init, (k,v)| init[k] = init[k].to_i + v.to_i; init }.to_a 
```

你得到`[["a", 18], ["b", 9], ["c", 5], ["d", 3]]`

值是整数，但如果需要，您可以将它们转换回字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T09:36:12.780

```
array = [["a", " 3"], ["a", " 5"], ["b", " 5"], ["c", " 2"], ["a", " 5"], 
         ["a", " 5"], ["b", " 4"], ["c", " 1"], ["c", " 2"], ["d", " 3"]]

array.each_with_object(Hash.new(0)) do |ar,hash|
  hash[ar.first] += ar.last.to_i
end.map { |k,v| [k, v.to_s] }

#=> [["a", "18"], ["b", "9"], ["c", "5"], ["d", "3"]] 
```

# django - Django-Creating User

> ID：16143599
> 
> 赞同：-3
> 
> 时间：2013-04-22T09:25:26.407
> 
> 标签：django, django-models, django-views

I want to create the inactive user and send them activation email. This is my view:

```
secret = hexlify(os.urandom(6))
userName = form.cleaned_data['email']
if User.objects.filter(username=userName):
    message = EmailMessage('portal/pay_email2.html',{'refid':pk, 'amount':total,'Payment':Payment,'secret': secret }, 'Madeeha ', to=[form.cleaned_data['email']])
    message.send()
else:
    userPass = hexlify(os.urandom(4))
    userMail = form.cleaned_data['email']
    user = User.objects.create_user(userName, userMail,userPass)
    user.save()
    message = EmailMessage('portal/pay_email.html',{'refid':pk, 'amount':total,'Payment':Payment,'userName':userName, 'userPass':userPass, 'secret': secret }, 'Madeeha ', to=[form.cleaned_data['email']])
    message.send() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:53:04.067

User.objects.create_user 方法将创建一个活动标志设置为 true 的用户。

你有几个选择：

*   保存后，您可以将值设置为 false，然后更新（额外的数据库调用）
*   您可以使用更长的手动符号创建用户（不使用辅助方法）
*   使用 is_active=False 的键值覆盖 create_user 方法：

    `# create_user(username, email=None, password=None, **extra_fields)` `User.objects.create_user('username', email='email', password='pass', is_active=False)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:06:54.743

First you should share your User Model, too. If this is Django 1.5 , You can/should define a status field for users like `is_active`, `is_admin`, `is_superuser` .(like `MattWritesCode` said).

Then you can simply create a user with a simple queryset:

```
create_user = UserProfile.objects.create_user(username=xxx, email=xx@xx.com, is_active=False,  is_admin=False) 
```

# android - Polling on android map from webservice

> ID：16143600
> 
> 赞同：0
> 
> 时间：2013-04-22T09:25:28.387
> 
> 标签：android, android-maps

I am doing map application in Android with polling functionality - i.e. I have webservice which giving customers current lat/lang position.

So I need to show it on map with marker. For that I need to call web service every 30 seconds and get current lat/lat values and display it on the map. I have tried timer but the entire page is getting refreshed so my screen flickers. I need to update lat/lang position alone - not the entire screen. Can anybody guide me in this? Examples are much appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:47:26.277

您需要使用推送消息而不是轮询。这是处理地图上移动实时更新的低效方式。每当您更新客户的（纬度，经度）时，您需要推送到设备并要求设备更新其在地图上的标记。

[安卓推送消息](http://developer.android.com/google/gcm/index.html)

# cordova - PhoneGap Build和本地构建PhoneGap Android App的区别

> ID：16143602
> 
> 赞同：2
> 
> 时间：2013-04-22T09:25:31.933
> 
> 标签：cordova, android-build, phonegap-build, construct-2

我正在使用 Construct2（一个简单地提供 ack HTML5 和 JS 的 GUI 游戏 IDE）来开发几个游戏，

我没有弄清楚的是，从 C2 导出一个项目以在 PhoneGap Build 上构建它会为您提供必须压缩并上传到 PhoneGap Build 的 www 文件夹，这很有效。如果我想在本地构建应用程序并创建一个 PhoneGap android 项目，替换 www 只会给我一个黑屏。

所以... PhoneGap 和 PhoneGap 构建之间有区别吗？我必须声明一些不同的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T07:25:32.307

我明白了原因，有两个问题，一个是我的错，一个显然是Scirra的错。

1.  在包含 xml 名称空间的**config.xml**根元素**<\widget>**中，我没有看到需要匹配应用程序包的**id属性。**

2.  当您从 Construct2 for PhoneGap Build 导出时，您会得到一个标准的 index.html 页面，该页面针对肯定是由 phonegap build 添加的 ipotetical“phonegap.js”，但如果您在本地创建项目，您会得到“cordova-2.XXjs”和这个打破游戏。

为其他读者回答问题的目的**Phonegap**和**Phonegap Build**的工作方式完全相同，只是抱怨标准！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:18:50.153

真的应该没有任何区别——除了显然PhoneGap Build更容易使用的事实:)

所以应用程序正在进入设备/模拟器并且只是显示一个空白屏幕？

# android - Android 获取 SimpleOnGestureListener 中的视图

> ID：16143603
> 
> 赞同：5
> 
> 时间：2013-04-22T09:25:36.950
> 
> 标签：android, listener

我想访问在方法`GestureListener`本身内部使用gestureListener 的视图。这是我的听众：

```
public class GestureSwipeListener extends SimpleOnGestureListener {

    final Context myContext;

    // Costanti per lo swipe
    private static final int SWIPE_THRESHOLD = 100;
    private static final int SWIPE_VELOCITY_THRESHOLD = 100;

    public GestureSwipeListener(Context context) {
        myContext = context;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        return super.onDown(e);
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {
        boolean result = false;
        try {
            float diffY = e2.getY() - e1.getY();
            float diffX = e2.getX() - e1.getX();
            if (Math.abs(diffX) > Math.abs(diffY)) {
                if (Math.abs(diffX) > SWIPE_THRESHOLD
                        && Math.abs(velocityX) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffX > 0) {
                        onSwipeRight();
                    } else {
                        onSwipeLeft();
                    }
                }
            } else {
                if (Math.abs(diffY) > SWIPE_THRESHOLD
                        && Math.abs(velocityY) > SWIPE_VELOCITY_THRESHOLD) {
                    if (diffY > 0) {
                        onSwipeBottom();
                    } else {
                        onSwipeTop();
                    }
                }
            }
        } catch (Exception exception) {
            exception.printStackTrace();
        }
        return result;
    }

    public boolean onSwipeRight() {
        Log.d("FLING", "right");
        return true;
    }

    public boolean onSwipeLeft() {
        Log.d("FLING", "left");
        return true;
    }

    public boolean onSwipeTop() {
        Log.d("FLING", "top");
        return true;
    }

    public boolean onSwipeBottom() {
        Log.d("FLING", "bottom");
        return true;
    }

} // end class OnSwipeTouchListener 
```

然后在我的活动中我这样做：

```
GestureSwipeListener gestureListener = new GestureSwipeListener(this);

GestireDetector gestureDetector = new GestureDetector(getApplicationContext(), gestureListener);

mainView = findViewById(R.id.main_view);
mainView.setClickable(true);
mainView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            if(gestureDetector.onTouchEvent(event)) {

                return true;
            }
            return false;
        }
    }); 
```

现在我想直接在内部获取视图资源（在本例中为 mainView），`GestureSwipeListener`以在该视图上执行一些动画。
我想这样做是因为我必须在我的应用程序中的每个 Activity 上重复相同的动画。因此，直接在`GestureListener`（在`onSwipeRight`,`onSwipeLeft` 方法中）使用代码可以更好地避免一次又一次地重复相同的代码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T09:33:26.300

向 SwipeGestureListener 构造函数添加参数，例如：

在你的手势监听器中：

```
View myView;

public GestureSwipeListener(Context context, View view) {
   myContext = context;
   myView = view;
}

public doSomethingWithView() {
  this.myView.setText("Foobar");
} 
```

在您的活动中：

```
GestureSwipeListener gestureListener = new GestureSwipeListener(this.appContext, mainView);
... 
```

**更新1：**

```
View mainView = findViewById(R.id.main_view);
GestureSwipeListener gestureListener = new GestureSwipeListener(this.appContext, mainView); 
```

然后不要忘记在您的 GestureSwipeListener 构造函数中：

```
View myView;

public GestureSwipeListener(Context context, View view) {
   myContext = context;
   myView = view;
} 
```

# javascript - how to Validate Text boxes before submitting using javascript?

> ID：16143605
> 
> 赞同：0
> 
> 时间：2013-04-22T09:25:49.233
> 
> 标签：javascript, validation

I have 2 text boxes with default value 0 and a submit button.Before submitting I am calling the following javascript function `onSubmit="return(validate_myfrm());`".I am not able to validate `text_1` with value 0.But for `text_2` the default value 0 is validated.

```
function validate_myfrm()
{

   var ans;
   if(document.myfrm.txt_1.value=="" ||document.myfrm.txt_1.value==0)
      {
              ans=confirm("Do you still want to continue with value 0 for text 1?");
              if(ans== true)
                  {
                     document.myfrm.txt_1.value=0;
                     document.myfrm.txt_2.focus();
                  }
              else
                  {
                     document.myfrm.txt_1.focus();
                  }
                 return false;
    }

   if(document.myfrm.txt_2.value=="" ||document.myfrm.txt_2.value==0)
            {
                ans=confirm("Do you still want to continue with value 0 for text 2?");
                if(ans== true)
                  {
                     document.myfrm.txt_2.value="0";
                     return true;
                  }
              else
                  {
                       document.myfrm.txt_2.focus();
                  }
                  return false;
            }
     return true; 
```

}

If i return true; after `document.myfrm.txt_2.focus();` the page is redirected to next page without confirming the values for txt_2.Pls help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:27:54.373

document.myfrm.txt_bb1.value==0

应该是：document.myfrm.txt_1.value==0

还：

设置返回后，函数将结束并返回函数中设置的 false 或 true。

第一个如果根据您的条件值为“”或 0 时将始终返回 false。因为它返回 false，所以函数将结束并返回 false。

编辑：

这是一个简单的验证示例：

```
<form id="myfrm" name="myfrm" onSubmit="return(validate_myfrm());">
    <input type="text" name="txt_1" value="" />
    <input type="text" name="txt_2" value="" />
    <input type="submit" value="submit" />
</form>
<span id="result"></span>

<script>

function validate_myfrm()
{
   if(document.myfrm.txt_1.value!="" && document.myfrm.txt_2.value!="")
   {
       return true;    
   } else {
       document.getElementById("result").innerHTML="Error fields cannot be empty";
       return false;
   }
}
</script> 
```

请记住，每当您在函数中使用 return 时，它都会停止函数并返回值集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:41:54.947

现在使用 if 函数的 Else If Instaed，它将在提交前验证。

```
 function validate_myfrm()
{

   var ans;
   if(document.myfrm.txt_1.value=="" ||document.myfrm.txt_1.value==0)
      {
              ans=confirm("Do you still want to continue with value 0 for text 1?");
              if(ans== true)
                  {
                     document.myfrm.txt_1.value=0;
                     document.myfrm.txt_2.focus();
                  }
              else
                  {
                     document.myfrm.txt_1.focus();
                     return false;
                  }
    }else if(document.myfrm.txt_2.value=="" ||document.myfrm.txt_2.value==0)
            {
                ans=confirm("Do you still want to continue with value 0 for text 2?");
                if(ans== true)
                  {
                     document.myfrm.txt_2.value="0";
                     return true;
                  }
              else
                  {
                       document.myfrm.txt_2.focus();
                  }
                  return false;
            }
     return true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:31:16.850

你的第一个条件应该是这样的

```
if(document.myfrm.txt_1.value=="" ||document.myfrm.txt_1.value==0)
 {

 } 
```

# razor - How to display articles / post in homepage in Umbraco 6 (Razor)?

> ID：16143609
> 
> 赞同：0
> 
> 时间：2013-04-22T09:25:58.720
> 
> 标签：razor, umbraco

I try move my magazine to Umbraco.

So basically I have in general 3 types of document types:

Home page - which is the home page

Magazine page - which is the achieve by categories (sport / tech / music / etc.)

News page - which is the ongoing news, which have the properties: title, SubTitle, articleImg - which is media picker for the main article image, and articleText - which is it's the article text (rich text editor)

Now what I try to do is to display the title and SubTitle on the home page for each category. As well as in the Magazine pages - which is basically the achieve. So, in the home page I need to display in each div between 4 to 8 posts of each category, and in the magazine pages each category has it's own page (sport / tech / music / etc.)

The question is: How do I do it???

In wordpress theme it's very simple - I just using the php loop for each category. How does though I do it in Umbraco?? (Version 6, with Razor). I'm not using uBlogsy.

Is there any simple way to do it? Any simple script / handler / helper just to show on homepage Image (Thumbnail) then title (under h1) and SubTitle (under h2) for each category? As well as in the achieve pages?

I'm new to Umbraco and didn't find any tutorial how to do it.

Thanks so much!

Meni .

# rest - ActiveResource Update Operation :: Can't mass-assign protected attributes: created_at, id, updated_at

> ID：16143610
> 
> 赞同：2
> 
> 时间：2013-04-22T09:25:58.763
> 
> 标签：rest, ruby-on-rails-3.2, activeresource

When I try to update and save ActiveResource I am getting following error.

**on console**

```
> m = Machine.first
 => #<Machine:0xb07a0d4 @attributes={"created_at"=>"2013-04-22T09:13:56Z", "id"=>1, "name"=>"laptop", "updated_at"=>"2013-04-22T09:13:56Z"}, @prefix_options={}, @persisted=true>

> m.name = 'mouse'
 => "mouse"

> m.save
ActiveResource::ServerError: Failed.  Response code = 500\.  Response message = Internal Server Error 
```

**on server**

```
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: created_at, id, updated_at):
  app/controllers/machines_controller.rb:62:in `block in update'
  app/controllers/machines_controller.rb:61:in `update' 
```

Here is ActiveResource model

```
class Machine < ActiveResource::Base
  self.site = 'http://localhost:3000'
end 
```

Here is ActiveRecord model

```
class Machine < ActiveRecord::Base
  attr_accessible :name
end 
```

# c# - 使用 Rhino 存根限制 UnitTest 的范围

> ID：16143614
> 
> 赞同：1
> 
> 时间：2013-04-22T09:26:13.053
> 
> 标签：c#, rhino-mocks

我正在对具有依赖关系的服务方法进行单元测试。简化：

```
public class ConditionChecker
{
    private SqlConnection _connection;

    public bool CanDoSomething()
    {
        return _connection.State == ConnectionState.Open;
    }
}

public class A
{
    public ConditionChecker Checker { get; set; }

    public bool CanInvokeA()
    {
        return Checker.CanDoSomething();
    }
}

[TestClass]
public class ATests
{
    [TestMethod]
    public void TestCanInvokeA()
    {
        // arrange
        A a = new A();
        ConditionChecker checker = MockRepository.GenerateStub<ConditionChecker>();
        checker.Stub(x => x.CanDoSomething()).Return(true);
        a.Checker = checker;

        // act
        bool actual = a.CanInvokeA();

        // assert
        Assert.AreEqual(true, actual);
    }
} 
```

我想要的是完全绕过 的实现`ConditionChecker.CanDoSomething`，这就是我存根调用的原因，但我在测试期间仍然遇到空引用异常，因为`_connection`未设置成员。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:37:47.717

您只需将您的方法标记为`virtual`，它将起作用：

```
public virtual bool CanDoSomething()
{
} 
```

由于 Rhino Mock 在幕后会创建一个动态代理`ConditionChecker`，所以你需要标记`virtual`以允许 Rhino Mock 覆盖它。

# css - 如何在较大的 div 中居中两个 div？

> ID：16143615
> 
> 赞同：1
> 
> 时间：2013-04-22T09:26:13.993
> 
> 标签：css

我试图在较大的黑色 div中居中两个 div (`#about`和)。`#testimonial-snippets`我怎样才能做到这一点？

JS 小提琴：http: [//jsfiddle.net/DgtqM/](http://jsfiddle.net/DgtqM/)

HTML

```
<footer>
        <div id="footer-section">
            <section id="about">
                <a href="http://twitter.com" target="_blank"><img class="profile-photo" src="http://dummyimage.com/42x42/000/fff" alt="profile" height="44" width="44"></a>
                <p>Lorem ipsum dolor sit amet. Find him on <a href="http://twitter.com" target="_blank">Twitter</a> and <a href="http://instagram.com" target="_blank">Instagram</a>. <a id="slide-toggle" href="#">Contact</a> | <a href="">Archive</a></p>
            </section>
            <section id="testimonial-snippets">
                <a href="http://twitter.com" target="_blank"><img class="profile-photo" src="http://dummyimage.com/42x42/000/fff" alt="profile" height="44" width="44"></a>
                <div class="snippet">
                    <p>This is a testimonial.</p>
                    <a class="read-testimonial" href="/testimonials">read more</a>
                </div>
            </section>
        </div>
</footer> 
```

CSS

```
footer {
background: #222;
clear: both;
color: #f4f3f1;
float: left;
padding: 50px 0;
width: 100%;
}
#footer-section {
margin: 0 auto;
overflow: hidden;
position: relative;
width: 940px;
}
footer section {
float: left;
width: 300px;
}
#about {
margin-right: 20px;
}
footer a {
border-bottom: 1px dotted #f4f3f1;
color: #f4f3f1;
}
.profile-photo {
border: 1px solid #f4f3f1;
float: left;
margin: 4px 10px 10px 0;
}
p {
margin: 0 0 1em;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:36:27.070

我允许自己将这个问题减少到最低限度的标记。其他一切都与问题无关，只会让人更难理解。

```
<footer>
    <section id="about">About</section>
    <section id="testimonial-snippets">Testimonial</section>
</footer> 
```

一种解决方案是制作这些部分`inline-block`元素并将它们放在页脚的中心：

```
footer {
    background: #222;
    padding: 50px 0;
    width: 100%;
    text-align: center;
}
footer section {
    width: 300px;
    height: 50px;
    display: inline-block;
    text-align: left;
}
/* Just coloring the different divs */
#about { background: red; }
#testimonial-snippets { background: green; } 
```

[http://jsfiddle.net/DgtqM/6/](http://jsfiddle.net/DgtqM/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:33:00.560

将元素包装在一个新的 div 中。然后给新的 div 一个固定的宽度并`margin: 0px auto`用于样式。

**HTML**

```
<div id="footer-section">
   <div class="wrap">
    <section id="about">
      <!--Content -->
    </section>
    <section id="testimonial-snippets">
      <!--Content-->
    </section>
   </div>
</div> 
```

**CSS**

```
.wrap{
    width: 620px;
    margin: 0px auto;
    overflow: auto;
} 
```

**示例** [http://jsfiddle.net/DgtqM/5/](http://jsfiddle.net/DgtqM/5/)

# php - ERROR: Uncaught exception 'ImagickException' with message 'Invalid image geometry'

> ID：16143624
> 
> 赞同：2
> 
> 时间：2013-04-22T09:26:34.880
> 
> 标签：php, imagemagick

I made a small code for resizing images present on my server. I am testing it on xampp. Here it is:

```
if ($img_width[0] >= 750) { $imagick_image_width = 920; }
elseif (($img_width[0] > 500) && ($img_width[0] < 750))  { $imagick_image_width = 500; }
elseif (($img_width[0] >= 200) && ($img_width[0] <= 500)) { $imagick_image_width = 500; }

$save_path = 'c:/xampp/htdocs/images/'.$image_name.'.jpg';

$image = new Imagick($save_path);
$image->resizeImage($imagick_image_width, 0,Imagick::FILTER_LANCZOS,0.95); //line 226
$image->writeImage($save_path);
$image->destroy(); 
```

I have taken img_width via getimagesize array.

When executed this gives error:

```
Fatal error: Uncaught exception 'ImagickException' with message 'Invalid image geometry' in C:\xampp\htdocs\test-templ.php on line 226

ImagickException: Invalid image geometry in C:\xampp\htdocs\test-templ.php on line 226 
```

How to resolve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-11T09:16:44.100

`$imagick_image_width`在使用它来调整大小之前检查变量的值。我遇到了同样的错误，参考它我的 laravel 代码无法从“env”文件中读取值。

尝试`$imagick_image_width`使用任何默认大小初始化变量。

# c# - C# 本地应用程序，在打开的选项卡中从网站获取变量

> ID：16143627
> 
> 赞同：1
> 
> 时间：2013-04-22T09:26:45.833
> 
> 标签：c#, clickonce

我正在努力寻找一种方法来允许在本地运行的应用程序（用 C# 制作）和驻留在任何 Web 浏览器的打开选项卡中的 Web 应用程序之间交换信息。

这是典型的用户案例：

*   用户使用其用户名和密码登录 .NET MVC Web 应用程序。登录后，他们会被分配一个 guid，并被重定向到 www.myapp.com/view/[guid] 。在那里，系统会提示他们下载并运行本地应用程序（或者如果已经下载，则运行它）。
*   一旦他们运行应用程序，它应该检测到 [guid] 并开始将信息发布到服务器 www.myapp.com/postInfo/[guid]。

最初我考虑使用 ClickOnce 并将参数传递给 clickonce 启动器 (?guid=[guid])。但是仅在 IE 中支持 clickonce - chrome 和 firefox 需要一个插件，这对我来说是一个很好的插件 -

然后，我通过在 webapp 中使用 flash 将 guid 粘贴到剪贴板中，并让本地应用程序不断检查剪贴板，但我不认为这是一个 elegenat 解决方案，因为它会删除剪贴板的当前内容.

关于如何实施的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:45:43.333

你不能用其中的 guid 打包一个可下载的文件吗？

应用程序何时启动；从该文件中读取 guid。

甚至在可供下载之前更好地编辑该应用程序的 app.config...

另一种方法是在可供下载之前更改 .exe...[在 C# 编译的 exe 中修改嵌入字符串](https://stackoverflow.com/questions/2742583/modify-emdeded-string-in-c-sharp-compiled-exe)

# extjs - 在 sencha touch 的 Ext 模板中存储值访问

> ID：16143641
> 
> 赞同：0
> 
> 时间：2013-04-22T09:27:33.787
> 
> 标签：extjs, sencha-touch-2

我在商店中有 2 个字段 1\. 标题和 2\. 活动布尔值。

我有以下 ext.template

```
itemTpl : Ext.create('Ext.XTemplate',
                 '<div style = "height:5px; border-top: 0px solid #DEDEDE;">',
                    '<div style="float:left" >',
                        '<input type ="image" src="images/sort-ascending-default.png" id = "img1"  name ="img1" width="30px" height="30px" />',
                    '</div>',
                    '<div  class="itemTitle" id="itemTitle" style="float:left;width: 70%;height: 20px;text-align: center;  color :#fffff0;">{title}</div>',
                    '<div style="float:right;  vertical-align:middle;">',
                        '<input type ="image" src="images/sort-descending-default.png" id = "img2" name ="img2" width="30px" height="30px"/>',
                    '</div>',
                    '<div style="clear:both"></div>',
                 '</div>'), 
```

我想将 if 条件放入其中并想检查活动字段并更改标题的颜色，但我不知道如何访问存储字段值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:22:32.257

以下是如何在 tpl 中使用 if 条件：

```
itemTpl : Ext.create('Ext.XTemplate',
             '<div style = "height:5px; border-top: 0px solid #DEDEDE;">',
                '<div style="float:left" >',
                    '<input type ="image" src="images/sort-ascending-default.png" id = "img1"  name ="img1" width="30px" height="30px" />',
                '</div>',
                '<tpl if="active == true">',
                    '<div  class="itemTitle" id="itemTitle" style="float:left;width: 70%;height: 20px;text-align: center;  color :red;">{title}</div>',
                '<tpl else>',
                    '<div  class="itemTitle" id="itemTitle" style="float:left;width: 70%;height: 20px;text-align: center;  color :green;">{title}</div>',
                '</tpl>'
                '<div style="float:right;  vertical-align:middle;">',
                    '<input type ="image" src="images/sort-descending-default.png" id = "img2" name ="img2" width="30px" height="30px"/>',
                '</div>',
                '<div style="clear:both"></div>',
             '</div>'), 
```

# iphone - 播放 MPMoviePlayer 时，AVAudioPlayer 以静音模式播放

> ID：16143643
> 
> 赞同：0
> 
> 时间：2013-04-22T09:27:54.023
> 
> 标签：iphone, ios, objective-c, avaudioplayer, mpmovieplayer

问题是 AVAudioPlayer 本身的行为应该如此。当设备未处于静音模式（静音/振铃开关打开）时，它会播放背景音乐。当静音开关打开时，它也尊重这个状态，不播放背景音乐。

但是，当我在 MPMoviePlayer 中播放视频时，AVAudioPlayer 在静音模式下播放的一个特殊情况是。

在我的应用程序中，在播放电影之前首先播放 BG 声音。

任何人都可以帮忙吗？这仅在我播放电影时发生。

有关其他详细信息：使用的
BG 循环 - m4a 类型
使用的电影类型 - m4v

我还发现这种情况在 iOS 5 中反复出现，但有时即使在最新版本中也会发生。

我在 Google、Apple 的文档和 SO 中到处都进行了研究，但我找不到关于这个特定场景的任何信息。

我什至尝试将 AVAudioSession 的类别显式设置为 AVAudioSessionCategoryAmbient，然后调用 setActive。（也尝试过该`setCategory:withOptions:error`方法，但应用程序由于某种原因崩溃 - 在设备上测试）

当我尝试使用`AVAudioPlayerDelegate`.

帮助任何人？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:04:03.147

尝试以这种方式设置音频会话

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
        NSError *err = nil;
        [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
        if(err){
            NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        }
        [audioSession setActive:YES error:&err];
        err = nil;
        if(err){
            NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
            return;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:47:56.863

```
NSURL *url = [NSURL URLWithString:self.videoURL];
            MPMoviePlayerViewController *mpvc = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
            NSError *_error = nil;
            [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &_error];
            [self presentMoviePlayerViewControllerAnimated:mpvc]; 
```

添加这个框架

```
#import <AVFoundation/AVFoundation.h> 
```

试试这样...

# php - 将jquery日期添加到mysql

> ID：16143644
> 
> 赞同：-2
> 
> 时间：2013-04-22T09:27:54.153
> 
> 标签：php, jquery, mysql, mysqli

我的表单正在从 jquery 日期选择器中捕获日期，该表单在没有日期选择器的情况下可以正常工作，但是有了它，它只会给出这个错误：

```
Error: Unknown column '$time' in 'field list' 
```

下面是我的 php & html 代码

```
<?php

    //form submitted
    if (isset($_POST['create'])) {
    //require db details
    require_once '../dblogin.php'; 
    //set flag
    $OK = false;
    // create database connection
    $conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");
    // initialize prepared statement
    $stmt = $conn->stmt_init();
    // create SQL to insert task
    $sql = 'INSERT INTO tasks (task_name, task_project_id, task_assignee_id, datepicker, task_created_by, task_schedule, task_duration, task_end_date, task_creation_date, task_notes, task_status)
          VALUES(?, ?, ?, ?, '.$_SESSION['id'].', ?, ?, $time, NOW(), ?, ?)';

        if ($stmt->prepare($sql)) {
        // bind parameters and execute statement
        $stmt->bind_param('siissss', $_POST['task_name'], $_POST['task_project_id'], $_POST['task_assignee_id'], $_POST['datepicker'], $_POST['task_duration'], $_POST['task_notes'], $_POST['task_status']);
        // execute and get number of affected rows
        $stmt->execute();
            if ($stmt->affected_rows > 0) {
            $OK = true;
            }
        }
        // redirect if successful or display error
        if ($OK) {
        header('Location: task_confirmation.php');
        exit;
        } else {
        $error = $stmt->error;
        }   
}
?>
<!DOCTYPE html PUBLIC “-//W3C//DTD XHTML 1.0 Strict//EN”
“http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd”&gt;
<html xmlns=”http://www.w3.org/1999/xhtml”&gt;
<head>
<meta http-equiv=”Content-Type” content=”text/html; charset=utf-8” />
<title>Create new task</title>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<script>
    $(function() {
        $( "#datepicker" ).datepicker({dateFormat: 'yy-mm-dd' });
    });
</script>
<link rel="stylesheet" type="text/css" href="../allcss/style.css" />
</head>

<body>

<?php
require('../Login/includes/header.inc.php');
?>

<div id="content">
<?php if (isset($error)) {
  echo "<p>Error: $error</p>";
} ?>
<form id="form1" method="post" action="">
<div id="add">
  <p>
    <label for="task_name"class="title">Task name:</label>
    <input name="task_name" type="text" class="widebox" id="task_name">
  </p>
  <p>
    <span class="title">Project: </span><select name="task_project_id" size "5">
    <?php 
    require_once '../dblogin.php'; 
    $conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");
    $stmt2 = $conn->stmt_init();
    //pulls project names for the select element//
    $sql2 = 'select * from projects';
    $stmt2->prepare($sql2);
    $stmt2->execute();
    $result = $stmt2->get_result();
    while($resultRow = $result->fetch_array(MYSQLI_ASSOC))
    {
    var_dump($resultRow); 
        echo "<option value='".$resultRow[project_id]."'>".$resultRow[project_name]."</option>";

    }
     $result->close();
    $stmt2->close();
    ?>
    </select>
  </p>
  <p>
    <span class="title">Assignee: </span><select name="task_assignee_id" size "5">
    <?php 
    require_once '../dblogin.php'; 
    $conn = new mysqli ($host, $user, $password, $database) or die("Connection Failed");
    $stmt3 = $conn->stmt_init();
    //pulls intern names for the select element//
    $sql3 = "select * from users where user_role='INT'";
    $stmt3->prepare($sql3);
    $stmt3->execute();
    $result = $stmt3->get_result();
    while($resultRow = $result->fetch_array(MYSQLI_ASSOC))
    {
    var_dump($resultRow); 
        echo "<option value='".$resultRow[person_id]."'>".$resultRow[user_name]."</option>";

    }
     $result->close();
    $stmt3->close();
    ?>
    </select>
  </p>
  <p>
    <label for="dates"class="title">Schedule for:</label>
    <input name="datepicker" type="text" id="datepicker"/>
  </p>
  <p>
    <span class="title">Duration: </span><select name="task_duration" size "1">
    <option value="00:30:00">30 minutes</option>
    <option value="01:00:00">1 hour</option>
    <option value="01:30:00">1,5 hours</option>
    </select>
  </p>
  <p>
    <label for="task_notes"class="title">Additional notes:</label>
    <input name="task_notes" type="text" class="widebox" id="task_notes">
  </p>
  <p>
    <span class="title">task status: </span><select name="task_status" size "1">
    <option value="Complete">Complete</option>
    <option value="Incomplete">Incomplete</option>
    </select>
  </p>
  <p class="submit">
    <input type="submit" name="create" value="Create task" id="create">
  </p>
</div>
</form>
</div>

<?php
require('../Login/includes/footer.inc.php');
?>

</body>
</html> 
```

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:32:29.223

出于某种原因，您没有对`$time`值使用准备好的语句（以及 $_SESSION['id'] ）。

这要么很危险，要么是您遇到错误的真正原因。

```
$sql = 'INSERT INTO tasks (task_name, task_project_id, task_assignee_id,
        datepicker, task_created_by, task_schedule, task_duration, 
        task_end_date, task_creation_date, task_notes, task_status)
        VALUES(?, ?, ?, ?, ?, ?, ?, ?, NOW(), ?, ?)';

if ($stmt->prepare($sql)) {
// bind parameters and execute statement
    $stmt->bind_param('siisissss', $_POST['task_name'], $_POST['task_project_id'],
    $_POST['task_assignee_id'], $_POST['datepicker'], $_SESSION['id'],
    $_POST['task_duration'], $time, $_POST['task_notes'], $_POST['task_status']); 
```

它应该是，或者类似的东西。您需要自己检查占位符、类型字符串和相应的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:30:17.733

您正在为查询使用单引号。这种方式`$time`不会扩展到变量值。您应该像这样使用双引号 ( `"`)：

```
"INSERT INTO tasks (task_name, task_project_id, task_assignee_id, datepicker, task_created_by, task_schedule, task_duration, task_end_date, task_creation_date, task_notes, task_status)
      VALUES(?, ?, ?, ?, ".$_SESSION['id'].", ?, ?, $time, NOW(), ?, ?)"; 
```

`$_SESSION['id']`另外，我认为您也应该为and使用参数`$time`，因为来自用户的所有内容都不能真正被信任。

# python - 将字符串转义为有效的python表达式

> ID：16143648
> 
> 赞同：2
> 
> 时间：2013-04-22T09:28:09.803
> 
> 标签：python, python-3.2

我的问题很简单。让我们假设你在 python 中有这样的字符串`Foo '" \ Bar`。

将它转换为*有效的python表达式*的**正确方法**是什么（所以你只需将它复制并粘贴到python解释器就可以了）？*`'Foo \'" \\ Bar'`*

 *我想过`'"{}"'.format(some replace magic)`，但必须有更好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:30:12.517

您可以使用[`unicode_escape`编解码器](http://docs.python.org/3/library/codecs.html#standard-encodings)；这会产生一个`bytes`实例：

```
>>> example = 'Foo \'" \\ Bar'
>>> print(example)
Foo '" \ Bar
>>> print(example.encode('unicode_escape'))
b'Foo \'" \\\\ Bar'
>>> example.encode('unicode_escape')
b'Foo \'" \\\\ Bar' 
```

`unicode_escape` *显式*生成有效的 python 字符串文字：

> 在 Python 源代码中生成一个适合作为 Unicode 文字的字符串

要回到 Unicode，只需从 ASCII 解码：

```
>>> print(example.encode('unicode_escape').decode('ascii'))
Foo '" \\ Bar
>>> example.encode('unicode_escape').decode('ascii')
'Foo \'" \\\\ Bar' 
```

或者，使用[`repr()`](http://docs.python.org/3/library/functions.html#repr)：

```
>>> repr(example)
'\'Foo \\\'" \\\\ Bar\''
>>> print(repr(example))
'Foo \'" \\ Bar' 
```

> 返回包含对象的可打印表示的字符串。对于许多类型，此函数会尝试返回一个字符串，该字符串在传递给 时会产生具有相同值的对象`eval()`，否则表示是用尖括号括起来的字符串，其中包含对象类型的名称以及其他信息通常包括对象的名称和地址。

字符串的输出`repr()`可以直接粘贴回 Python 解释器，无需额外的格式化。

请注意，`repr()`只有*在绝对必要*`unicode_escape`时才转义引号。只有当*两种*引用样式（单引号和双引号）都存在时，其中一种才会被转义：

 **```
>>> print(repr('\''))
"'"
>>> print(repr('\"'))
'"'
>>> print(repr('\'"'))
'\'"' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:41:57.527

这正是要做`repr`的事情：

```
>>> x = '''Foo '" \ Bar'''
>>> repr(x)
'\'Foo \\\'" \\\\ Bar\''
>>> print(repr(x))
'Foo \'" \\ Bar' 
```***

# ajax - 从 Action 方法返回原始对象并在渲染之前将它们转换为 JsonResult

> ID：16143656
> 
> 赞同：0
> 
> 时间：2013-04-22T09:28:36.240
> 
> 标签：ajax, asp.net-mvc, json, asp.net-mvc-4, asp.net-ajax

我正在开发的网站很大程度上依赖于 ajax/json 和 knockout.js。我希望我的很多控制器返回视图定制的“json 对象”，而不是在返回方法时将它们包装在 JsonResult 中。

这意味着我可以轻松地将多个调用组合到一个父对象中，但仍然可以单独调用 Actions。

简化示例：

```
public object Main(int groupId)
{
    var viewModel = new
    {
        Persons    = Employees(groupId),
        Messages   = AllMessages()
    };

    return viewModel;
}

public object Employees(int groupId)
{
    return DatabaseContext.Employees.Where(e => e.GroupId == groupId).ToList();
}

public object AllMessages()
{
    return DatabaseContext.Messages.ToList();
} 
```

我希望我可以捕获返回的对象，`OnActionExecuted`然后将整个结果包装在一个 final 中`JsonResult`。

结果已经转换为字符串并被捕获`ContentResult`。

有任何想法吗？：） 谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:38:18.513

一个好的方法是为您的实体调用创建辅助方法。或者，如果您已经在某处拥有这些方法，它们实际上可以用作辅助方法。以这种方式，您可以返回强类型列表`Messages`以及`Employees`返回所需的父对象。然后，您可以拥有返回 json 对象的单个控制器方法。此外，您可以扩展父视图模型以返回其他字段。

## 父视图模型

```
public class ParentModel {
    public Employee Persons {get;set;}
    public Message Messages {get;set;}
} 
```

## 辅助方法

使用类似于此处定义的辅助方法的好处在于，您可以对查询应用更多逻辑，甚至更多，并且您不必更改控制器方法中的任何内容。

```
public ParentModel GetMain(int groupId)
{
    var viewModel = new ParentModel 
    {
        Persons    = Employees(groupId),
        Messages   = AllMessages()
    };

    return viewModel;
}

public IEnumerable<Employee> Employees(int groupId)
{
    return DatabaseContext.Employees.Where(e => e.GroupId == groupId).ToList();
}

public IEnumerable<Message> AllMessages()
{
    return DatabaseContext.Messages.ToList();
} 
```

## 控制器方法

```
public ActionResult GetParent(int groupId){
    return Json(helperinstance.GetMain()); 
}
public ActionResult GetEmployees(int groupId){
    return Json(helperinstance.Employees()); 
}
public ActionResult GetMessages(int groupId){
    return Json(helperinstance.AllMessages()); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:51:15.277

感谢你的回答。我不会寻求 von v. 的解决方案，因为我希望样板文件尽可能小。

最后，我正在尝试以下方法。它现在似乎工作得很好，但我仍然需要在实际生产中对其进行测试。

如果有人对此有一些（安全）问题，我很高兴在评论中听到他们的声音。

```
// BaseController
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    var returnType = ((ReflectedActionDescriptor)filterContext.ActionDescriptor).MethodInfo.ReturnType;

    // is the returnType not deriving from ActionResult? Automatically wrap it in a JsonResult
    if ( !typeof(ActionResult).IsAssignableFrom(returnType) )
    {
        var result = filterContext.ActionDescriptor.Execute(filterContext, filterContext.ActionParameters);

        filterContext.Result = Json( result );
    }
} 
```

# android - 适用于 Android 的 Apache MINA 与 netty

> ID：16143657
> 
> 赞同：7
> 
> 时间：2013-04-22T09:28:37.057
> 
> 标签：android, netty, apache-mina

[这里](https://stackoverflow.com/questions/1637752/netty-vs-apache-mina)有一个非常丰富的 MINA 和 netty 比较 我想知道你在平台是 Android 时的偏好！

*   我有一个*主机*，它应该接受来自安卓设备的连接并建立与安卓设备的连接。
*   该*主机*为其操作实现了 Boost.ASIO。我需要为android端选择一个简单的框架。
*   基于几个小时的谷歌搜索，我对 java 相当陌生，缩小到**MINA**和**netty**。两者似乎都不错，尽管 netty 似乎更容易。
*   当我阅读一些关于在 android 中使用 netty 的错误报告时，我感到很困惑。

*   连接到主机的安卓模拟器数量可以增长到很大。

所以问题很简单： **哪个更好用：netty 还是 MINA？**

顺便说一句，还有其他建议的框架吗？

我重视您的友好评论和回答。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T08:46:54.470

我和乔恩·瓦特（Jon Watte）一样认为，这将是一次“阅读和测试”，我已经阅读了两者，但似乎没有人比另一个人更好，只是不同，他的优点和缺点。

寻找一些看起来像你的项目来让你的任务更容易，如果netty上有很多项目使用这个，反之亦然。所以试试你喜欢的，就这个。

# java - 如何在 J2ME 模拟器中连接 NFC

> ID：16143658
> 
> 赞同：1
> 
> 时间：2013-04-22T09:28:37.157
> 
> 标签：java

如何在 j2me 模拟器中进行 NFC 连接。如果有人已经在这个项目上工作，请帮助我找出问题所在，如果您有任何与该项目相关的演示代码，请与我分享。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:34:53.163

NFC J2ME 实现是[JSR-257 Contactless Communication API](http://jcp.org/en/jsr/detail?id=257)。我想您正在使用[WTK 2.5.2_01](http://www.oracle.com/technetwork/java/download-135801.html)。

从该链接中，您可以看到有大约 20 个开箱即用的模块支持，但 JSR-257 不支持，因此您必须在模拟器中加载它。

这个[答案](https://stackoverflow.com/questions/5741505/how-to-install-jar-file-in-the-wireless-toolkit-emulator-using-command-prompt-in)有一个命令行解决方案，但应该有可能从 Netbeans GUI 加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T15:52:50.900

试试诺基亚 6212 NFC 模拟器。我已经在 Windows Vista 上使用它进行了开发。似乎也适用于 Windows 7... [http://developer.nokia.com/info/sw.nokia.com/id/5bcaee40-d2b2-4595-b5b5-4833d6a4cda1/S40_Nokia_6212_NFC_SDK.html](http://developer.nokia.com/info/sw.nokia.com/id/5bcaee40-d2b2-4595-b5b5-4833d6a4cda1/S40_Nokia_6212_NFC_SDK.html)

# django - Heroku - 无法导入设置（Django）

> ID：16143664
> 
> 赞同：1
> 
> 时间：2013-04-22T09:28:50.437
> 
> 标签：django, heroku

我已经删除了`settings.py`文件并`settings`在同一级别创建了一个目录，并创建了三个文件。这是这些文件。

*   `settings/production.py`
*   `settings/staging.py`
*   `settings/__init__.py`

`init`并将以下语句放入文件中。

```
site_env = get_env_variable('SITE_ENV')
if site_env:
    if site_env == 'staging':
        from .staging import *
    elif site_env == 'production':
        from .production import * 
```

但我收到错误`raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))`。我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:35:01.840

我已经更改并在dir中`Procfile`创建了一个新`common.py`文件。`settings`然后我把以下内容放到common.py中。现在两台服务器都在运行。谢谢 ：-）

```
site_env = get_env_variable('SITE_ENV')
if site_env:
    if site_env == 'staging':
        from .staging import *
    elif site_env == 'production':
        from .production import * 
```

`Procfile`文件->

`web: python manage.py runserver --settings=myapp.settings.common 0.0.0.0:$PORT --noreload`

# ruby - 不带参数的文档块

> ID：16143667
> 
> 赞同：6
> 
> 时间：2013-04-22T09:28:52.640
> 
> 标签：ruby, block, yard

我正在写我的第一个 gem，我正在用 YARD 记录它。我已经让我的一个类有一个构造函数，它需要一个不带参数的块¹。

YARD 提供`@yield [params] description`标签来根据方法将传递给它的参数来描述块参数，但如果`params`列表为空，则格式不正确。我应该如何记录没有参数的块？

¹：从技术上讲，我什`yield`至不知道；我的代码如下所示：

```
def initialize(&block)
  define_singleton_method(:create, block)
  create
  class << self; undef_method :create; end
end 
```

...因此该块包含要在新创建的对象的上下文中运行的代码。如果出于某种原因这是一个糟糕的主意，我也很高兴知道这一点:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T11:35:03.570

我在 YARD 的 github 页面上发现了一个[老问题；](https://github.com/lsegal/yard/issues/120)看起来参数块应该被省略：

```
# @yield Description of the block here
def initialize(&block)
  define_singleton_method(:create, block)
  create
  class << self; undef_method :create; end
end 
```

# c# - 将 DS 行状态的所有表更新为未更改

> ID：16143670
> 
> 赞同：0
> 
> 时间：2013-04-22T09:28:58.447
> 
> 标签：c#, asp.net, ado.net, datatable, dataset

我有包含 6 个数据表的 TypedDataset 文件。文件 01 到文件 06。我将数据插入到所有这些数据表中，以便所有表行的行状态更改为已添加。现在，当我更新数据表 file01 时，如下所示

```
((System.Data.Common.DbDataAdapter)da).Update(ds.Tables["File01"].Select("", "", DataViewRowState.Added)); 
```

它将 File01 的行状态和依赖于 table01 的所有表（File02、File03、File04）更改为未更改，而不是仅更改 File01 的行状态。
**注意：** **File01 的 Run_Cde 列是 File02、File03、File04 中的外键。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:20:18.343

哦，那太简单了，我只需要将接受/拒绝规则更改为无而不是级联..仅此而已。

# php - SimpleXML & html 实体 = 奇怪的字符

> ID：16143671
> 
> 赞同：-3
> 
> 时间：2013-04-22T09:29:03.080
> 
> 标签：php, utf-8, simplexml, html-entities

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:51:39.280

# javascript - 当通过 mvc3 中的 ajax 从数据库获取数据时，我的 javascript 函数不显示警报消息

> ID：16143674
> 
> 赞同：0
> 
> 时间：2013-04-22T09:29:08.827
> 
> 标签：javascript, asp.net-mvc-3, jquery

我正在处理 mvc3 中的表单，并在 javascript 和 ajax 中使用表单验证。在我的表单中，我在数据库中添加代码和描述，在提交表单之前想要检查数据库中是否已经存在代码。我通过 ajax 函数调用获取 javascript 中的代码，并以 json 形式返回数据。当我得到数据时，我会向用户显示错误消息，提醒用户该代码已经存在。但我的警报没有显示。我该怎么办。下面是我的javascript保存按钮点击功能

```
 $('#sve').click(function () {
    //e.preventDefault();
      var iscodeexis = CodeExistChk();
    if (iscodeexis) {//

        //***********************CODE TO SAVE DATA IN DATABASE***********************************
        var person = { AcCode: $('#AcCode').val(), Descrip: $('#Descrip').val(), AddOn: dd };
        $.ajax({
            url: '/Home/Save?action=Sve',
            type: "POST",
            data: JSON.stringify(person),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                //   $('#message').html('Record saved successfully' + result).fadeIn();
                alert("Record saved successfully");
            },
            error: function () {
                //    $('#message').html('Error Occurred').fadeIn(); 
                alert("Record not saved successfully");
            }
        });
    }//end of is valid function chk
    else
        return false;//if isvalid function return false then save button also return false

});  //end button clcik function

 function CodeExistChk() {
    subA = $('#AcCode').val().trim();
    //  ===========================check whether code exist already or not
    if (subA.length === 10) {
        str1 = "select AcCode from Account where AcCode='";
        str2 = str1 + subA + "'";
        GetCodeData(str2); //check whether code exist or not
        strRes = strRes.substring(1, strRes.length - 1);
        if (strRes.length > 0 && strRes != "") //if  code exist then return false and not allow     to enter code   
        {
            alert('Code already exist cannot insert record');
            return false;
        }

    }
    //===============================

    } 
```

下面是 getcodedata 函数，它在上面的代码中用于从数据库中获取代码

```
 //===============FUNCTION TO GET CODE FROM DATABASE TO USE IN JS FILE==========
function GetCodeData(Str) {

    var p = {
        StrSql: Str

    };
    $.ajax({
        url: '/Home/GetGenVal',
        type: 'POST',
        // contentType: 'application/x-www-form-urlencoded',
        dataType: "JSON",
        contentType: "application/json; charset=utf-8",
        processData: false,
        crossDomain: false,
        traditional: true,
        data: JSON.stringify(p),
        cache: false,
        //   success: callback
        success: function (data) {
            //$("#Descrip").val(data);
            //  ResSubCode = data;
            strRes = null;
            strRes = data;
            return strRes;
        }

    });
} 
```

等待早日解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:35:15.210

哇，我在这段代码中看到了一些错误。首先，永远不要在客户端构建你的 sql 查询来执行它们。如果我将查询修改为“删除”怎么办？再见数据库！

我将简单地编辑您的逻辑并使用 [RemoteAttribute] MVC3/4 功能来调用控制器操作并仅返回真或假。在这里查看：[Remoteattribute 测试用法](https://stackoverflow.com/questions/5121160/display-the-result-of-remoteattribute-in-mvc-3-0) 你不会错的！

文森佐。

# dynamics-crm-2011 - 在 CRM 中保存注释实体时出错

> ID：16143678
> 
> 赞同：0
> 
> 时间：2013-04-22T09:29:18.047
> 
> 标签：dynamics-crm-2011

我正在尝试使用以下代码将注释实体保存在 CRM 2011 中：

```
var annotationContext = new CrmOrganizationServiceContext(crmOrganizationService);
var annotation = annotationContext.CreateEntity("annotation");
annotationContext.AddObject(annotation);
// Setting the account id.
entity.SetAttributeValue<EntityReference>("objectid", "account", "Guid of the account");    
entity.iCrmSetPropertyValue(AnnotationDefinition.ColumnsName.DocumentBody,Convert.ToBase64String(new UnicodeEncoding().GetBytes("Sample Annotation Text")));
entity.iCrmSetPropertyValue("isdocument",true);
entity.iCrmSetPropertyValue(AnnotationDefinition.ColumnsName.Mime, "text/plain");
entity.iCrmSetPickListValue(AnnotationDefinition.ColumnsName.ObjectType, 1);
entity.iCrmSetPropertyValue(AnnotationDefinition.ColumnsName.Subject, "CompanyLogo");
annotationContext.SaveChanges(); 
```

保存更改方法失败，在 crm 服务器的事件查看器中出现以下错误：

> OrganizationId 中的 Web 服务插件失败：###########；SdkMessageProcessingStepId: #####; EntityName：注解；阶段：30；消息名称：创建；程序集名称：Microsoft.Crm.Extensibility.InternalOperationPlugin，Microsoft.Crm.ObjectModel，版本=5.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35；类名：Microsoft.Crm.Extensibility.InternalOperationPlugin；异常：未处理的异常：System.InvalidCastException：指定的转换无效。在 Microsoft.Crm.BusinessEntities.EntityNameReferenceAttributeConverter.ConvertToBusinessEntity（对象值，AttributeMetadata attributeMetadata，Dictionary`2 abbrvToChildAttributeMetadata，ICrmConversionContext 上下文，BusinessEntity 目标）在 Microsoft.Crm.BusinessEntities.EntityToBusinessEntityConverter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:07:54.457

您将`annotation`变量添加到上下文中，但更新了实体对象。

# java - 可以编译 Java 8 代码以在 Java 7 JVM 上运行吗？

> ID：16143684
> 
> 赞同：167
> 
> 时间：2013-04-22T09:29:24.503
> 
> 标签：java, jvm, compatibility, java-7, java-8

Java 8 引入了重要的新语言特性，例如 lambda 表达式。

语言的这些变化是否伴随着编译后的字节码的重大变化，会阻止它在不使用某些逆向翻译器的情况下在 Java 7 虚拟机上运行？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2014-03-18T22:30:24.427

不，在源代码中使用 1.8 功能需要您以 1.8 VM 为目标。我刚刚尝试了新的 Java 8 版本并尝试使用 编译`-target 1.7 -source 1.8`，编译器拒绝：

```
$ javac Test -source 1.8 -target 1.7
javac: source release 1.8 requires target release 1.8 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-05-20T10:18:24.353

默认方法需要对字节码和 JVM 进行此类更改，而这在 Java 7 上是不可能做到的。Java 7 及更低版本的字节码验证器将拒绝与方法主体的接口（静态初始化方法除外）。尝试在调用方使用静态方法模拟默认方法不会产生相同的结果，因为默认方法可以在子类中被覆盖。[Retrolambda](https://github.com/orfjackal/retrolambda)对向后移植默认方法的支持有限，但它永远无法完全向后移植，因为它确实需要新的 JVM 特性。

Lambdas 可以在 Java 7 上按原样运行，如果必要的 API 类存在的话。invokedynamic 指令存在于 Java 7 中，但可以实现 lambdas，以便它在编译时生成 lambda 类（早期的 JDK 8 构建就是这样做的），在这种情况下，它可以在任何 Java 版本上工作。（Oracle 决定为 lambdas 使用 invokedynamic 以备将来验证；也许有一天 JVM 将拥有一流的函数，因此可以将 invokedynamic 更改为使用它们，而不是为每个 lambda 生成一个类，从而提高性能。）Retrolambda 所做的是它处理所有这些调用动态指令并用匿名类替换它们；与第一次调用 lamdba 调用动态时 Java 8 在运行时所做的相同。

[重复注释](http://docs.oracle.com/javase/tutorial/java/annotations/repeating.html)只是语法糖。它们是与以前版本兼容的字节码。在 Java 7 中，您只需要自己实现帮助方法（例如[getAnnotationsByType](https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/AnnotatedElement.html#getAnnotationsByType-java.lang.Class-)），它隐藏包含重复注释的容器注释的实现细节。

AFAIK，[类型注释](http://docs.oracle.com/javase/tutorial/java/annotations/type_annotations.html)仅在编译时存在，因此它们不应该需要更改字节码，因此只需更改 Java 8 编译类的字节码版本号就足以使它们在 Java 7 上运行。

[方法参数名称](http://docs.oracle.com/javase/tutorial/reflect/member/methodparameterreflection.html)存在于 Java 7 的字节码中，因此也是兼容的。您可以通过读取方法的字节码并查看方法的调试信息中的局部变量名称来访问它们。例如，Spring 框架正是这样做来实现[@PathVariable](http://docs.spring.io/spring-framework/docs/4.2.2.RELEASE/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-uri-templates)的，因此您可能可以调用一个库方法。因为抽象接口方法没有方法体，所以 Java 7 中的接口方法不存在调试信息，Java 8 中也不存在 AFAIK。

[其他新功能](http://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html)主要是新的 API、对 HotSpot 和工具的改进。一些新的 API 可作为 3rd 方库使用（例如[ThreeTen-Backport](http://www.threeten.org/threetenbp/)和[streamsupport](http://sourceforge.net/projects/streamsupport/)）。

Summa summarum，默认方法需要新的 JVM 特性，但其他语言特性不需要。如果要使用它们，则需要在 Java 8 中编译代码，然后使用[Retrolambda](https://github.com/orfjackal/retrolambda)将字节码转换为 Java 5/6/7 格式。至少需要更改字节码版本，并且 javac 不允许`-source 1.8 -target 1.7`，因此需要逆向翻译器。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-04-29T15:03:31.787

据我所知，JDK 8 中的这些更改都不需要添加新的字节码。部分 lambda 检测正在使用`invokeDynamic`（JDK 7 中已经存在）完成。因此，从 JVM 指令集的角度来看，没有什么可以使代码库不兼容。但是，有很多相关的 API 和编译器改进可能会使来自 JDK 8 的代码难以在以前的 JDK 下编译/运行（但我没有尝试过）。

也许以下参考资料可以帮助加深对如何检测与 lambda 相关的更改的理解。

*   [从 Lambda 到字节码](http://medianetwork.oracle.com/video/player/1113272510001)
*   [Lambda 表达式的翻译](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html)

这些详细解释了事物是如何在引擎盖下进行检测的。也许您可以在那里找到问题的答案。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-05-17T09:39:19.413

如果您愿意使用“retrotranslator”，请尝试 Esko Luontola 出色的 Retrolambda：[https ://github.com/orfjackal/retrolambda](https://github.com/orfjackal/retrolambda)

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2014-12-20T15:33:38.877

你可以这样做，`-source 1.7 -target 1.7`然后它会编译。但是如果你有 java 8 特定的特性，比如 lambda，它就不会编译

# php - 试图理解一些与php中的array_reverse相关的代码

> ID：16143685
> 
> 赞同：1
> 
> 时间：2013-04-22T09:29:34.610
> 
> 标签：php

```
<?php
class ExtendedArrayObject extends ArrayObject {
    private $_array;
    public function __construct()
    {
        if (is_array(func_get_arg(0)))
            $this->_array = func_get_arg(0);
        else
            $this->_array = func_get_args();
        parent::__construct($this->_array);
    }

    public function reverse($applyToSelf=false)
    {
        if (!$applyToSelf)
        {
            return array_reverse($this->_array);
        }
        else
        {
            $_array = array_reverse($this->_array);
            $this->_array = $_array;
            parent::__construct($this->_array);
            return $this->_array;
        }
    }
}
$newArray = new ExtendedArrayObject(array(1,2,3,4,5,6));
print_r($newArray->reverse()); //reverse the array
...
?> 
```

上面的代码取自一本书。

问题：

我将代码更改为，`print_r($newArray->reverse(true));` 但输出是相同的。所以既然输出是一样的，为什么我们需要使用 if...else...？在这种情况下，为什么我们需要这个 else 部分？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:37:37.627

不同之处在于，对于 false 情况，反转数组未分配给私有变量`$_array`。对于真实的情况，它被分配。

```
$array = new ExtendedArrayObject(array(1,2,3,4,5,6));

//false case
$reversed_array1 = $array->reverse();
var_dump($reversed_array1);//6,5,4,3,2,1
var_dump($array);//1,2,3,4,5,6

//true case
$reversed_array2 = $array->reverse(true);
var_dump($reversed_array2);//6,5,4,3,2,1
var_dump($array);//6,5,4,3,2,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:38:07.163

使用`$applyToSelf`，您的数组将永久更改，因此如果您稍后在程序中引用它，您将使用反转数组。

如果没有`$applyToSelf`，则不是，因此您只是返回一个反向数组以供一次性使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:32:31.653

它与可变状态有关。

else 部分允许反向数组的返回值，同时以原始顺序保留原始数组

```
<?php
$newArray1 = new ExtendedArrayObject(array(1,2,3,4,5,6));
$revArray1 = $newArray->reverse();

print_r($newArray1); // 1, 2, 3, 4, 5, 6
print_r($revArray1); // 6, 5, 4, 3, 2, 1

$newArray2 = new ExtendedArrayObject(array(1,2,3,4,5,6));
$revArray2 = $newArray->reverse(true);

print_r($newArray2); // 6, 5, 4, 3, 2, 1
print_r($revArray2); // 6, 5, 4, 3, 2, 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:34:33.097

输出看起来相同，但完全不同。

试试这个而不是当前的 print_r：

```
print_r($newArray);
print_r($newArray->reverse());
print_r($newArray);
print_r($newArray->reverse(true));
print_r($newArray); 
```

看？这是非常不同的！

# button - 使用偏移使按钮上的文本居中

> ID：16143686
> 
> 赞同：0
> 
> 时间：2013-04-22T09:29:37.293
> 
> 标签：button, text, javafx-2

我有各种加载了图像的 ToggleButtons。按钮大小由图像大小决定，按钮本身由 JavaCode 创建。一些按钮在左侧或右侧都有图标（图标只是加载图像的一部分）。

如何将文本向左或向右移动某个值，以便我可以再次将文本居中但使用图标的偏移量？我不介意将图标的宽度作为参数传递，但我找不到任何东西可以将文本移动一定量。

![在此处输入图像描述](https://i.stack.imgur.com/2uyzk.png)

该按钮是从绿色图像创建的，右侧图标是其中的一部分；总宽度为 300，图标占用 100；文本应该以剩余的 200 为中心。出于语言设置的原因，文本本身不能成为图片的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:39:25.710

您可以设置按钮的样式如下：

```
// top right bottom left
btn.setStyle("-fx-padding: 5px 5px 5px 5px;"); 
```

**编辑：**
您可以使用 HBox：

```
HBox hbox = new HBox();
// the text of the "button"
Label lbl_txt = new Label("Text");
// the icon of the "button", i am using Labels for icon(with css)
Label lbl_ico = new Label("ico");
hbox.getChildren().addAll(lbl_txt, lbl_ico);
hbox.setOnMouseClicked(new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEvent t) {
        // alternative to Button click
    }
}); 
```

其他一切都是用css设计的。;-)

# ios - 多个 NSUrlRequest 获取 WebService 的不同页面以在 TableView 中加载更多数据

> ID：16143687
> 
> 赞同：2
> 
> 时间：2013-04-22T09:29:44.297
> 
> 标签：ios, objective-c, nsurlrequest, nsmutableurlrequest

我有一个简单的 iPhone 应用程序，它从 rss 提要解析数据（标题、图像等）并显示在 tableview 中。

viewDidLoad 有一个初始计数器值，通过调用 fetchEntriesNew 方法到达提要的第一页并加载到 tableview 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];        
    counter = 1;    
    [self fetchEntriesNew:counter];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(dataSaved:)
                                              name:@"DataSaved" object:nil];
}

- (void) fetchEntriesNew:(NSInteger )pageNumber
{    
    channel = [[TheFeedStore sharedStore] fetchWebService:pageNumber withCompletion:^(RSSChannel *obj, NSError *err){

            if (!err) {
                int currentItemCount = [[channel items] count];
                channel = obj;
                int newItemCount = [[channel items] count];
                NSLog(@"Total Number Of Entries Are: %d", newItemCount);
                counter = (newItemCount / 10) + 1;
                NSLog(@"New Counter Should Be %d", counter);

                int itemDelta = newItemCount - currentItemCount;
                if (itemDelta > 0) {

                    NSMutableArray *rows = [NSMutableArray array];

                    for (int i = 0; i < itemDelta; i++) {
                        NSIndexPath *ip = [NSIndexPath indexPathForRow:i inSection:0];
                        [rows addObject:ip];
                    }
                    [[self tableView] insertRowsAtIndexPaths:rows withRowAnimation:UITableViewRowAnimationBottom];
                    [aiView stopAnimating];

                }
            }        
    }];
    [[self tableView] reloadData];
} 
```

当用户到达表格视图的底部时，我正在使用以下内容到达提要的下一页并在首先加载的第一页的底部加载：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    float endScrolling = scrollView.contentOffset.y + scrollView.frame.size.height;
    if (endScrolling >= scrollView.contentSize.height)
    {
        NSLog(@"Scroll End Called");
        NSLog(@"New Counter NOW is %d", counter);
        [self fetchEntriesNew:counter];
    }
} 
```

**UPDATE2：**这里有一个更容易理解的关于我无法解决的错误的描述：例如，RSS 提要的每一页都有 10 个条目。应用程序启动，标题和其他标签立即加载，图像开始延迟加载，最后完成。到目前为止，一切都很好。用户滚动到底部，到达底部将使用滚动委托方法，计数器从 1 增加到 2，告诉 fetchEntriesNew 方法到达 rss 提要的第二页。该程序将开始在之前获取的前 10 个条目的底部加载接下来的 10 个条目。这可以继续，每次用户滚动并到达底部时，程序将再获取 10 个条目，并且新行将放置在先前获取的行下方。到目前为止，一切都很好。

现在让我们说用户当前在页面 3 上，该页面已经完全加载了图像。由于第 3 页已完全加载，这意味着当前表格视图中有 30 个条目。用户现在滚动到底部，计数器增加，并且 tableview 开始从前 30 个条目底部的 rss 提要的第 4 页填充新行。标题快速填充，从而构建行，当图像被下载（尚未完全下载）时，用户再次快速移动到底部，而不是在第 4 页底部加载第 5 页，它将破坏第 4 页目前正在下载并开始再次加载第四个。

它应该做的是，当用户到达表格视图的底部时，它应该保留下一页的标题等，而不管前一页的图像是否正在下载。

在我的项目中下载和持久化数据没有问题，并且所有数据都在应用程序运行之间持久化。

有人可以帮助我指出正确的方向。提前致谢。

**更新 3：**根据@Sergio 的回答，这就是我所做的：

1) 添加了另一个对archiveRootObject [NSKeyedArchiver archiveRootObject:channelCopy toFile:cachePath]的调用；[channelCopy addItemsFromChannel:obj] 之后；

在这一点上，它不会一次又一次地破坏和重新加载同一批次，这正是我想要的。但是，如果我多次滚动以到达下一页而没有完全加载上一页的图像，它不会保留图像。

2）我不确定如何使用 Bool，正如他在答案中解释的那样。这就是我所做的：添加了@property Bool myBool; 在 TheFeedStore 中，合成它并在新添加 archiveRootObject:channelCopy 后将其设置为 NO，并在 fetchEntries 方法一开始在 ListViewController 中将其设置为 YES。它没有用。

3）我也意识到我处理整个问题的方式是性能不是更好。虽然我不知道如何在缓存之外使用图像并将它们作为缓存处理。您是否建议对图像使用单独的存档文件？

非常感谢所有为解决我的问题做出贡献的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:14:29.197

[如果您考虑您的这个较旧的问题](https://stackoverflow.com/questions/14388248/images-persistence-and-lazy-loading-conflict-with-dispatch-async)和[我提出的解决方案](https://gist.github.com/4579906)，您的问题可以理解。

具体来说，关键点与您保存信息（RSS 信息 + 图像）的方式有关，即通过将整个信息归档`channel`到磁盘上的文件：

```
 [channelCopy addItemsFromChannel:obj];
        [NSKeyedArchiver archiveRootObject:channelCopy toFile:pathOfCache]; 
```

现在，如果您查看`fetchEntriesNew:`，您在那里做的第一件事就是破坏您当前的频道。如果这种情况发生**在通道被持久化到磁盘之前，**您将进入一种无限循环。

我了解您目前在图片下载的最后阶段保留您的频道（根据我最初的建议）。

您应该做的是在读取提要之后和开始下载图像之前保留通道（当然，您也应该在图像下载结束时保留它）。

因此，如果您从我的旧要点中获取此片段：

```
[connection setCompletionBlock:^(RSSChannel *obj, NSError *err) {

    if (!err) {

        [channelCopy addItemsFromChannel:obj];

        // ADDED
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            dispatch_group_wait(obj.imageDownloadGroup, DISPATCH_TIME_FOREVER);
            [NSKeyedArchiver archiveRootObject:channelCopy toFile:cachePath];
        });
    }
    block(channelCopy, err); 
```

您应该做的是再添加一个`archiveRootObject`电话：

```
[connection setCompletionBlock:^(RSSChannel *obj, NSError *err) {

    if (!err) {

        [channelCopy addItemsFromChannel:obj];
        [NSKeyedArchiver archiveRootObject:channelCopy toFile:cachePath];

        // ADDED
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            dispatch_group_wait(obj.imageDownloadGroup, DISPATCH_TIME_FOREVER);
            [NSKeyedArchiver archiveRootObject:channelCopy toFile:cachePath];
        });
    }
    block(channelCopy, err); 
```

只要您滚动速度不够快，以至于在读取提要（没有图像）之前通道被破坏，这将使事情正常进行。要解决此问题，您应该在您的类中添加一个 bool，您在调用时`TheFeedStore`设置为该类，并在执行新添加的.`YES``fetchWebService``archiveRootObject:channelCopy`

这将解决您的问题。

我还要说，从设计/架构的角度来看，管理持久性的方式存在很大问题。实际上，您在磁盘上有一个文件，您可以使用`archiveRootObject`. 从多线程的角度来看，这种架构本质上是“有风险的”，您还应该设计一种方法来避免对共享存储的并发访问没有破坏性影响（例如：您同时将第 4 页的通道存档到磁盘第 1 页的图像已完全下载的时间，因此您尝试将它们也保存到同一个文件中）。

图像处理的另一种方法是将图像存储在存档文件之外，并将它们视为一种缓存。这将解决并发问题，并且还将消除因为每个页面两次归档通道而导致的性能损失（当第一次读取提要时，然后当图像进入时）。

希望这可以帮助。

更新：

> 在这一点上，它不会一次又一次地破坏和重新加载同一批次，这正是我想要的。但是，如果我多次滚动以到达下一页而没有完全加载上一页的图像，它不会保留图像。

这正是我的意思是说您的架构（共享存档/并发访问）可能会导致问题。

你有几个选择：使用 Core Data/sqlite；或者，更容易的是，将每个图像存储在其自己的文件中。在后一种情况下，您可以执行以下操作：

1.  在检索时，为每个图像分配一个文件名（这可以是提要条目的 id 或序列号或其他）并将图像数据存储在那里；

2.  将图像的 URL 和应存储的文件名存储在存档中；

3.  当您需要访问图像时，您不会直接从存档字典中获取它；相反，您从中获取文件名，然后从磁盘读取文件（如果可用）；

4.  此更改不会影响您当前的 rss/图像检索实现，但只会影响您保留图像并在需要时访问它们的方式（我的意思是，这似乎是一个非常容易的更改）。

> 2）我不确定如何使用 Bool，正如他在答案中解释的那样。

1.  `isDownloading`向 TheFeedStore添加一个布尔值；

2.  `YES`在你的方法中设置它`fetchWebService:`，就在做之前`[connection start]`；

3.  在第一次归档提要后立即将其设置为`NO`在传递给连接对象的完成块中（再次在 中`fetchWebService:`）（您已经在这样做）；

4.  在你的`scrollViewDidEndDecelerating:`, 一开始，做：

    ```
     if ([TheFeedStore sharedStore].isDownloading)
            return; 
    ```

    这样您就不会在刷新时刷新 rss 提要。

让我知道这是否有帮助。

新更新：

让我概述一下如何处理将图像存储在文件中。

在您的 RSSItem 类中，定义：

```
@property (nonatomic, readonly) UIImage *thumbnail;
@property (nonatomic, strong) NSString *thumbFile; 
```

`thumbFile`是托管图像的本地文件的路径。获得图像 URL ( `getFirstImageUrl`) 后，您可以获取它的例如 MD5 哈希值，并将其用作本地图像文件名：

```
NSString* imageURLString = [self getFirstImageUrl:someString];
....
self.thumbFile = [imageURLString MD5String]; 
```

（MD5String 是一个你可以用谷歌搜索的类别）。

然后，在 中`downloadThumbnails`，您将在本地存储图像文件：

```
 NSMutableData *tempData = [NSData dataWithContentsOfURL:finalUrl];
    [tempData writeToFile:[self cachedFileURLFromFileName:self.thumbFile] atomically:YES];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"DataSaved" object:nil]; 
```

现在，诀窍是，当您访问该`thumbnail`属性时，您从文件中读取图像并返回它：

```
- (UIImage *)thumbnail
{
    NSData* d = [NSData dataWithContentsOfURL:[self cachedFileURLFromFileName:self.thumbFile]];
    return [[UIImage alloc] initWithData:d];
} 
```

在此代码段中，`cachedFileURLFromFileName:`定义为：

```
- (NSURL*)cachedFileURLFromFileName:(NSString*)filename {

NSFileManager *fileManager = [[NSFileManager alloc] init];
NSArray *fileArray = [fileManager URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];

NSURL* cacheURL = (NSURL*)[fileArray lastObject];
if(cacheURL)
{
    return [cacheURL URLByAppendingPathComponent:filename];
}
return nil;
} 
```

当然，`thumbFile`应该坚持这个工作。

如您所见，这种方法非常“容易”实施。这不是一个优化的解决方案，只是一种让您的应用程序在其当前架构下工作的快速方法。

为了完整起见，`MD5String`类别：

```
@interface NSString (MD5)

- (NSString *)MD5String;

@end

@implementation NSString (MD5)

- (NSString *)MD5String {
const char *cstr = [self UTF8String];
unsigned char result[16];
CC_MD5(cstr, strlen(cstr), result);

return [NSString stringWithFormat:
        @"%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X%02X",
        result[0], result[1], result[2], result[3],
        result[4], result[5], result[6], result[7],
        result[8], result[9], result[10], result[11],
        result[12], result[13], result[14], result[15]
        ];  
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T23:17:54.887

你实际上想要做的是在一个`UITableView`

现在这非常简单，最好的想法是在您的`UITableView`委托`cellForRowAtIndexPath`方法中实现分页，而不是在委托方法上执行此操作`UIScrollView` `scrollViewDidEndDecelerating`。

这是我的分页实现，我相信它也应该适合您：

首先，我有一个与分页相关的实现常量：

```
//paging step size (how many items we get each time)
#define kPageStep 30
//auto paging offset (this means when we reach offset autopaging kicks in, i.e. 10 items before the end of list)
#define kPageBegin 10 
```

我这样做的原因是为了轻松更改 .m 文件上的分页参数。

这是我进行分页的方式：

```
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];
    int section = indexPath.section-1;

    while (section>=0) {
        row+= [self.tableView numberOfRowsInSection:section];
        section--;
    }

    if (row+kPageBegin>=currentItems && !isLoadingNewItems && currentItems+1<maxItems) {
        //begin request
        [self LoadMoreItems];
    }
......
} 
```

*   `currentItems`是一个整数，它具有 tableView 数据源当前项的数量。

*   `isLoadingNewItems`是一个布尔值，用于标记此时是否正在获取项目，因此我们在从服务器加载下一批时不会实例化另一个请求。

*   `maxItems`是一个整数，指示何时停止分页，是我从服务器检索并在初始请求中设置的值。

如果您不想有限制，您可以省略 maxItems 检查。

在我的分页加载代码中，我将`isLoadingNewItems`标志设置为 true，并在从服务器检索数据后将其设置回 false。

所以在你的情况下，这看起来像：

```
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger row = [indexPath row];
    int section = indexPath.section-1;

    while (section>=0) {
        row+= [self.tableView numberOfRowsInSection:section];
        section--;
    }

    if (row+kPageBegin>=counter && !isDowloading) {
        //begin request
        isDowloading = YES;
        [self fetchEntriesNew:counter];
    }
......
} 
```

添加新行后也无需重新加载整个表。只需使用这个：

```
for (int i = 0; i < itemDelta; i++) {
    NSIndexPath *ip = [NSIndexPath indexPathForRow:i inSection:0];
    [rows addObject:ip];
}

[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:rows withRowAnimation:UITableViewRowAnimationBottom];
[self.tableView endUpdates]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:37:53.040

一个简单`BOOL`的就足以避免重复调用：

```
BOOL isDowloading; 
```

下载完成后，将其设置为`NO`. 当它进入这里时：

```
 if (endScrolling >= scrollView.contentSize.height)
    {
        NSLog(@"Scroll End Called");
        NSLog(@"New Counter NOW is %d", counter);
        [self fetchEntriesNew:counter];
    } 
```

把它放到`YES`. 也不要忘记将其设置为`NO`请求失败时。

**编辑1：**

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    float endScrolling = scrollView.contentOffset.y + scrollView.frame.size.height;
    if (endScrolling >= scrollView.contentSize.height)
    {
        if(!isDowloading)
        {
           isDownloading = YES;
           NSLog(@"Scroll End Called");
           NSLog(@"New Counter NOW is %d", counter);
           [self fetchEntriesNew:counter];
        }
    }
} 
```

当你完成获取时，只需将其`NO`重新设置为。

# jquery - jquery中写onclick事件的合适位置

> ID：16143689
> 
> 赞同：2
> 
> 时间：2013-04-22T09:29:46.203
> 
> 标签：jquery, jquery-plugins

我在 jquery onready 函数之外编写 jquery onclick 事件。如果我在 jquery onready 函数中编写 onclick 函数，它以什么方式不同于执行流程？

例如：

```
 1\. jQuery(document).ready(function(){

  });
 jQuery("#elementid").click(function(){
  });

2\.  jQuery(document).ready(function(){
    jQuery("#elementid").click(function(){
  });

  }); 
```

1和2的执行流程有什么不同。哪一种是使用实时的最佳方式？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:32:29.197

第二个更好。第一个有时可能不起作用，因为您可能正在选择尚未加载的元素。通过包含在文档就绪处理程序中，您可以确保所有页面元素在您引用它们之前都已加载。

更普遍...

```
// code that does not interact with DOM can go here, and will be executed
// before the has DOM finished loading.
jQuery(document).ready(function(){
  // code that needs to access the page elements/DOM goes here, and will execute
  // after the DOM has finished loading
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:35:29.830

如果您在 DOM-ready 函数*之外*`#elementid`定义处理程序，则选择器可能会返回一个空值 - 如果您等待整个 DOM 被加载，您将是安全的。

另一方面，您可以将处理程序委托给文档：

```
$(document).on('click', '#elementid', function(event){ ... }); 
```

`document`这样，就在单击元素时，整个事件将被整个监听`#elementid`- 但这当然会更昂贵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:42:49.503

在第一种情况下，在 DOM 准备好之前不会执行代码。

见[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

`The handler passed to .ready() is guaranteed to be executed after the DOM is ready, so this is usually the best place to attach all other event handlers and run other jQuery code.`

如果您在`script`位于 HTML 开头或标题中的元素中执行第二个代码，则不会找到按钮元素并且不会绑定任何事件处理程序。使用`.ready`修复。

出于同样的原因，将脚本放在页面底部（与 相邻）也可以解决此问题 - 解析脚本时，HTML 将转换为 DOM，您可以遍历它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:33:14.987

在 onready 中编写事件处理程序总是更安全，因为否则可能会在将所需元素添加到 dom 之前执行您的脚本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T09:33:34.643

如果你想让一个事件在你的页面上工作，你应该在`$(document).ready()`函数内部调用它。这是为了确保您的所有元素都已添加到 DOM 并准备好使用。

也来自这个[**文档**](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)：

> $(document).ready() 函数比其他让事件生效的方法有很多优势。首先，您不必在 HTML 中放置任何“行为”标记。您可以将所有 JavaScript/jQuery 分离到一个单独的文件中，这样更易​​于维护并且不会影响内容
> 
> 使用 $(document).ready()，您可以让事件加载或触发，或者在窗口加载之前让它们执行任何操作。您插入括号内的所有内容都已准备好尽快使用——只要浏览器注册了 DOM，当用户第一次看到页面元素时，它就可以立即进行一些很好的隐藏和显示效果和其他内容

# r - 使用所有向量元素的组合粘贴两个向量

> ID：16143700
> 
> 赞同：85
> 
> 时间：2013-04-22T09:30:14.883
> 
> 标签：r, r-faq

我有两个向量：

```
vars <- c("SR", "PL")
vis <- c(1,2,3) 
```

基于这些向量，我想创建以下向量：

```
"SR.1"  "SR.2"  "SR.3"  "PL.1"  "PL.2"  "PL.3" 
```

我有`paste`以下结果：

```
paste(vars, vis, sep=".")
 [1] "SR.1" "PL.2" "SR.3" 
```

如何创建我需要的向量？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-04-22T09:38:09.217

您可以使用它，但可能有一个更简单的解决方案：

```
R> apply(expand.grid(vars, vis), 1, paste, collapse=".")
[1] "SR.1" "PL.1" "SR.2" "PL.2" "SR.3" "PL.3" 
```

* * *

`expand.grid`返回 a `data.frame`which 当与 一起使用时`apply`，`apply`会将其转换为 a `matrix`。这只是不必要的（在大数据上效率低下）。`outer`给出一个`matrix`并且也接受函数参数。它在处理大量数据时也会非常有效。

使用`outer`：

```
as.vector(outer(vars, vis, paste, sep="."))
# [1] "SR.1" "PL.1" "SR.2" "PL.2" "SR.3" "PL.3" 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2018-05-18T11:01:02.247

另一种选择是使用 的`each`参数`rep`：

```
paste(rep(vars, each = length(vis)), vis, sep = ".") 
```

我发现这比基于`apply`or的解决方案更直接`expand.grid`。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-12-16T15:12:13.553

`sprintf`结合使用的另一个选项`expand.grid`：

```
eg <- expand.grid(vis, vars)
sprintf('%s.%s', eg[,2], eg[,1]) 
```

这使：

```
[1] "SR.1" "SR.2" "SR.3" "PL.1" "PL.2" "PL.3" 
```

解释：

*   与`expand.grid`您一起创建两个向量的所有组合。
*   `sprintf`根据指定的格式 ( `'%s.%s'`) 将两个向量粘贴在一起。格式的每个`%s`部分都由向量的元素替换。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-06-04T09:47:28.120

这个老问题已经有了一个公认的答案。但由于它被用作欺骗目标，我相信添加一个`data.table`使用*交叉连接*功能的解决方案是值得的`CJ()`：

```
library(data.table) 
options(datatable.CJ.names=FALSE) # required with version version 1.12.0+
CJ(vars, vis)[, paste(V1, V2, sep =".")]
#[1] "PL.1" "PL.2" "PL.3" "SR.1" "SR.2" "SR.3" 
```

如果原始顺序很重要：

```
CJ(vars, vis, sorted = FALSE)[, paste(V1, V2, sep =".")]
#[1] "SR.1" "SR.2" "SR.3" "PL.1" "PL.2" "PL.3" 
```

### 编辑：`CJ()`已更改版本 1.12.0 的默认行为

正如[版本 1.12.0](https://github.com/Rdatatable/data.table/blob/master/NEWS.md#notes)（第 3 点）的发行说明中所宣布的，默认选项`options(datatable.CJ.names=TRUE)`已更改。`CJ()`现在自动命名它的输入`as data.table()`。

因此，上面的代码必须针对`data.table`1.12.0 及更高版本进行修改：

```
library(data.table)   ### version 1.12.0+
CJ(vars, vis)[, paste(vars, vis, sep =".")] 
```

和

```
CJ(vars, vis, sorted = FALSE)[, paste(vars, vis, sep =".")] 
```

分别

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-05-08T05:24:43.960

要保持问题中请求字符串的顺序，您可以使用这两种方法的以下两种修改：

改变向量的顺序并以相反的顺序组合

```
apply(expand.grid(vis, vars), 1, function(x) paste(x[2], x[1], sep=".")) 
[1] "SR.1" "SR.2" "SR.3" "PL.1" "PL.2" "PL.3" 
```

或在转换为向量之前转置矩阵：

```
as.vector(t(outer(vars, vis, paste, sep="."))) 
[1] "SR.1" "SR.2" "SR.3" "PL.1" "PL.2" "PL.3" 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-01-13T08:52:16.027

其他一些选项`purrr`：

```
library(purrr)
cross(list(vars, vis)) %>% map_chr(paste, sep = ".", collapse = ".")
#[1] "SR.1" "PL.1" "SR.2" "PL.2" "SR.3" "PL.3" 
```

我们也可以使用`cross2`

```
cross2(vars, vis) %>%  map_chr(paste, sep = ".", collapse = ".")
#[1] "SR.1" "PL.1" "SR.2" "PL.2" "SR.3" "PL.3" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-24T20:13:03.127

[从该链接](https://tidyr.tidyverse.org/reference/expand.html)复制的 dplyr 选项

```
 fruits <- tibble(
  type   = c("apple", "orange", "apple", "orange", "orange", "orange"),
  year   = c(2010, 2010, 2012, 2010, 2010, 2012),
  size  =  factor(
    c("XS", "S",  "M", "S", "S", "M"),
    levels = c("XS", "S", "M", "L")
  ),
  weights = rnorm(6, as.numeric(size) + 2)
) 
```

所有可能的组合，即所有组合都已定义，但不一定存在于数据中

```
fruits %>% expand(type)
#> # A tibble: 2 x 1
#>   type  
#>   <chr> 
#> 1 apple 
#> 2 orange
fruits %>% expand(type, size)
#> # A tibble: 8 x 2
#>   type   size 
#>   <chr>  <fct>
#> 1 apple  XS   
#> 2 apple  S    
#> 3 apple  M    
#> 4 apple  L    
#> 5 orange XS   
#> 6 orange S    
#> 7 orange M    
#> 8 orange L    
b<-fruits %>% expand(type, size, year)
#> # A tibble: 16 x 3
#>    type   size   year
#>    <chr>  <fct> <dbl>
#>  1 apple  XS     2010
#>  2 apple  XS     2012
#>  3 apple  S      2010
#>  4 apple  S      2012
#>  5 apple  M      2010
#>  6 apple  M      2012
#>  7 apple  L      2010
#>  8 apple  L      2012
#>  9 orange XS     2010
#> 10 orange XS     2012
#> 11 orange S      2010
#> 12 orange S      2012
#> 13 orange M      2010
#> 14 orange M      2012
#> 15 orange L      2010
#> 16 orange L      2012 
```

然后是简单的粘贴

```
b <- fruits %>% expand(type, size, year) %>% 
     mutate(., pasted=paste(type, size, year, sep=".")) 
```

# objective-c - 模拟器不显示iPhone5真实尺寸？

> ID：16143703
> 
> 赞同：0
> 
> 时间：2013-04-22T09:30:18.107
> 
> 标签：objective-c, cocos2d-iphone

我正在尝试使用 xcode 在模拟器上运行我们的应用程序并检查屏幕高度。我正在使用 cocos2d，但我也尝试过苹果方法。

```
 NSLog(@"HEIGT:%f",[UIScreen mainScreen].bounds.size.height);

      //and also :
     winSize = [[CCDirector sharedDirector] winSize];
     NSLog(@"HEIGT:%f",winSize.Height); 
```

两者都让我在 iPhone5 4 英寸上模拟了 480 的高度。这是为什么 ？我怎么知道这是否真的是 iPhone5？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:15:05.727

在您的项目中，拍摄一张尺寸为 640*1136 的图像并添加到启动图像的 Retina 图像中，您将获得实际尺寸。您也可以检查打印日志。

```
2013-04-22 13:10:56.510 test[7526:c07] cocos2d: cocos2d v1.0.1
2013-04-22 13:10:56.511 test[7526:c07] cocos2d: Using Director Type:CCDirectorDisplayLink
2013-04-22 13:10:56.654 test[7526:c07] cocos2d: OS version: 6.1 (0x06010000)
2013-04-22 13:10:56.654 test[7526:c07] cocos2d: GL_VENDOR:   Apple Computer, Inc.
2013-04-22 13:10:56.655 test[7526:c07] cocos2d: GL_RENDERER: Apple Software Renderer
2013-04-22 13:10:56.655 test[7526:c07] cocos2d: GL_VERSION:  OpenGL ES-CM 1.1 APPLE
2013-04-22 13:10:56.655 test[7526:c07] cocos2d: GL_MAX_TEXTURE_SIZE: 4096
2013-04-22 13:10:56.656 test[7526:c07] cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16
2013-04-22 13:10:56.656 test[7526:c07] cocos2d: GL_MAX_SAMPLES: 4
2013-04-22 13:10:56.657 test[7526:c07] cocos2d: GL supports PVRTC: YES
2013-04-22 13:10:56.657 test[7526:c07] cocos2d: GL supports BGRA8888 textures: YES
2013-04-22 13:10:56.657 test[7526:c07] cocos2d: GL supports NPOT textures: YES
2013-04-22 13:10:56.658 test[7526:c07] cocos2d: GL supports discard_framebuffer: YES
2013-04-22 13:10:56.658 test[7526:c07] cocos2d: compiled with NPOT support: NO
2013-04-22 13:10:56.658 test[7526:c07] cocos2d: compiled with VBO support in TextureAtlas : YES
2013-04-22 13:10:56.659 test[7526:c07] cocos2d: compiled with Affine Matrix transformation in CCNode : YES
2013-04-22 13:10:56.659 test[7526:c07] cocos2d: compiled with Profiling Support: NO
2013-04-22 13:10:56.708 test[7526:c07] cocos2d: Frame interval: 1
2013-04-22 13:10:56.709 test[7526:c07] Application windows are expected to have a root view controller at the end of application launch
2013-04-22 13:10:56.709 test[7526:c07] cocos2d: surface size: 320x568 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:41:18.490

几天前，我遇到了同样的问题，解决方案是......

为 Retina（4 英寸）设置适当尺寸的启动图像。

![在此处输入图像描述](https://i.stack.imgur.com/h78bE.png)

# php - 日语（或非 ASCII）url 和 curl

> ID：16143704
> 
> 赞同：0
> 
> 时间：2013-04-22T09:30:18.537
> 
> 标签：php, curl, character-encoding

我正在尝试通过以下网址访问文件：[http](http://www.myurl.com) : //www.myurl.com/伊势/image.jpg。

url 是预定义的，没有特定的格式或一致性。

我使用的基本 curl 功能适用于从 myurl.com 下载图像，但当 url 中包含日文字符时则不行。我尝试以各种方式（例如 urlencode、filter_var 和 mb_convert_encoding）清理 url，但没有成功。

如果我直接从浏览器访问 url，那很好 - 所以我无法解决的唯一问题是 curl 函数中非 ASCII（日语）字符的处理。

我的问题是——如何解决？是否可以在函数中包含 curl 选项，以便像浏览器一样读取 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:39:03.923

> 如果我直接从浏览器访问网址就可以了

这意味着您的浏览器编码“伊势”（如 %E4%BC%8A%E5%8B%A2）并在后台发送请求。但仍保留在浏览器地址框中的外观。

我的建议是使用 http 调试器，例如 firefox 中的“firebug”或 chrome 中的“开发者工具”。

检查“网络”选项卡，并在其详细信息页面中找到 REAL 请求参数。然后您可以找到您的浏览器发送的内容。

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:53:11.677

没什么特别的。
我在 UTF-8 中创建了一个 php 文件（使用记事本`save as` `encoding` `UTF-8`）：

```
<?php

$url = 'http://rp.postcontrol.ru/伊勢.txt';

$ch = curl_init( $url );
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true);

if ( $result =  curl_exec($ch) )
{
    echo $result;
}
else
echo "cURL error: ".curl_error($ch);

curl_close( $ch ); 
```

您可以在[http://rp.postcontrol.ru/eddz.php.txt获取 PHP 文件](http://rp.postcontrol.ru/eddz.php.txt)

它适用于我并返回（伊势.txt 也是 UTF-8 格式）：

```
おはようございます eddz さん. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T10:15:23.920

将路径参数附加为 url 编码字符串，它将起作用。前任：

```
$url = 'http://rp.postcontrol.ru/';
$filename = urlencode("伊勢.txt");

$url .= $filename; 
```

# javascript - 谷歌电子表格：插入行并复制隐藏的内容

> ID：16143705
> 
> 赞同：0
> 
> 时间：2013-04-22T09:30:23.787
> 
> 标签：javascript, google-apps-script

我有一个谷歌电子表格，旨在为衡量员工人口统计数据的企业计算平衡记分卡。该电子表格由几个数据输入单元格和许多“隐藏”列组成，其中包含计算输入数据并产生分数的特定公式。

我需要一个脚本，它将位于电子表格中的任何行（当前光标位置）：a）要从主菜单（插入行）调用的脚本 b）在当前光标位置下方插入用户定义的行数（弹出 UI要求插入行数的框） c) 从上面的行中复制数据，包括隐藏列中包含的所有数据/公式 d) 重新隐藏受保护的列，然后返回给用户。

隐藏的列包含我不希望用户看到的 IP，因此是隐藏/受保护的方面。

任何人都可以帮忙吗？

我的剧本到目前为止...

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [{name: "Insert Rows", functionName: "doGet"}];
  ss.addMenu("User Functions", menuEntries);
}

function doGet(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var app =UiApp.createApplication().setTitle('Insert Rows').setHeight(75).setWidth(225);
  // Create a grid with 1 text box and corresponding label. 
  // Test entered into the text box is passed in to numRows.
  // The setName extension will make the widget available by the given name to the server handlers later.
  var grid = app.createGrid(1, 2);
  grid.setWidget(0, 0, app.createLabel('Number of Rows to Insert:'));
  grid.setWidget(0, 1, app.createTextBox().setName('numRows').setWidth(50));
  // Create a Vertical Panel and add the Grid to the Panel.
  var panel = app.createVerticalPanel();
  panel.add(grid);
  // Create a button and Click Handler.
  // Pass in the Grid Object as a callback element and the handler as a click handler.
  // Identify the function insertRows as the server click handler.
  var button = app.createButton('Submit');
  var handler = app.createServerHandler('insertRows');
  handler.addCallbackElement(grid);
  button.addClickHandler(handler);
  // Add the button to the Panel, add Panel to the App, launch the App
  panel.add(button);
  app.add(panel);
  ss.show(app);
}

function insertRows(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cursPos = sheet.getActiveCell().getRow();
  var valueRows = e.parameter.numRows;
  sheet.insertRowsAfter(cursPos, valueRows);
  var app = UiApp.getActiveApplication();
  app.close();
  return app;
} 
```

我现在需要将当前活动单元格上方的行的内容（新创建的行的顶部 lh 单元格）复制到新创建的行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:35:44.237

以下是可用于满足您需求的应用程序脚本“成分”：

A) 在电子表格 UI 中创建一个新菜单。[http://goo.gl/qCPRC](http://goo.gl/qCPRC)

B1) 电子表格 getActiveCell [http://goo.gl/1wiBp](http://goo.gl/1wiBp)

B2) 从电子表格显示用户界面[http://goo.gl/nL4y4](http://goo.gl/nL4y4)

C) 将范围的内容复制到给定位置。[http://goo.gl/WRfcc](http://goo.gl/WRfcc)

D）无需“取消隐藏”数据仍然可以读取/复制。您确实意识到隐藏根本没有安全性，因为用户可以从数据菜单中“取消隐藏”。

祝你好运！

# android - GCM 返回缺少注册错误

> ID：16143707
> 
> 赞同：0
> 
> 时间：2013-04-22T09:30:28.977
> 
> 标签：android, push-notification, google-cloud-messaging

我正在使用 c# webservices 将注册 ID 传递给 GCM。我有两部安卓手机，我有有效的注册 ID。当我单独传递它们时，GCm 不会返回任何错误并且设备会收到通知。但是当我尝试将它们作为 JSON 一起传递时，我收到错误消息`"Error = missing registration".`

以下是将注册 ID 传递给 GCM 的 Web 服务的代码。

```
 public string Notify(string deviceId, string message)
    {

        WebRequest tRequest;
        tRequest = WebRequest.Create("https://android.googleapis.com/gcm/send");
        tRequest.Method = "post";
        tRequest.ContentType = " application/x-www-form-urlencoded;charset=UTF-8";
//        tRequest.Headers.Add(string.Format("Authorization: key={0}", GoogleAppID));
        tRequest.Headers.Add(HttpRequestHeader.Authorization, "key=AIzaSyCUJX_f_NZzYbigWMDK9U5vkzZ9mPiK8jA");
       tRequest.Headers.Add(string.Format("Sender: id={0}", SENDER_ID));
       int count = 2;

           SqlConnection conn = new SqlConnection(ConfigurationManager.AppSettings["Login"]);
           conn.Open();

           string send_notification = "select RegId from REG_ID ";//where RegId <> '"+deviceId+"'";
           SqlCommand cmd2 = new SqlCommand(send_notification, conn);
           DataSet ds2 = new DataSet();
           SqlDataAdapter adapter2 = new SqlDataAdapter(cmd2);
           adapter2.Fill(ds2);
           int count1 = ds2.Tables[0].Rows.Count;
           registration[] r = new registration[count1];
           for (int i = 0; i < count1; i++)
           {
               r[i] = new registration();
               r[i].registration_ids = ds2.Tables[0].Rows[i]["RegId"].ToString();
           } 
        JavaScriptSerializer js = new JavaScriptSerializer();
        string strJson = js.Serialize(r);
        string postData = /*"collapse_key=score_update&time_to_live=108&delay_while_idle=1&*/"data.message=" + message + "&data.time=" + System.DateTime.Now.ToString() + "&registration_id= "+ deviceId + "";
        Console.WriteLine(strJson);
        Byte[] byteArray = Encoding.UTF8.GetBytes(strJson);
        tRequest.ContentLength = byteArray.Length;

        Stream dataStream = tRequest.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        WebResponse tResponse = tRequest.GetResponse();

        dataStream = tResponse.GetResponseStream();

        StreamReader tReader = new StreamReader(dataStream);

        String sResponseFromServer = tReader.ReadToEnd();

        tReader.Close();
        dataStream.Close();
        tResponse.Close();
        return sResponseFromServer;
    } 
```

我是开发新手，可能会遗漏一些非常简单的东西。任何帮助表示赞赏..在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:57:48.613

您的 JSON 应如下所示：

```
{ "data": {
    "score": "5x1",
    "time": "15:10"
  },
  "registration_ids": ["4", "8", "15", "16", "23", "42"]
} 
```

*   您发布的代码混合了 JSON 格式和纯文本格式。
*   如果您想在一个请求中发送多条消息，您应该将您的内容类型更改为`application/json`.
*   从您的代码中不清楚您`strJson`包含什么，所以我不能说它是否有效。
*   您的`postData`变量似乎属于纯文本格式，但无论如何您都不使用它。

# java - Java GUI 布局

> ID：16143708
> 
> 赞同：2
> 
> 时间：2013-04-22T09:30:31.353
> 
> 标签：java, swing, layout, user-interface, layout-manager

有人可以告诉我我需要使用哪种 java 布局来实现以下布局：

![正确的地址簿布局](https://i.stack.imgur.com/VbSik.jpg)

我目前正在使用 FlowLayout 但是我无法让输入字段在输出窗口旁边排列：

![布局错误](https://i.stack.imgur.com/FPZjB.jpg)

抱歉，如果这是一个简单的问题，这是我第一次使用 java。这是我的框架代码：

```
 private void makeFrame()
     {
       setLayout(new FlowLayout(0));

    JPanel panel1 = new JPanel();
    JPanel panel2 = new JPanel();
    JPanel panel3 = new JPanel();
    JPanel panel4 = new JPanel();
    JPanel panel5 = new JPanel();
    JPanel panel6 = new JPanel();
    JPanel panel7 = new JPanel();

    panel1.setLayout(new FlowLayout(0));
    panel2.setLayout(new FlowLayout(0));
    panel3.setLayout(new FlowLayout(0));
    panel4.setLayout(new FlowLayout(0));
    panel5.setLayout(new FlowLayout(0));
    panel6.setLayout(new FlowLayout(0));
    panel7.setLayout(new FlowLayout(0));

    JLabel firstnameJLabel = new JLabel("First Name");
    JLabel lastnameJLabel = new JLabel("Last Name");
    JLabel streetJLabel = new JLabel("Street");
    JLabel townJLabel = new JLabel("Town");
    JLabel postcodeJLabel = new JLabel("Post Code");

    panel1.add(listAllBtn);
    panel1.add(listPersonalBtn);
    panel1.add(listBusinessBtn);
    panel1.add(addPersonalBtn);
    panel1.add(addBusinessBtn);
    panel1.add(deleteBtn);
    panel1.add(findBtn);
    panel1.add(quitBtn);

    panel2.add(firstnameJLabel);
    panel2.add(this.firstNameField);
    panel2.add(this.bookScrollPane);
    this.outputArea.setEditable(false);

    panel3.add(lastnameJLabel);
    panel3.add(this.lastNameField);

    panel4.add(streetJLabel);
    panel4.add(this.streetField);

    panel5.add(townJLabel);
    panel5.add(this.townField);

    panel6.add(postcodeJLabel);
    panel6.add(this.postcodeField);

    panel7.add(enterBtn);

    add(panel1);
    add(panel2);
    add(panel3);
    add(panel4);
    add(panel5);
    add(panel6);
    add(panel7);

    enterBtn.addActionListener(this);
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:39:59.237

**使用多个嵌套布局管理器**

`BorderLayout`该示例看起来像一个在该位置具有滚动窗格的顶层，在该`CENTER`位置具有一行按钮（使用`FlowLayout`），在该`NORTH`位置具有一个`GridLayout`用于文本字段的按钮`WEST`。后者可以通过使用 a 来改进`GroupLayout`，它允许单独调整行和列的大小，但使用起来有些复杂。

有一个[关于使用布局管理器的很棒的教程](http://www.cs.buu.ac.th/~seree/lecture/AWTLayoutMgr/shortcourse.html)（不幸的是，它似乎已经从 Oracle 的服务器上消失了，并且链接指向可能是临时副本）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T09:49:37.857

自从我使用 Swing 以来已经有一段时间了，但看起来架构是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/2xqZq.png)

1.  您在底部有一个面板，即 BorderLayout
2.  在其中，您总共添加了 4 个新面板，NORTH、WEST、CENTER 和 EAST
3.  在 BorderLayout.NORTH 中添加一个具有 FlowLayout.LEFT 的面板
4.  在 BorderLayout.WEST 中添加一个具有 GroupLayout.YAXIS 的面板。此面板包含名称等标签和 ENTER 按钮
5.  在 BorderLayout.CENTER 中添加与标签对应的文本字段
6.  在 BorderLayout.EAST 中添加 JSCrollpane。

这可能会给您一个想法，您可以使用这些不同的面板来实现您想要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:53:57.500

我只会将 MigLayout 用于高级页面布局，然后下拉到 . 它本质上是一个网格布局，但它非常易于使用。但是 Miglayout 不能包装项目，这显然是 Swing 中的设计问题。WrapLayout 是一个布局管理器，可为您提供该功能，但它可能存在问题。

[http://tips4java.wordpress.com/2008/11/06/wrap-layout/](http://tips4java.wordpress.com/2008/11/06/wrap-layout/)

看着你提供的屏幕截图，我模拟了你想要划分它的方式。您总共有 9 行 (0-8) 和 3 列 (0-2)。对于最顶部的控件之类的东西，您将“跨越”它们跨越所有三列。

对于文本，您只需将文本放在其单个框中的第 1 行、第 1 列用于名字，或第 2 行、第 1 列用于姓氏等。

你对输入框做同样的事情。

在下图中，蓝色是列，橙色是行。

![网格布局](https://i.stack.imgur.com/3NaoM.jpg)

所以总结一下；

*   使用[Miglayout](http://www.miglayout.com/)进行高级布局。这就像在 HTML 中使用表格一样。
*   使用其他布局管理器对 Miglayout 提供的网格框内的项目进行布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:53:57.637

最好的选择是使用**Gridbag 布局**，因为您的 UI 有点复杂，而 GridBag 布局提供了实现精确 UI 所需的所有支持。您必须使用*父面板，然后使用其中的子面板*。您将拥有的每个面板添加单独的 GridBag 布局。您可以添加**插图和必要的增长**来实现您想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T11:16:22.717

如上一条评论所述，我将在此项目中使用 MigLayout。因为您可以在每个字段或文本框之后使用拆分、跨度和换行以获得正确的布局。您还可以调试 Miglayout 并查看您的布局是对还是错。

在此处下载最新版本的 MigLayout：http: [//www.migcalendar.com/miglayout/versions/](http://www.migcalendar.com/miglayout/versions/)

如果使用日食，

*   将其保存在项目文件夹中名为 Lib 的文件夹中。
*   配置项目构建路径，但将 jar 文件添加到类路径。
*   然后您应该能够将布局设置为 MigLayout。

`panel.setLayout(new MigLayout());`

或调试布局 -`panel.setLayout(new MigLayout("debug"));`

# java - 了解 java.io 库

> ID：16143712
> 
> 赞同：0
> 
> 时间：2013-04-22T09:30:47.610
> 
> 标签：java, model, java-io

从昨天开始，我正在阅读[Java 在线文档](http://docs.oracle.com/javase/tutorial/essential/io/index.html)，我注意到它**更多地关注实践**而不是描述该库的机制。

由于IO包中有**很多**类，我如何理解何时使用以及**如何**使用它们？我对它的**模型**比它的内容更感兴趣。
欢迎提供建议和手册。

先感谢您...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:37:33.047

java IO的基本术语是流。输入流允许读取，输出流允许写入。JDK 提供了“简单”流的层次结构，例如`FileInputStream`，您可以从套接字、URL 连接等获取的流。

有些流提供了额外的功能并实现了包装器（装饰器）设计模式。您可以使用它们来包装任何其他流。例如`BufferedInputStream`，`ObjectOutputStream`等等。

可以在目标流上创建读取器和写入器的层次结构，并根据字符而不是字节工作。

现在您已准备好返回在线文档。继续阅读，祝你好运。当您有具体问题时请回到这里，我们很乐意为您提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:37:13.217

看看以下可能会有所帮助：

1.  [Java I/O 书籍](https://rads.stackoverflow.com/amzn/click/com/0596527500)
2.  [基本 I/O（Java 文档）](http://docs.oracle.com/javase/tutorial/essential/io/)
3.  对于 nio 包，您可以查看此入门级代码：[James Greenfield 的教程](http://rox-xmlrpc.sourceforge.net/niotut/)

# magento - 为什么 magento 剥离 REST API 调用的端口号

> ID：16143713
> 
> 赞同：1
> 
> 时间：2013-04-22T09:30:49.167
> 
> 标签：magento

我刚开始使用magento REST API，我很害怕学习并观察到magento响应：“404 not found”如果你的端口号不是80。出于某种原因，我不能使用端口80。

任何解决方案请...

提前感谢

**编辑：**添加我试图访问的 URL：`http://localhost:8888/magento/oauth/initiate?oauth_callback=" . urlencode(http://localhost:8888/magentorest/restcallback.php)`

# wpf - 根据主题在 WPF/XAML 中显示不同的图像

> ID：16143714
> 
> 赞同：1
> 
> 时间：2013-04-22T09:30:52.080
> 
> 标签：wpf, xaml

我的问题似乎很简单：我的主页上有一个视图框，根据选择的主题（主题 1 或主题 2），我想显示适当的图像（WhiteImage 或 BlackImage，两者都在资源下的 myImages.xaml 中定义为 SVG 画布）。

这是我认为我可以做的：

```
<Viewbox x:Name="myCustomImage"
VerticalAlignment="Top"
Height="24"
Margin="0,0,10,0"
Child="{StaticResource myImage}" /> 
```

然后我尝试在 theme1.xaml（和 theme2.xaml 类似）中定义画布 myImage，如下所示：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:myApp">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="../Resources/myImages.xaml" />
    </ResourceDictionary.MergedDictionaries>

    ...
    <Color x:Key="myForegroundcolor">#FF63398F</Color>  
    ...
    <Canvas x:Key="myImage">WhiteImage</Canvas>

</ResourceDictionary> 
```

这会引发错误消息 - 无法将“String”类型的值添加到“UI ElementCollection”类型的集合或字典中。

这首先是正确的方法吗？如果是，我该如何解决这个错误？

编辑：我在下面听从了 Dean 的建议（谢谢）。这就是我所做的：

将 resourcetheme1.xaml 更改如下：

```
<Canvas x:Key="myImage"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        Width="200"
        Height="100">
    <ContentControl Content="{StaticResource WhiteImage}" />

    <Canvas>
        <Canvas>
            <Path Fill="#FFFFFFFF"
                    Data=... />         
            <Path Fill="#FFFFFFFF"
                    Data=... />
        </Canvas>
    </Canvas>
</Canvas> 
```

更改 mainpage.xaml 如下：

```
<Viewbox x:Name="myViewbox"
...
Height="32"
Child="{StaticResource WhiteImage}" /> 
```

向 .cs 添加了依赖属性：...

```
public Canvas myImage
{
    get
    {
        return (Canvas)GetValue(myImageProperty);
    }
    set
    {
        SetValue(myImageProperty, value);
    }
} 
```

现在我在 mainpage.xaml Child="{StaticResource WhiteImage}" /> 的这一行上得到一个不同的错误 - 在 System.Windows.StaticResourceExtension 上提供值引发异常 - 找不到名为 WhiteImage 的资源。顺便说一句，当我将 xaml 更改为 myImage 时，我得到了同样的错误。谢谢你的帮助。在相关说明中，我很难相信它是如此复杂——我要做的就是：如果主题=黑色 viewbox.child=whiteImage 否则 viewbox.child=blackimage。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:07:26.023

您正在使用字符串作为 Canvas 的子项。你需要像这样声明孩子

```
<Canvas x:Key="myImage">
   <ContentControl Content="{StaticResource WhiteImage}" />
</Canvas> 
```

# c++ - 如何使用键盘更改 glLookat 视图元素的整数值？

> ID：16143715
> 
> 赞同：-1
> 
> 时间：2013-04-22T09:30:52.253
> 
> 标签：c++, visual-studio-2010, opengl

我正在制作一个房间，我想更改lookat 的值，因为我想在我的房间内向上、向下、向右、向左、向前和向后移动我的相机。

我的代码在下面给出了注释：

```
#include <iostream>
using namespace std;
#include "glut.h" 
#include "GL/gl.h"  
//--------------------------------------------------------------------- 
static int all =0;
static int allD =0;
static int a=0;
static int  d=0;
static int o=0;
static float w=0;
static float s=0;
//--------------------------------------------------------------------- 
void init(void)
{
    glClearColor(0.0,0.0,0.0,0.0);
    glShadeModel(GL_FLAT);
}
//--------------------------------------------------------------------- 
void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT);
    glEnable(GL_DEPTH_TEST);
    //glEnable(GL_DEPTH);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    //glDisable(GL_DEPTH_TEST);
    glPushMatrix();
    glRotatef(a,0,1,0);
    glRotatef(d,0,1,0);
    //back wall glPushMatrix();
    glTranslatef(0,0,-2);
    glColor3f(0.5,1,0);
    glScalef (50.0, 20.0, 2);
    glutSolidCube (0.5);
    glPopMatrix();
    //left wall glPushMatrix();
    glTranslatef(-12,0,4.5);
    glColor3f(1,1,0);
    glScalef (2, 20, 25);
    glutSolidCube (0.5);
    glPopMatrix();
    //floor glPushMatrix();
    glTranslatef(0,-5,4.5);
    glColor3f(0.5,1,1);
    glScalef (50, 0.2, 25);
    glutSolidCube (0.5);
    glPopMatrix();
    //roof glPushMatrix();
    glTranslatef(0,4.5,4.5);
    glColor3f(0,0,1);
    glScalef (50, 2, 25);
    glutSolidCube (0.5);
    glPopMatrix();
    //right wall glPushMatrix();
    glTranslatef(12,0,4.5);
    glColor3f(0.8,0.2,1);
    glScalef (2, 20, 25);
    glutSolidCube (0.5);
    glPopMatrix();
    ////front wall 1  //glPushMatrix();
    // glTranslatef(-2,0,9);
    // glColor3f(0.5,0,0);
    //  glScalef (12.0, 20.0, 2);
    // glutSolidCube (0.5);
    //glPopMatrix();
    ////front wall 2 //glPushMatrix();
    // glTranslatef(2.5,2.5,9);
    //  glColor3f(0.5,0,0);
    // glScalef (10.0, 10.0, 2);
    // glutSolidCube  (0.5);
    //glPopMatrix();
    ////Door //glPushMatrix();
    //  glTranslatef(0.8,-2,9);
    // glRotatef(o,0,1,0);
    //  glColor3f(0.5,0.5,0.5);
    // glScalef (1.0, 8.0, 0.2);
    //  glutSolidCube (0.5);
    //glPushMatrix();
    // glTranslatef(1.7,0,0);
    //  glColor3f(0.5,0.5,0.5);
    // glScalef (6.0, 1.5, 0.2);
    //  glutSolidCube (0.5);
    //glPopMatrix();
    //glPopMatrix();
    //table  glPopMatrix();
    glutPostRedisplay();
    glutSwapBuffers();
}
//--------------------------------------------------------------------- 
void reshape (int w, int h)
{
    glViewport (0, 0, (GLsizei) w,  (GLsizei) h);
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ();
    gluPerspective(65, (GLfloat) w/(GLfloat) h, 1.0, 100.0);
    //glFrustum(-2,2,-2,2,2.5,20);
    //glOrtho(-2,2,-2,2,2.5,20);
    gluLookAt (0.0, 0.0, 25, w, s, 0.0, 0.0, 1.0, 0.0);
    //i made it 'w'  and 's' but its not working. glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}
//--------------------------------------------------------------------- 
void keyboard (unsigned char key, int x, int y)
{
    switch (key)
    {
        case 'a': a = (a - 1) % 360;
        glutPostRedisplay();
        break;
        case 'd': d  = (d + 1) % 360;
        glutPostRedisplay();
        break;
        case 'o': o = (o + 1) % 90;
        glutPostRedisplay();
        break;
        case 'w': w = (w + 0.1) ;
        glutPostRedisplay();
        break;
        case 's': s = (s - 0.1);
        glutPostRedisplay();
        break;
        default: break;
    }
}
//--------------------------------------------------------------------- 
void SpecialKeys(int key, int x, int y)
{
    switch (key)
    {
        case  GLUT_KEY_RIGHT : all = (all + 10) % 360;
        glutPostRedisplay();
        break;
        case GLUT_KEY_UP : allD = (allD - 10) % 360;
        glutPostRedisplay();
        break;
        case GLUT_KEY_LEFT : all = (all - 10) % 360;
        glutPostRedisplay();
        break;
        case GLUT_KEY_DOWN : allD = (allD + 10)  % 360;
        glutPostRedisplay();
        break;
        default: break;
    }
}
//--------------------------------------------------------------------- 
int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB);
    glutInitWindowSize  (700, 500);
    glutInitWindowPosition (0,0);
    glutCreateWindow  (argv[0]);
    init ();
    glutDisplayFunc(display);
    glutSpecialFunc(SpecialKeys);
    glutReshapeFunc(reshape);
    glutKeyboardFunc(keyboard);
    glutMainLoop();
    return 0;
}
// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:14:36.637

`gluLookAt()`每当您更新传递给它的值时，您都需要重新执行该函数。

执行这部分代码的更简洁的方法是：

```
static int W = 0;
static int H = 0;
static int S = 0;
//---------------------------------------------------------------------
void updateCamera() {
    gluLookAt (0.0, 0.0, 25, W, S, 0.0, 0.0, 1.0, 0.0);
}
//---------------------------------------------------------------------
void reshape (int w, int h)
{
    W = w;
    H = h;
    glViewport (0, 0, (GLsizei) w,  (GLsizei) h);
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ();
    gluPerspective(65, (GLfloat) w/(GLfloat) h, 1.0, 100.0);
    //glFrustum(-2,2,-2,2,2.5,20);
    //glOrtho(-2,2,-2,2,2.5,20);
    updateCamera();
    glLoadIdentity();
}
//--------------------------------------------------------------------- 
void keyboard (unsigned char key, int x, int y)
{
    switch (key)
    {
        case 'a':
          a = (a - 1) % 360;
          break;
        case 'd':
          d  = (d + 1) % 360;
          break;
        case 'o':
          o = (o + 1) % 90;
          break;
        case 'w':
          W = (W + 0.1) ;
          updateCamera();
          break;
        case 's':
          S = (S - 0.1);
          updateCamera();
          break;
        default: break;
    }

    glutPostRedisplay();
} 
```

一般来说，将您经常和/或来自不同地方的调用抽象出来是个好主意，这样您就不会复制粘贴并使未来的更新或错误修复变得更加困难。

# c# - 操作任务栏右键单击应用程序菜单

> ID：16143716
> 
> 赞同：1
> 
> 时间：2013-04-22T09:31:03.950
> 
> 标签：c#, wpf, taskbar, jump-list

我需要从应用程序的任务栏上下文菜单中删除应用程序启动和“将此应用程序固定到任务栏”。原因是应用程序不能独立启动，它必须从另一个应用程序中获取信息。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:42:37.473

根据[这篇文章](https://stackoverflow.com/questions/6378098/how-to-prevent-an-app-from-being-pinned-in-windows-7)，您可以使用[Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack/Release/ProjectReleases.aspx?ReleaseId=4906)，但所需的类是内部的。OP 说他们复制了 50k 行代码以使其正常工作。我不确定自那篇帖子以来它是否有所改善，但这是我刚刚想到的一种解决方法。由于您只能将 EXE 文件（以及根据评论的快捷方式）固定到任务栏，因此您可以将应用程序重命名为非 exe 扩展名（大多数非 exe 扩展名无法固定）。

当您想从其他应用程序调用它时，将其重命名为`.exe`，启动它，然后再次重命名它。例如：

```
Process p = new Process();
//fake extension so it can't be drag/dropped to taskbar
string fakeExtensionName = @"C:\MyFile\myProgram.test";
//what it's actually called
string exeExtensionName = @"C:\MyFile\myProgram.exe";
//rename the fake one to the real one
File.Move(fakeExtensionName, exeExtensionName);
p.StartInfo.FileName = exeExtensionName;
//launch the real one
p.Start();
//rename it back to the fake extension
File.Move(exeExtensionName, fakeExtensionName); 
```

如果他们真的想要，任何人都可以将其重命名为 exe，因此您的程序应该假设用户可以直接启动它并处理该场景，但是任何文件都可以通过将其重命名为 exe 来固定到任务栏，因此周围没有保护那。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:09:01.993

好的，我在这里找到了一个丑陋但简单的解决方案[https://stackoverflow.com/a/3872503/1323570](https://stackoverflow.com/a/3872503/1323570)

显然，注册表 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\FileAssociation\AddRemoveNames 包含一些在可执行文件中可能不存在的单词，如果应该可以固定的话。

您还可以在此处阅读更多信息：[http ://www.west-wind.com/weblog/posts/2009/Oct/08/Application-that-wont-Pin-to-Taskbar-in-Windows-7](http://www.west-wind.com/weblog/posts/2009/Oct/08/Application-that-wont-Pin-to-Taskbar-in-Windows-7)

编辑：

找到了正确的方法：

添加密钥：

HKEY_CLASSES_ROOT\Applications\Example.exe\NoStartPage

参考： http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh127439 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh127439(v=vs.85).aspx)

# php - FPDI FPDF - 单元格格式

> ID：16143718
> 
> 赞同：0
> 
> 时间：2013-04-22T09:31:05.603
> 
> 标签：php, fpdf

我想将下一个单元格放在上部垫片下方。下一个单元格应该在上部间隔下方，而不是添加到右侧..但我找不到任何解决方案......如果没有解决方案，也许表格是一个选项......但我想用细胞试试这个。

我使用 FPDI，因为我想将一些表单数据添加到 PDF 文档中。

![我多么想要](https://i.stack.imgur.com/u04Xp.png)

```
$pdf->addPage();#$pdf->useTemplate($tplidx);     
$pdf->SetFont('Arial', '', 12);
$pdf->Cell(20,265,"Spacer left",1,0,'L');
$pdf->Cell(160,18,'Upper spacer ',1,0,'C');
$pdf->Cell(60,18,'Data1',1,0,'C');
$pdf->Cell(60,18,'Data2',1,0,'C');
$pdf->Cell(60,18,'Data3',1,0,'C'); 
```

但正如我所说，第三个单元格被添加到上间隔的右侧。

Spacer left 和 Upper spacer 显示正常...

我希望任何人都可以帮助我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:52:28.607

解决了

```
$pdf->Ln(XX); 
```

XX=以毫米为单位的价值……我可以把所有东西都拉到我想要的地方……但是时间很紧张……

感谢大家的阅读！

```
$pdf->SetFont('Arial', '', 10);
$pdf->Ln(18);
$pdf->Cell(20,0,'',0,0,'L');
$pdf->Cell(18,10,'TEXT',0,0,'L');
$pdf->Cell(18,10,'TEXT T',0,0,'L');
$pdf->Cell(36,10,'TEXT T',0,0,'L');
$pdf->Cell(36,10,'TEXT T',0,0,'L');
$pdf->Cell(9,10,'',0,0,'L');
$pdf->Cell(36,10,'TEXT',0,0,'L');
$pdf->Cell(9,10,'22',0,0,'L');
$pdf->Ln(6);
$pdf->Cell(19,0,'',0,0,'L');
$pdf->Cell(29,10,'x',1,0,'L');
$pdf->Cell(80,10,'x',1,0,'L');
$pdf->Cell(60,10,'asfasf',1,0,'L');
$pdf->Ln(9); 
```

# c# - 为 ASP.NET Web 应用程序动态生成网页

> ID：16143721
> 
> 赞同：0
> 
> 时间：2013-04-22T09:31:14.730
> 
> 标签：c#, asp.net, video

目前我正在做一个项目，用户从网站上传视频。我希望为用户上传的视频动态创建一个网页。这是 Youtube 所做的事情。当我们在 Youtube 中上传视频时，它会自动创建一个 URL 来托管上传的视频。

我们如何在 ASP.NET 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:36:55.627

Youtube 不创建任何页面，它已经有该页面（每个视频都相同），并且在加载时填充了指定视频的属性。您应该为上传的视频分配一个新的 id 并在您的页面中引用它：myvideopage.com?videoId=XXX 是 XXX 生成的 id。

# web-services - JBossWS 无法识别 WS-A 标头

> ID：16143723
> 
> 赞同：0
> 
> 时间：2013-04-22T09:31:25.230
> 
> 标签：web-services, jakarta-ee, jax-ws, jboss7.x, ws-addressing

我有一个用 JAX-WS 实现并部署在 JBossAS 7 上的 Web 服务存根。这是一个源代码：

```
package org.mycompany.adapters.ws;

import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.xml.ws.soap.Addressing;

@WebService
@Addressing(enabled = true, required = true)
public class AdapterSessionManager {

    @WebMethod
    public String initAdapterSession() {
        return "hello";
    }
} 
```

这是 JBoss 为该 Web 服务生成的 WSDL：

```
<wsdl:definitions name="AdapterSessionManagerService" targetNamespace="http://ws.adapters.mycompany.org/" xmlns:ns1="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://ws.adapters.mycompany.org/" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <wsdl:types>
      <xs:schema elementFormDefault="unqualified" targetNamespace="http://ws.adapters.mycompany.org/" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
         <xs:element name="initAdapterSession" type="tns:initAdapterSession"/>
         <xs:element name="initAdapterSessionResponse" type="tns:initAdapterSessionResponse"/>
         <xs:complexType name="initAdapterSession">
            <xs:sequence/>
         </xs:complexType>
         <xs:complexType name="initAdapterSessionResponse">
            <xs:sequence>
               <xs:element minOccurs="0" name="return" type="xs:string"/>
            </xs:sequence>
         </xs:complexType>
      </xs:schema>
   </wsdl:types>
   <wsdl:message name="initAdapterSessionResponse">
      <wsdl:part element="tns:initAdapterSessionResponse" name="parameters"/>
   </wsdl:message>
   <wsdl:message name="initAdapterSession">
      <wsdl:part element="tns:initAdapterSession" name="parameters"/>
   </wsdl:message>
   <wsdl:portType name="AdapterSessionManager">
      <wsdl:operation name="initAdapterSession">
         <wsdl:input message="tns:initAdapterSession" name="initAdapterSession" wsam:Action="http://ws.adapters.mycompany.org/AdapterSessionManager/initAdapterSessionRequest" wsaw:Action="http://ws.adapters.mycompany.org/AdapterSessionManager/initAdapterSessionRequest"/>
         <wsdl:output message="tns:initAdapterSessionResponse" name="initAdapterSessionResponse" wsam:Action="http://ws.adapters.mycompany.org/AdapterSessionManager/initAdapterSessionResponse" wsaw:Action="http://ws.adapters.mycompany.org/AdapterSessionManager/initAdapterSessionResponse"/>
      </wsdl:operation>
   </wsdl:portType>
   <wsdl:binding name="AdapterSessionManagerServiceSoapBinding" type="tns:AdapterSessionManager">
      <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
      <wsaw:UsingAddressing wsdl:required="true"/>
      <wsp:PolicyReference URI="#AdapterSessionManagerServiceSoapBinding_WSAM_Addressing_Policy"/>
      <wsdl:operation name="initAdapterSession">
         <soap:operation soapAction="" style="document"/>
         <wsdl:input name="initAdapterSession">
            <soap:body use="literal"/>
         </wsdl:input>
         <wsdl:output name="initAdapterSessionResponse">
            <soap:body use="literal"/>
         </wsdl:output>
      </wsdl:operation>
   </wsdl:binding>
   <wsdl:service name="AdapterSessionManagerService">
      <wsdl:port binding="tns:AdapterSessionManagerServiceSoapBinding" name="AdapterSessionManagerPort">
         <soap:address location="http://localhost:8081/adapters/AdapterSessionManager"/>
      </wsdl:port>
   </wsdl:service>
   <wsp:Policy wsu:Id="AdapterSessionManagerServiceSoapBinding_WSAM_Addressing_Policy" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <wsam:Addressing>
         <wsp:Policy/>
      </wsam:Addressing>
   </wsp:Policy>
</wsdl:definitions> 
```

当我尝试`initAdapterSession`使用以下 SOAP 请求调用时：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.adapters.mycompany.org/">
   <soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
      <wsa:Action>http://ws.adapters.mycompany.org/AdapterSessionManager/initAdapterSessionRequest</wsa:Action>
   </soapenv:Header>
   <soapenv:Body>
      <ws:initAdapterSession/>
   </soapenv:Body>
</soapenv:Envelope> 
```

`"A required header representing a Message Addressing Property is not present"`出现 SOAP 错误：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Header>
      <Action xmlns="http://www.w3.org/2005/08/addressing">http://ws.adapters.mycompany.org/AdapterSessionManager/initAdapterSession/Fault/SoapFault</Action>
      <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:d5b5c6aa-fd66-49bd-b928-488fa8e07f7b</MessageID>
      <RelatesTo xmlns="http://www.w3.org/2005/08/addressing">http://www.w3.org/2005/08/addressing/unspecified</RelatesTo>
   </soap:Header>
   <soap:Body>
      <soap:Fault>
         <faultcode xmlns:ns1="http://www.w3.org/2005/08/addressing">ns1:MessageAddressingHeaderRequired</faultcode>
         <faultstring>A required header representing a Message Addressing Property is not present</faultstring>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

SOAP 请求由soapUI 发送。soapUI 首选项（`WS-A settings`选项卡）中的所有 WS-A 选项都被禁用。`Enable WS-A addressing`请求设置中的复选框也已关闭。实际上，即使启用了所有这些选项，也会发生相同的错误。

为什么 JBoss 在请求中看不到 WS-A 标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:17:41.913

`"A required header representing a Message Addressing Property is not present"`当 SOAP 消息没有所有必需的 WS-Addressing 标头信息时，就会发生SOAP 错误。这不是 JBoss 特定的例外，我在 WebSphere 上也遇到过这种情况。

您的请求仅表明它正在发送`Action`标头。查看规范（[http://www.w3.org/Submission/ws-addressing/#_Toc77464323](http://www.w3.org/Submission/ws-addressing/#_Toc77464323)），您似乎需要同时发送`Action`和`To`标头。另一种选择是根本不发送任何 WS-Addressing 标头，但我猜根据您的 WSDL，服务器可能不会接受没有 WS-Addressing 的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:25:30.853

刚刚发现缺少标题。`wsa:MessageID`如果通过 SOAP 请求传递，则不会出现错误。在我看来，这是一种奇怪的行为，因为它`wsa:MessageID`在 WS-A 1.0 规范中被描述为可选标头。

# c# - 从图表中删除网格线

> ID：16143726
> 
> 赞同：0
> 
> 时间：2013-04-22T09:31:33.960
> 
> 标签：c#, graph

我正在页面上打印图表。我可以绘制和修改图形，但它有一些无法更改或删除的网格线。这是代码和屏幕截图：

```
 Chart chart2 = new Chart();
        ChartArea area2 = new ChartArea();

        chart2.ChartAreas.Add(area2);
        Series s2 = new Series();
        s2.Name = "S2";
        s2.ChartType = SeriesChartType.Line;
        s2.XValueType = ChartValueType.Double;
        s2.YValueType = ChartValueType.Double;
        chart2.Series.Add(s2);
        chart2.Series["S2"].Points.DataBindXY(x2, y2);

        Rectangle myRec1 = new System.Drawing.Rectangle(30,25,100,100);
        // draw!
        chart2.Printing.PrintPaint(e.Graphics, myRec1); 
```

图片 ：![截屏](https://i.stack.imgur.com/Z8C78.jpg)

我尝试了几乎所有系列和[SO](https://stackoverflow.com/questions/6826998/removing-grid-lines-in-c-sharp-chart-making-thicker-graph-lines)的属性，但我认为这不是原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:44:57.620

将以下语句中的适当语句添加到您的代码中；

```
area2.AxisX.MajorGrid.Enabled  = False
area2.AxisX2.MajorGrid.Enabled = False
area2.AxisY.MajorGrid.Enabled  = False
area2.AxisY2.MajorGrid.Enabled = False
area2.AxisX.MinorGrid.Enabled  = False
area2.AxisX2.MinorGrid.Enabled = False
area2.AxisY.MinorGrid.Enabled  = False
area2.AxisY2.MinorGrid.Enabled = False 
```

# css - 背景上方的菜单图片

> ID：16143730
> 
> 赞同：0
> 
> 时间：2013-04-22T09:31:54.637
> 
> 标签：css, menu

我试图在我的菜单背景上方放置一个图像。

我已经尝试过`list-style-image`背景图片（在标签上）`li`。`a`我该怎么做呢？带有菜单的[图像：来自菜单的图像](http://i.stack.imgur.com/XS7XB.gif)

橙色背景：这是菜单的背景（a 标签）

灰色框：这是我想要的菜单背景上方的图像。（“A”是菜单背景所在的位置。

```
 #nav ul li{
    font-weight: bold;
    float: left;
    margin-top: -5px;
    position: relative;
    padding: 6px 5px 0 15px;
    z-index: 99;
    height: 50px;
    background-position:left center;
    background-image: url(../images/bussel/menu-blad1.png) !important;
    background-repeat: no-repeat;

}
#nav ul li a{
    background-color: #feb24e;
    display: block;
    width: 153px;
    height: 35px;
    color: #fff;
    text-align: center;
    text-decoration: none;
    margin: 10px 0px 0px 0px;
    position: relative;
    z-index: 98;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:58:11.023

我已经这样做了（div方式）：

链接：

```
<li><span class="blad"></span><a href="#">Groepen</a></li> 
```

的CSS：

```
 #nav ul li{
    font-weight: bold;
    float: left;
    margin-top: -5px;
    margin-right: 5px;
    position: relative;
    padding: 6px 5px 0 15px;
    z-index: 99;
    height: 50px;
    }

    #nav ul li a{
    background-color: #feb24e;
    display: block;
    width: 153px;
    height: 35px;
    color: #fff;
    text-decoration: none;
    margin: 10px 0px 0px 0px;
    }

    #nav ul li span.blad{
    width: 35px;
    height: 43px;
    background-position:left center;
    background-image: url(../images/bussel/menu-blad.png);
    background-repeat: no-repeat;   
    float: left;
    margin: 4px 5px 0px -15px;
    } 
```

所以它有效，谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:50:30.563

你可以试试这个

```
a{
position:absolute;
background:red;
width:10px;
height:10px;
}
li{
position:relative;
bacground:url(../);
padding:20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:12:02.777

你能用这样的东西吗？（大致）：[jsFiddle 演示](http://jsfiddle.net/mBeau/2/)

只需创建另一个`div`并`float:left`给出正确`margin`的 . 然后你可以把你的图像放在这个浮动的 div 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:12:33.907

利用`z-index`

例子：

```
<div style="position: relative;">
  <div style="position: absolute; left: 10px; top: 30px; z-index: 1;"> ONE </div>
  <div style="position: absolute; left: 30px; top: 80px; z-index: 3;"> TWO </div>
  <div style="position: absolute; left: 50px; top: 120px; z-index: 2;"> THREE </div>
</div> 
```

第二个 div 在前面，第一个 div 在背景上。

# java - 用图像的每个像素的 RGB 值填充 ArrayList

> ID：16143732
> 
> 赞同：1
> 
> 时间：2013-04-22T09:32:01.380
> 
> 标签：java, image, excel, arraylist

您好，我想创建一个程序，它读取图像并在输出带有这样图像的 excel 后 ---> [http://www.boydevlin.co.uk/images/screenshots/eascreen04.png](http://www.boydevlin.co.uk/images/screenshots/eascreen04.png)

为了实现这一点，我认为我必须将图像中每个像素的 rgb 值读取到 ArrayList 我想按以下顺序保存它

示例 5x5px 图像

```
01,02,03,04,05
06,07,08,09,10  
11,12,13,14,15
....... 
```

我已经有了这个，但它不能正常工作有人可以帮我解决这个问题吗

```
 public class Engine {

    private int x = 0;
    private int y = 0;
    private int count = 50;
    private boolean isFinished = false; 
    ArrayList<Color> arr = new ArrayList<Color>();

    public void process(){
        BufferedImage img = null;
        try {
            img = ImageIO.read(new File("res/images.jpg"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.println("img file not found");
        }

        while(isFinished = false){
        int rgb = img.getRGB(x, y);
        Color c = new Color(rgb);
        arr.add(c);
        System.out.println("y:"+ y);
        x++;}
        if(x == 49){
            y++;
            x = 0;
            }else if(x == 49 && y == 49){
                isFinished = true;
            }
        }

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:56:56.160

**第一**：你有一个`while`循环错误

将其转换为：

`while (isFinished=false)`

至

```
while (isFinished==false) 
```

**第二**：使用`for`循环而不是`while`循环

```
for (int x = 0; x < img.getWidth(); x++) {
            for (int y = 0; y < img.getHeight(); y++) {
                int rgb = img.getRGB(x, y);
                Color c = new Color(rgb);
                arr.add(c);
            }

        } 
```

如果你想通过使用`while`循环，试试这个：

```
while (isFinished == false) {
            int rgb = img.getRGB(x, y);
            Color c = new Color(rgb);
            arr.add(c);
            x++;
            if (x == img.getWidth()) {
                y++;
                x = 0;
            } else if (x == img.getWidth() - 1 && y == img.getHeight() - 1) {
                isFinished = true;
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:00:08.517

你需要知道，如果图像变大，ArrayList 会很大，最好使用普通数组（你知道.. []），并使其具有两个维度。如果您可以就地创建 excel 并且不将所有数据保存在数组中，那就更好了，只需在将数据写入控制台的地方设置适当的值即可。我还没有测试过代码，但应该没问题。如果您收到任何异常，请发布其内容，以便我们提供帮助。

尝试这样的事情：

```
public class Engine {

    private int x = 0;
    private int y = 0;
    ArrayList<Color> arr = new ArrayList<Color>();

    public void process() {
        BufferedImage img = null;
        try {
            img = ImageIO.read(new File("res/images.jpg"));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            System.out.println("img file not found");
        }

        for(int x=0;x<img.getWidth();x++){
            for(int y=0;y<img.getHeight();y++){
                int rgb = img.getRGB(x, y);
                Color c = new Color(rgb);
                arr.add(c);
                System.out.println("x: "+ x + " y:" + y +" color: " + c);
            }
        }
    }
}; 
```

# c# - 自定义导出reportviewer到excel文件

> ID：16143737
> 
> 赞同：0
> 
> 时间：2013-04-22T09:32:11.387
> 
> 标签：c#, sql, reportviewer

我想在单击按钮后将报表查看器导出到 excel 文件并隐藏可用于报表查看器的现有导出工具条按钮。

下面是我的 ExportFile 函数代码：

```
 private void ExportFile()
    {
  SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.Filter = "*PDF files (*.pdf)|*.pdf|Excel files (*.xls)|*.xls|Doc files      (*.doc)|*.doc";
        // Variables
        Warning[] warnings;
        string[] streamids;
        string mimeType;
        string encoding;
        string extension;
        string path = " ";
        DialogResult dr = saveFileDialog1.ShowDialog();
        path = saveFileDialog1.FileName;

        byte[] bytes = reportViewerForm.reportViewer1.LocalReport.Render("Excel", null, out   mimeType, out encoding, out extension, out streamids, out warnings);

        FileStream fs = new FileStream(path + ".xls", FileMode.Create);
        fs.Write(bytes, 0, bytes.Length);
        fs.Close();} 
```

button_click 事件的代码：

```
private void btnExport_Click(object sender, EventArgs e)
    {
        this.GetData();
        this.ExportFile();
    } 
```

但是，尝试导出时出现异常错误。这是我内心的例外：

```
 InnerException: Microsoft.ReportingServices.ReportProcessing.ReportProcessingException
   Message=One or more parameters required to run the report have not been specified.
   Source=Microsoft.ReportViewer.Common
   ExceptionLevelHelpLink=http://go.microsoft.com/fwlink/?LinkId=20476&EvtSrc=Microsoft.ReportingServices.Diagnostics.Utilities.ErrorStrings&EvtID=rsParametersNotSpecified&ProdName=Microsoft%20SQL%20Server%20Reporting%20Services&ProdVer=1.0
   SkipTopLevelMessage=false
   StackTrace:
        at Microsoft.ReportingServices.ReportProcessing.ReportProcessing.RenderReport(IRenderingExtension newRenderer, DateTime executionTimeStamp, ProcessingContext pc, RenderingContext rc, IChunkFactory cacheDataChunkFactory, IChunkFactory yukonCompiledDefinition, Boolean& dataCached)
        at Microsoft.Reporting.LocalService.CreateSnapshotAndRender(CatalogItemContextBase itemContext, ReportProcessing repProc, IRenderingExtension renderer, ProcessingContext pc, RenderingContext rc, SubreportCallbackHandler subreportHandler, ParameterInfoCollection parameters, DatasourceCredentialsCollection credentials)
        at Microsoft.Reporting.LocalService.Render(CatalogItemContextBase itemContext, Boolean allowInternalRenderers, ParameterInfoCollection reportParameters, IEnumerable dataSources, DatasourceCredentialsCollection credentials, CreateAndRegisterStream createStreamCallback, ReportRuntimeSetup runtimeSetup)
        at Microsoft.Reporting.WinForms.LocalReport.InternalRender(String format, Boolean allowInternalRenderers, String deviceInfo, PageCountMode pageCountMode, CreateAndRegisterStream createStreamCallback, Warning[]& warnings)
   InnerException: 
```

我错过了什么参数？任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:14:01.217

您尝试导出的报告是否需要报告参数？（参数快速信息：[如何在报表查看器中添加参数？](https://stackoverflow.com/questions/5103784/how-to-add-parameters-in-report-viewer)）

我问是因为这通常是我忘记传递报告参数时得到的异常。

# javascript - zeroclipboard 不工作。ZeroClipboard.setMoviePath 不是函数

> ID：16143740
> 
> 赞同：2
> 
> 时间：2013-04-22T09:32:28.180
> 
> 标签：javascript, clipboard, zeroclipboard

朋友们，美好的一天。我不能让 zeroclipboard 与我的页面一起工作。在 HTML 页面中，我有：

```
<script type="text/javascript" src="ZeroClipboard.js"></script> //Script was loaded successfully.

 ...

 <button id="copy_clipboard">Test me</button>
 <script>
  ZeroClipboard.setMoviePath('http://olymp/ZeroClipboard.swf'); //Path correct. It's local php server 
  var clip = new ZeroClipboard.Client();
  clip.setText('test');
  clip.glue('copy_clipboard');
 </script> 
```

这给我一个错误： ZeroClipboard.setMoviePath is not a function

删除后

```
ZeroClipboard.setMoviePath('http://olymp/ZeroClipboard.swf'); 
```

我收到一个错误：

ZeroClipboard.Client 不是构造函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T13:27:37.857

有时您需要在准备好文档时启动 zeroclipboard 客户端

```
<script src="js/jquery-1.7.1.min.js"></script>
<script src="js/ZeroClipboard.min.js"></script>
<script>
    $(document).ready(function() {
        var client = new ZeroClipboard($('#buttonId'), {
            moviePath : 'util/ZeroClipboard.swf'
        });
    });
</script>
<input type="button" id="buttonId" data-clipboard-target="inputId" />
<input type="text" id="inputId" /> 
```

将在 cplipboard 中复制输入文本的内容，对我来说它也适用于 localhost

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T00:33:11.917

希望这会有所帮助：

尝试使用：

```
ZeroClipboard.setDefaults({moviePath: 'http://olymp/ZeroClipboard.swf'}); 
```

并且：

```
var clip = new ZeroClipboard(); 
```

对于您的另一个问题，请尝试使用：

```
clip.on('dataRequested', function(client, args){
     clip.setText("YOUR TEXT HERE");
}); 
```

而不是单独使用 clip.setText :)

# c# - App_GlobalResources 不适用于 asp.net 中的多语言支持

> ID：16143744
> 
> 赞同：1
> 
> 时间：2013-04-22T09:32:31.110
> 
> 标签：c#, asp.net, app-globalresources

后面的代码：

```
 ResourceManager rm;
    CultureInfo ci;
    protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            Session["Flag"] = null;
            Session["Language"] = null;
            Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
            rm = new ResourceManager("Resources.Language",
                     System.Reflection.Assembly.Load("App_GlobalResources"));
            ci = Thread.CurrentThread.CurrentCulture;
            LoadLanguage(ci);

        }
    }
    private void LoadLanguage(CultureInfo ci) 
    {
        lblHindi.Text = rm.GetString("Hindi", ci);
        lblTelugu.Text = rm.GetString("Telugu", ci);

    } 
```

我的 App_GlobalResources 文件夹中有以下文件

![在此处输入图像描述](https://i.stack.imgur.com/KDhcJ.png)

设计 ：

```
 <center> 
```

```
 <a href="Default.aspx"><asp:Label ID="lblHindi" runat="server" Text="Hindi"></asp:Label></a>
        <br />
 <br />

        <a href="Default.aspx"><asp:Label ID="lblTelugu" runat="server" Text="Telugu"></asp:Label></a>
  <br />
        </center> 
```

但是它不起作用我该怎么做

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:08:41.410

您编写的代码非常好。似乎问题在于您从资源文件访问字符串的方式。您必须在每个资源文件中维护相同的 Key，而 value 将被翻译成不同的语言。假设您将在 Language.resx 文件中创建一个具有英语值的键“SOME_KEY1”。在其他 resx 文件中创建具有其他语言翻译的不同值的相同键。之后，您可以按如下方式访问翻译后的字符串：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                Session["Flag"] = null;
                Session["Language"] = null;

                rm = new ResourceManager("Resources.Language",
                         System.Reflection.Assembly.Load("App_GlobalResources"));

                LoadLanguage();
            }
        }

        private void LoadLanguage()
        {
            lblHindi.Text = rm.GetString("SOME_KEY1", new CultureInfo("hi-IN"));
            lblTelugu.Text = rm.GetString("SOME_KEY1", new CultureInfo("te-IN"));
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:48:05.827

您可以添加并尝试此代码吗？

"protected override void InitializeCulture()" -> 待调用的方法覆盖应用层文化

```
protected override void InitializeCulture()
{
    //...
    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
    Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");
    base.InitializeCulture();
    ci = Thread.CurrentThread.CurrentCulture;
    //...
}

private void LoadLanguage(CultureInfo ci) 
{
    lblHindi.Text = rm.GetString("Hindi", ci);
    lblTelugu.Text = rm.GetString("Telugu", ci);

} 
```

# php - 如何增强这个？在另一个域中获取网页的一部分

> ID：16143758
> 
> 赞同：0
> 
> 时间：2013-04-22T09:33:19.903
> 
> 标签：php, jquery, html, domdocument

我做了这个：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            $(document).ready(
                function()
                {   
                    $("body").html($("#HomePageTabs_cont_3").html());
                }
            );
        </script>
    </head>
    <body>
    <?php
        echo file_get_contents("http://www.bankasya.com.tr/index.jsp");
    ?>

    </body>
</html> 
```

当我用 Firebug 检查我的页面时，它给出了无数的“丢失文件”（图像、css 文件、js 文件等）错误。我只想拥有页面的一部分而不是全部。**这段代码做我想要**的。但我想知道是否有更好的方法。

**编辑：**

该页面可以满足我的需要。我不需要所有的内容。所以`iframe`对我没用。我只想要 div 的原始数据`#HomePageTabs_cont_3`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:15:31.917

你最好的选择是 PHP 服务器端解析。我写了一个小片段来向您展示如何使用`DOMDocument`（`tidy`如果您的服务器有它，可能会清除所有格式错误的 XHTML foo）。

**警告**：输出 UTF-8。您可以在 DOMDocument 的构造函数中更改它

**警告 2**：如果它的输入既不是 utf-8 也不是 iso-8859-9，将会吐出**。**当前页面的字符集是 iso-8859-9，我认为他们没有理由改变它。

```
header("content-type: text/html; charset=utf-8");
$data = file_get_contents("http://www.bankasya.com.tr/index.jsp");
// Clean it up
if (class_exists("tidy")) {
   $dataTidy = new tidy();
   $dataTidy->parseString($data,
                                 array(
                                       "input-encoding" => "iso-8859-9",
                                       "output-encoding" => "iso-8859-9",
                                       "clean" => 1,
                                       "input-xml" => true,
                                       "output-xml" => true,
                                       "wrap" => 0,
                                       "anchor-as-name" => false
                                 )
                          );
   $dataTidy->cleanRepair();
   $data = (string)$dataTidy;
}
else {
    $do = true;
            while ($do) {
                    $start = stripos($data,'<script');
                    $stop = stripos($data,'</script>');
                    if ((is_numeric($start))&&(is_numeric($stop))) {
                            $s = substr($data,$start,$stop-$start);
                            $data = substr($data,0,$start).substr($data,($stop+strlen('</script>')));
                    } else {
                            $do = false;
                    }
            }
    // nbsp breaks it?
    $data = str_replace("&nbsp;"," ",$data);
    // Fixes for any element that requires a self-closing tag
    if (preg_match_all("/<(link|img)([^>]+)>/is",$data,$mt,PREG_SET_ORDER)) {
            foreach ($mt as $v) {
                    if (substr($v[2],-1) != "/") {
                            $data = str_replace($v[0],"<".$v[1].$v[2]."/>",$data);
                    }
            }
    }
    // Barf out the inline JS
    $data = preg_replace("/javascript:[^;]+/is","#",$data);
    // Barf out the noscripts
    $data = preg_replace("#<noscript>(.+?)</noscript>#is","",$data);
    // Muppets. Malformed comment = one more regexp when they could just learn to write proper HTML...
    $data = preg_replace("#<!--(.*?)--!?>#is","",$data);
}
$DOM = new \DOMDocument("1.0","utf-8");
$DOM->recover = true;
    function error_callback_xmlfunction($errno, $errstr) { throw new Exception($errstr); }
    $old = set_error_handler("error_callback_xmlfunction");
// Throw out all the XML namespaces (if any)
$data = preg_replace("#xmlns=[\"\']?([^\"\']+)[\"\']?#is","",(string)$data);
try {
      $DOM->loadXML(((substr($data, 0, 5) !== "<?xml") ? '<?xml version="1.0" encoding="utf-8"?>' : "").$data);
} catch (Exception $e) {
      $DOM->loadXML(((substr($data, 0, 5) !== "<?xml") ? '<?xml version="1.0" encoding="iso-8859-9"?>' : "").$data);
}
    restore_error_handler();
error_reporting(E_ALL);
$DOM->substituteEntities = true;
$xpath = new \DOMXPath($DOM);
echo $DOM->saveXML($xpath->query("//div[@id=\"HomePageTabs_cont_3\"]")->item(0)); 
```

按出场顺序：

*   获取数据
*   如果我们有`tidy`，用它清理 HTML
*   创建一个新的`DOMDocument`并加载我们的文档（`(string)$dataTidy`是一个简写的 tidy getter）
*   创建 XPath 请求路径
*   使用 XPath 请求所有 id 设置为我们想要的 div，获取集合的第一项（`->item(0)`，这将是 a `DOMElement`）并请求 DOM 输出其 XML 内容（包括标签本身）

希望它是您正在寻找的...尽管您可能希望将其包装在一个函数中。

# 编辑

忘了提：[http](http://rescrape.it/rs.php) ://rescrape.it/rs.php用于实际的脚本输出！

# 编辑 2

更正，该站点不是 W3C 有效的，因此，您需要`tidy`在处理之前对其进行修改或将一组正则表达式应用于输入。我要看看我是否可以制定一套来消除不一致之处。

# 编辑 3

为我们这些没有`tidy`.

# 编辑 4

无法抗拒。如果您实际上喜欢这些值而不是表格，请使用它而不是回声：

```
 $d = new stdClass();
 $rows = $xpath->query("//div[@id=\"HomePageTabs_cont_3\"]//tr");
 $rc = $rows->length;
 for ($i = 1; $i < $rc-1; $i++) {
     $cols = $xpath->query($rows->item($i)->getNodePath()."/td");
     $d->{$cols->item(0)->textContent} = array(
        ((float)$cols->item(1)->textContent),
        ((float)$cols->item(2)->textContent)
     );
 } 
```

我不了解你，但对我来说，数据比格式错误的表格更有效。

*（Welp，那个花了一些时间来写）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:17:36.390

我会与远程站点的所有者取得联系，并询问是否有我可以使用的数据馈送来返回我想要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:23:12.587

[Sébastien 的回答](https://stackoverflow.com/a/16144603/739897)是最好的解决方案，但是如果您想使用 jquery，您可以在站点的部分添加[Base](http://www.w3schools.com/tags/tag_base.asp)标签，以避免在图像上未找到错误。`head`

```
<base href="http://www.bankasya.com.tr/"> 
```

此外，您需要将源更改为绝对路径。

**但是使用 DOMDocument**

# html - 难以捉摸的图标字体不适用于任何版本的 IE

> ID：16143764
> 
> 赞同：0
> 
> 时间：2013-04-22T09:33:31.703
> 
> 标签：html, css, internet-explorer

这些图标在 Chrome/Firefox 版本中运行良好，但由于某种原因无法在任何版本的 IE 中运行。不知道为什么会这样 - 我确信它一定是我缺少的一些简单的东西。带有代码的 URL 在这里：它们使用@font-face 提供服务，据我所知，路径是正确的。

[http://rational-animal.co.uk/elusive](http://rational-animal.co.uk/elusive)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:42:18.647

终于找到答案了 是 bootstrap.css 中的 glyphicons 代码覆盖了难以捉摸的图标。以此开头和之后的所有代码：

```
[class^="icon-"],
[class*=" icon-"] {
  display: inline-block;
  width: 14px;
  height: 14px;
  margin-top: 1px;
  *margin-right: .3em;
  line-height: 14px;
  vertical-align: text-top;
  background-image: url("../img/glyphicons-halflings.png");
  background-position: 14px 14px;
  background-repeat: no-repeat;
} 
```

需要删除才能使其工作。

# php - 根据输入创建日期数组

> ID：16143765
> 
> 赞同：0
> 
> 时间：2013-04-22T09:33:32.590
> 
> 标签：php, date

给定这两个 YYYYMM 字符串：

```
$start = "201301";
$end = "201303"; 
```

我想派生一个这样的数组：

```
array (
  0 => 
  array (
    0 => '20130101',
    1 => '20130131',
  ),
  1 => 
  array (
    0 => '20130201',
    1 => '20130228',
  ),
  2 => 
  array (
    0 => '20130301',
    1 => '20130331',
  ),
) 
```

我已经用 date() 和 mktime() 尝试了一些东西，但到目前为止还没有什么像样的。

有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:03:05.677

使用[日期](http://php.net/manual/en/class.datetime.php)时间：

```
$start = "201301";
$end = "201303";

$dateNiceStart = substr($start,0,4).'-'.substr($start,4).'-01';
$dateNiceEnd = substr($end,0,4).'-'.substr($end,4).'-';

// Days count in month
$endDays = date('t',strtotime($dateNiceEnd.'01'));
$dateNiceEnd .= $endDays;

$startObj = new DateTime($dateNiceStart);
$endObj = new DateTime($dateNiceEnd);

$temp = clone $startObj;

$arr = array();
// Adding first month
//Using first day and last day
$temp->modify( 'first day of this month' );
$start = $temp->format('Ymd');
$temp->modify( 'last day of this month' );
$end = $temp->format('Ymd');

$arr[] = array($start, $end);
do{
    // for next month
    $temp->modify( 'first day of next month' );
    $start = $temp->format('Ymd');
    $temp->modify( 'last day of this month' );
    $end = $temp->format('Ymd');

    $arr[] = array($start, $end);

    // This line edited to work properly in different years, thanks to @Adidi
    $interval = $endObj->diff($temp)->format('%y%m%d');
}
while ($interval!=0);

print_R($arr); 
```

主键是***下/****本月*使用的***第一天/最后****一天。*

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:50:06.833

[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

您需要的是格式字符串“t”：

> **t**给定月份的天数 28 到 31

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:51:25.790

这是循环它的简单方法..

```
$start  = "201301";
$end    = "201303";

$start_time = strtotime(implode('-',str_split($start,4)));
$end_time = strtotime(implode('-',str_split($end,4)));

$array = array();
if($start_time <= $end_time){
    while($start_time <= $end_time){
        $month = date('F', $start_time);
        $array[] = array(
            date('Ymd', strtotime("first day of {$month}", $start_time)),
            date('Ymd', strtotime("last day of {$month}", $start_time)));
        $start_time = strtotime("next month", $start_time);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:08:43.343

您可以尝试使用这些功能：

```
function get_date_range ($start, $end) {

    $dates = array();

    $start = strtotime($start .'01');
    $end    = strtotime($end .'01');

    while ($start <= $end) {
        $dates [] = array(date('Ym01', $start), date('Ymt', $start));
        $start  = strtotime(add_month(date('Y-m-01', $start), 1));
    }

    return $dates;
}

function add_month($date_value, $months, $format = 'm/d/Y') {
    $date = new DateTime($date_value);
    $start_day = $date->format('j');

    $date->modify("+{$months} month");
    $end_day = $date->format('j');

    if ($start_day != $end_day)
        $date->modify('last day of last month');

    return $date->format($format);
}

$start = "201301";
$end    = "201303";

$dates = get_date_range($start, $end);

print_r($dates); 
```

在这里，该`add_month`功能将帮助您避免在将一个月添加到 1 月 31 日时出现日期问题。

如果您使用`strtotime`它将在 1 月 31 日添加 1 个月时转到 3 月。输出将是：

```
Array
(
    [0] => Array
        (
            [0] => 2013-01-01
            [1] => 2013-01-31
        )

    [1] => Array
        (
            [0] => 2013-02-01
            [1] => 2013-02-28
        )

    [2] => Array
        (
            [0] => 2013-03-01
            [1] => 2013-03-31
        )

) 
```

希望这可以帮助你:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T10:00:50.237

工作解决方案：

```
$start = "201301";
$end = "201309";

function getDateTimeByString($str_date){
    preg_match('/^([\d]{4})([\d]{2})$/',$str_date,$matches);
    $dt = null;
    if($matches){
        $dt = new DateTime();
        $dt->setDate($matches[1],$matches[2],1);   
    }
    return $dt;      
}

$start_dt = getDateTimeByString($start);
$end_dt = getDateTimeByString($end);

$output = array();

while($start_dt->getTimestamp() <= $end_dt->getTimestamp()){
    $arr = array(); 
    $arr[] = $start_dt->format('Ymd');
    $start_dt->modify('last day of this month');
    $arr[] = $start_dt->format('Ymd');

    $output[] = $arr;  

    $start_dt->modify('first day of next month');
}

print_r($output); 
```

印刷：

```
Array
(
    [0] => Array
        (
            [0] => 20130101
            [1] => 20130131
        )

    [1] => Array
        (
            [0] => 20130201
            [1] => 20130228
        )

    [2] => Array
        (
            [0] => 20130301
            [1] => 20130331
        )

    [3] => Array
        (
            [0] => 20130401
            [1] => 20130430
        )

    [4] => Array
        (
            [0] => 20130501
            [1] => 20130531
        )

    [5] => Array
        (
            [0] => 20130601
            [1] => 20130630
        )

    [6] => Array
        (
            [0] => 20130701
            [1] => 20130731
        )

    [7] => Array
        (
            [0] => 20130801
            [1] => 20130831
        )

    [8] => Array
        (
            [0] => 20130901
            [1] => 20130930
        )

) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T09:42:50.657

像这样的东西？

```
for($i=1;$i<=12;$i++) {
    $first = '2013'.($i<10 ? '0'.$i : $i).'01';
    $last = date('Ymt', strtotime($first));
    $myArray[] = array($first, $last);
} 
```

未测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T09:43:35.060

您可以像这样迭代几个月：

```
function date_range($start, $end)
{
    $start = strtotime("$start01");
    $end = strtotime("$end01");

    $res = array();

    while ($start < $end) {
        $next = strtotime("+1 month -1 day", $start);
        $res[] = array(
            date('Ymd', $start),
            date('Ymd', $next),
        );
        $start = $next;
    }

    return $res;
} 
```**

# sql - 引用Oracle中先前计算值的值

> ID：16143769
> 
> 赞同：4
> 
> 时间：2013-04-22T09:33:40.107
> 
> 标签：sql, oracle, analytic-functions

如何从 SQL 查询中的前一行引用计算值？在我的情况下，每一行都是一个事件，它以某种方式操纵前一行的相同值。

原始数据如下所示：

```
Eventno 事件类型 Totalcharge
3 ACQ 32
2 出空
1 出空

```

假设每个 Eventtype=OUT 应该是名为 Remaincharge 的列中前一行总电荷的一半：

```
Eventno Eventtype Totalcharge Remaincharge
3 ACQ 32 32
2 出空 16
1 出空 8

```

我已经尝试过 LAG 分析函数，但这不允许我从前一行获得计算值。尝试过这样的事情：

`LAG(remaincharge, 1, totalcharge) OVER (PARTITION BY ...) as remaincharge`

但这不起作用，因为找不到剩余电荷。

任何想法如何实现这一目标？需要一个分析函数，它可以给我累积总和，但给定一个函数，而不是访问以前的值。

先感谢您！

**更新问题描述**

恐怕我的示例问题很笼统，这里有一个更好的问题描述：

剩余的总费用由outqty /（previous剩余数量）的比率决定。

```
Eventno Eventtype Totalcharge Remainqty Outqty
4 ACQ 32 100 0
3 其他 NULL 100 0
2 出空 60 40
1 输出空 0 60

```

```
Eventno Eventtype Totalcharge Remainqty Outqty Remaincharge
4 ACQ 32 100 0 32
3 其他 NULL 100 0 32 - (0/100 * 32) = 32
2 OUT NULL 60 40 32 - (40/100 * 32) = 12.8
1 OUT NULL 0 60 12.8 - (60/60 * 12.8) = 0

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:45:25.227

在您的情况下，您可以使用[FIRST_VALUE()分析函数和 2 的幂来计算](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions066.htm#SQLRF00642)*第一个*值，您必须在子查询中用[RANK()](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions141.htm#SQLRF00690)除然后使用它。它对您的示例非常具体，但应该为您提供总体思路：

```
select eventno, eventtype, totalcharge
     , case when eventtype <> 'OUT' then firstcharge
            else firstcharge / power(2, "rank" - 1) 
       end as remaincharge
  from ( select a.*
              , first_value(totalcharge) over 
                  ( partition by 1 order by eventno desc ) as firstcharge
              , rank() over ( partition by 1 order by eventno desc ) as "rank"
           from the_table a
                ) 
```

这是一个要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/c7eda/18)我没有进行任何分区，因为您的原始数据中没有任何内容可以分区...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T12:23:12.850

Ben 的使用窗口条款的答案的变体，它似乎可以满足您更新的要求：

```
select eventno, eventtype, totalcharge, remainingqty, outqty,
    initial_charge - case when running_outqty = 0 then 0
    else (running_outqty / 100) * initial_charge end as remainingcharge
from (
    select eventno, eventtype, totalcharge, remainingqty, outqty,
        first_value(totalcharge) over (partition by null
            order by eventno desc) as initial_charge,
        sum(outqty) over (partition by null
            order by eventno desc
            rows between unbounded preceding and current row)
            as running_outqty
    from t42
); 
```

除了它给出`19.2`而不是`12.8`第三行，但这就是你的公式所建议的：

```
 EVENTNO EVENT TOTALCHARGE REMAININGQTY     OUTQTY REMAININGCHARGE
---------- ----- ----------- ------------ ---------- ---------------
         4 ACQ            32          100          0              32
         3 OTHER                      100          0              32
         2 OUT                         60         40            19.2
         1 OUT                          0         60               0 
```

如果我添加另一个拆分，使其分两步从 60 变为零，并且混合中还有另一个非 OUT 记录：

```
 EVENTNO EVENT TOTALCHARGE REMAININGQTY     OUTQTY REMAININGCHARGE
---------- ----- ----------- ------------ ---------- ---------------
         6 ACQ            32          100          0              32
         5 OTHER                      100          0              32
         4 OUT                         60         40            19.2
         3 OUT                         30         30             9.6
         2 OTHER                       30          0             9.6
         1 OUT                          0         30               0 
```

假设剩余数量是一致的，并且您可以有效地跟踪以前的运行总数，但从您显示的数据来看，这看起来是合理的。内部查询计算每一行的运行总计，外部查询进行计算；可以浓缩，但希望像这样更清晰......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:14:20.690

[本的答案](https://stackoverflow.com/a/16143994/1083652)是更好的（可能会表现更好），但你也可以这样做：

```
select t.*, (connect_by_root Totalcharge) / power (2,level-1) Remaincharge
from the_table t
start with EVENTTYPE = 'ACQ'
connect by prior eventno = eventno + 1; 
```

我认为它更容易阅读

[这是一个演示](http://www.sqlfiddle.com/#!4/c7eda/38)

# php - CSV 文件的句柄不回显

> ID：16143774
> 
> 赞同：0
> 
> 时间：2013-04-22T09:33:58.173
> 
> 标签：php

自从我上次使用它以来，我什至没有弄乱它，但它只是不想运行第二个回声，有什么想法吗？

第一个回声很好，它在指定的 CSV 文件中查找所有名称，我可能很笨，但它只是不喜欢第二个回声。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 'on');

$csvpath="resource/userlist.csv";

if (($handle = fopen("$csvpath", "r")) !== FALSE) {

    $titles = fgetcsv($handle, 1000, ",");

    while (($buffer = fgetcsv($handle, 1000, ",","\"")) != FALSE) {
        $user = $buffer[0];
        echo $user;
        echo '<User Name="$user">
            <Option Name="Pass">password</Option>
            <Option Name="Group"></Option>
            <Option Name="Bypass server userlimit">0</Option>
            <Option Name="User Limit">0</Option>
            <Option Name="IP Limit">0</Option>
            <Option Name="Enabled">1</Option>
            <Option Name="Comments"></Option>
            <Option Name="ForceSsl">0</Option>
            <IpFilter>
                <Disallowed />
                <Allowed />
            </IpFilter>
            <Permissions>
                <Permission Dir="C:\xampp\htdocs\$user">
                    <Option Name="FileRead">1</Option>
                    <Option Name="FileWrite">0</Option>
                    <Option Name="FileDelete">0</Option>
                    <Option Name="FileAppend">0</Option>
                    <Option Name="DirCreate">0</Option>
                    <Option Name="DirDelete">0</Option>
                    <Option Name="DirList">1</Option>
                    <Option Name="DirSubdirs">1</Option>
                    <Option Name="IsHome">1</Option>
                    <Option Name="AutoCreate">0</Option>
                </Permission>
            </Permissions>
            <SpeedLimits DlType="0" DlLimit="10" ServerDlLimitBypass="0" UlType="0" UlLimit="10" ServerUlLimitBypass="0">
                <Download />
                <Upload />
            </SpeedLimits>
        </User>';
    }
    fclose($handle);
}
?> 
```

没关系，我注意到了我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:35:54.603

变量插值不会发生在单引号中：

```
echo '<User Name="$user">.... 
```

# javascript - 带有 || 的 Javascript 语句 {};

> ID：16143776
> 
> 赞同：11
> 
> 时间：2013-04-22T09:34:12.283
> 
> 标签：javascript

我正在学习 javascript，今天我发现了这段代码：

```
window.Picture2 = window.Picture2 || {}; 
```

看不懂|| {} ; 有人可以为我解释一下吗？太感谢了:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T09:42:25.917

这是将默认值分配给全局变量的危险方法`Picture2`。

```
window.Picture2 = window.Picture2 || {}; 
```

如果未定义，它将初始化`window.Picture2`为新对象。**但是**，由于这是对真实性的检查，如果它具有以下任何[虚假值](http://james.padolsey.com/javascript/truthy-falsey/)，也将被分配一个空对象：`{}`**`Picture2`**

 **```
// these are all falsy
0, NaN, null, '', undefined, false 
```

对于所有这些情况，这可能不是所需的行为，尤其是对于、`0`或Value 。`NaN``false``''`

**编辑**
“ `??`NULLISH COALESCING”运算符现在是[ECMAScript](https://tc39.es/ecma262/#prod-CoalesceExpression)标准的一部分，并且已经拥有[相当不错的浏览器支持](https://caniuse.com/#feat=mdn-javascript_operators_nullish_coalescing)。

因此，您的用例的语法是：

```
window.Picture2 ?? {}; 
```

如果`Picture2`等于`undefined`或`null`，这将评估为 false，但对于其余的虚假值则不会。

如果要为函数参数分配默认值，现在还可以编写以下内容：

```
function myfunc(Picture2 = {}){
   /* function body */
} 
```

默认参数语法和 nullish 合并运算符都是唯一没有副作用的分配默认值的正确方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T09:35:37.640

`window.Picture2`它为if `window.Picture2`is undefined( [falsy](http://www.sitepoint.com/javascript-truthy-falsy/) )分配一个默认的空对象

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T09:35:37.400

它将检查`.Picture2`是否已定义，如果已使用该值，则分配`Window.Picture2`给新的对象字面量。

正如@Christoph 所说 -`Picture2`如果对象是`falsy`.

[http://www.sitepoint.com/javascript-truthy-falsy/](http://www.sitepoint.com/javascript-truthy-falsy/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:35:34.617

它读作：

> 如果**window.Picture2***未定义*或为*null* ，则将空对象分配给 **window.Picture2**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T09:36:07.647

如果`window.Picture2`未定义（在条件评估中为假），则执行 OR ( `||`) 并且`window.Picture2`变成空对象。**

# c# - value 类型数据结构不接受 Null 为什么

> ID：16143786
> 
> 赞同：-1
> 
> 时间：2013-04-22T09:35:04.677
> 
> 标签：c#, oop

我是 C#.Net 的新手。有两种类型的数据类型，一种是引用类型，另一种是值类型。今天我体验到，如果创建任何值类型的实例并将其分配给`null`该编译器会给出 error.means

```
int a = null. 
```

我说的是可空变量意味着

```
int? a = null; 
```

我的问题是为什么当我们分配`null`给任何值类型数据结构时会发生错误。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:39:37.773

因为所有类型都有一个允许值的基础范围。默认情况下，`int`null 不是允许的值。因此，当您尝试分配`null`给您的`int`对象时，您会收到“不可为空的类型”错误。

> Nullable 类型是 System.Nullable 结构的实例。可空类型可以表示其基础值类型的正常值范围，外加一个额外的空值。例如，一个 Nullable，发音为“Nullable of Int32”，可以分配从 -2147483648 到 2147483647 的任何值，也可以分配 null 值。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-gb/library/1t3y8s4s%28v=vs.80%29.aspx) ...

我希望这有帮助。

# vb.net - Excel 应用程序未退出

> ID：16143789
> 
> 赞同：1
> 
> 时间：2013-04-22T09:35:11.757
> 
> 标签：vb.net, excel, vba

检查我的代码我正在从 vb.net 中的 excel 自动上传这是我的代码

进口声明

```
Imports Excel = Microsoft.Office.Interop.Excel 
```

释放对象函数

```
Private Sub releaseObject(ByVal obj As Object)
    Try

        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)

        obj = Nothing
    Catch ex As Exception
        obj = Nothing
    Finally

        GC.Collect()

    End Try
End Sub 
```

按钮点击事件

```
Protected Sub ButtonUpload_Click(ByVal sender As Object, ByVal e As EventArgs) Handles ButtonUpload.Click
    If IsPostBack Then
       Dim xlApp As Excel.Application
        Dim xlWorkBooks As Excel.Workbooks
        Dim xlWorkBook As Excel.Workbook
        Dim xlWorkSheet As Excel.Worksheet
        Dim range As Excel.Range
        connStr = ConfigurationManager.ConnectionStrings("LocalSqlServer").ConnectionString
        conn = New SqlConnection(connStr)
        dat = System.DateTime.Now

        Filepath = Path.GetFullPath(fileUploadBOM.PostedFile.FileName)
        sFileName = Path.GetFileName(fileUploadBOM.PostedFile.FileName)
        FileFormat = Path.GetExtension(Filepath)

        v_bom_type = "IMPORT"
        If FileFormat.Equals(".xls") Or FileFormat.Equals(".xlsx") Then
            System.IO.File.Delete("C:\inetpub\wwwroot\Uploads\" & sFileName)
            fileUploadBOM.PostedFile.SaveAs(sFileDir + sFileName)
            Try
                xlApp = New Excel.ApplicationClass
                xlWorkBooks = xlApp.Workbooks
                xlWorkBook = xlWorkBooks.Open(sFileDir + sFileName)
                xlWorkSheet = xlWorkBook.Worksheets("BOM for Import")
                range = xlWorkSheet.Cells
            Catch ex As Exception
                releaseObject(xlApp)
                'GetWindowThreadProcessId(xlApp.Hwnd, processID)
                'release(processID)

            End Try 
```

一些如果条件像..

```
 Dim R As String
            R = CType(range.Cells(4, 2), Excel.Range).Value()
            If Not R Is Nothing Then
                If (R.Trim = "") Then
                    Me.Page.ClientScript.RegisterStartupScript(Me.GetType(), "SetStatusText", "<script type='text/javascript'> alert('please enter the OEM for logistics cost'); </script>")
                    releaseObject(range)
                    releaseObject(xlWorkSheet)
                    xlWorkBook.Save()
                    xlWorkBook.Close()
                    releaseObject(xlWorkBook)
                    xlWorkBooks.Close()
                    releaseObject(xlWorkBooks)

                    xlApp.Quit()

                    releaseObject(xlApp)

                    'GetWindowThreadProcessId(xlApp.Hwnd, processID)
                    'MsgBox(processID)
                    'release(processID)

                    Exit Sub
                Else
                    v_logiccost = CType(range.Cells(4, 2), Excel.Range).Value()
                End If
            Else
                Me.Page.ClientScript.RegisterStartupScript(Me.GetType(), "SetStatusText", "<script type='text/javascript'> alert('please enter the OEM for logistics cost'); </script>")
                releaseObject(range)
                releaseObject(xlWorkSheet)
                xlWorkBook.Save()
                xlWorkBook.Close()
                releaseObject(xlWorkBook)
                xlWorkBooks.Close()
                releaseObject(xlWorkBooks)

                xlApp.Quit()

                releaseObject(xlApp)

                'GetWindowThreadProcessId(xlApp.Hwnd, processID)
                'MsgBox(processID)
                'release(processID)

                Exit Sub
            End If

            '' No of yrs of support

            Dim P As String
            P = CType(range.Cells(6, 2), Excel.Range).Value()
            releaseObject(range)
            If Not P Is Nothing Then
                If (IsNumeric(P) = True) Then
                    v_year = P
                Else
                    Me.Page.ClientScript.RegisterStartupScript(Me.GetType(), "SetStatusText", "<script type='text/javascript'> alert('No Of Years Support Should Be A Number.'); </script>")
                    releaseObject(range)
                    releaseObject(xlWorkSheet)
                    xlWorkBook.Save()
                    xlWorkBook.Close()
                    releaseObject(xlWorkBook)
                    xlWorkBooks.Close()
                    releaseObject(xlWorkBooks)

                    xlApp.Quit()

                    releaseObject(xlApp)

                    'GetWindowThreadProcessId(xlApp.Hwnd, processID)
                    'MsgBox(processID)
                    'release(processID)

                    Exit Sub
                End If
            End If 
```

最后调用释放的函数

```
releaseObject(range)
                    releaseObject(xlWorkSheet)
                    xlWorkBook.Save()
                    xlWorkBook.Close()
                    releaseObject(xlWorkBook)
                    xlWorkBooks.Close()
                    releaseObject(xlWorkBooks)

                    xlApp.Quit()

                    releaseObject(xlApp) 
```

这是我的整个代码我想问题出在 Range.cells 对 RCW 的引用建议我在哪里做错了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:34:27.697

一些事情

**A)**在编码方面，我一直坚信 1 个入口点和 1 个出口点。在您的代码中，您有几个退出点。您的代码现在看起来像这样

```
 If A = B Then
        '
        '~~> Rest of the code
        '
        'release object
        Exit Sub
    Else

    End If

    If C = D Then

    Else
        '
        '~~> Rest of the code
        '
        'release object
        Exit Sub
    End If

    releaseObject(xlrange)
    releaseObject(xlWorkSheet)
    releaseObject(xlWorkBook)
    releaseObject(xlApp) 
```

如果我们正确地关闭我们的对象，就很难追踪。最好的方法是将它们组合起来，然后在离开潜艇之前释放对象。您上面的代码可以重写为

```
 If A = B Then
        '
        '~~> Rest of the code
        '
    Else
        If C = D Then

        Else
            '
            '~~> Rest of the code
            '
        End If
    End If

    releaseObject(xlrange)
    releaseObject(xlWorkSheet)
    releaseObject(xlWorkBook)
    releaseObject(xlApp) 
```

**B）**正如亚历克斯和克里斯提到的，以正确的顺序释放你的对象（你在最后而不是在代码中间）。像这样

```
 releaseObject(xlrange)
    releaseObject(xlWorkSheet)
    releaseObject(xlWorkBook)
    releaseObject(xlApp) 
```

如果您采纳我的第一个建议，那么您将不必在任何地方维护发布目标代码，而只是在最后。

**C）**我看到您已将您的 Excel 对象声明为您`PUBLIC`是否在其他地方使用它们`ButtonUpload_Click`

1.  例如`Form Load`，如果是，请确保您正确释放它们
2.  如果不是，则将它们移入`ButtonUpload_Click`

[如果您合并上述建议，那么我在使用TWO DOT](http://www.siddharthrout.com/2012/08/06/vb-net-two-dot-rule-when-working-with-office-applications-2/)规则时不会看到释放对象的问题。

休息一下，我认为您现有的代码没有任何问题。它对我来说很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:37:27.210

谢谢一切都解决了

```
Private Sub releaseObject(ByVal obj As Object)
Try

    System.Runtime.InteropServices.Marshal.ReleaseComObject(obj)

Catch ex As Exception

Finally
obj = Nothing

End Try
End Sub 
```

# java - 如何从 DOM、GWT 中的集合中删除项目

> ID：16143802
> 
> 赞同：0
> 
> 时间：2013-04-22T09:35:51.107
> 
> 标签：java, javascript, gwt

我是 GWT 的新手。我正在编写一个页面的代码，它询问一个包含两个集合的 JSON 对象，我使用其中一个集合来填充`Flextable`.
这是我的 JSON 对象：

```
public class Users extends JavaScriptObject {

 protected Users() {
 }

 public final native JsArray<Link> getLinks() /*-{
    return this.links;
 }-*/;

 public final native JsArray<User> getCollection() /*-{
    return this.collection;
 }-*/; 
} 
```

特别是我正在使用第二个集合（称为`collection`）来填充`Flextable`.
但我的问题是，当我从表中删除一行时，即使我向服务器发送带有 http 删除方法的请求（并且服务器成功删除了该项目），当我尝试刷新表时 GWT 也不会生成对服务器的 GET 请求，（即使是写在代码中）和 Users Object 和之前一样，删除的 item 也一样。
我尝试使用此方法从集合中删除此项目：

```
public static native void remove(JsArray<?> arr, int index, int count) /*-{ 
                                                                              arr.splice(index, count);
                                                                    }-*/;
....
remove(users.getCollection(), index, users.getCollection().length()); 
```

我还尝试了其他技术：

```
 users.getCollection().set(index, null); 
```

但是在这两种情况下，我都没有得到预期的结果，当我刷新表格时，我再次找到了已删除的项目。
我认为我没有正确管理 DOM，
您有什么建议吗？任何想法？我相信对于专家来说这是一个简单的问题。

**编辑：**
用户可以单击按钮刷新表中的数据，此事件的处理程序将向服务器执行请求，但此请求仅在第一次单击时发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:40:38.087

基本上有两种选择，第一种是将标头设置`Cache Control`为`no-cache`在服务器端，而如果您无法修改服务器端的代码，例如在遗留应用程序的情况下，您可以在您的请求中附加一个随机数一个参数。请求将有一个带有附加参数的 uri，该参数是随机生成的数字`http:\\mydomain.com\something?random=12345`。两个不同的请求将具有不同的编号，并且在第二个请求中，第一个请求的响应已被缓存，它将被忽略。这不是一个聪明的做法，但它确实有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T10:12:30.153

为了更好地获取这样的数据，请使用 HTTP POST 请求，因为 GET 请求正在被缓存（通过 GWT、代理服务器......）。

还要确保您用于删除项目的服务器代码工作正常，并在 firebug 或 chrome 控制台中手动检查服务器响应，以查看您的响应是否包含已删除的记录。

请发布您用于填充弹性表的代码，您是否在再次填充数据之前清除它？

编辑：

见[链接](https://stackoverflow.com/questions/10395353/how-to-delete-value-from-jsarray-in-gwt)。

如果您可以使用 celltable [http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTable](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellTable)（因为它包含它显示在下面的元素列表）或使用一些集合（ArrayList）来保存您的 FlexTable 的数据显示。然后您可以轻松地修改该集合并从中重新绘制您的弹性表。

# javascript - 本地存储或 html 中的搜索框搜索

> ID：16143810
> 
> 赞同：1
> 
> 时间：2013-04-22T09:36:09.257
> 
> 标签：javascript, jquery, html, search

这就是我所拥有的： ![在此处输入图像描述](https://i.stack.imgur.com/8ELDc.png)

您看到的所有数据都保存在本地存储中。我现在想要的是您可以搜索并且所有不等于搜索词的会话都消失了。

我做的最好的是什么？在localstorage中搜索还是在html中搜索？(jquery/javascript)

HTML 代码：

```
<div id="content_wrapper" class="">
        <div id="mastersearch" class="container hide">
            <input type="text" id="txtmastersearch">
            <div id="searchresults">
            </div>
        </div>
        <div id="content" style="height: 520px;">
            <style>
                h2 {
                    margin-bottom: 0;
                }

                ul {
                    margin-bottom: 0;
                }
            </style>

<div class="container">
    <div class="row">
        <div class="span12">
            <input id="searchbox" class="span12" type="search" placeholder="Search...">
        </div>
    </div>
    <div id="here" class="row">           

    <div class="span6"><h2 class="before-blocks">Wednesday 3 April 2013</h2><ul id="here" class="sessionlist blocks unstyled"><li class="contentblock has-thumb"><a href="http://test1niels.m.niels.tapcrowd.com/sessions/view/21115">0:00 - 0:00<span class="ellipsis name" style="width: 95%;" '=""><b>tweede</b></span><span class="ellipsis"><em></em></span></a></li></ul></div><div class="span6"><h2 class="before-blocks">Sunday 21 April 2013</h2><ul id="here" class="sessionlist blocks unstyled"><li class="contentblock has-thumb"><a href="http://test1niels.m.niels.tapcrowd.com/sessions/view/21117">12:00 - 15:00<span class="ellipsis name" style="width: 95%;" '=""><b>html5 session</b></span> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:49:23.927

> 我做的最好的是什么？在localstorage中搜索还是在html中搜索？(jquery/javascript)

如果你问选择什么：

1.  从 LocalStorage 获取数据；
2.  解析DOM；

在这种情况下，我猜，直接从 LocalStorage 获取数据是更好的解决方案。这在逻辑上更好，因为 html 只是表示层，从 View 获取数据而不是从 Model 获取数据是不行的。

# r - ggplot2中点的大小可以在不同的地块之间进行比较吗？

> ID：16143811
> 
> 赞同：7
> 
> 时间：2013-04-22T09:36:09.587
> 
> 标签：r, ggplot2

我正在使用 ggplot2 生成各种图，其中一个点的大小与具有相同 x 和 y 值的案例数量成正比。有没有办法使点的大小在具有不同值的不同地块之间具有可比性`size`？

使用假数据的示例：

```
 df1 = data.frame(x = seq(1:10), 
            y = c(4,3.8,3.8,3.2,3.1,2.5,2,1.5,1.2,1.3),
            size = c(1,20,1,70,100,70,1,1,110,1))

    library(ggplot2)

    pdf("plot.1.pdf")
    ggplot(df1, aes(x = x, y = y, size = size)) + geom_point()
    dev.off()

    df2 = data.frame(x = seq(1:10), 
            y = c(4,3.8,3.8,3.2,3.1,2.5,2,1.5,1.2,1.3),
            size = rep(1,length(y)))
    pdf("plot.2.pdf")
    ggplot(df2, aes(x = x, y = y, size = size)) + geom_point()
    dev.off() 
```

情节 1 中的点都`size`等于 1，比情节 2 中等于 1 的点大得多`size`。我需要一个版本的情节，其中具有相同值的点`size`在不同的情节中具有相同的大小。谢谢，

苏菲亚

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-22T10:30:58.477

一种可能性是使用`scale_size_identity()`- 这将`size`直接解释为点大小的单位，因此在两个图中，值为 1 的点将具有相同的大小。`size`但是，如果值很大（如您的情况），这种方法会产生太大的影响。处理点太大的问题，可以使用尺度内的变换，例如平方根，带参数`trans="sqrt"`。

```
ggplot(df1, aes(x = x, y = y, size = size)) + 
  geom_point()+scale_size_identity(trans="sqrt",guide="legend")

ggplot(df2, aes(x = x, y = y, size = size)) + 
  geom_point()+scale_size_identity(trans="sqrt",guide="legend") 
```

![在此处输入图像描述](https://i.stack.imgur.com/rgadm.png)

![在此处输入图像描述](https://i.stack.imgur.com/h8BfX.png)

## 更新

正如@hadley 所指出的，实现这一点的最简单方法是在`limits=`内部设置`scale_size_continuous()`相同的值以获得相同的大小。

```
ggplot(df1, aes(x = x, y = y, size = size)) + geom_point()+
  scale_size_continuous(limits=c(1,110))
ggplot(df2, aes(x = x, y = y, size = size)) + geom_point()+
  scale_size_continuous(limits=c(1,110)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/SoecL.png) ![在此处输入图像描述](https://i.stack.imgur.com/gDr5W.png)

# php - 用钩子替换 wordpress 文件中的文本

> ID：16143824
> 
> 赞同：0
> 
> 时间：2013-04-22T09:36:48.077
> 
> 标签：php, wordpress, hook, woocommerce

我正在尝试替换 woocommerce 文件中的一些文本，因此我需要在我的 functions.php 文件中创建一个钩子，以便当 woocommerce 更新时，它不会通过恢复到原始代码来损害我的网站。

我正在尝试替换这部分代码：

```
<h3><?php the_title(); ?></h3> 
```

有了这个：

```
<div class="caption"><h5><?php the_title(); ?></h5>
  <div class="category-main-points"><?php echo apply_filters( 'woocommerce_short_description', $post->post_excerpt ) ?>
  </div>
</div> 
```

这是原始文件中的部分代码：

```
<li <?php post_class( $classes ); ?>>

<?php do_action( 'woocommerce_before_shop_loop_item' ); ?>

<a href="<?php the_permalink(); ?>">

    <?php
        /**
         * woocommerce_before_shop_loop_item_title hook
         *
         * @hooked woocommerce_show_product_loop_sale_flash - 10
         * @hooked woocommerce_template_loop_product_thumbnail - 10
         */
        do_action( 'woocommerce_before_shop_loop_item_title' );
    ?>

    <h3><?php the_title(); ?></h3>

    <?php
        /**
         * woocommerce_after_shop_loop_item_title hook
         *
         * @hooked woocommerce_template_loop_price - 10
         */
        do_action( 'woocommerce_after_shop_loop_item_title' );
    ?>

</a>

<?php do_action( 'woocommerce_after_shop_loop_item' ); ?>

</li> 
```

到目前为止，这是我的钩子：

```
<?php
// Add text to content-product-cat to help with styling
add_action('woocommerce_before_subcategory_title', 'woohook_before_subcategory_title');

function woohook_before_subcategory_title() {
ob_start();

}

add_action('woocommerce_after_subcategory_title', 'woohook_after_subcategory_title');

function woohook_after_subcategory_title() {
 $subcategory_title = ob_get_clean();

}
?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:45:32.923

Woocommerce 允许您覆盖其模板，只需将原始文件复制到`./wp-content/themes/my-theme/woocommerce/`并编辑即可！

# asp.net - 如何将图像 url 从 vb.net 传递到 asp.net？

> ID：16143829
> 
> 赞同：0
> 
> 时间：2013-04-22T09:36:57.030
> 
> 标签：asp.net, vb.net

我正在从 vb.net 获取图像名称路径，并希望将其传递给 asp.net 中的图像 URL .. 怎么办...我正在这样做，但在 Vb.net 中什么也不显示

```
dim myLogo as string = ResolveUrl("C:\Test\Logo\" & img_name)
Me.DataBind() 
```

在 ASP.NET 中

```
<asp:Image ID="test" ImageUrl='<% myLogo %>' runat="server" Height="100px" Width="100px" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:47:24.257

ASP.NET 包括 Web 应用程序根运算符 (~)，您可以在指定服务器控件中的路径时使用它。ASP.NET 将 ~ 运算符解析为当前应用程序的根。您可以将 ~ 运算符与文件夹结合使用，以指定基于当前根目录的路径。

以下示例显示使用 Image 服务器控件时用于指定图像的根相对路径的 ~ 运算符。在此示例中，图像文件是从位于 Web 应用程序根目录下的 Images 文件夹中读取的，无论网页在网站中的位置。

```
<asp:image runat="server" id="Image1"
  ImageUrl="~/Images/SampleImage.jpg" /> 
```

您可以在服务器控件中的任何与路径相关的属性中使用 ~ 运算符。~ 运算符仅在服务器控件和服务器代码中被识别。您不能将 ~ 运算符用于客户端元素。

更多详情请参考：

[ASP.NET Web 项目路径](http://msdn.microsoft.com/en-IN/library/ms178116%28v=vs.100%29.aspx)

例如。

```
dim myLogo as string = "~\Logo\" & img_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:44:41.463

文件的 url 肯定是：

```
"file://c:\Test\Logo\" & img_name 
```

你试过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:51:14.840

您需要在代码的一般部分中将 myLogo 变量声明为受保护，并且在 aspx 页面中您可以使用以下代码来绑定 imageurl。

```
<asp:image runat="server" Height="100px" Width="100px" imageurl='<%#myLogo%>' /> 
```

如果这不起作用，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:05:30.747

试试这个

```
<asp:Image ID="test" ImageUrl='<%= myLogo %>' runat="server" Height="100px" Width="100px" /> 
```

# asp.net - 在 WiX 设置中安装期间模拟不同的用户

> ID：16143831
> 
> 赞同：1
> 
> 时间：2013-04-22T09:36:58.247
> 
> 标签：asp.net, authentication, iis-7, wix, impersonation

我刚刚创建了一个 WiX v3.5 安装程序来将我的 Web 应用程序安装到 IIS7。我有自定义操作，允许用户选择他们想要的网站和应用程序池，并通过对话框命名虚拟目录。

但是现在我已经进行了身份验证，我很困惑。我正在尝试启用模拟并允许用户输入他们的模拟登录名和密码。我在我的 Visual Studion 2010 设置项目中运行良好，所以现在我需要在 WiX 中复制它。

显然，这可以通过 appcmd 根据这个问题来完成：[Is setting "ASP.NET Impersonation" possible using WiX 3.x with IISExtension?](https://stackoverflow.com/questions/15252934/is-setting-asp-net-impersonation-possible-using-wix-3-x-with-iisextension) 但我似乎无法让这个工作。我可以将其添加到我的 product.wxs 中并将其包装在自定义操作中吗？有什么想法吗？任何帮助，将不胜感激？

```
appcmd set config /commit:WEBROOT/section:identity /impersonate:true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:41:36.423

嗨，我自己设法让这个工作，所以如果其他人有同样的问题，我通过在安装过程中修改我的 web.config 来解决这个问题：

为此，我将以下代码添加到我的 product.wsx 以编辑我的 web.config ，使用我分配给新对话框中文本框的属性以允许用户在安装时输入模拟用户名和密码：

```
<Component Id="Web.config" Guid="2ED81B77-F153-4003-9006-4770D789D4B6">
        <File Id="Web.config" Name="Web.config" Source="$(var.SolutionDir)MyWebApp\Web.config" DiskId="1" KeyPath="yes" />
        <util:XmlFile Id="system.webidentity" File="[INSTALLLOCATION]Web.config" Action="createElement" ElementPath="/configuration/system.web" Name="identity" Sequence="1" />
        <util:XmlFile Id="system.webIdentityAttribute" Action="setValue" File="[INSTALLLOCATION]Web.config" ElementPath="/configuration/system.web/identity" Name="impersonate" Value="true" Sequence="2" />
        <util:XmlFile Id="system.webIdentityAttribute2" Action="setValue" File="[INSTALLLOCATION]Web.config" ElementPath="/configuration/system.web/identity" Name="password" Value="[IMPERSONATIONUSERPASSWORD]" Sequence="3" />
        <util:XmlFile Id="system.webIdentityAttribute3" Action="setValue" File="[INSTALLLOCATION]Web.config" ElementPath="/configuration/system.web/identity" Name="userName" Value="[IMPERSONATIONUSER]" Sequence="4" /> 
```

请注意，如果您使用 msbuild 和 heat 将文件自动添加到您的 Wix 项目中，您必须确保您没有在此处复制您的 web.config，或者如果您是，请删除我的 web.config 您的 Target 设置。否则你会得到重复错误。

```
<Target Name="BeforeBuild">
<MSBuild Projects="%(ProjectReference.FullPath)" Targets="Package" Properties="Configuration=$(Configuration);Platform=AnyCPU" Condition="'%(ProjectReference.PackageThisProject)'=='True'" />
<Delete Files="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\web.config">
</Delete>
<PropertyGroup>
  <LinkerBaseInputPaths>%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\</LinkerBaseInputPaths>
</PropertyGroup>
<HeatDirectory OutputFile="%(ProjectReference.Filename).wxs" Directory="%(ProjectReference.RootDir)%(ProjectReference.Directory)obj\$(Configuration)\Package\PackageTmp\" DirectoryRefId="INSTALLLOCATION" ComponentGroupName="%(ProjectReference.Filename)_Project" SuppressCom="true" SuppressFragments="true" SuppressRegistry="true" SuppressRootDirectory="true" AutoGenerateGuids="false" GenerateGuidsNow="true" ToolPath="$(WixToolPath)" Condition="'%(ProjectReference.PackageThisProject)'=='True'" />   </Target> 
```

# xml - 转换 XML 并将属性添加为元素

> ID：16143836
> 
> 赞同：1
> 
> 时间：2013-04-22T09:37:15.870
> 
> 标签：xml, xslt

我正在尝试将“测试”元素添加到树的最后一个元素中，但它对每个元素都重复：

```
<root>
   <Module>
      <Router>
         <Message>@OppositeMacAddress='0x00, 0x80, 0xC8, 0x3B, 0xC6, 0xA0'</Message>
         @OppositeMacAddress='0x00, 0x80, 0xC8, 0x3B, 0xC6, 0xA0'
      </Router>
      @OppositeMacAddress='0x00, 0x80, 0xC8, 0x3B, 0xC6, 0xA0'
   </Module> 
</root> 
```

这是我的 XML 源

```
 <fired-rule context="Message[@Name='SPY_IN']"/>
       <failed-assert
               test="@OppositeIpAddress='192,168,1,2'"
               location="/Module[1]/Router[1]/Message[1]">
       <text>!Error! Erwarteter Wert:"192,168,1,2"</text>
   </failed-assert> 
```

它应该如下所示：

```
<root>
   <Module>
      <Router>
         <Message>@OppositeMacAddress='0x00, 0x80, 0xC8, 0x3B, 0xC6, 0xA0'</Message>
      </Router>
   </Module>
</root> 
```

这是我的 XSL 转换

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="/">
    <root>
      <xsl:apply-templates select="//failed-assert/@location" />
    </root>
  </xsl:template>

  <xsl:template match="@location">
    <xsl:param name="path" select="." />

    <xsl:variable
        name="currentContext" 
        select="substring-before(substring-after($path,'/'), '[')"/>

    <xsl:variable name="subContext" select="substring-after($path, ']')"/>

    <xsl:element name="{$currentContext}">
      <xsl:apply-templates select="current()[string($subContext)]">
        <xsl:with-param name="path" select="$subContext"/>
      </xsl:apply-templates>
      <xsl:value-of select="../@test"/>
    </xsl:element>

  </xsl:template>

</xsl:stylesheet> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:05:01.960

在你的内部试试这个`xsl:element`：

```
 <xsl:variable name="next" select="current()[string($subContext)]" />

  <xsl:apply-templates select="$next">
    <xsl:with-param name="path" select="$subContext"/>
  </xsl:apply-templates>

  <xsl:value-of select="../@test[not($next)]"/> 
```

完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="/">
    <root>
      <xsl:apply-templates select="//failed-assert/@location" />
    </root>
  </xsl:template>

  <xsl:template match="@location">
    <xsl:param name="path" select="." />

    <xsl:variable name="currentContext"
                  select="substring-before(substring-after($path,'/'), '[')"/>
    <xsl:variable name="subContext" select="substring-after($path, ']')"/>
    <xsl:element name="{$currentContext}">
      <xsl:variable name="next" select="current()[string($subContext)]" />

      <xsl:apply-templates select="$next">
        <xsl:with-param name="path" select="$subContext"/>
      </xsl:apply-templates>

      <xsl:value-of select="../@test[not($next)]"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时的结果：

```
<root>
  <Module>
    <Router>
      <Message>@OppositeIpAddress='192,168,1,2'</Message>
    </Router>
  </Module>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:58:44.117

我认为更容易理解的解决方案可能是使用调用模板。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <root>
            <xsl:apply-templates select="//failed-assert[@location]" />
        </root>
    </xsl:template>

    <xsl:template match="failed-assert">
        <xsl:call-template name="location">
            <xsl:with-param name="path" select="substring-after(@location, '/')" />
            <xsl:with-param name="textmessage" select="@test" />
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="location">
        <xsl:param name="path" />
        <xsl:param name ="textmessage" />

        <xsl:variable name="currentContext"
                      select="substring-before($path,'[')"/>

        <xsl:variable name="subContext" select="substring-after($path, '/')"/>
        <xsl:choose>
            <xsl:when test="$currentContext">
                <xsl:element name="{$currentContext}">
                    <xsl:call-template name="location">
                        <xsl:with-param name="path" select="$subContext" />
                        <xsl:with-param name="textmessage" select="$textmessage" />
                    </xsl:call-template>
                </xsl:element>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$textmessage"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

# python - 简化 A* 的速度

> ID：16143838
> 
> 赞同：-3
> 
> 时间：2013-04-22T09:37:27.020
> 
> 标签：python, performance, optimization, a-star, pathing

一段时间以来，我一直在尝试优化我自己的 A* 搜索算法的实现，最后稍微改变了实际的算法部分。

我一直想知道这种方法是否会比常规 A* 更快。为什么或者为什么不？如果是这样，有什么理由在这种略有不同的方法上使用常规 A*？

```
def find_path(a, b):
    seen = set()
    opened = set()

    parent = {}
    distance = {a: path_distance(a, b)}

    while opened:
        node = min(opened, key=lambda x: distance[x])

        if node == end:
            path = []

            while node in parent:
                path.append(node)
                node = parent[node]

            return path

        opened.remove(node)

        for neighbor in node.neighbors:
            if neighbor not in seen:
                seen.add(neighbor)
                opened.add(neighbor)

                parent[neighbor] = node
                distance[neighbor] = pathDistance(neighbor, b)

def path_distance(a, b):
    return sum(y - x for x, y in zip(a.position, b.position)) 
```

我知道使用堆队列，但这不是这个问题的重点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:50:22.787

原件有一个开集和一个闭集。它将检查邻居*是否*在封闭集中，如果该暂定分数较高，则将跳过它。如果它*不在*打开的集合中，或者暂定分数较低，它将使用它作为更好的路径。

相反，您有一个打开的集合和一个可见的集合。您检查它是否*不在*可见集中，在这种情况下，您会将其添加到可见集中并使用它。

这是非常不同的，并且可能会给出不正确的结果。据我所知，您的算法不会产生最短路径，它只会始终使用最后一个邻居作为路径。

# asp.net - 如何在 vb.net 中正确进行简单的数学百分比计算？

> ID：16143839
> 
> 赞同：0
> 
> 时间：2013-04-22T09:37:28.030
> 
> 标签：asp.net, vb.net, string, math, percentage

这个等式可以改写为格式正确的字符串吗？

```
Dim Total = MyNumber / 100 * MyVAT 
```

产生错误：

```
"Input string was not in a correct format" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:48:34.350

试试这个语句

```
 Dim Total = Val(MyNumber) / 100 * Val(MyVAT) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:43:41.683

你真的应该设置`Option Strict`为`on`. 那么这永远不会编译，因为`MyNumber`它是一个字符串（正如你所评论的那样）。

您应该首先确保输入是数字，例如`Decimal.TryParse`：

```
Dim Total As Decimal
Dim num As Decimal 
If Decimal.TryParse(MyNumber, num) Then
    Total = num / 100 * MyVAT
End If 
```

现在您可以使用`Decimal.ToString(format)`它来将其转换为具有所需格式的字符串。例如（假设你想要两位小数）：

```
Dim output As String = Total.ToString("N2") 
```

[**标准数字格式字符串**](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:43:24.053

像下面这样使用

```
Total.ToString("#") 
```

更多详细信息：- [http://msdn.microsoft.com/en-in/library/0c899ak8.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2](http://msdn.microsoft.com/en-in/library/0c899ak8.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

# android - 玻璃推拉窗

> ID：16143841
> 
> 赞同：0
> 
> 时间：2013-04-22T09:37:31.340
> 
> 标签：android, android-layout

![在此处输入图像描述](https://i.stack.imgur.com/Y5AML.png)

当我单击列表视图中的项目时，它会在来自屏幕底部的滑动窗口中显示内容。

我懂了。但问题是滑动窗口后面的内容不可见。

我希望滑动窗口看起来像一个玻璃，显示它的内容以及背景内容。

这张图片向你解释了一切。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:44:26.500

在 Android 中，颜色可以有一个透明度级别，因此您只需使用所需的透明度构建颜色，并将其作为布局的背景。

所以你把它放在你的 color.xml

```
<color name="trans_backg">#AARRGGBB</color> 
```

只是更换：

*   AA => 你想要多少透明度（称为 Alpha）
*   RR => 多少红
*   GG => 多少绿色
*   BB => 多少蓝

请记住，这些是从 00 到 FF 的十六进制值

# python - Raspberry Pi - Python 中的 GPIO 事件

> ID：16143842
> 
> 赞同：22
> 
> 时间：2013-04-22T09:37:31.997
> 
> 标签：python, events, raspberry-pi, motion, gpio

我使用 Raspberry Pi 上的 GPIO 引脚和 PIR 传感器来检测运动。当传感器检测到运动时，我想将软件移动到其他功能上。

目前，为了检测运动，我的程序在等待检测运动时不断循环运行。虽然这目前有效，但对于将来的使用来说，这将是非常低效的，我希望通过将其分配给一个事件来改进这一点。

有什么方法可以将我的 GPIO 输入绑定到程序检测到的事件，而无需手动运行循环。

这是我当前用于检测运动的循环：

```
var = 1
counter = 0
while var == 1:
    if GPIO.input(7):
        counter += 1
        time.sleep(0.5)
    else:
        counter = 0
        time.sleep(1)

    if counter >= 3:
        print "Movement!"
        captureImage()
        time.sleep(20) 
```

计数器和多次检测运动用于减少传感器拾取的误报数量。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-03T15:29:17.980

RPi.GPIO Python 库现在支持**事件**，这在[中断和边缘检测](https://sourceforge.net/p/raspberry-gpio-python/wiki/Inputs/)段落中**进行了说明。**

 **因此，在更新您的 Raspberry Pi`sudo rpi-update`以获得最新版本的库后，您可以将代码更改为：

```
from time import sleep
import RPi.GPIO as GPIO

var=1
counter = 0

GPIO.setmode(GPIO.BOARD)
GPIO.setup(7, GPIO.IN, pull_up_down=GPIO.PUD_DOWN)

def my_callback(channel):
    if var == 1:
        sleep(1.5)  # confirm the movement by waiting 1.5 sec 
        if GPIO.input(7): # and check again the input
            print("Movement!")
            captureImage()

            # stop detection for 20 sec
            GPIO.remove_event_detect(7)
            sleep(20)
            GPIO.add_event_detect(7, GPIO.RISING, callback=my_callback, bouncetime=300)

GPIO.add_event_detect(7, GPIO.RISING, callback=my_callback, bouncetime=300)

# you can continue doing other stuff here
while True:
    pass 
```

我选择了[Threaded 回调](https://sourceforge.net/p/raspberry-gpio-python/wiki/Inputs/)方法，因为我认为您的程序会并行执行一些其他操作来更改`var`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T13:59:27.647

现在 RPi GPIO 库具有内置的中断驱动 GPIO 控制，可以在单独的线程中释放资源。您可能希望阅读以下[http://raspi.tv/2013/how-to-use-interrupts-with-python-on-the-raspberry-pi-and-rpi-gpio-part-3](http://raspi.tv/2013/how-to-use-interrupts-with-python-on-the-raspberry-pi-and-rpi-gpio-part-3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:44:54.753

您可以将 GPIO 代码包装到它自己的线程中，并让程序的其余部分在 GPIO 等待输入时执行其他操作。查看[线程模块](http://docs.python.org/2/library/threading.html)

首先，我将您的代码包装成一个函数

```
def wait_input():
    var=1
    counter = 0
    while var == 1:
        if GPIO.input(7):
            counter += 1
        time.sleep(0.5)
        else:
            counter = 0
            time.sleep(1)
        if counter >= 3:
            print "Movement!"
            captureImage()
            time.sleep(20) 
```

然后在你的主程序中你可以这样

```
input_thread = threading.Thread(target = wait_input)
input_thread.start()
# do something in the meanwhile
input_thread.join() 
```

关于 python 线程的 SO 有很多问题，所以你可能想挖掘它们。请注意，在使用线程时还需要考虑很多事情，尤其是在具有全局解释器锁 (GIL) 的 python 中，它一次只允许一个进程运行。查看可以在 GIL 周围路由的[多处理模块](http://docs.python.org/2/library/multiprocessing.html)也可能是明智的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-03T08:15:23.087

kapcom01 提供了一些很棒的想法，但最好不要在中断中做很多指令。

通常在调用回调时将标志设置为 1，然后在主函数中进行处理。以这种方式，没有释放程序的风险。

像这样的东西：

```
 from time import sleep
     import RPi.GPIO as GPIO

     def init():
         # make all your initialization here
         flag_callback = False
         # add an interrupt on pin number 7 on rising edge
         GPIO.add_event_detect(7, GPIO.RISING, callback=my_callback, bouncetime=300)

     def my_callback():
         # callback = function which call when a signal rising edge on pin 7
         flag_callback = True

     def process_callback():
         # TODO: make process here
         print('something')

     if __name__ == '__main__':
     # your main function here

     # 1- first call init function
     init()

     # 2- looping infinitely 
     while True:
         #3- test if a callback happen
         if flag_callback is True:
             #4- call a particular function
             process_callback()
             #5- reset flagfor next interrupt
             flag_callback = False
    pass 
```**

# telnet - Telnet 错误请求 400

> ID：16143869
> 
> 赞同：8
> 
> 时间：2013-04-22T09:38:45.543
> 
> 标签：telnet

看看下面的帖子：

[如何使用命令提示符远程登录谷歌？](https://stackoverflow.com/questions/13544857/how-to-telnet-google-using-command-prompt)

我尝试过同样的事情，但不断收到错误的请求！（400！）我正在使用 Windows 8 PRO 机器。我只是想尝试使用 Telnet 做一些事情，但只要我不断收到这个 400 错误，我就无法真正取得多大成就！

我正在做的事情如下：

```
o www.google.com 80 (PRESSING ENTER TWICE!!!)
GET / HTTP/1.1 (ENTER)
Host: www.google.com (PRESSING ENTER TWICE!!!) 
```

任何帮助表示赞赏！

![错误的请求！](https://i.stack.imgur.com/Wmb1M.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T17:54:35.100

这个问题可以通过准确输入[Telnet 命令](http://technet.microsoft.com/en-us/library/c.aspx)来解决，所以在需要的地方大写，反之亦然！查看[此](http://www.cs.utexas.edu/~chris/cs326e/current/326eFAQ/hw2FAQ-telnet.html)来源以获取有关如何将 Telnet 设置为*即时 HTTP 客户端*的更多详细信息。消息来源还解释说，一旦您使用 BACKSPACE 重新键入命令，接收该命令的服务器可能会将其解释为

```
<bs> 
```

如果是这样，则将其声明为非法请求！（这就是发生在我身上的事！）

**结论**

如果您让主机和客户端正常通信，您似乎可以正常通信 Backspace 字符！[这里](http://www.columbia.edu/kermit/backspace.html#termtype)有一篇文章在技术层面上解释了更多关于它的信息。为了让它适用于 Windows Telnet 客户端，我不知道怎么做，也不确定它是否可能！为了解决这个问题，我建议使用像[PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)这样的程序，它是一个免费的（MIT 许可的）Win32 Telnet 和 SSH 客户端。PuTTY 客户端中有一个选项可让您更改在 PuTTY 中生成 Backspace 的方式，也就是说，哪个是您的主机可以接受的（如果有的话！）！

请阅读[文档第 4.4.1 节](http://tartarus.org/~simon/putty-snapshots/htmldoc/Chapter4.html#config-keyboard)以“正确”配置此选项（如果所有主机都使用此协议；否则您可能需要阅读[本文](http://www.columbia.edu/kermit/backspace.html#termtype)并以某种方式配置 PuTTY 以被您的主机接受，反之亦然！）！

* * *

此外，在前面的示例中，我使用了 Google，它可能需要其他参数才能使其正常工作，但这可能不是立即获得 200 状态代码的最佳选择！改用 bing.com（目前为我工作！）！

```
o www.bing.com 80   (press ENTER twice!!!)
GET / HTTP/1.1      (press ENTER)
Host: www.bing.com  (press ENTER twice!!!) 
```

# sqlite - OrmLite.Sqlite x86 / x64 和原生库预加载

> ID：16143870
> 
> 赞同：5
> 
> 时间：2013-04-22T09:38:50.850
> 
> 标签：sqlite, servicestack, ormlite-servicestack

我想针对 x86 和 x64 平台使用 .Net 4 服务和 ServiceStack.OrmLite.Sqlite

我已经阅读了本机库预加载（[http://system.data.sqlite.org/index.html/artifact?ci=trunk&filename=Doc/Extra/environment.html](http://system.data.sqlite.org/index.html/artifact?ci=trunk&filename=Doc/Extra/environment.html)），因此可以有一个针对两个平台的项目.

我应该在我的项目中引用哪些包（通过 Nuget）？

1.  ServiceStack.OrmLite.Sqlite32.3.9.43
2.  ServiceStack.OrmLite.Sqlite64.3.9.43
3.  两个都？

这两个包都将相关的 x64 和 x86 SQLite.interop.dll 添加到我的项目中（启用了复制到输出文件夹），但是在 x86 机器上我得到了通常的平台不匹配错误。

ServiceStack.OrmLite 是否支持该场景？

# php - Zend Framework 2 主页

> ID：16143874
> 
> 赞同：0
> 
> 时间：2013-04-22T09:39:11.970
> 
> 标签：php, routing, zend-framework2

我正在尝试 ZF2，我遇到了第一个问题，我下载了 Skeleton Application，并上传到了共享主机，现在如果我尝试在[http://zend.cojocaruvadim.com/](http://zend.cojocaruvadim.com/)上访问它，它就不起作用了。如果我在这里访问它[http://zend.cojocaruvadim.com/index.php/](http://zend.cojocaruvadim.com/index.php/)它可以工作。在控制面板中，我将子域设置为指向`public_html/zen2/public`.

在本地主机上，如果我在没有任何特定配置且没有域指向的情况下尝试`localhost/zend2/public`相同的结构，因为我不关心本地 url 中的单词 public。

如何让它在共享主机上运行，​​或者我应该向主机提供商寻求一些支持？提前致谢。

编辑：问题来自共享主机，谢谢您的输入！

# vba - 使用 VBA 代码，如何在 Excel 2003 中将 Excel 工作表导出为图像？

> ID：16143877
> 
> 赞同：17
> 
> 时间：2013-04-22T09:39:26.553
> 
> 标签：vba, image, excel, export

请建议将 excel 工作表中的数据范围导出为 .jpeg 或 .png 或 .gif 格式的图像的更好方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T09:53:42.083

do you want to try the below code I found on the internet somewhere many moons ago and used.

It uses the Export function of the Chart object along with the CopyPicture method of the Range object.

References:

*   [MSDN - Export method as it applies to the Chart object.](http://msdn.microsoft.com/en-us/library/office/aa195722%28v=office.11%29.aspx) to save the clipboard as an Image
*   [MSDN - CopyPicture method as it applies to the Range object](http://msdn.microsoft.com/en-us/library/office/aa223846(v=office.11).aspx) to copy the range as a picture

    ```
    dim sSheetName as string
    dim oRangeToCopy as range
    Dim oCht As Chart

    sSheetName ="Sheet1" ' worksheet to work on
    set  oRangeToCopy =Range("B2:H8") ' range to be copied

    Worksheets(sSheetName).Range(oRangeToCopy).CopyPicture xlScreen, xlBitmap
    set oCht =charts.add

    with oCht
        .paste
        .Export FileName:="C:\SavedRange.jpg", Filtername:="JPG"
    end with 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-16T12:16:20.653

我尝试以多种方式改进此解决方案。现在生成的图像具有正确的比例。

```
Set sheet = ActiveSheet
output = "D:\SavedRange4.png"

zoom_coef = 100 / sheet.Parent.Windows(1).Zoom
Set area = sheet.Range(sheet.PageSetup.PrintArea)
area.CopyPicture xlPrinter
Set chartobj = sheet.ChartObjects.Add(0, 0, area.Width * zoom_coef, area.Height * zoom_coef)
chartobj.Chart.Paste
chartobj.Chart.Export output, "png"
chartobj.Delete 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-17T15:49:26.013

感谢大家！我稍微修改了 Winand 的代码以将其导出到用户的桌面，无论谁在使用工作表。我将代码归功于我得到这个想法的地方（感谢凯尔）。

```
Sub ExportImage()

Dim sFilePath As String
Dim sView As String

'Captures current window view
sView = ActiveWindow.View

'Sets the current view to normal so there are no "Page X" overlays on the image
ActiveWindow.View = xlNormalView

'Temporarily disable screen updating
Application.ScreenUpdating = False

Set Sheet = ActiveSheet

'Set the file path to export the image to the user's desktop
'I have to give credit to Kyle for this solution, found it here:
'http://stackoverflow.com/questions/17551238/vba-how-to-save-excel-workbook-to-desktop-regardless-of-user
sFilePath = CreateObject("WScript.Shell").specialfolders("Desktop") & "\" & ActiveSheet.Name & ".png"

'Export print area as correctly scaled PNG image, courtasy of Winand
zoom_coef = 100 / Sheet.Parent.Windows(1).Zoom
Set area = Sheet.Range(Sheet.PageSetup.PrintArea)
area.CopyPicture xlPrinter
Set chartobj = Sheet.ChartObjects.Add(0, 0, area.Width * zoom_coef, area.Height * zoom_coef)
chartobj.Chart.Paste
chartobj.Chart.Export sFilePath, "png"
chartobj.Delete

'Returns to the previous view
ActiveWindow.View = sView

'Re-enables screen updating
Application.ScreenUpdating = True

'Tells the user where the image was saved
MsgBox ("Export completed! The file can be found here:" & Chr(10) & Chr(10) & sFilePath)

End Sub 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-16T04:29:03.967

Winand，质量对我来说也是一个问题，所以我这样做了：

```
For Each ws In ActiveWorkbook.Worksheets
    If ws.PageSetup.PrintArea <> "" Then
        'Reverse the effects of page zoom on the exported image
        zoom_coef = 100 / ws.Parent.Windows(1).Zoom
        areas = Split(ws.PageSetup.PrintArea, ",")
        areaNo = 0
        For Each a In areas
            Set area = ws.Range(a)
            ' Change xlPrinter to xlScreen to see zooming white space
            area.CopyPicture Appearance:=xlPrinter, Format:=xlPicture
            Set chartobj = ws.ChartObjects.Add(0, 0, area.Width * zoom_coef, area.Height * zoom_coef)
            chartobj.Chart.Paste
            'scale the image before export
            ws.Shapes(chartobj.Index).ScaleHeight 3, msoFalse, msoScaleFromTopLeft
            ws.Shapes(chartobj.Index).ScaleWidth 3, msoFalse, msoScaleFromTopLeft
            chartobj.Chart.Export ws.Name & "-" & areaNo & ".png", "png"
            chartobj.delete
            areaNo = areaNo + 1
        Next
    End If
Next 
```

见这里：[https ://robp30.wordpress.com/2012/01/11/improving-the-quality-of-excel-image-export/](https://robp30.wordpress.com/2012/01/11/improving-the-quality-of-excel-image-export/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-09T14:30:12.873

如果您向 Ryan Bradley 代码添加选择并保存到工作簿路径，这将更具弹性：

```
 Sub ExportImage()

Dim sheet, zoom_coef, area, chartobj
Dim sFilePath As String
Dim sView As String

'Captures current window view
sView = ActiveWindow.View

'Sets the current view to normal so there are no "Page X" overlays on the image
ActiveWindow.View = xlNormalView

'Temporarily disable screen updating
Application.ScreenUpdating = False

Set sheet = ActiveSheet

'Set the file path to export the image to the user's desktop
'I have to give credit to Kyle for this solution, found it here:
'http://stackoverflow.com/questions/17551238/vba-how-to-save-excel-workbook-to-desktop-regardless-of-user
'sFilePath = CreateObject("WScript.Shell").specialfolders("Desktop") & "\" & ActiveSheet.Name & ".png"

'##################
'Łukasz : Save to  workbook directory
'Asking for filename insted of ActiveSheet.Name is also good idea, without file extension
dim FileID as string
FileID=inputbox("Type a file name","Filename...?",ActiveSheet.Name)
sFilePath = ThisWorkbook.Path & "\" & FileID & ".png"

'Łukasz:Change code to use Selection
'Simply select what you want to export and run the macro
'ActiveCell should be: Top Left 
'it means select from top left corner to right bottom corner

Dim r As Long, c As Integer, ar As Long, ac As Integer

    r = Selection.rows.Count
    c = Selection.Columns.Count
    ar = ActiveCell.Row
    ac = ActiveCell.Column
    ActiveSheet.PageSetup.PrintArea = Range(Cells(ar, ac), Cells(ar, ac)).Resize(r, c).Address

'Export print area as correctly scaled PNG image, courtasy of Winand
'Łukasz: zoom_coef can be constant = 0 to 5 can work too, but save is 0 to 4
zoom_coef = 5 '100 / sheet.Parent.Windows(1).Zoom
'#############
Set area = sheet.Range(sheet.PageSetup.PrintArea)
area.CopyPicture xlPrinter  'xlBitmap '
Set chartobj = sheet.ChartObjects.Add(0, 0, area.Width * zoom_coef, area.Height * zoom_coef)
chartobj.Chart.Paste
chartobj.Chart.Export sFilePath, "png"
chartobj.Delete

'Returns to the previous view
ActiveWindow.View = sView

'Re-enables screen updating
Application.ScreenUpdating = True

'Tells the user where the image was saved
MsgBox ("Export completed! The file can be found here: :" & Chr(10) & Chr(10) & sFilePath)
'Close
End Sub 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-18T04:47:49.930

没有图表的解决方案

```
Function SelectionToPicture(nome)

'save location ( change if you want )
FName = CreateObject("WScript.Shell").SpecialFolders("Desktop") & "\" & nome & ".jpg"

'copy selection and get size
Selection.CopyPicture xlScreen, xlBitmap
w = Selection.Width
h = Selection.Height

With ThisWorkbook.ActiveSheet

    .Activate

    Dim chtObj As ChartObject
    Set chtObj = .ChartObjects.Add(100, 30, 400, 250)
    chtObj.Name = "TemporaryPictureChart"

    'resize obj to picture size
    chtObj.Width = w
    chtObj.Height = h

    ActiveSheet.ChartObjects("TemporaryPictureChart").Activate
    ActiveChart.Paste

    ActiveChart.Export FileName:=FName, FilterName:="jpg"

    chtObj.Delete

End With
End Function 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-14T17:52:33.170

根据菲利普提供的链接，我得到了这个工作

```
Worksheets("Final Analysis Sheet").Range("A4:G112").CopyPicture xlScreen, xlBitmap

    Application.DisplayAlerts = False
    Set oCht = Charts.Add
    With oCht
        .Paste
        .Export Filename:="C:\FTPDailycheck\TodaysImages\SavedRange.jpg", Filtername:="JPG"
        .Delete
    End With 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-04T16:33:25.417

有一种更直接的方法可以将范围图像导出到文件，而无需创建临时图表。它利用 PowerShell 将剪贴板保存为 .png 文件。

使用 vba CopyPicture 命令将范围作为图像复制到剪贴板很简单，如其他一些答案所示。

保存剪贴板的 PowerShell 脚本只需要两行，正如 thom schumacher 在[Save Image from clipboard using PowerShell](https://stackoverflow.com/questions/55215482/save-image-from-clipboard-using-powershell)中所指出的那样。

VBA 可以启动 PowerShell 脚本并等待它完成，正如 Asam 在[Wait for shell command to complete](https://stackoverflow.com/questions/15951837/wait-for-shell-command-to-complete)中所述。

将这些想法放在一起，我们得到以下例程。我仅在 Windows 10 下使用 Office 2010 版本的 Excel 对此进行了测试。请注意，有一个内部常量 AidDebugging 可以设置为 True 以提供有关例程执行的额外反馈。

```
Option Explicit

' This routine copies the bitmap image of a range of cells to a .png file.
' Input arguments:
'    RangeRef -- the range to be copied. This must be passed as a range object, not as the name
'                or address of the range.
'    Destination -- the name (including path if necessary) of the file to be created, ending in
'                the extension ".png". It will be overwritten without warning if it exists.
'    TempFile -- the name (including path if necessary) of a temporary script file which will be
'                created and destroyed. If this is not supplied, file "RangeToPNG.ps1" will be
'                created in the default folder. If AidDebugging is set to True, then this file
'                will not be deleted, so it can be inspected for debugging.
' If the PowerShell script file cannot be launched, then this routine will display an error message.
' However, if the script can be launched but cannot create the resulting file, this script cannot
' detect that. To diagnose the problem, change AidDebugging from False to True and inspect the
' PowerShell output, which will remain in view until you close its window.

Public Sub RangeToPNG(RangeRef As Range, Destination As String, _
                      Optional TempFile As String = "RangeToPNG.ps1")
Dim WSH As Object
Dim PSCommand As String
Dim WindowStyle As Integer
Dim ErrorCode As Integer
Const WaitOnReturn = True
Const AidDebugging = False ' provide extra feedback about this routine's execution
  ' Create a little PowerShell script to save the clipboard as a .png file
  ' The script is based on a version found on September 13, 2020 at
  '    https://stackoverflow.com/questions/55215482/save-image-from-clipboard-using-powershell
   Open TempFile For Output As #1
   If (AidDebugging) Then ' output some extra feedback
      Print #1, "Set-PSDebug -Trace 1" ' optional -- aids debugging
   End If
   Print #1, "$img = get-clipboard -format image"
   Print #1, "$img.save(""" & Destination & """)"
   If (AidDebugging) Then ' leave the PowerShell execution record on the screen for review
      Print #1, "Read-Host -Prompt ""Press <Enter> to continue"" "
      WindowStyle = 1 ' display window to aid debugging
   Else
      WindowStyle = 0 ' hide window
   End If
   Close #1
  ' Copy the desired range of cells to the clipboard as a bitmap image
   RangeRef.CopyPicture xlScreen, xlBitmap
  ' Execute the PowerShell script
   PSCommand = "POWERSHELL.exe -ExecutionPolicy Bypass -file """ & TempFile & """ "
   Set WSH = VBA.CreateObject("WScript.Shell")
   ErrorCode = WSH.Run(PSCommand, WindowStyle, WaitOnReturn)
   If (ErrorCode <> 0) Then
      MsgBox "The attempt to run a PowerShell script to save a range " & _
             "as a .png file failed -- error code " & ErrorCode
   End If
   If (Not AidDebugging) Then
     ' Delete the script file, unless it might be useful for debugging
      Kill TempFile
   End If
End Sub

' Here's an example which tests the routine above.
Sub Test()
   RangeToPNG Worksheets("Sheet1").Range("A1:F13"), "E:\Temp\ExportTest.png"
End Sub 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-28T10:42:05.150

这给了我最可靠的结果：

```
Sub RangeToPicture()
  Dim FileName As String: FileName = "C:\file.bmp"
  Dim rPrt As Range: Set rPrt = ThisWorkbook.Sheets("Sheet1").Range("A1:C6")
  'Add a Zoom to increase the resolution of the image.          
  ActiveWindow.Zoom = 300

  Dim chtObj As ChartObject
  rPrt.CopyPicture xlScreen, xlBitmap
  Set chtObj = ActiveSheet.ChartObjects.Add(1, 1, rPrt.Width, rPrt.Height)
  chtObj.Activate
  ActiveChart.Paste
  ActiveChart.Export FileName
  chtObj.Delete
  'Reset Zoom to innitial zoom of the image.          
  ActiveWindow.Zoom = 100
End Sub 
```

# c# - 如何在 C# 中声明编译时常量函数

> ID：16143880
> 
> 赞同：8
> 
> 时间：2013-04-22T09:39:35.283
> 
> 标签：c#, compilation, constants, constexpr

在 C++ 中，我们可以使用宏或 constexpr（正如 C++11 所说）。我们可以在 C# 中做什么？

有关上下文，请参阅“无法声明...”评论：

```
static class Constant
{
    // we must ensure this is compile time const, have to calculate it from ground...
    public const int SIZEOF_TEXUTRE_RGBA_U8C4_640x480 = 4 * sizeof(byte) * 640 * 480;

    // Cannot declare compile time constant as following in C#
    //public const int SIZEOF_TEXUTRE_RGBA_U8C4_640x480_2 = 4 * PixelType._8UC4.PixelSize() * 640 * 480;
}

public static class PixelTypeMethods
{
    public static /*constexpr*/ int PixelSize(this PixelType type)
    {
        int value = (int)type;
        int unit_size = value & 0xFF;
        int unit_count = (value & 0xFF00) >> 8;
        return unit_count * unit_size;
    }
}

[Flags]
public enum PixelType
{
    RGBA_8UC4 = RGBA | _8U | _C4,

    /////////////////////////
    RGBA = 1 << 16,

    /////////////////////////
    _8UC4 = _8U | _C4,

    /////////////////////////
    _C4 = 4  << 8,

    /////////////////////////
    _8U = sizeof(byte)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T09:41:53.633

要声明一个常量 ( `const`)，分配的值需要是一个编译时常量。自动调用方法使其不是编译时间常数。

另一种方法是使用`static readonly`：

```
public static readonly int SIZEOF_TEXUTRE_RGBA_U8C4_640x480_2 =
    4 * PixelType._8UC4.PixelSize() * 640 * 480; 
```

# wpf - 创建自定义选择器（多开关）/ WPF C#

> ID：16143883
> 
> 赞同：2
> 
> 时间：2013-04-22T09:39:46.390
> 
> 标签：wpf, controls, selector

我想创建看起来像[这样](http://s6.hostingkartinok.com/uploads/images/2013/04/bf89d3dfc7e79338a6bf8457de612b86.png)的控件。所以我选择从 Selector 中派生出来，并将项目放置在 Canvas 上。这是一个问题：我应该如何对物品的放置进行编码？（也许为包含坐标的项目创建包装类，或者总是从 Canvas 接收坐标？）

PS 或者您可能只是将我发送到已经实施的类似控制（不幸的是，我没有找到任何）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T11:17:50.003

开始看这个[`example`](http://alala666888.wordpress.com/2010/05/31/a-knob-slider-control)。在此示例中包含 ControlTemplate 为`Slider`.

例子：

**`XAML`**

```
<Window x:Class="SliderControl.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:SliderControl"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <my:ValueAngleConverter x:Key="valueAngleConverter"/>
        <my:ValueTextConverter x:Key="valueTextConverter"/>
    </Window.Resources>

    <Grid>
        <Slider Name="knob">
            <Slider.Template>
                <ControlTemplate>
                    <Viewbox>
                        <Canvas Width="300" Height="300" Margin="5">
                            <Ellipse Fill="LightBlue" Width="300" Height="300" Canvas.Left="0" Canvas.Top="0"
                                     Stroke="Black" StrokeThickness="10" MouseLeftButtonUp="Ellipse_MouseLeftButtonUp"                                     
                                     MouseMove="Ellipse_MouseMove" />

                            <Ellipse Fill="Black" Width="60" Height="60" Canvas.Left="120" Canvas.Top="120" />
                                <Canvas>
                                    <Line Stroke="Red" StrokeThickness="5" 
                                          X1="150" Y1="150" X2="150" Y2="10"
                                          MouseLeftButtonUp="Ellipse_MouseLeftButtonUp" />

                                    <Ellipse Fill="Red" Width="20" Height="20" 
                                             Canvas.Left="140" Canvas.Top="0" 
                                             MouseLeftButtonDown="Ellipse_MouseLeftButtonDown"
                                             MouseLeftButtonUp="Ellipse_MouseLeftButtonUp">
                                        <Ellipse.ToolTip>
                                            <ToolTip>
                                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Value" Converter="{StaticResource valueTextConverter}"/>
                                        </ToolTip>
                                    </Ellipse.ToolTip>
                                </Ellipse>

                                <Canvas.RenderTransform>
                                    <RotateTransform CenterX="150" CenterY="150">
                                        <RotateTransform.Angle>
                                            <MultiBinding Converter="{StaticResource valueAngleConverter}">
                                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Value"/>
                                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Minimum"/>
                                                <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="Maximum"/>
                                            </MultiBinding>
                                        </RotateTransform.Angle>
                                    </RotateTransform>
                                </Canvas.RenderTransform>
                            </Canvas>
                        </Canvas>
                    </Viewbox>
                </ControlTemplate>
            </Slider.Template>
        </Slider>
    </Grid>
</Window> 
```

**`Code-behind`**

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private bool _isPressed = false;
    private Canvas _templateCanvas = null;

    private void Ellipse_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        //Enable moving mouse to change the value.
        _isPressed = true;
    }

    private void Ellipse_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        //Disable moving mouse to change the value.
        _isPressed = false;
    }

    private void Ellipse_MouseMove(object sender, MouseEventArgs e)
    {
        if (_isPressed)
        {
            //Find the parent canvas.
            if (_templateCanvas == null)
            {
                _templateCanvas = MyHelper.FindParent<Canvas>(e.Source as Ellipse);
                if (_templateCanvas == null) return;
            }
            //Canculate the current rotation angle and set the value.
            const double RADIUS = 150;
            Point newPos = e.GetPosition(_templateCanvas);
            double angle = MyHelper.GetAngleR(newPos, RADIUS);
            knob.Value = (knob.Maximum - knob.Minimum) * angle / (2 * Math.PI);
        }
    }
}

//The converter used to convert the value to the rotation angle.
public class ValueAngleConverter : IMultiValueConverter
{
    #region IMultiValueConverter Members

    public object Convert(object[] values, Type targetType, object parameter, 
                  System.Globalization.CultureInfo culture)
    {
        double value = (double)values[0];
        double minimum = (double)values[1];
        double maximum = (double)values[2];

        return MyHelper.GetAngle(value, maximum, minimum);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, 
          System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
}

//Convert the value to text.
public class ValueTextConverter : IValueConverter
{

    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, 
              System.Globalization.CultureInfo culture)
    {
        double v = (double)value;
        return String.Format("{0:F2}", v);
    }

    public object ConvertBack(object value, Type targetType, object parameter, 
        System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
}

public static class MyHelper
{
    //Get the parent of an item.
    public static T FindParent<T>(FrameworkElement current)
      where T : FrameworkElement
    {
        do
        {
            current = VisualTreeHelper.GetParent(current) as FrameworkElement;
            if (current is T)
            {
                return (T)current;
            }
        }
        while (current != null);
        return null;
    }

    //Get the rotation angle from the value
    public static double GetAngle(double value, double maximum, double minimum)
    {
        double current = (value / (maximum - minimum)) * 360;
        if (current == 360)
            current = 359.999;

        return current;
    }

    //Get the rotation angle from the position of the mouse
    public static double GetAngleR(Point pos, double radius)
    {
        //Calculate out the distance(r) between the center and the position
        Point center = new Point(radius, radius);
        double xDiff = center.X - pos.X;
        double yDiff = center.Y - pos.Y;
        double r = Math.Sqrt(xDiff * xDiff + yDiff * yDiff);

        //Calculate the angle
        double angle = Math.Acos((center.Y - pos.Y) / r);
        Console.WriteLine("r:{0},y:{1},angle:{2}.", r, pos.Y, angle);
        if (pos.X < radius)
            angle = 2 * Math.PI - angle;            
        if (Double.IsNaN(angle))
            return 0.0;
        else
            return angle;
    }
} 
```

样品屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/qKjZr.png)

# razor - Kendo ui Grid 显示 json 而不是网格 Asp .net razor

> ID：16143886
> 
> 赞同：2
> 
> 时间：2013-04-22T09:39:57.770
> 
> 标签：razor, asp.net-mvc-4, views, kendo-ui

我试图初始化我的剑道 ui 网格。我可以使用 View 对象填充它，但是当我尝试以 Json 格式（即移动到下一页时）时，我得到一个显示 json 结果而不是我的视图的屏幕。

这是控制器代码：

```
 public class CampaignsController : Controller
    {
        //
        // GET: /Campaigns/

        [HttpGet]
        public ActionResult Index()
        {
            return View(GetAllCampaigns());
        }

        public ActionResult Campaigns_Read([DataSourceRequest] DataSourceRequest request)
        {
           DataSourceResult result = GetAllCampaigns().ToDataSourceResult(request);
           return Json(result, JsonRequestBehavior.AllowGet);        
        }

        private static IEnumerable<NH_Campaign> GetAllCampaigns()
        {
            List<NH_Campaign> result = null;
            if (MBPDataAccess.Instance.GetAll(out result))
            {
                return result;
            }
            return new List<NH_Campaign>();
        } 
```

而cshtml是：

```
@model IEnumerable<MBP.NH_Campaign>

<h2>View1</h2>

@(Html.Kendo().Grid(Model)
      .Name("CGrid")
      .Columns(columns =>
          {
              columns.Bound(p => p.CampaignID).Title("Id");
              columns.Bound(p => p.CampaignName).Title("Name");
              columns.Bound(p => p.ClickUrlC2C_OFF).Title("Click URL");
              columns.Bound(p => p.PlatformID).Title("Platform ID");
          })
      //.Groupable()
      .Pageable()
      //.Sortable()
      //.Filterable()
      .DataSource(dataSource => dataSource.Ajax().PageSize(2).Read(read => read.Action("Campaigns_Read", "Campaigns"))
      )); 
```

加载页面时调用的`Index`操作效果很好，但是当我尝试移至下一页时`Camapigns_Read`调用了该操作，但我得到了一个带有 json 结果的空白页面。我在这里想念什么？

编辑：我想在服务器端执行分页

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:52:57.690

知道了 ，

问题是必须首先初始化视图，使用相同的控制器名称-该死的命名约定:)，我的解决方案是

```
 public ActionResult Index()
        {
            return View();
        }

        [HttpPost]    
        public ActionResult Index([DataSourceRequest] DataSourceRequest request)
        {
           DataSourceResult result = GetAllCampaigns().ToDataSourceResult(request);
           return Json(result, JsonRequestBehavior.AllowGet);        
        } 
```

# flash - 使用 Flash/Actionscript 的线性世界时钟

> ID：16143891
> 
> 赞同：0
> 
> 时间：2013-04-22T09:40:15.590
> 
> 标签：flash, actionscript, clock

我正在尝试创建一个线性时钟，该时钟从用户计算机获取时间并将该时间显示在世界地图上，该地图分为 24 小时，并在电影的底部标出这些时间。红线表示当前时间（在观众时区）。同样理想的是，如果可以以这样的方式划分每个小时，以便地图不只是从 1 小时跳到下一个小时，也许每个小时都分为 12 个，以每小时增加 5 分钟。

地图上的灰色/蓝色条将代表金融市场的开盘和收盘，我将使用遮罩层创建。

我对actionscript有点了解，但我绝不是专家。我想我能想到的最简单的方法是创建一个从“时钟”一端到另一端的循环补间，然后使用 actionscript 获取用户时间并根据该时间转到相应的帧。如果有人知道更简单的方法，我会非常渴望听到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:09:50.413

好吧，这是一项有趣的任务，可以按照您建议的方式完成，但是我会纯粹在 as3 中以编程方式进行补间，因为对它的控制更多。在这两种情况下，请注意每个子午线的世界时区不是线性的 - 因此跨越同一子午线的所有地方的时间变化并不相等，存在一些异常，实际上其中有很多，这会使您的实施复杂化时钟，但可以做到。使用各自的时区静态实现您的市场可以节省一些编码时间。..但是如果你想要一些更通用的解决方案来进一步使用，你的时钟应该更聪明，并且需要更多的糖，显然:)

# jquery - Firefox 中奇怪的 jQuery toggle() 中断

> ID：16143892
> 
> 赞同：0
> 
> 时间：2013-04-22T09:40:15.980
> 
> 标签：jquery, firefox

我之前从未见过这个问题，我已经搜索了所有我能想到的术语（切换问题 FF、切换 jQuery 自身工作等）。这个网站的最初开发者已经离开，我刚刚在它推出之前接管了它的末端。用于此的 HTML/WP PHP 是：

```
<div class="unterzo">
<h2 class="buttone">AUTO-CALLS</h2>
<div class="toggle">
EDIT:
<form name="publication_dropdown" method="get" action="">
    <select name="dropdown" onchange="window.location.href=this.form.dropdown.options[this.form.dropdown.selectedIndex].value">
        <option value="">Select file</option>
        <option value="http://example.com/example.html">BAC 18_APR_2013</option>
    </select>
</form>
</div>
</div> 
```

它的 jQuery 是

```
<script type="text/javascript">
  jQuery(document).ready(function(){
     jQuery(".unterzo").hover(function(){
         jQuery(this).children('.toggle').toggle(400); //Wordpress only works with full jQuery, not $.
     });
  });
</script> 
```

真的很基本的东西。

这在 Chrome/Safari 中运行良好（尚未检查 IE ......）。在 Firefox（Mac 和 Windows 的 V 20.0）中，当您将鼠标悬停在 div 上时，它会正常打开。当您单击下拉菜单时，这很好，但如果您尝试选择其中一个下拉选项，则 div 会自行开始反复打开和关闭。Firebug 的控制台没有错误，因此很难调试。我制作了手头问题的视频屏幕截图（见下文）。

[http://www.youtube.com/watch?v=7Vxd7FH6bQY](http://www.youtube.com/watch?v=7Vxd7FH6bQY)

我想知道，以前有人遇到过这个问题吗？任何想法是什么原因造成的？它可以修复吗？

# c - 使用 http post 在 C 中进行套接字编程

> ID：16143895
> 
> 赞同：2
> 
> 时间：2013-04-22T09:40:20.683
> 
> 标签：c, sockets, http-post

想在 windows7 中使用 c 进行客户端-服务器编程，它应该使用 http POST 方法将字符串发送到服务器。POST 方法中的参数应包括 ip-address 等：

我从**[http://souptonuts.sourceforge.net/code/http_post.c.html](http://souptonuts.sourceforge.net/code/http_post.c.html)**获得了这段代码，并将其更改为在 Windows 上运行它，但仍然出现 1 个错误：

```
#ifdef WIN32
  #include <winsock2.h>
  #include <ws2tcpip.h>
  #include <windows.h>
#else
  #include <sys/types.h>
  #include <sys/socket.h>
  #include <netinet/in.h>
  #include <arpa/inet.h>
  #include <unistd.h>
  #include <sys/wait.h>
  #include <netdb.h>
  #include <assert.h>
#endif

#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <signal.h>
#include <ctype.h>

#define SA      struct sockaddr
#define MAXLINE 4096
#define MAXSUB  200

#define LISTENQ 1024

extern int h_errno;

ssize_t process_http(int sockfd, char *host, char *page, char *poststr)
{
    char sendline[MAXLINE + 1], recvline[MAXLINE + 1];
    ssize_t n;
    snprintf(sendline, MAXSUB,
         "POST %s HTTP/1.0\r\n"
         "Host: %s\r\n"
         "Content-type: application/x-www-form-urlencoded\r\n"
         "Content-length: %d\r\n\r\n"
         "%s", page, host, strlen(poststr), poststr);

    write(sockfd, sendline, strlen(sendline));
    while ((n = read(sockfd, recvline, MAXLINE)) > 0) {
        recvline[n] = '\0';
        printf("%s", recvline);
    }
    return n;

}
int main(void)
{
    int sockfd;
    struct sockaddr_in servaddr;

    char **pptr;
    //********** You can change. Puy any values here *******
    char *hname = "souptonuts.sourceforge.net";
    char *page = "/chirico/test.php";
    char *poststr = "mode=login&user=test&password=test\r\n";
    //*******************************************************

    char str[50];
    struct hostent *hptr;
    if ((hptr = gethostbyname(hname)) == NULL) {
        fprintf(stderr, " gethostbyname error for host: %s: %s",
            hname, hstrerror(h_errno));
        exit(1);
    }
    printf("hostname: %s\n", hptr->h_name);
    if (hptr->h_addrtype == AF_INET
        && (pptr = hptr->h_addr_list) != NULL) {
        printf("address: %s\n",
               inet_ntop(hptr->h_addrtype, *pptr, str,
                 sizeof(str)));
    } else {
        fprintf(stderr, "Error call inet_ntop \n");
    }

    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    // bzero(&servaddr, sizeof(servaddr));
    memset(&servaddr, 0, sizeof(servaddr));
    servaddr.sin_family = AF_INET;
    servaddr.sin_port = htons(80);
    inet_pton(AF_INET, str, &servaddr.sin_addr);

    connect(sockfd, (SA *) & servaddr, sizeof(servaddr));
    process_http(sockfd, hname, page, poststr);
    close(sockfd);
    exit(0);

} 
```

MinGW 编译器出现的错误是：

```
httppost.c:33:12: error: conflicting types for 'WSAGetLastError'
In file included from httppost.c:5:0:
c:\mingw\bin\../lib/gcc/mingw32/4.7.2/../../../../include/winsock2.h:594:32: n
e: previous declaration of 'WSAGetLastError' was here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:45:11.737

您拥有的代码位于基于 linux 的系统下，但不幸的是，在 MinGW (Windows) 中，标识符`h_errno`是之前使用的。

问题是这条线

```
extern int h_errno; 
```

它是之前在 windows 头文件中定义的，那么你不能使用它：

```
#define h_errno WSAGetLastError() 
```

只需使用另一个标识符而不是`h_errno`，甚至只是删除该行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:38:31.327

也许你应该试试 wininet 库。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383630(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383630(v=vs.85).aspx)

# python - 如何从目录中导入其他 python 代码？

> ID：16143896
> 
> 赞同：1
> 
> 时间：2013-04-22T09:40:28.497
> 
> 标签：python

我对python很陌生，我有一个这样的目录结构：

```
root
--child
-----config.py
example.py 
```

在`example.py`我刚刚尝试过：

```
import child 
```

但这似乎不起作用。

我在哪里犯错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:42:22.757

如果要通过导入`config.py` 进行导入`child` ，则需要定义`child` 为包。

为此，您需要`__init__.py`在目录中创建一个文件`child`。

检查这个关于[包](http://docs.python.org/2/tutorial/modules.html#packages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:44:17.500

目录中有`__init__.py`文件`root/child/`吗？创建此文件后，您应该能够执行以下操作：

```
import child.config 
```

或者

```
from child import config 
```

您还可以像这样从子目录导入多个模块：

```
from child import first, second, third 
```

[在此处](http://docs.python.org/3/tutorial/modules.html#packages)阅读有关模块和包的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:50:40.047

你的目录应该有**init** .py 以便 python 理解它是一个包。所以目录结构就像

```
root
     __init__.py
     child
         __init__.py
         config.py

example.py
import root.child 
```

`root.child`请注意，您不应该导入`child`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:51:05.557

`__init__.py`使用 .在同一目录中创建一个空文件`config.py`。这是导入文件（如包）所必需的。

然后就可以导入了。

# angularjs - 微风js在创建新实体时获取元数据

> ID：16143900
> 
> 赞同：0
> 
> 时间：2013-04-22T09:40:48.593
> 
> 标签：angularjs, metadata, breeze

当我调用以下代码时：

```
function createMandat (initialValues) {
        return manager.createEntity('Mandate');
} 
```

它失败是因为“授权”类型未知。我理解这一点，因为当我调用此函数时，我还没有获取该类型的任何实体。

所以我的问题是，如果 metadataStore 不知道类型，我如何强制往返服务器以获取此类型的元数据？我的代码中这样做的最佳位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:17:42.177

您可以调用*manager.fetchMetadata*，然后在 promise 解决后执行您的*createEntity调用。*

```
 manager.fetchMetadata().then(function() {
    var newMandate = manager.createEntity("Mandate");
    ...
 }); 
```

如果您先执行查询，则不需要执行此操作，因为如果在执行查询之前无法找到元数据，则查询执行会隐式执行 fetchMetadata。因此，以下内容也将起作用。

```
manager.executeQuery(myQuery).then(function(data) {
    results = data.results;
    var newMandate = manager.createEntity("Mandate");
    ...
 }); 
```

# android - 如何等待应用程序直到 countDownTimer 完成

> ID：16143901
> 
> 赞同：0
> 
> 时间：2013-04-22T09:40:50.437
> 
> 标签：android, countdown

类似的查询：[等到所有线程在java中完成它们的工作](https://stackoverflow.com/questions/7939257/wait-until-all-threads-finish-their-work-in-java)

您好，我正在开发包含某种倒数计时器的 android 应用程序。我的问题是，我有多个倒计时计时器，它们设置 TextView 的文本并且必须单独工作（第一个倒计时计时器必须等到第二个计时器完成等）

见代码：

**MyCountDownTimer.java**

```
public class MyCountdownTimer extends CountDownTimer {
TextView tv;

    // default constructor
    public MyCountdownTimer (long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    // constructor
    public MyCountdownTimer(int hours, int mins, int secs,
    long countDownInterval, TextView tv) {
        super(3600000 * hours + 60000 * mins + secs * 1000, countDownInterval);
        this.tv = tv;
            // all other settings
    }   

    // when finished, set text of textview to done
    @Override
    public void onFinish() {
        tv.setText("done!");
    }

    // when working periodically update text of text view to value of time left
    @Override
    public void onTick(long millisUntilFinished) {
tv.setText(/*function setting text of TextView based on time left*/);
    }
} 
```

**定时器.java**

```
public class Timer extends Fragment {
Button bStart;
Button bStop;
TextView tvShowTime;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    return inflater.inflate(R.layout.timer, container, false);
}

public void onStart() {
    super.onStart();
    bStart = (Button) getView().findViewById(R.id.bTimerStart);
    bStop = (Button) getView().findViewById(R.id.bTimerStop);
    tvShowTime = (TextView) getView().findViewById(R.id.showTime);
    // setting on button start click
    bStart.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            timerStart();
        }
    });

    // setting on button stop click
    bStop.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            timerStop();
        }
    });
}
    private void timerStart() {
        bStart.setClickable(false);
        int repeat = 2;
        int hour, mins, secs;
        for (int i = 0; i < 2 * repeat; i++) {
            if (i % 2 == 0) {
                //  setting working count down timer values
                mins = 1;

            } else {
                // setting resting count down timer values  
                secs = 30;
                    }
            timerCount = new MyCountdownTimer(hours, mins, secs, REFRESH_RATE,
            tvShowTime);
            timerCount.start();
            //////////////////////////////////////////////////
            // HERE I WANT TO WAIT UNTIL COUNTDOWN IS DONE  //
            //   ATM SECOND, THIRD AND FOURTH COUNT DOWN    //
            //           TIMER IS STARTED                   //
            //////////////////////////////////////////////////
        }
} 
```

**- 编辑 -**

最后我做了 2 个 CountDownTimers，第一个调用 onFinish() 第二个，第二个调用第一个，直到 repeat = 0; 最后，这对我来说是最好的解决方案。无论如何感谢您的帮助，@Triode 的回答对我帮助很大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:00:42.447

开始你`SECOND, THIRD AND FOURTH COUNT DOWN TIMER`的`onFinish()``MyCountdownTimer`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T17:36:34.940

我认为您必须放下**timerStop()**方法实现并且不要试图隐藏它，您需要答案但您不希望其他人受益：s

# java - Guice 多数据库自动切换

> ID：16143904
> 
> 赞同：1
> 
> 时间：2013-04-22T09:40:57.187
> 
> 标签：java, guice

我有三个数据库共配置

1.  用于单元测试环境的本地数据库
2.  开发环境的测试数据库
3.  产品环境在线数据库

如何根据环境自动注入不同的数据库属性？

> 通过将 xml 与 spring 一起使用，我可以使用 maven 配置文件和资源过滤器功能来完成这项工作。

guice 的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:44:43.320

在最简单的情况下，您可以`binder.bindConstant()`像`Module`这样使用：

```
bindConstant().annotatedWith(Names.named("user.name")).to(System.getProperty("user.name")); 
```

你像这样使用它：

```
@Inject @Named("user.name")
private String userName; 
```

如何在程序开始时设置系统属性取决于您。

另一种但类似的方法是实用方法`cNames.bindProperties(Binder, Map<String, String>)`，您可以一次性设置任意属性。

# ruby-on-rails - 跟踪累积的终生销售数字的最有效方法是什么？

> ID：16143905
> 
> 赞同：0
> 
> 时间：2013-04-22T09:41:04.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, counter-cache

所以我有一个`Vendor`模型，一个`Sale`模型。每当通过供应商下订单时，都会在我的销售模型中创建一个条目。

在我的`vendor`模型上，我有 3 个缓存列。`sales_today`, `sales_this_week`, 和`sales_lifetime`.

对于前两个，我计算如下：

```
 def update_sales_today
    today = Date.today.beginning_of_day
    sales_today = Sale.where("created_at >= ?", today).find_all_by_vendor_id(self.id)
    self.sales_today = 0
    sales_today.each do |s|
      self.sales_today = self.sales_today + s.amount
    end 
    self.save    
  end 
```

因此，每次访问该值时都会重置该值，并根据最新记录重新计算该值。

每周一次是相似的，但我使用一系列日期而不是今天。

但是......我不太确定如何处理终身数据。

我不想清除我的价值，并且`Sale.amount`每次更新此记录时都必须汇总我的供应商的所有销售记录。这就是为什么我什至首先要实现缓存。

从性能的角度来看，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:21:26.443

在这种情况下，我可能会使用 ActiveRecord 的`sum`方法（[文档](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-sum)）。一体：

```
today = Date.today
vendor_sales = Sale.where(:vendor_id => self.id)

self.sales_today =     vendor_sales.
                        where("created_at >= ?", today.beginning_of_day).
                        sum("amount")

self.sales_this_week = vendor_sales.
                        where("created_at >= ?", today.beginning_of_week).
                        sum("amount")

self.sales_lifetime = vendor_sales.sum("amount") 
```

这意味着您不必在内存中加载大量销售对象来添加金额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:21:12.063

您可以在销售模型的创建和销毁事件上使用回调：

```
class SalesController < ApplicationController

    after_save :increment_vendor_lifetime_sales
    before_destroy :decrement_vendor_lifetime_sales

    def increment_vendor_lifetime_sales
        vendor.update_attribute :sales_lifetime, vendor.sales_lifetime + amount
    end

    def decrement_vendor_lifetime_sales
        vendor.update_attribute :sales_lifetime, vendor.sales_lifetime - amount
    end
end 
```

# r - 如何根据其他变量的条件生成二进制变量？

> ID：16143908
> 
> 赞同：1
> 
> 时间：2013-04-22T09:41:13.280
> 
> 标签：r, variables, binary, conditional-statements, output

再次为提出此类问题道歉，但 R 世界如此之大，有时我会感到迷茫，即使我已经阅读了一些与 R 相关的最佳书籍。我有以下数据库

```
ID=rep((1:3),3)
x<-as.Date("2013-1-1")
y<-as.Date("2013-1-2")
z<-as.Date("2013-1-3")
DATE<-c(x,x,x,y,x,y,z,z,z)
TRAP<-c(1,1,1,3,2,3,2,1,3)
IN<-data.frame(ID,DATE,TRAP) 
```

我想根据以下条件生成一个二进制变量（RESULT）：如果不同ID的DATE和TRAP相同，则RESULT>y否则RESULT>n，像这样

```
RESULT<-c("y","y","y","y","n","y","n","n","n")
OUT<-cbind(IN,RESULT) 
```

我认为`ifelse`应该使用该函数，但我不知道如何明确控制每个 ID 的相等条件......一如既往，非常感谢每一个建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:02:11.007

这是一种方法`plyr`：

```
R> ddply(IN, .(DATE,TRAP), transform, RESULT=ifelse(length(ID)>1,"y","n"))
  ID       DATE TRAP RESULT
1  1 2013-01-01    1      y
2  2 2013-01-01    1      y
3  3 2013-01-01    1      y
4  2 2013-01-01    2      n
5  1 2013-01-02    3      y
6  3 2013-01-02    3      y
7  2 2013-01-03    1      n
8  1 2013-01-03    2      n
9  3 2013-01-03    3      n 
```

请注意，这些行已重新排序。

* * *

另一个解决方案`data.table`：

```
R> DT <- data.table(IN)
R> DT[,RESULT:=ifelse(.N>1,"y","n"), by=list(DATE,TRAP)]
R> DT
   ID       DATE TRAP RESULT
1:  1 2013-01-01    1      y
2:  2 2013-01-01    1      y
3:  3 2013-01-01    1      y
4:  1 2013-01-02    3      y
5:  2 2013-01-01    2      n
6:  3 2013-01-02    3      y
7:  1 2013-01-03    2      n
8:  2 2013-01-03    1      n
9:  3 2013-01-03    3      n 
```

这里没有重新排序。

* * *

或使用 base `ave`：

```
IN <- within(IN, { RESULT <- ave(TRAP, list(DATE, TRAP), 
               FUN= function(x) ifelse(length(x) > 1, "y", "n"))})
#   ID       DATE TRAP RESULT
# 1  1 2013-01-01    1      y
# 2  2 2013-01-01    1      y
# 3  3 2013-01-01    1      y
# 4  1 2013-01-02    3      y
# 5  2 2013-01-01    2      n
# 6  3 2013-01-02    3      y
# 7  1 2013-01-03    2      n
# 8  2 2013-01-03    1      n
# 9  3 2013-01-03    3      n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:51:05.943

你可以用`duplicated`这个：

```
IN$RESULT <- ifelse((duplicated(IN[,2:3])+duplicated(IN[,2:3],fromLast=TRUE))>0,
                       "y","n")

#   ID       DATE TRAP RESULT
# 1  1 2013-01-01    1      y
# 2  2 2013-01-01    1      y
# 3  3 2013-01-01    1      y
# 4  1 2013-01-02    3      y
# 5  2 2013-01-01    2      n
# 6  3 2013-01-02    3      y
# 7  1 2013-01-03    2      n
# 8  2 2013-01-03    1      n
# 9  3 2013-01-03    3      n 
```

# php - Moodle从代码更新mysql

> ID：16143909
> 
> 赞同：4
> 
> 时间：2013-04-22T09:41:13.860
> 
> 标签：php, mysql, moodle

我不熟悉用代码更新数据库的 Moodles 方法。

我有这样的声明：

```
$expiredCourseArchiveIntegritaxSql = "UPDATE mdl_course SET category = 29
                                         WHERE expireDate < '" . $date . "'
                                         AND category = 28";

$expiredCourseIntegritaxArchive = $DB->get_records_sql($expiredCourseArchiveIntegritaxSql); 
```

这种格式在从数据库中获取记录但不更新时有效。我找不到如何使用 Moodles $DB 函数更新数据库的示例。

我认为问题是我正在使用：

```
$DB->get_records_sql($expiredCourseArchiveIntegritaxSql); 
```

当语法应该更像是：

```
$DB->update_records_sql($expiredCourseArchiveIntegritaxSql); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T10:08:37.300

通常在更新记录时，您使用 update_records() 并发送表名以及键和值的对象。但既然想指定 WHERE 少，你就必须使用 execute_sql：

```
$DB->execute_sql("UPDATE {course} SET category = 29 WHERE expireDate < '{$date}' AND category = 28"); 
```

# php - 使用 PHPMailer 的联系表

> ID：16143911
> 
> 赞同：1
> 
> 时间：2013-04-22T09:41:16.457
> 
> 标签：php, forms, phpmailer

我有一个非常简单的表格，包括：

*   姓名
*   电子邮件
*   信息

我正在使用 PHPMailer 发送表单，因为我还希望它包含位于服务器上的附件 (PDF)。

**我已经把表格弄到了可以发送姓名、电子邮件和附件或**姓名、电子邮件和消息的地步。当一个工作时，它似乎禁用另一个。

请参阅下面我正在使用的 PHP 代码：

```
<?php 

  $field_fullname = $_POST['cf_mercury'];
  $field_email = $_POST['cf_jupiter'];
  $field_message = $_POST['cf_uranus'];

//define the receiver of the email 
$to = 'email@emailaddress.co.uk'; 
//define the subject of the email 
$subject = 'Message via the website from '.$field_fullname;
//create a boundary string. It must be unique 
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n 
$body_message = 'From: '.$field_fullname."\n";
$body_message .= 'Message: '.$field_message;
//Main message
$headers = "From: $field_email\r\nReply-To: $field_email"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('/websites/123reg/LinuxPackage22/da/mt/ec/damtechdesigns.co.uk/public_html/proofs/etap/etapbooklet.pdf'))); 
//define the body of the message. 
ob_start(); //Turn on output buffering 
?> 
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>" 

--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: application/pdf; name="ETAPBooklet.pdf"  
Content-Transfer-Encoding: base64  
Content-Disposition: attachment  

<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>-- 

<?php 
//copy current buffer contents into $message variable and delete current output buffer 
$body_message = ob_get_clean(); 
//send the email 
$mail_sent = @mail( $to, $subject, $body_message, $headers ); 
//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 

 if ($mail_sent) { ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for contacting the whoever. We will contact you shortly.');
        window.location = 'index.html';
    </script>
<?php
}
  else { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, send your email to email@emailaddress.co.uk');
        window.location = 'index.html';
    </script>
<?php
}

?> 
```

代码当前状态是它发送附件但不显示消息。

任何和所有的帮助都将不胜感激，如果我能做更多的事情来表达我的问题并增加它的可理解性，请告诉我。

**解决方案：**

```
<?php

  $field_fullname = $_POST['cf_mercury'];
  $field_email = $_POST['cf_jupiter'];
  $field_message = $_POST['cf_uranus'];

require_once('class.phpmailer.php');

$mail             = new PHPMailer(); // defaults to using php "mail()"

$body = 'From: '.$field_fullname;
$body .= 'Message: '.$field_message;

$mail->SetFrom($field_email, $field_fullname);

$mail->AddReplyTo($field_email,$field_fullname);

$address = "email@address.co.uk";
$mail->AddAddress($address, "Name");

$mail->Subject    = 'Message via the website from '.$field_fullname;

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$mail->AddAttachment("/websites/123reg/LinuxPackage22/da/mt/ec/damtechdesigns.co.uk/public_html/proofs/etap/etapbooklet.pdf");      // attachment
$mail->AddAttachment(""); // attachment

if(!$mail->Send()) {
  { ?>
    <script language="javascript" type="text/javascript">
        alert('Message failed. Please, send your email to alternatemail@address.co.uk');
        window.location = 'index.html';
    </script>
<?php
}
} else {
  ?>
    <script language="javascript" type="text/javascript">
        alert('Thank you for contacting the ETAP Centre. We will contact you shortly.');
        window.location = 'index.html';
    </script>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:48:06.160

您提供的代码仅显示了发送带有单个附件的电子邮件的尝试，因此当您发送消息 + 附件时很难看出可能出了什么问题。请注意，对于 MIME，“消息”本身就是具有内联处置的 MIME 附件。

只需使用 swiftmailer 或 phpmailer，您可能会减轻很多痛苦。

# jquery - URL中的jQuery .load URL

> ID：16143922
> 
> 赞同：1
> 
> 时间：2013-04-22T09:41:51.723
> 
> 标签：jquery

我遇到了一些障碍，我不想恢复使用表单，而是想看看我是否可以完成这项工作。我正在使用 onclick 事件向数据库添加值，其中一部分是 url。这是我的代码；

```
<a onclick="$(this).load(encodeURI('a_addprice.cfm?productid=#productid#&price=#price#&stockstatus=#stockstatus#&deeplink=#deeplink#&provider=#provider#&supplier_name=#supplier_name#&itemref=#itemref#&storeid=#storeid#'));">Add</a> 
```

（主题标签与我的后端语言 Coldfusion 有关 - 对于那些不知道的人）

在纯 HTML 中，这就是它的外观；

```
<a onclick="$(this).load(encodeURI('a_addprice.cfm?productid=1&price=10.99&stockstatus=In Stock&deeplink=http://www.supplier.com/?product=1&something=2&provider=providername&supplier_name=supplier_name&itemref=ABC1&storeid=123'));">Add</a> 
```

我遇到的问题是这部分（深度链接）；

```
http://www.supplier.com/?product=1&something=2 
```

执行该操作时，它会忽略 URL 中过去 ?product=1 的所有内容。当然，这是有道理的，因为 URL 的结构方式 - 如果没有，它也会添加 '&provider=... 等作为深度链接的一部分。

我想知道的是是否有一种方法我仍然可以使用这种方法，也许可以隔离深度链接方面，以便将其全部包含在内。

包含的页面有大约 100 行这样的行，所以我基本上试图避免有 100 个表单，以及每个表单需要的所有额外隐藏变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:47:03.320

我觉得你把 encodeUri 放在错误的地方

```
$(this).load(
'a_addprice.cfm?productid=#productid#&price=#price#&stockstatus=#stockstatus#&deeplink='+
 encodeURI('#deeplink')+
'#&provider=#provider#&supplier_name=#supplier_name#&itemref=#itemref#&storeid=#storeid#')); 
```

另外，我强烈建议您将其更改为类似`#URLEncodedFormat(deeplink)#`

并有一个链接

```
<a  class="deeplink"
href="a_addprice.cfmproductid=#productid#&price=#price#&stockstatus=#stockstatus#&deeplink= #URLEncodedFormat(deeplink)#&provider=#provider#&supplier_name=#supplier_name#&itemref=#itemref#&storeid=#storeid#">...</a> 
```

并使用

```
$(function() {
  $(".deeplink").on("click",function(e) {
    e.preventDefault();
    $("someResultContainer").load(this.href);
  });
}); 
```

# android-fragmentactivity - 类中的访问 FragmentActivity 由 DialogFragment 扩展

> ID：16143928
> 
> 赞同：0
> 
> 时间：2013-04-22T09:42:01.933
> 
> 标签：android-fragmentactivity, android-dialogfragment, android-datepicker

我有一个**扩展**为`DialogFragment`. 我想调用一个在 this中**扩展**的类中的方法。`FragmentActivity``DialogFragment`

在我的`FragmentActivity`，我做如下调用`DialogFragment`。

```
DialogFragment dialogFragment = new MyDialogFragmentClass();
dialogFragment.show(getSupportFragmentManager(), "datePicker"); 
```

我用它`DialogFragment`来展示一个`DatePicker`. 当用户选择日期并单击**设置**按钮时，我想在我的`FragmentActivity`.

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T09:35:32.883

```
public class MainActivity extends FragmentActivity {

EditText mEdit;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void selectDate(View view) {
    DialogFragment newFragment = new SelectDateFragment();
    newFragment.show(getSupportFragmentManager(), "DatePicker");
}
public void populateSetDate(int year, int month, int day) {
    mEdit = (EditText)findViewById(R.id.editText1);
    mEdit.setText(month+"/"+day+"/"+year);
}
public class SelectDateFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        final Calendar calendar = Calendar.getInstance();
        int yy = calendar.get(Calendar.YEAR);
        int mm = calendar.get(Calendar.MONTH);
        int dd = calendar.get(Calendar.DAY_OF_MONTH);
        return new DatePickerDialog(getActivity(), this, yy, mm, dd);
    }

    public void onDateSet(DatePicker view, int yy, int mm, int dd) {
        populateSetDate(yy, mm+1, dd);
    }
} 
```

}

// 导入必要的包...

# objective-c - 使用 UIPanGestureRecognizer 一次移动一个 UIImageView

> ID：16143929
> 
> 赞同：-2
> 
> 时间：2013-04-22T09:42:13.080
> 
> 标签：objective-c, ios5, ios6, uiimageview, uipangesturerecognizer

我有一些关于使用`UIPanGestureRecognizer`. 是否可以`UIImageView`一次移动一个。

流程是这样的。我有 2 张图片。图像 A 和 B。如果选择`image A`，`image B`则不能是`moved`？。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:48:46.273

您只能为特定的 UIImageView 对象设置 UIPanGestureRecognizer。

```
 //set UIPanGestureRecognizer for first image
    UIPanGestureRecognizer *panRecognizer1 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(moveImage1:)];
    [panRecognizer1 setMinimumNumberOfTouches:1];
    [panRecognizer1 setMaximumNumberOfTouches:1];
    [panRecognizer1 setDelegate:self];
    [img1 addGestureRecognizer:panRecognizer1];

    //set UIPanGestureRecognizer for second image
    UIPanGestureRecognizer *panRecognizer2 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(moveImage2:)];
    [panRecognizer2 setMinimumNumberOfTouches:1];
    [panRecognizer2 setMaximumNumberOfTouches:1];
    [panRecognizer2 setDelegate:self];
    [img1 addGestureRecognizer:panRecognizer2]; 
```

并编写两种图像移动方法

```
 -(void)moveImage1:(id)sender {
            //coding for moving first image
            [[[(UITapGestureRecognizer*)sender view] layer] removeAllAnimations];
            [viewGesture bringSubviewToFront:[(UIPanGestureRecognizer*)sender view]];
            CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

            if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {
                    firstX = [[sender view] center].x;
                    firstY = [[sender view] center].y;
            }

            translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);
            [[sender view] setCenter:translatedPoint];

            if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

                    CGFloat finalX = translatedPoint.x + (.04*[(UIPanGestureRecognizer*)sender velocityInView:viewGesture].x);
                    CGFloat finalY = translatedPoint.y + (.04*[(UIPanGestureRecognizer*)sender velocityInView:viewGesture].y);

                    if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {

                            if(finalX < -5000) {              finalX = 0;       }
                            else if(finalX > 5000) {          finalX = 320;     }

                            if(finalY < -5000) {         finalY = 0;             }
                            else if(finalY > 5000) {     finalY = 460;           }
                    }
                    else {
                            if(finalX < -5000) {   finalX = 0;    }
                            else if(finalX > 5000) {  finalX = 320;}

                            if(finalY < -5000) {         finalY = 0;             }
                            else if(finalY > 5000) {     finalY = 460;        }
                    }

                    [UIView beginAnimations:nil context:NULL];
                    [UIView setAnimationDuration:.35];
                    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
                    [[sender view] setCenter:CGPointMake(finalX, finalY)];
                    [UIView commitAnimations];
            }
    }

    -(void)moveImage2:(id)sender {
            //coding for moving second image
    } 
```

也可以通过 uicollectionview看到[这个](https://github.com/lxcid/LXReorderableCollectionViewFlowLayout)

# c# - ScrollViewer：禁用 Snap（松紧带效果）

> ID：16143931
> 
> 赞同：0
> 
> 时间：2013-04-22T09:42:16.533
> 
> 标签：c#, windows-8, windows-runtime

我的 MainPage 上有一个 ScrollViewer，其中包含所有其他元素（当然 AppBar 除外）。滚动工作正常，但我想禁用捕捉行为（你将整个页面拖到左边，释放它，它会重新捕捉）。参见图像（ScrollViewer 的背景：黑色，网格的背景：白色）。那么如何禁用这种行为呢？也称为过度滚动或反弹效果。

我刚刚发现了*IsScrollInertiaEnabled*，但是将其设置为 false 并没有帮助。

```
<ScrollViewer VerticalScrollMode="Disabled" 
                  VerticalScrollBarVisibility="Disabled" 
                  HorizontalScrollBarVisibility="Visible" 
                  ZoomMode="Disabled" 
                  HorizontalSnapPointsType="None" 
                  VerticalSnapPointsType="None" 
                  ZoomSnapPointsType="None">
    <VisualStateManager>...</VisualStatemanager>
    <Grid Style="{StaticResource LayoutRootStyle}">
        <Grid.RowDefinitions>
            <RowDefinition Height="140"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Back button and page title -->
        ...
        <!-- My content grid -->

     </Grid>
</ScrollViewer> 
```

![在此处输入图像描述](https://i.stack.imgur.com/f1xvO.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/YKpOM.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:12:15.397

抱歉误解了你的意思。如果可以的话，请发布一些额外的 xaml .. scrollviewer 容器 xaml 可能会有所帮助

尝试这样的事情

```
<Grid Style="{StaticResource LayoutRootStyle}">
    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- Back button and page title -->
    ...
    <!-- My content grid -->
    <ScrollViewer Grid.Row="1"
      VerticalScrollMode="Disabled" 
        VerticalScrollBarVisibility="Disabled" 
        HorizontalScrollBarVisibility="Visible" 
        ZoomMode="Disabled" 
        HorizontalSnapPointsType="None" 
        VerticalSnapPointsType="None" 
        ZoomSnapPointsType="None">

        // put your content here directly or in a grid
    </ScrollViewer>
    <VisualStateManager>...</VisualStatemanager>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T11:53:29.360

要解决在滚动查看器中设置对象高度的问题，可以说.. 如果您有一个堆栈面板，请设置 Height="2000" 否则......然后完成。注意：不要在滚动查看器中放置任何高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T09:26:27.623

我有其他建议，我也遇到过类似的问题，但我想禁用弹跳，当翻转视图中只有 1 个元素时。

所以我这样做了：

创建了一个模板控件：

CustomFlipView 和它继承自 FlipView：

```
public sealed class CustomFlipView : FlipView 
```

接下来，我编辑了 FlipViewStyle 以获得 FlipView 的样式代码（是的，那个大的）。

并复制粘贴到Generic.xaml中，生成

```
<Style TargetType="local:CustomFlipView"> 
```

因此，这让我有机会将名称添加到默认情况下未命名的此类 xaml 控件。

我为 ItemsPresenter 添加了一个名称：

```
<ScrollViewer x:Name="ScrollingHost" AutomationProperties.AccessibilityView="Raw" BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalSnapPointsType="MandatorySingle" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}" IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Padding="{TemplateBinding Padding}" TabNavigation="{TemplateBinding TabNavigation}" VerticalSnapPointsType="MandatorySingle" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled">
    <ItemsPresenter x:Name="FlipViewItemsPresenter"/>
</ScrollViewer> 
```

接下来在 CustomFlipView 的代码中，我这样做了：

```
public sealed class CustomFlipView : FlipView //this line is indented.
{
    private ItemsPresenter itemsPresenter;

    public CustomFlipView()
    {
        this.DefaultStyleKey = typeof(CustomFlipView);
    }

    protected override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        itemsPresenter = GetTemplateChild("FlipViewItemsPresenter") as ItemsPresenter;
        FixateItems();
    }

    protected override void OnItemsChanged(object e)
    {
        base.OnItemsChanged(e);
        FixateItems();
    }

    private void FixateItems()
    {
        if (itemsPresenter != null)
        {
            if (this.Items.Count < 2)
            {
                itemsPresenter.ManipulationMode = ManipulationModes.None;
            }
            else
            {
                itemsPresenter.ManipulationMode = ManipulationModes.System;
            }
        }
    }
} 
```

希望这能给你一个提示。

# php - PHP - Java opt() 用于数组设置后备值

> ID：16143936
> 
> 赞同：0
> 
> 时间：2013-04-22T09:42:25.937
> 
> 标签：php, arrays

我想知道是否有针对 Java`opt()`功能的 PHP 解决方案。

例如：在某些情况下我得到一个`$_GET`参数，在某些情况下没有。我想要这样的事情：

```
$myVar = $_GET.opt('myParam', 'whatever'); 
```

如果`myParam`未设置，`myVar`则设置为字符串“whatever”。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:50:40.833

```
function ifnull(array &$array, $key, $default){
    if(!isset($array[$key])){
        $array[$key] = $default;
    }

    return $array[$key];
} 
```

或者

```
function ifnull(array &$array, $key, $default){
    return isset($array[$key]) ? $array[$key] : $default;
} 
```

# cocoa - 将可可 webview 嵌入到 QT 应用程序时的事件问题

> ID：16143937
> 
> 赞同：1
> 
> 时间：2013-04-22T09:42:27.240
> 
> 标签：cocoa, qt, webview, mouseevent

我打算在基于 QT 的应用程序中用 OSX 本机 webkit 替换 QT webkit，我现在所做的是制作一个从 QMacCocoaViewContainer 继承的 QT 控件并在其中嵌入一个可可 web 视图。它可以正确显示页面，但可可网页视图无法接收鼠标移动事件，因此无法显示 js/css 悬停效果。我尝试将其与原生 cocoa 应用程序进行比较，发现可可 web 视图可以从原生 cocoa 应用程序的通知中心获取 NSMouseMovedNotifcation，但 QT 应用程序构建自己的事件循环并使用自己的策略发送事件，没有收到此通知。

谁能告诉我如何解决？任何意见都非常感谢。

```
QTWebView(QWidget *pparent): QMacCocoaViewContainer(0, pparent)
{
    ...
    xwebview = [[WebView alloc] init];
    setCocoaView(xwebview);
    NSString *urldefault = @"http://www.google.com";
    [[xwebview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urldefault]]];
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:41:08.600

我遇到了类似的问题，我通过实现 macEvent(EventHandlerCallerRef, EventRef) 函数解决了这个问题。从 eventRef 创建一个 NSEvent

```
NSEvent* nsEvent = [NSEvent eventWithEventRef:event]; 
```

如果事件是 MouseMoved 事件，则将 mouseMoved: 事件发送到 NSView 为 (NSView*)winId() 的 NSView。

我希望这有帮助

# android - content 必须有一个 id 属性为 'android.R.id.list' 的 ListView

> ID：16143943
> 
> 赞同：1
> 
> 时间：2013-04-22T09:42:38.683
> 
> 标签：android, android-layout, android-listview

> 您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView

我收到了我之前处理过的这个错误。我尝试了一堆不同的 id 等等，但它没有帮助。正如您在下面看到的，这些名称似乎是正确的。我认为这与我对片段和列表片段等不熟悉这一事实有关。我已经发布了相关的代码，如果需要更多，我会提供。

有任何想法吗？

```
public class DisplayInfo extends FragmentActivity {

SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_display_info);

    mSectionsPagerAdapter = new SectionsPagerAdapter(
            getSupportFragmentManager());

    new CreateTimetablesTask().execute();
    Log.d("task done", "task");
    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

} 
```

}

```
public class DummySectionFragment extends ListFragment {
private Integer arrayListId;
ViewGroup myViewGroup;
public static final String CATEGORY_POSITION = "section_number";
public static DummySectionFragment newInstance(int pos) {
    DummySectionFragment f = new DummySectionFragment();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putInt(CATEGORY_POSITION, pos);
    f.setArguments(args);

    return f;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    //get the id for your array list
    super.onCreate(savedInstanceState);
    arrayListId = getArguments() != null ? getArguments().getInt(CATEGORY_POSITION) - 1 : 1;
}

//create the list view layout
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    myViewGroup = container;
    View v = inflater.inflate(R.layout.list_row, container, false);
    return v;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    ArrayAdapter<SingleClass> arrayAdapter =      
 new ArrayAdapter<SingleClass>(getActivity(), R.layout.fragment_display_info, android.R.id.list);

    setListAdapter(arrayAdapter);
}

} 
```

片段显示信息.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="match_parent"
      android:layout_height="match_parent">

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
</ListView>

</LinearLayout> 
```

活动显示信息.xml

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/pager"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".DisplayOnlineTimetable" >

<!--
This title strip will display the currently visible page title, as well as the page
titles for adjacent pages.
-->

<android.support.v4.view.PagerTitleStrip
    android:id="@+id/pager_title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:background="#33b5e5"
    android:paddingBottom="4dp"
    android:paddingTop="4dp"
    android:textColor="#fff" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:44:27.627

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    myViewGroup = container;
    View v = inflater.inflate(R.layout.fragment_display_info, container, false);
    return v;
} 
```

您在`ListFragment`'s`onCreateView`方法中给出了错误的布局。

# php - 使用 show 和 div 在 html 表中的 PHP

> ID：16143944
> 
> 赞同：-6
> 
> 时间：2013-04-22T09:42:38.967
> 
> 标签：php, html-table

我正在尝试在 html 表中显示一些 PHP 生成的内容，该文件是一个 PHP 文件，而我目前拥有的不起作用的代码是：

```
<?php
echo '<table>';
{
echo '<tr>';
echo "<td width="30"></td>";
echo "<td width="330" valign="top">{<div class="vpolls" id="vp_1"><div
class="vpdt"></div>Do you agree with the proposed new system of collecting Council Tax?
<form action="http://tk5solutions.com/vpoll/vpoll.php" id="vpf1" method="post"
onsubmit="return votePoll(this);">
  <input type="hidden" name="idp" value="1"><label for="p1i0"><p><input type="radio"
  name="item" value="Yes" id="p1i0" />Yes</label> 
<label for="p1i1"><input type="radio"
  name="item" value="No" id="p1i1" />No</label> 
<label for="p1i2"><input type="radio"
  name="item" value="Undecided" id="p1i2" />
Undecided</label>     
<input type="submit"
  value="Vote" name="sbm" /> </p>
</form>
</div>}</td>";
echo "<td width="330" valign="top">include('vpoll/vpoll.php');
echo '<div class="vpolls">'. $obVot->showPoll(1) .'</div>';
</td>";
echo '</tr>';
}
echo '</table>';
?> 
```

谁能告诉我如何让它工作，或者如何并排显示两组数据（它们都在框框中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:48:25.787

这是您修改的代码...

```
<?php
echo '<table>';
echo '<tr>';
echo '<td width="30"></td>';
echo '<td width="330" valign="top">
     <div class="vpolls" id="vp_1">
     <div class="vpdt"></div>
     Do you agree with the proposed new system of collecting Council Tax?

     <form action="http://tk5solutions.com/vpoll/vpoll.php" id="vpf1" method="post"
       onsubmit="return votePoll(this);">
     <input type="hidden" name="idp" value="1" />
     <label for="p1i0"><p><input type="radio" name="item" value="Yes" id="p1i0" />Yes</label> 
     <label for="p1i1"><input type="radio" name="item" value="No" id="p1i1" />No</label> 
     <label for="p1i2"><input type="radio" name="item" value="Undecided" id="p1i2" />
      Undecided</label>     
     <input type="submit" value="Vote" name="sbm" /> </p>
     </form>
     </div></td>';

     echo '<td width="330" valign="top">';
        include('vpoll/vpoll.php');
      echo '<div class="vpolls">'. $obVot->showPoll(1) .'</div>';
     echo '</td>';
     echo '</tr>';
     echo '</table>';
?> 
```

希望能帮助到你...

# mef - 使用 MEF 加载插件后映射 SignalR Hub

> ID：16143948
> 
> 赞同：4
> 
> 时间：2013-04-22T09:42:47.947
> 
> 标签：mef, signalr

我正在尝试将 signalR 集线器作为使用 MEF 的插件的一部分。但是在 List<> 对象上调用 ImportMany 然后在 Global.asax 文件的 Application_Start() 方法中添加目录/容器/ComposeParts 部分后，我得到的是：

未捕获的类型错误：无法读取未定义的属性“服务器”。

我不知道问题是来自我的界面、插件、global.asax 文件还是 javascript。

界面：

```
public interface IPlugin
{

} 
```

插件：

```
[Export(typeof(IPlugin))]
[HubName("testHub")]
public class TestHub : Hub, IPlugin
{
    public string Message()
    {
        return "Hello World!";
    }
} 
```

在 Global.asax 文件中：

```
 [ImportMany(typeof (IPlugin))]
    private IEnumerable<IPlugin> _plugins { get; set; }

    protected void Application_Start()
    {
        var catalog = new AggregateCatalog();
        catalog.Catalogs.Add(new DirectoryCatalog(@"./Plugins"));
        var container = new CompositionContainer(catalog);
        container.ComposeParts(this);

        RouteTable.Routes.MapHubs();

        //log4net
        log4net.Config.XmlConfigurator.Configure();

        AreaRegistration.RegisterAllAreas();
        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
    } 
```

最后是javascript：

```
$(document).ready(function () {
        $.connection.hub.url = 'http://127.0.0.1/signalr/';
        var proxy = $.connection.testHub;
        $.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'longPolling'] })
                   .done(function () {
                       proxy.invoke('Message').done(function(res) {
                           alert(res);
                       });
                   })
                   .fail(function () { alert("Could not Connect!"); });
    }); 
```

我发现的唯一信息是[这篇文章](https://stackoverflow.com/questions/13273652/host-n-number-of-signalr-hubs-in-asp-net-but-mefd-in/13458290#13458290)，但我无法让它工作。当我手动添加引用时一切正常，但是当我在加载插件后查看“signalr/hubs”时，没有对我的集线器方法的引用。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-16T00:50:25.333

您的问题是 SignalR在第一次请求时[缓存生成的“signalr/hubs”代理脚本。](https://github.com/SignalR/SignalR/blob/2.0.3/src/Microsoft.AspNet.SignalR.Core/Hubs/DefaultJavaScriptProxyGenerator.cs#L38)SignalR 提供缓存脚本以响应对“signalr/hubs”的每个后续请求。

SignalR 不仅缓存脚本本身，还缓存它在进程开始时找到[的集线器集合。](https://github.com/SignalR/SignalR/blob/2.0.3/src/Microsoft.AspNet.SignalR.Core/Hubs/Lookup/ReflectedHubDescriptorProvider.cs#L22)

[您可以通过简单地不使用代理脚本来](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-javascript-client#genproxy)解决缓存的代理脚本问题，但这仍然无法让您实际连接到进程启动后加载的程序集中定义的集线器。

如果您希望能够连接到此类集线器，则需要实现自己的[IHubDescriptorProvider](https://github.com/SignalR/SignalR/blob/2.0.3/src/Microsoft.AspNet.SignalR.Core/Hubs/Lookup/IHubDescriptorProvider.cs)，它知道在运行时加载的插件中定义的集线器。

您可以使用 SignalR 的[DependencyResolver](https://github.com/SignalR/SignalR/blob/2.0.3/src/Microsoft.AspNet.SignalR.Core/DefaultDependencyResolver.cs#L85)注册您的提供程序，它可以通过您传递给 MapSignalR 的[HubConfiguration](http://msdn.microsoft.com/en-us/library/microsoft.aspnet.signalr.hubconfiguration%28v=vs.118%29.aspx)对象的`Resolver`属性传递给[SignalR](http://msdn.microsoft.com/en-us/library/dn448256%28v=vs.118%29.aspx)。

也就是说，只要将插件添加到“./Plugins”目录，重新启动应用程序池/服务器进程可能会更容易。

# php - 用 alt-tag 替换图像

> ID：16143949
> 
> 赞同：0
> 
> 时间：2013-04-22T09:42:49.413
> 
> 标签：php, html

海，

我有一个充满 html 内容的字符串。我现在需要做的是，用它的替代文本替换每个图像。

html 可能如下所示：

```
<h1> some h1</h1>

<img src="images/image.jpg" alt="My Alt-text" width="540" height="304" />
<img src="images_2003/basket.jpg" alt="My other alt text" width="540" height="304" />

<h2>some h2</h2>

<img src="images/image2.jpg" alt="My next Alt-text" width="540" height="304" />
<img src="images/image45.jpg" alt="Yet other alt text" width="540" height="304" />

... 
```

它应该是什么：

```
<h1> some h1</h1>

My Alt-text
My other alt text

<h2>some h2</h2>

My next Alt-text
Yet other alt text

... 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:47:03.273

使用[DOM 解析器](http://au1.php.net/domdocument)非常简单：

```
$contents = <<<EOS
<h1> some h1</h1>

<img src="images/image.jpg" alt="My Alt-text" width="540" height="304" />
<img src="images_2003/basket.jpg" alt="My other alt text" width="540" height="304" />

<h2>some h2</h2>

<img src="images/image2.jpg" alt="My next Alt-text" width="540" height="304" />
<img src="images/image45.jpg" alt="Yet other alt text" width="540" height="304" />
EOS;

$doc = new DOMDocument;
libxml_use_internal_errors(true);
$doc->loadHTML($contents);
libxml_clear_errors();

$xp = new DOMXPath($doc);
foreach ($xp->query('//img') as $node) {
        $text = $doc->createTextNode($node->getAttribute('alt') . "\n");
        $node->parentNode->replaceChild($text, $node);
}

echo $doc->saveHTML(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:54:08.137

If you need a jQuery solution try this

```
$(document).ready(function() {
    var alt = ""
    $( "img" ).each(function( index ) {
      alt = $(this).attr("alt");
      $(this).replaceWith("<p>" + alt + "</p>");  // modify p with someother tag if needed.
    });
}); 
```

Play [here](http://jsfiddle.net/gR8uz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:51:44.433

我认为您可以使用 jquery 来执行此操作。

也许试试这段代码（我没有测试过）：

```
$("img").each(function() {
    var alt_txt = $(this).attr('alt');
    $(this).replaceWith(alt_txt);
}); 
```

希望这可以帮助 ！再见 ！

# dojo - 在 XPage 部分刷新时更新 Dojo 过滤选择位置

> ID：16143964
> 
> 赞同：1
> 
> 时间：2013-04-22T09:43:37.420
> 
> 标签：dojo, xpages

在我的一个 XPage 中，我有一个单选按钮。如果我选择单选按钮的值，则会调用部分刷新。

*   单选按钮的值为 1 仅在同一行显示一个新按钮
*   值 2 在单选按钮组下方添加了更多字段

在这个新字段下方有一个 Dojo 过滤选择字段，可以从员工列表中进行选择。

如果我选择值 1，则过滤选择工作正常。如果我选择值 2，过滤选择仍然从“旧”位置开始，没有识别空间，新字段需要

![在此处输入图像描述](https://i.stack.imgur.com/YNNT8.png)

如何更新过滤选择列表的位置？部分刷新是针对页面的完整内容，但在这里似乎不起作用。

这是无线电组的代码，它会在更改时进行部分刷新：

```
 <xp:radioGroup id="rbgSelectEducationType" layout="pageDirection" 
        value="#{docApplication.EducationType}">
            <xp:this.readonly>
    <![CDATA[#{javascript:docApplication.getItemValueString("ZwfStepName") != "Start"}]]></xp:this.readonly>
            <xp:selectItem itemLabel="ESG Veranstaltung aus dem Katalog" 
        itemValue="ESG-Veranstaltung">
            </xp:selectItem>
            <xp:selectItem itemLabel="Externe Veranstaltung" 
        itemValue="Externe-Veranstaltung">
            </xp:selectItem>
            <xp:eventHandler event="onclick" submit="true" 
        refreshMode="partial" refreshId="wcEventDetails">
</xp:eventHandler>
            </xp:radioGroup> 
```

这是过滤选择下拉菜单的代码：

```
<xe:djFilteringSelect id="Approver" value="#{docApplication.Approver}" ignoreCase="true">
<xe:this.rendered><![CDATA[#javascript:docApplication.getItemValueString("ZwfStepName")=="Start"}]]></xe:this.rendered>
<xp:selectItems id="selectItems2">

<xp:this.value><![CDATA[#{javascript:if(docApplication.isEditable()){
        getComponent("AllUsersLastFirst").getValue().split("#");
    }}]]></xp:this.value>
</xp:selectItems>
<xp:eventHandler event="onChange" submit="true" refreshMode="partial" refreshId="panelBody" id="eventHandler2">
<xp:this.action><![CDATA[#{javascript:var dbPR = new Array(applicationScope.srv, applicationScope.pathPR);
    var Approver:com.ibm.xsp.extlib.component.dojo.form.UIDojoFilteringSelect = getComponent("Approver");
    var lookup=@DbLookup(dbPR,applicationScope.xpPersonByLastNameFirstName,Approver.getValue(),2);
    lookup=@If(@IsError(lookup),"error",lookup);
    if (lookup=="error") {
        errormsg = valstrings.getString("ccEsgDocWflContentApprover.lookup1");
        globalScriptErrors.add(errormsg);
        requestScope.put("scriptErrors", globalScriptErrors);
    }   
        @SetField("NotesNameApprover", lookup);}]]></xp:this.action>
</xp:eventHandler>
</xe:djFilteringSelect> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:19:59.420

过滤选择由许多 HTML 元素组成（Firebug 是你的朋友）。当您进行不包括选择本身的部分刷新时，它不会再次绘制，因此下拉列表保持在同一位置。简短的回答：在部分刷新中包含下拉菜单。

# c# - 更新面板中的图像导致整个页面刷新

> ID：16143968
> 
> 赞同：9
> 
> 时间：2013-04-22T09:43:47.240
> 
> 标签：c#, asp.net, html, updatepanel

我在更新面板中有一个图像控件，在页面加载中我正在设置它的 url。

page_load 中的代码

```
string url = "example.com";
Image1.ImageUrl = url; 
```

在 aspx 中的更新面板内

```
<asp:Image ID="Image1" runat="server" CssClass="image" /> 
```

我在更新面板中也有几个提交按钮，我正在更新按钮点击时的一些 texboxes 和标签。

但是，这会导致整个页面刷新。（滚动条上升。）

如果将图像移到更新面板之外，则不会发生这种情况。问题是如果我删除更新面板之外的图像，布局根本不起作用。谁能帮我这个？谢谢。

**更新**

我已经意识到这只发生在 Chrome 中。有人有想法吗？

**更新 2** 在该页面上，我通过从更新面板中删除 img 解决了这个问题。进行布局工作简直是地狱，但它奏效了。

但是我有另一个页面，当用户单击加载更多时，我将在更新面板中添加新的 imgs。同样的交易，显然这次我不能将图像移出更新面板。这是代码。

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

        <!--Recent Uploads-->
        <div class="uploads">
            <h2>Uploads</h2>
            <asp:UpdatePanel ID="RecentUpload" runat="server" UpdateMode="Conditional">
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="loaduploads"/>
                </Triggers>
                <ContentTemplate>
                    <asp:Button CssClass="uploadButton" ID="loaduploads" runat="server" Text="Load More" OnClick="loaduploads_Click" />
                </ContentTemplate>
            </asp:UpdatePanel>
        </div> 
```

后面的代码（上传索引是一个会话变量）

```
upload_index += 5;
        for (int i = 0; i < upload_index; i++)
        {
            try
            {
                SSImage img = images[i];
                HyperLink imglink = new HyperLink();
                imglink.NavigateUrl = "/Image.aspx?id=" + img.id;
                imglink.ImageUrl = "/ShowImage.ashx?imgid=" + img.id;
                imglink.ToolTip = img.title;
                imglink.CssClass = "imgupload";
                Control contentpanel = RecentUpload.ContentTemplateContainer;
                contentpanel.Controls.AddAt(contentpanel.Controls.Count - 2, imglink);
            }
            catch (ArgumentOutOfRangeException)
            {
                loaduploads.Visible = false;
                break;
            }
        } 
```

**更新 3**

静态图像不会出现此问题，而是在我尝试从`showimage.ashx`. 这是代码。

```
<%@ WebHandler Language="C#" Class="ShowImage" %>

using System;
using System.Web;
using System.IO;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

public class ShowImage : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        SqlDataReader rdr = null;
        SqlConnection conn = new SqlConnection();
        SqlCommand cmd = new SqlCommand();

        try
        {
            string connStr = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            conn = new SqlConnection(connStr);

            cmd = new SqlCommand("SELECT Image_data FROM [Image_table] WHERE Image_id = " + context.Request.QueryString["imgID"], conn);
            conn.Open();
            Object result = cmd.ExecuteScalar();
            //if nothing found throw exception
            if (result == null)
            {
                throw new Exception();
            }
            rdr = cmd.ExecuteReader();
            while (rdr.Read())
            {
                context.Response.ContentType = "image/jpg";
                context.Response.BinaryWrite((byte[])rdr["Image_data"]);
            }

            if (rdr != null)
                rdr.Close();
        }
        catch
        {

        }
        finally
        {
            conn.Close();
            conn.Dispose();
        }

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T13:00:43.007

您应该使用更新面板的异步回发触发器这里是示例：

```
<asp:AsyncPostBackTrigger ControlID="" EventName=""/> 
```

其中“controlID”是可以导致回发的元素的 ID，“事件名称”是由定义的控件触发以导致回发的特定事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T05:29:37.587

在我看来，

> 您应该尝试将控件添加到正文而不是更新ie在 ContentTemplate 中创建一个控件并添加其中的所有内容并更新其中的任何`ContentTemplate`内容`UpdatePanel`而不是.`Panel``Panel``ContentTemplate`

检查显示添加控件的逻辑和 aspx 语法，`Panel`其中包含在`UpdatePanel > ContentTemplate`

**ASPX**

```
 <asp:UpdatePanel ID="RecentUpload" runat="server" UpdateMode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="loaduploads"/>
        </Triggers>
        <ContentTemplate>
            <asp:Panel ID="pnlMyDynamicContent" runat="server">
                 <asp:Button CssClass="uploadButton" ID="loaduploads" runat="server" Text="Load More" OnClick="loaduploads_Click" />
            </asp:Panel>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

**代码背后**

```
 ad_index += 5;
    for (int i = 0; i < upload_index; i++)
    {
        try
        {
            SSImage img = images[i];
            HyperLink imglink = new HyperLink();
            imglink.NavigateUrl = "/Image.aspx?id=" + img.id;
            imglink.ImageUrl = "/ShowImage.ashx?imgid=" + img.id;
            imglink.ToolTip = img.title;
            imglink.CssClass = "imgupload";

            // Commented old code
            //Control contentpanel = RecentUpload.ContentTemplateContainer;
            //contentpanel.Controls.AddAt(contentpanel.Controls.Count - 2, imglink);

            //Add controls to Panel instead of updating the ContentTemplate itself
            pnlMyDynamicContent.Controls.AddAt(pnlMyDynamicContent.Controls.Count - 2, imglink);
        }
        catch (ArgumentOutOfRangeException)
        {
            loaduploads.Visible = false;
            break;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T18:46:02.997

添加另一个更新面板并将您的图像标签放入此更新面板，然后将属性“updatemode”设置为“always”。

试试这个，它肯定会解决你的问题。如果不让我知道。

# python - 如何在python脚本中设置环境变量

> ID：16143971
> 
> 赞同：1
> 
> 时间：2013-04-22T09:43:54.640
> 
> 标签：python, scons

我正在使用 SCONS 构建工具。
我无法使用在 python 脚本中初始化的环境变量。

在我的项目中，用户可以更改一些变量以使用编译器。

为此，我们有 2 个文件。

*   配置文件
*   构造

Config.py 包含所有变量，例如 Include 目录、CFLAGS、CPPDEFINES 等。所以，我们可以在这里设置一些变量。我需要在 Sconstruct 文件中使用的那些变量。在 config.py 我设置了一个变量，如下所示

```
SCONS_INC = "Include files"
os.environ["SCONS_INC"] = SCONS_INC 
```

我需要在 Sconstruct File 中使用这些变量。代码是

```
env["CPPPATH"] = os.environ["SCONS_INC"] 
```

但我收到类似未定义变量 SCONS_INC 的错误。

这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:10:43.257

SCons 默认不使用调用的环境，这是为了确保无论您的环境具有哪些配置，您都可以重现构建。

环境变量存储在密钥下的 scons 环境中，`ENV`因此您可以像这样访问一般环境变量：

```
env = Environment()
variable = env['ENV']['SomeVariable']
env['ENV']['SomeVariable'] = SomeValue 
```

我理解你的问题，就像你需要在 SCons 中使用 python 脚本中设置的变量一样。为此，您需要使用您结合描述的两种方法来传输它们。

```
env = Enviroment()
python_variable = os.environ['SomeVariable']
env['ENV']['SomeVariable'] = python_variable 
```

但是，我可能会推荐其他控制构建的方法，因此您不必担心传输环境变量的麻烦。恕我直言，使用参数更简单。参数只是一个由调用 scons 生成的字典，所以当你说：

```
scons -D some_argument=blob 
```

您可以通过简单地获得该论点：

```
some_variable = ARGUMENTS["some_argument"] 
```

当然我不知道你为什么需要环境变量，所以这可能与你完全无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:31:16.940

我曾经有过类似的需求，编译器正在寻找某个尚未设置的 Env 变量。我能够解决这个问题如下：

```
env = Environment()
env['ENV']['THE_VARIABLE'] = 'SomeValue' 
```

# php - php-动态创建的单选按钮句柄

> ID：16143972
> 
> 赞同：0
> 
> 时间：2013-04-22T09:44:02.007
> 
> 标签：php, forms, post, dynamic, radio

所以.. 我有一个上传页面，我可以上传一个充满数据的 xml 表。我在页面本身上处理它（在页面关闭后它被删除后不发送到任何数据库）我不知道每次将上传多少行但它不应该大于 100。

现在，我得到了这部分，作为一个可以上传所有数据的表单，用户需要在为每一行创建的单选按钮中选择一个值（单选按钮的值：1-5）：

```
<form enctype="multipart/form-data" name="myForm" method="post" action="<?php echo $_SERVER['PHP_SELF']?>" onsubmit="return checkForm()">
    <?php $numRow=0;?>
    <?php //echo "<input type='radio' name='difficulty".$numRow."' value='11'>11";?>
    <table border="1">
        <tr> 
            <th>table of all courses</th> 
        </tr> 
        <?php $data[0]['Points']="נז";?>
        <?php foreach( $data as $row ) { ?> 
        <tr> 
            <td><?php echo( $row['Year'] ); ?></td>
            <td><?php echo( $row['Semester'] ); ?></td>
            <td><?php echo( $row['Code'] ); ?></td>   
            <td><?php echo( $row['Course'] ); ?></td> 
            <td><?php echo( $row['Points'] ); ?></td> 
            <td><?php echo( $row['Grade'] ); ?></td>
            <td><?php if ($numRow > 0)
                    {
                        for($choise=1;  $choise<6;  $choise++)
                        {
                            echo "<input type='radio' name='difficulty".$numRow."' value='".$choise."'>".$choise."&nbsp;&nbsp;&nbsp;";
                        }
                    }
                ?>
            </td>
        </tr> 
        <?php $numRow++;                }$numRow--; ?> 
    </table> 
    <input name="next" type="submit" value="continue" onclick="return true;">
    </form> 
```

它工作得很好，并且每行上的单选按钮都有不同的值，但问题是，我该如何处理？我在考虑也许将所有挑选的 raio 按钮值发送到一个数组？

这部分我也进入了同一页面，因为在用户选择了所有内容之后：

```
<?php 

    if(isset($_POST['next']) ) 
    { 
        if(isset($_POST['difficulty2']))
            $difficulty2 = $_POST['difficulty2'];
                    else
            $difficulty2="";
        if(isset($_POST['difficulty1']))
            $difficulty1 = $_POST['difficulty1'];
        else
            $difficulty1="";
        echo "User Has submitted the form and entered this difficulty1 : <b> $difficulty1 </b></br>";
        echo "User Has submitted the form and entered this difficulty2 : <b> $difficulty2 </b></br>";           
    }

    else
    {
?> 
```

我可以得到这样的值，但是有没有比只检查有多少行并循环在数组中添加所有 POST 更清洁、更快的方法？我希望我说清楚了，感谢您的帮助：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:44:15.670

尝试：

```
echo '<input type="radio" name="difficulty['.$numrow.']" value="'.$choise.'" />'; 
```

然后 $_POST['difficulty'] 将是一个由行号索引的数组，其值为所选选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:35:57.327

```
for($choise=1;  $choise<6;  $choise++)
{
    echo "<input type='radio' name='difficulty[".$numRow."]' value='".$choise."'>".$choise."&nbsp;&nbsp;&nbsp;";
} 
```

然后

```
$difficulty = isset($_POST['difficulty'])?$_POST['difficulty']:'';

echo "User Has submitted the form and entered this difficulty1 : <b> {$difficulty[0]} </b></br>";
echo "User Has submitted the form and entered this difficulty2 : <b> {$difficulty[1]} </b></br>"; 
```

评论

```
action="<?php echo $_SERVER['PHP_SELF']?>" 
```

这对 xss 不利

# html - 不链接到外部链接，包括来自 Internet Explorer 的 ID

> ID：16143973
> 
> 赞同：0
> 
> 时间：2013-04-22T09:44:02.340
> 
> 标签：html, browser, hyperlink

 我正在玩基本的 HTML 并想出了我的浏览器的一些奇怪行为

我正在使用 Internet Explorer 10、Chrome 26.something 和 Firefox 20.0.1 

当我单击带有 href = [http://wickedlysmart.com/buzz/index.html#Coffee](http://wickedlysmart.com/buzz/index.html#Coffee)外部链接的元素时，它不会跳转到 id，只是从顶部显示网页 - 好像我没有t 添加了“#Coffee” id 名称（它只发生在 IE 上，其他浏览器会跳转到 id 为“Coffee”的标签，尽管有一个`<h2>`具有该 id 的标签（此站点不是本地站点）

但是当我创建一个新的 html 页面时，一个本地页面 - 所有 3 个浏览器都正常运行并跳转到该页面中的元素，id 紧跟在“#”之后。

有什么想法吗 ？

ps 我无法编辑我正在使用的链接的外部页面（这是练习的重点），此外 - 我已经在维基百科页面中使用锚点进行了尝试，它可能只是我的本地内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:49:47.653

将 name-Attribute 添加到元素：

```
<h3 id="Coffee" name="Coffee">Coffee</h3> 
```

# three.js - RollControls：他们去哪儿了？

> ID：16143974
> 
> 赞同：1
> 
> 时间：2013-04-22T09:44:06.210
> 
> 标签：three.js

我正在尝试像在 r57 中一样访问 r58 中的 RollControls。我在迁移页面中找不到任何参考。有什么理由将它们从 r58 中删除？他们被重命名或替换了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:22:31.313

它们已被删除。请参阅[https://github.com/mrdoob/three.js/pull/3153](https://github.com/mrdoob/three.js/pull/3153)。

三.js r.58

# sql - SQL 表设计：每个实体一行或多行？

> ID：16143977
> 
> 赞同：0
> 
> 时间：2013-04-22T09:44:18.900
> 
> 标签：sql, database-design

我有一个业务实体，表示给定时间给定位置的天气预报。对于给定的位置和时间，有不同种类的天气参数可以预测，例如气温、气压、风速等。并非所有参数都可以保证可用，我希望灵活地添加新参数。

如果我想设计一个适合这些需求的表格，我可以使用以下方法（每个实体一行）：

```
myforecasttable:
  - location_id PRIMARY
  - timestamp PRIMARY
  - airtemperature
  - airpressure
  - windspeed
  - etc. 
```

或者我可以使用以下方法（每个实体多行）：

```
myforecasttable:
  - location_id PRIMARY
  - timestamp PRIMARY
  - parameter_type PRIMARY
  - value 
```

...其中`parameter_type`将是`enum`或`string`代表天气参数的具体类型（如气温、气压等）。

使用第一种方法，我将获取`NULL`不同列中的值，但查询起来会更容易。使用第二种方法，添加新的天气参数会容易得多，但查询可能会更难。

这些设计有什么优缺点吗？如何选择最适合我的用例的数据库设计？

# wcf - Silverlight WCF RIA 包括

> ID：16143986
> 
> 赞同：1
> 
> 时间：2013-04-22T09:44:45.563
> 
> 标签：wcf, silverlight, include, ria

在使用 RIA 服务的 Silverlight 应用程序中，我必须`[Include]`在元数据文件和`ObjectContext.Include("WhatEver")`DomainServiceClass 文件中使用。

有人可以向我解释为什么其中任何一个本身都不够吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:10:56.423

显然缺少关联属性。与 [Include] 一起使用 [Association]（在两个相关的 Entities 中，第一个参数同名）。

这是一个例子

```
class Toto
{

public int? Id
{
get;
set;
}

[Include]
[Association("Titi_Toto", "Id", "TotoId")]
public IList<Titi> TitiList
{
get;
set;
}

}

....

class Titi
{

public int? Id
{
get;
set;
}

public int? TotoId
{
get;
set;
}

[Include]
[Association("Titi_Toto", "TotoId", "Id", IsForeighKey=True)]
public Toto TotoRef
{
get;
set;
}

} 
```

# android - 在 android VideoView 中流式传输 Youtube 视频

> ID：16143989
> 
> 赞同：2
> 
> 时间：2013-04-22T09:44:58.710
> 
> 标签：android, youtube, video-streaming, youtube-api, android-videoview

我正在开发一个流 youtube 视频的应用程序。这是我的代码片段：

```
MediaController mediaController = new MediaController(PlayVideo.this);
mediaController.setAnchorView(videoView_Video);
mediaController.setMediaPlayer(videoView_Video);
Uri videoUri = Uri.parse(url);
videoView_Video.setMediaController(mediaController);
videoView_Video.setVideoURI(videoUri);
videoView_Video.requestFocus();
videoView_Video.start();
mediaController.show(); 
```

**我的 URI：**

```
videoUri = rtsp://v2.cache8.c.youtube.com/CiILENy73wIaGQm-LZitWsUGKxMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp 
```

现在我收到如下错误：

```
 1\. http youtube = false, scheme = rtsp
 2\. Couldn't open file on client side, trying server side
 3\. Error (1,-2147483648)
 4\. Error: 1,-2147483648 
```

还有一个带有消息的对话框：

![在此处输入图像描述](https://i.stack.imgur.com/AFgoL.png)

请提出任何答案来克服这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:49:27.840

使用适当的 API 而不是手动解析和查找视频。

[https://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)

您只需导入正确的 YouTubeVideoPlayer，一切正常。

ps.：我不建议在 ViewPager 中使用它，我只是遇到了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T10:32:09.100

Google 有一个[YouTube Android Player API](https://developers.google.com/youtube/android/player/)，可让您将视频播放功能整合到您的 Android 应用程序中。API 本身非常易于使用并且运行良好。例如，这里是如何创建一个新的活动来使用 API 播放视频。

```
Intent intent = YouTubeStandalonePlayer.createVideoIntent(this, "<<YOUTUBE_API_KEY>>", "<<Youtube Video ID>>", 0, true, false);   
startActivity(intent); 
```

有关更多详细信息，请参阅[此](http://sapandiwakar.in/streaming-youtube-videos-in-android/)内容。

# sql - 是否可以设置一个 sql 视图，以便仅在需要时执行任何连接？

> ID：16143995
> 
> 赞同：1
> 
> 时间：2013-04-22T09:45:32.070
> 
> 标签：sql, performance, sql-server-2008

我在查看性能方面遇到了一些问题。特别是在不需要时执行一些昂贵的连接。我已设法将问题简化为最简单的情况，并使用 AdventureWorks 示例数据库创建了以下视图，该视图将人名和电子邮件地址组合在一起。

```
create view PersonDetails_View
as
select P.FirstName, P.LastName, A.EmailAddress
from Person.Person P
left outer join Person.EmailAddress A
    ON P.BusinessEntityID = A.BusinessEntityID 
```

如果我对此视图运行以下查询：

```
select FirstName from PersonDetails_View 
```

生成的查询等于：

```
select P.FirstName
from Person.Person P
left outer join Person.EmailAddress A
    ON P.BusinessEntityID = A.BusinessEntityID 
```

在此查询中，执行了不必要的联接。我知道为什么会这样 - 如果每行有多个`EmailAddress`条目`Person`，结果会有所不同。但是，在这种特殊情况下，映射是 1-1，并且总是如此。有没有办法防止这种连接发生，使生成的查询等于以下？

```
select P.FirstName
from Person.Person P 
```

（这个简单的案例看起来确实像微优化，但我已经正确分析并识别了不必要的连接，认为这是我的情况下的性能问题 - 我保证！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:54:09.487

做

```
CREATE UNIQUE INDEX ix
  ON Person.EmailAddress(BusinessEntityID) 
```

以保证没有多个匹配项。这改变了计划。

**前**

![在此处输入图像描述](https://i.stack.imgur.com/PcW5o.png)

**后**

![在此处输入图像描述](https://i.stack.imgur.com/kdCmi.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:49:49.083

您可以将此视图设置为索引视图。然后它将提高性能，并且每次从视图中获取数据时都不会加入。

由于索引视图为连接查询的结果集创建了一个单独的物理存储，以后每当您访问此视图时，它将与从单个表访问相同。

# mysql - SQL GROUP BY 不工作

> ID：16143997
> 
> 赞同：-1
> 
> 时间：2013-04-22T09:45:41.317
> 
> 标签：mysql, group-by

帐户表中有 4 个不同的行。

我不明白为什么我的语句只返回 1 行。

```
SELECT *,
my_accounts.id as 'aid' 
FROM my_accounts 
LEFT JOIN my_availability on my_accounts.id = my_availability.the_account
LEFT JOIN my_reviews on my_accounts.id = my_reviews.the_reviewer
WHERE account_type = 1 
GROUP BY my_accounts.id 
```

但是当我删除 GROUP BY 时，我得到 2 个相同的行。

此处的示例：sqlfiddle.com/#!2/e6f2c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:00:49.490

最好将 Group By 用于某些**聚合函数**。在 my_accounts.id 中给出两个不同的值并查看结果。根据您的说法，“当我删除 GROUP BY 时，我得到 2 个相同的行”。当有两个相同的值时，Group By 返回一个值。在您的情况下，my_accounts.id 中的两个值似乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:52:49.303

原来是 acount_type 的 where 子句导致了我的剧情。我确实找到了一个聚合解决方案