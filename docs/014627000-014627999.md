# StackOverflow 问答 14627000-14627999

# php - mod_rewrite 修复错误的子域命名

> ID：14627000
> 
> 赞同：0
> 
> 时间：2013-01-31T13:33:22.337
> 
> 标签：php, mod-rewrite, directory, cdn, subdirectory

我的服务器上有很多名称不明的文件夹。它们被称为 cdn-1 cdn3 img1 等。我已经收集了这些文件夹中的所有文件，并将它们放在一个文件夹中，称为 cdn。现在，我不希望用户在尝试访问位于 cdn-3.website.com/file/img/1.jpg 的文件时得到 404。相反，有没有办法修改这个文件夹，这样即使用户试图访问一个文件，比如说，cdn-7382910731293.website.com/file/1.jpeg，它仍然可以工作吗？这可能有点牵强，但我以前见过这样做。我为这样的解决方案找到的唯一有效代码是针对单个文件，而不是文件夹。

编辑：这是我迄今为止尝试过的。它只是行不通。它有什么问题？

`RewriteRule ^cdn([^/]*).1$ http://cdn.website.com/$1 [L]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:58:23.537

也许尝试让子域都指向同一个地方（无论 cdn.website.com 指向哪里），然后在该域的 htaccess 中粘贴以下内容：

```
RewriteCond %{HTTP_HOST} ^(cdn-1|cdn1|img1|etc)\.website\.com
RewriteRule (.*) http://cdn.website.com/$1 [R=301,L] 
```

只要文件在同一个地方，这应该可以无缝地工作。也就是说，只有主机名不同，主机名后面的文件路径也不同。我认为 RewriteCond 是一个正则表达式，因此您应该能够编写它以匹配您需要的任何内容。

我已成功使用此方法将旧域重定向到新域，并重定向`example.com`到`www.example.com`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:46:08.713

最简单的方法是使用 .htaccess[将所有 404 页面重定向到单个 PHP 页面](http://www.htaccessbasics.com/404-custom-error-page/)，然后检查新的 cdn 文件夹中是否存在这样的文件/图像，然后将其提供服务器或显示有效的 404 页面。

在提供图像等时也不要忘记标题；-)

# android - 控制另一个类的活动

> ID：14627001
> 
> 赞同：0
> 
> 时间：2013-01-31T13:33:23.363
> 
> 标签：android, controls, android-activity

我有两个类，A 和 B。A 类在 textview 中显示数据库中的数据。B 类有一个按钮，当点击这个按钮时，B 类的数据会随机变化。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:37:41.843

您可以更改数据库中的数据并`onResume`以`Activity`显示`TextView`. 或者您可以使用将文本存储在 中的静态变量，`TextView`并从其他类中对其进行修改。然后您可以在 中再次更新文本`onResume`。

`TextView`当另一个活动不活动时，您无法真正访问它。

# html - 在浏览器中查看数据时，如何在空的 HTML 表格字段中输入单词“NULL”？

> ID：14627004
> 
> 赞同：0
> 
> 时间：2013-01-31T13:33:25.033
> 
> 标签：html, asp-classic

我有一个 SQL 数据库，我已成功连接到该数据库，并将其显示在我的网页上。数据库中有很多空字段，所以当我在浏览器的表格中显示信息时，您会看到很多空字段。我尝试过使用空单元格功能，但这似乎不起作用。所以我想在空白字段中添加“NULL”这个词。

我已经问过这个问题了，但是因为我的问题有点含糊，所以它被关闭了。请参阅下面的表格代码：

```
<div id="displayBox" style="border: 3px solid #9C9595; height: 750; width: 1000px" class="blackBox">
<h2> View Sim Details </h2>
<table class="myTable" border="5">
<tr>
<th id="">ID</th>
<th id="">Number</th>
<th id="">Sim Card</th>
<th id="">ACCOLC</th>
<th id="">Notes</th>
<th id="">Next Upgrade</th>
<th id="">Pin</th>
<th id="">Puk</th>
<th id="">End Date</th>
<th id="">Update</th>
</tr>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:48:07.467

使用 ASP 经典，您可以简单地执行以下操作：

```
<td><%=StringIfNull(rs("SomeValue"))%></td>

function StringIfNull(value)
    StringIfNull = value

    if isnull(StringIfNull) then
        StringIfNull = "Null"
    end if
end function 
```

或者您可以在数据库级别处理此问题：

```
SELECT ISNULL(SomeValue, 'Null') AS SomeValue FROM MyTable 
```

# jquery - 有没有类似 ExtJS Grid 的 jQuery 插件？

> ID：14627005
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:33:31.683
> 
> 标签：jquery, extjs, datatables

通过远程搜索、过滤等...我无法说服我的雇主使用 ExtJS，他坚持使用 jQuery，原因是 ExtJS 看起来像 1995 年的 windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:48:50.217

我使用[JQGRid](http://www.trirand.com/blog/)取得了一些成功，尽管它不如 ExtJS 健壮。

# ruby-on-rails - 在 PostgreSQL 中使用 Sequel gem 插入数组

> ID：14627010
> 
> 赞同：1
> 
> 时间：2013-01-31T13:33:47.260
> 
> 标签：ruby-on-rails, ruby, postgresql, rake, sequel

我在代码中创建了一个具有以下架构的表

```
DB.create_table :Pokemon do
  primary_key :id
  String :first_name
  String :last_name
  String :email
  String :zipcode
  String :company_name
  String :google_profile
  String :skype
  String :phone
  String :about
  String :linkedin_profile_url
  String :company_url
  column :needs , 'Text[]'
  column :offering , 'Text[]'
end 
```

为了需要和提供我正在插入一个带有以下代码的字符串数组

```
pokes=DB[:Pokemon];
off=['hello1' , 'hello2']
nee= ['need1' , 'need2']
pokes.insert(:first_name => 'abcd' ,:last_name => 'mehandiratta', :offering => off , :needs =>  nee) 
```

当我运行它时出现错误

```
PG::Error: ERROR:  column "offering" is of type text[] but expression is of type record (Sequel::DatabaseError)
LINE 1: ...fering", "needs") VALUES ('abcd', 'mehandiratta', ('hello1',...
                                                             ^
HINT:  You will need to rewrite or cast the expression.
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:145:in `execute_query'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/database/logging.rb:33:in `log_yield'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:145:in `execute_query'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:132:in `execute'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:111:in `check_disconnect_errors'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:132:in `execute'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:413:in `_execute'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:242:in `execute'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:425:in `check_database_errors'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:242:in `execute'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/database/connecting.rb:236:in `synchronize'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/database/connecting.rb:236:in `synchronize'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:242:in `execute'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/dataset/actions.rb:801:in `execute'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/postgres.rb:525:in `fetch_rows'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/dataset/actions.rb:860:in `returning_fetch_rows'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/dataset/actions.rb:341:in `insert'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/shared/postgres.rb:1060:in `insert'
    from /var/lib/gems/1.8/gems/sequel-3.43.0/lib/sequel/adapters/shared/postgres.rb:1069:in `insert'
    from hello.rb:10 
```

谁能告诉一个合适的方法如何在 Sequel gem 中插入数组以及如何在列中添加文本数组

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T16:53:43.773

您需要使用 Sequel 的 pg_array 扩展，参见[http://sequel.rubyforge.org/rdoc-plugins/files/lib/sequel/extensions/pg_array_rb.html](http://sequel.rubyforge.org/rdoc-plugins/files/lib/sequel/extensions/pg_array_rb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T22:02:51.277

在您的数据库配置中：

`DB.extension :pg_array`

然后只需将每个数组转换为 PGArray 类型：

`pokes.insert(:first_name => 'abcd' ,:last_name => 'mehandiratta', :offering => Sequel.pg_array(off) , :needs => Sequel.pg_array(nee))`

`core-extensions`@Jeremy Evans 的回答提供了指向文档的链接，其中包括使用扩展的更简洁的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T16:11:40.127

正如错误所说，只需将 Array 表达式转换为字符串，如下所示：

```
pokes.insert(:first_name => 'abcd' ,:last_name => 'mehandiratta', :offering => off.to_s , :needs =>  nee.to_s) 
```

# javascript - D3 - 访问嵌套数据以创建导航树

> ID：14627014
> 
> 赞同：3
> 
> 时间：2013-01-31T13:33:59.617
> 
> 标签：javascript, json, d3.js, nested-lists, circle-pack

所以我一直在使用 d3 的缩放圈（[http://mbostock.github.com/d3/talk/20111116/pack-hierarchy.html](http://mbostock.github.com/d3/talk/20111116/pack-hierarchy.html)）：

![在此处输入图像描述](../Images/5ff66cf0a9d1cb583f46c70f20723d2a.png)

数据作为 json 数组传递给 d3 脚本，其中包含几个不同级别的数组和对象。

```
object = {
    class: "show",
    name: "Game of Thrones",
    children : [
        {
            class: "family",
            name: "Starks",
            children: [
                {
                    class: "members",
                    name: "Rob"
                },
                {
                    class: "members",
                    name: "Jon Snow"
                }
            ],
        },
        {
            class: "family",
            name: "Lannisters"
            children: [
                {
                    class: "members",
                    name: "Ser Jaime"
                },
                {
                    class: "members",
                    name: "Cersei"
                }
            ],
        }            
    ],
} 
```

显示圆圈没有问题。我现在正在尝试在映射数据层次结构的一侧创建导航显示。理想情况下，我想要的是这样的：

```
<ul>
  <li> Game of Thrones
    <ul>
      <li> Starks
        <ul>
          <li> Rob </li>
          <li> Jon Snow </li>
        </ul>
      </li>
      <li> Lannisters
        <ul> 
          <li> Ser Jaime </li>
          <li> Cersei </li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

这是一个基本的列表结构。我唯一能做的就是访问数据中的 1 级。我使用'divs' 来尝试首先降低结构。

```
var sentimentData = data.children;

var navBox = d3.select("body").append("body:div");

navBox
    .attr("class", "navBox");

var sentimentNav = navBox.selectAll('div')
    .data(sentimentData)
    .enter()
    .append('div')
    .text(function(d){ return d.name; }); 
```

我已经无法继续超过那个级别了。我在想递归方式可能是最好的方式。我在下面尝试了这个函数，但它只是将 div 附加到顶部 div 而不是父节点。

```
function buildNav(d) {
 if (d.children) {
   children = d.children;
   d3.select('body').append('div')
      .data(children)
      .enter()
      .append('div')
      .attr("class", function(d) {return d.name; });
   children.forEach(buildNav); 
   d._children = d.children;  
   d.children = null;
 }
}

buildNav(data); 
```

任何关于如何将孩子附加到他们的父母，或如何访问多个级别的数据的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T05:37:45.877

缺口！这是创建您在问题中描述的列表的示例的完整代码：（可能有更好的代码来做同样的事情，但是这段代码可以工作并产生您所说的 100%）（当然，这只是一个起点，你自然会进一步发展真正的导航）

索引.html：

```
<!DOCTYPE html>
<html>
<head>
    <title>Navigation</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="script.js"></script>
</head>
<body onload="load()">
    <h2>Navigation</h2>
    <h4>(using D3.js-generated navigation items)</h4>
</body>
</html> 
```

脚本.js：

```
function load(){
    object = {
        class: "show", name: "Game of Thrones",
        children : [
            {
                class: "family", name: "Starks",
                children: [
                    { class: "members", name: "Rob" },
                    { class: "members", name: "Jon Snow" }
                ],
            },
            {
                class: "family", name: "Lannisters",
                children: [
                    { class: "members", name: "Ser Jaime"},
                    { class: "members", name: "Cersei" }
                ],
            }            
        ],
    };

    buildNav(null, object);

    function buildNav(parent_ul, node){
        var current_ul, current_li;
        if(parent_ul == null)
            parent_ul = d3.select("body").append("ul");
        current_li = parent_ul.append("li").text(node.name);
        if (node.children) {
            current_ul = current_li.append("ul");  
            for (var i=0; i<node.children.length; i++) {
                buildNav(current_ul, node.children[i]); 
            };
        };
    };
}; 
```

这将产生以下页面：

![在此处输入图像描述](../Images/0602e3a640f1d0dad60722bcba7ac767.png)

希望这会对你有所帮助。

如果您还有其他问题，请告诉我。

# python - Python - 从 JSON 获取页面 ID

> ID：14627015
> 
> 赞同：0
> 
> 时间：2013-01-31T13:34:02.317
> 
> 标签：python, json

```
{"query":{"normalized":[{"from":"hijab","to":"Hijab"}],"pages":{"68301":{ 
```

在 Linux (Python) 中：

```
>>> data['query']['pages']
{u'68301': {u'extract': u'<p/>"</b>Hijab</b>" or "</b>\u1e25ij\u0101b</b>" (/h\u026a\u02c8d\u0292\u0251\u02d0b/, /h\u026a\u02c8d\u0292\xe6b/, /\u02c8h\u026a.d\u0292\xe6b/ or /h\u025b\u02c8d\u0292\u0251\u02d0b/;Arabic: \u062d\u062c\u0627\u0628\u200e, <small>pronounced&#160;</small>[\u0127i\u02c8d\u0292\xe6\u02d0b] ~ [\u0127i\u02c8\u0261\xe6\u02d0b]) is a veil which covers the head which is particularly worn by Muslim women beyond the age of puberty in the presence of non-related adult males.</p>', u'ns': 0, u'pageid': 68301, u'title': u'Hijab'}} 
```

谁能帮助我如何获取该号码（**68301**）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:36:02.267

数字是字典中的一个键：

```
>>> data['query']['pages'].keys()
[u'68301'] 
```

`.keys()`返回字典键列表，请参阅[Python`dict`类型文档](http://docs.python.org/2.7/library/stdtypes.html#mapping-types-dict)以获取字典的完整 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:36:33.983

因为这是一个字典，您可以使用以下`keys`功能：

```
data['query']['pages'].keys() 
```

# python - python cv2.circle子像素绘图

> ID：14627021
> 
> 赞同：2
> 
> 时间：2013-01-31T13:34:12.447
> 
> 标签：python, opencv, computer-vision

有谁知道如何将 cv2.circle 与子像素“移位”参数一起使用？

```
import cv2
import numpy as np

i1 = np.zeros((256, 256, 3), np.float32)
cv2.circle(i1, (199,199), 10, (1,0,0), -1)
cv2.imshow('1', i1)
i2 = np.zeros((256, 256, 3), np.float32)
cv2.circle(i2, (199,199), 10, (1,0,0), -1, shift=1)
cv2.imshow('2', i2)

cv2.waitKey(10000) 
```

我希望第二个圆圈中的圆圈位于 (99.5,99.5), 199*(2^-1) = 99.5 对我来说它出现在与第一个相同的位置。干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-10T11:28:12.370

shift 参数就像处理所有乘以 (1 << shift) 的东西。因此，如果您想在 (199.5, 199.5) 处绘制一个圆，您需要执行以下操作：

```
i2 = np.zeros((256, 256, 3), np.float32)
shift = 3
factor = (1 << shift)
cv2.circle(i2, (int(199.5 * factor + 0.5),int(199.5 * factor + 0.5)), 10 * factor, (1,0,0), -1, shift=shift)
cv2.imshow('2', i2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T09:22:24.283

到今天为止我还没有遇到这个问题（openCV 3.1.0）。但是您必须小心：输入`radius`也会发生变化！因此，在您的示例中，第二个圆圈是大小的一半。

# android - 如何在我的应用程序中使用 Zxing 库触发批量扫描模式以扫描多个条形码和二维码而不显示预览屏幕

> ID：14627024
> 
> 赞同：4
> 
> 时间：2013-01-31T13:34:31.773
> 
> 标签：android, zxing, barcode-scanner

谁能帮助我在我的应用程序中使用 Zxing 库实现批量扫描模式。它现在所做的是，在扫描条形码后，相机屏幕会消失，扫描结果会填充到我的 Activity 中。但我需要做的是一个接一个地扫描多个条形码，然后在按下后退按钮时返回我的活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:41:53.207

您的意思是将几个值返回给应用程序？不，它不能设置为这样做。该应用程序可以导出扫描历史记录，您可以注册为可以处理`text/csv`数据共享的应用程序。也许这大致足够接近解决方案。

# android - 使用地区名称在android中获取pincode/postalcode？

> ID：14627025
> 
> 赞同：1
> 
> 时间：2013-01-31T13:34:33.910
> 
> 标签：android, google-maps, android-maps, android-maps-v2

在我的应用程序中，从用户那里获取地址，用户输入区域名称后如何在编辑文本字段中自动显示密码/邮政编码。使用地图的任何人都知道请与我分享。

# statechart - 状态图和多个动作

> ID：14627029
> 
> 赞同：0
> 
> 时间：2013-01-31T13:34:37.097
> 
> 标签：statechart

过渡可以有两个或更多动作吗？

例如：

```
 event[condition]/action1;action2
stateA -------------------------------------------> stateB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:55:05.230

是的。

来自[维基百科](http://en.wikipedia.org/wiki/UML_state_machine#Transition_execution_sequence)：

> 在 UML 中，状态转换可以直接连接任意两个状态。这两种状态可能是复合的，被指定为过渡的主要来源和主要目标。图 7 显示了一个简单的转换示例并解释了该转换中的状态角色。UML 规范规定进行状态转换涉及按以下顺序执行以下操作（**请参阅 OMG 统一建模语言（OMG UML），基础设施版本 2.2 中的第 15.3.14 节**）：
> 
> *   评估与转换关联的保护条件，并仅在保护评估为 TRUE 时执行以下步骤。
> *   退出源状态配置。
> *   **执行与转换相关的操作。**
> *   输入目标状态配置。

我一直无法在 UML 规范中找到简洁的措辞来定​​义这一点，但是维基百科文章（被广泛引用）上的图表和进一步的措辞似乎暗示您应该将`;`其用作分隔符，就像在您的示例中一样。

然而，直觉上我希望系统的状态在每个动作被执行后都会改变，所以（再次直觉地）我建议*尽量减少*每次转换使用多个动作。而是考虑添加中间状态。

# c - 将 ioctl 代码从内核模块传递到用户空间程序

> ID：14627032
> 
> 赞同：1
> 
> 时间：2013-01-31T13:34:42.620
> 
> 标签：c, linux-kernel, kernel, ioctl

*内核模块中的ioctl*代码通常定义为*.c*或*.h*文件中的宏，即：

```
#define DRV_CTL_RESET          _IO(DRV_MAGIC, 0x01)
#define DRV_CTL_DSP_TO         _IO(DRV_MAGIC, 0x02) 
```

在用户空间程序中的用法是：

```
ioctl(drv_fd, DRV_CTL_DSP_TO, (unsigned long)tmo); 
```

一切都很好，但是..

**问题是：**在内核和用户空间之间同步*ioctl代码的良好做法是什么？*

我目前的解决方案是从内核模块的源代码自动生成一个 API 头文件，并将其包含在用户空间程序中。但我希望，也许有更方便的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:53:53.983

只需将 ioctl 代码放在 .h 文件中，然后使用内核空间和用户空间中的相同 .h 即可。还有什么比这更方便的呢？;)

# entity-framework - PostgreSql 或 SQL Server 2008 R2 应该与使用实体框架的 .Net 应用程序一起使用吗？

> ID：14627036
> 
> 赞同：0
> 
> 时间：2013-01-31T13:34:53.563
> 
> 标签：entity-framework, postgresql, entity-framework-4, ado.net, postgresql-9.0

我在 PostgreSQL 中有一个包含数百万条记录的数据库，我必须开发一个网站，该网站将使用 Entity Framework 使用该数据库（在 PostgreSQL 数据库的情况下使用 dotnetConnect for PostgreSQL 驱动程序）。

由于 SQL Server 和 .Net 都是 Windows 平台原生的，出于性能原因，我是否应该将数据库从 PostgreSQL 迁移到 SQL Server 2008 R2？

我已经阅读了一些比较这两个 RDBMS 的博客，但我仍然对应该使用哪个系统感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:03:20.343

这里没有明确的答案，因为它是主观的，但这是我会考虑的：

*   学习新 DBMS 及其工具的开销。
*   每个 RDBMS 使用的 SQL 方言以及您当前是否使用该方言。
*   从 PostgreSQL 迁移到另一个 RDBMS 所需的成本（金钱和时间）
*   您或您的客户是否对新的 RDBMS 有持续的预算？如果没有，请不要错误地开发应用程序以使用永远不会出现的 RDBMS。

就个人而言，如果您当前的数据库运行良好，我不会改变。为什么要修复没有损坏的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:42:56.873

您需要查明是否确实存在问题，以及是否迁移到 SQL Server 会在进行任何应用程序更改之前修复它。

首先忽略您拥有 .net 并使用实体框架的事实。查看您的 Web 应用程序将要进行的查询，并直接针对数据库进行尝试。看看它是否足够快地返回信息。

仅当您在调整索引等之后无法在您满意的时间返回答案时，您才确定数据库存在问题。此时，对 SQL Server 数据库尝试相同的测试是有意义的，但不要只是假设 SQL Server 会更快。您可能会发现两者都无法满足您的需求，您需要使用更快的磁盘或更多的内存等。

考虑到信息流的数量（一个方向的 SQL 语句和另一个方向的结果集）几乎是两种技术相同。

# php - 锚标记在 php 中不起作用，并且 html 是从其他文件呈现的

> ID：14627037
> 
> 赞同：0
> 
> 时间：2013-01-31T13:34:54.630
> 
> 标签：php, html

我正在尝试从数据库中获取数据并将其以表格形式粘贴到网页上，并且在每个表格数据中都有名称，这些名称在数据库中具有其他详细信息，如果单击该名称，我还必须在其他网页上显示这些名称。当锚标签不起作用时，我被卡住了。

不工作意味着锚标记中的名称就像普通文本而不是链接，虽然文本变成蓝色并带有下划线但它没有获得它的链接属性。

![](../Images/3a56ee59c74f90156059dcfe2c31e933.png)

我从数据库中获取数据的表正在工作，而且我**还**试图为表数据提供锚标记，这些表数据是简单的名称，可以链接到另一个文件。

我正在使用 2 个文件，一个是 .php，另一个是**同名**的 .html 。

这是我正在使用的一些与此相关的 LOC。我省略了其他 3 列。

**文件.php**

```
<?php
...

$query="select name from table1 order by name";

$rs=mysql_query($query);

$table = '<table>';

while ($row = mysql_fetch_array($rs))
{
  $cname = $row["name"];

  $table .= '<tr>
             <td><a href="file3.php">'.$cname.'</a></td> /*<a></a> not working*/
             </tr>';
}
$table .= '</table>';
include_once 'file.html';
?> 
```

**文件.html**

```
<html>
<body>

<form>..</form> /*passes user input to PHP file1*/

<p><?php echo $table;?></p>
</body>
</html> 
```

Html 是从 html 文件呈现的。

**file3.php**是我试图通过名称链接的页面。

我正在使用 XAMPP 1.7.7 和 PHP 5.3.8

有什么有用的建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T13:37:24.690

查看您的查询，您将`cname`其用作索引`$row`并且您的查询获取`name`

```
$query="select name from table1 order by name";
              --^--

$cname = $row["cname"];
               --^-- 
```

您的错误报告是否已关闭？你应该得到一个错误..**肯定**

> 注意：您应该停止使用 mysql_()，因为它很快就会被弃用，开始使用[mysqli_()](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)代替...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:41:07.417

我更喜欢使用 'mysql_fetch_assoc' 到 'mysql_fetch_array. 2\. 检查表是否有值。3\. 将 '$row["cname"]' 更改为 '$row["name"]'

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-31T13:42:43.037

这是你的代码

```
$table .= '<tr>
           <td><a href="file3.php">'.$cname.'</a></td> /*<a></a> not working*/
           </tr>'; 
```

把单引号换成双引号就好了

您只需用以下代码替换此代码： $table = "";

```
while ($row = mysql_fetch_array($rs))
{
  $cname = $row["name"];

  $table .= "<tr>
             <td><a href='file3.php'>$cname</a></td> 
             </tr>";
}
$table .= "</table>"; 
```

此代码将从您的数据库中打印实际变量 $cname 值请尝试此操作。

# apache - Apache基于域重定向301

> ID：14627039
> 
> 赞同：1
> 
> 时间：2013-01-31T13:34:59.330
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我已经稍微更改了网站上的链接，因此它对我们的国际网站更加 SEO 友好，所以我简单地翻译了“游戏”这个词，链接现在如下：

```
domain.com/games/id-123
domain.pl/gry/id-123
domain.de/spiele/id-123 
```

以前的网站链接是这样的：

```
domain.com/games/id-123
domain.pl/games/id-123
domain.de/games/id-123 
```

现在我想让 apache 301 重定向，这样来自其他网站、谷歌等的链接将被重定向到新地址：

```
domain.pl/games/id-123 -> domain.pl/gry/id-123
domain.de/games/id-123 -> domain.de/spiele/id-123 
```

我当然需要添加“ **id-123** ”是游戏的id，所以它是“动态的”，我不能像“Redirect 301 /gry/domain.com/spiele/”那样进行简单的重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:39:50.890

使用 mod_rewrite 并`%{HTTP_HOST}`匹配 a 中的适当域`RewriteCond`，并相应地路由：

```
RewriteEngine On
# Domain ends with .pl
RewriteCond %{HTTP_HOST} \.pl$ [NC]
RewriteRule ^games/(.*)$ gry/$1 [L,R=301]

# Domain ends with .de
RewriteCond %{HTTP_HOST} \.de$ [NC]
RewriteRule ^games/(.*)$ spiele/$1 [L,R=301] 
```

# java - 石英 2.16 中未删除触发器

> ID：14627045
> 
> 赞同：0
> 
> 时间：2013-01-31T13:35:21.517
> 
> 标签：java, quartz-scheduler

我在集群模式下使用 Quartz 2.1.6 和 Weblogic 12（实际上只有 1 台开发机器）并使用标准的 JDBC 委托（`org.quartz.impl.jdbcjobstore.StdJDBCDelegate`）

每个请求我可能有多个触发器。触发器与持久作业相关联，我将使用以下代码删除与单个请求关联的所有触发器：

```
Scheduler sched;
    try {
        sched = new StdSchedulerFactory().getScheduler("MyScheduler");
        Set<TriggerKey> triggerKeys =                sched.getTriggerKeys(triggerGroupEquals(String.valueOf(requestId)));
        for (TriggerKey k : triggerKeys) {
            if (sched.unscheduleJob(k)) {
                logger.info("Removed trigger " + k.toString() + " for request " + requestId);
            }
        }
    } catch (SchedulerException e) {
        logger.error(e);
    } 
```

在日志中，我看到消息“Removed trigger 123 for request abc”，但触发器仍然存在于数据库中并且仍然触发作业。我在控制台中没有异常跟踪。我正在使用 XA 数据源，但被调用的 EJB 业务方法被注释为支持事务。我看没有回滚。偶尔会删除触发器，但不会立即删除。

我错过了什么？

`quartz.properties`如果我将 Weblogic 12 与 Oracle 11 DBMS 一起使用，我应该声明什么 JDBC 委托？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:46:59.970

如果我是你，我会检查以下内容： - 确保数据库连接是“自动提交”，除非你的操作不会被持久化。

*   您可能有交易问题，请检查 txn 日志。

# python - WindowsError：[错误 127] 找不到指定的过程

> ID：14627047
> 
> 赞同：5
> 
> 时间：2013-01-31T13:35:22.987
> 
> 标签：python, ctypes

这个错误是什么意思？我无法搜索任何文档。该代码运行良好，但在重新启动 Windows 后突然中断。我查看了进程监视器，找到并访问了 DLL，没有任何权限错误

```
 File "c:\Python27\lib\ctypes\__init__.py", line 435, in __getattr__
    dll = self._dlltype(name)
  File "c:\Python27\lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 127] The specified procedure could not be found 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-22T20:49:10.840

我在使用 Python 2.7 时遇到了同样的问题，这就是我发现的：

-- 问题来了，因为我**安装了多个版本的python**（Python3.2、Python3.5 等）。

-- 由于多个版本，在运行时有多个同名的 DLL（在所有 python 版本库中）。所以它**无法确定要加载哪一个**。

**解决方案**： -- 我已经卸载了所有的python版本，除了我需要的版本（Python2.7）。然后运行程序，然后一切对我来说都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-03T14:29:37.773

**- 如果有人正在计算快速修复以再次使用 conda 下载：**

`conda install xyz`使用“CMD”和“PowerShell”下载软件包时，我遇到了完全相同的问题。尝试了很多以找出导致问题的原因，但无法获得相关帮助。但是，只是偶然或命中和试用，我在“Anaconda PowerShell Prompt”上执行了命令并且它起作用了！不知道确切的问题，但现在我准备继续下载我的包:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-24T18:30:37.770

如果您`dll`使用一个名称编译您的文件然后更改其名称，则可能会导致此错误。我不知道为什么，但这是我的问题。如果您更改了名称，请尝试将其更改回原来的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-12T08:22:14.813

仅由于 OSGeo4W 和 QGIS 安装而出现的问题卸载此。或使用 Select Express Web-GIS Install 重新安装，然后单击下一步。在“选择包”列表中，确保选择了 GDAL；MapServer 和 Apache 也默认启用，可以安全地取消选中。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-03-27T10:05:09.027

我在win10上遇到了同样的问题。将python更新到3.8后，这个问题就消失了。

# facebook - Facebook 应用程序未请求 user_photos 权限

> ID：14627049
> 
> 赞同：0
> 
> 时间：2013-01-31T13:35:33.277
> 
> 标签：facebook, permissions

我正在开发一个需要获取用户照片的 Facebook 应用程序。在应用程序仪表板中，我已将 user_photos 添加到“权限”部分下的“用户和朋友权限”字段中。

当我点击“预览登​​录对话框”时，它显示该应用程序将获得“您的基本信息”和“您的照片”，但是当我去测试该应用程序并获得授权对话框时，它说该应用程序将获得“您的基本信息” '和'你的电子邮件地址'。

我尝试通过我的 Facebook 帐户设置（应用程序）删除该应用程序，然后返回该应用程序，但权限仍然不正确。我也让一个朋友在他的电脑上测试了这个，他得到了同样的结果。

该应用程序在“基本”设置下设置为“Facebook 上的应用程序”。我在其他地方错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:56:26.807

这是因为您在“权限”部分输入的权限仅在经过身份验证的推荐中使用。（不）幸运的是，这个功能将随着 2 月的重大变化而被删除。看看这里：[http ://die.socialisten.at/2012/10/passive-sharing-the-end-of-authenticated-referrals-advanced-open-graph-2/](http://die.socialisten.at/2012/10/passive-sharing-the-end-of-authenticated-referrals-advanced-open-graph-2/)

因此，简而言之：您的应用程序本身应该提示用户此扩展权限。您必须更改登录对话框 url 的范围参数。

# android - 在 Android 上运行 NDK 项目

> ID：14627055
> 
> 赞同：1
> 
> 时间：2013-01-31T13:35:54.397
> 
> 标签：android, pdf, android-ndk, pdfrenderer, pdf-rendering

我正在尝试开发应用程序的一部分，使其能够将 PDF 文件的页面呈现为位图，或将其显示在查看器上。我正在寻找一个免费的开源软件。我已经尝试了很多，例如[droidreader](http://code.google.com/p/droidreader/)和[android-pdf](http://code.google.com/p/android-pdf/)。问题是我认为它需要 NDK 才能运行，我在尝试在 Eclipse 上构建它时不断出错，即使我直接使用 SVN 导入它。任何人都可以向我推荐一个好的分步教程，至少可以帮助我运行这些项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:40:13.003

只需下载[Android NDK](https://developer.android.com/tools/sdk/ndk/index.html)

然后在项目文件夹中运行以下命令：

```
[path to ndk]/ndk-build 
```

有关[Android NDK 页面的更多信息](https://developer.android.com/tools/sdk/ndk/index.html#GetStarted)

# php - php中的tcp客户端连接

> ID：14627056
> 
> 赞同：0
> 
> 时间：2013-01-31T13:35:55.350
> 
> 标签：php, tcp, connection

我有一个连接到服务器并以 xml 或 json 形式返回结果的 web 服务。它是用 asp.net 编写的。我想在php中使用相同的。

```
using (TcpClient tcpClient = new TcpClient()) 
    { 
        tcpClient.Connect("1.1.1.1", port: 42011);
        string search = "search^10|5|2|1^gagl^55592a782ce899d2" + 
System.Environment.NewLine; 
        using (NetworkStream ns = tcpClient.GetStream()) 
        { 
            byte[] bytes = ASCIIEncoding.ASCII.GetBytes(search); 
            ns.Write(bytes, 0, bytes.Length); 
            string result = ReadBuffer(ns); 

          // [.. consume result XML string ..] 

        } 
        tcpClient.Close(); 
    }
        }
protected string ReadBuffer(NetworkStream ns) 
{ 
    byte[] lenghtBuffer = new byte[4]; 
    int bytesRead = 0; 
    while (bytesRead < 4) 
        bytesRead += ns.Read(lenghtBuffer, bytesRead, 4 - bytesRead); 
    if (BitConverter.IsLittleEndian) 
        Array.Reverse(lenghtBuffer); 
    int responseLength = BitConverter.ToInt32(lenghtBuffer, 0); 
    byte[] buffer = new byte[responseLength]; 
    bytesRead = 0; 
    while (bytesRead < responseLength) 
        bytesRead += ns.Read(buffer, bytesRead, responseLength - bytesRead); 
    string result = ASCIIEncoding.ASCII.GetString(buffer, 0, bytesRead); 
    return result; 
} 
```

上述代码在 .net 中返回值。如何使用相同的值在 php 中获取结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:41:01.137

您可以使用 fsockopen ( [http://php.net/manual/fr/function.fsockopen.php](http://php.net/manual/fr/function.fsockopen.php) ) 打开 TCP 连接并检索结果。

# ios - 可以使用 getter 在 iOS 中配置 UIButtons 和 d UIViews 吗？

> ID：14627057
> 
> 赞同：0
> 
> 时间：2013-01-31T13:35:57.803
> 
> 标签：ios, user-interface, instantiation, getter

我经常使用延迟加载来实例化自定义类、数组等。模式通常是：

```
@property (strong, nonatomic) Class *class;

...

- (Class *)class
{
    if(!_class) _class = [[Class alloc]init];
    return _class;
} 
```

是否可以使用相同的模式来配置 UI 元素？例如，我不想在 ViewWillAppear 中格式化我所有的按钮和视图，而是将格式化放在 getter 中。例如：

```
- (UIButton *)button
{
    if(!_button) {
        _button = [[UIButton alloc]init];
        self.button.backgroundColor = [UIColor redColor];
    }
    return _button;
} 
```

问题是我正在使用情节提要，XCode 实例化了按钮，所以询问它是否为 nill 应该总是返回 false。所以背景永远不会改变。如果我删除 if-then，那么每次访问 getter 时都会设置背景，这可能没问题但不是最佳的。

那么，如何使用 UI 元素的 getter 来配置元素呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:42:22.817

如果这确实是您想要的方式，只需使用`BOOL`标志。例如：

```
@interface MyClass() {

    BOOL _hasCustomisedButton;
}

@property (strong, nonatomic) UIButton *button;

@end

@implementation MyClass

- (UIButton *)button {

    if (_hasCustomisedButton || _button == nil) {
        // check for nil button as well in case the nib isn't loaded yet
        return _button;
    }

    [_button setBackgroundColor:[UIColor redColor]];

    _hasCustomisedButton = YES;

    return _button;
}

@end 
```

# performance - PowerBuilder Describe 方法与 Evaluate expression vs. GetItem... (GetItemString, ...) DataWindow 方法

> ID：14627058
> 
> 赞同：1
> 
> 时间：2013-01-31T13:35:59.380
> 
> 标签：performance, optimization, expression, powerbuilder, datawindow

在 DataWindow 控件中使用带有**Evaluate 表达式的****Describe**方法和**GetItem...** (GetItemString, GetItemDate, GetItemNumber, ...) DataWindow 方法之间是否存在显着的性能差异？

 ****```
l_s_ret = l_dw.Describe("Evaluate(~"" + a_s_expression + "~", " + String(a_l_rownumber) + ")")

l_s_ret = l_dw.GetItemDecimal(a_l_rownumber, a_s_expression) 
```

我想要一个函数来通过使用 Evaluate 表达式的 Describe 方法从 DataWindow 控件获取一些数据，而不是使用 GetItem... 方法来获取特定数据类型。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:31:29.470

为什么不循环遍历几十万个，捕获前后的 CPU() 并让**我们**知道呢？（此外，最后，您是“重要”的评判者；对我来说，如果它可以在批处理作业的大循环中使用，那么任何差异都很重要。）

然而，只是盯着它，考虑到两者都必须执行转换数据类型的昂贵操作，加上 Evaluate() 必须解析表达式，如果 Evaluate() 更快，我会感到惊讶。

如果你不想重新发明轮子，PFC 有一个函数可以做这个的一个版本：(pfcdwsrv.pbl)pfc_n_cst_dwsrv.of_getitem()。如果您手边没有它的副本，您可以[从其当前站点](http://pfc.codeplex.com/)获取一份副本。

祝你好运，

特里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T17:39:45.867

您可以使用点表示法从数据窗口行/列中以字符串形式检索数据。这不仅允许您使用一行代码获取单个值，还可以获取行和/或列值。

马特****

# php - 在 BeagleBoard-xM 上为 Android 2.3.4 提供完整 php 支持的服务器

> ID：14627067
> 
> 赞同：2
> 
> 时间：2013-01-31T13:36:20.297
> 
> 标签：php, android, webserver, xampp, beagleboard

我正在为安装在 beagleboard-xM 上的 android 2.3.4 姜饼寻找一些好的开源网络服务器。我已经使用了 PAW 服务器，但是 php 功能还不够好。我需要一台完全具备 XAMP 服务器工作能力的服务器。有什么建议请...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:32:37.063

我认为您找不到与 xamp 相同的东西...例如，还有另一个应用程序（我尚未对其进行测试）[https://play.google.com/store/apps/details?id=com.andi .serverweb&feature=related_apps](https://play.google.com/store/apps/details?id=com.andi.serverweb&feature=related_apps)

其他选择是使用一些“Debian 安装程序”在您的机器上获得干净的原始 Debian。

# r - 优化时间序列数据帧中的搜索

> ID：14627068
> 
> 赞同：0
> 
> 时间：2013-01-31T13:36:24.657
> 
> 标签：r, optimization, dataframe, posixct

我在 R 中有一个 50 列 x 250 万行的数据框，代表一个时间序列。时间列属于 POSIXct 类。为了分析，我反复需要在特定时间找到给定类的系统状态。

我目前的方法如下（简化且可重复）：

```
set.seed(1)
N <- 10000
.time <- sort(sample(1:(100*N),N))
class(.time) <- c("POSIXct", "POSIXt")
df <- data.frame(
  time=.time,
  distance1=sort(sample(1:(100*N),N)),
  distance2=sort(sample(1:(100*N),N)),
  letter=sample(letters,N,replace=TRUE)
)

# state search function
time.state <- function(df,searchtime,searchclass){
  # find all rows in between the searchtime and a while (here 10k seconds)
  # before that
  rows <- which(findInterval(df$time,c(searchtime-10000,searchtime))==1)
  # find the latest state of the given class within the search interval
  return(rev(rows)[match(T,rev(df[rows,"letter"]==searchclass))])
}  

# evaluate the function to retrieve the latest known state of the system
# at time 500,000.
df[time.state(df,500000,"a"),] 
```

但是，调用的`which`成本非常高。或者，我可以先按类过滤，然后找到时间，但这并不会改变评估时间。根据 Rprof 的说法，这`which`花费`==`了大部分时间。

有没有更有效的解决方案？时间点按弱递增排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:13:56.473

因为`which`,`==`和`[`都与数据帧的大小成线性关系，所以解决方法是生成子集数据帧进行批量操作，如下：

```
# function that applies time.state to a series of time/class cominations
time.states <- function(df,times,classes,day.length=24){
  result <- vector("list",length(times))
  day.end <- 0
  for(i in 1:length(times)){
    if(times[i] > day.end){
      # create subset interval from 1h before to 24h after
      day.begin <- times[i]-60*60
      day.end <- times[i]+day.length*60*60
      df.subset <- df[findInterval(df$time,c(day.begin,day.end))==1,]
    }
    # save the resulting row from data frame
    result[[i]] <- df.subset[time.state(df.subset,times[i],classes[i]),]
  }
  return(do.call("rbind",result))
} 
```

随着`dT=diff(range(df$times))`和`dT/day.length`大，这减少了一个因子的评估时间`dT/(day.length+1)`。

# parsing - 解析没有 .proto 文件的 Google Protocol Buffers 数据报？

> ID：14627069
> 
> 赞同：6
> 
> 时间：2013-01-31T13:36:24.923
> 
> 标签：parsing, protocol-buffers

是否可以在没有任何 .proto 文件的情况下解析传入的谷歌协议缓冲区数据报？我现在只是使用协议缓冲区对其进行序列化，但不知道 IDL 文件。

我正在寻找一种通过某种反射来迭代任何值的方法？这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T06:47:18.533

`protoc --decode_raw < my_file`

检查输出时需要考虑以下事项：

*   没有任何字段名称可见，只有标签号。
*   所有 varint-fields 都显示为整数。这对于大多数类型都可以，但 sint* 将以“锯齿形”格式出现。
*   双精度和浮点数将显示为十六进制。
*   字节、字符串字段和子消息看起来都一样，即只是一堆字节。

如果您想以编程方式解码消息，则可以在使用上述方法弄清楚字段的含义后编写自己的 .proto 文件。

# c# - Windows 窗体 - 将组合框一分为二

> ID：14627080
> 
> 赞同：0
> 
> 时间：2013-01-31T13:37:10.473
> 
> 标签：c#, winforms, visual-studio-2010

我尝试使用 .NET/VisualStudio2010 实用程序重新创建 Accept-made 用户界面。在我看到的其中一种形式中：

![在此处输入图像描述](../Images/784989e9c0e8f7e588f97b5a31fb1301.png)

您可以看到信息是如何从两个不同的表中分离出来的。是否可以使用 Windows 窗体实现相同的目标，如果可以，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:41:11.163

我本可以发誓我过去已经这样做了，但现在我想知道这是否回到了我的 vb6 时代还有其他一些控制，因为所有迹象都表明现在我正在努力解决这个问题。

但是，我确实找到了一些可能对您有用的东西：http: [//www.codeproject.com/Articles/19781/A-data-bound-multi-column-combobox](http://www.codeproject.com/Articles/19781/A-data-bound-multi-column-combobox)

# scala - 如何在 sbt 中的“包”期间禁用依赖关系解析

> ID：14627081
> 
> 赞同：6
> 
> 时间：2013-01-31T13:37:12.093
> 
> 标签：scala, sbt, ivy

我们的项目包含多个子项目和复杂的相互依赖关系。子项目共享相似的外部依赖集（Spring、Apache 等）。

即使在离线模式下，也需要花费大量时间来解决依赖关系（可能是因为冗余的依赖关系检查）。

如何解决这个问题？我们如何在打包过程中禁用更新和重新解析外部依赖项。

版本：0.12.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T17:19:02.493

`skip in update := true`将阻止`update`做任何工作。它改用前一个的结果`update`。

请注意，这意味着自上次运行`update`以来必须已经运行（可能是间接地）`clean`，自上次运行以来对依赖配置的更改将被忽略，并且缓存必须仍然包含上一次运行的 jar `update`。

直接运行`update`会覆盖`skip`设置，导致`update`正常运行。

最后，类似的依赖集并不一定意味着依赖解析会更快。这仅意味着网络访问、下载和元数据解析不应该对每个依赖项进行多次。

# c# - 将 Datareader 加载到数据表时有行我得到行数 = 0

> ID：14627091
> 
> 赞同：0
> 
> 时间：2013-01-31T13:37:54.853
> 
> 标签：c#, asp.net, datatable, sqldatareader

```
try
        {
            String empid1 = Request.QueryString["MyText"];

            int empid = int.Parse(empid1);
            string constr = System.Configuration.ConfigurationManager.ConnectionStrings["EmployeeDatabase"].ConnectionString;
            SqlConnection con = new SqlConnection(constr);
            con.Open();
            SqlCommand cmd = new SqlCommand("ReportingManagers", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@EmpID", SqlDbType.Int, 0).Value = empid;

            SqlDataReader dr = cmd.ExecuteReader();
            dr.Read();
            LinkButton3.Text = string.Empty;
            int i = 1;
             while(dr.Read())
            {

                TreeNode parentNode = new TreeNode("L" + i++ + "Manager : " + dr["Emp_Name"].ToString());
                parentNode.Value = dr["Emp_ID"].ToString();
                TreeView1.Nodes.Add(parentNode);
                parentNode.ChildNodes.Add(new TreeNode("Short ID : " + dr["Short_ID"].ToString()));
                parentNode.ChildNodes.Add(new TreeNode("EmpID : " + dr["Emp_ID"].ToString()));
              //  LinkButton3.Text = "Reporting Managers";  
            }

             DataTable dt = new DataTable();
             dt.Load(dr);
             if (dt.Rows.Count > 1)
             {
                 LinkButton3.Text = "Reporting Managers";  
             }

            dr.Close();
            con.Close();
        } 
```

请解释为什么我的 if 循环没有在上面的代码中执行。我可以看到，在数据表 dt 中，我的行数为 '0'，但我的博士显示有行是正确的。我不想在这个场景中使用 sql 适配器。

在这种情况下如何捕获数据表的行数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:45:04.570

您不能使用已经使用到数据末尾的数据读取器加载数据表。
尝试以这种方式更改代码执行的顺序

```
SqlDataReader dr = cmd.ExecuteReader();
LinkButton3.Text = string.Empty;
int i = 1;
DataTable dt = new DataTable();
dt.Load(dr);
if (dt.Rows.Count > 1)
{
    LinkButton3.Text = "Reporting Managers";  
    foreach(DataRow r in dt.Rows)
    {
        TreeNode parentNode = new TreeNode("L" + i++ + "Manager : " + r["Emp_Name"].ToString());
        parentNode.Value = r["Emp_ID"].ToString();
        TreeView1.Nodes.Add(parentNode);
        parentNode.ChildNodes.Add(new TreeNode("Short ID : " + r["Short_ID"].ToString()));
        parentNode.ChildNodes.Add(new TreeNode("EmpID : " + r["Emp_ID"].ToString()));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:40:32.840

因为在将阅读器加载到 TreeNode 结构（读取整个阅读器的 while 循环）时，您已经通读了阅读器。DataReaders 仅是转发的，因此您也不能只是“重置”阅读器。

# java - 如何在 Eclipse 上调试 Google App Engine API

> ID：14627092
> 
> 赞同：1
> 
> 时间：2013-01-31T13:37:54.380
> 
> 标签：java, eclipse, api, google-app-engine, debugging

我开始使用 Google App Engine 开发 Android 应用程序，我想知道，当我从客户端代码发送请求时，有没有办法调试 API 代码？如果没有，调试 API 代码最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:15:00.930

您只需在本地以调试模式启动 AppEngine 应用程序，然后启动指向 localhost 而不是已部署版本的 Android 应用程序（电话或模拟器，两者都可以），如下所示：

```
String serviceUrl = "http://10.0.2.2:8888/yourAppName"; 
```

你不能说`localhost`因为那是设备本身。完成此操作后，您可以在代码等上使用断点进行正常调试。

我不知道存在用于 appengine 的远程调试工具，但除非您尝试解决仅在部署后才出现的问题，否则没有理由这样做。

# bash - Intepreting string in bash script using inotifywait and avconv

> ID：14627095
> 
> 赞同：1
> 
> 时间：2013-01-31T13:38:01.237
> 
> 标签：bash, ubuntu, scripting

So i've written a bash script to take newly written to video files and transcode them for playback and streaming in my server here is the script

```
 while true; do
    printf -v filename '%q' "$(inotifywait --format "%w""%f" -r -e close_write /var/$
    echo $filename
            if [[ $filename == *".mp4"* ]]; then
                    echo "1"
                    avconv -i "$filename" "`echo ${filename%.mp4}.webm`"
            fi

            if [[ $filename == *".mkv"* ]]; then
                    echo "2"
                    avconv -i "$filename" "`echo ${filename%.mkv}.mp4`"
                    avconv -i "$filename" "`echo ${filename%.mkv}.webm`"
            fi

            if [[ "$filename" == *".avi"* ]]
                    then echo "3"
                    avconv -i "$filename" "`echo ${filename%.avi}.mp4`" &
                    avconv -i "$filename" "`echo ${filename%.avi}.webm`"&
                 fi
      done 
```

The script works fairly well however if the $filename contains spaces avconv breaks and the script returns:

```
 Watches established.
      /var/www/media2net/tv/The\ Daily.mkv
      2
      avconv version 0.8.4-4:0.8.4-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav s
      built on Nov  6 2012 16:51:33 with gcc 4.6.3
       /var/www/media2net/tv/The\: No such file or directory
      avconv version 0.8.4-4:0.8.4-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav 
      built on Nov  6 2012 16:51:33 with gcc 4.6.3
      /var/www/media2net/tv/The\ Daily.mkv: No such file or directory
      Setting up watches.  Beware: since -r was given, this may take a while!
      Watches established. 
```

however this is not correct as I can view the said file inside it's respective directory, I also have tested avconv with the following in the shell and everything works properly and avconv transcodes video

```
 avconv -i /var/www/media2net/The\ Daily.mkv /var/www/media2net/tv/The\ Daily.webm 
```

Basically I am wondering what I am doing wrong in my script or if anyone else has experienced a similar problem using avconv or ffmpeg (as the 2 are fairly similar and avconv is ubuntu's fork of the project) any help would be greatly appreciated! Thanks in advance -brendan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:37:01.553

There seems to be some inconsistencies in your usage of escape backslashes and quotes. In fact, you only need one of the two, and the easier to use is certainly the quotes.

So, to remove the backslashes in filenames would be the first good thing to do.

Additionally,

```
"$(inotifywait --format "%w""%f"... 
```

should be corrected in :

```
"$(inotifywait --format '%w%f'... 
```

Also, the lines which comprehend something like :

```
"`echo ${filename%.mkv}.mp4`" 
```

are somewhat ambiguous, as in, fact, you are echoing - if there is a space in `$filename` - two chains of characters -. It should be corrected in :

```
"${filename/%.mkv/.mp4}" 
```

# r - 如何加快按组转置data.frame？

> ID：14627096
> 
> 赞同：4
> 
> 时间：2013-01-31T13:38:02.437
> 
> 标签：r, dataframe

我有这个`data.frame`等长组（`id`）

```
id  |  amount 
--------------
 A  |   10   
 A  |   54   
 A  |   23   
 B  |   34   
 B  |   76    
 B  |   12 
```

我想**按组** `id`转置：

```
 id |
----------------------
 A  | 10  |  54 | 23  
 B  | 34  |  76 | 12 
```

这样做最有效的方法是什么？

我以前用过`reshape`，`dcast`但它们确实很慢！（我有很多数据，很想加快这个瓶颈）

有更好的策略吗？使用`data.table`还是矩阵？？任何帮助将非常感激！

```
# Little data.frame
df <- data.frame(id=c(2,2,2,5,5,5), amount=as.integer(c(10,54,23,34,76,12)))

# Not so little data.frame
set.seed(10)
df <- data.frame(id = rep(sample(1:10000, 10000, replace=F),100), amount=as.integer(floor(runif(1000000, -100000,100000))))

# Create time variable
df$time <- ave(as.numeric(df$id), df$id, FUN = seq_along)

# The base R reshape strategy
system.time(df.reshape <-reshape(df, direction = "wide", idvar="id", timevar="time"))
user  system elapsed 
6.36    0.31    6.69 

# The reshape2 dcast strategy
require(reshape2)
a <- system.time(mm <- melt(df,id.vars=c('id','time'),measure.vars=c('amount')))
b <- system.time(df.dcast <- dcast(mm,id~variable+time,fun.aggregate=mean))
a+b
user  system elapsed 
14.44    0.00   14.45 
```

**更新** 使用每个组长度相等的事实，您可以使用`matrix`-function。

```
df.matrix <- data.frame(id=unique(df$id), matrix(df$amount, nrow=(length(unique(df$id))), byrow=T))
user  system elapsed 
0.03    0.00    0.03 
```

*注意：*此方法假定 data.frame 预先排序为`id`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:28:15.787

矩阵方法将使用：

```
 system.time({ df.reshape <-matrix(df$amount, nrow=10000, byrow=TRUE); 
               rownames(df.reshape)<- df$id[1:10000]
             } )
   user  system elapsed 
  0.010   0.006   0.016 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:04:50.300

试试这个：

```
 dFrame<-data.frame(id = c(rep("A",3),rep("B",3)),amount = c(10,54,23,34,76,12))
 newFrame<-cbind(data.frame(id = unique(dFrame$id)),matrix(as.numeric(unlist(tapply(dFrame$amount,dFrame$id,identity))),nrow=length(unique(dFrame$id)),byrow=T)) 
```

括号可能已关闭，我已经尽量小心了 - 我目前没有可用的 R 解释器

基于您提供的 df 示例代码的基准测试结果：

```
 replications elapsed relative user.self sys.self user.child sys.child
   1            1   4.193        1     4.056    0.064          0         0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:24:04.143

这不是问题`reshape`。`aggregate`从基地应该能够处理这个。

```
df.out <- aggregate(amount ~ id, data=df, c)
# running on the small data
#   id amount.1 amount.2 amount.3
# 1  2       10       54       23
# 2  5       34       76       12 
```

这不是你想要的吗？

* * *

好的，似乎`DWin`'s 解决方案的改编版本是最快的。但是，结果将按 排序`id`。如果您不想要那个，那么`Aditya`'s 似乎是可以使用的。

以下是功能和基准测试结果：

*   使用`aggregate`：

    ```
    AGG <- function() {
        df.agg <- aggregate(amount ~ id, data=df, c)
    } 
    ```

*   使用`Aditya`_

    ```
    SEC <- function() {
        df.sec <- cbind(data.frame(id = unique(df$id)), 
                matrix(as.numeric(unlist(tapply(df$amount, df$id, identity))), 
                nrow = length(unique(df$id)), byrow = T))
    } 
    ```

*   使用`Dwin`'s 的修改版本：

    ```
    DWIN_M <- function() {
        df1 <- df[with(df, order(id)), ]
        idx <- df$id[!duplicated(df$id)]
        df.dwin <- cbind(data.frame(id=idx), 
                    as.data.frame(matrix(df1$amount, 
                    nrow=length(idx), byrow=TRUE)))
    } 
    ```

*   基准测试：

    ```
    require(rbenchmark)
    benchmark(AGG(), SEC(), DWIN_M(), replications=3, order="elapsed")

    #      test replications elapsed relative user.self sys.self user.child sys.child
    # 3 DWIN_M()            3   4.175    1.000     4.148    0.000          0         0
    # 2    SEC()            3  17.568    4.208    17.449    0.016          0         0
    # 1    AGG()            3  24.529    5.875    24.306    0.044          0         0 
    ```

让我知道我是否犯了任何错误。

# extjs - onchange 后的 Ext Js 组合框值是值而不是标签

> ID：14627100
> 
> 赞同：6
> 
> 时间：2013-01-31T13:38:13.533
> 
> 标签：extjs, combobox, grid

只是对应该很容易解决的事情感到沮丧，但我太简单了，看不到它:)

我有一个网格，其中 1 列是一个组合框。这件事工作得很好，并且通过我的 ajax 请求发送了正确的值，但是在我编辑了网格行之后，组合框消失了，并且出现的值不是标签，而是值。

```
editor: new Ext.form.field.ComboBox({
            typeAhead: true,
            lazyRender: true,
            store: new Ext.data.ArrayStore({
                fields: ['contact', 'contactLabel'],
                data: [
                    [1,'Jan'],
                    [2,'Jeroen'],
                    [3,'Mattijs'],
                    [4,'Sven'],
                    [5,'Thomas'],
                    [6,'Yoran']
                ]
            }),
            valueField: 'contact',
            displayField: 'contactLabel',
            hiddenName: 'contact'
        }) 
```

所以发生的事情是，当我将组合框更改为 ie 时。“Thomas”，单元格的值变为“5”，而不是“Thomas”。我认为定义值/显示字段会有所作为，但事实并非如此。

有谁知道答案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:58:16.250

我不太确定我是否正确。如果是这样，您将需要一个渲染器。我想下面的示例代码应该会告诉你，如果你的意思是这样的情况。

```
// the renderer. You should define it within a namespace
var comboBoxRenderer = function(combo) {
  return function(value) {
    var idx = combo.store.find(combo.valueField, value);
    var rec = combo.store.getAt(idx);
    return (rec === null ? '' : rec.get(combo.displayField) );
  };
}

// the edit combo
var combo = new Ext.form.ComboBox({
  store: store,
  valueField: "value",
  displayField: "text"
}); 
```

请参阅这个完整的工作示例（cellEditing + rowEditing）**[JSFiddle（）](http://jsfiddle.net/sran/Sj8zM/16/)**

这是完整的代码

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone', 'id'],
    data:{'items':[
        {"name":"Lisa", "email":"lisa@simpsons.com", "phone":"555-111-1224","id": 0},
        {"name":"Bart", "email":"bart@simpsons.com", "phone":"555-222-1234","id": 1},
        {"name":"Homer", "email":"home@simpsons.com", "phone":"555-222-1244","id": 2},
        {"name":"Marge", "email":"marge@simpsons.com", "phone":"555-222-1254","id": 3}
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

    // the combo store
var store = new Ext.data.SimpleStore({
  fields: [ "value", "text" ],
  data: [
    [ 0, "Option 0" ],
    [ 1, "Option 1" ],
    [ 2, "Option 2" ],
    [ 3, "Option 3" ]
  ]
});

// the renderer. You should define it within a namespace
var comboBoxRenderer = function(combo) {
  return function(value) {
    var idx = combo.store.find(combo.valueField, value);
    var rec = combo.store.getAt(idx);
    return (rec === null ? '' : rec.get(combo.displayField) );
  };
}

// the edit combo
var combo = new Ext.form.ComboBox({
  store: store,
  valueField: "value",
  displayField: "text"
});

// demogrid
Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        {header: 'Name',  dataIndex: 'name', editor: 'textfield'},
        {header: 'Email', dataIndex: 'email', flex:1,
            editor: {
                xtype: 'textfield',
                allowBlank: false
            }
        },
        {header: 'Phone', dataIndex: 'phone'},
        {header: 'id', dataIndex: 'id', editor: combo, renderer: comboBoxRenderer(combo)}
    ],
    selType: 'cellmodel',
    plugins: [
        Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 1
        })
    ],
    height: 200,
    width: 400,
    renderTo: 'cell'
});
// demogrid
Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        {header: 'Name',  dataIndex: 'name', editor: 'textfield'},
        {header: 'Email', dataIndex: 'email', flex:1,
            editor: {
                xtype: 'textfield',
                allowBlank: false
            }
        },
        {header: 'Phone', dataIndex: 'phone'},
        {header: 'id', dataIndex: 'id', editor: combo, renderer: comboBoxRenderer(combo)}
    ],
    selType: 'rowmodel',
    plugins: [
        Ext.create('Ext.grid.plugin.RowEditing', {
            clicksToEdit: 1
        })
    ],
    height: 200,
    width: 400,
    renderTo: 'row'
}); 
```

**html**

```
<div id="cell"></div>
<div id="row"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:00:20.470

尝试：

```
data: [
    {contact: 1, contactLabel: 'Jan'},
    ...
] 
```

# sql - 如何使用动态 SQL 替换 Pivot 中的空值

> ID：14627101
> 
> 赞同：0
> 
> 时间：2013-01-31T13:38:21.460
> 
> 标签：sql, null, pivot

> **可能重复：**
> [如何在 SQL 中替换 PIVOT 中的空值](https://stackoverflow.com/questions/14626372/how-to-replace-nulls-in-pivot-in-sql)

我正在使用以下动态 SQL：

```
 select *
    from #tempfinaltable
    pivot (sum(TotalXSAAL) for Section_desc in
    ' + '('+@BranchNames++')) AS AALs' 
```

这与上面的查询相同

```
select *
from #tempfinaltable
pivot (sum(TotalXSAAL) for Section_desc in
([Communication],[Construction],[Energy],[Financial Institutions],
 [General Property],[HIGHER ED & HEALTHCARE],
 [Inland Marine],[Real Estate])) AS AALs 
```

我想做的是在运行此查询时将空值替换为零。

我尝试使用 ISNULL 以便可以将其替换为零，但它不起作用。在 IsNull 附近说不正确的语法。任何想法如何解决它？

```
select *
from #tempfinaltable
pivot IsNull((sum(TotalXSAAL),0) for Section_desc in
([Communication],[Construction],[Energy],[Financial Institutions],
 [General Property],[HIGHER ED & HEALTHCARE],
 [Inland Marine],[Real Estate])) AS AALs 
```

我也尝试过这样做，但也没有用。

```
select Section_Desc, Zone, ISNULL(Sum(TotalXSAAL),0)
from #tempfinaltable
pivot (sum(TotalXSAAL) for Section_desc in
([Communication],[Construction],[Energy],
 [Financial Institutions],[General Property],
 [HIGHER ED & HEALTHCARE],[Inland Marine],
 [Real Estate])) AS AALs 
```

此外，我的数据中没有任何空值，但是当我使用数据透视表时，结果显示为空值。不知道为什么。

```
Example Data
Section_Desc    Zone    TotalXSAAL
Energy           Zone1  0
Energy           Zone2  0
Energy           Zone10 452
Energy           Zone2  1123
Energy            Zone3 87

Sameple Ouput:
ZONE    Communication   Construction    Energy  Financial Institutions  General  property   Higher Ed & Healthcare  Inland Marine   Real estate
ZONE1   10221   NULL    42124   89214211    911243  NULL    123120  1234235 
```

答案在这里： [How to Replace Nulls in PIVOT in SQL](https://stackoverflow.com/questions/14626372/how-to-replace-nulls-in-pivot-in-sql)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:45:55.700

在对临时表进行透视之前准备好临时表中的数据。

```
ISNULL(FieldName, '0') as FieldName 
```

# android - 为什么我的 Android 应用程序强制关闭，但没有明显的错误导致它？

> ID：14627103
> 
> 赞同：0
> 
> 时间：2013-01-31T13:38:23.457
> 
> 标签：android

我有一个 android 应用程序，它连接到另一台笔记本电脑上的远程 Apache 服务器，并且在前几次连接得很好。然后现在我得到一个强制关闭窗口，但没有任何改变。

这是强制关闭的活动

```
package com.thesis.menubook;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import com.thesis.menubook.JSONParser;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class ChooseTable extends Activity {

    DBConnect db = new DBConnect(this);

    EditText tableNumber;
    Button btnGo;
    String table_ID;
    String table_availability;

 // Progress Dialog
    private ProgressDialog pDialog;

    // JSON parser class
    JSONParser jsonParser = new JSONParser();

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_TABLE = "tabledb";
    private static final String TAG_TABLE_ID = "table_ID";
    private static final String TAG_TABLE_STATUS = "table_status";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_choose_table);

        btnGo = (Button) findViewById(R.id.check_in_button);
        tableNumber = (EditText) findViewById(R.id.table_number);

        btnGo.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
              table_ID = (tableNumber).getText().toString();
              new GetTableDetails().execute();
              Log.d("Table Status", table_availability);
              if(table_availability == "AVAILABLE")
              {
                  Toast.makeText(ChooseTable.this, table_availability, Toast.LENGTH_LONG).show();
                  Intent i = new Intent (ChooseTable.this, ChooseOrdersMenu.class);
                    startActivity(i);
              }
            }
        });

    }

    /**
     * Background Async Task to Get complete product details
     * */
    class GetTableDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ChooseTable.this);
            pDialog.setMessage("Checking Table Availability. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... params) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameter
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair(TAG_TABLE_ID, table_ID));
                        //ipaddress of server
                        String ipaddress = "";
                        try
                        {
                            db.open();
                            ipaddress=db.getIP();
                            Log.d("IP Address", ipaddress);
                        }
                        catch(Exception ex)
                        {
                            ex.printStackTrace();
                        }
                        finally
                        {
                            db.close();
                        }

                        if(ipaddress != "-1")
                        {
                        // single table url
                        String url_table_details = "http://"+ipaddress+":80/MenuBook/checkTable.php";
                        Log.d("URL", url_table_details);
                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_table_details, "GET", params);

                        // check your log for json response
                        Log.d("Check Table", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received table details
                            JSONArray tableObj = json
                                    .getJSONArray(TAG_TABLE); // JSON Array

                            // get table availability from JSON Array
                            JSONObject table = tableObj.getJSONObject(0);
                            table_availability = table.getString(TAG_TABLE_STATUS);

                        }else{
                            table_availability = "TABLE NOT FOUND";
                        }
                        }
                        else
                        {
                            table_availability = "FAILED TO RETRIEVE SERVER IP ADDRESS";
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

            pDialog.dismiss();

        }
    }

} 
```

这是调用上一个活动的活动

```
package com.thesis.menubook;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class IPAddress extends Activity {

    DBConnect db = new DBConnect(this);
    String ip;
    Boolean next = false;

    EditText ipaddress;
    Button connect;

    // Progress Dialog
    private ProgressDialog pDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ipaddress);

        connect = (Button) findViewById(R.id.connectBtn);

        connect.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                    ipaddress = (EditText) findViewById(R.id.ipAddress);
                    ip = ipaddress.getText().toString();
                    new InsertIPAddress().execute();
                    if(next == true)
                    {
                        Intent i = new Intent (IPAddress.this, ChooseTable.class);
                        startActivity(i);
                    }
                }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_ipaddress, menu);
        return true;
    }

     /**
     * Background Async Task to Insert IP address
     * */
    class InsertIPAddress extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(IPAddress.this);
            pDialog.setMessage("Connecting to Server. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Inserting IPAddress in background thread
         * */
        protected String doInBackground(String... params) {

            runOnUiThread(new Runnable() {
                public void run() {

                    pDialog.setMessage("Saving IP Address. Please wait...");
                    long id = 0;
                    if((ip == "") || (ip.contains(" ") == true))
                    {
                        Toast.makeText(IPAddress.this, "Please enter the server IP address and/or remove spaces.", Toast.LENGTH_LONG).show();
                        next = false;
                    }
                    else
                    {
                        try 
                        {
                            db.open();
                            id = db.insertIPAddress(ip);    
                        } 
                        catch (Exception e) 
                        {
                            e.printStackTrace();
                        }
                        finally
                        {
                            db.close();
                        }
                        Toast.makeText(IPAddress.this, "Inserted at row "+id , Toast.LENGTH_LONG).show();
                        next = true;
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            pDialog.dismiss();
        }
    }

} 
```

这是我的 LogCat ：

```
01-31 21:30:59.082: W/KeyCharacterMap(588): No keyboard for id 0
01-31 21:30:59.082: W/KeyCharacterMap(588): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-31 21:31:20.982: D/AndroidRuntime(588): Shutting down VM
01-31 21:31:20.982: W/dalvikvm(588): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-31 21:31:20.991: E/AndroidRuntime(588): FATAL EXCEPTION: main
01-31 21:31:20.991: E/AndroidRuntime(588): java.lang.NullPointerException: println needs a message
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.util.Log.println_native(Native Method)
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.util.Log.d(Log.java:122)
01-31 21:31:20.991: E/AndroidRuntime(588):  at com.thesis.menubook.ChooseTable$1.onClick(ChooseTable.java:60)
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.view.View.performClick(View.java:2408)
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.view.View$PerformClick.run(View.java:8816)
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.os.Handler.handleCallback(Handler.java:587)
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.os.Looper.loop(Looper.java:123)
01-31 21:31:20.991: E/AndroidRuntime(588):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-31 21:31:20.991: E/AndroidRuntime(588):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 21:31:20.991: E/AndroidRuntime(588):  at java.lang.reflect.Method.invoke(Method.java:521)
01-31 21:31:20.991: E/AndroidRuntime(588):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-31 21:31:20.991: E/AndroidRuntime(588):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-31 21:31:20.991: E/AndroidRuntime(588):  at dalvik.system.NativeStart.main(Native Method)
01-31 21:31:23.643: I/Process(588): Sending signal. PID: 588 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:41:04.577

> 01-31 21:31:20.991: E/AndroidRuntime(588): 致命异常: main 01-31 21:31:20.991: E/AndroidRuntime(588): java.lang.NullPointerException: println 需要一条消息

这告诉你，它是由什么引起的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:41:53.757

你不能记录一个空

更改此行

```
Log.d("Table Status", table_availability); 
```

至

```
 Log.d("Table Status", table_availability+""); 
```

或做一个 if 条件

```
if( table_availability!=null){
 Log.d("Table Status", table_availability);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:41:23.413

问题在这里：

```
DBConnect db = new DBConnect(this); 
```

**这**不会在 onCreate() 函数之前初始化，您可以在类主体中定义 DBConnect，但在 onCreate() 函数上初始化它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T13:41:24.990

这怎么不是一个明显的错误？

从字面上看，您有一个 println 或日志，其中消息未知/为空。

我猜在

```
Log.d("Table Status", table_availability); 
```

table_availability 为空

# ios - Core Data 中多对多关系的 sectionNameKeyPath 值

> ID：14627106
> 
> 赞同：1
> 
> 时间：2013-01-31T13:38:33.467
> 
> 标签：ios, core-data, many-to-many, nsfetchedresultscontroller

我有一个包含三个实体的核心数据模型`Notification`：`Group`和`Customer`。这些是它们之间的关系：

*   一个客户属于多个组，一个组可以有多个客户。
*   一个通知被发送（属于）一个组，一个组可以接收（拥有）许多通知。

我想`UITableView`按客户分组显示所有通知。我创建了一个`NSFetchedResultsController`这样的：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
fetchRequest.fetchBatchSize = 10;
fetchRequest.predicate = nil;

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Notification"
                                          inManagedObjectContext:self.managedObjectContext];
fetchRequest.entity = entity;

// Default sort descriptors are built in a separate custom method
NSArray *sortDescriptors = [self getDefaultSortDescriptorsForEntity:entity];
fetchRequest.sortDescriptors = sortDescriptors;

return [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                           managedObjectContext:self.managedObjectContext
                    sectionNameKeyPath:@"group.customers.firstName"
                             cacheName:nil]; 
```

假设这是检索按客户分组的所有通知的有效方法（我也不确定）iOS 抛出以下异常：

```
@"Failed to fetch all Notification objects"
@"Reason: Invalid to many relationship in setPropertiesToFetch: (group.customers.firstName) (NSInvalidArgumentException)" 
```

我一次又一次地审查了这些关系，看看是否缺少某些东西，并且一切似乎都是正确的。我可以为所有实体创建和删除对象，它们之间的链接也是正确的。

我的问题是：是否可以遍历一个`sectionNameKeyPath`值中的多个关系？这种场景下应该如何处理多对多关系呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:48:35.200

是的，你可以这样做。只需使用 FRC 获取客户并将其设置`sectionNameKeyPath`为`nil`.

**节**
返回结果的数量是您的节数。使用客户数据填充部分标题。

**行**
部分中的行数为`customer.notifications.count`。要填充该行，请确保`notifications`以某种方式（例如，按日期）对它们进行排序并相应地显示它们，如下所示：

```
NSArray *orderedNotifications = 
  [customerForSection.notifications sortedArrayUsingDescriptors:
   @[[NSSortDescriptor sortDescriptorWithKey:@"date" ascending:NO]]];
Notification *notificationToBeDisplayed = 
   [orderedNotifications objectAtIndex:indexPath.row]; 
```

* * *

另一种推荐的解决方案是更改数据模型。您可以直接将通知与所有客户相关联。这将具有额外的优势，即使组成员资格发生变化，通知仍与正确的客户相关联。

# iphone - 我应该如何通过终端启动安装了应用程序的 iPhone 设备？

> ID：14627107
> 
> 赞同：0
> 
> 时间：2013-01-31T13:38:39.857
> 
> 标签：iphone, objective-c, xcode, instruments

我想从终端启动安装在 iPhone 设备上的应用程序进行开发和测试。

我看了下面的问答。

[使用 iPhone 模拟器从命令行启动仪器](https://stackoverflow.com/questions/8340836/launching-instruments-from-command-line-with-iphone-simulator)

但是我使用的是 Mountain Lion，并且下面没有这样的文件或路径。

```
/Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate 
```

你能告诉我如何使用仪器的这种自动化启动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:46:54.867

几天前我遇到了同样的问题。似乎从 Xcode 4.4 Apple 开始将其移至`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate`

但是在 Xcode 4.5 中我也没有找到这个目录。所以我继续搜索并在`/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate`

顺便说一句，有一个很好的[shell 脚本](https://gist.github.com/3605692)可以自动运行东西。您需要的只是`INSTRUMENTS_TEMPLATE`用正确的路径替换`automation.sh`

# java - 如何模拟第 3 方代码的受保护方法

> ID：14627113
> 
> 赞同：3
> 
> 时间：2013-01-31T13:39:00.897
> 
> 标签：java, mocking, mockito

使用 Mockito 我想模拟一个类的属性，以便验证输出

```
public class MyClass extends ThirdPartyFramework {
  Output goesHere;

  @Override
  protected setup(){
    goesHere = new Output();
  }

  //...      
}

public abstract class ThirdPartyFramework {
  protected setup(){...}
  //...
} 
```

我需要注入 Output 类的模拟，以便我可以验证我的代码是否编写了正确的输出。

*   但我不能仅仅`@InjectMock`因为该`setup()`方法在运行时被调用并覆盖了我的注入。

*   而且我不能只公开设置，`MyClass`因为我正在使用的测试代码是通用的，需要适用于 的所有子类 `ThirdPartyFramework`，所以我只有一个参考`ThirdPartyFramework`，意思`setup()`是受保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:49:14.137

你准备好 Mockito 了吗？我在问，因为[Mockito FAQ](http://code.google.com/p/mockito/wiki/FAQ) Mockito FAQ 声明它不支持模拟静态方法，我想在这种情况下你需要设置方法来创建你的模拟而不是真正的输出。

我在类似的场景中使用过 PowerMock：

```
whenNew(NewInstanceClass.class).withArguments(any()).thenReturn(mockObject); 
```

这表示每次创建 NewInstanceClass 时都会返回我的 mockObject，无论使用了什么构造函数参数以及谁在什么时间构造了 NewInstanceClass。

在 PowerMock 文档中，我还找到了以下示例：

```
PowerMock.expectNew(NewInstanceClass.class).andReturn(mockObject) 
```

实际上，即使您绑定到 Mockito，您也可以使用它，[PowerMock 包含 Mockito](http://code.google.com/p/powermock/wiki/MockitoUsage13)的帮助程序来解决这个问题，让您可以使用 Mockito 进行所有测试，并使用 PowerMock 来模拟构造对象。像这样：

```
whenNew(Output.class).withNoArguments().thenReturn(yourOutputMock); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:22:44.467

我最终通过`ThirdPartyFramework`将该类包装并放置在与该类相同的包中来解决这个问题`ThirdPartyFramework`。

这样我就可以用 Mockito 模拟受保护的方法。然后我可以`@InjectMock`用来注入`Output`对象的模拟并通过该模拟控制其方法调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:40:49.133

如何为“goesHere”添加一个设置器，然后让 setup() 检查并仅在 goesHere 为 null 时更改其值。这样你就可以在测试中注入一个不会被覆盖的值。就像是：

```
protected void setGoesHere( Output output ){
    goesHere = output;
} 

@Override
protected void setup(){
    if(goesHere != null) goesHere = new Output();
} 
```

希望这可以帮助。

# jetty - JavaFX 中的 Jetty 和/或 Servlet-api 中断部署

> ID：14627114
> 
> 赞同：0
> 
> 时间：2013-01-31T13:39:07.407
> 
> 标签：jetty, javafx-2, javafx, embedded-jetty

我尝试将 Jetty 嵌入（使用）**到**我的 JavaFX 2.2 小程序（在浏览器中运行）。

我的问题是，要托管 servlet，除了 jetty-server.jar、jetty-servlet.jar 和 jetty-util.jar 之外，我还需要包含 servlet-api-3.0.jar（对于 javax.servlet 命名空间）。

![在此处输入图像描述](../Images/1fe2be11375780c5dc832ccb7c5e2108.png)

如果我包含 servlet-api.jar，我的项目会编译，但是当我在浏览器中运行它时，部署失败并显示“由于系统配置，JavaFX 应用程序无法启动（显示错误详细信息）。请参阅 java.com/javafx用于故障排除信息。” 错误信息。

如果我删除 servlet-api.jar（并删除相关源），它会再次部署。

对于 JavaFX 项目，Java 平台设置为“默认 JavaFX 平台”，最好保持这种方式以减少所需的最小占用空间。

我不是 java(fx) 专家（我来自 .NET 世界），所以我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:22:12.990

您在签署 JAR 时遇到问题。我对为 JavaFX 签名 JAR 不是很熟悉，但这里是文档：

[http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)

[http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference001.htm#CIAFJGAB](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference001.htm#CIAFJGAB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:55:59.097

`servlet-api-3.0.jar`就是所谓的*提供*的依赖项。

它不需要包含在您的 war 文件中，因为 Web 应用程序容器（在本例中为 Jetty）为您提供了它。在您的构建工具中，只需将 servlet-api.jar 排除在您的 war 文件中即可。

注意：`jetty-server-9.0.0.M5.jar`也是*提供*的依赖项，具有相同的规则。

# javascript - 使用javascript提交表单

> ID：14627122
> 
> 赞同：0
> 
> 时间：2013-01-31T13:39:38.300
> 
> 标签：javascript, forms

我使用以下 javascript 提交表单，在该脚本中，如果我删除 alert() 意味着，表单不会提交。使用警报框仅提交表单。我该如何解决这个问题

```
<script type="text/javascript" >
    function caless(id)
    {

    document.formname.page.value=id;
    document.formname.submit();
    alert('');
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:43:24.117

很可能此代码是从链接 onclick 中调用的？在这种情况下，更改为：

```
function caless(id)
{
    document.formname.page.value=id;
    document.formname.submit();
    return false;
} 
```

然后在onclick中：

```
<a ... onclick="return caless(id);"> 
```

# jquery-ui-datepicker - JQuery UI Datepicker 默认月份问题

> ID：14627123
> 
> 赞同：0
> 
> 时间：2013-01-31T13:39:44.177
> 
> 标签：jquery-ui-datepicker

我需要根据表单上输入的其他值设置日期选择器上显示的默认年份和月份。

有谁知道如何在不实际调用 setDate() 的情况下设置年份和月份？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:02:52.843

使用 defaultDate 方法而不是 setDate

# javascript - 使用 javascript 添加删除 html 元素

> ID：14627129
> 
> 赞同：0
> 
> 时间：2013-01-31T13:40:01.473
> 
> 标签：javascript, dom

我想创建一个表单来添加多个带有标题的图像。因为我是 php 和 mysql 的人。因此，如果我可以在单击 addmore 时获得新字段，那么我可以完成其余的 php mysql 部分。如何设置 var x 以创建新行以提供新的浏览按钮和标题文本字段。

```
<script type="text/javascript">
<!--
function addMore() {
if (document.getElementById && document.createElement) {
    var x = ;
    document.getElementById('inserthere').appendChild(x);
}
else alert('Your browser doesn\'t support the Level 1 DOM');
}

function delMore() {
if (document.getElementById && document.createElement) {
    var node = document.getElementById('inserthere')
    node.removeChild(node.childNodes[0]);
}
else alert('Your browser doesn\'t support the Level 1 DOM');
}
// -->
</script>

</head>

<body>
<table>
<tr><td>Select Image<input type="file" name="img[]" id="img"  /></td><td>Add caption
<input type="text" name="img_cap[]" id="img_cap" /></td>
</tr>
<span id="inserthere"></span>
</table>

<a href="javascript:addMore()" class="page">add More</a><br />
<a href="javascript:delMore()" class="page">remove</a>

</body> 
```

直到有人回复我要学习，探索互联网并尝试尝试尝试.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:00:49.433

这不是最漂亮的方法，但最简单、最快的方法可能是给表一个`id`属性（例如，`'imgtable'`），并在您的`addMore()`函数中执行以下操作：

```
var x = document.createElement('tr'); // create a new row ready to add
x.innerHTML = '<td>Select Image<input type="file" name="img[]" id="img"  /></td><td>Add caption <input type="text" name="img_cap[]" id="img_cap" /></td>'; // fill it with your code
document.getElementById('imgtable').appendChild(x) // add the new row to the table 
```

但是，当您想了解更多信息时，请务必查找方法，例如`document.createDocumentFragment()`在将对象实际添加到 DOM 之前将单独声明的元素附加到对象的方法。我使用的`innerHTML`方法可能更快，但它不像声明文档片段那样整洁并且更难调试。

希望这可以帮助。

# linq - Linq 语句因动态 where 子句而失败

> ID：14627132
> 
> 赞同：0
> 
> 时间：2013-01-31T13:40:08.783
> 
> 标签：linq, dynamic, where-clause

我想检索具有特定订单号的佣金。

这有效：

```
var expression = from commission in db.Auftraege 
                         where commission.Auftragsnummer == orderNbr
                         select new Commission() { EF_Commission = (commission as Auftrag) };

return expression.ToList(); 
```

但是，如果我将其转换为使用动态 where 子句（因为我想应用更多过滤器），则 where 子句似乎不适用。取而代之的是，所有佣金都将被退回，而不仅仅是具有特定数字的佣金：

```
//base query
var expression = from commission in db.Auftraege select new Commission() { EF_Commission = (commission as Auftrag) };

//now add a where clause if the input parameter was specified
if (orderNbr >= 0)
    expression.Where(commission => commission.EF_Commission.Auftragsnummer == orderNbr);

 return expression.ToList(); 
```

我看过十几个例子，但他们似乎都是这样做的。有谁知道为什么第二个查询忽略 where 子句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:43:18.740

您需要将临时*分配*`expression`给某物（也许分配给它自己）。`expression.Where()`不会改变现有的查询 - 它返回一个新的。

所以：

```
expression = expression.Where(...); 
```

# java - JDBC - 以列表形式检索整个数据

> ID：14627133
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:40:09.823
> 
> 标签：java, database, jdbc

我正在尝试构建一个从 MySQL 表中检索每一行并将其存储到 List 的类，但我的代码无法编译并引发错误

> 错误：在 MySQLAccountsDatabankReader 类中找不到主方法，请将主方法定义为：public static void main(String[] args)

```
 import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.sql.Statement;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.logging.Level;
    import java.util.logging.Logger;

    public class MySQLAccountsDatabankReader {

    private static List<String[]> accounts;

    public MySQLAccountsDatabankReader(String[] args) {

        Connection con = null;
        Statement st = null;
        ResultSet rs = null;

        String url = "jdbc:mysql://localhost:3306/test";
        String user = "root";
        String password = "mysql";

        try {
            con = DriverManager.getConnection(url, user, password);
            st = con.createStatement();
            rs = st.executeQuery("SELECT * FROM test.accounts;");

            if (rs.next()) {
                ArrayList<String[]> accounts = new ArrayList<String[]>();
                rs = st.executeQuery("SELECT * FROM test.accounts;");
                int columnCount = rs.getMetaData().getColumnCount();
                while (rs.next()) {
                    String[] row = new String[columnCount];
                    for (int i = 0; i < columnCount; i++) {
                        row[i] = rs.getString(i + 1);
                    }
                    accounts.add(row);

                            }
            }

        } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(MySQLAccountsDatabankReader.class
                    .getName());
            lgr.log(Level.SEVERE, ex.getMessage(), ex);

        } finally {
            try {
                if (rs != null) {
                    rs.close();
                }
                if (st != null) {
                    st.close();
                }
                if (con != null) {
                    con.close();
                }

            } catch (SQLException ex) {
                Logger lgr = Logger.getLogger(MySQLAccountsDatabankReader.class
                        .getName());
                lgr.log(Level.WARNING, ex.getMessage(), ex);
            }
        }
        return accounts;

    }
} 
```

修订版 0.2 - 我有以下编译错误 - 线程“主”java.lang.Error 中的异常：未解决的编译问题：无法解析帐户 无法将帐户解析为变量

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;

public class MySQLAccountsDatabankReader {

    public static void main(String[] args) {

        MySQLAccountsDatabankReader reader = new MySQLAccountsDatabankReader();

        List<String[]> accounts = reader.getAccounts();

    }

    public List<String[]> getAccounts() {

        Connection con = null;
        Statement st = null;
        ResultSet rs = null;

        String url = "jdbc:mysql://localhost:3306/test";
        String user = "root";
        String password = "mysql";

        try {
            con = DriverManager.getConnection(url, user, password);
            st = con.createStatement();
            rs = st.executeQuery("SELECT * FROM test.accounts;");

            if (rs.next()) {

                rs = st.executeQuery("SELECT * FROM test.accounts;");
                int columnCount = rs.getMetaData().getColumnCount();
                while (rs.next()) {
                    String[] row = new String[columnCount];
                    for (int i = 0; i < columnCount; i++) {
                        row[i] = rs.getString(i + 1);
                    }
                    accounts.add(row);

                }
                return accounts;

            }
        } catch (SQLException ex) {
            Logger lgr = Logger.getLogger(MySQLAccountsDatabankReader.class
                    .getName());
            lgr.log(Level.SEVERE, ex.getMessage(), ex);

        } finally {
            try {
                if (rs != null) {
                    rs.close();
                }
                if (st != null) {
                    st.close();
                }
                if (con != null) {
                    con.close();
                }

            } catch (SQLException ex) {
                Logger lgr = Logger.getLogger(MySQLAccountsDatabankReader.class
                        .getName());
                lgr.log(Level.WARNING, ex.getMessage(), ex);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:44:00.743

编译器错误通常是错误的一个很好的指标——你需要一个`main`方法。

此外，非声明性语句需要在方法、构造函数或静态初始化程序中，而不是在类代码块中。将您的`JDBC`代码放在一个方法中。在这里，您需要一个返回`accounts`以匹配您的`return`语句的方法。您还需要创建一个实例`List`，例如`ArrayList`返回。

```
private List<String[]> getAccounts() {
   List<String[]> accounts = new ArrayList<String[]>();
   ...

   return accounts;
} 
```

并添加一个`main`方法入口点：

```
public static void main(String[] args) {

   MySQLAccountsDatabankReader reader = new MySQLAccountsDatabankReader();
   List<String[]> accounts = reader.getAccounts();
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:46:57.900

添加主要方法：

```
public static void main(String [] args) {
  new MySQLAccountsDatabankReader(args);
} 
```

# javascript - WebKit JS 绑定：一步一步如何

> ID：14627136
> 
> 赞同：9
> 
> 时间：2013-01-31T13:40:19.920
> 
> 标签：javascript, binding, webkit, idl

我不得不承认我是 WebKit 的新手，所以提出正确的问题并不是那么容易。

我拥有的是来自[WebKit.org](http://www.webkit.org)的 WebKit 。它更新、构建、我可以调试 - 我让它在 Windows 上运行。

我感兴趣的是如何为我拥有的一些 IDL 文件生成存根文件。我理解高级图片：

1.  使用 IDL 语言编写接口
2.  生成存根文件（.h 和 .cpp 文件）。
3.  在之前生成的存根文件中添加您的代码。

我在“WebCore.gypi”中指定了我的 IDL 文件。然后我在“WebCore.gyp”中指定了我的 IDL 文件的路径。显然这还不够，因为构建 WebKit 不会为我的 IDL 文件生成存根文件。

我一度怀疑我的 IDL 文件可能包含未定义的属性，但一切似乎都很好。

有小费吗？另外，您知道任何明确的“如何”吗？

谢谢！

编辑 130206：

我挖了更多，显然 WebKit 与几个构建系统交互；例如 GYP 代表 Chromium。老实说，我没想到会这么复杂，所以我没有提到我需要为 Safari 生成绑定，该绑定具有不同的构建系统，因此它有自己独特的“操作方法”。那么，现在的问题是，Safari 构建系统是如何工作的？我需要将 IDL 文件放在哪里？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T07:56:24.943

好吧，我可以告诉你是什么帮助了我。不幸的是，我仍然找不到任何文档，因此涉及了大量的试验和错误。

如果你想为 Safari 生成 JS 绑定，你必须：

1.  修改“DerivedSources.make”。
2.  确保您的 IDL 文件是正确的。

'DerivedSources.make' 可以在'\WebKit\Source\WebCore\' 中找到。在此 make 文件中，您必须指定以下内容：

1.  'VPATH' 中文件夹的路径（包含 IDL 文件）。
2.  'BINDINGS_IDLS' 中的每个和所有 IDL 文件。
3.  再次是“IDL_INCLUDES”中文件夹的路径。

构建 WebKit。如果在这一步之后您仍然看不到您的 JSXXX.h 和 JSXXX.cpp 文件（为每个 XXX.IDL 文件生成），那么您必须检查您的 IDL 文件。

在我的情况下，构建步骤之后没有生成任何内容，并且出现如下错误：

6>下一个令牌应该实现，但 MyModule 在模块 MyModule {
6> IDLParser.pm:750 at /WebKit/Source/WebCore/bindings/scripts//IDLParser.pm line 129\.
6> in /WebKit/Source/WebCore/ /WebKit/Source/WebCore/bindings/scripts//IDLParser.pm 第 173 行的 MyFolder/XXX.idl。6
>/WebKit/Source/WebCore/DerivedSources.make:1024：目标“XXX.h”的配方失败
6>制作：*** [XXX.h] 错误 255

问题是每个 IDL 接口都包含在一个名为 MyModule 的模块（命名空间）中，如上所示。我已经删除了所有这些模块（当然保留了接口），并且在下一次构建时，一切都生成得很好。使用您自己的模块名称似乎不像用它包含 IDL 接口那么简单；很可能您将被迫编写自定义绑定来完成此操作（WebKit 团队不建议这样做）。

对我来说就是这样，希望对你也有帮助。

# google-app-engine - GAE：port_sqlite 在本地开发服务器上失败

> ID：14627143
> 
> 赞同：1
> 
> 时间：2013-01-31T13:40:44.607
> 
> 标签：google-app-engine, google-cloud-datastore

在我的 OS X 本地开发服务器上，当我尝试使用 port_sqlite（与 use_sqlite 组合）将现有数据存储移植到 sqllite 时，我收到此错误：

> google.appengine.runtime.apiproxy_errors.ApplicationError: ApplicationError: 3 /Users//Documents/workspace-data/datastore/.datastore 中的数据已损坏或版本不同。尝试使用 --clear_datastore 标志运行。
> 
> DatabaseError('文件已加密或不是数据库',)

数据存储以常规的非 SQLite 方式工作正常。

我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T10:33:20.893

清除数据存储在某些情况下有效。我发现删除 --logs_path 参数或用新文件替换它也可能有帮助 --logs_path=/pathtologs/newfile.log 开发服务器使用 logging.info() 写入日志文件。日志条目存储在 sqllite3 数据库中。它越来越腐败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T14:01:57.997

我遇到的问题是在旧的开发服务器上。它现在可以在新的开发服务器上正常工作。

# git - git 在用户/代码库大小方面的扩展性如何？

> ID：14627146
> 
> 赞同：2
> 
> 时间：2013-01-31T13:40:47.457
> 
> 标签：git, version-control, scalability

我们目前正在使用由约 50 位活跃开发人员共享的约 600MB（即 .git 目录的大小）的单个 git 存储库。

随着我们的代码库和开发人员基础的增长，由于代码量（缓慢的 git 状态）和推送量（推送到 master 被拒绝，因为同时其他人已经推送），这种方法似乎最终将变得不可持续。

我的问题是，当前解决方案在 (1) 代码量方面的扩展性如何？(2) 有多少活跃的开发者？

是否有使用 git 的方法（例如大量使用功能分支）或特定技术可以帮助 git 扩展而不牺牲单个共同历史？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:46:32.060

大量用户没有问题。证明是 linux 在 git 下。

但是您的存储库的大小让我怀疑您不尊重许多 VCS 的这条重要规则：不要将二进制文件放入其中。您无法有效地计算二进制文件中的差异，这使得存储库快速增长。

如果某些大变化元素的本机源格式是二进制的（通常是一些文档或媒体），那么如果大小有问题，您可能应该在 VCS 之外管理该部分。

还应该注意的是，git 并没有真正定义你的工作方式。如果所有编码人员都直接推送到同一个存储库和同一个分支，那么你就有问题了。如果某些代码管理器获取更改并将它们推送到中央存储库，那么您就没有问题。不要忘记 git 是一个去中心化的 VCS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:59:29.450

Git 是由[Linus Torvalds](http://en.wikipedia.org/wiki/Linus_Torvalds)明确创建的，用于处理 Linux 内核的开发。这考虑了贡献项目的用户数量以及因此而创建的提交数量。

如此规模的项目是否易于维护在很大程度上取决于您的工作流程。如果您只使用每个人都使用的几个开发分支，您可能最终会遇到多个合并冲突。另一方面，如果开发在（功能）分支上高度分离，那么维护它会变得容易得多，因为您只需要在此类分支上的工作完成并且可以合并工作时触摸您的主线。您通常让具有特殊[集成者角色](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows#Integration-Manager-Workflow)的人专注于这一点。在 Linux 内核的情况下，您也有副手从开发人员那里收集（和验证）提交，然后将其提交给[独裁者](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows#Dictator-and-Lieutenants-Workflow)（Linus 本人），然后由他决定实际进入内核的内容。

Overall though, there is nothing that prevents you from having a huge project within Git. Depending on your situation it might be worth though to split it up if it’s possible (compare with [Android’s OSP](http://source.android.com/index.html) which has a large number of smaller repositories).

Note that a large repository size will not affect your workflow aside from the initial cloning process. Unless you have a ridiculous large working directory (which would affect *any* source control system), it will not affect the normal speed of Git. All commands run locally, and things like `git status` will only need to look at the working directory, the index and the current version, i.e. that will not change if the history is longer. As Git’s data model is a directed acyclic graph, you will have most things you need instantly, regardless of how big your graph is beyond the accessors you use (branch pointers, HEAD etc.).

That being said, 600 MB for your repository is really a lot. I suspect that you have many binary files in it, which might not be the best idea. While Git handles binary files in the same way as text files, the compression Git will not, and the default gzip compression which is applied to every Git object is often not helpful for binary files (like images which are already compressed) as well. So you might want to look into a different solution for your assets if that’s possible.

# mongodb - MongoDB 无法比较 Integer64 的

> ID：14627157
> 
> 赞同：0
> 
> 时间：2013-01-31T13:41:09.550
> 
> 标签：mongodb

我收集了一些日常统计数据，我想在 mongo 中使用聚合框架。现在我遇到了对 Integer64（类型 18）进行排序/分组的问题，我想寻求一些帮助：

```
mongos> db.daily_apps_totals.findOne({"_id.appId":{$type:16}})
{
    "_id" : {
            "datetime" : ISODate("2012-08-15T00:00:00Z"),
            "appId" : 243,
            },
    ...
}

mongos> db.daily_apps_totals.aggregate([ {$match: {"_id.datetime":ISODate("2013-01-28T00:00:00Z"), "_id.appId":{$type:16}}},  {$project:{_id:"$_id.appId"}}, {$sort: {_id:1}},{$limit:3}])
{
    "result" : [
            {
                    "_id" : 243
            },
            {
                    "_id" : 243
            },
            {
                    "_id" : 245
            }
    ],
    "ok" : 1
} 
```

Sort 适用于 Integer32（类型 16），但不适用于 Integer64：

```
mongos> db.daily_apps_totals.findOne({"_id.appId":{$type:18}})
{
    "_id" : {
            "datetime" : ISODate("2012-08-15T00:00:00Z"),
            "appId" : NumberLong(245),
    },
    ...
}

mongos> db.daily_apps_totals.aggregate([ {$match: {"_id.datetime":ISODate("2013-01-28T00:00:00Z"), "_id.appId":{$type:18}}},  {$project:{_id:"$_id.appId"}}, {$sort: {_id:1}},{$limit:3}])
{
    "errmsg" : "exception: can't compare values of BSON types Array and NumberLong64",
    "code" : 16016,
    "ok" : 0
} 
```

PS MongoDB shell 版本：2.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:30:46.883

这可能意味着您的集合中有一些文档`_id.appId`包含 Integer64 数组而不是单个 Integer64。

`{"_id.appId": {$type:18}}`由于[SERVER-1475](https://jira.mongodb.org/browse/SERVER-1475)，查询对象将匹配。

# java - 在 tomcat 网络应用程序中打开文件

> ID：14627158
> 
> 赞同：0
> 
> 时间：2013-01-31T13:41:09.473
> 
> 标签：java, file, tomcat, jersey

我想打开一个文件并返回它的内容。虽然和要打开文件的类在同一个目录下，但是找不到文件。如果你能帮我解决问题会很酷。

这是代码：

```
@GET @Produces("text/html") @Path("/{partNO}/") @Consumes("text/html")
public String getPartNoResponseHTML(@PathParam("partNO") String parID) throws WebApplicationException {
PartNoTemplate partNo = getPartNoResponse(parID);

String result = "";

try {
  result = readFile(PART_NO_TEMPLATE_FILE);
} catch (FileNotFoundException e) {
  e.printStackTrace(System.out);
  return e.getMessage() + e.toString();
  // throw new WebApplicationException(Response.Status.NOT_FOUND);
} finally {
  result = result.replace("{partNO}", parID);
  result = result.replace("{inputFormat}", partNo.getFormat().toString());
}

return result;
} 
```

我猜它找不到该文件，因为它在tomcat上运行。我也在使用 Jersey 和 JAX-RS。感谢您的帮助，

马克西

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:48:29.827

如果文件在应用程序 WAR 中（或在 jar 中），您可以尝试使用

```
InputStream input = servletContext.getClass().getClassLoader().getResourceAsStream("my_filename.txt"); 
```

您的问题与[如何从我的 WAR 中的类目录中读取文件类似（我认为）？](https://stackoverflow.com/questions/3888226/how-can-i-read-file-from-classes-directory-in-my-war)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T13:50:37.310

尝试从[ServletContext](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContext.html)获取文件的路径。

```
ServletContext context = //Get the servlet context 
```

在 JAX-RS 中获取 servlet 上下文使用这个：

```
@javax.ws.rs.core.Context 
ServletContext context; 
```

然后从您的 Web 应用程序中获取文件：

```
File file = new File(context.getRealPath("/someFolder/myFile.txt")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T13:47:37.323

您不会发布实际尝试读取文件的代码，但假设文件位于类路径中（正如您提到的那样，它与类位于同一目录中），那么您可以执行以下操作：

```
InputStream in = this.getClass().getResourceAsStream("/SomeTextFile.txt"); 
```

看[这里](https://stackoverflow.com/questions/1464291/how-to-really-read-text-file-from-classpath-in-java)

# vim - vim：如何用 ~/.vimrc 中的值替换变量

> ID：14627167
> 
> 赞同：1
> 
> 时间：2013-01-31T13:41:36.367
> 
> 标签：vim, grep, remap

我也想在我的`.vimrc`.

```
let dir=“/home/user/Downloads/”
set path=$dir
nnoremap gr :grep '\b<cword>\b' $dir/*<CR> 
```

上面的代码当然是错误的，但也许你能理解我想要做什么。我想设置为to`path`的值，并将第三行中的单词替换为的值。我试过了，失败了，谁能告诉我，任何帮助表示赞赏！`dir``/home/user/Downloads/``dir``dir`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:53:38.990

首先，有花哨的报价；您需要使用普通`"`的 ( ) 。除此之外，`:let`还可以。

```
let dir = "/home/user/Downloads/" 
```

你可以用`:execute`来评估定义的变量`:set`，但它更容易使用`:let`，因为它也可以使用特殊符号来更改 Vim 选项`&{optionname}`：

```
let &path = dir 
```

对于映射，如果`dir`在运行时不改变，最容易使用`:execute`. 注意引用的反斜杠必须如何转义（即加倍）：

```
execute "nnoremap gr :grep '\\b<cword>\\b' " . dir . "/*<CR>" 
```

所有这些信息都是`:help eval`. 了解出色而全面的帮助是如何构建的；所有的信息都在那里（你只需要知道如何找到它）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:02:12.813

您必须使用此表示法：

```
let variable_name = "value" 
```

并使用直引号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T13:49:51.023

设置路径：

```
set path=/home/user/Downloads/ 
```

或将目录附加到路径。

```
set path+=/home/user/Downloads/ 
```

Path 是一个 Vim 变量，如果你只打算将它用于这个重新映射，它似乎不太适合使用。最好声明自己的变量，因为路径中还可以有许多目录，这些目录不适用于 grep。

```
let g:search_path="/path/to/your/dir"

nnoremap gr :grep '\<<cword>\>' <C-R>=eval("g:search_path")<CR> 
```

`Ctrl+R`让我们在这里插入一个寄存器，然后用它来调用表达式寄存器，我们用它来评估`g:search_path`.

查看`:help expr-register`更多信息！

这将在每次执行映射时评估您的`g:search_path`变量，允许您更改路径而不必`gr`每次都重新映射。

# android - 如何在android中为纵向和横向模式定义不同的控件

> ID：14627170
> 
> 赞同：0
> 
> 时间：2013-01-31T13:41:48.763
> 
> 标签：android, android-layout

我的应用在纵向模式下具有三个视图，一个 TextSwitcher、一个自定义视图和一个自定义键盘。在横向模式下，我需要删除 TextSwitcher 并在右侧添加一个 ListView。我是 android 新手，我可以定义两种布局，即 xxx 和 xxx-land，我的问题是如何实现两个代码分支，一个用于控制横向，一个用于纵向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:47:33.820

根据当前方向设置标志

```
getResources().getConfiguration().orientation 
```

并在访问 textswitcher 或 listview 之前检查标志...并根据标志采取行动，例如在纵向模式下对 Textswitcher 进行更改，但在横向模式下不要因为它将为空...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:16:47.930

定义出现在代码和资源文件中的所有视图，`onCreate()`您`Activity`可以检查方向以将视图绑定到您的类对象。

例子。

在这里，我们有 2 个布局文件，在两个文件中都包含一个 ImageView，在纵向文件中有一个`TextView`，而在风景中它包含一个`Button`而不是`TextView`

***布局*域中的**my_layout.xml****

 ***```
 <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/abs__ab_bottom_solid_dark_holo" />

</LinearLayout> 
```

***布局端口*文件夹 中的**my_layout.xml****

 **```
 <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/abs__ab_bottom_solid_dark_holo" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

这是活动代码

```
package com.example.stackoverflow;

import android.app.Activity;
import android.content.res.Configuration;
import android.os.Bundle;
import android.view.Display;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class MyActivity extends Activity {

    // landscape views
    Button button1;

    // protrati views
    TextView textView1;

    // common views (shared between landscape and protrait mode)

    ImageView imageView1;

    public MyActivity() {
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.my_layout);
        imageView1 =(ImageView) findViewById(R.id.imageView1);//exist inside landscape file and portrait

        if(getScreenOrientation() == Configuration.ORIENTATION_PORTRAIT){
            textView1 = (TextView)findViewById(R.id.textView1);
        }else{
            button1 = (Button) findViewById(R.id.button1);
        }

        //when you want to access any thing that is not shared 
        //check the orientation 

    }

    @Override
    protected void onResume() {

        super.onResume();

        //let say that we want here to set a text on the textview  and it's available only for protrait 
        if(getScreenOrientation() == Configuration.ORIENTATION_PORTRAIT){
            //won't be null :) so we can set the text
            textView1.setText("Hello Guys!");
        }

    }

    // http://stackoverflow.com/a/6236110/671676
    public int getScreenOrientation() {
        Display getOrient = getWindowManager().getDefaultDisplay();
        int orientation = Configuration.ORIENTATION_UNDEFINED;
        if (getOrient.getWidth() == getOrient.getHeight()) {
            orientation = Configuration.ORIENTATION_SQUARE;
        } else {
            if (getOrient.getWidth() < getOrient.getHeight()) {
                orientation = Configuration.ORIENTATION_PORTRAIT;
            } else {
                orientation = Configuration.ORIENTATION_LANDSCAPE;
            }
        }
        return orientation;
    }
} 
```

问任何你不明白的东西。*****

# ruby-on-rails - 帖子视图中未显示评论验证错误

> ID：14627172
> 
> 赞同：1
> 
> 时间：2013-01-31T13:41:48.837
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在开发基本的博客引擎，并且我已经对评论应用了验证，但是当我提交时它不会显示错误，而是会显示默认的 Rails 的 ActiveRecord::RecordInvalid。

我的评论控制器是

```
def create
@post = Post.find(params[:post_id])
@comment = @post.comments.create!(params[:comment])
redirect_to @post
end 
```

我的帖子/显示视图如下，可以很好地发表评论

```
 <%= form_for [@post, Comment.new] do |f| %>
<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>
<p>
<b><%= f.label :name, "Name *   " %></b><%= f.text_field :name %><br /></p>
<p>
<b><%= f.label :body, "Comment" %></b><%= f.text_area :comment, :cols => 60, :rows => 5 %>
</p>
<p>
  <%= f.submit "Post Comment" %>
</p> 
```

谁能帮我在同一个帖子/显示视图上显示验证错误？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:03:22.380

代替

```
@comment = @post.comments.create!(params[:comment])
redirect_to @post 
```

和

```
@comment = @post.comments.create(params[:comment])
if @comment.errors.any?
  render "posts/show"
else
  redirect_to @post
end 
```

不像创造，**创造！**如果验证失败将引发错误

**在帖子/节目中**

```
<%= form_for [@post, Comment.new] do |f| %>
  <% if @comment && @comment.errors.any? %>
    <% @comment.errors.full_messages.each do |msg| %>
     <li><%= msg %></li>
    <% end %>
  <% end %>
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:31:50.713

试试这个：

```
 def create
   @post = Post.find(params[:post_id])
   @comment = @post.comments.new(params[:comment])
   if @post.save
     redirect_to @post
   else
     flash[:error] = "Correct errors"
   end
 end 
```

在 Post 模型中：

```
accepts_nested_attributes_for :comments

 or 
```

如果您不想制作嵌套模型：

```
def create
   @post = Post.find(params[:post_id])
   @comment = @post.comments.new(params[:comment])
   if @comment.save
     redirect_to @post
   else
     flash[:error] = "Correct errors"
   end
end 
```

# tomcat - 当 Tomcat 通过 IntelliJ Idea Ultimate 12 运行时，我无法访问 Tomcat 7 管理器

> ID：14627176
> 
> 赞同：5
> 
> 时间：2013-01-31T13:42:08.010
> 
> 标签：tomcat, intellij-idea, tomcat7

我正在尝试使用访问 tomcat 管理器

```
http://localhost:8080/manager 
```

但是我输入密码后总是被拒绝进入。我收到以下消息：

> 403 访问被拒绝
> 
> 您无权查看此页面。
> 
> 如果您已将 Manager 应用程序配置为允许访问，并且您使用了浏览器的后退按钮、使用了保存的书签或类似功能，那么您可能触发了已为 HTML 启用的跨站点请求伪造 (CSRF) 保护Manager 应用程序的界面。您需要通过返回主管理器页面来重置此保护。返回此页面后，您将能够继续正常使用 Manager 应用程序的 HTML 界面。如果您继续看到此访问被拒绝消息，请检查您是否具有访问此应用程序的必要权限。
> 
> 如果您没有更改任何配置文件，请检查安装中的文件 conf/tomcat-users.xml。该文件必须包含允许您使用此 web 应用程序的凭据。
> 
> 例如，要将 manager-gui 角色添加到名为 tomcat 且密码为 s3cret 的用户，请将以下内容添加到上面列出的配置文件中。
> 
> 请注意，对于 Tomcat 7 及更高版本，使用管理器应用程序所需的角色已从单个管理器角色更改为以下四个角色。您将需要分配您希望访问的功能所需的角色。
> 
> manager-gui - 允许访问 HTML GUI 和状态页面 manager-script - 允许访问文本界面和状态页面 manager-jmx - 允许访问 JMX 代理和状态页面 manager-status - 允许访问仅限状态页面 HTML 接口受 CSRF 保护，但文本和 JMX 接口不受保护。维护 CSRF 保护：
> 
> 不应授予具有 manager-gui 角色的用户 manager-script 或 manager-jmx 角色。如果文本或 jmx 接口是通过浏览器访问的（例如，用于测试，因为这些接口是为工具而非人类设计的），那么之后必须关闭浏览器以终止会话。有关更多信息 - 请参阅 Manager App HOW-TO。

这是我的 tomcat-users.xml ：

```
<tomcat-users> 
<role rolename="tomcat"/>
  <role rolename="role1"/>
  <role rolename="manager-gui"/>
  <user username="tomcat" password="s3cret" roles="admin-gui,standard,manager-gui"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
</tomcat-users> 
```

我正在通过 intellij idea 12 Ultimate 运行 tomcat 7。我正在使用山狮操作系统。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-08-01T14:49:59.027

我编辑了两个文件：**server.xml** & **tomcat-users.xml**

**第 1 步**：我在**server.xml**中添加了这一行，此行必须在**Engine**上下文下添加，与图片相同：

`<Realm className="org.apache.catalina.realm.MemoryRealm" />`

在这里你可以看到图片：

![在此处输入图像描述](../Images/d778bdd18dae25cf0b385ea8ec0cbab4.png)

**第 2**步：然后我编辑了**tomcat-users.xml**并添加了以下行：

```
<!--
  NOTE:  The sample user and role entries below are wrapped in a 
  comment and thus are ignored when reading this file. Do not forget
  to remove <!.. ..> that surrounds them.
-->

  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <role rolename="manager"/>
  <role rolename="manager-script"/>
  <role rolename="manager-gui"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
  <user username="admin" password="tomcat" roles="manager-gui,manager-script "/> 

</tomcat-users> 
```

**注意：我建议您复制并粘贴我的文本并将其替换为您的**

重新启动tomcat，您就可以开始了！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-19T19:05:54.640

对于角色，您既需要特权访问权限，`manager-gui`又需要`manager-script`, 。

例子：

```
 <!-- you need both roles, manager-gui & manager-script for user-->
    <role rolename="manager-gui"/>
    <role rolename="manager-script"/>
    <user username="tomcat" 
      password="blabla" roles="manager-gui,manager-script "/> 
</tomcat-users> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:06:40.300

我通过添加 CATALINA_HOME 变量并在以下字段中为其赋予值 /Library/Tomcat 来解决它：

运行 --> 编辑配置 --> Tomcat 服务器 --> Tomcat 7.0 --> '启动/连接' 选项卡 --> 环境变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-21T16:49:34.523

我有同样的问题。我通过将配置文件的所有者更改为 tomcat 来解决它，由于某种原因它们归 root 所有。

```
cd /etc/tomcat
chown tomcat:group *
#restart tomcat service 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-25T14:16:44.713

它实际上帮助了我。您应该尝试使用更好（不可猜测）的用户名，而不是“管理员”

```
<role rolename="manager-gui"/>
<user username="TomcatAdmin" password="secpa55wd" roles="manager-gui"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-11T07:01:23.090

我的tomcat也遇到了同样的问题。我意识到tomcat下的一些文件夹，如**lib**， **conf**没有可执行（x）权限。当我授予文件夹可执行权限时，问题就解决了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-06T16:51:23.373

假设您在您的 tomcat 文件夹中为 $TOMCAT_HOME

**步骤1：**

在 $TOMCAT_HOME/conf/ **tomcat-users.xml**添加以下行

```
<user username="admin" password="password" roles="manager-gui,admin-gui"/> 
```

内：

```
 <tomcat-users.......

   </tomcat-users> 
```

所以它看起来像：

```
<tomcat-users.......
      <user username="admin" password="password" roles="manager-gui,admin-gui"/>
</tomcat-users> 
```

**第2步：**

并在 $TOMCAT_HOME/webapps/manager/META-INF/ **context.xml**：删除以下标签：

```
<Valve className=...... 
```

所以它将是：

```
<Context antiResourceLocking="false" privileged="true" >
  <!--
  <Valve className="org.apache.catalina.valves.RemoteAddrValve"
         allow="127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" />
  <Manager sessionAttributeValueClassNameFilter="java\.lang\.(?:Boolean|Integer|Long|Number|String)|org\.apache\.catalina\.filters\.CsrfPreventionFilter\$LruCache(?:\$1)?|java\.util\.(?:Linked)?HashMap"/>
-->
</Context> 
```

**最后：**

重启你的tomcat

[您可以在Apache Tomcat 8 Manager App](https://tomcat.apache.org/tomcat-8.5-doc/manager-howto.html)上找到更多详细信息

# c# - C# 类 - 基本示例

> ID：14627180
> 
> 赞同：5
> 
> 时间：2013-01-31T13:42:14.220
> 
> 标签：c#, class

这基本上是我第一次尝试理解 C# 中的类。我已经浏览了互联网上的几个教程，但是我最想念的东西和我还没有在任何地方找到的东西是一个简单的好例子。

我知道我的基本程序应该是什么样子，我会很感激你的帮助：

```
using System;

namespace Introduction_to_classes
{
    class Person
    {
        int Age;
        string Name;

        int DateOfBirth()
        {
            return 2013 - Age;
        }
    }

    class Program
    {
        public static void Main()
        {
            Person Mother = new Person(35, Alice);
            Person Son = new Person(12, Johny);

            Mother.Name = "Lucy";  // Just changing the value afterwards

            if(Mother.Age > Son.Age)
            {
                int year = Mother.DateOfBirth();
                Console.WriteLine("Mom was born in {0}.", year);
            }

            Console.ReadLine();
        }
    }
} 
```

这只是一个想法，它绝对行不通。但最重要的是，如果您可以将其纠正为工作示例，它将对我有所帮助......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T13:46:34.120

```
class Person
{
    public int Age { get; set; }
    public string Name { get; set; }

    public Person(int age, string name)
    {
        Age = age;
        Name = name;
    }

    public int DateOfBirth()
    {
        return 2013 - Age;
    }
}

        class Program
        {
            public static void Main()
            {
                Person Mother = new Person(35, "Alice");
                Person Son = new Person(12, "Johny");

                Mother.Name = "Lucy";  // Just changing the value afterwards

                if (Mother.Age > Son.Age)
                {
                    int year = Mother.DateOfBirth();
                    Console.WriteLine("Mom was born in {0}.", year);
                }
            }
        } 
```

一些有用的链接：[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.80%29.aspx)，[构造函数](http://msdn.microsoft.com/en-us/library/vstudio/ace5hbzh.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:46:45.903

```
using System;

namespace Introduction_to_classes {
    class Person {
        public int Age;
        public string Name;

        public int DateOfBirth() {
            return 2013-Age;
        }
    }

    class Program {
        public static void Main() {
            Person Mother=new Person {
                Age=35,
                Name="Alice"
            };

            Person Son=new Person {
                Age=12,
                Name="Johny"
            };

            Mother.Name="Lucy";  // Just changing the value afterwards

            if(Mother.Age>Son.Age) {
                int year=Mother.DateOfBirth();
                Console.WriteLine("Mom was born in {0}.", year);
            }

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T13:47:37.257

问题是您指的是不存在的构造函数：

```
Person Mother = new Person(35, Alice); 
```

这里的第一个参数是a ，据我了解`int`，第二个应该是 a 。`string`但是字符串文字应该用双引号标记，因此该行应该是：

```
Person Mother = new Person(35, "Alice"); 
```

以下行相同。

现在你可能想要一个构造函数来接受这些参数的类型，并且你想将这些值保存到新对象中，我假设。因此，将其添加到您的`Person`课程中：

```
public Person(int a, string n)
{
    this.Age = a;
    this.Name = n;
} 
```

最后，你应该让你的`Age`和`Name`字段可供其他类访问，方法是标记它们`internal`或`public`：

```
 public int Age;
    public string Name; 
```

在那之后，你应该很高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T14:04:15.200

首先：`new Person(35, "Alice")`意味着`class Person`定义了一个构造函数`public Person(int age, string name)`。或者，您必须调用`new Person() { Age = 35, Name = "Alice" }`which 只有在您尚未定义构造函数或已定义带 0 个参数的构造函数时才有效，例如`public Person()`（注意我如何将“Alice”放在引号内？那是因为您没有t 定义一个名为 的字符串`Alice`，因此`Alice`是一个未知对象）

接下来我们有`Mother.Name = "Lucy"`，它不起作用，因为`Name`它是不可发现的。`class Person`确实定义了 a ，但是由于`Name`您没有指定访问修饰符，例如`public`or `private`，`class Program`因此甚至不知道它存在，因此无法访问它。所以你必须使用`public string Name`而不是`string Name`. **始终**指定访问修饰符也被认为是一种很好的风格。这同样适用于`public int Age`和`public int DateOfBirth()`。

要了解有关访问修饰符的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/ms173121.aspx](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

# android - 如何从android中的任何活动中杀死应用程序

> ID：14627192
> 
> 赞同：0
> 
> 时间：2013-01-31T13:43:06.847
> 
> 标签：android, android-intent

我有5个活动。当我点击这 5 个活动中的任何一个按钮时，我想关闭应用程序，当我重新打开它时，我想从第一个活动启动应用程序。谁能帮我。

我使用了这段代码：

```
 CurrentActivity.this.moveTaskToBack(true);
    android.os.Process.killProcess(android.os.Process.myPid()); 
```

它工作正常，但是当我重新启动应用程序时，它不显示第一个活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:01:14.747

您正在执行的操作不是正确的方法，因为您正在杀死进程，该进程会杀死进程中的所有活动。这会使您的应用程序在您再次打开它时变得不稳定。您当前使用的内容是在 android 任务管理器中使用的，这是唯一授权的方式杀死应用程序。我建议你使用finish()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T11:56:42.967

这是我找到的最好的方法。它会杀死应用程序的所有活动并将用户返回到主屏幕。

```
//Takes user to home screen
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent);
//Kills all activities of app
System.exit(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T13:47:59.013

使用 finish() 从 backstack 中弹出您的 Activity 但始终注意[BackStack](http://developer.android.com/guide/components/tasks-and-back-stack.html)，您可以使用以下标志清除您的后退堆栈：**FLAG_ACTIVITY_CLEAR_TOP**并在启动 Activity 时使用此标志，因此当您开始第 5 个 Activity 时，只有您的堆栈中的第 5 个 Activity 并完成它会导致您的应用程序关闭。

# android - 不适用于 GoogleMaps V2 和 AndroidManifest.xml？

> ID：14627193
> 
> 赞同：0
> 
> 时间：2013-01-31T13:43:08.937
> 
> 标签：android, google-maps, android-manifest, google-maps-api-2, google-maps-android-api-2

我不明白为什么我无法启动地图？

将项目作为库“google-play-services_lib”挂钩。在模拟器应用程序加载。但我看不到地图。现在得到这个错误。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{de.ai.mi.maptrack/de.ai.mi.maptrack.activities.TravelMapActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment

Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment

Caused by: java.lang.ClassCastException: com.google.android.gms.maps.SupportMapFragment cannot be cast to android.app.Fragment 
```

我认为问题是“AndroidManifest”设置错误，但不明白出了什么问题，告诉我。

也许问题不在类和注册“AndroidManifest”的正确位置？

在 Google 控制台中生成此包的​​密钥。

```
MY_KEY;de.ai.mi.maptrack 
```

我所做的一切都是这样的。 [https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.ai.mi.maptrack"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <permission
        android:name="de.ai.mi.maptrack.activities.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="de.ai.mi.maptrack.activities.permission.MAPS_RECEIVE" />

    <uses-sdk
        android:minSdkVersion="13"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="MY_KEY_FROM_GOOGLE_CONSOLE" />

        <activity
            android:name=".activities.StartMenuActivity"
            android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".activities.TravelDescriptionActivity" >
        </activity>
        <activity android:name=".activities.TravelMapActivity" >
        </activity>

    </application>

</manifest> 
```

travel_map_activity.xml

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

旅游地图活动

```
package de.ai.mi.maptrack.activities;

import android.app.Activity;
import android.os.Bundle;
import de.ai.mi.maptrack.R;

public class TravelMapActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.travel_map_activity);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:46:19.160

您需要扩展 fragmentactivity 而不是活动。

> ```
> public class TravelMapActivity  extends android.support.v4.app.FragmentActivity { 
> ```

# c# - 无法将类型 System.Collections.Generic.IEnumerable<> 隐式转换为 bool

> ID：14627196
> 
> 赞同：10
> 
> 时间：2013-01-31T13:43:15.470
> 
> 标签：c#, entity-framework

我正在开发一个 ASP.NET MVC 4 应用程序，我正在尝试在 Entity Framework 5 中运行这个 Lambda 表达式。

```
var customer = db.GNL_Customer.Where(d => d.GNL_City.FKProvinceID == advancedProvinceID || advancedProvinceID == null)
            .Where(d => d.FKCityID == advancedCityID || advancedCityID == null)
            .Where(d => d.FKDepartmentStoreID == advancedDepartmentStoreID || advancedDepartmentStoreID == null)
            .Where(d => d.GNL_CustomerLaptopProduct.Where(r => String.Compare(r.BrandName, brandID) == 0 || brandID == null)); 
```

我收到此错误：

`Cannot implicitly convert type 'System.Collections.Generic.IEnumerable<ITKaranDomain.GNL_CustomerLaptopProduct>' to 'bool'`

我知道最后一个 where 子句是错误的，但我不知道如何纠正它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-31T13:45:31.560

您可能希望在最后的子句中使用另一个`.Any`而不是 a ：`.Where``.Any`

```
var customer = db.GNL_Customer.Where(d => d.GNL_City.FKProvinceID == advancedProvinceID || advancedProvinceID == null)
            .Where(d => d.FKCityID == advancedCityID || advancedCityID == null)
            .Where(d => d.FKDepartmentStoreID == advancedDepartmentStoreID || advancedDepartmentStoreID == null)
            .Any(d => d.GNL_CustomerLaptopProduct.Any(r => String.Compare(r.BrandName, brandID) == 0 || brandID == null)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T14:05:14.480

在最后一个语句中使用`Where ( Any )`以选择至少有一种产品满足您的条件的客户：

```
var customer = db.GNL_Customer
   .Where(d => d.GNL_City.FKProvinceID == advancedProvinceID || advancedProvinceID == null)
   .Where(d => d.FKCityID == advancedCityID || advancedCityID == null)
   .Where(d => d.FKDepartmentStoreID == advancedDepartmentStoreID || advancedDepartmentStoreID == null)
   .Where(d => brandID == null || d.GNL_CustomerLaptopProduct.Any(r => r.BrandName == brandID)); 
```

# android - 在 TableLayout 类中获取首选项

> ID：14627198
> 
> 赞同：0
> 
> 时间：2013-01-31T13:43:20.867
> 
> 标签：android

我有一个扩展 TableLayout 的类来设置我的 tableview 但是在该页面本身上，我想获取我的 SharedPreferences 但是除了 Activity 之外 TableLayout 中没有这种受支持的方法 getSharedPreferences() 。有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:38:40.060

`getSharedPreferences`不属于`Activity`，而是属于`Context`，并且 Android 中的每个小部件都需要对 Context 的引用。因此，如果您扩展 TableLayout，您将在构造函数中将 Context 传递给您的新类，不是吗？您可以从那里访问 getSharedPreferenreces，不是吗？

另一方面，`getSharedPreferences`从自定义小部件访问看起来是一个非常糟糕的设计。不要那样做。通过其构造函数将您需要的任何信息从共享首选项传递到您的小部件。

# triggers - 如何根据使用触发器修改的记录的值更新另一个表上的记录

> ID：14627199
> 
> 赞同：1
> 
> 时间：2013-01-31T13:43:21.193
> 
> 标签：triggers, sql-update, firebird

我有两个简单的（仅用于解释我的问题）表

1.  X 与列（除其他外）：IDX、CODE、NUMBER
2.  Y 列（除其他外）：CODE、NUMBER、id_fromX

我想（在插入或更新表 X 之后）使用来自 X 的实际记录中的变量更新表 Y。为此，我尝试使用触发器（在表 X 中），如下所示：

```
SET TERM ^^ ;
CREATE TRIGGER XYZFOR X ACTIVE AFTER INSERT OR UPDATE POSITION 0 AS
begin
  if  (new.CODE is distinct old.CODE)  then
  BEGIN
  EXECUTE STATEMENT ('UPDATE Y SET CODE=:old.CODE, id_fromX=:old.IDX WHERE NUMBER=:old.NUMBER');
  END
end ^^ 
```

但我从服务器收到错误：

```
Execute statement error at jrd8_prepare :\
335544569 : Dynamic SQL Error
335544436 : SQL error code = -104
335544634 : Token unknown - line 1, column 23
335544382 : .
Statement : UPDATE Y SET CODE=:old.CODE, id_fromX=:old.IDX WHERE NUMBER=:old.NUMBER\
Data source : Internal::
At trigger 'XYZ' line: 15, col: 7 
```

如下静态更新：

```
CREATE TRIGGER XYZ FOR X ACTIVE AFTER INSERT OR UPDATE POSITION 0 AS
begin
if  (new.CODE is distinct from old.CODE)  then
BEGIN
EXECUTE STATEMENT ('UPDATE Y SET CODE=1, id_fromX=111 WHERE NUMBER=1');
END
end ^^
SET TERM ; ^^ 
```

完美运行。如何引用 X 表字段来更新表 Y（名称相似的字段）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T13:51:25.323

您使用的是冒号，但旧/新*记录*不使用它。另外，这里不要使用执行语句，因为 sql 语句是静态的。

将其更改为：

```
SET TERM ^^ ;
CREATE TRIGGER XYZFOR X ACTIVE AFTER INSERT OR UPDATE POSITION 0 AS
begin
  if  (new.CODE is distinct old.CODE)  then
  BEGIN
    UPDATE Y 
       SET CODE = old.CODE, id_fromX = old.IDX 
     WHERE NUMBER = old.NUMBER;
  END
end ^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:54:31.250

您不能将参数直接写入语句 with `EXECUTE STATEMENT`，请参阅[文档](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-psql-execstat.html#langrefupd25-psql-execstat-with-params)以获取正确的语法。基本上，它应该类似于

```
EXECUTE STATEMENT ('UPDATE Y SET CODE = :CODE, id_fromX = :IDX WHERE NUMBER=:NUMBER')
(CODE := old.CODE, IDX := old.IDX, NUMBER := old.NUMBER); 
```

但是您实际上不需要`EXECUTE STATEMENT`这里，“直接”使用 UPDATE 语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T13:54:45.930

您不能在其中使用触发器上下文变量（`old.<column>`和`new.<column>`），`EXECUTE STATEMENT`因为它们是单独的上下文（中的语句`EXECUTE STATEMENT`看不到它们）。您要么需要使用普通`UPDATE`语句而不求助于`EXECUTE STATEMENT`，要么应该传递[参数](https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref25/firebird-25-language-reference.html#fblangref25-psql-execstmt-wparams)。像：

```
EXECUTE STATEMENT 
   ('UPDATE Y SET CODE=:code, id_fromX=:idx WHERE NUMBER=:number') 
   (code := old.CODE, idx := old.IDX, number := old.NUMBER); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T13:46:55.490

:old.CODE 不应该是 old.CODE 吗？

# css - $fix-mqs 在 Jake Archibald 的 IE Sass 混合中做了什么？

> ID：14627202
> 
> 赞同：0
> 
> 时间：2013-01-31T13:43:27.333
> 
> 标签：css, internet-explorer, sass

我对 http://jakearchibald.github.com/sass-ie/ 中的目的`$fix-mqs`感到[困惑](http://jakearchibald.github.com/sass-ie/)

我可以看到 mixin 的其余部分是如何工作的，但无法弄清楚这部分。我已经在一个项目中使用了这种模式，如果我忽略它并将固定宽度放在一个旧的即包含在正文或通用包装器元素上，一切似乎都可以工作，例如：

```
.l-wrapper {
    @include old-ie {
        width: 960px;
    }
} 
```

所以我的问题是它的`$fix-mqs`用途和作用是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:57:08.930

`$fix-mqs`这个想法是，当您将（修复媒体查询）设置为特定宽度时，respond-min() mixin 将充当您的媒体查询。您最终会得到一个仅包含适用于定义宽度的样式且没有媒体查询的文档。

例如，如果`$fix-mqs: 700px`（大致桌面大小）并且您调用`respond-min(400px)`了 ，那么它不会发出这些样式，因为它们太小了。它*会*在您调用时生成样式`respond-min(800px)`。

不过，它不仅适用于 IE。一些非常旧的移动设备也不理解媒体查询。虽然大多数人建议在您的媒体查询中使用“移动优先”，但有一些非常具有破坏性的样式（通常很难撤消），我只会在它是一个狭窄的设备时应用（例如重新格式化一个宽表以垂直显示） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:14:59.770

`$fix-mqs`仅在 IE 样式表中使用`respond-min`和使用。`respond-max`

您设置`$fix-mqs`为您的桌面样式启动的宽度，但可能在您的“大规模”桌面样式启动之前（如果有的话）。

例如，如果我设置`$fix-mqs: 900px`，IE 样式表会拾取所有样式，如果视口宽度为 900 像素，则正常样式表会。

在实践中，当您调用`respond-min(400px) { /* styles */ }`普通样式表时，会获取媒体查询，而 IE 样式表会在`400px`小于或等于时获取样式`$fix-mqs`，否则将一无所获。

同样，当您调用`respond-max(400px) { /* styles */ }`IE 样式表时，如果大于 ，则获取样式`400px`，否则*将*`$fix-mqs`一无所获。

# mysql - 即使场地仍然关闭，也显示今天的营业时间

> ID：14627203
> 
> 赞同：0
> 
> 时间：2013-01-31T13:43:38.157
> 
> 标签：mysql

我有两张桌子：

`venues`

*   ID
*   场地名称

`hours_of_operation`

*   开放日*（周一、周二、周三...）*
*   营业时间
*   关闭时间
*   is_close *（布尔值）*

营业时间或营业时间通常介于两者之间`10PM to 03AM`，这意味着当我在星期二凌晨 1 点查看页面时，我仍然需要查看星期一而不是星期二的营业时间。

一位好成员帮我解决了这个问题，一切正常:)。然后我添加了一些代码，以便在何时显示“`is_closed`已`true`关闭”文本。

然而，这样做的结果是......当一个场所在`8PM`当前打开时，`3PM`会返回文本“关闭”。即使场地尚未开放，我也希望它显示当天的关闭时间。

* * *

我还想知道是否可以将*前一天*的营业时间显示到凌晨 5:59，然后在早上 6:00 开始显示当天的营业时间。

*示例：*一个场地在星期一晚上 9 点到凌晨 4 点开放，所以我会看到该场地的关闭时间是从星期一早上 6 点到星期二早上 5 点 59 分，依此类推....除非它在星期一关闭，在这种情况下，文本为 '显示“已关闭”。

这是我的代码：

```
$fullDate = date('Y-m-d H:i:s');

SELECT
venues.ID,
venues.VENUE_NAME,
hrs.opening_day,
hrs.opening_time,
hrs.closing_time,
CASE WHEN (is_closed = 1 or is_closed is null)
       THEN 'closed' 
       ELSE closing_time END AS CLOSING_TIME_OR_CLOSED
FROM venues
LEFT JOIN hours_of_operation hrs
  on hrs.venue_id = venues.id
     and ((hrs.opening_day=date_format('$fullDate' -
           INTERVAL
             (closing_time<opening_time and time('$fullDate')<closing_time)
           DAY, '%a'))
          AND (closing_time<opening_time XOR
         (time('$fullDate') >= least(opening_time,closing_time)
          and time('$fullDate') < greatest(opening_time, closing_time)))) 
```

...然后我回应`CLOSING_TIME_OR_CLOSED`

谢谢！

* * *

**编辑** [请查看此架构](http://sqlfiddle.com/#!2/65fc7/1/1)

如您所见，第一个场地已关闭，显示器正确显示为“关闭”。然而，第二个是开放的，但仍然显示为关闭，因为设定的时间是`14:30`，而场地在 开放`21:00`。如果场地尚未开放，我想显示关闭时间而不是“关闭”。

另外，如果时间小于 06:00 AM，我想显示开放的场地，`2013-01-29`而不是`2013-01-30`一些场地开放到深夜。

# android - 使用 CursorAdapter 以编程方式滚动 Android ListView

> ID：14627206
> 
> 赞同：2
> 
> 时间：2013-01-31T13:43:41.670
> 
> 标签：android, listview, android-cursoradapter

我需要以编程方式滚动使用自定义 CursorAdapter 的 ListView。

问题是在代码中滚动 ListView 的唯一方法是使用方法**setSelectiomFromTop**，但调用此方法会导致ListView 的所有项目的**bindView**。我在另一个视图的滚动侦听器中调用 setSelectionFromTop，因此我为列表视图的这种连续重新绑定获得了很多 GC。

还有另一种方法可以做到这一点，而无需连续重新绑定 ListView 的所有项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:21:41.637

尝试`list.scrollBy(x, y)`或`list.scrollTo(x, y)`。

# objective-c - Objective C中的@符号是什么？

> ID：14627209
> 
> 赞同：0
> 
> 时间：2013-01-31T13:43:50.040
> 
> 标签：objective-c

> **可能重复：**
> [在objective-c中@符号代表什么？](https://stackoverflow.com/questions/25749/what-does-the-symbol-represent-in-objective-c)

我是一名 ANSI C 专家，正在迈出学习 Objective C 的第一步。

我应该如何思考/阅读随处可见的“@”？

起初，我认为它是一个编译器指令——“这在编译器的指令中为“@synthesize someProperty”生成getter/setter。

但是字符串之前的“@”似乎不适合该模型，并且似乎基本上是多余的。

也很高兴为 C 专家提供有关“如何快速学习 Objective C”的任何建议。谢谢，

彼得

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T13:54:26.960

`@`只是一个字符，除非你在完整的上下文中使用它

```
@interface //For declaring a class
@property // For creating a property
@synthesize // For synthesising property 
@implementation //For implementing a class
@end //For ending @interface or @implementation
@"Some String" //Represents a string
@try
@catch 
```

等等。
如此简单`@`不过是结合起来成为指令

# r - R中的浮点数不准确？

> ID：14627211
> 
> 赞同：-3
> 
> 时间：2013-01-31T13:44:07.800
> 
> 标签：r, floating-accuracy

R 在 uniroot 和处理浮点方面是否存在已知问题？

```
>str(uniroot(function(x) x*(x^2-1) + .5, lower = -2, upper = 2,
+                  tol = 0.0001))

List of 4
$ root      : num -1.19
$ f.root    : num -2.55e-07
$ iter      : int 7
$ estim.prec: num 5e-05
> -1.19 * ( 1.19 ^ 2 - 1 ) + 0.5 
[1] 0.004841 
```

显然 的值`f.root`不等于手动计算的函数值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:47:35.310

您的 root 值仅显示为 2 sf，但它估计精度为 5e-5。这表明它“知道”您没有查看的答案中的其他数字。试着打印出来`root-1.19`，你会明白我的意思。

特别是，`str`它旨在作为一种*快速*查看 R 对象结构的方法，因此它有意打印有限数量的数字：默认值为`digits.d`3（请参阅 参考资料`?str`）。只需打印结果（如`uniroot(...)`or`u1 <- uniroot(...); u1`会向您显示更多数字，也许可以避免混淆。

# c# - 我想在提交时调用 Partial 视图的 HttpPost，但它总是调用 ParentView 的 HttpPost。为什么？

> ID：14627214
> 
> 赞同：0
> 
> 时间：2013-01-31T13:44:12.587
> 
> 标签：c#, .net, asp.net-mvc-3, web-applications, partial-views

我在视图中使用局部视图（父视图）

我在局部视图中有一个表单，当我单击局部视图的提交按钮时，我想调用局部视图的 [HttpPost] 方法......但它没有被调用，它只调用父视图的 [HttpPost].. .

```
[HttpPost]
        public ActionResult ParentView(Model model)
        {

            return View();
        }
[HttpPost]
        public ActionResult PartialView(Model model)
        {
            return View();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:00:26.983

两种解决方案，

第一：将控制器和动作名称显式传递给 BeginForm 方法

```
using (Html.BeginForm(“MyActionName”,”MyControllerName”, FormMethod.Post)) { 
```

第二：使用jquery进行提交。为此，首先在表单上设置一个 id 并使用标准 html 输入的单击事件（type=button）在其上调用提交

```
using (Html.BeginForm(null, null, FormMethod.Post, new { id = "partialViewForm"})) {

$(‘#partialViewForm’).submit() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:40:54.717

得到了解决方案......要将部分视图添加到主视图，它需要使用 RenderAction() 添加

# php - 带有 IN 子句的 MySQL PDO 语句？

> ID：14627215
> 
> 赞同：1
> 
> 时间：2013-01-31T13:44:13.960
> 
> 标签：php, mysql, pdo

我最近听说很快 PHP 将弃用所有传统的 mysql 函数（例如：mysql_query()、mysql_num_rows() 等...）。话虽如此，我正在尝试将所有查询转换为 PDO 格式。这个特殊情况给我带来了一些困难，

```
$team = $_GET['team'];
$ncaa = array("Duke", "Harvard", "Yale", "Stanford");
$limit = idate('z')+14;

$list = join("','", $ncaa);

            $query = "SELECT game_id
                    FROM ncaa_current_season_games
                    WHERE game_date_int >= :game_date_int 
                    AND (home_team = :team OR away_team = :team) 
                    AND home_team IN(:list)
                    AND away_team IN(:list)
                    ORDER BY game_date_int ASC 
                    LIMIT 1";               
            $stmt = $db->prepare($query);
            $stmt->execute(array(':game_date_int' => $limit, ':team' => $team, ':list' => $list));

$num = $stmt->rowCount(); 
```

$num 返回为 0。当我以旧格式（不是 PDO）进行查询时，它工作得很好。

有什么建议么？

谢谢，

槊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:51:18.117

您不能`:list`将 in 用作 in 子句的一个占位符，您需要一个占位符来表示一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:55:24.073

与任何其他原始 API 一样，PDO 不足以完成任何现实生活中的任务。
准备好的语句也不够用，因为它们只接受*标量数据*，而不接受任何复杂的数据类型或任意查询部分。
因此，开发人员必须帮助自己采用*数据库抽象库*。
并在他们的应用程序代码中使用这个库方法，而不是原始 API 调用。

使用原始 PDO，您需要创建 ? `str_repeat()`使用函数或类似的东西动态标记每个 IN 语句值，将每个值添加到数据数组中，然后运行所有训练。
您可以在此站点上找到大量示例。他们中的一些人虽然很聪明。

但是使用良好的数据库访问库，您可以按照您尝试过的方式（徒劳地）使用原始 PDO

```
$team = $_GET['team'];
$ncaa = array("Duke", "Harvard", "Yale", "Stanford");
$limit = idate('z')+14;

$query = "SELECT game_id
        FROM ncaa_current_season_games
        WHERE game_date_int >= ?s 
        AND (home_team = ?s OR away_team = ?s) 
        AND home_team IN(?a)
        AND away_team IN(?a)
        ORDER BY game_date_int ASC 
        LIMIT 1";               
$data = $db->getRow($query, $limit, $team, $team, $list, $list); 
```

# php - 将图像上传到mysql数据库时出错

> ID：14627216
> 
> 赞同：0
> 
> 时间：2013-01-31T13:44:15.257
> 
> 标签：php, database, mysqli

几个小时以来，我一直在尝试解决这个错误。谁能帮助我错误在哪里？谢谢。我试图将图像上传到 mysql 数据库中。php错误日志直接告诉我错误：未定义索引上传文件。谢谢！

测试.php

```
 Flavor: <input id="flavor" type="text" name="flavor">
    Upload image: <input type="file" name="uploadedfile" id="uploadedfile" /> 
```

这是我的代码：

```
<?php
include_once "mysqli.connect.php";

if(isset($_POST['Add']))
{       
        $flavor = $_POST['flavor'];
        $target_path = "images/";
        $image = basename($_FILES['uploadedfile']['name']);
        $target_path = $target_path . $image;

        if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) 
        {

            $sql = "INSERT INTO flavor (flavorname, image) VALUES('$flavor','$target_path')";   
            $result = $mysqli->query($sql);     
            echo"<script type='text/javascript'>alert('Flavor added!')</script>";           
        }
        else
        {
            echo"<script type='text/javascript'>alert('Error! Can't proceed.' )</script>";  
        }

        }       
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:04:27.877

您实际上并没有将文件上传到数据库中。
整个问题根本与数据库无关。

因此，要使您的上传工作，请确保您`enctype="multipart/form-data"`的表单中有属性。
有关相关信息，请参阅[手册页](http://www.php.net/manual/en/features.file-upload.post-method.php)。

# java - Hibernate - 在预加载事件上使字段瞬态

> ID：14627219
> 
> 赞同：0
> 
> 时间：2013-01-31T13:44:24.600
> 
> 标签：java, hibernate, reflection

我有一个非常复杂的实体，我希望分两个阶段加载：

1.  加载所有业务数据
2.  加载所有元数据

我想分开装载。

我可以仅使用反射 API 在运行时将字段声明为 @Transient 吗？我尝试使用 preLoad 事件，但找不到如何设置字段瞬态。

谢谢伊多布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:05:44.157

您不能在运行时使用反射更改 Java 中的任何注释。[此处](http://ayoubelabbassi.blogspot.co.uk/2011/01/how-to-add-annotations-at-runtime-to.html)是有关如何使用 Javassist 添加注释的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:16:52.723

1）注解信息是java类信息的一部分。您不能在运行时更改。当然，您可以生成一些字节码生成工具：[javaassist](http://www.csg.is.titech.ac.jp/~chiba/javassist/)或[cglib](http://cglib.sourceforge.net/)来生成类并在运行时加载适当的实体实现。但它看起来像丑陋的黑客。此外，此解决方案非常复杂且不稳定。

2）尽量不要在你的应用程序中增加复杂性。更好地重构现有的域模型。考虑一下您是否需要为您的域提供多个固定表示。

3）此外，如果您确实需要实体的弱结构，您可以将实体序列化为 XML 或二进制格式，并作为文本（或者您的数据库支持[XMLType](http://docs.oracle.com/cd/B10500_01/appdev.920/a96620/xdb04cre.htm#1035571)）或 Blob 存储在 DB 中。

* * *

如果您遇到 LazyInitializationException 问题并且您开发 Web 应用程序，请尝试考虑[OpenSessionInView](https://community.jboss.org/wiki/OpenSessionInView)模式。Hibernate 将为每个请求创建一个 Hibernate 会话。因此，您可以在一个请求中操作 Hibernate 对象，而无需考虑 LazyInitializationException。

# python - 定期为列查找具有最高值的 n 行

> ID：14627220
> 
> 赞同：1
> 
> 时间：2013-01-31T13:44:25.460
> 
> 标签：python, mysql, database

我正在创建一个排行榜，并希望结果在客户端“近”实时更新。

这是我的桌子的样子：

```
╔════╦═════════════════╦════════════╦════════╗
║ id ║ author          ║topic       ║  count ║
╠════╬═════════════════╬════════════╬════════╣
║  1 ║ jazzgarza       ║ nowplaying ║      1 ║
║  2 ║ DJBure          ║ nowplaying ║     16 ║
║  3 ║ GRC__romoly     ║ nowplaying ║      5 ║
║  4 ║ MarineBerteloot ║ wtf        ║      1 ║
║  5 ║ Nick_Lukitsh    ║ nowplaying ║      1 ║
║  6 ║ Mugen__         ║ nowplaying ║      2 ║
║  7 ║ MaxChebotarev   ║ nowplaying ║      6 ║
║  8 ║ radeonvelcro    ║ nowplaying ║      9 ║
║  9 ║ SF1033          ║ nowplaying ║    102 ║
╚════╩═════════════════╩════════════╩════════╝ 
```

我基本上希望能够检索给定主题的计数最高的 n 行。我想对每个主题都这样做，并且**n**可能会根据主题而变化。

目前，我有一个简单的 SQL 查询，我会定期运行（每隔一秒左右，针对每个主题）。

```
SELECT * FROM member WHERE member.topic = 'wtf' ORDER BY member.count DESC 
```

但是我的表增长得非常快（每秒增加 7 个用户），而且我的解决方案肯定不能正确扩展。我尝试添加索引，但这可能只是一个快速修复，不会永远成功。**n**可以在 3 到 50 之间，我希望能够同时跟踪数百个主题。

所以我的问题是，有什么更聪明的方法来做到这一点？

我对几乎任何事情都持开放态度。我的解决方案不必是纯 SQL，只要它可以在客户端之后检索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:55:49.177

此查询从 topic 获取前 2 个结果，从 topic 获取`wtf`前 3 个结果`nowplaying`：

```
(SELECT * FROM member WHERE topic = 'wtf' ORDER BY count DESC LIMIT 3) UNION (SELECT * FROM member WHERE topic = 'nowplaying' ORDER BY count DESC LIMIT 3) 
```

这是[小提琴链接](http://sqlfiddle.com/#!2/c5da82/6)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:00:55.180

很难给出一个千篇一律的答案。

向您的 SQL 查询添加和索引以及一条`limit`指令可能就足够了。

如果您需要更大的扩展性，也许解决方案是在不同的服务器上拥有不同版本的数据库，每个主题一个。

下一步，如果你的数据库必须处理数十亿条记录，那就是使用这种 NoSQL 系统，但我想你不需要走那么远。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:07:35.237

为什么不添加基于内存的存储，例如按主题索引的地图，它会提供您的`n`顶级玩家列表（按计数排序）？

如果内存不能包含所有数据，您还可以实施缓存解决方案。

此映射将在应用程序启动时填充，然后由应用程序的线程异步更新（因为您只需要接近实时）。

这样，从客户端的角度来看，对它的访问将在恒定时间内进行，并且不会针对您的应用程序的每次命中进行刷新，而是以指定的速率进行。

希望能帮助到你，

最好的祝福

# c# - 如何在asp.net c#中的水晶报表中发送多个参数值

> ID：14627221
> 
> 赞同：0
> 
> 时间：2013-01-31T13:44:27.373
> 
> 标签：c#, asp.net, crystal-reports

如何使用`asp.net` `C#` 但不在页面上显示记录为水晶报表发送多个参数值

```
protected void FillOrderByDrivers(DateTime FromDate, DateTime ToDate, int ShowDriver, int SigDate)
        {
            DateTime DriverFrom = Convert.ToDateTime(txtDriverFrom.Text);
            DateTime DriverTo = Convert.ToDateTime(txtDriverTo.Text);
            int DriverSegnification = int.Parse(ddlDriverSignificantDate.SelectedValue.ToString());
            int Driver = int.Parse(ddlDrivers.SelectedValue.ToString());

            int CompanyId = int.Parse(ddlComapny.SelectedValue.ToString());

            if(reportDocument == null)
                reportDocument = new ReportDocument();

    reportDocument.Load(Server.MapPath("~/Report/OrdersByDrivers.rpt"));
            reportDocument.SetDatabaseLogon(myLogOnInfo.ConnectionInfo.UserID, myLogOnInfo.ConnectionInfo.Password, myLogOnInfo.ConnectionInfo.ServerName, myLogOnInfo.ConnectionInfo.DatabaseName);

            reportDocument.SetParameterValue("@DateFrom", DriverFrom);
            reportDocument.SetParameterValue("@DateTo", DriverTo);
            reportDocument.SetParameterValue("@CompanyID", CompanyId);
            reportDocument.SetParameterValue("@ShowDriversUsing", DriverSegnification);
            reportDocument.SetParameterValue("@SigDate", Driver);

            //reportDocument.SetDataSource(ds.Tables[0]);
            rptClients.Visible = true;
            rptClients.ReportSource = reportDocument;
            rptClients.DataBind();
            rptClients.RefreshReport();

        } 
```

任何建议都会欢迎我错了。谢谢

我已经显示了stackoverflow的[链接，但是](https://stackoverflow.com/questions/5145044/passing-multiple-parameter-to-crystal-report-in-asp-net)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:06:46.857

希望您需要使用以下代码将值传递给存储过程，并且您的代码用于将值传递给水晶报表参数。尝试使用以下代码。

在按钮单击中使用以下！

```
SqlConnection con = new SqlConnection();
SqlCommand cmd = new SqlCommand();
SqlParameter para = new SqlParameter();

ReportDocument report = new ReportDocument();
ConnectionInfo conInfo = new ConnectionInfo();

con.Open();
cmd = new SqlCommand("spGetResultdriver", con);
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add(new SqlParameter("@DateFrom", SqlDbType.DATATYPE, LENGTH, "From"));
cmd.Parameters.Add(new SqlParameter("@DateTo", SqlDbType.DATATYPE, LENGTH, "To"));
cmd.Parameters.Add(new SqlParameter("@CompanyID", SqlDbType.DATATYPE, LENGTH, "Location"));
cmd.Parameters.Add(new SqlParameter("@ShowDriversUsing", SqlDbType.DATATYPE, LENGTH, "Location"));
cmd.Parameters.Add(new SqlParameter("@SigDate", SqlDbType.DATATYPE, LENGTH, "Location"));

cmd.Parameters[0].Value = dtpFrom.Text;
cmd.Parameters[1].Value = dtpTo.Text;
cmd.Parameters[2].Value = cbCityCode.Text;
cmd.Parameters[3].Value = dtpTo.Text;
cmd.Parameters[4].Value = cbCityCode.Text;

conInfo.DatabaseName = "db name";
conInfo.UserID = "user id";
conInfo.Password = "password";
int i = cmd.ExecuteNonQuery();
con.Close();

report.Load("report path");
SetDBLogonForReport(conInfo, report);
crvReports.ReportSource = report;
crvReports.Refresh(); 
```

使用以下代码获取登录信息

```
private void SetDBLogonForReport(ConnectionInfo conInfo, ReportDocument report)
    {
        Tables tables = report.Database.Tables;
        foreach (CrystalDecisions.CrystalReports.Engine.Table table in tables)
        {
            TableLogOnInfo tableLogonInfo = table.LogOnInfo;
            tableLogonInfo.ConnectionInfo = conInfo;
            table.ApplyLogOnInfo(tableLogonInfo);
        }
    } 
```

试试这个 ！！

# java - 如何在按下鼠标时更改 JButton 颜色？

> ID：14627223
> 
> 赞同：17
> 
> 时间：2013-01-31T13:44:35.887
> 
> 标签：java, swing, mouseevent, jbutton

我想根据鼠标事件（鼠标进入、退出、按下等）自定义颜色。所以为了做到这一点，我写了下面的代码。一切都很好，除了鼠标按下事件，它什么都不做。只有当我覆盖这样的颜色时它才`UIManager`有效`UIManager.put("Button.select", Color.red);`。的问题`UIManager`是它会改变我所有的按钮。

谁能告诉我我可能做错了什么或者完成我想做的事情的最佳方法是什么？

我的代码：

```
final JButton btnSave = new JButton("Save");

btnSave.setForeground(new Color(0, 135, 200).brighter());
btnSave.setHorizontalTextPosition(SwingConstants.CENTER);
btnSave.setBorder(null);
btnSave.setBackground(new Color(3, 59, 90));

btnSave.addMouseListener(new MouseListener() {
    @Override
    public void mouseReleased(MouseEvent e) {
        btnSave.setBackground(new Color(3, 59, 90));
    }

    @Override
    public void mousePressed(MouseEvent e) {
        // Not working :(
        btnSave.setBackground(Color.pink);
    }

    @Override
    public void mouseExited(MouseEvent e) {
        btnSave.setBackground(new Color(3, 59, 90));
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        btnSave.setBackground(new Color(3, 59, 90).brighter());
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        btnSave.setBackground(new Color(3, 59, 90).brighter());
    }
}); 
```

Edit1：所以，我使用的是 mKorbel 所建议的，而不是鼠标侦听`ChangeListener`器`ButtonModel`。使用此代码，我仍然没有观察到鼠标在按钮上按下的任何变化，除非我在按钮外按下并拖动。有什么想法吗？

```
btnSave.getModel().addChangeListener(new ChangeListener() {

    @Override
    public void stateChanged(ChangeEvent e) {
        ButtonModel model = (ButtonModel) e.getSource();

        if (model.isRollover()) {
            btnSave.setBackground(new Color(3, 59, 90).brighter());
        } else if (model.isPressed()) {
            btnSave.setBackground(Color.BLACK);
        } else {
            btnSave.setBackground(new Color(3, 59, 90));
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-31T14:11:17.190

问题是由于 JButton 默认填充了其内容区域，并且当按下按钮时，Metal L&F 将自动使用其内部选择的颜色填充它。

最好的办法是扩展 JButton 以创建自己的按钮，禁用内容区域填充，并自己绘制按钮的背景。

这是一个小演示（不确定它是否适用于其他 L&F，甚至可以肯定它不适用）：

```
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;

public class TestButton {

    class MyButton extends JButton {

        private Color hoverBackgroundColor;
        private Color pressedBackgroundColor;

        public MyButton() {
            this(null);
        }

        public MyButton(String text) {
            super(text);
            super.setContentAreaFilled(false);
        }

        @Override
        protected void paintComponent(Graphics g) {
            if (getModel().isPressed()) {
                g.setColor(pressedBackgroundColor);
            } else if (getModel().isRollover()) {
                g.setColor(hoverBackgroundColor);
            } else {
                g.setColor(getBackground());
            }
            g.fillRect(0, 0, getWidth(), getHeight());
            super.paintComponent(g);
        }

        @Override
        public void setContentAreaFilled(boolean b) {
        }

        public Color getHoverBackgroundColor() {
            return hoverBackgroundColor;
        }

        public void setHoverBackgroundColor(Color hoverBackgroundColor) {
            this.hoverBackgroundColor = hoverBackgroundColor;
        }

        public Color getPressedBackgroundColor() {
            return pressedBackgroundColor;
        }

        public void setPressedBackgroundColor(Color pressedBackgroundColor) {
            this.pressedBackgroundColor = pressedBackgroundColor;
        }
    }

    protected void createAndShowGUI() {
        JFrame frame = new JFrame("Test button");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final MyButton btnSave = new MyButton("Save");
        btnSave.setForeground(new Color(0, 135, 200).brighter());
        btnSave.setHorizontalTextPosition(SwingConstants.CENTER);
        btnSave.setBorder(null);
        btnSave.setBackground(new Color(3, 59, 90));
        btnSave.setHoverBackgroundColor(new Color(3, 59, 90).brighter());
        btnSave.setPressedBackgroundColor(Color.PINK);
        frame.add(btnSave);
        frame.setSize(200, 200);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestButton().createAndShowGUI();
            }
        });

    }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-31T14:05:36.547

*   永远不要将[MouseListener](http://docs.oracle.com/javase/tutorial/uiswing/events/listdatalistener.html)用于[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

*   将[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)或[ChangeListener](http://docs.oracle.com/javase/tutorial/uiswing/events/changelistener.html)与[ButtonModel一起使用](http://docs.oracle.com/javase/7/docs/api/javax/swing/ButtonModel.html)

*   在[ButtonModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/ButtonModel.html)中实现

    1)`isPressed`

    2)`isArmed`

    3)`isRollover`

    4) 艾

*   [JButton 和 ButtonModel 的示例](https://stackoverflow.com/a/5755124/714968)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-30T16:07:20.053

```
public class MyCustomButton extends JButton {
    private Color pressedColor = Color.GREEN;
    private Color rolloverColor = Color.RED;
    private Color normalColor = Color.BLUE;

    public MyCustomButton (String text) {
        super(text);
        setBorderPainted(false);
        setFocusPainted(false);

        setContentAreaFilled(false);
        setOpaque(true);

        setBackground(normalColor);
        setForeground(Color.WHITE);
        setFont(new Font("Tahoma", Font.BOLD, 12));
        setText(text);

        addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent evt) {
                if (getModel().isPressed()) {
                    setBackground(pressedColor);
                } else if (getModel().isRollover()) {
                    setBackground(rolloverColor);
                } else {
                    setBackground(normalColor);
                }
            }
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-23T18:05:02.220

用你已经拥有的东西试试这个：

```
yourButton.setBorder(null);
yourButton.setContentAreaFilled(false); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-04T18:19:25.557

就我而言，当用户按下按钮时，我只想要一个简单的背景和颜色切换。

改编 Guillaume Polet 的解决方案：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;

import javax.swing.ButtonModel;
import javax.swing.JButton;

@SuppressWarnings("serial")
class Button extends JButton {

    private Color pressedForeground = Color.BLACK;
    private Color pressedBackground = Color.WHITE;

    Button() {
        this(null);
    }

    Button(String text) {
        super(text);
        super.setContentAreaFilled(false);
        setForeground(Color.WHITE);
        setBackground(Color.BLACK);
        setFocusPainted(false);
        setBorderPainted(false);
        setFont(new Font("arial", Font.PLAIN, 16));
    }

    @Override
    public void paint(Graphics g) {
        Color oldFg = getForeground();
        Color newFg = oldFg;
        ButtonModel mod = getModel();

        if (mod.isPressed()) {
            newFg = pressedForeground;
            g.setColor(pressedBackground);
        } else {
            g.setColor(getBackground());
        }

        g.fillRect(0, 0, getWidth(), getHeight());
        setForeground(newFg);
        super.paintComponent(g);
        setForeground(oldFg);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T13:46:58.807

可能什么都没有，但可以尝试改用：Color.PINK，大写字母？这样做时有什么变化吗？

mousepressed 和 mouseclicked 也不会相互覆盖吗？mousepressed 应该在您按下它时做出反应并在您释放鼠标时单击它

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-23T11:50:21.037

而不是设置颜色，因为这似乎不起作用，您可以尝试将背景设置为可拉伸的图像文件并将其设置为背景。那行得通吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-06T06:21:07.620

**这对我有用！试试这个兄弟...**

```
final JButton btnSave = new JButton("Save");

btnSave.setForeground(new Color(0, 135, 200).brighter());
btnSave.setHorizontalTextPosition(SwingConstants.CENTER);
btnSave.setBorder(null);

UIManager.put("Button.select", new Color(3, 59, 90)); //<--- Added ---
//btnSave.setBackground(new Color(3, 59, 90));

btnSave.addMouseListener(new MouseListener() {
    @Override
    public void mouseReleased(MouseEvent e) {
        UIManager.put("Button.select", new Color(3, 59, 90)); //<--- Added ---
        //btnSave.setBackground(new Color(3, 59, 90));
    }

    @Override
    public void mousePressed(MouseEvent e) {
        // it's working :)
        UIManager.put("Button.select", Color.pink); //<--- Added ---
        //btnSave.setBackground(Color.pink);
    }

    @Override
    public void mouseExited(MouseEvent e) {
        btnSave.setBackground(new Color(3, 59, 90));
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        btnSave.setBackground(new Color(3, 59, 90).brighter());
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        btnSave.setBackground(new Color(3, 59, 90).brighter());
    }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-15T00:08:21.797

初始化按钮

`JButton button = new JButton();`

然后，在鼠标按下时执行：

```
button.setContentAreaFilled(false);
button.setOpaque(true);
button.setBackground(/*Insert Color Here*/); 
```

在鼠标释放时：

```
button.setContentAreaFilled(true);
button.setBackground(/*Reset Color Here*/); 
```

# ruby-on-rails - 在 RoR 2 中向 AR 模型添加计算字段

> ID：14627225
> 
> 赞同：0
> 
> 时间：2013-01-31T13:44:39.927
> 
> 标签：ruby-on-rails, view, triggers, rails-activerecord, calculated-columns

我是 RoR 的新手，正在开发现有的 Rails 2 应用程序。该应用程序报告了许多指标，我需要添加一个新指标，它是其他两个指标的比率。我想了解做这种事情的“正确”Rails 方式。但我也想快速完成它，并且对其余代码的风险最小。我想将现有指标的报告、汇总、绘图和聚合逻辑扩展到新的计算字段，而不必以稍微不同的方式重新实现所有内容。

1.  我可以向数据库添加一个字段并安装一个触发程序来维护它。这具有将工作推入数据库的优点，并允许我在必要时对该字段进行索引，但它会消耗数据库中的另一个字段，我认为我目前并不需要该字段的索引。AR 迁移会是什么样子？

2.  我可以创建一个计算字段的视图。如何在不中断其余代码的情况下切换模型以使用具有新字段的新视图？AR 迁移是什么样的？

3.  我可以将新字段添加到查询中... SELECT my_table.*, a/b AS ab_ratio FROM my_table ... 这是否意味着我需要检查该特定模型上的所有 .find 调用并更改它们？有更好的方法吗？

有一些代码示例来说明这种事情在哪里以及如何实现和/或记录是非常有帮助的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T20:12:43.293

我建议使用模型上的事件来计算合成值并将任何业务逻辑/触发器保留在数据库之外：

```
class MyRecord < ActiveRecord::Base
  before_save :update_ratio

private
  def update_ratio
    self.ratio = self.a / self.b
  end
end 
```

# c# - 为什么我的 async/await 与 CancellationTokenSource 泄漏内存？

> ID：14627226
> 
> 赞同：27
> 
> 时间：2013-01-31T13:44:42.683
> 
> 标签：c#, memory-leaks, async-await, restsharp, c#-5.0

我有一个广泛使用 async/await 的 .NET (C#) 应用程序。我觉得我已经对异步/等待有所了解，但我正在尝试使用一个库（RestSharp），它有一个较旧的（或者我应该说不同的）编程模型，它使用回调进行异步操作。

RestSharp 的`RestClient`类有一个 ExecuteAsync 方法，它接受一个回调参数，我希望能够在它周围放置一个包装器，这样我就可以`await`完成整个操作。该`ExecuteAsync`方法看起来像这样：

```
public RestRequestAsyncHandle ExecuteAsync(IRestRequest request, Action<IRestResponse> callback); 
```

我以为我让这一切工作得很好。我曾经`TaskCompletionSource`将`ExecuteAsync`呼叫包装在我可以等待的东西中，如下所示：

```
public static async Task<T> ExecuteRequestAsync<T>(RestRequest request, CancellationToken cancellationToken) where T : new()
{
    var response = await ExecuteTaskAsync(request, cancellationToken);

    cancellationToken.ThrowIfCancellationRequested();

    return Newtonsoft.Json.JsonConvert.DeserializeObject<T>(response.Content);
}

private static async Task<IRestResponse> ExecuteTaskAsync(RestRequest request, CancellationToken cancellationToken)
{
    var taskCompletionSource = new TaskCompletionSource<IRestResponse>();

    var asyncHandle = _restClient.ExecuteAsync(request, r => 
    {
        taskCompletionSource.SetResult(r); 
    });

    cancellationToken.Register(() => asyncHandle.Abort());

    return await taskCompletionSource.Task;
} 
```

对于我的大部分应用程序来说，这一直运行良好。

但是，作为单个操作的一部分，我有一部分应用程序对我进行了数百次调用`ExecuteRequestAsync`，并且该操作显示了一个带有取消按钮的进度对话框。您会在上面的代码中看到我将 a 传递`CancellationToken`给`ExecuteRequestAsync`; 对于这个长时间运行的操作，令牌与`CancellationTokenSource`对话框的“属于”相关联，`Cancel`如果用户单击取消按钮，则调用其方法。到目前为止一切顺利（取消按钮确实有效）。

我的问题是，我的应用程序的内存使用量在长时间运行的应用程序期间猛增，以至于在操作完成之前内存不足。

我在上面运行了一个内存分析器，发现我有很多`RestResponse`对象仍在内存中，即使在垃圾收集之后也是如此。（它们又拥有大量数据，因为我正在通过网络发送数兆字节的文件）。

根据分析器，这些`RestResponse`对象保持活动状态是因为它们被`TaskCompletionSource`（通过）引用，而这些对象又保持活动状态，因为它是通过注册回调列表`Task`从 引用。`CancellationTokenSource`

从所有这些来看，我认为为每个请求注册取消回调意味着与所有这些请求相关联的整个对象图将继续存在，直到整个操作完成。难怪它内存不足:-)

所以我想我的问题不是“为什么会泄漏”，而是“我该如何阻止它”。我无法*取消*注册回调，我该*怎么*办？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-31T15:34:37.880

> 我无法取消注册回调

事实上，你可以。的[返回值为`Register()`：](http://msdn.microsoft.com/en-us/library/dd321635.aspx)

> `CancellationTokenRegistration`可用于取消注册回调的实例。

要实际取消注册回调，请调用`Dispose()`返回的值。

在您的情况下，您可以这样做：

```
private static async Task<IRestResponse> ExecuteTaskAsync(
    RestRequest request, CancellationToken cancellationToken)
{
    var taskCompletionSource = new TaskCompletionSource<IRestResponse>();

    var asyncHandle = _restClient.ExecuteAsync(
        request, r => taskCompletionSource.SetResult(r));

    using (cancellationToken.Register(() => asyncHandle.Abort()))
    {
        return await taskCompletionSource.Task;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T15:34:46.553

您需要保留 Register() 调用返回的 CancellationTokenRegistration。处理 CancellationTokenRegistration 会取消注册回调。

# tcl - 如何在 TCL 的字符串列表中解释“”？

> ID：14627229
> 
> 赞同：0
> 
> 时间：2013-01-31T13:45:00.223
> 
> 标签：tcl

我想构造一个复杂的变量，让我们看看：

```
set entry_arg [lindex $argv 1]
set command_to_launch {extrernal_command_tool -option "set var $entry_arg" -other_option}
exec $command_to_lauch 
```

命令启动，没问题...

但是，问题是工具获取 $entry_arg 并崩溃......这是由于不允许 tcl 解释 de 变量的“”

```
set command_to_launch {extrernal_command_tool -option "set var [lindex $argv 1]"  -other_option} 
```

有同样的问题！

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T13:58:47.967

`command_to_launch`您应该使用[`list`](http://www.tcl.tk/man/tcl8.6/TclCmd/list.htm)命令构造 的内容。

```
set command_to_launch [list \
    extrernal_command_tool -option "set var [lindex $argv 1]" -other_option] 
```

您可以使用以下任何*一种*来运行它：

```
exec {*}$command_to_launch           ; # For 8.5 or 8.6
eval exec $command_to_launch         ; # For 8.4 or before 
```

当然，为您使用的语言版本选择正确的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:06:41.027

问题不是`""`，是`{}`。尝试：

```
set entry_arg [lindex $argv 0]
set command_to_launch "extrernal_command_tool -option $entry_arg -other_option"
set output [eval exec $command_to_lauch] 
```

您需要了解*插值*、引用和大括号，如下所示：[了解大括号的用法](https://stackoverflow.com/questions/2193641/tcl-curly-braces)

（另外，我怀疑你想使用`[lindex $argv 0]`——TCL 使用变量`argv0`作为程序名称，并且参数从索引 0 开始，这与 C 和其他语言不同。）

**编辑：** 如果你真的想要一个引用的参数，你可能实际上是这个意思`"set var xxx"`：

```
 set command_to_launch "extrernal_command_tool -option \"set var $entry_arg\" -other_option" 
```

# java - 在 Mac 上合并处理中的 JAR 文件

> ID：14627230
> 
> 赞同：0
> 
> 时间：2013-01-31T13:45:02.150
> 
> 标签：java, jar, processing, executable-jar

嗨，我知道有很多关于如何合并 jar 的文章，但我的问题有点不同。

我想使用 bash 脚本来合并 jar 文件。我所有的 jar（来自 Processing）都在 ./lib 这就是我所做的：

```
mkdir tmp
FILES=lib/*.jar
for T in $FILES; do
  (cd tmp; jar -xf ../$T)
done
jar -cfm combined.jar tmp/META-INF/MANIFEST.MF  -C tmp . 
```

当然，我得到了一个 jar 文件，但它并没有真正表现得像它应该的那样。

顺便说一句：我确保最后提取的 jar 是主要应用程序 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T17:07:50.350

This script works fine for me when I grab ALL the required jars from Processing (2.1 on OSX in my case). Here are the contents of my 'lib' folder before running it:

```
MySketch.jar
core.jar
gluegen-rt-natives-macosx-universal.jar
gluegen-rt.jar
jogl-all-natives-macosx-universal.jar
jogl-all.jar 
```

If you use any libraries, you need to include ALL the jars for those as well.

# iphone - 从 IBAction 方法调用 AudioServicesPlaySystemSound 声音时听不到声音

> ID：14627232
> 
> 赞同：0
> 
> 时间：2013-01-31T13:45:07.237
> 
> 标签：iphone, ios, objective-c, audiotoolbox

我的 iOS 应用程序中的 AudioServicesPlaySystemSound 有问题。

我定义了一种播放系统声音的方法。当我从 viewDidLoad 调用该方法时，我可以听到声音播放，但是当我从按钮处理程序调用它时，我听不到声音播放。

这是我的视图控制器中的代码：

```
SystemSoundID startSound = 0;

-(void)playStartSound
{        
    AudioServicesPlaySystemSound(startSound);
}

-(void)viewDidLoad 
{           
    NSURL *urlStart = [[NSBundle mainBundle] URLForResource:@"Beep" withExtension:@"wav"];
    AudioServicesCreateSystemSoundID((CFURLRef)urlStart, &startSound);

    [self playStartSound];    

    [super viewDidLoad];
}

- (IBAction)start:(id)sender
{
    [self playStartSound];
} 
```

IBAction 方法与一个按钮相关联。当我选择按钮时，将调用 playStartSound 方法，但听不到声音。

在调用 dealloc 方法之前，系统声音不会使用 AudioServicesDisposeSystemSoundID 进行处理。

我尝试从 playStartSound 中调用 AudioServicesCreateSystemSoundID，但没有任何区别。

该应用程序还使用 AV Foundation、Media Player、Core Media、Core Video 和 Core Location。我想知道其中之一是否会干扰 AudioToolbox？

**更新**：我只是把一个简单的应用程序放在一起，它只包含上面的代码和一个按钮，当我选择按钮时声音播放得很好。

因此，我从控制器中删除了所有视频捕获代码，现在音频播放正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:43:41.743

这不起作用，因为我的应用程序中有一个活动的视频捕获会话。

当有活动的视频捕获会话时，AudioServicesPlaySystemSound 将不会播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:27:38.500

```
 NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"7777" ofType:@"mp3"];
   SystemSoundID soundID;
   AudioServicesCreateSystemSoundID((__bridge CFURLRef)([NSURL fileURLWithPath: soundPath]), &soundID);
   AudioServicesPlaySystemSound (soundID); 
```

嘿试试这样它会玩

# asp.net-mvc-3 - Asp.net 自定义剃须刀视图引擎，用于访问开箱即用的视图

> ID：14627243
> 
> 赞同：0
> 
> 时间：2013-01-31T13:45:51.083
> 
> 标签：asp.net-mvc-3

我有两个使用相同视图的 asp.net MVC 3 Web 项目，我想将这些视图放在一个 Web 项目中，该项目包含控制器、操作过滤器、扩展方法等常见项目......（上面的项目文件夹这两个项目）。

我创建了这个自定义视图引擎来修改视图和局部视图、位置。

```
public class GenericViewEngine : RazorViewEngine
    {
        public GenericViewEngine(): this(null)
        { }
        public GenericViewEngine(IViewPageActivator viewPageActivator)
        {
            base.ViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/../Framework.Web/Views/{1}/{0}.cshtml", "~/Views/Shared/{0}.cshtml", "~/../Framework.Web/Views/Shared/{0}.cshtml"  };
            base.MasterLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/../Framework.Web/Views/{1}/{0}.cshtml", "~/Views/Shared/{0}.cshtml", "~/../Framework.Web/Views/Shared/{0}.cshtml"  };
            base.PartialViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/../Framework.Web/Views/{1}/{0}.cshtml", "~/Views/Shared/{0}.cshtml", "~/../Framework.Web/Views/Shared/{0}.cshtml" };
            base.FileExtensions = new string[] { "cshtml" };
        }
        protected override IView CreatePartialView (ControllerContext controllerContext, string partialPath)
        {
            return base.CreatePartialView(controllerContext, partialPath);
        }
        protected override IView CreateView (ControllerContext controllerContext, string viewPath, string masterPath)
        {
            return base.CreateView(controllerContext, viewPath, masterPath);

        }
    } 
```

我得到一个例外，上面写着：不能使用前导 .. 退出顶级目录。

我怎样才能把这两个项目的共同观点从每个网络项目中拿出来？是否有任何解决方案可以避免将视图编译到主要的公共 Web 项目中？

提前致谢。

何塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:16:50.970

> 是否有任何解决方案可以避免将视图编译到主要的公共 Web 项目中？

是的，您可以将它们作为资源嵌入到一些插件程序集中并在多个项目中重用它们。为此，您必须编写一个自定义 VirtualPathProvider，它能够从当前应用程序之外的非标准位置加载视图。您还可以查看[RazorGenerator 项目](http://razorgenerator.codeplex.com/)。这是一个[`accompanying blog post`](http://blog.mirajavora.com/re-use-mvc-views-across-projects-with-razor-generator)解释一些必需的步骤。基本上，您需要安装[Razor 生成器扩展](http://visualstudiogallery.msdn.microsoft.com/1f6ec6ff-e89b-4c47-8e79-d2d68df894ec)，它将预编译您的 Razor 视图作为您可以在 MVC 应用程序中引用的类库的一部分。

# function - 函数调用后将插入模式光标返回到同一位置

> ID：14627245
> 
> 赞同：0
> 
> 时间：2013-01-31T13:45:56.543
> 
> 标签：function, vim

当我两次插入相同的字符时，我一直在尝试编写一些 Vimscript 来调用一个函数，在我的特殊情况下，我希望如果你两次插入分号，以便将分号实际移动到行尾.

```
command! Semi call Semi()
inoremap ; <C-O>:Semi2<CR>

function! Semi()
    let x = getpos(".")
    " If we are in the last column..
    if col(".")+1 == col("$")
        let insert_semi = getline(".") . ";"
        call setline(".", insert_semi)
        let x[2] += 1
        call setpos(".", x)
        return
    endif
    let char = getline(".")[x[2] - 2]
    if char == ";"
        " if prev char was a semicolon also, remove and append to the end
    else
        " insert semicolon normally...
    endif
endfunction 
```

我遇到的问题是在最后一列调用此函数时，您必须退出插入模式才能调用此函数，光标将进入正常模式并将光标移动到最后一列。有什么方法可以判断光标是附加到行尾还是插入到最后一列之前，以及函数调用完成时将其返回到同一位置？

我很清楚我可以使用插入映射，`;;`但是我不喜欢这种行为，Vim 进入等待下一个键模式并且不显示您编写的内容。此问题不仅与我列出的问题有关，而且与第一列中也出现的更普遍的问题有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:07:17.997

如果您的函数不使用插入模式来附加 ';' -- 例如通过从缓冲区粘贴 -- 您可以使用该`gi`命令返回您退出插入模式的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:09:44.400

我建议不要使用`i_CTRL-O`，它会触发`InsertLeave`和`InsertEnter`事件，这可能会影响其他插件。我会`:inoremap <expr> ;`在这里使用。见`:help :map-expr`。在该表达式（即您的函数）中，记录当前光标位置并将其与最后记录的位置进行比较。如果它在它旁边，则返回键以撤消插入并在末尾重做（`<BS><BS><End>;`），否则只需返回`;`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T14:19:59.580

你不需要一个函数：

```
inoremap ;; ;;<Esc>h"_xxm`$p``a 
```

或更清洁：

```
inoremap ;; <Esc>m`A;<Esc>``a 
```

# android - 如何在 Android 中同时录制 2 个麦克风？

> ID：14627246
> 
> 赞同：10
> 
> 时间：2013-01-31T13:45:56.457
> 
> 标签：android, audio-recording, microphone, galaxy

我正在尝试同时录制来自 2 个内置麦克风（底部、顶部）的音频信号。我可以使用拾取底部麦克风信号

```
MediaRecorder.AudioSource.MIC 
```

和顶部麦克风信号使用

```
MediaRecorder.AudioSource.CAMCORDER 
```

我可以单独录制，但我想从 2 个麦克风同时录制。有谁知道如何同时录制？我试过 & 或 | 运营商，但我只能得到 1 个频道信号。

我使用 Galaxy S2 设备。

我将不胜感激任何回应:) 提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-17T15:48:33.247

有一种误解，认为在具有 2 个麦克风的设备中，在立体声模式下录制时会同时使用两个麦克风。

在我对数十种设备进行测试的 3 年经验中，我发现情况并非如此。

在我使用过的各种 Android 设备（从低成本大众机型到旗舰机型）中，仅主麦克风就可**用于**单**声道和立体声录音。**

造成这种情况的一个原因是主麦克风的质量更好（更灵敏，噪音更小等）并且比辅助麦克风更昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T11:05:20.147

[您可以通过使用 AudioRecord ( http://developer.android.com/reference/android/media/AudioRecord.html](http://developer.android.com/reference/android/media/AudioRecord.html) ) 类进行立体声录音来实现这一点。看看[如何访问第二个麦克风 android，例如 Galaxy 3](https://stackoverflow.com/questions/15418267/how-to-access-the-second-mic-android-such-as-galaxy-3)。

将音频格式指定为立体声并将音频源指定为摄像机会在（兼容的）两个麦克风设备上自动选择两个麦克风，每个通道一个麦克风。

例如：

```
 audioRecorder = new AudioRecord(MediaRecorder.AudioSource.CAMCORDER,sampleRate,android.media.AudioFormat.CHANNEL_CONFIGURATION_STEREO,android.media.AudioFormat.ENCODING_PCM_16BIT,bufferSize); 
```

将初始化一个新的 AudioRecord 类，该类可以从两个设备麦克风以 PCM、16 位格式的立体声录制。

有关使用 AudioRecord（录制 .wav）录制的更多帮助，请查看：http: [//i-liger.com/article/android-wav-audio-recording](http://i-liger.com/article/android-wav-audio-recording)。

# c# - 在 WPF 中创建可重用的用户控件

> ID：14627256
> 
> 赞同：2
> 
> 时间：2013-01-31T13:46:42.007
> 
> 标签：c#, wpf, user-controls, wpf-controls

在我们使用 WPF for UI 构建的（相当大的）LOB 应用程序中，我们有很多包含相同类型数据子对象的视图模型。比如有很多地址

```
public class AddressViewModel : INotifyPropertyChanged
{

   public string City {...}
   public string ZipCode {...}
   public string Address {...}
   public string Number {...}

  // INPC logic omitted 
} 
```

分散在业务对象中：

```
public class CustomerViewModel : INotifyPropertyChanged
{
     public string Name {...}
     public AddressViewModel BillingAddress {...}
     public AddressViewModel DeliveryAddress {...}
     /*
     ...
     */
} 
```

是否可以构建一个可重用的自定义用户控件，我们可以将其绑定到任何地址子对象？

在旨在编辑客户详细信息的视图（可能是另一个自定义用户控件）中，我们希望放置一个像这样的自定义控件

```
<UserControl x:Class="OurApp.View.AddressEditor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>

        <TextBox x:Name="ZipCode" Text="{Binding Path=ZipCode, UpdateSourceTrigger = PropertyChanged}" Validation.ErrorTemplate="{x:Null}" HorizontalAlignment="Left" Height="23" Margin="10,19,0,0" TextWrapping="Wrap"  VerticalAlignment="Top" Width="120" />

         <!-- other fields for the rest of AddressViewModel properties-->

    </Grid>

</UserControl> 
```

我们可以像这样在绑定到 CustomerViewModel 实例的视图中简单地使用

```
 <TextBox x:Name="Name" Text="{Binding Path=Name, UpdateSourceTrigger = PropertyChanged}" Validation.ErrorTemplate="{x:Null}" />

<AddressEditor SomeProperty="{something that points to BillingAddress}" />
<AddressEditor SomeProperty="{something that points to DeliveryAddress}" /> 
```

这样做的正确方法是什么？我们试图将绑定指向 BillingAddress，但我们没有找到可行的方法......

提前感谢您的任何贡献，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T13:54:17.147

是的，这应该很容易，要么创建一个无外观的控件`DataTemplate`，要么只创建一个标准的 UserControl。欺骗它以将其设置`DataContext`为完整的地址对象

```
<local:AddressControl DataContext="{Binding BillingAddress}"/> 
```

这将允许您的新“AddressControl”具有类似这样的标记

```
<StackPanel Orientation="Vertical">
<Label Content="City"/>
<TextBox Content="{Binding City}"/>

<Label Content="ZipCode"/>
<TextBox Content="{Binding ZipCode}"/>

<Label Content="ZipCode"/>
<TextBox Content="{Binding ZipCode}"/>

<Label Content="Number"/>
<TextBox Content="{Binding Number}"/>
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:51:54.547

您可以将您的地址编辑器的数据上下文设置为例如。BillingAddress 只要 billingaddress 在用户控件中具有您需要的属性，它就应该可以工作

```
<TextBox x:Name="Name" Text="{Binding Path=Name, UpdateSourceTrigger = PropertyChanged}" Validation.ErrorTemplate="{x:Null}" />
<AddressEditor DataContext="{Binding Path=BillingAddress}" /> 
```

除了设置数据上下文之外，它还可以为您的用户控件创建一个依赖属性，您可以将您的 BillingAddress 绑定到该属性。

# firewall - iptables --gid-owner 仅适用于用户的主组

> ID：14627260
> 
> 赞同：6
> 
> 时间：2013-01-31T13:46:51.513
> 
> 标签：firewall, iptables, owner

我正在尝试禁用除“neta”组成员之外的所有用户对 IP 1.2.3.4 的访问。这是我专门为这个问题创建的一个新组。

```
iptables -I OUTPUT -o eth0 -p tcp -d 1.2.3.4 -m owner ! --gid-owner neta -j REJECT 
```

这将禁止所有用户访问 1.2.3.4，即使他们是组“neta”的成员。

我有一个用户 xx，他是 xx 组（主要组）和 neta 的成员。如果我将规则更改为：

```
iptables -I OUTPUT -o eth0 -p tcp -d 1.2.3.4 -m owner \! --gid-owner xx -j REJECT 
```

除了用户 xx 之外的所有人都无法访问 1.2.3.4。

我将 root 添加到该组 xx：

```
usermod -a -G xx root 
```

但是root仍然无法访问此IP。如果我将主用户组（root，xx）添加到规则中，一切都会按预期工作。

我尝试将其拆分为两条规则以确保（并且日志被拒绝）：

```
iptables -A OUTPUT -o eth0 -p tcp -d 1.2.3.4 -m owner --gid-owner neta -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp -d 1.2.3.4 -m limit --limit 2/s --limit-burst 10 -j LOG
iptables -A OUTPUT -o eth0 -p tcp -d 1.2.3.4 -j REJECT 
```

但没有区别。一切都被拒绝。

没有其他 iptables 规则。

```
root@vm1:~# iptables -nvL
Chain INPUT (policy ACCEPT 19 packets, 1420 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 10 packets, 1720 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      eth0    0.0.0.0/0            1.2.3.4     owner GID match 1001 
    0     0 LOG        tcp  --  *      eth0    0.0.0.0/0            1.2.3.4     limit: avg 2/sec burst 10 LOG flags 0 level 4 
    0     0 REJECT     tcp  --  *      eth0    0.0.0.0/0            1.2.3.4     reject-with icmp-port-unreachable 
```

我希望能够（禁止）通过从这个“neta”组添加/删除用户而不是为每个用户添加 iptables 规则来允许访问这个 IP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:54:47.670

Ok, to be honest I know to little about linux and iptables to be sure about my theory, but since I wanted to do the same for a VPN here we go.

I assume that the match is done using the process from which the packets originate from and that a linux process doesn't get all groups of a user assigned but instead a process runs with *one* uid and *one* gid.

That means that you have to execute the command explicitly using this specific group, or else the command/process is executed using the default group of the user.

* * *

Writing this I had an idea to see whether there is such possibility. I restricted access to a certain IP range using the group VPN. This never worked. Now I tested with the following command and it works:

```
sg vpn -c "ssh user@10.15.1.1" 
```

So I hope my theory was correct.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-30T18:14:48.340

旧帖子，但由于我在 Ubuntu 16.04.3 LTS 服务器中遇到了这个确切的问题，所以加入了。

Ubuntu 通过 netfilter 实现的*iptables*扩展检查当前网络数据包的所有者，并仅查询该用户的主要组 id。它不会深入挖掘并获得所有组成员身份。仅将**主要**组与该`--gid-owner`值进行比较。它看起来没有任何进一步。

如果他/她将所有相关用户名的主要/默认用户组更改为“neta”，则 OP 试图完成的工作将起作用。然后，这些用户将被规则捕获。

# php - PHP SOAP wsdl 致命错误和 Xdebug

> ID：14627263
> 
> 赞同：3
> 
> 时间：2013-01-31T13:46:56.323
> 
> 标签：php, soap, wsdl, xdebug, fatal-error

我真的不明白 PHP SOAP 库发生了什么我使用 SOAP 服务，它运行良好，但有时我有众所周知的“致命错误：SOAP-ERROR：解析 WSDL：........”

我已经读到这个错误是无法捕获的，因为 Xdebug 已打开，解决方案是禁用它以便能够捕获错误，...

但我不工作！错误以橙色和红色显示你有什么想法吗？

（我使用最新版本的 wamp，我不知道如何检查我选择的是 64 位还是 32 位，但它是 apache 2.2.22、php 5.3.13）

在此先感谢您的帮助 ！:)

```
<?php
xdebug_disable();
try {
  $sc = new SoapClient("some-wrong.wsdl", array('exceptions' => true));
} catch (Exception $e) {
  echo 'Error Caught :-)';
}
?> 
```

我想补充一点：

有时我有 2 个警告和 1 个错误

```
 - Warning: SoapClient::SoapClient -> "failed to open stream ..."
 - Warning: SoapClient::SoapClient -> "failed to load external entity ..."
 - Fatal error: SOAP-ERROR: Parsing WSDL -> "Couldn't load from ..." 
```

有时，只是致命的错误

我在 new SoapClient(..... 行之后放置了一个回声，当出现未捕获的错误时，不显示回声

我必须补充一点，我用 'trace' => 1、'exceptions' => 1 调用 SoapClient，

我在 apache 错误日志中有这个（******用来隐藏）

```
[Thu Jan 31 16:16:02 2013] [error] [client 127.0.0.1] PHP Fatal error:  SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://******?wsdl' : Start tag expected, '<' not found\n in D:\\Programmes\\wamp\\www\\******.php on line 144, referer: http://localhost/******.php
[Thu Jan 31 16:16:04 2013] [error] [client 127.0.0.1] PHP Warning:  ||| faultcode: WSDL ||| faultstring: SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://******?wsdl' : Start tag expected, '<' not found\n ||| in D:\\******.php on line 201, referer: http://localhost/******.php
[Thu Jan 31 16:16:04 2013] [error] [client 127.0.0.1] PHP Fatal error:  Call to a member function __getLastRequestHeaders() on a non-object in D:\\Programmes\\wamp\\www\\******.php on line 204, referer: http://localhost/******.php 
```

我编辑了我的第一条消息，因为我是新成员，无法在 8 小时之前回复我自己的消息

所以今天早上，我更改了 apache 的默认堆栈大小，因为 apache 仅在 apache 错误日志中使用这一行进行崩溃：[notice] Parent: child process exited with status 255 -- Restarting。

*   我已经安装了visual basic 2012（评估;））
*   使用了 Visual Basic 命令控制台（开始 > Micrososft Visual Studio 2012 > Visual Studio 工具）
*   检查父亲键入“cd ***my_path_ contains_apache_bin_directory* *** \bin dumpbin /all httpd.exe | find “stack””（是“40000 size of stack reserve”）
*   增加大小键入 editbin /stack:1048576 httpd.exe
*   并且不要忘记在 httpd.exe 文件上 PUT ADMINISTRATOR RIGHT + 退出 WANP ！！！（因为这个，我失去了一个早上！，editbin 正在返回一个 LINK 错误！！）

-> 这很奇怪，因为在完成此操作后，我有 WSDL 未捕获的错误，但由于几个小时我没有出现这种错误，可能只是我使用的代理列表能够正确连接，..？ ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:47:53.907

SOAP 扩展做了一些奇怪的事情并覆盖了一个内部 PHP 错误处理程序。这与 Xdebug 的错误覆盖机制有点冲突。不过，请务必包含完整的错误消息，我也许可以从那里更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:48:38.957

这是我得到的详细错误消息 Xdebug ( *** * 隐藏)

```
( ! ) Warning: SoapClient::SoapClient(http://****?wsdl) [<a href='soapclient.soapclient'>soapclient.soapclient</a>]: failed to open stream: Une tentative de connexion a �chou� car le parti connect� n�a pas r�pondu convenablement au-del� d�une certaine dur�e ou une connexion �tablie a �chou� car l�h�te de connexion n�a pas r�pondu. in D:\Programmes\wamp\www\****.php on line 146
Call Stack
#   Time    Memory  Function    Location
1   0.0013  497672  {main}( )   ..\script gepir3-1.php:0
2   0.6920  695896  SoapClient->SoapClient( )   ..\script gepir3-1.php:146

( ! ) Warning: SoapClient::SoapClient() [<a href='soapclient.soapclient'>soapclient.soapclient</a>]: I/O warning : failed to load external entity &quot;http://****?wsdl&quot; in D:\Programmes\wamp\www\****.php on line 146
Call Stack
#   Time    Memory  Function    Location
1   0.0013  497672  {main}( )   ..\script gepir3-1.php:0
2   0.6920  695896  SoapClient->SoapClient( )   ..\script gepir3-1.php:146

( ! ) Fatal error: SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://*****.asmx?wsdl' : failed to load external entity "http://****asmx?wsdl" in D:\Programmes\wamp\www\****.php on line 146
Call Stack
#   Time    Memory  Function    Location
1   0.0013  497672  {main}( )   ..\script gepir3-1.php:0
2   0.6920  695896  SoapClient->SoapClient( )   ..\script gepir3-1.php:146 
```

而且我不明白为什么我的 php.ini 包含此参数已关闭（也缺少自动启动

```
; XDEBUG Extension

zend_extension = "D:/Programmes/wamp/bin/php/php5.3.13/zend_ext/php_xdebug-2.2.0-5.3-vc9.dll"

[xdebug]
xdebug.remote_enable = off
xdebug.profiler_enable = off
xdebug.profiler_enable_trigger = off
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = "D:/Programmes/wamp/tmp" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-06T16:05:32.467

也许有点晚了，但 Opcache 模块也会干扰 XDebug：[https ://xdebug.org/docs/compat](https://xdebug.org/docs/compat)

必须禁用它才能使用 NetbeansIDE

# android - 无法解析得到空指针异常

> ID：14627264
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:46:56.980
> 
> 标签：android, android-emulator

```
et2.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub
        et2 = (EditText) findViewById(R.id.editText2);
        area = Math.PI * radius * radius;
        String name = Double.toString(area);
        et2.setText(name);

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

    }
}); 
```

05.156：I/Process(650)：发送信号。PID：650 SIG：9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:52:28.210

在 Textchange 侦听器之前声明您的 edittext ：

> ```
> et2 = (EditText) findViewById(R.id.editText2);
> et2.addTextChangedListener(new TextWatcher() {
> @Override
> public void onTextChanged(CharSequence s, int start, int before, int count){
>     // TODO Auto-generated method stub
>     area = Math.PI * radius * radius;
>     String name = Double.toString(area);
>     et2.setText(name);
> } 
> ```

# byte - PCM 样本位置 [字节偏移] 在 flac

> ID：14627266
> 
> 赞同：0
> 
> 时间：2013-01-31T13:46:57.530
> 
> 标签：byte, offset, pcm, flac

我有一个 flac 文件，我必须对波形进行一些分析，以寻找特定的样本。所以我在 PCM 数据中解压缩了它们，但是我需要知道，flac 文件中的特定样本在哪里。

所以：我知道PCM数据或wav文件中的字节偏移量，我想知道flac文件中压缩样本的字节偏移量。

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:20:32.733

您可能可以将样本追溯到 FLAC 文件中的帧。如果您认为音频可能有多个通道并且通常是压缩的，那么在该框架内会更加困难。如果您查看 flac 规范，我认为自己解析文件应该很容易：

[http://flac.sourceforge.net/format.html](http://flac.sourceforge.net/format.html)

而且您可能必须解码每一帧才能知道帧长度是多少......

# c# - 在不安装 Visual Studio 的情况下从 WPF/Win Form 应用程序连接到 Win CE 设备

> ID：14627273
> 
> 赞同：2
> 
> 时间：2013-01-31T13:47:10.783
> 
> 标签：c#, visual-studio-2008, compact-framework, windows-ce, corecon

我正在开发一个工具来查看 WPF 中 wince 设备的信息、文件和文件夹。我可以按照此[链接](http://blogs.msdn.com/b/vsdteam/archive/2007/12/06/corecon-api-part-v.aspx?Redirected=true)中的示例连接、断开连接和查看文件夹结构。

在开发人员机器上一切正常。我的机器是 Windows XP，我使用的是 VS2008。但是当我使用 WPF exe 并在仅安装了 .net 框架的机器上运行它时，我无法连接到设备。然后我安装了 .net Compact Framework 3.5，并按照链接中提供的相同步骤操作，但我没有在该部署的机器上安装 Visual Studio。

请提供在不安装 Visual Studio 的情况下连接到设备的步骤。而且我不确定它是否会在没有 Visual Studio 的情况下连接到设备。所以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T01:20:59.617

CoreCon 由 Visual Studio 安装，不单独提供。

如果您想从您的 PC 操作设备的文件系统，并且设备使用 ActiveSync/Windows Mobile 设备中心连接，您可以使用远程 API，RAPI。如果要使用 C#，可以使用封装了 RAPI的[OpenNETCF 桌面通信库。](http://rapi.codeplex.com/)

# android - 如何使用套接字、活动和视图？

> ID：14627280
> 
> 赞同：0
> 
> 时间：2013-01-31T13:47:34.037
> 
> 标签：android

我是 android 编程新手，我需要帮助来构建应用程序。我希望两部手机相互连接，一部是客户端，另一部是服务器。我希望客户有 2 个阶段。首先，用户将输入服务器的 ip，然后单击按钮以建立连接。在第二个中，用户将输入一条消息并单击一个按钮将其发送到服务器。

下面显示的代码是将字符串“消息”发送到服务器，但正如我所说，我希望用户能够输入字符串。我不知道如何解决他的问题，我是否需要在下面显示的活动中建立连接后调用第二个活动？在那种情况下，我不知道如何将套接字传递给另一个活动，我只知道如何传递字符串。此外，我需要另一个按钮，因此需要一个新的 OnClickListener，我仍然需要将套接字传递给该函数。

如果不使用第二个活动，我不知道如何在建立连接后显示第二个输入字段（用户输入消息以发送到服务器的那个）。此活动的视图（layout.xml）已经关联到相同的，我不能只清除屏幕并动态创建一个新的 EditText 字段。

我希望我说清楚了。

提前致谢

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_client);

    serverIp = (EditText) findViewById(R.id.server_ip);
    connectPhones = (Button) findViewById(R.id.connect_phones);
    connectPhones.setOnClickListener(connectListener);       

}

private OnClickListener connectListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        if (!connected) {
            serverIpAddress = serverIp.getText().toString();
            if (!serverIpAddress.equals("")) {
                Thread cThread = new Thread(new ClientThread());
                cThread.start();
            }
        }
    }
};

public class ClientThread implements Runnable {

    public void run() {
        try {
            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Socket socket = new Socket(serverAddr, ServerActivity.SERVERPORT);
            connected = true;
            while (connected) {
                try {
                    PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                .getOutputStream())), true);
                    **out.println("messageToSend");**
                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }
            }
            socket.close();
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:06:56.390

那么一个快速的解决方法是通过隐藏当前显示的 EditText 和 Button

```
 view.setVisiblility(View.GONE) 
```

并通过显示其他editText和按钮

```
 view.setVisibility(View.Visible) 
```

并使用相同的活动...

但是更好的解决方案是打开套接字以在服务中进行通信查看带有套接字的android服务...在第一个活动中启动服务，当连接建立时，转移第二个活动并将活动与服务绑定，这样就可以通信顺便说一句活动和服务......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:09:01.547

不完全确定您在此处寻找什么，但如果我理解正确，您正在考虑如何发送消息。只需添加

```
 message2send= (EditText) findViewById(R.id.user_message); 
```

然后你在哪里

```
 **out.println("messageToSend");** 
```

用。。。来代替

```
 **out.println(message2send);** 
```

并在您的布局中添加一个额外的编辑文本字段。

应该注意的是，您采取的方式并不理想，因为其他电话（服务器）必须监听套接字才能接收消息，这会导致额外的数据费用以及浪费电池电量（移动设备中的传统服务器位于两部手机之间以存储消息，以防用户离线或手机死机）

希望这对您有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:11:57.030

我不认为，您需要第二个活动来通过套接字发送消息。

无论如何，这取决于你的设计——

您可以同时拥有两个editText，但它们的可见性会有所不同。

```
 EditText serverIpAddressET;  
 EditText messageET ;  // Deafult visibility Gone 
```

serverIpAddressET 在用户未提供套接字 IP 时可见。建立连接后，您可以将 serverIpAddressET 的可见性更改为 Gone 并使 messageET 可见。

# ruby-on-rails - 带有ajax的rails 3.2

> ID：14627287
> 
> 赞同：0
> 
> 时间：2013-01-31T13:47:39.140
> 
> 标签：ruby-on-rails, ajax, jquery, ruby-on-rails-3.2

伙计们，我在我的控制器上有以下操作来向我的用户发送电子邮件。

```
def email_all_users
    User.all.each do |u|
    if !u.information.nil?
        if !u.information.business
            UserMailer.candidate_email(u).deliver
        else 
                UserMailer.business_email(u).deliver
        end
    else
            UserMailer.no_info_email(u).deliver
    end
  end
  redirect_to "/users/#{current_user.id}",  :flash => { :success => "Los correos fueron enviados" }
end 
```

这是我认为的链接

```
<%= link_to "Enviar Correos".html_safe, {:controller => "users", :action => "email_all_users"}, :method => "get",  :id => "email_users", :html =>  {:style => "color:#FAA732;" }, :remote => true %>
<span id="loading" style="color:rgb(41, 160, 41);display:none;"><i class="icon-spinner icon-spin"></i> Enviando</span>
<span id="send" style="color:rgb(41, 160, 41);display:none;"><i class="icon-ok-circle"></i> Enviado!</span> 
```

我用这个内容创建了这个文件 email_all_users.js.erb

```
$('#email_users').hide();
$('#email_users').ajaxStart(function() {
    $('#loading').show();
});
$('#email_users').ajaxComplete(function() {
   $('#loading')..hide();
   $('#send')..show();
}); 
```

正如您在单击链接后看到的那样，我想隐藏链接并显示我在加载范围内的图像（加载是 id），然后当操作完成时，我想隐藏加载并显示我的发送范围（发送是跨度的 id）。

我做错了什么，因为当我单击应用程序时发送电子邮件，但不隐藏链接并且不显示加载和发送。

在此先感谢您的帮助

解决方案

* * *

我将我的 email_all_users.js.erb 移动到我的资产文件夹，并像这样更改它：

```
$(document).ajaxStart(function() {
    $('#email_users').hide();
    $('#loading').show();
});

$(document).ajaxComplete(function() {
    $('#loading').hide();
    $('#send').show();
}); 
```

问题解决。

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:07:03.607

这些 ajax 调用需要进入常规 js 文件，而不是作为对操作的响应。当此代码被调用时，ajax 请求已经完成。

# django - Django Rest Framework 字典字段

> ID：14627288
> 
> 赞同：6
> 
> 时间：2013-01-31T13:47:55.710
> 
> 标签：django, mongodb, mongoengine, django-rest-framework

我正在使用带有 mongoengine 的 Mongodb 作为 Django 中 API 的后端。我用来创建 api 的框架是 Django Rest Framework。

我需要在 Mongo 的一个字段中存储一个字典，当调用 post 方法时我所做的最好的事情是使用一个字符字段并在函数 restore_object 中解析字典。

有没有更好的方法来实现这个目标？

最好创建一个dict字段？我不知道这有多难。

谢谢你。

编辑以显示一些代码，请注意我将字典存储为 dict (DictField)，它的内容可能会从一个对象更改为另一个对象。

我的 mongoengine 模型类似于：

```
class MyDoc(mongoengine.Document):
    name = mongoengine.StringField(max_length=200)
    context = mongoengine.DictField() 
```

和我的序列化器是这样的：

```
class MyDocSerializer(serializers.Serializer):

    name = serializers.CharField(max_length=200)
    context = serializers.CharField()
    url = serializers.HyperlinkedIdentityField(
    view_name="drf:mydoc-detail",)

    def __init__(self,*args,**kwargs):
    super(MyDocSerializer,self).__init__(*args,**kwargs)

    def restore_object(self, attrs, instance=None):

    # Parse string to dict
    # this is so ugly, notice I had to repace ' for " to
    # avoid an error parsing the json
    context = JSONParser().parse(
    StringIO.StringIO(
        attrs['context'].replace("'","\"")
        )
    )

    attrs['context'] = context
    if instance is not None:
        instance.name = attrs['name']
        instance.context = context
        return instance

    return MyDoc(**attrs) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T11:00:28.597

而不是处理序列化程序中的字典字段`restore_object`，您可能最终会得到一些稍微干净的东西，如果您使用字典字段的自定义字段来管理字典表示和基于内部字符的存储之间的转换。

您需要继承`serializers.WritableField`并覆盖`to_native()`and`from_native`方法。

[相关文档在这里](http://www.django-rest-framework.org/api-guide/fields/#custom-fields)。

* * *

注意：版本 2.x 中存在的 WritableField 类不再存在。如果字段支持数据输入，您应该继承 Field 并覆盖 to_internal_value()。

* * *

**更新**：从 3.0.4 开始，您现在可以使用`serializers.DictField`... [http://www.django-rest-framework.org/api-guide/fields/#dictfield](http://www.django-rest-framework.org/api-guide/fields/#dictfield)

# proxy - WSO2 ESB - 如何选择在代理服务中公开的方法

> ID：14627292
> 
> 赞同：1
> 
> 时间：2013-01-31T13:48:07.280
> 
> 标签：proxy, wsdl, wso2, wso2esb, esb

Source`wsdl`包含 10 个方法，但我们只想公开代理服务中的 2 个方法。

是否可以？如果可能的话，我们应该如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:38:47.707

编辑 wsdl 以仅具有这两个操作并将其附加到代理 conf（即：使用`<publishWSDL>`选项）

# jquery - Jquery 粘性菜单

> ID：14627293
> 
> 赞同：0
> 
> 时间：2013-01-31T13:48:07.390
> 
> 标签：jquery, menu

当我使用 gooeymenu.js 时，其他 jquery 函数无法正常工作，没有 gooeymenu.js 所有函数都可以正常工作。如果有人知道这个问题，请帮助我。Bellow URl 关于粘性菜单

[http://www.dynamicdrive.com/dynamicindex1/gooeymenu.htm](http://www.dynamicdrive.com/dynamicindex1/gooeymenu.htm)

如果我使用此菜单波纹管功能不起作用

```
$(".connect a").click(function () {
$(".connect_content").slideDown("slow");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:51:09.380

您也许可以更改 jQuery 别名以防止冲突：[JQuery conflict with an other JQuery library](https://stackoverflow.com/questions/1159815/jquery-conflict-with-an-other-jquery-library)

# xcode - xcode 预处理器宏 LLVM 4.2

> ID：14627295
> 
> 赞同：1
> 
> 时间：2013-01-31T13:48:19.117
> 
> 标签：xcode, preprocessor, llvm

我正在尝试将 DLOG 的 DEBUG_MODE 宏设置为仅在调试模式下工作，但它不起作用......

到目前为止我尝试了什么：http: [//developer.sinnerschrader-mobile.com/llvm-preprocessor-macros-xcode/275/](http://developer.sinnerschrader-mobile.com/llvm-preprocessor-macros-xcode/275/)

并将另一个标志命名为 DEBUG_MODE，播放带有或不带有 $(inherited) 值的组合。

我很困惑，绿色突出显示的部分代表什么？为什么有些部分是空的，但是当点击的值出现在其中时？

我应该如何配置我的宏，以便我可以真正访问它们：

```
#ifdef DEBUG
#   define DLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);
#else
#   define DLog(...) do { } while (0)
#endif 
```

![在此处输入图像描述](../Images/1f38827e805d59b045ba3bf122d5b856.png)

编辑：

这真是变态了！我已在发布模式下将所有值设置为 DEBUG=0。并改变了

```
#if DEBUG
#   define DLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__);
#else
#   define DLog(...) do { } while (0)
#endif 
```

仍然看到发布中的所有日志...

![在此处输入图像描述](../Images/683a5e53497e4a766b20b5b7e2e180ed.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:51:55.650

假设您已使用（如果已定义）提供不同的实现，您的预处理器宏设置（调试存在`DEBUG=1`和发布存在`DEBUG=0`）将导致使用宏的第一个定义。这是因为如果您定义了宏，**无论您将其定义为什么，都会***定义*宏。`DLog()``#ifdef`

 ***您需要做的是：

*   `DEBUG=0`从您的发布配置文件中删除。
*   使用`#if DEBUG`而不是`#ifdef DEBUG`.***

# javascript - 如何在 AngularJS 中正确使用指令

> ID：14627297
> 
> 赞同：3
> 
> 时间：2013-01-31T13:48:24.387
> 
> 标签：javascript, angularjs

我正在使用 AngularJS 上的指令执行我的第一步，但该指令对我不起作用。

我有一个`ng-repeat`清单

```
<ul ng-after-list-filter>
    <li ng-repeat="item in items | filter:activeFilter.filterType = activeFilter.filterValue">...</li>
</ul> 
```

正在被过滤`$scope.activeFilter.filterValue`

我正在尝试创建`ng-after-list-filter`指令，以便在过滤列表后执行它，以便我可以对那个新`ul`元素进行 dom 操作。

这是我的指令不起作用：

```
myModule.directive('ngAfterListFilter',function(){
    return {
        restrict: 'A',
        link: function(scope,element,attrs) {
            scope.$watch(scope.activeFilter.filterValue, function(val) {
                console.log('do something here');
            });
        }
    }
}); 
```

1.  **我如何使它工作？**我假设 scope.activeFilter.filterValue 没有被更新，但是 - 它在范围内，并且它确实被更新并且列表被过滤。我正在尝试观察这个变量，为什么它不起作用？

2.  **有没有更好的方法来创建这个指令？**我的意思是 - 我想在列表更新时运行 DOM 更改（调整事物的大小）。那么有没有办法听`$('ul').html()`呢？我试过了，但它输出了一个错误，我将原始文本放入 javascript

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T23:36:04.790

$last 可用于确定创建最后一个 <li> 的时间。请参阅[this fiddle](http://jsfiddle.net/roychoo/XVzUW/3/)（我没有写它）以了解您可以附加到 <li> 元素的 checkLast 指令的实现：

```
directive('checkLast', function () {
  return function (scope, element, attrs) {
     if (scope.$last === true) {
        element.ready(function () {
           // manipulate ul here, or if that doesn't work
           // try with $timeout:
           // $timeout(function() { 
           //    do manip here
           //}, 0, false);  // remove false if you need $apply to run 
```

也可以看看[https://stackoverflow.com/a/13906907/215945](https://stackoverflow.com/a/13906907/215945)

我不确定 element.ready() 是否必要，或者它是否适用于动态生成的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:57:52.053

您似乎想重用过滤器中的过滤值？正确的？

如果是这种情况，您真正需要做的就是：

```
<!-- initial filter -->
<ul ng-after-list-filter>
    <li ng-repeat="item in filteredData =  (items | filter:activeFilter.filterType)">{{item}}</li>
</ul>

<!-- reuse what you filtered -->
<div ng-repeat="item in filteredData">{{item}}</div> 
```

我希望我能因此而受到赞扬，但这是我在 StackOverflow 上的另一个问题中看到的一个技巧，我现在找不到。

然后要知道何时更新，您可以`filteredData`在范围内 $watch ：

```
myModule.directive('ngAfterListFilter',function(){
    return {
        restrict: 'A',
        link: function(scope,element,attrs) {
            scope.$watch('filteredData', function(val) {
                console.log('do something here');
            });
        }
    }
}); 
```

# php - 通过 php 打印大型 select SQL 语句

> ID：14627298
> 
> 赞同：0
> 
> 时间：2013-01-31T13:48:24.787
> 
> 标签：php, mysql, file-io

我希望这是你可以帮助我的事情。我经过多次试验和错误提出了这个声明，它在我的 phpmyadmin 视图中整齐地列出了所有内容。

```
SELECT DISTINCT inzone_product_lang.name, inzone_product.price, (inzone_product.price * 1.25) as pris
FROM inzone_product_lang 
INNER JOIN inzone_product
ON inzone_product.id_product=inzone_product_lang.id_product
ORDER BY inzone_product_lang.name, pris 
```

我想把它变成一个 php 查询并打印出来——但我被困在这里。

```
$result = mysql_query("SELECT DISTINCT inzone_product_lang.name, inzone_product.price, (inzone_product.price * 1.25) as pris
FROM inzone_product_lang 
INNER JOIN inzone_product
ON inzone_product.id_product=inzone_product_lang.id_product
ORDER BY inzone_product_lang.name, pris
LIMIT 0, 900
");

$data = mysql_fetch_object($result);
    echo $data->foo(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:50:52.890

循环遍历数据，像这样，如果你想要它在一个表中，你可以在一个表行中回显该数据。像这样的东西：

```
while ($data = mysql_fetch_object($result)) {
    echo $data->name;
    echo $data->price;
    ...
} 
```

此外，您可以通过使用类似工具`print_r`（这在日志中特别有用）来查看此类对象的结构，如果您安装了 XDebug，`var_dump`则非常好看。

```
var_dump($data); // Prints to document when loaded
error_log(print_r($data, true)); // Prints to error log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:55:47.350

```
echo $query="SELECT DISTINCT inzone_product_lang.name, inzone_product.price, inzone_product.price * 1.25) as pris FROM inzone_product_lang INNER JOIN inzone_product ON inzone_product.id_product=inzone_product_lang.id_product ORDER BY inzone_product_lang.name, pris LIMIT 0, 900";

$result = mysql_query($query);

while($data = mysql_fetch_object($result))
{
    print_r($data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:01:26.803

您可以使用带有换行符的连接字符串，如下所示：

```
$query = "SELECT DISTINCT inzone_product_lang.name, inzone_product.price, (inzone_product.price * 1.25) as pris\n" .
"FROM inzone_product_lang \n" .
"INNER JOIN inzone_product\n" .
"ON inzone_product.id_product=inzone_product_lang.id_product\n" .
"ORDER BY inzone_product_lang.name, pris\n";

mysql_query($query); 
```

"\n" 是一个空格。始终在双引号字符串中使用它。如果您想将查询打印到浏览器，有一个不错的 PHP 函数，名为“ [nl2br](http://php.net/manual/en/function.nl2br.php) ”

# java - JAVA：从二维数组制作对象

> ID：14627305
> 
> 赞同：1
> 
> 时间：2013-01-31T13:48:35.983
> 
> 标签：java, arrays

我正在制作这款名为 Rush Hour 的游戏（你移动红色汽车的地方）。

到目前为止，我制作了一个从文本文件中读取级别的二维数组。现在接下来我想将文本文件中的值转换为对象，以便我可以开始使用坐标来移动它们。

下面稍微解释一下我的代码：首先，我正在制作一个 6x6 的 2D 数组，用户可以选择难度级别，根据他们所做的选择，它将加载 4 个级别之一（初级、中级、高级或专家）。

选择关卡后，它将加载二维数组中的关卡（我将在代码下方提供一个关卡，以便您有一个想法）。加载关卡时，它会为所有内容添加“0”（在我看来，它看起来对用户更友好）并用 | 分隔值。符号。

所以现在我想我需要从我刚刚在二维数组中读取的值中创建对象以便移动它们（如果我错了，请纠正我），我需要检查数字周围的值是否匹配或不匹配如果它们匹配，我需要将它们结合起来。

我该如何处理？提前致谢

到目前为止我的代码：

```
public class Bord {
private static String[][] bordArray = new String[6][6];

public static void kiesLevel() {
    System.out.println("\nKies moeilijkheidsgraad\n1) Beginner\n2) Intermediate\n3) Advanced\n4) Expert");
    Scanner keyboardScanner = new Scanner(System.in);
    int keuze = keyboardScanner.nextInt();
    switch (keuze) {
        case 1:
            beginner();
            break;
        case 2:
            intermediate();
            break;
        case 3:
            advanced();
            break;
        case 4:
            expert();
            break;
        default:
            throw new NumberFormatException("Geef een geldige invoer");
    }
}

public static void beginner() {
    leesBordIn("c:/users/Glenn/desktop/beginner.txt");

}

public static void intermediate() {
    leesBordIn("d:/intermediate.txt");

}

public static void advanced() {
    leesBordIn("d:/advanced.txt");

}

public static void expert() {
    leesBordIn("d:/expert.txt");

}

private static void leesBordIn(String filename) {
    try {
        BufferedReader br = new BufferedReader(new FileReader(filename));
        String line = null;
        int r = 0;
        while ((line = br.readLine()) != null) {
            for (int c = 0; c < bordArray[r].length; c++) {
                if (line.toCharArray()[c] == '0') {
                    bordArray[r][c] = "  ";
                } else {
                    String characterstring = Character.toString(line.toCharArray()[c]);
                    if (characterstring.length() != 2) {
                        characterstring = "0" + characterstring;
                    }
                    bordArray[r][c] = characterstring;
                }
                System.out.print("|" + bordArray[r][c]);
            }
            if (r == 2) {
                System.out.println("=");
            } else {
                System.out.println("|");
            }
            r++;
        }

    } catch (FileNotFoundException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    } catch (IOException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
} 
```

}

级别示例：

```
220007
300807
311807
300800
400066
405550 
```

输出示例：

```
|02|02|  |  |  |07|
|03|  |  |08|  |07|
|03|01|01|08|  |07=
|03|  |  |08|  |  |
|04|  |  |  |06|06|
|04|  |05|05|05|  | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:16:10.313

在您创建了bordArray 对象后，我不明白您想做什么，但是我看到您可以根据需要以更好的方式编写 leesBordin 方法（尽量不要将所有方法都编写为静态方法）：

```
private void leesBordIn(String filename)
{
    try
    {
        File file = new File(filename);
        Scanner scanner = new Scanner(file);
        int r = 0;
        while (scanner.hasNextLine())
        {
            String line = scanner.nextLine();
            String[] fields = line.split("");
            for (int c = 0; c < bordArray[r].length; c++)
            {
                if (fields[c+1].equals("0"))
                {
                    bordArray[r][c] = "  ";
                } 
                else 
                {
                    bordArray[r][c] = ("0" + fields[c+1]);
                }
                System.out.print("|" + bordArray[r][c]);
            }
            if (r == 2) 
            {
               System.out.println("=");
            } 
            else
            {
                System.out.println("|");
            }
            r++;
        }
    catch (FileNotFoundException e) 
    {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
} 
```

一个问题，你为什么在第三行放一个“=”？

然后，如果您更好地向我解释您想做什么，我将尝试为此编写一些代码..

# mongodb - MongoDB 写回异常

> ID：14627306
> 
> 赞同：2
> 
> 时间：2013-01-31T13:48:37.763
> 
> 标签：mongodb

我们在生产中的 mongodb 集群是一个分片集群，有 3 个副本集，每个副本集有 3 个服务器，当然还有另外 3 个配置服务器。

我们还有 14 个直接连接到 mongoDb 的网络服务器抛出运行在每个网络服务器（客户端）中的 mongos 进程。

整个集群每分钟接收 5000 次插入。

有时，当我们的 java 应用程序想要对 mongoDb 执行操作时，我们会开始从我们的应用程序中获取异常。

这是堆栈跟踪：

```
caused by com.mongodb.MongoException: writeback
com.mongodb.CommandResult.getException(CommandResult.java:100)
com.mongodb.CommandResult.throwOnError(CommandResult.java:134)
com.mongodb.DBTCPConnector._checkWriteError(DBTCPConnector.java:142)
com.mongodb.DBTCPConnector.say(DBTCPConnector.java:183)
com.mongodb.DBTCPConnector.say(DBTCPConnector.java:155)
com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:270)
com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:226)
com.mongodb.DBCollection.insert(DBCollection.java:147)
com.mongodb.DBCollection.insert(DBCollection.java:90)
com.mongodb.DBCollection$insert$0.call(Unknown Source) 
```

如果我检查 mongos 进程抛出它提供的 rest _status 命令，它会返回 200OK。我们可以解决重新启动我们正在使用的 tomcat 并重新启动 mongos 进程的问题，但我想找到这个问题的最终解决方案。不得不在半夜重新启动所有东西并不是一个令人愉快的解决方案。

When this error happens, maybe 2 or 3 another webservers got the same error at the same time, so I imagine that there is a problem in the entire mongoDb cluster, no a problem in a single isolated webserver.

Does anyone know why mongo returns a writeback error? and how to fix it?

I'm using mongoDb 2.2.0.

Thanks in advance.

Fer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:00:04.550

我相信您会看到写回错误“泄漏”到 getLastError 输出中，然后即使有问题的操作没有出错，也会继续报告。这是 MongoDB 2.2 早期版本中的一个问题，此后已得到修复，请参阅：

[https://jira.mongodb.org/browse/SERVER-7958](https://jira.mongodb.org/browse/SERVER-7958) [https://jira.mongodb.org/browse/SERVER-7369](https://jira.mongodb.org/browse/SERVER-7369) [https://jira.mongodb.org/browse/SERVER-4532](https://jira.mongodb.org/browse/SERVER-4532)

在撰写此答案时，我会推荐 2.2.4，但基本上无论最新的 2.2 分支是什么，都可以解决您的问题。

# windows-phone-7 - Windows Phone App only for Windows Phone 7?

> ID：14627307
> 
> 赞同：1
> 
> 时间：2013-01-31T13:48:39.123
> 
> 标签：windows-phone-7, windows-phone-8, marketplace

Is it possible to make a Windows Phone App target **only** the Windows Phone 7 platform?

I already have the Windows Phone 8 version of the app out, and changed a few things to release for Windows Phone 7 (like resolutions and limitations etc) but when I'm adding it to the marketplace it always has "Supported OS: Windows Phone 7 & 8" and doesn't allow me to change it.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:35:55.817

我认为这是不可能的，如果您上传 7.5 应用程序，它可以在 WP7 和 WP8 设备上运行。如果您的应用程序也有 WP8 版本，则使用 WP8 设备的用户只能获得 8 应用程序，而不是 7.5 应用程序。此外，如果 WP8 设备上的用户首先下载了您的应用程序的 WP7.5 版本，然后您上传了 WP8 版本，则 WP8 设备将在商店准备就绪时更新为 WP8 版本！

# c# - 如何通过 HTTP 从 .NET 4.5 下载字符串？

> ID：14627311
> 
> 赞同：10
> 
> 时间：2013-01-31T13:49:00.583
> 
> 标签：c#, .net, .net-4.5

我有一个非常简单的需求——我的 C# 代码需要通过 HTTP 连接到远程服务器并下载一个字符串。一个微不足道的 GET 请求，仅此而已。

为了确保我的应用程序保持响应，我还想对操作施加超时（比如 3 秒）。

我的第一个想法是使用[`System.Net.WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)，但这不支持任何超时。

然后我想试试旧的[`System.Net.HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)，但是可惜 - 因为 .NET 4.5 它[已被标记为过时](http://msdn.microsoft.com/en-us/library/cc190216.aspx)！

那么，我可以使用什么？我检查了[`System.Net.Http`](http://msdn.microsoft.com/en-us/library/system.net.http.aspx)命名空间，但它只允许异步使用，强制使用[`Task`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)s，并且通常只添加十几个不同的抽象层而没有真正添加任何新功能（因为它在[`System.Net.HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)下面使用相同的旧功能）

我不想要异步的东西，我不想涉及其他线程，我不想涉及 Tasks 框架，我不想要大量的包装器。

在 .NET 4.5 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T13:59:14.487

`HttpWebRequest`类没有被弃用，只有它的构造函数被弃用。

引用[文档](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)：

> 不要使用[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.httpwebrequest.aspx)构造函数。使用该[`WebRequest.Create`](http://msdn.microsoft.com/en-us/library/system.net.webrequest.create.aspx)方法初始化新`HttpWebRequest`对象。如果统一资源标识符 (URI) 的方案是`http://`或`https://`，则`Create`返回一个`HttpWebRequest`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:00:02.320

只有构造函数被弃用，而不是 HttpWebRequest 类本身。使用[WebRequest.Create](http://msdn.microsoft.com/en-us/library/system.net.webrequest.create.aspx)创建 HttpWebRequest 的实例。

# git - 如何在 Git 中识别重命名的文件？

> ID：14627312
> 
> 赞同：2
> 
> 时间：2013-01-31T13:49:09.763
> 
> 标签：git

我喜欢使用`git log -p`. 这很好用，但在重命名文件的情况下会失败。在这种情况下，它会将一个文件完全显示为已删除的红色，而将“其他”文件显示为完全绿色的新文件。因此，在重命名的文件中不容易看到任何更改。

有没有办法让类似的东西`git log -p`识别重命名的文件并显示文件的差异？

我知道`git log --follow`，但这仅适用于单个文件，因此对审查整个提交没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:17:07.787

`git log -M -p`会成功的。

# java - @Deprecated 对方法参数和局部变量意味着什么？

> ID：14627313
> 
> 赞同：10
> 
> 时间：2013-01-31T13:49:11.277
> 
> 标签：java, deprecated

免责声明：我知道`@Deprecated`.

`@Deprecated`Java 源码中注解的定义是这样的：

```
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(value={CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE})
public @interface Deprecated {
} 
```

我理解目标值为`CONSTRUCTOR`、`FIELD`、`TYPE`和`METHOD`的目的`PACKAGE`。

但是，将方法参数或局部变量标记为 是什么意思`@Deprecated`？

奇怪的是，下面的示例编译时没有任何警告。

```
interface Doable {
    void doIt(@Deprecated Object input);
}

class Action implements Doable {

    @Override
    public void doIt(@Deprecated Object input) {

        String string = String.valueOf(input); // no warning!

        @Deprecated
        String localVariable = "hello";

        System.out.println("Am I using a deprecated variable?" + localVariable); // no warning!
    }
} 
```

这是他们可能打算在未来实施的事情吗？

* * *

FWIW，我在 Ubuntu 12.04 64 位上使用 JDK 1.7.0_11。无论我是从 Eclipse 还是命令行运行程序，结果都是一样的。

*编译器确实会针对 的正常*使用发出警告`@Deprecated`，例如使用`java.util.Date`类的已弃用构造函数之一。只是为了证明我没有错误的终端或设置，这里是输出：

```
$ javac com/adarshr/Test.java -Xlint:deprecation
com/adarshr/Test.java:12: warning: [deprecation] Date(int,int,int) in Date has been deprecated
        new Date(2013, 1, 31);
        ^
1 warning
$ 
$ javac -version
javac 1.7.0_11 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T13:52:04.327

> 将方法参数或局部变量标记为 是什么意思`@Deprecated`？

它[与应用于任何其他元素时具有相同的含义：](http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html)

> 带注释的程序元素`@Deprecated`是不鼓励程序员使用的程序元素，通常是因为它很危险，或者因为存在更好的替代方案。当在非弃用代码中使用或覆盖弃用的程序元素时，编译器会发出警告。

* * *

为什么编译器不忽略 Java 7 中不推荐使用的参数和字段的警告？
[因为这正是 JLS（第 9.6.3.6 节）所规定的。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.6.3.6)

> 当一个类型、方法、字段或构造函数的声明被注解时，Java 编译器必须产生一个弃用警告`@Deprecated`（即被名称覆盖、调用或引用），除非：
> 
> *   使用在一个实体内，该实体本身使用注释 @Deprecated 进行注释；或者
>     
>     
> *   使用在带有注释的实体内，以抑制带有注释的警告`@SuppressWarnings("deprecation")`；或者
>     
>     
> *   使用和声明都在同一个最外层的类中。
>     
>     
> 
> **在局部变量声明或参数声明上使用`@Deprecated`注释无效。**

（重点补充）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:33:04.410

JLS 明确声明 @Deprecation 注释在局部变量上被忽略。请参阅马特·鲍尔的回答。

> 这是他们可能打算在未来实施的事情吗？

我非常怀疑。

*   这可能意味着什么......除了它作为非正式提醒实现者（可能还有样式检查器/PMD/FindBugs/等）需要删除局部变量的当前含义之外。

*   任何*重大*更改都可能会破坏当前使用上述注释的人的源兼容性。Java 维护人员非常努力地避免破坏旧代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T07:01:45.803

如果您编译这样的代码（例如：mvn clean compile），您会收到以下警告消息

`@Deprecated annotation has no effect on this variable declaration`

意味着它没用:)

# jquery - Jquery验证插件如何将错误类添加到标签

> ID：14627317
> 
> 赞同：8
> 
> 时间：2013-01-31T13:49:22.463
> 
> 标签：jquery, jquery-validate

使用 jquery validate 插件，我试图覆盖它的默认行为。这是我的 html 的一个例子：

```
<table>
<tr>
  <td>
    <label for="my-input>Name</label>
  </td>
</tr>
<tr>
  <td>
    <input type="text" class="required" id="my-input />
  </td>
</tr>
</table> 
```

我希望 valadate 做的就是将类 .error 添加到现有标签，然后在字段通过验证后将其删除。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T13:55:17.373

这是默认行为，您只需要停止页面上显示的错误消息。您可以通过覆盖 errorPlacement 来做到这一点

```
$('form').validate({
 errorPlacement: function () { }
}); 
```

**编辑。**

抱歉误读了问题位-下面的代码有效，但可能有更好的方法

```
$('form').validate({
    // make sure error message isn't displayed
    errorPlacement: function () { },
    // set the errorClass as a random string to prevent label disappearing when valid
    errorClass : "bob",
    // use highlight and unhighlight
    highlight: function (element, errorClass, validClass) {
        $(element.form).find("label[for=" + element.id + "]")
        .addClass("error");
    },
    unhighlight: function (element, errorClass, validClass) {
        $(element.form).find("label[for=" + element.id + "]")
        .removeClass("error");
    }
}); 
```

上面的代码来自[options docs上的高亮示例](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:58:22.930

```
errorElement: "label",
errorPlacement: function(error, element) {
    error.insertBefore(element.parent().children("br"));
},
highlight: function(element) {
    $(element).parent().addClass("error");
},
unhighlight: function(element) {
    $(element).parent().removeClass("error");
} 
```

# scope - 从摘要循环中删除和恢复范围

> ID：14627323
> 
> 赞同：12
> 
> 时间：2013-01-31T13:50:02.070
> 
> 标签：scope, angularjs

有没有办法从摘要循环中删除范围？换句话说，暂停/恢复范围摘要循环？

就我而言，我已经加载了所有页面，但并非所有页面都可见。所以我想暂停那些不可见的，以避免无用的处理。我不想使用`ng-view + $route`，我不想/不需要深度链接。

我看到了[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/angular/Am_mv4aay84)并到达了[这个小提琴](http://jsfiddle.net/m8SZZ/)。它可能会起作用，但它非常具有侵入性，而且对框架更新不太友好。

有没有其他解决方案，比如 a`$scope.suspend()`和`scope.resume()`？还是侵入性较小的（从框架的角度来看）？我目前正在考虑`$destroy`和`$compile`循环。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-26T11:43:38.017

我遇到了同样的问题，我找到了一个有趣的解决方案，它不会（太多）干扰 AngularJS。将此添加到您要禁用的范围：

```
var watchers;

scope.$on('suspend', function () {
  watchers = scope.$$watchers;
  scope.$$watchers = [];
});

scope.$on('resume', function () {
  scope.$$watchers = watchers;
  watchers = null;
}); 
```

然后，您可以使用：禁用范围及其子级，`scope.$broadcast('suspend')`并使用`scope.$broadcast('resume')`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T18:15:37.820

就今天的框架而言，没有方法可以在范围上暂停/恢复摘要。话虽如此，有几种技术可以用来限制作为摘要周期的一部分执行的手表数量。

首先，如果屏幕的某些部分无论如何都隐藏了，您可以使用[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)系列指令，从而完全从 DOM 中删除不可见的部分。

其次，如果从您的指令通过触发摘要循环，`$apply`并且您希望将手表重新评估限制在子范围内，您可以调用`$digest`而不是`$apply`.

然后，是的，可以按照您链接到的讨论中的描述销毁并重新创建范围。但是，如果您已经隐藏了 DOM 的一部分，这听起来`ng-switch`可能是一个更好的选择。

# css - 固定宽度的页面布局，但可随内容调整

> ID：14627324
> 
> 赞同：0
> 
> 时间：2013-01-31T13:50:05.977
> 
> 标签：css, html

我想升级我的网站模板。我希望内容位于固定宽度的居中 div 中。这不是问题，网上有很多例子。由于我已经对文本和表格感到满意，因此我想确保 div 不会剪切某些页面的内容。我不想使用 Javascript 来调整宽度。有没有办法用 div 来做到这一点，或者我应该使用 table 来代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:53:21.350

没有让你的问题正确，也像垂直一样居中？如果你想要它垂直居中而不是你需要使用`position: absolute;`，如果你想要它水平居中你只需要使用`margin: auto;`，就这么简单......

```
/* Totally center fixed width content */

.center {
   position: absolute;
   top: 50%;
   left: 50%;
   margin-top: /* Half of the total height of the container div */
   margin-left: /* Half of the total width of the container div */
} 
```

如果您需要内容水平居中，则需要使用

```
.horizontal {
   margin: auto;
} 
```

除非您同时使用`fixed width div`and ，否则内容不会被裁剪`overflow: hidden;`

# sql - 如何组合 Y 或 N 或空值

> ID：14627327
> 
> 赞同：2
> 
> 时间：2013-01-31T13:50:07.460
> 
> 标签：sql, oracle

**仍未找到更新 2 中描述的解决方案**

谢谢帮助

我试着用我糟糕的英语解释我的问题。希望有人能解决我的问题。

我得到了下表

```
A      B
1      Y
2      null
3      Y 
```

我想要什么结果？根据A列中的排名，我想合并B列。

该示例中的结果是......没有结果原因是因为排名 2 中有一个空值，而下一个和最后一个排名 (=3) 有一个值 (=Y)。

下一个例子

```
A      B
1      Y
2      null
3      null 
```

我想要的结果是

```
A   B
1   Y 
```

因为之后的方式是免费的......意味着2和最后3有空

另一个例子

```
A    B
1    null
2    N
3    null 
```

在这种情况下，我想要再次没有结果。因为 first =1 有空值。

我现在尝试得出结论...如果 B 列的 n（例如 2）具有值 Y 或 N，则元素 bevor（在此 1 中）必须具有值 Y 或 N。

非常感谢您。我尝试了不同的技术但没有成功...

**更新 1** 谢谢你的快速评论

一些具有预期结果的示例日期

```
example 1
A   B
1   Y
2   N
3   null
4   null

expected result
A    B
2    N

example 2
A   B
1   N
2   Y
3   N
4   null

expected result
A   B
3   N

example 3
A   B
1   null
2   Y
3   Y
4   null

expected result
no result

example 4
A   B
1   Y
2   Y
3   null
4   Y

expected result
no result 
```

**更新 2**

忘记基本情况

```
A   B
1   Y
2   N
3   Y 
```

预期结果

```
A   B
3   N 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:26:40.690

建立 A 的最大值，其中 B 为 Y 或 N，以及 A 的最小值，其中 B 为空。如果第一个值低于第二个值，则您有一个有效的结果集。

```
select yt.A 
       , yt.B
from 
    ( select max(case when B is not null then A else null end) as max_b_yn
             , min(case when B is null then A else null end) as min_b_null
      from your_table ) t1 
   , your_table yt
where ( t1.min_b_null is null 
        or t1.max_b_yn < t1.min_b_null )
and yt.A = t1.max_b_yn 
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:14:52.473

我认为你想要第一个 NULL 之前的最后一行。如果这是正确的，那么以下得到你想要的：

```
 select t.*
 from t join
      (select min(A) as NullA from t where B is NULL) t2
      on t.A = t2.NullA - 1 
```

啊，我明白了。要获得带有“N”的最后一行：

```
 select t.*
 from t
 where t.A in (select max(A) as MaxA
               from t join
                    (select min(A) as NullA from t where B is NULL) t2
                    on t.A < t2.NullA
                where t.B = 'N'
               ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:18:05.210

好的，我想我有你需要的东西。只要在它之前没有带有 NULL 的行，它就会抓取 B 列中具有值的最后一行。

```
select MAX(A), B
from table_a
where B IS NOT NULL
and table_a.A > (
          select MIN(A)
          FROM table_a
          WHERE B IS NULL
         )
Group by B 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-31T14:19:56.613

```
select top 1 A, B
from #Temp
where B is not null
order by A desc 
```

或者

```
select top 1 A, B
from #Temp
where B = 'N'
order by A desc 
```

# javascript - 使用 .add() 选择多个 jQuery 对象

> ID：14627330
> 
> 赞同：28
> 
> 时间：2013-01-31T13:50:14.860
> 
> 标签：javascript, jquery

该[`.add()`](http://api.jquery.com/add/)方法是否允许一次选择多个对象而不是一次添加一个？

```
one.add(two).add(three).add(four).on("click", function() { }); 
```

以下变量以它们的方式设置，因为每个变量都有不同的功能。

```
var one   = $("#1");
var two   = $("#2");
var three = $("#3");
var four  = $("#4"); 
```

但是，如果我想添加一个适用于所有这些元素的额外功能怎么办？我必须一一添加吗？

我知道您可以使用 选择它们`$("#1,#2,#3,#4")`，但我只想利用上述变量。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-31T13:55:39.853

我更喜欢这种数组方法，纯粹是为了可读性......

```
$([one, two, three, four]).each(function() {
    // your function here
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-31T14:09:56.053

您不能一次添加多个对象，例如：

```
var groupThree = one.add(three, five); // will not work as expected 
```

您可以缓存添加的对象，以便您只需添加一次 - [http://jsfiddle.net/X5432/](http://jsfiddle.net/X5432/)

```
var one   = $("#1");
var two   = $("#2");
var three = $("#3");
var four  = $("#4");
var five  = $("#5");

var groupOne = one.add(two).add(three).add(four);
var groupTwo = groupOne.add(five);

$('#first').click(function(e){
    e.preventDefault();
    groupOne.css({'background': '#00FF00'});
});

$('#second').click(function(e){
    e.preventDefault();
    groupTwo.css({'background': '#FF0000'});
}); 
```

但是我更喜欢数组方法，这只是一种不同的思考方式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T13:56:09.760

您可以将它们放入这样的数组中

```
var k = [one,two,three,four]

$.each(k,function(){
  $(this).click(function(){
     //Function here
   });
}); 
```

# python - Appengine 上的异步 URL 获取和 Memcache

> ID：14627334
> 
> 赞同：1
> 
> 时间：2013-01-31T13:50:34.363
> 
> 标签：python, google-app-engine

是否可以在 appengine 上进行异步 url 获取并将 rpc 对象存储在内存缓存中？

我尝试做的是在任务中启动异步 url 提取，但我不希望任务等到提取完成。

因此，我认为我只是将它写入 memcache 并稍后从创建了 fetch 的任务外部访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:17:27.267

不，异步 Url Fetch 无法在完成时将数据自动存储到内存缓存中。您必须在代码中执行此操作，但这会破坏您尝试执行的操作。

还要记住，memcache 是易失的，它的内容可以随时清除。

# sql - sql用列名替换单元格值并避免空值

> ID：14627335
> 
> 赞同：2
> 
> 时间：2013-01-31T13:50:34.470
> 
> 标签：sql, ms-access, ms-access-2010

嗨，我有两个表代理、技能和目标查询，如下所示

代理

```
-------------------------------------
PF       |Name       |HireDate       |
---------|-----------|---------------|
54       |Jack       |01-Jan-2012    |
55       |Aline      |01-Jan-2012    |
------------------------------------- 
```

技能

```
-------------------------------------------------------------
PF       |Writing    |Swimming       |KickOff    |Shopping   |
---------|-----------|---------------|-----------------------
54       |Null       |01-Dec-2012    |Null       |Null       |
55       |01-Mar-2012|01-FeB-2012    |Null       |15-Nov-2012|
------------------------------------------------------------- 
```

我想查询选择 PF，从 Agents 表中 Hiredate 和从 Skills 表中的可用技能， Skills 表上的日期意味着代理人在这个数据上学习了这个技能，但是如果有空值意味着代理人没有这个技能，但是我想用列名替换日期下表说明我的查询是什么

我的查询

```
------------------------------------------------------
PF       |HireDate       |Avalivble skills            |
---------|---------------|----------------------------|
54       |01-Jan-2012    |Swimming                    |
55       |01-Jan-2012    |Writing, Swimming, Shopping |
------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:54:33.420

```
select  PF
,       HireDate
,       replace(
            iif(Writing is null;'';'Writing, ') +
            iif(Swimming is null;'';'Swimming, ') +
            iif(KickOff is null;'';'KickOff, ') +
            iif(Shopping is null;'';'Shopping, ') + '$';
            ', $'; '')
from    Agents a
join    Skills s
on      s.PF = a.PF 
```

# java - 什么都不会输出

> ID：14627336
> 
> 赞同：0
> 
> 时间：2013-01-31T13:50:35.687
> 
> 标签：java, arrays, printing, for-loop, output

无论我将输出语句放在哪里，无论是数组的 1 个位置、所有数组，还是计数变量。我无法将任何内容打印到控制台。我已经尝试在主要和功能中打印。有任何想法吗？

**Edit1：我发现我可以在 jswing 窗口内打印，但控制台仍然没有运气，这使得错误检查变得困难。**

**鉴于我仍然可以在窗口中正确输出，并且人们声称 eclipse 会将其打印出来，我认为我的古代文本编辑器的控制台是无能的，我感谢帮助** '

```
//=========================//
//colby moniz project 9-1  //
//Number sorter            //
//=========================//

//===========================================//
//This program takes 10 integers and sorts   //
//them into even, odd, and negative.         //
//===========================================//

//=============//
//Import Files //
//=============//
import javax.swing.*;       // DRAW DIALOG BOX CLASS
import java.awt.*;          // IMPORT AWT TO CHANGE FONT AND COLORS

public class p91 {

    public static void main(String[] args) {

        //=================================//
        //varbiles section                 //
        //=================================//
        sorter sort = new sorter();   //Creatests an instances of sorter, inside main.
        int[] test = new int[10];
        int inputNum;

        //================================//
        //Introduction windows            //
        //================================//    
        info( "This program will sort 10 intergers, \n into the catagories minimum, maximum and negitive",
        "Introduction" );
        //===========================//
        //fill up array              //
        //===========================//
        for(int count = 0; count < 10; count++)
        {
            inputNum = input("please input number " + (count + 1), "Input");
            test[count] = inputNum;
        }   

        for(int count = 0; count < 10; count++)
        {
          System.out.print(test[count]);    
        }

    }

//====================================================//
//Functions                                           //
//====================================================//    

        public static void info(String a, String b)
    {
           //================================//
           //Introduction window             //
           //================================//
            int close = JOptionPane.showConfirmDialog(null,
                                a, b,                                      
                                JOptionPane.DEFAULT_OPTION, 
                                JOptionPane.INFORMATION_MESSAGE); 

            checkCloseInt(close); 
    }

        public static void checkCloseInt(int close)
    {
            //=====================================
            //checks to see if user closed program 
            //=====================================                 
            if ((close == JOptionPane.CLOSED_OPTION) || 
                (close == JOptionPane.NO_OPTION)  ||
                 (close == JOptionPane.CANCEL_OPTION))          
                 System.exit(0);       
    }

        public static int input(String a, String b)
    {
           //================================//
           //input                           //
           //================================//
            boolean parsable;
            int inputParse = 999;
            String input;

           do
           {           
                     input = JOptionPane.showInputDialog(null,
                                        a, b,                                      
                                       JOptionPane.QUESTION_MESSAGE); 

                    //======================//
                    //Check if close        //
                    //======================//
                        if(input == null)
                        {
                            System.exit(0);
                        }

                    parsable = error(input);

           }
           while(parsable == false);

        inputParse = Integer.parseInt(input);  
                    System.out.print(inputParse); 
        return inputParse; 
    }

    public static boolean error(String input)
    {
         //======================
         //Check if parsable
         //=======================
         boolean parsable = true;
          try
          { 
            int inputParse = Integer.parseInt(input);
          }
          catch(NumberFormatException e)
          {
           parsable = false;
          } 

          if(parsable == false)
          {
                    errorWindow("Please input a number");
          } 

          return parsable; 

    }

        public static void errorWindow(String a)
    {
           //================================//
           //Introduction window             //
           //================================//
            int close = JOptionPane.showConfirmDialog(null,
                                a, "Error",                                    
                                JOptionPane.DEFAULT_OPTION, 
                                JOptionPane.ERROR_MESSAGE); 

            checkCloseInt(close); 
    }

} 
```

'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:52:12.967

使用`System.out.println();`这个对我有用。

# git - 撤消我的工作目录保留我的提交

> ID：14627340
> 
> 赞同：0
> 
> 时间：2013-01-31T13:50:48.607
> 
> 标签：git, commit, git-reset

这可能是一个非常简单的问题。我提交了我的工作，然后我启动了一个查找和替换脚本，但我想撤消它，以便让我的工作进入实际提交。什么是正确的命令：我知道 git reset soft/hard 或 git amend 但它不合适

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:54:22.880

你有几个选择：

由于评论状态`git reset --hard`将带回一切。

但是，如果您想保留一些修改过的文件，请执行以下操作：

```
git checkout -- <filename> 
```

将撤消单个文件。

# java - 如何从不同类的主要方法调用小程序？

> ID：14627341
> 
> 赞同：0
> 
> 时间：2013-01-31T13:50:51.907
> 
> 标签：java, user-interface, applet

我们可以从 main 方法调用小程序吗？如果是这样，请建议我。

# c++ - 在 RHEL 5.7 上链接 libstdc++ 问题

> ID：14627343
> 
> 赞同：0
> 
> 时间：2013-01-31T13:50:55.017
> 
> 标签：c++, linker, g++, libstdc++

我想使用以下命令创建一个静态链接的二进制文件：

```
g++ -o bin/target_binary objs/obj1.o objs/obj2.o objs/obj3.o -I/usr/include/c++/4.1.1/ -O3 -Wall -static -static-libstdc++ -static-libgcc -L /usr/lib/gcc/x86_64-redhat-linux/4.1.1/32 -Wl,-verbose 
```

输出的相关部分：

```
attempt to open /usr/lib/gcc/x86_64-redhat-linux/4.1.1/32/libstdc++.a succeeded
attempt to open /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libstdc++.a failed
attempt to open /usr/lib/gcc/x86_64-redhat-linux/4.1.2/libstdc++.a failed
attempt to open /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../lib64/libstdc++.a failed
attempt to open /lib/../lib64/libstdc++.a failed
attempt to open /usr/lib/../lib64/libstdc++.a failed
attempt to open /usr/x86_64-redhat-linux/lib64/libstdc++.a failed
attempt to open /usr/local/lib64/libstdc++.a failed
attempt to open /lib64/libstdc++.a failed
attempt to open /usr/lib64/libstdc++.a failed
attempt to open /usr/x86_64-redhat-linux/lib/libstdc++.a failed
attempt to open /usr/lib64/libstdc++.a failed
attempt to open /usr/local/lib/libstdc++.a failed
attempt to open /lib/libstdc++.a failed
attempt to open /usr/lib/libstdc++.a failed
/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-redhat-linux/4.1.1/32/libstdc++.a when searching for -lstdc++
/usr/bin/ld: cannot find -lstdc++
collect2: ld returned 1 exit status 
```

g++ -v

```
Using built-in specs.
Target: x86_64-redhat-linux
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --disable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --with-cpu=generic --host=x86_64-redhat-linux
Thread model: posix
gcc version 4.1.2 20080704 (Red Hat 4.1.2-51) 
```

unname -a

```
Linux vmh-caipi-reporting.lsy.fra.dlh.de 2.6.18-274.18.1.el5 #1 SMP Fri Jan 20 15:11:18 EST 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

lsb_release -a

```
LSB Version:    :core-4.0-amd64:core-4.0-ia32:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-ia32:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-ia32:printing-4.0-noarch
Distributor ID: RedHatEnterpriseServer
Description:    Red Hat Enterprise Linux Server release 5.7 (Tikanga)
Release:    5.7
Codename:   Tikanga 
```

怎么了？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:04:40.930

> /usr/bin/ld: 找不到 -lstdc++

问题似乎是你有 32-bit `libstdc++.a`，但不是 64-bit 。

找出 32 位版本的来源：`rpm -qf /usr/lib/gcc/x86_64-redhat-linux/4.1.1/32/libstdc++.a`，并尝试安装等效的 64 位软件包。

如果没有提供 64 位的现有软件包`libstdc++.a`（这*不太*可能），您可以获取 RPM 的源 RPM `gcc`，然后重新构建它。这应该会给你一个可用的 64 位版本的`libstdc++.a`.

# html - Watir：我如何找到一个元素，该元素的类和它的一个父元素的类可以识别它？

> ID：14627344
> 
> 赞同：4
> 
> 时间：2013-01-31T13:51:03.517
> 
> 标签：html, ruby, watir-webdriver

我有 html 之类的

```
<div class="header"><div class="title">AAAAAAAAA</div></div>
<div class="body">
  <div class="card"><div class="xxx"><div class="yyy"><div class="title">AAAAAAAAA</div></div></div></div>
  <div class="card"><div class="xxx"><div class="yyy"><div class="zzz"><div class="title">BBBBBBBBB</div></div></div></div></div>
</div> 
```

我需要做的是（通过 watir-webdriver）“*让我得到具有 'title' 类和文本 'AAAAAAAAA' 的元素，它是具有类 'card' 的元素的子元素*”。在这个例子中，我想在第三行找到类 'title' 的 div。

仅仅说“*给我带有文本'AAAAAAAAA'和'title'类的元素*”是不够的，因为该元素可能存在于DOM中的其他地方。我必须能够通过它的属性和它的父母来识别它。

我不确定如何做到这一点，并且真的很喜欢一些建议。

在 Watir-webdriver 中，如果我写：

```
b.element(:class => "card").element(:class => "title", :text => "BBBBBBBBB") 
```

然后，据我所见，什么都找不到，因为 element(:class => "card") 将匹配第 3 行的第一个 card 元素，然后匹配 BBB... 文本将失败，因为它只有 AAA ......第一张卡下可用。

我虽然想做类似的事情

```
b.elements(:class => "card").each { |elem| ...etc } 
```

找到我所追求的子元素，但是当我找到子元素时，我不能轻易使用它。例如，我希望能够调用可见？就可以了，但结果很难摆脱那个代码块。我可以有一个分配可见的局部变量吗？结果，或者我可以从块内抛出一个错误，但这并不是我真正想要的。

我真正追求的是：

```
b.elements(:class => "card").element(:class => "title", :text => "BBBBBBBBB").othermethods... 
```

因此，第一个方法调用查找所有具有卡片类的元素，然后在第二个方法中查找具有类“title”和文本“BBBBBBBB”的卡片下的第一个元素。我知道一张卡片下只有一个元素具有“标题”类和文本“BBBBBBBBB”。

但是，此功能不存在。有没有一种简单的方法来实现同样的目标？我真的很感激这里的一些指导。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:23:05.713

如果 Justin 或 Željko 为您想出更好的解决方案，我不会感到惊讶（如果他们这样做了，我自己也想知道它是什么！），但这里有一些东西，虽然丑陋，但应该足够了：

```
target_parent_div = b.divs(class: "card").find { |div| div.div(class: "title", text: "AAAAAAAAA").exists? }
target_element = target_parent_div.div(class: "title", text: "AAAAAAAAA") 
```

...然后`target_element`用于您需要的任何东西。

# jquery-mobile - jQuery移动字段集宽度

> ID：14627345
> 
> 赞同：2
> 
> 时间：2013-01-31T13:51:04.030
> 
> 标签：jquery-mobile, radio-button, width, fieldset, radio-group

我有一个看起来像这样的 jquerymobile 字段集：

```
<fieldset data-role="controlgroup" data-type="horizontal" id="myid"> 
```

我想为字段集设置自定义宽度，但不知道该怎么做。我怎样才能做到这一点？（最好没有外部插件）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:10:27.240

# 解决方案

这是一个如何使用包含选择框的字段集的示例：http: [//jsfiddle.net/Gajotres/xFPFH/](http://jsfiddle.net/Gajotres/xFPFH/)

使用的 CSS 是：

```
.ui-controlgroup-controls {
    width:100% !important;
}

.ui-select {
    width:33% !important;
} 
```

**编辑 ：**

这是单选按钮的示例：http: [//jsfiddle.net/yUZy8/](http://jsfiddle.net/yUZy8/)。当您将单选按钮宽度的数量相乘时，它必须等于或大于**.ui-controlgroup-controls**宽度。

# 更多信息

如果您想自己学习如何进行这种更改，您应该查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**，它将教您如何自己进行。

# php - Accent / PHP / Javascript / Uncaught SyntaxError Unexpected Identifier

> ID：14627348
> 
> 赞同：0
> 
> 时间：2013-01-31T13:51:06.780
> 
> 标签：php, javascript, function, diacritics

我的 PHP/JavaScript 和口音有问题。当我给出一个包含重音的变量时，JavaScript 的控制台会说：Uncaught SyntaxError Unexpected Identifier。

**PHP：**

```
foreach($credit as $k => $v)
{
    $id = $credit[$k]->id_credit;
    $nom = $credit[$k]->nom_credit;
    $prix = $credit[$k]->prix_credit;
    echo "<a onClick='modification(".$id.",".$nom.",".$prix.");'>" . Image::resize('images/credit/' . $credit[$k]->id_credit . "." . $credit[$k]->format_image_credit,100,100) . "</a>";
} 
```

**JavaScript：**

```
function modification(id,nom,prix)
{
    var div = document.getElementById('modifCredit').style.display = 'block';
    alert(id + " " + nom + " " + prix);
} 
```

没有`$nom`，一切正常。如果我更换：

```
 $nom = $credit[$k]->nom_credit; 
```

经过 ：

```
$nom = "example"; 
```

我有 ：

> 未捕获的 ReferenceError：未定义示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:56:13.450

我认为您的 php 代码会导致类似

```
<a onClick='modification(3, example, 25);'> 
```

这使 javascript 解释器认为“示例”是变量的名称。您需要将其括在引号中，以便 javascript 将其解释为字符串。

```
<a onClick='modification(3, "example", 25);'> 
```

我假设 $id 和 $prix 始终是数字，并且数字不应被引用，并且不会作为变量名出现在 javascript 解释器中。

当 $nom 包含重音符号时，您会收到不同的错误消息的原因是带有重音符号的变量名无效，并且解释器在发现变量未定义之前发现了无效标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:56:46.647

我认为问题是 JavaScript 找不到具有“示例”名称的变量，请尝试

$nom = "'例子'";

# sharepoint - 文件签出给“另一个用户”

> ID：14627352
> 
> 赞同：2
> 
> 时间：2013-01-31T13:51:11.033
> 
> 标签：sharepoint, sharepoint-2010

我正在编写一个使用 SharePoint 2010 COM 的客户端应用程序。

用户只需单击链接 (http://[SPserver]/[doclibrary]/[linktoFile]) 即可下载文件。

使用此方法，用户可以对文件执行签出或签入。但是当用户在 Word 中签出文件并且在关闭前没有签入时，在重新下载文件时他无法再次执行签入。

: test.docx 被“另一个用户”锁定编辑

有谁知道解决方法或更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:56:54.147

尝试 SPFile.UndoCheckOut

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.undocheckout.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.undocheckout.aspx)

PowerShell中有一个使用Web服务的例子：

[http://www.c-sharpcorner.com/blogs/7676/undo-the-check-out-of-a-file-from-sharepoint-2010-document-l.aspx](http://www.c-sharpcorner.com/blogs/7676/undo-the-check-out-of-a-file-from-sharepoint-2010-document-l.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-17T19:15:47.530

我使用 Squadron > Explorer > Undo Check out 解决了问题

[http://www.sharepointcto.com/Squadron/Default.aspx](http://www.sharepointcto.com/Squadron/Default.aspx)

# c# - 从数据库中检索数据而不是递归函数的优化解决方案

> ID：14627353
> 
> 赞同：1
> 
> 时间：2013-01-31T13:51:15.747
> 
> 标签：c#, .net, sql, database, vb.net

我编写了递归函数来从数据库中检索这个父/子样式菜单：

```
<ul>
  <li>
  <a href='#'>level1-a</a>
    <ul> 
      <li>
      <a href='#'>level2-a1</a>
    <ul>
          <li><a href='#'>level3-a11</a></li>
    </ul>
      </li>
      <li><a href='#'>level2-a2</a></li>
    </ul>
  </li>
  <li><a href='#'>level1-b</a></li>
  <li><a href='#'>level1-c</a></li>
</ul> 
```

我知道编写这样的函数来使用递归函数从数据库中检索数据并不是一个好主意，有时需要很长时间才能运行。

这是我的算法（提供了**C#**和**VB.net**代码）：

```
my_function (ID){
 WHILE (read_from_table){
   PRINT data
     my_function(child_id)
 }
} 
```

**C#**代码：[http://pastebin.com/hsqhYF72](http://pastebin.com/hsqhYF72)
**VB.net**代码： http: [//pastebin.com/HnyrYnab](http://pastebin.com/HnyrYnab)

是否有任何类型的变量能够存储这种数据结构以在其中搜索而不是不断地连接到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:05:17.040

理想情况下，您希望一次将所有相关记录检索到内存集合中，然后在递归期间从该内存集合中读取。记录的记忆/缓存范式将使这变得简单，并将您的数据访问逻辑与业务逻辑分开。

首先，创建一个`static`用于检索数据的方法，该方法第一次从数据库中获取数据，但在后续调用中使用其内存中的集合。我假设由于您正在传递`fTableName`，因此此方法可能会或可能不会与多个表一起使用，因此缓存能够一次存储多个表（使用`Dictionary`表名上的键），并分别处理对不同表的请求. （警告：未经测试的代码，但应该给你的想法）：

```
private static Dictionary<string, DataTable> _menuCache = null;
public static DataRow[] GetMenuLayer(string fTableName, string fID, string fClause)
{
    if (_menuCache == null) _menuCache = new Dictionary<string, DataTable>();
    if (!_menuCache.ContainsKey(fTableName)) { 
        // retrieve all records from the database the first time
        SQLCommand = "SELECT * FROM " + fTableName;
        ...
        _menuCache[fTableName] = result;
    }

    // query appropriate records from the cache
    var dt = _menuCache[fTableName];
    return dt.Select("MenuParent = " + fID + " AND Visible=1 AND " + fClause);
} 
```

由于这个方法是`static`，它的数据会在整个请求/响应周期中保存，但*不会*在响应之间保存。因此，这会将生成菜单减少为单个数据库调用，而每次加载页面时，数据仍然是新加载的。如果您的菜单数据是相对静态的，您可以使用 .NET 缓存进入下一个级别，该缓存将存储数据库结果，例如每次 30 分钟，然后刷新。然后页面可以加载多次，只需要一个数据库调用。

您从数据库中检索数据的代码`GenerateNestedMenus`将改为`GetMenuLayer`使用适当的参数进行调用。然后，此方法负责以任何可能的方法检索数据（前一种方法不需要关心它是如何到达那里的）。在幕后，第一次`fTableName`请求一个表时，*整个*表被下载到本地内存缓存中。然后在后续调用中根据参数查询那个内存缓存，返回可以迭代的结果行（这里假设你的动态过滤逻辑`fClause`不是太复杂，因为`dt.Select(`只了解了非常小的基本`T-SQL`逻辑子集）：

```
public string GenerateNestedMenus(string fTableName, string fID, string fClause)
{

    DataRow[] dt = GetMenuLayer(fTableName, fID, fClause);

    int i = 0;
    string temp = null;
    for (i = 0; i <= dt.Length - 1; i++) {
        if (Convert.ToInt32(ChildCounter(fTableName, dt[i]["id"])) > 0) {
            temp = "<li>" + Constants.vbCrLf + "<a href='#'>" + Strings.Trim(dt[i]["MenuName"]) + "</a>" + Constants.vbCrLf + Constants.vbTab + "<ul> ";
            _temp += temp;
            GenerateNestedMenus2("menus", dt[i]["id"], fClause);
            _temp += Constants.vbTab + "</ul>" + Constants.vbCrLf + Constants.vbTab + "</li>" + Constants.vbCrLf;
        } else {
            //For rows they have not child
            temp = Constants.vbTab + "<li><a href='#'>" + Strings.Trim(dt[i]["MenuName"]) + "</a>" + "</li>" + Constants.vbCrLf;
            _temp += temp;
            GenerateNestedMenus2("menus", dt[i]["id"], fClause);

        }
    }
    return _temp;
} 
```

这是解决方案方法的粗略想法，可能需要进行一些调整和试验才能使一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:38:37.827

您可以将数据放入数据集中，然后在递归函数中对数据表使用 select 方法，如下所示：

```
private sub getUL_String()
    Dim datasetRecs As New DataSet
    Dim datarowParents As DataRow
    Dim finalStringUL As String = ""
    //FILL your dataset here.
    //Table 0 will be your top level parents.
    //Table 1 will be all records.
    For Each datarowParents In datasetRecs.Tables(0).Rows
        //do processing to datarowFiltered row.
        finalStringUL = "fill in your UL stuff for this record"
        finalStringUL &= getChildren(datasetRecs.Tables(1), datarowParents("id"),    fClause)
    Next

    finalStringUL
End Sub

Private Function getChildren(ByRef datatableROWS As DataTable, ByVal currentID As String, ByVal fClause As String) As String
    Dim currentRow As DataRow
    getChildren = ""
    For Each currentRow In datatableROWS.Select("MenuParent=" & currentID & " and " & fClause)
        //do processing to datarowFiltered row.
        getChildren = "fill in your UL stuff for this record"
        getChildren &= getChildren(datatableROWS, currentRow("id"), fClause)
    Next
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:49:37.273

这需要一个纯粹的字典方法。
您正在处理的只是 Int (id)。
我发现 DataTables 更慢更笨重。
它采用了获取所有 MenuParent 的方法。

```
private Dictionary<string, Dictionary<string, List<int>>> dDB = new Dictionary<string, Dictionary<string, List<int>>>();
public List<int> ReadData(string fTableName, string fID, string fCluase)
{
    string key = fTableName + "_" + fCluase;  
    if (dDB.ContainsKey(key))
    {
        Dictionary<string, List<int>> sDB = dDB[key];
        if (sDB.ContainsKey(fID)) return sDB[fID];
        return new List<int>();
    }

    string SQLCommand = "SELECT id, MenuParent FROM " + fTableName + " where Visible=1 AND " + fCluase + " order by MenuParent";

    SqlDataReader DR = new SqlDataReader();
    Dictionary<string, List<int>> nsDB = new Dictionary<string, List<int>>();
    int _id;
    string _fid;
    string _fidLast = string.Empty;
    List<int> _ids = new List<int>();
    while (DR.Read())
    {
        _id = DR.GetInt32(0);
        _fid = DR.GetString(1);
        if (_fid != _fidLast && !string.IsNullOrEmpty(_fidLast))
        {
            nsDB.Add(_fidLast, _ids);
            _ids.Clear();
        }
        _fidLast = _fid;
        _ids.Add(_id);
    }
    nsDB.Add(_fid, _ids);
    dDB.Add(key, nsDB);
    if (nsDB.ContainsKey(fID)) return nsDB[fID];
    return new List<int>();
} 
```

# magento - 在 magento 管理员角色权限中使用事件观察者添加网站字段

> ID：14627356
> 
> 赞同：3
> 
> 时间：2013-01-31T13:51:20.633
> 
> 标签：magento

我正在创建一个模块，允许用户在创建角色权限期间选择网站（系统 -> 权限 -> 角色 -> 添加新角色 -> 角色资源）。我正在使用观察者来实现这一点，但是我无法获得表单对象。

**观察者.php**

```
class Mymodule_Mycompany_Model_Observer 
{ 
    public function appendCustomRow(Varien_Event_Observer $observer)
    {
        $block = $observer->getEvent()->getBlock();
        if (!isset($block)) {
            return $this;
        }
        if ($block->getType() == 'adminhtml/permissions_editroles') {       
            //get form instance
            $form = $observer->getEvent()->getForm();
            //create new custom fieldset 'website'
            $fieldset = $form->addFieldset('website', array(
                'legend' => 'Website Extras',
                'class' => 'fieldset-wide'
                )
            );
            //add new field
            $fieldset->addField('website', 'text', array(
                'name'      => 'website',
                'label'     => Mage::helper('adminhtml')->__('Website'),
                'title'     => Mage::helper('adminhtml')->__('Website'),
                'disabled'  => false,
            ));
        }
    }
} 
```

**我的模块/我的公司/etc/config.xml**

```
<adminhtml>
         <events>
            <core_block_abstract_prepare_layout_before>
                <observers>
                    <Event_column_append>
                        <type>model</type>
                        <class>Mymodule_Mycompany_Model_Observer</class>
                        <method>appendCustomColumn</method>
                    </Event_column_append>
                </observers>
            </core_block_abstract_prepare_layout_before>
          </events>
</adminhtml> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T01:43:40.350

我解决了。这是修改后的有效代码

```
public function appendCustomColumn(Varien_Event_Observer $observer)
{
    $block = $observer->getEvent()->getBlock();
    if (!isset($block)) {
        return $this;
    }
    if ($block->getType() == 'adminhtml/permissions_tab_roleinfo') {       
        //get form instance
        $form = $block->getForm();
        //create new custom fieldset 'website'
        $fieldset = $form->addFieldset(
            'website_field', 
            array(
                'legend' => 'Website Extras',
                'class' => 'fieldset-wide'
            )
        );
        //add new field
        $fieldset->addField('website', 'text', array(
            'name'      => 'website',
            'label'     => Mage::helper('adminhtml')->__('Website'),
            'title'     => Mage::helper('adminhtml')->__('Website'),
            'disabled'  => false,
        ));
    }
} 
```

XML 配置：

```
<events>
    <adminhtml_block_html_before>
        <observers>
            <Event_column_append>
                <type>model</type>
                <class>Mymodule_Mycompany_Model_Observer</class>
                <method>appendCustomColumn</method>
            </Event_column_append>
        </observers>
    </adminhtml_block_html_before>
</events> 
```

1.  您需要使用事件“adminhtml_block_html_before”，因为您使用的事件甚至没有创建表单对象。这就是您无法访问表单对象的原因。
2.  创建此表单元素的块是“adminhtml/permissions_tab_roleinfo”。
3.  您使用的方法与观察者中的方法不同。

希望有帮助:)...

干杯，斯瓦普纳

# android - Android：没有操作栏的滑动标签

> ID：14627357
> 
> 赞同：10
> 
> 时间：2013-01-31T13:51:21.740
> 
> 标签：android, android-viewpager, android-scrollable-tabs

我创建了一个`ViewPager`. 我想添加可滚动标签（滑动标签）以使其更灵活（如谷歌播放）。以及我使用`ActionBar`. 我怎么能不使用`ActionBar`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T14:06:38.790

[`PagerTabStrip`](http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html)和[ViewPagerIndicator](http://viewpagerindicator.com/)的标签风格都应该给你滑动标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T13:55:33.897

此[链接](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)将对您有所帮助，您可以按照教程中解释的示例来实现。

或者

您可以在 Samples 中搜索`SupportV4Demos`，您可以找到示例 FragmentTabs 和 Pager 示例来实现这一点。

# jquery - 使用 Qunit 模拟 window.location.reload

> ID：14627367
> 
> 赞同：2
> 
> 时间：2013-01-31T13:51:33.000
> 
> 标签：jquery, qunit

我想`window.location.reload`使用 qunit 成功模拟对象以获取以下功能：

```
function Test() {
    $.ajax({
        type: 'POST',
        url: /Test/TestMethod,
        data: 1,
        dataType: 'json',
        contentType: 'application/json; charset=utf-8;',
        success: function (response) {
            if (response.Successful)
                window.location.reload();
        },
        error: function (response) {
        }
    });
} 
```

谁能帮我嘲笑这种和平的代码。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:59:54.253

由于它是 JavaScript，因此您可以覆盖所有函数和对象。为了使事情更容易，我会将您的函数传递给`window`要使用的对象。这样您就可以注入一个模拟窗口以用于您的测试。如果您在生产中使用代码，您可以传递真实`window`对象或直接调用不带第二个参数的函数。当您省略参数时，该行`var currentWindow = currentWindow || window;`确保使用全局窗口。回调也是如此，如果你不指定它，它只是被一个空函数替换。

因为要测试异步调用，所以应该使用[`asyncTest()`](http://api.qunitjs.com/asyncTest/)QUnit。这使您能够在 AJAX 调用返回时运行测试代码。您所要做的就是在您的代码中添加一个回调参数。对于您的测试，您只需传递一个带有测试代码和模拟窗口的回调方法。通过定义预期断言的`expect(2)`数量`reload()`（

测试功能：

```
function ajaxCall(callback, currentWindow) {
    var callback = callback || function() {};
    var currentWindow = currentWindow || window;
    $.ajax({
        type: 'GET',
        url: '/',
        data: 1,
        dataType: 'html',
        success: function (response, statusCode) {
            if (statusCode === "success") {
                currentWindow.location.reload();
            }
            callback(statusCode);
        },
        error: function (response, statusCode) {
            callback(statusCode);
        }
    });
} 
```

`window`嘲笑：

```
module("AjaxTests", {
  setup: function() {
      this.mockWindow = {
          location: {
              reload: function() {
                  ok(true, "This mock function should be called");
              }
          }
      };
  }
}); 
```

考试：

```
asyncTest("ajaxCall with mock window", function () {
    expect(2);
    var testCallback = function(statusCode) {
        ok(statusCode === "success", "Response should be successful");
        start();
    }
    ajaxCall(testCallback, this.mockWindow);
}); 
```

您可以[在 jsFiddle 上看到此代码](http://jsfiddle.net/odi86/J7CrQ/)（这就是为什么我不得不稍微调整您的代码的原因）。

# facebook - Facebook 分享和“Like Button”连接

> ID：14627374
> 
> 赞同：0
> 
> 时间：2013-01-31T13:51:53.487
> 
> 标签：facebook, facebook-like

当一个链接在 Facebook 上分享时，它是否也会增加“喜欢”的数量？facebook分享和like按钮之间有联系吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:20:56.503

是的，有联系。

总是分享数=非fb页面上的喜欢数

在本网站的任何页面上查看一个工作示例

[http://www.ivetrolls.org/2013/01/17-most-random-rage-comics-of-2012.html](http://www.ilovetrolls.org/2013/01/17-most-random-rage-comics-of-2012.html)

# sublimetext2 - sublime text 构建系统中的文件夹路径

> ID：14627375
> 
> 赞同：1
> 
> 时间：2013-01-31T13:51:53.827
> 
> 标签：sublimetext2

我的崇高项目如下所示：

```
{
    "folders":
    [
        {
            "folder_exclude_patterns":
            [
                ".bzr",
                "build",
                "webapps",
                "work",
                ".settings"
            ],
            "path": "/home/charles/project/Editor/trunk"
        }
    ],
    "settings":
    {
        "build_on_save": true,
        "filename_filter": "\\.(java)$",
        "tab_size": 4,
        "translate_tabs_to_spaces": false
    },
    "build_systems":
    [
        {
            "name": "compile",
            "cmd": ["ant", "-f", "dev.xml", "compile"]
        }
    ]
} 
```

当我保存文件时，控制台说：

```
Buildfile: dev.xml does not exist!
Build failed
[Finished in 0.2s with exit code 1] 
```

我知道我需要在 dev.xml 之前放一些东西，但我不知道是什么。

我在这里找到了一些可能性：http: [//sublimetext.info/docs/en/reference/build_systems.html#variables](http://sublimetext.info/docs/en/reference/build_systems.html#variables)

但在我的情况下，我需要的是文件夹路径“/home/charles/project/Editor/trunk”...

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T07:08:56.300

您在“build_systems”设置中缺少“working_dir”。下面的示例将使用包含 sublime 项目文件的目录作为构建起始目录。

```
"build_systems":
[
    {
        "name": "compile",
        "working_dir": "${project_path}",
        "cmd": ["ant", "-f", "dev.xml", "compile"]
    }
] 
```

更多信息请访问：[http ://www.sublimetext.com/docs/2/projects.html](http://www.sublimetext.com/docs/2/projects.html)

# python - pandas：带有条件格式的 HTML 输出

> ID：14627380
> 
> 赞同：28
> 
> 时间：2013-01-31T13:52:00.740
> 
> 标签：python, html, css, dataframe, pandas

我正在尝试格式化表格，以便每列中的数据根据​​它们的值以某种样式格式化（类似于电子表格程序中的条件格式）。如何使用 HTML 格式化程序在 pandas 中实现这一点？

一个典型的用例是突出显示表格中的重要值。例如：

```
 correlation  p-value
0   0.5          0.1
1   0.1          0.8
2   0.9          *0.01* 
```

pandas 允许为 HTML 输出定义自定义格式化程序 - 要获得上述输出，可以使用：

```
import pandas as pd
from pandas.core import format
from StringIO import StringIO
buf = StringIO()
df = pd.DataFrame({'correlation':[0.5, 0.1,0.9], 'p_value':[0.1,0.8,0.01]})
fmt = format.DataFrameFormatter(df, 
          formatters={'p_value':lambda x: "*%f*" % x if x<0.05 else str(x)})
format.HTMLFormatter(fmt).write_result(buf) 
```

但是，我想更改重要值的样式（例如，通过使用粗体）。

一种可能的解决方案是将 CSS 类附加到`<td>`HTML 输出中的标记，然后可以使用 CSS 样式表对其进行格式化。上面的内容将变为：

```
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>correlation</th>
      <th>p_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td> 0.5</td>
      <td> 0.10</td>
    </tr>
    <tr>
      <td>1</td>
      <td> 0.1</td>
      <td> 0.80</td>
    </tr>
    <tr>
      <td>2</td>
      <td> 0.9</td>
      <td class='significant'> 0.01</td>
    </tr>
  </tbody>
</table> 
```

**编辑**：正如@Andy-Hayden 所建议的，我可以通过`<span class="signifcant">...</span>`在我的示例中简单地替换星号来添加格式：

```
import pandas as pd
from StringIO import StringIO
buf = StringIO()
significant = lambda x: '<span class="significant">%f</span>' % x if x<0.05 else str(x)
df = pd.DataFrame({'correlation':[0.5, 0.1,0.9], 'p_value':[0.1,0.8,0.01]})
df.to_html(buf, formatters={'p_value': significant}) 
```

较新版本的 pandas 会避开标签。为避免将最后一行替换为：

```
df.to_html(buf, formatters={'p_value': significant}, escape=False) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-31T16:16:27.443

您可以使用[`to_html`](http://pandas-docs.github.io/pandas-docs-travis/generated/pandas.DataFrame.to_html.html?highlight=to_html#pandas.DataFrame.to_html)带有`formatters`参数的 DataFrame 方法。

*`<span class="significant">`一个更简单的解决方案是用and包围`</span>`（而不是`*`）。注意：默认情况下，这将被转义（即`<`变为`&lt;`），因此您需要使用该`escape=False`参数。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-10T15:01:19.413

从 pandas 0.17.1 开始，可以很容易地使用 [样式 api](https://pandas.pydata.org/pandas-docs/stable/style.html)将自定义格式应用于数据框 HTML 表示。

```
import pandas as pd

df = pd.DataFrame({
    'correlation':[0.5, 0.1,0.9],
    'p_value':[0.1,0.8,0.01]})
styled_df = df.style.apply(
    lambda x: ['font-weight: bold; background-color: yellow'
               if value <= 0.01 else '' for value in x])
styled_df 
```

[![在此处输入图像描述](../Images/8e5b139794dfde6aed050cc4ad053c12.png)](https://i.stack.imgur.com/uNRni.png)

输出在 Jupyter Notebook 等接口中自动呈现，并且可以使用该`render()` 方法返回 HTML 的字符串表示形式。

```
print(styled_df.render()) 
```

```
<style  type="text/css" >
    #T_4e49b9da_8451_11e8_9166_605718a99a7frow2_col1 {
            font-weight:  bold;
             background-color:  yellow;
            font-weight:  bold;
             background-color:  yellow;
        }</style>  
<table id="T_4e49b9da_8451_11e8_9166_605718a99a7f" > 
<thead>    <tr> 
        <th class="blank level0" ></th> 
        <th class="col_heading level0 col0" >correlation</th> 
        <th class="col_heading level0 col1" >p_value</th> 
    </tr></thead> 
<tbody>    <tr> 
        <th id="T_4e49b9da_8451_11e8_9166_605718a99a7flevel0_row0" class="row_heading level0 row0" >0</th> 
        <td id="T_4e49b9da_8451_11e8_9166_605718a99a7frow0_col0" class="data row0 col0" >0.5</td> 
        <td id="T_4e49b9da_8451_11e8_9166_605718a99a7frow0_col1" class="data row0 col1" >0.1</td> 
    </tr>    <tr> 
        <th id="T_4e49b9da_8451_11e8_9166_605718a99a7flevel0_row1" class="row_heading level0 row1" >1</th> 
        <td id="T_4e49b9da_8451_11e8_9166_605718a99a7frow1_col0" class="data row1 col0" >0.1</td> 
        <td id="T_4e49b9da_8451_11e8_9166_605718a99a7frow1_col1" class="data row1 col1" >0.8</td> 
    </tr>    <tr> 
        <th id="T_4e49b9da_8451_11e8_9166_605718a99a7flevel0_row2" class="row_heading level0 row2" >2</th> 
        <td id="T_4e49b9da_8451_11e8_9166_605718a99a7frow2_col0" class="data row2 col0" >0.9</td> 
        <td id="T_4e49b9da_8451_11e8_9166_605718a99a7frow2_col1" class="data row2 col1" >0.01</td> 
    </tr></tbody> 
</table> 
```

# c# - 在巨大的 asp.net 遗留项目中版本化 javascript 文件的最佳方法是什么

> ID：14627382
> 
> 赞同：0
> 
> 时间：2013-01-31T13:52:04.953
> 
> 标签：c#, asp.net, .net, assets

当我们更改客户端时，客户端的大部分资源都会出现缓存问题，因为客户端的缓存不会在每次发布时都失效。

**可能的解决方案1：** 来自.net MVC，我正在考虑制作一个处理每个资源并为其分配版本的助手，例如：

```
@SomeHelper.VersionJsFile("~/scripts/somejs1","~/scripts/somejs2","~/scripts/somejs3") 
```

会输出：

```
<script src="~/scripts/somejs1?v=1234">
<script src="~/scripts/somejs2?v=1234">
... 
```

*问题：*我不知道如何在 ASP .net 中做类似的事情。 *问题2：*很多文件，可能会忘记其中一些。

**可能** 的解决方案2：另一种解决方案是浏览所有文件（很多文件......实际上，文件的sh * tload）并手动输入版本：

```
<script src="scripts/somejs1.js?v=<%=version %> 
```

*问题：*很多文件，可能会忘记其中一些。

**可能的解决方案 3：** 如本示例中所述编写自定义过滤器流：[过滤器流示例](http://omaralzabir.com/automatic-javascript-css-versioning-to-refresh-browser-cache/)

*问题：*危险，如果过滤器崩溃，客户端可能根本无法使用该软件。 *问题2：*正确实施相当“困难”，因为我不习惯使用流。 *问题3：*为未来的开发人员维护相当“困难”。

**可能的解决方案4：** 使用YUI压缩工具。别想了。这是遗留代码，为时已晚。

**我的问题：**在这样的系统中版本文件的最佳方法是什么？如果我已经找到了好的解决方案，您是否有关于如何正确实施上述解决方案的提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:02:30.600

我很幸运使用[Cassette](http://getcassette.net/)来捆绑和控制 js 资源的版本。它[支持 webforms](http://getcassette.net/documentation/v1/getting-started/webforms)，并且仅在选项中用于版本控制/缓存破坏。在配置中需要对资源进行一些设置，但您只需要在一次配置它，页面可以在需要时引用它们的资源。

# ruby-on-rails - 计算过去 7 天在 rails 中创建的用户数？[需要 Count 语法方面的帮助]

> ID：14627383
> 
> 赞同：2
> 
> 时间：2013-01-31T13:52:10.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我看到[了过去 7 天内创建的 Count 记录，](https://stackoverflow.com/q/8426781/692622)但仍然需要一些帮助才能正确获取 COUNT 的语法，现在我有

```
@count_users = User.count('comment') 
```

这给了我所有评论的计数，但我需要知道仅在过去 7 天或过去 1 个月内发表的所有评论的计数，但我无法找出正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:33:01.907

这个数：

```
@count_users = User.count('comment') 
```

生成以下 SQL：

```
SELECT COUNT(comment) FROM "users" 
```

因此，除非您的 users 表中**有评论列，****否则它不会计算正确的 objects**。

**如果您有 Comment 模型**，您可以使用以下方法计算过去 7 天内创建的所有评论：

```
Comment.where('created_at >= ?', Time.zone.now - 7.days).count # count for a week
Comment.where('created_at >= ?', Time.zone.now - 1.months).count # count for a month 
```

如果你想计算特定用户的评论，你可以使用这个（**假设一个评论属于一个用户和一个用户有_很多评论**）：

```
Comment.where(user_id: user.i).where('created_at >= ?', Time.zone.now - 7.days).count 
```

# php - Mysql PHP，如何选择以特定字符开头的数据

> ID：14627389
> 
> 赞同：2
> 
> 时间：2013-01-31T13:52:18.870
> 
> 标签：php, mysql

我有一张桌子`cities`：

```
+----+--------+
| id | zip    | 
+----+--------+
|  1 | 07500  | 
|  2 | 07501  | 
|  3 | 75000  | 
|  4 | 75001  | 
|  5 | 75002  | 
+----+--------+ 
```

我需要选择以`field zip`开头的数据`750`，所以我尝试了：

```
SELECT FROM cities WHERE ZIP LIKE '%750%' 
```

但这会返回表中包含的所有数据，`750`这是不正常的。我怎么能告诉我的查询选择以 开头的数据`750`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T13:53:03.013

执行此查询：

```
SELECT FROM cities WHERE ZIP LIKE '750%' 
```

**解释**

`%`是一个特殊的 MySQL 字符，表示任何字符、空字符串或字符组。

**例子：**

```
LIKE '%a%' -- matches: a, ant, track | any string that contains a in any location
LIKE 'a%'  -- matches: a, ant        | strings that start with a
LIKE '%a'  -- matches: a, data       | strings that end with a 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T13:53:31.953

这应该使魔术：

```
SELECT FROM cities WHERE ZIP LIKE '750%' 
```

% at begin 表示之前的任何事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T13:56:32.030

```
LIKE '750%' 
```

应该做的伎俩

如果您的字符串包含`'%'`比您需要使用的字符`\%`

# vhdl - 为什么 4 位加法器/减法器通过查看最后两个进位的 BOTH 来实现其溢出检测？

> ID：14627390
> 
> 赞同：10
> 
> 时间：2013-01-31T13:52:24.737
> 
> 标签：vhdl, boolean-logic, circuit

这是我们为课堂提供的图表：

![在此处输入图像描述](../Images/47f6cd36ebe5b261ef529047fe1e051d.png)

你为什么不在这张图片中使用 C4 呢？如果 C4 为 1，那么最后的加法导致溢出，这就是我们想知道的。为什么我们需要看C3？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T14:56:32.183

[溢出标志指示有](http://en.wikipedia.org/wiki/Overflow_flag)**符号**操作的溢出条件。

在签名操作中要记住的几点：

*   MSB 始终保留以指示数字的符号
*   负数用 2 的补码表示
*   溢出导致无效操作

> [二进制补码溢出规则：](http://sandbox.mc.edu/~bennet/cs110/tc/orules.html)
> 
> *   如果两个正数之和产生负结果，则和溢出。
> *   如果两个负数之和产生正结果，则和溢出。
> *   否则，总和没有溢出。

例如：

```
**Ex1:**
 0111   (carry)  
  0101  ( 5)
+ 0011  ( 3)
==================
  1000  ( 8)     ;invalid (V=1) (C3=1) (C4=0)

**Ex2:**
 1011   (carry)  
  1001  (-7)
+ 1011  (−5)
==================
  0100  ( 4)     ;invalid (V=1) (C3=0) (C4=1)

**Ex3:**
 1110   (carry)  
  0111  ( 7)
+ 1110  (−2)
==================
  0101  ( 5)     ;valid (V=0) (C3=1) (C4=1) 
```

在有符号运算中，如果最左边的两个进位位（在这些示例中位于顶行最左侧的位）均为 1 或均为 0，则结​​果有效；如果左两个进位位是“1 0”或“0 1”，则发生符号溢出。方便的是，对这两位进行*异或运算可以快速确定是否存在溢出条件。*（参考：[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)）

***溢出与进位：***溢出可以被认为是[进位的二进制补码形式。](http://en.wikipedia.org/wiki/Carry_flag)在有**符号**操作中，溢出标志被监视并且进位标志被忽略。类似地，在**无符号**操作中，进位标志被监控​​，溢出标志被忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T13:53:05.723

当最高有效位的进位不等于进位时，会发生有符号数的溢出。

例如，使用 8 位，65 + 64 = 129 实际上会导致溢出。这是因为这是二进制的 1000 0001，也是 2 的补码的 -127。如果你通过这个例子，你可以看到这是进位不等于进位的结果。

即使进位标志为高，也可以进行正确的计算。

考虑

```
 1000 1000   = -120
+ 1111 1111   = -1

=(1) 10000111 = -121 
```

有 1 的进位，但没有溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-19T16:07:36.840

对于任何正的自然位数，我想给这个问题一个更一般的答案。

让我们将最后一个进位输出 C1、倒数第二个进位输出 C0、和符号输出 S0 以及 A 和 B 的符号位分别称为 A0 和 B0。

那么以下成立：

*   `C1 = A0 + B0 + C0`
*   `S0 = A0*B0 + A0*C0 + B0*C0`

现在让我们来看看这些可能性。

*   如果`C1 == 1`有两种可能：
    *   if `C0 == 0`: A0 和 B0 必须都为 1（因此 A 和 B 都必须为负）。这意味着 S0 必须为 0 表示解决方案为正而 A 和 B 为负 => 溢出
    *   如果`C0 == 1`：要么
        *   A en B 有相反的符号，所以不可能溢出。=> 没有溢出
        *   A0 和 B0 都是 1（因此 A 和 B 必须都是负数）。这意味着 S0 必须为 1 意味着解决方案是负数 => 没有溢出
*   如果`C1 == 0`有两种可能：
    *   如果`C0 == 0`：要么
        *   A0 和 B0 都是 0（因此 A 和 B 必须都是正数）。这意味着 S0 必须为 0 意味着解决方案是正的 => 没有溢出
        *   A en B 有相反的符号 => 没有溢出
    *   if `C0 == 1`: A0 en B0 必须都是 0（因此 A en B 必须都是正数）这意味着 S0 必须为 1 意味着解是负数，而 A en B 是正数 => 溢出

希望能帮助那里的人。

# trigger.io - 将 yeoman 与 triggerio 一起使用

> ID：14627392
> 
> 赞同：3
> 
> 时间：2013-01-31T13:52:27.133
> 
> 标签：trigger.io, yeoman

我正在尝试将 trigger.io 与 yeoman 一起使用。我在整个构建周期（脚手架 angularjs 应用程序/测试/..）中使用 yeoman，在部署中使用 trigger.io。
Trigger.io 生成所有在 'src' 和 yeoman 都在 'app' 目录。

无论如何让Trigger.io写入'app'而不是'src'目录？

*编辑*这似乎可行，但不是很可行，因为它需要跟踪 yeoman 生成的新目录/文件：

*   ln -s app/index.html index.html
*   ln -s 应用程序/样式样式
*   ln -s 应用程序/脚本脚本
*   ：继续任何相关的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:27:57.310

我最终符号链接`dist`到，`src`因为我们需要 Yeoman 编译出 SCSS 和 CoffeScript 文件。创建目录`yeoman server`时无法运行这里的无赖。另外*令人沮丧*的是，当您再次清理目录时。`yeoman build``dist`*`yeoman server``dist`*

 *我计划为 Trigger 的生成器创建一个 yeoman 生成器，并添加一些 grunt 任务来模仿`Rakefile`我在使用 Sinatra 测试和开发时创建的任务（例如`yeoman simulator`、`yeoman device`、`yeoman testflight`）。

**编辑**：我现在直接向我添加了一些任务`gruntfile.js`。我添加`grunt-contrib-copy`并添加了以下子任务。

```
copy: {
  app: {
    files: {
      "src/": "app/**",                 // core app files
    },
  },
  compass: {
    files: {
      "src/styles/": "temp/styles/**",  // drop in the compiled coffeescript
    }
  },
  coffee: {
    files: {
      "src/scripts/": "temp/scripts/**" // drop in the compiled scss
    }
  }
}, 
```

我将这些任务添加到适当的监视命令中，并添加了一个新监视来监视`app`目录。

```
watch: {
  coffee: {
    files: 'app/scripts/**/*.coffee',
    tasks: 'coffee copy:coffee reload'
  },
  compass: {
    files: [
      'app/styles/**/*.{scss,sass}'
    ],
    tasks: 'compass copy:compass reload'
  },
  app: {
    files: [
      'app/**/*.{html,png,json,css,js}'
    ],
    tasks: 'copy:app'
  },
} 
```

Now `yeoman server`，它调用`yeoman watch`，保持`src`最新。

我还带进`grunt-shell`来做以下事情。

```
shell: {
  forge_build: {
      command: 'forge build ios 2>&1 | tee output',
      stdout: true
  },
  forge_run_device: {
      command: 'forge run ios --ios.device device',
      stdout: true
  },
  forge_run: {
      command: 'forge run ios',
      stdout: true
  }
} 
```

并创建一些任务，例如：

```
grunt.registerTask("sim", 'copy shell:forge_build shell:forge_run');
grunt.registerTask("device", 'copy shell:forge_build shell:forge_run_device'); 
```

我对它并不完全满意，但它让我可以继续运行`yeoman server`并下降到其他地方的控制台并运行`yeoman device`以将其带到设备中。它还将`src`目录保存在可以签入的位置。

最终，我将把它移到一个 yeoman 插件中，并添加一些更具体的构建任务来清理适当目标（例如 iOS、Android）的 src 目录，以保持目录大小较小。

**编辑：**我创建是`grunt-forge`为了帮助`forge`从 Yeoman 内部运行。我还写了一些关于[为 `forge 创建更简洁的输出的](http://fooberry.com/2013/02/12/terse-triggerio-logging/)博客。*

# c# - 母版页上的 css 覆盖 div 中的 asp.net 按钮未在单击事件时触发

> ID：14627394
> 
> 赞同：2
> 
> 时间：2013-01-31T13:52:30.660
> 
> 标签：c#, asp.net, onclick, master-pages, umbraco

我对 umbraco、母版页和所有这些内容相当陌生，但我正在赶上..

我似乎有这个奇怪的问题..我有一组母版页，内容包含 umbraco cms..

在母版页中，我有一个通用菜单和一个登录按钮。这个登录按钮会触发一个覆盖层，它包含在同一母版页内的一个 div 中。还有另一个覆盖在同一个母版页上创建一个新用户。问题是，登录覆盖中的按钮 OnClick 没有触发。有趣的是，我的文本框上的 required 属性确实触发了......你知道，弹出消息说你必须输入一些东西！但是我的自定义验证器什么都不做：S

这是我的母版页标题中的脚本：

```
<script runat="server">
    private void btnLogin_Click(object sender, EventArgs e)
    {
        Session["failedLogin"] = false;
        string mail = tbLoginMail.Text.Trim();
        string pass = tbLoginPass.Text;
        tbLoginMail.Text = "TEEEEEEST!";
        PageUtil.User = PageUtil.ValidateCredentials(mail, pass);
        if (PageUtil.User == null)
        {
            Session["failedLogin"] = true;
        }
        if (Page.IsValid)
            Server.Transfer(Page.ResolveClientUrl("/"));
    }

    private void UserLoginResponse(object source, ServerValidateEventArgs args)
    {
        if (Session["failedLogin"] != null)
        {
            if ((bool)Session["failedLogin"])
            {
                args.IsValid = false;
            }
        }
    }
</script> 
```

甚至文本框中的文本都没有设置为 teeesst！Any1有什么建议吗？

这是包含 2 个 div 的主体：

```
<body>
<a name="LoginLink" href="#overlay" class="submitbtn"><%= PageUtil.IsLoggedIn() ? "Log ud" : "Log Ind" %></a>
<form runat="server">
    <div id="overlay">
        <div id="popup">
            <!-- ANY CONTENTS -->
            <a href="">
                <img class="close_button" src="/media/Images/close.png" /></a>
            <div id="login" class="login">
                <asp:CustomValidator ID="CustomValidator1" runat="server" ValidationGroup="login" ErrorMessage="Forkert e-mail eller password" OnServerValidate="UserLoginResponse" Display="Dynamic"></asp:CustomValidator><br />
                <label>E-mail</label>

                <asp:TextBox ID="tbLoginMail" type="text" TabIndex="1" class="input" ValidationGroup="login" placeholder="email eller brugernavn" required="true" runat="server" /><br>
                <br>

                <label>Password</label>

                <asp:TextBox ID="tbLoginPass" type="password" class="input" TabIndex="2" required="true" ValidationGroup="login" runat="server" /><br>
                <br>

                <asp:CheckBox ID="cbRememberMe" type="checkbox" TabIndex="3" runat="server" />Keep me logged in

                   <asp:Button ID="submitbtn" Text="Login" TabIndex="4" OnClick="btnLogin_Click" runat="server" ValidationGroup="login" CausesValidation="true" /><br />
                Ikke oprettet? <a href="#overlay_signup">Opret bruger!</a>
            </div>
        </div>
    </div>
    <div id="overlay_signup">
        <div class="overlay popup" style="height: 500px;">
            <a href="#">
                <img class="close_button" src="/media/Images/close.png" /></a>
            <div class="login">
                <label>Navn</label>

                <asp:TextBox ID="createUserName" type="text" TabIndex="1" ValidationGroup="signUp" class="input" placeholder="Navn" required="true" runat="server" /><br>
                <br>

                <label>Email</label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp

                  <asp:TextBox ID="createUserMail" type="text" class="input" ValidationGroup="signUp" placeholder="e-mail" TabIndex="2" required="true" runat="server" /><br>
                <br>

                <label>Password</label>

                <asp:TextBox ID="tbCreateUserPass" type="password" ValidationGroup="signUp" class="input" TabIndex="2" required="true" runat="server" /><br>
                <br>

                <asp:Button runat="server" ID="submit1" class="submitbtn" ValidationGroup="signUp" Text="SignUp" TabIndex="4" />
            </div>
        </div>
    </div>

    <div id="box">
        <div id="head">
            <umbraco:Macro ID="Macro1" Alias="MenuBar" runat="server"></umbraco:Macro>
        </div>
        <div class="header">
            <umbraco:Item ID="Item2" Field="header" runat="server" />
        </div>
        <div id="content">
            <umbraco:Item ID="Item1" Field="bodyText" runat="server" />
            <div id="contentDiv">
                <asp:ContentPlaceHolder ID="pageContent" runat="server" />
            </div>
        </div>
        <div class="dotSeperator">...</div>
        <div id="footer">
            <p class="footerText">| Martin Stendorf Jensen | Copyright ® 2013 | <a href="mailto:mstendorf@outlook.com?Subject=Henvendelse%20fra%20website">mstendorf@outlook.com</a> | +4527126901 |</p>
        </div>
    </div>
</form> 
```

# breeze - Breeze 1.01 中的错误，带有布尔字段并取消更改

> ID：14627398
> 
> 赞同：1
> 
> 时间：2013-01-31T13:52:37.140
> 
> 标签：breeze

取消对布尔属性的更改时，我在 BreezeJs 1.01 中遇到问题。该属性使用 KnockoutJs 绑定：

```
<input type="checkbox" value="IsDeleted" data-bind="checked: IsDeleted" /> 
```

它具有以下行为：

1.  如果初始值为真，并且我将其设置为假，则取消更改，该值恢复为真。（正确的行为）
2.  如果初始值为 false，并且我将其设置为 true，则取消更改，该值将恢复为 false。（正确的行为）
3.  如果初始值为 true，我将其设置为 false，然后再设置为 true，然后取消更改，则该值保持为 true。（正确的行为）
4.  如果初始值为 false，我将其设置为 true，然后再设置为 false，然后取消更改，则该值恢复为 true。（不正确的行为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:19:35.140

好的，抱歉这花了这么长时间。这是一个错误，现已在微风 v 1.1.0 中修复。并感谢您找到它:)

# c# - 设置HttpClient的授权头

> ID：14627399
> 
> 赞同：672
> 
> 时间：2013-01-31T13:52:45.777
> 
> 标签：c#, rest, oauth, windows-runtime

我有一个用于 REST API 的 HttpClient。但是我在设置授权标头时遇到问题。我需要将标头设置为我从执行 OAuth 请求中收到的令牌。我看到了一些 .NET 的代码，它暗示了以下内容，

```
httpClient.DefaultRequestHeaders.Authorization = new Credential(OAuth.token); 
```

但是，WinRT 中不存在 Credential 类。任何人都知道如何设置授权标头？

* * *

## 回答 #1

> 赞同：1102
> 
> 时间：2013-01-31T14:36:11.947

所以这样做的方法如下，

```
httpClient.DefaultRequestHeaders.Authorization =
    new AuthenticationHeaderValue("Bearer", "Your Oauth token"); 
```

* * *

## 回答 #2

> 赞同：445
> 
> 时间：2013-01-31T14:37:34.210

```
request.DefaultRequestHeaders.Authorization = 
    new AuthenticationHeaderValue(
        "Basic", Convert.ToBase64String(
            System.Text.ASCIIEncoding.ASCII.GetBytes(
               $"{yourusername}:{yourpwd}"))); 
```

* * *

## 回答 #3

> 赞同：106
> 
> 时间：2015-09-21T09:07:27.967

我正在寻找一种处理这个问题的好方法，并且我正在研究同样的问题。希望这个答案能帮助像我一样有同样问题的每个人。

```
using (var client = new HttpClient())
{
    var url = "https://www.theidentityhub.com/{tenant}/api/identity/v1";
    client.DefaultRequestHeaders.Add("Authorization", "Bearer " + accessToken);
    var response = await client.GetStringAsync(url);
    // Parse JSON response.
    ....
} 
```

来自[https://www.theidentityhub.com/hub/Documentation/CallTheIdentityHubApi的参考](https://www.theidentityhub.com/hub/Documentation/CallTheIdentityHubApi)

* * *

## 回答 #4

> 赞同：65
> 
> 时间：2017-07-14T17:20:11.233

由于**重用 HttpClient 实例是一种很好的做法**，对于*性能和端口耗尽问题*，并且因为没有一个答案给出这个解决方案（甚至引导你走向不良做法:(），我在这里放了一个指向我所做的答案的链接关于类似的问题：

[https://stackoverflow.com/a/40707446/717372](https://stackoverflow.com/a/40707446/717372)

关于如何正确使用 HttpClient 的一些资料：

*   [https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/](https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/)
*   [https://blogs.msdn.microsoft.com/alazarev/2017/12/29/disposable-finalizers-and-httpclient/](https://blogs.msdn.microsoft.com/alazarev/2017/12/29/disposable-finalizers-and-httpclient/)

* * *

## 回答 #5

> 赞同：49
> 
> 时间：2019-10-09T10:44:37.257

我建议你：

```
HttpClient.DefaultRequestHeaders.Add("Authorization", "Bearer <token>"); 
```

然后你可以像这样使用它：

```
var response = await client.GetAsync(url);
if (response.IsSuccessStatusCode)
{
    responseMessage = await response.Content.ReadAsAsync<ResponseMessage>();
} 
```

* * *

## 回答 #6

> 赞同：36
> 
> 时间：2020-04-17T08:27:26.110

如果您想`HttpClient`使用 Bearer Token 发送请求，此代码可能是一个很好的解决方案：

```
var requestMessage = new HttpRequestMessage
{
    Method = HttpMethod.Post,
    Content = new StringContent(".....", Encoding.UTF8, "application/json"),
    RequestUri = new Uri(".....")
};

requestMessage.Headers.Authorization = new AuthenticationHeaderValue("Bearer", "Your token");

var response = await _httpClient.SendAsync(requestMessage); 
```

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2019-03-01T12:44:32.273

我正在设置不记名令牌

```
httpClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", token); 
```

它在一个端点工作，但不是另一个端点。问题是我`b`在`"bearer"`. 现在更改后，它适用于我正在打的两个 api。如果您甚至不将其视为寻找针的干草堆之一，那么容易错过的事情。

确保拥有`"Bearer"`- 有资本。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2018-04-08T07:14:20.070

**使用基本授权和 Json 参数。**

```
using (HttpClient client = new HttpClient())
{
    var request_json = "your json string";

    var content = new StringContent(request_json, Encoding.UTF8, "application/json");

    var authenticationBytes = Encoding.ASCII.GetBytes("YourUsername:YourPassword");

    client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic",
            Convert.ToBase64String(authenticationBytes));
    client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

    var result = await client.PostAsync("YourURL", content);

    var result_string = await result.Content.ReadAsStringAsync();
} 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2018-03-19T03:53:26.620

使用 C# HttpClient 设置基本身份验证。以下代码对我有用。

```
 using (var client = new HttpClient())
        {
            var webUrl ="http://localhost/saleapi/api/";
            var uri = "api/sales";
            client.BaseAddress = new Uri(webUrl);
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
            client.DefaultRequestHeaders.ConnectionClose = true;

            //Set Basic Auth
            var user = "username";
            var password = "password";
            var base64String =Convert.ToBase64String( Encoding.ASCII.GetBytes($"{user}:{password}"));
            client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic",base64String);

            var result = await client.PostAsJsonAsync(uri, model);
            return result;
        } 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2019-11-26T13:36:32.593

如果要重用`HttpClient`，建议不要使用 ，`DefaultRequestHeaders`因为它们用于随每个请求一起发送。

你可以试试这个：

```
var requestMessage = new HttpRequestMessage
    {
        Method = HttpMethod.Post,
        Content = new StringContent("...", Encoding.UTF8, "application/json"),
        RequestUri = new Uri("...")
    };

requestMessage.Headers.Authorization = new AuthenticationHeaderValue("Basic", 
    Convert.ToBase64String(System.Text.ASCIIEncoding.ASCII.GetBytes($"{user}:{password}")));

var response = await _httpClient.SendAsync(requestMessage); 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2017-12-23T06:33:04.960

我就是这样做的：

```
using (HttpClient httpClient = new HttpClient())
{
   Dictionary<string, string> tokenDetails = null;
   var messageDetails = new Message { Id = 4, Message1 = des };
   HttpClient client = new HttpClient();
   client.BaseAddress = new Uri("http://localhost:3774/");
   var login = new Dictionary<string, string>
       {
           {"grant_type", "password"},
           {"username", "sa@role.com"},
           {"password", "lopzwsx@23"},
       };
   var response = client.PostAsync("Token", new FormUrlEncodedContent(login)).Result;
   if (response.IsSuccessStatusCode)
   {
      tokenDetails = JsonConvert.DeserializeObject<Dictionary<string, string>>(response.Content.ReadAsStringAsync().Result);
      if (tokenDetails != null && tokenDetails.Any())
      {
         var tokenNo = tokenDetails.FirstOrDefault().Value;
         client.DefaultRequestHeaders.Add("Authorization", "Bearer " + tokenNo);
         client.PostAsJsonAsync("api/menu", messageDetails)
             .ContinueWith((postTask) => postTask.Result.EnsureSuccessStatusCode());
      }
   }
} 
```

这个youtube视频对我帮助很大。请检查一下。 [https://www.youtube.com/watch?v=qCwnU06NV5Q](https://www.youtube.com/watch?v=qCwnU06NV5Q)

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2019-01-22T18:10:44.343

6 年后，但添加这个以防它帮助某人。

[https://www.codeproject.com/Tips/996401/Authenticate-WebAPIs-with-Basic-and-Windows-Authen](https://www.codeproject.com/Tips/996401/Authenticate-WebAPIs-with-Basic-and-Windows-Authen)

```
var authenticationBytes = Encoding.ASCII.GetBytes("<username>:<password>");
using (HttpClient confClient = new HttpClient())
{
  confClient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", 
         Convert.ToBase64String(authenticationBytes));
  confClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue(Constants.MediaType));  
  HttpResponseMessage message = confClient.GetAsync("<service URI>").Result;
  if (message.IsSuccessStatusCode)
  {
    var inter = message.Content.ReadAsStringAsync();
    List<string> result = JsonConvert.DeserializeObject<List<string>>(inter.Result);
  }
} 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2021-03-02T22:34:33.990

对于现在（2021 年）发现这个旧线程的任何人，请查看[此文档](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/http-requests?view=aspnetcore-5.0)，了解`HttpClientFactory`哪些是可注入的，并且还将在每个请求上重新运行，避免过期令牌，这将使其对不记名令牌、生成的客户端、池等有用。

TL;DR：使用`HttpClientFactory`和 a`DelegatingHandler`将作为与您配置的客户端的所有传出请求的中间件。

这就是我为 Azure Identity（由 Azure 管理）添加我的持有者的方式，但是您当然可以随心所欲地获取令牌；

```
using Microsoft.Azure.Services.AppAuthentication;
using System.Net.Http;
using System.Threading;
using System.Threading.Tasks;

public class BearerTokenHandler : DelegatingHandler
    {
        public BearerTokenHandler(AzureServiceTokenProvider tokenProvider, string resource)
        {
            TokenProvider = tokenProvider;
            Resource = resource;
        }

        public AzureServiceTokenProvider TokenProvider { get; }
        public string Resource { get; }

        protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
            if (!request.Headers.Contains("Authorization"))
            {
                // Fetch your token here
                string token = await TokenProvider.GetAccessTokenAsync(Resource);
                request.Headers.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("Bearer", token);
            }

            return await base.SendAsync(request, cancellationToken);
        }
    } 
```

我在 Startup 中像这样配置我的类型化客户端（使用 NSwag 生成）；

```
 var accessTokenProvider = new AzureServiceTokenProvider("<your-connection-string-for-access-token-provider>");

  builder.Services.AddHttpClient<IOrdersClient, OrdersClient>().ConfigureHttpClient(async conf =>
            {
                conf.BaseAddress = new Uri("<your-api-base-url>");
            }).AddHttpMessageHandler(() => new BearerTokenHandler(accessTokenProvider, "https://your-azure-tenant.onmicrosoft.com/api")); 
```

然后你可以在任何你喜欢的地方注入你的 IOrdersClient 并且所有请求都会有承载。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2019-07-13T18:53:25.833

## UTF8 选项

```
request.DefaultRequestHeaders.Authorization = 
new AuthenticationHeaderValue(
    "Basic", Convert.ToBase64String(
        System.Text.Encoding.UTF8.GetBytes(
           $"{yourusername}:{yourpwd}"))); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2020-01-22T07:36:58.363

BaseWebApi.cs

```
public abstract class BaseWebApi
{
    //Inject HttpClient from Ninject
    private readonly HttpClient _httpClient;
    public BaseWebApi(HttpClient httpclient)
    {
        _httpClient = httpClient;
    }

    public async Task<TOut> PostAsync<TOut>(string method, object param, Dictionary<string, string> headers, HttpMethod httpMethod)
    {
        //Set url

        HttpResponseMessage response;
        using (var request = new HttpRequestMessage(httpMethod, url))
        {
            AddBody(param, request);
            AddHeaders(request, headers);
            response = await _httpClient.SendAsync(request, cancellationToken);
        }

        if(response.IsSuccessStatusCode)
        {
             return await response.Content.ReadAsAsync<TOut>();
        }
        //Exception handling
    }

    private void AddHeaders(HttpRequestMessage request, Dictionary<string, string> headers)
    {
        request.Headers.Accept.Clear();
        request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

        if (headers == null) return;

        foreach (var header in headers)
        {
            request.Headers.Add(header.Key, header.Value);
        }
    }

    private static void AddBody(object param, HttpRequestMessage request)
    {
        if (param != null)
        {
            var content = JsonConvert.SerializeObject(param);
            request.Content = new StringContent(content);
            request.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json");
        }
    } 
```

SubWebApi.cs

```
public sealed class SubWebApi : BaseWebApi
{
    public SubWebApi(HttpClient httpClient) : base(httpClient) {}

    public async Task<StuffResponse> GetStuffAsync(int cvr)
    {
        var method = "get/stuff";
        var request = new StuffRequest 
        {
            query = "GiveMeStuff"
        }
        return await PostAsync<StuffResponse>(method, request, GetHeaders(), HttpMethod.Post);
    }
    private Dictionary<string, string> GetHeaders()
    {
        var headers = new Dictionary<string, string>();
        var basicAuth = GetBasicAuth();
        headers.Add("Authorization", basicAuth);
        return headers;
    }

    private string GetBasicAuth()
    {
        var byteArray = Encoding.ASCII.GetBytes($"{SystemSettings.Username}:{SystemSettings.Password}");
        var authString = Convert.ToBase64String(byteArray);
        return $"Basic {authString}";
    }
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-07-11T12:06:02.813

使用程序集`AuthenticationHeaderValue`类`System.Net.Http`

```
public AuthenticationHeaderValue(
    string scheme,
    string parameter
) 
```

我们可以像这样设置或更新现有的`Authorization`标头`httpclient`：

```
httpclient.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", TokenResponse.AccessToken); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-08-01T16:35:11.443

这可能有效，如果您从服务接收 json 或 xml，并且我认为这可以让您了解标头和 T 类型的工作方式，如果您使用函数 MakeXmlRequest(put results in xmldocumnet) 和 MakeJsonRequest （将 json 放入您希望与 json 响应具有相同结构的类中）以另一种方式

```
/*-------------------------example of use-------------*/
MakeXmlRequest<XmlDocument>("your_uri",result=>your_xmlDocument_variable =     result,error=>your_exception_Var = error);

MakeJsonRequest<classwhateveryouwant>("your_uri",result=>your_classwhateveryouwant_variable=result,error=>your_exception_Var=error)
/*-------------------------------------------------------------------------------*/

public class RestService
{
    public void MakeXmlRequest<T>(string uri, Action<XmlDocument> successAction, Action<Exception> errorAction)
    {
        XmlDocument XMLResponse = new XmlDocument();
        string wufooAPIKey = ""; /*or username as well*/
        string password = "";
        StringBuilder url = new StringBuilder();
        url.Append(uri);
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url.ToString());
        string authInfo = wufooAPIKey + ":" + password;
        authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
        request.Timeout = 30000;
        request.KeepAlive = false;
        request.Headers["Authorization"] = "Basic " + authInfo;
        string documento = "";
        MakeRequest(request,response=> documento = response,
                            (error) =>
                            {
                             if (errorAction != null)
                             {
                                errorAction(error);
                             }
                            }
                   );
        XMLResponse.LoadXml(documento);
        successAction(XMLResponse);
    }

    public void MakeJsonRequest<T>(string uri, Action<T> successAction, Action<Exception> errorAction)
    {
        string wufooAPIKey = "";
        string password = "";
        StringBuilder url = new StringBuilder();
        url.Append(uri);
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url.ToString());
        string authInfo = wufooAPIKey + ":" + password;
        authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
        request.Timeout = 30000;
        request.KeepAlive = false;
        request.Headers["Authorization"] = "Basic " + authInfo;
       // request.Accept = "application/json";
      //  request.Method = "GET";
        MakeRequest(
           request,
           (response) =>
           {
               if (successAction != null)
               {
                   T toReturn;
                   try
                   {
                       toReturn = Deserialize<T>(response);
                   }
                   catch (Exception ex)
                   {
                       errorAction(ex);
                       return;
                   }
                   successAction(toReturn);
               }
           },
           (error) =>
           {
               if (errorAction != null)
               {
                   errorAction(error);
               }
           }
        );
    }
    private void MakeRequest(HttpWebRequest request, Action<string> successAction, Action<Exception> errorAction)
    {
        try{
            using (var webResponse = (HttpWebResponse)request.GetResponse())
            {
                using (var reader = new StreamReader(webResponse.GetResponseStream()))
                {
                    var objText = reader.ReadToEnd();
                    successAction(objText);
                }
            }
        }catch(HttpException ex){
            errorAction(ex);
        }
    }
    private T Deserialize<T>(string responseBody)
    {
        try
        {
            var toReturns = JsonConvert.DeserializeObject<T>(responseBody);
             return toReturns;
        }
        catch (Exception ex)
        {
            string errores;
            errores = ex.Message;
        }
        var toReturn = JsonConvert.DeserializeObject<T>(responseBody);
        return toReturn;
    }
}
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-01-23T13:18:39.053

使用现有库可能更容易。

例如，下面的扩展方法是使用 Identity Server 4 [https://www.nuget.org/packages/IdentityModel/添加的](https://www.nuget.org/packages/IdentityModel/)

```
 public static void SetBasicAuthentication(this HttpClient client, string userName, string password);
    //
    // Summary:
    //     Sets a basic authentication header.
    //
    // Parameters:
    //   request:
    //     The HTTP request message.
    //
    //   userName:
    //     Name of the user.
    //
    //   password:
    //     The password.
    public static void SetBasicAuthentication(this HttpRequestMessage request, string userName, string password);
    //
    // Summary:
    //     Sets a basic authentication header for RFC6749 client authentication.
    //
    // Parameters:
    //   client:
    //     The client.
    //
    //   userName:
    //     Name of the user.
    //
    //   password:
    //     The password.
    public static void SetBasicAuthenticationOAuth(this HttpClient client, string userName, string password);
    //
    // Summary:
    //     Sets a basic authentication header for RFC6749 client authentication.
    //
    // Parameters:
    //   request:
    //     The HTTP request message.
    //
    //   userName:
    //     Name of the user.
    //
    //   password:
    //     The password.
    public static void SetBasicAuthenticationOAuth(this HttpRequestMessage request, string userName, string password);
    //
    // Summary:
    //     Sets an authorization header with a bearer token.
    //
    // Parameters:
    //   client:
    //     The client.
    //
    //   token:
    //     The token.
    public static void SetBearerToken(this HttpClient client, string token);
    //
    // Summary:
    //     Sets an authorization header with a bearer token.
    //
    // Parameters:
    //   request:
    //     The HTTP request message.
    //
    //   token:
    //     The token.
    public static void SetBearerToken(this HttpRequestMessage request, string token);
    //
    // Summary:
    //     Sets an authorization header with a given scheme and value.
    //
    // Parameters:
    //   client:
    //     The client.
    //
    //   scheme:
    //     The scheme.
    //
    //   token:
    //     The token.
    public static void SetToken(this HttpClient client, string scheme, string token);
    //
    // Summary:
    //     Sets an authorization header with a given scheme and value.
    //
    // Parameters:
    //   request:
    //     The HTTP request message.
    //
    //   scheme:
    //     The scheme.
    //
    //   token:
    //     The token.
    public static void SetToken(this HttpRequestMessage request, string scheme, string token); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-06-03T09:45:19.777

如果您使用 Visual Studio IISExpress 调试模式并连接到 HTTP 端口而不是 HTTPS 端口，您可能会发现正在删除 auth 标头。

切换到 SLL 连接，它们将再次出现。

不确定原因，可能是设置重定向了 http 流量并导致身份验证被删除。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2022-02-21T13:21:09.077

我遇到了这个旧线程。我遇到的问题是我知道使用静态 HttpClient，但我的令牌需要每 59 分钟刷新一次。

所以我可以使用 HttpClientFactory，但是因为我的一个项目仍在 .NET 4.8 中，所以我创建了一个继承自 HttpClient 的类，所以我在所有项目中都有类似的代码。需要一个秘密才能获得令牌（我正在使用 identityserver4）。

然后我将其设置为 DI 中的单例（我在这里使用 Ninject）：

```
Bind<MyHttpClient>().ToMethod(c =>
{
    var accessKey = ConfigurationManager.AppSettings["AccessKey"];

    var client = new MyHttpClient(accessKey)
    {
        BaseAddress = new Uri(MyUrls.MyApiBaseUrl)
    };

    client.DefaultRequestHeaders.Accept.Clear();
    client.DefaultRequestHeaders.Accept.Add(new System.Net.Http.Headers.MediaTypeWithQualityHeaderValue("application/json"));

    return client;
}).InSingletonScope(); 
```

然后是类本身 - 以它用于访问的 API 命名：

```
public class MyHttpClient : BaseHttpClient
{
     private static readonly HttpClient _authHttpClient = new HttpClient();
     private string _secret;

     public MyHttpClient(string secret)
     {
         _secret = secret;
     }

    /// <summary>
    /// Add the token to each and every request, cached for 1 minute less than the token's lifetime
    /// </summary>
    /// <param name="request"></param>
    /// <param name="cancellationToken"></param>
    /// <returns></returns>
    /// <exception cref="Exception"></exception>
    public override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        cancellationToken.ThrowIfCancellationRequested();

        var cacheSeconds = 3600 - 60; // Default of 59 minutes

        var token = CacheHelper<string>.Get("MyToken", cacheSeconds * 60, () =>
        {
            var authorityUrl = MyUrls.AuthServerUrl;

            // discover endpoints from metadata
            DiscoveryDocumentResponse disco;
            disco = _authHttpClient.GetDiscoveryDocumentAsync(authorityUrl).Result;
            if (disco.IsError)
            {
                throw new Exception("Error getting discovery document: " + disco.Error);
            }

            // request token
            var tokenResponse = _authHttpClient.RequestClientCredentialsTokenAsync(new ClientCredentialsTokenRequest
            {
                Address = disco.TokenEndpoint,

                ClientId = "myapp",
                ClientSecret = _secret,
                Scope = "myapi"
            }).Result;

            if (tokenResponse.IsError)
            {
                throw new Exception("Error getting token: " + tokenResponse.Error);
            }

            if (tokenResponse.ExpiresIn < cacheSeconds + 60)
            {
                throw new Exception($"Token expires in {tokenResponse.ExpiresIn}s, which is less than {cacheSeconds + 60}");
            }

            if (tokenResponse.ExpiresIn > cacheSeconds + 60)
            {
                Log.Warn().Message($"Token expiry in {tokenResponse.ExpiresIn}s, which is greater than {cacheSeconds}").Write();
            }

            return tokenResponse.AccessToken;
        });

        // THIS IS THE BIT - Assign this inside a SendAsync override and you are done!
        request.Headers.Authorization = new AuthenticationHeaderValue("Bearer", token);
        return base.SendAsync(request, cancellationToken);
    }

} 
```

最后，为了完整起见，我的 CacheHelper 类如下所示：

```
public static class CacheHelper<T>
{
    private static readonly object _locker = new object();

    public static T Get(string cacheName, int cacheTimeoutSeconds, Func<T> func)
    {
        var obj = MemoryCache.Default.Get(cacheName, null);
        if (obj != null) return (T)obj;

        lock (_locker)
        {
            obj = MemoryCache.Default.Get(cacheName, null);
            if (obj == null)
            {
                obj = func();
                var cip = new CacheItemPolicy
                {
                    AbsoluteExpiration = new DateTimeOffset(DateTime.UtcNow.AddSeconds(cacheTimeoutSeconds))
                };
                MemoryCache.Default.Set(cacheName, obj, cip);
            }
        }

        return (T)obj;
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-26T13:50:27.617

您也可以使用以下示例，它使用 IHttpClientFactory：

```
 readonly IHttpClientFactory _httpClientFactory;

    public HTTPClientHelper(IHttpClientFactory httpClientFactory, string clientName = null)
    {
        this._httpClientFactory = httpClientFactory;
    }

    public Task<T> GetAsync(string url, string token) {

        var client = _httpClientFactory.CreateClient(_clientName);

        client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue(JwtBearerDefaults.AuthenticationScheme, token);

        using (HttpResponseMessage response = await _client.GetAsync(url)){
          ......
        }
     } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-04-25T02:20:30.523

首先，我不会`HttpClient`直接使用。犯错太容易了——尤其是在头球方面。不是不可变的`DefaultHeadersCollection`，也不是线程安全的，因为应用程序的其他部分可以更改您的标题。最好在拨打电话时设置标题。如果您正在使用抽象，并且建议这样做，因为该区域中的类有点混乱，您可能希望有一个标题集合并`HttpRequestMessage`在发送之前将它们放在您的上面。您需要确保将内容标题放在内容上，而不是消息上。

[代码参考](https://github.com/MelbourneDeveloper/RestClient.Net/blob/e7edf5c1b40305732af3b0bd10c548996889ba97/src/RestClient.Net/GetHttpRequestMessage.cs#L61)

```
foreach (var headerName in request.Headers.Names)
{
    //"Content-Type"
    if (string.Compare(headerName, HeadersExtensions.ContentTypeHeaderName, StringComparison.OrdinalIgnoreCase) == 0)
    {
        //Note: not sure why this is necessary...
        //The HttpClient class seems to differentiate between content headers and request message headers, but this distinction doesn't exist in the real world...
        //TODO: Other Content headers
        httpContent?.Headers.Add(HeadersExtensions.ContentTypeHeaderName, request.Headers[headerName]);
    }
    else
    {
        httpRequestMessage.Headers.Add(headerName, request.Headers[headerName]);
    }
} 
```

这是一个数据结构，您可以使用它来发送包含标头的请求。

[代码参考](https://github.com/MelbourneDeveloper/RestClient.Net/blob/e7edf5c1b40305732af3b0bd10c548996889ba97/src/RestClient.Net.Abstractions/IRequest.cs#L6)

```
public interface IRequest
{
    CancellationToken CancellationToken { get; }
    string? CustomHttpRequestMethod { get; }
    IHeadersCollection Headers { get; }
    HttpRequestMethod HttpRequestMethod { get; }
    AbsoluteUrl Uri { get; }
}

public interface IRequest<TBody> : IRequest
{
    TBody? BodyData { get; }
} 
```

并且，一个标题集合：

[代码参考](https://github.com/MelbourneDeveloper/RestClient.Net/blob/e7edf5c1b40305732af3b0bd10c548996889ba97/src/RestClient.Net.Abstractions/HeadersCollection.cs#L8)

```
public sealed class HeadersCollection : IHeadersCollection
{
    #region Fields
    private readonly IDictionary<string, IEnumerable<string>> dictionary;
    #endregion

    #region Public Constructors

    public HeadersCollection(IDictionary<string, IEnumerable<string>> dictionary) => this.dictionary = dictionary;

    public HeadersCollection(string key, string value) : this(ImmutableDictionary.CreateRange(
                new List<KeyValuePair<string, IEnumerable<string>>>
                {
                    new(key, ImmutableList.Create(value))
                }
                ))
    {
    }

    #endregion Public Constructors

    #region Public Properties
    public static HeadersCollection Empty { get; } = new HeadersCollection(ImmutableDictionary.Create<string, IEnumerable<string>>());
    public IEnumerable<string> Names => dictionary.Keys;
    IEnumerable<string> IHeadersCollection.this[string name] => dictionary[name];
    #endregion Public Properties

    #region Public Methods
    public bool Contains(string name) => dictionary.ContainsKey(name);

    public IEnumerator<KeyValuePair<string, IEnumerable<string>>> GetEnumerator() => dictionary.GetEnumerator();

    IEnumerator IEnumerable.GetEnumerator() => dictionary.GetEnumerator();
    public override string ToString() => string.Join("\r\n", dictionary.Select(kvp => $"{kvp.Key}: {string.Join(", ", kvp.Value)}\r\n"));
    #endregion
} 
```

[在此处](https://github.com/MelbourneDeveloper/RestClient.Net/tree/5/develop)查看所有工作代码和示例。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-04-23T21:27:58.350

Oauth 流程很复杂，总是存在一个或另一个错误的空间。我的建议是始终使用样板代码和一组库进行 OAuth 身份验证流程。这将使您的生活更轻松。

这是该组库的链接。[.Net 的 OAuth 库](https://oauth.net/code/dotnet/)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2019-09-03T13:13:34.087

在 net .core 中，您可以使用

```
var client = new HttpClient();
client.SetBasicAuthentication(userName, password); 
```

或者

```
var client = new HttpClient();
client.SetBearerToken(token); 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2019-11-19T21:58:48.110

```
static async Task<AccessToken> GetToken()
{
        string clientId = "XXX";
        string clientSecret = "YYY";
        string credentials = String.Format("{0}:{1}", clientId, clientSecret);

        using (var client = new HttpClient())
        {
            client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", Convert.ToBase64String(Encoding.UTF8.GetBytes(credentials)));
            List<KeyValuePair<string, string>> requestData = new List<KeyValuePair<string, string>>();
            requestData.Add(new KeyValuePair<string, string>("grant_type", "client_credentials"));
            FormUrlEncodedContent requestBody = new FormUrlEncodedContent(requestData);
            var request = await client.PostAsync("https://accounts.spotify.com/api/token", requestBody);
            var response = await request.Content.ReadAsStringAsync();
            return JsonConvert.DeserializeObject<AccessToken>(response);
        }
    } 
```

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2014-05-13T09:01:14.307

这可能有助于设置标题：

```
WebClient client = new WebClient();

string authInfo = this.credentials.UserName + ":" + this.credentials.Password;
authInfo = Convert.ToBase64String(Encoding.Default.GetBytes(authInfo));
client.Headers["Authorization"] = "Basic " + authInfo; 
```

# java - 使用放心从 XML 映射

> ID：14627404
> 
> 赞同：1
> 
> 时间：2013-01-31T13:53:09.040
> 
> 标签：java, groovy, rest-assured, gpath

我正在尝试使用放心设置集成测试。在我的一个测试用例中，我必须使用可靠的 XmlPath 验证 XML 文件的某些属性，这似乎使用了 Groovy 的 GPath。

我有一个具有以下结构的 XML 文档（ID 是唯一的）：

```
<rootelement>
    <someelement id="1234" type="a">
      <property key="hello" value="world" />
      <property key="name" value="a name" />
      <property key="status" value="new" />
      <child target="645823" type="a" />
      <child target="7482" type="b" />
      <child target="8942" type="c">
         <property key="pro" value="yes" />
      </child>
    </someelement>
    <someelement>
        ...
    </someelement>
<rootelement> 
```

理想情况下，给定一个 someelement id，我想得到一个它的属性的映射，即假设给定的 someelement id 是 1234 我想得到一个如下所示的映射： `{"hello": "world", "name": "a name", "status": "new"}`。我该怎么做？我知道 XmlPath 中有一个 getMap 方法，但我不知道必须使用哪个表达式。

如果无法将属性作为地图获取，我会满足于获取键列表和值列表。同样，我不知道我必须使用哪种表达方式。我尝试过这样的事情：

```
xmlPath.getList("**.find {it.@id = '1234'}.property.@key", String.class) 
```

但是，它什么也没找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:00:13.560

您可以使用 Groovy 执行此操作（假设`xml`是包含您的 xml 的字符串）

```
def map = new XmlParser().parseText( xml )
                         .someelement
                         .find { it.@id == '1234' }
                         .property
                         .collectEntries { [ it.@key, it.@value ] }

assert map == [ hello:'world', name:'a name', status:'new' ] 
```

从来没有使用过放心，所以我在那个方向上帮不上什么忙:-(

# loading - 某些计算机的站点加载问题

> ID：14627406
> 
> 赞同：0
> 
> 时间：2013-01-31T13:53:20.163
> 
> 标签：loading

我有一个可以在任何计算机上运行的网站。

但是只有我的一些朋友报告了我的网站的一个常见问题，即无法完全加载到他们的计算机中。也就是说，它只加载站点背景，并没有进一步加载，也不能加载body。我刚刚在那些计算机上阅读了页面的源代码，我看到`<head>`页面的一部分是唯一加载的内容！

这很奇怪！只有一些人有这个问题，没有人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:02:25.223

您的站点返回 500 内部服务器错误。你的问题在服务器端。尝试检查您的服务器日志，看看您是否可以找到问题

# spring - 如何将 Jersey 2 与 Spring IoC 容器一起使用

> ID：14627409
> 
> 赞同：13
> 
> 时间：2013-01-31T13:53:32.520
> 
> 标签：spring, jersey

将春豆注入 Jersey 2 的最佳方法是什么？泽西岛似乎本身不支持这一点。

将这两个框架连接在一起需要什么？在 pom.xml 和 web.xml 中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-12T15:07:48.543

Jersey 2.3 现在有 spring 支持：

[https://jersey.github.io/documentation/latest/user-guide.html#spring](https://jersey.github.io/documentation/latest/user-guide.html#spring)

如文档中所述

> Spring扩展模块配置基于注解

所以你必须告诉 spring 扫描你的类路径，例如：

```
<context:component-scan base-package="my.package.to.resources"> 
```

并使用弹簧注释来注释您的资源类（我建议使用@Component，然后指定球衣资源范围 @Singleton/@PerLookup/@RequestScoped ）

```
@Component
@Singleton
@Path("example")
public class Example {

    //Spring beans can't be injected directly into JAX-RS classes by using Spring XML configuration
    @Autowired
    private MyOtherBean myOtherBean;

    @GET @Path("hello")
    public String hello() {
        return myOtherBean.hello();
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-10T17:53:30.617

截至 2013 年 6 月，Jersey 2.0 没有官方的 Spring 支持。有两种选择：

1.  从这里使用第三方代码[https://github.com/marko-asplund/jersey/tree/master/ext/jersey-spring](https://github.com/marko-asplund/jersey/tree/master/ext/jersey-spring)
2.  等到 HK2 spring bridge 稳定并记录在案[https://java.net/jira/browse/HK2-40](https://java.net/jira/browse/HK2-40)

也可以看看：

[http://jersey.576304.n2.nabble.com/Spring-framework-support-for-Jersey-2-td7580673.html](http://jersey.576304.n2.nabble.com/Spring-framework-support-for-Jersey-2-td7580673.html)

编辑：Jersey 2.3 现在有弹簧支持，请参阅下面 Fabio 的回答

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2013-01-31T13:58:45.517

您应该能够注释球衣组件，然后使用注释来注入 bean。

```
@Service //(or @Component)
public class MyJerseyService {

    @Autowired
    private MyObj mySpringBean

} 
```

# php - 当通过 mod_php 作为上游运行进程时，fwrite() 挂起，但很好的独奏

> ID：14627411
> 
> 赞同：2
> 
> 时间：2013-01-31T13:53:40.813
> 
> 标签：php, wkhtmltopdf

我似乎在使用 PHP 5.3.10 在 Ubuntu Server 12.04 上通过 proc_open() 运行 wkhtmltopdf 时遇到问题。

仅使用 Apache 运行时（在多台服务器上）似乎发生的情况是进程已成功打开，数据被写入并且 PDF 从进程的另一端出来。

但是，当通过使用 Nginx 作为代理和 Apache 作为上游服务器的设置运行相同的代码时，到 stdin 的 fwrite() 似乎挂起/变得无响应，超过大约 1200 字节。

静态二进制版本 0.10.0-rc2 本身似乎运行良好，并且可以呈现它可以访问的任何页面，所以我不确定是什么导致了这里的问题。

编辑：它似乎不是 Nginx，因为我把它放在 AWS 盒子上的 Apache 前面，它仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:02:25.097

您需要运行“tail -f”并运行 PHP 脚本。希望您会看到出现的错误消息，这将引导您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T13:27:13.563

这是 Nginx 服务器在请求中使用的域名没有特定主机条目的结果。请求进入了一个循环，不断地点击外部地址并重定向到它，而不是在本地解析。

# kendo-ui - KendoUI WCF 服务演示源

> ID：14627413
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:53:48.583
> 
> 标签：kendo-ui, kendo-grid

在哪里可以找到 KendoUI 网格演示中使用的 Nothwind WCF 服务的源文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:58:23.133

我在代码库中找到了一些示例。这不是演示源，但它有很大帮助。

不管怎么说，还是要谢谢你

# javascript - 正则表达式没有检测到字符串中的脏话？

> ID：14627416
> 
> 赞同：1
> 
> 时间：2013-01-31T13:53:54.877
> 
> 标签：javascript, regex

我在这里有一个脚本：

[http://jsfiddle.net/d2rcx/](http://jsfiddle.net/d2rcx/)

它有一个 badWords 数组来比较输入字符串。

如果输入字符串与发誓词字符串完全匹配，则此脚本可以正常工作，但它不会拾取字符串中有更多字符的任何变体，例如发誓词之前的空格。

使用本网站作为参考：[http ://www.zytrax.com/tech/web/regex.htm](http://www.zytrax.com/tech/web/regex.htm)

它说以下正则表达式将检测字符串中的字符串。

```
var regex = new RegExp("/" + badWords[i] + "/g");
        if (fieldValue.match(regex) == true)
            return true; 
```

然而，情况似乎并非如此。

我需要对正则表达式进行什么更改才能使其正常工作。

谢谢

此外，任何解释正则表达式的好链接都比谷歌出现的更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:05:25.100

这是一个更正的 JSFiddle：

[http://jsfiddle.net/d2rcx/5/](http://jsfiddle.net/d2rcx/5/)

有关 RegExp，请参阅以下文档：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

请注意，第二个参数是您应该指定标志的位置（例如“g”或“i”）。例如：

```
new RegExp(badWords[i], 'gi'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:02:37.700

而不是使用正则表达式来执行此操作，您最好只遍历一组坏词并使用 [indexOf] 查找字符串中的实例。（[https://developer.mozilla.org/en-US/docs/JavaScript/参考/Global_Objects/String/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf) )

否则你可以做一个正则表达式......

```
\badword1|badword2|badword3\ 
```

并检查任何匹配。

正则表达式中的单词边界是`\b`这样你可以说

```
\\b(badword1|badword2|badword3)\b\ 
```

这将只匹配整个单词-即斯肯索普就可以了:)

```
var rx = new RegExp("\\b(donkey|twerp|idiot)\\b","i"); // i = case insenstive option

alert(rx.test('you are a twerp')); //true

alert(rx.test('hello idiotstick')); //fasle -not whole word

alert(rx.test('nice "donkey"')); //true 
```

[http://jsfiddle.net/F8svC/](http://jsfiddle.net/F8svC/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T14:03:05.350

请查看[http://www.w3schools.com/jsref/jsref_match.asp](http://www.w3schools.com/jsref/jsref_match.asp)并注意 fieldValue.match() 不会返回布尔值而是匹配数组

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T14:05:51.450

改变这个，这需要一个循环：

```
var regex = new RegExp("/" + badWords[i] + "/g"); 
```

为了这：

```
var regex = new RegExp("/" + badWords.join("|") + "/g"); 
```

将是一个开始。这将一次性完成所有匹配，因为数组变成一个字符串，每个元素由管道分隔。

**[此处为 RegEx 的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)**PS** 参考指南。但是关于某些功能什么是可能的，什么是不可能的，以及什么是好的代码，网上并没有很多明确的信息。我发现了几本最有用的书：David Flanagan 的最新*JavaScript：权威指南*和 Douglas Crockford 的*JavaScript：最有用的 JavaScript 子集的优秀部分*，包括 RegEx。Crockford 的铁路图特别好，但我不确定它们是否可以在任何地方在线获得。**

 ****编辑：** [这是](https://www.inkling.com/read/javascript-good-parts-douglas-crockford-1st/chapter-7/an-example)相关章节的在线副本，包括我提到的一些铁路图，以防万一。**

# c# - C# 未知类型属性

> ID：14627418
> 
> 赞同：2
> 
> 时间：2013-01-31T13:54:14.573
> 
> 标签：c#

我有这样的课：

```
public class Student
{
     private string NumberP;
     public  string Number
     {
       get{return NumberP;}
       set{NumberP=value;}
     }
}
public class School
{
     private string NameP;
     public  string Name
     {
       get{return NameP;}
       set{NameP=value;}
     }
} 
```

我想从另一个类（如（学校或学生））声明一个类型，但我不知道它的类型。

如何声明属性未知类型。下次我会设置未知类型

```
public class MyClass
{
    public UnKnownType
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:57:01.650

由于`Student`and`School`类型之间没有任何关系，因此您可以使用以下`object`类型：

```
public class MyClass
{
    public object SomeProperty { get; set; }
} 
```

并像这样使用：

```
MyClass myClass = new MyClass();
myClass.SomeProperty = new Student(); 
```

或制作包含类[`generic`](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)：

```
public class MyClass<T>
{
    public T SomeProperty { get; set; }
} 
```

然后你可以这样使用：

```
MyClass<Student> myClass = new MyClass<Student>();
myClass.SomeProperty = new Student(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:57:26.120

```
public class MyClass
{
    private object myField = null;

    public object MyProperty
    {
        get { /* ... */ }
        set { /* ... */ }
    }
} 
```

# android - Android：尝试发出 httpPost 请求但不断收到连接超时

> ID：14627431
> 
> 赞同：0
> 
> 时间：2013-01-31T13:54:43.853
> 
> 标签：android, httprequest

我现在真的很痛苦，请帮我解决这个问题。我以前也尝试过向我的本地主机发出 http 请求，一切正常，但现在它不起作用，我不知道为什么。

我正在尝试从以下代码发出请求。

```
 HttpClient httpclient = new DefaultHttpClient();
    String result="";
    try
     {
        HttpPost httppost = new HttpPost("http://[ip]/php/untitled.php");

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
        nameValuePairs.add(new BasicNameValuePair("email",this.userEmail));
        nameValuePairs.add(new BasicNameValuePair("pwd",this.userpassword));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity=response.getEntity();
        if(entity!=null)
        {
              InputStream inputStream=entity.getContent();
              result= convertStreamToString(inputStream);
        }
    }
    catch (ClientProtocolException e) 
    {
        Log.e("errorhai",e.getMessage());
    }
    catch (IOException e) 
    {
        Log.e("errorhai",e.getMessage());
    }
        return result; 
```

我还添加了互联网权限，但它仍然一直说

```
Connect to [ip] timed out. 
```

当我在浏览器中输入网址时，它工作正常，但在这里不起作用。请告诉我这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:05:01.300

您的问题可能与登录有关。您的脚本是否需要先发制人的身份验证？您是否有登录失败的错误页面？

为了请求具有抢先式 http 基本身份验证的页面，我正在使用以下有效代码。试试看，如果它也适合你。

```
 DefaultHttpClient httpclient         = null;
    HttpParams        params             = new BasicHttpParams();
    HttpResponse      response           = null;
    HttpEntity        entity             = null;
    // Set connection parameter
    params.setParameter(HttpProtocolParams.USE_EXPECT_CONTINUE, false);
    HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
    HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
    httpclient = new DefaultHttpClient(params);
    // Create a post statement
    HttpPost httppost = new HttpPost(Constants.urlLogin);
    httppost.getParams().setParameter(ClientPNames.COOKIE_POLICY,   CookiePolicy.RFC_2965);
    httppost.getParams().setParameter("http.protocol.single-cookie-header", true);
    httppost.getParams().setParameter(ClientPNames.COOKIE_POLICY, CookiePolicy.BROWSER_COMPATIBILITY);
    List<NameValuePair> nvps = new ArrayList<NameValuePair>();
    nvps.add(new BasicNameValuePair("login_name", this.username));
    nvps.add(new BasicNameValuePair("login_passwd", this.userpassword));
    httppost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));
    response = httpclient.execute(httppost);
    entity = response.getEntity();
    int statusCode = response.getStatusLine().getStatusCode();
    String loadedContent = null;
    if (entity != null)
    {
        loadedContent = EntityUtils.toString(entity, HTTP.UTF_8);
        // loadedContent =
        // Helper.convertStreamToString(entity.getContent());
        entity.consumeContent();
    }
    if (statusCode != (HttpStatus.SC_OK))
    {
        throw new ServerCommunicationErrorException();
    } else if (!loadedContent.contains("Logout"))
    {
        // Login failed
        throw new LoginFailedException();
    } 
```

如您所见，如果登录无法确定登录过程，我会得到一个“未登录”页面。此外，我设置了一些参数，这对您来说可能也很有趣。您可以[在此处](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/params/HttpProtocolParams.html)查看有关参数的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:23:39.960

您可以设置超时参数来处理此类异常：

```
HttpParams httpParameters = new BasicHttpParams();

        /* Set the timeout in milliseconds until a connection is established.
            The default value is zero, that means the timeout is not used.*/  

        int timeoutConnection = 60*1000*1;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);

        /* Set the default socket timeout (SO_TIMEOUT) 
            in milliseconds which is the timeout for waiting for data.  */
        int timeoutSocket = 60*1000*1;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
        HttpClient client = new DefaultHttpClient(httpParameters);

        //HttpClient client = new DefaultHttpClient();
        HttpResponse httpResponse;
        try {
            /** Finally, we send our request using HTTP. This is the synchronous
                long operation that we need to run on this thread. */
            httpResponse = client.execute(request);

            /*int responseCode = httpResponse.getStatusLine().getStatusCode();
            String message = httpResponse.getStatusLine().getReasonPhrase();*/

            HttpEntity entity = httpResponse.getEntity();

            if (entity != null) {
                InputStream instream = entity.getContent();
                String res = convertStreamToString(instream);
                MLog.v("HTTP RESPONSE : ", "Res :-"+res);

                if(!res.trim().equalsIgnoreCase("[]")){
                    response.setResult(res);
                    response.setSuccess(true);
                }else{
                    response.setSuccess(false);
                    response.setErrorMessage(AppConstant.RECORD_NOT_FOUND);
                }
                /** Closing the input stream will trigger connection release */
                instream.close();
            }else{
                response.setSuccess(false);
                response.setErrorMessage(AppConstant.NETWORK_ERROR);
            }
        }   
        catch (Exception e) {
            //client.getConnectionManager().shutdown();
            e.printStackTrace();

            response.setSuccess(false);
            response.setErrorMessage(AppConstant.NETWORK_ERROR);
        }

        //you can again try to send request , if your response is not sucess.
        //retryHttpRequestIfNotSucess(); 
```

# java - 按语言搜索推特

> ID：14627437
> 
> 赞同：2
> 
> 时间：2013-01-31T13:55:07.583
> 
> 标签：java, twitter, twitter4j

在 twitter 中，通过使用 lang 运算符，您可以搜索从特定语言检索推文：例如，以下搜索将仅返回英文推文：

```
https://twitter.com/search?q=lang:en 
```

有没有办法使用 twitter api 来实现这一点，尤其是使用 twitter4j。我知道搜索有一个语言属性，但它还需要至少一个关键字才能进行搜索，我想按特定语言搜索而不给出任何关键字查询。java驱动程序中的以下命令返回以下错误：

```
Query searchQuery = new Query() //
                        .count(resultsPerPage) //
                        .since(since)//
                        .lang("en");

400:The request was invalid. An accompanying error message will explain why. This is the status code will be returned during version 1.0 rate limiting(https://dev.twitter.com/pages/rate-limiting). In API v1.1, a request without authentication is considered invalid and you will get this response.
message - Query parameters are missing
code - 25 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:37:29.680

您必须通过与您在 twitter 搜索中使用的相同的方法，您的查询将类似于：

```
new Query("lang:en") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-21T09:20:32.587

使用 twitter4j，

`Query query = new Query(); query.setLang("en"); query.setQuery(searchQuery);`

# c# - C 和 C# 互操作的问题

> ID：14627443
> 
> 赞同：3
> 
> 时间：2013-01-31T13:55:23.843
> 
> 标签：c#, c, dll, interop, mingw

从我的 C# 代码调用 C 函数时遇到问题。我想为 VLC 播放器添加一些功能（我们通过 vlcdotnet 在我们的软件中使用它）并使用 mingw 在我的 ubuntu 12.10 for windows 上交叉编译它。我写了一个函数，我们称之为 Foo：

```
__declspec(dllexport) void Foo(vlc_object_t* bar); 
```

现在我想从 C# 调用它：

```
[LibVlcFunction("Foo")]
[UnmanagedFunctionPointer(CallingConvention.StdCall)]
public delegate void Foo(IntPtr pointer);
........
public LibVlcFunction<Foo> Foo { get; private set; }
......
Foo = new LibVlcFunction<Foo>(myLibVlcCoreDllHandle, VlcVersion); 
```

它失败了。在 LibVlcFunction 的构造函数中，我们结合了 GetProcAddress 和 GetDelegateForFunctionPointer。GetProcAddress 因“函数 'Foo' 的地址不存在......”而失败，但 dumpbin 和 dep。沃克说功能存在，她的名字没有被破坏。我试图编写一个加载 libvlc.dll 并获取指向我的函数的指针的 C++ 应用程序，它可以工作。但在 C# 中它失败了。我该怎么办？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:30:14.260

尝试不使用 stdcall，而是使用 cdecl，如下所示：

```
 extern "C" __declspec(dllexport) void Foo(vlc_object_t* bar); 
```

您的平台调用调用，如下所示：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;
using System.Runtime.CompilerServices;

public class libvlc
{
    [DllImport("the-vlc.dll", EntryPoint = "Foo")]
    extern public static void Foo( IntPtr bar );
} 
```

您将 vlc_object_t* 视为不透明句柄。你只是传递它们。这假设 vlc_object_t 在您的 VLC 共享库（即在 DLL 中）中分配和释放。

# c# - 如何打破动作链过滤器

> ID：14627445
> 
> 赞同：2
> 
> 时间：2013-01-31T13:55:26.703
> 
> 标签：c#, asp.net-mvc, action-filter

我有 2 个动作过滤器：

```
[Auth]
[Check]
public ActionResult Home()
{
//...
} 
```

我需要首先设置 CheckAttr 并打破 AuthAttr。

我不记得该怎么做。请帮我。

例子：

请求操作主页 - > 第一项工作 Auth 过滤器和我需要重定向到另一个操作的逻辑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:04:10.060

[`Result`](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionexecutingcontext.result%28v=vs.108%29.aspx)您可以通过设置以下属性来短路整个执行`filterContext`：

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
{
    filterContext.Result = new JsonResult
    {
        Data = "hello",
        JsonRequestBehavior = JsonRequestBehavior.AllowGet
    };
} 
```

在此示例中，我返回了 JsonResult，但您可以返回任何您喜欢的 ActionResult：ViewResult、PartialViewResult、RedirectToRouteResult、...

分配 Result 属性后，将不再为此上下文执行过滤器。动作执行本身也会短路。

还要记住，如果您的操作过滤器是从同一类型派生的，则无法保证它们将按什么顺序执行，除非您手动为`Order`每个过滤器分配属性。当然，如果它们是不同的类型，例如`IAuthorizationFilter`or `IActionFilter`，很明显授权过滤器将在任何操作过滤器之前运行。这是设计使然。

另一方面，如果您只是试图阻止其他操作过滤器执行但操作本身应该执行，恐怕没有办法实现这一点，您将不得不重新考虑您对这些过滤器的设计。

# java - 如何在 CQ5 中构建服务以及如何激活该服务

> ID：14627447
> 
> 赞同：1
> 
> 时间：2013-01-31T13:55:28.953
> 
> 标签：java, jsp, maven, osgi, aem

这些天我正在学习OSGI，CQ5。我正在尝试构建一个具有服务的捆绑包（我的第一个代码）。我成功构建了一个捆绑包并将该捆绑包上传到 CQ5 上，然后也安装了它。

但组件仅显示**已注册**，未**激活**。为什么 ？

我也想激活这个服务。我怎样才能做到这一点 ？网上有人说做jsp。我也这样做，但没有得到任何回应。帮我解决这个问题。我花了很多时间，大量搜索，但我没有得到任何解决方案。

如何在 CQ5、CRXDE(Adobe) 中使用我的服务。

**JSP 代码是：-**

```
<% var service =   sling.getService(Packages.mh.osgitest.SayHello); %> 
<%= service.sayHelloTest() %> 
```

上面的代码不起作用。

这些截图是

**捆** ![在此处输入图像描述](../Images/8c48ebf773ae762f7df76fe26ac3e379.png)

**零件** ![在此处输入图像描述](../Images/cf16e7e356a6c93dbeffba07dcfad8aa.png)

**服务** ![在此处输入图像描述](../Images/b52abbb030fe98f1e8dc2bd357579b2f.png)

我的代码如下：-

**问好**

```
package service.expose;

import org.apache.felix.scr.annotations.Service;

public interface SayHello {
    public void sayHelloTest();
} 
```

**SayHelloTestServlet** // Servlet 在这里没有意义。

```
package service.expose;

import java.io.IOException;
import org.apache.felix.scr.annotations.Component;
import org.apache.felix.scr.annotations.Activate;
import org.apache.felix.scr.annotations.Deactivate;
import org.apache.felix.scr.annotations.Service;

@Component
@Service(value = SayHello.class)
public class SayHelloTestServlet implements SayHello {

    public void sayHelloTest() {
        System.out.println("Testing Say Hello");
    }

    @Activate
    protected void activate() {
        System.out.println("service started");
    }

    @Deactivate
    protected void deactivate() {
        System.out.println("service stopped");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:56:23.333

用于`@Component(immediate=true)`在捆绑包激活后立即实例化您的服务，而不是按需实例化。

# perl - 将 Plack::Middleware::DBIC::QueryLog 与 Dancer webapp 一起使用

> ID：14627448
> 
> 赞同：0
> 
> 时间：2013-01-31T13:55:30.873
> 
> 标签：perl, dancer, plack

我正在尝试在舞者应用程序中使用[Plack::Middleware::DBIC::QueryLog 。](http://search.cpan.org/~jjnapiork/Plack-Middleware-DBIC-QueryLog-0.05/lib/Plack/Middleware/DBIC/QueryLog.pm)文档告诉我获取这样的查询日志：

```
use Plack::Middleware::DBIC::QueryLog;
sub get_querylog_from_env {
  my ($self, $env) = @_;
  Plack::Middleware::DBIC::QueryLog->get_querylog_from_env($env);
} 
```

在我的舞者应用程序中，在访问我的数据库模式之前，我必须设置`$schema->storage->debugobj` 为`QueryLogger`. 我的问题是：如何访问`$env`Plack 提供的包含我应该使用的 QueryLog 对象的环境？

我正在开始我的舞者应用程序

```
plackup bin/app.pl 
```

其中`app.pl`包含默认值

```
use Dancer;
use app;
dance; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:17:16.363

你有没有尝试过

```
request->env(); 
```

来自您的 app.pm 本身？请参阅[Dancer::Request](https://metacpan.org/module/Dancer%3a%3aRequest#env-)。它不是 Plack::Request 对象，但从来源来看，它确实包含 PSGI ENV vars。

# php - 使用 Curl + Php 登录 Xing

> ID：14627452
> 
> 赞同：1
> 
> 时间：2013-01-31T13:55:43.120
> 
> 标签：php, curl

我正在尝试制作一个仪表板应用程序，其中包括从 xing 帐户检索信息并将其存储在我们的数据库中。现在，我们默认的 oauth 实现，如果用户没有登录，它会请求他的许可，然后返回显示所有信息的网页。

我们需要自动化登录过程，例如，我们的 php 脚本每天都会运行并将我们的 xing 联系人复制到数据库中。但我们需要在不手动登录 Xing 的情况下发生这种情况。

我已经阅读/尝试了很多用于登录网站的 curl/php 脚本，但没有一个真正适用于 xing。

有人可以向我提供可以登录 xing.com 的 php 脚本吗？

非常感谢您的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:57:46.130

Xing 好像有一个[API](http://devblog.xing.com/category/api-2/)。这将是从他们那里获取数据的绝佳方式。

抓取网站很容易破坏，也可能违反他们的条款和条件。

# intuit-partner-platform - 无法从 Open Id 属性中获取名字、姓氏或领域 ID

> ID：14627456
> 
> 赞同：0
> 
> 时间：2013-01-31T13:55:48.527
> 
> 标签：intuit-partner-platform

根据 IA 的[SSO 文档](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0030_Integrate_your_app/0030_Signing_Into_and_out_of_Intuit_From_Within_Your_App/Sign-in/Implement_SSO_and_OpenID_in_Your_App)，这些属性应该可用（*我在属性 URI 上猜测了一下*）：

*   名字 ( [http://axschema.org/namePerson/first](http://axschema.org/namePerson/first) )
*   姓氏 ( [http://axschema.org/namePerson/last](http://axschema.org/namePerson/last) )
*   领域 ID ( [http://axschema.org/intuit/realmId](http://axschema.org/intuit/realmId) )

查看在 open id 请求的第 3 阶段传递的查询字符串，以下是存在的属性：

*   openid.alias3.type.alias1 => [http://axschema.org/namePerson](http://axschema.org/namePerson)
*   openid.alias3.value.alias1 => 全名
*   openid.alias3.type.alias2 => [http://axschema.org/contact/email](http://axschema.org/contact/email)
*   openid.alias3.value.alias2 => email@test.com

错误、文档错误或键盘后面的螺母松动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:31:09.677

这里有两个问题，第一个问题是我匆忙的剪切和粘贴编码，我只要求全名和电子邮件。我修改了代码以请求名字、姓氏和领域 ID。现在名字和姓氏都很好。然而，花了很多时间才找到领域 id 问题的根源。首先，文档没有对属性uri给出明确的答案；但是，我能够在此线程[https://idnforums.intuit.com/textthread.aspx?catid=69&threadid=16954](https://idnforums.intuit.com/textthread.aspx?catid=69&threadid=16954)上找到明确的答案。保罗杰克逊清楚地知道这里发生了什么：

1.  领域 id 的属性是[http://axschema.org/intuit/realmId](http://axschema.org/intuit/realmId)
2.  有时属性不通过

我根据他在这个线程中的建议组合了一种技术。基本上，如果领域 id 没有通过，那么我将从在查询字符串中作为领域 ID 的引用 url 中解析它。显然，这很脆弱，但目前提供了一个“有效”的解决方案。

这是您可以在握手的第 3 阶段使用的代码片段。

```
 _realmId = fetch.GetAttributeValue(OpenId.IntuitWellKnownRealmId);

if (_realmId == null && httpRequest.UrlReferrer != null)
{
    var url = httpRequest.UrlReferrer.ToString();
    var i = url.IndexOf('?');
    if (i != -1)
    {
        var querystring = url.Substring(i);
        _realmId = System.Web.HttpUtility.ParseQueryString(querystring)["realmId"];
    }
} 
```

我对这个解决方案零信任，保罗已经想通了。只是在这里发布以帮助任何搜索此问题的人。

# html - CSS没有背景图片，有什么想法吗？

> ID：14627459
> 
> 赞同：2
> 
> 时间：2013-01-31T13:55:54.790
> 
> 标签：html, css

我试图让我的背景图像显示在页面的顶部中心。如果我这样做，图像效果很好：

```
<style>
  body {
   background: #FFF url('img/top_logo_blank_small.png') no-repeat fixed;
  }
</style> 
```

我似乎无法弄清楚我哪里出错了。一定有什么东西是我搞砸了，我就是看不到。这是CSS：

```
body {
font-family: 'Quattrocento Sans', helvetica, sans-serif;
background: #EEE url('img/top_logo_blank_small.png') no-repeat fixed;
color: #fff;
margin: 0;
padding: 0;
}

a {
color: black;
text-decoration: none;
}

/* Typography */

.header h1 {
position: absolute;
width:100%;
top: 50%;
margin-top: -20px;
text-align: center;
letter-spacing: 4px;
}

.header h1 em {
font-size: 1.200em;
font-style: normal;
}

h1 {
font-size: 2.2em;
color: #fff;
}

.content h2 {
font-size: 1.75em;
color: #fff;
letter-spacing: 4px;
text-align: center;
}

.content h2 em {
font-size: 1.2em;
font-style: normal;
}

.content h3 {
text-align: center;
font-size: 1.0em;
font-weight: normal;
color: #ede0ed;
letter-spacing: 1px;
margin-bottom: 25px;
}

.content h4 {
margin-top: 0;
text-align: center;
font-size: 0.8em;
font-weight: normal;
color: #ede0ed;
letter-spacing: 1px;
}

#banner p {
text-align: center;
}

/* Navigation */

#nav {
margin: 4px 4px 40px;
}

#nav ul {
padding: 0;
margin: auto;
list-style: none;
}

#nav ul li {
width: 50%;
color: #BBB;
float: left;
font-family: 'Cabin Sketch';
font-size: 1.75em;
text-align: center;
background: url(img/scribble_dark.png);
}

#nav ul li a {
display: block;
/*padding: 5px 20px;*/
}

#nav ul li a:hover {
background: #e0d0e0;
}

/* Content */

.container{
max-width: 720px;
margin: 50px auto 0;
background: #FFF url('img/top_logo_blank_small.png') no-repeat fixed 0 0;
}

.header {
position: relative;
background-color: #b88fb8;
border-top: 5px solid #ede0ed;
height: 75px;
}

.content {
background-color: #000;
padding: 15px;
margin-bottom: 10px;
}

div#about {
padding:25px;
min-height: 255px;
}

img#portrait {
float: left;
margin-right: 25px;
width: 256px;
height: 256px;
}

div#footer {
width: 100%;
max-width: 720px;
margin: auto;
color: black;
text-align: right;
padding: 0 10px;
font-size: 0.850em;
}

@media screen and (max-width: 650px) {

.container { 
    width: 90%;
    max-width: none;
}

div#footer {
    width: 90%;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:59:59.587

尝试更改您的路径，例如：

```
background: #EEE url('../img/top_logo_blank_small.png') no-repeat fixed top; 
```

因为你在一个子文件夹中，所以你必须提高我认为的级别

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:59:07.547

您的 css 文件很可能位于不同的文件夹中，因此需要另一个指向图像文件的路径。

常见的做法是将css放在单独的`css/*`文件夹中，所以路径应该是：

```
url('../img/top_logo_blank_small.png') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:00:09.160

css是否与页面位于同一文件夹中？如果您有不同的文件夹，则需要相应地更改 URL。

也许将网址更改为

```
'../img/top_logo_blank_small.png' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T13:59:43.377

这个 CSS 似乎工作正常，你确定图像存在吗？

[http://jsfiddle.net/ghsNR/](http://jsfiddle.net/ghsNR/)

我刚刚在这里尝试过，它适用于来自[http://placehold.it/的图像](http://placehold.it/)

```
body {
font-family: 'Quattrocento Sans', helvetica, sans-serif;
background: #EEE url('http://placehold.it/500x500') no-repeat fixed top;
color: white;
margin: 0px;
padding: 0px;
} 
```

观察到这一点后，最可能的原因是您的 CSS 实际上没有正确定位您的图像。我建议使用 Chrome 开发工具或 Firebug 之类的工具来检查浏览器试图用来加载图像并从那里继续前进的绝对路径。

# java - IIOP 协议管理器失败 Glassfish 3.1.2

> ID：14627461
> 
> 赞同：2
> 
> 时间：2013-01-31T13:56:03.010
> 
> 标签：java, glassfish, corba, iiop

在 Glassfish 启动期间，出现以下故障。我确实在 所在`vbjorb.jar`的域的类路径中有`org.omg.CORBA.InterfaceDef`。

```
SEVERE|glassfish3.1.2|javax.enterprise.system.tools.deployment.org.glassfish.deployment.common|_ThreadID=21;_ThreadName=Thread-2;|Exception while invoking class org.glassfish.ejb.startup.EjbDeployer load method
java.lang.RuntimeException: EJB Container initialization error
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:242)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:305)
    ... 32 more
Caused by: java.lang.RuntimeException: IIOP Protocol Manager initialization failed.  Possible cause is that ORB is not available in this container
    at com.sun.ejb.containers.BaseContainer.initializeProtocolManager(BaseContainer.java:827)
    at com.sun.ejb.containers.BaseContainer.<init>(BaseContainer.java:508)
    ... 37 more
Caused by: java.lang.LinkageError: injection failed on class org.glassfish.enterprise.iiop.impl.POAProtocolMgr from org.apache.felix.framework.BundleWiringImpl@1545b48
    at org.jvnet.hk2.component.InjectionManager$1.run(InjectionManager.java:259)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 49 more
Caused by: java.lang.NoClassDefFoundError: org/omg/CORBA/InterfaceDef
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.jvnet.hk2.component.InjectionManager.inject(InjectionManager.java:170) 
```

# c++ - 显示功能不起作用

> ID：14627467
> 
> 赞同：0
> 
> 时间：2013-01-31T13:56:17.217
> 
> 标签：c++

我有3节课。

```
class piesa_a{

protected:

    int id;
    char *tip;
    int pret;

public:
[custructor with/without param, display function - works well each one of it]

class piesa_b:public piesa_a
{

private:
    float lungime;
    bool bw;
public:
[custructor with/without param, display function - works well each one of it]

class piesa_c:public piesa_a
{

    private:
        int nr;
        piesa_b *buf;
    public:
        piesa_c():piesa_a(){nr=0; buf = new piesa_b[nr];}
        piesa_c(int n, piesa_b *bu,int aid, char *tipi, int pretzz):piesa_a(aid,tipi,pretzz) 
        {
            buf = new piesa_b[nr];
            for(int i=0;i<nr;i++)
                buf[i]= bu[i];
        }
    void afisare()
    {

        cout<<nr;

    } 
```

主要我有这个：

```
piesa_c C(2, H,14,"TIPC",20);

C.afisare(); 
```

但这不起作用。我不知道是否正确声明了“buf”，因为问题似乎出在最后一堂课上。为什么？

稍后编辑：整个代码在这里： http: [//pastebin.com/nx2FGSfe](http://pastebin.com/nx2FGSfe)。

现在，我主要有这个

```
int main(int argc, char** argv) {

    piesa_b *H;
            H = new piesa_b[2];

    piesa_a A(4,"TIPA",120);
    piesa_b B(100,1,3,"TIPA",120);
    H[0]=B;
    H[1]=B;
    piesa_c C(2, H,14,"TIPC",20);

    piesa_a** v = new piesa_a*[3];

    v[0] = &A;
    v[1] = &B;
    v[2] = &C;

    for(int i=0;i<3;i++)
        v[i].afisare();

    return 0;
} 
```

显示函数返回此错误

```
main.cpp:143:14: error: request for member ‘afisare’ in ‘*(v + ((unsigned int)(((unsigned int)i) * 4u)))’, which is of non-class type ‘piesa_a*’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:59:01.553

`nr`未在`piesa_c()`构造函数中初始化，这意味着它将具有未定义的值。

而不是使用动态分配的数组，`std::vector<piesa_b>`而是使用 a 。它将处理动态内存分配并在`piesa_c`复制实例时做正确的事情。使用`std::vector`还意味着`nr`可以省略成员变量，因为可以从中获取信息，`vector::size()`并且`std::vector`可以将其填充到初始化列表而不是构造函数主体中：

```
std::vector<piesa_b> buf;

piesa_c(int      n,
        piesa_b *bu,
        int      aid,
        char*    tipi,
        int pretzz) : piesa_a(aid,tipi,pretzz),
                      buf(bu, bu + nr) {} 
```

并在每个元素上调用成员函数`buf`：

```
// C++11 lambda, otherwise use
// std::vector<piesa_b>::const_iterator.
//
std::for_each(buf.begin(), buf.end(), [](piesa_b& pb) { pb.afisare(); }); 
```

如果`afisare()`不修改，则使其为 const：

```
void afisare() const
{
} 
```

另外，使用`std::string`代替`char*`. 如果您坚持在类中动态分配成员，则需要遵守[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T13:58:44.940

我不确定在这种情况下“不工作”是什么意思，但是当你调用这个构造函数时：

```
piesa_c C(2, H,14,"TIPC",20); 
```

`nr`未设置数据成员。它可以有任何适合 int 的值，所以当你用它来初始化一个数组时，你会得到变量和奇怪的结果。

请注意，使用`std::vector`and`std::string`而不是动态分配的数组和`char*`.

# fonts - Photoshop中缺少字体

> ID：14627469
> 
> 赞同：0
> 
> 时间：2013-01-31T13:56:19.470
> 
> 标签：fonts, photoshop-script

我知道您可以通过以下方式返回 JavaScript 中已安装字体的数量：

```
alert(app.fonts.length) 
```

编写脚本以在 psd 文件中查找丢失的字体，这与这一事实有关。让我们假设文件非常大，由 100 多个层组成，这些层嵌套在层集中的层集中。丢失的字体就在大海捞针的某个地方。

但是，我刚刚发现，如果使用缺少字体的 .PSD 文件启动 Photoshop，则会出现缺少字体错误（不是说缺少哪种字体；因此是脚本），但 app.fonts.length 也会包括缺少的字体。解决这个问题的最佳方法是什么？在 CS2 中，有没有办法返回 system.fonts 的等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:22:04.860

在 CS5 及更高版本中，您可以使用

```
app.fonts.refreshFonts() 
```

# c# - 更新面板中的图像标签

> ID：14627474
> 
> 赞同：0
> 
> 时间：2013-01-31T13:56:34.297
> 
> 标签：c#, updatepanel, image

我是.net 的新手。我正在编写一个新应用程序，我必须在其中显示带有按钮控件的图像幻灯片。代码是

```
 <div id = "slideshow" style = "width:auto" runat="server" align ="center">
            <asp:Label ID = "slideHeader" runat="server" />
                 <asp:Image runat="server" ImageUrl=" " ID = "img" style="width:90%; height:100%;"/>
            <hr style = "height:20px; border:0px; color:White"  />
                    <asp:Button id="prev" Text="Previous" OnClick = "prevClick" runat="server"/>
                    <asp:Button id="next" Text="Next" OnClick = "nextClick" runat="server"/>
                    <asp:Button id="start" Text="Start" OnClick = "startClick" runat="server"/>
                    <asp:Button id="stop" Text="Stop" OnClick = "stopClick" runat="server"/>
            </div> 
```

按钮背后的代码是

```
protected void nextClick(object sender, EventArgs e)
{

img.ImageUrl = path; 

} 
```

我不知道如何为此使用更新面板。当我在 img 标签周围使用更新面板标签时，它显示更新面板没有属性 img。我怎样才能做到这一点？

# python - 最大特征向量和可能的 Scipy 怪异

> ID：14627475
> 
> 赞同：3
> 
> 时间：2013-01-31T13:56:36.287
> 
> 标签：python, scipy, eigenvector, eigenvalue

不确定这是包中的错误还是由于其他原因，但我们开始了。

我正在使用以下包在相似度分数的对称矩阵（大小为 10x10）上找到最大的特征值及其对应的特征向量：

```
scipy.sparse.linalg.eigen.arpack.eigsh 
```

，像这样：

```
scipy.sparse.linalg.eigen.arpack.eigsh(mymatrix, 1, which='LM') 
```

现在我的问题是，当我多次运行它时（使用相同的矩阵、设置等），有时特征向量中的值是正的，有时是负的（参见**运行 3**）。

有谁知道这可能是为什么，或者它是一个错误？它似乎没有模式，但它只发生在我运行代码而不在每次迭代后关闭 Python 时（即每次运行后按 F5）。

```
### Run 1: ###
[[-0.31056873]
[-0.31913092]
[-0.3149287 ]
[-0.32262921]
[-0.32190688]
[-0.31292658]
[-0.32424732]
[-0.31885208]
[-0.31808024]
[-0.298174  ]]

### Run 2: ###
[[-0.31056873]
[-0.31913092]
[-0.3149287 ]
[-0.32262921]
[-0.32190688]
[-0.31292658]
[-0.32424732]
[-0.31885208]
[-0.31808024]
[-0.298174  ]]

### Run 3:###
[[ 0.31056873]
[ 0.31913092]
[ 0.3149287 ]
[ 0.32262921]
[ 0.32190688]
[ 0.31292658]
[ 0.32424732]
[ 0.31885208]
[ 0.31808024]
[ 0.298174  ]]

### Run 4: ###
[[-0.31056873]
[-0.31913092]
[-0.3149287 ]
[-0.32262921]
[-0.32190688]
[-0.31292658]
[-0.32424732]
[-0.31885208]
[-0.31808024]
[-0.298174  ]] 
```

这不是一个大问题，但我不喜欢我的代码中的不确定性 ;-)

提前谢谢了，

马丁

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T14:18:14.403

这实际上是一道数学题。

但原因是计算特征向量时存在任意相位。您正在为 x 求解 Ax = bx。该方程在乘以（可能是复杂的）相位时是不变的。

至于为什么它以（看似）随机的方式发生，我不知道。但我很确定这不是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T11:16:33.317

您在函数`'LM'`的`which`参数中使用该函数。使用此设置，您正在搜索最**大幅度**的特征值，我注意到矩阵的最小和最大特征值的绝对值相当接近。
将此添加到算法正在估计特征值的值的事实中，您将得到问题的答案。
尝试使用 运行您的代码`which = 'LR'`，这应该会为您提供具有最高实际值的特征值（无论如何，您的特征值都是真实的）。

# ios - 无法从 iOS OAuth1.0、OAConsumer 客户端在 tumblr 上发帖

> ID：14627481
> 
> 赞同：6
> 
> 时间：2013-01-31T13:57:03.770
> 
> 标签：ios, objective-c, oauth, tumblr, social

我正在尝试将“tumblr”集成到我的应用程序中。我能够成功获取访问令牌。但是，当我尝试发布时，我收到以下错误

```
{"meta":{"status":401,"msg":"Not Authorized"},"response":[]} 
```

我正在使用`OAuthConsumer`iOS 客户端，如果从`MGTwitterEngine`.

这是我尝试过的。

```
#import "ViewController.h"

#define consumer_key  @"u9iZvT8KIlrTtUrh3vUeXXXXXXXXXXXXXAfgpThGyom8Y6MKKCnU"
#define consumer_secret  @"xfA10mQKmALlpsnrFXXXXXXXXXXXXXXXXXXXXXXXXXX"
#define request_token_url  @"http://www.tumblr.com/oauth/request_token"
#define access_token_url  @"http://www.tumblr.com/oauth/access_token"
#define authorize_url  @"http://www.tumblr.com/oauth/authorize?oauth_token=%@"
#define base_url @"http://api.tumblr.com/v2/user/XXXXXXXXXXXXX.tumblr.com/info"
#define user_info @"http://api.tumblr.com/v2/user/info"

@interface ViewController ()

@end

@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (IBAction)postIt:(id)sender
{

    NSURL *postURL = [NSURL URLWithString:@"http://api.tumblr.com/v2/blog/xxxxxxxx.tumblr.com/post"];
    OAMutableURLRequest *oRequest = [[OAMutableURLRequest alloc] initWithURL:postURL
                                                                    consumer:self.consumer
                                                                       token:self.accessToken
                                                                       realm:nil
                                                           signatureProvider:nil];
    [oRequest setHTTPMethod:@"POST"];

    [oRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

    OARequestParameter *statusParam = [[OARequestParameter alloc] initWithName:@"body"
                                                                         value:@"Sample Body"];
    OARequestParameter *statusParam2 = [[OARequestParameter alloc] initWithName:@"type"
                                                                         value:@"text"];

    NSArray *params = [NSArray arrayWithObjects:statusParam,statusParam2, nil];
    [oRequest setParameters:params];
    OAAsynchronousDataFetcher *fetcher = [OAAsynchronousDataFetcher asynchronousFetcherWithRequest:oRequest
                                                                                          delegate:self
                                                                                 didFinishSelector:@selector(sendStatusTicket:didFinishWithData:)
                                                                                   didFailSelector:@selector(sendStatusTicket:didFailWithError:)];
    NSLog(@"URL = %@",[oRequest.URL absoluteString]);

    [fetcher start];
}

- (void)didReceiveAccessToken:(OAServiceTicket *)ticker data:(NSData *)responseData
{

}

- (void)webView:(UIWebView*)webView didFailLoadWithError:(NSError*)error {
    // ERROR!
}

- (void)sendStatusTicket:(OAServiceTicket *)ticker didFinishWithData:(NSData *)responseData
{
    if (ticker.didSucceed) {
        NSLog(@"Success");
    }
    NSString *responseBody = [[NSString alloc] initWithData:responseData
                                                   encoding:NSUTF8StringEncoding];

    NSLog(@"Description = %@",responseBody);

}
- (void)sendStatusTicket:(OAServiceTicket *)ticker didFailWithError:(NSError *)error
{
    NSLog(@"Error = %@",[error localizedDescription]);
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (IBAction)login:(id)sender
{
    self.consumer = [[OAConsumer alloc] initWithKey:consumer_key secret:consumer_secret];

    NSURL *url = [NSURL URLWithString:request_token_url];

    OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:url
                                                                   consumer:self.consumer
                                                                      token:nil   // we don't have a Token yet
                                                                      realm:nil   // our service provider doesn't specify a realm
                                                          signatureProvider:nil]; // use the default method, HMAC-SHA1

    [request setHTTPMethod:@"POST"];

    OADataFetcher *fetcher = [[OADataFetcher alloc] init];

    [fetcher fetchDataWithRequest:request
                         delegate:self
                didFinishSelector:@selector(requestTokenTicket:didFinishWithData:)
                  didFailSelector:@selector(requestTokenTicket:didFailWithError:)];

}
- (void)requestTokenTicket:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data {
    if (ticket.didSucceed)
    {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        self.accessToken= [[OAToken alloc] initWithHTTPResponseBody:responseBody];

        NSURL *author_url = [NSURL URLWithString:[ NSString stringWithFormat:authorize_url,self.accessToken.key]];
        OAMutableURLRequest  *oaR = [[OAMutableURLRequest alloc] initWithURL:author_url consumer:nil token:nil realm:nil signatureProvider:nil];        
        UIWebView  *webView =[[UIWebView alloc] initWithFrame:[UIScreen mainScreen].bounds];
        [[[UIApplication sharedApplication] keyWindow] addSubview:webView];
        webView.delegate=self;
        [webView loadRequest:oaR];

    }
}

// This is to get oAuth_verifier from the url

- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    NSString *url = [[request URL] absoluteString];
    NSString *keyOne = @"oauth_token";
    NSString *keyTwo = @"oauth_verifier";
    NSRange r1 =[url rangeOfString:keyOne];
    NSRange r2 =[url rangeOfString:keyTwo];
    if (r1.location!=NSNotFound && r2.location!=NSNotFound) {
        // Extract oauth_verifier from URL query
        NSString* verifier = nil;
        NSArray* urlParams = [[[request URL] query] componentsSeparatedByString:@"&"];
        for (NSString* param in urlParams) {
            NSArray* keyValue = [param componentsSeparatedByString:@"="];
            NSString* key = [keyValue objectAtIndex:0];
            if ([key isEqualToString:@"oauth_verifier"]) {
                verifier = [keyValue objectAtIndex:1];
                break;
            }
        }
        if (verifier) {
            NSURL* accessTokenUrl = [NSURL URLWithString:@"http://www.tumblr.com/oauth/access_token"];
            OAMutableURLRequest* accessTokenRequest =[[OAMutableURLRequest alloc] initWithURL:accessTokenUrl
                                                                                     consumer:self.consumer
                                                                                        token:self.accessToken
                                                                                        realm:nil
                                                                            signatureProvider:nil];
            OARequestParameter* verifierParam =[[OARequestParameter alloc] initWithName:@"oauth_verifier" value:verifier];
            [accessTokenRequest setHTTPMethod:@"POST"];
            [accessTokenRequest setParameters:[NSArray arrayWithObjects:verifierParam,nil]];
            OADataFetcher* dataFetcher = [[OADataFetcher alloc] init];
            [dataFetcher fetchDataWithRequest:accessTokenRequest
                                     delegate:self
                            didFinishSelector:@selector(requestTokenTicketForAuthorization:didFinishWithData:)
                              didFailSelector:@selector(requestTokenTicket:didFailWithError:)];
        } else {
            // ERROR!
        }
        [webView removeFromSuperview];
        return NO;
    }
    return YES;
}

- (void)requestTokenTicketForAuthorization:(OAServiceTicket *)ticket didFinishWithData:(NSData *)data
{
    if (ticket.didSucceed)
    {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        self.accessToken = [self.accessToken initWithHTTPResponseBody:responseBody];
        accessText=self.accessToken.key;
        accessSecret=self.accessToken.secret;
    }
    else
    {
        NSString *responseBody = [[NSString alloc] initWithData:data
                                                       encoding:NSUTF8StringEncoding];
        NSLog(@"Response = %@",responseBody);
    }

}
- (void)requestTokenTicket:(OAServiceTicket *)ticket didFailWithError:(NSError *)error
{
    NSLog(@"Error = %@",[error localizedDescription]);
}

@end 
```

我在这里犯了什么错误？为什么我收到这个错误？我是否正确遵循了这些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T18:33:22.047

请 XXX 出您的 consumer_key 和 consumer_secret 以避免不必要的使用。代码方面，您可能想在这里寻找一些东西。

1.  您是否能够使用诸如“ [http://api.tumblr.com/v2/user/info](http://api.tumblr.com/v2/user/info) ”之类的 oauth 'GET' 请求？如果您可以收到成功的“GET”请求，那么您的访问令牌是有效的，您可以查看如何发送您的帖子参数。

2.  确保您将参数作为 HTTP 正文和签名参数传递。库可能提供了正确的参数排序。

    NSString *postbody = @"body=myBodyText&type=text";

    [oRequest setHTTPBody:[postbody dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:TRUE]];

# c# - 如何解决 NullReferenceException？

> ID：14627485
> 
> 赞同：0
> 
> 时间：2013-01-31T13:57:16.180
> 
> 标签：c#

> **可能重复：**
> [.NET 中的 NullReferenceException 是什么？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

我是 MVC 的初学者，我尝试添加一个下拉列表以使用 sql 查询将其选定的值保存在数据库中，但我的代码抛出了`NullReferenceException`.

任何人都可以帮助我吗？

这是模型

```
public class caradvert
{
    [Required]
    public SelectList GearType { get; set; }

    public int Selected { get; set; }

public caradvert()
{
    List<SelectListItem> listItems = new List<SelectListItem>();
    listItems.Add(new SelectListItem()
    {
        Value = "0",
        Text = "اتوماتيك "
    });

    listItems.Add(new SelectListItem()
    {
        Value = "1",
        Text = "عادي"
    });

        GearType = new SelectList(listItems, "Value", "Text");
}

public int CreatAdvert(int userid)
    {

        SqlConnection objConn = new SqlConnection("Data Source=ADMIN-PC;Initial Catalog=mvc4advertisment;Integrated Security=True");
        SqlCommand objCmd = new SqlCommand();
        objCmd.CommandType = CommandType.Text;
        objCmd.CommandText = "insert into Mercedes(Model,GearType,color,EngineCapacity,CarDescription,Price,Image1Url,Image2Url,Image3Url,Userid,State) values('1','" + GearType.SelectedValue.ToString() + "','r','221','ddd','2','ss','ss','ss','1','False')";
        objCmd.Connection = objConn;
        objConn.Open();
        int count = (int)objCmd.ExecuteNonQuery();
        objConn.Close();
        return count;
    }
} 
```

这是控制器

```
 [HttpGet]
    public ActionResult CreateAdvert()
    {

        caradvert model = new caradvert();
        List<SelectListItem> listItems = new List<SelectListItem>();
        listItems.Add(new SelectListItem()
        {
            Value = "1",
            Text = "اتوماتيك "
        });

        listItems.Add(new SelectListItem()
        {
            Value = "1",
            Text = "عادي"
        });
        model.GearType = new SelectList(listItems, "Value", "Text");

        return View(model);

    }

    [HttpPost]
    public ActionResult CreateAdvert(caradvert model )
    {
                int _records = model.CreatAdvert(1);
                if (_records > 0)
                {
                    return RedirectToAction("Index", "Account");
                }
                else
                {
                    ModelState.AddModelError("", "لا يمكنك اضافة اعلان");
                }

        return View(model);

    } 
```

这是视图

```
<%:Html.DropDownListFor(m=>m.Selected,Model.GearType,") %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:07:19.570

`GearType`此语句中的or很可能`GearType.SelectedValue`为空。

```
objCmd.CommandText = "insert into Mercedes(Model,GearType,color,EngineCapacity,CarDescription,Price,Image1Url,Image2Url,Image3Url,Userid,State) values('1','" + GearType.SelectedValue.ToString() + "','r','221','ddd','2','ss','ss','ss','1','False')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:12:25.607

在这一行：

```
objCmd.CommandText = "insert into Mercedes(Model,GearType,color,EngineCapacity,CarDescription,Price,Image1Url,Imag‌​e2Url,Image3Url,Userid,State) values('1','" + GearType.SelectedValue.ToString() + "','r','221','ddd','2','ss','ss','ss','1','False')"; 
```

1.  如果 GearType 未初始化或为 null
2.  如果 GearType.SelectedValue 为 null

GearType.SelectedValue.ToString() 可以抛出异常，例如未设置对象实例的引用。

为了使问题更清楚，您可以在此行之前控制 GearType 和 GearType.SelectedValue。

```
if(GearType != null && GearType.SelectedValue != null) {
 Mercedes(Model,GearType,color,EngineCapacity,CarDescription,Price,Image1Url,Imag‌​e2Url,Image3Url,Userid,State) values('1','" + GearType.SelectedValue.ToString() + "','r','221','ddd','2','ss','ss','ss','1','False')";
} 
```

# c# - 执行另一个 Web 控件时无法将对象存储在 Web 控件中

> ID：14627487
> 
> 赞同：0
> 
> 时间：2013-01-31T13:57:17.370
> 
> 标签：c#, asp.net, viewstate, web-controls

我正在使用两个网络控件。Web控件A包含Web控件B。调用Web控件A时，会自动调用Web控件B。WebcontrolB 将一个值传递给 webcontrolA 的 Modify() 方法。我想存储一个对象，我使用视图状态来做到这一点：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            object o = Object;
            ViewState["o"] = o;

        }
    } 
```

问题是当我返回到 webcontrolA 时，我从 ViewState 检索到的对象为空。因此，当执行另一个 web 控件时，不会存储该对象。我可以储存吗？？我也尝试过 Session 但它给了我以下错误：“错误消息：对象引用未设置为对象的实例”

为了从 viewstate 中检索值，我使用了这个：

```
public void Modify(int i)
{    
   object o = (object)ViewState["o"];  //result is null :(
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:03:17.403

当您停留在同一页面上时，ViewState 被持久化，您进行回发操作（单击同一页面上的按钮）

如果您丢失了视图状态值 => 您可能会在应用程序周围导航

在导航的情况下，您可以使用会话变量

```
Session["o"] = o; 
```

# python - 如何在python中将unicode字符串编码为utf-8字符串

> ID：14627492
> 
> 赞同：1
> 
> 时间：2013-01-31T13:57:31.637
> 
> 标签：python, string, unicode, encode

我正在尝试将 unicode 字符串转换为 utf-8

我一直在阅读有关 python unicode 处理和 python 的信息。

Python unicode 如何表示我可以执行以下操作：

```
u.encode('utf-8') 
```

哪里`u`是 unicode 对象。

我正在调用 encode('utf-8') 到一个 unicode 对象，但结果是：

```
RemoteScriptError: LookupError
RemoteScriptError: no codec search functions registered: can't find encoding 
```

我是否需要任何特殊的导入或调用才能使 python 知道如何在 utf-8 中编码 unicode 对象？

请注意，我没有使用系统 python。我在一个 python 2.5 环境中，它似乎内置在我正在运行这个脚本的应用程序中。

当我需要内置 python 没有的东西时，我需要导入它，例如 struct.py

该应用程序是 Ableton Live，它通过 python API 公开应用程序内部的对象。Ableton Live 有轨道、剪辑、场景等，它们有一个 name 属性。该名称属性是一个 unicode 对象。我正在使用 str(track.name) 从名称中获取字符串，但是它不适用于 ç、á、í、字符...

总之......我需要包含、导入或调用什么才能`.encode(encoding)`正常工作？

# php - 查询不存在的字段

> ID：14627493
> 
> 赞同：0
> 
> 时间：2013-01-31T13:57:32.763
> 
> 标签：php, symfony, doctrine-orm

我有一个实体**Paper**，它连接到我项目中的纸桌。在这个实体中，我有一个字段**title**。

问题是字段标题里面可以有一些**html标签**，我需要对这个字段进行一些查询。查询**没有 html 标签**。

我的想法是在我的实体中创建一个额外的变量：**title_without_html**：

```
protected title_without_html;

/**
 * Get title_without_html
 *
 * @return text
 */
public function getTitle_without_html()
{
    return  strip_tags($this->title);
} 
```

而且在构造函数中，我正在创建title_without_html。

这可能吗？如果是，如何正确执行。实际上，我收到一个错误：

> [语义错误] 第 0 行，'title_without_html' 附近的第 61 列：错误：SciForum\Version2Bundle\Entity\Paper 类没有名为 title_without_html 的字段或关联

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:10:01.700

您的代码错过了 a `$`，并且您应该避免使用 not camelCase 方法（为了与 Doctrine2 生成的方法保持一致）。

此外，不要依赖构造函数：Doctrine2 在从数据库中获取现有数据时不调用构造函数。

这必须有效：

```
<?php

class Toto {

    public function getCleanTitle()
    {
        return strip_tags($this->getTitle());
    }
} 
```

您不必为此设置属性，而是多次调用此 getter（然后，可以使用属性来缓存 的结果`strip_tags`）。

# c# - 在 Windows PC 上制作程序/游戏启动器

> ID：14627495
> 
> 赞同：-1
> 
> 时间：2013-01-31T13:57:35.300
> 
> 标签：c#, windows

我想为游戏俱乐部/网吧制作一个 Windows 应用程序，它会在 Windows 启动时运行，覆盖整个屏幕，包括任务栏，并提示用户登录。普通用户将能够玩游戏和使用浏览器和Skype，而只有管理员可以访问硬盘和桌面。我的目标是 Windows XP 操作系统，并想使用 C#。

我在启动这个项目时遇到了几个问题：

1）如何使应用程序覆盖/隐藏整个桌面和任务栏，防止用户最小化应用程序或启动任务管理器并使用它来终止应用程序？

2) 我如何确保在 Windows 启动时，我的应用程序获得高优先级状态并且是第一个启动的应用程序 - 甚至在某些 Windows 服务启动之前？同样，我不希望用户重新启动 PC 并使用任务管理器终止应用程序。

3) 关于 Windows 安全策略，我有什么需要了解的吗，比如需要设置一些用户权限设置才能让我的程序以上述方式工作？

我知道这不是一个包含任何代码的问题，但这些问题的答案是开始该项目的关键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:06:37.517

也许您可以使用自定义外壳（您的程序）。请检查[http://msdn.microsoft.com/en-us/library/aa479087.aspx](http://msdn.microsoft.com/en-us/library/aa479087.aspx)

# java - Java：在多个数组列表中存储值

> ID：14627496
> 
> 赞同：-2
> 
> 时间：2013-01-31T13:57:36.710
> 
> 标签：java, arraylist

我想我有一个相当简单的问题，但我不知道我应该怎么做。我创建了一个多重数组列表，我想在其中存储数组中的一些数据。我想检查哪些条目是相同的。

例如，如果 array[0] = array[5] = array[8] 但 array[1] 不等于任何条目，并且 array[2] = array[3]

我希望数组列表看起来像

数组2[0] | 数组2[5] | 数组2[8]

数组2[2] | 数组2[3]

```
 List<String> dup_non = new ArrayList<String>(), dn = new ArrayList <String>(); 

 for (int m = 0; m < array.length ; m++) 
    { 
        for(int o = m + 1; o < array.length; o++)         
        {   
              if (array[m].equals(array[o] && m!=o)){
                      dup_non.add(array2[m])
                      dn.add(array2[m],array2[o])
                               }
                          else { ....
                               } 
         }
     } 
```

这段代码或多或少是我在想的，因为我的 array2 有独特的元素，但它是不正确的。这是正确的，因为 array2 不是整数数组。

如果您有任何想法，如果您能分享，我将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:25:17.837

```
 Please check following program for your requirement

    I have created HashMap where Key as the your values that will duplicate and ArrayList as List of value duplicated  

    import java.util.Iterator;
import java.util.List;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

public class Dog {

    public static void main(String[] args) {
        Map<Integer,List<Integer>> hashMap=new HashMap<Integer,List<Integer>>();
         int array[]={1,1,1,2,2,2,4,3,3,3};

         for (int m = 0; m < array.length ; m++) {
             System.out.print(array[m]);
             List<Integer> dup=(List<Integer>)hashMap.get(array[m]);
             if(dup==null){

                 dup=new ArrayList<Integer>();
                 hashMap.put(array[m],dup);
                 dup.add(array[m]);

             }else{
                 dup.add(array[m]);
             }
         }

         Set<Entry<Integer, List<Integer>>> keys = hashMap.entrySet();
         for (Iterator iterator = keys.iterator(); iterator.hasNext();) {
            Entry<Integer, List<Integer>> entry = (Entry<Integer, List<Integer>>) iterator.next();
            List<Integer> arrayList = entry.getValue();
            if(arrayList.size()==1)
                hashMap.put(entry.getKey(), null);
        }

         System.out.print(hashMap.get(1));
         System.out.print(hashMap.get(2));
         System.out.print(hashMap.get(3));
         System.out.print(hashMap.get(4));
    }
} 
```

# java - 如何禁用 Hibernate 4 登录 Eclipse 控制台？

> ID：14627500
> 
> 赞同：2
> 
> 时间：2013-01-31T13:57:48.963
> 
> 标签：java, eclipse, logging, slf4j, hibernate-4.x

大家。我正在尝试解决下一个问题：当我使用 hebirnate 4 （**不是 3**）时关闭登录控制台。我在类路径中有下一个 .jar： slf4j-api-1.6.1.jar jboss-logging-3.1.0.GA.jar slf4j-log4j12-1.5.2.jar

正如我所说，日志语句属于 Eclipse 控制台。它看起来像：

> 2013 年 1 月 31 日下午 3:58:38 org.hibernate.annotations.common.Version INFO：HCANN000001：Hibernate Commons Annotations {4.0.1.Final} 2013 年 1 月 31 日下午 3:59:09 org.hibernate.Version logVersion INFO ：HHH000412：Hibernate Core {4.1.9.Final} 2013 年 1 月 31 日下午 3:59:12 org.hibernate.cfg.Environment INFO：HHH000205：从资源 hibernate.properties 加载的属性：{hibernate.connection.driver_class=org. h2.Driver, hibernate.dialect=org.hibernate.dialect.H2Dialect, hibernate.max_fetch_depth=5, hibernate.format_sql=true, hibernate.generate_statistics=true, hibernate.connection.username=sa, hibernate.connection.url=jdbc: h2:mem:db1;DB_CLOSE_DELAY=-1;MVCC=TRUE, hibernate.bytecode.use_reflection_optimizer=false, hibernate.jdbc.batch_versioned_data=true, hibernate.connection.pool_size=5} 2013 年 1 月 31 日 4:00:04 PM org .hibernate.cfg。环境 buildBytecodeProvider

当我阅读不同的手册和主题（包括 stackoverflow.com）时，我添加到名为“slf4j.properties”的 src 文件夹文件中。

slf4j.properties 包含下一个：

[http://tny.cz/63f0855b](http://tny.cz/63f0855b)

我添加链接是因为 slf4j.properties 文件中的标签（如 ###）会使文​​本不可读。

那么......如何关闭登录控制台？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:44:07.443

删除/评论以下行

```
log4j.appender.stdout
log4j.appender.stdout.Target
log4j.appender.stdout.layout
log4j.appender.stdout.layout.ConversionPattern 
```

添加以下行

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=<Your Path to Log File>/Log.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

更改以下行

```
log4j.rootLogger=OFF, stdout 
```

至

```
log4j.rootLogger=INFO, file 
```

现在您不应该在控制台中看到日志。

# javascript - 回调、匿名函数和上下文

> ID：14627503
> 
> 赞同：4
> 
> 时间：2013-01-31T13:57:55.970
> 
> 标签：javascript, jquery

这段代码有什么区别：

```
$('.percentage_field').change(function() {
    update_percentage();
});
$('.inspect1').change(function(){
    show_hide_targets();
}); 
```

而这段代码：

```
$('.percentage_field').change(
    update_percentage
);

$('.inspect1').change(
    show_hide_targets
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:01:53.360

当回调运行以响应事件时，`this`函数内部设置为作为事件目标的 DOM 元素。

在您的第一个示例中，匿名函数获取`this`目标元素的 ，但*不会转发到内部函数*`this`调用。相反，内部函数[根据调用的方式](https://stackoverflow.com/questions/12370851/understanding-javascript-scope-with-var-that-this/12371105#12371105)使用 a 运行。（这里，它是一个直接的“原始”调用（即，不作为成员函数调用），所以它在非脚本模式下以equal to运行。）*`this` `this``window`*

 *在您的第二个示例中，函数`update_percentage`并直接`show_hide_targets`获取`this`目标元素的。

考虑[一个例子](http://jsfiddle.net/5F5nk/3)：

```
function sayThis() { alert(this); }
someElem.addEventListener("click", function() { sayThis() });
someElem.addEventListener("click", sayThis);
someElem.addEventListener("click", function() { sayThis.call(this) }); 
```

第一个将警报`window`（或`undefined`在严格模式下）；第二个将提醒监听器触发的元素。第三个侦听器使用匿名函数，但它使用 调用内部函数[`.call(this)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)，将原始函数转发`this`给内部函数。*

# javascript - 打开 IE 开发人员工具后，JavaScript 发生了什么变化？

> ID：14627504
> 
> 赞同：2
> 
> 时间：2013-01-31T13:57:59.387
> 
> 标签：javascript, html, ajax, internet-explorer

**从运行AJAX**应用程序的角度来看，当打开**IE Developers Tools**时发生了什么变化？

我现在正在追踪一些**薛定谔错误**。这是关于**IE中****PrimeFaces**的**下拉**列表。它们有时在单击后无法打开，并且在最大化浏览器或取消缩放内容后它们会被“解锁”。因为这些下拉菜单是在正常输入的基础上实现的，并带有附加的 div，所以我认为这是错误地计算了显示下拉菜单的位置。我还假设 AJAX 错误。

 ****但打开 IE Developers Tools 后，几乎不可能重现该错误。控制台中没有显示错误，没有 AJAX 请求挂起，而且，一切似乎都运行得更好。

该错误仅针对IE，因此开发人员工具是调试它的唯一方法。然而，当它们被打开时，似乎**观察结果**会以某种方式改变状态，就像在量子力学中一样……

所以，我需要知道，通过打开那些开发人员工具可以改变什么，以防止错误出现？

**--edit--****与**`console.log`. 无关。这是计算不可见元素大小的问题。通过向正文添加滚动解决了该问题。然而，问题是开放的，IE 开发者工具是如何影响这些计算的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:29:35.273

If you really want to always include using `console`, I suggest using a polyfill for it:

```
(function(b){
    var a=0;
    var c=function(){};
    var d=["log","assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];
    b.console=b.console||{};
    for(;a<d.length;a++){
        b.console[d[a]]=b.console[d[a]]||b.console["log"]||c;
    }
})(window); 
```

This a minified example that I tried to make readable. It's something I found awhile ago and modified some. I think the main thing I modified is that if you call a method that wasn't originally implemented by the browser's native `console`, it will call `console.log`. If `console.log` wasn't natively implemented, it just calls an empty function. The original version of this code didn't include this fallback to `console.log`.

This will "guarantee" that `console` calls will not fail. You can change the `d` variable to only include calls you are sure you will use, otherwise there's some extra unnecessary processing.****

# c# - 在 WiX 自定义托管引导程序应用程序中下载安装包的正确方法是什么？

> ID：14627507
> 
> 赞同：4
> 
> 时间：2013-01-31T13:58:06.440
> 
> 标签：c#, wix, wix3.7

我编写了一个我一直在使用的 WiX 自定义 MBA，它嵌入了我安装所需的所有安装包（msis、cabs 和 exe）。但是我现在想做一个轻量级的网络引导程序，它将下载需要安装的包。我以为您可以使用底层的 WiX 引导程序引擎免费获得它，但我想我错了。

我尝试订阅 ResolveSource 事件以获取包的下载 url 并将其下载到本地源位置，但此时似乎为时已晚，因为我的安装失败并出现错误“无法解析文件的源： "（即使下载成功）。

我尝试过的示例：

```
private void OnResolveSource(object sender, ResolveSourceEventArgs e)
{  
    string localSource = e.LocalSource;
    string downloadSource = e.DownloadSource;

    if (!File.Exists(localSource) && !string.IsNullOrEmpty(downloadSource))
    {
        try
        {
            using (WebClient webClient = new WebClient())
            {
                webClient.DownloadFile(e.DownloadSource, e.LocalSource);
            }
        }

        catch (ArgumentNullException ex)
        {
            e.Result = Result.Error;
        }

        catch (WebException ex)
        {
            e.Result = Result.Error;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T19:49:15.267

感谢 Rob Mensching 在 wix-users 邮件列表中回答这个问题：

> 确保您提供的 URL 包（创作最简单，但您可以以编程方式将它们全部设置）然后从 ResolveSource 调用返回 IDDOWNLOAD。

我编辑我的代码如下：

```
private void OnResolveSource(object sender, ResolveSourceEventArgs e)
{
    if (!File.Exists(e.LocalSource) && !string.IsNullOrEmpty(e.DownloadSource))
        e.Result = Result.Download;
} 
```

将结果设置为`Result.Download`指示引导程序引擎下载包。无需尝试自己下载文件。

# javascript - 单击父级，忽略其子级

> ID：14627514
> 
> 赞同：5
> 
> 时间：2013-01-31T13:58:33.850
> 
> 标签：javascript, jquery, dom

> **可能重复：**
> [jQuery：单击功能排除子级。](https://stackoverflow.com/questions/2457246/jquery-click-function-exclude-children)

我有两个`div`s，是这样的：

```
<div id="parent" style="width: 100%; height: 100%; background-color:red;" />
    <h1>I'm the parent!</h1>
    <div id="child" style="width: 300px; height: 200px; background-color:yellow;">
        </h2>..and I'm the child!</h2>
    </div>
</div> 
```

此外，我有以下 JavaScript 代码：

```
$(document).ready(function(){
    $('#parent').click(function(){
        alert('Parent was clicked');
    });
}); 
```

问题是，如果我点击**child**，就会触发事件。如何将此事件仅限于父母？

编辑：只是为了澄清；我希望当用户单击红色的任意位置时触发此操作。如评论中所述；不是`h1`父级。Tjirp 的答案起到了作用，答案中有很多该解决方案的工作变体。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T14:01:09.977

这应该工作

```
$(document).ready(function() {
    $('#parent').click(function(e) {
        if (e.target == this) { 
            alert('Parent was clicked');
        }
    }
} 
```

这样您就不必将任何东西绑定到您的孩子身上。点击事件传播到您的点击处理程序，并检查点击事件的目标是否确实是您添加事件的元素。

编辑：我是对的。这不是最有效的方法，Alessandro Minoccheri 的回答应该更快。我用他的代码更新了我的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T14:02:18.413

试试这个：

```
$('#parent').click(function(data, handler){
  if (data.target == this) {
    //Do Stuff (only element clicked, not children)
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:00:45.887

h1 不是父级， div#parent 是父级。由于事件冒泡，单击 div#child 会触发单击 div#parent。这将防止事件冒泡：

```
$('#child').on("click", function() {
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T14:02:50.010

最简单的解决方案是检查发起事件的元素 ( `event.target`) 是否与处理单击事件处理程序 ( ) 的元素相同`this`：

```
$('#parent').click(function(event){
    if(this === event.target) {
        alert('Parent was clicked');
    }
}); 
```

这是一个[有效的 jsFiddle](http://jsfiddle.net/3gkpK/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T14:00:55.370

您可以尝试以下方法：

```
$(document).ready(function(){
    $('#parent h1').click(function(){
        alert('Parent was clicked');
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T14:08:50.320

```
$(document).ready(function(){
  $('#parent').click(function(){
    if($(this).not("#parent")) {
      return false;
    } else {
      alert('Parent was clicked');
    };
  });
}); 
```

# c# - 枚举数据合约

> ID：14627517
> 
> 赞同：1
> 
> 时间：2013-01-31T13:58:39.473
> 
> 标签：c#, .net, wcf

我有一个数据合同。

```
ItemInfo SearchItemByGuid(ClientEnum client, string itemGuid); 
```

其中 ClientEnum 是：

```
enum ClientEnum
{
Client1,
Client2,
} 
```

我将通过 webHttpBinding 公开数据合约。所以我必须使用WebGet。某一些...

```
[WebGet(UriTemplate = "items/{client}/{itemguid}"]
ItemInfo SearchItemByGuid(ClientEnum client, string itemGuid); 
```

所以问题是，我怎样才能以良好的方式处理枚举类型......？

想法：

1.  再制作一个接口，但使用字符串而不是枚举...
2.  实现 IParameterInspector（将字符串解析为枚举）
3.  查询字符串转换器？

有任何想法吗？

**更新：**

看来我找到了解决方案：所以...

```
 public class ClientEnumQueryStringConverter : QueryStringConverter 
{
    public override object ConvertStringToValue(string parameter, Type parameterType)
    {
//here goes actual conversion
        return base.ConvertStringToValue(parameter, parameterType);
    }

    public override string ConvertValueToString(object parameter, Type parameterType)
    {
//here goes actual conversion
        return base.ConvertValueToString(parameter, parameterType);
    }

    public override bool CanConvert(Type type)
    {
        if (type == typeof(ClientEnum))
            return true;           

        return base.CanConvert(type);
    }
} 
```

最后......

```
 public class MyWebHttpBehavior : WebHttpBehavior    
{
    WebMessageFormat defaultOutgoingResponseFormat;
    public MyWebHttpBehavior()
    {
        this.defaultOutgoingResponseFormat = WebMessageFormat.Json;
        HelpEnabled = true;
    }

    public override WebMessageFormat DefaultOutgoingResponseFormat
    {
        get
        {
            return this.defaultOutgoingResponseFormat;
        }
        set
        {
            this.defaultOutgoingResponseFormat = value;
        }
    }

    protected override QueryStringConverter GetQueryStringConverter(OperationDescription operationDescription)
    {
        return new ClientEnumQueryStringConverter ();
    }
} 
```

# oracle10g - 如何在表中创建数千条虚拟记录 - Oracle

> ID：14627520
> 
> 赞同：0
> 
> 时间：2013-01-31T13:58:43.230
> 
> 标签：oracle10g, oracle11g, dummy-data

我在互联网的帮助下自己学习甲骨文......

现在，对于某些情况，我需要数千条记录，这些记录应该在我的表中可用。

手动创建数千条记录是不可能的...

**在 ORACLE 10g 中是否有任何工具或任何其他方式可以做到这一点...**

正如我所说，我是 Oracle 的新手，我需要一些 SOF 专业人士的建议......

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:04:41.470

这个数据库有一个[JDBC 驱动程序](http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html)。下载 Eclipse，将此驱动程序添加到路径并编写十行代码以根据需要插入尽可能多的 blabla，[此处为教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)。即使您以前从未编写过 Java 并且不会再尝试，也很容易做到。

# java - Lucene - Lucene 文档中的字段不是唯一名称

> ID：14627525
> 
> 赞同：2
> 
> 时间：2013-01-31T13:58:48.087
> 
> 标签：java, lucene

我在我正在处理的代码库中发现，在创建 lucene Document 时，相同的字段名称多次用于不同的值（术语）。

```
 doc.add(new Field("sameName", value1, store, index));
 doc.add(new Field("sameName", value2, store, index));
 ...
 doc.add(new Field("sameName", value3, store, index)); 
```

这是正确的吗？它有什么用？

然后在搜索过程中使用此字段的名称：

```
 QueryParser parser = new QueryParser(Version.LUCENE_40, "sameName", new StandardAnalyzer(
            Version.LUCENE_40)); 
```

尽管文档中有许多其他字段，但似乎在搜索过程中只使用了“sameName”字段。对我来说很奇怪。是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:16:19.523

一个字段可以使用多个值进行索引。例如，您可以有一个“内容字段”，其中包含文档中的所有单词以及诸如作者或标签之类的元数据。

关于您的搜索问题，根据您初始化 QueryParse 的字段（在本例中为“sameName”），这将是唯一搜索的字段。您当然可以向 QueryParser 添加多个字段。

# ajax - HTTP POST 方法的单个参数的 maxLength

> ID：14627526
> 
> 赞同：0
> 
> 时间：2013-01-31T13:58:48.057
> 
> 标签：ajax, http, post

### 你好，

当表单包含大量数据时，我收到**“400 Bad HTTP request”错误。**
我正在使用 Ajax 发出请求。我读到 HTTP POST 数据限制的最大限制从 2MB 到 8MB 不等，这取决于客户端和服务器。但我的数据大约只有 15Kb。

我无法理解的是个别参数也有任何限制吗？

假设：我有两个参数必须发送到我的 Ajax 请求。

```
 refHttp.open('POST','main.do?param1='+para1+'&param2='+para2,true); 
```

参数para1 和para2 的数据有时会更大（大约6KB）。

对各个参数的最大数据大小有任何限制吗？有没有其他方法可以将大数据发送到 POST 方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:50:25.773

如果您将参数作为 url 的一部分发送，您将受到该限制。

在您的情况下，使用 XMLHTTPRequest 对象的 send 方法，以便在 http 请求的正文部分发送：

```
refHttp.open('POST','main.do',true);
refHttp.send('param1='+para1+'&param2='+para2); 
```

# scala - Scala：使用 Akka 期货的 Redis 客户端实现

> ID：14627527
> 
> 赞同：10
> 
> 时间：2013-01-31T13:58:50.743
> 
> 标签：scala, redis, akka, future

我正在寻找 Scala 的 Redis 客户端实现。客户端应该是异步和非阻塞的，使用 Akka 期货。我发现或多或少有用的东西：

1.  [https://github.com/derekjw/fyrie-redis](https://github.com/derekjw/fyrie-redis)
2.  [https://github.com/debasishg/scala-redis](https://github.com/debasishg/scala-redis)

但他们俩都有自己的问题。第一个使用旧版本的 Akka，这会导致编译问题，第二个使用 scala.actors.Futures.future 而不是 Akka 期货。我看到了几个月前发生的对话：groups.google.com/forum/#!msg/akka-user/EDKA2aTigho/_wWcNIz2O3wJ

但我没有找到任何解决方案。有人有类似的吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-07T18:50:13.810

以下是一些新的 Scala Redis 库，它们是反应式（异步 + 非阻塞）： https:
[//github.com/debasishg/scala-redis-nb](https://github.com/debasishg/scala-redis-nb)
[https://github.com/etaty/rediscala](https://github.com/etaty/rediscala)
[https://github .com/Livestream/scredis](https://github.com/Livestream/scredis)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T23:43:41.007

[scala-redis](https://github.com/debasishg/scala-redis)目前是最好的选择。[虽然它是一个阻塞客户端，但在 README 文件](https://github.com/debasishg/scala-redis#implementing-asynchronous-patterns-using-pooling-and-futures)中给出了一些异步模式的示例。另请注意，库本身不使用`scala.actors.Futures.future`; 只有规范中的演示代码（测试代码）和自述文件。

如果您只需要在 Redis 中存储一些东西，也可以[使用 Spray.io 滚动您自己的 Redis 客户端`IOBridge`](http://rajivkurian.github.com/blog/2012/12/25/a-simple-redis-client-using-spray-io-actors-futures-and-promises/)。

附带说明：[Akka 期货已经在 Scala 2.10.0 中](http://doc.akka.io/docs/akka/snapshot/project/migration-guide-2.0.x-2.1.x.html)，并且`scala.actors` [从 Scala 2.11.0 开始被弃用](http://docs.scala-lang.org/overviews/core/actors-migration-guide.html)。我不确定为什么使用 scala-redis，`scala.actors`即使它依赖于 Akka 和 Scala 2.10.0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T07:20:37.453

有一个非阻塞客户端返回作为 finagle-redis 模块可用的 Futures。此处的示例用法： [https ://github.com/twitter/finagle/blob/master/finagle-example/src/main/scala/com/twitter/finagle/example/redis/RedisClient.scala](https://github.com/twitter/finagle/blob/master/finagle-example/src/main/scala/com/twitter/finagle/example/redis/RedisClient.scala)

一个警告：它目前返回 Twitter 期货。你可以用它来完成 Akka Future 的 Promise；Blake 的 NEScala 演讲幻灯片中的第一个代码示例就是一个例子：http: [//nescala.org/#t-8378162](http://nescala.org/#t-8378162)

Twitter 人员表示，当他们迁移到 2.10 时，他们将让 Twitter 期货实现 2.10 Future 特征以实现 API 兼容性。

scala-redis 的作者听起来有兴趣将其移植到使用 spray-io，在这种情况下它将是非阻塞的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-01T13:26:13.343

还有[scredis](https://github.com/Livestream/scredis)，它是一个基于 Akka IO 构建的完整、非阻塞和超快的 Scala Redis 客户端。它在 Livestream 的生产中广泛使用。

# c# - 在 MonoGame 中播放视频

> ID：14627529
> 
> 赞同：1
> 
> 时间：2013-01-31T13:58:59.213
> 
> 标签：c#, visual-studio, xna, visual-studio-2012, monogame

我正在尝试在单人游戏项目中播放视频。我过去在 XNA 中通过包含 Framework.Video 目录来完成此操作，这非常简单。这不能在 monogame 中完成，因为 Visual Studio 2012 不会接受 XNA 目录。

如果您实际上可以将视频放在monogame中，并且如果可以的话，我无法在任何地方找到任何其他解释方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T23:34:33.793

我将假设您问题中的“目录”实际上是指“命名空间”。

你正在尝试的是

```
using Microsoft.Xna.Framework.Media; 
```

或者

```
Microsoft.Xna.Framework.Media.VideoPlayer videoPlayer;
...
videoPlayer = new Microsoft.Xna.Framework.Media.VideoPlayer(); 
```

您无法访问这些命名空间的原因可能是因为您使用了错误的 MonoGame 分支。3D 和视频支持由 develop3d 分支提供（现在是 github 上官方 git 存储库中的默认分支：[https](https://github.com/mono/MonoGame) ://github.com/mono/MonoGame ）

您必须获取该分支的源代码并自己编译（只需在 VS2012 中加载项目）

作为起点，看看 MonoGame-Samples 中的 VideoPlayer 示例：[https ://github.com/CartBlanche/MonoGame-Samples/tree/master/VideoPlayer](https://github.com/CartBlanche/MonoGame-Samples/tree/master/VideoPlayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:36:44.860

Monogame for Windows 8 或 Winrt 目前没有 VideoPlayer。

您需要有一个“Monogame Windows Store XAML”项目或对您的 Monogame Store 项目进行一些更改”才能将其切换为 XAML 项目。

[http://codedealer.wordpress.com/2013/05/02/how-to-play-a-video-with-monogame-for-windows-8-winrt/](http://codedealer.wordpress.com/2013/05/02/how-to-play-a-video-with-monogame-for-windows-8-winrt/)

# css - 如何在没有分配高度的流体元素上使用 box-sizing:border-box？

> ID：14627530
> 
> 赞同：1
> 
> 时间：2013-01-31T13:59:00.203
> 
> 标签：css

`box-sizing:border-box`在我构建的流体网格上使用时遇到问题。我有 1 个主列，然后是一个包含 2 个网格项的辅助列。如果我添加`border-bottom: 2px solid grey`到辅助列中的第一个网格项目，box-sizing 将被忽略，这会使网格看起来不正常，因为第二列现在比主列略高。谁能建议我如何使这些看起来均匀，我知道这可能是因为我没有设定高度，但我不确定如何解决这个问题？

这是我的 JS Fiddle [http://jsfiddle.net/97qpV/](http://jsfiddle.net/97qpV/)

**CSS**

```
body * {
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
}

.featured-news-col {
width: 66.66667%;
float: left;
margin-right: 0%;
display: inline;
border-right: 2px solid grey;
}

.m-news-thumb {
position: relative;
display: block;
}

.sub-article{
    border-bottom: 2px solid grey;
}

.sub-article:last-child{
    border:none;
}

img {
display: block;
height: auto;
max-width: 100%;
min-width: 100%;
}

.additional-news-col {
width: 33.33333%;
float: right;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:30:17.887

如果您希望它们具有相同的高度，则需要设置高度。默认情况下，HTML 元素将“收缩包装”其内容，并且仅与内容一样高。

`box-sizing`不会改变这一点。它所改变的是添加边距、填充和边框等内容的方式`height`和确定方式。`width`

因此，例如，如果您有`div`以下内容：

```
div {
  height: 50px;
  width: 50px;
  border: 5px solid black;
} 
```

使用默认值`box-sizing`( `content-box`)，计算出来的大小`div`实际上是 60x60px（高度/宽度，加上两边边框的大小）。但是，使用 时`box-sizing: border-box`，该边框现在计为框大小的一部分，使其计算尺寸为 50x50 像素。

[Jeff Kaufman 很好地演示了 box-sizing 的工作原理，以及为什么 border-box 更有意义。](http://www.jefftk.com/news/2012-02-18)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:45:41.620

只有当内容与 3:2 的比例匹配时（例如，那些 600x400 的虚拟图像），这些框才会排列。通过添加边框，框不再适合该比例。

我认为没有任何方法可以使用 CSS 边框。如果最终内容是图像，我建议将边框作为图像的一部分。然后他们将始终以任何大小排列。

# android - Android DialogFragment：如何在多个 show() 调用中保留视图？

> ID：14627547
> 
> 赞同：4
> 
> 时间：2013-01-31T13:59:56.360
> 
> 标签：android, android-dialogfragment

我有一个对话框片段，它使用具有非常复杂的视图层次结构的自定义布局。对话框片段的代码或多或少类似于以下内容。

```
public class CardDetailDialog extends DialogFragment { 

    public CardDetailDialog() { 
        setRetainInstance(true);
        setStyle(STYLE_NORMAL, android.R.style.Theme_Light);
    }

    @Override
    public View onCreateView(LayoutInflater inflater,
            ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.card_detail_dialog, container, false);
        /* Modify some view objects ... */
        return view;
    }
} 
```

每当我调用`show()`这个对话框片段的方法时，我注意到它`onCreateView`总是被调用并且布局膨胀过程被重复。在我的应用程序中，用户可能希望在会话期间多次显示对话框，我认为这效率低下。有没有办法在多个`show()`调用中保持视图/对话框实例？是否可以使用 DialogFragment 来做到这一点，还是我必须直接处理`Dialog`类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T09:14:26.930

使用布尔标志似乎可以解决问题（请参阅 KEY CHANGEs）。我重写了 onCreateDialog，但在 onCreateView 中采用相同的策略也应该可以工作（保留对您创建的视图的引用）

我仍然遇到一些与方向更改相关的问题，但可能与[其他问题有关](https://stackoverflow.com/questions/14657490/how-to-properly-retain-a-dialogfragment-through-rotation)

```
public class LogFragment extends DialogFragment{

private boolean isCreated;  //KEY CHANGE
private Dialog mDialog;     //KEY CHANGE -- to hold onto dialog instance across show()s

public LogFragment() {
    setRetainInstance(true); // This keeps the fields across activity lifecycle
    isCreated = false;       // KEY CHANGE - we create the dialog/view the 1st time
}

@Override
public Dialog onCreateDialog(Bundle inState) {
    if (isCreated) return mDialog;  // KEY CHANGE - don't recreate, just send it back
    View v = View.inflate(getActivity(),R.layout.log_layout,null);
    mDialog = new AlertDialog.Builder(getActivity())
            ...
            .create();
    isCreated = true;  // KEY CHANGE Set the FLAG
    return mDialog;
} 
```

# c# - VSTO Word 激活功能区选项卡

> ID：14627553
> 
> 赞同：7
> 
> 时间：2013-01-31T14:00:02.757
> 
> 标签：c#, ms-word, vsto, ribbon

我的 word vsto 插件中有以下ribbon.xml：

```
<tab id="TabLetters" getVisible="IsLettersTabVisible" label="Letters">
 <group id="LettersGroup" label="Letters">
  <toggleButton id="NewWithTemplate"
              label="New using template Controls"
              size="large"
              imageMso="FileNew"
              onAction="NewTemplated" />
  </toggleButton>
 </group>
</tab> 
```

点击事件背后的代码如下：

```
public void NewTemplated(Office.IRibbonControl control, bool value)
{
  CloseDocument();

  var doc = Globals.ThisAddIn.Application.Documents.Add(Template: @"LETTER_V2.dotx", Visible: true);
  doc.Activate();

  _ribbon.ActivateTab("TabLetters");
} 
```

我原以为这会导致一个新窗口打开我的功能区选项卡，但它仍然是可见/当前的 HOME 选项卡。如何使我的标签是可见的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:39:10.530

您可以使用以下两种方法来设置活动选项卡：

`TabLetters.RibbonUI.ActivateTab("TabLetters");`或者

```
Globals.Ribbons.CustomRibbon.Tabs[Your tab id].RibbonUI.ActivateTab("TabLetters"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-22T06:55:03.507

我找到了 excel 2007 的解决方案。

代码 ：

```
int appVersion = Convert.ToInt32(Globals.ThisAddIn.Application.Version.Split(new char[] { '.' }, StringSplitOptions.RemoveEmptyEntries)[0]);
if (appVersion >= 14 )            
{
    ThisRibbonCollection ribb = Globals.Ribbons;
    ribb.[Your Ribbon].ApplicationGroup.RibbonUI.ActivateTab("tab");                
}
else if(appVersion == 12)  // Specific to Office 2007 only.
{
                SendKeys.Send("%TAB%"); // use sendwait if you running it in thread.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-15T13:03:50.390

在 Excel 2013 中，这是我需要使用的代码：

```
try
{
    //  Attempt to set the my VSTO ribbon bar as the active ribbon.
    string controlID = Globals.Ribbons.GetRibbon<MikesRibbon>().MikesTab.ControlId.ToString();
    this.RibbonUI.ActivateTab(controlID);
}
catch
{
} 
```

我偶然发现的一点是如何让 ControlID 传递给`ActivateTab`函数。

您需要`MikesRibbon.cs`在 VS2013 中打开您的文件（或等效的！）。它将显示功能区的外观，`FILE`功能区选项卡名称旁边有一个灰色选项卡。

在此设计器屏幕中，单击功能区的选项卡（即 右侧的选项卡`FILE`），您的属性窗口现在*将*显示一个`ControlID`值，您可以将其设置为您选择的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-27T10:51:13.113

仅适用于所有必须支持 Office 2007 的人（如我）。这是 Office 2007 的（**丑陋**但有效的）解决方案：

1.  打开办公应用
2.  按 ALT，然后查看自定义功能区选项卡的键盘快捷键
3.  在您的代码中，您现在可以通过*SendKeys.SendWait*函数发送此密钥

希望它可以帮助某人。问候，约尔格

* * *

代码：

```
 public void FocusMyCustomRibbonTab()
    {
        if (IsExcel2007())
        {
            Globals.Ribbons.GetRibbon<MyRibbon>().tabMyRibbonTab.KeyTip = "GGG";

            //Excel 2007: Must send "ALT" key combination to activate tab, here "GGG"
            SendKeys.Send("%");                       
            SendKeys.Send("{G}");                     
            SendKeys.Send("{G}");                     
            SendKeys.Send("{G}");                     
            SendKeys.Send("%");                       
        }
        else
        {
            //Excel 2010 or higher: Build in way to activate tab
            if (this.ribbon.RibbonUI != null)
            {
                this.ribbon.RibbonUI.ActivateTab("MY_RIBBON_TAB_NAME");
            }
        }
    }

    public static bool IsExcel2007()
    {
        return (Globals.ThisAddIn.Application.Version.StartsWith("12"));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-12T07:56:30.250

在 Word 2016 中，使用 RibbonUI.ActivateTabMso(controlID) 激活常规 Word 功能区选项卡。

此外，您可以通过添加您的插件来获得对功能区的正确引用：

```
static internal Microsoft.Office.Tools.Ribbon.OfficeRibbon rUI = null;

private void WorkBenchRibbon_Load(object sender, Microsoft.Office.Tools.Ribbon.RibbonUIEventArgs e)
    {
        rUI = ((Microsoft.Office.Tools.Ribbon.OfficeRibbon)sender).Ribbon;
    } 
```

# arrays - Fortran 数组加法出错

> ID：14627558
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:00:12.810
> 
> 标签：arrays, fortran, addition

我正在尝试添加两个数组，但由于某种原因，目标数组只包含零。当我编译并运行程序时，我没有收到任何错误，但输出文件是错误的。在代码中，我调用 dhscf 用值填充数组 Gnaatm 和 Gnascf，我（尝试）将它们保存在 givenaa 和 givenas 中，然后再次调用 dhscf 以获取 Gnaatm 和 Gnascf 的新值。当我将所有这些数组写入文件时，尽管 Gnaatm 和 Gnascf 不是，但 givenas en givenaa 似乎是空的。

我正在使用的代码是：

模块变量

```
 real(dp), dimension(:), allocatable :: Gnaatm(:), Gnascf(:), gavenaa(:), &
 & gavenas(:) 
```

端模块

grdsam.f：

```
allocate (Gnaatm(nasize))
allocate (Gnascf(nasize))
allocate (gavenaa(nasize))
allocate (gavenas(nasize))

    call dhscf(.....)
    gavenaa = Gnaatm 
        gavenas = Gnascf

    do ipt = 1, npt

      call dhscf(....)
       gavenaa = Gnaatm + gavenaa
       gavenas = Gnascf + gavenas
    enddo

open(unit=12, file="Zgavenaatm.txt", status="replace")
  do iwrite = 1, nasize
    write(12, *), iwrite, gavenaa(iwrite), Gnaatm(iwrite) 
  enddo
close(12)

open(unit=12, file="Zgavenascf.txt", status="replace")
  do iwrite = 1, nasize
    write(12, *), iwrite, gavenas(iwrite), Gnascf(iwrite) 
  enddo
close(12)

deallocate (Gnaatm)
deallocate (Gnascf)
deallocate (gavenaa)
deallocate (gavenas) 
```

结束毕业典礼

当我运行程序时，我没有收到错误，但输出文件是错误的。典型的输出是这样的：

```
 10   0.0000000000000000      -2.35488624992556957E-015
      11   0.0000000000000000      -4.75822627213221874E-017
      12   0.0000000000000000      -7.16040821425613171E-014
      13   0.0000000000000000       8.33283089385797112E-021
      14   0.0000000000000000      -1.04121906025281556E-014 
```

第二列只包含零，但第三列确实包含数字。所以数组 'Gnaatm' 和 'Gnascf' 包含数字，但是以某种方式将它们添加到 'gavenaa' 和 'gavenas' 会出错。谁能告诉我我做错了什么？

附言。我在 Ubuntu 12 上使用 gfortran 编译器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:41:11.510

如果任何 fortran 编译器在添加两个数组这样基本的问题上存在问题，我会感到非常惊讶，因此显示的代码不完全是您正在使用的代码，或者问题出在省略的部分代码中。

首先，您没有在这里显示它，所以我会问它：`implicit none`您的代码中有吗？没有它继续下去将是浪费时间；它避免了许多“愚蠢”的错误，例如拼写错误的变量名。

其次，您是否尝试过将您感兴趣的数组（部分）写入屏幕的老式调试方法？只需输入一些语句，例如

```
write(*,*) gavenaa(:5) 
```

在赋值语句之后立即查看数组是否包含您期望的值。

如果您仍然找不到出错的地方，请尝试将代码减少到一个最小但完整的示例，以展示相同的问题。这样做通常会发现错误，但如果没有，如果你能给他们一些完整且直接编译的代码，其他人会更容易帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:07:00.280

如果您只是在进行整个数组分配，为什么还要为`forall`构造而烦恼？由于所有有问题的数组都具有相同的大小，因此您可以简化此块：

```
gavenaa(1:nasize) = Gnaatm(1:nasize)
forall(icount = 1:nasize) 
    gavenas(icount) = Gnascf(icount) + gavenas(icount)
end forall 
```

至

```
gavenaa = Gnaatm
gavenas = Gnascf + gavenas 
```

同样在您的其余代码中。

我不能说您对 的使用`forall`是不正确的，但这似乎是不必要的，稍微精简您的代码将帮助您和我们正确诊断和解决您遇到的任何问题。

# php - 警告：mysql_result()：提供的参数不是有效的 MySQL 结果资源

> ID：14627561
> 
> 赞同：-2
> 
> 时间：2013-01-31T14:00:30.293
> 
> 标签：php, mysql, function

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

大家好，我希望你能像我上一个一样帮助解决这个问题。我正在尝试使用 php 进行用户注册，除此之外我做的一切都很好：

```
 Warning: mysql_result(): supplied argument is not a valid 
     MySQL result resource in 
```

首先，我尝试执行清理功能，但没有成功。这是我的第一次尝试

```
 function user_exists ($username){
    $username = sanitize ($username);
    return (mysql_result(mysql_query("SELECT COUNT('id') FROM 'members' WHERE 
    'username' = '$username' "), 0) == 1) ? true : false;
    } 
```

然后我虽然可以尝试使用 mysql_real_escape_string 但随后出现了 mysql_result 错误，这让我发疯了，因为我找不到我做错了什么。这是我的 mysql_real_escape_string 代码：

```
 function user_exists ($username){
     $username = mysql_real_escape_string ($username);
     return (mysql_result(mysql_query("SELECT COUNT('id') FROM 'members' WHERE 
     'username' = '$username' "), 0) == 1) ? true : false;
     } 
```

我希望有人能告诉我哪里做错了，这样我就可以从错误中吸取教训。谢谢你们！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:02:48.883

问题是你用单引号包裹表名和列名，它必须被删除，因为名称不在 MySQL 保留关键字列表中，而正确的转义方法是使用反引号。

```
SELECT COUNT(id) 
FROM members 
WHERE username = '$username' 
```

# wix - 使用集成池安装 Web 应用程序

> ID：14627562
> 
> 赞同：0
> 
> 时间：2013-01-31T14:00:37.643
> 
> 标签：wix, wix3.5, wix3

我有一个要安装在 IIS7 上的 Web 应用程序。我使用 wix 3.7，但我发现它不支持开箱即用的集成池。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:39:22.267

其实，确实...

```
<iis:WebAppPool Id="SomeAppPool" ManagedPipelineMode="Integrated" /> 
```

# javascript - jQuery 1.9 - Internet Explorer 9 在第一次 $ajax 请求后冻结

> ID：14627563
> 
> 赞同：5
> 
> 时间：2013-01-31T14:00:40.490
> 
> 标签：javascript, jquery, ajax, internet-explorer-9

对于[动态页面](http://www.habariwebcomponents.de/demo/ajaxstats.html)，我使用 Ajax Long Polling，即使使用 jQuery 1.9，Internet Explorer 在第一次请求后也会挂起。

脚本代码基于文章[Simple Long Polling Example with JavaScript and jQuery](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)

```
 <script type="text/javascript" charset="utf-8"> 
   $(document).ready(function(){ 
     (function poll(){
       $.ajax({ url: "ajaxstats.json", success: function(data){
         $("button.requests" ).empty().append(data.requests);
   }, dataType: "json", complete: poll, timeout: 30000 });
     })();
   });
 </script> 
```

控制台显示没有错误。

`ajaxstats.json`IE 网络监视器立即显示对资源的许多请求，**响应时间 < 1 ms**和`304 (not modified)`响应代码。响应正文正确（JSON 代码）。

服务器代码总是将答案延迟 1000 毫秒。在 Firefox 中，Firebug XHR 日志显示每个请求大约需要 1000 毫秒，正如预期的那样。

Firefox 和 Internet Explorer 的 HTTP 响应代码不同：

*   在 Firefox 中：响应代码是`200 ok`
*   在 Internet Explorer 9 中，响应代码为`304 (not modified)`

有没有办法解决这个 IE 问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T14:27:33.590

尝试将缓存参数设置为false，如果设置为false，它将强制浏览器不缓存请求的页面。

```
 <script type="text/javascript" charset="utf-8"> 
   $(document).ready(function(){ 
     (function poll(){
       $.ajax({ url: "ajaxstats.json", success: function(data){
         $("button.requests" ).empty().append(data.requests);
   }, dataType: "json", complete: poll, timeout: 30000, cache: false });
     })();
   });
 </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:25:53.577

使用`setTimeout`文章上的版本。该`timeout`选项设置请求的超时时间，而不是等待下一个请求的时间。

有对来自 Lars 的评论的[回复](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery#comment_147)，作者提出了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:36:57.093

除了 IE9 很慢之外，我没有很好的答案来解释为什么 IE9 会挂起。调用 ajax 调用的回调将间歇性地花费很长时间。在工作中进行测试时，我发现在 IE9 中针对同一台服务器执行相同的 ajax 调用所花费的时间是 Firefox 中的 5 倍以上，即使浏览器在同一台机器上运行也是如此。

如果您正在构建一个实时应用程序并且可以访问它运行的实际服务器，我强烈建议您使用 Socket.IO。 [http://socket.io/](http://socket.io/) 最初它是为 node.js 构建的，但现在大多数主要语言都有服务器端实现。

客户端库有这个后备顺序：

*   网络套接字
*   Adobe Flash 插座
*   AJAX 长轮询
*   AJAX 多部分流式传输
*   永远的 iframe
*   JSONP 轮询

在较新的浏览器上，您可以获得真正的 Web 套接字性能，在那些不支持它的浏览器上，您可以获得免费的长轮询，但您可以使用相同的干净 Socket.IO 接口将其视为 Web 套接字。

# javascript - 在 JavaScript 中以 20（或 X）的步长四舍五入？

> ID：14627566
> 
> 赞同：7
> 
> 时间：2013-01-31T14:00:46.103
> 
> 标签：javascript, rounding

我的数字从 50 开始，以 190 结束。步骤总是 20 -->

*50, 70, 90, .... 190*

现在我从一个必须根据这个四舍五入的文本文件中得到一个数字。所以如果我得到 55，它应该变成 70，如果我得到 77，它应该是 90。如果我得到 90，它当然应该保持 90。我知道如何做到 10 步：

```
// 55 --> 60
number = Math.ceil(number / 10) * 10 
```

如何四舍五入我使用 20 步得到的数字？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-31T14:14:22.150

如果要以 x 为增量进行舍入，并带有偏移量：

```
function round(number, increment, offset) {
    return Math.ceil((number - offset) / increment ) * increment + offset;
}
round(51,  20, 10) // 70
round(70,  20, 10) // 70
round(99,  20, 10) // 110
round(100, 20, 10) // 110 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:08:10.940

```
function round(number,x,o) {
 o = ~~(o);
   return o + Math.ceil((number - o)/ x ) * x 
 }
 console.log(round (55,20,10)) //70
 console.log(round (77,20,10)) //90
 console.log(round (90,20,10)) //90 
```

@Cerbrus thx 指出这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:05:49.753

也许有类似的东西

```
number = Math.ceil( (number - 50) / 20 ) * 20 + 50; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T14:15:48.170

```
var number;
var a =number-10-((number-10)%20);
var result=a+30;
// does not work if num is 70 or 90 so
if(result-20==number)
Result=number; 
```

或作为单行：

```
var result=number+20-((number-10)%20) - result-20==number : 0 ? 20; 
```

The logic is that first, you add 20 to the number. Take the number 77\. 77+20=97\. But, 77+20-7=90, what you want. And 7 is the difference between 77 and 70, the previous valid number. You can get the differencewith (number-10)%20\. However, it doesn't work if number is OK to start out with, hence the logic at the end.

# python - 在python中选择子序列混淆

> ID：14627567
> 
> 赞同：1
> 
> 时间：2013-01-31T14:00:47.967
> 
> 标签：python, string

> **可能的重复：**
> [Python 切片表示法](https://stackoverflow.com/questions/509211/the-python-slice-notation)

我对 python 子序列选择的工作方式感到困惑。假设我有以下代码：

```
>>> t = 'hi'
>>> t[:3]
'hi'
>>> t[3:]
''
>>> print t[:3] + t[3:]
hi
>>> print t[3]

Traceback (most recent call last):
File "<pyshell#4>", line 1, in <module>
print t[3]
IndexError: string index out of range 
```

请解释一下这个东西在python中是如何工作的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:10:06.960

我总是觉得它们允许切片超出范围的序列行为有些有趣。但是，这是[记录在案](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)的。特别是在要点 4 中，它描述了序列类型的切片：

> 从 i 到 j 的 s 切片被定义为具有索引 k 的项目序列，使得 i <= k < j。**如果 i 或 j 大于 len(s)，则使用 len(s)。**如果 i 被省略或 None，使用 0。如果 j 被省略或 None，使用 len(s)。如果 i 大于或等于 j，则切片为空。

或要点 5，它描述了使用可选的 stride 参数进行切片：

> 步骤 k 从 i 到 j 的 s 切片定义为具有索引 x = i + n*k 的项目序列，使得 0 <= n < (ji)/k。换句话说，索引是 i、i+k、i+2*k、i+3*k 等等，当达到 j 时停止（但从不包括 j）。**如果 i 或 j 大于 len(s)，则使用 len(s)。**如果 i 或 j 被省略或没有，它们将成为“结束”值（结束取决于 k 的符号）。注意，k 不能为零。如果 k 为无，则将其视为 1

请注意，如果您查看第 3 点（其中描述了`s[index]`），则没有从越界索引到界内索引的相应转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:05:18.167

子序列或切片符号是宽容的。 将从头到尾为`t[:3]`您提供一片 of*或第三个元素，以先到者为准*，如果第三个元素*一直存在*，您将从中获取一片。不宽容的直接索引；索引元素必须存在，否则会出现异常。对于切片，如果结束索引超出范围，您将获得整个原始列表，如果开始索引超出范围，您将获得一个空列表。`t`*`t[3:]``t`*`t[3]`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:08:55.037

`t[start:stop]`打印 start <= x < stop 的所有元素 x。当某些元素不存在时，它根本不会打印它们。

`t[index]`另一方面，如果给定索引处没有元素，则会出错。

仅在您的示例中`t[0]='h'`，并且`t[1]='i'`存在可以解释您的结果。

`print t[3:]`应该什么都不返回而不是'hi'，这也是我的python解释器的情况。**

# vim - 如何用缓冲区中已有的内容替换引号中的内容？

> ID：14627571
> 
> 赞同：1
> 
> 时间：2013-01-31T14:00:55.480
> 
> 标签：vim

我想用我已经存储在缓冲区（来自 yanking`y`或删除`d`）中的字符串替换引号中的内容，如下所示：

`"something very important"`

至

`"something even more important"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:03:14.253

怎么样

```
vi"p 
```

光标在`"`

棘手的问题...我首先想出了`di"P`. 但是，这`d`将重置您的未命名寄存器（您在问题中指的缓冲区）......

**根据评论编辑**

我在你的问题中没有看到这个要求。如果你想保留寄存器值，你可以试试

```
nnoremap <leader>pi" :let t=@"<cr>vi"p:let @"=t<cr> 
```

这样，当您的光标在`"`s 之间时，只需键入`<leader>pi"`，引号中的值将变为未命名寄存器的值，并且该寄存器保持相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:12:01.877

如果您想保留原始寄存器内容（而不是用替换的文本替换它们），您可以使用我的[ReplaceWithRegister 插件](http://www.vim.org/scripts/script.php?script_id=2703)。命令将在`gri"`那时。

# css - p:dataTable: 点击嵌入内容时触发 rowSelect 事件（图片）

> ID：14627579
> 
> 赞同：3
> 
> 时间：2013-01-31T14:01:27.613
> 
> 标签：css, jsf-2, primefaces, datatable

在下面的示例中，如果我单击一行将触发 rowSelect-event，但如果单击该行中的图像则不会。

我理解为什么会发生这种情况，但我想知道是否有一些优雅的方式来包含子组件（也可能是嵌套的子组件）？

```
<h:form id="form">
    <p:growl id="growl" showDetail="true" />
    <p:dataTable id="cars" var="car" value="#{tableBean.cars}" rows="5"
        selectionMode="single">
        <p:ajax event="rowSelect" listener="#{tableBean.onRowSelect}"
            update=":form" />
        <p:column headerText="Model">
            <p:graphicImage value="myImage.png"
                style="width: 40px; height: 40px;" />
        </p:column>
    </p:dataTable>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T13:50:36.510

您可以尝试在图像上添加 onclick 事件：

```
<p:dataTable rowIndexVar="rowIndex" widgetVar="scrollist"...

... onclick="scrollist.unselectAllRows(); scrollist.selectRow(#{rowIndex})" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-04T00:08:57.933

**如果嵌入的内容是**始终显示在列中的图像（如下图所示）并且您希望图像不干扰行选择，您可以执行以下操作：

```
<p:column styleClass="my_icon"> 
```

并创建 css 类：

```
.my_icon {
   background-image: url("myicon.png");
   background-repeat: no-repeat;
   background-position: center;
} 
```

你会得到这样的东西：

[![结果](../Images/17454fd0a77d8fbc9c85a59c5534d1ef.png)](https://i.stack.imgur.com/z2kq7.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-03T01:43:25.190

只需将 css 添加到嵌入的 img 标签：

表 tbody td img { 指针事件：无；

```
 -moz-user-select: -moz-none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -o-user-select: none;
  user-select: none; 
```

}

# objective-c - 如何在 Objective-C 中转换 –,„ 等

> ID：14627583
> 
> 赞同：0
> 
> 时间：2013-01-31T14:01:40.897
> 
> 标签：objective-c

我用 Python 制作了服务器端，并将一些抓取的 html 字符串返回到由 Objective-C 制作的客户端。

但是当我尝试从客户端显示从服务器重新调整的字符串时，它包含 –,„ 等。但我不知道为什么它包含上述字符。

你有什么主意吗？我想用Objective-C正确转换它们。你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:09:38.037

如果你想坚持使用 Cocoa，你也可以尝试使用 NSAttributedString 和`initWithHTML:documentAttributes:`，但是你会丢失标记：

```
NSData *data = [@"<html><p>&#8211 Test</p></html>" dataUsingEncoding:NSUTF8StringEncoding];
NSAttributedString *string = [[NSAttributedString alloc] initWithHTML:data documentAttributes:nil];
NSString *result = [string string]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:05:36.390

这些是[HTML 实体](http://www.w3schools.com/tags/ref_entities.asp)
这里是HTML 的[NSString 类别](http://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSString+HTML.m)，这里是可用的方法：

```
- (NSString *)stringByConvertingHTMLToPlainText;
- (NSString *)stringByDecodingHTMLEntities;
- (NSString *)stringByEncodingHTMLEntities;
- (NSString *)stringWithNewLinesAsBRs;
- (NSString *)stringByRemovingNewLinesAndWhitespace; 
```

# jquery - JQuery 自动完成 OnSelect 动作

> ID：14627584
> 
> 赞同：0
> 
> 时间：2013-01-31T14:01:43.230
> 
> 标签：jquery, asp-classic, autocomplete

我在旧的自动完成 jquery 上工作，我找到了一些代码，它工作得很好，但我想添加一个新功能。选择一个选择之一时，应单击“提交”按钮。但我不擅长 JQuery。有人帮忙吗？

**ASP 页面**

```
 <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>ASP  AutoComplete</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.autocomplete.pack.js"></script>
<link rel="stylesheet" type="text/css" href="jquery.autocomplete.css" />
<script type="text/javascript">

function test(){
alert("test);
}

//Script Features:::        http://docs.jquery.com/Plugins/Autocomplete/autocomplete#url_or_dataoptions
$().ready(function() {
    function formatItem(row) {
        return row[0] + " (<strong>id: " + row[1] + "</strong>)";
    }
    function formatResult(row) {
        return row[0].replace(/(<.+?>)/gi, '');
    }
    $("#input").autocomplete("sorgu.asp", {
        width: 151,
        selectFirst: false,
        cacheLength : 0,
        minChars: 2
        //autoFill: true
    });

    $("#input").result(function(event, data, formatted) {
        if (data)
            $(this).parent().next().find("input").val(data[1]);
    });
});
</script>
<style type="text/css">
body { font-family: Helvetica; font-size: 12px; color: #000; }
</style>
</head>
<body>
    <div>
        <form>
            <div>
                <div style=" font-size: 20px; color: #F00;">Write some Letter:<div/>
                <p>
                    <label><b>Search:</b></label>
                    <input type="text" id="input" />
                    <button value="Submit" onClick="test()" id="bt1">Submit</button>
                </p>
            </div>
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:07:21.567

```
$(function() {
    $("#input").autocomplete({
    width: 151,
    selectFirst: false,
    cacheLength : 0,
    minChars: 2,
    select: function(event, ui) { 
        $("#formname").submit(); }
});
}); 
```

这将在选择时提交您的表单。

# google-drive-api - 如何使用 PHP 显示 My Drive 文件夹的文件夹和文件列表

> ID：14627585
> 
> 赞同：1
> 
> 时间：2013-01-31T14:01:44.967
> 
> 标签：google-drive-api

谁能告诉我如何从*Google Drive*访问 My Drive 的所有文件和文件夹。

我在用 ：

```
$client = new Google_Client();
// Get your credentials from the APIs Console
$client->setClientId('1095973606032-jkkjsp0ja5qdvp6f8p629964a2n0aqpn.apps.googleusercontent.com');
$client->setClientSecret('1Tkpr3IVYX5n7YtwR_cI3Sui');
$client-    >setRedirectUri('http://staging.test.jbiprojects.co.uk/google_drive/drive.php');
$client->setScopes('https://www.googleapis.com/auth/drive.file');

$service = new Google_DriveService($client);

$authUrl = $client->createAuthUrl(); 
```

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:47:52.523

Check out the Google [Drive SDK PHP Quickstart](https://developers.google.com/drive/quickstart-php). It will get you up and running if you copy-paste the code.

Instead of uploading a file, you should make a call to:

```
$service->files->list 
```

Check out the PHP sample for [files.list](https://developers.google.com/drive/v2/reference/files/list) here.

# ios - 通过单击 URL 从 iTunes 安装 IOS 应用程序

> ID：14627586
> 
> 赞同：0
> 
> 时间：2013-01-31T14:01:46.413
> 
> 标签：ios, ipad, app-store, itunes

我有一个要求，用户将点击一个链接（**免费**应用程序的 iTunes 链接），该链接是他在 iPad 上的电子邮件中收到的。应用程序应该安装在 iPad 上，前提是用户已登录 iTunes。

请让我知道，如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:25:18.787

如果您将链接传递给用户并且他们在他们的 iPad 上选择它（例如，以 的格式`https://itunes.apple.com/us/app/appname/id364304764?mt=8`），他们将被转发到 App Store 应用程序，并显示应用程序信息页面。用户必须明确地按“免费”然后“安装”来安装应用程序。此时，他们可能必须输入 iTunes 密码才能继续。

没有办法绕过这一点，每个人都必须通过相同的程序来安装应用程序；通过应用商店*。

*除非它是企业应用程序，但不应将它们分发给客户，因为这会违反企业服务协议。

# python - 任何实际的 Python 库都可以与 VmWare VIX API 一起使用？

> ID：14627592
> 
> 赞同：0
> 
> 时间：2013-01-31T14:02:12.173
> 
> 标签：python, vmware, vix

这里有人使用这样的库吗？或者使用**`ctypes`**dll`VIX API`就足以完成管理 VMWare 映像的任务？

根据您的经验，您有什么想法和建议？是否有任何用 Python 编写的有效且最新的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-17T19:52:21.103

我会推荐 VMware 发布的官方库：[pyVmomi](https://github.com/vmware/pyvmomi)。它反映了[vSphere Web 服务 SDK](https://www.vmware.com/support/developer/vc-sdk/)并在 Python 2 或 3 中工作。

这里有一个讨论：[PySphere 和 PyVmomi 有什么区别？](https://stackoverflow.com/questions/21326448/what-is-the-difference-between-pysphere-and-pyvmomi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:48:37.010

看来[`pysphere`](http://pypi.python.org/pypi/pysphere/0.1.7)，[`vix`](https://github.com/naim94a/vix)合适。

它已更新到最新版本[`VMware API`](http://www.vmware.com/support/pubs/sdk_pubs.html)，并且已经开发和维护了一段时间。

即使对于非常复杂的脚本，您也应该使用 powershell 的官方绑定：[`VMWare PowerCLI`](http://communities.vmware.com/community/vmtn/server/vsphere/automationtools/powercli).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-22T15:56:56.043

如果您的 VirtualMachine 对象是 vSphere 环境的一部分，您应该使用 pyVmomi 并使用 GuestOperations。VIX 实际上已从 vSphere [https://www.vmware.com/support/developer/vix-api/VIX-1.14-ReleaseNotes.html#Deprecate](https://www.vmware.com/support/developer/vix-api/VIX-1.14-ReleaseNotes.html#Deprecate)中弃用，实际上应该仅用于 Fusion 或 Workstation。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T23:04:45.710

我使用[ctypesgen](https://github.com/davidjamesca/ctypesgen)为 VIX dylib 生成 ctypes 包装器，并编写了一些辅助类（主机、VM、作业等）。我使用它将虚拟机恢复为命名快照并在来宾中运行脚本。

# systemc - 向 SystemC 中的模块发送事件触发器

> ID：14627594
> 
> 赞同：1
> 
> 时间：2013-01-31T14:02:17.960
> 
> 标签：systemc

我想做的感觉就像将 av 事件从一个模块发送到另一个模块（比如按下按钮）。但正如我所搜索的那样，它似乎应该以其他方式完成，因为我还没有找到任何标准的方式来发送 av 事件触发器/通知。

我的简单模型由两个模块组成，1 个发电机和 1 个控制器。我希望生成器能够将控制器中的内部布尔值设置为 true（表示传感器上已注册）。控制器有一个线程，如果自上次以来有注册，则该线程将采取行动，然后将 bool 重置为 false（在 5 秒等待期间有效地忽略并丢弃更多传感器注册）。

```
if(sensor_activity)
{
    doStuff();
    wait(5, SC_SEC);
    sensor_activity = 0;
} 
```

我应该如何将信号从发生器发送到控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T09:48:12.893

有很多方法可以做到这一点。

1.  Systemc 基本上是 C++。因此生成器可以调用控制器的一个公共函数，该函数将通知一个内部事件，该事件将触发所需的线程。
2.  使控制器中的进程对端口敏感，该端口将通知内部事件，该事件将触发所需的线程。从生成器写入端口。
3.  声明一个全局 sc_event 变量。现在在生成器中通知它并使用它来触发控制器中的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T02:17:53.827

使用缓冲区。即使你写了它已经拥有的值，它也会触发。

# c++ - DLL 中的静态数据

> ID：14627597
> 
> 赞同：3
> 
> 时间：2013-01-31T14:02:26.400
> 
> 标签：c++, windows, dll, linker

[我的问题与这个](https://stackoverflow.com/questions/2479784/exporting-static-data-in-a-dll?rq=1)问题非常相似：**DLL**中的类有一个**静态成员**。在这种情况下，静态成员是[QString](https://qt.gitorious.org/qt/qt/blobs/c7e34fccc4366391487d6d9eb4bb58dd374e8035/src/corelib/tools/qstring.h)类型（QT 类型）并为类提供名称。我提供了类级别的正常导出：`__declspec(dllexport)`.

当我将 DLL 与我的类链接到另一个项目并尝试编译它时，我收到静态数据的“未解析的外部符号”错误。我验证了两件事：

1.  *Dumpbin*肯定会报告编译后的 DLL 要导出的静态数据成员。
2.  实际上，报告错误的应用程序中似乎没有使用静态数据成员。

**DLL 中的 HEADER 文件 (.h) 为：**

```
class __declspec(dllexport) MyClass {
public: 
   virtual ~MyClass();
   static const QString JUST_A_NAME;    
}; 
```

**DLL 中的实现文件 (.cpp) 是：**

```
#include "MyClass.h"

MyClass::~MyClass() { }
const QString MyClass::JUST_A_NAME("call_me_al"); 
```

**与[已经提到](https://stackoverflow.com/questions/2479784/exporting-static-data-in-a-dll?rq=1)的帖子**相比，我避免了内联方法，例如实现显然不在标题中。类型[QString](https://qt.gitorious.org/qt/qt/blobs/c7e34fccc4366391487d6d9eb4bb58dd374e8035/src/corelib/tools/qstring.h)（参见第 83 行 ff.）本身包含几个内联。这会导致错误吗？

**编辑：**我在我的应用程序的标题中添加了一个导入语句。它位于任何包含之前。 **APPLICATION 中的 HEADER 文件 (.h) 为：**

```
class __declspec(dllimport) MyClass {
public: 
   virtual ~MyClass();
   static const QString JUST_A_NAME;    
}; 
```

错误保持不变：

```
error LNK2001: non resolved external symbol ""public: static class QString const MyClass::JUST_A_NAME" (?JUST_A_NAME@MyClass@@2VQString@@B)". <name of .obj file from application> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T12:23:43.170

在您的应用程序头文件中，您需要做两件事。

1.  导出时，声明定义`__declspec(dllexport)`
2.  导入时，声明定义`__declspec(dllimport)`

你显然不能同时做这两个。

你所要做的就是定义一个这样的宏：

```
#ifdef __COMPILING_MYLIB
#define MYLIBAPI __declspec(dllimport)
#else
#define MYLIBAPI __declspec(dllexport)
#endif 
```

然后像这样声明您的导出：

```
// mylib.h
class MYLIBAPI MyClass {
public: 
   virtual ~MyClass();
   static const QString JUST_A_NAME;    
}; 
```

然后，在编译 MYLIB 时，您传递`-D__COMPLING_MYLIB`给编译器，它会触发`#if`上述内容。

这样，在编译*库本身*时，头文件将事物声明为导出，但是在编译将*使用*该库的事物时，它们被声明为导入。

# actionscript-3 - 可以访问本地文件系统和网络的 Flex 应用程序？

> ID：14627598
> 
> 赞同：0
> 
> 时间：2013-01-31T14:02:27.043
> 
> 标签：actionscript-3, apache-flex, web-applications, network-programming, filesystems

我正在开发一种独立的信息亭，并且遇到了标题中的问题。

解释：

*   **应用程序通过“--app=file://...”**选项在 Google Chrome 中启动
*   应用程序应在用户交互后从本地文件系统播放视频文件，播放完成后应用程序将向 Web 服务器发送日志消息。

问题：

*   当与**“-use-network=false”**一起使用时，我可以使用本地文件并且不能发送消息。
*   当与**“-use-network=true”**一起使用时，我可以发送消息但不能红色本地文件。
*   在本地 Mac 上使用调试器和 Safari 时 - 没问题。

有没有办法解决这个问题？使用的软件：Debian，最新的 Google Chrome 和最新的 Pepper Flash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:55:44.607

正如 Adob​​e 文档中所写：

> 本地受信任沙箱 - 注册为受信任（由用户或安装程序）的本地 SWF 文件放置在本地受信任沙箱中。系统管理员和用户还可以根据安全考虑将本地 SWF 文件重新分配（移动）到本地受信任的沙箱或从本地受信任的沙箱中重新分配（移动）（请参阅管理员控件和用户控件）。分配给本地受信任沙箱的 SWF 文件可以与任何其他 SWF 文件交互，并且可以从任何地方（远程或本地）加载数据。

除此之外，我怀疑是否有一种简单的方法可以同时进行联网和访问本地文件，因为这就是 Flash 安全沙箱的工作方式。或者您可以编写一个 AIR 应用程序（Linux 上最后支持 2.6 版本）或将您的 swf 包装在一个本机应用程序中，该应用程序将充当 .swf 和网络/文件系统接口之间的层。

# c# - 字符串字段中的 sqlite 数值导致 InvalidCastException

> ID：14627601
> 
> 赞同：4
> 
> 时间：2013-01-31T14:02:31.577
> 
> 标签：c#, sqlite, .net

我有一个具有以下定义的 SQLite 表：

```
create table routes(id INTEGER PRIMARY KEY AUTOINCREMENT, name string) 
```

并希望使用[System.Data.SQLite](http://system.data.sqlite.org/)获取记录：

```
cmdRoute.CommandText = "SELECT id, name FROM routes";
using (var rdrRoute = cmdRoute.ExecuteReader())
{
    if(rdrRoute.Read())
    {
        var route = new Route();
        route.Id = rdrRoute.GetInt32(0);
        route.Name = rdrRoute.GetString(1); // Throws InvalidCastException
    }
} 
```

当数据库中的值为数字时，GetString 会引发 InvalidCastException。当我把它放在`rdrRoute.GetValue(1)`手表里时，它显示类型是“object {string}”。当我将值更改为非数字值时，它工作正常。

我查看了[SQLite DataReader 代码](http://system.data.sqlite.org/index.html/artifact/5ca6e5449b25f7e8d8948cb02d5310b8c57b8b75)，看起来 SQLite 检查值以将其映射到一组允许的类型。

这是预期的行为吗？我该如何防止这种情况，以某种方式包含数字的字符串仍然是字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:10:55.260

`for the SqlDataReader.GetString Method, No conversions are performed; therefore, the data retrieved must already be a string.`

`Call IsDBNull to check for null values before calling this method.`

将您的代码更改为此，它应该可以工作

```
cmdRoute.CommandText = "SELECT id, name FROM routes";
using (var rdrRoute = cmdRoute.ExecuteReader())
{
    if(rdrRoute.Read())
    {
        var route = new Route();
        route.Id  = rdrRoute["id"];
        if (!rdrRoute.IsDBNull(rdrRoute.GetOrdinal("name")))
        {
           route.Name = rdrRoute["name"].ToString();
           //route.Name = rdrRoute.GetString(rdrRount.GetOrdinal("name"));
           //may not work in .Net 4.0
        }
    }
} 
```

.NET 4.0 GetString() 可能会导致 .NET 4.0 中的错误/错误我会尝试将项目回滚到 3.5 版或创建一个使用代码示例的项目并将其创建为 .NET 3.5，如果这适用于`GetString()`我发现.net 4.0 中存在一些错误，我不确定 KB Fix 何时发布

# objective-c - 撤消 CIImageAccumulator

> ID：14627611
> 
> 赞同：0
> 
> 时间：2013-01-31T14:03:11.193
> 
> 标签：objective-c, macos, core-image, accumulator, ciimage

我有这样的绘画应用程序女巫作品：

*   在 mouseDown/mouseDragged 事件中，我使用 CIRadialGradient 在事件位置绘制一个点
*   取 CIRadialGradient outputImage 并在 CISourceOverCompositing 过滤器中使用它作为 inputImage（开始时的 inputBackground 为空 CIImage）
*   将CISourceOverCompositing outputImage设置为brushAccumulator图像（后面将brushAccumulator图像作为CISourceOverCompositing filter中的inputBackgroundImage）
*   设置brushAccumulator 图像为CIBlendWithMask inputMaskImage 设置CIBlendWithMask outputImage 为mainImageAccumulator 图像绘制mainImageAccumulator 到屏幕

我想实现撤消方法。首先，我认为我可以使用brushAccumulator.image（CIImage）作为撤消对象（将其添加到mutableArray，然后在调用撤消方法时将brushAccumulator图像设置为mutableArray对象之一）但我发现：CIImage不是包含像素的图像，它只是构建它的一系列指令的结果，例如 CIFilter 的输出。因此，如果您复制 CIImage，您只需复制那些指令，修改后会修改输出。

所以我想我可以从brushAccumulator的图像中制作NSBitmapImageRep并将其存储到NSMutableArray。但是我在更新brushAccumulator 时遇到了问题。我将新的 CIImage 设置为由 NSMutableArray 中的 NSBitmapImageRep 之一制成的新 CIImage 作为brushAccumulator 图像，但brushAccumulator 图像不会改变。

当我的绘画应用程序基于 CIImageAccumulator（类似于 CIMicroPaint 示例代码）时，您能为我提供什么来实现撤消/重做效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:43:56.050

这是一个适用于我的通用算法。您需要复制图像：1）您直接绘制的图像-“直接位图”2）绘制操作之前的外观副本-“撤消位图”

因此，您直接绘制，并记下更改框架是什么（“changeFrame”）然后您从撤消上下文中复制出changeFrame，以便稍后用于撤消（并将changeFrame与它一起存储在某个对象中- SOChangeBitmap）。然后从直接位图的 changeFrame 中提取图像，并用更改帧替换撤消位图中的像素。

然后，要撤消，您使用 SOChangeBitmap (image + changeFrame) 并将其应用于直接位图（并更新撤消位图）。

# java - 无法运行 Java 程序

> ID：14627612
> 
> 赞同：0
> 
> 时间：2013-01-31T14:03:12.607
> 
> 标签：java

我在运行我的第一块 Java 时遇到了问题。我能够编译它并生成一个 .class 文件，但是由于某种原因我无法运行它。它可能与目录路径有关。文件名为“Simple”，我将其保存在名为“newfolder”的文件夹中。

我可以通过输入“javac newfolder/Simple.java”来编译 Simple.class，但是当我输入“java newfolder/Simple”时，出现了以下消息：

```
java: exception in thread “main” java.lang.NoClassDefFoundError: newfolder/Simple (wrong name: Simple) 
```

这是我输入的原始代码：

```
// This is a simple Java program.

public class Simple
{
   public static void main(String[] args)
   {
     System.out.println("Hello World");
   }
} 
```

我认为[这里的答案](https://stackoverflow.com/questions/13253100/java-exception-in-thread-main-java-lang-noclassdeffounderror-chain-of-respon)是我的胡同，但我一直无法让它为我工作，所以任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:05:35.407

尝试从 newfolder/ 中运行 Java 文件

```
cd newfolder/
java Simple 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:04:53.713

我怀疑你想使用一个为你设置这些东西的 IDE，但你需要

```
package newfolder; 
```

在开始时。

# c# - 串行通信写入

> ID：14627620
> 
> 赞同：1
> 
> 时间：2013-01-31T14:03:24.857
> 
> 标签：c#, serial-port

我编写了一个具有串行通信功能的简单 c# 应用程序。我正在使用它来读取和写入设备。该设备识别*字符串命令*。我可以使用此应用程序成功地从设备中读取。但是人们正在向设备写入（发送）命令。我只是在使用

```
if (serialPort.IsOpen == true)
{
serialPort.Write("Command1");
} 
```

但是我的设备没有响应。

**为了检查，**我尝试使用超级终端向我的设备发送相同的命令，我的设备可以识别它并且工作正常。

任何人都可以指导我什么是准确的编写方式或需要确保在 c# 中写入串行端口的内容。这是编码问题吗...（使用同一应用程序进行串行读取工作得很好！！）谢谢您的时间。

此外，没有异常或错误，并且在调试模式下执行此行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:16:11.857

这是一个非常常见的问题，并且总是由将 Handshake 属性设置为 None 引起的。如果 DTR 信号未打开，串行端口设备几乎总是关注握手信号并忽略您发送的任何内容。这表明您已通电并且它接收到的数据不是噪音。需要将 DtrEnable 设置为 true，这也是 HyperTerminal 所做的。

当它认为你还没有准备好接收任何东西时，它不会发回任何东西，因为 RTS 信号没有打开。需要将 RtsEnable 设置为 true，这也是 HyperTerminal 所做的。或者只是正确设置 Handshake 属性，Handshake.RequestToSend 是常见的要求。

如果您仍然遇到问题，那么您可以使用 SysInternals 的 PortMon 将您的程序发出的串行端口驱动程序命令与超级终端发出的命令进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:16:20.550

当您按 Enter 键发送信息时，超级终端可能会在您的输入中附加一个换行符，该信息由“换行符”和“回车符”组成。

检查您的硬件文档，但我的猜测是您尝试向其发送信息的设备正在寻找回车符“\r”，以表示输入结束。就像评论中的其他人所说的那样，将适当的字符附加到输入的末尾。

或者，您可以使用 SerialPort.WriteLine 函数来完成与在输入中附加换行符 '\r\n' 字符相同的事情，而无需显式修改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:14:55.783

```
if (serialPort.IsOpen)
    serialPort.WriteLine("Command" + "\r\n"); 
```

# css - div rtl 方向并查看 FF 底部的水平滚动页面

> ID：14627622
> 
> 赞同：1
> 
> 时间：2013-01-31T14:03:34.403
> 
> 标签：css, right-to-left

我将此代码放在我的 css 文件中，用于从右到左的方向：

```
div,td,input,textarea,table,tr,ul,li{direction:rtl;} 
```

这在 IE9、Chrome 中有效但在 FF 中我看到底部的水平滚动页面。（注意：当我删除此代码时不显示滚动页面并且有效）如何为 FF 解决这个问题？！

屏幕 ： ![在此处输入图像描述](../Images/902644d05fea84dc22c0c7b7d9471f3f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T07:29:19.290

我知道为时已晚，但您可以尝试以下修复，它对我来说是一种魅力：

```
html {
     overflow-y: scroll;
     overflow-x: hidden;
     overflow: -moz-scrollbars-vertical;
} 
```

祝你好运。

# ios - 如何在 UIDictationController 中调试此崩溃？

> ID：14627623
> 
> 赞同：3
> 
> 时间：2013-01-31T14:03:35.647
> 
> 标签：ios, ios6, crash-reports, ipad-mini

最近我正在尝试使用崩溃报告提供的信息进行调试。到目前为止，我已经能够识别和修复一些错误，但不是这个。

正如我从崩溃报告中看到的，UIDictationController 有问题，但我的代码根本没有调用`UIDictationController`。崩溃报告由[PLCrashReporter](http://code.google.com/p/plcrashreporter/)生成。

用户似乎正在使用 iPad Mini (WiFi) 并运行 iOS 6.0.2。

```
Incident Identifier: [REMOVED]
CrashReporter Key:   [REMOVED]
Hardware Model:      iPad2,5
Process:         MyApp [2849]
Path:            [REMOVED]
Identifier:      com.yourcompany.MyApp
Version:         1.1
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2013-01-26 02:11:01 +0000
OS Version:      iPhone OS 6.0.2 (10A550)
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0x32255350
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'

Last Exception Backtrace:
0   CoreFoundation                      0x3882e2a3 __exceptionPreprocess + 163
1   libobjc.A.dylib                     0x30d8897f objc_exception_throw + 31
2   CoreFoundation                      0x387788d9 -[__NSArrayM insertObject:atIndex:] + 769
3   UIKit                               0x36ad24c3 -[UIDictationMeterView initWithFrame:] + 267
4   UIKit                               0x36abe699 -[UIDictationView initWithFrame:] + 281
5   UIKit                               0x36abdcd1 +[UIDictationView sharedInstance] + 145
6   UIKit                               0x36aae7f5 -[UIDictationController setState:] + 149
7   UIKit                               0x36aaef5f -[UIDictationController setupForDictationStart] + 199
8   UIKit                               0x36aae5d7 -[UIDictationController startConnectionForReason:] + 51
9   UIKit                               0x36aaf173 -[UIDictationController startDictationFromLayout] + 55
10  UIKit                               0x36825c09 -[UIKeyboardLayoutStar touchUp:] + 5249
11  UIKit                               0x3682472f -[UIKeyboardLayout touchesEnded:withEvent:] + 387
12  UIKit                               0x3670c5f1 -[UIWindow _sendTouchesForEvent:] + 525
13  UIKit                               0x366f9801 -[UIApplication sendEvent:] + 381
14  UIKit                               0x366f911b _UIApplicationHandleEvent + 6155
15  GraphicsServices                    0x3771e5a3 _PurpleEventCallback + 591
16  GraphicsServices                    0x3771e1d3 PurpleEventCallback + 35
17  CoreFoundation                      0x38803173 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 35
18  CoreFoundation                      0x38803117 __CFRunLoopDoSource1 + 139
19  CoreFoundation                      0x38801f99 __CFRunLoopRun + 1385
20  CoreFoundation                      0x38774ebd CFRunLoopRunSpecific + 357
21  CoreFoundation                      0x38774d49 CFRunLoopRunInMode + 105
22  GraphicsServices                    0x3771d2eb GSEventRunModal + 75
23  UIKit                               0x3674d2f9 UIApplicationMain + 1121
24  MyApp                               0x000032e1 main (main.m:36)
25  MyApp                               0x00003230 start + 40

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x30f10350 __pthread_kill + 8
1   libsystem_c.dylib                   0x304f8973 abort + 95
2   MyApp                               0x000e954f uncaught_exception_handler + 27
3   CoreFoundation                      0x3882e57f __handleUncaughtException + 615
4   libobjc.A.dylib                     0x30d88a65 _objc_terminate() + 129
5   libc++abi.dylib                     0x3719807b safe_handler_caller(void (*)()) + 79
6   libc++abi.dylib                     0x37198114 std::terminate() + 20
7   libc++abi.dylib                     0x37199599 __cxa_current_exception_type + 1
8   libobjc.A.dylib                     0x30d889d1 objc_exception_rethrow + 13
9   CoreFoundation                      0x38774f21 CFRunLoopRunSpecific + 457
10  CoreFoundation                      0x38774d49 CFRunLoopRunInMode + 105
11  GraphicsServices                    0x3771d2eb GSEventRunModal + 75
12  UIKit                               0x3674d2f9 UIApplicationMain + 1121
13  MyApp                               0x000032e1 main (main.m:36) 
```

有什么办法可以解决这个错误吗？或者，至少可以缓解这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:19:28.657

问题是在您的应用程序的某个地方出现了一个键盘，并且在 iOS 版本 6.0.1 和 6.0.2 中，即使您没有指定启用它，苹果也启用了听写控制器。修复它的两种解决方案：创建没有它的自定义键盘或在您的应用程序中实现听写。

我的建议是顺其自然，只影响两个过时的 iOS 版本，希望随着用户升级他们的设备，崩溃会消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T14:47:37.323

我有一个自定义 TextView 的键盘，当用户按下听写按钮，说了些什么，按下完成，然后他们试图关闭键盘时，就会发生崩溃。可能这也是你正在经历的？

# html - 谷歌电子表格importxml，砍掉部分查询

> ID：14627626
> 
> 赞同：0
> 
> 时间：2013-01-31T14:03:57.893
> 
> 标签：html, google-apps-script, google-sheets

我在 Google 电子表格中有一个简单的 ImportXml 函数：

```
=ImportXml( "http://www.google.com/finance?q=0322.hk", "//span[@class='chr']" ) 
```

但它给了我 2 个数据单元格，它下面的单元格方向是 =Continue(blah blah)... 由 Google 自动放置。

这是与此页面关联的 HTML 代码。看起来它有2个项目。我已将“<”和“>”替换为“（”和“）”

```
(span class="ch bld")(span class="chr" id="ref_673324_c")-0.45(/span)

(span class="chr" id="ref_673324_cp")(-2.02%)(/span) 
```

如何更改 ImportXml 函数，以便只导入“-0.45”而不导入“（-2.02%）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T18:21:25.243

我还发现 INDEX 命令有效……如果您希望结果中的第 2 个 (-2.02%) 项也很有用。但是，一个重要的注意事项是，您必须首先转置 ImportXML 的输出，否则它将不起作用。

`=INDEX( TRANSPOSE (ImportXML (...)), {num})`其中 num 是期望的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:11:43.247

我找到了一个解决方法......我将 =NOEXPAND 函数放在它前面并且它可以工作。但如果有人有其他解决方案，请告诉我。

# java - 不能从静态上下文中引用非静态变量 x

> ID：14627627
> 
> 赞同：1
> 
> 时间：2013-01-31T14:03:58.337
> 
> 标签：java

原谅我的无知。我是初学者：

为什么以下代码给我以下编译错误？[行：16] 不能从静态上下文引用非静态变量 x

```
public class average{
int [] numbers = {2,3,4,5,6};
double x = averageMark(numbers);

public static double averageMark(int [] numbers){
    int sum = 0;  
    double average = 0.000;
    for (int i = 0; i < numbers.length; i++){  
      sum = numbers [i] + sum;  
      average = sum/numbers.length;  
    }
    return average;
  }

  public static void main (String [] args){
  System.out.println(x);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:05:08.270

错误说明了一切

> 不能从静态上下文中引用非静态变量 x

您必须将其设为`x`静态变量。

```
static double x = averageMark(numbers); 
```

或创建一个 Average 实例并访问它。

```
 public static void main (String [] args){
   System.out.println(new Average().x);
  } 
```

顺便说一句，你的类名应该以大写开头的约定。

正如@mgaert 所指出的，您还需要将数字数组设为静态，因为您在静态方法中使用它。

```
static int [] numbers = {2,3,4,5,6}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:27:57.423

静态方法或变量不附加到特定对象，而是附加到整个类。它们是在加载类时分配的。如果你尝试在静态方法中使用实例变量，编译器会认为，“我不知道你在说哪个对象的实例变量！” 但是如果你要创建一个`average`类的新实例，你就可以通过这个实例来访问它，所以像这样修改它：

```
public class average{
public int [] numbers = {2,3,4,5,6};
public double x;   
public static double averageMark(int [] numbers){
    int sum = 0;  
    double average = 0.000;
    for (int i = 0; i < numbers.length; i++){  
      sum = numbers [i] + sum;  
      average = sum/numbers.length;  
    }
    return average;
  }

  public static void main (String [] args){
  average a = new average(); // creating new instance 'a'
  a.x = average.averageMark(a.numbers); // assigning to variable 'x' of instance 'a' result of averageMark
  System.out.println(a.x); // output a
  }
} 
```

# vb.net - 如何将一个字符串分成多个字符串并重新构造回来？

> ID：14627628
> 
> 赞同：-4
> 
> 时间：2013-01-31T14:03:58.497
> 
> 标签：vb.net, string, split

例如，我有一个包含多个字符的字符串，`"The quick fox jumped over the lazy dog"`我想将其划分为多个字符串，例如每个字符串都有两个字符，然后我将对它们进行特定操作，然后将它们重新加入，例如：

```
String(1) = "Th"
String(2) = "e "
String(3) = "qu"
String(4) = "ic" 
```

等等 ...

如果字符串不能被分成相等的两个字符的字符串（例如“爸爸”），它会使最后一个字符串由最后一个剩余的字母组成，例如：

```
String(1) = "Da"
String(2) = "d" 
```

我尝试了以下代码来生成变量：

```
 Dim String(69) As String

    For i As Integer = 0 To String.Length - 1
        String(i) = "some text"
     Next 
```

和：

```
 Dim text As String
 For i As Integer = 0 To RichTextBox1.TextLength - 2 Step 2
 text = RichTextBox1.Text.Substring(i, 2)
 Next i 
```

要将刺痛（richtextbox1.text）分成相等的部分，它可以工作，但我不能对每个子字符串做任何事情。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:18:10.403

您可以`GroupBy`在索引上使用：

```
Dim twoLetterWords = "The quick fox jumped over the lazy dog".
        Select(Function(c, i) New With {.Char = c, .Index = i}).
        GroupBy(Function(x) CInt(Math.Floor(x.Index / 2))).
        Select(Function(g) String.Join("", g.Select(Function(x) x.Char))) 
```

因此，如果您想改用三个字母的单词，请更改`x.Index / 2`为`x.Index / 3`.

这是调试器中的结果（ideone 不适用于 VB）

![在此处输入图像描述](../Images/1a98ab6c0b3f8d11d386cc8234fce98d.png)

> 但是我怎样才能对每个子字符串做一些事情（例如在第一个字符串中添加数字 1，然后在第二个字符串中添加 2 等等）？

我假设您不熟悉 Linq。您可以使用一个简单`For Each`的查询来枚举查询，您可以将其具体化为一个集合类型，fe 通过使用`ToList`which 创建一个新的`List(Of String)`. 然后您也可以使用`For-Loop`. 或者您可以重写查询以首先添加您的号码（推荐）：

要在前面添加序列（在本例中为 1-19）中的字符串编号，请将上面查询的最后一行更改为：

```
Select(Function(g, index) String.Format("({0}) {1}", 
                          index + 1, 
                          String.Join("", g.Select(Function(x) x.Char)))) 
```

结果：

![在此处输入图像描述](../Images/10fad9097760d63b028fc65cc9367977.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:50:27.263

扩展[蒂姆施梅尔特已经很好的答案](https://stackoverflow.com/a/14627915/659190)

```
Imports System.Runtime.CompilerServices

Module SplitTest
    Sub Main()
        For Each pair In "abcdef".Split(2)
            Console.WriteLine(pair)
        Next

        Console.ReadKey
    End Sub

    <Extension()>
    Public Function Split(ByVal source As String, ByVal length As Integer) _
               As IEnumerable(Of String)

        Return source.Select(Function(c, i) New With {c, i}) _
            .GroupBy(Function(t) t.i \ length) _
            .Select(Function(g) String.Concat(g.Select(Function(t) t.c)))
    End Function
End Module 
```

您可以将 linq 打包成一个扩展并像这样测试它。

* * *

使用的唯一问题`GroupBy`是它可能不够聪明，无法知道索引总是会增加。这意味着在产生任何结果之前需要枚举整个字符串。

由于 VB.net 没有`yield return`，我认为它可能仍然和你能做的一样好。

* * *

如果您的字符串**很**长，您可能需要使用一些 c#，这样您就可以在读取整个字符串之前开始输出结果。

一个很好的例子是[托管在这里](https://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:52:43.490

1.  将字符串的长度除以 2（如果有余数，请记住 +1）
2.  了解迭代
3.  了解 SubString()

# cocoa - 双击编辑 NSTableView 列标题

> ID：14627631
> 
> 赞同：9
> 
> 时间：2013-01-31T14:04:15.060
> 
> 标签：cocoa, nstableview

是否可以通过双击列标题来更改 NSTableView 列的名称？有关执行此操作的最佳方法的任何建议。

我在尝试：

1.  设置表格视图的双击动作在双击时调用自定义方法
2.  尝试通过调用编辑 NSTableHeaderCell 实例`editWithFrame:inView:editor:delegate:event:`。

我不完全确定为什么这会扭曲文本，但是当您双击标题时，它会使文本看起来像这样，没有字段编辑器出现，

![editWithFrame:inView:editor:delegate:event: 在 NSTableHeaderCell 上](../Images/b31add4e8f1b52bd615ed04e6dea881c.png)

在 AppDelegate 中，

```
-(void)awakeFromNib
{
    ...
    [_tableView setDoubleAction:@selector(doubleClickInTableView:)];
    ...
}

-(void) doubleClickInTableView:(id)sender
{
    NSInteger row = [_tableView clickedRow];
    NSInteger column = [_tableView clickedColumn];
    if(row == -1){
        /* Want to edit the column header on double-click */
        NSTableColumn *tableColumn = [[_tableView tableColumns] objectAtIndex:column];
        NSTableHeaderView *headerView = [_tableView headerView];
        NSTableHeaderCell *headerCell = [tableColumn headerCell];
        NSRect cellFrame = [headerView headerRectOfColumn:column];
        NSText * fieldEditor = [[headerView window] fieldEditor:YES forObject:nil];
        [headerCell editWithFrame:cellFrame inView:headerView editor:fieldEditor delegate:headerCell event:nil];
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T21:18:21.870

你在截图中看到的似乎是可行
的

所以这是交易：

您将需要拥有自己的 NSTableHeaderCell 子类来充当字段编辑器的委托：

```
@interface NBETableHeaderCell () <NSTextViewDelegate>
@end

@implementation NBETableHeaderCell

- (void)textDidEndEditing:(NSNotification *)notification
{
    NSTextView *editor = notification.object;
    // Update the title, kill the focus ring, end editing
    [self setTitle:editor.string];
    [self setHighlighted:NO];
    [self endEditing:editor];
}

- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    if([self isHighlighted])
    {
        [self drawFocusRingMaskWithFrame:cellFrame inView:controlView.superview];
    }

    [super drawWithFrame:cellFrame inView:controlView];
}

- (void)drawFocusRingMaskWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    [controlView lockFocus];
    NSSetFocusRingStyle(NSFocusRingOnly);
    [[NSBezierPath bezierPathWithRect:cellFrame] fill];
    [controlView unlockFocus];
}

@end 
```

在应用程序委托的 awakeFromNib 中不要忘记将 NSTableHeaderCell 设置为**Editable**！

```
- (void)awakeFromNib
{
    NSTableColumn *newCol = [[NSTableColumn alloc] initWithIdentifier:@"whatever"];

    NBETableHeaderCell *hc = [[NBETableHeaderCell alloc] initTextCell:@"Default header text"];
    [hc setEditable:YES];
    [hc setUsesSingleLineMode:YES];
    [hc setScrollable:NO];
    [hc setLineBreakMode:NSLineBreakByTruncatingTail];
    [newCol setHeaderCell:hc];

    [self.tableView addTableColumn:newCol];
    [self.tableView setDoubleAction:@selector(doubleClickInTableView:)];
} 
```

剩下的，你在调用 selectWithFrame
*后就*
快到了，我们自定义编辑器有一个漂亮的白色不透明背景， 这样我们就看不到它下面的 textview
和焦点环一样：这是单元格的工作，
我们刚刚设置单元格处于突出显示状态，因此它知道现在必须绘制环

```
- (void)doubleClickInTableView:(id)sender
{
    NSInteger row = [_tableView clickedRow];
    NSInteger column = [_tableView clickedColumn];

    if(row == -1&& column >= 0)
    {
        NSTableColumn *tableColumn = [[_tableView tableColumns] objectAtIndex:column];
        NSTableHeaderView *headerView = [_tableView headerView];
        NBETableHeaderCell *headerCell = [tableColumn headerCell];

        // cellEditor is basically a unique NSTextView shared by the window
        // that adjusts its style to the field calling him
        // it stands above the text field's view giving the illusion that you are editing it
        // and if it has no background you will see the editor's NSTextView overlaying the TextField
        // wich is why you have that nasty bold text effect in your screenshot
        id cellEditor = [self.window fieldEditor:YES forObject:self.tableView];

        [headerCell setHighlighted:YES];
        [headerCell selectWithFrame:[headerView headerRectOfColumn:column]
                             inView:headerView
                             editor:cellEditor
                           delegate:headerCell
                              start:0
                             length:headerCell.stringValue.length];

        [cellEditor setBackgroundColor:[NSColor whiteColor]];
        [cellEditor setDrawsBackground:YES];
    }
} 
```

有关字段编辑器的更多信息：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Tasks/UsingWindowFieldEditor.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Tasks/UsingWindowFieldEditor.html)

现在唯一要使它完整的是，如果您在编辑时调整单元格的大小，字段编辑器的框架将不会更新……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-11T15:48:31.220

这也困扰着我，所以我创建了一个示例项目并将[其上传到 GitHub。](https://github.com/DivineDominion/Editable-NSTableView-Header)

正如@ben-rhayader 指出的那样，这完全是关于将字段编辑器定位在标题视图单元格上方。

# 双击处理

这是我们在 Swift 中已经知道的内容。

## 窗口控制器/自定义表格视图控制器

视图控制器中有趣的部分是双击编辑标题。为了实现这一点，

*   将`TableWindowController`（或您的视图控制器）实例作为对象放入您的 Nib 中，
*   添加一个`@IBAction func tableViewDoubleClick(sender: NSTableView)`或类似的，
*   将`NSTableView`'`doubleAction`方法连接到`tableViewDoubleClick`.

编辑单元格很简单。编辑列标题没有那么多。

*   标题行的行值为 -1
*   要定位字段编辑器，您需要列标题框架和字段编辑器本身。

部分结果：

```
extension TableWindowController {

    @IBAction func tableViewDoubleClick(sender: NSTableView) {

        let column = sender.clickedColumn
        let row = sender.clickedRow

        guard column > -1 else { return }

        if row == -1 {
            editColumnHeader(tableView: sender, column: column)
            return
        }

        editCell(tableView: sender, column: column, row: row)
    }

    private func editColumnHeader(tableView tableView: NSTableView, column: Int) {

        guard column > -1,
            let tableColumn = tableView.tableColumn(column: column),
            headerView = tableView.headerView as? TableHeaderView,
            headerCell = tableColumn.headerCell as? TableHeaderCell,
            fieldEditor = fieldEditor(object: headerView)
            else { return }

        headerCell.edit(
            fieldEditor: fieldEditor,
            frame: headerView.paddedHeaderRect(column: column),
            headerView: headerView)
    }

    private func editCell(tableView tableView: NSTableView, column: Int, row: Int) {

        guard row > -1 && column > -1,
            let view = tableView.viewAtColumn(column, row: row, makeIfNecessary: true) as? NSTableCellView
            else { return }

        view.textField?.selectText(self)
    }

    /// Convenience accessor to the `window`s field editor.
    func fieldEditor(object object: AnyObject?) -> NSText? {
        return self.window?.fieldEditor(true, forObject: object)
    }
} 
```

## 自定义标题视图和标题视图单元格

正确定位字段编辑器是一项工作。我把它放到一个`NSTableHeaderView`子类中：

```
class TableHeaderView: NSTableHeaderView {

    /// Trial and error result of the text frame that fits.
    struct Padding {
        static let Vertical: CGFloat = 4
        static let Right: CGFloat = 1
    }

    /// By default, the field editor will be very high and thus look weird.
    /// This scales the header rect down a bit so the field editor is put
    /// truly in place.
    func paddedHeaderRect(column column: Int) -> NSRect {

        let paddedVertical = CGRectInset(self.headerRectOfColumn(column), 0, Padding.Vertical)
        let paddedRight = CGRect(
            origin: paddedVertical.origin,
            size: CGSize(width: paddedVertical.width - Padding.Right, height: paddedVertical.height))

        return paddedRight
    }
} 
```

这负责定位字段编辑器。现在从上面的双击处理程序中*使用它：*

```
class TableHeaderCell: NSTableHeaderCell, NSTextViewDelegate {

    func edit(fieldEditor fieldEditor: NSText, frame: NSRect, headerView: NSView) {

        let endOfText = (self.stringValue as NSString).length
        self.highlighted = true
        self.selectWithFrame(frame,
            inView: headerView,
            editor: fieldEditor,
            delegate: self,
            start: endOfText,
            length: 0)

        fieldEditor.backgroundColor = NSColor.whiteColor()
        fieldEditor.drawsBackground = true
    }

    func textDidEndEditing(notification: NSNotification) {

        guard let editor = notification.object as? NSText else { return }

        self.title = editor.string ?? ""
        self.highlighted = false
        self.endEditing(editor)
    }
} 
```

# 当用户双击另一个标题单元格时如何“结束编辑”？

问题：字段编辑器被重复使用，并且仅在用户双击另一个标题单元格时重新定位。`textDidEndEditing`不会被调用。不会保存新值。

@triple.s 和 @boyfarrell 讨论了这个但没有代码——我发现知道字段编辑器何时更改的最简单方法是劫持字段编辑器的构造并`endEditing`手动调用。

```
class HeaderFieldEditor: NSTextView {

    func switchEditingTarget() {

        guard let cell = self.delegate as? NSCell else { return }

        cell.endEditing(self)
    }
} 
```

必要时使用此自定义字段编辑器：

```
class TableWindowController: NSWindowDelegate {

    func windowWillReturnFieldEditor(sender: NSWindow, toObject client: AnyObject?) -> AnyObject? {

        // Return default field editor for everything not in the header.
        guard client is TableHeaderView else { return nil }

        // Comment out this line to see what happens by default: the old header
        // is not deselected.
        headerFieldEditor.switchEditingTarget()

        return headerFieldEditor
    }

    lazy var headerFieldEditor: HeaderFieldEditor = {
        let editor = HeaderFieldEditor()
        editor.fieldEditor = true
        return editor
    }()
} 
```

奇迹般有效。

GitHub 上的项目：[https ://github.com/DivineDominion/Editable-NSTableView-Header](https://github.com/DivineDominion/Editable-NSTableView-Header)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T05:12:54.417

@BenRhayader - 只有当我更改列标题文本并执行制表符以便`controlTextDidEndEditing`调用委托时，此解决方案才有效。但是，如果我更改一列的标题列文本并单击另一列（而不是执行制表符），旧文本将被保留，即新文本没有反映。这可能是因为更改文本的逻辑写在里面`controlTextDidEndEditing`，只有在 tab out 完成时才会调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T09:05:08.843

您的问题在这里得到否定的回答：[使 NSTableView 列标题可编辑](http://www.cocoabuilder.com/archive/cocoa/218973-making-nstableview-column-headers-editable.html)

# android - Android：多行文本视图

> ID：14627633
> 
> 赞同：1
> 
> 时间：2013-01-31T14:04:22.813
> 
> 标签：android, textview

我正在构建一个包含 c++ 程序的应用程序。我只需要将代码显示为我的 xml 布局中的文本。我不希望它编译它或用它做任何其他事情。但是每次我写文本时，它都会显示错误，你不能使用像'<'，'>'这样的字符串或双引号。你能帮我看看如何在我的文本视图中使用这些字符串。这是我的 xm 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/program_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="textMultiLine"
    android:text="
       #include<iostream.h>
       #include<conio.h>
       void main()
       {
         int arr[n], i,j,n,temp;
         cout<<"How any elements you want to enter";
         cin>>n;
         cout<<"Enter array elements"
         for(i=0;i<n;i++)  
         cin>>a[i]
       }     " >

    <requestFocus />
</EditText> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:12:32.867

试试这个 xml 特殊字符。

```
 < replace into &lt; 
 >  replace into &gt;
 " replace into &quot; 
```

您需要 xml 的任何其他特殊字符代码，请参阅此链接：[http ://www.quackit.com/html/html_special_characters.cfm](http://www.quackit.com/html/html_special_characters.cfm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:16:11.710

您可以按照 Tamilarasi 的建议进行操作，或者有一个技巧可以自动执行此操作。只需用 ' ' 替换你的 " " 并点击 CTRL+SHIFT+ F 。Eclipse 将自动为您进行这些更改。

```
android:text='
       #include<iostream.h>
       #include<conio.h>
       void main()
       {
         int arr[n], i,j,n,temp;
         cout<<"How any elements you want to enter";
         cin>>n;
         cout<<"Enter array elements"
         for(i=0;i<n;i++)  
         cin>>a[i]
       }     '> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:25:49.833

看看我对[这个问题](https://stackoverflow.com/questions/14340104/i-want-to-show-the-whole-c-program-on-screen-in-android/14340202)的回答。您不应该在 XML 布局中包含文字字符串。更建议将 C 代码存储在 assets 文件夹中的文件中，因此您根本不需要修改它们（这是浪费时间和错误的来源）。只需使用包含在标签中的所有 C 代码来扩展 WebView 小部件，`<pre>[text read from file]</pre>`您就可以完美地显示它，并免费利用滚动和缩放。

# sql - 如何在运行时在 oracle 中获取用户的输入？

> ID：14627634
> 
> 赞同：0
> 
> 时间：2013-01-31T14:04:25.643
> 
> 标签：sql, plsql, oracle11g

嗨朋友们，我需要在执行 pl/sql 块时从用户那里获取输入，我已经尝试过这个：

```
Accept x number prompt 'enter variable'
set serveroutput on
declare
begin
dbms_output.putline('ut entered value id'||x);
end;
/ 
```

但我得到了错误：

从命令中的第 3 行开始出错：

```
declare
begin
dbms_output.putline('ut entered value id'||x);
end;
Error report:
ORA-06550: line 7, column 44:
PLS-00201: identifier 'X' must be declared
ORA-06550: line 7, column 1:
PL/SQL: Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

有谁能够帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:13:54.757

SQL*Plus[替换变量](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#sthref453)用 & 号引用`&`：

```
SQL> Accept x number prompt 'enter variable:'
enter variable:1234
SQL> set serveroutput on
SQL> declare
  2  begin
  3  dbms_output.put_line('ut entered value id:'||&x);
  4  end;
  5  /
old   3: dbms_output.put_line('ut entered value id:'||&x);
new   3: dbms_output.put_line('ut entered value id:'||      1234);
ut entered value id:1234

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:09:51.140

不确定这是你的追求，但也许......

`Select * from DBA_ROLE_PRIVS where grantee = '&Grantee';`

# vim - 重新映射？在 NERDTree

> ID：14627637
> 
> 赞同：1
> 
> 时间：2013-01-31T14:04:31.750
> 
> 标签：vim, nerdtree, remap

自从 ？通常用于向上搜索字符串我希望能够在 NERDTree 中使用它。

使用 ？在 NERDTree 中总是给我带来帮助，但我只想向上搜索，不想用 / 循环遍历整个树（向下搜索）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:15:23.057

NERD_Tree 在创建窗口时设置自定义文件类型。您可以使用`:autocmd`删除`?`. 不幸的是，它显然在设置它的映射*之前*设置了文件类型，但是这样的东西应该可以工作（除了第一次打开树之后直接）：

将以下内容放入您的`~/.vimrc`:

```
:autocmd FileType nerdtree autocmd WinEnter,CursorHold <buffer> silent! nunmap <buffer> ? 
```

* * *

编辑：我刚刚向作者提交了一个[补丁](https://github.com/scrooloose/nerdtree/pull/234)，可以启用这个更短更好的钩子（尽管对于这个特定的用例，config 变量仍然是首选）：

```
:autocmd FileType nerdtree silent! nunmap <buffer> ? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:50:32.203

NERD_Tree 提供了一种通过全局配置变量更改其默认映射的方法。只需将以下内容放入您`~/.vimrc`的更改为`F1`：

```
:let g:NERDTreeMapHelp = '<F1>' 
```

# java - 在 Eclipse 中使用 Ant 将运行时生成的文件夹添加为源文件夹

> ID：14627639
> 
> 赞同：2
> 
> 时间：2013-01-31T14:04:33.603
> 
> 标签：java, eclipse, ant, classpath

我正在使用以下一堆软件：

1.  蚂蚁 1.7.1
2.  日食太阳神
3.  Java 1.6
4.  阿帕奇节俭 0.8.0

我正在使用 Thrift 使用以下代码块在 Ant 中生成 java 源代码：

```
<exec executable="thrift-0.8.0.exe" osfamily="windows">
    <arg value="-out" />
    <arg value="java/src" />
    <arg value="--gen" />
    <arg value="java" />
    <arg file="Sample.thrift" />
</exec> 
```

所以，现在我想`add`将生成的`src`文件夹自动添加到`classpath`项目的文件夹中`in Eclipse using Ant`，这样`shown as a source folder`当我在 Eclipse 中打开项目时。

**注意：**`.classpath`我知道文件中存在项目的类路径，`adding a classpathentry`它可以解决我的问题。但我希望 Eclipse 这样做，而不是我在 .classpath 文件中手动进行。

此外，我还查看了[Ant-Eclipse 项目](http://ant-eclipse.sourceforge.net/)，发现了一个 Ant 任务来创建一个新的 Eclipse Java 项目并将其`src`文件夹显示为源文件夹。但我不想依赖外部库。

```
<project name="test" default="eclipse" basedir=".">
    <target name="eclipse">
        <taskdef name="eclipse" classname="prantl.ant.eclipse.EclipseTask" />
        <eclipse>
            <project />
            <classpath>
                <source path="src" />
                <output path="bin" />
            </classpath>
        </eclipse>
    </target>
</project> 
```

有没有办法在 Eclipse 中已经存在的 Ant 库中做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:55:44.517

eclipse .classpath 文件是一个 XML 文档，因此在其中添加源文件夹涉及编辑 XML。不幸的是，Ant 没有任何内置的工具来以任何有意义的方式操作 XML。我自己使用[xmltask](http://www.oopsconsultancy.com/software/xmltask/)来编辑 .classpath 和 .project 文件，但这是您说您并不真正想要的外部库。

然而，一切并没有丢失[——Ant 支持运行脚本](http://ant.apache.org/manual/Tasks/script.html)，包括[将 XML 视为一等公民的 Groovy](http://groovy.codehaus.org/Updating+XML+with+XmlParser)。我希望我可以说我有足够的 Groovy 经验，可以为您提供比一些链接更多的东西，但是通过调用`appendNode()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:23:17.013

如果您真的不想依赖任何外部的东西，那么您可以考虑使用 XSLT 样式表来编辑`.classpath`文件（即 XML）。

**添加-dir.xsl**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:param name="pathToAdd" />

  <xsl:strip-space elements="*" />
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="classpath">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
      <!-- don't add a 2nd copy of the classpathentry if one already exists -->
      <xsl:if test="not(classpathentry[@kind = 'src'][@path = $pathToAdd])">
        <classpathentry kind="src" path="{$pathToAdd}" />
      </xsl:if>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**构建.xml**

```
<xslt in=".classpath" out=".classpath.edited" style="add-dir.xsl">
  <param name="pathToAdd" expression="java/src" />
</xslt>
<move file=".classpath.edited" tofile=".classpath" overwrite="yes" /> 
```

# java - Spring autowire 在特定配置中不起作用

> ID：14627640
> 
> 赞同：2
> 
> 时间：2013-01-31T14:04:35.557
> 
> 标签：java, spring, initialization, javabeans, autowired

我在 bean 中遇到了 @Autowired 的问题。我已经发布了简化的代码结构。我有两个用@Configuration 注释的类和两个简单​​的bean。在 D 类中，自动装配的 bean 没有注入。所以我想知道是否可以在不改变结构的情况下解决 NPE？

A类：

```
@Configuration
public class A {

    @Autowired
    private B b;

    @Bean
    publict Other other() {
        b.doFoo();
        Other other = new Other();
    }

    @Bean
    public C c() {            
        return new C();
    }
} 
```

B类：

```
@Configuration
public class B {

    @Bean
    public D d() {
        return new D();
    }

    public void doFoo() {
        d().doBar();
    }
} 
```

C类的内部结构无关紧要。所以D类：

```
public class D {

    @Autowired
    C c;

    public void doBar() {
        c.doFooBar(); // And here we got NPE
    }
} 
```

我必须注意，如果我将 bean D 的初始化从 B 移动到 A 并将其自动连接到 B 一切正常：

```
@Configuration
public class A {

    @Autowired
    private B b;

    @Bean
    publict Other other() {
        b.doFoo();
        Other other = new Other()
    }

    @Bean
    public C c() {            
        return new C();
    }

    @Bean
    public D d() {
        return new D();
    }
}

@Configuration
public class B {

    @Autowired
    private D d;

    public void doFoo() {
        d.doBar();
    }
} 
```

但这种方法不适合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:08:51.033

D 类也应该用@Component 或类似的东西注释。只有 spring bean 容易受到自动装配的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:51:54.457

让我们第二次分析类`B`。在该类中，当您调用`doFoo()`已执行`d().doBar();`的方法时，就像您手动创建类的实例一样`D`，没有任何 Spring。你直接调用`d()`方法就像你 putted 一样`new D().doBar()`。如果您想`D`使用 spring 创建，请在类中添加`B`：

```
@Autowired
private D d; 
```

并将您的方法更改`doFoo()`为：

```
d.doBar(); 
```

您问题的关键部分是：

> 并将其自动连接到 B 一切正常

这也是一个答案。

# ios - ios开发中的WSDL webservice

> ID：14627642
> 
> 赞同：4
> 
> 时间：2013-01-31T14:04:36.957
> 
> 标签：ios, wsdl

即使在观看了大量视频并阅读了大量有关 WSDL 的教程之后，我还是 Web 服务的新手，我无法理解如何从 WSDL 获取 Web 服务方法的 URL。我提供的 WSDL 文件是[http://caracal.simform.local:55137/Survely.DataServices.MemberServices.svc?wsdl](http://caracal.simform.local:55137/Survely.DataServices.MemberServices.svc?wsdl)我想调用此 Web 服务的所有用户。有人能解释一下如何从 WSDL 文件中提取 Web 服务/Web 服务方法的准确 url，以及如何将参数传递给 Web 服务（在这种特殊情况下，我想调用 login）。我看过的所有教程都告诉我 WSDL 文件的服务标签有一个地址标签，它告诉我们服务的 url，但是这个 WSDL 不包含一个。

最后一件事，我可以用肥皂调用这个服务吗，甚至肥皂不用于绑定。如果我想使用 HTTP GET / HTTP POST 方法调用它，将如何提供参数。

我主要关心的是如何从 WSDL 获取 Web 服务/Web 服务方法的 url？我想使用它的平台是IOS。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:26:32.683

我会选择[http://sudzc.com](http://sudzc.com)。它允许您选择 ARC/非 ARC 实现。[WSDL2Objc](http://code.google.com/p/wsdl2objc/downloads/list)是另一种选择，但它已经有一段时间没有更新了，这与仍在维护的 sudzc 不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:21:17.310

解决所有这些问题的最简单方法是使用 wsdl2objc 生成代码[http://code.google.com/p/wsdl2objc/](http://code.google.com/p/wsdl2objc/)请参阅教程如何使用生成的代码。

# objective-c - ARC 导致游戏中心内存泄漏

> ID：14627650
> 
> 赞同：0
> 
> 时间：2013-01-31T14:05:06.887
> 
> 标签：objective-c, xcode, memory-leaks, automatic-ref-counting, game-center

我们正在开发一个项目并使用 ARC。在使用 xcode 工具时，我们在连接 Game Center 并向 Game Center 发送数据时发现了一些内存泄漏。我们还测试了本教程中的代码：[www.raywenderlich.com](http://www.raywenderlich.com/5509/beginning-turn-based-gaming-with-ios-5-part-2)，它也在相同的地方泄露。ARC不应该防止这些泄漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:42:42.593

尽管使用了 ARC，但仍存在内存泄漏的原因之一如下：
如果创建了一个自动释放对象，例如，通过类似的类函数`[NSMUtableArray array]`，该对象将被放入当前的自动释放池，稍后当没有其他对象时释放所有者存在并且自动释放池已耗尽。
但是，如果不存在自动释放池，即在没有显式 as 的第一个语句的情况下生成新线程的情况下`@autoreleasepool {...}`，则无法稍后释放该对象，因为无法耗尽自动释放池，因此该对象是内存泄漏。

# c# - StreamWriter 的 Visual Studio 错误还是我的误解？

> ID：14627652
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:05:09.560
> 
> 标签：c#, streamreader, streamwriter

我必须处理一些包含西里尔文文本的文件，并且我在 Visual Studio 2012 Ultimate 中使用`StreamReader`/ 。`StreamWriter`

但是，有一些荒谬的问题（或我的误解）。以下构造函数工作得很好：

```
using (StreamReader reader = new StreamReader(someFile, Encoding.Default)){
} 
```

然而，当我尝试以下操作时：

```
using (StreamWriter writer = new StreamWriter(someOtherfile, Encoding.Default)){
} 
```

我得到一个有效构造函数的编译时错误。然而，以下是 MSDN 的规范：

```
public StreamWriter(Stream stream, Encoding encoding); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:09:01.493

如果您查看 和 之间的差异[`StreamWriter`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)，[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)您会发现虽然[有以下*构造*函数](http://msdn.microsoft.com/en-us/library/x8xxf0x5.aspx)：

```
StreamReader(string, Encoding) 
```

没有*构造*函数

```
StreamWriter(string, Encoding) 
```

我的猜测是`someFile`and的类型`someOtherFile`是`string`，不是`Stream`。

我*还*建议您不要使用`Encoding.Default`，除非您真的非常确定您想要特定于平台的默认编码，它可能无法处理所有 Unicode。如果可能，请改用 UTF-8。

# java - Ant 在从 Java 运行时找不到 XPathExpressionException，但在构建 Android 应用程序时却在命令行上找到

> ID：14627660
> 
> 赞同：2
> 
> 时间：2013-01-31T14:05:29.797
> 
> 标签：java, android, ant, glassfish, application-server

目前，我正在尝试在 GlassFish 服务器上使用 Ant 构建一个 android 应用程序。

当我运行`ant debug`或`ant release`从命令行运行时，我当前的 build.xml 将构建良好，但是当我尝试通过 Java 构建它时，它会引发异常并告诉我它找不到类：javax/xml/xpath/XPathExpressionException

错误消息的相关部分是：

```
C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\ant\build.xml:109: taskdef A class needed by class com.android.ant.GetTypeTask cannot be found: javax/xml/xpath/XPathExpressionException
using the classloader AntClassLoader[C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\anttasks.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\common.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\guava-tools.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\sdklib.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\layoutlib_api.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\commons-compress-1.0.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\httpclient-4.1.1.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\httpcore-4.1.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\httpmime-4.1.1.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\commons-logging-1.1.1.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\commons-codec-1.4.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\dvlib.jar;C:\androidsdk\adt-bundle-windows-x86_64\sdk\tools\lib\manifmerger.jar] 
```

android build.xml 的第 109 行是：`<taskdef resource="anttasks.properties" classpathref="android.antlibs" />`

它指的是 anttasks.jar 中的一个文件，其中有一个用于 xpath 的条目。

## 构建文件

应用程序的构建文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="2007_doc2" default="help">
    <property file="local.properties"/>
    <property file="ant.properties"/>
    <property environment="env"/>
    <condition property="sdk.dir" value="${env.ANDROID_HOME}">
        <isset property="env.ANDROID_HOME"/>
    </condition>
    <loadproperties srcFile="project.properties"/>
    <!-- quick check on sdk.dir -->
    <fail
        message="sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through the ANDROID_HOME environment variable."
        unless="sdk.dir"
        />
<import file="custom_rules.xml" optional="true"/>
<import file="${sdk.dir}/tools/ant/build.xml"/>
</project> 
```

我的 ant.properties 文件是空的，local.properties 文件正确指向 SDK，而 project.properties 文件中唯一的内容是：`target=android-10`

## Java 代码

我用来尝试运行 Ant 的 Java 代码都在一个类中，看起来像这样（为了节省空间而缩短了）：

```
setupSDK(dir);
Project project = new Project();

project.setUserProperty("ant.file", buildFile.getAbsolutePath());
project.setBaseDir(dir);

DefaultLogger consoleLogger = new DefaultLogger();
consoleLogger.setErrorPrintStream(System.err);
consoleLogger.setOutputPrintStream(System.out);
consoleLogger.setMessageOutputLevel(Project.MSG_INFO);
project.addBuildListener(consoleLogger);
project.init();               

ProjectHelper helper = ProjectHelper.getProjectHelper();
project.addReference("ant.projectHelper", helper);
helper.parse(project, buildFile);

project.executeTarget(project.getDefaultTarget()); // build 
```

`setupSDK(dir)`使用 JVM 标志或环境变量 ANDROID_HOME 动态创建 local.properties 文件（并且工作正常）。

## 而已

这就是我相信的所有相关内容。我在带有 64 位 JDK 的全新 Windows 8 机器上运行它，但在运行 32 位 JVM 的 Windows 7 机器上运行时它有同样的问题。

正如我上面所说，它在我运行`ant release`或`ant debug`在命令行上运行时，所以我不知道为什么它不能在 Java 中运行。

## 更新

经过一些测试，当不在 GlassFish 服务器上运行时，它似乎实际上可以在 Java 中运行。有人有想法么？

谢谢，林登

## 另一个更新

我的一位同事建议这可能与范围有关，而且我试图在 GlassFish 域之外加载类，这似乎是原因。

## 更新

情况似乎确实如此，尽管我不完全确定如何解决它。我刚刚发现，当在 Glassfish 之外运行时，给出的类路径 Ant 非常长，并且包括所有 glassfish 模块（我认为）以及来自我的 JDK（包括 rt.jar）的正确运行时。

而在 glassfish 上运行时，java 类路径上的唯一内容是：C:\Program Files\glassfish-3.1.2.2\glassfish\modules\glassfish.jar

# php - Halogy cms 不显示图像或 url 不工作

> ID：14627662
> 
> 赞同：0
> 
> 时间：2013-01-31T14:05:34.720
> 
> 标签：php, apache, content-management-system, halogy

我希望有人可以帮助我，我在本地 XAMPP 主机上设置了 Halogy，它工作正常。

然后我将它上传到我的网络服务器并对数据库中的数据库配置和站点进行了所有更改，它可以很好地加载站点上的文本，但所有图像都丢失了。例如，如果我单击服务，则会出现错误`cannot display webpage`。

我已经尝试过 CodeIgniter`.htacess`和 Joomla 一个，而 Joomla 一个可以让页面和管理工作，但是图像仍然损坏并且统计图不起作用。

[这](http://www.howtoforge.com/perfect-server-ubuntu-12.04-lts-apache2-bind-dovecot-ispconfig-3)是我的网络服务器设置

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:39:11.550

这不是服务器问题。Halogy 通常需要安装在服务器主机的基本文件夹中。我也遇到了同样的问题，并使用 application/config/site_config.php 中的一些更改解决了它。

对于仪表板设置，请查看我的[这个](https://stackoverflow.com/questions/11663517/halogy-dashboard-is-not-displaying-graph)答案。

# mysql - MySQL查询通过一组空格分隔值进行搜索

> ID：14627671
> 
> 赞同：2
> 
> 时间：2013-01-31T14:05:51.373
> 
> 标签：mysql

我有一个示例表：

```
Firstname Lastname Company  Age
Peter     Johnson  Google   28
John      Wayne    Yahoo    30 
```

我需要编写一个 MySQL 查询，该查询通过由空格分隔的一组值执行搜索。像这样：

```
Exec find_records 'Bill Johnson Google 30'; 
```

查询应返回：

```
Firstname Lastname  Company  Age
Peter     Johnson   Google
John      Wayne     Yahoo 
```

将不胜感激任何想法！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:14:11.280

如果您使用的是 MyISAM 表，您可以在与搜索和查询相关的列上添加全文索引：

```
SELECT
  firstname,
  lastname,
  company,
  age,
  MATCH(firstname, lastname, company, age) AGAINST('Bill Johnson Google 30') as rank
FROM
  your_table
HAVING
  rank > 0
ORDER BY
  rank DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:24:50.020

[SQLFiddle](http://sqlfiddle.com/#!2/044f9/6)

```
select *
from t
where 
FIND_IN_SET(FirstName,REPLACE('Bill Johnson Google 30',' ',','))>0
or
FIND_IN_SET(Lastname,REPLACE('Bill Johnson Google 30',' ',','))>0
or
FIND_IN_SET(Company,REPLACE('Bill Johnson Google 30',' ',','))>0
or 
FIND_IN_SET(Age,REPLACE('Bill Johnson Google 30',' ',','))>0 
```

# xml - 在 FB 4.6 中总是得到 XML 响应

> ID：14627673
> 
> 赞同：3
> 
> 时间：2013-01-31T14:05:52.603
> 
> 标签：xml, web-services, actionscript-3, apache-flex, flash-builder

我正在使用请求和响应为 JSON 格式的 iOS 网络服务。通过 flash builder 访问此 Web 服务时，我收到了 XML 格式的响应。但在 iOS 中运行相同的应用程序会返回 JSON。

```
 private function service_activate(webservices:mx.rpc.http.HTTPService):void{

            var args:String=new String("{\"SessionGuid\":\""+sessionid.text +"\"}");
            webservices.resultFormat="text";
            webservices.contentType="application/json";
            webservices.send(args);
           }

    <fx:Declarations>
        <s:HTTPService id="webservice"
                   url="http://webservices..."
                   method="POST" contentType="application/x-www-form-urlencoded"
                   result="webservice_resultHandler(event)"
                   fault="webservice_faultHandler(event)" />
    </fx:Declarations> 
```

有没有办法让 FlashBuilder 响应为 JSON？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T13:01:34.470

这是 REST 服务吗？是春天吗？您可以在参数之前将“.xml”添加到 url 的末尾：

IE

```
http://localhost/rest/users/byLastName.xml?lastName=Smith 
```

如果是 Spring：查看是否在您的应用程序上下文中定义了**ContentNegotiatingViewResolver以及其中定义了哪些媒体类型。**

# css - 如何自定义paypal弹出窗口css

> ID：14627675
> 
> 赞同：0
> 
> 时间：2013-01-31T14:06:13.187
> 
> 标签：css, paypal, integration

我正在尝试自定义贝宝弹出窗口 css，但我不知道该怎么做。

我想改变两点：

1）删除下划线（例如item2。我发现paypal随机添加下划线到结帐页面项目虽然我只是将项目名称传递给paypal）

2) 扩大项目显示区域。现在，贝宝弹出窗口最多只显示 2 个项目。如果我有两个以上，我必须向下滚动。但用户可能不会注意到向下滚动条。

有没有办法覆盖paypal popup css？谢谢

![在此处输入图像描述](../Images/d2c026135348de8f23e4ffc47241e9e8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:13:45.667

我什至不确定 PayPal 的哪些服务使用了弹出窗口。你确定你整合正确？在任何情况下，您都是从 PayPal 加载此页面，并且只有在检测到页面加载后才能通过从父窗口操作弹出窗口的 DOM 来为其附加自定义样式。很难做到万无一失，甚至可能是不可能的。最好的办法是利用 PayPal 在您的个人资料设置中为您提供的自定义选项，并获得“足够接近”。

# android - 在每个 onClick 调用上运行相同的帧动画

> ID：14627677
> 
> 赞同：2
> 
> 时间：2013-01-31T14:06:29.493
> 
> 标签：android, imageview, android-animation, frames

我试图在单击时使用 AnimationDrawable 显示帧到帧动画`ImageView`。但是当我单击`ImageView`. 我正在为动画使用 xml。

动画xml：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="true">
  <item android:drawable="@drawable/scorepopup1" android:duration="100" />
  <item android:drawable="@drawable/scorepopup2" android:duration="100" />
  <item android:drawable="@drawable/scorepopup3" android:duration="100" />
  <item android:drawable="@drawable/scorepopup4" android:duration="100" />
  <item android:drawable="@drawable/invipopup" android:duration="100" />

</animation-list> 
```

这是我的按钮和动画图像容器的 xml：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="70dp"
    android:layout_height="50dp"
    android:layout_alignParentRight="true" 
    android:layout_margin="5dp">

    <ImageView
    android:layout_width="35dp"
    android:layout_height="35dp"
    android:background="@drawable/bd"
    android:layout_margin="10dp"
    android:onClick="checkGem" 
    android:contentDescription="bd"/>

    <ImageView
        android:id="@+id/scorePopup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="10dp"
        android:layout_marginTop="10dp" />
</LinearLayout> 
```

checkGem 方法：

```
ImageView popup1 =  (ImageView) findViewById(R.id.scorePopup);

popup1.setBackgroundResource(R.drawable.popup1_animation);
AnimationDrawable frameAnimation2 = (AnimationDrawable) 

popup1.getBackground();
frameAnimation2.start(); 
```

我的问题是动画只显示一次，但我希望它在每次点击时都动画。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T19:36:09.377

在`stop()`通话之前在`ImageView`的`AnimationDrawable`背景上`start()`拨打电话：

```
//...
AnimationDrawable frameAnimation2 = (AnimationDrawable) popup1.getBackground();
frameAnimation2.stop();
frameAnimation2.start(); 
```

当您第一次单击`ImageView`动画时，动画将运行，但最后它会发现自己处于它认为仍在运行的状态。在那种状态下，调用`start()`将被简单地忽略。该`stop()`方法*“重置”*该状态并且`AnimationDrawable`将再次从头运行。

# c++ - boost::spirit::karma 语义动作分配错误

> ID：14627678
> 
> 赞同：1
> 
> 时间：2013-01-31T14:06:30.443
> 
> 标签：c++, boost, placeholder, boost-spirit, boost-spirit-karma

我正在尝试通过语义操作设置业力生成器值，但是它不会编译。我找不到原因，因为我很确定我按照文档中的说明使用它。由于我是业力新手，因此很可能我犯了一些新手错误。一个最小的例子：

```
#include <boost/spirit/include/karma.hpp>
#include <boost/spirit/include/karma_int.hpp>
#include <boost/spirit/include/karma_generate.hpp>

namespace karma = boost::spirit::karma;
int main() {
    std::string s;
    std::back_insert_iterator<std::string> out(s);
    boost::spirit::karma::generate(out,karma::int_[karma::_1=2]); //won't compile
    //boost::spirit::karma::generate(out,karma::int_,2); this compiles and works
    std::cout<<s;
} 
```

导致编译器错误：

```
 error: no viable overloaded '=' 
```

我正在使用 g++ 4.6.3 和 boost 1.48。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:26:54.610

您缺少一些要包含的标题。您可以使用：

```
#include <boost/spirit/include/phoenix_operator.hpp> 
```

其中包括为此工作所需的操作员，或者：

```
#include <boost/spirit/include/phoenix.hpp> 
```

其中包括有关 Boost.Phoenix 的所有内容。[在 LWS 上。](http://liveworkspace.org/code/2vX6ST%241)

# perl-module - h2xs：如何创建目录结构

> ID：14627679
> 
> 赞同：0
> 
> 时间：2013-01-31T14:06:33.653
> 
> 标签：perl-module

我正在使用`h2xs`v. 1.23 创建`Perl`模块。但是每次我使用命令时，`h2xs -A -X -n Module::Foo`我都会得到这个目录结构：`Module-Foo/lib/Module/foo.pm`. 这导致所有模块的单一目录都很难看。

我想要的结构应该是：Module/Foo/lib/Module/bar.pm，这样我就可以添加第二个模块`h2xs -A -X -n Module::Bar`来获取`Module/Bar/lib/Module/bar.pm`.

有人知道怎么做这个吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T00:13:53.383

您是否尝试过模块启动器？试试这个命令

`module-starter --module=Module::Foo,Module::Bar --author="ME" --email="me@me.com"`

您可以通过在模块标志下简单地添加多个模块来添加它们。

# asp.net - 从 ASCX 中获取 UserControl ControlID

> ID：14627680
> 
> 赞同：1
> 
> 时间：2013-01-31T14:06:35.903
> 
> 标签：asp.net, properties, user-controls

我在网页上有一个数据源，声明如下。它使用页面中的属性作为过滤器。

```
<asp:ObjectDataSource runat="server" ID="odsMyDataSource"
TypeName="Game" SelectMethod="GetBySomeID">
    <SelectParameters>
        <asp:ControlParameter Name="SomeID" ControlID="__Page" Type="Int32"
        PropertyName="MyID" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

转发器附加到此数据源。现在，我想将此转发器及其数据源移动到用户控件 (ASCX) 中。MyID 属性也将从 ASPX 移动到 ASCX。我在这里不知道在 asp:ControlParameter 中使用什么作为 ControlID 而不是 __Page。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:46:34.833

这是对这种情况的一个很好的处理： [ControlParameter 支持“_ *Page”作为 ControlId，但不支持“* _UserControl”](http://www.governor.co.uk/news-plus-views/2009/february/controlparameter-supports-%E2%80%9C__page%E2%80%9D-as-controlid,-but-not-%E2%80%9C__usercontrol%E2%80%9D/)。有很多方法可以处理它；本文列出了一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:12:11.357

在 Page 假设我们正在注册一个用户控件并且我们只使用它**一次**。

```
<%@ Register Src="user_control.ascx" TagName="my_user_control" TagPrefix="uc1" %>

<uc1:my_user_control ID="my_user_control1" runat="server" /> 
```

然后在控件内部我们可以使用 ID `my_user_control1`。

```
<asp:ControlParameter Name="SomeID" ControlID="my_user_control1" Type="Int32" PropertyName="MyID" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T15:40:24.700

我找到的最简单的解决方案是在您的用户控件中创建一个新控件，并将其隐藏，如下所示：

```
<asp:Label runat="server" ID="lblStartDate" Text='<%= this.StartDate %>' style="display:none"></asp:Label>

<asp:SqlDataSource runat="server" ID="dsData" ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" SelectCommand="GetDataStoredProcedure" SelectCommandType="StoredProcedure" >
<SelectParameters>
    <asp:ControlParameter ControlID="lblStartDate" Name="startDate" PropertyName="text" DbType="DateTime" />
</SelectParameters>
</asp:SqlDataSource> 
```

在用户控件后面的代码中：

```
 public DateTime StartDate
    {
        get { return ViewState["StartDate"] != null ? (DateTime)ViewState["StartDate"] : DateTime.Now; }
        set { ViewState["StartDate"] = value; }
    } 
```

# mysql - 从 mysql 数据库中选择 13,000 行的慢查询

> ID：14627685
> 
> 赞同：1
> 
> 时间：2013-01-31T14:06:58.217
> 
> 标签：mysql

我需要从具有 VARCHAR 主键索引 ID 的 mysql 表中选择某些行。

因此，我使用了一个查询（但显然是 13,000 个 id 而不是 3 个）

```
SELECT * FROM table1 WHERE ID IN ('id1928383','id3838339','id38383') 
```

对于大多数表来说，这很好用（~0.2s），但对于某些表来说，查询需要更长的时间（~10-11s）。

不起作用的表的唯一不同之处是它们的 Data_length 更大？有什么想法可以加快慢速查询的速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:33:26.197

查找 13,000 行需要实时时间。对于每个值，它必须：

1.  处理索引以找到记录位置
2.  将页面加载到页面缓存中
3.  返回结果

或者，它可能会进行表扫描以单独读取每一行并与列表进行比较。您能否提供长期运行版本的说明以确定使用哪种方法。

如果在索引中查找值，我的猜测是大表不适合页面缓存。这会导致大多数值的额外读取页面命中。

最简单的解决方案是增加页面缓存的大小。您也可以尝试将所有 id 放入一个临时表并将其连接到更大的表中。这样做时，在临时表上建立索引会特别有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:40:44.560

你可以做一些事情来加快这个查询：

*   **使用而`INT`不是`VARCHAR`列`ID`**

一般来说，计算机处理数字要比处理字符串好得多，因此这将大大加快速度。

*   **添加`ID`作为索引。**

这将使用该索引列创建一个有序表，其中搜索和排序将快很多。

*   **使用 PDO**

如果你在 PHP 中使用它，我建议你使用 PDO，因为它有一个查询缓存系统，并且如果有许多相同的查询正在运行，它可以显着改善结果。我想其他编程语言也有类似的机制。

*   **升级 MySQL**

对于您使用的所有软件，出于多种原因，建议您使用最新版本。如果我没记错的话，`IN`在旧版本的 MySQL 中存在性能问题，后来修复了几个版本，但你可能是仍然使用该版本的少数不幸的人之一。

* * *

这就是我能提供的帮助，如果您需要更多帮助，您需要发布更多信息（表结构、数据库结构、编程语言等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:08:40.100

确保所有`id`列都已编入索引。

# qt - 在 QVector 的变化上发出信号

> ID：14627689
> 
> 赞同：2
> 
> 时间：2013-01-31T14:07:05.937
> 
> 标签：qt, signals

我有一个`QVector`包含 8 个整数。现在我想要一个在这个向量的元素改变时发出的信号。该信号应包含已更改元素的编号。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:10:53.153

QVector 不是从 QObject 派生的，因此不会发出任何信号。

您可以做的是将 QVector 对象封装为您自己的从 QObject 派生的类中的私有成员，并编写您需要的修改方法，并在该类中编写和发出您需要的信号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:11:07.537

这相当棘手。您不应该继承自`QVector`，因为它没有虚拟析构函数，也没有可用于挂钩的受保护函数。最安全的方法是将 a 包装`QVector`到您自己的实现这些信号的特定于域的类中。

# java - Java：添加到字符串的末尾

> ID：14627694
> 
> 赞同：-5
> 
> 时间：2013-01-31T14:07:26.607
> 
> 标签：java

我有一个字符串，如下所示

```
String result = ["A","B","C","D","E","F"]
List list = new ArrayList();

        list.add("One");
        list.add("One2");
        list.add("One3"); 
```

我有一个 ArrayList ，我想添加 String 结果，这样它应该看起来像

```
["A","B","C","D","E","F","One","One2","One3"] 
```

我试过这种方式

```
String result = ["A","B","C","D","E","F"]
        for(int i=0;i<list.size();i++)
        {
        result = result+"list.get(i)"
        } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:20:15.480

这是一个很好的方法，无需太多的走动

```
import java.util.ArrayList;
import java.util.List;

public class Tester4 {

    public static void main(String args[]) {

        String[] result = new String[] { "A", "B", "C", "D", "E", "F" };

        List<String> list = new ArrayList<String>();

        list.add("One");
        list.add("One2");
        list.add("One3");

        for(int i = result.length-1; i>= 0; i--) {

            list.add(0,result[i]);
        }

        for(String string : list) {
            System.out.println("Answer: " + string);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:14:02.620

正如@assylias 指出的那样，您的问题似乎不清楚。假设您的变量“result”是一个字符串，请执行以下操作：

```
String result = "\"A\",\"B\",\"C\",\"D\",\"E\",\"F\"";
List list = new ArrayList();

list.add("One");
list.add("One2");
list.add("One3");

for(int i=0;i<list.size();i++)
{
   result += ",\"" + list.get(i) +"\""
} 
```

那么“结果”的输出应该是：

```
"A","B","C","D","E","F","One","One2","One3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:13:46.360

`["A","B","C","D","E","F"]`不是字符串。试试这个...

```
String result = ""
for(int i = 0; i < list.size(); i++){
    result += list.get(i);
} 
```

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:15:13.863

您使用的变量“结果”是字符串数组，而不是字符串。

如果您想获得具有这些特征的字符串列表，您应该编写：

```
String[] result = {"A","B","C","D","E","F"};
ArrayList<String> list = new ArrayList<String>();
list.add("One");
list.add("One2");
list.add("One3");
for(int i=0;i<result.length;i++)
{
   list.add(i, result[i]);
} 
```

因此，您会将数组“结果”的元素放在列表中的其他元素之前。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T14:16:28.900

结果不是字符串，而是字符串 []。所以，如果你想让结果看起来像

> ["A","B","C","D","E","F","One","One2","One3"]

您需要将“One”、“Two”、“Three”放在另一个 String[] 中，然后连接两个数组，例如如下所示[：](https://stackoverflow.com/questions/80476/how-to-concatenate-two-arrays-in-java)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T14:16:39.870

```
list.addAll(Arrays.asList(result)).toArray(new String[0]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T14:22:31.250

在`Java`定义数组时如下所示：`String[] result = {"A","B","C"}`

```
String[] result = {"A","B","C","D","E","F"};
List list = new ArrayList();

list.add("One");
list.add("One2");
list.add("One3");

List<String> newList = new ArrayList(Arrays.asList(result));
newList.addAll(list); 
```

输出`newList`：

`[A, B, C, D, E, F, One, One2, One3]`

# ruby-on-rails - 共享主机环境中 Apache 下的 Ruby on Rails

> ID：14627695
> 
> 赞同：1
> 
> 时间：2013-01-31T14:07:28.140
> 
> 标签：ruby-on-rails, apache

我正在通过为他的研究项目编写一个小网站来帮助一位朋友。我正在考虑编写它的平台之一是 Ruby on Rails。然而，他必须使用的大学服务器没有安装 Ruby。

我知道我可以在用户空间安装 Ruby，我认为这意味着我可以安装 Rails。但是对服务器的 web 请求的第一个调用端口将是 Apache 2.x，我没有能力安装新模块。我可以将请求交给 Rails 吗？带有 Mongrel 的 mod_proxy 是一个有效的解决方案，还是有更好的方法？如果他们不允许 mod_proxy 怎么办？

# php - 2个数组到JSON

> ID：14627703
> 
> 赞同：0
> 
> 时间：2013-01-31T14:08:08.600
> 
> 标签：php, api, json

我创建了一个 API 来处理来自 MySQL 数据库的数据请求。API 是用 PHP 实现的。

我目前有一个问题，我有一个选择查询 A，它将一个 json 对象返回给 api 调用者：

```
<pre>
$queryA =  "SELECT ...";
$queryB = "SELECT ...";

      $a = array();
      if(mysqli_num_rows($queryAResult)) 
      {
        while($row = mysqli_fetch_assoc($queryAResult))
        {   
            $a_a = $row["A"];
            $name = $row["name"];

            $arr = array('a' => $a_A, 'name' => $name);

            $a[] = array('a'=> $arr);
        }

              header('Content-type: application/json');
              echo $_GET['jsoncallback'] . '(' . json_encode(array('a'=>$a)) . ');';
        }
</pre> 
```

请问如何 json_encode 并返回 2 个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:10:50.203

只需使用数组数组

```
json_encode(array('a'=>$a,'b'=>$b)) 
```

你有什么问题？

```
$queryA =  "SELECT ...";
$queryB = "SELECT ...";

$a = array();
$b = array();
if(mysqli_num_rows($queryAResult)) 
{
    while($row = mysqli_fetch_assoc($queryAResult))
    {   
        $a[] = array('a' => $row['A'],'name' => $row['name']);
    }

    if(mysqli_num_rows($queryBResult))
    {
        while($row = mysqli_fetch_assoc($queryBResult))
        {   
            $b[] = array('b' => $row['B'],'name' => $row['name']);
        }

        header('Content-type: application/json');
        echo $_GET['jsoncallback'] . '(' . json_encode(array('a'=>$a, 'b'=>$b)) . ');';
    }
} 
```

# android - Perl 代码输出在 IIS 和 Apache 中的行为不同

> ID：14627708
> 
> 赞同：1
> 
> 时间：2013-01-31T14:08:23.970
> 
> 标签：android, perl, apache, iis, http-headers

我有 perl 脚本，它使用以下命令设置标题

```
print "Content-Disposition: attachment; filename=test.csv\n\n"; 
```

当部署在 Web 服务器 IIS 和 Apache 上时，此脚本的行为有所不同。

当代码部署在 apache web 服务器上时，我可以在 android mobile 上下载文件 test.csv。

但是当在IIS服务器上部署相同的脚本时，在android mobile上下载总是不成功。

注意：但在两个 Web 服务器的任何桌面浏览器中，下载工作都像魅力一样。

以下是来自 IIS 的响应标头

```
(Status-Line)   HTTP/1.1 200 OK
 Server Microsoft-IIS/6.0
 Content-Disposition    attachment; filename=test.csv
 X-Powered-By   ASP.NET
 Date   Thu, 31 Jan 2013 10:10:59 GMT
 Connection close 
```

以下是来自 Apache 的响应标头

```
(Status-Line)   HTTP/1.1 200 OK
 Date   Thu, 31 Jan 2013 10:12:33 GMT
 Server Apache/2.2.22 (Win32)
 Content-Disposition    attachment; filename=test.csv
 Keep-Alive timeout=5, max=100
 Connection Keep-Alive
 Transfer-Encoding  chunked
 Content-Type   text/plain 
```

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:22:42.397

非常感谢您的支持。

我尝试遵循 perl 代码，它帮助我解决了这个问题

```
# Set the header using following way
print "Content-Type: text/plain", "\n";
print "Content-length: $length", "\n";
print "Content-Disposition: attachment; filename=test.csv\n\n"; 
```

注意：$length 是一个存储文件内容长度的变量，如下所示

```
my $csv = "testing";
my $length = length $csv; 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:00:59.997

其他人似乎也无法从 IIS 服务器下载到 Android：

[http://code.google.com/p/android/issues/detail?id=33362](http://code.google.com/p/android/issues/detail?id=33362)

[.apk IIS 网络服务器在 android 2.3.x 上下载错误](https://stackoverflow.com/questions/13020169/apk-iis-webserver-download-error-on-android-2-3-x)

[http://www.experts-exchange.com/Programming/Languages/Java/Android/Q_27592118.html](http://www.experts-exchange.com/Programming/Languages/Java/Android/Q_27592118.html)

我认为这不是 Perl 问题。不过，我没有看到解决方案。

# loadrunner - 如何在脚本 loadrunner 的第一个请求中关联动态值

> ID：14627709
> 
> 赞同：0
> 
> 时间：2013-01-31T14:08:25.450
> 
> 标签：loadrunner

我记录了以下脚本片段：

```
Action()
{

    /*Click on Continue to this website*/

    /*Login*/

    web_url("startSSO.ping",
        "URL=https://e4.pncie.com/sso/idp/0LEMc/resumeSAML20/idp/startSSO.ping",
        "TargetFrame=",
        "Resource=0",
        "RecContentType=text/html",
        "Referer=",
        "Snapshot=t1.inf",
        "Mode=HTML",
        EXTRARES,
        "URL=/favicon.ico", ENDITEM,
        LAST);

    web_submit_data("ClaimCenter.do",
        "Action={P_url}",
        "Method=POST",
        "TargetFrame=",
        "RecContentType=text/html",
        "Referer=https://e4.pncie.com/sso/idp/0LEMc/resumeSAML20/idp/startSSO.ping",
        "Snapshot=t2.inf",
        "Mode=HTML",
        ITEMDATA,
        "Name=SAMLResponse", "Value=PHNhbWxwOlJlc3BvbnNlIERlc3RpbmF0aW9uPSJodHRwczovL2Nhc3BlcmZwb2MudGVudC50cnQuY3NhYS5wcmkvY2MvQ2xhaW1DZW50ZXIuZG8iIElzc3VlSW5zdGFudD0iMjAxMy0wMS0yNFQwNjozNDozOS4wNzhaIiBJRD0iWVRaLlhPdjZ6Skd2MmNldFk1NE5qZS1BT3FqIiBWZXJzaW9uPSIyLjAiIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6cHJvdG9jb2wiPjxzYW1sOklzc3VlciB4bWxuczpzYW1sPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXNzZXJ0aW9uIj5DQVM6SWRQPC9zYW1sOklzc3Vlcj48ZHM6U2lnbmF0dXJlIHhtbG5zOmRzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjIj4KPGRzOlNpZ25lZEluZm8+CjxkczpDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8xMC94bWwtZXhjLWMxNG4jIi8+CjxkczpTaWduYXR1cmVNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwLzA5L3htbGRzaWcjcnNhLXNoYTEiLz4KPGRzOlJlZmVyZW5jZSBVUkk9IiNZVFouWE92NnpKR3YyY2V0WTU0TmplLUFPcWoiPgo8ZHM6VHJhbnNmb3Jtcz4KPGRzOlRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyNlbnZlbG9wZWQtc2lnbmF0dXJlIi8+CjxkczpUcmFuc2Zvcm0gQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzEwL3htbC1leGMtYzE0biMiLz4KPC9kc"
        "zpUcmFuc2Zvcm1zPgo8ZHM6RGlnZXN0TWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnI3NoYTEiLz4KPGRzOkRpZ2VzdFZhbHVlPmVEV1dabWJKVHFnSU5qNUpaMHRHQ3NwNWE5cz08L2RzOkRpZ2VzdFZhbHVlPgo8L2RzOlJlZmVyZW5jZT4KPC9kczpTaWduZWRJbmZvPgo8ZHM6U2lnbmF0dXJlVmFsdWU+CkQzRkZBYTg2ZFVxdCtSdWllRWJnQW9YT1RiRWlJTlJVbXNhcUpLMXlWWGNvNFBxcXBVbTUxSXdLWHRQbTJUdEdSVGdVandyYlFkWTcKUzZzWVVKS3dpYVoxZytZckFBME9wdG1Pb0ZqSkVPQkVSamlFMGdSV0xPdTYzaUo3Zjl0Qk5zVmtTUW5hcGluVSthcThpTmVGSy9zWAo0elFCMU9IR3pQQ0ZmbGtMalRWWGI4LzdQMUdMTlhTRFA2Yjh4dlJDdUJpc0FiTjBlMTJsKzVMVHhBb2FkUjNtdnBLNmNYS3lxd2FlCldzcUdUTnZKbTZFRkhJQTNockpRWGRESC9wU0YwajBxOGJsV1kwUG1ldUZyTlFxTk4vRXgvOVJDNG5XN1R4QitETHlqbW9zanpZY1YKQjZ1NW9OeU9CTmF0ckZKMm02Q1AvbWhOWU5vNE55b2szQXNoREE9PQo8L2RzOlNpZ25hdHVyZVZhbHVlPgo8L2RzOlNpZ25hdHVyZT48c2FtbHA6U3RhdHVzPjxzYW1scDpTdGF0dXNDb2RlIFZhbHVlPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6c3RhdHVzOlN1Y2Nlc3MiLz48L3NhbWxwOlN0YXR1cz48c2FtbDpBc3NlcnRpb24gVmVyc2lvbj0iMi4wIiBJc3N1ZUluc3RhbnQ9IjIwMTMtMDEtMjRUMDY6MzQ6MzkuMzEyWiIgSUQ9ImhmTDVPN2F5djd"
        "xbXRRaXFmbjVWcDdFZC5VOCIgeG1sbnM6c2FtbD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFzc2VydGlvbiI+PHNhbWw6SXNzdWVyPkNBUzpJZFA8L3NhbWw6SXNzdWVyPjxzYW1sOlN1YmplY3Q+PHNhbWw6TmFtZUlEIEZvcm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6MS4xOm5hbWVpZC1mb3JtYXQ6dW5zcGVjaWZpZWQiPmNhc2VwdDAwMTU8L3NhbWw6TmFtZUlEPjxzYW1sOlN1YmplY3RDb25maXJtYXRpb24gTWV0aG9kPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6Y206YmVhcmVyIj48c2FtbDpTdWJqZWN0Q29uZmlybWF0aW9uRGF0YSBOb3RPbk9yQWZ0ZXI9IjIwMTMtMDEtMjRUMDY6Mzk6MzkuMzEyWiIgUmVjaXBpZW50PSJodHRwczovL2Nhc3BlcmZwb2MudGVudC50cnQuY3NhYS5wcmkvY2MvQ2xhaW1DZW50ZXIuZG8iLz48L3NhbWw6U3ViamVjdENvbmZpcm1hdGlvbj48L3NhbWw6U3ViamVjdD48c2FtbDpDb25kaXRpb25zIE5vdE9uT3JBZnRlcj0iMjAxMy0wMS0yNFQwNjozOTozOS4zMTJaIiBOb3RCZWZvcmU9IjIwMTMtMDEtMjRUMDY6Mjk6MzkuMzEyWiI+PHNhbWw6QXVkaWVuY2VSZXN0cmljdGlvbj48c2FtbDpBdWRpZW5jZT5DQVM6U1A8L3NhbWw6QXVkaWVuY2U+PC9zYW1sOkF1ZGllbmNlUmVzdHJpY3Rpb24+PC9zYW1sOkNvbmRpdGlvbnM+PHNhbWw6QXV0aG5TdGF0ZW1lbnQgQXV0aG5JbnN0YW50PSIyMDEzLTAxLTI0VDA2OjM0OjM5LjMxMloiIFNlc3Npb25JbmRleD0iaGZMNU83YXl2N3FtdFFpcWZuN"
        "VZwN0VkLlU4Ij48c2FtbDpBdXRobkNvbnRleHQ+PHNhbWw6QXV0aG5Db250ZXh0Q2xhc3NSZWY+dXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOmFjOmNsYXNzZXM6dW5zcGVjaWZpZWQ8L3NhbWw6QXV0aG5Db250ZXh0Q2xhc3NSZWY+PC9zYW1sOkF1dGhuQ29udGV4dD48L3NhbWw6QXV0aG5TdGF0ZW1lbnQ+PHNhbWw6QXR0cmlidXRlU3RhdGVtZW50IHhtbG5zOnhzPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSI+PHNhbWw6QXR0cmlidXRlIE5hbWVGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphdHRybmFtZS1mb3JtYXQ6YmFzaWMiIE5hbWU9IkZpcnN0TmFtZSI+PHNhbWw6QXR0cmlidXRlVmFsdWUgeHNpOnR5cGU9InhzOnN0cmluZyIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSI+QmFyYWN1ZGExNTwvc2FtbDpBdHRyaWJ1dGVWYWx1ZT48L3NhbWw6QXR0cmlidXRlPjxzYW1sOkF0dHJpYnV0ZSBOYW1lRm9ybWF0PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YXR0cm5hbWUtZm9ybWF0OmJhc2ljIiBOYW1lPSJMYXN0TmFtZSI+PHNhbWw6QXR0cmlidXRlVmFsdWUgeHNpOnR5cGU9InhzOnN0cmluZyIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSI+VGhvcm4xNTwvc2FtbDpBdHRyaWJ1dGVWYWx1ZT48L3NhbWw6QXR0cmlidXRlPjwvc2FtbDpBdHRyaWJ1dGVTdGF0ZW1lbnQ+PC9zYW1sOkFzc2VydGlvbj4"
        "8L3NhbWxwOlJlc3BvbnNlPg==", ENDITEM,
        EXTRARES,
        "URL=resources/Ocean/images/header_bg.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/modetabs_bgd.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/toolbar_bgd.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/menu_claim_search.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/unsaved_left_off.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/unsaved_middle.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/unsaved_right.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/btn2_left.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/btn2_1px.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/btn2_right.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabOn_1px.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabOn_left.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/menu-arrow-down-on.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabOn_right.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabOff_left.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabOff_1px.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/menu-arrow-down.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabOff_right.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabDS_1px.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabDS_right.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/tabDS_left.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/infobar_bgd.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/actionButton_middle.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/actionButton_left.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/actionButton_right.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/leftNav_select.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        "URL=resources/Ocean/images/pagetitle_bgd.gif", "Referer={P_url}?inFrame=mainframe&r=44794921&__navigator_index=0", ENDITEM,
        LAST); 
```

在上面的第一个请求中，向服务器发送`"0LEMc"`的 URL 中出现了一个动态值；同样在第二个请求中。我如何关联它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:06:11.310

1.  你怎么知道这个值是动态的？对我来说，它看起来像一个目录结构。
2.  如果它在第一个请求中（并且是动态的），那么它是客户端本地生成的值。这些首次调用动态项中的大多数都是基于自纪元以来的 13 位时钟滴答的唯一会话指示器。0LEMc 这个五位数的值似乎与时间值不对应。您是否向客户端应用程序的开发人员询问过见解？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:13:02.457

当您打开浏览器时，显然您不会每次都编造这个 URL 对吗？您可能会打开一个重定向到该链接的静态登录链接。下载[Firebug](http://getfirebug.com/)并查看正在发生的重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T18:01:30.680

您需要关联五位数的值（“0LEMc”）才能使您的请求生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-17T09:39:08.777

在分析动态值之前，需要考虑一些关键点。

1.  录制完脚本后，尝试以同样的方式再录制一次。
2.  当您比较这两个创建的脚本时，您将了解第二个脚本中所有值的变化。这些动态值可以用相关性来处理。

我建议您验证一下您的目标值是动态的还是其他轮脚本中的常见值。

如果您确定，那么您可以尝试手动关联值的传统方式。尝试在响应中查找值，并在相应请求之前添加 web_reg_save_param 参数并填写所有 LB、RB 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-20T13:10:03.843

您可以使用`"web_reg_save_param_regexp()" function`来关联这些值。

例如：

```
/* Correlation comment - Do not change! Original value='c9cb6401b8' Name ='CorrelationParameter' */
web_reg_save_param_regexp(
"ParamName=CorrelationParameter",
"RegExp=_wpnonce=(.*?)\">Log\\ Out",
SEARCH_FILTERS,
"Scope=Body",
"IgnoreRedirections=Yes",
"RequestUrl=*/wp-admin/*",
LAST); 
```

您必须使用右边界和左铸造值并将动态值存储到参数中并按如下方式进行相关性

```
web_url("startSSO.ping",
        "URL=https://e4.pncie.com/sso/idp/{value}/resumeSAML20/idp/startSSO.ping",
        "TargetFrame=",
        "Resource=0",
        "RecContentType=text/html",
        "Referer=",
        "Snapshot=t1.inf",
        "Mode=HTML",
        EXTRARES,
        "URL=/favicon.ico", ENDITEM,
        LAST); 
```

# iphone - Ipad dev：在 UITextview 中弹出单词

> ID：14627710
> 
> 赞同：0
> 
> 时间：2013-01-31T14:08:25.350
> 
> 标签：iphone, ios, ipad, mobile, uitextview

我是 iOS 开发的新手，这是我的问题。在我的应用程序中，我有一些冗长的文本要显示，但在这些文本中，我希望一些词被下划线和“活跃”。我所说的“活跃”是指我可以单击其中一个词来弹出定义或图片。

我想使用 UITextView 和 UILabel 这样我就使用 Textview 直到我得到一个活动单词（感谢连接到弹出窗口的标签），然后我再次使用 Textview。

如果我想要这个：bla bla bla bla ACTIVE bla bla bla bla ...

我会使用：TextView 标签 TextView ...

除此之外，我不知道如何做到这一点，我意识到这是一种非常糟糕的方式。

我的文本和文字必须在 XML 文件中，而且我不确定要使用的最佳结构...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:57:29.883

如果您想使用 UITextView 实现此功能，那么这并不难。必须有一些逻辑来实现这种事情。这里有一些想法。

如果要带下划线的单词，请 从所选单词的矩形中[画线。](https://stackoverflow.com/questions/5375350/uitextview-ruled-line-background-but-wrong-line-height/5453189#5453189)

为了从 UITextView 中获取选定的单词，

```
-(void)textViewDidChangeSelection:(UITextView *)textView
{
    @try
    {
        NSLog(@"%@",[textView.text substringWithRange:textView.selectedRange]);
    }
    @catch (NSException *exception)
    {

    }
} 
```

为了从该位置显示弹出窗口，再次使用 UITextView 的 Delegate 方法`- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text`，并在该方法下获取光标位置并从该位置显示弹出窗口。像这样的东西。

```
AutoCompleteView *autoCompleteView = [[AutoCompleteView alloc] initWithContent:suggestions forText:text];
autoCompleteView.delegate = self;
CGPoint cursorPosition = [textView caretRectForPosition:textView.selectedTextRange.start].origin;
CGRect frame = CGRectMake(cursorPosition.x, cursorPosition.y+30, 150, 100);
popoverController = [[WEPopoverController alloc] initWithContentViewController:autoCompleteView];
popoverController.delegate = self;
[popoverController presentPopoverFromRect:frame inView:commentView  permittedArrowDirections:(UIPopoverArrowDirectionUp) animated:YES]; 
```

希望您对您的要求有所了解。

# cakephp - 用户会话和两个 CakePHP 应用程序在同一台机器上运行

> ID：14627712
> 
> 赞同：3
> 
> 时间：2013-01-31T14:08:31.407
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2, cakephp-2.3

我有**2 个 CakePHP 应用程序**在同一台机器上运行。他们都需要事先注册才能访问它们，用户首先看到的是登录表单。

我已经意识到，当我登录其中一个时，我可以访问另一个 Web 应用程序，而无需询问我的登录凭据。（这是不正确的）

在我的两个应用程序的控制器中，我都可以在没有以前登录的情况下拒绝访问。

```
public function beforeFilter(){
    parent::beforeFilter();

    $this->Auth->deny();
} 
```

但是，当我使用相同的浏览器并且确实登录其中一个应用程序时，这似乎无法正常工作。

为什么会这样？有没有办法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:21:30.673

两个应用程序的 cookiename 和/或缓存前缀应该不同。

您可以在`core.php`文件中找到这些设置

# qt - 在 Qt 中获取 HTML 表格单元格宽度

> ID：14627713
> 
> 赞同：0
> 
> 时间：2013-01-31T14:08:31.360
> 
> 标签：qt, qt4, qt4.8

我正在尝试创建一个 HTML 表格并在 Qt 中获取单元格宽度。

我创建了一个 HTML 表：

```
QString css;
css = "<style type=\"text/css\">";
css += "table.tbl {border-width: 1px;border-style: solid;border-color: black;margin-top: 0px;margin-bottom: 0px;color: black;}";
css += "table.tbl td {padding: 3px;}";
css += "table.tbl th {padding: 3px;}";
css+="</style>";

QString text;
text="<table width=\"100%\" cellspacing=\"0\" class=\"tbl\">";
text+=("<tr><th>1</th><th colspan=\"2\">2</th><th>3</th><th></th></tr>");
text+=("<tr><td>1</td><td>2</td><td>3</td></tr>");
text+=("<tr><td colspan=\"2\">4</td><td>5</td><td>6</td></tr>");
text+=("<tr><td>7</td><td>8</td><td>9</td></tr>");
text+=("<tr><td>10</td><td>11</td><td>12</td></tr></table>"); 
```

我需要特定单元格的宽度。我找到了一个获取单元格宽度的 JavaScript 函数：

```
document.getElementById('tblID').rows[0].cells[0].offsetWidth 
```

但我不知道如何在 Qt 中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:06:11.893

你会想看看在 QWebFrame 中使用 Qt 对象。你可能想从这里开始：

[http://qt-project.org/doc/qt-4.8/qwebframe.html#addToJavaScriptWindowObject](http://qt-project.org/doc/qt-4.8/qwebframe.html#addToJavaScriptWindowObject)

Qt 支持通过信号和槽以及属性在 C++ 代码和 javascript 对象之间进行消息传递。

# ios - 我如何淡入半透明的 UIVIew 并在触摸 bg 时关闭？

> ID：14627720
> 
> 赞同：0
> 
> 时间：2013-01-31T14:08:53.690
> 
> 标签：ios, uiview, transparent

我不知道如何处理动画，我希望在半透明视图中淡入淡出，并在点击背景时将其关闭，就像 Tumblr 应用程序在他们的撰写屏幕上一样。

这就是我到目前为止所拥有的。它添加了半透明视图，但没有像 Tumblr 那样的淡入淡出效果。

```
UIView *modalView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
[modalView setOpaque: NO];
[modalView setBackgroundColor: [UIColor colorWithAlphaComponent: 0.9];
[[self view] addSubview: modalView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:54:44.767

我不确定你到底想要达到什么目的，但看起来你需要结合`UIView`动画和`UITapGestureRecognizer`

使用此代码淡入视图（适当调整开始和结束 alpha 值）：

```
[modalView setAlpha:0];
[UIView animateWithDuration:0.5f
                      delay:0.0f
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^(void) {
                    [myView setAlpha:1.0;
                 }
                 completion:NULL]; 
```

这将创建一个手势识别器：

```
UITapGestureRecognizer *tapgr = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(didTapView)];
tapgr.cancelsTouchesInView = NO;
[timeView addGestureRecognizer:tapgr]; 
```

`didTapView`是您关闭视图的方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:14:47.157

您是否尝试在此半透明视图中添加点击识别器？请参阅[UITapGestureRecognizer 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:11:51.180

如果我理解正确，您的问题是没有动画。动画很简单：

```
UIView *modalView = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
[modalView setOpaque: NO];
[modalView setBackgroundColor: [UIColor colorWithAlphaComponent: 0.9];
[[self view] addSubview: modalView];

[modalView setAlpha: 0];
[UIView animateWithDuration: 0.5 animations: ^{
    [modalView setAlpha: 1];
} 
```

探索`UIView`完成处理程序等的其他动画方法。

# c# - 使用纬度和经度的 Google Streetview 或 Bing 街边 URL

> ID：14627725
> 
> 赞同：0
> 
> 时间：2013-01-31T14:09:04.027
> 
> 标签：c#, google-maps, bing-maps, latitude-longitude, google-street-view

我有纬度和经度坐标，并且一直在尝试在网络浏览器实例中打开 Google 街景或 Bing 街边。

我已经设法使用下面的谷歌街景网址来做到这一点，但是我发现如果坐标不完全在道路上，它就不起作用。相反，你会得到一张全世界的地图。

```
string.Format(
    "http://maps.google.com/?cbll={0},{1}&cbp=12,0,0,0,5&layer=c",
    this.Location.Latitude,
    this.Location.Longitude) 
```

我想使用的坐标在伦敦，所以它几乎都被映射了。我想显示最近的街道位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:56:56.063

我过去所做的就是这样。我检查 StreetViewService 在给定位置 50 米范围内是否有“全景图”。这是一些完整的示例 JS 代码，应该可以按原样工作。

```
<!DOCTYPE html>
<html>
<head>
<title>Streetview</title>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }
#streetView { height: 100%; width: 100%; }
</style>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script type="text/javascript">

    function createStreetMap(strMapCanvasID, intLat, intLong)
    {
        //create a google latLng object
        var streetViewLocation = new google.maps.LatLng(intLat,intLong);
        var panorama;

        //once the document is loaded, see if google has a streetview image within 50 meters of the given location, and load that panorama
        var sv = new google.maps.StreetViewService();

        sv.getPanoramaByLocation(streetViewLocation, 50, function(data, status) {
            if (status == 'OK') {
                //google has a streetview image for this location, so attach it to the streetview div
                var panoramaOptions = {
                    pano: data.location.pano,
                    addressControl: false,
                    navigationControl: true,
                    navigationControlOptions: {
                        style: google.maps.NavigationControlStyle.SMALL
                    }
                }; 
                var panorama = new google.maps.StreetViewPanorama(document.getElementById(strMapCanvasID), panoramaOptions);
            }
            else{
                //no google streetview image for this location, so hide the streetview div
                $('#' + strMapCanvasID).parent().hide();
            }
        });

        return panorama;
    }

    $(document).ready(function() {
        var myPano = createStreetMap('streetView', 51.513016, -0.144424);
    });
</script>

</head>
<body>
<div>
    <h2>Street View</h2>
    <div id="streetView"></div>
</div>
</body>
</html> 
```

然后我只在 DOM 加载后才调用此函数（否则，如果尝试在函数内过早执行此操作，我会发现错误`initialize`）。

```
$(document).ready(function() {
    var myPano = createStreetMap('streetView', someLatitude, someLongitude);
}); 
```

`createStreetMap`我相信 C# 而不是使用来自内部的调用，而是`$(document).ready(function() { ... });`使用[WebBrowser.InvokeScript](http://msdn.microsoft.com/en-us/library/cc491132.aspx)方法并执行以下操作：

```
object[] args = {"streetView",51.513016,-0.144424};
webBrowser1.Document.InvokeScript("createStreetMap",args); 
```

另请参阅： http: [//www.codeproject.com/Tips/60924/Using-WebBrowser-Document-InvokeScript-to-mess-aro](http://www.codeproject.com/Tips/60924/Using-WebBrowser-Document-InvokeScript-to-mess-aro)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:24:01.990

你应该能够使用类似的东西：

```
http://maps.googleapis.com/maps/api/streetview?size=300x300&format=png&fov=90&location={0},{1}&sensor=false
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:45:44.853

我曾经通过 URL 操作来做很多谷歌地图的事情。`WebBrowser`直到我发现了从 C#实例调用 JavaScript 的能力。我通常使用[Google Maps API](https://developers.google.com/maps/ "谷歌地图 API")和`WebBrowser`'s [InvokeScript](http://msdn.microsoft.com/en-us/library/cc491132.aspx)方法来调用我需要的东西。我发现它的用途更加广泛，尽管有时会很痛苦。

编辑：对不起，我意识到这不一定是您问题的直接答案，但我发现除了最基本的地图操作之外，API 和 JavaScript 提供了更好的功能。

# html - 不会在所有浏览器中换行

> ID：14627727
> 
> 赞同：0
> 
> 时间：2013-01-31T14:09:08.987
> 
> 标签：html

我知道这看起来很奇怪，但在我的网站上，`<br>`标签无法正常工作。考虑这个网址[http://barchick.com/most-wanted/camper-english](http://barchick.com/most-wanted/camper-english)。内容（你住在哪里？旧金山，加利福尼亚......）包含`<br/>`标签，但浏览器会跳过它。

```
WHERE DO YOU LIVE?<br/><br/>San Francisco, California, USA.<br/><br/> 
```

在浏览器中我看到 jst`WHERE DO YOU LIVE?San Francisco, California`

这是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:10:50.533

在您的`main.css`文件中，第 3913 行：

```
#wanted-single .text BR{
  display: none;
} 
```

如果删除该规则，您将按预期看到换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:10:35.773

取决于您的文档类型和/或浏览器`<br/>`不是有效的 HTML。你需要一个空格`/`来让旧版浏览器`<br>`正确理解标签：`<br />`

# ios - obj c 创建一个对象并没有真正起作用，在将几个新对象插入 NSMutuableArray 之后，我总是得到最后插入的对象

> ID：14627730
> 
> 赞同：1
> 
> 时间：2013-01-31T14:09:20.287
> 
> 标签：ios, objective-c, xcode

我正在为 iOS 编写一个应用程序，我必须读取一个外部 xml 文件。我的程序逻辑运行良好。我用 NSLog 消息检查了几次。我的问题是，当我向我的 NSMutuableArray masterNewsList 添加一个新对象时，插入后每个对象都被最后插入的对象覆盖。我在这里有什么错误？我找不到它。

```
//  NewsData.h

#import <Foundation/Foundation.h>

@interface NewsData : NSObject

@property (nonatomic,copy) NSString *title;
@property (nonatomic,copy) NSString *date;
@property (nonatomic,copy) NSString *detail;
@property (nonatomic,copy) NSString *content;

-(id) initWithTitle:(NSString *)title  date:(NSString *)date detail:(NSString *)detail content:(NSString *)content;

@end

//NewsData.m

#import "NewsData.h"

@implementation NewsData

-(id)initWithTitle:(NSString *)title date:(NSString *)date detail:(NSString *)detail content:(NSString *)content{
 self = [super init];
 if (self) {
    _title = title;
    _date = date;
    _detail = detail;
    _content = content;
    return self;
}
return nil;
}

@end

//  NewsDataController.h

#import <Foundation/Foundation.h>

@class NewsData;

@interface NewsDataController : NSObject <NSXMLParserDelegate>

@property (nonatomic, copy) NSMutableArray *masterNewsList;

- (NSUInteger)countOfList;
- (NewsData *)objectInListAtIndex:(NSUInteger)theIndex;

@end

//  NewsDataController.m

#import "NewsDataController.h"
#import "NewsData.h"

@interface NewsDataController()

@property NSMutableString *title;
@property NSMutableString *description;
@property NSMutableString *content;
@property NSMutableString *date;

@property BOOL itemValue;
@property BOOL titleValue;
@property BOOL descriptionValue;
@property BOOL contentValue;
@property BOOL dateValue;

-(void) initializeDataList;
- (void)addNewsData:(NewsData *)newsData;

@end

@implementation NewsDataController

- (void) initializeDataList {
    NSMutableArray *newsList = [NSMutableArray array];
    self.masterNewsList = newsList;

    self.title = [NSMutableString stringWithString:@""];
    self.description = [NSMutableString stringWithString:@""];
    self.content = [NSMutableString stringWithString:@""];
    self.date = [NSMutableString stringWithString:@""];

    self.itemValue = false;
    self.contentValue = false;
    self.dateValue = false;
    self.titleValue = false;
    self.descriptionValue = false;

    NSData *xmlData = nil;
    xmlData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.somesite.de/?type=100"]];
    if (xmlData != nil) {
        NSXMLParser *theParser = [[NSXMLParser alloc] initWithData:xmlData];
        theParser.delegate = self;
        [theParser parse];
    }
     else{
        NewsData *newsData;
        newsData = [[NewsData alloc] initWithTitle:@"Es konnten keine News geladen werden" date: @"---" detail:@"Keine Verbindung zum Server" content:@"Bitte Netzwerkverbindung überprüfen!"];
        [self addNewsData:newsData];
    }
}

-(void) setMasterNewsList:(NSMutableArray *)newList{
    if (_masterNewsList != newList) {
        _masterNewsList = [newList mutableCopy];
    }
}

-(id) init{
    if (self = [super init]) {
        [self initializeDataList];
        return self;
    }
    return nil;
}

- (NSUInteger) countOfList{

    return [self.masterNewsList count];
}

- (NewsData *)objectInListAtIndex:(NSUInteger)theIndex{

    return [self.masterNewsList objectAtIndex:theIndex];
} 
```

将对象添加到 masterNewsList 的方法

```
- (void) addNewsData:(NewsData *)newsData{

    [self.masterNewsList addObject:newsData];

}

-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{

    if ([elementName isEqualToString:@"item"]) {
        self.itemValue = true;
    }
    if ([elementName isEqualToString:@"title"]) {
        [self.title deleteCharactersInRange:NSMakeRange(0, self.title.length)];
        self.titleValue = true;
    }
    if ([elementName isEqualToString:@"description"]) {
        [self.description deleteCharactersInRange:NSMakeRange(0, self.description.length)];
        self.descriptionValue = true;
    }
    if ([elementName isEqualToString:@"content:encoded"]) {
        [self.content deleteCharactersInRange:NSMakeRange(0, self.content.length)];
        self.contentValue = true;
    }
    if ([elementName isEqualToString:@"pubDate"]) {
        [self.date deleteCharactersInRange:NSMakeRange(0, self.date.length)];
        self.dateValue = true;
    }
 } 
```

在这里，我创建了一种 NewsData 的新对象，然后调用 addNewsData 方法

```
-(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    if ([elementName isEqualToString:@"item"]) {
        NewsData *newsData;
        newsData = [[NewsData alloc] initWithTitle:self.title date:self.date detail:self.description content:self.content];
        [self addNewsData:newsData];
        self.itemValue = false;
    }
    if ([elementName isEqualToString:@"title"]) {
        self.titleValue = false;
    }
    if ([elementName isEqualToString:@"description"]) {
        self.descriptionValue = false;
    }
    if ([elementName isEqualToString:@"content:encoded"]) {
        self.contentValue = false;
    }
    if ([elementName isEqualToString:@"pubDate"]) {
        self.dateValue = false;
    }
}

-(void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    if (self.itemValue && self.titleValue) {
        [self.title appendString:string];
    }
    if (self.itemValue && self.descriptionValue) {
        [self.description appendString:string];
    }
    if (self.itemValue && self.contentValue) {
        [self.content appendString:string];
    }
    if (self.itemValue && self.dateValue) {
        [self.date appendString:string];
    }
}

-(void) parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock{
    if (self.itemValue && self.contentValue) {
        [self.content appendString:[[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding]];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:15:30.260

你的错误在这里：

```
if (self) {
    // None of these assignments copies the incoming mutable strings.
    // When strings change later on, so do titles, details, content, and so on.
    _title = title;
    _date = date;
    _detail = detail;
    _content = content;
    return self;
} 
```

您正在使用对标记的属性的支持变量进行赋值`copy`。切换到分配给属性，您的问题将得到解决：

```
if (self) {
    // Since your property is correctly marked `copy` (a good idea for NSString)
    // these assignments will make copies of mutable strings,
    // preventing the unwanted modifications.
    self.title = title;
    self.date = date;
    self.detail = detail;
    self.content = content;
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:15:18.193

我不完全确定是什么导致了这个问题，但我强烈建议你寻找 DDXML 并使用那一小组类来处理 xml。它们为节点、子节点和其他东西提供了简单的 getter，使用它比自己解析 XML 要容易得多。

干杯

# python - 压缩后如何保持字典有序

> ID：14627732
> 
> 赞同：1
> 
> 时间：2013-01-31T14:09:30.317
> 
> 标签：python

字典仅在大约 1,2 或 3 个元素时保持正确的顺序

```
>>> a = ["dorian", "strawberry", "apple"]
>>> b = ["sweet", "delicious", "tasty"]
>>> c = dict(zip(a, b))
>>> c
{'dorian': 'sweet', 'strawberry': 'delicious', 'apple': 'tasty'} 
```

但是当有超过3个元素时，顺序就被打破了

```
>>> a = ["dorian", "strawberry", "apple", "coconut"]
>>> b = ["sweet", "delicious", "tasty", "yum"]
>>> c = dict(zip(a, b))
>>> c
{'strawberry': 'delicious', 'coconut': 'yum', 'dorian': 'sweet', 'apple': 'tasty'} 
```

谁能解释一下为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:11:28.413

Python 字典不维护任何顺序，您应该使用[`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)它。

```
In [7]: from collections import OrderedDict as od

In [8]: a = ["dorian", "strawberry", "apple"]

In [9]: b = ["sweet", "delicious", "tasty"]

In [10]: dic=od(zip(a,b))

In [11]: dic
Out[11]: OrderedDict([('dorian', 'sweet'), ('strawberry', 'delicious'), ('apple', 'tasty')]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:11:55.553

Python[`dict`是无序的](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)。改为使用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)。

```
from collections import OrderedDict as odict

# ...
c = odict(zip(a, b)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:12:03.977

字典是地图数据结构。你永远不能线性保证订单。牺牲这一点，您可以在底层实现中获得速度。

# jquery - IE 没有得到正确的下一个元素

> ID：14627734
> 
> 赞同：-3
> 
> 时间：2013-01-31T14:09:37.427
> 
> 标签：jquery, html, cross-browser

假设我点击`<div class="span10 -configGroup-title" >`

在 IE 中`$(this).parent().next().next()`取回`<img alt="arrow" src="../arrow_normal.png" class="-arrow" />`

在 Chrome 中，它得到`<div id="seconddiv"/>`

```
 <div class="row">
     <div class="span10 -configGroup-title" >
          <img alt="arrow" src="../arrow_normal.png" class="-arrow" />
          <img alt="arrow" src="../arrow_down.png" class="-arrow" style="display: none;" />
          <asp:Literal ID="ltGroupAttrName" runat="server" />
     </div>  
 </div>  
 <asp:ListView ID="lvProperties" runat="server" EnableViewState="true"  />
<div id="seconddiv"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:06:49.953

我想正在发生的事情（尽管我无法确定没有看到完整的代码并能够对其进行测试）是您*实际上是*在单击其中一个孩子`<div class="span10 -configGroup-title">`时，您正在尝试单击其`div`本身（这是有道理的，因为这两个`img`标签将处于比`div`) 更高的拓扑级别。

您可以尝试通过插入一些代码来调试它以显示`$(this)`. 这可能会说明你正在发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T16:42:15.487

尝试这个：

```
$(this).parent(".row").siblings("#seconddiv"); 
```

# php - 如何更改 WWW-Authenticate 弹出框的设计/样式以匹配我的网站主题？

> ID：14627741
> 
> 赞同：0
> 
> 时间：2013-01-31T14:10:02.160
> 
> 标签：php, html, css, www-authenticate

晕那里，

我需要更改 WWW-Authenticate 弹出框的外观/设计以匹配我的网站主题，当用户需要登录到安全页面时，我不希望它显示默认的身份验证弹出框。下面是我用来创建 WWW-Authenticate 弹出窗口的 PHP 脚本。

```
<?php

$_user_ = 'test';
$_password_ = 'test';

session_start();

$url_action = (empty($_REQUEST['action'])) ? 'logIn' : $_REQUEST['action'];
$auth_realm = (isset($auth_realm)) ? $auth_realm : '';

if (isset($url_action)) {
if (is_callable($url_action)) {
    call_user_func($url_action);
} else {
    echo 'Function does not exist, request terminated';
};
};

function logIn() {
global $auth_realm;

if (!isset($_SESSION['username'])) {
    if (!isset($_SESSION['login'])) {
        $_SESSION['login'] = TRUE;
       header('WWW-Authenticate: Basic realm="'.$auth_realm.'"');
       header('HTTP/1.0 401 Unauthorized');
        echo 'You must enter a valid login and password';
        echo '<p><a href="?action=logIn">Try again</a></p>';
        exit;
    } else {
        $user = isset($_SERVER['PHP_AUTH_USER']) ? $_SERVER['PHP_AUTH_USER'] : '';
        $password = isset($_SERVER['PHP_AUTH_PW']) ? $_SERVER['PHP_AUTH_PW'] : '';
        $result = authenticate($user, $password);
        if ($result == 0) {
            $_SESSION['username'] = $user;
        } else {
            session_unset($_SESSION['login']);
            errMes($result);
            echo '<p><a href="?action=logIn">Try again</a></p>';
            exit;
        };
    };
 };
}

function authenticate($user, $password) {
global $_user_;
global $_password_;

if (($user == $_user_)&&($password == $_password_)) { return 0; }
else { return 1; };
}

function errMes($errno) {
   switch ($errno) {
    case 0:
        break;
    case 1:
        echo 'The username or password you entered is incorrect';
        break;
    default:
        echo 'Unknown error';
};
}

function logOut() {

session_start();
session_destroy();
header("Location: index.html");

}

?> 
```

以下是我在需要保护或保护的所有页面中使用的代码。

```
<?php
require_once 'auth.php';
echo "You've logged in as {$_SESSION['username']}<br>";
echo '<p><a href="?action=logOut">LogOut</a></p>'
?> 
```

请帮助...记住代码工作正常我只想改变外观。感谢先进:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:21:22.657

两种选择：

## Javascript

提交表单时使用javascript以[http://username:password@domain.com](http://username:password@domain.com)的形式构造一个url，将document.location设置为构造的url，浏览器将在自动身份验证的同时重定向。

## 服务器端

允许表单提交给自身并使用服务器端代码执行相同的重定向 - 我建议使用 307 重定向。

在 php 中：

```
redirect("http://username:password@domain.com", 307); 
```

## 缺点

如果初始用户名和密码提交不正确，这两个版本仍然会导致 Web 浏览器显示丑陋的身份验证框。

如果您需要避免这种情况，那么您将需要实现自己的服务器端身份验证方案。

## 更多详情

如果你能告诉我你认为你会喜欢哪个选项，我可以展示更多的示例代码。

## 安全隐患

使用 HTTP 基本身份验证存在安全隐患。如果您不使用 SSL，则密码将以明文形式发送。使用上述方法将以明文形式发送密码作为 URL 的一部分。还有其他安全隐患：

[https://security.stackexchange.com/questions/988/is-basic-auth-secure-if-done-over-https](https://security.stackexchange.com/questions/988/is-basic-auth-secure-if-done-over-https)

因此，我总是建议不要使用 http 基本身份验证。许多用户可能对敏感帐户使用相同的密码，因此即使是基本的身份验证系统也值得花一点时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:01:12.357

您无法更改弹出框的样式。您必须在您的网站上创建自己的登录表单。

# objective-c - 如何避免子类无意中覆盖超类私有方法

> ID：14627747
> 
> 赞同：6
> 
> 时间：2013-01-31T14:10:12.537
> 
> 标签：objective-c, objective-c-category, class-extensions

我正在编写一个库，它可能会被不是我的人使用。

假设我写了一个类：

*有趣的类.h*

```
@interface InterestingClass: NSObject
- (id)initWithIdentifier:(NSString *)Identifier;
@end 
```

*有趣的课堂.m*

```
@interface InterestingClass()
- (void)interestingMethod;
@end

@implementation InterestingClass
- (id)initWithIdentifier:(NSString *)Identifier {
  self = [super init];
  if (self) {
    [self interestingMethod];
  }
  return self;
}

- (void)interestingMethod {
  //do some interesting stuff
}
@end 
```

如果有人稍后使用该库并决定创建一个子类`InterestingClass`怎么办？：

*有趣的子类.h*

```
@interface InterestingSubClass: InterestingClass
@end 
```

*有趣的子类.m*

```
@interface InterestingSubClass()
- (void)interestingMethod;
@end

@implementation InterestingSubClass
- (void)interestingMethod {
  //do some equally interesting, but completely unrelated stuff
}
@end 
```

未来的图书馆用户可以从公共接口中看到它`initWithIdentifier`是超类的一个方法。如果他们重写此方法，他们可能会（正确地）假设该`superclass`方法应该在子类实现中调用。

但是，如果他们定义了一个方法（在子类私有接口中）无意中与超类“私有”接口中的不相关方法同名，该怎么办？如果没有他们阅读超类的私有接口，他们不会知道他们不仅创建了一个新方法，而且还覆盖了超类中的某些内容。子类实现最终可能会被意外调用，而超类在调用方法时期望完成的工作将无法完成。

我读过的所有 SO 问题似乎都表明这只是 ObjC 的工作方式，并且没有办法绕过它。是这种情况，还是**我可以做些什么来保护我的“私有”方法不被覆盖？**

或者，**有什么方法可以限制从我的超类调用方法的范围，这样我就可以确定将调用超类实现而不是子类实现？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-08T18:55:19.077

AFAIK，你能希望的最好的就是声明覆盖必须调用 super。您可以通过将超类中的方法定义为：

```
- (void)interestingMethod NS_REQUIRES_SUPER; 
```

这将在编译时标记任何不调用 super 的覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:20:17.240

对于框架代码来说，处理这个问题的一个简单方法是给你所有的私有方法一个私有前缀。

您会经常在堆栈跟踪中注意到，Apple 框架调用私有方法通常以一个 under bar 开头`_`。

如果您确实提供了一个供人们看不到您的源代码的外部使用框架，那么这才是真正值得关注的问题。

**注意**
不要用下划线前缀开始你的方法，因为这个约定已经被保留

# windows - 如何让调试器强制 Windows 线程从睡眠中唤醒？

> ID：14627752
> 
> 赞同：2
> 
> 时间：2013-01-31T14:10:21.950
> 
> 标签：windows, multithreading, debugging, condition-variable

我正在调试一个死锁。我想唤醒一个正在等待条件变量的线程，以便在它重新检查睡眠条件时进行跟踪。在条件变量上睡觉会受到虚假唤醒的影响，那么我该如何强制这样的唤醒呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:32:59.783

`.call`如果您使用的是windbg，您可以使用windbg 的命令在被调试者中调用WakeAllConditionVariable 。

# css - 在样式表中使用 media="print" 与 @media 打印声明的权衡是什么？

> ID：14627755
> 
> 赞同：3
> 
> 时间：2013-01-31T14:10:34.067
> 
> 标签：css, printing, media-queries

我试图弄清楚如何构建我的 CSS 文件（现在已经很多了），我想知道是否有任何实际区别：

```
<link href="blah.css" media="print" rel="stylesheet" type="text/css" /> 
```

或有：

```
@media print {
   definitions
} 
```

我是从浏览器的角度问的。两者都得到同样的支持吗？我可以不关心吗？

还是一个明显优越？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:13:57.857

根据[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)`@media ...` ，自 HTML4 和 CSS2 以来就支持在 CSS 文件中使用。

> "'print' 和 'screen' 媒体类型在 HTML4 中定义。HTML4 中媒体类型的完整列表是：'aural'、'braille'、'handheld'、'print'、'projection'、'screen'、 'tty', 'tv'。CSS2 定义了相同的列表，弃用了 'aural' 并添加了 'embossed' 和 'speech'。此外，'all' 用于指示样式表适用于所有媒体类型。”

CSS3 扩展了使用，`@media ...`也允许使用媒体查询，这些也记录在我之前链接的 w3.org 页面上。

此处还记录了媒体类型的使用：

[http://www.w3schools.com/css/css_mediatypes.asp](http://www.w3schools.com/css/css_mediatypes.asp)

以下是对媒体查询的支持列表：

[http://www.javascriptkit.com/dhtmltutors/cssmediaqueries.shtml](http://www.javascriptkit.com/dhtmltutors/cssmediaqueries.shtml)

据我所知；的使用得到了`@media screen, print, ...`非常广泛的支持，但是您可以使用的较新的媒体查询仅在与 CSS3 兼容的浏览器中受支持。

**编辑：**这里有更多关于此的信息：

[http://www.w3.org/TR/CSS2/media.html#x2](http://www.w3.org/TR/CSS2/media.html#x2)

我不会担心支持使用`@media ...`这种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:06:43.417

我只会使用@media print，如果用户决定打印，您就不必额外调用样式表。您唯一要放弃的是样式表上额外的几 KB，但我想说这对于合并所有样式来说并不是一个糟糕的代价。

# jquery - 在 Visual Form Builder Pro (jQuery DatePicker) 上禁用星期几

> ID：14627757
> 
> 赞同：0
> 
> 时间：2013-01-31T14:10:36.040
> 
> 标签：jquery, forms, jquery-ui-datepicker, builder

我想从日期选择器中禁用星期一和星期二 - 我在 my-js.js 文件中找到了禁用一天的代码，它工作正常，我无法让第二天工作 - 以下是我的一天工作的代码只有 - 添加星期二的任何帮助都会很棒：我已经禁用了星期一，也是在今天之前的每一天使用这个 my-js.js 文件：

```
jQuery(document).ready(function($) {
    $.datepicker.setDefaults({
        minDate:+1,
        beforeShowDay: disableMonday
    });
});

function disableMonday(date) {
    var day = date.getDay();
    return [(day != 1), ''];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:21:54.167

尝试做这样的事情：

```
$(document).ready(function(){
  $.datepicker.setDefaults({
    minDate:+1,
    beforeShowDay: function(date){
      if(date.getDay() === 1 || date.getDay() === 2){
        // must return array
        // first is a boolean (true or false)
        // second is a class 
        // third is a tooltip
         return [false];
      }else{
         return [true];
      }
    }
  });
}); 
```

演示：http: [//jsbin.com/uvexuk/4/edit](http://jsbin.com/uvexuk/4/edit)

链接：

*   [http://api.jqueryui.com/datepicker/#option-beforeShowDay](http://api.jqueryui.com/datepicker/#option-beforeShowDay)

# java - 带有 JavaME 的 org.json 在 toString() 中插入随机数

> ID：14627758
> 
> 赞同：3
> 
> 时间：2013-01-31T14:10:43.760
> 
> 标签：java, json, blackberry, java-me

我正在用 Java 为 BlackBerry 构建应用程序并读取/写入 JSON，我正在使用 SDK 中包含的 org.json.me 包。

当我生成一个复杂的 JSONObject 并在其上运行 toString() 方法以发送数据时，我看到一个看似随机的数字出现在字符串中，它破坏了 JSON

```
{"cb_aggregate_key":
  [
    {"$project":{"Symbol":"1","Price":"1","total":"1"}},
    {"$group":[8835.281] {"_id":"$Symbol","total":{"$sum":"$Price"}}}
  ]
} 
```

请注意，在 $group 对象的开头，我有这个 [8835.281]，它不是我的对象的一部分。我试图记录插入在“$group”键下的 JSONObject 的 toString()，它看起来是正确的

```
{"_id":"$Symbol","total":{"$sum":"$Price"}} 
```

最初我认为它可能是我的字符串中的一些奇怪字符，但找不到任何东西。

然后我注意到，即使从[http://cloudbase.io](http://cloudbase.io) API 读取 JSON 响应，我也会成功地将字符串转换为 JSONOjbect。然后，当我打印出运行 JSONObject 的 toString() 方法的输出时，我看到那里也出现了随机数：

```
{"register-device":
  {
    "status":"OK",
    "message":{
      "output":"register 2013-01-31[8832.953] T13:49:41+00:00 553648138",
      "sessionid":"510a767592a578064d0001d2"
    },
    "error":""
  }
} 
```

请注意出现在“输出”字符串中的 [8832.953]。

有没有人见过这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:32:24.523

这是 Eclipse 控制台窗口中不必要的调试输出，它将每隔几毫秒执行一次以以下格式输出时间戳：

`[12345.678]`

不幸的是，没有办法将其关闭，尽管您可以使用正则表达式匹配来解析它。

# ruby-on-rails - 将 JRuby 和 MRI 用于通用应用程序

> ID：14627759
> 
> 赞同：0
> 
> 时间：2013-01-31T14:10:44.790
> 
> 标签：ruby-on-rails, ruby, rake, jruby, bundle

我的 rails 应用程序需要同时使用 JRuby 和 MRI。

这是场景 -

我的应用程序使用处理大量线程的后台服务器。我在 MRI 上运行它时遇到性能问题。后台服务器以`rake`任务启动，需要使用Rails环境。

我正在将Passenger 用于Web 服务器。由于 JRuby 对 Passenger 的支持是最近才出现的，所以我想使用 MRI。

这是我想要的东西-

这使用 Ruby 1.9 来启动服务器：

`sudo passenger start -p 80 -e production --user=deploy`

在同一个应用程序中，它运行后台服务器 -

`jruby -S rake background_server:start_daemon RAILS_ENV=production`

问题是，第二个命令`jruby -S rake`要求重新捆绑应用程序。

有什么办法可以让这个到位吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:02:59.170

不在同一个应用程序中。如果您希望发生这种情况，您将需要在不同 rubies 下运行的单独应用程序。在 SOA 架构中，您将向后台服务器发送一条消息，以便它处理作业。

因此，在 heroku 中，您将为在 MRI 中运行的 Web 创建一个应用程序；然后您将在 JRuby 中为您的后台进程创建一个应用程序。他们将通过共享的 Redis 或共享数据库进行通信。

我建议使用 Trinidad 或 Puma 并将其全部保存在 JRuby 中（而不是继续运行乘客）；这将是一个更简单的架构。

# phpthumb - php - php Thumb 文件不可写

> ID：14627760
> 
> 赞同：0
> 
> 时间：2013-01-31T14:10:46.610
> 
> 标签：phpthumb

我正在使用 ffmpeg 提取我想使用 php thumb 创建缩略图的视频帧。创建视频帧有效，但是当尝试保存缩略图文件（使用不同的名称 - 相同的目录）时，我收到此错误：

```
PHP Fatal error:  Uncaught exception 'RuntimeException' with message 'File is not writeable, and could not correct permissions: d:/Webs/bla.jpg' in D:\Webs\phpThumb\lib\GdThumb.inc.php:656 
```

这不可能是权限问题，因为我已经可以将视频帧存储到同一个文件夹中。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T20:19:50.863

我遇到过同样的问题。我用document_root保存文件解决了这个问题：

```
$phpthumb->adaptiveResize(100, 100)->save($_SERVER["DOCUMENT_ROOT"].'/public/uploads/thumbs/filename.jpg'); 
```

在这个问题中找到了答案：[https ://stackoverflow.com/a/17684098/317326](https://stackoverflow.com/a/17684098/317326)

# c - 呃……我是瞎了吗？似乎无法找到错误 C 编程

> ID：14627767
> 
> 赞同：-10
> 
> 时间：2013-01-31T14:11:02.873
> 
> 标签：c

好吧，我正在尝试完成一些编码.....我不确定我的程序到底出了什么问题错误似乎在输出区域，因为我认为它给了我变量的内存位置，但我初始化为 0而且我不确定现在可能出了什么问题……困惑的脸。这是程序（只是错误区域，不是完整程序）。

```
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>

typedef struct Mica
{
    char FleNme [256];
}Mscl;

typedef struct Blade
{
    char BladeName [80];
}blade;

typedef struct eader
{
    char Header[256];
}header;

int main()
{
    Mscl Access;
    blade info;
    int hcount =0;
    int x=0;
    char decision;
    float BladePrice = 0;
    int spin = 0;
    int speed= 0;
    int weight= 0;
    header inf[hcount];
    FILE *Nmes;

    system("cls");

    printf("Please enter the name of the file you wish to Add:\n ");
    scanf("%s",&Access.FleNme);

    if((Nmes=fopen(Access.FleNme,"r"))==NULL)
    {
        printf("File can be created\n");
        Nmes=fopen(Access.FleNme,"w");
    }
    else
    {
        printf("File exist Already redirecting to Menu y for yes n for no: ");
        scanf("%s",&decision);

        if(decision=='y')
        {
            main();
        }
        else
        {
            exit(0);
        }
    }

    printf("Format Example: Bladename  BladePrice  Spin  Control  Weight\n");
    printf("Please Input how many headers you will be using: ");
    scanf("%d",&hcount);

    for (x=0;x<hcount;x++)
    {
        printf("Please enter The Header Name: ");
        scanf("%s",&inf[x].Header);
    }

    system("cls");
    printf("Please enter Name of Item: ");
    scanf("%s",&info.BladeName);
    printf("\nPlease enter Price of Item: ");
    scanf("%f",&BladePrice);
    printf("\nPlease enter Speed of Item: ");
    scanf("%d",&speed);
    printf("\nPlease enter Spin of Item: ");
    scanf("%d",&spin);
    printf("\nPlease enter weight of Item: ");
    scanf("%d",&weight);

    for(x=0;x<hcount;x++)
    {
        printf("%s\t",inf[x].Header);
    }

    printf("\n%s\t%.2f\t%d\t%d\t%d",&info.BladeName,&BladePrice,&speed,&spin,&weight);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:15:59.863

一个错误是

```
char decision;
...
scanf("%s",&decision); 
```

您要求`scanf`将 char 数组写入单个 char。这将产生未定义的结果，但很可能会导致堆栈变量`decision`被覆盖。

要解决此问题，请使用`%c`您的格式说明符

```
scanf("%c",&decision); 
```

或声明`decision`为 char 数组

```
char decision[32];
scanf("%.31s",decision); 
```

如果您仍然看到更多问题，请更具体地说明它们在您的程序中发生的位置。如果您花时间格式化代码并修复其缩进，这也会有很大帮助。

# java - 如何忽略来自断开连接的频道的消息

> ID：14627769
> 
> 赞同：1
> 
> 时间：2013-01-31T14:11:07.953
> 
> 标签：java, sockets, netty

我正在为多人游戏实现简单的网络服务器。我只是想弄清楚Netty。

我通过 telnet 测试服务器。我所做的是将消息广播到所有频道。它工作顺利。我还可以在关闭事件时从地图中删除频道，这很好。

但问题是，如果其中一个客户端意外断开，在关闭回调之前，调用发送方断开通道的 messageReceived 回调。

如何正确忽略来自断开连接的客户端的消息？我使用`StringBuffer`in`messagedReceived`但对于这种情况`StringBuffer.toString`也不是正确的字符串。最后断开的通道向其他通道和自身广播无意义的消息，当接收通道本身抛出异常时`Connection reset by peer` ，这是正常的，因为通道本身目前不可用。

这是代码；

```
 @Override
     public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {

            System.out.println();
            System.out.println("------------------");

            Channel current = e.getChannel();
            System.out.println("SenderChannel:"+current.getId());

            if(!current.isOpen())
                System.out.println("Not Open");

            ChannelBuffer buf = (ChannelBuffer) e.getMessage();

            StringBuffer sbs = new StringBuffer();

            while(buf.readable()) {
                sbs.append((char) buf.readByte());
            }

            String s = sbs.toString();

            System.out.println(s);

            String you = "You:" + s;
            String other = "Other:" + s;

            byte [] uResponse = you.getBytes();
            byte [] otherResponse = other.getBytes();

            Iterator iterator = channelList.entrySet().iterator();
            while(iterator.hasNext()){
                  Map.Entry pairs = (Map.Entry)iterator.next();

                  Integer key = (Integer)pairs.getKey();
                  Channel c = (Channel)pairs.getValue();

                  System.out.println("ReceiverChannel:"+c.getId());

                  if(key != current.getId())
                      c.write(ChannelBuffers.wrappedBuffer(otherResponse));
                  else
                      c.write(ChannelBuffers.wrappedBuffer(uResponse));

            }

     }

    @Override
    public void channelDisconnected(ChannelHandlerContext ctx,
            ChannelStateEvent e){

        Channel ch = e.getChannel();

            channelList.remove(ch.getId());
            System.out.println();
            System.out.println("*****************");
            System.out.println("DisconnectEvent:"+ch.getId());
            System.out.println("*****************");
            System.out.println();
            ch.close();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:06:36.730

你无法以你想要的方式解决问题。如果存在网络问题，那么从技术上讲，发件人可以随时断开连接，例如

*   一旦线程进入 messageReceived
*   当您遍历 channelList
*   在您遍历 channelList 但回显给发送者之后
*   在您广播消息后

当 messageReceived 正在处理时，Netty 无法引发断开连接的事件，因为您正在引发事件的线程中运行（除非您的管道中有一个无序执行处理程序）。正确的解决方案实际上取决于您的应用程序。如果广播导致所有其他接收器响应，那么让服务器抑制任何发往不再连接的客户端的消息可能会更好/更容易。

此外，如果您真的要使用字符串，请查看 StringEncoder / StringDecoder。您的代码不能保证消息事件缓冲区包含完整的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T22:08:51.777

只需在每次发送时尝试/捕获即可。如果其中一个失败，则关闭相应的通道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T07:59:17.267

如果这是用于多人游戏服务器，最好使用现有的 Netty 游戏服务器解决方案，如[java game server](https://github.com/menacher/java-game-server)。断开连接成为发送到[会话](https://github.com/menacher/java-game-server/blob/master/jetserver/src/main/java/org/menacheri/jetserver/app/impl/DefaultSession.java)的事件，并且由于它是事件驱动的，因此您可以编写自己的[处理程序](https://github.com/menacher/java-game-server/blob/master/jetserver/src/main/java/org/menacheri/jetserver/event/EventHandler.java)来决定是否在同一会话上接收更多事件。由于事件按 FIFO 顺序排队，因此如果发生断开连接，则无需继续进行后续广播。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:51:26.077

我不是 Java 开发人员。但从套接字的角度来看，这些数据在缓冲区中或在用户断开连接之前发送。因此，当您处于接收阶段时，用户仍处于连接状态，并且恰好在接收用户完成时已断开连接。所以我认为防止这种事情的最好方法是在每次接收数据后检查用户是否仍然连接。

在 C# 中，我个人使用此代码来检查用户是否仍处于连接状态：

```
if (client.Poll(0, SelectMode.SelectRead))
{
    byte[] checkConn = new byte[1];
    if (client.Receive(checkConn, SocketFlags.Peek) == 0)
        return false;
}
return true; 
```

我不确定Java和Netty（如果你的连接是TCP），但这是我使用的，这可以很容易地将它转换为Java。

# excel - 无意中创建了新工作簿

> ID：14627770
> 
> 赞同：3
> 
> 时间：2013-01-31T14:11:14.197
> 
> 标签：excel, vba

我正在尝试从工作簿（“InventoryControlSystemV1.1”）复制工作表（“ReceivingRecords”）并将其粘贴到新工作簿（“RecordBook”）中。我创建了一个名为“Temp.xls”的临时工作簿，它允许我使用 SaveCopyAs 方法来创建我的新工作簿“RecordBook”。

当我运行该过程时，“RecordBook”按预期创建，但单元格 A1 中只有一个条目（文本“InventoryControlSystemV1.1.xls”）。

然后将我要复制的工作表粘贴到一个新的、未命名的工作簿中。我无法弄清楚这个新工作簿的创建位置或原因。

这是此过程的代码：

```
Sub WriteReceivingToRecords()

    Dim UsedRng As Range
    Dim LastCol As Long
    Dim BeginDate, EndDate
    Dim NameString
    Dim FormatBeginDate, FormatEndDate
    Dim BackupQuest As Integer
    Dim BackupMsg As String

    'Confirmation dialog box to avoid mistakes
    BackupMsg = "This will create a new workbook for the period" & vbNewLine
    BackupMsg = BackupMsg & " since the last backup was made, and will clear" & vbNewLine
    BackupMsg = BackupMsg & " the receiving records in this workbook." & vbNewLine & vbNewLine
    BackupMsg = BackupMsg & "Are you sure you want to back up the receiving records?"
    BackupQuest = MsgBox(BackupMsg, vbYesNo, "Back-up Records")

    If BackupQuest = vbNo Then
        Exit Sub
    Else

    '   Find start and end dates of receiving - To use for worksheet title
        Workbooks("InventoryControlSystemV1.1.xls").Activate
        Worksheets("ReceivingRecords").Activate
        Set UsedRng = ActiveSheet.UsedRange
        LastCol = UsedRng(UsedRng.Cells.Count).Column
        Do While Cells(2, LastCol) = ""
                LastCol = LastCol - 1
        Loop
        EndDate = Cells(2, LastCol).Text
        BeginDate = Cells(2, 2).Text

        FormatBeginDate = Format(BeginDate, "d mmmm yy")
        FormatEndDate = Format(EndDate, "d mmmm yy")
        NameString = "M-Props Receiving Records " & FormatBeginDate & " To " _
            & FormatEndDate & ".xls"

        Workbooks("InventoryControlSystemV1.1.xls").Sheets("ReceivingRecords").Copy

        Workbooks.Open Filename:="Temp.xls"
        Workbooks("Temp.xls").Activate
        Workbooks("Temp.xls").Worksheets("Sheet1").Paste _
            Destination:=Workbooks("Temp.xls").Worksheets("Sheet1").Range("A1")

        Workbooks("Temp.xls").SaveCopyAs NameString & ".xls"
        Workbooks("Temp.xls").Close False

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T15:27:44.130

代替

```
Workbooks("InventoryControlSystemV1.1.xls").Sheets("ReceivingRecords").Copy 
```

和

```
Workbooks("InventoryControlSystemV1.1.xls").Sheets("ReceivingRecords").Cells.Copy 
```

那应该这样做。

# c# - 在客户端机器上注册某些事件并通知另一个 C#

> ID：14627772
> 
> 赞同：0
> 
> 时间：2013-01-31T14:11:18.190
> 
> 标签：c#, wpf

请不要对这个问题的标题感到困惑，我不知道我想要完成的确切技术术语是什么:)。我的要求可能有点奇怪，我已经实现了它，但我需要一些最佳实践/方法来正确地做到这一点。

这是我的情况。

我正在开发一个客户端系统监控 Windows 应用程序（客户端中的跟踪软件和我系统中的监控软件）。我有许多系统连接到 LAN，并且我有一个监控系统。如果客户端系统上发生任何特定操作，我会收到通知。我不能在我的网络中使用任何数据库，所以我正在做的是，由于我的系统也连接到 LAN，我在我的系统中共享了一个文件夹。每当客户端系统发生某些操作时，跟踪软件都会在我的系统中的共享文件夹中创建一个包含事件的文件。监控软件使用一个计时器，它会以一定的时间间隔（15 分钟）连续检查共享文件夹中的任何新文件。如果找到任何文件，监控系统将知道发生了一些事件并显示该事件。

但是这个问题我只会在 15 分钟后得到通知。另外，我认为这不是最好的方法。可能有一些好的和最好的方法。有没有办法从客户端机器直接向我的监控应用程序注册事件？

请注意：我不能为此目的使用任何数据库。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:14:17.643

看看[SignalR](http://signalr.net/) - 它提供实时通知，可以完全按照您的描述使用。

您不需要数据库（但请记住，如果您的服务器没有运行，您将错过事件 - 这可能会也可能不会接受）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:15:52.603

看看[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)。这将监视目录并引发事件。IME，它运行良好，但可能会因大量流量而失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:19:04.230

[这听起来像是 MSMQ（MS 消息队列）和触发器](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms703197%28v=vs.85%29.aspx)的完美候选者。

创建一个所有跟踪软件都可以写入的 MSMQ。然后有一个 MSMQ 触发器（可能通过 WCF/命名管道连接到前端）在监控软件中显示警报

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:24:25.730

您可能想要使用[WCF 框架](http://msdn.microsoft.com/es-es/library/ms731082.aspx)。

这里有两个链接可以帮助你：

[wcf 教程事件和回调](http://www.switchonthecode.com/tutorials/wcf-tutorial-events-and-callbacks)

[wcf-tutorial-basic-interprocess-communication](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication)

# php - 根据来自文本字段的输入打开 PDF 文档

> ID：14627774
> 
> 赞同：0
> 
> 时间：2013-01-31T14:11:23.900
> 
> 标签：php, html

我想要一个脚本（HTML 或 PHP），它将根据来自文本字段的输入从我们的网络打开一个文档。

因此，当我填写文本时，需要打开该位置`123456789`的文档。`123456789.PDF``\\server\documents\`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:23:31.593

您想在用户浏览器中打开文档吗？

你可以用一些Javascript来做到这一点：

```
<script type="text/javascript">
 function go()
 {
   document.href = '\\server\documents\' + document.getElementById('toto').value + '.PDF';
 }
</script>

<input type="text" id="toto" />
<button onclick="go()">Open me</button> 
```

如果您想用 PHP 打开文件，这也是一样的，只需连接字符串并使用`file_get_contents`.

# javascript - 查找具有 z-index 的元素

> ID：14627777
> 
> 赞同：0
> 
> 时间：2013-01-31T14:11:28.387
> 
> 标签：javascript, jquery

我正在处理一个问题，在该问题中，我循环浏览放置在单个页面上的相同控件并为它们分配 z-index。

我想获取当前具有直接在 html 中或使用 css 中定义的 z 索引的所有元素的集合，然后从上到下遍历它们并使用 JQuery 分配它们的 z 索引。

这个选择器会是什么样子，它的性能如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:15:16.390

没有特定的选择器来实现这一点，因此您需要`filter()`像这样使用：

```
var zIndex = 5;
var $zElements = $('.selector').filter(function() {
    return $(this).css('z-index') == zIndex;
});

$zElements.each(function() {
    // loop through the elements with a matching z-index
}); 
```

# core-data - 带有 fetchOffset 的 NSFetchRequest 不返回预期结果

> ID：14627778
> 
> 赞同：1
> 
> 时间：2013-01-31T14:11:29.190
> 
> 标签：core-data, nsfetchrequest

在尝试从 Core Data 获取“分页”实体时，我遇到了一些奇怪的事情。

这是我用于获取的代码：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"User" 
                                          inManagedObjectContext:self.managedObjectContext];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"userIdentifier beginswith[cd] %@ AND selected == 1",userIdentifier];
fetchRequest.fetchOffset = offset;
fetchRequest.fetchLimit = limit;
[fetchRequest setEntity:entity];
NSLog(@"offset %d limit %d",fetchRequest.fetchOffset,fetchRequest.fetchLimit);

NSError *requestError = nil;
NSArray *items = [self.managedObjectContext executeFetchRequest:fetchRequest
                                                          error:&requestError];
NSLog(@"fetched items count = %d",items.count); 
```

这是日志：

```
2013-01-31 16:01:28.127 offset 0 limit 100
2013-01-31 16:01:28.128 fetched items count = 6
2013-01-31 16:01:40.533 offset 1 limit 100
2013-01-31 16:01:40.535 fetched items count = 5
2013-01-31 16:01:53.029 offset 2 limit 100
2013-01-31 16:01:53.032 fetched items count = 4
2013-01-31 16:01:55.468 offset 3 limit 100
2013-01-31 16:01:55.470 fetched items count = 3
2013-01-31 16:02:00.776 offset 4 limit 100
2013-01-31 16:02:00.779 fetched items count = 2
2013-01-31 16:02:02.325 offset 5 limit 100
2013-01-31 16:02:02.328 fetched items count = 1
2013-01-31 16:02:03.837 offset 6 limit 100
2013-01-31 16:02:03.839 fetched items count = 0
2013-01-31 16:02:07.714 offset 6 limit 100
2013-01-31 16:02:07.717 fetched items count = 0 
```

对于这个测试，我有 6 个“用户”条目。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:38:54.470

您的日志表明一切都按预期工作。

恭喜！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:39:15.113

发现问题：

```
fetchRequest.fetchOffset = offset*limit; 
```

# javascript - NodeList对象的长度属性只读，如何验证？

> ID：14627786
> 
> 赞同：3
> 
> 时间：2013-01-31T14:12:11.360
> 
> 标签：javascript

length 属性的属性描述符对象显示可配置：true、writable:true 和 enymerable:true 但它的行为类似于只读。

我知道只读功能只能由 PDO（属性描述符对象）实现。

有人可以提供任何线索吗？这是如何只读的？

```
var nodeList = document.getElementsByName('demo');

nodeList.length; //3
nodeList.length = 6;
nodeList.length; //3

Object.getOwnPropertyDescriptor(nodeList,'length')
Object
configurable: true
enumerable: true
value: 3
writable: true
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:20:20.303

`length`是只读的，根据[http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177)

确实，这种显示具有误导性，但那是因为它是一个宿主对象，所以它不必像我们习惯的那样表现得像一个原生对象。不过，这值得一个错误报告，因为显示应该尽可能地匹配行为，尤其是在这样的明显情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T17:26:30.673

[DOM 规范](http://www.w3.org/TR/dom/#nodelist)定义`length`为只读：

```
interface NodeList {
  getter Node? item(unsigned long index);
  readonly attribute unsigned long length;
}; 
```

似乎不`getOwnPropertyDescriptor`应该说它是可写的。但是，`NodeList`实例是[宿主对象](http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.8)：

> 宿主环境提供的对象，用于完成 ECMAScript 的执行环境

因此，他们可以有特殊的行为。实际上，这是由[ECMAScript](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.2)强制执行的：

> 如果一个属性被描述为一个数据属性并且它可能会随着时间的推移返回不同的值，那么即使没有任何改变值的机制通过其他内部方法。

由于`getElementsByName`返回一个实时集合，`length`可能会改变，所以 [[Writable]] 或 [Configurable]] 必须是`true`. 您的实现选择两者。

# mod-rewrite - 如何避免使用 lighttpd 在 css 文件中重定向

> ID：14627788
> 
> 赞同：0
> 
> 时间：2013-01-31T14:12:18.930
> 
> 标签：mod-rewrite, lighttpd

我的服务器中有这个规则：

```
url.rewrite-once = (
    ".*\.(js|ico|gif|jpg|png|css|)$" => "$0",
    "^/.*(\?.*)" => "/index.php$1",
    "" => "/index.php"
) 
```

它可以正常工作......除了一些细节。如果我将获取信息添加到 js 或 css 文件，那么它将请求重定向到 index.php。如果我有这个：

```
/css/main.css 
```

它加载css，但如果我添加：

```
/css/main.css?version=1234 
```

然后它尝试加载`/index.php/main.css/?version=1234`

我的规则有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:29:15.017

规则`.*\.(js|ico|gif|jpg|png|css|)$`，特别是`$`末尾的规则，表示 url**必须**以括号内的扩展名之一结尾。

如果你`$`在最后删除它，它应该可以工作。

或者，您可以**使用**版本参数添加特定于 css 和/或 js 的新规则：

```
.*\.(js|ico|gif|jpg|png|css|)\?version\=[0-9]+$ 
```

# android - 动态壁纸永远停留在“正在加载动态壁纸...”

> ID：14627789
> 
> 赞同：1
> 
> 时间：2013-01-31T14:12:23.267
> 
> 标签：android, debugging, live-wallpaper

我正在编写一个简单的壁纸服务，类似于这个（[Android 应用程序使用 Timer 定期更改壁纸](https://stackoverflow.com/questions/9732812/android-app-to-change-wallpaper-at-regular-intervals-using-timer)）。

尽管我尝试绘制的图像很小（2kb png），但壁纸永远停留在“正在加载动态壁纸......”。

我的清单文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example.TestWallpaper">
    <uses-sdk android:minSdkVersion="15"/>

        <uses-feature android:name="android.software.live_wallpaper" />

        <application android:icon="@drawable/icon"
                     android:label="@string/app_name"
                     android:permission="android.permission.BIND_WALLPAPER">

            <service android:name=".Wallpaper"
                     android:label="@string/app_name"
                     android:icon="@drawable/icon">

                <intent-filter>
                    <action android:name="android.service.wallpaper.WallpaperService" />
                </intent-filter>
                <meta-data android:name="android.service.wallpaper"
                           android:resource="@xml/livewallpaper" />

            </service>

        </application>

</manifest> 
```

还有我的主类文件：

```
public class Wallpaper extends Service {

    Timer mytimer;
    int initialStart= 0;
    int interval=60000;
    Drawable drawable;
    WallpaperManager wpm;
    int prev=1;

    @Override
    public void onCreate() {
        super.onCreate();
        Log.i("TestWallPaper=>", "print");
        mytimer=new Timer();
        wpm= WallpaperManager.getInstance(Wallpaper.this);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        mytimer.schedule(new TimerTask() {

            @Override
            public void run() {
                Log.i("TestWallPaper=>", "inside onStartCommand");
                if(prev==1){
                    Log.i("TestWallPaper=>", "prev==1");
                    drawable = getResources().getDrawable(R.drawable.blue_pin);
                    prev=2;
                }
                else if(prev==2){
                    Log.i("TestWallPaper=>", "prev==2");
                    drawable = getResources().getDrawable(R.drawable.red_pin);
                    prev=3;
                }
                else{
                    Log.i("TestWallPaper=>", "prev==3");
                    drawable = getResources().getDrawable(R.drawable.green_pin);
                    prev=1;
                }

                Bitmap wallpaper=((BitmapDrawable)drawable).getBitmap();

                try {
                    wpm.setBitmap(wallpaper);

                } catch (IOException e) {
                    Log.e("TestWallPaper=>", "inside onStartCommand");
                    e.printStackTrace();
                }

            }
        }, initialStart,interval);

        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public IBinder onBind(Intent arg0) {
        Log.i("TestWallPaper=>", "inside onBind");
        return null;
    }
} 
```

# prolog - 使用函数的返回

> ID：14627793
> 
> 赞同：0
> 
> 时间：2013-01-31T14:12:36.237
> 
> 标签：prolog

我是 Prolog 的新手，我在理解其中一些方面遇到了很大的问题。例如，我有这个“功能”：

```
smstofre([], []).
smstofre([T|R], [X|Y] :- frword(T,X), smstofre(R,Y). 
```

使用以下“数据库”：

```
frword(bjr,bonjour). 
```

这用于将写得不好的法语句子翻译成正确的句子。我这样使用它：

```
?- smstofre([bjr],E).
E = [bonjour]. 
```

这很酷，但我想创建一个“函数”，它将接受一个简单的字符串，拆分他的单词并发回与之前的“函数”相同的结果。例如：

```
?- translate('bjr cb ?', E). 
```

应该返回：

```
E = [bonjour,combien,?]. 
```

我尝试使用 swi-prolog 的函数 atomic_list_concat 来拆分字符串并创建一个可以执行其他所有操作的函数，所以我这样做了：

```
reduireFosse(E, F) :- atomic_list_concat(F,' ', E), smstofre(F, E). 
```

它只是返回假。

如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:47:07.540

我想你的`reduireFosse/2`程序应该是：

```
reduireFosse(E, G) :- atomic_list_concat(F,' ', E), smstofre(F, G). 
```

请注意，reduireFosse 头部的第二个参数使用了一个新的变量`G`，该变量在 smstofre 的第二个参数中使用。

的第二个子句`smstofre/2`应该是：

```
smstofre([T|R], [X|Y]) :-
  (frword(T,W) -> X = W  ; X = T), smstofre(R,Y). 
```

在这里，我们`->`用来避免在调用成功时留下选择点`frword/2`，否则就按原样返回单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:39:27.343

您可以将功能设计与 maplist 一起使用：

```
frword(bjr, bonjour) :- !.
frword(cb, combien) :- !.
% for words not found, avoid if then else
frword(X, X).

smstofre(SMS, FRE) :-
    maplist(frword, SMS, FRE).

translate(SMS, FRE) :-
    atomic_list_concat(Tmp_In, ' ', SMS),
    smstofre(Tmp_In, Tmp_Out),
    % build a "french" sentence
    atomic_list_concat( Tmp_Out, ' ', FRE). 
```

# bash - 将从批处理文件调用的 bash 输出重定向到控制台

> ID：14627794
> 
> 赞同：3
> 
> 时间：2013-01-31T14:12:39.703
> 
> 标签：bash, batch-file, msys

我有一个调用 bash 脚本 (makelibs.sh) 的批处理文件 (build.bat)。bash 脚本包含几个从源代码构建 20 个库的命令。

如果我从 MSYS 运行 makelibs.sh，我会得到连续的输出。如果我从批处理文件中调用它，那么我只会在每个命令的末尾看到完整的输出。

这使得很难评估流程的当前状态。

是否可以重定向 makelibs.sh 的输出以获得关于执行的持续反馈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:29:03.320

> 我有一个调用 bash 脚本 (makelibs.sh) 的批处理文件 (build.bat)

我强烈建议不要这样做。当您可以简单地打开 Bash 并放置时，您正在使用脚本调用脚本

```
makelibs.sh 
```

但是，如果您坚持这样做，那么也许[`start`](http://ss64.com/nt/start.html)会起作用

```
start bash.exe makelibs.sh 
```

[**参考**](http://github.com/svnpenn/dotfiles/blob/master/.cygwin)

# php - php在foreach中追加，追加到变量有什么用。

> ID：14627796
> 
> 赞同：-3
> 
> 时间：2013-01-31T14:12:51.107
> 
> 标签：php

如何将代码附加到变量。

```
<?php
echo "<ul>\n";
    foreach($related as $r) {

        if ($r->Count > 0) {
            echo "<li>" . "<a>". $r->post_title ."</a>". "\n";
      f_tree_av($r->post_id, $level + 1);
      echo "</li>";
        } elseif ($r->Count==0) {
            echo "<li>" . "<a>". $r->post_title ."</a>". "\n";
        } else;
    }
    echo "</ul>\n";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:17:07.650

```
<?php
$content .= "<ul>\n";
    foreach($related as $r) {

        if ($r->Count > 0) {
            $content .= "<li>" . "<a>". $r->post_title ."</a>". "\n";
      f_tree_av($r->post_id, $level + 1);
      echo "</li>";
        } elseif ($r->Count==0) {
            $content .= "<li>" . "<a>". $r->post_title ."</a>". "\n";
        } else;
    }
   $content .= "</ul>\n";
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T14:17:10.160

只需使用`.=`运算符，即`$a = $a . "...";`( `$a .= "..."`)

```
<?php
$content = "<ul>\n";
    foreach($related as $r) {

        if ($r->Count > 0) {
            $content .= "<li>" . "<a>". $r->post_title ."</a>". "\n";
      f_tree_av($r->post_id, $level + 1);
                  $content .= "</li>";
        } elseif ($r->Count==0) {
                        $content .= "<li>" . "<a>". $r->post_title ."</a>". "\n";
        } else;
    }
    echo $content . "</ul>\n";
?> 
```

[文档](http://php.net/manual/en/language.operators.string.php)

# layout - 如何使用 ColumnText 将标题和文本保持在同一列中？

> ID：14627799
> 
> 赞同：1
> 
> 时间：2013-01-31T14:13:04.273
> 
> 标签：layout, pdf-generation, itext

我正在使用 iText 创建 PDF 文件。在测试时，出现了一种情况，标题打印在一列的底部，而附加文本在下一列。

简单的解决方案`paragraph.setKeepTogether( true );`会产生大量空白（请参阅下面的附加信息）。这是一张图片，左侧显示了当前情况，右侧显示了我想要获得的内容：

[当前和想要的情况](http://s7.directupload.net/images/130131/xko6e25e.png)（声誉......）

我最大的问题之一是，`columnText.getYLine()`即使文本流到下一个，也会返回“原点”列中的最低位置。我查看了 iText 站点上的示例以及 stackoverflow 上“itext column”的所有结果以及一些博客，但没有找到任何解决我的问题的方法，除了[在新列中打印每篇文章](https://stackoverflow.com/questions/12185423/how-to-skip-text-insertion-point-to-the-next-column-using-itext)。用几句话简明地描述问题将帮助我搜索自己，因为英语不是我的第一语言。

### 附加信息

这是远程医疗项目中报告生成的一部分。页面模板由 Web 前端填充。有几个后处理步骤，例如附加心电图输出的图像。这些需要高像素密度才能读取，这就是我使用 iText 的原因（afaik pdfbox 在不考虑密度的情况下进行缩放）。前段时间，医生注意到他们必须插入比一页空间更多的文本。所以他们希望在附录中溢出。我可以使用另一个库。重要性在于纸上的高可读性和像 (l)gpl/apache/ 这样的许可证...空白会导致更多页面，因此减少了概述并浪费了纸张。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:56:23.467

该`setKeepTogether()`方法不应该与`ColumnText`. 正如我的书中所述（我的头像中显示的那个），`ColumnText`可以在[模拟模式下](http://itextpdf.com/themes/keyword.php?id=140)使用该类来微调布局。

这个想法是您在试错过程中定义内容的位置。首先，您添加内容并调用`go(true)`；这将*消耗*您列中的内容，但不会将任何内容添加到您的文档中。您可以使用它来发现已经写入了多少行 ( `getLinesWritten()`)，检查是否可以呈现所有内容 ( `hasMoreText()`) 等等。

假设您发现所有文本都可以使用可用空间写入，您再次将内容添加到列中，将 Y 位置更改为其原始值，并实际添加列：`go();`

如果列中还有内容，您应该创建一个新列，重新添加内容，然后再做出决定。更改列的位置 和`go();`如果还有内容，但内容可以分成两部分，更改 Y 位置和`go()`; 然后更改列的位置并`go()`再次调用以将其余内容呈现在不同的列中。

您将在[第 3 章](http://itextpdf.com/book/chapter.php?id=3)`ColumnText`中找到不同的示例。

# java - 播放框架会话和 cookie 是如何工作的？

> ID：14627802
> 
> 赞同：16
> 
> 时间：2013-01-31T14:13:20.680
> 
> 标签：java, scala, authentication, cookies, playframework-2.0

play 如何验证 cookie？

*   我注意到，在我重新启动服务器后，即使我没有在数据库中保存任何会话数据，我仍然可以登录。

*   我还注意到我可以将服务器上的日期设置为大于 cookie 的到期日期，但我仍然处于登录状态。

*   我注销（将 cookie 保存到文本文件）并且浏览器丢失了 cookie。然后我从文本文件中重新创建了 cookie 并再次登录。

cookie 看起来像这样：

PLAY_SESSION=e6443c88da7xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-userid%3A1

```
// My logout code
def logout() = Action {
  Ok("").withNewSession
} 
```

* * *

[来自文档](https://github.com/playframework/Play20/wiki/ScalaSessionFlash)
**Discarding the whole session**
有丢弃整个会话的特殊操作：

```
Ok("Bye").withNewSession 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T15:02:10.223

您没有指定如何对用户进行身份验证，所以我只是猜测，您正在使用简单的示例，它很简单。

它使用用户的 id 来识别用户，并检查签名的会话 cookie 是否未被操纵，因此如果您使用正确的签名重新创建 cookie，它仍然有效。

您应该在服务器端为会话密钥创建一些区域，即。在数据库或内存缓存中（这将比数据库快）。它的密钥应该为每个成功的登录操作随机生成（并且最好是相当长的），并且还应该包含用于识别用户、到期日期等的数据。接下来你应该把这个随机`sess_key`放到 Play 的会话中，而不是登录用户的电子邮件地址或 id他在数据库中的行，并在注销和/或到期日期之后将其删除。在这种情况下，即使您在注销后丢失 cookie，也无法使用 non-esixting 正确登录`sess_key`。

AFAIR 标准内存缓存将在应用程序每次重新启动时被清除，以确保`sess_keys`从 DB 中删除所有内容，您可以使用[全局对象](http://www.playframework.org/documentation/2.0/ScalaGlobal)`onStart(...)`并在方法中截断表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T14:30:32.423

[我找到了更仔细阅读文档](http://www.playframework.com/documentation/2.2.x/ScalaSessionFlash)并结合不同部分的答案。

> 会话没有技术超时。它在用户关闭 Web 浏览器时过期。如果您需要特定应用程序的功能超时，只需将时间戳存储到用户会话中并根据您的应用程序需要使用它（例如，最长会话持续时间、最长不活动持续时间等）。

* * *

> 重要的是要了解 Session 和 Flash 数据不是由服务器存储的，而是使用 cookie 机制添加到每个后续 HTTP 请求中的。这意味着数据大小非常有限（最多 4 KB）并且您只能存储字符串值。

* * *

所以这就是我担心如果cookie丢失，任何人都可以在未来登录服务器。

我必须做的是添加一个自制的时间戳授权（在 cookie 中保存时间戳并验证服务器端）

# android - ArrayAdapter.insert() 有什么作用？

> ID：14627806
> 
> 赞同：0
> 
> 时间：2013-01-31T14:13:31.967
> 
> 标签：android, android-arrayadapter

我在任何地方都没有看到明确的答案：ArrayAdapter.insert() 是否在指定位置插入**新**项目..或者..它是否**替换**了指定位置的信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:14:40.703

它插入一个新项目。它不会更改或删除以前存在的任何项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:15:19.590

`insert(T object, int index)` 在数组中的指定索引处插入指定对象。并且随后不影响当前项目`index`

文档[在这里](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:15:30.027

它在指定索引处的现有项目之间插入新项目。请参阅[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/widget/ArrayAdapter.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/widget/ArrayAdapter.java)

它进一步调用 ArrayList<>.add() `Inserts the specified element at the specified position in this list. Shifts the element currently at that position (if any) and any subsequent elements to the right (adds one to their indices).`

# python - 如何使用 Unix Socket 在 ruby 和 Python 之间进行通信

> ID：14627809
> 
> 赞同：2
> 
> 时间：2013-01-31T14:13:47.123
> 
> 标签：python, ruby, sockets, unix

我正在尝试在我的 ruby​​ 进程和 Python 进程之间进行一些通信；我想使用 UNIX 套接字。

目标：ruby 进程“fork and exec”Python 进程。在 ruby​​ 进程中，创建一个 UNIX 套接字对，并将其传递给 Python。

红宝石代码（**p.rb**）：

```
require 'socket'

r_socket, p_socket = Socket.pair(:UNIX, :DGRAM, 0)

# I was hoping this file descriptor would be available in the child process
pid = Process.spawn('python', 'p.py', p_socket.fileno.to_s)

Process.waitpid(pid) 
```

Python 代码（**p.py**）：

```
import sys
import os
import socket

# get the file descriptor from command line
p_fd = int(sys.argv[1])

socket.fromfd(p_fd, socket.AF_UNIX, socket.SOCK_DGRAM)

# f_socket = os.fdopen(p_fd)
# os.write(p_fd, 'h') 
```

命令行：

```
ruby p.rb 
```

结果：

```
OSError: [Errno 9] Bad file descriptor 
```

我希望 ruby​​ 进程将文件描述符传递给 python 进程，以便这两个可以使用这些套接字发送数据。

**所以，我的问题：**

1) 是否可以像上面那样在 ruby​​ 和 python 进程之间传递打开的文件描述符？

2）如果我们可以在两个进程之间传递文件描述符，那么我的代码有什么问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T15:40:49.133

你很接近，但 Ruby`spawn`默认关闭任何大于 2 的文件描述符，除非你`:close_others => false`作为参数传递。请参阅文档：

[http://apidock.com/ruby/Kernel/spawn](http://apidock.com/ruby/Kernel/spawn)

工作示例：

```
require 'socket'

r_socket, p_socket = Socket.pair(:UNIX, :DGRAM, 0)

pid = Process.spawn('python', 'p.py', p_socket.fileno.to_s,
                    { :close_others => false })

# Close the python end (we're not using it on the Ruby side)
p_socket.close

# Wait for some data
puts r_socket.gets

# Wait for finish
Process.waitpid(pid) 
```

Python：

```
import sys
import socket

p_fd     = int(sys.argv[1])
p_socket = socket.fromfd(p_fd, socket.AF_UNIX, socket.SOCK_DGRAM)

p_socket.send("Hello world\n") 
```

测试：

```
> ruby p.rb
Hello world 
```

# mysql - Microsoft Excel 中的动态查询粘贴

> ID：14627813
> 
> 赞同：0
> 
> 时间：2013-01-31T14:13:58.840
> 
> 标签：mysql, excel

我有点疯狂，我有一个 excel 文件，比如说 4 列。首先，我有一个简单的插入查询：

```
INSERT INTO my_table(val_1,val_2,val_3) VALUES('val_1','val_2','val_3') 
```

其他三列是“val_1”、“val_2”和“val_3”的值。该文件看起来有点像这样：

```
 COLUMN 1                                          | val_1 | val_2 | val_3
INSERT INTO my_table(val_1,val_2,val_3) VALUES ('','','') |   aa  |  bb   |  cc
INSERT INTO my_table(val_1,val_2,val_3) VALUES ('','','') |   dd  |  ee   |  ff 
```

希望你了解情况！然后我的问题是：是否可以在 clumn 1 的查询中插入一些特殊字符，这将允许我将其复制并粘贴到下面的行中并使其捕获同一行中的值？即查询一个值是'aa'，'bb'和'cc'，查询2值将是'dd'，'ee'，'ff'，等等......

对不起我的英语和我糟糕的 excel 专业知识！谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:38:38.947

你的描述不一致。让我假设第一个版本。您想输入如下公式：

```
=substitute(substitute(substitute(A1, "'val_1'", "'"&B1&"'"), "'val_2'", "'"&c1&"'"), "'val_3'", "'"&"d1&"'") 
```

这假定值在 AD 列中并从第一行开始。

# excel - Excell 2007 宏验证输入单元格的数据，如果不正确则显示 msgbox

> ID：14627816
> 
> 赞同：1
> 
> 时间：2013-01-31T14:14:07.767
> 
> 标签：excel, if-statement, excel-2007, msgbox, vba

请有人帮助以下代码。它在以下行给了我一个错误：

```
Set range = "C5:L14" 
```

这是完整的代码：

```
Private Sub Worksheet_Change(ByVal Target As Excel.range)
Dim ws As Worksheet
Dim range As Worksheet

Set ws = Application.ActiveSheet
Set range = "C5:L14"

If Not Application.Intersect(Target, range("C5:L14")) Is Nothing Then

    If range("C5:L14").Value = "" Then Exit Sub

    If range("C5:L14").Date = "< today()" Then Exit Sub

    If range("C5:L14").Date = "> today()" Then MsgBox ("Future dates not allowed!")

    Else
        MsgBox ("Please enter date as follows yyyy-mm")
    End If

End Sub 
```

单元格上的日期格式为“2013 Jan”。不允许未来的日期，用户只能输入日期为“2013-01”。格式应正确更改。如果他们输入“2013 Jan”，则条件格式不会选择它。已经尝试过数据验证，但它只限制我一个。

我需要宏来确保用户不会在指定的单元格中输入错误的日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T15:50:18.060

您正在尝试的问题也可以在没有 VBA 的情况下解决。但是，我向您展示了这两种方法。任你选

**非 VBA**

选择要应用数据验证的单元格，然后按照以下步骤操作。

第1步

![在此处输入图像描述](../Images/2adccaad23efb554141d32576437ca37.png)

第2步

![在此处输入图像描述](../Images/ee4d4e67979e1e42b03d744c200c4cba.png)

第 3 步

![在此处输入图像描述](../Images/3741b35321eeb86e38c2b7761146a052.png)

第4步

![在此处输入图像描述](../Images/8117f4540d059ce706bc68a46c76a336.png)

在行动

![在此处输入图像描述](../Images/2996d55a4566162deb9f9a731c900cec.png)

**VBA**

我已经对代码进行了注释，因此您在理解它时不会有任何问题

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Excel.Range)
    Dim rng As Range
    Dim aCell As Range

    '~~> The below two lines are required. Read up more on
    '~~> http://stackoverflow.com/questions/13860894/ms-excel-crashes-when-vba-code-runs/13861640#13861640
    On Error GoTo Whoa
    Application.EnableEvents = False

    '~~> Set your range
    Set rng = Range("C5:L14")

    If Not Application.Intersect(Target, rng) Is Nothing Then
        '~~> Loop through all cells in the range
        For Each aCell In rng
            If aCell.Value <> "" Then
                If aCell.Value > Date Then
                    aCell.ClearContents
                    MsgBox "Future date not allowed in cell " & aCell.Address
                ElseIf IsDate(aCell.Value) = False Then
                    aCell.ClearContents
                    MsgBox "Incorrect date in cell " & aCell.Address
                Else
                    aCell.Value = Format(aCell.Value, "yyyy-mm")
                End If
            End If
        Next
    End If

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

希望这可以帮助？

**编辑**：

轻微的变化。在非 VBA 方法的第 4 步中，我错误地输入了“yyyy mm”。将其更改为“yyyy-mm”

# c# - 直接从显示器读取 EDID 没有驱动程序

> ID：14627817
> 
> 赞同：0
> 
> 时间：2013-01-31T14:14:07.393
> 
> 标签：c#, edid 。, winpe上运行的应用程序。, wmi, 我们得到了这个可以工作的附加代码，但我想它会询问驱动程序的分辨率，因为当我们尝试安装winpe, c#, windows, winpe, edid

我得到了这个[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")项目，我试图直接从监视器中提取[edid 。](/questions/tagged/edid "显示标记为“edid”的问题")目标是制作一个无需安装任何驱动程序即可在[winpe上运行的应用程序。](/questions/tagged/winpe "显示标记为“winpe”的问题")我知道可以通过注册数据库或[wmi](/questions/tagged/wmi "显示标记为“wmi”的问题")获取信息，但这在这个项目中是不可能的，因为如果没有安装驱动程序，它将无法提供正确的信息。[我们得到了这个可以工作的附加代码，但我想它会询问驱动程序的分辨率，因为当我们尝试安装winpe](/questions/tagged/winpe "显示标记为“winpe”的问题")时它不会工作。这是安装驱动程序时可以显示分辨率的代码..

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool EnumDisplaySettings([MarshalAs(UnmanagedType.LPStr)] string lpszDeviceName, int iModeNum, out Program.DEVMODE lpDevMode);
public static List<Tuple<int, int>> GetScreenResolutions()
{
    List<Tuple<int, int>> list = new List<Tuple<int, int>>();
    try
    {
        int num = 0;
        Program.DEVMODE dEVMODE;
        while (Program.EnumDisplaySettings(null, num++, out dEVMODE))
        {
            Tuple<int, int> item = Tuple.Create<int, int>(dEVMODE.dmPelsWidth, dEVMODE.dmPelsHeight);
            if (!list.Contains(item))
            {
                list.Add(item);
            }
        }
    }
    catch
    {
        Console.WriteLine("Could not get screen resolutions.");
    }
    return list;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:49:16.830

您可能需要 P/Invoke 到本[机 SetupAPI](http://thetweaker.wordpress.com/2011/11/13/reading-monitor-physical-dimensions-or-getting-the-edid-the-right-way/)。不过，还没有测试过winpe链接中的代码。

# c++ - 在模板中表达左移或右移的优雅方式

> ID：14627818
> 
> 赞同：6
> 
> 时间：2013-01-31T14:14:08.090
> 
> 标签：c++

我目前有一个模板函数，根据它的模板参数 A 和 B，它可以向左或向右移动一个值：

```
template <int A, int B> void f(X) {
// ...
if (A >= B)
{
  SetValue(X << (A-B));
}
else // (A < B)
{
  SetValue(X >> (B-A));
} 
```

当我为 实例化模板时`A<B`，我会在（无法到达的）第一个分支上收到一个负向右移的警告，否则我会在第一个分支上收到一个向左负移的警告。我们的代码库没有警告，所以这是不可接受的。这两个班次语句是否有简洁易读的替代方案？

类似的问题（例如[Dynamically shift left OR right](https://stackoverflow.com/questions/8009040/dynamically-shift-left-or-right)）没有这种虚假警告，因为移位距离是那里的运行时变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T14:17:56.800

使用 C++11 或提升。

```
template<int A, int B>
void f_impl(typename std::enable_if<(A >= B)>::type* = 0)
{
   // first case
}

template<int A, int B>
void f_impl(typename std::enable_if<(A < B)>::type* = 0)
{
   // second case
}

template<int A, int B>
void f()
{
   f_impl<A, B>();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T14:17:48.213

将 (AB) 和 (BA) 的结果转换为无符号，并另外用`(sizeof(int) - 1)`. 这将清除 GCC 5.5 和 6.3 的警告。对于 GCC 的更新版本，不会生成警告。

```
template <int A, int B> void f(int X) {
  // ...
  if (A >= B)
  {
    SetValue(X << ((unsigned)(A-B) & (sizeof(int) - 1)));
  }
  else // (A < B)
  {
    SetValue(X >> ((unsigned)(B-A) & (sizeof(int) - 1)));
  }
} 
```

**请注意** 解决有关未定义行为的各种评论：此提议的解决方案可能导致未定义行为的唯一意义是执行大于操作数位宽的量的移位。但是，这是通过比较来保护的；假设 A 和 B 之间的差异是问题中隐含的安全移位计数，则`if (A >= B)`确保只有具有该数量的移位实际执行。`if`语句的另一个分支*不*执行，因此不执行移位，并且不能从移位中产生未定义的行为（尽管如果它被执行，它肯定会这样做）。

一些评论者断言，未执行的分支仍然会导致未定义的行为。我有点不知所措，不知道怎么会出现这样的误解。考虑以下代码：

```
int *a = nullptr;

if (a != nullptr) {
    *a = 4;
} 
```

现在，如果一个空指针的取消引用导致未定义的行为，即使它没有被执行，保护条件也变得无用。显然不是这样。上面的代码非常好；由于守卫，它分配`a`了一个值`nullptr`，然后不取消引用。`a`尽管这种明显的例子（赋值为 null 后立即检查 null）不会出现在实际代码中，但“受保护的取消引用”通常是一种常见的习惯用法。如果检查的指针实际为空，它本身当然不会产生未定义的行为；这就是警卫有用的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T14:20:38.317

最明显的是转发到带有附加参数的函数：

```
template <bool Cond> struct Discrim {};

template <int A, int B>
void f( Discrim<false> )
{
    SetValue( X, (A - B) );
}

template <int A, int B>
void f( Discrim<true> )
{
    SetValue( X, (B - A) );
}

template <int A, int B>
void f()
{
    f( Discrim< (A < B) >() );
} 
```

（使用这样的判别类模板是更简单的元编程技术之一。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T14:45:13.860

davmac 的评论（“使用 &0x1F”）是正确的想法，除了假定的最大移位宽度。这很容易解决：

```
template <int A, int B> void f(X) {
// ...
if (A >= B)
{
  SetValue(X << abs(A-B));
}
else // (A < B)
{
  SetValue(X >> abs(B-A));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T14:25:00.210

这就是我在草稿引擎中使用的，它大量使用位板来表示其板子

```
namespace detail {

enum { Left, Right };

template<typename, std::size_t>
struct Shift;

// partial specialization for bitwise shift-left
template<std::size_t N>
struct Shift<Left, N>
{
        template<typename T>
        T operator()(T x) const
        {
                return x << N;
        }
};

// partial specialization for bitwise shift-right
template<std::size_t N>
struct Shift<Right, N>
{
        template<typename T>
        T operator()(T x) const
        {
                return x >> N;
        }
};

} // namespace detail

template<int N>
struct Shift
{
        template<typename T>
        T operator()(T x)
        {            
            return N >= 0 ? detail::Shift<Left, N>()(x) : detail::Shift<Right, -N>()(x);
        }
};

template <int A, int B> 
void f(int x)
{
     SetValue(Shift<A-B>()(x));
} 
```

`ShiftAssign`您可以为(`<<=`和`>>=`)做类似的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T15:54:06.987

像这样的东西怎么样： -

```
#include <iostream>

template <int A, int B, bool D> class shift
{
};

template <int A, int B> class shift<A, B, false>
{
public:
    static int result(int x) {return x << (B-A);}
};

template <int A, int B> class shift<A, B, true>
{
public:
    static int result(int x) {return x >> (A-B);}
};

template <int A, int B> int f(int x)
{
    return shift<A, B, (A>B)>::result(x);
}

int main()
{
    std::cout << f<1, 2>(10) << "\n";
    std::cout << f<2, 1>(10) << "\n";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T15:39:53.783

我认为一个相当小的变化就是用乘法将未执行的移位归零。编译器仍然可以在编译时完成所有工作：

```
template <int A, int B> void f(X) {
// ...
if (A >= B)
{
  SetValue(X << ((A < B) * (A-B)));
}
else // (A < B)
{
  SetValue(X >> ((A >= B) * (B-A)));
} 
```

我相信一种更简洁的方法可能是发送到一个知道如何转移正确方向的真/假专用模板。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-31T15:13:42.393

```
template< int A, int B > void f(X)
{
    std::function< int(int, int) > shift =
        A < B
        ? [](int X, int N) { return X << N; }
        : [](int X, int N) { return X >> N; }

    SetValue( shift( X, std::max(A,B) - std::min(A,B) ) );
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-31T14:19:04.840

您可以添加一个新模板，并适当地对其进行专门化，例如：

```
template<bool b> int Shift(int i, int a, int b);

template<true> int Shift(int i, int a, int b) { return i << (a-b); }
template<false> int Shift(int i, int a, int b) { return i >> (b-a); } 
```

然后将其调用为`Shift<(A >= B)>(X, A, B)`. 那应该行得通。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-31T14:19:53.117

在我的头顶上：

```
template <int A, int B> struct whatever {
    static void f() {
        SetValue(X << (A - B));
    }
};

template <int A, int B, bool reversed> helper : whatever<A, B> {
};

template <int A, int B, true> : helper whatever<B, A> {
};

template <int A, int B> do_it : helper<A, B, B < A> {
};

template <int A, int B> void f() {
    return do_it<A, B>::f();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-31T14:20:54.000

您可以将移位操作放在单独的结构中并`std::conditional`在 C++11 中使用：

```
template <typename A, typename B, typename X>
struct ShiftRight
{
    static void shift() { SetValue(X >> (A - B)); }
};

template <typename A, typename B, typename X>
struct ShiftLeft
{
    static void shift() { SetValue(X << (A - B)); }
};

template <typename A, typename B, typename X>
void f()
{
    typedef typename std::conditional<A >= B, ShiftLeft<A, B, X>, ShiftRight<A, B, X>>::type ShiftType;

    ShiftType::shift();
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-02T09:21:24.147

回答我自己的问题：使用 C++17，现在很容易。

```
template <int A, int B> void f(X) {
if constexpr (A >= B)
// ^^^^^^^^^
{
  SetValue(X << (A-B));
}
else // (A < B)
{
  SetValue(X >> (B-A));
} 
```

偏移为负的分支将被*丢弃*。

# sql - 使用 CASE 时的 SQL 性能问题

> ID：14627823
> 
> 赞同：2
> 
> 时间：2013-01-31T14:14:11.727
> 
> 标签：sql, case, table-valued-parameters

我有一个每秒返回大量数据并显示在网格中的 SP。我现在正在尝试减少带宽并考虑仅返回当前在我的网格中显示的列。

这当然是简化和最小化的，但基本上我所拥有的是以下 SP：

```
SELECT
[Animals].[AnimalID] AS [AnimalID],
[Animals].[name] AS [AnimalName],
[Foods].[DisplayName] AS [Food],
[Animals].[Age] AS [AnimalAge],
[Animals].[AmountOfFood] AS [AmountOfFood] 
```

我目前正在尝试的是传递当前显示在网格上的字段（@fields）名称的 TVP，并仅返回必需的字段，如下所示：

```
SELECT
[Animals].[AnimalID] AS [AnimalID],
[Animals].[name] AS [AnimalName],
CASE 
    WHEN ('Food' in (select * from @fields)) 
    THEN [Foods].[DisplayName] 
END AS [Food],
CASE 
    WHEN ('AnimalAge' in (select * from @fields)) 
    THEN [Animals].[Age] 
END AS [AnimalAge],
CASE 
    WHEN ('AmountOfFood' in (select * from @fields)) 
    THEN [Animals].[AmountOfFood] 
END AS [AmountOfFood] 
```

我面临的问题是（正如所料）我的 SP 从 ~200 毫秒变为 ~1 秒

有什么办法可以重写它，以免它杀死我们？

我的王国！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:19:30.460

我会尝试将存储过程转换为表值函数，并使您的网格仅从中选择所需的列。

所以你的功能仍然会选择

```
SELECT
[Animals].[AnimalID] AS [AnimalID],
[Animals].[name] AS [AnimalName],
[Foods].[DisplayName] AS [Food],
[Animals].[Age] AS [AnimalAge],
[Animals].[AmountOfFood] AS [AmountOfFood] 
```

如果客户端只选择了 example `select * AnimalID, Age from myfunction(..)`，则只有这些列会被传输到客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:28:57.390

在 SQL Server 中，您还可以使用动态 SQL 执行此操作。就像是：

```
declare @sql nvarchar(max);

select @sql = (select ', '+
                      (case when FieldName = 'Food' then 'Foods.DisplayName'
                            when FieldName = 'AnimalAge' then 'Animals.Age'
                         . . .
                       end)
               from @fields
               for xml path ('')
              );

select @sql = 'select [Animals].[AnimalID] AS [AnimalID], [Animals].[name] AS [AnimalName]'+@sql+RESTOFQUERY;

exec(@sql); 
```

# c# - 创建 Windows 服务时如何使用 App.Config 文件中的 appSettings 的值

> ID：14627824
> 
> 赞同：35
> 
> 时间：2013-01-31T14:14:15.347
> 
> 标签：c#, windows-services

我正在尝试创建一个 Windows 服务器。我在 C# 中有一些逻辑

```
 string urlToPing = ConfigurationSettings.AppSettings["UrlToPing"].ToString();
        Stream data = client.OpenRead(urlToPing); 
```

我需要阅读

这是我的 App.Config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="UrlToPing" value="http://mysite.com"/>
  </appSettings>

</configuration> 
```

我是 Windows 服务的新手，我的问题：

*   当我发布到服务文件夹或创建构建时，我看不到 App.Config 文件
    *   ConfigurationSettings.AppSettings 上的 Visual Studio 警告已过时（我应该改用什么？）

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-31T14:30:28.917

对于我的第二个问题，我找到了解决方案：

1.  将对 System.Configuration 的引用添加到您的代码文件中。

    `using System.Configuration;`

2.  现在可以正确引用该设置...

    `ConfigurationManager.AppSettings["UrlToPing"].ToString();`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T09:17:50.410

对于您的第一个问题，当您构建一个可执行项目（Windows 服务、控制台应用程序等）时，它会将 app.config 重命名为“YourApplication”.exe.config，其中“YourApplication”是您的启动程序集的名称。然后它将文件复制到您的输出文件夹。

# netezza - 为什么 Netezza 序列下一个值给出随机值？

> ID：14627828
> 
> 赞同：1
> 
> 时间：2013-01-31T14:14:24.853
> 
> 标签：netezza

顺序：

```
CREATE SEQUENCE STG.TEMP_PPC_SEQ AS BIGINT
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    NO CYCLE; 
```

选择查询：

```
SELECT TPLCST.code,NEXT VALUE FOR STAGING.STG.TEMP_PPC_SEQ
FROM TEMP_PRODUCT_LIFE_CYCLE_STATUS_TYPE TPLCST 
```

结果：

```
CODE    NEXTVAL
30  8
80  10008
40  30008
50  40015
10  40016
20  20008 
```

我得到下一个随机数。我怎样才能使它们连续？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T23:23:45.263

它们是随机的，因为 Netezza 是大规模并行的，并且每个 SPU 都有自己的序列值块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:10:18.353

您可以使用 Row_number() over(order by <>) 来获取序列值

请阅读下文

[http://www.enzeecommunity.com/message/8914](http://www.enzeecommunity.com/message/8914)

[http://www.enzeecommunity.com/message/3272](http://www.enzeecommunity.com/message/3272)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-18T09:45:59.283

您是否正在尝试制作自动增量列？Netezza 不这样做。此外，如果您使用序列生成器，它将是唯一的，但不是连续的——序列中会有漏洞。

# android - 从片段调用片段

> ID：14627829
> 
> 赞同：16
> 
> 时间：2013-01-31T14:14:24.820
> 
> 标签：android, android-fragments

我有一个带有按钮的活动，当单击时我用片段上的另一个按钮调用片段。但是当点击片段的按钮时，我不能调用第二个片段。这是我的来源，非常简单：activity_main.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
tools:context=".MainActivity" >

<Button 
    android:id="@+id/btn_click"
    android:text="Call Fragment"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:onClick="onClick"
    />
</LinearLayout> 
```

片段1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#f0f0f0"
android:orientation="vertical" >

<TextView 
    android:id="@+id/fragment1"
    android:text="Fragment 1"
    android:textSize="25sp"
    android:gravity="center"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    />

<Button 
    android:id="@+id/btn_frag2"
    android:text="Call Fragment 2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
</LinearLayout> 
```

片段2.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#f0f0f0"
android:orientation="vertical" >

<TextView 
    android:id="@+id/fragment2"
    android:text="Fragment 2"
    android:textSize="25sp"
    android:gravity="center_vertical|center_horizontal"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    />
</LinearLayout> 
```

MainActivity.java

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void onClick(View v) {
    Fragment1 fragment1 = new Fragment1();
    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.replace(android.R.id.content, fragment1);
    fragmentTransaction.commit();
}

} 
```

片段1.java

```
public class Fragment1 extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment1, container, false);
    }

    public void onClick2(View view) {
        Fragment2 fragment2 = new Fragment2();
        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.replace(R.id.fragment1, fragment2);
        fragmentTransaction.commit();
    }
} 
```

片段2.java

```
public class Fragment2 extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment2, container, false);
    }
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-31T14:23:52.440

我认为现在可以使用片段嵌套，只需更新后面的可计算性 jar

现在让我们自己挖掘问题。

```
public void onClick2(View view) {
    Fragment2 fragment2 = new Fragment2();
    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    fragmentTransaction.replace(R.id.fragment1, fragment2);
    fragmentTransaction.commit();
} 
```

我认为`R.id.fragment1`属于 a`TextView`这不是一个包含子视图的好地方，因为它不是 a `ViewGroup`，您可以`textView`从 xml 中删除并用一个 let say 替换它，`LinearLayout`它会起作用，如果不告诉我错误是什么。

**片段1.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#f0f0f0"
android:orientation="vertical" >

<LinearLayout 
    android:id="@+id/fragment1"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    />

<Button 
    android:id="@+id/btn_frag2"
    android:text="Call Fragment 2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
</LinearLayout> 
```

***更新评论中的错误***

```
public class Fragment1 extends Fragment implements OnClickListener{

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment1, container, false);
((Button) v.findViewById(R.id.btn_frag2)).setOnClickListener(this);
    return v;
}

public void onClick(View view) {
    Fragment2 fragment2 = new Fragment2();
    FragmentManager fragmentManager = getFragmentManager();
    FragmentTransaction fragmentTransaction =        fragmentManager.beginTransaction();
    fragmentTransaction.replace(R.id.container, fragment2);
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit();
}

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T14:20:16.663

如果你想用 替换整个`Fragment1`，`Fragment2`你需要在里面做`MainActivity`，通过使用：

```
Fragment2 fragment2 = new Fragment2();
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.replace(android.R.id.content, fragment2);
fragmentTransaction.commit(); 
```

只需将此代码放在 中的方法中`MainActivity`，然后从 中调用该方法`Fragment1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-20T09:53:22.153

这是我的答案，它解决了同样的问题。Fragment2.java 是包含fragment2.xml 布局的片段类。

```
public void onClick(View v) {
                    Fragment  fragment2 = new Fragement2();
                    FragmentManager fragmentManager = getFragmentManager();
                    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
                    fragmentTransaction.replace(R.id.frame_container, fragment2);
                    fragmentTransaction.addToBackStack(null);
                    fragmentTransaction.commit();   
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:25:19.363

我会使用一个听众。Fragment1 调用监听器（主要活动）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-02T12:05:28.010

此代码适用于我从 child_fragment 调用 parent_fragment 方法。

ParentFragment parent = (ParentFragment) activity.getFragmentManager().findViewById(R.id.contaniner);

parent.callMethod();

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-04T05:22:15.363

**在 MainActivity**

```
private static android.support.v4.app.FragmentManager fragmentManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);                     

    fragmentManager = getSupportFragmentManager();                                                                 

    }

public void secondFragment() {

    fragmentManager
            .beginTransaction()
            .setCustomAnimations(R.anim.right_enter, R.anim.left_out)
            .replace(R.id.frameContainer, new secondFragment(), "secondFragmentTag").addToBackStack(null)
            .commit();
} 
```

**在 FirstFragment 调用 SecondFrgment 像这样：**

```
new MainActivity().secondFragment(); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-02-08T11:30:36.717

只需这样做： getTabAt(标签的索引)

```
 ActionBar actionBar = getSupportActionBar();
        actionBar.selectTab(actionBar.getTabAt(0)); 
```

# javascript - 从视图中隐藏 JQuery 手风琴内容

> ID：14627831
> 
> 赞同：0
> 
> 时间：2013-01-31T14:14:35.897
> 
> 标签：javascript, jquery, hide, accordion, jquery-ui-accordion

我正在尝试使用 JQuery Accordion 代码实现以下目标：

*   确保在加载页面时不显示隐藏在手风琴内的内容（即短暂闪烁）。我只希望用户在展开手风琴时看到此内容，但在某些浏览器中我可以在页面加载时看到此内容。
*   如果用户禁用了 Javascript，则显示手风琴 H1 选项卡（例如 Accordion Test），但不会显示任何隐藏在其下方的内容。

举个例子，这是我试图模仿的事情：

[http://www.outdoorgb.com/c/inflatable_boats_kayaks/](http://www.outdoorgb.com/c/inflatable_boats_kayaks/)

尝试单击“阅读更多”按钮，将显示更多信息。现在尝试禁用 Javascript。您会注意到单击该按钮不会执行任何操作，并且不会显示更多信息。您可能会说，发生这种情况并不是一件好事，因为 Google 可能不会抓取该内容等。但是，通过 Lynx 运行此 URL 似乎可以很好地读取内容。有人认为这可能是个问题吗？

无论如何，这是我希望适应的代码以满足我的上述观点：

```
 <!doctype html>

<html lang="en">

<head>

  <meta charset="utf-8" />
  <title>Accordion Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="http://www.jqueryui.com/resources/demos/style.css" />

  <script>
  $(function() {
    $( "#accordion" ).accordion({
      collapsible: true,
      active: false,
      heightStyle: "content"
    });
  });
  </script>

</head>

<body>

<div id="accordion">
  <h1>Accordion Test</h1>
  <div>
  <p>Mauris mauris ante, blandit et, ultrices a, suscipit eget. Integer ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh. 

Donec suscipit eros. Nam mi. Proin viverra leo ut odio.</p>
  </div>
</div>

</body>
</html> 
```

任何一位专家可以提供的任何帮助都将不胜感激。

提前谢谢了

乔恩

===============================================

更新

===============================================

感谢Pete 的帮助，我已经解决了第一个问题。如果禁用了javascript，任何人都知道如何解决隐藏内容的问题？当前代码如下所示：

```
<!doctype html>

<html lang="en">

<head>

  <meta charset="utf-8" />
  <title>Accordion Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="http://www.jqueryui.com/resources/demos/style.css" />

 <script>

$(document).ready(function() {
    $( "#accordion" ).accordion({
      collapsible: true,
      active: false,
      heightStyle: "content"
    });
    $('#hideAccordion').show();
  });

  </script>

</head>

<body>

<script language="text/javascript"> document.write('<div id="hideAccordion" style="display:none">'); </script>

<div id="accordion">
  <h1>Accordion Test</h1>
  <div>
  <p>Mauris mauris ante, blandit et, ultrices a, suscipit eget. Integer ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh. 

Donec suscipit eros. Nam mi. Proin viverra leo ut odio.</p>
  </div>
</div>

<script language="text/javascript"> document.write('</div>'); </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:33:46.143

当页面加载时，即使内容没有 100% 地显示给用户（例如，在手风琴或翻转工具提示中），Google 也会在我的内容包含在 DOM 中时抓取它。

如果此人未启用 Javascript，我认为“阅读更多”文本不可用有任何问题，因为该文本对于使用该页面并不重要。我从未听说过单个客户或他们的客户报告过禁用 JS 存在问题。

这是一些关于禁用 JS 浏览的有用阅读 禁用 JavaScript 的浏览[器统计信息](https://stackoverflow.com/questions/9478737/browser-statistics-on-javascript-disabled)

如果 JS 禁用是您的用户组真正关心的问题，那么另一种选择是使用 CSS 来处理您的手风琴，例如 [http://www.hongkiat.com/blog/css-content-accordion/](http://www.hongkiat.com/blog/css-content-accordion/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:35:14.997

你可以尝试类似的东西

```
<script language="text/javascript"> document.write('<div id="hideAccordion" style="display:none">'); </script>

<div id="accordion">
  <h1>Accordion Test</h1>
  <div>
  <p>Mauris mauris ante, blandit et, ultrices a, suscipit eget. Integer ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut odio.</p>
  </div>
</div>

<script language="text/javascript"> document.write('</div>'); </script> 
```

然后在您的文档上准备好调用`$('#hideAccordion').show()`或更好，如果在您的手风琴加载后有一个函数被调用，请在其中调用 this

就像是

```
 $(document).ready(function() {
    $( "#accordion" ).accordion({
      collapsible: true,
      active: false,
      heightStyle: "content"
    });
    $('#hideAccordion').show();
  }); 
```

**编辑**

抱歉，我刚刚再次阅读了您的问题，并且由于禁用 javascript 时您不会担心显示内容，您可以简单地在样式表中使用以下样式：

```
#accordion div {display:none;} 
```

一旦手风琴加载，它应该可以正常工作，而不会在页面加载时显示任何内容。我要说的一点是，它不是很容易访问，但这仅取决于您是否对按照 w3c 标准进行编码感到困扰，并且某些搜索引擎会寻找大块的文本，`display:none`如果您这样做可能会降低您的搜索排名有很多像这样隐藏的文字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:36:59.530

您提供的示例只是切换一个类。内容实际上一直存在（查看 .side 内部，您会找到 .readmore_con）。

.readmore_con 被简单地设置为

```
display: none; 
```

单击“阅读更多”按钮后，它会在 .readmore_con div 中添加一个 .readmore_open 类。.readmore_open 的 CSS？...您猜对了：

```
display: block; 
```

如果您真的想使用手风琴进行此切换，您可以简单地定义显示的初始状态：无；到您的“更多”内容，然后在手风琴的 .activate 事件期间切换它：http: [//api.jqueryui.com/accordion/#event-activate](http://api.jqueryui.com/accordion/#event-activate)

# javascript - 管理页面特定的 Javascript：1 个带有条件的大文件或多个文件

> ID：14627837
> 
> 赞同：2
> 
> 时间：2013-01-31T14:14:56.080
> 
> 标签：javascript, loading

在我的项目中，我在每个页面上都使用了大量函数，因此我将它们放在一个 javascript 文件中`common.js`，并将其包含在我的页脚模板中。我的问题是，处理特定页面的 javscript 的最佳方式是什么？

例如，在我的一个页面上，我有一张谷歌地图。如果我的地图 js 代码在没有 ID 为 map_canvas 的元素的页面上运行，则会出现错误。

`map.js`方法 1：我可以编写一些 PHP，当且仅当我在地图页面上时，它会回显一个额外的脚本标签请求。

方法2：我可以给`<body>`我的地图页面的id“map_page”，然后我可以写一个条件子句，`common.js`如下所示：

```
if (#map_page exists){
    put contents of map.js here
} 
```

方法 1 的问题在于它增加了对服务器的请求数。方法 2 的问题在于它使我的常见 javascript 文件膨胀。

请有人解释一下，如果有的话，哪种方法是首选的方法，或者如果都不合适，我应该怎么做？

我有大约 10 个特定于页面的 javascript 文件要处理。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:26:18.863

我会说越简单越好。在每个页面上，只需添加一个调用 map.js 的脚本标签。或者，在您的 common.js 中，您不需要粘贴所有 map.js 的代码。您可以使用 js 创建一个新的脚本标签，然后像这样调用 map.js。我不会推荐 php 方法。最简单和最简单的方法，因此最不可能出错的方法，就是在需要它的页面上添加另一个脚本标签。或者，如果这不是一个选项，common.js 可以包含以下内容：

```
if(need map.js){
    var mapjs=document.createElement("script");
    mapjs.type="text/javascript";
    mapjs.src="map.js";
    document.body.appendChild(mapjs);
} 
```

# php - 在 PHP 日历上显示数据库条目

> ID：14627838
> 
> 赞同：0
> 
> 时间：2013-01-31T14:14:57.090
> 
> 标签：php, mysql, calendar

我正在创建一个基于 Web 的预订系统，用户可以在其中将预订添加到数据库中，并且存储在数据库中的详细信息是（除其他外）“DateBooked、StartTime、EndTime、Room”。

这是从数据库中提取用户单击当天的相关信息的位：
`$query="SELECT * FROM bookings WHERE DateBooked = '{$year}-{$selectedmonth}-{$selectedday}'";
$result = mysql_query($query);
$todayarray = mysql_fetch_array($result);`

和 PHP：

```
$roomcount = 4;  
$room = 1;  
while ($room <= $roomcount)  
{  

echo "\n<div class=\"roomtimes\">";  

echo "\n<table border=1>";

echo "\n<tr><th class=\"titlecell\">Room $room</th></tr>";

$cellnum = 10;

while ( $cellnum < 23 )

    {

    echo "\n<tr>";

    echo "\n<td class=\"linkcell";

    if ($selectedtime==$cellnum)
        {

        echo " selectedcell";
        }

    echo "\">";

    echo "<a href=\"newbooking.php?m=$selectedmonth&d=$selectedday&t=$cellnum&r=$room\">$cellnum:00</a></td>";

    echo "\n</tr>";

    $cellnum++;

    }

    $room++;

echo "\n</table>";
echo "\n</div>";
} 
```

所以我的问题是，如果该房间存在条目并且该单元格中的数字介于该预订的开始时间和结束时间之间，我如何在每个表格单元格中添加一些文本说“已预订”？

我是这个网站的新手，所以如果我做错了什么或者您需要更多信息，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:05:52.573

您需要划分单元格内容 html 并在其中插入“已预订”文本。我建议你使用`mysql_fetch_assoc`这样你就可以获得关联数组，并且更容易获得字段。如果我正确理解您的代码，您也许可以使用这样的东西。此示例替换了其中包含链接输出的行。我在这里使用了 mysq_fetch_assoc 从数据库中获取 StartTime 和 EndTime 字段。您可能需要根据字段的数据格式稍微更改字段。

```
echo "<a href=\"newbooking.php?m=$selectedmonth&d=$selectedday&t=$cellnum&r=$room\">$cellnum:00</a>";

if ($todayarray['StartTime'] <= $cellnum && $todayarray['EndTime'] >= $cellnum && $todayarray['Room'] == $room) echo 'BOOKED';

echo "</td>"; 
```

# java - 在 RMI 中将子类对象转换为超类引用

> ID：14627840
> 
> 赞同：0
> 
> 时间：2013-01-31T14:15:06.590
> 
> 标签：java, serialization, interface, polymorphism, rmi

我有一个涉及 RMI、序列化和运行时多态性的问题。

我有一个 RMI 服务器，其内容如下：

```
public interface Shape extends Remote, Serializable { 
    public double getArea() throws RemoteException;
}

public class Circle implements Shape {
  double radius;
  public Circle( double r) { radius = r; }
  public double getArea() { return Math.PI * radius * radius; }
} 
```

`cObj`在 RMI Registry 中注册了 Circle 类的对象：

```
Circle cObj = new Circle (10);
registry.bind("cObj", cObj); 
```

现在，在客户端，我在 CLASSPATH 上有 Shape.class 文件，但在 CLASSPATH 上没有 Circle.class 文件。RMI 客户端是否可以执行以下操作？

```
Shape obj = (Shape) registry.lookup("cObj");
obj.getArea(); 
```

请注意，Circle.class 不在 RMI 客户端的 CLASSPATH 中，并且客户端上的代码无论如何都没有直接引用 Circle 类。它仅引用 Shape 接口类型。

我会怎么看，可能是客户端执行查找并找到具有 cObj 名称和 Circle 类型的对象。服务器知道 Circle 是 Shape 的子类型，并将对象序列化并发送给客户端。现在，我不确定客户端是否可以将其转换为超类（Shape）类型而无需访问 Circle 类定义。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:17:34.050

如果您不想将 Circle 类部署到客户端，您有两种选择：

1.  使用 RMI 代码库功能。您需要查看它，因为它是一个太大的话题，无法在此处讨论，但基本上它可以从 RMI 服务器指定的其他位置进行类加载。

2.  使它成为一个导出的远程对象，这样对它的调用也是 RMI 调用。通过使 Shape 扩展 Remote，您已经完成了一半，但您还需要导出 Circle，方法是使其扩展 UnicastRemoteObject 或在构造时调用 UnicastRemoteObject.exportObject()。

在我看来，通过扩展 Remote 你真的打算一直做（2）。如果你这样做，你不需要使 Shape 扩展 Serializable。如果您*不*这样做 (2)，那么让 Shape 扩展 Remote 毫无意义。您应该删除其中一个：它们是相互排斥的。

# intellij-idea - Intellij IDEA：无法运行服务器配置，因为文件尚不存在。使用 maven 目标结果作为工件？

> ID：14627841
> 
> 赞同：0
> 
> 时间：2013-01-31T14:15:07.923
> 
> 标签：intellij-idea

到目前为止，我使用默认的 IntelliJ 工件“Web 应用程序：存档”部署到 Glassfish 服务器。现在，由于 Maven 修改了几个文件，我的构建过程变得更加复杂。

在Deployment下的glassfish配置中，我用直接war文件替换了要部署的Artifact，并将maven目标放在“Before Launch：另一种配置”中

但是，如果运行 mvn clean，则战争不存在并且我无法运行配置（因为外部文件不存在）。

我可以避免手动运行一次 mvn package 吗？例如，通过使 maven 目标的输出成为工件？

谢谢！

# c# - ReSharper 是否正确处理 Debug.Assert(..)？

> ID：14627842
> 
> 赞同：5
> 
> 时间：2013-01-31T14:15:08.577
> 
> 标签：c#, debugging, resharper, assert

我的代码我正在使用该`System.Function`方法在方法`Debug.Assert(..)`的开头验证输入参数（请参阅以下示例代码）：

```
public class TestClass : IInterface
{
}

public class Verifier
  {
     public static void Verify(IInterface objectToVerify)
     {
        Debug.Assert((objectToVerify is TestClass), "Passed object must be type of TestClass");

        // ReSharper (Version 7.1.1) marks here "Expression is always false
        if (!(objectToVerify is TestClass))
        {
           return;
        }

        // do something ...
     }
  } 
```

如果我注释掉该`Debug.Assert`声明，ReSharper 警告就会消失。在我看来，ReSharper 必须忽略这个`Debug.Assert`语句，因为如果这个`Debug.Assert`语句没有被执行，下面的代码也会被执行（例如在发布模式下）

你有什么意见？还是有替代的实现思路？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-30T08:33:25.210

不，我认为 resharper 是错误的，原因很简单： **当我们知道事实并非如此时，Resharper 说代码无法访问。**

如果您在对话框中单击忽略，发布构建将*始终执行该代码，并且调试构建将命中它。*

在断言之后继续是否是错误并不重要，它仍然不是无法访问的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:43:38.250

ReSharper 足够聪明，知道`Debug.Assert()`如果`objectToVerify`不是`TestClass`. 因此，您的`if`语句中的表达式确实总是`false`（否则`if`将不会首先到达该语句）。

您可以通过编写以下内容来解决警告：

```
public static void Verify(IInterface objectToVerify)
{
    if (!(objectToVerify is TestClass))
    {
        Debug.Assert(false, "Passed object must be type of TestClass");
        return;
    }

    // do something ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-08T09:07:09.353

老问题，但我刚刚遇到了这个问题，并通过切换*HeuristicUnreachableCode*解决了它（从外观上看） ：

```
Debug.Assert(false, "type/fieldNum not processed");
// ReSharper disable HeuristicUnreachableCode
return null;
// ReSharper restore HeuristicUnreachableCode 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:49:03.867

我将 a 读`Debug.Assert`作“这种表达`false`永远不会发生”。Resharper 警告与该用途一致。它只是相信你的断言。当`then`你的语句部分执行时，你的程序就有了一个错误。

但是您在公共 API 的调试时将其用于参数验证。我不会为此使用断言。在这种情况下，您应该抛出异常，并消除您的`if(...)return`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T14:55:00.883

您可以使用[Code Contracts](http://msdn.microsoft.com/en-us/magazine/ee236408.aspx%5C)。

代码如下所示 -

```
 public class Verifier
  {
     public static void Verify(IInterface objectToVerify)
     {
        Contract.Requires<ArgumentException>((objectToVerify is TestClass), "Passed object must be type of TestClass");

        // do something ...
     }
  } 
```

在调试和发布模式下工作。[在这里](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)阅读更多

# html - 访问通过 Ruby on Rails 中的表单选择的文件？

> ID：14627843
> 
> 赞同：0
> 
> 时间：2013-01-31T14:15:08.587
> 
> 标签：html, ruby-on-rails, ruby

我有以下 Ruby 代码，其中包含一个选择文件的表单：

```
 <%= form_for :import, :url=>{:controller=>"user", :action=>"upload"}, :html => { :multipart => true } do |f| %>
        <div class= "field">
            <%= f.file_field :import %>
            <%= submit_tag 'Import' %>
        </div> 
```

在我的控制器内部，我试图调用用户从本地磁盘中选择的文件。
当我给它文件时，下面的代码有效：

```
book = Spreadsheet.open 'c:/myexcel.xls' 
```

但我不确定如何在控制器内部调用从表单中选择的文件。
请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:16:42.980

**可以使用CarrierWave**做到这一点，请参阅 railscast [here](http://railscasts.com/episodes/253-carrierwave-file-uploads)。

下面是从 Excel 电子表格导入数据的代码：

```
def upload
    require 'spreadsheet'
    Spreadsheet.client_encoding = 'UTF-8'
    file_to_import = params[ :import ][ :import ]
    file = FileUploader.new
    file.store!(file_to_import)
    book = Spreadsheet.open "#{file.store_path}"
    sheet = book.worksheet 0
    sheet.each 1 do |row|
        @user = User.new(:code => row[0], :name => row[1], :status => row[2], :account => current_user.account).save
  end 
```

或者，对于上传文件和检索它们，您可以使用“**回形针”gem（**[此处](http://railscasts.com/episodes/134-paperclip)为 railscast ）。

它已经很老了，但它是一个受人尊敬的宝石，得到了很好的支持并且没有太大变化。

希望有帮助

# function - 从矩阵中获取随机索引号，fortran 90

> ID：14627852
> 
> 赞同：0
> 
> 时间：2013-01-31T14:15:25.490
> 
> 标签：function, random, matrix, repeat, fortran90

我正在寻找一个函数或一种方法来获取二维矩阵的索引号：

我的例子是，我有 A(Ly,Lx) 其中 Ly = 100 和 Lx = 100

我想得到一个矩阵的随机索引号，如：Random_node(A) = (random y, random x)

然后我想重复执行此操作，并且我不希望我的随机点在（假设）10 个半径节点的阈值后重复，甚至不希望彼此靠近。该矩阵是欧拉二维矩阵 (y,x)。

至少第一个问题是直截了当的吗？

谢谢你们！

阿尔伯特 P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:19:27.170

这是在 100x100 矩阵中获取一组随机位置的一种方法。首先，声明一个 100x100 的实数矩阵：

```
real, dimension(100,100) :: randarray 
```

然后，将一个随机数放入该数组的每个元素中

```
call random_number(randarray) 
```

现在，一个表达式，如

```
randarray > 0.9 
```

返回一个逻辑数组，其中包含大约 10% 的真值和 90% 的假。通过追踪真实值的位置，您可以获得所寻找的随机 x-es 和 y-es。实际上，您可能根本不需要找到这些位置，您可以简单地在掩码分配和类似操作中使用表达式，例如

```
where(randarray>0.9) a = func() 
```

当然，只要 as`func`返回标量或 100x100 数组。

这种方法保证了每个位置都与其他位置不同。

但是，它并没有解决您的“随机”位置不应彼此太近的约束。当然，这种约束与随机性有点不一致。

我想，您可以将 100x100 数组分成 10x10 块，然后随机选择每个块中的一个元素。这会是你的约束之间的一个很好的妥协吗？

# birt - 如何替换dataSetRow中每次出现的字符串？

> ID：14627853
> 
> 赞同：0
> 
> 时间：2013-01-31T14:15:26.297
> 
> 标签：birt

我有一些非常大的 rptdesign 报告定义文件。

我想在下面的示例中执行类似的操作：

```
<expression name="expression">dataSetRow["WORK_DESCRIPTION"].replace(new RegExp('&amp;lt;', 'g'), '&lt;');</expression> 
```

但是对于任何行中任何单元格中的任何数据集中出现的任何字符串。

这可以在 rptdesign 中做到吗？

还是有其他方法可以完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:08:14.967

您可以这样做的一种方法是创建一个样式（使用预定义的数据样式）并向其中添加一个地图。将脚本放在第一个表达式中，例如：

```
 importPackage(Packages.java.lang);
    if( _jsContext.getContent().getValue() instanceof String ){
      if( _jsContext.getContent().getValue() == "S18_1749" ){
       _jsContext.getContent().setValue(_jsContext.getContent().getValue()+"--");
      }
    }
    true; 
```

这将始终返回 true。将第二个表达式设置为 false，因此映射永远不会出现。有点丑

# sql - 数据库中的标志 - 跟踪的明智方法

> ID：14627854
> 
> 赞同：3
> 
> 时间：2013-01-31T14:15:28.137
> 
> 标签：sql, database, linux, postgresql, debian

我正在尝试设计我的第一个数据库，但我发现我想在数据库中保留很多不同的“标志”：

```
Active      # Shows whether the item submission has been completed
Indexed     # Shows whether the item has been indexed
Reminded        # Shows whether the “expiring email” has been sent to the user
Error       # Shows whether there is an error with the submission
Confirmation    # Shows whether the confirmation email has been sent 
```

除了为这些设置一个布尔字段之外，还有存储这些详细信息的巧妙方法吗？我想知道我是否在数据库中的状态组下有这些，每个内涵都有一个 ID（32），然后链接到那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:18:40.440

除非有其他理由，否则我建议只需将这五个布尔（或位）列添加到项目表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:21:48.233

这取决于内涵列表的不变性。

如果只有您提到的五个，那么只需添加五个标志列。如果将来可能的内涵列表可能会发生变化，那么拥有一个单独的表可能会更安全，其中包含当前应用于主表中每一行的内涵列表，具有一对多的关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T14:23:58.367

考虑：

```
Table: Vehicle
ID
Type
Doors
Color

Table: Type_Categories
ID
Name

Table: Types
TypeID
CategoryID
Value
DataType 
```

这样可以根据需要在其他地方重用类型。但是，如果所有标志都是真正的布尔值，则假定非布尔值“标志”...... Id 坚持 w/ 将它们放在表中。但我一直讨厌布尔值。我更喜欢时间戳，所以我知道标志是什么时候设置的，而不仅仅是它被设置了。如果时间戳为空，则未设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:36:45.010

以我的经验，状态栏经常演变为两个以上的状态。`smallint`因此，为了方便和简单，我会为每个状态使用一个。

但是，如果您的目标是节省空间，那么您可以将所有状态保存在一次中，`smallint`使用强制转换来`bit`单独或整体操作状态。

```
create table t (status smallint); 
```

要保存`10010`然后将其转换为 smallint：

```
insert into t (status) values (b'10010'::int::smallint); 
```

列出所有状态：

```
select status::int::bit(5) from t;
 status 
--------
 10010 
```

要设置第三种状态，请使用`bitwise or`：

```
update t set status = (status::integer::bit(5) | b'00100')::integer::smallint;
select status::int::bit(5) from t;
 status 
--------
 10110 
```

要取消设置该状态，请使用`bitwise and`：

```
update t set status = (status::integer::bit(5) & b'11011')::integer::smallint;
select status::int::bit(5) from t;
 status 
--------
 10010 
```

要检索具有第 3 个状态集的行：

```
select status
from t
where substring(status::integer::bit(5) from 3 for 1) = '1' 
```

您可以编写函数来简化转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T15:55:57.723

如果它们是“只是”标志，请将它们作为布尔类型的列存储在表中。

除非空间真的很紧，否则我建议不要使用 Clodoaldo 的解决方案 - 请参阅[这个](https://stackoverflow.com/questions/5708239/when-is-it-better-to-store-flags-as-a-bitmask-rather-than-using-an-associative-t/5708369#5708369)问题。

看起来您提到的列具有“业务重要性” - 即存储“索引”可能不够，还有项目被索引的日期。可能有必要限制状态组合，或对排序施加规则（在错误状态下无法完成）。在这种情况下，您可能需要实现一个“item_status”表来存储历史记录等。

在这种情况下，您的架构将是这样的：

```
ITEM
---------
item_id
....

STATUS
---------
status_id
description

ITEM_STATUS
--------------
item_id
status_id
date 
```

每次项目更改状态时，您都会在 ITEM_STATUS 表中插入一个新行；当前状态是该项目的最新日期所在的行。

# javascript - 带有碰撞检测的 jQuery 拖动

> ID：14627860
> 
> 赞同：6
> 
> 时间：2013-01-31T14:15:49.663
> 
> 标签：javascript, jquery, collision-detection, jquery-ui-draggable

我有以下 HTML：

```
<div class="list" id="list">
    <div class="item" id="i1">Item 1</div>
    <div class="item" id="i2">Item 2</div>
    <div class="item" id="i3">Item 3</div>
</div>
<div class="timeline" id="timeline">
</div> 
```

我希望能够用 jQuery 做的是：

1.  能够将`.item`s`#list`从`#timeline`
2.  `.item`s 可以根据需要多次放入时间线，例如。时间线中可能有 4 个项目`#i1`。
3.  `.item`时间轴中的 s 不能相互重叠
4.  `.item`s 可以放置在时间轴上的任何位置，只要它们不与时间轴上的任何其他项目重叠

所以我选择了 jQueryUI 的 Draggable 和 Droppable，也选择了[jQueryUI Draggable Collision Plugin](http://sourceforge.net/projects/jquidragcollide/)。

这是我开始使用的 jQuery：

```
$('#list .item').draggable({
    helper: 'clone',
    revert: 'invalid',
    //the following are for the jquery-ui-dragggable-collision plugin
    obstacle: '#timeline .item',
    preventCollision: true
});
$('#timeline').droppable({
    accept: '.item'
}); 
```

我的问题是 jQueryUI Draggable Collision Plugin 仅在您拖动原始 Div 本身而不是拖动助手时才有效。我需要帮手，这样我才能实现#2（添加一个项目的多个副本）。但是我需要像 Collision Plugin 这样的东西，这样我才能实现#3（项目不重叠）。

有人知道这个问题的解决方案吗？是否有另一个插件可以对可拖动对象的助手进行碰撞检测？是否有另一种方法可以尝试获得我想要实现的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:49:24.100

如果您更喜欢使用 jQueryUI Draggable Collision Plugin 的 jsfiddle，如您所建议的，这里有一些可以玩的东西：[Link to jsfiddle](http://jsfiddle.net/martyk/TSGwz/1/)

该方法使用原始助手以利用碰撞功能。克隆在 start 事件函数中生成（并在 stop 事件中再次删除，以防拖动未成功放置）：

```
$(function(){
    var draggableSelector = ".list .item:not(.dropped)";
    var init = function() {  
        $(draggableSelector).each(function(i){
            $(this)
                .draggable({
                    //helper: 'clone',
                    revert: 'invalid',
                    start: function(event,ui) {
                        var $clone = ui.helper.clone();
                        $clone
                            .removeClass("ui-draggable ui-draggable-dragging")
                            .insertAfter(ui.helper)
                        ;
                        $(this).data("clone",$clone);
                    },
                    stop: function(event,ui) {
                        if( $(".ui-draggable-dragging.dropped").length == 0) {
                            $(this).data("clone").remove();
                        };
                    },
                    //the following are for the jquery-ui-draggable-collision plugin
                    refreshPositions: true,
                    obstacle: '.item.dropped',
                    preventCollision: true,
                })
                .css("left", ( ($(this).width() + 5) * i) + "px")
            ;
        });

        $('.timeline').droppable({
            accept: '.item'
            ,drop: function(event,ui) {
                ui.draggable
                    .addClass("dropped")
                ;
                setTimeout(reinit, 500);
            }
        });                
    };

    var reinit = function() {
        $(".list .item.ui-draggable").draggable("destroy");
        init();
    }

    init();
}); 
```

希望这将是有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:37:23.253

这是我为这个问题写的一个例子，展示了一个带有碰撞检测的简单拖放插件。它允许您将项目拖放到时间线上，只要项目有空间存在而不重叠。

它绝不是一个成品，但希望能证明这样的代码编写起来并不复杂，并且试图将大量冲突的插件组合在一起并不总是最好的选择。有时最好从头开始。它很有趣，而且是一种非常好的学习方式。

```
/*----------ON DOCUMENT READY----------*/

$(document).ready(function() {

  $("#timeline").timeline({
    items: ".item"
  });

});

/*----------THE TIMELINE PLUGIN----------*/

$.fn.timeline = function(options) {

  var defaults = {
    items: "div"
  }

  var options = $.extend(defaults, options)

  return this.each(function() {

    //-----SETUP-----//

    //define all the vars we will need later
    var el = $(this);
    var items = $(options.items);
    var mousedown = false;
    var dragging = false;
    var activeItem = false;
    var placedItems = new Array();

    //make everything unselectable so it dosne interfere with dragging
    $("html").find("*").css({
      "user-select": "none",
      "-moz-user-select": "none",
      "-webkit-user-select": "none",
      "-ms-user-select": "none",
      "-o-user-select": "none",
    }).attr("unselectable", "true").unbind("onselectstart");

    //-----EVENTS-----//

    //log when the mouse is down anywhere on the doc
    $(document).mousedown(function() {
      mousedown = true;
    });

    //when the mouse is released
    $(document).mouseup(function(e) {
      //if was dragging an item attempt to place it
      if (mousedown && dragging) {
        placeItem(e);
      }
      //log that dragging has stopped
      mousedown = false;
      dragging = false;
    });

    //log when the mouse is pressed over an item
    items.mousedown(function() {
      dragging = true;
      //clone the active item and hide it ready for dragging
      activeItem = $(this).clone().appendTo("body").hide();
    });

    //when the mouse movers over the doc
    $(document).mousemove(function(e) {
      //if mouse was pressed over item attempt to drag
      if (mousedown && dragging) {
        dragItem(e);
      }
    });

    //-----FUNCTIONS-----//

    //drag the item around the screen
    function dragItem(e) {

      //if no active item done do owt
      if (!activeItem) {
        return false;
      }

      //work out where the drag anchor is
      var x = e.pageX - (activeItem.height() / 2);
      var y = e.pageY - (activeItem.width() / 2);

      //save the original position in case we cant place the item
      if (!activeItem.origPos) {
        activeItem.origPos = {
          x: x,
          y: y
        }
      }

      //drag the item
      activeItem.css({
        "position": "absolute",
        "top": y,
        "left": x,
        "z-index": "999",
        "opacity": 0.6,
        "display": "block"
      });

    }

    //attempt to place the item
    function placeItem(e) {

      //if no active item dont do owt
      if (!activeItem) {
        return false;
      }

      //define som vars needed later on
      var onTargetY = false;
      var onTargetX = false;
      var remove = false;
      var collision = false;

      //check if item is being relesed withing the timeline bounds
      if (e.pageY > el.position().top && e.pageY < el.position().top + el.height()) {
        onTargetY = true;
      }
      if (e.pageX > el.position().left && e.pageX < el.position().left + el.width()) {
        onTargetX = true;
      }

      //if on target attempt to drop on timeline
      if (onTargetX && onTargetY) {

        //snap to the left or right if dropped at the left or right edges
        var maxLeft = el.position().left;
        var maxRight = el.position().left + el.width() - activeItem.width();
        x = e.pageX - (activeItem.width() / 2);
        if (x < maxLeft) {
          x = maxLeft;
        } else if (x > maxRight) {
          x = maxRight;
        }

        //loop the items already on the timeline and check for collisions
        $.each(placedItems, function(i, item) {
          var itemMin = item.position().left;
          var itemMax = item.position().left + item.width();
          if (x + activeItem.width() > itemMin && x < itemMax) {
            collision = true;
          }
        });
        y = el.position().top;

      }

      //if there is a collision or the item is dropped outside the timeline 
      //set x and y back to original position and set removal flag to true
      if (collision || !onTargetX || !onTargetY) {
        x = activeItem.origPos.x;
        y = activeItem.origPos.y;
        remove = true;
        //if dropped inside the timeline and no collisions add item to the 
        //array of items inside the timeline
      } else {
        placedItems.push(activeItem);
      }

      //finally either animate the item back to where it started then remove it
      //or snap it into the timeline in the space found
      activeItem.animate({
        top: y,
        left: x
      }, {
        duration: 300,
        queue: false,
        complete: function() {

          //if remove flag set remove the item from the dom
          if (remove) {
            $(this).remove();
          }

          //some tidying up
          activeItem.css("opacity", 1);
          activeItem = false;

        }
      });

    }

  });

}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="list" id="list">
  <div class="item item1">Item 1</div>
  <div class="item item2">Item 2</div>
  <div class="item item3">Item 3</div>
</div>

<div class="timeline" id="timeline"></div>
```

享受 ：）。

# c - extern 关键字的使用

> ID：14627864
> 
> 赞同：3
> 
> 时间：2013-01-31T14:16:00.427
> 
> 标签：c, gcc, c99, extern

当我在头文件中声明函数原型时，即使我从不使用“extern”关键字，我也可以在程序中的任何地方找到它们。它们只对静态库很重要，还是我什么时候需要它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:19:12.193

函数是`extern`默认的。该`extern`关键字仅对变量有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:19:32.450

extern 是 C 中的默认存储类说明符。

在变量上明确指定它

```
extern int i; 
```

如果它可以在模块之间共享。然后

```
int i; 
```

在其他模块中不会违反 ODR。

对于功能是的，非常没用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:20:15.777

对于函数声明，它们不是强制性的。它们仅用于声明外部全局变量：

```
// header
extern int foo;

// implementation (.c)
int foo; 
```

如果没有`extern`，编译器会在每次遇到全局变量时实例化它（因为包含头文件），你会得到一个链接器错误。

此关键字的另一个用例是通过将 C 代码指定为 C 链接来使 C 代码与 C++ 兼容（这再次防止了链接器错误，即由 C++ 名称修改引起的错误）：

```
#ifdef __cplusplus
extern "C" {
#endif

void foo(void);

#ifdef __cplusplus
}
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:15:52.977

默认情况下，所有函数都是**extern** ..

extern 关键字仅用于变量。

# php - 这个查询有什么问题？

> ID：14627866
> 
> 赞同：0
> 
> 时间：2013-01-31T14:16:04.690
> 
> 标签：php, mysql, sql

我对这个查询有疑问，希望有人能帮我解决这个问题。在我的网站注册新用户时，我正在尝试检查用户名和电子邮件地址是否可以注册。用户名来自登录表，电子邮件地址来自联系人表。现在我需要进行查询以检查新用户的给定用户名和电子邮件是否可以注册。如果这些不可用，我想打印错误消息。我正在尝试使这个查询像这样，但它没有按我预期的那样工作。

```
$q = "SELECT username, email FROM login 
      INNER JOIN contact 
      WHERE login.username = '$username' OR contact.email = '$email'"; 
```

然后我像这样在PHP中检查这个查询

```
$r = mysqli_query ($dbc, $q);

// Get the number of rows returned:
$rows = mysqli_num_rows($r);

if ($rows == 0) { // No problems!

   // register new user 

} else { // The email address or username is not available.

    if ($rows == 2) { // Both are taken.

    $reg_errors['email'] = 'This email address has already been registered.1';          
    $reg_errors['username'] = 'This username has already been registered.2';            

    } else { // One or both may be taken.

                // Get row:
                $row = mysqli_fetch_array($r, MYSQLI_NUM);

                if( ($row[0] == $_POST['email']) && ($row[1] == $_POST['username'])) { // Both match.
                    $reg_errors['email'] = 'This email address has already been registered.3';  
                    $reg_errors['username'] = 'This username has already been registered with this email address.4';
                } elseif ($row[0] == $_POST['email']) { // Email match.
                    $reg_errors['email'] = 'This email address has already been registered.5';                      
                } elseif ($row[1] == $_POST['username']) { // Username match.
                    $reg_errors['username'] = 'This username has already been registered.6';            
                }

} // End of $rows == 2 ELSE. 
```

我的问题是 PHP 脚本总是去这个代码。查询不单独检查用户名和电子邮件。我尝试这样的事情..用户名不可用且电子邮件可用，电子邮件不可用且用户名可用。但总是去这个

```
if ($rows == 2) { // Both are taken.

$reg_errors['email'] = 'This email address has already been registered.1';          
$reg_errors['username'] = 'This username has already been registered.2';            

} 
```

**编辑：表结构..**

```
# --------------
# Login Table 
# --------------

CREATE TABLE login (
login_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
username VARCHAR(80) NOT NULL, 
password VARBINARY(32) NOT NULL,
PRIMARY KEY (login_id),
UNIQUE(username) 
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

# --------------
# Contact Table
# --------------

CREATE TABLE contact (
contact_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
telephone VARCHAR(60) DEFAULT NULL, 
mobile CHAR(10) NOT NULL, 
email VARCHAR(80) DEFAULT NULL, 
PRIMARY KEY (contact_id),
UNIQUE (email)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:19:09.363

目前，只要其中一个或另一个有一个匹配项，您的查询就会从两个表中选择*每一行。*您可以同时从两个表中获取匹配的行：

```
SELECT username FROM login WHERE username = '$username'
UNION ALL SELECT email FROM contact WHERE email = '$email' 
```

...以及单独的查询。

您的查询容易受到 SQL 注入的攻击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:19:52.733

 ~~您必须提供`ON`定义两个表如何相互关联的关系的子句。

```
SELECT  username, email 
FROM    login 
        INNER JOIN contact 
            ON login.colname = b.colName  // change to your orignal colName
WHERE   login.username = '$username' OR 
        contact.email = '$email' 
```

 ~~作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

在不检查表上的值的情况下执行此操作的另一种方法是对表的`UNIQUE`列强制执行约束，例如

```
ALTER TABLE login ADD CONSTRAINT tb_uq UNIQUE (username);
ALTER TABLE contact ADD CONSTRAINT tb_uq1 UNIQUE (email); 
```

成功执行两个 alter 语句后，如果该列上已存在值，则无法插入该值。

**更新 1**

```
SELECT COUNT(*)
FROM
(
   SELECT userName as Value FROM Login
   UNION
   SELECT email as Value FROM contact
) s
WHERE VALUE IN ('$username','$email') 
```

如果上面的查询将返回大于 0，则表示值已经存在。

**更新 2**

```
SELECT *
FROM
(
   SELECT userName, NULL AS email FROM Login
   UNION
   SELECT NULL AS username, email FROM contact
) s
WHERE username = '$username' OR email = '$email' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T14:24:43.860

你真的在检查两件不同的事情。单个查询没有意义，至少不是`join`. 我建议`union`：

```
select 'username' as exists from login 
    where username = '$username'
union all
select 'email' as exists from contact
    where email = '$email' 
```

这将返回一个表，其中包含一个名为`exists`的列和每个存在的元素的行。如果用户名和电子邮件都存在，您会得到以下信息：

```
EXISTS
username
email 
```

在您运行此查询的地方，您已经知道他们输入的用户名和电子邮件是什么，因此从表中返回这些值是没有意义的。

正如其他人所指出的那样，如果直接从用户那里传入`$username`，那么你就有一个很大的安全漏洞。`$email`你肯定必须以某种方式处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T14:19:52.967

每个 Inner join 子句都需要有一个谓词或“ON”条件来指定连接两个表时要执行的一个或多个规则......

查询需要在 Inner Join 之后添加一个“ON”子句。我不确定那个条件应该是什么，但是，作为一个例子......

```
 $q = "SELECT username, email FROM login 
           INNER JOIN contact 
               On contact.username = login.userName 
           WHERE login.username = '$username' OR contact.email = '$email'"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T14:22:36.580

您的加入有问题，因为您应该确定要加入的列！

例如 NNER JOIN contact On contact.id= login.contactId~~~~

# python - 为什么在尝试启动 Python Scapy 环回接口时会出现“权限被拒绝”？

> ID：14627867
> 
> 赞同：0
> 
> 时间：2013-01-31T14:16:05.033
> 
> 标签：python, sockets, scapy

我是网络新手（我正在尝试为 ICMP 启动环回接口，我得到了什么：

```
 Python 2.5.4 (r254:67916, Dec 23 2008, 15:10:54) [MSC v.1310 32 bit (Intel)] on
win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from scapy.all import *
WARNING: No route found for IPv6 destination :: (no default route?)
>>> conf.L3socket
<L3dnetSocket: read/write packets at layer 3 using libdnet and libpcap>
>>> conf.L3socket=L3RawSocket
>>> sr1(IP(dst="127.0.0.1")/ICMP())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python25\lib\site-packages\scapy\sendrecv.py", line 334, in sr1
    s=conf.L3socket(filter=filter, nofilter=nofilter, iface=iface)
  File "C:\Python25\lib\site-packages\scapy\supersocket.py", line 63, in __init_
_
    self.outs = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_RA
W)
  File "c:\Python25\lib\socket.py", line 159, in __init__
    _sock = _realsocket(family, type, proto)
socket.error: (10013, 'Permission denied') 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:27:49.897

您需要以 root 身份启动 scapy 才能使用原始套接字发送消息。

由于您运行的是 Windows，因此您需要弄清楚如何以管理员身份启动 scapy。

# python - 哪个 Python 三元运算更好，为什么？

> ID：14627870
> 
> 赞同：5
> 
> 时间：2013-01-31T14:16:13.907
> 
> 标签：python

我一直在阅读，包括[Python 是否有三元条件运算符？](https://stackoverflow.com/questions/394809/ternary-conditional-operator-in-python). 据推测

```
result = a if a > b else b 
```

比代码更好

```
result =  a > b and a or b 
```

但没有人解释为什么。有人会详细说明吗？

如果仅仅是可读性，那么它实际上只是一个偏好问题：有些人会喜欢一个，有些人会喜欢另一个。所以我的问题是：采用一种方式与另一种方式相比是否有一些真正的技术优势。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-31T14:19:50.560

`result = a if a > b else b`更好，因为它在语义上总是正确的。换句话说，无论`a`或的值如何，您总能从中得到您所期望的`b`。`result = a > b and a or b`将导致`b`每次 if`a`是一个虚假值（`0`,`None`等）。

此外，由于`a if x else b`是一种专门[定义的语言结构](http://docs.python.org/3.0/reference/expressions.html#boolean-operations)，因此其他 Python 开发人员通常更容易理解。最终，任何审查或维护您的代码的人都应该尽可能少地进行心理争论以了解发生了什么。

# c# - 如何从 Fiddler 对 wcf RESTful 服务提出“WrappedRequest”请求

> ID：14627873
> 
> 赞同：0
> 
> 时间：2013-01-31T14:16:25.713
> 
> 标签：c#, wcf-rest

我得到了以下 REST 服务，我需要从 fiddler 对其进行测试，并且我已经搜索了很多，我想出了有效负载的结构如下：

```
<Update xmlns="http://tempuri.org/">
    <value></value>
</Update> 
```

“价值”可以是`XElement`或`IEnumerable<XElement>`没有别的。

上面的 XML 没问题（意味着它在传递空纯对象实例的情况下达到断点）但是如果我将“任何东西”放在节点内，我会得到 400 Bad Request 而没有达到任何断点。

```
public interface ISomeInterface
{
    [WebInvoke(Method = "PUT", UriTemplate = "/{key}", BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    void Update(string key, object value);

    [WebInvoke(Method = "DELETE", UriTemplate = "/{key}")]
    void Delete(string key);        
}

public void Update(string key, object value)
{
    this.UpdateSomething(key, value, true);
} 
```

问题是如何创建一个适当的 xml 以使用 Fiddler 将其传递给服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:36:18.300

从服务器端组件使用的模式（如果您使用任何模式）创建模板 xml 是一个好的开始。否则，您可以编写一个简单的 xml，其中包含您在服务中提取的所有属性（手动且容易出错）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-26T15:05:00.347

尝试`BodyStyle = WebMessageBodyStyle.Bare`

# windows - 不连续的 BitBlt 捕获

> ID：14627878
> 
> 赞同：1
> 
> 时间：2013-01-31T14:16:33.483
> 
> 标签：windows, api, capture, interrupt, bitblt

我在我的项目中大量使用 BitBlt。我创建了许多线程，并在每个线程中通过 BitBlt 捕获屏幕。除了以下问题外，它现在工作得很好并且符合预期。

当用户单击正在运行的程序或例如已在任务栏上打开的资源管理器时，就会出现问题。您知道，当您单击任务栏上正在运行的程序时，它会最小化或出现在屏幕上。我正在谈论的问题恰好发生在这个过渡中。在那一刻，就像中断一样，所有线程停止捕获屏幕一秒钟，然后继续捕获。当您在音量控制窗口上向下或向上移动时，也会发生同样的事情。您能否解释一下为什么会发生这种情况以及如何防止这种情况发生？

谢谢。

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:30:44.977

这可能是调度问题。当您激活一个应用程序时，它的优先级会得到短暂的小幅提升（因此它在 UI 中看起来是响应式的）。这种提升可能会持续与动画一样长，并且会暂时抢占您的屏幕捕获线程。

桌面管理器也有可能正在序列化内容，并且您的 bitblts 只是停滞不前，直到动画结束。即使您关闭了 Aero，我相信[桌面窗口管理器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969540(v=vs.85).aspx)可能仍处于合成模式，这具有 Hans Passant 在评论中描述的效果。

如果你想从屏幕上制作视频，我认为依靠 GDI 是不可能的。我强烈建议阅读有关桌面窗口管理器的信息。例如，此[警告](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969536(v=vs.85).aspx)直接适用于您尝试执行的操作：

> 避免读取或写入显示 DC。虽然受 DWM 支持，但由于性能下降，我们不建议这样做。

当您使用 GDI 尝试读取屏幕时，DWM 必须停止正在执行的操作，可能会将桌面的新副本渲染到视频内存，并将数据从视频内存复制回系统内存。DWM 可能会将这些请求视为优先级低于正在进行的动画的请求，因此当它响应 BitBlt 时，动画已经结束。

这个[问题](https://stackoverflow.com/questions/4112831/how-to-make-screen-capture-video-using-direct-show-net-library)表明带有屏幕捕获过滤器的 DirectShow 可能是要走的路。

# c++ - 使用 Qt 开发 C++ 程序

> ID：14627885
> 
> 赞同：1
> 
> 时间：2013-01-31T14:16:50.243
> 
> 标签：c++, qt, licensing

我可以在 C++ 中使用 Qt 开发一个程序，如果用户愿意，可以在其中捐赠一些钱吗？窗口某处会有一个小小的捐赠按钮。

当我使用 Qt 并且用户有机会捐赠时，我必须在哪个许可证下发布我的程序？

捐赠计划不是商业计划，对吧？所以我不必购买 Qt 许可证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:17:57.283

由于 Qt 采用 LGPL 许可证，因此您甚至可以使用它制作商业的闭源软件。唯一的限制是，如果您更改 Qt 库中的某些内容，则必须发布这些更改

# jquery - 灯箱：如何在 cboxLoadedPanel 中注入 html

> ID：14627888
> 
> 赞同：0
> 
> 时间：2013-01-31T14:16:55.017
> 
> 标签：jquery, wordpress, lightbox

为这个非常笼统的问题道歉。

我的 wordpress 网站正在使用灯箱（我什至不知道它存在多少个版本）。我想打开一个灯箱窗口来显示嵌入延迟加载的页面片段。

我目前正在使用的网站使用一个模板，其中灯箱是通过简码提供的，并且仅使用简码我无法使其正常工作。事实上，虽然我已经能够注入代码，但一旦我单击链接以弹出灯箱，框的内容就是当前页面，而不是我可以在 HTML 代码中正确看到的片段。

如果我使用普通的 html 标记，以及几个链接到灯箱代码的“渲染”版本的额外 div，一切都很好。

我希望这在某种程度上确实有意义，并且有人可以提供解决方案的提示。

最好的安德里亚

# ruby-on-rails - Ruby on Rails：如何覆盖 Rails 模型中字段的比较方法？

> ID：14627890
> 
> 赞同：0
> 
> 时间：2013-01-31T14:16:58.310
> 
> 标签：ruby-on-rails, ruby, model, comparison, overriding

```
class House < ActiveRecord::Base
{
    attr_acccessible :title, :address
} 
```

house.title 的值包括 5、5A、8、8/1、16 等。即有一个整数前缀主要确定排序顺序，如果它们相同，我需要使用后缀（“A”或“ /1" 等）等。如果我将标题作为字符串进行排序，则排序顺序将不正确（“16”<“8/1”）。

我可以覆盖此特定字段的比较运算符吗？我应该将它存储为两个不同的字段，但如果有的话，使用后缀显示完整的标题？前缀 0 仍然不能正确解决问题，因为后缀可以改变长度。

感谢有关正确方法的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:35:40.013

你可以像这样声明你的方法：

```
class House < ActiveRecord::Base
{
  attr_acccessible :title, :address 

def is_number?
  true if Float(self) rescue false
end

} 
```

您可以使用以下方法进行检查：

```
is_number?(mystring) 
```

这只是一个想法，我没有测试过。

# android - 使用robotium滚动时单击所有列表视图元素

> ID：14627894
> 
> 赞同：2
> 
> 时间：2013-01-31T14:17:11.443
> 
> 标签：android, listview, robotium

我有一个包含很多元素的listView，即我们必须向下滚动才能看到所有元素。现在我想做的是，单击所有 listView 元素。我怎样才能做到这一点。现在，我正在使用以下代码，但它不会自动滚动。请帮忙。

```
ListView l = solo.getCurrentListViews().get(0);
        assertNotNull("No list views!", l);
        assertTrue("No items in list view!", l.getChildCount() > 0);
        // Get the last list item
        View v = l.getChildAt(l.getChildCount());
        System.out.println("getChildCount: " + l.getChildCount());

        int i = 1;
        while (i <= l.getChildCount()) {
            solo.clickInList(i);

            solo.goBack();

            i++;

        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T07:57:35.763

我之前曾在稍微不同的状态下使用这些辅助函数来处理列表视图所需的大部分内容：

```
public View getViewAtIndex(final ListView listElement, final int indexInList, Instrumentation instrumentation) {
    ListView parent = listElement;
    if (parent != null) {
        if (indexInList <= parent.getAdapter().getCount()) {
            scrollListTo(parent, indexInList, instrumentation);
            int indexToUse = indexInList - parent.getFirstVisiblePosition();
            return parent.getChildAt(indexToUse);
        }
    }
    return null;
}

public <T extends AbsListView> void scrollListTo(final T listView,
        final int index, Instrumentation instrumentation) {
    instrumentation.runOnMainSync(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(index);
        }
    });
    instrumentation.waitForIdleSync();
} 
```

有了这些，您的方法将是：

```
ListView list = solo.getCurrentListViews().get(0);
for(int i=0; i < list.getAdapter().getCount(); i++){
    solo.clickOnView(getViewAtIndex(list, i, getInstrumentation()))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T16:34:44.783

看起来您的代码，正如当前实现的那样，在控制循环和处理点击时只考虑可见的列表项。重要的是要注意两件事的行为：

首先，Android 中有一个称为视图回收的概念，它有助于在处理 ListView 时节省内存。仅创建当前在屏幕上的视图，一旦它们滚出屏幕，它们将被重新填充新数据。因此，在 ListView 上调用`getChildCount`和之类的方法`getChildAt`只会对可见项执行这些操作。要查找有关填充列表的数据的信息，您可以调用ListView 适配器上的`getCount()`或等方法。`getItem()`

其次，该`clickInList()`方法是 1-indexed，相对于列表的当前位置，并且只能用于可见项。据我所知，它永远不会自动滚动您的列表。这意味着`clickInList(2)`在列表顶部时调用将单击第二个项目，但是`clickInList(2)`当第 30 项位于列表顶部时再次调用将单击第 32 个。

了解这两件事后，您的解决方案将需要考虑所有列表数据，并且在进行点击时可能会更加精确。以下是我将如何重写您的 while 循环以确保您能够处理列表中的每个项目，希望这会有所帮助：

```
ListAdapter adapter = l.getAdapter();
for(int i=0; i < adapter.getCount(); i++) 
{
    //Scroll down the list to make sure the current item is visible
    solo.scrollListToLine(l, i);

    //Here you need to figure out which view to click on.
    //Perhaps using adapter.getItem() to get the data for the current list item, so you know the text it is displaying.

    //Here you need to click the item!
    //Even though you're in a list view, you can use methods such as clickOnText(), which might be easier based on how your adapter is set up

    solo.goBack();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T17:35:01.877

它应该可以帮助您（未经测试）：

```
public void clickAllElementsOnListView(int index) {
    ListView listView = solo.getCurrentListViews().get(index);
    count = listView.getAdapter() != null ? listView.getAdapter().getCount() : 0;
    for (int i = 0; i < count; i++) {
        scrollListToLine(listView, i);
        solo.clickInList(1, index);
        solo.goBack();
    }
}

protected void scrollListToLine(final ListView listView, final int line) {
    getInstrumentation().runOnMainSync(new Runnable() {
        public void run() {
            listView.setSelection(line);
        }
    });
} 
```

# c# - Selectionchanged 事件处理程序中 Listview 中选定行的列

> ID：14627896
> 
> 赞同：1
> 
> 时间：2013-01-31T14:17:17.433
> 
> 标签：c#, .net, wpf, listview

这是一个非常简单的问题，但我发现的所有网络解决方案都不起作用

使用选择更改事件是否很好我希望事件仅在我鼠标单击行时触发，否则我可以滚动浏览所有列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:36:07.490

我从未测试过，但我认为您可以使用带有“单击”事件的简单 RelayCommand 来管理它。

# java - 理解正则表达式

> ID：14627898
> 
> 赞同：2
> 
> 时间：2013-01-31T14:17:26.247
> 
> 标签：java, regex

此表达式计算字符串以查看每个字符是否都是数字。我不明白`-?`。我知道这`?`意味着一次或一次，但我不确定在它前面放置破折号是什么意思。

```
-?\d+ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T14:18:45.117

这是必需的，因为整数可能是负数，在这种情况下它将以减号 ( `-`) 开头。因此，您在这里所做的是检查 1 个或多个数字的序列，可选地以单个减号开头。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T14:19:33.043

它不是一个特殊字符。破折号允许负数。

# android - 三星 S3 中 onActivityResult(int requestCode, int resultCode, Intent data) 中的相机意图数据为空

> ID：14627900
> 
> 赞同：13
> 
> 时间：2013-01-31T14:17:37.197
> 
> 标签：android

**问题：**我 `onActivityResult(int requestCode, int resultCode, Intent data)` 在三星 S3 中获取相机意图的数据为空。但在其他一些设备上运行良好。我定制了获取数据的代码并在网络上搜索了这个问题，但没有发现任何有用的东西。

**代码 ：**

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == TAKE_CAMERA && data != null && data.getData() != null)  

           else if (requestCode == TAKE_CAMERA) {
        if (resultCode != RESULT_OK) return;
        Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setDataAndType(tempFileUri, "image/*");

        intent.putExtra("outputX", 90);
        intent.putExtra("outputY", 90);
        intent.putExtra("aspectX", 1);
        intent.putExtra("aspectY", 1);
        intent.putExtra("scale", true);
        intent.putExtra("return-data", true);
        startActivityForResult(intent, CROP_CAMERA);
    } else if (requestCode == CROP_CAMERA && data != null) {
        Bitmap photo = data.getExtras().getParcelable("data");
        try {
            FileOutputStream out = new FileOutputStream(tempFileUri.getPath());
            photo.compress(Bitmap.CompressFormat.JPEG, 90, out);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        if (photo != null) {
            imagePhoto.setImageBitmap(photo);

            <my code>
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-12T09:01:47.680

如果您提供 MediaStore.EXTRA_OUTPUT，则意图为空，但您将在您提供的文件中包含照片 (Uri.fromFile(f))。

我希望下面的链接为您提供解决方案。它对我有用。

[http://mylearnandroid.blogspot.in/2014/02/multiple-choose-custom-gallery.html](http://mylearnandroid.blogspot.in/2014/02/multiple-choose-custom-gallery.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:46:30.527

我也遇到了同样的问题，并通过以下方式解决了它，它肯定会帮助你解决一次：

对于解决方案，我参考了以下链接来解决问题：

[三星 Galaxy S3 相机解决方案](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/)

在调用捕获的图像时编写以下代码：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, PICK_FROM_CAMERA); 
```

并通过 OnActivityResult() 方法中的以下方式获取您的 URI：

```
if (resultCode != RESULT_OK)
            return;

        switch (requestCode) {
        case PICK_FROM_CAMERA:
            Log.i("TAG", "Inside PICK_FROM_CAMERA");

            // Describe the columns you'd like to have returned. Selecting from
            // the Thumbnails location gives you both the Thumbnail Image ID, as
            // well as the original image ID

            try {
                Log.i("TAG", "inside Samsung Phones");
                String[] projection = {
                        MediaStore.Images.Thumbnails._ID, // The columns we want
                        MediaStore.Images.Thumbnails.IMAGE_ID,
                        MediaStore.Images.Thumbnails.KIND,
                        MediaStore.Images.Thumbnails.DATA };
                String selection = MediaStore.Images.Thumbnails.KIND + "=" + // Select
                                                                                // only
                                                                                // mini's
                        MediaStore.Images.Thumbnails.MINI_KIND;

                String sort = MediaStore.Images.Thumbnails._ID + " DESC";

                // At the moment, this is a bit of a hack, as I'm returning ALL
                // images, and just taking the latest one. There is a better way
                // to
                // narrow this down I think with a WHERE clause which is
                // currently
                // the selection variable
                Cursor myCursor = this.managedQuery(
                        MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                        projection, selection, null, sort);

                long imageId = 0l;
                long thumbnailImageId = 0l;
                String thumbnailPath = "";

                try {
                    myCursor.moveToFirst();
                    imageId = myCursor
                            .getLong(myCursor
                                    .getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));
                    thumbnailImageId = myCursor
                            .getLong(myCursor
                                    .getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));
                    thumbnailPath = myCursor
                            .getString(myCursor
                                    .getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));
                } finally {
                    // myCursor.close();
                }

                // Create new Cursor to obtain the file Path for the large image

                String[] largeFileProjection = {
                        MediaStore.Images.ImageColumns._ID,
                        MediaStore.Images.ImageColumns.DATA };

                String largeFileSort = MediaStore.Images.ImageColumns._ID
                        + " DESC";
                myCursor = this.managedQuery(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                        largeFileProjection, null, null, largeFileSort);
                String largeImagePath = "";

                try {
                    myCursor.moveToFirst();

                    // This will actually give yo uthe file path location of the
                    // image.
                    largeImagePath = myCursor
                            .getString(myCursor
                                    .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
                    mImageCaptureUri = Uri.fromFile(new File(
                            largeImagePath));

                } finally {
                    // myCursor.close();
                }
                // These are the two URI's you'll be interested in. They give
                // you a
                // handle to the actual images
                Uri uriLargeImage = Uri.withAppendedPath(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                        String.valueOf(imageId));
                Uri uriThumbnailImage = Uri.withAppendedPath(
                        MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
                        String.valueOf(thumbnailImageId));

                // I've left out the remaining code, as all I do is assign the
                // URI's
                // to my own objects anyways...
            } catch (Exception e) {

                Log.i("TAG",
                        "inside catch Samsung Phones exception " + e.toString());

            }

            try {

                Log.i("TAG", "URI Normal:" + mImageCaptureUri.getPath());
            } catch (Exception e) {
                Log.i("TAG", "Excfeption inside Normal URI :" + e.toString());
            }

            //doCrop();

            break; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:23:30.630

我通过告诉相机活动将图像保存在 SD 卡上解决了这个问题：

```
tempImageNameUri = "some temporary name";
i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
i.putExtra(MediaStore.EXTRA_OUTPUT,tempImageNameUri);
i.putExtra("return-data", true);
startActivityForResult(i,SOME_CONSTANT); 
```

当调用的活动完成后，`onActivityResult`从临时路径中取出 SD 卡中的项目并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T13:11:16.750

您可能已经找到了问题的解决方案，但这会对某人有所帮助。以下是创建的博客链接，`Commonsware`该链接是关于拍摄照片后图像的裁剪。他在其中说，使用动作`com.android.camera.action.CROP`可能无法在所有不同类型的设备中完美运行。

这是[链接](http://commonsware.com/blog/2013/01/23/no-android-does-not-have-crop-intent.html)

# iphone - NSFetchResultsController，将新数据填充到表格视图中

> ID：14627901
> 
> 赞同：1
> 
> 时间：2013-01-31T14:17:36.880
> 
> 标签：iphone, ios, core-data, tableview, uirefreshcontrol

我正在尝试实现`UIRefreshControl`代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIRefreshControl *refreshController = [[UIRefreshControl alloc] init];
    [refreshController addTarget:self action:@selector(refresh:) forControlEvents:UIControlEventValueChanged];
    [self setRefreshControl:refreshController];
}

- (void)refresh:(id)sender
{
    NSLog(@"Freshing");
    //populate new data into the table view
} 
```

我正在使用`NSFetchResultsController`. 那么，如何将新数据填充到表格视图中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:32:19.663

出乎意料的简单。`NSFetchedResultsController`负责获取表视图的数据，因此：

```
[self.tableView reloadData]; 
```

如果您仍然获得“旧”数据，并且您按照 Apple 样板代码对获取的结果控制器进行了延迟实例化，则在上面添加这一行：

```
self.fetchedResultsController = nil; 
```

除了将其设置为 nil 之外，您还可以让现有的 FRC 再次执行其获取请求（这更有效）：

```
[self.fetchedResultsController performFetch:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:44:49.080

获取数据后，您必须重新加载表

```
[yourTableView reloadData]; 
```

# android - “陈旧的全局参考”是什么意思以及如何存储作业并在线程之间传递它们？

> ID：14627902
> 
> 赞同：1
> 
> 时间：2013-01-31T14:17:40.033
> 
> 标签：android, java-native-interface

我最近开始使用我的 Android JNI 应用程序以 API 级别 14 为目标，并立即发现了[此处](http://android-developers.blogspot.com/2011/11/jni-local-reference-changes-in-ics.html)描述的问题。

未能通过显式管理本地引用来解决问题（在我的实验结束时出现本地引用表溢出），我决定简单地切换到全局引用。现在，我遇到了该文章中未描述的“尝试使用过时的全局引用”问题。

这就是我想要做的：有一个对象有一个`jobject`s 的容器。每当 Java 调用我的本机方法并传递我需要存储以供以后使用的引用时，我都会为其创建新的全局引用`jobject`，将全局引用添加到容器并存储其索引。每当我需要使用时，`jobject`我都会通过索引来获取它。这种方法有什么问题？

PS 每当我调用 JNI 方法时，我都会`JNIEnv`对调用线程使用正确的方法。进行 JNI 调用的线程附加到 JVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:22:40.903

> 无法通过显式管理本地引用来解决问题（在我的实验结束时出现本地引用表溢出）

我在您的代码中闻到了更深层次的问题。如果您知道在从当前 JNI 调用返回之前手动正确地创建和删除它们的所有本地引用，则本地引用表溢出根本不会发生。本地 ref 创建[可能非常微妙](https://stackoverflow.com/questions/11109497/android-jni-error-app-bug-local-reference-table-overflow-max-512)，不仅仅是`FindClass`.

无论如何，如果你想让它与全局引用一起工作（考虑到你描述的使用场景，这似乎是正确的做法）我怀疑这一点：你的“容器”有时也需要删除那些存储的引用，而不仅仅是我猜加了。你确定你正在移除正确的，并调用`DeleteGlobalRef`正确的，而不是其他留在容器中的？换句话说，对于代码中的每个`NewGlobalRef`代码，请确保您知道相关的位置`DeleteGlobalRef`，并且您对何时以及为何调用它充满信心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T03:50:59.443

让您的 Java 方法将对包含的作业对象的引用传递给每个本机方法。这样它总是自动正确的，根本不需要变成 a `GlobalRef`，所以你不会得到局部变量表溢出，根本不用担心`DeleteGlobalRef()`等等。

# java - 如何使用 Grizzly 2.2.X 设置会话超时？

> ID：14627906
> 
> 赞同：1
> 
> 时间：2013-01-31T14:17:48.967
> 
> 标签：java, webserver, grizzly

我正在使用嵌入式`Grizzly 2.2.X`Web 服务器。我想知道在哪里可以设置默认会话超时的会话配置。使用普通的 Web 容器很容易做到这一点。但是，我仍然无处可做`Grizzly`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:37:57.220

您可以在 HttpSession 对象上调用 setMaxInactiveInterval(int)。这可能是最简单的，因为 Grizzly 2.2.x 目前不使用部署描述符，所以在 HttpSessionListener.sessionCreated() 中调用 setMaxInactiveInterval()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:19:38.160

```
GrizzlyWebServer server;

//do your things 
```

server.getSelectorThread().setKeepAliveTimeoutInSeconds(timeoutSeconds);

# python - 如何从python中的字符串中提取数字

> ID：14627907
> 
> 赞同：1
> 
> 时间：2013-01-31T14:17:49.837
> 
> 标签：python, regex, django

我有一个来自 db 的字符串，例如：

```
"any string coming from db[090876]" 
```

我只想获取数字数据并使用它。在这种情况下，我只想`090876`. 我怎样才能在 Python/Django 中做到这一点？我试过用're'但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:19:08.930

```
In [74]: import re

In [75]: re.findall('\d+',"any string coming from db[090876]")
Out[75]: ['090876'] 
```

或仅在括号之间与`db`之前的数字是安全的：

```
In [76]: re.findall('db\[(\d+)\]',"any string coming from db[090876]")
Out[76]: ['090876'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:57:30.690

```
x="any string coming from db[090876]"
word_ends=True
num_groups=[]
num=''
for i in x:

    try:
          int(i)
          num+=i
          word_ends=False

    except:

          if word_ends == False:
          num_groups.append(num)
          num=''
          word_ends=True 
```

# java - SWT DateTime 奇怪的行为

> ID：14627908
> 
> 赞同：0
> 
> 时间：2013-01-31T14:17:54.640
> 
> 标签：java, swt

我正在使用 SWT DateTime 小部件并得到了一个非常奇怪的行为。如果我选择“二月”、“四月”或“六月”月份中的任何日期，则显示的日期是我选择的日期，但月份为“一月”。在我的数据库中保存了正确的日期，只有我的编辑器中显示的日期是错误的。其他月份工作正常。以下示例是我如何在“日期时间”对象中设置“日期”对象。

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(date);
dateTime.setYear(calendar.get(Calendar.YEAR));
dateTime.setMonth(calendar.get(Calendar.MONTH));
dateTime.setDay(calendar.get(Calendar.DAY_OF_MONTH)); 
```

我无法解释这种行为。对我来说，这似乎是 DateTime 小部件中的一个错误。任何提示如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T12:06:10.057

现在解决了这个问题。此 bugzilla 线程中描述了该解决方案：bugs.eclipse.org/bugs/show_bug.cgi?id=190254。诀窍是在我的 DateTime-Widget 中设置月份之前设置 day_of_month

# c# - asp.net 从 Jquery UI 对话框中获取值返回到第一个表单

> ID：14627918
> 
> 赞同：2
> 
> 时间：2013-01-31T14:18:27.853
> 
> 标签：c#, jquery, asp.net, postback, jquery-ui-dialog

我有下面的 JQuery 脚本

```
<script type="text/javascript">
     $(function() {
         $("#no-email-popup").dialog(
             {
                 autoOpen: false,
                 buttons: {
                     "ok": function() {
                     alert($('#new_email').val());
                     alert(window.top.$("#new_email_label.").val());
                   //  alert(window.top.$("#<%= new_email_label.ClientID %>").val());
                         $(this).dialog("close");

                     },
                     "cancel": function() {
                         $(this).dialog("close");
                     }
                 }

             }
        );
     });
</script> 
```

和模态的 asp.net 是

```
<div id="no-email-popup">
<label>Enter Email: </label>
<input type="text" id="new_email" />
</div> 
```

我想从 Pop up 中获取值返回到 asp.net 页面并分配给那里的标签

```
<asp:Label ID="new_email_label" runat="server">test top window label</asp:Label> 
```

我发现我什至无法更改此标签的值

请帮助如何获得顶级 asp.net 页面的价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:24:58.337

使用`.val()`on a`<label/>`不会为您提供所述标签的内部 html。您需要使用`.html()`来检索它或`.html("something")`设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:26:04.233

在（或代替）您`alert`的 s 之后，尝试：`$("#new_email_label").val($("#new_email").val());`

# git - 如何使用 Git 查找导出文件夹的相应修订版

> ID：14627930
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:06.663
> 
> 标签：git, version-control, tortoisegit

如何使用 Git 找到导出的源文件夹的相应修订版？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:22:59.987

我会使用`git-bisect`一个自定义脚本来区分您的导出和结帐作为*回调*。

# backbone.js - Backbone.js - 在选择更改时更新集合

> ID：14627932
> 
> 赞同：1
> 
> 时间：2013-01-31T14:19:09.237
> 
> 标签：backbone.js

我是骨干新手，有点卡住了。基本上我想在选择更改时更新集合。目前在更改选择时我调用 Collection.fetch() 但这会在视图中附加新模型。我的印象是，当调用 fetch 时，它会删除以前的模型，这应该会导致相关视图被删除，还是我不正确？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T14:23:06.647

默认情况下会这样做，除非您指定`{add: true}`.

将元素附加到视图中的原因是因为您在不清除旧元素的情况下附加它们。当`reset`事件在您的视图中触发时，您可以考虑在追加之前清空容器。

请记住，使用主干是您自己处理 DOM 操作。视图不会与您的集合和模型一起自动更新。

# vb.net - 如何在 VB.Net 中测试 mdb 列类型

> ID：14627934
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:09.783
> 
> 标签：vb.net, datacolumn

我有以下代码

```
Dim dbMnt As OleDb.OleDbConnection
dbMnt = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\temp\data.mdb")
dbMnt.Open()

Dim qdfTabCols As DataTable = dbMnt.GetOleDbSchemaTable(System.Data.OleDb.OleDbSchemaGuid.Columns, New Object(){Nothing, Nothing, "Table1")

Dim dr As DataRow
For Each dr In qdfTabCols
    Msgbox(dr("TABLE_NAME") & " " & dr("COLUMN_NAME") & " " & dr("DATA_TYPE"))
    'In here I would like to test the column data type
Next 
```

在“For Each”内部，我想测试各种列数据类型并以不同方式处理它们。我以前只使用：dbText、dbMemo、dbDate。您如何在 VB.net 中编写此“If”语句？

```
If (dr("DATA_TYPE") = ????) Then 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:22:02.653

如果我没记错的话，`DATA_TYPE`将包含[OleDbType Enum](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbtype.aspx)。试试这个 ：

```
If (dr("DATA_TYPE") = OleDb.OleDbType.DBDate) Then 
```

# c# - c#通过转义引号在JSON字符串中插入变量

> ID：14627935
> 
> 赞同：5
> 
> 时间：2013-01-31T14:19:11.317
> 
> 标签：c#, json, variables, escaping

我有这个 JSON 双引号字符串，我想在里面插入变量 idValue

```
string json = @"  
{
    ""Request"": 
    {
       ""ElementList"": 
        {                                         
        ""id"": ""idValue""                                        
        }                         
     }
 } 
```

在常规字符串中，这可以通过 "+idValue+" 来完成，但是当我有这些双引号时，我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T14:21:09.823

你可以这样做 ：

```
string json = @"  
{
    ""Request"": 
    {
       ""ElementList"": 
        {                                         
        ""id"": """+ idValue + @"""                                        
        }                         
     }
 }"; 
```

但就我个人而言，我更喜欢使用 Json 库来对我的东西进行字符串化。

编辑：在字符串中添加了缺少的引号。

# mule - 如何将记录从 Mule 插入 GreenPlum 数据库？

> ID：14627937
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:21.423
> 
> 标签：mule, greenplum, mule-studio

这个问题是[How to read CSV file and insert data into PostgreSQL using Mule ESB, Mule Studio](https://stackoverflow.com/questions/13911296/how-to-read-csv-file-and-insert-data-into-postgresql-using-mule-esb-mule-studio/13924363#comment19218217_13924363)的一个变体。早些时候我们有 PostgreSQL，但现在它已更改为 GreenPlum 数据库。但是 PostgreSQL 在 Mule Studio 中有原生支持，但在 GreenPlum 数据库中没有。

我该怎么做这个插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:09:42.830

来自[GreenPlum 文档](https://sites.google.com/a/elixirtech.com/wiki/repertoire/data/jdbc-datasource/jdbc-datasource-connectivity-with-greenplum)：

> 由于 Greenplum 数据库基于 PostgreSQL，最终用户使用用于 PostgresSQL 的 JDBC 驱动程序与 Greenplum 数据库（通过主服务器）进行交互。

看来您可以使用 PostgreSQL 连接器并将其指向 GreenPlum 主服务器。

# javascript - jQuery从文本字段接收值

> ID：14627945
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:36.817
> 
> 标签：javascript, jquery

我的*HTML*：

```
<div class="textForm">
<input type="radio" name="txtNumber" value="10" checked="checked" />10
<input type="radio" name="txtNumber" value="20" />20
<input type="radio" name="txtNumber" value="other" />other
<input type="text" name="other_field" id="other_field" onblur="checktext(this);"/>
</div>
<div class="formText">
<input type="radio" name="txtSpace" value="RJ" checked="checked"
/>Space 1.
<br />
<input type="radio" name="txtSpace" value="SM" />Space 2.
<br />
</div>
<h3>Output:</h3>
<div id="output"></div> 
```

这是我的*JavaScript*代码

```
$(document).ready(function () 
{
$("input[name='txtNumber'],input[name='txtSpace']").change(function () 
{
    console.log("changed");
    if ($("input[name='txtSpace']:checked").val() == 'RJ' && $("input[name='txtNumber']:checked").val() == '10')
        $("#output").text("RJ, 10 = 20");
    else if ($("input[name='txtSpace']:checked").val() == 'RJ' && $("input[name='txtNumber']:checked").val() == '20')
        $("#output").text("RJ, 20 = 40");
    else if ($("input[name='txtSpace']:checked").val() == 'RJ' && $("input[name='txtNumber']:checked").val() == 'other') // HERE I M CONFUSED
WHAT SHALL BE THE CODE?
    else if ($("input[name='txtSpace']:checked").val() == 'SM' && $("input[name='txtNumber']:checked").val() == '10')
        $("#output").text("SM, 10 = 5");
    else if ($("input[name='txtSpace']:checked").val() == 'SM' && $("input[name='txtNumber']:checked").val() == '20')
        $("#output").text("SM, 20 = 10");
    else if ($("input[name='txtSpace']:checked").val() == 'SM' && $("input[name='txtNumber']:checked").val() == 'other') // HERE AGAIN I M CONFUSED
        $("#output").text("SM , ???? = Dont know");
});
}); 
```

我想要实现的是在单击“其他”单选按钮“其他字段”时打开“其他字段”。现在，我想使用“other_field”中的值（即用户输入）并在我的计算中使用这些数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:24:59.083

您可以`other_field`使用

```
 var textVal = $('#other_field').val();
    console.log(textVal) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:25:38.290

您可以使用`$("#other_field").val()`来选择其他输入字段的值。

```
else if ($("input[name='txtSpace']:checked").val() == 'RJ' &&
    $("input[name='txtNumber']:checked").val() == 'other')  {
        var val = parseInt($("#other_field").val(), 10);
        $("#output").text("RJ , " + val " = " + (val * 2));
}
...
else if ($("input[name='txtSpace']:checked").val() == 'SM' &&
    $("input[name='txtNumber']:checked").val() == 'other') {
        var val = parseInt($("#other_field").val(), 10);
        $("#output").text("SM , " + val " = " + (val / 2));
} 
```

# node.js - 没有参考选项的猫鼬填充字段

> ID：14627948
> 
> 赞同：20
> 
> 时间：2013-01-31T14:19:38.533
> 
> 标签：node.js, mongodb, mongoose

我有 3 个架构：

```
var User1Schema = new Schema({
    name: {type:String , trim: true, required: true },
    status: {type:Number, required: true, default:1}
},{collection:"user_1"}); 
```

,

```
var User2Schema = new Schema({
    name: {type:String , trim: true, required: true },
    email: {type: String, required: true, index: {unique: true} },
    status: {type:Number, required: true, default:1}
},{collection:"user_2"}); 
```

和

```
var ConversationSchema = new Schema( {

    participants: [{user:{type: ObjectId, required: true}],
    creator: {type: ObjectId, required: true},

    status: { type:Number, required: true, default:1 }

}, { collection:"conversation" } ); 
```

在 ConversationSchema 中，我有创建者字段，现在有 ref 选项，因为它可以是 User1Schema 或 User2Schema 的类型。

如何使用猫鼬填充创建者字段

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T00:03:39.943

```
Conversation.find().populate('creator', null, 'User2').exec(callback) 
```

[文档](http://mongoosejs.com/docs/api.html#query_Query-populate)不清楚。将很快更新。

此外，在 v3.6 中，这方面的语法会更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-27T10:09:52.230

截至 2019 年 3 月 27 日，这样做的方法是：

1）将要填充的字段设置为 ObjectId**而不**提供参考。

```
var eventSchema = new Schema({
  name: String,
  // The id of the corresponding conversation
  // Notice there's no ref here!
  conversation: ObjectId
}); 
```

2）在使查询与查询一起传递模式的模型时：

```
Event.
  find().
  populate({ path: 'conversation', model: Conversation }).
  exec(function(error, docs) { /* ... */ }); 
```

参考：[https ://mongoosejs.com/docs/populate.html#cross-db-populate](https://mongoosejs.com/docs/populate.html#cross-db-populate)

# java - JPA - 执行更新

> ID：14627949
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:39.290
> 
> 标签：java, class, object, jpa, entity

我有以下代码：

```
package testingjpa;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;

public class Main
{

    public static void main(String[] args)
    {
        EntityManagerFactory emFactory = Persistence.createEntityManagerFactory("TestingJPAPU");

        EntityManager em = emFactory.createEntityManager();

        Query query = em.createQuery("UPDATE Passengers p SET p.name = 'Robert' WHERE p.id = 2");

        query.executeUpdate();
        em.close();
    }
} 
```

这段代码的问题在于它抛出了一个 TransactionRequiredException。实体类工作正常，因为我尝试使用其他代码并且它工作得很好。请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:26:45.870

您应该自己启动并提交/回滚事务，因为容器管理的事务在您的情况下不可用。

首先，您应该从 EntityManager 询问 UserTransaction。查询后，您应该提交或回滚您的事务。

您还应该做一些体面的连接处理：在 finally 块中关闭实体管理器，以避免在代码抛出异常时发生资源泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:22:30.090

```
@Resource private UserTransaction mytx;
public static void main(String[] args)
    {
        EntityManagerFactory emFactory = Persistence.createEntityManagerFactory("TestingJPAPU");

        EntityManager em = emFactory.createEntityManager();

        mytx.begin();
        Query query = em.createQuery("UPDATE Passengers p SET p.name = 'Robert' WHERE p.id = 2");

        query.executeUpdate();
        mytx.commit()
        em.close();
    } 
```

# string - 字典中的文本链接

> ID：14627950
> 
> 赞同：2
> 
> 时间：2013-01-31T14:19:46.410
> 
> 标签：string, algorithm

我计划实现以下内容：让我们考虑一下我有以下形式的字典：

Bob Dylan，AC / DC，Amboy Dukes，George Thorogood 和 The Destroyers。

所以字典包含 1 个标记、2 个标记和最多 n 个标记的单词。

现在，当我有内容（一段）时，如果单词是上述字典的一部分，我想链接内容。例如：如果我的内容是以下形式：

> 鲍勃·迪伦（Bob Dylan）于 1941 年 5 月 24 日在明尼苏达州德卢斯的圣玛丽医院出生，原名罗伯特·艾伦·齐默尔曼（Robert Allen Zimmerman），并在明尼苏达州的希宾 (Hibbing) 苏必利尔湖以西的梅萨比铁山脉 (Mesabi Iron Range) 长大。

在段落中，我们看到使用了 Bob Dylan，而 Bob Dylan 是字典的一部分。是否有一种算法可以有效地识别字典中的数百万条记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:24:00.707

您可能正在寻找[Aho-Corasick 字符串匹配算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)。

该算法从您的字典中构建一个自动机，并在文本流中查找与该自动机匹配的匹配项。

# sql - TSQL：包含 0-9 之间的所有数字的子字符串，除了 5

> ID：14627951
> 
> 赞同：2
> 
> 时间：2013-01-31T14:19:48.963
> 
> 标签：sql, sql-server, tsql

我在 case 语句中使用 substring 函数返回 'B0' - 'B9' 之间的所有数字

```
WHEN SUBSTRING (postcode, 1, 2) like 'B[0-9]' 
```

但我不想在此列表中返回数字“B5”。我可以让它像这样工作

```
WHEN SUBSTRING (postcode, 1, 2) like 'B[0-4]'
WHEN SUBSTRING (postcode, 1, 2) like 'B[6-9]' 
```

但是有没有办法将它添加到如下一行？

```
WHEN SUBSTRING (postcode, 1, 2) like 'B[0-9]' and not like 'B5' 
```

**编辑：**

如果你处理 0-100 之间的数字，你会怎么做，这样 sql 就像

```
WHEN SUBSTRING (postcode, 1, 3) like 'B[0-9][0-9]' 
```

但你不想包括 16 和 17？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T14:21:23.033

```
WHEN SUBSTRING (postcode, 1, 2) like 'B[012346789]' -- No "5" 
```

[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)模式很棒。迷你正则表达式，如果你愿意的话。

要将数字执行到十位或更多位，您可能需要考虑将这些值放入可用于 a或的表`join`中。`exists``in`

或者，由于我们将此列的数字部分视为数字而不是字符串，这表明它们可能更好地存储为两列：一列用于 alpha，一列用于数字。

除非对架构进行任何更改，否则您可以临时删除字母字符，以便将它们与一系列数字进行比较，例如：

```
where cast(replace(postcode, 'B', '') as int) between 0 and 15
    or cast(replace(postcode, 'B', '') as int) between 18 and 100

where cast(right(postcode, len(postcode) - 1) as int) between 0 and 15
    or cast(right(postcode, len(postcode) - 1) as int) between 18 and 100 
```

这些只是几种可能性。您将最了解如何处理您的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T14:21:52.930

您可以尝试有两个范围，从中删除 5：

```
WHEN SUBSTRING (postcode, 1, 2) like 'B[0-46-9]' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:25:13.033

用来`^`表示不.. 见[喜欢](http://msdn.microsoft.com/en-us/library/ms179859.aspx)...

但为什么不试试

```
`WHEN SUBSTRING (postcode, 1, 2) like 'B[0-4]' Or   
      SUBSTRING (postcode, 1, 2) like 'B[6-9]'` 
```

或者您可以将范围放在相同的括号中

```
`WHEN SUBSTRING (postcode, 1, 2) like 'B[0-46-9]' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T14:39:04.780

对于个位数的情况（您的原始问题），您已经得到了很多很好的答案。但是，如果没有真正的正则表达式，您将无法解决多位数问题。

它接缝你有一个要排除的值列表。我这种情况下你可以使用这个：

```
WHEN SUBSTRING (postcode, 1, 3) like 'B[0-9][0-9]'
 AND SUBSTRING (postcode, 1, 3) NOT IN ('B16', 'B17') 
```

如果“excludables”列表在表中，请`NOT EXISTS`改用：

```
WHEN SUBSTRING (postcode, 1, 3) like 'B[0-9][0-9]'
 AND NOT EXISTS(SELECT 1 FROM dbo.excludables AS ex WHERE ex.val = SUBSTRING (postcode, 1, 3)) 
```

# solr - Solr：如何区分通过 DIH 导入的多个实体

> ID：14627953
> 
> 赞同：1
> 
> 时间：2013-01-31T14:19:50.667
> 
> 标签：solr, lucene, dataimporthandler

将 DataImportHandler 与 SqlEntityProcessor 一起使用时，我希望有多个定义进入具有不同查询的相同模式。

如何同时搜索这两种类型的实体，同时区分它们的来源。例子：

```
<document>
<entity name="entity1" query="query1">

    <field column="column1" name="column1" />
    <field column="column2" name="column2" />

</entity>
<entity name="entity2" query="query2">

    <field column="column1" name="column1" />
    <field column="column2" name="column2" />

</entity>
</document> 
```

如何从实体 1 和实体 2 获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:25:10.353

只要您的架构字段（例如 column1、column2）在不同实体之间兼容，您就可以运行 DataImportHandler，它将从两个查询中填充 Solr 集合。

然后，当您查询时，您将看到所有实体组合在一起。

如果您想标记哪个实体来自哪个来源，我建议添加另一个字段（例如类型）并[使用 TemplateTransformer](http://wiki.apache.org/solr/DataImportHandlerFaq#How_would_I_insert_a_static_value_into_a_field_.3F)在每个实体定义中为其分配不同的静态值。

还要小心使用 clean 命令。默认情况下，它会从索引中删除所有内容。当您从多个来源填充索引时，您需要确保它不会删除太多。使用[preImportDeleteQuery](http://wiki.apache.org/solr/DataImportHandler#Schema_for_the_data_config)仅删除您为该实体设置的类型字段中具有相同值的条目。

# java - 将包含双精度的对象转换为字符串，然后再返回双精度

> ID：14627958
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:54.260
> 
> 标签：java

我有一个包含成对产品价格的二维对象数组**（Object[][] 数据） 。**
我尝试通过以下方式将这些值传递给 Map。

```
private String myPairs = "";
private String[] l, m;

for (int i=0; i<data.length; i++){
    myPairs += (String)data[i][0] + ":" + String.valueOf(data[i][1]) + ",";
}

Map<String, Double> pairs = new java.util.HashMap<>();
l = myPairs.split(",");

for (int i=0; i<l.length; i++){
    m = l[i].split(":");
    pairs.put((String)m[0], Double.parseDouble((String)m[1]));             
} 
```

我得到一个`java.lang.ArrayIndexOutOfBoundsException`. 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:23:36.790

尝试

```
for (int i=0; i<l.length-1; i++){
    m = l[i].split(":");
    pairs.put((String)m[0], Double.parseDouble((String)m[1]));             
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:33:42.810

你的问题在这里：

```
pairs.put((String)m[0], Double.parseDouble((String)m[1])); 
```

第一个 for 循环创建一个以 . 结尾的字符串`,`。例如`"foo:0.1,bar:0.2,"`.

然后，你分开了`,`。因此，上面的示例将返回`["foo:0.1"; "bar:0.2"; ""]`. 由于字符串的最后一个`,`，请注意空字符串值。

最后，对于每个值，您将除以`:`. 它适用于前两个值（即`["foo"; "0.1"]`和`["bar"; "0.2"]`），但最后一个将是一个 1 值数组，包含一个空字符串：`[""]`。

当试图访问数组的第二个值（即索引`1`，因为数组是基于 0 的索引）时，`ArrayIndexOutOfBoundsException`get 被抛出。

* * *

几种解决方案：

在第一个循环中，放置一个添加`,`或不添加的条件：

```
myPairs += (i == 0 ? "" : ",") + (String)data[i][0] + ":" + String.valueOf(data[i][1]); 
```

**或者**在你的第一个循环之后，删除字符串的最后一个字符：

```
myPairs = myPairs.substring(0, myPairs.length() - 1); 
```

**或**在第二个循环中，不要直到最后一个值，而只到*n-1*一个：

```
for (int i=0; i<l.length - 1; i++) 
```

**或者**甚至更好，仅当您不需要在第一个循环中构建的字符串表示时，将所有代码替换为：

```
for (int i=0; i<data.length; i++) {
    pairs.put((String)data[i][0], Double.parseDouble((String)data[i][1])); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:33:20.287

当第一个 for 循环结束时，所有对都用 ',' 和一个额外的 ',' 分隔。所以，l.length 是对数加一。不过，到目前为止，这不应该产生错误。

问题是当你在':'上分割每一对时，最后一个元素`l`等于一个空白字符串。因此，拆分会产生一个 1 元素数组，其中包含一个空白字符串。发生错误是因为您要求`m[1]`.

尽量不要在对的最后一个元素之后添加“，”，问题应该得到解决。

我希望这有帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T14:33:28.223

s的拆分中的最后一个元素`,`是空的（因为你说`+ ","`在第一个循环的最后一次迭代中），所以跳过第二个循环中的最后一个元素。

```
for (int i = 0; i < l.length-1; i++)
{
    m = l[i].split(":");
    pairs.put((String)m[0], Double.parseDouble((String)m[1]));             
} 
```

另请注意，如果提供的字符串包含`:`s 或`,`s，您的算法也可能会引发异常。

注意 - 一种更好的方法（并避免上述情况）就是在第一个循环中执行它，例如：

```
for (int i = 0; i < data.length; i++)
{
    pairs.put((String)data[i][0], Double.parseDouble((String)data[i][1]));
} 
```

# sql-server - 使用pivot将多个值显示到sql server中的列中

> ID：14627959
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:56.507
> 
> 标签：sql-server, sql-server-2008-r2

```
declare @t table 
(
    driver varchar(20),
    roadband varchar(20),
    category varchar(20),
    points int

)   

INSERT INTO @T VALUES( 'Dan'    ,'20 Mph','CAT1',58)
INSERT INTO @T VALUES( 'Dan'    ,'20 Mph',  'CAT2', 0)
INSERT INTO @T VALUES( 'Dan'    ,'20 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'Dan'    ,'30 Mph',  'CAT1', 102)
INSERT INTO @T VALUES( 'Dan'    ,'30 Mph',  'CAT2', 30)
INSERT INTO @T VALUES( 'Dan'    ,'30 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'Dan'    ,'40 Mph',  'CAT1', 6)
INSERT INTO @T VALUES( 'Dan'    ,'40 Mph',  'CAT2', 3)
INSERT INTO @T VALUES( 'Dan'    ,'40 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'Dan'    ,'50 Mph',  'CAT1', 5)
INSERT INTO @T VALUES( 'Dan'    ,'50 Mph',  'CAT2', 0)
INSERT INTO @T VALUES( 'Dan'    ,'50 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'Dan'    ,'60 Mph',  'CAT1', 0)
INSERT INTO @T VALUES( 'Dan'    ,'60 Mph',  'CAT2', 0)
INSERT INTO @T VALUES( 'Dan'    ,'60 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'Dan'    ,'70 Mph',  'CAT1', 0)
INSERT INTO @T VALUES( 'Dan'    ,'70 Mph',  'CAT2', 0)
INSERT INTO @T VALUES( 'Dan'    ,'70 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'John'   ,'20 Mph',  'CAT1', 6)
INSERT INTO @T VALUES( 'John'   ,'20 Mph',  'CAT2', 0)
INSERT INTO @T VALUES( 'John'   ,'20 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'John'   ,'30 Mph',  'CAT1', 1228)
INSERT INTO @T VALUES( 'John'   ,'30 Mph',  'CAT2', 654)
INSERT INTO @T VALUES( 'John'   ,'30 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'John'   ,'40 Mph',  'CAT1', 196)
INSERT INTO @T VALUES( 'John'   ,'40 Mph',  'CAT2', 117)
INSERT INTO @T VALUES( 'John'   ,'40 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'John'   ,'50 Mph',  'CAT1', 6)
INSERT INTO @T VALUES( 'John'   ,'50 Mph',  'CAT2', 14)
INSERT INTO @T VALUES( 'John'   ,'50 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'John'   ,'60 Mph',  'CAT1', 0)
INSERT INTO @T VALUES( 'John'   ,'60 Mph',  'CAT2', 0)
INSERT INTO @T VALUES( 'John'   ,'60 Mph',  'CAT3', 0)
INSERT INTO @T VALUES( 'John'   ,'70 Mph',  'CAT1', 0)
INSERT INTO @T VALUES( 'John'   ,'70 Mph',  'CAT2', 0)
INSERT INTO @T VALUES( 'John'   ,'70 Mph',  'CAT3', 0) 
```

我需要转向`Roadband`和`Category`..

我已经写了查询..需要一些帮助..

```
select * from 
(
   select 
     Driver,  ROADBAND,  category,SUM(points) as Points
   from @t
   where DRIVER is not null
   group by DRIVER ,ROADBAND,CATEGORY
) main
pivot
(
    sum(Points)
    for ROADBAND in ([20 Mph],[30 Mph],[40 Mph],[50 Mph],[60 Mph],[70 Mph])
) pq 
```

现在如何通过路带对每个类别进行支点。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:10:21.247

根据您的问题，我不确定您在列中需要什么值以及行中应该是什么值，所以我编写了两个查询，我希望其中一个能回答您的问题：

```
SELECT  *
FROM    (
            SELECT  category
                    , roadband
                    , SUM(points) points_per_category_roadband
            FROM    @t
            GROUP BY
                    category, roadband
) tbl
PIVOT
(
    SUM(points_per_category_roadband) FOR roadband IN ([20 Mph],[30 Mph],[40 Mph],[50 Mph],[60 Mph],[70 Mph])
) pvt

SELECT  *
FROM    (
            SELECT  roadband
                    , category
                    , SUM(points) points_per_category_roadband
            FROM    @t
            GROUP BY
                    roadband, category
) tbl
PIVOT
(
    SUM(points_per_category_roadband) FOR category IN ([CAT1],[CAT2],[CAT3])
) pvt 
```

# android - 如何在 Android 应用程序中从 sdcard 获取完整路径？

> ID：14627963
> 
> 赞同：0
> 
> 时间：2013-01-31T14:19:59.920
> 
> 标签：android, sd-card

你好，我使用了下面的代码，我在 android 应用程序的 android 3.0 平板电脑模拟器中运行项目，我得到路径 /mnt/sdcard/ 但没有得到完整路径。如何解决它？请帮助我！！下面是我的代码

```
![package com.hope.project;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileFilter;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;
import android.app.Activity;
import android.content.Context;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    WebView myWebView;
    TextView mDisplay;
    AsyncTask<Void, Void, Void> mRegisterTask;
    String name;
    String Message;
    String deviceId;
    String regId;
    IntentFilter gcmFilter;
    SharedPreferences sharedPref;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myWebView = (WebView) findViewById(R.id.webView1);

        final JavaScriptInterface myJavaScriptInterface = new JavaScriptInterface(
                this);
        myWebView.addJavascriptInterface(myJavaScriptInterface,
                "AndroidFunction");

        WebSettings settings = myWebView.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setDatabaseEnabled(true);
        settings.setDomStorageEnabled(true);
        settings.setAllowFileAccess(true);
        settings.setBuiltInZoomControls(true);
        settings.setUseWideViewPort(true);
        settings.setJavaScriptCanOpenWindowsAutomatically(true);
        settings.setLoadWithOverviewMode(true);
        myWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

        myWebView.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {

                // handle stuff here
                // e.g. view.loadUrl(url);
                Log.v("log", " on ovverRide " + url);
                return true;
            }

            public void onPageFinished(WebView view, String url) {
                // dismiss the indeterminate progress dialog
                Log.v("log", "onPageFinished: " + url);
                myWebView.setEnabled(false);

            }
        });

        myWebView.loadUrl("file:///android_asset/www/index.html");
    /*  File urlName= Environment.getExternalStorageDirectory().getAbsoluteFile();
        Log.v("log_tag", "urlNameDownload "+urlName);*/

        /* File file\[\] = Environment.getExternalStorageDirectory().listFiles(); 
         for (File f : file)
            {
                if (f.isDirectory()) { 
                    String uri=f.getPath().substring(f.getPath().lastIndexOf("/") + 1);
                    Log.v("Name", uri);
                    Log.v("Name", f.getPath()+ "");
                    Log.v("Name", f.getAbsolutePath()+ "");

                }
            }*/

        File dir = new File("mnt/sdcard/");

        File\[\] files = (new File("mnt/sdcard/")).listFiles();

        // This filter only returns directories
        FileFilter dirFilter = new FileFilter() {
            public boolean accept(File dir) {
                return dir.isDirectory();
            }
        };

        files = dir.listFiles(dirFilter);

        for (int i=0; i<files.length; i++) {
            if(files\[i\].getAbsolutePath().contains("Download"))
              Log.v("log_tag","directory path : " + files\[i\].getAbsolutePath().substring(files\[i\].getAbsolutePath().lastIndexOf("/") +1));
        }
    }

    protected void onDestroy() {
        super.onDestroy();
    }

    public class JavaScriptInterface {
        Context mContext;

        JavaScriptInterface(Context c) {
            mContext = c;
        }

        public void DownloadUrl(String url) {
            Log.v("log", "login main url " + url);

            String file_url = url;

            new DownloadFileFromURL().execute(file_url);
            /*
             * String url_new = "http://"+url; Intent i = new
             * Intent(Intent.ACTION_VIEW); i.setData(Uri.parse(url_new));
             * startActivity(i);

*/
        }
    }

    class DownloadFileFromURL extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Bar Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            // showDialog(progress_bar_type);
        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected String doInBackground(String... f_url) {
            int count;
            Log.v("log", "login main url\[0\] " + f_url\[0\]);
            try {
                URL url = new URL(f_url\[0\]);
                name = f_url\[0\].substring(f_url\[0\].lastIndexOf("/") + 1);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);

                // Output stream to write file
                // OutputStream output = new
                // FileOutputStream("/sdcard/downloadedfile.jpg");
                OutputStream output = new FileOutputStream(
                        Environment.getExternalStorageDirectory() + "/Download/" + name);

                // OutputStream output = new
                // FileOutputStream("/sdcard/downloadedUrl.mp4");
                byte data\[\] = new byte\[1024\];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress("" + (int) ((total * 100) / lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }

                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }

            return null;
        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... progress) {
            // setting progress percentage
            // pDialog.setProgress(Integer.parseInt(progress\[0\]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after the file was downloaded
            // dismissDialog(progress_bar_type);
            // Displaying downloaded image into image view
            // Reading image path from sdcard

            /*
             * Log.v("log","login main url\[0\] " +
             * Environment.getExternalStorageDirectory().toString()); String
             * videoPath = Environment.getExternalStorageDirectory() +"/"+name;
             * Intent i = new Intent(MainActivity.this,
             * VideoPlayActivity.class); i.putExtra("videoPath", videoPath);
             * startActivity(i);
             */

            Toast.makeText(MainActivity.this, "DownLoad Is Completed",
                    Toast.LENGTH_LONG).show();
        }

    }

} 
```

![我的 sdcard 屏幕截图如下：](../Images/0a38b467637092c6195a960ab6ecc107.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:25:59.957

`mnt/sdcard/`您应该使用[Environment](https://developer.android.com/reference/android/os/Environment.html)对象，而不是硬编码。

具体来说：

```
File dir = Environment.getExternalStorageDirectory(); 
```

将为您提供一个文件对象，该对象自动指向运行它的设备的外部存储的正确位置。

此外，您已经发布了整个活动。其中绝大多数与您遇到的问题无关。将来，如果您取出与您遇到的问题特别相关的一小部分代码，您更有可能在 StackOverflow 上获得很好的帮助。它使正在回答的人更容易弄清楚您的情况。

# ruby-on-rails - Ruby_on_Rails 使用 Rspec 测试数据库

> ID：14627977
> 
> 赞同：-1
> 
> 时间：2013-01-31T14:20:39.440
> 
> 标签：ruby-on-rails, testing, rspec

实际上我是 Rails 测试的新手

我想知道rails测试中涵盖的所有步骤。？

任何人都可以帮助我了解**专业测试所涉及的步骤**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:38:50.803

查看 Gavin 链接的 Rails 指南。也可以看看这本书： http: [//pragprog.com/book/achbd/the-rspec-book](http://pragprog.com/book/achbd/the-rspec-book)。它涵盖了如何使用 rspec，并涵盖了测试应用程序的各个部分。

我也很喜欢 Rails 3 的实际应用，它教授 Rails 的基础知识和各种主题，同时在整本书中进行了由内而外的测试。Rails 4 in action 也是一个开发中的版本。

至于我的回答：

通常，在编写代码之前先进行测试会使过程变得更好、更容易。事后编写测试并不是那么好，即使它确实为您提供了覆盖范围。当添加功能成为您常规工作流程的一部分时，这非常好。如果您有要添加的新功能，例如发送确认电子邮件的用户注册。您可以先编写集成测试。它将用户描述为通过注册表单，正确填写，然后检查是否发送了电子邮件。

从那里您可以测试用户模型的内部结构，确保您为此构建的方法能够按预期工作。然后，当您的测试变为绿色时，将另一个场景添加到登录无效的集成测试中。

# android - 使用 DialopFragment 创建的日期选择器也显示日历

> ID：14627983
> 
> 赞同：0
> 
> 时间：2013-01-31T14:20:58.270
> 
> 标签：android, calendar, datepicker, android-dialogfragment

我是 Android 编程新手，我正在使用使用 DialogFragment 创建的基本 Datepicker。我的 DatePicker 在点击等时显示良好，但问题是它也显示日历视图。我不想要这个。我一直在寻找一天的解决方案，我现在不愿意使用自定义 Datepickers，因为我想先熟悉基础知识。

我还阅读了一些建议，例如

```
yourDatepicker.setCalendarViewShown(false); 
```

或在 XML 中将其设置为 false。但是我的 DatePicker 来自一个 DialogFragment，那么如何访问这个 datepicker？如何设置其最终视图？我不希望对源代码进行更改，因为我仍在学习。

我的日期选择器代码：

```
public class DueDatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
            final Calendar c = Calendar.getInstance();
            int year = c.get(Calendar.YEAR);
            int month = c.get(Calendar.MONTH);
            int day = c.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day){    
        // Code to set Due Date TextField to the selected date.
        TextView reminderText = (TextView)getActivity().findViewById(R.id.addTaskFormDueDateHolder);

        String dueDateStr = year + "-" + month + "-" + day;
        reminderText.setText(dueDateStr);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:00:59.887

我使用了 Datepicker Dialog Fragment，在对话框中显示日期选择器。

这是我的完整代码

MainActivity.java

```
package com.example.testmydrag;

import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.DatePicker;
import android.support.v4.app.FragmentActivity;
import android.app.Dialog;
import android.app.DatePickerDialog;
import android.support.v4.app.DialogFragment;

import java.util.Calendar;

public class MainActivity extends FragmentActivity {

EditText mEdit;
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void selectDate(View view) {

        DialogFragment newFragment = new SelectDateFragment();
        newFragment.show(getSupportFragmentManager(), "DatePicker");

    }

    public void setTheDate(int year, int month, int day) {

        mEdit = (EditText)findViewById(R.id.Text);
        mEdit.setText(month+"/"+day+"/"+year);
    }
    /*
     * Date Picker Dialog
     */
    public class SelectDateFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {
        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {

            final Calendar c = Calendar.getInstance();
            int yy = c.get(Calendar.YEAR);
            int mm = c.get(Calendar.MONTH);
            int dd = c.get(Calendar.DAY_OF_MONTH);

            DatePickerDialog dialog = new DatePickerDialog(getActivity(),this,c.YEAR, c.MONTH, c.DATE);

            /*Calendar View if you want to Remove Set it to False*/
            dialog.getDatePicker().setCalendarViewShown(true);

            /*Spinner View if you want to Show Set it to True*/
            dialog.getDatePicker().setSpinnersShown(false);

            dialog.setTitle("Pick a date");
            return dialog;
        }
        public void onDateSet(DatePicker view, int yy, int mm, int dd) {

            setTheDate(yy, mm+1, dd);
        }
    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <EditText android:text="@+string/date_text" 
        android:id="@+id/Text" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" />
    <Button 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="@+string/pick_date" 
        android:onClick="selectDate" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:56:54.273

我找到了一个临时解决方案，尽管我对此并不完全满意。为此，您需要最低 SDK 版本 11。

基本上我在我的 onAcreateDialog 函数中添加了对 getDatePicker() 的调用，在 DueDatePickerFragment 中提到，然后更改了它的设置。我不明白为什么我需要这样做，以及为什么它在我的模拟器中显示得如此不正确。似乎没有其他人有这个问题。任何解释将不胜感激。这是代码：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState){
    Log.i("DUEDATEPICKERDIALOG", "Inside onCreateDIALOG");
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);
    DatePickerDialog datePickerDialogObj = new DatePickerDialog(getActivity(), this, year, month, day);

    DatePicker dueDatePicker = datePickerDialogObj.getDatePicker();
    float scaleVal = (float) 0.6;
    dueDatePicker.setScaleX(scaleVal);
    dueDatePicker.setScaleY(scaleVal);
    dueDatePicker.setCalendarViewShown(false);

    return datePickerDialogObj;
} 
```

希望这可以帮助某人。

# c - const 关键字的使用

> ID：14627991
> 
> 赞同：0
> 
> 时间：2013-01-31T14:21:24.317
> 
> 标签：c, optimization, gcc, constants, c99

我知道`const`在函数参数上使用关键字可以提供更好的性能，但我总是忘记添加它。编译器（在这种情况下为 GCC）是否足够聪明，可以注意到变量在函数期间永远不会改变，并像我`const`显式添加一样编译它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:28:58.373

你对`const`. 只创建一个*对象* `const`意味着它的值永远不会改变，然后它不仅仅是在函数期间，它*永远不会*改变。

给函数设置参数`const`并不意味着它的值永远*不会*改变，它只是意味着函数[不能通过那个`const`指针](http://ideone.com/3NzrYK)改变值。该值可以以其他方式改变。

例如，看这个函数：

```
void f(const int* x, int* y)
{
    cout << "x = " << *x << endl;
    *y = 5;
    cout << "x = " << *x << endl;
} 
```

请注意，它需要一个`const`指向`x`. 但是，如果你这样称呼它怎么办：

```
int x = 10;
f(&x, &x); 
```

现在，`f`有一个`const`指针，但它指向一个非常量对象。所以*值*可以改变，因为它是指向*同一个*对象`y`的非`const`指针。所有这些都是完全合法的代码。这里没有有趣的事情。

 *因此，您的问题实际上没有答案，因为它完全基于错误的前提。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T15:59:58.083

> 编译器（在这种情况下为 GCC）是否足够聪明，可以注意到变量在函数期间永远不会改变，并像我会显式添加 const 一样编译它？

不必要。例如：

```
void some_function(int *ptr); // defined in another translation unit

int foo(int a) {
    some_function(&a);
    return a + 1;
} 
```

编译器看不到做了什么`some_function`，所以它不能假设它不会修改`a`.

链接时优化也许可以看到`some_function`真正的作用并采取相应的行动，但就这个答案而言，我只会考虑定义`some_function`不可用的优化。

```
int bar(const int a) {
    some_function((int*)&a);
    return a + 1;
} 
```

编译器看不到发生了什么`some_function`，但它*可以*假设 的值`a`无论如何都不会改变。因此，它可以进行任何适用的优化：也许它可以在对 ;`a`的调用中保存在被调用者保存寄存器中`some_function`。也许它在调用之前而不是之后计算返回值，然后 zaps `a`。`some_function`如果修改，该程序具有未定义的行为`a`，因此一旦发生这种情况，从编译器的 POV 来看，它是否使用 . 的“正确”或“错误”值都没有关系`a`。

所以，在这个例子中，通过标记`a`const 你已经告诉编译器一些它无法知道的东西——`some_function`不会修改`*ptr`. 或者无论如何，如果它确实修改了它，那么你不在乎你的程序的行为是什么。

```
int baz(int a) {
    some_function(NULL);
    return a + 1;
} 
```

在这里，编译器可以看到*与标准*相关的所有相关代码。它不知道做什么`some_function`，但它确实知道它没有任何标准的访问方式`a`。因此，是否标记为 const 应该没有区别，`a`因为编译器知道它无论如何都不会改变。

当然，调试器支持会使这种情况复杂化——我不知道`gcc`和的情况如何`gdb`，但至少在理论上，如果编译器想要支持你使用调试器并`a`手动修改，那么它可能不会将其视为不可修改. 这同样适用于`some_function`使用特定于平台的功能爬上堆栈并弄乱`a`. 平台不必*提供*此类功能，但如果提供，则与优化冲突。

我见过旧版本的 gcc（3.x，不记得 x）未能进行某些优化，而我未能创建局部`int`变量`const`，但在我的情况下，gcc 4 确实进行了优化。无论如何，我想到的情况不是参数，它是一个用常量值初始化的自动变量。

`a`在我所说的任何内容中，作为参数都没有什么特别之处——它也可以是函数中定义的任何自动变量。请注意，使用常量值获得初始化效果的参数的唯一方法是使用常量值调用函数，并让编译器观察该*调用*的值。这往往只在函数被内联时发生。因此，对函数的内联调用可以对它们应用额外的优化，而“out-of-line”函数体不符合条件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T14:30:50.350

*const与**inline*非常相似，只是对编译器的提示，并不保证任何性能提升。*const*更重要的任务是保护程序员免受他们自己的伤害，这样他们就不会不愿意在不应该修改的地方修改变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T14:31:08.090

1）真的 const**不会**直接影响你的表现。在某些情况下，它可能会进行更简单的指向分析（因此更喜欢`const char*`）`char*`，但 const 更多的是关于代码的语义和可读性。

2) CV 限定类型在 C 和 C++ 中形成不同的类型。所以你的编译器，即使它从默认的 const 中获益，也不会这样做，因为它会改变类型并可能导致令人惊讶的奇怪事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T14:31:54.000

作为优化的一部分，编译器正在深入研究何时读取或写入内存位置。因此编译器非常擅长检测变量何时未更改（const）以及何时更改。当变量为 const 时，优化器不需要你告诉他。

尽管如此，您应该始终在适当的时候使用 const。为什么？因为它使界面更清晰，更容易理解。当您更改不想更改的变量时，它有助于检测错误。*

# asp.net-mvc - 在 MVC4 中运行查询

> ID：14627992
> 
> 赞同：0
> 
> 时间：2013-01-31T14:21:28.120
> 
> 标签：asp.net-mvc

我正在尝试在 Controller 中运行一个查询，该查询基本上返回一个人输入问题的次数。我在 SQL Server 上设置了一个表，而 EnteredBy 是我试图对其运行查询的列。到目前为止，我没有运气。我可以创建一个返回 EnteredBy 列中所有内容的查询，但现在我只希望它返回一个特定的人，这样我就可以运行一个计数器。这是我的代码：

控制器：

```
public ActionResult DisplayCount()
    {
        var enteredBy = from m in db.Table
                        where m.EnteredBy.Equals("Persons Name")
                        select m;

        return View(enteredBy);
    } 
```

DisplayCount 的视图：

```
<html>
<head>
<meta name="viewport" content="width=device-width" />
<title>DisplayCount</title>

<script>

</script>

</head>
<body>

<div>
Entered by: <br />

@foreach (var m in Model)
{

    @m.EnteredBy <br />

}
</div>

</body>
</html> 
```

我知道我现在没有任何计数器，但我只想在每次遇到时逐行返回视图中的具体人员姓名。

如果有人能回答我这个问题，那将非常有帮助，因为 MVC 和 Razor 引擎对我来说是新主题，所以我已经坚持了大约 2 周。

谢谢

# c++ - C ++ 11如何在编译时识别原子类型（通过mtl或定义）？

> ID：14627995
> 
> 赞同：4
> 
> 时间：2013-01-31T14:21:38.847
> 
> 标签：c++, boost, c++11, atomic

我想知道是否可以确定给定类型是否是原子的（这意味着您可以在没有互斥锁的情况下对其执行操作，而不会将自己置于危险之中）。

我想知道是否有一些`atomic(type)`定义可以确定类型是否是原子的。为了创建类似的东西`DEFINE( (int)(do) );`，会创建如下伪代码：

```
 int _do;

#if !atomic(int)
    mutex do_mutex;
#endif   

   void set_do(int do)
   {
#if atomic(int)
       _do = do;
#else
       lock(do_mutex);
       _do = do;
#endif
   } 
```

如果类型是原子的（如果需要，使用 boost），有什么方法可以检查定义/mtl 级别。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T15:05:53.463

您不能在预处理时执行此类操作，因为该确定需要有关类型及其名称的语义信息，而这些信息在预处理期间不可用。

`is_atomic<T>`实现必须提供模板化类型特征，但即使在 C++11 中也不可用。它的实用性非常有限，因为在完全支持线程的平台上，拥有本身是原子的类型是相当不寻常的。

此外，甚至可能无法仅从类型来确定这一点，因为某些类型根据其内存对齐方式具有不同的原子性属性（没有强制要求该类型的原子性对齐）。

相反，您应该使用提供的实现`std::atomic<T>`，它应该为给定平台上可用的原子操作（具有给定的内存限制）提供最有效的实现。

通过使用特定于平台的内存栅栏或原子访问指令，即使底层内存模型为**没有**“裸”本机类型提供原子性，此类实现也可能能够提供无锁原子类型。

您可以使用`std::atomic<T>::is_lockfree()`来确定这样的实现是否需要在后台使用锁。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T16:06:17.523

标题`<atomic>`提供`ATOMIC_INT_LOCK_FREE`和朋友，用于所有各种大小的内置类型。这些是预处理器宏，如果类型的原子变体从不无锁，则定义为 0，如果有时无锁（例如，如果目标系统支持），则定义为 1，如果始终无锁，则定义为 2。例如，如果`std::atomic<int>`总是无锁，但`std::atomic<long long>`只是有时，则为`ATOMIC_INT_LOCK_FREE`2，然后`ATOMIC_LLONG_LOCK_FREE`为 1。指针类型由 . 覆盖`ATOMIC_POINTER_LOCK_FREE`。

您可以使用这些宏来决定在非无`int`锁时使用普通和互斥`std::atomic<int>`锁，但在大多数情况下，您最好只编写`std::atomic<int>`并让编译器处理它。

# grails - Grails 左外连接查询 HQL 或条件质询

> ID：14627996
> 
> 赞同：0
> 
> 时间：2013-01-31T14:21:42.373
> 
> 标签：grails, hql, grails-orm

我是 hql 的新手，尝试了几种我能找到的组合，但我似乎无法为左连接构造正确的 HQL 查询。

我有以下域模型：

```
class Company {
    static hasMany = [employees: Employee]
}

class Employee {
    static belongsTo = [
            Company
    ]
} 
```

因此，员工对公司一无所知。现在我想创建一个 hql 查询，让遇到***没有公司的员工***。在 sql 中，我已经使用左连接成功创建了查询，但我似乎无法创建一个标准或 hql 查询来给我一个正确的结果。

关于我如何实现结果的任何线索或提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:48:33.267

给你，这有效：

```
Employee.executeQuery("""
Select e
from Employee e
where e not in (Select ce from Company c left join c.employees ce)
""") 
```

# entity-framework - 如何仅更新修改后的值（EntityFramework 5.0）？

> ID：14627999
> 
> 赞同：8
> 
> 时间：2013-01-31T14:21:43.693
> 
> 标签：entity-framework, c#-4.0, entity-framework-5

我有这个实体，想使用实体框架更新

```
 EmployeeModel employee = new EmployeeModel
    {
        Id = 1000, //This one must 
        FirstName = modifiedValue,
        Email = modifiedValue, 
        LastName = originalValue,
        Phone = originalValue
    }; 
```

要更新的代码

```
_db.ObjectStateManager.ChangeObjectState(employee, EntityState.Modified);  
_db.SaveChanges(); 
```

这是更新后的 SQL 语句

```
Update Employee set Id=1138,FirstName='modifiedValue',Email='modifiedValue',LastName= 'OriginalValue',phone='originalValue' where Id=1138 
```

但我期待这个

```
Update Employee set FirstName='modifiedValue', Email='modifiedValue' where Id=1138. 
```

我不知道我在这里缺少什么。请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-16T10:38:10.047

这个问题在处理 DTO 时很常见。从数据库中获取员工实体，映射到 DTO 并通过网络发送。客户端然后修改此 DTO 并将其发送回服务器。

当您触摸（设置）EF 实体上的属性时，EF 将假定该值已更改。即使旧值和新值完全相同。当您将 DTO 映射到**新**实体并将其附加到 EF 并将其状态更新为“已修改”时，也会出现同样的问题。

使用自动映射器：

```
// This will result in the full update statement
var employee = AutoMapper.Mapper.Map<EmployeeDto, Employee>(dto);

// This will result in a smaller update statement (only actual changes)
var employee = dbContext.Employees.Find(dto.Id);
AutoMapper.Mapper.Map(dto, employee); 
```

或者，手动（我会避免这样做，但只是为了完整起见）：

```
// This will result in a smaller update statement (only actual changes)
var employee = dbContext.Employees.Find(dto.Id);
if (employee.Email != dto.Email )
    employee.Email = dto.Email; 
```

可能还有其他一些方法可以解决这个问题......但是正确使用 AutoMapper 和 Entity Framework 绝对是最简单的方法之一。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T13:46:33.907

这是我得到的解决方案

```
 var entity = _db.CreateObjectSet<Employee>();
 entity.Detach(employee);
 entity.Attach(employee);

 foreach (string modifiedPro in employeeModel.ModifiedProperties){
  _db.ObjectStateManager.GetObjectStateEntry(employee).SetModifiedProperty(modifiedPro);}

  _db.SaveChanges(); 
```

只修改了 sql update 语句中的值

```
Update Employee set FirstName='modifiedValue', Email='modifiedValue' where Id=1138. 
```

如果有人知道比这更好的答案，请发表您的建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-31T06:06:08.193

**你可以试试这个方法**

```
public update(Person model)
{
    // Here model is model return from form on post
    var oldobj = db.Person.where(x=>x.ID = model.ID).SingleOrDefault();

    var UpdatedObj = (Person) Entity.CheckUpdateObject(oldobj, model);

    db.Entry(oldobj).CurrentValues.SetValues(UpdatedObj);
}

public static object CheckUpdateObject(object originalObj, object updateObj)
{
   foreach (var property in updateObj.GetType().GetProperties())
   {
      if (property.GetValue(updateObj, null) == null)
      {
         property.SetValue(updateObj,originalObj.GetType().GetProperty(property.Name)
         .GetValue(originalObj, null));
      }
   }
   return updateObj;
} 
```