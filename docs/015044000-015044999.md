# StackOverflow 问答 15044000-15044999

# cocoa - 如何读取 NSAutoresizingMaskLayoutConstraint 的日志输出？

> ID：15044002
> 
> 赞同：13
> 
> 时间：2013-02-23T18:26:29.870
> 
> 标签：cocoa, logging, autolayout, autoresizingmask

我在控制台中看到以下输出

```
"<NSAutoresizingMaskLayoutConstraint:0x100510500 h=--& v=&-- H:|-(0)-[NSView]
    (Names: NSView:0x1016ab760, '|':NSClipView:0x1016a26b0 )>
    (Actual Distance - pixels):0" 
```

通常我了解如何阅读日志消息以了解约束。但是 autoresizingMask 约束总是让我感到困惑。日志输出中的以下字符如何对应于自动调整大小的掩码？

`h=--& v=&-- H:|-(0)-[NSView]`

我观看了几个 WWDC 2012 视频，这些视频并没有完全解释阅读自动调整大小的蒙版布局约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T11:16:19.127

jrturton 在他的回答中描述了调试输出的第一部分（见评论）

> h=--& v=&--

对于所有自动布局约束，第二部分都是相同的：

> H:|-(0)-[NSView]

这只是提供有关掩码如何变成约束的详细信息。“H”表示水平，“|” 表示您的视图所在的容器（在本例中为 NSClipView），-(0)- 表示它被限制为视图左侧的 0 像素（在本例中为通用 NSView）。

因此，添加了一个约束，将视图的左边缘直接绑定到其父视图。（由于右边缘不受约束，它会在微风中飘来飘去，就像自动调整大小蒙版所说的那样。）

# node.js - 如何从文档数组中删除子文档 ?

> ID：15044003
> 
> 赞同：1
> 
> 时间：2013-02-23T18:26:33.240
> 
> 标签：node.js, mongodb

在遇到以下问题之前，我以为我对 mongodb 已经很熟悉了。我有以下格式的文档集合：

```
{
    "_id" : ObjectId("4f876104d976649cbb1f6cf2"),
    "course_list" : [
        {
            "course_id" : "AL101",
            "Grade" : "A"
        },
        {
            "course_id" : "PS101",
            "Grade" : "B"
        },
        {
            "course_id" : "EL101",
            "Grade" : "B"
        }
    ],
    "user_name" : "jim"
} 
```

我想从数组“course_list”中删除所有子文档，其中“等级”不等于“A”。

我尝试了一堆不同的查询，但没有任何效果。但是后来，我认为以下方法肯定会起作用，但它也没有：

```
db.courses.update({'user_name' : 'jim'}, {$pull : {'course_list' : {'Grade' : {$ne : 'A'}}}}) 
```

运行上述命令时，我得到以下数组：

```
Cannot apply $pull/$pullAll modifier to non-array 
```

谁能指出我正确的方向，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:31:09.047

谢谢你的评论。我的查询确实是正确的。正如您正确指出的那样，该错误是因为 course_list 不是数组的文档。

# javascript - 通过 Z-index 在其他图像之间进行 JavaScript 转换

> ID：15044004
> 
> 赞同：1
> 
> 时间：2013-02-23T18:26:50.667
> 
> 标签：javascript, image, loops, z-index, transition

我有 30 张文件名相同的图像，但以 1 到 30 范围内的数字结尾。每个图像都有一个相同范围的 z-index，将它们放在同一个 div 中。现在，我希望顶部的图像到底部，同时我将其他图像的 z-index 连续增加 1，直到 id="image30" 的图像到达某个位置，循环停止。当我在 Firefox 中执行此代码时，我得到一个弹出窗口，要求我停止脚本，但是当我检查控制台是否有错误时，没有任何错误。

```
function placeImage(x) {
    var div = document.getElementById("div_picture_right");
    div.innerHTML = ""; // clear images

    for (counter=1;counter<=x;counter++) {
        var image=document.createElement("img");
        image.src="borboleta/Borboleta"+counter+".png";
        image.width="195";
        image.height="390";
        image.alt="borboleta"+counter;
        image.id="imagem"+counter;
        image.style.position="absolute";
        image.style.zIndex=counter;
        div.appendChild(image);
    }
};

var animaRight = function(x) {
    var imageArray = [];
    for (counter=0;counter<x-1;counter++) {
        imageArray[counter] = document.getElementById("imagem"+counter+1);
        }
    setTimeout(function() {
        for (var number in imageArray) {
            if (imageArray[number].style.zIndex==number+1) {
                imageArray[number].style.zIndex=imageArray.length-counter;
            }
        }
    }, 1000/x);
};

window.onload = function() {
    placeImage(30);
    document.getElementById("div_picture_right").onclick=function() {animaRight(30)}
}; 
```

* * *

如果您需要更多代码来帮助分析我的问题，我很乐意对其进行编辑。我很欣赏可以查看代码进行分析的示例，而不是我可以复制粘贴的解决方案。方向是最受欢迎的！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:43:02.920

您的循环正在检查ultimateImagem。也许您的意思是检查图像？例如：

```
 while (image.style.zIndex != x-1) {
      ...
    } 
```

您的 while 循环不会修改 ultimaImagem，因此检查`ultimaImagem.style.zIndex`会创建一个无限循环。

此外，正如我在评论中所说，您可以移动顶部图像，无需重新索引其他图像。例如，给 imagem1 一个 z-index 1001，给 imagem2 一个 z-index 1002，等等。然后你的代码就变成了：

```
var ultimaImagem = document.getElementById("imagem"+x);
ultimateImagem.style.zIndex -= x; 
```

# c - 我的 for 循环打印出垃圾 - 我找不到错误

> ID：15044008
> 
> 赞同：-3
> 
> 时间：2013-02-23T18:27:33.723
> 
> 标签：c

我试图在互联网上找到一些东西，但我还没有找到答案，你能帮我吗？

你看，我的代码要打印出几个矩阵的和，结果总体上是好的，但是在打印出来的时候，我们可以看到一些奇怪的值......我怎样才能把它们去掉？在这里你可以[看到我所说的截图](https://dl.dropbox.com/u/12602331/captura.png)。

整个代码在这里：

```
#include <stdio.h>

void printsimulaciodeu(int matlefa[50][50]) {
    int ii, jj;
    for (ii = 0; ii < 50; ii++) {
        for (jj = 0; jj < 50; jj++) {
            if(matlefa[ii][jj] == 0) {
                printf("   ");
            }
            else if (matlefa[ii][jj] == 10) {
                printf(" * ");
            }
            else {
                if(matlefa[ii][jj] == 49) printf(" 1 ");
                else {
                    while (matlefa[ii][jj] > 49) {
                        matlefa[ii][jj] = matlefa[ii][jj]-48;
                    }
                    if (matlefa[ii][jj] > 9) {
                        printf(" %d", matlefa[ii][jj]);
                    }
                    else {
                        printf(" %d ", matlefa[ii][jj]);
                    }
                }
            }
        }
        printf("\n");
    }
}

int main(){
    int tabla[50][50]={
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
    };
    int k;
    int i, j;
    int disparos_pos[10] = {1, 5, 14, 22, 37, 48, 43, 40, 28, 19};
    char disparos_dir[10]= {'i','i','d','i','d','d','i','d','d','i'};
    int matsuma[50][50];
    for (k = 0; k < 10; k++) {
        int i, j;
        int mataux[50][50];
        for (i = 0; i < 50; i++) {
            for (j = 0; j < 50; j++) {
                mataux[i][j] = tabla[i][j];
            }
        }
        int pos = disparos_pos[k];
        int dir = disparos_dir[k];
        i = 0;
        j = pos;
        while (i < 49) {
            if (mataux[i+1][j] == 0) {
                mataux[i+1][j] = 49;
                ++i;
            }
            else {
                if (dir == 'i') {
                    if (mataux[i+1][j] != 0) {
                        if (mataux[i][j-1] == 0) {
                            mataux[i][j-1] = 49;
                            --j;
                        }
                        else {
                            dir = 'd';
                        }
                    }
                }
                if (dir == 'd') {
                    if (mataux[i+1][j] != 0) {
                        if (mataux[i][j+1] == 0) {
                            mataux[i][j+1] = 49;
                            ++j;
                        }
                        else {
                            dir = 'i';
                        }
                    }
                }
            }
        }
        int m, n;
        for (m = 0; m < 50; m++) {
            for (n = 0; n < 50; n++) {
                matsuma[m][n] = mataux[m][n] + matsuma[m][n];
            }

        }
    }
    if (k == 10) printsimulaciodeu(matsuma);
} 
```

非常感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:07:45.700

你`matsuma[50][50]`这样声明：

```
int matsuma[50][50]; 
```

对它的第一个引用位于主循环的底部附近：

```
 int m, n;
    for (m = 0; m < 50; m++) {
        for (n = 0; n < 50; n++) {
            matsuma[m][n] = mataux[m][n] + matsuma[m][n]; //<< here
        }
    } 
```

所以今天的谜团是......当它执行时那个数组中有什么？这些值是不确定的，您从未初始化它们。

像这样声明你的数组：

```
int matsuma[50][50] = {{0}}; 
```

或者如果你的编译器比泥土更老，

```
int matsuma[50][50];

memset(matsuma, 0, sizeof(matsuma));
.... 
```

注意：对于 也是如此`mataux`，但我把它留给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:57:51.517

代码看起来正确，尝试在函数开头打印 matlefa[49][46],matlefa[49][47],matlefa[49][48],matlefa[49][49] 的值。

这将给出是否处理所需值的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:45:50.307

有句话我学得很辛苦：“垃圾进，垃圾出”

给我们一个示例，说明您的数组在函数本身之外被初始化为什么。您的实际问题可能而且很可能从那里开始。

# ruby-on-rails - 如何在发送前修改 actionmailer 电子邮件 html_part

> ID：15044010
> 
> 赞同：2
> 
> 时间：2013-02-23T18:27:42.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, actionmailer, html-email

在我即将发送电子邮件的地方，我拥有一切，但我需要修改所有链接以包含 Google Analytics 属性。问题是，如果我尝试读/写电子邮件的 html_part.body，整个 html 字符串会以某种方式被编码并且不能正确显示电子邮件（即`<html>`变成`&lt;html&gt;`）。我已经在记录器中记录了 html_part.body.raw_source 并且它显示为正确的未编码 HTML，只有在实际发送电子邮件时才会发生编码。

**EBlast.rb (ActionMailer)**

```
def main(m, args={})

    # Parse content attachment references (they don't use helpers like the layout does)
    # and modify HTML in other ways
    m.prep_for_email self

    @email = m # Needed for helper methods in view
    mail_args = {
    :to => @user.email,
    :subject => m.subject,
    :template_path => 'e_blast',
    :template_name => 'no_template'
    }
    mail_args[:template_name] = 'main' if m.needs_template?

    m.prep_for_sending mail(mail_args)
end 
```

**电子邮件.rb**

```
def prep_for_sending(mail_object)

    if mail_object.html_part

    # If I simply do a 'return mail_object', the email sends just fine...
    # but the url trackers aren't applied.

    # Replace the content with the entire generated html
    self.content = mail_object.html_part.body.decoded

    # Add Google analytics tracker info to links in content
    apply_url_tracker :source => "Eblast Generator", :medium => :email

    # Replace the html_part contents
    mail_object.html_part.body = content

    # At this point, mail_object.html_part.body contains the entire
    # HTML string, unencoded. But when I send the email, it gets its
    # entities converted and the email is screwed.

    end

    # Send off email
    mail_object

end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T22:05:41.773

看起来我又在回答我自己的问题了——这周我很开心。

显然，直接设置 body 会创建一些名为“body_raw”的奇怪属性，而不是替换 html_part 的 raw_contents。所以基本上我最终在邮件对象中嵌入了一个重复的部分（我不知道它为什么这样做）。创建一个单独的 Mail::Part 并将其分配给 html_part 只是添加了另一个部分而不是替换 html_part！怎么回事？！

新编辑：暂无关于 String.replace 的最后一句话。看起来它正在工作，但是当我去另一台计算机测试它时，出现了同样的重复问题。

另一个编辑：最后？

在我执行 apply_url_tracker 方法之前，我已经重置了电子邮件的内容（为了更改呈现视图中的所有链接）。我不知道为什么考虑到消息的邮件对象应该已经被渲染，但是将我的方法更改为以下已经修复了电子邮件部分的重复及其随后的“重新编码”。我不再更改内容属性，我只更改了 html_part：

```
def prep_for_sending(message)

    if message.html_part
    # Replace the html raw_source
    message.html_part.body.raw_source.replace apply_url_tracker(message.html_part.body.decoded, :source => "Eblast Generator", :medium => :email)
    end

    message

end 
```

澄清：即使对 mail() 的调用产生了一个具有完全呈现的 HTML/文本部分（即完全呈现的视图）的邮件对象，但更改了这些视图使用的属性（在我的情况下，是“内容”属性）螺丝最后发送。发送前不要修改你的模型，直接修改邮件部分。

# conditional - 如何在 AutoHotKey 脚本中使用“或”？

> ID：15044011
> 
> 赞同：7
> 
> 时间：2013-02-23T18:27:50.070
> 
> 标签：conditional, autohotkey, conditional-statements

我一直在浏览[AutoHotKey 文档](http://www.autohotkey.com/docs/commands/_IfWinActive.htm)，但我没有看到如何在上下文特定的热键中使用“或”的明确用法。在我的设置中，Cygwin 将使用 ahk_class cygwin（当我使用上下文菜单时）或 mintty（当我直接使用 .bat 或 exe 时）启动。

目前，我将热键复制到两个单独的块中，

```
#IfWinActive ahk_class cygwin
...
#IfWinActive
#IfWinActive ahk_class mintty
...
#IfWinActive 
```

有没有办法将它们结合起来？我试过了：

```
#IfWinActive ahk_class cygwin ahk_class mintty
#IfWinActive ahk_class || cygwin ahk_class mintty
#IfWinActive ahk_class or cygwin ahk_class mintty
#IfWinActive ahk_class cygwin || #IfWinActive ahk_class mintty
#IfWinActive ahk_class cygwin or #IfWinActive ahk_class mintty
#IfWinActive (ahk_class cygwin or ahk_class mintty)
#IfWinActive (ahk_class cygwin || ahk_class mintty)
#IfWinActive ahk_class cygwin|mintty
#IfWinActive ahk_class cygwin||mintty 
```

...而且这些似乎都不起作用。[这篇文章](http://www.autohotkey.com/board/topic/29477-ifwinactive-or-winactive/)指出这可以通过组来完成，但我正在寻找一种将它们组合在一个语句中的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T07:26:22.003

好的，最后一个（并经过测试）。

```
#If WinActive("ahk_class ExploreWClass") || WinActive("ahk_class CabinetWClass") 
```

哦，顺便说一句，我使用支持#If 的 AutoHotKey_L！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T21:19:14.397

好吧，我记得，在看到另一个例子后：Define a GroupName with multiple ahk_class entries....

```
GroupAdd, GroupName, ahk_class ExploreWClass
GroupAdd, GroupName, ahk_class CabinetWClass
#IfWinActive ahk_group GroupName 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-10T13:27:37.320

我知道这个问题已经过时了，但是对于那些正在寻找解决方案的人

```
#if WinActive("ahk_class cygwin") or WinActive("ahk_class mintty") 
```

正在工作中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-20T16:29:26.407

您也可以尝试以下方法，我测试过它对我有用（AutoHotkey v1.1.14.01）：

```
SetTitleMatchMode, REGEX

#IfWinActive (cygwin)|(mintty) 
```

这使用了正则表达式的内置 OR 机制。由于某种原因，我无法让小组工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-23T19:06:04.853

你可以试试这个：这是我使用常规 IF 语句执行此操作的方式。

```
#IfWinActive (ahk_class cygwin or ahk_class mintty) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-23T20:50:32.657

我找到了一个使用这种格式的例子：

```
#IfWinActive ahk_class ExploreWClass|CabinetWClass 
```

请参阅：[最佳 AutoHotKey 宏？](https://stackoverflow.com/questions/98597/best-autohotkey-macros)

# c# - visualsvn 程序集参考

> ID：15044014
> 
> 赞同：0
> 
> 时间：2013-02-23T18:28:05.033
> 
> 标签：c#, visual-studio-2012, webforms, visualsvn, assembly-references

我正在使用 Visualsvn 和 Visual Studio 2012 在我自己和两个合作伙伴之间共享一个 webforms 项目。当我们中的一个人创建一个项目而其他人试图打开它时，我们会收到许多程序集引用错误：

![http://dl.dropbox.com/u/4992384/error%20screen%20cap.JPG](../Images/e7bbcbd4c6c308ff4c6f9b9f76810576.png)

这让我觉得当解决方案上传时，它缺少文件。所有用户都在使用 VS2012。

任何人都知道什么会导致这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:32:32.353

您是否检查过您使用的 .Net Framework 版本是否与 dll 相同？看起来他们是不同的。（检查它不在客户资料上）

# google-app-engine - 如何遍历字典并将每个键的值分配给另一个对象中的匹配属性？

> ID：15044016
> 
> 赞同：0
> 
> 时间：2013-02-23T18:28:07.843
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore

我正在尝试遍历字典和实体。dict键与实体属性匹配的地方，我想将键的值分配为属性的值。

我的模型代码是：

```
class myModel(db.Model):
    Property1 = db.IntegerProperty()
    Property2 = db.StringProperty(required=True,choices=set(["this", "that", "other"]))
    Property3 = db.StringProperty() 
```

我的字典是：

```
{u'Property1': u'1234', u'Property2': u'trouble', u'Property3': u'2321'} 
```

我用来遍历这两个对象的代码有效，但是它跳过了模型中的验证。如果我明确分配`myModel.Property2 = 'trouble'`，我会收到 BadValueError。但是，在下面的代码中我没有。

```
for le_attr, le_value in myModel.__dict__.iteritems():
    for key, value in Data[0].items():
        if ('_' + str(key)) == (str(le_attr)):
            myModel.__dict__[le_attr]= value 
```

我的想法是，无论字典中有多少键，只会分配与属性匹配的键，而忽略所有其他键。使用上面的代码，这是可行的。

但是有没有办法做到这一点并且仍然进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:39:50.060

您需要使用[`dir()`](http://docs.python.org/2/library/functions.html#dir)and[`setattr()`函数](http://docs.python.org/2/library/functions.html#setattr)而不是深入`__dict__`结构：

```
for le_attr in dir(myModel)
    if le_attr in Data[0]:
        setattr(myModel, le_attr, Data[0][le_attr]) 
```

# ios - 以编程方式突出显示 UITableView 单元格

> ID：15044018
> 
> 赞同：8
> 
> 时间：2013-02-23T18:28:19.013
> 
> 标签：ios, ipad, uitableview, uisplitviewcontroller

我有一个使用 UISplitViewController 的 iPad 应用程序（左侧是 UITableView，右侧是详细视图）。当您点击它时，我的表格视图会以蓝色突出显示选定的单元格。

当我调用以下方法时，单元格被选中但未以蓝色突出显示：

```
[self.tableView selectRowAtIndexPath:indexPath animated:YES scrollPosition:UITableViewScrollPositionTop]; 
```

我花了几天时间摆弄各种委托方法和黑客，试图让单元格以编程方式突出显示，就像它被点击一样。我做不到。

我几乎设法做到了这一点：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (shouldHighlightCell)
    {
        NSIndexPath *indexPathForCellToHighlight = [NSIndexPath indexPathForRow:0 inSection:0];

        if ([indexPath isEqual:indexPathForCellToHighlight])
        {
            cell.selected = YES;
            shouldHighlightCell = NO;
        }
    }
} 
```

只要我也有这个，它就可以工作（否则即使点击另一个单元格，它也会保持选中状态）：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSIndexPath *ip = [NSIndexPath indexPathForRow:0 inSection:0];

    if ([[self.tableView cellForRowAtIndexPath:ip] isSelected])
    {
        [[self.tableView cellForRowAtIndexPath:ip] setSelected:NO];
    }

    NSIndexPath *iToTheP = indexPath;
    return iToTheP;
} 
```

我知道这是一个奇怪而复杂的解决方法。我不介意，但它甚至不能完全工作。如果滚动到屏幕外，选定的单元格将失去其突出显示，而已被点击的单元格在滚动到屏幕外时仍保持突出显示。

我对此完全感到困惑。我敢肯定，甚至不需要这种解决方法，因为有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T20:32:49.070

请确保单元格`selectionStyle`是`UITableViewCellSelectionStyleBlue`并且 tableView 的`allowsSelection`设置为`YES`.

该方法`selectRowAtIndexPath:animated:scrollPosition:`对我来说很好。它确实突出显示了选定的单元格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-06T09:25:29.043

我经历并尝试了所有这些和其他解决方案，但没有任何乐趣。在我的情况下，问题（让我发疯了 2 小时）如下 - 在我打电话后不久`selectRowAtIndexPath`，我打电话`reloadData`给`tableview`. 重新加载消除了所有突出显示！当心这个陷阱！随着不必要的数据调用重新加载消失，突出显示按预期发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-04T08:53:17.857

我还尝试了许多方法来让初始选择显示在我的单选 UITableView 上。最终对我有用的是将初始行的选择推迟到通过在我的 UITableViewController 的 viewDidAppear 中调用它来设置表：

```
override func viewDidAppear(animated: Bool)
{
    tableView.selectRowAtIndexPath(indexPathToSelectInitially, animated: false, scrollPosition: .None)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-02T17:09:36.400

我找到了它，它对我有用（又名调用委托方法 didSelectRowAtIndexPath）

```
NSIndexPath *defaultIndexPath = [NSIndexPath indexPathForRow:0 inSection:0];
[self tableView:[self tableView] didSelectRowAtIndexPath:defaultIndexPath]; 
```

PS。我正在使用 UITableViewController。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-30T09:26:33.713

它获取带有单元格边框的背景视图，看起来像分隔符。不要更改界面生成器中的默认表格视图设置。确保 UITableViewCellSelectionStyleNone 未设置为 selectionstyle。我正在粘贴工作代码。：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *kCellIdentifier = @"PlayListCell";
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kCellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kCellIdentifier];
    }
    MPMediaPlaylist *playList = [playlistCollection objectAtIndex:indexPath.row];
    cell.textLabel.text = playList.name;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
     // cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%d Songs",[playList.items count]];
    MPMediaItemCollection *playListMediaCollection = [playlistCollection objectAtIndex:indexPath.row ];

    cell.imageView.image =[UIImage imageWithCGImage:[self getImageForCollection:playListMediaCollection.items]];

    // the main code which make it highlight

    UIView *bgColorView = [[UIView alloc] init];
    bgColorView.backgroundColor = [UIColor colorWithRed:170.0f/255.0 green:170.0f/255.0 blue:170.0f/255.0 alpha:1.0f];
    [bgColorView.layer setBorderColor:[UIColor blackColor].CGColor];
    [bgColorView.layer setBorderWidth:1.0f];
    [cell setSelectedBackgroundView:bgColorView];
    return cell;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-05T13:23:31.060

我发现使用所有已知的可能性是完全无法解决的。最后，我放弃了很多代码并改用 NSFetchedResultsController 来修复它。NSFetchedResultsController 是在我最初编写此应用程序后不久引入的，它极大地简化了将 Core Data 与 UITableViews 一起使用的过程。 [https://developer.apple.com/library/IOs/documentation/CoreData/Reference/NSFetchedResultsController_Class/index.html](https://developer.apple.com/library/IOs/documentation/CoreData/Reference/NSFetchedResultsController_Class/index.html)

# asp.net - Html.BeginRouteForm 被重定向到错误的操作？

> ID：15044022
> 
> 赞同：0
> 
> 时间：2013-02-23T18:28:31.070
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我认为这是：

```
@using (Html.BeginRouteForm("Forums_default", new { action = "RewardPost", item = Model.PostId }, FormMethod.Post, new { @class = "reward" })) 
```

现在，这些是我的路线：

```
context.MapRoute(
    "Forums_thread",
    "Forums/{action}/{category}/{item}",
    new { controller = "Forums" }
);

context.MapRoute(
    "Forums_category",
    "Forums/{category}",
    new { controller = "Forums", action = "ThreadList" }
);

context.MapRoute(
    "Forums",
    "Forums/",
    new { controller = "Forums", action = "CategoryList" }
);

context.MapRoute(
    "Forums_default",
    "Forums/{action}/{item}",
    new { controller = "Forums", action = "CategoryList", item = UrlParameter.Optional }
); 
```

这是正在生成的表格：

```
<form action="/Forums/RewardPost/11" class="reward" method="post" novalidate="novalidate">...
</form> 
```

这就是它重定向我的地方：`/Forums/AddPost/4`

现在的问题是：这里发生了什么？我该如何解决？

# node.js - 通过 Grunt 运行 Node 应用程序

> ID：15044026
> 
> 赞同：13
> 
> 时间：2013-02-23T18:28:41.067
> 
> 标签：node.js, process, gruntjs, spawn

我正在尝试将我的 Node 应用程序作为 Grunt 任务运行。但是，我需要将其作为子进程生成，以允许我并行运行监视任务。

这有效：

```
grunt.registerTask('start', function () {
  grunt.util.spawn(
    { cmd: 'node'
    , args: ['app.js']
    })

  grunt.task.run('watch:app')
}) 
```

但是，当 watch 任务检测到变化时，这会再次触发 start 任务。在生成 Node 应用程序的另一个子进程之前，我需要杀死前一个子进程。

但是，我不知道如何终止该进程。像这样的东西不起作用：

```
var child

grunt.registerTask('start', function () {
  if (child) child.kill()
  child = grunt.util.spawn(
    { cmd: 'node'
    , args: ['app.js']
    })

  grunt.task.run('watch:app')
}) 
```

看起来：

1.  即使我将生成的进程存储在函数上下文之外的变量中，它也不会持续存在，因此下次运行启动任务时，child 是`undefined`.
2.  `child`没有`kill`功能……</li>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-05T03:39:53.573

看看[grunt-nodemon](https://github.com/ChrisWren/grunt-nodemon)，它处理了很多与生成子进程相关的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T20:08:01.483

这是因为`grunt-contrib-watch`当前产生的所有任务都作为子进程运行。所以变量`child`不在同一个进程上下文中。很快，`grunt-contrib-watch@0.3.0`将发布一个`nospawn`选项。这将允许您将手表配置为在同一上下文中生成任务运行，并使您的上述示例正常工作。

请查看此问题以获取更多信息：

[https://github.com/gruntjs/grunt-contrib-watch/issues/45](https://github.com/gruntjs/grunt-contrib-watch/issues/45)

# java - UTF-8 字符集不适用于 javax.mail

> ID：15044027
> 
> 赞同：62
> 
> 时间：2013-02-23T18:28:45.260
> 
> 标签：java, utf-8, character-encoding, jakarta-mail

我使用[Java Mail API](https://javaee.github.io/javamail/)来发送电子邮件。我正在使用联系人公式发送输入，该输入必须发送到特定的电子邮件。

尽管我是丹麦人，但电子邮件发送没有问题，因此我需要三个丹麦字符，即主题和电子邮件文本中的“æ”、“ø”和“å”。

因此，我看到我可以使用 UTF-8 字符编码来提供这些字符，但是当我发送邮件时，我只看到一些奇怪的字母 - 'ã¦'、'ã¸' 和 'ã¥' - 而不是丹麦字母 - 'æ'、'ø' 和 'å'。

我发送电子邮件的方法如下所示：

```
public void sendEmail(String name, String fromEmail, String subject, String message) throws AddressException, MessagingException, UnsupportedEncodingException, SendFailedException
{
    //Set Mail properties
    Properties props = System.getProperties();
    props.setProperty("mail.smtp.starttls.enable", "true");
    props.setProperty("mail.smtp.host", "smtp.gmail.com");
    props.setProperty("mail.smtp.socketFactory.port", "465");
    props.setProperty("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.setProperty("mail.smtp.auth", "true");
    props.setProperty("mail.smtp.port", "465");
    Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("my_username", "my_password");
        }
    });

    //Create the email with variable input
    MimeMessage mimeMessage = new MimeMessage(session);
    mimeMessage.setHeader("Content-Type", "text/plain; charset=UTF-8");
    mimeMessage.setFrom(new InternetAddress(fromEmail, name));
    mimeMessage.setRecipient(Message.RecipientType.TO, new InternetAddress("my_email"));
    mimeMessage.setSubject(subject, "utf-8");
    mimeMessage.setContent(message, "text/plain");

    //Send the email
    Transport.send(mimeMessage);
} 
```

请帮助我找出如何纠正这个“错误”。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2014-12-10T15:33:19.613

## 对于所有电子邮件

有几个[与 mailing 相关的系统属性](http://docs.oracle.com/javaee/6/api/javax/mail/internet/package-summary.html)，可以简化您的代码。我实际上是在谈论这个特定的属性：`"mail.mime.charset"`.

> **`mail.mime.charset`**System 属性可用于**指定默认 MIME 字符集**以用于未指定字符集的编码单词和文本部分。通常，默认 MIME 字符集派生自默认 Java 字符集，如`file.encoding`System 属性中指定的那样。大多数应用程序无需显式设置默认 MIME 字符集。如果用于邮件消息的默认 MIME 字符集与用于存储在系统上的文件的字符集不同，则应设置此属性。

正如您在上面所读到的，默认情况下没有值，`mail.mime.charset`并且使用文件编码（`file.encoding`属性）。

## 对于特定的电子邮件

但是，如果您想为特定的电子邮件指定特定的编码，那么您可能应该使用 2 参数`setSubject(subject,charset)`和`setText(text,charset)`方法。

**如果这不起作用，那么您的输入可能在达到这一点之前已经损坏。换句话说，您可能使用了错误的编码来收集您的数据**。

## 哑剧类型很复杂

（正如其他消息来源声称的`setContent(content, "UTF-8")`那样）将不起作用。看看这个方法的签名：`setContent(Object content, String mimetype)`. **Mime 类型和字符集是两个完全不同的东西。**恕我直言，您真的应该使用其中一种`setText(...)`带有 charset 参数的方法。

但是，如果您坚持使用 mimetype 来设置 charset `setContent(content,mimetype)`，那么请使用正确的格式。（不仅仅是`"UTF-8"`，而是类似的东西`"text/plain; charset=UTF-8"`）。但更重要的**是，请注意每种 mime 类型都有自己处理字符集的方式。**

*   如[RFC-2046](https://www.rfc-editor.org/rfc/rfc2046)中所述，默认字符集为`text/plain`，`US-ASCII`但可以使用附加的字符集参数否决。
*   但是，在[RFC-6657](https://www.rfc-editor.org/rfc/rfc6657)中明确指出，`text/xml`类型使用消息的内容来确定字符集。**charset 参数将在这里被忽略。**
*   并且在[RFC-2854](https://www.rfc-editor.org/rfc/rfc2854#section-6)中声明`text/html`应该始终指定一个字符集。但如果你不这样做，那么它将使用`ISO-8859-1`(= `Latin-1`)。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-02-23T18:33:08.033

也许你也应该在这里提供 UTF-8

```
mimeMessage.setContent(message, "text/plain; charset=UTF-8"); 
```

你必须看看[http://www.coderanch.com/t/274480/java/java/JavaMail-set-content-utf](http://www.coderanch.com/t/274480/java/java/JavaMail-set-content-utf)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-01T20:19:15.933

在花了很多时间进行调试并在互联网上搜索线索后，我找到了解决问题的方法。

似乎每当我通过网络请求发送数据时，我的应用程序都没有使用 UTF-8 编码对字符进行编码。这意味着从我的联系表单发送的包含 æ、ø 和 å 字符的数据无法通过字符编码正确处理。

该解决方案似乎在我的部署描述符中设置了一个**字符编码过滤器**，它将所有来自网络的传入请求编码为字符编码 UTF-8。

```
private void registerCharacterEncodingFilter(ServletContext servletContext) {
    CharacterEncodingFilter encodingFilter = new CharacterEncodingFilter();
    encodingFilter.setEncoding("UTF-8");
    encodingFilter.setForceEncoding(true);
    FilterRegistration.Dynamic characterEncodingFilter = servletContext.addFilter("characterEncodingFilter", encodingFilter);
    characterEncodingFilter.addMappingForUrlPatterns(null, false, "/*");
} 
```

此过滤器将编码设置为 UTF-8，并强制对来自 url ' /* ' 的所有请求进行编码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-15T10:45:44.430

很简单，使用参数 -Dfile.encoding=UTF-8 运行您的项目 例如：java -Dfile.encoding=UTF-8 -jar MyProject.jar

//修正一个错字

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-12T22:00:15.630

在将您的 String 发送到 send 方法之前，您必须将 String 转换为 UTF-8

如果您收到“请求”参数，则可以使用“setCharacterEncoding”：

```
request.setCharacterEncoding("utf-8");
String subject = request.getParameter("subject");
String content = request.getParameter("content");
...
MimeMessage mineMessage = new MimeMessage(session);
        mineMessage.setFrom(new InternetAddress(myAccountEmail));
        mineMessage.setRecipient(Message.RecipientType.TO, new InternetAddress(recepient));
        mineMessage.setSubject(subject, "UTF-8");
        mineMessage.setContent(content, "text/plain;charset=UTF-8"); 
```

否则，请使用以下方法将您的字符串转换为 UTF-8 格式：

```
String subject = new String(subject.getBytes(Charset.forName("ISO-8859-1")), Charset.forName("UTF-8"));
String content = new String(content.getBytes(Charset.forName("ISO-8859-1")), Charset.forName("UTF-8"));
...
MimeMessage mineMessage = new MimeMessage(session);
    mineMessage.setFrom(new InternetAddress(myAccountEmail));
    mineMessage.setRecipient(Message.RecipientType.TO, new InternetAddress(recepient));
    mineMessage.setSubject(subject, "UTF-8");
    mineMessage.setContent(content, "plain/plain;charset=UTF-8"); 
```

[这是西班牙语的结果。](https://i.stack.imgur.com/EYgOM.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-19T16:25:02.093

我知道我迟到了这个问题，但我刚才遇到了类似的问题。

检查您的源编码也可能是值得的！我正在使用一个测试类，其中包含一些特殊字符的硬编码主题/文本，在发送电子邮件时不断出现乱码。即使我在适用的地方设置了字符集 UTF-8 (mimeMessage.setSubject(subject, charset), mimeMessage.setContent(content, "text/plain; charset=UTF-8"))。

然后我注意到这个类的源编码是windows-1252。据我了解，编译 java 文件时，任何源文本都会转换为 UTF-8。但是在这种情况下，在这个项目的 maven pom.xml 中，缺少 project.build.sourceEncoding 属性 - 所以我实际上不确定在编译期间（默认情况下）使用哪个编码 maven，因为没有指定。

在这里更改源编码是不可能的，但是一旦我将特殊字符更改为 Unicode 代码文字（例如“ü”到“\u00fc”），整个事情就很好了。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-12-17T12:52:56.487

```
mimeMessage.setContent(mail.getBody(), "text/html; charset=UTF-8"); 
```

也许我错了，但这对我有用。:) 任何 ööö、äää、üüü 字符都会在我的前景中正确显示。

[展望截图](https://i.stack.imgur.com/ogqXL.png)

# ios - 升级 Xcode 问题

> ID：15044028
> 
> 赞同：2
> 
> 时间：2013-02-23T18:28:45.620
> 
> 标签：ios, xcode, upgrade

我目前正在使用 Xcode 4.5.2，我想将其升级到 4.6 版。安装新版本会完全取代之前的版本吗？如果是这样，是否可以“扩展”您当前的版本并保留您已有的 SDK？我不想失去与我当前项目的兼容性......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T18:30:58.233

Xcode 4.6.x 支持 iOS 4.3 到 6.1。Xcode 4.5.x 支持 iOS 4.3 到 6.0。升级到 4.6 不会导致您失去任何兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:25:47.957

If you download from the developer web site rather than the app store you can have multiple versions of Xcode installed at the same time. At one point I had 4 or 5 versions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T18:30:58.590

> “安装新版本会完全取代以前的版本吗？如果是这样，是否可以“扩展”您当前的版本并保留您已有的 SDK？

可以并排安装它们，这样您就可以在预览时开始选择较新的版本，同时能够回退到您一直在使用的稳定版本。我在版本之间并行滚动。请记住，开发人员工具也有错误 :)

转到应用程序并将 Xcode 重命名为 Xcode45。登录到您在苹果的开发者帐户，在其下方查找下载旧版本（实际上是最新版本）并下载 4.6 的 Xcode dmg。运行它并拖到应用程序。

# c# - C# 和构造函数存在问题。“ItemType.ItemType(string) 由于其保护级别而无法访问”

> ID：15044034
> 
> 赞同：1
> 
> 时间：2013-02-23T18:29:17.070
> 
> 标签：c#, constructor

**我正在为我的 Unity 游戏制作一个项目系统**，并且我正在使用 C# 来完成它。我有一个名为 ItemType 的抽象类，它包含有关特定类型项目的信息（例如其名称、重量、市场价值、ID 等）。然后我必须从 ItemType 类继承的项目类、ItemSword 和 ItemCoin。我还有一个 ItemManager 类，它实例化 ItemCoin 和 ItemSword 并自动为我分配一个 ID。我的问题是，**当我尝试继承类时，构造函数出现错误。**

ItemType 的构造函数采用一个参数，一个名为 name 的字符串。当我去为 ItemCoin 做构造函数时，我确保它使用调用基类

```
ItemCoin(string name): base(name){
//Stuff
} 
```

就像它在[此页面](http://msdn.microsoft.com/en-us/library/vstudio/ms173115.aspx)上所说的那样。

**错误是说“名称”由于其保护级别而无法访问，就好像我已将其设为私有一样。** 不过，我不明白这是怎么可能的，因为我没有给它*任何*访问修饰符，因为它是一个参数。ItemSword 没有给我这个错误，但这可能是因为编译器仍然卡在 ItemCoin 上。

当我不给“base”任何参数时，它告诉我 ItemType 没有带有 0 个参数的构造函数。如果我根本不使用“base”，或者我不给它任何构造函数，也会发生同样的事情。

**作为参考，这是我的完整源代码。**

项目类型.cs：

```
using UnityEngine;
using System.Collections;

public abstract class ItemType{

    public int itemID; //The id of this item
    public string itemName; //The text name of this item

    public int stackSize = 99; //The maximum amount of this item allowed in a stack.  Use -1 for infinite
    public int maxAllowedInOneContainer = -1; //The maximum amount of this item allowed in a single container.  Use -1 for infinite.
    public int weight = 0; //The weight of this item
    public int marketValue = 0; //The standard price of this item in stores

    ItemType(string name){

        itemName = name;

    }

} 
```

ItemCoin.cs：

```
using UnityEngine;
using System.Collections;

public class ItemCoin : ItemType {

    ItemCoin(string name): base(name){

        stackSize = -1;

    }

} 
```

ItemSword.cs：

```
using UnityEngine;
using System.Collections;

public class ItemSword : ItemType{

    ItemSword(string name): base(name){
        maxAllowedInOneContainer = 1;
        stackSize = 1;
    }

} 
```

物品管理器.cs：

```
using UnityEngine;
using System.Collections;

public class ItemManager {

    public const int MAX_ITEMS = 3200;

    private static ItemType[] itemList = new ItemType[MAX_ITEMS];
    public static int numberOfItems = 0;

    ItemManager(){

        /*When you make a new item, add it to this huge list of item declarations, or else it won't do anything!*/
        ItemSword sword = addItem(new ItemSword("Sword")); //Adds the sword item
        ItemCoin coin = addItem(new ItemCoin("Coin"));
    }

    public ItemType addItem(ItemType item){

        //Add the item to the list
        itemList[numberOfItems] = item;

        //Tell the item its id number
        item.itemID = numberOfItems;

        //Increment the total number of items by one.  This will be the id of the next added item.
        numberOfItems += 1;

        return item;

    }

    public int findItemID(string name){
        //Finds the item id for an item with a given name

        bool found = false;

        for (int i = 0; i < numberOfItems; i++){

            if (itemList[i].itemName == name){
                found = true;
                return itemList[i].itemID;
                break;
            }

        }

        if (found == false){
            throw new ItemIDNotFoundException();
        }

    }

    public string findItemName(int id){

        if (id >= itemList.Length){
            throw new ItemIDNotFoundException();
        }
        else{
            return itemList[id].name;
        }

    }

    public ItemType GetItem(int id){
        //Returns a reference(pointer) to the item type with a given id.
        return itemList[id];
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T18:32:44.087

在类中，`private`是默认的可访问性级别，因此如果不指定它，您的构造函数就是私有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:33:43.087

当您有这样的构造函数时：

```
ItemType(string name){

    itemName = name;

} 
```

它是私有的，只能由类本身访问。`private`当没有指定访问修饰符时，是类成员的默认值。为了能够从子类中使用它，您至少需要使它`protected`：

```
protected ItemType(string name)
{
    itemName = name;
} 
```

或者你可以做到`public`或`internal`。由于这是一个抽象类，从任何其他类本身或子类访问它是没有意义的，这`protected`可能是最合适的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T18:33:59.303

在类中，默认的可访问性级别是`private`. 如果您没有指定它，那么您的构造函数将是`private`.

来自**[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/kcfb85a6.aspx)**；

> 请注意，如果您不将访问修饰符与构造函数一起使用，则默认情况下它仍然是私有的。但是，private 修饰符通常被显式使用以明确该类不能被实例化。

# actionscript-3 - AS3 环绕位图数据滚动？

> ID：15044039
> 
> 赞同：1
> 
> 时间：2013-02-23T18:29:44.787
> 
> 标签：actionscript-3, bitmap, scroll

有没有人有一个很好的解决方案来在 AS3 中创建一个基于 BitmapData 的滚动器，它可以在向左和向右滚动时环绕图像（并且还支持任意速度，而不仅仅是每个循环一个像素）？我正在尝试编写一个可能只使用 BitmapData.copyPixels() 和 BitmapData.scroll() 的快速且轻量级的滚动条。

到目前为止，我想出了这段代码：

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.events.KeyboardEvent;
    import flash.geom.Point;
    import flash.geom.Rectangle;
    import flash.ui.Keyboard;

    [SWF(width="800", height="480", frameRate="60", backgroundColor="#000000")]
    public class Main extends Sprite
    {
        private var _source:BitmapData;
        private var _sourceWidth:int;
        private var _buffer:BitmapData;
        private var _canvas:BitmapData;
        private var _rect:Rectangle = new Rectangle();
        private var _point:Point = new Point();
        private var _xOffset:int = 0;

        public function Main()
        {
            _source = new Picture();
            _sourceWidth = _source.width;
            _rect.width = _source.width;
            _rect.height = _source.height;
            _canvas = new BitmapData(_source.width, _source.height, false, 0x000000);
            _canvas.copyPixels(_source, _rect, _point);
            _buffer = _canvas.clone();

            var b:Bitmap = new Bitmap(_canvas);
            b.x = stage.stageWidth / 2 - _canvas.width / 2;
            b.y = 10;
            addChild(b);

            stage.addEventListener(KeyboardEvent.KEY_DOWN, function(e:KeyboardEvent):void
            {
                if (e.keyCode == Keyboard.RIGHT) scroll(10);
                else if (e.keyCode == Keyboard.LEFT) scroll(-10);
            });
        }

        private function scroll(speed:int):void
        {
            /* Update offset. */
            _xOffset -= speed;

            /* Reset rect & point. */
            _rect.width = _sourceWidth;
            _rect.x = 0;
            _point.x = 0;

            /* Reached the end of the source image width. Copy full source onto buffer. */
            if (_xOffset == (speed > -1 ? -(_sourceWidth + speed) : _sourceWidth - speed))
            {
                _xOffset = -speed;
                _buffer.copyPixels(_source, _rect, _point);
            }

            /* Scroll the buffer by <speed> pixels. */
            _buffer.scroll(-speed, 0);

            /* Draw the scroll buffer onto the canvas. */
            _canvas.copyPixels(_buffer, _rect, _point);

            /* Update rect and point for copying scroll-in part. */
            _rect.width = Math.abs(_xOffset);
            /* Scrolls to left. */
            if (speed > -1)
            {
                _rect.x = 0;
                _point.x = _sourceWidth + _xOffset;
            }
            /* Scrolls to right. */
            else
            {
                _rect.x = _sourceWidth - _xOffset;
                _point.x = 0;
            }

            trace("rect.x: " + _rect.x + "    point.x: " + _point.x);

            /* Copy the scrolling-in part from source to the canvas. */
            _canvas.copyPixels(_source, _rect, _point);
        }
    }
} 
```

您可以使用光标键向左/向右滚动。仅当图像环绕一次时，滚动才能正常工作。如果决定在其间某处向相反方向滚动，它将弄乱坐标以从滚动缓冲区复制区域。基本上这里的这个块需要工作：

```
 /* Update rect and point for copying scroll-in part. */
            _rect.width = Math.abs(_xOffset);
            /* Scrolls to left. */
            if (speed > -1)
            {
                _rect.x = 0;
                _point.x = _sourceWidth + _xOffset;
            }
            /* Scrolls to right. */
            else
            {
                _rect.x = _sourceWidth - _xOffset;
                _point.x = 0;
            } 
```

... rect.x 和 point.x 需要根据滚动方向在此处进行不同的设置，但我不知道如何在不完全过度复杂化整个循环的情况下进行设置。欢迎任何关于更好实施的提示或想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T23:18:17.450

不久前有人问过这个问题，但由于仍未得到答复，我将加两分钱。

我只需要为我正在从事的项目弄清楚这一点，并提出以下解决方案。总体思路是将位图绘制到显示对象的图形中，并使用矩阵变换来控制位图数据上视口的 x 和 y 坐标。

```
public class Example extends Sprite
{
    private var vx:Number;
    private var vy:Number;
    private var coords:Point;
    private var shape:Shape;
    private var bitmap:Bitmap; 
    private var bmd:BitmapData;

    public function Example()
    {
        vx = 1.5;
        vy = -3.0;
        coords = new Point();
        shape = new Shape();
        bitmap = new Image(); // image, in my case is an embedded image
        bmd = bitmap.bitmapData;

        addChild(shape);
        addEventListener(Event.ENTER_FRAME, onEnterFrame);
    }

    private function onEnterFrame(event:Event):void 
    {
        coords.x += vx;
        coords.y += vy;

        // this is important!
        // without it, bitmap size constraints are reached and scrolling stops
        coords.x %= bitmap.width;
        coords.y %= bitmap.height;

        shape.graphics.clear();
        shape.graphics.beginBitmapFill(bmd, new Matrix(1, 0, 0, 1, coords.x, coords.y), true, true);
        shape.graphics.drawRect(0, 0, stage.stageWidth, stage.stageHeight);
        shape.graphics.endFill();
     }
} 
```

现在您可以更新 Point 对象的 x 和 y 值来滚动位图。您可以轻松地将速度、加速度和摩擦力添加到方程中，以使滚动更加动态。

# cassandra - 复合主键是 cql 3 唯一的功能吗？cql 2 可以访问用 cql 3 插入的数据吗？

> ID：15044046
> 
> 赞同：2
> 
> 时间：2013-02-23T18:30:28.210
> 
> 标签：cassandra, cql

如果我使用 CQL 2，键空间会出现，但我不能使用，因为它说它不存在。我需要知道我是否可以用 cql 2 制作复合主键。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:05:24.340

你的意思是**复合**主键？

来自[Datastax 文档](http://www.datastax.com/docs/1.1/dml/using_cql)：

> CQL 规范 3 支持复合列。凭借 CQL 中的复合主键特性，宽行支持完全非规范化。
> 
> CQL 规范 2 支持动态列，但不支持复合列。

遗憾的是，复合列（和复合 PK）仅在 CQL3 中可用，但大多数最新 API 都支持 CQL3。

# java - Acra 在 MainActivity 的 onCreate() 中无法正常工作？

> ID：15044051
> 
> 赞同：4
> 
> 时间：2013-02-23T18:31:04.683
> 
> 标签：java, android, acra

出于测试目的，我在 MainActivity 的 onCreate() 方法中创建了一个错误。Acra 认出了这一点并展示了一个 Toast。

```
02-23 19:05:35.075: E/ACRA(599): ACRA caught a RuntimeException exception for .... Building report.
02-23 19:05:35.080: I/ACRA(599): READ_LOGS granted! ACRA can include LogCat and DropBox data.
02-23 19:05:35.080: D/ACRA(599): Writing crash report file 1361642735000.stacktrace.
02-23 19:05:35.125: D/ACRA(599): Waiting for Toast + worker...
02-23 19:05:35.125: D/dalvikvm(599): GC_CONCURRENT freed 278K, 18% free 2512K/3032K, paused 2ms+4ms, total 29ms
02-23 19:05:38.160: D/ACRA(599): About to create DIALOG from #handleException
02-23 19:05:38.160: D/ACRA(599): Creating Dialog for 1361642735000.stacktrace
02-23 19:05:38.170: D/ACRA(599): Wait for Toast + worker ended. Kill Application ? true
02-23 19:05:38.190: E/ACRA(599): ... fatal error : Unable to start activity ComponentInfo{.../....MainActivity}: java.lang.ArithmeticException: divide by zero 
```

但在那之后，一切都无休止地一次又一次地发生...... Toast 又出现了，我又看到了 stackstrce ......

当我在其中创建错误时，可以说 onOptionsItemSelected()，一切都按预期工作。吐司出现。我的应用程序关闭。出现对话框。这就是我想要的...

但是为什么这在 onCreate() 中不能正常工作？

Acra 库（4.4.0 版）位于 libs 文件夹中。

主要活动：

```
import org.acra.ACRA;
import org.acra.annotation.*;
import org.acra.ReportingInteractionMode;

import android.app.Application;

@ReportsCrashes(formKey = "",
        mailTo = "my_email_address", 
        mode = ReportingInteractionMode.DIALOG,
        resToastText = R.string.crash_toast_text,
        resDialogText = R.string.crash_dialog_text,
        resDialogIcon = android.R.drawable.ic_dialog_info,
        resDialogTitle = R.string.crash_dialog_title,
        resDialogCommentPrompt = R.string.crash_dialog_comment_prompt,
        resDialogOkToast = R.string.crash_dialog_ok_toast
        )

public class MyApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        ACRA.init(this);
    }

} 
```

显现：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock.Light.DarkActionBar"
        android:allowBackup="true"
        android:name="MyApplication" >

        <activity android:name="org.acra.CrashReportDialog"
            android:theme="@android:style/Theme.Dialog"
            android:launchMode="singleInstance"
            android:excludeFromRecents="true"
            android:finishOnTaskLaunch="true" /> 
```

我的 MainActivity 看起来像这样：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    int i = 1/0; // raise an error for acra

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mHandler.postDelayed(mUpdateTimeTask, 0);
} 
```

可运行：

```
private Runnable mUpdateTimeTask = new Runnable() {
    public void run() {

        // doing stuff here...

        mHandler.postDelayed(mUpdateTimeTask, 1000);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:01:01.897

所以这种行为似乎是一个 Acra 错误，将在 4.5 版中得到修复-> [https://github.com/ACRA/acra/issues/42](https://github.com/ACRA/acra/issues/42)

# c++ - 在 C++ 中使用虚函数

> ID：15044052
> 
> 赞同：0
> 
> 时间：2013-02-23T18:31:06.003
> 
> 标签：c++, function, virtual

我在 C++ 中使用虚函数有一个小问题

我有一个 B 类，它扩展了 A 类。

```
Class A{
  virtual function 1 // does nothing 
  virtual function 2 // does nothing
}

class B : public class A {
  function 1 { does some thing }
  function 2 { does some thing }
} 
```

我有另一个类实现

```
class implement {

  B b;
  A *a = &B;
  a.function 1();
  a.function 2();
} 
```

使用 GCC 编译器编译时，此代码在编译时会出现以下错误

对函数 1 和函数 2 的未定义引用。

请帮我解决这个问题提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T18:39:01.647

在 C++ 中，仅允许在没有函数定义的情况下存在纯虚函数。
在您的代码中，您没有任何纯虚函数。纯虚函数是在声明中有一个`=0`。
例如：

```
virtual void doSomething()=0; 
```

基类中的`virtual`成员函数（`function1()`和`function2()`）`A` **必须**有定义，因为它们不是纯虚函数。您没有提供他们的定义，因此链接器适当地抱怨缺少定义。

```
undefined reference to function 1 and function 2 
```

# ios - 检测用户何时开始编辑 UITextView

> ID：15044063
> 
> 赞同：-1
> 
> 时间：2013-02-23T18:32:24.297
> 
> 标签：ios, uitextview

我想知道是否可以检测用户是否开始编辑文本视图（以便我可以对视图进行某些调整）。我是否必须改为检测键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:36:28.947

看看[UITextViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html)。`textView:shouldChangeTextInRange:replacementText:`如果您想在用户键入或其他方式时做出反应，请实施`textViewDidChange:`。

编辑：如果您只对文本字段成为第一响应者（即用户设置焦点）感兴趣，请使用`textViewDidBeginEditing`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:35:20.900

是的，可以使用`UITextView`的委托。您可以在[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html)`UITextViewDelegate`查看协议的文档。

[这里](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_uitextview_uitextviewdelegate_2/)有一个很好的教程，它将向您展示如何使用`UITextViewDelegate`协议检测这些交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T18:47:42.847

在您的 xib 文件中分配您的 textView 的委托（或以编程方式）

使用其中之一：

`- (BOOL)textViewDidBeginEditing:(UITextView *)textView {`

`- (BOOL)textViewShouldBeginEditing:(UITextView *)textView {`

# php - 服务器没有看到在 javascript ajax 请求中发送的 JSON

> ID：15044065
> 
> 赞同：0
> 
> 时间：2013-02-23T18:32:36.350
> 
> 标签：php, javascript, ajax, json

我正在尝试使用一些 JSON 参数在直接的 javascript 中发出 ajax 请求（jQuery 对我不可用）。的JavaScript：

```
var params = {'ajax': true, 'albumid': albumid, 'sequencenum': sequencenum};
var xhr = new XMLHttpRequest();
xhr.onreadystatechange=function()
{
    if (xhr.readyState==4 && xhr.status==200)
    {
        console.log(xhr.responseText);
    }
}
xhr.open("GET","viewpicture.php",true);
xhr.setRequestHeader("Content-Type", "application/json")
console.log("sending request");
xhr.send(JSON.stringify(params)); 
```

在 viewpicture.php 中，var_dump($_GET) 产生一个空数组。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:38:24.573

简而言之，当你发出`GET`请求时，`.send`预计会有 0 个参数（或 be `null`）。发送数据的唯一方法是`GET`将其附加到 URL 本身。

也就是说：
如果您在表单数据中发送`POST`，则预期将`send`包含表单编码数据（json 用于 json-data 等），并且 URL 将只是服务器上的访问点。

`GET`请求只是从该访问点获取数据（包括查询字符串）。
看看我要去哪里？

因此，如果您希望它在 a 中工作`GET`，您需要将 JSON 设置为查询参数的属性（或将其转换为查询参数/值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:38:07.647

如果您想在请求正文中发送，您应该使用`POST`请求，但是如果您需要使用 get 请求，您应该将数据作为 url 中的键值对发送。例如`xhr.open("GET","viewpicture.php?data=" + encodeURIComponent(JSON.stringify(params)),true);`，然后通过检索`$_GET['data']`。

# c - C 中的套接字编程

> ID：15044068
> 
> 赞同：1
> 
> 时间：2013-02-23T18:33:01.527
> 
> 标签：c, sockets, networking

我正在尝试编写一个 Web 服务器，但是使用我的代码我得到了“打开失败”。应该在浏览器中打开的 html 文档 (ht.html)。

我的代码是：

```
#include <sys/types.h>
#include <sys/fcntl.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <string.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

#define SERVER_PORT 12345
#define BUF_SIZE 4096
#define QUEUE_SIZE 10

int main(int argc, char *argv[])
{
  int s, b, l, fd, sa, bytes, on = 1;
  char buf[BUF_SIZE]; //buffer for outgoing file
  struct hostent *h; //info about server
  struct sockaddr_in channel; //holds IP address

  //Build address structure to bind to socket
  memset(&channel, 0, sizeof(channel)); //zero channel
  channel.sin_family = AF_INET;
  channel.sin_addr.s_addr = htonl(INADDR_ANY);
  channel.sin_port = htons(SERVER_PORT);

  //Passive open. Wait for connection
  s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); /* create socket */
  if (s < 0) fatal("socket failed");
  setsockopt(s, SOL_SOCKET, SO_REUSEADDR, (char *) &on, sizeof(on));

  b = bind(s, (struct sockaddr *) &channel, sizeof(channel));
  if (b < 0) fatal("bind failed");

  l = listen(s, QUEUE_SIZE);        /* specify queue size */
  if (l < 0) fatal("listen failed");

  /* Socket is now set up and bound. Wait for connection and process it. */
  while(1) {
    sa = accept(s, 0, 0);       /* block for connection request */
    if (sa < 0) fatal("accept failed");

    read(sa, buf, BUF_SIZE);    /* read file name from socket */

    /* Get and return the file. */

    fd = open(buf, O_RDONLY);   /* open the file to be sent back */
    if (fd < 0) fatal("open failed");

    while(1){
      bytes = read(fd, buf, BUF_SIZE); /* read from file */
      if (bytes <= 0) break;         /* check for end of file */
      write(sa, buf, bytes);              /*write bytes to socket*/
    }

    close(fd); //close file
    close(sa); //close connection

  }
}

fatal(char*string)
{
  printf("%s", string);
  exit(1);
} 
```

我的错误在哪里？或者必须添加什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:40:19.727

也许您可以从输出从套接字接收到的数据开始，或者至少在调试器中运行，否则一切都将在黑暗中运行，您不知道发生了什么。在下面的代码中，我添加了一个`printf`打印我们从 Web 浏览器获得的内容。

也像其他人指出的那样，很高兴知道`errno`试图告诉我们什么。`perror`使用+有点尴尬/烦人`exit`，所以在 Linux 和 BSD 中你可以使用[err(3)](http://manpages.ubuntu.com/manpages/precise/en/man3/err.3.html)和[warn(3)](http://manpages.ubuntu.com/manpages/precise/en/man3/warn.3.html)。err 将打印 errno 消息然后退出，而 warn 只会打印 errno 消息而不退出，我`fatal`用这些替换了你的函数。

Web 浏览器很可能会发送`GET /ht.html HTTP/1.1\r\n`，这就是您尝试打开的内容。为了打开文件，我们需要提取`ht.html`部分。我在下面更新了您的代码，现在[strchr(3)](http://manpages.ubuntu.com/manpages/precise/en/man3/strchr.3.html)和[strstr(3)](http://manpages.ubuntu.com/manpages/precise/en/man3/strstr.3.html)用于提取`ht.html`.

我们还需要发送一个 HTTP 响应代码并告诉 Web 浏览器我们要发送 HTML，这就是发送 HTML 的原因`HTTP/1.1 200 OK`。请记住，所有 HTTP 标头都需要用`\r\n`（回车 - 换行）分隔。[您将在RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)中找到有关 HTTP 协议的更多信息。

```
#include <sys/types.h>
#include <sys/fcntl.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <string.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <err.h>

#define SERVER_PORT 12345
#define BUF_SIZE 4096
#define QUEUE_SIZE 10

int main(int argc, char *argv[])
{
  int s, b, l, fd, sa, bytes, on = 1;
  char buf[BUF_SIZE]; /* buffer for outgoing file */
  char *p, *endp, *cp;

  struct sockaddr_in channel; /* holds IP address */

  /* Build address structure to bind to socket */
  memset(&channel, 0, sizeof(channel)); /* zero channel */
  channel.sin_family = AF_INET; /* ipv4 */
  channel.sin_addr.s_addr = htonl(INADDR_ANY); /* 0.0.0.0 */
  channel.sin_port = htons(SERVER_PORT);

  /* Passive open. Wait for connection */
  s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); /* create socket */
  if (s < 0) err(1, "socket failed");
  setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &on, sizeof(on));

  b = bind(s, (struct sockaddr *) &channel, sizeof(channel));
  if (b < 0) err(1, "bind failed");

  l = listen(s, QUEUE_SIZE);        /* specify queue size */
  if (l < 0) err(1, "listen failed");

  /* Socket is now set up and bound. Wait for connection and process it. */
  while(1) {
    sa = accept(s, NULL, NULL);       /* block for connection request */
    if(sa < 0) {
      warn("accept failed");
      continue;
    }

    bytes = 0;
    endp = buf + sizeof(buf); /* pointer to end of buf */
    cp = NULL;
    buf[0] = '\0';
    /* read first line from socket */
    /* should be "GET /[file] HTTP/1.1" */
    for(p = buf; (bytes = read(sa, p, endp - p)) > 0; p += bytes) {
      p[bytes] = '\0'; /* read(2) doesn't NUL terminate buf */
      if((cp = strchr(p, '\r')) != NULL) /* break at first carriage return */
        break;
    }
    printf("incoming request %lu bytes:\n%s\n", strlen(buf), buf);
    /* no carrige return or no "GET /" was found */
    if(cp == NULL || strstr(buf, "GET /") != buf) { 
      warnx("incomplete request");
      close(sa);
      continue;
    }
    *cp = '\0'; /* replace '\r' with '\0' */
    p = buf + sizeof("GET /") - 1; /* point to after "GET /" */
    cp = strchr(p, ' '); /* find " HTTP/1.1" */
    if(cp == NULL) {
      warnx("HTTP version was not found");
      close(sa);
      continue;
    }
    *cp = '\0'; /* replace ' ' with '\0' */

    /* Get and return the file. */
    fd = open(p, O_RDONLY);   /* open the file to be sent back */
    if(fd < 0) {
      warn("open failed: %s", p);
      close(fd);
      close(sa);
      continue;
    }

    /* Send HTTP header */
    /* Should probably also send Content-Length: <sizeof file>, */
    /* this can be checked using fstat(2) */
    write(sa, "HTTP/1.1 200 OK\r\n" \
      "Content-Type: text/html;charset=UTF-8\r\n\r\n", 58);
    while(1) {
      bytes = read(fd, buf, sizeof(buf)); /* read from file */
      if (bytes <= 0) break;         /* check for end of file */
      write(sa, buf, bytes);              /*write bytes to socket*/
    }

    close(fd); /* close file */
    close(sa); /* close connection */
  }
  return 0;
} 
```

要从您的 Web 浏览器连接到您的 HTTP 服务器，请访问：`http://127.0.0.1:12345/ht.html`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:48:03.543

1.  试着看看ERRNO。

    ```
    if (fd < 0) perror("open failed"); 
    ```

2.  试试看buf。

    ```
    if (fd < 0){ 
      printf("%s\n", buf);
      perror("open failed");
    } 
    ```

3.  试着这样看 buf：

    ```
    if (fd < 0){
      for(i=0;i<strlen(buf);i++) 
         printf("%d", buf[i]);
      perror("open failed");
    } 
    ```

这足以理解错误，因为您的应用程序根本没有打开文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T18:50:11.343

尝试添加一些调试消息或使用调试器运行。

我认为问题在于传递给 open 语句的缓冲区。看起来 buf 没有用零初始化，也没有由“读取”终止的 NULL。

```
n = read(sa, buf, BUF_SIZE);
buf[n] = '\0'; 
```

通常，在使用 read 时，应该在循环中调用它，直到返回 0 或 -1。它可能只填充缓冲区的一小部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T13:27:12.163

您从浏览器中读取的内容是 HTTP 请求。

您将需要对此进行解码 - 因此请阅读HTTP[规范](http://www.w3.org/Protocols/Specs.html)。

HTTP 请求的示例可以在[这里找到](http://djce.org.uk/dumprequest)

# android - minSdkVersion小于11时如何添加Holo Style Horizo ntal ProgressBar？

> ID：15044080
> 
> 赞同：5
> 
> 时间：2013-02-23T18:33:51.480
> 
> 标签：android, actionbarsherlock

我用 targetSdkVersion="15" & minSdkVersion="8" 构建了一个 android 项目，然后在活动中添加了一个水平进度条，但是当我用 android jelly bean 运行这个项目时它不是全息样式。

我能做些什么？编辑值-v14 style.xml？

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
xmlns:tools="http://schemas.android.com/tools"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ProgressBar
    android:id="@+id/countdown_progressbar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:max="30" /> 
```

价值观和价值观-v14 style.xml

```
<style name="AppTheme" parent="Theme.Sherlock.Light" /> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-22T18:20:10.307

您将需要获取进度条的资源。您可以使用 styles.xml 文件从 [http://android-holo-colors.com/](http://android-holo-colors.com/)获取它们或使用 HoloEverywhere 库：[https ://github.com/Prototik/HoloEverywhere](https://github.com/Prototik/HoloEverywhere)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-01T14:52:59.633

使用`?android:attr/progressBarStyleHorizontal`而不是`@android:style/Widget.ProgressBar.Horizontal`.

据我了解，`?android:attr/progressBarStyleHorizontal`是当前主题样式的进度条样式，而`@android:style/Widget.ProgressBar.Horizontal`只是普通的 android 进度条样式。

代码应如下所示：

```
<ProgressBar
    android:id="@+id/countdown_progressbar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="?android:attr/progressBarStyleHorizontal"
    android:max="30" /> 
```

# ruby-on-rails - Rails 应用程序登录在某些浏览器上失败

> ID：15044084
> 
> 赞同：0
> 
> 时间：2013-02-23T18:34:11.537
> 
> 标签：ruby-on-rails, browser, login

我最近使用 Michael Hartl 的教程制作了一个 Rails 应用程序，但遇到了障碍；

每当有人使用 chrome 或 firefox 创建用户时，它都会创建用户并登录；正如它应该。但是当使用 safari 或 IE 创建用户时，创建了用户但登录失败。但是，用户可以使用 chrome 或 firefox 登录。我怀疑这与 cookie 和会话有关，但我不知道该怎么做才能解决这个问题。

这是网站：[http](http://www.shoulakpredictions.com)
://www.shoulakpredictions.com 这是代码：[https ://github.com/JShoe/basketball](https://github.com/JShoe/basketball)

随意分叉、测试和创建用户等等。我需要我能得到的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:30:17.227

确保浏览器启用了来自所有来源的 cookie。对于 Chrome 和 Firefox，这是默认设置，但对于其他浏览器，可能必须专门启用它。

# ember.js - Ember.js 视图和参数

> ID：15044085
> 
> 赞同：3
> 
> 时间：2013-02-23T18:34:13.067
> 
> 标签：ember.js

我有一个像这样的 Ember.js 路由：

```
this.route 'doc', path: '/docs/:doc' 
```

我需要根据`:doc`参数设置模板。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:26:19.750

也许你可以尝试这样的事情：

1.  在属性“templateName”中将所需的模板名称设置到您的上下文/模型中。
2.  在您的路线的视图中访问视图的上下文（=您的模型）并读取属性并将其设置为视图的模板名称。

* * *

```
App.DocView = Ember.View.extend({
    render : function(buffer){
      var context = this.get("context.content");
      this.set("templateName", context);
      this._super(buffer);
    }
}); 
```

链接到小提琴：http: [//jsfiddle.net/mavilein/DQ8gS/2/](http://jsfiddle.net/mavilein/DQ8gS/2/)

# python - Flask：子目录中的静态文件

> ID：15044094
> 
> 赞同：12
> 
> 时间：2013-02-23T18:34:37.220
> 
> 标签：python, flask, fastcgi, url-for

在我的烧瓶模板文件中，我包含一个 css 文件（我省略了样板文件），如下所示：

`url_for('static', filename='css/bootstrap.css')`

这使得`/static/css/bootstrap.css`它被解释为哪个意思（因为前导斜杠）`domain.com/static/css/boostrap.css`。不幸的是，实际`static`文件夹位于一个子目录：`domain.com/projects/test/static/`

**环境细节：**

我的 fcgi 文件位于`~/fcgi-bin`文件夹中（我猜是主机特定的）：

```
$ cat ~/fcgi-bin/test.fcgi
#!/usr/bin/env python2.7

import sys
sys.path.insert(0, "/home/abcc/html/projects/test")

from flup.server.fcgi import WSGIServer
from app import app

class ScriptNameStripper(object):
   def __init__(self, app):
       self.app = app

   def __call__(self, environ, start_response):
       environ['SCRIPT_NAME'] = ''
       return self.app(environ, start_response)

app = ScriptNameStripper(app)

if __name__ == '__main__':
    WSGIServer(app).run() 
```

我的 .htaccess 位于 domain.com/projects/test/

```
$ cat .htaccess 
<IfModule mod_fcgid.c>
   AddHandler fcgid-script .fcgi
   <Files ~ (\.fcgi)>
       SetHandler fcgid-script
       Options +FollowSymLinks +ExecCGI
   </Files>
</IfModule>

<IfModule mod_rewrite.c>
   Options +FollowSymlinks
   RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteRule ^(.*)$ /fcgi-bin/test.fcgi/$1 [QSA,L]
</IfModule> 
```

总而言之，我想`url_for('static', filename='css/bootstrap.css')`返回`static/css/bootstrap.css`而不是`/static/css/bootstrap.css`

## 编辑#1

我注意到这也发生在普通的 url_for 调用上，而不是像 url_for('about') 这样的静态文件。

## 编辑#2

我已经写了一个[快速入门应用程序](https://github.com/JonasGroeger/flask-uberspace-quickstart)和[一篇](http://jonasgroeger.de/projekte/blog/projekt-flask-auf-dem-hoster-uberspace-blitzschnell-mit-hubschen-urls-aufsetzen/)关于此的博客文章。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T19:57:58.383

不要将脚本名称设置为空白字符串，尝试将其设置为“/projects/test”。通过将 SCRIPT_NAME 设置为空白字符串，应用程序认为它在域的根目录上运行，因此 url_for 生成的路由将从那里开始。脚本名称为“/projects/test”，`url_for('static', filename='/foo/bar.css')`将返回“/projects/test/static/foo/bar.css”

如果您真的希望在不同的端点上提供您的应用程序静态媒体，那么您只需要自己滚动它，如下所示：

```
from flask import Flask
from os.path import join

app = Flask(__name__)

def url_for_static(filename):
    root = app.config.get('STATIC_ROOT', '')
    return join(root, filename) 
```

# jquery - jQuery Mobile 中的 GAE Blobstore 异常

> ID：15044095
> 
> 赞同：1
> 
> 时间：2013-02-23T18:34:43.430
> 
> 标签：jquery, spring, google-app-engine, jquery-mobile, blobstore

当我`blobstore upload form JSP`使用 `jQuery Mobile 1.3.0`. 我在下面发布代码。

```
<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory"%>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService"%>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<link rel="stylesheet" href="/css/common.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
 <%
   BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
 %>
 <form method="POST" action="<%=blobstoreService.createUploadUrl("/upload")%>"
  id="uploadImageForm" enctype="multipart/form-data">
    <label for="newsTitle">New Title</label>
    <input type="text" name="newsTitle" id="newsTitle" placeholder="Please enter some title" />
    <div style="clear: both; width: 100%;"></div>

    <label for="newsDescription">New Description</label>
    <textarea name="newsDescription" id="newsDescription" placeholder="Please enter some description" rows="10"></textarea>
    <div style="clear: both; width: 100%;"></div>

    <label for="newsPic">Choose Image (if any)</label>
    <input type="file" name="newsPic" id="newsPic" class="newsPic" />
    <div style="clear: both; width: 100%; height: 10px;"></div>

    <input type="submit" name="submit" data-role="button" data-inline="true" value="Submit" />
  </form>
</body> 
```

当我尝试通过此表单将任何文件上传到 blobstore 时，出现此异常。

```
WARNING: Error for /_ah/upload/agpsdW1paW5uZXdzchsLEhVfX0Jsb2JVcGxvYWRTZXNzaW9uX18YOAw
java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Arrays.java:2786)
at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:71)
at javax.mail.internet.MimeMultipart.readTillFirstBoundary(MimeMultipart.java:245)
at javax.mail.internet.MimeMultipart.parse(MimeMultipart.java:181)
at javax.mail.internet.MimeMultipart.getCount(MimeMultipart.java:109)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet.handleUpload(UploadBlobServlet.java:146)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet.access$000(UploadBlobServlet.java:69)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet$1.run(UploadBlobServlet.java:112)
at java.security.AccessController.doPrivileged(Native Method)
at com.google.appengine.api.blobstore.dev.UploadBlobServlet.doPost(UploadBlobServlet.java:109)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 
```

当我尝试使用普通的 css 和 jquery 库使用简单的 JSP 页面上传时，一切正常。

```
<%@ page
import="com.google.appengine.api.blobstore.BlobstoreServiceFactory"%>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService"%>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>News App : Upload New News</title>

 <link href="/bootstrap/css/bootstrap-responsive.css" type="text/css"
rel="stylesheet" />
 <link href="/bootstrap/css/bootstrap.css" type="text/css"
rel="stylesheet" />
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"
type="text/javascript"></script>
 <script src="/bootstrap/js/bootstrap.js" type="text/javascript"></script>
</head>
<body>
<%
    BlobstoreService blobstoreService = BlobstoreServiceFactory
            .getBlobstoreService();
%>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span1"></div>
        <div class="span10">
            <ul class="nav nav-tabs">
                <li><a href="/">Home</a></li>
                <li class="active"><a href="/newpost">Post New Topic</a></li>
            </ul>
            <form method="POST"
                action="<%=blobstoreService.createUploadUrl("/upload")%>"
                id="uploadImageForm" enctype="multipart/form-data">
                <fieldset>
                    <legend class="text-info">Upload Form</legend>
                    <label for="newsTitle">News Title</label> <input type="text"
                        name="newsTitle" id="newsTitle" class="span12"
                        placeholder="Type some title..." />
                    <div class="clear"></div>
                    <label for="newsDescription">News Description</label>
                    <textarea class="textarea span12" name="newsDescription"
                        id="newsDescription" placeholder="Type some description..."
                        style="height: 70px;"></textarea>
                    <div class="clear"></div>
                    <label for="newsPic">Choose Picture</label> <input type="file"
                        name="newsPic" id="newsPic" placeholder="Type some title..." />
                    <div class="clear"></div>
                    <input type="submit" class="btn btn-success" value="Submit" />
                </fieldset>
            </form>
        </div>
        <div class="span1"></div>
    </div>
</div> 
```

根本无法理解为什么会出现这个问题。我需要你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:40:01.840

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:02:52.703

I suspect Tolis has the answer on this, so I'll take a shot at the "I need your suggestions" part.

This is the kind of problem where it really helps to reduce the failure to the smallest possible test case (or at least a smaller test case than this). This helps in several ways: First, it'll often lead you to seeing the otherwise hard-to-spot typo that you might have made. (If I had a nickel for every time I accidentally typed "multipart/form-date"... But that's hard to spot when there's lots of extra clutter.)

Second, by eliminating distractions, it helps the people who are trying to help you by giving them less irrelevant stuff to wade through.

Third, if you do find a bug, a simple test case greatly improves the chance that it'll get fixed quickly.

In this particular case, I seriously doubt that either `spring` or `css` have *anything* to do with the behavior you're seeing. The non-file input fields could also go, unless they change the behavior you're seeing.

# javascript - 通过 Javascript 反转 HTML 段落列表

> ID：15044097
> 
> 赞同：0
> 
> 时间：2013-02-23T18:34:54.943
> 
> 标签：javascript, dom, reverse

我正在使用 Javascript（无 jQuery）创建段落列表，以获得最佳睡眠时间（基于 REM 睡眠周期）并将其显示在页面上，[这是代码](http://codepen.io/anon/pen/wbhGl)。

```
function sleepnow() {
    var result = '';
    var a = new Date();
    var hour = a.getHours();

    var minutes = a.getMinutes() + 14;
    if (minutes > 60) {
        minutes = minutes - 60;
        hour = hour + 1;
    }

    for (var counter = 0; counter < 6; counter++) {
        if (minutes < 30) {
            minutes = minutes + 30;
        } else {
            minutes = minutes - 30;
            hour = hour + 1;
        }
        hour = hour + 1;

        if (hour >= 24) {
            if (hour === 24) {
                hour = 0;
            } else if (hour === 25) {
                hour = 1;
            }
        }

        if (hour > 9) {
            result = result + '<p>' + hour;
        } else {
            result = result + '<p>0' + hour;
        }

        if (minutes > 9) {
            result = result + ':' + minutes + '</p>';
        } else {
            result = result + ':0' + minutes + '</p>';
        }
    }
    document.getElementById('sleepnow').innerHTML = result;
} 
```

如何反转该列表以首先显示较远的列表，依此类推？我用 .reverse() 尝试了一个小时，但我无法让它工作，它只会翻转所有内容，包括 < p > 标签，破坏所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:43:25.247

我会将数据与 html 分开一点。与其构建一个字符串，不如构建一个时间数组。然后，您可以在构建 html 字符串时以相反的顺序循环它。

```
1\. create data structure, contains only numbers, no html (model)
2\. convert data to html (view)

var html = '';
for (var counter = YOURDATA.length-1; counter >= 0; counter--) {
    var t = YOURDATA[counter];
    html += ' build your string ' + t + '...';
} 
```

这种情况也应该没问题，但要小心原始数据中的特殊字符 (&<>\"")。通常，您应该为 html 上下文转义所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:45:29.363

首先：答案是：通过使用一个中间累加器字符串变量**currentOne**正常累加，并在结果中以其他顺序累加：**result = currentOne + result**而不是**result = result + currentOne**。享受：

```
function sleepnow() {
var result = '';
var a = new Date();
var hour = a.getHours();

var minutes = a.getMinutes() + 14;
if (minutes > 60) {
    minutes = minutes - 60;
    hour = hour + 1;
}

for (var counter = 0; counter < 6; counter++) {
var currentOne = "";

    if (minutes < 30) {
        minutes = minutes + 30;
    } else {
        minutes = minutes - 30;
        hour = hour + 1;
    }
    hour = hour + 1;

    if (hour >= 24) {
        if (hour === 24) {
            hour = 0;
        } else if (hour === 25) {
            hour = 1;
        }
    }

    if (hour > 9) {
        currentOne = currentOne + '<p>' + hour;
    } else {
        currentOne = currentOne + '<p>0' + hour;
    }

    if (minutes > 9) {
        currentOne = currentOne + ':' + minutes + '</p>';
    } else {
        currentOne = currentOne + ':0' + minutes + '</p>';
    }

result = currentOne + result;
}
document.getElementById('sleepnow').innerHTML = result;
} 
```

其次：请不要在没有完整描述对方的情况下进行外部链接。外部链接可能会过期、变得无关紧要等。

第三：您在该代码中弄得一团糟:)

# mysql - 更新内部连接 - mysql

> ID：15044100
> 
> 赞同：1
> 
> 时间：2013-02-23T18:35:18.500
> 
> 标签：mysql

我经常使用以下查询，但是对于这个新数据库，它给了我一个错误使用的错误，你们可以看看，让我知道我做错了什么吗？

```
UPDATE `master` maa
INNER JOIN `cdr` ca ON `maa`.numbers=ca.target
SET `maa`.monthly_mins=ca.secs
ORDER BY ca.secs; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:39:21.803

你可以试试这个吗？不过，这就是文档对多表更新的说明。

> 对于多表语法，UPDATE 更新 table_references 中命名的每个表中满足条件的行。在这种情况下，不能使用 ORDER BY 和 LIMIT。

再说一次，您只更新一个表。通过仅删除 order by 子句将有所帮助。

```
UPDATE `master` maa 
INNER JOIN `cdr` ca 
ON `maa`.numbers=ca.target 
SET `maa`.monthly_mins=ca.secs; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:41:58.627

尝试这个

```
 UPDATE `master` maa
   INNER JOIN `cdr` ca 
   ON `maa`.numbers=ca.target
   SET `maa`.monthly_mins=ca.secs 
```

# linux - 如何在 bash 中创建零拷贝、无容量、阻塞管道？

> ID：15044102
> 
> 赞同：0
> 
> 时间：2013-02-23T18:35:32.727
> 
> 标签：linux, bash, pipe

我知道这个概念听起来有点滥用（？），但仍然 - 我如何在 bash 中创建一个管道：

1.  没有能力
2.  因此不需要内存副本，并且
3.  要求写被阻塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:15:02.063

我在这里猜了很多。但可能您正在考虑协同处理，但不知道该术语的含义。

bash 支持协同进程： `http://www.gnu.org/software/bash/manual/html_node/Coprocesses.html`

```
 The format for a coprocess is:

    coproc [NAME] command [redirections]

    This creates a coprocess named NAME. 
If NAME is not supplied, the default name is COPROC.

NAME must not be supplied if command is a simple command (see Simple Commands); 

otherwise, it is interpreted as the first word of the simple command. 
```

执行 coproc 时，shell 在执行 shell 的上下文中创建一个名为 NAME 的数组变量（请参阅数组）。command 的标准输出通过管道连接到执行 shell 中的文件描述符，并将该文件描述符分配给 NAME[0]。

command 的标准输入通过管道连接到执行 shell 中的文件描述符，并将该文件描述符分配给 NAME[1]。

此管道在命令指定的任何重定向之前建立（请参阅重定向）。

文件描述符可以用作 shell 命令的参数和使用标准词扩展的重定向。

# ruby-on-rails - ckeditor-rails 和回形针无法正常工作

> ID：15044104
> 
> 赞同：1
> 
> 时间：2013-02-23T18:36:04.733
> 
> 标签：ruby-on-rails, amazon-s3, ckeditor, paperclip

我正在使用 CKEditor-rails ( [https://github.com/tsechingho/ckeditor-rails](https://github.com/tsechingho/ckeditor-rails) )，我在上传图片时遇到了一些问题。上传照片的模型如下所示：

```
class Ckeditor::Picture < Ckeditor::Asset
  has_attached_file :data,
                    :styles => { :content => '800>', :thumb => '118x100#' },
                    :s3_credentials => "#{Rails.root}/config/s3.yml",
                    :bucket => "********"

  validates_attachment_size :data, :less_than => 2.megabytes
  validates_attachment_presence :data

  def url_content
    url(:content)
  end
end 
```

当我使用CKEditor上传图片时，图片的URL是一个路径，格式为“/system/**/图片/数据*/000/000/016/content/**.jpg”。*

 *看起来图像甚至没有被上传。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:43:28.507

我在我的模型中使用了这个设置，试试这个。

```
has_attached_file :logo, :styles => { :orig => "300x400>",
                        :thumb => {:geometry => "80x58#", :format => :png},
                        :full => {:geometry => "#{SEARCH_IMAGE_WIDTH}x#{SEARCH_IMAGE_HEIGHT}#", :format => :png, :jcrop => true},
                        :cropped => {:geometry => "#{LOGO_WIDTH}x#{LOGO_HEIGHT}>", :jcrop => true, :format => :png} },
                        :storage => :s3,
                        :s3_credentials => "#{Rails.root.to_s}/config/s3.yml",
                        :path => "logos/:id/:style/:basename.:extension",
                        :bucket => "photo/#{Rails.env}/system" 
```*

# com - 了解 COM 对象

> ID：15044106
> 
> 赞同：1
> 
> 时间：2013-02-23T18:36:19.517
> 
> 标签：com, vbscript

我正在尝试理解 COM 概念。根据我的理解：COM 是一个二进制接口或执行函数库（机器语言），借助供应商公开的函数和属性，任何编程语言都可以对其进行扩展或重用。

所以如果下面的代码我们可以说`Fso`或`Txtobj`创建的对象是 COM 或 ActiveX 对象吗？

而如果我们想用Java等其他编程语言创建相同的文件系统或文本流对象，我们应该怎么做？因为我们说 COM 是独立于语言的。

```
Set Fso = CreateObject("Scripting.FileSystemObject")

Set Txtobj = Fso.CreateTextFile("C:\Users\ACER\Desktop\Project Folder\NewText_5.txt") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T05:37:15.550

如果我理解正确你的问题是什么：

某物是一个 COM 对象，它基于*它的构建*方式以将其功能公开给使用它的其他代码。它必须按照某些规则构建，并且必须提供某些强制性的功能，并且必须在二进制级别（位和字节）以非常特定的方式这样做。不幸的是，具体规则冗长且过于复杂，无法在此答案中解释。

*使用*对象的代码也必须遵守规则和特定的二进制要求。

语言独立性来自这样一个事实，即规则是如此精确，并且它们的设计与任何特定语言无关。很多语言都可以用来编写 COM 对象，也有很多语言可以使用 COM 对象。我的意思是那些语言需要为程序员提供一种机制来遵守这些规则。这是关键：规则没有具体*说明*语言应该如何使遵守规则成为可能。每种语言都有不同的方式；有些语言会自动为您处理很多细节，而另一些语言则需要您手动完成大部分工作。有些只为 COM 使用特殊语法，而另一些则使用与其他所有内容相同的语法。

请注意，“语言独立性”（我更恰当地称之为“语言中立性”）与“语言普遍性”不同。并非每种语言都可以使用 COM。

考虑到这一点，您的答案是：

1）您如何通过读取示例中的代码行来知道某物是否是 COM 对象？

真正的答案是：“这取决于对象是如何编写的。如果它是为了遵守 COM 规则而编写的，并且它是通过您的语言中的 COM 机制调用的，那么它就是一个 COM 对象”。在查看代码并试图在不查看对象细节的情况下确定它是否为 COM 的特定情况下，答案是：“这取决于语言。”

在您的 VBScript 示例代码中，两者都是 COM 对象。表达式使用命令的事实`Set`立即告诉您变量将引用 COM 对象。请记住，答案在其他语言中会有所不同（例如，即使在 VB6 中，存在`set`也不足以知道对象是否为 COM 对象）。

2) 语言独立性是如何实现的？

它是通过在二进制级别使用严格的规则来实现的。不同的语言以不同的方式遵守规则，这没关系。某些语言无法遵守这些规则，因此它们不支持 COM。

您展示的那些特定对象具有自己的功能，是的，它们通过功能和属性工作；这些是一些规则。如果一种语言没有允许您调用这些函数的机制，那么该语言就不能用于使用 COM 对象。

如果你想学习这些规则，它们通常用 C 或 C++ 表示，关于这个主题的最好的书之一是 Don Box 的《Essential COM》。

# vb.net - 转换类型整数误区

> ID：15044107
> 
> 赞同：0
> 
> 时间：2013-02-23T18:36:25.257
> 
> 标签：vb.net

我很抱歉我的英语不好。我希望有人可以解释错误的`The conversion from type MySqlDataReader to type Integer is invalid`含义。

我确信这是一个简单的'Dim a Integer，但它比这更大，或者我只是愚蠢。

我的 btnLogin_Click 代码：

```
Dim SQL As New MySQLHook
Dim loginResult As Integer

Dim User As TextBox = Me.Controls.Item("TextGebruikersNaam")
Dim Pass As TextBox = Me.Controls.Item("TextGebruikersPass")

If String.IsNullOrEmpty(User.Text) Or String.IsNullOrEmpty(Pass.Text) Then
    MsgBox("Voer een gebruikersnaam en wachtwoord in om verder te gaan.", MsgBoxStyle.Exclamation, "Foutmelding")
    User.Focus()
Else
    loginResult = SQL.Results("SELECT * FROM tblgebruikers " & "WHERE GebruikersNaam='" & User.Text & "' AND " & "GebruikersPass='" & Pass.Text & "'")

    If loginResult = 1 Then
        ' Login was good, todo: add code here
    Else
        MsgBox("De gebruikersnaam of wachtwoord is onjuist. Probeer het opnieuw of vraag een nieuw wachtwoord aan.", MsgBoxStyle.Exclamation, "Foutmelding")
        User.Text = ""
        Pass.Text = ""
        User.Focus()
    End If
End If 
```

我的结果代码（SQL.Results 来自 As New MySQLHook）

```
Public Function Results(ByVal sql)
    Try
        Dim conn = Connect()

        Dim myAdapter As New MySqlDataAdapter
        Dim myCommand As New MySqlCommand()

        myCommand.Connection = conn
        myCommand.CommandText = sql

        myAdapter.SelectCommand = myCommand

        Dim myData As MySqlDataReader

        myData = myCommand.ExecuteReader()
        Return myData
    Catch myerror As MySqlException
        clsError.logMessage("De server retourneerde de volgende foutmelding: " & myerror.Message)
        Return DBNull.Value
    End Try
End Function 
```

我也尝试使用此功能，但它给了我相同的错误消息：

```
Public Function num_results(ByVal sql)
Try
    Dim conn = Connect()

    Dim myAdapter As New MySqlDataAdapter
    Dim myCommand As New MySqlCommand()

    myCommand.Connection = conn
    myCommand.CommandText = sql
    myAdapter.SelectCommand = myCommand

    Dim myData As MySqlDataReader

    myData = myCommand.ExecuteReader()
    Return myData
Catch myerror As MySqlException
    clsError.logMessage("De server retourneerde de volgende foutmelding: " & myerror.Message)
    Return DBNull.Value
End Try
End Function 
```

为什么会弹出这个转换错误？我确信 1 或 0 是不言自明的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:38:57.383

您的问题是您正在创建一个[数据阅读器](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)并返回它。您需要`myData`在返回之前从变量中读取整数。

所以，而不是：

```
Return myData 
```

您应该能够使用：

```
Return myData.GetInt32(0) 
```

该`0`语句中的 标识您要读取的列，并且由于您从 SQL 查询中返回单个列，因此它位于索引 0 中。

解决此问题后，*请*在继续之前搜索“SQL 注入”和“参数化 SQL 查询”。让您的应用程序对 SQL 注入开放是一个严重的风险。

# python - Python中的奇怪行为

> ID：15044110
> 
> 赞同：-3
> 
> 时间：2013-02-23T18:36:39.567
> 
> 标签：python, list

我写了一个简单的程序来将 DNA 翻译成 RNA。基本上，您输入一个字符串，它将字符串分成字符并将它们发送到一个列表，移动字母并从结果列表中返回一个字符串。该程序正确地将 a 转换为 u，并将 to 转换为 a，但不会将 g 转换为 c，将 c 转换为 g。

这是程序：

```
def trad(x):

    h=[]
    for letter in x:
        h.append(letter)
    for letter in h:
        if letter=="a":
            h[h.index(letter)]="u"
            continue
        if letter=="t":
            h[h.index(letter)]="a"
            continue
        if letter=="g":
            h[h.index(letter)]="c"
            continue
        if letter=="c":
            h[h.index(letter)]="g"
            continue
    ret=""
    for letter in h:
        ret+=letter
    return ret

while True:
    stry=raw_input("String?")
    print trad(stry) 
```

现在，只需通过不迭代元素而是在位置上迭代来改变程序，它就可以按预期工作。这是生成的代码：

```
def trad(x):
    h=[]
    for letter in x:
        h.append(letter)
    for letter in xrange (0, len(h)):
        if h[letter]=="a":
            h[letter]="u"
            continue
        if h[letter]=="t":
            h[letter]="a"
            continue
        if h[letter]=="g":
            h[letter]="c"
            continue
        if h[letter]=="c":
            h[letter]="g"
            continue
    ret=""
    for letter in h:
        ret+=letter
    return ret

while True:
    stry=raw_input("String?")
    print trad(stry) 
```

为什么会出现这种奇怪的行为，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T18:40:49.313

你正在以一种比必要的方式更难的方式来解决这个问题，这可以很容易地使用[`str.translate()`](http://docs.python.org/2.7/library/stdtypes.html#str.translate)- 一种`str`将一个字符的实例转换为另一个字符的实例的方法，这正是你想要的：

```
import string
replacements = string.maketrans("atgc", "uacg")
while True:
    stry=raw_input("String?")
    print stry.translate(replacements) 
```

这是 2.x 的答案，在 3.x 中，请`str.maketrans()`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:42:11.333

我不确定您遇到什么类型的问题，但这里有一个简单的方法，使用字典。

```
def trad(coding_strand):
    mRNA_parts = {'a': 'u', 't': 'a', 'g': 'c', 'c': 'g'}
    mRNA = ''
    for nucleotide in coding_strand: # this makes it lowercase
        mRNA += mRNA_parts[nucleotide.lower()]
    return mRNA.upper() # returns it as uppercase 
```

我将它以大写形式返回，因为通常 DNA/RNA 中的核苷酸都是大写的。

我还修改了您的方法...最好自己遍历索引；那么你不必这样做`l.index(elem)`。

```
def trad(coding_strand):
    mRNA = []
    for index in range(len(coding_strand)):
       nucleotide = coding_strand[index].upper()
       if nucleotide == 'A':
           mRNA.append('U')
       elif nucleotide == 'T':
           mRNA.append('A')
       elif nucleotide == 'C':
           mRNA.append('G')
       elif nucleotide == 'G':
           mRNA.append('C')
    ret = ''
    for letter in mRNA:
        ret += mRNA
    print ret 
```

我不建议使用字符串并添加到它或使用列表；列表理解更有效。

这是一个半单班轮，由 BurhanKhalid 提供：

```
def trad(coding_strand): 
    mRNA_parts = {'A': 'U', 'T': 'A', 'G': 'C', 'C': 'G'}
    return ''.join([mRNA_parts[nucleotide] for nucleotide in coding_strand.upper()]) 
```

一个完整的单行：

```
def trade(coding_strand, key={'A': 'U', 'T': 'A', 'G': 'C', 'C': 'G'}): ''.join(return [key[i] for i in coding_strand.upper()]) 
```

一些参考资料：

*   [字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)
*   [列出理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

# css - 创建透明的透视或纹理字体样式

> ID：15044120
> 
> 赞同：3
> 
> 时间：2013-02-23T18:37:37.620
> 
> 标签：css, html, fonts

是否可以指定字体样式（字体颜色等），以便我可以不使用纯色：

*   将一个 HTML 元素放在另一个元素之上，并使字体透明，这样我就可以让文本穿过顶部元素并通过字母区域查看底部元素的内容？

*   指定带有图像的文本（例如/至少没有动画），所以我可以使用纹理文本而不是纯色？

是否可以使用任何 CSS 级别/版本、HTML5 或某些本机 Web 浏览器规范？

是否可以至少使用 Canvas 检测每个字母的区域，还是应该完全手动完成，或者在纯 HTML/HTML5/CSS 中是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:46:01.977

我认为您所说的第一个类似于 Illustrator 中的剪贴蒙版？如果是这样，那么[这里在 CSS-Tricks 上](http://css-tricks.com/image-under-text/)`background-clip`描述了一个功能，但是目前这仅在 webkit 浏览器中支持，我不确定 IE10，因为它比其他 IE 版本具有更多的兼容性。

快速谷歌搜索“带有 CSS 的图案文本”已显示[此页面](http://code.stephenmorley.org/html-and-css/textured-and-patterned-text/)并对其进行了解释。

**编辑 - - - - - - - -**

对于 webkit 浏览器它是`webkit-background-clip`，对于 IE9+ 它只是`background-clip`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:55:11.173

如果要为文本设置透明度，只需使用：

```
color: rgba(0, 0, 0, .5); 
```

在此处查看更多信息[http://www.w3schools.com/cssref/css_colors_legal.asp](http://www.w3schools.com/cssref/css_colors_legal.asp)

我不知道是否有不同的方式来处理纹理化的字母，但你可以为文本编写一个解析器，将字母替换为图像文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:23:41.593

您可以尝试使用要使用的文本创建一个[svg 掩码](http://www.w3.org/TR/SVG11/masking.html)，然后[将 SVG 代码直接嵌入到 HTML](http://www.w3schools.com/svg/svg_inhtml.asp)中。这种方法应该适用于大多数现代浏览器。

# php - Dreamweaver 和 zend2 错误

> ID：15044122
> 
> 赞同：0
> 
> 时间：2013-02-23T18:37:45.583
> 
> 标签：php, zend-framework2, dreamweaver

我一直在使用 Dreamweaver 11.0 版来构建一个使用 php 和 ZF1 的动态网站。我刚开始迁移到 ZF2 并且我的代码正在运行，但是对于任何带有“\”的行，我都会收到红色的“语法错误”，例如：

```
use Zend\Session\Container; 
```

有没有办法告诉 Dreamweaver 不要将此视为错误？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:46:02.050

我强烈建议转移到另一个 IDE，例如 Zend Studio。Dreamweaver 更倾向于前端开发技术。Zend Studio 也有很多集成的库，包括 Zend Framework 和很多其他的。

如果您的项目很复杂，您可以同时使用 Zend Studio 和 Dreamweaver，只需在 Dreamweaver 中创建一个站点并将所有 html 内容目录（例如公共、布局、视图）添加到该站点，您就可以在此处更改您的 html....

# ruby - 如何从外部静态类访问 Capistrano 方法？

> ID：15044125
> 
> 赞同：1
> 
> 时间：2013-02-23T18:38:14.823
> 
> 标签：ruby, deployment, capistrano

简单的问题；所以我在 capistrano 中的 deploy.rb 脚本看起来像这样，我可以轻松地使用**捕获**功能：

```
namespace :mycompany do
    def some_function()
        mylog = capture("some_command")
    end

    desc <<-DESC
        some task description
    DESC
    task :some_task do
        mylog = capture("some_command")
    end
end 
```

但是，如果我在类中使用该方法，如下所示：

```
namespace :mycompany do
    class SomeClass
        def self.some_static_method()
            mylog = capture("some_command")
        end
    end
end 
```

它惨遭失败：

```
/config/deploy.rb:120:in `some_static_method': undefined method `capture' for #<Class:0x000000026234f8>::SomeClass (NameError) 
```

那怎么办呢？这种方法似乎不是静态的 :( 它在这里（capistrano 来源）：

```
module Capistrano
    class Configuration
        module Actions
            module Inspect

                # Executes the given command on the first server targetted by the
                # current task, collects it's stdout into a string, and returns the
                # string. The command is invoked via #invoke_command.
                def capture(command, options={})
                    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:44:41.983

有人建议使用**包括**这种方式：

```
namespace :mycompany do
    class SomeClass
        include Capistrano::Configuration::Actions::Inspect

        def self.some_static_method()
            mylog = self.new.capture("some_command")
        end
    end
end 
```

但这失败了，捕获内部出现错误：

```
/var/lib/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/configuration/actions/inspect.rb:34:in `capture': undefined local variable or method `sudo' for #<#<Class:0x00000001cbb8e8>::SomeClass:0x000000027034e0> (NameError) 
```

所以我所做的只是将实例作为参数传递（hacky 但它有效）。

```
namespace :mycompany do
    def some_function()
        SomeClass.some_static_method(self)
    end

    class SomeClass
        def self.some_static_method(capistrano)
            mylog = capistrano.capture("some_command")
        end
    end
end 
```

FML

# c - 转换无效*

> ID：15044126
> 
> 赞同：1
> 
> 时间：2013-02-23T18:38:19.167
> 
> 标签：c, casting, void-pointers

我对 C 语言非常陌生，并且在演员阵容方面遇到了麻烦。以下是我认为相关的代码行：

```
#define BUF 1025
char hostname[BUF];

hostname = *(char *) qpop(&queue); 
```

这是我从编译器得到的错误：

> 错误：从 char 类型分配给类型 'char[1025]' 时类型不兼容

请注意，函数 qpop 返回一个 void*。我认为我的问题是如何将 void* 转换为 char[1025]。从错误消息来看，我似乎正在转换为 char 类型，而不是 char[1025] 类型。我试过这个：

```
hostname = *(char[1025] *) qpop(&queue) 
```

但这也没有用。

有人可以帮我理解如何做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T18:39:54.960

数组不是一流的类型。您不能分配给数组。您必须将内存/元素复制到数组中：

```
memcpy(hostname, qpop(&queue), BUF) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:50:00.663

铸造没有意义。因为您不能直接将指针分配给数组。仅供参考，语法是 : `hostname = (char(*)[1025]) qpop(&queue)`。您可以将其读作“指向 1025 个字符数组的指针”

@Cornstalks 给出了最好的解决方案

# android - android检测键盘上的当前字符集

> ID：15044130
> 
> 赞同：1
> 
> 时间：2013-02-23T18:38:52.323
> 
> 标签：android, character-encoding, keyboard

在android中，有没有办法以编程方式检测键盘上正在使用的当前字符集（或语言）？
谢谢！

# jquery - 根据 MVC 中的文化的 DateTime 格式

> ID：15044132
> 
> 赞同：0
> 
> 时间：2013-02-23T18:39:00.833
> 
> 标签：jquery, validation, asp.net-mvc-4, jquery-validate, culture

我有一个 MVC 视图，其中列出了一个名为“CreatedOn”的 dateTime 类型列，值的格式如下：' **DD/MM/YYYY HH:MM:SS** '，当我单击编辑链接修改值时，我获得了相同的格式，

当我修改编辑的值时，我收到验证错误：“**字段 CreatedOn 必须是日期。** ”

我的 EF 模型类将此字段映射为 DateTime 类型。

我的数据库排序规则是**French_CI**，sql server 表中的字段是 smalldatetime 类型，当我打开表查看字段格式时，我发现它类似于 ' **YYYY-MM-DD HH:MM:SS** '

我验证了默认的应用程序文化并找到了“fr-FR”，然后我在 web.config 文件中添加了下一个代码：

```
<system.web>
  <globalization uiCulture="fr-FR" culture="fr-FR" />
</system.web> 
```

但是问题还是一样，请问有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:53:41.957

jQuery Validate 不了解文化。

我相信日期，它只是调用 javascript: `new Date(value)`。

您可以使用全球化插件和一些 javascript 来解决此问题。

微软在这里写了一个全球化插件：[https ://github.com/jquery/globalize](https://github.com/jquery/globalize)

然后你想用这样的东西替换验证方法：

```
$.validator.methods.date = function (value, element) {
  return this.optional(element) || Globalize.parseDate(value);
} 
```

您可能还想替换数字等的其他方法 - 请查看底部的`jquery.validate.js`示例。

# scheme - 和 Racket 中的操作员一样

> ID：15044134
> 
> 赞同：2
> 
> 时间：2013-02-23T18:39:08.107
> 
> 标签：scheme, racket

我看不到任何通常在其他语言中发现的**AND**或**OR**类型的运算符，它们可以与 if 条件结合以检查多个条件。

如何在 Racket 中实现这些类型的任务？

我知道，`cond`但我想不出解决我问题的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T19:06:26.227

它在那里：[文档](http://docs.racket-lang.org/reference/if.html?q=and#%28form._%28%28lib._racket/private/letstx-scheme..rkt%29._and%29%29)

```
Welcome to DrRacket, version 5.3.3.5 [3m].
Language: racket [custom].
> (and (even? 10) (odd? 10))
#f
> (or (even? 10) (odd? 10))
#t 
```

# iphone - iOS中的正则表达式问题

> ID：15044136
> 
> 赞同：-1
> 
> 时间：2013-02-23T18:39:15.907
> 
> 标签：iphone, ios, regex

我正在尝试使用以下模式。

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"#{{[[[0-9]{1,10}-[0-9]{1,10}-[0-9]{1,10}]]}}" options:0 error:&error];
NSString *originalMesssage = @"test  #{{[[8-16-5]]}}";
NSArray *arrResults = [regex matchesInString:originalMesssage options:NSRegularExpressionCaseInsensitive
                                       range:NSMakeRange(0, [originalMesssage length])]; 
```

在使用上述正则表达式过滤后，我希望“8-16-5”作为返回值。显然问题出在“{}”和“[]”字符上。我用[http://regexpal.com/](http://regexpal.com/)测试了相同的模式，它在那里工作正常。1）我应该在上面的代码中使用任何通配符吗？

参考：[NSRegularExpression](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

以下是最终对我有用的代码。

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"#\\{\\{\\[\\[[0-9]{1,10}-[0-9]{1,10}-[0-9]{1,10}\\]\\]\\}\\}" options:0 error:&error];
NSString *originalMesssage = @"test  #{{[[8-16-5]]}}";
NSArray *arrResults = [regex matchesInString:originalMesssage options:NSRegularExpressionCaseInsensitive
                                       range:NSMakeRange(0, [originalMesssage length])];

NSTextCheckingResult *match = [arrResults objectAtIndex:0];
NSRange matchRange = [match range];
NSString *resultString = [originalMesssage substringWithRange:matchRange]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T18:43:05.120

、`[`、和字符在正则表达式中具有特殊含义`]`。你需要逃避它们：`{``}`

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\#\\{\\{\\[\\[[0-9]{1,10}-[0-9]{1,10}-[0-9]{1,10}\\]\\]\\}\\}" options:0 error:&error];
NSString *originalMesssage = @"test  #{{[[8-16-5]]}}";
NSArray *arrResults = [regex matchesInString:originalMesssage options:NSRegularExpressionCaseInsensitive
                                       range:NSMakeRange(0, [originalMesssage length])];
```

# c++ - C++ UDP 跨平台、快速库（非 boost）

> ID：15044138
> 
> 赞同：-3
> 
> 时间：2013-02-23T18:39:19.627
> 
> 标签：c++, udp, static-libraries

我期待 C++、UDP、跨平台库。

是否有任何简单易用且快速（免费用于商业目的）的库？

我想要小型、独立的图书馆，而不是最大或抽象解决方案的一部分，**提升我不感兴趣**（解释为什么不是真正的问题主题，也许是论坛讨论，但我们现在离题了）。如果该库是用 C++ 而不是 C 风格编写的，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T18:43:32.657

尝试[UDT](http://udt.sourceforge.net/)

它是 C 风格的，但没有什么是几个简单的包装器无法解决的。它也很容易编译。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T18:42:45.637

[Asio](http://think-async.com/) 是一个不错、易于使用、快速、免费、独立的库。

# ipad - 从子类调用 ViewController 的对象

> ID：15044155
> 
> 赞同：0
> 
> 时间：2013-02-23T18:40:40.803
> 
> 标签：ipad, ios6, uiviewcontroller, subclass

我正在为 iPad 开发 iOS 6 应用程序。我有一个子类，我想从中调用 ViewController 的对象。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:48:09.763

我认为您想将 ViewController 的属性访问到您的子类中。然后将该属性视为您的子类属性。

子类意味着您已将基本 viewController 派生到您的 subviewController 中，即现在您将 baseViewController 的所有属性和方法都包含到您的 subViewController 中。

示例-就像您将 TableViewController 继承到 ViewController

```
@interface ViewController: UITableViewController 
```

现在在这里您可以轻松地使用 TableViewController 的 tableView ，就像它是您的 ViewController 的属性一样，您可以像访问它一样

```
self.tableView 
```

# matlab - Matlab 声音处理使用 Wavread

> ID：15044157
> 
> 赞同：0
> 
> 时间：2013-02-23T18:40:59.367
> 
> 标签：matlab

我正在尝试使用 matlab 更改 .WAV 文件的频率，因为 WAV 文件正在运行（声音（y，FS）），我对如何处理它感到困惑。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:44:16.817

您可以以较低的速率重新采样数据（使用许多插值函数之一，例如[`interp1`](http://www.mathworks.co.uk/help/matlab/ref/interp1.html)）。然后将结果传递给`sound`。

或者，只需将`fs`参数修改为`sound`.

# javascript - javascript中的对象数组

> ID：15044160
> 
> 赞同：3
> 
> 时间：2013-02-23T18:41:31.183
> 
> 标签：javascript

我想这是一个非常简单的问题，但不确定实现这一目标的最佳方法是什么。

我想创建多个项目的对象。我应该做这样的事情：

```
var projects = {};
projects.url = "www.example.com";
projects.description = "Project Description"; 
```

但是如何将这个项目对象用于多个项目？

编辑：我虽然像一些答案所建议的那样使用数组，但是有什么方法可以避免使用数组吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T18:43:42.607

有一组项目对象。

```
var projects = [
    {
        url: 'http://www.example.com',
        description: 'Project Description'
    },
    {
        url: 'http://www.example2.com',
        description: 'Project 2'
    }
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:01:38.430

创建一个项目类：

```
var Project = function() {};

Project.prototype = {
    url: "www.example.com",
    description: "Project Description"
}; 
```

然后您可以创建这些对象的多个实例：

```
var proj1 = new Project(),
    proj2 = new Project(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T18:55:02.110

最好的答案是使用数组，但是如果您坚持尝试将方形钉锤入圆孔中，则可以使用这样的对象...

## 免责声明：这个代码像你岳母一样丑陋，不要使用它

```
var projects = {}

projects.project1 = {
  url = "www.example.com";
  description = "Project Description";
}

projects.project2 = {
  url = "www.example2.com";
  description = "Project2 Description";
} 
```

并像这样选择...

```
for(i=0;i<2;i++){
  console.log(projects["project"+i].description)
} 
```

## 编辑：一些可能有用的代码......

我唯一能想象使用对象而不是数组来处理这样的事情是有用的，如果您的项目具有唯一的 ID，并且您需要大量不按顺序查找它们。列出项目有一个好处，使用它们的 ID 作为键，这样如果你知道 ID，你可以直接选择对象，而不是循环遍历一个数组来找到你想要的...

```
projects = {
  projAcHRx:{ ... },
  projFhv5R:{ ... }
}

// select project: projAcHRx
projects.projAcHRx // <~ very simple lookup if you know the ID 
```

而不是

```
projects = [
  { id:'projAcHRx',
    ... },
  { id:'projFhv5R',
    ... },
]

// select project: projAcHRx
for(i=projects.length;i;i--){
  if(projects[i] == 'projAcHRx'){
    var selected = projects[i] // <~ hideously complex selection!
  }
} 
```

# java - XPath 和安卓

> ID：15044161
> 
> 赞同：0
> 
> 时间：2013-02-23T18:41:34.910
> 
> 标签：java, android, xpath

在我的 android 程序上，我有一个基于`res/xml/myFile.xml`此文件的 XML 文件，其中包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <ip>192.168.1.189</ip> 
    <port>2000</port>
</configuration> 
```

我尝试`port`使用以下代码从节点获取价值：

```
InputStream is = getResources().openRawResource(R.xml.myFile);
InputSource inSrc = new InputSource(is);
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
domFactory.setNamespaceAware(true); 
DocumentBuilder builder = domFactory.newDocumentBuilder();
Document xmlFile = builder.parse(inSrc);
XPath xpath = XPathFactory.newInstance().newXPath();

XPathExpression expr = xpath.compile("/configuration/port");
Node node = (Node)expr.evaluate(xmlFile, XPathConstants.NODE);
String port = node.getNodeValue(); 
```

有了这个代码**节点**就等于NULL。有人有一个想法，为什么我在**节点**上得到一个 NULL 值以及如何从**ip**和**端口**节点获取值？

谢谢你的帮助。

# types - Java Cast 从 Object[] 到 double[] 数组和 Double[] 到 double[] 数组

> ID：15044162
> 
> 赞同：1
> 
> 时间：2013-02-23T18:41:42.983
> 
> 标签：types

有没有办法在不使用任何循环的情况下将`Object[]`数组转换为数组。`double[]`并将`Double[]`数组转换为`double[]`数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-01T12:59:44.120

2013 年我们还没有 Java [Stream API](https://docs.oracle.com/javase/8/docs/api/)，就在 2014 年 3 月。有了它，您可以得到答案：

**从 Object[] 到 double[]**

```
Object[] objectArray = {1.0, 2.0, 3.0};

double[] convertedArray = Arrays.stream(objectArray) // converts to a stream
    .mapToDouble(num -> Double.parseDouble(num.toString())) // change each value to Double
    .toArray(); // converts back to array 
```

**从双[]到双[]**

```
Double[] doubleArray = {1.0, 2.0, 3.0};

double[] conv = Arrays.stream(doubArray)
    .mapToDouble(num -> Double.parseDouble(num.toString()))
    .toArray(); 
```

您注意到这是相同的操作，因为两种转换的结果类型都是**double[]**。改变的是源数据。

*PS：什么迟到的答案：|*

# css - 使用 css 更改文本框的宽度

> ID：15044163
> 
> 赞同：0
> 
> 时间：2013-02-23T18:41:45.030
> 
> 标签：css, stylesheet

我有这样的css类：

```
.new-fld input[type="text"]{width:418px !important; margin-bottom:0px !important; height:18px !important; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; font-size:14px; /*padding:0 8px;*/} 
```

它适用于页面上的所有输入字段。

我希望某些字段长度不同，所以我创建了另一个这样的类

```
 .new-fld input[type="text"]{width:45px !important; margin-bottom:0px !important; height:18px !important; background-color:transparent !important; color:#FFF !important; border-bottom:1px solid #FFF; border-left:none !important; border-right:none !important; border-top:none !important; font-size:14px; /*padding:0 8px;*/} 
```

并像这样应用它

```
 <div class="new-fld">
                                        <input type="text" value="+44 1793 853219" name="">
                                          <input type="text" value="+ 44" readonly="readonly" name="Dialprefix1" id="Dialprefix1" class="dialprefix" style="text-align:right;width:45px;">

                                        <span>*</span>                                        
                                        </div> 
```

如您所见，我以文本框样式输入了宽度，但仍然无法正常工作。

但它不工作。请建议我很好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T18:46:21.227

采用

```
 <input type="text" value="+ 44" readonly="readonly" name="Dialprefix1" id="Dialprefix1" class="dialprefix" style="text-align:right" size='10' /> 
```

并检查结果。

好的，这将解决您的问题（但我希望有充分的理由将 !important 添加到所有样式中）：

```
<input type="text" value="+ 44" readonly="readonly" name="Dialprefix1" id="Dialprefix1" class="dialprefix" style="text-align:right;width:45px !important;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:46:56.287

> **.new-fld 输入[type="text"]{width:418px !important;**

**

> .new-fld 输入[type="text"]{width:45px !important;

**

你有两个同名的班级。你必须给它起不同的名字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T09:08:12.133

我不明白为什么您没有简单地为各个元素声明不同的属性？在您的解释和选择的答案中，它似乎是为包含的 div 设置属性的选择方法？

又名：

```
.new-fld
{
    property:value;
} 
```

# 我的解决方案：

为什么不给每个输入元素自己的 id/class。在您的示例中，您为第二个文本框提供了以下标识符： id="Dialprefix1", class="dialprefix"

所以你可以这样设置属性：

```
#Dialprefix1
{
    size:22px; /* Change value (Width of box) */
    maxlength:22px; /* Change value (Max Accepted amount of chars in textbox) */
} 
```

或通过类声明分配属性：

```
.dialprefix
{
    size:22px; /* " " */
    maxlength:22px; /* " " */
} 
```

有关可以分配给输入字段的不同属性的详细信息，请参阅。 [http://www.w3schools.com/tags/tag_input.asp](http://www.w3schools.com/tags/tag_input.asp)

注：前缀“.” 在 CSS 中告诉解析器您正在引用一个类，而“#”前缀是指该特定 HTML 元素的 id。

# c# - 如何在编码模式下将超链接放入标签中？

> ID：15044170
> 
> 赞同：0
> 
> 时间：2013-02-23T18:42:44.180
> 
> 标签：c#, text, hyperlink, visual-studio-2012, label

我正在创建一个 BMI 计算器，我想知道当文本编码显示在标签中时如何让用户单击超链接。这是我到目前为止所拥有的：

```
else if (bmi >= 35 && bmi <= 40)
{
     bodytypetextLabel.Text = "Visit this website. http://www.sears.com/fitness-sports-treadmills/c-1020252";
} 
```

我不确定在“”超链接前面放什么，以便在用户遇到该 BMI 结果时，它可以作为运行形式的超链接供用户单击。请帮忙。提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:29:12.270

### 试试这个代码：

```
bodytypetextLabel.Text = "Visit this website <a href=\"http://www.sears.com/fitness-sports-treadmills/c-1020252\">here</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-25T04:12:04.810

## **这很容易：**

**1.您需要添加：**

```
 using System.Diagnostics; 
```

**2\. 就是这样：**

```
 private void linkLabel3_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        Process.Start("https://www.google.com");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:14:44.610

使用链接标签而不是常规标签来启用超链接功能。

您可以访问[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.linklabel.aspx)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T12:02:23.090

您可以只使用“a”标签，没有 URL 的“a”标签就像一个标签。希望这可以帮助某人。

# arrays - 如何计算 O(Log(N))？

> ID：15044172
> 
> 赞同：2
> 
> 时间：2013-02-23T18:42:49.460
> 
> 标签：arrays, algorithm, complexity-theory

我想确切地知道如何为这个例子计算 O(Log(N))：我们有一个由 10 个元素组成的排序数组 [1 3 4 8 10 15 18 20 25 30] 当我们进行正常搜索时，我们的复杂度为O(10) 这意味着我们必须检查数组的每个情况，所以 O(10) = 10。但是如果我们进行二分搜索，因为我们有一个排序数组，我们的复杂度为 (O(Log(10))这个符号的结果是什么 O(Log(10))= ??? ? 我有一个误解，我们应该使用 Log base 10 还是 2 或者到底是什么？谢谢你的帮助

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T18:56:50.040

您误解了算法增长顺序的概念。请阅读一本关于算法的书，让你的概念更强大。无论如何，我会尝试在高层次上解释，

如果您有一个包含 10 个元素的数组，如您所说，并且您进行“正常搜索”（称为线性搜索），则您正在遍历数组中的每个元素，这意味着如果有 'n' 个元素，则有 'n' 个元素必须检查。所以它是 O(n) 而不是 O(10)。如果它是 O(10) [ btw, O(10) = O(1) ] 这意味着它总是需要 10 次或更少的迭代，无论数组中有多少元素，情况并非如此. 如果您的数组有 100 个元素，则需要 100 次迭代，所以我们说顺序是 O(n)，其中 n 是输入大小（这里是数组的大小）。

上面的方法是针对非排序数组的，对于排序数组，我们可以使用更快的方法来搜索，就像你在字典中查找单词一样，这种技术称为二分查找。这里发生的情况是，您查找数组的中间元素，看看您要搜索的数字在哪里，无论是在前半部分还是下半部分。然后，您选择所需的一半并应用相同的分成两半并检查的方法。由于这是递归完成的，它使用对数增长（在二进制搜索的情况下，它是以 2 为底的对数）。请阅读二分搜索和对数增长顺序以获得更好的理解。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T20:05:00.107

我认为您对为什么二进制搜索是 log(n) 以及为什么它是基数 2 感到困惑。这样想，在二进制搜索的每一步，您都将输入大小减少 2。您需要多少次去做这个 ？您需要以 2 次为底执行此 log n 以将样本量减少到 1。

例如，如果您有 4 个元素，第一步将搜索减少到 2，第二步将搜索减少到 1，然后您停止。因此，您必须将 (4) 记录到基数 2 = 2 次。换句话说，如果 log n base 2 = x，则 2 的 x 次方是 n。

因此，如果您进行二进制搜索，您的基数将是 2。更清楚的是，在您的情况下，Log(10) 基数 2 将是 3.3 左右，即您最多将进行 4 次比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T18:51:43.703

恐怕这不是渐近的工作方式。Big-O 表示法旨在描述算法如何针对可变大小的输入进行缩放。特别是，算法对固定输入（如上所述）所需的操作数将始终保持不变，即 O(1)。类似地，大 O 表示法对常数乘法是不变的。这意味着：

*   O(1) = O(10) = O(Log(10))
*   对数的基数无关紧要，因为更改基数只会引入一个常数因子

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T19:19:15.387

> 我有一个误解，我们应该使用 Log base 10 还是 2 或者究竟是什么

不要紧。复杂性没有改变。对数基数 2 与以下内容相同：

```
Log_2(N) = Log(N) / Log(2) 
```

两者都是 的元素`O(Log(N))`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-06T10:48:39.153

好吧，O-notation 没有给出复杂度函数的确切值。它给出了增长率。如果你这么说的话

T( *n* ) = O(lg *n* )

意味着如果增加*n ，搜索**n 个*元素的数组所需的时间算法不会比 lg *n*增长得快。

 **你问的问题应该以不同的方式提出。您可能会问的问题是算法需要多少步迭代（或递归）来搜索*n 个*元素的数组。

这个问题的答案是算法不需要超过

( **int** )(lg *n* )

脚步。

因此，如果您有 10 个元素的数组，那么算法将在不超过 lg 10 = 3 次迭代中找到请求的值（或发现它不存在于数组中）。**

# thumbnails - 更新到 wordpress 3.5.1 后，update_post_meta 添加特色图片到帖子不再有效

> ID：15044173
> 
> 赞同：1
> 
> 时间：2013-02-23T18:42:59.343
> 
> 标签：thumbnails, wordpress-3.5

我写了一个插件，它使用：

add_post_meta($post_id, '_thumbnail_id', $attach_id);

为帖子设置特色图片。这个插件已经运行了一年多。我更新到 wordpress 3.5.1，它不再工作了。未设置特色图片。

我曾尝试使用 add_post_meta 和 set_post thumbnail，但无济于事。有没有其他人遇到过这个问题，最重要的是，有没有人知道该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T16:52:29.600

我正在寻找一种在帖子上设置特色图片的解决方案，我正在使用

```
update_post_meta($post_id, '_thumbnail_id', $attach_id); 
```

它对我来说很好，希望你能得到类似的运气。

谢谢

# android - ViewPager 出现内存不足错误

> ID：15044179
> 
> 赞同：3
> 
> 时间：2013-02-23T18:43:23.713
> 
> 标签：android, android-viewpager

我已经实现了一个 ViewPager，它给了我一个 Out Of Memory 错误，我不知道为什么会这样。我有大约 11 张图片要展示，每张图片大约有 500 kb（磁盘大小），它们是 .jpg 格式。

这是代码：

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_bmw_gallery);

ViewPager viewPager = (ViewPager) findViewById(R.id.view_pager);
ImagePagerAdapter adapter = new ImagePagerAdapter();
viewPager.setAdapter(adapter);
}

private class ImagePagerAdapter extends PagerAdapter {
private int[] mImages = new int[] {
    R.drawable.bmw_1series_3door_wallpaper_01,
    R.drawable.bmw_1series_3door_wallpaper_02,
    R.drawable.bmw_1series_3door_wallpaper_03,
    R.drawable.bmw_1series_3door_wallpaper_04,
    R.drawable.bmw_1series_3door_wallpaper_05,
    R.drawable.bmw_1series_3door_wallpaper_06,
    R.drawable.bmw_1series_3door_wallpaper_07,
    R.drawable.bmw_1series_3door_wallpaper_08,
    R.drawable.bmw_1series_3door_wallpaper_09,
    R.drawable.bmw_1series_3door_wallpaper_11,
    R.drawable.bmw_1series_3door_wallpaper_12
};

@Override
public int getCount() {
  return mImages.length;
}

@Override
public boolean isViewFromObject(View view, Object object) {
  return view == ((ImageView) object);
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
  Context context = MainActivity.this;
  ImageView imageView = new ImageView(context);
  imageView.setAdjustViewBounds(true);

  imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

  imageView.setImageResource(mImages[position]);
  ((ViewPager) container).addView(imageView, 0);
  return imageView;
}

@Override
public void destroyItem(View collection, int position, Object o) {
    View view = (View)o;
    ((ViewPager) collection).removeView(view);
    view = null;
}

}

} 
```

我做错了什么或我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T18:56:55.277

磁盘上的 500KB JPEG 图像将占用比这更多的堆空间。

例如，我这里有一张 494KB 的数码照片，分辨率为 1455 x 1029。如果我将其加载到 Android 应用程序中，它将消耗 1455x1029x3 = 4.3MB 的堆空间。如果您有 11 张具有相似特征的图像，它们加起来将消耗 > 40MB。大多数设备的每个进程都有 16-32MB 的堆空间。

如果你想发送 11 个可绘制资源（在这种情况下，可能是图像会让你被 BMW 起诉），你需要有更小的图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T08:31:50.033

我在这里找到了解决方案：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html) 我刚刚在我的内部实现了 BitmapFun 项目。这样应用程序工作得非常好，我不再得到内存不足错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-01T17:35:56.217

在 viewpager 中显示高分辨率图像时，我遇到了同样的问题。我已经搜索并应用了[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)中给出的所有 android 位图解决方案，以下在链接中缓存机制。但它们都不起作用。任何地方都没有任何正确的解决方案。

Then I figured out that the problem is : I couldnt use the drawable folder structure right. I was keeping high resolution images in mdpi and hdpi folders . this cause android scale up the images to the ultra sizes. 100 kb image was causing 20 mb increase in memory thanks to the android monitor / memory section. so I have added these ultra resolution images to xxhdpi folder , then It was FIXED suddenly. then my image slider work flawlessly with high resolution images

# css - 为什么 .ui-widget 匹配 .ui-widget .ui-widget

> ID：15044188
> 
> 赞同：0
> 
> 时间：2013-02-23T18:43:57.757
> 
> 标签：css, jquery-ui, css-selectors

我正在试验 jquery-ui 并查看和克隆一些示例。`.ui-widget .ui-widget { css: stuf}`在一个示例（自动完成的组合框）中，我看到一个带有类 ui-widget 的锚 (a) 元素，它在包含的 css 文件中被匹配。

我或多或少地克隆了这个例子，但我的`a.ui-widget`匹配版本`.ui-widget { other-css: stuff}`（如我所料）

什么会使第一个示例匹配 css 文件中的双条目和我的克隆单条目。

我没有看到任何其他相关的差异 css 条目是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:47:18.347

`.ui-widget`因为选择器更通用（或不太具体）：只要元素具有该类，它就会匹配*任何元素。*A`.ui-widget`仍然是 a `.ui-widget`，无论它是否包含在*其他* `.ui-widget`元素中，所以它仍然会匹配`.ui-widget`选择器。

如果使用选择器的规则`.ui-widget`覆盖*了*使用选择器为同一元素声明的相同规则`.ui-widget .ui-widget`，那么就有问题了，因为后者更具体，因此应该优先。但这并不能阻止两个选择器匹配同一个元素，因为您基本上是在寻找同一个类。

# php - 如果 url 目标页面不存在，如何更改链接的颜色

> ID：15044190
> 
> 赞同：0
> 
> 时间：2013-02-23T18:43:58.553
> 
> 标签：php

我正在制作一个简单的 wiki 风格的网站。我在数据库中有一些文本，想用 [link] 标签建立链接。

```
$text = preg_replace('@\[(.*) (.*)\]@', '<a href="\\1" >\\2</a>', $text); 
```

现在，如果目标页面不存在，我想更改链接的颜色。怎么做？

如果我像这样在 preg_replace 中插入 php 代码：

```
$text = preg_replace('@[(.*) (.*)]@', '<a href="\\1" class="<?php Wiki::urlchecker($\\1) ?>">\\2</a>', $text); 

it doesnt work, generates:
<a href="link" class="<?php Wiki::urlchecker($link) ?>">Name</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:47:11.700

用于[`get_headers`](http://php.net/manual/en/function.get-headers.php)检查它是否存在，然后使用逻辑将其用 HTML 着色。

[这个问题](https://stackoverflow.com/questions/2280394/check-if-an-url-exists-in-php)将向您展示如何检查 URL 是否存在。

[这个问题](https://stackoverflow.com/questions/13767079/changing-font-color-of-link-text)将向您展示如何更改链接的颜色。

# php - 在给定算法之后计算值的总和

> ID：15044192
> 
> 赞同：0
> 
> 时间：2013-02-23T18:44:46.493
> 
> 标签：php, math, sum

我必须在 PHP 中实现一个算法，但我被卡住了。

我有下表：[http ://cl.ly/image/1Z0K1g0z2c3y](http://cl.ly/image/1Z0K1g0z2c3y)

对于每次迭代，（S）值计算如下：

S1 = V1 - P1

S2 = (V1 - P1) + (V2 - P2)

S3 = (V1 - P1) + (V2 - P2) + (V3 - P3)

等等。

我的值数组如下所示：

```
Array
(
    [0] => Array
        (            
            [v] => 131.44            
            [p] => 
        )

    [1] => Array
        (
            [v] => 155.00
            [p] => 
        )

    [2] => Array
        (
            [v] => 168.64
            [p] => 
        )

    [3] => Array
        (
            [v] => 131.44
            [p] => 131.44
        )

    [4] => Array
        (
            [v] => 280.00
            [p] => 280.00
        )

    [5] => Array
        (
            [v] => 117.80
            [p] => 117.80
        )

    [6] => Array
        (
            [v] => 70.68
            [p] => 70.68
        )

    [7] => Array
        (            
            [v] => 58.90
            [p] => 58.90        
) 
```

是否可以使用 for() 循环计算每次迭代的总和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:55:16.017

**编辑：**

假设您更新到的数组名为 $table：

```
// $S is array for S where sums are stored
$S = array();
$S[0] = $table[0][v] - $table[0][p]; // Perform the first row
for ($i=1; $i< count($table); $i++) { // Start at 2nd and continue on
  $S[$i] = $S[($i-1)] + ($table[$i][v] - $table[$i][p]);
} 
```

现在所有的 $S 值都是这样填充的。如果要添加到表中：

```
$table[0][s] = $table[0][v] - $table[0][p]; // Perform the first row
for ($i=1; $i< count($table); $i++) { // Start at 2nd and continue on
  $table[$i][s] = $table[$i-1][s] + ($table[$i][v] - $table[$i][p]);
} 
```

* * *

是的，你可以，考虑到你想要 1、2、3 的 S 值……那么是的。我假设 V 是一个数组，而 P 是一个数组，所以你必须相应地改变，因为每个 S 都可以基于前一个，我保留一个 running_sum 值，这样我们就不必遍历 V 的先前值和P，我们只使用 S 的最后一个值：

```
// $V is array for V and $P is array for P and 
// $S is array for S where sums are stored
if (count($V) == count($P)) { // Check both V and P are same length
  $running_sum = 0;
  for ($i=0; $i< count($V); $i++) {
    $running_sum += ($V[$i] - $P[$i]);
    $S[$i] = $running_sum;
  }
} 
```

虽然我们真的不需要运行总和变量，但我用它来使逻辑清晰，这里没有它：

```
// $V is array for V and $P is array for P and 
// $S is array for S where sums are stored
if (count($V) == count($P)) { // Check both V and P are same length
  $S[0] = $V[0] - $P[0]; // Perform the first row
  for ($i=1; $i< count($V); $i++) { // Start at 2nd and continue on
    $S[$i] = $S[($i-1)] + ($V[$i] - $P[$i]);
  }
} 
```

# css - 如何水平显示带有元素的列表

> ID：15044193
> 
> 赞同：-2
> 
> 时间：2013-02-23T18:45:05.240
> 
> 标签：css, asp.net-mvc, html, razor

我正在尝试水平显示组，每个组列出属于该组的成员。例如：

```
 Group 1:           Group 2:       Group 3:
   1\. Joe Blo         1\. Bob         1\. etc..
   2\. Joe smith       2\. Billybob
   3\. Joe glow        3\. Bobby 
```

我不是css的粉丝，我不确定我在这里做错了什么：

```
<ul id="grpId">
@foreach (var item in Model)
{                  
    <li>           
        Group @Html.DisplayName(item.GroupId.ToString())<br />
        <ol>
            @foreach (var student in item.GroupMembers)
            {
                <li>@String.Format("{0} {1}", student.FirstName, student.LastName)</li>
            }
        </ol>

    </li>

}
</ul> 
```

我的 CSS：

```
#grpId
{
    background-color:aliceblue;
    list-style-type: none;
    padding-right: 20px;
}

    #grpId li
    {
        height:300px;

        background-color: aliceblue;
        display: inline;
        font-weight: bold;
        font-size: large;
    }
        #grpId li ol
        {
            display: inline;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:04:51.087

[***jsFiddle***](http://jsfiddle.net/6H37G/)
请务必指定`<li>`您的 css 规则所针对的类型：`#grpId li`将影响这两种类型的`<li>`元素，但`#grpId > li`仅针对那些是您的直接子`<ul>`

```
#grpId {
    background-color:aliceblue;
    list-style-type: none;
    padding-right: 20px;
}
#grpId > li {
    height:300px;
    display: inline-block;
    font-weight: bold;
    font-size: large;
}
ol > li {
    font-weight: normal;
    font-size: medium;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:04:46.423

使用以下样式：

```
#grpId
{
    overflow: auto;
}

#grpId > li
{
    float: left;
} 
```

# c++ - C++ 中的 getline(isstream, string)

> ID：15044197
> 
> 赞同：0
> 
> 时间：2013-02-23T18:45:29.160
> 
> 标签：c++, getline

我正在努力学习 C++，但由于我还不熟悉 C++ 库和常见错误等，我仍然会遇到一些愚蠢的问题。

现在，我的以下代码失败了：

```
#include <iostream>
#include <string>
#include <cstdlib>
#include <sstream>

void getInt(int & val){
    string output;
    getline(cin output.c_str());
    val = atoi(output.c_str());
} 
```

当我尝试编译它时给我这个错误：

```
test.cpp: In function void getInt(int&):
test.cpp:51: error: expected ) before output
test.cpp:51: error: no matching function for call to getline(std::istream&) 
```

我究竟做错了什么？我觉得我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T18:48:02.653

它应该是

```
getline(cin, output); // comma, no .c_str() 
```

如果你这样做了，当你试图将数据读入一个*空*的、*只读*的内存区域`.c_str()`时，你将调用未定义的行为。那是一些糟糕的魔力。当然，正如 Lightness 在评论中指出的那样，它甚至不会编译，因为它是 a并且需要 a (non- )（但即使你确实设法让它编译，理解未定义的行为也很重要）。**`c_str()``const char*``getline()``char*``const`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T18:47:41.577

`getline`有两个参数。将多个参数传递给函数时，必须用逗号分隔它们。此外，第二个参数可以是 a `std::string`，所以直接传递`output`：

```
getline(cin, output); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T18:49:29.163

```
getline(cin output.c_str()); 
```

你忘了一个逗号，skippy。

另外，您的第二个论点是错误的！字符串本身只是被调用`output`，只有`.c_str()`在需要获取 C 风格的字符缓冲区以用于 C API 时才应该应用它。即不在这里。

```
getline(cin, output); 
```**

# java - 使用 VideoView 捕捉电影结束

> ID：15044207
> 
> 赞同：0
> 
> 时间：2013-02-23T18:46:02.320
> 
> 标签：java, android-videoview, android-2.3-gingerbread

我正在尝试在我的 android 应用程序中播放介绍视频。

所以每当我的应用程序启动时，都会播放一部电影，直到它结束或直到用户触摸屏幕。

之后，用户被转发到菜单活动。

到目前为止，我有以下内容：

```
public class IntroActivity extends Activity {

private VideoView video;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_intro);

    video = (VideoView) findViewById(R.id.videoView1);
    Uri videoUri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.seaofbuttons);
    video.setVideoURI(videoUri);
    video.start();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (video.isPlaying()) {
        video.stopPlayback();
    }
    Intent menu = new Intent(IntroActivity.this,MenuActivity.class);
    startActivity(menu);
    finish();
    return false;

}
} 
```

我不知道如何捕捉电影播放结束的时间，以便能够将用户转发到菜单活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:58:30.050

1)Uri.parse("android.resource://" + getPackageName() + "/" + "资源文件夹" + "videoname.format"); 我认为这应该工作和第二次使用 setOnCompletionListener(MediaPlayer.OnCompletionListener l) [http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html](http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html)

# java - 不明白为什么我的排序算法这么慢

> ID：15044212
> 
> 赞同：1
> 
> 时间：2013-02-23T18:46:39.807
> 
> 标签：java

所以我正在玩快速排序，我注意到一些奇怪的事情，每当我对超过 10 个值进行排序时，与插入排序相比，排序需要很长时间。任何时候我要求它对超过 10 个值进行排序，有人可以解释为什么它这么慢吗？也许这与代码有关。

编辑。我做了一些更改，现在我遇到了堆栈溢出错误，太好了。

```
 public class quicksorttest{
   public static void main(String args[]){
      int array[] = new int[100];
      for(int a =0; a<array.length;a++){
         array[a] = (int)(Math.random()*100);
      }

      quickSort(array,0,array.length);
   }

   public static void quickSort(int array[],int p, int q){
    if(q-p <=1);//skip

    else{
        int x; int i,j,k;
        //let x = middle element in f[p..q-1]. 

        x= array[(p+q/2)];
        i=p;j=p;k=q;
        while(j!=k){
            if(array[j]==x)
                j=j+1;
            else if(array[j]<x){    //swap array[j] with array[i]
                int temp =array[j];
                array[j] = array[i]; array[i]=temp;
                j=j+1;i=i+1;

            }
            else{//array[j]>x
                //swap array[j[ with array[k-1]
                int temp = array[j]; 
                array[j] = array[k-1]; array[k-1]=temp;
                k=k-1;
            }
        }

        quickSort(array,p,i);
        quickSort(array,j,q);

    }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:51:52.163

我处理算法，特别是**递归**算法的方法是遵循以下粗略计划：

*   从一个空数组开始
*   尝试一个包含 1 个元素的数组
*   尝试一个包含 2 个元素的数组（前三个元素很重要，因为它们通常是递归方法的最终状态/）
*   尝试具有 3 或 4 个元素的数组，但尝试相同的集合一段时间，以便您可以重现结果。如果您使用随机集失败，但它在下一次运行时有效，您可能不知道您是否已解决问题或者您正在尝试的数据

只有当你重复上述工作后，你才应该尝试更大的数据集，然后最后尝试随机数据。

在您的情况下，几乎没有小问题，但是递归问题中的小问题可以成倍增加！:-)

首先，尝试上面的方法——如果你仍然卡住，可以在以下位置找到一个非常好的简单实现：[Bob Sedgewicks algorithm site](http://algs4.cs.princeton.edu/23quicksort/Quick.java.html)

值得添加 System.out.println 语句（对于小型数据集 - 对于大型数据集，这不太有用），或者更好的是使用调试器（IntelliJ、Eclipse、Netbeans 等）单步执行

# javascript - 如何从 CouchDB 中的服务器端 javascript 加载静态资源

> ID：15044215
> 
> 赞同：0
> 
> 时间：2013-02-23T18:47:02.740
> 
> 标签：javascript, couchdb

对于 CouchDB，我知道它`show function`可以动态生成 HTML/图像/XML 提要。

在这种情况下，它们必须在脚本本身中并进行编码（例如图像的 base 64），[如这里](http://guide.couchdb.org/draft/show.html)

加载作为设计文档附件的静态资源的最佳方式是什么，例如像 JSON 一样简单，或者使用服务器端 javascript 处理图像和进程？

脚本文件本身是设计文档中的附件。变量 doc 不可用。

有没有类似于 node.js 的方法呢？或者我们在 _show 或 _list 等上下文中使用技巧来显示具有 id: _design/ddoc 的文档？

我相信在那个环境中做 REST 请求也是不可能的，因为 XMLHttpRequest 也不可用。也无法建立数据库连接？

这应该是一个简单的问题，我想知道我在 couchDB 中遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:11:46.203

为了直接服务于网站，您需要使用[url rewrites](http://wiki.apache.org/couchdb/Rewriting_urls)。您将重写`/`以获得您的一个[显示功能](http://guide.couchdb.org/draft/show.html)。使用基本的 HTML 和 JS（可能是嵌入的）引导您的网站。

[CouchApps](http://couchapp.org/page/index)已经完成了很多这样的工作（这里的基本[教程](http://couchapp.org/page/getting-started)）。这是迄今为止最简单的入门方法。这[似乎](https://github.com/isaacs/npmjs.org)是[http://npmjs.org](http://npmjs.org)的服务方式。

这不是演练的地方，所以希望这可以为您提供足够的信息来开始。

如果您的站点需要服务器端逻辑（例如 websockets），此解决方案将不适合您。沙发应用程序所获得的只是数据库、HTML、CSS 和 Javascript。

# java - 如何在 Java 中模拟线程读取的陈旧值？

> ID：15044226
> 
> 赞同：0
> 
> 时间：2013-02-23T18:47:56.383
> 
> 标签：java, concurrency, synchronization

我想模拟在有关并发的书籍中提到的一种情况 - 如果没有适当的同步，一个线程可以看到已经被另一个线程修改的变量的陈旧值。这可能是因为例如 CPU 缓存。

为此，我编写了以下程序。这个想法是有 4 个线程初始化共享数组的不同部分。第 5 个线程（主线程，父线程）等到所有 4 个之前的线程都完成后，迭代共享数组并添加它的值（总是 1，或者如果我幸运的是 null，这意味着一个陈旧的值）

```
package p1;

class ArrFill implements Runnable {
    int l, r;
    Integer[] arr;
    ArrFill(int l, int r, Integer[] arr) {
        this.l = l;
        this.r = r;
        this.arr = arr;
    }

    @Override
    public void run() {
        for(int i = l; i < r; i++)
            arr[i] = new Integer(1);
    }
}

public class Main {

    final static int MAX = 10000000;
    final static int tnum = 4;

    public static void main(String[] args) throws InterruptedException {
        int cores = Runtime.getRuntime().availableProcessors();
        System.out.println(cores);

        Integer[] arr = new Integer[MAX];
        Thread[] t = new Thread[tnum];

        if(MAX % tnum != 0)
            throw new IllegalStateException();

        int step = MAX / tnum;
        int l = 0, r = 0;
        for(int i = 0; i < tnum; i++) {
            l = r;
            r += step;
            t[i] = new Thread(new ArrFill(l, r, arr));
            t[i].start();
        }

        for(int i = 0; i < tnum; i++)
            t[i].join();

        int res = 0;
        for(int i = 0; i < MAX; i++)
            if(arr[i] != null)
                res += arr[i];

        System.out.println(res == MAX);
    }
} 
```

尽管我从未见过过时的值（null），但我已经多次运行该程序。我有2个核心。您知道如何改进该程序以实际呈现缓存值现象吗？或者也许你有一个完全不同的方法？

谢谢！

# android - DirectionalViewPager 和 PageTransformer 创建 NullpointerException

> ID：15044238
> 
> 赞同：3
> 
> 时间：2013-02-23T18:48:48.117
> 
> 标签：android, nullpointerexception, android-viewpager, fragment

我将[DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager/)与 Fragments 一起使用，它工作正常，但只要我通过 setPageTransformer 添加页面转换效果，我就会在 android.support.v4.view.ViewPager.getChildDrawingOrder 获得 NullPointerException。PageTransformer 经过测试，可以与普通的 ViewPager 一起正常工作。有谁知道是什么导致了这个异常以及如何解决它？

# javascript - jquery 提交表单重定向

> ID：15044242
> 
> 赞同：0
> 
> 时间：2013-02-23T18:49:04.650
> 
> 标签：javascript, jquery, html, forms

我怎样才能让它在提交而不是点击时工作？

这是我的表格：

```
<form>
    <input type="radio" name="value" value="http://google.com"><span>Google</span><br>
    <input type="radio" name="value" value="http://yahoo.com"><span>Yahoo</span><br>
    <input type="radio" name="value" value="http://bing.com"><span>Bing</span>
    <input type="submit" value="Submit">
</form> 
```

这是我的jQuery：

```
$(function() {
    $("input[name$='value']").click(function() {
         window.location = $(this).val();
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T18:53:55.923

只需将提交处理程序附加到表单

```
$(function() {
    $("form").submit(function(e) {
        e.preventDefault();//prevent the form from actually submitting
        var $choice = $(this).find("input[name='value']:checked");//get the selected option 
        if ($choice.length)// if an option is selected
            window.location = $choice.val();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:01:47.190

还有一个

```
$('input[value="Submit"]').click(function() {
    var loc = $('form input:radio:checked').val();
    window.location = loc;
    return false;
}); 
```

[JSFiddle](http://jsfiddle.net/uCVsp/)用于测试。

# c# - 在现有 XML 中插入新的子节点

> ID：15044243
> 
> 赞同：4
> 
> 时间：2013-02-23T18:49:07.677
> 
> 标签：c#, asp.net, xml

今天是个好日子。我想就我的代码寻求帮助。我这里有一个包含以下内容的 XML 文档。

```
<?xml version="1.0" encoding="utf-8" ?>
    <TechnicalReport>
      <Data quantity = "2" description ="myDesc" findings = "none" actiontaken = "none" />
    </TechnicalReport> 
```

我想在这里做的是在 . 我搜索了很多关于我的问题的网站，但无济于事。例如，我将添加另一个节点，例如：

```
<?xml version="1.0" encoding="utf-8" ?>
    <TechnicalReport>
      <Data quantity = "2" description ="myDesc" findings = "none" actiontaken = "none" />
      <Data quantity = "3" description ="myDesc2" findings = "none2" actiontaken = "none3" />
    </TechnicalReport> 
```

我已经使用 XMLDataSource 成功地将 XML 文件编译并加载到 Repeater 控件中，但是当我从表单中插入时，Repeater 控件不会更新其内容，甚至我的 XML 文件也不会更新。

这是我的 C# 代码：

```
public void AddNewRecord()
{
    //Load XML Schema
    XmlDocument originalXml = new XmlDocument();
    originalXml.Load(Server.MapPath("xmlTechReportDetails.xml"));

    //Create the node name Technical Report
    XmlNode TechReport = originalXml.SelectSingleNode("TechnicalReport");
    XmlNode Data = originalXml.CreateNode(XmlNodeType.Element, "Data", null);

    //Insert quantity
    XmlAttribute quantity = originalXml.CreateAttribute("quantity");
    quantity.Value = txtQty.Text;

    //Insert description
    XmlAttribute description = originalXml.CreateAttribute("description");
    description.Value = txtDescription.Text;

    //Insert findings
    XmlAttribute findings = originalXml.CreateAttribute("findings");
    findings.Value = txtFindings.Text;

    //Insert actions taken.
    XmlAttribute actionTaken = originalXml.CreateAttribute("actiontaken");
    actionTaken.Value = txtAction.Text;

    Data.Attributes.Append(quantity);
    Data.Attributes.Append(description);
    Data.Attributes.Append(findings);
    Data.Attributes.Append(actionTaken);

    TechReport.AppendChild(Data);
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T10:25:08.247

尝试在方法的末尾添加：

```
originalXml.Save(Server.MapPath("xmlTechReportDetails.xml")); 
```

我认为这是因为您没有保存文件。这就是不保留您的更改的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T12:45:35.473

而不是这段代码：

```
//Create the node name Technical Report
XmlNode TechReport = originalXml.SelectSingleNode("TechnicalReport"); 
```

使用此代码

```
XmlNodeList nodeList = originalXml.GetElementsByTagName("connectionStrings"); 
```

# php - 使用php从mysql中的出生日期计算年龄

> ID：15044250
> 
> 赞同：0
> 
> 时间：2013-02-23T18:49:43.427
> 
> 标签：php, mysql

当用户在我的网站上注册时，他们的出生日期存储在 mysql 数据库中。我正在使用`DATE`数据类型作为出生日期。

如何计算用户当前年龄？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T19:14:30.460

如果您正在寻找 PHP 解决方案，则此方法有效：

```
$today = new DateTime();
$birthdate = new DateTime("1973-04-18");
$interval = $today->diff($birthdate);
echo $interval->format('%y years'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T18:56:33.457

您可以在 MySQL 和 PHP 中使用许多日期函数之一。MySQL 示例：

```
SELECT TIMESTAMPDIFF(YEAR,'1980-02-04',NOW()) AS age 
```

进一步阅读：

*   [https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)
*   [http://www.php.net/manual/en/book.datetime.php](http://www.php.net/manual/en/book.datetime.php)

# php - 通过 Graph API 安排的帖子经常不会发布

> ID：15044251
> 
> 赞同：5
> 
> 时间：2013-02-23T18:49:54.597
> 
> 标签：php, facebook, api, facebook-graph-api, facebook-php-sdk

嗨，我正在使用 facebook php sdk 在我的粉丝专页上发帖。我正在尝试将这些帖子安排到未来。我遇到了一些问题。这是我的代码

```
<?php
// This code is just a snippet of the example.php script
// from the PHP-SDK <https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php>
require_once('facebookphp/src/facebook.php');

$app_id = "xxxxx";
$app_secret = "xxxxxx";

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  => $app_id,
  'secret' => $app_secret,
  'fileUpload' => true,
));

// Get User ID
$user = $facebook->getUser();
var_dump($user); 
if ($user) {
  try {
    $page_id = 'xxxx';
    $album_id = 'xxxxx';
    $page_info = $facebook->api("/$page_id?fields=access_token");
    if( !empty($page_info['access_token']) ) {
        $args = array(
            'access_token'  => $page_info['access_token'],
            'scheduled_publish_time' => "1361642425", #an example timestamp
            'message'       => "test post",
            'source'        => "@" . "/path/to/photo.jpg",
            'published' => "0",

        );
        $post_id = $facebook->api("/$album_id/photos","post",$args);
        #echo $post_id;
    } else {
        $permissions = $facebook->api("/me/permissions");
        if( !array_key_exists('publish_stream', $permissions['data'][0]) ||
            !array_key_exists('manage_pages', $permissions['data'][0])) {
            // We don't have one of the permissions
            // Alert the admin or ask for the permission!
            header( "Location: " . $facebook->getLoginUrl(array("scope" => "publish_stream, manage_pages")) );
        }

    }
  } catch (FacebookApiException $e) {
    var_dump($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
  echo '<a href="'.$logoutUrl.'">logout</a>';
} else {
  $loginUrl = $facebook->getLoginUrl(array('scope'=>'manage_pages,publish_stream'));
  echo '<a href="'.$loginUrl.'">login</a>';
}

// ... rest of your code
?> 
```

这段代码完美地将一张照片发布到我的 facebook 页面上，除非时间到了，否则照片没有发布。在活动日志中，照片仍保留在“预定帖子”部分，并显示错误“抱歉，发布此预定帖子时出现问题”

我怀疑这是因为参数：'published' => "0",

如果我删除此参数或将其设置为 1，则根本不会发布帖子，我会收到错误消息“您无法在已发布的帖子上指定预定的发布时间”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-13T17:57:53.407

用上面的代码安排帖子，对我来说很完美。我只是在 11 分钟后尝试并安排了帖子，11 分钟后我收到了通知，照片已发布在上述相册中。

实际上，它有点像 facebook 错误。

只需转到每个帖子，单击“**重新安排**”并将时间调整 15 分钟（或您想要的任何时间）。由于某种原因，这会单独重置它们，一切都会恢复正常，帖子将再次按计划发布。

我知道这是修复 Facebook 应该自行修复的问题的乏味方法，但它确实有效。

# ms-access - 使用 Javascript 从 MS Access 数据库中获取独处时间

> ID：15044255
> 
> 赞同：1
> 
> 时间：2013-02-23T18:50:16.283
> 
> 标签：ms-access

我的 MS Access 表中有一个显示时间 (hh:mm) 的列。但是，当我使用下面的查询检索这些数据时，我似乎得到了一整年的时间。

我只想显示时间。

```
resultString = resultString +""Time Is : " + rs("Time");
rs.MoveNext(); 
```

结果：

```
Time Is : Sat Dec 30 14:00:00 UTC+0530 1899 
```

我尝试使用`Hour([Time])`，但它似乎不适合上述陈述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:29:19.920

试试下面的vb代码

```
 resultString = resultString + "Time Is : " + Format(CDate(rs("Time")), "hh:MM")
 rs.MoveNext 
```

# git - git 需要的未跟踪文件

> ID：15044260
> 
> 赞同：1
> 
> 时间：2013-02-23T18:50:28.497
> 
> 标签：git

所以在我的目录中，有一个特定于机器的配置文件，我不想为我的 git repo 跟踪它。但问题是，我需要该文件来测试我的应用程序，因此当我拉取该存储库或创建分支时，我需要手动备份该配置文件并将其添加到目录中。任何人都遇到过这样的问题并且可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:57:43.870

通常，我会将示例配置文件添加到 git 存储库，然后将其复制并修改特定于机器或开发环境的值。当不希望密码或 API 密钥等敏感信息受版本控制时，此方法也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:07:23.713

好吧，首先，你要求 git 做一些它不做的事情。这就像生气，当您在系统上复制目录时，cp 不会自动知道将文件从不同的目录复制出来并将它们添加到目标。这没有任何意义。

最简单的解决方案就是设置一个 shell 脚本或别名来满足你的需求。

`alias clone_repo="git clone ssh://git@some.host/git.repo /Users/bob/my_repo && cp /Users/bob/my_saved_config_file.txt /Users/bob/my_repo"`

作为一种更高级的解决方案，git hooks 是 shell 脚本。据推测，您可以编写一个克隆后挂钩来创建文件。但是，您必须使用 --template 开关进行克隆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T18:53:48.360

是否有任何理由将其添加到您的`.gitignore`遗嘱中对您不起作用？

该文件将保留在您的计算机上，但不会被 git 跟踪。如果有人拉你的仓库，如果有必要运行你的应用程序，你需要指示他们创建这个文件。

你可以在你的`README`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T18:57:02.140

您可以在工作目录中添加任何您想要的文件，但不想`commit`在名为[.gitignore的文件中添加](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)

# iphone - 来自不同视图控制器的无效和触发计时器不起作用

> ID：15044268
> 
> 赞同：0
> 
> 时间：2013-02-23T18:51:55.503
> 
> 标签：iphone, objective-c, ios6

myTimer 在 OneViewController 中定义，我试图从 mainviewcontroller 使其无效并再次触发它，但它不起作用。我到底在这里缺少什么。

这是我的代码

```
OneViewController.h

@property (nonatomic, strong) NSTimer *myTimer;

OneViewController.m

@synthesize myTimer;

- (void)viewDidLoad
{

 [super viewDidLoad];

[self myTimerMethod];}

- (void)myTimerMethod{

 NSLog(@"myTimerMethod is Called");

self.myTimer = [NSTimer scheduledTimerWithTimeInterval:2.4
                                           target:self
                                         selector:@selector(updateView:)
                                         userInfo:nil
                                          repeats:YES];

 }

 - (void)updateView:(NSTimer *)theTimer
  {
if  (index < [textArray count])
 {
   self.textView.text = [self.textArray objectAtIndex:index];
   self.imageView.image = [self.imagesArray objectAtIndex:index];
   index++;
}else{

    index = 0;

   }
  }

  MainViewController.h

 @class OneViewController;

 @property (strong, nonatomic) OneViewController *oneviewcontroller;

 MainViewController.m

  @synthesize oneviewcontroller = _oneviewcontroller;

-(void)playpauseAction:(id)sender {

if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"music.png"] forState:UIControlStateNormal];

    [audioPlayer pause];

    [self.oneviewcontroller.myTimer invalidate];

}else{

    [sender setImage:[UIImage imageNamed:@"audiostop.png"] forState:UIControlStateNormal];

    [audioPlayer play];

    [self.oneviewcontroller.myTimer fire];

    if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:06.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
        isFirstTime  = NO; } } }

  - (void)displayviewsAction:(id)sender{

OneViewController *oneviewcontroller = [[OneViewController alloc] init];

oneviewcontroller.view.frame = CGRectMake(0, 0, 320, 430);

CATransition *transitionAnimation = [CATransition animation];

[transitionAnimation setDuration:1];

[transitionAnimation setType:kCATransitionFade];

[transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];

[self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];

[self.view addSubview:oneviewcontroller.view];

 } 
```

感谢帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:58:16.877

您将 OneViewController 创建为方法 displayviewsAction 的局部变量。不像您之前定义的属性。

这就是它不起作用的原因，一旦退出方法，变量就会被释放。

更改此行：

```
OneViewController *oneviewcontroller = [[OneViewController alloc] init]; 
```

有了这个：

```
self.oneviewcontroller = [[OneViewController alloc] init]; 
```

# php - 在 netbeans IDE 7.2.1 上安装 PHP 5.5

> ID：15044269
> 
> 赞同：0
> 
> 时间：2013-02-23T18:51:58.480
> 
> 标签：php, netbeans, netbeans-7

如何在 netbeans IDE（自动完成、着色等）上安装 PHP 5.5？版本为 7.2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T18:49:05.507

我知道这是一个老问题，但是......

对 PHP 5.5 的支持将在 8.0 版中，计划于下个月发布。但是，[候选版本](http://download.netbeans.org/netbeans/8.0/rc/)已经发布并可以使用了。

编辑：

[Netbeans 8.0 已经发布](http://dlc.sun.com.edgesuite.net/netbeans/8.0/final/)，它支持 PHP 5.5。

# linux - vi退出后如何恢复终端内容？

> ID：15044274
> 
> 赞同：14
> 
> 时间：2013-02-23T18:52:58.843
> 
> 标签：linux, unix

vi 或 man 之类的程序或任何其他程序如何用程序自己的内容替换终端内容，然后在退出这些程序后又带回旧的终端内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T18:57:13.847

Vi 翻转到终端支持的备用屏幕缓冲区。这是使用转义序列实现的。有关完整详细信息，请参阅[此链接](http://invisible-island.net/xterm/ctlseqs/ctlseqs.html#The%20Alternate%20Screen%20Buffer)。

这些的 termcap 条目是“ti”进入，“te”退出全屏模式。

正如@Celada 在下面指出的那样，硬编码 xterm 转义序列不是一个好主意™，因为序列根据 $TERM 而有所不同，例如：

```
xterm-颜色
  ti: <Esc> 7 <Esc> [ ? 47 小时
  te: <Esc> [ 2 J <Esc> [ ? 4 7 l <Esc> 8

xterm-256color
  ti: <Esc> [ ? 1 0 4 9 小时
  te: <Esc> [ ? 1 0 4 9 升

```

另一方面，现在非 xterm 终端对 xterm 的支持非常广泛。仅支持 xterm 不太可能导致问题，除非用户具有特殊或过时的 $TERM 设置。资料来源：我支持这样做的产品。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-23T19:48:43.553

通过将控制序列发送到终端（xterm、vt-220）或使用 ncurses（如 mc）。

[ANSI 转义序列](http://ascii-table.com/ansi-escape-sequences.php)以`ESC`(\033 octal)开头`[`。 `;`分隔数字。

C 清除屏幕并将光标移动到 1,1 的示例。

```
#include <stdio.h>

int main()
{
    // clear the terminal
    printf("\033[2J\033[1;1H");
    printf("hello");

} 
```

切换到备用缓冲区和返回 (xterm) 的示例。

```
#include <stdio.h>
#include <unistd.h>

int main()
{
    printf("\033[?1049h\033[H");
    printf("hello\n");
    sleep(1);
    printf("bye");
    sleep(1);
    printf("\033[?1049l");
} 
```

# c# - C# If, Else If 奇数错误

> ID：15044275
> 
> 赞同：1
> 
> 时间：2013-02-23T18:53:17.080
> 
> 标签：c#

我正在为 C# 创建一个库存程序，到目前为止，我已经编写了一个函数来打印我库存中的所有项目，现在我正在创建一个函数来获取有关项目的更多信息。当我打印出我的库存时，它只会打印我的物品名称。此函数将打印所有详细信息，因此如果它是武器，它将打印它的名称、伤害和暴击。

所以这是我的 GetInfo 函数：

```
 public void GetInfo()
{
    Console.WriteLine("If you want more detail about an item, type the number to its left.  \nOtherwise, type (Q)");

    int getinfo;
    int.TryParse(Console.ReadLine(), out getinfo);
    getinfo -= 1; 

    if(getinfo > InventorySlots || getinfo < 0)
    {
        throw new System.Exception("You entered an invalid number"); 
    }

    if (weapons.Count >= getinfo)
    {
        Console.Clear(); 
        Console.Write("Weapon Name: " + weapons[getinfo].name + "\nDamage: " + weapons[getinfo].damage + "\nCritical: " + weapons[getinfo].critical);
        Console.ReadLine(); 
    }

    else if ((weapons.Count + armors.Count) >= getinfo)
    {
        Console.Clear();
        Console.Write("Armor Name: " + armors[getinfo].name + "\nArmor Value: " + armors[getinfo].armor + "\nHealth Boost: " + armors[getinfo].healthboost);
        Console.ReadLine(); 
    }

    else if ((weapons.Count + armors.Count + ores.Count) >= getinfo)
    {
        Console.Clear();
        Console.Write("Ore Name" + ores[getinfo].name + "(" + ores[getinfo].stack + ")"); 
    }

} 
```

现在，问题在于声明：

```
if(weapons.Count >= getinfo 
```

即使 getinfo 大于武器数量，也正在执行。如果语句无效，为什么会执行该语句？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:07:22.970

> 现在，问题是语句 ... 正在执行，即使 getinfo 大于武器数量。

大概你这么说是因为`IndexOutOfBoundsException`当代码遇到这个时你会得到一个：

```
weapons[getinfo].name 
```

所以你假设`getinfo`大于`weapons.Count`。但实际上它*等于* `weapons.Count`。在 C# 中，对列表和数组的索引访问是从零开始的，这意味着它`weapons[weapons.Count - 1]`是该集合中的最后一项。

`if`将您的声明更改为：

```
if (weapons.Count > getinfo) 
```

# javascript - 从闭包实例化为“新”的对象不能直接访问返回对象的属性

> ID：15044276
> 
> 赞同：0
> 
> 时间：2013-02-23T18:53:26.090
> 
> 标签：javascript, closures, memoization

我正在尝试创建一个 UI 组件的 JavaScript 库，这些组件通常由我的团队中的项目使用。我有以下代码来定义库。

```
var libName = function() {
    var _libName = this;

    _libName.componentName = function () {
        // Some Private Variables

        var _componentName = function (args) {
             // Construct the object...
        };

        _componentName.addObject = function (args) {
            // Add an object...
        };

        _componentName.removeObject = function (args) {
            // Remove an object...
        };

        return _componentName;
    }();

    return _libName;
}(); 
```

现在，当我在页面中使用它来创建组件时，我调用以下代码。

```
var component = new libName.componentName(args); 
```

它初始化得很好并创建了我期望的基本组件。现在我想给组件添加一些数据，所以我调用了下面的函数。

```
component.addObject(someObject); 
```

但是，它没有像我期望的那样调用函数，而是说组件对象没有属性“addObject”。我使用以下代码对此进行了研究。

```
if (libName.componentName.addObject) {
    console.log("libName.componentName.addObject exists");    // Logs
} 

if (component.addObject) {
    console.log("component.addObject exists");                // Doesn't log
}

if (component.constructor.addObject) {
    console.log("component.constructor.addObject exists");    // Logs
} 
```

所以我的问题是这里到底发生了什么？为什么一个对象（在这种情况下为组件）无法访问我期望它访问的属性/功能？这是否与我使用记忆闭包来定义库的事实有关？如何使从该库初始化的对象可以访问这些属性/函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:57:07.617

使用函数的原型来定义实例方法：

```
 _componentName.prototype.addObject = function (args) {
        // Add an object...
    };

    _componentName.prototype.removeObject = function (args) {
        // Remove an object...
    }; 
```

您的脚本不起作用，因为您正在调用 _componentName 属性，如果直接在对象上定义，这些属性不会传递给 _componentName 的实例。请记住使用原型继承使用**新均值。**Javascript没有基于类的继承。

# jquery-ui - 一个接一个地打开 jQuery UI 对话框

> ID：15044282
> 
> 赞同：1
> 
> 时间：2013-02-23T18:54:00.310
> 
> 标签：jquery-ui, jquery-ui-dialog, jquery-deferred, jquery-chaining

我有多个 jQuery UI 对话框，我想一个接一个地显示（一个关闭，下一个打开）。目前，它们都显示模态，但后面的一个更大，在我看来它看起来很糟糕/令人困惑。

我通常会打开下一个对话框的关闭功能，但是这些对话框是从单独的功能中调用的，并且它们是动态的，因为并非所有对话框都始终根据某些标准显示。

我正在考虑一种使用方式`$.Deferred`，但我不确定这是否可行，因为我的理解是它更适用于 AJAX 调用之类的事情。

这是一个（非常）简化的示例，说明如何按原样构造代码。

```
<script>
function displayAlert1(){
    $('<div/>', {text: 'Alert 1!'}).dialog({
        modal: true,
        autoOpen: true,
        width: 400,
        buttons: { OK: function(event, ui){ $(this).dialog('close'); } }
    });
}
function displayAlert2(){
    $('<div />', {text: 'Alert 2!'}).dialog({
        modal: true,
        autoOpen: true,
        width: 200,
        buttons: { OK: function(event, ui){ $(this).dialog('close'); } }
    });
}

$(function(){
    // These are actually met from data passed by AJAX
    var condition1 = true;
    var condition2 = true;
    $('a').live('click', function(event, ui){
        if(condition1) displayAlert1();
        if(condition2) displayAlert2();
    }
});
</script>

<!-- The links are actually dynamically produced from AJAX, thus the live() event handler -->
<a>Click Me!</a> 
```

[jsFiddle](http://jsfiddle.net/hqnYr/1/)

我的想法是也许我可以让每个警报函数返回对对话框元素或`$.Deferred`对象的引用，但我不确定如何从主执行部分实现链接（检查条件并调用函数）。

我还想确保它链接到下一个对话框，无论它关闭之前的对话框如何；无论是通过 X、'close' 方法还是 'destroy' 方法。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:34:43.230

想了想，想出了使用堆叠队列的简化方法。我想我可以使用这个`$.Deferred`对象，但它会稍微复杂一点，而且它最终基本上是一个堆栈。

下面是我的代码。我基本上初始化了一个数组以用作我的堆栈，并且我将让每个函数将对话框元素推入堆栈。我绑定到所有未来对话框的关闭事件，并让它打开队列中的下一个。

有一些明显的优化要做，但这是我想要的准系统。

```
function displayAlert1(){
    return $('<div/>', {'class': 'alerts', text: 'Alert 1!'}).dialog({
        modal: true,
        autoOpen: false,
        width: 400,
        buttons: { OK: function(event, ui){ $(this).dialog('close'); } }
    });
}
function displayAlert2(){
    return $('<div/>', {'class': 'alerts', text: 'Alert 2!'}).dialog({
        modal: true,
        autoOpen: false,
        width: 200,
        buttons: { OK: function(event, ui){ $(this).dialog('close'); } }
    });
}

$(function(){
    // These are actually met from data passed by AJAX
    condition1 = true;
    condition2 = true;

    // Dialog stack
    dialogs = [];

    $('a').live('click', function(event, ui){
        if(condition1) dialogs.push(displayAlert1());
        if(condition2) dialogs.push(displayAlert2());

        // Grab the next dialog in queue
        d = dialogs.shift();
        // Check if it is valid, and open it
        if(d && d.dialog){
            d.dialog('open');
        }
    });

    $('.alerts').live('dialogclose', function(event, ui){
        // Grab the next dialog in queue
        d = dialogs.shift();
        // Check if it is valid, and open it
        if(d && d.dialog){
            d.dialog('open');
        }
        // Return false, or the close button (X) will glitch and re-create dialogs
        return false;
    });
}); 
```

[jsFiddle](http://jsfiddle.net/hqnYr/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:59:29.663

您可以使用 2 件事来实现这一点：

1）每个对话框都有一个标识符（您可以将其添加为 div 上的 'id' 属性）

[2）在对话框（ http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)）上收听“关闭”事件

因此，在“关闭”处理程序上，您可以检查当前状态，并根据该状态打开/关闭其他对话框。

当前状态是：当前打开了哪些对话框，以及您用于条件 1、条件 2 等的其他参数。

[http://jsbin.com/iwovob/1/](http://jsbin.com/iwovob/1/)

# java - 字符串无法匹配

> ID：15044284
> 
> 赞同：0
> 
> 时间：2013-02-23T18:54:19.590
> 
> 标签：java, string

我正在为后缀翻译器/计算器编写中缀。我正在从输入文件中读取并尝试匹配读取的字符串。我知道我将正确的字符串传递给方法，正如用于测试的打印语句所看到的那样。我只是无法弄清楚为什么不满足 if 语句的条件！

```
static int j = 1;

    public static void readMath(String str, myStack s, myQueue q) {
            System.out.println("\n~~~round "+j+"~~~ str=="+str);//<--this line confirms that the correct string is being passed in
           //for example: if "1" is passed in, the first if statement's conditions are failing to be met
            j++;

            if (str == "0" || str == "1" || str == "2" || str == "3" || str == "4" || str == "5" || str == "6" || str == "7" || str == "8" || str == "9") {
                System.out.println(">NUMBER"); // <--for testing.
                q.enqueue(str);
            } else if(str == "+" || str=="-") {
                System.out.println("> + or -");
                String x = (String)s.pop();
                String y = x;
                while( !s.isEmpty() && !(x == "<" || x == ">" || x == "&" || x == "|" || x =="=")) {
                    q.enqueue(x);
                    x = (String) s.pop();
                }
                if(x == "<" || x == ">" || x == "&" || x == "|" || x == "=") {
                    q.enqueue(x);
                    s.push(y);
                }
            } else if(str == "<" || str == ">") {
                System.out.println(">GT or LT"); // <--for testing.
                String x = (String) s.pop();
                String y = x;
                while( !s.isEmpty() && !(x == "&" || x == "|" || x == "=")) {
                    q.enqueue(x);
                    x = (String) s.pop();
                }
                if(x == "&" || x == "|" || x == "=") {
                    q.enqueue(x);
                    s.push(y);
                }
            } else if(str == "=") {
                System.out.println("> ="); // <--for testing.
                String x = (String) s.pop();
                String y = x; 
                while( !s.isEmpty() && !(x == "&" || x == "|")) {
                    q.enqueue(x);
                    x = (String) s.pop();
                }
                if(x == "&" || x == "|") {
                    q.enqueue(x);
                    s.push(y);
                }
            } else if(str == "&" || str == "|") {
                System.out.println("> & or |"); // <--for testing.
                String x = (String) s.pop();
                String y = x; 
                while( !s.isEmpty() && !(x == "!" || x == "&" || x == "|")) {
                    q.enqueue(x);
                    x = (String) s.pop();
                }
            } else if(str=="/" || str == "*") {
                System.out.println(">divide or multiply"); // <--for testing.
                String x = (String) s.pop();
                String y = x; 
                while( !s.isEmpty() && !(x == "&" || x == "|" || x == "=" || x == "<" || x == ">" || x == "+" || x == "-")) {
                    q.enqueue(x);
                    x = (String) s.pop();
                }
                if(x == "&" || x == "|" || x == "=" || x == "<" || x == ">" || x == "+" || x == "-") {
                    q.enqueue(x);
                    s.push(y);
                }
            } else if(str == ")") {
                System.out.println(">close paren"); // <--for testing.
                String x = (String) s.pop();
                while( !s.isEmpty() && x != "(" ) {
                    q.enqueue(x);
                    x = (String) s.pop();
                }
            }
        s.printStack();
        q.printQueue();     
    }

    public static myStack s;
    public static myQueue q;

    public static void readMathFile() {
        s = new myStack();
        q = new myQueue();
        File afile = new File ("/Users/tteumer2010/Documents/java/Project1/src/test.txt");
        FileReader fileread = null;

        try { fileread = new FileReader(afile); }
        catch (FileNotFoundException e) {   e.printStackTrace(); }

        BufferedReader bufread = new BufferedReader(fileread);
        String str = new String();
        try {
            while((str = bufread.readLine()) != null) {
                String[] a = parse(str);
                for(int i = 0; i < a.length; i++) {
                    System.out.println(a[i]);
                    readMath(a[i], s, q);
                }
            }
        } catch (IOException e) { e.printStackTrace(); }
    }

    public static String[] parse(String s) {
        String[] str = s.split(" ");
        return str;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T18:56:01.553

另一个字符串相等问题，给你...

```
(str == "0" and all the string equality compariosions in your code 
```

应该

```
("0".equals(str) 
```

使用`equals()`方法检查**字符串是否相等**。`==`运算符检查两个字符串引用是否引用同一个字符串对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T19:00:12.123

或者更确切地说使用`"0".equals(str)`代替`str.equals("0")`，因为如果 str 为 null 最后一个将失败（NullPointerException）

干杯!

# java - 我的 Java JAR 主类路径应该是怎样的？

> ID：15044285
> 
> 赞同：0
> 
> 时间：2013-02-23T18:54:22.077
> 
> 标签：java

所以我有Test.jar。它的目录如下所示：

```
META-INF/MANIFEST.MF
Test/src/test/Test.java
             /MainFrame.java
             /MainPanel.java
             /image.png 
```

我的 mainfest 文件如下所示：

```
Manifest-Version: 1.0
Created-By: 1.7.0_13 (Oracle Corporation)
Main-Class: test.Test 
```

从命令行（java -jar Test.jar）启动时出现这样的错误：*无法找到或加载主类 test.Test*。如何解决？我知道清单中的 Main-Class 行有问题，但我不知道路径应该是什么样子..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T18:58:58.167

那是因为您的 jar 显然包含 java 源文件而不是编译的 java 类文件。你的 jar 布局应该是

```
META-INF/MANIFEST.MF
/test/Test.class
     /MainFrame.class
     /MainPanel.class
     /image.png 
```

你的清单很好。您应该编译您的源代码文件 (*.java) 以生成 *.class 文件并将它们打包到您的 jar 中。

# php - url 中的哪些字符导致 file_get_contents / curl 失败？

> ID：15044286
> 
> 赞同：1
> 
> 时间：2013-02-23T18:54:31.713
> 
> 标签：php, curl, file-get-contents

**编辑澄清：**

我想知道url 中的*哪些*字符导致 file_get_contents / curl 失败。

在下面的示例中，唯一导致问题的字符是空格，所以对我来说最好的办法就是`str_replace`在 url 中使用`%20`. 是否还有其他字符也会导致它失败？如果是这样，它们是什么？有没有可以代替我的功能？

* * *

**原文：**

我希望能够通过用户选择的 URL 下载任意文件，并可以作为字符串访问它。我最初的反应是：

```
$str = file_get_contents($url); 
```

但是，这在以下 URL 上失败：

`http://i.ebayimg.com/t/2-WAY-PHOTO-FRAME-KEY-BOX-SHABBY-CHIC-STYLE-/00/s/NjAwWDYwMA==/$(KGrHqRHJDoE-PBe-SSLBPlrnIYb Q~~60_35.JPG`

接下来，我尝试了`cURL`：

```
function file_get_contents_curl($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $result = curl_exec($ch);
    curl_close($ch);
    return $result;
} 
```

但是，对于相同的 URL，cURL 失败并显示“无效 URL”。

我在这里阅读了许多问题，当从其中包含任意字符的 URL 下载时，必须使用 urlencode。但是，这会导致：

`http%3A%2F%2Fi.ebayimg.com%2Ft%2F2-WAY-PHOTO-FRAME-KEY-BOX-SHABBY-CHIC-STYLE-%2F00%2Fs%2FNjAwWDYwMA%3D%3D%2F%24%28KGrHqRHJDoE-PBe-SSLBPlrnIYb+Q%7E%7E60_35.JPG`

我认为使用任何一种方法都不会获取，因为现在它认为它是本地文件。我需要做什么才能获取任意网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:15:12.333

尝试这个：

```
$url = "http://i.ebayimg.com/t/2-WAY-PHOTO-FRAME-KEY-BOX-SHABBY-CHIC-STYLE-/00/s/NjAwWDYwMA==/$(" . urlencode("KGrHqRHJDoE-PBe-SSLBPlrnIYb Q~~60_35.JPG");

$str = file_get_contents($url); 
```

编辑：正如 Galen 所说，URL 的唯一问题是空间，它可以使用 str_replace 修复，如下所示。

```
$url = "http://i.ebayimg.com/t/2-WAY-PHOTO-FRAME-KEY-BOX-SHABBY-CHIC-STYLE-/00/s/NjAwWDYwMA==/$(KGrHqRHJDoE-PBe-SSLBPlrnIYb Q~~60_35.JPG";
$url = str_replace(' ', '+', $url);
$str = file_get_contents($url); 
```

# jquery - 禁用移动设备的延迟加载

> ID：15044288
> 
> 赞同：1
> 
> 时间：2013-02-23T18:54:39.537
> 
> 标签：jquery, mobile, lazy-loading

所以我在一个网站上使用了延迟加载，它在我迄今为止测试过的每一个浏览器中都运行良好。但在移动设备上，图像加载时间更长，因此“不可见”的时间太长。我想知道，当移动设备访问页面时禁用延迟加载的最佳方法是什么？

这并不像`if (typeof window.orientation !== 'undefined') return;`在调用之前放一行那么简单，`.lazyload`因为在新浏览器中所做的更改延迟加载需要更改的 HTML，其中空白占位符用作 the`src`并且实际图像放置在`data-original`属性中。因此，当延迟加载被禁用时，用户只看到占位符而不是实际图像。

以下是当前网站上的相关代码：

```
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/jquery.lazyload.min.js"></script>
<script type="text/javascript">
var $j = jQuery.noConflict();
$j(function() { 
if (typeof window.orientation !== 'undefined') return;
$j("img").lazyload({
    placeholder : "images/white.gif",
    effect: "fadeIn",
});
});
</script>

<style type="text/css">
#content {
font-family: "zierinitialen2regular", "Palatino Linotype", "Book Antiqua", Palatino, serif;
font-size: 100%;
position: absolute;
height: 574px;
margin: -277px 0px 0px 0px;
padding: 0px 200px 0px 240px;
top: 50%;
overflow-x: hidden;
white-space: nowrap;
}

.lazyload {
display: none;
height: 550px;
max-width: 1200px;
min-width: 300px;
}
</style
</head>

<body>
<div id="content">
    <img class="lazyload" src="white.jpg" data-original="photo01.jpg" alt="photo01"/>
    <noscript><img src="photo01.jpg"></noscript>
    <img class="lazyload" src="white.jpg" data-original="photo02.jpg" alt="photo02"/>
    <noscript><img src="photo02.jpg"></noscript>
    <img class="lazyload" src="white.jpg" data-original="photo03.jpg" alt="photo03"/>
    <noscript><img src="photo03.jpg"></noscript>
    <img class="lazyload" src="white.jpg" data-original="photo04.jpg" alt="photo04"/>
    <noscript><img src="photo04.jpg"></noscript>

</div>
</body> 
```

是否有一种方法可以设置它，以便在移动设备访问该网站时完全关闭 JavaScript，以便它使用标签中的`<noscript>`代码？任何解决此问题的想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:02:55.173

如果是移动设备，您可以使用 appEngines 检测浏览器类型，然后不运行该功能。

例如

```
isMobDevice = (/iphone|ipad|Android|webOS|iPod|BlackBerry|Windows Phone|ZuneWP7/gi).test(navigator.appVersion);

if(!isMobDevice){
   $("img").lazyload({
      placeholder : "images/white.gif",
      effect: "fadeIn",
   });
}else{
   $('img').each(function(){
      $(this).attr('src',$(this).data('original'));
   });
} 
```

# iphone - 应用程序在装有 iOS 6 的 iPhone 5 上崩溃

> ID：15044289
> 
> 赞同：0
> 
> 时间：2013-02-23T18:54:40.763
> 
> 标签：iphone, ios, crash

解决中心拒绝了我的应用程序，因为正如他们所说，它在装有 iOS 6.1.2 的 iPhone 5 上崩溃。

我有一部装有 iOS 6.1.2 的 iPhone 4，它不会崩溃。我解决不了这个问题！

他们还写道，应用程序在以下情况下崩溃：

*   1.  启动应用程序
*   1.  使用 Facebook 登录。
*   1.  当设备返回应用程序时应用程序崩溃。

这里是模拟的崩溃日志：

```
Last Exception Backtrace:
0   CoreFoundation                  0x344ec3e2 0x3442a000 + 795618
1   libobjc.A.dylib                 0x3c1dd95e 0x3c1d5000 + 35166
2   CoreFoundation                  0x344eff2c 0x3442a000 + 810796
3   CoreFoundation                  0x344ee648 0x3442a000 + 804424
4   CoreFoundation                  0x34446204 0x3442a000 + 115204
5   Kick - Serie A                  0x0007252c -[LetturaScrittura writeStringToFile:] (LetturaScrittura.m:26)
6   Kick - Serie A                  0x0006e9da __25-[Profilo carica_profilo]_block_invoke (Profilo.m:314)
7   Kick - Serie A                  0x0007e14a -[FBRequestConnection completeWithResults:orError:] (FBRequestConnection.m:1200)
8   Kick - Serie A                  0x0007d56c -[FBRequestConnection completeWithResponse:data:orError:] (FBRequestConnection.m:983)
9   Kick - Serie A                  0x0007b6aa __68-[FBRequestConnection startWithCacheIdentity:skipRoundtripIfCached:]_block_invoke_0 (FBRequestConnection.m:499)
10  Kick - Serie A                  0x0007f38e -[FBURLConnection invokeHandler:error:response:responseData:] (FBURLConnection.m:163)
11  Kick - Serie A                  0x0007f8f4 -[FBURLConnection connectionDidFinishLoading:] (FBURLConnection.m:233)
12  Foundation                      0x34e28910 0x34d53000 + 874768
13  Foundation                      0x34d68764 0x34d53000 + 87908
14  Foundation                      0x34d68680 0x34d53000 + 87680
15  CFNetwork                       0x341c964a 0x34141000 + 558666
16  CFNetwork                       0x341c8d2e 0x34141000 + 556334
17  CFNetwork                       0x341f100e 0x34141000 + 720910
18  CoreFoundation                  0x34432ac8 0x3442a000 + 35528
19  CFNetwork                       0x341f146e 0x34141000 + 722030
20  CFNetwork                       0x3415545c 0x34141000 + 83036
21  CoreFoundation                  0x344c18f2 0x3442a000 + 620786
22  CoreFoundation                  0x344c1158 0x3442a000 + 618840
23  CoreFoundation                  0x344bff2a 0x3442a000 + 614186
24  CoreFoundation                  0x34433238 0x3442a000 + 37432
25  CoreFoundation                  0x344330c4 0x3442a000 + 37060
26  GraphicsServices                0x38011336 0x3800c000 + 21302
27  UIKit                           0x3634f2b4 0x362f8000 + 357044
28  Kick - Serie A                  0x0006ac92 main (main.m:16)
29  libdyld.dylib                   0x3c60ab1c 0x3c609000 + 6940

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3c6d1350 __pthread_kill + 8
1   libsystem_c.dylib               0x3c647fb2 pthread_kill + 54
2   libsystem_c.dylib               0x3c684366 abort + 90
3   libc++abi.dylib                 0x3bc2cdda abort_message + 70
4   libc++abi.dylib                 0x3bc2a094 default_terminate() + 20
5   libobjc.A.dylib                 0x3c1dda58 _objc_terminate() + 144
6   libc++abi.dylib                 0x3bc2a118 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x3bc2a1b0 std::terminate() + 16
8   libc++abi.dylib                 0x3bc2b626 __cxa_rethrow + 90
9   libobjc.A.dylib                 0x3c1dd9b0 objc_exception_rethrow + 8
10  CoreFoundation                  0x3443329c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x344330c4 CFRunLoopRunInMode + 100
12  GraphicsServices                0x38011336 GSEventRunModal + 70
13  UIKit                           0x3634f2b4 UIApplicationMain + 1116
14  Kick - Serie A                  0x0006ac92 main (main.m:16)
15  libdyld.dylib                   0x3c60ab1c start + 0

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3c6c15d0 kevent64 + 24
1   libdispatch.dylib               0x3c5fcd22 _dispatch_mgr_invoke + 806
2   libdispatch.dylib               0x3c5f8374 _dispatch_mgr_thread + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3c6c0e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c6c0fd0 mach_msg + 48
2   CoreFoundation                  0x344c12b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x344c002c __CFRunLoopRun + 900
4   CoreFoundation                  0x34433238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x344330c4 CFRunLoopRunInMode + 100
6   WebCore                         0x3a432390 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3c62a0de _pthread_start + 306
8   libsystem_c.dylib               0x3c629fa4 thread_start + 4

Thread 3 name:  com.apple.NSURLConnectionLoader
Thread 3:
0   libsystem_kernel.dylib          0x3c6c0e30 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c6c0fd0 mach_msg + 48
2   CoreFoundation                  0x344c12b6 __CFRunLoopServiceMachPort + 126
3   CoreFoundation                  0x344c002c __CFRunLoopRun + 900
4   CoreFoundation                  0x34433238 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x344330c4 CFRunLoopRunInMode + 100
6   Foundation                      0x34d80888 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x34e0422c __NSThread__main__ + 968
8   libsystem_c.dylib               0x3c62a0de _pthread_start + 306
9   libsystem_c.dylib               0x3c629fa4 thread_start + 4

Thread 4 name:  com.apple.CFSocket.private
Thread 4:
0   libsystem_kernel.dylib          0x3c6d1594 __select + 20
1   CoreFoundation                  0x344c5474 __CFSocketManager + 676
2   libsystem_c.dylib               0x3c62a0de _pthread_start + 306
3   libsystem_c.dylib               0x3c629fa4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x3c6d1d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c61fad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c61f7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c61f680 start_wqthread + 4

Thread 6:
0   libsystem_kernel.dylib          0x3c6d1d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c61fad6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c61f7f2 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c61f680 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3e191524
    r4: 0x00000006    r5: 0x3e191b78      r6: 0x1dd85ca4      r7: 0x2fd979f4
    r8: 0x1dd85c80    r9: 0x00000300     r10: 0x00000000     r11: 0x3455b022
    ip: 0x00000148    sp: 0x2fd979e8      lr: 0x3c647fb7      pc: 0x3c6d1350
  cpsr: 0x00000010 
```

这是使应用程序崩溃的 LetturaScrittore 方法（我用它在 .txt 上写下 facebook 用户的电子邮件）：

```
- (void)writeStringToFile:(NSString*)aString {

    // Build the path, and create if needed.
    NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString* fileName = @"myTextFile.txt";
    NSString* fileAtPath = [filePath stringByAppendingPathComponent:fileName];

    if (![[NSFileManager defaultManager] fileExistsAtPath:fileAtPath]) {
        [[NSFileManager defaultManager] createFileAtPath:fileAtPath contents:nil attributes:nil];
    }

    // The main act.
    [[aString dataUsingEncoding:NSUTF8StringEncoding] writeToFile:fileAtPath atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:16:39.600

崩溃的原因是您实际上没有将`NSString`对象传递给 writeStringToFile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:24:37.023

我的错误是在 facebook auth login 上：未经电子邮件许可，facebook 什么也不返回，并且在尝试编写 .txt 文件时应用程序崩溃。

# javascript - 跨站点脚本 iframe 权限被拒绝问题

> ID：15044292
> 
> 赞同：1
> 
> 时间：2013-02-23T18:55:07.627
> 
> 标签：javascript, html, wordpress, iframe, cross-domain

我在以下代码中收到跨站点脚本错误。

**Javascript**

```
 function resizeIframe(ifRef) 
            {
                var ifDoc;
                //alert(ifRef);

                try
                { 
                    ifDoc = ifRef.contentWindow.document.documentElement; 
                }
                catch( e )
                {
                   alert(e);
                    try
                    { 
                    ifDoc = ifRef.contentDocument.documentElement; 
                    }
                    catch( ee ){
                             alert(ee);
                          } 
                }
                //var doc = ifRef.height;
                //alert(doc);
                if(ifDoc)
                {
                    ifRef.height = 1; 
                    ifRef.style.height = ifDoc.scrollHeight+'px';               
                }
            } 
```

**框架**

```
<iframe onload="resizeIframe(this)" style="margin-bottom: 16px;" src="ourteamnav/first.php" frameborder="0" scrolling="no" width="597" height="240"></iframe> 
```

错误如下

**前面' ：**

Mozilla Firefox：**错误：访问属性“文档”的权限被拒绝**

Google Chrome： **TypeError：无法读取未定义的属性“documentElement”**

Internet Explorer：**TypeError：权限被拒绝**

**对于 'ee' ：**

Mozilla Firefox：**错误：访问属性“documentElement”的权限被拒绝**

Google Chrome： **TypeError：无法读取 null 的属性“documentElement”**

Internet Explorer：**错误：访问被拒绝。**

我认为它无法以一般方式解决，因为它正在发生，因为域指向另一个域。因此，任何人都会指导我在不使用 Javascript 的这些属性`contentDocument.documentElement`或`contentWindow.document.documentElement`根据其内部内容动态调整 iframe 内容的大小的情况下解决它。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:09:04.013

除了[Christophe](https://stackoverflow.com/users/485406/christophe)的回答之外，我想指出（遗憾的是）`postMessage`不适用于所有浏览器。

幸运的是，[Josh Fraser](http://www.onlineaspect.com/about/)已经提供[**了向后兼容的 window.postMessage() 版本**](http://www.onlineaspect.com/2010/01/15/backwards-compatible-postmessage/)。它检查浏览器是否支持`postMessage`- 方法。如果是这样，它会使用它。如果不是，它使用**URL**（来自 iframe 和父级）来传递数据。

现在您可以使用以下方法让两个窗口相互“对话”：

```
XD.postMessage(msg, src, frames[0]);
XD.receiveMessage(function(message){
    window.alert(message.data + " received on "+window.location.host);
}, 'URL'); 
```

只需确保您正确阅读了文档，因为必须正确设置配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T19:28:07.470

As you say, this is a cross-domain issue.

If you have control on both pages you can use postMessage to exchange information between the two pages.

Some references:

*   [Ben Alman's example of resizing iframes](http://benalman.com/code/projects/jquery-postmessage/examples/iframe/)
*   [John Resig's article](http://ejohn.org/blog/cross-window-messaging/) on postMessaging
*   [this excellent presentation](http://benvinegar.github.com/seamless-talk/#/) on iframes (what you're interested in starts at [slide 16](http://benvinegar.github.com/seamless-talk/#/16)).
*   [a list of libraries/plugins](http://softwareas.com/cross-domain-communication-with-iframes) that include this technique

# c# - 如何对多个不同大小的矩形进行分类

> ID：15044293
> 
> 赞同：1
> 
> 时间：2013-02-23T18:55:09.893
> 
> 标签：c#, algorithm, sorting, image-processing

我有几个不同大小的矩形。现在我需要一个算法来根据它们的大小对矩形进行分类。

关键是它不是固定的尺寸。例如，一个宽度为 30 高度为 20 的矩形，另一个宽度为 31 高度为 19 的矩形应该放在一个组中。但是宽度为40，高度为30的矩形应该放在另一组中。

并且确定组的数量和大小应该是自动完成的。你推荐我什么算法...

事实上，我想根据形状对矩形进行分组，而不是根据面积或间距对它们进行分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:21:57.317

我将您的问题解释为“在给定某些规则的情况下，我如何对表示矩形集的问题进行建模”。

在集合论中，您可以通过定义一个[特征函数](http://en.wikipedia.org/wiki/Indicator_function)来定义一个集合，该函数接受一个元素并告诉您该元素是否在集合中。该特征函数可以通过C# 中的[Predicate方便地建模。](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)

所以，假设你有这个 Rectangle 类：

```
public class Rectangle 
{
    public int height {get; private set;} 
    public int width {get; private set;}

    public Rectangle(int height, int width) 
    {
        this.height=height;
        this.width=width;
    }

    public int Area {
        get {return height*width;}
    }
} 
```

您现在可以将您的组定义为谓词。例如，您可以像这样定义一组小矩形：

```
Predicate<Rectangle> SmallRectangles = r => r.Area < 100; 
```

或者您可以像这样定义一组又窄又高的矩形：

```
Predicate<Rectangle> NarrowAndTallRectangles = r => r.width/r.height > 1000; 
```

这是它的使用方式：

```
var test = new Rectangle(1,2);
Console.WriteLine("is it small? {0}" ,SmallRectangles(test));
Console.WriteLine("is it narrow and tall? {0}" ,NarrowAndTallRectangles(test));
    // output: 
    // is it small? True
    // is it narrow and tall? False 
```

# html - 您如何在页面上拉伸页眉、内容和页脚颜色，并且所有内容都以固定宽度居中？

> ID：15044300
> 
> 赞同：0
> 
> 时间：2013-02-23T18:55:53.147
> 
> 标签：html, css

我已经获得了标题和主页内容的颜色来拉伸整个页面，但仍然使内容居中。

但是我的页脚没有被拉伸，我如何像页眉一样拉伸页脚？

**HTML：**

```
<body> 
<div id="header"> 
    <div class="container"> <img src=   "images/webalign-uk-white.png" width="429" height="61" />
        <!-- header's content here --><p class="fltrt">Contact: 00000000000</p></div>
    <!-- .container --> 
</div><!-- #header --> 
<div id="content"> 
    <div class="container"> 
        <!-- main content here --><h1> Hello!</h1>

 <div id="footer">
    <div class="container"> 
        <!-- footer's content here --><p>Footer1</p>
  </div><!-- .container --> 
</div><!-- #footer --> 
</body> 
```

**CSS：**

```
.container {
    width: 960px;
    margin: 0 auto;
    overflow: hidden;
    padding: 0 15px; /* the auto value on the sides, coupled with the width, centers the layout */
}

#header {
    background-color: #eee;
}

#content {
    padding: 10px 0;
    background-color:#F9f9f9;
}

#footer {
    padding: 10px 0;
    background-color: #333;
    color: #bbb;
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:13:46.027

你没有关闭`.container`和`#content`div。这可能是问题所在。

# bitcoin - poclbm 未向 deepbit 或 slush 报告哈希值

> ID：15044305
> 
> 赞同：1
> 
> 时间：2013-02-23T18:56:16.603
> 
> 标签：bitcoin, mining

我在我的系统上运行 poclbm 但由于某种原因 deepbit 和 slush 都没有“看到”正在执行的工作。我的系统报告每秒大约执行 200 兆次。我尝试使用相同的设置使用我的 cpu 进行挖掘，然后 deepbit 和 slush 都认识到正在执行工作。

这些是我从各自的挖矿硬件中得到的错误（每分钟左右）：

> **poclbm 错误：** pit.deepbit.net:8332 22/02/2013 21:50:59，验证失败，检查硬件！（0:0: 柏树，d47b7ba0）
> 
> **cgminer 错误：** [2013-02-22 22:18:51] GPU0：无效随机数 - 硬件错误

我正在使用带有 ATI 5800 系列显卡的 12.10 版本 poclbm 的 Ubuntu 12.10 (Quantal Quetzal)。据我所知，视频驱动程序已安装并可以正常工作。当我运行“aticonfig --odgc --adapter=all”时，gpu 似乎确实与 poclbm 一起使用（大约 70% 左右的利用率）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T18:02:31.210

我通过 irc 频道（频道#cgminer 上的 Freenode）找到了解决方案。基本上，至少在我拥有的 Ubuntu 版本（12.10）上，SDK 的 2.8 版本不能与 cgminer 或 poclbm 一起正常工作。我被指示下载 SDK 的 2.4 版本。这里： http: [//developer.amd.com/Downloads/AMD-APP-SDK-v2.4-lnx32.tgz](http://developer.amd.com/Downloads/AMD-APP-SDK-v2.4-lnx32.tgz) [http://developer.amd.com/Downloads/AMD-APP-SDK-v2.4-lnx64 .tgz](http://developer.amd.com/Downloads/AMD-APP-SDK-v2.4-lnx64.tgz)

有些发行版需要“2.7”版本，所以我将链接放在这里： http: [//developer.amd.com/Downloads/AMD-APP-SDK-v2.7-lnx32.tgz](http://developer.amd.com/Downloads/AMD-APP-SDK-v2.7-lnx32.tgz) [http://developer.amd。 com/Downloads/AMD-APP-SDK-v2.7-lnx64.tgz](http://developer.amd.com/Downloads/AMD-APP-SDK-v2.7-lnx64.tgz)

我编译它。显然，此 Makefile 没有“make install”，因此您必须手动将文件复制到您的 lib 目录：

> 对于 32 位：$ cp -pv lib/x86/* /usr/lib/
> 
> 对于 64 位：$ cp -pv lib/x86_64/* /usr/lib/
> 
> 同时复制包含文件： $ rsync -avl include/CL/ /usr/include/CL/

将库安装在适当的目录中后，我重新编译了 cgminer，然后它就可以工作了。我也用 poclbm 试过它，它也适用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T07:03:53.880

嗯，我在使用 pclbm 和 cgminer 时遇到了同样的错误。然后我找到了[https://bitcointalk.org/index.php?topic=139406.msg1502120#msg1502120](https://bitcointalk.org/index.php?topic=139406.msg1502120#msg1502120) .. 我尝试了 phoenix，现在一切正常。希望能帮助到你。对不起我的英语不好。

# node.js - Grunt 产生的进程没有捕获输出

> ID：15044307
> 
> 赞同：15
> 
> 时间：2013-02-23T18:56:25.103
> 
> 标签：node.js, process, gruntjs, spawn

`console.log`我已经使用 Grunt 生成了一个进程，但是控制台中没有显示任何写入输出流（例如）的内容。

我希望 Grunt 显示该过程的任何输出。

```
grunt.util.spawn(
  { cmd: 'node'
  , args: ['app.js']
  , opts:
      { stdio:
          [ process.stdin
          , process.stout
          , process.stderr
          ]
      }
  }) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-23T20:13:39.873

尝试将其设置为`opts: {stdio: 'inherit'}`. 否则，您可以通过管道输出：

```
var child = grunt.util.spawn({
  cmd: process.argv[0], // <- A better way to find the node binary
  args: ['app.js']
});
child.stdout.pipe(process.stdout);
child.stderr.pipe(process.stderr); 
```

或者，如果您想修改输出：

```
child.stdout.on('data', function(buf) {
    console.log(String(buf));
}); 
```

# list - 将列表转换为队列

> ID：15044312
> 
> 赞同：0
> 
> 时间：2013-02-23T18:57:00.330
> 
> 标签：list, queue, ocaml

如何将列表 v1::v2::vn::[] 转换为队列？这就是我到目前为止所写的所有内容：-

```
 let fromList (l:'a list) : 'a queue =
        let queue = create () in
        let rec loop (z: 'a list) (q: 'a queue) : 'a queue = 
             begin match z with 
             | [] -> None
             | hd :: tl ->
              end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:58:39.677

好的，你有一个可变队列类型。

命令式处理列表的惯用方式是使用`List.iter`.

在我看来，您打算编写自己的递归函数`loop`来代替（可能是因为这是家庭作业）。第一条评论是，在编写这样的命令式代码时，惯用的做法是返回`()`（ type 的唯一值`unit`）而不是`None`. 您的`loop`函数将始终返回`()`，因为它通过修改队列（必须）来工作。

您必须回答的递归问题（正如我一直指出的那样）是：

*   空列表需要做什么？

*   如果列表非空，你需要对它的头部和尾部做什么？

当被这样问时，答案似乎很明显。但如果不是，一个可能的提示是你想调用两个你已经知道的函数，一个用于列表的头部，一个用于列表的尾部。

# ruby-on-rails - 在和示例组中使用自定义 rspec 匹配器创建时，消息为空

> ID：15044318
> 
> 赞同：0
> 
> 时间：2013-02-23T18:57:08.900
> 
> 标签：ruby-on-rails, ruby, rspec, rspec-rails

我在控制器规范中使用自定义 rspec 匹配器，消息始终为空。

规范看起来像：

```
describe QuestionnaireController do
  matcher :redirect_to_sign_in_if_not_authenticated do |method|
    match do |controller| 
      self.send(method)
      response.should redirect_to new_user_session_path
    end
  end

  describe "GET index" do
    it { should redirect_to_sign_in_if_not_authenticated(get :index) }
  end
end 
```

运行此测试时，它失败了，所有出现的是：

```
Failures:

  1) QuestionnaireController GET show 
```

如您所见，此处缺少默认的应该消息。我如何让它显示出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:13:51.830

您可以使用`failure_message_for_should`块，如下所述：[https ://www.relishapp.com/rspec/rspec-expectations/v/2-4/docs/custom-matchers/define-matcher#overriding-the-failure-message-应该的](https://www.relishapp.com/rspec/rspec-expectations/v/2-4/docs/custom-matchers/define-matcher#overriding-the-failure-message-for-should)

但是，您可能会在这里遇到一些问题：

*   `get :index`将实际调用该`get`方法，然后将返回值传递给匹配器，这似乎是代码所不期望的。
*   `should redirect_to`如果您在自定义匹配器中使用另一个匹配器 ( )，错误和回溯可能会被搞砸。

您可能想考虑一个共享示例：[https ://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples)

# javascript - 将两个元素集合与 mobify.js 结合

> ID：15044322
> 
> 赞同：0
> 
> 时间：2013-02-23T18:57:16.813
> 
> 标签：javascript, mobile, mobify, mobify-js

每个人。

我刚开始使用[mobifyjs](http://www.mobify.com/mobifyjs/)工具包，遇到了将两个元素集合合并为一个的问题。在我试图移动的页面上，有两组链接：带有文本和图像。HTML 如下所示：

```
<!-- links with text -->
<div id="products">
    <a href="Product1">Product 1</a>
    <a href="Product2">Product 2</a>
</div>
...
<!-- somewhere else on the page -->
<div id="productImages">
    <a href="Product1"><img src="Product1.png /></a>
    <a href="Product2"><img src="Product2.png /></a>
</div> 
```

它需要变成以下内容：

```
<div class="items">
    <div class="item">
        <div class="img">
            <a href="Product1"><img src="Product1.png /></a>
        </div>
        <div class="title">
            <a href="Product1">Product 1</a>
        </div>      
    </div>
    <div class="item">
        <div class="img">
            <a href="Product2"><img src="Product2.png /></a>
        </div>
        <div class="title">
            <a href="Product2">Product 2</a>
        </div>      
    </div>
</div> 
```

我目前的解决方案是使用**地图**功能，所以在 mobify.konf 我有如下内容：

```
'content': function(context) {
    return context.choose(
        {{
            'templateName': 'products',
            'products': function(){
                return $('#productImages a').map(function() {
                    var href = $(this).attr('href') || '';

                    var div = $('<div class="item"><div class="img"></div><div class="title"></div></div>');
                    div.find('.img').append($(this).clone());
                    div.find('.title').append($('#products a[href="' + href + '"]').clone());

                    return div;
                });
            }
        })
} 
```

模板是：

```
<div class="items">
    {#content.products}
        {.}
    {/content.products}
</div> 
```

该代码确实有效，但该方法本身非常难看，因为我必须将一段标记代码从 tmpl 文件移动到 mobify.konf 中。任何人都可以提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:41:27.920

做这种事情的最好方法是将您的项目的相关属性（例如产品名称、图像 url 和链接 href）收集到 javascript 中的数据结构中，然后为您的新 html 结构创建模板.tmpl 文件。就像是

```
'products': function() {
    var products = [], 
        $productLinks = $('#products a'), 
        $productImages = $('#productImages img')
        len = $productNames.legnth;
    for(var i = 0; i<len; i++) {
        var $link = $productLinks.eq(i);
        var $img = $productImages.eq(i);
        products.push({name: $link.text(), href: $link.attr('href'), imgSrc: $img.attr('src')});
    }
    return products;

} 
```

然后通过遍历数组项并将它们插入到标记中的相关位置来对其进行模板化：

```
<div class="items">
{#content.products}
    <div class="item">
        <div class="img"><img src="{.imgSrc}" /></div>
        <div class="title"><a href="{.href}">{.name}</a></div>
    </div>
{content.products}
</div> 
```

# asp.net - 智能向导的 onLeaveStep 不起作用

> ID：15044323
> 
> 赞同：1
> 
> 时间：2013-02-23T18:57:23.760
> 
> 标签：asp.net, dotnetnuke, smart-wizard

我正在尝试像这样从智能向导调用 onLeaveStep

```
...
onLeaveStep: leaveStep
... 
```

除此之外，向导的所有参数都按照此处的说明[http://techlaboratory.net/smartwizard/documentation#paramdesc](http://techlaboratory.net/smartwizard/documentation#paramdesc)

问题是当我添加这行代码时，我无法单击 NEXT 按钮。现在函数 leaveStep 看起来像

```
leaveStep = function(from, to) {
   //do nothing

} 
```

先谢谢了。大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:22:48.753

您必须返回 true 才能进入下一步

```
leaveStep = function(from, to) {
    //do nothing

    return true;
} 
```

# php - 比较由随机值组成的数据集并对公共值进行排序

> ID：15044324
> 
> 赞同：0
> 
> 时间：2013-02-23T18:57:32.753
> 
> 标签：php, mysql, sql, mysqli

我需要在 1 到 10,000 之间有 10,000 个随机生成的值的两个数据集，并且只找到数据集之间共有的值。然后我需要将它们从最小到最大排序。我不能使用 array_intersect() 或 array_unique()。

看来我能够使用 while 循环来为两个 MySQL 表生成随机整数并使用 MySQL Query 比较和排序它们。我不完全确定我的结果是否准确，我正在寻找一种更有效的方法来完成这项任务。有人可以告诉我我是否成功完成了我的任务以及解决此问题的替代方法。我需要知道我的 Select 语句是否产生了正确的结果以及如何改进它。

```
 <?php
// CONNECT TO THE DATABASE
$DB_NAME = 'e3';
$DB_HOST = 'localhost';
$DB_USER = 'e3';
$DB_PASS = 'exercise3password';
$mysqli = new mysqli($DB_HOST, $DB_USER, $DB_PASS, $DB_NAME);
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
exit();
}
       $x = 0;
        while($x <= 10000){
        $randa = rand(1,10000);
        $randb = rand(1,10000);
$query = "INSERT into a (num) VALUES ($randa)";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);
$query = "INSERT into b (num) VALUES ($randb)";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);
$x++;
}

$query = "SELECT * FROM a INNER JOIN b on a.num=b.num WHERE a.num=b.num ORDER BY a.num";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__);
// GOING THROUGH THE DATA
if($result->num_rows > 0) {
while($row = $result->fetch_assoc()) {
echo stripslashes($row['num']); 
echo "<br>";
}
}
else {
echo 'NO RESULTS';  
}
// CLOSE CONNECTION
mysqli_close($mysqli);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:56:04.220

您的 WHERE 子句仅重申您的 ON 子句中先前指定的条件。因此，它是多余的。此外，为了提高效率，请删除“*”并命名您实际希望返回的每一列。除此之外，您的查询很好。

# function - 调用代码中前面定义的函数后，Excel 无响应

> ID：15044325
> 
> 赞同：0
> 
> 时间：2013-02-23T18:57:40.023
> 
> 标签：function, excel, vba

我有一种情况，我试图在我的 vba 代码中使用 Erlang 计算器。我知道 Erlang 代码可以工作，因为我以前自己使用过它，但是当我将 erlang 代码复制/粘贴到另一个模块/在我的代码顶部时，我似乎无法调用我需要的函数。当我调用它时，Excel 没有响应并占用了大量内存。我知道这可能意味着某处存在无限循环，但我无法弄清楚它在哪里，或者这实际上是否是我不知道的另一个问题。

Erlang 计算器是一个免费程序，我很高兴感谢这个巧妙的计算。

我正在调用的函数：agentno()

```
 'Version 1.0 Joanne Sparkes, Expedio Virtual Assistance Ltd for Call Centre Helper
    '18th November 2008
    '---------------------------------------------------------------------------------

    Public Function utilisation(intensity As Double, agents As Long) As Double
    'Copyright Expedio Virtual Assistance Ltd 2008
    'calculates utilisation or agent occupancy
     On Error GoTo utilisationerror
        utilisation = intensity / agents

    utilisationexit:
        If utilisation < 0 Then utilisation = 0
        If utilisation > 1 Then utilisation = 1
    Exit Function

    utilisationerror:
        utilisation = 0
        Resume utilisationexit
    End Function

    Public Function top(intensity As Double, agents As Long) As Double
    'Copyright Expedio Virtual Assistance Ltd 2008
    'top row of Erlang-C Formula
        top = (intensity ^ agents) / Application.WorksheetFunction.Fact(agents)
    End Function

    Public Function erlangBR(intensity As Double, agents As Long) As Double
    'Copyright Expedio Virtual Assistance Ltd 2008
    'calculates summed factorial element of Erlang-C formula
    Dim k As Long, max As Long, answer As Double

    k = 0
    max = agents - 1
    answer = 0

    For k = 0 To max
    answer = answer + ((intensity ^ k) / Application.WorksheetFunction.Fact(k))
    Next k

    erlangBR = answer

    End Function

    Public Function ErlangC(intensity As Double, agents As Long) As Double
    'Copyright Expedio Virtual Assistance Ltd 2008
    'Brings together elements of Erlang C formula Top, Utilisation and ErlangBR
    On Error GoTo ErlangCError
    ErlangC = (top(intensity, agents)) / ((top(intensity, agents)) + ((1 -utilisation  (intensity, agents)) * erlangBR(intensity, agents)))

    ErlangCExit:
        If ErlangC < 0 Then ErlangC = 0
        If ErlangC > 1 Then ErlangC = 1
    Exit Function

    ErlangCError:
        Resume ErlangCExit

    End Function

    Public Function Servicelevel(intensity As Double, agents As Long, target As Double, duration As Double) As Double
    'Copyright Expedio Virtual Assistance Ltd 2008
    'calculation of service level
    On Error GoTo servicelevelerror

    Servicelevel = 1 - (ErlangC(intensity, agents) * Exp(-(agents - intensity) * target / duration))

    Servicelevelexit:
    If Servicelevel > 1 Then Servicelevel = 1
    If Servicelevel < 0 Then Servicelevel = 0
    Exit Function

    servicelevelerror:
        Servicelevel = 0
        Resume Servicelevelexit

    End Function

    Public Function agentno(intensity As Double, target As Double, duration As Double, servreq As Double) As Long
    'Copyright Expedio Virtual Assistance Ltd 2008
    'calculates minimum agent numbers for required service level
    Dim agents As Long, minagents As Long

    minagents = Int(intensity)
    agents = minagents

    While Servicelevel(intensity, agents, target, duration) < servreq
    agents = agents + 1
    Wend

    agentno = agents

    End Function 
```

对长代码感到抱歉，但我觉得要真正弄清楚发生了什么，它需要它。

无论如何，我尝试调用 agentno() 函数（传递所需的东西），但我无法让它工作。

这是我尝试使用它的地方：

```
 For icount = 1 To 22
        For jcount = 1 To 6
            intensity = ((CallsForecasted(icount, jcount) / 1800) * duration) 'Calculates the intensity at each interval.
            AgentsNeeded(icount, jcount) = agentno(intensity, target, duration, servreq) '      <---         <---       <---          <---THIS IS THE ONE GIVING ME TROUBLE!!!!!!!!!!!!!!!!!!!!!!!!
        Next jcount
    Next icount 
```

我已经完成了 debug.print 测试，发现强度计算正确（为了在此处发布，我将其删除），所以我知道到目前为止一切正常，但是一旦调用 agentno()，Excel 就会停止如上所述，响应并占用大量内存。数组 AgentsNeeded() 似乎很好，就像在我所有代码的开头声明的一样。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:10:23.597

我按照 GSerg 的建议进行了更多调试，这是导致问题的 servreq。我不知道它实际上将小数传递给了函数，所以当我弄清楚这一点时，这是让它工作的快速修复。

再次感谢 GSerg 鼓励像我这样的新手沿着正确的道路前进。:D

# jquery - 由于使用 $.noConflict，Jquery 脚本无法正常工作

> ID：15044326
> 
> 赞同：0
> 
> 时间：2013-02-23T18:57:40.643
> 
> 标签：jquery

我得到了 2 个名为“scripts1”的 JS 文件，其中包含幻灯片的脚本和“活动链接类”以及另一个包含“Mootools 画廊”脚本的“script2”。 第一个问题是使用“script1”中的“jQuery.noConflict()”
解决的 jquery 和 Mootools 库之间的冲突。 但在那之后，“活动链接类”的脚本停止工作，如果我从“script1”中删除“jQuery.noConflict()”效果很好[但是 Mootools 库将无法工作]。 我只是猜测 $ 符号之类的东西一定有一些逻辑问题。如果是这样，请PLZ解释背后的逻辑。 顺便说一句，我什至经历了以下解决方案，但没有结果！

1.  [Jquery 和 Mootools，.noConflict 失败](https://stackoverflow.com/questions/6080095/jquery-and-mootools-noconflict-is-failing)
2.  [Jquery-Mootools 冲突](https://stackoverflow.com/questions/7385048/jquery-mootools-conflict)
3.  [http://www.phil-taylor.com/2007/01/31/using-mootools-and-jquery-without-conflict/#.USjun6XI2ky](http://www.phil-taylor.com/2007/01/31/using-mootools-and-jquery-without-conflict/#.USjun6XI2ky)

无论如何，我会把代码放在下面，只是希望你能告诉我我哪里出错了。
文件“script1.js”包含以下代码：

```
jQuery(document).ready(function ()      // the slideshow function
{
     jQuery('#SlidesUl').fadeSlideShow();
});

$(function ()                           // the active link codes
{
    var url = window.location.pathname,
    urlRegExp = new RegExp(url.replace(/\/$/, '') + "$");  
    $('#Menu div span #Menu1st a').each(function () 
    {
       if (urlRegExp.test(this.href.replace(/\/$/, '')))
       {
        $(this).addClass('active1st');
       }
    });
});

jQuery.noConflict();

(function($)                           // the slideshow options and all
{
the codes
})(jQuery); 
```

并且文件“script2.js”包含这些：

```
jQuery(document).ready(function ($)    // the Mootools gallery codes
{
    the codes
}); 
```

这是我放置库和文件的方式：

```
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="js/script1.js" type="text/javascript"></script>
<script src=" MooTools 1.4.4 " type="text/javascript"></script>
<script src="js/script2.js" type="text/javascript"></script> 
```

任何帮助或解释将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:16:50.040

您的代码在`the active link class`您调用后`jQuery.noConflict();`执行（它在文档加载时执行），因此您不能再使用`$`引用 jQuery，但您可以。纠正此更改`$`或`jQuery`设置`$`为就绪函数的参数，该函数实际上是 jQuery 对象。

1.

```
$(function ()                           // the active link codes
{
    var url = window.location.pathname,
    urlRegExp = new RegExp(url.replace(/\/$/, '') + "$");  
    jQuery('#Menu div span #Menu1st a').each(function () 
    {
       if (urlRegExp.test(this.href.replace(/\/$/, '')))
       {
        jQuery(this).addClass('active1st');
       }
    });
}); 
```

2.

```
$(function ($)                           // the active link codes
{
    var url = window.location.pathname,
    urlRegExp = new RegExp(url.replace(/\/$/, '') + "$");  
    $('#Menu div span #Menu1st a').each(function () 
    {
       if (urlRegExp.test(this.href.replace(/\/$/, '')))
       {
        $(this).addClass('active1st');
       }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:18:01.647

调用后您的 jQuery 不起作用的原因[`$.noConflict()`](http://api.jquery.com/jQuery.noConflict/)是因为将使jQuery 中默认使用[`$.noConflict()`](http://api.jquery.com/jQuery.noConflict/)的符号无效。`$`

我建议将您的代码包装在匿名函数中。

```
// Null the $ symbol used by jQuery.
$.noConflict();

// anonymous function.
(function($) {
    $(function() {
       alert('DOM ready!'); 
    });
})(jQuery); 
```

[http://jsfiddle.net/3v4CB/](http://jsfiddle.net/3v4CB/)

**编辑**：

尝试这个：

```
// script1.js
(function($) {

    $(function ()  
    {
        $('#SlidesUl').fadeSlideShow(); // the slideshow function

        // the active link codes
        var url = window.location.pathname,
        urlRegExp = new RegExp(url.replace(/\/$/, '') + "$");  
        $('#Menu div span #Menu1st a').each(function () 
            {
                if (urlRegExp.test(this.href.replace(/\/$/, '')))
            {
                $(this).addClass('active1st');
            }
        });

        // The codes
    });

})(jQuery);

// script2.js
(function($) {

    $(function ()  
    {
        // the Mootools gallery codes
    });

})(jQuery); 
```

# c++ - 在派生类中使用重载 = 中的删除

> ID：15044330
> 
> 赞同：3
> 
> 时间：2013-02-23T18:58:21.417
> 
> 标签：c++

我正在阅读 C++ Primer Plus 一书的第 13 章。它有一个示例处理使用继承与动态内存分配、复制构造函数和重载 = 运算符。

被调用的基类有一个在构造函数`baseDMA`中使用的指向字符的私有指针。`new`

```
class baseDMA
{
private:
   char * label;

...
};

baseDMA::baseDMA(const char * l)
{
    label = new char[std::strlen(l) + 1];
    std::strcpy(label, l);
    ...
} 
```

现在，当重载`=`运算符时，我们删除了，`label pointer`因为我们将把它分配给一个新值，它将指向一个新位置。如果我们不删除它，那么以后我们将无法这样做，因为指针现在将指向不同的东西，并且这个指针指向的旧位置没有被删除，现在也没有任何东西指向它（这个是作者如何在不同的章节中解释的）

这是`=`基类的重载运算符：

```
baseDMA & baseDMA::operator=(const baseDMA & rs)
{
   if (this == &rs)
      return *this;
   delete [] label;
   label = new char[std::strlen(rs.label) + 1];
   std::strcpy(label, rs.label);
   return *this;
} 
```

接下来，作者定义了一个名为 hasDMA 的派生类，它也`new`用于`pointer-to-char`他定义如下的一个：

```
class hasDMA :public baseDMA
{
private:
    char * style;
    ...
};

hasDMA::hasDMA(const char * s, const char * l)
: baseDMA(l)
{
    style = new char[std::strlen(s) + 1];
    std::strcpy(style, s);
} 
```

现在让我有点困惑的部分是，当作者重载`=`派生类的运算符时，他似乎没有`delete [] style`在给它一个新值之前给它一个新值，就像他`label`对基类所做的那样。这就是作者`=`为派生类做重载运算符的方式：

```
hasDMA & hasDMA::operator=(const hasDMA & hs)
{
    if (this == &hs)
       return *this;
    baseDMA::operator=(hs); // copy base portion
    //no delete [] style
    style = new char[std::strlen(hs.style) + 1];
    std::strcpy(style, hs.style);
    return *this;
} 
```

`style`就像我们`label`在分配新值之前从基类中释放指向的内存一样，不释放指向的内存的原因是什么？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T19:06:09.323

原因是作者搞错了。这是一个很好的例子，说明你永远不应该管理自己的记忆——他应该`std::vector`用来管理他的记忆。他没有，因此，他的代码非常错误，如果你模仿他，这正是你的代码将要走的路。

此外，他使用严重过时的自我分配检查不再是成语，并且没有复制和交换。

简而言之，买一本新书。这一切都很糟糕。

# python - 变色龙中的换行

> ID：15044331
> 
> 赞同：3
> 
> 时间：2013-02-23T18:58:26.290
> 
> 标签：python, pyramid, chameleon, template-tal, zpt

我已经使用[金字塔](http://docs.pylonsproject.org/en/latest/docs/pyramid.html)框架构建了一个大型 Web 应用程序。

除其他外，此应用程序允许用户在文本区域表单域中输入文本。然后将该文本保存到数据库中，当然可以再次读取并稍后显示。

为了显示内容，我使用了[Chameleon Template Engine](http://chameleon.readthedocs.org/en/latest/)。

这工作正常，除了换行符显示不正确（根本不显示）。这可能是因为当通过 Chameleon 显示时，输入到文本区域的换行符不会导致 HTML 中的换行符。如何解决这个问题？

用 -Tags 替换换行符没有帮助，`<br>`因为默认情况下，Chameleon 会转义所有 HTML-Tags。我知道可以停用此功能，但我不想这样做以避免跨站点脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T11:38:46.130

另一种可能性是执行以下操作：

```
import webhelpers.html.tags as t
s = t.literal(t.BR).join(s.split(t.NL)) 
```

您当然可以从中创建一个辅助函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T21:07:21.597

您需要将文本分成单独的行，然后使用循环和`<br/>`标签呈现：

```
<span tal:omit-tag="" 
      tal:repeat="line text_with_newlines.splitlines()">
  ${line}<br />
</span> 
```

这使用该[`str.splitlines()`方法](http://docs.python.org/2/library/stdtypes.html#str.splitlines)将文本拆分为换行符，然后循环`<br />`在文本的每一行之后添加一个中断标记。

`<br />`您没有在视图中执行此操作是完全正确的，然后通过设置`structure:`标志强制 Chameleon 接受您插入的标签。幸运的是，无论如何绝对没有必要这样做。

# html - 是否有理由不将主 css 文件嵌入到网页中？

> ID：15044333
> 
> 赞同：0
> 
> 时间：2013-02-23T18:58:47.760
> 
> 标签：html, css, http, caching, webserver

我正在尝试优化网页的加载时间，无论是第一次还是从缓存中。但我仍然要求浏览器重新验证所有资源，以确保我永远不会因为缓存而出现奇怪的显示或更新问题。

所以目前加载我的页面总是需要两个请求：一个用于 HTML 文件，一个用于 CSS 文件，然后才会显示任何内容。

对于这两个文件，等待时间大约是 150 毫秒，而传输大约是 5 毫秒，非常低。

所以我正在考虑总是将我的 mais css 文件嵌入到网页中。

这不是学术方法，但我认为这会将加载速度乘以 2，只需要一个请求来加载页面。

我有理由不这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:27:45.160

you can get the best of both worlds if you set up a build script for your website.. so basically in your local file system you can keep your css files separated, making it more portable and easier to maintain etc.. but at the same time your build script embeds your css and other static files (ie js) into your html page to avoid precisely what you talked about (ie redundant connections to the server)..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:01:34.600

可移植性，即更改一个 .css 文件并通过引用该 css 更改多个 .html 文件的能力。

但是，如果您的 css 仅用于该页面，我认为将其包含在同一个文件中是一个很好的理由。

# php - 从函数内部的函数访问变量？

> ID：15044334
> 
> 赞同：1
> 
> 时间：2013-02-23T18:58:56.183
> 
> 标签：php

我有以下代码：

```
function create_sort_callback($criteria)
{
  return function($a, $b)
  {
    $a = $a[$criteria];
    $b = $b[$criteria];

    return ($a == $b ? 0 : (($a < $b) ? -1 : 1));
  };
} 
```

事实证明我无法`$criteria`从内部函数中访问。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:00:34.657

像这样试试

```
function create_sort_callback($criteria)
{
  return function($a, $b) use($criteria)
  {
    $a = $a[$criteria];
    $b = $b[$criteria];

    return ($a == $b ? 0 : (($a < $b) ? -1 : 1));
  };
} 
```

您需要使用闭包[http://www.php.net/manual/en/functions.anonymous.php](http://www.php.net/manual/en/functions.anonymous.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:00:45.437

使用`use`关键字。

```
function create_sort_callback($criteria)
{
  return function($a, $b) use ($criteria)
  {
    $a = $a[$criteria];
    $b = $b[$criteria];

    return ($a == $b ? 0 : (($a < $b) ? -1 : 1));
  };
} 
```

# haskell - 莎士比亚-js 无法在 Heroku 上编译

> ID：15044336
> 
> 赞同：4
> 
> 时间：2013-02-23T18:59:02.673
> 
> 标签：haskell, deployment, heroku, web-deployment, yesod

在安装 Shakespeare-js-1.0.2 时，将我的简单 Yesod 应用程序部署到 Heroku cabal 失败

```
Building shakespeare-js-1.0.2...
Building persistent-1.0.2.2...
Building yaml-0.8.2.1...
Building tls-extra-0.6.1...
Failed to install shakespeare-js-1.0.2
Last 10 lines of the build log ( /app//.cabal/logs/shakespeare-js-1.0.2.log ):
Building shakespeare-js-1.0.2...
Preprocessing library shakespeare-js-1.0.2...
[1 of 3] Compiling Text.Julius ( Text/Julius.hs, dist/build/Text/Julius.o )
[2 of 3] Compiling Text.Coffee ( Text/Coffee.hs, dist/build/Text/Coffee.o )
Text/Coffee.hs:56:7:
`preEscapeBegin' is not a (visible) field of constructor `PreConvert'
Text/Coffee.hs:57:7:
`preEscapeEnd' is not a (visible) field of constructor `PreConvert' 
```

该项目是一个简单的网站，它使用 WAI 和 Warp 来打印一个 hello world。在我的 cabal 文件中，我只指定了最新版本的 yesod (1.1.9) 以查看它是否在 Heroku 上可用（它还没有使用 Yesod 或 Shakespeare-js）：

```
executable Website
  extensions:NoImplicitPrelude
             TemplateHaskell
             QuasiQuotes
             OverloadedStrings
             CPP
             MultiParamTypeClasses
             TypeFamilies
             GADTs
             GeneralizedNewtypeDeriving
             FlexibleContexts
             EmptyDataDecls
             NoMonomorphismRestriction

  main-is:             source/Main.hs
  -- other-modules:       
  build-depends:       base          == 4.5.*
                     , http-types   
                     , template-haskell 
                     , wai           
                     , wai-extra     
                     , warp          
                     , yesod         == 1.1.9 
```

这个项目在我的虚拟机上本地构建和运行，具有类似的堆栈，包括shakespeare-js-1.0.2。

我尝试了以下方法：

*   在 .cabal 文件中强制使用 1.0.2 以外的更新或旧版本的 Shakespeare-js。出现相同的编译错误。
*   作为一个在黑暗中的镜头，我尝试从 .cabal 文件中删除一些可能影响编译的扩展，例如 TemplateHaskell。

编辑：

*   当我使用shakespeare-js < 1.0.2 时，在heroku 选择1.0.1 后出现编译错误，它也无法编译。
*   我无法让shakespeare-js-1.1.2（最新版本）在任何地方编译，甚至在本地编译。

我通过强制shakespeare < 1.0.3 解决了错误这并不能解决无法编译最新版本的shakespeare 的问题（是的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:12:13.350

问题是类型在和`PreConvert`之间发生了变化。[`shakespeare-1.0.2`](http://hackage.haskell.org/packages/archive/shakespeare/1.0.2/doc/html/Text-Shakespeare.html#t%3aPreConvert)[`shakespeare-1.0.3`](http://hackage.haskell.org/packages/archive/shakespeare/1.0.3/doc/html/Text-Shakespeare.html#t%3aPreConvert)

在旧版本中，`preEscapeBegin`和`preEscapeEnd`是构造函数的字段`PreConvert`，但在版本 1.0.3 中已被删除。

所以解决方案是

*   使用旧版本的`shakespeare`, 指定`shakespeare < 1.0.3`或
*   使用足够新的版本`shakespeare-js`，指定`shakespeare-js >= 1.1.2`.

（如果您使用较新的版本，可能需要进一步调整`shakespeare`，我没有尝试过。）

# java - 基本 Java 登录 Servlet 不工作

> ID：15044337
> 
> 赞同：-2
> 
> 时间：2013-02-23T18:59:17.800
> 
> 标签：java, ms-access, tomcat, servlets

我已经创建了一个 msacess db **mydb.accdb**并将 odbc 源指向它，我在 lserv.java 文件中有以下代码，所有必要的 tomcat 配置都已完成，servlet 没有响应，所以我添加了一个打印错误显示以下错误的 init 方法

```
javax.servlet.ServletException: Servlet.init() for servlet login threw exception
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    java.lang.Thread.run(Thread.java:722)
root cause

java.lang.NullPointerException
    lserv.init(lserv.java:23)
    javax.servlet.GenericServlet.init(GenericServlet.java:212)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    java.lang.Thread.run(Thread.java:722) 
```

java代码

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;

public class lserv extends HttpServlet
{
Connection con;
ResultSet rs;
Statement st;
PrintWriter out;
public void init() 
{
try
{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
con=DriverManager.getConnection("jdbc:odbc:mydb");
st=con.createStatement();

}
catch(Exception e)
{
out.println(e.getMessage());
}
}

public void doGet(HttpServletRequest req,HttpServletResponse res) 
{

try
{
out=res.getWriter();
res.setContentType("text/html");
if(req.getParameter("sub").equals("value"))
{
String s1=req.getParameter("t1");
String s2=req.getParameter("t2");
rs=st.executeQuery("SELECT * FROM login WHERE uname='"+s1.trim()+"AND pass='"+s2.trim()+"';" );
if(rs.next())
{
out.println("welcome");
}
else
{
out.println("sorry");
}

}
}
catch(Exception e){
out.println(e.getMessage());
}
}
} 
```

html页面代码

```
<html>
<title>Login System</title>
<style type="text/css">
div.ex {
width:220px;
padding:10px;
border:5px solid gray;
margin:10px;
}
</style>

<body>
<div class="ex">
<strong>User Login</strong>
<form name=f1 method=get action="http://localhost:8080/login">
User &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<input type=text name=t1><br>
Password <input type=password name=t2><br>
<input type=submit name=sub value="Login">
</div>

</body>
</html> 
```

我有一个名为 login 的表，其中包含字段 uname 并传递值。

什么问题？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:11:22.680

我认为这应该很清楚；

```
java.lang.NullPointerException
    lserv.init(lserv.java:23)
    [...] 
```

只需修复代码第 23 行中的 NPE。:)

对我来说，这条线似乎导致了错误：

```
out.println(e.getMessage()); 
```

该变量`out`未初始化，因此`null`.

# java - WebDriver 找不到带有 HotMail https 的元素

> ID：15044338
> 
> 赞同：0
> 
> 时间：2013-02-23T18:59:24.143
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我正在尝试使用 webdriver 2 自动发送邮件投掷 hotmail。
我正在使用带有 java 和 eclipse 的 WebDriver。
我目前通过登录成功进入hotmail，并且我得到了主邮件页面。
现在我必须单击“新建”按钮（图像编号 1），
当我通过命令单击它时：driver.findElement(By.id("NewMessage")).click();
它正在工作，页面移动到下一个撰写页面（图片编号 2）。
但WebDriver 认为他出于某种原因仍停留在前一页。
我无法单击此页面上的任何元素。

![图像编号 1](../Images/1edc87187f3d7dda3c595ba7e4c376bf.png)

![图像编号 2](../Images/4885c4ab238ec68ab50eca31e34ebc70.png)

我的目标是将密钥发送到“收件人”字段，但我无法得到它。正如您在图片 2 中看到的，我尝试通过“InputBox”类、id、className、xpath 等获取元素。
如果有人可以帮助我，我会很高兴..
谢谢，
或者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T04:32:23.647

问题是该`To`字段位于`iframe`. 在 selenium 中，如果您想在框架中执行任何操作，则意味着首先您必须进入框架。

**进入框架的代码：**

```
 //Assume driver is initialized properly  
  driver.switchToFrame("Frame Name"); 
```

（或者）

```
 driver.switchTo.frame("FrameIndexValue"); 
```

（或者）

```
 WebElement element = driver.findElement(By.id(LocatorValue));  
  driver.switchTo.frame(element);
  //Do any action inside the frame 
```

完成框架内的动作后，您必须离开框架才能在框架外执行任何操作。

**离开框架的代码：**

```
//driver.switchTo.defaultContent(); 
```

如果您正在处理，`iframe`那么 defaultContent() 会将您带到所有 iframe 之上的主页，但如果您处理`frame`this 方法，则会将您带到页面的第一帧。

[有关帧处理](http://darrellgrainger.blogspot.ca/2012/04/frames-and-webdriver.html)的更多信息。

# jquery - 选中 jQuery 设置复选框

> ID：15044340
> 
> 赞同：590
> 
> 时间：2013-02-23T18:59:29.290
> 
> 标签：jquery, checkbox

我已经尝试了所有可能的方法，但我仍然没有得到它的工作。我有一个模态窗口，`checkbox`我希望当模态打开时，`checkbox`选中或取消选中应该基于数据库值。（我已经与其他表单字段一起使用了。）我开始尝试对其进行检查，但没有成功。

我的 HTML div：

```
<div id="fModal" class="modal" >
    ...
    <div class="row-form">
        <div class="span12">
            <span class="top title">Estado</span>

          <input type="checkbox"  id="estado_cat" class="ibtn">
       </div>
    </div>             
</div> 
```

和 jQuery：

```
$("#estado_cat").prop( "checked", true ); 
```

我也尝试过`attr`, 和其他在论坛中看到的，但似乎没有一个工作。
有人可以指出我正确的方式吗？

* * *

### 编辑

好的，我真的在这里错过了一些东西。如果复选框在页面中，我可以使用代码选中/取消选中，但它是否在*模式*窗口中，我不能。我尝试了几十种不同的方法。

我有一个应该打开模式的链接：

```
<a href='#' data-id='".$row['id_cat']."' class='editButton icon-pencil'></a> 
```

和 jQuery 来“监听”点击并执行一些操作，比如用来自数据库的数据填充一些文本框。一切都像我想要的那样工作，但问题是我无法使用代码设置复选框选中/取消选中。请帮忙！

```
$(function () {
    $(".editButton").click(function () {
        var id = $(this).data('id');
        $.ajax({
            type: "POST",
            url: "process.php",
            dataType: "json",
            data: {
                id: id,
                op: "edit"
            },
        }).done(function (data) {
            // The next two lines work fine,
            // i.e. it grabs the value from database and fills the textboxes
            $("#nome_categoria").val(data['nome_categoria']);
            $("#descricao_categoria").val(data['descricao_categoria']);

            // Then I tried to set the checkbox checked (because it's unchecked by default)
            // and it does not work
            $("#estado_cat").prop("checked", true);
            $('#fModal').modal('show');
        });

        evt.preventDefault();
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：968
> 
> 时间：2013-10-28T09:18:28.197

你必须使用“道具”功能：

```
.prop('checked', true); 
```

**在 jQuery 1.6 之前**（参见[user2063626 的回答](https://stackoverflow.com/a/15044473/1161025 "用户2063626 回答")）：

```
.attr('checked','checked') 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2014-04-23T06:32:23.020

采用所有建议的答案并将它们应用于我的情况 - 尝试根据检索到的值为 true（应该选中该框）或 false（不应该选中该框）来选中或取消选中复选框 - 我尝试了以上所有方法并且发现使用**.prop("checked", true)**和**.prop("checked", false** ) 是正确的解决方案。

我还不能添加评论或回答，但我觉得这很重要，可以添加到对话中。

这是完整日历修改的简写代码，如果检索到的值“allDay”为真，则选中 ID 为“even_allday_yn”的复选框：

```
if (allDay)
{
    $( "#even_allday_yn").prop('checked', true);
}
else
{
    $( "#even_allday_yn").prop('checked', false);
} 
```

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2013-02-23T19:11:38.590

试试下面的代码：

```
$("div.row-form input[type='checkbox']").attr('checked','checked') 
```

或者

```
$("div.row-form #estado_cat").attr("checked","checked"); 
```

或者

```
$("div.row-form #estado_cat").attr("checked",true); 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2016-02-11T13:31:48.357

“checked”属性一旦存在就“勾选”复选框。因此，要选中/取消选中复选框，您必须设置/取消设置属性。

检查框：

```
$('#myCheckbox').attr('checked', 'checked'); 
```

取消选中该框：

```
$('#myCheckbox').removeAttr('checked'); 
```

用于测试检查状态：

```
if ($('#myCheckbox').is(':checked')) 
```

希望能帮助到你...

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-05-31T12:27:37.200

由于您处于模式窗口（无论是动态窗口还是页面中），您可以使用以下代码来实现您的目标：（我在我的网站上遇到了同样的问题，这就是我修复它的方法）

HTML：

```
<div class="content-container" style="text-align: right;">
    <input type="checkbox" id="QueryGroupCopyQueries">
    <label for="QueryGroupCopyQueries">Create Copies</label>                                                   
</div> 
```

代码：

```
$.each(queriesToAddToGroup, function (index, query) {
    if (query.groupAddType === queriesGroupAddType.COPY) {

        // USE FIND against your dynamic window and PROP to set the value
        // if you are using JQUERY 1.6 or higher.
        $(kendoWindow).find("input#QueryGroupCopyQueries").prop("checked", true);

        return;
    } 
```

在上面的“kendoWindow”是我的窗口（我的窗口是动态的，但是当直接在页面中附加到元素时我也会这样做）。我正在遍历一组数据（“queriesToAddToGroup”）以查看是否有任何行具有 COPY 属性。如果是这样，我想在用户从该窗口保存时打开设置该属性的窗口中的复选框。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2019-06-22T20:42:18.550

我知道这需要一个 Jquery 解决方案，但我只是想指出，在纯 javascript 中切换它很容易。

```
var element = document.getElementById("estado_cat");
element.checked = true; 
```

它适用于所有当前和未来的版本。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2014-06-26T14:59:10.357

```
.attr("checked",true)
.attr("checked",false) 
```

将工作。确保真假不在引号内。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-10-25T16:13:37.187

如果您想将此功能用于 GreaseMonkey 脚本以自动检查页面上的复选框，请记住，仅设置选中的属性可能不会触发相关操作。在这种情况下，“单击”复选框可能会（并设置选中的属性）。

```
$("#id").click() 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-08-31T07:07:43.010

您可以像下面给定的代码那样编写。

**HTML**

```
<input type="checkbox"  id="estado_cat" class="ibtn"> 
```

**jQuery**

```
$(document).ready(function(){
    $(".ibtn").click(function(){
        $(".ibtn").attr("checked", "checked");
    });
}); 
```

希望它对你有用。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-12-09T05:26:39.697

```
<body>
      <input id="IsActive" name="IsActive" type="checkbox" value="false">
</body>

<script>
    $('#IsActive').change(function () {
         var chk = $("#IsActive")
         var IsChecked = chk[0].checked
         if (IsChecked) {
          chk.attr('checked', 'checked')
         } 
         else {
          chk.removeAttr('checked')                            
         }
          chk.attr('value', IsChecked)
     });
</script> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-10-03T10:55:54.963

```
$("#divParentClip").find("#subclip_checkbox")[0].checked=true; 
```

Find 会返回数组，所以即使只有一项，也要使用 [0] 来获取

如果你不使用 find 那么

```
$("#subclip_checkbox").checked=true; 
```

这对我来说在 Mozilla Firefox 中运行良好

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-01-23T20:49:35.817

为我工作：

```
$checkbok.prop({checked: true}); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-01-03T01:33:21.650

发生这种情况是因为您使用最新版本的 jquery`attr('checked')`返回`'checked'`而`prop('checked')`返回`true`。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2013-11-28T15:45:19.997

这行得通。

```
 $("div.row-form input[type='checkbox']").attr('checked','checked'); 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-02-23T19:13:56.280

试试这个，因为你可能正在使用 jQuery UI（如果没有请评论）

```
 $("#fModal" ).dialog({
     open: function( event, ui ) {

     if(//some hidden value check which stores the DB value==expected value for
      checking the Checkbox)

         $("div.row-form input[type='checkbox']").attr('checked','checked');

    }
   }); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-09-25T18:53:24.137

你试过`$("#estado_cat").checkboxradio("refresh")`在你的复选框上运行吗？

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-03-10T14:29:48.707

我也遇到了这个问题。

这是我的旧代码不起作用

```
if(data.access == 'private'){
     Jbookaccess.removeProp("checked") ; 
    //I also have tried : Jbookaccess.removeAttr("checked") ;
 }else{
    Jbookaccess.prop("checked", true)
} 
```

这是我现在可以使用的新代码：

```
if(data.access == 'private'){
     Jbookaccess.prop("checked",false) ;
 }else{
    Jbookaccess.prop("checked", true)
} 
```

所以，关键是在它起作用之前，确保选中的属性确实存在并且没有被删除。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-03-10T17:46:35.733

加载模态窗口后设置复选框。我认为您在加载页面之前设置了复选框。

```
$('#fModal').modal('show');
$("#estado_cat").attr("checked","checked"); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-05T12:05:47.167

```
<div class="custom-control custom-switch">
      <input type="checkbox" class="custom-control-input" name="quiz_answer" id="customSwitch0">
      <label class="custom-control-label" for="customSwitch0"><span class="fa fa-minus fa-lg mt-1"></span></label>
  </div> 
```

请记住分别增加 id 和 for 属性。对于动态添加的引导程序复选框。

```
$(document).on('change', '.custom-switch', function(){
    let parent = $(this);
    parent.find('.custom-control-label > span').remove();
    let current_toggle = parent.find('.custom-control-input').attr('id');
    if($('#'+current_toggle+'').prop("checked") == true){
        parent.find('.custom-control-label').append('<span class="fa fa-check fa-lg mt-1"></span>');
    }
    else if($('#'+current_toggle+'').prop("checked") == false){
        parent.find('.custom-control-label').append('<span class="fa fa-minus fa-lg mt-1"></span>');
    }
}) 
```

# html - CSS 灵活布局：灵活左列和可变固定右列

> ID：15044341
> 
> 赞同：0
> 
> 时间：2013-02-23T18:59:36.730
> 
> 标签：html, css

我想在一行中显示 div 元素的内容。然而 ul 元素的宽度是未知的，因为它可以有许多子 li 元素。h2 将始终占据其余空间。每个 li 元素的宽度为 20px。

它看起来像这样：

```
|----h2------------|li|li|li||
|----h2---------------|li|li|| 
```

HTML：

```
<div>
<h2>name</h2>
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
</ul>
</div> 
```

我在互联网上找到了许多解决方案，但不确定选择哪个（正确的解决方案与黑客）。浏览器兼容性不是问题，它只需要在最新版本的 chrome 上工作。

更新：会有多行 div 元素并且 li 元素应该对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:07:31.037

最简单、最紧凑、最直接的方法是使用浮点数。如果你知道你的元素会有不同的大小，但你不知道它们到底是什么，那么有两种完全灵活的方法可以解决这个问题。

这将是如何使用`display: table`：

[http://jsfiddle.net/8uTfp/1/](http://jsfiddle.net/8uTfp/1/)

```
div {
    display: table;
    width: 100%;
}

h1, ul {
    display: table-cell;
    vertical-align: middle;
}

ul {
  text-align: right;
}

li {
  display: inline-block;
} 
```

这将是如何使用 flexbox 做到这一点：

[http://jsfiddle.net/8uTfp/](http://jsfiddle.net/8uTfp/)

```
div {
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}

ul {
  margin-left: auto;
}

li {
  display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:09:16.323

您可以浮动`h2`左侧和`ul`右侧。

```
div h2 { float: left; }
div ul { float: right; } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T19:13:52.557

如果 div 的高度和列表项的高度是固定的且已知值，您可以尝试 followihg CSS（注意我添加了 css 类）：

```
.container{
  height: 30px;
  position: relative;
}
.container ul{
  padding: 0; margin: 0;
  /* Other reset rules here ... */
  position: absolute;
  top: 0;
  right: 0;
}
.container ul li{
  display: inline;
  float: left;
  height: 30px;
  /* Other format rules here ... */
} 
```

如果您不指定 div 的高度，它将由 h2 元素的指标设置，因为绝对定位的元素不会强制布局。我希望这有帮助。

# r - 混合数据帧的总和取决于 R 中的多个条件

> ID：15044342
> 
> 赞同：4
> 
> 时间：2013-02-23T18:59:39.687
> 
> 标签：r, dataframe

[这是我之前的问题](https://stackoverflow.com/q/15041825/1281870)的更复杂的后续。答案是使用矩阵，但这不适用于具有不同模式值的数据帧。

我想将*不同大小*的数据框与字符列和整数列结合起来，并根据*多个条件*计算它们的总和。

## 条件

1.  仅针对具有匹配“名称”值的行计算总和
2.  仅针对匹配的列名计算总和
3.  如果一个单元格`df4`不是 0 也不是 NA，那么总和应该是`df3 + df4`
4.  否则总和应该是`df1 + df2 + df3`

## 例子

```
> df1 <- data.frame(Name=c("Joe","Ann","Lee","Dan"), "1"=c(0,1,5,2), "2"=c(3,1,0,0), "3"=c(2,0,2,2), "4"=c(2,1,3,4))
> df1
  Name X1 X2 X3 X4
1  Joe  0  3  2  2
2  Ann  1  1  0  1
3  Lee  5  0  2  3
4  Dan  2  0  2  4

> df2 <- data.frame(Name=c("Joe","Ann","Ken"), "1"=c(3,4,1), "2"=c(2,3,0), "3"=c(2,4,3))
> df2
  Name X1 X2 X3
1  Joe  3  2  2
2  Ann  4  3  4
3  Ken  1  0  3

> df3 <- data.frame(Name=c("Lee","Ben"), "1"=c(1,3), "2"=c(3,4), "3"=c(4,3))
> df3
  Name X1 X2 X3
1  Lee  1  3  4
2  Ben  3  4  3 
```

条件取决于此框架：

```
> df4 <- data.frame(Name=c("Lee","Ann","Dan"), "1"=c(6,0,NA), "2"=c(0,0,4), "3"=c(0,NA,0))
> df4
   Name  X1  X2  X3
1   Lee   6   0   0
2   Ann   0   0  NA 
3   Dan  NA   4   0 
```

对于上述示例，这是预期的结果（* 值取决于 df4）：

```
> dfsum
  Name  X1  X2  X3  X4
1  Joe   3   5   4   2
2  Ann   5   4   4   1
3  Lee   7*  3   6   3
4  Dan   2   4*  2   4
5  Ken   1   0   3  NA
6  Ben   3   4   3  NA 
```

## 可能的步骤？

首先将 df1、df2、df3、df4 扩展为 5 列 6 行，用 NA 填充缺失的数据。

然后对于每个数据帧：

1.  按“名称”对行进行排序
2.  将“名称”列与“X1”...“X4”分开
3.  将“X1”...“X4”列转换为矩阵
4.  计算矩阵的总和，就像我的另一个问题的答案一样，**但**附加条件 1
5.  将结果矩阵转换为数据框
6.  cbind“名称”列与结果数据框

## 如何在 R 中做到这一点？

* * *

### 解决方案

@Ricardo Saporta 的解决方案几乎没有什么变化：

添加`, padValue=NA)`四个 addCols()。

如此处所回答，将 sumD3D4 和[dtsum](https://stackoverflow.com/a/15057885/1281870)的定义替换为：

```
plus <- function(x) {
  if(all(is.na(x))){
    c(x[0],NA)} else {
      sum(x,na.rm = TRUE)}
}

sumD3D4  <- setkey(rbind(dt3, dt4)[,lapply(.SD, plus), by = Name], "Name")
dtsum <- setkey(rbind(dt1, dt2, dt3)[, lapply(.SD, plus), by=Name], "Name") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:09:55.900

如果您使用 data.table 而不是 data.frame，您可以使用它的`by=xxxx`功能，按名称添加。下面的代码应该会给你预期的结果。

请注意，我正在用额外的空列填充 data.tables。但是，我们`condTrue`在此之前进行计算。

```
library(data.table)
dt1 <- data.table(df1)
dt2 <- data.table(df2)
dt3 <- data.table(df3)
dt4 <- data.table(df4)

# make sure all dt's have the same columns 
#-----------------------------------------#

# identify which dt4 satisfy the condition 
condTrue <- as.data.table(which(!(is.na(dt4) | dt4==0), arr.ind=TRUE))

# ignore column "Name" from dt4
condTrue <- condTrue[col>1]

# convert from (row, col) index to ("Name", columnName) 
condTrue <- data.table(Name=dt4[condTrue$row, Name], colm=names(dt4)[condTrue$col], key="Name")

# First make a list of all the unique column names
allColumnNames <- unique(c(names(dt1), names(dt2), names(dt3), names(dt4)))

# add columns as necessary, using addCols (definted below)
addCols(dt1, allColumnNames)
addCols(dt2, allColumnNames)
addCols(dt3, allColumnNames)
addCols(dt4, allColumnNames)

sumD3D4  <- setkey(rbind(dt3, dt4)[, lapply(.SD, sum), by=Name], "Name")
dtsum    <- setkey(rbind(dt1, dt2, dt3)[, lapply(.SD, sum), by=Name], "Name")

for (Nam in condTrue$Name) {
  colsRepl <- condTrue[.(Nam)]$colm
  valsRepl <- unlist(sumD3D4[.(Nam), c(colsRepl), with=FALSE])
  dtsum[.(Nam), c(colsRepl) :=  as.list(valsRepl)]
}

dtsum
#    Name 1 2 3 4
# 1:  Ann 5 4 4 1
# 2:  Ben 3 4 3 0
# 3:  Dan 2 4 2 4
# 4:  Joe 3 5 4 2
# 5:  Ken 1 0 3 0
# 6:  Lee 7 3 6 3 
```

* * *

```
addCols <- function(x, cols, padValue=0)  {
  # adds to x any columns that are in cols but not in x
  # Returns TRUE  if columns were added
  #         FALSE if no columns added 
  colsMissing <- setdiff(cols, names(x))

  # grab the actual DT name that was passed to function
  dtName <- as.character(match.call()[2])

  if (length(colsMissing)) {
    get(dtName, envir=parent.frame(1))[, c(colsMissing) := padValue]  
    return(TRUE)
  }

  return(FALSE)
} 
```

# time - 在 SCons 中计算构建经过的时间

> ID：15044345
> 
> 赞同：5
> 
> 时间：2013-02-23T19:00:04.153
> 
> 标签：time, scons

我有一个项目，它由一个二进制文件和一组它所依赖的静态库组成。我正在尝试获取构建每个库的经过时间，但没有成功。

我试图用它`AddPreAction()/AddPostAction()`来计算经过的时间，但是`AddPreAction()`一旦库所依赖的所有源文件都被编译（这是有道理的），就会被调用。

有一个帖子与此问题相关：

[如何测量 scons 构建的每个组件的构建时间？](https://stackoverflow.com/questions/3402262/how-can-i-measure-the-build-time-for-each-component-of-a-scons-build)

但我更愿意寻找更优雅的解决方案，而不是覆盖一些环境变量，然后必须解析输出以计算时间。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T19:55:13.283

`--debug=time`您可以使用SCons 命令行选项获取构建的各个不同方面的时间信息，如[SCons 手册页中所述](http://www.scons.org/doc/production/HTML/scons-man.html)

这是摘录，您可以在上面提供的链接中阅读其余内容：

```
--debug=time
Prints various time profiling information: the time spent executing each 
individual build command; the total build time (time SCons ran from 
beginning to end); the total time spent reading and executing SConscript 
files; the total time spent SCons itself spend running (that is, not 
counting reading and executing SConscript files); and both the total 
time spent executing all build commands and the elapsed wall-clock 
time spent executing those build commands... 
```

# java - Android，如何禁用锁屏/屏幕超时（API 版本无关）

> ID：15044346
> 
> 赞同：3
> 
> 时间：2013-02-23T19:00:07.790
> 
> 标签：java, android, android-4.2-jelly-bean

我需要禁用锁屏并将屏幕超时设置为 never 不仅在我的应用程序中，而且在手机中。

我试图将屏幕超时设置为“-1”，这适用于例如 Android 2.3 但不适用于 4.2 有什么办法吗？

```
Settings.System.putString(context.getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT, "-1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:00:41.013

无法检查 4.2 但相同的代码在 4.1.2 上运行良好，只要我添加了以下权限 -

```
 <uses-permission android:name="android.permission.WRITE_SETTINGS"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T05:48:30.147

您可以通过添加 Android:screenOn="true" 在每个活动的 xml 布局文件中执行此操作

# r - R中的希尔估计器

> ID：15044347
> 
> 赞同：1
> 
> 时间：2013-02-23T19:00:08.350
> 
> 标签：r, time-series, tail, estimation

我正在尝试找到一个包，该包具有 R 中极值理论的 Hill 估计器的工作版本。有谁知道存在什么包可以做到这一点？几次搜索产生了几个包，但它们的开发水平（即它们是否仍然充满错误）尚不清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:10:47.260

关于搜索方法的说明：我发现 sos 包的`findFn`功能非常方便。尝试这个：

```
install.packages("sos")
load("sos")
findFn("Hill extreme") 
```

从他们的索引页面查看前几个包描述文件：

```
Package: fExtremes
Version: 2160.78
Revision: 5405
Date: 2012-11-30
Title: Rmetrics - Extreme Financial Market Data
Author: Diethelm Wuertz and many others, see the SOURCE file

Package: evir
Version: 1.7-3
Date: 2011-07-22
Title: Extreme Values in R
Authors@R: c(person("Bernhard", "Pfaff", email = "bernhard@pfaffikus.de", role = c("aut", "cre")),
           person("Alexander", "McNeil", email = "mcneil@math.ethz.ch", role = "aut", comment = "S
           original (EVIS)"), person("Alec", "Stephenson", email = "alec_stephenson@hotmail.com",
           role = "trl", comment = "R port of EVIS")) 
```

这些是作者列表中可信的名字。您在使用这些软件包中的任何一个时遇到困难吗？

# java - Microsoft Word exe 的路径。文件

> ID：15044349
> 
> 赞同：0
> 
> 时间：2013-02-23T19:00:15.330
> 
> 标签：java, windows

我正在编写一个简单的 Java 程序，它在按钮上显示不同程序的名称。当您单击一个按钮时，该程序将在一个单独的窗口中打开。为了让我的程序能够打开 Microsoft Word，我需要它的代码路径。Windows 上 Microsoft Word 2007 的路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:47:26.853

要查找路径，只需右键单击 Microsoft Word 2007，单击属性，然后单击“打开文件位置”。这应该会打开包含 Microsoft Word 2007 的 .exe 的目录。

# github - GitHub Pages：如何以 Markdown 格式编辑此页面，就像我创建它一样？

> ID：15044353
> 
> 赞同：30
> 
> 时间：2013-02-23T19:00:40.047
> 
> 标签：github, markdown, github-pages

我对触摸网站提供的生成的 HTML 不太满意，我想知道是否有任何方法可以以降价格式更改我的页面内容，就像我在创建页面时所做的那样？

任何关于这样做的输入都会很棒。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-24T00:43:51.283

默认情况下，[GitHub Pages](http://pages.github.com/)仅帮助您生成 html 页面。

但是，如果您将站点设置为使用[jekyll](https://github.com/mojombo/jekyll)，那么您可以将文件存储在 markdown 中。例如，在[这个 repo '](https://github.com/cboettig/labnotebook/tree/master/_posts) ['](https://github.com/cboettig/labnotebook/tree/master/_posts)`_posts`的部分中生成到.[`cboettig/labnotebook`](https://github.com/cboettig/labnotebook/tree/master/_posts)[`carlboettiger.info`](http://carlboettiger.info/)

请参阅帮助页面“[将 Jekyll 与页面结合使用](https://help.github.com/articles/using-jekyll-with-pages)”

更具体地说（如[esfandia](https://stackoverflow.com/users/1641163/esfandia)的[回答](https://stackoverflow.com/a/40009754/6309)中强调的那样），请参阅~~“[自动页面生成器](https://help.github.com/articles/creating-pages-with-the-automatic-generator/#the-automatic-page-generator)”~~，它允许进行降价编辑。

[![https://help.github.com/assets/images/help/pages/pages-automatic-page-generator.png](../Images/45c4d8004a2410ee91f09859241850d4.png)](https://i.stack.imgur.com/ouvCJ.png)

正如[dregad](https://stackoverflow.com/users/1045774/c)[评论](https://stackoverflow.com/questions/15044353/github-pages-how-do-i-edit-this-page-in-markdown-format-just-as-i-created-it/15047448#comment76673772_15047448)的那样， [2016 年 12 月](https://github.com/blog/2295-new-theme-chooser-for-github-pages)有一个[**新的主题选择器**](https://github.com/blog/2295-new-theme-chooser-for-github-pages)：[](https://github.com/blog/2295-new-theme-chooser-for-github-pages)

 **[![https://cloud.githubusercontent.com/assets/849592/21229008/24006df6-c2ae-11e6-94a4-ca4eb085f5f4.png](../Images/1867e62c1c88a72c02bd6c55f36f4acf.png)](https://i.stack.imgur.com/ka7MV.png)

请参阅**[Antriksh Yadav](https://twitter.com/Antrikshy)**的[这篇文章](http://antrikshy.com/blog/noob-guide-to-hosting-cheap-website-blog-jekyll-github-pages-2)：

[![http://antrikshy.com/assets/github-page-generator-edit.png](../Images/16e6f561f64c83317a35aeb78d0a61ae.png)](https://i.stack.imgur.com/uGing.png)

* * *

2016 年 8 月更新：**[更简单的 GitHub 页面发布](https://github.com/blog/2228-simpler-github-pages-publishing)**现在允许将页面文件保存在*同一*分支的子文件夹中（不再`gh-pages`需要）：

[![现在您可以在存储库设置中选择一个源，GitHub Pages 将在那里查找您的内容。](../Images/4bfeda5a03d4b7f8c4891f088585c936.png)](https://i.stack.imgur.com/rZkbu.png)

所以你不再需要多个分支了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-25T18:21:01.547

如果您替换`index.html`为`index.md`包含原始 Markdown 文本，并在顶部添加[“Front Matter”](http://jekyllrb.com/docs/frontmatter/)部分，那么您可以在 Markdown 中进行页面编辑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-12T23:05:04.997

这是完全可能的并且受支持：只需返回“设置”，向下滚动到 GitHub Pages。您用于创建初始页面的源应该仍然存在，当您单击“启动自动页面生成器”时，它将允许您在浏览器中更新降价代码。

完成后，您需要再次选择布局，但一旦完成，它将创建一个新的 index.html，使用您选择的 GitHub 页面源提交它，然后发布修改后的页面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-03T23:34:14.370

你需要杰基尔。您正在寻找的文档在这里：[https ://help.github.com/articles/using-jekyll-with-pages](https://help.github.com/articles/using-jekyll-with-pages)**

# html - 相对于它的原始位置定位一个元素，除了 x=0

> ID：15044358
> 
> 赞同：0
> 
> 时间：2013-02-23T19:01:13.140
> 
> 标签：html, css

有没有办法相对于它的原始位置定位元素，除了 x=0 - 也就是说，元素定位在它的原始垂直坐标但粘在窗口的左边框上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:15:17.450

最终，是的。

我相信这个词将是“粘性的”。
它会说：这个元素是相对定位的，直到它通过一个特定的阈值，然后它将是一个固定的位置，位于...任何地方

我认为在移动端（例如响应式菜单/标题）和 webkit 开发者分支中已经有了一些初步的支持。

对于现实世界的支持，您最好只使用 JavaScript。

# database - 在数据库中使用 b 树

> ID：15044359
> 
> 赞同：3
> 
> 时间：2013-02-23T19:01:19.807
> 
> 标签：database, algorithm, b-tree

我必须为学校项目使用 b 树实现一个数据库。该数据库用于存储音频文件（歌曲），并且可以进行许多不同的查询，例如查询给定艺术家或特定专辑的所有歌曲。

直观的想法是在每个字段*（歌曲、专辑、艺术家...）*上使用 b 树，问题是可以要求删除任何字段的任何成员，并且如果您删除了您拥有的艺术家要从其他 b 树中删除他的所有专辑和歌曲，请记住，例如，在对应于歌曲的 b 树中，给定艺术家的所有歌曲不必彼此靠近。

我的问题是：有没有办法这样做*（在删除作者后删除歌曲）*而不必遍历其他 b 树的所有元素？我不是在寻找代码只是想法，因为我想出的所有想法都是蛮力的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:42:13.943

这是我的理解，可能并不完全正确。

通常在数据库实现中，B 树用于索引，因此除非您想强制用户为每一列建立索引，否则默认为每个字段创建 B 树是不必要的。虽然如此多的索引几乎在所有情况下都会导致快速读取（对所有内容都有索引，您不必进行全表扫描），但它也会导致插入/更新/删除非常慢，因为相应的数据有在每棵树中更新。我相信您知道，现代数据库为您提供至少一个索引（主键），因此您将拥有至少一个 B 树，其中包含一个主键键和一个指向相应节点的指针。

B 树索引中的每个节点都应该有一个指向它所代表的完整对象的指针/引用。

未来创建的索引将包括您在索引中指定的属性，例如歌曲名称、艺术家等，但仍将包含指向相应节点的指针/引用。因此，当您修改歌曲标题时，您将需要修改所有索引引用的引用节点。如果您有任何将修改后的引用作为属性的索引，则必须修改该索引本身中的值。

不幸的是，我相信您的信念是正确的，即在删除/更新时您将不得不通过其他 B 树进行暴力破解，这是使用大量索引的缺点之一（更​​新/删除时间变慢）。如果您只是删除引用的节点，您最终可能会得到指向已删除对象的指针，这将（取决于您的语言）给您某种形式的 NullPointerException。为了防止这种情况，必须从所有树中删除它们的引用。

请记住，尽管对索引进行全盘扫描仍然比全表扫描要好得多。

# javascript - 如何更改下一个和上一个按钮上的标题？

> ID：15044360
> 
> 赞同：0
> 
> 时间：2013-02-23T19:01:19.523
> 
> 标签：javascript, jquery, json, youtube-api

我正在将 Youtube 视频提取到具有下一个和上一个按钮的轮播中。我还添加了演示链接..

如何更改“下一个”和“上一个”按钮的标题、描述、总浏览量？

```
 <script type="text/javascript">
$(document).ready(function(){});

var playListURL = 'http://gdata.youtube.com/feeds/api/playlists/cZxy-GpHLCQ_Ss9sGJfWhzBAIOMDYxMN?v=2&alt=json&callback=?';
var videoURL= 'http://www.youtube.com/watch?v=';
$.getJSON(playListURL, function(data) {
var list_data="";
$.each(data.feed.entry, function(i, item) {
var feedTitle = item.title.$t;
var feedURL = item.link[1].href;
var fragments = feedURL.split("/");
var videoID = fragments[fragments.length - 2];
var url = videoURL + videoID;
var thumb = "http://img.youtube.com/vi/"+ videoID +"/default.jpg";
list_data += '<div><a href= "#" title="'+ feedTitle +'"><img src="'+ thumb +'" width="213px" height="141px"/></a></div>';
});
$(list_data).appendTo(".slides");
$('.carousel').carousel({carouselWidth:930,carouselHeight:330,directionNav:true,shadow:true,buttonNav:'bullets'});

var cnt = 0;
$(".nextButton").click(function () {
var len = $(this).siblings(".slides").children(".slideItem").length;
var a = cnt++;

  });

});
</script> 
```

这是演示链接[http://jsfiddle.net/EzKQy/](http://jsfiddle.net/EzKQy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:18:49.837

除了图书馆提供的属性外，

您可以根据两个 css 属性选择最上面的项目：

*   带有`top`=的项目`0px`

*   带有`z-index`=的项目`<Total Slides-1>`

所以下面的代码片段应该做到这一点（并更新标题）：

```
var $items = $(".slides").find(".slideItem");
$(".nextButton, .prevButton").click(function () {
$("#title").text($items.filter(function () {
        return $(this).css("top") == "0px";
   }).find("a").attr("title"));
}); 
```

这是你[更新的小提琴](http://jsfiddle.net/EzKQy/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:39:02.800

根据 youtube API v2，

```
> The API response for a playlist feed is almost identical to a typical
> video feed or set of search results. However, a video entry in a
> playlist feed differs from a typical video entry in the following
> ways:
> 
> Each playlist entry contains the <yt:position> tag, which specifies
> the place that the video appears in the playlist order. The
> <yt:position> tag is a subtag of the <entry> tag.
> 
> If the user defined a custom title for the video, that title appears
> in the <atom:title> tag, and the video's original title appears in the
> <media:title> tag. 
```

因此，该问题的解决方案是从收到的 JSON 中获取标题的 yt:position 将您的下一个按钮挂钩到下一个兄弟的 yt:position 和上一个按钮到上一个兄弟的位置。您也可以有创意，并以此为基础随机播放视频。

# jms - 阿帕奇骆驼和跺脚

> ID：15044362
> 
> 赞同：5
> 
> 时间：2013-02-23T19:01:35.283
> 
> 标签：jms, activemq, apache-camel, stomp

我正在开发一个解决方案，其架构是：

```
 PHP -> JMS -> Camel -> several web services and endpoints. 
```

根据：[http ://activemq.apache.org/php.html](http://activemq.apache.org/php.html)

...我应该使用 PHP STOMP 客户端来使用 JMS。这很好用。

我还使用 ActiveMQ STOMP Java 客户端从 JMS 接收。

但是，我想使用 Camel 来路由 JMS 消息。我似乎无法让 Camel 与 JMS / Stomp 一起工作。

我看了一下[https://github.com/fusesource/stompjms](https://github.com/fusesource/stompjms)

...但我不知道如何让它与骆驼一起工作。

我还尝试了一个带有指定 STOMP 的 brokerURL 的 Spring camel-context.xml：

```
 <bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent">
      <property name="connectionFactory">
          <bean class="org.apache.activemq.ActiveMQConnectionFactory">
              <property name="brokerURL" value="stomp://localhost:61613" />
              <property name="userName" value="admin" />
              <property name="password" value="AmChamDev" />
          </bean>
      </property>
  </bean> 
```

...但是，这导致：

```
 [ #0 - JmsConsumer[/queue/test]] ultJmsMessageListenerContainer WARN  Could not 
  refresh JMS Connection for destination '/queue/test' - retrying in 5000 ms. 
  Cause: Could not create Transport. 
  Reason: java.io.IOException: Transport scheme NOT recognized: [stomp] 
```

关于如何让 Camel 与 JMS / Stomp 一起工作的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T20:08:39.510

使用 JMS/ActiveMQ 组件时，您必须使用开放式线路传输。

`tcp://localhost:61616`或者你有什么。

但别担心。即使您使用 STOP（或任何其他可用传输）向 ActiveMQ 发送消息，您也可以使用默认（开放线）传输使用 JMS api（以及 Camel 中的 ActiveMQ 组件）接收相同的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-20T12:12:54.890

根据骆驼文档[http://camel.apache.org/stomp.html](http://camel.apache.org/stomp.html)你需要包括额外的依赖：

```
<dependency>
    <groupId>org.apache.camel</groupId>
    <artifactId>camel-stomp</artifactId>
    <version>x.x.x</version>
    <!-- use the same version as your Camel core version -->
</dependency> 
```

# c# - 从 python 脚本执行 c# 控制台应用程序 - 好的设计？

> ID：15044368
> 
> 赞同：2
> 
> 时间：2013-02-23T19:02:04.393
> 
> 标签：c#, python, json, console

**您能否分享您对这是否是好的设计以及哪些平台更适合此类功能的想法**：

1.  Python 脚本提供静态页面
2.  用户发送帖子，Python 使用该帖子调用 C# 控制台应用程序
3.  C# 控制台应用程序通过标准输入接收命令，与 SOAP Web 服务对话，并返回 json
4.  Python解析json并返回结果给用户

它确实有效（我很惊喜），但这是最好的做事方式吗？还有其他不错的选择吗？更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:02:36.237

如果您无法为 Python 找到足够好的 SOAP 库（您尝试`suds`过吗？）并且无法向 SOAP Web 服务添加对应的 JSON（或其他内容），那么可能没有更好的方法来做到这一点，但这仍然无法实现设计好。除非您准备好自己编写缺少的部分，否则有些问题没有很好的答案。

# qt - Qt中HBoxLayout和VBoxLayout的区别

> ID：15044371
> 
> 赞同：1
> 
> 时间：2013-02-23T19:02:13.177
> 
> 标签：qt, layout

我只是在阅读 Qt 中布局的示例代码，我发现 Hboxlayout 和 VBoxlayout 有以下两行，

```
 QVBoxLayout *vbox = new QVBoxLayout();
    QHBoxLayout *hbox = new QHBoxLayout(this); 
```

我不明白其中的区别，为什么在后者中有一个 this 指针作为参数发送，而不是在第一个？

this 指针实际上指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:08:21.940

> 为什么在后一个中有一个 this 指针作为参数发送，而不是在第一个中？

两个构造函数都存在，请参见[QHBoxLayout](http://doc-snapshot.qt-project.org/4.8/qhboxlayout.html)和[QVBoxLayout](http://doc-snapshot.qt-project.org/4.8/qvboxlayout.html)。

> this 指针实际上指的是什么？

调用带有指针的变体时，此指针（`this`在您的情况下）获取新对象的所有权，这意味着它在自身被删除时也会将其删除。

否则，您需要自己删除对象（或稍后设置父对象）。在盒子布局的情况下，如上面链接的文档中所述，在这种情况下，您需要将布局添加到另一个布局。

正如@Mat 提到的，这是Qt 中的一般概念，另请参见[QObject::Qbject(QObject* parent = 0)](http://doc-snapshot.qt-project.org/4.8/qobject.html#QObject)。

# ajax - mvc ajax.beginform 不适用于局部视图

> ID：15044372
> 
> 赞同：1
> 
> 时间：2013-02-23T19:02:14.610
> 
> 标签：ajax, asp.net-mvc-4, ajax.beginform

我一直在尝试让级联下拉菜单在 asp.net mvc4 中工作......现在我从 ajax.beginform 开始......稍后我可能会直接使用 jquery......

我的问题是第一个（轨道）ajax.beginform 被调用，它调用控制器，然后它指向第二个部分（轨道）......但是当 SelectRailPartial.cshtml 渲染时它会这样做一个完整的视图......它不是用 div 标记作为替换的渲染......我已经尝试了 ajaxControls 中的各种值来指定替换等......它们似乎没有任何区别......

我怀疑我的问题可能出在我所包含的 javascripts 中......我已经把它全部剥离了一些我知道我需要保持简单......有人能发现我做错了什么吗？请....

**在我的（移动）控制器中，我有以下两种方法：**

```
 //this is my main form that I am looking at...
    public ActionResult LoadRailVehicle()
    {
        LoadRailVehicleInputModel model = new LoadRailVehicleInputModel();
        IRailService railService = new RailService();
        model.TrackList = railService.GetActiveRailTracks().ToList();
        return View(model);
    }

    [HttpPost]
    public ActionResult SelectTrack(string selectedTrack)
    {
        LoadRailVehicleInputModel model = new LoadRailVehicleInputModel();
        //kludge for now...
        model.RailCarList.Add("aaaa");         
        return PartialView("xSelectRailPartial", model);
    } 
```

**我的 LoadRailVehicle.cshtml**

```
@using TBS.Etracs.Web.Main.Areas.Carrier.Models
@model LoadRailVehicleInputModel

@{
    ViewBag.Title = "Load Rail Vehicle";
}

<scripts>   
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.js")"                    type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")"                type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.intellisense.js")"       type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.10.1.min.js")"               type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"             type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
</scripts>

<table border="0">
    <tr>
        <td>Track</td>
        <td> :   </td>
        <td><div id="trackdiv">@Html.Partial("xSelectTrackPartial", Model)</div></td>
    </tr>
    <tr>
        <td>Rail</td>
        <td> :  </td>
        <td><div id="Raildiv">@Html.Partial("xSelectRailPartial", Model)</div></td>
    </tr>
</table> 
```

**在 xSelectTrackPartial.cshtml 中：**

```
@using TBS.Etracs.Web.Main.Areas.Carrier.Models
@model LoadRailVehicleInputModel

<scripts>
    <script src="@Url.Content("~/Scripts/jquery-1.10.1.min.js")"               type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"             type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
</scripts>

@using (Ajax.BeginForm("SelectTrack", "Mobile",
                    new AjaxOptions
                    {  UpdateTargetId   = "Raildiv" 
                                @* This is a control in theLoadRailVehicle.cshtml *@
                      }))
{
    @Html.DropDownListFor(p => p.SelectedTrack,
                          new SelectList(Model.TrackList),          
                          new { id       = "trackdropdown",
                                name     = "trackdropdown",
                                Class    = "dropdownstyle", 
                                style    = "width: 100px" , 
                                onchange = "this.form.submit();"})
} 
```

**在 xSelectRailPartial.cshtml 中**

```
@using TBS.Etracs.Web.Main.Areas.Carrier.Models
@model LoadRailVehicleInputModel

<scripts>
    <script src="@Url.Content("~/Scripts/jquery-1.10.1.min.js")"               type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"             type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
</scripts>

@if (Model.RailCarList != null && Model.RailCarList.Count() > 0)
{
    @Html.DropDownListFor(p => p.SelectedRailCar,
                            new SelectList(Model.RailCarList),         
                            new { id       = "raildropdown",
                                  name     = "raildropdown",
                                  Class    = "dropdownstyle", 
                                  style    = "width: 100px" })
} 
```

**这是我**通过 _viewstart 获得的 _layout.cshtml

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - Etracs</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
      @*  @Styles.Render("~/Content/css")        *@
      @*  @Scripts.Render("~/bundles/modernizr") *@
      @*  @Scripts.Render("~/bundles/jquery")    *@
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.js")"                    type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.min.js")"                type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.9.1.intellisense.js")"       type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.10.1.min.js")"               type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"             type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
       @RenderSection("scripts", required: false) 
    </head>
    <body>

        <header>
            <div class="content-wrapper">
                <div class="float-right">
                    <section id="login">
                        @Html.Partial("_LoginPartial")
                    </section>
                </div>
            </div>      
        </header>

        <div id="body">         
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>

        @Html.Partial("_ViewSwitcher")
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; @DateTime.Now.Year - Turning Basin Services</p>
                </div>
            </div>
        </footer>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:24:24.837

查看评论....我切换到直接 jquery 并且对此有很多问题（这就是我首先尝试 ajax.beginform 的原因）......但过了一段时间我消除了所有问题jquery 和调用现在可以工作了......还有一个额外的好处，就是我可以将这个新代码嵌入到 html.beginform 中

我从来没有弄清楚 ajax.beginform 中的问题是什么导致它无法在部分屏幕内创建......

# php - 从 QueryPath 访问 OpenAmplify 时，我的 HTTP 请求失败/超时。为什么？

> ID：15044375
> 
> 赞同：0
> 
> 时间：2013-02-23T19:02:40.743
> 
> 标签：php, http, querypath

当我从 WAMP 上的 cmd.exe [命令行] 运行此脚本时，我得到：

```
 Could not retrieve data from OpenAmplify.file_get_contents(http://portal
tnx.openamplify.com/AmplifyWeb/AmplifyThis?apiKey=MY_API_KEY_GOES_HERE): failed to open stream: HTTP request failed!  (C:\wamp\www\Learning_Query_Pa
th\src\QueryPath\QueryPath.php: 4053) 
```

当我通过 Firefox 浏览器 [v 19.0] 从 localhost 运行此脚本时，我得到：

```
Fatal error: Maximum execution time of 30 seconds exceeded in C:\wamp\www\Learning_Query_Path\src\QueryPath\QueryPath.php on line 4525 
```

这是我使用的脚本：

```
 <?php

require 'src/QueryPath/QueryPath.php';

$url = 'http://portaltnx.openamplify.com/AmplifyWeb/AmplifyThis?';
$key = 'I_PUT_MY_API_KEY_HERE';
$text = 'I_PUT_TEXT_HERE';

$params = array(
  'apiKey' => $key,
);

$url .= http_build_query($params);

$options = array(
  'http' => array(
    'method' => 'POST',
    'user_agent' => 'QueryPath/2.0',
    'header'  => 'Content-type: application/x-www-form-url-encoded',
    'content' => http_build_query(array('inputText' => $text)),
  ),
);

$context = stream_context_create($options);
try {
  $qp = qp($url, NULL, array('context' => $context));
}
catch (Exception $e) {
  print "Could not retrieve data from OpenAmplify." . $e->getMessage();
  exit;
}

    $qp->find('ProperNouns>TopicResult>Topic>Name')->slice(0, 20);

$out = qp(QueryPath::HTML_STUB, 'body')->append('<ul/>')->find('ul');

foreach ($qp as $name) {
  $out->append('<li>' . $name->text() . '</li>');
}

$out->writeHTML();

?> 
```

我怎样才能使这项工作？

PS Open Amplify 是一个 Web 服务，它获取提供的文本并在对其进行分析后，返回许多关于它的有趣内容。我真的很想完成这项工作并且是 QueryPath 的忠实粉丝，所以我只对如何使它与 QueryPath 一起工作的建议感兴趣！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:12:10.653

要延长超时时间，您可以在“http”选项中使用“超时”名称/值对。例如把它放在这里：

```
`'content' => ...
'timeout' => 120.0`
```

`（参考：[http](http://www.php.net/manual/en/context.http.php) ://www.php.net/manual/en/context.http.php ）`

 `不过，我的猜测是，还有其他问题。您可以使用`file_get_contents()`而不是`qp()`来获取文件，然后将字符串传递给 QueryPath。至少从那时起，您将调试网络问题，而不是 QueryPath。

对于使用 OpenAmplify，我也很幸运地使用了 CURL API，但这比内置的 PHP 流包装器要复杂一些（参考：[http ://www.php.net/manual/en/ book.curl.php](http://www.php.net/manual/en/book.curl.php)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:33:21.437

尝试点击此网址。这应该工作 [http://portaltnx20.openamplify.com/AmplifyWeb_v21/AmplifyThis](http://portaltnx20.openamplify.com/AmplifyWeb_v21/AmplifyThis)`

# jquery - 在没有过渡的情况下更改一些 CSS 值，然后在更改后立即使用过渡

> ID：15044382
> 
> 赞同：0
> 
> 时间：2013-02-23T19:03:15.100
> 
> 标签：jquery, css, css-transitions

情况如下：

我有一个元素必须在单击时移动到某个位置而没有过渡，然后立即移动到另一个位置，但现在有了过渡。

首先，我试过这样：

```
var transform = Modernizr.prefixed('transform'),
    transition = Modernizr.prefixed('transition'),
    style1 = {},
    style2 = {};

style1[transform] = "translate(100px, 20px)";
style1[transition] = "none"; 
style2[transform] = "translate(500px, 50px)";
style2[transition] = "2s"; 

$('div')
    .on('click', function () {
        $(this)
          .css(style1)
          .css(style2);
    }); 
```

[http://jsfiddle.net/trajektorijus/vUUb5/2/](http://jsfiddle.net/trajektorijus/vUUb5/2/)

但这并没有奏效......有人可以解释为什么吗？

我设法做我想做的事，但我认为这不是正确的方法：

```
var transform = Modernizr.prefixed('transform'),
    transition = Modernizr.prefixed('transition'),
    style1 = {},
    style2 = {};

style1[transform] = "translate(100px, 20px)";
style1[transition] = "none"; 
style2[transform] = "translate(500px, 50px)";
style2[transition] = "2s"; 

$('div')
    .on('click', function () {
        $(this)
            .css(style1)
            .delay()
            .queue(function () {
                $(this)
                    .css(style2)
                    .dequeue();
            });
    }); 
```

[http://jsfiddle.net/trajektorijus/vUUb5/3/](http://jsfiddle.net/trajektorijus/vUUb5/3/)

你能推荐比这更聪明的东西吗？

谢谢！

编辑：另一种选择是：

```
var $this = $(this);

$this.css(style1);
setTimeout(function () { $this.css(style2); }); 
```

[http://jsfiddle.net/trajektorijus/vUUb5/5/](http://jsfiddle.net/trajektorijus/vUUb5/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:16:22.550

像这样的东西？

[http://jsfiddle.net/vUUb5/4/](http://jsfiddle.net/vUUb5/4/)

```
$(function () {
    $('div').on('click', function () {
        $(this).css({top: '20px', left: '100px' })
            .animate({ top: '50px', left: '500px' }, 2000);
    });
}); 
```

# java - 如何将时间四舍五入到最近的一刻钟和半小时间隔？

> ID：15044383
> 
> 赞同：1
> 
> 时间：2013-02-23T19:03:25.107
> 
> 标签：java, date, time, rounding

关于如何修改以下代码段以使其适用于四分之一小时和半小时间隔的任何想法？

```
import java.util.Calendar;
import java.util.Date;
import org.apache.commons.lang.time.DateFormatUtils;
import org.apache.commons.lang.time.DateUtils;
import org.apache.commons.lang.time.FastDateFormat;

public class DateRounding {
    public static void main(String[] args) {
        FastDateFormat formatter = DateFormatUtils.ISO_DATETIME_TIME_ZONE_FORMAT;

        Date now = new Date();
        System.out.println("now = " + formatter.format(now));       

        // Get nearest second
        Date nearestSecond = DateUtils.round(now, Calendar.SECOND);
        System.out.println("nearestSecond = " + formatter.format(nearestSecond));

        // Get nearest minute
        Date nearestMinute = DateUtils.round(now, Calendar.MINUTE);
        System.out.println("nearestMinute = " + formatter.format(nearestMinute));

        // Get nearest hour
        Date nearestHour   = DateUtils.round(now, Calendar.HOUR);
        System.out.println("nearestHour = " + formatter.format(nearestHour));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:08:14.093

四分之一是 15 分钟 = 15*60*1000 毫秒。您可以将其中的一半添加到 a 的 long 值`Date`，除以它并再次相乘。

同样的半小时。

也许你甚至可以做

```
DateUtils.round(now, 15*60*1000); 
```

为此，请查阅[API 文档](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html#round%28java.util.Date,%20int%29)。

# java - Java - 多线程服务器仅适用于一个连接

> ID：15044384
> 
> 赞同：0
> 
> 时间：2013-02-23T19:03:27.727
> 
> 标签：java, multithreading, sockets, client-server

我正在编写一个多人游戏，并且正在使用套接字在 Java 中为它编写自己的服务器。

我使用 Java 教程和一些谷歌搜索成功地启动并运行了一个服务器，但是当我尝试实现一个多线程服务器来处理多个客户端时，它工作不正常。

第一个连接的客户端仍然可以正常工作，但任何其他连接的客户端在将输入发送到服务器后只会坐在那里，什么也不做。这是我的代码：

```
//This class handled Server/client communication for one client.
public class GameRoom implements Runnable {
  public GameRoom(Socket socket) {
    this.socket = socket;
  }

  public void run() {
    logger.info("Game room has been created.");

    while(true) {
      try {
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        out = new PrintWriter(socket.getOutputStream());
        String clientResponse = in.readLine();
        out.println("You wrote " + clientResponse);
        out.flush();
      } catch (IOException e) {
        logger.severe(e.getMessage());
        throw new RuntimeException();
      }
    }
  }

  //Will eventually change the string to a GSON object and delegate the appropriate actions based on the gson object type.
  private String delegateClientInput(String clientInput) {
    return "I heard you say: " + clientInput + "\n";
  }

  private BufferedReader in;
  private PrintWriter out;
  private Socket socket;
  private static final Logger logger = LogUtil.initializeServerLog(GameRoom.class.toString());
} 
```

* * *

```
/*
 * This class houses the server socket itself.  Handles connecting to multiple clients.
 */
public class ServerClientThreadPool extends Thread {
  public static void main(String[] args) {
    ServerClientThreadPool serverClientThreadPool = new ServerClientThreadPool();
    serverClientThreadPool.startServer();
  }

  ServerClientThreadPool() {
    try {
      serverListener = new ServerSocket(GAME_ROOM_PORT);
    } catch (IOException e) {
      logger.severe(e.getMessage());
      throw new RuntimeException();
    }
  }

  public void startServer() {
    for(int i = 0; i < MAX_CONNECTIONS; i++) {
      try {
        GameRoom gameRoom = new GameRoom(serverListener.accept());
        gameRoom.run();
      } catch (IOException e) {
        logger.severe(e.getMessage());
        throw new RuntimeException();
      }
    }
  }

  private static final int GAME_ROOM_PORT = 18000;
  private ServerSocket serverListener;
  private static final int MAX_CONNECTIONS = 100;
  private static final Logger logger = LogUtil.initializeServerLog(ServerClientThreadPool.class.getName());
} 
```

这是客户端的主要功能，当然位于一个单独的程序中：

```
ClientSocketWrapper clientSocketWrapper = ClientSocketWrapper.createSocketWrapperAndConnectTo("localhost", 18000);

/** MAIN ENTRY POINT FOR CLIENT */
while(true) {
  clientSocketWrapper.updateInputOutputStream();
  clientSocketWrapper.writeToOutputStream(executeClientInputProcessing());
  updateGameState(clientSocketWrapper.getServerResponse());
} 
```

我意识到您无法真正看到这些方法内部发生了什么，但它基本上只是像 Java 教程那样实现客户端并且它按预期工作。如果您认为我需要发布此处运行的方法，请告诉我，但我认为问题出在服务器端。

奖金问题：我也想知道我是否在正确的轨道上。游戏相当复杂，但我只是打算使用 Gson 来序列化和反序列化对象，并根据来回发送的 gson 字符串委托适当的操作。在谷歌搜索服务器/客户端架构之后，我的方法似乎太简单了。我很难找到好的资源来学习更高级的服务器/客户端架构，所以任何指向优秀书籍或教程的链接都会有很大帮助。

谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:05:47.603

你不想`gameRoom.run()`直接打电话。这会导致它在当前线程中执行，这会占用您的服务器循环，直到该`run()`方法完成。相反，您应该在单独的线程中运行它。从 Executors 工厂类获得的[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)将[是](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)一种简单的处理方式。例如，在您的 ServerClientThreadPool 中创建一个 ExecutorService：

```
public class ServerClientThreadPool {
    private ExecutorService executorService = Executors.newCachedThreadPool(); 
```

然后在接受socket连接后将gameRoom提交给服务：

```
GameRoom gameRoom = new GameRoom(serverListener.accept());
executorService.submit(gameRoom); 
```

请注意，我没有`extends Thread`在上面的 ServerClientThreadPool 上写。在上面的代码中，您没有以任何方式将它用作线程，除非您需要服务器在其他事情发生的同时接受连接（除了游戏之外），否则这样做可能是不正确的房间，这将在单独的线程中处理）。如果您确实需要它，那么它也应该是 a `Runnable`，而不是 a `Thread`，并且还应该提交给 a `ExecutorService`。

基于您的代码中关于线程如何工作的明显混淆，我建议您重新访问[Java“并发”教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)，其中包括[关于 Executors 的部分](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html)。

**奖励：**我认为来回传递 JSON 是一种合理的通信方式。这样做意味着您并不过分关注性能，因此我建议您停止自己处理套接字，而是在服务器端使用嵌入式 HTTP 服务器，在客户端使用简单的 HTTP 客户端。这将为您处理所有套接字和线程的废话，让您不必担心游戏逻辑的细节。

例如，[嵌入 Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)是一项微不足道的工作，并且有许多功能强大且简洁的 HTTP/REST 客户端，例如[Apache Http Client](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)和[Jersey REST Client](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e609)。

# javascript - 带有复选框过滤的d3映射

> ID：15044385
> 
> 赞同：5
> 
> 时间：2013-02-23T19:03:35.407
> 
> 标签：javascript, html, d3.js

我制作了一个 d3 符号地图，并希望用户能够通过名为“类型”的属性过滤点。共有三种类型：a、b、c，每种都有一个关联的 html 复选框，选中时应显示类型 a 的点，未选中时应删除这些点。我想知道将检查/取消检查事件传递到 d3 的最佳方法是什么？我在想如果有办法将检查的类型传递给 select.filter()，那将是最好的方法。这是代码：

HTML

```
<div class="filter_options">
<input class="filter_button" id="a_button" type="checkbox">a</input><br>
<input class="filter_button" id="b_button" type="checkbox">b</input><br>
<input class="filter_button" id="c_button" type="checkbox">c</input><br>
</div> 
```

js

```
queue()
.defer(d3.json, "basemap.json")
.defer(d3.json, "points.json")
.await(ready);

function ready(error, base, points) {

var button = 

svg.append("path")
  .attr("class", "polys")
  .datum(topojson.object(us, base.objects.polys))
  .attr("d", path);

svg.selectAll(".symbol")
  .data(points.features)
.enter().append("path")
  .filter(function(d) { return d.properties.type != null ? this : null; })
  .attr("class", "symbol")
  .attr("d", path.pointRadius(function(d) { return radius(d.properties.frequency * 50000); }))
  .style("fill", function(d) { return color(d.properties.type); });; 
```

目前，过滤器设置为捕获所有点：

```
.filter(function(d) { return d.properties.type != null ? this : null; }) 
```

我希望用户能够改变这一点。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T19:59:28.613

像这样的东西应该工作。为您的复选框添加一个值属性，以便您知道它们所指的内容。

```
d3.selectAll(".filter_button").on("change", function() {
  var type = this.value, 
  // I *think* "inline" is the default.
  display = this.checked ? "inline" : "none";

  svg.selectAll(".symbol")
    .filter(function(d) { return d.properties.type === type; })
    .attr("display", display);
}); 
```

# php - 如何设置和使用 GeoIP Lite

> ID：15044387
> 
> 赞同：2
> 
> 时间：2013-02-23T19:03:46.120
> 
> 标签：php, database, phpmyadmin

我需要能够使用该`MaxMind GeoLite`版本来查找用户 Country、City 和`Longitude/Latitude`. 除了经度/纬度所需的数据库之外，我需要哪些数据库是显而易见的。

需要数据库；

*   GeoLite 国家
*   GeoLite 城市
*   我还需要什么或者可以`longitude/latitude`通过上述数据库找到什么？

您可以下载多个版本。以下是您可以下载的列表；

*   二进制/gzip
*   二进制/xz
*   CSV / gzip
*   CSV / 压缩包
*   CSV / xz

我不明白这些是什么意思，希望得到一些帮助来确定我需要下载哪一个。

虽然我可以使用我的 1and1 商业帐户，但我还没有对数据库做任何事情。谁能告诉我如何建立数据库并将这些文件上传到它？

最后，我在哪里可以找到有关使用我的新数据库、从中读取、将用户位置和页面回显的帮助？

感谢您的宝贵时间和任何高级帮助。

最好的问候，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:34:55.077

如果您可以直接访问服务器/命令行，则可以使用二进制格式。这提供了更好的性能，但您需要更改 PHP 配置以安装 GeoIP 扩展或 Pecl 包。然后，您可以访问一些方便的 PHP 函数：[http ://www.php.net/manual/en/ref.geoip.php](http://www.php.net/manual/en/ref.geoip.php)

完整文档在这里：[http ://www.php.net/manual/en/book.geoip.php](http://www.php.net/manual/en/book.geoip.php)

如果您无权访问服务器配置，则可以下载 CSV 版本并将其导入 MySQL 数据库。然后，您将可以直接访问数据，并且可以编写相关查询以生成应用程序所需的结果。如果您使用的是 PHP MyAdmin MySQL 面板，您可以直接下载 CSV gz 或 zip 并上传/导入。您需要先创建表。请记住在相关列上创建索引。

GeoLite City 包含两个表格，IP block/City 和 City Locations (lat/lng)。GeoLite Country 仅包含 IP 块和国家名称。

如果您不需要 IP 数据，世界城市数据库可能更适合： http: [//www.maxmind.com/en/worldcities](http://www.maxmind.com/en/worldcities)

- 编辑

如果您只关心 geoIP 城市数据的第二个文件，以下 SQL 将创建一个包含必要列的表：

```
DROP TABLE IF EXISTS location;
CREATE TABLE location(
    locId int(10) unsigned NOT NULL,
    country char(2) NOT NULL,
    region char(2) NOT NULL,
    city varchar(50),
    postalCode char(5) NOT NULL,
    latitude float,
    longitude float,
    dmaCode integer,
    areaCode integer,
    PRIMARY KEY (locId)
); 
```

谷歌是你的朋友： http: [//odkq.com/geolitecity](http://odkq.com/geolitecity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T12:13:51.320

## 使用 GeoIP 的多种方式

有（至少）三种使用 GeoIP 的方法：

*   将 GeoIP 安装为 PHP PECL 扩展（用于 Apache 或 NginX），并通过 PHP 访问它（还有其他语言，这只是更常见的一种。需要 root 和命令行访问权限。
*   使用使用 GeoIP（如上安装）的分析包，例如开源[Piwik](https://piwik.org/)。
*   如果您使用的是 Wordpress 之类的软件，则至少有一个插件 ( [GeoIP Detect](https://wordpress.org/plugins/geoip-detect/) ) 不需要 root。

一般来说，地理数据数据库不是您可以直接访问的，而是使用某种应用程序进行查找（针对 IP 地址）。

以下是安装 GeoIP Lite 数据库并将其用于 PHP 的一些说明。这假设 CentOS/RHEL 和 Apache

## 在 CentOS/RHEL 和 Apache 上安装 GeoIP Lite

```
sudo mkdir /usr/share/GeoIP 
sudo cd /usr/share/GeoIP
sudo wget http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz
sudo wget http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz
sudo gunzip GeoIP.dat.gz
sudo gunzip GeoLiteCity.dat.gz
sudo yum update -y
sudo yum install -y geoip geoip-devel
sudo pecl channel-update pecl.php.net
sudo pecl install geoip
sudo nano /etc/php.d/geoip.ini 
```

**将以下内容添加到 geoip.ini 文件**

```
extension=geoip.so
geoip.custom_directory = /usr/share/GeoIP/ 
```

重启网络服务器

## GeoIP for PHP 下可用的地理变量

以下变量可通过[GeoIP PHP 函数](http://jp2.php.net/manual/en/ref.geoip.php)获得：

*   国家
*   地区（省、州）
*   城市
*   邮政编码
*   纬度
*   经度
*   DMA（美国/加拿大）
*   电话区号（仅限 PSTN/NA）
*   时区

# matlab - 如何在 matlab/octave 中生成大矩阵？

> ID：15044388
> 
> 赞同：1
> 
> 时间：2013-02-23T19:04:06.790
> 
> 标签：matlab, octave

我想生成一个非常大的形式矩阵：

```
[[1,2,3]
,[2,3,4]
,[3,4,5]
...
,[n,n+1,n+2]] 
```

对于 n 高达一百万或更多的值。你如何在 matlab/octave 中做到这一点？

我习惯于函数式编程，我会从中生成一个大列表`[1..n]`并将转换函数映射到该列表。我假设 matlab/octave 具有类似的生成大型矩阵的习语，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:08:57.363

让`r`和`c`成为所需矩阵的行数和列数，然后

```
M = bsxfun(@plus, 0:c-1, (1:r)'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:12:11.970

这应该有效：

```
n=100000;    
A=[[1:n]' [2:n+1]' [3:n+2]']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T20:15:47.150

```
A=zeros(n, 3);
for column=1:3
     for row=1:n
           A(row, column) = n + column - 1;
     end
end 
```

试试看。您想首先创建一个全为零的矩阵，因为它比在每次迭代时动态更新矩阵要高效得多；特别是对于非常大的矩阵。您想遍历内部 for 循环上的行，因为 Matlab 以列优先顺序存储向量，因此 Matlab 不必像遍历列那样在缓存和主内存之间继续执行这些操作在内部 for 循环。（它仍然会少很多）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T23:30:40.017

还有一个选择：

```
 bsxfun(@plus,cumsum(ones(n,1)),[0 1 2]); 
```

# codeigniter - Codeigniter Ajax Jquery 表单提交

> ID：15044391
> 
> 赞同：0
> 
> 时间：2013-02-23T19:04:16.337
> 
> 标签：codeigniter, jquery

我在 AJAX a CodeIgniter 上浏览过很多教程，但我似乎无法让它工作。我正在尝试提交将产品添加到购物车的表单。

这是控制器部分：

```
public function addtocart($page = 'orcamento')
{
    ...
    // ADD TO CART
    $idprod=$this->input->post("id",TRUE);
    $quant=$this->input->post("quant",TRUE);
    $prodname=$this->input->post("prodname",TRUE);

    $addtocart = array(
        'id'      => $idprod,
        'qty'     => $quant,
        'price'   => 1,
        'name'    => $prodname
        );

    $this->cart->insert($addtocart); 
```

风景：

```
<?php       
    $attributes = array('id' => 'flor'.$florestais_total_count);
    echo form_open('orcamento/addtocart', $attributes); 
?>
<span class="prod_list_quant_title">
    <?php echo lang('orc_quantidade'); ?>
</span>
<input type="text" name="quant" id="quant" class="prod_list_quant_input" value="" />
<input name="id" type="hidden" value="<?php echo $flor->idprodutos; ?>" style="border:0;" />
<input name="prodname" type="hidden" value="<?php $this->General_model->getLangString($flor->name,$lang); ?>" style="border:0;" />
<div class="prod_list_quant_add" onclick="addtocart('flor<?php echo $florestais_total_count; ?>')">
    <span class="text_quant_add"><?php echo lang('orc_btn_add'); ?></span>
</div>
</form>
</div> 
```

还有 addtocart 功能：

```
function addtocart(formid)
{
    var pid=$c("form#"+formid).children("input[name='id']").val();
    var pquant=$c("form#"+formid).children("input[name='quant']").val();
    var pname=$c("form#"+formid).children("input[name='prodname']").val();

    $c.ajax({
            type: "POST",
            url: "<?php echo base_url(); ?>orcamento/addtocart",
            dataType: "json",
            data: "id="+pid+"&qty="+pquant&"name="+pname,
            cache:false,
            success: function() {
            }  
        });
        return false;
    } 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T06:33:48.397

我正在研究类似的问题。通过一些测试，我发现 jquery 调用对 CI url 的处理类似于 CSS 之类的东西。尝试删除 base_url 回声，看看你的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:34:23.270

我知道了！这是答案：

```
function addtocart(formid)
{
    $c.ajax({
        type: "POST",
        url: "<?php echo base_url(); ?>orcamento/addtocart",
        data : $c("form#"+formid).serialize(),
        success : function(data) {
                // Show OK message
                alert('ok');
        },
        error: function(error){
                // Show error message
                alert('error');
        }
        });
    return false;
} 
```

现在我只需要更新视图上的产品列表而不刷新整个东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:10:52.990

试试这个，而不是`$c.ajax`：

```
$.post("<?php echo base_url(); ?>orcamento/addtocart",$("#"+formid).serialize()); 
```

看看接下来会发生什么。

# javascript - iframe 设置为点击事件。它适用于打开页面后的第一次点击。但不适用于第二次。请帮忙

> ID：15044397
> 
> 赞同：0
> 
> 时间：2013-02-23T19:04:59.760
> 
> 标签：javascript, html, iframe, google-maps-api-3, gis

使用 google map API V3，我创建了一个 html 页面。它完美地加载了 gmap，我设置按钮在 iframe 中加载另一个基于 web 的地图（mapmyindia.com）。基本上它从 gmap 获取参数（纬度/经度）并获取到该帧进行加载。它适用于第一次单击并导航当前 gmap 位置。在将它平移到另一个位置并单击提交按钮后，它应该将 gmap 的当前位置加载到 Iframe 中。但是第二次就不行了。请检查我的代码和帮助......！

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script>
var map;
var marker
function initialize()
{
var mapOpt = {
  center:new google.maps.LatLng(20.6588,80.9562),
  zoom:6,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };
map=new google.maps.Map(document.getElementById("googleMap"),mapOpt);

google.maps.event.addListener(map, 'mousemove', function(event) {
        document.getElementById("pp").value = map.getCenter().lat() + "," +map.getCenter().lng();
        });

}
google.maps.event.addDomListener(window, 'load',initialize);
function copyText()
{
var xy=map.getCenter().lat()+ "," +map.getCenter().lng();

document.getElementById("latlng").value=xy;
document.getElementById("Zoom").value=map.getZoom();
}

function copyText1()
{
var xy=map.getCenter().lat()+ "," +map.getCenter().lng();
}

function OfferTwo(){
var mmy = map.getCenter().lng() + "," +map.getCenter().lat();
var sUrl = document.getElementById('offer2').src;
//var Zm= map.getZoom();
var Zm= '8';
document.getElementById('offer2').src = 'http://maps.mapmyindia.com/embed.html#current:'+Zm+','+mmy;
}

</script>
</head>
<body>
<input type= "text" ID=latlng>
<input type="text" ID=Zoom size="5" maxlength="2">
<input type ="text" ID="pp" >
<button onClick="copyText()">Submit</button>
<button onClick="OfferTwo()">Go To MMy</button>
<p Id="mmyurl">MamMyIndia Link</p>

<br><br>
<div id="googleMap"style="width:700px;height:500px;"></div>
<iframe id="offer2" Width="700" Height ="500"></iframe>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:05:06.847

您的脚本仅更改 url 内的哈希值，当您第二次单击按钮时，浏览器将尝试跳转到锚点而不是重新加载地图。

向 QUERY_STRING 添加一个更改参数：

```
document.getElementById('offer2').src
  = 'http://maps.mapmyindia.com/embed.html?'+
     new Date().getTime() +'#current:'+Zm+','+mmy;
```

# c# - Outlook 功能区按钮在 Outlook 插件中未正确显示

> ID：15044398
> 
> 赞同：1
> 
> 时间：2013-02-23T19:05:18.103
> 
> 标签：c#, outlook, outlook-addin

先上代码：

**以编程方式将按钮添加到功能区：**

```
for (int i = 0; i < titles.Length; i++)
{
    RibbonButton button = this.Factory.CreateRibbonButton();
    button.Visible = false;
    button.Label = titles[i];
    button.Image = OutlookAddIn1.Properties.Resources.Sans_titre_5;
    button.ControlSize = Microsoft.Office.Core.RibbonControlSize.RibbonControlSizeLarge;
    this.group1.Items.Add(button);
} 
```

**以编程方式显示/隐藏一些按钮：**

```
private void showOrHide(contact){
    // Building a phone array with the contact infos...
    RibbonButton button = Globals.Ribbons.Ribbon1.ribbonButtons.ElementAt(i).Value;
    button.Visible = button.Enabled = phones[i] != null;
} 
```

**我在我的所有contactItems.open 上绑定了一个事件，它调用了这个方法：**

```
private void Event(ref bool asd)
{
    Outlook.Selection selection = Globals.ThisAddIn.Application.ActiveExplorer().Selection;
    if (selection.OfType<Outlook.ContactItem>().Count() == 1)
    {
        Outlook.ContactItem contact = selection.OfType<Outlook.ContactItem>().FirstOrDefault();
        showOrHide(contact);
    }
} 
```

你能看到吗，我试图在我的功能区中显示/隐藏按钮，具体取决于联系人是否具有某种电话号码类型。

我第一次打开联系人时，功能区按钮会正确显示/隐藏：

![有用](../Images/de0c418b91ba8a1b500f91c503dd302f.png)

但是当我选择另一个联系人（或同一个）时，它会显示我所有的按钮，没有标签图像，即使它们是可见的=假：

![不工作。](../Images/9e5ab980edc70bff0ec2ece2f1e40680.png)

我的猜测是，当我第一次关闭联系窗口时，outlook 会破坏我的功能区按钮。所以当我打开另一个时，功能区按钮都乱七八糟了。有人有想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-02-27T11:04:57.713

使用[此](https://msdn.microsoft.com/en-us/library/aa942955.aspx)方法将功能区控件添加到加载项。它比较可靠。

将 Visual Studio 中的功能区 xml 添加到您的解决方案，然后您可以将控件添加到功能区，如下所示。

```
<tab idMso="TabAddIns">  
    <group id="ContentGroup" label="Content">  
        <button id="textButton" label="Insert Text"  
             screentip="Text" onAction="OnTextButton"  
             supertip="Inserts text at the cursor location."/>  
        <button id="tableButton" label="Insert Table"  
             screentip="Table" onAction="OnTableButton"  
             supertip="Inserts a table at the cursor location."/>  
    </group>  
</tab> 
```

您可以为事件定义回调并在运行时为它们声明标签和其他属性。您可以通过为控件的“getVisible”属性声明回调方法来使功能区控件无效并控制其可见性。

# amazon-cloudfront - Django Compressor - CloudFront 和 manifest.json

> ID：15044399
> 
> 赞同：5
> 
> 时间：2013-02-23T19:05:44.437
> 
> 标签：amazon-cloudfront, django-compressor

我在让 django 压缩器与 CloudFront 一起工作时遇到了一些麻烦。我正在运行离线压缩命令来生成我的压缩文件和 manifest.json 文件。之后，我运行 collectstatic 将压缩文件上传到我的 S3 存储桶。

然后从 CloudFront 提供这些静态文件，因此我的设置如下所示：

```
STATIC_ROOT = ''
STATIC_URL = 'http://<my-cloudfront-domain>/somebucket/'

STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'

COMPRESS_OFFLINE = True 
```

问题是，CloudFront 提供的是旧版本的 manifest.json，这意味着压缩器抛出了 OfflineGenerationError。

即使有缓存后端，我担心如果缓存服务器出于任何原因离线/刷新，我的清单文件将不正确。

我是否在这里遗漏了一些东西以确保我不会遇到 OfflineGenerationError？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:32:32.253

顺便说一下 Amazon CloudFront 的工作方式，您需要通过提供同一文件的“版本”来显式地使文件无效，或者干脆放弃并使用新名称。提前删除看起来代价高昂并且需要付费。

尝试`manifest.json`从 AWS 控制台上传您的文件并为同一文件设置新版本。它会在不删除文件的情况下更新 CloudFront 端点。

来源：[http](http://aws.amazon.com/en/cloudfront/) ://aws.amazon.com/en/cloudfront/ （对象版本控制和缓存失效主题）

# c# - HTML 敏捷包选择具有多个属性的节点

> ID：15044402
> 
> 赞同：6
> 
> 时间：2013-02-23T19:05:51.313
> 
> 标签：c#, html, parsing, html-agility-pack

这可能是一个简单而愚蠢的问题，但在选择具有多个属性的节点时我似乎找不到任何东西。就我而言，它是一个特定的类和特定的样式。

这是我正在使用的 HTML 的一个片段。

```
<div class="buying" style="padding-bottom: 0.75em;">
<span class="availGreen">Blah Blah</span><br /> Blah Blah Blah<b>Sold By</b>.
</div> 
```

“购买”类有许多不同的实例，但只有一个 div 实例同时包含购买类和 style="padding-bottom: 0.75em 属性。我正在尝试抓取标签内的文本。

这是我尝试过的，但我一无所获：

```
SelectSingleNode("//div[@class='buying'][@style='padding-bottom: 0.75em;']/b").InnerText; 
```

并且：

```
SelectSingleNode("//div[@class='buying' @style='padding-bottom: 0.75em;']/b").InnerText; 
```

这些都没有产生任何结果，但我不确定还有什么是正确的。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-23T19:09:20.537

尝试加入它们[`and`](http://www.w3schools.com/xpath/xpath_operators.asp)（我相信这是选择多个属性的正确 XPath 方式）：

```
SelectSingleNode("//div[@class='buying' and @style='padding-bottom: 0.75em;']/b").InnerText; 
```

# outlook - 在 Outlook 中获取定期约会的开始日期

> ID：15044403
> 
> 赞同：0
> 
> 时间：2013-02-23T19:05:59.813
> 
> 标签：outlook, vsto, outlook-addin, outlook-2010

我正在使用 VSTO Outlook 插件，并且在发送项目时需要获取数据。我能够捕获我在此活动中发送的约会。

```
this.Application.ItemSend += this.Application_ItemSend; 
```

我可以得到约会和它的重复模式。

我真正需要的是获取由重复模式创建的每个事件的开始日期时间。有没有更简单的方法可以将每次出现的开始日期时间转换为 DateTime 类型 List ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:37:50.050

为什么需要每次出现的开始日期？没有结束日期的约会怎么办？
Outlook 对象模型仅允许按开始日期 (RecurrencePattern.GetOccurrence) 检索重复，因此您的选择是根据重复属性在代码中显式计算开始日期，或者您可以使用 Redemption - RDORecurrencePattern 允许检索事件按日期（就像 Outlook）或整数索引 - [http://www.dimastr.com/redemption/RDORecurrencePattern.htm](http://www.dimastr.com/redemption/RDORecurrencePattern.htm)。Outlook 约会可以使用 RDOSession.GetRDOObjectFromOutlookObject 或 RDOSession.GetMessageFromID 作为 RDOAppointmentItem 重新打开。

# validation - 如何检查提供的 CSRF 令牌在 Symfony2 中是否无效？

> ID：15044408
> 
> 赞同：11
> 
> 时间：2013-02-23T19:06:17.457
> 
> 标签：validation, symfony, csrf, symfony-forms

我创建了一个 Symfony2 表单并将其绑定到请求。在继续处理表格的其余部分之前，我需要明确确保 CSRF 令牌是否有效/无效。

`$form['_token']->isValid()`抛出`OutOfBoundsException`消息“子 _token 不存在”。

我仍然可以验证呈现的表单是否包含`_token`字段。如果 CSRF 值无效，则`$form->isValid()`返回 false。

我在这里想念什么？

* * *

更新1：

控制器（部分）：

```
private function buildTestForm() {
    $form = $this->createFormBuilder()
            ->add('name','text')
            ->getForm();
    return $form;
}

/**
 * @Route("/test/show_form", name="test.form.show")
 * @Method("GET")
 */
public function showFormTest()
{
    $form = $this->buildTestForm();
    return $this->render('TestBundle::form_test.html.twig', array('form' => $form->createView()));
}

/**
 * @Route("/test/submit_form", name="test.form.submit")
 * @Method("POST")
 */
public function formTest()
{
    $form = $this->buildTestForm();
    $form->bind($this->getRequest());
    if ($form['_token']->isValid()) {
        return new Response('_token is valid');
    } else {
        return new Response('_token is invalid');
    }
} 
```

模板

```
{# Twig template #}
<form action="{{ path('test.form.submit') }}" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}
    <input type="submit" name="go" value="Test Form" />
</form> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-28T10:03:04.890

除了artworkad，您还可以指定意图：

枝条：

```
<form method="post">
    <input type="text" name="form_name[field]" value="" />
    <input type="hidden" name="_csrf_token" value="{{ csrf_token('form_name') }}">
</form> 
```

PHP：

```
$token = $request->request->get('_csrf_token');
$csrf_token = new CsrfToken('form_name', $token);
var_dump($this->get('security.csrf.token_manager')->isTokenValid($csrf_token)); 
```

* * *

或不：

枝条：

```
<form method="post">
    <input type="text" name="field" value="" />
    <input type="hidden" name="_csrf_token" value="{{ csrf_token('') }}">
</form> 
```

PHP：

```
$token = $request->request->get('_csrf_token');
$csrf_token = new CsrfToken('', $token);
var_dump($this->get('security.csrf.token_manager')->isTokenValid($csrf_token)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-24T10:49:28.923

没有记录的手动检查 csrf 令牌的方法。Symfony 自动验证这个令牌的存在和准确性。[http://symfony.com/doc/current/book/forms.html#csrf-protection](http://symfony.com/doc/current/book/forms.html#csrf-protection)

但是有一个 csrf 提供程序：

[http://api.symfony.com/2.0/Symfony/Component/Form/Extension/Csrf/CsrfProvider/SessionCsrfProvider.html](http://api.symfony.com/2.0/Symfony/Component/Form/Extension/Csrf/CsrfProvider/SessionCsrfProvider.html)

和

[http://api.symfony.com/master/Symfony/Component/Form/Extension/Csrf/CsrfProvider/DefaultCsrfProvider.html](http://api.symfony.com/master/Symfony/Component/Form/Extension/Csrf/CsrfProvider/DefaultCsrfProvider.html)

> 标记能够提供 CSRF 保护的类 您可以使用方法 generateCsrfToken() 生成 CSRF 令牌。对于此方法，您应该传递一个对页面唯一的值，该值应该受到保护以免受 CSRF 攻击。这个值不一定是秘密的。这个接口的实现负责添加更多的秘密信息。
> 
> 如果你想保护表单提交免受 CSRF 攻击，你可以提供一个“意图”字符串。这样可以确保表单只能绑定到旨在处理表单的页面，即使用相同的意图字符串通过 isCsrfTokenValid() 验证 CSRF 令牌。

您可以像这样检索提供者

```
$csrf = $this->get('form.csrf_provider'); 
```

然后可以使用

```
public Boolean isCsrfTokenValid(string $intention, string $token)

Validates a CSRF token. 
```

> 参数 string $intention 生成 CSRF 令牌时使用的意图 字符串 $token 浏览器提供的令牌
> 
> 返回值 Boolean 浏览器提供的令牌是否正确

您需要找出表单使用的意图字符串。

SO上的一些有趣的帖子：

[Symfony CSRF 和 Ajax](https://stackoverflow.com/questions/12054449/symfony-csrf-and-ajax)

[Symfony2 与 CSRF 令牌链接](https://stackoverflow.com/questions/11972318/symfony2-links-with-csrf-token)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-14T12:49:06.057

另一种方法（如果您更喜欢 DI）在控制器之外（例如在侦听器中）验证令牌：

```
/** @var Symfony\Component\Security\Csrf\CsrfTokenManagerInterface */
private $csrfTokenManager;

public function __construct(CsrfTokenManagerInterface $csrfTokenManager) 
{
    $this->csrfTokenManager = $csrfTokenManager;
}

public function isValid(): bool
{
    return $this->csrfTokenManager->isTokenValid(
            new CsrfToken('authenticate', $request->getRequest()->headers->get('X-CSRF-TOKEN'))
        );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:21:03.700

我不确定这一点，但您是否在未映射的字段上尝试过验证器：

```
$violations = $this->get('validator')->validatePropertyValue($entity, '_token', $form['_token']);
if (count($violations)) {
    // the property value is not valid
} 
```

# iis-7 - iis7 url重写友好的url

> ID：15044412
> 
> 赞同：2
> 
> 时间：2013-02-23T19:06:29.503
> 
> 标签：iis-7, url-rewriting, web-config, rewrite, friendly-url

我正在尝试对我网站的管理部分中的动态页面进行 url 重写，但是当我上传 web.congif 文件时没有任何变化。

另外，我希望 web.config 文件位于 admin 目录而不是根目录中。

任何帮助将不胜感激。

当前地址看起来像 www.site.com/admin/mypage.php?id=5&name=$name

希望它看起来像 www.site.com/admin/mypage/5/Jack

下面是我正在使用的代码，但没有任何变化？请帮忙？！

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
  <rewrite>
    <rules>
      <rule name="Rewrite to mypage.php" stopProcessing="true">
        <match url="^mypage/([0-9]+)/([_0-9a-z-]+)/?$" />
        <action type="Rewrite" url="mypage.php?id={R:1}&amp;name={R:2}" />
      </rule>
    </rules>
  </rewrite>
</system.webServer>
</configuration> 
```

# php - 如何在 PHP 上制作被点覆盖的背景图像？

> ID：15044415
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:06:44.437
> 
> 标签：php

我想制作带有点的背景图像。抱歉，我无法解释。我对附加图像没有足够的声誉。请访问：<< [hisset.in](http://www.hisset.in) >> 并观看背景图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:11:20.123

这是一个 HTML 和 CSS 问题。

使用两个 div，一个用于背景，另一个用于点图层。

```
.background {
  heigth: 100%;
  width: 100%;
  background: url('path/to/my/background.png');
}

.dots {
  heigth: 100%;
  width: 100%;
  background: url('path/to/my/dotslayer.png') repeat; //repeat the image all over the div
} 
```

并将此图像用作“dotslayer”（或其他类似图像）：[http ://www.hisset.in/images/dark/backgroundOverlay.png](http://www.hisset.in/images/dark/backgroundOverlay.png)

# java - Android 日志类

> ID：15044417
> 
> 赞同：1
> 
> 时间：2013-02-23T19:06:45.680
> 
> 标签：java, android

这对每个人来说可能都很明显，因为我还没有看到关于它的线程，但我想知道控制台中所有 Log 方法（Log.e、Log.d 等）的输出在哪里？ LogCat？一些日志文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:07:24.357

类`Log`记录到 LogCat。

# c# - HTMLAgilityPack 和封送点击信号

> ID：15044419
> 
> 赞同：1
> 
> 时间：2013-02-23T19:07:04.407
> 
> 标签：c#, linq, parsing, html-agility-pack

我正在尝试抓取一个 html 文档。

```
 HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
    htmlDoc.OptionFixNestedTags=true;

    htmlDoc.Load(@"C:\..\page.html");

    var hptexts = htmlDoc.DocumentNode.Descendants("a");

    foreach (var hptext in hptexts)
    {
        string desc = hptext.Attributes["href"].Value;
        Console.WriteLine(desc);
    } 
```

这是我使用的代码，打印页面的 5-6 个第一个链接，然后显示“元帅点击信号”，我在这里缺少什么？

**编辑 02/27/13** 这是使爬行停止的 html 代码

```
</a> </li> </ul> <span class="login-area"> <div id="p_p_id_bonLoginPortlet_WAR_bonportlet_" class="portlet-boundary portlet-boundary_bonLoginPortlet_WAR_bonportlet_  portlet-static portlet-static-end  " > <a id="p_bonLoginPortlet_WAR_bonportlet"></a> <div class="portlet-borderless-container" style=""> <div class="portlet-body"> <!--p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/--><div id="A4925:j_idt5" style="display:none" title="text"><img id="A4925:j_idt6" src="/bon-portlet/images/ajaxloadingbar.gif" alt="" /></div><script type="text/javascript">/*<![CDATA[*/$(function(){statusDialog=new PrimeFaces.widget.Dialog("A4925:j_idt5",{autoOpen:false,minHeight:0,draggable:false,zIndex:9999,resizable:false,appendToBody:true,closable:false})});/*]]>*/</script><div id="A4925:j_idt7" style="display:none" title="text"> <form id="A4925:frmSendPassword" name="A4925:frmSendPassword" method="post" action="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_auth=giN14rWX&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=1&amp;p_p_mode=view&amp;p_p_state=normal" enctype="application/x-www-form-urlencoded"> <input type="hidden" name="A4925:frmSendPassword" value="A4925:frmSendPassword" /> <input type="hidden" name="javax.faces.encodedURL" value="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=2&amp;p_p_mode=view&amp;p_p_state=normal" /> <span id="A4925:myPanel2"> <p>text</p><table class="forgot"> <tbody> <tr> <td> <div></td> </tr> <tr> <td><div id="A4925:j_idt14" class="ui-messages ui-widget"></div></td> </tr> <tr> <td></div> <div> </div></td> </tr> <tr> <td> <div><label for="A4925:txtEmail2" class=""> Email</label><input id="A4925:txtEmail2" type="text" name="A4925:txtEmail2" maxlength="40" size="40" /> </div> <div><div id="A4925:msgFortxtEmail2"></div> </div></td> </tr> </tbody> </table> <div class="sendButton"><button id="A4925:j_idt24" name="A4925:j_idt24" onclick="PrimeFaces.ab({formId:'A4925:frmSendPassword',source:'A4925:j_idt24',process:'A4925:myPanel2',update:'A4925:myPanel2'});return false;" type="submit">text</button><script type="text/javascript">/*<![CDATA[*/widget_A4925_j_idt24=new PrimeFaces.widget.CommandButton("A4925:j_idt24",{});/*]]>*/</script> </div></span><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="H4sIAAAAAAAAAFvzloG1oLiIQTArsSxRr7QkM0fPI7E4wzexgJX91sHDYgkXmRmY3Bi4cvITU9wSk0vyizwZOEsyilKLM/JzUioK7B0YQICnnANICgAxSwkDv6OJpZGpVUlFiWtuYmaOUWkRg3C0D9iCnMS8dD3/pKzU5BLrCeci5gsUa+YwMTBUFIB0FgBBCQMrWHdpIUMdAzNQlAnOYgXJw3nMdUUMuiAzK/TSEpNTi/WS83ML8vNS80r0Qj3DMlPLg/LzS1QCivILUotKKr1TK4sZoEAIaF8RAx/CPa55pbnIkkBHsOUkFpd4psADBqzOM68kNT21SOjRgiXfG9stmBgYPRlYyxJzSlOB5gkg1PmV5ialFrWtmSrLPeVBN8x7XCDP8cKDJiCxuBjuGajX+VADDlW6AgDM3QSPqwEAAA==" autocomplete="off" /> </form></div><script type="text/javascript">/*<![CDATA[*/$(function(){loginDialog=new PrimeFaces.widget.Dialog("A4925:j_idt7",{autoOpen:false,minHeight:0,dialogClass:"modal",modal:true,zIndex:9900,resizable:false,appendToBody:true})});/*]]>*/</script> <script></script> <script>/*<![CDATA[*/PlayerClub.userName="";PlayerClub.token="";/*]]>*/</script> <form id="A4925:frmBonLogin" name="A4925:frmBonLogin" method="post" action="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_auth=giN14rWX&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=1&amp;p_p_mode=view&amp;p_p_state=normal" class="login" enctype="application/x-www-form-urlencoded"> <input type="hidden" name="A4925:frmBonLogin" value="A4925:frmBonLogin" /> <input type="hidden" name="javax.faces.encodedURL" value="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=2&amp;p_p_mode=view&amp;p_p_state=normal" /> <script type="text/javascript">/*<![CDATA[*/refreshLogin=function(){PrimeFaces.ab({formId:"A4925:frmBonLogin",source:"A4925:j_idt27",process:"@all",update:"A4925:pnlLogin",params:arguments[0]})};/*]]>*/</script><span id="A4925:pageMessages"></span><script type="text/javascript">/*<![CDATA[*/$(function(){widget_A4925_pageMessages=new PrimeFaces.widget.Growl("A4925:pageMessages",[])});/*]]>*/</script><span id="A4925:pnlNotLoggedIn"><table> <tbody> <tr> <td><input id="A4925:txtEmail" type="text" name="A4925:txtEmail" /></td> <td><input id="A4925:txtPass" type="password" name="A4925:txtPass" /></td> <td><button id="A4925:j_idt29" name="A4925:j_idt29" class="loginBtn" onclick="PrimeFaces.ab({formId:'A4925:frmBonLogin',source:'A4925:j_idt29',process:'A4925:pnlNotLoggedIn',update:'A4925:pnlLogin A4925:pnlNotLoggedIn A4925:pageMessages',oncomplete:function(xhr, status, args){if(args.redirect != null) {                     PlayerClub.Events.notify({name : 'loggedIn'});                    }              ;}});return false;" type="submit">text</button><script type="text/javascript">/*<![CDATA[*/widget_A4925_j_idt29=new PrimeFaces.widget.CommandButton("A4925:j_idt29",{});/*]]>*/</script></td> <td> <a class="forgotpwd" onclick="loginDialog.show()">text</a></td> <td>Β Β </td> </tr> </tbody> </table> </span><span id="A4925:pnlLogin"></span><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="H4sIAAAAAAAAAFvzloG1oLiIQTArsSxRr7QkM0fPI7E4wzexgJX91sHDYgkXmRmY3Bi4cvITU9wSk0vyizwZOEsyilKLM/JzUioK7B0YQICnnANICgAxSwkDv6OJpZGpVUlFiWtuYmaOUWkRg3C0D9iCnMS8dD3/pKzU5BLrCeci5gsUa+YwMTBUFIB0FgBBCQMrWHdpIUMdAzNQlAnOYgXJw3nMdUUMuiAzK/TSEpNTi/WS83ML8vNS80r0Qj3DMlPLg/LzS1QCivILUotKKr1TK4sZoEAIaF8RAx/CPa55pbnIkkBHsOUkFpd4psADBqzOM68kNT21SOjRgiXfG9stmBgYPRlYyxJzSlOB5gkg1PmV5ialFrWtmSrLPeVBN8x7XCDP8cKDJiCxuBjuGajX+VADDlW6AgDM3QSPqwEAAA==" autocomplete="off" /> </form> <script>/*<![CDATA[*/jQuery(document).ready(function(){if(false){refreshLogin()}});var myLoginListener=new PlayerClub.EventListener("loginListener");myLoginListener.onEvent=function(a){if(a.name=="loggedIn"){}else{if(a.name=="loggedOut"){refreshLogin()}}};PlayerClub.Events.add(myLoginListener);/*]]>*/</script> </div> </div> </div> </span> </div> </div> </div> <div id="wrapper-header"> <header id="banner" role="banner"> <hgroup id="heading"> <h1 class="company-title"> <a class="logo" href="http://www.website.com/el/web/guest/corporate" title="text website.com"></a> <div id="header_right" style="float:right;"> <div id="BannerWebContent"> <div id="p_p_id_56_INSTANCE_w9W4_" class="portlet-boundary portlet-boundary_56_  portlet-static portlet-static-end portlet-journal-content " > <a id="p_56_INSTANCE_w9W4"></a> <div class="portlet-borderless-container" style=""> <div class="portlet-body"> <div class="journal-content-article" id="article_10132_10157_1794409_12.1"> <p style="text-align: right;"> <a href="http://www.youtube.com&amp;list=PLMiMYkQZ3itCvQgnTqD9sNyqKaBsNZOM6&amp;index=1" style="line-height: 1.4;" target="_blank"><img alt="text" src="/image/image_gallery?uuid=666cec6b-27b5-483a-9737-f760ddbca822&amp;groupId=10157&amp;t=1361443806379" style="width: 120px; height: 60px;" /></a><a href="http://www.youtube.com&amp;list=PLMiMYkQZ3itD0C6mk7FhFtyzGJ7lxSkFz" target="_blank"><img alt="text" src="/image/image_gallery?uuid=44e791df-7011-406e-ab58-04caa1d3b904&amp;groupId=10157&amp;t=1361373259040" style="width: 120px; height: 60px;" /></a><a href="http://www.youtube.com&amp;list=PLMiMYkQZ3itD0C6mk7FhFtyzGJ7lxSkFz&amp;index=1" target="_blank"><img alt="text" src="/image/image_gallery?uuid=edf1a342-48e3-4785-b845-4e3adae50c36&amp;groupId=10157&amp;t=1361282247908" style="width: 75px; height: 60px;" /></a><a href="http://www.youtube.com/&amp;list=PLMiMYkQZ3itBR11d2SBq52tBgIScoPIAd&amp;index=1" target="_blank"><img alt="text" src="/image/image_gallery?uuid=cd7445f3-3c3e-40aa-82f8-8101dea42892&amp;groupId=10157&amp;t=1361282247908" style="width: 60px; height: 60px;" /></a><a href="http://www.youtube.com" target="_blank"><img alt="" src="/image/image_gallery?uuid=35289fbe-9586-4fcf-841f-b7422ace31df&amp;groupId=10157&amp;t=1359117469851" style="width: 60px; height: 60px;" /></a><a href="http://www.facebook.com" target="_blank"><img alt="" src="/image/image_gallery?uuid=b8457859-354f-4a70-b03b-895e0d836f8c&amp;groupId=10157&amp;t=1359117469851" style="width: 60px; height: 60px;" /></a><a href="link" target=""><img alt="RSS" src="/image/image_gallery?uuid=56cc6300-0322-4845-bf88-0f6540b815ef&amp;groupId=10157&amp;t=1361282247893" style="width: 60px; height: 60px;" /></a><a href="link"><img alt="text" src="/image/image_gallery?uuid=33b4f346-1490-48d0-86d9-719bd7b059fb&amp;groupId=10157&amp;t=1361459169242" style="width: 60px; height: 60px;" /></a></p> </div> </div> </div> </div> </div> </div> </h1> <h2 class="community-title"> <a href="http://www.website.com/web/guest/test-draw-results?p_auth=giN14rWX&amp;p_p_auth=0xCQE4av&amp;p_p_id=49&amp;p_p_lifecycle=1&amp;p_p_state=normal&amp;p_p_mode=view&amp;p_p_col_count=1&amp;_49_struts_action=%2fmy_places%2fview&amp;_49_groupId=10157&amp;_49_privateLayout=false" title="text website.com"> <span>website.com</span> </a> </h2> <h3 class="page-title"> <span>text‚ &amp; text</span> </h3> </hgroup> <div id="navigation"> <div class="navigation-main-content"> <ul> <li class=""> <a href="link"  class="home"> <div><span>+</span></div> </a> </li> <li class="menu-seperator"><div></div></li> <li class="selected "> <a href="link" > text</a></a> </li> </ul> <span class="login-area"> <div id="p_p_id_bonLoginPortlet_WAR_bonportlet_" class="portlet-boundary portlet-boundary_bonLoginPortlet_WAR_bonportlet_  portlet-static portlet-static-end  " > <a id="p_bonLoginPortlet_WAR_bonportlet"></a> <div class="portlet-borderless-container" style=""> <div class="portlet-body"> <!--p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/--><div id="A4925:j_idt5" style="display:none" title="text"><img id="A4925:j_idt6" src="/bon-portlet/images/ajaxloadingbar.gif" alt="" /></div><script type="text/javascript">/*<![CDATA[*/$(function(){statusDialog=new PrimeFaces.widget.Dialog("A4925:j_idt5",{autoOpen:false,minHeight:0,draggable:false,zIndex:9999,resizable:false,appendToBody:true,closable:false})});/*]]>*/</script><div id="A4925:j_idt7" style="display:none" title="text"> <form id="A4925:frmSendPassword" name="A4925:frmSendPassword" method="post" action="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_auth=giN14rWX&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=1&amp;p_p_mode=view&amp;p_p_state=normal" enctype="application/x-www-form-urlencoded"> <input type="hidden" name="A4925:frmSendPassword" value="A4925:frmSendPassword" /> <input type="hidden" name="javax.faces.encodedURL" value="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=2&amp;p_p_mode=view&amp;p_p_state=normal" /> <span id="A4925:myPanel2"> <p>text</p><table class="forgot"> <tbody> <tr> <td> <div></td> </tr> <tr> <td><div id="A4925:j_idt14" class="ui-messages ui-widget"></div></td> </tr> <tr> <td></div> <div> </div></td> </tr> <tr> <td> <div><label for="A4925:txtEmail2" class=""> Email</label><input id="A4925:txtEmail2" type="text" name="A4925:txtEmail2" maxlength="40" size="40" /> </div> <div><div id="A4925:msgFortxtEmail2"></div> </div></td> </tr> </tbody> </table> <div class="sendButton"><button id="A4925:j_idt24" name="A4925:j_idt24" onclick="PrimeFaces.ab({formId:'A4925:frmSendPassword',source:'A4925:j_idt24',process:'A4925:myPanel2',update:'A4925:myPanel2'});return false;" type="submit">text</button><script type="text/javascript">/*<![CDATA[*/widget_A4925_j_idt24=new PrimeFaces.widget.CommandButton("A4925:j_idt24",{});/*]]>*/</script> </div></span><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="H4sIAAAAAAAAAFvzloG1oLiIQTArsSxRr7QkM0fPI7E4wzexgJX91sHDYgkXmRmY3Bi4cvITU9wSk0vyizwZOEsyilKLM/JzUioK7B0YQICnnANICgAxSwkDv6OJpZGpVUlFiWtuYmaOUWkRg3C0D9iCnMS8dD3/pKzU5BLrCeci5gsUa+YwMTBUFIB0FgBBCQMrWHdpIUMdAzNQlAnOYgXJw3nMdUUMuiAzK/TSEpNTi/WS83ML8vNS80r0Qj3DMlPLg/LzS1QCivILUotKKr1TK4sZoEAIaF8RAx/CPa55pbnIkkBHsOUkFpd4psADBqzOM68kNT21SOjRgiXfG9stmBgYPRlYyxJzSlOB5gkg1PmV5ialFrWtmSrLPeVBN8x7XCDP8cKDJiCxuBjuGajX+VADDlW6AgDM3QSPqwEAAA==" autocomplete="off" /> </form></div><script type="text/javascript">/*<![CDATA[*/$(function(){loginDialog=new PrimeFaces.widget.Dialog("A4925:j_idt7",{autoOpen:false,minHeight:0,dialogClass:"modal",modal:true,zIndex:9900,resizable:false,appendToBody:true})});/*]]>*/</script> <script></script> <script>/*<![CDATA[*/PlayerClub.userName="";PlayerClub.token="";/*]]>*/</script> <form id="A4925:frmBonLogin" name="A4925:frmBonLogin" method="post" action="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_auth=giN14rWX&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=1&amp;p_p_mode=view&amp;p_p_state=normal" class="login" enctype="application/x-www-form-urlencoded"> <input type="hidden" name="A4925:frmBonLogin" value="A4925:frmBonLogin" /> <input type="hidden" name="javax.faces.encodedURL" value="http://www.website.com/web/guest/test-draw-results?_bonLoginPortlet_WAR_bonportlet__facesViewId=%2fxhtml%2flogin.xhtml&amp;p_p_col_id=&amp;p_p_id=bonLoginPortlet_WAR_bonportlet&amp;p_p_lifecycle=2&amp;p_p_mode=view&amp;p_p_state=normal" /> <script type="text/javascript">/*<![CDATA[*/refreshLogin=function(){PrimeFaces.ab({formId:"A4925:frmBonLogin",source:"A4925:j_idt27",process:"@all",update:"A4925:pnlLogin",params:arguments[0]})};/*]]>*/</script><span id="A4925:pageMessages"></span><script type="text/javascript">/*<![CDATA[*/$(function(){widget_A4925_pageMessages=new PrimeFaces.widget.Growl("A4925:pageMessages",[])});/*]]>*/</script><span id="A4925:pnlNotLoggedIn"><table> <tbody> <tr> <td><input id="A4925:txtEmail" type="text" name="A4925:txtEmail" /></td> <td><input id="A4925:txtPass" type="password" name="A4925:txtPass" /></td> <td><button id="A4925:j_idt29" name="A4925:j_idt29" class="loginBtn" onclick="PrimeFaces.ab({formId:'A4925:frmBonLogin',source:'A4925:j_idt29',process:'A4925:pnlNotLoggedIn',update:'A4925:pnlLogin A4925:pnlNotLoggedIn A4925:pageMessages',oncomplete:function(xhr, status, args){if(args.redirect != null) {                     PlayerClub.Events.notify({name : 'loggedIn'});                    }              ;}});return false;" type="submit">text</button><script type="text/javascript">/*<![CDATA[*/widget_A4925_j_idt29=new PrimeFaces.widget.CommandButton("A4925:j_idt29",{});/*]]>*/</script></td> <td> <a class="forgotpwd" onclick="loginDialog.show()">text</a></td> <td>Β Β </td> </tr> </tbody> </table> </span><span id="A4925:pnlLogin"></span><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="H4sIAAAAAAAAAFvzloG1oLiIQTArsSxRr7QkM0fPI7E4wzexgJX91sHDYgkXmRmY3Bi4cvITU9wSk0vyizwZOEsyilKLM/JzUioK7B0YQICnnANICgAxSwkDv6OJpZGpVUlFiWtuYmaOUWkRg3C0D9iCnMS8dD3/pKzU5BLrCeci5gsUa+YwMTBUFIB0FgBBCQMrWHdpIUMdAzNQlAnOYgXJw3nMdUUMuiAzK/TSEpNTi/WS83ML8vNS80r0Qj3DMlPLg/LzS1QCivILUotKKr1TK4sZoEAIaF8RAx/CPa55pbnIkkBHsOUkFpd4psADBqzOM68kNT21SOjRgiXfG9stmBgYPRlYyxJzSlOB5gkg1PmV5ialFrWtmSrLPeVBN8x7XCDP8cKDJiCxuBjuGajX+VADDlW6AgDM3QSPqwEAAA==" autocomplete="off" /> </form> <script>/*<![CDATA[*/jQuery(document).ready(function(){if(false){refreshLogin()}});var myLoginListener=new PlayerClub.EventListener("loginListener");myLoginListener.onEvent=function(a){if(a.name=="loggedIn"){}else{if(a.name=="loggedOut"){refreshLogin()}}};PlayerClub.Events.add(myLoginListener);/*]]>*/</script> </div> </div> </div> </span> </div> </div> </div> <div id="wrapper-header"> <header id="banner" role="banner"> <hgroup id="heading"> <h1 class="company-title"> <a class="logo" href="http://www.website.com/el/web/guest/corporate" title="text website.com"></a> <div id="header_right" style="float:right;"> <div id="BannerWebContent"> <div id="p_p_id_56_INSTANCE_w9W4_" class="portlet-boundary portlet-boundary_56_  portlet-static portlet-static-end portlet-journal-content " > <a id="p_56_INSTANCE_w9W4"></a> <div class="portlet-borderless-container" style=""> <div class="portlet-body"> <div class="journal-content-article" id="article_10132_10157_1794409_12.1"> <p style="text-align: right;"> <a href="http://www.youtube.com&amp;list=PLMiMYkQZ3itCvQgnTqD9sNyqKaBsNZOM6&amp;index=1" style="line-height: 1.4;" target="_blank"><img alt="text" src="/image/image_gallery?uuid=666cec6b-27b5-483a-9737-f760ddbca822&amp;groupId=10157&amp;t=1361443806379" style="width: 120px; height: 60px;" /></a><a href="http://www.youtube.com&amp;list=PLMiMYkQZ3itD0C6mk7FhFtyzGJ7lxSkFz" target="_blank"><img alt="text" src="/image/image_gallery?uuid=44e791df-7011-406e-ab58-04caa1d3b904&amp;groupId=10157&amp;t=1361373259040" style="width: 120px; height: 60px;" /></a><a href="http://www.youtube.com&amp;list=PLMiMYkQZ3itD0C6mk7FhFtyzGJ7lxSkFz&amp;index=1" target="_blank"><img alt="text" src="/image/image_gallery?uuid=edf1a342-48e3-4785-b845-4e3adae50c36&amp;groupId=10157&amp;t=1361282247908" style="width: 75px; height: 60px;" /></a><a href="http://www.youtube.com/&amp;list=PLMiMYkQZ3itBR11d2SBq52tBgIScoPIAd&amp;index=1" target="_blank"><img alt="text" src="/image/image_gallery?uuid=cd7445f3-3c3e-40aa-82f8-8101dea42892&amp;groupId=10157&amp;t=1361282247908" style="width: 60px; height: 60px;" /></a><a href="http://www.youtube.com" target="_blank"><img alt="" src="/image/image_gallery?uuid=35289fbe-9586-4fcf-841f-b7422ace31df&amp;groupId=10157&amp;t=1359117469851" style="width: 60px; height: 60px;" /></a><a href="http://www.facebook.com" target="_blank"><img alt="" src="/image/image_gallery?uuid=b8457859-354f-4a70-b03b-895e0d836f8c&amp;groupId=10157&amp;t=1359117469851" style="width: 60px; height: 60px;" /></a><a href="link" target=""><img alt="RSS" src="/image/image_gallery?uuid=56cc6300-0322-4845-bf88-0f6540b815ef&amp;groupId=10157&amp;t=1361282247893" style="width: 60px; height: 60px;" /></a><a href="link"><img alt="text" src="/image/image_gallery?uuid=33b4f346-1490-48d0-86d9-719bd7b059fb&amp;groupId=10157&amp;t=1361459169242" style="width: 60px; height: 60px;" /></a></p> </div> </div> </div> </div> </div> </div> </h1> <h2 class="community-title"> <a href="http://www.website.com/web/guest/test-draw-results?p_auth=giN14rWX&amp;p_p_auth=0xCQE4av&amp;p_p_id=49&amp;p_p_lifecycle=1&amp;p_p_state=normal&amp;p_p_mode=view&amp;p_p_col_count=1&amp;_49_struts_action=%2fmy_places%2fview&amp;_49_groupId=10157&amp;_49_privateLayout=false" title="text website.com"> <span>website.com</span> </a> </h2> <h3 class="page-title"> <span>text‚ &amp; text</span> </h3> </hgroup> <div id="navigation"> <div class="navigation-main-content"> <ul> <li class=""> <a href="link"  class="home"> <div><span>+</span></div> </a> </li> <li class="menu-seperator"><div></div></li> <li class="selected "> <a href="link" > text</a> 
```

在此之前，它会正确打印所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:59:30.593

```
HtmlDocument doc= new HtmlDocument();

doc.Load(@"C:\..\page.html");

HtmlNodeCollection nodes = doc.DocumentNode.SelectNodes("//a");

foreach (HtmlNode node in nodes)
{
    if(node.OuterHtml.Contains("href"))
        Console.WriteLine(node.Attributes["href"].Value);
} 
```

编辑：我编辑了我的代码，现在它可以工作了。您的问题是某些**a**标签没有**href**属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:56:41.910

### 试试这个代码：

```
HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();
htmlDoc.OptionFixNestedTags = true;

htmlDoc.Load(@"C:\..\page.html");

HtmlNodeCollection nodes = htmlDoc.DocumentNode.SelectNodes("//a[@href]").Where(t => t.Attributes["href"].Value.StartsWith("#"));
// u can remove LINQ extension method Where() if u want to include # links too

foreach (HtmlNode hptext in nodes)
{
    string desc = hptext.Attributes["href"].Value;
    Console.WriteLine(desc);
} 
```

# ruby-on-rails - 为什么块中定义的 CanCan 总是返回 true？

> ID：15044420
> 
> 赞同：0
> 
> 时间：2013-02-23T19:07:06.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我正在尝试使用 CanCan 在块中定义能力。在ability.rb 我的权限定义为：

```
can [:create, :show], Comment do |comment|
  if !group.nil?
      is_a_group_member(current_user_group_member) == true
  elsif user.admin?
    is_a_user_admin(current_user)
  end
end 
```

无论如何，这总是返回 true。但是，如果我将能力写在一行中：

```
can [:create, :show], Comment if (!group.nil? && is_a_group_member(current_user_group_member) == true) || (user.admin? && is_a_user_admin(current_user)) 
```

当ability.rb 权限使用一行时，它按预期工作。当我使用一个块时，它总是返回 true。关于为什么这会破坏的任何想法或想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:24:27.257

`if`...`else`部分是一个表达式，如果条件为假，则计算结果为，`nil`或者，如果条件为真，则计算条件代码的结果。

在您的情况下，在 multiline`if`中，如果`!group.nil?`为真，`is_a_group_member(current_user_group_member) == true`则返回。如果`user.admin?`为真，`is_a_user_admin(current_user)`则返回。因此，如果其中任何一个为真，`true`则将被返回。

# c# - Azure 1.4 MVC3 会话状态和缓存

> ID：15044421
> 
> 赞同：2
> 
> 时间：2013-02-23T19:07:12.017
> 
> 标签：c#, asp.net-mvc-3, session, azure, session-state

在多个实例上运行时，我无法使用 Azure 缓存实现会话状态。这是我在学习各种教程时所做的：

1 - 设置缓存：我在旧的 azure 管理门户中添加了缓存服务，但在新门户中找不到缓存选项

2 - 更新 web.config 以包括以下内容：

```
<configSections>
  <section name="dataCacheClients"
           type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core"
           allowLocation="true"
           allowDefinition="Everywhere" />
</configSections>

<dataCacheClients>
  <dataCacheClient name="default">
    <hosts>
      <host name="superSecretName.cache.windows.net" cachePort="22233" />
    </hosts>
    <securityProperties mode="Message">
      <messageSecurity authorizationInfo="superSecretAuthToken"></messageSecurity>
    </securityProperties>
  </dataCacheClient>
</dataCacheClients>

<system.web>
  <sessionState mode="Custom" customProvider="AppFabricCacheSessionStoreProvider">
    <providers>
      <add name="AppFabricCacheSessionStoreProvider"
           type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache"
           cacheName="default"
           useBlobMode="true" 
           dataCacheClientName="default" />
    </providers>
  </sessionState>
</system.web> 
```

3 - 跳一支快乐的舞蹈，直到一切都崩溃和燃烧......

从我在教程和示例中阅读的内容来看，这应该足以`Session`像往常一样使用 in 代码，并让它在后台使用缓存。但是，似乎出现了随机的站点崩溃，我已将其归结为会话未填充。尝试访问已放入会话中的数据时，我遇到了空引用异常。我能想到的唯一解释是切换了天蓝色实例，并且缓存并没有真正分布在实例之间（我不过可能是错的）。

我也尝试过不使用会话，而是使用自定义 cookie，然后将内容保存在缓存中并使用 cookie 值从缓存中检索数据，但同样的事情正在发生，所以我猜它不是会话，但底层缓存正在中断。

如标题中所述，Azure 版本是 1.4。我使用的示例很可能是针对较新版本的。由于许多其他库可能会损坏，因此无法切换到较新版本的 Azure。

# c# - 在 C# 中更改 XML 片段的字符编码

> ID：15044422
> 
> 赞同：0
> 
> 时间：2013-02-23T19:07:14.037
> 
> 标签：c#, xml, character-encoding, xmlreader

我编写了以下内容以从磁盘读取 XML 片段：

```
string fileName = @"C:\test.txt";
XmlReaderSettings settings = new XmlReaderSettings();
settings.ConformanceLevel = ConformanceLevel.Fragment;
using (XmlReader reader = XmlReader.Create(fileName, settings))
{
    while (reader.Read())
    { DoSomething(); }
} 
```

但是在读取 Ö、& 等特殊字符时它会失败。我想这是字符编码的问题。我看到我可以执行 XmlReader.Create(fileName, fileEndoding) 之类的操作。但是，如何将它与 XMLFragment 的设置结合起来？我的字符编码是 ISO8859-1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:10:51.113

试试这个： new StreamReader(fileName, Encoding.GetEncoding("ISO-8859-1"))

# azure - 发布到 Azure 时未选择重命名的 App_Code 剃须刀助手

> ID：15044426
> 
> 赞同：0
> 
> 时间：2013-02-23T19:07:27.260
> 
> 标签：azure

我在 Azure 上有一个站点，它一直在使用位于 App_Code 文件夹中的 cshtml razor 助手类。到目前为止，它一直运行良好。

我更改了文件名并通过VS2010发布过程再次发布，现在Azure仍在查看旧文件。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:36:55.853

您在使用云服务或网站吗？如果您使用的是网站，则需要确保在发布后重新启动网站（网站仪表板页面页脚中的重新启动按钮），以确保 Azure 获取更改。云服务可能有类似的机制，但我很长时间没有使用它们，所以我不能确定。

# c# - 忽略部分语句

> ID：15044429
> 
> 赞同：3
> 
> 时间：2013-02-23T19:07:41.240
> 
> 标签：c#, .net, sql, sql-server

我的应用程序中执行了许多 SQL 语句，如下所示：

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
   connection.Open();

   using (SqlDataAdapter adapter = new SqlDataAdapter(statement, connection))
   {
      adapter.Fill(dtResults);
   }
} 
```

每个语句都可以有一个`AS`子句，例如：`SELECT id AS 'Customer ID' FROM table`. 是否可以忽略`AS`语句的一部分，本质上将真实的列名发送到 DataTable？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:42:02.257

我总是热衷于在尽可能接近源头的地方解决问题，而不是可以说是“下游”解决问题。

在这种情况下，听起来问题在于您的 SQL 生成器没有它们需要的那么灵活。您需要更改它们，以便您可以控制它们是否`AS`在查询中发出别名。这可能比对“不正确”查询进行后处理更可靠——这意味着您的代码可以清楚地表达您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:11:37.043

简短的回答是否定的。但是，在填充后更改 dtResults 中的列名怎么样？

你能更具体地描述你试图解决的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:31:41.507

我所做的是有一个包含列名和显示名的表，然后在 DataTable 中我使用显示名作为 ColumnName。

# winapi - 具有自定义字体大小的本机 C++/Win32/MFC 日历控件

> ID：15044430
> 
> 赞同：1
> 
> 时间：2013-02-23T19:07:44.017
> 
> 标签：winapi, visual-c++, mfc

我正在使用 Visual Studio 2010 创建本机/win32/MFC C++ 应用程序。我有一个对话框，我希望用户能够在其中输入日期。为此，我使用了 CDateTimeCtrl，它只是 Win32 常用控件的包装。

这很好，因为用户可以单击箭头并下拉一个月视图，让他们以交互方式选择日期。

我遇到的问题是您无法控制月视图中使用的字体大小。它忽略了 WM_SETFONT，尽管控制文档提到了会告诉它使用自定义字体的调用（请参阅 CDateTimeCtrl::SetMonthCalFont()），但这些都被忽略了。

我最终通过 MS 技术支持事件发现它在 v5 的通用控件中工作，但在 v6 中，他们将其更改为忽略这一点，只使用 Windows 中设置的当前视觉样式信息。根据 MS 没有办法使用自定义字体，v6 中的控件将仅使用当前的 Windows 视觉样式。唯一的方法是强制使用 v5 控件，从而将应用程序中的所有 UI 都放回 v5 控件，或者乱用自定义激活上下文（听起来很乱）。

所以，我正在寻找替代控制。谁能推荐一个提供类似功能的本机/C++/MFC 控件，但它可以让我自定义整体字体大小？我在对话框和所有其他控件中使用了比正常字体更大的字体，除了这个日历控件之外，它看起来很棒。到目前为止，我最初的搜索还没有产生任何看起来像解决方案的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:35:02.813

看看[SetWindowTheme](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759827%28v=vs.85%29.aspx)函数。在它的帮助下，您可以仅为应用程序中的某些控件禁用 XP 主题，而保留其他控件。

根据 MSDN：

> 当 pszSubAppName 和 pszSubIdList 为 NULL 时，主题管理器会删除先前应用的关联。您可以通过指定一个不匹配任何部分条目的空字符串 (L" ") 来防止将视觉样式应用于指定的窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:26:20.683

上面cha的回复是正确的解决方案。为了使控件服从 SetMonthCalFont 调用，您必须禁用视觉主题。虽然有一些技巧。

1）您不能只在 CDateTimeCtrl 对象上调用 SetWindowTheme，因为该调用仅适用于该即时窗口而不是子窗口。月份下拉菜单是一个子窗口，因此不受影响。因此，您必须处理控件的 DTN_DROPDOWN 通知，并在其中获取子月份控件并从中删除视觉主题。

2）在发送DTN_DROPDOWN通知之前确定月份子控件的大小/位置。因此，即使您执行上面的＃1，它的大小也不会正确。所以，你必须更新大小。

3) 显然，意图确实是传递一个空字符串而不是一个带有 1 个空格的字符串，尽管 MSDN 文档似乎表明了这一点。

4) 下面的代码没有考虑日历下拉控件靠近屏幕边缘的情况。如果发生这种情况，可能需要修改代码以解决它并移动其位置以使其仍然可见。

上面的信息由 Microsoft 支持中的 Dave Anderson 提供，下面的代码解决了问题并让控件使用自定义字体正确显示。

因此，我在对话框 InitInstance() 中的 CDateTimeCtrl 对象上调用 SetMonthCalFont()，然后还使用以下代码处理 DTN_DROPDOWN 通知。

请注意，Dave 提供了一个警告，“这种方法依赖于日期和时间选择器控件的实现细节，这些细节将来可能会发生变化，并可能导致下面的代码中断”。

```
void DSomeDialog::OnDtnDropdownMyDateTimeCtrl(NMHDR *pNMHDR, LRESULT *pResult)
{
HWND hWndDateTime = (HWND)pNMHDR->hwndFrom;
HWND hWndMonthCal = DateTime_GetMonthCal(hWndDateTime);
HWND hWndDropDown = ::GetParent(hWndMonthCal);
DWORD dwWidth;
WINDOWINFO wi;

if (hWndMonthCal && hWndDropDown)
{
    RECT rcIdeal;

    //
    //  Remove the window theme from the month calendar 
    //  control
    SetWindowTheme(hWndMonthCal, L"", L"");

    //
    //  Get the ideal size of the month calendar control
    ZeroMemory(&rcIdeal, sizeof(rcIdeal));
    MonthCal_GetMinReqRect(hWndMonthCal, &rcIdeal);
    dwWidth = MonthCal_GetMaxTodayWidth(hWndMonthCal);
    if (dwWidth > (DWORD)rcIdeal.right)
    {
        rcIdeal.right = dwWidth;
    }

    //
    //  Add some padding
    InflateRect(&rcIdeal, 3, 3);

    //
    //  Determine the new size of the drop down window such
    //  that the client area of the window is large enough 
    //  to display the month calendar control
    ZeroMemory(&wi, sizeof(wi));
    wi.cbSize = sizeof(WINDOWINFO);
    ::GetWindowInfo(hWndDropDown, &wi);
    AdjustWindowRectEx(&rcIdeal, wi.dwStyle, FALSE, wi.dwExStyle);

    //
    //  Update the size of the drop down window
    ::SetWindowPos(hWndDropDown,
        NULL, 
        0, 
        0, 
        rcIdeal.right - rcIdeal.left, 
        rcIdeal.bottom - rcIdeal.top, 
        SWP_NOMOVE | SWP_NOZORDER | SWP_NOACTIVATE | SWP_NOOWNERZORDER);
}

*pResult = 0;
} 
```

# objective-c - 异步回调方法的执行顺序一对一线程

> ID：15044431
> 
> 赞同：1
> 
> 时间：2013-02-23T19:07:45.417
> 
> 标签：objective-c

假设一条网络消息启动了一个回调方法。

```
- (void)didReceiveNetworkMessage {
  [obj respondToMethod];
}

- (void)myBigMethod {
  [obj mySmallMethod1];
  [obj mySmallMethod2];
  /* network message received now */
  [obj mySmallMethod3];
  [obj mySmallMethod4];
} 
```

`obj`在单线程环境中调用的方法按什么顺序执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:15:24.643

假设以上所有内容都在主线程上，myBigMethod 将在处理 didReceiveNetworkMessage 方法之前完成执行（因此将调用 mySmallMethod4）。

回调通常在主线程上执行，因为它是在后台工作（即网络加载）完成后完成的。除非您专门对其进行了编码，否则一切通常都发生在主线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:14:45.907

**更新**：鉴于更新的问题，那么如果一切都在同一个线程上完成，那么`respondToMethod`将在`myBigMethod`完成后调用。

如果涉及多个线程，则假设在与方法`didReceiveNetworkMessage`不同的线程上调用`myBigMethod`，您将看到：

```
mySmallMethod1
mySmallMethod2
mySmallMethod3
mySmallMethod4 
```

并且`respondToMethod`可以在`mySmallMethod2`开始执行时或之后的任何时间调用。

换句话说，`respondToMethod`可能与`mySmallMethod2`,`mySmallMethod3`或`mySmallMethod4`什至在`mySmallMethod4`完成后同时运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:18:09.677

不在同一个线程、同一个队列或以同一个队列为目标的队列上的方法相对于彼此具有未定义的顺序。每个指令的单独指令可以在另一个过程中的任何时间发生，包括同时发生。

如果这些方法在这样的序列化上下文中运行，那么排序取决于哪个先开始；但是，同样的问题也适用于启动该方法，因此该顺序也是未定义的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-23T19:11:05.770

这取决于如何将所有内容推入堆栈。你最好的办法是观察你的堆栈（打印出消息）等等来弄清楚。堆定义了执行的顺序。如果延迟有问题，操纵堆顺序可能会为您解决它。如果你需要同时执行一些东西，多线程和在块代码中折腾应该会有所帮助。

```
- (void)didReceiveNetworkMessage {
  [obj respondToMethod];
}

- (void)myBigMethod {
  [obj mySmallMethod1];
  [obj mySmallMethod2];
  /* network message received now */
  [obj mySmallMethod3];
  [obj mySmallMethod4];
} 
```

从上面提到的参考代码来看，respondToMethod, mySmallMethod1,2,3,4 似乎是按该顺序调用的。

*我猜我必须在完全缺乏上面提供的信息的情况下澄清这一点（包括哪些消息实际上调用了这些方法以及在哪里调用）。没有这些信息，我的答案是正确的。不知道为什么我因此而被否决。我已经说明了调用和执行方法的顺序，假设您在 mySmallMethod3 之前和 mySmallMethod2 之后收到来自 respondToMethod 的回调。这就是上面例子中所说的。如果您希望获得更好的答案，请提供一个更好更清晰的示例。*

# save - 我在哪里可以了解 NTFS 如何保存和删除文件？

> ID：15044434
> 
> 赞同：2
> 
> 时间：2013-02-23T19:08:07.617
> 
> 标签：save, ntfs, recover, delete-file

我有一个家庭作业要做，我需要说明我们可以使用 NTFS 从计算机中恢复已删除文件的可能方法。该任务要求我考虑任何可能对取证至关重要的信息。但是，我不知道 NTFS 一开始是如何保存、删除和覆盖文件的！

这是我们在课堂上学到的类似内容：

在课堂上，我们了解到 FAT32 将文件保存在块簇中。当我们保存文件时，它会用完簇中的扇区，但文件可能不会使用簇中的所有扇区，甚至不会使用块中的所有空间。

当文件被“删除”时，目录中的文件名的第一个字母更改为 sigma，然后存储文件的位置被视为未分配（也可能被覆盖）。所以我们仍然可以搜索这个文件（使用某些技术）并恢复它！即使在该地址写入了新文件，新文件也可能比前一个文件小。在这种情况下，存储在那里的先前文件的剩余部分仍然存在，因为它们没有被覆盖。我们也可以恢复它，假设它没有碎片化。

嗯，这就是我们在课堂上学到的。我必须为 NTFS 写一篇类似的文章，但我找不到一个简单的网站首先专门解释如何在 NTFS 中保存和删除文件。谁能给我一些有价值的阅读材料的链接？

编辑：我找到了一个完美的网站，可以准确地解释我需要什么。我会把它贴在这里给未来的读者： [http ://wiki.sleuthkit.org/index.php?title=NTFS_File_Recovery](http://wiki.sleuthkit.org/index.php?title=NTFS_File_Recovery)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:31:26.653

可能最好的起点是 Microsoft Technet。查看以下有关[NTFS 工作原理](http://technet.microsoft.com/en-us/library/cc781134%28v=ws.10%29.aspx)的文章。

您最可能想要深入研究的内容是主文件表、日志，以及可能有关已删除数据恢复的一些主题。

您可能会在我查看[sleuthkit](http://www.sleuthkit.org/)等取证工具的文档时学到很多东西。

您可能还想查看[NIST 出版物 SP 800-86：将取证技术集成到事件响应中的指南](http://csrc.nist.gov/publications/nistpubs/800-86/SP800-86.pdf)。

最后，在 NTFS 中“隐藏”数据非常酷的一点是替代数据流。替代数据流通常对 Windows 操作系统不可见，但仍会占用磁盘空间。它们来自 Mac 世界。[IronGeek 指南](http://www.irongeek.com/i.php?page=security/altds)是开始了解 ADS 的好地方。

# android - Android MediaRecorder 不工作 - 媒体服务器死机/错误 100

> ID：15044438
> 
> 赞同：1
> 
> 时间：2013-02-23T19:08:28.017
> 
> 标签：android, mediarecorder

我正在尝试在此处遵循 MediaRecorder 代码示例：

[http://developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)

试图建立一个录像机，但是在运行代码时，每当我尝试录制时，我都会收到“媒体服务器死机”警告伴随着“相机服务器死机”、“ICamera 死机”、“msgType = 1”和最后是可怕的“错误 100”。

我做了很多研究，似乎发现了很多其他人有类似的问题，但他们的经验都没有帮助我解决我的问题。

我的代码在这里完全可用：

[https://github.com/loisaidasam/sam-video/](https://github.com/loisaidasam/sam-video/)

我在 Android 2.3.4 上运行 T-Mobile G2

我已经把头撞在墙上四个小时了，所以你能提供的任何帮助都将不胜感激！

# kendo-grid - Kendo UI Grid DropdownList、EditorViewData 和 EditorTemplateName 未发布 ViewData

> ID：15044440
> 
> 赞同：1
> 
> 时间：2013-02-23T19:08:38.180
> 
> 标签：kendo-grid

请留意：-

*   我正在使用具有 2 个下拉列表的 Kendo UI Grid 使用非常简单的模型
*   我有 2 个模型类 (a)Category (b)Products

    ```
     public class Category
            {
                public int CategoryID { get; set; }
                public string Name { get; set; }
                public string Address { get; set; }
                public System.DateTime Date1 { get; set; }
                public string ListA { get; set; }
                public string ListB { get; set; }
                public int Count { get; set; }
                public decimal Price { get; set; }
                public bool decision { get; set; }
                public IEnumerable<Product> Products { get; set; }
            }

                public class Product
            {
                public string Person { get; set; }
                public int ProductID { get; set; }
                public bool Chk { get; set; }
                public decimal Balance { get; set; }
                public decimal Deposit { get; set; }
                public decimal Adjustment { get; set; }
                public decimal NewBalance { get; set; }
                [UIHint("AccountList"), Required]
                public string Account { get; set; }
                [UIHint("VaryDDL")]
                public string VaryDDList { get; set; }
            } 
    ```

*   网格中的 2 个下拉列表，第一个 ddl- Account 正在使用 columns.ForeignKeys 以及带有编辑器模板“AccountList.cshtml”的“ViewData”列表

*   另一个 ddl(PROBLEMATIC ONE- Marked with *** )VaryDDL 这也是 columns.ForeignKeys 使用 EditorViewDate 和 EditorTemplate 名称
*   我正在使用 columns.ForeignKeys 和 EditorTemplateName 来获取这些 dropdownList @model IEnumerable(GridInForm.Models.Product) - 视图中使用的模型

    ```
     <div>
                                @(Html.Kendo().Grid(Model.Products)
                            .Name("Products")
                            .Editable(editable => editable.Mode(GridEditMode.InCell))
                            .Columns(columns =>
                            {
                                columns.Bound(p => p.Chk).ClientTemplate("<input type='checkbox' ${ Chk == true ? checked='checked' : ''} disabled />");
                                columns.Bound(p => p.Person).ClientTemplate("<a href='\\#'>#= Person #</a>").ClientFooterTemplate("Total: #=count#");
                                columns.ForeignKey(p => p.Account, (System.Collections.IEnumerable)ViewData["TestVDt"], "Value", "Text");

                                ***columns.ForeignKey(p => p.VaryDDList, Model.Products, "ProductID", "Person")
                                .EditorViewData(new { ProductID = "#=ProductID#" })
                                .EditorTemplateName("VaryDDL");***

                                columns.Bound(p => p.ProductID).Hidden();
                                columns.Bound(p => p.Balance).ClientTemplate("#= kendo.format('{0:c}', Balance) #");
                                columns.Bound(p => p.Deposit).ClientTemplate("#= kendo.format('{0:c}', Deposit) #");
                                columns.Bound(p => p.Adjustment).ClientTemplate("#= kendo.format('{0:c}', Adjustment) #").ClientFooterTemplate("Total: #=sum#");
                                columns.Bound(p => p.NewBalance).ClientTemplate("#= kendo.format('{0:c}', NewBalance) #").ClientTemplate("#= kendo.format('{0:c}', Deposit + Adjustment) #");
                            })
                            .DataSource(dataSource => dataSource.Ajax()
                                .Events(e => e.Change("TestScript"))
                                .Model(model =>
                                {
                                    model.Id(p => p.ProductID);
                                    model.Field(p => p.ProductID).Editable(false);
                                    model.Field(p => p.Person).Editable(false);
                                    model.Field(p => p.Balance).Editable(false);
                                    model.Field(p => p.Deposit).Editable(false);
                                    model.Field(p => p.NewBalance).Editable(false);
                                })
                                .Aggregates(aggregates =>
                                {
                                    aggregates.Add(p => p.Person).Count();
                                    aggregates.Add(p => p.Adjustment).Sum();
                                })
                                .Batch(true)
                                .ServerOperation(false)
                            ))
                            </div> 
    ```

editortemplatename 查看数据（VaryDDL.cshtml）

```
@(Html.Kendo().DropDownList()
.Name(ViewData.TemplateInfo.GetFullHtmlFieldName(""))
.DataValueField("Value")
.DataTextField("Text")
.OptionLabel("Select")
.DataSource(dataSource => dataSource
    .Read(read => read.Action("ChkProduct", "Home", new { ProductID = ViewData["ProductID"] }))
) 
```

)

上述控制器动作：

```
 public JsonResult ChkProduct(int prodid)
    {
            if (prodid == 1)
            {
                List<SelectListItem> Slt1 = new List<SelectListItem>();
                SelectListItem sltLst1 = new SelectListItem();

                Slt1 = new List<SelectListItem> 
                {
                     new SelectListItem { Text="VV1", Value="1" }, 
                     new SelectListItem { Text="VV2", Value="2" }, 
                     new SelectListItem { Text="VV3", Value="3" }
                };

                return Json(Slt1.ToList(), JsonRequestBehavior.AllowGet);
            }
            else
            {
                List<SelectListItem> Slt2 = new List<SelectListItem>();

                Slt2 = new List<SelectListItem> 
                {
                     new SelectListItem { Text="VV4", Value="1" }, 
                     new SelectListItem { Text="VV5", Value="2" }, 
                     new SelectListItem { Text="VV6", Value="3" }
                };

                return Json(Slt2.ToList(), JsonRequestBehavior.AllowGet);
            }
   } 
```

*   对于 VaryDLL，我将 ProductId 作为 ViewData 传递给 Editortemplate “VaryDLL”，它只不过是 kendo ui 下拉列表，它有一个读取方法，从视图数据中获取 productid，并且基于 productId 我只是加载列表项（如果productid=1 然后是第一个列表项，依此类推...
*   我正在尝试做小型原型列。外键，EDITORVIEWDATA 和 EDITORTEMPLATENAME 功能
*   但不知何故，读取方法不起作用（a）我的意思是当我放一个断点时它不会停在那里（b）并且在 UI 中，下拉列表将继续旋转

**请让我知道我做错了什么，还有其他更好的方法** 请发布一些代码....谢谢！

# git - 我怎样才能摆脱“迷失的头脑”？

> ID：15044444
> 
> 赞同：11
> 
> 时间：2013-02-23T19:08:54.997
> 
> 标签：git, smartgit

在我第一次尝试使用 git 做某事时，我使用了 GitHub for Windows。由于它是简单且非常原始的工具，我决定尝试 SmartGit。当我环顾四周时，我发现我的测试有剩余 - 称为“丢失的头脑”。我怎样才能摆脱这些垃圾？似乎

```
git gc --prune=now 
```

或类似的东西应该可以工作，但没有任何改变。我试着用谷歌搜索，但每个人都在试图做相反的事情——从丢失的头或类似的东西中恢复丢失的提交。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T19:51:04.103

根据[手册页](http://www.kernel.org/pub/software/scm/git/docs/git-gc.html)，`git gc`不会垃圾收集通过“reflogs”（`.git/logs/<ref-name>`存储库中的文件）引用的文件。这些 HEAD 正是 SmartGit/Hg 显示的内容，当您删除这些日志时，未引用的提交应该由`git gc --prune=now`.

**警告**除非没有真正充分的理由完全摆脱这些提交（例如删除敏感数据），否则您不应该这样做——也许一段时间后您可能会对这些提交中的一个感兴趣。至少，在我看来，回收磁盘空间不是很好的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T05:43:56.460

这将不仅删除`git gc --prune=now`：

```
git -c gc.reflogExpire=0 -c gc.reflogExpireUnreachable=0 -c gc.rerereresolved=0 \
-c gc.rerereunresolved=0 -c gc.pruneExpire=now gc "$@" 
```

来源：[https ://stackoverflow.com/a/14728706/1069083](https://stackoverflow.com/a/14728706/1069083)

# python - 如何使用 Python 和 PyQt 对我的 GUI 程序进行单元测试？

> ID：15044447
> 
> 赞同：32
> 
> 时间：2013-02-23T19:09:05.917
> 
> 标签：python, qt, unit-testing, pyqt

我听说单元测试是保持代码正常工作的好方法。

单元测试通常将一个简单的输入放到一个函数中，并检查它的简单输出。但是如何测试 UI？

我的程序是用 PyQt 编写的。我应该选择 PyUnit 还是 Qt 的内置 QTest？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-23T19:20:29.537

这里有一个关于使用 Python 的单元测试框架和 QTest 的很好的教程[（](http://www.voom.net/pyqt-qtest-example)旧链接不再起作用。来自 WayBackMachine，页面显示[在这里](https://web.archive.org/web/20130903012954/http://www.voom.net/pyqt-qtest-example)）。

**这不是选择一个或另一个。相反，它是关于一起使用它们。** QTest 的目的只是模拟击键、鼠标点击和鼠标移动。Python 的单元测试框架处理其余的工作（设置、拆卸、启动测试、收集结果等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-12T20:38:28.530

作为另一种选择，[`pytest-qt`](https://pypi.org/project/pytest-qt/)如果您更喜欢使用`pytest`：

[https://pytest-qt.readthedocs.io/en/latest/intro.html](https://pytest-qt.readthedocs.io/en/latest/intro.html)

它允许您测试`pyqt`和`pyside`应用程序，并允许模拟用户交互。这是其文档中的一个小示例：

```
def test_hello(qtbot):
    widget = HelloWidget()
    qtbot.addWidget(widget)

    # click in the Greet button and make sure it updates the appropriate label
    qtbot.mouseClick(widget.button_greet, QtCore.Qt.LeftButton)

    assert widget.greet_label.text() == "Hello!" 
```

# ios - CLLocationManager 和串行位置更新处理

> ID：15044448
> 
> 赞同：2
> 
> 时间：2013-02-23T19:09:12.807
> 
> 标签：ios, grand-central-dispatch, cllocationmanager, nsthread, nsoperationqueue

我需要使用标准位置服务并执行一些处理，包括一些网络调用，通知每个位置更新。我需要按 FIFO 顺序处理位置更新，以跟踪设备并尽快获得结果。确保按顺序处理位置并且处理不重叠（以及获得快速响应）的最佳方式或技术应该是什么：操作队列，调度队列或直接线程（或者甚至是另一种方式，如果存在） ? 看起来操作队列和调度队列在性能方面几乎相同，但调度队列似乎更容易处理，所以我不知道它们各自的优点是什么。关于线程，我一直不鼓励通常使用它们，但我不'

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:57:07.747

如果你不想让东西在后台同时运行，那么你需要一个串行队列。创建串行 GCD 队列：

```
dispatch_queue_t queue = dispatch_queue_create("com.appsdev.project1", 0); 
```

每次你想向该队列添加一些东西时，它很简单：

```
dispatch_async(queue, ^{
    // do your background stuff

    dispatch_async(dispatch_get_main_queue(), ^{
        // update the UI
    });
}); 
```

如果你想使用`NSOperationQueue`它实际上很简单：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
queue.maxConcurrentOperationCount = 1; 
```

并将操作添加到该串行队列：

```
[queue addOperationWithBlock:^{
    // do your stuff

    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        // update the UI
    }];
}]; 
```

在回答你的`NSThread`问题时，根据你的描述，我认为没有必要这样做。当然没有明显的性能问题。

顺便说一句，您添加到您的调度/操作队列的东西是否保证同步操作（即您没有进行地理编码或类似的东西，它本身就是异步操作的，是吗？）？如果它以异步方式运行，则必须格外小心。

* * *

顺便说一句，如果您只关心最近的位置，使用操作队列，您还必须有机会通过调用取消其他尚未开始的操作：

```
[queue cancelAllOperations]; 
```

正在进行的操作将首先完成（除非您输入代码来测试它是否被取消），但是在您根据最新位置发起新请求之前，可以轻松取消尚未开始的挂起操作。这仅取决于您是否真的希望串行处理*所有*位置请求，或者您是否只想完成正在进行的请求，清除其他请求，然后根据新位置排队执行新操作。这仅取决于您的应用程序需要什么，但通常您只关心当前位置。这可以确保您的队列不会太积压。

# drupal - drupal bread crumb view to show only Home > 搜索

> ID：15044450
> 
> 赞同：1
> 
> 时间：2013-02-23T19:09:19.687
> 
> 标签：drupal, breadcrumbs

我刚刚在我的 drupal 主题中添加了搜索

当它进入搜索页面时，我的面包屑显示

首页 > 搜索 > 内容 > 搜索

有没有办法让它只是

首页 > 搜索

谢谢特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:28:09.640

您可以使用[自定义面包屑](http://drupal.org/project/custom_breadcrumbs)模块​​来解决这个问题。

# c# - 为 WP7 SilverLight 游戏创建流畅的游戏帧计时器

> ID：15044453
> 
> 赞同：0
> 
> 时间：2013-02-23T19:09:35.297
> 
> 标签：c#, silverlight, windows-phone-7, timer, game-engine

所以我一直在测试一些新算法，用于在 Silverlight 中创建垂直滚动游戏。我想出了一个非常简单的解决方案。但是，当您在手机上运行它时，会出现大量帧速率不一致的情况。我不知道这是否是由于算法不佳，一次绘制很多东西（目前只有 png 背景和股票播放器图像）或其他原因。

本质上，我想要的是一个游戏循环计时器，它执行一个方法，我可以从中执行所有更新方法，并且无论您在游戏的哪个部分，都具有一致的外观和感觉。这是后端代码。

```
 public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        int counter = 0;
        DispatcherTimer playerTimer;

        string _START   = "START";
        string _FALLING = "FALLING";
        string _LEFT    = "LEFT";
        string _RIGHT   = "RIGHT";
        string _CENTER  = "CENTER";

        string playerState = "";
        int playerMoveTimeout = 20;
        public MainPage()
        {
            InitializeComponent();
            playerState = _START;

            playerTimer = new DispatcherTimer();
            playerTimer.Interval = TimeSpan.FromSeconds(.00999);
            playerTimer.Tick += playerTimer_Tick;
            playerTimer.Start();
        }

        void playerTimer_Tick(object sender, EventArgs e)
        {
            updatePlayer();

            if (counter > 0)
            {
                counter = updateBG(counter);
            }
        }
        public void updatePlayer()
        {
            if (Canvas.GetLeft(Player) + Player.Width >= 480)
            {
                playerState = _LEFT;

            }
            else if (Canvas.GetLeft(Player) <= 0)
            {
                playerState = _RIGHT;
            }
            if(playerMoveTimeout <= 0)
            {
                playerState = _FALLING;
            }
            if (playerState.Equals(_START))
            { }
            else if (playerState.Equals(_FALLING))
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) + 30);
            }
            else if (playerState.Equals(_LEFT))
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) - 60);
                Canvas.SetLeft(Player, Canvas.GetLeft(Player) - 20);
                playerMoveTimeout--;
            }
            else if (playerState.Equals(_RIGHT))
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) - 60);
                Canvas.SetLeft(Player, Canvas.GetLeft(Player) + 20);
                playerMoveTimeout--;
            }
            else //CENTER
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) - 60);
                playerMoveTimeout--;
            }
        }

        public int updateBG(int time)
        {
            if (Canvas.GetTop(background) > 800)
                Canvas.SetTop(background, -2400);
            int x = time;
            Canvas.SetTop(background, Canvas.GetTop(background) + 60);
            x -= 40;
            return x;
        }

        private void Player_Tap(object sender, GestureEventArgs e)
        {

            Point point = e.GetPosition(Player);
            double Y = point.Y;
            double X = point.X;
            if (X < 80)
            {
                counter = 400;
                playerMoveTimeout = 20;
                playerState = _RIGHT;

            }
            else if (X > 120)
            {
                counter = 400;
                playerMoveTimeout = 20;
                playerState = _LEFT;

            }
            else
            {
                counter = 400;
                playerMoveTimeout = 20;
                playerState = _CENTER;

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:25:56.030

因此，答案与其说是一个新的计时器，不如说是一种解决方法。我的具体问题的答案不是算法。这实际上是我做过的最流畅和最小的自制游戏引擎。问题是我试图移动一个 480X2400 的背景图像并且它陷入了困境。所以我最终做的是在主画布中嵌套一个新画布并将其命名为背景。然后我想在背景中移动的所有元素都放在那里

像这样

```
<Canvas Name="background">
    <Image Name="cloud" Source="cloud.png" Width="247" Height="158"/>
    <Image x:Name="cloud_Copy" Source="/cloud.png" Width="247" Height="158" Canvas.Left="192" Canvas.Top="268"/>
    <Image x:Name="cloud_Copy1" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-11" Canvas.Top="592"/>
    <Image x:Name="cloud_Copy2" Source="/cloud.png" Width="247" Height="158" Canvas.Left="192" Canvas.Top="-474"/>
    <Image x:Name="cloud_Copy3" Source="/cloud.png" Width="247" Height="158" Canvas.Top="-900"/>
    <Image x:Name="cloud_Copy4" Source="/cloud.png" Width="247" Height="158" Canvas.Left="192" Canvas.Top="-1566"/>
    <Image x:Name="cloud_Copy5" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-78" Canvas.Top="-2280"/>
    <Image x:Name="cloud_Copy6" Source="/cloud.png" Width="247" Height="158" Canvas.Left="192" Canvas.Top="-2766"/>
    <Image x:Name="cloud_Copy7" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-102" Canvas.Top="-3390"/>
    <Image x:Name="cloud_Copy8" Source="/cloud.png" Width="247" Height="158" Canvas.Left="90" Canvas.Top="-3122"/>
    <Image x:Name="cloud_Copy9" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-113" Canvas.Top="-2798"/>
    <Image x:Name="cloud_Copy10" Source="/cloud.png" Width="247" Height="158" Canvas.Left="90" Canvas.Top="-3864"/>
    <Image x:Name="cloud_Copy11" Source="/cloud.png" Width="247" Height="158" Canvas.Top="-4290" Canvas.Left="-102"/>
    <Image x:Name="cloud_Copy12" Source="/cloud.png" Width="247" Height="158" Canvas.Left="90" Canvas.Top="-4956"/>
    <Image x:Name="cloud_Copy13" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-180" Canvas.Top="-5670"/>
    <Image x:Name="cloud_Copy14" Source="/cloud.png" Width="247" Height="158" Canvas.Left="90" Canvas.Top="-6156"/>
    <Image x:Name="cloud_Copy15" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-192" Canvas.Top="-7278"/>
    <Image x:Name="cloud_Copy16" Source="/cloud.png" Width="247" Height="158" Canvas.Top="-7010"/>
    <Image x:Name="cloud_Copy17" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-203" Canvas.Top="-6686"/>
    <Image x:Name="cloud_Copy18" Source="/cloud.png" Width="247" Height="158" Canvas.Top="-7752"/>
    <Image x:Name="cloud_Copy19" Source="/cloud.png" Width="247" Height="158" Canvas.Top="-8178" Canvas.Left="-192"/>
    <Image x:Name="cloud_Copy20" Source="/cloud.png" Width="247" Height="158" Canvas.Top="-8844"/>
    <Image x:Name="cloud_Copy21" Source="/cloud.png" Width="247" Height="158" Canvas.Left="-270" Canvas.Top="-9558"/>
    <Image x:Name="cloud_Copy22" Source="/cloud.png" Width="247" Height="158" Canvas.Top="-10044"/>
</Canvas>

<Image Name="Star"  Visibility="Collapsed" Source="star.png" Height="50" Width="50" />
<Image x:Name="Player" Source="star.png" Width="200" Height="200" Canvas.Left="117" Canvas.Top="403"/>
<Rectangle Name="TapBox" Fill="#FFF4F4F5" Height="248" Stroke="Black" Width="301" Canvas.Left="68" Canvas.Top="403" Opacity="0" Tap="Rectangle_Tap_1"/>
    <TextBlock x:Name="alt"/> 
</Canvas> 
```

你可以在这个画布上加载大量的东西，而不会降低我所看到的性能。

然后在这里更新它是我的新游戏循环

```
public partial class MainPage : PhoneApplicationPage
    {
        DispatcherTimer gameTimer;

        string _START           = "START";
        string _FALLING         = "FALLING";
        string _LEFT            = "LEFT";
        string _RIGHT           = "RIGHT";
        string _CENTER          = "CENTER";
        string playerState      = "";

        int counter             = 0;
        int playerMoveTimeout   = 40;
        public int altitude { get; set; }

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            buildGameArea();
            alt.Text = altitude.ToString();
            playerState = _START;
            gameTimer = new DispatcherTimer();
            gameTimer.Interval = new TimeSpan(3333);
            gameTimer.Start();
            gameTimer.Tick+=gameTimer_Tick;

        }

        void gameTimer_Tick(object sender, EventArgs e)
        {

            updatePlayer();
            updateGameElements();
        }

        public void buildGameArea()
        {
            Canvas.SetTop(cloud, -300);
        }
        public void reloadPlayer()
        {
            playerState = _START;
            playerMoveTimeout = 40;
            Canvas.SetTop(Player, 300);
            Canvas.SetLeft(Player, 200);
        }
        public void updatePlayer()
        {
            if (Canvas.GetTop(Player) > 800)
            {
                reloadPlayer();
            }

            if (Canvas.GetLeft(Player) + Player.Width >= 480)
            {
                playerState = _LEFT;

            }
            else if (Canvas.GetLeft(Player) <= 0)
            {
                playerState = _RIGHT;
            }

            if (playerMoveTimeout <= 0)
            {
                playerState = _FALLING;
            }

            if (playerState.Equals(_START))
            { }
            else if (playerState.Equals(_FALLING))
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) + 30);

            }
            else if (playerState.Equals(_LEFT))
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) - 40);
                Canvas.SetLeft(Player, Canvas.GetLeft(Player) - 20);
                playerMoveTimeout--;
            }
            else if (playerState.Equals(_RIGHT))
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) - 40);
                Canvas.SetLeft(Player, Canvas.GetLeft(Player) + 20);
                playerMoveTimeout--;

            }
            else //CENTER
            {
                Canvas.SetTop(Player, Canvas.GetTop(Player) - 40);
                playerMoveTimeout--;
            }
            TapBox.Margin = Player.Margin;
        }
        public void updateGameElements()
        {
            alt.Text = altitude.ToString();

            //This single conditional moves every single thing on the background canvas
            if (counter > 0)
            {
                Canvas.SetTop(background, Canvas.GetTop(background) + 20);
                counter -= 20;
            }
        }

        private void Rectangle_Tap_1(object sender, GestureEventArgs e)
        {
            System.Windows.Point point = e.GetPosition(Player);
            double Y = point.Y;
            double X = point.X;
            altitude += 100;
            if (X < 80)
            {
                counter = 400;
                playerMoveTimeout = 40;
                playerState = _RIGHT;

            }
            else if (X > 120)
            {
                counter = 400;
                playerMoveTimeout = 40;
                playerState = _LEFT;

            }
            else
            {
                counter = 400;
                playerMoveTimeout = 40;
                playerState = _CENTER;

            }
        }
    } 
```

如果你把它放在你的设备上，你会看到无论你做了多少，从头到尾都有一个一致的帧速率。

希望我浪费的时间弄清楚这一点可以帮助将来的人。

这再次适用于 Silverlight 游戏编程。这里没有 XNA

# data-binding - INotifyCollectionChanged 不足以更新数据绑定控件？

> ID：15044458
> 
> 赞同：3
> 
> 时间：2013-02-23T19:09:53.023
> 
> 标签：data-binding, windows-8, windows-runtime, windows-store-apps, inotifycollectionchanged

我正在尝试实现一个可绑定的集合 - 一个专门的堆栈 - 它需要显示在我的 Windows 8 应用程序的一个页面上，以及对它所做的任何更新。为此，我实现了 INotifyCollectionChanged 和 IEnumerable<>：

```
public class Stack : INotifyCollectionChanged, IEnumerable<Number>
{

...

public void Push(Number push)
{
    lock (this)
    {
        this.impl.Add(push);
    }

    if (this.CollectionChanged != null)
        this.CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, push));
}

...and the equivalents for other methods...

#region INotifyCollectionChanged implementation

public event NotifyCollectionChangedEventHandler CollectionChanged;

#endregion

public IEnumerator<Number> GetEnumerator()
{
    List<Number> copy;

    lock (this)
    {
        copy = new List<Number>(impl);
    }
    copy.Reverse();

    foreach (Number num in copy)
    {
        yield return num;
    }
}

System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
{
    return this.GetEnumerator();
} 
```

该集合类用于定义页面拥有的底层类实例的一个属性，设置为它的DataContext（页面的Calculator属性），然后绑定到一个GridView：

```
<GridView x:Name="StackGrid" ItemsSource="{Binding Stack, Mode=OneWay}" ItemContainerStyle="{StaticResource StackTileStyle}" SelectionMode="None">

... ItemTemplate omitted for length ... 
```

绑定最初在页面导航到时起作用 - 堆栈中的现有项目显示得很好，但是添加到堆栈中/从堆栈中删除的项目不会反映在 GridView 中，直到页面被导航离开和返回。调试显示 Stack 中的 CollectionChanged 事件始终为空，因此它永远不会在更新时被调用。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T07:43:04.577

刚才我在想要绑定的自定义集合中遇到了同样的问题。我发现只有类派生形式`Collection<>`可以绑定到。

为什么？现在我不知道。所以如果你真的想让它工作，那么就派生出形式`Collection<>`，但这会弄乱你的设计。

# c# - 可以与电话和消息交互吗？

> ID：15044460
> 
> 赞同：0
> 
> 时间：2013-02-23T19:10:31.267
> 
> 标签：c#, windows-phone-7, xaml

我刚买了一个 windows phone(lumia 800) 并一直在玩它。我仍然没有要连接的网络，所以我还不能真正尝试电话部分。

我想知道如果我制作一个应用程序，我可以

1.  从我的应用程序拨打电话？使用我看到的内置电话标题？
2.  使用我看到的消息标题从我的应用程序发送文本（短信）消息？
3.  当我说消息传递部分时，它有一个“to”行。它似乎与“人”部分有关。我还可以将“to”行与“people”标题一起连接到我的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:06:00.113

1.  是的，您可以使用[PhoneCallTask](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.tasks.phonecalltask%28v=vs.105%29.aspx)
2.  同上，只需使用[SmsComposeTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.tasks.smscomposetask%28v=vs.105%29.aspx)
3.  抱歉不行。无法将第三方联系人列表暴露给内置应用程序。但是，您可以创建将电话联系人和您自己的联系人结合起来的类似功能。

[您可以使用Contacts](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.userdata.contacts%28v=vs.105%29.aspx)查询现有联系人。在 Windows Phone 8 上，您可以使用[自定义联系人存储](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207034%28v=vs.105%29.aspx)添加联系人，尽管我自己没有尝试过。

# sql - 编写 SQL 插入语句以将记录添加到数据库表

> ID：15044465
> 
> 赞同：1
> 
> 时间：2013-02-23T19:10:59.827
> 
> 标签：sql, sql-server

我的 INSERT 语句如下；

```
INSERT INTO StudentRecord ( Name, schoolid, age)
VALUES ('Hello', 1, '12') 
```

我的数据库中有 2 个表；

第一个——

`School`它具有以下字段；

```
id, schoolName 
```

第二——

`StudentRecord` 它有以下文件；

```
studentid, studentName, schoolid, age 
```

现在我要做的是将学校名称而不是 schoolId 添加到插入语句中，并将其保存在`StudentRecord`表中。我怎样才能做到这一点 ？

例如，我添加`1`为 schoolId 的地方应该是学校的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:13:19.150

您可以使用`insert ... select`而不是`insert ... values`：

```
insert  StudentRecord
        (Name, Schoolid, Age)
select  @StudentName
,       id
,       @StudentAge
from    Schools
where   schoolName = @SchoolName 
```

我添加了变量（如`@SchoolName`），您可以在其中输入值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:16:30.190

对于 OP....有一些数据库理论你有点模糊，你需要清楚地理解它，然后人们给你的答案才会完全有意义。

不要在插入后查看原始数据表，并期望每个字段都是数据的文本表示。您希望在插入数据后查看数据，使用查询将相应的表彼此连接起来，从而以可读的格式呈现数据。您不会以可读的格式插入它。您插入，然后以可读格式查询和查看它。

您正在通过使用学校名称代替 ID 来对数据库进行非规范化。规范化是保持系统冗余和最佳数据库性能的关键概念。例如，一次更改一处，更改所有使用它的记录。了解规范化将引导您理解为什么这是一个糟糕的解决方案。

这里有几个链接给你。

[微软知识库文章](http://support.microsoft.com/kb/283878)

[维基百科数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:16:54.720

将 schoolid 更改为 schoolName。

使用 schoolid 检索 schoolName。（使用选择）

检索后，您现在可以将您的学校名称存储在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T19:18:40.267

你将不得不修改你的表..

ALTER TABLE StudentRecord ALTER COLUMN schoolid varchar(100)

现在只需输入学校名称代替学校ID！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-23T19:13:24.630

不知道为什么要这样做，因为您正在对结构进行非规范化。您也不应该存储`age`，因为它会更改并且是计算字段。而是存储出生日期。

但这样的事情可能会奏效：

```
INSERT INTO someTable
SELECT a.studentId, a.studentName, b.schoolName, a.age
FROM StudentRecord a
INNER JOIN School b ON b.id = a.schoolid 
```

# javascript - 如何设计一个带有许多回调的 Javascript 库 API？

> ID：15044467
> 
> 赞同：1
> 
> 时间：2013-02-23T19:11:17.853
> 
> 标签：javascript, api, callback, coffeescript

我正在编写一个 Javascript 库（在 Coffeescript 中），它是与服务器通信的 Comet 实现（CometD）之上的一个薄层。基本上有两种类型的事情发生：

*   一些客户端 Javascript 代码调用`library.someAction()`并将操作发送到服务器；
*   某些事件是异步发生的，`library`需要将此事件通知客户端代码。

这是我当前实现的代码：

[https://github.com/HarvardEconCS/TurkServer/blob/master/turkserver-js-client/src/tsclient.coffee](https://github.com/HarvardEconCS/TurkServer/blob/master/turkserver-js-client/src/tsclient.coffee)

相同的代码翻译成 Javascript： http: [//pastebin.com/w4ABf1vd](http://pastebin.com/w4ABf1vd)

**对于客户端启动的操作**，库中针对每种类型的操作都有一个函数。例如，有时客户端需要将测验的结果发送到服务器，所以有这个对应的功能：

```
 @sendQuizResults: (correct, total) =>
    @channelSend "/service/user",
      status: Codec.quizResults
      correct: correct
      total: total 
```

**对于服务器发起的事件**，客户端代码需要为每种类型的事件注册一个回调，因此周围有一大堆回调和设置每个回调的函数。即，有大量以下内容：

```
 @requestUsername_cb = undefined

  @RequestUsername: (callback) ->
    @requestUsername_cb = callback 
```

在上面的例子中，如果一个`RequestUsername`事件被触发，客户端调用`requestUsername_cb()`if 它存在。

这似乎开始变得一团糟，所以我想知道是否有任何好的做法可以创建这样的库，并以合理的方式组织所有事件和操作。CS 基本上将上面的所有函数都包装到一个闭包中，因此它们可以用作 JS 对象。

我不得不承认我是那些刚开始使用该语言的 Javascript 用户之一，然后出于各种原因跳入 Coffeescript。如果有什么我对 Javascript 不太了解的地方，那么我很乐意得到启发；但是，我不希望这偏离主题/变成关于 CS 与 JS 或其他东西的激烈战争。请限制您对此类 API 的一般最佳实践的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:34:17.317

我认为您想要的是一些节点式事件；但是，如何设计和构建 API 通常取决于您。

Node.js 使用 EventEmitter 类处理事件。这些类具有某些事件（仅定义为字符串），以及每个事件的一组侦听器（这些只是函数）。这些事件由方法触发，并由方法`emit`附加`on`。你只需要定义一些东西来挂钩。让我们使用 EventEmitter 来定义一个这样的类。

```
{ EventEmitter } = require 'events'

class TurkEmitter extends EventEmitter

module.exports = new TurkEmitter 
```

开发人员会像这样使用这个类：

```
TurkEmitter = require 'TurkEmitter' # Whatever path

TurkEmitter.on 'connect', (event) ->
    doSomething(with: event) 
```

他们只是挂钩到 TurkEmitter 的`'connect'`事件，并且他们的函数将在该事件被触发的任何时候被调用。开发人员可以将多个侦听器附加到该事件，删除侦听器等。

在您的代码中的某处，您使用以下命令触发此事件`emit`：

```
TurkEmitter.emit 'connect', { some: 'object here' } # Any object that the developer will use 
```

似乎编写了一段代码将在客户端上运行，而一段代码将在服务器上运行。在这种情况下，您需要为客户端编写一个简单的 EventEmitter 端口。

# javascript - 在警告框中显示 div

> ID：15044474
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:11:40.400
> 
> 标签：javascript, jquery, html

我有这段代码，它在单击按钮时显示 testCount 和 PestCount。我怎样才能改变它，以便 testCount 和pescount 可以在按钮单击时显示在警报框中。

JS：

```
 $(document).ready(function() { 
  $('#button').click(function() { 
   $('#output').text(nCount + pCount);     
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:13:14.677

jQuery UI 就是您的答案。具体[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:13:24.997

```
$(document).ready(function() { 
  $('#button').click(function() { 
   alert(nCount + pCount);     
  });
}); 
```

# c - 用于任意精度算术的 GCD 算法

> ID：15044475
> 
> 赞同：3
> 
> 时间：2013-02-23T19:11:46.843
> 
> 标签：c, algorithm, gmp, arbitrary-precision, greatest-common-divisor

我完全被这个问题所困扰，所以我正在寻求任何帮助。

我想每个人都知道基本的 GCD 计算算法，比如二进制或欧几里得 GCD。实现这样的方法来计算两个单精度数是没有问题的。实际上，这只是大约几笔。

我需要为多精度数字（超过 10^5 位）实现此方法（用 C 语言）。有几个可用的 GNU 库（GNU MP、MPFR、MPIR），它们可以定义多精度数字并对它们进行操作。它看起来像一个多精度数字存储在内存中，作为一对单精度部分，也就是“肢体”。

实现了一些方法来查找 gcd(a, b)，但实际上它们很难满足我的需要。仅当 a 和 b 正好包含两个肢体时才使用 GCD 计算的二进制方法。当 min(a,b) 包含多于（即 630 个）肢体等时使用的 HGCD 方法。我发现很难弄清楚，如何扩展这些方法中的任何一个以用于任何长度的 a 和 b。我还发现不同版本的 GNU 库包含不同版本和方法的 GCD 算法。

**问题：**我想知道是否有可能使二进制 GCD 算法与“肢体”方面的任何长度的多精度整数一起工作，如果可能的话 - 获得任何帮助或想法如何在 C 中实现它。有没有人有任何想法或代码部分如何实现它？

我想考虑任何建议或任何其他解决方案来解决该问题。

如果有人愿意看一下，这是（a = b = 2 个肢体）的 GNU MP 二进制 GCD 方法的一部分：

```
/* Use binary algorithm to compute G <-- GCD (U, V) for usize, vsize == 2.
   Both U and V must be odd. */
static inline mp_size_t
gcd_2 (mp_ptr gp, mp_srcptr up, mp_srcptr vp)
{
  printf("gcd_2 invoked\n");
  mp_limb_t u0, u1, v0, v1;
  mp_size_t gn;

  u0 = up[0];
  u1 = up[1];
  v0 = vp[0];
  v1 = vp[1];

  ASSERT (u0 & 1);
  ASSERT (v0 & 1);

  /* Check for u0 != v0 needed to ensure that argument to
   * count_trailing_zeros is non-zero. */
  while (u1 != v1 && u0 != v0)
    {
      unsigned long int r;
      if (u1 > v1)
  {
    sub_ddmmss (u1, u0, u1, u0, v1, v0);
    count_trailing_zeros (r, u0);
    u0 = ((u1 << (GMP_NUMB_BITS - r)) & GMP_NUMB_MASK) | (u0 >> r);
    u1 >>= r;
  }
      else  /* u1 < v1\.  */
  {
    sub_ddmmss (v1, v0, v1, v0, u1, u0);
    count_trailing_zeros (r, v0);
    v0 = ((v1 << (GMP_NUMB_BITS - r)) & GMP_NUMB_MASK) | (v0 >> r);
    v1 >>= r;
  }
    }

  gp[0] = u0, gp[1] = u1, gn = 1 + (u1 != 0);

  /* If U == V == GCD, done.  Otherwise, compute GCD (V, |U - V|).  */
  if (u1 == v1 && u0 == v0)
    return gn;

  v0 = (u0 == v0) ? ((u1 > v1) ? u1-v1 : v1-u1) : ((u0 > v0) ? u0-v0 : v0-u0);
  gp[0] = mpn_gcd_1 (gp, gn, v0);

  return 1;
} 
```

[以上代码粘贴](http://codepaste.ru/13601/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:19:26.683

只需为这个问题专门编写你自己的代码，为什么不呢？`(10^9)^2`适合 64 位 int，因此您可以使用**base - `(10^9)`digits**，每个都保存在 64 位 int 中。要表示`2^(10^5)`-bits 值，`2^(10^5) ~= 10^30103`即具有 ~ 30103 个十进制数字的值，对于所涉及的两个数字中的每一个，您只需要 `30103/9 ~= 3350`ints ，它是内存中的一个 ~ 27 kB 数组。

[根据 WP，对于二进制 GCD 算法](http://en.wikipedia.org/wiki/Binary_GCD_algorithm#Algorithm)，您只需要`minus`并且`/2`通过将每个数字减半来实现它是微不足道的，偶尔进位`5*10^8`到较低的数字`(94 / 2 = 47 = {4,5+2})`。最终乘以**2 ^(*k*)**可以使用简单算法完成，因为它只需要执行一次。

在 base- 中打印`10`将是微不足道的。如果您不关心最终结果的打印，那么您将不需要最终乘法（或者如果您将结果报告为`2^k*x`），然后您可以使用`10^18`基数，将使用的位数减半.

您只需要通常的 C 整数算术来处理数字。

# android - Android WebDriver 是否支持 set_page_load_timeout？

> ID：15044478
> 
> 赞同：1
> 
> 时间：2013-02-23T19:11:57.293
> 
> 标签：android, python, selenium, webdriver

使用 python 绑定，当我运行时

```
a = Remote('http://localhost:8080/wd/hub', DesiredCapabilities.ANDROID)
a.set_page_load_timeout(5) 
```

我收到这个错误

```
WebDriverException: Message: u'pageLoadTimeout' ; Stacktrace: Method pageLoadTimeout threw an error in AndroidWebDriver.java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:29:19.547

我探索了 Android WebDriver 的 Android 端的 Java 代码。我发现应该处理设置页面加载超时的方法没有。事实上，它显式地抛出了一个 UnsupportedOperationException 。

# asp.net - 列表 DiaryEntry 无法转换为 collections.generic.list

> ID：15044480
> 
> 赞同：0
> 
> 时间：2013-02-23T19:12:01.587
> 
> 标签：asp.net, linq, list

```
List<Diary_Entry> DiaryEntry = new List<Diary_Entry>();

DiaryEntry = (from DE in db.Diary_Entries
    where DE.Site_Id == 1
    && DE.Date == tempDate
    select DE).ToList().FirstOrDefault(); 
```

错误：无法将类型隐式转换`Diary_Entry`为`System.Collections.Generic.List<Diary_Entry>`

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:17:14.317

您需要删除`FirstOrDefault()`呼叫。这将返回一个实体，而您的`DiaryEntry`实例是一个列表。它应该是这个（`DiaryEntry`将是类型`List<Diary_Entry>`）：

```
var DiaryEntry = (from DE in db.Diary_Entries
                  where DE.Site_Id == 1
                  && DE.Date == tempDate
                  select DE).ToList(); 
```

或者应该是这样的（`DiaryEntry`将是类型`Diary_Entry`）：

```
var DiaryEntry = (from DE in db.Diary_Entries
                  where DE.Site_Id == 1
                  && DE.Date == tempDate
                  select DE).ToList().FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:19:05.827

您的变量 DiaryEntry 是 List 类型，但您尝试将其设置为等于 Diary_Entry 类型的变量。你应该使用

```
List<Diary_Entry> DiaryEntry = new List<Diary_Entry>();
DiaryEntry = (from DE in db.Diary_Entries
                      where DE.Site_Id == 1
                      && DE.Date == tempDate
                      select DE).ToList(); 
```

此查询返回 Diary_Entry 类型的值列表。如果你想获得 Diary_Entry 类型的单个值，你应该使用

```
 var DiaryEntry = (from DE in db.Diary_Entries
                          where DE.Site_Id == 1
                          && DE.Date == tempDate
                          select DE).FirstOrDefault(); 
```

在此查询中，您不应使用`ToList()`.

# php - PHP | 从客户端用户获取私有 IP 地址？

> ID：15044486
> 
> 赞同：2
> 
> 时间：2013-02-23T19:12:27.410
> 
> 标签：php, http, curl, ip

我知道问题，但没有在stackoverflow上找到真正的答案。这不是`X_FORWARDED_FOR`，`SERVER_NAME`或者`SERVER_REMOTE_ADDR`，我想获取连接到我的服务器的远程客户端的本地 IP 地址，以检测谁真正在本地远程网络上连接。

解释一下：

```
ISP  <---->  ROUTER <----> LOCAL NETWORK <----> LOCAL PC 
```

我想知道什么？

1.  已连接远程客户端的公共 IP 地址`$_SERVER["REMOTE_ADDR"]`，可以，但是！...
2.  公网连接客户端的本地IP地址（192.168.xx、10.xxx、172.xxx）

如何解决这个问题呢？我有答案，所以我认为如果想知道本地 IP 地址，每个人都应该知道：

你应该使用`CURL`和`curl_getinfo()`功能。然后，指向您想要的任何人的 URL 地址（您的主服务器 ip 或其他），例如：

```
<?php
    $ch = curl_init();

    $opt = curl_setopt($ch, CURLOPT_URL, "YOUR_SOME_URL_ADDRESS"); 

    curl_exec($ch);

    $response = curl_getinfo($ch);

    $result = array('client_public_address' => $response["primary_ip"],
                    'client_local_address' => $response["local_ip"]
            );

    var_dump($result);

    curl_close($ch);

?> 
```

Focus on `$response["primary_ip"]` which responses your Public address and `$response["local_ip"]` which reponses local address. Now this is example:

```
ISP  <---->  ROUTER <----> LOCAL NETWORK <----> LOCAL PC
 /\                                              /\
 ||                                              ||
 \/                                              \/
$response["primary_ip"]                  <----> $response["local_ip"]
213.x.x.x  (for example)                        192.168.1.3 (for example) 
```

Result:

```
array (size=2)
  'client_public_address' => string '213.xxx.xxx.xxx' (length=14)
  'client_local_address'  => string '192.168.1.3' (length=11) 
```

This will NOT be giving a REAL local IP address!

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:23:27.157

This will never get to work.
First, you need an HTTP server on a client to make it response to CURL.
Even if ther would be - it is not guarantted to return whatever "local IP". Next, an HTTP server which pings it's clients back looks suspicious and most likely gets banned.

Anyway, I tried your code on a remote IP:

```
array(2) {
  ["client_public_address"]=>
  string(7) "8.8.8.8"
  ["client_local_address"]=>
  string(0) ""
} 
```

it returned nothing

While when I tried my local router it works okay

```
array(2) {
  ["client_public_address"]=>
  string(13) "XXX"
  ["client_local_address"]=>
  string(12) "192.168.1.37"
} 
```

It works only for your **own local router**, but it cannot get whatever local address from a remote system.
Frankly, it shows you just local IP address assigned to your PC.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:26:38.040

The local IP addressed is not exposed to the application layer by default. You need lower level tools that can extract this information from the network packets.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:46:01.843

You can use HTML5 features (CORS and WebSocket) for determining the range (xxx.xxx.xxx.xxx/24) see this live example:

[JS-RECON](http://www.andlabs.org/tools/jsrecon.html)

How its work? You can scan range of IP addresses (192.168.1.0/24, 192.168.0.1/24, etc) and find the range that used by user, however, finding exact IP address is still difficult.

Result: Doesn't work. IP is 192.168.1.200 returns 192.168.1.2; site invalid, tools don't really work.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-07-31T11:44:54.080

```
 function getRealIpAddr(){ 
        //check ip from share internet 
        if (!empty($_SERVER['HTTP_CLIENT_IP'])) { 
            $ip=$_SERVER['HTTP_CLIENT_IP'];
        } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){
         //to check ip is pass from proxy 
            $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
        } else { 
            $ip=$_SERVER['REMOTE_ADDR']; 
        }

       return $ip; 
    } 
```

# c# - 在 C# 中从文件中读取唯一元素

> ID：15044487
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:12:39.157
> 
> 标签：c#

我有一个文件

```
outlook temperature Humidity  Windy  PlayTennis

sunny      hot        high     false   N

sunny      hot        high     true    N

overcast   hot        high     false   P

rain       mild       high     false   P

rain       cool       normal   false   P 
```

我只想读取每列中的唯一元素。

我的输出应该是：

```
 elements: occurence         
sunny : 2
overcast :1 
rain : 2
hot: 3
cold : ans so on
mild
high
normal
true
false
N
P 
```

我想将它存储在字典中，因为键值对键将是我的行元素。value 将是它的列元素。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:23:01.377

只需为每一列制作一个 HashSet 并将其下的值存储在相应的 HashSet 中。将每个 HashSet 中的所有元素全部添加到 HashSet 后，打印它们。

```
var text1 = File.ReadAllLines(file);
HashSet<string>[] columns = new HashSet<string>[text1[0].Split(" \t".ToCharArray(), StringSplitOptions.RemoveEmptyEntries).Length];

for(int i=0; i<columns.Length; i++)
{
    columns[i] = new HashSet<string>();
}

foreach (string row in text1.Skip(1))
{
    string[] words = row.Split(" \t".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
    if (words.Length == columns.Length)
    {
        for (int i = 0; i < words.Length; i++)
        {
            columns[i].Add(words[i]);
        }
    }
}

for (int i = 0; i < columns.Length; i++)
{
    foreach (string value in columns[i])
    {
        Console.WriteLine(value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:12:44.780

好的，所以首先你必须加载文件内容：

```
string[] allLines = File.ReadAllLines(filePath); 
```

现在，您应该删除空行并用单个空格字符替换多个空格。Regex 和 Linq 在这里派上用场。

```
string[] nonEmptyLines = allLines.Where(s => s.Trim(' ') != "")
                .Select(s => Regex.Replace(s, @"\s+", " ")).ToArray(); 
```

现在让我们阅读列标题：

```
string[] columnHeaders = null;
if (nonEmptyLines.Length > 0)
    columnHeaders = nonEmptyLines[0].Split();
else
    return; 
```

检查有多少列：

```
int columnsCount = columnHeaders.Length; 
```

跳过包含列标题的第一行，并使用以下 Linq 语法将值拆分为字符串数组。

```
var linesValues = nonEmptyLines.Skip(1).Select(l => l.Split()); 
```

最后，是时候将独特的结果写入字典了：

```
Dictionary<string, string> columnValues = new Dictionary<string, string>();
for (int i = 0; i < columnsCount; i++)
{
    foreach (string[] values in linesValues)
    {
        if (!columnValues.ContainsKey(values[i]))
        {
            columnValues.Add(values[i], columnHeaders[i]);
        }
    }
} 
```

就这样。我已经在您的示例中对其进行了测试，并且对我有用。

# asp.net - 无法从 asp.net 网站访问不同物理驱动器上的文件

> ID：15044488
> 
> 赞同：0
> 
> 时间：2013-02-23T19:12:42.740
> 
> 标签：asp.net, iis, file-access, server.mappath

我的网站发布在 c:\inetpub\wwwroot 文件夹下，我在 D: 驱动器上有一些需要访问的大文本文件。假设确切的位置是 D:\Test\test.txt。`File.Exists()`当我的网站运行时，它一直在检查失败。我尝试了以下但没有奏效：

*   从 IIS 创建虚拟目录以指向此文件夹并`Server.MapPath`在代码中使用
*   授予网络服务对此测试文件夹的读取权限
*   与网络服务共享文件夹并在网站中引用 UNC 路径

以上所有方法都失败了，网站仍然说该文件不存在，但它就在那里。有任何想法吗？

编辑：以下是我在 Page_Load 中进行的几次尝试，但都失败了：

```
if (File.Exists(@"D:\Test\test.txt"))
{ ... }

if (File.Exists(Server.MapPath("TestVirtualDir/test.txt")))
{ ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:35:55.673

确保网络服务是在 appdomain 中使用的身份。

# javascript - AngularJS 创建全局键盘快捷键的方法是什么？

> ID：15044494
> 
> 赞同：77
> 
> 时间：2013-02-23T19:13:23.180
> 
> 标签：javascript, angularjs

我想我应该使用指令，但是将指令添加到正文似乎很奇怪，但是在文档上监听事件。

这样做的正确方法是什么？

更新：找到 AngularJS UI 并看到[他们](https://docs.angularjs.org/api/ng/directive/ngKeypress)对 keypress 指令的实现。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-10-16T19:33:46.950

我想说一种更合适的方式（或“Angular 方式”）是将其添加到指令中。这是一个简单的方法（只需将`keypress-events`属性添加到`<body>`）：

```
angular.module('myDirectives', []).directive('keypressEvents', [
  '$document',
  '$rootScope',
  function($document, $rootScope) {
    return {
      restrict: 'A',
      link: function() {
        $document.bind('keypress', function(e) {
          console.log('Got keypress:', e.which);
          $rootScope.$broadcast('keypress', e);
          $rootScope.$broadcast('keypress:' + e.which, e);
        });
      }
    };
  }
]); 
```

在您的指令中，您可以简单地执行以下操作：

```
module.directive('myDirective', [
  function() {
    return {
      restrict: 'E',
      link: function(scope, el, attrs) {
        scope.keyPressed = 'no press :(';
        // For listening to a keypress event with a specific code
        scope.$on('keypress:13', function(onEvent, keypressEvent) {
          scope.keyPressed = 'Enter';
        });
        // For listening to all keypress events
        scope.$on('keypress', function(onEvent, keypressEvent) {
          if (keypress.which === 120) {
            scope.keyPressed = 'x';
          }
          else {
            scope.keyPressed = 'Keycode: ' + keypressEvent.which;
          }
        });
      },
      template: '<h1>{{keyPressed}}</h1>'
    };
  }
]); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-10-06T17:57:24.713

使用`$document.bind`：

```
function FooCtrl($scope, $document) {
    ...
    $document.bind("keypress", function(event) {
        console.debug(event)
    });
    ...
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-04-22T11:10:38.210

我还不能保证它，但我已经开始看看 AngularHotkeys.js：

[http://chieffancypants.github.io/angular-hotkeys/](http://chieffancypants.github.io/angular-hotkeys/)

一旦我投入其中，将更新更多信息。

更新 1：哦，有一个 nuget 包：angular-hotkeys

更新 2：实际上非常易于使用，只需在您的路线中或像我正在做的那样在您的控制器中设置您的绑定：

```
hotkeys.add('n', 'Create a new Category', $scope.showCreateView);
hotkeys.add('e', 'Edit the selected Category', $scope.showEditView);
hotkeys.add('d', 'Delete the selected Category', $scope.remove); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-23T19:58:38.960

以下是我使用 jQuery 完成此操作的方法——我认为有更好的方法。

```
var app = angular.module('angularjs-starter', []);

app.directive('shortcut', function() {
  return {
    restrict: 'E',
    replace: true,
    scope: true,
    link:    function postLink(scope, iElement, iAttrs){
      jQuery(document).on('keypress', function(e){
         scope.$apply(scope.keyPressed(e));
       });
    }
  };
});

app.controller('MainCtrl', function($scope) {
  $scope.name = 'World';
  $scope.keyCode = "";
  $scope.keyPressed = function(e) {
    $scope.keyCode = e.which;
  };
}); 
```

```
<body ng-controller="MainCtrl">
  <shortcut></shortcut>
  <h1>View keys pressed</h1>
  {{keyCode}}
</body> 
```

[Plunker 演示](http://plnkr.co/edit/cBHOuHyrHz1Gk7zzYVX8)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-11-06T12:22:32.177

这是一个用于键盘快捷键的 AngularJS 服务示例：http: [//jsfiddle.net/firehist/nzUBg/](http://jsfiddle.net/firehist/nzUBg/)

然后可以像这样使用它：

```
function MyController($scope, $timeout, keyboardManager) {
    // Bind ctrl+shift+d
    keyboardManager.bind('ctrl+shift+d', function() {
        console.log('Callback ctrl+shift+d');
    });
} 
```

**更新：**我现在使用[angular-hotkeys](http://chieffancypants.github.io/angular-hotkeys/)代替。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-09-14T11:09:33.360

**作为指令**

这基本上是在 Angular 文档代码中完成的，即按下`/`开始搜索。

```
angular
 .module("app", [])
 .directive("keyboard", keyboard);

function keyboard($document) {

  return {
    link: function(scope, element, attrs) {

      $document.on("keydown", function(event) {

      // if keycode...
      event.stopPropagation();
      event.preventDefault();

      scope.$apply(function() {            
        // update scope...          
      });
    }
  };
} 
```

Plunk 使用键盘指令

[http://plnkr.co/edit/C61Gnn?p=preview](http://plnkr.co/edit/C61Gnn?p=preview)

* * *

**作为服务**

将该指令转换为服务非常容易。唯一真正的区别是范围没有在服务上公开。要触发摘要，您可以引入`$rootScope`或使用`$timeout`.

```
function Keyboard($document, $timeout, keyCodes) {
  var _this = this;
  this.keyHandlers = {};

  $document.on("keydown", function(event) {        
    var keyDown = _this.keyHandlers[event.keyCode];        
    if (keyDown) {
      event.preventDefault();
      $timeout(function() { 
        keyDown.callback(); 
      });          
    }
  });

  this.on = function(keyName, callback) {
    var keyCode = keyCodes[keyName];
    this.keyHandlers[keyCode] = { callback: callback };
    return this;
  };
} 
```

您现在可以使用该`keyboard.on()`方法在控制器中注册回调。

```
function MainController(keyboard) {

  keyboard
    .on("ENTER",  function() { // do something... })
    .on("DELETE", function() { // do something... })
    .on("SHIFT",  function() { // do something... })
    .on("INSERT", function() { // do something... });       
} 
```

使用服务的替代版本的 Plunk

[http://plnkr.co/edit/z9edu5?p=preview](http://plnkr.co/edit/z9edu5?p=preview)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-05-07T03:14:33.377

稍微短一点的答案就是看看下面的解决方案 3。如果您想了解更多选项，可以阅读全文。

我同意 jmagnusson 的观点。但我相信有更清洁的解决方案。与其将键与指令中的函数绑定，不如将它们绑定在 html 中，就像定义配置文件一样，并且热键应该是上下文的。

1.  下面是使用带有自定义指令的鼠标陷阱的版本。（我不是这个小提琴的作者。）

    ```
    var app = angular.module('keyExample', []);

    app.directive('keybinding', function () {
        return {
            restrict: 'E',
            scope: {
                invoke: '&'
            },
            link: function (scope, el, attr) {
                Mousetrap.bind(attr.on, scope.invoke);
            }
        };
    });

    app.controller('RootController', function ($scope) {
        $scope.gotoInbox = function () {
            alert('Goto Inbox');
        };
    });

    app.controller('ChildController', function ($scope) {
        $scope.gotoLabel = function (label) {
            alert('Goto Label: ' + label);
        };
    }); 
    ```

    您将需要包含 mousetrap.js，并按如下方式使用它：

    ```
    <div ng-app="keyExample">
        <div ng-controller="RootController">
            <keybinding on="g i" invoke="gotoInbox()" />
            <div ng-controller="ChildController">
                <keybinding on="g l" invoke="gotoLabel('Sent')" />
            </div>
        </div>
        <div>Click in here to gain focus and then try the following key strokes</div>
        <ul>
            <li>"g i" to show a "Goto Inbox" alert</li>
            <li>"g l" to show a "Goto Label" alert</li>
        </ul>
    </div> 
    ```

    [http://jsfiddle.net/BM2gG/3/](http://jsfiddle.net/BM2gG/3/)

    该解决方案要求您包含 mousetrap.js，它是帮助您定义热键的库。

2.  如果你想避免开发自己的自定义指令的麻烦，你可以查看这个库：

    [https://github.com/drahak/angular-hotkeys](https://github.com/drahak/angular-hotkeys)

    还有这个

    [https://github.com/chieffancypants/angular-hotkeys](https://github.com/chieffancypants/angular-hotkeys)

    第二个提供了更多的功能和灵活性，即为您的应用程序自动生成热键备忘单。

**更新**：Angular ui 不再提供解决方案 3。

3.  除了上述解决方案之外，angularui 团队还完成了另一种实现。但缺点是解决方案依赖于 JQuery 库，这不是 Angular 社区的趋势。（Angular 社区尝试只使用 angularjs 附带的 jqLit​​e 并摆脱过度依赖的依赖。）这是链接

    [http://angular-ui.github.io/ui-utils/#/keypress](http://angular-ui.github.io/ui-utils/#/keypress)

用法是这样的：

在您的 html 中，使用 ui-keydown 属性来绑定键和功能。

```
<div class="modal-inner" ui-keydown="{
                        esc: 'cancelModal()',
                        tab: 'tabWatch($event)',
                        enter: 'initOrSetModel()'
                    }"> 
```

在您的指令中，将这些函数添加到您的范围内。

```
app.directive('yourDirective', function () {
   return {
     restrict: 'E',
     templateUrl: 'your-html-template-address.html'
     link: function(){
        scope.cancelModal() = function (){
           console.log('cancel modal');
        }; 
        scope.tabWatch() = function (){
           console.log('tabWatch');
        };
        scope.initOrSetModel() = function (){
           console.log('init or set model');
        };
     }
   };
}); 
```

在尝试了所有解决方案之后，我会推荐 Angular UI 团队实现的解决方案 3，它避免了我遇到的许多奇怪的小问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-18T08:24:10.197

我为快捷方式提供了服务。

看起来像：

```
angular.module('myApp.services.shortcuts', [])
  .factory('Shortcuts', function($rootScope) {
     var service = {};
     service.trigger = function(keycode, items, element) {
       // write the shortcuts logic here...
     }

     return service;
}) 
```

我将它注入控制器：

```
angular.module('myApp.controllers.mainCtrl', [])
  .controller('mainCtrl', function($scope, $element, $document, Shortcuts) {
   // whatever blah blah

   $document.on('keydown', function(){
     // skip if it focused in input tag  
     if(event.target.tagName !== "INPUT") {
        Shortcuts.trigger(event.which, $scope.items, $element);
     }
   })
}) 
```

它可以工作，但您可能会注意到我将 $element 和 $document 注入到控制器中。

这是一种不好的控制器做法，并且违反了“永远不要访问控制器中的 $element”约定。

我应该把它放入指令中，然后使用 'ngKeydown' 和 $event 来触发服务。

但我认为服务很好，我会尽快返工控制器。

* * *

**更新：**

似乎“ng-keydown”仅适用于输入标签。

所以我只写了一个指令并注入$document：

```
angular.module('myApp.controllers.mainCtrl', [])
  .directive('keyboard', function($scope, $document, Shortcuts) {
   // whatever blah blah
   return {
     link: function(scope, element, attrs) {
       scope.items = ....;// something not important

       $document.on('keydown', function(){
         // skip if it focused in input tag  
         if(event.target.tagName !== "INPUT") {
           Shortcuts.trigger(event.which, scope.items, element);
         }
       })
     }
   }
  }) 
```

它更好。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-20T13:52:42.650

从 ng-newsletter.com 后面的人那里查看这个[例子；](https://github.com/fullstackio/ng2048/blob/master/app/scripts/keyboard/keyboard.js)查看他们关于创建 2048 游戏[的教程，它有一些使用键盘事件服务的不错的代码。](http://www.ng-newsletter.com/posts/building-2048-in-angularjs.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-24T14:17:13.990

下面让您在控制器中编写所有快捷方式逻辑，该指令将处理其他所有事情。

**指示**

```
.directive('shortcuts', ['$document', '$rootScope', function($document, $rootScope) {
    $rootScope.shortcuts = [];

    $document.on('keydown', function(e) {
        // Skip if it focused in input tag.
        if (event.target.tagName !== "INPUT") {
            $rootScope.shortcuts.forEach(function(eventHandler) {
                // Skip if it focused in input tag.
                if (event.target.tagName !== 'INPUT' && eventHandler)
                    eventHandler(e.originalEvent, e)
            });
        }
    })

    return {
        restrict: 'A',
        scope: {
            'shortcuts': '&'
        },
        link: function(scope, element, attrs) {
            $rootScope.shortcuts.push(scope.shortcuts());
        }
    };
}]) 
```

**控制器**

```
 $scope.keyUp = function(key) {
        // H.
        if (72 == key.keyCode)
            $scope.toggleHelp();
    }; 
```

**html**

```
<div shortcuts="keyUp">
    <!-- Stuff -->
</div> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-01T16:02:42.610

你可以试试这个库，它使管理热键变得非常容易，当你浏览应用程序时它会自动绑定和取消绑定键

[角度热键](http://chieffancypants.github.io/angular-hotkeys/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-02-29T23:08:13.120

我不知道这是否是一种真正的角度方式，但我做了什么

```
$(document).on('keydown', function(e) {
    $('.button[data-key=' + String.fromCharCode(e.which) + ']').click();
});

<div class="button" data-key="1" ng-click="clickHandler($event)">
    ButtonLabel         
</div> 
```

# android - 广播接收器如何工作？

> ID：15044500
> 
> 赞同：1
> 
> 时间：2013-02-23T19:13:54.200
> 
> 标签：android, broadcastreceiver

我是 Android 新手，想知道它是如何工作的。具体来说，每个广播接收器是否在单独的线程中运行？

如果不是这样，假设一个计算密集型任务正在接收器之外同时在一个单独的应用程序中进行，则正在为接收器发送广播。那么，当密集型任务结束时，接收方是否有某种队列来管理传入的请求？还是它忽略了请求？

更具体地说，我正在编写一个将数据发送到服务器、获取响应并监控电池寿命的应用程序。我对广播接收器监控电池寿命在它发送关于电池电量变化的意图的那一刻执行有点怀疑。

感谢您提前输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:16:26.467

> 具体来说，每个广播接收器是否在单独的线程中运行？

No.`onReceive()`总是在进程的主应用程序线程上调用。

> 那么，当密集型任务结束时，接收方是否有某种队列来管理传入的请求？

您的“计算密集型任务”不应在主应用程序线程上运行，因此不应干扰及时接收广播。

# joomla - joomla前端HTTP错误500（索引页显示白页）

> ID：15044505
> 
> 赞同：0
> 
> 时间：2013-02-23T19:14:12.563
> 
> 标签：joomla, indexing, frontend

我的 joomla 2.5.4 前端出现问题，即使服务器 php 版本是 5.4，它也总是显示一个 wie 页面，但后台仍在运行。它突然发生，问题不是开发人员只是负责解决这个问题！因此，如果有人知道发生了什么以及如何解决此问题，请访问该网站的链接：[http](http://www.worldsafaritravel.com/) ://www.worldsafaritravel.com/是否有人可以提供帮助？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:55:43.820

尝试重命名 .htaccess 文件（如果您看到主页，请在配置中禁用 sef）。所以你可以看看它是否是一个与访问相关的问题。

否则，请查看错误日志，并在继续进行时进行备份。

一种盲目的尝试可能是安装最新版本的 joomla 2.5.9 [http://joomlacode.org/gf/download/frsrelease/17967/78437/Joomla_2.5.9-Stable-Update_Package.zip](http://joomlacode.org/gf/download/frsrelease/17967/78437/Joomla_2.5.9-Stable-Update_Package.zip)的更新文件， 只需将它们复制过来安装，这只是一个疯狂的猜测，您会发现不查看错误日志就不可能找到解决方案。

保留原始文件的副本，您不知道它们是否已更改。

# android - Android 共享首选项保存高分和解锁

> ID：15044514
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:14:49.817
> 
> 标签：android, sharedpreferences

我有 27 个角色希望玩家通过击败分数来解锁，例如，如果他的分数大于 200，他会解锁角色 #1。我很难做到这一点。

我有一个包含其编号的字符类，解锁它所需的分数，以及一个检查他是否已解锁的布尔值。但是当涉及到储蓄时，我不能这样做。

主游戏循环在文件中`GameScreen`。它有一个`points`计算分数的值。

当`GameState`更改为`PlayerDead`我要检查是否有新角色解锁，以及是否已击败高分以节省积分。

请帮忙，我已经为此苦苦挣扎了一个多星期，但我找不到一个好的教程，`SharedPrefs`因为它们都适用于基于 GUI 的活动，它保存了您输入的姓名和姓氏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:29:52.337

如果您需要 sharedPrefs 我可以帮助您。

我可以给出一些示例代码。

或者你可以发送你的代码和错误，如果你得到一个，我们会更新它。

但是 sharedPrefs 是个好主意吗？如果用户进入应用程序设置并清除您的应用程序的数据，所有数据都将丢失。

为什么不尝试创建一个 sqlite 数据库，将其保存到 assets 目录并使用它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:38:37.313

这实际上很简单，您使用 SharedPreferences 来存储键值对。你可以打电话

```
SharedPreferences mPrefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

然后从 GameScreen 定义一个常量：

```
public static final String KEY_SCORE = "score"; 
```

用作保存的关键。

为了实际保存，您需要一个编辑器：

```
SharedPreferences.Editor mEditor = mPrefs.edit();
//save data now, mPlayerScore is the score you keep track of
//if it's another type call putString(), etc
mEditor.putInt(KEY_SCORE, mPlayerScore);
//if that is the only thing you want for noe
//close and commit
mEditor.commit(); 
```

为了检索保存的分数，在您的 onCreate() 期间，您可以执行以下操作：

```
public void getUserProgress() {
SharedPreferences mPrefs = PreferenceManager.getDefaultSharedPreferences(this);
//no need for an editor when retrieving
mPlayerScore = mPrefs.getInt(KEY_SCORE, 0);
//second value passed was the default score 
//if no score was found
} 
```

为了检查是否有新角色被解锁，可以在每局游戏结束后调用如下代码：

```
private void checkForUserUnlocks() {
if (mPlayerScore >= MyUnlockableCharacter.SCORE_NEEDED_TO_UNLOCK)
   MyUnlockableCharacter.isUnlocked = true;
//and same for other unlockabld characters
} 
```

还有其他方法可以访问 SharedPreferences，如果您需要更多信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:47:27.100

使用以下代码从 SharedPreference 存储和检索分数。

```
public static void saveScore(Context context, int score){
    SharedPreferences sharedPreferences = context.getSharedPreferences("YOUR_PACKAGE_NAME", Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPreferences.edit();
    editor.putInt("SCORE", value);
    editor.commit();
}

public static int loadScore(Context context){
    SharedPreferences sharedPreferences = context.getSharedPreferences("YOUR_PACKAGE_NAME", Context.MODE_PRIVATE);
    int score = sharedPreferences.getInt("SCORE", 0);
    return score;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T20:02:05.430

阅读样本；

```
public int Read() {
        SharedPreferences mSharedPrefs = getSharedPreferences("FileName",
                MODE_PRIVATE);
        SharedPreferences.Editor mPrefsEditor = mSharedPrefs.edit();
        int mCounter = mSharedPrefs.getInt("Counter", 0);
        return mCounter;
    } 
```

写样本；

```
public void Write() {
        SharedPreferences mSharedPrefs = getSharedPreferences("FileName",
                MODE_PRIVATE);
        SharedPreferences.Editor mPrefsEditor = mSharedPrefs.edit();
        mPrefsEditor.putInt("Counter", 15);
        mPrefsEditor.commit();
    } 
```

# jquery - 为什么 jQuery UI 不隐藏带有隐藏父元素的元素？

> ID：15044516
> 
> 赞同：2
> 
> 时间：2013-02-23T19:15:10.197
> 
> 标签：jquery, jquery-ui

我一直在开发单页应用程序，并注意到我的下拉菜单有时会在它们被隐藏时保持打开状态。我调查了为什么会发生这种情况并发现如果父元素被隐藏，使用扩展`hide`函数的 jQuery UI 隐藏元素是毫无价值的。

这个[小提琴](http://jsfiddle.net/drulia/BtwJJ/)示例说明了我的意思，只需尝试单击`Hide`&`Show`按钮，然后单击`Show parent1`并尝试在此处隐藏元素。您会注意到状态指示器会立即更新，但是一旦您返回，`parent2`您会看到该元素仍然可见。

我发现使用`hide`不带参数或仅传递毫秒的 jQuery，它确实可以正常工作，并且一旦我使用 jQuery UI 参数更新它就会停止工作，所以我认为这是 jQuery UI 而不是 jQuery 本身的问题。

所以我的问题是为什么 jQuery UI 以这种方式工作，是它假设的工作方式还是它是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:45:47.587

我认为这是它应该工作的方式。在这种情况下，当您返回`parent2`该行时`$('#parent2').show();`，默认情况下它也会显示所有子元素。那是对`show()`里面的所有元素进行迭代`parent2`。虽然这看起来很麻烦，但在这个[JSFiddle](http://jsfiddle.net/ajo4you/BtwJJ/6/)中有一种解决方法，它是你的修改版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T20:00:32.587

这是 jQuery UI 中的一个错误，在 1.10.2 中得到了修复。

这是错误报告票的链接 [http://bugs.jqueryui.com/ticket/9120](http://bugs.jqueryui.com/ticket/9120)

# javascript - Javascript 或 Python - 我如何判断是白天还是黑夜？

> ID：15044521
> 
> 赞同：22
> 
> 时间：2013-02-23T19:15:20.150
> 
> 标签：javascript, python, geolocation, timezone

**知道如何根据用户的时间和位置确定当前是晚上/白天还是日出/黎明？**

我还没有发现可以在客户端或后端使用的任何有用的东西。

让它变得棘手的是小时不一定定义它是白天还是黑夜，这在很大程度上取决于年、月、日、小时和地理坐标。

* * *

为了澄清......模仿这样的事情。

![在此处输入图像描述](../Images/6fa8f6d82beedc7a03eb634c657283a1.png)

* * *

**一种近似这一点的方法也将非常有用。**

* * *

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T19:25:17.260

**Python 3 用户注意：**我刚刚使用 Python 3.8.6 尝试了以下代码，它也适用于该版本。我必须将`print`语句转换为`print()`函数调用，但仅此而已。

我注意到`tzinfo`类的示例实现与 Python 2 文档中的不同，但是使用[最新文档中引用的](https://docs.python.org/3/library/datetime.html#tzinfo-objects)[tzinfo_example.py](https://docs.python.org/3/_downloads/6b45dc135219d1404be49d606589a11d/tzinfo_examples.py)文件中的示例`tzinfo`类工作得很好（但旧的 2.x 版本也是如此）。

[您可以从此处](https://pastebin.com/2kqjZbM3)`sunriseset.py`下载下面显示的文件的 Python 3 版本。

* * *

你可以像我一样使用这个公共领域的[Sun.py](http://web.archive.org/web/20130120173224/http://www.kortis.to/radix/python/code/Sun.py)模块来计算太阳相对于地球位置的位置。（***警告：***它包含制表符并假设制表符每 8 个字符。）它已经很老了，但多年来一直对我很好。我对其进行了一些表面上的修改，以使其与 Python 2.7 保持同步，例如将其中的几个类设为新样式，但在大多数情况下它没有改变。

这是我创建的一个模块，称为`sunriseset.py`，它展示了如何使用它来计算给定地理坐标和时区的特定位置的日出和日落时间。被引用的`timezone`模块是模块的[对象](http://docs.python.org/2/library/datetime.html?highlight=tzinfo#tzinfo-objects)[`tzinfo`](http://docs.python.org/2/library/datetime.html?highlight=tzinfo#datetime.tzinfo)文档中描述的抽象基类的实现。`datetime`[`tzinfo`](http://docs.python.org/2/library/datetime.html?highlight=tzinfo#tzinfo-objects)

```
# -*- coding: iso-8859-1 -*-
import datetime
import timezone  # concrete tzinfo subclass based on the Python docs
import math
from Sun import Sun

__all__ = ['getsuninfo', 'Place']

class Place(object):
    def __init__(self, name, coords, tz=timezone.Pacific):
        self.name = name        # string
        self.coords = coords    # tuple (E/W long, N/S lat)
        self.tz = tz            # tzinfo constant

def _hoursmins(hours):
    """Convert floating point decimal time in hours to integer hrs,mins"""
    frac,h = math.modf(hours)
    m = round(frac*60, 0)
    if m == 60: # rounded up to next hour
        h += 1; m = 0
    return int(h),int(m)

def _ymd(date):
    """Return y,m,d from datetime object as tuple"""
    return date.timetuple()[:3]

def getsuninfo(location, date=None):
    """Return local datetime of sunrise, sunset, and length of day in hrs,mins)"""
    if date == None:
        querydate = datetime.date.today()
    else: # date given should be datetime instance
        querydate = date

    args = _ymd(querydate) + location.coords
    utcrise, utcset = Sun().sunRiseSet(*args)
    daylength = Sun().dayLength(*args)
    hrs,mins = _hoursmins(daylength)

    risehour, risemin = _hoursmins(utcrise)
    sethour, setmin   = _hoursmins(utcset)

    # convert times to timedelta values (ie from midnight utc of the date)
    midnight = datetime.datetime(tzinfo=timezone.utc, *_ymd(querydate))
    deltarise = datetime.timedelta(hours=risehour, minutes=risemin)
    utcdatetimerise = midnight+deltarise
    deltaset = datetime.timedelta(hours=sethour, minutes=setmin)
    utcdatetimeset  = midnight+deltaset

    # convert results from UTC time to local time of location
    localrise = utcdatetimerise.astimezone(location.tz)
    localset  = utcdatetimeset.astimezone(location.tz)

    return localrise, localset, hrs, mins

if __name__ == "__main__":
    import datetime, timezone

    def unittest(location, testdate):
        risetime, settime, hrs, mins = getsuninfo(location, testdate)

        print "Location:", location.name
        print "Date:", testdate.strftime("%a %x")
        print risetime.strftime("Sunrise %I:%M %p"), settime.strftime("- Sunset %I:%M %p (%Z)")
        print "daylight: %d:%02d" % (hrs,mins)
        print

    place = Place("My House", (-121.990278, 47.204444), timezone.Pacific)

    # test dates just before and after DST transitions
    print "pre 2007"
    print "========="
    unittest(place, datetime.date(2006, 4, 1))
    unittest(place, datetime.date(2006, 4, 2))
    unittest(place, datetime.date(2006, 10, 28))
    unittest(place, datetime.date(2006, 10, 29))

    print "2007"
    print "========="
    unittest(place, datetime.date(2007, 3, 10))
    unittest(place, datetime.date(2007, 3, 11))
    unittest(place, datetime.date(2007, 11, 3))
    unittest(place, datetime.date(2007, 11, 4)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-23T19:31:47.123

美国海军天文台提供了计算日出和日落的算法的简明描述，可在此处获得：

[http://edwilliams.org/sunrise_sunset_algorithm.htm](http://edwilliams.org/sunrise_sunset_algorithm.htm)

除了提供日期和位置外，您还需要选择天顶角（太阳将被视为“升起”或“落下”的天顶角）- 链接的页面有多个选项。

* * *

**更新**

由于链接页面不再可用，我在下面引用其文本。请注意，其中包含的公式采用类似伪代码的形式，而不是 JavaScript。

```
Source:
    Almanac for Computers, 1990
    published by Nautical Almanac Office
    United States Naval Observatory
    Washington, DC 20392

Inputs:
    day, month, year:      date of sunrise/sunset
    latitude, longitude:   location for sunrise/sunset
    zenith:                Sun's zenith for sunrise/sunset
      offical      = 90 degrees 50'
      civil        = 96 degrees
      nautical     = 102 degrees
      astronomical = 108 degrees

    NOTE: longitude is positive for East and negative for West
        NOTE: the algorithm assumes the use of a calculator with the
        trig functions in "degree" (rather than "radian") mode. Most
        programming languages assume radian arguments, requiring back
        and forth convertions. The factor is 180/pi. So, for instance,
        the equation RA = atan(0.91764 * tan(L)) would be coded as RA
        = (180/pi)*atan(0.91764 * tan((pi/180)*L)) to give a degree
        answer with a degree input for L.

1\. first calculate the day of the year

    N1 = floor(275 * month / 9)
    N2 = floor((month + 9) / 12)
    N3 = (1 + floor((year - 4 * floor(year / 4) + 2) / 3))
    N = N1 - (N2 * N3) + day - 30

2\. convert the longitude to hour value and calculate an approximate time

    lngHour = longitude / 15

    if rising time is desired:
      t = N + ((6 - lngHour) / 24)
    if setting time is desired:
      t = N + ((18 - lngHour) / 24)

3\. calculate the Sun's mean anomaly

    M = (0.9856 * t) - 3.289

4\. calculate the Sun's true longitude

    L = M + (1.916 * sin(M)) + (0.020 * sin(2 * M)) + 282.634
    NOTE: L potentially needs to be adjusted into the range [0,360) by adding/subtracting 360

5a. calculate the Sun's right ascension

    RA = atan(0.91764 * tan(L))
    NOTE: RA potentially needs to be adjusted into the range [0,360) by adding/subtracting 360

5b. right ascension value needs to be in the same quadrant as L

    Lquadrant  = (floor( L/90)) * 90
    RAquadrant = (floor(RA/90)) * 90
    RA = RA + (Lquadrant - RAquadrant)

5c. right ascension value needs to be converted into hours

    RA = RA / 15

6\. calculate the Sun's declination

    sinDec = 0.39782 * sin(L)
    cosDec = cos(asin(sinDec))

7a. calculate the Sun's local hour angle

    cosH = (cos(zenith) - (sinDec * sin(latitude))) / (cosDec * cos(latitude))

    if (cosH >  1) 
      the sun never rises on this location (on the specified date)
    if (cosH < -1)
      the sun never sets on this location (on the specified date)

7b. finish calculating H and convert into hours

    if if rising time is desired:
      H = 360 - acos(cosH)
    if setting time is desired:
      H = acos(cosH)

    H = H / 15

8\. calculate local mean time of rising/setting

    T = H + RA - (0.06571 * t) - 6.622

9\. adjust back to UTC

    UT = T - lngHour
    NOTE: UT potentially needs to be adjusted into the range [0,24) by adding/subtracting 24

10\. convert UT value to local time zone of latitude/longitude

    localT = UT + localOffset 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-06T18:56:24.400

**[PyEphem](http://rhodesmill.org/pyephem/index.html)**可用于计算下一次日出和日落的时间。基于[我发现的一篇博客文章](http://scienceoss.com/calculate-sunrise-and-sunset-with-pyephem/)和[rise-set 的文档](http://rhodesmill.org/pyephem/rise-set.html)，您的问题可以通过以下方式解决。假设我是您的用户，我的位置是[德国奥尔登堡 (Oldb)](http://en.wikipedia.org/wiki/Oldenburg)。

```
import ephem

user = ephem.Observer()
user.lat = '53.143889'    # See wikipedia.org/Oldenburg
user.lon = '8.213889'     # See wikipedia.org/Oldenburg
user.elevation = 4        # See wikipedia.org/Oldenburg
user.temp = 20            # current air temperature gathered manually
user.pressure = 1019.5    # current air pressure gathered manually

next_sunrise_datetime = user.next_rising(ephem.Sun()).datetime()
next_sunset_datetime = user.next_setting(ephem.Sun()).datetime()

# If it is daytime, we will see a sunset sooner than a sunrise.
it_is_day = next_sunset_datetime < next_sunrise_datetime
print("It's day." if it_is_day else "It's night.")

# If it is nighttime, we will see a sunrise sooner than a sunset.
it_is_night = next_sunrise_datetime < next_sunset_datetime
print("It's night." if it_is_night else "It's day.") 
```

## 笔记

*   出于某种原因`lat`，`lon`需要是字符串，但如果它们是浮点数，ephem 不会抱怨。
*   为获得最佳结果，您可能需要获取当前气温和气压。

## 先决条件

这应该至少适用于 Python 2.7 (with `pip-2.7 install pyephem`) 和 Python 3.2 (with `pip-3.2 install ephem`)。

确保在系统上运行网络时间协议客户端。例如在 Debian Linux 上：

```
$ sudo apt-get install ntp
$ sudo /etc/init.d/ntp start 
```

确保在您的系统上设置了正确的时区。例如在 Debian Linux 上：

```
$ sudo dpkg-reconfigure tzdata 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-21T12:30:55.460

您可以使用包含所有关于日落和日出的精确数据的祈祷 api，然后通过用户本地化将它们与实际时间进行比较，[Api Link](https://api.pray.zone/v2/times/today.json?longitude=39.81666564941406&latitude=21.416667938232425&elevation=333)

您可以使用此功能仅通过经度和纬度来确定是白天还是黑夜

**代码**

```
from timezonefinder import TimezoneFinder
import requests
from datetime import datetime, timezone
import pytz

def TimeEstimation(lat,lng):
    '''function to check DAY/NIGHT for a particular localisation'''
    obj = TimezoneFinder()
    result = obj.timezone_at(lng=lng, lat=lat)
    timezone =  pytz.timezone(result)
    hour = str(datetime.now(timezone).hour)
    minute = str(datetime.now(timezone).minute)

    actual_time = datetime.strptime(hour+":"+minute,'%H:%M')

    #asking salat api to get sunset and sunrise time based on longitude and latitude

    response = requests.get("https://api.pray.zone/v2/times/today.json?longitude="+str(lng)+"&latitude="+str(lat)+"&elevation=0")
    api_data = response.json()
    sunset = api_data.get("results").get("datetime")[0].get("times").get("Sunset")
    sunset=datetime.strptime(sunset,'%H:%M')

    sunrise = api_data.get("results").get("datetime")[0].get("times").get("Imsak")
    sunrise=datetime.strptime(sunrise,'%H:%M')

    if actual_time >= sunset or actual_time <= sunrise:
        print("is night")
        return(False)

    else:
        print("is day")
        return(True) 
```

# java - 你能解释一下为什么这段代码会引发异常吗？

> ID：15044522
> 
> 赞同：0
> 
> 时间：2013-02-23T19:15:20.737
> 
> 标签：java

我想尝试使用对象本机方法 wait() 和 notify() 而不是 Condition 变量，但这会引发 IllegalMonitorStateException ...您能解释一下如何使用它吗？

```
package monitor;

public class MyMonitor {

private long threadID=0;

Object okToWrite = new Object();
Object okToRead = new Object();

synchronized public void insertID() throws InterruptedException {
    if (this.threadID != 0) {
            okToWrite.wait();
    }

    this.threadID = Thread.currentThread().getId();
    okToRead.notify();

}

synchronized public long getID() throws InterruptedException {
    long res;

    if (this.threadID == 0) {
        okToRead.wait();
    }

    System.out.println(this.threadID);
    res = this.threadID;
    this.threadID = 0;
    okToWrite.notify();

    return res;

}

} 
```

我需要更多的对象锁吗？

更新：Ad Neil 建议，有必要在调用 wait 或 notify 之前对对象进行同步……我们开始吧：

```
package monitor;

public class MyMonitor {

private long threadID=0;

Object okToWrite = new Object();
Object okToRead = new Object();

public void insertID() throws InterruptedException {
    if (this.threadID != 0) {
        synchronized(okToWrite) {
            okToWrite.wait();
        }
    }

    this.threadID = Thread.currentThread().getId();
    synchronized(okToRead) {
        okToRead.notify();
    }

}

public long getID() throws InterruptedException {
    long res;

    if (this.threadID == 0) {
        synchronized(okToRead) {
            okToRead.wait();
        }
    }

    System.out.println(this.threadID);
    res = this.threadID;
    this.threadID = 0;
    synchronized(okToWrite) {
        okToWrite.notify();
    }

    return res;

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:42:36.233

您可以通过同步您想要等待或通知的对象来使您的代码工作，但我只会同步监视器对象上的所有内容：

```
package monitor;

public class MyMonitor {
    private long threadID = 0;

    synchronized public void insertID() throws InterruptedException {
        while (this.threadID != 0) {
            wait();
        }

        this.threadID = Thread.currentThread().getId();
        notify();
    }

    synchronized public long getID() throws InterruptedException {
        while (this.threadID == 0) {
            wait();
        }

        long res = this.threadID;
        this.threadID = 0;
        notify();

        return res;
    }
} 
```

# r - 用 rpart 在 R 中绘制决策树

> ID：15044526
> 
> 赞同：5
> 
> 时间：2013-02-23T19:15:49.510
> 
> 标签：r, decision-tree

我正在做一个项目，我需要能够根据我已导入 R 的数据集制作一些决策树。使用 rpart 包，我希望能够创建一对决策树，一个使用基尼分割标准，另一个使用熵分割标准。如果可能的话，我还希望能够调整最大树深度。有人知道怎么做这个吗？我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T20:08:58.423

根据[此处](http://stat.ethz.ch/R-manual/R-patched/library/rpart/html/rpart.html)的R手册，`rpart()`可以使用参数设置使用gini或信息（即熵）拆分：

```
parms = list(split = "gini")) 
```

或者

```
parms = list(split = "information")) 
```

... 分别。

您还可以为`rpart.control`（参见[此处](http://stat.ethz.ch/R-manual/R-patched/library/rpart/html/rpart.control.html)）添加参数，包括`maxdepth`, 默认为`30`.

# excel - 宏在 range().resize().insert 上退出

> ID：15044533
> 
> 赞同：2
> 
> 时间：2013-02-23T19:16:32.287
> 
> 标签：excel, vba

我对 vba 宏比较陌生，并且已经学会了解决问题，但不是很擅长调试或解决问题。

我有这个正在退出的宏：

.Range("B" & y_lst).Resize(34, 10).Insert Shift:=xlDown

该宏适用于 2 个工作簿。'wscflow' 是全局声明的非活动打开工作簿 'wbsource' 上的工作表。Fluid_Results 是活动工作簿中的例程，是另一个模块。'wsactive' 是宏访问的工作表，并在调用 Read_Complex 的例程中设置。'Read_Pipe' 是这个模块中的一个例程。

谁能告诉我为什么这条线会导致宏退出？

我应该澄清一下；该行执行，但随后立即退出，它不执行下一行。

问候，亚瑟

```
Sub Read_Complex()
   Dim x_lst As Integer, y_lst As Integer, z_lst As  Integer, i As Integer
   wscflow.Range("T7").Value = 10
   Application.Run ("'" & wbsource.Name & "'!Set_Rng")
   x_lst = wscflow.Range("S7").Value
   z_lst = wsactive.Range("B" & Rows.Count).End(xlUp).Row - 23
   z_lst = ((z_lst - 24) + 330) / 34
   If wscflow.Range("O" & x_lst).Value = "Total:" Then
      x_lst = x_lst - 2
   End If
   Call Fluid_Results
   If x_lst = 10 Then
      MsgBox ("Only one pipe," & vbCr & _
           "please use Single Pipe Flow")
   Else
  For x = 10 To x_lst
     y_lst = wsactive.Range("B" & Rows.Count).End(xlUp).Row - 22
     wscflow.Range("T7").Value = x
     Application.Run ("'" & wbsource.Name & "'!Set_Rng")
     Application.Run ("'" & wbsource.Name & "'!Rev_Copy")
     Application.Run ("'" & wbsource.Name & "'!Fwd_Copy")
     With wsactive
        If x < 12 Then
           y_lst = y_lst - 1
           Call Read_Pipe
           If .Name = "Series_Pipe_Flow" Then
              .Range("F" & y_lst).Offset(8, 0).Formula = "=F14+F48"
              For i = 17 To 20
                 .Range("F" & y_lst).Offset(i, 0).Formula = "=F" & i + 7 & "+F" & i + 41
              Next i
              For i = 22 To 23
                 .Range("F" & y_lst).Offset(i, 0).Formula = "=F" & i + 11 & "+F" & i + 45
              Next i
           ElseIf .Name = "Parallel_Pipe_Flow" Then
              .Range("F" & y_lst).Offset(15, 0).Formula = "=F22+F56"
              .Range("F" & y_lst).Offset(19, 0).Formula = "=F27+F61"
              .Range("F" & y_lst).Offset(22, 0).Formula = "=F33+F67"
              .Range("F" & y_lst).Offset(23, 0).Formula = "=F34+F68"
           End If
        Else
           If x_lst = z_lst Then
              y_lst = y_lst - 1
           Else
              .Range("B35:K68").Copy
              .Range("B" & y_lst).Resize(34, 10).Insert Shift:=xlDown
'                  .Range("B" & y_lst).PasteSpecial xlPasteAll
              y_lst = y_lst + 33
              Application.CutCopyMode = False
           End If
           Call Read_Pipe
           If .Name = "Series_Pipe_Flow" Then
              .Range("F" & y_lst).Offset(8, 0).Value = .Range("F" & y_lst).Offset(8, 0).Value _
                                                           + .Range("F" & y_lst).Offset(-20, 0).Value
              .Range("F" & y_lst).Offset(11, 0).Value = .Range("F" & y_lst).Offset(-17, 0).Value
              .Range("F" & y_lst).Offset(14, 0).Value = .Range("F" & y_lst).Offset(-14, 0).Value
              For i = 17 To 20
                 .Range("F" & y_lst).Offset(i, 0).Value = .Range("F" & y_lst).Offset(i, 0).Value _
                                                           + .Range("F" & y_lst).Offset(i - 27, 0).Value
              Next i
              For i = 22 To 23
                 .Range("F" & y_lst).Offset(i, 0).Value = .Range("F" & y_lst).Offset(i, 0).Value _
                                                           + .Range("F" & y_lst).Offset(i - 23, 0).Value
              Next i
           ElseIf .Name = "Parallel_Pipe_Flow" Then
              .Range("F" & y_lst).Offset(15, 0).Value = .Range("F" & y_lst).Offset(15, 0).Value _
                                                           + .Range("F" & y_lst).Offset(-12, 0).Value
              .Range("F" & y_lst).Offset(19, 0).Value = .Range("F" & y_lst).Offset(19, 0).Value _
                                                           + .Range("F" & y_lst).Offset(-7, 0).Value
              .Range("F" & y_lst).Offset(22, 0).Value = .Range("F" & y_lst).Offset(22, 0).Value _
                                                           + .Range("F" & y_lst).Offset(-1, 0).Value
              .Range("F" & y_lst).Offset(23, 0).Value = .Range("F" & y_lst).Offset(23, 0).Value _
                                                           + .Range("F" & y_lst).Offset(0, 0).Value
           End If
        End If
     End With
  Next x
   End If
   z_lst = wsactive.Range("B" & Rows.Count).End(xlUp).Row - 23
   z_lst = ((z_lst - 24) + 330) / 34
   For i = 0 To z_lst - x_lst + 1
  wsactive.Range("B" & y_lst + 1).Offset(-i * 34, 0).PageBreak = xlPageBreakManual
   Next i
   wscflow.Range("T7").ClearContents
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:48:21.993

我认为您的副本和插入之间可能存在大小差异。resize 函数有 34，但下一个将变量增加 33。我认为 34 需要为 33。

如果您将变量打印到调试窗口，您将能够看到它们是什么，例如`debug.print "y_1st = " & y_1st`.

同样对于视觉添加 a`.Range("B" & y_lst).Resize(34, 10).Select`并在其后的下一行中断代码以查看它在 excel 中是否具有正确的大小。

# curl - 如何通过 github API 使用 ssh 身份验证？

> ID：15044534
> 
> 赞同：34
> 
> 时间：2013-02-23T19:16:33.203
> 
> 标签：curl, github, ssh, github-api

通过命令行（例如，curl 等）访问 GitHub API 时，是否有某种方法可以使用基于 ssh 的身份验证？

[FWIW，我尝试了以下许多变体（改变我指定公共 ssh 密钥文件的方式），但在每种情况下，我仍然被提示输入密码：]

```
% curl --pubkey ~/.ssh/id_rsa.pub --user yrstruly https://api.github.com/user/repos 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T00:36:22.370

如果您使用的是 ssh，那么您永远不会以 ' `yrstruly`' 身份登录。您将始终以“git”的身份连接。
您的公钥足以让 GitHub 将您识别为“ `yrstruly`”。
而且由于您使用的是 https 地址，而不是 ssh 地址，因此该`--pubkey`选项可能会被忽略。

一个有效的 ssh 地址应该是: `ssh://git@api.github.com`，而且我认为 Github 不会为其 api 提供这种访问权限。

该[`curl --user`选项](http://curl.haxx.se/docs/manpage.html#-u)仅对 https 地址是必需的，如“[从 Private Repo 下载 Git 归档 tarball 时遇到问题](https://stackoverflow.com/a/10053425/6309)”：

```
curl -sL --user "${username}:${password}" https://github.com... 
```

# java - 迭代链表的区别

> ID：15044540
> 
> 赞同：2
> 
> 时间：2013-02-23T19:17:50.613
> 
> 标签：java

我知道使用 LinkedList 迭代

```
for(int i = 0; i < list.size(); i++){
  Item item = list.get(i);
} 
```

获取单个对象的性能很差，因为每次调用 .get(i) 都会从列表的开头迭代到 i。

正确的方法是使用迭代器。到目前为止，一切都很好。

但是这种风格呢：

```
for(Item item : list){
  // item is already here
} 
```

这是否具有与使用迭代器相同的性能？这在内部如何运作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:20:49.077

> 这是否具有与使用迭代器相同的性能？

**是的。**两种变体都生成相同的字节码。以下字节码是从 for-each 循环生成的，但在循环中使用迭代器时，它看起来完全相同：

```
for(Object o : list) {
}

  44: aload_1
  45: invokevirtual #30                 // Method java/util/LinkedList.iterator:()Ljava/util/Iterator;
  48: astore_3
  49: goto          59
  52: aload_3
  53: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
  58: astore_2
  59: aload_3
  60: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
  65: ifne          52 
```

> 这在内部如何运作？

在非数组的情况下，for-each 循环在内部使用迭代器。请参阅上面的字节码 - 调用所有方法，在使用迭代器时也会调用这些方法。

另请参阅[For-Each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)和[Java 'for each' 循环如何工作？](https://stackoverflow.com/questions/85190/how-does-the-java-for-each-loop-work)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T19:20:49.717

`foreach`循环使用接口`Iterable`。它调用`iterator()`并使用迭代器进行迭代。对数组使用特殊处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:23:21.073

一个区别是当您不想更改`size`列表时使用每个循环。因为它使用`iterators`which 成为列表`invalidate`之后`resize`。而在正常的 for 循环中不是这种情况。但是每次`standard loop`调用`size`函数都会降低效率`for each`。要获得两者相同的性能，您需要将`constant`10,15,..etc 等值置于`standard loop`.

*   For Each -- 只读模式

*   标准——读写两者

具体到问题：标准 for 循环确实效率低下，因为每次`get`从头开始调用时都必须遍历列表。这比调用`size`

# javascript - 将显示属性分配给变量

> ID：15044545
> 
> 赞同：1
> 
> 时间：2013-02-23T19:18:15.323
> 
> 标签：javascript, function, variables

我正在尝试优化和缩短我的功能，我使用`obj.style.display = 'block';`了很多次。我可以将其分配给我可以重用的变量吗？

考虑这个例子

```
document.getElementById('example').visible; 
```

`.visible`的变量在哪里`.style.display = 'block';`。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:24:25.070

你可以尝试这样的事情：

```
function setDisplay (obj, display) {
   obj.style.display = display;
}

setDisplay(document.getElementById('test'), 'block'); 
```

如果你想让它看起来更好，你也可以尝试这样的事情：

```
function getById(id) {
   var obj = document.getElementById(id);
   obj.display = function (display) {
       this.style.display = display;
   };

   return obj;
}

var test = getById('test');
test.display('block'); 
```

最后，您可以使用一个框架来简化 DOM 操作，如果您打算做很多事情的话，比如 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:20:33.117

你可以定义一个函数

```
function set_visible(obj, visibility) {
    obj.style.display = visibility;
} 
```

无法将属性链存储在变量中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-23T19:22:11.073

如果你不反对 js 库，为什么不使用 jQuery？这样你就可以真正简化： -

```
$("#example").show(); 
```

# c - 使用 Linux 和 C 编程控制射频遥控器

> ID：15044547
> 
> 赞同：0
> 
> 时间：2013-02-23T19:18:37.307
> 
> 标签：c, linux, usb

我设计了一个电子电路如下：-

* * *

**组件：-** Tx/Rx = A-434 Dec/Enc= HT12E/HT12D IC 发射器上的 4 个按钮和接收器上的 4 个 LED

* * *

**工作： -** 很简单。在发射器侧：四个按钮连接到编码器。编码器连接到发射器。在接收端：四个 LED 连接到解码器。解码器连接到接收器。当按下发射器侧的按钮时，接收器上相应的 LED 会亮起。令人惊讶的是它完美无缺。

* * *

**问题：-** 我只是想删除这四个手动输入按钮并用 Linux 中的 C 程序替换它。**如何利用 USB 接口控制发送器电路的输入？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:26:02.877

You could look into how homebrewed IR receivers/senders work as they're somewhat similar to what you want. Some of them are:

*   [http://www.huitsing.nl/irftdi/](http://www.huitsing.nl/irftdi/)
*   [http://dicks.home.xs4all.nl/avr/usbtiny/](http://dicks.home.xs4all.nl/avr/usbtiny/)
*   [http://www.usbuirt.com/](http://www.usbuirt.com/)

If you are really not into microcontrollers and you barely know how to program C and connect to a USB device, the [Velleman K8055](http://www.velleman.eu/products/view/?country=be&lang=en&id=351346) may be an option. This may be a bit overkill but it's good for learning basic IO stuff. You basically plug it into the USB port and use it as a digital switch board which you can program in C. The last time I checked, [libk8055](http://libk8055.sourceforge.net/) worked pretty good.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:20:08.940

要么使用便宜的微控制器板，例如便宜的 arduino 克隆。或者使用 USB 到并口转换器。

# cfengine - cfengine 3.4 - cygwin 构建说明

> ID：15044548
> 
> 赞同：0
> 
> 时间：2013-02-23T19:18:37.197
> 
> 标签：cfengine

我想在 cygwin 上构建 cfengine 3.4。

看来这应该是可能的 - 这是启用 b​​uild: [link](https://github.com/cfengine/core/pull/179)的补丁。

是否有在 cygwin 上编译 cfengine 3.4 的分步构建说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:49:01.663

安装 cygwin（我设置 1.7.17）：

*   制作
*   海合会
*   柔性
*   野牛
*   openssl-开发
*   libpcre-开发

[从这里](http://fallabs.com/qdbm/qdbm-1.8.78.tar.gz)下载 qdbm ，然后：

```
tar xvzf qdbm-1.8.78.tar.gz
cd qdbm-1.8.78
./configure
make
install
cp /usr/local/lib/libqdbm.* /usr/lib 
```

[从这里](http://cfengine.com/source-code/download?file=cfengine-3.4.3.tar.gz)下载 cfengine ，然后：

```
tar xvzf cfengine-3.4.3.tar.gz
cd cfengine-3.4.3
./configure --with-qdbm
make
make install 
```

现在我只需要弄清楚如何使用cfengine！

# python - Flask Mongolab 错误：TypeError：“NoneType”类型的参数不可迭代

> ID：15044555
> 
> 赞同：1
> 
> 时间：2013-02-23T19:19:26.007
> 
> 标签：python, flask, mongoengine, foreman, mlab

当我在我的 Flask 应用程序上执行“工头启动”时，我遇到了这个问题。

```
(venv)Macbook-err:Example ld$ foreman start
14:01:50 web.1  | started with pid 1441
14:01:50 web.1  | Traceback (most recent call last):
14:01:50 web.1  |   File "app.py", line 26, in <module>
14:01:50 web.1  |     connect('mydata', host=os.environ.get('MONGOLAB_URI'))
14:01:50 web.1  |   File "/Users/ld/Dropbox/Semester4/Example/venv/lib/python2.7/site-packages/mongoengine/connection.py", line 160, in connect
14:01:50 web.1  |     register_connection(alias, db, **kwargs)
14:01:50 web.1  |   File "/Users/ld/Dropbox/Semester4/Example/venv/lib/python2.7/site-packages/mongoengine/connection.py", line 54, in register_connection
14:01:50 web.1  |     if "://" in host:
14:01:50 web.1  | TypeError: argument of type 'NoneType' is not iterable
14:01:50 web.1  | exited with code 1
14:01:50 system | sending SIGTERM to all processes
SIGTERM received 
```

在我的 app.py （第 26 行）中，我有：

```
connect('mydata', host=os.environ.get('MONGOLAB_URI'))
app.logger.debug("Connecting to MongoLabs") 
```

我这样`heroku config | grep MONGOLAB_URI > .env`做了 .env 文件应该是合法的。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:43:11.577

`heroku config | grep MONGOLAB_URI > .env`表单中的输出，`MONGOLAB_URI: mong...`应将其更改为`MONGOLAB_URI=mongo....`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:48:05.803

如果你用`heroku config | grep MONGOLAB_URI >> .env`两个箭头代替它有帮助吗？追加输出？

回复：[https ://github.com/johnschimmel/itp-dwd-flask-s3-upload](https://github.com/johnschimmel/itp-dwd-flask-s3-upload)

# html - 调整 nivo 滑块框的大小

> ID：15044557
> 
> 赞同：0
> 
> 时间：2013-02-23T19:19:32.710
> 
> 标签：html, css

我刚得到一个模板，但我不知道如何重新调整整个滑块的大小以使其与我的图像一起变小。我可以重新调整图像的大小。我希望整个周围的盒子更小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:50:25.340

在 CSS 中找到它的宽度定义并以这种方式进行更改。

# jquery - 将点击绑定到重复的 div ID

> ID：15044558
> 
> 赞同：1
> 
> 时间：2013-02-23T19:19:39.003
> 
> 标签：jquery

我正在尝试创建一个`div`弹出库类型的东西。但我的方法有问题。

我有一些链接的缩略图，它们链接到大图像。这些图像中的每一个看起来都像这样

```
<a href="www.google.com" id="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/3/0/3/3030/rogan-josh-salt-free-thumbnail-fw232.jpg">
</a>
<br />
<a href="www.yahoo.com" id="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/2/9/8/2986/italian-herbs-salt-free-thumbnail-fw232.jpg">
</a> 
```

如您所见，每个都有相同的“galImage”ID。我不想为每个创建单独的 ID，因为有时可能有 2 个图像，有时可能有 20 个。所以只是想简单地检查一下#galImage get 是否被点击，我会运行一些 jquery。

我的问题是，只有第一次出现 #galImage 会触发 jquery，其他所有实例都会失败。

这是上面示例的 JSfiddle。[http://jsfiddle.net/MH6eJ/1/](http://jsfiddle.net/MH6eJ/1/) 点击图片1，它可以工作。但是图 2 失败了。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:21:33.920

使用类而不是 ID，重复 ID 不是一个好主意。

使用您解决问题的类：[jsfiddle](http://jsfiddle.net/MH6eJ/1/)

```
<a href="www.google.com" class="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/3/0/3/3030/rogan-josh-salt-free-thumbnail-fw232.jpg">
</a>
    <br />
<a href="www.yahoo.com" class="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/2/9/8/2986/italian-herbs-salt-free-thumbnail-fw232.jpg">
</a>

$('.galImage').click(function(e){
        e.preventDefault();
        alert($(this).attr("href"));
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:21:43.607

所有 ID 必须是唯一的。如果你想重复一个 ID，你应该使用一个类来代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:21:55.463

元素的 ID 必须是唯一的。所以你不能有两个具有相同 id 的标签。

```
<a href="www.google.com" class="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/3/0/3/3030/rogan-josh-salt-free-thumbnail-fw232.jpg">
</a>
    <br />
<a href="www.yahoo.com" class="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/2/9/8/2986/italian-herbs-salt-free-thumbnail-fw232.jpg">
</a> 
```

JS：

```
$('.galImage').click(function(e){
    e.preventDefault();
    alert($(this).attr("href"));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T19:22:40.280

您需要改用类，因为 ID 必须是唯一的。

例如

```
<a href="www.google.com" id="Google" class="galImage">
   <img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/3/0/3/3030/rogan-josh-salt-free-thumbnail-fw232.jpg">
</a>
<br />
<a href="www.yahoo.com" id="Yahoo" class="galImage">
   <img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/2/9/8/2986/italian-herbs-salt-free-thumbnail-fw232.jpg">
</a> 
```

你的 jQuery 会是

```
$('.galImage').click(function(e){
        e.preventDefault();
        alert($(this).attr("href"));
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T19:23:46.757

根据[文档](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)，您`id`在页面中确实是独一无二的。如果您想拥有更多具有该样式的 HTML 元素（例如），请使用`class`.

> ```
> id = name [CS]: 
> ```
> 
> 此属性为元素分配名称。此名称在文档中必须是唯一的。
> 
> ```
> class = cdata-list [CS]: 
> ```
> 
> 该属性将一个类名或一组类名分配给一个元素。可以为任意数量的元素分配相同的类名或名称。多个类名必须用空格字符分隔。

```
<a href="www.google.com" class="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/3/0/3/3030/rogan-josh-salt-free-thumbnail-fw232.jpg">
</a>
<br />
<a href="www.yahoo.com" class="galImage">
<img src="http://www.savoryspiceshop.com/content/mercury_modules/cart/items/2/9/8/2986/italian-herbs-salt-free-thumbnail-fw232.jpg">
</a> 
```

然后，当您使用 jQuery 选择您使用的类时`$(".galImage")`。

```
$('.galImage').click(function(e){
    e.preventDefault();
    alert($(this).attr("href"));
}); 
```

更新了你的[jsFiddle](http://jsfiddle.net/MH6eJ/2/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T19:30:04.900

ID应该是唯一的。您可以使用类而不是 ID 并绑定到类名。

在您的小提琴中添加`class=galImage`到每个 Href，然后在您的 jQuery 绑定中，使用`.galImage`而不是`#galImage`. 然后 jQuery 应该绑定到类名为的所有元素`galImage`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-23T19:54:41.740

当我们必须附加具有多个元素的事件/样式时，我们必须使用类。Id 表示每个元素的唯一值。

# multithreading - 不清楚多线程进程的进程状态

> ID：15044559
> 
> 赞同：0
> 
> 时间：2013-02-23T19:20:00.433
> 
> 标签：multithreading, process, operating-system

在多线程系统中，是否可以让一个进程的一个线程等待 I/O，而同一个进程的另一个线程做一些与该进程相关的其他工作？

如果可能的话，关于进程的状态可以说什么？是运行状态还是阻塞状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:46:02.783

能说什么呢？进程的等待下一条消息线程正在等待。进程的最后一条消息正在处理中。

即，您根据线程的状态来描述进程的状态。

# tomcat - 在 Eclipse 中导入后无法运行 Web 应用程序

> ID：15044560
> 
> 赞同：0
> 
> 时间：2013-02-23T19:20:06.297
> 
> 标签：tomcat, servlets

我在办公室处理这个 Web 应用程序，我也想在家做一些事情，所以我在我的家用电脑上设置了环境。

我正在使用 Tomcat 7.0.37，并在 Eclipse 中使用“导入现有项目”导入了项目。但是一旦我想运行它，我就会收到这个错误：

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/IRSimWebApp]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/IRSimWebApp]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.IllegalArgumentException: The servlets named [addTreeServlet] and [org.sven.addTreeServlet] are both mapped to the url-pattern [/addTreeServlet] which is not permitted
    at org.apache.catalina.deploy.WebXml.addServletMapping(WebXml.java:335)
    at org.apache.catalina.startup.ContextConfig.processAnnotationWebServlet(ContextConfig.java:2412)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2125)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2080)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2073)
    at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2073)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1300)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Feb 23, 2013 2:06:31 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Feb 23, 2013 2:06:31 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more 
```

我也在办公室设置了环境，就像 3 个月前一样。所以我很确定我现在在家里做了同样的步骤。

我在这里也注意到了这个异常：

```
Caused by: java.lang.IllegalArgumentException: The servlets named [addTreeServlet] and [org.sven.addTreeServlet] are both mapped to the url-pattern [/addTreeServlet] which is not permitted 
```

但我不知道为什么现在会有两个 servlet。架构中只有一个，web.xml 中也只有一个映射

```
<servlet>
    <servlet-name>addTreeServlet</servlet-name>
    <servlet-class>addTreeServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>addTreeServlet</servlet-name>
    <url-pattern>/addTreeServlet</url-pattern>
  </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:31:36.090

你的 web.xml 映射应该是这样的

```
<servlet>
    <servlet-name>addTreeServlet</servlet-name>
    <servlet-class>org.sven.addTreeServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>addTreeServlet</servlet-name>
    <url-pattern>/addTreeServlet</url-pattern>
  </servlet-mapping> 
```

# c# - C# DateTimePicker 参考问题

> ID：15044562
> 
> 赞同：0
> 
> 时间：2013-02-23T19:20:14.187
> 
> 标签：c#

我有`DateTimePicker (dtpDate)`一个 Windows GUI 和另一个`DateTimePicker (trackDate)`在代码后面定义的。

出于某种原因，当我使用`trackDate = dtpDate;`我对 trackDate 所做的任何更改时，也会影响 dtpDate。

为什么会这样？我不认为它应该继续引用 dtpDate。

我试过 `DateTimePicker trackDate`了`DateTimePicker trackDate = new DateTimeTracker();`

欢迎任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:23:18.787

> 出于某种原因，当我使用`trackDate = dtpDate;`我所做的任何更改时也会`trackDate`影响`dtpDate`。

嗯，是。那是因为两个变量现在都引用同一个对象，因为`DateTimePicker`是一个类。

作为一个更简单的例子：

```
StringBuilder x = new StringBuilder();
StringBuilder y = x;
x.Append("Foo");
Console.WriteLine(y); // Prints Foo 
```

了解这一点非常*重要。*它会影响您在 C# 中所做的一切。阅读我关于[值类型和引用类型](http://pobox.com/~skeet/csharp/references.html)的文章以获取更多详细信息。

如果您只想将*值*从一个复制`DateTimePicker`到另一个，请使用：

```
trackDate.Value = dtpDate.Value; 
```

如果您想做其他事情，您需要向我们提供该信息...

# python - 使用 Python 解析网页的搜索结果

> ID：15044563
> 
> 赞同：4
> 
> 时间：2013-02-23T19:20:16.150
> 
> 标签：python, parsing, web, beautifulsoup, urllib

我最近开始在 python 中开发一个程序，它允许用户轻松地结合任何动词。为此，我使用 urllib 模块打开相应的共轭网页。例如，动词“beber”会有网页：

> “ [http://www.spanishdict.com/conjugate/beber](http://www.spanishdict.com/conjugate/beber) ”

要打开页面，我使用以下 python 代码：

```
source = urllib.urlopen("http://wwww.spanishdict.com/conjugate/beber").read() 
```

此来源确实包含我要解析的信息。但是，当我像这样用它制作一个 BeautifulSoup 对象时：

```
soup = BeautifulSoup(source) 
```

我似乎丢失了我想要解析的所有信息。制作 BeautifulSoup 对象时丢失的信息通常如下所示：

```
<tr>
      <td class="verb-pronoun-row">
    yo      </td>
                        <td class="">
      bebo        </td>
                          <td class="">
      bebí        </td>
                          <td class="">
      bebía        </td>
                          <td class="">
      bebería        </td>
                          <td class="">
      beberé        </td>
        </tr> 
```

我究竟做错了什么？一般来说，我不是 Python 或 Web Parsing 的专业人士，所以这可能是一个简单的问题。

这是我的完整代码（我使用“++++++”来区分两者）：

```
import urllib
from bs4 import BeautifulSoup

source = urllib.urlopen("http://www.spanishdict.com/conjugate/beber").read()
soup = BeautifulSoup(source)

print source
print "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
print str(soup) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:50:52.187

当我编写解析器时，我遇到了 bs 的问题，在某些情况下，由于 html 损坏，它没有发现找到 lxml，反之亦然。尝试使用[lxml.html](http://lxml.de/lxmlhtml.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:35:10.897

您的问题可能与编码有关。我认为这`bs4`适用，`utf-8`并且您的机器上默认设置了不同的编码（包含西班牙字母的编码）。所以 urllib 以您的默认编码请求页面，没关系，所以数据在源中，它甚至可以打印出来，但是当您将它传递给`utf-8`基础时`bs4`，字符会丢失。尝试寻找设置不同的编码`bs4`，如果可能，将其设置为默认值。不过这只是猜测，请放心。

我建议使用`regular expressions`. 我已经将它们用于我所有的网络爬虫。这是否对您有用取决于网站的动态性。但是，即使您使用`bs4`. 您只需`re`手动编写所有内容，然后让它发挥作用。`bs4`在查找所需信息时，您必须使用类似的方式。

# c# - 如何在 C# 中高效地为对象分配唯一 ID

> ID：15044572
> 
> 赞同：1
> 
> 时间：2013-02-23T19:21:45.113
> 
> 标签：c#, guid, thread-local, unique-id, interlocked-increment

我正在开发一个 C# 库，它将创建大量小对象作为正常操作的一部分（想想编译器中的 AST 节点）。我想以不会影响性能的方式为每个实例分配一个唯一标识符（在程序中是唯一的，而不是全局唯一的）。对象是不可变的，并且可以跨线程共享，因此 id 需要在线程之间是唯一的。

以下是我正在考虑的一些选项：

1.  使用静态 int 或 long，并通过调用获取每个新 id`Interlocked.Increment()`
2.  用于`Guid.NewGuid()`生成 id
3.  使用带有`[ThreadStatic]`属性的静态 int 或 long 字段，然后从当前线程的`ManagedThreadId`属性和线程本地计数器中的下一个值生成字符串 id。

其中一个会比其他的性能更好吗？有一个更好的方法吗？

谢谢！

编辑：
我运行了一个快速基准测试并得到以下结果：

1.  0.19 秒（int 与 long 基本相同）
2.  1.1 秒
3.  3.5 秒

这似乎强烈指向使用`Interlocked`. 但是，`Interlocked`在多线程场景中是否存在减速的风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:41:14.803

`Interlocked.Increment`通过确保调用`++`作为原子操作发生来工作。这意味着另一个线程无法获取中间变量，这可能使用`++`.

唯一的性能问题是需要同步存储变量的内存，请注意，此性能成本应该可以忽略不计，正如您的测试所示。

# c++ - 如何将单词的第一个字母大写

> ID：15044574
> 
> 赞同：-4
> 
> 时间：2013-02-23T19:21:56.690
> 
> 标签：c++, c++11

这是我的输入 txt 文件

```
i like apple and i love to eat apple.are you like to eat apple. 
```

我想将此文件输出到另一个文本文件中，其中必须在句号后插入新行，并且每个单词必须大写，就像我们在 php 或 python 中使用 Toupper 一样。我该怎么做？

这是我所做的编码：

```
inputFile.get(ch); 
while (!inputFile.eof())  
{
    outputFile.put(toupper(ch)); 
    inputFile.get(ch);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:02:07.910

更多 C++ 方式：

```
#include <fstream>
#include <iterator>
#include <algorithm>

class WordUpper {
public:
    WordUpper() : m_wasLetter( false ) {}
    char operator()( char c );

private:
    bool m_wasLetter;
};

char WordUpper::operator()( char c )
{
    if( isalpha( c ) ) {
       if( !m_wasLetter ) c = toupper( c );
       m_wasLetter = true;
    } else
       m_wasLetter = false;

    return c;
}

int main()
{
    std::ifstream in( "foo.txt" );
    std::ofstream out( "out.txt" );
    std::transform( std::istreambuf_iterator<char>( in ), std::istreambuf_iterator<char>(),
                    std::ostreambuf_iterator<char>( out ),
                    WordUpper() );
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:37:35.730

到

*   将每个单词的首字母大写
*   在后面插入新行`.`

做：

```
bool shouldCapitalize = true;
while (!inputFile.eof())  
{
    if (ch >= 'a' && ch <= 'z')
    {
        if (shouldCapitalize)
            outputFile.put(toupper(ch));
        else
            outputFile.put(ch);
        shouldCapitalize = false;
    }
    else
    {
        if (ch == ' ') // before start of word
            shouldCapitalize = true;
        outputFile.put(ch);
    }
    if (ch == '.')
    {
        shouldCapitalize = true;
        outputFile.put('\n');
    }
    inputFile.get(ch);
} 
```

# sql - 拆分和分析数据

> ID：15044576
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:21:57.443
> 
> 标签：sql, tsql

我有一个字段*有时*包含如下字符串：`2/23/2013 12:25:55~45`

我需要在 ~ 处拆分字符串，并确定 ~ 的左侧是否是有效的日期时间值，而 ~ 的右侧是有效的整数。基本上我想要返回的是一个真/假，这些条件是否正确。

请记住，该字段可以包含空值，可以包含任何其他类型的数据，并且可以包含多个波浪号。在所有情况下，我都需要返回 false。我需要返回 true 的唯一时间是当字段包含日期/时间值、单个波浪号和整数时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:19:32.877

在 SQL Server 中，您可以执行以下操作：

```
select (case when col like '%~%'
             then (case when isdate(left(col, charindex('~', col) - 1)) = 1 and
                             isnumeric(substring(col, charindex('~', col)+1, 1000)) = 1 and col not like '%~%.%' and col not like '%~%e%'
                        then 1
                        else 0
                   end)
             else 0
       end) as IsFunkyFormat, substring(col, charindex('~', col)+1, 1000), left(col, charindex('~', col) - 1) 
```

嵌套大小写是为了防止在找不到分隔符时出错。这些`not like`表达式旨在排除非整数的数字格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:34:45.017

这个问题比看起来更棘手，因为它很容易出错，或者以这样一种方式编写它，它现在适用于您给定的数据集，但无法适用于其他数据集。

如果这是您存储在数据库中的数据，我强烈建议您了解数据库规范化。规范化的一个原则是您只在列中存储一个值。在这种情况下，您将日期时间和整数值存储在同一列中。将数据存储在多列中会好得多。

话虽如此，我知道有时您会获得一些需要导入数据库的原始数据。很多时候，我们无法控制我们得到的原始数据，所以我们必须凑合使用 SQL 体操。在这种特殊情况下，有几种不同类型的后空翻很有用。

1.  确定字符串中的 ~ 字符数。
2.  在波浪号上拆分数据。
3.  确保其中一个值是日期时间
4.  确保另一个值是整数。

4 个项目中只有 1 个内置于 SQL Server。有一个名为 IsDate 的函数，它接受一个字符串参数并返回一个位，该位指示字符串表示的日期是否可以转换为日期。

要确定字符串中 ~ 的数量，诀窍是确定带波浪号的字符串的长度，以及不带波浪号的字符串的长度。我们可以通过这样做来确定哪些行包含单个波浪号：

```
When Len(Data) = Len(Replace(Data, '~', '')) + 1 
```

另一个需要解决的棘手问题是确定一个字符串是否代表一个整数。有多种方法可以做到这一点，但我最喜欢的方法是将硬编码值连接到您的数据，然后测试数字。例如，IsNumeric 函数将为字符串 1e4 返回 true，因为 e 表示科学计数法，而 1e4 可以解释为 1000。因此，如果您这样做：

```
IsNumeric(Data + 'e0') 
```

对于科学记数法，这将返回 false，因为数据将类似于 1e4，它连接到“e0”以获得不是数字的“1e4e0”。同样，我们可以将 .0 连接到字符串以检查小数。如果您的数据是 45.2（这是数字）并且您将 .0 连接到它，您会得到 '45.2.0' 这不是数字。您还可以在测试中添加“-”以检查正数。“-20”是数字，但“-”+“-20”（即“--20”）不是数字。

```
Select  YourColumnHere, 
        Len(Replace(YourColumnHere, '~', '')) + 1,
        Case When Len(YourColumnHere) = Len(Replace(YourColumnHere, '~', '')) + 1
             Then 
                    Case When IsDate(Left(YourColumnHere, CharIndex('~', YourColumnHere)-1)) = 1
                         Then 
                                Case When Right(YourColumnHere, Len(YourColumnHere)-CharIndex('~', YourColumnHere)) > ''
                                     Then IsNumeric('-' + Right(YourColumnHere, Len(YourColumnHere)-CharIndex('~', YourColumnHere)) + '.0e0')
                                     Else 0 
                                     End
                         Else 0
                         End
             Else 0
             End
From    YourTableNameHere 
```

# pandas - Pandas -- asof() by last on DataFrame

> ID：15044577
> 
> 赞同：1
> 
> 时间：2013-02-23T19:21:59.487
> 
> 标签：pandas, cython

说，我们建立一个df：

```
import pandas as pd
import random as randy
import numpy as np
df_size = int(1e6)
df = pd.DataFrame({'first':       randy.sample(np.repeat([np.NaN,'Cat','Dog','Bear','Fish'],df_size),df_size),
               'second': randy.sample(np.repeat([np.NaN,np.NaN,'Cat','Dog'],df_size),df_size),
                'value': range(df_size)},
                index=randy.sample(pd.date_range('2013-02-01 09:00:00.000000',periods=1e6,freq='U'),df_size)).sort_index() 
```

它看起来像这样：

```
 first   second    value
2013-02-01 09:00:00          Fish    Cat     95409
2013-02-01 09:00:00.000001   Dog     Dog     323089
2013-02-01 09:00:00.000002   Fish    Cat     785925
2013-02-01 09:00:00.000003   Dog     Cat     866171
2013-02-01 09:00:00.000004   nan     nan     665702
2013-02-01 09:00:00.000005   Cat     nan     104257
2013-02-01 09:00:00.000006   nan     nan     152926
2013-02-01 09:00:00.000007   Bear    Cat     707747 
```

我想要的是“第二”列中的每个值，我想要第一个的最后一个“值”。

```
 first   second   value  new_value
2013-02-01 09:00:00         Fish     Cat     95409    NaN
2013-02-01 09:00:00.000001   Dog     Dog     323089   323089
2013-02-01 09:00:00.000002   Fish    Cat     785925   NaN
2013-02-01 09:00:00.000003   Dog     Cat     866171   NaN
2013-02-01 09:00:00.000004   nan     nan     665702   NaN
2013-02-01 09:00:00.000005   Cat     nan     104257   NaN
2013-02-01 09:00:00.000006   nan     nan     152926   NaN
2013-02-01 09:00:00.000007   Bear    Cat     707747   104257 
```

也许，这不是绝对最好的例子，但在底部，当“第二”是“猫”时，我想要“第一”是“猫”时的最新值

真实的数据集有 1000 多个类别，因此遍历符号并执行 asof() 似乎非常昂贵。我从来没有在 Cython 中传递字符串的运气，但我想将符号映射到整数并做一个蛮力循环会起作用——我希望有更多的 Pythonic。（这仍然相当快）

一个参考，并且有些脆弱的 Cython hack 将是：

```
%%cython
import numpy as np
import sys
cimport cython
cimport numpy as np

ctypedef np.double_t DTYPE_t

def last_of(np.ndarray[DTYPE_t, ndim=1] some_values,np.ndarray[long, ndim=1] first_sym,np.ndarray[long, ndim=1] second_sym):
    cdef long val_len = some_values.shape[0], sym1_len = first_sym.shape[0], sym2_len = second_sym.shape[0], i = 0
    assert(sym1_len==sym2_len)
    assert(val_len==sym1_len)
    cdef int enum_space_size = max(first_sym)+1

    cdef np.ndarray[DTYPE_t, ndim=1] last_values = np.zeros(enum_space_size, dtype=np.double) * np.NaN
    cdef np.ndarray[DTYPE_t, ndim=1] res = np.zeros(val_len, dtype=np.double) * np.NaN
    for i in range(0,val_len):
        if first_sym[i]>=0:
            last_values[first_sym[i]] = some_values[i]
        if second_sym[i]<0 or second_sym[i]>=enum_space_size:
            res[i] = np.NaN
        else:
            res[i] = last_values[second_sym[i]]
    return res 
```

然后一些 dict 代替废话：

```
syms= unique(df['first'].values)
enum_dict = dict(zip(syms,range(0,len(syms))))
enum_dict['nan'] = -1
df['enum_first'] = df['first'].replace(enum_dict)
df['enum_second'] = df['second'].replace(enum_dict)
df['last_value'] = last_of(df.value.values*1.0,df.enum_first.values.astype(int64),df.enum_second.values.astype(int64)) 
```

这有一个问题，如果“第二”列有任何不在第一列的值，那么你就有问题了。（我不确定解决这个问题的快速方法......假设你在第二个中添加了“驴”）

每 1000 万行的 cythonic 愚蠢版本对于整个混乱来说是 ~ 21 秒，但对于 cython 部分只有 ~2 秒。（这可以做得更快）

@HYRY——我认为这是一个非常可靠的解决方案；在具有 1000 万行的 DF 上，在我的笔记本电脑上，这对我来说大约需要 30 秒。

鉴于我不知道当第二个列表除了非常昂贵的 isin 之外没有第一个条目时的简单处理方法，我认为 HYRY 的 python 版本非常好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:49:00.373

如何使用 dict 保留每个类别的最后一个值，并迭代 DataFrame 中的所有行：

```
import pandas as pd
import random as randy
import numpy as np
np.random.seed(1)
df_size = int(1e2)
df = pd.DataFrame({'first':       randy.sample(np.repeat([None,'Cat','Dog','Bear','Fish'],df_size),df_size),
               'second': randy.sample(np.repeat([None,None,'Cat','Dog'],df_size),df_size),
                'value': range(df_size)},
                index=randy.sample(pd.date_range('2013-02-01 09:00:00.000000',periods=1e6,freq='U'),df_size)).sort_index()

last_values = {}
new_values = []
for row in df.itertuples():
    t, f, s, v = row    
    last_values[f] = v
    if s is None:
        new_values.append(None)
    else:
        new_values.append(last_values.get(s, None))
df["new_value"] = new_values 
```

结果是

```
 first second  value new_value
2013-02-01 09:00:00.010373   Cat   None     87      None
2013-02-01 09:00:00.013015   Cat    Dog     69      None
2013-02-01 09:00:00.024910  Fish    Cat      1        69
2013-02-01 09:00:00.025943   Cat   None     98      None
2013-02-01 09:00:00.041318  Fish    Dog     66      None
2013-02-01 09:00:00.057894  None   None     36      None
2013-02-01 09:00:00.059678  None   None     50      None
2013-02-01 09:00:00.067228  Bear   None     38      None
2013-02-01 09:00:00.095867  Bear    Cat     84        98
2013-02-01 09:00:00.096867   Dog    Cat     97        98
2013-02-01 09:00:00.101540   Dog    Dog     76        76
2013-02-01 09:00:00.106753   Dog   None     22      None
2013-02-01 09:00:00.138936  None   None      8      None
2013-02-01 09:00:00.139273  Bear    Cat      2        98
2013-02-01 09:00:00.143180  Fish   None     94      None
2013-02-01 09:00:00.184757  None    Cat     73        98
2013-02-01 09:00:00.193063  None   None      5      None
2013-02-01 09:00:00.231056  Fish    Cat     62        98
2013-02-01 09:00:00.237658  None   None     64      None
2013-02-01 09:00:00.240178  Bear    Dog     80        22 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T09:29:09.883

我知道的老问题，但这是一个避免任何 Python 循环的解决方案。第一步是获取`'value'`每个类别的时间序列。您可以通过取消堆叠来做到这一点：

```
first_values = df.dropna(subset=['first']).set_index('first', append=True).value.unstack()    
second_values = df.dropna(subset=['second']).set_index('second', append=True).value.unstack() 
```

请注意，这仅在列包含真`NaN`值而不是`'nan'`字符串时才有效（`df = df.replace('nan', np.nan)`如有必要，请做好准备）。

然后，您可以通过前向填充`first_values`、重新索引 like 、再次堆叠并使用原始对`second_values`索引到结果中来获得最后一个值：`'time', 'second'`

```
ix = pd.MultiIndex.from_arrays([df.index, df.second])
new_value = first_values.ffill().reindex_like(second_values).stack().reindex(ix)
df['new_value'] = new_value.values

In [1649]:    df
Out[1649]:
                           first    second  value   new_value
2013-02-01 09:00:00.000000  Fish    Cat     95409   NaN
2013-02-01 09:00:00.000001  Dog     Dog     323089  323089
2013-02-01 09:00:00.000002  Fish    Cat     785925  NaN
2013-02-01 09:00:00.000003  Dog     Cat     866171  NaN
2013-02-01 09:00:00.000004  NaN     NaN     665702  NaN
2013-02-01 09:00:00.000005  Cat     NaN     104257  NaN
2013-02-01 09:00:00.000006  NaN     NaN     152926  NaN
2013-02-01 09:00:00.000007  Bear    Cat     707747  104257 
```

# javascript - CoffeeScript 变量初始化：为什么？

> ID：15044579
> 
> 赞同：2
> 
> 时间：2013-02-23T19:22:02.877
> 
> 标签：javascript, variables, coffeescript

我一直在玩CoffeeScript，并使用[js2coffee](http://js2coffee.heroku.com/)进行实验。我注意到的一件事是 CoffeeScript 处理变量初始化的方式。这个咖啡脚本：

`string = 'word'`

编译成这个 JavaScript：

```
var string;
string = 'word'; 
```

`var string;`申报有什么好处？为什么不

`var string = 'word';`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T19:27:30.503

coffeescript 编译为 jslint-conform javascript，并将所有变量声明放在当前作用域/函数的顶部。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T19:26:13.833

优点是，作用域中使用的所有变量都可以在作用域的顶部一起声明`var`，然后使用/分配......

```
var myThing, myOtherThing;

myThing = "a good thing";

... etc ... 
```

# eclipse - 谁能告诉我肥皂绑定是什么意思？

> ID：15044581
> 
> 赞同：0
> 
> 时间：2013-02-23T19:22:27.750
> 
> 标签：eclipse, web-services, soap, binding, axis2

当我使用 Eclipse 创建 Web 服务时，会出现 3 种类型的绑定：SOAP12BINDING、HTTPBINDING 和 SOAP11BINDING 它们指的是什么？我是 Web 服务的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:29:37.333

它们指的是连接到 Web 服务的三种不同方式，SOAP 1.1、SOAP 1.2 和 XML over HTTP。

客户端将能够使用这三种协议中的任何一种连接到您的服务，并且服务器组件将使用适当的协议形成响应。

就您的服务器组件编码而言，客户端选择使用哪种协议可能不会对您产生影响。

# java - 如何使我的班级能够投射整数

> ID：15044585
> 
> 赞同：1
> 
> 时间：2013-02-23T19:22:46.767
> 
> 标签：java

我对如何将我的课程转换为`Integer`. 例子：

```
public class IntegerField extends Field {
    private Integer value;
    public IntegerField(Integer value) {
        super();
        this.value = value;
    }
    public int intValue() {
        return value;
    }
} 
```

我该怎么做：

```
IntegerField a = new IntegerField(8);
Integer b = (Integer) a; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:28:08.017

No. You can't define your own conversion operators in Java. However, it's simple to add a method:

```
public class IntegerField extends Field {
    private Integer value;
    public IntegerField(Integer value) {
        super();
        this.value = value;
    }

    public Integer toInteger() {
        return value;
    }
}

...

IntegerField a = new IntegerField(8);
Integer b = a.toInteger(); 
```

Why would you prefer a cast?

(Note that I've removed the `intValue` method which would throw an exception if `value` is null. The caller of `toInteger` can always convert to `int` if they *want* that behaviour.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:33:13.203

整数 b = (整数) a; --- 不正确，因为 value 是私有的，你必须写一个方法来获取 value，Integer b = a.intValue();

# android - 防止 edittextpreference 更新 inputtype 密码的摘要

> ID：15044595
> 
> 赞同：0
> 
> 时间：2013-02-23T19:23:22.943
> 
> 标签：android, android-preferences, edittextpreference

我想阻止用户查看在`edittextpreference`首选项摘要中输入的密码。我已按逻辑处理它以不更新摘要，如下所示：

```
 if (!preference.getKey().equals(EMAIL_PWD_KEY)
                        && !preference.getKey().equals(PASSCODE_KEY))
    {
        sBindPreferenceSummaryToValueListener.onPreferenceChange(preference,PreferenceManager.getDefaultSharedPreferences(preference.getContext())
                                                                                                  .getString(preference.getKey(),
                                                                                                             ""));
    } 
```

但是当我点击偏好的“确定”按钮时，摘要会更新。关于防止它更新的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:37:03.213

我找到了一种方法，方法是实现一个名为 EditTextPreferenceWithSummary 的类，它扩展了 EditTextPreference 并覆盖了一些方法......

```
public class EditTextPreferenceWithSummary extends EditTextPreference {

    public EditTextPreferenceWithSummary(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public EditTextPreferenceWithSummary(Context context) {
        super(context);
        init();
    }

   @Override
    protected View onCreateView(ViewGroup parent) {
        updateSummary();
        return super.onCreateView(parent);
    }

    public void updateSummary()
    {
        String value = "";
        int variation = (this.getEditText().getInputType() & InputType.TYPE_MASK_VARIATION);
        Boolean isPassword = ((variation  == InputType.TYPE_NUMBER_VARIATION_PASSWORD)
                            ||(variation  == InputType.TYPE_TEXT_VARIATION_PASSWORD)
                            ||(variation  == InputType.TYPE_TEXT_VARIATION_WEB_PASSWORD));

        if (isPassword)
        {
            value = this.getText().replaceAll(".", "*");
        }
        else
        {
            value = this.getText();
        }
        this.setSummary(value);
    }

    private void init() {
        setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
             @Override
             public boolean onPreferenceChange(Preference preference, Object newValue) {
                 EditTextPreferenceWithSummary pref = (EditTextPreferenceWithSummary) preference;
                 pref.updateSummary();
                 return true;
             }
        });
    }
} 
```

我的偏好 xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

    <PreferenceCategory
            android:title="@string/pref_header_database">
            <com.designit.api.preferences.EditTextPreferenceWithSummary
                    android:title="@string/field_database_server_ip"
                    android:defaultValue=""
                    android:summary="Set the IP adress of the server"
                    android:key="server_ip_address" />
            <com.designit.api.preferences.EditTextPreferenceWithSummary
                    android:title="@string/field_database_server_port"
                    android:defaultValue=""
                    android:inputType="number"
                    android:summary="Set the port of the server"
                    android:key="server_port" />
            <com.designit.api.preferences.EditTextPreferenceWithSummary
                    android:title="@string/field_database_name"
                    android:defaultValue=""
                    android:summary="Set the database name"
                    android:key="database_name" />
            <com.designit.api.preferences.EditTextPreferenceWithSummary
                    android:title="@string/field_database_user"
                    android:defaultValue=""
                    android:summary="Set the database user"
                    android:key="database_user" />
            <com.designit.api.preferences.EditTextPreferenceWithSummary
                    android:title="@string/field_database_password"
                    android:defaultValue=""
                    android:summary="Set the database password"
                    android:key="database_passwd" 
                    android:inputType="textPassword"/>
    </PreferenceCategory> 
```

希望这对您有所帮助。干杯。

# php - 如何让用户登录到cpanel或php或msql中的不同成员访问页面

> ID：15044599
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:24:18.270
> 
> 标签：php, singlestore

我是 php 脚本的新手。我创建了一个登录页面。但所有其他注册用户只能访问一个会员访问页面。我想制作一个脚本，允许成员使用他们的名字登录到他们不同的成员主页。请我需要分步指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:27:58.277

You need to create a site that uses sessions, then use the session information to provide the users with their own custom page.

[http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)

# java - Spring + Hibernate：我无法从表中删除记录

> ID：15044603
> 
> 赞同：4
> 
> 时间：2013-02-23T19:24:27.110
> 
> 标签：java, spring, hibernate, spring-mvc

我是 Spring 领域的新手，这次我正在研究如何将它与 Hibernate 集成以创建我的 DAO 对象，但我发现**DELETE**操作存在一些困难......

所以我有一个人表，我创建了这个实现我的 DAO 对象的具体类：

```
package org.andrea.myexample.HibernateOnSpring.dao;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.hibernate.Criteria;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.transaction.annotation.Transactional;

public class PersonDAOImpl implements PersonDAO {

private SessionFactory sessionFactory;

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}

// Metodo che inserisce un nuovo record nella tabella person
@Transactional(readOnly = false)
public void addPerson(Person p) {
    Session session = sessionFactory.openSession();
    session.save(p);
    session.close();
}

/*
 * Metodo che recupera un record, rappresentante una persona, avente uno
 * specifico id dalla tabella.
 * 
 * @param L'id univoco della persona
 */

public Person getById(int id) {
    Session session = sessionFactory.openSession();
    try {
        return (Person) session.get(Person.class, id);
    } finally {
        session.close();
    }
}

/*
 * Metodo che recupera la lista di tutti le persone rappresentanti dalle
 * righe della tabella person
 */
@SuppressWarnings("unchecked")
public List<Person> getPersonsList() {

    Session session = sessionFactory.openSession();
    try {

        Criteria criteria = session.createCriteria(Person.class);
        return criteria.list();

    } finally {
        session.close();
    }

}

/*
 * Metodo che elimina dalla tabella person la riga avente uno specifico id
 * 
 * @param l'id della persona da eliminare dalla tabella person
 */
public void delete(int id) {

    Session session = sessionFactory.openSession();
    try {
        Person personToDelete = getById(id);
        session.delete(personToDelete);

    } finally {
        session.close();
    }

}

} 
```

然后我创建了一个主类来测试我的 DAO 是如何工作的桌子。

这是我的测试课：

```
package org.andrea.myexample.HibernateOnSpring;

import java.util.List;

import org.andrea.myexample.HibernateOnSpring.dao.PersonDAO;
import org.andrea.myexample.HibernateOnSpring.dao.PersonDAOImpl;
import org.andrea.myexample.HibernateOnSpring.entity.Person;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App {

public static void main( String[] args ){

    ApplicationContext context = new ClassPathXmlApplicationContext("Beans.xml");
    System.out.println("Contesto recuperato: " + context);

    Person persona1 = new Person();

    persona1.setFirstname("Pippo");
    persona1.setLastname("Blabla");
    //persona1.setPid(1);

    System.out.println("Creato persona1: " + persona1);

    PersonDAO dao = (PersonDAO) context.getBean("personDAOImpl");

    System.out.println("Creato dao object: " + dao);

    dao.addPerson(persona1);

    System.out.println("persona1 salvata nel database");

    Person personaEstratta = dao.getById(persona1.getPid());

    System.out.println("Persona con id: " + personaEstratta.getPid() + " estratta dal DB");
    System.out.println("Dati persona estratta:");
    System.out.println("Nome: " + personaEstratta.getFirstname());
    System.out.println("Cognome: " + personaEstratta.getLastname());

    System.out.println("");

    // STAMPA LA LISTA DELLE PERSONE NELLA TABELL person:
    List<Person> listaPersone = dao.getPersonsList();
    System.out.println("Lista delle persone recuperata: " + listaPersone );

    // MOSTRA I DATI DI TUTTE LE PERSONE NELLA LISTA:
    for(int i=0; i<listaPersone.size(); i++){
        Person currentPerson = listaPersone.get(i);
        System.out.println("id: " + currentPerson.getPid()
                            + " nome: " + currentPerson.getFirstname()
                            + " cognome: " + currentPerson.getLastname());  
    }

    // ELIMINAZIONE DI UNA PERSONA DALLA TABELLA person:
    System.out.println("");
    System.out.println("ELIMINAZIONE DI UNA PERSONA DALLA TABELLA person:");

    // ELIMINA TUTTI I RECORD DALLA TABELLA persone:
    for(int i=0; i<listaPersone.size(); i++){
        dao.delete(listaPersone.get(i).getPid());
        System.out.println("Persona con id: " + i + " eliminata");
    }

    listaPersone = dao.getPersonsList();    // Lista vuota

    // MOSTRA I DATI DI TUTTE LE PERSONE NELLA LISTA:
    for(int i=0; i<listaPersone.size(); i++){
        Person currentPerson = listaPersone.get(i);
        System.out.println("id: " + currentPerson.getPid()
                                  + " nome: " + currentPerson.getFirstname()
                                  + " cognome: " + currentPerson.getLastname());    
    }

}
} 
```

在本课程结束时，我试图删除所有执行循环的表记录，该循环仅执行以下操作：

```
dao.delete(listaPersone.get(i).getPid()); 
```

但它不起作用，在我的表中所有记录仍然保持不变......

为什么？我的代码有什么问题？（我也不例外……）

这是我的 Person 类代码：

```
package org.andrea.myexample.HibernateOnSpring.entity;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="person")
public class Person {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int pid;

private String firstname;

private String lastname;

public int getPid() {
    return pid;
}

public void setPid(int pid) {
    this.pid = pid;
}

public String getFirstname() {
    return firstname;
}

public void setFirstname(String firstname) {
    this.firstname = firstname;
}

public String getLastname() {
    return lastname;
}

public void setLastname(String lastname) {
    this.lastname = lastname;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-10T02:58:38.993

我已经这样解决了这个问题：

```
@Override
public void deleteData(int id) {
    log.info("delete by id = "+id);
    Transaction tx=null;

    //open a session and begin the transaction with the database
    Session session = null;

    try {
        session = getSession();
        tx = session.beginTransaction();
        Person person = getPerson(id);
        session.delete(person);            
        tx.commit();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {

        if (!tx.wasCommitted()) {
           tx.rollback();
        }//not much doing but a good practice
        session.flush(); //this is where I think things will start working.
        session.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-06T00:11:12.937

你的删除方法看起来怎么样？是否包含@Transaction？这是一个例子：

```
@Transaction
public int deleteUser(String userName) {
    try {

    //open a session and begin the transaction with the database
    sessionFactory = HibernateUtil.getSessionFactory();
    Session session = sessionFactory.openSession();
    session.beginTransaction();

    //query the database
    Query query =  session.createQuery("delete from Users u where u.userName ='" +    userName +"'");
    int result = query.executeUpdate();
    session.close();

    return result;
} 
```

验证您在返回语句之前关闭会话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:41:55.177

从您的代码看来，保存有效，但删除无效。我假设会话与事务同步（在事务完成之前刷新会话）。放置方法应该有效`@Transactional`。`delete`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:19:07.260

我在删除方法上没有看到@Transactional？你喜欢吗

# asp.net - 剖析从 EF5 返回的列表

> ID：15044605
> 
> 赞同：0
> 
> 时间：2013-02-23T19:24:28.830
> 
> 标签：asp.net, entity-framework

我有一个显示公司股票价格数据的网页。我正在尝试向图表添加其他功能，例如移动平均线。我将数据绑定到图表如下。

```
 Dim stockprices = From c In ctx.stockprices_daily Select New With {c.date, c.high, c.low, c.open, c.last}
chtStockChart.DataSource = stockprices.ToList() 
```

数据库中的价格是十进制类型，日期，嗯，日期类型

我可以使用 for each 从返回的列表中创建一个仅包含日期和最后一个的列表，而不是重新查询这两个项目吗？从 EF 返回的对象上的 .ToList() 生成什么类型​​的列表？我可以为移动平均线构建数据系列，但我被困在使用哪种类型的列表上，即使我应该使用它或其他一些数据类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:54:41.350

> .ToList() 生成什么类型​​的列表

它生成具有属性等`IQueryable`的[匿名类型](http://msdn.microsoft.com/en-us/library/bb384767.aspx)。`date``high`

> 我可以使用一个 for each 创建一个仅包含日期和最后一个的列表

`stockprices`您可以通过例如重新查询

```
Dim movingAvg = From m In stockprices Select New With { m.date, m.last }
chtStockChart.DataSource = movingAvg.ToList() 
```

这创建了`IQueryable`另一种匿名类型的新的。您甚至会注意到，只对数据库执行了一个查询`Select`，`chtStockChart`而`ToList()`.

# php - Can I create values with PHP and expected them to be readable by JS?

> ID：15044613
> 
> 赞同：1
> 
> 时间：2013-02-23T19:25:19.560
> 
> 标签：php, javascript, html

I'm making a site for myself, and I'm trying to implement some javascript for instant calculations, but I'm having some issues:

1.  Is there any way I can avoid typing

    ```
    level_prices["3"]=3;
    level_prices["4"]=4; 
    ```

    ... etc. up to 90: in other words, is there any way I can do like I did in the PHP code and make it `create` this value until 90, which looks a lot cleaner?

2.  Why is this returning `$Undefined`? I suspect that it's not getting the value from the HTML form, but the code looks correct ...

Here is my code:

relevant HTML/PHP:

```
 <form action="" id="priceCalcForm" onsubmit="return false;">
  <table class="table">
   <tbody>

     <tr> <!-- first row, with css -->

        <td style="width:50%;">
            <select name="fromlevel" id="fromlevel" onchange="calculateTotal()" style="width:100%; text-align:center; font-weight:bold;">
                <option value="none" name="none">0</option>

                <?php 
                $i = 1;

                while ($i < 91) {
                    echo '
                    <option value=' . $i . ' name=' . $i . '>' . $i . '</option>';
                    $i++;
                }
                ?>  
            </select>
        </td>
       </tr>
   </tbody>
  </table>
 </form> 
```

Included JS:

```
var level_prices= new Array();
level_prices["None"]=0;
level_prices["1"]=1;
level_prices["2"]=2;

function getLevelPrice()
{
    var levelSetPrice=0;
    //Get a reference to the form id="cakeform"
    var theForm = document.forms["priceCalcForm"];
    //Get a reference to the select id="filling"
    var selectedLevel = theForm.elements["fromlevel"];

    //set cakeFilling Price equal to value user chose
    //For example filling_prices["Lemon".value] would be equal to 5
    levelSetPrice = level_prices[selectedLevel.value];

    //finally we return cakeFillingPrice
    return levelSetPrice;
}

function calculateTotal()
{
//Here we get the total price by calling our function
//Each function returns a number so by calling them we add the values they return     together
    var LevelPrice = getLevelPrice();

    var divobj = document.getElementById('totalPrice');
    divobj.style.display='block';
    divobj.innerHTML = "Total Price For the Leveling $"+LevelPrice;

}

function hideTotal()
{
    var divobj = document.getElementById('totalPrice');
    divobj.style.display='none';
} 
```

I consider myself decent with PHP, but its first time I am using JS.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:40:34.617

1）使用循环：

```
var level_prices = {}; // object literal not array!
level_prices['none'] = 0;
for(var i = 1; i <= 90; i++ ) {
   level_prices[i] = i;
} 
```

第一行也可以这样写（已经定义了非属性）：

```
var level_prices = {'none': 0}; 
```

2）level_prices 不是一个数组，它是一个对象文字（请参阅我的答案的第 1 部分）

在这里看到一个工作小提琴：http: [//jsfiddle.net/BkGxq/](http://jsfiddle.net/BkGxq/)

（另请注意，我从您的标记中删除了内联 onchange 处理程序并将其放入 javascript（在底部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:42:12.037

是的。PHP 中的任何变量（资源类型变量除外）都可以使用[`json_encode`](http://php.net/json-encode).

# excel - excel vba code to copy tabs to a new workbook based on tab name

> ID：15044615
> 
> 赞同：-2
> 
> 时间：2013-02-23T19:25:33.090
> 
> 标签：excel, vba

I am trying to create some VBA code to do the following:

1.  A specific folder contains multiple excel files and each tab has the name of a (let's say) city.

2.  An excel list defines to which country a city belongs. (column A = London, Paris, Boston, New-York and column B = U-K, France, U.S, U.S)

3.  I would like a code looping through the folder and creating an additional file per country regrouping all the cities (there is only one tab per city but there are multiple files)

So far, nothing I tried seems to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:03:40.243

这个问题非常广泛，但这个基本逻辑可能会有所帮助：

使用这篇文章来确定如何循环遍历目录： [指定要循环遍历 Excel/VBA 的附加目录](https://stackoverflow.com/questions/10303051/specify-additional-directory-to-loop-through-excel-vba/10303318#10303318)

此代码模板应该足以让您入门。使用它，改进您的问题，我们也许可以为您提供进一步的帮助。

```
Option Explicit

Sub CopySomeSheets()

    ' Loop through directory as in Question of this post
    Dim wb As Workbook
    Dim ws As Worksheet

    Dim cityNameList() As Variant
    Dim cityName As Variant

    ' Pseudocode, next line is a dummy to make example code run
    Set wb = ActiveWorkbook
    ' For Each wb In directory, as from post above
        For Each ws In wb.Worksheets
            For Each cityName In cityNameList

                ' Could do this as a loop for each country or think a bit more and produce a smarter iteration with range lookup/2d array or somethnig to better match the shape of your data
                cityNameList = Range("A1:A10") ' List of cities are in this range
                If InStr(ws.Name, cityName) Then
                    ' Do stuff, i.e. save workbook with required name
                End If

            Next cityName
        Next ws
    ' Next wb

End Sub 
```

# javascript - Set vertical position of HTML element

> ID：15044617
> 
> 赞同：1
> 
> 时间：2013-02-23T19:25:35.987
> 
> 标签：javascript, html

If I take out the variable counter and just set `document.getElementById("movee").style.top` equal to a number, it works fine. Combining the variable counter and that bit of code would theoretically get an image to move. It's not working for some reason though!

```
<html>
<style type="text/css">
    #movee
    {
        position:absolute;
    }
</style>

<script type="text/javascript">
    function goDown()
    {
        var counter=1; 
        while (counter<300)
        {
            document.getElementById("movee").style.top="counter";
            var counter=counter+1;
        }
    }
</script>

<input type="button" onclick="goDown()" value="Move!">
<img src="test.png" id="movee"></img>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:27:47.503

You're setting the top style property of #movee to the string "counter" not the value of the variable counter

```
document.getElementById("movee").style.top=counter+"px"; 
```

Also it seems you are trying to animate the element, your technique will not work as the update will occur only after your script finish running. I suggest looking into css transitions, or a library that does animations like jQuery(jQuery.animate).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:27:28.397

remove the quotes from "counter" and after that line do not use "var counter", just counter +=1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:28:41.413

Even if your code to set the top style was correct, your element wouldn't animate because the code doesn't return control to the browser during the loop. Instead it would appear to move all 300 pixels at once.

# c# - MSMQ Remote Private: UnsupportedFormatNameOperation after one use

> ID：15044624
> 
> 赞同：1
> 
> 时间：2013-02-23T19:26:18.603
> 
> 标签：c#, msmq

I am new to MSMQ and suspect I either have my queues configured wrong or programmatically (is that a word?)causing them to get hung up.

When everything starts I can send one message and that works wonderfully. I can see (ie via mmc on that machine) the message in the remote machine queue. I then go to access it and I get my UnsupportedFormatNameOperation error. If I try to send another message I get the same error in the send method that just worked a few seconds earlier.

What is even more frustrating is that my catch is **NOT** picking up the exception so I was unaware and looking elsewhere (read wasting time) till I explored the queue object in the debugger.

Now if I reset the Message Service on remote I lose my message in the queue and still get the same error. If I reboot same result.

On local (dev machine) if I reset the Message Service I still get the error. If I reboot something gets recycled and I can send exactly one message again.

Further after reboot of dev machine and exploring the queue object on the first run I find that I am getting the error the **FIRST** time around but it still sends the message.

So I am clearly doing something wrong but clueless as to what.

Here is my send code:

```
private void SendLoginMessage(...bunch of parms)
        {
            //hardcoded path? yup!!
            MessageQueue msmq = new MessageQueue(@"FormatName:DIRECT=OS:W2K8R2_SQL2K8R2\private$\best_simulator");

            try
            {
                LoginStatusMessage LgnMsg = new LoginStatusMessage()
                {
                    ...assign parms to my 
                };
                msmq.Send(LgnMsg);
            }
            catch (MessageQueueException msmqex)
            {
                MessageBox.Show(msmqex.Message);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
                msmq.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:50:44.203

[UnsupportedFormatNameOperation](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeueerrorcode%28v=vs.71%29.aspx)的描述是

> 不支持指定格式名称的请求操作。
> 
> 当指定格式名称不支持请求的操作时，消息队列会返回此错误。操作包括尝试通过指定直接格式名称来打开队列以接收消息。

所以我猜你的问题可能出在你的接收代码上。

# iphone - background-image won't show on phone browser

> ID：15044628
> 
> 赞同：1
> 
> 时间：2013-02-23T19:26:39.250
> 
> 标签：iphone, css, background-image

I have the following CSS in order to get an image on my page background, and a color around it.

```
#home{text-align:center;background:Red url('/Content/image.png') no-repeat fixed center;} 
```

When I run it on my computer with any browser (I prefer Chrome), everything is fine. However, when I open the website on my phone (also using Chrome), I only see the background color, not the image. However, as soon as I remove the center part (background position), I can see it.

Any idea?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-04T17:07:11.973

经过一番搜索，我发现宽度超过 1024 像素的图像不会显示在 iDevices 上。我使用媒体查询来更改背景，如下所示：

```
@media all and (max-width:900px), (max-device-width:900px){
body{
background-image: url('smaller-image.gif');
}
} 
```

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-09T15:44:28.767

如今，图片是否宽于 1024px 并不重要。对我来说导致不显示背景图像的问题是：`background-attachment: fixed;`

在这种情况下，只需将此行更改为`background-attachment: scroll;`with @media query

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-09T13:55:03.957

我遇到了同样的问题，然后我应用`background:url("../img/pic1.jpg") no-repeat center;`了它的工作，如果您在 ios 中遇到问题，您可以尝试。

# delphi - 如何找出引入的组件是哪个版本的 Delphi？

> ID：15044633
> 
> 赞同：3
> 
> 时间：2013-02-23T19:27:06.677
> 
> 标签：delphi, history

我刚刚开始使用 ActionMainMenuBar 和 ActionManager，我想知道这个组件是什么版本的 Delphi 引入的？我在哪里可以找到此类信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T20:08:11.173

**来源 1**

我通过谷歌搜索找到了这个页面：http: [//www.blong.com/Conferences/BorCon2003/Actions/6102.htm](http://www.blong.com/Conferences/BorCon2003/Actions/6102.htm)

在顶部附近的**介绍**部分下，它提到动作和动作列表组件自“1998 年 6 月的 Delphi 4”以来就已经存在

TActionMainMenuBar 似乎是在 2001 年与 Delphi 6 一起引入的：

在**Action Managers And ActionBands**部分下大约四分之一的页面下方：

“如果您使用的是 Delphi 6 或更高版本，您可以完全放弃操作列表组件，而只需使用操作管理器，它允许您创建操作组件。

新的动作组件位于组件面板的附加页面的末尾。TActionManager 组件是我们将在这里使用的增强的操作列表替换。您还可以找到两个 Action Band 组件，TActionMainMenuBar 和 TActionToolBar。”

* * *

**来源 2**

从 Embarcadero 开发者网络，我还设法在这里找到了这个页面，它显示了 Delphi 6 的屏幕截图：http: [//edn.embarcadero.com/article/27317](http://edn.embarcadero.com/article/27317)

![在此处输入图像描述](../Images/3d245abcf1da686515d2c6a54cfaef9d.png)

该链接的引用：

“事不宜迟，我们直接进入 Delphi 6 的组件面板。

在 Additional 选项卡上，您会注意到一些新内容，例如 TValueListEditor、TLabeledEdit、TColorBox、TActionManager、TActionMainMenuBar、TActionToolBar 和 TCustomizeDlg。

# firefox - SVG cannot set width and height in firefox

> ID：15044635
> 
> 赞同：3
> 
> 时间：2013-02-23T19:27:12.650
> 
> 标签：firefox, svg

i am tying to solve this problem that is very annoying....

a simple structured html, with an svg element with the width and height of 700px:

```
<div id="wrapper">
    <div id="gameZone">
        <div id="background">
        <svg id="svgRoot" width="700px" height="700px">
            <circle cx="355" cy="600" r="10" id="ball" />
            <rect id="pad" height="15px" width="150px" x="280" y="670" rx="10" ry="20"/>
        </svg>
        </div>  
    </div>
</div> 
```

the question is why the hell the svg is displyed without the width and height in firefox? in chrome and ie its working 100%;

please help me solve this problem.

here is an screenshot of the problem: [http://shaharmesh.hostingsiteforfree.com/differance.jpg](http://shaharmesh.hostingsiteforfree.com/differance.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T16:51:04.420

Firefox 调试器显示的大小与 svgRoot.getBBox() 的结果相同，即实际的 svg 内容边界大小。

为避免此问题，请放置一个与画布大小相同的不可见矩形，或其他形状以占据 svg 的左上角和右下角。

```
<div id="wrapper">
    <div id="gameZone">
        <div id="background">
        <svg id="svgRoot" width="700" height="700">
            <rect width="100%" height="100%" stroke="none" visibility="hidden" pointer-events="none" />
            <circle cx="355" cy="600" r="10" id="ball" />
            <rect id="pad" height="15" width="150" x="280" y="670" rx="10" ry="20"/>
        </svg>
        </div>
    </div>
</div> 
```

# java - Random Battleship Placement Method

> ID：15044637
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:27:19.093
> 
> 标签：java, random

I'm working on a method that randomly places ships on a **10x10** grid for battleship. It works sometimes, but sometimes it will run forever without placing a ship, even if it comes up with a spot where a ship could clearly be placed.

I feel like it has something to do with the random number generation.

Here's my code:

```
public void placeAllShips() {
    int dir = 0;
    int xCoord = 0;
    int yCoord = 0;
    boolean flag;
    boolean overlap;
    for (int i=0; i<5; i++) {
      flag = true;
      overlap = false;
      while (flag) {
        xCoord = (int)(Math.random()*(10)); //get a random x coordinate
        yCoord = (int)(Math.random()*(10)); //get a random y coordinate
        dir = (int)(Math.random()*(2)); //get a random direction, 0 = horizontal, 1 = vertical
        if ((cellArr[xCoord][yCoord].hasShip()==false)&&(((dir==0)&&((xCoord+i)<=9))||((dir==1)&&((yCoord+i)<=9)))) {
          for (int j=0; j<i+1; j++) {
            if ((dir==0)&&(cellArr[xCoord+j][yCoord].hasShip())) {
              overlap = true;
            }
            else if ((dir==1)&&(cellArr[xCoord][yCoord+j].hasShip())) {
              overlap = true;
            }
          }
          if (overlap==false) {
            flag = false;
          }
        }
        System.out.print("A");
      }
      System.out.println(xCoord+":"+yCoord+":"+dir);
      for (int k=0; k<i+1; k++) {
        if (dir==0) {
          cellArr[xCoord+k][yCoord].setHasShip(true);
        }
        else {
          cellArr[xCoord][yCoord+k].setHasShip(true);
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:33:18.023

*   `overlap`设置为`false`。
*   while 循环开始。
*   发现重叠，`overlap`设置为`true`。
*   循环重新开始。
*   `overlap`还在`true`。
*   循环永远不会退出。

因此，向下移动`overlap = false;`一行。

# android - res\ and AndroidManifest.xml not added to my .apk file

> ID：15044641
> 
> 赞同：0
> 
> 时间：2013-02-23T19:27:30.893
> 
> 标签：android, eclipse, apk

Due to a change of computers, I had to do a new installation of Eclipse and the Android SDK. I copied over my work environment (directory) and voila, everything works fine when compiling and running my app in the emulator.

However, when creating a distribution package, the generated .apk file is just about +half the size of the previous versions+ and produces the +"There was a problem parsing the package"+ eror message when trying to install it on a phone.

On a closer check, I found that the following files are not added to the .apk file:

```
res/ folder
AndroidManifest.xml
resources.arsc 
```

There are no error messages in the Error log in Eclipse and I have already disabled Proguard (just to sort it out as a possible cause). Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:06:48.497

我会尝试两件事...

首先，显而易见的是打开项目，然后使用 Project -> Clean。

其次（如果上面没有解决它），关闭项目然后在包资源管理器中右键单击它并选择删除 - 这不会删除项目文件（除非您选择了您显然不想要的复选框去做）。删除项目后，转到文件 -> 新建 -> 项目。选择“Android Project From Existing Code”，然后选择项目文件夹作为源。

# c# - Wcf 减少客户端连接超时

> ID：15044644
> 
> 赞同：0
> 
> 时间：2013-02-23T19:27:54.850
> 
> 标签：c#, wcf, timeout, client, connection-timeout

我有一个运行良好的 wcf 服务。问题是客户端。我有一个小 gui，用户应该在其中放置 wcf 服务所在位置的 IP 地址。客户端和服务都在同一个网络上，所以如果我无法连接，那是因为我提供了不正确的 IP 地址或防火墙被阻止。无论如何，我怎样才能缩短那个时间，这样如果用户输入了不正确的 ip，他就不必等待 20 秒？这是我的 app.config 文件如何查找我的客户端：

这是我的客户端 app.config 文件的外观：

```
 <client>
        <endpoint address="net.tcp://127.0.0.1:41236/" binding="netTcpBinding" 
            bindingConfiguration="NetTcpBinding_IService1" contract="ServiceReference1.IService1"
            name="NetTcpBinding_IService1">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client> 
```

## 编辑

我已将我的 app.config 文件更新为：

```
 <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_IService1" sendTimeout="00:00:02" receiveTimeout="00:00:02">
                <security mode="Transport" />
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint address="net.tcp://10.10.1.154:41236/" 
                  binding="netTcpBinding" 
                  bindingConfiguration="NetTcpBinding_IService1" 
                  contract="ServiceReference1.IService1"

            name="NetTcpBinding_IService1">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client> 
```

请注意，我故意放置了一个不存在的 ip 地址，由于某种原因，程序仍然等待 10 秒......我添加了`sendTimeout="00:00:02" receiveTimeout="00:00:02"`属性，但仍然没有工作:(

## 编辑 2

这是我收到的错误消息：

> 无法连接到 net.tcp://10.10.1.154:41236/。连接尝试持续了 00:00:21.0342031 的时间跨度。TCP错误码10060：连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应10.10.1.154:41236。

请注意，它尝试连接 21 秒......我知道我将无法连接，但如果我能减少那个时间会很好。我打算在同一个网络上使用这个程序......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:33:21.303

在您的`NetTcpBinding_IService1`bindingConfiguration

添加一个属性`sendTimeout="00:00:02"`

这将减少到 2 秒。

**编辑**

请使用`OpenTimeout="00:00:02"`它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:29:59.780

替换你的超时`bindingConfiguration` `NetTcpBinding_IService1`

# php - It seems that 1 of my sessions are not even saving throughout pages

> ID：15044649
> 
> 赞同：0
> 
> 时间：2013-02-23T19:28:12.743
> 
> 标签：php, session, fopen, save, undefined-behavior

This is where the code begins to fail (fun.php): It also seems that the text file isn't being written to, it doesn't even create the file

```
<?php 
    session_start();

    if($_SESSION['LoggedIn'] == False)
    {
        header("Location: /login.php");
        return ;
    }
    include ('/home/manseld/public_html/scripts/config.php');

    if(($_SESSION['Banned'] == True && (!file_exists("/home/manseld/public_html/accounts/banned/". $_SESSION['CurrentUser'] .".txt"))))
    {
        $_SESSION['Banned'] = False;
    }

    if(file_exists("/home/manseld/public_html/accounts/banned/". $_SESSION['CurrentUser'] .".txt"))
    {
        header("Location: /error.php?e=banned&img=fuuu");
        return ;
    }
// Log User(s) IP 

    if(($_SESSION['LoggedIn'] == True) && (!$_SESSION['CurrentUser'] == "ManselD"))
    {
        ini_set('date.timezone', 'Europe/London');
        $ip = $_SERVER['REMOTE_ADDR'];
        $user = $_SESSION['CurrentUser'];
        $txt = date("h:i") ." | ". $user ." | ". $ip ."\n";
        $url = "accounts/logs/". trim(date(F) ."-". date(d) ."-". date(Y) .".txt");
        $file = fopen($url, "a");
        fwrite($file, $txt);
        fclose($file);
    }
?> 
```

Now, this is where `$_SESSION['CurrentUser'];` Is set (In login.php) Or in this case, not set >.>

```
session_start();
$user = stripslashes($_POST['user']);
$pass = stripslashes($_POST['pass']);
$banned = "/home/manseld/public_html/accounts/banned/$user.txt";
$normal = "/home/manseld/public_html/accounts/$user.txt";
$_SESSION['CurrentUser'] = "$user";

if($_SESSION['LoggedIn'] == True){
header("Location: /fun.php");
return;
}else{
$_SESSION['LoggedIn'] = False;
}

if(isset($_POST['submit'])){
// Banned Users
if(($_SESSION['Banned'] == True && (!file_exists("/home/manseld/public_html/accounts/banned/".$_SESSION['CurrentUser'].".txt")))){
$_SESSION['Banned'] = False;
}
if(file_exists("/home/manseld/public_html/accounts/banned/".$_SESSION['CurrentUser'].".txt")){
$_SESSION['Banned'] = True;
header("Location: /error.php?e=banned&img=fuuu");
return;
}else{
$_SESSION['Banned'] = False;
} 
```

I don't really think that it should be happening, it's pretty odd. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:31:57.313

我不太明白你的问题（哪个会话变量不起作用？）但是

`$_SESSION['CurrentUser'] = "$user";`

应该

`$_SESSION['CurrentUser'] = $user;`

# c# - Fluent NHibernate：在左连接条件下排序

> ID：15044660
> 
> 赞同：1
> 
> 时间：2013-02-23T19:29:31.277
> 
> 标签：c#, sql, nhibernate, fluent-nhibernate, left-join

假设以下映射类：

```
public class Item
{
  public virtual int Id { get; set; }
  public virtual IEnumerable<History> Histories { get; set; }
}

public class History
{
  public virtual int Id { get; set; }
  public virtual Item Item { get; set; }
  public virtual DateTime Date { get; set; }
  public virtual HistoryType HistoryType { get; set; }
}

public enum HistoryType
{
  A = 1,
  B = 2
} 
```

现在我希望能够获取按其最新历史日期排序的所有项目，其中历史是 HistoryType = A。并非所有项目都有历史，所以我想需要左连接。

我需要的是对 Fluent NHibernate 的查询，但如果能看到一个正确的 SQL 查询也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:10:13.263

您的案例的标准 SQL 查询将如下所示。是的，您需要 a`Left Join`来获取所有物品。

> 所有按其最新历史日期排序的项目，其中 History 的 HistoryType = A。即使对于没有历史记录的项目

```
SELECT i.id, h.id, h.datetime, h.historytype
FROM ITEMS i
LEFT JOIN HISTORY h
ON i.id = h.itemid
WHERE h.HistoryType = 'A'
ORDER BY h.Datetime DESC 
```

如果您选择显示用户定义的值而不是 null。例如，当项目没有历史记录时，返回的历史记录表记录将为空。因此，像这样的功能[`Colasce`](http://www.w3schools.com/sql/sql_isnull.asp)可以帮助您[在查询中添加语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar):)

请为`Fluent NHibernate`.

# matlab - 替换矩阵的值

> ID：15044667
> 
> 赞同：1
> 
> 时间：2013-02-23T19:29:54.813
> 
> 标签：matlab, pixel, substitution

假设我有以下两个矩阵：

```
>> x = [1 4 3; 6 4 3; 6 9 3; 2 4 3; 5 4 0; 5 3 1; 6 4 7];
>> y = [0 0 1; 1 1 0; 1 1 0; 0 1 1; 0.2 0.8 0.54; 1 1 1; 0 0 0]; 
```

您可以将其`x`视为某个图像，以及每个元素对某个感兴趣区域的`y`隶属**程度。**`x`

假设我将那些`x`具有隶属度 = 1的元素设置为`1`，将其他元素设置`0`为如下：

```
x = zeros(size(y));
x(y==1) = 1; 
```

在这种情况下，我将得到以下输出：

```
 0     0     1
     1     1     0
     1     1     0
     0     1     1
     0     0     0
     1     1     1
     0     0     0 
```

现在，对于 的元素`0`，如何将它们的值替换`y`为相应位置的值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:07:20.207

试试这个：

`x(x==0)=y(x==0);`

答：

```
x =

     0         0    1.0000
1.0000    1.0000         0
1.0000    1.0000         0
     0    1.0000    1.0000
0.2000    0.8000    0.5400
1.0000    1.0000    1.0000
     0         0         0 
```

# javascript - jQuery datepicker 获取显示的月份和年份不是当前的

> ID：15044668
> 
> 赞同：4
> 
> 时间：2013-02-23T19:29:54.850
> 
> 标签：javascript, jquery, datepicker

在点击日期选择器标题左侧和右侧的“下一个”和“上一个”链接后，我试图获得“显示”的月份和年份。

目前我用来获取月份：

```
var selectedMonth = $('#calendar').datepicker('getDate').getMonth() + 1; 
```

但它只返回当前月份，而不是单击“下一个”或“上一个”时显示的月份。

编辑

`onChangeMonthYear`我在我拥有的函数中添加了带有日期选择器的选项

```
function getDates() {
var selectedMonth = $('.ui-datepicker-month').text();
var selectedYear = $('.ui-datepicker-year').text();
} 
```

仍然这只是说明当前日期。

再次编辑

以上工作只需要设置延迟：]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T19:38:16.427

`$.datepicker('getDate')`仅返回日期选择器的选定日期，而不是当前显示的月份。

您正在寻找的是将函数绑定到`onChangeMonthYear`. [文档在这里](http://api.jqueryui.com/datepicker/#option-onChangeMonthYear)

例子：

```
$('#calendar').datepicker('option', 'onChangeMonthYear', function(year, month) { var selectedMonth = month }) 
```

# cuda - 如何填充二维线程块以进行 warp 调度？

> ID：15044671
> 
> 赞同：1
> 
> 时间：2013-02-23T19:30:06.427
> 
> 标签：cuda

我知道对于具有 31 个线程的 1D 线程块，它将被填充到 32 个线程以进行扭曲执行。具有 31*31 线程的 2D 块呢？warp scheduler 是否会为每个维度额外填充 1 个线程（即总共将填充 31 个），或者将这个 2D 块线程连接起来，只填充最后一个线程（31*31=961; 961%32=1） ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T19:51:14.387

只有一根经线（最后一根）被填充。线程按 x、y、z 的顺序分组到 warp 中。这样，如果您有一个奇数的 2D 数组大小，例如 17x17，它连续存储在内存中，您仍然可以从 17x17 线程块中创建 32 线程扭曲，从而生成合并访问。通过这种方式，除了最后一个，所有的 warp 都将生成完全合并的访问。如果沿途用死线程填充各个经线，则在此示例中的内存访问方面会更加浪费。

对于这个例子，至少，从机器利用率的角度来看，它工作得更好。

对此的文档支持取决于对线程*ID*和线程*索引*不同的理解。

给定线程的线程索引由内置变量`threadIdx.x`、`threadIdx.y`和标识`threadIdx.z`。线程 ID 是分配给每个线程的唯一（在线程块内）标量编号。

线程 ID 和线程索引之间的关系由[以下语句](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#simt-architecture)给出：

> “一个线程的索引和它的线程ID以一种直接的方式相互关联：对于一个一维块，它们是相同的；对于一个大小为（Dx，Dy）的二维块，一个线程ID索引为(x, y) 的线程为(x + y Dx)；对于一个大小为(Dx, Dy, Dz) 的三维块，索引为(x, y, z) 的线程的线程ID 为(x + y Dx + z Dx Dy)。”

但是将线程分组为经纱是[由线程 ID 明确](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#simt-architecture)完成的：

> “一个块被划分为warp的方式总是相同的；每个warp包含连续的线程，增加线程ID，第一个warp包含线程0。”

因此，基于第一个陈述，我们看到即使对于像 17x17 这样的奇数块形状，除了线程块维度内的线程之外，没有定义线程。然后基于第二条语句，通过线程 ID 连续组装经纱创建经纱，所有这些经纱都在其中定义了线程（可能最后一个除外。）

# php - 在 PHP 中删除逗号分隔列表中的重复值

> ID：15044672
> 
> 赞同：0
> 
> 时间：2013-02-23T19:30:14.000
> 
> 标签：php, string, duplicates, concatenation

如何在 PHP 中删除逗号分隔列表中的重复值？

我有 2 个版本的客户问卷 - 一个比另一个更详细 - 其中一个会询问他们喜欢的项目，而另一个会要求他们按排名顺序指定他们喜欢的项目。在此特定示例中，其中一列 ('items_like') 可能包含逗号分隔列表中的多个值。还有其他两种情况，其中每列可能包含逗号分隔列表中的多个值。

为了显示客户喜欢的所有商品的列表，我在从数据库中获取信息时连接了 4 列。如何从组合的逗号分隔列表中删除任何重复值？我更喜欢在 PHP 中执行此操作而不是 Javascript

```
try {  
$stmt = $conn->prepare("SELECT * FROM customer_info WHERE user_id = :user_id"); 
$stmt->bindValue(':user_id', $user_id); 
$stmt->execute();
}catch(PDOException $e) {echo $e->getMessage();}
$row = $stmt->fetch();
$search = array('_', ',', 'Null');
$replace = array(' ', ', ', '');
$rows = str_replace($search, $replace, $row);

$merged_likes = $rows['items_like']. ",  " . $rows['first_like']. ",  " .     $rows['second_like']. ",  " .  $rows['third_like'];
echo $merged_likes; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:23:41.443

在处理事物列表时，使用[数组](http://php.net/arrays)是最简单的。逗号分隔的字符串可以很好地显示内容，但在代码中使用它们并不有趣。考虑到这一点，我建议在您最终将数据显示到屏幕上之前不要触摸逗号。

不幸的是，听起来您已经在数据库中存储了逗号分隔的字符串。如果这是您可以更改的内容，您可能希望研究使用多个表的替代数据库结构，这些表在用户和他们喜欢的事物之间具有一对多的关系。关于这个有很多可以说的，但这不是你问题的主题。正如 Havelock 已经提到的，基本概念称为[数据库规范化。](http://en.wikipedia.org/wiki/Database_normalization)

如果无法更改数据库结构并且您必须使用逗号分隔的列表，只需撤消逗号分隔并将它们重新放入 PHP 中的数组中。为此，您将使用以下[`explode()`](http://php.net/explode)功能：

```
$teststring = '1,2,3';
$test = explode(',', $asdfstring); // array(1, 2, 3) 
```

一旦你有了数组，PHP 就有一些方便的特性来排序、删除重复项等。你可能最感兴趣的是[`array_unique()`](http://php.net/array_unique).

要将其放回以逗号分隔的列表进行显示，只需使用[`implode()`](http://php.net/implode)，它的作用与`explode()`获取数组并将其与您选择的分隔符（例如，逗号）连接起来相反。

现在，由于您在这里要处理多个列，并且只需要一个列表，因此您将不得不分多个步骤构建数组。如果这些列中的每一列都可以包含多个值，那么您可以对所有列执行爆炸操作：

```
$items_like = explode(',', $rows['items_like']);
$first_like = explode(',', $rows['first_like']);
$second_like = explode(',', $rows['second_like']);
$third_like = explode(',', $rows['third_like']);
$merged = array_merge($items_like, $first_like, $second_like, $third_like); 
```

或者如果第一、第二和第三只包含一个项目，你可以这样做：

```
$items_like = explode(',', $rows['items_like']);
$other_likes = array($rows['first_like'], $rows['second_like'], $rows['third_like']);
$merged = array_merge($items_like, $other_likes); 
```

现在删除重复项：

```
$likes = array_unique($merged); 
```

现在我们终于准备好添加逗号了：

```
echo implode(', ', $likes); 
```

# javascript - 当未观察到底层数据时，Knockout.js 计算写入未触发突变事件

> ID：15044675
> 
> 赞同：0
> 
> 时间：2013-02-23T19:30:48.360
> 
> 标签：javascript, web-applications, mvvm, web, knockout.js

我一直在尝试确定为什么计算值上的写入函数至少不会自动触发突变事件。

我所说的一个例子：

```
<span data-bind="text: fullName"></span>
<input data-bind="value: fullName"/> 
```

使用以下 JavaScript。

```
<script type="text/javascript">
function MyViewModel() {
    this.firstName = 'first';
    this.lastName = 'last';

    this.fullName = ko.computed({
        read: function () {
            return this.firstName + " " + this.lastName;
        },
        write: function (value) {
            var lastSpacePos = value.lastIndexOf(" ");
            if (lastSpacePos > 0) { // Ignore values with no space character
                this.firstName = value.substring(0, lastSpacePos); // Update "firstName"
                this.lastName = value.substring(lastSpacePos + 1); // Update "lastName"
            }
        },
        owner: this
    });
}

ko.applyBindings(new MyViewModel()); 
```

我理解这种情况的发生，因为 firstName 和 lastName 不是可观察的，但我不明白为什么。即使底层数据在其他地方单独使用，至少任何使用 fullName 的字段都会更新，这似乎是合乎逻辑的。

所以我的问题具体是：

1.  为什么会这样？
2.  如果你不想观察名字或姓氏，你怎么能绕过它？

[http://jsfiddle.net/TWR6Y/](http://jsfiddle.net/TWR6Y/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:38:33.430

这与[**依赖跟踪的工作方式有关**](http://knockoutjs.com/documentation/computedObservables.html#how_dependency_tracking_works)。

> 1.  每当你声明一个计算的 observable 时，KO 立即调用它的求值函数来获取它的初始值。
> 2.  当您的评估器功能运行时，KO 会记录您的评估器读取其值的任何可观察对象（或计算的可观察对象）。
> 3.  当你的评估器完成后，KO 为你接触过的每个可观察对象（或计算的可观察对象）设置订阅。订阅回调设置为使您的评估程序再次运行，将整个过程循环回第 1 步（处理任何不再适用的旧订阅）。
> 4.  KO 通知任何订阅者你计算的 observable 的新值。

由于`firstName`and `lastName`are not `ko.observable`'s，KO 不会将它们添加到日志中（参见步骤 2）。因此，您的代码（没有 observables）将不起作用。

进一步总结答案。在这个问题和更新时的 Javascript 无法为原生类型提供事件处理。Knockout 通过处理数据来创建一个可以看到对象突变的截取点来克服这个问题。在不拦截的情况下观察本地人的唯一方法是扫描，这是低效的。

**[Object.observe](http://wiki.ecmascript.org/doku.php?id=harmony%3aobserve)**将克服这个问题。

# .htaccess - htaccess 可选参数

> ID：15044676
> 
> 赞同：1
> 
> 时间：2013-02-23T19:30:57.047
> 
> 标签：.htaccess, rewrite

我有一个非常简单的重写规则。我希望 URL 中的第二个参数是可选的，但目前我必须在 URL 中传递它：

```
RewriteEngine On
RewriteRule ^signup/([^/]*)/([^/]*)/$ /signup/index.php?e=$1&s=$2 [L] 
```

我有 URL /signup/PARAMETER/OPTIONAL-PARAMETER/

如果我关闭第二个参数，如何使 url 工作？

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:12:55.423

只需在其后添加一个参数重写：

```
RewriteEngine On
RewriteRule ^signup/([^/]*)/([^/]*)/$ /signup/index.php?e=$1&s=$2 [L]

# single parameter
RewriteRule ^signup/([^/]*)/$ /signup/index.php?e=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:37:06.373

我使用了这个问题的答案[htacess 和两个帖子参数](https://stackoverflow.com/questions/11617183/htacess-and-two-post-parameters)....感谢 aeshabana 的提示！

我还需要在 URLS 中添加一个斜杠，所以这是我的最终 .htaccess

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://domain.com/$1/ [L,R=301]

RewriteRule %{REQUEST_FILENAME} !-d
RewriteRule %{REQUEST_FILENAME} !-f
RewriteRule ^signup/(.+)/$ /signup/index.php?uri=$1 [QSA,L] 
```

# ios - 从另一个类修改 UIButton 的 alpha 属性

> ID：15044677
> 
> 赞同：2
> 
> 时间：2013-02-23T19:31:08.113
> 
> 标签：ios, objective-c, uiviewcontroller, uibutton, alpha

我正在尝试从另一个类中更改`alpha`一个。`UIButton`在设置`alpha`我的 UIButton 的属性中调用的函数实际上是被调用的，因为我在`NSLog`那里放了一个，我可以看到它是如何工作的。如果您能给我任何建议，我将不胜感激。

这是我当前的代码。

*视图控制器.h*

```
- (void) setAlphaToButton;

@property (strong, nonatomic) IBOutlet UIButton *myButton; 
```

*视图控制器.m*

```
@synthesize myButton;

- (void) setAlphaToButton {
    myButton.alpha = 0.5;
    NSLog(@"Alpha set");
} 
```

*ImageViewSubclass.m*

```
- (void) tapDetected:(UITapGestureRecognizer *)tapRecognizer {
    ViewController *VC = [[ViewController alloc] init];
    [VC setAlphaToButton];
} 
```

当按下图像视图时，在我的控制台中我得到：`Alpha set`. 并且按钮不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:41:49.030

在您的代码中，分配并初始化了 ViewController 的一个实例，并在其上调用了 setAlphaToButton 方法。然后释放视图控制器，因为您没有保留它的对象。这就是为什么您看不到任何效果的原因；您调用该方法的 ViewController 实例永远不会出现在屏幕上。

目前尚不清楚您的代码应该如何工作；调用 tapDetected 时是否存在 ViewController 的实例？如果是这种情况，并且这是您想要更改其 alpha 的按钮的 ViewController，那么您需要引用*该*ViewController 的实例并在其上调用 setAlphaToButton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:03:57.050

在您尝试设置 alpha 时，您的视图未加载！您需要在 viewDidLoad 触发后调用此方法。您可以通过调用 view 来强制它，但这是一种 hack，不推荐！

```
MyViewController *vc = [MyViewController new];
vc.view; // this string will force view loading 
[vc setAlphaToButton]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T09:38:58.613

在 imageviewsubclass 中添加 uiviewcontroller 类的属性为

```
ImageViewSubclass.h
@propery (nonatomic, retain) uiviewController *parent;
ImageViewSubclass.m
@synthesize parent; 
```

并在初始化 imageviewsubclass 的对象时在视图控制器类中用“self”初始化它并添加到视图中

```
ImageViewsubclass *oneObj = [ImageViewsubClass alloc] init];
oneOBj.parent = self; 
```

对 ImageviewsubClass 对象的所有对象执行相同的操作。

并且在

```
- (void) tapDetected:(UITapGestureRecognizer *)tapRecognizer {
    [parent setAlphaToButton];
} 
```

# php - 使用php动态添加指向元素的链接

> ID：15044679
> 
> 赞同：0
> 
> 时间：2013-02-23T19:31:16.747
> 
> 标签：php, wordpress

再会

我在我的 wordpress 主题中使用摘录。现在在 wordpress 的文档中，他们说 wordpress 不会自动为摘录添加链接，您必须像这样手动添加它们：

原始摘录文件

```
 <div class="content">
 <?php the_excerpt(); ?>
 </div> 
```

添加链接

```
<div class="content">
<?php the_excerpt(); ?>
<a href="<?php echo get_permalink(); ?>"> Read More...</a>
</div> 
```

现在我想做的是将每个摘录链接到不同的 wordpress**页面**，而不是链接到它自己的摘录。因此，为此，我必须创建一个自定义 php 函数来为每个摘录创建一个唯一链接，每个链接指向不同的页面。我怎么做？

请参阅我的[网站](http://gbcgarankuwa.co.za)摘录所在的网站 - 它位于主滑块的正下方，名为：牧师角，母亲的心，布道等......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:11:46.880

您可以传递一个 ID 以`get_permalink`提取不同帖子或页面的永久链接。

```
<a href="<?php echo get_permalink($post_id); ?>"> Read More...</a> 
```

[http://codex.wordpress.org/Function_Reference/get_permalink](http://codex.wordpress.org/Function_Reference/get_permalink)

# jquery - 从 textarea 中检测并删除 URL

> ID：15044680
> 
> 赞同：9
> 
> 时间：2013-02-23T19:31:18.530
> 
> 标签：jquery, regex

```
<textarea name="test">
  http://google.com/
  https://google.com/
  www.google.com/
  [url=http://google.com/]google.com[/url]
  text
</textarea> 
```

我目前尝试检查文本区域中是否有 URL。

```
if ($('textarea[name="test"]').val().indexOf('[url') >= 0 ||
    $('textarea[name="test"]').val().match(/^http([s]?):\/\/.*/) ||
    $('textarea[name="test"]').val().match(/^www.[0-9a-zA-Z',-]./)) { 
```

这似乎并不完全适用于检查上面的任何 URL - 我想知道如何优化它。目前它似乎非常草率和黑客攻击，希望有人可以提供一些见解。

我目前从 textarea 中删除 URL 的尝试：

```
var value = $('textarea[name="test"]').val();
    value = value.replace(/\[\/?url([^\]]+)?\]/g, '');
$('textarea[name="test"]').val(value); 
```

现在，它将输出：

```
<textarea>
  http://google.com/
  https://google.com/
  www.google.com/
  google.com
  text
</textarea> 
```

**我希望我的输出是：**

```
<textarea>
  text
</textarea> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T19:47:57.553

尝试（评论后更正和改进）：

```
value = value.replace(/^(\[url=)?(https?:\/\/)?(www\.|\S+?\.)(\S+?\.)?\S+$\s*/mg, ''); 
```

从头到尾剥离表达式：

*   除了方案之外，地址可能有两个或三个“部分”
*   地址可能以**www**开头，也可能不以 www 开头
*   它的前面是**http://**或**https://**
*   它可能包含在**[url=** ...]...[/url]内

此表达式不强制执行完全正确的语法，这是一个更难编写的正则表达式。
您可能想要的一些改进：

1.空间意识

```
value = value.replace(/^\s*(\[\s*url\s*=\s*)?(https?:\/\/)?(www\.|\S+?\.)(\S+?\.)?\S+\s*$\s*/mg, ''); 
```

2.最后部分不加点

```
value = value.replace(/^(\[url=)?(https?:\/\/)?(www\.|\S+?\.)(\S+?\.)?[^.\s]+$\s*/mg, ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T19:49:55.837

关于您尝试检查文本区域中是否存在 URL。

```
if ($('textarea[name="test"]').val().indexOf('[url') >= 0 ||
    $('textarea[name="test"]').val().match(/^http([s]?):\/\/.*/) ||
    $('textarea[name="test"]').val().match(/^www.[0-9a-zA-Z',-]./)) { 
```

首先，与其使用多个函数调用三次获取 textarea 值，不如在检查之前将其存储在一个变量中，即

```
var value = $('textarea[name="test"]').val(); 
```

,`/^http([s]?):\/\/.*/`因为`^`只有在 textarea 值的开头找到“http://...”时才会匹配。这同样适用于`^www.`. 将多行标志添加`m`到正则表达式的末尾将使`^`每行的开头匹配，而不仅仅是字符串的开头。

`.*`in没有任何作用，`/^http([s]?):\/\/.*/`因为它匹配零个或多个字符。`([s]?)`是更好的`s?`。

在`/^www.[0-9a-zA-Z',-]./`中，如果这是您的意图，则`.`需要转义以匹配文字`.`，即`\.`，我假设您的意思是匹配字符类中的多个字符，因此您需要使用`+`.

使用 RegExp`test`方法比`match`不需要实际匹配时更有效，因此，结合以上内容，您可以

```
if ( /^(\[url|https?:\/\/|www\.)/m.test( value ) ) { 
```

如果您只是使用它来决定是否需要调用，那么检查无论如何都没有什么意义`replace`，因为该检查隐含在`replace`调用本身中。

使用简单的标准，即应删除行首并以`http[s]://`,`[url`或,开头的非空格字符串，您可以使用`www.`

```
value = value.replace( /^(?:https?:\/\/|\[url|www\.)\S+\s*/gm, '' ); 
```

如果 url 可以出现在您可以使用的任何位置`\b`，即单词边界，而不是`^`，则删除该`m`标志。

```
value = value.replace( /(?:\bhttps?:\/\/|\bwww\.|\[url)\S+\s*/g, '' ); 
```

试图提供更好的正则表达式解决方案而没有精确的细节来说明文本区域中可能出现的 url 形式、它们可能出现的位置以及可能与它们相邻的字符，这将是一种浪费。

如果*任何*有效的 url 可以出现在 textarea 中的*任何位置*并且被*任何*其他字符包围，那么就没有防水解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-19T12:01:37.177

下面的`JQuery`代码将完成这项工作

```
<script>
// disable links in textarea and add class linkdisable in textarea
jQuery('.linkdisable').focusout(function(e){
  var message = jQuery('.linkdisable').val();
   if(/(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test($(this).val())){
      alert('Links Not Allowed');
      e.preventDefault();
    }
   else if (/^[a-zA-Z0-9\-\.]+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU)$/i.test($(this).val())) {
     alert('Links Not Allowed');
      e.preventDefault();
  }
});
</script> 
```

# smartgit - 如何从 SmartGit 启动命令行？

> ID：15044685
> 
> 赞同：6
> 
> 时间：2013-02-23T19:32:05.340
> 
> 标签：smartgit

SmartGit 似乎远远优于 GitHub for Windows，但我缺少一项功能 - 启动 git 命令行的能力。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T19:53:11.070

SmartGit/Hg 4.5（及更早版本）不提供启动 git 命令行，但是您可以配置“目录工具”（首选项、工具）以打开终端（或 DOS 框），以便您可以快速调用命令行.

**更新：**从 SmartGit/Hg 4.6 开始，您可以在首选项中配置多个**目录**工具。全新安装后（或`tools.xml`从 SmartGit/Hg 的设置目录中删除后），将创建默认工具。如果您的`git`可执行文件*不在*路径上，则其中将包含一个**Open Git-Shell**工具。

# c - 是否可以在 C 中将隐式函数作为函数指针传递？

> ID：15044688
> 
> 赞同：2
> 
> 时间：2013-02-23T19:32:12.070
> 
> 标签：c, function-pointers

最近我发现可以通过在函数调用中强制转换来将隐式数组传递给函数

```
void foo(int* array);
foo((int[4]) {1,2,3,4}); 
```

但是，我想知道在将函数指针传递给函数时是否可以做同样的事情，比如：

```
void bar(void (*foobar)(void));
bar((void) {printf("foobar\n");}); 
```

那么有可能做到这一点吗？

我想知道的原因是，如果我有一大块代码可能具有一定的循环结构，但核心功能在实例之间发生变化，我不想为了传递而用多个临时函数乱扔代码他们到另一个功能。因此希望能够在参数中定义临时函数。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T19:37:40.150

不，不在标准 C 中。不过，您有两种非标准替代方案：

一。GCC 的“嵌套函数”扩展（仅限 GCC）：

```
void call(void (*fn)())
{
    fn();
}

void somefunc()
{
    void tmp_func()
    {
        printf("Hello world!\n");
    }
    call(tmp_func);
} 
```

二、Apple的blocks（最近的GCC和Clang）：

```
void call(void (^blk)())
{
    blk();
}

call(^{
    printf("Hello world!\n");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:02:00.527

“隐式数组”实际上是一个[复合文字](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Compound-Literals.html)，它是 C99 特定的。

另一方面，使用标准 C 无法实现匿名功能。如果您使用 GNU GCC，则可以使用两个扩展来模仿它们：

1.  [嵌套函数](http://gcc.gnu.org/onlinedocs/gcc/Nested-Functions.html)
2.  [语句表达式](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)

首先创建一个包装宏：

```
#define lambda(return_type, body)     \
({                                    \
    return_type lambda_function body; \
    lambda_function;                  \
}) 
```

然后你可以像这样使用它

```
bar(lambda(void, (void)
    {
        printf("foobar\n");
    })
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:38:46.340

您正在寻找的功能不是 C 标准的一部分。然而，这正是**阻塞**（Apple 对该标准的扩展）旨在解决的问题（或问题之一）。如果您正在为 OS X 10.5 或更高版本进行编译（或`clang`在其他受支持的平台上使用 Blocks 运行时；请参阅[mackyle/blocksruntime](https://github.com/mackyle/blocksruntime)），您可以将代码更改为如下所示：

```
void bar(void (^foobar)(void)); 
```

并像这样调用：

```
bar(^{
    printf("foobar\n");
}); 
```

# android - Android mapview 实时在线叠加项目

> ID：15044690
> 
> 赞同：1
> 
> 时间：2013-02-23T19:32:23.067
> 
> 标签：android, download, android-mapview

我想做一个像位智这样的应用程序。像 Waze 那样实现实时移动叠加项目的最佳方式是什么（例如移动汽车）。哪些方法可以提供最佳性能来显示实时移动的叠加项目？也许有人对这些事情有经验可以提供一些启示？

对不起，我的英语不好。

谢谢！

# ruby-on-rails - 范围 :new_users, :conditions => {['look IS NULL OR look = ?',false]} 出现错误

> ID：15044692
> 
> 赞同：1
> 
> 时间：2013-02-23T19:32:24.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的范围是

```
scope :new_users, :conditions => {['look IS NULL OR look = ?',false]} 
```

但我收到错误消息：

```
syntax error, unexpected '}', expecting tASSOC 
```

我哪里错了？请更正。我正在使用 rails3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:39:05.213

你可以试试这个

```
scope :new_users, where('look IS NULL OR look = ?', false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:42:53.133

修改您的范围，如：

```
scope :new_users, :conditions => {('look IS NULL OR look = ?',false)} 
```

# google-app-engine - GAE：使用 webapp2 (Python) 启用边缘缓存

> ID：15044702
> 
> 赞同：4
> 
> 时间：2013-02-23T19:33:30.340
> 
> 标签：google-app-engine, webapp2

youtube 上有这段新视频展示了 EdgeCaching 在 GAE 架构中的优势，在视频的这个特定点，他们展示了利用它是多么容易： [http ://www.youtube.com/watch?v=QJp6hmASstQ #t=11m12](http://www.youtube.com/watch?v=QJp6hmASstQ#t=11m12)

不幸的是，这并不容易……

我希望使用 Google 提供的 webapp2 框架启用边缘缓存。

我打电话给：

```
self.response.pragma = 'Public'
self.response.cache_expires(300) 
```

但它似乎被其他东西覆盖了。

我得到的标题是：

```
HTTP/1.1 200 OK
Pragma: Public
Cache-Control: max-age=300, no-cache
Expires: Sat, 23 Feb 2013 19:15:11 GMT
Content-Type: application/json; charset=utf-8
Content-Encoding: gzip
X-AppEngine-Estimated-CPM-US-Dollars: $0.000085
X-AppEngine-Resource-Usage: ms=39 cpu_ms=64
Date: Sat, 23 Feb 2013 19:10:11 GMT
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Cache-Control: no-cache, must-revalidate
Vary: Accept-Encoding
Server: Google Frontend
Content-Length: 600 
```

我正在使用 ndb 顶级：

```
app = ndb.toplevel(webapp2.WSGIApplication(... 
```

我尝试了这里解释的技术，但它们似乎不适用于 webapp2： [http ://code.google.com/p/googleappengine/issues/detail?id=2258#c14](http://code.google.com/p/googleappengine/issues/detail?id=2258#c14)

我也看过这篇文章： [https ://groups.google.com/d/topic/webapp2/NmHXoZZSVvo/discussion](https://groups.google.com/d/topic/webapp2/NmHXoZZSVvo/discussion)

我试图手动设置所有内容，但没有成功。某些东西正在覆盖我的缓存设置。

有没有办法让它与 webapp2 一起工作？欢迎任何其他选择。

**编辑：**我正在使用带有版本前缀的网址：http: [//version.appname.appspot.com](http://version.appname.appspot.com)，这可能是我的问题的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T12:38:47.293

这应该是您所需要的：

```
self.response.cache_control = 'public'
self.response.cache_control.max_age = 300 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-11T20:11:12.940

检查[缓存详细信息](https://cloud.google.com/cdn/docs/caching)以获取更多信息，可能是您违反了一些规则。接下来最好的部分：

只有满足以下所有条件时，才能将响应存储在 Cloud CDN 缓存中：

*   它由启用缓存的后端服务提供。
*   这是对 GET 请求的响应。
*   状态码为 200、203、300、301、302、307 或 410。
*   它有一个 Cache-Control: public 指令。
*   它有一个 Cache-Control: s-maxage、Cache-Control: max-age 或 Expires 标头。
*   它有一个 Content-Length 标头或一个 Transfer-Encoding 标头。

此外，还有一些检查会阻止响应缓存。如果以下任何一项为真，则不会缓存响应：

*   它有一个 Set-Cookie 标头。
*   它的主体超过 4 MB。
*   它有一个 Vary 标头，其值不是 Accept、Accept-Encoding 或 - Origin。
*   它有一个 Cache-Control: no-store、no-cache 或 private 指令。
*   相应的请求有一个 Cache-Control: no-store 指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T23:41:51.843

我猜你混淆了两个相关但不同的想法。

您链接到的视频所谈到的第一个想法是安排在您的应用程序中使用专门提供静态内容的 App Engine 服务器池来提供某些文件。这比让您的应用提供这些文件要快，因为启动应用的新实例以提供静态文件不会有延迟。（强烈考虑以这种方式提供您的 .js 和 .css。）此静态服务工具完全在应用程序更新（上传）时通过您在`app.yaml`（或`appengine-web.xml`为 Java 应用程序）中所做的声明进行控制。

第二个想法是通过 HTTP 响应标头安排应用程序发出的页面可被应用程序引擎外部的缓存缓存。

如果将文件声明为静态文件，则可以对随文件一起提供的附加 HTTP 响应标头进行一些控制。请参阅[有关配置静态文件的文档](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)。

# css - 单选按钮设置不变

> ID：15044703
> 
> 赞同：0
> 
> 时间：2013-02-23T19:33:51.453
> 
> 标签：css, html, google-chrome, webkit, radio

我在使用一组 2 个单选按钮时遇到了一些问题，在 Chrome 中，无论使用鼠标还是使用键盘都不会改变状态。

这是 HTML：

```
<!-- Dialog Boxes -->
    <section class="add-movie-dialog">
        <section class="dialog-box">
            <form class="dialog-container" name="add-movie-dialog-form" action="">
                <header class="dialog-title">
                    New movie.
                </header>
                <section class="dialog-content">
                    <p>
                        Add a new movie to the library:
                    </p>
                    <input type="radio" name="add_option" value="file" checked="checked" />by selecting a file...
                    <br />
                    <input type="radio" name="add_option" value="empty" /> empty entry...
                </section>
            </form>
        </section>
    </section> 
```

这是 CSS（实际上更少但足够接近）：

```
 .add-movie-dialog {
    #mixin.flex-container( column, center, stretch, nowrap );
    background: fadeout( @black, 50% );
    height: 100%;
    left: 0px;
    line-height: 1.5em;
    position: fixed;
    top: 0px;
    width: 100%;
    .dialog-box {
        #mixin.flex-container( column, flex-start, center, nowrap );
        background: @darkgrey;
        padding: 2em;
        .dialog-container {
            width: 66%;
            .dialog-title{
                #mixin.font( x-large );
                padding-bottom: 1em;
            }
            .dialog-content{
                letter-spacing: 0.1em;
                padding-bottom: 1em;
                & > p {
                    padding-bottom: 10px;
                }
            }
        }
    }
} 
```

这是它的图像：

[示例图像](http://bayimg.com/OajAiAAEo "示例图像")

现在，突出显示的单选按钮不会使用鼠标或键盘更改为“空条目”，我不知道为什么，因为 afaik 代码是有效的并且应该可以工作（除非我在这里遗漏了一些东西）。

* * *

### 解决了

似乎我在我正在使用的 JS 文件中留下了一些旧的 javascript，这弄乱了选择，但是在删除了有问题的 JS 块之后，它自己纠正了。

# php - laravel 4 如何知道如何处理“showWelcome”方法？

> ID：15044706
> 
> 赞同：0
> 
> 时间：2013-02-23T19:34:21.350
> 
> 标签：php, controller, laravel, laravel-4

所以，为了简短起见，当 laravel 看到方法 'showWelcome' 时，它如何知道在默认控制器中做什么？

在路线上有

`Route::get('/', function() { return View::make('hello'); });`

这很好，但它现在如何采取行动`showWelcome`.. 配置中的设置在哪里？它可以被命名为别的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:07:57.143

如果您使用 Laravel 4 的默认安装（当前时间），该`showWelcome`方法实际上不会在`HomeController`该路由的控制器上触发。但是，该方法将返回与路由相同的内容。

您可以通过更改路由到以下内容来触发此方法：

`Route::get('/', 'HomeController@showWelcome');`

# asp.net - 将 ASP.NET aspx 页面输出写入服务器端磁盘

> ID：15044708
> 
> 赞同：1
> 
> 时间：2013-02-23T19:34:51.757
> 
> 标签：asp.net

我正在编写一个生成报告的应用程序。我想将生成的 html 服务器端保存到磁盘以供另一个应用程序使用。

响应对象仅公开用于写入数据的流。我需要从响应中读取数据并将其写入磁盘。

有没有比创建一个接收用户请求的前端更优雅的方法，以编程方式生成一个单独的报告 http 请求，将响应保存到磁盘并将其写入用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:51:58.810

您可以使用`Filter`.`HttpResponse`

就像是：

```
YourFilterStream filter = new YourFilterStream(response.Filter);
response.Filter = filter; 
```

# ruby-on-rails - 如何使用弹性搜索和索引对象之间的关联？

> ID：15044709
> 
> 赞同：4
> 
> 时间：2013-02-23T19:34:58.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, full-text-search, elasticsearch

我正在为 Rails 使用轮胎 gem，并且已经提出了一些关于模型关联的问题。你如何与他们合作？假设您在人与汽车之间建立了关系。每个人都有许多汽车。现在如果你也想索引汽车对象，你怎么做？例如，您如何通过搜索 car.make 来检索一个人？

一般来说，我可以看到以文档为中心的弹性搜索与 RDBMS 的概念不同。一对一、一对多和多对多。

例如，如果您有一个多对多关系，并且您只想要具有关系另一端属性的对象，这是不可能的？弹性搜索是否更适合 MongoDB 等 NoSQL 数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T08:20:04.923

在 Elasticsearch 中建模数据有很多可能的策略，包括关系。在 Elasticsearch 中，相关数据至少有三种策略：

1.  只需使用 JSON，它就能流畅地表达层次结构，
2.  对于`Car`实际是汽车列表的情况，请使用*嵌套*类型，
3.  在需要单独索引两个实体的情况下使用父/子支持。

使用 Tire，首先检查并在代码中尝试这个答案：[Elasticsearch、Tire 和 Nested queries/associations with ActiveRecord](https://stackoverflow.com/questions/11692560/elasticsearch-tire-and-nested-queries-associations-with-activerecord/11711477#11711477)。它应该包含您的方案所需的所有信息。该代码也可[单独](https://gist.github.com/karmi/3200212)获得。

参考：

*   [http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)
*   [Elasticsearch、Tire 和嵌套查询/与 ActiveRecord 的关联](https://stackoverflow.com/questions/11692560/elasticsearch-tire-and-nested-queries-associations-with-activerecord/11711477#11711477)
*   [https://gist.github.com/karmi/3200212](https://gist.github.com/karmi/3200212)

# objective-c - Objective-C 中的 OpenSSL SHA256 等效项

> ID：15044711
> 
> 赞同：2
> 
> 时间：2013-02-23T19:35:05.447
> 
> 标签：objective-c, encryption, openssl, sha

我在将命令行 OpenSSL SHA256 Digest 转换为 Objective-C 中的等价物时遇到了一些麻烦。任何帮助将不胜感激。

当我像这样在命令行上运行 OpenSSL 时：

```
 echo 'key=2fvmer3qbk7f9jnqneg58bu2&secret=qvxkmw57pec7&ts=1200603038' | openssl dgst -sha256 
```

我得到（正确/预期的）结果：

```
1e673d58756f95fb938ddb42fd6242dc691803578a3503fedd5c0e92aac6c098 
```

然后，我在 Objective-C 中创建了一个函数，如下所示 -

`SHA256HashClass.h`：

```
@interface SHA256Hashclass : NSObject{
    unsigned char SHAInputValue[32];
} 
```

`SHA256Hashclass.m`：

```
- (id)createSHA256HashWithBytes:(const void *)bytes length:(NSUInteger)length
{
    // hash
    CC_SHA256(bytes, length, SHAInputValue);

    NSInteger byteLength = sizeof(char value[CC_SHA256_DIGEST_LENGTH]); //sizeof() = 32 bytes

    NSMutableString *stringValue = [NSMutableString stringWithCapacity:byteLength * 2];

    // convert to string
    for (int i = 0; i < byteLength; i++)
    {
        [stringValue appendFormat:@"%02x", SHAInputValue[i]];
    }

    return stringValue;
} 
```

但是，当我像这样调用上述函数时：

```
NSData *dataIn = [@"key=2fvmer3qbk7f9jnqneg58bu2&secret=qvxkmw57pec7&ts=1200603038" dataUsingEncoding:NSUTF8StringEncoding];

SHA256Hashclass *hashClass = [[SHA256Hashclass alloc] init];

NSLog(@"Result: %@", [hashClass createSHA256HashWithBytes:dataIn.bytes length:dataIn.length]); 
```

我得到以下结果，它明显不同于上面显示的预期 OpenSSL SHA256 等效项：

```
d8a0771d41c6b9918048c4842415946bcda27c75b0b6ae4948b6ea081eb01196 
```

我尝试将编码从更改为`NSUTF8StringEncoding`，`NSASCIIStringEncoding`但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:39:32.980

`echo`添加一个额外的换行符。如果我们使用`echo -n`我们得到预期的输出：

```
$ echo -n 'key=2fvmer3qbk7f9jnqneg58bu2&secret=qvxkmw57pec7&ts=1200603038' | openssl dgst -sha256
(stdin)= d8a0771d41c6b9918048c4842415946bcda27c75b0b6ae4948b6ea081eb01196 
```

# gwt - GWT 编译器找不到 Collect.gwt.xml，但我有 Guava 作为依赖项

> ID：15044713
> 
> 赞同：1
> 
> 时间：2013-02-23T19:35:27.950
> 
> 标签：gwt, intellij-idea

我正在转移到一台新计算机上，在处理过程中，我正在从我的 git 源创建新的 Intellij 12 项目。

我有一个 gwt 模块文件，其中包含以下内容：

```
<!-- Other module inherits                                      -->
<inherits name="com.google.common.collect.Collect" />
<inherits name="com.google.common.base.Base" />
<inherits name="com.bdl.message.Message" />
<inherits name="com.bdl.universal.Universal" />
<inherits name="com.bdl.appengine.AppEngine" />
<inherits name="com.bdl.gwt.BdlGwt" />
<inherits name="com.google.gwt.inject.Inject"/> 
```

com.bdl.* 条目来自我编写的另一个库，并且我在模块依赖项中有它们的 jar 文件（和源）。我可以确认删除这些依赖项会导致相应的继承名称变为红色，表示错误。

我还有一个依赖项，一个全局库 Guava (GWT)，其中包含： 类：guava-14.0-rc2.jar 来源：guava-14.0-rc2-sources.jar guava-gwt-14.0-rc2.jar javadoc guava-14.0 -rc2-javadoc.jar

但尽管如此，Collect 和 Base 的继承是红色的，GWT 编译器失败，说它找不到 Collect.gwt.xml。

在我的旧系统上，我有一个 Intellij 11 项目，它的设置方式相同（某处肯定有一些差异，但我一直在寻找几个小时才能找到它，但找不到）它也具有与 a 相同的库依赖项，并且我的应用程序模块中的继承行仍然是红色的，但是 GWT 编译器成功，找到了 Collect.gwt.xml 正确的位置，位于：jar:file:/[path-to-guava]/guava- gwt-14.0-rc2.jar!/com/google/common/collect/Collect.gwt.xml

一定有一些简单而愚蠢的东西我错过了，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:38:18.147

您可能需要将 guava-gwt-14.0-rc2.jar 添加到您的依赖项中。请注意，名称中嵌入了-gwt-，并且您说您将这些作为依赖项：guava-14.0-rc2.jar 来源：guava-14.0-rc2-sources.jar guava-gwt-14.0-rc2.jar javadoc guava-14.0-rc2-javadoc.jar

您可以检查该 jar 是否合适，因为当您打开它（它只是一个 zip 文件）时，您应该会在其中的某个位置看到 Collect.gwt.xml 文件。

# iphone - 在模拟器中重置 ALAssetsLibrary 的权限

> ID：15044714
> 
> 赞同：4
> 
> 时间：2013-02-23T19:35:51.213
> 
> 标签：iphone, objective-c, alassetslibrary

我有一个`iOS`应用程序需要询问用户访问他们的照片的权限。我试图通过在应用程序第一次请求 iOS 权限时向用户显示提示和解释来增强用户体验。

我可以用它`[ALAssetsLibrary authorizationStatus]`来获取当前状态（我的应用只针对 > `iOS 6.0`）。我正在尝试测试此`ALAuthorizationStatusNotDetermined`案例，但我已经授予我的应用访问权限。根据另一个 SO question，[在这里](https://stackoverflow.com/questions/13969544/ios-photo-permissions-to-ask-for-second-time)，设备无法重置权限（即使应用程序被删除并重新安装，它们也可以打开或关闭）。

但我想知道这是否可以在模拟器中完成。**我可以在模拟器中重置照片访问权限吗？**似乎没有任何关于此的谷歌问题/答案？简单地在模拟器中删除并重新安装应用程序是行不通的。

有没有我们可以重置的幕后文件？- 了解我们如何访问模拟器文件系统，这与设备不同。

任何想法都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-17T09:04:30.033

在 iOS 7 中，您可以像在设备上一样重置模拟器中的隐私警告：

```
 General -> Reset -> Reset Location & Privacy 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T21:36:33.570

根据[iOS 6.0 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)：

> 对于访问照片、通讯录、日历和提醒的应用程序，iOS 模拟器中不会显示任何隐私警报。

因此，您根本无法在模拟器上测试要求访问照片的提示，您必须在设备上进行测试。在设备上，您可以在“设置”应用程序中重置隐私设置（常规 > 重置 > 重置位置和隐私）。

# php - 如何使用 php 内置的 http server + mysql？

> ID：15044717
> 
> 赞同：2
> 
> 时间：2013-02-23T19:36:16.297
> 
> 标签：php, installation, ubuntu-12.04

我正在尝试使用以下代码连接到 mysql 服务器：

```
$connection = mysql_connect("localhost", "username", "password");

if(!$connection)
{
    die('Could not connect: '. mysql_error());
} 
```

我得到“ `Call to undefined function mysql_connect()`”。这是为什么？这个函数不是内置在php中的吗？

我正在使用`Ubuntu 12.04 + php 5.4.11`+ php 的内置 http 服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:38:12.080

首先不要使用 mysql_* 函数，因为这些函数已被弃用

其次你需要安装 php5-mysql

```
sudo apt-get install php5-mysql 
```

然后你可以使用mysqli和PDO（也需要安装）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:38:04.990

您必须启用扩展。

请注意，此 API 已弃用。

# gxt - GXT 中的 SimpleComboBox

> ID：15044721
> 
> 赞同：2
> 
> 时间：2013-02-23T19:36:40.540
> 
> 标签：gxt

如何在 GXT 中使用 SimpleComboBox 使用键/值对。我可以向 SimpleComboBox 添加一个键，但是如何将特定键的值添加到 SimpleComboBox？稍后我想检索键的值。谢谢和问候，阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T11:42:34.737

在 SimpleComboBox 中拥有键/值的简单方法是使用 BaseModel 类型的 ListStore。BaseModel 允许您将数据保存为键/值，如下所示：

```
SimpleComboBox combo = new SimpleComboBox();
ListStore<BaseModel> store = new ListStore<BaseModel>();

combo.setStore(store);
combo.setDisplayField("name");
// complete the SimpleComboBox properties here.

// Now, we will create data sample for the answer
BaseModel model = new BaseModel();
model.set("id", 1);
model.set("name", "Java");
store.add(model);

BaseModel model = new BaseModel();
model.set("id", 2);
model.set("name", "PHP");
store.add(model); 
```

正如您从代码片段中看到的，BaseModel 将数据存储为键/值对，因此您可以轻松地从 SimpleComboBox 中获取所选元素，例如：

```
BaseModel selectedModel = (BaseModel) combo.getValue();
String techName = selectedModel.get("name"); // return value of key name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T20:50:35.890

```
// MySimpleComboBox extends SimpleComboBox
public MySimpleComboBox(){
    super(new ListStore<Person>(new ModelKeyProvider<Person>() {
        @Override
        public String getKey(Person item) {
            return item.id();
        }
    }), new LabelProvider<Person>() {
        @Override
        public String getLabel(Person item) {
            return item.toString();
        }
    });
} 
```

一旦我认为这是您正在寻找的东西（或您正在寻找的东西），我就这样做了。

# java - 奇怪的 java.sql.SQLException 错误

> ID：15044723
> 
> 赞同：0
> 
> 时间：2013-02-23T19:36:59.757
> 
> 标签：java, sql, dbase

我有一个奇怪的问题，我在网上找到的大多数东西都是指驱动程序或连接问题......

我正在解析抛出一个 dBASE 表来获取一些 id 号：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection cnxn = DriverManager.getConnection("jdbc:odbc:dBASE Files;DefaultDir=\"C:\"");
Statement stmt = cnxn.createStatement();
command = "SELECT * FROM table";
ResultSet result = stmt.executeQuery(command);
while (result.next()) {
    System.out.println(result.getInt(1));
} 
```

我在控制台中得到的结果是

```
1
2
3
4
...
1312
1313
1314
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Invalid string or buffer length
at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
at sun.jdbc.odbc.JdbcOdbc.SQLGetDataString(Unknown Source)
at sun.jdbc.odbc.JdbcOdbcResultSet.getDataString(Unknown Source)
at sun.jdbc.odbc.JdbcOdbcResultSet.getString(Unknown Source)
at sun.jdbc.odbc.JdbcOdbcResultSet.getString(Unknown Source) 
```

产生错误的行是：

```
System.out.println(result.getInt(1)); 
```

由于我从中得到了结果，我不认为这是连接错误或驱动程序错误。我看了看表格，第 1315 行似乎没有任何问题，我尝试将其删除，但什么也没有。顺便说一句，使用的表有 2376 行。

我尝试过使用另一个长度不同的表，并且在 417 行后也出现错误。

以防万一它有助于我在 Windows 7、64 位上，这些表是 dBASE IV。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:21:41.467

还有一个想法。如何从表中选择 1,314 条记录，但范围不同（例如，第 1,000 行 -> 2,313 行）？我想知道错误是否仍然发生。

# php - 安卓httppost错误

> ID：15044724
> 
> 赞同：0
> 
> 时间：2013-02-23T19:37:02.500
> 
> 标签：php, android, mysql

基本上我已经在数据库端设置了一些成员，我还做了一个注册表单，它将数据发布到数据库，但我遇到的问题是我的程序不会启动活动。当我注释掉它的 httppost 部分时，它可以工作，所以我相信我的问题与 PHP 文件有关，但已经发布了我所做的 java 代码。在另一个问题中，我将发布 PHP 代码。

```
try
{
    httpclient = new default HttpClient();
    httppost = new HttpPost("");
    nameValuePair = new arrayList < NameValuePair > (1);
    nameValuePair . add(new BasicNameValuePair("email", email . getText() . toString() . trim()));
    nameValuePair . add(new BasicNameValuePair("password", password . getText() . toString() . trim()));
    httppost . setEntity(new UrlEncodedF or mEntity(nameValuePair));
    response = httpclient . execute(httppost);
    ResponseHandler < String > responseHandler = new BasicResponseHandler();
     final Stringresponse = httpclient . execute(httppost, responseHandler);
    loginErrorMsg . setText("" + response);

    if(response . equalsIgnorecase ("Log in Successful"))
    {
        startActivity(new Intent(LoginActivity . this, HomescreenActivity . class ));
    }
}
catch(Exceptione)
{
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:55:54.653

```
 nameValuePair = new ArrayList<NameValuePair>(1);

    nameValuePair.add(new BasicNameValuePair("email", email.getText().toString().trim()));
    nameValuePair.add(new BasicNameValuePair("password", password.getText().toString().trim()));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePair));

    response = httpclient.execute(httppost);

    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    final HttpResponse responsed = httpclient.execute(httppost, responseHandler);

    final String response= EntityUtils.toString(responsed .getEntity());

    loginErrorMsg.setText(""+response);

     if(response.equalsIgnoreCase("Log in Successful"))
          startActivity(new Intent(LoginActivity.this, HomescreenActivity.class));                                                                       
}
catch(Exception e){
        e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:52:08.873

您是否请求了 Internet 权限？

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:50:05.683

如果不查看堆栈跟踪，很难知道问题所在，但我想说问题在于在 UI（主）线程上发出网络请求。

您需要在单独的线程上执行所有网络任务。

请参阅此[链接](http://www.javasrilankansupport.com/2012/11/asynctask-android-example-asynctask-in.html)以获取教程。

# c# - 如何在 SQLite 中查询命令并向 MessageBox 报告错误

> ID：15044725
> 
> 赞同：1
> 
> 时间：2013-02-23T19:37:11.967
> 
> 标签：c#, sqlite

怎么做？我花了 20 分钟搜索它，但找到了如何查询命令，但是有问题。我使用*System.Data.SQLite*

```
try 
{ 

    SQLiteConnection cnn = new SQLiteConnection(label2.Text); 
    cnn.Open();//Error is here! 
    SQLiteCommand cmd = cnn.CreateCommand(); 
    cmd.CommandText = textBox1.Text; 
    cmd.ExecuteNonQuery(); MessageBox.Show("Query is good!"); 
    cnn.Close();

} 
catch (SQLiteException ee) 
{ 
    MessageBox.Show(ee.Message);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-04T13:56:53.193

您可能在路径之前忘记了数据源

```
@"data source=C:\mydb.db" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:55:42.917

您只需要使用前缀 @ 字符来消除特殊字符的问题，或者您可以添加转义字符：-

```
@"D:\myserver\resources\default\scriptfiles\server.db"

"D:\\myserver\\resources\\default\\scriptfiles\\server.db" 
```

# java - 我对如何禁用更改以单击另一个单选按钮感兴趣？

> ID：15044726
> 
> 赞同：2
> 
> 时间：2013-02-23T19:37:12.887
> 
> 标签：java, android

单击Android活动中的某些单选按钮后如何禁用单选按钮组？

这是我的 XML 代码

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tPitanje1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="1\. Neposredno regulisanje saobracaja na putevima vrse:"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/tPitanje1"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="62dp" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            android:text="uniformisani komunalni policajci" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="unoformisani policijski sluzbenici" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="inspektori za drumski saobracaj" />
    </RadioGroup>

</RelativeLayout> 
```

这是我的 Java 代码

```
 package com.example.autoskola;

import android.app.Activity;
import android.os.Bundle;

public class obs1 extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.obs1);
    }

} 
```

**我对如何禁用更改以单击另一个单选按钮感兴趣？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:42:31.557

如果我理解正确，您希望在单击`RadioGroup`某个选项后禁用该选项。`RadioButton`只需添加一个`OnCheckedChangedListener`，如果单击的 id`RadioButton`是正确的，则使用 禁用该组`setEnabled(false)`。当然，`RadioGroup`除非您的代码中有一些其他逻辑可以重新启用，否则您无法重新启用。

```
RadioGroup radioGroup = (RadioGroup)findViewById (R.id.radioGroup1);
radioGroup.setOnCheckedChangedListener (new OnCheckedChangedListener(){
public void onCheckedChanged(RadioGroup group, int checkedId) 
{
  if (checkedId == R.id.radio0)
    group.setEnabled(false);
}
}); 
```

编辑：这似乎`setEnabled()`不起作用，因此您应该尝试更改代码，以便在检查时[循环遍历每个`RadioButton`](https://stackoverflow.com/a/9377769/1815485)`radio0`代码：

```
if (checkedId == R.id.radio0){
   for(int i = 0; i < group.getChildCount(); i++){
            ((RadioButton)rg1.getChildAt(i)).setEnabled(false);
        }
} 
```

# sql - 使用 ActiveRecord 或在 SQL 中将两个 SQL 查询合二为一

> ID：15044728
> 
> 赞同：0
> 
> 时间：2013-02-23T19:37:37.070
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord, sinatra

我目前正在使用[ActiveRecord 对项目进行分页](http://guides.rubyonrails.org/active_record_querying.html#limit-and-offset)：

```
def index
  params[:per_page] ||= 50
  @articles = Article.limit(params[:per_page]).offset(params[:page].to_i * params[:per_page].to_i)
  @articles_count = Article.count
end 
```

......它运作良好。

但是，我想知道是否可以使用 ActiveRecord 或纯 SQL（例如 postgresql）使用单个查询来执行这两个查询。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:32:27.087

您当然可以使用子查询，但这不会提高性能，因为 DBMS 仍将执行 2 个单独的查询：

```
SELECT
  article.*,
 (SELECT COUNT(*) FROM article) AS count
FROM article
LIMIT x
OFFSET y 
```

但是有了这个你就不能轻易地使用 ActiveRecord。

然而，MySQL 有一个内置函数`SELECT COUNT(*) FROM article`。但它会做同样的事情：它只是执行第二个查询`COUNT(*)`。

您的解决方案工作正常。

# sql - HSQLDB 2.2.9 运行脚本 + SqlFile

> ID：15044730
> 
> 赞同：2
> 
> 时间：2013-02-23T19:37:42.387
> 
> 标签：sql, hsqldb

当我搜索一些关于如何运行 SQL 脚本的 HSQLDB 示例时，我在[HSQLDB 2.2.9 Javadoc 文档中发现，在](http://hsqldb.org/doc/src//org/hsqldb/cmdline/SqlFile.html)*src/org/hsqldb/sample/SqlFileEmbedder.java*中有一个完美的示例，它使用了一些类 { *org.hsqldb.* hsqldb-2.2.9.jar 不包含的*cmdline.SqlFile* } 和 { *org.hsqldb.cmdline.SqlToolError } （!!!）但这很奇怪，因为我使用 Maven 下载库...*

Maven依赖：

```
 <dependency>
        <groupId>org.hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>2.2.9</version>
  </dependency> 
```

谁能告诉我我做错了什么？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:55:29.040

SqlTool 有一个单独的 jar，其中包含 SqlFile。此 jar 包含在 HSQLDB 下载包中，可从[http://hsqldb.org获得](http://hsqldb.org)

org.hsqldb 的 maven 目录在这里，并且还包含 sqltool 工件。

[https://oss.sonatype.org/content/repositories/releases/org/hsqldb/](https://oss.sonatype.org/content/repositories/releases/org/hsqldb/)

# python - 在 Python 中剥离 CSV 的前四行？

> ID：15044732
> 
> 赞同：1
> 
> 时间：2013-02-23T19:37:50.843
> 
> 标签：python, csv, delete-row

我有一批 50-60 个 csv 文件，无论出于何种原因，每个文件的前四行都有垃圾数据。然而，在垃圾数据之后，列标题被正确列出，文件的其余部分很好。我怎么能在python中剥离前四个文件的每个文件？到目前为止，这是我的代码：

```
import csv
total = open('C:\\Csv\\201.csv', 'rb')
for row in csv.reader(total):
    print row 
```

如您所见，我所做的只是打开文件并打印其内容。我一直在寻找删除 csv 文件某些方面的解决方案，但大多数要么删除整个列，要么取决于要删除的行的特定条件。就我而言，这只是一个顺序问题，每个文件都需要删除其前四行。非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T19:50:52.117

你可以这样做：

```
reader = csv.reader(total)
all(next(reader) for i in range(4)) 
```

或者

```
for i in range(4): next(reader) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T19:42:25.853

```
for i, line in enumerate(sys.stdin, -4):
    if i>=0: print line, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T20:46:08.077

您可以编写一个通用函数来跳过任何序列的前 n 项：

```
def skip_first(seq, n):
    for i,item in enumerate(seq):
        if i >= n:
            yield item 
```

要使用它：

```
import csv
with open('C:\\Csv\\201.csv', 'rb') as total:
    csvreader = csv.reader(total)
    for row in skip_first(csvreader, 4):
        print row 
```

这个函数是通用的，因为它可以跳过任何序列，而不仅仅是文件：

```
# Skip the first three
list = ['happy', 'grumpy', 'doc', 'sleepy', 'bashful', 'sneezy', 'dopey']
for item in skip_first(list, 3):
    print item 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:12:20.993

我很惊讶没有人建议在`islice`这里使用 Pythonic 方式......

```
from itertools import islice
with open('somefile') as fin:
    csvin = islice(csv.reader(fin), 4, None, None)
    for row in csvin:
        pass 
```

例子：

```
>>> r = range(10); list(islice(r, 4, None, None))
[4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-19T21:52:35.993

所有答案似乎都没有考虑到所需的标题行`DictReader`：除非第一行包含除字段列表之外的任何其他内容，否则`DictReader`将无法识别它们并正确解析。

而且因为`csv.reader`需要类似文件的对象，所以我不得不将其`StringIO`用作临时缓冲区（不是一个严重的问题，我通常有大约 20 行）。

```
with StringIO() as csvio:
    for i, line in enumerate(myfile.iter_lines()):
        if i < 5:
            continue
        else:
            csvio.write(line)

    reader = csv.DictReader(csvio) 
```

如果所有行都在内存中，将不胜感激如何为除第一个 N 之外的所有行创建类似文件的对象的更好建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-01T17:21:42.923

`skiprows`我很惊讶没有人在调用 read 函数时提到可用的参数。

```
df = pd.read_csv('somefile.csv',skiprows=4) 
```

`**skiprows**`您可以检查文件中包含标题的行，如果值为 k，则按删除前 k 行的方式赋予值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-02T13:36:54.150

这就是我要跳过文件中的前四行

```
df = pd.read_csv("C:/Users//...",skiprows=4) 
```

# flash - 第一个“如果条件”不起作用。请帮忙？

> ID：15044733
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:37:50.403
> 
> 标签：flash, actionscript

我正在尝试构建一个带有用户交互的二叉树程序。用户可以输入数字。二叉树将以图形方式构建。第一个 if 条件的目的是不允许用户输入相同的数字两次。但它不工作

```
input_num.restrict="0-9";
input_num.maxChars = 3;

AddButton.addEventListener(MouseEvent.CLICK,clicked);

function clicked(event_object:MouseEvent) 
{
    var check:Boolean;
    check==false;

    if(check==true)
        {
        output_text.text="works"
        }
    else if(input_num.text=="")
        {
        output_text.text="Field can not be empty"
        }
    else
        {
        output_text.text=""
        var number=Number(input_num.text);
        output_text.text="You entered "+number+""
        check==true;

        var root=number;

        var newCircle:Shape = new Shape();
        newCircle.graphics.lineStyle(4, 0x6D00D9);
        newCircle.graphics.beginFill(0xff005E);
        newCircle.graphics.drawEllipse(x+225.9, y+68.0, 40, 40);
        newCircle.graphics.endFill();
        addChild(newCircle);

        var tf:TextField = new TextField();
        var style:TextFormat = new TextFormat();
        style.bold=true;
        style.size=24;
        style.color=0xFFFF33;
        tf.text = root.toString();
        tf.x = x+236.9;
        tf.y = y+73.0;
        addChild(tf);
        tf.setTextFormat(style);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:16:39.290

首先，正如 Tezirg 指出的那样，您需要在函数`check` *之外创建变量。*通过在函数中创建它，它的范围被限制在函数中，当函数完成时它不再存在。`check`您在第二次运行该函数时看到的是一个不同*的*变量。[您可以在此处](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f54.html)阅读有关函数范围的更多信息。

第二，

```
check==true; 
```

是比较，而不是分配，所以它没有做任何事情。你需要：

```
check = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:42:22.227

每次调用您的方法时，都会重新构建范围内的变量，因此当第一个条件使用时，您的 check var 确实总是错误的。我不知道动作脚本，但我猜你的搜索是一个“静态变量”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T14:08:23.507

如前所述，`check`如果您希望它在每次调用时保持其值，请不要在函数中定义您的变量。

那么你应该更换

```
var check:Boolean;
check==false; 
```

经过

```
var check:Boolean = false; 
```

分配一个值`check`（与`check == true`大卫米尔指出的相同）。而且

```
if ( check==true ) 
```

是正确的，但你可以写

```
if (check) 
```

因为`check == true`is`true`当 的值为`check`...`true`所以它等价于`check`。

# c# - SQL Server 未显示在 Microsoft Visual Studio 2010 上

> ID：15044738
> 
> 赞同：2
> 
> 时间：2013-02-23T19:38:20.533
> 
> 标签：c#, sql-server, visual-studio-2010, sql-server-2012

我已经配置了我的 SQL Server，当我尝试连接到 SQL Server 管理中心中的表时，它曾经显示我的计算机名称，但现在它没有显示。有谁知道为什么会这样？

这是一张可以提供帮助的图片：

![截屏](../Images/70461deb2c5846567717578065807c48.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T19:48:07.080

您可以使用您的本地主机名称连接到 SQL 服务器，

`localhost\(instance name)`或者`.\(instance name)`

例如，在我的情况下，我通常输入`localhost\sqlexpress`

或只是`localhost` 或`127.0.0.1`或您的网络IP

然后您将能够看到您的数据库。

可以在[此处](https://stackoverflow.com/questions/10482113/cant-gain-access-to-my-database-created-though-visual-studio)找到另一个具有类似问题的帖子。希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:35:59.920

我认为你必须输入它，例如上面，但是一个快速指南（需要不到 15 分钟的时间来获得你正在寻找的基础知识）我建议看看：http: [//msdn.microsoft.com/en-我们/vstudio//bb466226.aspx?wt.slv=topsectionsee#formsoverdata](http://msdn.microsoft.com/en-us/vstudio//bb466226.aspx?wt.slv=topsectionsee#formsoverdata)

享受

库尔特 F。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T20:55:44.587

检查您的 SQL Server Browser 服务是否正在运行 - 这就是提供服务器列表的原因。这里有更多关于它的信息：http: [//msdn.microsoft.com/en-us/library/ms165724%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms165724%28v=sql.90%29.aspx)

它需要 UDP 端口 1434，这可能会被您的防火墙阻止

# javascript - 兑换 至

> ID：15044744
> 
> 赞同：0
> 
> 时间：2013-02-23T19:38:42.390
> 
> 标签：javascript, jquery

我有一个容器 div，其中有几个其他 div：

```
<div class='container'>
 <div>one</div>
 <div>two</div>
 <div>three</div>
 <div>four</div>
</div> 
```

我想把容器 div 中的所有 div 都改成 ps，这样看起来像：

```
 <div class='container'>
 <p>one</p>
 <p>two</p>
 <p>three</p>
 <p>four</p>
</div> 
```

我怎样才能通过 jquery 完成这个？提前致谢。

**编辑：** 我为缺乏明确性道歉，确切地说，我有多个 div 容器，每个容器内部都有其他 div。我不认为已经提供的答案只会改变 div 容器包含的 div，而是会改变所有的 div：

```
<!--block one-->
 <div class='container'>
 <div>one</div>
 <div>two</div>
 <div>three</div>
 <div>four</div>
</div>

 <!--block two-->
  <div class='container'>
 <div>one</div>
 <div>two</div>
 <div>three</div>
 <div>four</div>
</div>

  <!--block three-->
  <div class='container'>
 <div>one</div>
 <div>two</div>
 <div>three</div>
 <div>four</div>
</div> 
```

等等。我需要的是只有 div 类容器内的 div 被更改为 p：

```
 <div class='container'>
   <p>one</p>
   <p>two</p>
   <p>three</p>
   <p>four</p>
  </div>

 <div class='container'>
   <p>one</p>
   <p>two</p>
   <p>three</p>
   <p>four</p>
  </div> 
```

有一个小插件可以做到这一点：

```
 (function($) {
   $.fn.changeElementType = function(newType) {
    var attrs = {};

    $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
    });

    this.replaceWith(function() {
        return $(\"<\" + newType + \"/>\", attrs).append($(this).contents());
     });
     }
     })(jQuery); 
```

使用：

```
$(\"div\").changeElementType(\"p\"); 
```

但是这样做不会将所有 div 更改为 ps 吗？我将如何修改它以仅针对类容器中 div 内的 div？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:41:43.627

你不能真正改变 tagName，但你可以用 p 替换现有的 div：

```
$('.container').children('div').each(function(e, el) {
    $(el).replaceWith( $('<p />', {text: $(this).text()}) );
}); 
```

[**小提琴**](http://jsfiddle.net/pumfh/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T19:42:14.493

```
$(function() {
    $('.container > div').each(function() {
        $(this).contents().wrapAll("<p>").parent().unwrap();
    });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T19:43:12.430

如果您按*Contrl F*并打开查找工具，然后单击查找和替换类型“`<div>`查找”和“替换”上的“ `<p>`”，然后浏览您想要的并点击替换，那么它会很容易完成没有任何错误:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T19:46:15.450

尝试这个

```
$(".container").children("div").replaceWith(function(){

   return $("<p />").append($(this).contents());

}); 
```

# sql-server - 查看 SQL Server 数据库中的更改

> ID：15044746
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:38:56.493
> 
> 标签：sql-server, ssms

例如，我有网站，它是外部 SQL 数据库。我在我的网站上添加了页面。如何查看添加页面的 SQL 查询？如果SSMS有这样的能力就完美了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:57:14.227

我使用的一个需要访问服务器终端（例如通过 SSH）的有用技术是[watch](http://linux.die.net/man/1/watch)命令与[mysql --execute](http://dev.mysql.com/doc/refman/5.5/en/mysql-command-options.html#option_mysql_execute)结合使用。例如

```
$ watch -n .5 "mysql -uusername -ppassword db_name -t \
  -e 'SELECT id, name FROM tbl1 WHERE 1 order by created_at DESC LIMIT 5'" 
```

这将打印一个带有 MySQL 语句结果的屏幕，并在一秒钟内更新两次。`tbl1`可以在终端屏幕上观察到所做的任何更改。

命令行选项告诉 MySQL将`- t`输出制成表格，以便列值垂直对齐。

您还可以在`- e ''`命令行选项中添加多个语句，以分隔，`;`这样您就可以一次观察两个或多个表，并将输出视为彼此下方的 ASCII 格式表。

# c++ - std::vector 在末尾移动反向迭代器

> ID：15044747
> 
> 赞同：0
> 
> 时间：2013-02-23T19:38:58.597
> 
> 标签：c++, iterator

我有这种情况：

```
for(auto it = vec.rbegin(); it != vec.rend(); ++it)
{
    if(condition(it))
    {
        //Move it at end;
        break;
    }
} 
```

`*it`结束时最有效/最优雅的移动方式是`vec`什么？

编辑：`*it`，不是`it`

EDIT1：现在我使用：

```
auto val = *it; 
vec.erase((++it).base());
vec.push_back(val); 
```

但是我觉得效率不是很高...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:48:43.023

**要将其移至末尾：**

```
for(auto it = vec.rbegin(); it != vec.rend(); ++it)
{
    if(condition(it))
    {
        auto val = *it;
        vec.erase((++it).base());
        vec.push_back(val);
        break;
    }
} 
```

**与最后一个元素交换：**

```
for(auto it = vec.rbegin(); it != vec.rend(); ++it)
{
    if(condition(it))
    {
        auto it2 = --vec.end();
        auto val = *it;
        *it = *it2;
        *it2 = val;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:26:18.100

如果更喜欢标准算法而不是手动循环。所以我会使用[std::find_if](http://en.cppreference.com/w/cpp/algorithm/find)。

如果您需要保留元素的顺序，可以使用[std::rotate](http://en.cppreference.com/w/cpp/algorithm/rotate)移动到末尾：

```
auto rit = std::find_if(vec.rbegin(), vec.rend(), [](int i){ return i == 6; });
if (rit != vec.rend()) {
    auto it = rit.base();
    std::rotate(it-1, it, vec.end());
} 
```

如果您不需要保留订单，可以使用[std::iter_swap](http://en.cppreference.com/w/cpp/algorithm/iter_swap)：

```
auto it = std::find_if(vec.rbegin(), vec.rend(), [](int i){ return i == 6; });
if (it != vec.rend())
    std::iter_swap(it, vec.rbegin()); 
```

[演示](http://liveworkspace.org/code/Jflnn%242)

# asp.net - 无法将类型“diaryEntry”转换为 system.datetime

> ID：15044750
> 
> 赞同：0
> 
> 时间：2013-02-23T19:39:06.260
> 
> 标签：asp.net, datetime

在我的 diaryEntry 选项卡中；我有 id、siteId 和日期。我传递了一个日期，我希望列表“DiaryEntry”存储所有匹配的日期。然后我通过一个 foreach 传递这个列表，然后它应该在日历上突出显示屏幕上的日期。

```
 DateTime tempDate = System.Convert.ToDateTime(Session["Diary_Date"]);
        DateTime startOfMonth = new DateTime(tempDate.Year, tempDate.Month, 1);
        DateTime endOfMonth = startOfMonth.AddMonths(1).AddDays(-1);
    List<Diary_Entry> DiaryEntry = new List<Diary_Entry>();

        DiaryEntry = (from DE in db.Diary_Entries
                      where DE.Site_Id == 1
                      && DE.Date >= startOfMonth && DE.Date <= endOfMonth
                      select DE).ToList();

  foreach (DateTime d in DiaryEntry)//list is name of list you use avoue(in linq)
        {
            Calendar1.SelectedDates.Add(d);//CALENDAR 1 IS WHAT I CALLED IT IN ASPX
        } 
```

错误：无法将类型“diaryEntry”转换为 system.datetim

有人可以建议我如何解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:42:00.197

问题在这里：

```
foreach (DateTime d in DiaryEntry) 
```

`DiaryEntry`是`List<Diary_Entry>`，不是 的列表`DateTime`。

改成：

```
foreach (Diary_Entry d in DiaryEntry) 
```

现在对于 each `d`，您可以访问其`DateTime`成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:42:01.547

```
 foreach (var d in DiaryEntry)
        {
            Calendar1.SelectedDates.Add(d.Date); //assuming d.Date is a datetime
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T19:42:24.830

你的问题是你有 Diary_Entry 列表，而不是 DateTime，所以如果你想遍历 datetime 可枚举，你应该得到它。您可以使用 linq 执行此操作：

```
 foreach (DateTime d in DiaryEntry.Select(de=>de.Date))
    {
        Calendar1.SelectedDates.Add(d);//CALENDAR 1 IS WHAT I CALLED IT IN ASPX
    } 
```

# maven - Maven MultiWAR 项目：如何从根项目部署它们？

> ID：15044758
> 
> 赞同：3
> 
> 时间：2013-02-23T19:39:34.150
> 
> 标签：maven, tomcat, tomcat7, maven-3, maven-tomcat-plugin

我正在使用多模块 Maven 项目。一些模块只是 JAR，但其中一些是 WAR（有时 WAR 是其他子模块的子模块）。

我正在使用 tomcat 插件的那些 WAR 模块。例如：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.1</version>
            <configuration>
                <server>my_local_tomcat</server>
                <path>/registration</path>
                <url>http://localhost:8080/manager/text</url>
            </configuration>
        </plugin> 
```

现在我必须进入根目录，然后执行`mvn clean install`，然后进入包含 WAR 的子模块并`mvn tomcat:redeploy`为每个模块执行。

是否可以从根模块强制`Maven`查找 WAR 并重新部署它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:36:44.480

在要部署的每个模块中，添加一个 tomcat-deploy 配置文件

```
 <profiles>
<profile>
  <id>tomcat-deploy</id>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <configuration>
          <server>my_local_tomcat</server>
          <path>/registration</path>
          <url>http://localhost:8080/manager/text</url>
        </configuration>
        <executions>
          <execution>
            <id>deploy-war</id>
            <phase>install</phase>
            <goals>
              <goal>deploy-only</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</profile> 
```

现在运行： mvn install -Ptomcat-deploy

# java - DialogFragment 行为异常

> ID：15044761
> 
> 赞同：2
> 
> 时间：2013-02-23T19:39:44.523
> 
> 标签：java, android, dialog

嗨，我已使用此 DialogFragment 在我的应用程序中显示日期选择器

```
public class DateDialogFragment extends DialogFragment  implements DatePickerDialog.OnDateSetListener{

        public DateDialogFragment()
        {
        }
        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            Calendar cal=Calendar.getInstance();
            int year=cal.get(Calendar.YEAR);
            int month=cal.get(Calendar.MONTH);
            int day=cal.get(Calendar.DAY_OF_MONTH);
            return new DatePickerDialog(getActivity(), this, year, month, day);
        }
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            showSetDate(year,monthOfYear,dayOfMonth);
        }

        }

    public void showSetDate(int year,int month,int day) {
    text.setText(year+"/+"+month+"/"+day);
    } 
```

如果在我以前的应用程序中使用过相同的。最近它 DateDialogFragment 表现得很奇怪。在 Eclipse 中，它显示错误 DateDialogFragment 应该是静态的。但是当我清理项目一次时。它在项目中没有显示任何错误，并且运行良好。我已经浏览了这个[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)，它确认它需要类是静态的。但是为什么它允许我使用它，即使我在清理项目时没有给出静态。这发生在最近之前它没有显示任何这样的错误。当我与团队成员共享项目时，同样没有显示任何错误。为什么会这样。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:48:26.253

您看到这个的原因是因为 Android 有时需要自己实例化`Fragment`它。这适用于*任何* `Fragment`.

当您创建一个`static`内部类时，这意味着它不依赖于外部类的任何特定实例。所以假设你有：

```
public class A {
  public static class B {
    // ...
  }
  public class C {
    // ...
  }
} 
```

在这种情况下，您不能`new C()`从外部进行操作，`A`因为 的所有实例都`C`属于一个`A`对象。但是，您*可以*`new B()`执行或`new A.B()`。

这同样适用于片段；`new DateDialogFragment()`如果类不是静态的，Android 就无法做到。您没有收到错误的原因（尽管 Lint*应该*告诉您）是因为您正在实例化`DateDialogFragment`自己。

但是，如果您触发了诸如方向更改之类的操作并且不`Fragment`手动重新创建，Android 会为您执行此操作。做不到，就会崩溃。

但是，如果类*是*静态的，Android*可以*创建它的实例。因此，嵌套`Fragment`类应该*始终*是`static`.

# cakephp - Auth->login() 总是登录用户

> ID：15044764
> 
> 赞同：1
> 
> 时间：2013-02-23T19:39:49.560
> 
> 标签：cakephp, cakephp-2.1

在我的 AppController 中：

```
public $components = array('Auth' => array(
    'authenticate' => array('Blowfish')
), 
```

在我的用户控制器中：

```
public function login() {    

if($this->request->isPost()) {
        $this->autoRender = false;
        if($this->Auth->login()) {
            $this->response->statusCode(200);
        }
        else {
            $this->response->statusCode(401);
        }
    }

} 
```

并且发布到`/users/login`响应的任何数据始终为 200 并且用户已登录。我如何强制 Auth 不登录但检查数据库中的用户名和密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:15:46.477

我也遇到了河豚的问题。

但是，您是否记得更改密码在数据库中的存储方式？

您必须在“用户”模型中执行此操作：

```
App::uses('Security', 'Utility');

class User extends AppModel {

public function beforeSave($options = array()) {
    // Use bcrypt
    if (isset($this->data['User']['password'])) {
        $hash = Security::hash($this->data['User']['password'], 'blowfish');
        $this->data['User']['password'] = $hash;
    }
    return true;
}

} 
```

# python - 嗨，我如何将这个随机生成的局部变量的最终结果变成全局变量？Python

> ID：15044765
> 
> 赞同：-3
> 
> 时间：2013-02-23T19:40:06.733
> 
> 标签：python, global-variables, global

所以这就是我得到的：

```
x = ['a', 'b', 'c']

y = ['a', 'b', 'c']

def stuff(this, that):
  this = x[randint(0, 2)]
  that = y[randint(0, 2)]
  while this != 'c' or that != 'c'
     print "some %r stuff here etc..." % (this, that)
     this = x[randint(0, 2)]
     that = y[randint(0, 2)] 

stuff(x[randint(0, 2)], x[randint(0, 2)]) 
```

**当然，这只是程序的“要点”。**

所以一切都很好，就像我想要的那样，直到这部分结束。我遇到的问题是，当我尝试在全局范围内打印或使用成功的 while 循环的最终结果时，我显然得到了一个 NameError，当我尝试将全局添加到函数内的变量时，我得到 SyntaxError: name ' blah' 是全球性和本地性的。如果我在函数外部创建随机变量，那么我打印出来的是那个变量，而不是满足 while-loop 语句的那个​​变量。

现在我知道我可以将 print 放入函数中，但这只是重复上述基本步骤的更大程序的一部分。我想将总结果一起打印出来：

```
print "blah blah is %r, and %r %r %r etc.. blah blah.." % (x, y, z, a, b, etc) 
```

如何解决这个问题，以便我可以准确地收集满足 while 循环的变量并在整个程序的其他部分使用它们？PS：对不起，我还处于学习阶段..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T19:42:41.433

使用`return`语句将结果返回给调用者。这是传递变量的首选方式（`global`并不理想，因为它会使全局命名空间变得混乱，并且可能会在以后产生名称冲突问题）。

```
def pick_random(x, y):
    return random.choice(x), random.choice(y)

this, that = pick_random(x, y) 
```

如果你想继续从函数中产生值，你可以使用*`yield`*：

```
def pick_random(x, y):
    while True:
        this, that = random.choice(x), random.choice(y)
        if this == 'c' and that == 'c':
            return
        yield this, that

for this, that in pick_random(x, y):
    print this, that 
```

# android - android 2.3 上使用相对布局时的奇怪布局行为

> ID：15044768
> 
> 赞同：1
> 
> 时间：2013-02-23T19:40:47.147
> 
> 标签：android, android-layout

我有一个行为奇怪的布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@color/transparent_settings"
            android:clickable="true"
            android:focusable="true"
    >

<Button
        android:layout_width="145dp"
        android:layout_height="48dp"
        android:background="@color/white"
        android:layout_centerInParent="true"
        android:id="@+id/centralButton"
        android:textSize="13sp"
        android:visibility="invisible"
        />

<LinearLayout
        android:layout_width="145dp"
        android:layout_height="48dp"
        android:background="@color/white"
        android:layout_centerHorizontal="true"
        android:id="@+id/facebookLayout"
        android:layout_above="@+id/layoutLevel1"
        android:layout_marginTop="20dp"
        >

    <ImageView android:id="@+id/facebookImage"
               android:layout_width="30dp"
               android:layout_height="30dp"
               android:layout_margin="10dp"
               android:src="@drawable/logo_facebook_off"
            />

    <TextView android:id="@+id/facebookText"
              android:layout_width="wrap_content"
              android:layout_height="fill_parent"
              android:text="@string/publish_facebook"
              android:textColor="@color/color_black"
              android:gravity="center_vertical"
              android:textSize="11sp"
            />

</LinearLayout>

<LinearLayout
        android:id="@id/layoutLevel1"
        android:layout_width="300dp"
        android:layout_height="48dp"
        android:background="@color/transparent_color"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:layout_above="@+id/layoutLevel2"
        android:orientation="horizontal"
        >

    <LinearLayout
            android:layout_width="145dp"
            android:layout_height="50dp"
            android:background="@color/white"
            android:layout_marginRight="5dp"
            android:id="@+id/vkLayout"
            >

        <ImageView android:id="@+id/vkImage"
                   android:layout_width="30dp"
                   android:layout_height="30dp"
                   android:layout_margin="10dp"
                   android:src="@drawable/logo_vkontakte_off"
                />

        <TextView android:id="@+id/vkText"
                  android:layout_width="wrap_content"
                  android:layout_height="fill_parent"
                  android:text="@string/publish_vk"
                  android:textColor="@color/color_black"
                  android:gravity="center_vertical"
                  android:textSize="11sp"
                />

    </LinearLayout>

    <LinearLayout
            android:layout_width="145dp"
            android:layout_height="50dp"
            android:background="@color/white"
            android:layout_marginLeft="5dp"
            android:id="@+id/cmLayout"
            >
        <ImageView android:id="@+id/cmImage"
                   android:layout_width="30dp"
                   android:layout_height="30dp"
                   android:layout_margin="10dp"
                   android:src="@drawable/logo_cm_off"
                />

        <TextView android:id="@+id/cmText"
                  android:layout_width="wrap_content"
                  android:layout_height="fill_parent"
                  android:text="@string/publish_odnoklassniki"
                  android:textColor="@color/color_black"
                  android:gravity="center_vertical"
                  android:textSize="11sp"
                />

    </LinearLayout>

</LinearLayout>

<LinearLayout
        android:id="@id/layoutLevel2"
        android:layout_width="300dp"
        android:layout_height="48dp"
        android:background="@color/transparent_color"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:layout_above="@id/centralButton"
        android:orientation="horizontal"
        >

    <LinearLayout
            android:layout_width="145dp"
            android:layout_height="50dp"
            android:background="@color/white"
            android:layout_marginRight="5dp"
            android:id="@+id/twitterLayout"
            >
        <ImageView android:id="@+id/twitterImage"
                   android:layout_width="30dp"
                   android:layout_height="30dp"
                   android:layout_margin="10dp"
                   android:src="@drawable/logo_twitter_off"
                />

        <TextView android:id="@+id/twitterText"
                  android:layout_width="wrap_content"
                  android:layout_height="fill_parent"
                  android:text="@string/publish_twitter"
                  android:textColor="@color/color_black"
                  android:gravity="center_vertical"
                  android:textSize="11sp"
                />

    </LinearLayout>

    <LinearLayout
            android:layout_width="145dp"
            android:layout_height="50dp"
            android:background="@color/white"
            android:layout_marginLeft="5dp"
            android:id="@+id/flickrLayout"
            >
        <ImageView android:id="@+id/flickrImage"
                   android:layout_width="30dp"
                   android:layout_height="30dp"
                   android:layout_margin="10dp"
                   android:src="@drawable/logo_flickr_off"
                />

        <TextView android:id="@+id/flickerText"
                  android:layout_width="wrap_content"
                  android:layout_height="fill_parent"
                  android:text="@string/publish_flickr"
                  android:textColor="@color/color_black"
                  android:gravity="center_vertical"
                  android:textSize="11sp"
                />
    </LinearLayout>

</LinearLayout>

<Button
        android:layout_width="145dp"
        android:layout_height="48dp"
        android:background="@color/white"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="10dp"
        android:layout_below="@id/layoutLevel2"
        android:id="@+id/edit"
        android:text="@string/edit_label_2"
        android:textSize="13sp"
        android:layout_marginTop="45dp"
        />

<Button
        android:layout_width="145dp"
        android:layout_height="48dp"
        android:background="@color/white"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="10dp"
        android:layout_below="@id/edit"
        android:id="@+id/download"
        android:text="@string/download_label"
        android:textSize="13sp"
        />

<Button
        android:layout_width="145dp"
        android:layout_height="48dp"
        android:background="@color/white"
        android:layout_centerHorizontal="true"
        android:layout_below="@id/download"
        android:id="@+id/delete"
        android:text="@string/delete_label"
        android:textSize="13sp"
        />

<Button
        android:layout_width="145dp"
        android:layout_height="48dp"
        android:background="@color/white"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="49dp"
        android:layout_above="@+id/bottom"
        android:id="@+id/cancel"
        android:text="@string/photo_remove_photo_alert_cancel_button"
        android:textSize="13sp"
        android:visibility="invisible"
        />

<View android:layout_alignParentBottom="true"
      android:id="@id/bottom"
      android:layout_width="1dp"
      android:layout_height="1dp"/> 
```

它在 android 4.2 上工作得很好。但是，当我使用 android 2.3 在三星 Galaxy ace 上安装应用程序时，布局就坏了。每个组件（按钮、图像、文本）都显示并汇聚在屏幕顶部。一个按钮在另一个按钮上，依此类推

![在此处输入图像描述](../Images/6fbc0330746cd862899146216cc2e166.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:38:45.077

首先前往图形部分并重新排列组件按钮文本和图像我的拖动。如果它不起作用那么你可以在这里手动添加代码你去看看这个例子它适用于我的每台设备。如果它对你有用，不要忘记 +1 这篇文章！

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/dashLL"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@layout/list_layer"
android:orientation="vertical" >

<TextView
    android:id="@+id/tvdashhead"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="ADMIN|  Dashboard"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@android:color/black" />

<EditText
    android:id="@+id/etDUrl"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/tvdashhead"
    android:layout_below="@+id/tvdashhead"
    android:hint="URL 1"
    android:inputType="textWebEditText" />
 <EditText
    android:id="@+id/etdURL2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/etDUrl"
    android:layout_below="@+id/etDUrl"
    android:hint="URL 2" />

 <EditText
    android:id="@+id/etdURl1Nick"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/tvdashhead"
    android:layout_toRightOf="@+id/etDUrl"
    android:hint="Name" />

 <EditText
    android:id="@+id/etdURl2NICk"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/etdURl1Nick"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/etdURl1Nick" 
    android:hint="Name">

    <requestFocus />
</EditText>
 <EditText
    android:id="@+id/etdURL3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/etdURL2"
    android:layout_below="@+id/etdURL2" 
    android:hint="URL 3"/>
 <EditText
    android:id="@+id/etdURl3Nick"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/etdURl2NICk"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/etdURl2NICk"
    android:hint="Name" />

<Button
    android:id="@+id/bDashTestUrl"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/etdURL3"
    android:layout_marginTop="31dp"
    android:enabled="false"
    android:text="Test" />

<Button
    android:id="@+id/bDashSaveUrl"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/bDashTestUrl"
    android:enabled="false"
    android:text="Save" />

<Button
    android:id="@+id/bdClear"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/bDashSaveUrl"
    android:text="Clear" />

<Button
    android:id="@+id/blogout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/bDashSaveUrl"
    android:text="Logout" /> 
```

![看看我的布局如何](../Images/51765b50ef975f558f33bf0fdf2d5a48.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:21:13.843

问题是，当片段被替换时，即使在 android 4+ 上，它也被压缩到第二张图片中显示的状态，并且当片段被添加时它就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:09:05.153

尝试`android:orientation="vertical"`从 RelativeLayout 中删除。它仅用于线性布局

# c# - 带有 & 符号的 XML 片段

> ID：15044771
> 
> 赞同：0
> 
> 时间：2013-02-23T19:41:15.763
> 
> 标签：c#, xml, streamreader, xmlreader

在很多帮助下，我制定了以下代码：

```
if (ofd.ShowDialog() == DialogResult.OK)
{
    using (StreamReader reader = new StreamReader(ofd.FileName, Encoding.GetEncoding("ISO-8859-1")))
    {
        XmlReaderSettings settings = new XmlReaderSettings();
        settings.ConformanceLevel = ConformanceLevel.Fragment;
        using (XmlReader xreader = XmlReader.Create(reader, settings))
        {
            while (xreader.Read())
            {
                DoSomething();
            }
        }
    } 
```

我只剩下一个问题，那就是“xml 文档”中的某些地方有一个 & 符号：

```
<name>Me & You</name> 
```

我知道这不是一个有效的 XML 片段，并且应该使用 & 转义与号，但是在我的场景中更改文档不是一个选项。有什么想法可以在不更改文档的情况下用 XML 读取吗？也许改变 StreamReader 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:47:22.883

必要时继承`TextReader`并覆盖`ReadLine`替换每行字符的方法。将您的新流阅读器传递给`XmlReader`，它将永远不会看到无效实体。

编辑：虽然`XmlReader`支持`TextReader`，但它似乎没有调用该`ReadLine`方法......相反，看起来我们可能必须`Stream`直接子类化并使用`byte[] buffer`.

编辑：以下是我认为应该过滤通用流并用编码实体替换＆符号的内容。由于它使用流字节，它没有任何编码概念，因此假定为 ASCII。它目前只处理＆符号，但对其他实体进行编码也应该是微不足道的。它在一个 2.5 Gb 的文件上进行了尝试，发现它只增加了大约 3% 的处理时间，而且内存负载似乎没有受到影响。话虽如此，它肯定没有经过充分的测试。我敦促您确保它生成的文件与具有不同缓冲区大小的输入文件相同。例如：

```
using (var output = File.Open(@"out.xml", FileMode.Create))
using (var input = new AmpersandFilterText(File.Open(@"in.xml", FileMode.Open))
    input.CopyTo(output); 
```

然后对文件进行二进制比较。

编辑#3：我误读了 上的方法签名`TextReader`，`XmlReader`只是调用`Read(char[], int, int)`. 无论如何，请参阅下面的不依赖于字符编码的实现。

```
class TestProgram
{
    static void Main(string[] args)
    {
        var stringReader = new MemoryStream(Encoding.ASCII.GetBytes("<name>Me & You</name>"));
        var textReader = new AmpersandFilterText(stringReader);

        XmlReaderSettings settings = new XmlReaderSettings();
        settings.ConformanceLevel = ConformanceLevel.Fragment;
        using (XmlReader xreader = XmlReader.Create(textReader, settings))
        {
            while (xreader.Read())
            {
                Console.WriteLine(xreader.Value);
            }
        }

        Console.ReadLine();
    }
}

class AmpersandFilterText : StreamReader
{
    public AmpersandFilterText(Stream stream)
        : base(stream)
    {
    }

    private StringBuilder sbBuffer = null;
    private int bufferOffset = 0;

    public override string ReadLine()
    {
        var rawLine = base.ReadLine();
        rawLine = rawLine.Replace("&", "&amp;");
        return rawLine;
    }

    public override int Read()
    {
        char cChar;
        if (sbBuffer != null)
        {
            cChar = sbBuffer[bufferOffset];
            bufferOffset++;
            evalBuffer();
            return cChar;
        }
        else
        {
            cChar = (char)base.Read();
            if (cChar == '&')
                sbBuffer = new StringBuilder("amp;");
            return cChar;
        }
    }

    public override int Read(char[] buffer, int index, int count)
    {
        int destOffset = 0;
        const string replacement = "&amp;";

        //exhaust our buffer first
        if (sbBuffer != null)
        {
            int bufferedToConsume = Math.Min(count, sbBuffer.Length - bufferOffset);
            sbBuffer.CopyTo(bufferOffset, buffer, index, bufferedToConsume);
            destOffset += bufferedToConsume;
            bufferOffset += bufferedToConsume;
            evalBuffer();
        }

        //then, if needed, read more data
        if (destOffset < count)
        {
            char[] newBuffer = new char[count - destOffset];
            var newRead = base.Read(newBuffer, 0, newBuffer.Length);

            //process new data and return directly
            int sourceOffset = 0;
            while (sourceOffset < newRead && destOffset < count)
            {
                char tChar = newBuffer[sourceOffset];
                if (tChar == '&')
                {
                    int replacementOffset = 0;
                    while (replacementOffset < replacement.Length && destOffset < count)
                    {
                        buffer[destOffset + index] = replacement[replacementOffset];
                        destOffset++;
                        replacementOffset++;
                    }

                    sourceOffset++;

                    //we did not copy the entire replacement
                    if (replacementOffset < replacement.Length)
                    {
                        //put the remainder in next time
                        sbBuffer = new StringBuilder();
                        sbBuffer.Append(replacement, replacementOffset, replacement.Length - replacementOffset);
                    }
                }
                else
                {
                    buffer[destOffset + index] = tChar;
                    destOffset++;
                    sourceOffset++;
                }
            }

            //we have unused data
            if (sourceOffset < newRead)
            {
                if (sbBuffer == null)
                    sbBuffer = new StringBuilder();

                //add data after replace
                for (; sourceOffset < newRead; sourceOffset++)
                {
                    char tChar = newBuffer[sourceOffset];
                    if (tChar == '&')
                        sbBuffer.Append(replacement);
                    else
                        sbBuffer.Append(tChar);
                }
            }
        }

        return destOffset;
    }

    public override int ReadBlock(char[] buffer, int index, int count)
    {
        return this.Read(buffer, index, count);
    }

    public override int Peek()
    {
        if (sbBuffer != null)
            return sbBuffer[bufferOffset];

        return base.Peek();
    }

    public override string ReadToEnd()
    {
        string cLine;
        StringBuilder sbTemp = new StringBuilder();
        while ((cLine = this.ReadLine()) != null)
            sbTemp.AppendLine(cLine);
        return sbTemp.ToString();
    }

    private void evalBuffer()
    {
        if (bufferOffset == sbBuffer.Length)
        {
            //TODO: check perf on sbBuffer.Clear
            sbBuffer = null;
            bufferOffset = 0;
        }
    }
} 
```

# ajax - 在 jQM 应用程序中使用 JSON 映射 Knockout.js 时遇到问题

> ID：15044773
> 
> 赞同：0
> 
> 时间：2013-02-23T19:41:23.113
> 
> 标签：ajax, jquery-mobile, knockout.js, jsonp, knockout-mapping-plugin

好的，我已经放弃尝试破解它，请帮助社区：

我正在尝试映射来自服务器的 JSONP 响应以填充此 HTML：

```
<!-- ko foreach: featConfirm.confirmPages -->
    <div data-role="page" class="featConfirm" data-bind="template: {name: 'featConfirm_tmp'}, attr: {'id': featConfirm.assignPageID($data.position), 'pos': $data.position}" ></div>
<!-- /ko -->

<script type="text/html" id="featConfirm_tmp">
    <div data-role="content">
        <div class="header"><img class="owner-image" src="img/filler.jpg" />
            Did <span class="owner-name" data-bind="text: featConfirm.featOwner.full_name"></span>
        </div>   
    </div>
</script> 
```

这是 js 设置 - 这是迄今为止我最好的猜测，但显然它不起作用，但它确实创建了正确数量的带有 id 的页面，但是，我无法从 JSON 数组中的其他位置访问任何数据：

```
function master(){
    var self = this;
    self.featConfirm = new function(){
        var self = this;
        /* KO observable used to populate view */
        self.confirmPages = ko.observableArray([]);
        /* AJAX call to server to get confirmable feats */
        self.getFeatsForConfirm = function(){
            jQuery.ajax({
                                url: sourcesURL + 'myPHP.php',
                                type: 'POST',
                                dataType: 'jsonp',
                                jsonp: 'jsoncallback',
                                success: function(bData, textStatus, jqXHR){

                                /* this is my best guess so far but obviously it does not work however it does create the proper number of pages with id's I can't access any data from elsewhere in the JSON array */
                                for (i=0;i<bData.length;i++){
                                    var a = {position: i+1, data: ko.mapping.fromJSON(bData[i])};
                                    self.confirmPages.push(a);
                                    }
                                    },
                                error:  function(jqXHR, textStatus, errorThrown){
                                    console.log('There was an error submitting your request');
                                    }
                                });
            };
        }
    }
/* init Knockout */ 
ko.applyBindings(master()); 
```

我的 JSON 是这样的：

```
([
  {
    "featDetails":{"attempt":"39","owner":"2"},
    "featSpecs":{"id":"1347387875","name":"Eat a tomato"},
    "featOwner":{"full_name":"Darth Freakin Vader"}
  },
  {
    "featDetails":{"attempt":"44","owner":"1"},
    "featSpecs":{"id":"1352986771","name":"Drink Coffee"},
    "featOwner":{"full_name":"Luke Sywalker"}
  }
]) 
```

我显然从根本上误解了映射插件的工作原理，这就是我求助于你的原因。我已经从**JSON**数据的每个数组中删除了很多值，这就是我想使用插件的原因，但这是基本结构。

*   是不是可以通过这种方式用映射插件映射JSONP，
*   我没有得到什么，
*   我将如何正确映射这些数据，以便我可以在 HTML 中访问它。

在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:10:30.200

是的，可以将 JSONP 与映射插件一起使用（KO 和映射插件不关心数据来自哪里）。您的代码的主要问题似乎是您没有注意 KO 范围/绑定上下文的嵌套。

为每个`foreach`项目创建一个嵌套范围（上下文项目将只是数组中的当前项目），因此`featConfirm`在嵌套上下文中引用没有意义 - 您需要使用 $parent/$ 引用父/根绑定root （例如`$root.featConfirm.assignPageID`）或引用实际上在嵌套范围内的事物（例如`featOwner.full_name`，而不是`featConfirm.featOwner.full_name`）。

对于模板绑定，您没有指定任何`data`内容，因此它没有创建嵌套范围，但由于您正在创建包装数据 ( `var a`) 的对象，您可能希望`data`为模板绑定指定：`data-bind="template: {name: 'featConfirm_tmp', data: $data.data}`这将创建另一个嵌套范围。

最后，由于您在成功回调中迭代 bData，并且这是一个 JS 对象（jQuery 已经为您解析了 JSON），因此您需要`fromJS`使用`fromJSON`.

这是一个带有这些更改的工作 jsfiddle（我稍微更改了 ajax 以使用 jsfiddle 模拟服务器响应，但您的 jsonp ajax 选项很好）：http: [//jsfiddle.net/antishok/592q9/3/](http://jsfiddle.net/antishok/592q9/3/)

# android - 在 Android 4.2 上拆分铃声和通知音量？

> ID：15044774
> 
> 赞同：0
> 
> 时间：2013-02-23T19:41:29.277
> 
> 标签：android, notifications, android-4.2-jelly-bean

是否有任何选项如何以编程方式或某些应用程序拆分此卷？一些应用程序（智能声音配置文件、声音配置文件和许多其他应用程序）表示它们可以拆分通知和铃声，但 ANY 确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T12:25:21.557

现有的 Nexus 4 没有这样的选项来调整独立于铃声音量的通知。我了解股票 Galaxy Nexus 也有同样的问题。我知道要“恢复”此功能的唯一方法是 root 并安装自定义 ROM 或使用 3rd 方应用程序，例如 [Sound Profile](https://play.google.com/store/apps/details?id=Orion.Soft&feature=search_result#?t=W251bGwsMSwxLDEsIk9yaW9uLlNvZnQiXQ..)，但我并没有取得很大的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:47:01.090

我不知道你到底在问什么。Android 维护具有单独卷的音频流。这些流中的每一个都可以单独设置。要设置音量，请使用音频管理器和 setStreamVolume()。查看此类[http://developer.android.com/reference/android/media/AudioManager.html](http://developer.android.com/reference/android/media/AudioManager.html)每个静态变量 STREAM_XXXX 都是对该音频流的引用。

根据评论更新：

如果系统设置 > 声音选项 > 音量下可能有设置将其设置为使用来电音量进行通知。这取决于个别手机和制造商的修改，因此您可能需要寻找它。

# python - 将一个类与其自身相关联

> ID：15044777
> 
> 赞同：3
> 
> 时间：2013-02-23T19:41:51.037
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我有一个类`Revision`，`Revision`具有以下定义：

```
class Revision(db.Model):
    id = db.Column(db.Unicode, primary_key=True)
    text = db.Column(db.Unicode) 
```

此外，每个人都`Revision` *可以*有一个祖先，就像与另一个人的关系一样`Revision`。每个`Revision`人还应该跟踪任何后继者，即以`Revision`它为祖先的s。我尝试了以下两种方法：

```
ancestorId = db.Column(db.Unicode, db.ForeignKey("revision.id"))
successors = db.relationship("Revision", backref="ancestor", lazy="dynamic") 
```

抛出：

```
sqlalchemy.exc.ArgumentError: Revision.successors and back-reference Revision.ancestor are both of the same direction <symbol 'ONETOMANY>.  Did you mean to set remote_side on the many-to-one side ? 
```

和

```
successors = db.relationship("Revision", backref="ancestor", lazy="dynamic") 
```

抛出：

```
sqlalchemy.exc.ArgumentError: Could not determine join condition between parent/child tables on relationship Revision.successors.  Specify a 'primaryjoin' expression.  If 'secondary' is present, 'secondaryjoin' is needed as well. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:51:34.727

你想要的是所谓的[*邻接列表*](http://docs.sqlalchemy.org/en/latest/orm/self_referential.html#adjacency-list-relationships)。SQLAlchemy在其示例目录中有一个[示例。](https://github.com/zzzeek/sqlalchemy/blob/master/examples/adjacency_list/adjacency_list.py)重要的部分是`remote_side`backref 的参数：

```
ancestorId = db.Column(db.Unicode, db.ForeignKey(id))
successors = db.relationship("Revision",
                             backref=db.backref("ancestor", remote_side=id),
                             lazy="dynamic") 
```

# python - 如何从 django 的 auth_user 表中获取用户 ID？

> ID：15044778
> 
> 赞同：6
> 
> 时间：2013-02-23T19:41:51.820
> 
> 标签：python, django

如何从 `auth_user`django 中的表中获取用户 ID。假设用户名对我可用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-23T19:44:07.420

假设用户存在：

```
from django.contrib.auth.models import User

User.objects.get(username=the_username).pk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-12T19:39:07.603

用户没有后端，因此您必须使用 UserManager （或 BaseUserManager 如果您有自定义 User 类）

```
BaseUserManager.get_by_natural_key(username) 
```

[https://docs.djangoproject.com/en/1.6/topics/auth/customizing/#django.contrib.auth.models.BaseUserManager](https://docs.djangoproject.com/en/1.6/topics/auth/customizing/#django.contrib.auth.models.BaseUserManager)

# linux - 当管道的第一个命令不输出时如何不输出任何内容

> ID：15044779
> 
> 赞同：1
> 
> 时间：2013-02-23T19:41:59.697
> 
> 标签：linux, bash, shell, pipe

我有 2 个命令，我想像这样管道：`command1 | command2`. 当`command1`根本不输出任何东西时`command2`仍然输出。`command1 | command2`什么都不输出时如何停止 输出`command1`？

具体例子：

```
function find_string_in_file {
find . -iname "*$1*" | xargs ack-grep "$2"
}
alias findag='find_string_in_file' 
```

如果`filename.py`当前目录或其子文件夹中不存在，则`findag filename.py "some word"`仍返回与`ack-grep "some word"`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T19:50:15.200

管道不是有条件的，因此您不能根据先前阶段的退出状态禁用后面的阶段。对于您的特定示例，您可以修改`find`命令以避免需要管道。

```
find . -iname "*$1*" -exec ack-grep "$2" '{}' + 
```

如果没有匹配的文件，`exec`则不会触发测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:51:09.283

您可以更改您使用`xargs`的方式来要求`ack-grep`按行而不是通过管道读取参数。这将按您的预期工作

```
find . -iname "*$1*" | xargs -I{} ack-grep "$2" {} 
```

# ruby - Ruby DataMapper 一对多关联不会使用 :parent_key 保存

> ID：15044787
> 
> 赞同：0
> 
> 时间：2013-02-23T19:42:17.290
> 
> 标签：ruby, datamapper, ruby-datamapper

我已经使用特定的父键和子键设置了以下模型：

```
class Province
  include DataMapper::Resource

  property :name_short, String, key: true, length: 2, unique: true
  property :name_long,  String, length: 1..50

  has n, :municipalities, 'Municipality',
    parent_key: [:name_short],
    child_key: [:province]
end

class Municipality
  include DataMapper::Resource

  property :province,            String, key: true, length: 2
  property :name,                String, key: true, length: 1..40
  property :lat,                 Float
  property :long,                Float

  property :current_population,  Integer

  belongs_to :province, 'Province',
    parent_key: [:name_short],
    child_key: [:province]

end 
```

我创建关联的记录：

```
 province = Province.get('BC')
        municipality = province.municipalities.new(
          name: '100 mile house',
          lat: 51.23131,
          long: 121.65489,
          current_population: 0) 
```

然后执行`municipality.save`，它失败了，因为它试图保存的记录（见下文）试图使用整个省对象作为键，而不仅仅是 :name_short 字段。

```
#<Municipality @province=#<Province @name_short="BC" @name_long="British Columbia"> @name="100 mile house" @lat=51.64300975 @long=121.295022 @current_population=0> 
```

我究竟做错了什么？

返回的`save`错误是验证类型错误：

```
["Province must be at most 2 characters long", "Province must be of type String"] 
```

嗯。再看看这个，我想知道 DataMapper 本身是否不强制引用完整性（通过将父键插入新的孩子），并且我可能必须通过自己设置市政府中的省字段来做到这一点？我会试一试......不，那没有解决它。

更新：奇怪，但是通过将以下`to_s`方法添加到`Province`类中，我摆脱了`"Province must be at most 2 characters long"`错误 - 但仍然得到字符串错误：

```
def to_s
  @short_name
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:52:13.053

好吧，似乎不应该将您的关键属性命名为与关联类相同的名称（感谢 DataMapper Google Group 的成员为我指明了正确的方向）。

通过将所有`:province`属性重命名为，并将和声明中的`:prov`所有`:province`关键引用更改为，它现在似乎可以工作了。`belongs_to``has n``:prov`

我还使用`p = Province.get('ON')`/`m = Municipality.new(...)`和保存`p.municipalities << m`，后跟 a `p.save`（不确定是否应该使用`p.municipalities.save`）。

注意：我正在使用`p.municipalities.save`并且一切正常。

# jquery - 如何使用 jQuery.on() 绑定到非用户启动的函数

> ID：15044792
> 
> 赞同：0
> 
> 时间：2013-02-23T19:42:31.947
> 
> 标签：jquery

使用 new[ish] .on 语法很容易绑定到用户触发的事件。例如：

```
$(document).on('click', '#my-div', function() {
    alert("You clicked it!");
}); 
```

但是绑定到用户可能不会触发的东西呢？

```
$(document).on('somethingaddedtoDOM', '#my-element', function() {
    alert("Nothing");
}); 
```

这是一个 jsFiddle，可以更好地了解我在说什么。 [http://jsfiddle.net/NedRW/3/](http://jsfiddle.net/NedRW/3/)

* * *

好的，这是一个类似的问题。假设我想在 DOM 中动态添加一个滑块。sudoSlider 这个例子。让我们使用 Mustache.js 和 Mustache.jquery 插件：

html

```
...
<div id="slider-target-container">
</div>
... 
```

查看型号：

```
var viewModel = [
    {
        image: "path-to-image"
    },
    {
        image: "path-to-image"
    },
    {
        image: "path-to-image"
    }
]; 
```

小胡子模板

```
<script type="text/html" id="slider-template">
    <div id="slider">
        <ul>
           <li>{{image}}</li>
        </ul>
    </div>
</script> 
```

Javascript

```
$(document).ready(function() {
    $.Mustache.addFromDom();
    var html = $('#slider-template');
    $('#slider-target-container').appendTo(mustache.render(html, viewModel);
}); 
```

现在，显然我需要在我新创建的滑块 HTML 上调用 sudoSlider 插件。但据我所知，我不能用新的 .on() 方法做到这一点

过去的工作：

```
$('#slider').live(function() {
    $(this).sudoSlider();
}); 
```

但是现在，据我所知，我无法将新项目添加到 dom 中（如果是，则使用特定的标识符），因此我无法将插件绑定到可能尚不存在的事物上。这更有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:44:51.243

```
But what about binding to things the user might not trigger? 
```

我没有完全理解你的问题，但根据我的理解，我列出的解决方案如下：

```
// add a click handler to an element that doesn't yet exist
$('document').delegate('#contentToBeAdded', 'click', function(e) {
    // do something
    // example use case would be content added using AJAX or from any manipulation user has not triggered.
});

// even handle a custom event for an element
$('document').delegate('#contentToBeAdded', 'custom-event', function(e) {
    // do something and in this case I assume 'somethingAddedToDOM' is a custom event thrown by user
}); 
```

希望能帮助到你。

编辑：如果有问题的功能是 DOM 更改，那么您可以收听 Mutation 事件 [onpropertychange 事件，我们永恒的爱 IE]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:46:54.960

```
$(document).on('click', "#tester", function() {
    alert("Clicked");
    $('<div id="tester-2"></div>').appendTo('body');
    $('#tester-2').css("background", "red");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:49:00.847

jquery 上的实时文档描述了如何很好地`.on`替换`.live`：

[http://api.jquery.com/live/](http://api.jquery.com/live/)

看看你上面的例子，我认为有很多：

```
<div id="slider">
    <ul>
       <li>{{image}}</li>
    </ul>
</div> 
```

被添加到

```
<div id="slider-target-container"></div> 
```

这将创建具有相同 id (#slider) 的元素，所以让我们创建它：

```
<div class="slider">
    <ul>
       <li>{{image}}</li>
    </ul>
</div> 
```

反而。

```
$(document).on("click", "#slider-target-container .slider", function(){
    alert("Clicked");
}); 
```

那么希望你正在寻找什么？

如果您想在将特定新元素添加到 dom 时触发某些内容，您可以使用自定义触发器：

[http://www.michaelhamrah.com/blog/index.php/2008/12/event-pooling-with-jquery-using-bind-and-trigger-managing-complex-javascript/](http://www.michaelhamrah.com/blog/index.php/2008/12/event-pooling-with-jquery-using-bind-and-trigger-managing-complex-javascript/)

从

[使用 Jquery 将元素添加到页面时如何执行操作？](https://stackoverflow.com/questions/1490313/how-to-do-an-action-when-an-element-is-added-to-a-page-using-jquery)

两者`.bind`.and`.live`都已替换`.on`为如上。

# javascript - Kendo-UI Grid在Javascript中获取单元格值

> ID：15044794
> 
> 赞同：1
> 
> 时间：2013-02-23T19:42:38.243
> 
> 标签：javascript, asp.net-mvc, kendo-ui, kendo-grid

我一直试图让这段代码工作一段时间，但我已经没有想法了。我在网上看了看，找不到任何有用的东西。

我定义了一个网格，其中包含人员列表。用户可以单击此人将其添加到他们的联系人中。我有一个自定义命令，它会发布到我的操作。

这可能最终会成为我忽略的简单事情。

我无法获取 Grid 的 dataItem。以下是我收到的错误：

```
Uncaught TypeError: Cannot read property '0' of undefined
y.extend.dataItem 
addContact
p.isFunction.f
p.event.dispatch 
g.handle.h 
```

以下是我的 Javascript 函数：

```
function addContact(e) {

        debugger;

        e.preventDefault();

        var dataItem = this.dataItem($(e.currentTarget).closest("tr")); // <-- ERRORS HERE
        var id = dataItem.Id

        var url = "@Url.Action("AddContact", "Contacts")";

        alert(url);

        $.ajax({
            url: url,
            type: 'POST',
            data: { contactID: id },
        });
    } 
```

网格：

```
@(Html.Kendo().Grid(ViewBag.Contacts as List<Contacts>)    
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.FirstName);
        columns.Bound(p => p.LastName);
        columns.Bound(p => p.ReleaseDate);
        columns.Command(command => command.Custom("Add").Click("addContact")).Width(80).HtmlAttributes(new { title = "Add Contact" });
    })
    .Groupable()
    .Pageable()
    .Sortable()
    .Scrollable(s => s.Height("auto"))
    .Filterable()
    .DataSource(dataSource => dataSource
    .Server()
    .PageSize(50))
) 
```

使用的脚本：

```
<script src="http://cdn.kendostatic.com/2012.3.1315/js/jquery.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1315/js/kendo.all.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1315/js/kendo.aspnetmvc.min.js"></script>
    <script src="@Url.Content("~/Scripts/kendo.modernizr.custom.js")"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T23:27:04.227

在您的 JS 中，您需要获取对网格的引用而不是使用它。

```
var grid = $("#Grid").data("kendoGrid");
var dataItem = grid.dataItem($(e.currentTarget).closest("tr")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T23:21:43.013

最后，问题出在网格配置上。

我必须将 DataSource 设置为 Ajax 绑定而不是 Server。服务器绑定可防止保存任何客户端数据。

# java - 使用 POI 读取 Java 中的 Excel 文件 - 迭代器错误

> ID：15044800
> 
> 赞同：0
> 
> 时间：2013-02-23T19:43:14.947
> 
> 标签：java, apache-poi

我需要比较两个excel文件。我正在使用 POI API。我想查看第一个 excel 文件，从每行的第一个单元格中获取行 id，然后查看第二个 excel 文件，找到具有行 id 的行，并比较两个单元格的值文件。

我现在的问题是，我在定义迭代器（行和单元格）时收到错误消息。

我已经尝试了两种方法：Iterator file1Row = file1Sheet.rowIterator(); 和迭代器 file1Row = file1Sheet.rowIterator();

并且两者都是不可接受的。

有人可以请尝试建议我正在做什么以及什么可以解决它？

请参阅下面我一直在编写的代码。

谢谢

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.FileNotFoundException;
import java.io.InputStreamReader;
import java.io.FileOutputStream;
import java.io.InputStream; 
import java.io.DataInputStream;
import java.io.InputStream.*;
import java.util.*;

import org.apache.poi.hssf.usermodel.*; 
import org.apache.poi.hssf.usermodel.HSSFRow;

import org.apache.poi.poifs.filesystem.POIFSFileSystem;

 public class CompareRanks {
public static void main(String[] args) throws IOException {
String file1Path = "C:/Documents/File1.csv";    
     String file2Path  = "C:/Documents/File2.xls";
//Read file1
try{

    FileInputStream File1 = new FileInputStream(file1Path );
    POIFSFileSystem File1System = new POIFSFileSystem (File1);

    HSSFWorkbook File1Workbook = new HSSFWorkbook(File1System);
    HSSFSheet File1RankSheet = File1Workbook.getSheetAt(0);
    Iterator File1Row = File1RankSheet .rowIterator(); //Error

     } catch (FileNotFoundException ex) {
        ex.printStackTrace();

     } finally {
     //Close the ObjectInputStream

 } 
```

}

# c++ - c++11中虚拟类的nothrow构造

> ID：15044802
> 
> 赞同：3
> 
> 时间：2013-02-23T19:43:29.413
> 
> 标签：c++, c++11, noexcept

采取以下代码片段：

```
#include <type_traits>

struct X { virtual ~X(); };

static_assert(std::is_nothrow_default_constructible<X>::value, "fail"); 
```

在 clang svn 下，它编译得很好。但是，对于 gcc 4.7.2，断言失败。哪一个是正确的？（如果 gcc 是正确的，为什么？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:11:52.657

叮当是正确的。

对此有一些争论，但是对象的构造会导致其析构函数被*潜在地调用*：

[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1424](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1424)

因此`std::is_nothrow_default_constructible<X>`，不仅要测试默认构造函数，还要测试`~X()`.

默认情况下，对其应用`~X()`了隐式`noexcept`。如果您的示例将其设为`~X()`私有或将其删除，或者`noexcept(false)`在其上添加 a，则该示例`static_assert`将失败。

我怀疑 gcc 4.7.2 还没有实现隐式析构函数的规则`noexcept`。

**更新**

在回答上述问题时，我对 CWG/LWG 问题进行了扫描，但忽略了一个明显的问题：

[http://cplusplus.github.com/LWG/lwg-active.html#2116](http://cplusplus.github.com/LWG/lwg-active.html#2116)

非常感谢 Cassio Neri 在下面指出这一点。我自己没有捡到这个是我的过失。我会删除这个答案，但我认为它包含的信息可能会有所帮助。谢谢卡西奥·内里。

# sql - SQL将字段从一个表复制到wordpress中的另一个

> ID：15044803
> 
> 赞同：0
> 
> 时间：2013-02-23T19:43:53.257
> 
> 标签：sql, copy

我正在尝试将表中的字段复制到`post_title`表`wp_posts`中的`meta_value`字段中`wp_postmeta`。这些是wordpress tabkes。

```
UPDATE wp_postmeta 
SET wp_postmeta.meta_value = wp_posts.post_title 
FROM wp_posts,wp_postmeta 
WHERE wp_posts.ID = wp_postmeta.post_id 
AND wp_postmeta.meta_key LIKE '%_yoast_wpseo_focuskw' 
```

收到此错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“FROM wp_posts,wp_postmeta WHERE wp_posts.ID = wp_postmeta.post_id AND wp_pos”附近使用正确的语法

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:47:27.500

试试这个

```
UPDATE wp_postmeta m INNER JOIN
       wp_posts p ON p.ID = m.post_id 
   SET m.meta_value = p.post_title 
WHERE  m.meta_key LIKE '%_yoast_wpseo_focuskw' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:51:13.757

您有一个带有表名的 UPDATE ，然后有一个 FROM 子句做同样的事情。在 UPDATE 子句中组合您需要的表，或者您需要 SELECT 进行子查询。

无论如何，FROM 的语法都不正确。您可以在 Google 上搜索 SQL 语法或特定于 MySQL 的 SQL 语法，这可能会帮助您了解什么是 MySQL 的合法 SQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:54:09.437

UPDATE wp_postmeta SET wp_postmeta.meta_value = wp_posts.post_title FROM wp_posts 内部加入 wp_postmeta on wp_posts.ID = wp_postmeta.post_id AND wp_postmeta.meta_key LIKE '%_yoast_wpseo_focuskw'

# html - 如何在框架中制作响应式视频？

> ID：15044806
> 
> 赞同：0
> 
> 时间：2013-02-23T19:44:08.870
> 
> 标签：html, css, responsive-design

我正在开发客户网站的响应版本，我偶然发现了这个问题 - 当我缩小浏览器窗口时，youtube 视频没有居中 - **padding-right: 10px;** 被忽略 - 为什么？

我怎么能解决这个问题？

这是我用于 youtube 视频边框的 CSS：

```
padding: 10px;
position: relative;
overflow: hidden; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:18:45.103

视频未正确调整大小的原因可能是由于您使用的嵌入代码，它通常指定`<iframe>`元素的确切尺寸，使其对布局更改或调整大小事件无响应。

有一个漂亮的 jQuery 插件可以做到这一点 - [http://fitvidsjs.com/](http://fitvidsjs.com/)

或者，您始终可以编写自己的简单 jQuery 函数（[请参见此处的小提琴](http://jsfiddle.net/teddyrised/WbJYP/)）:)

```
$(document).ready(function() {
    var $w = $(window),
        $vids = $("iframe[src*='youtube'], iframe[src*='vimeo']");

    // Store video aspect ratio
    $vids.each(function() {
        var aspectRatio = $(this).width() / $(this).height();
        $(this).attr("data-aspect-ratio", aspectRatio);
    });

    $w.resize(function() {
        // Set video width fluidly
        $vids.each(function() {
           $(this).width($(this).parent().width()); 
           $(this).height(Math.floor($(this).width() / $(this).data("aspect-ratio")));
        });
    }).resize();
}); 
```

限制或消除调整大小功能可能是一个好主意（[请参见此处的链接](http://benalman.com/projects/jquery-throttle-debounce-plugin/)），因为当您在同一页面上有太多视频并且调整页面大小时，您将触发一系列 resize() 肯定会对浏览器性能有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:45:24.517

你为什么放`overflow: hidden;`？

使用 div 使元素居中，例如：

```
#video
{

    width: 300px;
    height: 250px;
}
#main_video
{
    padding: 10px;
    margin: 0 auto;
}

<div id="main_video">
<div id="video">
    [example]
</div>
</div> 
```

# java - 使用 REST API 在 JAVA 中遍历 Neo4j 节点和关系

> ID：15044807
> 
> 赞同：1
> 
> 时间：2013-02-23T19:44:32.553
> 
> 标签：java, rest, neo4j

我想遍历 Java 中的 Neo4j 数据库节点和关系（不是嵌入式的。我想使用 REST API）。我有以下方法。

```
public void testTraverse(Node startNode) {
        for (Path position : Traversal.description()
                .depthFirst()
                .uniqueness(Uniqueness.NODE_GLOBAL)
                .evaluator(Evaluators.toDepth(10)).traverse(startNode)) 
        {
            System.out.println(position.lastRelationship().toString()+"\n--------------------------------\n");
        }
        for(Node node:Traversal.description().traverse(startNode).nodes()) {
            System.out.println(node.getProperty("name"));
        }
} 
```

调用此方法时，如何创建要作为参数传递的 Node 类型的 startNode？

我对 Neo4j 很陌生。请帮我。Neo4j-Java-ReST 的替代方法也受到热烈欢迎......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T23:01:35.503

好吧，那个起始节点必须是您以前以某种方式存储的节点。

通过`GraphDatabaseService`实例，您可以通过 ID 查找节点：

```
Node yourNode = graphDatabaseService.getNodeById(0L); 
```

...或通过索引：

```
Node yourNode = graphDatabaseService.forNodes("anIndexName").get("id", 42).getSingle(); 
```

# c# - 派生类、参数和性能

> ID：15044811
> 
> 赞同：-2
> 
> 时间：2013-02-23T19:44:43.937
> 
> 标签：c#

可以说我设置了这个：

```
class MainInfo
{
    public string path{get;set;}
    public string name{get;set;}
}

class MoreInfo : MainInfo
{
    // more variables and methods
} 
```

在另一个类中，我将 MoreInfo 类声明为`public MoreInfo info;`

在其他一些方法中，我只需要信息，现在我想知道的是，如果我传递给像这样转换的`MainInfo`其他方法，是否会有任何性能差异：作为一个参数，只是传入整个然后在方法中退出只有我需要的信息？`info` `MainInfo` `(MainInfo)info``info`

谢谢！

**编辑：** 或者如果我传递这样的参数`MainInfo in = (MainInfo)info;`。这三个有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:50:01.940

如果该方法采用 a `MainInfo`，则不需要强制转换任何继承类型 - 只需直接传递它即可。

至于性能 - 这不是您可能遇到的问题。这将是一个微优化，并且几乎在任何软件中都会有更大的可能优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:50:21.010

强制转换有一些性能成本，但你知道：过早的优化是任何开发的恶魔。

做出设计决策，然后再关注优化。如果您的方法需要一个更具体的`MoreInfo`实例，因为它需要访问整个信息，那么将向下转换的对象提供给`MoreInfo`. 如果没有，只需将对象保持*原样*进行`MainInfo`打字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T20:04:16.200

铸造存在性能差异，但我认为这并不重要。对上面的班级进行了测试，得到了 2218 个不进行投射的滴答声和 135 个带有投射的滴答声的结果。我相信这是因为它在编译时处理演员表。希望这可以帮助！

```
System.Diagnostics.Stopwatch watch = new System.Diagnostics.Stopwatch();
watch.Start();
testmethod(info);
watch.Stop();
Console.WriteLine(watch.ElapsedTicks);  // 2218 ticks

watch.Restart();
testmethod((MainInfo)info);
watch.Stop();
Console.WriteLine(watch.ElapsedTicks); // 135 ticks 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T19:49:53.677

首先，如果您将 MoreInfo 对象传递给期望 MainInfo 对象的方法，则不需要强制转换，也不应该这样做。

其次，它只会以任何一种方式传递一个指针，因此它将以相同的速度运行。唯一的开销是它根据派生类中额外数据的大小调整指针；显然，这并不是真正可测量的速度差异。

# time - 如何在d3中创建时间尺度？

> ID：15044813
> 
> 赞同：0
> 
> 时间：2013-02-23T19:44:54.990
> 
> 标签：time, d3.js, scale, cubism.js

在我继承的应用程序的水平图表顶部，它有一个时间序列，显示一天中的时间（周五晚上 9 点，凌晨 3 点，早上 6 点......）。在图表中它具有数据量。从立体主义 Wiki 中，它指出“上下文的 x 比例；一个 d3.time.scale。比例的域在调度“更改”事件之前立即自动更新。范围是同样根据上下文大小自动设置。” 一个显示实时水平图表的有咖啡脚本：

```
 *d3.select("#applianceGraphs").call(function(div) {  
    div.append("div").attr("class", "axis").call(context.axis().orient("top"));
  div.selectAll(".horizon").data(generated).enter().append("div").attr      ("class", "horizon").call(context.horizon().height(90));
  return div.append("div").attr("class", "rule").call(context.rule());
  });* 
```

我需要创建一个图表来反映前一天的数据量（周四晚上 9 点，凌晨 3 点，早上 6 点...），这正在改变时间序列的 x 比例范围？我相信我可以使用 var x = d3.time.scale().range(range) 范围包含两个数组，其中包含开始日期和结束日期。我需要什么来制作立体主义/d3 才能采用新的 time.scale？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:56:58.903

看起来答案可以从以下两个帖子中得出：

[如何更新立体主义/ d3中变化事件的轴比例](https://stackoverflow.com/questions/10604490/how-to-update-the-axis-scale-on-change-events-in-cubism-d3)

[在 cubism.js 中更改比例默认值](https://stackoverflow.com/questions/10927848/change-scale-default-in-cubism-js/10950513#10950513)

# list - 操作 Fsharp 列表

> ID：15044815
> 
> 赞同：-3
> 
> 时间：2013-02-23T19:44:57.337
> 
> 标签：list, filter, f#, variable-length

好的，最近几天我一直在玩 F#，发现一些教程在网上流传（没有解决方案！）如果我有以下列表 -

```
let new = [
 (1808,"RS");
 (1974,"UE");
 (1066,"UE");
 (3005,"RS");
 (2007,"UE");
 (2012,"UE");
 ] 
```

我将如何过滤此列表以首先显示 RS 组中的项目数，然后显示 UE？我在想 List.filter，List.length，不太确定从这两个中去哪里以获得每个组的特定数字。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:54:31.833

一般来说，分组操作很容易由[Seq.groupBy](http://msdn.microsoft.com/en-us/library/ee370445.aspx)处理。

如果您只想计算每个组中的项目数，[Seq.countBy](http://msdn.microsoft.com/en-us/library/ee340317.aspx)是要走的路。

```
[ (1808,"RS");
  (1974,"UE");
  (1066,"UE");
  (3005,"RS");
  (2007,"UE");
  (2012,"UE"); ]
// 'countBy' returns a sequence of pairs denoting unique keys and their numbers of occurrences
// 'snd' means that we try to pick a key as the *second* element in each tuple
|> Seq.countBy snd
// convert results back to an F# list
|> Seq.toList

// val it : (string * int) list = [("RS", 2); ("UE", 4)] 
```

# eclipse - 无法从开始菜单启动 Eclipse

> ID：15044817
> 
> 赞同：1
> 
> 时间：2013-02-23T19:45:02.557
> 
> 标签：eclipse

我知道 -vm 选项，并且需要正确的 32/64 位版本的 java 和相应版本的 eclipse 才能启动。

顺便说一句，我有弹簧工具套件。

但是，我在这里遇到一种情况：我可以通过双击“sts.exe”从 exe 启动 eclipse。我可以通过复制和粘贴快捷方式来创建它的快捷方式。我可以通过双击打开这个快捷方式。但是当我通过运行命令打开它时，它拒绝工作说：

无法加载 JNI 共享库“F:\Programs\SDKs\Java\jdk1.7.0\bin..\jre\bin\client\jvm.dll”。

我什至在 ini 中输入了 -vm 选项，但似乎没有任何帮助。我只是无法通过开始菜单打开它！

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T15:54:59.297

好的，重新启动后，所有选项都不起作用。一个明显的 32 位与 64 位错误也是如此。

（Mods：如果需要，请随时关闭此问题。它不会真正贡献太多）

# android - 模拟器和手机一直运行旧版本的代码

> ID：15044818
> 
> 赞同：0
> 
> 时间：2013-02-23T19:45:07.697
> 
> 标签：android, runtime, emulation

我有一个奇怪的情况，我对我的 android 代码所做的更改没有在运行时反映。就像我的手机和模拟器都卡在运行以前的版本一样。我已经尝试删除并重新导入项目，从手机和模拟器中删除应用程序，但我无法修复它。任何想法都让我发疯。

```
 [2013-02-23 14:52:58 - EchoFriendly] Android Launch!
 [2013-02-23 14:52:58 - EchoFriendly] adb is running normally.
 [2013-02-23 14:52:58 - EchoFriendly] Performing com.example.echofriendly.LogIn activity launch
 [2013-02-23 14:52:58 - EchoFriendly] Automatic Target Mode: Preferred AVD 'c' is available     on       emulator 'emulator-5554'
 [2013-02-23 14:52:59 - EchoFriendly] Application already deployed. No need to reinstall.
 [2013-02-23 14:52:59 - EchoFriendly] Starting activity com.example.echofriendly.LogIn on device emulator-5554
 [2013-02-23 14:53:00 - EchoFriendly] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.echofriendly/.LogIn } 
```

可能与应用已经部署，不需要重新安装的说法有关。然而，这直到今天才发生。不确定发生了什么变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:18:47.447

我已经通过 Uninstalling my app from the `settings->application->manage`apps from the emulator 解决了这个问题。然后将其重新编译到同一个模拟器中

# sql-server - 如何从每天特定小时后的几天获取数据？

> ID：15044819
> 
> 赞同：1
> 
> 时间：2013-02-23T19:45:22.533
> 
> 标签：sql-server, date, datetime, select

我正在编写一些关于特定时间的销售额的报告，我已经设法得到一周中某一天的销售额总和，但我需要进一步缩小范围，我需要获得一周中每一天的销售额总和，即13:00 后制作。

这是用于获取一周中每天的销售额总和的代码

```
SELECT 
sum(ammount), datename (weekday,sale_date)
FROM SALES where sale_date > '2012-01-01 00:00:00'
group by datename (weekday,sale_date) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:47:55.747

您可以在`where`子句中添加“13:00 之后”的条件：

```
where   sale_date > '2012-01-01 00:00:00'
        and datepart(hour, sale_date) >= 13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:47:44.870

为什么不使用的`hh`部分[`DATEPART`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)？

```
SELECT Sum(ammount), 
       Datename (weekday, sale_date) 
FROM   sales 
WHERE  sale_date > '2012-01-01 00:00:00' 
       AND Datepart(hh, sale_date) >= 13 
GROUP  BY Datename (weekday, sale_date) 
```

# python - Matplotlib Legend 中的自定义艺术家

> ID：15044822
> 
> 赞同：1
> 
> 时间：2013-02-23T19:45:36.363
> 
> 标签：python, qt, matplotlib, pyqt

我有一个使用 PtQt 的程序，它利用 matplotlib 进行一些绘图渲染。为了保存图像，我想利用图例来渲染自定义图像（另外内置的可拖动功能使其非常吸引人）。我正在阅读图例，但我似乎无法弄清楚如何制作一个图例，该图例调用我自己的 Qt 的 paintEvent() 方法，我可以在其中渲染自定义图像。

如果这种方法很糟糕，这是我的目标：我想在绘图窗口中放置一个图像（由 Qt 在程序中渲染），或者找到一种方法将此图像附加到导出的图形之上。

这是现在输出的屏幕截图：

![](../Images/bf729ac8bb2aeeb3bac73a39c80db6b3.png)

我想将 DAIP... 序列放在顶部，并将其与图形一起导出。

希望有人以前解决过类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:45:44.707

在将图像保存到临时 png 文件后，我使用 matplotlib 的 OffsetImage 和 AnnotationBBox 功能解决了这个问题。出于某种原因，将其保留为临时文件效果不佳。

简要地：

```
#draw stuff onto QPixmap named pix
byteArray = QByteArray()
buffer = QBuffer(byteArray)
buffer.open(QIODevice.WriteOnly)
pix.save(buffer, 'PNG')
stringIO = StringIO(byteArray)
stringIO.seek(0)
tfile = tempfile.NamedTemporaryFile(suffix=".png", mode="wb", delete=False)
tfile.write(stringIO.buf)
tfile.close()
imagebox = mpl.offsetbox.OffsetImage(mpl._png.read_png(tfile.name),zoom=zlvl)
ab = mpl.offsetbox.AnnotationBbox(imagebox, [w/2,0],frameon=False)
ab.set_figure(self.canvas.figure)
ab.draggable()
self.subplot.axes.add_artist(ab)
os.remove(tfile.name) 
```

# jquery - jQuery图像交换不起作用

> ID：15044827
> 
> 赞同：1
> 
> 时间：2013-02-23T19:45:58.293
> 
> 标签：jquery

嘿，所以我找到了这个 jsfiddle [http://jsfiddle.net/dEHZZ/1/](http://jsfiddle.net/dEHZZ/1/)

```
$('div#thumbs img').click( function() {
$('#mainimg img').prop('src', $(this).prop('src'));
return false;  //stop link from navigating
}) 
```

在这里滚动浏览一些问题，但是当我尝试在这里实现它时它不起作用[http://ra-yon.com/beta/Test_sites/HFE/products/IR155R926.php](http://ra-yon.com/beta/Test_sites/HFE/products/IR155R926.php)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:47:26.833

您的 jQuery 代码在您的 DOModel 被读取并准备好被操作之前运行

**使用文档`ready`功能**

```
$(function(){  // DOM ready to be manipulated

    $('div#thumbs img').click( function( e ) {
        e.preventDefault();  //stop link from navigating
        $('#mainimg img').prop('src', this.src );
    });

}); 
```

此外，在您的代码中我看不到任何链接，所以实际上您不需要任何链接`return false`（`event-preventDefault()`我使用过）

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T19:52:14.657

将您的代码放入准备好的方法中：

```
$(document).ready(function(){
   $('div#thumbs img').click( function() {
   $('#mainimg img').prop('src', $(this).prop('src'));
   return false;  //stop link from navigating
   })
}); 
```

在 dom 元素准备好之前实例化你的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:47:36.413

将您的 jQuery 包装在[文档就绪调用中](http://api.jquery.com/ready/)

```
$(document).ready(function() {
    $('div#thumbs img').click( function() {
        $('#mainimg img').prop('src', $(this).prop('src'));
        return false;  //stop link from navigating
    })
}); 
```

jsFiddle 会自动为您执行此操作，这就是它在那里工作的原因。

# ruby - Ruby：如何将多个数字相乘？

> ID：15044834
> 
> 赞同：2
> 
> 时间：2013-02-23T19:46:58.123
> 
> 标签：ruby, math

我试图将任意数量的未知参数相乘以求总和。

```
 def multiply(*num)
  num.each { |i| puts num * num}
  end

multiply(2,3,4)
multiply(2,3,4,5,6,7) 
```

**另一种尝试：**

```
def multiply(num)
  num.to_i
   i = 0
   while i < num.length
   total = num * num

    return total
   end
end

multiply(2,3,4)
multiply(2,3,4,5,6,7) 
```

我一直遇到错误：(eval):73: undefined local variable or method `num_' for main:Object (NameError) from (eval):81

有人说数组需要是整数。

我已经尝试过做一些我认为应该是非常简单的程序来编写的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T20:09:56.217

`def multiply(*num)`捕获给定数组中的方法的所有参数。如果你跑`multiply(1, 2, 3, 4)`那么`num`将等于`[1, 2, 3, 4]`。因此，在您的两次尝试中，您都试图将整个数组与其自身 ( `num * num`) 相乘，但这是行不通的。

其他人已经提出了如何正确编写乘法方法的解决方案，但让我给你一个你第一次尝试的正确版本并正确解释：

```
def multiply(*numbers)
  result = 1
  numbers.each { |n| result = result * n }
  result
end 
```

在您的尝试中，我将所有参数捕获在一个数组中，我称之为 mine `numbers`。然后我声明一个变量来保存所有乘法的结果。给它的值`1`很方便，因为它不会影响乘法，但我也可以将第一个值移出`numbers`数组，还有其他解决方案。

然后我用 遍历所有数字`each`，并且对于每个数字，我将它与当前结果相乘并将其存储为新结果（我可以用 更短地编写它`result *= n`）。

最后我返回结果（方法的最后一个值是该方法将返回的值）。

有更短的方法可以做同样的事情，其他人建议使用`numbers.reduce { |n, result| n * result }`，甚至`numbers.reduce(:*)`，但即使它们更短，它们也很神秘，我认为它们并不能真正帮助你让事情正常进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:59:14.247

你想要的是#inject 方法

 `````
def multiple(*nums)
  nums.inject(:*)
end 
````  `Inject 将使用指定的操作（在本例中为 *）组合 nums 中的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T19:52:48.653

你可以试试这个：

```
num.reduce(1) {|x, y| x*y } 
`````

# javascript - JS Countdown 在 IE 和 Safari 中不起作用

> ID：15044835
> 
> 赞同：0
> 
> 时间：2013-02-23T19:47:09.403
> 
> 标签：javascript, html, countdown

我有一个 javascript 倒计时，它似乎不适用于 IE 或 safari，都在 Windows 7 上测试，适用于 chrome 和 firefox。由于网站上的某些限制，我不打算更改为 jQuery 倒计时，所以真的希望让它在所有浏览器中都能正常工作。

```
 <script language="JavaScript">
TargetDate = "January/01/2014 12:00 am";
BackColor = "";
ForeColor = "#000";
CountActive = true;
CountStepper = -1;
LeadingZero = true;
DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
FinishMessage = "<span class='finish'>Finished!</span>";
</script>
<script language="javascript">
function calcage(secs, num1, num2) {
  s = ((Math.floor(secs/num1))%num2).toString();
  if (LeadingZero && s.length < 2)
    s = "0" + s;
  return "<span class='digit'>" + s + "</span>";
}

function CountBack(secs) {
  if (secs < 0) {
    document.getElementById("cntdwn").innerHTML = FinishMessage;
    return;
  }
  DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(secs,86400,100000));
  DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs,3600,24));
  DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs,60,60));
  DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs,1,60));

  document.getElementById("cntdwn").innerHTML = DisplayStr;
  if (CountActive)
    setTimeout("CountBack(" + (secs+CountStepper) + ")", SetTimeOutPeriod);
}

function putspan(backcolor, forecolor) {
 document.write("<span id='cntdwn' style=' font-weight:bold; background-color:" + backcolor + 
                "; color:" + forecolor + "'> </span>");
}

if (typeof(BackColor)=="undefined")
  BackColor = "white";
if (typeof(ForeColor)=="undefined")
  ForeColor= "black";
if (typeof(TargetDate)=="undefined")
  TargetDate = "12/31/2020 5:00 AM";
if (typeof(DisplayFormat)=="undefined")
  DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
if (typeof(CountActive)=="undefined")
  CountActive = true;
if (typeof(FinishMessage)=="undefined")
  FinishMessage = "";
if (typeof(CountStepper)!="number")
  CountStepper = -1;
if (typeof(LeadingZero)=="undefined")
  LeadingZero = true;

CountStepper = Math.ceil(CountStepper);
if (CountStepper == 0)
  CountActive = false;
var SetTimeOutPeriod = (Math.abs(CountStepper)-1)*1000 + 990;
putspan(BackColor, ForeColor);
var dthen = new Date(TargetDate);
var dnow = new Date();
if(CountStepper>0)
  ddiff = new Date(dnow-dthen);
else
  ddiff = new Date(dthen-dnow);
gsecs = Math.floor(ddiff.valueOf()/1000);
CountBack(gsecs);
</script> 
```

倒计时仅显示为 NaN。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:03:53.550

以下行返回 NaN

```
var dthen = new Date(TargetDate); 
```

为了确保它可以跨浏览器工作，最好的办法是使用以下 Date 构造函数：

```
new Date(year, month, day, hours, minutes, seconds, milliseconds); 
```

所以，dthen 会变成：

```
var dthen = new Date(2014, 0, 1, 12, 0, 0, 0); 
```

您可能希望在顶部定义这些值，就像使用 TargetDate 一样，但这应该让您走上正确的轨道。

# windows - 在 Windows 中的交互式提示下编辑 R 命令

> ID：15044837
> 
> 赞同：0
> 
> 时间：2013-02-23T19:47:17.040
> 
> 标签：windows, r

有什么方法可以更轻松地在 Windows GUI 中移动长 R 命令？帮助-> 控制台说左、右、主页和结束是唯一可用的选项（与此相反：[http ://cran.r-project.org/doc/manuals/R-intro.html#The-command_002dline-编辑](http://cran.r-project.org/doc/manuals/R-intro.html#The-command_002dline-editor)）。是否可以通过单词来回前进，或者在行内搜索字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:57:26.310

不会。GUI 假定您将能够使用水平滚动条控件。（.... 或者您将使用真正的编辑器。） R 的 Rterm.exe 版本中有这样的方法，它们基本上是从[readline 函数](http://tiswww.case.edu/php/chet/readline/readline.html)继承的。

# sql - 要解决的 SAS SQL 查询，将行添加到不同的变量

> ID：15044850
> 
> 赞同：0
> 
> 时间：2013-02-23T19:48:06.867
> 
> 标签：sql, sas

需要帮助来解决这种情况，

桌子

```
pr_id    lob_id  prec1     prec2   prec3
112      1a      3478      56      77
112      1b      3466      65      43
112      1c      5677      57      68
112      1d      5634      49      52
215      2a      1234      43      45
215      2b      9787      32      43
215      2c      4566      39      90
388      3a      8797      88      99
388      3b      6579      58      72
388      3c      9087      76      67 
```

所需的输出：需要不同的观察结果`pr_id`和不同的`lob_id`观察`pr_id`行。如下所示

```
pr_id  lob_id  prec1   prec2   prec3   lob_id  prec1   prec2  prec3  lob_id  prec1   prec2  prec3 lob_id  prec1  prec2 prec3
112    1a      3478    56      77      1b      3466    65     43     1c      5677    57     68    1d      5634   49    52
215    2a      1234    43      45      2b      9787    32     43     2c      4566    39     90    .       .      .     .
388    3a      8797    88      99      3b      6579    58     72     3c      9087    76     67    .       .      .     . 
```

我试过用 来做`proc transpose`，但变量名与所需的输出不同，你能帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:41:08.643

This will do as close as you can get to your desired answer. It's far more convoluted than is probably needed, but it does ensure the lob_id's stay with their prec1-3's. You cannot have the same variable name for multiple variables, but you can have the same label, so I keep the label the same while adding _1 _2 _3 etc.

You could then PROC PRINT the dataset, if you want this in the output window (and that should show the label, thus getting your desired repeated variable names in the output).

```
data have;
input pr_id    lob_id  $ prec1     prec2   prec3;
datalines;
112      1a      3478      56      77
112      1b      3466      65      43
112      1c      5677      57      68
112      1d      5634      49      52
215      2a      1234      43      45
215      2b      9787      32      43
215      2c      4566      39      90
388      3a      8797      88      99
388      3b      6579      58      72
388      3c      9087      76      67
;;;;
run;
data have_pret;
set have;
by pr_id;
array precs prec:;
if first.pr_id then counter=0;
counter+1;
varnamecounter+1;
valuet=lob_id;
idname=cats("lob_id",'_',counter);
idlabel="lob_id";
output;
call missing(valuet);
do __t = 1 to dim(precs);
  varnamecounter+1;
  valuen=precs[__t];
  idname=cats('prec',__t,'_',counter);
  idlabel=vlabel(precs[__t]);
  output;
end;
call missing(valuen);
keep pr_id valuet valuen idname idlabel varnamecounter;
run;

proc sort data=have_pret out=varcounter(keep=idname varnamecounter);
by idname varnamecounter;
run;

data varcounter_fin;
set varcounter;
by idname varnamecounter;
if first.idname;
run;

proc sql;
select idname into :varlist separated by ' ' 
 from varcounter_fin order by varnamecounter;
quit;

proc transpose data=have_pret(where=(not missing(valuen))) out=want_n;
by pr_id;
var valuen;
id idname;
idlabel idlabel;
run;

proc transpose data=have_pret(where=(missing(valuen))) out=want_t;
by pr_id;
var valuet;
id idname;
idlabel idlabel;
run;

data want;
retain pr_id &varlist.;
merge want_n want_t;
by pr_id;
drop _name_;
run; 
```

To do this in SQL is irritating; SAS doesn't support the advanced SQL table functions that would permit you to transpose it neatly without hardcoding everything. It would be something like

```
proc sql;
select pr_id, 
max(lob_id1) as lob_id1, max(prec1_1) as prec1_1, max(prec2_1) as prec2_1, max(prec3_1) as prec3_1,
max(lob_id2) as lob_id2, max(prec1_2) as prec1_2, max(prec2_2) as prec2_2, max(prec3_2) as prec3_2 from (
select pr_id, 
case when substr(lob_id,2,1)='a' then lob_id else ' ' end as lob_id1, 
case when substr(lob_id,2,1)='a' then prec1 else . end as prec1_1, 
case when substr(lob_id,2,1)='a' then prec2  else . end as prec2_1, 
case when substr(lob_id,2,1)='a' then prec3 else . end as prec3_1, 
case when substr(lob_id,2,1)='b' then lob_id else ' ' end as lob_id2, 
case when substr(lob_id,2,1)='b' then prec1 else . end as prec1_2, 
case when substr(lob_id,2,1)='b' then prec2  else . end as prec2_2, 
case when substr(lob_id,2,1)='b' then prec3 else . end as prec3_2
from have )
group by pr_id;
quit; 
```

but extended to include 3 and 4\. You can see why it's silly to do this in SQL I hope :) The SAS code is probably actually shorter, and is doing far more work to make this easily extendable - you could skip half of it if you just hardcoded that retain statement, for example.

# php - 在不获取用户的情况下更新 Facebook 状态并从用户传递

> ID：15044851
> 
> 赞同：1
> 
> 时间：2013-02-23T19:48:07.220
> 
> 标签：php, facebook

我需要在 facebook wall 中发布，我开发的网站是一个新闻门户，为此我下载了 php sdk 并创建了一个新应用程序。

我在登录和提要时遇到问题，因为我需要使用 cron 作业的服务器列出未发布的新文章并发布它们。

```
$facebook = new Facebook($config); 
$uid = $facebook->getUser(); 
```

我总是得到一个 $uid = 0，我不需要它来显示登录对话框，因为我需要我创建的应用程序执行此操作。

我正在寻找，但我没有找到办法做到这一点。我看到很多例子，但都需要用户使用弹出对话框登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:59:12.733

如果他不授予您的应用程序权限，您将无法获得 facebook 用户。

您应该将（未知）用户重定向到权限对话框或显示权限弹出窗口，并请求 publish_stream 附加权限。当用户授予您的应用请求的权限时，您将拥有所需的：uid、访问令牌，并且您将能够发布帖子。

# c++ - 如何比较两个包含十进制值的字符串？

> ID：15044858
> 
> 赞同：2
> 
> 时间：2013-02-23T19:48:49.997
> 
> 标签：c++, string, overflow, precision, stringstream

这是我正在做的事情：

`if (oss.str() != sValue)`

我可以有例如：

`2000000000.000`和`2000000000.0`。

这是相同的值，但不是相同的字符串。我需要在字符串中比较它，因为我试图捕捉`sValue`.

在这种情况下，我可以这样做：

`oss << std::setprecison(1) << std::fixed << value;`

但是如果我有，问题将是相同的：

`2000000000.1`和`2000000000.123`

我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:12:58.727

从小数位开始，做两组比较，每次迭代解析比较一个数字，走到相反的两端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:54:32.360

您可以使用 strncmp() 函数

```
 int strncmp(const char *s1, const char *s2, size_t n); 
```

使用 std::string 上的 c_str() 方法和 n = min( s1.length(), s2.length() );

使用 boost 更容易使用整数比较

```
boost::lexical_cast<int>(s1) == boost::lexical_cast<int>(s2) 
```

对于 std::string s1，s2 完成了这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:08:03.297

一个有效的答案：

```
size_t            i;

  i = sValue.find('.');  // find the point
  if (i < sValue.size())  // if there is one, then ...
    {
      i = sValue.size() - i - 1; // find the number of decimal
      oss << std::setprecision(i) << std::fixed << value;  // apply the precision
    }
  else // otherwise, it's neither a float neither a double
    oss << std::setprecision(0) << std::fixed << value; // no need of precision
  if (oss.str() != sValue) 
```

# java - 带有按钮的 JTables 删除东西

> ID：15044862
> 
> 赞同：0
> 
> 时间：2013-02-23T19:49:09.997
> 
> 标签：java, swing, jtable, jbutton, tablecelleditor

我有几个表格显示保存在数据库中的产品之类的东西。因此，为了显示这些产品，我从数据库中获取一个列表并将该列表提供给 tablemodel。

现在我想在每一行都有一个删除按钮，我可以用它从数据库中删除产品。

有一些好的方法可以做到这一点吗？现在我已经实现了一些感觉不对的东西。我有自定义按钮，它在初始化时保存它的行，并从表（自定义类扩展 jtable）回调到视图，然后调用控制器从数据库中删除条目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:11:27.790

查看@camickr 的[表格按钮列](http://tips4java.wordpress.com/2009/07/12/table-button-column/)。

# php - 如何从mysql中提取日期时间字段的值

> ID：15044866
> 
> 赞同：0
> 
> 时间：2013-02-23T19:49:47.267
> 
> 标签：php, mysql

我有以下输入字段，我试图从我的数据库中提取 start_date 和 end_date 中的日期时间。但是，当我执行如下所示的代码时，它只会拉入空白日期。我检查了`$start_date`and的值，`$end_date`它们是有效的。请让我知道可能出了什么问题。

```
echo 'Start Date:'
    , '<input id="evfinal" type="datetime-local" name="sdate" value="' . $row['start_date'] . '" />'
    , 'End Date:','<input id="evfinal" type="datetime-local" name="edate" value="' . $row['end_date'] . '" />'; 
```

提取数据的代码：

```
$result = mysql_query("SELECT a.* FROM events a INNER JOIN (SELECT id_user, MAX(event_id) as maxID FROM events GROUP BY id_user) b ON a.id_user = b.id_user AND a.event_id = b.maxID WHERE a.id_user = '25'")
or die(mysql_error()); 

// store the record of the "example" table into $row
while($row = mysql_fetch_array($result)){ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T19:59:51.920

试试这个方法：`value="<?php echo $row['start_date']; ?>"` 尽量避免用 php 打印静态 html 代码。

# c++ - 这是什么意思？

> ID：15044874
> 
> 赞同：2
> 
> 时间：2013-02-23T19:50:19.493
> 
> 标签：c++, operator-overloading, smart-pointers

在文件“memory”中的·std::unique_ptr·代码中，我看到运算符重载函数为

```
typename tr1::add_reference<_Ty>::type operator*() const
{   
   // return reference to object
   return (*this->_Myptr);
}

pointer operator->() const
{
  // return pointer to class object
   return (&**this);
} 
```

第二个功能是什么`&**`意思？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T19:52:26.683

`this`是指向`unique_ptr`对象的指针。

`*this`是对`unique_ptr`对象的引用。

`**this`正在取消引用`unique_ptr`使用`operator*`（即`*this->_Myptr`）。

因此，是指向(ie )`&**this`所指向的对象的指针。`unique_ptr``&(*this->_Myptr)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-23T19:53:17.743

根据发布的代码，`**this`正在调用`operator*`重载，它返回对对象的引用。所以`&**this`成为返回对象的地址。

换句话说，`**this`与 相同`(*this->_Myptr)`，并且与`&**this`相同`&(*this->_Myptr)`。

# c# - vb.net 或 c# 中 X2Axis 中的 Zedgraph 幅度问题

> ID：15044886
> 
> 赞同：2
> 
> 时间：2013-02-23T19:51:16.207
> 
> 标签：c#, vb.net, zedgraph

我很难尝试使用 zedgraph 获得 excel 半对数图：

![在此处输入图像描述](../Images/6ecde3c3d20218119d67c860a36db951.png)

我目前有：

![在此处输入图像描述](../Images/9427a4c6013015f41b0a7180a3c184eb.png)

为此，我有

```
Dim pane As New GraphPane()
'reverse order
pane.X2Axis.IsVisible = True
pane.XAxis.IsVisible = False
pane.YAxis.Scale.IsReverse = True
pane.YAxis.Scale.IsPreventLabelOverlap = True
' log type
pane.X2Axis.Type = AxisType.Log
pane.AxisChange()
' the y axis scale
pane.YAxis.Scale.Min = -20
pane.YAxis.Scale.Max = 120
'here I tried to manipulat x axis but had no success 

'the data

            Dim list As New PointPairList()
            Dim list2 As New PointPairList()        
            list.Add(0, 0)
            list.Add(125, 0)
            list.Add(250, 0)
            list.Add(500, 5)
            list.Add(750, 5)
            list.Add(1000, 10)
            list.Add(1500, 10)
            list.Add(2000, 5)
            list.Add(3000, 10)
            list.Add(4000, 10)
            list.Add(6000, 10)
            list.Add(8000, 20)
            list2.Add(125, 30)
            list2.Add(500, 30)
            list2.Add(750, 40)
            list2.Add(1000, 50)
            list2.Add(1500, 65)
            list2.Add(2000, 65)
            list2.Add(3000, 70)
            list2.Add(4000, 80)
            list2.Add(6000, 90)
            list2.Add(8000, 100)
            Dim myCurve As LineItem = pane.AddCurve("Series 1", list, Color.Blue, SymbolType.Diamond)
            Dim myCurve2 As LineItem = pane.AddCurve("Series 2", list2, Color.Magenta, SymbolType.Square) 
```

如您所见，**x2=125,250,500,750,1**的数据与EXCEL 半对数图不相似，因为 zedgraph 的数字非常小，仅在这部分....

如何使用 zedgraph 获得想要的 excel 图表？有没有办法只缩放那部分或其他东西？为什么会出现`10^-1, 10^0 ,10^1`？并不是 `10^2, 10^3 10^4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T03:54:12.033

您需要设置轴最小值。

```
chart.GraphPane.YAxis.Scale.Min = 0;
chart.GraphPane.YAxis.Scale.Max = 100; 
```

或类似的东西。确保添加`GraphPane`零件。我希望这行得通；再次，我无法测试它，因为我实际上没有在我当前的机器上安装这个模块。

[如果您经常使用 ZedGraph，这](http://sourceforge.net/projects/zedgraph/files/zedgraph%20documentation/5.1.0%20+%204.6.0/)是一件非常有用的事情。我在这里被其他人指出了这一点，但我找不到他们的帖子来给予他们信任。

# css - Chrome 25.0.13 将 margin-top 百分比显示为宽度的百分比而不是高度的百分比

> ID：15044888
> 
> 赞同：4
> 
> 时间：2013-02-23T19:51:30.523
> 
> 标签：css, google-chrome

Chrome 刚刚更新了自己，我现在注意到新版本没有正确显示我的页面。看来，如果我有一个百分比的边距顶部，它的边距基于页面的宽度而不是高度。难道我做错了什么？

这是测试代码：

```
<!doctype html>
<html>
    <body>
        <div style="margin-top: 50%">
            Hello!
        </div>
    </body>
</html> 
```

这是一个演示该问题的超短视频：http: [//cl.ly/2T0c132T3U2y](http://cl.ly/2T0c132T3U2y)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T14:41:00.010

这里的 W3 CSS 规范：

[http://www.w3.org/TR/CSS21/box.html#margin-properties](http://www.w3.org/TR/CSS21/box.html#margin-properties)

...说这是按预期进行的。所以实际上，Chrome*只是*正确地实现了它......

# c++ - 当给出默认模板参数时，将选择什么模板值？

> ID：15044893
> 
> 赞同：0
> 
> 时间：2013-02-23T19:52:05.893
> 
> 标签：c++, templates

例如，我有以下模板函数：

```
template<class IntType = typename boost::uintmax_t>
IntType someFunnyFunc(IntType x, IntType y, IntType z) { ... } 
```

现在我有以下代码：

```
int main() {
    short a=1, b=2, c=3;
    someFunnyFunc(a, b, c);
    return 0;
} 
```

所有编译器都会生成函数吗

```
boost::uintmax_t someFunnyFunc(boost::uintmax_t x, boost::uintmax_t y, boost::uintmax_t z) { ... } 
```

，因为short可以转换为boost::uintmax_t，或者一些编译器会生成

```
short someFunnyFunc(short x, short y, short z) {...} 
```

我需要这个，因为我的算法使用循环，当我使用短整数而不是大整数时，循环更频繁。

你可能会问，为什么我不简单地定义`boost::uintmax_t someFunnyFunc(boost::uintmax_tx, boost::uintmax_t y, boost::uintmax_tz) { ... }`自己并完成它。我这样做是因为我想让使用自定义整数类型成为可能，这样可以使用平台不直接支持的更大整数。

编辑： **这能解决我的问题吗：**

```
template<class IntType>
IntType someFunnyFunc(IntType x, IntType y, IntType z) { ... }

boost::uintmax_t someFunnyFunc(boost::uintmax_t x, boost::uintmax_t y, boost::uintmax_t z) {
    return someFunnyFunc<boost::uintmax_t>(x, y, z);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:01:21.547

编译器不会执行类型转换。它们将生成：

```
short someFunnyFunc(short x, short y, short z) 
```

简而言之，编译器选择“阻力最小的路径”。执行类型转换存在“阻力”，但生成与您的参数完美匹配的函数签名没有“阻力”。

如果有多个相等“阻力”的路径，您可能会得到一个模棱两可（或没有匹配的函数）错误（编译器应该采用哪个路径？）。例如，如果您尝试传递`short`、`int`和`long`，[您将收到错误消息](http://ideone.com/h8JJAj)，因为您尝试执行的操作没有正确匹配的签名。编译器无法推断出函数的正确类型，因为有多种可能性，没有一种是“最好的”。

**编辑：**不，这不会解决你的问题。如果您传递`short`s，编译器将选择模板化函数（并使用`IntType = short`）。

`someFunnyFunc<boost::uintmax_t>(short_1, short_2, short_3);`如果你想使用`boost::uintmax_t`但传递`short`参数，你可以这样做。你也可以这样做：

```
template<class IntType>
IntType someFunnyFunc(IntType x, IntType y, IntType z) { ... }

// If you try to pass shorts, the compiler will opt for this version:
boost::uintmax_t someFunnyFunc(short x, short y, short z) {
    return someFunnyFunc<boost::uintmax_t>(x, y, z);
} 
```

假设你想使用`boost::uintmax_t`但仍然通过`short`s.

# mysql - 现有系统中用于报告目的的数据库设计

> ID：15044898
> 
> 赞同：0
> 
> 时间：2013-02-23T19:52:46.630
> 
> 标签：mysql, database-design, accounting

我习惯于根据我的数据库表记录生成报告，并且在呈现它时没有任何问题。

但是现在，如果我不创建一个虚拟表作为存储库，一些演示要求似乎很难处理。

**当前系统详细信息和信息：**

> 系统类型：*库存会计*
> 
> 系统设计和设置：*可以根据所选日期（交易日期）生成报告*：**个人报告**：资产负债表（BS）、损益表（IS）和现金流量表（CFS）

**新报告要求：**

1.  BS、IS 和 CFS 报告应具有不同的格式和显示*（主要需要更新的是布局显示的更改）*
2.  保存每个生成的报告

*我正在考虑创建一个虚拟数据库表，因为w/c中的**第二个要求是保存生成的每个报告。***

之前，我确实为复杂的报告创建了存储库表，但在另一个用户生成相同的报告时被替换/删除。

**问题：**

1.  根据新的报告要求，是否真的需要为这种类型的报告要求创建虚拟表？

2.  那么，在实际功能中，`*they can be generated at any time*`但出于报告和记录目的以及从**性能角度来看**，保存生成的报告真的有意义吗？

**对于那些 DB 会计大师**，**保存**BS、IS 和 CFS 生成的报告是一个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:57:41.823

> 根据新的报表要求，是否真的需要为这种类型的报表需求创建一个虚拟表？

是的，尽管我将其称为报告历史表。

> 好吧，在实际功能中，*它们可以随时生成，*但出于报告和记录目的以及从性能角度来看，保存生成的报告真的有意义吗？

从审计和问责制的角度来看，保存生成的报告是有意义的。您必须询问给您要求的人，但我曾在系统上工作过，我们必须记录谁在何时从哪个终端/工作站进行了哪些系统查询。对数据库的系统更改受到更严格的监控。审计是法律规定的。

# python - 用python加入单独的文件

> ID：15044902
> 
> 赞同：0
> 
> 时间：2013-02-23T19:53:10.080
> 
> 标签：python

我想将 100 个不同的文件合并为一个。

包含数据的文件示例：

example1.txt 具有以下格式：

```
 something
  something 
  somehting 
```

example2.txt 具有以下格式：

```
 something
 something 
 somehting 
```

并且所有 100 个文件都具有相同的数据格式，并且有一个通用名称 example1.....example100，这意味着示例相同并且有一个数字。

```
from itertools import chain

 infiles = [open('{}_example.txt'.format(i+1), 'r') for i in xrange(113)]
 with open('example.txt', 'w') as fout:
      for lines in chain(*infiles):
            fout.write(lines) 
```

我用过这个，但问题是下一个文件的第一行与上一个文件的最后一行连接

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:56:55.103

如果您有 100 个文件，最好只使用文件数组：

```
infiles = [open('example{}.txt'.format(i+1), 'r') for i in xrange(100)]
with open('Join.txt', 'w') as fout:
    for lines in izip_longest(*infiles, fillvalue=''):
        lines = [line.rstrip('\n') for line in lines]
        print >> fout, separator.join(lines) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:59:25.913

我会打开一个可写的新文件：join.txt，然后使用范围（1,100）循环浏览所需的文件：

```
join = open('Join.txt','w')
for file in range(1,100):
  file = open('example'+file+'.txt','r')
  file = file.readlines()
  for line in file:
    join.write(line) 
```

# ruby-on-rails - Rails 3.2.x has_many，通过（3 个模型）在创建之前调用 nil id

> ID：15044908
> 
> 赞同：0
> 
> 时间：2013-02-23T19:53:58.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rspec2, nested-attributes, has-many-through

这是我正在处理的内容，但首先需要了解需要做什么的背景知识。有 3 种模型：患者 -- 预约 -- 程序

在这 3 个模型中，有两个视图程序——患者

在这 2 个视图中，我想通过患者（显示）视图安排约会。这实质上将为视图中的患者（特别是视图中的患者 ID）创建一个新约会。

这是模型的代码

```
class Patient < ActiveRecord::Base
  attr_accessible :address1, :address2, :city, :comment, :email, :first_name, :init_date, :init_time, :last_name, :mobile, :notes, :phone, :state, :zip

  has_many :appointments, dependent: :destroy
  has_many :procedures, through: :appointments 
```

```
class Procedure < ActiveRecord::Base
  attr_accessible :comment, :occurence, :procedure, :procedure_code, :procedure_price, :procedure_time, :visits
  has_many :appointments
  has_many :patients, through: :appointments 
```

```
class Appointment < ActiveRecord::Base
  attr_accessible :appointment_date, :appointment_notes, :appointment_time, :procedure_id
  belongs_to :patient
  belongs_to :procedure 
```

这是约会的控制器以及包含约会的 routes.rb （但只是那一行）

```
resources :appointments, only: [:create, :destroy, :edit, :update] 
```

```
class AppointmentsController < ApplicationController
include PatientsHelper
before_filter :signed_in_user

def create
    @current_patient = @patient.id
    @appointment = @current_patient.appointments.build(params[:appointment])
    if @appointment.save
        flash[:success] = "Appointment scheduled!"
        redirect_to patient_path(@current_patient)
    else
        render 'create'
    end
end 
```

```
module PatientsHelper

def current_patient=(patient)
    @current_patient = patient
end

def current_patient
    @current_patient
end

def current_patient?(patient)
    patient == current_patient
end
end 
```

这就是设置，我在患者控制器中收到以下 rspec 错误。通过首先为@current_patient = Patient.first 定义一个ID，在控制台中测试了@appointment = @current_patient.appointments.build(params[:appointment])。这行得通，并且构建会按应有的方式进行。错误：

失败：

```
1) Appointment Pages appointment creation with invalid information should not create an appointment
 Failure/Error: expect { click_button "Schedule procedure" }.not_to change(Appointment,
 RuntimeError:
   Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id
 # ./app/controllers/appointments_controller.rb:6:in `create'
 # (eval):2:in `click_button'
 # ./spec/requests/appointment_pages_spec.rb:17:in `block (5 levels) in <top (required)>'
 # ./spec/requests/appointment_pages_spec.rb:17:in `block (4 levels) in <top (required)>'

2) Appointment Pages appointment creation with invalid information error messages 
 Failure/Error: before { click_button "Schedule procedure" }
 RuntimeError:
   Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id
 # ./app/controllers/appointments_controller.rb:6:in `create'
 # (eval):2:in `click_button'
 # ./spec/requests/appointment_pages_spec.rb:22:in `block (5 levels) in <top (required)>'

3) Appointment Pages appointment creation with valid information should create a micropost
 Failure/Error: expect { click_button "Schedule procedure" }.to change(Appointment,
 RuntimeError:
   Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id
 # ./app/controllers/appointments_controller.rb:6:in `create'
 # (eval):2:in `click_button'
 # ./spec/requests/appointment_pages_spec.rb:36:in `block (5 levels) in <top (required)>'
 # ./spec/requests/appointment_pages_spec.rb:36:in `block (4 levels) in <top (required)>' 
```

似乎我没有正确定义@current_patient = @patient.id... 或者更确切地说，当前的患者没有延续/通过预约表格。我需要在哪里定义当前患者以将该 ID 传递到 @current_patient.appointments.build 的表单创建方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:20:19.427

不完全是我想要的，但解决了这个问题。

使用以下内容能够得到相应的保存。*仍然无法找出为什么我无法从 URL 中提取 Patient - 例如 app.dev/patients/2 - 其中患者信息正在提取 id 2* ...但现在我可以使用什么来保存约会我怀疑是一种相当粗糙的方法。

1.  在表单中，我添加了一个隐藏字段，用于提取适当的患者 ID
2.  在 Appointments 控制器中，添加到 attr_accessible :patient_id
3.  在约会_控制器

    ```
    def create
    @appointment = Appointment.new(params[:appointment])
    @current_patient = @appointment.patient_id
    if @appointment.save
        flash[:success] = "Appointment scheduled!"
        redirect_to patient_path(@current_patient)
    else
        render 'patients/show'
    end
    end 
    ```

`render 'patients/show'`仍然损坏，但会将其留给另一个线程。谢谢大家的帮助和指导。同样，我怀疑渲染调用与当前困扰我从约会控制器模型直接访问 current_patient 的问题有关。

# jquery - jquery 可拖放到类别中

> ID：15044912
> 
> 赞同：0
> 
> 时间：2013-02-23T19:54:16.047
> 
> 标签：jquery, jquery-ui, draggable, droppable

好的，所以可放置的 jquery ui 东西让我有点困惑它应该如何工作。这就是我想要做的。我有 6 个 div 代表某种项目，它们需要放入 6 个可能的类别 div 中的任何一个。因此您可以将所有 6 个放入一个中，或者将 1 个放入 6 个中的每个中，等等。

这是html：

```
 <div class='droppable_category'>
      name
    </div>
    <div class='droppable_category'>
      name
    </div>
    <div class='droppable_category'>
      name
    </div>
    <div class='droppable_category'>
      name
    </div>
    <div class='droppable_category'>
      name
    </div>
    <div class='droppable_category'>
      name
    </div>
  </div>

<br class='clear'>
<div id='column_1_count' class='droppable_bucket'>
</div>
<div id='column_2_count' class='droppable_bucket'>
</div>  
<div id='column_3_count' class='droppable_bucket'>
</div>
<div id='column_4_count' class='droppable_bucket'>
</div>
<div id='column_5_count' class='droppable_bucket'>
</div>
<div id='column_6_count' class='droppable_bucket'>
</div> 
```

这是javascript：

```
$( ".droppable_category" ).draggable({ revert: "invalid" });

$( ".droppable_bucket" ).droppable({
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    drop: function( event, ui ) {
        $( this )
            .addClass( "ui-state-highlight" )
            .find( "p" )
            .html( "Dropped!" );
    }
}); 
```

所以基本上我需要更新一些隐藏字段，比如

```
<input type="hidden" value="0" id="cat1"> 
```

到可丢弃桶中丢弃的项目总数。

所以最后，我会知道在 1-6 号桶里放了多少东西。

关于实现这一目标的最佳方法的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:25:24.480

如果您将可放置的 div 链接到输入，它会使生活变得更轻松，如下所示：

```
<div id='column_1_count' class='droppable_bucket' data-input='cat1'>
</div>
<div id='column_2_count' class='droppable_bucket' data-input='cat2'>
</div>  
<div id='column_3_count' class='droppable_bucket' data-input='cat3'>
</div>
<div id='column_4_count' class='droppable_bucket' data-input='cat4'>
</div>
<div id='column_5_count' class='droppable_bucket' data-input='cat5'>
</div>
<div id='column_6_count' class='droppable_bucket' data-input='cat6'>
</div> 
```

然后您可以执行以下操作：

```
$( ".droppable_category" ).draggable({ revert: "invalid" });

$( ".droppable_bucket" ).droppable({
    activeClass: "ui-state-hover",
    hoverClass: "ui-state-active",
    drop: function( event, ui ) {
        var currentHeight = $(this).height();
        var relatedInput = $(this).data('input');
        var catCount = parseInt($("#"+relatedInput).val(), 10);
        $( this )
            .addClass( "ui-state-highlight" )
            .height(currentHeight+25);
        $("#"+relatedInput).val(++catCount); 
    }
}); 
```

[在这里拉小提琴](http://jsfiddle.net/mccannf/9s3kc/5/)。

## 编辑

根据您的评论，您需要更多的灵活性，在存储桶之间移动东西，动态跟踪东西被拖放的位置等等。

一起使用 sortable 和 draggable 会更有意义。

如果你有这样的 HTML：

```
<div id="fixedDiv">
    <ul id="category">
        <li class="droppable_category">name</li>
        <li class="droppable_category">name</li>
        <li class="droppable_category">name</li>
        <li class="droppable_category">name</li>
        <li class="droppable_category">name</li>
        <li class="droppable_category">name</li>
    </ul>
</div>
<div id="buckets">
    <ul id='column_1_count' class='droppable_bucket' data-input='cat1'></ul>
    <ul id='column_2_count' class='droppable_bucket' data-input='cat2'></ul>
    <ul id='column_3_count' class='droppable_bucket' data-input='cat3'></ul>
    <ul id='column_4_count' class='droppable_bucket' data-input='cat4'></ul>
    <ul id='column_5_count' class='droppable_bucket' data-input='cat5'></ul>
    <ul id='column_6_count' class='droppable_bucket' data-input='cat6'></ul>
    <ul id='column_7_count' class='droppable_bucket' data-input='cat7'></ul>
</div> 
```

你可以像这样创建 JavaScript：

```
$(function() {
    var transferred = false;
    $('.droppable_category').draggable({
        connectToSortable: '.droppable_bucket',
        helper: 'clone',
        start: function(event, ui)
        {
            $(this).hide();
        },
        stop: function(event, ui)
        {
            if(!transferred)
                $(this).show();
            else
            {
                $(this).remove();
                transferred = false;
            }
        }
    });

    $('.droppable_bucket').sortable({
        connectWith: ".droppable_category, .droppable_bucket",
        receive: function(event, ui)
        {
            transferred = true;
            var targetInput = $(this).data('input');
            var targetCatCount = parseInt($("#"+targetInput).val(), 10);
            $("#"+targetInput).val(++targetCatCount); 
            if (ui.sender.hasClass("droppable_bucket")) {
                var sourceInput = ui.sender.data('input');
                var sourceCatCount = parseInt($("#"+sourceInput).val(), 10);
                $("#"+sourceInput).val(--sourceCatCount);                 
            }           
        }
    });

    $( "ul, li" ).disableSelection();
}); 
```

[另一个小提琴在这里](http://jsfiddle.net/mccannf/EAz3G/2/)。

# css - 类：悬停在 Firefox 上不起作用

> ID：15044914
> 
> 赞同：0
> 
> 时间：2013-02-23T19:54:21.527
> 
> 标签：css, firefox

我对 Firefox 有一点问题，这是 html

```
<html>
<button name="five" data-type="select" class="ui_button ui_button_normal">
<span>Pasta</span>
<div class="ui_button ui_button_normal ui_select_list">
    <div class="ui_select_list_item" name="Pasta">Pasta</div>
    <div class="ui_select_list_item" name="Carne">Carne</div>
    <div class="ui_select_list_item" name="Verdura">Verdura</div>
    <div class="ui_select_list_item" name="Pesce">Pesce</div>
    <div class="ui_select_list_item" name="Dolce">Dolce</div>
    <div class="ui_select_list_item" name="Frutta">Frutta</div>
    <div class="ui_select_list_item" name="Caffè">Caffè</div>
</div>
</button>
</html> 
```

这是CSS

```
.ui_select_list 
{
margin: 0px !important;
height: auto !important;
padding: 10px;
}
.ui_select_list_item 
{
border: 1px solid transparent;
}
.ui_select_list_item:hover 
{
border: 1px solid transparent;
background-color: rgba(0, 185, 0, 0.3);
box-shadow: 0 0 2px 1px #000000;
border-radius: 10px;
}
.ui_button 
{
background-color: rgba(140, 140, 140, 0.5);
border: 0 solid transparent;
border-radius: 10px 10px 10px 10px;
color: #FFFF00;
font-family: verdana, sans-serif;
font-size: 15px;
height: 32px;
line-height: 30px;
margin: 5px;
position: relative;
text-align: center;
width: 160px;
}
.ui_button_normal 
{
box-shadow: 0 0 1px 4px rgba(0, 0, 0, 0.5);
}
.ui_button_normal:hover 
{
background-color: rgba(180, 180, 180, 0.5);
box-shadow: 0 0 2px 5px rgba(0, 0, 0, 0.8);
} 
```

可以在[http://jsfiddle.net/Mak73/3YkSe/上找到](http://jsfiddle.net/Mak73/3YkSe/)

问题是，在谷歌浏览器上，它的工作方式就像 expeted，当鼠标悬停在 div.ui_select_list_item 上时，div 的内容会随着 div.ui_select_list_item:hover 的变化而变化。

在 Firefox 上 :hover 不起作用，知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:03:41.043

它不起作用，因为您将 a 包裹`<button>`在 div 周围.. 之后关闭它，`<span>`状态`:hover`将起作用..

jsfiddle：http: [//jsfiddle.net/3YkSe/2/](http://jsfiddle.net/3YkSe/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:03:39.640

我建议您尝试应用以下元素选项：

显示：无；显示：内联；

我认为这将在 Firefox 中做一些更好的工作，焦点弹出菜单并内联显示它，没有阻塞。这只是我给你的一个想法，供你尝试。回复是否有效！谢谢！

# php - Javascript错误？对象为空

> ID：15044916
> 
> 赞同：0
> 
> 时间：2013-02-23T19:54:28.777
> 
> 标签：php, javascript, html, ajax, upload

我为它制作了一个上传页面和 php 脚本，它是一个 AJAX 脚本，但是我在 Firebug 中遇到了一些错误，并且我的上传百分比没有被返回，到目前为止，我只能在 firefox 中进行一次上传，并且脚本赢了甚至不能在 chrome 中工作。

![Firebug 中的错误](../Images/d2e51ecf9b9b554d774100b14171ebd0.png)

这是我的代码：

```
<?php 
    session_start();
    include ('../Connect/Connect.php');
    $User = $_SESSION['User'];

    if(isset($User))
    {
    }
    else 
    {
        header("location:../");
    }
    $Connect -> close();
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link rel="stylesheet" href="../StyleSheets/StyleSheet.css" />
        <link rel="stylesheet" href="../JQueryUI/css/black-tie/jquery-ui-1.10.1.custom.min.css" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>TeraShare</title>
        <script type="text/javascript" src="../JQuery/JQuery.js"></script>
        <script type="text/javascript" src="../JQueryUI/js/jquery-ui-1.10.1.custom.min.js"></script>
        <script type="text/javascript" src="../Scripts/JavaScript.js"></script>
        <script type="text/javascript">
            $(document).ready(function()
            {   
                var UploadB = $('#Submit');

                UploadB.click(function(event)
                {
                    event.preventDefault();
                    event.stopPropagation();

                    var Data = new FormData();

                    var Files = document.getElementById('Files');

                    for(var I = 0; I < Files.files.length; ++I)
                    {
                        var FilesName = Files.files[I].name;

                        Data.append('File[]', Files.files[I]);
                    }

                    var Request = XMLHttpRequest();

                    Request.upload.addEventListener('progress', function(event)
                    {
                        if(event.lengthComputable)
                        {
                            var Percent = event.loaded / event.total;
                            Progress = document.getElementById('#Progress');

                            while(Progress.hasChildNodes())
                            {
                                Progress.removeChild(Progress.firstChild);  
                            }

                            Progress.appendChild(document.createTextNode(Math.round(Percent * 100) + '%'));
                        }
                    });

                    Request.upload.addEventListener('load', function(event)
                    {
                        Progress.style.display = 'none';
                    });

                    Request.upload.addEventListener('error', function(event)
                    {
                        alert('Upload Failed.');
                    });

                    Request.open('POST', 'Upload.php');
                    Request.setRequestHeader('Cache-Control', 'no-cache');
                    Progress.style.display = 'block';
                    Request.send(Data);
                });
            });
        </script>
    </head>

    <body>
        <div id="Wrapper">
            <div id="Menu">
                <div id="Logo"><a href=""><img src="../Pictures/Logo.png" /></a></div>
                <div id="Buttons">
                    <a href="../LogOut/"><div class="Button" title="LogOut">LogOut</div></a>
                    <div class="Button" id="Upload" title="Upload">Upload</div>
                    <div class="Button" id="CFolder" title="Upload">Create Folder</div>
                    <div class="Button" id="Store" title="Store">Store</div>
                    <div class="Button" title="Menu"><?php echo $User; ?>&nbsp;<span class="Triangle"></span></div>
                </div>
            </div>
            <div id="Content">
                <div id="Fix">

                    <div id="UForm">
                        <form action="" method="post" enctype="multipart/form-data">
                            <input type="file" id="Files" name="File[]" multiple="multiple" />
                            <input type="submit" name="Submit" class="AB" id="Submit" value="Upload!" />
                            <div id="Progress"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

php脚本：

```
 <?php
session_start();
include('../Connect/Connect.php');

$User = $_SESSION['User'];
$Token = $_POST['Token'];
$Files = $_FILES['File'];
if(isset($User))
{
    if(!empty($Files))
    {
        for($X = 0; $X < count($Files['name']); $X++)
        {
            $Name = $Files['name'][$X];
            $TMP = $Files['tmp_name'][$X];

            move_uploaded_file($TMP, '../Users/HARAJLI98/' . $Name);
        }
    }
}
else
{
    header("location:../"); 
}

$Connect->close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:06:15.823

`Document.getElementById`需要ID的物理字符串，你不需要指定它是一个ID。

您正在混淆 javascript 和 jQuery。在 jQuery 中，它`$.("#Progress")`会起作用，因为该`$`函数不知道您是在寻找一个 ID 还是一个类。

这个：

```
Progress = document.getElementById('#Progress'); 
```

应该是这样的：

```
Progress = document.getElementById('Progress'); 
```

或这个：

```
Progress = $("#Progress"); 
```

# haskell - 如何通过内容确定文件的 MIME 类型？

> ID：15044923
> 
> 赞同：5
> 
> 时间：2013-02-23T19:54:51.340
> 
> 标签：haskell, mime

有没有办法通过文件的内容来确定文件的 MIME 类型？也许有一些 Haskell 库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T20:22:34.073

[Haskell 绑定到 libmagic](http://hackage.haskell.org/package/magic)可能是解决您问题的方法。这是一个例子。

```
import Magic
import System.Environment (getArgs)

main =  do
  magic <- magicOpen [MagicMime]
  (file:_) <- getArgs
  magicLoadDefault magic
  mime <- magicFile magic file
  putStrLn mime 
```

# java - 如何在 Tomcat 和 JavaScript 中的开发和测试服务器之间切换？

> ID：15044926
> 
> 赞同：0
> 
> 时间：2013-02-23T19:55:02.110
> 
> 标签：java, javascript, tomcat, deployment, production-environment

我正在开发两个独立的 Java Web 应用程序 - A 是网站，B 是后端服务。两者都部署在运行 Tomcat 的不同机器上。

A 使用 REST 调用访问 B。

我有单独的机器用于开发、测试和生产。如何管理这两个应用程序的开发、测试和生产环境的部署？在部署应用程序之前，我经常需要更改 Java 和 JavaScript 代码中的 URL 以指向正确的服务器。

考虑的选项：1）我考虑过使用[此处](http://iseriesegl.wordpress.com/2012/06/10/tomcat-in-development-test-and-production-environments)描述的系统环境变量。这适用于 Java 端，但在我的网站 A 中有调用后端服务器 B 的 REST API 的 JavaScript 代码。我不知道如何从我的 JavaScript 代码访问在 Java 级别定义的 URL。有吗？

2）在代码中使用占位符来替换在构建期间被实际 URL 替换的 URL（ant？）。同样，不确定这是否适用于 JavaScript 代码。

这一定是一个常见问题，但进一步的谷歌搜索并没有给我关于人们如何解决这个问题的具体提示。感谢任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:08:58.940

[使用Replace 任务](http://ant.apache.org/manual/Tasks/replace.html)构建简单的 ant来替换 javascript 文件中的 API 端点 URL 字符串就可以了。您将在构建配置文件中为 dev、prod 等维护一个单独的配置设置，并且您可以使用该配置作为选项触发构建。

当您将 JS 文件复制到其最终部署目标时，请查看有关过滤器链的此[SO 答案以进行替换。](https://stackoverflow.com/questions/3680362/ant-replace-token-from-properties-file)

在您的 JS 文件中：

```
var APIURL = "@APIURL@"; 
```

以下是替换操作的示例：

```
<!-- holds your API endpoints based on configuration parameter -->
<property file="${config}.properties" />
<!-- does the replacement -->
<copy src="/path_to_main_js_file" dest="/path_to_final_package_js_file"
   <filterchain>
     <filterreader classname="org.apache.tools.ant.filters.ReplaceTokens">
       <param type="token" name="APIURL" value="${apiurl}"/>
     </filterreader>
   </filterchain>
 </copy> 
```

例如

```
ant -Dconfig=dev package 
```

或者，您也可以使用不同的目标来在内部加载正确的配置文件的 dev、prod、staging。

```
ant package-dev 
```

您在 Java 端使用环境变量的方法似乎是一个好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T19:59:06.307

[ZooKeeper](http://zookeeper.apache.org/)是管理配置的好方法，但可能会过度满足您的需求。

就像您提到的解决方案一样，在构建时使用 ant 生成 URL 是另一个可行的解决方案。我已经直接使用了这个（以及 ZooKeeper）；它很简单，但并非没有缺点。至少这意味着您需要为开发、测试和生产单独构建。

如果您不使用单独的构建，您将需要一些基本的钩子来了解代码运行的环境。系统环境变量可以很好地解决这个问题。

[Twelve-Factor App](http://www.12factor.net/)的[配置部分](http://www.12factor.net/config)不能直接回答您的问题，但绝对值得一读。

# regex - Emacs 删除字符串中的最后一个目录

> ID：15044927
> 
> 赞同：3
> 
> 时间：2013-02-23T19:55:04.517
> 
> 标签：regex, elisp

假设，我有一个目录名称为：“/sites/all/modules”的字符串。我想删除它的最后一个组件，生成：“/sites/all”。我试过，创建一个函数，但它返回：“/sites/all/modules”。

```
(defun remove-last-dir (dir)
      (replace-regexp-in-string "(.*)/.+" "\1" dir))

(print (remove-last-dir "/sites/all/modules")) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T21:49:23.310

```
ELISP> (directory-file-name (file-name-directory "/sites/all/modules"))
"/sites/all" 
```

`file-name-directory`获取给定路径的目录组件。Emacs 认为`/`以目录结尾的路径，所以返回值会有一个尾随`/`

`directory-file-name`返回路径的非目录版本（这意味着它会`/`从值中去除尾随，如果有的话）。

请注意，如果您的原始参数是（或可能是）`/sites/all/modules/`，那么您将希望首先调用`directory-file-name`它（否则`file-name-directory`只会返回原始值，因为目录路径的“目录组件”本身就是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:05:41.827

我在 ELisp 中给你写了一些代码，应该可以解决问题：

```
(defun remove-last-dir (dir)
  (let* ((splits (cdr (split-string dir "/")))
         (res (mapconcat 'identity (butlast splits) "/")))
     (concat "/" res))) 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T20:27:37.767

编写了有效的解决方案：

```
(defun remove-last-dir (dir)
      (string-match "\\(.*\\)/" dir)
      (match-string 1 dir))

(print (remove-last-dir "/sites/all/modules")) 
```

印刷：

“/网站/全部”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-22T11:26:39.713

虽然[@phils 的答案](https://stackoverflow.com/a/15046138/596361)对于没有第三方库的 Emacs 来说是正确且惯用的，但如果您经常在 Elisp 中使用文件和文件路径，我建议安装[`f.el`](https://github.com/rejeep/f.el)库，它引入了大量与文件和目录相关的功能。[`f-dirname`](https://github.com/rejeep/f.el#f-dirname-path)是你需要的：

```
(f-dirname "path/to/file.ext") ;; => "path/to"
(f-dirname "path/to/directory") ;; => "path/to"
(f-dirname "/") ;; => nil 
```

如果您需要对路径进行更多控制，请查看其他功能。

# ios - Core Data 延迟加载一对一关系

> ID：15044933
> 
> 赞同：0
> 
> 时间：2013-02-23T19:55:40.093
> 
> 标签：ios, objective-c, core-data

我对核心数据有疑问。我读到 Core Data 懒得加载实体关系，以防万一，它没有一对多关系。

我有一个实体“项目”，它与一个实体“运动”有关系（多对多关系）。 ![在此处输入图像描述](../Images/4d863b59a121a7f82b15d4da64d4465c.png)

在这个方法中，除了加载“Movement”的所有实例之外，我还想加载“Item”的相关属性，例如“name”。

```
//Core data request
NSError *error;
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Movement"
                                          inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];
fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];

NSFetchedResultsController *result = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                         managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil
                                                                                    cacheName:@"Root"];

[result performFetch: &error]; 
```

为了看看它是否有效，我添加了这段代码：

```
NSArray *array = [NSArray arrayWithArray:[self.managedObjectContext executeFetchRequest:fetchRequest error:&error]];
for (int i = 0; i < array.count; i++) {
    Movement *movement = [array objectAtIndex:i]
    NSLog(@"item name %@",movement.movement_inItem.name);
} 
```

结果为 null*项目名称 (null)*

我环顾四周，试图把这段代码放在**[fetchRequest setEntity:entity];**

```
NSString *relationshipKeyPath = @"movement_inItem";
NSArray *keyPaths = [NSArray arrayWithObject:relationshipKeyPath];
[fetchRequest setRelationshipKeyPathsForPrefetching:keyPaths];
[fetchRequest setIncludesSubentities:YES]; 
```

但没有任何改变。

非常感谢！

# php - 对于每次提交，第一个插入的行是重复的

> ID：15044938
> 
> 赞同：0
> 
> 时间：2013-02-23T19:56:00.113
> 
> 标签：php, header

我正在创建一个评论表单。每次我提交表单时，第一个添加的行都会重复。我试图用标题解决它并退出。但这也行不通。有人可以指导我吗？

```
<?php 
    $reizen = new reizen;

    if(isset($_POST['submit']))
    {
        $username = $_POST['username'];
        $comment = $_POST['comment'];
        $reizen -> comment($username, $comment);
        header("Location: index.php?". $_SERVER['QUERY_STRING']);
        exit();
    }
    echo $reizen -> retrieve();
    $output = '';
    $output .= '<html>';
    $output .= '<head>';
    $output .= '<link rel="stylesheet" href="css/main.css" type="text/css"/>';
    $output .= '</head>';
    $output .= '<body>';
    $output .= '<div id="contactform">';
    $output .= '<form name="form" id="form" action="index.php?page=review" method="post">';
    $output .= '<label>Name:</label>';
    $output .= '<input type="text" name="username" />';
    $output .= '<label>comment</label>';
    $output .= '<textarea name="comment" rows="20" cols="20"></textarea>';
    $output .= '<label><img src="captcha.php"></label>';
    $output .= '<input type="text" name="code">';
    $output .= '<input type="submit" class="submit" name="submit" value="Send message" />';
    $output .= '</form>';
    $output .= '</body>';
    $output .= '</div>';
    $output .= '</html>';
    echo $output;
?> 
```

公共功能评论（$用户名，$评论）{

```
if(!empty($username) && !empty($comment))
{
    $date = date("Y-m-d H:i:s");

    if($insert = $this->db -> prepare("INSERT INTO reviews (username, comment, time) VALUES (?, ?, ?)"))
    {
        $insert -> bind_param('sss', $username, $comment, $date);
        $insert -> execute();
    }
    else 
    {
        echo "iets gaat mis met inserten";
    }
}
else 
{
    echo "missing fields";
} 
```

}

```
public function retrieve()
{

    if($retrieve = $this->db -> query("SELECT username, comment, time FROM reviews ORDER BY time LIMIT 5"))
    {
        while($row = $retrieve -> fetch_assoc())
        {
            $output .= '<div class="comment">';
            $output .= '<div class="name">'. $row['username'] .'</div>';
            $output .= '<div class="date">Added at '. date('H:i \o\n d M Y', strtotime($row['time'])) .'"></div>';
            $output .= '<p>'. $row['comment'] .'</p>';
            $output .= '</div>';
        }
    }
    else 
    {
        $output .= "iets gaat mis met retrieven";
    }
    return $output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:14:22.640

我认为这可能是一个问题：

```
$reizen->comment($username, $comment);
header("Location: index.php?". $_SERVER['QUERY_STRING']); 
```

$reizen->comment($username, $comment); 向您的输出缓冲区发送回显。您的标头不会被发送...标头必须始终放在任何输出之前。

所以试试

```
header("Location: index.php?". $_SERVER['QUERY_STRING']);
$reizen->comment($username, $comment); 
```

# knockout.js - 访问基于未命名数组的映射生成的剔除模型中的值

> ID：15044939
> 
> 赞同：3
> 
> 时间：2013-02-23T19:56:12.900
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在从 Web api 检索 Json 数据。数据格式为：

```
[{"CustomerID":1,"CustomerName":"John"},{"CustomerID":2,"CustomerName":"Sally"}] 
```

真实数据自然更复杂，但它的格式为没有“名称”的项目数组，例如{“customers”:[...]}。我无法更改正在传递的数据，所以这就是我必须忍受的。

我想使用映射插件在此数据上创建一个剔除模型并将其绑定到视图：

```
var vmCustomers = ko.mapping.fromJS(jsonObject);
ko.applyBindings(vmPartners); 
```

我现在的问题是我不知道如何访问 HTML 页面上的数据。如果我检查 vmCustomers 并深入了解 _latestValue，我可以看到数据已加载到模型中。

我希望能够在 HTML 中做的是对应的事情

```
foreach: customers 
```

我可以通过手动构建淘汰模型并使用 .mapping 来填充它（甚至手动填充它）来使其工作，但我想避免这种情况。我正在寻找的是一种从 HTML 代码中获取淘汰模型中顶部数组的方法。

我对淘汰赛很陌生，所以我可能缺少一些基本的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:24:26.987

不要与KO对抗。只需创建一个适当的视图模型，其中您有一个`customers`属性来保存您的数据，这是 KO 的做法。无论如何，将来当您有地方放置其他逻辑/数据时，视图模型将很方便。

```
var viewModel = { customers: ko.mapping.fromJS(jsonObject); }
ko.applyBindings(viewModel); 
```

然后你就可以拥有你`data-bind="foreach: customers"` 的看法。

但是，如果您不想拥有视图模型并且想要绑定到数组，则无法使用“客户”之类的名称访问它，您需要使用[当前上下文](http://knockoutjs.com/documentation/binding-context.html)引用它：使用`$data`属性：

```
data-bind="foreach: $data" 
```

JS

```
var vmCustomers = ko.mapping.fromJS(jsonObject);
ko.applyBindings(vmCustomers); 
```

演示[JSFiddle](http://jsfiddle.net/jjZqj/)。

# ember.js - Ember 数据 RecordArray 加载回调

> ID：15044942
> 
> 赞同：0
> 
> 时间：2013-02-23T19:56:32.900
> 
> 标签：ember.js, ember-data

在我的 ember 控制器代码的某处，我加载了一些数据。它看起来像这样：

```
models = App.MyModel.find() 
```

它返回`<DS.RecordArray:ember763>`并发送 AJAX。我需要在这个数据加载上添加回调。像这样的东西不起作用：

```
models.on 'didLoad', () ->
  console.log 'Loaded' #never triggers 
```

我怎么解决这个问题？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:44:00.087

问题是，当不带参数调用时会`App.MyModel.find()`返回一个“实时数组”。从语义上讲，始终加载“实时数组”。在幕后，Ember 将在第一次`find()`调用模型时查询您的服务器。

相反，用于`App.MyModel.find({})`运行`findQuery`没有参数的 a。有关更多详细信息，请参阅此问题：

[https://github.com/emberjs/data/pull/735](https://github.com/emberjs/data/pull/735)

# entity-framework-5 - EF 5（代码优先）AddOrUpdate 重复嵌套数据

> ID：15044946
> 
> 赞同：1
> 
> 时间：2013-02-23T19:56:53.330
> 
> 标签：entity-framework-5

我有这些简单的实体：

```
public class Child
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }

    public virtual Parent Parent { get; set; }
}

public class Parent
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }

    public virtual ICollection<Child> Children { get; set; }
} 
```

我在种子方法中添加数据，如下所示：

```
var parent = new Parent { Name = "First" };

context.Parents.AddOrUpdate(p => p.Name, parent);

var children = new[]{
    new Child { Parent = parent, Name = "Child1" },
    new Child { Parent = parent, Name = "Child2" },
};

context.Children.AddOrUpdate(c => c.Name, children); 
```

这按预期工作，我可以多次更新数据库（更新数据库） - 没有重复。但是，如果我像这样添加第三个孩子：

```
var parent = new Parent { Name = "First" };

context.Parents.AddOrUpdate(p => p.Name, parent);

var children = new[]{
    new Child { Parent = parent, Name = "Child1" },
    new Child { Parent = parent, Name = "Child2" },
    new Child { Parent = parent, Name = "Child3" },
};

context.Children.AddOrUpdate(c => c.Name, children); 
```

**并再次**调用 update-database插入第二个父级，现在我在数据库中有两个父级。如果我需要第四个孩子并添加它，则将插入第三个父母，依此类推。

我该如何防止这种情况发生？

# javascript - 在整个屏幕上滚动的图像

> ID：15044948
> 
> 赞同：0
> 
> 时间：2013-02-23T19:57:01.937
> 
> 标签：javascript, jquery, css, image

假设我有一张大图像（我的是 3968x3584），我想放大查看它。好吧，我通常可以使用滚动条放大和滚动。

嗯，这很烦人。有什么办法可以拍摄图像。然后从某个地方开始，让它具有“原始”大小，我可以通过在屏幕上“拖动”鼠标来移动它。

如果您调整浏览器屏幕的大小，它将采取相应的行动。

是否有 jquery 或类似的插件可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:03:39.780

检查这是否有帮助

[http://code.google.com/p/panojs/](http://code.google.com/p/panojs/)

这是那里写的内容的副本，所以我可以满足这个表格强迫我做的 30 个字：

> PanoJS 是一个交互式 JavaScript 小部件，用于平移和缩放从较小的图块动态拼接在一起的全景图像。此小部件可用于查看大于浏览器视口中可用空间的图像。示例包括地图或高分辨率文档扫描。

# c - 在 C 中搜索字符串以查找字符串

> ID：15044949
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:57:02.483
> 
> 标签：c

我需要以字符串的形式搜索随机的字符列表，以查找特定字符串的出现。这个函数是返回一个指向搜索列表中最后一个字符之后的字符的指针。在我的主函数中，我需要循环该函数并返回随机列表中搜索字符串的出现次数。

到目前为止，这是我的功能。

```
char *findStringInData(char *data, char *string){
    int x, i;
    int m = 0, n = 0;
    char *follower;
    char *temp;
    for (x = 0; data[x] != '\0'; x++){
        if (data[x]== string[x]){
            temp = &data[x];
            //m++;
        }
            for(i = data[x]; string[i] != '\0'; i++){
            if (data[i] == string[i])
            follower = &temp[i];
            //n++;
            //printf("the count is %d\n", n);
        }
    }
    return follower;

   return NULL; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:02:28.933

请不要重新实现具有 strstr() 用于此目的的标准库。

根据您的输入数据和您要搜索的字符串，您还可以考虑专门的字符串搜索方法，例如 Boyer-Moore（请参阅[Boyer Moore 算法实现？](https://stackoverflow.com/questions/5423886/boyer-moore-algorithm-implementation)）

# algorithm - 快速迭代 GCD

> ID：15044955
> 
> 赞同：3
> 
> 时间：2013-02-23T19:57:37.083
> 
> 标签：algorithm

我有 GCD(n, i) 其中 i=1 在循环中增加 1 到 n。是否有任何算法可以比天真的增加和使用欧几里得算法计算 GCD 更快地计算所有 GCD？

PS我注意到如果n是素数，我可以假设从1到n-1的数字会给出1，因为素数对它们来说是互质的。除了素数之外的其他数字有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:11:41.413

## 概括

gcd 的可能答案由 n 的因数组成。

您可以如下有效地计算这些。

## 算法

首先将n分解为素数的乘积，即n=p1^n1*p2^n2*..*pk^nk。

然后，您可以遍历 n 的所有因子，并为 n 的每个因子将 GCD 数组在该位置的内容设置为因子。

如果您确保这些因素以合理的顺序（例如排序）完成，您应该会发现多次写入的数组条目最终将被写入最高值（这将是 gcd）。

## 代码

下面是一些 Python 代码来为数字 1400=2^3*5^2*7 执行此操作：

```
prime_factors=[2,5,7]
prime_counts=[3,2,1]
N=1
for prime,count in zip(prime_factors,prime_counts):
    N *= prime**count

GCD = [0]*(N+1)
GCD[0] = N
def go(i,n):
    """Try all counts for prime[i]"""
    if i==len(prime_factors):
        for x in xrange(n,N+1,n):
            GCD[x]=n
        return
    n2=n
    for c in xrange(prime_counts[i]+1):
        go(i+1,n2)
        n2*=prime_factors[i]
go(0,1)    
print N,GCD 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T23:11:33.337

C++ 实现，在 O(n * log log n) 中工作（假设整数的大小为 O(1)）：

```
#include <cstdio>
#include <cstring>
using namespace std;

void find_gcd(int n, int *gcd) {
  // divisor[x] - any prime divisor of x
  //              or 0 if x == 1 or x is prime
  int *divisor = new int[n + 1];
  memset(divisor, 0, (n + 1) * sizeof(int));

  // This is almost copypaste of sieve of Eratosthenes, but instead of
  // just marking number as 'non-prime' we remeber its divisor.
  // O(n * log log n)
  for (int x = 2; x * x <= n; ++x) {
    if (divisor[x] == 0) {
      for (int y = x * x; y <= n; y += x) {
        divisor[y] = x;
      }
    }
  }

  for (int x = 1; x <= n; ++x) {
    if (n % x == 0) gcd[x] = x;
    else if (divisor[x] == 0) gcd[x] = 1; // x is prime, and does not divide n (previous line)
    else {
      int a = x / divisor[x], p = divisor[x]; // x == a * p
      // gcd(a * p, n) = gcd(a, n) * gcd(p, n / gcd(a, n))
      // gcd(p, n / gcd(a, n)) == 1 or p
      gcd[x] = gcd[a];
      if ((n / gcd[a]) % p == 0) gcd[x] *= p;
    }
  }
}

int main() {
  int n;
  scanf("%d", &n);
  int *gcd = new int[n + 1];
  find_gcd(n, gcd);
  for (int x = 1; x <= n; ++x) {
    printf("%d:\t%d\n", x, gcd[x]);
  }
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-04T14:40:38.653

二进制 GCD 算法：
[https ://en.wikipedia.org/wiki/Binary_GCD_algorithm](https://en.wikipedia.org/wiki/Binary_GCD_algorithm)

比欧几里得算法快：
[https ://en.wikipedia.org/wiki/Euclidean_algorithm](https://en.wikipedia.org/wiki/Euclidean_algorithm)

我在 C 中为类型“__uint128_t”（在 Intel i7 Ubuntu 上使用 gcc）实现了“gcd()”，基于迭代 Rust 版本：
[https ://en.wikipedia.org/wiki/Binary_GCD_algorithm#Iterative_version_in_Rust](https://en.wikipedia.org/wiki/Binary_GCD_algorithm#Iterative_version_in_Rust)

使用“__builtin_ctzll()”可以有效地确定尾随 0 的数量。我针对 gmplib "mpz_gcd()" 对两个最大的 128 位斐波那契数的 100 万个循环（它们导致最大迭代次数）进行了基准测试，并看到了 10% 的减速。利用 u/v 值只会减小的事实，我在“<=UINT64_max”时切换到 64 位特殊情况“_gcd()”，现在看到 gmplib 的加速比为 1.31，详情请参阅：
[https ://www.raspberrypi.org /forums/viewtopic.php?f=33&t=311893&p=1873552#p1873552](https://www.raspberrypi.org/forums/viewtopic.php?f=33&t=311893&p=1873552#p1873552)

```
inline int ctz(__uint128_t u)
{
  unsigned long long h = u;
  return (h!=0) ?      __builtin_ctzll( h )
                : 64 + __builtin_ctzll( u>>64 );
}

unsigned long long _gcd(unsigned long long u, unsigned long long v)
{
  for(;;) {
    if (u > v) { unsigned long long a=u; u=v; v=a; }

    v -= u;

    if (v == 0)  return u;

    v >>= __builtin_ctzll(v);
  }
}

__uint128_t gcd(__uint128_t u, __uint128_t v)
{
       if (u == 0) { return v; }
  else if (v == 0) { return u; }

  int i = ctz(u);  u >>= i;
  int j = ctz(v);  v >>= j;
  int k = (i < j) ? i : j;

  for(;;) {
    if (u > v) { __uint128_t a=u; u=v; v=a; }

    if (v <= UINT64_MAX)  return _gcd(u, v) << k;

    v -= u;

    if (v == 0)  return u << k;

    v >>= ctz(v);
  }
} 
```

# android - 为什么意图总是使用 FLAG_ACTIVITY_FORWARD_RESULT 和 FLAG_ACTIVITY_PREVIOUS_IS_TOP？

> ID：15044957
> 
> 赞同：2
> 
> 时间：2013-02-23T19:58:04.273
> 
> 标签：android, browser, android-intent, flags

我注意到，如果我在任何应用程序中单击一个网址，将会有一个值为and的`intent`发送到浏览器。`FLAGS``FLAG_ACTIVITY_FORWARD_RESULT``FLAG_ACTIVITY_PREVIOUS_IS_TOP`

我们应该使用这两个标志属性有什么特别的原因吗？

似乎每个意图都有这两个默认`FLAGS`值。谁能解释为什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T19:18:53.417

您可能安装了多个浏览器，但您没有选择其中任何一个作为默认浏览器。在这种情况下，Android 将显示一个应用选择器，您可以在其中选择要使用的浏览器。

应用选择器添加了两个标志，以确保它充当不可见的中间人，以确保控制返回到上一个活动，而不是再次返回应用选择器，例如在使用后退按钮或将结果传递回时调用活动的 onActivityResult()。

# android - Android：为 MediaPlayer 打开 PLS 文件包括打开 PLS 文件的相同流链接？！错误 (1,-2147483648)

> ID：15044958
> 
> 赞同：0
> 
> 时间：2013-02-23T19:58:20.720
> 
> 标签：android, android-mediaplayer, shoutcast

我正在使用适用于 Android 的流媒体应用程序，但遇到了一个奇怪的错误。我的流媒体 url 保存在一个数据库中，该数据库还包括 m3u 和 pls 文件。这些文件被解析为可以正常工作的流 url。（我只检查流 url 是否包含 m3u 或 pls）

现在我刚刚发现，某些链接在 MediaPlayer 中不起作用。例如：一个电台有以下流媒体链接`http://drumstep-aacp.rautemusik.fm`如果我在我的 MediaPlayer 中打开该链接，它会抛出一个`Error (1,-2147483648)`（通常不受支持的文件格式）。

如果我在浏览器中打开相同的链接，我会被重定向到文件`http://drumstep-aacp.rautemusik.fm/listen.pls`. （我猜这就是 2147483648 错误的原因）

因为我已经写了一个 PLS-Parser，这不是一个真正的问题，但是 PLS-File 看起来像

```
[playlist]
File1=http://drumstep-aacp.rautemusik.fm  //same link I entered at the beginning
Title1=#Musik.DrumStep
Length1=-1
NumberOfEntries=1
Version=2 
```

如果我再次尝试打开流链接，这将开始一个无限循环。那么我怎样才能打开那个流呢？（另一个例子是[http://jam-aacp.rautemusik.fm](http://jam-aacp.rautemusik.fm)）

据我所知，这些例子是广播链接......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:40:40.813

这里的问题归结为请求标头。该服务器正在对浏览器和非浏览器进行一些狡猾的检测，以帮助确定是否将您重定向到真实的流 URL。

[如果您使用此标头向http://jam-aacp.rautemusik.fm/](http://jam-aacp.rautemusik.fm/)发出请求，您将获得以下`.pls`文件：

```
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

现在，如果您请求没有此标头的相同 URL，您将获得 302 重定向到`http://80.237.157.12:12005/`.

这台位于 80.237.157.12:12005 的服务器正在运行 SHOUTcast，它有自己的检测功能。但是`Accept`，它使用`User-Agent`. 如果用户代理字符串包含“ `Mozilla`”，则服务器将向您发送管理界面。否则，它将向您发送流数据。

简而言之，您需要在没有`Accept`标头的情况下发出请求，并且使用`User-Agent`不包含`Mozilla`. 顺便说一句，您可以自己轻松解决这个问题并通过下载[Fiddler](http://www.fiddler2.com)的副本来重现问题。

# c - C符号常量+结构

> ID：15044959
> 
> 赞同：0
> 
> 时间：2013-02-23T19:58:29.973
> 
> 标签：c, constants, structure

给定以下代码片段：

```
#include <stdio.h>
#include <stdlib.h>
#define MAX_SIZE 15

typedef struct{
  int touchdowns;
  int interceptions;
  int tackles[MAX_SIZE + 1];        //this is the line in question
}stats; 
```

向我提出的问题是，“为什么这条线 [如上所述] 将可能的铲球数加 1？”

**----不是为什么一个人也想要，而是它如何/为什么起作用。为什么它是有效的代码，换句话说，不一定是有效的逻辑。-澄清**

我不确定如何详细回答这个问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:14:28.150

正如 Armin 指出的那样，令牌`MAX_SIZE`被预处理器替换。但为了澄清起见，这不是它最终工作/编译的原因。编译的实际要求是，数组大小是一个*常量整数表达式*，它适用于相关代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:00:01.810

编译代码时，MAX_SIZE 被 100 替换，该行变为

```
int tackles[100 + 1]; 
```

这与

```
int tackles[101]; 
```

从[文档](http://www.cplusplus.com/doc/tutorial/preprocessor/)：

要定义预处理器宏，我们可以使用#define。它的格式是：

```
#define identifier replacement 
```

当预处理器遇到此指令时，它会通过替换替换其余代码中出现的任何标识符。这种替换可以是表达式、语句、块或任何东西。预处理器不理解 C++，它只是通过替换替换任何出现的标识符。

```
#define TABLE_SIZE 100
int table1[TABLE_SIZE];
int table2[TABLE_SIZE]; 
```

在预处理器替换了 TABLE_SIZE 之后，代码变得等价于：

```
int table1[100];
int table2[100]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:03:12.753

可能是因为`tackles`是一个由终止符值（例如 -1）终止的数组，类似于 C 字符串由空字符终止的方式。请注意该结构如何没有表示铲球次数的成员。

# entity-framework - 延迟加载 EF 中的 IEnumerable

> ID：15044963
> 
> 赞同：1
> 
> 时间：2013-02-23T19:58:51.937
> 
> 标签：entity-framework, ef-code-first, lazy-loading

我在 EF Code First 中有两个模型：

```
public class Book
{
 public int Id { get; set; }
 public virtual IEnumerable<Page> Pages { get; set; }
}

public class Page
{
 public int Id { get; set; }
 public int BookId { get; set; }
 public Book Book { get; set; }
} 
```

从 DB 加载 Book 模型时，Pages 属性为 Null。但是当替换 IEnumerable => ICollection 时，延迟加载有效并且页面从 DB 中填充。如何同时使用 IEnumerable 和延迟加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:20:25.387

`IEnumerable`是您无法修改（添加或删除）的不可变集合。EF 不支持这种类型，因为 EF 内部需要修改模型中的集合。

`ICollection`相反，使用`ICollection`继承自，`IEnumerable`因此它不仅仍然可以获得延迟执行（延迟加载）的目的，而且还有更多修改集合的方法。

# blogger - 修复 AddThis 欢迎栏

> ID：15044967
> 
> 赞同：-1
> 
> 时间：2013-02-23T19:59:11.593
> 
> 标签：blogger, css-position, addthis

我在滚动浏览 [我的博客](http://jazzcasper.blogspot.com/)时无法修复我的欢迎栏。我想让 AddThis' 栏在滚动期间固定在顶部边缘。这是代码：

```
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-510063517c175536"></script>
<script type='text/javascript'>
addthis.bar.initialize({'default':{
    "backgroundColor": "#EDEDED",
    "buttonColor": "#3CA8FA",
    "textColor": "#FFA733",
    "buttonTextColor": "#FAFAFA"
},rules:[
    {
        "name": "AnyOther",
        "message": "If you enjoy this page, do me a favor:",
        "action": {
            "type": "button",
            "text": "Share this page",
            "verb": "share",
            "service": "preferred"
        }
    },
    {
        "name": "Twitter",
        "match": {
            "referringService": "twitter"
        },
        "message": "If you find this page helpful:",
        "action": {
            "type": "button",
            "text": "Tweet it!",
            "verb": "share",
            "service": "twitter"
        }
    },
    {
        "name": "Facebook",
        "match": {
            "referringService": "facebook"
    },
    "message": "Tell your friends about me:",
    "action": {
        "type": "button",
        "text": "Share on Facebook",
        "verb": "share",
        "service": "facebook"
    }
},
{
    "name": "Google",
    "match": {
        "referrer": "google.com"
    },
    "message": "If you like my blog, let Google know:",
    "action": {
        "type": "button",
        "text": "+1",
        "verb": "share",
        "service": "google_plusone_share"
        }
    }
]});
</script> 
```

有一个名为 showOnScrollTo 的参数（你可以在[这里](http://support.addthis.com/customer/portal/articles/524574-addthis-bar-api#.USke5KK87E0)找到关于它的解释），但我不知道如何或在哪里使用它。我试着把CSS“位置：固定；” 在这段代码中的几个地方，但它没有用。如果有人有想法，请帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:03:41.370

要将栏固定在页面顶部，您可以指定参数“fixed”并将其设置为 true，因此始终使栏固定的示例如下：

```
<script type='text/javascript'>
    addthis.bar.initialize({'default':{
        fixed: true,
        showOnScrollTo: [element | string | integer | float]
        });
</script> 
```

在“默认”对象中，您还可以指定“showOnScrollTo”参数。

# java - .getJSON 404 错误与 ModelAndView

> ID：15044969
> 
> 赞同：0
> 
> 时间：2013-02-23T19:59:17.550
> 
> 标签：java, json, spring-mvc

我试图通过调用控制器来检索我的 javascript 中的一些 JSON 数据。控制器返回 MappingJacksonJsonView ModelandView，但 .getJSON 始终在 .../handhygiene.json 报告 404。

我从控制器返回 ModelandView 的方式有问题吗？

控制器

```
@RequestMapping(value = "/{room}/handhygiene.json", method = RequestMethod.GET)
public ModelAndView getHandHygienePageAsync(
    @PathVariable(value = "room") String roomCode) {
ModelAndView mav = new ModelAndView(new MappingJacksonJsonView());
mav.getModelMap().addAttribute(blahblahblah); //adds some attributes
...

return mav;
} 
```

Javascript

```
var currentURL = window.location;
$.getJSON(currentURL + ".json",
    function(data) {
    ... //does stuff with data
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:27:46.753

如果您试图从 Ajax 请求中仅获取 JSON 对象，则需要添加`@ResponseBody`到您的方法中，并使您的结果对象作为您的方法的返回值。

@ResponseBody 告诉 Spring 他需要序列化您的对象以作为内容类型返回给客户端。默认情况下，Spring 使用 JSON 序列化。ModelAndView 将尝试返回一个 .JSP 页面。也许你的资源上没有这个 jsp 页面，所以服务器返回 404 错误。

我认为这段代码应该适合你：

```
@RequestMapping(value = "/{room}/handhygiene.json", method = RequestMethod.GET)
public @ResponseBody Room getHandHygienePageAsync(@PathVariable(value = "room") String roomCode) {
    Room room = myService.findRoomByRoomCode(roomCode);
    return room;
} 
```

我假设您使用 Room 作为结果对象，但它可能是另一个对象或 ArrayList，例如。

您不能在[此处](http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/)查看 Spring 示例，而[在此处](https://stackoverflow.com/questions/6794974/spring-mappingjacksonjsonview-how-to-tell-to-use-it-instead-of-jsp-view)查看示例和配置。

# database - SQLite3 的反向二进制排序规则有哪些实际用途？

> ID：15044970
> 
> 赞同：0
> 
> 时间：2013-02-23T19:59:20.127
> 
> 标签：database, sqlite

一位同事询问了 Owens 在 The Definitive Guide to SQLite, 2nd ed, p101 中写的关于排序规则类型的内容：“reverse 比其他任何东西都更适合测试（也许还有说明）。”

这对于 SQLite 作为 dbms 的实现是否有效？反向二进制排序规则有实际用途吗？SQLite 的反向/二进制排序规则是否会影响查询性能，例如，当使用 ORDER BY 时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:41:44.523

SQLite 没有`reverse`排序规则。

[`rtrim`显然，排序规则](http://www.sqlite.org/datatype3.html#collation)（忽略尾随空格字符）和`reverse_unordered_selects`编译指示之间存在混淆。

后者对测试很有用；[它的文件](http://www.sqlite.org/pragma.html#pragma_reverse_unordered_selects)说：

> **PRAGMA reverse_unordered_selects =** *boolean* ;
> 
> 启用后，此 PRAGMA 会导致没有 ORDER BY 子句的 SELECT 语句以与正常情况相反的顺序发出结果。这可以帮助调试对结果顺序做出无效假设的应用程序。
> 
> 如果 SELECT 省略了 ORDER BY 子句，SQLite 不保证结果的顺序。即便如此，结果的顺序不会从一次运行到下一次发生变化，因此许多应用程序错误地依赖于任意输出顺序，无论该顺序是什么。但是，有时新版本的 SQLite 将包含优化器增强功能，这将导致没有 ORDER BY 子句的查询的输出顺序发生变化。发生这种情况时，依赖于特定输出顺序的应用程序可能会出现故障。通过在禁用和启用此 pragma 的情况下多次运行应用程序，可以尽早识别和修复应用程序对输出顺序做出错误假设的情况，从而减少可能由链接到不同版本的 SQLite 引起的问题。

# codeigniter - Codeigniter 将 id 从视图传递给控制器

> ID：15044971
> 
> 赞同：1
> 
> 时间：2013-02-23T19:59:23.523
> 
> 标签：codeigniter

我正在为这个项目使用 codeigniter。我有一个 id 值，我从控制器 A 传递到视图 A。这个 id 值是锚标记之间的回显。单击此锚标记时，它会重定向到具有 id 值的另一个控制器 B，并在控制器 B 中处理此 id 值。除了使用 uri 类之外，还有其他方法吗？想要保持网址干净。

当我从控制器 A 切换到视图 A 到控制器 B 时，我想到了一种附加隐藏输入元素的方法，但我意识到它可能非常混乱。

有什么干净的方法吗？提前谢谢各位！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T06:11:55.063

*使用 Stackoverflow 的新手看看你是否能理解我的布局：*

## 方法一

*使用 URI 类，除非您有充分的理由不这样做。*

**来自 CONTROLLER_A**

```
$data["id"] = ("ID NUMBER");
$this->load->view("VIEW_A", $data); 
```

**视图 A 中的锚点**

```
<a href="<?php echo base_url() ?>/controller_b/controllerfunction/<?php echo $id ?>">link</a> 
```

**在控制器_B**

```
$id = $this->uri->segment(3); 
```

.

## 方法二

**如果您想隐藏内容，请使用 FORM POST：**

```
$data["id"] = ("ID NUMBER");
$this->load->view("VIEW A", $data); 
```

**视图 A 中的锚点**

```
<form name="myform" id="myform" action="<?php echo base_url() ?>/controllerB/controllerfunction/" method="post">
<input type="hidden" name="id" id="id" value="<?php echo $id ?>" />
<input type="submit" value="See more" />
</form> 
```

如果您满足以下条件，您也可以使用 javascript 通过链接在此处提交表单：

```
 <a href="javascript;" onclick="document.getElementById('myform').submit();"> See more</a> 
```

提示：您也可以使用 css 将不透明度设置为 0 来隐藏表单中的提交按钮；如果链接在表单中，您可以使用`javascript:this.submit();`

**或查询**

```
<a href="javascript;" id="link">See more</a>
$('#link').click(function() {
    $('#myform').submit();
}); 
```

**在控制器中**

```
$id = $this->input->post("id"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:12:13.867

隐藏的输入将起作用，并且可能还有另一种解决方法，一旦您重定向到该方法并使用您的 id 值，即从数据库中获取数据，使用您需要的干净 URL 再次重定向到另一个控制器方法，希望这会有所帮助

# ffmpeg - ffmpeg m3u8 段文件和文件名的相对路径

> ID：15044976
> 
> 赞同：0
> 
> 时间：2013-02-23T19:59:31.137
> 
> 标签：ffmpeg, http-live-streaming

这一定是一个简单的问题，但我对 FFMPEG 创建的 M3U8 文件有疑问，因为它包含文件的绝对路径，而不仅仅是我需要的文件名。我试图能够在编码时查看流，这似乎是最后一个障碍。

我的 FFMPEG 命令是（忽略逗号）：

```
ffmpeg, -i, /Users/User/Documents/Java/server/data/media/1/1/Promo-2013.mov, -dn, -y, -f, mpegts, -c:a, libfdk_aac, -strict, -2, -ar, 48000, -b:a, 128000, -s, 640x360, -c:v, libx264, -b:v, 700000, -aspect, 640:360, -r, 25, -level, 3.0, -vprofile, baseline, -flags, +loop, -cmp, chroma, -coder, 0, -me_range, 16, -keyint_min, 25, -sc_threshold, 40, -i_qfactor, 0.71, -bt, 200k, -maxrate, 700000, -bufsize, 700000, -rc_eq, 'blurCplx^(1-qComp)', -qcomp, 0.6, -qmin, 10, -qmax, 51, -qdiff, 4, -level, 30, -g, 30, -async, 2, -partitions, +parti4x4+partp8x8+partb8x8, -subq, 5, -trellis, 1, -refs, 1, -vbsf, h264_mp4toannexb, -flags, -global_header, -map, 0, -f, segment, -segment_time, 10, -segment_list, /Users/User/Documents/Java/server/data/media/1/3/prog_index.m3u8, -segment_list_flags, +live, -segment_format, mpegts, /Users/User/Documents/Java/server/data/media/1/3/segment_%05d.ts 
```

结果文件是：

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOW-CACHE:YES
#EXT-X-TARGETDURATION:12
#EXTINF:10.005333,
/Users/User/Documents/Java/server/data/media/1/10/segment_00000.ts
#EXTINF:11.952000,
/Users/User/Documents/Java/server/data/media/1/10/segment_00001.ts
#EXTINF:10.002667,
/Users/User/Documents/Java/server/data/media/1/10/segment_00002.ts
#EXTINF:10.008000,
/Users/User/Documents/Java/server/data/media/1/10/segment_00003.ts
#EXTINF:0.266667,
/Users/User/Documents/Java/server/data/media/1/10/segment_00004.ts
#EXT-X-ENDLIST 
```

这一切都很完美，但我只想要例如'segment_00000.ts，而不是完整的绝对路径，因为这对直播没有用处。由于这是一个非常普通的应用程序，我必须做错事。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-24T14:06:58.363

我想通了，我需要更改流程构建器的工作目录。认为这将是一件简单的事情！

```
ProcessBuilder pb = new ProcessBuilder(command);
pb.directory(new File(destinationDir));
pb.redirectErrorStream(true);
Process pr = pb.start(); 
```

# backbone.js - 从 Http 到 Https 的骨干网切换

> ID：15044983
> 
> 赞同：0
> 
> 时间：2013-02-23T20:00:20.970
> 
> 标签：backbone.js, https, routing, http-redirect

我对使用 Bakcbone.js 有一定的了解，我的后端是 Restlet Java，但对用户身份验证一无所知

我已经使用它们构建了一个单页 Web 应用程序，但现在问题出现了，用户登录后我要做什么？有些页面可以被登录和未登录的用户查看，并且登录的用户应该能够看到额外的内容。

默认情况下页面使用http，但是在用户登录后，假设一个Ajax Post，我如何将整个Backbone App从http切换到https？假设用户注销，我该如何切换回来？

是否有任何方便的方法可以在 Http 和 Https 之间切换路由器中的所有路由、集合/模型中的 Url/Urlroots？（使用相对地址）

我可以使用服务器重定向来处理这个问题吗？我该怎么做，这不是让 Http 和 Https 部分像两个应用程序一样完全分开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:26:56.990

哇——你在想的东西很多……其中一半甚至不属于 Backbone 的范围。

让我们分解一下：

`but have no idea regarding user authentication`

[读这个](https://stackoverflow.com/questions/15031363/external-private-api-authentication-with-backbone/15039076#15039076)。我昨天才回答这个。

`what I am going to do after user login?`

这里的正常模式是登录通常是一页。如果用户成功登录，那么她将被重定向到另一个页面，其中包含所有 Backbone 内容，例如查看主干应用程序 classdojo.com。登录是简单的 HTML，没有花哨的东西。用户登录后，她会导航到具有所有重型客户端的单页应用程序。

`Are there any convient ways just to switch all my routes in Router, Url/Urlroots in Collection/Model between Http and Https? (using relative address)`

骨干路由器仅查看带有“#”的路由，例如`example.com/user#details`骨干路由器将仅基于`#details`. 它与您的 http 协议无关。

您的 Url/Urlroots 可以是相对的，也可以是绝对的。因此，您可以在其中指定带有 http 协议的完整 URL。

# combobox - 组合框公式项和值

> ID：15044984
> 
> 赞同：0
> 
> 时间：2013-02-23T20:00:22.357
> 
> 标签：combobox, return-value, formula

我在组合框中有以下公式：

```
var keyObj = getComponent('ACConditionToggle');
var key = keyObj.getSubmittedValue();
if (!key || key==''){
    key = keyObj.getValue();
}
switch(key)
{
case 'Approval':
    return ['% Approval' , 'Approvers']
    break;
case 'Denial':
    return ['% Denial', 'Deniers']
default:
return new Array();
} 
```

它工作正常，但是，我希望标签与值不同。所以在这种情况下，标签为“% Approval”，我想要一个“Percent”的值，而“Approvers”的值是“Number”那么我如何传递标签和公式中的值。我可以用静态来做到这一点并获得 itemLabel 和 itemValue 但我如何在公式中区分它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:21:13.070

在把我的头撞到墙上后，我发现答案很简单。

```
var keyObj = getComponent('ACConditionToggle');
var key = keyObj.getSubmittedValue();
var rtnArray = new Array();
if (!key || key==''){
    key = keyObj.getValue();
}
switch(key)
{
case 'Approval':
    rtnArray[0]="% Approval|Percent";
    rtnArray[1]="Approver(s)|Number";
    return rtnArray;
    break;
case 'Denial':
    rtnArray[0]="% Denial|Percent";
    rtnArray[1]="Denials(s)|Number";
    return rtnArray;

    break
default:
return new Array();
} 
```

# java - 在文件中搜索字符串并返回下一行（在 Java 中）

> ID：15044985
> 
> 赞同：1
> 
> 时间：2013-02-23T20:00:29.597
> 
> 标签：java, string, file, string-comparison

正如我的标题所说。我需要在文件中搜索字符串。找到后，我需要下一行。这是一个像这样的文件：

> 你好
> 
> 世界

当找到“hello”时，需要返回“world”。

```
File file = new File("testfile");
Scanner scanner = null;
try {
  scanner = new Scanner(file);
} catch (FileNotFoundException e) {
  e.printStackTrace();
}

if (scanner != null) {
  String line;
  while (scanner.hasNextLine()) {
    line = scanner.nextLine();
    if (line == "hello") {
      line = scanner.nextLine();
      System.out.println(line);
    }
  }
} 
```

它通读文件，但没有找到“你好”这个词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T20:01:20.417

```
if (line == "hello") { 
```

应该

```
if ("hello".equals(line)) { 
```

您必须使用 equals() 方法来检查两个字符串对象是否相等。`==`字符串（和所有对象）的运算符仅检查两个引用变量是否引用同一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T07:01:44.643

```
if (line == "hello") 
```

应该改为

```
if (line.contains("hello")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T09:02:30.230

而不是使用`==`运算符来比较两个字符串使用 `if(line.compareTo("hello") == 0)`

# php - php的printf函数中float参数和-ve number有什么作用

> ID：15044988
> 
> 赞同：0
> 
> 时间：2013-02-23T20:00:52.917
> 
> 标签：php, numbers, printf

我正在运行这两个`printf()`函数，并且对它们生成的输出有点困惑。

1.  `printf("%0.4f",3467);`

它输出 - `3467.0000`。在第一个参数中，`0.4f`4 被理解为它代表小数点后的 4 个零，但我不确定`0`当我将它更改为 1、2、3 时它保持不变。那么它有什么作用呢？

1.  `printf("%1.6u\n", -32);`

在运行这个时，我得到`4294967264`这个数字到底指的是什么？

在询问之前，我检查了[printf()](http://php.net/manual/en/function.printf.php)链接，它指的是[sprintf()](http://www.php.net/manual/en/function.sprintf.php)进行参数查找，但无法在此找到一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:37:38.253

%0.4f 中的 0 是格式化值时输出的最小长度。在您的情况下，除非您将其更改为 10 或更高，否则您不会看到任何输出差异，因为这样的输出将始终为 3467.0000。如果您将 0 更改为 15，您将在格式化输出前得到一个空白：

```
printf("%15.4f", 3467);
      3467.0000
|        |    |
1       10    5 
```

在您的浏览器中，您不会看到多余的空格，但如果您另外告诉它使用点作为填充字符，您将看到它：

```
printf("%'.15.4f", 3467);
......3467.0000
|        |    |
1       10    5 
```

至于你的第二个问题。您正在将有符号值格式化为无符号输出。-32 作为无符号 32 位整数是 FFFFFFE0。如果您告诉 printf 将其输出为无符号，您将获得 FFFFFFE0 的无符号值，即 4294967264。

# c# - 当编译时类型未知时，将对象动态转换为类型

> ID：15044989
> 
> 赞同：3
> 
> 时间：2013-02-23T20:00:57.127
> 
> 标签：c#, linq, casting, expression

我有一种从数据库中获取数据的方法，它是通用的：

```
public static IQueryable<T> GetData<T>(IQueryable<T> data, some more parameters) 
```

data 是未过滤的数据库实体集合，GetData 进行过滤、排序、跳过、处理该集合......

当我像通常那样提供 IQueryable 类型的变量（例如，T 是 Document）作为第一个参数时，它当然可以工作：

```
IQueryable<Document> data = ... 
GetData<Document>(data, ....); 
```

现在，我需要动态地“计算”第一个参数。为此，我使用 LINQ 表达式，它将评估为 IQueryable，但在编译时我不知道哪个 T。我在想这样的事情：

```
Expression db = Expression.Constant(new DataModelContainer());
Expression table = Expression.Property(db, tbl); /* tbl = "Documents", this is the whole point */ 
Type type = table.Type.GetGenericArguments()[0];
Expression call = Expression.Call(typeof(Queryable), "AsQueryable", new Type[] { type }, table);            
object o = Expression.Lambda(call, null).Compile().DynamicInvoke(); 
```

此时 o INDEED IS IQueryable (IQueryable)，因此应该能够作为 GetData 的参数。但是，我只有对它的“对象”引用，自然不能那样使用它。

所以，我的问题是：当 o 正好是这样时，有没有办法将 'o' 动态转换为 'IQueryable'。我知道演员表是编译时的事情，但我希望有人有某种解决方法。或者，也许我正在尝试太多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:33:00.807

您可以使用该`dynamic`功能。动态非常适合您已经必须进行反射的情况：

```
dynamic o = Expressin.Lambda(... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:01:24.800

得到这个家伙的负载：

第一的。我们假设围绕您的**GetData < T >**方法的类称为**Foo**：

```
public static class Foo {

    public static IQueryable<T> GetData<T>(IQueryable<T> data, int bar, bool bravo) {
        // ... whatever
    } 
```

然后我们尝试反思**GetData < >**的 MethodInfo （我指的是实际模板，通用定义，而不是它的封闭特殊化）。我们试图在**Foo**类的诞生时获得（并成功）。

```
 private static readonly MethodInfo genericDefinitionOf_getData;

    static Foo() {
        Type prototypeQueryable = typeof(IQueryable<int>); 
        // this could be any IQuerable< something >
        // just had to choose one

        MethodInfo getData_ForInts = typeof(Foo).GetMethod(
            name: "GetData", 
            bindingAttr: BindingFlags.Static | BindingFlags.Public,
            binder: Type.DefaultBinder,
            types: new [] { prototypeQueryable, typeof(int), typeof(bool) },
            modifiers: null
        );
        // now we have the GetData<int>(IQueryable<int> data, int bar, bool bravo)
        // reffered by the reflection object getData_ForInts

        MethodInfo definition = getData_ForInts.GetGenericMethodDefinition();
        // now we have the generic (non-invokable) GetData<>(IQueryable<> data, int bar, bool bravo)
        // reffered by the reflection object definition

        Foo.genericDefinitionOf_getData = definition;
        // and we store it for future use
    } 
```

然后我们编写该方法的非泛型变体，该变体应针对作为参数发送的实际元素类型调用特定的泛型方法：

```
 public static IQueryable GetDataEx(IQueryable data, int bar, bool bravo) {
        if (null == data)
            throw new ArgumentNullException("data");
        // we can't honor null data parameters

        Type typeof_data = data.GetType(); // get the type (a class) of the data object
        Type[] interfaces = typeof.GetInterfaces(); // list it's interfaces

        var ifaceQuery = interfaces.Where(iface => 
            iface.IsGenericType && 
            (iface.GetGenericTypeDefinition() == typeof(IQueryable<>))
        ); // filter the list down to just those IQueryable<T1>, IQueryable<T2>, etc interfaces
        Type foundIface = ifaceQuery.SingleOrDefault();
        // hope there is at least one, and only one

        if (null == foundIface) // if we find more it's obviously not the time and place to make assumptions
            throw new ArgumentException("The argument is ambiguous. It either implements 0 or more (distinct) IQueryable<T> particularizations.");

        Type elementType = foundIface.GetGenericArguments()[0];
        // we take the typeof(T) out of the typeof(IQueryable<T>)

        MethodInfo getData_particularizedFor_ElementType = Foo.genericDefinitionOf_getData.MakeGenericMethod(elementType);
        // and ask the TypeSystem to make us (or find us) the specific particularization
        // of the **GetData < T >** method

        try {
          object result = getData_particularizedFor_ElementType.Invoke(
              obj: null,
              parameters: new object[] { data, bar, bravo }
          );
          // then we invoke it (via reflection)

          // and obliviously "as-cast" the result to IQueryable
          // (it's surely going to be ok, even if it's null)
          return result as IQueryable;

        } catch (TargetInvocationException ex) {
          // in case of any mis-haps we make pretend we weren't here
          // doing any of this
          throw ex.InnerException;

          // rethink-edit: Actually by rethrowing this in this manner
          // you are overwriting the ex.InnerException's original StackTrace
          // so, you would have to choose what you want: in most cases it's best not to rethrow
          // especially when you want to change that which is being thrown
        }
    }

} 
```

# parsing - 使用 ANTLR 4 对表达式进行语义检查

> ID：15044991
> 
> 赞同：1
> 
> 时间：2013-02-23T20:01:00.077
> 
> 标签：parsing, antlr, grammar

使用（简化的）语法来识别表单的类

```
classDeclaration
    : Class className=Identifier
      ( Extends parentClassIdentifier=PackageIdentifier )?
      ( classSpecifier )*
      Semicolon
    ;
classSpecifier
    : ( Abstract | Final )
    | /* ... */
    ; 
```

可以很容易地创建一个类并使其既抽象又最终

```
class MyContradiction abstract final; 
```

在我目前的语法中，我有一些组合起来没有意义的关键字。我如何检查那些没有意义的组合。**我应该修改我的语法以通过包含可怕的循环和检查来防止这种情况发生，还是应该使用侦听器或访问者检查代码中设置了哪些标志而哪些没有意义？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:05:53.947

我会说在代码中检查这些错误组合会更好，因为您有机会向用户提供比“语法错误”之类的错误消息更好的错误消息。

澄清一下，检查这些语义约束、捕获错误的关键字组合等的代码应该在代码中，但在解析器语义动作的代码中。这是最适合它的地方。因此，您将其与语法放在同一个文件中，但不会使语法本身更复杂。

我见过解析器，其中语义操作包含评估被解析语言的表达式的代码，基本上有些人将解析语言的解释器嵌入语法文件中。这是错误的。解析器应该产生 AST，就是这样。但是，我相信，最好还是检查语法文件中语义动作中的关键字组合错误。学习你的语法的人不会看到这些与语法相关的东西，你也可能在解析完成后忘记做这些检查。而且，毕竟，从你的解析器返回一个对你的语法来说是非法的文本的 AST 有点狡猾，不是吗？

# php - 如何使用 ajax 调用打开 PDF

> ID：15044994
> 
> 赞同：1
> 
> 时间：2013-02-23T20:01:38.753
> 
> 标签：php, javascript, jquery, ajax

我有一个 PHP 脚本，它从服务器下载 PDF 文件并提示您打开或保存它。该脚本接受一次性令牌，用于代替文件名，以隐藏文件名。

如果您转到实际的 php 页面，[http](http://example.com/files/download/token) ://example.com/files/download/token脚本可以正常工作并下载 PDF。

我可以使用标准链接标签将人们发送到该页面，但是一旦文件下载，我需要更新该页面上通过该下载脚本返回的内容。

有没有办法让ajax调用打开一个新窗口，文件将在其中下载，然后返回我需要更新当前页面的数据？

下载脚本还有更多内容，但主要部分是实际下载部分：

```
 header("Content-type: application/pdf"); 
 $this->load->helper('file');
 readfile("static/temp_statements/".$local_file_name);
 unlink("static/temp_statements/".$local_file_name); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T20:10:58.447

我过去使用的一个可能对您有用的技巧是

*   在您的 ajax 调用中提供查询参数以下载 PDF。这将是一个唯一的名称。
*   流式传输 PDF 以供下载的服务器进程会设置一个具有此唯一名称的 cookie。
*   您在页面中轮询等待此 cookie 出现。
*   当 cookie 出现时，您可以假设文件已下载，并且您可以执行您的或有操作。

你不需要打开一个窗口来实现这一点。您可以像这样附加一个不可见的 iframe：

```
$(some selector).append($("<iframe width='1' height='1' frameborder='0' src='" + url + "'></iframe>")); 
```

为了诚实和透明，我最初从这个 SO 答案中找到了这个想法，它对我有用：[检测浏览器何时接收文件下载](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)