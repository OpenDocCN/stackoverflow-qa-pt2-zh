# StackOverflow 问答 16189000-16189999

# regex - Oracle 密码正则表达式

> ID：16189001
> 
> 赞同：0
> 
> 时间：2013-04-24T09:57:57.540
> 
> 标签：regex, oracle11g, passwords, oracle-apex

我想创建一个正则表达式来验证用户对 Oracle 数据库的新密码。
条件：
- 至少 8 个字符长
- 它必须以小写字母开头
- 它必须包含至少 2 个数字
- 它必须包含至少 1 个大写字母
- 下划线是唯一允许的特殊字符 _

这是我到目前为止得到的：

```
^(?=[a-z])(?=.*[\d]{2,})(?=.*[A-Z]{1,})[0-9a-zA-Z_]{8,}$ 
```

[在此站点](http://tools.netshiftmedia.com/regexlibrary/)上测试时工作正常 。
在 Oracle 中使用 REGEXP_LIKE 函数测试时不起作用。
怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:47:48.133

尝试跟随。
长度单独检查。

```
select
    'matched' as STATE
  from DUAL
  where
    length('aAeaasoisd3_f') >= 8 and
    regexp_like('aAeaasoisd3_f', '^[a-z]([0-9a-zA-Z_]*[0-9][0-9a-zA-Z_]*[0-9][0-9a-zA-Z_]*[A-Z][0-9a-zA-Z_]*|[0-9a-zA-Z_]*[A-Z][0-9a-zA-Z_]*[0-9][0-9a-zA-Z_]*[0-9][0-9a-zA-Z_]*|[0-9a-zA-Z_]*[0-9][0-9a-zA-Z_]*[A-Z][0-9a-zA-Z_]*[0-9][0-9a-zA-Z_]*)'); 
```

通过将可能性划分为

```
^[a-z]X where X could be one of
    ...\d...\d...[A-Z]...
    ...[A-Z]...\d...\d...
    ...\d...[A-Z]...\d...
and ... is [0-9a-zA-Z_]* 
```

# sql - 列上的数据透视表deptno和行上的计数和薪水？

> ID：16189007
> 
> 赞同：0
> 
> 时间：2013-04-24T09:58:18.080
> 
> 标签：sql, sql-server, sql-server-2008, pivot, pivot-table

谁能纠正我在旋转行和列时做错了什么？

```
--Trying to count no. of employees in each dept and pivoting it as deptno on columns and counts of no. of employees
-- rows

SELECT 10, 20, 30
FROM emp
PIVOT
(
count(deptno)
FOR empno IN ([10],[20],[30])
)
as pt

--Trying to sum of salary in each dept and pivoting it as deptno on columns and sum of salary of rows but same repeating nature
-- rows

SELECT 10, 20, 30
FROM emp
PIVOT
(
deptno(deptno)
FOR deptno IN ([10],[20],[30])
)
as pt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:01:37.580

试试这个——

```
DECLARE @temp TABLE (deptno INT)

INSERT INTO @temp (deptno)
VALUES (10),(20),(20), (40),(30)

SELECT [10], [20], [30]
FROM @temp
PIVOT
(
    COUNT(deptno)
    FOR deptno IN ([10], [20], [30])
) pt 
```

# c++ - 使用重载运算符实现整数向量，无法正常运行

> ID：16189008
> 
> 赞同：-6
> 
> 时间：2013-04-24T09:58:26.993
> 
> 标签：c++

我在使这段代码正常工作方面遇到了很大的问题。 [http://pastebin.com/Mi6gj188](http://pastebin.com/Mi6gj188)

底部有示例程序的输出。它只是崩溃并且也没有提供适当的结果。似乎没有一个重载的运算符可以正常工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:02:36.170

您没有编写复制构造函数，也没有使用 RAII。结果，每次`vector`复制您的对象时（而且*很多*，因为您没有使用引用！！）您的内部数据指针被复制，在多个对象之间共享它（每个对象都会尝试`delete`销毁它) 导致一个可怕的错误。

你的书告诉你**三法则**，你现在应该继续努力遵循。

# php - 如何使用 PHP 获取网站的调色板？

> ID：16189014
> 
> 赞同：2
> 
> 时间：2013-04-24T09:58:44.273
> 
> 标签：php, css

我需要找到特定网站中使用的常用颜色。大多数情况下它将是正文背景、标题背景等。但问题是，某些类或 ID 会覆盖其他。所以我们无法获得确切的颜色模式。有没有办法找到浏览器选择的网站的确切颜色模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:07:53.790

正如 Havelock 指出的那样，我想到的想法是将页面转换为图像，然后从中获取调色板。然而，它确实存在一些问题：

1.  无法保证库返回的内容是用户在特定浏览器中看到的内容，但仅此而已。
2.  所需的处理可能比 PHP 更容易用其他语言实现。我并不是说它不能完成，但它只是不太适合这项任务。

但是，如果您继续沿着这条路径前进，我建议您尝试使用 API 来获取屏幕截图，然后只使用一些 PHP 来解析它们。此类服务的示例 - [http://browsershots.org/xmlrpc/](http://browsershots.org/xmlrpc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:13:53.483

有几种在线服务可以从网站中提取颜色。包括图像颜色：

*   [http://www.colorcombos.com/grabcolors.html](http://www.colorcombos.com/grabcolors.html)
*   [http://www.hextractor.com/](http://www.hextractor.com/)
*   [更多的...](https://www.google.com/search?q=extract%20colors%20from%20website)

可以在[此处](http://www.phpclasses.org/package/3370-PHP-Extracts-the-most-common-colors-used-in-images.html)找到从图像中提取颜色的 PHP 类。另请参阅[如何在我的网页上获取颜色的十六进制代码](https://stackoverflow.com/questions/1340367/how-do-i-get-the-hex-code-of-a-color-on-my-webpage) 还存在一个[FireFox 插件](http://www.colorzilla.com/firefox/)。

# xml - 连接中的 XSLT 多个变量未传播

> ID：16189018
> 
> 赞同：1
> 
> 时间：2013-04-24T09:59:08.133
> 
> 标签：xml, variables, xslt

我定义的变量是作为字符串传递的，而不是传播值。

资源

```
<?xml version="1.0"?>
<results>
    <result>
        <title_id>
            123456
        </title_id>
        <product_id>
            2
        </product_id>
        <track_id>
            5
        </track_id>
    </result>
</results> 
```

XSL

```
<html xsl:version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns="http://www.w3.org/1999/xhtml">

 <body>
 <table border="1" cellpadding="4" cellspacing="0">
 <tr bgcolor="#fb0006" align="center">
  <td><b>Link</b></td>
</tr>

 <xsl:for-each select="//results/result">

 <xsl:variable name="titlevar" select="title_id" />
 <xsl:variable name="productvar" select="product_id" />
 <xsl:variable name="trackvar" select="track_id" />

 <tr>
  <td><a href="{concat('http://www.myaddress/', '$titlevar', '-', '$productvar', '/?', '$trackvar')}" target="_blank">link</a></td>
 </tr>

 </xsl:for-each>

 </table>
 </body>
 </html> 
```

输出：`http://www.myaddress/$titlevar-$productvar/?$trackvar`我想要的是：`http://www.myaddress/123456-5/?2`. 我尝试过各种括号、撇号和语音标记。谁能看到它为什么不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:16:25.633

变量引用周围不应有引号。还要注意`normalize-space()`.

这有效：

```
<html xsl:version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns="http://www.w3.org/1999/xhtml">

  <body>
    <table border="1" cellpadding="4" cellspacing="0">
      <tr bgcolor="#fb0006" align="center">
    <td><b>Link</b></td>
      </tr>

      <xsl:for-each select="//results/result">

    <xsl:variable name="titlevar" select="normalize-space(title_id)" />
    <xsl:variable name="productvar" select="normalize-space(product_id)" />
    <xsl:variable name="trackvar" select="normalize-space(track_id)" />

    <tr>
      <td><a href="{concat('http://www.myaddress/', 
                    $titlevar, '-', $productvar, '/?', $trackvar)}" 
             target="_blank">link</a></td>
    </tr>

      </xsl:for-each>

    </table>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:17:07.327

您需要删除变量周围的引号：

```
<tr>
 <td><a href="{concat('http://www.myaddress/', $titlevar, 
                      '-', $productvar, '/?', $trackvar)}" 
        target="_blank">link</a></td>
</tr> 
```

# asp.net-mvc-4 - 是否需要委派才能在 SAME 服务器上的应用程序之间传递凭据？

> ID：16189023
> 
> 赞同：2
> 
> 时间：2013-04-24T09:59:25.287
> 
> 标签：asp.net-mvc-4, asp.net-web-api

**我在同一个**Web 服务器上有一个 Web API 应用程序和一个 MVC4 客户端应用程序。它们都针对 Windows 身份验证进行了配置。客户端应用程序已启用模拟。

当我在 Visual Studio 中运行客户端时，它成功地将我的 Windows 凭据传递给 Web API。

当我在 Web 服务器上点击客户端时，Web API 收到“NT AUTHORITY\NETWORK SERVICE”，我猜它来自运行客户端应用程序的应用程序池。

客户端传递凭据如下：

```
HttpClientHandler handler = new HttpClientHandler()
{
    PreAuthenticate = true,
    UseDefaultCredentials = true
};
HttpClient client = new HttpClient(handler); 
```

所以我的问题是……我需要在这里授权吗？

在 Active Directory 中没有为此配置 Web 服务器 - 但我认为由于应用程序位于同一服务器上，因此模拟就足够了。我会打开委托，但我需要一个系统管理员来做到这一点 - 并且有各种各样的箍要跳过 - 所以想确保这就是我需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:02:52.177

好的，简而言之，不需要授权。

原来是**冒名顶替**的问题。从我读过的内容来看，这听起来像是应该需要的，因为应用程序位于同一台服务器上，但即使我认为我已经正确配置了它，我还是错过了一个关键部分。我需要更改 aspnet.config 中的两个设置：

```
<legacyImpersonationPolicy enabled="false"/>
<alwaysFlowImpersonationPolicy enabled="true"/> 
```

更多详细信息： [https ://stackoverflow.com/a/10311823/1230905](https://stackoverflow.com/a/10311823/1230905)

# c# - 程序应该给一个单词一个特殊的数值（但是……）

> ID：16189025
> 
> 赞同：-1
> 
> 时间：2013-04-24T09:59:32.523
> 
> 标签：c#, c, string, stdio

我用 C 编写了一个程序，它运行良好。当我试图将它翻译成 C# 语言时，它没有被编译。问题是 C# 不知道 C 中`scanf ("%19s" , string1);`like的含义。
我改为`scanf`：

```
string read;
do
{
     read = Console.ReadLine();
}
while (read.Length <= 19); 
```

它无法正常工作。然后我尝试：将其更改为：

```
string string1Input = Console.ReadLine(); 
```

它工作得更好，但`if`没有检查语句，因为我得到所有“总和”-s 等于 0。

这是翻译成 C# 的程序：

```
public static class GlobalMembersAnbanisRicxvitiMnishvneloba
{
    static int Main()
    {
        string string1 = new string(new char[20]);   
        sbyte a = (sbyte)'a';
        sbyte b = (sbyte)'b';
        sbyte g = (sbyte)'g';
        sbyte X = (sbyte)'X';
        sbyte i = (sbyte)'i';
        sbyte H = (sbyte)'H';
        sbyte V = (sbyte)'V';
        etc..

        int rigi;
        int sum = 0;
        int sum2 = 0;
        int sum3 = 0;

        Console.Write(" my word is:\n");

        string string1Input = Console.ReadLine();

        for (rigi = 0; string1[rigi] != '\0'; rigi++)
        {
            if (string1[rigi] == a)
            {
                sum3 = sum3 + 1;
                sum2 = sum2 + 1;
                sum = sum + 1;
            }
            else
            if (string1[rigi] == b)
            {
                sum3 = sum3 + 3;
                sum2 = sum2 + 2;
                sum = sum + 2;
            }

               etc...
            } /* end for*/
    if (string1[rigi-1]==i) 
{
 sum=sum-10; sum2=sum2-10; sum3=sum3-55;
}
            Console.Write("sum is:");
            Console.Write("{0:D}\n", sum);
            Console.Write("sum2 is:");
            Console.Write("{0:D}\n", sum2);
            Console.Write("sum");
            Console.Write("{0:D}\n", sum3);
            return 0;
        }
    } 
```

prog 的想法是：
程序为我们键入的单词的每个字母赋予数字含义，并将这些数字相互添加。

问题二：如何制作

```
 if (string1[rigi-1]==i) 
    {
     sum=sum-10; sum2=sum2-10; sum3=sum3-55;
    } 
```

工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:03:27.550

C#中没有结束字符字符串，就像在C中一样。实际上，C中的字符串和C#中的字符串是两个完全不同的东西，并且使用方式不同。

所以对于一个字符串的循环，好的方法是使用一个`foreach`循环。
改变

```
for (rigi = 0; string1[rigi] != '\0'; rigi++) 
```

经过

```
foreach(var oneCaracter in string1Input) 
```

然后`string1[rigi]`必须成为`oneCaracter` 并且`sbyte`必须成为`char`

样本修正：

```
char a = 'a';
int sum = 0;
int sum2 = 0;
int sum3 = 0;

string string1Input = Console.ReadLine();

foreach(char oneCaracter in string1Input)
{
    if (oneCaracter == a)
    {
        sum3 = sum3 + 1;
        sum2 = sum2 + 1;
        sum = sum + 1;
    }
}

if (string1Input[string1Input.Length - 1] == i) 
{
    sum = sum - 10; sum2 = sum2-10; sum3 = sum3-55;
} 
```

# javascript - 文件上传并使用Javascript在表格中显示文件名？

> ID：16189027
> 
> 赞同：0
> 
> 时间：2013-04-24T09:59:35.960
> 
> 标签：javascript, jquery, html

我是在向这个重复的问题道歉。

我已经尝试了很多文件上传示例，最后我编写了下面的代码。

单击超链接后，它会询问文件，然后我们选择文件。

但我想在 Table 中显示文件名，我无法在 table 上显示。

```
 <div class="sf_coursehead">
    Upload FileList <a href="#" class="addnew">+ Add New</a> 
           <input type="file" id="upload_input" name="courseAgenda" style="font-size: 50px;
 width: 120px; opacity: 0; filter: alpha(opacity :0); position: relative; top: -40px;; left: -20px" />
  </div>
<table>
  <tr>
    <td><td>
  </tr>
</table> 
```

但是如何在表格中显示选定的文件，这意味着将添加每个选择表`new row`

所以请帮我在表格中显示文件名，

给我建议。编辑：这也不起作用..

```
$("#upload_input").change(function(){
    var filename = document.getElementById('id_transactions').val();
    alert(filename);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:35:05.743

这段代码可能是你需要的，

```
<script> 

  $(document).ready(function() {

  $("#upload_input").change(function() {  

     var file_name=$("#upload_input").val(); 
     $("#list_files").append("`<tr><td>`"+file_name+"`</td></tr>`');

 }); });

 </script>

 </head> <body>

 <table id="list_files">    </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T11:30:41.807

这是我的工作代码..

```
 <img src="resources/images/profile_image.png" alt="Profile Image"
    width="120" height="150" class="prif_img" />
    <a href="#" class="addnew">NewImage</a> 
<input type="file" id="upload_input" name="courseAgenda"
style="font-size: 50px; width: 120px; opacity: 0; filter: alpha(opacity : 0); position: relative; top: -40px;; left: -20px" onchange="uploadFile_onChange(this);" /> 
```

脚本：

```
function uploadFile_onChange(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function(e) {
            $('.prif_img').attr('src', e.target.result).width(120).height(150);

        };

        reader.readAsDataURL(input.files[0]);
    }
} 
```

# matlab - 更改两行图形标题中的字体

> ID：16189031
> 
> 赞同：7
> 
> 时间：2013-04-24T09:59:45.733
> 
> 标签：matlab, line, title

我想在两行中写下我的图形标题，以便我可以分别更改两行的文本属性。我发现：

```
title(['\bf{first line}' char(10) '\rm{second line}']) 
```

这使第一行加粗。但是如何更改第一行的字体大小？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T10:09:26.447

```
 title(['\fontsize{20pt}\bf{first line}' char(10) '\fontsize{10pt}\rm{second line}']) 
```

我发现这个语法隐藏在文档中：http: [//www.mathworks.com/help/matlab/creating_plots/adding-text-annotations-to-graphs.html#f0-19466](http://www.mathworks.com/help/matlab/creating_plots/adding-text-annotations-to-graphs.html#f0-19466) 然后摆弄了一下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T10:17:43.343

我和 Dan 在一起，但我会省略不直观的内容`char(10)`并使用垂直连接的单元格数组：

```
title({...
    '\fontsize{25pt}\bf{first line}' 
    '\fontsize{8pt}\rm{second line}'
}) 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/aLwpA.jpg)

没什么新意，只是更直观、更易读。

# php - php-fpm 不会在 Gentoo 上加载 mbstring 模块

> ID：16189034
> 
> 赞同：2
> 
> 时间：2013-04-24T09:59:52.340
> 
> 标签：php, gentoo, mbstring

我是 Gentoo 的新手，我通过`emerge`. 之后，我运行 phpinfo() 并发现没有 mbstring，然后我通过 set 编译它`USE=unicode`。然后我`[mbstring]`在 php.ini 中看到了，我通过 kill process 重新启动了 php-fpm 并运行`/etc/init.d/php-fpm -R`，但仍然没有 mbstring 模块。

然后我查了一下`/etc/init.d/php-fpm -m`，也没有。

我现在能做什么？顺便说一句，有没有办法重新启动 php-fpm，我不知道为什么没有`/etc/init.d/php-fpm restart`。

仅供参考，我做到了`find / -name mbstring`，它的输出：

```
/usr/local/src/php-5.4.14/ext/mbstring
/usr/lib64/php5.4/include/php/ext/mbstring 
```

运行`# /etc/init.d/php-fpm -h`，输出：

```
Usage: php-fpm [-n] [-e] [-h] [-i] [-m] [-v] [-t] [-p <prefix>] [-g <pid>] [-c <file>] [-d foo[=bar]] [-y <file>] [-D] [-F]
  -c <path>|<file> Look for php.ini file in this directory
  -n               No php.ini file will be used
  -d foo[=bar]     Define INI entry foo with value 'bar'
  -e               Generate extended information for debugger/profiler
  -h               This help
  -i               PHP information
  -m               Show compiled in modules
  -v               Version number
  -p, --prefix <dir>
                   Specify alternative prefix path to FastCGI process manager (default: /usr/local).
  -g, --pid <file>
                   Specify the PID file location.
  -y, --fpm-config <file>
                   Specify alternative path to FastCGI process manager config file.
  -t, --test       Test FPM configuration and exit
  -D, --daemonize  force to run in background, and ignore daemonize option from config file
  -F, --nodaemonize
                   force to stay in foreground, and ignore daemonize option from config file
  -R, --allow-to-run-as-root
                   Allow pool to run as root (disabled by default) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T20:51:35.340

确保在编译 PHP 时使用 --enable-mbstring 进行编译。

举个例子，这是我的 PHP 配置，以防它帮助你：

```
./configure \
--enable-fpm \
--with-fpm-user=apache \
--with-fpm-group=apache \
--enable-sigchild \
--with-libxml-dir=/usr \
--with-openssl=/usr \
--with-kerberos=/usr \
--with-pcre-regex \
--with-zlib=/usr \
--with-zlib-dir=/usr \
--enable-bcmath \
--with-bz2=/usr \
--enable-calendar \
--with-curl=/usr \
--with-libxml-dir=/usr \
--with-enchant=/usr \
--enable-exif \
--with-pcre-dir=/usr \
--enable-ftp \
--with-openssl-dir=/usr \
--with-gd \
--with-vpx-dir=/usr \
--with-jpeg-dir=/usr \
--with-png-dir=/usr \
--with-zlib-dir=/usr \
--with-xpm-dir=/usr \
--with-freetype-dir=/usr \
--with-t1lib=/usr \
--enable-gd-native-ttf \
--enable-gd-jis-conv \
--with-gettext=/usr \
--with-gmp=/usr \
--with-mhash=/usr \
--with-imap=/usr \
--with-kerberos=/usr \
--with-imap-ssl=/usr \
--enable-intl \
--with-icu-dir=/usr \
--enable-mbstring \
--with-onig \
--with-mcrypt=/usr \
--with-mysql \
--with-zlib-dir=/usr \
--with-mysqli=mysqlnd \
--with-pdo-mysql=mysqlnd \
--with-pdo-pgsql=/usr \
--enable-pcntl \
--with-pgsql=/usr \
--with-pspell=/usr \
--enable-shmop \
--with-libxml-dir=/usr \
--with-snmp=/usr \
--with-openssl-dir=/usr \
--enable-soap \
--with-libxml-dir=/usr \
--enable-sockets \
--enable-sysvmsg \
--enable-sysvsem \
--enable-sysvshm \
--with-tidy=/usr \
--enable-wddx \
--with-libxml-dir=/usr \
--with-xmlrpc \
--with-libxml-dir=/usr \
--with-iconv-dir=/usr \
--with-xsl=/usr \
--enable-zip \
--with-zlib-dir=/usr \
--with-pcre-dir=/usr \
--enable-mysqlnd \
--with-zlib-dir=/usr \
--with-pear \
--enable-zend-signals 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-06T10:49:21.687

1.  检测你的 php.ini 文件

    php -i | grep php.ini

2.  将扩展名添加到 php.ini 文件

    扩展=mbstring.so；

重启 php-fpm

```
systemctl restart php-fpm 
```

# java - hibernate - 频繁查询时出错

> ID：16189035
> 
> 赞同：1
> 
> 时间：2013-04-24T09:59:56.180
> 
> 标签：java, hibernate, postgresql

我使用服务器 Tomcat + HttpServlet + hibernate。我测试了服务器的性能，为此，我创建了一个模拟运行 500 个客户端的应用程序，每个客户端以周期性地重复 HTTP 请求到服务器。

**当请求连接 = 900 (+-100) 我开始出现休眠错误**

```
24.04.2013 12:27:20 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
WARN: SQL Error: 0, SQLState: 08001
24.04.2013 12:27:23 org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.extractPhysicalConnection(ConnectionProxyHandler.java:82)
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.continueInvocation(ConnectionProxyHandler.java:138)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy24.prepareStatement(Unknown Source)
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:147)
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:166)
    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:145)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1711)
    at org.hibernate.loader.Loader.doQuery(Loader.java:828)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289)
    at org.hibernate.loader.Loader.doList(Loader.java:2438)
    at org.hibernate.loader.Loader.doList(Loader.java:2424)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2254)
    at org.hibernate.loader.Loader.list(Loader.java:2249)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.internal.AbstractQueryImpl.uniqueResult(AbstractQueryImpl.java:890)
    at actions.player.LoginAction.perform(LoginAction.java:20)
    at action.Action.performAction(Action.java:66)
    at servlets.RequestHandlerServlet.service(RequestHandlerServlet.java:34)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.postgresql.util.PSQLException:
org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:136)
    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:64)
    at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:123)
    at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:28)
    at org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:20)
    at org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:30)
    at org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:22)
    at org.postgresql.Driver.makeConnection(Driver.java:391)
    at org.postgresql.Driver.connect(Driver.java:265)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:193)
    at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:281)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
    ... 41 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at org.postgresql.core.PGStream.<init>(PGStream.java:60)
    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:74)
    ... 54 more
org.hibernate.exception.JDBCConnectionException: Could not open connection
    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:131)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:304)
    at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.getConnection(LogicalConnectionImpl.java:169)
    at org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler.extractPhysicalConnection(ConnectionProxyHandler.java:82) 
```

请帮助，任何想法...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:34:31.290

具体问题是：

```
Caused by: java.net.ConnectException: Connection refused: connect 
```

这表明当 PgJDBC 试图打开一个到 PostgreSQL 服务器的 TCP/IP 套接字时，连接被拒绝了。

当 PostgreSQL 服务器超载时不会发生这种情况；相反，它会接受连接足够长的时间以回复提及“连接过多”或“ `max_connections`”的错误。当我`psql`针对 Pg 9.3-HEAD 进行测试时，我得到了：

```
FATAL:  sorry, too many clients already 
```

同样，如果身份验证出现问题，PostgreSQL 将接受连接，回复错误消息，然后关闭连接，例如：

```
FATAL:  no pg_hba.conf entry for host "[local]", user "craig", database "postgres" 
```

或者：

```
FATAL:  password authentication failed for user "craig" 
```

您看到的是您的操作系统或网络堆栈中的一个较低级别的问题。它发生在 PostgreSQL 有机会接受连接之前。由于您没有提到您的操作系统，无论 Pg 服务器是本地还是远程应用程序服务器，或者几乎其他任何东西，都很难进一步提供帮助。我会开始：

*   检查 PostgreSQL 日志中的错误`accept()`或任何其他看起来不寻常的东西
*   调查操作系统中的任何 TCP/IP 连接限制和最大打开文件限制
*   确保我没有使用任何狡猾的第 3 方软件防火墙或“互联网安全”套件

此外，您应该使用连接池进行调查——无论是应用内的连接池，还是像 PgPool-II 这样的外部池，都可以让您减少`max_connections`到一个有效的水平。PostgreSQL 会在连接*更少的情况下表现**更好*；理想的数字取决于工作负载和硬件。请参阅[PostgreSQL wiki：数据库连接数](http://wiki.postgresql.org/wiki/Number_Of_Database_Connections)。

# android - Android 应用程序不显示 3d 模型

> ID：16189037
> 
> 赞同：1
> 
> 时间：2013-04-24T09:59:56.547
> 
> 标签：android, vuforia

我在统一 3d 中制作了一个应用程序。它**检测图像并显示模型。**现在我为android平台导入它。我按照此链接的说明进行操作

[https://developer.vuforia.com/forum/faq/unity-how-can-i-extend-unitys-android-activity#](https://developer.vuforia.com/forum/faq/unity-how-can-i-extend-unitys-android-activity#)

**从 unity 导出的 apk 文件运行良好。**

**但是当我从 Eclipse 中导出相同的内容时，它不会显示模型。我也无法在从统一导出到 Eclipse 的文件中找到模型。请帮我。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:32:34.737

据我所知，Unity 3D 引擎不允许您将模型导出到 Eclipse 中，除非您拥有价格为 1500 美元的专业版。
如果您使用的是试用版，则您已将其导出到不同的模型中，而不是 eclipse 使用的模型。

# c# - 如何读取包含 Sharepoint 列表结构的 XElement 内容？

> ID：16189042
> 
> 赞同：0
> 
> 时间：2013-04-24T10:00:06.207
> 
> 标签：c#, xml, linq, xml-parsing

我想使用 c# 将共享点列表的选择列中的 MultipleCheckbox 项目绑定到 asp.net CheckBoxListItem。我正在使用 XELEMENT 检索 List 的信息：

在 .cs 文件中：

```
XElement listStructure;

listStructure = proxy.GetList("WebsiteSubscriber"); 
```

这里将 XML 设置为：

```
 <List DocTemplateUrl="" DefaultViewUrl="/Lists/WebsiteSubscriber/AllItems.aspx" MobileDefaultViewUrl="" ID="{2C8A80EA-38C5-48F7-9D7D-400D445A5E64}" Title="WebsiteSubscriber" Description="" ImageUrl="/_layouts/images/itgen.png" Name="{2C8A80EA-38C5-48F7-9D7D-400D445A5E64}" BaseType="0" FeatureId="00bfea71-de22-43b2-a848-c05709900100" ServerTemplate="100" Created="20130417 02:18:11" Modified="20130424 09:27:11" LastDeleted="20130419 04:46:25" Version="5" Direction="none" ThumbnailSize="" WebImageWidth="" WebImageHeight="" Flags="545263616" ItemCount="13" AnonymousPermMask="0" RootFolder="/Lists/WebsiteSubscriber" ReadSecurity="1" WriteSecurity="1" Author="8" EventSinkAssembly="" EventSinkClass="" EventSinkData="" EmailAlias="" WebFullUrl="/" WebId="198e057a-38e8-410a-8358-ed95f77d18ea" SendToLocation="" ScopeId="e2cbf2fd-93e4-408d-bd4e-320321734b8c" MajorVersionLimit="0" MajorWithMinorVersionsLimit="0" WorkFlowId="" HasUniqueScopes="False" NoThrottleListOperations="False" HasRelatedLists="" AllowDeletion="True" AllowMultiResponses="False" EnableAttachments="True" EnableModeration="False" EnableVersioning="False" HasExternalDataSource="False" Hidden="False" MultipleDataList="False" Ordered="False" ShowUser="True" EnablePeopleSelector="False" EnableResourceSelector="False" EnableMinorVersion="False" RequireCheckout="False" ThrottleListOperations="False" ExcludeFromOfflineClient="False" EnableFolderCreation="False" IrmEnabled="False" IsApplicationList="False" PreserveEmptyValues="False" StrictTypeCoercion="False" EnforceDataValidation="False" MaxItemsPerThrottledOperation="100000" xmlns="http://schemas.microsoft.com/sharepoint/soap/">
  <Fields>
    <Field ID="{03e45e84-1992-4d42-9116-26f756012634}" RowOrdinal="0" Type="ContentTypeId" Sealed="TRUE" ReadOnly="TRUE" Hidden="TRUE" DisplayName="Content Type ID" Name="ContentTypeId" DisplaceOnUpgrade="TRUE" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="ContentTypeId" ColName="tp_ContentTypeId" FromBaseType="TRUE" />
    <Field ID="{fa564e0f-0c70-4ab9-b863-0177e6ddd247}" Name="Title" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="Title" Group="Base Columns" Type="Text" DisplayName="Title" Required="FALSE" FromBaseType="TRUE" EnforceUniqueValues="FALSE" Indexed="FALSE" MaxLength="255" Version="1" ColName="nvarchar1" RowOrdinal="0" />
    <Field ID="{34ad21eb-75bd-4544-8c73-0e08330291fe}" ReadOnly="TRUE" Type="Note" Name="_ModerationComments" DisplayName="Approver Comments" Hidden="TRUE" CanToggleHidden="TRUE" Filterable="FALSE" Sortable="FALSE" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="_ModerationComments" FromBaseType="TRUE" ColName="ntext1" />
    <Field ID="{bc91a437-52e7-49e1-8c4e-4698904b2b6d}" ReadOnly="TRUE" Type="Computed" Name="LinkTitleNoMenu" DisplayName="Title" Dir="" DisplayNameSrcField="Title" AuthoringInfo="(linked to item)" EnableLookup="TRUE" ListItemMenuAllowed="Prohibited" LinkToItemAllowed="Prohibited" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="LinkTitleNoMenu" FromBaseType="TRUE">
      <FieldRefs>
        <FieldRef Name="Title" />
        <FieldRef Name="LinkFilenameNoMenu" />
      </FieldRefs>
      <DisplayPattern>
        <IfEqual>
          <Expr1>
            <LookupColumn Name="FSObjType" />
          </Expr1>
          <Expr2>1</Expr2>
          <Then>
            <Field Name="LinkFilenameNoMenu" />
          </Then>
          <Else>
            <HTML><![CDATA[<a onfocus="OnLink(this)" href="]]></HTML>
            <URL />
            <HTML><![CDATA[" onclick="EditLink2(this,]]></HTML>
            <Counter Type="View" />
            <HTML><![CDATA[);return false;" target="_self">]]></HTML>
            <Column HTMLEncode="TRUE" Name="Title" Default="(no title)" />
            <IfEqual>
              <Expr1>
                <GetVar Name="ShowAccessibleIcon" />
              </Expr1>
              <Expr2>1</Expr2>
              <Then>
                <HTML><![CDATA[<img src="/_layouts/images/blank.gif" class="ms-hidden" border="0" width="1" height="1" alt="Use SHIFT+ENTER to open the menu (new window)."/>]]></HTML>
              </Then>
            </IfEqual>
            <HTML><![CDATA[</a>]]></HTML>
            <IfNew>
              <HTML><![CDATA[<img src="/_layouts/1033/images/new.gif" alt="]]></HTML>
              <HTML>New</HTML>
              <HTML><![CDATA[" class="ms-newgif" />]]></HTML>
            </IfNew>
          </Else>
        </IfEqual>
      </DisplayPattern>
    </Field>
    <Field ID="{82642ec8-ef9b-478f-acf9-31f7d45fbc31}" ReadOnly="TRUE" Type="Computed" Name="LinkTitle" DisplayName="Title" DisplayNameSrcField="Title" ClassInfo="Menu" AuthoringInfo="(linked to item with edit menu)" ListItemMenuAllowed="Required" LinkToItemAllowed="Prohibited" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="LinkTitle" FromBaseType="TRUE">
      <FieldRefs>
        <FieldRef Name="Title" />
        <FieldRef Name="LinkTitleNoMenu" />
        <FieldRef Name="_EditMenuTableStart2" />
        <FieldRef Name="_EditMenuTableEnd" />
      </FieldRefs>
      <DisplayPattern>
        <FieldSwitch>
          <Expr>
            <GetVar Name="FreeForm" />
          </Expr>
          <Case Value="TRUE">
            <Field Name="LinkTitleNoMenu" />
          </Case>
          <Default>
            <Switch>
              <Expr>
                <GetVar Name="MasterVersion" />
              </Expr>
              <Case Value="4">
                <HTML><![CDATA[<div class="ms-vb itx" onmouseover="OnItem(this)" CTXName="ctx]]></HTML>
                <Field Name="_EditMenuTableStart2" />
                <HTML><![CDATA[">]]></HTML>
                <Field Name="LinkTitleNoMenu" />
                <HTML><![CDATA[</div>]]></HTML>
                <HTML><![CDATA[<div class="s4-ctx" onmouseover="OnChildItem(this.parentNode); return false;">]]></HTML>
                <HTML><![CDATA[<span>&nbsp;</span>]]></HTML>
                <HTML><![CDATA[<a onfocus="OnChildItem(this.parentNode.parentNode); return false;" onclick="PopMenuFromChevron(event); return false;" href="javascript:;" title="Open Menu"></a>]]></HTML>
                <HTML><![CDATA[<span>&nbsp;</span>]]></HTML>
                <HTML><![CDATA[</div>]]></HTML>
              </Case>
              <Default>
                <HTML><![CDATA[<table height="100%" cellspacing="0" class="ms-unselectedtitle itx" onmouseover="OnItem(this)" CTXName="ctx]]></HTML>
                <Field Name="_EditMenuTableStart2" />
                <HTML><![CDATA["><tr><td width="100%" class="ms-vb">]]></HTML>
                <SetVar Name="ShowAccessibleIcon" Value="1" />
                <Field Name="LinkTitleNoMenu" />
                <SetVar Name="ShowAccessibleIcon" Value="0" />
                <HTML><![CDATA[</td><td><img src="/_layouts/images/blank.gif" width="13" style="visibility:hidden" alt=""/></td></tr></table>]]></HTML>
              </Default>
            </Switch>
          </Default>
        </FieldSwitch>
      </DisplayPattern>
    </Field>
    <Field ID="{5f190d91-3dbc-4489-9878-3c092caf35b6}" Hidden="TRUE" ReadOnly="TRUE" Type="Computed" Name="LinkTitle2" DisplayName="Title" DisplayNameSrcField="Title" ClassInfo="Menu" AuthoringInfo="(linked to item with edit menu) (old)" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="LinkTitle2" FromBaseType="TRUE">
      <FieldRefs>
        <FieldRef Name="Title" />
        <FieldRef Name="LinkTitleNoMenu" />
        <FieldRef Name="_EditMenuTableStart" />
        <FieldRef Name="_EditMenuTableEnd" />
      </FieldRefs>
      <DisplayPattern>
        <FieldSwitch>
          <Expr>
            <GetVar Name="FreeForm" />
          </Expr>
          <Case Value="TRUE">
            <Field Name="LinkTitleNoMenu" />
          </Case>
          <Default>
            <Field Name="_EditMenuTableStart" />
            <SetVar Name="ShowAccessibleIcon" Value="1" />
            <Field Name="LinkTitleNoMenu" />
            <SetVar Name="ShowAccessibleIcon" Value="0" />
            <Field Name="_EditMenuTableEnd" />
          </Default>
        </FieldSwitch>
      </DisplayPattern>
    </Field>
    <Field ID="{39360f11-34cf-4356-9945-25c44e68dade}" ReadOnly="TRUE" Hidden="TRUE" Type="Text" Name="File_x0020_Type" DisplaceOnUpgrade="TRUE" DisplayName="File Type" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="File_x0020_Type" FromBaseType="TRUE" ColName="nvarchar2" />
    <Field Type="Text" DisplayName="Email" Required="FALSE" EnforceUniqueValues="FALSE" Indexed="FALSE" MaxLength="255" ID="{bf605e59-6807-47de-87ac-617b2c8df00b}" SourceID="{2c8a80ea-38c5-48f7-9d7d-400d445a5e64}" StaticName="Email" Name="Email" ColName="nvarchar3" RowOrdinal="0" />
    <Field Type="MultiChoice" DisplayName="Area" Required="FALSE" EnforceUniqueValues="FALSE" Indexed="FALSE" FillInChoice="FALSE" ID="{16cc1615-a490-44de-a870-c7ebe603e2cc}" SourceID="{2c8a80ea-38c5-48f7-9d7d-400d445a5e64}" StaticName="Area" Name="Area" ColName="ntext2" RowOrdinal="0">
      <Default>Articles</Default>
      **<CHOICES>
        <CHOICE>Articles</CHOICE>
        <CHOICE>Websites</CHOICE>
        <CHOICE>Books</CHOICE>
      </CHOICES>**
    </Field>
    <Field ID="{1d22ea11-1e32-424e-89ab-9fedbadb6ce1}" ColName="tp_ID" RowOrdinal="0" ReadOnly="TRUE" Type="Counter" Name="ID" PrimaryKey="TRUE" DisplayName="ID" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="ID" FromBaseType="TRUE" />
    <Field ID="{c042a256-787d-4a6f-8a8a-cf6ab767f12d}" Type="Computed" DisplayName="Content Type" Name="ContentType" DisplaceOnUpgrade="TRUE" RenderXMLUsingPattern="TRUE" Sortable="FALSE" SourceID="http://schemas.microsoft.com/sharepoint/v3" StaticName="ContentType" Group="_Hidden" PITarget="MicrosoftWindowsSharePointServices" PIAttribute="ContentTypeID" FromBaseType="TRUE"> 
```

我想从 XML 获得以上值。

```
<CHOICES>
            <CHOICE>Articles</CHOICE>
            <CHOICE>Websites</CHOICE>
            <CHOICE>Books</CHOICE>
  </CHOICES> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:14:12.627

如果你修复了你的 XML，这就是你想要的：

```
var choices = (from n in xml.Descendants()
              where n.Name.LocalName == "CHOICES"
              select new
              {
                    CHOICES = n.Elements().Select(x => x.Value).ToList()
              }).ToList(); 
```

将为您提供`CHOICES`包含您的`CHOICE`元素值的匿名类型元素的列表。示例输出：

![在此处输入图像描述](https://i.stack.imgur.com/SEWvi.png)

**编辑**

看评论：

```
var choices = (from n in xml.Descendants()
               where n.Name.LocalName == "CHOICE"
               select n.Value).ToList(); 
```

这将返回以下字符串值的列表：

*   文章
*   网站
*   图书
*   0;#批准
*   1;#拒绝
*   2;#待定
*   3;#草稿
*   4;#预定

# wpf - 如何在当前窗口中创建新的内容或图层？

> ID：16189048
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:00:26.550
> 
> 标签：wpf

我是 WPF 的新手，我可以让我的应用程序使用 web api 基本登录。当我想继续时，我遇到了两个问题。1.我的应用程序第一次启动，我想在第一次启动时创建几个“全视图”内容，类似于向导。我搜索了一会儿，发现我可以创建新窗口。但是我想找到更好的方法，有人能给我一个搜索关键字吗？2\. 我想在生成的地方显示我的忙指示消息或其他错误消息。（例如，单击“登录”按钮，如果登录失败，则在“登录”按钮旁边显示错误消息） xaml 可以像在 html 中那样做吗？

```
<div>(visibility:hidden/visible display:none/block) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:44:29.650

对于你的第二个问题：

有几种方法可以实现这一点。一个好的开始是查看每个 UIElement 提供的 Visibility-Property 和触发器。你可以创建这样的东西：

```
 <TextBlock Text="{Binding ErrorMessage}">
        <TextBlock.Style>
            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Visibility" Value="Collapsed" />
                <Style.Triggers>
                    <DataTrigger Value="true" Binding="{Binding HasErrors}">
                        <Setter Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
    </TextBlock> 
```

ErrorMessage 和 HasErrors 是 ViewModel 的属性。当登录失败时，您只需将消息设置为 ErrorMessage 属性并将 HasErrors 设置为 true。希望这可以帮助...

# java - 获取当前进程中的所有 JavaVM* 实例？

> ID：16189049
> 
> 赞同：3
> 
> 时间：2013-04-24T10:00:40.717
> 
> 标签：java, c++, windows, java-native-interface

这仅特定于 Windows。JNI 是否提供任何 API 来返回调用进程的
所有实例？ 考虑以下场景，将 C++ dll 注入到进程中。现在的问题是，C++ dll 如何在它运行的进程中定位当前实例？`JavaVM*`
`java.exe``JavaVM*`

据我所知，所有 JNI 调用 API 都需要一个`JNIEnv`只能从 `JavaVM*`正确获取的对象？[http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html)

传统的获取方式`JavaVM*`是 via，`JNI_OnLoad`但由于我没有编写 Java 使用的本机库，我认为这不会奏效。 [http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-27T16:56:40.143

您可以使用[`JNI_GetCreatedJavaVMs`](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html#wp633)：

```
jsize nVMs;
JNI_GetCreatedJavaVMs(NULL, 0, &nVMs); // 1\. just get the required array length
JavaVM** buffer = new JavaVM*[nVMs];
JNI_GetCreatedJavaVMs(buffer, nVMs, &nVMs); // 2\. get the data 
```

此代码是“安全”版本，它询问缓冲区必须有多大，然后再次调用以获取数据。但是，主要的 Windows JVM (Hotspot) 不支持每个进程超过一个 JVM，因此您只需为一个元素分配一个缓冲区就足够了。`JNI_GetCreatedJavaVMs`是调用 API 的一部分，因此由`jvm.dll`.

> 我不是在编写 Java 使用的本机库

如果您在库中创建 JVM，这就是您所需要的，因为`jvm.dll`无论如何您都必须加载它们。我不能真正帮助你，因为你没有写你的库将如何被调用。如果您的库被另一个创建 JVM 或从 JVM 加载的本机库使用，并且无论`JavaVM*`出于何种原因它都没有传递给您，您可以尝试以下操作：

```
#include <Windows.h>
#include <jni.h>
// ...
typedef jint (JNICALL * GetCreatedJavaVMs)(JavaVM**, jsize, jsize*);
GetCreatedJavaVMs jni_GetCreatedJavaVMs;
// ...
jni_GetCreatedJavaVMs = (GetCreatedJavaVMs)GetProcAddress(GetModuleHandle(
        TEXT("jvm.dll")), "JNI_GetCreatedJavaVMs"); 
```

# html - HTML 图像大小

> ID：16189051
> 
> 赞同：0
> 
> 时间：2013-04-24T10:00:43.647
> 
> 标签：html

我正在通过“保存为 Web”选项从 PSD 导出我的 Web 图像，并按照标准使用其质量和格式控件，但是当我检查我的图像大小时，它们比预期的要重。我在其他网站上看到了图像尺寸。他们的 GIF 图片太小了。即子弹箭头 GIF 图像（12 像素 X 48 像素）接近 90 字节，但是当我在 PSD 中创建相同的图像并导出为 GIF 时，我的大小达到 1 KB。我只是想知道这是他们为网络导出或创建图像以获得较小尺寸的任何其他方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:10:36.127

您可以检查您使用了多少种颜色。如果您创建一个颜色较少的 GIF，您会得到一个较小的 GIF。

大小还取决于图像中有多少颜色，也许 90 字节的 gif 是纯黑白的，而你的颜色更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:35:49.190

当您在 Photoshop 中保存为 Web 时，您可以使用一些变量来获得较小的尺寸，您已经使用了这些变量。如果您已经知道它们是如何工作的，我试图为其他发现此问题的用户解释一些：

![在此处输入图像描述](https://i.stack.imgur.com/1Ihyh.jpg)

**有损：**有损压缩可让您压缩更多字节。较高的值会产生较低的图像质量和较轻的重量。

**颜色：**图像中使用的颜色数量越多，图像尺寸越大，正如 aleixventa 在他的回答中所说的那样。

**网络快照：**这是将图像颜色转换为网络安全颜色的选项。更多的网络安全颜色会导致图像更小。

**组合框“无抖动”：**抖动混合渐变的像素以模拟丢失的颜色。[您可以在此处](http://www.underwaterphotography.com/photoshop/photoshop/help.html)检索有关此功能的更多具体信息。顺便说一句，扩散抖动的百分比越小，图像越高。

考虑到所有这些变量，您可以在玩它们时看到总重量：

![在此处输入图像描述](https://i.stack.imgur.com/fWiVB.jpg)

# facebook - HybridAuth Facebook 无法在网络服务器上运行，但在本地机器上运行良好

> ID：16189053
> 
> 赞同：2
> 
> 时间：2013-04-24T10:00:45.810
> 
> 标签：facebook, hybridauth

我在我的 PHP Yii 应用程序中设置了 HybridAuth 身份验证。使用 Facebook 进行身份验证在我的本地机器上运行良好。

对于我的生产服务器，我在 Facebook 中创建了一个新应用程序，并相应地更新了我的 Yii 应用程序中的访问凭据。但是尝试从我的实时站点进行身份验证，它会给出**身份验证失败的错误。Facebook 返回了无效的用户 ID**

如果我将凭据重新更改为本地主机的凭据并从本地计算机上尝试，一切都会再次运行。

我正在使用最新版本的 HybridAuth 库 2.1.2。

我已经尝试增加`CURLOPT_CONNECTTIMEOUT`and 设置`CURLOPT_SSL_VERIFYPEER => false`，正如stackoverflow的其他一些答案中所建议的那样。

本地机器运行 Windows7 和 Apache，而网络服务器运行 Linux 和 Apache。

来自 Google 和 LinkedIn 的身份验证在我的本地计算机和网络服务器上都运行良好。

# python - Python单元测试覆盖模块级函数

> ID：16189054
> 
> 赞同：6
> 
> 时间：2013-04-24T10:01:01.517
> 
> 标签：python, python-2.7

[与调用 OS/模块级 python 函数的 Python 单元测试代码](https://stackoverflow.com/questions/14956825/python-unit-testing-code-which-calls-os-module-level-python-functions)相关。在我的单元测试期间，我重载了一些 python 系统调用来让我的测试驱动模块的不同路径。这种技术称为 Monkey Patch（在相关问题中）用于单独测试。

我有点担心当我并行运行 Python 测试时会发生什么，比如在“鼻子”中。当两个测试并行运行并且都想模拟 os.path.exists 方法时会发生什么？

有没有办法在我的测试环境中选择性地覆盖系统或模块功能？

以以下为例

```
fixture.py (say that is the module under test)

def my_func():
    some_stuff

test_fixture.py (say this is my test case)

class MyTest(unittest.TestCase):

    def test_mine(self):
         fixture.my_func = my_new_func
         fixture.execute_some_func_that_calls_my_func()
         #What happens if another test is executing at the same time and accesses
         #my_func I don't want it to start executing my_new_func? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:22:21.103

我不知道这是否是最好的方法，但我通常`try ... finally`在测试中这样做时使用，以便在每次测试期间设置然后恢复更改。

一个简单的例子：

```
class TestRawInput(unittest.TestCase):

    def test_raw_input(self):
        orig_raw_input = raw_input
        try:
            raw_input = lambda _: 'Alice'
            self.assertEquals(raw_input(), 'Alice')
        finally:
            raw_input = orig_raw_input 
```

如果这是测试中的常见操作，另一种方法可能是创建一个上下文管理器来执行此操作。

# asp.net-mvc-3 - Miniprofiler 总是启动

> ID：16189059
> 
> 赞同：1
> 
> 时间：2013-04-24T10:01:17.537
> 
> 标签：asp.net-mvc-3, mvc-mini-profiler

我正在将[MiniProfiler](http://miniprofiler.com/)用于小型 ASP.Net Web 应用程序。在开发时很棒，但我想要一种在生产模式下启用/禁用它的简单方法。

在阅读[了 How to hide miniprofiler](https://stackoverflow.com/questions/7604595/how-to-hide-miniprofiler)和教程之后，我想出了一个在中使用布尔值的方法`Global.asax`：

```
bool useProfiler = false;
...
protected void Application_BeginRequest()
{
    MiniProfiler profiler = null;

    if (useProfiler)
    {
        profiler = MiniProfiler.Start();
    }
}

protected void Application_EndRequest()
{
    if (useProfiler)
    {
        MiniProfiler.Stop();
    }
} 
```

但问题是 MiniProfiler 总是启动，不管值`useProfiler`是什么。

打电话时我也需要做一些测试`@MiniProfiler.RenderIncludes()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T14:07:24.140

问题来自该`MiniProfiler.MVC`包包含一个示例项目这一事实。在`MiniProfiler.cs`文件夹中创建一个`App_Start`文件，并从 Web 应用程序开始。

只需删除此文件即可解决问题。

您还可以删除`Views/Shared/_MINIPROFILER UPDATED Layout.cshtml`示例项目的一部分。

# javascript - html 和 javascript - 如何更新 innerhtml

> ID：16189060
> 
> 赞同：0
> 
> 时间：2013-04-24T10:01:18.923
> 
> 标签：javascript, html

我正在尝试更新 div 标签的 innerHTML ，这里的简单应用程序可能有问题：

```
<!DOCTYPE html>
<html lang="en" xmlns=""http://www.w3.org/1999/xhtml"">
<head>
<title>Test</title>
 <script> 
    var element = document.getElementById("aaa");
    element.innerHTML = "1";
 </script>
</head>
<body>
<div id="aaa">aaa</div>
</body>
</html> 
```

当我在浏览器中看到它时，我希望“aaa”为“1”。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:02:30.647

在您的脚本正在执行的那一刻，JavaScript 没有`#aaa`可见的元素。

好的做法是把你的`<script>`标签放在前面`</body>`，这样脚本会在所有文档加载完毕后执行：

```
<!DOCTYPE html>
<html lang="en" xmlns=""http://www.w3.org/1999/xhtml"">
<head>
    <title>Test</title>
</head>
<body>
    <div id="aaa">aaa</div>

    <script> 
        var element = document.getElementById("aaa");
        element.innerHTML = "1";
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:02:51.670

这是因为当你的脚本被执行时，元素`aaa`还没有被添加到 dom 中。

更安全的 dom 操作方法是在加载 dom 后进行，因为您可以使用 onload 事件处理程序。

另一个与 html 加载相关的技巧是将所有脚本放在页面底部。

您需要将脚本移动到加载

```
<html lang="en" xmlns=""http://www.w3.org/1999/xhtml"">
<head>
<title>Test</title>
 <script> 
    window.onload = function(){
        var element = document.getElementById("aaa");
        element.innerHTML = "1";
    }
 </script>
</head>
<body>
<div id="aaa">aaa</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:03:19.960

尝试这个

```
<body>
<div id="aaa">aaa</div>
 <script> 
    var element = document.getElementById("aaa");
    element.innerHTML = "1";
 </script>
</body> 
```

脚本代码应在加载带有名称的标签后执行`'aaa'` 否则使用`onload`事件函数调用代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:03:54.590

乍一看，您的代码非常好，只是有一些小问题：

Javascript 代码在解析器遇到代码块的那一刻被执行。这会导致您的代码在构造文档的实际正文之前执行，从而导致`element`而`undefined`不是指向正确的`<div>`.

要解决此问题，请将您的代码包装在一个函数中，然后在`onload`事件中调用它`<body>`，这将在所有内容加载后执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T10:04:28.933

尝试使用

```
<script>
    window.onload = function(){
        document.getElementById("aaa").innerHTML = "1";
    }
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T10:04:57.043

```
 <!DOCTYPE html>
<html lang="en" xmlns=""http://www.w3.org/1999/xhtml"">
 <head>
<title>Test</title>

</head>
<body>
<div id="aaa">aaa</div>
</body>
 <script> 
 var element = document.getElementById("aaa");
 element.innerHTML = "1";
 </script>
 </html> 
```

仅在加载元素后工作

# android - 列表视图可见性

> ID：16189063
> 
> 赞同：0
> 
> 时间：2013-04-24T10:01:22.057
> 
> 标签：android, android-listview, visibility, onclicklistener

当用户单击布局时，我试图使列表视图可见。我已将 setOnClickListener 添加到布局中。但是当我单击布局时，列表视图不可见。你能帮我解决这个问题吗？下面是我的代码：

```
transparentListView = (ListView) findViewById(R.id.tarnsparent_list_view);

LinearLayout lt = (LinearLayout)findViewById(R.id.layout);

lt.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                System.out.println("On click listener");
                transparentListView.setVisibility(View.VISIBLE);
                for (int j=0;j<sectionListItems.size();j++)
                {
                    System.out.println("section " + sectionListItems.get(j).toString());
                }
                ArrayAdapter<String> myarrayAdapter = new ArrayAdapter<String>(getApplicationContext(),
                android.R.layout.simple_list_item_1, sectionListItems);
                for(int k = 0;k<myarrayAdapter.getCount();k++)
                {
                    System.out.println("Adapter " + myarrayAdapter.getItem(k));
                }
                transparentListView.setAdapter(myarrayAdapter);
            }
        }); 
```

下面是我的xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:padding="10dip"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:clipToPadding="false">

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:clickable="true"
    android:id="@+id/layout"
    android:focusable="true">
    <TextView
    android:id="@+id/sep"

    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:text="seperator 0"
    android:textColor="#104E8B"
    android:paddingLeft="4dip"
    android:visibility="visible"/>

    </LinearLayout>

    <com.example.dlist.Stacklist
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    </com.example.dlist.Stacklist>

</TableLayout>

<ListView
    android:id="@+id/tarnsparent_list_view"
    android:layout_width="150dip"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dp"
    android:layout_gravity="top"
    android:layout_marginTop="50dp"

    android:visibility="gone">
</ListView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:48:03.303

您将表格布局高度指定为 match_parent。所以你将无法看到它，因为它会占据整个屏幕。所以让它 wrap_content 或给它一些价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:43:51.700

像这样改变你的表格布局样式

```
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_parent" > 
```

# javascript - 在 Javascript 中设置 CSS 3 转换和转换在 Chrome 中有效，但在 IE 10、FF 中无效？

> ID：16189073
> 
> 赞同：2
> 
> 时间：2013-04-24T10:01:49.697
> 
> 标签：javascript, jquery, css, css-transitions

我有以下代码，

```
 gallery.css("transition-duration", duration + "ms");
    gallery.css("-webkit-transition-duration", duration + "ms");
    gallery.css("-moz-transition-duration", duration + "ms");
    gallery.css("-ms-transition-duration", duration + "ms");
    gallery.css("-o-transition-duration", duration + "ms");
    //inverse the number we set in the css
    var value = (distance < 0 ? "" : "-") + Math.abs(distance).toString();

    gallery.css("transform", "translate3d(" + value + "px,0,0)");
    gallery.css("-webkit-transform", "translate3d(" + value + "px,0,0)");
    gallery.css("-moz-transform", "translate3d(" + value + "px,0,0)");
    gallery.css("-ms-transform", "translate3d(" + value + "px,0,0)");
    gallery.css("-o-transform", "translate3d(" + value + "px,0,0)"); 
```

它在 chrome、andriod、Iphone 中工作得更好。但在 IE 10（在移动设备上）上不起作用，Firefox 部分工作。有什么方法可以在 Javascript/Jquery 中解决这个问题？

[查看演示](http://jsfiddle.net/BJmyr/5)

**更新：**我想我得到了主要问题。主要问题是触摸事件（touchstart、touchend、touchmove）在 ​​IE 10 移动版中不起作用。我使用了[IE 10 指针](http://msdn.microsoft.com/en-us/library/ie/hh673557%28v=vs.85%29.aspx)，这对我来说非常有用。感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:34:59.053

虽然`Translate3d`并非所有浏览器都支持它，但它*应该*在 FF 中工作。Atm 它是唯一一个[不带前缀支持它](http://caniuse.com/#search=3d%20trans)的浏览器。

IE10 不支持`transform-style`with `preserve-3d`，所以这对你来说可能是个问题。尽管如此，这里还是可以进行 3d 变换。

我建议您更改`tranlate3d`为，`translateX`因为无论如何您只修改该`X`值。这已经可以解决您的问题。同样，通常建议最后声明符合标准的值（前缀自由形式），因为这是首选表示法，并且没有一些专有的东西会覆盖它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T22:07:20.417

您绝对应该记住的一件事是您使用供应商特定前缀的*顺序*。说的有*区别*：

```
gallery.css("transition-duration", duration + "ms");
gallery.css("-webkit-transition-duration", duration + "ms");
gallery.css("-moz-transition-duration", duration + "ms");
gallery.css("-ms-transition-duration", duration + "ms");
gallery.css("-o-transition-duration", duration + "ms"); 
```

和...

```
gallery.css("-webkit-transition-duration", duration + "ms");
gallery.css("-moz-transition-duration", duration + "ms");
gallery.css("-ms-transition-duration", duration + "ms");
gallery.css("-o-transition-duration", duration + "ms");
gallery.css("transition-duration", duration + "ms"); 
```

正如[这个 SO question](https://stackoverflow.com/q/7080605/1454806)的[接受答案](https://stackoverflow.com/a/7080674/1454806)中所述：

> 哪个是最后一个`-webkit-border-radius`，`border-radius`将是使用的那个。
> 
> `-webkit-border-radius`是“实验性”属性 - 实现可能包含与规范的偏差。的实现`border-radius`将与规范中的内容相匹配。
> 
> 最好在可用时使用“W3C 实现”，以确保所有支持它的浏览器之间的一致性。

话虽如此 - 请注意，您当前的实现可能会使用特定于供应商的实验属性覆盖“W3C 实现”版本。

关于您的问题的更具体的答案：

[这张表](http://caniuse.com/#feat=transforms3d)可以让您更深入地了解哪些浏览器声称支持 3d 转换 CSS 的版本，从版本到版本。

1.  **IE浏览器**

    根据[这篇博客文章](http://blogs.msdn.com/b/ie/archive/2012/02/02/css3-3d-transforms-in-ie10.aspx)，IE 10 支持完整的 CSS3 3D 转换（请注意，[IE9](http://msdn.microsoft.com/en-us/library/ie/hh673529(v=vs.85).aspx)仅支持[2-D 转换](http://msdn.microsoft.com/en-us/ie/ff468705)，以前的版本甚至不支持）。

2.  **火狐**

    在修复[错误 505115](https://bugzilla.mozilla.org/show_bug.cgi?id=505115)时，Firefox 声称支持 CSS3 3D-Transforms。根据[这个示例页面](https://developer.mozilla.org/en-US/docs/CSS/transform?redirectlocale=en-US&redirectslug=CSS%2F-moz-transform#Browser_compatibility)，Mozilla 确实支持转换（如果您在 Firefox 中加载该页面，甚至演示了这样做）。

    不幸的是，Firefox 中更复杂的测试失败了。有关在 Chrome 中优雅运行但在 FF 中不适用的示例，请参阅[此链接。](http://desandro.github.io/3dtransforms/examples/perspective-03.html)可以肯定的是，部分支持，但没有 WebKit 实现的动画。

    注意：我使用 Firefox 20.0.1 进行测试。

3.  **歌剧**

    Opera 提供了[这篇文章](http://dev.opera.com/articles/view/css3-transitions-and-2d-transforms/)来描述他们对转换的支持。

**最终结果**：

主要浏览器正在支持，但速度很慢。未来的版本要求提供更全面的支持，但每个供应商似乎对“完整”的含义有不同的定义。所以 - 像在网络世界中一样*...*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:11:16.737

有关 Internet Explorer 的特定详细信息，请查看[有关与转换相关的级联样式表 (CSS) 功能](http://msdn.microsoft.com/en-us/library/ie/hh772059%28v=vs.85%29.aspx)的 MSDN 文档。

查看[transform-style property](http://msdn.microsoft.com/en-us/library/ie/hh772282%28v=vs.85%29.aspx)，它似乎只支持`transform-style: flat`

[变换函数](http://msdn.microsoft.com/en-us/library/ie/jj200285%28v=vs.85%29.aspx)部分列出了translate3d [() 函数](http://msdn.microsoft.com/en-us/library/ie/jj200286%28v=vs.85%29.aspx)

> 本部分包含 Windows Internet Explorer 支持的级联样式表 (CSS) 转换函数的参考文档。Windows Internet Explorer 9 中添加了对 2-D 变换的支持，而 Internet Explorer 10 中添加了对 3-D 变换的支持。

# ant - 使用ant使用脚本刷新Eclipse，找不到项目

> ID：16189077
> 
> 赞同：2
> 
> 时间：2013-04-24T10:01:57.033
> 
> 标签：ant, eclipse-plugin

我尝试刷新 eclipse 作为`Powershell-script`. 我位于“.../My_Project”，.xml 文件位于“ `.../My_Project/base/cmd`”中。因此最后一行是

```
C:\app\eclipse_juno_SR2\eclipse -nosplash -application org.eclipse.ant.core.antRunner -f .\base\cmd\refresh.xml -consolelog 
```

我使用的脚本是

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="refresh_project" default="refresh" basedir="./../..">
<target name="refresh">
    <eclipse.refreshLocal resource="/My_Project" depth="infinite"/>
</target>
</project> 
```

当我在 Eclipse 中使用它时，构建工作但使用脚本时它只显示此消息：

```
org.eclipse.m2e.logback.configuration: The org.eclipse.m2e.logback.configuration
 bundle was activated before the state location was initialized.  Will retry aft
er the state location is initialized.
org.eclipse.m2e.logback.configuration: Logback config file: C:\Users\Dennis.Hert
el\workspace\.metadata\.plugins\org.eclipse.m2e.logback.configuration\logback.1.
3.0.20130129-0926.xml
org.eclipse.m2e.logback.configuration: Initializing logback
org.eclipse.m2e.logback.configuration: eclipse.consoleLog=true
Buildfile: .\base\cmd\refresh.xml

refresh:
[eclipse.refreshLocal] Warning: project /My_Project does not exist and cannot be
refreshed.
BUILD SUCCESSFUL 
```

我试过了

1.  几个项目
2.  `eclipse.convertPath fileSystemPath="/My_Project"`
3.  `property="Test" fileSystemPath="/${workspace_loc}/My_Project"`
4.  `fileSystemPath="/${workspace_loc:My_Project}"`
5.  `fileSystemPath="/path/to/my/project/My_Project"`
6.  使用其他环境变量并`${Test}`用作资源

但它要么不扩展变量（工作区），要么抛出错误，因为路径无效（它不是）或没有任何变化

如果这是一个愚蠢的问题，请原谅，我已经研究了几个小时，我以前从未使用过 ant，希望我没有我想的那么愚蠢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:46:52.477

我的猜测是，您运行 ant 脚本的 Eclipse 实例所在的工作区与项目所在的工作区不同。要解决此问题，请确保在启动 ant 脚本时指定 Eclipse 工作区位置。您可以使用`osgi.instance.area`系统属性从启动脚本的命令中设置工作区位置

```
-Dosgi.instance.area=/path/to/my/workspace 
```

[这是命令行选项的完整描述。](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/runtime-options.html)

# ext.net - 基于另一个单元格（组合框）更新GridPanel单元格（组合框），两个单元格属于同一列？

> ID：16189078
> 
> 赞同：1
> 
> 时间：2013-04-24T10:01:58.900
> 
> 标签：ext.net, gridpanel, datagridcomboboxcolumn

正如主题所指定的，我有一个带有 ComboBox 的 GridPanel 作为列之一的单元格。默认情况下，包含 ComboBox 的每个单元格都将所选项目作为当前行号，用户可以更改 ComboBox 中的项目。

问题：我将用一个[B] 我打算成为行为[/B] 的例子来解释这个问题。考虑用户将 ComboBox 值从 2（出现在第 2 行）更改为 6 的场景，第 6 行中出现的 ComboBox 的值应该从 6 更改为 2。即这些值必须交换，以便每一行将没有任何重复的条目作为组合框中的选定项。

建议的解决方案：我尝试了几件事，但我被困在了我在下面解释的一点上。我有两个商店 Store1 用于 GridPanel 和 Store2 用于 ComboBox。在 Listeners 事件中 - > ComboBox 的 BeforeSelect 事件 1) 我得到选定的值（用户已修改的值） 2) 遍历绑定到 GridPanel 的数据（因为还有一些其他可编辑的列可能已被修改）--->[B] 这是我被卡住的部分[/B] 3）更新 Store1 并提交将反映在数据视图中的更改。这就是我的想法。

是否可以在客户端执行此操作，还是我们必须在服务器端执行此操作？我更喜欢客户端。我开发了一个示例页面，其中展示了 gridpanel 、 combobox 等。

我从过去 3 年开始与 Telerik Controls 合作，并且我是 Ext.net 的新手（实际上从过去 3 天开始在 POC 上工作）

```
<%@ Page Language="C#" %>

<%@ Import Namespace="System.Collections.Generic" %>
<%@ Import Namespace="System.Xml" %>
<%@ Import Namespace="System.Data.Linq" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        //if (!X.IsAjaxRequest)
        //{
        this.Store1.DataSource = new List<Company> 
             { 
                 new Company(0, "3m Co", 71.72, "name1", 0.03, 1),
                 new Company(1, "Alcoa Inc", 29.01, "name2", 1.47,2),
                 new Company(2, "Altria Group Inc", 83.81, "name3", 0.34,3),
                 new Company(3, "American Express Company", 52.55, "name4", 0.02,4),
                 new Company(4, "American International Group, Inc.", 64.13, "name5", 0.49,5),
                 new Company(5, "AT&T Inc.", 31.61, "name6", -1.54,6),
                 new Company(6, "Boeing Co.", 75.43, "name7", 0.71,7),
                 new Company(7, "Caterpillar Inc.", 67.27, "name8", 1.39,8),
                 new Company(8, "Citigroup, Inc.", 49.37, "name9", 0.04,9),
                 new Company(9, "E.I. du Pont de Nemours and Company", 40.48, "name10", 1.28,10)
             };

        this.Store1.DataBind();

        List<object> Items = new List<object>(10);
        for (int i = 1; i <= 10; i++)
        {
            Items.Add(new { Text = "C" + i, ItemValue = i });
        }

        Store2.DataSource = Items;
        Store2.DataBind();

        if (!this.IsPostBack)
        {
            //RowSelectionModel sm = this.GridPanel1.GetSelectionModel() as RowSelectionModel;

            //sm.SelectedRow = new SelectedRow(2);

            //sm.SelectedRows.Add(new SelectedRow(2));
            //sm.SelectedRows.Add(new SelectedRow("11"));
        }

        //}
    }

    protected void SubmitSelection(object sender, DirectEventArgs e)
    {
        string json = e.ExtraParams["Values"];

        if (string.IsNullOrEmpty(json))
        {
            return;
        }

        //XML will be represent as
        //<records>
        //   <record><Name>Alcoa Inc</Name><Price>29.01</Price><Change>0.42</Change><PctChange>1.47</PctChange></record>
        //        ...  
        //   <record>...</record>
        //</records>

        XmlNode xml = JSON.DeserializeXmlNode("{records:{record:" + json + "}}");

        foreach (XmlNode row in xml.SelectNodes("records/record"))
        {
            string enable = row.SelectSingleNode("Enable").InnerXml;
            string name = row.SelectSingleNode("Name").InnerXml;
            string price = row.SelectSingleNode("Price").InnerXml;
            string change = row.SelectSingleNode("UpdatedBy").InnerXml;
            string pctChange = row.SelectSingleNode("PctChange").InnerXml;

            //handle values
        }

        List<Company> companies = JSON.Deserialize<List<Company>>(json);

        foreach (Company company in companies)
        {
            string name = company.Name;
            double price = company.Price;
            string change = company.UpdatedBy;
            double pctChange = company.PctChange;

            //handle values
        }

        Dictionary<string, string>[] companies1 = JSON.Deserialize<Dictionary<string, string>[]>(json);

        foreach (Dictionary<string, string> row in companies1)
        {
            string name = row["Name"];
            string price = row["Price"];
            string change = row["UpdatedBy"];
            string pctChange = row["PctChange"];

            //handle values
        }

        this.ResourceManager1.AddScript("Ext.Msg.alert('Submitted', 'Please see source code how to handle submitted data');");
    }

    public class Company
    {
        public Company(int id, string name, double price, string updatedBy, double pctChange, int displayOrder)
        {
            this.ID = id;
            this.Name = name;
            this.Price = price;
            this.UpdatedBy = updatedBy;
            this.PctChange = pctChange;
            this.DisplayOrder = displayOrder;
        }

        public int ID { get; set; }
        public string Name { get; set; }
        public double Price { get; set; }
        public string UpdatedBy { get; set; }
        public double PctChange { get; set; }
        public int DisplayOrder { get; set; }
    }
</script>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Demo Grid For Admin Screen</title>

    <link href="resources/css/examples.css" rel="stylesheet" />

    <script>
        var template = '<span style="color:{0};">{1}</span>';

        var change = function (value) {
            return Ext.String.format(template, (value > 0) ? "green" : "black", value);
        }

        var pctChange = function (value) {
            return Ext.String.format(template, (value > 0) ? "green" : "red", value + "%");
        }

        var duplicated = function (store, SelectedItem, index) {

            var found = false;
            //TODO: Iterate through the data which was bounded to the GridPanel
            //      Update the Store1 and commit the changes which will reflect in the dataview.

            //if (index != undefined || index != null) {

            //    store.store.each(function (record) {
            //        if (found = (record.data.itemValue == SelectedItem.data.itemValue) ? true : false) {
            //            record.data.itemValue = store.value;
            //            record.data.text = store.rawValue;

            //            alert("Duplicate present");
            //            found = true;
            //        };
            //    }
            //)
            //}
            return found;
        }

    </script>
</head>
<body>
    <form id="Form1" runat="server">
        <ext:ResourceManager ID="ResourceManager1" runat="server" />

        <h1>Decision Support Admin Screen</h1>
        <p>This example shows how to maintance selection between paging</p>

        <ext:Store ID="Store1" runat="server" PageSize="10">
            <Model>
                <ext:Model ID="Model1" runat="server" IDProperty="ID">
                    <Fields>
                        <ext:ModelField Name="Enable" Type="Boolean" />
                        <ext:ModelField Name="ID" />
                        <ext:ModelField Name="Name" />
                        <ext:ModelField Name="Price" />
                        <ext:ModelField Name="UpdatedBy" />
                        <ext:ModelField Name="PctChange" />
                        <ext:ModelField Name="DisplayOrder" Type="Int" />
                    </Fields>
                </ext:Model>
            </Model>
        </ext:Store>

        <ext:Store ID="Store2" runat="server">
            <Model>
                <ext:Model ID="Model2" runat="server">
                    <Fields>
                        <ext:ModelField Name="text" Type="String" ServerMapping="Text" />
                        <ext:ModelField Name="itemValue" Type="int" ServerMapping="ItemValue" />
                    </Fields>
                </ext:Model>
            </Model>
        </ext:Store>

        <ext:GridPanel
            ID="GridPanel1"
            runat="server"
            StoreID="Store1"
            Title="Decision Support Admin Screen"
            Collapsible="false"
            DisableSelection="false"
            Width="600">
            <ColumnModel ID="ColumnModel1" runat="server">
                <Columns>
                    <ext:CheckColumn runat="server" Text="Enable" Editable="true" Width="55" DataIndex="Enable"></ext:CheckColumn>
                    <ext:Column ID="Column1" runat="server" Text="Company" DataIndex="Name" Flex="1" />
                    <ext:Column ID="Column2" runat="server" Text="Price" Width="75" DataIndex="Price">
                        <Renderer Format="UsMoney" />
                    </ext:Column>
                    <ext:Column ID="Column3" runat="server" Text="Updated By" Width="75" DataIndex="UpdatedBy">
                        <Renderer Fn="change" />
                    </ext:Column>
                    <ext:Column ID="Column4" runat="server" Text="Change" Width="75" DataIndex="PctChange">
                        <Renderer Fn="pctChange" />
                    </ext:Column>

                    <ext:ComponentColumn ID="ComponentColumn2"
                        runat="server"
                        Editor="true"
                        DataIndex="DisplayOrder"
                        Flex="1"
                        Text="Display Order Dynamic">
                        <Component>
                            <ext:ComboBox ID="ComboBox2" runat="server" StoreID="Store2" ValueField="itemValue" DisplayField="text">
                                <Listeners>
                                    <BeforeSelect Fn="duplicated">
                                    </BeforeSelect>
                                </Listeners>
                            </ext:ComboBox>
                        </Component>
                    </ext:ComponentColumn>

                </Columns>
            </ColumnModel>
            <View>
                <ext:GridView ID="GridView1" runat="server" StripeRows="true">
                    <Plugins>
                        <ext:GridDragDrop ID="GridDragDrop1" runat="server" DragText="Drag and drop to reorganize" />
                    </Plugins>
                </ext:GridView>
            </View>
        </ext:GridPanel>
        <table>
            <tr>
                <td>
                    <ext:Button ID="btnSave" runat="server" Text="Save">
                        <DirectEvents>
                            <Click OnEvent="SubmitSelection">
                                <ExtraParams>
                                    <ext:Parameter
                                        Name="Values"
                                        Value="#{GridPanel1}.getRowsValues()"
                                        Mode="Raw"
                                        Encode="true" />
                                </ExtraParams>
                            </Click>
                        </DirectEvents>
                    </ext:Button>

                </td>
                <td>
                    <ext:Button ID="btnBack" runat="server" Text="Back" />
                </td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:33:44.673

我能够解决这个问题。只需将上面代码中的这个方法 var duplicated = function (store, SelectedItem, index) 替换成这个

```
 var duplicated = function (store, SelectedItem, index) {
        var found = false;
        var GridPanelStore = Ext.getCmp('GridPanel1').getStore();

        GridPanelStore.each(function (record) {
            if (record.data.DisplayOrder == SelectedItem.data.itemValue) {
                record.data.DisplayOrder = store.value;
                //TODO: Do we have to display the user some Notification about the duplicate value?
                found = true;
            }
            else if (record.data.DisplayOrder == store.value) {
                record.data.DisplayOrder = SelectedItem.data.itemValue;
                found = true;
            }
        }
            )

        GridPanelStore.commitChanges;
        Ext.getCmp('GridPanel1').getView().refresh(false);
        return found;
    } 
```

# jsp - 如何使用jsp从前端textarea的数据库中检索数据

> ID：16189082
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:02:19.810
> 
> 标签：jsp

我想编辑学生详细信息。我可以通过将 rollno 作为输入来检索所有字段，但数据库中的 textarea 字段除外。如何从数据库中将数据检索到 textarea。这里的地址字段是 textarea。我无法从数据库中检索地址

```
editstudent.jsp
<body>  

        <!--<form id="frmExamRegistration" method="post" enctype="multipart/form-data" class="anu">-->

    <form name="f1" method="post" class="anu" action="Edit_studentdetails.jsp">  
    <%@include file="adminheader.jsp"%>
<%@include file="sidemenus.jsp" %>

    <div id="container">
              <div  style="float:right;width:10%;border:0;font-color:#163362"><a href=logout.jsp">Log Out</a></div><br>
        <div class="content"><center>Edit Student</center><br>
            <div class="formElements,rightcol" align="center">
                <label>Rollno:
                 <span><input type="text" id="txtRollno" name="txtRollno" ></span></label>
                       </div><br>

            <div class="buttons">
                <button type="submit" class="primaryAction">Edit</button>
                                <button type="reset" class="primaryAction">Clear</button>

            </div>
                 </div>
         </div>
       </form>
  </body>

edit_studentdetails.jsp

<body>  
    <form name="f1" method="post" class="anu" action="Update_studentdetails.jsp">  
    <%@include file="adminheader.jsp"%>
    <%@include file="sidemenus.jsp" %>
    <%@include file="jsp/jdbcresults.jsp" %>
    <%  

                Connection dbConnection = con;

    String Rollno=request.getParameter("txtRollno");
        String BatchCode="";
        String CourseCode="";
        String Fullname="";
        String Fathername="";
        Date DOB=null;
        String fmtdob=null;
        String Gender="";
        Date DOJ=null;
        String fmtdoj=null;
        String Email="";
        String Phone="";
        String address=null;
        String Hallticketno="";
        java.text.SimpleDateFormat formatter=new java.text.SimpleDateFormat("dd-mm-yyyy");
     //   String Photo=request.getParameter("txtPhoto");

try 
                {

String selectStoredProc = "SELECT * FROM STUDENTS WHERE ROLLNO = '"+Rollno+"'";

                        PreparedStatement ps = dbConnection.prepareStatement(selectStoredProc);
                    ResultSet rs=ps.executeQuery();
                    while(rs.next()) {
                      Rollno = rs.getString("rollno");

                  BatchCode=rs.getString("batchcode");
                          CourseCode=rs.getString("ccode");
                          Fullname=rs.getString("fullname");
                          Fathername=rs.getString("fathername");
                                          DOB=rs.getDate("dob");
                                          // fmtdob =formatter.format(DOB);
                          Gender=rs.getString("gender");
                          DOJ=rs.getDate("doj");
                                         // fmtdoj =formatter.format(DOJ);
                              Email=rs.getString("email");
                          Phone=rs.getString("phone");
                          address=rs.getString("address");
                          Hallticketno=rs.getString("hallticketno");
                    }
                    rs.close();
                    rs = null;

                } 
                catch (Exception e) {
                    System.out.println(e.getLocalizedMessage());
                }
                finally {

                    if(dbConnection != null){
                        dbConnection.close();
                        dbConnection = null;
                    }
                }

    %>
    <div id="container">
              <div  style="float:right;width:10%;border:0;font-color:#163362"><a href=logout.jsp">Log Out</a></div><br>
        <div class="content"><center>Edit Student Details</center><br>
            <div class="formElements,rightcol" align="center" width="100%">

                                 <label>Roll no:
                 &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;<span><input type="text" id="txtRollno" name="txtRollno" value="<%= Rollno%>" readonly='true'></span></label><br>

                <label>Batch code:
                 &nbsp&nbsp&nbsp;<span><input type="text" id="txtBatchcode" name="txtBatchcode" value="<%= BatchCode%>" readonly='true'></span></label><br>

                <label>Course code:
                 <span><input type="text" id="txtCoursecode" name="txtCoursecode" value="<%= CourseCode %>" readonly='true'></span></label><br>

                <label>Full Name:
                &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;<span><input type="text" id="txtFullname" name="txtFullname" value="<%= Fullname %>" ></span></label><br>

                <label>Father Name:&nbsp
                 <span><input type="text" id="txtFathername" name="txtFathername" value="<%= Fathername %>" ></span></label><br>

                <label>Date Of Birth:&nbsp&nbsp&nbsp&nbsp
                                <input type="date" name="txtDob" id="txtDob" value="<%= DOB %>" ></label><br>

                <label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;Gender:
                    <% if (Gender.equals("male")){%>
                                   <input type=Radio name='txtGender' value='male' checked='true'> Male
                                     <%}else{%>
                                   <input type=Radio name='txtGender' value='male'>Male
                     <%} if (Gender.equals("female")){%>
                   <input type=Radio name='txtGender' value='female' checked='true'> Female</td></tr>
                     <%}else{%>
                   <input type=Radio name='txtGender' value='female'><b> Female</td></tr>
                     <%}%></label><br>

                               <label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;Date Of Join:
                 <input type="date" name="txtDoj" id="txtDoj" value="<%= DOJ %>" ></label><br>

                                <label>Email id:
                 &nbsp&nbsp&nbsp;<span><input type="text" id="txtEmailid" name="txtEmailid" value="<%= Email %>"  ></span></label><br>

                                <label>Phone No.:
                 &nbsp&nbsp&nbsp;<span><input type="text" id="txtPhoneno" name="txtPhoneno" value="<%= Phone %>" ></span></label><br>

                               <label>Address:
                 &nbsp&nbsp&nbsp;<span><textarea rows="4" cols="30" name="txtaddress" id="txtaddress" textareaObject.value="text" value="<%= address %>" ></textarea></span></label><br> 

                               <label>Hall ticket no.:
                 &nbsp&nbsp&nbsp;<span><input type="text" id="txtHallticketno" name="txtHallticketno"  value="<%= Hallticketno%>" ></span></label><br>

                             <!--<label>Photo:
                                <input type="file" id="txtPhoto" name="txtPhoto" ></span></label><br>-->
                        </div>

            <div class="buttons">
                <button type="submit" class="primaryAction">Edit</button>
                <button type="reset" class="primaryAction">Clear</button>
            </div>
          </div>
         </div>
       </form>
  </body>

update_studentdetails.jsp

<body >  

        <!--<form id="frmExamRegistration" method="post" enctype="multipart/form-data" class="anu">-->

    <form name="f1" method="post" class="anu">  
<table  valign="top" height="800" width="1024"> 
<tr><td colspan="2"><%@include file="adminheader.jsp"%></td></tr>

    <!--<div id="container">
<div class="content"><center><h4> Grades</h4></center> -->

<tr><td colspan="2" bgcolor="#A1A1AE">
              <div  style="float:right;width:10%;border:0;font-color="ffffff";"><a href=logout.jsp">Log Out</a></div></td>
<tr><td height="600" valign="top">      
<%@include file="sidemenus.jsp" %></td>

<td>

<%@include file="jsp/jdbcresults.jsp" %>
<%
     // Hope you are getting the connection part  
                CallableStatement cstmt=null;
        String Rollno=request.getParameter("txtRollno");
        String BatchCode=request.getParameter("txtBatchcode");
        String CourseCode=request.getParameter("txtCoursecode");
        String Fullname=request.getParameter("txtFullname");
        String Fathername=request.getParameter("txtFathername");
        String DOB=request.getParameter("txtDob");
        String Gender=request.getParameter("txtGender");
        String DOJ=request.getParameter("txtDoj");
        String Email=request.getParameter("txtEmailid");
        String Phone=request.getParameter("txtPhoneno");
        String Address=request.getParameter("txtaddress");
        String Hallticketno=request.getParameter("txtHallticketno");

 try {
cstmt=con.prepareCall("{call udp_modifystudent(?,?,?,?,?,?,?,?,?,?,?,?)}");
                cstmt.setString(1,Rollno);
                cstmt.setString(2,BatchCode); 
                cstmt.setString(3,CourseCode);                
                cstmt.setString(4,Fullname);  
                cstmt.setString(5,Fathername);  
                cstmt.setString(6,DOB);  
                cstmt.setString(7,Gender);  
                cstmt.setString(8,DOJ);  
                cstmt.setString(9,Email);  
                cstmt.setString(10,Phone);  
                cstmt.setString(11,Address);  
                cstmt.setString(12,Hallticketno);  
                cstmt.executeUpdate(); 

               out.print("Student updated successfully");
       }
       catch(Exception e){
        out.print("Exception: "+e.getMessage());
                }
       finally {
       cstmt.close();
       con.close();
       }

%>
</td></tr>
</table></form></body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:07:52.023

```
<textarea rows="4" cols="30" name="txtaddress" id="txtaddress" textareaObject.value="text" ><%= address %></textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:06:38.350

与文本框相反，这不是您将内容放入文本区域的方式。您不应该将文本放在“值”属性中，而只是将其放在打开和关闭 textarea 标记之间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T12:29:16.497

像这样使用它会起作用

```
<textarea name="content"><%= rs.getString("addres")%></textarea> 
```

# java - 来自 DocumentBuilderFactory 的 XML 响应中的“文档：null”？

> ID：16189083
> 
> 赞同：0
> 
> 时间：2013-04-24T10:02:25.340
> 
> 标签：java, xml, string, httpurlconnection

我正在创建 jUnit 测试来检查为客户端应用程序获取 XML 的代理 servlet 是否在没有损坏或任何更改的情况下返回它们。

在我的 jUnit 类中，我有一个 doGet 方法，它执行我对代理 servlet 的 HTTP 获取请求，它在最后传递一个带有 GET 参数的 URL

应将 XML 响应接收回客户端 (jUnit)。

```
protected String doGet() throws IOException, ParserConfigurationException, SAXException
{
    String requestURL = url + params;
    System.out.println(requestURL);
    // fetch XML from URL
        System.out.println(requestURL);

        URL url = new URL(requestURL);
        HttpURLConnection connection =
            (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        connection.setRequestProperty("Accept", "application/xml");

        InputStream xml = connection.getInputStream();
        System.out.println(connection.getResponseMessage());
        System.out.println(connection.getResponseCode());

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();

        org.w3c.dom.Document text = db.parse(xml);
        System.out.print(text.getNodeValue());
        return text.toString();
} 
```

这是我的输出：

> 好的
> 
> 200
> 
> 空值
> 
> [#文档：空]

我正在尝试获取作为 XML 文档的 HTTP 响应的字符串值，因此我可以将它与另一个字符串进行比较以确保它是正确的。

我如何获得这个字符串值？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:17:45.227

使用来自 Apache.IO.Utils Common Lib 的这段优雅的代码解决了这个问题

```
org.apache.commons.io.IOUtils.toString(new URL(requestURL)); 
```

# winapi - 使用 Windows API 安全删除通用文件

> ID：16189084
> 
> 赞同：0
> 
> 时间：2013-04-24T10:02:27.193
> 
> 标签：winapi, delete-file

在 Windows 中是否可以不可逆地删除/覆盖文件的内容，无论存储介质如何（即没有对驱动器的原始 I/O 访问），只要授予写访问权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:07:37.993

不，至少一般情况下不会。

微软在 Windows Vista 中引入了所谓的“卷影副本”。因此，Windows 不一定会覆盖现有数据，即使您确实告诉它用新内容覆盖现有文件（只要启用了卷影副本）。文件的旧版本仍有可能继续隐藏在驱动器上（并且可以通过资源管理器中的文件属性窗口访问），除非没有足够的磁盘空间来继续这样做。

更多信息可以在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968832%28v=vs.85%29.aspx)上找到，甚至还有一个 API 可以访问此功能，但我想它仅限于实际编写/创建新副本，而不是删除它们。

# powershell - 如何找出 PowerShell cmdlet 的 DLL 路径

> ID：16189085
> 
> 赞同：14
> 
> 时间：2013-04-24T10:02:27.397
> 
> 标签：powershell

我正在使用从模块导入的一些 cmdlet，并且想找出 DLL 的物理位置，以便我可以在它们上使用 dotPeek 或 Reflector。有没有办法以某种方式找出DLL路径？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-24T10:17:31.183

尝试

```
( get-command my-cmdlet ).dll 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-19T17:14:42.423

接受的答案适用于 cmdlet，但不适用于本机函数，例如`Add-BgpRouter`or `Add-PrinterDriver`。要确定函数的文件路径，请使用

```
$Function = Get-Command Add-BgpRouter
(Get-Module $Function.ModuleName).Path 
```

# powershell - 导入模块 PowerTab

> ID：16189087
> 
> 赞同：1
> 
> 时间：2013-04-24T10:02:32.687
> 
> 标签：powershell

如何在没有这些警告的情况下导入此模块：

导入模块 PowerTab

```
Run only scripts that you trust. While scripts from the Internet can be useful, this script can potentially harm your
computer. Do you want to run C:\Users\someone\Documents\WindowsPowerShell\Modules\PowerTab\Handlers\PSClientManager.ps1?
[D] Do not run  [R] Run once  [S] Suspend  [?] Help (default is "D"): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:15:35.313

我认为取决于您的执行策略配置：

你可以试试

```
set-executionpolicy bypass 
```

或者

```
set-executionpolicy remotesigned 
```

或者

```
 set-executionpolicy unrestricted 
```

或者在模块文件夹中提取文件之前，您需要`unblock`模块的 zip 文件（或从中提取的所有文件）：

您只需选择属性，然后在安全下单击“取消阻止”。单击取消阻止会完全删除`Zone.Identifier Alternative Data Stream`脚本（和其他内容）并使脚本（和其他内容）可执行。

并阅读帮助：

```
get-help about_execution_policies -full 
```

# android - 应用程序被杀死和恢复后重叠的隐藏片段

> ID：16189088
> 
> 赞同：33
> 
> 时间：2013-04-24T10:02:36.200
> 
> 标签：android, android-fragments

我通过**隐藏**最后一个片段并**添加**一个新片段（参见下面的代码）在片段之间切换 - 也将其添加到**后台堆栈**。这样，用户可以在 Fragment 之间快速切换，而无需重新加载 Fragment 数据。

这在应用程序被终止之前运行良好**（**场景：用户使用其他几个应用程序并且我的应用程序被持久化并被终止）。

当用户打开应用程序时，它正在被**恢复**并显示所有片段 -**彼此重叠**。

**问题：恢复的碎片如何恢复其隐藏状态？**也许我错过了一些标志？某处？也许有更好的解决方案可以在片段之间快速切换（无需重新加载数据）？

添加片段的示例代码 - 单击某处时使用不同的片段多次调用：

```
FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
fragmentTransaction.hide(lastFragment);
fragmentTransaction.add(newFragment);
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit();
lastFragment = newFragment; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T17:14:48.440

希望有人找到更好的解决方案。在我接受我的解决方案之前，我会等待一个：

一般来说，我使用生成的标签来查找未隐藏的**片段**并隐藏它们。

具体来说，我为每个片段（StackEntry）生成一个唯一的标签，并在片段本身堆叠时堆叠标签。我将堆栈保留在捆绑包中，并在应用程序恢复时加载它以继续使用它。然后我使用标签列表找到所有未隐藏的**片段**并将它们隐藏——除了最后一个。

继承人示例代码：

```
public class FragmentActivity extends Activity {

    private static final String FRAGMENT_STACK_KEY = "FRAGMENT_STACK_KEY";

    private Stack<StackEntry> fragmentsStack = new Stack<StackEntry>();

    public FragmentActivity() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.content_frame);

        if (savedInstanceState == null) {
            // Init for the first time - not restore
            // ...
        } else {
            Serializable serializable = savedInstanceState.getSerializable(FRAGMENT_STACK_KEY);
            if (serializable != null) {
                // Workaround Android bug.
                // See: http://stackoverflow.com/questions/13982192/when-using-an-android-bundle-why-does-a-serialised-stack-deserialise-as-an-arra
                // And: https://code.google.com/p/android/issues/detail?id=3847
                @SuppressWarnings("unchecked")
                List<StackEntry> arrayList = (List<StackEntry>) serializable;
                fragmentsStack = new Stack<StackEntry>();
                fragmentsStack.addAll(arrayList);
            }

            // Hide all the restored fragments instead of the last one
            if (fragmentsStack.size() > 1) {
                FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
                for (int i = 0; i < fragmentsStack.size()-1; i++) {
                    String fragTag = fragmentsStack.get(i).getFragTag();
                    Fragment fragment = getFragmentManager().findFragmentByTag(fragTag);
                    fragmentTransaction.hide(fragment);
                }
                fragmentTransaction.commit();
            }
        }
        getFragmentManager().addOnBackStackChangedListener(new OnBackStackChangedListener() {
            @Override
            public void onBackStackChanged() {
                Fragment lastFragment = getLastFragment();
                if (lastFragment.isHidden()) {
                    FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
                    fragmentTransaction.show(lastFragment);
                    fragmentTransaction.commit();
                }
            }
        });
    }

    private Fragment getLastFragment() {
        if (fragmentsStack.isEmpty()) return null;
        String fragTag = fragmentsStack.peek().getFragTag();
        Fragment fragment = getFragmentManager().findFragmentByTag(fragTag);
        return fragment;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putSerializable(FRAGMENT_STACK_KEY, fragmentsStack);
    }

    @Override
    public void onBackPressed() {
        if (!fragmentsStack.isEmpty()) {
            fragmentsStack.pop();
        }
    }

    public void switchContent(Fragment fragment) {
        FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
        Fragment lastFragment = getLastFragment();
        if (lastFragment != null) {
            fragmentTransaction.hide(lastFragment);
        }
        String fragTag;
        if (fragment.isAdded()) {
            fragmentTransaction.show(fragment);
            fragTag = fragment.getTag();
        } else {
            fragTag = Long.toString(System.currentTimeMillis());
            fragmentTransaction.add(R.id.content_frame, fragment, fragTag);
        }
        if (!isFirstFragment()) {
            // Add to backstack only the first content fragment and not the state before (that has nothing)
            fragmentTransaction.addToBackStack(null);
        }
        fragmentTransaction.commit();

        fragmentsStack.push(new StackEntry(fragTag));
    }

    public boolean isFirstFragment() {
        return fragmentsStack.size() == 0;
    }

    private static class StackEntry implements Serializable {
        private static final long serialVersionUID = -6162805540320628024L;

        private String fragTag = null;
        public StackEntry(String fragTag) {
            super();
            this.fragTag = fragTag;
        }
        public String getFragTag() {
            return fragTag;
        }
    }

    public static class Intent extends android.content.Intent {
        public Intent(Context packageContext) {
            super(packageContext, FragmentActivity.class);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-15T04:07:37.153

我也遇到了这个问题，这是一个可能的解决方案：让每个片段保存自己的状态关于它是否被隐藏，然后将自己隐藏在它的 onCreate 中。

```
@Override
public void onSaveInstanceState(Bundle bundle) {
    super.onSaveInstanceState(bundle);
    if (this.isHidden()) {
        bundle.putBoolean("hidden",  true);
    }
}

@Override
public void onCreate(Bundle bundle) {
    super.onCreate(bundle);
    if (bundle != null) {
        if (bundle.getBoolean("hidden",  false)) {
            getFragmentManager()
                .beginTransaction()
                .hide(this)
                .commit();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-07T02:17:30.790

最后，我找到了解决此问题的最简单方法：将 content_frame 从 FramLayout 更改为 LinearLayout。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-18T11:54:11.687

我有同样的问题，并通过设置每个片段`setRetainInstance(true);`的方法来解决它。`onCreate()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-07T19:38:38.210

既然您提到您不介意从头开始重新加载片段，为什么不使用意图并重新启动主要片段活动呢？

我遇到了与您提到的相同的问题，其中片段彼此重叠。我查看了整个stackoverflow，发现只有这个讨论这个特定问题的线程。我尝试了**Walt**提供的解决方案，但没有按预期工作。

下面的解决方法至少对我有用，所以如果有人最终遇到这种情况，请分享它

在父片段的**onSaveInstanceState**处，我设置了一个标记以确保包中保存了一些内容。

```
public void onSaveInstanceState(Bundle outState) 
{
    // TODO Auto-generated method stub
    super.onSaveInstanceState(outState);

    outState.putString(TAG, "Get ready to be terminated");
}; 
```

在 onCreate 中，当保存的实例状态不为空时，您可以使用 Intent 指定要加载的类，

```
@Override
protected void onCreate(Bundle savedInstanceState)
{       
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.layout);

    if(savedInstanceState != null)
    {   
        Intent myIntent = new Intent(this, your.class);

        // Closing the parent fragment
        finish();

        this.startActivity(myIntent);
    }
    else
    {
        // your main code
        ...........
        ...........
    };
}; 
```

这将确保您的片段是从头开始重新创建的。

在我的情况下，当用户打开我的应用程序时，我有一个登录屏幕，如果他们在被重定向到片段屏幕之前已经“登录”。

在终止过程中，一旦应用程序进入前台，我会将用户重定向到登录页面，然后我已经存在的代码负责将用户再次重定向回新创建的片段屏幕。

**注意：**您需要确保您的子片段在**onCreateView**没有松散的结尾。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-27T12:58:45.560

我有同样的问题。不幸的是，唯一好的解决方案是切换到使用`fragmentTransaction.replace`而不是`fragmentTransaction.hide`添加。

当时它很糟糕，但我真的很高兴我做到了。它迫使我思考`savedInstanceState`并妥善处理它。您提到在导航返回时会重新加载片段。我遇到了完全相同的问题，迫使我`savedInstanceState`正确处理。那里有2个案例。

1.  如果活动没有被破坏，唯一需要重新创建的是视图（通过`onCreateView`），其他所有东西都还在内存中，所以这只是一个将适配器连接到视图的问题，你就完成了。

2.  如果活动被破坏，我需要重新创建视图和适配器。为了最小化加载时间，我将重新创建适配器所需的数据存储在`savedInstanceState`

但是，您的抱怨是有效的，我不知道为什么 Android 不支持从带有使用添加和隐藏的片段的已破坏 Activity 返回正确的隐藏状态。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-10T09:53:06.590

我遇到了同样的问题，我认为这是 Android 框架错误。这就是[问题](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=67482#makechanges)所在。

但是我的方法对你有用，我们应该重写该`onSaveInstanceState(Bundle outState)`方法，将我们的自定义数据保存到`outState`，但永远不要调用`super.onSaveInstanceState(outState);`。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ......

    if (savedInstanceState != null) {
        mCustomVariable = savedInstanceState.getInt("variable", 0);
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    //super.onSaveInstanceState(outState);
    outState.putInt("variable", mCustomVariable);
} 
```

# java - 找出谁最初在 Subversion 中添加文件的有效方法

> ID：16189095
> 
> 赞同：3
> 
> 时间：2013-04-24T10:03:02.067
> 
> 标签：java, svn, svnkit

除了手动解析历史记录之外，是否有一种有效的方式以编程方式找出谁最初在 Subversion 中添加了文件？最好使用 SVNKit Java 库或在命令行上。

我已将最新版本签出到工作副本中。`svn info`给了我我需要的所有其他信息，但不是最初的作者（我的意思是，谁`svn add`在文件上运行）。

解析输出的问题是重命名。例如，如果文件 startet 与第`myfile.txt`10 版一样，并`myFancyFile.txt`在第 12 版中重命名，我仍然需要第 10 版中的原作者。

我不需要有关已删除文件或文件夹的任何信息，只需要我当前工作副本中存在的文件。谢谢

我为什么要这样做？我们正在从文件中提取元数据，我需要知道谁最初签入了文件。该报告每晚生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:11:32.053

`.svn/wc.db`不包含有关节点创建属性的信息，因为查看数据库显示：

```
sqlite> .schema nodes
CREATE TABLE NODES ( wc_id  INTEGER NOT NULL REFERENCES WCROOT (id), local_relpath  TEXT NOT NULL, op_depth INTEGER NOT NULL,   parent_relpath  TEXT, repos_id  INTEGER REFERENCES REPOSITORY (id), repos_path  TEXT, revision  INTEGER, presence  TEXT NOT NULL, moved_here  INTEGER, moved_to  TEXT, kind  TEXT NOT NULL, properties  BLOB, depth  TEXT, checksum  TEXT, symlink_target  TEXT,   changed_revision  INTEGER, changed_date INTEGER, changed_author TEXT, translated_size  INTEGER, last_mod_time  INTEGER, dav_cache  BLOB, file_external  TEXT, PRIMARY KEY (wc_id, local_relpath, op_depth) ); 
```

因此，您需要查询存储库

对于 SVNKit，我会在这里使用`SVNRepository#getFileRevisions`和/或`SVNRepository#getLocations`（对于重命名的文件）并从第一个报告的修订版中获取所需的信息。

如果您需要许多文件的信息（正如我从您的最后一句话中理解的那样），您也可以考虑遍历日志并从那里获取信息。

# ios - 克隆 MPMoviePlayer 的实例

> ID：16189096
> 
> 赞同：1
> 
> 时间：2013-04-24T10:03:04.473
> 
> 标签：ios, mpmovieplayercontroller

我知道您可以在屏幕中一次拥有一个 MPMoviePlayer 实例，但我成功地实现了一个表格视图，其单元格与屏幕边界一样大，并参考了存储在 AppDelegate 中的单个 MPMoviePlayer 实例。由于单元格与屏幕一样大，因此我在过渡方面没有问题，但是每次您点击屏幕以更改显示的单元格时都会出现一些故障（我启用了分页）并且您中断了单元格之间的过渡，玩家的视图只是消失了（我不太确定这是 tableview 的单元格重用问题还是 MPMoviePlayer 的问题）。无论如何，我想避免 tableview 的问题并使用一个 contentSize 宽度为屏幕两倍的大滚动视图......并且只需构建 AppDelegate 的 MPMoviePlayer 实例的两个克隆。

```
UIView *view = [[UIView alloc]initwithframe:myFrame];
view = myAppDelegate.streamPlayer.view; 
```

似乎不起作用……有什么想法吗？希望问题符合论坛指南

编辑：如果我这样说可能会更清楚：“有可能在同一屏幕上拥有 MPMoviePlayer 的同一实例的 2 个副本？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T11:24:12.020

可能问题不是那么清楚......但是如果你想有一个播放器的 2 个实例，一起播放同一个剪辑，你需要有 2 个 AVPlayer 实例。这是我开始的地方：

[http://iosguy.com/2012/01/11/multiple-video-playback-on-ios/](http://iosguy.com/2012/01/11/multiple-video-playback-on-ios/)

很清楚

# excel - 当值列表中的 1 个值满足条件时返回真或假的公式

> ID：16189099
> 
> 赞同：0
> 
> 时间：2013-04-24T10:03:13.850
> 
> 标签：excel, conditional-formatting

我正在寻找一个公式，当值列表中的 1 个值满足条件时返回真或假。

```
List:
100
200
300
400

=If(List>350;true;false) 
```

列表的最后一个值大于 350，输出公式必须为真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:32:24.210

如果您的情况总是这样`>`，您可以简单地使用 MAX：

```
=IF(MAX(A1:A4) > 350, TRUE, FALSE) 
```

如果条件是`<`，您可以以相同的方式使用 MIN。

如果条件可能更复杂，例如“列表包含至少一个介于 300 和 400 之间的值”，则需要使用 COUNTIF：

```
=IF(COUNTIF(A1:A4,">=300")-COUNTIF(A1:A4,">=400") > 0, TRUE, FALSE) 
```

如果您只需要该范围内的*一个*值，而不是*至少一个*，则将 更改`> 0`为`= 1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:21:31.603

您不需要 IF 语句。

=MAX(A1:A4) > 350

给你同样的结果。

# javascript - jQuery在滚动时排队fadeIn（）

> ID：16189101
> 
> 赞同：0
> 
> 时间：2013-04-24T10:03:17.100
> 
> 标签：javascript, jquery

每次滚动时，我`fadeIn`的滚动似乎都会触发，这正是我想要的。但这会使动画排队，并在用户停止滚动后运行良好。

我曾尝试使用该`.stop(true, true)`函数，但我相信这不适用于`if`or`else`语句。

到目前为止我的代码：

```
if($('.icon').isOnScreen()){
    $('.icon').fadeIn("slow");  
} else {
    $('.icon').fadeOut("slow"); 
}; 
```

我在下面尝试过，但这不起作用

```
if($('.icon').isOnScreen()){
    $('.icon').stop(true,true).fadeIn("slow");  
} else {
    $('.icon').stop(true,true).fadeOut("slow"); 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:33:24.410

搞定了，谢谢大家

```
if($('.box').isOnScreen()){
    if($('.icon').isOnScreen()){
        $('.icon').fadeIn("slow");      
    } else {
        $('.icon').fadeOut("slow"); 
    }
} else {
    $('.icon').stop().fadeOut("slow");  
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:19:54.923

你试过他的吗？

```
var isfadeId;
if($('.icon').isOnScreen()){
   if(!isfadeId) $('.icon').fadeIn("slow");
   isfadeId = true;
} else {
   if(isfadeId) $('.icon').fadeOut("slow"); 
   isfadeId = false;
}; 
```

# android - 让 AsyncTask 等待其他 AsyncTask

> ID：16189102
> 
> 赞同：0
> 
> 时间：2013-04-24T10:03:17.660
> 
> 标签：android, android-asynctask

我有一个 AsyncTask 执行多个 AsyncTasks（调用 Web 服务）。

我正在寻找一种方法让我的 AsyncTask 等待其他 AsyncTask 响应

能够给出“主要” AsyncTask 响应

```
public class MainTask extends AsyncTask<String, Void, String> {
    protected String doInBackground(String... urls) {
          for (int i=0 ; i<myObjects.size();i++) {
                MyObject m=myObjects.get(i);
                creationTask=new CreationTask();
                //init creationTask
                creationTask.execute(new String[] { URL });
          }
            //wait for creationTasks responses
            //return "success" if all succeeded
     }
} 
```

MainTask 启动的任务

```
 public class CreationTask extends AsyncTask<String, Void, String> {
        protected String doInBackground(String... urls) {
               //Creation request to web Service
              return result;
        }
        @Override
        protected void onPostExecute(String result) {
            if ("success".equals(result)) {
                //notify MainTask
            }
        }
     } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:13:33.717

您可以从您的主要`doInBackground`方法中调用其他方法。`AsyncTasks``doInBackground`

```
public class MainAsyncTask<?, ?, ?>{
    doInBackground(){
        new OtherAsyncTask().doInBackground();
        new AnotherAsyncTask().doInBackground();
    }
} 
```

或者，更好的是，将您的代码拆分一下，这样他们`AsyncTasks`就不会负责了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:12:31.697

您应该使用回调运行实现接口（观察者设计模式）的任务，并且在每个任务完成后，您将能够在调用线程中做任何您想做的事情。但我不会从 doInBackground() 内部启动 asyncTasks，您应该从主 (UI) 线程执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:51:30.023

您可以在 AsyncTask1 的 OnPostExecute() 中执行您的 AsynTask2 或 AsyncTask3 。但是观察者设计模式是这样做的好方法。

# c++ - AMD64 ABI 中的空类会发生什么？

> ID：16189106
> 
> 赞同：3
> 
> 时间：2013-04-24T10:03:29.587
> 
> 标签：c++, c++11, abi

我正在查看[AMD64 ABI](http://www.cs.tufts.edu/comp/40/readings/amd64-abi.pdf)，它似乎没有指定如何传递空类类型。对于空类成员函数，它似乎`this`像往常一样传递，但对于空类，Clang 生成的代码似乎只是忽略了这个类。根据 AMD64 ABI，这是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:18:55.530

虽然尚不清楚确切的问题是什么，但关于 C++ ABI 是什么的答案非常清楚：

> 对于 C++ ABI，我们将使用 IA-64 C++ ABI 并适当地实例化它。该 ABI 的当前草案可在以下位置获得：

[链接到 Itanium ABI 规范的当前位置](http://mentorembedded.github.io/cxx-abi/abi.html)

这说：

> 空类的传递与普通类没有什么不同。如果传入寄存器，则不得在构成该类的所有寄存器上设置 NaT 位。
> 
> 单字节参数槽的内容是未指定的，被调用者可能不依赖于任何特定的值。在 Itanium 上，如果参数槽与寄存器关联，则不得设置关联的 NaT 位。

此处提供了另一个提示：

> 将返回空类类型的结果，就好像它是包含单个字符的结构一样，即 struct S { char c; };。返回寄存器的实际内容是未指定的。在 Itanium 上，不得设置相关的 NaT 位。

因此，应该将空类视为包含单个字符的结构，但从不使用该单个字符。

`clang`当然，空类可能存在错误。虽然我对此表示怀疑，但公平地说。

# c# - 为匿名类型属性提供别名不起作用

> ID：16189110
> 
> 赞同：0
> 
> 时间：2013-04-24T10:03:38.380
> 
> 标签：c#, asp.net, anonymous-types

我有 2 个同名的属性：

```
List<CustomerWithCountry> customersList = CustomerEntity.LoadCustomersSubsetForCriteria(null, 0, 100, null)
.Select(c => new { c.CODE, c.NAME, c.COUNTRY.NAME }).ToList(); 
```

c.Name 和 c.Country.Name 具有相同的名称有问题。

所以我尝试给 c.Country.Name 一个别名：

```
.Select(c => new { c.CODE, c.NAME, CountryName = c.COUNTRY.NAME }).ToList(); 
```

给我以下错误：

> 错误 3 无法将类型“System.Collections.Generic.List<AnonymousType#3>”隐式转换为“System.Collections.Generic.List<ViewCustomersPage.CustomerWithCountry>”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:05:50.877

该错误也应该在没有别名的情况下存在，因为您选择的是[Anonymous type](http://msdn.microsoft.com/en-us/library/vstudio/bb397696.aspx)，并且您正在尝试将结果分配给`ToList`to `List<CustomerWithCountry>`。您需要将结果投影到您的班级`CustomerWithCountry`。

所以在您的查询中应该是：

```
select (c=> new CustomerWithCountry() {..... 
```

但是请记住，如果您的类来自实体框架或 LINQ to SQL，那么您不能投影到该类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:07:13.190

创建新`CustomerWithCountry`对象

```
List<CustomerWithCountry> customersList =
           CustomerEntity.LoadCustomersSubsetForCriteria(null, 0, 100, null)
              .Select(c => new CustomerWithCountry{ 
                        CODE= c.CODE, 
                        NAME= c.NAME, 
                        CountryName = c.COUNTRY.NAME })
              .ToList(); 
```

# java - 将 json 映射到 Java 对象

> ID：16189115
> 
> 赞同：2
> 
> 时间：2013-04-24T10:03:46.270
> 
> 标签：java, json, coffeescript, mapping

我像这样从客户端发送我的数据

```
$.ajax
  type: "POST"
  url: "/plan"
  dataType: "json"
  ContentType: "application/json; charset=utf-8"
  data: plan
  success:(data) ->
    alert "Save Plan Succeesfully" 
```

在 java 代码中，我有类 Plan，它与 json 中的数据具有相同的字段。所以现在，我想从 data(json) 映射到 Java 代码中的可能 Plan 对象。帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:07:10.313

试试[GSON](https://code.google.com/p/google-gson/)，一个用于 Java 的 Google JSON 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:07:46.180

您可以为此使用杰克逊。在此处阅读文档：

[http://wiki.fasterxml.com/JacksonHome](http://wiki.fasterxml.com/JacksonHome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:28:09.777

我只想说使用像 GSON 或 Jackson 这样的 JSON 解析器，这样做你必须每次都接收整个 String 并手动解析它（痛苦！）。

如果可能的话，我肯定会考虑使用 SpringMVC，因为通过将 Jackson 包含在您的 servlet-context.xml 中，您实际上可以传递整个对象而无需手动进行任何解析。

因此，您可以在 Java 中声明一个哑对象，`Plan`它会进行解析，而无需您实际编写任何中间代码来将 JSON 字符串解释为对象。

# c++ - 将图像数据复制到 cv::mat 的向量

> ID：16189120
> 
> 赞同：1
> 
> 时间：2013-04-24T10:03:57.407
> 
> 标签：c++, opencv, stdvector

```
vector <Mat> redAd(adFileName.size());
fill(redAd.begin(), redAd.end(), NULL);
for (int i = 0; i < adFileName.size(); ++i) {
    cout << adFileName[i].c_str() << endl;
    Mat im = imread(adFileName[i].c_str(), 1);
    cout << im.data << endl;
    redAd.push_back(im);
    cout << redAd[i].data << endl;
} 
```

这里，`adFileName`是包含图像文件路径的字符串向量。aths 打印正确。`im.data`给出一个非空值。但是在将其推入 a`vector <Mat>`并打印一个元素后显示“应用程序已停止工作”。

应该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:38:32.247

因为，您将向量大小设置为 adFileName.size()，然后 push_back 新元素。您应该构造大小为 0 的向量并使用 push_back 或使用 insert。

```
redAd.insert(redAd.begin()+i,1,im); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:58:41.513

您可以只调用默认向量构造函数，然后调用，然后按原样保留循环，而不是`fill`使用 NULL，这会增加问题。`vector <Mat> redAd;``redAd.reserve(adFileName.size())`

# php - datepicker 没有发布到 mysql

> ID：16189122
> 
> 赞同：0
> 
> 时间：2013-04-24T10:04:06.150
> 
> 标签：php, mysql, date, datepicker

我已经尝试了这个论坛上的大部分（如果不是全部）建议，以及其他一些建议，但我仍然在 MySQL DB 中获得**0000-00-00**，即使它回显了正确的格式。
这是PHP代码：

```
 <?php
    include_once("includes/form_functions.php");
    // START FORM PROCESSING
    if (isset($_POST['submit'])) { // Form has been submitted.
        $errors = array();
        // perform validations on the form data
        $required_fields = array('location', 'date');
        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

        $location = trim(mysql_prep($_POST['location']));
        $date = mysql_prep($_POST['date']);
        $adult = mysql_prep($_POST['adult']);
        $child = mysql_prep($_POST['children']);
        $guest = mysql_prep($_POST['guest']);   
        $hg = mysql_prep($_POST['holyghost']);  
        $baptism = mysql_prep($_POST['baptism']);

            if ( empty($errors) ) {
            $query = "INSERT INTO attendance (
            location, date, adult, children, guest, holyghost, baptism
                        ) VALUES (
        '{$location}', {$date}, {$adult}, {$child}, {$guest}, {$hg}, {$baptism} 
                        )"; 
            $result = mysql_query($query, $connection);
            if ($result) {
                $message = "submission completed.";
            } elseif
                ($message = "This form cannot be submitted at this time.");
                 $message .= "<br />" . mysql_error();
            }
        }
   ?> 
```

这是日期选择器代码：

```
 <head>
     <link rel="stylesheet" href="stylesheets/jquery-ui.css" />
          <script src="javascripts/jquery-ui-1.10.2/jquery-1.9.1.js"></script>
          <script src="javascripts/jquery-ui-1.10.2/ui/jquery-ui.js"></script>
          <script type="text/javascript">
          $(function() {
            $( "#datepicker" ).datepicker({
                dateFormat: "yy-mm-dd"
                });
          });
          </script>
    </head> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:11:49.693

I think you need to use single code(') in your insert statement for date to fix this issue like below..

```
INSERT INTO attendance (
            location, date, adult, children, guest, holyghost, baptism
                        ) VALUES (
        '{$location}', '{$date}', '{$adult}', '{$child}', '{$guest}', '{$hg}', '{$baptism}' 
                        ); 
```

Always use single code(') & mysql_escape_string() function while passing value in MySQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:19:14.833

我认为是基于 mysql db 列类型。您需要像这样更改 $date 值

```
`$explode_Date=explode("-",$date);` 
```

`$date=date("d-m-Y, mktime(0,0,0,$explode_Date[1],$explode_Date[0],$explode_Date[2]));`

然后尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:13:30.777

1.  使用 MySQL 的 STR_TO_DATE() 函数来转换字符串：

**插入用户日期值 ('', '$name', STR_TO_DATE('$date', '%m/%d/%Y'))**

1.  将从 jQuery 接收到的字符串转换为 PHP 时间戳——例如使用 strtotime()：

    $timestamp = strtotime($_POST['_date']);

然后是：

使用 date() 格式化时间戳：

```
$date = date('Y-m-d', $timestamp); 
```

使用 FROM_UNIXTIME() 将时间戳直接传递给 MySQL：

插入用户日期值 ('', '$name', FROM_UNIXTIME($timestamp))

# c# - ASP：出现菜单错误

> ID：16189125
> 
> 赞同：3
> 
> 时间：2013-04-24T10:04:13.167
> 
> 标签：c#, asp.net

当我在 IE 10 而不是 IE 9（之前安装的）中使用 asp 菜单时，我收到 SCRIPT5009: WebForm_GetElementByTagName is undefined 错误。

当我试图找到它时，我发现这是因为在生成 WebResource.axd 时它没有此方法的定义。

在进一步的发现中，我发现 .net 无法识别 IE 10，因为在浏览器文件中它的条目丢失了。

因此，为此我们有可用的补丁来解决这个问题，但是我想添加任何 javascript 或代码来添加 WebForm_GetElementByTagName 的定义或解决错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:40:30.757

Scott Hanselman前段时间谈到[了这个问题。](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)如果您不想安装补丁，则必须使用 Greg Smalter 在评论中建议的解决方法：在事件或指令中将[`Page.ClientTarget`属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.clienttarget.aspx)设置为“uplevel” 。`Page_Init``<%@ Page ... %>`

# java - 使用 InputStream 通过 TCP 套接字接收多个图像

> ID：16189128
> 
> 赞同：0
> 
> 时间：2013-04-24T10:04:21.357
> 
> 标签：java, sockets, tcp, inputstream

每次从相机捕获图像时，我都会尝试将多张图像从我的 android 手机自动发送到服务器（PC）。

问题是该`read()`功能仅在第一次阻塞。因此，从技术上讲，只有一张图像被接收并完美显示。但是之后`is.read()`返回时`-1`，此函数不会阻塞，并且无法接收多个图像。

服务器的代码很简单

```
while (true) {
    InputStream is = null;
    FileOutputStream fos = null;
    BufferedOutputStream bos = null;

    is = sock.getInputStream();

    if (is != null)
        System.out.println("is not null");

    int bufferSize = sock.getReceiveBufferSize();

    byte[] bytes = new byte[bufferSize];
    while ((count = is.read(bytes)) > 0)
    {
        if (filewritecheck == true)
        {
            fos = new FileOutputStream("D:\\fypimages\\image" + imgNum + ".jpeg");
            bos = new BufferedOutputStream(fos);
            imgNum++;
            filewritecheck = false;
        }
        bos.write(bytes, 0, count);
        System.out.println("count: " + count);
    }
    if (count <= 0 && bos != null) {
        filewritecheck = true;
        bos.flush();
        bos.close();
        fos.close();
    }
} 
```

接收到图像后的输出是

```
is not null
is not null
is not null
is not null
is not null
is not null
is not null
is not null
...
...
...
... 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:04:04.773

如果你想在同一个流上接收多个图像，你应该建立某种协议，例如：读取一个表示每个图像的字节数的 int。

```
<int><b1><b2><b3>...<bn> <int><b1><b2><b3>...<bn> ... 
```

然后你可以这样读取每张图片：

```
...
is = sock.getInputStream();
BufferedInputStream bis = new BufferedInputStream(is);

if (is != null)
    System.out.println("is not null");

while (true) {
    // Read first 4 bytes, int representing the lenght of the following image
    int imageLength = (bis.read() << 24) + (bis.read() << 16) + (bis.read() << 8) + bis.read();

    // Create the file output
    fos = new FileOutputStream("D:\\fypimages\\image" + imgNum + ".jpeg");
    bos = new BufferedOutputStream(fos);
    imgNum++;

    // Read the image itself
    int count = 0;
    while (count < imageLength) {
        bos.write(bis.read());
        count += 1;
    }
    bos.close();
} 
```

请注意，您还必须修改发送者，并将 imageLength 放在与接收它相同的字节顺序中。

另请注意，一次读取和写入一个字节并不是最有效的方法，但它更容易，并且缓冲流可以处理大部分性能影响。

# symfony - Symfony2 | 从响应/转发中隐藏/删除标题

> ID：16189134
> 
> 赞同：6
> 
> 时间：2013-04-24T10:04:45.480
> 
> 标签：symfony, header, hide, response, forward

我试图将 2 个控制器结果放在一个控制器中，所以我使用`'$response = $this->forward('Bundle:Controller:functionXXX');`'.

在控制器“ `functionXXXAction`”中，我使用 renderView 返回响应。

问题是**forward 函数**在页面顶部返回此标题：

```
"HTTP/1.0 200 OK Cache-Control: no-cache Date: Wed, 24 Apr 2013 09:56:50 GMT" 
```

任何解决方案可以将其从页面中隐藏？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-05T22:56:38.323

这个问题有点老了，但也许将来有人会寻找答案。要摆脱标题，您只需调用： $response = $this->forward('Bundle:Controller:functionXXX'); **$response->getContent();**

# printing - StartDocPrinter(hPrinter, 1, di) 返回 false

> ID：16189135
> 
> 赞同：0
> 
> 时间：2013-04-24T10:04:52.883
> 
> 标签：printing

我正在尝试将原始数据打印到打印机。我从[http://support.microsoft.com/kb/322090获得了我的代码](http://support.microsoft.com/kb/322090)

在代码段...

```
 Dim di As New DOCINFOW

    With di

        .pDocName = "My Visual Basic .NET RAW Document"        
        .pDataType = "TEXT"
        .pOutputFile = vbNull
    End With

 If OpenPrinter(szPrinterName.Normalize(), hPrinter, IntPtr.Zero) Then
        If StartDocPrinter(hPrinter, 1, di) Then
            If StartPagePrinter(hPrinter) Then
                bSuccess = WritePrinter(hPrinter, pBytes, dwCount, dwWritten)
                EndPagePrinter(hPrinter)
            End If
            EndDocPrinter(hPrinter)
        End If
        ClosePrinter(hPrinter)
    End If 
```

第一个 if 返回 TRUE 但**If StartDocPrinter(hPrinter, 1, di) Then**返回 FALSE，这就是无法满足进一步嵌套 if 的原因。我已经在这个问题上工作了几个小时搜索等无济于事。碰巧遇到同样问题的任何人都可能有解决方案。谢谢你。

# javascript - Backbone.js 从集合中获取上一个视图

> ID：16189138
> 
> 赞同：0
> 
> 时间：2013-04-24T10:04:55.480
> 
> 标签：javascript, backbone.js, underscore.js

现在我明白这可以通过从它的模型中引用一个视图来实现。但是，我试图坚持 Backbone.js 的“最佳实践”，因为模型-> 视图通常是一对多的关系，这被认为是糟糕的实践。

我遇到的问题是这样的（代码示例是为了帮助您可视化问题）：

我有一组分组视图。每个分组的视图数组包含来自多个集合的视图。例如，

```
var views; // Assume views is pre-populated with an array of views, each view's model may be stored in a different collection.

var viewGroups = _.groupBy(views, function(view) {
    return view.model.attributes.timestamp; // Unix timestamp for example
}); 
```

当我遍历分组视图时，我需要访问模型的视图，该视图直接位于其集合中的每个视图模型之前。

我可以像这样访问集合中的先前模型：

```
_.each(viewGroups, function(viewGroup) {
    _.each(viewGroup, function (view) {
        var model = view.model;
        var collection = model.collection;
        var previousModel = collection.at(collection.indexOf(model) - 1);
    });
}); 
```

但是由于模型与它的视图没有从属关系，我无法找出哪些视图订阅了集合中的前一个模型。

`var previousModelsViews = ???`

按照模型不了解视图的设计模式，我将如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:44:54.020

您不需要知道视图。只需在视图中添加一个自定义事件侦听器：

看法：

```
initialize : function(){
  this.model.on('customAction', this.customAction);
},
customAction : function(){
   //here you could do the DOM manipulation that you need on your previous view
} 
```

在您的代码中添加以下内容：

```
var previousModel = collection.at(collection.indexOf(model) - 1);
previousModel.trigger('customAction'); 
```

**更新：更新您的要求后：** 我仍然认为一切都可能与事件有关，只是在上一个视图中调度其他事件：

看法：

```
initialize : function(){
  this.model.on('customAction', this.customAction);
  this.model.on('PreviousWindowSize', this.previousSizeReceived);
},
//Previews View will arrive here 
customAction : function(nextModel){
   nextModel.trigger('PreviousWindowSize', {width: this.$el.width()});
},
//Current View will receive the size of the previous View here
previousSizeReceived : function(size){
   console.log(size);
} 
```

在你的代码上添加这个（检查我在触发器中添加了以前的模型）：

```
var previousModel = collection.at(collection.indexOf(model) - 1);
previousModel.trigger('customAction', previousModel); 
```

# php - 发送和接收比特币交易

> ID：16189139
> 
> 赞同：3
> 
> 时间：2013-04-24T10:04:56.237
> 
> 标签：php, bitcoin

如何使用比特币地址发送和接收交易。
我正在使用[这个网址](http://blockchain.info/api/blockchain_wallet_api)。
我只有用于发送和接收的比特币地址。
我也没有我的钱包帐户。

我使用了下面的代码。

```
$to = // Bitcoin address1
$from = // Bitcoin address2
$json_url = "https://blockchain.info/merchant/d15dea6639d24b81e5caefad8aa4b0c6831cdccf1c21f8c234fd568d40e4238d/payment?to=$to&amount=5000&from=$from"; 
```

我得到了以下错误。

```
"You must provide a recipient address" 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T21:41:05.437

您需要在 blockchain.info 有一个钱包，以便使用“我的钱包 API”发送/接收资金：[https ://blockchain.info/api/blockchain_wallet_api](https://blockchain.info/api/blockchain_wallet_api)

如果你打算使用这个 API，我有一个 PHP 类用于与我的区块链钱包进行交互：[https](https://github.com/lukesims/Blockchain-API-PHP-Class) ://github.com/lukesims/Blockchain-API-PHP-Class你可能会发现它很有用。

如果您只想接收付款，请使用不同的“接收付款 API”。我不能发布超过 2 个链接，但区块链开发者部分在两者之间做出了非常明显的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T16:06:22.337

只需填写以下信息……您需要一个 BlockChain 帐户来发送付款。但是，您不需要帐户即可接收。这只是发送，而不是回调。如果您正在寻找回调，请进一步阅读文档。

[https://blockchain.info/merchant/](https://blockchain.info/merchant/) $guid/payment?password=$main_password&second_password=$second_password&to=$address&amount=$amount&from=$from&shared=$shared&fee=$fee¬e=$note

```
<?php

$guid="GUID_HERE";
$firstpassword="PASSWORD_HERE";
$secondpassword="PASSWORD_HERE";
$amounta = "10000000";
$amountb = "400000";
$addressa = "1A8JiWcwvpY7tAopUkSnGuEYHmzGYfZPiq";
$addressb = "1ExD2je6UNxL5oSu6iPUhn9Ta7UrN8bjBy";
$recipients = urlencode(json_encode(
    array(
        $addressa => $amounta,
        $addressb => $amountb
    )
));

$json_url = "https://blockchain.info/merchant/$guid/sendmany?password=$firstpassword&second_password=$secondpassword&recipients=$recipients";

$json_data = file_get_contents($json_url);

$json_feed = json_decode($json_data);

$message = $json_feed->message;
$txid = $json_feed->tx_hash;

?> 
```

# c# - OleDbCommand 和 Unicode 字符

> ID：16189144
> 
> 赞同：0
> 
> 时间：2013-04-24T10:05:12.083
> 
> 标签：c#, sql, unicode, ado.net, oledbcommand

我有一个使用 OleDbCommand 运行大量查询的应用程序。每个查询都是纯 SQL 文本，命令不使用参数。

现在，应用程序应该支持中文字符，我不想通过在要指定的字符串前面添加 N 字符来更改每个查询。

我正在尝试做类似的事情，但它不起作用：

```
 OleDbCommand command = new OleDbCommand("?", connect);
        command.CommandType = CommandType.Text;
        command.Parameters.AddWithValue("query", qry);
        OleDbDataAdapter da = new OleDbDataAdapter(command); 
```

其中 qry 是在每个字符串前面没有 N 字符的情况下要执行的查询。

我真的不想改变每一个查询，那会是一团糟。

你有我的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:59:02.623

您将需要设置参数的数据类型，使用 Add 重载之一或使用 new 创建参数，设置属性，然后将其添加到集合中。

以下是 OleDb 数据类型：

[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbtype.aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbtype.aspx)

VarWChar 是 unicode

如果您使用的是 SqlServer，那么您可能希望使用本机驱动程序，这样您就可以获取 Sql 数据类型，它具有更准确的匹配。

如果您要实现跨数据库兼容性，那么您可能会朝着相反的方向前进并使用 System.Data.Common 数据类型 DbType.XXX，参考[http://msdn.microsoft.com/en-us/library/system。 data.dbtype.aspx](http://msdn.microsoft.com/en-us/library/system.data.dbtype.aspx) （或 ODBC 和它的类型枚举，因为 MS 表示他们正在逐步淘汰 OleDb 作为支持 ODBC 的技术）

# excel - vba：使用单元格范围定义系列值

> ID：16189146
> 
> 赞同：0
> 
> 时间：2013-04-24T10:05:14.403
> 
> 标签：excel, vba

我想使用范围定义系列中的值。

```
.SeriesCollection(1).Values = Sheets("Data").Range(Cells(2, col), Cells(1002, col)) 
```

然而，这不起作用。它失败并出现错误 1004。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:16:53.903

没有找到细胞。它现在与

```
Sheets("Data").Range(Sheets("Data").Cells(2, col), Sheets("Data").Cells(1002, col)) 
```

# c# - 将 guiText 隐藏在游戏对象后面

> ID：16189147
> 
> 赞同：4
> 
> 时间：2013-04-24T10:05:22.757
> 
> 标签：c#, unity3d

我的应用顶部有这个HUD，它显示了分数（左上角）、一个关于按钮（右上角）和中间的时间线。随着时间的流逝，时间线“滚动”。

我想在时间线上画一些数字来显示它所代表的年份。我目前正在使用 GuiText 来做这件事。不幸的是，我注意到了这一点，而时间线栏位于场景中左上角的对象后面。GUIText 保留在该对象上。

GUIText 是否总是绘制在其他所有内容之上，还是有办法将其隐藏在游戏对象后面？

**更新：**

经过一些测试/研究后，我得出的结论是，可能只有一种方法可以让 GUIText 不出现在某些对象的前面。

如果一个人希望他们的文本（或任何类型的 GUI 内容）位于某些对象的后面，则必须使用至少一个额外的摄像头。

第二个摄像头应设置为“仅深度”，并且深度值低于主摄像头。这样，主摄像头绘制的所有内容都将位于第二个摄像头绘制的所有内容之上。

使用剔除蒙版并设置您希望在不同图层中显示/隐藏的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:24:41.227

您应该能够使用着色器来做到这一点。

只需将对象的深度值从顶点着色器传递到 gui 的像素着色器。使用此值确定像素的 alpha 值。

使用您自己的游戏引擎并可以访问代码时，有很多方法可以做到这一点，但 Unity 会在这里限制您。我不确定 Unity 是否允许您将像素着色器应用于 GUI。如果没有，请考虑在 gui 的这个特定部分使用广告牌并做类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:53:01.200

经过一些测试/研究后，我得出的结论是，可能只有一种方法可以让 GUIText 不出现在某些对象的前面。

如果一个人希望他们的文本（或任何类型的 GUI 内容）位于某些对象的后面，则必须使用至少一个额外的摄像头。

第二个摄像头应设置为“仅深度”，并且深度值低于主摄像头。这样，主摄像头绘制的所有内容都将位于第二个摄像头绘制的所有内容之上。

使用剔除蒙版并设置您希望在不同图层中显示/隐藏的对象。

# c# - 将方法附加到c#中的事件时如何传递参数

> ID：16189148
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:05:28.210
> 
> 标签：c#, events, delegates

我正在尝试将参数发送到在附加事件侦听器时由事件调用的方法，我可以在匿名方法中创建参数，该方法可以正常工作但是我理想情况下希望使其更简洁，如下例所示，这个引发以下编译器错误：

> 运算符“+=”不能应用于“System.EventHandler”和“void”类型的操作数

```
ConfigFileWritten += (sender, args) =>
{
    string prefix = "IFMDE";
    bool enabled = true;

    SetConfigInterfaceEnabled(prefix, enabled);
};

//this line is throwing a compiler error 
ConfigFileWritten += SetConfigInterfaceEnabled("",true); 
```

是否可以按照我的建议重构代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:09:27.673

不是这样的。您在那里所做的是尝试将*调用结果* `SetConfigInterfaceEnabled`附加为事件处理程序，这当然是不可能的（结果必须是`EventHandler`委托，但它只是`void`）。

你能做的是

```
ConfigFileWritten += (s, e) => SetConfigInterfaceEnabled("",true); 
```

这里的事件处理程序是一个 lambda 函数，具有适当的签名（采用两个隐式类型参数），它依次调用`SetConfigInterfaceEnabled`. 它的唯一目的是使签名适应`SetConfigInterfaceEnabled`预期的`EventHandler`。

为了完整起见，我应该提一下，虽然需要这样做是非常不寻常的，但您可以使用您提出的语法，如果`SetConfigInterfaceEnabled`是创建委托的工厂方法：

```
EventHandler SetConfigInterfaceEnabledDelegate(string s, bool b)
{
    return (o, e) => SetConfigInterfaceEnabled(s, b);
}

ConfigFileWritten += SetConfigInterfaceEnabledDelegate("", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:10:40.220

您可以通过不为按值传递的参数使用变量来使其更简洁，如下所示：

```
ConfigFileWritten += (sender, args) => {
    SetConfigInterfaceEnabled("IFMDE", true);
}; 
```

当编译器看到上述内容时，它不会立即调用`SetConfigInterfaceEnabled`。相反，它创建了一个可以在运行时调用的对象，这样当你调用它时，就会调用它`SetConfigInterfaceEnabled`。换句话说，`=>`创建一个委托，让您推迟对 的调用`SetConfigInterfaceEnabled`。

然而，当编译器看到这个

```
ConfigFileWritten += SetConfigInterfaceEnabled("IFMDE", true); 
```

它将其解释为`SetConfigInterfaceEnabled` *立即*调用的指令，并使用从它返回的委托作为事件处理程序。当然这是不可能的，因为`SetConfigInterfaceEnabled`不返回委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:14:10.020

如果`ConfigFileWritten`事件处理程序是您自己的类型，您可以在事件上升时传递参数。派生您自己的事件参数类型`EventArgs`并传递给您参数。它可以为您提供更大的灵活性，并且您不必在事件处理程序中硬编码参数。

# php - 在选择语句中使用 varchar - 即 bob46

> ID：16189150
> 
> 赞同：-2
> 
> 时间：2013-04-24T10:05:33.210
> 
> 标签：php, sql, select, preg-replace

我希望使用 varchar 让 select 语句工作，我知道如何使用 'bob' 设置文本，如果没有 ''

基本上我需要它以文本和数字的形式选择使用它：

```
SELECT * FROM customer WHERE name=bob46 
```

但它不会选择，我的实际代码基于英国邮政编码，最多包含 8 个字符，每次都有一个空格。

我需要任何特殊值吗？我的也来自一个表单，所以它会以 $searchquery 的形式出现，就像它会从中提取数据的字符一样。

我已经做到了，所以所有项目都应该显示，但我明白了

> " SELECT * FROM customer WHERE postcode LIKE '&cr5 3eg&' "

每次出现

我还使用 pregreplace 来确保正确使用数字和文本，我该如何制作它以便注册邮政编码之间的空间？所以它认为它是 s3 5rf 而不是 s35rf ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:44:24.267

我下面的答案是针对 MySQL 的。这[与 SQL 类似](https://stackoverflow.com/questions/9072782/sql-like-and-like)。

* * *

这`$searchquery`是一个`string`代表英国的邮政编码。

1）此查询返回匹配邮政区域的客户：

```
SELECT * FROM customer WHERE postcode = '{$searchquery}' 
```

2) 如果你只给出 a 的开头`postcode`，你可以使用这个查询：

```
SELECT * FROM customer WHERE postcode LIKE '{$searchquery}%' 
```

3）如果你想匹配任何地方，请使用它`postcode`：

```
SELECT * FROM customer WHERE postcode LIKE '%{$searchquery}%' 
```

`$searchquery`在进行搜索之前，您可以根据自己的喜好解析。例如，如果表单输入是“A9 9AA”，并且您想要搜索所有`postcode`使用“A9”的客户，请使用例如[explode函数](http://php.net/manual/en/function.explode.php)从输入中获取“A9”并执行查询n：o 2。

我不知道你的例子`WHERE postcode LIKE '&cr5 3eg&' "`来自哪里。[有关正确的 MySQL 语法，请参阅手册](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)：使用“%”或“_”，而不是“&”。

笔记。我对英国邮政编码一无所知。[我从这里](http://www.hexcentral.com/articles/sql-postcodes.htm)查看了示例邮政编码。

# java - 不从 ArrayList 中删除对象

> ID：16189160
> 
> 赞同：0
> 
> 时间：2013-04-24T10:06:28.483
> 
> 标签：java, arraylist, removeall

在此代码中，如果某个值为零 [Portfolio.total.get(k).get(c).current_quantity==0]，我需要删除一个对象。

```
for(int k=0;k<Run_process.total_Agents;k++){
        for(int c=0;c<Portfolio.total.get(k).size();c++){
            if(Portfolio.total.get(k).get(c).current_quantity==0){
                System.out.println("delete Agent"+k+" "+Portfolio.total.get(k).get(c).stocks.stock_Id);
                Portfolio.total.get(k).remove(c);
                //remove from portfolio if there is no quantity
            }
        }
        //Portfolio.total.get(k).trimToSize();
    }
    //Portfolio.total.trimToSize();
    for(int k=0;k<Run_process.total_Agents;k++){
        for(int c=0;c<Portfolio.total.get(k).size();c++){
            if(Portfolio.total.get(k).get(c).current_quantity==0){
                System.out.println("still zero quantity Agent"+k+" "+Portfolio.total.get(k).get(c).stocks.stock_Id);
                //remove from portfolio if there is no quantity
            }
        }
        //Portfolio.total.get(k).trimToSize();
    } 
```

问题是，在我再次运行此循环以检查一切是否正常但有时似乎 1-3 个值虽然 [Portfolio.total.get(k).get(c).current_quantity==0] 仍在arraylist。下次运行此代码时，此对象将被正确删除。总而言之，下次运行此代码时会删除一些值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:09:21.417

当您删除某些内容时，所有以下索引都会减少 1。增加循环计数器将跳过下一个元素。他们是你所缺少的。

你需要做这样的事情：

```
Portfolio.total.get(k).remove(c); // you already have this line
c--; 
```

另外，为了便于阅读，我更喜欢使用 an `Iterator`and it's`remove()`方法。这样您就不必担心索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:15:34.880

您不应该在向前迭代数组时从数组中删除项目。问题可能是因为两个直接数量的项目一个接一个

例如 item[0].current_quantity 为 0 并且 item[1].current_quantity 为 0

因此，如果您遍历列表，item[0] 将被删除，item[1] 将成为 item[0]。现在你增加你的索引，并跳过你以前的项目[1]。这就是为什么它仍在您的列表中。

如果你真的想在迭代时迭代你的列表并删除项目，你应该倒着做：

```
for(int c = Portfolio.total.get(k).size() - 1; c > 0;c--) {
    if(Portfolio.total.get(k).get(c).current_quantity==0) {
        Portfolio.total.get(k).remove(c);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:10:01.643

这是因为您跳过了许多项目！当你删除一个对象时，列表会变小，所以你不会检查之后的对象，每次删除一个对象后，做一个`c--`，它会解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:14:20.157

您正在访问一个列表并在 for 循环中从同一列表中删除一个项目。这可能在很多方面都存在问题。你应该更好地使用`Iterator`这个：

```
 for(Iterator<YourObj> it=Portfolio.total.get(k).iterator(); it.hasNext();) {
      YourObj obj = it.next();
      if(obj.current_quantity==0){
            System.out.println("delete Agent"+k+" "+obj.stocks.stock_Id);
            it.remove();
            //remove from portfolio if there is no quantity
      }
 } 
```

# reporting-services - 在报告正文上使用渐变而不是一种颜色？

> ID：16189161
> 
> 赞同：1
> 
> 时间：2013-04-24T10:06:29.423
> 
> 标签：reporting-services

我有一份报告，我希望能够填充背景，使其底部更暗，并逐渐向顶部变亮。

我知道这可以在图表中完成，但我想在报告本身上完成。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T08:29:56.920

我不知道这是否是本机可能的......您可能已经在检查报告正文的背景颜色属性时看到自己不能指定渐变或类似的东西，只有颜色，仅此而已 - 它将均匀涂抹于全身。矩形也一样。

您也许可以指定具有所需模式的背景图像，但谁知道 SSRS 将如何使用所有其他报表元素呈现它？在某些情况下它可能工作得很好，但我想它不会在所有渲染器中工作。

不幸的是，我只是不认为有一个好的方法可以做到这一点，对不起。

# android - onPostExecute() 在 doInBackground() 之后不执行

> ID：16189162
> 
> 赞同：0
> 
> 时间：2013-04-24T10:06:29.667
> 
> 标签：android, android-asynctask

我有这个代码

```
public class AsyncClassTest extends Activity {

String strMessage;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    new MyClass().execute();

    Toast.makeText(AsyncClassTest.this, strMessage, Toast.LENGTH_LONG)
            .show();

}

public class MyClass extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
        return "Hello world!!!";
    }

    @Override
    protected void onPostExecute(String result) {
        strMessage = result;
    }
} 
```

}

以及何时运行，在`new MyClass().execute();`它显示`strMessage`为 null 并且在显示 toast 代码进入`onPostExecute()`方法之后，如何使此代码运行并在之后显示消息`new MyClass().execute();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:15:05.373

```
public class AsyncClassTest extends Activity {

String strMessage;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    new MyClass().execute();

}

public class MyClass extends AsyncTask<Void, Void, String> {
    @Override
    protected String doInBackground(Void... arg0) {
        return "Hello world!!!";
    }

    @Override
    protected void onPostExecute(String result) {
        strMessage = result;
        Toast.makeText(AsyncClassTest.this, strMessage, Toast.LENGTH_LONG).show();
    }

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:12:31.573

```
Toast.makeText(AsyncClassTest.this, strMessage, Toast.LENGTH_LONG)
    .show(); 
```

将其删除`onCreate`并写入`onPostExecute`

在你的代码中，Toast 在你`AsyncTask`进入 Action 之前执行，永远记住那`AsyncTask`是一个背景`thread`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:15:50.773

`AsyncTask`顾名思义，是异步的。这意味着它不必在下一行之前执行

如果任务完成*后*有操作要做，必须在`onPostExecute`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:11:26.593

您正在将字符串的值设置为`AsyncTask`. 当您调用 execute() 时，它将异步运行（一个单独的线程），并且 Toast 很可能会在设置字符串的值之前显示。

基本上，execute() 不会“等待”`onPostExecute`被调用。它产生一个单独的线程，您的`onCreate()`方法继续显示具有旧值的 Toast。

尝试将其移动`Toast.makeText`到`onPostExecute`命令中以查看它的工作。

此外，如果您真的想`onPostExecute`在继续执行 Toast 之前完成执行。你真的不应该`AsyncTask`为此使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T10:11:43.370

```
@Override
    protected void onPostExecute(String result) {
        strMessage = result;

 Toast.makeText(AsyncClassTest.this, strMessage, Toast.LENGTH_LONG)
            .show();

    } 
```

`onPostExecute(Result)`，在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给这一步

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T10:12:25.833

顾名思义，`AsyncTask`它是异步运行的，所以你不能只`execute()`期望它在下一行代码被调用之前返回。因此，您应该创建`Toast`内部`onPostExecute()`（或在被调用的方法内部`onPostExecute()`），因为当`onPostExecute()`被调用时，您肯定知道任务已经完成。

# asp.net - asp.net 发布和非发布代码部署

> ID：16189167
> 
> 赞同：1
> 
> 时间：2013-04-24T10:06:43.560
> 
> 标签：asp.net, .net, asp.net-mvc, webforms

我的发布站点部署在不同的专用服务器上。通常我们从客户端接收页面级别的更改，这需要更改客户端和服务器端代码，我们首先在本地完成更改，然后我在服务器上部署带有服务器端代码的页面，而无需完整发布构建代码，因为我的客户一次又一次地要求进行微小的更改，当客户对页面更改感到满意时，我将发布版本放在服务器上。我想知道发布和非发布代码部署的主要区别是什么？当我将带有 aspx.cs 的 aspx 放在服务器上时，它工作正常，那么为什么部署发布版本很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:07:29.217

> 当我将带有 aspx.cs 的 aspx 放在服务器上时，它工作正常，那么为什么部署发布版本很重要。

这主要是效率问题。当您将服务器上的 ASPX 和 ASPX.cs（代码隐藏）文件并排放置在一起时，当有人第一次请求该页面时，该代码隐藏文件将被编译成它自己的程序集（.dll 文件）。您实际上是在将源代码推送到您的服务器，而不是编译后的代码。如果对每个 ASPX 文件执行此操作，最终可能会得到数十到数百个单独的程序集（每个 ASPX 文件一个程序集），并且一个缺点是编译器首先将源代码转换为二进制 dll 时的延迟。另一个是您的服务器必须管理大量程序集而不仅仅是一个程序集。

部署发布版本时，编译器会将所有代码隐藏文件合并到一个程序集中。它还会稍微改变 ASPX 文件中的 @Page 指令。您最终没有将源代码部署到服务器，只有一个二进制 DLL，这样效率更高。

因此，如果您只进行 ASPX 更改（例如样式、纯 HTML 等），则可以单独推出这些更改，只要 @Page 指令与预编译和已部署的代码隐藏匹配。但是，当您同时更改 ASPX 和代码隐藏时，您应该进行发布，因为它会导致不同的合并代码隐藏程序集，必须将其部署到服务器上的 bin 文件夹。

有时我要做的是将 ASPX 和代码隐藏一起部署以在服务器上测试某些东西，一旦我确定它可以工作，返回并执行发布部署以将代码隐藏更改烘焙到合并的 DLL 中。然后只需将它们推送到文件（dll 和 ASPX），删除代码隐藏源，然后完成。

# sql - Oracle如何取消连接一个数字

> ID：16189170
> 
> 赞同：1
> 
> 时间：2013-04-24T10:06:50.910
> 
> 标签：sql, oracle

我在运行程序之前连接了一个数字，因为我需要该程序在数字前面使用 0。

所以要连接我做

```
update code_temp
set code=0 || code 
```

然后我需要在程序运行后撤消此操作，是否有一种简单的方法可以删除代码开头的 0？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:09:27.217

您可以做一个子字符串来忽略第一个字符：

```
UPDATE code_temp
SET code = substr(code, 2) 
```

# c# - 将 Windows 8 Store 数据导出到 Excel 文件

> ID：16189171
> 
> 赞同：0
> 
> 时间：2013-04-24T10:06:51.627
> 
> 标签：c#, windows-store-apps, winrt-xaml, export-to-excel

我使用 XAML/C# 和 SQLite 数据库编写了一个 Windows 8 Store 应用程序。

在应用程序中，我需要创建一个 Excel 文件并从 SQLite 数据库中导出数据。我不知道如何启动它，即使 Windows 商店应用程序支持它。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:13:06.580

这是一个示例，用于将 ListView 中显示的数据导出到 csv 文件。 [这](http://code.msdn.microsoft.com/windowsapps/Export-To-CSV-Sample-b31b50cf)可以帮助你

祝你好运！

# html - th标签中Firefox中的高度问题

> ID：16189174
> 
> 赞同：-3
> 
> 时间：2013-04-24T10:07:04.093
> 
> 标签：html, css

我遇到了一个问题。这是小提琴[http://jsfiddle.net/ardeezstyle/a2bPk/1/](http://jsfiddle.net/ardeezstyle/a2bPk/1/)

我希望每列的高度相等。列标题中的文本可以是自由流动的、环绕的。它们可以换成多行。

这是代码的一部分，它让我在 mac 和 windows 中的 chrome 和 safari 中实现了这一点。

```
margin:auto;
height:100%;
min-height:100%; 
```

我已经对问题进行了更正。我希望每个标签的内容具有相同的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:09:16.017

In your code you are writing `bg color` for `div` not for `th` that is why it is taking auto height.

Why don't you use like this

```
thead tr{
    background: #ff0;
} 
```

**[DEMO](http://jsfiddle.net/a2bPk/2/)**

# javascript - Datatables.js 将单元格值投影到构面中

> ID：16189183
> 
> 赞同：0
> 
> 时间：2013-04-24T10:07:23.517
> 
> 标签：javascript, jquery-plugins, datatables

假设我有一张表格，列出了产品所属的产品和类别。一种产品可以有一个或多个类别，例如：

**产品**

```
+----+----------+---------------+
| id | name     | category      |
+----+----------+---------------+
| 1  | 256GBSSD | Mobile,Mac,PC |
+----+----------+---------------+
| 2  | 8GBRAM   | Mac,PC        |
+----+----------+---------------+ 
```

我正在创建方面以根据产品类别过滤掉产品。我正在使用[Datatables.js](http://datatables.net/index)。
我想将逗号分隔的类别投影到各个方面，以便 Mac 的过滤器列出上表中的两个产品，即使它们有其他类别。

我如何告诉 datatables.js 当涉及到第三列时，它应该将逗号分隔列表中的每个类别列为可搜索且唯一（无重复）的类别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:13:27.020

看来这可能会解决它：[https ://github.com/vedmack/yadcf](https://github.com/vedmack/yadcf)

他们的示例看起来正是您想要的：http: [//jsbin.com/esezof/1](http://jsbin.com/esezof/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T12:39:08.973

通过一些调整让它开箱即用。
事实证明，[过滤器 API](http://datatables.net/api)采用的参数比我最初看到的要多。

`oTable.fnFilter(searchTerm, columnId, useRegularExpressions, useSmartFilter);`

如果`useRegularExpressions`设置为 false 并且`useSmartFilter`为 true，则如果列*包含*，`searchTerm`则将其作为匹配项返回。

我要做的只是确保在搜索包含 CSV 的列时提供了正确的参数。
我承认我必须查看 @Ove 提供的 API (+1) 以了解如何为方面收集不同的项目 - 但它已经由`fnGetColumnData` [插件](http://datatables.net/plug-ins/api#functions)实现，只需要稍作调整。

# charts - Gnuplot：使用自定义点形状，带有图例条目

> ID：16189187
> 
> 赞同：9
> 
> 时间：2013-04-24T10:07:35.430
> 
> 标签：charts, gnuplot, symbols, shape

Gnuplot 提供了许多用于散点图的点样式，例如十字、星形、正方形、圆形等。可用的点类型可以通过使用命令来[演示。](http://i.stack.imgur.com/zojYF.png)`test`

但是，对于特定的应用程序，我需要不同的符号，并且我需要显示这些符号的图例条目。

特别是，我需要四个以上可以在轮廓和填充状态下绘制的符号（例如指向左侧或右侧的三角形、平行四边形或非方形矩形）。

有许多方法可以使用其他形状（每种方法都对终端有一些要求，例如 unicode 支持）：

*   [使用 PNG 图像](http://fityk-tutorials.blogspot.de/2010/11/gnuplot-cygwin-and-gnuplot-custom.html)
*   用于`set label '□' at 3,4`每个点，其中 □ 可以替换为任何 unicode 字符，例如◁、▶、▭、▮等）
*   使用`plot ... with labels`并提供 unicode 字符作为标签

所有这些方法的问题是我无法获得正确的图例（键）条目，包括符号。

我考虑过自己绘制图例，但我认为这不可行的原因有两个：

*   为了将图例绘制在图表的右侧（或图表内的右下方），我需要计算图例的宽度，这取决于字体。
*   一些图可能同时包含一条线和一个点（如`using linespoints`常规 Gnuplot 点类型），它们都必须显示在图例中。

我正在以编程方式生成 Gnuplot 输入文件，因此明确列出所有点的方法（如`set label`上面提到的方法）或需要一些计算的方法是可以的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-03T11:56:53.587

这不会是一个答案，因为我要告诉你改变你的终端......我知道......

尚无法在 gnuplot 中添加用户定义的点形状，但 PostScript 终端允许大约 70 种不同的形状：![后记点类型](https://i.stack.imgur.com/mVNXW.jpg) [http ://www.cp.cmc.osaka-u.ac.jp/~fumiko/tips/gnuplot_pt.jpg](http://www.cp.cmc.osaka-u.ac.jp/~fumiko/tips/gnuplot_pt.jpg)

在下面的讨论中，他们声明没有添加用户定义点类型的通用机制。它们附带您在问题中提供的解决方案。 [https://groups.google.com/forum/?fromgroups=#!topic/comp.graphics.apps.gnuplot/in57UNxG2o0](https://groups.google.com/forum/?fromgroups=#!topic/comp.graphics.apps.gnuplot/in57UNxG2o0)

我认为实现您的目标的一种方法可能是

1.  使用 postscript 处理“人类可读”的 .ps 文件，使用默认点类型。
2.  “后处理”（=解析）.ps 文件（对我来说这听起来像 Inception），将旧时尚丑陋的默认点类型更改为您喜欢的类型，从 unicode 字符到家庭绘制的形状。
3.  ps2pdf 或 ps2somethingyoulike 处理后的 .ps 文件。

恐怕我将不得不面对同样的问题，所以如果您找到更简单的解决方案，请告诉全世界:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T20:14:43.303

如果有人想弄乱 postscriptp 路线，这里是一个简单的例子：

每个符号在 ps 文件中由名称定义（参见 Pascali 的答案中的表格），例如：

```
/BoxF  { 
      ....3 or 4 lines of terse code ...
        } def 
```

替换为您自己的定义：这是一个大写字母 Pi。

```
/BoxF {
 stroke gsave moveto    % required, this finishes prior line and moves to point
0 30 rmoveto  % nudge  symbol to get it centered properly
 /Symbol findfont 120 scalefont setfont (P) Cshow 
 grestore
     } def 
```

这个简单的例子可能需要为不同类型的图调整数字（字体大小）。

如果你想使用你的 postscript 解释器不知道的字体，你需要手动包含它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T10:09:05.507

与 Pascail 的回答类似，您也可以使用 SVG 而不是 Postscript 来执行此操作。

SVG 基于 XML，可能会也可能不会比 Postscript（使用 XML 库）更容易处理。它还支持unicode。

# c# - 无法解决“对象引用未设置为对象的实例”。在 DataTable.Rows.CopyTo

> ID：16189196
> 
> 赞同：0
> 
> 时间：2013-04-24T10:07:56.927
> 
> 标签：c#, object, reference, copy

我似乎无法理解为什么我得到：

> “你调用的对象是空的。”

这种情况下的错误：

```
 DataTable utenRomData;
    DataSet utenRomSet;

    private void InitDataUtenRom()
    {
        utenRomData = new DataTable("GjesterUtenRom");
        utenRomSet = new DataSet();

        utenRomData.Columns.Add(new DataColumn("FulltNavn"));
        utenRomData.Columns.Add(new DataColumn("StartDato"));
        utenRomData.Columns.Add(new DataColumn("AntallDager"));

        utenRomSet.Tables.Add(utenRomData);

        if (File.Exists("gjesteInfo.xml"))
            utenRomSet.ReadXml("gjesteInfo.xml");

        utenRomData.Rows.Add(gjestenavnInput.Text, datoInnsjekk.Text, antallDager.Text);

        utenRomSet.Merge(utenRomData);
        utenRomSet.WriteXml("gjesteInfo.xml");
    }

    DataTable medRomData;
    DataSet medRomSet;

    private void InitDataMedRom()
    {
        medRomData = new DataTable("GjesterMedRom");
        medRomSet = new DataSet();

        medRomData.Columns.Add(new DataColumn("FulltNavn"));
        medRomData.Columns.Add(new DataColumn("StartDato"));
        medRomData.Columns.Add(new DataColumn("AntallDager"));

        medRomSet.Tables.Add(medRomData);

        if (File.Exists("gjesteInfo.xml"))
            medRomSet.ReadXml("gjesteInfo.xml");

        DataRow[] temp = new DataRow[medRomData.Rows.Count]; 

        utenRomData.Rows.CopyTo(temp, 0); <- This is where I get the error!

        medRomSet.Merge(utenRomData);
        medRomSet.WriteXml("gjesteInfo.xml");
    } 
```

我正在尝试通过拖放将内容从表 utenRomData 移动到表 medRomData。有什么想法吗？

如何在 InitDataMedRom() 中实例化 utenRomData？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:10:43.487

貌似`utenRomData`没有实例。

您可以通过以下方式检查它是否具有值：

```
if (utenRomData != null) {
   utenRomData.Rows.CopyTo(temp, 0); 
   medRomSet.Merge(utenRomData);
   medRomSet.WriteXml("gjesteInfo.xml");
} 
```

要实例化一个`utenRomData`简单的新实例：

```
if (utenRomData == null) {
  InitDataUtenRom();
} 
```

# fabricjs - 如何在fabricjs中更新组的大小

> ID：16189201
> 
> 赞同：1
> 
> 时间：2013-04-24T10:08:06.520
> 
> 标签：fabricjs

在fabricjs 库中，类fabric.Group 提供了一个**.addWithUpdate(...)**方法，该方法*将对象添加到组中；然后重新计算组的尺寸、位置。*

有没有办法强制更新？

我正在使用 fabric.util.groupSVGElements(array_of_fabric_elements) 创建一个组，它不会更新其大小。

我已经尝试过 fabric.Group.setObjectsCoords()，但它会引发“不是函数”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T13:10:07.663

您使用哪个`fabric.js`版本？ `fabric.util.groupSVGElements`没有创造`fabric.Group`——它创造了`fabric.PathGroup`.

如果你想创建一个`fabric.Group`请使用：

```
var group = new fabric.Group([obj1, obj2, ...]);
canvas.add(group); 
```

如果你想从你的组中添加/删除对象，你可以这样做：

```
group.addWidthUpdate(object)/group.removeWidthUpdate(object) 
```

这两个函数都会重新计算组维度。

# sql-server - 在存储过程中使用 INSERT 语句时无法从结果集中检索值

> ID：16189202
> 
> 赞同：2
> 
> 时间：2013-04-24T10:08:09.580
> 
> 标签：sql-server, codeigniter

`ResultSet`在 codeigniter中，当在存储过程中使用 insert 语句时，我无法从 Microsoft sql server 中检索值。

当我使用这个程序时：

```
CREATE PROCEDURE prcTest AS
BEGIN
    select 'test' as test
END 
```

我在`ResultSet`. 但是当我使用这个程序时：

```
CREATE PROCEDURE prcTest AS 
BEGIN
    insert into test_prc values (2) 
    select 'test' as test
END 
```

我没有从 CodeIgniter 得到任何东西`ResultSet`。我`foreach($result->result_array() as $row)`用来获取`ResultSet`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:31:47.213

尝试这个 ：

```
insert into test_prc select 'test' as test 
```

# java - 如何通过 Java 中的收据打印机打印支票？

> ID：16189204
> 
> 赞同：4
> 
> 时间：2013-04-24T10:08:18.457
> 
> 标签：java, printing, receipt

我有**pos58 收据打印机**（中国制造的打印机），这台打印机支持**ESC-POS 命令**。我想在没有 JavaPos api 的情况下打印出 Java 支票。只是我不知道该怎么做。

有什么方法可以实现吗？或者图书馆是什么？或者有没有这样的例子？

感谢提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T21:28:40.710

在快速网络搜索后找到此实现，可能会有所帮助：[https ://code.google.com/p/escprinter/source/browse/trunk/net/drayah/matrixprinter/ESCPrinter.java?r=2](https://code.google.com/p/escprinter/source/browse/trunk/net/drayah/matrixprinter/ESCPrinter.java?r=2)

# html - 这个 CSS 是如何产生一个圆圈的？

> ID：16189208
> 
> 赞同：210
> 
> 时间：2013-04-24T10:08:31.443
> 
> 标签：html, css, css-shapes

这是CSS：

```
div {
    width: 0;
    height: 0;
    border: 180px solid red;
    border-radius: 180px;
} 
```

它是如何产生下面的圆圈的？

![在此处输入图像描述](https://i.stack.imgur.com/yTmLN.jpg)

假设，如果一个矩形宽度为 180 像素，高度为 180 像素，那么它将如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/nvK6a.jpg)

应用边界半径 30 像素后，它将如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/xEutT.jpg)

矩形变得越来越小，也就是说，如果半径大小增加，它几乎会消失。

那么，180 像素的边框如何`height/width-> 0px`变成半径为 180 像素的圆呢？

* * *

## 回答 #1

> 赞同：374
> 
> 时间：2013-04-24T10:15:11.453

> 一个高度/宽度-> 0px 的 180 像素的边框如何变成半径为 180 像素的圆？

让我们将其重新表述为两个问题：

## 在哪里`width`实际`height`应用？

让我们看一下典型盒子的区域（[来源](http://www.w3.org/TR/2012/CR-css3-background-20120724/#corners)）：

![W3C：典型盒子的区域](https://i.stack.imgur.com/9knOE.png)

和`height`仅`width`适用于内容，如果正在使用正确的盒子模型（没有怪癖模式，没有旧的 Internet Explorer）。

## 在哪里`border-radius`申请？

`border-radius`应用于边界边缘。如果既没有填充也没有边框，它将直接影响您的内容边缘，这将导致您的第三个示例。

## 这对我们的边界半径/圆意味着什么？

这意味着您的 CSS 规则会生成一个仅包含边框的框。您的规则规定，此边框每边的最大宽度应为 180 像素，而另一方面，它的最大半径应相同：

![示例图片](https://i.stack.imgur.com/CnjBH.png)

在图片中，您的元素（小黑点）的*实际内容实际上是不存在的。*如果你没有申请任何`border-radius`你最终会得到绿色框。给`border-radius`你蓝色圆圈。

如果将`border-radius` [only 应用于两个角](http://jsfiddle.net/9qvgG/)，则更容易理解：

```
#silly-circle{
    width:0; height:0;
    border: 180px solid red;
    border-top-left-radius: 180px;
    border-top-right-radius: 180px;
} 
```

![边框仅适用于两个角](https://i.stack.imgur.com/WU9aP.png)

由于在您的示例中，所有角/边界的大小和半径都相等，因此您得到一个圆。

## 更多资源

### 参考

*   W3C：[CSS 背景和边框模块 3 级](http://www.w3.org/TR/2012/CR-css3-background-20120724/)（特别是[5。圆角](http://www.w3.org/TR/2012/CR-css3-background-20120724/#corners)）

### 示威

*   请打开下面的演示，它显示了如何`border-radius`影响边框（将内部蓝色框视为内容框，将内部黑色边框视为填充边框，空白区域作为填充，巨大的红色边框作为，嗯，边界）。内框和红色边框之间的交点通常会影响内容边缘。

```
var all = $('#TopLeft, #TopRight, #BottomRight, #BottomLeft');

all.on('change keyup', function() {
  $('#box').css('border' + this.id + 'Radius', (this.value || 0) + "%");
  $('#' + this.id + 'Text').val(this.value + "%");
});

$('#total').on('change keyup', function() {
  $('#box').css('borderRadius', (this.value || 0) + "%");
  $('#' + this.id + 'Text').val(this.value + "%");
  all.val(this.value);
  all.each(function(){$('#' + this.id + 'Text').val(this.value + "%");})
});
```

```
#box {
  margin:auto;
  width: 32px;
  height: 32px;
  border: 100px solid red;
  padding: 32px;
  transition: border-radius 1s ease;
  -moz-transition: border-radius 1s ease;
  -webkit-transition: border-radius 1s ease;
  -o-transition: border-radius 1s ease;
  -ms-transition: border-radius 1s ease;
}
#chooser{margin:auto;}
#innerBox {
  width: 100%;
  height: 100%;
  border: 1px solid blue;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="box">
  <div id="innerBox"></div>
</div>
<table id="chooser">    
  <tr>
    <td><label for="total">Total</label></td>
    <td><input id="total" value="0" type="range" min="0" max="100" step="1" /></td>
    <td><input readonly id="totalText" value="0" type="text" /></td>
  </tr>
  <tr>
    <td><label for="TopLeft">Top-Left</label></td>
    <td><input id="TopLeft" value="0" type="range" min="0" max="100" step="1" /></td>
    <td><input readonly id="TopLeftText" value="0" type="text" /></td>
  </tr>
  <tr>
    <td><label for="TopRight">Top right</label></td>
    <td><input id="TopRight" value="0" type="range" min="0" max="100" step="1" /></td>
    <td><input readonly id="TopRightText" value="0" type="text" /></td>
  </tr>
  <tr>
    <td><label for="BottomRight">Bottom right</label></td>
    <td><input id="BottomRight" value="0" type="range" min="0" max="100" step="1" /></td>
    <td><input readonly id="BottomRightText" value="0" type="text" /></td>
  </tr>
  <tr>
    <td><label for="BottomLeft">Bottom left</label></td>
    <td><input id="BottomLeft" value="0" type="range" min="0" max="100" step="1" /></td>
    <td><input readonly id="BottomLeftText" value="0" type="text" /></td>
  </tr>
  <caption><code>border-radius</code> values. All values are in percent.</caption>
</table>
<p>This demo uses a box with a <code>width/height</code> of 32px, a <code>padding</code> of 32px, and a <code>border</code> of 100px.</p>
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-04-24T10:40:17.437

[演示](http://jsfiddle.net/xJVqy/132/)

让我们通过这张图片演示以另一种方式来研究这个问题：

# 我们先看看边界半径是怎么产生的？

为了产生半径，它需要边界的两侧。如果您将边框半径设置为 50 像素，则一侧需要 25 像素，另一侧需要 25 像素。

![在此处输入图像描述](https://i.stack.imgur.com/pRKuw.gif)

从每边取 25 个像素，它会产生如下效果：

```
div{
    width: 0px;
    height: 0px;
    border: 180px solid red;
    border-radius: 0 50px 0 0;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/T8Xhf.gif)

# 现在看看在一个角上应用最大平方需要多少？

它可以从顶部占用 180 像素，从右侧占用 180 像素。然后它会像这样产生：

```
div{
    width: 0px;
    height: 0px;
    border: 180px solid red;
    border-radius: 0 180px 0 0;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/qVCnd.gif)

# 如果我们设置不相等的半径值，看看它是如何产生的？

假设，如果您仅将边框半径不相等地应用于两个角：

*   右上角到 180 像素

*   右下角到 100 像素

然后需要

*   右上角：距顶部 90 像素，距右侧 90 像素

*   右下角：距右侧 50 像素，距底部 50 像素

然后它会像这样产生

```
div{
    width: 0px;
    height: 0px;
    border: 180px solid red;
    border-radius: 0 180px 100px 0;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/VOej2.gif)

# 正方形在所有边上最多可以占用多少边界？看看它是如何产生一个圆圈的？

它最多可以占用边框大小的一半，即 180 像素 / 2 = 90 像素。然后它会产生一个像这样的圆圈

```
div{
    width: 0px;
    height: 0px;
    border: 180px solid red;
    border-radius: 180px;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/SRe63.gif)

# 为什么只需要一半的正方形就可以应用于所有方面？

因为所有角落都必须平等地设置它们的半径值。

取其边界的相等部分，它产生一个圆圈。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T10:15:08.223

我认为它最初创建矩形，`height and width = 180px`然后创建具有给定半径的曲线，就像`30px`每个角一样。所以它设置`border`为 given `radius`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-26T05:49:28.963

边框是任何内容的外框，如果您在其上应用半径，它将简单地产生圆形边缘。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T10:21:02.443

两者都`.a`将`.b`给出相同的输出。

问：我为什么使用`width: 360px; height: 360px;`？

A.`border: 180px solid red;`在类似的`.a`作品中`border-width: 180px 180px 180px 180px; /* Top Right Bottom Left */`。

希望[这个小提琴](http://jsfiddle.net/24mtF/)可以帮助您理解这个概念。

```
.a{
    width: 0;
    height: 0;
    border: 180px solid red;
    border-radius: 180px;
}
.b{
    background:red;
    width: 360px;
    height: 360px;
    border-radius: 180px;
} 
```

# jquery - jquery select option should be selected based on option id

> ID：16189209
> 
> 赞同：0
> 
> 时间：2013-04-24T10:08:32.100
> 
> 标签：jquery

I have to create one input text box and select box. In select, option will contains some userId values are user names. User can use both text box and select box to input the data. if he/she select any username then userId should be updated in the text box. And vice-versa if user enters userId in textbox userId should be updated in text box.

First part of functionality is working fine.

> I am not getting any solution in jQuery, how to make the particular option id selected.

**Second Part**

These are dynamically created by select and input-boxes. These will be increased. I need to do for each. How can I do the same functionality for the all using jQuery.

```
 <input type="text" id="demoInput" /> 

    <select id="demoSelect" >
    <option id="0">User Name A</option>
    <option id="1">User Name B</option>
    <option id="3">User Name C</option>
    <option id="4">User Name D</option>
    <option id="5">User Name E</option>
    <option id="6">User Name F</option>  
    </select>

    $('#demoSelect').change(function(){
        //alert('event fired');
        var id = $(this).children(":selected").attr("id");
        //alert('id is ' +id);     
        $('#demoInput').val(id);
    });

 $('#demoInput').change(function(){
        alert('event fired');
        $('#demoSelect').children(":selected").removeAttr("selected");

        alert('id is ' +id);     
        $('#demoInput').val(id);
    }); 
```

I have created [`this`](http://jsfiddle.net/7GUaq/13/) JS Fiddle as well.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:16:03.597

你有几件事错了

1.  `option`应该有一个属性`value`not`id`
2.  获取 a 的选定值时`select`，使用 jQuery 使用`$('#demoSelect').val()`
3.  设置 a 的选定值时`select`，使用 jQuery 使用`$('#demoSelect').val(newValue)`

所以你的选择框变成：

```
<select id="demoSelect" >
<option value="1">Option 1</option>
<option value="2">Option 2</option>
<option value="3">Option 3</option>
<option value="4">Option 4</option>
<option value="5">Option 5</option>
<option value="6">Option 6</option>  
</select> 
```

更改文本框时触发的代码变为：

```
$('#demoInput').change(function(){
    alert('event fired');
    $('#demoSelect').children(":selected").removeAttr("selected");

    var id= $(this).val();                       
    alert('id is ' +id);     
    $('#demoSelect').val(id);
}); 
```

您的 jsFiddle 的工作分支：http: [//jsfiddle.net/CGQ7N/](http://jsfiddle.net/CGQ7N/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:17:08.433

由于您`id`未初始化并且您进行了错误的绑定。将您的`change`事件更新为`keyup`事件，因为每次都需要点击外部来触发事件:)

您可以使用`$('#demoInput').get(0)`方法作为索引从 0 开始我们需要减去 -1 吗？

特别是在指定索引的情况下，`.get(index)`将检索单个元素：

```
 $('#demoInput').keyup(function(){
         alert('event fired');
        $('#demoSelect').children(":selected").removeAttr("selected");

         var id= $("#demoInput").val()
        alert('id is ' +id);     
        $('#demoSelect').get(0).selectedIndex = id-1;
    }); 
```

**[演示](http://jsfiddle.net/7GUaq/21/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:15:58.473

我猜它不起作用，因为`#demoSelect`当`#demoInput`' 值更改时，您实际上并没有更新 ' 值。

```
$('#demoInput').change(function(){
   var value = $(this).val();
   $('#demoSelect option:selected').removeAttr('selected');
   $('#demoSelect option#' + value).attr('selected', 'selected');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:19:54.237

我是这样做的：

```
 $('#demoInput').change(function(){
        var $val = $('#demoInput').val(); //get the value of the input
        $('#demoSelect').children(":selected").removeAttr("selected"); //unselect any selected option
        $('#demoSelect').find('#'+$val).attr('selected',true); //find the option with id="<input value>" and select it
    }); 
```

JSFiddle：http: [//jsfiddle.net/7GUaq/22/](http://jsfiddle.net/7GUaq/22/)

# c# - getting an active directory user in C#

> ID：16189210
> 
> 赞同：0
> 
> 时间：2013-04-24T10:08:35.057
> 
> 标签：c#, active-directory, ldap

I'm trying to check if a user exists in Active Directory before creating it. I'm using the following code:

```
private static DirectoryEntry FindActiveDirectoryUser(string userName, string domainName)
    {
        using (DirectoryEntry domain = new DirectoryEntry("LDAP://" + domainName))
        {
            using (DirectorySearcher searcher = new DirectorySearcher(domain))
            {
                searcher.ReferralChasing = ReferralChasingOption.All;
                searcher.Filter = "(sAMAAccountName=" + userName + ")";
                return searcher.FindOne().GetDirectoryEntry();
            }
        }
    } 
```

I'm getting the error

```
A referral was returned from the server. 
```

for the variables userName and domainName, I tried both FQDN and pre-2000 username (e.g. DOMAIN\User), as well as simple domain and user names.

Does anyone know how to resolve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-16T12:49:30.250

试试这个。它会工作的

```
 public GetUserByLoginName(String userName)
    {

        try
        {
            using (HostingEnvironment.Impersonate())
            {

                // This code runs as the application pool user

                _directoryEntry = null;
                string path = "LDAP://xxx.local/DC=xxx,DC=xxx"; //your LDAP Address

                DirectorySearcher directorySearch = new DirectorySearcher(path);
                directorySearch.Filter = "(&(objectClass=user)(SAMAccountName=" + userName + "))";
                SearchResult results = directorySearch.FindOne();

            }

        }

        catch (Exception ex)
        {
            return null;
        }
    } 
```

# python - 如何访问亚马逊类别列表的第 101 页

> ID：16189215
> 
> 赞同：1
> 
> 时间：2013-04-24T10:08:56.753
> 
> 标签：python, web-crawler, amazon, scrapy

我想访问亚马逊内给定类别中的所有项目，但似乎类别页面是通过搜索生成的。在 URL 中碰撞页面搜索参数只会将您带到第 100 页。有什么办法可以克服吗？[这是书籍](http://www.amazon.com/s/ref=sr_pg_2?rh=n:283155,n%3a!1000,n:1,n:5005940011,n:266162&page=100&bbn=5005940011&sort=price&ie=UTF8&qid=1366797150)的示例网址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:53:06.873

使用 ajax XHR 调用动态加载内容。

长话短说：

*   打开浏览器开发工具
*   打开网络选项卡
*   点击亚马逊上的页面链接
*   请参阅 XHR 请求将要执行的操作`http://www.amazon.com/mn/search/ajax/ref=sr_pg_3...`- 这就是您应该在 Scrapy 蜘蛛中调用的内容（返回 JSON）

所以，基本上，你应该只调用这个 XHR 请求 100 次（或者看看你是否可以把它们全部合二为一）。

有用的链接：

*   [可以使用 scrapy 从使用 AJAX 的网站中抓取动态内容吗？](https://stackoverflow.com/questions/8550114/can-scrapy-be-used-to-scrape-dynamic-content-from-websites-that-are-using-ajax)
*   [使用scrapy进行分页](https://stackoverflow.com/questions/16129071/pagination-using-scrapy/16133788#16133788)

笔记：

*   亚马逊将搜索结果限制为 100 页
*   您可以尝试 amazon API 而不是直接抓取网站。请参阅 [适用于 Python 的 Amazon API 库？](https://stackoverflow.com/questions/48884/amazon-api-library-for-python).

希望有帮助。

# windows - 使用 perl 确定 Microsoft Windows 的版本？

> ID：16189216
> 
> 赞同：0
> 
> 时间：2013-04-24T10:08:58.750
> 
> 标签：windows, perl, operating-system, version

我正在 Windows 上创建一个小的 perl 脚本。我想确定 Windows 的版本，即 XP、Vista、7、8 等。我如何获得这些信息？谢谢你。

**更新：** *我想知道运行脚本的 Windows 版本！* 请添加一些关于如何使用 API 的代码，因为我是初学者并且对 perl 不太了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T14:32:29.597

试试[Win32](http://search.cpan.org/perldoc/Win32)：

```
#!/usr/bin/env perl

use 5.014;
use strict;
use warnings;

use Win32;

say Win32::GetOSDisplayName();
say for Win32::GetOSName();
say for Win32::GetOSVersion(); 
```

如果这还不够，您可以通过[Win32::API调用](https://metacpan.org/pod/Win32::API)[GetVersionEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724451%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:14:56.973

来自[http://perldoc.perl.org/perlvar.html](http://perldoc.perl.org/perlvar.html)

> $^O
> 
> 构建此 Perl 副本的操作系统的名称，在配置过程中确定。有关示例，请参见 perlport 中的 PLATFORMS。
> 
> 该值与 $Config{'osname'} 相同。另请参阅 perlrun 中记录的 Config 和 -V 命令行开关。
> 
> 在 Windows 平台中，$^O 不是很有帮助：因为它始终是 MSWin32 ，它无法区分 95/98/ME/NT/2000/XP/CE/.NET 之间的区别。使用 Win32::GetOSName() 或 Win32::GetOSVersion()（参见 Win32 和 perlport）来区分变体。

# java - 由不同类加载器加载的相同本机库

> ID：16189217
> 
> 赞同：3
> 
> 时间：2013-04-24T10:08:59.460
> 
> 标签：java, java-native-interface, classloader

请考虑以下场景：

我有两个 java 类，使用不同的系统类加载器加载。我有一个实现了队列的本机库。这两个类都将加载相同的库，并将元素添加到队列中。可能吗？如果是这样，本机库实现是否会在两个类之间共享。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T10:17:50.153

根据[JNI 规范](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#library_version)，这是不可能的。

> 在 JDK 中，每个类加载器都管理自己的一组本地库。**不能将同一个 JNI 本机库加载到多个类加载器中。**这样做会导致`UnsatisfiedLinkError`被抛出。例如，在用于将本机库加载到两个类加载器时`System.loadLibrary`抛出一个。`UnsatisfiedLinkError`

# winforms - Accessing Return statement from dll to windows Forms

> ID：16189219
> 
> 赞同：0
> 
> 时间：2013-04-24T10:09:01.747
> 
> 标签：winforms, c#-4.0

```
 using System;
 using System.Collections.Generic;
 using System.Text;

 namespace Bank
{
public class Overdraft : Account
{
    double credit;
    double inter = 0.15;
    public double Credit
    {
        get { return credit; }
    }
    public Overdraft()
    {

    }
    public Overdraft(String acno, String nam, double amt, double cred)
        : base(acno, nam, amt)
    {
        this.credit = cred;
    }
    public override bool deposit(double amount)
    {
        amt += amount;
        return true;
    }

    public override bool withdraw(double amount)
    {
        if (amount <= (credit + amt))
        {
            amt -= amount;

            if (amt < 0)
            {
                credit -= Math.Abs(amt);
                due = Math.Abs(amt);
                interest();
            }
            return true;
        }

        else
            Console.WriteLine("\n!!!!Credit Limit Crossed!!!!");
        return false;
    }

    public void interest()
    {
        due = due * inter;
        Console.WriteLine("The Interest for due amount is Rs. {0}", due);
        return true;
    }

     public override string ToString()
    {
        return string.Format("Account Details: \nACC NO = {0} \nName = {1} \nBalance = Rs. {2}\nCredit =Rs. {3} \n", accno, name, amt, credit);
    }

} 
```

}

The above is one of the class in dll of my code. The question is how should i pass those Console.Writeln statements in Windows Forms and also ToString method. Or anyone can tell me how to get those statement in forms in a messagebox.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:30:25.433

不要`Console.WriteLine`在你的 dll 中使用。您在 UI (WinForms) 中的客户端代码应检查布尔返回值/调用`ToString()`并向用户提供相关信息。

PS。考虑将双精度数更改为小数以存储金额。

# android - Android dynamic arrangement layout

> ID：16189220
> 
> 赞同：0
> 
> 时间：2013-04-24T10:09:02.587
> 
> 标签：android

I'm developing a harmonica playing android app, in which a harmonica instrument is displayed and some part of it are clickable.

I want to show a full width picture of instrument (the height is adjusted accordingly) which some parts of it are clickable and they must be located dynamically according to the picture size.

The problem is I don't know how to use layout elements to achieve this so it's renderable on device with different screen size. What layout to use?

Show the instrument as an ImageView or background of a layout and how to make it fit?

Is there anyway to put the button relative to the width and height of the picture? or it must be done programmatically? and also they width and height must change as holes get bigger or smaller.

I don't have much experience with android layouts and I am totally stuck on how to do this.

This is a sample picture of instrument:

![enter image description here](https://i.stack.imgur.com/g5Fw2.jpg)

I want make holes clickable although the picture size change in different devices.

Any suggestion would help me so much.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:21:22.280

有`ImageView`一个内部`Matrix`控制图像的缩放方式。

我们可以得到这个矩阵并将其反转，这样我们就可以将缩放图像上的触摸转换为原始图像中的坐标。

```
float[] xy = new float[]{x, y}; // the xy from the touch event
Matrix inverse = new Matrix();
imageView.getImageMatrix().inverse(inverse);
inverse.mapPoints(xy); // xy now contains the coordinates of the click in the original image 
```

现在您需要做的就是匹配`xy`每个音符位置的一些保存值。

# php - 使用 Zend 在更新时获取修改的字段

> ID：16189221
> 
> 赞同：0
> 
> 时间：2013-04-24T10:09:09.447
> 
> 标签：php, mysql, zend-framework, profiling, sql-update

我试图捕捉 ZEND 更新，以查看谁修改了什么。我在 ZEND 框架源代码中找到了函数更新。像这样

```
public function update($table, array $bind, $where = '')
{
    global $Profiling;
    try 
    {
        return $this->dbInstance->update($table, $bind,$where);
    }
    catch (Zend_Exception $e) {
        $this->write_log($Profiling,"update " . $table,$e);
    }
} 
```

所以我有桌子，我有哪里。和所有的领域。完美的。但是，有一个问题，当我对 $bind 变量执行 print_r 时。我已显示所有字段。

```
Array
(
    [mail] => Test_Droit_Utilisateur@osef.com
    [lastName] => testlastname
    [firstName] => TestFirstName
    [v_gender_id] => 2
    [active] => 1
    [adress] => 56 rue test
) 
```

我不知道真的修改了什么。所有数据都通过版本页面上的表格发布。例如，当我只修改邮件时，print_r 将显示 $bind 变量中的所有信息。不可能知道真正修改了什么。我想我可以在字段上花点时间，并将每个字段值与这个 $bind 变量进行比较。但由于在几个表上效率不高，我有很多字段。

如果有人可以帮助我找到解决方案。我准备好了 :) 谢谢大家的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:13:32.750

您可以使用

```
array_diff_assoc($bind,$valuesfromDatabase); 
```

# java - How to send Ethernet-Frames in Java without TCP/IP Stack

> ID：16189223
> 
> 赞同：8
> 
> 时间：2013-04-24T10:09:14.907
> 
> 标签：java, ethernet, raw-ethernet

My Java application should control an external device (EtherCAT Bus technology) directly connected to the network interface of my computer(Ubuntu and Windows). No other network devices are connected. The communication has do be done on Standard IEEE 802.3 Ethernet Frames without IP stack.

**Example for sending data:**

```
int etherType =  0x88A4;  // the EtherType registered by IEEE
byte[] macBroadcast = new byte[] {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};
byte[] macSource = new byte[] ... ;  // MAC Address of my network interface card
byte[] buffer = ... // the data to send

device.write(macSource, macBroadcast, etherType, buffer); 
```

I tried **JNetPcap**, which uses the **pcap** native library. The given API was fine, but there were multithreading issues on heavy load, which forced me to give up.

**netty.io** was also a candidate. I am not sure, but a TCP/IP stack is mandatory. Am I right?

Are there other ideas to communicate with low level Ethernet Frames? I would prefer a pure java library like netty.io, if one exists.

Of course JNA/JNI is an option, too. But I don't want to write C code.

Other alternatives?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:15:40.337

这些是我能够找到的选项：

*   jNetPcap 是 Java 的 libpcap 包装器 - [http://jnetpcap.com/](http://jnetpcap.com/)
*   Jpcap 是 Java 的另一个 libpcap 包装器 - [https://github.com/mgodave/Jpcap](https://github.com/mgodave/Jpcap)
*   RockSaw 是一个使用“原始套接字”发送和接收 IPv4 和 IPv6 数据包的库 - [http://www.savarese.org/software/rocksaw/](http://www.savarese.org/software/rocksaw/)。据我所知，它非常有限，自 2007 年以来就没有被触及过。
*   Netutils 使用 libpcap 和 libnet - [http://code.google.com/p/netutils/](http://code.google.com/p/netutils/)

我还看到评论说 jNetPcap 应该是线程安全的，但实际上它不是；即当与多个线程一起使用时它是错误的。

# java - 上限和下限通配符的 Java 泛型

> ID：16189229
> 
> 赞同：9
> 
> 时间：2013-04-24T10:09:28.710
> 
> 标签：java, generics, collections, wildcard

我正在阅读 java 泛型，我遇到了一个有趣的查询。我的问题如下。

1.  对于上限通配符

    ```
    public static void printList(List<? extends Number> list) {
        for (int i = 0; i < 10; i++) {
            list.add(i);// gives compilation error
        }
    } 
    ```

2.  对于下界通配符

    ```
    public static void printList(List<? super Integer> list) {
        for (int i = 0; i < 10; i++) {
            list.add(i);// successfully compiles
        }
    } 
    ```

我对此感到困惑，因为查看 Sun Oracle 文档我了解代码也应该针对第 1 点进行编译

[上限通配符](http://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html) [下限通配符](http://docs.oracle.com/javase/tutorial/java/generics/lowerBounded.html)

谁能帮我理解这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T10:40:20.510

This is because when you are using upper bound, you cannot add elements to collection, only read them.

this means that these are some of legal assignments:

```
List<? extends Number> l = new ArrayList<Integer>();
List<? extends Number> l = new ArrayList<Double>(); 
```

so you cannot guarantee that when adding object, it will hold correct types of objects. for better explatation please follow: [How can I add to List<? extends Number> data structures?](https://stackoverflow.com/questions/2776975/how-can-i-add-to-list-extends-number-data-structures)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:28:19.810

实际上，幸运的是，同样的情况，我在 Sun Oracle 文档的下一页中得到了答案。请找到下面的链接。可能对将来要搜索的人有用。

[通配符捕获](http://docs.oracle.com/javase/tutorial/java/generics/capture.html)

# javascript - How to make a z-index fit to page and not scalling

> ID：16189231
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:09:31.587
> 
> 标签：javascript, html, css, svg, z-index

How to make a z-index fit to page and not scalling i need to put it up from an svg, but my svg is in fit to page.

here is my div code

```
<div   id="homeScreen" class="grey_box"  style="background-color:#CDCDCD;
    position: absolute;
    left: 0px;
    top: 8px;
    width: 373px;
    height: 537px;
    visibility: visible;">
 <p class="hello" >E-Number<input id="tags" /></p>
<p class="hello2">Mat-Number<input id="tags1" /><p>
<p class="hello3">Tech. ID<input type="text"  name="fname"><p>
<p class="hello4">RIS<input type="text"  name="fname"><p>
<p class="hello5"> <button onclick="get_action_home()" style="width: 100px">Continue</button><p>
<p class="hello6">Βάση δεδομένων: Τοπικός</p> 
<p class="hello7">Σύνδεση: κομμένη</p> 
<p class="hello8">Κατάσταση βάσης δεδ.: Μη επίκαιρη</p> 

</div> 
```

here is the javascript to put it dinamically

```
function adjust()
{

            var DMMScreen = document.getElementById("DMM");
            //new screens dinamic 
            var homeScreen = document.getElementById("homeScreen");

            homeScreen.style.height = DMMScreen.getBoundingClientRect().height;
            homeScreen.style.width = DMMScreen.getBoundingClientRect().width;
            homeScreen.style.top = DMMScreen.getBoundingClientRect().top;
            homeScreen.style.left = DMMScreen.getBoundingClientRect().left;
            // 
```

and here is what i found from jquery but i don't know how to fix it

```
$(window).resize(function() {
    $("#width").text($(this).width());
    $("#height").text($(this).height());
}); 
```

and here is the link for what it does [link] ([https://www.dropbox.com/s/ebsha1t091ewk40/good2.png](https://www.dropbox.com/s/ebsha1t091ewk40/good2.png)) and here is the bad when i change the window [link] ([https://www.dropbox.com/s/b7n4nn3gg2gb6fn/good.png](https://www.dropbox.com/s/b7n4nn3gg2gb6fn/good.png))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:15:33.177

`z-index`不适合任何东西，它是一个“分层”工具，允许您将元素放在彼此之上，我假设您的意思是您有一个`position:fixed`or`position:absolute`与`z-index`.. 如果是这种情况，您可以使元素适合通过使用页面宽度`width:100%;`

例如：

```
<style>
.full_width {
    top:0;
    left:0;
    z-index:1;
    height:20%;
    width:100%;
    position:fixed;
    text-align:center;
}
</style>
</head>
<body>
    <div class="full_width"> i will fit the width of the page</div>

    your other stuff here...
</body> 
```

如果这不是你的意思，那么请提供更多信息..

**编辑** 您提供的链接，您不需要使用`position`或`z-index`，

这将像设置你的`margin-left`and `margin-right`to`auto`并将该容器定义为`width`..

将该页面的 HTML 和 CSS 粘贴到您的问题中，我们可以为您提供更多帮助

但就目前而言，将那个框放在页面中间的一个例子是

```
<style>
.grey_box {
    width:500px;
    height:600px;
    margin-left:auto;
    margin-right:auto;
    background-color:#CCC;
}
</style>
<div class="grey_box">
 <!-- your content here-->
</div> 
```

示例：http: [//jsfiddle.net/AbQsa/](http://jsfiddle.net/AbQsa/)

# javascript - 如何保存和恢复anchorNode/anchorOffset & focusNode/focusOffset？

> ID：16189233
> 
> 赞同：0
> 
> 时间：2013-04-24T10:09:32.883
> 
> 标签：javascript, range, getselection, addrange

在以下代码中：

```
var s=window.getSelection();
var sr=s.getRangeAt(0);

console.log(s.anchorOffset+" "+s.focusOffset);

s.removeAllRanges();
s.addRange(sr);

console.log(s.anchorOffset+" "+s.focusOffset); 
```

替换范围时，anchorOffset 和 focusOffset 被交换。即，无论选择实际从哪一端开始和结束，锚点都会重置到选择的最左端，并将焦点重置到最右端。添加范围（或至少不存储）时似乎忽略了锚点和焦点，并且它默认并假定左锚点和右焦点。

这是一个该死的麻烦！

我不抱太大希望，但是有什么办法可以解决这种行为。我真的很想能够恢复原来的锚点和焦点位置。

在 chrome 和 firefox 中工作相同。

**编辑**

好的，已经得出了部分答案：

```
var s=window.getSelection();
var sr=s.getRangeAt(0);

console.log(s.anchorOffset+" "+s.focusOffset);

var aN=s.anchorNode,aO=s.anchorOffset,fN=s.focusNode,fO=s.focusOffset;

s.removeAllRanges();
s.addRange(sr);

s.collapse(aN,aO);
s.extend(fN,fO);

console.log(s.anchorOffset+" "+s.focusOffset); 
```

但是，这在 IE9+ 中不起作用，因为 IE 没有实现扩展方法。那么现在的问题就变成了，如何让IE在这方面玩的好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:39:44.160

不，这在 IE 中是不可能的。一年前我[在 IE 错误跟踪器中](https://connect.microsoft.com/IE/feedback/details/737106/implement-missing-extend-method-of-selection)提出了一个错误，建议他们实施`extend()`，但它没有发生，现在他们已经关闭了这个错误，它似乎不太可能很快发生。

**更新： IE 错误已重新打开，因此有希望。**

以下是我对两个类似问题的回答：

*   [https://stackoverflow.com/a/4802994/96100](https://stackoverflow.com/a/4802994/96100)
*   [在选择中，focusOffset可以在anchorOffset之前吗？](https://stackoverflow.com/questions/10705569/in-selection-can-the-focusoffset-be-before-the-anchoroffset)

# mysql - 包含特定小时/分钟的 SQL 更新日期字段

> ID：16189235
> 
> 赞同：2
> 
> 时间：2013-04-24T10:09:42.150
> 
> 标签：mysql, sql

我需要一些帮助来更新我的数据库上的 DATE 字段。
我必须更新每个日期字段，其中的小时、分钟和秒为“00:00:00”。
日期格式为“yyyy-mm-dd HH:mm:ss”。
第一个问题：有没有办法做到这一点？
第二个问题：怎么做？

非常感谢你的帮助！

编辑：我需要用相同的日期更新该字段，只更改小时（和分钟和秒）。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:13:30.043

您可以使用`DATE_FORMAT`MySQL 功能。

**例子**

```
UPDATE Table_Name set Field ='EDITVALUE'
   WHERE DATE_FORMAT(dateField, "%h/%i/%s") = "00:00:00"; 
```

**编辑答案**

您可以使用`CONCAT`MySQL 功能。

```
UPDATE Table_Name set dateField = CONCAT(date(dateField),' 05:12:50'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:13:20.573

```
update table_name
set column_name='your date'
where DATE_FORMAT(column_name, "%h/%i/%s") = "00:00:00" 
```

或在**sql server中**

```
update table_name
set column_name='your date'
where 
CONVERT(VARCHAR(8), column_name, 14)='00:00:00' 
```

# c# - Error in System.Xml

> ID：16189237
> 
> 赞同：0
> 
> 时间：2013-04-24T10:09:47.253
> 
> 标签：c#, web-services, system.xml

I'm working on an app in **C#**. This app is running on **Win XP SP2** and **SP3**. It has to be connected to a server via a webService. It works for all our customers, except one...

When he wants to log on he has an error :

```
There is an error in XML document(1, 368).
at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encondingStyle, XmlDeserializationEvents events)
at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encondingStyle)
at System.Web.Service.protocols.SoapHttpClient.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asynCall)
at System.Web.Service.protocols.SoapHttpClient.Invoke(String MehtodeName, Object[] parameters)
System.Collections.ListDictionaryInternal
System.Xml 
```

After lots of research I couldn't find anything. I don't know where does it come from. The customer is on XP, service pack 3, so I don't think it can come from his configuration...

Moreover, if someone can explain me how to get the **XML** frame, that could allow me to know what's wrong with his `System.Xml`.

# java - Map的类别是什么

> ID：16189238
> 
> 赞同：1
> 
> 时间：2013-04-24T10:09:50.070
> 
> 标签：java

我必须将`Map<ClassType1,Object>`. 如果我`Map.class`只通过，我有一个错误。所以我想知道什么是类`Map<MyClassType1,Object>`？

```
public class GetSessionRequest extends SpiceRequest<Map<ClassType1, Object>> {

    private Client mClient;
    public GetSessionRequest(Class<Map<ClassType1, Object>> clazz) {
        super(clazz);
    }

    public GetSessionRequest(Client client) {
        super(/*What should I pass here. I can't pass Map.class*/); 
        mClient = client;
    }

    @Override
    public Map<ClassType1, Object> loadDataFromNetwork() throws Exception {
        Map<ClassType1, Object> map = mClient.getSession();
        return map;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:35:04.097

我想你的意思是这样的：

```
public class T {
    public T(Class<Map<MyClassType1, Object>> cls) {
    }
} 
```

但是你需要这个：

```
public class T {
    public T(Class<? extends Map<MyClassType1, Object>> cls) {
    }

    public static void main(String[] args) {
        Map<MyClassType1, Object> m = new HashMap<MyClassType1, Object>();
        T t = new T(m.getClass());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:12:07.963

`Map`是一个接口。例如，有许多可用的实现`HashMap`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:13:41.720

如果它允许映射，`interface` 则`method or constructor`可以允许任何[**实现**](http://docs.oracle.com/javase/tutorial/collections/implementations/map.html)`Map interface`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:13:22.997

`Map`没有构造函数，它是一个接口，你可以使用一个`HashMap<ClassType1,Object>`或`TreeMap<ClassType1,Object>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T10:16:00.523

Map<> 是一个接口，就像 List<> 一样，接口没有构造函数。您必须使用 HashMap、TreeMap 或任何实现该接口的类。

# mysql - MS Access 中的 Sql 查询产生语法错误

> ID：16189240
> 
> 赞同：1
> 
> 时间：2013-04-24T10:09:59.917
> 
> 标签：mysql, sql, ms-access

我在 MSAccess 中查询时遇到问题。代码如下所示：

```
SELECT CustomerId, FirstName, Surname, DateOfBirth, WorkoutId, Name, Description
   FROM Customer 
   INNER JOIN (Registration INNER JOIN TrainingProgram (INNER JOIN WorkOutPlan)) 
   ON Customer.CustomerId = Registration.CustomerId 
   ON Registration.CustomerId = TrainingProgram.CustomerId 
   ON TrainingProgram.WorkId = WorkOutPlan.WorkId
      WHERE DateOfBirth > #01/01/83#; 
```

该数据库是为一个虚构的健身房创建的。

查询的目的是显示出生日期大于 83 年 1 月 1 日的锻炼计划成员。查询选择的信息来自 3 个表。客户、培训计划和锻炼计划。另一个表“注册”将客户表和培训计划表与“客户 ID”链接

查询产生语法错误并突出显示括号“”（“INNER JOIN WorkOutPlan））”。我看不到代码有任何问题，但也许我在此过程中犯了一个错误？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:15:08.893

支架正确

```
SELECT CustomerId, FirstName, Surname, DateOfBirth, WorkoutId, Name, Description
FROM (Customer 
INNER JOIN (Registration
            INNER JOIN (TrainingProgram
                        INNER JOIN WorkOutPlan 
                                   ON Customer.CustomerId = Registration.CustomerId )
                        ON Registration.CustomerId = TrainingProgram.CustomerId )
            ON TrainingProgram.WorkId = WorkOutPlan.WorkId)
WHERE DateOfBirth > #01/01/83#; 
```

# node.js - NodeJs - 套接字 io - 客户端系统自动重新连接

> ID：16189245
> 
> 赞同：1
> 
> 时间：2013-04-24T10:10:11.793
> 
> 标签：node.js, sockets, io, client, reconnect

我想创建一个 socket 的 io 服务器的客户端，在 x 和 x 秒内尝试连接到 socket 的 io 服务器，以验证服务器是否已经启动。

我在客户端有什么：

src="http://localhost:90/socket.io/socket.io.js" - 加载脚本

```
var serverStatus = recconectToServer();

        setInterval(function(){

            if (serverStatus) {
                $(".results-server").append("<p style='color:green; width:100%; float:left;'>connection up.</p>");
            } else {
                recconectToServer();
            }
        },3000);

        function recconectToServer() {
            $(".results-server").append("<p style='color:orange; width:100%; float:left;'>try connection.</p>");
            try {
                var socket = new io.connect("http://localhost:90");
                return true;
            } catch(err) {
                $(".results-server").append("<p style='color:red; width:100%; float:left;'>server down.</p>");
                console.log(" Erro = "+ err);
                return false;
            }
        } 
```

**情况：**

如果客户端在服务器关闭时尝试连接我收到此消息：“ReferenceError：io is not defined”

这是正常的，因为服务器已关闭，然后我在尝试建立连接（没有刷新页面）时启动服务器和客户端继续收到此消息“ReferenceError：io is not defined”

但是为什么会这样呢？

注意：如果我执行刷新客户端页面，当服务器运行时，客户端连接没有任何问题。

**更新：** 真正的问题：来自 sockets.io 的事件 connected_failed 不起作用，就像 stackoverflow 中存在的其他问题一样。所以为了解决这个问题，我做了下一个解决方案：

我的解决方案：

```
<script src="http://localhost:90/socket.io/socket.io.js"></script>
        <script>
            /**
            * timer that try make a new connection to node server
            */
            setInterval(function(){
                if (autoReconnect()) {
                    window.location.href="client.html";
                } else {
                    autoReconnect();
                }
            },5000);

            /**
            * This functions try make connection to node server
            */
            function autoReconnect(){
                try {
                    $.getScript("http://localhost:90/socket.io/socket.io.js");
                    var socket = new io.connect('http://localhost:90');
                    return true;
                } catch(err) {
                    return false;
                }
            }
    </script> 
```

结论：当服务器再次启动时，将被重定向到其他页面，继续初始过程。

我不知道这是否是最好的解决方案，如果有人有更好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:41:38.987

当您的服务器关闭时，您无法为 socket.io 提供客户端脚本。因此 io 没有定义。重新连接将不起作用，因为客户端从不尝试重新加载客户端脚本。当服务器已经运行时，可以访问客户端脚本并定义 io。因此，您应该扩展您的 reconnectToServer 函数以在必要时尝试重新加载客户端脚本，可能类似于

```
if(io === undefined)
    $(".results-server").append("<script src=\"http://localhost:90/socket.io/socket.io.js\""); 
```

# module - 果园博客，获取查看次数

> ID：16189246
> 
> 赞同：0
> 
> 时间：2013-04-24T10:10:12.547
> 
> 标签：module, blogs, orchardcms

我已经用果园实现了一个博客，现在我需要获取帖子的查看次数。目标是：

*   在列表中获得 5 个最高查看的帖子
*   在每篇博文上显示查看次数

我尝试了各种解决方案，但没有一个有效，查看次数始终为 0。

不为我工作（在 1.6 上）

*   使用投票模块（不知道如何使用，没有文档） [https://orchardvoting.codeplex.com/documentation](https://orchardvoting.codeplex.com/documentation)

*   内容查看次数（始终为 0） [http://gallery.orchardproject.net/List/Modules/Orchard.Module.NGM.ContentViewCounter](http://gallery.orchardproject.net/List/Modules/Orchard.Module.NGM.ContentViewCounter)

*   顶视图（总是与 0 相同的顶帖） [http://gallery.orchardproject.net/List/Modules/Orchard.Module.galgodage.TopViews](http://gallery.orchardproject.net/List/Modules/Orchard.Module.galgodage.TopViews)

有没有人成功使用或实现过这个功能？谢谢

编辑：我在日志中看到了这个错误（不知道是什么模块导致的）

```
Orchard.DisplayManagement.Implementation.DefaultDisplayManager
RuntimeBinderException thrown from Action`1 by   
System.Action`1[[Orchard.DisplayManagement.Implementation.ShapeDisplayingContext, 
Orchard.Framework, Version=1.6.0.0, Culture=neutral, PublicKeyToken=null]]
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException:
Can not implicitly convert type
'Orchard.Modules.Models.ModuleEntry' in 'Orchard.ContentManagement.ContentPart' 
in CallSite.Target(Closure , CallSite , Object ) in
Orchard.DesignerTools.Services.WidgetAlternatesFactory.
<Displaying>b__5(ShapeDisplayingContext displayedContext) in 
Orchard.DisplayManagement.Implementation.DefaultDisplayManager.<>c__DisplayClassc.
<Execute>b__5(Action`1 action) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T23:13:55.807

我不知道为什么内容查看计数器对我不起作用。

无论如何，我已经设法禁用它并安装了：http: [//gallery.orchardproject.net/List/Modules/Orchard.Module.ViewCount](http://gallery.orchardproject.net/List/Modules/Orchard.Module.ViewCount)

按照模块页面上的说明，第二个有效。

非常感谢 Hazza 的宝贵意见和帮助。

快乐的果园...

# windows - 如何使用 Windows 批处理脚本创建具有指定路径的空文本文件

> ID：16189249
> 
> 赞同：1
> 
> 时间：2013-04-24T10:10:15.833
> 
> 标签：windows, batch-file

它必须创建完整的文件夹路径以及空文件。我的要求是我将获取文本文件路径作为参数，如果该文件不存在，则需要创建该文件。
我想先获取路径并检查该文件夹是否存在，如果不创建文件夹路径，则使用 TYPE nul 创建空文件。

我可以在java中得到一些类似的东西，String subStr = str.subString(0, str.lastIndexOf('.')) ，如何使用Windows批处理脚本来做到这一点。任何建议请提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:15:06.537

要拆分路径/文件夹和文件名，您可以使用[提供给这个问题的答案](https://stackoverflow.com/questions/9252980/how-to-split-the-filename-from-a-full-path-in-batch)。

要创建一个空文件，只需将“nothing”复制到其中：

```
copy nul myEmptyFile.txt 
```

作为替代方案，您可能会重定向空输出，但我想这肯定比以前的想法更耗费资源：

```
cmd /c > myEmptyFile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:53:34.907

您可以制作这样的功能：

```
@Echo OFF

Call :CheckTextFile "C:\Test1\Test.txt"
Call :CheckTextFile "C:\Test2\Test.txt"
Call :CheckTextFile "C:\Test3\Test.txt"
Pause&Exit

:CheckTextFile
(If not exist "%~1" (MKDIR "%~p1" 2>NUL && FSutil File CreateNew "%~p1\%~nx1" 0 1>NUL)) & (GOTO:EOF) 
```

# jquery - 覆盖链接文件中声明的 jquery 变量

> ID：16189250
> 
> 赞同：0
> 
> 时间：2013-04-24T10:10:26.703
> 
> 标签：jquery

我有一个链接的 .js 文件，它声明：

```
$(document).ready(function() {
var imagesTotal = 4;
} 
```

现在我想在 HTML 文件中覆盖这个内联。我试过了

```
$(document).ready(function() {
    window.imagesTotal = 4;
    } 
```

而且我也尝试将它们都声明为

```
 window.imagesTotal = 4; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:12:16.367

您的“链接” .js 文件`imagesTotal`在函数内声明。在函数内部声明的变量不能在该函数外部访问。

您必须`var`在 imagesTotal 之前以某种方式删除以使其成为全局，或者在您的“链接”.js 文件中删除`var`并`window.`添加到前面。`imagesTotal`

# java - 如何停止或退出“Runnable”

> ID：16189254
> 
> 赞同：4
> 
> 时间：2013-04-24T10:10:42.987
> 
> 标签：java, android, multithreading

我是 android 新手。我正在构建应用程序以通过 WiFi 监听传入消息，它可以很好地监听和更新 UI，但是当我尝试退出时，它不会响应后退按钮按下，直到它在缓冲区中接收到消息。据我了解，按钮在 UI 线程上，而 Runnable 是一个单独的线程，这就是为什么它不会立即响应按钮按下，因为它在单独的线程上很忙。那么我如何从后退按钮按下中断“Runnable”？

任何帮助将非常感激。

```
public Runnable mUpdate = new Runnable() {
    public void run() {            
        try {   
            line = in.readLine();
            newtext.setText(line);
            mHandler.post(this);
            Log.i("RESPONSE FROM SERVER", "S: Received Message: '" +line+ "'");

            //onBackPressed();
            //threadRunning = true;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.e("Error" , "Something Happen");    
        }
    }
}; 
```

编辑：对不起，我应该早点发布这个，所以在“onCreate”中，我使用处理程序来调用“mUpdate”。打电话的方式是否正确？

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    intent = getIntent();
    setContentView(R.layout.activity_display_message);
    message = intent.getStringArrayExtra(MainActivity.EXTRA_MESSAGE);
    newtext = (TextView)findViewById(R.id.TextView1);
    userName = message[0];
    serverIP = message[1];
    sendConnectionRequest ();
    mHandler = new Handler();   // Handler to update UI      
    mHandler.post(mUpdate);     // post is a method to update UI

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:24:33.700

**编辑：**

既然您已经添加了涉及[Handler](http://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)的代码，那么您的问题所在就更清楚了。需要理解的几点：

*   Android有一个普遍的概念，即有*主*线程，然后有许多其他线程。
*   只有主线程可以修改 UI
*   在更高版本的android中，主线程不允许做网络......

那么如何根据从网络上读取的东西来改变 UI 呢？

您需要将消息从另一个（网络）线程传递到主线程。处理程序让您的其他线程向主线程发送消息......那是您的网络线程可以将任务（`Runnable`）交给主线程执行。处理程序将任务从网络线程发布到主线程。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    intent = getIntent();
    setContentView(R.layout.activity_display_message);
    message = intent.getStringArrayExtra(MainActivity.EXTRA_MESSAGE);
    newtext = (TextView)findViewById(R.id.TextView1);
    userName = message[0];
    serverIP = message[1];
    sendConnectionRequest ();
    mHandler = new Handler();   // Handler to update UI  
                                // This is being created in the main thread
                                // so everything posted will be posted to 
                                // the main thread

    mUpdate.start();            // start thread to do something on the network 
                                //before updating the UI

}

public Thread mUpdate = new Thread() {
    public void run() {            
        try {
            while (!thread.interrupted()) {   
                final String line = in.readLine();
                Log.i("RESPONSE FROM SERVER", "S: Received Message: '" +line+ "'");

                // Define the UI change you want to make
                Runnable uiUpdate = new Runnable() {
                    public void run() {
                        // modify your UI here.
                        newtext.setText(line);
                    }
                };

                // post the UI change back to the main thread.
                mHandler.post(uiUpdate);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.e("Error" , "Something Happen");    
        }
    }

    public void interrupt() {
        try {
            super.interrupt();
            in.close();
        }
        catch (IOException e) {}
    }
}; 
```

我也可以建议你：

```
protected void onDestroy() {
    mUpdate.interrupt();
} 
```

**原始答案（现已失效）**

> 据我了解，按钮在 UI 线程上，而 Runnable 是一个单独的线程，这就是为什么它不会立即响应按钮按下，因为它在单独的线程上很忙。

这根本不正确。[Thread](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html)是一个单独的线程，而不是 Runnable。并且您需要在线程上调用`start()`not`run()`以使 run 方法在自己的线程中执行。使用线程的全部意义在于一个线程不会（通常）被另一个正忙的线程阻塞。

```
// <snip>removed for brevity of new answer</snip> 
```

您还可以从 android 库中查看[AsyncTask 。](http://developer.android.com/reference/android/os/AsyncTask.html)如果你正确使用它，它也会在它自己的线程中运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T11:13:50.687

我不知道这与 Android 有什么关系，但从你的标题来看，停止 Java 中的线程是通过中断完成的，而中断是由操作系统本身处理的。

从你的线程你打断另一个。

```
theOtherThread.interrupt() //--> inside your Thread. 
```

另一方面：

```
 public void run(){
     while(true){
          try{
               //handle your logic
               Thread.sleep(100);
          }catch(InterruptedException){
             //thread was 'stopped' here
             Thread.currentThread().interrupt(); //this is a MUST
             break;
         }
     }
 } 
```

# android - Android：谁能举例说明如何使用谷歌地图 v2 加载地图？

> ID：16189258
> 
> 赞同：-3
> 
> 时间：2013-04-24T10:10:54.813
> 
> 标签：android, google-maps, android-maps-v2

我想在我的应用程序中加载地图，但无法解释谷歌开发者文档的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:22:34.800

我最近更新了 May 并按照此步骤操作，希望对您有所帮助

`step [1]` 更新你的`sdk`和检查 `Google Play service`

`step [2]`goto sdk path 喜欢 `C:\android-sdk-windows\extras\google` 并在您的中导入 Google Play Service Libray`workspace`

`step [3]`添加`library`你的项目

`step [4]`在你的 xml 中放 Like

```
 <fragment
        android:id="@+id/mapview"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/includefooter"
        android:layout_below="@+id/relativetop" /> 
```

`step [5]`在活动中

```
 public class YourActivi extends FragmentActivity {
....
GoogleMap mapView;

mapView = ((SupportMapFragment)  getSupportFragmentManager().findFragmentById(R.id.mapview)).getMap();
} 
```

清单中的步骤 [6]

```
 <permission
        android:name="com.tixe.Activity.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    <uses-permission android:name="YourPackage.permission.MAPS_RECEIVE" />
    <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="yourKey" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/> 
```

还要检查需要权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:59:05.120

当我在我的 android 应用程序中集成相同的功能时，这种集成让我感到恶心。[从这里https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)遵循正确的步骤对我有很大帮助。要记住的重要事情不要忘记从 Android SDK 管理器安装 Google Api。

# c# - 比较两个excel文件

> ID：16189259
> 
> 赞同：0
> 
> 时间：2013-04-24T10:10:56.960
> 
> 标签：c#, excel, file, comparison

我正在开发一个工具来比较两个 excel 文件。

一个 excel 文件包含大约 300-400 行。在每个excel文件中有4个不同列数的表。表格在一张纸上一个接一个地对齐。

我尝试使用一些 Excel 比较工具，例如来自 source forge 的 Beyond Compare、TestComplete 和 ExcelCompare 宏。但没有一个起作用。我认为这是因为该文件包含不同的表。所以我打算开发一个工具来比较excel文件。但根据我的研究，这不是一个简单的任务:)

我的方法是一次从 2 个 excel 文件（A.xlsx 中的第一行和 B.xlsx 中的第一行）中提取 2 行，将值放入单独的 2 个数组中，然后比较这些值。识别不同的值并将其写回新的 Excel 文件。

这种方法是否有效或适用于 300 行的文件......？？？如果有人有不同的简单想法，请与我分享。

我打算使用 C# 和 Excel 2010 进行开发。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:16:12.107

我的方法是将两张表都转换为 CSV（通过将它们保存为 CSV 格式；Excel 可以为您做到这一点），然后使用字符串距离算法来定位差异。Files Comparer 和其他内容比较工具使用此算法可以提供非常好的结果。

这种方法有一个额外的好处（与逐个单元的线性比较相比），任何丢失的行都将被整齐地识别，而不是将整个数据的其余部分标记为不同的。

# jquery - Jquery 弹出对话框，获取提交的数据 - 包括小提琴

> ID：16189260
> 
> 赞同：0
> 
> 时间：2013-04-24T10:10:59.603
> 
> 标签：jquery, html

我已经简化了我正在使用的代码，但是正如您在我的 Fiddle 中看到的那样，我单击一个按钮以显示一个包含两个输入的对话框。当我按下提交时，我已经想出了如何获得这些输入之一。和：

```
 $(document).ready(function() {
        $('#addthisquote').submit(function() {
            var input = $("input", this).val();
            alert(input);

        });
    }); 
```

[http://jsfiddle.net/SteveRobertson/p6bCW/](http://jsfiddle.net/SteveRobertson/p6bCW/)

如何单独访问这些输入中的每一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:13:10.653

你可以让那些提到他们的身份证的人

```
$('#description').val()
$('#price').val() 
```

或他们的名字属性

```
$('input[name="description"]').val()
$('input[name="price"]').val() 
```

# php - Codeigniter GROUP BY 和 SELECT MAX

> ID：16189264
> 
> 赞同：0
> 
> 时间：2013-04-24T10:11:14.127
> 
> 标签：php, codeigniter, select, activerecord, group-by

这有点难以描述，但在这里。

我正在使用 codeigniter`maintenance_jobs`从一个表中选择并加入另一个名为 的表`maintenance_job_items`，这`maintenance_job_items`是该特定作业的更新列表。

表格如下

```
MAINTENANCE JOBS
|-------|-----------|--------------|
| index | job_title | date_created |
|-------|-----------|--------------| 
```

```
MAINTENANCE_JOB_ITEMS
|-------|-----------------------|-------------|--------------|
| index | maintenance_job_index | description | date_updated |
|-------|-----------------------|-------------|--------------| 
```

我需要能够返回所有维护作业以及`maintenance_job_items`表中的最新更新，然后`date_updated DESC`使用 codeigniter 的活动记录对它们进行排序。我试过`group_by`, `select_max`, `order_by`, 等等，但似乎无法得到我想要的。任何帮助将不胜感激，如果您不明白我的要求，请直说，因为我发现它有点难以解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:34:34.097

尝试这个：

```
$this->db->select("mj.*, mi.date_updated");
$this->db->from('maintenance_job as mj');
$this->db->join('maintenance_job_items as mi','mj.index=mi.maintenance_job_index','left');
$this->db->order_by('mi.date_updated'); 
```

尝试`//echo $this->db->last_query();`检查查询是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:04:00.287

解决方案：1

```
 $this->db->select('MAINTENANCE_JOBS.*,MAINTENANCE_JOB_ITEMS.date_updated');
 $this->db->join('MAINTENANCE_JOBS', 'MAINTENANCE_JOBS.index = MAINTENANCE_JOB_ITEMS.index');
 $this->db->group_by("MAINTENANCE_JOBS.index"); 
 $this->db->order_by("MAINTENANCE_JOBS.date_updated", "desc"); 
 $kd = $this->db->get('MAINTENANCE_JOB_ITEMS');
    $result_array = array();
    foreach ($kd->result_array() as $row)
    {
        $result_array[] = $row;
    }

echo '<pre>'
print_r($result_array);
echo '</pre>' 
```

解决方案：2

```
 $this->db->distinct('MAINTENANCE_JOBS.*,MAINTENANCE_JOB_ITEMS.date_updated');
 $this->db->join('MAINTENANCE_JOBS', 'MAINTENANCE_JOBS.index = MAINTENANCE_JOB_ITEMS.index');
$this->db->order_by("MAINTENANCE_JOBS.date_updated", "desc"); 
$kd = $this->db->get('MAINTENANCE_JOB_ITEMS');
    $result_array = array();
    foreach ($kd->result_array() as $row)
    {
        $result_array[] = $row;
    }

 echo '<pre>'
 print_r($result_array);
 echo '</pre>' 
```

# css - 文本未显示在 div 中的正确位置

> ID：16189266
> 
> 赞同：1
> 
> 时间：2013-04-24T10:11:16.270
> 
> 标签：css

用户名未正确显示在 div 内的正确位置。它显示在 div 元素之外。我尝试更改 text-align 属性，但这不起作用。我不想更改`.rclick`类，因为它正在用于另一个正常工作的元素。我怎样才能使用额外的课程？

php代码

```
echo "<div class=\"rclick\" title=\"{$user}\"  style=\"width: auto;\">";

            if (strlen($user) > 10) 
                {
                    $user = wordwrap($user, 10);
                    $user = substr($user, 0, 10);
                echo "Hi {$user}...";
                }
                else
                {
                echo "Hi {$user}";              
                }
                echo "</div>"; 
```

CSS代码

```
#nav .rclick {
position: relative;
left: 500px;
top: 40px;
width: 250px;
height: 28px;
background: url(../images/Employer.jpg) no-repeat;
color: #FFFFFF;
font-size: 1.14em;
} 
```

![以黑色显示文本](https://i.stack.imgur.com/h22vU.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:32:05.720

为了确保呈现和内容的良好分离，我建议从您的 HTML 标记中删除内联样式规则，并使用 CSS 来定义您的所有样式声明。

由于 CSS 的级联特性，HTML 标记中的内联样式将覆盖`<style>`HTML 页面中标签内的等效声明，这反过来又会覆盖外部样式表中的声明。

如果你想为你的元素应用多个类，你可以同时应用它们，像这样：

```
#nav .customrule
{
    /*extra style definitions*/
} 
```

然后在您的 HTML 中：

```
<div class="rclick customrule" title="monika">Hi monika</div> 
```

因为您相对定位 div，所以您可以将文本包装在一个 span 中，并将其绝对定位在 div 内，以将其放置在您需要的位置：

```
<div class="rclick" title="monika"><span>Hi monika</span></div>

#nav .rclick span
{
    position: absolute;
    left: 10px;
    top: 10px;
} 
```

跨度的原点将是第一个相对定位的容器，在您的情况下是包含 div。

我添加了一个[jsfiddle 示例来](http://jsfiddle.net/52MH8/1/)演示这一点。

# node.js - 为商业目的打包 nodejs 应用程序

> ID：16189275
> 
> 赞同：4
> 
> 时间：2013-04-24T10:11:35.987
> 
> 标签：node.js, compilation, package

我们如何创建一个 nodejs 控制台应用程序包，它是 -

1.  易于安装，只需从控制台下载并运行。

2.  用户不必安装应用程序中使用的 nodejs 和依赖库。

3.  用户无权访问代码。他只能运行应用程序。他应该不能篡改代码。

4.  在多个操作系统上运行。

# asp.net - 多台服务器的正确缓存设置

> ID：16189276
> 
> 赞同：1
> 
> 时间：2013-04-24T10:11:36.647
> 
> 标签：asp.net, caching, redis

我们有 2 台服务器运行一个带有简单负载平衡的 asp.net mvc 应用程序。两个应用程序目前都使用 system.runtime.caching 缓存内容。我们想将所有这些都移动到 redis，因此我们有 1 个中央缓存，而不是 2 个服务器，每个服务器都有自己的。

只需使用 redis 调用更改 system.runtime.caching 调用会很简单。但是如何同步从 2 台服务器对 redis 的访问呢？当缓存项过期以从数据库加载时，可以锁定对 redis 的调用，但由于有 2 个服务器，因此有 2 个 Web 应用程序，这似乎是不可能的。

我们正在考虑设置一个 Web api 服务，以便两个 Web 应用程序在需要缓存项目时与之通信。这是要走的路吗？还是有其他解决方案需要考虑？

我知道这是一个微不足道的问题，但我希望有经验的人能给我们一些指示。

# jquery - 通过悬停，触发另一个元素的悬停

> ID：16189280
> 
> 赞同：0
> 
> 时间：2013-04-24T10:11:47.023
> 
> 标签：jquery, hover, mouseenter

我想通过悬停一个元素来触发另一个元素的悬停，如下所示：

```
$(document).ready(function () {
    $('.quarter h3').mouseenter(function () {
        $(this).next().trigger('mouseenter');
    });
}); 
```

HTML是：

```
<div class="quarter grow">
    <a href="#">
        <h3><span>titel 1</span></h3>
    <img src="http://lorempixel.com/200/230/people/1" alt="">
    </a>
</div> 
```

看看小提琴：http: [//jsfiddle.net/KkYGC/](http://jsfiddle.net/KkYGC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:23:54.917

如果我正确理解你的问题，你可以改变

```
.grow img:hover { 
```

到

```
.grow:hover img { 
```

# java - 有没有办法使用 java socket 程序查找打印机状态？

> ID：16189282
> 
> 赞同：4
> 
> 时间：2013-04-24T10:11:52.367
> 
> 标签：java, sockets, snmp

有什么方法可以使用 java socket 程序查找打印机状态吗？该程序需要识别打印机状态。如

1.  打印机开/关/理想。
2.  当前工作。
3.  试纸水平。
4.  碳粉离开。

我使用了 javax.print API，这可以帮助我在打印机中打印文档并列出 4 个属性

*   打印机正在接受作业：接受作业

*   打印机名称：myPrinter

*   排队作业计数：0

*   颜色支持：不支持

有些人让我使用[snmp4j](http://ruchiram4.blogspot.com/2009/04/buil-your-own-snmp-monitoring-tool.html)或 LPR 来了解状态。

我使用 snmp 编写了一个应用程序。我无法成功。[您可以在链接snmp application](http://shivasoft.in/blog/java/snmp/create-snmp-client-in-java-using-snmp4j/)找到代码形式 。在这段代码中（第 38 行`SNMPManager client = new SNMPManager("udp:127.0.0.1/161");`，我们需要提供打印机的 IP 地址。所以我给了 tcp/ip:127.0.0.1/161）我在线程中遇到异常 Exception `"main" java.lang.IllegalArgumentException: Address type tcp/ip unknown`，我期待帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T15:23:29.947

```
PrintService printer = PrintServiceLookup.lookupDefaultPrintService();
AttributeSet att = printer.getAttributes();

for (Attribute a : att.toArray()) {
    String attributeName;
    String attributeValue;

    attributeName = a.getName();
    attributeValue = att.get(a.getClass()).toString();

    String gh = (attributeName + " : " + attributeValue);

    if (gh.equals("printer-is-accepting-jobs : not-accepting-jobs")) {
        JOptionPane.showMessageDialog(rootPane, "Printer Not Available");
    }

    if (gh.equals("queued-job-count : 0")) {
        JOptionPane.showMessageDialog(rootPane, gh);
    }

    System.out.println(gh);
} 
```

# python - 扭曲的插件/放置它们的位置

> ID：16189283
> 
> 赞同：0
> 
> 时间：2013-04-24T10:11:58.600
> 
> 标签：python, twisted

我刚开始使用twisted。我在理解扭曲的插件系统时遇到了一些问题。我想要实现的是我的应用程序中的一个文件夹/包，我可以在其中放置插件，以便在我启动反应器时扭曲识别它们。

我的项目结构如下所示：

```
MyProj
  |-__init__.py
  |-myproj
      |-__init__.py
      |-imatism.py
      |-twisted
            |-__init__.py
            |-plugins
                 |-simplematerial.py 
```

按照文档[The Twisted Plugin System](http://twistedmatrix.com/documents/12.0.0/core/howto/plugin.html)中的解释，我不确定是否将插件放在正确的包中。插件目录中没有**init** .py ，如教程中所述。启动反应器时不会引发错误，但`getPlugins(MyProj.myproj.imatism.IMaterial)`即使我实例化了两个 SimpleMaterial 对象，也会返回一个空列表。

我还尝试了“备用插件包”（参见上面的链接），它以相同的行为结束 - 没有错误，但也没有插件输出。

可能是插件已加载但未正确实例化或在错误的位置？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:29:43.980

你`init.py`的问题真的是这个意思吗？或者那些是`__init__.py`文件？

如果是后者，请尝试将您的结构更改为：

```
MyProj
  |-myproj
      |-__init__.py
      |-imatism.py
      |-twisted
            |-plugins
                 |-simplematerial.py 
```

重要的是，`__init__.py`将目录制作成 Python（导入样式，而不是分发样式）包。将`__init__.py`into 放入应用程序代码`MyProj`中`import MyProj`是可行的，但由于您没有`__init__.py`in `MyProj/myproj`，因此您将无法这样做，`import MyProj.myproj`因此您的大部分代码可能无法访问。此外，名称中的冗余也不是很有帮助。

我还删除了`__init__.py`from，`MyProj/myproj/twisted`因为这正是 Twisted 插件系统的工作方式：您不会将该目录设为 Python 包，它只是一个常规目录。

# node.js - 原子读写文件。如何在某个位置设置 EOF？

> ID：16189284
> 
> 赞同：2
> 
> 时间：2013-04-24T10:12:07.630
> 
> 标签：node.js, filesystems, fs

我正在构建一个 nodejs 脚本。脚本流程如下：

1.  使用 r+ 标志打开文件。
2.  然后将打开的文件内容（使用 fs.read）读取为 json。
3.  运行用户回调以允许用户操作 json（文件仍处于打开状态）
4.  将新对象写入文件。
5.  关闭文件

我的问题是我不知道如何在不关闭文件的情况下确定文件的新大小。

因此，例如，如果我们首先执行以下代码：

```
ffs.lockAndManipulateJSON(__dirname + '/var/meta.json', function (json) {
   json.test = 'ABC';
   json.foo = 'bar';
}); 
```

在未来的某个时候：

```
ffs.lockAndManipulateJSON(__dirname + '/var/meta.json', function (json) {
   delete json.foo;
}); 
```

文件的内容如下：

```
{
    "test": "ABC"
}    "foo": "bar"
} 
```

但我希望它是：

```
{
    "test": "ABC"
} 
```

所以，我的问题是：如何在文件仍处于打开状态时使用 nodejs 设置新文件大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:55:35.453

fs.ftruncate 应该做你正在寻找的东西。编辑：*请注意，您需要打开文件“w+”才能使用。

# python - 在 Python 中调用 Javascript 函数 - Selenium

> ID：16189295
> 
> 赞同：1
> 
> 时间：2013-04-24T10:12:39.417
> 
> 标签：python, selenium-webdriver

我有这个 HTML 代码，我正在使用 python 脚本处理/报废：

```
<a href="javascript:VerMapa('AVDA. DE AMERICA, 2  -33880 POLA DE ALLANDE','RODRIGUEZ-PELAEZ PEÑA, ANA MARIA','AVDA. DE AMERICA, 2  -33880','33880','ALLANDE','183','178')"><img src="../../Fijos/Img/VerMapa.jpg" alt="" width="25" height="24" border="0">&nbsp;<br>Ver Mapa</a> 
```

这是函数的定义：

```
function VerMapa(direccion,farmacia,domicilio,CP,municipio, numeroOficina,identidad) {
    window.open("googleMaps.aspDir="+direccion+"&Far="+farmacia+"&Dom="+domicilio+"&CP="+CP+"&Mun="+municipio+"&NO="+numeroOficina+"&Id="+identidad+"&",'Lista','toolbar=no, menubar=no, scrollbars=yes,resizable=yes,status=yes,screenX=50,top=50,width=740,height=530');
} 
```

我需要`VerMapa('AVDA. DE AMERICA, 2 -33880 POLA DE ALLANDE','RODRIGUEZ-PELAEZ PEÑA, ANA MARIA','AVDA. DE AMERICA, 2 -33880','33880','ALLANDE','183','178')`在 href 属性中调用 javascript 函数并获取返回的 HTML 代码。

我已经检查了蜘蛛猴和 PyV8，但我认为他们在这里帮不了我。蜘蛛猴很清楚地告诉你不能调用 javascript 定义的函数。

我现在正在尝试使用 Selenium，但我不知道如何将源代码返回给 python。

据了解，我刚刚实现了一个测试脚本并设法在浏览器窗口中加载请求的页面。

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get("http://www.farmasturias.org/GESCOF/cms/Guardias/FarmaciaBuscar.asp?IdMenu=111")
htmlCode = browser.execute_script("return VerMapa('AVDA. DE AMERICA, 2  -33880 POLA DE ALLANDE','RODRIGUEZ-PELAEZ PEÑA, ANA MARIA','AVDA. DE AMERICA, 2  -33880','33880','ALLANDE','183','178')")
print htmlCode; 
```

1.- 我在 htmlCode var 中没有得到任何东西。¿我怎样才能取回由 javascript 函数生成的源代码？我已经从这篇文章中[获取语法在 Selenium 中获取 Javascript 代码的返回值](https://stackoverflow.com/questions/5585343/getting-the-return-value-of-javascript-code-in-selenium/5585345#5585345)

2.- 有没有办法在不打开任何浏览器窗口的情况下使用 Selenium？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T22:01:47.700

该`VerMapa`函数没有返回值。这就是为什么您的`htmlCode`变量不显示任何内容的原因。

要获取新窗口的源，首先调用`VerMapa`，然后切换到新窗口，然后获取源。

```
# get all open windows
handles = set(broswer.window_handles)

# remove the current window from the set
handles.remove(browser.current_window_handle)

# switch to the other window
browser.switch_to_window(handles.pop())

# get the source of that window
htmlCode = browser.page_source 
```

# jquery - 如何使用 JQueryMobile 创建右侧屏幕的按钮约束

> ID：16189297
> 
> 赞同：0
> 
> 时间：2013-04-24T10:12:41.603
> 
> 标签：jquery, html, css, jquery-mobile, jquery-mobile-button

我对 JQueryMobile 和一般网络非常陌生。
如何将按钮约束放置在填充屏幕高度的右侧。

这是我想要实现的目标的说明：
![在此处输入图像描述](https://i.stack.imgur.com/Ngmsu.jpg)

所有内容（徽标 + 文本）都应该在`<div data-role="content">`, 中（或者可能不是？）。再一次，我对这个平台很陌生。
关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:38:29.783

工作示例：http: [//jsfiddle.net/XF6NV/](http://jsfiddle.net/XF6NV/)

**HTML：**

```
<!DOCTYPE html>
<html>
    <head>
        <title>jQM Complex Demo</title>
        <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
    </head>
    <body>
        <div data-role="page" id="index">
            <div data-theme="a" data-role="header">
                <h3>
                    First Page
                </h3>
                <a href="#second" class="ui-btn-right">Next</a>
            </div>

            <div data-role="content">
                <fieldset class="container_12">
                    <div class="grid_11">
                       Put your content here
                    </div>
                    <div class="grid_1"><a data-role="button" id="custom-btn">></a></div>                  
                </fieldset>
            </div>

            <div data-theme="a" data-role="footer" data-position="fixed">

            </div>
        </div>    
    </body>
</html> 
```

**Javascript：**

```
$(document).on('pageshow', '#index', function(){     
    //Remove button corners
    $("#custom-btn").buttonMarkup({corners: false });    
    // Set content height to full availabe, normaly content will only be high as its content
    $('[data-role="content"]').height(getRealContentHeight());

    // horizontaly center button text
    $('.ui-btn-inner').css({
        position:'absolute',
        top: (getRealContentHeight() - $('.ui-btn-inne').outerHeight())/2
    });    
});

// Used to determine real availabe content size    
function getRealContentHeight() {
    var header = $.mobile.activePage.find("div[data-role='header']:visible");
    var footer = $.mobile.activePage.find("div[data-role='footer']:visible");
    var content = $.mobile.activePage.find("div[data-role='content']:visible:visible");
    var viewport_height = $(window).height();

    var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
    if((content.outerHeight() - header.outerHeight() - footer.outerHeight()) <= viewport_height) {
        content_height -= (content.outerHeight() - content.height());
    } 
    return content_height - 1;
} 
```

**CSS：**

```
 /* remove content padding */
.ui-content {
    padding: 0 !important;
}

#custom-btn {
    margin: 0 0 !important;
    height: 99.7%;
    width: 100%;
}
/* Set grid height to be full 100% of content height */
.container_12, .grid_1, .grid_11 {
    height: 100% !important;
} 
```

其他框架：

**[Fluid960 for jQuery Mobile](http://jeromeetienne.github.com/jquery-mobile-960/css/jquery-mobile-fluid960.css)** - 用作比官方 jQuery Mobile 更好的第 3 方网格。我们需要它来将按钮移动到右侧。

# symfony - 唯一约束 - Symfony2 和 Doctrine2

> ID：16189300
> 
> 赞同：1
> 
> 时间：2013-04-24T10:12:52.597
> 
> 标签：symfony, doctrine, unique-constraint

我找不到以我可以理解的方式编写的文档，所以我向您寻求帮助。这个问题与[唯一实体有关 - Symfony2](https://stackoverflow.com/questions/15616342/unique-entity-symfony2)

我有一个名为**category**的表，其中包含三个字段 - **id**、**fos_user_id**和**name**。另一个表称为**fos_user**并具有字段 id、username 等。

我希望类别对用户来说是唯一的。一个用户不能有两个名为“食品”的类别，但所有用户都可以有一个名为“食品”的类别。

在另一个问题中，有人建议我尝试这样的事情：

```
* @ORM\Table(name="categories",
*            uniqueConstraints={@ORM\UniqueConstraint(name="name_user_id__idx", 
*                                                     columns={"name", "user_id"})}) 
```

我试过这个：

```
/**
 * @ORM\Entity
 * 
 * @ORM\Table(name="category", 
 *              uniqueConstraints={@ORM\UniqueConstraint(name="name_user_idx",                                                     
                                           columns={"name", "fos_user_id"})}))
 * @ORM\Entity(repositoryClass="Acme\BudgetTrackerBundle\Entity\CategoryRepository")
 * @UniqueEntity(fields={"name", "fos_user_id"}, message="There already is such a category.")
 */ 
```

但我收到此错误：

> 字段 'fos_user_id' 没有被 Doctrine 映射，因此无法验证其唯一性。

我不太明白这个错误。而且我不明白有约束的部分。这是正确的语法和正确的写法吗？

非常感谢您！

PS：对不起，如果我不应该提出一个新问题，但我添加了很多新东西，并决定一个新问题比编辑旧问题并在评论中提问要好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T15:10:49.703

For relations like Category, User etc... you should not use unique constraints on columns but on relations. For example:

instead of

```
@UniqueEntity(fields={"name", "fos_user_id"}) 
```

try

```
@UniqueEntity(fields={"name", "user"}) 
```

where "user" is the name of mapped field to relation with User entity.

# android - 使用 ItemisedOverlay Android 的多个标记

> ID：16189301
> 
> 赞同：0
> 
> 时间：2013-04-24T10:12:54.913
> 
> 标签：android, android-mapview, android-maps

在我的应用程序中，我的网络服务有多个纬度和经度。此时，我只能使用下面的代码在 goole 地图上显示一个坐标。

```
public class CustomMap extends MapActivity {

    MapView mapView;
    List<Overlay> mapOverlays;
    Drawable drawable;
    Drawable drawable2;
    CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gmap);
        //setContentView(LayoutInflater.from(getParent()).inflate(R.layout.main_ou, null));

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapOverlays = mapView.getOverlays();

        // second overlay
        drawable2 = getResources().getDrawable(R.drawable.red);
        itemizedOverlay2 = new CustomItemizedOverlay<CustomOverlayItem>(drawable2, mapView);
        GeoPoint point3 =  new GeoPoint((int)(-10.224609*1E6),(int)(17.506044*1E6));
        CustomOverlayItem overlayItem3 = new CustomOverlayItem(point3, "Title", 
        "Cliquez here", null);

        itemizedOverlay2.addOverlay(overlayItem3);
        //itemizedOverlay2.onTap(0);

        mapOverlays.add(itemizedOverlay2);

        final MapController mc = mapView.getController();
        mc.animateTo(point3);
        mc.setZoom(16);

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

现在，我想使用数组在地图上动态设置纬度和经度。我正在使用 ArrayList val；获取和设置数据。有人可以给我一个关于如何让课堂充满活力的提示吗？

**新更新下面的代码仅显示一个标记，但我希望所有标记都出现**

```
public class Map extends MapActivity {

     private MapController mapControll;
     private GeoPoint geoPoint=null;
     private MapView mapview;
     private MyItemizedOverlay userPicOverlay;
     private MyItemizedOverlay nearPicOverlay;
     private Drawable userPic,atmPic;
     private CustomOverlayItem nearatms[] = new CustomOverlayItem[50];
     public static Context context;

     double latitude,longitude;

    ArrayList<Article> mArticles;
    CustomOverlayItem overlayItem3 ;
    public ArrayList<Article> articles;
    public static ArrayList<Article> article;

    EditText search;
    DBHelper helper;
    GeoPoint point;

    MapView mapView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.aproximite);
        context = getApplicationContext();

        mapView = (MapView) findViewById(R.id.mapview);
        mapView = (MapView) findViewById(R.id.mapview);
        search = (EditText)findViewById(R.id.search_box);

        helper = DBHelper.getInstance(this);

        geoPoint = new GeoPoint((int)(latitude * 1E6),(int)(longitude * 1E6));          
        mapview = (MapView)findViewById(R.id.mapview);
        mapControll= mapview.getController();
        mapview.setBuiltInZoomControls(true);
        mapview.setStreetView(true);
        mapControll.setZoom(16);
        mapControll.animateTo(geoPoint);

        userPic = this.getResources().getDrawable(R.drawable.boutton_log);
        userPicOverlay = new MyItemizedOverlay(userPic);
        OverlayItem overlayItem = new OverlayItem(geoPoint, "I'm Here!!!", null);
        userPicOverlay.addOverlay(overlayItem);
        mapview.getOverlays().add(userPicOverlay);

        atmPic = this.getResources().getDrawable(R.drawable.boutton_log);
        nearPicOverlay = new MyItemizedOverlay(atmPic);

        new GetLocationTask().execute();

    }

private class GetLocationTask extends AsyncTask<Void, Void, Void> {

        @Override
        public Void doInBackground(Void... params) {
            mArticles = helper.getArticlesList();

            return null;
        }

        @Override
        public void onPreExecute() {}

        @Override
        public void onPostExecute(Void result) {            

          try {

                for (int i = 0; i < mArticles.size(); i++) {

                    point =  new GeoPoint((int)(Double.parseDouble(mArticles.get(i).getLatitude())*1E6),(int)(Double.parseDouble(mArticles.get(i).getLongitude())*1E6));
                    nearatms[i] = new CustomOverlayItem(point ,"title", 
                    "click here", null);

                    nearPicOverlay.addOverlay(nearatms[i]);
                }
                mapview.getOverlays().add(nearPicOverlay);
                //Added symbols will be displayed when map is redrawn so force redraw now
                mapview.postInvalidate();
            } catch (Exception e) {
                e.printStackTrace();
            }

        }
     }

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

} 
```

MyItemizedOverlay.class

```
public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> myOverlays ;

    public MyItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        myOverlays = new ArrayList<OverlayItem>();
        populate();
    }

    public void addOverlay(OverlayItem overlay){
        myOverlays.add(overlay);
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return myOverlays.get(i);
    }

    // Removes overlay item i
    public void removeItem(int i){
        myOverlays.remove(i);
        populate();
    }

    // Returns present number of items in list
    @Override
    public int size() {
        return myOverlays.size();
    }

    public void addOverlayItem(OverlayItem overlayItem) {
        myOverlays.add(overlayItem);
        populate();
    }

    public void addOverlayItem(int lat, int lon, String title) {
        try {
            GeoPoint point = new GeoPoint(lat, lon);
            OverlayItem overlayItem = new OverlayItem(point, title, null);
            addOverlayItem(overlayItem);    
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
    }

    @Override
    protected boolean onTap(int index) {
        // TODO Auto-generated method stub
        String title = myOverlays.get(index).getTitle();
        System.out.println(index);
        return super.onTap(index);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:21:46.917

用这种方式。。

对于谷歌地图 v1 --> [https://stackoverflow.com/a/9630396/1168654](https://stackoverflow.com/a/9630396/1168654)

对于 Google MAP v2，请检查以下代码

调用这个方法

```
for(int i = 0 ; i < arraylist.size();i++){
    addMarker(mapview,arraylistLat.get(i),arraylistLong.get(i),title.get(i),arraysnippet.get(i));
} 
```

* * *

```
private void addMarker(GoogleMap map, double lat, double lon,
            String string, String string2) {
        map.addMarker(new MarkerOptions().position(new LatLng(lat, lon))
                .title(string).snippet(string2));
    } 
```

# android - smsManager.sendTextMessage 的 Android sentIntent 使 UI 刷新

> ID：16189302
> 
> 赞同：0
> 
> 时间：2013-04-24T10:12:55.390
> 
> 标签：android, user-interface, smsmanager

以前有没有人遇到过这个问题，或者有人可以向我解释发生了什么吗？

**代码描述：** 以下代码从我的对象 ContactFromXML 中获取一些信息，并在需要的地方发送一些文本消息。

**代码：**

```
 PendingIntent pi = PendingIntent.getActivity(this, 0, new Intent(this, MainActivity.class), 0); 
        for (int i=0; i<contactsCount;i++){
            while(contactsIt.hasNext()){
                ContactFromXML contact = contactsIt.next();
                if (mTeam.equals(contact.mTeam)){
                    smsMessage = String.format(getResources().getString(R.string.mess_sms_message), contact.mVoornaam, mTimeOfArrival);
                    smsManager.sendTextMessage(contact.mTel, null, smsMessage, pi , null);
                }
            }
        } 
```

**问题：** 对于我的代码发送的每条短信，它都会刷新 UI。首先，我认为这将是因为消息是从我的 UI 线程发送的，所以我将其放入 AsyncTask 中。但这并没有解决任何问题。经过一番测试，我发现这是因为 de SentItent 'pi'。如果我不使用一个，它没有问题。

**问：** 谁能解释一下？我真的很想使用该功能来查看是否实际发送了短信，而用户不会注意到 UI 刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:39:06.447

根据[Android Developer Site](http://developer.android.com/reference/android/telephony/gsm/SmsManager.html#sendTextMessage%28java.lang.String,%20java.lang.String,%20java.lang.String,%20android.app.PendingIntent,%20android.app.PendingIntent%29)的说法，`sentIntent`这是一个`PendingIntent`发送`when the message is successfully sent, or failed.`在这里您正在设置一个活动`PendingIntent`，因此每当您的消息被发送`sent`或`failed`将被发送时，您的`PendinfIntent`被激活，并刷新您的活动。

# javascript - 正则表达式仅验证数字字符串和长度

> ID：16189304
> 
> 赞同：0
> 
> 时间：2013-04-24T10:12:55.853
> 
> 标签：javascript, jquery-mobile

在使用 javascript 将信息发送到服务器之前，我正在尝试验证一个字符串。我想确保字符串长度为 9，并且它只包含数字。

顺便提一下，这个项目使用 jquery 移动控件。

**这是我的 html 控件：**

```
<div data-role="content" style="text-align: center;">
                <div data-role="fieldcontain">
                     <label for="Childid">
                        Child ID</label>
                    <input id="childid" class="textBox" value=""  type="text"/>

                    <label for="ChildfirstName">
                        Child first name</label>
                    <input id="ChildfirstName" class="textBox" value=""  type="text"/>

                     <label for="Childlastname">
                        Child last name</label>
                    <input id="ChildlastName" class="textBox" value=""  type="text"/>

                 <label for="Childmail">
                        Child Mail</label>
                    <input id="ChildMail" class="textBox" value=""  type="text"/>
                </div>

                <label for="Childbudget">
                        Child monthly budget</label>
                    <input id="childmbudget" class="textBox" value=""  type="text"/> 
```

**我也写了这个函数：**

```
function validateID(id) {
    var re = /\d{9}/;
    return re.test(id);
} 
```

**并像这样使用它：**

```
var id = $('#childid').val();

if( validateID(id) == false )
  $("#fillthefields").popup("open") 
```

但它似乎没有正确验证。

如果我已经在问，我如何验证字符串只包含数字而不是从零位开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:15:18.383

您实际上不需要正则表达式。

你可以使用

```
return (id.length === 9 && !isNaN(id)); 
```

* * *

编辑：回复塞缪尔的评论

[MDN: isNaN()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)

[MSDN：isNaN()](http://msdn.microsoft.com/en-us/library/ie/66ztdbe6%28v=vs.94%29.aspx)

> 返回值
> 
> 如果转换为 Number 类型的值是 NaN，则为 true，否则为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:17:15.263

使用正则表达式，它将检查仅包含 9 位数字且不以零开头的字符串。

```
var re = /^[1-9]\d{8}$/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:18:13.183

改变

```
if(validateID(id) == false ) 
```

到

```
if(validateID(id)) 
```

并将您的正则表达式更改为

```
var re = /^[1-9]\d{8}$/; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T13:31:22.237

HTML5 模式会起作用吗？

```
 pattern="[0-9]{9}" 
```

数字不能以零开头

```
pattern="[1-9]{1}[0-9]{8}" title="Please enter 9 digits, can not start with 0" 
```

例子：

*   [http://jsfiddle.net/maLE6/](http://jsfiddle.net/maLE6/)
*   [http://jsfiddle.net/zZyN4/](http://jsfiddle.net/zZyN4/)（不能从零开始）

参考

*   [http://www.w3.org/TR/2009/WD-html5-20090825/forms.html#attr-input-pattern](http://www.w3.org/TR/2009/WD-html5-20090825/forms.html#attr-input-pattern)

HTML

```
<h1>A Simple HTML5 Form Validation</h1>
<p>Leave the field empty and submit the form to see what happens.</p>

<form>
    <label for="name">* Name</label>
    <input type="text" id="name" pattern="[0-9]{9}" title="Please enter 9 digits" required>
    <input type="submit" value="Submit">
</form>

<footer>Which browsers support this feature? - <a href=http://caniuse.com/form-validation>Caniuse.com</a></footer> 
```

# javascript - 如何知道 enyo 组件的“种类”？

> ID：16189305
> 
> 赞同：1
> 
> 时间：2013-04-24T10:12:57.570
> 
> 标签：javascript, enyo

我有一个类似 tweetEnyo 的组件，它是用 enyo 脚本创建的。并基于其种类，我想执行一些操作。

有没有办法在运行时找到在 enyo 中创建的组件类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:30:20.303

您应该能够`kind`在运行时访问该属性。这是一个检测所选项目种类的示例：

[http://jsfiddle.net/RoySutton/frTFK/](http://jsfiddle.net/RoySutton/frTFK/)

如果需要使用调试器找到它，可以将 ID 与全局 enyo 对象的 $ 哈希一起使用。例如：

```
enyo.$.app_myKind.kind 
```

不要从即将发布的博客文章中抢走风头，但在 Chrome/Firefox 网络检查器中，$0 是最后一个检查的元素。所以，`enyo.$[$0.id].kind`是检查项目的种类。

我确实注意到在我的示例中 App 与它没有关联。确定为什么会这样。

更新： App 未使用特定种类声明，在这种情况下将回退到父级的默认种类`Control`。您可以使用 访问该值`.defaultKind`。此外，您可以使用对种类的实际引用来指定种类（例如 kind: `enyo.Button`），因此`.kind`不能依赖。

获取名称的正确方法是使用`.kindName`，这将是实际的种类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:43:07.887

来自 enyo 网站：

> 基础 enyo.Control 的工作方式很像 HTML 标记。您可以分配类和属性并为其赋予样式。例如

```
new enyo.Control({content: "Hello From Enyo", classes: "foo",
    style: "color: red", attributes: {tabIndex: 0}}).renderInto(document.body); 
```

所以你可以这样做：

```
new enyo.Control({content: "Hello From Enyo", classes: "foo",
                  style: "color: red", attributes: {tabIndex: 0, enyo:true}}).renderInto(document.body); 
```

它将 enyo 的 attr 设置为 true 并检查它。任何有它的东西都是 enyo 组件。

示例：http: [//jsfiddle.net/NKTRe/](http://jsfiddle.net/NKTRe/)

# generics - mtouch AOT 缺少编译

> ID：16189318
> 
> 赞同：0
> 
> 时间：2013-04-24T10:13:38.777
> 
> 标签：generics, xamarin.ios, aot

我在使用 mtouch 时遇到了奇怪的行为；我知道 AOT 在特定情况下可能会失败，但我认为这个问题有点不同。

这是一些代码：

```
public class TTableCell
{
}

public class TTableElement<T>
    where T: TTableElement<T>
{
    public void SetProperty<TV> (ref TV backingStorage, string propName, TV value)
    {
        backingStorage = value;
    }
}

public class TAbstractTableItem<TC> : TTableElement<TAbstractTableItem<TC>>
    where TC : TTableCell
{
    public TAbstractTableItem ()
    {
    }

    string _string;
    bool _bool;

    public void DoException ()
    {
        SetProperty (ref _string, "String", "Bla bla");
        SetProperty (ref _bool, "Boolean", false);
    }
} 
```

现在，如果在其他地方执行以下操作：

```
TTableItem<TTableCell> item = new TTableItem<TTableCell> ();
item.DoException (); 
```

我得到了例外：

```
Unhandled managed exception: Attempting to JIT compile method 'TouchSandbox.TTableElement`1<TouchSandbox.TAbstractTableItem`1<TouchSandbox.TTableCell>>:SetProperty<bool> (bool&,string,bool)' 
```

现在，请注意仅针对布尔版本的 引发异常`SetProperty<T>`，而不是字符串之一。在我的项目中，我使用了多种类型的方法（自定义类型），这个问题只发生在 bool 上。

有人可以帮我解决这个问题吗？

谢谢

塞尔吉奥

PS显然这个问题只存在于iDevice（不是模拟器）

**更新**

好的，在对 xamarin 的 bugzilla 进行了一些搜索后，我发现了一张票（实际上有点旧！），突出了 mtouch AOT 的不足：[Bug 2096](https://bugzilla.xamarin.com/show_bug.cgi?id=2096)。可悲的是，他们似乎还没有修复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:19:45.707

泛型类中的泛型方法似乎存在问题。

我还尝试了 6.3 beta 的测试用例（这可能会解决这个问题，因为很多事情都在这个领域有所改进），但它崩溃而不是抛出异常（[错误提交](https://bugzilla.xamarin.com/show_bug.cgi?id=11933)- 你可以自己抄送以在它更新时进行更新固定的）。

# php - 在函数中检查和设置 cookie

> ID：16189320
> 
> 赞同：0
> 
> 时间：2013-04-24T10:13:44.203
> 
> 标签：php, cookies, setcookie

我编写了一个函数来检查是否设置了 cookie，如果未设置则设置 cookie。

因为 cookie 不能立即使用，所以我需要刷新一次页面，所以我可以访问该值。

但是，当我调用该函数时，它只会不断重新加载页面。在功能之外时，它可以正常工作。只有当它在函数内部并且我调用它时才会发生。

```
function getCookie (){
    if(isset($_COOKIE['ID'])){
        $cookieID = $_COOKIE['ID'];
    }
    else{
        //generate random value for cookie id
        $charid = strtoupper(md5(uniqid(rand(), true)));
        $uuid =  substr($charid, 0, 8)
                 .substr($charid,20,12);

        setcookie( "ID", $uuid, strtotime( '+7 days' ) ); 
        $cookieID = $_COOKIE['ID'];
        echo "<META HTTP-EQUIV='Refresh' CONTENT='0'>  ";
    }
    echo $cookieID;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:21:10.900

这是一个工作的php页面......

```
<?php

function getCookie (){
    if(isset($_COOKIE['ID'])){
        $cookieID = $_COOKIE['ID'];
    }
    else{
        //generate random value for cookie id
        $charid = strtoupper(md5(uniqid(rand(), true)));
        $uuid =  substr($charid, 0, 8)
                 .substr($charid,20,12);

        setcookie( "ID", $uuid, strtotime( '+7 days' ) ); 
        $cookieID = $_COOKIE['ID'];

        //just assign the cookie the value as if it was in the header. 
        //no refresh needed.
        $_COOKIE['ID'] = $uuid;

    }
}

?>
<html>
<body>
<?php 
  getCookie();
  echo $_COOKIE['ID']; 
?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:29:56.377

检查 excacly`isset`返回的内容。从您的描述看来，在第一次执行此代码后根本没有设置 cookie。在 FireFox 中，您可以检查是否使用`firebug`工具设置了 cookie。

一个好主意是比较任何类型的数据，`if`例如，`if(isset($some_var) === true){`而不是`if(isset($some_Var)){`. 请记住：

`$v = 0;`

`if($v == 0){ }` 返回真

`if($v === 0){ }`返回真

`if($v == false){ }`返回真

`if($v === false){ }`返回假

# php - 需要帮助制作一个显示类别的 wordpress 循环，如果它是真的，

> ID：16189323
> 
> 赞同：0
> 
> 时间：2013-04-24T10:13:53.660
> 
> 标签：php, wordpress

目前我只是在理论上思考我需要做什么，我正在编辑另一个开发人员的代码，所以它可能会有点棘手。

我创建了一个名为“home”的新类别，并希望我分配给该类别的帖子覆盖主页上显示的当前帖子。因此，如果它被选中，它将出现在主页上。

我有 3 种自定义帖子类型，每种类型都有一个名为 home 的类别。

这是我目前获得的显示最新帖子的代码。它没有改变，我只需要一点指导。

```
<?php
$query               = new WP_Query('post_type=testimonial&showposts=1&paged=' . $paged);
$postcount           = 0; ?>

 <?php if ($query->have_posts()) : ?>
<?php while ($query->have_posts()) : $query->the_post(); ?>
<?php $postcount++; ?>

<li> 
<a href="<?php the_permalink(); ?>"></a>
<a href="<?php the_permalink(); ?>">

<?php
if (has_post_thumbnail()) { 
// check if the post has a Post Thumbnail assigned to it.
the_post_thumbnail('thumb-casestudy');
                                    }else { 
                                    ?>

<img src ="<?php bloginfo('template_url'); ?>/assets/images/default.jpg" alt="<?php the_title(); ?>"/>
<?php } ?></a>
<h4><a href  ="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
<p class     ="hm_text"><?php 
//the_excerpt(); 
echo get_post_meta($query->post->ID, 'wpld_cf_home_page_text', true) ?></p>

</li>
<?php endwhile; ?>
<?php else : ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:41:00.857

> **创建您的帖子类别名称 = 主页**

```
 <?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    $args = array(
        'category_name'=>'home',
        'post_type' => 'post',
        'showposts' => '10',
        '&paged' => $paged,
    );
    $wp_query->query( $args );
    $postcount           = 0; 
?>

<?php if ($wp_query->have_posts()) : ?>
<?php while ($wp_query->have_posts()) : $wp_query->the_post(); ?>
<?php $postcount++; ?>
<li> 
    <a href="<?php the_permalink(); ?>">
    <?php
        if (has_post_thumbnail()) { 
                the_post_thumbnail('thumb-casestudy');
        }else { 
    ?>
        <img src ="<?php bloginfo('template_url'); ?>/assets/images/default.jpg" alt="<?php the_title(); ?>"/>
    <?php } ?>
        </a>
    <h4><a href ="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>
</li>
<?php endwhile; ?>
<?php else : ?>
<?php endif; ?> 
```

# apache-camel - 分布式企业集成模式

> ID：16189325
> 
> 赞同：0
> 
> 时间：2013-04-24T10:13:57.027
> 
> 标签：apache-camel, enterprise, integration-patterns

我正在开发一个使用骆驼的云应用程序。它将消息发送到由 Web 服务使用的 SQS 队列。是否有解决方案可以在应用程序扩展时控制每个骆驼生产者服务？即开始/停止路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:53:05.090

只要您有骆驼上下文的句柄并知道路线 ID，您就可以开始和停止路线。还要考虑恢复/暂停路线。

看看[http://camel.apache.org/how-can-i-stop-a-route-from-a-route.html](http://camel.apache.org/how-can-i-stop-a-route-from-a-route.html)

# javascript - Javascript onclick

> ID：16189327
> 
> 赞同：1
> 
> 时间：2013-04-24T10:14:02.140
> 
> 标签：javascript, onclick, document.write

我在使用 javascript 时遇到问题。我正在尝试创建一个按钮，该按钮将导致一些内容加载到我得到的内容之上。我创建了一些函数来做到这一点。如果脚本已经加载，如果我在 HTML 页面上测试该函数，它会完美运行，但是，当我使用 onclick 事件调用该函数时，它只会创建一个包含内容的全新 .html 页面。

我知道这一点是因为我保存了它创建的页面，然后我查看了源代码，它只是一个空白页面，其中 javascript 函数的内容写在 body 标记中。

这是HTML。

```
 <ul class="sub-menu">
                <li onclick='articleRead("test", DeviantArtUpdateContent)'><a href="#Deviant Art Update">Deviant Art Update</a></li>
                <li><a href="#">'Triumph At Last' Album Preview</a></li>
                <li><a href="#">Short Funny and Stupid</a></li>
                <li><a href="#">Project Preview</a></li>

            </ul>

<div id="aID"></div> 
```

这是javascript。

```
function articlePopUp   ( title , content)  {
document.write('<div class="backgroundFade"></div>');
document.write('<div class="articlePosition"><div class="closeArticle">Close</div>');
document.write('<div class="articleRead">');
document.write('<h1>');
document.write(title);
document.write('</h1>');
document.write('<div class="grey-line"></div>');
document.write(content);
document.write('</div></div>');
}
function articleRead ( title, content)  {
    document.getElementById("aID").innerHTML=articlePopUp(title,content);   
} 
```

就像我之前说的，如果我只是在没有 onclick 事件的情况下调用 HTML 文档中的函数，它会按照我想要的方式工作，但是添加 onclick 事件会在我单击它时创建一个空白文档。我想将该函数写入预期 div id 中的现有文档中。提前感谢任何帮助，这真的让我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:15:53.283

页面加载完成后，进入*关闭*状态。

调用`document.write`已关闭的文档将隐式调用`document.open`它将启动一个新文档。

无论如何，您都不想将内容添加到文档中`articlePopUp`。您正在尝试将其返回值分配给`innerHTML`属性。由于没有明确的返回值，也就是说`undefined`（由于上述原因，该元素无论如何都不存在）。

让你的函数构建一个字符串并返回它。

```
var html = '<div class="backgroundFade"></div>';
html = html + '<div class="articlePosition"><div class="closeArticle">Close</div>';
// etc
return html; 
```

更好的是，使用[`createElement`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement),[`createTextNode`](https://developer.mozilla.org/en-US/docs/DOM/document.createTextNode)和[`appendChild`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:17:14.210

`document.write`如果在页面加载后调用它，它将清空整个页面。您可能想`innerHTML`改用。

```
function articlePopUp( title , content)  {
    htmlContent = '';
    htmlContent += '<div class="backgroundFade"></div>';
    htmlContent += '<div class="articlePosition"><div class="closeArticle">Close</div>';
    htmlContent += '<div class="articleRead">';
    htmlContent += '<h1>';
    htmlContent += title;
    htmlContent += '</h1>';
    htmlContent += '<div class="grey-line"></div>';
    htmlContent += content;
    htmlContent += '</div></div>';
    return htmlContent;
}
function articleRead ( title, content)  {
    document.getElementById("aID").innerHTML = articlePopUp(title,content);
} 
```

# javascript - 如何在PHP中添加从数组填充的表格行

> ID：16189331
> 
> 赞同：0
> 
> 时间：2013-04-24T10:14:12.140
> 
> 标签：javascript, php, mysql, rows

我正在尝试从应用程序中提取一些信息，然后基于此数组创建表行，而我在这段代码中间迷失了我需要帮助。

提交代码为：

```
<?php
session_start(); // NEVER forget this!
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("webauth", $con);
$myusername = $_SESSION['myusername'];
//$result = mysql_query("SELECT * FROM user_pwd");
$sql5 = ("SELECT dept from `user_pwd` WHERE  name = '$myusername'");
$result5=mysql_query($sql5);
$row5=mysql_fetch_array($result5);
// echo "<br />";

mysql_close($con);
$url3 = 'http://localhost:1090/WebEmpLoad.hal';
$myvars3 = 'department='.$row5['dept'];
$ch3 = curl_init( $url3 );
curl_setopt( $ch3, CURLOPT_POST, 1);
curl_setopt( $ch3, CURLOPT_POSTFIELDS, $myvars3);
curl_setopt( $ch3, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt( $ch3, CURLOPT_HEADER, 0);
curl_setopt( $ch3, CURLOPT_RETURNTRANSFER, 1);
$response3 = curl_exec( $ch3 );
//echo $response3;
$arr = (explode(',',$response3,100));
$Num = sizeof($arr);
$rows = ($Num - 1)/2;
echo $rows;
?> 
```

我正在尝试根据`$arr`.

[在此处](http://jsfiddle.net/E3gWX/1/)检查代码和脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:48:29.177

可以做一些事情来改进你的脚本。由于您的问题如此广泛，我将指出其中的一些..

第一的..

```
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
} 
```

可以简写为

```
$con = mysql_connect("localhost","root","") or die('Could not connect: ' . mysql_error()); 
```

其次，您忘记在`mysql_query()`. 尽管此参数是可选的，但顺便说一下，您已经获得了变量名 ( `$sql15`)，我假设您可能有多个连接。

```
$result5=mysql_query($sql5, $con); 
```

另外，我不确定你在这里做什么..

```
$sql5 = ("SELECT dept from `user_pwd` WHERE  name = '$myusername'"); 
```

就我所知，你的语法可能完全有效，但我以前从未见过这样定义的字符串，快速的谷歌搜索也没有显示任何东西..所以你可能想把它改成..

```
$sql5 = "SELECT dept from `user_pwd` WHERE  name = '$myusername'"; 
```

接下来，在调用数据之前关闭连接。您可能希望将`mysql_close()`下移到 AFTER 之后的行`$myvars3 = 'department='.$row5['dept'];`

哦，您正在使用`mysql_fetch_array()`然后将其称为关联数组 ( `$row5['dept']`)。为了安全起见，像这样更改`$row5=mysql_fetch_array($result5);`或`$row5=mysql_fetch_assoc($result5);`添加关联数组结果类型。`$row5=mysql_fetch_array($result5, MYSQL_ASSOC);`

最后，我们将解决您的数据上传问题。

我不知道您是如何解决的，但您基本上是在获取一个网页并将其分解为一个数组，无论哪里有逗号，并尝试将该数组上传到表格中。除非您确切知道该页面上出现了多少逗号，并且您知道该数字与表中的列数相匹配，否则这是一个非常糟糕的主意。我不知道您要完成什么，但我向您保证，有更好的方法。

并回答你实际的问题.. 插入行的 SQL 语法是 "INSERT INTO table (column1, column2) VALUES ('value1', 'value2')";

最后注..您使用的是旧 API，请切换到 PDO。[在此处](http://www.php.net/manual/en/function.mysql-query.php)查看大红色警告

所以，把它们放在一起......

```
session_start(); // NEVER forget this!
$con = mysql_connect("localhost","root","") or die('Could not connect: ' . mysql_error());
mysql_select_db("webauth", $con);
$myusername = $_SESSION['myusername'];
//$result = mysql_query("SELECT * FROM user_pwd");
$sql5 = "SELECT dept from `user_pwd` WHERE  name = '$myusername'";
$result5=mysql_query($sql5, $con);
$row5=mysql_fetch_assoc($result5);
// echo "<br />";

$url3 = 'http://localhost:1090/WebEmpLoad.hal';
$myvars3 = 'department='.$row5['dept'];
mysql_close($con);
$ch3 = curl_init( $url3 );
curl_setopt( $ch3, CURLOPT_POST, 1);
curl_setopt( $ch3, CURLOPT_POSTFIELDS, $myvars3);
curl_setopt( $ch3, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt( $ch3, CURLOPT_HEADER, 0);
curl_setopt( $ch3, CURLOPT_RETURNTRANSFER, 1);
$response3 = curl_exec( $ch3 );
//echo $response3;
$arr = (explode(',',$response3,100));
$Num = sizeof($arr);
$rows = ($Num - 1)/2;
echo $rows; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:13:21.717

好吧，我明白你在做什么。

试试这个。

```
echo "<table>";
$col = "left";
foreach($rows as $row){
    if($col == "left"){
        echo "<tr><td>$row</td>";
        $col = "right";
    }else{
        echo "<td>$row</td></tr>";
        $col = "left";
    }
}
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T14:36:23.050

@Tuna Fish：我使用了您的代码逻辑。伙计们，非常感谢所有的帮助，但我设法找到了解决这个问题的好方法。您可以检查以下[代码](http://pastebin.com/G0s1a1Zm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:47:52.520

```
AS use have array of data.
user the code where your want to print the rows from this array
**<table>**
<?php 
foreach ($arr as $rows)
{
echo "<tr><td>".$rows."</td></tr>";
}
?>
**</table>** 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T15:50:09.740

我现在解决了你的 jsFiddle。有三种方法可以像您一样做某事，具体取决于您需要做什么。

第一种方法是创建一个带有完全准备好的行和列的 html 表，但隐藏所有行，并且只显示您想要使用 jQuerys .show() 和 .hide() 显示的行，具体取决于下拉列表的值添加按钮被按下。`<tr id='row373' style='display:none'><td>..</td>..</tr>`

第二种方法是使用隐藏的 html 元素（如包含 lis 的 div）发送表的所有数据，并用数据属性装饰所有 li `<li id='row373' data-key='value'>`，这些属性可以由 jQuery 使用 .data('key') 函数读取，其中 key 是每列数据的名称。

第三种可能是最好的方法是使用 ajax 请求将单行或多行加载为 .html 或 .json 数据。这需要您编写一个特殊的 .php 脚本，该脚本仅从数据库中读取数据并以您喜欢使用 jQuery 访问的格式将其输出。该脚本可以由 jQuerys .ajax() .get() 或 .post() 函数调用。

# c# - 日期时间格式问题

> ID：16189332
> 
> 赞同：2
> 
> 时间：2013-04-24T10:14:13.080
> 
> 标签：c#, datetime, datetime-format

我在将日期的字符串表示形式转换为日期时间对象时遇到了困难。我的字符串是`"2013424"`，如果我使用以下代码将字符串转换为日期时间，那么它会失败..

```
string format = "yyyyMd";
DateTime.TryParseExact("2013424", format, CultureInfo.InvariantCulture, DateTimeStyles.None, out dtAnswerDate); 
```

> dtAnswerDate 不包含字符串值的转换表示。

但是，如果我的字符串具有类似的值，`"20130424"`那么它可以正常工作。请问有什么可能的建议吗？

该值来自 Microsoft HealthVault，在我的代码中使用了 XPath 表达式。此 XPath 表达式由最终用户提供。XPath 表达式选择一个节点并使用 InnerText 属性返回值。我正在编写以下代码以供参考。

```
string strItemXML = healthRecordItem.GetItemXml();
XmlDocument xDoc = new XmlDocument();
xDoc.LoadXml(strItemXML);
XmlNode xpathNode = xDoc.SelectSingleNode(xpath);
When = healthRecordItem.LastUpdated != null ? healthRecordItem.LastUpdated.Timestamp : healthRecordItem.EffectiveDate;
if (xpathNode != null)
{
    return xpathNode.InnerText;
} 
```

“strItemXML”包含以下 XML

```
`<thing>  
<thing-id version-stamp="a40f8c41-0329-4b0f-af56-33040a1f3ecf">de631835-c7b6-43dd-9ae9-528c26ab2204</thing-id>  
<type-id name="Appointment">4b18aeb6-5f01-444c-8c70-dbf13a2f510b</type-id>  
<thing-state>Active</thing-state>  
<flags>0</flags>  
<eff-date>2013-04-23T14:33:00Z</eff-date>  
<created>  
<timestamp>2013-02-15T12:48:42.74Z</timestamp>  
<app-id name="InstantPHR Personal Health Record">afc8707e-c160-4b7f-9856-69d5c790b1a9</app-id>  
<person-id name="Mohammed Owes">f848a184-878d-4cef-999f-dff54d2e5db2</person-id>  
<access-avenue>Online</access-avenue>  
<audit-action>Created</audit-action>  
<master-app-id>8df99894-5f36-489a-a8fd-ffe6b25b8efb</master-app-id>  
</created>  
<updated>  
<timestamp>2013-04-24T07:44:58.38Z</timestamp>  
<app-id name="InstantPHR Personal Health Record">afc8707e-c160-4b7f-9856-69d5c790b1a9</app-id>  
<person-id name="Mohammed Owes">f848a184-878d-4cef-999f-dff54d2e5db2</person-id>  
<access-avenue>Online</access-avenue>  
<audit-action>Updated</audit-action>  
<master-app-id>8df99894-5f36-489a-a8fd-ffe6b25b8efb</master-app-id>  
</updated>  
<data-xml>  
<appointment>  
<when>  
<date>  
<y>2013</y>  
<m>4</m>  
<d>24</d>  
</date>  
<time>  
<h>14</h>  
<m>33</m>  
<s>0</s>  
</time>  
</when>  
<service>  
<text>RREEESSSTTTT</text>  
</service>  
<clinic>  
<name>  
<full>Mohammed Owes</full>  
</name>  
</clinic>  
</appointment>  
<common>  
<source>InstantPHR</source>  
<extension source="phr.getrealconsulting.com.appointment_v2"/>  
</common>  
</data-xml>  
</thing>` 
```

并且“xpath”的值为“/thing/data-xml/appointment/when/date”。所以我的代码会返回“2013424”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:26:22.003

**更新**

看起来您在该 xml 中分隔了值。

您可以通过分别提取年、月和日并将其输入到`DateTime`接受这三个参数的构造函数中来完全避免解析：

```
var date = new DateTime(year, month, day); 
```

不幸的是，我对 XPath 不太感兴趣，所以您必须自己修改那部分。

* * *

我认为这里的问题是对于月份或日期的数字可能存在歧义。我知道您用作示例的日期实际上并不模棱两可，但它仍然失败，因为潜力仍然存在。

例如：2013111。这是 11 月 1 日还是 1 月 11 日？这就是前导 0 起作用的原因，因为它可以分隔数字以消除歧义。

除非您添加空格或指定前导零，否则我认为没有办法使这种格式起作用。

空白示例：

```
string format = "yyyy M d";
DateTime date = DateTime.ParseExact("2013 4 24", format, CultureInfo.InvariantCulture); 
```

您没有说明任何限制或“2013424”值的来源，因此我无法轻易建议一种解决特定于您的代码的问题的方法。

当然，如果您没有从输入点以非歧义格式捕获值，那么您在尝试理解什么是一天和什么是一个月*时也会遇到这些歧义问题。*

作为参考，[您可以在此处找到`DateTime`格式字符串](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:28:57.907

您最好的解决方案可能是确保在尝试转换之前获得月份的两位数表示；我当然假设您正在连接原始日期的各个部分，并且它没有按`2013424`原样提供（这会使日期模棱两可）。

即类似的东西：

```
var monthString = (monthString.length > 1) ? "0" + monthString : monthString;    
var dateString = yearString + monthString + dayString;
DateTime.TryParseExact(dateString, out dtAnswerDate); 
```

*更新：*

我仍然有点不清楚为什么你不能自己获取 mont，但如果确实如此，那么基本上没有适合你的解决方案。以下是不明确日期的示例：`2013111, 2013211, 2013129`.

**如果您不知道特定数字是一个月还是一天表示的一部分，那么您根本无法安全地解析日期。**

这可能还有其他逻辑，你没有提到吗？你能想出任何方法来安全地“猜测”一个数字应该如何解释吗？或者，也许您可​​以限制或操纵用户可以以某种方式使用的 XPath 表达式？

如果没有，那么恐怕您的问题根本没有安全的解决方案。

# ios - 以编程方式从左到右反向滚动 UIScrollView

> ID：16189334
> 
> 赞同：1
> 
> 时间：2013-04-24T10:14:17.213
> 
> 标签：ios, uiscrollview, reverse, right-to-left

我试图从左到右自动滚动，但我还没有成功。我正在评估以下表达式以更改方向（添加或减去像素）但是当滚动到达最终它被阻止...

```
(xContentSize - xOffset) >= CGRectGetWidth(_scroll.bounds) 
```

或者

```
(xContentSize - xOffset) > CGRectGetWidth(_scroll.bounds) 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:35:18.523

尝试这个：

```
float w = scrollView.frame.size.width;
float h = scrollView.frame.size.height;
float newPosition = scrollView.contentOffset.x+w; 
CGRect toVisible = CGRectMake(newPosition, 0, w, h);

[scrollView scrollRectToVisible:toVisible animated:YES]; 
```

手动设置您想要的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:27:34.300

最后，我得到了解决方案。

每 4.0 秒使用一个 NSTimer

```
[UIView animateWithDuration:3.0
                     animations:^{

                         if (_direction == 0) {
                             _scroll.contentOffset = CGPointMake((_scroll.contentSize.width - CGRectGetWidth(_scroll.frame)), 0.0);
                         }else{
                             _scroll.contentOffset = CGPointMake(0.0, 0.0);
                         }

                     } completion:^(BOOL finished) {
                         _direction = !_direction;
                     }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T15:31:03.900

**Swift 4** - 向右滚动 70 像素，然后向左滚动（用于提示用户在`UIScrollView`

```
UIView.animate(withDuration: 0.4, delay: 0, usingSpringWithDamping: 0.8, initialSpringVelocity: 0, options: [.curveEaseInOut, .allowUserInteraction, .autoreverse], animations: {
  self.scrollView.contentOffset.x += 70
}) { [unowned self] _ in
  self.scrollView.contentOffset.x = 0
} 
```

# ruby-on-rails - 在任何源中都找不到 rake-10.0.4 (Bundler::GemNotFound)

> ID：16189338
> 
> 赞同：15
> 
> 时间：2013-04-24T10:14:38.477
> 
> 标签：ruby-on-rails, ruby, rubygems, rake

我最近一直试图在服务器上运行我的 ruby​​ 应用程序，但我一直遇到这个错误：

```
Could not find rake-10.0.4 in any of the sources (Bundler::GemNotFound) 
```

我正在运行 Rails 3.2.12 和 Ruby 1.9.3p392。到目前为止，我在访问服务器时没有任何问题，这是我第一次遇到这个错误。

我曾尝试四处寻找答案，但由于我对 ruby​​ 和 rails 比较陌生，我找不到易于理解的答案。

`Gemfile`：

```
source 'http://rubygems.org'

# STANDARD SET OF GEMS, SEE BOTTOM OF FILE FOR A LIST OF OTHER USEFUL GEMS

gem 'rails', '3.2.12'

gem 'haml-rails'
gem 'retina_tag'
gem 'mysql2'
gem 'will_paginate'
gem 'bootstrap-will_paginate'
gem 'contact_form'
gem 'draper'
gem 'pony'
gem 'devise'
gem 'cancan'
gem 'activemerchant', :require => 'active_merchant'
gem 'airbrake'
gem 'libv8','~> 3.11.8'

gem "therubyracer"
gem 'less-rails'
gem "twitter-bootstrap-rails" 
gem "font-awesome-rails", "~> 3.0.2.0"
gem 'event-calendar', :require => 'event_calendar'
gem 'actionpack'
gem 'activesupport'
gem 'railties'
gem 'less'
gem "mailtrap", "~> 0.2.1"

group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'

  gem 'jquery-rails'
  gem 'jquery-ui-rails'
end

group :development, :test do
  gem 'sqlite3'

  gem 'rspec-rails'
  gem 'debugger'
  gem 'pry-rails'
end

group :development do
  gem 'thin'

  gem 'letter_opener'
  gem 'capistrano'
  gem 'capistrano-ext'

  ## GUARD -- used to automatically run commands
  # gem 'guard'
  # gem 'rb-fsevent', '~> 0.9.1'
  # gem 'growl'
  # gem 'guard-rspec'
  # gem 'guard-yard'
  # gem 'redcarpet' 
end

group :test do
  gem 'capybara'
  gem 'database_cleaner'
  gem 'cucumber-rails', :require => false
  gem 'cucumber'
  gem 'launchy'
  gem 'simplecov'
  gem 'metric_fu'

  gem 'factory_girl_rails'

  # The use of 'shoulda' and 'shoulda-context' will break testing in Ruby 1.9.3
  # so we explicitly use 'shoulda-matchers' only for testing purposes
  gem 'shoulda-matchers'

  # gem 'capybara-webkit'
end 
```

`Gemfile.lock`：

```
GEM
  remote: http://rubygems.org/
  specs:
    actionmailer (3.2.12)
      actionpack (= 3.2.12)
      mail (~> 2.4.4)
    actionpack (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.5)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    active_utils (1.0.5)
      activesupport (>= 2.3.11)
      i18n
    activemerchant (1.32.1)
      active_utils (>= 1.0.2)
      activesupport (>= 2.3.14)
      builder (>= 2.0.0)
      i18n
      json (>= 1.5.1)
      money
      nokogiri
    activemodel (3.2.12)
      activesupport (= 3.2.12)
      builder (~> 3.0.0)
    activerecord (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.12)
      activemodel (= 3.2.12)
      activesupport (= 3.2.12)
    activesupport (3.2.12)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.3.4)
    airbrake (3.1.11)
      activesupport
      builder
      json
    arel (3.0.2)
    arrayfields (4.7.4)
    awesome_print (1.1.0)
    bcrypt-ruby (3.0.1)
    bluff (0.1.0)
    bootstrap-will_paginate (0.0.9)
      will_paginate
    builder (3.0.4)
    cancan (1.6.9)
    cane (2.5.2)
      parallel
    capistrano (2.15.2)
      highline
      net-scp (>= 1.0.0)
      net-sftp (>= 2.0.0)
      net-ssh (>= 2.0.14)
      net-ssh-gateway (>= 1.1.0)
    capistrano-ext (1.2.1)
      capistrano (>= 1.0.0)
    capybara (2.1.0)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      xpath (~> 2.0)
    chronic (0.9.1)
    churn (0.0.28)
      chronic (>= 0.2.3)
      hirb
      json_pure
      main
      ruby_parser (~> 3.0)
      sexp_processor (~> 4.1)
    code_analyzer (0.3.1)
      sexp_processor
    coderay (1.0.9)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.6.2)
    colored (1.2)
    columnize (0.3.6)
    commonjs (0.2.6)
    contact_form (0.0.2)
      i18n
      jquery-rails
      mail
      rails (~> 3.2.8)
    cucumber (1.3.1)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.12.0)
      multi_json (~> 1.3)
    cucumber-rails (1.3.1)
      capybara (>= 1.1.2)
      cucumber (>= 1.2.0)
      nokogiri (>= 1.5.0)
      rails (~> 3.0)
    daemons (1.1.9)
    database_cleaner (0.9.1)
    debugger (1.5.0)
      columnize (>= 0.3.1)
      debugger-linecache (~> 1.2.0)
      debugger-ruby_core_source (~> 1.2.0)
    debugger-linecache (1.2.0)
    debugger-ruby_core_source (1.2.0)
    devise (2.2.3)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    diff-lcs (1.2.4)
    draper (1.2.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      request_store (~> 1.0.3)
    erubis (2.7.0)
    event-calendar (2.3.3)
    eventmachine (1.0.3)
    execjs (1.4.0)
      multi_json (~> 1.0)
    factory_girl (4.2.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (4.2.1)
      factory_girl (~> 4.2.0)
      railties (>= 3.0.0)
    fattr (2.2.1)
    flay (2.0.1)
      ruby_parser (~> 3.0)
      sexp_processor (~> 4.0)
    flog (3.2.2)
      ruby_parser (~> 3.1, > 3.1.0)
      sexp_processor (~> 4.0)
    font-awesome-rails (3.0.2.0)
      railties (>= 3.1)
    gherkin (2.12.0)
      multi_json (~> 1.3)
    googlecharts (1.6.8)
    haml (4.0.2)
      tilt
    haml-rails (0.4)
      actionpack (>= 3.1, < 4.1)
      activesupport (>= 3.1, < 4.1)
      haml (>= 3.1, < 4.1)
      railties (>= 3.1, < 4.1)
    highline (1.6.18)
    hike (1.2.2)
    hirb (0.7.1)
    hoe (3.6.0)
      rake (>= 0.8, < 11.0)
    i18n (0.6.4)
    japgolly-Saikuro (1.1.1.0)
    journey (1.0.4)
    jquery-rails (2.2.1)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    jquery-ui-rails (4.0.2)
      jquery-rails
      railties (>= 3.1.0)
    json (1.7.7)
    json_pure (1.7.7)
    launchy (2.2.0)
      addressable (~> 2.3)
    less (2.3.2)
      commonjs (~> 0.2.6)
    less-rails (2.3.3)
      actionpack (>= 3.1)
      less (~> 2.3.1)
    letter_opener (1.1.0)
      launchy (~> 2.2.0)
    libv8 (3.11.8.17)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mailtrap (0.2.1)
      daemons (>= 1.0.8)
      hoe (>= 1.3.0)
      trollop (>= 1.7)
    main (5.2.0)
      arrayfields (>= 4.7.4)
      chronic (>= 0.6.2)
      fattr (>= 2.2.0)
      map (>= 5.1.0)
    map (6.2.0)
    method_source (0.8.1)
    metric_fu (4.1.2)
      activesupport (>= 2.0.0)
      arrayfields (= 4.7.4)
      bluff
      cane (= 2.5.2)
      churn (= 0.0.28)
      coderay
      fattr (= 2.2.1)
      flay (= 2.0.1)
      flog (= 3.2.2)
      googlecharts
      japgolly-Saikuro (>= 1.1.1.0)
      map (= 6.2.0)
      metric_fu-roodi (>= 2.2.1)
      parallel (= 0.6.2)
      rails_best_practices (= 1.13.2)
      redcard
      reek (= 1.3.1)
      ruby2ruby (= 2.0.2)
      ruby_parser (~> 3.0, >= 3.1.1)
      sexp_processor (~> 4.0)
    metric_fu-roodi (2.2.1)
      ruby_parser
    mime-types (1.23)
    money (5.1.1)
      i18n (~> 0.6.0)
    multi_json (1.7.2)
    mysql2 (0.3.11)
    net-scp (1.1.0)
      net-ssh (>= 2.6.5)
    net-sftp (2.1.1)
      net-ssh (>= 2.6.5)
    net-ssh (2.6.7)
    net-ssh-gateway (1.2.0)
      net-ssh (>= 2.6.5)
    nokogiri (1.5.9)
    orm_adapter (0.4.0)
    parallel (0.6.2)
    polyglot (0.3.3)
    pony (1.4)
      mail (> 2.0)
    progressbar (0.20.0)
    pry (0.9.12.1)
      coderay (~> 1.0.5)
      method_source (~> 0.8)
      slop (~> 3.4)
    pry-rails (0.2.2)
      pry (>= 0.9.10)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.12)
      actionmailer (= 3.2.12)
      actionpack (= 3.2.12)
      activerecord (= 3.2.12)
      activeresource (= 3.2.12)
      activesupport (= 3.2.12)
      bundler (~> 1.0)
      railties (= 3.2.12)
    rails_best_practices (1.13.2)
      activesupport
      awesome_print
      code_analyzer
      colored
      erubis
      i18n
      progressbar
    railties (3.2.12)
      actionpack (= 3.2.12)
      activesupport (= 3.2.12)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.4)
    rdoc (3.12.2)
      json (~> 1.4)
    redcard (1.1.0)
    reek (1.3.1)
      ruby2ruby (~> 2.0.2)
      ruby_parser (~> 3.1.1)
      sexp_processor
    ref (1.0.4)
    request_store (1.0.5)
    retina_tag (1.1.9)
      jquery-rails
      rails (>= 3.1)
    rspec-core (2.13.1)
    rspec-expectations (2.13.0)
      diff-lcs (>= 1.1.3, < 2.0)
    rspec-mocks (2.13.1)
    rspec-rails (2.13.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec-core (~> 2.13.0)
      rspec-expectations (~> 2.13.0)
      rspec-mocks (~> 2.13.0)
    ruby2ruby (2.0.2)
      ruby_parser (~> 3.1)
      sexp_processor (~> 4.0)
    ruby_parser (3.1.3)
      sexp_processor (~> 4.1)
    sass (3.2.8)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sexp_processor (4.2.1)
    shoulda-matchers (2.0.0)
      activesupport (>= 3.0.0)
    simplecov (0.7.1)
      multi_json (~> 1.0)
      simplecov-html (~> 0.7.1)
    simplecov-html (0.7.1)
    slop (3.4.4)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.7)
    therubyracer (0.11.4)
      libv8 (~> 3.11.8.12)
      ref
    thin (1.5.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.18.1)
    tilt (1.3.7)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    trollop (2.0)
    twitter-bootstrap-rails (2.2.6)
      actionpack (>= 3.1)
      execjs
      railties (>= 3.1)
    tzinfo (0.3.37)
    uglifier (2.0.1)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    warden (1.2.1)
      rack (>= 1.0)
    will_paginate (3.0.4)
    xpath (2.0.0)
      nokogiri (~> 1.3)

PLATFORMS
  ruby

DEPENDENCIES
  actionpack
  activemerchant
  activesupport
  airbrake
  bootstrap-will_paginate
  cancan
  capistrano
  capistrano-ext
  capybara
  coffee-rails
  contact_form
  cucumber
  cucumber-rails
  database_cleaner
  debugger
  devise
  draper
  event-calendar
  factory_girl_rails
  font-awesome-rails (~> 3.0.2.0)
  haml-rails
  jquery-rails
  jquery-ui-rails
  launchy
  less
  less-rails
  letter_opener
  libv8 (~> 3.11.8)
  mailtrap (~> 0.2.1)
  metric_fu
  mysql2
  pony
  pry-rails
  rails (= 3.2.12)
  railties
  retina_tag
  rspec-rails
  sass-rails
  shoulda-matchers
  simplecov
  sqlite3
  therubyracer
  thin
  twitter-bootstrap-rails
  uglifier
  will_paginate 
```

干杯

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-24T13:05:47.103

有时我们没有得到[http://rubygems.org/](http://rubygems.org/)的响应。所以它会显示给定的错误。

您可以使用以下方法来解决此问题

*   再次尝试使用`gem install rack`命令安装 gem 并运行`bundle update rake`以更新您的 Gemfile.lock 文件。
*   删除 Gemfile.lock 并再次捆绑安装它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-24T10:50:39.177

尝试删除`Gemfile.lock`并`bundle install`

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-24T11:25:12.603

如果你的 app 目录中有 .rvmrc（指定要使用的 ruby​​ 和 gemset），只需从 app 目录中出来，然后再次进入 app 目录。

在你添加 dir 时只需给出命令，

```
cd . 
```

或者

```
cd
cd appdir 
```

它将重新加载您的应用程序所需的所有 gem。

# spring - 在 maven 中为 spring jax-ws 排除什么

> ID：16189342
> 
> 赞同：0
> 
> 时间：2013-04-24T10:14:55.053
> 
> 标签：spring, maven, jax-ws

我一直在开发一个 Spring Web 应用程序。我需要向应用程序添加 Web 服务功能。我正在使用 Maven 进行依赖，到目前为止我很满意。

我将在 Spring 中使用 Jax-WS，当我添加如下依赖项时：

```
<dependency>
            <groupId>org.jvnet.jax-ws-commons.spring</groupId>
            <artifactId>jaxws-spring</artifactId>
            <version>1.8</version>
</dependency> 
```

我得到错误：

```
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Unable to locate NamespaceHandler for namespace [http://www.springframework.org/schema/context] 
```

我 70% 确定这是因为多次找到相同的库组件，但目前我不知道要从这种依赖项中排除什么。

任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:19:52.783

你看过[依赖排除吗](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#Dependency_Exclusions)

```
<dependency>
        <groupId>org.jvnet.jax-ws-commons.spring</groupId>
        <artifactId>jaxws-spring</artifactId>
        <version>1.8</version>
        <exclusions>
          <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>*</artifactId>
          </exclusion>
        </exclusions> 
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:15:55.440

我们使用这个，但我不知道这个列表是如何得出的：

```
<dependency>
    <groupId>org.jvnet.jax-ws-commons.spring</groupId>
    <artifactId>jaxws-spring</artifactId>
    <version>1.8</version>
    <exclusions>
        <exclusion>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
        </exclusion>
        <exclusion>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
        </exclusion>
        <exclusion>
            <groupId>com.sun.xml.ws</groupId>
            <artifactId>jaxws-rt</artifactId>
        </exclusion>
        <exclusion>
            <groupId>activation</groupId>
            <artifactId>activation</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

# mysql - 多对多标签条件选择

> ID：16189343
> 
> 赞同：2
> 
> 时间：2013-04-24T10:14:55.407
> 
> 标签：mysql

我有三个 MySQL 表 - 文档、文档标签和多对多关系表（带有文档 ID 和标签 ID）。

```
Document
+------+
|  id  |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
+------+

DocumentToTag
+------+------+
|idDoc |idTag |
+------+------+
|    1 |    1 |
|    1 |    2 |
|    2 |    1 |
|    2 |    3 |
|    4 |    4 |
+------+------+

Tag
+------+-------+
|  id  | value |
+------+-------+
|    1 |     2 |
|    2 |     4 |
|    3 |     8 |
|    4 |    42 |
+------+-------+ 
```

例如，需要获取具有特定值的 2 个（或更多）标签的文档。我们使用以下 JOIN 查询：

```
SELECT DISTINCTROW
Document.id

FROM Document
LEFT JOIN DocumentToTag AS dt1 ON dt1.idDoc = Document.id  
LEFT JOIN Tag AS tag1 ON dt1.idTag = tag1.id
LEFT JOIN DocumentToTag AS dt2 ON dt2.idDoc = Document.id
LEFT JOIN Tag AS tag2 ON dt2.idTag = tag2.id

WHERE tag1.value = 'someTagValue'
AND   tag2.value = 'someOtherTagValue' 
```

在这种情况下，我们需要在条件中添加尽可能多的 JOIN。所以他们的查询应该由一些脚本动态创建。有没有更优雅的方法来处理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:20:35.323

尝试这个：

```
SELECT
Document.id
FROM Document
    JOIN DocumentToTag AS dt1
        ON dt1.idDoc = Document.id  
    JOIN Tag AS t
        ON dt1.idTag = t.id
WHERE t.value IN ('tag1', 'tag2', 'tag3') -- you can dynamicaly generate this list
GROUP BY Document.id
HAVING COUNT(DISTINCT t.value) = 3 -- you can pass this as parameter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:33:27.377

你可以找这个

```
 SELECT DISTINCT
  Document.id
  FROM Document
 LEFT JOIN DocumentToTag AS dt1 ON dt1.idDoc = Document.id  
 LEFT JOIN Tag AS tag1 ON dt1.idTag = tag1.id

 WHERE tag1.value in ( 'someTagValue' ,'someOtherTagValue') 
```

[**在这里演示**](http://sqlfiddle.com/#!2/47b09/5)

# iphone - 列表项导航不适用于 iPhone/iPad 上 iOS 中的 Safari/Chrome

> ID：16189345
> 
> 赞同：1
> 
> 时间：2013-04-24T10:15:05.053
> 
> 标签：iphone, html, ios, css, mobile-safari

我正在创建一个在无序列表中带有导航的网页。

在 iPhone 或 iPad 上，我单击链接但没有任何反应。我“触摸”链接，只是为了改变背景颜色而没有任何反应。激活链接的唯一方法是将链接保持几秒钟以显示默认的 iOS 选项，即“在新窗口中打开”。网站上还有其他可以正常工作的链接和导航。正是这一组链接给我带来了麻烦。

您能在 HTML 或 CSS 中看到任何可能导致此问题的内容吗？

这与应用于列表项的淡入淡出有关吗？

请参阅底部的标记。（我已经删除了一些东西，比如文本/背景样式类，因为它可能与问题无关。）

* * *

*HTML*

```
<ul class="list">           
    <li>
    <a class="example" href="#">
    <i class="icon-medium icon-map"></i>
    <p><strong>Example description goes here</p>
    </a>
</li>
<li>
    <a class="example" href="#">
    <i class="icon-medium icon-map"></i>
    <p><strong>Example description goes here</p>
    </a>
</li> 
```

*CSS*

```
.list ul { list-style-type:none; padding:0px; margin:0px; }
.list ul li { display:block; float:left; width:50%; min-height:100px; position:relative;  transition: .2s ease-in-out; -moz-transition: .2s ease-in-out; -webkit-transition: .2s ease-in-out; }
.list ul li a.example { display:block; width:100%; height:100px; }
.list ul li:hover, .list ul li:active { color:#FFF; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:17:47.193

可能会给您带来一些问题的一件事是您的标签。它们是不推荐使用的斜体标签，不应包含任何类属性（极少数情况除外）。尝试删除这些或将它们更改为正确的标签（不确定你要去那里）。这可能会解决您的问题。

# silverlight - 在 Silverlight 中通过 DataContractSerializer 序列化字典

> ID：16189350
> 
> 赞同：0
> 
> 时间：2013-04-24T10:15:09.077
> 
> 标签：silverlight, dictionary, datacontractserializer

当我尝试序列化 IDictionary 实现时，我得到 NotImplementedException（在 .NET 中是可以的）

```
[DataMember]
public Dictionary<string, string> CustomAttributes; 
```

我找不到有关 SL 中字典序列化的信息以及为什么我不能这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:53:26.043

出色地，

字典不能通过 DataContractSerializer 序列化。

您可以检查[SerializableDictionary](http://msdn.microsoft.com/en-us/library/gg496181.aspx)

或者您可以通过 ServiceStack 或 JSON.NET 将其序列化为 JSON。两者都可以开箱即用地序列化 Dictionary。

# cocos2d-iphone - Cocos2d 调用 scheduleOnce 选择器两次导致崩溃

> ID：16189352
> 
> 赞同：0
> 
> 时间：2013-04-24T10:15:17.677
> 
> 标签：cocos2d-iphone, ccsprite

CCsprite scheduleOnce 选择器在调用两次时会导致崩溃。

```
Assertion failure in -[CCScheduler scheduleSelector:forTarget:interval:paused:repeat:delay:], /Users/libs/cocos2d/CCScheduler.m:278    

[sprite scheduleOnce:@selector(resumeSchedulerAndActions) delay:time]; 
```

有什么解决方案可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:19:45.697

您的预定选择器没有使用正确的格式。它需要一个 ccTime 类型的参数。预定的选择器最后需要有一个冒号：

```
[sprite scheduleOnce:@selector(resumeSchedulerAndActions:) delay:time]; 
```

它必须有这个接口：

```
-(void) resumeSchedulerAndActions:(ccTime)delta
{
    // here you can "forward" to the actual method you wanted to schedule
    [self resumeSchedulerAndActions];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:38:40.027

感谢@LearnCocos2D 和@Morion 的帮助。我打电话解决了。

`[sprite unscheduleAllSelectors];`

打电话之前

`[sprite scheduleOnce:@selector(resumeSchedulerAndActions:) delay:time];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T11:55:31.697

另一种解决方案是使用 CCDirector 调度程序。

```
[[CCDirector sharedDirector].scheduler scheduleSelector:@selector(resumeSchedulerAndActions:) forTarget:self interval:0.1 repeat:0 delay:2 paused:NO]; 
```

# video - 来自同时 DirectShow 输入设备的 FFMPEG 马赛克/并排合成

> ID：16189354
> 
> 赞同：3
> 
> 时间：2013-04-24T10:15:27.317
> 
> 标签：video, ffmpeg, webcam

这就是我想要做的：

```
ffmpeg.exe -y \
-f dshow -i video="Microsoft LifeCam Cinema" \
-f dshow -i video="Microsoft LifeCam VX-2000" \
-filter_complex "[0:v]pad=iw*2:ih:0[left];[left][1:v]overlay=W/2.0[fileout]" \
-map "[fileout]" -vcodec libx264 -f flv out.flv 
```

基本上，我有 2 个网络摄像头，我想将它们组合成一个视频文件，其中帧大小为 2x1，左侧一个摄像头的帧，右侧另一个摄像头的帧。

换句话说，可以称为“马赛克”或“并排合成”。这*不是*串联 - 即一个文件一个接一个（所以不使用 concat 过滤器）。

我已经看到这种使用`-filter_complex`填充然后定位框架出现在规定的方式。事实上，当我用这样的文件测试它时：

```
ffmpeg.exe -y -i test1.flv -i test2.flv -filter_complex "[0:v]pad=iw*2:ih:0[left];[left][1:v]overlay=W/2.0[fileout]" -map "[fileout]" -vcodec libx264 -f flv testout.flv 
```

它工作正常！

然而，在“现场”版本中，两台相机似乎都启动了（它们的灯亮了），但捕捉却停滞不前。

（怀疑像在单独的输入设备线程上有一些 DirectShow 死锁......）

**所以，我想知道有没有办法克服这个问题并强制两个输入流的数据合并？**

我也尝试过 dshow 过滤器选项的扩展格式，如下所示：

```
-f dshow -i video="Microsoft LifeCam Cinema":video="Microsoft LifeCam VX-2000" 
```

但是然后只选择了一个摄像机（我怀疑这个选项实际上只是为了使单独的视频和音频流能够合并）。

我还尝试将每个输入设备显式设置为具有完全相同的帧大小和速率`-f dshow -video_size 640x480 -framerate 30`。虽然没有喜悦。一旦相机被列出，它仍然会停止。

这是输出的结尾（`-v debug`打开）：

```
Finished splitting the commandline.
Parsing a group of options: global .
Applying option y (overwrite output files) with argument 1.
Applying option v (set libav* logging level) with argument debug.
Applying option filter_complex (create a complex filtergraph) with argument [0:v]pad=iw*2:ih:0[left];[left][1:v]overlay=W/2.0[fileout].
Successfully parsed a group of options.
Parsing a group of options: input file video=Microsoft LifeCam Cinema.
Applying option f (force format) with argument dshow.
Successfully parsed a group of options.
Opening an input file: video=Microsoft LifeCam Cinema.
[dshow @ 00000000016e79a0] All info found
[dshow @ 00000000016e79a0] Estimating duration from bitrate, this may be inaccurate
Input #0, dshow, from 'video=Microsoft LifeCam Cinema':
  Duration: N/A, start: 1130406.072000, bitrate: N/A
    Stream #0:0, 1, 1/10000000: Video: rawvideo (YUY2 / 0x32595559), yuyv422, 640x480, 333333/10000000, 30 tbr, 10000k tbn, 30 tbc
Successfully opened the file.
Parsing a group of options: input file video=Microsoft LifeCam VX-2000.
Applying option f (force format) with argument dshow.
Successfully parsed a group of options.
Opening an input file: video=Microsoft LifeCam VX-2000.
[dshow @ 00000000016e79a0] real-time buffer 101% full! frame dropped! 
```

**编辑**尝试在代码中修复的更多详细信息... *

我一直从过去的 Windows DirectShow 工作中了解到，在同一个线程上多次调用 CoInitialize() 是不好的。见[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678543%28v=vs.85%29.aspx)。也许我误解了 FFMPEG 是如何多线程的（即，如果每个输入设备都在它自己的线程上），但我想尝试用一个保护变量来调节调用（a `static int com_init = 0;`- 这可能应该是互斥锁......） .

例如在 libavdevice/dshow.c 方法中`dshow_read_header`

```
889    if (com_init==0)
890     CoInitialize(0);
891    com_init++ 
```

与 dshow_read_close 类似

```
170    com_init--;
171    if (com_init==0)
172     CoUninitialize() 
```

可悲的是，这**不起作用**。第一个相机启动，但第二个没有，错误是：

```
[dshow @ 0000000000301760] Could not set video options
video=Microsoft LifeCam VX-2000: Input/output error 
```

（值得一试。看起来每个输入设备确实在同一个线程上......）

# iphone - iPhone/iPad 应用程序中的本地化问题

> ID：16189359
> 
> 赞同：2
> 
> 时间：2013-04-24T10:15:37.930
> 
> 标签：iphone, ios, objective-c, ipad, localization

我已经为英语和立陶宛语本地化了一个应用程序。首选语言是英语。问题是位于立陶宛的用户看不到立陶宛语版本，因为在**设置 -> 常规 -> 国际 -> 语言**中无法将语言设置为立陶宛语。

让立陶宛的用户能够看到立陶宛语版本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:24:09.113

一旦用户在应用程序上，您可以添加一些方式让用户选择语言，这是我们通常在网站中使用的一种方式。这可以替代以`AppleLanguage`键中不支持的语言显示应用程序。您可能想使用此[线程](https://stackoverflow.com/questions/10259695/translating-ios-app-to-unsupported-non-standard-languages)来解决您的问题。向苹果发送某种请求以添加立陶宛语也是一个好主意，该语言目前在 iOS 中无法用于支持的语言。

# python - python for loop and dictionary

> ID：16189361
> 
> 赞同：0
> 
> 时间：2013-04-24T10:15:42.457
> 
> 标签：python, python-2.6, tryton

in python and tryton I'm confused why I can't get the desired value I wanted; I don't know what's wrong.

Lets say `self.pendingapr` has a field `itemdescription` and have 3 indexes, overall it has `small`, `medium`, `large` in `itemdescriptions`. I really don't know if the problem's is in the for loop:

```
global M2Mdic
global M2Mldic2
M2Mdic = {}
M2Mldic2 = {}
res = {}

for x in self.pendingapr:
    M2Mdic['itemdescription'] = str(x.itemdescription)
    M2Mldic2[x.id] = M2Mdic 
```

when i print M2Mldic2 it gives me

```
>>> {1:'large',2:'large',3:'large'} 
```

when I need / and is expecting is

```
>>> {1:'small',2:'medium',3:'large'} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:23:09.473

You are putting the same object into every value in the `M2Mldic2` dictionary. Keep in mind that objects are generally passed by reference, you need to copy them explicitly when you want copies.

```
for x in self.pendingapr:
    M2Mdic = {
        'itemdescription': str(x.itemdescription)
    }
    M2Mldic2[x.id] = M2Mdic 
```

This creates a separate dictionary for each value in `M2Mldic2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:22:14.577

What is happening is that map variables are references in Python. So in each iteration if the loop you are modifying all M2Mldic2 maps because they are all the same.

I think your code should be:

```
#global M2Mdic
global M2Mldic2
M2Mdic = {}
M2Mldic2 = {}
res = {}

for x in self.pendingapr:
   M2Mdic = {}
   M2Mdic['itemdescription'] = str(x.itemdescription)
   M2Mldic2[x.id] = M2Mdic 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:37:42.063

And why you need intermediate dictionary at all? This is completely redundant

```
M2mDict={}
for x in self.pendingapr:
    M2Mldic2[x.id] = str(x.itemdescription) 
```

or more Pythonic way(from v.2.7)

```
M2mDict= = {x.id : str(x.itemdescription) for  x in self.pendingapr} 
```

# android - 在网页上录制音频 - iOS 和 Android

> ID：16189363
> 
> 赞同：0
> 
> 时间：2013-04-24T10:15:50.397
> 
> 标签：android, ios, audio, web, record

我的一个客户要求我开发一个网页，允许用户通过他的麦克风录制他自己的声音。我使用 jRecorder（它使用 Flash 文件）来完成它，它工作得很好。

但是，客户现在希望网页能够在 iOS 和 Android 平板电脑和手机上运行。

所以我的问题是：现在是否可以从 iOS 和 Android 上的网页（因此，从移动浏览器）访问设备的麦克风？如果是，我应该使用什么技术/API？

我听说过 Web Audio API、getUserMedia 和 HTML5 Audio Capture。移动浏览器似乎不完全支持这些。我发现的大多数关于这些的文章都很老，但是从那时起事情可能会发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T23:41:36.517

这可能是您正在寻找的东西，尽管它有点小技巧：

[http://rioleo.github.io/safari-audiorecord-io6/](http://rioleo.github.io/safari-audiorecord-io6/)

我认为我们都应该请求苹果在 Safari 中开放音频录制，因为他们已经允许视频+音频录制。

# java - 即使使用 response.sendRedirect 方法，浏览器也没有显示正确的 url

> ID：16189365
> 
> 赞同：2
> 
> 时间：2013-04-24T10:15:53.087
> 
> 标签：java, jsp, servlets

在问之前我经历了几个问题，但我找不到合适的答案。

每当我访问不同的页面时，我都需要在浏览器中更改我的网址。我正在使用`response.redirect`方法来重定向 servlet 和 jsp 中的每个页面。但是只有页面被重定向（该jsp的内容被成功加载）并且url没有改变。

我试过

```
response.sendRedirect("/project-x/jsp/mymodule/page1.jsp"); 
```

即使我通过锚标签进入页面，网址也不会改变。例如：

```
<a href ="/page2.jsp">anchor</a> 
```

谁能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:08:26.907

```
RequestDispatcher dispatcher = 
getServletContext().getRequestDispatcher("/servlet/SomeServlet");
dispatcher.forward(request, response); 
```

使用它，您可以更改您的 URL。

# android - 当值未更改时，选择框触发事件。不允许监听器

> ID：16189367
> 
> 赞同：1
> 
> 时间：2013-04-24T10:15:55.763
> 
> 标签：android, jquery, html, windows-phone-8, jquery-events

我们都知道 jQuerys`.change()`事件处理程序。

但是，它仅在选择框的值已更改时才会触发。如果我选择我现在已经拥有的相同值，是否也会触发事件？

```
<select>
 <option value="a" selected="selected">A</option>
 <option value="b">B</option>
</select 
```

如果我现在选择选择框并选择 A，可以触发哪个事件？

背景：我不能使用点击监听器，因为我需要`.blur()`在选择框上触发，以防止选择框上的蓝色突出显示颜色`windows phone 8`。

但是，在三星 Galaxy S3 上，`.blur()`阻止`android`原生选择下拉菜单弹出，因为`.blur()`在使用 a`.click()`或`.focus()`侦听器时单击选择框后，它会立即失去焦点（它就是这样做的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:21:36.503

您可以通过调用强制更改事件

```
$('select').trigger('change'); 
```

# c# - TabHost 在 CreateIntentFor<> 中传递参数

> ID：16189374
> 
> 赞同：2
> 
> 时间：2013-04-24T10:16:15.697
> 
> 标签：c#, xamarin.android, android-tabhost, xamarin, mvvmcross

下载最新版本的 mvvmcross (V3) 后，我有一些工作要做，将我的一些项目升级到新的状态。我无法完成的最后一件事是将参数从 tabhost 传递给 viewmodel。在旧版本中它工作正常（但它不同），现在我得到了一个错误。

但首先这里的代码（第 19 行有问题（**在代码中查看注释**），第 18 行有效，但只有没有参数）：

```
[Activity]
public class MainActivity : MvxTabActivity
{
    public new MainViewModel ViewModel
    {
        get { return (MainViewModel)base.ViewModel; }
        set { base.ViewModel = value; }
    }

    protected override void OnViewModelSet()
    {
        SetContentView(Resource.Layout.Main);

        TabHost.TabSpec spec;
        Intent intent;

        spec = TabHost.NewTabSpec("listeaktiv");
        spec.SetIndicator(App.indicatorActive, Resources.GetDrawable(Resource.Drawable.green));
        //spec.SetContent(this.CreateIntentFor(ViewModel.ListViewModel)); -> It works (But only without Parameters! How could I pass them here?)
        spec.SetContent(this.CreateIntentFor<ListViewModel>(new { parameter = App.indicatorActive })); //Exception (on the next Line)
        TabHost.AddTab(spec);
    }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
    }
} 
```

（App.indicatorActive 是我要传递的参数，它在 App.cs 中：（`public static string indicatorActive = "Active";`）

我的 ListViewModel 看起来像这样：

```
public class ListViewModel : BaseViewModel
{
        public ListViewModel(string parameter)
        {

        }
} 
```

错误：

```
Unhandled Exception:
Cirrious.CrossCore.Exceptions.MvxException: Failed to load ViewModel for type 
INApplikationsMonitor.Core.ViewModels.ListViewModel from locator MvxDefaultViewModelLocator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:05:04.850

我的**猜测**是，这只是因为您使用的是旧的 ViewModel 生命周期。

在 v3 中：

*   ViewModel 构造函数参数用于 IoC - 用于服务的依赖注入。
*   for passing parameters you need to instead use an `Init` method within the ViewModel

For more on this, see: [http://slodge.blogspot.co.uk/2013/03/v3-new-viewmodel-lifecycle.html](http://slodge.blogspot.co.uk/2013/03/v3-new-viewmodel-lifecycle.html) :

> The default ViewModelLocator in v3 builds new ViewModel instances using a 4-step process - CIRS:
> 
> *   Construction - using IoC for Dependency Injection
> *   Init() - initialisation of navigation parameters
> *   ReloadState() - rehydration after tombstoning
> *   Start() - called when initialisation and rehydration are complete

# php - CakePHP 在数据库中就地编辑并进行验证

> ID：16189382
> 
> 赞同：0
> 
> 时间：2013-04-24T10:16:33.193
> 
> 标签：php, cakephp

我正在开发我的第一个 cakephp 应用程序。身份验证和原始验证工作正常。

我在用户的私人页面上进行了一些修改，其中显示了个人数据，我使它能够使用 jQuery+jEditable 编辑数据，完美运行。

我的问题是，当我将例如电子邮件修改为坏邮件时，我的意思是“someone@.com”或“somone.com@asdf.com”。所以我认为当我用就地方式修改数据时，我认为我的应用程序不能使用“验证”。

我将对所有字段进行验证：不为空、正确的电子邮件语法以及带有 md5 哈希生成的新密码和密码确认。

您将看到一切正常，但密码不正常，我不知道如何使用确认字段和 md5 哈希生成来做到这一点。

如果你能帮助我一点，我将不胜感激，我是新手。

我也想知道这个安全性，我需要注意什么？

以下是代码：

用户控制器.php

```
 public function in_place_editing($id = null) {

    if (!$id) return;

    if ($this->request->data) {

    # get all the fields with its values (there should be only one, but anyway ...)
    foreach($this->data['User'] as $field => $value)
    {
      # check if the provided field name is acceptable
      switch($field)
      {
        case 'email':
        case 'postcode':
        case 'city':
        case 'address':
        case 'phone':
          break;
        default:
          $this->set('updated_value', '');
        return;
      }

      $this->User->id = $id;
      $this->User->save($field, $value);
      $this->set('updated_value', $value);
      $this->beforeRender();
      $this->layout = 'ajax';

    }
  }

} 
```

index.ctp（这是私有数据页面）

```
<h2>Personal details</h2>
<table cellpadding="0" cellspacing="0">
    <tr>
            <td>Name</td>
            <td><?php echo $userdata[0]['User']['name']; ?></td>
            </tr>
            <tr>
            <td>E-mail</td>
            <td>
            <?php
            echo $this->inPlaceEditing->input('User', 'email', $userdata[0]['User']['id'],
            array('value' => $userdata[0]['User']['email'],
            'actionName' => 'users/in_place_editing',
            'type' => 'text',
            'cancelText' => 'Cancel',
            'submitText' => 'Save',
            'toolTip' => 'Click to edit',
            //'containerType' => 'td'
            )
            );
            ?>
            </td>
            </tr>
            <tr>
            <td>Postcode</td>
            <td>
            <?php
            echo $this->inPlaceEditing->input('User', 'postcode', $userdata[0]['User']['id'],
            array('value' => $userdata[0]['User']['postcode'],
            'actionName' => 'users/in_place_editing',
            'type' => 'text',
            'cancelText' => 'Cancel',
            'submitText' => 'Save',
            'toolTip' => 'Click to edit',
            //'containerType' => 'td'
            )
            );
            ?>
            </td>
            </tr>
            <tr>
            <td>City</td>
            <td>
            <?php
            echo $this->inPlaceEditing->input('User', 'city', $userdata[0]['User']['id'],
            array('value' => $userdata[0]['User']['city'],
            'actionName' => 'users/in_place_editing',
            'type' => 'text',
            'cancelText' => 'Cancel',
            'submitText' => 'Save',
            'toolTip' => 'Click to edit',
            //'containerType' => 'td'
            )
            );
            ?></td>
            </tr>
            <tr>
            <td>Address</td>
            <td>
            <?php
            echo $this->inPlaceEditing->input('User', 'address', $userdata[0]['User']['id'],
            array('value' => $userdata[0]['User']['address'],
            'actionName' => 'users/in_place_editing',
            'type' => 'text',
            'cancelText' => 'Cancel',
            'submitText' => 'Save',
            'toolTip' => 'Click to edit',
            //'containerType' => 'td'
            )
            );
            ?>
            </td>
            </tr>
            <tr>
            <td>Phone number</td>
            <td>
            <?php
            echo $this->inPlaceEditing->input('User', 'phone', $userdata[0]['User']['id'],
            array('value' => $userdata[0]['User']['phone'],
            'actionName' => 'users/in_place_editing',
            'type' => 'text',
            'cancelText' => 'Cancel',
            'submitText' => 'Save',
            'toolTip' => 'Click to edit',
            //'containerType' => 'td'
            )
            );
            ?>
            </td>

    </tr>
    </table><br>
<h2>User and password</h2>
    <table cellpadding="0" cellspacing="0">
    <tr>
            <td>Username</td>
            <td><?php echo $userdata[0]['User']['username']; ?></td>
            </tr>

            <td>Password</th>
            <td>Modify</td>
            </tr>

    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:19:55.553

```
 foreach($this->data['User'] as $field => $value)
            {
              # check if the provided field name is acceptable
              switch($field)
              {
                case 'email':
                case 'postcode':
                case 'city':
                case 'address':
                case 'phone':
                  break;
                default:
                  $this->set('updated_value', '');
                return;
              }

        $this->User->set($this->request->data);

            $this->User->validate['email'] = array('Mail'=>array( 'rule' => 'email',
                                      'message' => 'improperemail','on'=>'update')));

        if($this->Users->validates())
        {
              $this->User->id = $id;
              $this->User->save($field, $value);
        }
    else
    {
           $this->Session->setFlash('not a valid field your are posting');
            $errors=$this->User->validationerrors;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:36:02.293

将验证规则添加到您为用户创建的模型。它用于您的用户模型的电子邮件验证示例。您可以对电话、邮政编码作为数值使用更多验证

```
var $validate =array('email'=>array(
                                 'Email'    =>  array(
                               'rule'=>'email',
                              'message'=>'Improper email address'
                                ))); 
```

查看链接：[http ://book.cakephp.org/2.0/en/models/data-validation.html#Validation::email](http://book.cakephp.org/2.0/en/models/data-validation.html#Validation::email)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:50:53.813

```
 OR you can directly add validation rule to controller.

    $this->User->set($this->request->data);
  <pre>  
    $this->User->validate['email'] = array('Mail'=>array( 'rule' => 'email',
                              'message' => 'improperemail','on'=>create')));
</pre>

before saveField check for validation.
as if($this->Users->validates())
{
enter saveField code
} 
```

# numpy - 用numpy按给定概率的随机位数组

> ID：16189386
> 
> 赞同：1
> 
> 时间：2013-04-24T10:16:42.903
> 
> 标签：numpy, neural-network, stochastic-process

我有一个确定性神经网络，我想让它成为随机的。

两个问题：

1.  我不确定这是否意味着我需要使用 sigmoid 的结果来确定输出的概率，或者概率是否只是神经元输入，而 sigmoid 函数现在是多余的。
2.  如何使用 numpy 有效地做到这一点？我知道如何生成随机位，但是你如何在一个大数组中使用给定的概率来做到这一点？（如果重要的话，我当前的 sigmoid 函数是 tanh）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:59:53.783

1.  仍然需要 sigmoid 函数，因为反向传播用于计算 sigmoid 函数的导数，而不是神经元是否被触发。
2.  在像以前一样计算激活之后，我现在通过以下方式运行结果数组 x：

    `return numpy.random.ranf(x.shape) < x`

    我的时机是`3.03323280772e-05`

    另请注意，numpy 将布尔值视为 1 和 0，因此无需将结果传输回 int/float)。因为现在是 0 和 1，所以我不得不稍微更改我的代码 - 在我使用 -1 和 1 作为目标值和输入之前。

# c++ - 如何初始化本地联合变量？

> ID：16189393
> 
> 赞同：1
> 
> 时间：2013-04-24T10:16:54.143
> 
> 标签：c++, unions, local-variables, initialization

我经常在这样的函数中定义联合：

```
union
{
 sometype A;
 othertype B;
}name; 
```

然后像这样到处使用它们：

```
name.A = smth;
name.B = smthelse; 
```

虽然它在调试模式下工作，但在发布模式下它告诉我联合未初始化，并且在联合成员是指针的某些地方，它甚至崩溃。那么我该如何初始化它们？只需添加'='就足够了运算符？它不应该有一个默认的构造函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:22:28.037

从[这里开始](http://msdn.microsoft.com/en-us/library/5dxy4b7b(v=vs.80).aspx)，

> 您可以通过分配用大括号括起来的表达式在同一语句中声明和初始化联合。该表达式被评估并分配给联合的第一个字段。

所以，像这样：

```
union NumericType
{
    int         iValue;
    long        lValue;  
    double      dValue;  
};

union NumericType Values = { 10 };   // iValue = 10 
```

但这样做更常见（很多人会说*更好*）

```
union NumericType val;  // declaration
val.dValue = 3.1415;    // use union as a double 
```

您收到错误，因为您似乎使用 a`union`就好像它是 a `struct`:)

如果我错了，请纠正我，但请阅读[这里](https://stackoverflow.com/questions/2310483/purpose-of-unions-in-c-and-c)，例如。

# javascript - JSON的JSON迭代

> ID：16189395
> 
> 赞同：0
> 
> 时间：2013-04-24T10:16:58.033
> 
> 标签：javascript, json, iteration

我有这个问题：我有一个 JSON 对象，我想在 javascript 函数中对其进行迭代，但它是由其他 JSON 对象组成的。例如：

```
[ 
    {"id"="1", "result"=[{"name"="Sam","age"="12"},{"sport"="soccer"}]},
    {"id"="2", "result"=[{"name"="Paul","age"="43"},{"sport"="basketball"}]}
] 
```

我会迭代它以使用值，以这种方式：
1）在第一次迭代中：我想使用：“Sam”，“12”，“soccer”
2）在第二次迭代中：我想使用： “保罗”、“43”、“篮球”
等等。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:20:44.387

首先，您必须修复您的**对象文字**。您必须使用**:** not **=**作为键值对。

之后，您可以通过以下方式进行迭代：

```
var obj = [ {"id":"1", "result":[{"name":"Sam","age":"12"},{"sport":"soccer"}]},
{"id":"2", "result":[{"name":"Paul","age":"43"},{"sport":"basketball"}]}];

for (var i = 0; i < obj.length; i += 1) {
    console.log("Name", obj[i].result[0].name);
    console.log("Age", obj[i].result[0].age);
    console.log("Sport", obj[i].result[1].sport);
} 
```

如果您想使用循环进行整个遍历，您可以使用：

```
var obj = [ {"id":"1", "result":[{"name":"Sam","age":"12"},{"sport":"soccer"}]},
{"id":"2", "result":[{"name":"Paul","age":"43"},{"sport":"basketball"}]}];

for (var i = 0; i < obj.length; i += 1) {
    for (var j = 0; j < obj[i].result.length; j += 1) {
       var current = obj[i].result[j];
       for (var prop in current) {
          console.log(prop, current[prop]);
       }
    }
} 
```

# javascript - 如何识别输入消息的人或不在聊天中的人？

> ID：16189401
> 
> 赞同：3
> 
> 时间：2013-04-24T10:17:23.940
> 
> 标签：javascript, chat, livechat, facebook-chat

如果我问一个简单的问题，请原谅我。请不要犹豫，编辑我的问题以采取正确的方法。

我正在做这个`java` `Chat`项目。

我想你们都知道`facebook`，`GTalk`当你的朋友在输入消息时，你可以通知该`User is typing`消息将在你的末尾显示。

当他发送消息或完成消息输入时，`User is typing`消息将被隐藏。

他们如何识别其他用户当前是否正在输入？

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:32:36.547

由于您的问题不包含任何代码。这个答案必须保持基本。

如果您使用 JavaScript，您可以通过多种方式查看用户是否输入：

例如，如果用户专注于输入框并且有一个按键事件，然后发送一条 ajax 消息说“USER ID TYPING”，那么服务器可以处理它。

我认为这是一个类似的问题：[聊天中的“用户正在输入”功能](https://stackoverflow.com/questions/8963810/user-is-typing-function-in-chat)

请提供一些代码，以便我们能够提供帮助！

-还请注意-

您的实现取决于您使用的服务器端平台以及您希望如何交互。

我在 PHP 中做了类似的事情，每 10 秒我会看看是否有变化，如果我会向 PHP 发送 AJAX 请求，然后更新需要知道该信息的客户端

对于隐藏或显示的消息，您可以使用：

JavaScript 更改包含消息的 span 的可见性。

如果您使用 jQuery，那么它的`$('#spanID').hide()`或`$('#spanID').show()`

# android - ImageView 放置不正确

> ID：16189403
> 
> 赞同：0
> 
> 时间：2013-04-24T10:17:26.290
> 
> 标签：android, imageview

我正在尝试从互联网加载图像并将其放入 中`ImageView`，但我想使用屏幕宽度作为图像的宽度并保持纵横比。我已经在 stackoverflow 上尝试了所有解决方案，但它没有帮助。我想是因为我后来从互联网上加载图像并将其放入`ImageView`.

这是xml文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="0dp"
    android:paddingLeft="0dp"
    android:paddingRight="0dp"
    android:paddingTop="0dp"
    tools:context=".ViewPhoto"
    android:background="@color/darkgrey"
    android:id="@+id/layout"
    >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:id="@+id/title" 
        android:background="@color/Black"
        android:typeface="sans"
        android:textColor="@color/White"
        />

    <ImageView 
        ??

        />

     <ListView
        android:id="@+id/comments"
        android:layout_below="@+id/photo"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:divider="#b5b5b5"
        android:dividerHeight="2dp"               
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:19:24.443

```
 <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scaleType="centerCrop"
        android:layout_below="@id/title"
    /> 
```

以这种方式尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:21:31.653

尝试`android:scaleType="centerCrop"`在您的`ImageView`.

# javascript - 当相应的表单值为空时获取 HTML 表单元素。？

> ID：16189407
> 
> 赞同：0
> 
> 时间：2013-04-24T10:17:42.603
> 
> 标签：javascript, jquery, html, forms

有一个表格，需要验证它。

习惯于`serializearray`在单击提交按钮时获取所有表单元素。

解析每个值，如果值为 null，则需要向相应的 HTML 元素添加一个类。

下面的代码

```
$(document).ready(function(){
    $("#sumbit_button").click(function(){
        var formElements = $("#ImageSliderForm").serializeArray();
        $(formElements).each(function(x){
            if(formElements[x]["value"] == ""){
                //get the respective html element and add a class
            }
        });
    });
}); 
```

需要一种方法来找到相应的 HTML 元素。

**console.log($("#ImageSliderForm").serializeArray());**的输出

 **```
[Object { name="ImageSliderImageURL",  value=""}, Object { name="ImageHeader",  value=""}, Object { name="ImageHeaderSubText",  value=""}, Object { name="ImageSliderSubTextURL",  value=""}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:19:30.560

如果条件错误试试这个

```
if(formElements[x]["value"] == "" || formElements[x]["value"] == null){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:23:13.343

尝试这个：

```
var formElements = $("#ImageSliderForm").serializeArray();

$(formElements).each(function (x, element) {
    if (element.value == "" || element.value == null) {

        //get the respective html element and add a class
        $("[name='" + element.name + "']").addClass('someclass');
    }
}); 
```**

# fedora - fedora 17 上的 collectd write_mongodb 插件 lt_dlopen 错误。collectd 无法识别已安装的库

> ID：16189409
> 
> 赞同：1
> 
> 时间：2013-04-24T10:17:46.450
> 
> 标签：fedora, collectd

我已经从 git repo 下载了 libmongoc 驱动程序并进行安装。然后我下载了collectd tar文件，解压并尝试安装它，一切正常，但是当我尝试运行collect d时，我遇到了这些错误：

```
[path to collectd]# sbin/collectd
ERROR: lt_dlopen ("/opt/collectd/lib/collectd/write_mongodb.so") failed: file not found.
The most common cause for this problem are missing dependencies. 
Use ldd(1) to check the dependencies of the plugin / shared object.
[path to  collectd]# 

[path to collectd]# ldd /opt/collectd/lib/collectd/write_mongodb.so
linux-vdso.so.1 =>  (0x00007fff1dbaa000)
libmongoc.so.0.7 => not found
libdl.so.2 => /lib64/libdl.so.2 (0x00007f8351fd1000)
libc.so.6 => /lib64/libc.so.6 (0x00007f8351c1a000)
/lib64/ld-linux-x86-64.so.2 (0x00007f83523e4000)
[path to collectd]# 
[path to  collectd]# locate libmongoc.so.0.7
/usr/local/lib/libmongoc.so.0.7
/usr/local/lib/libmongoc.so.0.7.1
[path to collectd]# 
```

为什么 collectd 无法识别已安装的 libmongoc 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T02:29:27.573

我用 write_mongodb 成功安装了 collectd。

```
[root@stackdev ~]# ldd /usr/local/etc/collectd/lib/collectd/write_mongodb.so 
    linux-vdso.so.1 =>  (0x00007fffa3ffe000)
    libmongoc.so.0.6 => not found
    libdl.so.2 => /lib64/libdl.so.2 (0x00007f1134fe8000)
    libc.so.6 => /lib64/libc.so.6 (0x00007f1134c2f000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f1135614000) 
```

然后我将 libmongoc.so.0.6 （我安装在 /usr/local/lib ）复制到 /lib64 的目录中，然后运行 ​​collectd ，一切正常。
希望这可以帮到你。

# html - JqueryUI 下拉菜单垂直对齐

> ID：16189411
> 
> 赞同：1
> 
> 时间：2013-04-24T10:17:50.287
> 
> 标签：html, css, jquery-ui, drop-down-menu

嗨，我在修复我的这个菜单时遇到问题，下面是实际的图像和代码，任何建议都得到了很好的应用。

```
<script type="text/javascript">
        $(function() {
        $( "#menu" ).menu();
        });
</script>

<ul id="menu">
    <li><a href="#">Main Tab</a>
       <ul>
        <li><a href="#">This is link A</a></li>
        <li><a href="#">This is link B</a></li>
       </ul>
    </li>
</ul> 
```

我得到![在此处输入图像描述](https://i.stack.imgur.com/fvqIh.jpg) 了我喜欢的是![在此处输入图像描述](https://i.stack.imgur.com/xrtp5.jpg) 我正在使用 jqueryUI 我尝试了 .menu() 属性或参数，但仍然没有任何变化。我想知道我是否可以通过改变css来实现它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:11:20.213

我修好了，这是链接 [http://jsfiddle.net/kodewrecker/sS93F/](http://jsfiddle.net/kodewrecker/sS93F/)

```
 $(function() {
        $( "#menu" ).menu({ position: { my: "left top", at: "left-1 top+35" } });
        }); 
```

在这里找到了一些 JqueryUI 菜单小部件的操作：http: [//api.jqueryui.com/menu](http://api.jqueryui.com/menu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:18:46.067

```
ul li > ul {
  display: block;
  clear: both;
  padding: 0;
} 
```

应该做的伎俩

见：http: [//jsfiddle.net/mF9sJ/](http://jsfiddle.net/mF9sJ/)

# .net - WPF中的默认光标？

> ID：16189414
> 
> 赞同：24
> 
> 时间：2013-04-24T10:17:59.727
> 
> 标签：.net, wpf, mouse-cursor

我正在更改控件的光标`WPF`。

```
btn.Cursor = Cursors.Wait; 
```

执行操作后，我想恢复到默认光标，我没有找到任何`Cursors.Default`，如何获得默认光标？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-04-24T10:53:31.310

您可以覆盖光标而不是设置光标，如下所示：

```
Mouse.OverrideCursor = Cursors.Wait; 
```

然后在执行操作时，您可以通过将其设置为 null 来移除覆盖，如下所示：

```
Mouse.OverrideCursor = null; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-24T10:56:11.350

你说的对。没有`Cursors.Default`静态属性。但是您始终可以将控件的光标设置为`null`，它将恢复控件的默认光标。

```
// ...
btn.Cursor = Cursors.Wait;
// whatever... your operation.
btn.Cursor = null;
// now the Cursor is default again. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:20:20.787

我认为您需要先将当前光标存储在一个变量中，然后再将其更改为等待光标，然后在您想将其更改回来时将其设置为您的光标变量。

# java - 在 java swing onclick 中的 onclick 事件期间显示加载动画

> ID：16189418
> 
> 赞同：1
> 
> 时间：2013-04-24T10:18:16.207
> 
> 标签：java, swing, onclick

我`onClick`在 Java Swing 中有一个活动。

```
private void fastForward(java.awt.event.MouseEvent evt) { 
    loading.setVisible(true);
    //some time consuming algorithm
    loading.setVisible(false);      
} 
```

在其中，我执行了一个消耗大量时间的操作，所以我想显示一个加载动画。

我创建了一个按钮，带有一个加载 gif 的图标，我将按钮的可见性设置为 false。如果`onClick`我将可见性设置为 true。问题是当整个函数执行时按钮变得可见，这不是我想要的。我希望在函数执行期间显示按钮。如何在执行期间将按钮设置为可见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:26:31.500

那是因为，只有当 UI 线程空闲时，它才能更新 UI。这是你需要做的：

```
private void fastForward(java.awt.event.MouseEvent evt) { 
    loading.setVisible(true);
    new Thread(new Runnable(){

    @Override
    public void run(){
       //time consuming algorithm.
       if(done){
         SwingUtilities.invokeLater(new Runnable(){
             @Override public void run(){
                loading.setVisible(false);      
           }
          });
       }
    }

    }).start();
} 
```

上面发生的事情是这样的：

1.  UI 线程设置加载状态。
2.  UI 线程启动一个新线程来执行命令。此调用后 UI 线程是空闲的。
3.  新线程计算算法
4.  新线程完成后，它会请求 UI 线程更新 UI

这样，按钮就不会被冻结。完成后，UI 线程会更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:54:29.987

尝试使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

`publish`它具有通过使用/`process`方法与事件调度线程重新同步的内置功能。很容易知道它的时间`done`并具有进度更新功能

看看[这个](https://stackoverflow.com/questions/15199091/progress-bar-java/15199220#15199220)，[这个](https://stackoverflow.com/questions/15803893/java-swing-processing-status/15804124#15804124)和[这个](https://stackoverflow.com/questions/13094666/jprogressbar-wont-update/13095992#13095992)例子

# paypal - GetExpressCheckoutDetails 和 DoExpressCheckoutPayment for Credit Card

> ID：16189420
> 
> 赞同：0
> 
> 时间：2013-04-24T10:18:19.890
> 
> 标签：paypal

如果客户在通过 Paypal.com 结帐页面付款时使用信用卡而不是 Paypal 帐户，GetExpressCheckoutDetails 和 DoExpressCheckoutPayment 是否有效？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:30:40.213

是的，即使买家使用他们的信用卡而不是使用他们的 PayPal 账户付款，这些 API 调用也将起作用。Express Checkout 流程支持使用 PayPal 帐户或信用卡付款。

# xcode - 从 json 响应中删除不需要的字符

> ID：16189422
> 
> 赞同：0
> 
> 时间：2013-04-24T10:18:25.170
> 
> 标签：xcode, json, xcode4.2, xcode4.5, xcode4.3

我正在尝试将存储在 NSArray 中的 json 响应中的数据加载到 tableview 中。

json:

```
"fulltime": [
        2,
        2
    ], 
```

上面是 json，但是当我显示到屏幕上时，它看起来像下面的代码。

```
 ( 2, 2) 
```

在这种情况下，我尝试使用以下内容删除括号 () 中不需要的字符，但我在代码下方收到警告。

```
 NSArray *place= [jsonResults objectAtIndex:indexPath.row];

  NSString *score= [place valueForKey:@"fulltime"]; 
```

首先尝试了这个：

```
 NSString *score = [[[place valueForKey:@"fulltime"]objectAtIndex:indexPath.row]    stringByReplacingOccurrencesOfString:@"(" withString:@""]; 
```

然后这个：

```
 NSString *jsonstring = [score stringByReplacingOccurrencesOfString:@"\)\n" withString:@""];
  jsonstring = [jsonstring stringByReplacingOccurrencesOfString:@"\t" withString:@""]; 
```

这是我每次得到的错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:   '-[__NSCFNumber stringByReplacingOccurrencesOfString:withString:]: unrecognized selector  sent to instance 0x1f55f270' 
```

我不确定我尝试删除字符的方式或解析数据的方式是否有问题。下面是 json 的一个更好的视图，在我想访问“fulltime”之前，其他一切都可以很好地解析

```
 "date": "2013-03-17 16:00:00",
    "home_id": 8455,
    "home": "Chelsea",
    "homeshort": "Chelsea",
    "away_id": 8654,
    "away": "West Ham United",
    "awayshort": "West Ham",
    "status": "Finished",
    "halftime": [1, 0],
    "fulltime": [2, 0],
    "extratime": [0, 0],
    "penalties": [0, 0], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:30:30.560

试试这样可能对你有帮助

```
 [[[jsonarray objectAtIndex:0] valueForKey:@"fulltime"] objectAtIndex:0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:38:20.397

不知道我是否明白你想要什么，但要解析这些数字，我会做类似的事情：

```
NSDictionary * place= [jsonResults objectAtIndex:indexPath.row];
NSArray * fulltime = [place valueForKey:@"fulltime"];
NSNumber * num1 = [fulltime objectAtIndex:0];
NSNumber * num2 = [fulltime objectAtIndex:1];

NSLog(@"Fulltime is %d, %d", [num1 intValue], [num2 intValue]); 
```

# mailx - 以 html 文件输出作为正文发送邮件

> ID：16189423
> 
> 赞同：0
> 
> 时间：2013-04-24T10:18:29.520
> 
> 标签：mailx

我收到文件 hc.html 作为附件。但我希望在 Lotus Notes 8 中将 hc.html 的输出作为正文。我之前使用的是 sendmail，它在 Outlook 中运行良好。在这个新环境中，我无法使用 sendmail。我只能使用mailx。

可以为此做些什么吗？

```
(cat body.txt; uuencode $OP $OP) | mailx -s 'Subject' xxx@yy.com

OP=/tmp/hc.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T11:10:46.443

尝试这个：

mailx -s "主题" 电子邮件地址 < $OP

# ruby-on-rails-3 - 为什么 activerecord 映射未分配的外键？

> ID：16189424
> 
> 赞同：0
> 
> 时间：2013-04-24T10:18:31.600
> 
> 标签：ruby-on-rails-3, activerecord

我通过在类中声明它来映射我的外键。
但是rails调用自动分配的外键并抛出错误，

 **下面给出了 where 子句类声明中的 **未知列，****

 **```
class Supplier < ActiveRecord::Base  
  has_one :criteria  
  self.primary_key = 'sup_id'  
end  

class Criteria < ActiveRecord::Base  
  belongs_to :supplier, :foreign_key => "crt_sup_id"  
  self.primary_key = 'crt_id'  
  self.table_name = 'criterias'  
end 
```

如果我在类标准中使用 self.supplier 它工作正常

但是如果我在类 Supplier 中使用 self.criteria 则抛出错误，

“where 子句”中的未知列“criterias.supplier_id”：SELECT `criterias`.* FROM `criterias` WHERE `criterias`。`supplier_id`

我在标准中没有名为 supplier_id 的字段，而是使用类中定义的 crt_sup_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:23:49.117

您还必须在`has_one`关系中引用外键：

```
class Supplier < ActiveRecord::Base  
  has_one :criteria, foreign_key: "crt_sup_id"   
  self.primary_key = 'sup_id'  
end 
```

原因是默认情况下，rails 中的关联是单向的。有关详细信息，请参阅[导轨指南](http://guides.rubyonrails.org/association_basics.html#has_one-association-reference)。**

# mifare - Mifare Plus 减小了读/写范围

> ID：16189425
> 
> 赞同：1
> 
> 时间：2013-04-24T10:18:32.250
> 
> 标签：mifare

我正在使用 Mifare Plus 卡而不是 Mifare Classic 并且通信失败。看起来 Plus 卡必须比 Classic 卡更靠近读卡器。这是一个已知问题吗？除了淘汰现有设备之外，是否有任何变通方法？

# database - 如何从已结束的任务中清理 jbpm 数据库

> ID：16189430
> 
> 赞同：0
> 
> 时间：2013-04-24T10:18:38.927
> 
> 标签：database, jbpm

我注意到 jbpm_byteblock 已经增长到几百万行并且超过 GB。

有没有办法删除与已结束任务和进程相关的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:31:47.477

取决于您可能使用的 jBPM 版本。但是对于 jBPM 5.x，如果您不再需要它们，您可以删除已完成/中止的任务。这可以使用侦听器自动执行：

[https://github.com/droolsjbpm/jbpm/blob/master/jbpm-services/jbpm-human-task-services/src/main/java/org/jbpm/services/task/admin/listener/TaskCleanUpProcessEventListener.java](https://github.com/droolsjbpm/jbpm/blob/master/jbpm-services/jbpm-human-task-services/src/main/java/org/jbpm/services/task/admin/listener/TaskCleanUpProcessEventListener.java)

# c - 如何使用自定义端口（非默认端口）仅使用 telnet 或 FTP（在 C 中的套接字编程中）连接服务器和客户端？

> ID：16189432
> 
> 赞同：0
> 
> 时间：2013-04-24T10:18:40.420
> 
> 标签：c, network-programming, telnet

我阅读了[Beej 的套接字编程教程](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)上的链接，这非常好。虽然它没有回答我在教程开始时一直在思考的问题，但我无法在 Stackoverflow 或谷歌上找到解决方案。

由于我的问题在标题中可能看起来模棱两可，让我详细说明一下，以便更清楚。

我只想能够使用任何端口（当然是> 1024）说12345并建立TELNET连接或FTP连接，但不使用默认端口（23、21等）。我已经使用了该`getaddrinfo`函数并将`AF_INET`宏用于 IPV4，`SOCK_STREAM`用于 TCP，我可以在此函数中使用`"telnet"`或端口`23`用于 telnet。但我想知道我如何（或者我可以使用自定义端口）如何使用自定义端口。我对教程链接中给出的代码没有任何问题。我是新来的。所以我只是希望我能对此有所了解。

PS：我也在阅读 Unix Network Programming (vol 1) 虽然我刚刚开始，但我似乎也无法在其中找到它。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:20:45.150

只需在调用之前将您的套接字绑定到该端口号`listen()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:27:35.853

然后编写您自己的 TCP 客户端/服务器应用程序，您可以自由使用您喜欢的任何端口（除了您需要 root 权限来绑定低于 1024 的端口这一事实）并且系统的其余部分不使用这些端口。因此，您应该在服务器端绑定到所需的端口/接口，并为客户端应用程序使用相同的端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T02:34:20.983

可能您可以在位于 system32\etc\drivers 的服务文件中输入基于一个新端口的条目

# d3.js - 刷范围 dc.js d3.js

> ID：16189439
> 
> 赞同：3
> 
> 时间：2013-04-24T10:19:01.360
> 
> 标签：d3.js, brush, dc.js

我试图在 d3.js 图表中获取画笔的值。

```
_chart.brush().value; 
```

当您在图表中选择一个范围时，我只想获取画笔范围的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:02:26.210

我想你可能正在寻找

```
brush.extent() 
```

请注意，画笔与 x 和 y 尺度相关联，它们决定了范围调用返回的内容。

通常，您使用带有定量比例的画笔，这意味着范围应该为您提供比例域（数据空间）中的值，但如果您使用序数比例，则范围将返回比例范围（像素空间）的值。

另一件需要注意的事情是，如果画笔只有一个关联的比例（x 或 y），您可以获得一个简单的范围，但如果您设置了两个比例，则会给您一个二维矩阵。

在[这里](https://github.com/mbostock/d3/wiki/SVG-Controls#wiki-brush)查看详细信息。

# node.js - sendgrid make test 抛出错误

> ID：16189443
> 
> 赞同：2
> 
> 时间：2013-04-24T10:19:27.620
> 
> 标签：node.js, sendgrid

我在我的 vps 服务器上运行节点。节点在我的根目录下，我的 app.js 和 node_modules (express, socket.io) 在 /home/vps/public_html/

当按照 github 自述文件设置 sendgrid 我遇到了麻烦：![sendgrid github错误](https://i.stack.imgur.com/GYOP9.jpg)

config.js 不像我运行 sendgrids 简单代码示例时那样听它的声音，如果我

a.) 通过执行以下操作来引用 config.js：

```
var sendgrid=new SendGrid(user,key); 
```

由于未定义用户，节点杀死了自己。

b.) 通过执行以下操作绕过 config.js：

```
var sendgrid=new SendGrid({user:'my_user_name',key:'my_password'}); 
```

我得到 ['Permission denied, wrong credentials'] 的 console.log(message)

这是我的 public_html 结构的另一张图片：![public_html](https://i.stack.imgur.com/cLWV7.png)

有人知道如何激活这个 config.js 吗？

我应该在一开始就将 node.js 安装到我的 public_html 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:43:23.817

所以，这里有一些问题：

**1) 我们在 README 中有错字（现已更新）**

tl;博士 - 你不应该`npm test`输入`make test`

从本质上讲，你正在打字`make test`，make 会回来说“嘿，cwd 中没有测试规则。看起来我没有什么可做的。再见！”。仔细看，节点库中没有 Makefile，所以显然不会有任何规则。所以 make 在这种情况下肯定行不通。README 应该说的是`npm test`. NPM 是 node 的包管理器，它有一个辅助方法`test`，可以运行给定模块的所有测试。

另外，为了清楚起见 - 当您键入时`npm test`，您所做的就是运行库的测试。实际上，只有在库本身添加功能或修复错误时才需要这样做。如果您尝试使用该库发送电子邮件，您应该阅读标题为“使用”的部分。

**2）您的代码中有错字（这就是其他示例不起作用的原因）**

您的代码如下所示：

```
var sendgrid = new SendGrid({user:'my_user_name', key:'my_password'}); 
```

我们提供的代码示例如下所示：

```
var sendgrid = new SendGrid(user, key); 
```

注意到区别了吗？您传入了一个 javascript 对象，而我们期望的是两个离散的字符串值。该库将其解释为您的用户名是“{user:'my_user_name', key:'my_password'}”，没有密码（因为您没有提供第二个参数）。相反，您应该执行以下操作：

```
var sendgrid = new SendGrid("my_user_name", "my_password"); 
```

# c# - C# 控制台 - Console.ReadLine 返回错误的输出

> ID：16189445
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:19:32.190
> 
> 标签：c#, .net, console-application

我这里有一个 C# 控制台应用程序，当我允许用户输入一定数量的记录时，程序会生成一个报价单号。这是为了让我在我的程序中实现它之前测试我制定的算法。

例如，当我输入 23（假设这是数据库中的当前记录数）时，程序将输出“CQ-13-04-0023”。但我得到了“CQ-13-04-0051”的输出。我的目标是当给定报价编号中的序列号达到 9999 时，当数据库中的记录数达到 10000 及以上时，它将重置为 0001。

这是我的代码：

```
class Program
{
    static void Main(string[] args)
    {
        string QuoteRefNum = "";
        string seriesCount = "";
        DateTime year = DateTime.Now;
        string strYear = year.ToString("yy");
        string strMonth = year.ToString("MM");

        Console.Write("Input the number of records: ");
        int numberOfRecords = Convert.ToInt32(Console.Read());

        numberOfRecords++;

        if (numberOfRecords == 0)
        {
            seriesCount = "000" + numberOfRecords++;
        }
        else if (numberOfRecords >= 1 && numberOfRecords <= 9)
        {
            seriesCount = "000" + numberOfRecords;
        }
        else if (numberOfRecords >= 10 && numberOfRecords <= 99)
        {
            seriesCount = "00" + numberOfRecords;
        }
        else if (numberOfRecords >= 100 && numberOfRecords <= 999)
        {
            seriesCount = "0" + numberOfRecords;
        }
        else if (numberOfRecords >= 1000 && numberOfRecords <= 9999)
        {
            seriesCount = numberOfRecords.ToString();
        }
        else if (numberOfRecords >= 10000 && numberOfRecords <= 99999)
        {
            string newSetOfRecords = numberOfRecords.ToString();
            int tempNumber = 0;

            newSetOfRecords.Remove(0, 1);
            tempNumber = Convert.ToInt32(newSetOfRecords);

            if (tempNumber == 0)
            {
                seriesCount = "000" + tempNumber++;
            }
            else if (tempNumber >= 1 && tempNumber <= 9)
            {
                seriesCount = "000" + tempNumber;
            }
            else if (tempNumber >= 10 && tempNumber <= 99)
            {
                seriesCount = "00" + tempNumber;
            }
            else if (tempNumber >= 100 && tempNumber <= 999)
            {
                seriesCount = "0" + tempNumber;
            }
            else if (tempNumber >= 1000 && tempNumber <= 9999)
            {
                seriesCount = tempNumber.ToString();
            }

        }

        QuoteRefNum = "CQ" + strYear + "-" + strMonth + "-" + seriesCount;

        Console.WriteLine("The quote reference number is: " + QuoteRefNum);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:34:25.287

问题是 `Console.Read();`当您键入 23 end 时，输入键`Read()`将返回第一个输入字符的键值，即`2`. ASCII 字符值为`2`50

所以你会在`numberOfRecords++`结果之后得到 51

更改 `Console.Read();`为 `Console.ReadLine();`并删除`numberOfRecords++`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:30:06.773

这条线是问题所在：

```
 int numberOfRecords = Convert.ToInt32(Console.Read()); 
```

它正在返回`ASCII`值。

将其更改为：

```
 int numberOfRecords;
        Int32.TryParse(Console.ReadLine(), out numberOfRecords); 
```

并删除`numberOfRecords++`

**解释发生了什么：**

你得到的原因`51`是因为当你输入`23`的记录数设置为`50`然后你将变量增加到`51`via`numberOfRecords++`

# actionscript-3 - 在佳能 EOD D1000 上加密的 XMP 数据

> ID：16189448
> 
> 赞同：0
> 
> 时间：2013-04-24T10:19:42.550
> 
> 标签：actionscript-3, encryption, air, xmp

我有一个关于加密的问题，这再次与从`aux:SerialNumber`命名空间中读取序列号有关。

当我从佳能 EOS D1000 的照片中打开我在 AS3 中的文件时，它无法读取该位，`ByteArray` `var i:int = p.search('<x:xmpmeta xmlns:x="\'dobe:ns:meta/\'');`因为它已加密。

有趣的是，如果我在 Photoshop 中打开文件然后保存并关闭它，XMP 数据是正确的，我的应用程序可以读取它。

我的问题是如何从 AS3 中解密 XMP 数据？有没有办法做到这一点。还是另一种阅读方式？

这是我使用的方法：

```
private function getXMP(ba:ByteArray):XML
{   
    var LP:ByteArray = new ByteArray();
    var PACKET:ByteArray = new ByteArray();
    var l:int;

    ba.readBytes(LP, 2, 2);

    //http://www.adobe.com/devnet/xmp.html read part 3: Storage in Files.           
    //that will explain the -2 -29 and other things you see here.

    l = LP.readInt() - 2 -29;
    ba.readBytes(PACKET, 33, l);

    var p:String = trim(""+PACKET);
    var i:int = p.search('<x:xmpmeta xmlns:x="adobe:ns:meta/"');
    //Delete all in front of the XMP XML
    p = p.substr(i);

    //For some reason this left some rubbish in front, so I'll hardcode it out for now 

    var ar:Array = p.split('<');
    var s:String = "";
    var q:int;
    var j:int = ar.length;

    for(q=1;q<j;q++)
    {
        s += '<'+ar[q];
    }
    i = s.search('</x:xmpmeta>');
    i += ('</x:xmpmeta>').length;
    s = s.slice(0,i);
    //Delete all behind the XMP XML
    //trace(s);
    return XML(s);
} 
```

# c# - 将 C# 属性应用于多个字段

> ID：16189449
> 
> 赞同：4
> 
> 时间：2013-04-24T10:19:42.957
> 
> 标签：c#

假设我有一个最小的 C# 类，如下所示：

```
class Thing
{
    private float a, b, c, d;
    (...)
} 
```

有没有一种方法可以将属性应用于*所有四个*字段而不必写出四次？如果我把它放在`[SomeAttribute]`前面`private`，它似乎`a`只适用于。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:29:01.570

```
class Thing
{
    [SomeAttribute]
    public float a, b, c, d;
} 
```

您提出的上述内容将按照您的预期工作。您可以对此进行测试：

```
[AttributeUsage(AttributeTargets.Field)]
sealed class SomeAttribute: Attribute
{
    public SomeAttribute()
    {
    }
}

class Program
{
    static void Main(string[] args)
    {
        var t = typeof(Thing);
        var attrs = from f in t.GetFields()
                    from a in f.GetCustomAttributes()
                    select new { Name = f.Name, Attribute = a.GetType() };

        foreach (var a in attrs)
            Console.WriteLine(a.Name + ": " + a.Attribute);

        Console.ReadLine();
    }
} 
```

它打印：

```
a: 一些属性
b: 一些属性
c: 一些属性
d: 一些属性

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T10:27:49.477

是的，有可能：

```
[SomeAttribute]
public int m_nVar1, m_nVar2; 
```

（但显然只有在类型相同的情况下）

**[参考](https://stackoverflow.com/questions/10725998/can-you-apply-a-attribute-to-multiple-fields-in-c)**

例子：

```
[ContextStatic]
private float a, b, c, d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:22:48.827

我认为您无法使用 Visual Studio 以任何方式实现这一目标。

我能想到的最不烦人的方法是使用[MultiEdit](http://www.hanselman.com/blog/SimultaneousEditingForVisualStudioWithTheFreeMultiEditExtension.aspx)，您可以在其中放置多个光标，并且只编写一次属性。

# chef-infra - 点文件应该放在厨师食谱集合中的什么位置？

> ID：16189452
> 
> 赞同：3
> 
> 时间：2013-04-24T10:19:50.877
> 
> 标签：chef-infra, dotfiles, chef-solo

我们正在慢慢地将我们的基础设施转移到 chef 上，并在此过程中建立一系列食谱。

我不确定的一件事是节点/角色/用户特定的点文件应该去哪里。

例如，我们可以使用 rbenv 食谱为多个用户安装 rbenv，
用户 A 可能不需要 rdoc 文档，因此需要自定义`.gemrc`文件。

这应该去哪里？
我们可以将文件内容放在节点/角色特定的 JSON 文件中，或者放在数据包中，但这感觉不对。

有没有办法以一种不是针对一般食谱而是针对特定节点/用户的方式包含实际文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T21:11:13.460

我历来处理这个问题的方法是将用户的 Github 配置文件名称添加到他们的节点，如果设置了该属性，则下载他们自己托管的点文件，如果没有设置默认（组织）。

例如：

```
git "/home/user/dotfiles" do
  repository "git@github.com:git_user/dotfiles.git"
  user "user"
  group "user"
end

execute "cp -R /home/user/dotfiles /home/user" 
```

您还可以将存储库设置为节点属性，以便它们不仅限于自己的存储库。

这些文件也不一定需要复制。就个人而言，我对它们进行了符号链接，但您需要提前了解它们是如何设置的，以使脚本足够健壮，以便以稳定的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T15:58:33.440

您确实可以使用另一种选择`cookbook_file`。

如果您创建一个包含每个人的点文件的食谱，效果如下：

```
cookbook_file "billy.vimrc" do
  path "/home/billy/.vimrc"
end 
```

让每个人都拥有对总体食谱/回购的承诺权，并通过这种方式将事情推出。IT 是一个 hack，清理（假设有人离开）可能有点烦人，但用户管理通常是 ;)。

# php - 根据 where 子句从表中选择一列，然后将其与另一个表中的另一列匹配

> ID：16189457
> 
> 赞同：0
> 
> 时间：2013-04-24T10:19:55.517
> 
> 标签：php, mysql

我有一个名为的变量`$generic`，它被传递到加载查询的函数中，用于与表中的列`SQL`形成匹配；所以在这种情况下，让我们说等于'bar'，然后查询获取匹配行的 并使用 将第二个表中的行与列匹配，然后从表中获取所有数据以放置在数组中。`slug``cms_web_pages``$generic``id``id``cms_web_page_content``page_id``cms_web_page_content`

表“cms_web_pages”：

```
id | title | slug
-----------------
1  | foo   | bar
2  | bar   | foo 
```

表“cms_web_page_content”：

```
id | title | content | position | page_id
-----------------------------------------
1  | foo   | bar     | 1        | 1
2  | bar   | foo     | 2        | 1
3  | doh   | doh     | 1        | 2 
```

SQL查询：

```
$link = db_connect();

$qry = mysqli_query($link,
                    "SELECT page.*, content.*
                     FROM cms_web_pages AS page
                     WHERE page.slug = '".$generic."'

                     LEFT JOIN cms_web_page_content AS content
                     ON page.id = content.page_id)

                     ORDER BY content.position ASC")

                     or die(mysqli_error($link)
                    );

$content = array(); 
```

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:04:54.797

```
Use as :
"SELECT page.*, content.*
                     FROM cms_web_pages AS page
                     LEFT JOIN cms_web_page_content AS content
                     ON (page.id = content.page_id)

                     WHERE page.slug = '".$generic."'

                     ORDER BY content.position ASC" 
```

# android - 制作可在 Facebook 上运行并作为智能手机应用程序的游戏

> ID：16189458
> 
> 赞同：0
> 
> 时间：2013-04-24T10:20:02.273
> 
> 标签：android, ios, facebook, html

我想知道如何设计一个可以在 Facebook 上播放的应用程序，以及作为独立应用程序从 App Store 下载的应用程序，但允许在两个平台之间玩游戏。有像 EA 体育 NFL 社交游戏这样的游戏。您可以下载游戏并在包括 Facebook 在内的多个平台上玩其他游戏。

我所理解的是应用程序的所有资源都下载到客户端设备（除非通过浏览器播放，例如 Facebook）。我不明白的是，他们如何为一个平台创建了一个使用 html 的跨平台游戏，并为另一个平台创建了一个独立的非 html 沙盒应用程序，并且让两个游戏像它们一样交互。

另外，我会在我的网站上运行一个 cgi 脚本来创建一个可执行程序来处理游戏逻辑以在两个游戏模型之间进行通信吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:22:39.397

如果你想创建一个 3D 游戏，你可以考虑使用[http://unity3d.com/](http://unity3d.com/)它允许你在 Chrome 和移动设备上玩。对于移动设备，您还可以使用[http://xamarin.com/](http://xamarin.com/)。

您还可以使用 canvas 或 webGL（移动浏览器尚不支持，但很快就会支持），对于在线游戏，您可以使用 HTML 5 Web 套接字。

关于跨平台在线，正如您所说，您需要在服务器端处理它，但这应该没什么大不了的，您只需将多个客户端连接到一台服务器......

您可以探索的一些框架是[http://impactjs.com/](http://impactjs.com/) [http://threejs.org/](http://threejs.org/) [http://www.createjs.com/](http://www.createjs.com/)

如果您在理论上感到勇敢，您现在可以将任何 C++ 游戏转换为 javascript [https://github.com/kripken/emscripten/wiki](https://github.com/kripken/emscripten/wiki)

# php - 如何将现有的 PHP 项目翻译成不同的语言？

> ID：16189459
> 
> 赞同：1
> 
> 时间：2013-04-24T10:20:05.783
> 
> 标签：php, zend-framework, translation, zend-translate

我浏览了网络，但找不到合适的解决方案。我想我可以在新项目上使用[Zend Translate](http://framework.zend.com/manual/1.12/en/zend.translate.html)，但是如何在现有项目上实施呢？

有很多原生字符串——在 html、PHP 和 SQL 中。什么是找到它们并用函数替换的最佳方法？是否可以在 SQL 查询结果上运行此类函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:26:14.127

最简单的方法应该是根据用户设置或您自动设置的某些变量来调整您的数据库和 SQL 查询以满足您的需求。

您也可以只使用 XML、JSON、txt 文件等。

这比 PHP 编码更多是你需要考虑的结构问题，PHP 让你做任何你想做的事情，你只需要根据你的实际项目结构来决定你将如何实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:22:11.667

真的没有*最好的办法*。只有最适合您需求的方式，从您的问题来看，这些需求对我来说并不是很清楚。我`Zend_Translate`在我的一些项目中使用过，它很好地满足了我的需求。

# javascript - 使用逻辑条件来查找值位于哪个逻辑集的问题

> ID：16189460
> 
> 赞同：0
> 
> 时间：2013-04-24T10:20:08.753
> 
> 标签：javascript, jquery

我们在我们的产品中实现了通用滑块功能。我们需要从 URL 中读取项目索引值并滚动滑块以显示活动项目。

以下代码逻辑用于显示活动缩略图，为此我需要将 DIV 动画到负左。

首先，我们从 URL 哈希值（即#slide=7）中获取总的缩略图项目和活动项目的索引。一套包含至少 5 个项目。需要将滑块宽度乘以 ActiveItemIndex 所在的页面集值。

Javascript 代码 -

```
showActiveThumbnailOnPageLoad : function() {
    var _this = this,
        totalThumbnails = $('.slidetabs a').length,
        activeItem = window.location.href.split('=')[1],
        scrollAmount;

    if(activeItem > 5 && activeItem <= 10) {
        scrollAmount = '-=' + 772
    } else if(activeItem > 10 && activeItem <= 15) {
        scrollAmount = '-=' + 772 * 2
    } else if(activeItem > 15 && activeItem <= 20) {
        scrollAmount = '-=' + 772 * 3
    }

    $('.slidetabs').stop().animate({
        left : scrollAmount
    });
} 
```

截至目前，使用硬编码条件，最多支持 20 个项目。任何有助于使此代码支持 n 个项目的帮助。我的意思是说没有硬代码值的通用代码。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:27:46.000

你可以试试 ：

```
scrollAmount = '-=' + 772 * ~~((activeItem - 1) / 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:31:39.653

用这个：

```
scrollAmount = '-=' + 772 * Math.floor((((activeItem > 0) ? activeItem : 1)  - 1) / 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:26:01.470

尝试这个：

```
scrollAmount = '-=' + 772 * ((activeItem  - 1) / 5); 
```

**编辑**（基于[此评论](https://stackoverflow.com/questions/16189460/issue-with-a-logical-condition-to-find-the-value-lies-in-which-logical-set#comment23144875_16189577)和[此答案](https://stackoverflow.com/a/4228528/504368)）

并四舍五入：

```
scrollAmount = '-=' + 772 * (((activeItem  - 1) / 5) >> 0); 
```

或者：

```
scrollAmount = '-=' + 772 * (~~((activeItem - 1) / 5)); 
```

# android - 测试应用内计费订阅功能

> ID：16189461
> 
> 赞同：17
> 
> 时间：2013-04-24T10:20:15.493
> 
> 标签：android, in-app-billing, google-play-services

是否可以测试应用内结算的订阅功能？我尝试使用保留的产品 ID 进行测试（android.test.purchased），但它给出了“找不到项目”之类的错误。我使用的是应用内结算版本 3。我无法从网络上找到一个确凿的答案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-12T14:33:17.800

自 2015 年 2 月/3 月起，应用内订阅也可以在 Android 上进行测试。现在，具有测试访问权限的 Google 帐户（在`Settings`开发者控制台的菜单中配置）将收到消息

`This is a test subscription. It will recur daily. You will not be charged when trying to buy in-app subscriptions.`

这也意味着所有订阅似乎每天都“计费”。您仍会收到正常的 Google Play 订单收据电子邮件，但会以以下单词为前缀`Test`：

`Test: Your Google Play Order Receipt from Mar 12, 2015`

此外，如果您查看这封电子邮件，您会注意到订单号是一个随机的字母串，而不是[http://developer.android.com/google/play/billing/billing_subscriptions 中描述的常规订单号。 html#支付](http://developer.android.com/google/play/billing/billing_subscriptions.html#payment)。

`Order number: lhjelkffelbnmmcmklbkhkbd`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T10:57:43.323

一些可能会有所帮助的观点。

1.  如果你发布的应用没有应用内，你**不需要**发布你的下一个应用内版本来测试它。
2.  您需要将具有应用内功能的 apk 上传到您的开发者控制台（**不要点击发布**），在您的手机上安装相同的应用
3.  在应用产品（非托管）中创建并确保代码引用这些非托管产品 ID
4.  使产品便宜用于测试目的
5.  从您的应用程序中购买您的产品
6.  从您的商家帐户中自行退款（如果您在 24 小时之前退款，您不会被收取费用，并且您会获得全额退款。（我认为，只需确认这一点，它会不断变化）。
7.  满意后，点击发布。
8.  您可以添加朋友的电子邮件 ID 作为测试帐户，以帮助他们购买产品而不被收费。事实上，你也可以嘲笑他们“失败”:)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T10:52:49.220

这是我亲身经历的答案。

使用开发沙箱测试 inapp 没有合适的方法。这就是我真正测试 inapp 的方式。

*   创建一个测试应用程序来测试 inapp 并对其进行配置。
*   请记住将您的开发人员公钥放在需要的地方，并且需要所有清单权限
*   添加一些应用内购买以进行测试
*   使应用程序不可调试
*   将其作为草稿上传到 android 市场

现在您必须等待几个小时，因为 Android Market 需要推送所有更改，否则您在尝试购买时会收到错误消息

现在在您的设备上本地启动应用程序（您必须将 debuggable 设置为 false）并测试您的应用内购买购买的东西。完成所有测试后，我进入我的谷歌钱包商家帐户，并针对以下各项进行所有其他购买流程测试：

*   退款
*   取消应用内订阅

如果您找到更好的方法来使用**真正的沙箱**进行测试，请告诉我 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T18:24:37.017

用作`android.test.purchased`产品 ID。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-12-07T22:55:59.020

创建一个类来模拟您在 Google Play 服务中使用的 api。

# eclipse - 我可以为 eclipse-java 和 eclipse-cpp 使用相同的工作区吗？

> ID：16189463
> 
> 赞同：0
> 
> 时间：2013-04-24T10:20:18.823
> 
> 标签：eclipse

我下载了 eclipse-jee-juno-SR1-win32-x86_64 并在 mu 用户目录中创建了工作区文件夹。似乎工作正常。

然后我下载了 eclipse-cpp-juno-SR2-win32-x86_64，但我找不到工作区可接受的文件夹。

如何将 java 和 c++ 的 eclipse 保存在同一个用户目录中？

# jsf - disabled="#{not recordsTransferSearch.isDisabled}" 不调用 isDisabled() 方法

> ID：16189472
> 
> 赞同：2
> 
> 时间：2013-04-24T10:20:36.913
> 
> 标签：jsf, jsf-2, richfaces, ajax4jsf

我试图通过定义一个操作方法并将其绑定到组件的“禁用”属性来禁用 jsf 组件。

我的 JSF 组件片段

```
<h:form id="bulk_sch_form1">
    <a4j:commandButton id="alls" value="a. Search records form this company"
        action="#{recordsTransferSearch.actionSearch}"
        reRender="srtDlGrd, dlod_msg_grd, pending_student_table"

        disabled="#{not recordsTransferSearch.isDisabled}">

    </a4j:commandButton>
</h:form> 
```

支持 bean 动作方法

```
public boolean isDisabled() {
    if (searchResults != null) {
        return true;
    }
    return false;
} 
```

searchResults 只是在返回成功的搜索结果后进行评估。但正如标题中所述，它根本没有调用操作方法`isDisabled()`，因此没有任何反应。

只有在我刷新页面时才会调用操作方法。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:24:39.497

您应该使用`disabled`字段获取器，例如 in `disabled="#{not recordsTransferSearch.disabled}"`，或者如果您的 EL 支持方法调用，即版本 2.2+，您应该`()`在方法调用的末尾添加空括号 , ，例如 in `disabled="#{not recordsTransferSearch.isDisabled()}"`。

请注意，就目前而言，与您在评论中的建议相反，`disabled="#{bean.isDisabled}"`将触发*Property 'isDisabled' not found*错误。

* * *

根据您的评论，您并不完全了解`disabled`属性在 JSF 中的工作原理。您似乎希望该按钮在某些 javascript 事件和/或通过某些操作/操作侦听器方法所做的某些更改时启用/禁用。不是这种情况。**仅当**属性的 EL 表达式`disabled`相应地计算为真/假时，该按钮才被禁用/启用。您甚至可以对其进行测试：当您删除 HTML 的 disabled 属性时`input`，有效地使其在客户端启用并调用该按钮，您会看到不会调用任何操作方法，而是会**在服务器上重新评估**其 disabled 属性并且，因为它会评估为`false`，所以不会调用任何方法。

为了使其按预期工作，您需要通过 AJAX 调用重新呈现命令按钮（通过在另一个更改方法结果的属性中指定其 id以便*它*返回`reRender`），或同步（强制执行所需的评估）所以禁用条件将被评估为。`<a4j:commandButton>`*`isDisabled()``false``disabled``false`*

 *此外，最好通过一个基本示例来了解它是如何工作的。

风景：

```
<h:form>
    <h:commandButton id="disabled" value="Disabled command button"
                     action="#{bean.disabledSubmit}"
                     disabled="#{not bean.disabled}">
    </h:commandButton>
    <h:commandButton id="simple" value="Enable a disabled button"
                     action="#{bean.simpleSubmit}">
        <f:ajax render="disabled"/>
    </h:commandButton>
</h:form> 
```

豆子：

```
@ManagedBean
@ViewScoped
public class Bean implements Serializable{

    private boolean searchResults = false;

    public boolean isDisabled() {
        return searchResults;
    }

    public String disabledSubmit() {
        return null;
    }

    public String simpleSubmit() {
        searchResults = true;
        return null;
    }

} 
```*

# excel - VBA在同一张表中复制数据透视表并使用它

> ID：16189474
> 
> 赞同：0
> 
> 时间：2013-04-24T10:20:39.537
> 
> 标签：excel, copy-paste, pivot-table, vba

嗨，我正在复制我在同一张工作表上的数据透视表，我想通过更改一些项目来使用复制的数据透视表。问题是当我复制数据透视表时，我如何识别新的数据透视表名称以使用它？

我的主要目标是在同一个工作表上创建多个数据透视表。枢轴向导不允许我这样做。

我的代码：

```
 ws.Select
        TotalColumns = ws.Cells(1, Columns.Count).End(xlToLeft).Column 'Counting total columns
        TotalRows = ws.Range("A:A").Cells.SpecialCells(xlCellTypeConstants).Count 'Counting total rows
        Set PRange = ws.UsedRange 'found a new function to use do not need to use above fields, but keeping them just incase
        wsPivotStats.Select
        Set CreateStatsAppPt = wsPivotStats.PivotTableWizard(SourceType:=xlDatabase, SourceData:=PRange, TableDestination:=wsPivotStats.Range("B4"), TableName:="StatsPt1")
        Set StatsAppViewPt = wsPivotStats.PivotTables("StatsPt1") 
```

将行和列添加到上表和...

```
 ActiveSheet.PivotTables("StatsPt1").PivotSelect "", xlDataAndLabel, True
   Selection.Copy
   wsPivotStats.Range("B22").Select
   wsPivotStats.Paste
   Set StatsRevViewPt = wsPivotStats.PivotTables("PivotTable2")
           StatsRevViewPt.Select
    With StatsRevViewPt.PivotFields(CaseClas)
               .Orientation = xlColumnField
               .Position = 1
              ' .Subtotals = Array(False, False, False, False, False, False, False, False, False, False, _
                False, False)
    End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:44:37.043

在一行 wsPivotStats.Paste 使用之后

```
set StatsRevViewPt= wsPivotStats.PivotTables(wsPivotStats.PivotTables.count) 
```

# c# - C# 列出 ZIP 文件内容 - 使用 ZipArchive 类

> ID：16189477
> 
> 赞同：3
> 
> 时间：2013-04-24T10:20:49.900
> 
> 标签：c#, zip, .net

我想使用“ZipArchive”类获取 ZIP 文件中的内容列表。

我正在使用 MSDN 中的示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.IO.Compression;
using System.IO.Compression.dll;

namespace Zip_Extractor
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            using (FileStream zipToOpen = new FileStream(@"c:\users\exampleuser\release.zip", FileMode.Open))
            {
                using (ZipArchive archive = new ZipArchive(zipToOpen, ZipArchiveMode.Update))
                {
                    ZipArchiveEntry readmeEntry = archive.CreateEntry("Readme.txt");
                    using (StreamWriter writer = new StreamWriter(readmeEntry.Open()))
                    {
                            writer.WriteLine("Information about this package.");
                            writer.WriteLine("========================");
                    }
                }
            }
        }
    }
} 
```

但是，我得到了错误

> '找不到'ZipArchive 的命名空间'。

我可以确认应用程序的“目标框架”是 .NET Framework 4.5。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:27:40.467

添加对`System.IO.Compression`和的引用`System.IO.Compression.FileSystem`。

查看 David Anderson 的博客：[http ://www.danderson.me/dotnet/zipfile-class-system-io-compression-filesystem/](http://www.danderson.me/dotnet/zipfile-class-system-io-compression-filesystem/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T19:29:21.397

右键单击引用，添加对框架程序集 System.IO.Compression 和 System.IO.Compression.FileSystem 的引用。包括使用 System.IO.Compression；并确保您使用的是 .NET Framework 4.5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T18:36:21.450

我迟到了，但它可能会帮助别人......

添加对其他答案中提到的文件的引用：

*   System.IO.压缩
*   System.IO.Compression.FileSystem

添加这些后它可能不起作用，因此进入它们的属性并将每个“复制本地”设置标记为“真”。

为我做了诀窍。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-09T15:12:09.650

`Assemblies -> Framework:`
我遇到了同样的问题，并在Just add the namespaces:中查找了这些命名空间`System.IO.Compression & System.IO.Compression.FileSystem`。

这是使理解/事情更容易的屏幕截图：

[![在此处输入图像描述](https://i.stack.imgur.com/5aH3J.png)](https://i.stack.imgur.com/5aH3J.png)

# ruby - Ruby：mysql2结果集中关联散列/数组的简写

> ID：16189481
> 
> 赞同：0
> 
> 时间：2013-04-24T10:21:06.360
> 
> 标签：ruby, arrays, hash, mysql2, associative

因此，对于 ruby​​ 来说是新手并为此苦苦挣扎：

图像表 - 2 列，文件名和 md5 使用 mysql2 扩展名

```
images = Hash.new
results = client.query("SELECT * FROM images").each do |row|
    images[row['filename']] = row['md5']
end 
```

我想自动执行此操作，循环进行哈希似乎毫无意义-我认为我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:30:08.877

您可以尝试以下

```
images = Hash[*Image.all.map{ |i| [i.filename, i.md5] }.flatten] 
```

# magento - 在 magento 中设置自定义模块的权限

> ID：16189482
> 
> 赞同：0
> 
> 时间：2013-04-24T10:21:09.977
> 
> 标签：magento

我在 Magento 中创建了一个新模块。它运作良好，但问题是：

我为客户端创建了一个用户登录，并将其分配给一个角色，在`System -> Permissions -> Role`.

当用户登录时，他可以看到`TABS > custom modules links`，但自定义模块的链接不起作用。

这有问题吗？（使用 ADMIN 凭据，它工作得很好）

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:43:19.813

似乎您尚未`<adminhtml>`在 config.xml 的标签下定义 ACL 结帐[http://alanstorm.com/custom_magento_system_configuration](http://alanstorm.com/custom_magento_system_configuration)以获取更多详细信息

# xpath - 使用当前节点的位置访问另一个节点的值

> ID：16189485
> 
> 赞同：1
> 
> 时间：2013-04-24T10:21:17.960
> 
> 标签：xpath, xslt-2.0

我有一个近似于表格布局（程序输出）的 xml 源 - a 是表架，b 是列标题 d，c 是行，e 是行单元格：

```
<?xml version="1.0" encoding="utf-16"?>
    <a>
    <b>
        <d/>
        <d/>
        <d/>
    </b>
        <c>
        <e/>
            <e/>
        <e/>
        </c>
    </a>
</xml> 
```

我写了以下xsl：

```
<?xml version="1.0" encoding="UTF-16"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >

<xsl:template match="/">
    <Lessons>
    <xsl:for-each select="//c">
        <xsl:call-template name="lesson" />
    </xsl:for-each>
    </Lessons>
</xsl:template>

<xsl:template name="lesson">
    <Lesson>
        <Teacher>
            <xsl:value-of select="count(./preceding-sibling::*)+1" />
            <xsl:value-of select="//b[count(./preceding-sibling::*)+1]" />
        </Teacher>
    </Lesson>
</xsl:template>

</xsl:stylesheet> 
```

Teacher 元素的第一个 xsl:value-of 给了我正确的值。我希望第二个 xsl:value-of 返回该单元格的标题值，即对于调用模板的第一个 e 元素，返回第一个 d 元素，依此类推。但是，它会输出所有 d 元素的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:18:51.693

即使不完全清楚您的期望，我也会尝试回答。
据我了解，您希望找到与 `<d>`元素具有相同位置的`<e>`元素。

这可以通过将当前位置作为变量来实现。

```
xsl:variable name ="pos" select="position()" />
<xsl:value-of select="//b/d[position() = $pos]/@id" /> 
```

或使用计数`preceding-sibling`

```
<xsl:value-of select="//b/d[(count(current()/preceding-sibling::*)+1)]/@id" /> 
```

**更新**下面的部分是因为“所有行业的乔治”的评论而改变的。

请注意，结果`position()`取决于调用上下文。

例如下面的测试 xslt（版本 1.0）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <Lessons>
            <!-- Wrong result with position  -->
            <xsl:for-each select="//c/e">
                <xsl:call-template name="lesson" />
            </xsl:for-each>
        </Lessons>
        <Lessons2>
            <!-- Wonted result even with position -->
            <xsl:for-each select="//c">
                <xsl:for-each select="e">
                    <xsl:call-template name="lesson" />
                </xsl:for-each>
            </xsl:for-each>
        </Lessons2>
    </xsl:template>

    <xsl:template name="lesson">
        <Lesson>
            <Teacher>
                <xsl:value-of select="@id" />
                <xsl:text>,</xsl:text>
                <xsl:value-of select="count(./preceding-sibling::*)+1" />
                <xsl:text>,</xsl:text>
                <xsl:variable name ="pos" select="position()" />
                <xsl:value-of select="$pos" />
                <xsl:text>,</xsl:text>
                <xsl:value-of select="//b/d[position() = $pos]/@id" />
                <xsl:text>,</xsl:text>
                <xsl:value-of select="//b/d[count(current()/preceding-sibling::*)+1]/@id" />
            </Teacher>
        </Lesson>
    </xsl:template>

</xsl:stylesheet> 
```

使用此输入：

```
<?xml version="1.0" encoding="utf-16"?>
<xml>
    <a>
        <b>
            <d id="d1"/>
            <d id="d2"/>
            <d id="d3"/>
        </b>
        <c>
            <e id="e1"/>
            <e id="e2"/>
            <e id="e3"/>
        </c>
        <c>
            <e id="e21"/>
            <e id="e22"/>
            <e id="e23"/>
        </c>
        <c>
            <e id="e21"/>
            <e id="e22"/>
            <e id="e23"/>
        </c>
    </a>
</xml> 
```

生成此输出：

```
<Lessons>
  <Lesson>
    <Teacher>e1,1,1,d1,d1</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e2,2,2,d2,d2</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e3,3,3,d3,d3</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e21,1,4,,d1</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e22,2,5,,d2</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e23,3,6,,d3</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e21,1,7,,d1</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e22,2,8,,d2</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e23,3,9,,d3</Teacher>
  </Lesson>
</Lessons><Lessons2>
  <Lesson>
    <Teacher>e1,1,1,d1,d1</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e2,2,2,d2,d2</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e3,3,3,d3,d3</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e21,1,1,d1,d1</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e22,2,2,d2,d2</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e23,3,3,d3,d3</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e21,1,1,d1,d1</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e22,2,2,d2,d2</Teacher>
  </Lesson>
  <Lesson>
    <Teacher>e23,3,3,d3,d3</Teacher>
  </Lesson>
</Lessons2> 
```

# java - 使用地图问题

> ID：16189495
> 
> 赞同：0
> 
> 时间：2013-04-24T10:22:00.517
> 
> 标签：java

我正在使用地图来存储有关军队的信息，然后将地图作为参数传递给函数以创建军队。输入如下：

```
Humans : {30,40}
Elfs: {20,40,60}
Humans: {10} 
```

我用来存储信息的方法效果不佳，因为当我添加具有另一个值的键时，它正在创建一个新对象，因为我正在使用该类的新实例。谁能帮我解决这个问题？

```
public class InputInformation {

    public static Map<CreatureFactory, ArrayList<Integer>> description;

    public InputInformation(){
        description = new HashMap<CreatureFactory,ArrayList<Integer>>();
    }

    public static  Map<CreatureFactory, ArrayList<Integer>> createArmy(BufferedReader buffer) 
            throws IOException,NumberFormatException {
        String option;
        CreatureFactory factory;
        ArrayList<Integer> warriors;
        Map<CreatureFactory, ArrayList<Integer>> description = new HashMap<CreatureFactory, ArrayList<Integer>>();
        while(true){
            createArmysMenu();
            while((option = buffer.readLine()) != null){
                switch(option){
                case "H":
                    factory = new HumansFactory(); 
                    warriors = getTroopNumberOfWarriors(buffer);
                    description.put(factory, warriors); 
                    break;
                case "E":
                    factory = new ElfsFactory();
                    warriors = getTroopNumberOfWarriors(buffer);
                    description.put(factory, warriors);
                    break;
                case "D":
                    factory = new DwarfsFactory();
                    warriors = getTroopNumberOfWarriors(buffer);
                    description.put(factory, warriors);
                    break;
                case "O":
                    factory = new OrcsFactory();
                    warriors = getTroopNumberOfWarriors(buffer);
                    description.put(factory, warriors);
                    break;
                case "W":
                    factory = new WargsFactory();
                    warriors = getTroopNumberOfWarriors(buffer);
                    description.put(factory, warriors);
                    break;
                case "F":
                    System.out.println("Your army has been created");
                    showPrincipalMenu();                    
                    return description;
                default: 
                    System.out.println("Mistmatch");
                    break;
                }
            }
        }

    }
    private static ArrayList<Integer> getTroopNumberOfWarriors( BufferedReader buffer) 
            throws NumberFormatException, IOException {
        Integer numberOfWarriors;
        ArrayList<Integer> warriors = null;     
        while(true){
            enterNumberOfWarriors();
            numberOfWarriors = Integer.parseInt(buffer.readLine());
            if(numberOfWarriors == -1){
                createArmysMenu();
                break;
            } else { 
                if(warriors == null){
                    warriors = new ArrayList<Integer>();
                    warriors.add(numberOfWarriors);
                } else {
                    warriors.add(numberOfWarriors);
                }
            }

        }
        return warriors;
    }

    public static void showPrincipalMenu(){
        System.out.println("To create the free army press 1");
        System.out.println("To create the dark army press 2");
        System.out.println("To start the fight, press 0");
    }

    public static void createArmysMenu(){
        System.out.println("To add a Humans troop, press H");
        System.out.println("To add an Elfs troop, press E");
        System.out.println("To add an Dwarfs troop, press D");
        System.out.println("To add an Orcs troop, press O");
        System.out.println("To add an Wargs troop, press W");
        System.out.println("When you've done adding the troops, press F");
    }

    public static void enterNumberOfWarriors(){
        System.out.println("Enter the number of warriors for this troop");
        System.out.println("To add a new troop press -1");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:31:59.613

CreatureFactory 和他们的子类可能会错过 hashCode，equals。

从你的代码`option`看来是最好的关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:22:49.180

如何`creatureMap`将生物类型/ID映射到地图中`CreatureFactory`并在地图中使用相同的`CreatureFactory`对象，`description`而不是每次都创建一个新对象

```
Map<String, CreatureFactory> creatureMap = new HashMap<String, CreatureFactory>();
creatureMap.put("H", new HumansFactory());
creatureMap.put("E", new ElfsFactory());
creatureMap.put("D", new DwarfsFactory());
creatureMap.put("O", new OrcsFactory());
creatureMap.put("W", new WargsFactory());

// inside the loop
CreatureFactory factory = creatureMap.get(option);
if ( null == factory ) {
    if ( "F".equals(option) {
            System.out.println("Your army has been created");
            showPrincipalMenu();                    
            return description;
        } else {
            System.out.println("Mistmatch");
            break;
        } 
    ArrayList<Integer> warriors = description.get(factory);
    if ( null == warriors ) {
        // not added before
        warriors = new ArrayList<Integer>();
        description.put(factory, warriors);
    }
    warriors.addAll(getTroopNumberOfWarriors(buffer));
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-24T10:27:25.883

不要使用实例作为键，每个实例都有不同的内存地址，所以它将是另一个，尝试使用类名`CreatureFactory.class.getName()` 或其他一些字符串

# python - Blender相机旋转与python - 不是平面的？

> ID：16189503
> 
> 赞同：0
> 
> 时间：2013-04-24T10:22:21.763
> 
> 标签：python, blender

我正在尝试创建一个渲染对象 360 度旋转的脚本。我对搅拌机一点也不熟悉，但我一直在努力做到这一点。

我正在使用 Python 编写一个脚本，该脚本导入一个 STL 文件并创建它的 360 度渲染。我的问题是，移动相机时，相机不会在正确的平面上移动。

这是一张图片专辑，描述了我的意思：

[http://imgur.com/a/FkVLp](http://imgur.com/a/FkVLp)

我用来执行此操作的功能是：

```
def rotateCameraAroundOrigin(rx=0):
    cam = bpy.data.objects['Camera']
    old_x = cam.location.x
    old_y = cam.location.y
    old_z = cam.location.z
    radius = math.sqrt((math.pow(old_x,2) + math.pow(old_y,2)))
    current_angle = math.degrees(math.atan2( old_y, old_x))
    print("CUR:\t%+04d degrees" % (current_angle))
    new_angle = current_angle + rx
    print("FROM:\t%+04d, %+04d, %+04d" % (old_x,old_y,old_z))
    new_x = radius * math.cos(math.radians(new_angle))
    new_y = radius * math.sin(math.radians(new_angle))
    moveCamTo(new_x,new_y,old_z)
    print("TO:\t%+04d, %+04d, %+04d\n" % (new_x,new_y,old_z)) 
```

接着：

```
for i in range(1, 10):
    print("Rotation %01d" % (i))
    image = 'images/' + sys.argv[-1] + str(i) + '.' + filetype
    rotateCameraAroundOrigin(36)
    render_thumb(image,gl=False) 
```

这会产生 imgur 专辑中显示的输出：

```
Rotation 1
CUR:    +000 degrees
FROM:   +302, +000, +000
TO:     +244, +177, +000

Rotation 2
CUR:    +035 degrees
FROM:   +244, +177, +000
TO:     +093, +287, +000

Rotation 3
CUR:    +071 degrees
FROM:   +093, +287, +000
TO:     -093, +287, +000

Rotation 4
CUR:    +107 degrees
FROM:   -093, +287, +000
TO:     -244, +177, +000

Rotation 5
CUR:    +143 degrees
FROM:   -244, +177, +000
TO:     -302, +000, +000

Rotation 6
CUR:    +179 degrees
FROM:   -302, +000, +000
TO:     -244, -177, +000

Rotation 7
CUR:    -144 degrees
FROM:   -244, -177, +000
TO:     -093, -287, +000

Rotation 8
CUR:    -108 degrees
FROM:   -093, -287, +000
TO:     +093, -287, +000

Rotation 9
CUR:    -072 degrees
FROM:   +093, -287, +000
TO:     +244, -177, +000 
```

我不知所措。我的飞机倾斜了，但我不知道为什么。我想围绕物体平滑旋转。

谢谢你的帮助，

H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T14:22:53.613

为什么不在对象位置创建一个空对象。将相机作为父项。然后将旋转矩阵应用于空。养育将导致相机旋转通过所需的旋转弧。

这种方法要简单得多，主要用于速度建模，您希望相机查看整个对象的进度。

```
def parent_obj_to_camera(b_obj, b_camera):
    origin = (0,0,0) #can be replaced with b_obj.location
    b_empty = bpy.data.objects.new("Empty", None)
    b_empty.location = origin
    b_camera.parent = b_empty #setup parenting

    scn = bpy.context.scene
    scn.objects.link(b_empty)
    scn.objects.active = b_empty 
    b_empty.select = True 
```

然后在那个 for 循环中，您将创建一个 Matrix 来旋转空

```
import mathutils
from math import radians

b_empty = bpy.context.scene.active_object
num_steps = 9
stepsize = 360/num_steps
for i in range(0, num_steps):
    mat_rot = mathutils.Matrix.Rotation(radians(step), 4, 'X')
    b_empty.matrix_local *= mat_rot 

    print("Rotation %01d" % (radians(stepsize)))
    image = 'images/' + sys.argv[-1] + str(i) + '.' + filetype
    render_thumb(image,gl=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T08:13:50.453

我在@neomonkeus 的回答中遇到了一些问题。我对他的代码进行了以下更改，它对我有用。

```
mat_rot=mathutils.Matrix.Rotation(radians(stepsize*(i+1)), 4, 'X')
b_empty.matrix_world = mat_rot
bpy.context.scene.update() # VERY IMPORTANT 
```

不要忘记更新场景。

# python - 如何生成从 aa... 到 zz 的一系列字符串

> ID：16189505
> 
> 赞同：1
> 
> 时间：2013-04-24T10:22:26.200
> 
> 标签：python, string

我正在尝试创建一个 Python 程序，它接受一个字符串并基于该字符串显示排列。

例如。

如果用户输入“[AAA] Grim”，它应该生成从“aaa Grim”开始的单词，然后是“aab Grim”，然后是“aac Grim”到“zzz Grim”等。或者如果用户输入“[AA] Grim”，它应该生成“aa Grim”、“ab Grim”、“ac Grim”到“zz Grim”

抱歉，问题标题不清楚。如果没有示例，我不确定如何表达我的要求。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:45:20.150

```
input = '[AAA] Grim'
n = len(input.split(' ')[0]) - 2
s = input[n+2:]
a = [''.join(x)+s for x in itertools.product(string.ascii_lowercase, repeat=n)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:07:15.957

如果我理解你的意思，下面会做：

```
import re
import string
import itertools

user_in = input("Enter string: ")
p_len = user_in.index(']') - user_in.index('[')
text = user_in[user_in.index(']')+1:]
print('\n'.join([ ''.join(p) + text for p in itertools.combinations_with_replacement(string.ascii_lowercase,r=p_len-1)])) 
```

将产生（提取物）：

```
Enter string: [AA] Grim
aa Grim
ab Grim
ac Grim
ad Grim
ae Grim 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T16:10:59.770

```
>>> import string
>>> ltrs = string.lowercase
>>> [''.join([a,b]) for a in ltrs for b in ltrs] 
```

代码来自这里：[https ://mail.python.org/pipermail/tutor/2005-July/040117.html](https://mail.python.org/pipermail/tutor/2005-July/040117.html)

我找到了，而且效果很好！

# list - Lisp 排序和评分

> ID：16189507
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:22:31.817
> 
> 标签：list, sorting, lisp

我正在尝试`score function`使用 lisp。这个想法是我有一个列表作为输入。这个列表必须排序，每个值都应该得到一个标记（最火的一个有最高标记）我尝试了类似正常排序的方法，但我需要使用 lambda 运算符

但是我的口齿不清。

一个清楚的例子： ((o1 10 15 20) (o2 5 14 20) (o3 7 8 8) output> ((o1 1 1 1) (o2 3 2 1) (o3 2 3 3))

它对 o1 中最火的值进行排序，首先从 o2 中排序，然后从 o3 中排序，然后对它们进行排名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:50:27.037

我实际上无法理解你的问题。但如果问题是：“帮我用普通的 lisp 对列表进行排序”，那么：

1) `(setq o1 (20 30 15)) 是一个有效的 lisp 表达式， (20 30 15) 是一个列表，但它没有被引用，因此解释器将尝试评估表达式。并且评估规则是“表达式中的第一个元素是函数”，因此解释器将尝试评估名称为“20”的函数并且会失败。你应该这样写：

```
(setq o1 '(20 30 15)) 
```

1'）通常最好使用`setf`代替`setq`（特别是如果您不想知道区别）。而且最好在为其设置值之前定义变量。所以最好写这样的东西：

```
(defparameter o1 '()) ;creating o1 with empty list
(setf o1 '(20 30 15)) 
```

1'') 您应该使用易于理解的名称命名变量和函数。如果它是一个全局变量，用星号标记它。例如

```
(defparameter *students-scores* '())
(setf *students-scores* '(20 30 15)) 
```

2) 通常，lisp`list`是一个内置函数，可以从它的参数创建一个列表。即使您在执行此代码时在自己的包中（默认包已锁定，因此您将无法在`list`其中重新定义函数），将此类函数重新定义为 是很奇怪的`list`，因此请为你的功能

```
(defun sort-integer-list (lst)
  (sort lst #'<)) 
```

3）您的代码中有括号不匹配。

# file-io - 将图像存储到本地系统上的指定位置

> ID：16189510
> 
> 赞同：0
> 
> 时间：2013-04-24T10:22:34.770
> 
> 标签：file-io, playframework, playframework-2.0

我正在使用 Play Framework 2.0.4。这是我尝试过的代码：

```
public static Result save() throws FileNotFoundException {

    Form<Tenant> tenantForm = form(Tenant.class).bindFromRequest();
    Form<Ten> tenForm = form(Ten.class).bindFromRequest();
    Long tenantid = tenForm.get().tenant_id;

    Http.MultipartFormData body = request().body().asMultipartFormData();
    Http.MultipartFormData.FilePart picture = body.getFile("logo_url");

    if (picture != null) {
        String fileName = picture.getFilename();
        String contentType = picture.getContentType();
        File file = picture.getFile();
        tenantForm.get().logo_url = file.getPath();
        tenantForm.get().save();

      return redirect(
           routes.Application.index()
      );
    } else {
        flash("error", "Missing file");
        return redirect(
           routes.Project.ctstenant(0,"name","asc","","",tenantid)
        );
    }
} 
```

它将图像存储在临时文件夹中。我希望它存储在指定的文件夹中。有了这个例子将不胜感激。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:49:45.403

您可以将文件从 TEMP 文件夹移动到文件存储目录。以下是如何移动上传文件的示例：

```
// define file storage path
public static final String fileStoragePath = "D:\\filestorage\\";

// handle form submit action
public static Result save() {

   // bind request logic
   ...

   if (picture != null) {
      String fileName = picture.getFilename();
      String contentType = picture.getContentType();
      File file = picture.getFile();

      // log message to console
      Logger.info("Original file name = " + fileName + 
         " with Content Type " + contentType);

      // Rename or move the file to the storage directory
      if (file.renameTo(new File(fileStoragePath + fileName))) {
         Logger.info("Success moving file to " + file.getAbsolutePath());
      } else {
         Logger.info("Failed moving file on " + file.getAbsolutePath());
      }

      // save your file name or using blob (it is your choice)
      ...
   }
} 
```

* * *

> 请注意，定义的路径`fileStoragePath`必须在成功移动或重命名上传文件之前可用。

# regex - 使用正则表达式的锚标记名称 searchinh

> ID：16189516
> 
> 赞同：0
> 
> 时间：2013-04-24T10:23:00.840
> 
> 标签：regex, c#-2.0

我有这个锚标签标准

```
 <a href = "\code.ixc">temp_file</a> 
```

以这种方式列出的文件可能有 10 个。现在我想搜索“temp_file”字符串。我用了

```
 <a href=\".*\">(?<name>.*)</a> 
```

但它返回我 0 计数模式搜索。谁能帮我用正确的正则表达式来搜索这个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:44:11.973

`<a href\s=\s".*">(.*)<\/a>`可能是一个起点。`=`您错过了必须转义的正斜杠周围的空格。`"`另一方面，通常不必转义（除非您在将正则表达式放入字符串的编程环境中使用它。`(.*)`可能会替换为`(\w)`.

# layout - 如何恢复原来的窗口intellij布局

> ID：16189517
> 
> 赞同：9
> 
> 时间：2013-04-24T10:23:02.397
> 
> 标签：layout, intellij-idea

我没有选择“恢复默认布局”，而是错误地选择了“将当前布局存储为默认布局”，所以我当前的布局（我不想使用）被设置为默认布局。

现在我不能再去原来的布局了。有没有办法将布局重置为其出厂值？

我在 Windows7 上的 intellij 12.1.1 上。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-24T22:55:38.820

布局存储工具窗口的位置和状态，您可以将其更改回您喜欢的方式并将其存储为新的默认值。

没有用于将布局重置为 IDE 默认值的 GUI，但配置存储在项目目录中的`./idea/workspace.xml`文件中。当项目关闭时，您可以`<component name="ToolWindowManager">`从此文件中删除节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-09T14:45:34.773

对于遇到此“基本”错误的任何人，您可以转到**设置 (Ctrl + Alt + S) -> 外观和行为 -> 外观 -> 工具窗口**并选中以下复选框：

*   显示工具窗口栏
*   显示工具窗口编号（可选）

我发现的所有其他解决方案都没有解决问题，而且 IDE 不支持将 Window 重置为默认值，这非常令人沮丧。

PS：由于我公司笔记本电脑的安全性，我无法发布上述设置的屏幕截图，但按照我写的路径很容易找到。

# spring - @InjectParam 没有按预期工作

> ID：16189519
> 
> 赞同：0
> 
> 时间：2013-04-24T10:23:08.377
> 
> 标签：spring, tomcat, glassfish, jersey

我有一个特殊的问题。@InjectParam 适用于 tomcat，但不适用于 glassfish。

在 glassfish 中它只是空的。这有什么原因吗？

公共类 RestControllers {

```
private static Log log=LogFactory.getLog(RestControllers.class.getName()); 
@InjectParam
private RulesController controller; 
```

当我说 controller.getSomething() 正在抛出 NPE 时。

controller.getSomething 仅在 glassfish 上引发空指针异常。在tomcat上像梦一样工作。

问候，

阿维纳什 C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:41:33.283

自己解决了这个问题。GlassFish 显然不支持球衣注释。

刚刚使用 Spring 的 ApplicationContextAware 接口来解决这个问题。

问候， 阿维纳什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T13:58:33.230

如果您使用的是 Spring

1）请提及它是注释驱动的

```
<context:component-scan base-package="com.test.reports.controller"/>
<context:annotation-config/>
<mvc:annotation-driven/> 
```

在你的 application-context.xml

2）使用 Spring @Autowired 尝试在控制器中声明您的服务，如下所示：

@Autowired ReportService reportService[如在应用程序 Context 的 bean id 中]

# php - 如何使用 php 在 Amazon api 中访问 10 多个项目的详细信息？

> ID：16189520
> 
> 赞同：7
> 
> 时间：2013-04-24T10:23:08.077
> 
> 标签：php, api, amazon-web-services, amazon

我正在使用 amazon api，并使用了来自在线资源[http://www.codediesel.com/php/accessing-amazon-product-advertising-api-in-php/](http://www.codediesel.com/php/accessing-amazon-product-advertising-api-in-php/)的代码。

当我使用 amazon api 进行搜索查询时，我想获得 10 多个产品的详细信息。我知道每次调用获取 10 个数据的 amazon api 政策，但是否可以通过创建循环或其他方式获取更多数据？

当我提出请求时，我分配了以下参数

```
 $parameters = array("Operation"     => "ItemSearch",
                     "SearchIndex"   => "Electronics",
                     "ResponseGroup" => "Images,ItemAttributes,EditorialReview,Offers ",  
                     "ItemPage"=>"10",
                     "Keywords" => $search                                                                                                                                              ); 
```

因此，即使我要求了 10 页的结果，但我不确定如何显示每一页（1 到 10）的数据，所以当我进行查询时，我总共得到 100 个项目。当我尝试运行代码时，我得到以下响应：

```
SimpleXMLElement Object ( 
    [Request] => SimpleXMLElement Object ( 
        [IsValid] => True            
        [ItemSearchRequest] => SimpleXMLElement Object ( 
            [ItemPage] => 10 
            [Keywords] => laptop 
            [ResponseGroup] => Array ( 
                [0] => Images 
                [1] => ItemAttributes 
                [2] => EditorialReview 
                [3] => Offers 
            ) 
            [SearchIndex] => Electronics 
        ) 
    ) 
    [TotalResults] => 3383691 
    [TotalPages] => 338370 
    [MoreSearchResultsUrl] => http://www.amazon.co.uk/gp/redirect.html?camp=2025&creative=12734&location=http%3A%2F%2Fwww.amazon.co.uk%2Fgp%2Fsearch%3Fkeywords%3Dlaptop%26url%3Dsearch-.................(and on)
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-07T14:35:15.003

是的，您需要循环 10 次并附加一个数组或对象。AWS 文档说这`ItemPage`实际上是结果页面，因此您只需翻阅 10 次即可获得 100 个结果。

AWS 文档`ItemPage`：

[http://docs.aws.amazon.com/AWSECommerceService/latest/DG/PagingThroughResults.html](http://docs.aws.amazon.com/AWSECommerceService/latest/DG/PagingThroughResults.html)

```
$obj = new AmazonProductAPI();

$results = array();

for ($i=1;$i<=10;$i++) {
    $parameters = array("Operation"     => "ItemSearch",
                 "SearchIndex"   => "Electronics",
                 "ResponseGroup" => "Images,ItemAttributes,EditorialReview,Offers ",  
                 "ItemPage"=>$i,
                 "Keywords" => $search);

    $results[] = $obj->searchProducts($parameters);

}

foreach ($results as $r) {
    //do your stuff
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-17T17:01:52.717

我们可以使用制造商参数和 BrowseNode 来检索特定类别中的 100 多种产品。

# android - OnGlobalLayoutListener：弃用和兼容性

> ID：16189525
> 
> 赞同：75
> 
> 时间：2013-04-24T10:23:13.773
> 
> 标签：android, compatibility, deprecated

我必须使用一个`OnGlobalLayoutListener`对象，然后删除侦听器，我遇到了不推荐使用的方法的问题，我通过以下代码解决了这些问题。

```
protected void onCreate(Bundle savedInstanceState) {
    final LinearLayout llTotal = (LinearLayout) findViewById(R.id.mmc_ll);
    ViewTreeObserver vto = llTotal.getViewTreeObserver();
    if(vto.isAlive()){
        vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                //
                // mycode
                //
                if (Build.VERSION.SDK_INT<16) {
                    removeLayoutListenerPre16(llTotal.getViewTreeObserver(),this);
                } else {
                    removeLayoutListenerPost16(llTotal.getViewTreeObserver(), this);
                }
            } 
        });
    }
    super.onCreate(savedInstanceState);
}

@SuppressWarnings("deprecation")
private void removeLayoutListenerPre16(ViewTreeObserver observer, OnGlobalLayoutListener listener){
    observer.removeGlobalOnLayoutListener(listener);
}

@TargetApi(16)
private void removeLayoutListenerPost16(ViewTreeObserver observer, OnGlobalLayoutListener listener){
    observer.removeOnGlobalLayoutListener(listener);
} 
```

这是对的吗？有更好的方法来处理兼容性吗？

使用 API 10 在模拟器中运行代码我在 LogCat 中有以下警告

```
04-24 09:30:12.565: I/dalvikvm(471): Could not find method android.view.ViewTreeObserver.removeOnGlobalLayoutListener, referenced from method com.my.project.ActivityHome.removeLayoutListenerPost16
04-24 09:30:12.565: W/dalvikvm(471): VFY: unable to resolve virtual method 2950: Landroid/view/ViewTreeObserver;.removeOnGlobalLayoutListener (Landroid/view/ViewTreeObserver$OnGlobalLayoutListener;)V 
```

我可以忽略它们，我必须以某种方式修复吗？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-04-24T11:04:49.823

我在我的项目中使用它：

```
@TargetApi(Build.VERSION_CODES.JELLY_BEAN)
public static void removeOnGlobalLayoutListener(View v, ViewTreeObserver.OnGlobalLayoutListener listener){
    if (Build.VERSION.SDK_INT < 16) {
        v.getViewTreeObserver().removeGlobalOnLayoutListener(listener);
    } else {
        v.getViewTreeObserver().removeOnGlobalLayoutListener(listener);
    }
} 
```

看起来和你的很像。在不同的设备（4.2.2 和 2.3.3）上测试并且运行完美。似乎这是唯一的方法....如果您发现其他任何东西，我想知道它。祝你好运

**2020 编辑** 这种方法非常非常过时。我希望您将代码移至 Kotlin。现在我们可以在使用 ktx 库时使用 doOnPreDraw 函数。 [https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#(android.view.View).doOnPreDraw(kotlin.Function1)](https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#(android.view.View).doOnPreDraw(kotlin.Function1))

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-05-19T15:20:44.693

我认为正确的方法是使用`Build.VERSION.SDK_INT`and `Build.VERSION_CODES`：

```
public static void removeOnGlobalLayoutListener(View v, ViewTreeObserver.OnGlobalLayoutListener listener){
        if(Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
                v.getViewTreeObserver().removeGlobalOnLayoutListener(listener);
            } else {
                v.getViewTreeObserver().removeOnGlobalLayoutListener(listener);
            }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-12-01T06:32:37.167

```
 mView.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
                mView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
            } else {
                //noinspection deprecation
                mView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
            }
            //
            // mycode
            //
        } 
    }); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-10-07T01:54:25.123

当然，检查 Android 版本并调用正确的方法要谨慎得多，但是如果您查看 Android 源代码，您会发现一些有趣的东西：

```
 @Deprecated
    public void removeGlobalOnLayoutListener(OnGlobalLayoutListener victim) {
        removeOnGlobalLayoutListener(victim);
    } 
```

此代码是从 API 18 中截取的

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-10-12T14:33:19.130

根据[文档](https://developer.android.com/reference/android/view/ViewTreeObserver.html)：

> 此方法在 API 级别 16 中已弃用。请改用 #removeOnGlobalLayoutListener

奇迹般有效。

# c# - 从 XElement 读取特定元素

> ID：16189526
> 
> 赞同：2
> 
> 时间：2013-04-24T10:23:14.083
> 
> 标签：c#, xml, linq-to-xml

我想使用 c# 将共享点列表的选择列中的 MultipleCheckbox 项目绑定到 asp.net CheckBoxListItem。我正在使用 XELEMENT 检索 List 的信息：

```
XElement listStructure;

listStructure = proxy.GetList("WebsiteSubscriber"); 
```

```
<Field Type="MultiChoice" DisplayName="Area" Required="FALSE" EnforceUniqueValues="FALSE" Indexed="FALSE" FillInChoice="FALSE" ID="{16cc1615-a490-44de-a870-c7ebe603e2cc}" SourceID="{2c8a80ea-38c5-48f7-9d7d-400d445a5e64}" StaticName="Area" Name="Area" ColName="ntext2" RowOrdinal="0">
  <Default>Articles</Default>
  <CHOICES>
    <CHOICE>Articles</CHOICE>
    <CHOICE>Websites</CHOICE>
    <CHOICE>Books</CHOICE>
  </CHOICES>
</Field> 
```

我想从这个 XML 中读取选择。并仅获取值“文章、网站、书籍”

**注意：**此 XML 可能包含许多部分，`<choices>`我想通过`<fieldType>`DisplayName="Area" 属性来获取它并在 c# 中获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:28:15.113

尝试这个：

```
var temp = 
    listStructure.Descendants("Field")
                 .Where(i => i.Attribute("DisplayName").Value == "Area")
                             .Select(i => i.Descendants("CHOICE") 
                                          .Select(j => j.Value)).ToList();

List<string> result = new List<string>();

foreach (IEnumerable<string> item in temp)
{
    result.AddRange(item);
}

//result: Articles; Websites; Books 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:28:16.463

```
var xml = @"<Field Type=""MultiChoice"" DisplayName=""Area"" Required=""FALSE"" EnforceUniqueValues=""FALSE"" Indexed=""FALSE"" FillInChoice=""FALSE"" ID=""{16cc1615-a490-44de-a870-c7ebe603e2cc}"" SourceID=""{2c8a80ea-38c5-48f7-9d7d-400d445a5e64}"" StaticName=""Area"" Name=""Area"" ColName=""ntext2"" RowOrdinal=""0"">
  <Default>Articles</Default>
  <CHOICES>
    <CHOICE>Articles</CHOICE>
    <CHOICE>Websites</CHOICE>
    <CHOICE>Books</CHOICE>
  </CHOICES>
</Field>";

var doc = XDocument.Parse(xml);

XElement element = 
         doc.Descendants("Field")
            .First(field => (string)field.Attribute("DisplayName") == "Area");

string[] result = 
         element.Descendants("CHOICE")
                .Select(v => (string)v)
                .ToArray();

Console.WriteLine(string.Join(Environment.NewLine, result)); 
```

印刷：

```
Articles
Websites
Books 
```

# c# - ASP.NET MVC4 从带有实体框架的存储过程返回输出

> ID：16189527
> 
> 赞同：0
> 
> 时间：2013-04-24T10:23:15.210
> 
> 标签：c#, sql, asp.net-mvc, linq, stored-procedures

我一直在尝试从存储过程中获取简单的输出

```
ALTER PROCEDURE [dbo].[sp_getrandomnumber]
        @randoms int output
AS
begin
  set @randoms =12345
end 
```

和我的 mvc

```
 public ActionResult Index()
    {
        var qry = db.sp_getrandomnumber(ref randoms); 
      ......
     return View();
    }
} 
```

但是当我编译时，我在该`var qry`部分出现错误，内容如下

> 方法“sp_getrandomnumber”没有重载需要 1 个参数
> 
> 当前上下文中不存在名称“randoms”

我尝试按照本教程 [http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:52:45.323

你的问题是你的 SPROC 输出是一个 int。

请参阅 Scott Gu 的文章中的以下引用。

“LINQ to SQL 将 SPROC 中的“输出”参数映射为引用参数（ref 关键字），并且对于值类型，将参数声明为可为空。”

所以你需要确保你声明`randoms`为一个可为空的 int。

将您的 sp 调用更改为

```
public ActionResult Index()
{   
    // @randoms int output from SPROC.
    int? randoms = null;

    // qry would contain a select if you had one in the SPROC.
    var qry = db.sp_getrandomnumber(ref randoms); 

    // randoms is 12345

    return View();
} 
```

[在这里](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2008/03/13/10236.aspx)找到另一个例子。

# java - JAXB 属性顺序

> ID：16189531
> 
> 赞同：3
> 
> 时间：2013-04-24T10:23:22.490
> 
> 标签：java, jaxb, xjc, xjb

我有一个 XSD 文件。使用 xjc 我从中生成类。**如何从生成的类中的 XmlType 注释中更改 propOrder 值？**我不想更改 XSD 文件，只要我不是它的所有者并且我不想更改从此模式生成的类。有没有办法通过自定义绑定文件（xjb）来实现这一点？问题是 propOrder 值对我来说是不可取的。作为最后一个解决方案，我考虑对此类使用 parseMethod/printMethod，但这太棘手了。

我正在处理 FpML（XML 基本格式），这是一个 XSD 元素：

```
<xsd:complexType name="TradeIdentifier">
    <xsd:sequence>
        <xsd:choice>

            <xsd:sequence>
                <xsd:element name="issuer" type="IssuerId"></xsd:element>
                <xsd:element name="tradeId" type="TradeId"></xsd:element>
            </xsd:sequence>

            <xsd:sequence>
                <xsd:group ref="PartyAndAccountReferences.model">
                </xsd:group>
                <xsd:element name="reportingRole" type="ReportingRole" minOccurs="0"></xsd:element>
                <xsd:choice maxOccurs="unbounded">
                    <xsd:element name="tradeId" type="TradeId"></xsd:element>
                    <xsd:element name="versionedTradeId" type="VersionedTradeId"></xsd:element>
                </xsd:choice>
            </xsd:sequence>

        </xsd:choice>
    </xsd:sequence>
</xsd:complexType> 
```

这是propOrder：

```
@XmlType(name = "TradeIdentifier", propOrder = {
    "issuer",
    "tradeId",
    "partyReference",
    "accountReference",
    "reportingRole",
    "tradeIdOrVersionedTradeId"
}) 
```

当我在对象partyReference 和tradeId 中设置时，生成的xml 是：

```
<partyTradeIdentifier>
    <tradeId>NONREF</tradeId>
    <partyReference href="Party2"/>
</partyTradeIdentifier> 
```

XSD 验证失败并出现错误：

```
[org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'tradeId'. One of '{"http://www.nsd.ru/repository/fpml-5.4":issuer, "http://www.nsd.ru/repository/fpml-5.4":partyReference}' is expected.] 
```

解决方案是将partyReference 元素放在tradeId 之前。当我手动执行时，一切正常。但我不想手动更改生成的类，因为在模式更改的情况下我将不得不重复这样的操作。这是一条通往地狱的路。

我试图重命名一个tradeId，所以会有两个字段。但是，只有一个 tradeId 字段被重命名，问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:18:05.867

**绑定.xml**

尝试使用以下绑定文件从您的 XML 模式生成类：

```
<?xml version="1.0" encoding="UTF-8"?>
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance"
    xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
    xsi:schemaLocation="
http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd"
    version="2.1">
    <globalBindings>
        <xjc:simple />
    </globalBindings>
</bindings> 
```

**XJC 呼叫**

```
xjc -extension -b binding.xml schema.xsd 
```

# android - android中不同链接的音频流需要不同的时间吗？

> ID：16189532
> 
> 赞同：0
> 
> 时间：2013-04-24T10:23:23.160
> 
> 标签：android, android-mediaplayer, audio-streaming, shoutcast

嗨，我制作了一个包含四个广播电台流列表的应用程序。我正在使用`mediaPlayer`在服务中初始化的简单。我使用的代码如下：

```
try {
    MediaPlayer media = new MediaPlayer();
    media.setAudioStreamType(AudioManager.USE_DEFAULT_STREAM_TYPE);
    media.setDataSource(URL);
    media.prepareAsync();
    media.start();
} catch(Exception e) {
  //Getting Exception
} 
```

四个广播链接是：[http](http://s2.voscast.com:7016/) ://s2.voscast.com:7016/ 、[http](http://s8.voscast.com:7024/) ://s8.voscast.com:7024/ 、 [http](http://s8.voscast.com:7020/) ://s8.voscast.com:7020/ 、[http://s5 .voscast.com:8216/](http://s5.voscast.com:8216/)。

现在的问题是，在第一个链接中开始播放广播需要 30-45 秒，而在所有其他链接中，它需要不到 10 秒或大约 10 秒。可能的问题是与代码相关的东西还是来自 URL 本身的东西？这可能是什么解决方案？请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:51:53.940

这与 URL 有关，可能是广播服务器已关闭并且您的响应较晚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T15:06:52.267

你的代码很好。您的主机可能有问题，或者服务器在互联网上离您很远。（这对于通过 HTTP 进行流式传输是有问题的，因为在某些距离连接上丢包率可能非常高，这会降低您的吞吐率。）

# java - 第三方库在 java 中生成的警告消息

> ID：16189533
> 
> 赞同：0
> 
> 时间：2013-04-24T10:23:24.867
> 
> 标签：java, libraries, messages

我想删除和/或注意第三方库在 java system.out 中产生的警告消息。例如，意识到这些在第三方库线程中产生的警告，我想退出并重新启动应用程序。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:34:15.080

您可能希望重定向`System.out`到另一个打印流

```
System.setOut(myPrintStream); 
```

并实现一个观察者，检测该流上的变化，解析内容并触发动作。

# javascript - 当父母被选中时，我正在尝试检查所有子复选框。但这只能工作一次！下次我试的时候，孩子没有被检查？

> ID：16189534
> 
> 赞同：0
> 
> 时间：2013-04-24T10:23:30.867
> 
> 标签：javascript, jquery, html

```
$(document).ready(function (e) {
    $('.links > input').change(function () {
        if ($(this).is(':checked')) {
            $(this).parent().children('.subLinks').children('.subLinkCheck').children().attr('checked', true);
        } else 
          $(this).parent().children('.subLinks').children('.subLinkCheck').children().attr('checked', false);;
    });
}); 
```

它第一次工作正常。当我取消选中子复选框然后单击父复选框时，它会失败，

这是 HTML 内容

```
<ul id="mainLink">
    <li class="links">
        <input type="checkbox" />Interactive Community
        <ul class="subLinks">
            <li class="subLinkCheck">
                <input class="1" type="checkbox" />Usability Testing</li>
            <li class="subLinkCheck">
                <input type="checkbox" />HFI Certification</li>
        </ul>
    </li>
    <li class="links">
        <input type="checkbox" />Heuristic Evaluations
        <ul class="subLinks">
            <li class="subLinkCheck">
                <input type="checkbox" />Usability Testing</li>
            <li class="subLinkCheck">
                <input type="checkbox" />HFI Certification</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:26:27.647

使用[`.prop()`](http://api.jquery.com/prop/)而不是`.attr()`.

演示：http: [//jsfiddle.net/Jrrnj/](http://jsfiddle.net/Jrrnj/)

# c# - 如何知道在C#winforms中点击了alt + ctrl + del组合

> ID：16189535
> 
> 赞同：0
> 
> 时间：2013-04-24T10:23:32.283
> 
> 标签：c#, winforms, keypress

我有一个`C# winform .Net 4.0 application`在`Windows 7`. 应用程序托管`COM control`. 当用户在应用程序打开的`COM control`情况下解锁机器时，不会刷新并且该部分表单显示为黑色。为了解决这个问题，我处理了系统解锁事件并进行了显式刷新，问题得到解决。如果用户`presses alt + ctrl + del combination`然后按`esc key`，则不会触发系统解锁事件。所以问题发生在这种情况下。我可以`esc key`在应用程序中处理。但是如何查出是否`alt + ctrl + del combination`被按过`esc key`呢？

# sql - SQL 数据库验证字符串

> ID：16189543
> 
> 赞同：0
> 
> 时间：2013-04-24T10:24:15.190
> 
> 标签：sql, asp.net, database, vb.net

我正在为一个在线表单开发一个项目，我似乎无法找到如何从 SQL 数据库中获取值并根据字符串验证它，例如 Database = A 和 TextBox.text = A 中的 Q1

下面是我到目前为止的代码，但似乎无法工作，其中的一些变量是全局的，

```
 Dim Question As String = "Q" & count
 Dim textVal As String = TextBox.Text
 Dim conn As SqlClient.SqlConnection = New SqlClient.SqlConnection
 Dim dbSource As String = "Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\ben.miles\documents\visual studio 2012\Projects\WebTraningQuestions\WebTraningQuestions\App_Data\Usertest.mdf"
 Dim ds As New DataSet
 Dim sql As String = "SELECT FROM SAP"
 Dim da As SqlClient.SqlDataAdapter = New SqlClient.SqlDataAdapter(sql, conn)
 conn.ConnectionString = dbSource
 Dim SqSearch As String = "%" & textVal & "%"
 Dim sqlQ1 As String = sql & " WHERE Questions LIKE SqSearch"
 Dim cmd1 As New SqlCommand(sqlQ1, conn)
 conn.Open()

'This is where I cant get my code right but if you see below. I would like it something like this.

 If TextBox.Text = (database) Then
    Label.Text = "Correct"
    Label.ForeColor = Drawing.Color.Green
 Else 
    Label.Text = "Wrong"
    Label.ForeColor = Drawing.Color.Red
 End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:36:17.007

您可以使用 DataReader 来检索值，例如（空气代码，自从我做任何 VB 以来已经有一段时间了）：

```
Dim Question As String = "Q" & count
Dim textVal As String = TextBox.Text
Dim conn As SqlClient.SqlConnection = New SqlClient.SqlConnection
Dim dbSource As String = "Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\ben.miles\documents\visual studio 2012\Projects\WebTraningQuestions\WebTraningQuestions\App_Data\Usertest.mdf"
Dim ds As New DataSet
Dim sql As String = "SELECT [fields..] FROM SAP"
Dim da As SqlClient.SqlDataAdapter = New SqlClient.SqlDataAdapter(sql, conn)
conn.ConnectionString = dbSource
Dim SqSearch As String = "%" & textVal & "%"
Dim sqlQ1 As String = sql & " WHERE Questions LIKE SqSearch"
Dim cmd1 As New SqlCommand(sqlQ1, conn)
conn.Open()

Dim myReader AS SqlDataReader = cmd1.ExecuteReader()

If myReader.HasRows Then
   myReader.Read()
   If TextBox.Text = (myReader.GetString(col_of_field)) Then
      Label.Text = "Correct"
      Label.ForeColor = Drawing.Color.Green
   Else 
      Label.Text = "Wrong"
      Label.ForeColor = Drawing.Color.Red
   End If
 End If

 myReader.Close() 
```

我会删除 LIKE，而是根据您要查找的问题的特定 ID 进行查询。这意味着可能将问题 ID 存储在表单上的某个地方。我还将参数化查询而不是将其构建为字符串；否则，您将面临潜在的 SQL 注入攻击。

# string - 从路径中选择用户名并使用 Powershell 附加到文件名

> ID：16189544
> 
> 赞同：0
> 
> 时间：2013-04-24T10:24:18.650
> 
> 标签：string, powershell

我正在尝试从我们系统上的每个用户帐户中获取特定的日志文件。该文件位于每个人的相同路径中并且具有相同的名称。当前脚本只是在文件末尾添加了一个数字，但有人告诉我，知道每个文件属于谁将有助于下一阶段的故障排除。这是我开始挣扎的地方。

我尝试使用首字母`Get-Childitem`返回目录（在本例中为 UNC），然后通过管道将其输出到字符串`Out-String`。然后我希望使用替换来修剪用户名两侧的文本位并将其附加到文件名中。不过，这似乎根本不起作用。

所有目录都具有相同的路径：

```
\\files\users\[USERNAME]\TEMP\generic.log 
```

我想知道我是否像往常一样使这里的步骤过于复杂？本质上，我需要从目录路径中进行修剪`\\files\user\`，`\temp\`只留下用户名作为变量，以便我可以添加到复制命令中。我的使用尝试`-replace`告诉我我正在使用无效的正则表达式。

到目前为止的代码：

```
$file = Get-ChildItem -Path \\files\users\talexander\TEMP\ -Recurse -Force -Include generic.log | Select-Object Directory | Out-String  
$file -replace "\\xfiles\users\", "" 
```

这是尝试使替换工作的第一步，但是，可惜，它失败了。感谢任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:46:11.883

在这种情况下，有一些简单的方法可以做到这一点。

如果您的路径为

```
\\files\users\[USERNAME]\TEMP\generic.log 
```

那么它应该很容易使用替换：

```
$path.Replace("[USERNAME]","UserName") 
```

由于路径是预先知道的，因此您也可以轻松地执行以下操作：

```
$rootPath = \\files\users\
$UserSubPath = "$UserName\TEMP\generic.log"

Copy-Item "$rootPath$UserSubPath", "C:\MyRepository\" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:41:21.523

这个正则表达式可以帮助：

```
"\\files\users\talexander\TEMP\" -replace '(?:\\\\files\\users\\)(.*)(?:\\TEMP\\)', '$1' 
```

亚历山大

或使用拆分：

```
("\\files\users\talexander\TEMP\" -split '\\')[4] 
```

# python - 以表格格式打印字典？

> ID：16189546
> 
> 赞同：1
> 
> 时间：2013-04-24T10:24:22.830
> 
> 标签：python

我有一本看起来像这样的字典：

```
band2 = {'channel11': [10812, 2162, 1972, 0], 'channel10': [10787, 2157, 1967, 0], 'channel3': [10612, 2122, 1932, 0], 'channel2': [10589, 2117, 1927, 0], 'channel1': [10564, 2112, 1922, 20], 'channel7': [10712, 2142, 1952, 26], 'channel6': [10687, 2137, 1947, 0], 'channel5': [10662, 2132, 1942, 32], 'channel4': [10637, 2127, 1937, 26], 'channel9': [10762, 2152, 1962, 0], 'channel8': [10737, 2147, 1957, 0], 'channel12': [10837, 2167, 1977, 15]} 
```

然后我像这样对它进行排序：

```
zipped = zip(*((key, value) for key, value in sorted(band2.items(), 
                                             key= lambda x: int(x[0][7:])))) 
```

这给出了这个结果：

```
[('channel1', 'channel2', 'channel3', 'channel4', 'channel5', 'channel6', 'channel7', 'channel8', 'channel9', 'channel10', 'channel11', 'channel12'), ([10564, 2112, 1922, 20], [10589, 2117, 1927, 0], [10612, 2122, 1932, 0], [10637, 2127, 1937, 26], [10662, 2132, 1942, 32], [10687, 2137, 1947, 0], [10712, 2142, 1952, 26], [10737, 2147, 1957, 0], [10762, 2152, 1962, 0], [10787, 2157, 1967, 0], [10812, 2162, 1972, 0], [10837, 2167, 1977, 15])] 
```

我想知道如何以某种格式打印出来：

```
Channel 1 Channel 2 ...... Channel 12
value[0] value[0] ........value[0]
value[1]/value[2] value[1]/value[2].....value[1]/value[2]
value[3] value[3]...........value[3] 
```

所以一个示例输出将是：

```
Channel 1 Channel 2  <other values> Channel 12
10564     10589      <other values>    10837
2112/1922 2117/1927  <other values>    2167/1977
20        0          <other values>    15 
```

我不确定如何在整洁的桌子上打印这个，我会使用格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:52:30.077

你可以试试[pandas](http://pandas.pydata.org/)，它提供了一个很好的结构来处理表：

Pandas 的 DataFrame 可以从以下项目构建：

```
In [69]: import pandas as pd
In [70]: df = pd.DataFrame.from_items(sorted(band2.items(), key=lambda x: int(x[0][7:])))
In [71]: df = df.astype('string') 
```

连接第 1 行和第 2 行

```
In [72]: df.ix[1] = df.ix[1] + '/' + df.ix[2]
In [73]: df = df.ix[[0, 1, 3]] 
```

不带索引打印

```
In [74]: print df.to_string(index=None)

  channel1   channel2   channel3   channel4   channel5   channel6   channel7   channel8   channel9  channel10  channel11  channel12
     10564      10589      10612      10637      10662      10687      10712      10737      10762      10787      10812      10837
 2112/1922  2117/1927  2122/1932  2127/1937  2132/1942  2137/1947  2142/1952  2147/1957  2152/1962  2157/1967  2162/1972  2167/1977
        20          0          0         26         32          0         26          0          0          0          0         15 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:46:21.623

我最终没有使用`zipped`.

```
table = [[], [], [], []]
# We can't just sort the channel names because 'channel11' < 'channel2'
channel_numbers = []
for channel_name in band2.keys():
    if channel_name.startswith('channel'):
        channel_number = int(channel_name[7:])
        channel_numbers.append(channel_number)
    else:
        raise ValueError("channel name doesn't follow pattern")
channel_numbers.sort()

for channel_number in channel_numbers:
    channel_data = band2['channel%d' % channel_number]
    table[0].append('Channel %d' % channel_number)
    table[1].append(str(channel_data[0]))
    table[2].append('%s/%s' % (channel_data[1], channel_data[2]))
    table[3].append(str(channel_data[3]))

for line in table:
    print('\t'.join(line)) 
```

如果选项卡不能正常工作，请确定每列的宽度并用空格填充：

```
for channel_number in channel_numbers:
    channel_data = band2['channel%d' % channel_number]
    column = [
        'Channel %d' % channel_number,
        str(channel_data[0]),
        '%s/%s' % (channel_data[1], channel_data[2]),
        str(channel_data[3])
    ]
    cell_widths = map(len, column)
    column_width = max(cell_widths)
    for i in range(len(column)):
        cell = column[i]
        padded_cell = cell + ' '*(column_width-len(cell))
        table[i].append(padded_cell)

for line in table:
    # If tabs don't make the columns align properly, try iterating through
    # column in line, and padding it with the appropriate number of spaces.
    print(' '.join(line)) 
```

# java - Java Selenium Htmlunit 驱动程序 Javascript 错误

> ID：16189547
> 
> 赞同：-2
> 
> 时间：2013-04-24T10:24:29.237
> 
> 标签：java, selenium, htmlunit

是否有任何其他选项可以在 HtmlUnit 中禁用 javascript。在导航 HtmlUnit 时，它不会在无限循环中进一步处理它，所以我试图使用以下代码禁用 javascript

webClient.setJavaScriptEnabled(false)

但它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:55:59.427

根据[htmlunit.sourceforge.net/apidocs](http://htmlunit.sourceforge.net/apidocs/)上的文档，正确的形式应该是：

```
webClient.getOptions().setJavaScriptEnabled(false) 
```

# javascript - 获取具有相同类的当前跨度元素

> ID：16189561
> 
> 赞同：0
> 
> 时间：2013-04-24T10:25:06.240
> 
> 标签：javascript, jquery

我有多个动态创建的具有相同类名的跨度元素。

```
<span class="btn catgry" style="margin:10px" onclick="catg()">'+result[i]+'</span>' 
```

如何获取被点击的当前跨度元素文本。我试过这个

```
function catg()
{
--
var s = $(".catgry",this) .text();
--
} 
```

但它不工作..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:26:53.160

一种选择是使用关键字*传递*当前元素：`this`

```
... onclick="catg(this);" ... 
```

并在 JavaScript 中捕获它：

```
function catg(span) {
    ...
    var s = $(span).text();
    ...
} 
```

另一种选择是绑定点击事件省略`onclick`属性：

```
$(document).on("click", ".btn.catgry", function() {
    ...
    var s = $(this).text();
    ...
}); 
```

在这里，*您*可以`document`使用.*`.btn.catgry`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:32:01.950

```
function clicked(evt) { 
    alert(evt.target.textContent);
}

for (var i = 0; i < 10; i += 1) {
    var span = document.createElement("span");

    span.className = "btn catgry";
    span.textContent = "Result" + i;
    span.addEventListener("click", clicked, false);
    document.body.appendChild(span);
} 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/DXAeC/)

使用内联 javascript 被认为是不好的做法。

IE`onclick="catg()"`

如果您打算在动态添加跨度后使用 jquery 添加事件。然后考虑使用[委托事件](http://api.jquery.com/on/)

> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最里面到最外面的元素），并为沿着该路径匹配选择器的任何元素运行处理程序。

```
function clicked(evt) { 
    alert(evt.target.textContent);
}

$(document).on("click", ".btn", clicked);

for (var i = 0; i < 10; i += 1) {
    var span = $("<span>").attr({
        "class":  "btn catgry"
    }).text("Result" + i);

    $(document.body).append(span);
} 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/jagnP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:27:23.647

你也可以试试

```
var spanText = $(this).text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:27:27.757

你不要这样用

```
$('span.catgry').click(function(){
   //your logic
   var text = $(this).text();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T10:33:57.020

如果它们是动态创建的，我建议您将跨度包装在一个包装器中，让 jquery 在 dom 准备好之后创建跨度

```
$('#wrapper').on('click', '.catgry', function(){
var s = $(this).text();
}) 
```*

# proxy - Spotify 应用程序 (HTML5) 背后的代理错误：无法加载资源

> ID：16189565
> 
> 赞同：0
> 
> 时间：2013-04-24T10:25:14.983
> 
> 标签：proxy, spotify

另一天，Spotify 似乎又出现了另一个问题！

这一次，我试图在 Spotify 中运行一个简单的基于 AJAX 的应用程序。一个简单的 Hello World 类型的应用程序就可以了，我看到了文本等。但是，我正在尝试使用 AJAX GET 请求访问我的 WebServer 上的 PHP 脚本，当拉起检查器时，我收到一个错误：

```
Failed to load resource <http>://mydomain.com/myscript.php 
```

（尖括号实际上在那里，只是用来说服所以它不是一个链接！）

在浏览器中测试脚本没有问题，但在 Spotify 中没有。

对我来说这一切看起来都不错，但之前已经错了很多次！不过，我听说有一个[**`issue`**](http://community.spotify.com/t5/Help-Desktop-Linux-Mac-and/Can-t-load-any-Spotify-app-behind-a-proxy/td-p/1989)带有 spotify 应用程序和代理的。

就我而言，我可以确认 Spotify 本身可以通过代理和音乐播放正常工作。但是，其他应用程序（例如 Soundrop）无法连接。

将代码移动到具有 3G 连接且没有代理的笔记本电脑上，该应用程序运行良好，因此代码和大多数似乎都可以。这证实了 Spotify 应用程序不能很好地与代理一起使用。

我已经尝试了他链接中的解决方法，但无济于事 - 所以：

1）有人知道这个问题的解决方案吗？2）这是一个已知的错误，将来会修复吗？

# java - 反射 - 如何为使用反射创建实例的 POJO 类设置值

> ID：16189566
> 
> 赞同：0
> 
> 时间：2013-04-24T10:25:16.920
> 
> 标签：java, reflection, instances

我使用反射为我的 pojo 类创建了一个实例，如下所示：

```
package com.hexgen.tools;

public class Foo {

    public static void main(String[] args) {
        Class c = null;
        try {
            c = Class.forName("com.hexgen.ro.request.CreateRequisitionRO");
            Object o = c.newInstance();
            System.out.println(o.toString());
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }   catch (IllegalAccessException iae) {
            iae.printStackTrace();
        } catch (InstantiationException ie) {
            ie.printStackTrace();
        }  
    }
} 
```

当我打印时，我得到以下字符串：

`com.hexgen.ro.request.CreateRequisitionRO@95c7850[transSrlNo=<null>,transCode=<null>,inflowOutflow=<null>,transDate=<null>,tradeDate=<null>,tradeDateUpto=<null>,tradeTime=<null>,investCategory=<null>,custodian=<null>,holdType=<null>,securityType=<null>,security=<null>,assetClass=<null>,issuer=<null>,fundManager=<null>,marketType=<null>,tradePriceType=<null>,requisitionType=<null>,priceFrom=<null>,priceTo=<null>,marketPrice=<null>,averagePrice=<null>,quantity=<null>,price=<null>,grossAmtTcy=<null>,exchRate=<null>,grossAmtPcy=<null>,grossIntTcy=<null>,grossIntPcy=<null>,netAmountTcy=<null>,netAmountPcy=<null>,acquCostTcy=<null>,acquCostPcy=<null>,yieldType=<null>,purchaseYield=<null>,marketYield=<null>,ytm=<null>,mduration=<null>,currPerNav=<null>,desiredPerNav=<null>,currHolding=<null>,noofDays=<null>,realGlPcy=<null>,realGlTcy=<null>,nowLater=<null>,isAllocable=false,acquCostReval=<null>,acquCostHisTcy=<null>,acquCostHisPcy=<null>,exIntTcy=<null>,exIntPcy=<null>,accrIntReval=<null>,accrIntTcy=<null>,accrIntPcy=<null>,grossAodTcy=<null>,grossAodPcy=<null>,grossAodReval=<null>,bankAccAmtAcy=<null>,bankAccAmtPcy=<null>,taxAmountTcy=<null>,unrelAmortTcy=<null>,unrelAmortPcy=<null>,unrelGlTcy=<null>,unrelGlPcy=<null>,realGlHisTcy=<null>,realGlHisPcy=<null>,tradeFeesTcy=<null>,tradeFeesPcy=<null>,investReason=<null>,settleDate=<null>,stkSettleDate=<null>,custodianN=<null>,portfolio=<null>,userId=<null>]`

从字面上看，所有值都设置为空，我想为类中可用的设置器设置值。因为可以随时更改设置器名称，所以我计划动态设置值，这样就不会发生静态值设置。

是否可以为新创建的实例动态设置值？就像创建一些枚举并在枚举中有一些默认值一样，如果它是字符串，则设置一些默认值，如果 int 设置一些默认值，就像这样。

```
how to do this also i created a object which is not a array if i want to create array of objects using reflection how to go about it? 
```

请帮我弄清楚并解决这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:50:30.807

根据定义，POJO 没有标准制定者。我怀疑你的意思是JavaBean。

要使用 JavaBean 的 setter，最简单的方法是使用[Introspector](http://docs.oracle.com/javase/7/docs/api/java/beans/Introspector.html)

```
public class Main {
    public static void main(String... ignored) throws Exception {
        SimpleBean sb = new SimpleBean();

        BeanInfo info = Introspector.getBeanInfo(SimpleBean.class);
        System.out.println("Calling setters");
        for (PropertyDescriptor pd : info.getPropertyDescriptors()) {
            if (pd.getWriteMethod() == null) continue;
            System.out.println("\tSetting " + pd.getName());
            pd.getWriteMethod().invoke(sb, "Set now");
        }
        System.out.println("Reading the getters");
        for (PropertyDescriptor pd : info.getPropertyDescriptors()) {
            System.out.println("\t" + pd.getName() + " = " + pd.getReadMethod().invoke(sb));
        }
    }

    public static class SimpleBean {
        String text;
        String words;

        public String getText() {
            return text;
        }

        public void setText(String text) {
            this.text = text;
        }

        public String getWords() {
            return words;
        }

        public void setWords(String words) {
            this.words = words;
        }
    }
} 
```

印刷

```
Calling setters
    Setting text
    Setting words
Reading the getters
    class = class Main$SimpleBean
    text = Set now
    words = Set now 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:28:59.173

您可以使用类对象定义的字段：

```
Field f  = c.getFields()[0]; //or getField("...")
f.set(o, "new value"); 
```

编辑：如果你只想使用设置器：

```
for(Method m : c.getMethods())
  if (m.getName().startsWith("set") && m.getParameterTypes().length == 1)
     m.invoke(o, "myValue"); 
```

# spring - 休眠 - 一对多

> ID：16189569
> 
> 赞同：0
> 
> 时间：2013-04-24T10:25:32.487
> 
> 标签：spring, hibernate, session, collections, one-to-many

欢迎，

我正在使用 property-ref 将此外键与我班级的其他一些列而不是主键相关联。主键以外的列不是唯一的。现在，当我尝试获取此集合时，我遇到了异常：

```
org.hibernate.HibernateException: collection is not associated with any session 
```

数据库：

```
T_GI_ALARM
-ALARM_ID (PK)
-METHOD_PARAM_NR (FK)

T_QC_METHOD_IN
-METHOD_IN_ID (PK)
-METHOD_PARAM_NR 
```

结构 ：

```
public class Alarm implements Serializable {
        private static final long serialVersionUID = 1L;

        private Integer id; 
        private Set <QCMethodIN> methodINList = new HashSet <QCMethodIN>(0);
}

public class QCMethodIN implements Serializable {
    private static final long serialVersionUID = 1L;

    private Integer id;
    private Integer methodNr; 
```

}

映射：

```
<hibernate-mapping>
    <class name="gestint.data.model.Alarm" 
        table="DWH1.T_GI_ALARM">
        <id name="id" type="java.lang.Integer">
            <column name="ALARM_ID" />            
            <generator class="assigned" />            
        </id>

        <property name="qcMethode" type="java.lang.Integer">
            <column name="METHOD_PARAM_NR" not-null="true" />
        </property>   
        <set name="methodINList" table="DWH1.T_QC_METHOD_IN" inverse="true" lazy="false" fetch="select">
            <key property-ref="qcMethode">
                <column name="METHOD_PARAM_NR" not-null="false" />
            </key>
            <one-to-many class="gestint.data.model.QCMethodIN" />        
        </set>

</hibernate-mapping>

<hibernate-mapping>
    <class name="gestint.data.model.QCMethodIN" 
        table="DWH1.T_QC_METHOD_IN">
        <id name="id" type="java.lang.Integer">
            <column name="METHOD_IN_ID" />            
            <generator class="assigned" />            
        </id>    
        <property name="methodNr" type="java.lang.Integer">
            <column name="METHOD_PARAM_NR" not-null="true" />
        </property>          

    </class>
</hibernate-mapping> 
```

我从休眠状态加载数据（会话由弹簧设置），如下所示：

```
public List<Alarm> listAll() {      
    return this.sessionFactory.getCurrentSession().createQuery("from Alarm").list();
} 
```

当我对外国人键有不同的价值时，一切都会起作用，例如：

```
T_GI_ALARM
ID  METHOD_PARAM_NR
10021   79
10022   80
10020   91

T_QC_METHOD_IN
METHOD_IN_ID    METHOD_PARAM_NR
1   79
2   80
3   91 
```

但是当我对外国人键具有相同的值时（例如 T_GI_ALARM 上的值 79）：

```
T_GI_ALARM
ID  METHOD_PARAM_NR
10021   79 <--!!
10022   80
10020   79 <--!!

T_QC_METHOD_IN
METHOD_IN_ID    METHOD_PARAM_NR
1   79 <--is call 2 times
2   80
3   91 
```

我收到此错误：

```
org.hibernate.HibernateException: collection is not associated with any session 
```

我真的不明白发生了什么，我认为是因为我们没有具有唯一 ID 的对象。？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:58:18.280

您应该在 QCMethodIN 类中设置**methodINList**，因为您的 Alarm 类将与 QCMethodIN 有关系，因此 QCMethodIN 和 Alarm 之间是一对多的关系。

# mysql - MySQL 如果存在，则返回字段的“id”，否则插入新行并返回最后插入的 id？

> ID：16189574
> 
> 赞同：0
> 
> 时间：2013-04-24T10:25:49.937
> 
> 标签：mysql

这个说法有什么问题？

```
IF EXISTS (
SELECT * 
FROM `apples` 
WHERE `apples`.`color` = ? 
AND `apples`.`size` = ?) 
SELECT `apples`.`applesID` 
ELSE 
INSERT INTO `apples` (`color`, `size`) 
VALUES(?,?); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:50:39.087

您没有为[IF](http://dev.mysql.com/doc/refman/5.5/en/if.html)使用正确的语法：

```
IF EXISTS (
    SELECT * 
    FROM `apples` 
    WHERE `apples`.`color` = ? 
    AND `apples`.`size` = ?) THEN
    SELECT `apples`.`applesID`;
ELSE 
    INSERT INTO `apples` (`color`, `size`) VALUES(?,?);
END IF; 
```

# c - 使用指针传递结构时未声明的标识符

> ID：16189584
> 
> 赞同：1
> 
> 时间：2013-04-24T10:26:23.563
> 
> 标签：c, pointers, struct, readline, stringtokenizer

`curr`我有以下方法可以将文件读入结构，但是，由于变量为空，程序在到达写入文件方法时正在轰炸。

当变量被标记时，我添加了一个空检查，但此时它没有引发错误。我猜这与我将数据复制到的方式有关，`newContact`但我看不出我在哪里搞砸了。

这是提到的方法，在文件中读取标记变量并添加`newContact`：

```
struct contact *readFile(char * FName,struct contact** ptrList)
{    
    struct contact *head, *newContact;
    FILE *fptr;
    char oneLine[60];
    char *sname, *fname, *phone,*company, *email;

    head = *ptrList;

    fptr = fopen(FName,"r");

    if(fptr == NULL)
    {
        printf("\nCant open file!");
        return(ptrList);    
    }
    fgets(oneLine, 55, fptr);
    while(!feof(fptr))
    {
        fgets(oneLine, 55, fptr);
        if(oneLine[strlen(oneLine)-1] == '\n')
        {
            oneLine[strlen(oneLine)-1] = '\0';    
        }

        // open file and other stuff
        if(!ptrList) return; // invalid pointer
        for(head=*ptrList;head&&head->next;head=head->next);
        while( ReadLine(fptr,oneLine) )
        {
            //check that variables aren't empty here:
            if(sname == NULL || fname == NULL)
            {
                printf("\nvariable empty!");
                //return(ptrList);
            }
            sname = strtok(oneLine,",");
            fname = strtok(NULL,",");
            phone = strtok(NULL,",");
            company = strtok(NULL,",");
            email = strtok(NULL,",");

            newContact = (struct contact *)malloc(sizeof(struct contact));
            if(!newContact) break; // out of memory
            newContact->prev = head;
            newContact->next = 0;

            //copy the data to the new one
            strcpy(newContact->sname,sname);
            strcpy(newContact->fname,fname);
            strcpy(newContact->phone,phone);
            strcpy(newContact->company,company);
            strcpy(newContact->email,email);

            head = newContact;
            if(!*ptrList) *ptrList = head; // see: point 2
        }
    } 
```

这是`struct`声明：

```
struct contact {
    char sname[15];
    char fname[15];
    char phone[15];
    char company[15];
    char email[15];
    struct contact *prev;
    struct contact *next;
}; 
```

我在这里也收到了一个未定义的错误`ReadLine`。是否有我应该为此功能导入的库（因为我在搜索中看不到任何提及）？

```
while( ReadLine(fptr,oneLine) ) 
```

新的错误发生在这里：

```
head = *ptrList; 
```

关于为什么要轰炸的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T18:54:42.300

```
head = newContact;
if(!*ptrList) *ptrList = head; // see: point 2 
```

我相信，你已经在名单的最后了。我认为不需要这个“if”语句。我们永远不会改变列表的实际“头”，这就是“ptrList”所指向的地方。

另外，您不希望下面的“for”循环在第一个 while 循环之外吗？该代码正在尝试从文件中读取并添加到列表的末尾。我认为不需要遍历文件的每一行的循环。

```
 for(head=*ptrList;head&&head->next;head=head->next); 
```

# jquery - 获取 iframe 的文档对象？

> ID：16189585
> 
> 赞同：0
> 
> 时间：2013-04-24T10:26:25.953
> 
> 标签：jquery

如何获取 Ifarme 的文档对象？

我试过这个：

`$(document,"#IFRM_Quest")[0] //[object Document]`

它有效。

但我也试过：

`$("#IFRM_Quest").contents()[0]`这也产生文件。`//[object Document]`

那为什么

`$("#IFRM_Quest").contents()[0]===$(document,"#IFRM_Quest")[0]`

返回假？

这应该是同一个对象...

[http://i.stack.imgur.com/NHmlL.png](https://i.stack.imgur.com/NHmlL.png) ![在此处输入图像描述](https://i.stack.imgur.com/NHmlL.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:30:06.283

`$(document,"#IFRM_Quest")[0]`不选择 iframe 的文档对象，它只是选择当前，嗯，文档的文档对象。

`document`是直接引用文档对象的变量，而不是选择器。您的函数调用相当于：

```
$(document)[0] 
```

因为每当您将 DOM 元素传递给 jQuery 时，[上下文都会被忽略](https://github.com/jquery/jquery/blob/1.9.1/src/core.js#L184)：

```
// HANDLE: $(DOMElement)
} else if ( selector.nodeType ) {
    this.context = this[0] = selector;
    this.length = 1;
    return this;
} 
```

这实际上也显示在函数签名的文档中：

> `jQuery( selector [, context ] )` `<-`可选上下文
> `jQuery( element )` `<-`无上下文

# c# - Office 2007 [及更高版本] 互操作：检索 RGB 颜色

> ID：16189590
> 
> 赞同：1
> 
> 时间：2013-04-24T10:26:32.527
> 
> 标签：c#, office-interop, rgb, word-2010

**更新：**如果您需要在 office 文档（格式 2007）中确定 rgb-color，请查看下面的答案。

**有：**

*   来自 VS2010 PIA 的 Interop.Word.dll ver.14，
*   VS2010快捷版
*   微软 Word 2010 (ver.14)
*   .docx 文件在提到的 Word 中手动制作，无需互操作。文件包含几个带有彩色角单元格的表格。

**目的：** 使用 Interop 构建另一个 .docx 文件，其中包含根据角落颜色填充渐变颜色的表格。
**出现问题的地方：**我需要将表格角落的颜色从`WdColor`to`System.Drawing.Color`转换为计算渐变。所以我使用细胞的`Shading.BackgroundPatternColor`属性。而且我发现有时它包含正确的 BGR 24 位值，有时它不包含。
仅当单元格具有主题调色板颜色之一时才会出现第二种情况（标准和 rgb 调色板颜色效果很好，但主题调色板颜色会导致问题）。例如，当我设置`0x00F2F2F2`（最浅的灰色）颜色时，它会`document.xml`正确存储在 .docx 文件存档中，但`Shading.BackgroundPatternColor`属性设置为`0xDC00F2FF`. 所以`ColorTranslator.FromOle`返回不同的颜色。
顺便说一句，枚举中这个灰色没有 WdColor 。`wdColorGray05 = 0xF3F3F3`.Net Reflector带来的最浅灰色。这意味着并非所有调色板默认颜色都对应于枚举颜色。
此外，如果我在 Word 的 RGB 调色板中手动设置相同的颜色（即 242、242、242），保存文件并通过 Interop 再次打开 - 颜色将正确设置为`0x00F2F2F2`！
**问题：**有人遇到过这个问题吗？如何从`Shading.BackgroundPatternColor`属性中正确检索 RGB 颜色？为什么此属性与存储在中的值不对应`document.xml`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T15:27:58.093

这是我第二次在从办公文档中检索 RGB 颜色时遇到问题。第一次是 Excel 2007 .xlsx 文件格式，现在是 Word 2010 .docx（尽管仍然是 2007 格式）。因此，经过一番搜索，我决定为所有遇到同样麻烦的人回答我自己的问题。

如需更深入的解释和示例，我会将您发送到对[我有很大帮助的文章](http://www.wordarticles.com/Articles/Colours/2007.php#UIConsiderations)。由于本文中使用的示例可能对 C# 开发人员来说更难阅读，因为它们是在 VBA 上编写的，因此我附上了我的[rgb color retriever](http://pastebin.com/96L6aCEH)实现的链接。

所以。如果您打开其中一个 Office 程序（尤其是 Excel 或 Word），您可以设置大多数对象、文本、背景等的颜色。并且会显示一个对话框来选择它。在 Office 2007 或更高版本中，您将看到一组 10`standard`种颜色和一组 60 种颜色`based on theme`。如果单击“更多颜色..”，您将能够从预定颜色集或 RGB 调色板中选择颜色。

您从该对话框中选择颜色的方式决定了存储颜色的格式。存储颜色值的属性是一个 32 位整数，其中第一个最高有效字节（我们称之为`FormatByte`）用于格式规范，另一个 24 位用于颜色值或其他任何内容（我们称之为 24 位`ColorValue`）。以下是可能的格式规范：

*   `FormatByte == 0x00`
    `ColorValue`是常见的 BGR 值。在 C# 中，您可以通过`ColorTranslator.FromOle(ColorValue);`. 当您选择标准颜色或从“更多颜色..”对话框（预定或调色板）中选择一种颜色时，使用此格式。

*   `FormatByte == 0xFF`
    `ColorValue`将是 0x000000。这是`wdColorAutomatic`价值。这是一种对比色，这就是我所知道的一切（在我的情况下，它始终是白色的背景和黑色的字体）。没有更多地研究它。

*   `FormatByte == 0x80`
    `ColorValue`将在 [0x000000, 0x000018] 范围内。这些颜色可以在文档中的 ActiveX 控件中遇到。这是一个系统`KnownColors`（有 ac# 超集 -`System.Drawing.KnownColor`包含该值）。如果我理解正确，您也可以通过 检索 RGB `ColorTranslator.FromOle(_color);`，`_color`所有 32 位属性值在哪里，因为由于 ColorTranslator.FromOle() 的反射实现，它会检查颜色是否来自 KnownColor 枚举。但是在解析 Office 文件以进行审批时，我从未遇到过这些值。

*   `FormatByte in range [0xD4, 0xDF]`
    在这种情况下，您处理 color `based on theme`。它表示为基色和色调或阴影偏移的指数。

让我们更深入地看一下最后一个案例，因为有更多的困难。
如您所见，前半部分`FormatByte`始终是`0xD`，而另一半则从`0x4`到`0xF`。后半部分是 10 种基色之一的索引。

Word 中有一个用于该索引的 wdThemeColorIndex 枚举，它可以转换为更基本的 Office msoThemeColorSchemeIndex 枚举（它放置在`Microsoft.Office.Core.dll`其中可以从 tabPage 链接到`.COM`XX.0 `Microsoft Office XX.0 Object Library`- Office 版本）。您可以查看上面链接的文章以获取翻译表或 VBA 函数或我对 C# 方法的实现。从这个 msoThemeColorSchemeIndex 我们可以得到 RGB 属性`ActiveDocument.DocumentTheme`。
然后我们从 中检索色调或阴影`ColorValue`，将基色转换为 HSL（色调、饱和度、亮度），对其应用色调或阴影并将结果转换回 RGB。

# .htaccess - 在 htaccess 中添加行时遇到问题

> ID：16189597
> 
> 赞同：0
> 
> 时间：2013-04-24T10:27:02.790
> 
> 标签：.htaccess

我正在使用当前具有重写条件的现有 htaccess 文件，但我正在尝试添加其他条件（在遵循教程时），但我收到 500 内部服务器错误。

如果有人能告诉我我需要做什么来纠正这个问题，我将不胜感激，我再次感谢大家。

这是我的 htaccess 的样子；

```
#RewriteOptions inherit
RewriteEngine on

RewriteCond %{HTTP_HOST} ^DomainNameObscuredForSecurity$ [OR]
RewriteCond %{HTTP_HOST} ^DomainNameObscuredForSecurity$
RewriteRule ^/?$ "http\:\/\/DomainNameObscuredForSecurity" [R=301,L]

<THIS LINE IS NOT IN HTACCESS, IT'S JUST TO ILLUSTRATE THAT THE CODE BELOW IS WHAT I ADDED>

RewriteCond %(REQUEST_FILENAME) !=f
RewriteCond %(REQUEST_FILENAME) !=d
RewriteRule ^(.*)$ /somepage.xxx?=$xxx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:34:50.273

这 2 行有错误的语法：

```
RewriteCond %(REQUEST_FILENAME) !=f
RewriteCond %(REQUEST_FILENAME) !=d 
```

固定代码：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /somepage.xxx?q=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:36:37.923

您的条件在语法上不正确。您需要在变量周围使用花括号，`{}`而不是 f 和 d 检查的等号：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

# facebook - Android Phonegap - 实现一个like按钮

> ID：16189599
> 
> 赞同：4
> 
> 时间：2013-04-24T10:27:13.290
> 
> 标签：facebook, cordova, button, facebook-like

任何人都知道在使用phonegap 2.2构建的应用程序上实现facebook之类的按钮的方法？HTML5 的这段代码不起作用：

```
<div id="fb-root"></div> 
<script>(function(d, s, id) {   
  var js, fjs = d.getElementsByTagName(s)[0];   
  if (d.getElementById(id)) return;   
  js = d.createElement(s); js.id = id;   
  js.src = "//connect.facebook.net/es_ES/all.js#xfbml=1&appId=443968115691947";   
  fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like" data-href="http://www.facebook.com/QueBajeDios" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div> 
```

这是由like button - 开发者网页生成的。

IFRAME 的另一个也不起作用：

```
<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2FQueBajeDios&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=443968115691947" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:21px;" allowTransparency="true"></iframe> 
```

我需要有关此工具的已知方法的任何参考...但我在 Google 上没有找到任何东西...

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T20:26:14.043

您需要使用为 Phonegap 和 Facebook 制作的插件。[https://github.com/phonegap/phonegap-facebook-plugin](https://github.com/phonegap/phonegap-facebook-plugin)

# javascript - 如何访问从ajax中的视图传递的数据

> ID：16189600
> 
> 赞同：0
> 
> 时间：2013-04-24T10:27:18.430
> 
> 标签：javascript, ajax, django, json

模板.html

```
success: function (result, data) {
  alert(result["val"]);
  check = result[0]
  alert(check);
  var chart = new Highcharts.Chart({
    chart: {
      renderTo: 'container',
      type: 'line',
      marginRight: 200,
      marginBottom: 75,
      marginLeft: 70,
      marginTop: 80,
      width: 900
    },
    title: {
      marginTop: 100,
      text: result[4]
    },
    xAxis: {
      categories: result[1]
    },
  {%if result.0 == "power" %}
    yAxis: {
      min: 0,
      max: 30
    },
  } 
  {%else %}
    yAxis: {
      min: 0.85,
      max: 1
    }, 
  {% endif %} 
```

视图.py

```
 list_values.append("power")
     list_values.append(m)
     list_values.append(p)
     list_values.append(q)
     list_values.append(msg)

     print list_values
     response.content = json.dumps(list_values, cls=DjangoJSONEncoder)
     return response 
```

我正在尝试根据我从视图发送的值绘制 y 轴。但它总是转到其他部分。我正在提出一个ajax请求。如何访问我从使用 ajax 的模板中的视图传递的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:37:37.907

看来您正在混合使用 Javascript、Django 视图和 Django 模板。

在 javascript 成功回调中，您只能使用 json 响应中的对象。（我简化）

```
success : function(result, data) {
    // Dump objects
    console.log(result);
    console.log(data);
} 
```

当您的 JSON 响应正确时，javascript 处理部分与 Django 无关。

# ruby - 更有效地比较两个数组中的值模式

> ID：16189601
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:27:19.960
> 
> 标签：ruby, arrays, performance

我需要测试两个数组是否相等，每个数组包含 8 个整数项`1..7`。问题是我关心的不是价值观本身，而是价值观的模式。例如：

```
eq? [ 1,2,3,4, 5,6,7,1 ], [ 1,2,3,4, 7,6,5,1 ] # => true
eq? [ 1,1,2,2, 3,3,4,4 ], [ 3,3,2,2, 1,1,4,4 ] # => true
eq? [ 1,1,1,1, 2,2,2,2 ], [ 1,1,1,2, 1,2,2,2 ] # => false
eq? [ 1,2,1,3, 4,4,5,6 ], [ 7,5,7,6, 2,2,3,4 ] # => true 
```

！编辑示例，因此第一个参数已经标准化

注意：数组中间的空格只是为了便于阅读。

我需要这样做数百万次。所以我想出了以下方法。

```
# this method "standardizes" permutation 2 before comparing to permutation1 which is assumed to already be standardized
def eq? permutation1, permutation2
  next_val = 0
  key = Hash.new { |h,k| h[k] = next_val+=1 }
  permutation1 == permutation2.map { |i| key[i] }
end 
```

permutation1 将是少数几个值之一，因此可以在测试之前标准化一次，而每个 permutation2 都是唯一的。

但这太慢了！有没有更好的方法来解决这个问题，也许使用相同的方法但避免使用散列作为键？还是完全不同的方法？

编辑：为了澄清一点，如果您可以替换 ONE 数组中的每个数字或数字的子集，则应将两个数组视为相等，以便每个原始数字映射到一个唯一的新数字（即 1 => 3、3 => 4, 4 => 2, 2 => 1 等），然后这两个数组实际上是相同的。因此，重要的不是值（它们可以是七种不同的颜色或单词，就像数字一样容易），而是值的模式。

EDIT2：应用于 3 位数组的原理意味着：

[1,1,1] 匹配所有项目都相同的任何数组，

[1,2,3] 匹配所有项目不同的任何数组，

[1,1,2] 匹配任何前两项相同而第三项不同的数组，

[1,2,1] 匹配第一个相同且第三个但不是第二个的任何数组，

[1,2,2] 匹配第二个和第三个相同但第一个不同的任何数组，

任何三项数组都将匹配这 5 项中的一项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:44:49.073

```
def eq? a, b
  (0...a.length).group_by{|i| a[i]}.values ==
  (0...b.length).group_by{|i| b[i]}.values
end

eq?([1,2,3,4,5,6,7,1], [1,2,3,4,7,6,5,1]) # => true
eq?([1,1,2,2,3,3,4,4], [3,3,2,2,1,1,4,4]) # => true
eq?([1,1,1,1,2,2,2,2], [1,1,1,2,1,2,2,2]) # => false
eq?([1,2,1,3,4,4,5,6], [7,5,7,6,2,2,3,4]) # => true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:04:06.257

您可以通过这种方式重新制定匹配算法：

如果两个排列具有相同数量的元素并且它们每个元素的表示对象相等，则认为它们相等。表示的对象（或值）是一组唯一对象中的一个，这些对象按其出现的顺序分配给原始排列元素。对于两种排列，唯一对象的集合是相同的。

示例：您从 2 组 8 个整数 (1..8) 开始并比较 8 种颜色的两个排列。

```
for each color in both permuations
  find the color in their associated set, use the index in the set as representation
  if not found insert in the next free place and use this place's index as representation
  if representation1 != representation2 return false
continue with next element
return true 
```

主要问题是插入一个排列元素，然后很快找到它。这就是您必须创建哈希映射的原因。如果您有固定（和少量）数量的元素，则一种可能的优化是使用两个固定长度的排列数组，它们可以在每个条目中保存一个排列元素。使用这些数组中的索引作为表示的对象。您需要线性搜索来查找数组中的排列，但是只有一小部分（如提到的 8 个）这就像在循环中比较 8 个指针/整数，这应该非常快，当然不会慢于哈希图查找。但是您保存了中间对象的创建。

但是，我自己并没有对此进行任何验证。

# c# - Ternary Best Practice

> ID：16189602
> 
> 赞同：1
> 
> 时间：2013-04-24T10:27:23.477
> 
> 标签：c#, asp.net, .net

I have a bit of code, that while simple perhaps isn't immediately obvious as to what it does.

```
I found @(Model.Count() == 0 ? "no" : Model.Count().ToString()) @(Model.Count() == 1 ? "person" : "people")
@foreach (var item in Model) {
   <div>@item.Name at @item.Email</div>
} 
```

And before I write lots of code like this, I wanted to know if this is a good way of doing this.

Thus the question is, in .NET is there a better framework way of doing this, or is the Ternary method fine

The premise is obviously

*   0 records = I found no people
*   1 record = I found 1 person
*   2+ records = I found 2 people

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:56:37.080

如果您在几个地方这样做，扩展方法将解决您的两个问题（可读性和简化代码）

```
public static string PersonCountString(this IEnumerable<Person> personList)
{
    var count = personList.Count();
    return String.Format("{0} {1}", count > 0 ? count : "no",
                                    count == 1 ? "person" : "people");
}
...
I found (@Model.PersonCountString()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T10:44:20.113

在我看来，在`Ternary`这种情况下使用条件运算符绝对没问题。

有经验的开发者不假思索地理解它，但如果你想让它易于初学者阅读，你也可以使用`if`and`else`构造。

但我会使用`Any()`评论中提到的@I4V。

```
I found @(Model.Any() ? Model.Count().ToString() : "no") @(Model.Count() == 1 ? "person" : "people")

@foreach (var item in Model) {
   <div>@item.Name at @item.Email</div>
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:56:20.253

回答你的问题：不，我发现 oneliner 不可读，它读起来像`@(() 0 ? "" : .().()) @(.() == 1 ? "" : "")`我，更不用说多次调用`.Count()`.

您可以像这样创建一个（共享的）辅助方法：

```
string GetCountWithDescription(int count, 
                               string singleItemDescription, 
                               string multipleItemsDescription)
{
    switch (count)
    {
        case 0:
            return "no " + multipleItemsDescription;
        case 1:
            return "1 " + singleItemDescription;
        default:            
            return count + " " + multipleItemsDescription;
    }
} 
```

也可以重用，所以你可以把它放在一个单独的文件中，这样它就不会弄乱你的代码，你可以简单地从每个视图中调用它，如下所示：

```
@GetCountWithDescription(Model.Count(), "person", "people") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:52:34.937

你想达到什么目标？更好的可读性或更快的代码（开发）？如果目的是提高可读性，那么我建议将三元运算保留在字符串中，例如：

`string modelCountStr = Model.Count() == 0 ? "no" : Model.Count().ToString(); string modelPluralStr = Model.Count() == 1 ? "person" : "people";`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T10:53:34.920

`Count()`考虑到如果有任何用户存在，您将不得不使用：

```
@{ 
    var count = Model.Count();
}

I found @(count == 0 ? "no" : count) @(count == 1 ? " person" : " people") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T11:54:52.000

使其更具可读性的另一种方法是选择一个解决方案，如果可能的话，涉及的条件尽可能少或理想情况为零。

这是我的看法：

```
@{ 
    var count = Model.Count(); 
}
I found @string.Format(new[] { "no people", "{0} person", "{0} people"} [Math.Min(count, 2)], count) 
```

可以说 Math.Min 负责某种分支，但我认为这更容易理解。

# android - 当用户想在系统浏览器中打开 Facebook 时尝试获取另一个网站

> ID：16189603
> 
> 赞同：0
> 
> 时间：2013-04-24T10:27:23.387
> 
> 标签：android, android-webview

为此，我正在使用此代码，

```
try {

                                        Process process = Runtime.getRuntime().exec("logcat -d");
                                        BufferedReader bufferedReader = new BufferedReader(
                                        new InputStreamReader(process.getInputStream()));

                                StringBuilder log = new StringBuilder();
                                String line = "";
                                while ((line = bufferedReader.readLine()) != null) 
                                {

                                    if(line.contains("facebook.com"))
                                    {
                                        //Browser.addSearchUrl(getContentResolver(), "google");
                                        Log.i(Tag1,"ww"+ line);

                                        /*Intent startMain = new Intent(Intent.ACTION_MAIN);
                                        startMain.addCategory(Intent.CATEGORY_HOME);
                                        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                                        startActivity(startMain);*/
                                        android.os.Process.killProcess(pid);

                                    }
                                  //log.;
                                }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
```

当用户尝试在系统浏览器中打开 Facebook 时，我想打开 Google。为此，我正在阅读 Logcat 并获取 www.facebook.com。

# java - 绕点旋转变成螺旋

> ID：16189606
> 
> 赞同：0
> 
> 时间：2013-04-24T10:27:26.820
> 
> 标签：java, rotation, spiral

我正在为我的学士论文设计一些模拟钢丝绳的程序。但是，当试图使一个点（绞线的中心（midden）围绕电缆的中心（middencable）旋转时，该点并没有旋转，而是呈螺旋形：转换为电缆的中心。

我的代码是这样的：

```
z =  Math.toRadians( z);
        double xpoint = super.midden.getX(); //original point
        double ypoint = super.midden.getY(); //original point
        double cCableX = super.middenCable.getX();
        double cCableY = super.middenCable.getY(); 
        double dx = xpoint - cCableX;
        double dy = ypoint - cCableY;
        double cosangle = Math.cos(z);
        double sinangle = Math.sin(z);

        double x1 = cCableX + cosangle * dx - sinangle * dy;
        double y1 = cCableY + sinangle * dx - cosangle * dy;

        super.midden.setX(x1);
        super.midden.setY(y1); 
```

任何人都知道它如何制作一个圆圈，而不是转换到我试图旋转的中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:07:00.807

您对中点的重新计算似乎有缺陷；假设`z`是三角角：

```
double curangle = Math.atan2(dx, dy);
double dist     = Math.sqrt(dx*dx + dy*dy);
double x1 = cCableX + dist * Math.cos(curangle+z);
double y1 = cCableY + dist * Math.sin(curangle+z); 
```

这段代码是 poc。它很可能性能很差，并且没有检查数值稳定性。

# iphone - ejabberd 和推送通知

> ID：16189612
> 
> 赞同：16
> 
> 时间：2013-04-24T10:27:38.343
> 
> 标签：iphone, xmpp, apple-push-notifications, ejabberd, google-cloud-messaging

我已经使用 XMPP 在我的 iOS 和 Android 应用程序中集成了聊天系统。我在服务器端使用了 ejabberd 2。聊天系统工作正常。我想使用 APNS 和 GCM 在我的聊天中集成推送通知。如何在每条聊天消息中发送推送通知？ejabberd 2 有任何 API 或扩展可用于实现此功能吗？

帮助是非常可观的，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-22T08:38:59.433

请使用下面的博客，它非常简单实用，对我来说很好用。

[http://symmetricinfinity.com/2013/01/23/ios-push-notifications-from-ejabberd.html](http://symmetricinfinity.com/2013/01/23/ios-push-notifications-from-ejabberd.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-01T08:40:56.730

apns 或 gcm 没有 ejabberd 插件。我认为您在这里有两个主要选择：

1.  使用将在给定 url 上`mod_offline_post`发送请求的模块。`POST`然后，您可以使用任何现有的后端语言来处理 apns 和 gcm（无论如何我都使用 rails 作为后端，所以这只是处理它的一个点）。

2.  基于`mod_offline_post`，创建您自己的模块，它将发送推送通知而不是`POST`请求。很少有实现 apns 和 gcm 的示例和库。即[apns4erl](https://github.com/inaka/apns4erl)用于 apns，[此代码](http://tiliman.wordpress.com/2013/01/02/google-cloud-messaging-with-erlang/)用于 gcm。但是，当然，了解一些 erlang 会很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-01T16:46:04.250

AFAIK 没有提供 GCM 或 APN 接口的公共 ejabberd 模块。

[我建议您使用ejabberd_hook](http://www.ejabberd.im/Events%20and%20hooks)实现自定义模块。[您可以在此处](http://metajack.im/2008/08/28/writing-ejabberd-modules-presence-storms/)查看 ejabberd 内部模块和存在挂钩的示例。

如果您想将消息转发给离线用户，我建议`offline_message_hook`同时对消息进行通用过滤，`filter_packet({From, To, Packet})`并检查数据包类型（请参阅[此](https://stackoverflow.com/questions/1939879/how-to-filter-messages-in-ejabberd)stackoverflow 问题）。

了解收件人后，您可以从数据库中检索设备令牌/注册 ID 并使用一些 erlang 代码转发消息。

对于 APN，请查看一些解释其工作原理的[简单代码或此 erlang](http://bravenewmethod.wordpress.com/2011/02/16/apple-push-notifications-with-erlang/) [ex_apns](https://github.com/extend/ex_apns)。如果你想了解更多关于 APN 的信息，或者你想要一个 APN 的模拟服务器，你可以阅读这篇博[文](http://pdincau.wordpress.com/2013/04/01/a-mock-apn-server-in-erlang/)。

对于 GCM 的示例，您可以使用 @Lucas 提供的示例链接。

# android - 如何使用cordova2.6的config.xml设置android启动画面

> ID：16189621
> 
> 赞同：3
> 
> 时间：2013-04-24T10:28:09.047
> 
> 标签：android, cordova, splash-screen, dynamic-splash-screen

我正在为我的应用程序使用cordova2.6。我可以使用 Cordova 附带的 SplashScreen api 设置启动画面。这也很好，但是当我尝试使用时

```
<gap:splash src="splash/android/ldpi.png" gap:platform="android" gap:density="ldpi" /> 
```

在 config.xml 中，它说“gap”是一个未定义的前缀并引发错误。有人可以解释我在这里做错了什么。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:30:03.733

在您的 Android App 文件夹中，转到该`res`文件夹​​并将启动画面放在 `drawable drawable-hdpi drawable-mdpi ...` 大小合适的文件夹中：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T22:25:15.520

您可能在标签定义中遇到问题。你有这个属性吗： xmlns:gap = " [http://phonegap.com/ns/1.0](http://phonegap.com/ns/1.0) "

# php - 在使用目标提交表单之前更改值

> ID：16189623
> 
> 赞同：0
> 
> 时间：2013-04-24T10:28:13.877
> 
> 标签：php, html, forms

我的表格如下所示：

```
<form target="xy.php">
<select name="aaa">
<option><?=$dabavalue[dabav];?></option>
<option>öäü</option>
<option>asd</option>
<option>asaaa</option>
</select>
</form> 
```

我正在尝试将我的“öäü”更改为“oeaeue”，之前可以在表单（用户数据）中选择并保存。该值应发送到另一个生成 PDF 文档的表单。我有这个要检查pdf中的复选框：

```
<?if($aaa == "oeaeue"){$y="x"}?> 
```

因为我不能在这里和äöü一起工作......

--> 如何在提交表单之前更改 äöü 或更改

```
<option><?=$dabavalue[dabav];?></option> 
```

这没有用....

$dabavalue[dabav]; == ü

```
<?
                        if($aaa[y] == "&uuml;"){
                            $newStatus = "ue";
                        }
                        ?>

                        <td colspan="3" style="">
                            <select name="aaa">
                                <option value="<?=$newStatus;?>"><?=$dabavalue[dabav];?></option> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:32:55.070

```
var form = document.getElementsByTagName('form')[0];
form.addEventListener('submit', function(){
    var select = document.getElementsByName('aaa')[0];
    for(var i = 0; i < select.options.length; i++){
        var option = select.options[i];
        if(option.innerHTML === '<?=$dabavalue[dabav];?>') // or content of option you want to change
            option.innerHTML = 'newValue';
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:33:12.230

您只是在问如何更改 SELECT 中的选定值吗？如果是这样，您可能想看看这个：[如何设置 HTML <select> 元素的默认值？](https://stackoverflow.com/questions/3518002/how-to-set-default-value-for-html-select-element)

高温高压

# c# - C# 缺少程序集故障转移

> ID：16189632
> 
> 赞同：0
> 
> 时间：2013-04-24T10:28:38.020
> 
> 标签：c#, .net-assembly, failover

所以我有一个 Windows 窗体应用程序，它具有一些依赖于第三方商业库的高级功能。基本上我想实现这个库的折扣版本，然后在大型商业库不可用时将其用作故障转移，以便基本应用程序中的所有功能都可用，（如果你有它看起来更好/性能更好商业图书馆）。

在 Python 中，您可以执行以下操作：

```
try:
    import <dependency name>
except ImportError:
#   The dependency is unavailable. 
```

C#中是否有类似的功能？我尝试过类似的方法（在 try/catch 块中包装 using 语句），但这根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:34:28.450

这取决于您所说的功能，如果是 GUI 组件等，则更加棘手。

如果它只是非可视代码和类，那么您通常可以使用接口之类的东西将功能抽象到更高级别，然后根据需要加载相关实现。

我以前用 IoC 做过这种事情，它对我们来说效果很好。

# eclipse - 如何解决 Eclipse 中的错误“没有为方案定义文件系统：源控制”

> ID：16189634
> 
> 赞同：2
> 
> 时间：2013-04-24T10:28:41.413
> 
> 标签：eclipse, version-control, rational-team-concert

我最近更新了 Eclipse，我在 RTC（Rational Team Concert）中有一个项目。

当我打开我的工作区时，它说我的所有文件都丢失了。

当我双击一个项目时，我得到：没有为方案定义文件系统：源控制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T06:14:57.393

这种错误消息是在 Eclipse 发行版上安装/更新 RTC 错误的典型：

```
Could not create the view: com.ibm.team.process.rcp.ui.teamArtifactsNavigator 
```

[该线程](https://jazz.net/forum/questions/30407/rtc-2002-clinet-installation-problem-on-rsa-755)仅提供一种解决方案：

> 我终于通过全新安装 RSA 7.5.4 并在其上安装 RTC 2.0.0.2 客户端来修复它。

在您的情况下，一种方法是重新安装 Eclipse Distribution，并尝试在其上安装 RTC，以查看问题是否仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T12:20:37.230

添加另一个插件后，我遇到了同样的问题（RSA 8.5.5.1，RTC 插件 4.0.6）。我通过 IBM Installation Manager 卸载了 RTC 插件并重新安装了它。在此之后，我不得不使用该`-clean`选项重新启动 RSA 一次。无需重新安装 RSA。

# magento - 如何在magento中将页面标题名称更改为产品名称？

> ID：16189635
> 
> 赞同：1
> 
> 时间：2013-04-24T10:28:43.573
> 
> 标签：magento

在我的magento商店有一个小问题。我创建了一个名为黄金的页面标题。在此页面中包含**n 个产品**。如果客户单击产品，则将**页面标题名称更改为产品名称**。

有没有可能改变它。我在 php.ini 中解决了这个问题。但是在magento中没有运气。

这是php代码。

```
<?php
ob_start (); // Buffer output
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<title>Test</title>
</head>

<body>
<?php
$pageTitle = 'New Test'; // Call this in your pages' files to define the page title
?>
</body>
</html>
<?php
$pageContents = ob_get_contents (); // Get all the page's HTML into a string
ob_end_clean (); // Wipe the buffer

// Replace <!--TITLE--> with $pageTitle variable contents, and print the HTML
echo str_replace ('Test', $pageTitle, $pageContents);
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:53:02.440

在 Magento 中，您可以像这样更改页面标题：

```
$headBlock = $this->getLayout()->getBlock('head');
$headBlock->setTitle($newtitle); //set title
$headBlock->setKeywords($keywords); //set keywords
$headBlock->setDescription($description); //set description 
```

# sql - 甲骨文 SQL 代码

> ID：16189637
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:28:46.203
> 
> 标签：sql, oracle, plsql

但是，尝试使用此处提供的此代码时，它会在尝试运行时返回以下错误：

```
    PLS-00103：在预期以下情况之一时遇到符号“IS”：

    常量异常表 long double ref char 时间时间戳间隔
    日期二进制国家字符 nchar

    1\. 声明
    2.emp员工%ROWTYPE;
    3\. tbl_emp 是 emp 表；
    4\. v_user_type 员工.user_type%TYPE;
    5\. 开始

```

代码是：

```
DECLARE
  emp employee%ROWTYPE; 
  tbl_emp IS TABLE OF emp;
  v_user_type employee.user_type%TYPE;
BEGIN
  SELECT user_type
  INTO v_user_type
  FROM Employee 
  WHERE upper(username) = v('APP_USER');
  IF v_user_type = 1 
  THEN
    SELECT * BULK COLLECT INTO tbl_emp
    FROM employee;
  ELSE
    SELECT * BULK COLLECT INTO tbl_emp
    FROM employee;
    WHERE upper(username) = v('APP_USER');
  END IF;
END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:36:47.577

您需要先声明类型，然后声明该类型的变量。

例如

```
declare 
  type tbl_emp_type IS TABLE OF employee%ROWTYPE; 
  tbl_emp tbl_emp_type; 
begin

  select * 
  bulk collect into tbl_emp
  from employee;

end; 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/79edd/6)

# c++ - 罗技 quickcam pro 9000 使用 openCV 捕获拜耳

> ID：16189645
> 
> 赞同：2
> 
> 时间：2013-04-24T10:29:02.293
> 
> 标签：c++, opencv, video-capture, video-processing, logitech

我正在尝试捕获罗技 pro 9000 的原始数据（例如所谓的拜耳模式）。这可以通过使用所谓的拜耳应用程序来实现，该应用程序可以在互联网上找到。它应该返回一个 8 位的拜耳模式，但结果显然不是这样的模式。

然而; 正在流式传输的图像似乎很不正常。如下图所示，我在 3 通道图像中获得了 2 幅场景图像（意味着总共 6 个通道）。每张图像是总捕获区域的 1/4，因此似乎有某种 YUV 数据正在流式传输。

我无法使用 openCV 提供的转换将这些数据转换为任何有意义的数据。任何想法正在发送什么样的数据以及（更重要的是）如何将其转换为 RGB？

![截取图像的裁剪示例](https://i.stack.imgur.com/nEJTs.jpg)

**按要求编辑** ；用于生成图像的代码片段。

```
system("Bayer.exe 1 8"); //Sets the camera to raw mode
// set up camera
VideoCapture capture(0);
if(!capture.isOpened()){
  waitKey();
  exit(0);
}
Mat capturedFrame;
while(true){
  capture>>capturedFrame;
  imshow("Raw",capturedFrame);
  waitKey(25);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T05:59:08.810

如果相机的输出数据格式（宽度、高度、位深度、通道数...）与您的程序期望的数据格式不同，则最有可能发生这种情况。

但是我可以捕获 logitec pro cam，只需使用

```
Mat img;
VideoCapture cap(0);
cap >> img; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T18:54:09.280

你是如何使用 openCV 从流中获取帧的？你能分享一些代码片段吗？openCV 中的视频格式太多，无法获得正确的颜色通道和压缩数据。

我认为您应该能够获得此处提到的正确图像帧：

[http://forum.openrobotino.org/archive/index.php/t-295.html?s=c33acb1fb91f5916080f8dfd687598ec](http://forum.openrobotino.org/archive/index.php/t-295.html?s=c33acb1fb91f5916080f8dfd687598ec)

# ios - NSDate 转换 NSDateComponents 问题

> ID：16189646
> 
> 赞同：0
> 
> 时间：2013-04-24T10:29:02.530
> 
> 标签：ios, objective-c, nsdatecomponents

destinationDate 和组件的结果不同。我该如何解决这个问题？

```
NSTimeZone* sourceTimeZone      = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

NSDate* sourceDate              = [NSDate date];
NSInteger sourceGMTOffset       = [sourceTimeZone secondsFromGMTForDate:sourceDate];
NSInteger destinationGMTOffset  = [destinationTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval interval         = destinationGMTOffset - sourceGMTOffset;

NSDate* destinationDate         = [[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate];

NSCalendar *calendar            = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components    = [calendar components:(NSYearCalendarUnit  |
                                                        NSMonthCalendarUnit |
                                                        NSDayCalendarUnit   |
                                                        NSHourCalendarUnit  |
                                                        NSMinuteCalendarUnit|
                                                        NSSecondCalendarUnit) fromDate:destinationDate];

NSLog(@"%@", destinationDate); 
NSLog(@"%@", components); 
```

2013-04-24 19:27:09 +0000

历年：2013 月：4 闰月：无 日：25 时：4 分：27 秒：9

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:03:13.560

日期 ( `destinationDate`) 以 GMT 打印。但是，日期组件不是因为日历是使用本地时区创建的。

如果你尝试它，`calendar.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0]`你会从两者中得到相同的结果。否则，您将获得两次添加的差异（第一次由您的代码，第二次由日历）

实际上，您的代码没有多大意义。`NSDate`永远不应该被时区修改，因为它不包含任何时区信息。A`NSDate`总是代表一个特定的时刻，独立于时区。仅当您要将日期转换为字符串时才转换日期 - 当您这样做时，请使用`NSCalendar`或`NSDateFormatter`设置正确的时区。

以下代码足以打印出系统（默认）时区的日期，

```
NSDate* sourceDate              = [NSDate date];
NSCalendar *calendar            = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components = [calendar components:(NSYearCalendarUnit  |
                                                     NSMonthCalendarUnit |
                                                     NSDayCalendarUnit   |
                                                     NSHourCalendarUnit  |
                                                     NSMinuteCalendarUnit|
                                                     NSSecondCalendarUnit) fromDate:destinationDate];

NSLog(@"%@", sourceDate); 
NSLog(@"%@", components); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:36:51.780

`NSDateComponents`总是以格林威治标准时间的形式给出日期，所以只需像下面这样简单地放置你就会得到当前日期。

```
NSDateComponents *components    = [calendar components:(NSYearCalendarUnit  |
                                                            NSMonthCalendarUnit |
                                                            NSDayCalendarUnit   |
                                                            NSHourCalendarUnit  |
                                                            NSMinuteCalendarUnit|
                                                            NSSecondCalendarUnit) fromDate:[NSDate date]]; 
```

替换`destinationDate`为`[NSDate date]`.

输出：

```
 2013-04-24 16:05:08 +0000

<NSDateComponents: 0x7e3e5b0>
    Calendar Year: 2013
    Month: 4
    Day: 24
    Hour: 16
    Minute: 5
    Second: 8 
```

# wordpress - 无法显示分配给私人帖子的 Wordpress 类别

> ID：16189650
> 
> 赞同：0
> 
> 时间：2013-04-24T10:29:06.820
> 
> 标签：wordpress

我有一个私人帖子。我已为其分配了一个类别，但现在我无法使用该`get_categories()`功能显示类别。wp-admin 上的类别页面显示没有帖子分配给该类别。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:44:35.640

[我在WordPress 论坛](http://wordpress.org/support/topic/how-to-get-the-lists-of-categories-used-in-custom-post-type)上发现这个代码非常相似。

我根据您的需要对其进行了修改：

```
 global $wpdb;
  $post_type_ids = $wpdb->get_col("SELECT ID FROM $wpdb->posts WHERE post_status = 'private'");

  if($post_type_ids){
    $post_type_cats = wp_get_object_terms( $post_type_ids, 'category',array('fields' => 'ids') );
    if($post_type_cats){
      $post_type_cats = array_unique($post_type_cats);
      $post_type_cats = implode(',',$post_type_cats);
      $cats=get_categories('include='.$post_type_cats);
    }
  } 
```

# java - Android ListView 所选项目保持突出显示

> ID：16189651
> 
> 赞同：77
> 
> 时间：2013-04-24T10:29:08.310
> 
> 标签：java, android, android-listview

我有`XML`两个`ListView`，一个是由选择查询 () 填充的客户列表，`lv_cli`另一个是所选客户的详细信息 ( `lv_cli_det`)。我想在显示详细信息的`lv_cli`同时保持客户被选中。`lv_cli_det`

XML:

```
<ListView
    android:id="@+id/cli_lista"
    android:layout_width="512dp"
    android:layout_height="wrap_content"
    android:fadeScrollbars="false"
    >
</ListView>

<ListView
    android:id="@+id/cli_lista_det"
    android:layout_width="512dp"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/cli_lista"
    android:fadeScrollbars="false" >
</ListView> 
```

爪哇：

```
Cursor cursor = db.rawQuery("Select NrCl||';'||Nome From Clientes", null);
final ListView t = (ListView)findViewById(R.id.cli_lista);
ArrayAdapter<String> myarrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, listItems);
t.setAdapter(myarrayAdapter);

final ListView td = (ListView)findViewById(R.id.cli_lista_detalhe);
final ArrayAdapter<String> myarrayAdapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, listItems2);

t.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        String item = ((TextView)view).getText().toString();
        String[] strArray = item.split("\\;");

        cli.load(strArray[0].toString());
        td.setAdapter(myarrayAdapter2);
        listItems2.clear();
        listItems2.add("Nome: " + cli.getNome());
        listItems2.add("Morada: " + cli.getMorada());
        listItems2.add("Localidade: " + cli.getLoca());
        listItems2.add("Código Postal: " + cli.getCp());
        listItems2.add("Pais: " + cli.getPais());
        listItems2.add("Nif: " + cli.getNif());
        listItems2.add("Tel: " + cli.getTel());
        listItems2.add("Tlm: " + cli.getTlm());
        listItems2.add("Tipo Preço: " + cli.getTipoPvn());
        listItems2.add("Cond. Pagamento: " + cli.getCpg());
        listItems2.add("Obs: " + cli.getObs());
        td.setAdapter(myarrayAdapter2);
        myarrayAdapter2.notifyDataSetChanged(); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2014-08-05T04:17:33.153

我找到了正确的方法。这很简单。在资源中描述如下：

```
android:choiceMode="singleChoice"
android:listSelector="#666666" 
```

（或者您可以指定资源链接而不是颜色值）

程序化：

```
listView.setSelector(Drawable selector);
listView.setSelector(int resourceId);
listView.setChoiceMode(int mode); 
```

模式可以是以下之一：AbsListView.CHOICE_MODE_SINGLE、AbsListView.CHOICE_MODE_MULTIPLE、AbsListView.CHOICE_MODE_NONE（默认）

（AbsListView 是 ListView 类的抽象祖先）

使用 onItemClick 和更改视图背景的 PS 操作是破产的，因为视图本身是一个临时对象。因此，您不得跟踪视图。

如果我们的列表足够长，与滚动出的项目相关的视图将从层次结构中删除，并在这些项目再次显示时重新创建（使用缓存的显示选项，例如背景）。因此，我们跟踪的视图现在不是项目的实际视图，并且更改其背景对实际的项目视图没有任何作用。结果，我们选择了多个项目。

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2013-04-24T10:59:33.893

要在按下时保持列表视图项的颜色，请在列表视图项布局中包含以下行：

```
android:background="@drawable/bg_key" 
```

然后像这样`bg_key.xml`在`drawable`文件夹中定义：

```
<?xml version="1.0" encoding="utf-8" ?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item 
        android:state_selected="true"
        android:drawable="@color/pressed_color"/>
    <item
        android:drawable="@color/default_color" />
</selector> 
```

最后，将其包含在您的`ListView` `onClickListener`:

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,long arg3) {
        view.setSelected(true);
        ... // Anything
    }
}); 
```

这样，任何时候都只会选择一个项目的颜色。您可以使用以下内容定义颜色值`res/values/colors.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="pressed_color">#4d90fe</color>
    <color name="default_color">#ffffff</color>
</resources> 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-11-26T10:23:22.610

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {

            for (int j = 0; j < adapterView.getChildCount(); j++)
                adapterView.getChildAt(j).setBackgroundColor(Color.TRANSPARENT);

            // change the background color of the selected element
            view.setBackgroundColor(Color.LTGRAY);
}); 
```

也许您可能希望使用索引 i 将当前选定元素保存在全局变量中。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-10-23T10:21:24.123

简单的方法是，如果您在 xml 中使用 listview，请在您的 listview 上使用此属性，

```
android:choiceMode="singleChoice"
android:listSelector="#your color code" 
```

如果不使用 xml，则以编程方式

```
listview.setChoiceMode(AbsListView.CHOICE_MODE_SINGLE);
listview.setSelector(android.R.color.holo_blue_light); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-18T10:20:35.057

你需要这样的选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<!-- State when a row is being pressed, but hasn't yet been activated (finger down) -->
<item android:drawable="@color/app_primary_color_light" android:state_pressed="true" />

<!-- Used when the view is "activated". -->
<item android:drawable="@color/app_primary_color" android:state_activated="true" />

<!-- Default, "just hangin' out" state. -->
<item android:drawable="@android:color/transparent" /></selector> 
```

然后设置`android:choiceMode="singleChoice"`为您的 ListView。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-28T10:06:32.697

来自 Avinash Kumar Pankaj 的例子

```
View v; 
```

然后在 oncreate 方法

```
v = new View(getActivity()); 
```

然后我写的 onlistitemclick 方法

```
public void onListItemClick(ListView listView, View view, int position,
       long id) {
   v.setBackgroundResource(0);
   view.setBackgroundResource(R.color.green);
   v = view;
} 
```

它对我有用。谢谢你。

我换了

```
v = new View(getActivity()); 
```

到

```
v = new View(this); 
```

并且代码运行良好。

前面示例中的 xml 文件 'colors' 和 'bg_key' 也是必需的，以及 ListView 属性 android:background="@drawable/bg_key"

毛罗

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-24T07:17:45.290

*请确保列表视图容器的根布局中没有波纹

将此行添加到您的列表视图

```
android:listSelector="@drawable/background_listview" 
```

这是“background_listview.xml”文件

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@color/white_background" android:state_pressed="true" />
<item android:drawable="@color/primary_color" android:state_focused="false" /></selector> 
```

background_listview.xml 文件中使用的颜色：

```
<color name="primary_color">#cc7e00</color>
<color name="white_background">#ffffffff</color> 
```

在这些之后

> （单击的项目包含橙色，直到您单击另一个项目）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-24T11:02:26.073

您可以这样做的一种方法是跟踪活动中当前选定的位置：

```
@Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
            long arg3) {
        currentPosition = position
        lv_cli.notifyDataSetChanged();
    } 
```

现在，请确保为列表项的父布局（linearLayout、boxLayout、relativeLayout、.. 无论您喜欢什么）分配一个 ID。

然后在您的 ListView 中，您可以执行以下操作：

```
layoutBackground = (LinearLayout) convertView.findViewById(R.id.layout_background);

if (YourActivity.this.currentPosition == position) {
    layoutBackground.setBackgroundColor(YourActivity.this.getResources().getColor(R.color.hilight_color));
} else{
    layoutBackground.setBackgroundResource(R.drawable.list_item_drawable);
} 
```

基本上，当它等于您当前选择的位置时，您只需将布局的高亮颜色设置为背景。请注意我在未选择项目时如何设置可绘制背景资源。在您的情况下，这可能会有所不同（因为您没有发布代码）。在我的例子中，这个drawable是一个选择器，它确保项目在按下时是高亮的。

> 注意：这个简单的代码不使用视图持有者，但我真的建议使用一个。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-29T07:32:45.800

改用 id：

这是即使列表很长也可以处理的最简单的方法：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    Holder holder=new Holder();
    View rowView;
    rowView = inflater.inflate(R.layout.list_item, null);
    //Handle your items.
    //StringHolder.mSelectedItem is a public static variable.
    if(getItemId(position)==StringHolder.mSelectedItem){
        rowView.setBackgroundColor(Color.LTGRAY);

    }else{
        rowView.setBackgroundColor(Color.TRANSPARENT);
    }
    return rowView;
} 
```

然后在你的 onclicklistener 中：

```
list.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
            StringHolder.mSelectedItem = catagoryAdapter.getItemId(i-1);
            catagoryAdapter.notifyDataSetChanged();
..... 
```

# cakephp-2.3 - 自定义 CakePHP Controller 的 flash() 方法

> ID：16189652
> 
> 赞同：0
> 
> 时间：2013-04-24T10:29:14.440
> 
> 标签：cakephp-2.3

我需要像这样自定义 CakePHP Controller 的 flash() 方法，

```
//$progressId variable is extra
//the error is customized method is not compatible with Controller::flash() method
public function flash($message, $url, $pause = 1, $progressIs, $layout = 'flash') {
    $this->autoRender = FALSE;
    $this->set('url', Router::url($url));
    $this->set('message', $message);
    $this->set('pause', $pause);
    $this->set('page_title', __('action result title'));
    $this->set('progress_is', $progressIs);
    $this->render(FALSE, $layout);
} 
```

如何正确定制？

谢谢你，

阿里雷萨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T23:20:18.197

您收到此错误是因为自定义（覆盖）方法的“签名”与原始方法不同。

覆盖方法时，请确保它与原始方法保持兼容。

想象一下这个例子；

```
public function serveSandwich($person, $sandwich, $drink = null)
{
    find($person);
    serve($person, $sandwich);
    if ($drink) {
        serve($person, $drink);
    }
} 
```

这很好用，这种方法允许您为某人提供三明治和（可选）饮料，例如：

```
serveSandwich('motherinlaw', 'peanut butter', 'orange juice'); 
```

但是，此功能不符合您的要求，您想在上三明治前先让座。

所以你决定用你的高级方法覆盖该方法；

```
public function serveSandwich($person, $furniture, $sandwich, $drink = null)
{
    find($person);
    havePersonSitOn($person, $furniture);
    serve($person, $sandwich);
    if ($drink) {
        serve($person, $drink);
    }
} 
```

对于您的下一次聚会，您聘请 Jeeves，他有资格使用 CakePHP 2.3 提供三明治。

你让 Jeeves 给你岳母端上一份花生酱三明治；他知道如何在 CakePHP 中做到这一点，所以会发生这种情况：

```
serveSandwich('motherinlaw', 'peanut butter', 'orange juice'); 
```

但是，Jeeves 不知道不兼容的覆盖，因此您的岳母最终会坐在花生酱三明治上，手里拿着橙汁！

## 如何正确执行此操作

基本上，您可以选择两种方法；

### 创建一个调用原始方法的新方法

```
public function seatAndServeSandwich($person, $furniture, $sandwich, $drink = null)
{
    havePersonSitOn($person, $furniture);
    $this->serveSandwich($person, $sandwich, $drink = null)
} 
```

这是首选方式；为了使用高级功能，您*显式*调用新方法，而新方法又调用原始方法

在你的情况下：

```
public function customflash($message, $url, $pause = 1, $progressIs, $layout = 'flash') {
    $this->set('progress_is', $progressIs);
    return $this->flash($message, $url, $pause, $layout);
} 
```

### 在末尾追加新参数

这也可以，但是如果以后的 CakePHP 版本会为方法添加新参数，*可能会*`flash`导致问题；

```
public function flash($message, $url, $pause = 1, $layout = 'flash', $progressIs = null) {
    $this->set('progress_is', $progressIs);
    return parent::flash($message, $url, $pause, $layout);
} 
```

额外的参数永远不会被其他控制器使用，因为他们不知道它存在，因此不会造成任何问题（只要它不是必需的参数）。

# python - 用于游戏循环的 GAE python 后端

> ID：16189654
> 
> 赞同：0
> 
> 时间：2013-04-24T10:29:22.747
> 
> 标签：python, google-app-engine

我在尝试使用 GAE 和后端进行循环设置时遇到了困难。我的目标：一个主要的游戏循环来跟踪计时器（敌人在 3 秒内移动，冷却时间在 5 秒内准备好，等等）。我认为带有线程的驻留后端是要走的路。到目前为止，我只能在 appcfg.py 后端更新后让后端显示在仪表板中。现在我只是在努力弄清楚下一步。以下是一些具体问题：

1.  如果开发服务器不支持后端线程，我该如何开发它？
2.  使用后端和线程听起来像是游戏循环的合理方法吗？

最有用的是一个基本示例，其中包括 backends.yaml、主应用程序 .py 文件和后端 .py 代码。这就是我想象的一个例子的工作方式：

*   请求从浏览器发送到应用程序。
*   应用程序与后端实例通信并在线程中设置计时器
*   一旦计时器完成......接下来会发生什么？响应浏览器，还是返回应用程序？

我已经阅读了很多次文档，并且不再沉迷其中。我试图弄清楚，但进展非常缓慢。而且我在网上找不到有用的、面向新手的示例。任何帮助将非常感激！谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:38:23.270

1.  google.appengine.api.background_thread 确实在开发服务器上工作
2.  我不知道这是否是多人游戏的合理方法

例子：

前端：

```
<script>
onMessage = function(msg){
    console.log(msg.data)
}
channel = new goog.appengine.Channel('{{ token }}');
socket = channel.open();
socket.onmessage = onMessage;
</script> 
```

测试后端.py

```
import logging, webapp2, time
from google.appengine.api import background_thread, channel

class Thread(webapp2.RequestHandler):
    def post(self):
        token = self.request.get("token")
        t = background_thread.BackgroundThread(target=timed_message, args=[token])
        t.start()

def timed_message(token, *kwargs):
    logging.info(token)
    time.sleep(2)
    channel.send_message(token, "channel works")

pages = [
        ("/testbackend/start_thread", Thread),
    ]

app = webapp2.WSGIApplication(pages, debug=True) 
```

主文件

```
import webapp2, jinja2, os, logging
from google.appengine.api import backends, urlfetch, users, channel

JINJA_ENVIRONMENT = jinja2.Environment(loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class IndexPage(webapp2.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if not user:
            self.redirect(users.create_login_url(self.request.uri))
        token = channel.create_channel(user.user_id())
        template_values = {"token":token}
        template = JINJA_ENVIRONMENT.get_template('templates/index.html')
        self.response.write(template.render(template_values))

class TestAReq(webapp2.RequestHandler):
    def post(self):
        user = users.get_current_user()
        url = backends.get_url("testbackend")+"/testbackend/start_thread"
        result = urlfetch.fetch(url, method="POST", payload="token="+user.user_id())
        self.response.write("abc")

pages = [
            ('/', IndexPage),
            ("/ajaxtest", TestAReq),
        ]
app = webapp2.WSGIApplication(pages, debug=True) 
```

app.yaml 处理程序：

```
handlers:
- url: /static
  static_dir: static

- url: /testbackend/.*
  script: testbackend.app

- url: /.*
  script: main.app 
```

# wso2 - 如何知道 Wso2ESB 中的客户端 URL 唱属性调解器

> ID：16189655
> 
> 赞同：1
> 
> 时间：2013-04-24T10:29:24.000
> 
> 标签：wso2, wso2esb, wso2dss

我有两个代理。我希望在第二个代理中过滤客户端 url 意味着我的第一个代理已实现并将一些数据发送到第二个代理。它工作正常但我希望我不想允许任何其他服务使用我的代理。在这种情况下我需要过滤基于网址。我们在 ESb get-property('To') 中有选项可以知道目标服务的 url，但是我们如何知道哪个客户在给我打电话

```
`<property name="client-host" expression="get-property('From')"/>` 
```

即使我在客户端和目标服务中定义此属性也不起作用，但它返回“null”

```
<property name="client-host" expression="get-property('To')"/> 
```

此属性返回我当前服务 URl

但我需要客户网址谁在打电话给我......我该如何定义它以及我可以在哪里定义客户端或目标 [http://docs.wso2.org/wiki/display/ESB460/Property+Mediator#PropertyMediator-PropertiesToFromActionFaultToReplyToMessageID](http://docs.wso2.org/wiki/display/ESB460/Property+Mediator#PropertyMediator-PropertiesToFromActionFaultToReplyToMessageID)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:30:18.087

您可以为您的代理启用 ws-addressing 模块并查看“来自”属性是否正常工作？通常从传输接收器捕获从到操作属性。WS-addressing 将捕获相同的属性，如果它们已经可用，则 ws-addressing 将覆盖它们...

# windows-phone-7 - Pivot Itemssource 未更新

> ID：16189660
> 
> 赞同：0
> 
> 时间：2013-04-24T10:29:29.390
> 
> 标签：windows-phone-7, mvvm, wpf-controls, wpftoolkit

嗨，我有一个 Category 类，我正在从 API 下载数据并在其中显示`Pivot`，现在对于数据加载的索引 0 `Pivot`，我添加了一个`Pivot selection changed event`当用户翻转到其他`PivotItems`并加载数据时。但问题是`ItemsSource`没有更新。如果我喜欢这样`pivot.itemssource=""`；和`pivot.itemssource=mylist`; 我还必须将索引更改`pivot.selectedIndex`为当前索引，在这种情况下翻转不平滑，它首先变为 0 索引，因为`pivot.itemssource=""`; 然后来到实际的地方。请帮我解决这个问题，以便它自动绑定和更新。我的课程如下：

## 类别.xaml

```
<Grid x:Name="LayoutRoot" >

        <controls:Pivot Margin="0,53,0,28" x:Name="CategoryList" Foreground="White" SelectionChanged="Pivot_SelectionChanged" ItemsSource="{Binding Constants.categoryDetails}" >
            <controls:Pivot.HeaderTemplate>
                <DataTemplate>
                    <TextBlock x:Name="PivotTitle" Text="{Binding name}"></TextBlock>
                </DataTemplate>
            </controls:Pivot.HeaderTemplate>
            <!--Panorama item one-->
            <controls:Pivot.ItemTemplate>
                <DataTemplate>
                    <Grid>
                       <ListBox x:Name="subCatList" ItemsSource="{Binding subcategories}" ScrollViewer.VerticalScrollBarVisibility="Visible">
                            <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderThickness="2" BorderBrush="White">
                                            <Grid Width="420" Height="70" Background="#85000000">
                                                <TextBlock Text="{Binding name}"  FontFamily="Verdana" FontSize="35" Margin="10,10,64,5" TextWrapping="Wrap" ></TextBlock>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                       </ListBox>
                     </Grid>
                </DataTemplate>
            </controls:Pivot.ItemTemplate>
        </controls:Pivot>

    </Grid>

    <!--Panorama-based applications should not show an ApplicationBar-->

</phone:PhoneApplicationPage> 
```

## 类别.cs

```
namespace MyApp.Views
{
    public partial class Category : PhoneApplicationPage
    {
                     List<WebClient> webclientsList = new List<WebClient>();
                     private int selectedIndex=0;
                    private ListBox subCatList;
                    public readonly DependencyProperty ListVerticalOffsetProperty;
                    public Category()
        {
            InitializeComponent();
            for (int i = 0; i < Constants.catList.Length; i++)
            {
                       WebClient wb = new WebClient();
                       CategoriesClass ct = new CategoriesClass();
                       ct.name = Constants.catList[i];
                       webclientsList.Add(wb);
                       Constants.categoryDetails.Add(ct);
            }
                  loadCategory();

        }

        private void Pivot_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            selectedIndex = CategoryList.SelectedIndex;
            if (Constants.categoryDetails[selectedIndex].subcategories==null) {
                loadCategory();

            }
            else{

            }
        }

        private void loadCategory()
        {

            try
            {

                String Url = Constants.BASE_URL + "/get-category-data/?client_key=" + Constants.CLIENT_KEY;

                webclientsList[selectedIndex].DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClientCategoryDownload);
                webclientsList[selectedIndex].DownloadStringAsync(new Uri(Url));

            }
            catch (Exception e)
            {
                Console.WriteLine("Error Occured"+e.StackTrace);
            }
        }

        void webClientCategoryDownload(object sender, DownloadStringCompletedEventArgs e)
        {
            try
            {
                if (e.Error != null)
                {
                    Console.WriteLine("Error geting category");
                    return;

                }

                CategoryClass ctClass = new CategoryClass();
                ctClass = JsonConvert.DeserializeObject<CategoryClass>(e.Result);

                if (ctClass.name!=null)
                {
                    Console.WriteLine("Category Loaded");
                    Constants.categoryDetails[selectedIndex].categoryDetails = ctClass;
                    Constants.categoryDetails[selectedIndex].subcategories = new ObservableCollection<SubCategories>();
                    foreach (var its in ctClass.categories)
                    {
                        foreach(var chi in its.children){

                            Constants.categoryDetails[selectedIndex].subcategories.Add(chi);
                        }

                    }

                    CategoryList.ItemsSource = "";
                    CategoryList.SelectedIndex = selectedIndex;
                    CategoryList.ItemsSource = Constants.categoryDetails;

                    for(int i=0;i<Constants.categoryDetails.Count;i++){

                        foreach (var x2 in Constants.categoryDetails[selectedIndex].subcategories)
                        {
                            Console.WriteLine("SubCategory is :"+x2.name);
                        }
                    }

                }
                else {

                    Console.WriteLine("Categories Doesnt Exists ");
                }

            }
            catch (Exception e1)
            {
                Console.WriteLine("Exception Occured:"+e1.StackTrace);
            }
        }

        private void Facebook_login(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/Views/Login.xaml", UriKind.Relative));
        }

     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:42:30.387

首先尝试设置

```
 pivot.itemssource=null; 
```

进而

```
 pivot.itemssource=myList; 
```

但这是错误的方式。

如果你想成为一名优秀的`Windows Phone`开发人员，你必须知道什么是`MVVM`.

首先，你必须阅读并理解[这篇文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

然后尝试了解如何使用现有的 mvvm 工具包，例如[MVVM Light](http://mvvmlight.codeplex.com/)或[Caliburn.Micro](http://caliburnmicro.codeplex.com/)。

您应该对如何使用 MVVM 有一个很好的了解，然后您就可以自己解决您的问题。

希望有帮助。

还要检查[这个有用的问题](https://stackoverflow.com/questions/1662309/good-examples-of-mvvm-template?rq=1)。

还有[这](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/d9a7952c-7f3d-4edb-b0c7-bd7f75c94292/)[这](https://stackoverflow.com/questions/4077756/refresh-pivot-control-with-mvvm-light-toolkit-for-wp7)[这](https://stackoverflow.com/questions/3655422/a-super-simple-mvvm-light-wp7-sample)这[这](http://www.infragistics.com/community/forums/p/78920/399075.aspx)这_

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T07:21:46.553

# 以下是我在项目中使用 MVVM 所遵循的步骤。

```
Install MVVM from silverlight
http://www.galasoft.ch/mvvm/installing/  Dont know the exact link but I think its available here.

Now restart your visual studio.

Go to Right click on your project and add new Items to your project.
Now add Model View Locator inside ViewModel  folder. (It will be good practice to keep these file 

into a new folder like ViewModel, View, Model)

Now you have created a viewlocator which handles all the process like cleaning for a viewmodel.

Now in the same folder create a modelview for your requirement edit like below, and also you are 

free to add more parameters acc to your requirement.

using GalaSoft.MvvmLight;
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using MyProject.Model;
namespace MyProject.ViewModel
{

    public class ProductViewModel : INotifyPropertyChanged
    {
         private ObservableCollection<ProductsClass> productData;

         public ObservableCollection<ProductsClass> ProductData
        {
            get
            {
                return productData;
            }

            set {
                productData = value;
                RaisePropertyChanged("ProductData");
            }
        }

         public ProductViewModel(ObservableCollection<ProductsClass> productData)
        {
            ProductData = productData;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;

        if (handler != null)

             {

                 handler(this, new PropertyChangedEventArgs(propertyName));

             }

    }

        /// <summary>
        /// Initializes a new instance of the ProductViewModel class.
        /// </summary>
        public ProductViewModel()
        {
            ////if (IsInDesignMode)
            ////{
            ////    // Code runs in Blend --> create design time data.
            ////}
            ////else
            ////{
            ////    // Code runs "for real": Connect to service, etc...
            ////}
        }

        ////public override void Cleanup()
        ////{
        ////    // Clean own resources if needed

        ////    base.Cleanup();
        ////}
    }
}

Now we have created our modelview, we have to mention something for this in our locator as 

follows(Make the necessary changes only):

namespace Myproject.ViewModel
{

    public class ViewModelLocator
    {

    private static MainViewModel _main;

        /// <summary>
        /// Initializes a new instance of the ViewModelLocator class.
        /// </summary>
        private static ProductViewModel _viewModelProduct;

        public ViewModelLocator()
        {

            CreateMain();

            CreateViewModelProduct();

        }

        /// <summary>
        /// Gets the Main property.
        /// </summary>
        public static MainViewModel MainStatic
        {
            get
            {
                if (_main == null)
                {
                    CreateMain();
                }

                return _main;
            }
        }

        /// <summary>
        /// Gets the Main property.
        /// </summary>
        [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Performance",
            "CA1822:MarkMembersAsStatic",
            Justification = "This non-static member is needed for data binding purposes.")]
        public MainViewModel Main
        {
            get
            {
                return MainStatic;
            }
        }

        /// <summary>
        /// Provides a deterministic way to delete the Main property.
        /// </summary>
        public static void ClearMain()
        {
            _main.Cleanup();
            _main = null;
        }

        /// <summary>
        /// Provides a deterministic way to create the Main property.
        /// </summary>
        public static void CreateMain()
        {
            if (_main == null)
            {
                _main = new MainViewModel();
            }
        }

        /// <summary>
        /// Cleans up all the resources.
        /// </summary>
        public static void Cleanup()
        {
            ClearMain();

            ClearViewModelProduct();

        }

        //Product model declaration

        /// <summary>
        /// Gets the ViewModelPropertyName property.
        /// </summary>
        public static ProductViewModel ProductViewModelStatic
        {
            get
            {
                if (_viewModelProduct == null)
                {
                    CreateViewModelProduct();
                }

                return _viewModelProduct;
            }
        }

        /// <summary>
        /// Gets the ViewModelPropertyName property.
        /// </summary>
        [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Performance",
            "CA1822:MarkMembersAsStatic",
            Justification = "This non-static member is needed for data binding purposes.")]
        public ProductViewModel ViewModelProduct
        {
            get
            {
                return ProductViewModelStatic;
            }
        }

        /// <summary>
        /// Provides a deterministic way to create the ViewModelPropertyName property.
        /// </summary>
        public static void CreateViewModelProduct()
        {
            if (_viewModelProduct == null)
            {
                _viewModelProduct = new ProductViewModel();
            }
        }

        /// <summary>
        /// Provides a deterministic way to delete the ViewModelPropertyName property.
        /// </summary>
        public static void ClearViewModelProduct()
        {
            //_main.Cleanup();
            _viewModelProduct = null;
        }

    }
}

Now inside your VIew create a variable like 

 private ProductViewModel pvm;

inside constructor add this:

 pvm = (ProductViewModel)Resources["pviewModel"];

Add this in your loaded method:

  Binding binding = new Binding("ProductData") { Source = pvm };

Like

 private void Product_Loaded(object sender, RoutedEventArgs e)
        {
            //Additional Code
            pvm.ProductData = Constants.productDet;
            //Additional Code          

            Binding binding = new Binding("ProductData") { Source = pvm };
        }

Now after adding some more code in your xaml file whenever you update anything in .cs it will 

automatically reflect in your view.

Make following in your xaml file:

DataContext="{Binding ViewModelProduct, Source={StaticResource Locator}}"
    Loaded="Product_Loaded"> at the top declaration

    <phone:PhoneApplicationPage.Resources>

        <viewModel:ProductViewModel x:Key="pviewModel" />

    </phone:PhoneApplicationPage.Resources>

Now the productsclass will be similar like this(its on u how u add parameters acc to ur requirement)

namespace Myproject.Model
{
    public class ProductsClass : INotifyPropertyChanged
    {
        private string name;
        public string Name
        {
            get { return name; }
            set
            {
                if (name != value)
                {
                    name = value;
                    // NotifyPropertyChanged("Name");
                }
            }
        }

        private ProductClass productDetailsOverview;
        public ProductClass ProductDetailsOverview
        {
            get { return productDetailsOverview; }
            set
            {
                if (productDetailsOverview != value)
                {
                    productDetailsOverview = value;
                    NotifyPropertyChanged("ProductDetailsOverview");
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (null != handler)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

    }

    public class ProductClass 
    {

        public long product_start_offset { get; set; }
        public ObservableCollection<FiltersData> filters_data { get; set; }
        public long product_end_offset { get; set; }
        public long product_count { get; set; }
        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged(String propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (null != handler)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }

and you can use ProductDetailsOverview in the itemssource to access any parameter like

ItemsSource="{Binding ProductDetailsOverview.product_list} 
```

# javascript - 如何在 RxJS 中通过订阅获得类似 Promise 的模式？

> ID：16189664
> 
> 赞同：0
> 
> 时间：2013-04-24T10:29:49.567
> 
> 标签：javascript, reactive-extensions-js, rxjs

我试图弄清楚 RxJS 中的任何现有运算符是否可以实现以下操作，或者我是否需要推出自己的扩展：

```
var x = // some observable sequence 
var y = // some observable sequence 
var z = // some observable sequence 

// 'when' should only call onNext when all of x, y and z has returned at 
// least one value. After that, 'when' should continue to call onNext if
// any of x, y, z changes their value.
var w = Rx.Observable.when(x, y, z).select(function(x, y, z) {
    // do stuff values of from z, y, x.
}); 
```

最好的，埃吉尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:41:05.833

看来我自己想出来了：）

`combineLatest`实例函数正是我需要的。

# c++ - 将 QTemporaryFile 与 QProcess 一起使用是否安全？

> ID：16189679
> 
> 赞同：3
> 
> 时间：2013-04-24T10:30:35.317
> 
> 标签：c++, qt, temporary-files, qprocess

我必须从用户那里读取一个脚本`QProcess`并将该脚本作为*文件*调用。

例如，用户插入这个，比如说，Python 脚本

```
import sys
print(sys.copyright) 
```

我必须将该脚本放在一个文件中，并使用该文件调用 python 解释器。

我想使用 a `QTemporaryFile`，因为该文件将在启动进程时服务，我不需要保持打开状态。

问题是：打开 QTemporaryFile，在其中写入内容，将该文件传递给进程（将无限期地继续）然后销毁临时文件是否安全？如果该过程再次需要该文件怎么办？如果进程保持文件打开怎么办？

我认为，如果进程保持打开状态，不会出现问题：可能 QTemporaryFile 将取消链接路径，但数据仍可在内存中访问。

但是，如果该进程将尝试再次打开文件怎么办？

这里有一个片段作为示例（即时编写）

```
QString script = QInputDialog::getText(blah);
QTemporaryFile tmp;
if (tmp.open()) {
    tmp.write(script.toUtf8());
    QStringList params;
    params << tmp.fileName();
    QProcess *proc = new QProcess("/usr/bin/python3");
    proc->start(params);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T13:49:25.577

据我了解，在“autoRemove”标志（默认情况下启用）的情况下，只要 QTemporaryFile 的实例存在，QTemporaryFile 就会存在。因此，在您最初提供的代码中，当 tmp 超出范围时，该文件将被删除。在对象上调用 open/close 不会删除文件。

如果您知道python脚本何时完成，您可以使用 QTemporaryFile* pTmp = new QTemporaryFile 动态分配文件，然后稍后将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:37:47.423

`autoRemove`哎呀，我刚刚注意到`QTemporaryFile`. 我想这可能是一个解决方案：如果设置为`false`，该文件将不会从磁盘中删除，因此该过程可以自由地重用该文件 - 我认为。

临时文件应该存储在系统的默认位置，所以我猜这些文件在重新启动之前不会被删除（至少，我相信 Linux 是这样工作的）。

这只是一个想法，但我会等待其他答案或确认。

# ios - 从 UICollectionView 中删除单元格而不从顶部重新加载

> ID：16189682
> 
> 赞同：21
> 
> 时间：2013-04-24T10:30:46.380
> 
> 标签：ios, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我在我的 ios 应用程序中使用 CollectionView。每个集合单元格都包含一个删除按钮。通过单击按钮，应删除单元格。删除后，该空间将被下面的单元格填充（我不希望重新加载 CollectionView 并再次从顶部开始）

如何使用自动布局从 UICollectionView 中删除特定单元格？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-24T11:02:27.830

**UICollectionView**将在删除后动画并自动重新排列单元格。

**从集合视图中删除选定的项目**

```
[self.collectionView performBatchUpdates:^{

    NSArray *selectedItemsIndexPaths = [self.collectionView indexPathsForSelectedItems];

    // Delete the items from the data source.
    [self deleteItemsFromDataSourceAtIndexPaths:selectedItemsIndexPaths];

    // Now delete the items from the collection view.
    [self.collectionView deleteItemsAtIndexPaths:selectedItemsIndexPaths]; 

} completion:nil];

// This method is for deleting the selected images from the data source array
-(void)deleteItemsFromDataSourceAtIndexPaths:(NSArray  *)itemPaths
{
    NSMutableIndexSet *indexSet = [NSMutableIndexSet indexSet];
    for (NSIndexPath *itemPath  in itemPaths) {
        [indexSet addIndex:itemPath.row];
    }
    [self.images removeObjectsAtIndexes:indexSet]; // self.images is my data source

} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T11:00:13.320

没有像 UITableviewController 那样向 UICollectionViewController 提供委托方法。我们可以通过向 UICollectionView 添加一个长手势识别器来手动完成。

```
 UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self
                                                                                         action:@selector(activateDeletionMode:)];
 longPress.delegate = self;
 [collectionView addGestureRecognizer:longPress]; 
```

在 longGesture 方法中，在该特定单元格上添加按钮。

```
- (void)activateDeletionMode:(UILongPressGestureRecognizer *)gr
{
    if (gr.state == UIGestureRecognizerStateBegan) {
        if (!isDeleteActive) {
        NSIndexPath *indexPath = [collectionView indexPathForItemAtPoint:[gr locationInView:collectionView]];
        UICollectionViewCell *cell = [collectionView cellForItemAtIndexPath:indexPath];
        deletedIndexpath = indexPath.row;
        [cell addSubview:deleteButton];
        [deleteButton bringSubviewToFront:collectionView];
        }
     }
 } 
```

在那个按钮动作中，

```
- (void)delete:(UIButton *)sender
{
    [self.arrPhotos removeObjectAtIndex:deletedIndexpath];
    [deleteButton removeFromSuperview];
    [collectionView reloadData];
} 
```

我认为它可以帮助你。

# android - 使用 phonegap (navigator.camera.getPicture) 拍照后，如何将其存储在本地驱动器中？

> ID：16189683
> 
> 赞同：3
> 
> 时间：2013-04-24T10:30:48.897
> 
> 标签：android, cordova

这是我的phonegap代码。此代码用于拍照以及保存图片：

```
<!DOCTYPE html>
<html>
<head>
<title>Capture Photo and Save</title>

<script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
<script type="text/javascript" charset="utf-8">
    var pictureSource; // picture source
    var destinationType; // sets the format of returned value 

    // Wait for Cordova to connect with the device
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready to be used!
    function onDeviceReady() {
        pictureSource = navigator.camera.PictureSourceType;
        destinationType = navigator.camera.DestinationType;
    }

    // Called when a photo is successfully retrieved
    function onPhotoDataSuccess(imageData) {
        // Uncomment to view the base64 encoded image data
        var date = ""
        var d = new Date();
        date = "" + d.getDate() + "-" + (d.getMonth() + 1) + "-"
                + d.getFullYear();
        alert(date)
        //alert(imageData);  

        // Get image handle
        //
        var smallImage = document.getElementById('smallImage');
        // Unhide image elements
        //
        smallImage.style.display = 'block';

        // Show the captured photo
        // The inline CSS rules are used to resize the image
        //
        smallImage.src = "data:image/jpeg;base64," + imageData;

        alert("data:image/jpeg;base64," + imageData)

        //This part is for saving the capture photo
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);

        function gotFS(fileSystem) {
            alert("image/" + date + ".jpeg")
            fileSystem.root.getFile("image/" + date + ".jpeg", {
                create : true,
                exclusive : false
            }, gotFileEntry, fail);
        }
        function gotFileEntry(fileEntry) {
            fileEntry.createWriter(gotFileWriter, fail);
        }
        function gotFileWriter(writer) {
            var data = "data:image/jpeg;base64," + imageData;
            writer.write(data);

        }
        function fail(error) {
            alert("error")
            console.log(error.code);
        }
    }

    // Called when a photo is successfully retrieved
    function onPhotoURISuccess(imageURI) {
        // Uncomment to view the image file URI 
        // console.log(imageURI);

        // Get image handle
        var largeImage = document.getElementById('largeImage');
        // Unhide image elements
        largeImage.style.display = 'block';

        // Show the captured photo
        // The inline CSS rules are used to resize the image
        //
        largeImage.src = imageURI;
    }

    // A button will call this function
    function capturePhoto() {
        // Take picture using device camera and retrieve image as base64-encoded string
        navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
            quality : 50,
            destinationType : destinationType.DATA_URL
        });
    }

    // A button will call this function
    //
    function capturePhotoEdit() {
        // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
        navigator.camera.getPicture(onPhotoDataSuccess, onFail, {
            quality : 20,
            allowEdit : true,
            destinationType : destinationType.DATA_URL
        });
    }

    // A button will call this function
    function getPhoto(source) {
        // Retrieve image file location from specified source
        navigator.camera.getPicture(onPhotoURISuccess, onFail, {
            quality : 50,
            destinationType : destinationType.FILE_URI,
            sourceType : source
        });
    }

    // Called if something bad happens.
    function onFail(message) {
        alert('Failed because: ' + message);
    }
    function savePhoto(source) {

    }
</script>
</head>
<body>
    <button onclick="capturePhoto();">Capture Photo</button>
    <br>
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button>
    <br>
    <button onclick="savePhoto();">Save The Photo In Server</button>
    <br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From
        Photo Library</button>
    <br>
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From
        PhotoAlbum</button>
    <br>
    <img style="display: none; width: 60px; height: 60px;" id="smallImage"
        src="" />
    <img style="display: none;" id="largeImage" src="" />
</body>
</html> 
```

我正在拍照并尝试像这样保存它，但它保存为文件而不是图片（二进制）。所以保存图片后它没有打开。如何用正确的 fromat 保存它以便我可以打开它作为图片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-03T11:00:41.450

我是这样做的：

```
function capturePhoto() {
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
destinationType: Camera.DestinationType.FILE_URI, });
}

function onPhotoDataSuccess(imageURI) {
  var gotFileEntry = function(fileEntry) {
    //alert("got image file entry: " + fileEntry.fullPath);
    var gotFileSystem = function(fileSystem) {

        fileSystem.root.getDirectory("MyAppFolder", {
            create : true
        }, function(dataDir) {
          var d = new Date();
          var n = d.getTime();
          //new file name
          var newFileName = n + ".jpg";
console.log("Saved image" + dataDir);
            // copy the file
            fileEntry.moveTo(dataDir, newFileName, null, fsFail);

        }, dirFail);

    };
    // get file system to copy or move image file to
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFileSystem,
        fsFail);
};
// resolve file system for image
window.resolveLocalFileSystemURI(imageURI, gotFileEntry, fsFail);

// file system fail
var fsFail = function(error) {
    alert("failed with error code: " + error.code);

};

var dirFail = function(error) {
    alert("Directory error code: " + error.code);

};
} 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T11:19:31.733

如果您可以将图像保存在照片库中，请尝试以下代码：

```
function capturePhoto() {
    // Take picture using device camera and retrieve image as base64-encoded string
    navigator.camera.getPicture(onPhotoDataSuccess, onFail, { 
        quality: 50,
        destinationType : destinationType.FILE_URI,
        saveToPhotoAlbum : true,
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:46:57.057

```
 function save(){

document.addEventListener("deviceready", onDeviceReady, false);
 }

// PhoneGap is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("pic.jpg", {create: true, exclusive: false}, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {

    var photo = document.getElementById("image");
    writer.write(photo.value);

}

function fail(error) {
    console.log(error.code);
} 
```

# iphone - iPhone 上的 AudioSession 属性

> ID：16189685
> 
> 赞同：4
> 
> 时间：2013-04-24T10:30:49.483
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我需要启用扬声器并启用蓝牙。

```
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error: nil];
    UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,
                             sizeof (audioRouteOverride), &audioRouteOverride);

    UInt32 allowBluetoothInput = 1;

    AudioSessionSetProperty (
                             kAudioSessionProperty_OverrideCategoryEnableBluetoothInput,
                             sizeof (allowBluetoothInput),
                             &allowBluetoothInput
                             ); 
```

但它不能一起工作。我的意思是，如果蓝牙打开，我会听到来自 BT 耳机的声音，如果关闭，我会听到来自扬声器的声音。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:39:47.313

您是否尝试过`changeDefaultRoute`代替`audioRouteOverride`扬声器？

```
UInt32 doChangeDefaultRoute = 1;
AudioSessionSetProperty(
                       kAudioSessionProperty_OverrideCategoryDefaultToSpeaker
                     , sizeof(doChangeDefaultRoute)
                     , &doChangeDefaultRoute); 
```

这修复了输出到扬声器而不是接收器的问题，但我无法测试蓝牙输入端（没有蓝牙设备！）。它可能*不像*我能收集到的那样`OverrideCategoryEnableBluetoothInput`实际控制输入*和*输出。

苹果是这样说的：

> 此属性会影响 kAudioSessionCategory_PlayAndRecord 类别，如下所示： 如果设备的音频输入来自蓝牙耳机，则将此属性设置为 TRUE 会导致音频输出也发送到蓝牙耳机。（[*音频会话服务参考*](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/AudioSessionServicesReference/Reference/reference.html)）

一般来说，Apple 不希望应用程序以可能违反用户直觉的方式操纵路由。这个想法是路由应该是用户觉得他们可以控制的东西。

# sql - 将 Excel 2010 导入到 Sql Server 2008

> ID：16189688
> 
> 赞同：0
> 
> 时间：2013-04-24T10:31:03.320
> 
> 标签：sql, excel

我正在使用 Excel 2010 和 sql server 2008 将数据从 excel 导入到 sql server。但是我不成功。你能检查一下我在做什么吗？

```
sp_CONFIGURE 'show advanced options',1
RECONFIGURE
GO

sp_CONFIGURE 'optimize for ad hoc workloads',1
RECONFIGURE
GO

sp_configure 'Ad Hoc Distributed Queries', 1
GO
RECONFIGURE

SELECT * FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0','Excel 12.0;Database=C:\Users\anayak\AppData\Roaming\Microsoft\Templates\Book1.xlsx; HDR=YES;IMEX=1','SELECT * FROM [sheet1$]'); 
```

我在哪里得到这个错误

```
OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "(null)" returned message "Unspecified error".
Msg 7303, Level 16, State 1, Line 1
Cannot initialize the data source object of OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "(null)". 
```

我为 Microsoft.ACE.OLEDB.12.0 安装了 Microsoft Access Database Engine 2010 Redistributable。

但是当我使用命令“ODBCAD32.EXE”来检查我的 excel 版本时，我得到了 14.00.4760.1000。

然后我尝试了我的连接字符串 -

```
SELECT * FROM OPENROWSET('Microsoft.ACE.OLEDB.14.0','Excel 14.0;Database=C:\Users\anayak\AppData\Roaming\Microsoft\Templates\Book1.xlsx; HDR=YES;IMEX=1','SELECT * FROM [sheet1$]'); 
```

但它又没用。

你能建议我在这里做错什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T15:23:09.827

**回复：7303 错误**

[SQL Server 中的分布式查询，来自 XLS 的数据](https://stackoverflow.com/questions/21530708/distributed-queries-in-sql-server-data-from-xls/25188298#25188298)

所以你的主要错误可能是这个；

```
OLE DB provider "MICROSOFT.JET.OLEDB.4.0" for linked server "(null)" returned message "Unspecified error".
Msg 7303, Level 16, State 1, Line 1
Cannot initialize the data source object of OLE DB provider "MICROSOFT.JET.OLEDB.4.0" for linked server "(null)". 
```

我会检查一些权限。

检查 Temp 文件夹的权限

这是必需的，因为提供程序在检索数据时使用临时文件夹。根据您使用的是本地系统帐户还是网络域帐户，该文件夹可以是以下之一。

对于网络帐户，文件夹是

**\Windows\ServiceProfiles\NetworkService\AppData\Local\Temp**

对于本地系统帐户，它的 \Windows\ServiceProfiles\LocalService\AppData\Local\Temp

右键单击此文件夹并为其授予对执行代码的帐户（或组）的读写访问权限。这为我解决了错误。

还

[http://blogs.msdn.com/b/spike/archive/2008/07/23/ole-db-provider-microsoft-jet-oledb-4-0-for-linked-server-null-returned-message-未指定的错误.aspx](http://blogs.msdn.com/b/spike/archive/2008/07/23/ole-db-provider-microsoft-jet-oledb-4-0-for-linked-server-null-returned-message-unspecified-error.aspx)

这是因为 SQL Server 服务正在尝试将临时 DSN 写入启动服务的登录名的临时文件夹，在本例中为 Admin/Admin 登录名。临时文件夹类似于：**C:\Documents and Settings\Admin\Local Settings\Temp** .15 如前所述，OleDbProvider 将始终在初始化它的用户的上下文中执行，在本例中为用户/用户。.16 用户/用户对此文件夹没有任何权限（**C:\Documents and Settings\Admin\Local Settings\Temp**）。如果在执行 SQL 时运行 FileMon，我们可以看到以下内容：（实际上，尝试使用**Process Monitor - [http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)**）

sqlservr.exe:000 查询信息 C:\DOCUME~1\Admini~1\LOCALS~1\Temp ACCESS DENIED 属性：错误

到目前为止总结一下：SQL Server 服务以管理员/管理员身份启动，当进行选择时，用户/用户调用 OleDb 提供程序。现在 OleDb 提供程序尝试在 temp 目录中创建一个临时 DSN。这将是 SQL Server 服务 (Admin/Admin) 的临时目录，但用户（在本例中为用户/用户）没有此文件夹的写入权限。并且发生错误。

有两种方法可以解决这个问题。

**选项 1**：退出机器并以启动 SQL Server 服务的帐户（在本例中为 Admin/Admin）登录，然后启动命令提示符并键入“set t”（不带引号），这将显示如下内容：

TEMP=C:\DOCUME~1\Admin\LOCALS~1\Temp TMP=C:\DOCUME~1\Admin\LOCALS~1\Temp

这些是为 %TEMP% 和 %TMP% 设置的环境变量，因此转到该文件夹​​并右键单击并选择 Properties -> Security，然后添加用户，在本例中为 User/User，注意用户的默认设置是Read&Execute/List Folder Content/Read，这还不够，你还得选择Write。

注销，然后以用户/用户身份再次登录，然后从 SSMS 重新运行命令。这次应该可以了。

**选项 2**：以管理员身份登录并将 TEMP 和 TMP 变量更改为，例如 C:\Temp，基本上这会将 Temp 目录移出 Documents and Settings 文件夹。但是，您必须重新启动 SQL 服务器才能使其生效。

所以基本上，当 SQL Server 启动时，它使用启动帐户 (Admin/Admin) 的 Temp 文件夹，但 MICROSOFT.JET.OLEDB.4.0 将始终以调用 SQL 命令的用户 (User/User )，除非该用户对该临时文件夹没有写入权限，否则这将失败。

在不知道所有设置的情况下，也许选项 2 是首选解决方案，因为使用选项 1，您将必须添加将调用提供程序的所有用户，这可能不切实际。此外，在更改 SQL Server 服务的启动帐户时，将使用该帐户的 TEMP 目录，并且您将再次看到错误，直到您再次为此 TEMP 文件夹上的所有用户授予写入权限...或用户组（首选）。

# html - 将左对齐的短文本块居中

> ID：16189696
> 
> 赞同：3
> 
> 时间：2013-04-24T10:31:47.310
> 
> 标签：html, css, centering

使用边距 0 自动将长文本居中并通过边距或填充控制距离很容易。

但是，是否可以在不知道宽度的情况下将文本居中并且该文本是否左对齐？

*   将短文本居中
*   文字左对齐
*   不知道宽度

这是要检查的示例：http: [//jsfiddle.net/j4Y3k/5/](http://jsfiddle.net/j4Y3k/5/)

CSS：

```
#long {
    margin:50px auto;
    text-align:left;
    padding: 0px 100px;
    background:white;
}

#short {
    margin:0px auto;
    text-align:left;
} 
```

HTML：

```
<div id="long">
long, long,long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, long, 
</div>

<div id="short"> 
short, short, short<br>
short, short, short, short, short, short<br>
short, short
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:07:17.533

如果您允许自己执行以下操作，则可以轻松完成：

```
<div class="wrap">
    <div id="short">short, short, short
        <br>short, short, short, short, short, short
        <br>short, short</div>
</div> 
```

并应用以下 CSS：

```
.wrap {
    text-align: center;
}
#short {
    margin:0px;
    auto;
    text-align:left;
    outline: 1px dotted blue;
    display: inline-block;
} 
```

见小提琴：http: [//jsfiddle.net/audetwebdesign/GywRR/](http://jsfiddle.net/audetwebdesign/GywRR/)

将`inline-block`收缩包装您的内容并仍响应`text-align: center`为父容器声明的属性。

**为什么内联块与块**

`block`'s 将使用最大可用宽度，通常是父容器的宽度。 `inline-block`将缩小以适应（w3.org 文档中的术语！），这通常给你一个小于父容器的宽度，然后允许居中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:36:36.557

您需要`width`在使用“margin auto”居中时设置一个。您的`margin`财产也有语法错误；

```
#short {
    margin:50px auto;
    text-align:left;
    width:300px;
} 
```

[http://jsfiddle.net/j4Y3k/2/](http://jsfiddle.net/j4Y3k/2/)

您可能认为您已将长元素居中，但这只是因为它的空间不足，并且`100px`填充迫使两侧的间隙。`width`如果您希望真正居中，您也需要在此设置属性。

# php - 单击打印全部按钮并打印一次打印的所有图像

> ID：16189699
> 
> 赞同：0
> 
> 时间：2013-04-24T10:31:52.153
> 
> 标签：php, html

我已经从一个文件夹创建了多个图像显示为缩略图。我想单击打印全部按钮并一次打印所有图像。

可以同时打印所有图像。？

我正在使用的技术：

PHP5.x/HTML5/CSS3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:31:59.867

可以一次打印所有图像。这里有两个主题可能会对您有所帮助：

[Javascript window.print() 函数：](http://www.w3schools.com/jsref/met_win_print.asp) 触发页面的打印（IE 的行为与使用标准浏览器按 CTRL-P 相同）。

[CSS 媒体查询：](http://www.w3schools.com/css/css_mediatypes.asp) 允许您为每种媒体指定不同的样式表。（打印、屏幕、手持...）您可以指定一个样式表隐藏除“打印”媒体的图像之外的所有内容。

我还可能会问：到目前为止，您尝试过什么？

# android - TabHost中未调用绑定服务的onServiceConnected回调

> ID：16189708
> 
> 赞同：0
> 
> 时间：2013-04-24T10:32:22.480
> 
> 标签：android, android-service, android-tabhost

我使用`Service`绑定到我所有的本地，`activities`当我开始`Activity`我得到一个`callback`：

```
@Override
        public void onServiceConnected(ComponentName name, IBinder service) {
} 
```

但是如果我使用 TabHost 并且活动正在以下一个方式开始：

```
TabSpec spec = tabHost.newTabSpec("Spec");
intent = new Intent(this, TestActivity.class);
spec.setContent(intent); 
```

需要调用 onServiceConnected 回调。

为什么？如何解决这种情况？

```
SUMMARY:

intent = new Intent(this, MyActivity.class);
startActivity(intent); // In this case callback is called

TabSpec spec = tabHost.newTabSpec("Spec");
intent = new Intent(this, MyActivity.class);
spec.setContent(intent); // In this case callback is not called 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T21:40:03.487

在选项卡中，`bindService(.....)`您必须使用`getApplicationContext.bindService(.....)`才能`onServiceConnected`触发回调。

# c# - 如何在wpf中更改数据网格的单个单元格颜色？

> ID：16189717
> 
> 赞同：2
> 
> 时间：2013-04-24T10:32:41.073
> 
> 标签：c#, wpf, xaml, datagrid, wpfdatagrid

![阶段图](https://i.stack.imgur.com/gr5l9.jpg) 我想在运行时更改此网格的特定单元格的背景颜色（显示预定座位）。我正在从窗口加载事件的数据表中绑定此网格。我有一个座位记录，如“A33”。我的绑定代码就像这个。

```
MySqlConnection mycon = new MySqlConnection(str);
mycon.Open();
MySqlDataAdapter da = new MySqlDataAdapter("select * from Stage", mycon);
da.Fill(dt);
MyGrid.ItemsSource = dt.DefaultView; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T12:43:07.180

通过代码更改特定单元格的背景：

```
 DataGridRow firstRow = dataGrid1.ItemContainerGenerator.ContainerFromItem(dataGrid1.Items[0]) as DataGridRow;
   DataGridCell firstColumnInFirstRow = dataGrid1.Columns[0].GetCellContent(firstRow).Parent as DataGridCell;
   //set background
   firstColumnInFirstRow.Background = Brushes.Red; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T15:41:21.343

您的单元格数据应该有一个属性`IsBooked`，然后`DataGrid.CellStyle`您可以在其中使用数据触发器`IsBooked`来更改其背景。（除此之外还有其他[一些选择](https://stackoverflow.com/a/5551986/546730)`DataTriggers`，但如果你只有一个布尔条件，我发现它们非常方便。）

# excel - 引用另一个工作表中的单元格，公式在“=”后有“+”

> ID：16189719
> 
> 赞同：2
> 
> 时间：2013-04-24T10:32:45.950
> 
> 标签：excel, reference, cell

我有一个电子表格，它是我公司所有成本的一般总结。我想做的就是从另一个工作表中引用一个单元格，所以单元格的公式是 -

```
='standard cost - MP'!L61 
```

然而，这是引用的单元格的值 -

![在此处输入图像描述](https://i.stack.imgur.com/cSlO8.png)

这个单元格的公式在“=”之后有一个“+”，这是我以前从未见过的，所以单元格“标准成本-MP”的公式！L61'是-

![在此处输入图像描述](https://i.stack.imgur.com/vnxre.png)

一旦我改变它，即在开始时去掉额外的加号，单元格的值就会变为 0。

当我尝试将单元格复制到另一个工作表时，它再次没有通过与下面相同的值。它再次以空值响应？'=' 后面的那个额外的 '+' 是什么？

任何帮助将不胜感激。

多谢你们

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:25:08.530

显然这是一种传统的莲花方法并且无害。为了进一步帮助您进行调查，请使用**评估公式**功能来帮助您。

对不起这个网站，但我发现它是最好的指南[http://www.dummies.com/how-to/content/how-to-check-for-and-evaluate-errors-in-excel- 2010.html](http://www.dummies.com/how-to/content/how-to-check-for-and-evaluate-errors-in-excel-2010.html)。

# sugarcrm - 如何在自定义模块 SugarCE-6.5.12 中使用 dashlets？

> ID：16189720
> 
> 赞同：0
> 
> 时间：2013-04-24T10:32:46.517
> 
> 标签：sugarcrm, dashlet

我已经创建了一个自定义模块，现在我想在我的模块列表视图中显示帐户和会议列表视图。我想知道如何使用 dashlet 将两个列表视图添加到我的模块中。有人可以给我一个线索吗？原谅我的英语。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:20:14.810

取决于数据如何关联。如果存在一对多或多对多关系，则每条记录的详细视图上都应该有包含相关帐户和会议的子面板。

如果您只想为每个未过滤的模块添加一个列表视图，请查看此博客文章...

[http://developers.sugarcrm.com/wordpress/2012/05/15/howto-drop-a-listview-in-anywhere-with-the-listviewfacade/](http://developers.sugarcrm.com/wordpress/2012/05/15/howto-drop-a-listview-in-anywhere-with-the-listviewfacade/)

# mysql - 如何在 if 条件下使用列值？

> ID：16189723
> 
> 赞同：2
> 
> 时间：2013-04-24T10:32:56.637
> 
> 标签：mysql, stored-procedures

> ```
> Appr_ID   Status
> ----------------
> Null      1
> 3         2
> 4         3
> NULL      4
> 7         5
> NULL      6 
> ```

我在一个表中有两列，它们的值如上所示。

我需要编写一个存储过程，以便每当`Appr_ID`列具有 Not Null 值时，它都会从具有多个连接的某些表中获取和显示数据。

当`Appr_ID`列为 NULL 时，它必须再次使用一些不同的条件来获取和显示数据。

我的问题是，当我尝试使用`if`-`else`语句时，无法在 if 语句中使用列值作为条件，例如

```
If Appr_ID is Null then
  Select...
Else
  Select... 
```

所以，请提出替代想法来完成这个场景。

在此先感谢，克里希纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:39:45.830

You should use a `CASE` statement.

Eg:

```
SELECT
  CASE
    WHEN Appr_ID IS NULL THEN (
      SELECT somevalue 
      FROM sometable 
           JOIN ... 
           JOIN ... 
      WHERE something=something)
    ELSE (SELECT somevalue 
          FROM someothertable 
               JOIN ... 
               JOIN ...  
          WHERE something=something)
  END as Your_Result_ColumnName

FROM
  YourTableWithApprIDInIt 
```

This will be quite efficient if each sub-query is basically returning the same result regardless of some value in the main `YourTableWithApprIDInIt` table (eg `Appr_ID` iself). This is because that sub-query won't actually be executed over and over for each row; it's result would be cached by the DBMS and re-used for each row.

But if the subquery *depends* on `Appr_ID` (such that each subquery needs to be re-executed on each row), then rather than using sub-queries, you would probably use a `JOIN` instead (in your main `FROM` clause).

```
SELECT
  CASE
    WHEN a.Appr_ID IS NULL THEN b.somevalue 
    ELSE c.somevalue
  END as Your_Result_ColumnName

FROM
  YourTableWithApprIDInIt a
  JOIN sometable b ON a.x = b.x
  JOIN ... ON ..

  JOIN someothertable c ON a.x = c.x
  JOIN ... ON .. 
```

You *could* still use subqueries in this scenario if you wanted, but it might not be so clean (and will possibly be less efficient, as the DBMS will be handling multiple logically disjointed result sets - although I say "possibly" because the DBMS may optimise this properly).

I'd test under your specific scenario to see if one approach yields better results than the other. If performance is even a factor.

* * *

**Update:**

In the case where you need to select *multiple* values depending on your `Appr_ID` value being null or not, then you'd need to repeat the `case` statement for each column in your main query, eg:

```
SELECT
  CASE
    WHEN Appr_ID IS NULL THEN (
      SELECT somevalue_1
      FROM sometable_1
           JOIN ... 
           JOIN ... 
      WHERE something=something)
    ELSE (SELECT somevalue_1
          FROM someothertable_1
               JOIN ... 
               JOIN ...  
          WHERE something=something)
  END as Your_Result_ColumnName_1,

  CASE
    WHEN Appr_ID IS NULL THEN (
      SELECT somevalue_2
      FROM sometable_2
           JOIN ... 
           JOIN ... 
      WHERE something=something)
    ELSE (SELECT somevalue_2
          FROM someothertable_2
               JOIN ... 
               JOIN ...  
          WHERE something=something)
  END as Your_Result_ColumnName_2,

  ...

FROM
  YourTableWithApprIDInIt 
```

Or

```
SELECT
  CASE
    WHEN a.Appr_ID IS NULL THEN b.somevalue_1 
    ELSE c.somevalue_1
  END as Your_Result_ColumnName_1,

  CASE
    WHEN a.Appr_ID IS NULL THEN b.somevalue_2
    ELSE c.somevalue_2
  END as Your_Result_ColumnName_2,

  ...

FROM
  YourTableWithApprIDInIt a
  JOIN sometable b ON a.x = b.x
  JOIN ... ON ..

  JOIN someothertable c ON a.x = c.x
  JOIN ... ON .. 
```

This is when the join syntax is really starting to look cleaner... But again, if each of your `Your_Result_ColumnName_X`s are coming from different tables, and each of these subqueries doesn't depend on values from inside your main outer query (such that each only needs to be evaluated only one time), the first of the two patterns *may* be more efficient even though it doesn't look cleaner ;-)

But again, test both in your specific scenario to see if there's a difference, and it may be that they're evaluated/optimised/executed by the DBMS to be exaclty same (in which case, choose the syntax pattern that makes most sense to you!) :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:03:00.660

你可以使用`CASE WHEN`声明

```
SELECT 
 CASE 
   WHEN a.Appr_ID IS NULL THEN  b.somevalue
   ELSE c.somevalue
 END AS ResultColumn

INNER JOIN TABLE b ON a.somecolumn = b.somecolumn
INNER JOIN TABLE c ON a.somecolumn = c.somecolumn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:39:30.090

如果您需要在一个语句中执行此操作，请执行两个连接，然后使用 CASE .... WHEN 来决定在输出中使用哪些列。

对于我的意思的一个简短的例子： -

```
SELECT a.*, CASE WHEN a.somefield IS NULL THEN b.somefield ELSE c.someotherfield END AS OutputField
FROM SomeTable a
LEFT OUTER JOIN SecondTable b ON a.somefield = b.id
LEFT OUTER JOIN ThirdTable c ON a.somefield = c.id 
```

# excel - 根据另一列中相应行中的值从一个列中的一行复制单元格

> ID：16189725
> 
> 赞同：0
> 
> 时间：2013-04-24T10:33:04.123
> 
> 标签：excel

我有一个关于 excel 2003 的邮件列表，我需要根据注册月份发送该邮件列表。

这个列表很大，而且数据经常被编辑、删除和添加。

所以在 QI 列中有月份作为数字 1 月 1 日 5 月 5 日等。然后我在 T 列中有电子邮件地址。

所以每次数字 1 出现在 Q 列中时，我都需要复制 T 列中的相应行

我每个月都需要这样做。

理想情况下，我每个月都有 12 个带有宏的按钮。

我不知道从哪里开始使用宏任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T23:37:08.427

这可能适用于 1 月份（尽管基于 Excel 2007 中的宏记录器）：

```
Sub MacroJan()
    ActiveSheet.Range("A:T").AutoFilter Field:=1, Criteria1:="1"
    Columns("T:T").Select
    Selection.Copy
    Sheets.Add After:=Sheets(Sheets.Count)
    Range("A1").Select
    ActiveSheet.Paste
End Sub 
```

但由于实际上只使用过滤器、复制和粘贴，因此似乎不需要十几个宏。

# jquery - 在jQuery中不断迭代each（）循环？

> ID：16189726
> 
> 赞同：0
> 
> 时间：2013-04-24T10:33:07.453
> 
> 标签：jquery, slider, each

是否可以在 jQuery 中连续运行 each() 循环？

我有一个相互淡入淡出的图像幻灯片，但是当它到达最后一张图像时它会停止。我的代码如下：

**jQuery**

```
$('.slider-block').each(function(i) {

$(this).delay(4000*i).fadeTo(1000,1);

}); 
```

**HTML**

```
<div class="slider-block">

<img src="image1.png" />

</div>

<div class="slider-block">

<img src="image2.png" />

</div> 
```

**CSS**

```
.slider-block { display: none; position: absolute; top: 0px; left: 0px; } 
```

我的目标是让它遍历所有图像，然后回到第一个并重新开始。

所有的 HTML 和 CSS 都可以正常工作，它真的只是我需要帮助的 jQuery 部分。

*****更新*****

根据建议，我尝试了以下方法，但是这些都没有重新开始：

```
setTimeout(function(){  

$('.slider-block').each(function(i) { 

$(this).delay(4000*i).fadeTo(1000,1); }); 

} ,4000); 
```

**和**

```
setInterval(function(){  

$('.slider-block').each(function(i) { 

$(this).delay(4000*i).fadeTo(1000,1); }); 

} ,4000); 
```

**这个让我的浏览器崩溃**

```
while(true)
{
   $('.slider-block').each(function(i) {

       $(this).delay(4000*i).fadeTo(1000,1);

   });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:01:44.433

**解决方案：**

```
function cycleImages(){
    var $active = $('#slider-container .active');
    var $next = ($active.next().length > 0) ? $active.next() : $('.slider-block:first');
      $next.css('z-index',2);//move the next image up the pile
      $active.fadeOut(1500,function(){//fade out the top image
          $active.css('z-index',1).show().removeClass('active');//reset the z-index and unhide the image
          $next.css('z-index',3).addClass('active');//make the next image the top one
      });
}        
$(function(){
    // run every 4s
    setInterval('cycleImages()', 4000);            
}); 
```

**编辑答案（v2）：**

顶部图像的 z-index 为“3”。下一张图片位于下方，使用的 z-index 为“2”。因此，通过淡出顶部图像，您会有一种无缝淡入的印象。

**演示：http:** [//jsfiddle.net/UhJm6/1/](http://jsfiddle.net/UhJm6/1/)

**注意：**由于透明度问题，此解决方案不适用于“.png”类型的图像。按喜好使用 JPEG 图像。

来源：[http ://www.simonbattersby.com/blog/simple-jquery-image-crossfade/](http://www.simonbattersby.com/blog/simple-jquery-image-crossfade/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:35:53.497

您可以使用`setTimeout()`Javascript 的功能来创建无限循环。

[在这里](http://www.w3schools.com/js/js_timing.asp)阅读更多。

如果您不想暂停，只需相应地设置超时时间。

或者你可以使用这个

```
While(true)
{
   $('.slider-block').each(function(i) {
       $(this).delay(4000*i).fadeTo(1000,1);
   });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:00:58.417

您可以使用完整的参数`fadeTo`来设置下一个淡入淡出，如下所示：

```
function fadeImg(i) {
    $('.slider-block').eq(i).delay(4000 * i).fadeTo(1000, 1, function () {
        fadeImg(i);
    });
}
$('.slider-block').each(function (i) {
    fadeImg(i);
}); 
```

但是一旦到达循环的末尾，您就必须将它们隐藏起来，否则它们将被最后一个隐藏。类似的东西：

```
function fadeIn(i) {
    $('.slider-block').eq(i).delay(4000 * i).fadeTo(1000, 1, function () {
        fadeIn(i);
        fadeOut(i);
    });
}
function fadeOut(i) {
    $('.slider-block').eq(i).delay(4000 * (i+1)).fadeTo(1000, 0);
}
$('.slider-block').each(function (i) {
    fadeIn(i);
}); 
```

样品[在这里](http://jsfiddle.net/D3aS5/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-04T06:05:43.570

让我们假设你想在下面的数组上连续做一个“每个”：

```
var your_array = [1, 2, 3]; 
```

您可以编写一个在此数组上行走的函数，然后当您到达最后一个时，您可以再次运行该函数：

```
var your_array = [1, 2, 3];
next = function () {
    var length = your_array.length,
        new_num;
    $.each(your_array, function(key, value) {
        new_num = value;
        if (length == key+1) {//we understand that we reached to the end of array
            alert(new_num);
            next();
        } else {
            alert(new_num);
        }

    });
}
next(); //output: 1 2 3 1 2 3 1 2 3 ... 
```

# python - 在 Python 中为参数赋值

> ID：16189728
> 
> 赞同：-2
> 
> 时间：2013-04-24T10:33:13.867
> 
> 标签：python, parameters, arguments

```
>>> import sys
>>> def hello(name):
    name='Hello, ',name,' !'
    print name 
```

这是我的代码。如何为参数“名称”赋值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:36:52.983

你的意思是

```
input = "whatever"
hello(input) 
```

# c# - 错误：SqlParameterCollection 只接受非空 SqlParameter 类型对象，不接受 String 对象

> ID：16189729
> 
> 赞同：0
> 
> 时间：2013-04-24T10:33:15.013
> 
> 标签：c#, sql

```
public int set(string procName , object[] param)
{
      SqlConnection conn = new SqlConnection(constr);
      conn.Open();

      SqlCommand cmd = new SqlCommand(procName,conn);
      cmd.CommandType = CommandType.StoredProcedure;

      foreach(object o in param)
      {
         cmd.Parameters.Add(o);      // Error
      }
      int res = cmd.ExecuteNonQuery();
      conn.Close();
      return res;
} 
```

这些值通过调用函数正确传递......函数'set'的第二个参数包含2个字符串值。

即使在 ERROR 语句中，“o”也包含第一个值“Computer”，但如上所述表示 ERROR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:34:52.917

您需要在您的集合中添加新的[SqlParameter ，例如：](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)

```
cmd.Parameters.Add(new SqlParameter(o.ToString(), o)); 
```

上面的语句只是为了说明如何在命令参数中添加参数。我不确定你为什么要向存储过程发送一个只有一个值的参数，你的方法正在接受并`object`输入数组，如果数组包含 SqlParameter 那么你可以这样做：

```
cmd.Parameters.Add((SqlParameter) o); 
```

否则，您需要指定参数名称及其值。

您可以修改您的方法以接受类型对象数组，`SqlParameter`然后将它们添加到命令参数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:39:32.440

尝试更改参数类型。

```
public int set(string procName , SqlParameter[] param)
        {
              SqlConnection conn = new SqlConnection(constr);
              conn.Open();

          SqlCommand cmd = new SqlCommand(procName,conn);
          cmd.CommandType = CommandType.StoredProcedure;

          foreach(SqlParameter o in param)
          {
             cmd.Parameters.Add(o);      // Error
          }
          int res = cmd.ExecuteNonQuery();
          conn.Close();
          return res;
    }) 
```

您可以了解如何创建 SqlParameter [SqlParameter 构造函数](http://msdn.microsoft.com/en-us/library/aa326287%28v=vs.71%29.aspx)

如果你想创建数组： `SqlParameter[] parameter = { new SqlParameter(...), new SqlParameter(...), new SqlParameter(...) };`

# sql - Sql 子查询语法

> ID：16189732
> 
> 赞同：0
> 
> 时间：2013-04-24T10:33:23.690
> 
> 标签：sql

我想使用当前客户 ID 执行子查询，因为我尝试在下面描述

```
SELECT DISTINCT  Customer_Id, 
(SELECT SUM  (total) FROM Orders where Customer_Id = Customer_Id AND CAST(Date) > DayIspecify )  
FROM Orders  where shop_id= '1-9THT' 
```

我想要的是计算每个客户在特定时间段内在特定商店花费的总和。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:35:26.760

```
SELECT Customer_Id, SUM(total) SumTotal
FROM Orders
where shop_id= '1-9THT' 
group by Customer_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:37:17.690

不需要子查询试试这个：

```
SELECT Customer_Id,SUM(total)FROM Orders WHERE shop_id='1-9THT' GROUP BY Customer_Id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:44:30.140

（更新）尝试：

```
select Customer_Id, 
       sum(case when o.shop_id = '1-9THT' and Date > DayIspecify 
                then total else 0 end) total
from Orders
group by Customer_Id 
```

*- 退回订单表中记录的所有客户，以及他们在指定日期之后*通过商店 1-9THT 下达的任何订单的价值。（更改`>`为`>=`在指定日期*或之后*进行。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T10:37:19.323

使用[SQL GroupBy](http://www.w3schools.com/sql/sql_groupby.asp)

```
SELECT DISTINCT  Customer_Id,  SUM  (total) FROM Orders  where shop_id= '1-9THT' group by customer_Id 
```

# javascript - Javascript - 运行时优先级和队列

> ID：16189735
> 
> 赞同：0
> 
> 时间：2013-04-24T10:33:33.753
> 
> 标签：javascript, timeout, queue

如果我做：

```
setTimeout(function(){ alert('antani'); },400);
    setTimeout(function(){ alert('supercazzola'); },400); 
```

为什么这个脚本会在这两个超时之间生成队列？

他们不应该同时发出警报吗？

正如我所看到的测试它，首先，第一个警报被执行，然后是第二个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:15:47.243

**背景**

JavaScript 只有一个运行解释器的线程。这意味着永远不会同时处理事件。当您设置超时时，您实际上订阅了浏览器的一些内部事件，每次浏览器处于空闲模式时都会触发（当不忙于渲染、解析或执行某些脚本等时）。此事件的处理程序以及它们被安排的时间根据`setTimeout`脚本中出现的顺序发布到队列中。每次触发此内部事件时，浏览器都会检查每个处理程序并决定是执行并将其从队列中删除还是跳过它。

**同时**

当您以相同的估计时间一个接一个地安排任务时

```
setTimeout(function(){ $('.element').hide(); },400);
setTimeout(function(){ $('.element').show(); },400); 
```

将`.element`首先隐藏然后显示。请注意，这并不意味着浏览器将`.element`在隐藏后呈现更改。大多数浏览器只会在脚本完成执行后呈现。

**不同的时间**

当您安排具有不同估计时间的任务时：

```
setTimeout(function(){ $('.element').hide(); },401);
setTimeout(function(){ $('.element').show(); },400); 
```

结果可能无法预测。可能会出现以下情况：

*   多于或等于`400`和少于`401`毫秒过去了，浏览器开始处理事件处理程序。在这种情况下`.element`，将首先显示然后隐藏。请注意，可能还有其他`setTimeout`计划在`400`毫秒后执行，它们将在 hide 之前运行`.element`。

*   `401`浏览器在第一次开始处理事件处理程序之前忙了几毫秒或更长时间。在这种情况下，最有可能（取决于浏览器实现）`.element`将首先隐藏然后显示，尽管根据估计时间它应该反之亦然！

关于您的问题：设置相同时间的超时或某个正增量是否相同，答案是**否定**的。这是不一样的，当您使用 delta 设置超时时，总是有可能在它们之间处理另一个事件或超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:38:51.117

请阅读：[http ://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

这是一个类似的例子：

```
function a(){
   var num = 5;
   console.log( ++num );
   setTimeout( a, 100 );
};
setTimeout(a,2000); 
```

按年代顺序：

您正在定义函数 a 而不调用它

您正在安排 a 在两秒后调用： setTimeout(a,2000)

它被称为

当它被调用时，它会安排自己在 100 毫秒后调用

您的代码基本上会休眠 2 秒，然后执行 100 毫秒暂停 [*]。

但是，根据您的上下文判断，您在问以下情况下的优先级是什么：

```
setTimeout(a, 2000);
setTimeout(b, 100); 
```

好吧，很可能首先调用 b （假设第一行和第二行之间没有不可预测的暂停，例如由于整体操作系统性能问题）。

如果您使用相同的超时：

```
setTimeout(a, 100);
setTimeout(b, 100); 
```

a 很可能首先被调用。但是我不认为这是有保证的，并且取决于 JS 引擎（它是否对即将发生的事件使用严格的 FIFO 列表，内部时钟分辨率是多少等）

# validation - 验证消息未使用 jsf 在对话框中呈现

> ID：16189736
> 
> 赞同：3
> 
> 时间：2013-04-24T10:33:48.220
> 
> 标签：validation, primefaces

```
 <p:dialog widgetVar="dlgEdit" header="Add New Status">
        <h:form id="editFrm">
            <h:panelGrid columns="3" id="pnlEdit">
                <p:outputLabel value="Status"/>
                <p:inputText id="txtStatus" required="true"/>
                    <p:message for="txtStatus" />
           </h:panelGrid>
    </p:dialog> 
```

这是一个不在对话框中呈现的 primefaces 消息标签。并且对话框隐藏在 onComplete 事件中..

```
 How can I RENDER validation message in DIALOG using jsf? 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T21:32:42.840

在您的提交按钮中添加这些条目

```
ajax="true" update=":#{p:component('message')}" oncomplete="if(!args.validationFailed)dlgEdit.hide();" 
```

这将在同一个对话框中打印您的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T00:46:23.563

Is it ok if your validation message is displayed in the parent page?

If yes, in that case you can throw a feedback error message. This will be picked up by the p:message in your parent page.

If no, please refer to this question below in this [link](https://stackoverflow.com/questions/16150728/pdialog-gets-closed-on-validation-error-of-a-submit-with-ajax-false-how-to-k) for dialog window with ajax=false situation.

# eclipse - primefaces 不适用于日食靛蓝

> ID：16189737
> 
> 赞同：0
> 
> 时间：2013-04-24T10:33:53.013
> 
> 标签：eclipse, jsf-2, primefaces

我正在使用 primefaces om eclipse indigo 做一些事情，我制作了一个动态 Web 项目并选择了项目方面并包含了 primefaces jar`primefaces-3.5.jar`我制作了一个新的 xhtml 页面并编写了一些代码来制作一个新的菜单栏，这是最后一页我跑：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"> 

<h:head></h:head> 
<h:body> 
<h:form>

<p:growl id="messages"/>

<h3>Default Menubar</h3>
<p:menubar>
    <p:submenu label="File" icon="ui-icon-document">
        <p:submenu label="New" icon="ui-icon-contact">
            <p:menuitem value="Project" url="#" />
            <p:menuitem value="Other" url="#" />
        </p:submenu>
        <p:menuitem value="Open" url="#" />
        <p:separator />
        <p:menuitem value="Quit" url="#" />
    </p:submenu>

    <p:submenu label="Edit" icon="ui-icon-pencil">
        <p:menuitem value="Undo" url="#" icon="ui-icon-arrowreturnthick-1-e" />
        <p:menuitem value="Redo" url="#" icon="ui-icon-arrowreturnthick-1-e" />
    </p:submenu>

    <p:submenu label="Help" icon="ui-icon-help">
        <p:menuitem value="Contents" url="#" />
        <p:submenu label="Search" icon="ui-icon-search">
            <p:submenu label="Text">
                <p:menuitem value="Workspace" url="#" />
            </p:submenu>
            <p:menuitem value="File" url="#" />
        </p:submenu>
    </p:submenu>

    <p:submenu label="Actions" icon="ui-icon-gear">
        <p:submenu label="Ajax" icon="ui-icon-refresh">
            <p:menuitem value="Save" actionListener="#{menuBean.save}" icon="ui-icon-disk" update="messages"/>
            <p:menuitem value="Update" actionListener="#{menuBean.update}" icon="ui-icon-arrowrefresh-1-w" update="messages"/>
        </p:submenu>
        <p:submenu label="Non-Ajax" icon="ui-icon-newwin">
            <p:menuitem value="Delete" actionListener="#{menuBean.delete}" icon="ui-icon-close" update="messages" ajax="false"/>
        </p:submenu>
    </p:submenu>

    <p:menuitem value="Quit" url="http://www.primefaces.org" icon="ui-icon-close" />

    <f:facet name="options">
        <p:inputText style="margin-right:10px"/>
        <p:commandButton type="button" value="Logout" icon="ui-icon-extlink" />
    </f:facet>
</p:menubar>
 </h:form>
 </h:body> 
 </html> 
```

页面的输出是：默认菜单栏注意我从主要面孔[教程页面获得这些样本](http://www.primefaces.org/showcase/ui/menubar.jsf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:08:50.930

显然，您没有在 webapp 的运行时类路径中正确包含 PrimeFaces JAR 文件。

以下是步骤（嗯，步骤），您需要在 Eclipse 的*动态 Web 项目*中执行，以便在 webapp 的运行时类路径中正确包含第 3 方 JAR 文件。

1.  将 JAR 文件直接放到项目的`/WEB-INF/lib`文件夹中。

就这样。

如果您曾经在项目的*构建路径*属性中摆弄以尝试实现/修复它，那么您需要绝对确保您将其全部撤消，否则它仍可能导致冲突/冲突。

# c++ - 如何避免 C++ 匿名对象

> ID：16189742
> 
> 赞同：17
> 
> 时间：2013-04-24T10:34:15.153
> 
> 标签：c++, g++

我有一个`ScopedLock`类可以帮助在超出范围时自动释放锁定。但是，问题是：有时团队成员会编写无效的锁定代码，例如

```
{
    ScopedLock(mutex);   // anonymous
    xxx;
} 
```

上面的代码是错误的，因为对象是**立即**`ScopedLock`构造和销毁的，所以未能锁定预期的区域（）。我希望编译器在尝试编译此类代码时给出错误。这可以做到吗？**`xxx`**

 **我已经搜索`g++`了警告选项，但找不到正确的选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T12:30:05.473

我在一个代码库中看到了一个有趣的技巧，但它仅在您的 scoped_lock 类型不是模板时才有效（std::scoped_lock 是）。

```
#define scoped_lock(x) static_assert(false, "you forgot the variable name") 
```

如果你正确地使用这个类，你有

```
scoped_lock lock(mutex); 
```

并且由于 scoped_lock 标识符后面没有打开括号，宏不会触发并且代码将保持原样。如果你写\

```
scoped_lock(mutex); 
```

宏将触发，代码将替换为

```
static_assert(false, "you forgot the variable name"); 
```

这将生成一条信息性消息。

如果您使用限定名称

```
threads::scoped_lock(mutext); 
```

那么结果仍然无法编译，但消息不会那么好。

当然，如果你的锁是一个模板，那么坏代码就是

```
scoped_lock<mutex_type>(mutex); 
```

这不会触发宏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T10:45:50.370

不，不幸**的是，没有办法做到这一点**，[正如我在去年的一篇博文中所探讨的那样](http://kera.name/articles/2012/05/when-is-a-scoped-lock-not-a-scoped-lock/)。

在其中，我得出结论：

> 我想这个故事的寓意是在使用s时记住*这个故事。*`scoped_lock`

* * *

您可以尝试强制团队中的所有程序员使用宏或 range-for 技巧，但是如果您能保证在每种情况下都能做到这一点，那么您也可以保证在每种情况下都能捕捉到这个错误。

您正在寻找一种方法来在发生此特定错误时以*编程*方式捕获它，但没有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-30T19:10:31.473

您可以使用同名的类和已删除函数。不幸的是，这需要在类型之前添加“类”关键字。

```
class Guard
{
public:
  explicit Guard(void)
  {
  }
};

static void Guard(void) = delete;

int main()
{
  // Guard(); // Won't compile
  // Guard g; // Won't compile
  class Guard g;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T10:42:46.243

To avoid this, introduce a macro which does this for you, always using the same name for the locker:

```
#define LOCK(mutex) ScopedLock _lock(mutex) 
```

Then use it like this:

```
{
    LOCK(mutex);
    xxx;
} 
```

* * *

As an alternative, Java's `synchronize` block can be simulated using a macro construct: In a for-loop running always exactly once, I instantiate such a locker in the initialization statement of the for-loop, so it gets destroyed when leaving the for-loop.

However, it has some pitfalls, unexpected behavior of a `break` statement being one example. This "hack" is introduced [here](http://www.codeproject.com/Articles/12362/A-quot-synchronized-quot-statement-for-C-like-in-J).

* * *

Of course, none of the above methods fully avoid accidental code like your example. But if you're used to write locking mutexes using one of the two macros, it will less likely happen. As the name of the locker class will then never appear in the code except in the macro definition, you can even introduce a commit hook in a version control system to avoid committing invalid code.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T10:36:44.867

AFAIK 在 gcc 中没有这样的标志。静态分析器可能更适合您的需求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-16T04:58:39.810

在 C++17 中，可以标记类型`[[nodiscard]]`，在这种情况下，鼓励对丢弃该类型值的表达式发出警告（包括此处描述的类似于变量声明的情况）。在 C++20 中，它也可以应用于单个构造函数，只要它们中的一些会导致此类问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T10:47:02.113

用宏替换它

```
#define CON2(x,y) x##y
#define CON(x,y) CON2(x,y)
#define LOCK(x)  ScopedLock CON(unique_,__COUNTER__)(mutex) 
```

用法

```
{
  LOCK(mutex);
  //do stuff
} 
```

此宏将为锁生成唯一名称，允许锁定内部范围内的其他互斥锁**

# python - 如何组合两个 Python 脚本？

> ID：16189743
> 
> 赞同：1
> 
> 时间：2013-04-24T10:34:23.537
> 
> 标签：python, list, text-files

我想将 2 个 Python 脚本组合成 1 个脚本，因为它会更容易运行。最简单的方法是什么？

脚本 1：打开一个文本文件并将所需的字符串写入输出文件。

```
#!/usr/bin/env python

with open("mylist.txt") as f:
    with open("output1.txt", "w") as f1:
        for line in f:
            if "[Running] groups/" in line or "[FAILED!] groups/" in line:
                f1.write(line) 
```

脚本 2：打开脚本 1 保存的文本文件并用其他内容替换 2 个字符串并保存输出。

```
infile = "output1.txt"
outfile = "output2.txt"

delete_list = ["[Running]", "[FAILED!]"]
fin = open(infile)
fout = open(outfile, "w+")
for line in fin:
    for word in delete_list:
        line = line.replace(word, "link_to_path")
           fout.write(line)
fin.close()
fout.close() 
```

所以脚本应该读取文本文件，只复制所需的字符串，然后用不同的字符串替换它们并将它们保存在文本文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:00:29.707

将您的代码放入函数中，然后使用 if __name__ == '__main__' 块以适当的顺序运行适当的方法。以下函数的内容没有任何变化：

```
def create_list():
    with open("mylist.txt") as f:
        with open("output1.txt", "w") as f1:
            for line in f:
                if "[Running] groups/" in line or "[FAILED!] groups/" in line:
                    f1.write(line) 

def modify_list():
    infile = "output1.txt"
    outfile = "output2.txt"

    delete_list = ["[Running]", "[FAILED!]"]
    fin = open(infile)
    fout = open(outfile, "w+")
    for line in fin:
        for word in delete_list:
            line = line.replace(word, "link_to_path")
               fout.write(line)
    fin.close()
    fout.close()

if __name__ == '__main__':
    create_list()
    modify_list() 
```

如果您有时需要完全使用不同的序列，但具有相同的基本操作，您可以从另一个脚本导入脚本并运行不同的功能组合：

```
import myscript
# this script only creates the list, not modifying it at all

if __name__ == '__main__':
    myscript.create_list() 
```

转换为函数应该让您考虑在您的脚本中可以使哪些内容更灵活。例如，您是否需要对“output1.txt”和“output2.txt”进行硬编码？也许它们可以作为函数的参数？例如，您将能够传入从命令行获得的参数。然后，您可以在运行脚本时而不是在编写脚本时决定文件名。

看起来很奇怪的“if __name__ == '__main__'”习语允许您编写一个既可以作为程序运行又可以用作库的脚本。如果您将脚本作为程序运行，则该块运行。如果您从另一个脚本导入它，它不会 - 因此您可以使用您在脚本中定义的基本构建块来做其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:47:07.967

为了更高效、更简洁的代码，您不需要将包含 12 行和 7 行代码的部分分离到文件中！在一个类中实现它以获得干净的代码！总比分开好。如果您拒绝，您可以导入另一个文件，例如使用`import script2`. 但是您导入的代码应该是方法或类！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T10:53:04.630

```
#!/usr/bin/env python

delete_list = ["[Running]", "[FAILED!]"]

with open("mylist.txt") as f:
     with open("output1.txt", "w") as f1:
        with open("output2.txt", "w") as f2:
            for line in f:
                 if "[Running] groups/" in line or "[FAILED!] groups/" in line:
                    f1.write(line)
                    for word in delete_list: 
                        line = line.replace(word, "link_to_path")
                    f2.write(line) 
```

# string - 在汇编中，我想搜索一个字符串，替换一个单词，然后显示新字符串

> ID：16189745
> 
> 赞同：2
> 
> 时间：2013-04-24T10:34:26.100
> 
> 标签：string, assembly, x86

我正在学习汇编课程，并且我已经写出了大部分程序，我只是在替换单词和显示新字符串时遇到了麻烦。该问题要求一个句子，一个要查找的单词以及一个替换它的单词。程序扫描字符串，替换单词的任何实例，并向您显示新字符串。
示例：“天空是蓝色的。” 查找单词：“sky” 替换它的单词：“ocean” 新字符串：“海洋是蓝色的。”

这是我到目前为止所拥有的：

```
.586
.MODEL FLAT

INCLUDE io.h            ; header file for input/output

.STACK 4096

.DATA
prompt1 BYTE    "String to Search: ", 0
prompt2 BYTE    "Word to Search For: ", 0
prompt3 BYTE    "Word to replace with: ", 0
target  BYTE    80 DUP (?)
key     BYTE    80 DUP (?)
strSub  BYTE    80 DUP (?)
trgtLength  DWORD   ?
keyLength   DWORD   ?
lastPosn    DWORD   ?
strSubLen   DWORD   ?
resultLbl BYTE  "The new sentence is: ", 0

.CODE
_MainProc PROC
    input prompt1, target, 80   ;input target string
    lea eax, target             ;address of target
    push eax                    ;parameter
    call strlen                 ;strlen(target)
    add esp, 4                  ;remove parameter
    mov trgtLength, eax         ;save length of target
    input prompt2, key, 80      ;input key string
    lea eax, key                ;address of key
    push eax                    ;parameter
    call strlen                 ;strlen(key)
    add esp, 4                  ;remove parameter
    mov keyLength, eax          ;save length of key
    input prompt3, strSub, 80   ;input word to search for
            lea eax, strSub             ;address of key
    push eax                    ;parameter
    call strlen                 ;strlen(strSub)
    add esp, 4                  ;remove parameter
    mov strSubLen, eax          ;save length of key

    mov eax, trgtLength
    sub eax, keyLength
    inc eax                     ;trgtLength - keyLength +1
    mov lastPosn, eax
    cld                         ;Left to Right comparison
    mov eax, 1                  ;starting position

    whilePosn:
        cmp eax, lastPosn       ;position <= last_posn?
        jnle endWhilePosn       ;exit if past last position

        lea esi, target         ;address of target string
        add esi, eax            ;add position
        dec esi                 ;address of position to check
        lea edi, key            ;address of key
        mov ecx, keyLength      ;number of position to check
        repe cmpsb              ;check
        jz found                ;exit of success
        inc eax                 ;increment position
        jmp whilePosn           ;repeat

    endWhilePosn:
        output resultLbl, [esi] ;display new sentence
        jmp quit

    found:
        sub edi, keyLength
        mov ecx, strSubLen
        lea esi, strSub
        cld
        rep movsb
        inc eax
        jmp whilePosn

    quit:
        mov     eax, 0  ; exit with return code 0
        ret
_MainProc ENDP

strlen  PROC
push ebp                    ;establish stack frame
mov ebp, esp
push ebx                    ;save EBX
sub eax, eax                ;length := 0
mov ebx, [ebp+8]            ;address of string

whileChar:
cmp BYTE PTR [ebx], 0       ;null byte?
je endWhileChar             ;exit if so
inc eax                     ;increment length
inc ebx                     ;point at next character
jmp whileChar               ;repeat

endWhileChar:
pop ebx                     ;restore registers
pop ebp
ret
strlen  ENDP
END 
```

该代码可以找到我想要切换的单词，但实际上切换单词是在欺骗我。这本书说目标字符串应该在 EDI 中，要替换的单词应该在 ESI 中，但是他们作为示例给出的代码在 ESI 中具有目标字符串，在 EDI 中替换单词（就像我在这里一样）。

这本书在解释“rep”和“movs”指令方面也做得非常糟糕，所以我有 90% 的把握我的“找到”代码块将是问题所在。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:00:57.620

在 x86 汇编中处理字符串时，必须快速掌握`rep`指令。如果没有，您可能会在您的第一个程序完成之前去世。

可以在[此处](http://www.dreamincode.net/forums/topic/228774-masm-using-string-instructions/)（或[此处](http://www.plantation-productions.com/Webster/www.artofasm.com/Windows/HTML/StringInstructions.html)）找到有关汇编中字符串操作的非常好的介绍，但您真正需要的是以下内容：

*   [`rep stosb`](http://faydoc.tripod.com/cpu/stosb.htm): 存储字符串
*   [`rep scas`](http://faydoc.tripod.com/cpu/scas.htm): 扫描字符串
*   [`rep cmpsb`](http://faydoc.tripod.com/cpu/cmpsb.htm): 比较字符串

# php - 替换从mysql中的数字开始的列数据

> ID：16189749
> 
> 赞同：1
> 
> 时间：2013-04-24T10:34:45.463
> 
> 标签：php, mysql

我有一个表我有 r 3 列`comp_no` `comp_area` `comp_post_code`

现在 comp_area 应该有那个地方的区域，比如多伦多、温哥华、温尼伯......

但是大约有 2,290 个条目是错误的，并且其中包含 comp_no `17310 111 Ave NW`，`205 Main St`依此类推。我想删除这 2,290 个条目并用 0 替换它们

我正在使用它来查找这些列

```
SELECT * 
FROM  `canada_database` 
WHERE comp_area !=  ''
AND comp_area NOT REGEXP  '^[[:alpha:]]'
ORDER BY slno ASC 
LIMIT 0 , 30 
```

可以用mysql查询完成吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:40:31.717

```
UPDATE `canada_database` 
SET comp_area =  '0'
WHERE comp_area !=  ''
AND comp_area NOT REGEXP  '^[[:alpha:]]' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:38:49.320

试试这个查询

```
UPDATE `canada_database` 
SET comp_area = 0
WHERE id IN (
    SELECT GROUP_CONCAT(id)
    FROM  `canada_database` 
    WHERE comp_area !=  ''
    AND comp_area NOT REGEXP  '^[[:alpha:]]'
) 
```

# c - 指向具有替代答案的结构的指针

> ID：16189750
> 
> 赞同：0
> 
> 时间：2013-04-24T10:34:48.780
> 
> 标签：c, pointers

我这里有代码流。请`trchDl1p7kbps.trchDetail[0]->trchNo = 0;`在以下代码中给我替代解决方案

```
struct trchParam_ 
    {
    unsigned int trchNo;
    };
typedef struct trchParam_ trchParam;

struct trchDetail_
    {
    trchParam **trchDetail;
    };
typedef struct trchDetail_ trchDetail;

int main(void)
{
            trchDetail trchDl1p7kbps;
        trchDl1p7kbps.trchDetail = (trchParam **)malloc(sizeof(trchParam **) * 1);
        *trchDl1p7kbps.trchDetail = (trchParam *)malloc(sizeof(trchParam *));
            trchDl1p7kbps.trchDetail[0]->trchNo = 0;
} 
```

如何避免数组表示法？我可以在这里使用`pointer`( `*`) 代替`[]`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:21:41.770

是的你可以，

```
trchDl1p7kbps.trchDetail[0]->trchNo 
```

相当于：

```
(*trchDl1p7kbps.trchDetail)->trchNo 
```

这也相当于

```
(**trchDl1p7kbps.trchDetail).trchNo 
```

并且没有与结构取消引用运算符等效的*结构双重取消引用**运算*符`->`，因此您必须选择其中一种表示法。

# php - 使用 PHP 和 nginx X-Accel-Redirect 提供大文件

> ID：16189758
> 
> 赞同：6
> 
> 时间：2013-04-24T10:35:03.873
> 
> 标签：php, nginx

您好我希望用户能够从我的配置有 nginx PHP 的服务器（Windows）下载 PDF 文件。这是我的 nginx.conf（服务器块）

```
http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile      on;
    keepalive_timeout  65;
    server {
        listen       80;
        server_name  localhost;
        location / {
            root   html;
            index  index.php;

        }

         location /download {
            internal;
            alias /protected;
        }
    }
} 
```

..和 PHP 文件（标题部分）

```
$file = '/download/real-pdf-file.pdf'; //this is the physical file path
$filename = 'user-pdf-file.pdf'; //this is the file name user will get
header('Cache-Control: public, must-revalidate');
header('Pragma: no-cache');
header('Content-Type: application\pdf');
header('Content-Length: ' .(string)(filesize($file)) );
header('Content-Disposition: attachment; filename='.$filename.'');
header('Content-Transfer-Encoding: binary');
header('X-Accel-Redirect: '. $file); 
```

该文件是从 URL 调用的，如下所示：

```
download.php?id=a2a9ca5bd4a84294b421fdd9ef5e438ded7fcb09 
```

我从这里尝试了几个示例/解决方案，但到目前为止没有一个有效。该文件很大（每个在 250 到 400 MB 之间），每个用户将能够下载 4 个文件。

使用 PHP 下载部分没有问题，只有似乎不起作用的 nginx 配置。未检测到错误日志。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T15:51:05.170

好的 - 这里有几个问题：

1)根据 nginx 开发人员的说法，将root 放在一个位置内是一个[坏主意。](http://wiki.nginx.org/Pitfalls#Root_inside_Location_Block)

2) 用于告诉 Nginx 这是内部重定向的内部 URL 不应暴露给用户。

3) 我看不到您的 download.php 文件是从哪里提供的，所以我将您的根位置块更改为使用 try_files，因此该文件而不是 index.php 将提供对 /download.php 的请求。

您的项目应布置为：

```
project\
    html - this is the root of your website
    protected  - this directory is not accessible directly 
```

您的 Nginx 配置文件应如下所示：

```
http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile      on;
    keepalive_timeout  65;
    server {
        listen       80;
        server_name  localhost;

        root   /path/to/project/html;

        location / {
            try_files $uri /index.php?$args;
        }

        location /protected_files {
            internal;
            alias /path/to/project/protected;
        }
    }
} 
```

不要重复使用相同的名称来表示不同的东西是个好主意，因为这很容易混淆。我已经更改了它们，现在`protected`只指包含您要提供的文件的实际物理目录。`protected_files`只是一个字符串，它允许 Nginx 匹配来自 x-accel 标头的请求。

在 PHP 代码中唯一需要更改的是使用正确的字符串来允许 Nginx 获取内部位置：

```
$aliasedFile = '/download/real-pdf-file.pdf'; //this is the nginx alias of the file path
$realFile = '/path/to/project/protected/real-pdf-file.pdf'; //this is the physical file path
$filename = 'user-pdf-file.pdf'; //this is the file name user will get
header('Cache-Control: public, must-revalidate');
header('Pragma: no-cache');
header('Content-Type: application\pdf');
header('Content-Length: ' .(string)(filesize($realFile)) );
header('Content-Disposition: attachment; filename='.$filename.'');
header('Content-Transfer-Encoding: binary');
header('X-Accel-Redirect: '. $aliasedFile);
exit(0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T09:07:46.643

根据 Danack 的建议和解决方案以及 Carsten 的一些澄清，我发现在 Windows Serve 中，我们需要在别名中设置完整路径，如下所示：

```
location /protected_files {
            internal;
            alias C:/absolute/path/to/project/protected/;
        } 
```

请注意，需要额外的正斜杠（在我的例子中，Windows 7 Pro 用于开发，Windows Server 2008 用于部署）。唯一的问题是现在我需要测试并发下载以查看服务器资源是否占用。

我是 nginx 的新手，因为从 Apache 切换似乎真的更快。谢谢大佬不吝赐教！我很高兴成为 Stackoverflow 社区的一员 :)

# wolfram-mathematica - 如何加快一个巨大函数的计算时间（500+ 项）

> ID：16189763
> 
> 赞同：2
> 
> 时间：2013-04-24T10:35:26.573
> 
> 标签：wolfram-mathematica

我有一个具有大量项（500+）的函数（3 个空间维度 + 1 个维度时间）：它主要是许多指数函数的总和。

当然，我需要计算更多次。现在我使用的是一个编译的表格，然后是一个类似的 ParallelTable（funcx、funy 和 funz 是涉及许多术语的函数）：

```
 MyFuncCompiled=Compile[{{x, _Real}, {y, _Real}, {z, _Real}, {t111, _Real}},Chop[(Funcx[x, y, z, t111] + Funcy[x, y, z, t111] + Funcz[x, y, z, t111])/3],Parallelization -> True, CompilationTarget -> "C"];

  ParallelTable[MyFuncCompiled[i, j, k, h]; {i, -Pi/2, 3 Pi/2 - Step, Step}, {j, -Pi/2,3 Pi/2 - Step, Step}, {k, Pi/2, 5 Pi/2 - Step, Step}, {h, -16, 16,8}]; 
```

我已经尝试过 Simplify 和 FullSimplfy （在 Funcx ... 函数上），但没有简化。

你有什么建议吗？谢谢

# postgresql - PostgreSQL 统计模式值

> ID：16189768
> 
> 赞同：3
> 
> 时间：2013-04-24T10:35:31.033
> 
> 标签：postgresql, statistics

我正在使用 SQL 查询

```
 SELECT round(avg(int_value)) AS modal_value FROM t; 
```

获得[模态值](http://en.wikipedia.org/wiki/Mode_%28statistics%29)，当然，这不是正确的，而是显示某些结果的第一选择。

所以，我的问题是，“**如何正确地做这件事？** ”。

* * *

使用 PostgreSQL 8.3+，我们**可以使用[这个用户定义的聚合](http://wiki.postgresql.org/wiki/Aggregate_Mode)**来定义*模式*：

```
CREATE FUNCTION _final_mode(anyarray) RETURNS anyelement AS $f$
    SELECT a FROM unnest($1) a
    GROUP BY 1  ORDER BY COUNT(1) DESC, 1
    LIMIT 1;
$f$ LANGUAGE 'sql' IMMUTABLE;
CREATE AGGREGATE mode(anyelement) (
  SFUNC=array_append,  STYPE=anyarray,
  FINALFUNC=_final_mode, INITCOND='{}'
); 
```

但是，作为用户定义的平均值，使用大表可能会很慢（将 sum/count 与内置 AVG 函数进行比较）。 **使用 PostgreSQL 9+，没有直接（内置）函数来计算*统计模式*值吗？** 也许使用`pg_stats`...**如何做**类似的事情

```
 SELECT (most_common_vals(int_value))[1] AS modal_value FROM t; 
```

pg_stats VIEW 可以用于这种任务（甚至一次，手动）[？](http://www.postgresql.org/docs/9.0/static/view-pg-stats.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-12-11T14:45:05.797

从 PostgreSQL 9.4 开始，有一个内置的聚合函数`mode`。它像

```
SELECT mode() WITHIN GROUP (ORDER BY some_value) AS modal_value FROM tbl; 
```

在此处阅读有关有序集聚合函数的更多信息：

[36.10.3。有序集聚合](https://www.postgresql.org/docs/current/static/xaggr.html)

[内置有序集聚合函数](https://www.postgresql.org/docs/current/static/functions-aggregate.html#FUNCTIONS-ORDEREDSET-TABLE)

请参阅处理旧版本 Postgres 的其他答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:15:58.767

If you want to do it by groups:

```
select
    int_value * 10 / (select max(int_value) from t) g,
    min(int_value) "from",
    max(int_value) "to",
    count(*) total
from t
group by 1
order by 4 desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:23:29.187

您可以尝试以下方法：

```
SELECT int_value, count(*)
FROM t
GROUP BY int_value
ORDER BY count(*) DESC
LIMIT 1; 
```

它背后的想法 - 你得到每个的计数`int_value`，然后对它们进行排序（以便最大的排`count`在第一位），然后`LIMIT`只查询第一行，只获得`int_value`最高计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T13:07:18.863

该模式具有最大的价值，所以我sobreescrevi我在[这里](https://wiki.postgresql.org/wiki/Aggregate_Mode)找到的功能，我做了这个：

```
CREATE OR REPLACE FUNCTION _final_mode(anyarray)
  RETURNS anyelement AS
    $BODY$
    SELECT 
        CASE 
            WHEN t1.cnt <> t2.cnt THEN t1.a 
            ELSE NULL 
        END
        FROM
            (SELECT a, COUNT(*) AS cnt
             FROM unnest($1) a
             WHERE a IS NOT NULL
             GROUP BY 1 
             ORDER BY COUNT(*) DESC, 1
             LIMIT 1
            ) as t1, 
            (SELECT a,
             COUNT(*) AS cnt
             FROM unnest($1) a
             WHERE a IS NOT NULL
             GROUP BY 1 
             ORDER BY COUNT(*) DESC, 1
             LIMIT 2 OFFSET 1
            ) as t2
    $BODY$
LANGUAGE 'sql' IMMUTABLE;

-- Tell Postgres how to use our aggregate
CREATE AGGREGATE mode(anyelement) (
  SFUNC=array_append, --Function to call for each row. Just builds the array
  STYPE=anyarray,
  FINALFUNC=_final_mode, --Function to call after everything has been added to array
  INITCOND='{}' --Initialize an empty array when starting
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T03:05:25.003

在问题介绍中，我用一个好的 SQL 编码解决方案引用了[这个链接](http://wiki.postgresql.org/wiki/Aggregate_Mode)（@IgorRomanchenko 在这个答案中使用了相同的算法）。@ClodoaldoNeto 显示了一个“新解决方案”，但正如我评论的那样，它适用于[标量和度量](http://en.wikipedia.org/wiki/Scalar_(mathematics))，而不是当前问题的答案。

粘贴了 2 个月和 ~40Views，*没有新问题*...

## 结论

仅使用此页面和引用链接的信息（以及没有进一步信息的证据）得出结论。概括：

1.  用户定义的聚合`mode()`就足够了，我们不需要内置（编译）版本。

2.  没有用于优化的基础设施，内置的东西比用户定义的要好。

* * *

我在上下文中测试了[引用的 SQL 聚合函数](http://wiki.postgresql.org/wiki/Aggregate_Mode)

```
SELECT mode(some_value) AS modal_value FROM t; 
```

而且，在我的测试中，它很快......所以，不能证明“内置函数”（如`STATS_MODE`Oracle），仅在“统计包”需求上下文中 - 但如果你会花时间和内存来安装我建议[`R`语言](http://www.joeconway.com/plr/)的东西。

另一个隐含的问题是关于“准备”或使用一些 PostgreSQL 基础设施（如[pg_stats](http://www.postgresql.org/docs/9.0/static/view-pg-stats.html)）的统计包......“规范答案”的一个很好的线索是@IgorRomanchenko 的评论：“ `pg_stat`（......）仅包含估计值，而不是确切值”。所以，模式功能不能像我想象的那样利用基础设施。

注意：我们必须记住，对于“模态间隔”，我们可以使用另一个函数，请参阅@ClodoaldoNeto 的答案。

# abap - 是否可以在下载功能中不显示对话框

> ID：16189769
> 
> 赞同：3
> 
> 时间：2013-04-24T10:35:32.510
> 
> 标签：abap

我正在使用 abap 的“**下载**”功能将某些内容下载为 txt 文件。但是“下载”功能会显示一些对话框，显示文件正在下载的位置，并询问是否有另一个同名的文件要替换。

该函数有一个***静默****参数可以导入，但是当我为其分配“m”*或*“s”*或*“x”*时，它不会改变任何东西。

这就是我所做的；

```
CALL FUNCTION 'DOWNLOAD'
  EXPORTING
    filename = fn
    filetype = 'ASC'
    silent   = 'M'
  TABLES
    data_tab = itab. 
```

GUI_DOWNLOAD（已过时）没有对话框是可以的，但我不能使“下载”功能静音。任何人都知道如何实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:51:33.143

而不是你提到的功能模块，你应该使用 class 的方法`cl_gui_frontend_services`。

以下代码段显示了对`cl_gui_frontend_services=>gui_download`.

```
types: t_line type c length 100.
data: lt_tab type table of t_line.
append 'test' to lt_tab.

call method cl_gui_frontend_services=>gui_download
  exporting
    filename = 'C:\temp\file.txt'
  changing
    data_tab = lt_tab[]. 
```

这会将文件下载到指定位置，而不会出现对话框。如果您选择显示文件选择对话框，有`cl_gui_frontend_services=>file_open_dialog`或`cl_gui_frontend_services=>file_save_dialog`。

**笔记：**

1.  您应该检查方法调用的返回码。为简洁起见，我在这里省略了它们，但不包含它们可能会导致短暂的转储。

# c - n 个 1 使用二元运算

> ID：16189775
> 
> 赞同：1
> 
> 时间：2013-04-24T10:35:52.933
> 
> 标签：c, binary, numbers

有什么方法可以 仅使用这些二进制运算（, , , , , , , ）来获取 s 的`n`数量，输入在哪里？`1``!``~``&``^``|``+``<<``>>``n`

例子，

```
n ---> output
0 ---> 0000
1 ---> 0001
2 ---> 0011
3 ---> 0111
4 ---> 1111
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:38:49.553

你可以这样做：

```
// Since "-" is not on your list while "+" is, I'll add negative 1
// using `~0`; this assumes that your computer uses 2's complement
// representation of negative numbers.
(1 << n) + ~0; 
```

这个想法是`1 << n`产生两个的幂：`1`, `10`, `100`, `1000`, 等等。添加一个负数会产生`2^n-1`，这就是您的模式所代表的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:56:17.177

是的。你可以做

`~(~(1<<n) + 1)`

例子：

假设 n 为 2。

1.  ~(~(1<<2) + 1)

2.  〜（〜（100）+ 1）

3.  〜（111..1011 + 1）

4.  〜（111..1100）

    = 11

# c# - 如何备份完整的文件？

> ID：16189778
> 
> 赞同：0
> 
> 时间：2013-04-24T10:35:59.557
> 
> 标签：c#, backup

在程序中打开文件时备份文件的最有效方法是什么，以便当用户更改并保存它时，总有办法返回？

例子：

```
 private void open_click(object sender, EventArgs e)
    {
        ofd.DefaultExt = "";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            fileIn = ofd.FileName;
            fileOut = Path.GetTempFileName();
            string encoded = File.ReadAllText(fileIn);
    etc. etc. etc
} 
```

加载到程序中的文件需要备份为 backup_01 并放在与原始文件相同的文件夹中。当backup_01存在时，备份为backup_02，以此类推）。

例子非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:47:37.383

我通常会创建文件本身的副本，将其放在“备份”文件夹中，并对其应用一些命名方案以指示其年龄。

例如：`folder/originalFile.xyz`==>`folder/backup/originalFile_2013-04-14-12-48.bak`

更新/事后思考：我认为这将取决于执行复制操作的操作系统，但一般来说应该不会太糟糕。除非您有充分的理由这样做，否则我会避免尝试添加额外的逻辑以更有效地执行此操作。

*更新以回应评论*：

我不会在这里提供详细的实现，但我会尝试为您指出正确的方向：查看**[System.IO.File](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)**，特别是方法`Copy`和`Exists`. （[这个其他常见 IO 任务的列表](http://msdn.microsoft.com/en-us/library/ms404278.aspx)也可能有用）

有了这些，您应该能够检查文件是否存在（例如，如果您`backup_1.xyz`的备份文件夹中已经有“”），并在此基础上为您的下一个备份文件生成一个新名称。

创建一个循环，`1`用递增的数字替换，直到找到“空闲”文件名，然后将原始文件复制到具有该名称的新文件中。

祝你好运！:)

# core-audio - 持续噪音的远程 IO 播放

> ID：16189781
> 
> 赞同：1
> 
> 时间：2013-04-24T10:36:07.413
> 
> 标签：core-audio

伙计们！我在使用远程 IO 播放流音频时遇到问题。我在放入之前验证了 PCM 帧数据，它是正确的。所以我很困惑。你能帮帮我吗？非常感谢！下面是我的代码。-

```
(void)initializeAudioPlay
    {
        OSStatus status;

        // Describe audio component
        AudioComponentDescription desc;
        desc.componentType = kAudioUnitType_Output;
        desc.componentSubType = kAudioUnitSubType_RemoteIO;
        desc.componentFlags = 0;
        desc.componentFlagsMask = 0;
        desc.componentManufacturer = kAudioUnitManufacturer_Apple;

        // Get component
        AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);

        // Get audio units
        status = AudioComponentInstanceNew(inputComponent, &audioPlayUnit);
        [self checkStatus:status];

        // Enable IO for playback
        UInt32 flag = 1;
        //kAUVoiceIOProperty_VoiceProcessingEnableAGC
        status = AudioUnitSetProperty(audioPlayUnit, kAudioOutputUnitProperty_EnableIO,
                                      kAudioUnitScope_Input, kOutputBus, &flag, sizeof(flag));
        [self checkStatus:status];

        // Describe format
        AudioStreamBasicDescription audioFormat;
        memset(&audioFormat, 0, sizeof(audioFormat));
        audioFormat.mSampleRate         = 8000;
        audioFormat.mFormatID           = kAudioFormatLinearPCM;
        audioFormat.mFormatFlags        = kAudioFormatFlagsCanonical;//kAudioFormatFlagIsNonInterleaved | kAudioFormatFlagIsSignedInteger;
        /*kAudioFormatFlagsCanonical
        | (kAudioUnitSampleFractionBits << kLinearPCMFormatFlagsSampleFractionShift)*/
        audioFormat.mFramesPerPacket    = 1;
        audioFormat.mChannelsPerFrame   = 1;
        audioFormat.mBitsPerChannel     = 16;
        audioFormat.mBytesPerFrame      = (audioFormat.mBitsPerChannel/8) * audioFormat.mChannelsPerFrame;
        audioFormat.mBytesPerPacket     = audioFormat.mBytesPerFrame;

        // Apply format
        status = AudioUnitSetProperty(audioPlayUnit,
                                      kAudioUnitProperty_StreamFormat,
                                      kAudioUnitScope_Input,
                                      kOutputBus,
                                      &audioFormat,
                                      sizeof(audioFormat));

        [self checkStatus:status];

        float value = (float)10 / 255.0;

        AudioUnitSetParameter(audioPlayUnit, kAudioUnitParameterUnit_LinearGain, kAudioUnitScope_Input, 0, value, 0);

        AudioChannelLayout          new_layout;
        new_layout.mChannelLayoutTag = kAudioChannelLayoutTag_Mono;
        AudioUnitSetProperty( audioPlayUnit,
                             kAudioUnitProperty_AudioChannelLayout,
                             kAudioUnitScope_Global,
                             0, &new_layout, sizeof(new_layout) );

        UInt32 bypassEffect = kAudioUnitProperty_RenderQuality;
        status = AudioUnitSetProperty(audioPlayUnit,
                                   kAudioUnitProperty_RenderQuality,
                                   kAudioUnitScope_Global,
                                   0,
                                   &bypassEffect,
                                   sizeof(bypassEffect));
        [self checkStatus:status];

        // Set output callback
        AURenderCallbackStruct callbackStruct;
        callbackStruct.inputProc = playCallback;
        callbackStruct.inputProcRefCon = self;
        status = AudioUnitSetProperty(audioPlayUnit,
                                      kAudioUnitProperty_SetRenderCallback,
                                      kAudioUnitScope_Input,
                                      kOutputBus,
                                      &callbackStruct,
                                      sizeof(callbackStruct));
        [self checkStatus:status];

        flag = 0;

        // Initialize
        status = AudioUnitInitialize(audioPlayUnit);
        [self checkStatus:status];
        DGLog(@"audio play unit initialize = %d", status);
        circularBuf = [[CircularBuf alloc] initWithBufLen:kBufferLength];
       /*
        AudioSessionInitialize(NULL, NULL, NULL, NULL);

        Float64 rate =32000.0;
        AudioSessionSetProperty(kAudioSessionProperty_PreferredHardwareSampleRate, sizeof(rate), &rate);

        Float32 volume=20.0;
        UInt32 size = sizeof(Float32);
        AudioSessionSetProperty(
                                kAudioSessionProperty_PreferredHardwareIOBufferDuration,
                                &size, &volume);

        //float aBufferLength = 0.185759637188209;

        //AudioSessionSetProperty(kAudioSessionProperty_PreferredHardwareIOBufferDuration, sizeof(aBufferLength), &aBufferLength);

        AudioSessionSetActive(YES);
        */
        AudioSessionInitialize(NULL, NULL, NULL, nil);
        AudioSessionSetActive(true);

        UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback ;
        /* for Iphone we need to do this to route the audio to speaker */
        status= AudioSessionSetProperty (
                                         kAudioSessionProperty_AudioCategory,
                                         sizeof (sessionCategory),
                                         &sessionCategory
                                         );
        //NSLog(@"Error: %d", status);
    //    
    //  UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
    //  status = AudioSessionSetProperty (
    //                                      kAudioSessionProperty_OverrideAudioRoute,
    //                                      sizeof (audioRouteOverride),
    //                                      &audioRouteOverride);

        UInt32 audioMixed = 1;
        status = AudioSessionSetProperty (
                                          kAudioSessionProperty_OverrideCategoryMixWithOthers,
                                          sizeof (audioMixed),
                                          &audioMixed);
    }

    - (void)processAudio:(AudioBuffer *)buffer
    {
        short pcmTemp[160];
        unsigned char * amrBuffer=NULL;
        AudioUnitSampleType sample;
        int i = 0;
        int j = 0;

        if ([circularBuf isReadTwoRegion]) {
            amrBuffer = [circularBuf ReadData];
        } else {
            amrBuffer = [circularBuf ReadData];
            i = [circularBuf ReadPos];
        }
        j = i + circularBuf.Length;

        if (j - i >= 320) {

            memcpy((void*)pcmTemp, (void*)amrBuffer, 320);
            for(i=0; i<160; i++)
            {
                sample = 3.162277*pcmTemp[i];//10db
                if(sample > 32767)sample = 32767;
                else if(sample < -32768)sample = -32768;

                buffData[i] = sample;
            }

            memcpy(buffer->mData, buffData, buffer->mDataByteSize);

            [circularBuf AdvanceReadPos:320];
        }
        else
        {

            memset(buffer->mData, 0, buffer->mDataByteSize);
        }
    }

    /**
     This callback is called when the audioUnit needs new data to play through the
     speakers. If you don't have any, just don't write anything in the buffers
     */
    static OSStatus playCallback(void *inRefCon,
                                 AudioUnitRenderActionFlags *ioActionFlags,
                                 const AudioTimeStamp *inTimeStamp,
                                 UInt32 inBusNumber,
                                 UInt32 inNumberFrames,
                                 AudioBufferList *ioData) {
        // Notes: ioData contains buffers (may be more than one!)
        // Fill them up as much as you can. Remember to set the size value in each buffer to match how
        // much data is in the buffer.
        AudioPlay *audioPlay = (AudioPlay *)inRefCon;

        for ( int i=0; i < ioData->mNumberBuffers; i++ ) {
            memset(ioData->mBuffers[i].mData, 0, ioData->mBuffers[i].mDataByteSize);
        }
        ioData->mBuffers[0].mNumberChannels = 1;

        [audioPlay processAudio:&ioData->mBuffers[0]];
        return noErr;
    } 
```

# mysql - 如何将数据库从 Postgres 迁移到 MySQL？

> ID：16189784
> 
> 赞同：11
> 
> 时间：2013-04-24T10:36:13.270
> 
> 标签：mysql, postgresql, migration

我想将一些表从 Postgres 数据库转换为 MySQL。理想情况下，我想创建一个脚本，将 PG 的表转换为 MySQL，但我很高兴我们能够弄清楚如何以不可编写脚本的方式使其成为可能。

首先，我在这里读过类似的帖子：[将数据库从 Postgres 迁移到 MySQL](https://stackoverflow.com/questions/5909223/migrate-database-from-postgres-to-mysql)

我已经尝试了那里提出的两种解决方案，但他们没有成功。

重要的是要说**我要迁移结构和数据。**

但首先，这是 postgres 数据库的 SQL 转储：

```
--
-- PostgreSQL database dump
--

SET statement_timeout = 0; SET client_encoding = 'UTF8'; SET standard_conforming_strings = off; SET check_function_bodies = false; SET client_min_messages = warning; SET escape_string_warning = off;

SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: grupos; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE grupos (
    "dirGrupo" text,
    valor real,
    "flagIntelli" boolean DEFAULT false,
    "flagQDS" boolean DEFAULT false,
    finalidad text,
    "idGrupo" integer DEFAULT nextval('"idGrupo"'::regclass) NOT NULL,
    "claseDomo" text,
    instalado boolean DEFAULT true NOT NULL,
    "codCasa" "char",
    "codUnidad" integer,
    protocolo text NOT NULL,
    escritura boolean,
    dispositivo text,
    "tipoDatos" oid,
    "coordX" integer DEFAULT (-1),
    "coordY" integer DEFAULT (-1),
    mapa text,
    "reglasAsociadas" text );

ALTER TABLE public.grupos OWNER TO postgres;

--
-- Data for Name: grupos; Type: TABLE DATA; Schema: public; Owner: postgres
--

INSERT INTO grupos VALUES (NULL, 0, false, false, 'sensor', 10, 'LightSensor', true, 'E', 1, 'x10', false, 'SensorLum1', 7, -1, -1, NULL, NULL); INSERT INTO grupos VALUES (NULL, 0, false, false, 'luz', 11, 'SimpleLamp', true, 'K', 1, 'x10', true, 'Luz4', 1, -1, -1, NULL, NULL); INSERT INTO grupos VALUES (NULL, 0, false, false, 'Radiador de la sala', 298, 'Heater', true, 'B', 1, 'x10', true, 'RadiadorX10', 1, 163, 168, 'Sala Quercus', '108;111;115;117;119;123;127;131;134;136;138;140;144;148;150;152;155;157;159;162;166;169;172;176;179;182;185;188;190;193;196;199;201;205;209;214;218;222;226;230;234;238;250;254;260;264;277;278;279;280;284;293;297;301;305;309;313;315;315;315;315;315;315;315;315;315;315;315;315;315;315;315;315;'); INSERT INTO grupos VALUES ('0/0/5', 1, false, false, 'Interruptor', 213, 'Button', true, NULL, NULL, 'knx', true, 'Interruptor', 1, 301, 326, 'Plano Casa', NULL); INSERT INTO grupos VALUES ('0/0/4', 0, false, false, 'Enchufe4', 316, 'Switch', true, NULL, NULL, 'knx', true, 'Enchufe4', 1, 303, 133, 'Plano Casa', '268;272;276;'); INSERT INTO grupos VALUES ('0/0/2', 0, false, false, 'Enchufe2', 210, 'Switch', true, NULL, NULL, 'knx', true, 'Enchufe2', 1, 141, 322, 'Plano Casa', NULL); INSERT INTO grupos VALUES ('0/0/1', 0, false, false, 'LuzFlexo', 217, 'SimpleLamp', true, NULL, NULL, 'knx', true, 'LuzFlexo', 1, 80, 45, 'Plano Casa', '267;271;275;'); INSERT INTO grupos VALUES ('0/0/3', 1, false, false, 'Router', 221, 'Router', true, NULL, NULL, 'knx', true, 'Router1', 1, 467, 439, 'Plano Casa', NULL); INSERT INTO grupos VALUES ('0/0/6', 21.68, false, false, 'SensorTemperatura', 237, 'TemperatureSensor', true, NULL, NULL, 'knx', false, 'SensorTemperatura', 2, 146, 436, 'Plano Casa', NULL); INSERT INTO grupos VALUES (NULL, 0, false, false, 'SensorX10', 219, 'MotionSensor', true, 'A', 1, 'x10', false, 'SensorX10', 6, 362, 11, 'Plano Casa', '335;336;'); INSERT INTO grupos VALUES ('1/1/5', 1, false, false, '', 12, 'MotionSensor', true, NULL, NULL, 'knx', false, 'SensorPresencia', 6, -1, -1, NULL, NULL); INSERT INTO grupos VALUES ('1/1/2', 50, false, true, 'Luz Intervalo', 248, 'DimmableLight', true, NULL, NULL, 'knx', true, 'LuzHInt', 3, 97, 276, 'Plano Casa', '265;269;273;338;'); INSERT INTO grupos VALUES ('1/1/1', 0, false, false, 'LuzHBin', 215, 'SimpleLamp', true, NULL, NULL, 'knx', true, 'LuzHBin', 1, 357, 189, 'Plano Casa', '266;270;274;'); INSERT INTO grupos VALUES (NULL, 1, false, true, 'Encender la luz del flexo', 291, 'SimpleLamp', true, 'C', 1, 'x10', true, 'BombillaX10', 1, 272, 130, 'Sala Quercus', '107;109;110;112;113;114;116;118;120;121;122;124;125;126;128;129;130;132;133;135;137;139;141;142;143;145;146;147;149;151;153;154;156;158;160;161;163;164;165;167;168;170;171;173;174;175;177;178;180;181;183;184;186;187;189;191;192;194;195;197;198;200;202;203;204;206;207;208;210;211;212;213;215;216;217;219;220;221;223;224;225;227;228;229;231;232;233;235;236;237;239;240;249;251;252;253;255;256;257;258;259;261;262;263;281;282;283;290;291;292;294;295;296;298;299;300;302;303;304;306;307;308;310;311;312;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;335;336;');

--
-- Name: grupos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY grupos
    ADD CONSTRAINT grupos_pkey PRIMARY KEY ("idGrupo");

--
-- Name: grupos_tipoDatos_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY grupos
    ADD CONSTRAINT "grupos_tipoDatos_fkey" FOREIGN KEY ("tipoDatos") REFERENCES "TiposDatos"(id);

--
-- PostgreSQL database dump complete
-- 
```

**1）第一种方法，使用 pG2Mysql**：[http](http://www.lightbox.ca/pg2mysql.php) ://www.lightbox.ca/pg2mysql.php 简单快速（理论上）：不幸的是它在解析时有几个错误：

这是检索到的文档：

```
# Converted with pg2mysql-1.9
# Converted on Mon, 22 Apr 2013 14:12:28 -0400
# Lightbox Technologies Inc. http://www.lightbox.ca

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO"; SET time_zone="+00:00";

CREATE TABLE grupos (
    `dirGrupo` text,
    valor real,
    `flagIntelli` bool DEFAULT 0,
    `flagQDS` bool DEFAULT 0,
    finalidad text,
    `idGrupo` int(11) auto_increment NOT NULL,
    `claseDomo` text,
    instalado bool DEFAULT 1 NOT NULL,
    `codCasa` `char`,
    `codUnidad` int(11),
    protocolo text NOT NULL,
    escritura bool,
    dispositivo text,
    `tipoDatos` oid,
    `coordX` int(11) DEFAULT -1 ,
    `coordY` int(11) DEFAULT -1 ,
    mapa text,
    `reglasAsociadas` text , PRIMARY KEY(`idGrupo`) ) TYPE=MyISAM;

INSERT INTO grupos VALUES (NULL, 0, false, false, 'sensor', 10, 'LightSensor', true, 'E', 1, 'x10', false, 'SensorLum1', 7, -1, -1, NULL, NULL); INSERT INTO grupos VALUES (NULL, 0, false, false, 'luz', 11, 'SimpleLamp', true, 'K', 1, 'x10', true, 'Luz4', 1, -1, -1, NULL, NULL); INSERT INTO grupos VALUES (NULL, 0, false, false, 'Radiador de la sala', 298, 'Heater', true, 'B', 1, 'x10', true, 'RadiadorX10', 1, 163, 168, 'Sala Quercus', '108;111;115;117;119;123;127;131;134;136;138;140;144;148;150;152;155;157;159;162;166;169;172;176;179;182;185;188;190;193;196;199;201;205;209;214;218;222;226;230;234;238;250;254;260;264;277;278;279;280;284;293;297;301;305;309;313;315;315;315;315;315;315;315;315;315;315;315;315;315;315;315;315;'); INSERT INTO grupos VALUES ('0/0/5', 1, false, false, 'Interruptor', 213, 'Button', true, NULL, NULL, 'knx', true, 'Interruptor', 1, 301, 326, 'Plano Casa', NULL); INSERT INTO grupos VALUES ('0/0/4', 0, false, false, 'Enchufe4', 316, 'Switch', true, NULL, NULL, 'knx', true, 'Enchufe4', 1, 303, 133, 'Plano Casa', '268;272;276;'); INSERT INTO grupos VALUES ('0/0/2', 0, false, false, 'Enchufe2', 210, 'Switch', true, NULL, NULL, 'knx', true, 'Enchufe2', 1, 141, 322, 'Plano Casa', NULL); INSERT INTO grupos VALUES ('0/0/1', 0, false, false, 'LuzFlexo', 217, 'SimpleLamp', true, NULL, NULL, 'knx', true, 'LuzFlexo', 1, 80, 45, 'Plano Casa', '267;271;275;'); INSERT INTO grupos VALUES ('0/0/3', 1, false, false, 'Router', 221, 'Router', true, NULL, NULL, 'knx', true, 'Router1', 1, 467, 439, 'Plano Casa', NULL); INSERT INTO grupos VALUES ('0/0/6', 21.68, false, false, 'SensorTemperatura', 237, 'TemperatureSensor', true, NULL, NULL, 'knx', false, 'SensorTemperatura', 2, 146, 436, 'Plano Casa', NULL); INSERT INTO grupos VALUES (NULL, 0, false, false, 'SensorX10', 219, 'MotionSensor', true, 'A', 1, 'x10', false, 'SensorX10', 6, 362, 11, 'Plano Casa', '335;336;'); INSERT INTO grupos VALUES ('1/1/5', 1, false, false, '', 12, 'MotionSensor', true, NULL, NULL, 'knx', false, 'SensorPresencia', 6, -1, -1, NULL, NULL); INSERT INTO grupos VALUES ('1/1/2', 50, false, true, 'Luz Intervalo', 248, 'DimmableLight', true, NULL, NULL, 'knx', true, 'LuzHInt', 3, 97, 276, 'Plano Casa', '265;269;273;338;'); INSERT INTO grupos VALUES ('1/1/1', 0, false, false, 'LuzHBin', 215, 'SimpleLamp', true, NULL, NULL, 'knx', true, 'LuzHBin', 1, 357, 189, 'Plano Casa', '266;270;274;'); INSERT INTO grupos VALUES (NULL, 1, false, true, 'Encender la luz del flexo', 291, 'SimpleLamp', true, 'C', 1, 'x10', true, 'BombillaX10', 1, 272, 130, 'Sala Quercus', '107;109;110;112;113;114;116;118;120;121;122;124;125;126;128;129;130;132;133;135;137;139;141;142;143;145;146;147;149;151;153;154;156;158;160;161;163;164;165;167;168;170;171;173;174;175;177;178;180;181;183;184;186;187;189;191;192;194;195;197;198;200;202;203;204;206;207;208;210;211;212;213;215;216;217;219;220;221;223;224;225;227;228;229;231;232;233;235;236;237;239;240;249;251;252;253;255;256;257;258;259;261;262;263;281;282;283;290;291;292;294;295;296;298;299;300;302;303;304;306;307;308;310;311;312;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;314;316;317;335;336;'); ALTER TABLE grupos
    ADD CONSTRAINT grupos_pkey PRIMARY KEY ("idGrupo"); 
```

当我使用任何数据库管理器将此文件导入数据库时​​，我只收到错误消息：

![第一个错误](https://i.stack.imgur.com/nbK0T.png)

由于某种原因，解析器在这些符号之间标记*字符*：''。如果我们仔细看，有时列的名称在 '' 之间，有时不是，为什么？

我删除了*char*周围的那些符号，然后再次进行相同的导入，但又出现了另一个错误：

![第二个错误](https://i.stack.imgur.com/SWI8t.png)

类型 oid？那是什么？阅读我看到这是一种用于主键的类型。

**2）第二种方法，我将尝试使用[Mysql Workbench](http://www.mysql.com/downloads/workbench/)：**

我在 Ubuntu 中安装了这个功能，我试了一下。有一个迁移数据库的选项，太好了！

1.-我介绍源并测试连接：

![源连接测试](https://i.stack.imgur.com/uSNsz.png)

2.- 然后是目的地并测试连接：

![目标连接测试](https://i.stack.imgur.com/rTWDZ.png)

3.- 下一个屏幕，一切正常：

![一切正常](https://i.stack.imgur.com/3x1ja.png)

4.- 现在我被要求选择架构，我选择默认选项：

![选择架构](https://i.stack.imgur.com/OMOrq.png)

5.- 我收到以下错误，在名为“逆向工程选择的模式”的点上失败。

```
Starting...
Connect to source DBMS...
- Connecting...
Connecting to postgresql@DRIVER=Postgresql;SERVER=158.49.245.68;PORT=5432...
Opening ODBC connection to DRIVER=Postgresql;SERVER=158.49.245.68;PORT=5432;DATABASE=QDSDatabase;UID=postgres...
Connected
Connect to source DBMS done
Reverse engineer selected schemata....
Reverse engineering public from QDSDatabase
- Reverse engineering catalog information
Traceback (most recent call last):
  File "/usr/lib/mysql-workbench/modules/db_postgresql_re_grt.py", line 335, in reverseEngineer
    return PostgresqlReverseEngineering.reverseEngineer(connection, catalog_name, schemata_list, context)
  File "/usr/lib/mysql-workbench/modules/db_generic_re_grt.py", line 207, in reverseEngineer
    catalog = cls.reverseEngineerCatalog(connection, catalog_name)
  File "/usr/lib/mysql-workbench/modules/db_generic_re_grt.py", line 367, in reverseEngineerCatalog
    cls.reverseEngineerSequences(connection, schema)
  File "/usr/lib/mysql-workbench/modules/db_postgresql_re_grt.py", line 76, in reverseEngineerSequences
    min_value, max_value, start_value, increment_by, last_value, is_cycled, ncache = cls.execute_query(connection, seq_details_query % (schema.name, seq_name)).fetchone()
  File "/usr/lib/mysql-workbench/modules/db_generic_re_grt.py", line 56, in execute_query
    return cls.get_connection(connection_object).cursor().execute(query, *args, **kwargs)
pyodbc.ProgrammingError: ('42P01', '[42P01] ERROR: no existe la relaci\xc3\xb3n \xc2\xabpublic.idtipodatos\xc2\xbb;\nError while executing the query (7) (SQLExecDirectW)')

Traceback (most recent call last):
  File "/usr/share/mysql-workbench/libraries/workbench/wizard_progress_page_widget.py", line 192, in thread_work
    self.func()
  File "/usr/lib/mysql-workbench/modules/migration_schema_selection.py", line 160, in task_reveng
    self.main.plan.migrationSource.reverseEngineer()
  File "/usr/lib/mysql-workbench/modules/migration.py", line 332, in reverseEngineer
    self.state.sourceCatalog = self._rev_eng_module.reverseEngineer(self.connection, self.selectedCatalogName, self.selectedSchemataNames, self.state.applicationData)
SystemError: ProgrammingError("('42P01', '[42P01] ERROR: no existe la relaci\xc3\xb3n \xc2\xabpublic.idtipodatos\xc2\xbb;\nError while executing the query (7) (SQLExecDirectW)')"): error calling Python module function DbPostgresqlRE.reverseEngineer
ERROR: Reverse engineer selected schemata: ProgrammingError("('42P01', '[42P01] ERROR: no existe la relaci\xc3\xb3n \xc2\xabpublic.idtipodatos\xc2\xbb;\nError while executing the query (7) (SQLExecDirectW)')"): error calling Python module function DbPostgresqlRE.reverseEngineer
Failed 
```

6.- 如果我尝试使用其他类型的模式（POINT 4.-），程序会突然关闭：

![退出(-1)](https://i.stack.imgur.com/dBXf8.png)

就是这样，我已经用 Mysql Workbench 以多种方式尝试过这个，这看起来很棒，但不幸的是没有任何效果。

有任何想法吗？请记住，postgres SQL 在帖子的开头，因此任何人都可以尝试迁移。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:18:31.930

恐怕这对你来说很难。

1.  你似乎不了解 PostgreSQL
2.  你似乎不了解 MySQL
3.  您似乎不了解您的数据库架构

如果这是您的整个架构，只需将其复制到您选择的文本编辑器中并手动更新它。

我不能说“oid”列的用途是什么，但它与主键无关（也许是一个大对象或“blob”？）。

引用仅在您使用混合大小写标识 LikeThis 的情况下使用。默认情况下，SQL 不区分大小写。

Mysql 没有真正的“布尔”类型，您可能想要使用`bit`or `tinyint`。

架构中的 nextval() 调用是生成唯一 ID。这是 PostgreSQL 的东西，MySQL 不支持 - 你可能需要一个 auto_increment 修饰符。

在这些提示和应该让您入门的 pg2mysql 输出之间。

# iphone - 在 iOS 中将 zip 作为附件添加到 MFMailComposerViewController 失败

> ID：16189790
> 
> 赞同：4
> 
> 时间：2013-04-24T10:36:26.653
> 
> 标签：iphone, ios, objective-c, ios6, mfmailcomposeviewcontroller

我有一个应用程序，我在其中将 zip 文件附加到邮件编写器。我正在使用下面的代码来附加 zip 文件。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writableDBPath= [documentsDirectory stringByAppendingPathComponent:@"Records.zip"];
NSData *data = [NSData dataWithContentsOfFile: writableDBPath];
[picker addAttachmentData:data mimeType:@"application/zip" fileName:@"/Records.zip"]; 
```

文档目录中的文件：/var/mobile/Applications/46348DAA-9B4B-4DA8-98E0-3CEF880D2721/Documents/Records.zip

我被卡住了，`NSData *data = [NSData dataWithContentsOfFile:WritableDBPath];`不知道是什么问题。

当我能够附加 zip 时，我收到内存警告 *** -[_UIRemoteViewControllerConnectionRequest retain]: message sent to deallocated instance 0x1cd04690。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:42:07.507

我已经为另一台设备尝试了相同的代码并且它工作正常。我认为那是设备问题。我已经尝试了两个新设备并且工作正常。

# cordova - PhoneGap 应用程序的 BlackBerry 10 WebWorks Native Packager 异常

> ID：16189804
> 
> 赞同：0
> 
> 时间：2013-04-24T10:37:22.437
> 
> 标签：cordova, blackberry-10, blackberry-webworks

当使用 webworks 为 BB 10 构建应用程序时，我得到了 Native Pacakge Exception，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/bVeKk.jpg)

我能够在我的系统中成功构建，但它没有发生在其他系统中。是否需要进行一些其他系统相关的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T18:44:27.573

看来您已经通过 npm 安装使用了 cordova cli。这个问题就是这样出现的。我建议您[点击此链接](http://techbirds.in/?p=500)第二点解释了您必须如何做到这一点。

此外，您面临的问题可能是由于路径问题。[请检查您是否设置了链接](http://techbirds.in/?p=500)中提到的所有路径变量。我觉得这是因为错误：协议错误。

# android - 图像缩放无法正常工作

> ID：16189806
> 
> 赞同：0
> 
> 时间：2013-04-24T10:37:23.097
> 
> 标签：android, image, device, scale, kernel-density

我正在做一个复杂的 UI 设计，它就像一个圆形轮子，在圆形轨迹上包含 10 个图标。我需要根据设备分辨率缩放每个图标。请查看特定的代码片段：-

```
 if (displayWidth<=241) {
      bitmap = scaleBimtap(bitmap, 42, 39);
     }else if (displayWidth<=320) {
      bitmap = scaleBimtap(bitmap, 42, 39);
     }else if (displayWidth<=480) {
      bitmap = scaleBimtap(bitmap, 52, 44); 
     }else{
      bitmap = scaleBimtap(bitmap, 52, 44);
     } 
```

HTC sense 是一款 540X960 分辨率的设备。所以这里是 bitmap = scaleBimtap(bitmap, 52, 44); 在这种情况下必须选择，但这似乎被错误地缩放并且图标显示得更大。我该怎么做才能使它起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T11:12:45.190

**图片来自网址**

imageView = new (ImageView)findViewById(R.id.myImage);

从网址获取图片

```
 Bitmap originalBitmap = getBitmapFromURL("http://www.chennaionline.com/home.JPG"); 
```

getBitmapFromURL 方法：

```
public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url
                    .openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        } catch (IOException e) {
            e.printStackTrace();
            return null;

}
} 
```

设置位图

```
Bitmap bitmap = Bitmap.createScaledBitmap(originalBitmap, width,
                height, false);

imageView.setImageBitmap(bitmap); 
```

**资源文件中的图像**

```
Bitmap bitmap = ((BitmapDrawable)imageView.getDrawable()).getBitmap(); 
```

# java - 使用java撤消文件/文件夹操作

> ID：16189807
> 
> 赞同：2
> 
> 时间：2013-04-24T10:37:32.080
> 
> 标签：java

我希望使用 java 实现用于编辑/删除/移动等的撤消/重做文件/文件夹功能。那可能吗 ？

**详细信息：**我正在使用 观看给定的文件夹`javaFileWatcher`，我从观察者那里收到一条消息，如果有任何文件/文件夹创建/编辑/删除/重命名。现在我想如果任何用户删除/创建了任何文件/文件夹，我将能够使用 java 撤消它。任何人都可以帮忙。

注意：我使用的是windows

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:57:02.213

不可能，删除是最终的，没有像操作系统那样的回收站，你必须自己实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:04:23.360

作为一个开始的想法，看看[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。这通常是撤消/重做事情的实现方式。这个想法是，您可以将有关操作的所有“重要”内容存储到单个对象中，然后将它们存储在有序集合中。

在您的情况下，您想要监控 FS 而不是您自己的数据模型这一事实使事情变得非常困难。但是，如果您能负担得起冗余数据存储，那么我认为可以假设它可以完成。（我建议您阅读 git SCM 的工作方式。我的意思是，它将所有内容存储在一个`.git`文件夹中，并且能够从其存储的压缩数据中恢复其所谓的工作目录中的任何先前状态。）

实际上，如果您可以将 git 加入您的程序中，那么它会容易得多。我认为您在要监督的目录中初始化了一个 git repo，然后每次收到有关某些 FS 更改的通知时，您可以要求 git ( `git status`) 告诉您哪些文件实际上已更改。甚至可以使用简单的 git 命令恢复已删除的文件。

这远不是您问题的完整答案，但是我可能已经给出了一些想法。祝你好运。

# f# - F#中最长公共子序列并行算法的问题（使用Parallel.For）

> ID：16189808
> 
> 赞同：0
> 
> 时间：2013-04-24T10:37:35.993
> 
> 标签：f#, parallel-processing, task-parallel-library

（已编辑）

我正在尝试通过使用 Parallel.For 循环来并行化一个函数来解决 LCS。该函数按对角线进行，根据之前的对角线单元格获得当前对角线单元格的值。

时序函数如下：

```
let public lcs_seq_1d_diags (x:char[]) (y:char[]) = 
    let m = x.Length
    let n = y.Length

    let mutable dk2 = Array.create (1+m) 0
    let mutable dk1 = Array.create (1+m) 0
    let mutable dk = Array.create (1+m) 0

    for k = 2 to m+n do
        let low = max 1 (k-m)
        let high = min (k-1) n

        for j = low to high do
            let i = k - j
            if x.[i-1] = y.[j-1] then
                dk.[i] <- dk2.[i-1] + 1
            else 
                dk.[i] <- max dk1.[i] dk1.[i-1]

        let mutable temp = dk2
        dk2 <- dk1
        dk1 <- dk
        dk <- temp

    dk1.[m] 
```

我的并行化尝试：

```
let public lcs_par_1d_seq (x:char[]) (y:char[]) = 
    let m = x.Length
    let n = y.Length

    let dk2 = Array.create (1+m) 0
    let cell2 = ref dk2
    printfn "\r\n0: %A" dk2
    let dk1 = Array.create (1+m) 0
    let cell1 = ref dk1
    printfn "1: %A" dk1
    let dk = Array.create (1+m) 0
    let cell = ref dk

    for k = 2 to m+n do
        let low = max 1 (k-m)
        let high = min (k-1) n
        //for each cell in current diagonal
        Parallel.For(low, high, (fun j ->
            let i = k - j
            if x.[i-1] = y.[j-1] then
                dk.[i] <- dk2.[i-1] + 1
            else 
                dk.[i] <- max dk1.[i] dk1.[i-1])) |> ignore

        if trace then 
            let ilow = k - high
            let ihigh = k - low
            printfn "k=%d i=%d..%d dk=%A" k ilow ihigh dk.[ilow..ihigh]

        let mutable temp = !cell2
        cell2 := !cell1
        cell1 := !cell
        cell := temp

    dk1.[m] 
```

顺序循环的跟踪结果：

```
0: [|0; 0; 0; 0; 0; 0; 0|]
1: [|0; 0; 0; 0; 0; 0; 0|]
k=2 i=1..1 dk=[|0|]
k=3 i=1..2 dk=[|0; 0|]
k=4 i=1..3 dk=[|1; 1; 1|]
k=5 i=1..4 dk=[|1; 1; 1; 1|]
k=6 i=1..5 dk=[|1; 1; 1; 1; 1|]
k=7 i=1..6 dk=[|1; 2; 2; 1; 2; 1|]
k=8 i=1..6 dk=[|1; 2; 2; 2; 2; 2|]
k=9 i=1..6 dk=[|1; 2; 2; 2; 2; 2|]
k=10 i=1..6 dk=[|1; 2; 2; 2; 3; 2|]
k=11 i=2..6 dk=[|2; 2; 2; 3; 3|]
k=12 i=3..6 dk=[|2; 2; 3; 3|]
k=13 i=4..6 dk=[|2; 3; 3|]
k=14 i=5..6 dk=[|3; 4|]
k=15 i=6..6 dk=[|4|]
... duration: 19 ms
res_seq_1d_diags = 4
Press any key to continue . . . 
```

并行循环的跟踪结果：

```
0: [|0; 0; 0; 0; 0; 0; 0|]
1: [|0; 0; 0; 0; 0; 0; 0|]
k=2 i=1..1 dk=[|0|]
k=3 i=1..2 dk=[|0; 0|]
k=4 i=1..3 dk=[|0; 1; 1|]
k=5 i=1..4 dk=[|0; 0; 0; 0|]
k=6 i=1..5 dk=[|0; 0; 0; 0; 0|]
k=7 i=1..6 dk=[|0; 1; 1; 0; 1; 0|]
k=8 i=1..6 dk=[|0; 0; 0; 0; 0; 1|]
k=9 i=1..6 dk=[|0; 0; 0; 0; 0; 0|]
k=10 i=1..6 dk=[|0; 1; 0; 0; 1; 0|]
k=11 i=2..6 dk=[|1; 0; 0; 0; 1|]
k=12 i=3..6 dk=[|0; 0; 0; 0|]
k=13 i=4..6 dk=[|0; 1; 0|]
k=14 i=5..6 dk=[|1; 1|]
k=15 i=6..6 dk=[|1|]
... duration: 23 ms
res_par_1d_seq = 0
Press any key to continue . . . 
```

产生跟踪的代码是：

```
 if trace then 
        let ilow = k - high
        let ihigh = k - low
        printfn "k=%d i=%d..%d dk=%A" k ilow ihigh dk.[ilow..ihigh] 
```

这里的“dk”指的是每个矩阵对角线中单元格的值（即第一个对角线有一个值为 0 的单元格，第二个对角线有两个值为 0 和 0 的单元格，等等）。

基本上，在并行版本中，一些线程似乎会覆盖彼此的值。有什么建议可以避免这种情况并让值在并行版本中正确保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:47:32.107

首先，由于您的代码与您的输出不匹配（代码中的长度`dk`永远不会改变），因此我不会尝试了解您的代码实际上做了什么。

`ref`现在，您的问题与细胞无关。问题是`dk`当前迭代中的值取决于前一次迭代的值`dk1`和值以及`dk2`每次迭代中这些变量的正确旋转。这意味着您的代码不可并行化，至少不能直接并行化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:48:00.717

我发现了问题——我没有在 Parallel 循环中使用我的 refs。它现在按预期工作。我仍然非常感谢您的帮助，并且还拿起了建议的书籍。

多谢你们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:08:43.160

对于可并行化的代码，您需要首先考虑编写代码的方法，以便每个循环相互独立。即，如果您的值 at`i`取决于 at 的值`i-1`，则循环不可并行化，因为您不知道是否`i`或`i-1`将首先计算。

在您的情况下，可能会执行类似计算每个对角线的 LCS`i`并将其存储在`lcs[i]`. 该结果应该独立于位于其他对角线上的任何东西，因此是可并行的。然后*在*该循​​环之后，您可以返回`lcs.Max()`.

# python - 简单的python条件语句快捷语法

> ID：16189814
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:37:54.947
> 
> 标签：python, python-2.7, conditional-statements

我无法理解下面 python 中的速记条件语句。

```
def number(number):
    return number or number == 3

print number("") 
```

这个快捷语法是什么意思？和下面的一样吗？

```
def number(number):
    if number or number == 3:
        return number

print number("") 
```

第一个打印 False 和后者 None （我相信 None 意味着语法无效？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:44:10.577

在这种情况下，条件语句有点没有意义（除了一些非常奇怪的情况，比如覆盖 的等于/整数/布尔值`number`）。

基本上你现在正在做的事情是这样的：

```
def number(number):
    if number:
        return number
    else:
        return number == 3 
```

如果有一个`and`它会很有用，现在它是没有意义的。

or 可以像这样有用：

```
return spam or eggs 
```

如果 spam 不为空，它将返回垃圾邮件，否则将返回鸡蛋。

插图顺便说一句：

```
>>> for number in range(5):                       
...     print 'number', number, number or number == 3
number 0 False
number 1 1
number 2 2
number 3 3
number 4 4 
```

长版`number and number == 3 or 5`

```
def number(number):
    if number and number == 3:
        return 3
    else:
        return 5 
```

这`spam and spam.eggs`东西很有用，因为如果它`spam`不会`None`执行`spam.eggs`通常会给出`AttributeError`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:46:48.587

两种情况下的相关表达式是`number or number == 3`。

Python 将此表达式分为两部分：`(number) or (number == 3)` 它首先评估各个部分，然后使用`or`.

所以我们有`""`（视为`False`）`or` `"" == 3`（*评估*为`False`）。这*成为* `"" or False`. 由于两个表达式都是`False`-y，因此整个表达式的计算结果为`False`。

在第一个函数中，您返回表达式的值，即`False`. 在第二个函数中，只有当表达式为真时才返回表达式的值。如果它是假的，你不会返回任何东西。

在python中，默认情况下不返回任何内容的函数会返回`None`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:43:43.150

如果`number`值为`True`(So, not `0`or `None`)，该函数只返回数字。

如果数字的值为`False`，则函数将返回`number == 3`（所以`True`如果它是 3，`False`否则）

由于后者*总是*返回 False （如果`number == 3`，那么函数在第一种情况下会返回 3 ），它可以缩短为：

`return number or False`
如果它不是 0 或 None，它将返回该数字，否则它将返回 False。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T10:44:33.010

它与 Python 如何评估表达式和对象有关。

你的第一个例子：

你发送一个空字符串`""`，这对 Python`False`来说很像一个空列表 ( `[]`)。

```
def number(number):
    # so this will now be (False) or (number == 3) but since the first 
    # expression was False it will not evaluate the number comparison and thusly
    # return False
    return number or number == 3

print number("") 
```

您的第二个示例是其他示例。你有一个明确的`if`说明，如果数字评估为`True`ie。不为空或数字等于`3`进入下一个块并从中返回。

但是由于您提供了一个空字符串，我们刚刚了解到它返回 False，它会绕过 if 并返回任何 Python 函数的默认值，`None`.

```
def number(number):
    if number or number == 3:
        return number
    #default says return None here.

print number("") 
```

# google-analytics - 作为开发者创建多个 Google 帐户

> ID：16189816
> 
> 赞同：0
> 
> 时间：2013-04-24T10:37:56.540
> 
> 标签：google-analytics, accounts

我是一名网络开发人员，并为客户提供谷歌分析帐户的创建。为了让他们免于验证电子邮件帐户的麻烦，我喜欢为他们创建一个 gmail 帐户，将其全部设置好，然后将密码发送给他们。

但是，谷歌要求通过移动验证，我现在已经达到了“验证限制”。

我有点理解为什么 Google 不想要垃圾邮件帐户，但是有没有办法注册为开发人员然后为客户创建帐户？类似于企业应用程序，但仅适用于标准 Google 帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T16:25:41.680

谢谢@CrayonViolent，看起来配置文件是前进的方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T15:48:25.820

为多个客户使用配置文件是错误的。一方面，将阻止每个客户使用多个配置文件。每个帐户限制为 50 个配置文件。

# java - 正则表达式允许数字、字符或字母数字，但不允许空字符串或特殊字符

> ID：16189817
> 
> 赞同：-1
> 
> 时间：2013-04-24T10:37:58.403
> 
> 标签：java, regex

我的输入为数字、字母数字字符等。我已经构建了正则表达式来验证这一点，但未能验证空字符串。（不应允许空字符串）这是我的正则表达式，

```
(^([A-Za-z]|[0-9])+$) 
```

可以通过上述要求改进吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:42:01.320

你只需要这个正则表达式：

```
^[A-Za-z0-9]+$ 
```

这将只允许字母（大写或小写）和数字。不允许使用空字符串，因为正则表达式将匹配长度为 1 或更多的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:48:41.303

> 我的输入为数字、字母数字字符等。我已经构建了正则表达式来验证这一点，但未能验证空字符串。（不应允许空字符串）这是我的正则表达式，

您发布的正则表达式已经不允许空字符串。但是你应该像这样结合 [A-Za-z] 和 [0-9] 使用`\w`：

`^(\w)+$`

如果您希望它也接受您可以使用的空字符串：

`^(\w)*$`

# django - 在单选按钮上显示文本框单击 django

> ID：16189821
> 
> 赞同：0
> 
> 时间：2013-04-24T10:38:12.957
> 
> 标签：django, django-models, django-views

我有两个单选按钮，在选择一个单选按钮时，我想显示文本框。如果用户选择值为“其他”的单选按钮，则显示文本框，如果其他任何内容不显示文本框。

```
apply_type= (
        ('Online',_('Online')),
        ('Others',_('Others')),
    )

how_to_apply =    models.CharField(verbose_name=_('How to Apply'),max_length=255,null=True,    choices=apply_type,default='Online') 
```

如何在 django 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:47:04.180

一种方法是在选中某个单选按钮时仅使用 javascript 客户端显示输入。

如果您想在 django 中执行此操作，您可以使用 a[`form wizard`](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#module-django.contrib.formtools.wizard.views)并让在第一个表单上所做的选择影响显示的其余表单。

# jquery - 如何修改由 Jquery 中的参数定义的链接？

> ID：16189822
> 
> 赞同：0
> 
> 时间：2013-04-24T10:38:13.823
> 
> 标签：jquery, url, jinja2

我想根据它在javascript中的ID来修改一个链接。问题是我使用 Jinja2 生成了一个列表，所以这是我的代码：

```
{% with ips = ips %}
{% for include in ips.includedip %}
    <div class="well form-inline">
        {{include}}
        <span class="pull-right">
        <select onchange="updateButton({{loop.index0}})" id='sel{{loop.index0}}'>
            <option>x</option>
            <option>y</option>
        </select>
        <a id="btn{{loop.index0}} "class="btn" href="/scenarios/_addObject?id={{loop.index0}}&cmd='None'"><i class="icon-plus-sign"></i></a>
        </span>
        </div>
{% endfor %}
{% endwith %} 
```

所以在这里我有一个包含 IP 的列表，我想将某些内容归因于其中一个，所以我在每个 IP 前面添加了一个选择。然后，我想在每次更改时修改选择旁边的按钮的链接。所以我创建了一个函数。由于列表是动态的，我永远无法知道 ID 有多大，所以这是我的函数：

```
function updateButton(value1){
    $('#btn$(value1)').attr('href', '#'); 
  } 
```

如您所见，我将参数 {{loop.index0}} 传递给 jinja2 将其解释为整数。（第一个 ip-select-button 的值为“0”，下一个为“1”）如何修改按钮的 href 值？
`$('#btn$(value1)')`不起作用，`$('#btn'+$(value1))`也没有......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:44:39.423

你有没有尝试过：

```
$('#btn' + value1).attr('href', '#'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:49:10.337

它几乎在你的盘子里

在此函数 updateButton(value1) 中，值 1 是您想要的循环索引。所以就这样使用它

```
function updateButton(value1){
    $('#btn' + value1).attr('href', '#');
} 
```

# c++ - 将字符串转换为字节并发送（）它

> ID：16189825
> 
> 赞同：1
> 
> 时间：2013-04-24T10:38:25.800
> 
> 标签：c++, command-line-interface

我正在做一个数据包发送者。

用户可以在其中输入他们想要在 RichTextBox 上发送的数据包。

```
this->packetdata = (gcnew System::Windows::Forms::RichTextBox()); 
```

样本输入：

```
03 00 00 13 0e e0 00 00 00 00 00 01 00 08 00 00 00 00 00 03
00 00 6a 02 f0 80 7f 65 82 00 5e 04 01 01 04 01 01 01 01 ff 
```

服务器应该收到：

```
03 00 00 13 0e e0 00 00 00 00 00 01 00 08 00 00 00 00 00 03
00 00 6a 02 f0 80 7f 65 82 00 5e 04 01 01 04 01 01 01 01 ff 
```

但是服务器却收到了这个：

```
30 33 20 30 30 20 30 30 20 31 33 20 30 65 20 65   03 00 00 13 0e e
30 20 30 30 20 30 30 20 30 30 20 30 30 20 30 30   0 00 00 00 00 00
20 30 31 20 30 30 20 30 38 20 30 30 20 30 30 20    01 00 08 00 00 
30 30 20 30 30 20 30 30 20 30 33 0a 30 30 20 30   00 00 00 03.00 0
30 20 36 61 20 30 32 20 66 30 20 38 30 20 37 66   0 6a 02 f0 80 7f
20 36 35 20 38 32 20 30 30 20 35 65 20 30 34 20    65 82 00 5e 04 
30 31 20 30 31 20 30 34 20 30 31 20 30 31 20 30   01 01 04 01 01 0
31 20 30 31 20 66 66 20                           1 01 ff 
```

如何转换上的数据`RichTextBox`以删除所有空间并将每个空间视为字节并发送。

这种方法虽然有效：

```
char this[] = {0x03, 0x00, 0x00, 0x13, 0x0e, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03
0x00, 0x00, 0x6a, 0x02, 0xf0, 0x80, 0x7f, 0x65, 0x82, 0x00, 0x5e, 0x04, 0x01, 0x01, 0x04, 0x01, 0x01, 0x01, 0x01, 0xff} 
```

使用该代码，服务器会收到正确的数据。

那么如何将 TextBox 中的 Text 变成类似的东西呢？

* * *

这有效

```
int mysendfunc(char *sendbuf, int size);

(...)

std::string inputpkt = marshal_as<std::string>(this->packetdata->Text);
std::istringstream reader(inputpkt);
std::vector<char> pkt;
do
{
    // read as many numbers as possible.
    for (int number; reader >> std::hex >> number;) {
        pkt.push_back(number);
    }
    // consume and discard token from stream.
    if (reader.fail())
    {
        reader.clear();
        std::string token;
        reader >> token;
    }
}
while (!reader.eof());

int hehe = mysendfunc(pkt.data(), pkt.size()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:36:10.907

您使用`istringstream`的功能非常接近。要将数据解释为十六进制，您需要`reader >> hex >> number`.

进而

```
mysendfunc(&pkt[0], pkt.size()) 
```

* * *

或使用

```
array<String^>^ hexCodes = this->packetdata->Text->Split(" ");
Converter<String^, SByte>^ parser = gcnew Converter<String^, SByte>(&SByte::Parse);
array<SByte>^ bytes = Array::ConvertAll(hexCodes, parser);
pin_ptr<char> pkt = &bytes[0];
int x = mysendfunc(pkt, bytes->Length); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:49:18.833

您正在发送*文本*“03 00 00 ....”的 ASCII 代码。您实际上想以序列化模式发送字符串“030000 ...”。

```
std::string str("03 00 00 13 0e e0 00 00 00 00 00 01 00 08 00 00 00 00 00 03
00 00 6a 02 f0 80 7f 65 82 00 5e 04 01 01 04 01 01 01 01 ff");
sendbytes(str.c_str(), str.size()); 
```

# java - 如何更改java中缓存目录的路径，或者如何为任何用户自定义它？

> ID：16189833
> 
> 赞同：3
> 
> 时间：2013-04-24T10:38:53.117
> 
> 标签：java

我想将 : 的路径更改`C:\Documents and Settings\abc\Application Data\Sun\Java\Deployment\cache`为任何指定的位置

如何自定义 deployment.properties 文件，但更改应该对任何用户都是通用的，我不需要为每个用户都这样做。

有什么办法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:44:30.193

默认的 java 缓存目录可以在你的 windows 界面中通过以下方式更改：

`control panel>Java > General > Setting > Location`

这是java缓存文件的一般位置。

注意：如果更改按钮被禁用，请转到您的`JRE>bin`目录并将其更改为 `javacpl.exe`以兼容模式运行 ( `Windows XP (Service Pack 3)`)

现在，如果您使用 java WebStart 作为部署工具，请参考此链接[并](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/properties.html) 更改`deployment.user.cachedir`.`deployment.properties`

每个 java 安装都有一个`deployment.properties`文件。在我的 java 配置中，这个文件的位置是`C:\Users\<username>\AppData\LocalLow\Sun\Java\Deployment`.

另请参阅[如何为 WebStart 程序自动更改 Java 缓存文件夹](https://stackoverflow.com/questions/1310463/how-to-change-java-cache-folder-automatically-for-webstart-programs)

# c# - 读取 Global.asax 中的 HttpContext.Current.Response.OutputStream

> ID：16189834
> 
> 赞同：6
> 
> 时间：2013-04-24T10:38:59.007
> 
> 标签：c#, asp.net, stream, global-asax

如何阅读`HttpContext.Current.Response.OutputStream`Global.asax End_Request 的全部内容？

我想获取发送到浏览器的内容文本？我试图用谷歌搜索它，但没有找到有用的东西。

实际上我希望这是可能的，我不需要为这个简单的要求创建过滤器或其他东西。

谢谢你。

# r - 投影仪阴影框中的allowframebreaks使用knitr消失

> ID：16189846
> 
> 赞同：2
> 
> 时间：2013-04-24T10:39:38.390
> 
> 标签：r, knitr, beamer

我有以下代码

```
\documentclass{beamer} 
\begin{document}
<<setup, include=FALSE>>=
opts_chunk$set(out.lines = 4)
opts_chunk$set(size = 'footnotesize')
options(width=60)
knit_hooks$set(document = function(x) {
gsub('\\\\(begin|end)\\{kframe\\}', '', x)
})
@ 
```

在我这样做之后，应该在阴影框中显示的 R 源代码和输出现在消失了。关于如何取回阴影框的任何想法？

# angularjs - 在控制器AngularJS中获取范围变量的值

> ID：16189852
> 
> 赞同：0
> 
> 时间：2013-04-24T10:40:13.447
> 
> 标签：angularjs, angularjs-directive

我必须获取指令中定义的范围变量的值。我必须使用 AngularJS 在控制器中获取该范围变量的值。如何获取范围变量的值？

## 指示

```
app.directive('checkToggle', function() {
    return { 
        scope: true,
        link: function ($scope, element, attrs) {
            $(element).on('click', function() {
                $(element).find('i').toggleClass('icon-check icon-check-empty');
                if ($(element).find('i').hasClass('icon-check')) {
                    $scope.isChecked = 'true';
                } else {
                    $scope.isChecked = 'false';
                }
            });
        }
    }
}); 
```

我必须在控制器中获取 $scope.isChecked 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:45:13.663

如果我正确理解您的用例，您想在点击时切换图标。如果是这样，您不需要为此编写任何指令。并且如果您想编写一个指令，那么您不应该在开始时就这样做。您的代码是非常命令式的，类似于 jQuery，而 AngularJS 的力量在于驱动基于模型更改的声明性 UI。

无论如何，使用标准 AngularJS 指令可以轻松切换图标：

```
<i ng-class="{'icon-star' : isChecked, 'icon-star-empty': !isChecked}" ng-click="isChecked = !isChecked"></i> 
```

这是一个工作 plunk：[http ://plnkr.co/edit/nXXQA41w00Cpeo6tTibg?p=preview](http://plnkr.co/edit/nXXQA41w00Cpeo6tTibg?p=preview)

# ruby - How to access the data on a dropdown list in excel using WIN32OLE

> ID：16189853
> 
> 赞同：0
> 
> 时间：2013-04-24T10:40:16.953
> 
> 标签：ruby, excel, drop-down-menu, win32ole

I want to programatically choose one of the options available in a Excel Dropdownlist. To manipulate the worksheet I'm using win32ole on ruby. It works well until I try to change the value of the dropdownlist.

I simply don't know how and google has been of no help.

setting a value to a a cell is as simple as worksheet.Cells(x,y).Value=new_value. This is not choosing one of the alternatives available on the dropdownlist and it's not even possible since the cell in question is protected.

The protection doesn't stop me from changin the value manualy via excelso I figure there must be a method or functon somewhere that allows me to simulate this action aswell.

Help in advance for any suggestions.

EDIT: I'm trying to choose one of the values available in the dropdown list.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:53:47.077

我没有找到特定于 dropdows 的 api，但我设法解决了问题。下拉列表的数据位于工作簿中的某处。只需从它们中选择并将其设置为带有“Cells.Value=new_value”的下拉单元格。

这对我来说有点不同，因为我正在处理的工作簿有某种受保护的自定义下拉菜单，但最重要的是，解决方案是意识到下拉菜单的数据可以在工作簿的其他地方找到。

# ruby-on-rails - Storing Time Stamp as Number Mongoid

> ID：16189857
> 
> 赞同：13
> 
> 时间：2013-04-24T10:40:22.040
> 
> 标签：ruby-on-rails, mongoid

I'm new to Mongoid. In my model file, I've created a field with data type BigDecimal. I want to store time stamp in it. Below is the model that I'm using:

```
class Test
  include Mongoid::Document
  field :time_stamp, type: BigDecimal
end 
```

And Below is the code that I'm using to create a document:

```
aTime = "Wed Apr 24 09:48:38 +0000 2013"
timest = aTime.to_time.to_i
Test.create({time_stamp: timest}) 
```

I see that the time_stamp is stored as String in the database. Can anybody direct me to store the timestamp as number in DB so that I could perform some operations on it. Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T21:54:47.063

根据[this answer](https://stackoverflow.com/a/7682922/619510)，MongoDB支持的数字类型有：

```
MongoDB stores data in a binary format called BSON which supports these numeric data types:

int32 - 4 bytes (32-bit signed integer)
int64 - 8 bytes (64-bit signed integer)
double - 8 bytes (64-bit IEEE 754 floating point) 
```

[由Mongoid 文档](http://mongoid.org/en/mongoid/docs/documents.html#fields)中的此声明加强：

```
Types that are not supported as dynamic attributes since they cannot be cast are:

BigDecimal
Date
DateTime
Range 
```

我不知道您想对该字段进行哪些操作，但如果您真的希望将其存储为数字，则必须使用 MongoDB (BSON) 支持的不同数字类型，可能`Float`是`Integer`.

# php - Internal Server Error after long time running of php script

> ID：16189864
> 
> 赞同：3
> 
> 时间：2013-04-24T10:41:00.773
> 
> 标签：php

I have some db query in my php file, approximately after 40 second, happened `INTERNAL SERVER ERROR`, though in `php.ini` file this settings are set:

```
memory_limit         8192M
max_execution_time   120 
```

I think this settingst is enough, other what reason may causes `INTERNAL SERVER ERROR` after long time running of php script?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:42:20.503

set

```
ini_set('max_execution_time' ,0);       
ini_set('set_memory_limit', -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-21T21:44:42.993

这个问题很老，但这可能对某人有用。

将此用于循环的每次迭代`sleep(0.5);` 0.5 是用户定义的，您可以更改它。

# html - Bootstrap tabs with split-button dropdowns

> ID：16189866
> 
> 赞同：0
> 
> 时间：2013-04-24T10:41:05.403
> 
> 标签：html, css, twitter-bootstrap

I'm trying to achieve a nav menu similar to the examples but with a split-button drop-down:

"Tabs with dropdowns" [http://twitter.github.io/bootstrap/components.html#navs](http://twitter.github.io/bootstrap/components.html#navs)

[http://twitter.github.io/bootstrap/components.html#navbar](http://twitter.github.io/bootstrap/components.html#navbar)

I can have a split button, or I can have a tab with a dropdown, but I can't seem to combine the two. Is this possible?

**Tabs with dropdowns:**

```
<div class="">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#">Home</a></li>
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Tab2 <b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li><a href="#">Separated link</a></li>
            </ul>
        </li>
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Tab3<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li><a href="#">Separated link</a></li>
            </ul>
        </li>
    </ul>
</div> 
```

**Split Button:**

```
<div class="btn-toolbar" style="margin: 0;">
          <div class="btn-group">
            <button class="btn dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li><a href="#">Action</a></li>
              <li><a href="#">Another action</a></li>
              <li><a href="#">Something else here</a></li>
              <li class="divider"></li>
              <li><a href="#">Separated link</a></li>
            </ul>
          </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:57:47.680

所以你的最终结果应该是一个拆分按钮而不是一个下拉菜单，对吗？你试过这个吗？（没有测试）

```
 <div>
        <ul class="nav nav-tabs">
            <li class="active">
                <button class="btn dropdown-toggle" data-toggle="dropdown">Home<span class="caret"></span></button>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li><a href="#">Separated link</a></li>
                </ul>
            </li>
        </ul>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:22:53.343

我现在已经够近了——只需要稍微改变一下样式。

这是HTML：

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
<meta charset="utf-8">
<title>Test Bootstrap</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Le styles -->
<link href="content/bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="content/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
</head>
<body>
<div class="navbar navbar-static-top">
    <div class="navbar-inner">
        <div class="container tabbable">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="#">ProjectName</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    <li class="active tabbable"><a href="#tab1" data-toggle="tab">tab1</a></li>
                    <li class="tabbable"><a href="#tab2" data-toggle="tab">tab2</a></li>
                    <li class="tabbable" id="tabarea3">
                        <!--<div class="btn-group" data-toggle="buttons-radio">-->
                        <div class="btn-group">
                            <a class="btn" id="tab3" href="#tab3" data-toggle="tab">Tab3</a>
                            <button id="tab3button" class="btn dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                            <ul class="dropdown-menu">
                                <li><a href="#">Action</a></li>
                                <li><a href="#">Another action</a></li>
                                <li><a href="#">Something else here</a></li>
                                <li class="divider"></li>
                                <li><a href="#">Separated link</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<script src="content/bootstrap/js/jquery-1.9.1.js" type="text/javascript"></script>
<script src="content/bootstrap/js/bootstrap.js" type="text/javascript"></script>
<script src="content/bootstrap/js/custom.js" type="text/javascript"></script> 
```

一些 jquery 取消选择拆分按钮选项卡（custom.js）：

```
 $(document).ready(function () {
        var $tabs = $('.tabbable li');
        $tabs.on('click', function (sender) {
            if($('#tab3').hasClass('active'))
            {
                $('#tab3').removeClass('active');
            }
        });
    }); 
```

# c++ - Inheitance not working while workig with pointer

> ID：16189867
> 
> 赞同：1
> 
> 时间：2013-04-24T10:41:05.927
> 
> 标签：c++, pointers, inheritance

although we are printing `bval`, output is showing value of `dval` as well. Whats actual logic does compiler using? My expected output was `00000 00000`, but I m getting output as `00000 01010`.

```
#include <iostream>
using namespace std;

class base {
 public:
   int bval;
   base() { bval = 0; }
};

class deri : public base {
  public:
    int dval;
    deri() { dval = 1; }
 };

 void SomeFunc(base *arr , int size) {
   for(int i = 0; i < size; i++, arr++)
     cout << arr-> bval;
   cout<<endl;
 }

 int main() {
   base BaseArr[5];
   SomeFunc(BaseArr, 5);
   deri DeriArr[5];
   SomeFunc(DeriArr, 5);
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:47:35.940

你在欺骗系统，并得到“切片”。

由于`deri`大于`base`，当你这样做时`arr++`，指针只会`base`向前推进一个对象。

解决方案是有一个指针数组，并传递 a `base **arr`，如下所示：

```
base *foo[5];
base BaseArr[5];
SomeFunc(BaseArr,5);
for(int i = 0; i < 5; i++)
{ 
   foo[i] = &BaseArr[i];
}
SomeFunc(foo, 5); 
```

# sql - 如何在单个查询中获得类似（父-子）映射列的链表？

> ID：16189868
> 
> 赞同：1
> 
> 时间：2013-04-24T10:41:10.867
> 
> 标签：sql, sql-server, sql-server-2008, tsql, recursive-query

考虑下表

```
+--------+-------+--+
| Parent | Child |  |
+--------+-------+--+
|      1 |     2 |  |
|     10 |    13 |  |
|      2 |     3 |  |
|      3 |     4 |  |
|     13 |    14 |  |
|      4 |     5 |  |
|     15 |    16 |  |
|      5 |     1 |  |
+--------+-------+--+ 
```

在此表中，我遵循父子的层次结构。从这个表中我想要一个如下表的结果

```
+--------+-------+--+
| Parent | Child |  |
+--------+-------+--+
|      1 |     2 |  |
|      2 |     3 |  |
|      3 |     4 |  |
|      4 |     5 |  |
|      5 |     1 |  |
+--------+-------+--+ 
```

我想在我的代码**(1-2-3-4-5-1)**中获取层次结构。目前我在得到它的父母后查询每个孩子（有时，**孩子可以是任何以前的父母，比如 5-1**）。对于长层次结构，它将执行许多查询。我怎样才能使它更有效率？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:47:12.293

```
;with cte(parent,child) as (
    select parent, child
      from sometable
     where parent = 1  --- seed
     UNION ALL
    select t.parent, t.child
      from sometable t
      join cte on cte.child = t.parent
)
    select *
      from cte; 
```

为避免无限循环，您必须存储遍历的 id 列表：

```
;with cte(parent,child,traversed) as (
    select parent, child, ',' + right(parent,10) + ','
      from sometable
     where parent = 1  --- seed
     UNION ALL
    select t.parent, t.child, cte.traversed + right(t.parent,10) + ','
      from sometable t
      join cte on cte.child = t.parent
     where not cte.traversed like ',%' + t.parent + '%,'
)
    select parent, child
      from cte; 
```

但它不会运行得那么快，因为它必须进行 LIKE 检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:49:11.950

请试试：

```
DECLARE @table as TABLE(Parent int, Child int)

insert into @table values
(1, 2),
(10, 13),
(2, 3),
(3, 4),
(13, 14),
(4, 5),
(5, 1)

select * from @table

declare @ParentID int
set @ParentID=1

;WITH T(Parent, Child)AS
    ( 
        SELECT Parent, Child from @table where Parent=@ParentID
        UNION ALL
        SELECT T1.Parent, T1.Child FROM @table T1 INNER JOIN T ON T1.Parent=T.Child
        WHERE T.Child<>@ParentID

    )
select * from T
order by Parent 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T10:50:19.103

该手册涵盖：http: [//msdn.microsoft.com/en-us/library/ms186243](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx) (v=sql.105).aspx 所以真的不应该习惯于提出手册中已经有很好答案的问题.

# jquery - 使用 CSS 样式单选按钮并使用图像

> ID：16189869
> 
> 赞同：2
> 
> 时间：2013-04-24T10:41:16.333
> 
> 标签：jquery, html, css, image, radio-button

是否有一种简单的方法来设置仅使用 CSS 的单选按钮样式，所以我单击图像而不是项目符号？例如，喜欢竖起大拇指/竖起大拇指。

我有两个单选按钮，我需要注册点击了哪一个。当您按下按钮时，单选按钮会变得可见，当您单击单选按钮时，文本会替换单选按钮。

**按钮 > 单选按钮 > 文本**

这是我已经走了多远：

**HTML**

```
<div id="txtradiocall_lille" style="display:none;">
              <input id="Radio1" type="radio" value="yes" class="input_hidden" /><label for="yes"><img src="http://www.xxxx.dk/images/images/thumb_up_green.png" alt="Yes" /></label>
              Yes
              <input id="Radio1" type="radio" value="no" class="input_hidden" /><label for="no"><img src="http://www.xxxx.dk/images/images/thumb_down.png" alt="No" /></label>
              No
            </div> 
```

**CSS**

```
.txtradiocall_lille input[type='radio']
{
    display:inline;
}

.input_hidden {
    position: absolute;
    left: -9999px;
}

.selected {
    background-color: #ccc;
}

#txtradiocall_lille label {
    display: inline-block;
    cursor: pointer;
}

#txtradiocall_lille label:hover {
    background-color: #efefef;
}

#txtradiocall_lille label img {
    padding: 3px;

} 
```

**无线电点击处理程序**

```
 $("input[type='radio']").change(function () {
 var selection = $(this).val();
  getcallaskok(selection, talok);
 }); 
```

目前，我得到的是图像而不是无线电子弹，但似乎点击没有注册，因为点击后我没有得到我需要的文本。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:45:43.560

最佳做法是像这样简单地使用标签元素：

```
<label id="labelone" for="myradiobutton"></label>

<input type="radio" value="xxx" id="myradiobutton"> 
```

然后你使用 css 来设置标签的样式。在您的情况下，可能会将您的图像添加为背景。

然后，您只需通过使用绝对定位将其移出屏幕来隐藏实际的单选按钮。注意不要使用 display:none 或 visibility:hidden 隐藏单选按钮，因为这不利于可访问性。

因此，用户将单击标签，然后将选择现在不在屏幕上的单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:46:38.360

我认为像你一样隐藏单选按钮并使用标签就足够了。但可能需要一些修正。标签中的“for”属性指向 id，而不是您现在正在执行的值。并使用名称对单选按钮进行分组，而不是像您现在所做的那样使用 id。

# php - PHP MySQL How can I paginate within two while loop

> ID：16189870
> 
> 赞同：0
> 
> 时间：2013-04-24T10:41:24.907
> 
> 标签：php, mysql, pagination, while-loop

I would like to know how can I do a LIMIT 0,10 in this case (in order to do a pagination later) because when I do this I obtain a total of 30 results (10 results for each result of the first loop) which is logical, any idea ?

```
$select = "SELECT X FROM Y"

$result = mysql_query($select,$link);

$total = mysql_num_rows($result);

while($row = mysql_fetch_array($result)) {

  $Name = $row['X'];
  $select2 = "SELECT id FROM `".$Name."` LIMIT 0,30 ";
  $result2 = mysql_query($select2,$link) or die ('Erreur : '.mysql_error() );
  $total2 = mysql_num_rows($result2);

  while($row2 = mysql_fetch_array($result2)) { 
     echo $row2['id']
  } 
} 
```

Thanks in advance for your help !

# c# - load datagrid ItemsSource from a Page to a Window

> ID：16189872
> 
> 赞同：0
> 
> 时间：2013-04-24T10:41:30.530
> 
> 标签：c#, wpf, xaml, wpf-controls

I am developing an application which uses `NavigationWindow` as follows:

1.  `NavigationWindow` as `Mainwindow`.

2.  `Page0.xaml` which has a 2 `DataGrid's` (dgMaster and dgDetail) in `Master Detail` scenairo.

3.  `Window1.xaml` which will be displayed as `ShowDialog()` on dgDetails's `Row_DoubleClick's` event setter as follows:

`Code behind`

```
public void Row_DoubleClick(object sender, RoutedEventArgs e)
{
    Window1 my_Window = new Window1();
    my_Window.ShowDialog();
} 
```

For point number 2, the code snippet is as follows:

```
// on datagrid row selection changed, it should load the ItemsSource in the Window1 datagrid. dg3 is the datagrid in Window1\. 
private void dgDetails_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    this.db = new testDB_Entities();
    string IDMapper = (dgDetails.SelectedItem as Details).Name;
    var Query1 = from a in this.db.Details
               orderby a.ID == IDMapper
               select a;

    dg3.DataContext = null;
    dg3.DataContext = Query1;
    dg3.Items.Refresh();
} 
```

The above codes together displays the `Window` as a `DialogBox`, but the `DataGrid` is empty. How to load the `ItemsSource` of the `DataGrid` in `Window1.xaml` from the `Page0.xaml dgDetails_SelectionChanged` event?

I understand that these controls belong separately to each xaml files, but is there a way to display a controls datacontext from another xaml ( regardless a page /window).

if anybody dont understand the question. please let me know.. i will try to explain it better.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:39:59.277

您正在使用选择更改事件，但您正在使用 ShowDialog() 打开 window.xaml，

ShowDialog() 将锁定页面，因此无法更改选择，

如果您正在使用 ShowDialog() 并且只想在对话框中显示，为什么不直接传递参数（我认为是：

```
string IDMapper = (dgDetails.SelectedItem as Details).Name 
```

到窗口的构造函数？

```
public void Row_DoubleClick(object sender, RoutedEventArgs e)
{

 string IDMapper = (dgDetails.SelectedItem as Details).Name;
 Window1 my_Window = new Window1(IDMapper );
 my_Window.ShowDialog();
} 
```

然后在 Window 构造函数或 Loaded 事件中执行查询

```
Window(string IDMapper)
{
    var Query1 = (from a in this.db.Details
               orderby a.ID == IDMapper
               select a).ToList();
} 
```

您需要从 Page 和 Window 访问数据，您应该将 EF 移动到都可以访问 Context 的数据层中，如果您只是将 Query 结果列表传递给 Window 构造函数

您还应该为您的 Window.xaml 选择不同的名称以避免混淆，因为您与 Window 冲突并因此具有 Window1，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:22:20.033

如果我理解正确，问题是在窗口中加载gridview。在这种情况下，一种选择是在窗口中创建一个公共集合（列表），并使用此公共列表设置 dg3 的项目源。

```
public List<String> source {set;get} 
```

在构造函数中

```
Window()
{
    \\initialize
    dg3.ItemSources=source;
} 
```

当您更改 dgdetail 选择时，请在窗口中为列表分配来自 dgdetail 的集合。

```
private void dgDetails_SelectionChanged(object sender, SelectionChangedEventArgs e)
   {
   this.db = new testDB_Entities();
   string IDMapper = (dgDetails.SelectedItem as Details).Name;
   var Query1 = (from a in this.db.Details
               orderby a.ID == IDMapper
               select a).ToList(); 
```

my_Window.source=查询1；

```
 } 
```

# arrays - What data structure should I use to store a collection of .fasta headers?

> ID：16189873
> 
> 赞同：1
> 
> 时间：2013-04-24T10:41:33.170
> 
> 标签：arrays, perl, hash, bioinformatics

I'm trying to write a perl program that will split up a fasta header:

```
gi|4140243|dbj|AB022087.1|_Xenopus_laevis_mRNA_for_cytochrome_P450,_complete_cds,_clone_MC1 
```

Into it's `|` seperated parts:

```
gi
4140243
dbj
AB022087.1
_Xenopus_laevis_mRNA_for_cytochrome_P450,_complete_cds,_clone_MC1 
```

I can do this using `split`:

```
my @hits = split(/\|/, $hits);

my ($gi, $number, $gb, $id, $name);
foreach (@hits) {
  $gi.= "$hits[0]\n";
  $number .= "$hits[1]\n";
  $gb .= "$hits[2]\n";
  $id .= "$hits[3]\n";
  $name .= "$hits[4]\n";
}

my @gi = split('\n', $gi);
my @number = split('\n', $number);
my @gb = split('\n', $gb);
my @id = split('\n', $id);
my @name = split('\n', $name); 
```

Now each part of each header (contained in `$hits`) is an element in an individual array. What I want to do next is print back each element of each array so that I can produce a list of element[0] for each array, element[1] for each array...

I'm unsure as to whether this will require a hash of hashes or array of arrays.

I'm fairly new to perl so any suggestions would be greatly helpful.

I'm also aware that the above might not be the slickest way of achieving what I want - again any comments would be great!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:08:32.183

$hits 包含一个还是多个标题？如果它只有一个，那么要将其拆分为变量，您可以执行以下操作：

```
my ($gi, $number, $gb, $id, $name) = split(/\|/, $hits); 
```

每个变量都将包含相应的值。

如果 $hits 包含多个标题，那么首先只拆分行，然后在循环中拆分每个标题。这是一个示例，结果将是哈希数组：

```
my @hits = split(/\n/, $hits);
my @result;
for my hit ( @hits ) {
    my ($gi, $number, $gb, $id, $name) = split(/\|/, $hits);
    push(@result, {
        gi => $gi,
        number => $number,
        gb => $gb,
        id => $id,
        name => $name,
    });
} 
```

当然，该示例不包括任何错误检查（例如 - 标头字符串是否真的与格式匹配？），但如果需要，您应该将它们包含在实际应用程序中。

PS：我认为你真的必须从[那个开始](http://perldoc.perl.org/index-tutorials.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:05:18.310

一般来说，数组用于同质数据（“一堆东西”），而哈希用于异构数据（“姓名、数字和生日”）。如果你的数据自然分裂成一堆内部异构的东西（“一堆个人信息记录，每条都有名字、数字和生日”），那么自然的数据结构就是一个 hashref 数组（见注#1）。

在您的情况下，`$hits`是标题列表。因此，我们将创建一个数组，称为它`@headers`，其中的每个元素都是一个单独的标头，表示为 hashref。我们可以用 将分隔字符串转换为列表`split`，也可以用 将一种列表转换为另一种列表`map`：

```
my @headers = map {
    make_header_hashref($_)
} split(/\n/, $hits);

sub make_header_hashref {
    my ($header_string) = @_;
    my ($gi, $number, $gb, $id, $name) = split(/\|/, $header_string);

    return {
        gi      => $gi,
        number  => $number,
        gb      => $gb,
        id      => $id,
        name    => $name,
    };
} 
```

（我将标头字符串到标头 hashref 的转换拆分为一个子项，因为（a）这就是您在实际代码中所做的，并且（b）它阐明了 .）的结构`map`。）

您现在有一个 hashrefs 数组，因此您可以遍历它们，否则将标头作为单元而不是属性集合来处理。

note#1：嗯，我们真的想要一个描述关联的对象，实现为表示记录的对象数组。

# jquery - 根据复选框设置输入文本值

> ID：16189874
> 
> 赞同：0
> 
> 时间：2013-04-24T10:41:36.627
> 
> 标签：jquery, jsp

在我的 JSP 页面中，我添加了一些复选框和一个文本字段。`DIV`使用`style:"display:"none;"` 如果选中一个复选框，则该文本字段被隐藏，所有其他复选框将被禁用。该复选框的值也设置为输入字段。如果取消选中，则该值也将为空。

直到它对我有用。最后，我还有一个复选框（比如自定义）。如果选中该复选框，则所有其他复选框将被禁用，并且将显示文本字段（使用 div 隐藏的相同字段）并且用户可以输入值。问题是，如果用户选中最后一个复选框并输入一些值，如果他取消选中，则该值不会设置为 null，然后如果他也选中其他复选框，则该值不会更改为选中框的值。（该值将是一位用户输入）。

这是我的 JSP 代码

```
<div class="control-group">
                <label class="control-label">Please choose delimiter:</label>
                <div class="controls">
                    <ul class="nav nav-list">
                        <li><input class="staticdel" type="checkbox" id="," value="," />&nbsp;Comma(,)</li>
                        <li><input class="staticdel" type="checkbox" id="|" value="|" />&nbsp;Pipe
                            Delimiter(|)</li>
                        <li><input type="checkbox" id="custom" />&nbsp;Custom(Specify)</li>
                    </ul>
                </div>
            </div>

            <div id="specify" class="control-group" style="display: none;">
                <label class="control-label" for="delimiter">Please provide
                    the delimiter:</label>
                <div class="controls">
                    <input id="customdelimiter" type="text" name="delimiter"
                        placeholder="Specify Delimiter" />
                </div>
            </div> 
```

这是我的 jQuery

```
<script>
        $(document).ready(function() {
            $('input[type=checkbox]').change(function() {
                if ($(this).is(':checked')) {
                    $('input[type=checkbox]').attr('disabled', true);
                    $(this).attr('disabled', false);
                    var delValue = $(this).val();
                    $('#customdelimiter').attr('value', delValue);

                } else {
                    $('input[type=checkbox]').attr('disabled', false);
                    $('#customdelimiter').attr('value', '');
                }
            });
            $('#custom').change(function() {
                if ($(this).is(':checked')) {
                    $('#customdelimiter').attr('value', '');
                    $('#specify').slideDown("slow");
                } else {
                    $('#specify').slideUp("slow");
                    $('#customdelimiter').attr('value', '');
                }
            });
        });
    </script> 
```

因此，当我提交表单时，即使选中了其他复选框，文本框的值也将是用户输入的一个用户。

演示：[问题](http://jsfiddle.net/arunpjohny/qg7f5/2/)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:50:20.057

使用[.val()](http://api.jquery.com/val/)来设置值，而不是使用[.attr('value', '')](http://api.jquery.com/attr/)。

```
$('#customdelimiter').val(''); 
```

还可以更改运行时属性，例如`checked`并`disabled`使用[prop()](http://api.jquery.com/prop/)而不是[attr()](http://api.jquery.com/attr/)

```
$('input[type=checkbox]').attr('disabled', true); 
```

前任：

```
$(document).ready(function() {
    $('input[type=checkbox]').change(function() {
        if ($(this).is(':checked')) {
            $('input[type=checkbox]').attr('disabled', true);
            $(this).attr('disabled', false);

            $('#customdelimiter').val($(this).val());
        } else {
            $('input[type=checkbox]').attr('disabled', false);
            $('#customdelimiter').val('');
        }
    });
    $('#custom').change(function() {
        $('#customdelimiter').val('');
        if ($(this).is(':checked')) {
            $('#specify').slideDown("slow");
        } else {
            $('#specify').slideUp("slow");
        }
    });
}); 
```

更精致的样本

```
$(document).ready(function() {
    var chks,customdelimiter=  $('#customdelimiter'), specify = $('#specify');
    chks = $('input[type=checkbox]').change(function() {
        if ($(this).is(':checked')) {
            chks.not(this).prop('disabled', true);

            customdelimiter.val($(this).val());
        } else {
            chks.prop('disabled', false);
            customdelimiter.val('');
        }
    });
    $('#custom').change(function() {
        customdelimiter.val('');
        if ($(this).is(':checked')) {
            specify.slideDown("slow");
        } else {
            specify.slideUp("slow");
        }
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qg7f5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:53:58.953

HTML：

```
<div class="control-group">
    <label class="control-label">Please choose delimiter:</label>
    <div class="controls">
        <ul class="nav nav-list">
            <li><input class="staticdel" type="checkbox"  value="," />&nbsp;Comma(,)</li>
            <li><input class="staticdel" type="checkbox"  value="|" />&nbsp;Pipe
                Delimiter(|)</li>
            <li><input type="checkbox" id="custom" />&nbsp;Custom(Specify)</li>
        </ul>
    </div>
</div>

<div id="specify" class="control-group" style="display: none;">
    <label class="control-label" for="delimiter">Please provide
        the delimiter:</label>
    <div class="controls">
        <input id="customdelimiter" type="text" name="delimiter"
               placeholder="Specify Delimiter" />
    </div>
</div> 
```

脚本：

```
$('input[type=checkbox]').change(function() {
    if ($(this).is(':checked')) {
        $('input[type=checkbox]').attr('disabled', true);
        $(this).attr('disabled', false);
        if ($(this).attr('id') != 'custom') {
            var delValue = $(this).val();
            $('#customdelimiter').val(delValue);
        }
        $('#specify').show();
    } else {
        $('input[type=checkbox]').attr('disabled', false);
        $('#customdelimiter').val('').closest('#specify').hide();
        ;
    }
}); 
```

# sql - 使用 SQL 判断一个相关表的所有记录是否具有相同的值

> ID：16189875
> 
> 赞同：3
> 
> 时间：2013-04-24T10:41:40.943
> 
> 标签：sql, stored-procedures, plsql

我正在尝试创建一个存储过程，它将根据相关表中的某些值更新一个表上的记录：

MainTable 包含一个状态字段，并且与也有一个状态字段的 SubTable 相关。我需要更新 MainTable 中每条记录的状态，其中 SubTable 中的所有相关记录都具有相同的状态 x。我已经尝试了几个查询，但认为我以错误的方式处理它。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:45:32.223

尝试这个 ：

```
Update schema.yourtable s set s.fieldtoupdate = (
Select e.Relationalfield from schema.RealtionalTable  e where e.STATUSFIELD = s.STATUSFIELD); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:47:56.793

例如有下表：

```
 Producer ( Code,Name,Status)
   Goods    ( GCode,PCode( Producer Code),Name,Status) 
```

和查询：

```
Update   Producer  set Status=F  
where not exists (select * from Goods where Status <> X and Goods.PCode= Producer.Code) 
```

# dialog - Jquery dialog box issue - replace alert by dialog

> ID：16189876
> 
> 赞同：0
> 
> 时间：2013-04-24T10:41:48.220
> 
> 标签：dialog, alert

I try to have a function to display a box with calling dialog('Hello') for example. I just want to replace the basic function alert by dialog jquery but I don't succeed.

Please help me

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:48:38.740

```
 **Steps** : 
```

> 创建一个带有 id 的 div : 对话框。还设置它的类
> 
> 设置类**显示的css属性：无**
> 
> **居中**对齐，宽度和高度为 25%
> 
> 创建一个接受**msg**作为参数的函数**dialog(str)**
> 
>  **使用 jquery 更改 div 对话框的类并设置 css 属性**display:block**
> 
> 在您创建的 div 中放置一个小 ok 按钮并将其单击事件映射到隐藏 div 或 set 属性的函数：**display:none****

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:49:33.803

一旦我使用它，我就开始工作了。

```
$(function() {
    $( "#messagebox" ).dialog();
  }); 
```

您需要一些信息才能使用此代码进入该框中。

```
 <div id="messagebox" title="some title">
      <p>You type your message here</p>
    </div> 
```

您使用 id 来识别哪个盒子，然后其余的给自己 :) 祝你好运.. 希望它有所帮助。应该很容易。**

# android - possible to change text size/color for ActionBar?

> ID：16189877
> 
> 赞同：4
> 
> 时间：2013-04-24T10:41:48.970
> 
> 标签：android, text, size, actionbarsherlock

Is there possible way to change size/color of ActionBar's title and subtitle?

I am using ActionBarSherlock for bridging between lower and higher versions. ActionBarSherlock provides way to customize text style in SherlockActionBarCompat, but there seems no way to make it in SherlockActionBarNative.

*edit:* added by Jake and removed by author

*edit:* Close to the solution:

```
<style name="resizeableTitleStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title.Inverse">
    <item name="android:textSize">@dimen/action_bar_title_text_size</item>
</style>

<style name="Theme.ResizeableActionBar" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/resizeableActionBarStyle</item>
    <item name="android:actionBarStyle">@style/resizeableActionBarStyle</item>
    <item name="actionBarSize">60dp</item>
    <item name="android:actionBarSize">60dp</item>
</style>

<style name="resizeableActionBarStyle" parent="@style/Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="titleTextStyle">@style/resizeableTitleStyle</item>
    <item name="android:titleTextStyle">@style/resizeableTitleStyle</item>
</style> 
```

Thank Jake, the author of ABS, for the help.

Now it's almost done, except that the actionBarSize can only be estimated for an approximate absolute dimension(60dp for my app) from quite a few trials; wrap_content causes API2.2 to expand the whole screen and does API4.2.2 exception thrown while parsing xml.

**Addition**:
when actionBarSize set as 0dp, the output is as ([http://i.stack.imgur.com/xX4E1.png](http://i.stack.imgur.com/xX4E1.png) , low reputation to post images here directly): API2.2 in the left, the action bar occupies the whole screen without content, API4.2.2 in the right, content does without action bar.

when set as wrap_content, same output for API2.2, and exception thrown as: Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x10

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T10:43:09.410

对的，这是可能的。您可以通过以下方式通过样式来做到这一点：

```
<style name="MyTheme.ActionBar.TitleTextStyle" parent="@android:style/TextAppearance.Medium">
        <item name="android:textColor">@color/green_text_color</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">@dimen/actionbar_textsize</item>
</style> 
```

并将其用于：

```
 <item name="titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item>
 <item name="android:titleTextStyle">@style/MyTheme.ActionBar.TitleTextStyle</item> 
```

# struts2 - struts 2 rest plugin client program

> ID：16189879
> 
> 赞同：0
> 
> 时间：2013-04-24T10:42:10.970
> 
> 标签：struts2, struts-config

i am writing the client web jsp page just like having one form(get) with user name search text box and submit button

when the user submits it returns the json format of user

but the url looks like when i submit it

[http://myhost.net:8080?user=pavan&method.execute=submit](http://myhost.net:8080?user=pavan&method.execute=submit) how can i convert this url to below one in struts2 .

[http://myhost.net:8080/user/pavan](http://myhost.net:8080/user/pavan)

is there any .htaccess file in struts2

```
@Results( { @Result(name = "success", type = "redirectAction") })
public class UsersController implements ModelDriven<Object>,
ServletRequestAware {
private String username;
private HttpServletRequest request;
private String representation;

// GET /users/{username}
public HttpHeaders show() {
String acceptHeader = request.getHeader("Accept");
String type = "xml";
if (acceptHeader == null || acceptHeader.isEmpty() ||
acceptHeader.equals("application/xml")) {
representation = UserBO.getXML(username);
} else if (acceptHeader.equals("application/json")) {
representation = UserBO.getJSON(username);
type = "json";
}
return new DefaultHttpHeaders(type).disableCaching();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:01:24.590

您可以使用[`Parameters after the Action name`](http://struts.apache.org/release/2.3.x/docs/wildcard-mappings.html).

> 要在 URL 中使用参数，请确保在操作名称之后设置：
> 
> ```
> <constant name="struts.enable.SlashesInActionNames" value="true"/>
> <constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/> 
> ```
> 
> 然后动作映射将如下所示：
> 
> ```
> <package name="edit" extends="struts-default" namespace="/edit">
>   <action name="/person/*" class="org.apache.struts.webapp.example.EditAction">
>       <param name="id">{1}</param>
>       <result>/mainMenu.jsp</result>
>   </action>   
> </package> 
> ```
> 
> 当请求**/edit/person/123**之类的 URL 时，将调用**EditAction ，其“** **id** ”字段将设置为**123**。

# selenium - 在 testNG ITestListener 中获取测试方法的注释

> ID：16189882
> 
> 赞同：1
> 
> 时间：2013-04-24T10:42:23.157
> 
> 标签：selenium, testng, testlink

我正在尝试将 TestLink 与 TestNG 方法集成如下

1>用 onTestFailure 和 onTestSuccess 编写 ITestListner

2> 获取在变量中失败/成功的方法的注释（如 testName，相当于 testlink 中的测试名称）

3>使用可用的API与TestLink建立连接并更新测试用例。

但是我正在努力在 ITestListner 中找到方法注释值，并且要求仅在 ITestListner 中获取注释值，以便可以在 Test_link 中更新正确的测试用例

有人可以帮我如何在 ITestListner 或任何其他方法中获取测试方法注释值，在这些方法中我可以将 testlink 更新与 TestNG 集成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:02:48.323

嗨，感谢 niharika 的帮助，首先，您在解释 TestNG 的使用方面是正确的，但我们正在将 TestNG 用于 Selenium，并且已经在测试方法中编写了大约 1000 个测试用例，我们必须忍受

我如何想出解决方案，我们仍然可以使用两个侦听器获取测试方法的 testName 这只是解决方法我不确定这是否是最好的方法，但截至目前解决我的目的

```
package com.automation.testng.listner;
import org.testng.*;

public class MyIInvokeMethodListner_TestName_TestLink implements IInvokedMethodListener    {

public static String testName;

public void afterInvocation(IInvokedMethod arg0, ITestResult arg1) {
    // TODO Auto-generated method stub

}

public void beforeInvocation(IInvokedMethod m, ITestResult tr) {
    // TODO Auto-generated method stub
    //This give the Annotation Test object
    org.testng.annotations.Test t=m.getTestMethod().getMethod().getAnnotation(org.testng.annotations.Test.class);

    MyIInvokeMethodListner_TestName_TestLink.testName = t.testName().toString();

}

} 
```

MyITestListner 如下所示

```
package com.automation.testng.listner;
import org.testng.*;
public class MyITestListner_TestLink extends TestListenerAdapter  {

/*IAnnotationTransformer at;
public Listner_1()
{
    this.at = new Annotation_listner();
}*/
@Override
public void onTestFailure(ITestResult tr)
{
    System.out.println("Hurray !I am being inboked from Test listner");
    MyIInvokeMethodListner_TestName_TestLink a = new MyIInvokeMethodListner_TestName_TestLink();
    System.out.println(MyIInvokeMethodListner_TestName_TestLink.testName);

    }

public void onTestSuccess(ITestResult tr)
{
    MyIInvokeMethodListner_TestName_TestLink a = new MyIInvokeMethodListner_TestName_TestLink();
    System.out.println(MyIInvokeMethodListner_TestName_TestLink.testName);
}

} 
```

基本上我们正在获取方法，然后使用 Test Annotation 类设置可以在 MyITestListner 中使用的静态变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:52:42.097

ITestListener 是在`<test>`标签之后使用的。要获取方法名称和注释细节，您需要`IInvokedMethodListener`在此接口的 after/before 方法中实现 and ，并使用类似的东西`method.getTestMethod().getMethodName()`来获取正在执行的方法名称。

如果您在方法级别添加 testName ，我认为您做错了，因为 testng 的帮助提到了这个“这个测试类应该放在的测试的名称。如果 @Test 不在类中，则忽略此属性等级。”

如果您确实在您的班级级别指定了@Test，那么您可以得到它，如下所示：

```
method.getTestMethod().getTestClass().getTestName() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T20:35:08.800

有点难看，您可能希望将这些部分包装在代码中的空检查中，但这是您从 ITestResult 获取注释中指定的 testName 的方式：

```
iTestResult.getMethod().getConstructorOrMethod().getMethod().getAnnotation(Test.class).testName() 
```

# sql-server - Install BIDS 2008 with SQL Server 2012 Environment

> ID：16189883
> 
> 赞同：0
> 
> 时间：2013-04-24T10:42:40.680
> 
> 标签：sql-server, sql-server-2008, bids

I have installed VS2012 and SqlServer2012 in my machine. I have installed sql server data tools 2012 in other to enable BI project in my VS environment.

Now, I'm having a project which the project requirement is using BIDS 2008.

The question is :

*   Can I install only the BIDS 2008 side by side with my BIDS 2012 along in my machine?
*   How can I fix this situation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T16:44:12.763

You can install both side-by-side, but you will have to ensure that your SQL 2008 install is slipstreamed with **SP3** to ensure it will install on Windows 8.

Windows8 supported SQL Server versions: [http://blogs.msdn.com/b/psssql/archive/2012/09/01/installing-sql-server-on-windows-8.aspx](http://blogs.msdn.com/b/psssql/archive/2012/09/01/installing-sql-server-on-windows-8.aspx)

How to slipstream SQL 2008 installer: [http://support.microsoft.com/kb/955392](http://support.microsoft.com/kb/955392)

# android - how to parse through complex soap objects in Android

> ID：16189887
> 
> 赞同：2
> 
> 时间：2013-04-24T10:42:49.710
> 
> 标签：android, web-services, soap, ksoap2

Hello Friends i am using soap web services very first time in my code. but i am not getting how to handle nested soap objects. this is my code

```
private final String URL = "http://192.168.0.20/BookingEngineService/HotelBookingService.asmx";
    private final String SOAP_ACTION = "http://tempuri.org/AndroidTestRequest";
    private final String METHOD_NAME = "AndroidTestRequest";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("User", "abcd@xyz.com");
        request.addProperty("Password", "abcd@123");
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.headerOut = new Element[1];
        envelope.headerOut[0] = buildAuthHeader();
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            Log.i("myAppEnvelope", envelope.toString());

            SoapObject response = (SoapObject) envelope.getResponse();

        // here i am trying to get values from response which is soap object 

            for (int i = 0; i < response.getPropertyCount(); i++) {

                SoapObject con = (SoapObject) response.getProperty(i);

                Log.e("Continent", con.toString());
            }

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

i am getting soap object as a response and which is very complex so i am not getting how to parse it. [this is my response](http://pastie.org/7708025) this is very small part of my response.

I am not getting how to get values from SoapObject -> Properties -> elementData -> value-> property -> elementData and so on ... its too complex please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:22:54.183

您可以将肥皂对象转换为字符串。检查下面的示例代码例如：

```
 final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
     final String str = response.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:45:21.693

这是一个简单的 XML 解析。通过[链接](http://developer.android.com/training/basics/network-ops/xml.html)了解更多详细信息。

您可以将响应作为输入流获取并将其转换为字符串，然后使用该字符串，您可以创建一个 XML 对象。请参阅链接以获取更多信息。

# c# - 使用 .net2 返回委托的方法

> ID：16189888
> 
> 赞同：2
> 
> 时间：2013-04-24T10:42:53.930
> 
> 标签：c#, .net, delegates, .net-2.0, anonymous-delegates

我一直在 .net 4 中工作，并且非常享受从单一方法返回定制函数的能力，例如：

```
public Func<object, object> FunctionBuilder(object o) 
{ /*build functions, woo*/ } 
```

`Func`...但是，由于出现在 .net3.5(?) 中，因此在 .net2 中如果不是不可能的话，这似乎非常困难，例如：

```
public delegate<object> FunctionBuilder(object o) 
{ /*nope*/ } 
```

...不是有效的语法..

甚至可以从 .net2 中的方法返回定制函数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T10:47:44.787

> 甚至可以从 .net2 中的方法返回定制函数吗？

绝对可以，但是您需要返回特定的委托类型。

最简单的事情可能是声明您自己的通用委托，例如

```
public delegate TResult ProjectFunc<T, TResult>(T arg) 
```

接着：

```
public ProjectFunc<object, object> FunctionBuilder(object o) 
```

然后，如果/当您的项目迁移到 .NET 3.5 时，您可以删除`ProjectFunc`并`Func`改为使用。我们[在 Noda Time 中采用了这种精确的方法](https://code.google.com/p/noda-time/source/browse/src/NodaTime/Delegates.cs)（实际上现在无论如何都使用 .NET 3.5）并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:47:44.850

你应该使用这个构造。

```
delegate object MyDelegate(object);

MyDelegate FunctionBuilder()
{

} 
```

# vb.net - 将状态条标签切割成表格宽度

> ID：16189893
> 
> 赞同：1
> 
> 时间：2013-04-24T10:43:19.200
> 
> 标签：vb.net, winforms, label

我有一个带有状态条的表单，其中包含一个进度条和一个标签。这两者都用于向用户显示几个后台工作人员的状态/进度。

我的问题是，有时标签长于表单宽（它包含长度变化很大的参数名称）。该表单具有恒定的宽度，并且用户无法调整其大小。当出现此问题时，标签只是显示为空白，我想将标签切割成表单的长度并在最后连接“...”。

谁能给我一些建议，从哪里开始？我已经尝试过 Google 和 SO 搜索，但无法找到类似的东西。我基本上需要找到字符串的长度，因为它将显示在表单上，​​但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:03:54.893

首先要做的是将`StatusStrip.LayoutStyle`from更改`Table`为`Flow`。这将防止标签消失。接下来，您仍然希望用户有机会阅读标签的全文，即使它已被截断。将`StatusStrip.ShowItemToolTips`属性设置为`True`并将标签设置`AutoToolTip`为`True`。

让标签的文本不与手柄重叠是一个更难解决的问题，但是由于您使表单无法调整大小，因此您没有这个问题。将表单的`SizeGripStyle`属性设置为`Hide`。

这将解决您的问题，无需代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:01:58.823

你可以尝试这样的事情：

```
Private Sub Label1_Click(sender As Object, e As EventArgs) Handles Label1.Click
    If Label1.Text.Length > iMaxLblLenght Then
        Label1.Text = Label1.Text.Substring(0, iMaxLblLenght) & "..."
    End If
End Sub 
```

# ruby-on-rails - link_to 中的语法错误

> ID：16189895
> 
> 赞同：0
> 
> 时间：2013-04-24T10:43:19.923
> 
> 标签：ruby-on-rails

```
<%= link_to('Forside', '/startpages', html_options = {"class", (params[:controller] == "startpages") ? "menu-highlighted" : ""}) + " | " %> 
```

使用`Rails 3.2.11`.

我得到的错误是

```
syntax error, unexpected ',', expecting tASSOC
...ages', html_options = {"class", (params[:controller] == "sta... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:49:03.367

一个更简单的版本`link_to`

```
= link_to('Forside', '/startpages', :class => ('menu-highlighted' if params[:controller] == 'startpages')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:46:11.093

```
{"class", (params[:controller] == "startpages") ? "menu-highlighted" : ""} 
```

应该

```
{"class" => (params[:controller] == "startpages") ? "menu-highlighted" : ""} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:51:24.937

第三个参数默认用作 html_options。您不必在 link_to 语句中使用它。

# .net - 如果来自客户端的 SOAP 消息不包含服务标识符/URI，WCF 服务能否接收消息

> ID：16189898
> 
> 赞同：2
> 
> 时间：2013-04-24T10:43:32.103
> 
> 标签：.net, wcf, web-services, c#-4.0

我正在尝试创建一个 WCF 服务，该服务应该能够接收第 3 方客户端的请求，其请求与 SOAP 1.1 兼容

来自第 3 部分 POST / HTTP/1.1 SOAPAction 的请求：http: [//tempuri.org/ITestService/Hello](http://tempuri.org/ITestService/Hello) Content-Type: text/xml; charset=utf-8 主机：100.10.1.104:8000 内容长度：297 预期：100-继续连接：关闭 ...

只有在 POST 请求中指定了 URI/服务标识符时，我的 WCF 服务才能识别请求。即 POST /MyTestService/TestService HTTP/1.1 如果没有指定 URI，WCF 服务能否接收请求？如何做到这一点？

谢谢

# asp.net - 如何将整数集合传递给动作控制器

> ID：16189899
> 
> 赞同：1
> 
> 时间：2013-04-24T10:43:34.440
> 
> 标签：asp.net, asp.net-mvc

我有以下方式的 URL：`//...../controller/action?a=1&a=2&a=3&a=4`

是否可以让控制器将 a 转换为`int`如下示例中的集合：

```
public  ActionResult Action(int[] a) {.....} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:40:36.210

我认为我们不能有多个同名的查询字符串参数。应该是`//...../controller/action?a=1,2,3,4`

```
public  ActionResult Action(string a) 
{
    var aStrs = a.Split(',');
    var aInts = aStrs.Select(int.Parse).ToList();
} 
```

# javascript - 是否可以检测是否支持 CSS 滤镜效果？

> ID：16189905
> 
> 赞同：6
> 
> 时间：2013-04-24T10:44:00.783
> 
> 标签：javascript, css

[CSS 滤镜效果](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html#FilterProperty)目前处于草稿阶段，但已被 chrome 支持。它提供了对图像应用效果的可能性：

> CSS filter 属性提供了在元素显示之前对元素的渲染进行模糊或颜色转换等效果。滤镜通常用于调整图像、背景或边框的渲染。
> 
> CSS 标准中包含几个实现预定义效果的函数。您还可以使用指向 SVG 过滤器元素的 URL 来引用 SVG 中指定的过滤器。（[来源](https://developer.mozilla.org/de/docs/CSS/filter#Browser_compatibility)）

据我所知，CSS 滤镜效果仅在 Chrome 18+ 中受支持，但是是否可以通过 JavaScript 或一些 CSS 技巧检测 CSS 滤镜效果的可用性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T10:47:11.513

我相信您可以使用**[Modernizr](http://modernizr.com/)** Javascript 库进行 CSS3 功能检测。

根据以下链接，（从 Modernizr 2.6 开始）Modernizr 现在可用于 CSS 过滤器检测：

[http://www.browserleaks.com/modernizr#filter](http://www.browserleaks.com/modernizr#filter)

[http://modernizr.com/news/](http://modernizr.com/news/)（在测试改进部分下）。

和[http://modernizr.com/news/modernizr-260/](http://modernizr.com/news/modernizr-260/)。

# ssh - 不能接受 publickey ssh 但 id_rsa.pub 在 authorized_keys

> ID：16189914
> 
> 赞同：4
> 
> 时间：2013-04-24T10:44:31.127
> 
> 标签：ssh, virtualbox

/更新：问题细化为：无法打开授权密钥。/

我在 Virtualbox 中有一个 Ubuntu 服务器，我尝试通过 ssh 登录，但每次询问登录密码时，pubkey 都不起作用。

概要：Vbox 中的 Ubuntu 服务器 12.04.2 LTS。仅主机网络配置。静态 ip 192.168.56.10 标准 OpenSSH 服务器。主机 id_rsa.pub 被添加到客户端 authorized_keys 文件中。

```
g2ra@host:~$ cat .ssh/id_rsa.pub | ssh -p 22 g2ra@192.168.56.10 'cat >> .ssh/authorized_keys' 
```

~/.ssh 权限是正确的 chmod。

```
g2ra@host:~$ ll .ssh/
total 68
drwx------  2 g2ra g2ra  4096 Apr 24 00:31 ./
drwx------ 81 g2ra g2ra 28672 Apr 24 09:37 ../
-rw-------  1 g2ra g2ra  1766 Mar 27 10:12 id_rsa
-rw-------  1 g2ra g2ra   397 Mar 27 10:12 id_rsa.pub
-rw-------  1 g2ra g2ra  1110 Apr 24 11:23 known_hosts 
```

这是调试消息：

```
~$ ssh -v -l g2ra -p 22 192.168.56.10
OpenSSH_5.9p1 Debian-5ubuntu1.1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug1: Connecting to 192.168.56.10 [192.168.56.10] port 22.
debug1: Connection established.
debug1: identity file /home/g2ra/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/g2ra/.ssh/id_rsa-cert type -1
debug1: identity file /home/g2ra/.ssh/id_dsa type -1
debug1: identity file /home/g2ra/.ssh/id_dsa-cert type -1
debug1: identity file /home/g2ra/.ssh/id_ecdsa type -1
debug1: identity file /home/g2ra/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9p1 Debian-5ubuntu1.1
debug1: match: OpenSSH_5.9p1 Debian-5ubuntu1.1 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1.1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: sending SSH2_MSG_KEX_ECDH_INIT
debug1: expecting SSH2_MSG_KEX_ECDH_REPLY
debug1: Server host key: ECDSA 00:00:00:87:00:0a:3d:e1:aa:78:ac:05:00:00:0e:00
debug1: Host '192.168.56.10' is known and matches the ECDSA host key.
debug1: Found key in /home/g2ra/.ssh/known_hosts:5
debug1: ssh_ecdsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey,password
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/g2ra/.ssh/id_rsa
debug1: Authentications that can continue: publickey,password
debug1: Trying private key: /home/g2ra/.ssh/id_dsa
debug1: Trying private key: /home/g2ra/.ssh/id_ecdsa
debug1: Next authentication method: password 
```

这是我在 Vbox 中的 Ubuntu 服务器上的 sshd 配置：

```
Port 22
# Use these options to restrict which interfaces/protocols sshd will bind to
#ListenAddress ::
#ListenAddress 0.0.0.0
Protocol 2
# HostKeys for protocol version 2
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_dsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
#Privilege Separation is turned on for security
UsePrivilegeSeparation yes

# Lifetime and size of ephemeral version 1 server key
KeyRegenerationInterval 3600
ServerKeyBits 768

# Logging
SyslogFacility AUTH
LogLevel INFO

# Authentication:
LoginGraceTime 120
PermitRootLogin yes
StrictModes yes

RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile      %h/.ssh/authorized_keys

# Don't read the user's ~/.rhosts and ~/.shosts files
IgnoreRhosts yes
# For this to work you will also need host keys in /etc/ssh_known_hosts
RhostsRSAAuthentication no
# similar for protocol version 2
HostbasedAuthentication no
# Uncomment if you don't trust ~/.ssh/known_hosts for RhostsRSAAuthentication
#IgnoreUserKnownHosts yes

# To enable empty passwords, change to yes (NOT RECOMMENDED)
PermitEmptyPasswords no

# Change to yes to enable challenge-response passwords (beware issues with
# some PAM modules and threads)
ChallengeResponseAuthentication no

# Change to no to disable tunnelled clear text passwords
#PasswordAuthentication yes

# Kerberos options
#KerberosAuthentication no
#KerberosGetAFSToken no
#KerberosOrLocalPasswd yes
#KerberosTicketCleanup yes

# GSSAPI options
#GSSAPIAuthentication no
#GSSAPICleanupCredentials yes

X11Forwarding yes
X11DisplayOffset 10
PrintMotd no
PrintLastLog yes
TCPKeepAlive yes
#UseLogin no

#MaxStartups 10:30:60
#Banner /etc/issue.net

# Allow client to pass locale environment variables
AcceptEnv LANG LC_*

Subsystem sftp /usr/lib/openssh/sftp-server

# Set this to 'yes' to enable PAM authentication, account processing,
# and session processing. If this is enabled, PAM authentication will
# be allowed through the ChallengeResponseAuthentication and
# PasswordAuthentication.  Depending on your PAM configuration,
# PAM authentication via ChallengeResponseAuthentication may bypass
# the setting of "PermitRootLogin without-password".
# If you just want the PAM account and session checks to run without
# PAM authentication, then enable this but set PasswordAuthentication
# and ChallengeResponseAuthentication to 'no'.
UsePAM yes 
```

更新。详细级别在 sshd 配置中增加到 DEBUG。在 Ubuntu 服务器 Vbox 上。

```
grep 'ssh'/var/log/auth.log 

Apr 24 13:57:03 host sshd[19731]: debug1: Client protocol version 2.0; client software version OpenSSH_5.9p1 Debian-5ubuntu1.1
Apr 24 13:57:03 host sshd[19731]: debug1: match: OpenSSH_5.9p1 Debian-5ubuntu1.1 pat OpenSSH*
Apr 24 13:57:03 host sshd[19731]: debug1: Enabling compatibility mode for protocol 2.0
Apr 24 13:57:03 host sshd[19731]: debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1.1
Apr 24 13:57:03 host sshd[19731]: debug1: permanently_set_uid: 105/65534 [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: list_hostkey_types: ssh-rsa,ssh-dss,ecdsa-sha2-nistp256 [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: SSH2_MSG_KEXINIT sent [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: SSH2_MSG_KEXINIT received [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: kex: client->server aes128-ctr hmac-md5 none [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: kex: server->client aes128-ctr hmac-md5 none [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: expecting SSH2_MSG_KEX_ECDH_INIT [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: SSH2_MSG_NEWKEYS sent [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: expecting SSH2_MSG_NEWKEYS [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: SSH2_MSG_NEWKEYS received [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: KEX done [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: userauth-request for user g2ra service ssh-connection method none [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: attempt 0 failures 0 [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: PAM: initializing for "g2ra"
Apr 24 13:57:03 host sshd[19731]: debug1: PAM: setting PAM_RHOST to "192.168.56.1"
Apr 24 13:57:03 host sshd[19731]: debug1: PAM: setting PAM_TTY to "ssh"
Apr 24 13:57:03 host sshd[19731]: debug1: userauth-request for user g2ra service ssh-connection method publickey [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: attempt 1 failures 0 [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: test whether pkalg/pkblob are acceptable [preauth]
Apr 24 13:57:03 host sshd[19731]: debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
Apr 24 13:57:03 host sshd[19731]: debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
Apr 24 13:57:03 host sshd[19731]: debug1: temporarily_use_uid: 1000/1000 (e=0/0)
Apr 24 13:57:03 host sshd[19731]: debug1: trying public key file /home/g2ra/.ssh/authorized_keys
Apr 24 13:57:03 host sshd[19731]: debug1: Could not open authorized keys '/home/g2ra/.ssh/authorized_keys': No such file or directory
Apr 24 13:57:03 host sshd[19731]: debug1: restore_uid: 0/0
Apr 24 13:57:03 host sshd[19731]: Failed publickey for g2ra from 192.168.56.1 port 51041 ssh2
Apr 24 13:57:07 host sshd[19731]: debug1: userauth-request for user g2ra service ssh-connection method password [preauth]
Apr 24 13:57:07 host sshd[19731]: debug1: attempt 2 failures 1 [preauth]
Apr 24 13:57:07 host sshd[19733]: pam_ecryptfs: Passphrase file wrapped
Apr 24 13:57:08 host sshd[19731]: debug1: PAM: password authentication accepted for g2ra
Apr 24 13:57:08 host sshd[19731]: debug1: do_pam_account: called
Apr 24 13:57:08 host sshd[19731]: Accepted password for g2ra from 192.168.56.1 port 51041 ssh2
Apr 24 13:57:08 host sshd[19731]: debug1: monitor_read_log: child log fd closed
Apr 24 13:57:08 host sshd[19731]: debug1: monitor_child_preauth: g2ra has been authenticated by privileged process
Apr 24 13:57:08 host sshd[19731]: debug1: PAM: establishing credentials
Apr 24 13:57:08 host sshd[19731]: pam_unix(sshd:session): session opened for user g2ra by (uid=0)
Apr 24 13:57:09 host sshd[19731]: User child is on pid 19871
Apr 24 13:57:09 host sshd[19871]: debug1: SELinux support disabled
Apr 24 13:57:09 host sshd[19871]: debug1: PAM: establishing credentials
Apr 24 13:57:09 host sshd[19871]: debug1: permanently_set_uid: 1000/1000
Apr 24 13:57:09 host sshd[19871]: debug1: Entering interactive session for SSH2.
Apr 24 13:57:09 host sshd[19871]: debug1: server_init_dispatch_20
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_open: ctype session rchan 0 win 1048576 max 16384
Apr 24 13:57:09 host sshd[19871]: debug1: input_session_request
Apr 24 13:57:09 host sshd[19871]: debug1: channel 0: new [server-session]
Apr 24 13:57:09 host sshd[19871]: debug1: session_new: session 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_open: channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_open: session 0: link with channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_open: confirm session
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_global_request: rtype no-more-sessions@openssh.com want_reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request pty-req reply 1
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req pty-req
Apr 24 13:57:09 host sshd[19871]: debug1: Allocating pty.
Apr 24 13:57:09 host sshd[19731]: debug1: session_new: session 0
Apr 24 13:57:09 host sshd[19731]: debug1: SELinux support disabled
Apr 24 13:57:09 host sshd[19871]: debug1: session_pty_req: session 0 alloc /dev/pts/0
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request env reply 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req env
Apr 24 13:57:09 host sshd[19871]: debug1: server_input_channel_req: channel 0 request shell reply 1
Apr 24 13:57:09 host sshd[19871]: debug1: session_by_channel: session 0 channel 0
Apr 24 13:57:09 host sshd[19871]: debug1: session_input_channel_req: session 0 req shell
Apr 24 13:57:09 host sshd[19872]: debug1: Setting controlling tty using TIOCSCTTY. 
```

调试日志说。无法打开授权密钥“/home/g2ra/.ssh/authorized_keys”：没有这样的文件或目录。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-03T09:01:00.060

**如果您有一个加密的主文件夹，**@g1ra的评论可以解决这个问题。**在这里添加它以获得更好的可见性。**

 **如果您有一个加密的主目录，则 SSH 无法访问您的`authorized_keys`文件，因为它位于您的加密主目录中，并且在您通过身份验证之前不可用。因此，SSH 将默认使用密码验证。

要解决此问题，请在您的家外创建一个名为`/etc/ssh/<username>`（替换`<username>`为您的实际用户名）的文件夹。此目录应具有**755**权限并归用户所有。将`authorized_keys`文件移入其中。该`authorized_keys`文件应具有**644**权限并归用户所有。

然后编辑您的 /etc/ssh/sshd_config 并添加：

```
AuthorizedKeysFile    /etc/ssh/%u/authorized_keys 
```

最后，使用以下命令重新启动 ssh：

```
sudo service ssh restart 
```

下次您使用 SSH 连接时，您不必输入密码。

来源：[Ubuntu - SSH/OpenSSH/Keys](https://help.ubuntu.com/community/SSH/OpenSSH/Keys#Troubleshooting)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-26T06:58:38.323

您可以尝试`ssh-add`在两台机器上使用更新 ssh 记录。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T11:00:38.397

通常，您应该使用`ssh-copy-id`而不是手动构建它。

您是否检查过目标机器上 .ssh 文件夹和 authorized_keys 的权限？也许（由于手动 cat）文件/文件夹是使用标准 umask 创建的，这对于 SSH 来说太“开放”了。**

# javascript - 使用 JavaScript 使 div 的宽度和高度等于视口

> ID：16189917
> 
> 赞同：1
> 
> 时间：2013-04-24T10:44:44.007
> 
> 标签：javascript, viewport

我有一个单页网站，它使用 jquery scrollLeft 在水平对齐的 div 之间滚动，这些 div 将作为页面工作。

这些 div 应该是 100% 的宽度和 100% 的高度（等于当前视口）。

用 jquery 我做对了：

```
$('.row').css('min-height', $(window).height());

$('.row').css('width', $(window).width());

$(window).resize(function() {

        $('.row').css('min-height', $(window).height());

        $('.row').css('width', $(window).width());

}); 
```

问题是在 jquery.js 完全加载并且文档准备好之前，这些 div 不会重新调整大小。

所以我认为最好的方法是使用原始 JavaScript。如何？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:54:17.457

您是否尝试过在您之前加载 jquery`<div class="row">...</div>` 并将您编写的脚本放在它之后？

# xamarin.android - 如何在 xmarin droid 上设置超时 wcf

> ID：16189918
> 
> 赞同：0
> 
> 时间：2013-04-24T10:44:45.223
> 
> 标签：xamarin.android, monodevelop

我的应用程序与 WCF 服务 (.NET 4.5) 连接。我使用 slsvcutil (silverligth 5) 构建代理并且工作正常。但我有超时问题。我收到一个超过 1 分钟的错误。这是我的代码：

```
 BasicHttpBinding bindin = new BasicHttpBinding();
                    bindin.MaxReceivedMessageSize = 267386880;

                    var timeout = new TimeSpan(0, 10, 0);
                    bindin.SendTimeout = timeout;
                    bindin.OpenTimeout = timeout;
                    bindin.ReceiveTimeout = timeout;

                    wcf = new ServicioInasaClient(bindin, new EndpointAddress(editHost.Text)); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:26:57.330

我解决了它：

```
 wcf.InnerChannel.OperationTimeout = timeout; 
```

# android - 如何通过 Android TextView 中的 Html 超链接在活动之间传递数据？

> ID：16189927
> 
> 赞同：0
> 
> 时间：2013-04-24T10:45:23.897
> 
> 标签：android, android-intent

我有一个`TextView`超链接的。像这样的代码

```
textPaymentMethod.setText(
Html.fromHtml("<b><a href=\"shippinginfo-activity://shippinginfo\">Add Payment Method</a></b>"));
tvPaymentMethod.setMovementMethod(LinkMovementMethod.getInstance()); 
```

当一个用户`Click`在`AddPayment`方法上它会去另一个`Activity`喜欢`ActivityX`。但我的问题是，我想将一些数据从当前传递`Activity`到`ActivityX`. 任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:49:22.357

你有没有看到这个[问题](https://stackoverflow.com/a/3452944/1344221)的答案。查看注释，其中详细说明了通过使用字符串将数据传递给另一个活动的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:49:23.927

为了从一个活动移动到另一个活动，请编写以下代码

```
//move to next activity
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
//pass your data here
intent.putExtra("data", <your data value>);
//start Activity
startIntent(intent);
In Activity3, to get your edit text value do the following.

//get your data value here which is passed in FirstActivity
String data = getIntent().getStringExtra("data"); 
```

变量“数据”是您正在寻找的最终输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:01:28.943

将此添加到您当前的活动中

```
Intent activity= new Intent(Activity.this, ActivityX.class);

activity.putExtra("key", <value>);

startIntent(activity); 
```

ActivityX：在 OnCreate()

```
Intent value = getIntent();
String str_value= (String) usrid.getSerializableExtra("key"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-16T19:14:12.657

所以我在菲尔的帮助下想通了，我在这里阅读了这个答案：[handle textview link click in my android app](https://stackoverflow.com/questions/1697084/handle-textview-link-click-in-my-android-app/3452944#3452944)

将以下意图过滤器添加到您想要超链接到的清单活动中，当然用您自己的方案替换该方案：

```
<intent-filter>
    <category android:name="android.intent.category.DEFAULT" />
    <action android:name="android.intent.action.VIEW" />
    <data android:scheme="com.package.name" />  
</intent-filter> 
```

现在，使用该方案创建您的超链接并将其放入您的字符串文件中。我的链接与意图过滤器具有相同的 android:scheme，并且附加了指向 Internet 上某个站点的实际外部链接。就我而言，我想点击链接，它必须打开另一个活动，而另一个活动有一个可以显示网页的 web 视图。这可以防止用户在手机上看到我将他们定向到的网页的网址。

```
<string name="signing_in">&lt;a href=&quot;com.package.name://http://your_real_external_link_goes_here&quot;&gt;Privacy Policy&lt;/a&gt;</string> 
```

在我与 webview 的活动中，我说：

```
 Uri data = getIntent().getData();
    if (data != null) {
        url = data.toString().substring(19 , data.toString().length());
        Log.e("url", url);
    } 
```

我们将以下部分去掉：`com.package.name://`总共有 19 个字符，剩下的部分将是我的 url，然后我可以使用它来加载我的网页而不显示 url。

# python - 了解 matplotlib 顶点

> ID：16189928
> 
> 赞同：4
> 
> 时间：2013-04-24T10:45:28.150
> 
> 标签：python, matplotlib, scatter

我正在尝试在 matplotlib 中为散点图创建自定义标记，其中标记是具有固定高度和不同宽度的矩形。每个标记的宽度是 y 值的函数。我使用[此代码](http://matplotlib.org/examples/pylab_examples/scatter_custom_symbol.html)作为模板进行了这样的尝试，并假设如果给定 verts 一个 N 2-D 元组列表，它会绘制具有相应第一个值的宽度和第二个值的高度的矩形（也许这已经是错误的，但那我该怎么做呢？）。

我有一个 x 和 y 值的列表，每个值都包含以度为单位的角度。然后，我计算每个标记的宽度和高度

```
field_size = 2.
symb_vec_x = [(field_size / np.cos(i * np.pi / 180.)) for i in y]
symb_vec_y = [field_size for i in range(len(y))] 
```

并构建 verts 列表并绘制所有内容

```
symb_vec = list(zip(symb_vec_x, symb_vec_y))
fig = plt.figure(1, figsize=(14.40, 9.00))
ax = fig.add_subplot(1,1,1)
sc = ax.scatter(ra_i, dec_i, marker='None', verts=symb_vec) 
```

但是结果图是空的，但是没有错误消息。谁能告诉我我在定义顶点时做错了什么以及如何做对？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T14:33:08.007

如前所述 'marker='None' 需要被删除，然后指定带有顶点的矩形的适当方法类似于

```
verts = list(zip([-10.,10.,10.,-10],[-5.,-5.,5.,5]))
ax.scatter([0.5,1.0],[1.0,2.0], marker=(verts,0)) 
```

顶点被定义为`([x1,x2,x3,x4],[y1,y2,y3,y4])`必须注意哪些得到减号等。

这 (verts,0) 在文档中被提及为

> 为了向后兼容，也接受形式 ( *verts* , 0)，但它等同于仅*verts*用于提供定义形状的原始顶点集。

但是我发现使用只是`verts`没有给出正确的形状。

要自动化该过程，您需要执行类似的操作

```
v_val=1.0
h_val=2.0
verts = list(zip([-h_val,h_val,h_val,-h_val],[-v_val,-v_val,v_val,v_val])) 
```

## 基本示例：

```
import pylab as py
ax = py.subplot(111)
v_val=1.0
h_val=2.0
verts = list(zip([-h_val,h_val,h_val,-h_val],[-v_val,-v_val,v_val,v_val]))
ax.scatter([0.5,1.0],[1.0,2.0], marker=(verts,0)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/skmjb.png)*

*编辑*

## 单个标记

因此，您需要为每种情况手动创建一个顶点。这显然取决于您希望矩形如何点对点更改。这是一个例子

```
import pylab as py
ax = py.subplot(111)

def verts_function(x,y,r):
    # Define the vertex's multiplying the x value by a ratio
    x = x*r
    y = y
    return [(-x,-y),(x,-y),(x,y),(-x,y)]

n=5
for i in range(1,4):
    ax.scatter(i,i, marker=(verts_function(i,i,0.3),0))
    py.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/SvHiv.png)

所以在我的简单情况下，我绘制点 i,i 并在它们周围绘制矩形。指定垂直标记的方式是不直观的。在[文档](https://matplotlib.org/api/markers_api.html#module-matplotlib.markers)中描述如下：

> `verts`: 用于路径顶点的 (x, y) 对列表。标记的中心位于 (0,0) 并且尺寸被标准化，使得创建的路径被封装在单元格内。

因此，以下是等价的：

```
vert = [(-300.0, -1000), (300.0, -1000), (300.0, 1000), (-300.0, 1000)]
vert = [(-0.3, -1), (0.3, -1), (0.3, 1), (-0.3, 1)] 
```

例如，它们将产生相同的标记。因此，我使用了一个比率，这是您需要投入工作的地方。r 的值（比率）将改变哪个轴保持不变。

这一切都变得非常复杂，我相信一定有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T15:45:25.453

我从 matplotlib 用户邮件列表的 Ryan 那里得到了解决方案。它非常优雅，所以我将在这里分享他的示例：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.patches import Rectangle
from matplotlib.collections import PatchCollection

n = 100

# Get your xy data points, which are the centers of the rectangles.
xy = np.random.rand(n,2)

# Set a fixed height
height = 0.02
# The variable widths of the rectangles
widths = np.random.rand(n)*0.1

# Get a color map and make some colors
cmap = plt.cm.hsv
colors = np.random.rand(n)*10.
# Make a normalized array of colors
colors_norm = colors/colors.max()
# Here's where you have to make a ScalarMappable with the colormap
mappable = plt.cm.ScalarMappable(cmap=cmap)
# Give it your non-normalized color data
mappable.set_array(colors)

rects = []
for p, w in zip(xy, widths):
    xpos = p[0] - w/2 # The x position will be half the width from the center
    ypos = p[1] - height/2 # same for the y position, but with height
    rect = Rectangle( (xpos, ypos), w, height ) # Create a rectangle
    rects.append(rect) # Add the rectangle patch to our list

# Create a collection from the rectangles
col = PatchCollection(rects)
# set the alpha for all rectangles
col.set_alpha(0.3)
# Set the colors using the colormap
col.set_facecolor( cmap(colors_norm) )
# No lines
col.set_linewidth( 0 )
#col.set_edgecolor( 'none' )

# Make a figure and add the collection to the axis.
fig = plt.figure()
ax = fig.add_subplot(111)
ax.add_collection(col)
# Add your ScalarMappable to a figure colorbar
fig.colorbar(mappable)
plt.show() 
```

谢谢你，Ryan，以及所有贡献自己想法的人！

# php - 在 PHP 中使用带有 XML 日志记录的 REST WS 的第一步

> ID：16189935
> 
> 赞同：0
> 
> 时间：2013-04-24T10:45:39.303
> 
> 标签：php, web-services, rest

我正在尝试连接到完成 REST 规范的合作伙伴的 Web 服务。要连接到他们的 REST WS，我有一个连接 URL（'www.example.org/wservice/session'），我必须通过 POST 将 XML 作为登录参数带到那里，这是我必须用来连接的 XML 结构他们：

```
<Payload>
    <Header>
        <CustomerID></CustomerID>
        <Signature></Signature>
        <PlainTextLength></PlainTextLength>
        <Version>1.0</Version>
    </Header>
    <Body>
        ... stuff ...
    </Body>
</Payload> 
```

这应该给我带来一个 TOKEN id，我会在登录后提前使用它来访问 WS 功能。

我拥有标头参数的所有值，但我不知道如何启动我的 PHP 脚本以建立正确的连接。

编辑1：这是我目前使用的代码：

```
$post_xml = "<Payload><Header><CustomerID>20266</CustomerID><Signature></Signature><PlainTextLength></PlainTextLength><Version>1.0</Version></Header><Body></Body></Payload>";
$url = "http://www.example.org/wservice/session";
$port = 80;

$user_agent = $_SERVER['HTTP_USER_AGENT'];

$ch = curl_init();    // initialize curl handle
curl_setopt($ch, CURLOPT_URL, $url); // set url to post to
curl_setopt($ch, CURLOPT_FAILONERROR, 1);              // Fail on errors

if (ini_get('open_basedir') == '' && ini_get('safe_mode' == 'Off'))
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);    // allow redirects
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable
curl_setopt($ch, CURLOPT_PORT, $port);          //Set the port number
curl_setopt($ch, CURLOPT_TIMEOUT, 15); // times out after 15s
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_xml); // add POST fields
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);

if($port==443){
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  2);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
}

$data = curl_exec($ch); 
```

# php - 将超链接格式更改为 iframe？

> ID：16189937
> 
> 赞同：0
> 
> 时间：2013-04-24T10:45:44.983
> 
> 标签：php, iframe

嗨，我有一个显示谷歌地图的链接，并在地图上回显用户的位置，目前这可以通过用户单击链接和地图在新窗口中打开来工作。

我想要尝试做的是将其制作成 iframe，因此无需单击超链接，而是在 iframe 中回显地图和用户位置。这可能吗？

这是我的链接：

```
<a href="http://maps.googleapis.com/maps/api/staticmap?size=500x500&amp;maptype=roadmap\&amp;markers=||<?php echo $location['user_location'] ?>,UK&amp;sensor=false&amp;zoom=8">click</a> 
```

我试过的：

```
<iframe src="http://maps.googleapis.com/maps/api/staticmap?size=500x500&amp;maptype=roadmap\&amp;markers=||<?php echo $location['user_location'] ?>,UK&amp;sensor=false&amp;zoom=8"></iframe> 
```

为什么我只看到一个空白的 iframe？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:20:46.943

为什么你使用 iframe ？使用图片

```
<img src="http://maps.googleapis.com/maps/api/staticmap?size=500x500&amp;maptype=roadmap\&amp;markers=||<?php echo $location['user_location'] ?>,UK&amp;sensor=false&amp;zoom=8"> 
```

# opengl - OpenGL中的透视投影矩阵

> ID：16189938
> 
> 赞同：0
> 
> 时间：2013-04-24T10:45:45.693
> 
> 标签：opengl, geometry, projection-matrix

我是一个新的透视分割现象。我正在使用以下代码在 3D 空间中渲染一个简单的正方形：

```
 void MatrixPersp(Mat4& matrix,const float fovy, const float aspect, const float zNear, const float zFar)
    {
         float sine, cotangent, deltaZ;
         float radians;

         for(int i=0;i<4;i++)
             for(int j=0;j<4;j++)
             {
                 if(i==j)
                    matrix[i][j]=1.0;
                 else
                     matrix[i][j]=0.0;
             }

         radians = fovy / 2 * GLES_Pi / 180;

         deltaZ = zFar - zNear;
         sine = (float) sin(radians);

         cotangent = (float) cos(radians) / sine;

         matrix[0][0] = cotangent / aspect;
         matrix[1][1] = cotangent;
         matrix[2][2] = -(zFar + zNear) / deltaZ;
         matrix[2][3] = -1;
         matrix[3][2] = -2 * zNear * zFar / deltaZ;
         matrix[3][3] = 0;

         return;    
    }

void Render()
{
    GLfloat vertices[] = 
    {
        -0.8,0.6,1.0,1.0,
        -0.8,0.2,1.0,1.0,
         0.2,0.2,1.0,1.0,
        0.2,0.6,1.0,1.0
    };

    MatrixPersp(perspective,90.0,aspect,2.0,100.0);

    glUniformMatrix4fv(glGetUniformLocation(program_object,"MVPMatrix"), 1, GL_FALSE, (GLfloat*)perspective);

    glClearDepth(1.0f);
    glClear(GL_DEPTH_BUFFER_BIT);

    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);

glDrawElements(); 
```

}

顶点着色器是：

```
#version 150

in vec4 position;

uniform mat4 MVPMatrix;

void main()
{
        gl_Position = position*MVPMatrix;

} 
```

这里的问题是，当所有四个顶点都具有相同的 z 值时，根本不会渲染任何内容。另一方面，如果两个顶点的 z 坐标为 -1，则投影矩阵可以正常工作。我不确定这里出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:41:17.143

```
glUniformMatrix4fv(glGetUniformLocation(program_object,"MVPMatrix"), 1, GL_FALSE, (GLfloat*)perspective); 
```

此行表明您的矩阵按列优先顺序排列。您的函数计算其矩阵的方式证实了这一点`MatrixPersp`，具体取决于确切`Mat4`的定义方式。

```
gl_Position = position*MVPMatrix; 
```

如果`MVPMatrix`是正确的列优先，那么这个乘法是*向后的。*位置在右边。

# java - 使用 javacc 解析和评估简单语言

> ID：16189940
> 
> 赞同：4
> 
> 时间：2013-04-24T10:45:49.257
> 
> 标签：java, parsing, compiler-construction, javacc

我有简单的语言，如：

```
funa X ( X+3*funb(1) ) ;
funb Y ( 2*Y ) ;
main ( 2+func(func(1)) ) ;
func A ( funa(A) ) ; 
```

我使用 CFG 将上面的解析为：

```
program    => (statement)+
statement  => (<main_keyword> | <idl> <idu>) <lparan> expression <rparan> <semicolon>
expression => T(<plus> T)*
T          => P(<multipliation>P)*
P          => <idu> | <idl> <lparan> expression <rparan> | <number> 
```

和令牌识别：

```
<main_keyword>   -> "main"
<idl>            -> (["a"-"z"])+
<idu>            -> (["A"-"Z"])+
<lparan>         -> "("
<rparan>         -> ")"
<semicolon>      -> ";"
<number>         -> (["0"-"9"])+
<plus>           -> "+"
<multiplication> -> "*" 
```

我可以使用 javaCC 解析以上内容，但我不知道如何使用解析器评估以上此类程序。上面的程序应该评估为 15。如何在 javaCC 中实现这样的，是否可以使用扩充解析器产生？函数可以出现在任何地方，调用前或调用后。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:46:28.637

您可以通过让 JavaCC 为您创建一个 AST 来做到这一点¹，然后在您遍历树时创建自定义节点。构建树后，调用根节点的`eval(...)`方法来评估整个表达式/树。

如何使用 JavaCC + JJTree 评估简单表达式的演示：[http ://www.cs.nmsu.edu/~rth​​/cs/cs471/InterpretersJavaCC.html](http://www.cs.nmsu.edu/~rth/cs/cs471/InterpretersJavaCC.html)

一个更广泛的例子，包括函数：[https ://github.com/bkiers/Curta](https://github.com/bkiers/Curta)

* * *

¹ [https://javacc.java.net/doc/JJTree.html](https://javacc.java.net/doc/JJTree.html)

# c++ - C ++，利用内存泄漏来发挥优势？

> ID：16189941
> 
> 赞同：0
> 
> 时间：2013-04-24T10:45:49.540
> 
> 标签：c++, oop, memory-leaks, dynamic-memory-allocation

我是 oop 的新手，我正在尝试弄清楚我正在做的事情是运行良好还是非常糟糕的编程。

我正在为派生类的对象动态分配内存。但我希望能够在必要时使用代码的同一部分重复执行此操作。我有一个简单的用户界面，用户可以在其中选择一个选项来将条目添加到列表（这是一个向量）。但是，我需要能够根据需要多次执行此操作。所以这是我的代码的必要部分：

```
case 1:
    Entry * entry = new list_entry;
    list.push_back(entry);
    continue; 
```

这实际上是在做我想做的事，但我担心它会构成内存泄漏，因为我从不删除内存。我已经读过，一旦指向对象的指针超出范围，就不能再删除内存。但这本质上是我想要的，因为我希望能够使用相同的指针名称但指向不同的内存地址。否则，我将无法创建指向在运行时确定的不同数量的新对象的新指针。

这是正确的，还是我走错了路？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:48:14.550

是的，如果您从不删除，那就是内存泄漏。但是你为什么要使用指针和动态内存呢？您可以在 C++ 中创建对象，而无需使用 new

```
std::vector<list_entry> list;

case 1:
    Entry entry;
    list.push_back(entry);
    continue; 
```

没有指针，没有内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:49:39.203

这还不是内存泄漏，因为您将指针存储在列表中。这意味着您仍然可以访问内存，并在以后将其删除。

只需确保在删除或清除列表之前，遍历它并删除所有条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:47:51.600

`list`当您不再需要此列表时，您可以通过手动删除包含在其中的指针来释放内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T23:42:30.760

当你说：

> 但这本质上是我想要的，因为我希望能够使用相同的指针名称但指向不同的内存地址。否则，我将无法创建指向在运行时确定的不同数量的新对象的新指针。

`delete`我相信正在发生的事情是你对召唤所做的事情的看法与实际发生的事情之间的脱节。当`delete`被调用时，指针*指向*的内存被删除。指针本身仍然存在。您应该将指针视为*引用*位置的数字，而不是位置本身。

为了说明这一点，让我们举一个简单的例子。假设我们有指针`foo *p`，我们就有`p = new foo`。现在，等于类型对象所在的`p`内存位置。然后你打电话。*它指向*的对象已删除，但 p 本身未受影响。事实上，仍然是 equals ，但是内存中的那个位置现在包含空白空间，可以用于其他东西（严格来说这不是真的，但这样想更容易）。你现在可以做，并且将指向一些新的空间——甚至可能是旧的，现在是空的，空间——分配另一个空间。`0x3a``foo``delete p`*`p``0x3a``p = new foo``p``foo`*

 *总之：`delete p`销毁 p 指向的对象，但不销毁`p`指针本身，从而释放对象占用的内存。如果要销毁`p`指针，则可以将其从列表中删除。所以，如果要重用指针，首先要销毁它们指向的对象，然后再分配一个新的对象。（或者使用智能指针，如上所述。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T10:49:07.607

您实际上并没有丢失对对象的跟踪，因为指针保留在`list`. 因此，无需立即删除它们。
只要确保在您不再需要它们时删除它们即可`list`。*

# java - Eclipse 运行时错误

> ID：16189943
> 
> 赞同：0
> 
> 时间：2013-04-24T10:46:01.483
> 
> 标签：java, eclipse

我刚刚重新启动了我的 Eclipse，现在当我尝试通过*运行配置*运行我的项目时，它显示了这个错误：

```
Referenced classpath provider does not exist: org.eclipse.m2e.launchconfig.classpathProvider 
```

任何想法是什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:50:16.517

> 这可能是因为您的运行配置是在旧项目上创建的，并且在 Classpath 部分中有错误的条目。解决方案是删除运行配置并创建一个新配置。

[我在这里读到](http://sha.nnoncarey.com/blog/archives/33)

# android - 如何在按下后退键的android上禁用搜索视图的折叠

> ID：16189957
> 
> 赞同：10
> 
> 时间：2013-04-24T10:46:44.960
> 
> 标签：android, actionbarsherlock, searchview

我在搜索菜单的操作栏中使用了 Sherlock 搜索视图小部件。初始化搜索视图的代码片段

```
 MenuItem item = menu.findItem(R.id.menu_search);
    item.expandActionView();
    mSearchView = (SearchView) item.getActionView();
    mSearchView.setIconifiedByDefault(false);
    mSearchView.setQuery(query, false);
    mSearchView.clearFocus(); 
```

上面的代码显示了带有默认搜索查询的扩展搜索视图。问题是当我按下后退按钮时，搜索视图再次折叠，然后返回到 android 中的先前活动。我不希望搜索视图在后退键按下时折叠。如何防止搜索视图在后退键按下时折叠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-07T09:21:41.727

`SearchView.setIconifiedByDefault(false)`如果您`android:showAsAction="always"`在菜单 xml 中设置了属性就足够了。

以下代码段对我有用：

**default_options.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    <item android:id="@+id/action_search"
        android:title="@string/search"
        android:icon="@drawable/topbar_busqueda"
        androidshowAsAction="always"
        android:actionViewClass="android.support.v7.widget.SearchView" />
</menu> 
```

**活动**

```
 @Override
 public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
     inflater.inflate(R.menu.default_options menu);
     MenuItem menuItem = menu.findItem(R.id.action_search);
     SearchView searchView = (SearchView) menuItem.getActionView();
     prepareSearchViewAdapter(searchView, menuItem);
     super.onCreateOptionsMenu(menu, inflater);
 }

private void prepareSearchViewAdapter(final SearchView searchView, MenuItem menuItem) {
    searchView.setIconifiedByDefault(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:52:55.747

像这样打开搜索视图时添加一个布尔值

```
private Boolean isSearchPageIsOpen = true; 
```

然后添加偶数来处理后退按钮按下

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
            if(isSearchPageIsOpen ){

                do something here
        }
        return false; 
```

# java - 使用 java.util.regex.Pattern

> ID：16189961
> 
> 赞同：1
> 
> 时间：2013-04-24T10:46:49.033
> 
> 标签：java, regex

我不是程序员，所以我的水平是这个领域的新手。我必须创建一个正则表达式来检查两行。在这两条线 A 和 B 之间可以是一条、两条或更多条不同的线。

我一直在查看链接[http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)但我还没有找到解决方案，尽管我认为我非常接近解决方案。

我正在测试表达式 `^(.*$)` ，这得到了一整行。如果我把这个表达式写两次，它会得到两行。因此，该表达式似乎与表达式的出现一样整行。

但是，我想检查 A 和 B 之间未确定的行。我知道如果我写`^(.*$){1,}`它不起作用，至少它会是一行。

任何人都知道哪个可能是错误？

谢谢你的时间安德烈斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:56:45.803

正则表达式中的DOT`.`匹配除​​换行符以外的任何字符。

您正在这里寻找[`DOTALL`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#DOTALL)或`s`标记，使点匹配任何字符，包括换行符。因此，如果您想匹配文字之间的所有行，请`A and B`使用此正则表达式：

```
(?s)A.*?B 
```

`(?s)`用于 DOTALL，它将`.*?`匹配所有字符，包括 A 和 B 之间的换行符。

`?`是使上述正则表达式不贪婪。

阅读更多：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:52:26.130

你为什么不使用扫描仪？它可能与您想要的更相关：

```
Scanner sc = new ...
while (sc.nextLine().compareTo(strB)!=0) {
whatYouWantToDo
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:59:28.017

您可以尝试搜索行终止符`\r`和`\n`. 根据文件的来源，您可能需要进行一些试验。据我了解，你想匹配这些行，中间至少有一个空行？尝试`^(.*)$\n{2,}^(.*)$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:00:17.533

如果要找到两条相等的行，请使用正则表达式：

```
Pattern pattern = Pattern.compile("^(?:.*\n)*(.*\n)(?:.*\n)*\\1");
// Skip some lines, find a line, skip some lines, find the first group `(...)`
Matcher m = pattern.matcher(text);
while (m.find()) {
    System.out.println("Double: " + m.group(1);
} 
```

`(?: ...)`是非捕获组；也就是说，不能通过`m.group(#)`.

但是，这不会在“A\nB\nA\nB\n”中找到 B 行。

# android - Adreno200-EGLSUB： : 摩托罗拉 Defy 设备的 RGBA_8888 格式问题

> ID：16189962
> 
> 赞同：0
> 
> 时间：2013-04-24T10:46:52.240
> 
> 标签：android, motorola

我在使用 Motorola Defy 设备的 Android 应用程序之一中遇到了奇怪的问题。我一直在 HTC 和三星设备上测试相同的应用程序，它运行完美，没有任何问题，但是当我用摩托罗拉设备测试它时，它开始崩溃。

所有日志文件都显示 Adreno200-EGLSUB: : Format RGBA_8888 错误。让我再添加一件事，我正在使用 SurfaceView 和 surfaceHolder 类。

有谁知道可能是什么原因并且可以解决？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-03T15:45:33.757

我也有，
只要解锁你的手机，就可以使用了。
而不是从软件运行您的应用程序（Eclipse - 在我的情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T01:25:23.063

我遇到了同样的问题，我尝试设置

```
 getWindow().setFormat(PixelFormat.RGBA_8888); 
```

但仍然返回同样的问题。我运行了数千次，没有显示与此相关的进一步错误。根据答案[设备特定错误 - s3dReadConfigFile“无法打开文件进行读取。”](https://stackoverflow.com/questions/15280681/device-specific-error-s3dreadconfigfile-cant-open-file-for-reading)

它不会影响您的应用程序的使用

# javascript - 获取 xml 元素属性值并设置为 html ul li 列表类型

> ID：16189965
> 
> 赞同：0
> 
> 时间：2013-04-24T10:47:01.733
> 
> 标签：javascript, html, xml, xslt

这是我的 xml 文件：-

```
<root>
  <child_1 entity_id = "1" value="Game" parent_id="0">
    <child_2 entity_id="2" value="Activities" parent_id="1">
      <child_3 entity_id="3" value="Physical1" parent_id="2">
        <child_6 entity_id="6" value="Cricket" parent_id="3">
          <child_7 entity_id="7" value="One Day" parent_id="6"/>
        </child_6>
      </child_3>
      <child_4 entity_id="4" value="Test1" parent_id="1">
        <child_8 entity_id="8" value="Test At Abc" parent_id="4"/>
      </child_4>
      <child_5 entity_id="5" value="Test2" parent_id="1">
        <child_9 entity_id="9" value="Test At Xyz" parent_id="5"/>
      </child_5>
    </child_2>
   <child_10 entity_id="10" value="Region" parent_id="1">
      <child_11 entity_id="11" value="ABC" parent_id="10">
        <child_12 entity_id="12" value="XYZ" parent_id="11">
          <child_13 entity_id="13" value="ABC123" parent_id="12"/>
        </child_12>
      </child_11>
  </child_10>
</child_1>
</root> 
```

在这里我想开始获取元素属性值`Activities` `(child_2)`

还有子子子值也。
并以 html 格式设置，`ul li` 如下所示：-

```
<ul>
  <li>Activity</li>
  <ul>
    <li>Physical</li>
    <ul>
      <li>Cricket</li>
      <ul>
        <li>One-Day</li>
      </ul>
    </ul>
    <li>Test2</li>
    <ul>
      <li>Test At Abc</li>
    </ul>
    <li>Test3</li>
    <ul>
      <li>Test At Xyz</li>
    </ul>
  </ul>
</ul> 
```

我不太了解 xslt，但我认为它很容易解决这个问题。
任何帮助都来了。
谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:26:10.313

这将产生您描述的输出：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="*" mode="item">
    <li>
      <xsl:value-of select="@value" />
    </li>
    <xsl:apply-templates select="current()[*]" />
  </xsl:template>

  <xsl:template match="*/*">
    <ul>
      <xsl:apply-templates select="*[1] | node()[current()/ancestor::*[2]]" 
                           mode="item" />
    </ul>
  </xsl:template>
</xsl:stylesheet> 
```

但是，您描述的输出不是合法的 HTML（`ul`s 不能直接包含其他`ul`s）。这将产生有效的 HTML：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="*" mode="item">
    <li>
      <xsl:value-of select="@value" />
      <xsl:apply-templates select="current()[*]" />
    </li>
  </xsl:template>

  <xsl:template match="*/*">
    <ul>
       <xsl:apply-templates select="*[1] | node()[current()/ancestor::*[2]]" 
                            mode="item" />
    </ul>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，结果是：

```
<ul>
  <li>Activities<ul>
      <li>Physical1<ul>
          <li>Cricket<ul>
              <li>One Day</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Test1<ul>
          <li>Test At Abc</li>
        </ul>
      </li>
      <li>Test2<ul>
          <li>Test At Xyz</li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

呈现为：

*   活动
    *   物理1
        *   蟋蟀
            *   一天
    *   测试1
        *   在美国广播公司测试
    *   测试2
        *   在 Xyz 测试

# c++ - “pos ->* op 中的 operator->* 不匹配”

> ID：16189977
> 
> 赞同：3
> 
> 时间：2013-04-24T10:47:43.270
> 
> 标签：c++, function, pointers

编译以下代码时出现以下错误。我很困惑，无法弄清楚这里出了什么问题。成员函数指针解引用错了吗？

错误：

```
#g++ fp.cpp
fp.cpp: In member function âvoid Y::callfptr(void (X::*)(int))â:
fp.cpp:33: error: no match for âoperator->*â in âpos ->* opâ 
```

fp.cpp

```
#include <iostream>
#include <vector>
using namespace std;

class B {
 // some base class
};

class X : public B {
 public:
  int z;
  void a(int a) {
    cout << "The value of a is "<< a << endl;
  }
  void f(int b) {
    cout << "The value of b is "<< b << endl;
  }
};

class Y : public B {
 public:
  int b;
  vector<X> vy;
  void c(void) {
   cout << "CLASS Y func c called" << endl;
  }
  void callfptr( void (X::*op)(int));
};

void Y::callfptr(void (X::*op) (int)) {
 vector<X>::iterator pos;
 for (pos = vy.begin(); pos != vy.end(); pos++) {
  (pos->*op) (10);
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:52:42.407

而不是这样做：

```
(pos->*op) (10); 
```

做这个：

```
((*pos).*op)(10); 
```

迭代器不需要提供`operator ->*`. 如果你真的想使用`operator ->*`而不是`operator .*`，那么你可以这样做：

```
((pos.operator ->())->*op)(10) 
```

但这只是更冗长。

可能与您的用例相关的差异是运算符`->*`可以重载，而`operator .*`不能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T10:53:26.223

`->*`是`operator ->*`。您可以使用

```
pos.operator->()->*op 
```

或者干脆

```
(*pos).*op 
```

# excel - Excel VBA - 将一维数组添加到多维数组而不循环

> ID：16189984
> 
> 赞同：2
> 
> 时间：2013-04-24T10:48:00.720
> 
> 标签：excel, multidimensional-array, vba

我有一个关于从单个数组中“创建矩阵”而不必循环的问题：

从一个函数中，我得到一个包含数据的数组（Return_Calc，rows = n-1）。我正在寻找类似的东西

```
 Output(n-1, j-1) = Return_Calc(Nav_Range) 
```

目前，我正在这样做：

```
 Temp = Return_Calc(Nav_range)

    For i = 1 To n - 1

        Output(i - 1, j - 1) = Temp(i - 1)

    Next i 
```

当前选项有效。我只是想知道是否还有另一种可能性而无需循环。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:35:00.460

我不确定你是否会对这个提议感到满意。它提供了创建 Array-of-Arrays 的可能性，在某些情况下，它的工作方式类似于多维数组。你可以考虑用这种方式解决你的问题。

这是一个示例代码，如何创建以及从最终数组中检索数据的方式。

```
Sub Array_Workaround()

    Dim oneDimArrA, oneDimArrB
        oneDimArrA = Array(1, 2, 3, 4)
        oneDimArrB = Array("A", "B", "C", "D")
    Dim multiDimArr

    'creating multidemmnsional array
    multiDimArr = Array(oneDimArrA, oneDimArrB)

    'get element- different to standard syntax
    Debug.Print multiDimArr(0)(0)   '--> 1
    Debug.Print multiDimArr(0)(1)   '--> 2
    Debug.Print multiDimArr(1)(1)   '--> B

End Sub 
```

提出的解决方案有一个重要的好处——每个内部数组可以有不同的维度。

# php - Drupal 7：为块添加 2 种样式

> ID：16189986
> 
> 赞同：2
> 
> 时间：2013-04-24T10:48:05.567
> 
> 标签：php, drupal, drupal-7

我想允许网站管理员在添加新块时选择样式（带填充，不带填充），有一个名为 block_class 的模块允许我为每个块添加一个 css 类，它可以工作，但我想要更好的东西，比如使用选择框..，有人告诉我使用样式器模块，但我不知道如何将它与块联系起来..

# windows-store-apps - 从服务器收到的身份验证标头是“NTLM,Negotiate”。在 Windows 商店应用程序中

> ID：16189989
> 
> 赞同：2
> 
> 时间：2013-04-24T10:48:14.943
> 
> 标签：windows-store-apps, ntlm

我已经开发了一个 Windows 应用商店应用程序使用部署在另一台服务器（不是我的服务器）中的 WCF 服务，一切正常，直到我禁用匿名身份验证以关闭收到错误消息

```
"The HTTP request is unauthorized with client authentication scheme 'Anonymous'.
        The authentication header received from the server was 'NTLM,Negotiate'." 
```

我用谷歌搜索并发现了一些解决方案，但没有一个解决方案对我有用。在另一个项目中访问相同的 WCF 服务它工作正常，没有抱怨，但是当我使用 Windows 8 商店应用程序时，我得到了上述错误.

非常感谢任何解决方案或解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T11:57:10.287

[嗨，Dinesh Haraveer，

请尝试使用企业身份验证。

Windows 域凭据使用户能够使用他们的凭据登录远程资源，并且就像用户提供了他们的用户名和密码一样。企业身份验证功能通常用于连接到企业内服务器的业务线应用程序。对于 Internet 上的通用通信，您不需要此功能。

请尝试查看[http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)

# ruby-on-rails - 如何从数据库中获取价值？

> ID：16189991
> 
> 赞同：0
> 
> 时间：2013-04-24T10:48:18.393
> 
> 标签：ruby-on-rails

如何从表中获取项目？我想使用条件从**问题**列中获取价值。

```
@result = Customers.where(:name => session[:username], :email => session[:useremail]) 
```

现在，我可以从任何列中获取价值？像这样：@result.column_from_customers_table，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:53:07.023

这是初学者常犯的错误。您拥有的代码返回一个`ActiveRecord::Relation`对象，并且实际上还没有连接到您的数据库。为了获得记录，您必须遍历每个结果或调用`.first`它以获得第一个匹配结果

```
# returns an ActiveRecord::Relation object
@results = Customers.where(:name => session[:username], :email => session[:useremail])

# returns the first matching record
@object = @results.first

# then you can call the column names on @object
@object.name
@object.email

# looping through the results
@results.each do |object|
  puts object.name
  puts object.email
end 
```

# data-binding - 使用 Knockout 对分层 JSON 进行数据绑定

> ID：16189992
> 
> 赞同：1
> 
> 时间：2013-04-24T10:48:21.627
> 
> 标签：data-binding, knockout.js

我想使用 Knockout 将结构绑定到从 REST 服务返回的分层 JSON。采用以下形式：

```
[{
    Name: "Page 1",
    Children: [ {
        Name: "Page 1 > 1",
        Children: [{
        Name: "Page 1 > 1 > 1",
        Children: []
    }
,{
        Name: "Page 1 > 1 > 2",
        Children: []
    }
]
    }
    ]
},
{
    Name: "Page 2",
    Children: [
    {
        Name: "Page 16",
        Children: []
    }
    ]
},
{
    Name: "Page 3",
    Children: [
    {
        LocalizedName: "aaaaa",
        Children: []
    }
] 
```

标准（foreach）绑定只返回顶层。有什么好的方法可以做到这一点吗？

谢谢。

# lotus - Lotus Notes 日期计算中列视图公式的公式语言

> ID：16189996
> 
> 赞同：0
> 
> 时间：2013-04-24T10:48:32.693
> 
> 标签：lotus, lotus-formula

我有一个在视图中有一个日期字段的视图。用户要求按以下方式对视图的第一列进行分类，并将标题设为 - < 30 天、30 - 90 天和 > 90 天。

这是我创建的公式的一部分：@TextToTime(i_LastComDate)<@Adjust(@TextToTime("Today");0;0;-30;0;0;0)

任何人都可以帮助我计算 Notes 视图中的分类列以显示由文档应显示的类别确定的文档吗？我曾考虑向表单添加一个字段，但视图将允许动态显示，因此当用户查看文档时它会正确显示。

谢谢你，让

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:40:47.317

@Today 在视图中使用是一个非常糟糕的主意，因为它会导致视图被永久刷新。有一些最佳实践可以处理您的请求。[这里](https://stackoverflow.com/questions/553003/how-do-i-select-all-documents-from-the-last-7-days)有一个关于 stackoverflow 的讨论 A very good blog-entry is the one found [here](http://lotus-blogs.blogspot.de/2007/07/how-timedate-views-cause-performance.html)。

如果您忽略所有建议，那么公式将是：

```
_diff := (@Today - @TextToTime(i_LastComDate)) / (24*3600);
@If( _diff > 90 ; "< 90 Days"; _diff > 30; "< 30 Days" ; "All the others" ) 
```

注意：在文本字段中存储时间值总是非常糟糕的做法（只是因为您使用了@TextToTime 而这样说，因为它可能像 2013/04/23 或 23.04.2013 或任何其他变体一样存储，只是因为保存该字段的客户端或服务器将此作为首选项...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:04:40.777

我建议制作代理，它将在晚上重新计算时差 - 正如@Tode 所说，视图中的时间/日期公式具有众所周知和记录在案的性能影响，不鼓励使用！然后，您的视图将按以下类别分类：

```
@If( diff < 30; "< 30"; diff <= 90; "30 - 90"; "> 90") 
```