# StackOverflow 问答 12985000-12985999

# java - 谷歌日历 API 事件插入

> ID：12985001
> 
> 赞同：3
> 
> 时间：2012-10-20T03:30:45.283
> 
> 标签：java, google-calendar-api, google-api-java-client

我在尝试将事件插入日历时遇到问题。这是我到目前为止的代码，取自 Google API 帮助：

```
Event event = new Event();
event.setSummary("Appointment");
event.setLocation("Somewhere");
ArrayList<EventAttendee> attendees = new ArrayList<EventAttendee>();
attendees.add(new EventAttendee().setEmail("attendeeEmail"));
event.setAttendees(attendees);
Date startDate = new Date();
Date endDate = new Date(startDate.getTime() + 3600000);
DateTime start = new DateTime(startDate, TimeZone.getTimeZone("UTC"));
event.setStart(new EventDateTime().setDateTime(start));
DateTime end = new DateTime(endDate, TimeZone.getTimeZone("UTC"));
event.setEnd(new EventDateTime().setDateTime(end));
service.events().insert("primary", event).execute(); 
```

除了我不断得到

```
 Exception in thread "main"     

    com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request

"message" : "Invalid Value" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:54:17.043

你试过这个吗？

```
attendees.add(new EventAttendee().setEmail("attendeeEmail@bla.com")); 
```

我重现了错误：谷歌似乎检查电子邮件中的@符号。添加@bla.com 为我解决了这个问题。不再有 400 错误请求

# database - 可以从数据库中获取信息的 Word/Excel 模板

> ID：12985003
> 
> 赞同：2
> 
> 时间：2012-10-20T03:30:54.693
> 
> 标签：database, excel, templates, ms-word

我在一家使用简单的 word/excel 模板来编写备忘录/报告和类似文档的小公司工作。我正在寻找有关如何完成此任务的更多信息。

我们很可能需要某种数据库来存储所有必要的信息（客户姓名、联系信息等），也许还需要一系列复杂的 word 和 excel 模板来从数据库中提取信息。

在这一点上，我只是在研究解决这个问题的可能方法。也许有一些内置此功能的 Microsoft 软件（或其他供应商）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:38:08.247

你可以使用 MS Access，但我真的建议使用 SQL Server。

# java - 递归查找二叉搜索树中每个节点的总深度？

> ID：12985009
> 
> 赞同：6
> 
> 时间：2012-10-20T03:31:54.503
> 
> 标签：java, recursion, binary-search-tree

我已经解决这个问题一段时间了，我不太明白其中的逻辑。假设我有一个看起来像下面这样的二叉树：

```
 8                    1 * 0 =  0
      /   \
     4    12                 2 * 1 =  2
    / \   / \
   2   6 10 14               4 * 2 =  8
                                    ----
                                     10 
```

我想找到每个节点的深度并将这些数字加在一起以获得总数。我现在得到的代码看起来像这样：

```
private int totalDepth(Node node, int depth) 
{
    if(node == null) 
    {
        return 0;
    }

    return totalDepth(node.left, depth + 1) + totalDepth(node.right, depth + 1);
} 
```

我认为这会在遍历右侧之前递归地为树的左侧（8 -> 4 -> 2）的每个更深的级别添加一个，但它并不完全有效。

我已经以多种方式调整了这种方法，但似乎无法确定我所缺少的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T03:36:42.567

您快到了：您已将左子树和右子树的结果相加，但忘记为节点本身添加结果：

```
return depth                              // myself
     + totalDepth(node.left, depth + 1)   // my left subtree
     + totalDepth(node.right, depth + 1); // my right subtree 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T19:46:54.067

```
public virtual int GetLevelById(int id)
        {
            int i = GetParentById(id);
            if (i == 0)
                return 1;
            else
                return (1 + GetLevelById(i));
        } 
```

# iphone - UITextField 在被代码更改时触发 UITextFieldTextDidChangeNotification？

> ID：12985012
> 
> 赞同：2
> 
> 时间：2012-10-20T03:32:11.103
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

我正在尝试添加一个作为通知`UIViewController`的观察者。`UITextFieldTextDidChangeNotification`当我通过在文本字段中键入来更改文本时，一切都很顺利。但是，如果我尝试通过调用 [_textfield setText:@"Blahblah"] 更改文本，通知似乎不会被触发。

这是预期的方式吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T03:35:45.283

这通常适用于大多数事件。当事件由用户驱动时，您需要通知。但是，当事件由显式代码更改驱动时，您不需要通知。由于您正在进行显式调用以进行更改，因此您还可以选择调用通知处理程序。这是一种更灵活的方法。

这是一个示例，说明为什么您不希望在您自己的代码触发事件时发送通知。想象一下，当您的代码收到通知时，您验证文本并根据验证更新文本字段。这可能导致通知/更改的无限循环。

# android - android startActivityForResult 街景获取数据

> ID：12985015
> 
> 赞同：4
> 
> 时间：2012-10-20T03:33:08.893
> 
> 标签：android, google-street-view

如何从街景中获取结果？如Lat、Lng、Pitch、航向、FOV、Zoom...等。

我想做一个活动，单击“步行”按钮打开街景。用户走到某个位置，保存它。

我尝试使用`startActivityForResult`街景，但我无法选择位置。它只是打开了一个街景，仅供查看。

```
Intent streetView = new Intent(android.content.Intent.ACTION_VIEW,Uri.parse("google.streetview:cbll="+ objLatitude+","+objLongitude+"&cbp=1,99.56,,1,-5.27&mz=21"));
startActivityForResult(streetView,10); 
```

任何想法或任何其他方法都可以做到这一点？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T15:11:22.247

尝试这个：

```
Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("google.streetview:cbll=" + (float)aGeoPoint.getLatitudeE6()/1000000 + "," + (float)aGeoPoint.getLongitudeE6()/1000000 +"&cbp=1,180,,0,1.0")); 
startActivity(myIntent); 
```

# java - 计算流中的单词

> ID：12985016
> 
> 赞同：1
> 
> 时间：2012-10-20T03:33:13.030
> 
> 标签：java

我在一次采访中被问到这个问题，如果应用程序正在传输一些文本，例如客户端进行 http 调用并且在帖子正文中有一条文本消息，那么服务器端如何知道它何时收到完整的消息从头到尾。换句话说，如果你想计算这个文本流中的单词数，你怎么做呢？正常的字数计数是通过一种状态机的方法来完成的，在这种方法中，您可以跟踪空格并且对于 2 个单词之间的空格只增加一次。从流中计算单词有什么不同吗？如何 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:43:46.050

> 那么服务器端如何知道它何时从头到尾收到了完整的消息。

EOF 字符表示消息的结束，并且客户端通常会在完成后刷新并关闭流。这就是服务器如何知道来自客户端的传输已经结束。

> 从流中计算单词有什么不同吗？

无论文本的来源（无论是来自字符串变量还是来自流），确定单词数量的逻辑都将保持不变，除了来自字符串的输入在循环计数器达到长度时结束字符串，而在流中，它是停止循环的 EOF 字符。

# django - 如何创建一个在 Django 中只有一个实例的字段？

> ID：12985018
> 
> 赞同：1
> 
> 时间：2012-10-20T03:33:22.883
> 
> 标签：django

如何在 Django 中创建一个字段，我可能只创建它的一个实例。换句话说，我不希望在数据库中存储该项目的多个条目，因为只需要一个实例。在管理员界面中我可能只修改这个项目，并且不添加这个的多个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:19:08.313

不建议在 DB 中实现单个记录，这违反了模型。您可能希望更改存储信息的方式以实现您想要做的事情。

例如，如果要存储此记录：

```
SingleRecord: { field1: 'ABC', field2: 'XYZ', field3: 100 } 
```

您可以更改模型以将对存储`Key:Value`在模型中。

```
class MySingleRecord(models.Model):
    key = models.CharField(unique=True)
    value = models.CharField() 
```

有了这个，您将只有一个记录与一个`key`。

这样做的缺点是，值的类型是固定的。但是，您可以`type`在模型中添加字段并通过在存储时转换为字符串并在使用时转换为适当的类型来操作值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:39:08.300

好吧，您可以使用 unique=True 参数来检查数据库是否创建了重复的条目

# php - 属性中的 Javascript 变量

> ID：12985024
> 
> 赞同：1
> 
> 时间：2012-10-20T03:34:29.043
> 
> 标签：php, javascript

使用 php 很容易做这样的事情

```
<?
$x = "Joe";
echo "My name is $x";

?> 
```

但是我在用 javascript 做类似的事情时遇到了麻烦

```
var div = document.createElement("DIV");
    x="SomeValue";
    div.setAttribute("id", (x));
    div.setAttribute("onMouseDown", "SomeFunction((x))"); 
```

显然我希望 x 是“SomeValue”，但每次我查看输出时，它只是说 x 而不是值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:35:51.587

改变...

```
"SomeFunction((x))" 
```

到...

```
"SomeFunction((" + x + "))" 
```

JavaScript 不支持变量的字符串插值。

# google-app-engine - java - 从数据存储中获取子实体的附加代码不起作用

> ID：12985028
> 
> 赞同：1
> 
> 时间：2012-10-20T03:35:24.097
> 
> 标签：google-app-engine, google-cloud-datastore

我有此代码来检查数据存储中是否已存在子实体。问题是它适用于一个父子关系，但总是为另一个关系返回 null。

我的应用中有四种实体 - ORG、Contact、Profile、ProfileOrg。联系人类型实体是 ORG 的子级，而 ProfileOrg 是 Profile 的子级。将联系人添加到 ORG 的逻辑是获取给定组织的所有子实体，然后检查属性。如果属性匹配，则返回实体，否则返回 null。这非常适用于 ORG-Contact 关系。但 Profile-ProfileOrg 关系的完全相同的逻辑不起作用。它总是返回 null。下面是我的代码：

这是获取所有子实体并检查其属性“orgID”是否匹配的代码。

```
public static Entity getSingleProfileOrg(Key profileKey, String orgID) {

    Iterable<Entity> childProfileOrgs = Util.listChildren("profileOrg",profileKey);

    for (Entity e : childProfileOrgs) {
        if (e.getProperty("orgID").toString() == orgID) {
            return e;
        }
    }
    return null;
} 
```

这是查询数据存储的代码。

```
public static Iterable<Entity> listChildren(String kind, Key ancestor) {
  logger.log(Level.INFO, "Search entities based on parent");
  Query query = new Query(kind);
  query.setAncestor(ancestor);
  query.addFilter(Entity.KEY_RESERVED_PROPERTY, FilterOperator.GREATER_THAN, ancestor);
  PreparedQuery pq = datastore.prepare(query);
  return pq.asIterable();
} 
```

请帮忙。这让我陷入了困境。

编辑：为 org 获取 ChildEntities 的代码，效果很好

```
public static Entity getSingleContact(Key orgKey, String phoneContactID) {
    Iterable<Entity> childContacts = Util.listChildren("contact", orgKey);

    for (Entity e : childContacts) {
        if (e.getProperty("contactID") == phoneContactID) {
            return e;
        }
    }
    return null;
} 
```

编辑：创建或更新 ProfileOrg 的代码

```
public static void createOrUpdateProfileOrg(String profileID,
        String orgName, String ownerID) {
    String orgID = ownerID + "_" + orgName;
    Entity Profile = Product.getProfile(profileID);
    //Key profileKey = KeyFactory.createKey("Profile", profileID);
    Key profileKey = Profile.getKey();
    Entity profileOrg = getSingleProfileOrg(profileKey, orgID);
    if (profileOrg == null) {
        profileOrg = new Entity("profileOrg", profileKey);
        profileOrg.setProperty("name", orgName);
        profileOrg.setProperty("orgID", orgID);
        profileOrg.setProperty("owner", ownerID);
        profileOrg.setProperty("profileID", profileID);
        Util.persistEntity(profileOrg);
    }

} 
```

线

```
Entity Profile = Product.getProfile(profileID); 
```

应该可以正常工作，因为它也用于创建配置文件，我没有看到任何问题。

因为我总是从 getSingleProfileOrg(profileKey, orgID); 我最终得到重复的子实体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:58:15.173

由于在 中`listChildren`，您想基于祖先进行查询，因此您的方法是错误的。它应该是这样的：

```
public static Iterable<Entity> listChildren(String kind, Key ancestor) {
  logger.log(Level.INFO, "Search entities based on parent");
  Query query = new Query(kind);
  query.setAncestor(ancestor);
  PreparedQuery pq = datastore.prepare(query);
  return pq.asIterable();
} 
```

希望这可以帮助。

# python - 如何将 for 循环转换为递归方法？

> ID：12985040
> 
> 赞同：1
> 
> 时间：2012-10-20T03:37:30.697
> 
> 标签：python, loops, recursion

目前，我将 for 循环实现为递归方法。

```
for i in range(len(list)):
   **implementation code goes here** 
```

如何将其实现为递归方法？

我计划浏览一个列表，检查每个项目是否在另一个可接受的可能值列表中。如果是这样，我会对其执行某些操作。否则，我会执行其他操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T03:54:52.107

标准的结构递归公式（如果您使用像 Scheme 这样的函数式语言，您将使用该公式）将递归地解构列表：

```
func([]) => nothing
func([x, ...]) => do_stuff(x), func([...]) 
```

因此，执行此操作的“功能”方法是采用单个列表（不是索引），并在较小的列表上递归：

```
def rec_list(l):
    if not l: return # empty list case
    # process l[0]
    return rec_list(l[1:]) 
```

请注意，由于 ，这是非常低效的`l[1:]`，但它是理解更复杂的递归构造（例如在二叉树上递归）的基础。

我们可以用这种结构递归做一些有趣的事情。例如，以下是您如何在函数式语言中反转列表：

```
def rev_list(l):
    if not l: return []
    return rev_list(l[1:]) + [l[0]] 
```

（当然，你可以只`l[::-1]`用 Python 做，但在这里我们试图展示它是如何递归完成的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T03:43:25.643

所以你想取消一个很好的（大部分）编码良好的循环吗？（主要是因为您*可能*想使用`enumerate`而不是`range(len(lst))`） --`enumerate`非常酷，一旦您开始使用它，您将永远不会回头。

无论如何，我想我们可以这样做：

```
def silly_loop(lst,index=0):
    try:
       #do something with index and lst here
       silly_loop(lst,index=index+1)
    except IndexError:  #or maybe a different error, depending on what you're doing with index ...
       return 
```

一个例子：

```
def silly_loop(lst,index=0):
    try:
       print lst[index]
       silly_loop(lst,index=index+1)
    except IndexError:
       return

a = range(10)
silly_loop(a) 
```

请注意，我想不出您为什么要在实际代码中执行此操作的*任何*原因，（但是，如果您这样做只是为了自学递归，那么我希望这会有所帮助）。

# regex - Vim - 在距行首的特定偏移量处搜索带有（或不带）字符的行

> ID：12985042
> 
> 赞同：5
> 
> 时间：2012-10-20T03:37:49.783
> 
> 标签：regex, vim

我想找到第 78 列（该行的第 78 个字符）不是空格的所有行。

理想情况下，我想像普通搜索一样使用它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T05:15:41.157

您可以使用此模式：

```
\%78c\S 
```

*   `\%78c`匹配第 78 列的位置（实际上，该列是字节数，因此它对于多字节字符并不完全正确）。用于`\%78v`匹配虚拟列。
*   `\S`匹配非空格

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T09:19:16.673

我想您不需要@kev 或您建议的内容：虽然您正确找到了第 78 个*字符*（字符+变音符号计为一个）并且@kev 正确找到了 78't*字节*，但看起来您正在解决诸如“超过 78 的文本”之类的问题列边框”。如果我对您的任务的假设是正确的，那么您应该使用

```
\%78v\S 
```

（`\%{number}v`匹配虚拟（屏幕）列）。如果没有，最好使用您的答案，`\%{number}c`除了在某些生成的模式中之外，我从来没有看到需要使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T04:20:24.083

我想通了，留下一个例子，以防将来有人尝试这个：

如果我想匹配列“n”，我只需要匹配列“n-1”的任何内容，然后对列 n 执行我的条件。以下表达式查找第 35 列不等于空格的所有行。

```
^.\{34}[^ ] 
```

# java - 单击按钮时显示表格

> ID：12985047
> 
> 赞同：0
> 
> 时间：2012-10-20T03:38:32.780
> 
> 标签：java, swing, user-interface, jtable, repaint

我想做的只是在`JTable`用户单击按钮时显示一些数据并且它可以正常工作，但是发生了一些奇怪的事情。当我第一次单击按钮时没有任何反应，但是当我最大化框架时，表格出现了！

### `ActionListener`

```
b2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                boolean state = external.isSelected();
                DefaultTableModel model = new DefaultTableModel(ManhattanTable(values), Headers(values));
                   JTable table = new JTable(model);
                   table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
                   container.add(new JScrollPane(table));
                   table.setVisible(false);
                if(state) {
                    PrintStream out = null;
                    try {
                        out = new PrintStream(new FileOutputStream("output.txt"));
                    } catch (FileNotFoundException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                    System.setOut(out);
                    long start= System.currentTimeMillis();
                    Manhattan(values);
                    long end=System.currentTimeMillis();
                    out.println("time: "+(end-start)+" milliseconds");
                    out.println("Number of input data: "+values.size());    
                } else {
                     table.setVisible(true);
                }           
            }
        }); 
```

任何人都知道，为什么会出现这种奇怪的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T03:41:06.893

添加表后，调用[`container.revalidate()`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#revalidate%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:32:17.543

问题是您创建了表格并设置了属性，但您没有告诉窗口重绘它的组件。当您更改窗口大小时，您会强制它重绘。

# objective-c - 调试 SIGSEGV 崩溃

> ID：12985048
> 
> 赞同：2
> 
> 时间：2012-10-20T03:38:39.457
> 
> 标签：objective-c, ios, crash, segmentation-fault

用户一直在报告我很难重现的 SIGSEGV 崩溃——这对他们来说相对经常发生，但我从未能够重现它。通过阅读其他 StackOverflow 帖子，我知道我应该打开 NSZombies 来查找僵尸对象，但无论我在 Instruments 中做什么，我都无法让任何僵尸出现。

请注意，我使用的是 ARC。

任何人都可以从这两个崩溃报告中获得任何意义，所以我至少知道从哪里开始寻找僵尸？有没有人有关于如何让僵尸出现在 Instruments 中的任何提示？谢谢！

崩溃报告 #1：

```
0 MyApp 0x000e4972 testflight_backtrace + 238
1 MyApp 0x000e565c TFSignalHandler + 264
2 libsystem_c.dylib 0x31cd37ec _sigtramp + 48
3 UIKit 0x33e47bde -[UIViewController unloadViewForced:] + 250
4 UIKit 0x33f8f498 -[UIViewController purgeMemoryForReason:] + 64
5 Foundation 0x37f264fe __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 18
6 CoreFoundation 0x376c8546 ___CFXNotificationPost_block_invoke_0 + 70
7 CoreFoundation 0x37654096 _CFXNotificationPost + 1406
8 Foundation 0x37e9a3ea -[NSNotificationCenter postNotificationName:object:userInfo:] + 66
9 Foundation 0x37e9bc1a -[NSNotificationCenter postNotificationName:object:] + 30
10 UIKit 0x33f5a270 -[UIApplication _performMemoryWarning] + 80
11 UIKit 0x33f5a36a -[UIApplication _receivedMemoryNotification] + 174
12 libdispatch.dylib 0x349572e0 _dispatch_source_invoke + 516
13 libdispatch.dylib 0x34954b80 _dispatch_queue_invoke$VARIANT$mp + 52
14 libdispatch.dylib 0x34954ec0 _dispatch_main_queue_callback_4CF$VARIANT$mp + 156
15 CoreFoundation 0x376cf2ac __CFRunLoopRun + 1268
16 CoreFoundation 0x376524a4 CFRunLoopRunSpecific + 300
17 CoreFoundation 0x3765236c CFRunLoopRunInMode + 104
18 GraphicsServices 0x3255f438 GSEventRunModal + 136
19 UIKit 0x33dd6e7c UIApplicationMain + 1080
20 MyApp 0x0001b65e main (main.m:16)
21 MyApp 0x000115af start + 39 
```

崩溃报告 #2：

```
0 MyApp 0x0018e972 testflight_backtrace + 238
1 MyApp 0x0018f65c TFSignalHandler + 264
2 libsystem_c.dylib 0x31d067ec _sigtramp + 48
3 UIKit 0x33e7abde -[UIViewController unloadViewForced:] + 250
4 UIKit 0x33fc2498 -[UIViewController purgeMemoryForReason:] + 64
5 MyApp 0x000ec988 -[MyTableController didReceiveMemoryWarning] (MyTableController.m:129)
6 MyApp 0x0010a8a8 -[FeaturedViewController didReceiveMemoryWarning] (FeaturedViewController.m:65)
7 Foundation 0x37f594fe __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 18
8 CoreFoundation 0x376fb546 ___CFXNotificationPost_block_invoke_0 + 70
9 CoreFoundation 0x37687096 _CFXNotificationPost + 1406
10 Foundation 0x37ecd3ea -[NSNotificationCenter postNotificationName:object:userInfo:] + 66
11 Foundation 0x37ecec1a -[NSNotificationCenter postNotificationName:object:] + 30
12 UIKit 0x33f8d270 -[UIApplication _performMemoryWarning] + 80
13 UIKit 0x33f8d36a -[UIApplication _receivedMemoryNotification] + 174
14 libdispatch.dylib 0x3498a2e0 _dispatch_source_invoke + 516
15 libdispatch.dylib 0x34987b80 _dispatch_queue_invoke$VARIANT$mp + 52
16 libdispatch.dylib 0x34987ec0 _dispatch_main_queue_callback_4CF$VARIANT$mp + 156
17 CoreFoundation 0x377022ac __CFRunLoopRun + 1268
18 CoreFoundation 0x376854a4 CFRunLoopRunSpecific + 300
19 CoreFoundation 0x3768536c CFRunLoopRunInMode + 104
20 GraphicsServices 0x32592438 GSEventRunModal + 136
21 UIKit 0x33e09e7c UIApplicationMain + 1080
22 MyApp 0x000c565e main (main.m:16)
23 MyApp 0x000bb5af start + 39 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:26:57.533

当您的应用收到内存警告时，似乎有什么地方出错了。您可以使用调试菜单在模拟器上强制执行此操作，或者通过发送（在生产代码中非法）`_performMemoryWarning`方法在设备上强制执行此操作：

```
[[UIApplication sharedApplication] _performMemoryWarning]; 
```

您可以将其放在重复计时器上以定期发送警告。我建议将其包装在 an`#IFDEF DEBUG`中以防止其投入生产。

这不会解决您的问题，但它可以帮助您重现崩溃，这是至关重要的第一步。

# lambda - λ演算评估

> ID：12985052
> 
> 赞同：0
> 
> 时间：2012-10-20T03:39:17.283
> 
> 标签：lambda

我是新来的，也是 lambda 演算的新手。我的问题是：在 lambda 演算归约（到正常形式）中，有没有办法评估表达式（以确保我正确地进行了归约）。

例如（/ 代表 lambda）（使用 beta 方法）

`/x.y(/z.xz))(/y.zy)`

`=> /x.y(/z.xz))z` `=> (/x.yx)z` `=> yz`

现在如何确保我的减少是正确的？有没有一种方法可以评估原始版本并将其与简化版本进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-19T16:38:54.693

您在那里所做的是对该 Lambda 表达式的评估。如果你的意思是*让计算机评估它*，像这样的 lambda 函数

![公式](../Images/623c384db72b74bb4781fdd4cec9d917.png)

在 Haskell 中是这样写的：

```
(\a b => b a) 
```

Python：

```
lambda a, b: b(a) 
```

C＃：

```
(a, b) => b(a) 
```

# javascript - 我如何使用带有超链接 onclick 的 javascript:window.open？

> ID：12985054
> 
> 赞同：-1
> 
> 时间：2012-10-20T03:39:29.310
> 
> 标签：javascript, html, hyperlink, escaping

当用户单击文本时，我正在尝试触发一些 javascript 以打开一个弹出窗口。我不认为我正确地逃避了我的链接，而且我一直在打我的头一段时间。这是我的代码：

```
var $link = '<a href= "onclick= javascript:window.open("../EForm/Info?formId=' + data.record.Form.Id + ');">info</a>'; 
```

以下是在页面上呈现的内容：

```
<a href="onclick= javascript:window.open(" ..="" eform="" info?formid="1);&quot;">info</a> 
```

这显然是不对的....有人可以看到我需要如何更改上面的链接才能正确转义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:54:59.997

您可以在`open`方法中转义单引号。

```
var $link = '<a href="#" onclick="javascript:window.open(\'../EForm/Info?formId=' + data.record.Form.Id  + '\');">info</a>'; 
```

**编辑**

经过深思熟虑，我建议您也将相同的网址`href`放在`target=_blank`. 这样，即使禁用了 javascript，用户仍然可以访问该页面。

或者`onclick`，如果您只想使用新选项卡/窗口打开网址，则只需将所有内容一起删除，因为`href`这样`target=_blank`就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T03:48:11.243

```
 '<a href="#" onclick= "open_window()">info</a>'

    function open_window(){
    window.open("../EForm/Info?formId='" + data.record.Form.Id);

   } 
```

# java - java中的不可变类

> ID：12985059
> 
> 赞同：8
> 
> 时间：2012-10-20T03:40:55.020
> 
> 标签：java, reflection, immutability

我通过遵循所有 java 标准使我的类不可变

```
A. Defined class as final
B. declared all fields as private and final
C. No setter method
D. No method changes the state of object
E. declared all method as final
F. Safer/defencieve copying of collection/ non mutable object fields. 
```

这些是我在设计不可变类时所做的初步检查点。

但是还有一个问题，我的对象仍然可以通过java反射来修改，对吗？或者我在课堂上错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T03:44:06.207

反射是无懈可击的——即使是不可变的类也不能幸免。但是，您对此无能为力，因此“不能通过反射进行修改”不是不变性的标准之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T05:20:08.137

是的。反射仍然可以访问/更改它。你不能真的计划反对。如果有人用反射改变你的对象，我会怀疑他们编写的代码的质量。

不可变类非常适合确保线程安全的应用程序。不可变对象始终是线程安全的。如果您正在寻找更多有用的信息，请阅读 Effective Java。这是任何 Java 开发人员的必读之书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T03:44:47.197

是的，它仍然可以通过反射来修改。除此之外，您似乎需要注意使其不可变。

# xml - 通过 XSLT 操作 XML 值

> ID：12985062
> 
> 赞同：2
> 
> 时间：2012-10-20T03:41:26.300
> 
> 标签：xml, xslt

以下是`<Validation>`标签可以有 1....n 个`<Failed>`标签的 XML。

```
<Header>
    ...
    ...
</Header>
 <Validation>
    <Type>Classic</Type> 
    <Percentage>10</sPercentage> 
     <Failed>
          <ID>CS-20192018</ID> 
          <Department>MF404</Department> 
          <ErrorDescription>Failed at server</ErrorDescription> 
     </Failed>
     <Failed>
          <ID>CS-3233333</ID> 
          <Department>MF404</Department> 
          <ErrorDescription>Failed at webservice</ErrorDescription> 
     </Failed>
  </Validation>
 <Validation>
      <Type>CheckMember</Type> 
      <Percentage>20</Percentage> 
      <Failed>
          <ID>CS-4648902</ID> 
          <Department>MF404</Department> 
          <ErrorDescription>Data not available</ErrorDescription> 
      </Failed>
  </Validation> 
```

**要求**：

我只是想根据`<Failed>`计数总结百分比。

第一个`<Validation>`标签：

```
Percentage * no of <Failed> count = Result1
10 * 2 = 20 
```

第二个`<Validation>`标签：

```
Percentage * no of <Failed> count = Result2
20 * 1 = 20

Total = Result1 + Result2 = 20 + 20 = 40 
```

因此，我想将总百分比输出设为 40，并且我尝试了`xsl:call-template`方法，但它化为乌有。

你能分享我计算百分比总和的代码片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:56:41.213

**I. 有多种可能的 XSLT 1.0 解决方案**：

.1。非递归，使用`xxx:node-set()`函数：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">

 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:variable name="vrtfResults">
    <xsl:apply-templates/>
  </xsl:variable>

  <xsl:value-of select="sum(ext:node-set($vrtfResults)/*)"/>
 </xsl:template>

 <xsl:template match="Validation">
  <x><xsl:value-of select="Percentage * count(Failed)"/></x>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时（更正为格式正确）：**

```
<t>
    <Header>
    ...
    ...
    </Header>
    <Validation>
        <Type>Classic</Type>
        <Percentage>10</Percentage>
        <Failed>
            <ID>CS-20192018</ID>
            <Department>MF404</Department>
            <ErrorDescription>Failed at server</ErrorDescription>
        </Failed>
        <Failed>
            <ID>CS-3233333</ID>
            <Department>MF404</Department>
            <ErrorDescription>Failed at webservice</ErrorDescription>
        </Failed>
    </Validation>
    <Validation>
        <Type>CheckMember</Type>
        <Percentage>20</Percentage>
        <Failed>
            <ID>CS-4648902</ID>
            <Department>MF404</Department>
            <ErrorDescription>Data not available</ErrorDescription>
        </Failed>
    </Validation>
</t> 
```

**产生了想要的正确结果**：

```
40 
```

.2\. 使用原始递归：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
    <xsl:output method="text"/>

    <xsl:template match="/*">
            <xsl:apply-templates select="Validation[1]"/>
    </xsl:template>

    <xsl:template match="Validation[following-sibling::Validation]">
     <xsl:param name="pSum" select="0"/>

     <xsl:apply-templates select="following-sibling::Validation[1]">
       <xsl:with-param name="pSum" select="$pSum +Percentage*count(Failed)"/>
     </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="Validation">
     <xsl:param name="pSum" select="0"/>
   <xsl:value-of select="$pSum +Percentage*count(Failed)"/>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
40 
```

* * *

**二、XSLT 2.0 (XPath 2.0) 解决方案**

**以下也可以指定为根本不需要 XSLT 的单个 XPath 2.0 表达式**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/*">
     <xsl:sequence select="sum(Validation/(Percentage*count(Failed)))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**还会产生想要的正确结果**：

```
40 
```

# r - R中的Gsub难题：匹配模式

> ID：12985066
> 
> 赞同：0
> 
> 时间：2012-10-20T03:42:40.360
> 
> 标签：r

```
gsub("([a-z]+)([0-9]+)","\\2","ytu678yu")
[1] "678yu"
gsub("([a-z]+)([0-9]+)(.*)","\\2","ytu678yu")
[1] "678" 
```

不知为何 `gsub("([a-z]+)([0-9]+)","\\2","ytu678yu")` 拿不到`678`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:49:42.293

在第一种情况下，模式匹配“ytu678”，然后将其替换为“\2”，即“678”，因此最终得到“678yu”。

在第二种情况下，模式匹配“ytu678yu”，然后将其替换为“\2”，即“678”，因此最终得到“678”。

试试这个：

```
> gsub("([a-z]+)([0-9]+)","","ytu678yu")
[1] "yu"
> gsub("([a-z]+)([0-9]+)(.*)","","ytu678yu")
[1] "" 
```

# c# - 在 web.config 中编辑设置

> ID：12985068
> 
> 赞同：3
> 
> 时间：2012-10-20T03:42:53.537
> 
> 标签：c#, .net, soap, paypal, web-config

我不知道如何命名这个问题 - 我正在向 PayPal 的 Express Payment API 发出请求。我正在使用他们的 dll 来帮助发出请求并解析响应。他们的代码工作的说明是在`web.config`文件中添加您的授权凭据。我已经这样做了。我的问题是我希望能够编辑这些动态设置的凭据（可能来自 SQL），因为我们将允许不同的用户输入他们的 API 凭据。向 PayPal 发送请求如下所示

```
 Dim wrapper As New SetExpressCheckoutReq()
    wrapper.SetExpressCheckoutRequest = request
    Dim service As New PayPalAPIInterfaceServiceService()
    Dim setECResponse As SetExpressCheckoutResponseType = service.SetExpressCheckout(wrapper) 
```

那里没有太多空间来编辑请求的标头，因为`PayPalAPIInterfaceServiceService()`在他们的 dll 中定义并根据 web.config 中的凭据应用自己的标头。

所以，我的问题是，有没有办法`web.config`在它查看时指向另一个位置`web.config`？我不确定这是可能的。此外，是否有任何方法可以编辑在 dll 中定义的请求的标头而不更改 dll（以保持 pci 兼容）

这是 web.config 中的行：

```
 <account apiUsername="****" apiPassword="****" apiSignature="****"/> 
```

编辑：

我知道动态添加或编辑 web.config 是不好的，我一直在寻找一种指向另一个可以编辑的位置的方法。就像你可以编写的 C# 代码一样`Settings["string"]`，它指向 web.config。web.config 中有没有办法指向项目中的某个位置，并且该位置可以动态更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:54:37.473

我同意 iefpw 的观点，即手动修改 web.config 文件是个坏消息，但既然你问了，[WebConfigurationManager](http://msdn.microsoft.com/en-us/library/ms178411%28v=vs.100%29.aspx)提供了你正在寻找的功能。

该类有一个[Save](http://msdn.microsoft.com/en-us/library/system.configuration.configuration.save%28v=vs.100%29.aspx)方法，可以在您进行更改后调用该方法。我只使用 WebConfigurationManager 来读取 web.config 文件，所以没有代码示例。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:58:43.840

您必须从 SQL Server 动态执行此操作，每次在 Web 配置中设置凭据都会弄乱您的系统。web.config 也适用于整个应用程序。从数据库进行直接的动态 sql 查询并提供给 paypal。如果您有多个凭据，请不要乱用 web.config。

# html - 如何在页面顶部添加 div 内容区域？

> ID：12985069
> 
> 赞同：0
> 
> 时间：2012-10-20T03:42:56.957
> 
> 标签：html, add

我正在尝试将标题区域添加到带有背景图像的 html 页面顶部，我可以在其中显示一些内容。

这是我正在编辑的主题的预览：http: [//live.bobosh.com/frontium/](http://live.bobosh.com/frontium/)

我试过添加：

```
<div class= "top">
    .top {
    width:100%; 
    height: 50px;
    background-image: url ('/img/background.png') repeat-x;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 999;
} 
```

它只是将所有内容都向下推，并且不显示我的背景图像。

谢谢。

编辑：好的，我能够只使用背景颜色和边框来让 div 看起来像我想要的那样，并且它固定在顶部。但是，它现在覆盖了我的部分标题区域。我希望它固定在顶部，但不希望它显示在我的任何其他内容上。我只希望它显示在上面。

我怎么能这样做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:57:11.437

[看看这个小提琴，](http://jsfiddle.net/CzKKt/)我认为你在 /img/background.png 中没有图像或路径错误

```
`background-image: url ('/img/background.png') repeat-x;` 
```

删除`repeat-x`并检查你是否希望你可以添加 `background-repeat:repeat-x;`到你的 CSS

# vb6 - 重写没有标签的基本代码

> ID：12985071
> 
> 赞同：2
> 
> 时间：2012-10-20T03:43:16.943
> 
> 标签：vb6, basic, qbasic, quickbasic

我有一些使用标签的代码，它的一个例子如下：

```
SUB occupy (x)
occupied(x) = 0
FOR i = 1 TO 40
IF armyloc(i) = x THEN 
    occupied(x) = i
    GOTO holdup
ELSE
END IF
NEXT i
holdup:
END SUB 
```

如您所见，它使用标签保持跳出它所在的 For..Next 循环。我不知道有什么好方法可以将其更改为更好/正确的代码？例如，我通常可能会这样做：

```
SUB occupy (x)
occupied(x) = 0
FOR i = 1 TO 40
IF armyloc(i) = x THEN 
    occupied(x) = i
    GOTO holdup
ELSE
       NEXT i
END IF
END SUB 
```

但这会产生一个问题——FOR..NEXT 循环现在嵌套在 IF..THEN 中的一半。有关解决此问题的方法的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:10:03.393

正如 Mark Hall 在上面的评论中指出的那样，在这些情况下使用 Exit For 效果很好。删除 GOTO 并替换为 Exit For 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T08:25:34.163

```
SUB occupy (x)
occupied(x) = 0
FOR i = 1 TO 40
    IF armyloc(i) = x THEN occupied(x) = i: Exit For
NEXT i
END SUB 
```

# php - 如何在特定的 url 中制作动态 php 网页？

> ID：12985075
> 
> 赞同：0
> 
> 时间：2012-10-20T03:43:33.133
> 
> 标签：php, redirect, routing

如何在特定的 url 中制作动态 php 网页？IE：

如果我访问一个没有验证其唯一用户名的人的 Facebook 页面，那么他的个人资料会显示在 url 栏中[https://www.facebook.com/#!/profile.php?id=2...... ....6&fref=ts](https://www.facebook.com/#!/profile.php?id=2..........6&fref=ts)（作为登录用户查看时）和[http://www.facebook.com/people/username-something/2............6](http://www.facebook.com/people/username-something/2............6)（查看时作为未登录的用户）但对于 url 栏中的某些人来说，如果我将他们的 url id 粘贴到经过验证的用户名即[http://www.facebok.com/someusername](http://www.facebok.com/someusername)它会显示他们的个人资料。

所以我的问题是：如果我想为我的网站为注册用户制作类似的东西，如何做到这一点，因为 php 从 id 获取值但它（www.facebok.com/someusername）只是普通链接？php 在浏览器中是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:52:02.700

嘿伙计，这是通过编辑您的 .htaccess 文件来完成的。我可以给你它的教程的链接：

[这是链接享受](http://www.9lessons.info/2009/11/pretty-urls-with-htaccess-file.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T08:28:24.477

这是一个例子 php 做它

不要忘记设置。httaccess 忽略请求，例如像这样

```
<?php
    if($_SERVER['REQUEST_URI'] =='somerequest'){
    //do something here

    } else {

    // do something if else
    }
    ?> 
```

这是一个例子。htaccess

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

# c# - 单击 DataGridview 选项卡 c#、.Net 4.0 时出现异常

> ID：12985078
> 
> 赞同：-1
> 
> 时间：2012-10-20T03:44:00.190
> 
> 标签：c#, winforms, tabs

我的 winform 应用程序有两个选项卡和多线程，一个是主选项卡，另一个是日志选项卡。我只使用日志选项卡在 datagridview 控件中显示日志。单击日志选项卡时随机发生异常（未单击行或列），我尝试过但无论如何都找不到修复它。这是错误日志：

```
Message : Object reference not set to an instance of an object.
Source : System.Windows.Forms
TargetSite : System.Windows.Forms.DataGridViewElementStates GetRowState(Int32)
StackTrace :    at System.Windows.Forms.DataGridViewRowCollection.GetRowState(Int32 rowIndex)
   at System.Windows.Forms.DataGridView.ComputeHeightOfFittingTrailingScrollingRows(Int32 totalVisibleFrozenHeight)
   at System.Windows.Forms.DataGridView.GetOutOfBoundCorrectedHitTestInfo(HitTestInfo& hti, Int32& mouseX, Int32& mouseY, Int32& xOffset, Int32& yOffset)
   at System.Windows.Forms.DataGridView.OnMouseMove(MouseEventArgs e)
   at System.Windows.Forms.Control.WmMouseMove(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.DataGridView.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

Message : Object reference not set to an instance of an object.
Source : System.Windows.Forms
TargetSite : Void ClearInternal(Boolean)
StackTrace :    at System.Windows.Forms.DataGridViewRowCollection.ClearInternal(Boolean recreateNewRow)
   at System.Windows.Forms.DataGridView.OnClearingColumns()
   at System.Windows.Forms.DataGridViewColumnCollection.Clear()
   at System.Windows.Forms.DataGridView.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Dispose()
   at System.Windows.Forms.Control.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Dispose()
   at System.Windows.Forms.Control.Dispose(Boolean disposing)
   at System.Windows.Forms.TabControl.Dispose(Boolean disposing)
   at System.ComponentModel.Component.Dispose()
   at System.Windows.Forms.Control.Dispose(Boolean disposing)
   at System.Windows.Forms.Form.Dispose(Boolean disposing) 
```

更新状态码：

```
 private void updateMessage(int index, string message)
    {
        try
        {
            this.dgForums.Rows[index].Cells["ColStatus"].Value = message;

            System.Windows.Forms.Application.DoEvents();
        }
        catch
        {
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:57:54.720

当您单击除网格单击事件或任何其他与事件相关的网格中的任何行和列之外的网格时，在您的代码之前添加代码

```
if(this.dgForums.Rows.Count > 0)
{
  //Continue your code here
} 
```

# html - 使用相邻的固定大小的 div 使 div 填充空间

> ID：12985081
> 
> 赞同：1
> 
> 时间：2012-10-20T03:44:28.327
> 
> 标签：html, css

我正在尝试将 div 对齐到容器的左下角： ![在此处输入图像描述](../Images/1e6f9ac982544a444f902d03ee756d83.png)

绿色是里面的主体容器。黄色是标题 div，里面是 logo 和 title。

现在，我将徽标（橙色 div）设置为`{float:right; width: 30%}`，因此内部图像的宽度不会超过 div。

问题出在蓝色那个。我希望它与橙色（取决于图像）具有相同的高度，并填充我们其余的空间。（正如你在图片中看到的那样）。我还希望蓝色 div（标题）的文本与左下角对齐。

我尝试了各种绝对位置，父/子的相对位置并设置顶部和底部。使用固定高度有效，但 div 需要与图像 div 具有相同的高度。

任何帮助将不胜感激，因为我将了解更多关于 css 的信息。

**编辑：**图像的宽度将取决于样板，并且图像的尺寸不固定。标题将包含一个 css 格式`<h1>`和一个`<span>`图标。

**EDIT2：**我当前的代码： [//jsfiddle.net/QxK9U/](http://jsfiddle.net/QxK9U/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:35:53.947

如果将图像 div 包裹在标题 div 中，那么标题 div 将具有相同的高度，除非它的内容比图像 div 多。

```
<div class="header">
    <div class="title">
        <div class="image"><img src="http://placekitten.com/200/250"></div>
    </div>
</div> 
```

[http://jsfiddle.net/Gc5qz/1/](http://jsfiddle.net/Gc5qz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:52:14.037

你试过这个css属性吗

```
bottom:0
left:0 
```

* * *

更新：

```
 position: relative; 
```

# iphone - 将图像插入 iPhone 中的水平滚动视图

> ID：12985087
> 
> 赞同：0
> 
> 时间：2012-10-20T03:46:35.123
> 
> 标签：iphone, ios5

我现在正在开发一个**相机应用程序**，并且正在为我拍摄的照片使用**图像滤镜效果**。因此，当我拍照时，应该显示图片，并且在其下方，我想以**水平滚动视图**的形式显示该图片的十种不同的滤镜效果。

因此，如果我单击滚动视图中的任何一种滤镜效果，该特定效果应该应用于我拍摄的照片，并且该**滤镜应用的图片**应该显示在同一视图中。我还应该在图片上方有一个保存按钮，这样我就可以将它保存在我的**私人应用程序目录**中。（**注意：**不在默认图片库中）

我无法弄清楚我必须实现的确切代码或概念，即如何在水平滚动视图中插入图像或如何将图片保存到我的私有应用程序目录中。我正在使用iOS5。因此，非常感谢任何好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:32:59.493

它可能会帮助您处理水平滚动视图图像。

```
int scrollWidth = 180;
scrollview.contentSize = CGSizeMake(scrollWidth,110);    
int xOffset = 4;

for(int i = 0; i < [imgnamearr count]; ++i) 
{   
    UIImageView *img = [[UIImageView alloc] init];
    img.layer.masksToBounds = YES;
    img.frame = CGRectMake(5+xOffset,1, 145, 110);
    scrollview.contentSize = CGSizeMake(scrollWidth+xOffset,115); 
    [img addSubview:[UIImage imageNamed:[imgnamearr objectAtIndex:i]]];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(5+xOffset,0, 160, 110);
    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    button.accessibilityIdentifier =[imgarr objectAtIndex:i]; 
    [scrollview addSubview:img];
    [scrollview addSubview:button];
    scrollview.contentSize = CGSizeMake(scrollWidth+xOffset,115);
    xOffset += 157;
}

- (IBAction)buttonClicked:(UIButton *)sender {
   UIImageView *bigimg = [[UIImageView alloc] init];
   bigimg.layer.masksToBounds = YES;
   bigimg.frame = CGRectMake(0,0, 200, 200);
   [bigimg addSubview:[UIImage imageNamed:sender.accessibilityIdentifier]];
   [self.view addSubview:bigimg];
} 
```

编辑2：

```
-(void)Setthewholeview{

int row = 0;
int column = 0;

for(int i = 0; i < [imagearry count]; ++i) 
{

    UIView *uview =[[UIView alloc]initWithFrame:CGRectMake(column*155+5, row*126, 155, 125)];
    uview.layer.masksToBounds=YES;
    uview.backgroundColor = [UIColor whiteColor];

    UIImageView *detailback =[[UIImageView alloc] initWithFrame:CGRectMake(0,72,52,52)]; 
    detailback.image=[[UIImage alloc]init];
    detailback.image = [UIImage imageNamed:@"abc.png"];
    [uview addSubview:detailback];
    [detailback release];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(column*155+5, row*126, 155, 125);
    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    button.tag = [[arrayname objectAtIndex:i]intValue]; 

    if (column == 1) // here set column which you want. If you wnat 2 column then set 1 here.
    {
        column = 0;
        row++;
    } else 
    {
        column++;
    }

    [self.scrollview addSubview:uview];
    [self.scrollview addSubview:button];
}

[self.scrollview setContentSize:CGSizeMake(320, (row+1) * 130)];

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T04:17:33.587

`contentSize`您可以通过将其高度设置为等于其高度来使滚动视图仅水平滚动`bounds`。

您可以通过添加实例`UIImageView`作为滚动视图的子视图，在滚动视图中显示图像。

您可以使用`UIImageJPEGRepresentation`或`UIImagePNGRepresentation`将图像转换为，并通过向其发送消息来`NSData`写入数据。`writeToURL:options:error:`

您可以使用 获取应用程序私有文档目录的 URL ，作为目录、域和URL`-[NSFileManager URLForDirectory:inDomain:appropriateForURL:create:error:]`传递。`NSDocumentDirectory``NSUserDomainMask``nil`

# asp.net-mvc - 将 DropDownList 绑定到 MVC 视图中

> ID：12985088
> 
> 赞同：9
> 
> 时间：2012-10-20T03:46:41.627
> 
> 标签：asp.net-mvc

从这里阅读：[ASP.NET MVC](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc)

动作`SelectCategory`已在控制器内部创建 -

```
 public ActionResult SelectCategory() {

     List<SelectListItem> items = new List<SelectListItem>();    
     items.Add(new SelectListItem { Text = "Action", Value = "0"});    
     items.Add(new SelectListItem { Text = "Drama", Value = "1" });    
     items.Add(new SelectListItem { Text = "Comedy", Value = "2", Selected = true });    

     ViewBag.MovieType = items;

     return View();    
 } 
```

我无法理解下一行中的数据绑定。

```
@Html.DropDownList("MovieType") 
```

在以类似方式绑定数据的同时，

```
@Html.DropDownList("IdList"); 
```

我收到以下错误-

> 没有具有键“IdList”的“IEnumerable”类型的 ViewData 项。

**控制器动作**：

```
public ActionResult SelectId()
    {
        List<SelectListItem> items = new List<SelectListItem>();
        items.Add(new SelectListItem { Text = "MyId1", Value = "MyId1", Selected=true });
        items.Add(new SelectListItem { Text = "MyId2", Value = "MyId2" });

        ViewBag.IdList = items;
        return View();
    } 
```

我错过了什么？感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-20T07:09:56.873

您已设置`ViewBag.MovieType`=>，当您使用`@Html.DropDownList("MovieType")`下拉菜单时将使用此值。当您编写`@Html.DropDownList("IdList")`时，助手在 ViewBag 中找不到相应的`IdList`属性并抛出错误，因为它不知道从哪里绑定数据。

或者，如果您想更改下拉列表的名称，您可以使用以下内容：

```
@Html.DropDownList("SelectedMovieType", (IEnumerable<SelectListItem>)ViewBag.MovieType) 
```

并且您的 POST 操作将有一个`SelectedMovieType`参数来检索所选值。

但我会避免使用 ViewBag。定义视图模型更好：

```
public class MyViewModel
{
    public string SelectedMovieType { get; set; }
    public IEnumerable<SelectListItem> MovieTypes { get; set; }
} 
```

然后让您的控制器操作填充此视图模型并将其传递给视图：

```
public ActionResult SelectId()
{
    List<SelectListItem> items = new List<SelectListItem>();
    items.Add(new SelectListItem { Text = "MyId1", Value = "MyId1", Selected=true });
    items.Add(new SelectListItem { Text = "MyId2", Value = "MyId2" });

    var model = new MyViewModel
    {
        MovieTypes = items    
    };

    return View(model);
} 
```

在您的强类型视图中：

```
@model MyViewModel
@Html.DropDownListFor(x => x.SelectedMovieType, Model.MovieTypes) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T06:35:37.203

在将您的列表绑定到 DropDown 时，您需要在使用 @Html.DropDown 控件时将其类型转换为 IEnumerable，该控件不是**使用 Model 进行强类型的**

在视图中

```
@Html.DropDownList("MovieType",(IEnumerable<SelectListItem>)ViewBag.MovieType) 
```

如果您绑定 IdList 则另一种方式

```
@Html.DropDownList("IdList",(IEnumerable<SelectListItem>)ViewBag.IdList) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-27T12:02:24.397

数据绑定将数据绑定到模型的一种无痛方式：**不要将剃须刀用于 Dropdown。**手动绑定，用 FormCollection 对象获取。

控制器：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Create(Sorun sorun,FormCollection fc)
    {
        //Define independently as form collection

        sorun.GonderilecekBirim = fc["GonderilecekBirim"];
        sorun.IlkSorulmaTarihi = DateTime.Now;
        if (ModelState.IsValid)
        {

            db.Soruns.Add(sorun);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(sorun);
    } 
```

看法

```
@Html.LabelFor(model => model.GonderilecekBirim, htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            <!-- Define as raw html -->
            <select id="GonderilecekBirim" name="GonderilecekBirim">
                <option value="4">Satın Alma</option>
                <option value="5">Muhasebe</option>
            </select>

            @*@Html.ValidationMessageFor(model => model.GonderilecekBirim, "", new { @class = "text-danger" })*@
        </div> 
```

# r - 打印列居中对齐的数据框

> ID：12985091
> 
> 赞同：8
> 
> 时间：2012-10-20T03:46:59.920
> 
> 标签：r, printing, dataframe, formatting, center-align

我想打印一个列居中对齐的数据框。下面是我尝试过的，我认为打印数据框 test1 会导致列在中心对齐，但事实并非如此。关于我如何做到这一点的任何想法？

```
test=data.frame(x=c(1,2,3),y=c(5,6,7))
names(test)=c('Variable 1','Variable 2')
test[,1]=as.character(test[,1])
test[,2]=as.character(test[,2])
test1=format(test,justify='centre')
print(test,row.names=FALSE,quote=FALSE)
 Variable 1 Variable 2
          1          5
          2          6
          3          7
print(test1,row.names=FALSE,quote=FALSE)
 Variable 1 Variable 2
          1          5
          2          6
          3          7 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T04:58:30.743

问题是，为了使其按预期工作，`width`还需要指定 " " 参数。

这是一个例子：

```
test.1 <- data.frame(Variable.1 = as.character(c(1,2,3)), 
                     Variable.2 = as.character(c(5,6,7)))

# Identify the width of the widest column by column name
name.width <- max(sapply(names(test.1), nchar))
format(test.1, width = name.width, justify = "centre")
#   Variable.1 Variable.2
# 1     1          5     
# 2     2          6     
# 3     3          7 
```

但是，这种方法如何处理变量名称长度不同的列？不太好。

```
test.2 <- data.frame(A.Really.Long.Variable.Name = as.character(c(1,2,3)), 
                     Short.Name = as.character(c(5,6,7)))

name.width <- max(sapply(names(test.2), nchar))
format(test.2, width = name.width, justify = "centre")
#   A.Really.Long.Variable.Name                  Short.Name
# 1              1                           5             
# 2              2                           6             
# 3              3                           7 
```

当然，有一种解决方法：将每个变量名称的“宽度”更改为相等的长度，方法是用空格填充它们（使用`format()`）

```
orig.names <- names(test.2) # in case you want to restore the original names
names(test.2) <- format(names(test.2), width = name.width, justify = "centre")
format(test.2, width = name.width, justify = "centre")
#   A.Really.Long.Variable.Name         Short.Name         
# 1              1                           5             
# 2              2                           6             
# 3              3                           7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-30T14:18:20.320

调用此函数以获取要显示的数据框：

```
def pd_centered(df):
    return df.style.set_table_styles([
        {"selector": "th", "props": [("text-align", "center")]},
        {"selector": "td", "props": [("text-align", "center")]}]) 
```

例如：

```
display(pd_centered(original_df)) 
```

这将使标题和实际数据单元格居中对齐，如果您愿意，您可以删除`td`或`th`禁用其中任何一个。

来源：[https ://github.com/pandas-dev/pandas/issues/12144](https://github.com/pandas-dev/pandas/issues/12144)

# php - 删除多维数组中的相同索引

> ID：12985094
> 
> 赞同：0
> 
> 时间：2012-10-20T03:47:11.940
> 
> 标签：php, arrays, multidimensional-array

我有如下多维数组。

```
array(
    0 => array(
            'id' => '6',
            'name' => 'Looper',
            'language' => 'hindi'), 
    1 => array(
            'id' => '7',
            'name' => 'Rush',
            'language' => 'hindi'),
    2 => array(
            'id' => '6',
            'name' => 'Looper',
            'language' => 'hindi')); 
```

所以我想删除一个具有相同值的数组，它应该如下所示。

```
array(
    0 => array(
            'id' => '6',
            'name' => 'Looper',
            'language' => 'hindi'), 
    1 => array(
            'id' => '7',
            'name' => 'Rush',
            'language' => 'hindi')); 
```

请帮助我获得解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T03:50:46.927

可`array_unique()`用于从 php 中的单个多维数组中删除重复条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:55:50.103

传递给变量以保存密钥，检查使用`in_array`

```
function assc_array_filter($array, $id)
{
    $keys = array();
    foreach($array as $index => $arr)
    {
        if(in_array($arr[$id], $keys))
        {
            unset($array[$index]);
        }
        else
        {
            $keys[] = $arr[$id];
        }
    }
    return $array;
} 
```

调用函数为

```
print_r(assc_array_filter($arr, 'id')); 
```

* * *

----**更新**：切换使用`array_search`

上面的代码将返回数组中的第一个，而不是在数组上找到的“第二组”，所以..添加了一个参数，允许它更新找到的“第一组”..

```
function assc_array_filter($array, $id, $last_updated = false, $strict = false)
{
    $keys = array();
    foreach($array as $index => $arr)
    {
        if(($in_index = array_search($arr[$id], $keys, $strict)) !== false )
        {
            if($last_updated)
            {
                $array[$in_index] = $arr;
            }
            unset($array[$index]);
        }
        else
        {
            $keys[] = $arr[$id];
        }
    }
    return $array;
} 
```

调用为

```
print_r(assc_array_filter($arr, 'id', true)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T03:56:02.577

```
$oldarr = array(
    0 => array(
            'id' => '6',
            'name' => 'Looper',
            'language' => 'hindi'), 
    1 => array(
            'id' => '7',
            'name' => 'Rush',
            'language' => 'hindi'),
    2 => array(
            'id' => '6',
            'name' => 'Looper',
            'language' => 'hindi'));

$newarr = array();
foreach( $oldarr as $v ) if( !in_array( $v, $newarr ) ) $newarr[] = $v;
print_r( $newarr ); 
```

这将解决您的问题.. 从 PHP 4.2 开始， in_array() 将数组作为第一个参数。array_unique() 不适用于此解决方案.. 来自 php.net：“注意：请注意，array_unique() 不适用于多维数组。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T03:48:27.933

好的，也许您可​​以尝试使用 unset(array[2])，这会从数组中删除一个元素[http://php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

# python - How to return that last index of a list Python

> ID：12985096
> 
> 赞同：1
> 
> 时间：2012-10-20T03:47:34.743
> 
> 标签：python, recursion, indexing

> **Possible Duplicate:**
> [Finding first and last index of some value in a list in Python](https://stackoverflow.com/questions/522372/finding-first-and-last-index-of-some-value-in-a-list-in-python)

Hi I was wondering if someone could help me with Python. I am trying to create a code that returns the last index of the last occurrence of an item in a list in a recursive way. So in a list `[1,2,3,4,5,2]` the last it should return `4`. It only takes in 2 variables which are the list and the item that it is searching for. If it does not find any matching variable then it returns `-1`.

So far I have this:

```
def lstIndex(lst, item):
    if len(lst) == 0:
        return -1
    place = lst[0]
    if place == item:
        print(place)
        #just return the index
        return lst.index(place)
    else:
        return lstIndex(lst[1:],item) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T03:53:21.180

If recursion isn't necessary, you can use this:

```
def find_last(lst,item):
    try:
       return len(lst) - next(i for i,elem in enumerate(reversed(lst),1) if elem == item)
    except StopIteration:
       return -1

a = [1,2,3,4,5,4,3]
idx = find_last(a,4)
print a[idx]
print find_last(a,6) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T04:03:25.277

Short iterative solution:

```
try:
    return (len(lst)-1) - lst[::-1].index(item)
except ValueError:
    return -1 
```

But, since you are explicitly looking for a recursive solution, I'll show you how it can be done recursively. However, it will *not* be efficient; if you want a nice, efficient, Pythonic solution you should use an iterative solution like the others have shown (or the one above).

There's actually a few ways you can do this. You can use a *helper function*, which takes an extra argument specifying the last index at which the value was found:

```
def list_rfind(lst, item):
    def list_rfind_helper(i, item, last=-1):
        if i >= len(lst): return last
        if lst[i] == item: last = i
        return list_rfind_helper(i+1, item, last)

    return list_rfind_helper(0, item) 
```

You can do it without a helper function:

```
def list_rfind(lst, item):
    if not lst:
        return -1

    res = list_rfind(lst[1:], item)
    if res >= 0:
        return res+1
    elif lst[0] == item:
        return 0
    else:
        return -1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T03:54:44.993

```
lst = [1, 2, 3, 4, 3, 4]

findLast(lst, 4)

def findLast(lst, item):
    for i, val in enumerate(reversed(lst)):
        if val == item:
            return len(lst) - (i + 1)  # Return index of matched item

    return -1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T04:26:52.677

Just for completeness:

```
def list_rfind(lst, item):
    return (len(lst)-1) - sum(1 for _ in iter(reversed(lst).next, item)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T04:31:08.477

I'm not quite 100% sure I know what you want. Your statement that "... in a list of [1,2,3,4,5,2] the last it should return 4 ..." has me a bit confused; I think you want to return the index of the last appearance of your specified `item`. So, for 4 to be the result in the list specified, `item` must be 5.

As noted elsewhere, a recursive function would not be the most efficient or Pythonic solution here. I'd prefer a solution like the first one in [nneonneo's answer](https://stackoverflow.com/a/12985164/197011).

However, if it must be recursive, I believe the code below gets what you want. Instead of stepping through the list from the front (by using `[1:]`), you need to step backwards by using `[:-1]` as the index range when passing the list in the recursive call:

```
def lstIndex(lst, item):
    if len(lst) == 0:
        return -1
    elif lst[-1] == item:
        return len(lst) - 1
    else:
        return lstIndex(lst[0:-1], item) 
```

I tested with the following:

```
the_list = [1,2,3,4,5,2]
print lstIndex(the_list, 2)
print lstIndex(the_list, 1)
print lstIndex(the_list, 3)
print lstIndex(the_list, 4)
print lstIndex(the_list, 5)
print lstIndex(the_list, 6)
print lstIndex(the_list, 0) 
```

With the following output:

> 5
> 0
> 2
> 3
> 4
> -1
> -1

# asp.net - Asp.net 配置文件未保存或显示输入的数据（代码已更新）10/28/12

> ID：12985098
> 
> 赞同：0
> 
> 时间：2012-10-20T03:48:10.843
> 
> 标签：asp.net, sql, profile, profile-provider

Asp.net 配置文件不显示或不保存用户输入的数据，但是没有错误。这是下面代码的视图：webproject 刚刚运行，名字和姓氏标签上都没有显示任何内容。

这是一个 WEB 项目 ,,, 我使用 OPEN WEBSITE 打开了这个项目！
但是该项目在 VISUAL STUDIOS 的程序标题栏中显示为“WEBPROJECT.sln(3)”。

这是用户创建帐户并保存用户配置文件设置的时间：***新和更新***

```
protected void CreateUserWizard_CreatedUser(object sender, EventArgs e)
{
    // Create an empty Profile for the newly created user
    ProfileCommon p = (ProfileCommon)ProfileCommon.Create(RegisterUser.UserName, true);

    // Save profile - must be done since we explicitly created it

    TextBox txtNewFirstName = (TextBox)RegisterUser.FindControl("txtNewFirstName");
    Profile.FirstName = txtNewFirstName.Text;

    TextBox txtNewLastName = (TextBox)RegisterUser.FindControl("txtNewLastName");
    Profile.LastName = txtNewLastName.Text;

    p.Save();
} 
```

这就是它的显示时间：***NEW AND UPDATED***

```
<script runat="server">
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
            ProfileCommon p = this.Profile.GetProfile(this.User.Identity.Name);

            Label firstName = (Label)LoginView1.FindControl("firstName");
           Profile.FirstName = firstName.Text;

            Label lastName = (Label)LoginView1.FindControl("lastName");
           Profile.LastName = lastName.Text;

    } 
} 
```

这是网络配置：***新的和更新的***

```
 <profile defaultProvider="AspNetSqlProfileProvider" enabled="true">
  <properties>
    <add name="FirstName" type="String" serializeAs="String"/>
    <add name="LastName" type="String" serializeAs="String"/>
    <add name="Gender" type="String" serializeAs="String"/>
    <add name="BirthDate" type="DateTime" serializeAs="String"/>
    <add name="Occupation" type="String" serializeAs="String"/>
    <add name="Website" type="String" serializeAs="String"/>
    <group name="Forum">
      <add name="Posts" type="Int32" defaultValue="0"/>
      <add name="AvatarUrl" type="String" serializeAs="String"/>
      <add name="Signature" type="String" serializeAs="String"/>
    </group>
    <group name="Address">
      <add name="Street" type="String" serializeAs="String"/>
      <add name="PostalCode" type="String" serializeAs="String"/>
      <add name="City" type="String" serializeAs="String"/>
      <add name="State" type="String" serializeAs="String"/>
      <add name="Country" type="String" serializeAs="String"/>
    </group>
    <group name="Contacts">
      <add name="Phone" type="String" serializeAs="String"/>
      <add name="Fax" type="String" serializeAs="String"/>
    </group>
  </properties>

  <providers>
 <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
  </providers>
</profile> 
```

这是我的 sql 服务器上的 aspnet_Profile 上显示的内容：
**[PropertyNames]**
[LastName:S:0:0:FirstName:S:0:0:]

这是对之前代码的重做，所以请忽略下面之前的评论！

我也尝试过**PreRender 方法**：

```
<script runat="server">
protected void Page_PreRender(object sender, EventArgs e)
{
            ProfileCommon p = this.Profile.GetProfile(this.User.Identity.Name);

            Label firstName = (Label)LoginView1.FindControl("firstName");
           Profile.FirstName = firstName.Text;

            Label lastName = (Label)LoginView1.FindControl("lastName");
           Profile.LastName = lastName.Text;

} 
```

但我得到一个错误： **对象引用未设置为对象的实例。**对于*Profile.FirstName = firstName.Text；*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:35:07.027

通过从 Web.Config 中删除除名字和姓氏属性之外的所有属性来简化它。尝试缩小范围。

以下对我有用。尽管为了方便起见我将anonymousIdentification 设置为true，但我已经为您提供了工作成员Web.Config 条目的完整语法：

```
<configuration>
  <connectionStrings>
    <remove name="LocalSqlServer"/>
    <add name="LocalSqlServer" 
        connectionString="Initial Catalog=Test;Data Source=MYPCNAME;Integrated Security=SSPI;" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <system.web>
    <anonymousIdentification enabled="true"/>
    <profile>
      <properties>
        <add name="FirstName" type="System.String" allowAnonymous="true"/>
        <add name="LastName" type="System.String" allowAnonymous="true"/>
      </properties>
    </profile>
    <roleManager enabled="true"/>
    <authentication mode="Forms">
      <forms timeout="50000000"/>
    </authentication>
    <membership defaultProvider="SqlProvider">
      <providers>
        <clear/>
        <add name="SqlProvider" 
            type="System.Web.Security.SqlMembershipProvider"
            connectionStringName="LocalSqlServer" 
            enablePasswordReset="true" 
            requiresQuestionAndAnswer="false" 
            requiresUniqueEmail="false" 
            maxInvalidPasswordAttempts="5" 
            passwordAttemptWindow="10" 
            passwordFormat="Hashed" 
            minRequiredPasswordLength="7" 
            minRequiredNonAlphanumericCharacters="0" 
            passwordStrengthReqularExpression="0" 
            enablePasswordRetrieval="false" 
            applicationName="/"/>
      </providers>
    </membership>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
</configuration>

    protected void Button1_Click(object sender, EventArgs e)
    {
        ProfileCommon p = (ProfileCommon)ProfileCommon.Create(fnTxt.Text 
            + lnTxt.Text, true);
        Profile.FirstName = fnTxt.Text;
        Profile.LastName = lnTxt.Text;

        p.Save();
    }

    protected void Page_PreRender(object sender, EventArgs e)
    {
        resultLabel.Text = Profile.FirstName + " " + Profile.LastName;
    } 
```

# mongodb - 不干净地退出了 MongoDB，现在不确定如何让它再次运行

> ID：12985100
> 
> 赞同：2
> 
> 时间：2012-10-20T03:48:16.377
> 
> 标签：mongodb

我填充 MongoDB 集合的速度比我意识到的要快，并且基本上用完了磁盘空间，但我认为我不干净地退出了它。我尝试使用 Homebrew 重新安装 MongoDB，但我遇到了以下一堆错误，并且不知道如何解决问题。

```
Fri Oct 19 20:40:20 [initandlisten] MongoDB starting : pid=12791 port=27017 

dbpath=/usr/local/var/mongodb 64-bit host=Evan-Zamirs-MacBook-Air.local
Fri Oct 19 20:40:20 [initandlisten] 
Fri Oct 19 20:40:20 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Fri Oct 19 20:40:20 [initandlisten] db version v2.2.0, pdfile version 4.5
Fri Oct 19 20:40:20 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Fri Oct 19 20:40:20 [initandlisten] build info: Darwin bs-osx-106-x86-64-1.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_49
Fri Oct 19 20:40:20 [initandlisten] options: { bind_ip: "127.0.0.1", config: "/usr/local/etc/mongod.conf", dbpath: "/usr/local/var/mongodb" }
Fri Oct 19 20:40:20 [initandlisten] journal dir=/usr/local/var/mongodb/journal
Fri Oct 19 20:40:20 [initandlisten] recover : no journal files present, no recovery needed
Fri Oct 19 20:40:20 [initandlisten]  test.system.namespaces Assertion failure isOk() src/mongo/db/pdfile.h 360
0x10037637b 0x1000b0196 0x10029eb1b 0x1002a3838 0x10013056b 0x10056c80b 0x1005708f7 0x100570d75 0x1000828cb 0x100084f13 0x1006464c9 0x1006494d6 0x10064aec9 0x100175487 0x1001ac2df 0x10063efbf 0x100004ca6 0x100005815 0x10000608d 0x10000d534 
 0   mongod                              0x000000010037637b _ZN5mongo15printStackTraceERSo + 43
 1   mongod                              0x00000001000b0196 _ZN5mongo12verifyFailedEPKcS1_j + 310
 2   mongod                              0x000000010029eb1b _ZN5mongo11DataFileMgr7findAllEPKcRKNS_7DiskLocE + 1659
 3   mongod                              0x00000001002a3838 _ZN5mongo13findTableScanEPKcRKNS_7BSONObjERKNS_7DiskLocE + 312
 4   mongod                              0x000000010013056b _ZNK5mongo9QueryPlan9newCursorERKNS_7DiskLocE + 603
 5   mongod                              0x000000010056c80b _ZN5mongo15CursorGenerator16singlePlanCursorEv + 443
 6   mongod                              0x00000001005708f7 _ZN5mongo15CursorGenerator8generateEv + 199
 7   mongod                              0x0000000100570d75 _ZN5mongo25NamespaceDetailsTransient9getCursorEPKcRKNS_7BSONObjES5_RKNS_24QueryPlanSelectionPolicyEPbRKN5boost10shared_ptrIKNS_11ParsedQueryEEEbPNS_16QueryPlanSummaryE + 69
 8   mongod                              0x00000001000828cb _ZN5mongo23queryWithQueryOptimizerEiRKSsRKNS_7BSONObjERNS_5CurOpES4_S4_RKN5boost10shared_ptrINS_11ParsedQueryEEES4_RKNS_17ShardChunkVersionERNS7_10scoped_ptrINS_25PageFaultRetryableSectionEEERNSG_INS_19NoPageFaultsAllowedEEERNS_7MessageE + 363
 9   mongod                              0x0000000100084f13 _ZN5mongo8runQueryERNS_7MessageERNS_12QueryMessageERNS_5CurOpES1_ + 3187
 10  mongod                              0x00000001006464c9 _ZN5mongoL13receivedQueryERNS_6ClientERNS_10DbResponseERNS_7MessageE + 393
 11  mongod                              0x00000001006494d6 _ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_11HostAndPortE + 950
 12  mongod                              0x000000010064aec9 _ZN5mongo14DBDirectClient4callERNS_7MessageES2_bPSs + 121
 13  mongod                              0x0000000100175487 _ZN5mongo14DBClientCursor4initEv + 167
 14  mongod                              0x00000001001ac2df _ZN5mongo12DBClientBase5queryERKSsNS_5QueryEiiPKNS_7BSONObjEii + 191
 15  mongod                              0x000000010063efbf _ZN5mongo14DBDirectClient5queryERKSsNS_5QueryEiiPKNS_7BSONObjEii + 79
 16  mongod                              0x0000000100004ca6 _ZN5mongo19clearTmpCollectionsEv + 710
 17  mongod                              0x0000000100005815 _ZN5mongo14_initAndListenEi + 1093
 18  mongod                              0x000000010000608d _ZN5mongo13initAndListenEi + 29
 19  mongod                              0x000000010000d534 _ZL11mongoDbMainiPPc + 29348
Fri Oct 19 20:40:20 [initandlisten] assertion 0 assertion src/mongo/db/pdfile.h:360 ns:test.system.namespaces query:{ options.temp: { $in: [ true, 1 ] } }
Fri Oct 19 20:40:20 [initandlisten] problem detected during query over test.system.namespaces : { $err: "assertion src/mongo/db/pdfile.h:360" }
Fri Oct 19 20:40:20 [initandlisten]  tutorial.system.namespaces Assertion failure isOk() src/mongo/db/pdfile.h 360
0x10037637b 0x1000b0196 0x10029eb1b 0x1002a3838 0x10013056b 0x10056c80b 0x1005708f7 0x100570d75 0x1000828cb 0x100084f13 0x1006464c9 0x1006494d6 0x10064aec9 0x100175487 0x1001ac2df 0x10063efbf 0x100004ca6 0x100005815 0x10000608d 0x10000d534 
0x10037637b 0x1000b0196 0x10029eb1b 0x1002a3838 0x10013056b 0x10056c80b 0x1005708f7 

0x100570d75 0x1000828cb 0x100084f13 0x1006464c9 0x1006494d6 0x10064aec9 0x100175487 0x1001ac2df 0x10063efbf 0x100004ca6 0x100005815 0x10000608d 0x10000d534 
 0   mongod                              0x000000010037637b _ZN5mongo15printStackTraceERSo + 43
 1   mongod                              0x00000001000b0196 _ZN5mongo12verifyFailedEPKcS1_j + 310
 2   mongod                              0x000000010029eb1b _ZN5mongo11DataFileMgr7findAllEPKcRKNS_7DiskLocE + 1659
 3   mongod                              0x00000001002a3838 _ZN5mongo13findTableScanEPKcRKNS_7BSONObjERKNS_7DiskLocE + 312
 4   mongod                              0x000000010013056b _ZNK5mongo9QueryPlan9newCursorERKNS_7DiskLocE + 603
 5   mongod                              0x000000010056c80b _ZN5mongo15CursorGenerator16singlePlanCursorEv + 443
 6   mongod                              0x00000001005708f7 _ZN5mongo15CursorGenerator8generateEv + 199
 7   mongod                              0x0000000100570d75 _ZN5mongo25NamespaceDetailsTransient9getCursorEPKcRKNS_7BSONObjES5_RKNS_24QueryPlanSelectionPolicyEPbRKN5boost10shared_ptrIKNS_11ParsedQueryEEEbPNS_16QueryPlanSummaryE + 69
 8   mongod                              0x00000001000828cb _ZN5mongo23queryWithQueryOptimizerEiRKSsRKNS_7BSONObjERNS_5CurOpES4_S4_RKN5boost10shared_ptrINS_11ParsedQueryEEES4_RKNS_17ShardChunkVersionERNS7_10scoped_ptrINS_25PageFaultRetryableSectionEEERNSG_INS_19NoPageFaultsAllowedEEERNS_7MessageE + 363
 9   mongod                              0x0000000100084f13 _ZN5mongo8runQueryERNS_7MessageERNS_12QueryMessageERNS_5CurOpES1_ + 3187
 10  mongod                              0x00000001006464c9 _ZN5mongoL13receivedQueryERNS_6ClientERNS_10DbResponseERNS_7MessageE + 393
 11  mongod                              0x00000001006494d6 _ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_11HostAndPortE + 950
 12  mongod                              0x000000010064aec9 _ZN5mongo14DBDirectClient4callERNS_7MessageES2_bPSs + 121
 13  mongod                              0x0000000100175487 _ZN5mongo14DBClientCursor4initEv + 167
 14  mongod                              0x00000001001ac2df _ZN5mongo12DBClientBase5queryERKSsNS_5QueryEiiPKNS_7BSONObjEii + 191
 15  mongod                              0x000000010063efbf _ZN5mongo14DBDirectClient5queryERKSsNS_5QueryEiiPKNS_7BSONObjEii + 79
 16  mongod                              0x0000000100004ca6 _ZN5mongo19clearTmpCollectionsEv + 710
 17  mongod                              0x0000000100005815 _ZN5mongo14_initAndListenEi + 1093
 18  mongod                              0x000000010000608d _ZN5mongo13initAndListenEi + 29
 19  mongod                              0x000000010000d534 _ZL11mongoDbMainiPPc + 29348
Fri Oct 19 20:40:20 [initandlisten] assertion 0 assertion src/mongo/db/pdfile.h:360 ns:tutorial.system.namespaces query:{ options.temp: { $in: [ true, 1 ] } }
Fri Oct 19 20:40:20 [initandlisten] problem detected during query over tutorial.system.namespaces : { $err: "assertion src/mongo/db/pdfile.h:360" }
Fri Oct 19 20:40:20 [initandlisten] Dropping old temporary collection: 
Fri Oct 19 20:40:20 [initandlisten] exception in initAndListen: 10011 no collection name, terminating
Fri Oct 19 20:40:20 dbexit: 
Fri Oct 19 20:40:20 [initandlisten] shutdown: going to close listening sockets...
Fri Oct 19 20:40:20 [initandlisten] shutdown: going to flush diaglog...
Fri Oct 19 20:40:20 [initandlisten] shutdown: going to close sockets...
Fri Oct 19 20:40:20 [initandlisten] shutdown: waiting for fs preallocator...
Fri Oct 19 20:40:20 [initandlisten] shutdown: lock for final commit...
Fri Oct 19 20:40:20 [initandlisten] shutdown: final commit...
Fri Oct 19 20:40:20 [initandlisten] shutdown: closing all files...
Fri Oct 19 20:40:20 [initandlisten] closeAllFiles() finished
Fri Oct 19 20:40:20 [initandlisten] journalCleanup...
Fri Oct 19 20:40:20 [initandlisten] removeJournalFiles
Fri Oct 19 20:40:20 [initandlisten] shutdown: removing fs lock...
Fri Oct 19 20:40:20 dbexit: really exiting now 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T14:47:07.020

您不需要重新安装 mongoDB。您可以按照 Stennie 给出的步骤进行修复

**或者**

您可以删除 data/db 或您的数据目录所在的任何位置，然后再次创建具有相同名称 data/db 的新文件夹。之后转到数据文件夹所在的目录并使用 mongod 命令启动 mongo 服务器。

但是您会丢失数据，但这是一种快速重启的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T11:56:30.720

看起来您有一些数据库损坏，需要[`repair`](http://www.mongodb.org/display/DOCS/Durability+and+Repair)在您的数据库上运行。修复过程实质上是重建数据库并跳过可疑数据。它将暂时需要足够的空间来存储数据库的额外副本（或者至少是可以复制的“好”数据），因此如果磁盘空间仍然不足，这可能不是一个选择。

您可以使用以下方法修复所有数据库：

```
`mongod --repair` 
```

如果您安装了另一个具有更多空间的驱动器，则可以传递一个`--repairpath`参数，以便修复对修复期间创建的临时文件使用不同的路径。

如果`mongod`在启动时没有崩溃，您还可以选择`mongo`使用 db 并调用以下命令从 shell 中对单个数据库运行修复：

> db.repairDatabase()

像您一样重新安装 MongoDB 不会修复数据文件中的任何问题。如果您不关心数据（例如，上面引用的日志摘录`test`和`tutorial`）..您也可以删除数据目录并重新开始。看起来您的数据目录将是：`/usr/local/var/mongodb`.

# java - 从 Java 中的电子邮件中提取服务器名称

> ID：12985103
> 
> 赞同：2
> 
> 时间：2012-10-20T03:48:48.670
> 
> 标签：java, regex, string, substring

我想使用 Substring 从字符串中提取服务器名称。我不确定我是否应该迭代一个循环或 with `StringTokenizer`, `indexof`,`lastindex`或其他任何东西。

基本要求是，我应该使用`substring()`

例如：

```
 id@yahoo.com  ,  my@gmail.com etc 
```

这在段落中，应该像这样打印服务器名称：

```
Server names: yahoo,   gmail ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T03:52:54.387

假设这是一个家庭作业，这里有几点可以帮助你：

*   您要查找的子字符串在`@`符号后一个字符开始
*   服务器名称以`.`字符串中的第一个点结尾
*   您使用（您猜对了！）`substring(from,to)`方法获取子字符串
*   中的第一个索引`substring`是包容性的；第二个索引不包括在内
*   您通过 using 方法找到字符的索引`indexOf('x')`，替换`x`您搜索的字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T03:51:24.743

```
String emails = "id@yahoo.com  ,  my@gmail.com ,  luigi@microsoft.com";
emails = emails.trim();  // get rid of spaces.
String[] parts = emails.split(",");  // emails array.

for (String email : parts) 
{
    String temp = email.substring(email.indexOf("@") + 1); // e.g. @google.com
    String serverName = temp.substring(0, temp.indexOf("."));  // e.g. google
    System.out.println(serverName);  //prints google
} 
```

**样本运行（对于单个输入）：**

**输入：** mario@google.com **输出**：google

**输入：** alvaro.arbeloa@realmadrid.com **输出**： realmadrid

**输入：** luigi@forest.yahoo.com **输出**：森林

**编辑：**如果您的电子邮件没有用逗号或任何其他分隔符分隔，那么您可以使用以下代码提取单个电子邮件地址：

```
String emails = "id@yahoo.com    my@gmail.com";
String[] parts = emails.split("\\s+"); 
```

表示我`trim()`这次没有使用。拆分后，您可以再次使用上述相同的 for 循环。

# mysql - cakephp 包含条件日期过滤器或限制记录

> ID：12985113
> 
> 赞同：0
> 
> 时间：2012-10-20T03:51:37.117
> 
> 标签：mysql, cakephp, contain

在我的发现中，我使用包含条件来获取当前计划，如图所示：

```
 $this->request->data = $this->Employee->find('first', array(
        'conditions' => array('Employee.emp_appserial' => $id),
        'contain' => array(
            'Schedule' => array(
                'conditions' => array('ho_valid <=' => date('Y-m-d'), 'ho_status' => 1)
            )
        )
    )); 
```

它工作正常，但是当满足多个记录的条件时，我只需要更接近现在的记录。

我知道更多的是一个 sql 问题，但我需要过滤器来适应包含条件格式。

你能帮我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:08:46.230

因此，您需要在日期添加订单并应用限制，以便您可以获得最新的第一条记录

```
 $this->request->data = $this->Employee->find('first', array(
        'conditions' => array('Employee.emp_appserial' => $id),
        'contain' => array(
            'Schedule' => array(
                'conditions' => array('ho_valid <=' => date('Y-m-d'), 'ho_status' => 1),
                'order' => 'ho_valid'
                'limit' => 1
            )
        )
    )); 
```

# android - Alljoyn android sdk 强制崩溃

> ID：12985119
> 
> 赞同：1
> 
> 时间：2012-10-20T03:53:19.737
> 
> 标签：android, p2p

我是 alljoyn 的新手，我刚刚看了 alljoyn 介绍网络研讨会视频。我已经安装了 alljoyn sdk 并导入了聊天示例。我将捆绑 jar 和守护程序文件添加到 libs 文件夹中。我还将服务添加到清单文件中，并将一行代码添加到 AlljoynService 类中。由于 Api 级别，我最初由于 startForeground 而出现编译错误。然后我在 onCreate 方法上方添加了@TargetApi(5) 来解决这个问题。当我尝试在手机上运行该应用程序时，它崩溃了。我也尝试创建一个新项目并删除其中的所有文件并用聊天示例中的文件替换它们，但我仍然有同样的错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T00:11:55.723

我有同样的问题，并在网站上找到了这个

> 为了解决这个问题，当我导入项目时，我点击了“将项目复制到工作区”按钮；然后我点击项目设置并调整“订单和导出”设置：我注意到 alljoyn.jar 和 Android2.2 框没有选中；所以我检查了他们。我还将 alljoyn.jar 移到了导出订单的顶部（尽管不确定是否重要）。

我所做的是，右键单击项目，然后单击属性，然后单击“Java 构建和路径”，然后检查 Android 私有库；而已。

# c++ - Ubuntu：Unity Nux 开发

> ID：12985122
> 
> 赞同：0
> 
> 时间：2012-10-20T03:54:18.640
> 
> 标签：c++, user-interface, opengl, ubuntu, ubuntu-unity

我正在尝试使用 Unity 使用的 Nux 库。这是我找到的一些代码[示例的链接。](http://inalogic.com/nux-sample-programs/)

据我了解，Nux 创建 UI 所需的只是一个 OpenGL 上下文，这很棒，因为它允许程序在许多设备上运行。我正在尝试使用没有 Unity 的 Nux 库来构建我自己的应用程序。我正在使用 Ubuntu 12.10。

有谁知道我将如何构建自己的应用程序？除了链接中提供的文档和教程之外，还有其他文档和教程吗？

# java - 完成对链表的排序后，我不确定如何跳出循环

> ID：12985132
> 
> 赞同：2
> 
> 时间：2012-10-20T03:55:42.863
> 
> 标签：java, sorting, loops, linked-list

所以我想做的是对链表进行排序。我被困在似乎永远不会逃脱的循环中。从示例中我发现我所要做的就是检查下一个值是否为空，那么我做错了什么？

另外，由于我不知道为什么这不会跳出循环，所以这段代码似乎应该正确地进行链表排序吗？

```
 public void sortFirst() { 
        do
        {
            if (first.iData >= first.next.iData)
            {
                int iTempData = first.iData;
                double dTempData = first.dData;

                first.iData = first.next.iData;
                first.dData = first.next.dData;

                Link newLink = new Link(iTempData, dTempData);
                newLink.next = first;
                first = newLink;
            }
        }
        while (first.next != null);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:58:46.700

好吧，马上，你在最后 3 行中有一个逻辑问题：

```
 Link newLink = new Link(iTempData, dTempData);
            newLink.next = first;
            first = newLink; 
```

在这里，您首先设置 newLink.next =。因此它不为空。接下来设置 first = newLink。所以你可以很快看到 first.next 永远不会为空。

从我在您的循环中可以看出，您实际上并没有在列表中移动节点，而只是在节点中移动数据。在这种情况下，您只需要移动数据：

```
 int iTempData = first.iData;
            double dTempData = first.dData;

            first.iData = first.next.iData;
            first.dData = first.next.dData;

            first.next.iData = iTempData;
            first.next.dData = dTempData; 
```

（并删除创建新节点的最后 3 行并将其错误地插入列表中）。当然，这有点难看。链表最酷的地方在于您可以简单地在列表中移动节点，因此您可以执行以下操作：

```
 current = head;
    prev = null;
    while( current != null && current.next != null ){
        next = current.next;

        if( current.iData > next.iData ) {
            // need to swap nodes
        if( prev == null ) {
            // special head case
            head = next;
            current.next = head.next;
            head.next = current;
            }
        else
        {
            prev.next = next;
            current.next = next.next;
            next.next = current;
        }
    }

    // increment pointer
    prev = current;
    current = current.next;
} 
```

# javascript - 将 div 的大小调整为小于其声明的大小？

> ID：12985133
> 
> 赞同：13
> 
> 时间：2012-10-20T03:55:44.807
> 
> 标签：javascript, html, css, resize

有没有办法将 div 的大小调整为小于声明的高度和宽度？

我正在制作一个应用程序，用户可以在其中调整 div 的大小并保存它。但是，当我稍后加载它并将其设置为用户上次设置的大小时，他们可以使 div 更大，但不能更小。

这是一个示例 div：

```
.cls {
  border: solid 1px;
  width: 100px;
  height: 100px;
  resize: both;
  overflow: auto;   
}​ 
```

[http://jsfiddle.net/FNXnD/](http://jsfiddle.net/FNXnD/)

[这个问题](https://stackoverflow.com/questions/7197136/using-css-to-resize-a-div-to-a-dimension-smaller-than-its-current-width-and-he)有同样的问题，但使用了 GWT，似乎没有一个好的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T04:09:11.510

如果您想使用 CSS3 UI 调整大小功能，那么您的浏览器会决定您是否可以使其小于或大于声明的宽度或高度。[http://www.w3.org/TR/css3-ui/#resize](http://www.w3.org/TR/css3-ui/#resize)

> 用户代理可以将调整大小范围限制在合适的范围内，例如在元素的原始格式化大小之间，并且大到足以包含所有元素的内容。

例如，在 Firefox 中，您可以将其调整为小于声明的宽度或高度。虽然在 chrome 中你不能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-22T19:01:40.697

只想对 Pfft 在接受的答案中所说的内容进行轻微修改。

如果您使用 :active 伪类而不是 :hover ，则当您将鼠标悬停在元素上时它不会闪烁。那个闪烁真的很烦人。

```
div:active {
  width: 0;
  height: 0;
} 
```

通过使用 :active 发生的情况是，当单击元素时，它将被调整为 height: 0, width: 0 所以会显示一个 1px 边框的小点，但是一旦用户开始调整大小，你就会得到你想要的想要调整大小。并且在随后的每次调整大小时都不会出现故障，而且效果很好。

我发现这比使用悬停要少得多。感谢 Pfft 的上述回复，这正是我正在寻找的，并让我找到了自己稍微改变的解决方案！

这是它的一个jsfiddle：http: [//jsfiddle.net/kronenbear/v4Lq5o09/1/](http://jsfiddle.net/kronenbear/v4Lq5o09/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T06:41:33.447

您请求解决问题的方法，或者至少想知道如何做。我为您做了一个简单的解决方法，可能需要一些工作；请注意，这是一种解决方法，因此可能包含故障。

```
.cls {
    width: 100px;
    height: 100px;
    resize: both;
    overflow: auto;
    border: 1px dotted #000;
}

.cls:hover {
    width: 1px;
    height: 1px;
} 
```

​ 更新小提琴：http: [//jsfiddle.net/FNXnD/1/](http://jsfiddle.net/FNXnD/1/)

*   **注意**Chrome 和 Safari 可能会在未来版本中更改 CSS3 调整大小功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T18:48:44.923

或者你可以使用 jQuery-UI 来制作一个可调整大小的窗口。

我继续解决了我在尝试使用带有滚动溢出的 div 的 jQuery ui 可调整大小小部件时遇到的一些问题。问题是调整大小手柄位于滚动条内。

为了解决这个问题，我制作了三个相互嵌套的 div

第一个是 Wrapper，您可以在其中设置 div 的起始大小。

第二个用于句柄，其大小应设置为其父 div（包装器 div）的 100%。您将不得不调整 z-index 以将它们定位到最终的滚动条上。

第二个 div 还应该包含可拖动的句柄 div 和所有窗口内容所在的窗口 div。

可拖动手柄 div (.draggable) 和窗口 div (.window) 都需要相对定位。以便它们彼此正确定位，因此可拖动手柄不会超过滚动条的顶部。

.window div 应该像之前的 div 一样缩放到父 div 的 100%。这个会有滚动溢出。现在，因为当您使用 jQuery ui 调整句柄 div 的大小时，这等于 100% 的句柄 div，所以它也会调整此 div 的大小。

将可拖动的 div 设置为 100% 的宽度和任何您想要的高度，但任何添加的高度都会将窗口 div 推到比句柄 div 更远的位置，您需要向句柄 div 添加等量的 padding-bottom 以解决这个问题。您还需要将句柄 div 溢出设置为可见。

毕竟，为不同的元素添加任何你想要的样式，你应该会很好。这很难解释，但我希望它是有道理的。所有的代码都在下面，希望它能比我的漫无目的更好地解释。这绝对可以让您将窗口调整得更小，移动 div，并且如果您想要它，您的 div 也会滚动溢出。

HTML

```
<!DOCtype html>
<html lang="en">
<head>
    <title>Adjustable Window</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../css/adjWindow.css">
    <link rel="stylesheet" type="text/css" href="../jquery-ui-1.11.4/jquery-ui.min.css">
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../jquery-ui-1.11.4/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../js/adjWin.js"></script>
</head>
<body id="top">
   <div class="winWrap">
        <div class="handles">
            <div class="draggable"><p>Window Title</p></div>
            <div class="window">
                <div class="windowContent">
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

CSS

```
.winWrap {
    position: relative;
    width: 500px;
    height: 500px;
}
.draggable {
    position: relative;
    width: 100%;
    height: 20px;
    box-shadow: inset 0px 0px 6px rgba(0,0,0,0.9);
    background-color: rgba(255,255,255,0.5);
    text-align: center;
    z-index: 1;
}
.draggable p {
    padding: 2px;
    margin: 0px;
    cursor: default;
}
.handles {
    position: relative;
    width: 100%;
    height: 100%;
    padding-bottom: 20px;
    overflow: visible;
    box-shadow: 20px 15px 20px rgba(0,0,0,0.4);
    z-index: 1;
}
.window {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: scroll;
    background-color: rgba(0,0,0,0.1);
    box-shadow: inset 0px 0px 10px rgba(0,0,0,0.7);
}
.windowContent{
    position: absolute;
} 
```

jQuery 和 jQuery-UI 最好将 minHeight 和 minWidth 选项与可调整大小的小部件一起使用，否则您的窗口将能够调整到几乎没有，并且可能会导致一些烦人的副作用，例如使 div 太小以至于您需要重新加载要单击调整大小手柄的页面。在我看来，它看起来也更专业。

对于可拖动小部件，您将包装器定位为要移动的整个 div，然后给它一个我们放置在窗口 div 中的可拖动 div 的句柄。

```
/*global $, jQuery, alert*/
$(document).ready(function () {
    'use strict';
    $('.handles').resizable({minHeight: 100, minWidth: 100});
    $('.winWrap').draggable({handle: '.draggable'});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T04:16:59.313

```
$('.cls').css('height', 200);
$(".cls").mouseup( function(){
var height = $(".cls").height();
var width = $(".cls").width();
if(height>=200){
$('.cls').css('height', 200);
}
if(width>=100){
$('.cls').css('width', 100);  
}
var
newdimensions="newheight="+height+"&"+"newwidth="+width;
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-20T04:03:05.750

在 javascript 中使用 jquery：

```
//get the current heigt and the width of the element
var h = $('.cls').height();
var w = $('.cls').width();
// i don'T know how you provide your nes size, but once you have in i a variable, you can just do
if(your_h > h) $('.cls').height(your_h);
if(your_w > w) $('.cls').width(your_w); 
```

假设你的尺寸是 PX。

如果未指定参数，Height() 和 width() 将返回以 px 为单位的大小。如果您提供值，它们将设置高度和宽度。如果您没有明确指定测量值，则默认使用 px。

在第二部分，它只是检查新大小（your_x）是否比原始大小大，如果是，它将调整它的大小，如果不是，它将忽略。

是的，jquery 将覆盖你的 css 规范；）任何人，更大或更小的值

# android - 在android地图中创建线程

> ID：12985135
> 
> 赞同：1
> 
> 时间：2012-10-20T03:55:51.150
> 
> 标签：android, multithreading, google-maps

我正在尝试实现一个 Android 应用程序，在主要活动中它显示的是谷歌地图，并且我也在尝试在相同的布局上实现一个视频视图。因此，在主地图活动（显示地图时）中，我试图实现一个线程，该线程将同时调用地图视图下方的视频视图活动（进行录制）。

这可能吗 ？因为我遇到了很多错误。请任何人都可以帮助我..？谢谢

公共类 MainActivity 扩展 MapActivity 实现 Runnable{

```
private MapView mapView;
private MyLocationOverlay myLocationOverlay;
private Button playerbtn;//button to start player
private Button recorderbtn;//button for recorder
private VideoView mVideoView;
private Uri mVideoUri;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mVideoView = (VideoView) findViewById(R.id.videoview);
    playerbtn= (Button)findViewById(R.id.playback);
    recorderbtn = (Button)findViewById(R.id.recording);

    // main.xml contains a MapView
    setContentView(R.layout.main); 

    // extract MapView from layout
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    // create an overlay that shows our current location
    myLocationOverlay = new FixedMyLocationOverlay(this, mapView);

    // add this overlay to the MapView and refresh it
    mapView.getOverlays().add(myLocationOverlay);
    mapView.postInvalidate();

    // call convenience method that zooms map on our location
    zoomToMyLocation();

}

//--videoview

public void recordingListner(View view) {

    Thread toRun = new Thread()
       {
              public void run()
              {

                 final Intent intent = new Intent(MainActivity.this, VideoRecorder.class);
                handleCameraVideo(intent);
                startActivity(intent);    

              }
       };
       toRun.start(); 
```

}

```
private void handleCameraVideo(Intent intent) {
    mVideoUri = intent.getData();
    mVideoView.setVideoURI(mVideoUri);
    mVideoView.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:01:57.393

将您`setContentView(R.layout.main);`移到右侧`super.onCreate(savedInstanceState);`。在调用 findViewById 之前，您必须调用 setContentView。

# php - Android Google 云消息传递 - 不确定创建推送通知时应该输入哪些参数

> ID：12985144
> 
> 赞同：1
> 
> 时间：2012-10-20T03:57:37.810
> 
> 标签：php, android, curl, google-cloud-messaging

我正在编写一个 php 脚本以将通知发送到 CGM 服务器，并且我正在使用以下示例：

public function send_notification($registatoin_ids, $message) { // 包含配置 include_once './config.php';

```
 // Set POST variables
    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(
        'registration_ids' => $registatoin_ids,
        'data' => $message,
    );

    $headers = array(
        'Authorization: key=' . GOOGLE_API_KEY,
        'Content-Type: application/json'
    );
    // Open connection
    $ch = curl_init();

    // Set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Disabling SSL Certificate support temporarly
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

    // Execute post
    $result = curl_exec($ch);
    if ($result === FALSE) {
        die('Curl failed: ' . curl_error($ch));
    }

    // Close connection
    curl_close($ch);
    echo $result;
} 
```

但我不确定变量的值应该是什么： CURLOPT_POSTFIELDS 、 CURLOPT_SSL_VERIFYPEER 、 CURLOPT_RETURNTRANSFER 、 CURLOPT_HOST 、 CURLOPT_URL

有人会碰巧知道这些值应该是什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:08:17.547

“ CURLOPT_POSTFIELDS ” 此字段是推送json编码格式的字段数所必需的。如果您的第三方服务器是基于 SSL 的 HTTPS，则“CURLOPT_SSL_VERIFYPEER”此字段是必需的。"CURLOPT_RETURNTRANSFER" 此字段为您提供来自 gcm 服务器的回复。"CURLOPT_HOST , CURLOPT_URL" 此字段用于您必须为第三方服务器定义的主机名称和 URL。

那是我已经实现的解码代码：

```
<?php
$apiKey = "Your Api Key"; 
$reg_id = array("Your registration ID that we have get from device");
$registrationIDs = $reg_id;

// Message to be sent
$message = $_REQUEST['message']; 

// Set POST variables
$url = 'https://android.googleapis.com/gcm/send';
$fields = array(
          'registration_ids' => $registrationIDs,
          'data' => array( "message" => $message ),
           );
$headers = array(
        'Authorization: key=' . $apiKey,
        'Content-Type: application/json'
         );

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );
curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
//curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
//curl_setopt($ch, CURLOPT_POST, true);
//curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode( $fields ));
// Execute post
$result = curl_exec($ch);
// Close connection
curl_close($ch);
echo $result;
?> 
```

根据我的经验，此链接将对您有所帮助：

[GCM 与 PHP（谷歌云消息）](https://stackoverflow.com/questions/11242743/gcm-with-php-google-cloud-messaging)

[http://www.sherif.mobi/2012/07/gcm-php-push-server.html](http://www.sherif.mobi/2012/07/gcm-php-push-server.html)

[https://groups.google.com/forum/#!topic/android-gcm/hjk5PUYlTp0](https://groups.google.com/forum/#!topic/android-gcm/hjk5PUYlTp0)

# actionscript - actionscript 3.0 加载的 swf 尺寸（宽度、高度）保持为 0

> ID：12985147
> 
> 赞同：2
> 
> 时间：2012-10-20T03:58:21.537
> 
> 标签：actionscript, width, flash, loader, dimension

我正在从外部站点加载外部 swf。在 swf 加载并添加到舞台后（我也等待添加到舞台事件），内容宽度/高度保持为 0。 contentLoaderInfo 包含正确的宽度和高度。通常，我无法设置宽度和高度。它们保持为 0。

```
 imageLoader = new Loader();
        imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadImageComplete);
        imageLoader.load(urlRequest, context);  

    private function onLoadImageComplete(event:Event):void
    {
        removeEventListeners();
        this.mouseChildren = true;
        addEventListener(Event.ADDED_TO_STAGE, addedToStageEventHandler);
        trace(imageLoader.content.height);
        trace(imageLoader.contentLoaderInfo.height)
    }

    private function addedToStageEventHandler(event:Event):void
    {
        removeEventListener(Event.ADDED_TO_STAGE, addedToStageEventHandler);
        trace(imageLoader.content.height);
        trace(imageLoader.contentLoaderInfo.height)
    } 
```

加载完成后输出为 0、199。添加到阶段后，跟踪有时为 0、199 有时为 199、199。如果尺寸为 0，则不会出现 swf。我能做些什么来保证尺寸。我对正在加载的 swf 的内容一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:47:35.963

等待`Event.INIT`而不是`Event.COMPLETE`在项目准备好使用时触发。

# iphone - IOS - UITextField [输入时在sqlite数据库中搜索]

> ID：12985151
> 
> 赞同：1
> 
> 时间：2012-10-20T03:59:47.483
> 
> 标签：iphone, ios, uitextfield

首先，我将在 NSArray 中获取数据库，因此这不是 sqlite 问题。

我的问题是关于检测单词，只是我需要在打字过程中自动完成来自 NSArray 的单词。

我发现了一些教程

```
[UITextFieldTextDidChangeNotification - addObserver .. etc] 
```

但没有描述清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:40:20.990

您必须在 .m 文件中实现`UITextfield`action 方法`Editing Changed`，然后根据您在其中的 typp 实现以下代码用于搜索和过滤数组。

```
 NSString *match = textField.text; 
 NSMutableArray *listFiles = [[NSMutableArray alloc] init];
 NSPredicate *sPredicate = [NSPredicate predicateWithFormat:@"SELF CONTAINS[cd] %@", match];
 listFiles = [NSArray arrayWithArray:[YOURARRAYNAME filteredArrayUsingPredicate:sPredicate]];
 NSLog(@"%@",listFiles);

 // following array gives you sorted array
    NSMutableArray *sortedArray = [[NSMutableArray alloc]initWithArray: [listFiles sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]];

    NSLog(@"%@",sortedArray); 
```

# javascript - 如何在 Titanium-Mobile 上使用 Javascript 和 JSON 显示图像

> ID：12985158
> 
> 赞同：0
> 
> 时间：2012-10-20T04:01:11.117
> 
> 标签：javascript, json, titanium-mobile

我必须在我的应用程序上显示图像，我想从 JSON 响应中获取图像并使用 Javascript 将其显示到应用程序。这是 JSON 响应的样子：

```
"images":{"full":{"url":"http:\/\/toemlondres.com\/wp-content\/uploads\/2012\/05\/953122.jpg","width":480,"height":720}, 
```

我目前的代码是：

```
 function load_db(win, section) {
    var data = [];
    db = Titanium.Database.open(config.DB_NAME);
    rows = db.execute("SELECT POST_ID, TITLE, DESCRIPTION, CONTENT, AUTHOR, IMAGE, URL, DATE, SECTION FROM POSTS WHERE SECTION = ? ORDER BY DATE DESC", section);

    var dataArray = [];
    i = 0;

    while (rows.isValidRow()) {

        var remote_image = get_first_image_src(rows.fieldByName('CONTENT'));

        if (remote_image == null) {
            remote_image = config.DEFAULT_IMAGE;
        }

        if (prettyDate(rows.fieldByName('DATE')) == null) {
            pretty_date = date("F j, Y", strtotime(rows.fieldByName('DATE')));
        }
        else {
            pretty_date = prettyDate(rows.fieldByName('DATE'));
        }

        dataArray.push({
            id: rows.fieldByName('POST_ID'),
            title: rows.fieldByName('TITLE'),
            description: rows.fieldByName('DESCRIPTION'),
            content: rows.fieldByName('CONTENT'),
            meta: pretty_date + ' | ' + rows.fieldByName('AUTHOR'),
            image: remote_image,
            url: rows.fieldByName('URL'),
            date: rows.fieldByName('DATE')
        });

        var p = new Object();

        p.id = rows.fieldByName('POST_ID');
        p.title = rows.fieldByName('TITLE');
        p.description = rows.fieldByName('DESCRIPTION');
        p.content = rows.fieldByName('CONTENT');
        p.meta = pretty_date + ' | ' + rows.fieldByName('AUTHOR'), p.image = remote_image, p.url = rows.fieldByName('URL');
        p.date = rows.fieldByName('DATE');
        p.author = {
            nickname: rows.fieldByName('AUTHOR')
        };

        blog_post[p.id] = p;

        rows.next();

        i++;
    };

    rows.close()
    db.close()

    if (section == 'recent_post') {
        Ti.App.fireEvent(
        winRecent.events.SET_BLOG_LIST_RECENT, {
            list_data: dataArray
        });
    }
    else {
        Ti.App.fireEvent(
        win.events.SET_BLOG_LIST, {
            list_data: dataArray
        });
    }
}

function load(win, data, section) {
    load_indicator_start(win);

    db = Titanium.Database.open(config.DB_NAME);
    db.execute("INSERT INTO FETCH_LOG (SECTION, UPDATED_AT) values (?, CURRENT_TIMESTAMP)", section);
    db.close();

    var xhr = Titanium.Network.createHTTPClient();
    xhr.onload = function() {
        var data = [];
        var json = JSON.parse(this.responseText);

        set_blog_post_data(win, json, section);
    };
    xhr.open("GET", data);
    xhr.send();
}

function set_blog_post_data(win, data, section) {
    var p = data.posts || data;
    var valid_title;
    var blog_post_temp = [];

    for (var i = 0; i < p.length; i++) {
        valid_title = p[i].title_plain;
        blog_post[p[i].id] = p[i];

        // save to db, check whenever post_id is exist
        db = Titanium.Database.open(config.DB_NAME);
        row = db.execute("SELECT COUNT(*) FROM POSTS WHERE POST_ID = ? AND SECTION = ?", p[i].id, section);
        count = row.field(0);

        if (count == 0) {
            var remote_image = get_first_image_src(p[i].content);

            if (remote_image == null) {
                remote_image = config.DEFAULT_IMAGE;
            }

            db.execute("INSERT INTO POSTS (POST_ID, TITLE, DESCRIPTION, CONTENT, AUTHOR, IMAGE, URL, DATE, SECTION) VALUES (?,?,?,?,?,?,?,?,?)", p[i].id, valid_title, p[i].excerpt, p[i].content, p[i].author.nickname, remote_image, p[i].url, p[i].date, section);
        }

        db.close();
    }

    load_indicator_stop(win);
    load_db(win, section);
}

function init_db() {
    var db = Titanium.Database.open(config.DB_NAME);
    db.execute('CREATE TABLE IF NOT EXISTS POSTS (POST_ID INTEGER, TITLE VARCHAR(255), DESCRIPTION TEXT, CONTENT TEXT, AUTHOR TEXT, IMAGE VARCHAR(255), URL VARCHAR(255), DATE VARCHAR(255), SECTION VARCHAR(255))');
    db.execute('CREATE TABLE IF NOT EXISTS FETCH_LOG (SECTION VARCHAR(255), UPDATED_AT VARCHAR(255))');
    db.execute('CREATE TABLE IF NOT EXISTS PAGES (PAGE_ID INTEGER, TITLE VARCHAR(255), CONTENT TEXT, AUTHOR TEXT, URL VARCHAR(255), DATE VARCHAR(255), SECTION VARCHAR(255))');
    db.execute('CREATE INDEX IF NOT EXISTS POSTID ON POSTS (POST_ID)');
    db.execute('CREATE INDEX IF NOT EXISTS POSTSECTION ON POSTS (SECTION)');
    db.execute('CREATE INDEX IF NOT EXISTS PAGEID ON PAGES (PAGE_ID)');
    db.execute('CREATE INDEX IF NOT EXISTS PAGESECTION ON POSTS (SECTION)');

    db.close();
}

function get_first_image_src(html) {
    String.prototype.reverse = function() {
        return this.split('').reverse().join('');
    };

    var input = html;
    var matches = input.reverse().match(/(gepj|gpj|fig|gnp)\..+?\/\/:ptth(?=\"\=crs)/g);

    if (Array.isArray(matches)) {
        for (i = 0; i < matches.length; i++) {
            matches[i] = matches[i].reverse();
        }

        return matches[0];
    }
    else {
        return null;
    }
} 
```

但现在我想改变的是，直接从 json 中获取图像。我怎样才能做到这一点？我是编码新手，现在我被困在这上面。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:08:46.817

由于我们正在发出远程请求，我们需要使用 xhr 并且 Titanium 不会等到您获取您的请求，因为它是异步的。所以使用回调：

```
var win = Ti.UI.createWindow();

win.open();

function callback(image) { 
    win.add(image);
}

function remoteRequest(callback) {  
    var json = false;      
    var url = your url;
    var xhr = Ti.Network.createHTTPClient();

    xhr.onload = function(e) {
        json = JSON.parse(this.responseText); 
        var imageView = Ti.UI.createImageView {
            image = json.image;
        }

        callback(imageView);
    };

    xhr.onerror = function(e) {
        alert("error");
        return false;
    };

    xhr.open('GET',url);
    xhr.setRequestHeader("contentType","application/json; charset=utf-8");
    xhr.send(); 
} 
```

# postgresql - 连接两个表，两列，同时将多行显示为单行

> ID：12985162
> 
> 赞同：2
> 
> 时间：2012-10-20T04:02:47.690
> 
> 标签：postgresql, postgresql-9.2

表设置如下：

```
fighters:

fighterid
firstname
lastname
etc
etc

matches:

matchid
fighteroneid (fighterid FK)
fightertwoid (fighterid FK)
etc
etc 
```

我想将 fighteroneid 和 fightertwoid 都加入到具有相同 matchid 的 fighterid 中（我很确定我已经弄清楚了这部分），但是我失败的地方是尝试将其显示在列表框中如下：

```
firstname lastname vs firstname lastname 
```

例如，我可以使用 COALESCE 将 fighteroneid 和 fightertwoid 显示为 1 对 2，但是如何在给定这些 ID 的情况下链接到每个战士的名字和姓氏？

提前致谢，

斯宾塞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:10:40.743

```
SELECT 
          f1.firstname
        , f1.lastname
        , f2.firstname
        , f2.lastname
    FROM matches AS m
        INNER JOIN fighters AS f1
            ON f1.fighterid = m.fighteroneid
        INNER JOIN fighters AS f2
            ON f2.fighterid = m.fightertwoid 
```

# javascript - 对来自不同域的 iframe 内容执行 JavaScript

> ID：12985166
> 
> 赞同：0
> 
> 时间：2012-10-20T04:05:36.800
> 
> 标签：javascript, security, browser-bugs

这被浏览器拒绝了吗？可能吗？

如果是这样，是允许它发生的浏览器错误吗？我注意到了这一点：

[http://html5sec.org](http://html5sec.org)

您如何关闭这些错误并防止它们在您的网站上运行？我可以检测是否有人试图从另一个域执行 javascript 吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:09:36.160

Javascript由浏览器执行，而不是服务器。如果用户愿意，他们可以在没有 iframe 的网站上执行 javascript。（`javascript:alert('hello');`在地址栏中输入）。

您无法阻止这一点，因为它是在客户端上执行的，而不是在您的站点本身上执行的。以一种方式设计您的网站，无论他们使用 javascript 做什么，它都不会影响您网站的完整性。使用服务器端身份验证和会话，**清理您的数据库输入**，并且不要在客户端执行任何基于安全性的操作。

# javascript - 在任何函数之前使用 return 有什么区别例如：“return Buy()”或“Buy()”

> ID：12985173
> 
> 赞同：4
> 
> 时间：2012-10-20T04:07:30.947
> 
> 标签：javascript

我注意到我的一位朋友正在使用它。

```
<a href="#" onclick="return Buy();">» <b class="font_bigger"><span id="buy_title">Buy</span> for <span class="points_in" id="buy_value">$1,691</span></b></a> 
```

如果我使用它，我感觉没有任何改变。

```
<a href="#" onclick="Buy();">» <b class="font_bigger"><span id="buy_title">Buy</span> for <span class="points_in" id="buy_value">$1,691</span></b></a> 
```

那么任何人都可以解释两者有什么区别吗？

只是想知道他为什么总是使用回报。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T04:11:34.553

在第一个示例中，处理程序将返回一个值`onclick`。这可以用来`return false`防止默认行为。

```
<a href="#" onclick="return Buy();">» <b class="font_bigger"><span id="buy_title">Buy</span> for <span class="points_in" id="buy_value">$1,691</span></b></a> 
```

在第二个示例中，事件处理程序将简单地运行，事件将传播并且默认行为将执行，而不管事件处理程序返回的任何值。

```
<a href="#" onclick="Buy();">» <b class="font_bigger"><span id="buy_title">Buy</span> for <span class="points_in" id="buy_value">$1,691</span></b></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:15:16.460

这里涉及两个动作。

1.  默认行为：执行`HREF`
2.  执行 onClick 事件

**The events are executed first by the browser.** This behavior is called **`Early event handling`**. If the event action returns `false`, it prevents the default action i.e. `HREF`.

# angularjs - AngularJS Json 重组

> ID：12985174
> 
> 赞同：0
> 
> 时间：2012-10-20T04:07:50.947
> 
> 标签：angularjs

我可以从 Angular 函数中的某些服务中获取 json，但是，有太多不必要的东西，所以我试图重组 Json 以仅包含我需要的数据。

```
$http({
            method: 'GET',
            url: 'from some service'}   

        }).success(function(data, status) {

           //this is Json data where I need to remove many things
           $scope.data = data;  

           //this is Json data I need
           $scope.processedJson = [];
      } 
```

假设 $scope.data 是

```
{
   "points":[
      {
         "address":"balh",
         "lat":123,
         "long":456
      },
      {
         "address":"balh",
         "lat":321,
         "long":543
      },
      {
         "address":"balh",
         "lat":432,
         "long":333
      }
   ]
} 
```

而 $scope.processedJson 最终我需要的是

```
[
   {
      "lat":123,
      "long":456
   },
   {
      "lat":321,
      "long":543
   },
   {
      "lat":432,
      "long":333
   }
] 
```

我如何需要运行一些循环来提取我需要的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:02:39.973

您可以使用[forEach](http://docs.angularjs.org/api/angular.forEach)

```
$scope.processedJson = [];
angular.forEach($scope.data.points, function (val) {
    $scope.processedJson.push({
        lat: val.lat,
        long: val.long
    });
}); 
```

# arrays - bash 引用数组扩展

> ID：12985178
> 
> 赞同：44
> 
> 时间：2012-10-20T04:08:45.190
> 
> 标签：arrays, bash, quotes

当我编写一个 bash 程序时，我通常会构造如下调用：

```
declare -a mycmd=( command.ext "arg1 with space" arg2 thing etc )

"${mycmd[@]}" || echo "Failed: foo" 
```

打印和退出`die foo`的 bash 函数在哪里。`Error foo`

但是如果我想清楚错误原因，我想打印失败的命令：

```
"${mycmd[@]}" || echo "Failed: foo: ${mycmd[*]}" 
```

所以用户可以运行 dead 命令并找出*原因*。但是，此过程中会丢失引用 - 包含空格或转义字符的 Failed 消息参数不会以可以剪切-n-粘贴和运行的方式打印。

有没有人建议用一种紧凑的方法来解决这个问题？

* * *

我认为问题在于 bash 处理命令参数解析的方式，以及（内置）echo 处理参数的方式。说明问题的另一种方式是：

如何在以下 bash 示例中*打印*带有空格的参数的引号（必须作为脚本运行，而不是在立即模式下）：

```
#!/bin/bash
mkdir qatest; cd qatest
declare -a myargs=(1 2 "3 4")
touch "${myargs[@]}"
ls
echo "${myargs[@]}" 
```

实际结果：

```
1  2  3 4
1 2 3 4 
```

期望的结果

```
1  2  3 4
1 2 "3 4" 
```

或者

```
1  2  3 4
"1" "2" "3 4" 
```

在几个额外的 bash 代码字符中。

* * *

## 问题已结束：@camh 回答得很精彩：

更新的脚本：

```
#!/bin/bash
mkdir qatest; cd qatest
declare -a myargs=(1 2 "3 4")
touch "${myargs[@]}"
ls
echo "${myargs[@]}"
echo $(printf "'%s' " "${myargs[@]}") 
```

输出：

```
1  2  3 4
1 2 3 4
'1' '2' '3 4' 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-20T04:48:59.367

您的问题与`echo`. 它获得了正确数量的参数，其中一些参数包含空格，但它的输出失去了参数之间的空格和参数内的空格的区别。

相反，您可以使用`printf(1)`printf 的功能来输出参数并始终包含引号，当格式字符串中的参数多于格式说明符时，该功能将格式字符串连续应用于参数：

```
echo "Failed: foo:" $(printf "'%s' " "${mycmd[@]}") 
```

即使不需要，这也会在每个参数周围加上单引号：

```
Failed: foo: 'command.ext' 'arg1 with space' 'arg2' 'thing' 'etc' 
```

我使用单引号来确保其他 shell 元字符不会被错误处理。这将适用于除单引号本身之外的所有字符 - 即，如果您有一个包含单引号的参数，则上述命令的输出将无法正确剪切和粘贴。这可能是您在不弄乱的情况下最接近的。

编辑：差不多 5 年后，自从我回答了这个问题，bash 4.4 已经发布。这具有`"${var@Q}"`引用变量的扩展，以便它可以被 bash 解析回来。

这将这个答案简化为：

```
echo "Failed: foo: " "${mycmd[@]@Q}" 
```

这将正确处理参数中的单引号，而我的早期版本没有。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-20T05:24:20.873

bash 的 printf 命令具有 %q 格式，可在打印字符串时为字符串添加适当的引号：

```
echo "Failed: foo:$(printf " %q" "${mycmd[@]}")" 
```

请注意，它对引用某些内容的“最佳”方式的想法并不总是与我的相同，例如，它倾向于转义有趣的字符而不是将字符串包含在引号中。例如：

```
crlf=$'\r\n'
declare -a mycmd=( command.ext "arg1 with space 'n apostrophe" "arg2 with control${crlf} characters" )
echo "Failed: foo:$(printf " %q" "${mycmd[@]}")" 
```

印刷：

```
Failed: foo: command.ext arg1\ with\ space\ \'n\ apostrophe $'arg2 with control\r\n characters' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T04:12:31.950

怎么样`declare -p quotedarray`？

- 编辑 -

实际上，`declare -p quotedarray`会很好地满足您的目的。如果您坚持结果的输出格式，那么我有一个小技巧可以完成这项工作，但只是针对索引数组而不是关联数组。

```
declare -a quotedarray=(1 2 "3 4")
temparray=( "${quotedarray[@]/#/\"}" ) #the outside double quotes are critical
echo ${temparray[@]/%/\"} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T05:40:08.113

一个麻烦的方法（只引用包含空格的参数）：

```
declare -a myargs=(1 2 "3 4")
for arg in "${myargs[@]}"; do
    # testing if the argument contains space(s)
    if [[ $arg =~ \  ]]; then
      # enclose in double quotes if it does 
      arg=\"$arg\"
    fi 
    echo -n "$arg "
done 
```

输出：

```
1 2 "3 4" 
```

* * *

顺便说一句，关于`quoting is lost on this pass`，请注意引号*永远不会*保存。`" "`是一个特殊字符，它告诉 shell 将内部的任何内容视为单个字段/参数（即不拆分它）。另一方面，文字引号（像这样键入`\"`）被保留。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-22T17:32:35.250

## 另一种方法

```
# echo_array.sh

contains_space(){ [[ "$1" =~ " " ]]; return $?; }
maybe_quote_one(){ contains_space "$1"  &&  echo \'"$1"\'  ||  echo "$1"; }
maybe_quote(){ while test "$1"; do maybe_quote_one "$1"; shift; done; }

arridx(){ echo '${'$1'['$2']}'; }
arrindir(){ echo $(eval echo `arridx $1 $2`); }
arrsize(){ echo `eval echo '${'#$1'[@]}'`; }

echo_array()
{ 
    echo -n "$1=( "
    local i=0
    for (( i=0; i < `arrsize a`; i++ )); do
        echo -n $(maybe_quote "$(arrindir $1 $i)") ''
    done
    echo ")"
} 
```

### 用法：

```
source echo_array.sh
a=( foo bar baz "It was hard" curious '67 - 00' 44 'my index is 7th' )
echo_array a
# a=( foo bar baz 'It was hard' curious '67 - 00' 44 'my index is 7th'  )
arrindir a 7
# my index is 7th
arrindir a 0
# foo
arrsize a
# 8 
```

**$ bash --版本**

```
GNU bash, version 4.3.48(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2013 Free Software Foundation, Inc. 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-27T02:40:14.477

我喜欢将代码放在一个函数中，以便更容易重用和记录：

```
function myjoin
{
   local list=("${@}")
   echo $(printf "'%s', " "${list[@]}")
}

declare -a colorlist=()
colorlist+=('blue')
colorlist+=('red')
colorlist+=('orange')

echo "[$(myjoin ${colorlist[@]})]" 
```

请注意我是如何在解决方案中添加逗号的，因为我正在使用 bash 脚本生成代码。

[编辑：修复 EM0 指出它正在返回 ['blue',]] 的问题

# google-cloud-storage - 从 Google Cloud Storage 中提取 RAR 文件

> ID：12985181
> 
> 赞同：4
> 
> 时间：2012-10-20T04:09:51.337
> 
> 标签：google-cloud-storage

我使用 RAR 实用程序（未压缩 100GB，压缩 20GB）获得了一个大的多部分压缩 CSV 文件，因此我有 100 个 RAR 文件部分，它们已上传到 Google Cloud Storage。我需要将其提取到 Google Cloud Storage。如果我可以在 GAE 上使用 Python，那将是最好的。有任何想法吗？我不想下载、提取和上传。我想在云端完成这一切。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-22T17:29:47.650

这个问题已经得到回答（并被接受），但对于未来的类似用例，我建议通过在 GCE 上启动一个小型 Linux 实例（例如 ，`f1-micro`然后运行 ​​Marc Cohen 在[他的回答](https://stackoverflow.com/a/12991482/3618671)。这些实例`gsutil`已预装，因此易于使用。完成后，只需关闭并删除您的微实例，因为您生成的文件已存储在 Google Cloud Storage 中。

分步说明：

1.  [创建 Google Compute Engine 虚拟机实例](https://cloud.google.com/compute/docs/instances/create-start-instance)
2.  [SSH 到实例](https://cloud.google.com/compute/docs/instances/connecting-to-instance)
3.  按照[另一个答案中的说明进行操作](https://stackoverflow.com/a/12991482/3618671)

这样做的好处是，您无需下载到您自己的计算机，而是在 Google Cloud 本身内传输所有数据，因此传输速度应该非常快，并且不依赖于您自己的互联网连接速度或消耗您的任何带宽。

* * *

**注意：**网络带宽与 VM 的大小（以 vCPU 为单位）成正比，因此为了获得更快的性能，请考虑创建更大的 VM。VM 实例的Google Compute Engine[定价](https://cloud.google.com/compute/pricing)如下：

1.  最少 10 分钟
2.  四舍五入到最接近的分钟

因此，例如，假设`n1-standard-1`成本为 0.05 美元/小时（截至 2016 年 10 月 8 日），使用 15 分钟总共将花费 0.0125 美元。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T18:35:37.487

无法直接在云端解压缩/解压 RAR 文件。您知道`gsutil -m`（多线程/多处理）选项吗？它通过并行运行来加快传输速度。我建议这个顺序：

*   下载压缩存档文件
*   本地解包
*   使用并行上传解压文件`gsutil -m cp file-pattern dest-bucket`

除非您的互联网连接速度非常慢，否则 20GB 应该不会花费很长时间（我预计不到一个小时），并行上传也是如此（尽管这是您获得多少并行度的函数，而这又取决于存档文件的大小）。

顺便说一句，您可以`gsutil -m`通过文件中的`parallel_thread_count`和`parallel_process_count`变量调整使用的并行性`$HOME/.boto`。

# jquery - jQuery翻转！仅用于文本的插件？

> ID：12985190
> 
> 赞同：0
> 
> 时间：2012-10-20T04:12:34.273
> 
> 标签：jquery, jquery-plugins, plugins, flip

制作著名的 jQuery Flip 的任何方法！插件只影响文本？...就像看到文本实际旋转而不是消失然后在“旋转”结束时重新出现？

```
var $flipBox  = $('span#flipbox'),
    flip_opts = [{
        direction: 'tb',
        speed: 600,
        content: "NUMBER TWO"
    },
        {
            direction: 'tb',
            speed: 600,
            content: "NUMBER 3"
        },
        {
            direction: 'tb',
            speed: 600,
            content: "NUMBA 4"
        }
    ],
    curr_indx = 0,
    timer     = setInterval(function () {
        if (curr_indx >= flip_opts.length) {
            curr_indx = 0;
        }
        $flipBox.flip(flip_opts[curr_indx]);
        curr_indx++;
    }, 3000); 
```

小提琴：http: [//jsfiddle.net/Ws6sS/](http://jsfiddle.net/Ws6sS/)

它设置在计时器上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:31:52.350

Ohgodwhy 回答 - 不可能.. “它附加一个具有相同尺寸/背景大小的新元素，然后只是将元素动画化到其自身并再次退出；然后它会删除其自身并显示下一个元素”

# django - 在 Django 中隐藏 ModelForm 字段条目

> ID：12985191
> 
> 赞同：0
> 
> 时间：2012-10-20T04:13:00.590
> 
> 标签：django, forms, hidden-field

我在 Django 中有一个 ModelField。我希望用户能够编辑一些字段，但想自己编辑其他字段（不是作为管理员，而是使用可通过 Javascript 访问的用户状态的值）。如果我将 ModelField 属性“可编辑”更改为 false，那么当用户填写表单时我将无法访问。有没有办法实现 ModelForms 的常规表单存在的“HiddenField”属性？

如果需要，我可以提供更多详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:15:19.790

如果您有自定义模板和视图，您可以排除该字段并使用

```
 {{ modelform.instance.field }} 
```

获得价值。

您也可能更喜欢在视图中使用：

```
form.fields['field_name'].widget = forms.HiddenInput() 
```

它也很有用：

```
{{ form.field.as_hidden }} 
```

# c++ - 在 C++ 中与向量合并排序

> ID：12985192
> 
> 赞同：0
> 
> 时间：2012-10-20T04:13:14.407
> 
> 标签：c++, algorithm, mergesort

我有以下 C++ 代码，我需要使用这些代码来实现合并排序。它部分工作，但由于某种我无法发现的原因而运行无限循环而不进行排序。它还为部分值而不是初始值输出 0.00。（例如输入值 9.12 1.59 输出 1.59 0.00） 但是当我有超过 2 个元素时，它是一个无限循环并且不进行排序。我的作业需要额外的 printf() 才能正确，因此您可以忽略它们进行分析。提前感谢您的帮助！！

```
double max(double x, double y)
{
   return (x > y) ? x : y;
}

void sort_doubles(vector <double> &v, int print)
{
    int i;
    vector<double> tmp;
    tmp.resize(v.size());

    recursive_sort(v, tmp, 0, v.size(), print);
    printf("%16c",' ');
    for (i = 0; i < v.size(); i++) printf(" %.2lf",v.at(i));
    printf("\n");
}

void recursive_sort(vector<double> &v, vector<double> &temp, int start, int size, int print)
{
    int i,mid,left,right;
    double j;

    if (size == 1) return;

    i = 0;
    mid = start + (size/2);
    left = start;
    right = start + mid;

    printf("B: %5d %5d  ",start, size);
    for (i = 0; i < v.size(); i++) printf(" %.2lf", v.at(i));
    printf("\n");
    recursive_sort(v, temp, left, mid, print);
    recursive_sort(v, temp, left+mid, size-mid, print);

    for(i = 0; i < size; i++)
    {
        /* Check to see if any elements remain in the left array; if so,
         * we check if there are any elements left in the right array; if
         * so, we compare them.  Otherwise, we know that the merge must
         * use take the element from the left array */
        if(left < start + mid && (right == start+size || max(v[left], v[right]) == v[left]))
        {
            temp[i] = v[right];
            right++;
        }
        else
        {
            temp[i] = v[left];
            left++;
        }
    }
    /* Copy the sorted subarray back to the input */
    for(i = start; i < start+size; i++)
    {
        v[i] = temp[i];
    }
    printf("E: %5d %5d  ",start,size,' ');
    for (i = 0; i < v.size(); i++) printf(" %.2lf",v.at(i));
    printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:56:38.877

终于想通了！下面是代码，以防有人可能需要它。

```
double min(double x, double y)
{
    return (x < y) ? x : y;
}

void sort_doubles(vector <double> &v, int print)
{
    int i;
    vector<double> tmp;
    tmp.resize(v.size());

    recursive_sort(v, tmp, 0, v.size(), print);
    printf("%16c",' ');
    for (i = 0; i < v.size(); i++) printf(" %.2lf",v.at(i));
    printf("\n");
}

void recursive_sort(vector<double> &v, vector<double> &temp, int start, int size, int print)
{
    int i,mid,left,right;
    double j;

    if (size == 1) return;

    i = 0;
    mid = size/2;
    left = start;
    right = left+mid;

    printf("B: %5d %5d  ",start, size);
    for (i = 0; i < v.size(); i++) printf(" %.2lf", v.at(i));
    printf("\n");

    recursive_sort(v, temp, left, mid, print);
    recursive_sort(v, temp, left+mid, size-mid, print);

    for(i = 0; i < size; i++)
    {
        /* 
         * Check to see if any elements remain in the left array; if so,
         * we check if there are any elements left in the right array; if
         * so, compare them.  Otherwise, we know that the merge must
         * use take the element from the left array 
         */
        if(left < (start + mid) && (right == start+size || min(v.at(left), v.at(right)) == v.at(left)))
        {
            temp.at(i) = v.at(left);
            left++;
        }
        else
        {
            temp.at(i) = v.at(right);
            right++;
        }
    }

    //Copy the sorted subarray back to the input
    for(i = start; i < start+size; i++)
    {
        v.at(i) = temp.at(i-start);
    }

    printf("E: %5d %5d  ",start,size,' ');
    for (i = 0; i < v.size(); i++) printf(" %.2lf",v.at(i));
    printf("\n");
} 
```

# javascript - Javascript - 创建一个事件

> ID：12985194
> 
> 赞同：2
> 
> 时间：2012-10-20T04:14:00.540
> 
> 标签：javascript, html, javascript-events

我编写的代码可以根据用户按住点击的时间长短来更改用户在图像上放置的标记的颜色（绘制在 Canvas 元素上）。目前，如果用户按住不到一秒，就会出现蓝色标记；否则会出现绿色标记。

我想创建一种方法让用户知道自从他们开始点击后已经过了一秒钟，也许侧面的指示面板会改变颜色等。我有一个计时器，从你开始点击开始计数。您如何创建一个在该计时器达到一秒时触发的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:18:30.723

不知道你是否正在寻找这样的东西，

```
setTimeout("javascript function",milliseconds); 
```

setTimeout() 方法会等待指定的毫秒数，然后执行指定的函数。

# c - 如何编程 I2C 从机模式

> ID：12985197
> 
> 赞同：1
> 
> 时间：2012-10-20T04:15:08.643
> 
> 标签：c, embedded, microcontroller, 8051

我不明白我将如何编写我的 MCU 以在 I2C 总线上监听它的地址并相应地执行。C 中的许多示例代码都是针对主设备的。我想更好地了解如何为从设备编写代码。我是否使用 SMB0STA 状态寄存器？我在下面发布了一个函数，我认为它会“监听”提示以启动和输出数据。`0xA8`是“收到自己的地址 + R。ACK 已发送”的状态代码。根据我的 C8051F020 MCU 数据表。

```
unsigned char i2c_Slave_Read (void)
{
    unsigned char data_out[8];

    data_out[8] = "LED 1 ON";

    while (SI)
    if (SMB0STA == 0xA8)
    {
        P5 = 0x10;
        SMB0DAT = data_out;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:22:38.643

[从数据表](http://www.silabs.com/Support%20Documents/TechnicalDocs/C8051F02x.pdf)的第 18.3.3 节开始描述从操作

`SMB0ADR`您使用您的从地址对寄存器进行编程。地址检测由硬件完成，然后在数据到达时给您一个中断。然后，您可以读取状态`SMB0STA`以查看发生了什么，并使用`SMB0DAT`. 见表 18.1，它解释了`SMB0STA`状态机和你的代码应该采取的行动。

# tinymce - TinyMCE 去掉 p 标签中的 br 标签

> ID：12985200
> 
> 赞同：3
> 
> 时间：2012-10-20T04:15:22.637
> 
> 标签：tinymce

这是我在`tinymce.init`函数中使用的配置：

```
forced_root_block: 'p'
valid_elements : '+a[id|rel|rev|charset|hreflang|dir|lang|tabindex|accesskey|type|name|href|target|title],strong/b,-em,i,strike,u,script,p[class|id|dir|align|style],ol,ul,li,br' 
```

但是当我们按下回车键时， *tinyMCE*正在剥离's。`<br>`像这样的东西：

```
 <p><br/></p> 
```

被发送为

```
 <p></p> 
```

有谁知道为什么会这样，我使用的是**tinyMCE 版本 3.5.4.1**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T11:26:24.380

在您的设置中：

```
'remove_trailing_brs': false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:13:51.613

请检查 br 元素是否注册为段落的 valid_children。默认它们应该是，但你永远不知道......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:05:10.777

问题是 init 函数 p 标签中的 valid_elements 设置需要在此处指定之前具有 # [http://www.tinymce.com/wiki.php/Configuration:valid_elements](http://www.tinymce.com/wiki.php/Configuration:valid_elements)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T06:13:45.167

在默认设置中，

```
Shift + Enter key 
```

# java - 在重载构造中使用 toString() ？如何

> ID：12985201
> 
> 赞同：0
> 
> 时间：2012-10-20T04:16:40.263
> 
> 标签：java, overloading, tostring

## 我班上有几个构造函数

```
public class Date {
       ...
       public Date(first case)
       ...
       public Date(second case)
       ...
       public Date(third case)
       ...
       public String toString(){
       ...} 
```

如何在 toSTring() 中编写代码？？？？

谁能给我解释一下

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:36:27.690

你的回报不是由你班上有`toString`多少人决定的。`constructor`它们用于在打印类的实例时要打印的表示`return`。`String`您可以从中返回任何字段或某些字段的串联。

因此，如果您有一个包含and的`Person`类，并且您想打印用冒号分隔的人的and ，当您打印实例时，您将看起来像：-`4-5 fields``id``name``id``name``toString()`

```
@Override
public String toString() {
    return this.id + " : " + this.name;
} 
```

因此，如果您有一个带有 , 和 some 的类实例，那么`Person`当您显示该实例时：-`id = 5``name = rohit``age = 23``email id`

```
Person person = new Person(5, "rohit", "rohit@gmail.com", 23);
System.out.println(person);

Person person2 = new Person(6);  // Don't have `name` set
System.out.println(person2); 
```

上面的语句将打印： -

```
5 : rohit
6 : 
```

作为输出。

但是你当然可以在你的字段中设置一个条件`toString`来检查一个字段是否为空，并且你可以相应地返回一个消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:36:12.237

```
public String toString() {
    return case1 != null ? case1 : case2 != null ? case2 : case3 != null ? case3 : null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:47:10.697

java toString 对于以文本形式表示对象非常有用。您应该始终覆盖 toString() 以便可以访问正确的调试/日志记录。这是一个类的示例，它可能是一个很好的例子。

```
public class Person {
    private final String _name;
    private final Integer _age;
    private final Date _birthday;

    public Person(String name, Integer age, Date birthday) {
        this._name = name;
        this._age = age;
        this._birthday = new Date(birthday.getTime());
    }

    @Override
    public String toString() {
        return "Person [_name=" + _name + ", _age=" + _age + ", _birthday="
                + _birthday + "]";
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T04:58:18.327

toString 方法应该代表对象的“状态”，因此与构造函数无关，而是与类属性相关。

# php - PHP如何获取所有已定义变量的列表？

> ID：12985202
> 
> 赞同：0
> 
> 时间：2012-10-20T04:16:44.627
> 
> 标签：php

如何获取已定义变量及其值的列表。例如`define('DS', DIRECTORY_SEPARATOR);`

如何在页面末尾列出所有这些以检查它们是否按预期工作。而不是一一打印出来。

我试过`get_defined_vars()`但我得到了所有的超级全局变量，如下所示。

```
Array
(
    [GLOBALS] => Array
        (
            [GLOBALS] => Array
 *RECURSION*
            [_POST] => Array
                (
                )

            [_GET] => Array
                (
                )

            [_COOKIE] => Array
                (
                    [PHPSESSID] => tkv7odk47idt4r2ob7389tkr81
                    [CAKEPHP] => cep9tbooimh5kbhn8jovmaqgi1
                )

            [_FILES] => Array
                (
                )

            [_SERVER] => Array 
```

但我只想要那些我在`define()`声明中提到的那些。

有什么办法可以得到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:19:47.300

您可以通过使用**[get_defined_constants](http://php.net/manual/en/function.get-defined-constants.php)**

```
$constarray = get_defined_constants(true);
foreach($constarray['user'] as $key => $val)
    eval(sprintf('$_CONSTANTS[\'%s\'] = \'%s\';', addslashes($key), addslashes($val))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:02:29.743

要检索 php 脚本中所有已定义的常量，您可以使用函数 get_defined_constants()

它将返回 php 脚本中定义的所有常量的关联数组

有关 get_defined_constants 的更多文档，请参阅以下网址 [http://php.net/manual/en/function.get-defined-constants.php](http://php.net/manual/en/function.get-defined-constants.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T04:19:13.663

使用`get_defined_constants();`，参考[http://php.net/manual/en/function.get-defined-constants.php](http://php.net/manual/en/function.get-defined-constants.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-14T16:34:36.827

我使用此代码来获取所有定义。您可以包含 php 文件并使用此代码

```
 include("FILE.PHP");  

              GET_ALL_define();

            function GET_ALL_define(){

                    $getdefinedconstants = get_defined_constants(true);
                    $definedvars = $getdefinedconstants['user'];

                    foreach($definedvars as $key => $value){
                        echo $key ." = ". $value . "<br>";
                    }

            } 
```

或不包含像此代码这样的 php 文件。

```
 define("_A","A1");
          define("_B","B2");   
          define("_C","C3");

              GET_ALL_define();

            function GET_ALL_define(){

                    $getdefinedconstants = get_defined_constants(true);
                    $definedvars = $getdefinedconstants['user'];

                    foreach($definedvars as $key => $value){
                        echo $key ." = ". $value . "<br>";
                    }

            } 
```

# spring - 如何检测 Spring Validation 是否通过？

> ID：12985206
> 
> 赞同：0
> 
> 时间：2012-10-20T04:17:08.760
> 
> 标签：spring, hibernate, bean-validation

我正在尝试使用注释使用 Spring 3.0 验证。 [http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#core-convert)

我的代码在文档中看起来像：

```
@Controller
public class MyController {

    @InitBinder
    protected void initBinder(WebDataBinder binder) {
       binder.setValidator(new FooValidator());
    }

    @RequestMapping("/foo", method=RequestMethod.POST)
    public void processFoo(@Valid Foo foo) { ... }

}

public class PersonValidator implements Validator {

    /**
     * This Validator validates just Person instances
     */
   public boolean supports(Class clazz) {
    return Person.class.equals(clazz);
  }

public void validate(Object obj, Errors e) {
    ValidationUtils.rejectIfEmpty(e, "name", "name.empty");
} 
```

}

如何在我的 RequestMapping 方法中判断验证是否通过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:20:05.527

啊……那是微不足道的……刚刚发现我的 RequestMapping 中有一个[BindingResult](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/validation/BindingResult.html)参数，它有一个 hasErrors() 方法。

# jquery - jsfiddle创作没有转移到网站

> ID：12985211
> 
> 赞同：2
> 
> 时间：2012-10-20T04:18:21.200
> 
> 标签：jquery, jsfiddle

我在 jsfiddle 中修改了一个简单的图像滑块，但无法弄清楚为什么我不能让它在我的第一个客户网站上工作。在 jsFiddle 中可以正常工作，但在网站上却不行。

它使用了其他几个插件来实现平滑滚动（我想我试图将它转移到 =/ 上时打破了它）。这是我的第一个“客户”之一，我开始着手开发我的开发组合。

这是 jsFiddle 代码的链接 - [http://jsfiddle.net/SbDpR/](http://jsfiddle.net/SbDpR/)

JS 片段

```
$(document).ready(function() {

    var height = 340,
        width = 740,
        slides = 5,
        contentNum = 1;
    $('.testing').html("Content Number - " + contentNum);
    $('.main_inner').css({
    width: slides * width
    });
    $('.next a').click(function(){
        if (contentNum < slides) {  
           $('.main_inner').animate({
            marginLeft: '-' + (width * contentNum)
            }, 600);
            contentNum = contentNum + 1;
            $('.testing').html("Content Number - " + contentNum);
        } else {
           $('.main_inner').animate({
            marginLeft: '0'
            }, 600);
            contentNum = contentNum / contentNum;
             $('.testing').html("Content Number - " + contentNum);
        }
        return false;
    });

    $('.previous a').click(function(){
        if (contentNum > 1) {
           $('.main_inner').animate({
            marginLeft: '+=740'
            }, 600);
            contentNum = contentNum - 1;
            $('.testing').html("Content Number - " + contentNum);
        } else {
            $('.main_inner').animate({
            marginLeft: '-2960'
            }, 600);
            contentNum = 5;
            $('.testing').html("Content Number - " + contentNum);
        }
        return false;
    });
});​ 
```

这是该网站的链接以查看它的实际效果 - [http://skeptikalmedia.com/MOM/index.html](http://skeptikalmedia.com/MOM/index.html)

我花了最后 4 个小时试图让它在现场工作。我已经复制/粘贴/删除/复制/粘贴。目前，该脚本位于索引页面上，以确保我不会错过导入文件或其他内容。

有任何想法吗？我已经到了几乎要花钱请人告诉我为什么它不起作用或将 JSFiddle 变成 jQuery 插件的地步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:13:17.757

你的班级`.wrapper div`有`position: absolute;`. 删除它，一切看起来都像它应该的那样，或者改变你现有的 css 如下（`position: static`是 html 元素的默认定位）：

```
.main_inner > div {
    position: static;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:24:09.470

更改此代码

```
<div id="content1" class="content"> 
```

到

```
<div id="content1" class="content" style="position: relative;"> 
```

您的其他 content2 ， content3 ....

# macos - 扫描文件夹以查找新添加的文件

> ID：12985212
> 
> 赞同：0
> 
> 时间：2012-10-20T04:18:23.243
> 
> 标签：macos, applescript

如何使用 applescript 扫描文件夹以查找新添加的文件。

我正在尝试识别文件夹中上次检查时的最新文件（图片格式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T08:34:59.783

`do shell script "ls -t ~/Pictures | head -n1"`将打印最新文件的基本名称。

这将打印完整路径：

```
find ~/Pictures -depth 1 -exec stat -f "%m %N" {} \; | sort -n | tail -n1 | sed 's/^[^ ]* //' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:09:02.570

这是另一种方法。您可以将下载文件夹路径更改为目标文件夹的路径。

```
tell application "Finder"
    set latestFile to item 1 of (sort (get files of (path to downloads folder)) by creation date) as alias
    set fileName to latestFile's name
end tell 
```

[如何以编程方式使用applescript获取最新下载的文件名？](https://stackoverflow.com/questions/12973026/how-to-get-the-latest-downloaded-file-name-with-applescript-programatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:48:41.920

如果我正确理解了您的问题，您需要一些脚本，当您运行它时，它将为您提供所有“新”文件。其中“新”表示脚本以前没有见过它们。

因此，如果您在包含文件 a.txt、b.txt 和 c.txt 的目录上运行脚本，您将从脚本中获取所有 3 个文件。然后在再次运行之前，添加文件 d.txt 和 e.txt，然后运行脚本，你应该得到 d.txt 和 e.txt。

为了实现这一点，您需要在脚本运行之间存储一些信息。例如，您可以创建一个隐藏文件 .lastFileISaw 并在其中存储最后一个文件名或其时间戳。然后你的applescript cna检查这个文件，如果它不存在，则返回目录中的所有文件，如果存在则只返回那些比你的隐藏文件内容更新的文件。

我认为像 Dropbox 和 SparkleShare 这样的服务利用 OSX 上的 DTrace 来完成这些事情。

# java - Jdbc - 连接远程Mysql数据库错误

> ID：12985214
> 
> 赞同：0
> 
> 时间：2012-10-20T04:18:45.763
> 
> 标签：java, mysql, database, jdbc

[解决了]

我终于解决了问题，连接一切正常吗...

问题出在 SQL 查询中，我在名为“arduinoData”的表中进行选择，而真正的名称是“arduinodata”。

这种方式在本地有效，但是当我在网上尝试时，它没有。

因为这个，返回是'null'，Java 试图解析它并显示错误。

很抱歉给大家添麻烦了，谢谢大家。

* * *

我正在使用 JDBC 将我的程序连接到 MySQL 数据库。

我已经输入了端口号，是的，我的数据库有权访问。

当我使用 localhost 时工作正常，但是当我尝试连接到远程 MySQL 数据库时，在控制台上显示此错误。

```
java.lang.ExceptionInInitializerError
Caused by: java.lang.NumberFormatException: null
    at java.lang.Integer.parseInt(Integer.java:454)
    at java.lang.Integer.parseInt(Integer.java:527)
    at serial.BDArduino.<clinit>(BDArduino.java:25)
Exception in thread "main" Java Result: 1
CONSTRUÍDO COM SUCESSO (tempo total: 1 segundo) 
```

先感谢您 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:44:47.057

*注意：*这最初是一条评论，但太长了。似乎人们看到 NFE 并猜测它是空的端口。这是误导。这是一个显示端口的工作代码不是必需的。请避免误导性答案。

```
 try {
          Class.forName("com.mysql.jdbc.Driver");
          String sourceURL = "jdbc:mysql://localhost/sodb";

          Connection conn = DriverManager.getConnection(sourceURL, "naishe", "p2ssword");
          Statement st = conn.createStatement();
          ResultSet rs = st.executeQuery("select count(*) from test_tab");
          while(rs.next()){
              System.out.println(rs.getString(1));
          }
        } catch(ClassNotFoundException cnfe) {
          System.err.println(cnfe);
        } catch(SQLException sqle) {
          System.err.println(sqle);
        } 
```

它正确打印`3`（这是表 test_tab 中的记录数）。

* * *

如果您使用的是*标准驱动*，**则不需要端口**，默认为 3306！见这里 [http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

> JDBC URL 格式
> 
> MySQL Connector/J 的 JDBC URL 格式如下，方括号 ([, ]) 中的项目是可选的：
> 
> `jdbc:mysql://[host][,failoverhost...]**[:port]**/[database] » [?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]...`
> 
> 如果未指定主机名，则默认为 127.0.0.1。**如果未指定端口，则默认为 3306，这是 MySQL 服务器的默认端口号。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T04:33:15.753

我认为您在连接字符串中错过了端口号。

```
static String url = "jdbc:mysql://mysql.mydomain.com.br:3306/myDB"; 
```

代替

```
static String url = "jdbc:mysql://mysql.mydomain.com.br/myDB"; 
```

现在，如果遇到相同的错误意味着您可以将**mysql.mydomain.com.br**替换为 IP 地址，如下所示：

只需在数据库连接字符串中提供远程机器的 IP / 主机名，而不是 mysql.mydomain.com.br。例如：

```
jdbc:mysql://172.16.15.225:3306/yourdatabase 
```

还要检查没有防火墙阻止对端口 3306 的访问。

确保您正在连接的用户被允许从这个特定的主机名进行连接。对于开发环境，这样做是安全的

```
'username'@'%' 
```

这是为了授予用户 [GRANT 手册的权限。](https://dev.mysql.com/doc/refman/5.1/en/grant.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T04:34:26.097

你应该`port numbers`在你的`connection url as 3306`，并且请确保用户对数据库访问的权限如果没有被授予，你应该授予用户访问远程数据库的权限，请参考[链接](http://www.thegeekstuff.com/2010/08/allow-mysql-client-connection/)

# c++ - 在 C++ 中按顺序对齐函数

> ID：12985217
> 
> 赞同：0
> 
> 时间：2012-10-20T04:19:15.007
> 
> 标签：c++, visual-studio, visual-c++

想象一下我有以下代码

```
void A(){
// blah blah blah
}
void B(){
// blah blah blah
}
void C(){
// blah blah blah
} 
```

当代码编译（使用Visual Studio）并加载到内存中执行时，A()、B()、C()的地址可能不按顺序排列。我们怎样才能让他们订购？在这种情况下是否有任何指令有用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:15:02.720

如果您的程序由单个翻译单元（源文件）组成，则生成的二进制文件通常应按照在翻译单元中定义的顺序包含函数。例如，考虑以下程序：

```
int A() { return  0; }
int B() { return  1; }
int C() { return -1; }

int main() { return A() + B() + C(); } 
```

如果你编译这个针对最小尺寸优化的程序 (/O1) 并禁用内联函数扩展 (/Ob0)，将生成以下机器代码：

```
int A() { return  0; }
00F71000 33 C0                xor         eax,eax  
00F71002 C3                   ret  
int B() { return  1; }
00F71003 33 C0                xor         eax,eax  
00F71005 40                   inc         eax  
00F71006 C3                   ret  
int C() { return -1; }
00F71007 83 C8 FF             or          eax,0FFFFFFFFh  
00F7100A C3                   ret  

int main() { return A() + B() + C(); }
00F7100B E8 F0 FF FF FF       call        A (0F71000h)  
00F71010 8B C8                mov         ecx,eax  
00F71012 E8 EC FF FF FF       call        B (0F71003h)  
00F71017 03 C8                add         ecx,eax  
00F71019 E8 E9 FF FF FF       call        C (0F71007h)  
00F7101E 03 C1                add         eax,ecx  
00F71020 C3                   ret 
```

源注释由调试器提供。当使用其他优化设置时，需要对最小尺寸进行优化以消除`int 3`放置在函数之间的填充。必须禁用内联函数扩展以确保函数实际存在于生成的二进制文件中。

据我所知，这是一个实现细节，因此不应在生产代码中依赖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:25:59.430

如果您确实将它们拆分为单独的函数只是为了便于阅读，并且您在整个程序中只调用它们一次 - 内联声明这些函数，因此编译器会将它们组合成一段代码而无需任何调用指令。

否则没有理由将它们按顺序放置在内存中，因为任何调用指令都会刷新 CPU 的流水线。

# c++ - 如何随机化一个充满字符串的数组？C++

> ID：12985219
> 
> 赞同：0
> 
> 时间：2012-10-20T04:19:52.253
> 
> 标签：c++, arrays

我搜索并找到了一些随机数字，但我认为它不适用于字符串......例如，我在数组中有一个这样的列表：

```
string restaurants[] = {"Texas Roadhouse,","On The Border,","Olive Garden,","Panda       Express,","Cracker Barrel,","IHOP,","Panda Express,","Pei Wei"}; 
```

我将如何随机化它或只是将它们全部交换并将它们混杂在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T04:22:31.323

如果没有必要，不要重新发明轮子。

```
std::random_shuffle(std::begin(restaurants), std::end(restaurants)); 
```

在 C++03 中，无需实现您自己的`begin`and `end`：

```
std::random_shuffle(restaurants, restaurants + sizeof restaurants / sizeof restaurants[0]); 
```

请注意，除非您使用诸如 之类的东西，否则`std::vector`将其传递给函数而不是通过引用来执行此操作将需要将后者与额外的大小参数一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:22:33.227

你可以这样做

```
 #include <iostream>
#include <string>
#include <ctime>
#include <cstdlib>
using namespace std;

int main ()
{
  static string numbers[] =  {"Texas Roadhouse,","On The Border,","Olive Garden,","Panda       Express,","Cracker Barrel,","IHOP,","Panda Express,","Pei Wei"};
  srand(time(0));
  int rand_index = rand() % 10;
  cout << numbers[rand_index] << endl;

  string input;
  getline(cin,input);
  cout << (((input=="even")==(rand_index+1)%2==0) ? "Right." : "Wrong.") << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:43:45.487

只是一个有趣的选择（随机排序）：

```
std::sort(restaurants, restaurants + sizeof(restaurants) / sizeof(std::string), [](int x, int y) -> bool { return rand() % 100 >= 50; }); 
```

# asp.net-mvc - 在 mvc 视图中获取 Nhibernate Lazy 数据

> ID：12985225
> 
> 赞同：1
> 
> 时间：2012-10-20T04:21:24.237
> 
> 标签：asp.net-mvc, nhibernate, session

我想在 mvc 视图中获取惰性数据。
所以我创建了一个`ActionFilterAttribute`你可以在下面看到的。
但是由于某种原因，会话在之前关闭`OnActionExecuted`。
任何想法为什么？
发送

```
public class DatabaseTransactionAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            DatabaseConnector.GetTransaction();
        }

        public override void OnActionExecuted(ActionExecutedContext filterContext)
        {
            if(DatabaseConnector.GetCurrentSession().IsActive())
            {
                if(filterContext.Exception == null)
                {
                    DatabaseConnector.GetCurrentSession().Commit();
                }
                else
                {
                    DatabaseConnector.GetCurrentSession().MarkForRollBack();
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:25:31.593

这里的问题是视图是在OnActionExecuted 方法**之后评估的。**

如果您*真的*想在视图中延迟加载数据（不建议这样做，因为它会导致您出现 N+1 错误），您将希望在 OnResultExecuted 方法中提交您的事务。

请在执行此操作之前仔细考虑 - 首选您的原始代码。

例如

```
public class DatabaseTransactionAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        DatabaseConnector.GetTransaction();
    }

    public override void OnResultExecuted(ActionExecutedContext filterContext)
    {
        if(DatabaseConnector.GetCurrentSession().IsActive())
        {
            if(filterContext.Exception == null)
            {
                DatabaseConnector.GetCurrentSession().Commit();
            }
            else
            {
                DatabaseConnector.GetCurrentSession().MarkForRollBack();
            }
        }
    }
} 
```

# data-structures - AVL 树最小节点

> ID：12985226
> 
> 赞同：4
> 
> 时间：2012-10-20T04:21:40.977
> 
> 标签：data-structures

高度为 h 的 AVL 树中的最小节点数是多少？我在互联网上做了一些研究，但它们都很混乱。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-15T15:29:48.863

`n(h)`为高度为 h 的 AVL 树的最小节点数，则：

```
n(0)=1, n(1)=2
n(h)= 1+n(h-1)+n(h-2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-13T15:55:09.993

对于高度为 h 的树，AVL 树中的最小节点数。以下等式应演示 N(h) 函数的递归调用。

```
formula N(h)=1+N(h-1)+N(h-2) 
```

由于我们知道`N(0)=1 ,N(1) = 2, N(2) = 4`，例如：我们可以将以下等式简化为 的这些已知值`h = 6`。

```
N(3)=1+N(3-1)+N(3-2)=1+N(2)+N(1)=7

N(4)=1+N(4-1)+N(4-2)=1+N(3)+N(2)=12

N(5)=1+N(5-1)+N(5-2)=1+N(4)+N(3)=20

N(6)=1+N(6-1)+N(6-2)=1+N(5)+N(4)=33 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:25:12.447

高度为 h 的 AVL 树至少有 2(h/2)-1 个内部节点。

**证明：**设 n(h) 为高度为 h 的 AVL 树中的最小内部节点数。

n(1)=1 且 n(2)=2。所以引理适用于 h=1 和 h=2。

# uinavigationcontroller - 在 ModalViewController 中使用 UINavigation 控制器的问题

> ID：12985231
> 
> 赞同：0
> 
> 时间：2012-10-20T04:22:58.573
> 
> 标签：uinavigationcontroller, uimodalpresentationstyle

我正在尝试从另一个 UIViewController 以模态方式呈现 UINavigationController 的根视图。但是，当我单击触发模态转换的按钮时，我会看到一个空白屏幕，其中包含一个空的 UINavBar。我怀疑我没有将视图附加到 UINavigationController，但我不确定如何执行此操作。

这是我应该触发模态转换的目标操作方法的代码。此代码包含在 modal Presenter 的实现文件中：

```
 //Instansiate the root UIViewController 

        OzSoundSelectionViewController *selectionView = [[OzSoundSelectionViewController alloc]initWithNibName:@"OzSoundSelectionViewController" bundle:nil];

//Instansiate the UINavigatonController and set the root view controller

        navigationController = [[UINavigationController alloc]initWithRootViewController:selectionView];

//Set up the modal transition
        [selectionView setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
        [self presentModalViewController:navigationController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T04:07:31.943

我解决了这个问题。

我在 rootViewController 中声明了一个名为 navigationController 的属性。这覆盖了作为 UIViewController 父类的一部分的属性 navigationController。这把一切都搞砸了。

# xml - 使用 XSLT 删除重复节点

> ID：12985236
> 
> 赞同：2
> 
> 时间：2012-10-20T04:23:55.683
> 
> 标签：xml, xslt

首先，我很遗憾地说“删除重复节点并没有按预期的方式工作”，即使我提到了多个线程，这些线程在一定程度上有所帮助，但我仍然没有达到我期望的解决方案。

简而言之，如果我的供应商和 origin_country_id 在以下后代中相同，我想删除 XitemSup 复杂类型元素。

下面是xslt代码

```
<xsl:stylesheet version="1.0" exclude-result-prefixes="xsl xsd ns3"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:ns3="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier">
   <xsl:template match="/">
      <ns3:XItemSupDesc>
         <xsl:for-each select="//ns3:XItemSupDesc/ns3:XitemSup">             
            <xsl:if test="not(ns3:supplier=following::ns3:supplier) or not(ns3:origin_country_id=following::ns3:origin_country_id)">
                   <ns3:XitemSup>
                     <ns3:supplier>
                        <xsl:value-of select="./ns3:supplier"/>
                     </ns3:supplier>
                     <ns3:primary_supp_ind>
                        <xsl:value-of select="./ns3:primary_supp_ind"/>
                     </ns3:primary_supp_ind>
                     <ns3:origin_country_id>
                        <xsl:value-of select="./ns3:origin_country_id"/>
                     </ns3:origin_country_id>
                     <ns3:primary_country_ind>
                        <xsl:value-of select="./ns3:primary_country_ind"/>
                     </ns3:primary_country_ind>
                     <ns3:unit_cost>
                        <xsl:value-of select="./ns3:unit_cost"/>
                     </ns3:unit_cost>
                  </ns3:XitemSup>
               </xsl:if>
         </xsl:for-each>
      </ns3:XItemSupDesc>
   </xsl:template>
</xsl:stylesheet> 
```

但是如果我在下面的 xml 上申请它就不起作用

```
<XItemSupDesc xmlns:ns2="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier" xmlns="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier">
   <ns2:XitemSup>
      <ns2:supplier>101018</ns2:supplier>
      <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
      <ns2:origin_country_id>CA</ns2:origin_country_id>
      <ns2:primary_country_ind>N</ns2:primary_country_ind>
      <ns2:unit_cost>6</ns2:unit_cost>
   </ns2:XitemSup>
   <ns2:XitemSup>
      <ns2:supplier>102825</ns2:supplier>
      <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
      <ns2:origin_country_id>IN</ns2:origin_country_id>
      <ns2:primary_country_ind>N</ns2:primary_country_ind>
      <ns2:unit_cost>13</ns2:unit_cost>
   </ns2:XitemSup>
   <ns2:XitemSup>
      <ns2:supplier>102825</ns2:supplier>
      <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
      <ns2:origin_country_id>IN</ns2:origin_country_id>
      <ns2:primary_country_ind>N</ns2:primary_country_ind>
      <ns2:unit_cost>24</ns2:unit_cost>
   </ns2:XitemSup>
</XItemSupDesc> 
```

我希望有人可以让我知道 XSLT 代码哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:47:57.043

我建议不要使用`xsl:for-each`并且只是覆盖身份转换。

**XML 输入**

```
<XItemSupDesc xmlns:ns2="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier" xmlns="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier">
    <ns2:XitemSup>
        <ns2:supplier>101018</ns2:supplier>
        <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
        <ns2:origin_country_id>CA</ns2:origin_country_id>
        <ns2:primary_country_ind>N</ns2:primary_country_ind>
        <ns2:unit_cost>6</ns2:unit_cost>
    </ns2:XitemSup>
    <ns2:XitemSup>
        <ns2:supplier>102825</ns2:supplier>
        <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
        <ns2:origin_country_id>IN</ns2:origin_country_id>
        <ns2:primary_country_ind>N</ns2:primary_country_ind>
        <ns2:unit_cost>13</ns2:unit_cost>
    </ns2:XitemSup>
    <ns2:XitemSup>
        <ns2:supplier>102825</ns2:supplier>
        <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
        <ns2:origin_country_id>IN</ns2:origin_country_id>
        <ns2:primary_country_ind>N</ns2:primary_country_ind>
        <ns2:unit_cost>24</ns2:unit_cost>
    </ns2:XitemSup>
</XItemSupDesc> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:ns2="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="ns2:XitemSup">
        <xsl:if test="not(following::ns2:XitemSup[ns2:supplier=current()/ns2:supplier and ns2:origin_country_id=current()/ns2:origin_country_id])">
            <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
        </xsl:if>       
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<XItemSupDesc xmlns="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier" xmlns:ns2="http://xmlns.oracle.com/TSS_to_RMS/RIBXItemProcess/Supplier">
   <ns2:XitemSup>
      <ns2:supplier>101018</ns2:supplier>
      <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
      <ns2:origin_country_id>CA</ns2:origin_country_id>
      <ns2:primary_country_ind>N</ns2:primary_country_ind>
      <ns2:unit_cost>6</ns2:unit_cost>
   </ns2:XitemSup>
   <ns2:XitemSup>
      <ns2:supplier>102825</ns2:supplier>
      <ns2:primary_supp_ind>N</ns2:primary_supp_ind>
      <ns2:origin_country_id>IN</ns2:origin_country_id>
      <ns2:primary_country_ind>N</ns2:primary_country_ind>
      <ns2:unit_cost>24</ns2:unit_cost>
   </ns2:XitemSup>
</XItemSupDesc> 
```

注意：如果您可以使用 XSLT 2.0，您可以去掉`xsl:if`模板并将模板更改为：

```
<xsl:template match="ns2:XitemSup[following::ns2:XitemSup[ns2:supplier=current()/ns2:supplier and ns2:origin_country_id=current()/ns2:origin_country_id]]"/> 
```

# ruby - rspec 测试符号返回

> ID：12985237
> 
> 赞同：0
> 
> 时间：2012-10-20T04:23:57.357
> 
> 标签：ruby, rspec

好的，rspec noob 在这里...我有一个简单的方法，我想测试一下。我只是想让测试说......当这个方法被调用时，它返回一个符号......任何指针？

方法....

```
 def defend_corners(board)
    @board = board
    @corners = {
        :a1=>" ", :a3=>" ",
        :c1=>" ", :c3=>" "
    }
    available_moves = @corners.select{ |k, v| v == " " }.keys
    puts "random move - corners"
    @move = available_moves[rand(available_moves.length)]
    return @move
  end 
```

目前的测试......

```
 describe 'defend_corners' do
    it 'returns corner move' do
      myboard = Board.new

      @player_computer.defend_corners(myboard).should #return a symbol???
    end  
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:24:57.023

```
@player_computer.defend_corners(myboard).should be_an_instance_of(Symbol) 
```

或者

```
@player_computer.defend_corners(myboard).should be_a_kind_of(Symbol) 
```

或者

```
@player_computer.defend_corners(myboard).should be_a(Symbol) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:29:48.097

这不漂亮，但我认为这样的工作：

```
@corners.keys.should_be include @player_computer.defend_corners(myboard) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T05:24:43.603

2.5 小时后，答案是 (drum roll)....be_a(Symbol)

# javascript - 表格排序 jQuery

> ID：12985239
> 
> 赞同：0
> 
> 时间：2012-10-20T04:24:58.167
> 
> 标签：javascript, jquery, html-table

我有一个具有以下结构的表。

```
<table id="mytable" >

 <thead>
  <tr>
   <th>Name</th>
   <th>Age</th>
   <th>Details</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>David</td>
   <td>45</td>
   <td> <div class="sortCriteria">David</div> <div>More complex structure here</div> </td>
  </tr>
 </tbody>

</table> 
```

我知道有一些插件可以对表格进行排序，但我的表格结构有点复杂（有时它包含 iframe 或其他一些元素），所以几乎所有插件都无法工作/性能。

实际上我不想对`Details`所有`TD`值的字段进行排序，而只是取`sortCriteria`（忽略其他部分）。

我该如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:50:52.940

您是否尝试过使用表格分拣机。它是当今最通用的桌面分拣机。在此处阅读[文档](http://tablesorter.com/docs/)

# matlab - 如何使用 MATLAB 在 [2,5] 上生成随机变量 X？

> ID：12985248
> 
> 赞同：-3
> 
> 时间：2012-10-20T04:26:43.530
> 
> 标签：matlab, plot, random, histogram, uniform-distribution

我必须创建一个随机变量*X*均匀分布在 [2,5] 上并生成超过 10000 个样本。

然后我必须使用`histc()`or`hist()`函数估计 X 的概率密度函数，并用理论曲线绘制估计的 PDF。

我不知道如何用 MATLAB 解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T23:45:21.617

以下是有用功能和资源的链接：

*   [RAND](http://www.mathworks.com/help/matlab/ref/rand.html)：查找第一个示例以获取两个任意限制之间的随机数。您可以在函数本身中指定所需的随机样本数。
*   归一化的[HISTC](http://www.mathworks.com/help/matlab/ref/histc.html)应该给你一个概率分布函数。
*   如果你有统计工具箱，你可以做[MLE](http://www.mathworks.com/help/stats/mle.html)以获得最佳拟合均匀分布。

快乐的数据拟合！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-06T04:24:51.900

[`rand()`](https://www.mathworks.com/help/matlab/ref/rand.html)使用[0,1] 区间生成统一随机变量。然后用 移动它`a`并用 缩放（拉伸）它`b-a`。

```
N = 10000;
a = 2;      % lower bound
b = 5;      % upper bound
X = a + (b-a)*rand(N,1);    % X ~ Uniform(a,b) 
```

然后绘制样本分布和理论分布（[维基](https://en.wikipedia.org/wiki/Uniform_distribution_(continuous))）。

```
figure, hold on, box on
histogram(X,'normalization','pdf','DisplayName','Sample')
xRng = 2:.1:5;
plot(xRng,(1/(b-a))*ones(size(xRng)),'r--','LineWidth',2.8,...
    'DisplayName','Theoretical')
legend('show','Location','north','Orientation','horizontal')
xlabel('X')
ylabel('Probability Density') 
```

[![均匀分布](../Images/3a803dbea6be4e2183aa04171986e1e7.png)](https://i.stack.imgur.com/iDEid.png)

# python - 尝试使用 PyOpenGL 并遇到问题

> ID：12985250
> 
> 赞同：4
> 
> 时间：2012-10-20T04:27:06.747
> 
> 标签：python, pyopengl

我正在关注来自[http://pyopengl.sourceforge.net/context/tutorials/shader_1.xhtml的教程](http://pyopengl.sourceforge.net/context/tutorials/shader_1.xhtml)

问题是我使用的是 PyOpenGL 3.0.2，当我从 python3.2 导入 OpenGL 时，它工作得非常好。我只是找不到让 OpenGL 上下文适用于 python3.2 的方法：

```
from OpenGLContext import testingcontext 
```

...和错误...

```
No module named "OpenGLContext" 
```

我一直在谷歌上搜索，找不到任何东西。我只想按照教程，但使用 python3。希望有人可以帮助我弄清楚如何克服这个问题。

非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T17:31:31.537

只是一些额外的信息。我尝试使用 pip 1.5.6 安装 Milliams 建议的软件包并遇到`"Could not find a version that satisfies the requirement <package name>"`错误。

我不得不使用`--pre`pip install 的选项来允许它安装。显然它们是预发布版本（参考：[这篇文章](https://stackoverflow.com/questions/18230956/could-not-find-a-version-that-satisfies-the-requirement-pytz "这个帖子")）。

另外，我发现我必须安装枕头（`pip install pillow`），因为 OpenGLContext 在导入期间抱怨它需要 PIL 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T13:01:03.440

似乎您没有安装 OpenGLContext。它可以作为 PyOpenGL 的单独包提供，根据[安装文档](http://pyopengl.sourceforge.net/documentation/installation.html)，您可以使用

```
pip install PyDispatcher PyVRML97 OpenGLContext 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-08T13:49:11.873

对其他人在这里登陆有帮助：mfletcher 制作了“OpenGLContext”和它依赖于“PyOpenGL”的包。（请注意，运行“PyOpenGL 3.x”并不*意味着*运行在“python3.x”上的代码。）关于它的依赖，“OpenGLContext”：尽管合理尝试让它在 python3.x 中运行（例如“ 2to3'转换器和几个小时），我放弃了。MFletcher 的代码很棒，目前最好的选择似乎是密切关注他对其准备就绪的明确确认（例如在 'pyopengl.sourceforge.net/context/index.html' 或精确的类别标签'Programming Language ::Python::3'; 在 pypi.python.org/pypi/OpenGLContext/2.2.0a2 页面上）

顺便说一句：在 Ubuntu 12.04 上，我记得 'pip-3.2 install OpenGLContext' 愉快地将它安装到 '/usr/local/lib/python3.2/dist-packages' 中没有明显的抱怨——考虑到 apt 和其他现代的*nix 安装公民在处理无法解决的依赖项时通常表现得很好

# spring - 运行时tomcat和spring web app错误

> ID：12985256
> 
> 赞同：0
> 
> 时间：2012-10-20T04:28:21.060
> 
> 标签：spring, tomcat

当我尝试运行我的应用程序时，我收到以下错误：我检查了我所有的 jar 文件，它们都很好，web.xml 也很好..我有什么遗漏..!!!

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:184)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:44:47.407

下载[commons-logging](https://commons.apache.org/logging/download_logging.cgi)并将 jar(s) 放在 WEB-INF/lib 中。把它放在类路径（本例中为WEB-INF/lib）

# core-animation - 根据速度计算图像视图动画的旋转

> ID：12985258
> 
> 赞同：0
> 
> 时间：2012-10-20T04:28:45.507
> 
> 标签：core-animation, velocity, image-rotation

我正在使用 60 张图像创建动画，并创建通过触摸移动事件执行的动画。我也在计算触摸移动点的速度（速度）。

现在我想执行动画，如果速度很快，那么动画图像会像循环一样旋转，并根据时间和速度自动停止。

如果有人知道如何计算以及如何管理这些有趣的东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:58:37.640

所以你想模拟摩托车倾斜成曲线的方式？你需要计算角动量。看看这篇维基文章：

[角动量维基文章](http://en.wikipedia.org/wiki/Angular_momentum)

# c# - 用于打印 WinForm MSChart 的示例 C# 代码

> ID：12985264
> 
> 赞同：1
> 
> 时间：2012-10-20T04:30:10.757
> 
> 标签：c#, winforms, mschart

我一直在网上搜索一个简单的方法来打印我在 WinForm 上的 MSChart，但无济于事。有人可以给我一些信息或将我指向包含示例 C# 代码以打印 MSChart 的资源吗？经过一个多小时的网络研究，我什至不知道从哪里开始。我还想声明我对打印文本和水晶报告以外的任何内容都很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:26:15.153

此[代码项目文章](http://www.codeproject.com/Articles/65803/A-Guide-to-using-MSChart-for-NET)包含显示如何打印图表的部分。
这个[stackoverflow问题](https://stackoverflow.com/questions/4136158/c-sharp-ms-chart-what-is-the-best-way-to-print-a-chart)也是。

# ruby-on-rails - 将“published_at”字段添加到具有“已发布”布尔字段的 Post 模型

> ID：12985265
> 
> 赞同：3
> 
> 时间：2012-10-20T04:30:55.483
> 
> 标签：ruby-on-rails, model

我的 Post 模型有一个名为“已发布”的布尔值：

*架构.rb：* *

```
 create_table "posts", :force => true do |t|
    t.string   "title"
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at",                            :null => false
    t.datetime "updated_at",                            :null => false
    t.boolean  "published",          :default => false
  end 
```

如果为真，则帖子被视为已发布，并出现在用户个人资料的已发布部分，如果为假，则显示在草稿部分（对不起，但我不确定如何处理代码重复）。

**post_controller.rb：**

```
class PostsController < ApplicationController
  before_filter :authenticate_user!, :except => [:show, :index]

  def index
    @posts = Post.all
  end 
```

ETC...

**users_controller.rb：**

```
class UsersController < ApplicationController
  def index
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
    @posts = @user.posts
  end 
```

ETC...

**_shared/posts.thml：**

```
 <h2>Published</h2>
    <% @posts.each do |post| %>
      <% if post.published? %>
        <div id="post-<%= post.id %>" class="post">
          <%= image_tag post.image.url(:medium) %>
          <h2 class="post-title"><%= link_to post.title, post %></h2>
          <%= link_to post.user.email, post.user %>
          <p><%= post.content %></p>
        </div>
      <% end %>
    <% end %>

    <h2>Draft</h2>
    <% @posts.each do |post| %>
      <% if not post.published? %>
        <div id="post-<%= post.id %>" class="post">
          <%= image_tag post.image.url(:medium) %>
          <h2 class="post-title"><%= link_to post.title, post %></h2>
          <%= link_to post.user.email, post.user %>
          <p><%= post.content %></p>
        </div>
      <% end %>
    <% end %> 
```

例子：

**users.html.erb：**

```
<h2>User Show</h2>
<%= image_tag @user.avatar.url(:medium) %>
<span>Email: <%= @user.email %></span><br />
<span>ID: <%= @user.id %></span><br />

<%= render 'shared/posts' %> 
```

**index.html.erb**

```
<%= render 'shared/posts' %> 
```

（我知道这些观点有点混乱。我想稍后我会在每个帖子草稿旁边显示一个文字，上面写着“草稿”）。

问题是帖子将按`created_at`日期排序。我希望它们按`published_at`帖子索引页面中的日期排序（我认为这更有意义）。

**我知道如何`published_at` `t.datetime`通过迁移添加字段。但我不确定该`published_at`领域的逻辑使用什么代码。**

有什么建议么？

（顺便说一句，哪个听起来更正确？' `published_at`'还是' `published_on`'？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T05:02:32.757

添加您的表格`published_at`（日期时间）字段。当你发布然后更新 published_at 字段，然后当你获取数据时使用`order('published_at Desc')`

```
@posts =  @users.posts.order('published_at DESC') 
```

控制器中的逻辑

```
if params[:post][:published] == true # whatever you got in controller rather than params[:post][:published]
   @post.published_at = Time.now
else
  @post.published_at = ""
end 
```

这意味着，当`published`值为 true 时，上面的代码在您的控制器中执行，并在您的 published_at 字段中添加值 Time.now，如果 published 的值为 false，则上面的代码不执行，因此`published_at`字段具有空白值。

或者，通过使用类似的模型

```
before_save :published_post

def published_post
  if self.published == true
   self.published_at = Time.now
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:59:39.070

您应该能够调整控制器：

```
def show
  @user      = User.find(params[:id])
  posts      = @user.posts.order('published_at').group_by(&:published)
  @published = posts[true]
  @drafts    = posts[false]
end 
```

然后您可以使用`@published`and`@drafts`来生成您的列表。如果您首先想要最近发布的，那么：

```
posts = @user.posts.order('published_at desc').group_by(&:published) 
```

# spring - Spring + JPA + Hibernate 应用程序的最佳审计跟踪机制

> ID：12985269
> 
> 赞同：0
> 
> 时间：2012-10-20T04:31:26.173
> 
> 标签：spring, hibernate, jpa-2.0

我正在使用 Spring 3.0 + JPA2 + Hibernate 4.1 和 MySQL 5.5 我希望在我的表中记录 5 个字段以用于审计跟踪目的 - lastModifiedByUser、lastModifiedTime、createdByUser、createdTime、isActive

我没有从表中删除任何数据，只是将它们标记为 isActive false。

帮助我在表格中记录这些审计字段的最佳工具是什么？我想知道数据库触发器是否不是最好的主意，特别是因为还记录了修改/创建用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:34:08.377

查看 Envers，它就是为此而构建的，并且是 Hibernate 4.x 的一部分。您只需向您的类添加一个 @Audited 注释，它会自动处理您的实体的版本控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:35:23.480

不确定最近的工具，但很久以前我就可以使用拦截器来做到这一点。

您可能还想在 Entity 类中映射审计列。在将实体对象持久化到数据库之前，定义一个拦截器以在实体对象中填充这些属性。

示例 Audit 拦截器详细信息可在 hibernate 中获得：[**Hibernate Interceptors: Audit**](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)。请按照步骤完成所需的工作。

# twitter-bootstrap - Twitter引导模式通过javascript

> ID：12985271
> 
> 赞同：1
> 
> 时间：2012-10-20T04:31:56.980
> 
> 标签：twitter-bootstrap

我有按钮切换模式格式，但我想做的是在用户未登录并单击标题中的选项卡时通过淡入启动模式。下面是我的代码。当我按下按钮时它可以工作，但是当我单击选项卡时没有任何反应。单击并且未记录用户时应该触发模式的内容。

```
<script type="text/javascript">

<?php if($_SESSION['logged_in']){ ?>

cssdropdown.startchrome("chromemenu")

cssdropdown.startchrome("chromemenu1")

<?php } else{?>

   $(document).ready(function() {
      $("#myModal").modal('show')  
   });
 });

 <?php } ?>

 </script> 
```

```
<div style="display:none;" class="modal hide fade " id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

好的，我设法让它工作，忘记了选项卡中的 data-target="#myModal" 。

# javascript - 如何在里面获取文本框值使用 jquery 标记

> ID：12985277
> 
> 赞同：0
> 
> 时间：2012-10-20T04:33:01.697
> 
> 标签：javascript, jquery, html

这是我的html代码：

```
<div class="viewPopup login-popup"  id="login-box">
     <a href="#" class="close"><img src="images/close.png" class="btn_close" title="Close Window" alt="Close" /></a>
     <h6 class="h6">Task Name</h5>
     <div class="info">
      <p class="name">Assigned to </p>
      <p class="cont1"> Kumar</p>
     </div>
     <div class="info">
      <ul>
      <li><p class="name">Task </p></li>
      <li><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec condimentum est ut dolor aliquam sit amet suscipit urna vehicula. Nunc dolor massa, viverra commodo gravida sed, sodales et metus. Maecenas lacinia facilisis semper. Pellentesque ac tellus lacus.</p></li>
      </ul>

     </div>
     <div class="info">
      <p class="name">Starting Date </p>
      <p class="cont1"> 19/12/2012</p>
     </div>

     <div class="info">
      <p class="name">Ending Date </p>
      <p class="cont1"> 22/12/2012</p>
     </div>
</div>

<a href="#login-box" class="login-window" title="View">
    <input type="text" name="review_id" id="review_id" value="10" />
    <img src="images/eye.png" >
</a>
<a href="#login-box" class="login-window" title="View">
                        <input type="text" name="review_id_txt" id="review_id_txt" value="10" />
                        <img src="images/eye.png" >
                   </a> 
```

这是我的jQuery代码：

```
// JavaScript Document
$(document).ready(function() {
    $('a.login-window').click(function() {

                //Getting the variable's value from a link 
        var loginBox = $(this).attr('href');

        //Fade in the Popup
        $(loginBox).fadeIn(300);

        //Set the center alignment padding + border see css style
        var popMargTop = ($(loginBox).height() + 24) / 2; 
        var popMargLeft = ($(loginBox).width() + 24) / 2; 

        $(loginBox).css({ 
            'margin-top' : -popMargTop,
            'margin-left' : -popMargLeft
        });

        // Add the mask to body
        $('body').append('<div id="mask"></div>');
        $('#mask').fadeIn(300);

        return false;
    });

    // When clicking on the button close or the mask layer the popup closed
    $('a.close, #mask').live('click', function() { 
      $('#mask , .login-popup').fadeOut(300 , function() {
        $('#mask').remove();  
    }); 
    return false;
    });
}); 
```

在这里，我想获取该 jquery 代码中的文本框值。

这意味着标签`review_id`中包含一个文本框。`<a></a>`

所以我想通过使用这个`标签来获取文本框的值。

我知道这段代码：

```
$("#review_id").val(); 
```

但我实际上得到了基于此的文本框值`<a>`。

我怎样才能做到这一点？

是否可以？

编辑：

```
<?php for($i=0;$i<5;$i++){?>
<a href="#login-box" class="login-window" title="View">
                        <input type="text" name="review_ids" id="review_<?php echo $i;?>" value="<?php echo $i;?>" />
                        <img src="images/eye.png" >
                   </a> 
```

这会创建 5 个`<a>`标签和 5 个文本框。那么我怎样才能获得`review_ids`文本框的值...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T04:47:44.670

试试这样：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html" />
    <meta name="author" content="gencyolcu" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
 $('a.login-window').click(function() {
          var valuet=   $(this).find("#review_id").val();
          alert(valuet);
});
</script>
    <title>Untitled 1</title>
</head>

<body>

<a href="#login-box" class="login-window" title="View">
                        <input type="text" name="review_id" id="review_id" value="10" />
                        <img src="images/eye.png" >
                   </a>

<a href="#login-box" class="login-window" title="View">
                        <input type="text" name="review_id" id="review_id" value="10" />
                        <img src="images/eye.png" >
                   </a>

<a href="#login-box" class="login-window" title="View">
                        <input type="text" name="review_id" id="review_id" value="10" />
                        <img src="images/eye.png" >
                   </a>

<a href="#login-box" class="login-window" title="View">
                        <input type="text" name="review_id" id="review_id" value="10" />
                        <img src="images/eye.png" >
                   </a>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:36:18.063

试试看

```
$(".login-window").find("#review_id").val() 
```

[**提琴手**](http://jsfiddle.net/n4QLn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:34:51.883

你错过了锋利的

```
$("#review_id").val(); 
```

# c - sqlite3 编程在 Linux C 中“内存不足”

> ID：12985280
> 
> 赞同：0
> 
> 时间：2012-10-20T04:33:54.850
> 
> 标签：c, database, linux, sqlite

我的代码很简单，只创建一个空表。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <sqlite3.h>

int main(int argc, char *argv[])
{
    sqlite3 *ppdb;
    int retval;

    retval = sqlite3_open_v2("v2.db", &ppdb, 
                        SQLITE_OPEN_CREATE, "unix-none");
    if (retval != SQLITE_OK)
    {
        printf(stderr, "%s\n", sqlite3_errmsg(ppdb));
        return 1;
    }
    retval = sqlite3_exec(ppdb, 
             "CREATE TABLE IF NOT EXISTS userinfo \
             (id TEXT PRIMARY KEY, pass TEXT NOT NULL)",
             NULL, NULL, NULL);
    if (retval != SQLITE_OK)
    {
        fprintf(stderr, "%s\n", sqlite3_errmsg(ppdb));
        return 1;
    }
    sqlite3_close(ppdb);
    return 0;
} 
```

但是当我运行它时，我收到了这个错误信息：

`Out of memory`

我调试这段代码，我发现`sqlite3_open_v2`已经返回`21`（库使用不正确）

如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T04:43:10.787

来自[精美手册](http://www.sqlite.org/c3ref/open.html)：

> `flags`参数 to可以采用`sqlite3_open_v2()`以下三个值之一，[...]：
> 
> `SQLITE_OPEN_READONLY`
> 数据库以只读模式打开。如果数据库尚不存在，则返回错误。
> 
> `SQLITE_OPEN_READWRITE`
> 如果可能，打开数据库进行读取和写入，或者仅在文件受操作系统写保护时才读取。无论哪种情况，数据库都必须已经存在，否则返回错误。
> 
> `SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE`
> 数据库以读写方式打开，如果不存在则创建。这是始终用于`sqlite3_open()`和的行为`sqlite3_open16()`。

所以你不能使用 just ，如果你想让它创建文件`SQLITE_OPEN_CREATE`，你需要包含这个位：`SQLITE_OPEN_READWRITE`

```
retval = sqlite3_open_v2("v2.db", &ppdb,
                    SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, "unix-none"); 
```

# javascript - 使用 jquery ui 发布序列化数据

> ID：12985281
> 
> 赞同：1
> 
> 时间：2012-10-20T04:34:05.660
> 
> 标签：javascript, jquery, post, serialization

我有一个发布序列化列表的简短脚本。它在 Firefox 中运行，但不是 chrome 或 explorer，它们都在传递一个空帖子：

```
 $_POST['list'] == '' 
```

这是下面的代码。

```
<script>
$(function() {
    $( "#sortable" ).sortable({
        update: function(event, ui){
            var postdata = $(this).sortable('serialize');
            console.log(postdata);

            $.post('packages.php', {list: postdata}, function(o) {
            console.log(o);
            }, 'json');
        }
    });
});
</script>
header and body content

<a href='somelink here'>
<div id='item_1'>
content....
</div>
</a>
<a href='somelink here'>
<div id='item_2'>
content....
</div>
</a>
<a href='somelink here'>
<div id='item_3'>
content....
</div>
</a>
html valid end of page 
```

谁能告诉我我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:23:16.840

问题很可能与在您的 div 周围包装链接有关。那是无效的 html，可能会在不同的浏览器中导致不同的结果。虽然仍然无效，但如果您将 id 放在链接上，它可能会起作用。如果没有，您可能必须找到一种不同的方法来使您的 div 可链接。

简而言之，改变：

```
<a href"somelink.html"><div id="item_1">
content....
</div></a> 
```

到

```
<a id="item_1" href"somelink.html"><div>
content....
</div></a> 
```

# android - 如何在状态栏上显示/隐藏 GPS 图标？

> ID：12985287
> 
> 赞同：0
> 
> 时间：2012-10-20T04:35:16.093
> 
> 标签：android, gps, android-notification-bar

如果启用/禁用（相同的图标），我想在我的应用程序中**显示/隐藏**一个图标。`gps``status bar``GPS``Wifi`

我想在我的应用程序运行时查看 GPS 启用或禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:54:11.253

它会在错误的一侧，并且会在下拉菜单中创建一个条目，但是您可以创建一个持续的通知，该通知将显示一个图标（尽管它不会动画），直到您告诉它停止。

# javascript - 如何阻止 jQuery 对话框重叠？

> ID：12985293
> 
> 赞同：-2
> 
> 时间：2012-10-20T04:36:22.987
> 
> 标签：javascript, html, jquery-ui, draggable, jquery-ui-dialog

我发现当一个页面上打开多个 jQuery 对话框时，它们很容易重叠。

我将如何通过内置的 jQuery UI 功能或自定义代码来阻止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:47:07.743

你需要改变**CSS** `z-index`值。例如，您一次调用了三个模式窗口，每个窗口都有一个共同`class`的和唯一的`id`. 这样说：

```
<div class="jqui-modal" id="firstModal">
...
</div>

<div class="jqui-modal" id="secondModal">
...
</div> 
```

现在你可以选择哪个是第一个。说，我想要`#firstModal`在 之上`#secondModal`，你可以使用这段**CSS**代码：

```
#firstModal {z-index: 1599;}
#secondModal {z-index: 1500;} 
```

如果您希望所有模态窗口出现在相同的坐标上，试试这个：

```
.jqui-modal {z-index: 1600;} /* One single Z-Index for all */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:46:32.050

您可以使用 CSS`z-index;`属性将堆叠的对话框显示为如何显示它们。

# java - Java：MouseListeners 和返回对象

> ID：12985295
> 
> 赞同：1
> 
> 时间：2012-10-20T04:36:43.430
> 
> 标签：java, awt, mouselistener, acm-java-libraries

所以我设置了这个简单的 MouseListener。我想让它告诉我我指向的对象。但它似乎不适用于 GObjects，它是 acm 库的一部分，包括 GRects、GLabels 等......它只返回给我 GCanvas 本身（这是对象被“绘制”的画布）。任何人都知道这是为什么？

```
public void mouseDragged (MouseEvent e){
        println (e.getComponent());} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:45:07.277

A可以附加 [`GCanvas`](http://jtf.acm.org/javadoc/student/acm/graphics/GCanvas.html)到[`Container`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html)其上。[`MouseListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)

[`GObject`](http://jtf.acm.org/javadoc/student/acm/graphics/GObject.html)OTOH 扩展[`Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)，并且不能固有地`MouseListener`附加。

（在屏幕上绘制的形状的边界不是鼠标侦听器识别的“组件”。）

# objective-c - Objective C 中的旋转问题

> ID：12985297
> 
> 赞同：0
> 
> 时间：2012-10-20T04:37:34.210
> 
> 标签：objective-c, xcode

在我的应用程序中，从滚动视图拖放图像视图。放下后，当用户触摸我放下的东西时，我想分别旋转图像。在这里，我只能旋转最后拖动的图像。我无法旋转以前拖动的图像。我在移动到旋转的触摸中使用此代码

```
[myview setTransform:CGAffineTransformRotate([myview transform], angleInRadians)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:55:23.420

你可以使用 UIRotationGestureRecognizer

```
UIRotationGestureRecognizer *rotationGesture = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];
rotationGesture.delegate=self;
[YourImageview addGestureRecognizer:rotationGesture];

- (void)rotatePiece:(UIRotationGestureRecognizer *)gestureRecognizer
 {
     [self adjustAnchorPointForGestureRecognizer:gestureRecognizer];

if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
    [gestureRecognizer view].transform = CGAffineTransformRotate([[gestureRecognizer view] transform], [gestureRecognizer rotation]);
    [gestureRecognizer setRotation:0];
}
} 
```

# c++ - c++ Multiple Inheritance - 编译器修改我的指针

> ID：12985299
> 
> 赞同：4
> 
> 时间：2012-10-20T04:37:56.713
> 
> 标签：c++, multiple-inheritance, unions

如果我运行以下代码，我会打印出不同的地址。为什么？

```
class Base1 {
    int x;
};

class Base2 {
    int y;
};

class Derived : public Base1, public Base2 {

};

union U {
    Base2* b;
    Derived* d;
    U(Base2* b2) : b(b) {}
};

int main()
{
    Derived* d = new Derived;

    cout << d << "\n";
    cout << U(d).d << "\n";

    return 0;
} 
```

更有趣的是，如果你反复进出联合，地址会不断增加 4，就像这样

```
int main()
{
    Derived* d = new Derived;

    cout << d << "\n";
    d = U(d).d;
    cout << d << "\n";
    d = U(d).d;
    cout << d << "\n";

    return 0;
} 
```

如果像这样修改联合，那么问题就消失了

```
union U {
    void* v;
    Base2* b;
    Derived* d;
    U(void* v) : v(v) {}
}; 
```

此外，如果任一基类为空，问题就会消失。这是编译器错误吗？我希望它不要管我的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:52:21.487

> 如果我运行以下代码，我会打印出不同的地址。为什么？

因为对象的`Base2`子`Derived`对象不在对象的开头`Derived`。所以地址不一样。当编译器执行从 a`Derived*`到 a的隐式转换时`Base2*`，它需要调整地址。

鉴于 和 类的定义，`Base1`类`Base2`的两个子对象`Derived`不可能位于`Derived`对象的起始地址——在该地址处没有空间容纳两个子对象。

假设您有以下代码：

```
Derived* d = new Derived;

Base1* pb1 = d;
Base2* pb2 = d; 
```

`pb1`和`pb2`指向同一个地址怎么可能？`pb1`必须指向一个`Base1::x`项目，并且`pb2`必须指向一个`Base2::y`项目（并且这些项目必须是不同的）。

> 更有趣的是，如果你反复进出联合，地址会不断增加 4

因为您`d`在编写成员后从工会成员中读取`b`，这是未定义的行为（您实际上是在执行类似 a `reinterpret_cast<Derived*>()`on a 的操作`Base2*`）。

> 我希望它不要管我的指针。

如果你想要一个`Base2*`指针，则不是。多重继承使事情变得更加复杂——这就是为什么许多人建议避免它，除非绝对必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T04:53:40.197

联合构造函数从不初始化成员 d

联合构造函数有一个错误，它不是使用参数 b2 初始化成员 b，而是使用自身初始化 b

```
// b(b) should probably be b(b2)
U(Base2* b2) : b(b) {} 
```

当您的第一个主函数示例尝试构造 U 的实例并打印成员 d 时，它实际上是在打印未定义的值，因为成员 d 尚未初始化，并且不能保证可访问。

```
// U(d) doesn't construct member d, so .d returns an undefined value
cout << U(d).d << "\n"; 
```

关于您的第二个主要功能示例

```
// d is set to a newly constructed instance of Derived
Derived* d = new Derived;

// current address of d is printed
cout << d << "\n";

// a new instance of U is constructed. The address of member d will be in close
// proximity to the newly initialized U instance, and is what will be printed
d = U(d).d;
cout << d << "\n";

// yet another new instance of U is constructed, and again, the address of member
// d will be in close proximity to the newly initialized U instance, and is
//what will be printed
d = U(d).d;
cout << d << "\n"; 
```

# python - 是否可以在 Python 的方法中包含函数？

> ID：12985300
> 
> 赞同：0
> 
> 时间：2012-10-20T04:38:05.950
> 
> 标签：python, function, methods, functional-programming

如果是这样，你会怎么做。

def methodname(self, blah, blah) ^如何在其中放置一个函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T04:40:04.987

是的，你只是坚持一个`def`里面。你甚至可以在函数和方法中嵌套整个类：

```
class Foo(object):
    def method(self, bar):
        def inner(magic):
            class Madness(object):
                def __init__(inself, foo): inself.foo = foo
            return Madness(magic)
        return inner(bar) 
```

# android - 如何从列表视图中获取字符串并将其发送到文本视图上的另一个活动

> ID：12985303
> 
> 赞同：1
> 
> 时间：2012-10-20T04:38:58.420
> 
> 标签：android, android-layout, android-listview, textview

```
ListView lv;
String values[] = new String[]{"Hello How r u","I am Fine"};
lv=(ListView)findViewById(R.id.listView1);
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, festival);
lv.setOnItemClickListener(new OnItemClickListener() { 
    public void onItemClick(AdapterView<?> arg0,View arg1,int position,long arg3) {
        if(position==0) {
            Intent i=new Intent(MainActivity.this ,SharingActivity.class );
            i.putExtra("extra", values[0]);
            startActivity(i);
        }
    }
}

lv.setAdapter(adapter); 
```

嗨，这是我的 MainActivity。我想使用 Intent 向 SharingActivity 发送“Hello How are you”。如何？在SharingActivity 中，我有一个TextView。我想在 TextView 上打印此消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:18:07.257

> 您可以将此代码用于其他活动。

```
 Bundle extras = getIntent().getExtras();
    String mValue = extras.getString("profileId");
    TextView textView = new TextView(context);
    textView.setText(mValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:56:10.520

你已经在意图中添加了字符串“你好吗”。所以现在你只需要在你的`SharingActivity`:---

```
TextView textView = (TextView) this.findViewById(<ur textview id>);
String urText = getIntent.getExtras().get("extra");
textView.setText(urText); 
```

# macos - 打开终端进程退出后无法再次访问终端

> ID：12985304
> 
> 赞同：25
> 
> 时间：2012-10-20T04:39:00.850
> 
> 标签：macos, terminal

我在 Mac OS X 上

我想为 zsh shell 安装一个扩展——> Oh-my-zsh：

我使用 Iterminal 运行了以下命令：

```
ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)"
sudo sh -c "echo '/usr/local/bin/zsh' >> /etc/shells" 
```

在上述命令之后，进程阻塞，我无法将当前 shell 更改为 zsh shell

```
chsh -s /usr/local/bin/zsh 
```

在此之后，我关闭了 iTerminal，重新启动它，但它不会真正加载。单击应用程序会打开 iTerminal 窗口一秒钟，然后再次关闭。

常规终端窗口也会发生同样的情况。我单击终端打开的应用程序，但收到以下消息：

```
login: /usr/local/bin/zsh: No such file or directory 
```

似乎前面的命令破坏了终端加载正确外壳的加载方向被搞砸了。

有谁知道我如何在无法访问终端窗口的情况下将其重置为以前的 shell。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-16T03:48:07.837

尝试后我解决了这个问题。要永久更改您的默认终端外壳：

1.  从终端菜单中选择首选项。

2.  选择选项“执行此命令（指定完整路径）：”

3.  从 /bin/tcsh 更改选定的文本条目以反映不同的终端 shell，例如：

    ```
     /bin/bash 
     /bin/csh 
     /bin/zsh 
     /bin/zsh-4.0.4 (Mac OS X 10.2.8 or earlier) 
     /bin/zsh-4.1.1 (Mac OS X 10.3 or later) 
     /bin/ksh (Mac OS X 10.4 or later) 
    ```

4.  关闭终端首选项窗口。

5.  退出并再次打开终端。第一个和随后的新终端窗口使用您在首选项中指定的外壳打开。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-04-27T04:04:01.463

在 MAC 上：

1.  转到“系统偏好设置”>“用户和组”
2.  单击“锁定”图标并进行身份验证
3.  右键单击您的用户图标并选择“高级选项”
4.  将“登录 shell”的值更改为 /bin/bash

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-22T15:29:06.030

只需从终端菜单中选择首选项，然后选择使用“命令（完整路径）”打开的选项外壳，然后键入以下路径：

/bin/bash

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-02-22T14:53:43.440

可能需要先安装 zsh；

```
brew install zsh 
```

# jquery - 弹出js代码不起作用

> ID：12985305
> 
> 赞同：0
> 
> 时间：2012-10-20T04:39:04.550
> 
> 标签：jquery, html, css, jquery-ui

我正在尝试实现一个弹出窗口。当我单击选择国家/地区时，应显示一个弹出窗口

这是我要复制的内容的链接

[http://www.teslamotors.com/](http://www.teslamotors.com/)

我在我的 JSFiddle 中尝试了相同的 JS 代码，但不知道出了什么问题。

[http://jsfiddle.net/6QXGG/2/](http://jsfiddle.net/6QXGG/2/)

```
// locale selector actions
$('#region-picker').click(function(){
    var foot_height = $('#footer').innerHeight();
    var foot_height_css = foot_height-12;
    var select_position = '-=' + (Number(400)+18);
    var $selector = $('#locale-select');
    $('#locale_pop').fadeOut();
    $selector.css({top:foot_height_css});
    $selector.fadeIn(function(){
        $(this).addClass('open');
        $(this).animate({top:select_position}, 1000);
        });
});

$('#footer').fadeIn(function(){
    var select_label_width = $('#region-picker .locale-select-lable').outerWidth()+8;
    $('#region-picker').width(select_label_width);
    $('#select-tab').width(select_label_width);
    // // check to see if we need to show the locale blip
    // moved to document.ready
    // checkCookie();
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:30:49.363

不知道代码有什么问题，也许你可以尝试一些像theis这样的插件，

[http://needim.github.com/noty/](http://needim.github.com/noty/)

# javascript - Javascript没有在网站上加载？

> ID：12985306
> 
> 赞同：0
> 
> 时间：2012-10-20T04:39:46.033
> 
> 标签：javascript, jquery, html, css, countdowntimer

出于某种原因，我的代码等在本地工作，但是当我上传它时，javascript 根本不起作用。它几乎就像是一个只有一些样式的空白页面。

该站点位于以下 URL： http: [//www.countdown2zodiac.com/](http://www.countdown2zodiac.com/)

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:42:22.117

你检查你有正确的目录中的文件吗？我试图访问您的 jquery 文件并且服务器说文件不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:43:22.913

如果你检查控制台，它会告诉你它找不到文件

```
GET http://www.countdown2zodiac.com/js/counter.js 404 (Not Found) http://www.countdown2zodiac.com/:24
GET http://www.countdown2zodiac.com/js/jquery-1.3.2.min.js 404 (Not Found) 
```

所以要么您将其上传到错误的目录中，要么服务器无法访问文件，因此您可能应该检查访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:44:56.903

请修正以下错误。都是404，没找到：

![在此处输入图像描述](../Images/ace2da926fe9e3038f84341017bbb13a.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T04:45:54.183

你的两个js函数有问题

```
http://www.countdown2zodiac.com/js/jquery-1.3.2.min.js"
http://www.countdown2zodiac.com/js/counter.js" 
```

浏览器不知何故无法找到它

# php - 如何使用 jQuery .ajax 将参数传递给类 php

> ID：12985312
> 
> 赞同：1
> 
> 时间：2012-10-20T04:40:46.917
> 
> 标签：php, jquery, ajax, wordpress

我有下一个类 php：

```
class Job{

    public $resultado;
    public $busqueda;
    public $wpdb;

    public function __construct($busqueda){
        global $wpdb;
        $this->busqueda = $busqueda;
        $this->resultado = array();
        $this->wpdb = $wpdb;
    }   

    public function search_job($resultado){
        $tablepost =$this->wpdb->prefix.'posts';
        $query = "SELECT * from $tablepost WHERE post_type = 'jobman_job' and post_status='publish';";

        if (isset($wpdb)) {
            global $wpdb;
            $result = $wpdb->get_results($query);
        }else{
            $result = $this->wpdb->get_results($query);
        }

        print_r($result);
    }

} 
```

这发现没问题。现在我想用 jQuery .ajax 调用 search_function 我试试这个：

```
(function($){

    $('#searchjob').keypress(function(e){
        var search = $.trim($('#searchjob').val());

        if (e.which == "13") {

            $.ajax({
                beforeSend: function(){
                    //$('#loading').html(<img src="rutagif" alt="loading" />);
                },
                url:"../wp-content/themes/SUP2012/class/job.php",
                data:{method: 'search_job', data:{resultado: 'hola'}},
                type: "POST",
                success: function(data){

                }

            }); 
        };

    });

 })(jQuery); 
```

url 参数响应正常（200 OK），但不检索信息。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:56:30.373

要提出`ajax`请求，`wordpress`您应该使用 in`functions.php`

```
add_action('wp_ajax_nopriv_your_function_name', 'your_function_name');
add_action('wp_ajax_your_function_name', 'your_function_name');
function your_function_name()
{
    // do anything here and echo the result
    $data_from_ajax=$_POST['data_to_send_to_server'];
    die(); // last line 
} 
```

javascript应该看起来像

```
$('#searchjob').keypress(function(e){
    var your_data = $.trim($(this).val());
    if (e.which == "13") {
        $.ajax({
            type:"POST",
            url: "./wp-admin/admin-ajax.php", // if this file is in a subfolder in your themes folder
            data: {
                action:'your_function_name', // the function name you used in functions.php
                data_to_send_to_server:your_data // retrieve from $_POST in php
            },
            success:function(data){
                // do something with data
            }
        });
    }
}); 
```

# u2netdk - 如何使用 U2 Toolkit for .NET、SSIS 和导入/导出向导将 U2 数据库移动到 SQL Server 2012？

> ID：12985313
> 
> 赞同：0
> 
> 时间：2012-10-20T04:41:11.167
> 
> 标签：u2netdk

我可以使用 U2 Toolkit for .NET（32 位/64 位）将 U2 数据库加载并传输到 SQL Server 2012 中吗？我想使用导入/导出向导和 Visual Studio 2010 SQL Server 商业智能开发工作室 (SSIS)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:26:14.730

# 你可以通过两种方式做到这一点：

 ****1.  32 位/64 位导入/导出 SQL Server 2012 向导

2.  使用 VS2010 BIDS 的 32 位/64 位 SQL Server 集成服务 (SSIS)**  ****使用导入/导出向导**

请参阅下面的屏幕截图

![在此处输入图像描述](../Images/ed9b1aeb85c456ddad06f513e4cfe316.png) ![在此处输入图像描述](../Images/07e85c89df92223442383d977064d4c1.png)

![在此处输入图像描述](../Images/f154b771059e078d341507fd16039ff2.png)

![在此处输入图像描述](../Images/ba0be8fa5a8f30b21aa56fb3dbb8b094.png)

![在此处输入图像描述](../Images/8a7d852903cf9a1d95577033e4e1ebc2.png)

![在此处输入图像描述](../Images/a34058052f01e258950fbd519a12c485.png)

![在此处输入图像描述](../Images/ac3a7cb660542e606459a38b603a37d2.png)

![在此处输入图像描述](../Images/6f436db5cba1785c21de2641047a752b.png)

![在此处输入图像描述](../Images/dc611f411fce9621821566083a3652bd.png)

![在此处输入图像描述](../Images/b5ca78083d058e2c585395df38752c25.png)

![在此处输入图像描述](../Images/f38921c8917c970274d052f1e62b1e21.png)

![在此处输入图像描述](../Images/cf299782570534aee73b96c568b9258f.png)

![在此处输入图像描述](../Images/6ce14085bcfea3783a653ff37358ab54.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:33:37.257

**使用 SSIS（SQL Server 2012 商业智能开发工作室和 VS2010）**

请参阅下面的屏幕截图：

![在此处输入图像描述](../Images/7c5da654ed80ecf631f49f0c899fe3d8.png)

![在此处输入图像描述](../Images/10cc7c0c013083a77faf329ade90a744.png)

![在此处输入图像描述](../Images/5018be8155b955e376b928f573fba97d.png)

![在此处输入图像描述](../Images/3e671f9eb5075d34eb9617ddf4c001c3.png)

![在此处输入图像描述](../Images/b838c42c76134d43a76eb7d9c429f689.png)

![在此处输入图像描述](../Images/666cb50ebddff69d2882696d5db35b47.png)

![在此处输入图像描述](../Images/01f97f438154f00f94bda25abd154228.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T16:21:40.243

U2 Toolkit for .NET v1.2.1 + 允许您将 U2 数据库（UniVerse 和 UniData）作为目标放在 SSIS 设计器或导入/导出向导中。

基本上，您可以将数据从 SQL Server（或任何数据源）移动到 U2 数据库中。

在此版本 (v1.2.1) 之前，U2 Toolkit for .NET 中的 INSERT 语句存在问题。现在已经解决了。****

# python - 计数 DNA 序列串中的核苷酸

> ID：12985316
> 
> 赞同：0
> 
> 时间：2012-10-20T04:42:09.477
> 
> 标签：python

我已经编写了这个函数，但它并没有像我想要的那样运行。请问有什么想法吗？我知道问题出在char定义上......

```
def count_nucleotides(dna, nucleotide):
    ''' (str, str) -> int

    Return the number of occurrences of nucleotide in the DNA sequence dna.

    >>> count_nucleotides('ATCGGC', 'G')
    2
    >>> count_nucleotides('ATCTA', 'G')
    0
    '''

    num_nucleodites=0

    for char in dna:
        if char is ('A'or'T'or'C'or'G'):
            num_nucleodites=num_nucleodites + 1      
    return num_nucleodites 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T04:46:47.007

刚刚呢

```
def count_nucleotides(dna, nucleotide):
    return dna.count(nucleotide) 
```

（请注意，就家庭作业而言，这可能不会飞......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:04:23.327

根据您的一条评论，您似乎正在寻找一个以上核苷酸的重叠序列。这可以通过正则表达式来完成：

```
import re
def find_overlapping(needle, haystack):
    return len(re.findall("(?=" + needle + ")", haystack)) 
```

然后你可以像这样使用它：

```
>>> find_overlapping("AGA", "AGAGAGAAGAGAG")
5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:43:56.140

你写的`or`条件不像你想的那样工作..它应该检查`char`它们中的每一个，然后用`or`它们来分隔它们，如下所示： -

```
if char is 'A' or char is 'T' ... so on: 
```

但是，您可以使用`in`运算符来使用更好的方法。

尝试这个： -

```
for char in dna:
        if char in 'ATCG':
            num_nucleodites=num_nucleodites + 1 
```

* * *

但是，由于您在您的文章`question`中说您只想要一个特定元素的计数，因此您不需要检查每个 char 和所有 4 个字符。这是您的代码使用基本 for 循环的样子：-

```
def count_nucleotides(dna, nucleotide):
    num_nucleotide = 0
    for char in dna:
        if char == nucleotide:
            num_nucleotide = num_nucletode + 1
    return num_nucleotide 
```

要不就： -

```
def count_nucleotides(dna, nucleotide):
    return dna.count(nucleotide) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-26T17:43:12.240

```
string = "ATAGTTCATGTACCGTTGCAGGGGG"
print [(i,string.count(i)) for i in list("ACTG")] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T04:54:33.470

```
if char is ('A'or'T'or'C'or'G'): 
```

这是评估`'A' or 'T'`哪个返回'A'，然后检查是否`char`等于它 - 在 Python REPL 中尝试它：

```
>>> ('A'or'T'or'C'or'G')
'A' 
```

我想你的意思是：

```
if char in ('A', 'T', 'C', 'G'): 
```

# php - Zend Server 在这里有用吗？

> ID：12985319
> 
> 赞同：0
> 
> 时间：2012-10-20T04:42:56.713
> 
> 标签：php, zend-server

我正在对一个非常复杂的 web 应用程序进行最后的润色，该应用程序将很快进入测试阶段。我的 PHP 编码风格涉及编写大量小脚本，这些脚本通过 require 语句在不同的“容器”脚本中重复使用。在过去，我使用 eAccelerator 来加速我的脚本，结果非常令人印象深刻（我通常得到 x 4 的改进）。但是，当前的应用程序处于不同的联盟，并且可能比我以前所做的任何事情都吸引更多的用户。我正在确定我可以在服务器上做什么，以提供流畅和快速的用户体验。我以前从未使用过 Zend Server（它的要价确实很高），所以我认为最好获得一些反馈，了解它是否可以帮助解决以下任何问题

*   继续使用我的“使用和重用的 PHP 脚本分数”编码风格和 mySQL 数据库。
*   提供更好的错误跟踪/错误报告/监控
*   加速性能
*   分析以识别我的代码中执行时间最长/可以通过调整等进行的位。

我刚刚下载了 Zend Server 的 Windows 试用版来试用我的本地 WAMP 安装。然而，一天仍然只有 24 小时，所以在我开始之前，知道我是否在这里吠叫错误的树会很有用。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:44:28.913

它可能会有所帮助，但不一定是最佳选择。

关于更好的错误跟踪和错误报告，这在很大程度上取决于您已经拥有的东西。如果您使用机械师很长时间并且习惯了它，通常更改它会导致一些问题或延迟，而且您的机械师可能是一个非常好的机械师。

关于*分数*，应该没有问题，因为您仍然会有文件使用记录。

关于剖析，这再次取决于您已经拥有的内容。

关于性能，我个人认为使用您已经提到的内容以及良好的编程实践并不会好得多，而且我不是在谈论脚本的微基准测试，而是正确使用循环，取消设置您没有的东西需要，避免循环，避免双重检查文件或外部资源等。

如果您在本地测试中发现了很大的改进，那么您可能决定使用它或花时间分析报告并确定是否可以通过更好的代码、使用缓存、更好的 .htaccess 或使用标头来实现改进或使用 Zend。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T08:11:55.590

在我看来，它绝对值得你一试。它具有一些独特的功能，您将无法通过其他配置/产品轻松获得这些功能，这些功能在未来可能会有所帮助。

为了解决您的观点：

*   继续使用我的“使用和重用的 PHP 脚本分数”编码风格和 mySQL 数据库。

    > > 您重复使用的包含文件肯定不会有问题。当我谈到性能时，会有更多细节。

*   提供更好的错误跟踪/错误报告/监控

    > > 是的。[代码跟踪](http://www.zend.com/en/products/server/zend-server-code-tracing)功能非常适合跟踪错误。通过管理界面，您可以在一个地方清楚地看到来自所有服务器的 PHP 错误消息，而无需挖掘日志文件。

*   加速性能

    > > 如果您启用字节码缓存，您将看到与 eAccelerator 一样的改进性能。字节码缓存将使加载您经常需要的脚本比让 PHP 在每个请求上解析它们要快得多。此外，您可以利用缓存 API 来缓存数据库查询的结果（本机无需设置诸如 Memcached 或文件缓存之类的东西）。

*   分析以识别我的代码中执行时间最长/可以通过调整等进行的位。

    > > 代码跟踪为您提供了其中一些在生产环境中特别有用的信息。但是您总是可以使用 XDebug 或 Zend Debugger 之类的东西来进行更高级的代码分析。

另一个不错的功能是[会话集群](http://files.zend.com/help/Zend-Platform/session_clustering.htm)。听起来不久之后您就需要运行多个 Web 服务器。当您确实做到这一点时，确保您的 PHP 会话对所有服务器都可用，并且您不必设置数据库或 memcached 会话处理程序，您可以使用 Zend Server 会话管理器来确保如果一个服务器出现故障，在该服务器上创建的任何会话数据都将可供其他服务器使用。

这并不是说您无法使用其他免费产品获得所有这些东西，但根据您的预算和时间表，它可以简化许多技术考虑并由一个产品管理，而不必支持多个产品来确保您的运行地点。如果这对您有价值，那么它可能值得考虑。

此外，您可以为支持支付额外费用。我没有 Zend 电话支持方面的经验，因此我无法对此发表评论，但您可以选择让某人提供帮助。

# sorting - 澄清“如果优先队列使用有序数组实现，则插入排序”，为什么需要“有序”？

> ID：12985327
> 
> 赞同：0
> 
> 时间：2012-10-20T04:44:41.460
> 
> 标签：sorting, data-structures, priority-queue, insertion-sort

插入排序也适用于无序数组，就像[这里](http://en.wikipedia.org/wiki/Insertion_sort#Best.2C_worst.2C_and_average_cases)的示例所示。出于某种奇怪的原因，标题（或[此处](http://en.wikipedia.org/wiki/Priority_queue#Equivalence_of_priority_queues_and_sorting_algorithms)）中的此语句要求您有一个有序数组来实现插入排序的优先级队列，为什么它有这样的要求？这个维基百科的意思是什么[（](http://en.wikipedia.org/wiki/Priority_queue#Equivalence_of_priority_queues_and_sorting_algorithms)下面的截图）？

![在此处输入图像描述](../Images/2915934d2bae191c4004e1e4cbfc7c0d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T04:53:44.540

本文介绍了优先级队列用于排序的用法，以及优先级队列的不同实现如何与熟悉的排序算法相对应。

让我们考虑具有操作的 ADT 优先级队列，`pop()`该操作取出由比较函数定义的“最小”元素`push()`，并将新元素放入优先级队列中。然后排序可以通过调用`push()`将未排序数组中的所有元素推入优先队列并调用`pop()`直到优先队列为空并将弹出的元素放入数组中来完成（好吧，您可以定义一个方法`empty()`来检查ADT是否为空的）。

伪代码：

```
unsorted[]
sorted[]
priority_queue q

foreach element in unsorted
    q.push(element)

i = 0
while !q.empty()
    sorted[i] = q.pop()
    i = i + 1 
```

然后我们谈谈如何实现优先级队列。通常，它通过堆有效地实现。但是，不必是堆 - 您可以以效率较低的方式实现它，如维基百科文章中提到的无序数组或有序数组。只要实现满足`push()`and`pop()`操作的要求就可以了。

对于无序数组，您可以`push()`将元素直接放在最后一个元素之后 - 因为它是*无序*的。当你`pop()`，由于数组是无序的，你需要搜索整个数组并挑选出最大的元素。（通过将无序数组中的最后一个元素交换到弹出元素的位置，可以轻松完成删除）。它类似于选择排序，因为您本质上是遍历未排序元素的列表（位于优先级队列中）并挑选出最大的元素放入已排序的部分。

可以看到`push()`这里的操作是在进行插入排序中的插入操作。

对于有序数组，您`pop()`只需取出第一个元素即可（通过维护起始索引可以轻松完成删除）。但是`push()`需要您找出放置元素的位置以保持顺序（因为它是*有序*数组）。这是它与插入排序非常相似的部分，因为您试图将当前元素插入到排序部分（优先级队列实现为有序数组）。

可以看到`pop()`这里的操作是在做选择排序中的选择操作。

# java - 用于实现 API 的 Java 与 PHP

> ID：12985331
> 
> 赞同：3
> 
> 时间：2012-10-20T04:45:00.120
> 
> 标签：java, php, api, rest, backend

我正在构建一个应用程序，它使用我正在编写的 API 提供的服务。我正在用 PHP 构建前端。它是一个社交网站。所以我的问题是，如果我在 Java 中实现后端 API（使用 RESTlet），或者我应该选择一个一切都在 PHP 中的全 PHP 解决方案，这有关系吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:45:58.577

您应该考虑[php-java-bridge。](http://php-java-bridge.sourceforge.net/pjb/)

![在此处输入图像描述](../Images/b26b50476e58ab1f07965f3d6e1d61d0.png)

和

![在此处输入图像描述](../Images/202599ca8aef607535e01ac392799133.png)

# java - 如何在jsp中创建一个函数

> ID：12985334
> 
> 赞同：1
> 
> 时间：2012-10-20T04:45:16.033
> 
> 标签：java, mysql, jsp, facebook-test-users, facebook-requests

我创建了一个名为 allmeters.jsp 的网页。在页面中我有一个超链接

```
<a href="demo.jsp?mid=<%=rs.getInt("meterid")%>"><%=rs.getInt("meterid")%></a> 
```

在我的第二个页面`demo.jsp`中，我有一个标签和搜索按钮，我`allmeters.jsp`通过使用访问标签值

```
<label name="name1" value="<%=request.getParameter("mid")%>">
     <font size="4">Meter ID : <%=request.getParameter("mid")%></font>
</label> 
```

我从中获得中等价值`allmeters.jsp.`

现在的问题是通过使用`mid`我想在单击按钮后从 MySql 表中检索数据的值。如何在 JSP 中创建函数以及如何使用 JSP 在按钮中调用该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:54:14.207

好吧，只需先将 mid 值传递给**servlet**，而不是直接将其传递给 jsp。**并使用中间**值在那里运行您的查询，并将结果发送到 arraylist 或根据您的结果发送到**demo.jsp**，然后打印它们。

或者

您可以简单地在页面中使用**scriptlet**本身来创建您的函数并获取值..但我不建议您这样做..请尝试第一种方法..

# cocos2d-iphone - 具有低延迟的 CCAnimation 未完成

> ID：12985335
> 
> 赞同：0
> 
> 时间：2012-10-20T04:45:22.657
> 
> 标签：cocos2d-iphone, kobold2d

我创建了一个 CCAnimation，如下所示。我尝试将延迟降低到 0.05f 以下，但动画现在无法完成！它只有 8 帧。我不知道我是否做错了什么。起初我认为这是内存泄漏，我正在丢失操作，所以我将它分配给一个强大的属性来测试它，并且仍然这样做了。我不确定延迟如何导致我的动画无法完成。我在模拟器中以每秒 60 帧的速度运行。

使用狗头人 2.0.4

任何人都可以帮忙吗？

```
else if([model currentState] == PROCESSING_FIRST_ACTION)
        {
            CCDirector* director = [CCDirector sharedDirector];    // process model
            //Get the top left corner of the screen
            int screen_height = director.screenSizeAsPoint.y;
            int screen_width = director.screenSizeAsPoint.x;

            id attacker = [model attacker];
            id attackChoice = [attacker getRegisteredAttack];

            CCAction* attack = [model.resourceManager animation: @"simple-attack-frame"];
            CCSprite * attackSprite = [model.resourceManager sprite: @"simple-attack-frame-01"];

            attackSprite.position = ccp(screen_width - rxa(80), screen_height - rya(80));
            attackSprite.tag = 5;
            self.action = attack;

            CCNode * check = [self getChildByTag:5];

            if(check == nil)
            {
                [self addChild: attackSprite];
                [attackSprite runAction:attack];
            }
        }

resource manager:

-(id)animation: (NSString*)_resource
{
    NSMutableArray *frames = [NSMutableArray array];

    for(int i = 1; i <= 8; ++i)
    {
        [frames addObject:
         [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
          [NSString stringWithFormat:@"%@-0%d", _resource, i]]];
    }

    CCAnimation *animation = [CCAnimation animationWithSpriteFrames: frames delay:1/60];

    CCAction * action = [CCAnimate actionWithAnimation: animation];

    return action;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:18:11.597

在你的行

```
CCAnimation *animation = [CCAnimation animationWithSpriteFrames: frames delay:1/60]; 
```

您将延迟设置为 1/60，但由于 1 和 60 都是整数，因此 1/60 为 0。尝试使用 1.0f/60.0f，您将得到一个浮点除法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:27:25.577

在网上搜索后，我找到了解决方案。我不是提交此解决方案的人，但我可以证明它解决了我的问题：

[https://github.com/cocos2d/cocos2d-iphone/commit/60f9cc98783b9a6a5635db4f468f83e0511c74c8](https://github.com/cocos2d/cocos2d-iphone/commit/60f9cc98783b9a6a5635db4f468f83e0511c74c8)

# java - java.util.Collections.contains() 如何比线性搜索执行得更快？

> ID：12985342
> 
> 赞同：8
> 
> 时间：2012-10-20T04:46:32.627
> 
> 标签：java, collections, linear-search

我一直在用一堆不同的方法来搜索集合、集合集合等。做了很多愚蠢的小测试来验证我的理解。这是让我感到困惑的一个（源代码在下面）。

简而言之，我正在生成 N 个随机整数并将它们添加到列表中。该列表未排序。然后我`Collections.contains()`用来在列表中查找一个值。我有意寻找一个我知道不会存在的值，因为我想确保探测到整个列表空间。我计时这个搜索。

然后我手动进行另一个线性搜索，遍历列表的每个元素并检查它是否与我的目标匹配。我也计时这个搜索。

平均而言，第二次搜索的时间比第一次长 33%。按照我的逻辑，第一次搜索也必须是线性的，因为列表是未排序的。我能想到的唯一可能性（我立即放弃）是 Java 正在制作我的列表的排序副本只是为了搜索，但是（1）我没有授权使用内存空间和（2）我认为使用如此大的 N 会节省更多的时间。

因此，如果两个搜索都是线性的，那么它们都应该花费相同的时间。Collections 类以某种方式优化了此搜索，但我不知道如何。所以......我错过了什么？

```
import java.util.*;

public class ListSearch {

    public static void main(String[] args) {

        int N = 10000000; // number of ints to add to the list
        int high = 100; // upper limit for random int generation

        List<Integer> ints;
        int target = -1; // target will not be found, forces search of entire list space

        long start;
        long end;

        ints = new ArrayList<Integer>();
        start = System.currentTimeMillis();
        System.out.print("Generating new list... ");
        for (int i = 0; i < N; i++) {
            ints.add(((int) (Math.random() * high)) + 1);
        }
        end = System.currentTimeMillis();
        System.out.println("took "  + (end-start) + "ms.");
        start = System.currentTimeMillis();
        System.out.print("Searching list for target (method 1)... ");
        if (ints.contains(target)) {
            // nothing
        }
        end = System.currentTimeMillis();
        System.out.println(" Took "  + (end-start) + "ms.");

        System.out.println();

        ints = new ArrayList<Integer>();
        start = System.currentTimeMillis();
        System.out.print("Generating new list... ");
        for (int i = 0; i < N; i++) {
            ints.add(((int) (Math.random() * high)) + 1);
        }
        end = System.currentTimeMillis();
        System.out.println("took "  + (end-start) + "ms.");
        start = System.currentTimeMillis();
        System.out.print("Searching list for target (method 2)... ");
        for (Integer i : ints) {
            // nothing
        }
        end = System.currentTimeMillis();
        System.out.println(" Took "  + (end-start) + "ms.");
    }
} 
```

编辑：以下是此代码的新版本。有趣的是，现在我的手动线性循环的执行**速度**比该`contains`方法快 16%（注意：两者都旨在有意搜索整个列表空间，所以我知道它们的迭代次数相等）。我无法解释这 16% 的收益……更多的困惑。

```
import java.util.*;

public class ListSearch {

    public static void main(String[] args) {

        int N = 10000000; // number of ints to add to the list
        int high = 100; // upper limit for random int generation

        List<Integer> ints;
        int target = -1; // target will not be found, forces search of entire list space

        long start;
        long end;

        ints = new ArrayList<Integer>();
        start = System.currentTimeMillis();
        System.out.print("Generating new list... ");
        for (int i = 0; i < N; i++) {
            ints.add(((int) (Math.random() * high)) + 1);
        }
        end = System.currentTimeMillis();
        System.out.println("took "  + (end-start) + "ms.");
        start = System.currentTimeMillis();
        System.out.print("Searching list for target (method 1)... ");
        if (ints.contains(target)) {
            System.out.println("hit");
        }
        end = System.currentTimeMillis();
        System.out.println(" Took "  + (end-start) + "ms.");

        System.out.println();

        ints = new ArrayList<Integer>();
        start = System.currentTimeMillis();
        System.out.print("Generating new list... ");
        for (int i = 0; i < N; i++) {
            ints.add(((int) (Math.random() * high)) + 1);
        }
        end = System.currentTimeMillis();
        System.out.println("took "  + (end-start) + "ms.");
        start = System.currentTimeMillis();
        System.out.print("Searching list for target (method 2)... ");
        for (int i = 0; i < N; i++) {
            if (ints.get(i) == target) {
                System.out.println("hit");
            }
        }
        end = System.currentTimeMillis();
        System.out.println(" Took "  + (end-start) + "ms.");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T05:30:21.190

您的比较代码有问题，这会扭曲您的结果。

这确实搜索`target`

```
 if (ints.contains(target)) {
        // nothing
    } 
```

但这不是！

```
 for (Integer i : ints) {
        // nothing
    } 
```

您实际上只是迭代列表元素而不测试它们。

话虽如此，由于以下一个或多个原因，第二个版本比第一个版本慢：

*   第一个版本将使用一个简单的`for`循环和一个索引来迭代支持数组。第二个版本等效于以下内容：

    ```
    Iterator<Integer> it = ints.iterator();
    while (it.hasNext()) {
        Integer i = (Integer) it.next();
    } 
    ```

    换句话说，每次循环都涉及 2 次方法调用和一次类型转换¹。

*   第一个版本将`true`在匹配后立即返回。由于您的实现中的错误，第二个版本每次都会迭代*整个列表。*事实上，考虑到 和 的选择`N`，`high`这种影响最有可能是造成性能差异的主要原因**。**

^(1 - 实际上，JIT 编译器将如何处理所有这些并不完全清楚。*理论上*，它可以内联方法调用，推断不需要 typcaset，甚至优化整个循环。另一方面，有一些因素可能会抑制这些优化。例如，`ints`被声明为`List<Integer>`可以禁止内联...除非 JIT 能够推断出实际类型始终相同。)

* * *

您的结果也可能由于其他原因而失真。您的代码没有考虑 JVM 预热。阅读此问题以了解更多详细信息：[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T04:52:32.147

这是区别：

当您使用 时`contains`，它使用对象的内部数组并进行如下搜索：

```
 for (int i = 0; i < size; i++)
        if (searchObject.equals(listObject[i]))
            return true;
    return false; 
```

这里当它试图获取`ith`元素时，它直接从内部数组中获取第 i 个元素对象。

当您编写自己的代码时，您会这样写：

```
 for (Integer i : ints) {
        // nothing
    } 
```

它相当于：

```
 for(Iterator<Integer> iter= ints.iterator(); iter.hasNext(); ) {
         Integer i = iter.next();
   } 
```

执行的步骤比`contains`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T04:59:13.257

所以我不完全确定你正在测试任何东西。Javac（编译器）足够聪明，可以意识到您的 for 循环和 if 语句中没有任何代码。在这种情况下，Java 将从其编译中删除该代码。您可能会获得时间回来的原因是因为您实际上是在计算打印字符串所需的时间。系统输出时间可能会因系统正在执行的操作而有很大差异。编写时序测试时，任何 I/O 都可能创建无效测试。

首先，我会从您的计时中删除字符串打印。

其次，ArrayList.contains 是线性的。它不像你正在做的那样使用特殊的 for 循环。您的循环有一些从集合中获取迭代器然后对其进行迭代的开销。这就是特殊的 for 循环在幕后工作的方式。

希望这可以帮助。

# php - prettyPhoto 在我的 wordpress 主题中不起作用

> ID：12985350
> 
> 赞同：-2
> 
> 时间：2012-10-20T04:48:20.700
> 
> 标签：php, jquery, css, wordpress

所以朋友们，我试图在我的 wordpress 主题中使用 prettyPhoto，但它根本不起作用。它的两个文件 - prettyPhoto.css 和 jquery.prettyPhoto.js 都在 header.php 文件中正确链接。

这是我的 header.php 文件中文件的链接 -

```
<link rel="stylesheet" href="<?php bloginfo('stylesheet_directory'); ?>/js/prettyPhoto/css/prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
<script src="<?php bloginfo('stylesheet_directory'); ?>/js/prettyPhoto/js/jquery.prettyPhoto.js" type="text/javascript"></script> 
```

如果这个问题是由于没有使用 wp_enqueue_script() 造成的，请告诉我。

这就是我将要与 prettyPhoto 一起使用的图像链接的方式 -

```
<a title="test image" href="images/new-image.png" rel="prettyPhoto[]"><img src="images/new-image.png" alt="Some Alternate Text" /></a> 
```

当我单击图像时，它不会在 prettyPhoto 中打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:56:13.080

您是否构建了自定义主题以使其正常工作。如果是这样，可能存在对 header.php index.php 或 footer.php 等文件的其他依赖项，这可能导致它无法工作。切换到默认的二十一主题，看看效果如何。如果它在那里工作，那么你的主题文件有问题，可能是 footer.php 或 index.php 等。

# data-structures - 如何从代数表达式构造二叉树

> ID：12985355
> 
> 赞同：0
> 
> 时间：2012-10-20T04:49:57.650
> 
> 标签：data-structures, binary-tree, algebraic-data-types

在我的考试中，我得到了这个表达式并且未能构造二叉树。解决方案是什么？

```
(5a-3b)^2*(3a+5b)^3 
```

我从上面的表达式中画了树，比如

```
 *
           / \
          /   \
         ^     \
        / \     \
       /   \     \
      -     2     ^
    /  \         / \
   /    \       +   3
  *      *     / \
 / \    / \   /   \
5   a  3  b  *     *
            / \   / \
           3   a  5  b 
```

我从这个答案中得到 0！我无法理解原因！

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-09T19:30:26.460

我目前正在学习离散数学课程，我们的主题是树。您必须记住将每个级别放在自己的（）中。所以我相信你创建的树看起来像一个表达式：((5*a)-(3*b))^2*((3*a)+(5*b))^3。这是树的中序遍历。对于您的答案，您需要更多类似的东西：

```
 *
                /   \
               /     \
              /       \
             ^         \
           /   \        \
          /     \        \
         -       2        ^
       /   \             /  \
      /     \           /    3
    5a       3b        +
                     /   \
                    /     \
                  3a       5b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:20:19.177

构建二叉树并不意味着您只需绘制您在此处显示的图形表示。我认为这实际上意味着在代码中实现或可能在伪代码中实现。所以再次考虑使用`stack`相同的表达式将`infix`符号转换为`postfix`，您可以使用堆栈属性轻松解决它。

# php - 由模型和控制器扩展的基类问题

> ID：12985357
> 
> 赞同：1
> 
> 时间：2012-10-20T04:50:45.830
> 
> 标签：php, model-view-controller, models, controllers

我有一个关于我在应用程序中遇到的冲突/难题的问题。

我想为我的所有模型和控制器提供一些通用的“东西”，例如来自缓存的数据或会话信息，以及我的 PDO 包装器的方法。

目前，每个单独的功能控制器和功能模型都扩展了一个基本控制器和基本模型，而后者又扩展了一个执行所有常见操作的对象。

控制器将被路由器/调度程序调用，然后控制器将调用模型以获取一些数据。这样做的问题是它意味着主对象被构造了两次：一次是在调用特征控制器时，另一次是在特征控制器调用特征模型时。

见下图：

![我的 MVC 应用程序当前的结构](../Images/85ff02755b763e6df68651a639e2e443.png)

显然我做错了什么，所以我想知道这个问题是否有某种最佳实践解决方案。

我*不*想要的是必须通过控制器将对象加载的内容传递给模型。这意味着任何时候我必须向对象添加一个新的公共元素，我必须将它传递给模型。

$this->cache 或 $this->db 或 $this->session 在控制器和模型（以及未来的助手和杂项类）中始终普遍可用要简单得多。

我将如何解决这个问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T00:25:30.287

我有一种感觉，你的问题的根源是糟糕的架构。

关于 MVC 和受 MVC 启发的设计模式，您必须了解的主要内容是该模式由两层组成：稍后呈现和模型层。这些层不应共享通用功能。控制器（以及视图和模板）是表示层的一部分。

当您在控制器中有或之类`$this->cache`的变量时，这意味着您有严重的抽象泄漏。这些是存储结构，应该在模型层中隐藏得相当深。如果您的控制器直接与它们交互，则您没有控制器。`$this->db``$this->session`

下一个问题是你的基类*（你`Object`出于某种原因调用的那个......而对象有点是类的实例）*。它似乎负责很多，尤其是与存储交互的不同抽象的实例化。如果你的控制器需要一个 PDO 实例*（出于某种异常奇怪的原因）*，那么它应该被注入到构造函数中。缓存和会话管理也是如此。

还有一点就是模型不是对象或类。它是一层。就像表示层一样，它由不同类型的结构组成。通常建议是：

*   处理逻辑实体的结构，这通常是[域对象](http://c2.com/cgi/wiki?DomainObject)的用途
*   一种或多种类型的存储抽象：[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)、[存储库](http://martinfowler.com/eaaCatalog/repository.html)、[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)、[dao](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)和/或一些类似的结构。
*   控制上述结构之间交互的东西，使它们不会在表示层中泄漏，通常称为[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)

是的，假设使用控制器传递结构是一种不好的做法，你是正确的。它违反[了 LoD](http://c2.com/cgi/wiki?LawOfDemeter)。相反，您应该为您的控制器提供一个工厂，该工厂实例化您的模型层结构并为它们提供必要的依赖项..[这篇文章](https://stackoverflow.com/a/12739161/727208)可能会有所帮助。

> [*我在这个主题上的两分钱..要获得更精确的建议，您必须显示一些代码*]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:18:56.407

我认为你在解决这个问题上走错了路。如果你正在构建一个 MVC 应用程序，你应该分离关注点，这就是我们使用 MVC 的原因。分离模型、控制器和视图。

你应该定义你需要 Model 做什么，Controller 做什么，并且只将 View 用于表示逻辑。

在正确的 MVC 中，模型是处理业务逻辑、数据库访问、验证等的层。因此模型不是一个类。您可以在一个控制器中使用多种型号。而控制器只是......模型和视图之间的连接。模型应该很胖，控制器应该很轻。

在我看来，你这样做的方式是错误的，因为你可以在模型和控制器中做同样的事情，这不是 MVC 的用途。控制器不应该做任何逻辑，这就是我们使用模型的原因，控制器只告诉模型做什么，并根据他们的反应告诉其他模型做其他事情，或者用成功或错误消息或来自数据库的帖子等呈现视图。

您可以这样做的方法是，一旦您调用了适当的控制器，就可以使用它来获取您需要的模型。再一次，模型由很多类组成，所以你的模型文件夹可能很胖。在 Controller 中，您应该只有访问模型的方法，以便模型可以执行某些操作，并向 Controller 报告它们所做的事情。并根据该返回值执行更多操作或调用 View 进行渲染。

所以你不应该有一个对象可以同时被模型和控制器扩展。

您的模型文件夹可能如下所示：

```
Models
    - Entities
    - Forms
    - Validators
    - Services
    ... 
```

然后你在你的控制器中调用它们中的任何一个来执行一些操作，并报告回来。如果您确实需要在控制器和模型中具有相同的功能，那么这并不能回答您的问题，但我认为像您开始那样做是错误的。

希望这对您有所帮助，有趣的问题如果可以的话，我会尝试提供更多帮助。

# mongoid - 基于嵌入属性验证 Mongoid 中的嵌入文档

> ID：12985358
> 
> 赞同：3
> 
> 时间：2012-10-20T04:50:47.697
> 
> 标签：mongoid

我有一个有 embeds_many 订阅的类订阅者。订阅具有属性状态。我想添加对状态的验证，以便每个订阅者只有一个订阅可以具有“活动”状态。订阅者可以拥有多个状态为 'purchased' 或 'expired' 的订阅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:24:12.240

这应该这样做：

```
class Subscriber
  include Mongoid::Document
  embeds_many :subscriptions
  validate :active_subscriptions

  def active_subscriptions
    self.errors.add(:base, 'too many active subscriptions') if 
        subscriptions.where(status: 'active').count > 1
  end
end

class Subscription
  include Mongoid::Document
  embedded_in :subscriber
  field :status, class: 'String'
end

s = Subscriber.create
s.subscriptions.build(status: 'active')
s.save # fires validations on subscriber
s.subscriptions.build(status: 'active')
s.save # wouldn't save 
```

但请确保您始终在订阅者上调用保存，否则验证不会在订阅者上触发，并且您将进入不一致的状态。在不一致的状态下，您稍后可能会看到验证失败

```
s = Subscriber.create
s.subscriptions.create(status: 'active') # fires validations on subscription only
s.subscriptions.build(status: 'active').save # fires validations on subscription only 
```

如果您还需要验证订阅，则在保存订阅者时，您级联回调：

```
embeds_many :subscriptions, cascade_callbacks: true 
```

# oracle - Oracle 分析函数用法

> ID：12985362
> 
> 赞同：1
> 
> 时间：2012-10-20T04:51:24.783
> 
> 标签：oracle

我是 Oracle 分析的新手。任何人都可以帮我解决以下问题。

```
SELECT year,
           month,
           week,
           C.cpg_pk                                                        CPG,
           C.dep_pk                                                        DEPT,
           T.cust_id                                                       CUST_ID,
           D1.r_id                                                         R_ID,
           Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)) AS P1,
           Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)) AS IC,
           Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)) AS B1,
           Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code)   AS P2,
           Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code)   AS B2,
           Count(DISTINCT A.cust_id)                                       TOTAL_ACC
           ,
           Count(DISTINCT T.txn_pk)
           TOTAL_TXN,
           SUM(am_amount)                                                  TOTAL_AMT
    FROM   t_header T,
           cust_master A,
           tx_details1 D1,
           tx_details2 D2,
           cpg_master C
    WHERE  A.TYPE = 0
           AND T.cust_id = A.cust_id
           AND T.txn_pk = 5001
           AND T.txn_pk = D1.txn_pk
           AND T.txn_pk = D2.txn_pk
           AND D1.cpg_pk = C.cpg_pk
           AND D1.op = 1
    GROUP  BY year,
              month,
              week,
              C.cpg_pk,
              C.dep_pk,
              t.cust_id,
              D1.r_id,
              Decode(d2.at_code, '3', func1.Get_att(d2.at_code, D2.val_code)),
              Decode(d2.at_code, '2', func1.Get_att(d2.at_code, D2.val_code)),
              Decode(d2.at_code, '1', func1.Get_att(d2.at_code, D2.val_code)),
              Decode(func1.Get_att(d2.at_code, D2.val_code), 2, d2.at_code),
              Decode(func1.Get_att(d2.at_code, D2.val_code), 5, d2.at_code) 
```

其生成的输出如下：

```
YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2   TOTAL
2012    08      32     127 -1      10019   3665                     134   23100.09   
2012    08      32     127 -1      10019   3665                     135   23100.09  
2012    08      32     127 -1      10019   3665             723           23100.09  
2012    08      32     127 -1      10019   3665        714                23100.09
2012    08      32     127 -1      10019   3665                  41       23100.09
2012    08      32     127 -1      10019   3665                  42       23100.09
2012    08      32     127 -1      10019   3665     21                    23100.09
2012    08      32     128 -1      10019   3665                      134  23100.09 
2012    08      32     128 -1      10019   3665                      135  23100.09 
2012    08      32     128 -1      10019   3665             723           23100.09 
2012    08      32     128 -1      10019   3665        714                23100.09 
2012    08      32     128 -1      10019   3665                  41       23100.09
2012    08      32     128 -1      10019   3665                  42       23100.09
2012    08      32     128 -1      10019   3665     21                    23100.09 
```

这里的值是重复的。我试图用 a 消除重复`group by`，但没有成功。你可以帮帮我吗？

所需的输出是这样的：

```
YEAR    MONTH   WEEK    CPG DEPT    CUST_ID R_ID    P1  IC  B1  P2  B2  TOTAL_AMT
---------------------------------------------------------------------------------
2012    08      32      127 -1      10019   3665    21  714 723  41   134 23100.09
2012    08      32      127 -1      10019   3665    21  714 723  41   135 23100.09
2012    08      32      127 -1      10019   3665    21  714 723  42   134 23100.09
2012    08      32      127 -1      10019   3665    21  714 723  42   135 23100.09
2012    08      32      128 -1      10019   3665    21  714 723  41   134 23100.09
2012    08      32      128 -1      10019   3665    21  714 723  41   135 23100.09
2012    08      32      128 -1      10019   3665    21  714 723  42   134 23100.09
2012    08      32      128 -1      10019   3665    21  714 723  42   135 23100.09 
```

主要的是`year`, `month`, `week`, `cpg`, `dept`, `cust_id`, `r_id`, `p1`, `ic`, `b1`, `p2`,`b2`应该是唯一的行。使用分析函数可以实现还是我需要编写 PL/SQL？我的问题合理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T04:08:39.657

with t1 as( select 2012 YEAR1, 08 MONTH1, 32 WEEK, 127 CPG, -1 DEPT, 10019 CUST_ID, 3665 R_ID, null P1, null IC, 723 B1,null P2, null B2, 23100.09 TOTAL from dual union all -- select 2012, 08, 32, 127, -1, 10019, 3665, null, null, null, null, 135 , 23100.09 from dual union all -- 选择 2012, 08, 32, 127, -1, 10019, 3665, null , null, null , null, 134, 23100.09 from dual union all 选择 2012, 08, 32, 127, -1, 10019, 3665, null, 714 , null, null, null, 23100.09 from dual union all -- 选择 2012, 08, 32, 127, -1, 10019, 3665, null, null ,null, 41, null, 23100.09 from dual union all -- 选择 2012, 08, 32, 127, -1, 10019, 3665, null, null, null, 42, null, 23100.09 from dual union all -- 选择 2012, 08, 32, 127, -1, 10019, 3665, 21 , null, null, null, null, 23100。09 from dual union all -- 选择 2012, 08, 32, 128, -1, 10019, 3665, null, null, null, null, 134 , 23100.09 from dual union all -- 选择 2012, 08, 32, 128, - 1, 10019, 3665, null, null, null, null, 135 , 23100.09 from dual union all select 2012, 08, 32, 128, -1, 10019, 3665, null, null, 723 , null, null, 23100.09 from dual union all select 2012, 08, 32, 128, -1, 10019, 3665, null, 714 , null, null, null, 23100.09 from dual union all -- 选择 2012, 08, 32, 128, -1, 10019, 3665 , null, null ,null, 41, null, 23100.09 from dual union all -- 选择 2012, 08, 32, 128, -1, 10019, 3665, null, null, null, 42, null, 23100.09 from dual union all - - 选择 2012, 08, 32, 128, -1, 10019, 3665, 21 , null, null, null, null, 23100.09 from dual ) 选择 t1p1.YEAR1, t1p1.month1, t1p1。week, t1p1.cpg, t1p1.dept, t1p1.cust_id, t1p1.r_id, t1p1.p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2, t1p1.total from (选择 YEAR1, month1, week, cpg, dept, cust_id, r_id, p1 ，从 t1 开始的总计，其中 p1 不为空） t1p1，（选择 YEAR1，month1，week，cpg，dept，cust_id，r_id，ic from t1，其中 ic 不为空）t1ic，（选择YEAR1, month1, week, cpg, dept, cust_id, r_id, b1 from t1 where b1 is not null) t1b1, (选择 YEAR1, month1, week, cpg, dept, cust_id, r_id, p2 from t1 where p2 is not null) t1p2，（从 t1 中选择 YEAR1、month1、week、cpg、dept、cust_id、r_id、b2，其中 b2 不为空） t1b2 其中 t1p1.year1 = t1ic.year1(+) 和 t1p1.year1 = t1b1.year1(+)和 t1p1.year1 = t1p2.year1(+) 和 t1p1.year1 = t1b2.year1(+) 和 t1p1.month1 = t1ic.month1(+) 和 t1p1.month1 = t1b1.month1(+) 和 t1p1.month1 = t1p2 .month1(+) 和 t1p1。month1 = t1b2.month1(+) and t1p1.week = t1ic.week(+) and t1p1.week = t1b1.week(+) and t1p1.week = t1p2.week(+) and t1p1.week = t1b2.week( +) 和 t1p1.cpg = t1ic.cpg(+) 和 t1p1.cpg = t1b1.cpg(+) 和 t1p1.cpg = t1p2.cpg(+) 和 t1p1.cpg = t1b2.cpg(+) 和 t1p1.dept = t1ic.dept(+) 和 t1p1.dept = t1b1.dept(+) 和 t1p1.dept = t1p2.dept(+) 和 t1p1.dept = t1b2.dept(+) 和 t1p1.cust_id = t1ic.cust_id(+ ) 和 t1p1.cust_id = t1b1.cust_id(+) 和 t1p1.cust_id = t1p2.cust_id (+) 和 t1p1.cust_id = t1b2.cust_id(+) 和 t1p1.r_id = t1ic.r_id(+) 和 t1p1.r_id = t1b1.r_id(+) and t1p1.r_id = t1p2.r_id (+) and t1p1.r_id = t1b2.r_id(+) order by t1p1.YEAR1, t1p1.month1, t1p1.week, t1p1.cpg, t1p1.dept, t1p1.cust_id, t1p1.r_id, t1p1.p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2 /week(+) 和 t1p1.week = t1b2.week(+) 和 t1p1.cpg = t1ic.cpg(+) 和 t1p1.cpg = t1b1.cpg(+) 和 t1p1.cpg = t1p2.cpg(+) 和 t1p1 .cpg = t1b2.cpg(+) 和 t1p1.dept = t1ic.dept(+) 和 t1p1.dept = t1b1.dept(+) 和 t1p1.dept = t1p2.dept(+) 和 t1p1.dept = t1b2.dept (+) 和 t1p1.cust_id = t1ic.cust_id(+) 和 t1p1.cust_id = t1b1.cust_id(+) 和 t1p1.cust_id = t1p2.cust_id (+) 和 t1p1.cust_id = t1b2.cust_id(+) 和 t1p1。 r_id = t1ic.r_id(+) and t1p1.r_id = t1b1.r_id(+) and t1p1.r_id = t1p2.r_id (+) and t1p1.r_id = t1b2.r_id(+) order by t1p1.YEAR1, t1p1.month1 , t1p1.week, t1p1.cpg, t1p1.dept, t1p1.cust_id, t1p1.r_id, t1p1.p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2 /week(+) 和 t1p1.week = t1b2.week(+) 和 t1p1.cpg = t1ic.cpg(+) 和 t1p1.cpg = t1b1.cpg(+) 和 t1p1.cpg = t1p2.cpg(+) 和 t1p1 .cpg = t1b2.cpg(+) 和 t1p1.dept = t1ic.dept(+) 和 t1p1.dept = t1b1.dept(+) 和 t1p1.dept = t1p2.dept(+) 和 t1p1.dept = t1b2.dept (+) 和 t1p1.cust_id = t1ic.cust_id(+) 和 t1p1.cust_id = t1b1.cust_id(+) 和 t1p1.cust_id = t1p2.cust_id (+) 和 t1p1.cust_id = t1b2.cust_id(+) 和 t1p1。 r_id = t1ic.r_id(+) and t1p1.r_id = t1b1.r_id(+) and t1p1.r_id = t1p2.r_id (+) and t1p1.r_id = t1b2.r_id(+) order by t1p1.YEAR1, t1p1.month1 , t1p1.week, t1p1.cpg, t1p1.dept, t1p1.cust_id, t1p1.r_id, t1p1.p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2 /部门 = t1b1.dept(+) 和 t1p1.dept = t1p2.dept(+) 和 t1p1.dept = t1b2.dept(+) 和 t1p1.cust_id = t1ic.cust_id(+) 和 t1p1.cust_id = t1b1.cust_id( +) and t1p1.cust_id = t1p2.cust_id (+) and t1p1.cust_id = t1b2.cust_id(+) and t1p1.r_id = t1ic.r_id(+) and t1p1.r_id = t1b1.r_id(+) and t1p1.r_id = t1p2.r_id (+) 和 t1p1.r_id = t1b2.r_id(+) 按 t1p1.YEAR1、t1p1.month1、t1p1.week、t1p1.cpg、t1p1.dept、t1p1.cust_id、t1p1.r_id、t1p1 排序。 p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2 /部门 = t1b1.dept(+) 和 t1p1.dept = t1p2.dept(+) 和 t1p1.dept = t1b2.dept(+) 和 t1p1.cust_id = t1ic.cust_id(+) 和 t1p1.cust_id = t1b1.cust_id( +) and t1p1.cust_id = t1p2.cust_id (+) and t1p1.cust_id = t1b2.cust_id(+) and t1p1.r_id = t1ic.r_id(+) and t1p1.r_id = t1b1.r_id(+) and t1p1.r_id = t1p2.r_id (+) 和 t1p1.r_id = t1b2.r_id(+) 按 t1p1.YEAR1、t1p1.month1、t1p1.week、t1p1.cpg、t1p1.dept、t1p1.cust_id、t1p1.r_id、t1p1 排序。 p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2 /t1p1.dept, t1p1.cust_id, t1p1.r_id, t1p1.p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2 /t1p1.dept, t1p1.cust_id, t1p1.r_id, t1p1.p1,t1ic.ic, t1b1.b1, t1p2.p2, t1b2.b2 /

# java - Java Scanner - 下一个字符串直到 a | 被发现

> ID：12985365
> 
> 赞同：2
> 
> 时间：2012-10-20T04:52:27.773
> 
> 标签：java, java.util.scanner

目前我正在尝试以这种格式阅读一些基本单元格：

```
+-------+-------+
|       |       |
+-------+-------+ 
```

现在我需要获取单元格内容的字符串表示并将其发送到另一个方法。问题是单元格没有预定义的长度。我正在从文件中读取这些，所以我最简单的选择应该是只使用我已经设置的扫描仪。问题是，我真的不知道这种情况如何。

我有一种强烈的感觉，我需要以某种方式使用该模式，但我完全不知道如何去做。

我也可以以某种方式建立它，但这让我感到非常缓慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:57:16.213

请参阅[扫描仪的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)，它有一个示例：

```
String input = "1 fish 2 fish red fish blue fish";
 Scanner s = new Scanner(input).useDelimiter("\\s*fish\\s*");
 System.out.println(s.nextInt());
 System.out.println(s.nextInt());
 System.out.println(s.next());
 System.out.println(s.next());
 s.close(); 
```

打印以下输出：

```
 1
 2
 red
 blue 
```

好吧，您可以`|`用作分隔符。

**编辑：**要`|`用作分隔符，您应该转义它，使用`\\s*\\|\\s*`或`\\s*[|]\\s*`。如果您`|`按原样使用，那么您将只获得第一个 value`1`和 exception `InputMismatchException`。

请参见下面的程序和输出：

```
public class Test {
    public static void main(String[] args) {
        String input = "1 | 2 | red | blue |";
        Scanner s = new Scanner(input).useDelimiter("\\s*\\|\\s*"); // or use "\\s*[|]\\s*"
        System.out.println(s.nextInt());
        System.out.println(s.nextInt());
        System.out.println(s.next());
        System.out.println(s.next());
        s.close();
    }
} 
```

输出 ：

```
1
2
red
blue 
```

# android - 全局变量 Android

> ID：12985368
> 
> 赞同：2
> 
> 时间：2012-10-20T04:53:26.043
> 
> 标签：android, eclipse, global-variables

我是 Android 应用程序开发的新手，想了解一些有关全局变量的信息。我做了很多搜索，我知道在类文件中你可以声明一个全局变量（如果我错了，请纠正我）。我看过很多帖子，包括[Android - 全局变量？](https://stackoverflow.com/questions/8658980/android-global-variables). 他们没有帮助我理解我想知道什么。我的目标是能够创建在应用程序终止后会更改并保持更改的变量。我的想法是，我希望有一个主页，然后分支到一堆其他页面，并有一个全局变量来保存您当前正在访问的页面，这样当您恢复时，您可以按下标有继续的按钮和它会将您带回您之前所在的页面。如果有比全局变量更好的方法，我愿意接受替代方案，在此先感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T05:13:03.107

您可以使用 SharedPreferences 来做到这一点。在您的活动中，使用：

```
SharedPreferences preferences = this.getSharedPreferences("name", Context.MODE_PRIVATE);
preferences.edit().putString("lastPage","mainPage").commit; 
```

要读取您保存的数据，请使用：

```
String lastPage = preferences.getString("lastPage"); 
```

阅读[http://developer.android.com/reference/android/content/SharedPreferences.Editor.html](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)以了解您可以存储的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T04:56:08.383

在应用程序终止后，您不能保留全局变量或其他变量，除非您将它们写入永久存储。在 Android 中，这可以通过 ObjectOutputStream 将对象写入文件系统或 SharedPreferences 来完成，后者保存键/值对以供检索。您必须在需要时保存和设置变量。

但是无论如何你都不应该做全局变量。

# map - 如何使用hadoop mapreduce程序消除单个文件中的重复值

> ID：12985373
> 
> 赞同：1
> 
> 时间：2012-10-20T04:53:48.113
> 
> 标签：map, hadoop, mapreduce

如何使用 hadoop mapreduce 程序消除单个文件中的重复值 在

输出中我需要唯一值

例如：在文件中

第 1 行：嗨，这是 Ashok

第 2 行：hadoop 框架的基础

第 3 行：嗨，这是 Ashok

从这个例子只需要输出唯一值，即它应该打印第 1 行和第 3 行...怎么做...。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T05:09:13.913

**这是没有计数的字数。**

典型的做法是按整行分组，然后只在 reducer 中输出 key。这是一些伪代码：

```
map(key, value):
   emit (value, null)

reducer(key, iterator):
   emit (key, null) 
```

请注意，我只是在这里输出值作为映射器的键。该值可以为 null（即 ，`NullWriteable`或者您可以只使用整数或其他任何值。）。

在reducer中，我不管我看到多少，我只是输出key。

# mysql - 从 Oracle 到 MySQL 的数据转换

> ID：12985375
> 
> 赞同：2
> 
> 时间：2012-10-20T04:53:54.247
> 
> 标签：mysql, vb.net, oracle, datapump

我正在研究将数据从 Oracle 传输到 MySQL 的数据传输实用程序。

在将数据从 Oracle 移动到 MySQL 时，为 MySQL 表选择的引擎是 MyISAM，它可以快速插入数据。如果我将引擎类型更改为 InnoDB，则插入需要很长时间，因为 Innodb 遵循 ACID 规则。

如何通过 InnoDB 引擎获得最佳性能？我还想在将数据插入表之前将外键添加到表中。使用 MyISAM 引擎这是不可能的。

我已经测试了以下场景，

引擎类型 MyISAM 50 lac 数据在 2 小时内移动，但无法添加外键引擎类型 InnoDB 50 lac 数据大约在 20 小时内移动。

请帮助我使用 Innodb 引擎类型获得性能。我正在使用 MySQL 5.1.6 版本，使用所有默认设置。

# css - CSS 元素不会对齐

> ID：12985377
> 
> 赞同：0
> 
> 时间：2012-10-20T04:54:07.697
> 
> 标签：css, styles

我刚刚在我的网站中嵌入了一个时事通讯字段和按钮，该字段很好，但按钮太低了。我尝试了不同的风格，但似乎没有任何效果。

[http://www.pazzle.co.uk/](http://www.pazzle.co.uk/)

就在横幅下面。

```
 <!-- Begin MailChimp Signup Form -->

    <div id="mc_embed_signup">
    <form action="http://pazzle.us6.list-manage.com/subscribe/post?u=7167bf73b26b7bd1298d4f925&amp;id=a48b73e435" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    <div class="clear">
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
    </div>
    </form>
    </div>

    <!--End mc_embed_signup-->

#mce-EMAIL {float:left;}
#mc-embedded-subscribe {}
/* MailChimp Form Embed Code - Slim - 08/17/2011 */
#mc_embed_signup form {display:block;   }
#mc_embed_signup h2 {font-weight:bold; padding:0; margin:15px 0; font-size:1.4em;}
#mc_embed_signup input {border:1px solid #999; -webkit-appearance:none;}
#mc_embed_signup input[type=checkbox]{-webkit-appearance:checkbox;}
#mc_embed_signup input[type=radio]{-webkit-appearance:radio;}
#mc_embed_signup input:focus {border-color:#333;}
#mc_embed_signup .button {clear:both;  background-color: #aaa; border-radius:4px; color: #FFFFFF; cursor: pointer;  font-size:15px; font-weight: bold; line-height: 28px;  padding:0; text-align: center; text-decoration: none; vertical-align: top; white-space: nowrap; width: auto;}
#mc_embed_signup .button:hover {background-color:#777;}
#mc_embed_signup .small-meta {font-size: 11px;}
#mc_embed_signup .nowrap {white-space:nowrap;}     
#mc_embed_signup .clear {clear:none; display:inline; float:left;}

#mc_embed_signup input.email {display:block; padding: 5px 0;  text-indent: 8px; width: 120px !important; margin-left: 13px;margin-top: 5px; float:left;}
#mc_embed_signup input.button {display:block;   min-width: 50px; height: 28px; margin-top: 5px;}

#mc_embed_signup div#mce-responses {float:left; top:-1.4em; padding:0em .5em 0em .5em; overflow:hidden; width:90%;margin: 0 5%; clear: both;}
#mc_embed_signup div.response {margin:1em 0; padding:1em .5em .5em 0; font-weight:bold; float:left; top:-1.5em; z-index:1; width:80%;}
#mc_embed_signup #mce-error-response {display:none;}
#mc_embed_signup #mce-success-response {color:#529214; display:none;}
#mc_embed_signup label.error {display:block; float:none; width:auto; margin-left:1.05em; text-align:left; padding:.5em 0;}
#mc_embed_signup {float:left; height: 30px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:58:16.437

尝试添加`float: left`到`#mc_embed_signup .clear`div 和`#mc_embed_signup input.email`文本框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:01:44.613

问题在 CSS 中：

`#mc_embed_signup .button`在 stylesheets.css 的第 1176 行

从该类中删除，`clear:both`它将获得与表单字段一致的提交按钮。从那里你应该能够修复边距/定位。

clear:both 从本质上防止元素与任何其他元素内联。它清除浮动，使其不能浮动在另一个元素旁边。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T05:02:01.543

不确定这是否正是您所说的，但我添加了#mc_embed_signup .clear { float: right;}。这会将提交按钮放入表单框中，然后您可以使用 postion:relative 获得特定的对齐方式

# html - 用户第一次访问页面时如何检查所有复选框？

> ID：12985391
> 
> 赞同：2
> 
> 时间：2012-10-20T04:56:30.147
> 
> 标签：html, ruby-on-rails, ruby, haml

我希望在用户第一次访问该页面时选中复选框。

这个文件是`app/views/movies/index.html.haml`

```
%h1 All Movies
= form_tag movies_path, :method => :get, :id => 'ratings_form' do
  Include:
  - @all_ratings.each do |rating|
    = rating
    = check_box_tag "ratings[#{rating}]", "1", @checked_ratings.include?(rating), :id => "ratings_#{rating}",
  = submit_tag 'Refresh', :id => 'ratings_submit'

%table#movies
  %thead
    %tr
      %th{:class => ("hilite" if @sort == "title")}= link_to "Movie Title", movies_path( :sort => "title", :ratings => @checked_ratings), :id => "title_header" 
      %th Rating
      %th{:class => ("hilite" if @sort == "release_date")}= link_to "Release Date", movies_path( :sort => "release_date", :ratings => @checked_ratings), :id => "release_date_header"
      %th More Info
  %tbody
    - @movies.each do |movie|
      %tr
        %td= movie.title 
        %td= movie.rating
        %td= movie.release_date
        %td= link_to "More about #{movie.title}", movie_path(movie)

= link_to 'Add new movie', new_movie_path

#This is my Controller

    class MoviesController < ApplicationController

  def show
    id = params[:id] # retrieve movie ID from URI route
    @movie = Movie.find(id) # look up movie by unique ID
    # will render app/views/movies/show.<extension> by default
  end

  def index
    #get all the ratings available 
    @all_ratings = Movie.all_ratings
    @checked_ratings = (params[:ratings].present? ? params[:ratings] : [])
    @sort = params[:sort]
    @movies = Movie.scoped

    if @sort && Movie.attribute_names.include?(@sort)
      @movies = @movies.order @sort
    end
    id @checked_ratings.empty?
      @checked_ratings = @all_ratings
    end
    unless @checked_ratings.empty?
      @movies = @movies.where :rating => @checked_ratings.keys
    end
  end

  def new
    # default: render 'new' template
  end

  def create
    @movie = Movie.create!(params[:movie])
    flash[:notice] = "#{@movie.title} was successfully created."
    redirect_to movies_path
  end

  def edit
    @movie = Movie.find params[:id]
  end

  def update
    @movie = Movie.find params[:id]
    @movie.update_attributes!(params[:movie])
    flash[:notice] = "#{@movie.title} was successfully updated."
    redirect_to movie_path(@movie)
  end

  def destroy
    @movie = Movie.find(params[:id])
    @movie.destroy
    flash[:notice] = "Movie '#{@movie.title}' deleted."
    redirect_to movies_path
  end
end 
```

在控制器中，如果为空但它不执行任何操作，我将其设置`@checked_rating`为。我尝试放入on ，但这会在每次刷新页面时检查复选框。每次我选中一个特定的复选框并点击刷新按钮时，页面都会加载所有选中的复选框。`@all_rating``@checked.rating``:checked => true``index.html.haml``check_box_tag`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:42:49.357

您可以使用 localstorage + JavaScript 来实现这一点。在页面加载时，检查本地存储中的属性值。如果设置了该值，请不要选中这些框。如果未设置值，请选中所有框并在本地存储中设置值。

瓦伦

# powershell - 如何增加与 Powershell 3 并行的进程数？

> ID：12985392
> 
> 赞同：4
> 
> 时间：2012-10-20T04:56:53.143
> 
> 标签：powershell, parallel-processing, workflow, powershell-3.0, bulkinsert

我正在尝试并行运行 20 个进程。我改变了会话如下，但没有运气。每个会话我最多只能获得 5 个并行进程。

```
$wo=New-PSWorkflowExecutionOption -MaxSessionsPerWorkflow 50 -MaxDisconnectedSessions 200 -MaxSessionsPerRemoteNode 50 -MaxActivityProcesses 50
Register-PSSessionConfiguration -Name ITWorkflows -SessionTypeOption $wo -Force
Get-PSSessionConfiguration ITWorkflows | Format-List -Property * 
```

有没有增加进程数的开关参数？

这就是我正在运行的：

```
Workflow MyWorkflow1
{
Parallel {
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns  "where OrderId between 2 and 2975416"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 2975417 and 5950831"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 5950832 and 8926246"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 8926247 and 11901661"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 11901662 and 14877076"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns"where OrderId between 14877077 and 17852491"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns  "where OrderId between 17852492 and 20827906"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 20827907 and 23803321"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 23803322 and 26778736"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 26778737 and 29754151"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 29754152 and 32729566"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 32729567 and 35704981"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 35704982 and 38680396"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 38680397 and 432472144"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 432472145 and 435447559"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns  "where OrderId between 435447560 and 438422974"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 864944289 and 867919703"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 867919704 and 870895118"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 870895119 and 1291465602"}
InlineScript { import-module \\PS_Scripts\bulkins.ps1; BulkIns "where OrderId between 1291465603 and 1717986945"}
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:18:12.317

我不确定您为什么要调用 PSSessionConfiguration。

如果您查看 New-PsWorkFlowSession 的帮助输出，您可能会看到一些看起来更接近您想要做的示例。我没有您用来测试此工作流程的模块，因此无法提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:39:48.707

这应该可以工作，您甚至不需要更改 PSSessionConfiguration。这是一个示例，因为我们没有您的模块。

```
Workflow Get-ParallelChildItem
{
        Parallel {
        InlineScript {gci C:\ -Recurse}
        InlineScript {gci C:\ -Recurse}
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T16:20:25.220

来自 MSDN 论坛的 jrv[提供了一个工作代码示例](https://social.microsoft.com/Forums/en-US/3ae1efc9-46d7-426f-b26f-c43dab43adb4/change-powershell-parallel-limit?forum=Offtopic)：

```
$wo = New-PSWorkflowExecutionOption -MaxSessionsPerWorkflow 100 -MaxDisconnectedSessions 200
Register-PSSessionConfiguration -Name test-ping -SessionTypeOption $wo -Force

$s = New-PSWorkflowSession 
Invoke-Command $s { 
workflow Invoke-ParallelForEach{ 
    foreach -parallel ($i in 1..10){ 
        InlineScript{ 
            "foo: $using:i" 
        } 
        Get-Process -Name PowerShell* 
    } 
   } 
}

# now run the workflow with the custom configuration
Invoke-Command $s { Invoke-ParallelForEach -PSComputerName localhost -PSConfigurationName test-ping} 
```

# php - 将用户密码发送到他的电子邮件......使用php

> ID：12985395
> 
> 赞同：1
> 
> 时间：2012-10-20T04:57:57.240
> 
> 标签：php, javascript, html, mysql, css

我无法将用户的密码发送到他的电子邮件。一切正常，但问题是，密码是 md5 散列的，当我将密码发送给用户时，散列的 md5 密码似乎不是原始密码。我想**在保持密码散列的同时**发送原件， 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T05:19:55.600

将密码保存到数据库后，您将永远无法以纯文本形式恢复密码；我们准确地对密码进行哈希处理以使其正确。如果用户忘记了他的密码，发送一个链接到注册的电子邮件来重置它并覆盖数据库上的旧密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T05:47:48.087

在这种情况下，您可以使用 SHA1 算法。在 MD5 中，您可以编码，但不能使用任何算法进行解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T05:58:28.517

允许他使用发送到他的电子邮件的“特殊”链接来重置密码。一旦他点击了那个链接——更新数据库说他已经点击了这个链接（因此过期），然后让他回答一个“重置”问题，比如他的出生日期或他输入的电话号码。或其他一些问题。

之后，让他选择一个新密码——你就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T11:33:58.853

不允许您解码 md5 字符串。所以最好的选择是用安全问题或类似的方法再次验证用户并让他重置密码。除此之外，这是一种更好的做法，因为用户可能在许多地方使用了相同的密码。

或者，您可以自己重置用户的密码。**只需使用随机字符串或您自己的字符串，然后输入 md5 并更新密码。然后您可以将该随机字符串或您设置的字符串发送给用户。**

希望这可以帮助

# amazon-s3 - 使用 AWS S3 进行照片存储

> ID：12985397
> 
> 赞同：7
> 
> 时间：2012-10-20T04:58:13.053
> 
> 标签：amazon-s3, amazon-web-services, photos

我将使用 S3 来存储用户上传的照片。显然，我不会在不调整大小的情况下将图像文件提供给用户代理。但是，没有一种尺寸可以，因为一些缩略图会比其他较大的预览小。因此，我正在考虑制作一组标准尺寸，从最低的 16x16 缩放到最高的 1024x1024。这是解决这个问题的好方法吗？如果我以后需要新尺寸怎么办？你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T20:30:29.020

Pre-generating different sizes and storing them in S3 is a fine approach, especially if you know what sizes you need, are likely to use all of the sizes for all of the images, and don't have so many images and sizes that the storage cost is excessive.

Here's another approach I use when I don't want to pre-generate and store all the different sizes for every image, or when I don't know what sizes I will want to use in the future:

1.  Store the original size in S3.

2.  Run a web server that can generate any desired size from the original image on request.

3.  Stick a CDN (CloudFront) in front of the web server.

Now, your web site or application can request a URL like /16x16/someimage.jpg from CloudFront. The first time this happens, CloudFront will get the resized image from your web server, but then CloudFront will cache the image and serve it for you, greatly reducing the amount of traffic that hits your web server.

Here's a service that resizes images from arbitrary URLs, serving them through CloudFront: [http://filter.to](http://filter.to)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:04:07.777

这听起来是个不错的方法。根据您的应用程序，您应该定义一组始终生成的缩略图大小。但也存储原始用户文件，如果您的要求稍后更改。当您想要添加新的缩略图大小时，您可以遍历所有原始文件并从中生成新的缩略图。此选项为您提供了以后的灵活性。

# iphone - 如何在 UINavigationController 中添加多行标题栏

> ID：12985401
> 
> 赞同：3
> 
> 时间：2012-10-20T04:58:26.277
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, titlebar

我尝试在 UINavigationController 中添加两行标题栏

我想根据字符串长度自动调整字体大小。我的字符串最大大小变为60。我尝试通过以下代码实现

```
UILabel *bigLabel = [[UILabel alloc] init];
bigLabel.text = @"1234567890 1234567890 1234567890 1234567890 1234567890 123456";
bigLabel.backgroundColor = [UIColor clearColor];
bigLabel.textColor = [UIColor whiteColor];
bigLabel.font = [UIFont boldSystemFontOfSize:20];
bigLabel.adjustsFontSizeToFitWidth = YES;
bigLabel.clipsToBounds = NO;
bigLabel.numberOfLines = 2;
bigLabel.textAlignment = ([self.title length] < 10 ? NSTextAlignmentCenter : NSTextAlignmentLeft);
[bigLabel sizeToFit];

self.navigationItem.titleView = bigLabel; 
```

它对我不起作用，请你帮帮我。我必须为 iPhone 和 iPad 屏幕制作这个

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T05:14:19.310

只需设置`setNumberOfLines:` **0**的`UILabel`. 请参见下面的示例。

```
UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 44.0)];
[label setBackgroundColor:[UIColor clearColor]];
[label setNumberOfLines:0];
[label setTextColor:[UIColor whiteColor]];
[label setTextAlignment:NSTextAlignmentCenter];
[label setText:@"1234567890 1234567890 1234567890 1234567890 1234567890 123456"];
self.navigationItem.titleView = label; 
```

![在此处输入图像描述](../Images/2de581ff39bdcbd0b3ba83674c37af6a.png)

设置左右`UIBarButtonItems`- 您可以添加它们。

```
UIBarButtonItem *leftBarButton = [[UIBarButtonItem alloc]initWithTitle:@"Left" style:UIBarButtonItemStylePlain target:self action:@selector(leftPress:)];
self.navigationItem.leftBarButtonItem = leftBarButton;

UIBarButtonItem *rightBarButton = [[UIBarButtonItem alloc]initWithTitle:@"Right" style:UIBarButtonItemStylePlain target:self action:@selector(rightPress:)];
self.navigationItem.rightBarButtonItem = rightBarButton; 
```

也减少`FontSize`。在这种情况下`Label`是**12 。**它看起来像这样：

![在此处输入图像描述](../Images/74f6ec27baf569a9611730939a5e7266.png)

**对于扩展问题：**

只需对以前的代码进行一些更改 -

```
[label setNumberOfLines:2]; //Set it 2 instead of 0

NSString *titleStr = @"3456456676456464554541223434484384233456744444444456785643367";

//Check your string length then set font according to it.
//I have set font size according to your requirement
//which is 0-60.

if([titleStr length]>40 && [titleStr length]<=52){
    [label setFont:[UIFont fontWithName:@"Arial" size:13.0]];
}
else if([titleStr length]>52){
    [label setFont:[UIFont fontWithName:@"Arial" size:11.5]];
}

[label setText:titleStr]; 
```

**注意：**您不能使用`adjustsFontSizeToFitWidth:`的属性`UILabel`，因为它不适用于`setNumberOfLines:0`您的情况，您必须有条件地处理它`if`。

这是根据其设置`fontSize`的方法。`UILabel``width`

```
[label setNumberOfLines:1];
label.adjustsFontSizeToFitWidth = YES;
label.minimumFontSize = 1.0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T09:46:44.310

感谢@TheTiger 提供这样的解决方案。
我已经根据我的要求编辑了他的答案。所以这是我的答案

```
UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 44.0)];
[label setBackgroundColor:[UIColor clearColor]];
[label setTextColor:[UIColor whiteColor]];
[label setTextAlignment:NSTextAlignmentCenter];
NSString *titleStr1 = @"1234567890 1234567890 1234567890 1234567890 123 4568";
NSString *titleStr  = @"I am a computer engineer. I wa";
NSLog(@"%d", [titleStr length]);

if([titleStr length]>40 && [titleStr length]<=50){
    [label setNumberOfLines:2]; 
    [label setFont:[UIFont boldSystemFontOfSize:13]];
}
else if([titleStr length]>30 && [titleStr length]<=40){
    [label setNumberOfLines:2]; 
    [label setFont:[UIFont boldSystemFontOfSize:16]];
}
else if([titleStr length]>50){
    [label setNumberOfLines:2]; 
    [label setFont:[UIFont boldSystemFontOfSize:10]];
}
else{
    [label setFont:[UIFont boldSystemFontOfSize:20]];
    [label setAdjustsFontSizeToFitWidth:YES];
}
[label setText:titleStr];
self.navigationItem.titleView = label; 
```

# date - 服务器 strtotime 不正确

> ID：12985413
> 
> 赞同：1
> 
> 时间：2012-10-20T05:00:23.450
> 
> 标签：date, timezone, timestamp, localhost, strtotime

strtotime 和 mktime 都输出了不正确的时间戳，这让我发疯。

如果我添加以下 strtotime('2012-10-09');

我得到 1349701200

实际上是星期一，2012 年 10 月 8 日 13:00:00 GMT

我正在使用我的本地主机，运行 MAMP。我假设这是服务器时区问题或其他问题，但我不明白为什么或如何解决它。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:14:54.090

strtotime 使用默认时区来解释字符串。如果您想要不同的时区，您可以明确指定它或为所有调用更改它：

```
<?php

if (date_default_timezone_get()) {
    echo  'date_default_timezone:  ' . date_default_timezone_get()."\n";
}

echo strtotime('2012-10-09')."\n"; # default timezone
echo strtotime('2012-10-09 UTC')."\n";
date_default_timezone_set('UTC');
echo strtotime('2012-10-09')."\n";
?> 
```

### [输出](http://ideone.com/b3Xpnr)

```
date_default_timezone:  Europe/London
1349737200
1349740800
1349740800 
```

*POSIX 时间戳计算自 1970-01-01 00:00:00 UTC*以来的秒数。例如，纽约的午夜 (00:00) 可能是 UTC 在一年中的这个时候的 20:00（相同的 POSIX 时间戳）。但是 UTC 的 00:00 和纽约的 00:00 对应于不同的时间点（不同的 POSIX 时间戳）。本地时钟通常（粗略地说）跟随太阳，即使您所在的地方是夜晚；太阳照耀着地球的某个地方。

# json - ExtJS：如何加载具有另一个 ComboBox 中的值的 ComboBox？

> ID：12985414
> 
> 赞同：2
> 
> 时间：2012-10-20T05:00:31.797
> 
> 标签：json, extjs, combobox

我有点像 ExtJS 菜鸟。I have a loaded up an ExtJS ComboBox (call it CBa) where the value field contains a JSON string that, when selected, should be loaded into a second combobox (CBb).

我能找到的所有示例都告诉我如何从外部 URL 加载 ComboBox，但在这种情况下，我想从本地已有的字符串加载它。

我在每个 ComboBox 上放置了什么魔法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:12:38.913

您可以像这样创建本地组合：

```
// The data store containing the list of states
var states = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name'],
    data : [
        {"abbr":"AL", "name":"Alabama"},
        {"abbr":"AK", "name":"Alaska"},
        {"abbr":"AZ", "name":"Arizona"}
        //...
    ]
});

var combo2 = Ext.create('Ext.form.ComboBox',{

   // combo config;
});
// Create the combo box, attached to the states data store
Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: states,
    queryMode: 'local', //makes it a local combo. Don't need a url.
    displayField: 'name',
    valueField: 'abbr',
    renderTo: Ext.getBody(),
    listeners : {
          select : function() {
                var value = this.getValue();
                combo2.setValue(value);
          }
    }
}); 
```

使用 的`select`事件`combo`将选定的值设置到第二个组合中。请注意，选择的值应该是在`data`中定义的值`store`，`combo2`以便对其进行设置。[在此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.ComboBox-method-setValue)阅读 setValue 的文档以获取确切信息。

**阅读评论后编辑：**

您可以动态设置第二个组合的商店。将上面提到的选择事件更改为：

```
select : function()
{
      var dataArray = [],data = this.getValue(); //Json string
      dataArray.push(Ext.decode(data)); //In case there is only one object in the string instead of any array.
      combo2.getStore().loadData(dataArray, false); //dataArray is automatically parsed into Model Objects. Second param to allow append to existing store data.
} 
```

}

# android - java.lang.IllegalStateException：递归进入executePendingTransactions，快速切换

> ID：12985416
> 
> 赞同：5
> 
> 时间：2012-10-20T05:00:46.060
> 
> 标签：android, actionbarsherlock

我正在使用其中包含选项卡的操作栏，每个选项卡都是一个片段。一切都很棒，除非我在标签之间快速切换。当我进行快速切换时，我得到了这个错误：

```
java.lang.IllegalStateException: Recursive entry to executePendingTransactions
at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
at android.support.v4.app.FragmentManagerImpl$1.run(Unknown Source)
at android.os.Handler.handleCallback(Handler.java:615)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137) 
```

这是我的 OnTapSelected 代码

```
if (mFragment == null) {

    mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName(), mArgs);
    ft.add(android.R.id.content, mFragment, mTag);

} else {

    ft.attach(mFragment);
} 
```

有什么办法可以解决这个问题吗？或者，如果不是，我怎么能至少捕捉到这个异常（比如在哪里放置 try/catch），这样我的应用程序就不会崩溃？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:55:02.307

而不是使用附加，尝试使用显示/隐藏。您将需要对所有片段的引用，但如果将它们全部添加，则显示正确的片段并隐藏可能修复它的其余片段。

# java - 调整 appletviewer 窗口的大小时，画布大小不会改变

> ID：12985419
> 
> 赞同：0
> 
> 时间：2012-10-20T05:01:17.287
> 
> 标签：java, linux, applet, awesome-wm, appletviewer

对于我的 CS11 课程，我必须编写一个小程序，在屏幕上绘制一条横线和竖线，并在画布中间相交。任务的一部分是当用户单击一条线并执行拖动时能够移动一条或两条线。那部分正在工作。

第二部分涉及处理窗口大小调整。如果窗口被调整大小，则需要调整两条线，使它们从窗口的边缘延伸到边缘。

我们的指令希望我们使用 Java appletviewer 而不是 Web 浏览器来启动程序，以便在程序运行时可以调整窗口大小。我们被告知使用以下 .html 文件。

ResizableBallController.html

```
<html>
  <body>
    <applet
      code="ResizableBallController.class"
      archive="objectdraw.jar"
      width="500"
      height="500">
    </applet>
  </body>
</html> 
```

当我运行程序并调整窗口大小时，画布区域保持固定在 500x500 像素，即使我使窗口更大，并且扩大的区域充满了灰色。根据我的导师的说法，画布应该自动调整以从新调整大小的窗口的边缘延伸到边缘。

为了测试这个问题，我重载了`paint`方法来添加一条`System.out.println`消息，这样我就可以看到它被调用的频率，并且它出现的唯一一次调用方法是在程序启动时。

我想知道这是否与 Awesome Window Manager 或其他什么有关。我这样说是因为教练说当你调整窗口大小时，画布也应该自动调整大小。

这是代码的一部分，因此您可以看到我在做什么：

```
import objectdraw.*;
import java.awt.*;

public class ResizableBallController extends WindowController
{
  // Canvas separators
  private Line xAxis,
               yAxis;

 boolean xAxisGrabbed,
          yAxisGrabbed;

  public void begin()
  {
    int canvasWidth              = canvas.getWidth(),
        canvasHeight             = canvas.getHeight(),
        canvasHorizontalMidPoint = canvasWidth / 2,
        canvasVerticalMidpoint   = canvasHeight / 2;

    xAxis = new Line(0, canvasVerticalMidpoint,
                     canvasWidth, canvasVerticalMidpoint,
                     canvas);

    yAxis = new Line(canvasHorizontalMidPoint, 0,
                     canvasHorizontalMidPoint, canvasHeight,
                     canvas);
  }

  public void onMousePress(Location p)
  {
    xAxisGrabbed = xAxis.contains(p);
    yAxisGrabbed = yAxis.contains(p);
  }

  public void onMouseDrag(Location p)
  {
    if (xAxisGrabbed)
    {
      xAxis.moveTo(0, p.getY());
    }

    if (yAxisGrabbed)
    {
      yAxis.moveTo(p.getX(), 0);
    }
  }

  public void paint(java.awt.Graphics g)
  {
    super.paint(g);
    System.out.println("paint called");
  }
} // End of public class ResizableBallController extends WindowController 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:26:48.040

很奇怪，但是 Java JDK 似乎有一些窗口管理器的问题。无意中找到了解决办法。[Awesome WM 中 JFrame 的位置和 pack()](https://stackoverflow.com/questions/6084977/jframes-position-and-pack-in-awesome-wm?rq=1)

# mysql - MySQL + JSON：检索 id = term 的所有数据

> ID：12985421
> 
> 赞同：1
> 
> 时间：2012-10-20T05:01:41.503
> 
> 标签：mysql, json, html-table

我正在尝试使用 JSON 从我的数据库中检索数据并在表中解析它们。

目前我这样检索它：

```
xmlhttp = new XMLHttpRequest()

xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var jsontext = xmlhttp.responseText;
        var json = JSON.parse(jsontext);

        console.log(json.service)

    }
}

xmlhttp.open("GET", "mysql.php?p=getservice" + "&carid=" + "KYF111", true);
xmlhttp.send(); 
```

这会给我一个结果，无论我有多少行 id 'term'。

我的 mysql.php 文件如下所示：

```
case 'getservice':

$q = mysql_real_escape_string($_GET['q']);
$carid = stripslashes($_GET['carid']);
$query = "SELECT * FROM Service WHERE carid = '".$carid."'";

$result = mysql_query($query);

$json = array();
while ($row = mysql_fetch_array($result)) {

    $json['carid'] = $row['carid'];
    $json['service'] = $row['service'];
    $json['date'] = $row['date'];
    $json['nextdate'] = $row['nextdate'];
    $json['kilometers'] = $row['kilometers'];
    $json['servicedby'] = $row['servicedby'];
    $json['invoice'] = $row['invoice'];
    $json['cost'] = $row['cost'];
    $json['remarks'] = $row['remarks'];

}
print json_encode($json);

mysql_close();

break; 
```

这是我的数据库的样子：

![在此处输入图像描述](../Images/3cffd2f10bde844fee6b8154196389b6.png)

所以**该术语将是 cardid**，我想要包含 carid 术语的行中的所有值。然后单行上的每个值都在 a 之间。像这样的东西：

```
<tbody>
    <tr>
        <td>Tyre</td>
        <td>10-10-2012</td>
        <td>31-10-2012</td>
        <td></td>
        <td>George</td>
        <td>8951235</td>
        <td>0</td>
        <td>Lorem Ipsum</td>
    </tr>
    <tr>
        <td>Lights</td>
        <td>17-10-2012</td>
        <td>23-10-2012</td>
        <td></td>
        <td>Antony</td>
        <td>4367234</td>
        <td>0</td>
        <td>Lorem Ipsum</td>
    </tr>
</tbody> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:13:06.183

您的`while`循环每次都覆盖相同的数组条目，而不是制作一个二维数组。它应该是：

```
$json = array();
while ($row = mysql_fetch_array($result)) {
  $json[] = $row;
}
echo json_encode($json); 
```

在您的 JavaScript 中，您需要遍历返回的数组。而不是`console.log(json.service)`它应该是：

```
for (var i = 0; i < json.length; i++) {
    console.log(json[i].service);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T05:14:22.530

试试这样：

```
 $temp=0;
    $json = array();
        while ($row = mysql_fetch_array($result)) {

            $json[$temp]['carid'] = $row['carid'];
            $json[$temp]['service'] = $row['service'];
            $json[$temp]['date'] = $row['date'];
            $json[$temp]['nextdate'] = $row['nextdate'];
            $json[$temp]['kilometers'] = $row['kilometers'];
            $json[$temp]['servicedby'] = $row['servicedby'];
            $json[$temp]['invoice'] = $row['invoice'];
            $json[$temp]['cost'] = $row['cost'];
            $json[$temp]['remarks'] = $row['remarks'];
    $temp++;
        }
print json_encode($json); 
```

# html - HTML/CSS 元素定位（html 日程/日历）

> ID：12985431
> 
> 赞同：0
> 
> 时间：2012-10-20T05:03:21.883
> 
> 标签：html, css

我正在创建一个基于 html 和 css 的日程安排/日历，但我遇到了一些问题。

这是我到目前为止所拥有的：http: [//jsfiddle.net/Lpfg5/](http://jsfiddle.net/Lpfg5/)

我想要的是能够伸展任何“块”，例如“块-A”或“块-B”。块后面的灰色条只是网格。

另外，我不确定让灰色网格与顶部的时间对齐的最佳方法是什么？

任何帮助将不胜感激。

**HTML 代码：**

```
<div id="schedule_row">
    <div class="day">
        &nbsp;
    </div>
    <div class="timehead">
        6 AM
    </div>
    <div class="timehead">
        7 AM
    </div>
    <div class="timehead">
        8 AM
    </div>
    <div class="timehead">
        9 AM
    </div>
    <div class="timehead">
        10 AM
    </div>
    <div class="timehead">
        11 AM
    </div>
    <div class="timehead">
        12 PM
    </div>
    <div class="timehead">
        1 PM
    </div>
    <div class="timehead">
        2 PM
    </div>
    <div class="timehead">
        3 PM
    </div>
    <div class="timehead">
        4 PM
    </div>
    <div class="timehead">
        5 PM
    </div>
    <div class="timehead">
        6 PM
    </div>
    <div class="timehead">
        7 PM
    </div>
    <div class="timehead">
        8 PM
    </div>
    <div class="timehead">
        9 PM
    </div>
    <div class="timehead">
        10 PM
    </div>
    <div class="timehead">
        11 PM
    </div>
</div>
<div id="schedule_row" style="margin-top: -20px;">
    <div class="day daylist">
        <span class="weekday">Today</span>
        <span class="date">Oct 19, 2012</span>
    </div>
    <div class="timeslot first"><div class="requestblock blue 2hr">Block A</div></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"><div class="requestblock red 2hr">Block B</div></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
</div>
<div id="schedule_row">
    <div class="day daylist">
        <span class="weekday">Saturday</span>
        <span class="date">Oct 20, 2012</span>
    </div>
    <div class="timeslot first"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
    <div class="timeslot"></div>
</div>​ 
```

**CSS：**

```
#schedule_row {
    min-height: 60px;
    display: inline-block;
}
.day {
    display: inline-block;
    min-width: 100px !important;
    font-size: 14px;
    color: #6D645D;
    float: left;
}
.daylist {
    margin-top: 30px;
}
.timeslot {
    display: inline-block;
    float: left;
    background: #E1E1E1;
    margin-right: 3px;
    padding: 8px;
    position: relative;
    min-height: 80px;
    width: 20px;
}
.timehead {
    color: #6D645D;
    font-size: 12px;
    display: inline-block;
    margin-right: 5px;
    width: 25px;
    float: left;
    margin-left: 10px;
    text-align:center;
    line-height: 13px;
}
span.weekday {
    font-size: 15px;
    font-weight: bold;
}
span.date {
    font-size: 12px;
    color: #A8A7A5;
    display: block;
}
.requestblock {
    background: #777777;
    color: #fff;
    padding: 1px 2px;
    margin-top: 30px;
     -moz-border-radius: 2px;
    -webkit-border-radius: 2px;
    -khtml-border-radius: 2px;
    border-radius: 2px;
    position: relative;
    top: 0;
    left:0;
    z-index: 10;
    font-size: 9px;
}
.blue {
    background: #3A87AD;
}
.red {
    background: #B94A48;
}
.first {
    margin-left:5px;
}
.1hr {
    min-width: 300px !important;
}
.2hr {
    min-width: 100px !important;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:59:28.390

如果我对您的理解正确，您希望块 a 和块 b 水平填充灰色条。我通过移除填充`.timeslot`并将宽度增加到 36 像素（8 像素 + 8 像素 + 原始宽度）来做到这一点。你可以在这里看到这个：

如果您指的是每个块的高度，则必须删除`margin-top`on`.requestblock`并在其上声明`height: 80px`。

# c++ - std::set 的有效比较函数

> ID：12985432
> 
> 赞同：0
> 
> 时间：2012-10-20T05:03:57.727
> 
> 标签：c++, set, std

我正在开发一个简单的图形引擎，并且我有 Drawable 对象，这些对象应该在创建时（在构造函数中）将自己注册到渲染器（通过将它们插入到集合中）。它们还需要为渲染进行排序（通过透明度、深度掩码等），即它们需要通过一些布尔标志进行排序。

所以这是我的一套。

```
std::set<Drawable *, DrawableComp> drawable_set; 
```

比较函子：

```
struct DrawableComp : public std::binary_function<const Drawable *, const Drawable *, bool> {
    bool operator() (const Drawable * lhs, const Drawable * rhs) const
    {
        return *lhs < *rhs;
    }
}; 
```

以及 Drawable 的重载 operator<：

```
bool Drawable::operator<(const Drawable & rhs) const
{
    if (writesDepth() != rhs.writesDepth())
        return !writesDepth() < !rhs.writesDepth();
    else
        return getSortNumber() < rhs.getSortNumber();
} 
```

请注意，这应该按顺序将 Drawables 插入到集合中，以便首先进入写入深度缓冲区的对象，然后是那些不写入深度缓冲区的对象。每个对象的排序号都是唯一的。

问题是，这行不通。我得到在集合结束时写入深度缓冲区的 Drawable。

此外， writeDepth() 是虚拟布尔函数。Drawable 只是一个抽象接口。如果我将 writeDepth() 设为纯虚拟，则会收到运行时错误“调用纯虚拟方法”。我不太清楚为什么会这样，因为我从来没有把 Drawable 对象放在集合中，而是放在它的具体实现中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:12:08.357

好的，我发现了问题。我正在从 Drawable 构造函数注册 Drawables。我在构造函数中有这个调用（registerDrawable 只是插入到集合中）：

```
Application::get().getRenderer().registerDrawable(this); 
```

问题是这会发送指向 Drawable 类型对象的指针，而不是某些派生类型，因此设置“不知道”派生类是什么，它只是调用基方法 writeDepth()。

简单的解决方案是将此调用移至派生构造函数。虽然它在我的设计中插入了一些混乱和冗余......

# subquery - 是否可以从子查询过滤器字符串中引用外部查询？

> ID：12985434
> 
> 赞同：1
> 
> 时间：2012-10-20T05:04:11.483
> 
> 标签：subquery, jdo, datanucleus, jdoql

从子查询过滤器中，我以这种方式引用外部查询：

```
type.maxZoneTests > this.fromZone

Query freeZoneSubquery = pm.newQuery(Zone.class, sb.toString());
freeZoneSubquery.setResult("ip.trim()");
outerQuery.addSubquery(freeZoneSubquery, "List reservedZones", null); 
```

但是当我执行主查询时，出现以下错误：

```
javax.jdo.JDOUserException: Query has reference to member "fromZone" of class "com.mg.ipk.Zone" yet this doesnt exist!
    at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:519)
    at org.datanucleus.api.jdo.JDOQuery.executeWithArray(JDOQuery.java:321)
    at com.ipkzen.ta.core.services.dao.ProcedureExecutionRecordDAOImpl.getEligibleTests(ProcedureExecutionRecordDAOImpl.java:83)
    at com.ipkzen.ta.core.services.dao.ProcedureExecutionRecordDAOImpl.main(ProcedureExecutionRecordDAOImpl.java:325)
NestedThrowablesStackTrace:
Query has reference to member "fromZone" of class "com.mg.ipk.Zone" yet this doesnt exist!
org.datanucleus.exceptions.NucleusUserException: Query has reference to member "fromZone" of class "com.mg.ipk.Zone" yet this doesnt exist!
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.getSQLTableMappingForPrimaryExpression(QueryToSQLMapper.java:2262)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.processPrimaryExpression(QueryToSQLMapper.java:2114)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compilePrimaryExpression(AbstractExpressionEvaluator.java:180)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileUnaryExpression(AbstractExpressionEvaluator.java:169)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileAdditiveMultiplicativeExpression(AbstractExpressionEvaluator.java:148)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileRelationalExpression(AbstractExpressionEvaluator.java:123)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileOrAndExpression(AbstractExpressionEvaluator.java:65)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.evaluate(AbstractExpressionEvaluator.java:46)
    at org.datanucleus.query.expression.Expression.evaluate(Expression.java:337)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:70)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:70)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.compileFilter(QueryToSQLMapper.java:461)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.compile(QueryToSQLMapper.java:381)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.processVariableExpression(QueryToSQLMapper.java:3275)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.processInvokeExpression(QueryToSQLMapper.java:2745)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compilePrimaryExpression(AbstractExpressionEvaluator.java:200)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileUnaryExpression(AbstractExpressionEvaluator.java:169)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileAdditiveMultiplicativeExpression(AbstractExpressionEvaluator.java:148)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileRelationalExpression(AbstractExpressionEvaluator.java:123)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileOrAndExpression(AbstractExpressionEvaluator.java:65)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.evaluate(AbstractExpressionEvaluator.java:46)
    at org.datanucleus.query.expression.Expression.evaluate(Expression.java:337)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:70)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.query.expression.DyadicExpression.evaluate(DyadicExpression.java:67)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.compileFilter(QueryToSQLMapper.java:461)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.compile(QueryToSQLMapper.java:381)
    at org.datanucleus.store.rdbms.query.JDOQLQuery.compileQueryFull(JDOQLQuery.java:883)
    at org.datanucleus.store.rdbms.query.JDOQLQuery.compileInternal(JDOQLQuery.java:343)
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1747)
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1666)
    at org.datanucleus.api.jdo.JDOQuery.executeWithArray(JDOQuery.java:312)
    at com.ipkzen.ta.core.services.dao.ProcedureExecutionRecordDAOImpl.getEligibleTests(ProcedureExecutionRecordDAOImpl.java:83)
    at com.ipkzen.ta.core.services.dao.ProcedureExecutionRecordDAOImpl.main(ProcedureExecutionRecordDAOImpl.java:325) 
```

只有当我可以执行连接但我知道 JDO 不允许为子查询声明导入、变量或参数时，我才能解决此问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T07:36:53.213

JDO 规范和 DN 文档很好地定义了所有这些 [http://www.datanucleus.org/products/accessplatform_3_1/jdo/jdoql_subquery.html](http://www.datanucleus.org/products/accessplatform_3_1/jdo/jdoql_subquery.html)

# c++ - C++ - 黑桃 - 类：如何使用它们

> ID：12985437
> 
> 赞同：2
> 
> 时间：2012-10-20T05:05:37.820
> 
> 标签：c++, class, struct

我正在尝试了解如何在学校的这个黑桃游戏项目中使用课程。运行此代码（如下）时，我似乎遇到了各种错误。我正在尝试创建一张牌，创建一个牌组，洗牌该牌组，然后将牌发给玩家和计算机。我不太确定我是否正确使用了类，我还不确定如何在 main() 部分实现它们。任何示例都会非常有帮助和赞赏。

```
#include <iostream>
#include <string>
#include <vector>
#include <stdlib.h>
#include <ctime>
#include <cstdlib>
#include <algorithm>
#include <Windows.h>

// Game Specific Files
#include "CardGameConfig.h"
#include "CardGameFunctions.h"
#include "CardGameStructs.h"

using namespace std;

// Card Class
class Card
{
private:
    int _suit;
    int _rank;
public:
   Card();
   Card(int &iSuit, int &iRank); 
   ~Card(); // Deconstructor
   int GetSuit(); //Method
   int GetRank(); //Method
};

// sets a blank card
Card::Card(){      
    _suit = 0;
    _rank = 0;
}

// creates a card with a given suit
Card::Card(int &iSuit, int &iRank){
    _suit = iSuit;
    _rank = iRank;

} // end of Card function (class member)

int Card::GetSuit(){
        return _suit;
}

int Card::GetRank(){
    return _rank;
}

Card::~Card(){
}

// Deck Class
class Deck
{
private:
    Card cards[TOTAL_CARDS_IN_DECK];
    Card *_pCardList[52];
public:
    Deck();
   ~Deck();
   void Shuffle();
   Card DrawCard();
   Card *_pCardList; // holds an array of cards (52 of them)
   int _index;
};

Deck::Deck(){

    // Start deck index at zero
    _index = 0;
    _pCardList = new Card[TOTAL_CARDS_IN_DECK];

    // TOTAL_CARDS_IN_SUIT = 13
    for(int iRank = 0; iRank < TOTAL_CARDS_IN_SUIT; iRank++)
    {
        int iRankOffset = 2;
        iRank = iRank + iRankOffset;

        //TOTAL_SUITS = 4
        for(int iSuit = 0; iSuit < TOTAL_SUITS; iSuit++){
            iSuit = ESuits(iSuit);
            _pCardList[_index] = Card(iRank, iSuit);        
            _index++;
        } // end of iSuit for loop
    } // end of iRank for loop */
}

void Deck::Shuffle(){
    srand((int) time( NULL ) );

    for(int iCardNum = 0; iCardNum < TOTAL_CARDS_IN_DECK; iCardNum++)
    {
        int iRandomNumber = ( rand() % TOTAL_CARDS_IN_DECK-1);
        Card card = _pCardList[iCardNum];
        _pCardList[iCardNum] = _pCardList[iRandomNumber];
        _pCardList[iRandomNumber] = card;
    }
}

Card Deck::DrawCard(){

    _index++;
    return _pCardList[_index-1];

}

Deck::~Deck()
{
    delete [] cards;
}

int main(int argc, char* argv[]){

    Card CardGame;
    Deck Deck;

//  cout << Deck._pCardList[1].GetRank() << " " << Deck._pCardList[1].GetSuit() <<     endl;

    return 0;
    std::cin.get();
    std::cin.get();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:01:11.590

你不能声明`_pCardList`两次：

```
class Deck {
private:
    Card cards[TOTAL_CARDS_IN_DECK];
    // Card *_pCardList[52]; // FIRST TIME (useless)
    Card *_pCardList;         // SECOND TIME (this should be private)
    int _index;               // This should also be private
public:
    Deck();
    ~Deck();
    void Shuffle();
    Card DrawCard();
}; 
```

一点好处：对于您的绘图功能，您可以这样做：

```
Card Deck::DrawCard(){
    return _pCardList[_index++];
} 
```

这是有效的，因为在递增**之前**`_index++`返回值。`_index`

# python - 在 Python 中以工程单位打印数字

> ID：12985438
> 
> 赞同：1
> 
> 时间：2012-10-20T05:05:39.363
> 
> 标签：python, printing, numbers, format

> **可能重复：**
> [以工程格式打印编号](https://stackoverflow.com/questions/12311148/print-number-in-engineering-format)

如何以 3 的倍数以科学计数法打印数字？例如：

```
1.5e4      --> 15e3
1.27e-8    --> 12.7e-9
2.9855e-11 --> 29.855e-9 
```

我正在寻找类似于`ENG`计算器上的按钮的功能。是否有一个 Python 包可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:27:45.077

似乎还没有这样的功能（至少在 Python 2.7 中），请参阅：[http](http://bugs.python.org/issue8060) ://bugs.python.org/issue8060 在页面[http://bytes.com/topic/python/answers/616948- string-formatting-engineering-notation](http://bytes.com/topic/python/answers/616948-string-formatting-engineering-notation)我找到了以下解决方案（我个人不太喜欢，但似乎可行）：

```
import math

for exponent in xrange(-10, 11):
    flt = 1.23 * math.pow(10, exponent)
    l = math.log10(flt)
    if l < 0:
        l = l - 3
    p3 = int(l / 3) * 3
    multiplier = flt / pow(10, p3)
    print '%e =%fe%d' % (flt, multiplier, p3) 
```

只需根据您的需要进行调整即可。

编辑：也请看这里[以工程格式打印数字](https://stackoverflow.com/questions/12311148/print-number-in-engineering-format)

# java - 在 Freemarker 迭代映射中返回不需要的值

> ID：12985441
> 
> 赞同：2
> 
> 时间：2012-10-20T05:05:58.383
> 
> 标签：java, freemarker

迭代地图时

`<#list map?keys as key> ${key} </#list>`

将返回 clone、1、getKey、5 等

任何人都有解决方案，而不是一一删除不需要的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T08:00:19.103

如果我理解得很好，您可以混合使用方法和键。这取决于`object_wrapper`配置设置 ( `Configuration.setObjectWrapper(ObjectWrapper)`)。如果您使用 a`BeansWrapper`作为`object_wrapper`（而不是`DefaultObjectWrapper`，从来没有这个问题），这可以通过`yourBeansWrapper.setSimpleMapWrapper(true)`. 然而，在那个项目中它可能不是偶然的`false`。FreeMarker 语言没有地图类型存在问题。它有一个叫做哈希的东西，只支持字符串键（子变量）。所以人们可能只使用 -s 的 Java API而不是像,等`java.util.Map`这样的哈希运算符，这是需要的，否则你看不到这些方法。那你应该写。`[]``?keys``setSimpleMapWrapper(false)``Map``map.keySet()`

**更新：**在 2.3.22 及更高版本中，没有人被迫再使用混合方法和键（即使在当时，这也是一个相当令人困惑的解决方法），因为 Java 方法（和 Java Bean 属性）可以在单独的命名空间中通过 访问`?api`，例如`myMap?api.get(nonStringKey)`等`myMap?api.keySet()`。因此，您可以使用仅`ObjectWrapper`公开`Map`密钥并支持该`?api`功能（最好是`object_wrapper=DefaultObjectWrapper(2.3.22)`）、启用`?api`（`api_builtin_enabled=true`；默认情况下不允许向后安全性），然后仅`?api`在需要 Java API 命名空间中的某些内容时使用，否则使用`[]`, `?keys`, 等等，如果你的`Map`键是`String`-s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T08:06:57.043

尝试使用以下语法

```
<#assign keys = map?keys>
<#list keys as key>${key} = ${h[key]}; </#list> 
```

[见链接](http://freemarker.sourceforge.net/docs/ref_builtins_hash.html)

**编辑 - 扩展@ddekany 答案，**

您需要在解析/调用 FTL 的代码中处理此问题，如下所示（只是示例代码）。如果您可以在此处添加 FTL 处理代码，可能会更好。

```
 BeansWrapper ow = new BeansWrapper();
  ow.setExposeFields(true);
 // ow.setSimpleMapWrapper(true);

  Template template = freeMarkerConfiguration.getTemplate(templateName, locale);
  template.setObjectWrapper(ow);
  template.process(root, writer); 
```

# c++ - 循环遍历数组

> ID：12985442
> 
> 赞同：1
> 
> 时间：2012-10-20T05:06:23.197
> 
> 标签：c++, arrays, c++11

我想知道，如何遍历一个 int 数组来获取它的值并设置它的值。我知道如何使用 for 循环来立即获取，但我不确定它是如何工作的，当我在用户创建的对象中使用时，尤其是使用 get set 方法。

我对此完全陌生，并且从我的讲座中获得的指导很少。我希望你们能帮助我。这到我做过的地方。

//point.h

```
class point {
private:
    int x[4];

public:
    int getx();
    void setx();
}; 
```

//point.cpp

```
class point {
   point::getx(){
      // ??????
   }

   point::setx(){
      // ???????
   } 
```

//main.cpp

```
 int main(){
     point objPoint;
     objPoint.setx(/* ???? */);
     ???? = objPoint.getx();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T05:14:28.937

首先，您的`getx`方法应该 return `int*`，而不仅仅是`int`，并且您`setx`应该接收`const int*`作为参数。其次，在您的 point.cpp 文件中，您不应该重新声明`class point`.

```
int* point::getx() { //version with copying
    int* ans = new int[4];
    for (int i = 0; i < 4; i++) {
        ans[i] = x[i];
    }
    return ans;
}

void point::setx(const int* y) {
    for (int i = 0; i < 4; i++) {
        x[i] = y[i];
    }
} 
```

然后你可以像这样使用它们

```
int y[4] = {1, 2, 3, 4};
int* z;
objPoint.setx(y);
z = objPoint.getx(); 
```

完成后不要忘记`delete[] z`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:15:12.427

如果我对您的理解正确，您可能想要更多这样的东西：

点.h：

```
class Point{
private:
  int x, y;
public:
  int getx();
  int gety();
  void setx(int value);
  void sety(int value);
}; 
```

点.cpp

```
int Point::getx() { return x; }
int Point::gety() { return y; }
void Point::setx(int value) { x = value; }
void Point::sety(int value) { x = value; } 
```

主文件

```
int main(int argc, char *argv[])
{
  Point objPoint;
  objPoint.setx(1);
  int x = objPoint.getx();
  cout << "x=" << x << endl;
  return 0
} 
```

更好的是，您可能希望定义一个构造函数，例如`Point (int xvalue, int yvalue)`.

恕我直言 ...

# java - Java中的DOM解析器，带有属性和标签值

> ID：12985445
> 
> 赞同：0
> 
> 时间：2012-10-20T05:07:19.977
> 
> 标签：java, parsing, dom

```
 <Document>
    <Folder>
        <Placemark id="kml_1">
            <name>$1.00 / hr 2hr time limit</name>
            <snippet> </snippet>
            <styleUrl>#ParkingMeterStyler_KMLStyler</styleUrl>
            <ExtendedData>
                <SchemaData schemaUrl="#Meter_Rates_and_Time_Limits">
                    <SimpleData name="RATE">$1.00</SimpleData>
                    <SimpleData name="LIMIT">2hr</SimpleData>
                </SchemaData>
            </ExtendedData>
            <LineString>
                <coordinates>-123.100739208611,49.2630169018194,0 -123.100348847572,49.2630078055425,0 </coordinates>
            </LineString>
        </Placemark>
</Folder>
</Document> 
```

我无法在以下位置提取“$1.00”和“2hr”：

```
<SimpleData name="RATE">$1.00</SimpleData>
<SimpleData name="LIMIT">2hr</SimpleData> 
```

到目前为止，我的代码如下所示，并成功提取了“名称”和“坐标”：

```
public class Debuger {

    public static void main(String argv[]) {

      try {

        File fXmlFile = new File("parkingMeter.xml");
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(fXmlFile);
        doc.getDocumentElement().normalize();

        System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
        NodeList nList = doc.getElementsByTagName("Placemark");
        System.out.println("-----------------------");

        for (int temp = 0; temp < nList.getLength(); temp++) {

           Node nNode = nList.item(temp);
           if (nNode.getNodeType() == Node.ELEMENT_NODE) {

              Element eElement = (Element) nNode;

              System.out.println("Name : " + getTagValue("name", eElement));

              if(eElement.getAttribute("name").equals("RATE")){
                  System.out.println("Rate : " + getTagValue("SimpleData", eElement));
              }else if(eElement.getAttribute("name").equals("LIMIT")) {
                   System.out.println("Limit : " + getTagValue("SimpleData", eElement));
                }

              System.out.println("Coordinates : " + getTagValue("coordinates", eElement));

           }
        }
      } catch (Exception e) {
        e.printStackTrace();
      }
  }

  private static String getTagValue(String sTag, Element eElement) {
    NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

        Node nValue = (Node) nlList.item(0);

    return nValue.getNodeValue();
  }

} 
```

我真的被困在这里，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:38:10.810

这是问题所在：

您的`<ExtendedData>`标签是节点的第 4 个子节点，`<Placemark>`并且您只遍历标签子节点，例如节点，并且通过`getTagValue`，您将获得第一个孙子节点。

```
 NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes(); 
```

请通过迭代node的子节点来纠正遍历。它应该工作。

# php - PHP/PDO：如何处理致命错误：在非对象上调用成员函数 prepare()

> ID：12985447
> 
> 赞同：0
> 
> 时间：2012-10-20T05:07:27.523
> 
> 标签：php, exception, pdo, exception-handling

有人可以提供一种方法来处理`Fatal error: Call to a member function prepare() on a non-object`.

这是我的场景：

我有一个单例数据库类，它存储我的数据库详细信息并在请求时创建 PDO 对象的实例。

然后我有以下两个类：

**基类：**

```
namespace lib\translator;
use lib\database as db;

class EntityTranslator {
    protected $dbConn;

    public function __construct() {
        try {
            $this->dbConn = db\Database::getInstance();
        }
        catch(\PDOException $e) {
            // do some error logging here
        }
    }
} 
```

**子类：**

```
namespace lib\translator;
use lib\entity as entity;

class RequestTranslator extends EntityTranslator {

    public function __construct() {
        parent::__construct();
    }

    public function createRequest() {
        $request = new entity\Request();
        try {
            $stmt = $this->dbConn->prepare("CALL createRequest()");
            $stmt->execute();

            $rowCount = $stmt->rowCount();
            if ($rowCount == 1) {
                $row = $stmt->fetch(\PDO::FETCH_ASSOC);

        // do stuff with the data here
            }
            return $request;
        }
        catch (\PDOException $pdoe) {
        // do error logging here
        }
    }
} 
```

现在，我不知道为什么会发生错误。当我的数据库连接不可用并且 PDO 对象实例化（通过调用完成`db\Database::getInstance()`）引发异常时，我正在尝试处理非常罕见的情况，从而导致变量`$dbConn`剩余`null`。

我意识到，每次使用它之前都可以进行测试`$dbConn`。`null`但正如我所说，这应该是一种非常罕见的情况，实际上可能永远不会发生，所以我不认为`null`每次检查都是明智的性能选择。

我希望能够添加另一个`catch(\Exception $ex){}`块来处理本质上是 a 的内容`NullPointerException`（如在 Java 中所见），但 PHP 不提供此类异常。相反，他们`Fatal error: Call to a member function prepare()`在非对象上发出。

所以我正在寻找的是一种在这种情况下处理这个错误的方法，而不是`null`每次都检查。

也许我错过了 PHP 中错误处理的基本概念，但我还没有找到关于这个主题的权威资源。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:14:18.857

```
public function createRequest() {
        $request = new entity\Request();
        try {
            if(!is_null( $this->dbConn)){
            $stmt = $this->dbConn->prepare("CALL createRequest()");
            $stmt->execute();

            $rowCount = $stmt->rowCount();
            if ($rowCount == 1) {
                $row = $stmt->fetch(\PDO::FETCH_ASSOC);

        // do stuff with the data here
            }
            return $request;
          }
        }
        catch (\PDOException $pdoe) {
        // do error logging here
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:20:05.153

您无法从 PHP 中的致命错误中捕获和恢复。您可以注册一个关闭函数来报告最后一个错误的详细信息，但与 Java 中的 finally 块不同。

此处有更详细的说明： [如何捕获 PHP 致命错误](https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error)

我建议`null`每次都检查一下——与你的代码正在做的其他事情相比，这是一个廉价的调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T07:02:09.133

为什么您的应用程序仍然允许调用`RequestTranslator::createRequest()`，而在实例化时`RequestTranslator`，您已经知道数据库连接是否已正确实例化？

您的应用程序逻辑不应该如下所示：

```
try
{
    /*
     * the following line should throw
     * SomeMeaningfulException when it 
     * is unable to connect to the database
     */
    $rt = new lib\translator\RequestTranslator();

    /*
     * this line should not be reached
     * if the above throws SomeMeaningfulException
     */
    $rt->createRequest();
}
catch( SomeMeaningfulException $e )
{
    /* $rt database connection has not instantiated properly */
} 
```

换句话说，如果你问我，当对象的方法依赖于正常运行时，如果它无法实例化数据库连接，那么构造函数*应该*已经抛出`RequestTranslator`：`SomeMeaningfulException`

 *```
class EntityTranslator {
    protected $dbConn;

    public function __construct() {
        try {
            $this->dbConn = db\Database::getInstance();
        }
        catch(\PDOException $e) {
            // do some error logging here
            throw new SomeMeaningfulException( 'some meaningful message' );
        }
    }
} 
```

如果这不是首选，那么我不明白为什么检查`null`是*一个*很大的问题。我同意其他人的观点，性能损失可能可以忽略不计。*

# c# - 文本框显示从 RichTextBox 返回？

> ID：12985448
> 
> 赞同：1
> 
> 时间：2012-10-20T05:07:36.307
> 
> 标签：c#, .net, winforms, textbox, richtextbox

我正在为当地一家小型公司创建发票程序，但遇到了一些问题。我进行了设置，因此可以通过截取应用程序的屏幕截图来打印发票，然后删除所有图像细节，因此它只是 Windows 窗体中的文本。

问题是 RichTextBoxes 不支持使用 DrawToBitmap 从它们中绘制文本。为了解决这个问题，我尝试使用普通的文本框。将地址输入到新文本框中时，它不会在文本中显示返回值，因此所有内容都被捆绑在一起。有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T05:20:18.927

首先，我假设您的 TextBox 的`Multiline`属性设置为`true`.

这将起作用：

```
textBox1.Text = string.Join(Environment.NewLine, richTextBox1.Lines); 
```

此代码格式化 RichTextBox 中的文本（在其`Lines`属性中），以便您的 TextBox 正确显示它。

# javascript - 如何将 onblur 和 onfocus 添加到输入框中，其值由选择框确定

> ID：12985451
> 
> 赞同：3
> 
> 时间：2012-10-20T05:08:20.373
> 
> 标签：javascript, html

我正在尝试这样做，以便您可以单击以使值从文本框中消失并重新出现（这很简单），但是文本框的值取决于从选择框中选择的内容。

这是javascript：

```
function changeValue(){
    var option=document.getElementById('filter').value;

    if(option=="1"){
            document.getElementById('field').value="Option 1";
    }
        else if(option=="2"){
            document.getElementById('field').value="Option 2";
        }

        else if(option=="3"){
            document.getElementById('field').value="Option 3";
        }

} 
```

这是HTML：

```
<input class="input" type ='text' name="key" id ="field" value ="Option 1" />
<select name="filter" id="filter" onchange="changeValue();">
<option id="1" value="1">Option 1</option>
<option id="2" value="2">Option 2</option>
<option id="3" value="3">Option 3</option>
</select> 
```

我面临的问题是，一旦单击输入框，它就会转到数字 1 值，而不是返回到其 javascript 确定的值。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:18:10.850

在 js 文件的开头声明一个全局变量 x，在每个实例中为这个变量设置一个值。

```
var x = 0;

function changeValue(){
var option=document.getElementById('filter').value;

if(option=="1"){
        document.getElementById('field').value="Option 1";
        x = 'option 1';
}
    else if(option=="2"){
        document.getElementById('field').value="Option 2";
        x = 'option 2';
    }

    else if(option=="3"){
        document.getElementById('field').value="Option 3";
        x = 'option 3';
    }

} 
```

创建一个名为 onblur 的新函数

```
function inputOnBlur() {
    document.getElementById('field').value = x;
} 
```

html

```
<input onblur="inputOnBlur()" class="input" type ='text' name="key" id ="field" value ="Option 1" /> 
```

如果你想要一个 onfocus 功能来清除文本，你可以做类似的事情

```
function inputOnFocus() {
     document.getElementById('field').value = '';
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:25:40.380

它对我有用，看看下面的代码和演示，可能是你没有在脚本标签中包含你的脚本

```
<html>   
   <head>
        <script>
            function changeValue(){
            var option=document.getElementById('filter').value;

            if(option=="1"){
                    document.getElementById('field').value="Option 1";
            }
                else if(option=="2"){
                    document.getElementById('field').value="Option 2";
                }

                else if(option=="3"){
                    document.getElementById('field').value="Option 3";
                }

             }
           </script>
   </head>
   <body>

      <input class="input" type ='text' name="key" id ="field" value ="Option 1" />
      <select name="filter" id="filter" onchange="changeValue();">
        <option id="1" value="1">Option 1</option>
        <option id="2" value="2">Option 2</option>
        <option id="3" value="3">Option 3</option>
     </select>
  </body>
</html> 
```

[http://jsfiddle.net/d4uAh/](http://jsfiddle.net/d4uAh/)

# python - 替换字符串中的所有非字母数字字符

> ID：12985456
> 
> 赞同：119
> 
> 时间：2012-10-20T05:10:04.580
> 
> 标签：python

我有一个字符串，我想用它用星号替换任何不是标准字符或数字的字符，例如（az 或 0-9）。例如，“h^&ell`.,|ow]{+orld”被替换为“h*ell*o*w*orld”。请注意，多个字符（例如“^&”）将替换为一个星号。我该怎么做呢？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-10-20T05:11:02.437

正则表达式来救援！

```
import re

s = re.sub('[^0-9a-zA-Z]+', '*', s) 
```

例子：

```
>>> re.sub('[^0-9a-zA-Z]+', '*', 'h^&ell`.,|o w]{+orld')
'h*ell*o*w*orld' 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-02-28T13:27:31.180

蟒蛇的方式。

```
print "".join([ c if c.isalnum() else "*" for c in s ]) 
```

但是，这不涉及对多个连续的不匹配字符进行分组，即

`"h^&i => "h**i`不像`"h*i"`正则表达式解决方案。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-01-05T05:15:40.283

尝试：

```
s = filter(str.isalnum, s) 
```

在 Python3 中：

```
s = ''.join(filter(str.isalnum, s)) 
```

编辑：意识到OP想要用'*'替换非字符。我的回答不合适

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-08-12T18:54:59.633

使用`\W`相当于`[^a-zA-Z0-9_]`. 检查文档，[https://docs.python.org/2/library/re.html](https://docs.python.org/2/library/re.html)

```
import re
s =  'h^&ell`.,|o w]{+orld'
replaced_string = re.sub(r'\W+', '*', s)
output: 'h*ell*o*w*orld' 
```

更新：此解决方案也将排除下划线。如果您只想排除字母和数字，那么 nneonneo 的解决方案更合适。

# css - Twitter Bootstrap：排水沟

> ID：12985458
> 
> 赞同：1
> 
> 时间：2012-10-20T05:10:47.437
> 
> 标签：css, twitter-bootstrap

据我了解，排水沟是列之间的空白。问题：

1.  `.container`在 Bootstrap 中，我假设排水沟是和之间的空格`.container-fluid`。这个对吗？
2.  根据显示尺寸，装订线宽度似乎在 20px - 30px 之间。如果设计不需要容器之间的间距怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T08:30:20.610

### 1\. 排水沟

排水沟是 之间的空间`.span`，无论是在 a`.row`还是 a`.row-fluid`中。但是装订线宽度由普通网格和流体网格的不同设置定义（一个固定在 中`px`，另一个在 中是相对的`%`）。

如果您使用响应式布局，则根据屏幕宽度设置附加值。

[检查此文档](http://getbootstrap.com/2.3.2/scaffolding.html#gridSystem)（[与 v3 相同](http://getbootstrap.com/css/#grid-options)）

**重要提示：**装订线宽度用于其他几个规则，例如`margin-left`的`.row`或`width`的`.container`。

### 2.没有排水沟

装订线宽度定义为 LESS 变量。如果您想使用没有排水沟的网格，您应该下载[自定义版本的引导程序](http://getbootstrap.com/2.3.2/customize.html#variables)- 请参阅**网格系统**（[与 v3 相同](http://getbootstrap.com/customize/#variables-basics)）。

我自己更喜欢下载LESS文件，之后导入一个覆盖文件`variables.less`，设置我自己的变量并自己编译，这样我就可以升级Bootstrap而不必担心我之前的修改。

# c++ - 从结构中打印单词

> ID：12985460
> 
> 赞同：1
> 
> 时间：2012-10-20T05:11:07.397
> 
> 标签：c++, algorithm, debugging, trie

对于以下结构的一个 trie。

```
struct Trie {

  bool eow; //when a Trie field isWord = true, hence there is a word
  char letter;
  Trie *letters[27];

}; 
```

我正在尝试为自动完成程序创建一个函数，它基本上在给定特定字符串前缀的情况下打印出 trie 中的单词

这是我所拥有的：

```
int wordcheck( TrieNode &node )
  {
    if (node.isWord == 1) // you have found your word, so return true
      {
        return 1;
      }
    for (int i = 0; i < 26; i++)
      {
        if (node.letters[i] != NULL && wordcheck(*(node.letters[i])))
          {
            return 1;
          }
      }
    return 0;
  }

string find (TrieNode &node, const string &word, string acc)
{
   if (word.length() == 0)
    {
      string x = "";
      if (node.isWord == 1){
      x = " ";
      int check = 1;
      for(int i = 0; i < 26; i++)
        {
          if (node.letters[i] != NULL && wordcheck(*(node.letters[i])))
            {
              x = x + acc; check = 0; break;
            }
        }
      if(check == 1)
        { return x; }
      }
  for (int i = 0; i < 26; i++){
    if (node.letters[i] != NULL &&  wordcheck(*(node.letters[i])))
      {
        char let = (char)(i + (int)'a');
        if (x[x.length() - 1 ] == ' ')
          {
            x = x + acc;
          }
        x = x + node.letters[i]->letter 
              + find(*(node.letters[i]), word, acc + node.letters[i]->letter);
      }
  }
  return x;
    }
 else if (node.letters[word[0] - 'a'] == NULL)
   { return ""; }
 else {
   return word[0] + find(*(node.letters[ word[0] - 'a']), 
                         word.substr(1, word.length()-1), 
                         acc + word[0]);
 }
} 
```

如果我给它一个长前缀，它似乎可以工作，它会打印比前缀短的单词。我使用了累积递归，我确信有一种更有效的方法可以做到这一点。我的问题是，是否有人可以让我返回正确的字符串，或者如果可能的话指导我通过更简单的算法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:24:40.670

> 我正在尝试为自动完成程序创建一个函数，它基本上在给定特定字符串前缀的情况下打印出 trie 中的单词

我不打算分析你的程序——对我来说太复杂了，例如我不知道`wordcheck`应该做什么？为什么不是`bool`但是`int`？你真的需要检查你的 sub-trie 是否有任何单词，你真的有没有单词的非空 Trie 吗？

首先-打印所有以给定前缀开头的单词-您需要转到所有这些单词开始的节点：

```
TrieNode* TreeNode::get(std::string word)
{
   TreeNode* retVal = this;
   for (size_t i = 0; i < word.length(); ++i) {
     if (Words[i] < 'a' || words[i] > 'z')
        throw std::runtime_error("Wrong word");
     if (retVal->letters[word[i] - 'a'] != NULL)
         retVal = retVal->letters[word[i] - 'a'];
     else 
         return nullptr;
    }
    return retVal;
} 
```

您需要从给定节点打印所有单词的函数：

```
void TreeNode::printAll(std::ostream& os, std::string prefix)
{
   if (isWord)
     os << prefix << "\n";
   for (size_t i = 0; i < 26; ++i) {
     if (retVal->letters[i] != NULL)
         // this recursive call can be replaced with iterative solution with stack
         letters[i]->print(os, prefix + char('a' + i)); 
    }
} 
```

并结合这些功能 - 为您提供您想要的：

```
void TreeNode::printBeginWith(std::ostream& os, std::string prefix)
{
   TreeNode* node = get(prefix);
   if (node)
      node->printAll(os, prefix);
} 
```

# iphone - 在 Cocos 中检测 Blow through iPhone MIC 然后在图像上执行动画

> ID：12985461
> 
> 赞同：1
> 
> 时间：2012-10-20T05:11:17.263
> 
> 标签：iphone, animation

我正在开发一个与食谱相关的应用程序。在这个应用程序中有一个部分，用户可以通过麦克风吹气，并可以通过使用动画转换 CurlDown 更改图像以及其上的内容。我能够检测到使用以下代码进行打击，

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSURL *url = [NSURL fileURLWithPath:@"/dev/null"];

    NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                              [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                              [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                              [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                              nil];

    NSError *error;

    recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];

    if (recorder) {
        [recorder prepareToRecord];
        recorder.meteringEnabled = YES;
        [recorder record];

        levelTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target: self selector: @selector(levelTimerCallback:) userInfo:nil repeats:YES];

    }
    else{
//       NSLog([error description]);
    }

    image =[[UIImageView alloc] init];
    image.image =[UIImage imageNamed:@"Recipie.png"];
    image.frame =CGRectMake(50, 100, 150, 200);
    [self.view addSubview:image];

}

- (void)levelTimerCallback:(NSTimer *)timer {

    [recorder updateMeters];
    const double ALPHA = 0.05;
    double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
    lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;  
//  NSLog(@"Average input: %f Peak input: %f Low pass results: %f", [recorder averagePowerForChannel:0], [recorder peakPowerForChannel:0], lowPassResults);
    if (lowPassResults >0.055 )
    {
        NSLog(@"Mic blow detected");
        [self changeFrame];

    }

}

-(void)changeFrame
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1];
    [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:image cache:NO];
    [UIView commitAnimations];

} 
```

但我的问题是，当我第一次通过麦克风吹气时，图像会动画 5 到 7 次，而当我第二次吹气时，图像会动画 9 到 10 次，我希望每次检测到这个动画时都会播放一次。请建议我如何使用此代码执行此操作，或者如果有人可以共享本节的代码，对我来说会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:07:32.907

当你得到第一个低通结果 >0.55 时使用 return

我已经解决了问题看看。

```
-(void)readyToBlow1 {

  NSURL *url = [NSURL fileURLWithPath:@"/dev/null"];

  NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                          [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                          [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                          [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                          [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                          nil];

NSError *error;

recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];

if (recorder) {
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;
    [recorder record];
    levelTimer = [NSTimer scheduledTimerWithTimeInterval: 0.01 target: self selector: @selector(levelTimerCallback1:) userInfo: nil repeats: YES];
 } 
  else
     NSLog(@"%@",[error description]);

}

 - (void)levelTimerCallback1:(NSTimer *)timer {

    [recorder updateMeters];

const double ALPHA = 0.05;
double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;
//NSLog(@"lowPassResults= %f",lowPassResults);

if (lowPassResults > 0.55)
{

    lowPassResults = 0.0;

    [self invalidateTimers];

    NextPhase *objNextView =[[NextPhase alloc]init];

    [UIView transitionFromView:self.view
                        toView:objNextView.view
                      duration:2.0
                       options:UIViewAnimationOptionTransitionCurlUp
                    completion:^(BOOL finished) {
                    }
     ];

    [self.navigationController pushViewController:objNextView animated:NO];

    **return;**

  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T06:18:23.137

`levelTimerCallback`我怀疑问题出在你每秒都在打电话的事实。因此，当打击出现时，在整个打击期间，您的回调将使图像发生变化。

解决方法是使用 BOOL 标志：

```
@property (nonatomic) BOOL blowDetected; 
```

在`levelTimerCallback`中，您会跟踪检测到打击的时间和结束的时间，并且您只为新的打击更改图像：

```
- (void)levelTimerCallback:(NSTimer *)timer {

  [recorder updateMeters];
  const double ALPHA = 0.05;
  double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
  lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;  
  if (lowPassResults > 0.055)
  {
    NSLog(@"Blow detected with power: %f", lowPassResults);
    if (!self.blowDetected) {
      self.blowDetected = YES;
      NSLog(@"Mic blow detected");
      [self changeFrame];
    }
  } else {
    NSLog(@"Blow not detected with residual power: %f", lowPassResults);
    self.blowDetected = NO;
  }
} 
```

这应该可以防止同一打击的多个图像更改......

现在，当您在一次打击和下一次打击之间等待足够的时间以使麦克风当前检测到的功率降低到`0.055`阈值以下时，这将正常工作。这意味着在此之前发生的任何打击都将被忽略。

为了改善这一点，我们可以简单地尝试检测过滤值何时增加，而不是简单地过滤信号；所以我建议以下实现：

```
- (void)levelTimerCallback:(NSTimer *)timer {

  [recorder updateMeters];
  const double ALPHA = 0.05;
  double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
  double currentLowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;  
  if (currentLowPassResults > 0.055)
  {
    NSLog(@"Blow detected with power: %f", lowPassResults);
    if (!self.blowDetected || currentLowPassResult > K * lowPassResults) {
      self.blowDetected = YES;
      NSLog(@"Mic blow detected");
      [self changeFrame];
    }
  } else {
    NSLog(@"Blow not detected with residual power: %f", lowPassResults);
    self.blowDetected = NO;
  }
  lowPassResult = currentLowPassResults;
} 
```

您可以通过一些测试找到 K 的最佳值。

在后一种实现中：

1.  当第一次检测到打击时，我们更改图像并进入“等待打击熄灭”模式（self.blowDetected == YES）；

2.  在“等待打击熄灭”模式下，我们不会更改图像，除非我们检测到新的打击，其特点是我们的记录功率明显大于当前水平。

# c - 在不使用库的情况下，如何将浮点数舍入到 C 中的两个位置？

> ID：12985463
> 
> 赞同：0
> 
> 时间：2012-10-20T05:11:54.357
> 
> 标签：c, bit-manipulation

我正在学习操作系统编程，我需要假设我的资源很少。

那么我应该如何计算 2 / 3 并将其截断到小数点后两位？我可以使用任何数学算法或位操作技巧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T06:12:06.283

您不能将浮点数四舍五入到以 10 为底的两个位置或任意数量的以 10 为底的位置，浮点数只是近似值。有很多以 10 为底的数字不能完全表示为具有有限小数位数的以 2 为底的数字，这与您不能用有限的小数位数表示以 10 为底的数字 1/3 完全相同的原因小数位。您应该将浮动视为近似值，然后仅将其作为显示的一部分进行舍入。或者，如果您不想要近似值，请执行类似使用整数表示 1/100 的操作，然后将它们除以 100 以获得要显示的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T05:24:42.110

如果您不打算操纵变量（只是打印它），您也可以使用：

```
printf("%.2f\n", 2.f / 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:05:51.137

```
// this is an old trick from BASIC
// multiply by 100.0 and add 0.5  (the 0.5 is for the rounding)
// normally you want to round rather than truncate for a more accurate result
// take the integer value of this to get rid of additional decimal places
// then divide by 100.0 to get the original number back only rounded
// of course you need to use floating point

#include <stdio.h>
#include <stdlib.h>

int main()
{
    double a=1.0, b=2.0, c=3.0;
    a = (int)((b/c)*100.0+0.5)/100.0;
    printf("%f\n",a);      // print all digits of a
    printf("%10.2f\n",a);  // print only 2 decimal points of a
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T05:13:58.570

四舍五入到小数点后两位：乘以 100，转换为整数，除以 100.0（但请注意，通常不能说浮点数，在其本机表示中，小数点后恰好有两个以十为基数的数字；这些不必是原生表示中的整数。）

出于这个原因 - 我实际上会争辩说，乘以 100，并将其存储为整数，并理解这代表一个单位的 100，是表示“精确到小数点后两位”的更准确的方式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-20T05:14:37.273

我的策略之一是将浮点数（例如 2 / 3）乘以（10 ^ 精度）并通过强制转换为 int 来截断它。

# python - Python，字符串，整数

> ID：12985467
> 
> 赞同：-2
> 
> 时间：2012-10-20T05:12:36.077
> 
> 标签：python, string, integer

我有一个字符串变量：

```
str1 = '0000120000210000' 
```

我想将字符串转换为整数而不会丢失前 4 个零字符。换句话说，我希望整数变量也将前 4 个零数字存储为整数的一部分。

我尝试了该`int()`功能，但无法保留前四位数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T05:26:36.910

您可以使用*两个*整数，一个存储数字的宽度，另一个存储数字本身：

```
kw = len(s)
k = int(s) 
```

要将数字重新组合成一个字符串，请使用`format`：

```
print '{:0{width}}'.format(k, width=kw) # prints 0000120000210000 
```

但是，一般来说，您不应该将标识符（例如信用卡号、学生 ID 等）存储为整数，即使它们看起来是整数。只有在需要进行算术运算时才应使用这些上下文中的数字，并且通常不使用标识符进行算术运算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:20:52.520

您想要的根本无法完成。整数值不存储前导零，因为它们可以有任意数量。所以，不能说要储存多少。

但是，如果您想`print`那样做，可以通过`formatting output`.

**编辑**： -

添加了来自 OP**的 @TimPietzcker 的**评论以做出完整的答案：-

除非您打算用它进行算术运算，否则您永远不应该将数字存储为整数。在所有其他情况下，它们应存储为字符串

# f# - 让绑定支持用双反引号括起来的标点符号，但类型不支持？

> ID：12985468
> 
> 赞同：8
> 
> 时间：2012-10-20T05:12:49.573
> 
> 标签：f#, visual-studio-2012

在 Visual Studio 2012 中使用 F#，此代码编译：

```
let ``foo.bar`` = 5 
```

但是这段代码没有：

```
type ``foo.bar`` = class end

Invalid namespace, module, type or union case name 
```

根据[F# 语言规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html)的第 3.4 节：

```
Any sequence of characters that is enclosed in double-backtick marks (````),
excluding newlines, tabs, and double-backtick pairs themselves, is treated
as an identifier.

token ident =
    | ident-text
    | `` [^ '\n' '\r' '\t']+ | [^ '\n' '\r' '\t'] `` 
```

第 5 节将类型定义为：

```
type := 
    ( type )
    type -> type       -- function type
    type * ... * type  -- tuple type
    typar              -- variable type
    long-ident         -- named type, such as int
    long-ident<types> -- named type, such as list<int>
    long-ident< >      -- named type, such as IEnumerable< >
    type long-ident    -- named type, such as int list
    type[ , ... , ]    -- array type
    type lazy          -- lazy type
    type typar-defns   -- type with constraints
    typar :> type      -- variable type with subtype constraint
    #type              -- anonymous type with subtype constraint 
```

...并且第 4.2 节将 long-ident 定义为：

```
long-ident :=  ident '.' ... '.' ident 
```

据我从规范中可以看出，类型是用长标识命名的，长标识可以是标识。由于 idents 支持双反引号引用的标点符号，因此类型似乎也应该如此。

那么我是否误读了规范？或者这是一个编译器错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T14:23:58.757

看起来规范与实际实现显然不同步，因此在一侧或另一侧存在错误。

当您在双反引号中使用标识符时，编译器将其视为名称并简单地生成具有您在反引号中指定的名称的类型（或成员）。它不进行任何名称修改以确保标识符是有效的类型/成员名称。

这意味着您不能使用与编译代码中的某些标准含义相冲突的标识符并不奇怪。在您的示例中，它是点，但这里有一些其他示例：

```
type ``Foo.Bar``() =  // Dot is not allowed because it represents namespace
    member x.Bar = 0

type ``Foo`1``() =    // Single backtick is used to compile generic types
    member x.Bar = 0

type ``Foo+Bar``() =  // + is used in the name of a nested type
    member x.Bar = 0 
```

上面的示例不允许作为类型名称（因为它们与某些标准含义冲突），但您可以在 let-bindings 中使用它们，因为变量名称没有这样的限制：

```
let ``foo`1`` = 0
let ``foo.bar`` = 2
let ``foo+bar`` = 1 
```

这绝对是应该在文档和规范中解释的东西，但我希望这有助于澄清正在发生的事情。

# php - 生成雷达图的PHP解决方案

> ID：12985469
> 
> 赞同：5
> 
> 时间：2012-10-20T05:12:50.320
> 
> 标签：php, pdf, graph, survey, radar-chart

我的一个客户目前使用**ASP.net**应用程序，该应用程序允许他根据 30 个问题进行用户调查并生成 Excel 报告。该过程耗时耗力，因为它由 5-6 个步骤组成。

他想要一个可以**生成报告**并且可以以**PDF 格式发送的****PHP 解决方案**..

 ****棘手的部分是**五角大楼海图/雷达图**..

Excel 我猜有一组函数来生成这些图表，但**我如何使用 PHP 来做到这一点？**

检查下面的网址..

[http://i.stack.imgur.com/Rpyiq.png](https://i.stack.imgur.com/Rpyiq.png)

快速帮助高度赞赏！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T05:19:43.050

潘卡伊，

以下是几个开源 PHP 雷达/极坐标图的示例

[http://pchart.sourceforge.net/documentation.php?topic=exemple8](http://pchart.sourceforge.net/documentation.php?topic=exemple8) -**强烈推荐**

[http://graphpite.sourceforge.net/docs/plottype/tutorial_plottype.radarchart.pkg.html](http://graphpite.sourceforge.net/docs/plottype/tutorial_plottype.radarchart.pkg.html)

[http://jpgraph.net/download/manuals/chunkhtml/ch16s02.html](http://jpgraph.net/download/manuals/chunkhtml/ch16s02.html)****

# python - 如何用while循环替换for

> ID：12985475
> 
> 赞同：-2
> 
> 时间：2012-10-20T05:13:16.087
> 
> 标签：python

如何将`for`循环更改为`while`循环。`for`使用和`while`循环之间的显着区别是什么？

```
S="I had a cat named amanda when I was little"
count = 0
for i in S:
    if i =="a":
        count += 1
print (count) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:31:23.813

以下是相同代码的 while 循环实现。

```
i = 0
count = 0
while i < len(S):
    if S[i] == 'a':
        count += 1
    i += 1
print count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T05:15:30.673

您需要一个计数器，每次“当计数器 < len(S)”时都会递增

这是一个开始：

```
index = 0
count = 0
while index < len(S):
    #do something with index and S ...
    index += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T05:36:05.693

您也可以通过空字符串/列表/字典的布尔性质来做到这一点。

```
S="I had a cat named amanda when I was little"
count = 0
while S:
    # pop the first character off of the string
    ch, S = S[0], S[1:]
    if ch == "a":
        count += 1
print (count) 
```

# sql - 用于将所有表的列名作为 XML 获取的 SQL Server 查询

> ID：12985491
> 
> 赞同：1
> 
> 时间：2012-10-20T05:15:38.497
> 
> 标签：sql, sql-server, xml, tsql

在我的数据库中，我打算将 - [TableName] 作为第一列，并将“，”（逗号后跟空格 - 分隔符）中该表的所有列作为第二列 - 对于数据库中的所有表。

```
Table A | ColumnA1, ColumnA2, ColumnA3  
Table B | ColumnB1, ColumnB2, ColumnB3
...................................... 
```

并将其作为 XML 检索

```
<TableList>  
<TableName>TableA</TableName> <Columns> ColumnA1, ColumnA2, ColumnA3</Columns>  
<TableName>TableB</TableName> <Columns> ColumnB1, ColumnB2, ColumnB3</Columns>  
</TableList> 
```

SQL Query应该怎么写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T07:00:06.970

这将为您提供所需的 XML。

```
select T.name as TableName,
       (
         select ', '+C.name
         from sys.columns as C
         where C.object_id = T.object_id
         order by C.column_id
         for xml path(''), type
       ).value('substring((./text())[1], 3)', 'varchar(max)') as Columns
from sys.tables as T
order by T.name
for xml path(''), root('TableList') 
```

但我认为这会返回一个更易于处理的 XML。

```
select T.name as TableName,
       (
         select ', '+C.name
         from sys.columns as C
         where C.object_id = T.object_id
         order by C.column_id
         for xml path(''), type
       ).value('substring((./text())[1], 3)', 'varchar(max)') as Columns
from sys.tables as T
order by T.name
for xml path('Table'), root('TableList') 
```

或者也许像这样。

```
select T.name as TableName,
       (
         select C.name as ColumnName
         from sys.columns as C
         where C.object_id = T.object_id
         order by C.column_id
         for xml path(''), type
       ) as Columns
from sys.tables as T
order by T.name
for xml path('Table'), root('TableList') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:56:30.367

你可以试试这个

```
 select isc.TABLE_NAME,stuff((
    SELECT ',' + cast(column_name as varchar(20))
    FROM INFORMATION_SCHEMA.COLUMNS where TABLE_NAME =isc.TABLE_NAME 
     group by TABLE_NAME,COLUMN_NAME
    FOR XML PATH('') 
    ),1,1,'')  as column_name from INFORMATION_SCHEMA.COLUMNS isc
     group by TABLE_NAME 
```

# php - 如何评估数组中的每个值都为真并在这种情况下在 Php 中做一些事情？

> ID：12985494
> 
> 赞同：0
> 
> 时间：2012-10-20T05:16:23.670
> 
> 标签：php, control-structure

我需要在表格中插入多行

```
foreach($answers as $answer){
  $sql =<<<EOD
  INSERT INTO answer(`answer`, `question_id`) 
  VALUES ('$answer', (SELECT `id` FROM question WHERE `title` = '$title'))
  EOD;

  result_array[] = $this->db->query($sql);  
} 
```

我需要检查每个插入查询是否返回`True`。Php 中的控制结构可以让我执行以下操作：

```
if(each_value in result_array == 'True'){
  return 'success';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:25:38.230

为确保您的数组中只有*布尔值*，请对查询函数返回的值进行双重否定（当然，除非它已经返回真/假）。：

```
result_array[] = !! $this->db->query($sql); 
```

* * *

## 替代#1

`array(true)`您可以找到结果数组 ( )之间的唯一值`result_array`，然后使用以下命令查看大小是否等于零`array_diff`：

```
if (sizeof (array_diff (result_array, array (true)) == 0) {
  // all went well
} 
```

* * *

## 替代#2

如果您的结果数组仅包含任何一个值，`true`或者`false`您可以使用`array_product`以下方法破解它：

```
var_dump (array_product (array (true, false, true)));
var_dump (array_product (array (true, true, true))); 
```

输出

```
int(0)
int(1) 
```

`array_product`将数组的所有值相乘，并且由于`true`计算为整数 1 和`false`整数 0，我们可以利用它来发挥我们的优势。

* * *

* * *

## 备选方案#3（不要修改源数组）

您可以使用`array_reduce`回调将数组减少为单个值，例如：

```
if (array_reduce (result_array, function ($a,$b) {return $a && $b;}, true) == true) {
  // all went well
} 
```

这会将数组的每个值隐式转换为*boolean*，并为您提供所需的结果。

^(内联 lambda 需要更新版本的 PHP，如果 lambda 不可用，可以使用常规函数名称作为回调)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:35:21.437

如果数组中的值是`string` `True`而不是`boolean` `true`你可以使用它，否则`array_product`在另一个答案中使用。

```
$res = array_unique($your_array);
if (sizeof($res) === 1 && current($res) == 'True') {
  return 'success';
} 
```

# jquery - 引导日期和时间选择器

> ID：12985495
> 
> 赞同：109
> 
> 时间：2012-10-20T05:16:28.293
> 
> 标签：jquery, twitter-bootstrap, datepicker, datetimepicker

建议我使用任何 JavaScript 来选择日期和时间。

注意：我只想使用一个文件来选择日期和时间。

我已经看到了：

[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

和

[http://jdewit.github.com/bootstrap-timepicker/index.html](http://jdewit.github.com/bootstrap-timepicker/index.html)

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-10-20T06:06:27.463

如果您仍然对选择日期和时间数据的 javascript api 感兴趣，请查看这些项目，它们是 bootstrap datepicker 的分支：

*   [引导日期时间选择器 1](http://tarruda.github.com/bootstrap-datetimepicker/)

*   [引导日期时间选择器 2](http://www.malot.fr/bootstrap-datetimepicker/)

第一个分支是对解析/格式化代码库的重大重构，除了提供所有视图以使用鼠标/触摸选择日期/时间外，它还有一个掩码选项（默认情况下），允许用户快速键入基于日期/时间在预先指定的格式上。

# .htaccess - 如何更改仅供管理员使用的网站

> ID：12985501
> 
> 赞同：0
> 
> 时间：2012-10-20T05:17:59.703
> 
> 标签：.htaccess

我有一个需要对公众不可用的网站。我无法在本地测试我的网站，因为很多内容都依赖于数据库和图像。

目前我正在使用**.htaccess** 拒绝所有人、机器人并允许我的 IP 地址使用该站点。我有一个**拨号 ADSL 调制解调器**并且我的 ISP 连接经常断开会发生什么。所以我需要经常更改 htaccess 中允许的 IP 地址。这太可怕了。

有没有其他方法可以克服这种情况。我看到一篇文章，使网站密码保护。可以吗，或者我应该怎么做才能克服这种可怕的情况。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:39:16.803

是的，密码保护很好。遵循本指南：[http ://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)

您需要创建一个 htpasswd 文件，本质上是保存您的用户名和密码的文件。如果您的托管计划没有 shell 访问权限，您可以转到[在线生成器](http://www.htaccesstools.com/htpasswd-generator/)并在本地创建文件并将其上传到您的托管站点（不要将其放在文档根目录中）。

然后将其添加到您的 htaccess 文件中：

```
AuthType Basic
AuthName "Restricted Files"
AuthUserFile /usr/local/apache/passwd/passwords
Require valid-user 
```

您也可以像以前一样将 IP 列入白名单，但您需要添加以下行：

```
Satisfy Any 
```

这样你的`Allow from 123.45.67.89`线路就足够了，不需要从那个IP登录。

# python - 使用 Numpy 数组进行真正除法的问题

> ID：12985503
> 
> 赞同：3
> 
> 时间：2012-10-20T05:18:07.670
> 
> 标签：python, arrays, numpy, division

假设你有这个数组：

```
In [29]: a = array([[10, 20, 30, 40, 50], [14, 28, 42, 56, 70], [18, 36, 54, 72, 90]])

Out[30]: a
array([[ 0,  0,  0,  0,  0],
       [14, 28, 42, 56, 70],
       [18, 36, 54, 72, 90]]) 
```

现在将第三行除以第一行（使用 from **future** import division）

```
In [32]: a[0]/a[2]
Out[32]: array([ 0.55555556,  0.55555556,  0.55555556,  0.55555556,  0.55555556]) 
```

现在对循环中的每一行执行相同的操作：

```
In [33]: for i in range(3):
            print a[i]/a[2]   
[ 0.55555556  0.55555556  0.55555556  0.55555556  0.55555556]
[ 0.77777778  0.77777778  0.77777778  0.77777778  0.77777778]
[ 1\.  1\.  1\.  1\.  1.] 
```

一切看起来都不错。但是现在，将第一个数组 a[i]/a[2] 分配给 a[i]：

```
In [35]: for i in range(3):
            a[i]/=a[2]
   ....:     

In [36]: a
Out[36]: 
array([[0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0],
       [1, 1, 1, 1, 1]]) 
```

好吧，没问题。原来[这是设计](http://projects.scipy.org/numpy/ticket/2061)使然。相反，我们应该这样做：

```
In [38]: for i in range(3):
            a[i] = a[i]/a[2]
   ....:     

In [39]: a
Out[39]: 
array([[0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0],
       [1, 1, 1, 1, 1]]) 
```

但这不起作用。为什么以及如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T05:21:56.400

您可以先将整个数组转换为`float`数组：

```
a = a.astype('float')
a /= a[2] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T05:33:06.757

“为什么这不起作用” - 它不起作用的原因是因为 numpy 数组在创建时具有数据类型。任何将不同类型放入该数组的尝试都将被强制转换为适当的类型。换句话说，当您尝试将浮点数放入整数数组时，numpy 会将浮点数转换为 int。这背后的原因是因为 numpy 数组被设计为同质类型，以使它们具有最佳性能。换句话说，它们在 C 中被实现为数组。在 C 中，你不能有一个数组，其中 1 个元素是 a`float`而下一个元素是 a `int`。（你可以有`struct`s 的行为，但它们不是数组）。

另一种解决方案（除了@nneonneo 提出的解决方案）是从一开始就将数组指定为浮点数组：

```
a = array([[10, 20, 30, 40, 50], [14, 28, 42, 56, 70], [18, 36, 54, 72, 90]], dtype=float) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T05:39:00.487

问题不是部门，而是分配，即`a[i] = ...`（当你这样做时，它也会在幕后使用`a /= ...`）。试试这个：

```
>>> a = np.zeros(3, dtype='uint8')
>>> a[:] = [2, -3, 5.9]
>>> print a
[  2 253   5] 
```

当您执行`intarray[i] = floatarray[i]`numpy 时，必须截断浮点值以使其适合`intarray`.

# javascript - 仪表板应用程序的 Ember.js 架构

> ID：12985505
> 
> 赞同：4
> 
> 时间：2012-10-20T05:18:31.523
> 
> 标签：javascript, ember.js

我开始与 Ember 合作。看起来它是一个很好的框架，我已经阅读了很多关于绑定、观察者、视图、对象等的教程。我觉得我对 Ember 的基本知识有很好的了解。我做了几个小的 POC。现在我想构建一个仪表板，它将包含不同类型的小部件（不同的大小、布局、信息等），并且这些小部件将使用不同的 API。我见过很多这样的例子：

[http://addyosmani.github.com/todomvc/architecture-examples/emberjs/](http://addyosmani.github.com/todomvc/architecture-examples/emberjs/) [http://andymatthews.net/code/emberWineshop/](http://andymatthews.net/code/emberWineshop/)

但是它们都在渲染相同的视图列表。我试图了解如何将不同类型的视图呈现到我的主仪表板视图中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T05:42:51.917

调查`Ember.ContainerView`。它使您可以管理 的集合`childViews`，该集合可以是从`Ember.View`. 如果我正在构建一个“小部件”仪表板，那将是我的方法。

# c++ - 我应该如何处理信用卡号验证算法？

> ID：12985509
> 
> 赞同：3
> 
> 时间：2012-10-20T05:19:03.813
> 
> 标签：c++, luhn

我正在编写一个程序来验证信用卡号码，我必须使用 Luhn 算法。让我提前说一下，我刚刚开始学习编程（我们像上周一样讨论了循环），所以有很多我不熟悉的东西。我的一个检查算术的函数有问题。基本上，它必须从右到左每隔一个数字加倍并将所有内容加在一起。但是如果你将一个数字加倍，比如 5，你得到 10，那么你将不得不将 1+0=1 添加到总和而不是 10。这就是我坚持的部分。我怎样才能把它放在一个程序中？

到目前为止的示例代码：

```
int 
doubleEvenSum(string creditCardNumber) {
  int evenSum; 
  int countPosition; 
  int doublePosition; 
  int length;

  length = creditCardNumber.length (); 
  countPosition = creditCardNumber.at(length - 2); 
  evenSum = 0; 
  while(countPosition>0) { 
    if ((2 * countPosition) < 10) { 
      doublePosition = 2 * countPosition; 
    } 
    else if ((2 * countPosition) > 9) { 
      ??? 
    } 
    evenSum = evenSum + doublePosition; 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:38:23.790

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

/*
    return the Luhn (MOD10) checksum for a sequence of digits.

    -1 is returned on error (a non-digit was in the sequence 

 */

int mod10( char const* s)
{
    int len = strlen(s);
    int sum = 0;

    int dbl = 0;

    while (len) {
        char digit;
        int val;

        --len;
        digit = s[len];

        if (!isdigit( (unsigned char) digit)) return -1;    // non digit in the sequence

        val = digit - '0';  // convert character to numeric value

        if (dbl) {
            // double the value
            val *= 2;

            // if the result is double-digits, add the digits together
            if (val > 9) {
                val = val - 10;
                val = val + 1;
            }
        }

        dbl = !dbl; // only double value every other time

        sum += val;
    }

    return sum % 10;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:54:54.427

这是一个不同的算法。我从 C# 示例中剪切/粘贴；第二个链接讨论了 Luhn 的一些优化。

请研究此示例，并通过调试器运行它以研究代码在执行时的行为方式。了解代码的*实际*运行方式（而不是您在编写代码时*认为*它会如何运行）是一项*基本*技能。恕我直言....

```
/*
 * Validate credit card with Luhn Algorithm
 *
 * REFERENCES:
 * - http://jlcoady.net/c-sharp/credit-card-validation-in-c-sharp
 * - http://orb-of-knowledge.blogspot.com/2009/08/extremely-fast-luhn-function-for-c.html
 */
#include <stdio.h>   // printf(), scanf(), etc
#include <string.h>  // strlen (), etc
#include <ctype.h>   // isdigit(), etc
#if !defined(FALSE)
  #define FALSE 0
  #define TRUE ~FALSE
#endif

/*
 * type definitions (should go in separate header)
 */
enum CardType {
  MASTERCARD=1, BANKCARD=2, VISA=3, AMEX=4, DISCOVER=5, DINERS=6, JCB=7
};

/*
 * function prototypes (should also go in header)
 */
int luhn (int number[], int len);
bool validate (CardType cardType, char *cardNumber);

/*
 * program main
 */
int
main (int argc, char *argv[])
{
  char cc_number[80];
  int cc_type;
  for ( ;; ) {
    printf ("Enter a credit card number and type (1, 2, 3, 4, 5\. 6 or 7):\n");
    printf ("  MASTERCARD=1, BANKCARD=2, VISA=3, AMEX=4, DISCOVER=5, DINERS=6, JCB=7\n");
    int iret = scanf ("%s %d", cc_number, &cc_type);
    if (iret == 2)
      break;
    else
      printf ("Incorrect input: please enter a valid CC# and CC type\n");
  }
  if (validate ((CardType)cc_type, cc_number))
    printf ("Valid\n");
  else
    printf ("Invalid card type/number\n");
  return 0;
}

/*
 * validate card#
 */
bool
validate (CardType cardType, char *cardNumber)
{
  // 16 or fewer digits?
  int len = strlen(cardNumber);
  if (strlen (cardNumber) > 16)
    return false;

  // number to validate
  int number[16]; 
  for(int i = 0; i < (int)strlen (cardNumber); i++) {
    if(!isdigit(cardNumber[i]))
      return FALSE;
    number[i] = cardNumber[i] - '0';
  }

  // Validate based on card type, first if tests length, second tests prefix
  switch(cardType)  {
    case MASTERCARD:
      if(len != 16)
        return FALSE;
      if(number[0] != 5 || number[1] == 0 || number[1] > 5)
        return FALSE;
      break;

    case BANKCARD:
      if(len != 16)
        return FALSE;
      if(number[0] != 5 || number[1] != 6 || number[2] > 1)
        return FALSE;
      break;

    case VISA:
      if(len != 16 && len != 13)
        return FALSE;
      if(number[0] != 4)
        return FALSE;
      break;

    case AMEX:
      if(len != 15)
        return FALSE;
      if(number[0] != 3 || (number[1] != 4 && number[1] != 7))
        return FALSE;
      break;

    case DISCOVER:
      if(len != 16)
        return FALSE;
      if(number[0] != 6 || number[1] != 0 || number[2] != 1 || number[3] != 1)
        return FALSE;
      break;

    case DINERS:
      if(len != 14)
        return FALSE;
      if(number[0] != 3 || (number[1] != 0 && number[1] != 6 && number[1] != 8) || number[1] == 0 && number[2] > 5)
        return FALSE;
      break;

    case JCB:
      if(len != 16 && len != 15)
        return FALSE;
      if(number[0] != 3 || number[1] != 5)
        return FALSE;
      break;
    default:
      return FALSE;
  }

  int sum = luhn (number, len);
  return (sum % 10 == 0);
}

// Use Luhn Algorithm to validate
int luhn (int number[], int len)
{
  int sum = 0;
  for(int i = len - 1; i >= 0; i--)
  {
    if(i % 2 == len % 2)
    {
      int n = number[i] * 2;
      sum += (n / 10) + (n % 10);
    }
    else
      sum += number[i];
  }
  return sum;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T22:49:30.710

```
int luhnCardValidator(char cardNumbers[]) {
    int sum = 0, nxtDigit, i;
    for (i = 0; cardNumbers[i] != NULL_TERMINATOR ; i++) {
         nxtDigit = cardNumbers[i] - START_OF_ASCII_NUMERIC;
        if (i % 2 == 0) 
          nxtDigit  = (nxtDigit > 4) ? (nxtDigit * 2 - 10) + 1 : nxtDigit * 2;
        sum += nxtDigit;
    }
    return (sum % 10);
} 
```

这：

```
... (nxtDigit > 4) ? (nxtDigit * 2 - 10) + 1 : ... 
```

是聪明的一点。如果数字大于 4，则加倍将是 10 或更多。在这种情况下，您将加倍的数字减去 10，得到个位，然后再加 1（十位）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-03T11:44:51.123

只需从数字的双倍中减去 9，就等于数字的总和。例如。

7= 7*2 = 14 = 1+4 = 5 或 14-9 = 5

这比编写添加两个数字的代码更有效。

# c# - 用户同时生成时无法创建文件

> ID：12985510
> 
> 赞同：0
> 
> 时间：2012-10-20T05:19:26.910
> 
> 标签：c#, asp.net, asp.net-mvc, file-io

我有一个代码可以在服务器目录上创建一个 xml 文件，这个代码就像一个魅力一样工作，直到用户同时处理这个代码。快一毫秒的用户将成功生成一个文件，而另一个用户将丢失它。请帮帮我。

```
public static void XmlOrder(arg_order mod, string NewAddress)
    {
            XmlDocument XDoc = new XmlDocument();
            XmlDeclaration xde = XDoc.CreateXmlDeclaration("1.0", "", "");

            XDoc.AppendChild(xde);

            XmlElement XElemRoot = XDoc.CreateElement("Digital_Order");
            XElemRoot.SetAttribute("xmlns", "");
            XDoc.AppendChild(XElemRoot);

            foreach (arg_order modDetail in mod.arg_orders) {

                XmlElement Xsource = XDoc.CreateElement("Document");
                XElemRoot.AppendChild(Xsource);

                XmlElement XTemp = XDoc.CreateElement("wt_web_Id");
                XTemp.InnerText = modDetail.order_detail_id.ToString();
                Xsource.AppendChild(XTemp);

                XTemp = XDoc.CreateElement("wt_addr");
                XTemp.InnerText = modCompany.qad_no;
                Xsource.AppendChild(XTemp);
            }
            //naming and path
            string name = arg_order_detail.FindAll().Count.ToString() + ".xml";
            string path = ArgenXmlOrderPath + "/" + name;
            XDoc.Save(path);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T05:25:06.680

那是因为您的用户试图同时写入同一个文件。
通过在文件名中添加诸如 orderID 之类的内容，使您的文件名独一无二。

```
string name = modDetail.order_detail_id.ToString() + ".xml";
string path = ArgenXmlOrderPath + "/" + name;
XDoc.Save(path); 
```

# css - IE8 css 样式表宽度和对齐问题

> ID：12985519
> 
> 赞同：0
> 
> 时间：2012-10-20T05:20:35.573
> 
> 标签：css, internet-explorer-8, alignment

[http://techmobile.com/defaultIE8TEST.html#footer](http://techmobile.com/defaultIE8TEST.html#footer)

看起来我在 hometext div 下的表格在 IE8 中工作正常（根据 browsershots dot org IE7 的正文页脚也被拍摄）。

ie8 [http://browsershots.org/screenshots/6d7e47f9d7a763a5942211235691915c](http://browsershots.org/screenshots/6d7e47f9d7a763a5942211235691915c)

表格宽度延伸得不够远并衬托了其他图形，这是我对问题的总结。但是什么 CSS 修复了它？

我添加了最后一部分#wrapper #hometext。否则， IE8 的 CSS 中的~~掘金~~很少

```
@charset "UTF-8";
/* IE 8 CSS Document */

/* top area */

#top #phone {
    width: 110px;
    font-size: 17px;
    font-weight: bold;
}
#wrapper #headermenu ul.menu li {
    font-weight: bold;
}

#wrapper #hometxt {
  background-color: #FFFFFF;
  border: 0 solid #000</b> 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:22:30.117

尝试添加

`style="table-layout: fixed;"`到表标签。

# sql-server - 按分区号合并两个数据库表分区

> ID：12985524
> 
> 赞同：1
> 
> 时间：2012-10-20T05:21:42.627
> 
> 标签：sql-server, sql-server-2008, tsql

我使用以下函数在 SQL Server 中创建了四个分区。

```
CREATE PARTITION FUNCTION fnYearsRT(DateTime)
AS RANGE RIGHT FOR VALUES
('01/01/2005', '01/01/2006', '01/01/2007', '01/01/2008');

CREATE PARTITION SCHEME date_partscheme
 AS PARTITION fnYearsRT
 TO (Filegroup1, Filegroup2, Filegroup3, Filegroup4,Filegroup5)

CREATE TABLE Sales.ReturnsArchive
  (
     ReturnID  int  IDENTITY NOT NULL, 
     ProductID  int  NOT NULL, 
     CustomerID  int  NOT NULL, 
     ReturnDate  datetime  NOT NULL,  
     ReturnReason  char(20)  NULL  
  ) 
 ON date_partscheme (ReturnDate) 
```

插入数据后，我有以下统计信息

```
Partition   COUNT
2       5151
3       19353
4       51237
5       45576 
```

我想合并分区 2 和 3，但我无法决定我应该在合并函数中给出哪个范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T07:54:46.907

您实际上有 5 个分区，而不是 4 个，第一个似乎是空的。要合并分区 2 和 3，请使用以下代码：

```
ALTER PARTITION FUNCTION 
    MERGE RANGE('01/01/2006') 
```

这将为您提供以下范围：

1.  ~ 至“2004 年 12 月 31 日”
2.  '01/01/2005' 到 '31/12/2006'
3.  “2007 年 1 月 1 日”至“2007 年 12 月 31 日”
4.  '01/01/2008' 到 ~

# android - android 社 交身份验证查询

> ID：12985527
> 
> 赞同：-1
> 
> 时间：2012-10-20T05:22:28.507
> 
> 标签：android, socialauth

我想在android中实现社交认证。我已经通过了[android-social-auth](http://code.google.com/p/socialauth-android/)。我发现它不支持 2.2 froyo。请向我推荐支持 android 2.2 froyo 的库。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:41:30.530

好吧，我还没有使用[getsocialize](http://www.getsocialize.com)但已阅读此[文档](http://socialize.github.com/socialize-sdk-android/)。希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T12:50:35.993

实际上现在 socialauoth 支持 android 2.2 和更少 [http://code.google.com/p/socialauth/issues/detail?id=252](http://code.google.com/p/socialauth/issues/detail?id=252)

# c# - 获取当前在 windows 目录中打开的文件名

> ID：12985529
> 
> 赞同：1
> 
> 时间：2012-10-20T05:22:34.597
> 
> 标签：c#, .net, wpf, windows

我正在 WPF 和 C# 中开发文件监视应用程序。现在我想在我的应用程序在后台运行时监视给定目录中的文件。我将在第一时间提供目录名称。然后我想监视该目录中的文件是否打开或当前正在访问或修改。

在WPF中可以吗？有链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:29:18.463

FileSystemWatcher 是你想要的，检查[http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.notifyfilter.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.notifyfilter.aspx)

这是一个示例：[http ://social.msdn.microsoft.com/Forums/en-US/sbappdev/thread/229fc072-a149-4713-8e20-9b5d6eecee71](http://social.msdn.microsoft.com/Forums/en-US/sbappdev/thread/229fc072-a149-4713-8e20-9b5d6eecee71)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:29:50.693

您可能希望使用[FileSystemWatcher编写](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)[Windows 服务](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.aspx)。

# php - Jquery简单的Ajax POST请求不起作用

> ID：12985531
> 
> 赞同：0
> 
> 时间：2012-10-20T05:22:52.407
> 
> 标签：php, jquery, html, ajax

我已经制作了一个测试 jquery-ajax 发布脚本，我将在我的评分和评论系统中实现它，但是这个脚本不起作用。

我只做了这样的简单发布请求。

**测试.php**

```
<script type="text/javascript" src="js/jquery.js"></script> 
<script type="text/javascript">
$.ajax({ 
  type: "POST",
  url: 'test.php',                        
  data: {
        value1:'value1', 
        value2:'value2', 
        value3:'value3', 
        value4:'value4', 
        value5:'value5', 
        value6:'value6', 
        value7:'value7', 
        value8:'value8'
      },                        
  cache: false,              
  success: function(value)          
   {
       alert(value)
   }
});
</script>

<?php 
$value1 =  $_POST['value1'];
$value2 =  $_POST['value2'];
$value3 =  $_POST['value3'];
$value4 =  $_POST['value4'];
$value5 =  $_POST['value5'];
$value6 =  $_POST['value6'];
$value7 =  $_POST['value7'];
$value8 =  $_POST['value8'];

$value = array($value1,$value2,$value3,$value4,$value5,$value6,$value7,$value8);
echo json_encode($value);

?> 
```

请查看并提出使其工作的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:07:29.557

为了解决 Pragnesh Chauhan 提到的问题，问题看起来是由于返回的 JSON 无效（因为包含您的其他页面代码使其无效。对此有 2 个简单的解决方案。

首先，是 Pragnesh Chauhan 的，将您的 ajax 调用放在另一个文件中，并且更确定没有其他内容被发送到浏览器（包括尾随空格）。

其次是将您当前的单文件方法改造成可行的方法。你可以通过让它看起来更像这样来做到这一点......

```
<?php 
if(isset($_POST['value1']){ // Checking to see if something was sent to the ajax, you coudl also send another variable is value1 isn't a garuntee
  $value1 =  $_POST['value1'];
  $value2 =  $_POST['value2'];
  $value3 =  $_POST['value3'];
  $value4 =  $_POST['value4'];
  $value5 =  $_POST['value5'];
  $value6 =  $_POST['value6'];
  $value7 =  $_POST['value7'];
  $value8 =  $_POST['value8'];
  $value = array($value1,$value2,$value3,$value4,$value5,$value6,$value7,$value8);
  echo json_encode($value);
  exit(); // This tells it to stop so it won't echo out the rest of your page.
}?> 
<script type="text/javascript">
$.ajax({ 
  type: "POST",
  url: 'test.php',                        
  data: {
    value1:'value1', 
    value2:'value2', 
    value3:'value3', 
    value4:'value4', 
    value5:'value5', 
    value6:'value6', 
    value7:'value7', 
    value8:'value8'
  },                        
  cache: false,              
  success: function(value){
    alert(value)
  }
});
</script> 
```

当然，您可以进行其他改进以使整个事情变得更整洁，但这至少应该让您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:39:01.347

您应该使用不同的文件进行 ajax 调用，否则它将返回该页面上的所有 html

所以我用了两个文件

**索引.php**

```
<script type="text/javascript">
$(document).ready(function() {
$.ajax({ 
 type: "POST",
 url: 'test.php',                        
 data: {
    value1:'value1', 
    value2:'value2', 
    value3:'value3', 
    value4:'value4', 
    value5:'value5', 
    value6:'value6', 
    value7:'value7', 
    value8:'value8', //value5:'value8' before
  },
 cache: false,              
 dataType: 'json',  //as you are return json from php file so i used dataType json
 success: function(value)          
  {
   $.each(value, function(key, val){
    alert(val);
   });
  }
});
}); 
```

**测试.php**

```
<?php 
$value1 =  $_POST['value1'];
 $value2 =  $_POST['value2'];
$value3 =  $_POST['value3'];
$value4 =  $_POST['value4'];
$value5 =  $_POST['value5'];
$value6 =  $_POST['value6'];
$value7 =  $_POST['value7'];
$value8 =  $_POST['value8'];

$value = array($value1,$value2,$value3,$value4,$value5,$value6,$value7,$value8);
echo json_encode($value);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T05:46:52.173

检查`POST`数组变量是否由

```
$value1 =  isset($_POST['value1']) ? $_POST['value1'] : ''; 
```

# c - 对所需参数使用 getopt

> ID：12985532
> 
> 赞同：7
> 
> 时间：2012-10-20T05:23:00.633
> 
> 标签：c, arguments, getopt

我目前的代码如下所示：

```
while (( flags = getopt(argc, argv, "abc")) != -1){
    switch(flags){
    case 'a':
        dflag = 1;
        break;
    case 'b':
        rflag = 1;
        break;
    case 'c':
        cflag = 1;
        break;
    }
} 
```

问题是我想包含类似 testprogram -c -d 1

如果需要 c 来处理 -d，而没有 -c，则 testprogram -d 1 将仅在没有参数的情况下运行。

我尝试了各种各样的东西，但我似乎无法让它发挥作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T05:40:43.500

我认为您有两种选择，一种可行，另一种可能可行，也可能不可行。

“可能工作或可能不工作”选项将通过以下方式举例说明：

```
char *opts = "abc";
char *opts_d = "abcd:";

while ((opt = getopt(argc, argv, opts)) != -1)
{
    switch (opt)
    {
    case 'a':
        aflag = 1;
        break;
    case 'b':
        bflag = 1;
        break;
    case 'c':
        cflag = 1;
        opts = opts_d;
        break;
    case 'd':
        dflag = 1;
        dvalue = optarg;
        break;
    default:
        ...error handling...
        break;
    }
} 
```

我不确定是否有任何东西阻止您在连续调用 [ 时更改有效选项列表`getopt()][1]`，但我知道通常不会在您进行时更改选项。所以，谨慎对待。请注意，如果`-c`从未找到该选项，则 的`opt`值`d`将永远不会返回`getopt()`，因此不会执行其他代码。请注意，如果用户`-d`在 之前输入了一个选项`-c`，`getopt()`则在处理 时会报告一个无效选项`-d`。您可以控制错误报告；你可能不得不这样做。（该`optopt`变量包含实际遇到的无效选项字母。）

“将工作”选项是：

```
while ((opt = getopt(argc, argv, "abcd:")) != -1)
{
    switch (opt)
    {
    case 'a':
        aflag = 1;
        break;
    case 'b':
        bflag = 1;
        break;
    case 'c':
        cflag = 1;
        break;
    case 'd':
        if (cflag == 0)
            ...report error about must use -c option before -d option...
        dflag = 1;
        dvalue = optarg;
        break;
    default:
        ...error handling...
        break;
    }
} 
```

# java - 获取 org.hibernate.MappingException：没有 JDBC 类型的方言映射：-4 异常？

> ID：12985533
> 
> 赞同：1
> 
> 时间：2012-10-20T05:23:11.083
> 
> 标签：java, mysql, hibernate, mapping, innodb

我在**query.list()**行收到以下异常：

```
org.hibernate.MappingException: No Dialect mapping for JDBC type: -4
    at org.hibernate.dialect.TypeNames.get(TypeNames.java:56)
    at org.hibernate.dialect.TypeNames.get(TypeNames.java:81)
    at org.hibernate.dialect.Dialect.getHibernateTypeName(Dialect.java:369)
    at org.hibernate.loader.custom.CustomLoader$Metadata.getHibernateType(CustomLoader.java:559)
    at org.hibernate.loader.custom.CustomLoader$ScalarResultColumnProcessor.performDiscovery(CustomLoader.java:485)
    at org.hibernate.loader.custom.CustomLoader.autoDiscoverTypes(CustomLoader.java:501)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
    at org.hibernate.loader.Loader.doQuery(Loader.java:662)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
    at org.hibernate.loader.Loader.doList(Loader.java:2211)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2095)
    at org.hibernate.loader.Loader.list(Loader.java:2090)
    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:289)
    at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1695)
    at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:142)
    at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:152) 
```

以下是我的配置文件：

```
<property name="hibernate.connection.driver_resource">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.password">mysql</property>
        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/mydatabase</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.default_schema">mydatabase</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property> 
```

当我尝试在 Eclipse IDE 中运行应用程序时，不会出现此异常，但是当我创建应用程序 jar 并运行时，只有我得到它。提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T06:49:37.787

有时，数据库以无法映射到 Hibernate 类型的奇怪类型返回自定义 SQL 查询的结果（尤其是当您使用 下的表达式时`select`）。

您需要找到一个有问题的查询并向其添加显式强制转换。

例如

```
Object o = session.createSQLQuery("select 2*2").uniqueResult(); 
```

可能会导致这样的问题。您可以按如下方式修复它：

```
Object o = session.createSQLQuery("select cast(2*2 as int)").uniqueResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:50:20.733

得到了解决方案：

只需更改查询，我正在获取整个记录而不是选择特定的。例如**从表中**，然后从表对象中获取相应的字段（此处为脚本）值，而不是使用**从表中选择脚本**，它现在工作正常。

# ruby - 我是否在 sinatra 中正确加载脚本？

> ID：12985536
> 
> 赞同：2
> 
> 时间：2012-10-20T05:23:44.297
> 
> 标签：ruby, sinatra, datamapper

我以前从未在 sinatra 中做过任何事情，并决定在一个项目中尝试一下。我对脚本加载的工作方式感到困惑。它似乎间歇性地工作。有时 2 个脚本/css 文件会有内部服务器错误，有时它们都会有错误。

这是我的 layout.erb ：

```
<!doctype html>

<html>

  <head>
    <title>An HTML5 box of sand</title>
    <meta charset="utf-8" />

    <link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>

    <link rel="stylesheet/less" type="text/css" href="/assets/stylesheets/style.less">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script><!--loads jquery-->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script><!--loads jquery ui-->  
    <script type="text/javascript" src="/assets/js/lib/handlebars.js"></script>
    <script src="/assets/js/lib/less-1.3.0.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="/assets/js/script.js"></script><!--This is the place where you play!!!-->

  </head>

<body>
<%= yield  %>
</body>

</html> 
```

我在公用文件夹 /public/assets 中有资产文件夹。这很奇怪，因为有时它会加载 assets/js/script.js 文件，而不是加载把手文件。其他时候它会加载把手而不是 script.js 文件。我不确定发生了什么。

~~~~~~~~~~~~~~~~~更新~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~

发现了问题，但不知道如何解决。

所以，似乎是因为我正在使用数据映射器 auto_migrate！方法在某种程度上搞砸了资产的加载方式。有什么我可以做的吗？这是我的 app.rb 文件中的内容：

```
require 'rubygems'
require 'sinatra'
require 'data_mapper'

# Include the models
require './models/User'

# Connect to mysql
DataMapper.setup(:default, "mysql://root@localhost/dev_landing")

#This line is what is messing everything up. 
DataMapper.auto_migrate!

set :public_folder, 'public'

get '/' do 
    erb :home
end 
```

我这样设置数据映射器是因为我在一个教程中读到，这就是你如何让它自动创建你在模型中指定的表。有没有更好的方法来做到这一点，这样它就不会弄乱我的脚本和 css 的加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:46:03.210

`DataMapper.auto_migrate!`删除现有表以防它们存在并再次创建它们。

所以调用这个函数意味着：你丢失了所有的数据。（这就是为什么末尾有一个感叹号，意思是：小心！）如果您的架构仍在大量开发中，我建议您替换`DataMapper.auto_migrate!`为`DataMapper.auto_upgrade!`. 它不会擦除您的旧数据，而是在尝试保留数据的同时尝试修改基础表。感叹号仍然存在，因为您的数据可能仍会受到轻微损坏，因为并非总是可以在不损坏数据的情况下更改架构。

另一件事，调用的顺序必须改变。目前是：

1.  模型定义
2.  `DataMapper.Setup`
3.  `DataMapper.auto_migrate!`
4.  您的路线定义等。

但它应该是：

1.  `DataMapper.Setup`
2.  模型定义
3.  ~~DataMapper.auto_migrate！~~ `DataMapper.auto_upgrade!`
4.  `DataMapper.finalize`（你忘了那个）
5.  您的路线定义等。

当数据映射器出现问题时，错误消息可能会很奇怪/具有误导性。顺便说一句，确保*没有*从您的视图内部调用数据库。这些调用属于控制器，我认为没有任何例外。这样，您的应用自然会遵循 MVC 模式。（毕竟 Sinatra 几乎没有强制执行任何其他结构......；））

# javascript - 可重复鼠标事件的 KineticJS 问题

> ID：12985542
> 
> 赞同：1
> 
> 时间：2012-10-20T05:24:30.647
> 
> 标签：javascript, html, canvas, mouseevent, kineticjs

我在这里没有什么问题（我显然错过了一些东西）。我从我更大的应用程序中对其进行了简化：当我单击蓝色矩形时，我在舞台上添加了另一个层，其中包括红色矩形（可点击），当我单击这个红色矩形时，它会删除带有红色矩形的第二层。

**问题：**当我第二次单击蓝色矩形时，什么也没有发生:(即应用程序只能运行一次，我需要重复添加/删除第二层（红色矩形）。出了什么问题？:)

你可以在这里看到它，小提琴[http://jsfiddle.net/max8r/](http://jsfiddle.net/mAX8r/)

代码：

```
<!DOCTYPE HTML>
<html>
<head>
<style>
body {
margin: 0px;
padding: 0px;
}
canvas {
border: 1px solid #9C9898;
}
</style>
<script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.3.js">
</script>
<script>
window.onload = function() {
var stage = new Kinetic.Stage({
container: 'container',
width: 578,
height: 200
});

var layerBlue = new Kinetic.Layer();
var layerRed = new Kinetic.Layer();

var rectBlue = new Kinetic.Rect({
x: 100,
y: 75,
width: 100,
height: 50,
fill: 'blue',
stroke: 'black',
strokeWidth: 4
});
var rectRed = new Kinetic.Rect({
x: 300,
y: 75,
width: 100,
height: 50,
fill: 'red',
stroke: 'black',
strokeWidth: 4
});

// mouse events
rectBlue.on('click', function() {
stage.add(layerRed);
stage.draw();
});
rectRed.on('click', function() {
layerRed.remove();
stage.draw();
});

// add the shape to the layer
layerBlue.add(rectBlue);
layerRed.add(rectRed);
// add the layer to the stage
stage.add(layerBlue);

};

</script>
</head>
<body>
<div id="container"></div>
</body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T09:01:29.127

要隐藏和显示形状，我们可以使用 hide() 和 show() 方法。试试这个 JSFIDDLE [http://jsfiddle.net/max8r/5/](http://jsfiddle.net/mAX8r/5/)。你可以看到下面的示例代码

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.0.3.js"></script>
    <script>
        var layerBlue;
        var layerRed;
        var rectBlue;
        var rectRed;
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: 'container',
          width: 578,
          height: 200
        });

        layerBlue = new Kinetic.Layer();
        layerRed = new Kinetic.Layer();

        rectBlue = new Kinetic.Rect({
          x: 100,
          y: 75,
          width: 100,
          height: 50,
          fill: 'blue',
          stroke: 'black',
          strokeWidth: 4
        });
        rectRed = new Kinetic.Rect({
          x: 300,
          y: 75,
          width: 100,
          height: 50,
          fill: 'red',
          stroke: 'black',
          strokeWidth: 4
        });

        // mouse events
        rectBlue.on('click', function() {
          rectRed.show();
          stage.draw();
        });
        rectRed.on('click', function() {
          rectRed.hide();
          stage.draw();
        });

        // add the shape to the layer
        layerBlue.add(rectBlue);
        layerRed.add(rectRed);

        // add the layer to the stage
        stage.add(layerBlue);
        stage.add(layerRed);
        rectRed.hide();
        stage.draw();
      };

    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</html> 
```

请参阅此网址[http://www.html5canvastutorials.com/kineticjs/html5-canvas-hide-and-show-shape-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-hide-and-show-shape-with-kineticjs/)了解 HTML5 画布隐藏和显示形状

# java - java.io.ioexception.Runtime.getRuntime().exec()。android中的环境和工作目录空错误

> ID：12985547
> 
> 赞同：3
> 
> 时间：2012-10-20T05:25:06.413
> 
> 标签：java, android, android-ndk, ffmpeg, java-native-interface

```
File dir = new File("/mnt/sdcard");
Process process = Runtime.getRuntime().exec("ffmpeg -f image2 -i img%4d.png video.mp4", null, dir); 
```

当我在 android 中尝试这一行时，我在 android 中得到环境和工作目录空错误。但是当我在java中尝试这条线时，它工作得很好。但是在android中，它有一些问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:43:15.523

```
i get environment and working directory null 
```

它将返回 null ，因为没有类似`/mmt/sdcard`use的路径`/mnt/sdcard`。

![在此处输入图像描述](../Images/3dfcb4bdd59599c4a98f1cf0637db3db.png)

最好使用`Environment.getExternalStorageDirectory()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:26:26.253

因为在您的**Emulator**或**Device**中没有像 **E:**这样的驱动器。

 ****您无法像这样在 android 中访问您 PC 的任何驱动器。

**编辑 ：**

```
File dir = Environment.getExternalStoragePublicDirectory();
File f = new File(dir."Yourfilename.png"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T13:15:47.993

Android 安全不允许从 sdcard 或 USB 内存启动可执行文件。

您可以将可执行文件部署在您的应用程序**文件/**目录或全局可写的**/data/local/**目录中。不要忘记`chmod 777`！

而不是使用`exec("cmd", env, new File("dir"))`调用**exec("dir/cmd")**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T05:29:12.677

Android可能没有E盘，其实我可以保证。Android 有一个 linux 操作系统，并且不使用相同的驱动器命名约定。此外，每当编写生成进程的代码时，我都会考虑使用[ProcessBuilder 。](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)它更容易解析命令行选项。****

# algorithm - 最大异或是最接近的数字

> ID：12985548
> 
> 赞同：1
> 
> 时间：2012-10-20T05:25:13.780
> 
> 标签：algorithm, max, xor

如果我有一个`L`正整数列表并且给了我另一个数字`K`，我需要在列表中找到 XOR`K`最大的数字。

我已经想到了一个算法。我想用反论点来验证它的正确性。我的算法是：

*   **查找`P`=K 的补码（1 的补码）。现在在列表 L 中找到最接近 P 的数字。让这个数字为 N。K 和 N 的 XOR 将是最大的。**
*   `I`与给定数字集中的数字最接近的数字是与 I 的差最小的数字。

可以说，对于大于`P`list的数字是不正确的`L`。但是数字不正确`<=P`吗？

请通过提供反驳论点/建议/想法告诉我我是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:06:58.367

我认为你需要一个叫做 a 的东西[`Trie`](http://en.wikipedia.org/wiki/Trie)。

考虑从高到低的每一点`K`，当然我们可以贪婪地确定这个答案是否可以`1`，我的意思是，首先你尽力得到`1024`（甚至更高），然后`512`，然后`256`，然后。 .....终于到了最后一点`1`。

所以首先你需要检查列表`L`中的某个数字是否与最高位具有相反的值`K`，然后在所有选择的数字中，然后你需要找到与`K`第二高位具有相反值的数字。

现在解决方案很明显，构建一个`Trie`with `L`，从高到低确定答案的位，这对应于在那棵树上的旅行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:46:24.093

不，不对。

让`K = 0011`，这样`P = 1100`。让`L = {0011, 1100}`. 你的算法会选择`N = 1100`，这显然是不正确的，因为`N^K = 0`，而`0011^N = 3`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T05:45:09.563

编码和运行明显的蛮力算法所花费的时间远远少于您已经花费在此上的时间。

# android - 活动再次打开时显示捕获的图片

> ID：12985549
> 
> 赞同：1
> 
> 时间：2012-10-20T05:25:24.657
> 
> 标签：android, image, camera, onresume

我有一个活动，它调用相机意图来捕获图片并将其分配为个人资料图片。该活动工作正常，除了当我单击返回然后再次打开该活动时，图片不再显示。

每次用户打开此活动时，如何使其显示？这是我的那个活动的代码

```
public class MyAccountActivity extends Activity {

private static final int CAMERA_REQUEST = 1888;
private TextView name;
private TextView userId;
private TextView address;
private TextView email;
private TextView phone;
private ImageButton profilePicture;
private Bitmap bm;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my_account);
    setUpViews();
Log.v("test","this is test: "+LoginActivity.user.getName());
}

private void setUpViews() {
    //setting up views

    //calling user details from User [] instance 

}

public void ViewPicture(View v) {
    Intent intent = new Intent(
    android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, 
            MediaStore.Images.Media.EXTERNAL_CONTENT_URI.getPath()); 
            startActivityForResult(intent, CAMERA_REQUEST);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
        super.onActivityResult(requestCode, resultCode, data);
                bm = (Bitmap) data.getExtras().get("data");
                profilePicture.setImageBitmap(bm);
                MediaStore.Images.Media.insertImage(getContentResolver(), bm, null, null);
                ByteArrayOutputStream baos = new ByteArrayOutputStream();  
                bm.compress(Bitmap.CompressFormat.JPEG, 100, baos); //bm is the bitmap object   
                byte[] b = baos.toByteArray();  
} 
```

我试图打电话`profilePicture.setImageBitmap(bm)` `onResume()`，但我的应用程序崩溃了。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:37:08.277

使用一些uri路径保存捕获的图像

```
Uri uri = Uri.withAppendedPath(Uri.fromFile(context.getExternalFilesDir(null)), imageName.png);
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, uri)); 
```

然后每当你想显示图像时，使用这个 uri

```
profilePicture.setImageUri(uri) 
```

# c# - 合并工作簿的不同工作表

> ID：12985554
> 
> 赞同：2
> 
> 时间：2012-10-20T05:25:57.023
> 
> 标签：c#, excel, merge, office-interop

合并单个选项卡式工作簿时，整个应用程序运行良好。但后来我添加了功能，在将书与另一本书合并之前，还可以合并书中的所有工作表。

它合并了它们（在单个多标签 wbook 上测试），但在某些时候开始搞砸了。例如

结果：

*   sheet1 -empty lines- sheet2 -empty lines- sheet3+ sheet4 的一半 -empty lines- sheet2 再次不是全部，缺少一些值

ETC...

我不确定代码是否需要额外的东西，或者某些工作表中的问题。

以下是关键部分：

```
for (int i = 0; i < pathList.Count; i++)
{
     List<string> Sheet = GetSheetName(path);
     filename = GetFileName(path);
     MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='" + path + "';Extended Properties='Excel 8.0;IMEX=1;'");

     foreach (string SheetName in Sheet)
     {
        //OLEDB SECTION ***********************************************
        MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [" +  SheetName + "$]", MyConnection);
        MyCommand.TableMappings.Add(pathList.Count.ToString(), filename);
        MyCommand.Fill(table);
        lstTable.Add(table);
        MyConnection.Close();
        MyCommand.Dispose();
        //*************************************************************
      }

} 
```

和 getSheetNames

```
List<string> GetSheetName(string path)
{
    Microsoft.Office.Interop.Excel.Application xlApp;
    Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
    Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet;
    List<string> names = new List<string>();

    xlApp = new Microsoft.Office.Interop.Excel.Application();
    xlWorkBook = xlApp.Workbooks.Open(path, 0, true, 5, "", "", true,        Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

    foreach (Microsoft.Office.Interop.Excel.Worksheet i in xlWorkBook.Worksheets)
     if (i.UsedRange.Count > 0)
            names.Add(i.Name);

  return names ;
  } 
```

# php - 我无法获取类别 ID

> ID：12985557
> 
> 赞同：0
> 
> 时间：2012-10-20T05:26:43.620
> 
> 标签：php, wordpress

这是脚本

```
$category_id = $cat->ID; /* <-- can get the id */
$getsubs = "SELECT term_id FROM wp_term_taxonomy 
WHERE taxonomy = 'wpsc_product_category' AND parent = '".$category_id."' 
ORDER BY term_id ASC";
$subcats = mysql_query($getsubs);
$num_rows = mysql_num_rows($subcats);
wpsc_start_category_query(array('parent_category_id'=>$category_id, 'show_thumbnails'=> 1)); ?>
<li>
<a href="<?php wpsc_print_category_url();?>" title="<?php wpsc_print_category_name();?>">
<?php wpsc_print_category_image(); ?>
<?php //wpsc_print_category_name();?>
<?php //wpsc_print_category_name();?>
</a>
</li>
<?php wpsc_end_category_query(); ?>
<div style="clear:both;"></div> 
```

我是否正确使用它`$cat->ID`。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:30:03.190

试试看嘛

```
 parent = '{$category_id}' ORDER 
```

也不推荐使用 of `mysql_*`，因此请改用`pdo`or `mysqli`。我个人的建议是 pdo[这是很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# iphone - 将 NSArray 值转换为指针的正确方法

> ID：12985560
> 
> 赞同：0
> 
> 时间：2012-10-20T05:26:55.657
> 
> 标签：iphone, ios, cocoa-touch, nsarray

`NSArray`将值转换为引用的正确语法是什么，即：

```
&([_colors objectAtIndex:0]) 
```

我正在检索的对象是`CGColorRef`. 尝试将上述内容作为参数发送到方法而不将值存储到单独的值中。参数是 (CGColorRef *)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:21:41.920

您调用的方法/函数似乎是`CGColorRef`“通过引用”返回一个对象。由于返回值`[NSArray objectAtIndex:]`只是`expression`一个变量而不是变量，所以不能取它的地址。你能做的是

```
CGColorRef color;
CallTheFunctionToObtainThe(&color);
[_colors replaceObjectAtIndex:0 withObject:color] 
```

当然，要做到这一点，`_colors`必须是`NSMutableArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:45:00.710

CGColorRef 本身实际上是一个指针，因此您可以直接将其作为参数发送。

# ios - 嵌套子控制器/子视图中 tableview 的框架大小

> ID：12985564
> 
> 赞同：0
> 
> 时间：2012-10-20T05:28:49.753
> 
> 标签：ios

我对表格视图的适当框架大小以适合我的屏幕感到有些困惑。

这是我在视图控制器中设置的视图控制器：

*   UITabBarController
*   *   UINavigationController 作为标签栏视图控制器之一；隐藏标题栏
*   *   *   ViewController - 一个容器视图控制器，因为有时我需要选择在 UITableView 下方放置一些控件（但不是在当前场景中）
*   *   *   *   UITableViewController

现在，我的问题是 UITableview 的正确框架尺寸应该是多少。这是我在 ViewController viewDidLoad 方法中得到的内容。我用 480.0 减去 49.0（标签栏的大小）。但是，这会在底部留下一个黑条。20.0 似乎做到了（巧合？）状态栏的大小，但我不明白为什么会这样。表格视图的真实像素尺寸不会是 480-49 吗？

```
// MessageTableViewController is my subclass of UITableViewController
MessagesTableViewController *vcMessagesTable = [[MessagesTableViewController alloc] init];
CGRect tableViewFrame = CGRectMake(0, 0, 320.0, 480.0 - 49.0);
[[vcMessagesTable view] setFrame:tableViewFrame];
self.tableViewController = vcMessagesTable;
[self addChildViewController:vcMessagesTable];

[[self view] addSubview:vcMessagesTable.view]; 
```

这是它的外观：

![截屏](../Images/1070f3f86d6bb8981f925bb0e2d172df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:57:06.503

我也遇到过这个问题——我认为最好不要硬编码大小，而是参考其祖先控制器的大小。在这种情况下，作为 tabBar 控制器的直接子级 UINavigationController 应该有正确的框架来填充整个屏幕减去 tabBar。因此，如果您希望底部有空间，我会从该框架高度中减去（如果需要），否则，只需使用该框架。我认为 self.navigationController 在您感兴趣的控制器上方找到最近的导航控制器。

# android - 如何在android中使用Timepicker来控制歌曲的长度

> ID：12985571
> 
> 赞同：2
> 
> 时间：2012-10-20T05:29:58.870
> 
> 标签：android, timepicker

如何在android中使用TimePicker来控制歌曲的长度？例如：当用户播放歌曲时，用户将可以控制用户是否想要播放歌曲几分钟或几小时。

谢谢 ：）

更新：我还没有开始编写代码，我只是在寻找一个示例代码来使 Timepicker 像以下应用程序一样：https: [//play.google.com/store/apps/details? id=com .zodinplex.naturesound&feature=search_result](https://play.google.com/store/apps/details?id=com.zodinplex.naturesound&feature=search_result)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:22:10.803

您使用 TimePicker 来获取所需的时间。然后使用倒数计时器。在倒数计时器的 onFinish 方法中添加您想要的功能。

```
new CountDownTimer(30000, 1000) {

     public void onTick(long millisUntilFinished) {
     mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         //stop media player
    }
  }.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:42:37.733

您可以按照以下步骤操作：

1.  在 TimePicker 时间更改中，创建一个计时器并启动计时器。
2.  创建媒体播放器并启动媒体播放器。
3.  在计时器超时时，检查媒体播放器是否不为空，然后播放，然后停止媒体播放器。

# javascript - 单击父页面（我的页面）中的 facebook 之类按钮（来自 fb 的 iframe）的事件计数，而不是“喜欢”计数我需要点击计数

> ID：12985578
> 
> 赞同：0
> 
> 时间：2012-10-20T05:31:22.247
> 
> 标签：javascript, html, facebook

是否可以获得 facebook like 按钮的 javascript 点击事件？实际上在我的页面中我刚刚添加了

```
<a id='Facebook' class="addthis_button_facebook_like" fb:like:layout="button_count"></a> 
```

当我单击此锚标记时，它没有在我的页面中进行单击事件，单击发生在 facebook 中，该 facebook 包含在 facebook 加载的锚标记内的 iframe 内。我正在使用点击事件js作为

```
document.addEventListener('click', function(e) { } 
```

多少次 fb like 按钮被点击，该信息是我正在寻找的。但是点击事件本身并没有在我的页面中触发。请帮我。

百万美元

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:15:42.820

通过使用带有 XFBML/HTML5 实现的类似按钮的 facebook javascript SDK，您可以使用订阅事件`FB.Event.subscribe`

[https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

如果您想坚持使用 iframe（第三方），唯一的跟踪方法是使用 facebook 提供的分析数据。developer.facebook.com/docs/insights

# html - 引导下拉菜单不起作用

> ID：12985584
> 
> 赞同：3
> 
> 时间：2012-10-20T05:33:06.003
> 
> 标签：html, twitter-bootstrap

[http://jsfiddle.net/Cwf4W/10/](http://jsfiddle.net/Cwf4W/10/)

有我的代码我似乎无法让引导下拉菜单工作，有什么帮助吗？我很确定我已经把所有的 js 和 css 都做好了，我已经找了一段时间了：o

```
 <!-- BOOTSTRAP -->
        <div class="navbar navbar-inverse" style="position: static;">
          <div class="navbar-inner">
            <div class="container">
              <a class="btn btn-navbar" data-toggle="collapse" data-target=".subnav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </a>
              <a class="brand" href="#">Project Stalk</a>
              <div class="nav-collapse subnav-collapse">
                <ul class="nav">
                  <li class="active"><a href="#">Home</a></li>
                  <li><a href="#">About</a></li>
                  <li><a href="#">Contact</a></li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Settings <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                      <li><a href="#">Account settings</a></li>
                      <li><a href="#">Privacy settings</a></li>
                      <li><a href="#">Logout</a></li>
                      <li class="divider"></li>
                      <li class="nav-header">Nav header</li>
                      <li><a href="#">Separated link</a></li>
                      <li><a href="#">One more separated link</a></li>
                    </ul>
                  </li>
                </ul>
                <form class="navbar-search pull-left" action="">
                  <input type="text" class="search-query span2" placeholder="Search">
                </form>
                <ul class="nav pull-right">
                  <li><a href="#">Link</a></li>
                  <li class="divider-vertical"></li>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                      <li><a href="#">Action</a></li>
                      <li><a href="#">Another action</a></li>
                      <li><a href="#">Something else here</a></li>
                      <li class="divider"></li>
                      <li><a href="#">Separated link</a></li>
                    </ul>
                  </li>
                </ul>
              </div><!-- /.nav-collapse -->
            </div>
          </div><!-- /navbar-inner -->
        </div><!-- /navbar --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:50:03.103

您的代码看起来正确，但包括[http://www.sieuphan.com/bootstrap/bootstrap-dropdown.js](http://www.sieuphan.com/bootstrap/bootstrap-dropdown.js)在内的几个 javascript 文件返回错误 404

开发控制台清楚地显示这些错误（例如在 Chrome 中“查看 > 开发人员 > Javascript 控制台”）

# clojure - Clojurescript 编译速度很慢

> ID：12985588
> 
> 赞同：3
> 
> 时间：2012-10-20T05:33:15.990
> 
> 标签：clojure, clojurescript

我正在尝试clojurescript，发现将一个非常简单的clojurescript源文件编译成js需要很长时间。我无法相信这一点。

```
time cljsc hello.cljs '{:optimizations :advanced}' > hello.js

real    1m27.324s
user    1m2.412s
sys     0m0.676s 
```

该片段来自 Clojurescript 的 github 快速入门页面：

```
(ns hello)
(defn ^:export greet [n]
  (str "Hello " n)) 
```

省略`:optimizations`选项，我仍然发现它需要很长时间：

```
time cljsc hello.cljs > hello.js

real    0m10.867s
user    0m22.301s
sys 0m0.412s 
```

这正常吗？或者我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:49:48.717

通过调用 cljsc，您每次编译时都会启动一个 JVM，它必须加载大量代码，然后进行实际编译。仅 JVM 启动时间就很痛苦。

一般的工作流程是不使用 cljsc，而是保持 JVM 打开并每次都使用它进行编译。一种常见的方法是使用[lein-cljsbuild](https://github.com/emezeske/lein-cljsbuild)，我强烈推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T21:04:36.930

花 10 秒时间编译对我来说似乎并不完全疯狂，因为它必须将所有标准 cljs 库编译为 javascript 以及你的琐碎程序。至于高级优化，这可能就是做任何事情需要多长时间。它正在读取和优化数千行 cljs.core javascript，可能还有（我认为）cljs.core 使用的 google 闭包库。

# jquery-plugins - 我无法打开模态系列中的第一个模态

> ID：12985590
> 
> 赞同：1
> 
> 时间：2012-10-20T05:33:37.650
> 
> 标签：jquery-plugins

问候并感谢您慷慨提供这个精彩的论坛，

我正在使用`jQuery Orbit Slider and Reveal Modal`. 我将滑块设置为包含内容，并且在内容中是一系列模式的热链接。

我无法打开模态系列中的第一个模态。看来该插件正在以编程方式生成覆盖我的 CSS 样式表的内联 CSS。主要`z-index selector`是保持第一个模态隐藏（或不可见）。该系列中的后续模态按预期工作。

使用 Chrome Inspect 控制台查看时显示不一致，请注意`"featuredContent10"`其所在位置`slide4`（实际上是背景图像）。这`data-reveal-id="slide4-1"`是模态系列中的第一个。我没有添加它在`reveal.js`文件中的内联样式。

不幸的是，我对揭示知之甚少，也找不到有关解决方案的任何信息。我得到的信息是在 stackoverflow.com 上寻求帮助。99.9% 的时间我自己找到解决方案，但是，我迷路了，我的客户喜欢这两个插件的功能。您能给我的任何帮助将不胜感激。

[如果它有帮助，这里是测试网站的链接：http://www.partnershipwithearth.com/thecooperationway-1/](http://www.partnershipwithearth.com/thecooperationway-1/)

转到幻灯片 11 左下角的链接是罪魁祸首。您会注意到出现的对话框和关闭按钮没有图像（幻灯片 4-1）。

非常感谢您的专业知识

# javascript - 获取脚本中评估的每个语句的行号

> ID：12985591
> 
> 赞同：1
> 
> 时间：2012-10-20T05:34:00.080
> 
> 标签：javascript, node.js

在 Node.js 中，我试图获取脚本中调用的每个函数的行号。有没有办法生成脚本中调用的每个函数的摘要？我想获取脚本中每个函数调用的行号列表，以便我可以注释掉其中一个函数调用（我仍在尝试查找。）

一个例子：

```
function printStuff(){
    console.log("This is an example.");
}
printStuff();
printStuff(); 
```

现在我想得到这个脚本中所有事件的摘要（不修改脚本）。它可能看起来像这样：

```
calling printStuff at line 4
calling console.log at line 2
calling printStuff at line 5
calling console.log at line 2 
```

是否有任何测试/调试工具可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T08:34:38.970

我猜这并不完全是您要寻找的东西，但您应该能够根据需要对其进行修改：

```
Object.defineProperty(global, '__stack', {
  get: function(){
    var orig = Error.prepareStackTrace;
    Error.prepareStackTrace = function(_, stack){ return stack; };
    var err = new Error;
    Error.captureStackTrace(err, arguments.callee);
    var stack = err.stack;
    Error.prepareStackTrace = orig;
    return stack;
  }
});

Object.defineProperty(global, '__line', {
  get: function(){
    return __stack[1].getLineNumber();
  }
});

console.log("I am running from line " + __line); 
```

[在这里](https://stackoverflow.com/questions/11386492/accessing-line-number-in-v8-javascript-chrome-node-js)讨论过

# ios - 在设备中安装应用程序时获取 EXC_BAD_ACCESS，核心图形

> ID：12985593
> 
> 赞同：1
> 
> 时间：2012-10-20T05:34:18.303
> 
> 标签：ios, core-graphics, drawrect

我正在做的是绘制一个简单的矩形并为绘制区域设置颜色

```
 // Just added
    @interface Gradient () {
       CGColorRef  lightBlueColor;
   }
    @implementation Gradient

    -(id)initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
            self.backgroundColor   =   [UIColor lightGrayColor];
            NSLog(@"frame is %@",NSStringFromCGRect(self.frame));
            NSLog(@"bound is %@",NSStringFromCGRect(self.bounds));
            lightBlueColor         =   [UIColor colorWithRed:105.0f/255.0f green:179.0f/255.0f blue:216.0f/255.0f alpha:1.0].CGColor;

        }
        return self;
    }

    -(void) layoutSubviews {
        paperRect =   CGRectMake(10, 10, self.bounds.size.width/2, self.bounds.size.height/2);
    }

    -(void)drawRect:(CGRect)rect {

        //Draw a retangle
        CGContextRef        context     =   UIGraphicsGetCurrentContext();

        CGContextSetFillColorWithColor(context, lightBlueColor);
        CGContextFillRect(context, paperRect);  

    } 
```

以下是模拟器上显示的内容

![在此处输入图像描述](../Images/15e7eac05e4e3e650a09abd451e28107.png)

但是，当我尝试在设备上安装时，我收到 EXC_BAD_ACCESS ![在此处输入图像描述](../Images/618e4aaf3b05f5a059b8434b2f2be08a.png)

**问题 ：**

为什么它在设备上不起作用。我在某处犯错了吗

编辑：我刚刚尝试修改 lightBlueColor

> lightBlueColor = [UIColor blueColor].CGColor;

然后我可以在设备上运行该应用程序。我完全不明白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T06:04:35.747

**编辑：**所以你刚刚遇到了内存管理问题。理论上，在这两种情况下，程序都可能崩溃。为什么？因为根据文档，`-[UIColor lightBlueColor]`其附带的类方法返回一个自动释放的对象。实际上，出于优化的原因，这不是真的：实际上，它们返回相同的分配初始化单例以节省内存。这种优化是可能的，因为它们总是返回相同的颜色。由于共享实例（单色）是在没有自动释放的情况下创建的，所以它不会在你不期望的时候突然释放，这就是程序工作的原因。如果 Apple 的程序员不够聪明，无法进行这种优化，那么这两个程序都会崩溃。

但在第二种情况下，该`colorWithRed:green:blue:alpha:`方法不可能有这种优化，因为不能保证它总是返回相同的颜色。（想象一下，如果你先调用它来获取红色，然后它会缓存它，然后你想获取蓝色，但它会返回缓存的红色。）所以它实际上创建了一个新的实例 a颜色并自动释放它。但是由于您不保留它，它很快就会因为自动释放而被释放，因此它的`CGColor`属性也会失效。因此，有三种可能的解决方案：

一。我更喜欢这个。使`lightBlueColor`实例变量成为`UIColor`对象并使用

```
lightBlueColor = [[UIColor alloc] initWithRed:r green:g blue:b alpha:a]; 
```

然后只需使用其`CGColor`属性进行绘图。

二。与第一个类似，但您可以将颜色对象创建为

```
lightBlueColor = [[UIColor colorWithRed:r green:g blue:b alpha:a] retain]; 
```

同样，但是我会说这是一个错误的概念。

三：可以让 UIColor 对象消失在自动释放池的深井中，但要注意`CGColor`安全：

```
lightBlueColor = CGColorRetain([UIColor colorWithRed:r green:g blue:b alpha:a].CGColor); 
```

在每种情况下，您都应该注意`dealloc`方法中的内存管理。

**经验教训：**实例变量不适合存储自动释放的对象。你想在适当的时候分配初始化和释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:22:49.593

您的问题似乎是内存管理之一。你没有`CGColorRetain`在你的方法中调用**lightBlueColor 。**`init`它`UIColor blueColor`很可能适用，因为该颜色是操作系统保留的一些常量。您的颜色不是这样，它超出了范围并被释放。

添加后，请不要忘记根据需要致电或任何其他适当的地方`CFColorRelease`。`dealloc`

# java - Java Key Adapter Key Event 错误...应为分号而不是括号？

> ID：12985594
> 
> 赞同：0
> 
> 时间：2012-10-20T05:34:18.363
> 
> 标签：java, swing, debugging, syntax-error, keylistener

我正在关注与关键事件有关的编码教程，所有代码看起来都正确，但由于某种原因，出现了一个我无法修复的错误。也许我需要的只是另一双眼睛来扫描它并发现我的错误。这是代码。有错误的代码行两侧有 2 个星号。错误告诉我那个“;” （分号）应该在“（”和“）”所在的地方......这有什么意义？我也会发一张图片。

```
package com.Bench3.myGame;

import javax.swing.*;
import java.awt.*;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

public class Keying extends JPanel{

public Rectangle character;

public int charW = 24;
public int charH = 36;

public boolean right = false;
public boolean left = false;

public Keying(Display f, Images i){
    character = new Rectangle(180, 180, charW, charH);

    f.addKeyListener(new KeyAdapter(){
        public void keyPressed(KeyEvent e){
            if(e.getKeyCode() == KeyEvent.VK_D){
                right = true;
            }
            if(e.getKeyCode() == KeyEvent.VK_A){
                left = true;
                }

            **public void keyReleased(KeyEvent e)**{
                if(e.getKeyCode() == KeyEvent.VK_D){
                    right = false;
                }
                if(e.getKeyCode() == KeyEvent.VK_A){
                    left = false;
                }
            }
        }
    });     
}
public void paintComponent(Graphics g){
    super.paintComponent(g);
    this.setBackground(Color.BLACK);
    g.setColor(Color.WHITE);
    g.fillRect(character.x, character.y, character.width, character.height);

    if(right){
        character.x += 1;
    }
    if(left){
        character.x -= 1;
    }
    repaint();
} 
```

} ![这是近距离的错误。 希望它有帮助谢谢！](../Images/53a7ca0c13e9ae02c5e3cf7329333025.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T05:35:39.080

您忘记关闭先前方法 ( ) 的花括号`keyPressed()`：-

```
public void keyPressed(KeyEvent e){
        if(e.getKeyCode() == KeyEvent.VK_D){
            right = true;
        }
        if(e.getKeyCode() == KeyEvent.VK_A){
            left = true;
            }
} // missing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:36:03.777

`keyPressed()`方法`}`剩余。

```
public void keyPressed(KeyEvent e){
        if(e.getKeyCode() == KeyEvent.VK_D){
            right = true;
        }
        if(e.getKeyCode() == KeyEvent.VK_A){
            left = true;
            }
}// you missed `}` 
```

# css - CSS3 动画让看似无关的元素在 Mac/Webkit 中消失

> ID：12985596
> 
> 赞同：1
> 
> 时间：2012-10-20T05:34:43.810
> 
> 标签：css, animation, webkit

我有一个使用许多简单动画的页面，包括一些 JavaScript 动画，这些动画将 CSS 类添加/删除到具有 CSS3 动画以进行旋转的元素。我没有使用画布。

在 PC 上，该页面在 Chrome/Safari、Firefox 和 IE 中看起来很棒，但在 Mac 上，当在 WebKit（Chrome 和 Safari 5.0.3）中查看时，页面上的许多元素完全缺失。在 Mac 上的 Firefox 中看起来不错。缺少的元素没有应用任何动画——我看不出它们与动画之间有任何联系。

页面验证，CSS 几乎验证除了供应商扩展和我的 clearfix 中的缩放属性。禁用页面上的所有 JavaScript 不会改变任何东西。缺少的元素在源代码中，它们只是在页面上不可见。

乍一看，Z-index 似乎在不可见元素上变得扭曲了。更改这些不会影响问题。删除整个文档中的所有绝对、相对、固定位置以及浮动元素不会影响问题。唯一可以做任何事情的动作是删除所有 Webkit 动画。
当我应用所有动画时，页面上的几乎所有内容都消失了！

这是我的一个动画的例子——简单的东西：

```
@-webkit-keyframes propeller {
    0% {-webkit-transform: rotateX(90deg);}
    50% {-webkit-transform: rotateX(1deg);}
    100% {-webkit-transform: rotateX(90deg);}
}

#element {
    -webkit-animation:propeller 1s linear;
    -webkit-transform-origin:50% 50%;
} 
```

即使不调用动画，关键帧的存在也会导致页面中断。如果我特别使用这个动画（只是 -webkit-vendor 前缀），它会导致一个大型表单消失，它是“#element”的伟大祖先的兄弟。

这是我正在处理的页面的链接。我与设计无关：http: [//goo.gl/6XXcV](http://goo.gl/6XXcV)

所有动画都包含在 animations.css 中，所有 JavaScript 动画都包含在 general.js 中。

这对我来说一直很慢，因为我没有 Mac——我只是在使用 Microsoft Expression Web 4 SuperPreview——但我的客户有一台 Mac，并没有留下深刻的印象。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:55:58.527

我刚刚在 Mac 版 Chrome 和 Mac 版 Firefox（分别为 22.0.1229.94 和 14.0.1 版本）中打开了该站点，除了一些间距差异（很小）外，外观相同。我看到的唯一奇怪的事情是，如果您的窗口足够窄以保证（看似不必要的）水平滚动，那么所有图形旁边都会出现浅蓝色背景。

究竟缺少什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:29:39.530

在大多数情况下，问题出在 Microsoft Expression Web 4 SuperPreview 及其 Mac/Safari 5.0.3 仿真器服务中的错误。当任何 -webkit- 供应商前缀用于 CSS3 动画时，它会导致看似与动画无关的元素表现得好像它们具有可见性：隐藏。

我的客户使用带有 Chrome 的实际 Mac 首次报告的消失元素的类似问题似乎来自与 @font-face 一起使用的错误 .svg 字体转换。尽管 svg 字体在 Mac/Webkit 上呈现，但它似乎破坏了使用它的元素以及父元素的样式。当我使用不同的转换实用程序再次将字体转换为 svg 时，问题解决了。诡异的。

# mysql - 将mysql数据库从一台机器复制到另一台机器

> ID：12985597
> 
> 赞同：0
> 
> 时间：2012-10-20T05:34:48.233
> 
> 标签：mysql, netbeans

> **可能重复：**
> [将 MySQL 数据库复制到另一台机器](https://stackoverflow.com/questions/12916959/copying-mysql-database-to-another-machine)

我正在做一个java项目，想将我的数据库从一台机器复制到另一台机器，但是当我复制具有.opt和.frm文件的文件夹时，只复制表名。既不复制数据也不复制列。请帮帮我。当我在netbeans中执行mysql转储命令时，它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:51:31.737

[在此处查看](http://dev.mysql.com/doc/refman/5.6/en/innodb-migration.html)有关如何执行此操作的说明。

这些不是您应该复制的唯一文件。您还应该复制`ibdata`文件，这是您的 InnoDB 数据实际所在的位置（实际上，检查您的 my.ini 以查看您的数据文件在哪里）。此外，MyISAM 数据库不同...要复制 MyISAM 数据库，只需复制该数据库的文件夹（它包含 .myd 和 .myi 文件，分别是数据和索引文件）。

在给定的链接中，您应该找到所有必要的说明，以及进行迁移的其他一些方法。

# liferay - 如何解决这个 java.lang.NoSuchMethodException: com.liferay.util.bridges.mvc.MVCPortlet.#######？

> ID：12985598
> 
> 赞同：-1
> 
> 时间：2012-10-20T05:35:07.420
> 
> 标签：liferay, portlet, liferay-6

在使用另一个自定义 portlet 调用一个添加函数时，再次遇到同样的问题。我的 portlet 类中有一种方法，带有 addrestaurant(restaurant)，当我从我的视图中调用它以添加数据时，它给了我以下错误。

```
05:27:42,752 ERROR [http-bio-8080-exec-4][render_portlet_jsp:154] java.lang.NoSuchMethodException: com.liferay.util.bridges.mvc.MVCPortlet.addrestaurant(javax.portlet.ActionRequest, javax.portlet.ActionResponse)
    at java.lang.Class.getMethod(Class.java:1605)
    at com.liferay.portal.kernel.util.MethodCache._get(MethodCache.java:123)
    at com.liferay.portal.kernel.util.MethodCache.get(MethodCache.java:45)
    at com.liferay.portal.kernel.portlet.LiferayPortlet.callActionMethod(LiferayPortlet.java:149)
    at com.liferay.util.bridges.mvc.MVCPortlet.callActionMethod(MVCPortlet.java:250)
    at com.liferay.portal.kernel.portlet.LiferayPortlet.processAction(LiferayPortlet.java:80)
    at com.liferay.util.bridges.mvc.MVCPortlet.processAction(MVCPortlet.java:220)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:70)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:48)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530) 
```

我检查了所有的东西，但仍然没有理由我发现为什么会发生这种情况..当我创建新的 portlet 时，每次都不知道它的到来..

以下是我的 restaurantportlet.java 类

```
public class RestaurantPortlet extends MVCPortlet {

    private static Log log = LogFactory.getLog(RestaurantPortlet.class);
    private static String errorJSP="/jsps/error.jsp" ;

    public void addrestaurant(ActionRequest request, ActionResponse response) {

        log.info("Inside addRegistration");
        List<String> errors=new ArrayList<String>();

        restaurant rest=RestaurantActionUtil.getRestaurantFromRequest(request);
        boolean bookValid=RestaurantValidator.validateRestaurant(rest,errors);
        if(bookValid) {
            try {
                log.info(rest);
                restaurant test=restaurantLocalServiceUtil.addrestaurant(rest);
                if(test==null) {
                    log.error("Restaurant was Found Null");
                    response.setRenderParameter("jspPage", errorJSP);
                    return ;
                }
            } catch (SystemException e) {
                log.error(e);
                /*If there is an error then divert the control to the error page.*/
                response.setRenderParameter("jspPage", errorJSP);
                return ;
            }
            SessionMessages.add(request,"restaurant-added");
            return ;
        }
        else {
             for (String error : errors) {
                    SessionErrors.add(request, error);
                }
                SessionErrors.add(request, "error-while-adding");
                request.setAttribute("rest",rest);
                return ;
        }

    } 
```

以下是我的 restaurantImpl.java 类

```
 */
public class restaurantLocalServiceImpl extends restaurantLocalServiceBaseImpl {
    /*
     * NOTE FOR DEVELOPERS:
     *
     * Never reference this interface directly. Always use {@link emenu.advertise.database.service.restaurantLocalServiceUtil} to access the restaurant local service.
     */
    public restaurant addrestaurant(restaurant restParam) {
        restaurant restVar;

        try {
            restVar = restaurantPersistence.create(counterLocalService
                    .increment(advertise.class.toString()));
        } catch (SystemException e) {
            e.printStackTrace();
            return restVar = null;
        }

        try {
            resourceLocalService.addResources(restParam.getGroupId(), restParam.getUserId(),
                    advertise.class.getName(), false);
        } catch (PortalException e) {
            e.printStackTrace();
            return restVar = null;
        } catch (SystemException e) {
            e.printStackTrace();
            return restVar = null;
        }

        restVar.setName(restParam.getName());
        restVar.setAdress(restParam.getAdress());
        restVar.setCity(restParam.getCity());
        restVar.setPin(restParam.getPin());
        restVar.setState(restParam.getState());
        restVar.setCountry(restParam.getCountry());
        restVar.setContactno(restParam.getContactno());
        restVar.setEmail(restParam.getEmail());
        restVar.setWebsite(restParam.getWebsite());
        restVar.setCuisinetype(restParam.getCuisinetype());
        restVar.setPersonalmail(restParam.getPersonalmail());
        restVar.setPersonalname(restParam.getPersonalname());
        restVar.setPersonalPhone(restParam.getPersonalPhone());
        restVar.setNoofemenuagent(restParam.getNoofemenuagent());
        restVar.setLicensekey(restParam.getLicensekey());
        restVar.setRestregId(restParam.getRestId());
        restVar.setNoofdiningtable(restParam.getNoofdiningtable());
        restVar.setAvgnoofcustomermonthly(restParam.getAvgnoofcustomermonthly());
        restVar.setAveragroupagevisit(restParam.getAveragroupagevisit());
        restVar.setImpoflocation(restParam.getImpoflocation());
        restVar.setAvgmonthlycheckamount(restParam.getAvgmonthlycheckamount());
        restVar.setCostperthousandimpression(restParam.getCostperthousandimpression());
        restVar.setAdtypeId(restParam.getAdtypeId());
        //restVar.setNoofdiningtable(restParam.getNoofdiningtable());
        //restVar.setAvgnoofcustomermonthly(restParam.getAvgnoofcustomermonthly());

        restVar.setIsactive(restParam.getIsactive());
        restVar.setCreateddate(restParam.getCreateddate());
        restVar.setLastmodifiedby(restParam.getLastmodifiedby());
        restVar.setModifieddate(restParam.getModifieddate());
        restVar.setGroupId(restParam.getGroupId());
        restVar.setUserId(restParam.getUserId());
        restVar.setIsdeleted(restParam.getIsdeleted());
        restVar.setRestregId(restParam.getRestregId());

        //restVar.setOrganizationId(restParam.getOrganizationId());

        try {
            return restaurantPersistence.update(restVar, false);
        } catch (SystemException e) {
            e.printStackTrace();
            return restVar = null;
        }
    } 
```

以下是我的 restuarntActionutil 类

```
public class RestaurantActionUtil {

        public static restaurant getRestaurantFromRequest(ActionRequest request) {
            ThemeDisplay themeDisplay = (ThemeDisplay) request
                    .getAttribute(WebKeys.THEME_DISPLAY);
            String name = ParamUtil.getString(request, "name",
                    "name Not Availible");
                    restaurant rest  = new restaurantImpl();
            rest.setName(name);
            rest.setLicensekey(ParamUtil.getString(request, "licesnce_key"));
            rest.setCity(ParamUtil.getString(request, "city"));
            rest.setPin(ParamUtil.getString(request, "pin"));
            rest.setAdress(ParamUtil.getString(request, "adress"));
            rest.setState(ParamUtil.getString(request, "state"));
            rest.setCountry(ParamUtil.getString(request, "country"));
            rest.setContactno(ParamUtil.getString(request, "contact_no"));
            rest.setEmail(ParamUtil.getString(request, "email"));
            rest.setWebsite(ParamUtil.getString(request, "website"));
            rest.setCuisinetype(ParamUtil.getString(request, "cuisine_type"));
            rest.setNoofemenuagent(ParamUtil.getInteger(request, "no_of_emenu_agent"));
            rest.setNoofdiningtable(ParamUtil.getInteger(request, "no_of_dining_table"));
            rest.setPersonalname(ParamUtil.getString(request, "personal_name"));
            rest.setPersonalPhone(ParamUtil.getString(request, "personal_phone"));
            rest.setPersonalmail(ParamUtil.getString(request, "personal_mail"));
            rest.setAveragroupagevisit(ParamUtil.getInteger(request, "avg_age_group_people"));
            rest.setImpoflocation(ParamUtil.getString(request, "imp_of_location"));
            rest.setAvgnoofcustomermonthly(ParamUtil.getInteger(request, "avg_no_of_cust_monthly"));
            rest.setAvgmonthlycheckamount(ParamUtil.getInteger(request, "avg_monthly_check_amount"));
            rest.setAvgmonthlycheckamount(ParamUtil.getLong(request, "cost_per_thousand_impressions"));
            rest.setAdtypeId(ParamUtil.getInteger(request, "ad_type"));
            rest.setIsactive(ParamUtil.getBoolean(request, "isactive"));
            rest.setGroupId(themeDisplay.getLayout().getGroupId());
            rest.setUserId(themeDisplay.getUserId());
            rest.setCreateddate(Calendar.getInstance().getTime());
            rest.setModifieddate(Calendar.getInstance().getTime());
            rest.setLastmodifiedby(themeDisplay.getUserId());
            rest.setRestregId((ParamUtil.getLong(request, "licensekey")));
            rest.setIsdeleted(false);

                        return rest;
        }

    } 
```

以下是我调用此方法的 view.jsp 代码..

```
<liferay-portlet:actionURL name="addrestaurant" var="addrestoURL"></liferay-portlet:actionURL>

                      <form class="form_validation_ttip" action="<%= addrestoURL.toString()%>" method="post"> 
```

这是我的表单按钮。

```
<button class="btn" name="btnback" >Save</button> 
```

请任何人都可以指导我吗？？我需要找到这背后的主要原因..所以从下一次我会记住我在哪里做错了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:28:12.647

Can you put your `portlet.xml` here? It looks like you did not specify your class, so Liferay tried to use the default MVCPortlet class. And of course, there is no `addrestaurant()` method. It is not a code problem but a configuration problem.

# c++ - 如何在函数的健全性检查期间处理加法时的整数溢出？

> ID：12985601
> 
> 赞同：5
> 
> 时间：2012-10-20T05:35:46.183
> 
> 标签：c++, c

> **可能重复：**
> [在 C/C++ 中检测整数溢出的最佳方法](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)

我正在用 C 编写一个函数，但问题是通用的。该函数接受三个整数并返回有关这三个整数的一些信息。

我怀疑这里的问题是整数可以达到最大值，这可能导致溢出。

例如：如果我将 a 作为最大值传递，并且 b 可以是 1 - max，那么在这种情况下，if 条件中的表达式 (a+b)>c 会导致溢出吗？如果是这样，我该如何处理？

我的解决方案是保留一个长整数作为临时变量以保留 a+b 的值并在表达式中使用它，但这听起来很脏。

参考这个片段：

```
int
triangle_type(int a, int b, int c) {
    if (!((a+b)>c)&&((b+c) > a)&&((a+c>b))) {
        return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:51:01.420

在当前的处理器上，整数没有真正的信号溢出。因此，在 32 位处理器上，整数运算在位级别完成模 2^32。当您将两个`int`-s 相加并发生一些“溢出”时，会在某个状态寄存器中设置一个溢出（或进位）位（并且算术运算完成模数 2^32）。如果（通常情况下）没有机器指令测试溢出状态位，则不会发生任何事情。

所以控制流不会因为溢出而改变（它通常会在除以零时改变，例如使用 SIGEMT 信号）。

如果您想在 C 中便携式捕获溢出情况，您可以测试例如两个正`int`-s 的总和是否保持正数。（如果它是负数，则确实发生了溢出）。

您也可能对[bignums](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)感兴趣，例如使用[gmp](http://gmplib.org/) 库。您还可以`<stdint.h>`谨慎使用和使用`int32_t`显`int64_t`式强制转换。最后，你可以（就像大多数程序员一样）选择忽略这个问题。

注意：正如 Jonathan 所注意到的，您可能会陷入[未定义行为](http://en.wikipedia.org/wiki/Undefined_behavior)或未[指定行为](http://en.wikipedia.org/wiki/Unspecified_behavior)的情况。如果您真的在乎，请使用 bignums。但是，您可以选择根本不关心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:42:52.580

你可以做这样的事情

```
// returns true if a+b > c
inline int safe_sum_greater (int a, int b, int c) {
   int a1 = a / 4; int a2 = a % 4;
   int b1 = b / 4; int b2 = b % 4;
   int c1 = c / 4; int c2 = c % 4;
   int s2 = a2 + b2;

   int s1 = a1 + b1 + s2 / 4;
   s2 = s2 % 4;
   return (s1 > c1) || ( (s1 == c1) && (s2 > c2) );
} 
```

性能不会很差，因为只会使用按位操作。对于负数，我没有广泛考虑这一点，因此请谨慎使用。

# r - 在 R 中，有没有办法根据一系列数字在渐变上为绘图点着色？

> ID：12985602
> 
> 赞同：5
> 
> 时间：2012-10-20T05:35:47.153
> 
> 标签：r, ggplot2

我是 R 新手，我已经能够绘制点，但想知道是否有办法将颜色渐变应用于散点图。

我有一个 3 列矩阵，其中前两个将用作坐标，第三个的数字范围在 0 到 .0001 之间。有没有办法根据它们在数字范围内的位置为绘图点着色？

```
 x   y   z
 15  3   6e-4
 34  22  1e-10
 24  1   5e-2
 ...

plot(x, y, main= "Title", ylab = "column y", xlab = "column x", col = rgb(0,100,0,50,maxColorValue=255), pch=16) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T21:53:57.730

我很喜欢这个`ggplot2`包，因为它在鼓励良好的绘图习惯方面做了很多工作（尽管一开始语法有点混乱）：

```
require(ggplot2)
df <- data.frame(x=x, y=y, z=z) #ggplot2 only likes to deal with data frames
ggplot2(df, aes(x=x, y=y, colour=z) + #create the 'base layer' of the plot
  geom_point() + #represent the data with points
  scale_colour_gradient(low="black", high="green") + #you have lots of options for color mapping
  scale_x_continuous("column x") + #you can use scale_... to modify the scale in lots of other ways
  scale_y_continuous("column y") +
  ggtitle("Title") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:57:55.710

怎么样

```
plot(x, y, col = gray(z/0.0001)) 
```

这是灰色的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-07T11:36:14.183

迟到了，但为了他人的利益，这可能是你所追求的：

```
mat = cbind(sample(1:30), sample(1:30), 10*rnorm(30,mean=5))
n = 255
data_seq = seq(min(mat[,3]), max(mat[,3]), length=n)
col_pal = colorRampPalette(c('darkblue','orange'))(n+1)
cols = col_pal[ cut(mat[,3], data_seq, include.lowest=T) ]
plot(mat[, 1:2], col = cols, pch=16, cex=2) 
```

# visual-c++ - Visual C++ 无模式对话框位图不显示

> ID：12985607
> 
> 赞同：2
> 
> 时间：2012-10-20T05:36:09.487
> 
> 标签：visual-c++, dialog, modeless

我正在尝试在 Visual C++ 中显示一个带有位图图像的无模式对话框。我使用 Visual Studio 的资源视图创建了对话框，预览时它显示得很好。当试图将其显示为无模式对话框时，图像不会显示，只是一个空白对话框窗口。这是我用来显示对话框的代码：

```
HWND g_splash = CreateDialog(hInst, MAKEINTRESOURCE(IDD_SPLASH), NULL, NULL);
if(g_splash != NULL)
{
    ShowWindow(g_splash, SW_SHOW);
} 
```

此外，当作为模式对话框打开时，图像看起来很好，所以我认为这不是对话框本身的问题。任何关于为什么会发生这种情况的想法将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T07:53:44.180

我在VS2012 MFC中试过了，效果很好。

调用 CreateDialog 后显示带图像的无模式对话框

可能是其他问题，不是 CreateDialog 函数，你可以换个图片试试。我的图片是 bmp 文件，体积小（7.08KB）

# ruby - ActionMailer 字符串编码

> ID：12985608
> 
> 赞同：2
> 
> 时间：2012-10-20T05:36:34.557
> 
> 标签：ruby, ruby-on-rails-3, encoding, utf-8, actionmailer

有一段时间我一直在反对这个。我有这个字符串：

```
[18] pry(main)> p.title
=> "Human meat – Wesker and Son butchers at Smithfield Market"
[19] pry(main)> p.title.encoding
=> #<Encoding:UTF-8>
[20] pry(main)> p.title.force_encoding("ascii").encode
=> "Human meat ��� Wesker and Son butchers at Smithfield��Market" 
```

这是通过 ActionMailer 在我的电子邮件模板中调用的，并且 - 正如您可能猜到的那样 - 在我的电子邮件客户端中同样出现乱码：

```
<a href=3D"http://localhost:3000/stuff/12072" =
style=3D"color: #D84D3F; text-decoration: none;">Human meat =EF=BF=BD=EF=BF=
=BD=EF=BF=BD=EF=BF=BD=EF=BF=BD=EF=BF=BD=EF=BF=BD=EF=BF=BD=EF=BF=BD Wesker=
 and Son butchers at Smithfield=EF=BF=BD=EF=BF=BD=EF=BF=BD=EF=BF=BD=EF=BF=
=BD=EF=BF=BDMarket</a> 
```

尽管我的标题似乎`Content-Type`正确设置为`UTF-8`：

```
----==_mimepart_5082362f64bbe_36cb3feb84c5a7386303d
Date: Fri, 19 Oct 2012 22:27:11 -0700
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Content-ID: <5082362f6a388_36cb3feb84c5a738632e9@MacBook-Air.local.mail> 
```

我已经[阅读](http://www.joelonsoftware.com/articles/Unicode.html) [了很多](http://yehudakatz.com/2010/05/05/ruby-1-9-encodings-a-primer-and-the-solution-for-rails/)关于这个主题的内容，尽管信息量很大，但我仍然不知道如何摆脱这些讨厌的问号。我该怎么做才能摆脱它们（使用`ruby 1.9.3-p194`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:00:42.710

所以我不知道我们正在使用`premailer`gem 来解析我们的电子邮件。RubyGems 中似乎存在不一致之处，因为我的系统报告我有`premailer 1.7.3`，但我`lib/premailer/adapter/nokogiri.rb`的与 github repo 中的不匹配，对于相同的版本。

我已经更新了我`Gemfile`的使用 github 版本，瞧！我的电子邮件中又出现了 UTF-8 字符！

# objective-c - 使用导航控制器从一个视图控制器到另一个视图控制器时的淡入淡出效果

> ID：12985609
> 
> 赞同：0
> 
> 时间：2012-10-20T05:36:48.883
> 
> 标签：objective-c, ios

使用导航控制器从一个视图控制器转到另一个视图控制器时如何实现淡入淡出效果

通常我们会推动：

```
DetailViewController *obj= [[DetailViewController alloc]initWithNibName:@"DetailView" bundle:nil];
[self.navigationController pushViewController:obj animated:YES]; 
```

并弹出：

```
UINavigationController *navController = self.navigationController;

// retain ourselves so that the controller will still exist once it's popped off
 [[self retain] autorelease];

// Pop this controller and replace with another
[navController popViewControllerAnimated:YES]; 
```

但是当我弹出或推送时我想要褪色效果..请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:53:40.563

这不是您想要的确切代码，但您可以获得如何制作您想要的动画的方式

首先必须`NO`在推送和弹出视图时传递任何动画的参数，并且必须提供一些像这样的自定义动画

```
// Flash the screen white and fade it out to give UI feedback that a still image was taken
    UIView *flashView = [[UIView alloc] initWithFrame:[[self videoPreviewView] frame]];
    [flashView setBackgroundColor:[UIColor whiteColor]];
    [[[self view] window] addSubview:flashView];

    [UIView animateWithDuration:.4f
                     animations:^{
                         [flashView setAlpha:0.f];
                     }
                     completion:^(BOOL finished){
                         [flashView removeFromSuperview];
                     }
     ]; 
```

有关更详细的答案并以正确的方式使用该块，请参阅关于 SO 上其他问题的[答案](https://stackoverflow.com/a/5889757/1132951)

该答案中的一些代码如下

对于推送：

```
MainView *nextView = [[MainView alloc] init];
[UIView animateWithDuration:0.75
                         animations:^{
                             [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                             [super pushViewController:nextView animated:NO];
                             [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
                         }]; 
```

对于流行音乐：

```
[UIView animateWithDuration:0.75
                         animations:^{
                             [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                             [UIView setAnimationTransition:transition forView:self.navigationController.view cache:NO];
                         }];
[self.navigationController popViewControllerAnimated:NO]; 
```

感谢[@jordan](https://stackoverflow.com/users/737234/ijordan)

该问题的其他一些提示是[here](https://stackoverflow.com/a/1795480/1132951)

[这](https://gist.github.com/3922342)是一个很好的示例，您无需为此进行额外的编码，因为它为导航控制器的动画提供了类别。

# ruby-on-rails - 由于开发和部署服务器上的 ruby 补丁版本不同，无法在部署服务器上获取 linecache19

> ID：12985615
> 
> 赞同：0
> 
> 时间：2012-10-20T05:38:17.720
> 
> 标签：ruby-on-rails, ruby, rails-3-upgrade

按照有关此 stackoverflow 的说明进行操作后，我能够使其在本地计算机上运行。我什至在部署服务器上安装了 gems，并且可以在本地运行服务器。

[带有 ruby​​-debugger 的 Rails 抛出“找不到符号：_ruby_current_thread (LoadError)”](https://stackoverflow.com/questions/6438116/rails-with-ruby-debugger-throw-symbol-not-found-ruby-current-thread-loaderro)

对于部署，我们使用 Capistrano，问题是 Gemfile 包含以下内容：

```
gem 'linecache19', '0.5.13', :path => "~/.rvm/gems/ruby-1.9.3-p#{RUBY_PATCHLEVEL}/gems/linecache19-0.5.13/"
gem 'ruby-debug-base19', '0.11.26', :path => "~/.rvm/gems/ruby-1.9.3-p#{RUBY_PATCHLEVEL}/gems/ruby-debug-base19-0.11.26/" 
```

因为 RUBY_PATCHLEVEL 在服务器和我的本地机器上不同，它会将我的本地机器路径添加到 Gemfile.lock 并且在服务器上它试图在那里找到 gem，但它不能因为补丁不同。

下面是堆栈跟踪

您尝试在更改 Gemfile 后以部署模式安装。在其他地方运行`bundle install`并将更新的 Gemfile.lock 添加到版本控制。

```
You have added to the Gemfile:
* source: source at ~/.rvm/gems/ruby-1.9.3-p125/gems/ruby-debug-base19-0.11.26/
* source: source at ~/.rvm/gems/ruby-1.9.3-p125/gems/linecache19-0.5.13/ 
```

我的本地机器 ruby​​ 版本是 1.9.3-p194，服务器有 1.9.3-p125。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:24:01.467

使用[`'.rvmrc`file](https://rvm.io/workflow/rvmrc/)指定项目应该在 dev 和 prod 服务器上使用相同的 RUBY_PATCHLEVEL。

`.rvmrc`使用以下行在应用程序的主文件夹中创建一个名为的文件：

```
rvm use 1.9.3-p125 
```

这将使项目使用指定的补丁版本。

当然，这意味着你必须在本地安装 1.9.3-p125 版本；rvm 正是为了这个目的——在本地机器上管理多个版本的 ruby​​。

我通常也有项目特定[的 gemsets](https://rvm.io/gemsets/basics/)，我的`.rvmrc`文件如下所示：

```
rvm_gemset_create_on_use_flag=1
rvm use <ruby version>@<gemset name ; usually the project name> 
```

例子

```
rvm_gemset_create_on_use_flag=1
rvm use 1.9.3@myblog 
```

# android - 在android中的imageview上没有图像的圆角

> ID：12985618
> 
> 赞同：1
> 
> 时间：2012-10-20T05:38:27.643
> 
> 标签：android, android-layout, android-imageview

我已经使用 imageview 上的图像开发了一个圆形示例。

我在下面的代码中使用：

```
<ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/arrow"
    android:background="@drawable/imagestyle"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"/> 
```

这是可绘制文件夹中的 imagestyle.xml。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#00000000" /> 
    <stroke android:width="0dp" android:color="#FFFFFF" /> 
    <corners android:bottomRightRadius="10dp" android:bottomLeftRadius="10dp"  android:topLeftRadius="10dp" android:topRightRadius="10dp" /> 
    <padding android:left="2dp" android:top="2dp" android:right="2dp" android:bottom="2dp" /> 
</shape> 
```

在这里，我得到了如下所示的 o/p：

![在此处输入图像描述](../Images/ed6bf283ea5a40e56e7c10268e062b1e.png)

但我希望在不使用图像的情况下需要相同的 o/p。例如：我不能使用这一行 android:src="@drawable/arrow" 并通过 imagestyle.xml 中的 xml 代码创建下面的图像。

我该怎么办。请帮帮我。

**编辑：**

现在我必须更改上面的代码：

```
<ImageView android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/imagestyle"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"/> 
```

这是可绘制文件夹中的**imagestyle** .xml。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#DC143C" /> 
    <stroke android:width="0dp" android:color="#FFFFFF" /> 
    <corners android:bottomRightRadius="10dp" android:bottomLeftRadius="10dp" android:topLeftRadius="10dp" android:topRightRadius="10dp" /> 
    <padding android:left="2dp" android:top="2dp" android:right="2dp" android:bottom="2dp" />
    <gradient android:startColor="#18d7e5"
        android:centerColor="#16cedb"
        android:endColor="#09adb9"
        android:angle="270" />
    <size android:width="20px" android:height="20px" />
</shape> 
```

现在我在不使用图像的情况下创建了圆形，也只更改了 imagestyle.xml 文件。

现在我得到了如下图所示的 o/p：

![在此处输入图像描述](../Images/a25c4cc51d8cb797f434004aec45fe59.png)

如何像我的第一张图片一样在上面的图片中添加三角形。请帮助我。

# ios - 大小为零的 UIView 对象是否占用大量内存？

> ID：12985624
> 
> 赞同：0
> 
> 时间：2012-10-20T05:40:13.213
> 
> 标签：ios, uiview, uitableview

为了自定义 tableView 单元，我插入了一个零矩形的虚拟背景视图。所以问题是 rect 为零的 UIView 对象是否占用内存？是否浪费内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:30:37.500

所有对象都占用内存。至少需要有空间来保存类的每个实例变量（及其所有超类）。一些类可能会根据它们的实现分配额外的内存。

在这种情况下，添加到表中几行的零矩形视图是如此微不足道，甚至没有真正的理由去考虑它。

# heroku - Heroku Eclipse 插件安装错误

> ID：12985625
> 
> 赞同：0
> 
> 时间：2012-10-20T05:40:32.003
> 
> 标签：heroku, eclipse-plugin

我正在尝试安装`Eclipse plugin`for `Heroku (Eclipse EE Juno SR1)`，但遇到以下错误：

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.ning.async-http-client,1.6.5.20120903-0645
No repository found containing: osgi.bundle,org.eclipse.m2e.archetype.common,1.2.0.20120903-0645
No repository found containing: osgi.bundle,org.eclipse.m2e.core,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.core.ui,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.discovery,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.editor,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.editor.xml,1.2.0.20120903-1050
No repository found containing: org.eclipse.update.feature,org.eclipse.m2e.feature,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.jdt,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.launching,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.lifecyclemapping.defaults,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.maven.indexer,1.2.0.20120903-0645
No repository found containing: osgi.bundle,org.eclipse.m2e.maven.runtime,1.2.0.20120903-0645
No repository found containing: osgi.bundle,org.eclipse.m2e.model.edit,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.refactoring,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.eclipse.m2e.scm,1.2.0.20120903-1050
No repository found containing: osgi.bundle,org.jboss.netty,3.2.5.Final-20120903-0645
No repository found containing: osgi.bundle,org.slf4j.api,1.6.4.v20120130-2120 
```

有任何想法吗？

# .net - 在 Windows XP SP2 中运行在 Visual Studio 2010 中构建的 Windows 应用程序

> ID：12985629
> 
> 赞同：0
> 
> 时间：2012-10-20T05:41:43.320
> 
> 标签：.net, visual-studio-2010

我在 Visual Studio 2010 中开发了一个 Windows 窗体应用程序，即使用 .Net Framework 4 和 MS SQL Server 2008 Express Edition。我发布了项目并配置为安装先决条件：1）Microsoft .Net Framework 4.0 客户端配置文件 2）Windows 安装程序 4 3）MS SQL Server 2008 Express

然后创建应用程序设置！然后我尝试在 Windows XP 机器上运行安装程序。安装 SQL Server 2008 Express 时设置失败。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:48:00.237

据我所知，SQL 2008 Express（仅数据库引擎包）需要在 Windows XP 上安装 .NET 2 SP2。您的软件包中是否包含 .NET 2 SP2？

您可以尝试手动运行 SQL 2008 设置并发布显示给您的错误消息吗？

# php - 致命错误：在非对象上调用成员函数 prepare()

> ID：12985630
> 
> 赞同：0
> 
> 时间：2012-10-20T05:42:11.983
> 
> 标签：php, pdo

如果配置类，我首先有三个文件，第二个是用户类，第三个是索引文件。

配置文件

```
class connection{    

    public function dbConnect()
    {         
       new PDO("mysql:host=localhost:3306;dbname=education","root","");
    }
} 
```

用户.php

```
<?php
session_start();
require_once '../cms/config.php';

class user{
    private $db;

    public function __construct()
    {
        $this->db= new connection();
        $this->db=  $this->db->dbConnect();
        return $this->db;
    }

    public function login($user,$pass)
    {
        //creating a array for future usage

        if(!empty($user) && !empty($pass))
        {                
           $st=$this->db->prepare("select * from admin where admin_user=? AND admin_pass=?");
           $st->bindParam(1,$user);
           $st->bindParam(2,$pass);
           $st->execute();
           if($st->rowCount()==1)
           {
             $_SESSION['admin_user']=$user;
             header("Location:admin.php");
           }
           else
           {
               $_SESSION['errorMessage']="Incorrect username or password!Please try again.";
               echo $_SESSION['errorMessage'];
           }               
        }
        else
        {
             echo "Hey! Don't leave me empty";                
        }
    }
}
?> 
```

索引.php

```
require_once '../cms/user.php';

if(isset($_POST['submit']))
{    
    $user=$_POST['user'];
    $user=  mysql_real_escape_string($user);
    $pass=$_POST['pass'];
    $pass=  mysql_real_escape_string($pass);

    $object=new user();

    $object->login($user,$pass);
} 
```

当我尝试使用错误或正确的数据登录时，它会引发致命错误。即使它是昨天的工作文件。但是今天发生了什么。这很烦人。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:55:58.013

您需要返回 pdo 实例。

```
class connection{    

    public function dbConnect()
    {    
         // here, you need to return it     
         return new PDO("mysql:host=localhost:3306;dbname=education","root","");
    }
} 
```

# excel - 通过vba将数据复制到excel 2007中的范围名称

> ID：12985634
> 
> 赞同：0
> 
> 时间：2012-10-20T05:42:47.017
> 
> 标签：excel, vba, range

如果我在 vba 中用 10 个值填充一个对象，并将其粘贴到已定义为 200 行长的范围中，这 10 个值是否会在预定义的范围内一遍又一遍地复制？

注意：填充和粘贴是通过 vba 代码完成的，范围在 excel 中定义。

这似乎发生在 excel vba 2007 中，但不是在 2010 年。需要解决 2007 年的问题。将不胜感激您的意见..

感谢广告！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:39:38.467

为了避免粘贴额外的数据，`Set`一个变量到你的命名范围和`Resize`粘贴之前的那个变量，例如

如果粘贴的“对象”是`Range`

```
Set rng = [MyNamedRange]
rng.Resize(CopyFormRange.Rows.Count, CopyFormRange.Columns.Count).Copy CopyFormRange 
```

如果粘贴的“对象”是一个数组

```
Set rng = [MyNamedRange]
rng.Resize(UBound(CopyFromArray, 1) - LBound(CopyFromArray, 1), _
           UBound(CopyFromArray, 2) - LBound(CopyFromArray, 2)).Copy CopyFormRange 
```

# plugins - 自定义 wordpress 媒体上传器按钮文本

> ID：12985635
> 
> 赞同：0
> 
> 时间：2012-10-20T05:43:06.253
> 
> 标签：plugins, wordpress, wordpress-theming

我一直在研究一个简单的小插件，需要一个图像加载器。我想使用默认的 Wordpress 以便它可以访问该库，这一切都非常简单。我所需要的只是选择图像的能力，其他什么都不需要。

我已经设法使用 attachment_fields_to_edit 过滤器删除了不需要的输入，并使用 media_upload_tabs 过滤器删除了不需要的图库选项卡，但我似乎无法删除页面上的其他内容，具体来说我正在谈论“用作特色图片”链接和“保存所有更改”按钮。我也很想将按钮文本从“插入帖子”更改为更适合插件实际执行的内容。

我已经搜索并挖掘了 WP 文件，但没有看到任何可以让我真正改变它的东西（虽然我更喜欢优雅的东西，但在将上传器输出发送到浏览器并使用之前，我会采用一个简单的 html 过滤器正则表达式以这种速度完成工作）。我能做的最好的事情是删除“插入到帖子”选项行，这不是很有帮助，因为没有实际选择图像的方法。

以前有人做过吗？我很惊讶没有一个简单的钩子可以让你改变那些（或者如果有钩子我找不到钩子）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:07:31.393

看看[http://shibashake.com/wordpress-theme/how-to-hook-into-the-media-upload-popup-interface](http://shibashake.com/wordpress-theme/how-to-hook-into-the-media-upload-popup-interface)和“4\. 设置我们自己的行动”部分。这似乎正是你所追求的。

# google-app-engine - 为什么函数返回后内存没有释放？

> ID：12985639
> 
> 赞同：2
> 
> 时间：2012-10-20T05:44:20.157
> 
> 标签：google-app-engine, memory-leaks, python-2.7

在 GAE 上，我的处理程序调用一个函数来完成所有繁重的工作。所有对象都在函数内创建。然而，在函数退出后（它返回一个用于 response.out.write 的字符串），内存使用量并没有下降。对 GAE 的第一次 http 调用有效，但之后内存保持在 100MB 左右。第二次访问尝试失败，因为已达到私有内存限制。

我已经清除了我编写的所有类静态对象，并调用了第三方库的 close 和 clear 函数，但无济于事。如何干净地释放内存？我宁愿强制重启而不是追踪内存泄漏。性能在这里不是问题。

我知道这不是由于GC。GAE 报告内存在很长一段时间内保持在高水平。上面的两个 http 调用相隔几分钟或更长时间。

我试图在 Handler.get 函数中导入我的函数。提供页面后，我尝试删除所有导入的第三方模块，然后删除我自己的模块。理论上，现在每个调用都应该重新启动所有可疑模块，但内存问题仍然存在。调用之间剩下的唯一（预期）模块应该是标准库模块（包括 lxml、xml 等）。

编辑：我现在使用 taskqueue 在后端实例上安排繁重的部分，并使用 db.Blob 来传递结果。让后端工作解决了内存问题。后端的 GAE 文档是完整的，但令人困惑。关键是需要遵循以下说明 1) 编辑 backends.yaml 2) 使用 appcfg 进行更新（从启动器部署是不够的）。然后在管理员中检查后端是否已启动。taskqueue target= 在开发服务器上也中断，因此需要在开发服务器上解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T05:54:05.917

这（可能）是因为没有什么说*垃圾收集器*（负责释放未使用的内存）会在您的函数返回时直接启动。

您可以通过一些技巧手动强制它启动，但如果两个 http 请求发生 aprox，这将无法解决任何问题。同时。

相反，我建议您查看不需要您对每个请求进行繁重工作的解决方案。

如果生成的数据对于每个请求都是唯一的，请查看您是否可以在（有限的）私有内存池之外进行计算。

* * *

**如何手动启动垃圾收集器？**

当您的重量级变量超出范围时，请使用以下方法调用 GC。

```
import gc

...

gc.collect () 
```

# matlab - 从非线性方程中找到复数根

> ID：12985640
> 
> 赞同：2
> 
> 时间：2012-10-20T05:44:21.957
> 
> 标签：matlab, wolfram-mathematica

我需要从方程中找到根，如下所示（Mathematica）：

```
Sqrt[3]/2*x-(I-x*Sqrt[3]/2*c^2)*I/Sqrt[2*Pi]/d^3*Integrate[t*Exp[-t^2/2/d^2]/(Sqrt[3]/2*x+I*(t+b0)),{t,-Inf,Inf}]=0 
```

即如图所示：

![在此处输入图像描述](../Images/f9e620a7210fd7de15e81526b8b2730c.png)

其中*c*、*d*和*b* [0]是给定参数，*x*是需要找到的复数根。我尝试了几种方法，包括扫描*x*的真实部分和想象部分以及迭代方法，但它们都不能解决所有情况。

是否有任何通用方法可以有效地求解此类方程，或者通过 MATLAB/Mathematica？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:56:08.627

你试过Matlab的mupad吗？它是一个强大的符号工具，与 Maple 非常相似，在非数值数学中给出了非常好的结果。在那里试试。声明方程，给软件假设，即`assume c real positive`（不要复制这个，我不记得正确的语法）然后`solve`！如果它退出，它很可能会找到解决方案（有时在一些你甚至不知道的数学案例中！）

# asp.net - C:\Intepub\wwwroot 文件夹

> ID：12985641
> 
> 赞同：0
> 
> 时间：2012-10-20T05:44:27.387
> 
> 标签：asp.net, iis, windows-7

我在 asp.net 中创建了一个示例 Web 服务，并将其发布到一个文件夹中。现在，实际的问题是我找不到 C:\Intepub\wwwroot 我必须复制该文件夹以在我的 Web 应用程序中使用我的 Web 服务。

我必须做什么？我的电脑上安装了 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:49:11.140

您可以创建一个虚拟目录并将发布的站点放在该文件夹中，而不需要 C:\Intepub\wwwroot，确保您已安装 IIS，因为 C:\Intepub\wwwroot 是 IIS 的默认虚拟目录。这就是[**制作虚拟目录**](http://support.microsoft.com/kb/172138)的方法。

# android - 当我输入时，EditText 变大了

> ID：12985644
> 
> 赞同：2
> 
> 时间：2012-10-20T05:45:07.080
> 
> 标签：android, android-layout

我正在开发一个 Android 3.1 平板电脑应用程序，我遇到了 EditText 控件的“问题”。

这是一个没有文本的 EditText：

![在此处输入图像描述](../Images/f4e2a0641c25dce6fa01a1c6e719f11c.png)

但是，当我在上面输入一些文字时：

![在此处输入图像描述](../Images/11a1b1ff5e911e82d0ac4c3a7aa5a7d9.png)

这四行是通过编程方式创建的：

```
 LinearLayout layout = null;
    LayoutParams layoutParams = null;
    EditText editText = null;
    RadioGroup rGroup = null;
    RadioButton rButton = null;
    String tag = null;

    layout = new LinearLayout(mActivity);
    layoutParams = 
            new LayoutParams(LayoutParams.FILL_PARENT, 60);
    layout.setOrientation(LinearLayout.HORIZONTAL);
    layout.setLayoutParams(layoutParams);

    editText = new EditText(mActivity);
    tag = Long.toString(eOtherChks.getEreportOthChkId()) + "_" + OTHER_DESCRIPTION_COL;
    editText.setTag(tag);
    layoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    layoutParams.weight = .25f;
    editText.setLayoutParams(layoutParams);
    editText.setGravity(Gravity.CENTER);
    editText.setText(eOtherChks.getDescription());
    layout.addView(editText); 
```

但是，在另一种观点中，我以编程方式添加了一些 EditText `editText.setInputType(InputType.TYPE_CLASS_NUMBER);`，但它们并没有变大。

我怎样才能避免这种影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:54:46.693

您可以尝试设置：

`layoutParams.width = 0;`

这应该可以防止调整大小。让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:07:37.183

这就是我解决问题的方法：

`layoutParams = new LayoutParams(0, LayoutParams.WRAP_CONTENT);`

# python - argparse - 蟒蛇

> ID：12985646
> 
> 赞同：-1
> 
> 时间：2012-10-15T09:44:09.120
> 
> 标签：python, argparse

在 python 脚本中，我想要三个位置参数和两个可选参数（包括“帮助”）。所以我的需要就像以下

正确的：

```
./myscript.py ONE TWO THREE
./myscript.py --list 
```

不正确：

```
./myscript.py ONE TWO THREE --list 
```

我想使用 argparse 本身使所有位置参数和可选参数互斥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T21:35:54.813

这近似于您想要的：

```
class Three(argparse.Action):
    # custom action that requires 0 or 3 values
    def __call__(self,parser,namespace,values,option_string):
        if len(values) in [0,3]:
            setattr(namespace, self.dest, values)
        else:
            raise argparse.ArgumentError(self,'must have 3 values')

custom = 'usage: %(prog)s [-h] (--list | ONE TWO THREE)'
p=argparse.ArgumentParser(prog='PROG',usage=custom)
g=p.add_mutually_exclusive_group(required=True)
g.add_argument('--list',action='store_true')
g.add_argument('pos',nargs='*',default=[],action=Three) 
```

`--list`如果同时给出和`pos`，如果没有给出，或者`pos`值的数量不是 3 ，它会引发错误。我包含了一个自定义用法，因为默认值是：

```
usage: PROG [-h] (--list | pos [pos ...]) 
```

# python - python制表符分隔检索列并删除空行

> ID：12985651
> 
> 赞同：1
> 
> 时间：2012-10-20T05:46:24.987
> 
> 标签：python, csv

我有一个制表符分隔的文本文件，它由两列组成，例如：

```
Apple123    2
Orange933   2
Banana33334 2 
```

底部可能有空行。我该如何： 1\. 去除空行，以及 2\. 写入仅包含第一列的文件？

我现在的问题是，如果我使用**line.strip()**那么该行由一个长度为 10（例如第一行）而不是 2 的列表组成。如果我使用**csv.reader** (..., dialect = excel-tab) 然后我不能使用 strip() 所以我不能摆脱空行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:59:56.503

这应该可以解决问题：

```
with open(infilename) as infile, open(outfilename) as outfile:
    for line in infile:
        line = line.strip()
        if line:
            outfile.write("{}\n".format(line.split("\t")[0])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:56:04.313

您可以使用 Python 的基本字符串操作（`str.split`等等）来做到这一点：

```
infile = open("/path/to/myfile.txt")
outfile = open("/path/to/output.txt", "w") # Clears existing file, open for writing

for line in infile:
    if len(line.strip()) == 0:
        # skip blank lines
        continue

    # Get first column, write it to file
    col1 = line.split("\t")[0]
    outfile.write(col1 + "\n")

outfile.close() 
```

# r - 'dimnames' [1] 的长度不等于数组范围'是什么意思？

> ID：12985653
> 
> 赞同：19
> 
> 时间：2012-10-20T05:46:53.120
> 
> 标签：r

我有一个 data.frame，我可以使用 matplot 绘制它：

```
> dim(lhbyzone)
[1] 38070    21
> matplot(lhbyzone)
(no error occurs here) 
```

但是如果我拿 lh 的头来尝试，它会给我一个奇怪的错误：

```
> foo <- head(lhbyzone,1000)
> matplot(foo)
Error in `rownames<-`(`*tmp*`, value = c("1", "2", "3", "4", "5", "6",  : 
  length of 'dimnames' [1] not equal to array extent 
```

那么，也许与名字有关？

```
> dimnames(foo)
[[1]]
   [1] "1"    "2"    "3"    "4"    "5"    "6"    "7"    "8"    "9"    "10"  
  [11] "11"   "12"   "13"   "14"   "15"   "16"   "17"   "18"   "19"   "20"  
  [21] "21"   "22"   "23"   "24"   "25"   "26"   "27"   "28"   "29"   "30"  
  [31] "31"   "32"   "33"   "34"   "35"   "36"   "37"   "38"   "39"   "40"  
...
 [951] "951"  "952"  "953"  "954"  "955"  "956"  "957"  "958"  "959"  "960" 
 [961] "961"  "962"  "963"  "964"  "965"  "966"  "967"  "968"  "969"  "970" 
 [971] "971"  "972"  "973"  "974"  "975"  "976"  "977"  "978"  "979"  "980" 
 [981] "981"  "982"  "983"  "984"  "985"  "986"  "987"  "988"  "989"  "990" 
 [991] "991"  "992"  "993"  "994"  "995"  "996"  "997"  "998"  "999"  "1000"

[[2]]
 [1] "time" "z1"   "z2"   "z3"   "z4"   "z5"   "z6"   "z7"   "z8"   "z9"  
[11] "z10"  "z11"  "z12"  "z13"  "z14"  "z15"  "z16"  "z17"  "z18"  "z19" 
[21] "z20" 

> dim(foo)
[1] 1000   21

> names(foo)
 [1] "time" "1"    "2"    "3"    "4"    "5"    "6"    "7"    "8"    "9"   
[11] "10"   "11"   "12"   "13"   "14"   "15"   "16"   "17"   "18"   "19"  
[21] "20" 
```

尺寸看起来一样吗？这很奇怪，因为原始框架上的 matplot 有效，但不在框架的头部。这里会发生什么？

编辑，好的，所以回答一些问题，让我们使用 thbyzone 代替 lhbyzone，因为它更小，让我们使用 head 代替 head(..,1000) 来使数据更小

```
> head(thbyzone)
  time  1  2  3  4  5  6  7  8  9 10 11
1    1 46 38 44 45 42 44 45 43 41 42 36
2    2 46 36 42 43 42 43 44 44 39 43 32
3    3 45 35 40 41 40 42 41 42 36 43 31
4    4 41 30 36 37 39 38 40 34 35 39 30
5    5 39 30 34 33 40 38 35 30 33 35 34
6    6 35 29 32 32 41 37 35 35 36 35 35

> dimnames(head(thbyzone))
[[1]]
[1] "1" "2" "3" "4" "5" "6"

[[2]]
 [1] "time" "1"    "2"    "3"    "4"    "5"    "6"    "7"    "8"    "9"   
[11] "10"   "11" 

> matplot(head(thbyzone))
Error in `rownames<-`(`*tmp*`, value = c("1", "2", "3", "4", "5", "6",  : 
  length of 'dimnames' [1] not equal to array extent

> matplot(as.matrix(head(thbyzone)))
Error in `rownames<-`(`*tmp*`, value = c("1", "2", "3", "4", "5", "6",  : 
  length of 'dimnames' [1] not equal to array extent

> matplot(thbyzone[1:6,])
Error in `rownames<-`(`*tmp*`, value = c("1", "2", "3", "4", "5", "6",  : 
  length of 'dimnames' [1] not equal to array extent

> class(thbyzone)
[1] "cast_df"    "data.frame"

> str(thbyzone)
List of 12
 $ time: num [1:39432] 1 2 3 4 5 6 7 8 9 10 ...
 $ 1   : int [1:39432] 46 46 45 41 39 35 33 33 36 47 ...
 $ 2   : int [1:39432] 38 36 35 30 30 29 28 28 28 33 ...
 $ 3   : int [1:39432] 44 42 40 36 34 32 30 30 30 32 ...
 $ 4   : int [1:39432] 45 43 41 37 33 32 30 29 30 41 ...
 $ 5   : int [1:39432] 42 42 40 39 40 41 38 33 36 43 ...
 $ 6   : int [1:39432] 44 43 42 38 38 37 36 36 38 44 ...
 $ 7   : int [1:39432] 45 44 41 40 35 35 33 30 31 39 ...
 $ 8   : int [1:39432] 43 44 42 34 30 35 34 33 34 41 ...
 $ 9   : int [1:39432] 41 39 36 35 33 36 32 31 31 35 ...
 $ 10  : int [1:39432] 42 43 43 39 35 35 33 33 35 42 ...
 $ 11  : int [1:39432] 36 32 31 30 34 35 32 30 28 30 ...
 - attr(*, "row.names")= int [1:39432] 1 2 3 4 5 6 7 8 9 10 ...
 - attr(*, "idvars")= chr "time"
 - attr(*, "rdimnames")=List of 2
  ..$ :'data.frame':    39432 obs. of  1 variable:
  .. ..$ time: num [1:39432] 1 2 3 4 5 6 7 8 9 10 ...
  ..$ :'data.frame':    11 obs. of  1 variable:
  .. ..$ station_id: int [1:11] 1 2 3 4 5 6 7 8 9 10 ...

> traceback()
.... lots of lines ...
   "39405", "39406", "39407", "39408", "39409", "39410", "39411", 
   "39412", "39413", "39414", "39415", "39416", "39417", "39418", 
   "39419", "39420", "39421", "39422", "39423", "39424", "39425", 
   "39426", "39427", "39428", "39429", "39430", "39431", "39432"
   ))
4: as.matrix.cast_df(y)
3: as.matrix(y)
2: ncol(y <- as.matrix(y))
1: matplot(thbyzone[1:6, ]) 
```

更多尝试：

```
> foo <- head(thbyzone)
> foo$time <- NULL
> matplot(foo)
Error in `rownames<-`(`*tmp*`, value = c("1", "2", "3", "4", "5", "6",  : 
  length of 'dimnames' [1] not equal to array extent
> head(foo)
   1  2  3  4  5  6  7  8  9 10 11
1 46 38 44 45 42 44 45 43 41 42 36
2 46 36 42 43 42 43 44 44 39 43 32
3 45 35 40 41 40 42 41 42 36 43 31
4 41 30 36 37 39 38 40 34 35 39 30
5 39 30 34 33 40 38 35 30 33 35 34
6 35 29 32 32 41 37 35 35 36 35 35 
```

编辑：

```
> options(error=recover)
> matplot(thbyzone[1:6,])
Error in `rownames<-`(`*tmp*`, value = c("1", "2", "3", "4", "5", "6",  : 
  length of 'dimnames' [1] not equal to array extent

Enter a frame number, or 0 to exit   

1: matplot(thbyzone[1:6, ])
2: ncol(y <- as.matrix(y))
3: as.matrix(y)
4: as.matrix.cast_df(y)
5: `rownames<-`(`*tmp*`, value = c("1", "2", "3", "4", "5", "6", "7", "8", "9" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T15:39:15.770

`reshape`好的，我可以用（但不能用`reshape2`）从头开始复制它。确实有些东西被弄坏了`head()`。

```
d <- data.frame(time=rep(1:10,10),x=rep(1:10,each=10),y=1:100)
library(reshape2)
str(dcast(d,time~x))  ## regular data frame
detach("package:reshape2")
library(reshape)
str(z <- cast(d,time~x))
matplot(head(z))  ## error 
```

具体问题是 之间的交互`utils::head.data.frame`，它在不保持完全一致的内部结构的情况下丢弃对象的碎片，和`as.matrix.cast_df`（由 调用`matplot`），它假设结构存在。

添加以下方法似乎可以解决问题。

```
head.cast_df <- function (x, n = 6L, ...)  {
    stopifnot(length(n) == 1L)
    n <- if (n < 0L) {
        max(nrow(x) + n, 0L)
    } else min(n, nrow(x))
    h <- x[seq_len(n), , drop = FALSE]
    ## fix cast_df-specific row names element
    attr(h,"rdimnames")[[1]] <- rdimnames(h)[[1]][seq_len(n),,drop=FALSE]
    h
} 
```

`reshape`尽管（我认为）不赞成使用该软件包以支持`reshape2`... ，但可能值得就此联系维护者

另一种解决方法是尽可能切换`reshape::cast`到`reshape2::dcast`...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-04-18T00:22:27.453

我有同样的错误。尽管此答案不适用于此问题的具体示例，但它可能会帮助未来访问此页面寻求错误帮助的用户。

我的列的名称包含数字和符号，例如`17:901`. 这是抛出错误。使用该`make.names`函数将我的列名转换为“语法上有效的名称”，例如。`names(df)<-make.names(names(df))`

这解决了问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-22T10:55:58.430

我有同样的错误，但在我的情况下，一列（最后一列）在聚集后只有 NA 值。删除此列恢复了理智。您可以检查以确认您没有遇到类似的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-23T19:41:54.840

对于那些在使用时收到此错误的人`mvoutlier::plot.mvoutlierCoDa(...)`，当参数`onlyout`（仅绘制异常值）设置为`TRUE`（默认值）并且您的数据集不包含任何异常值时会产生此错误。设置`onlyout=FALSE`应该工作。运行`mvoutlier.CoDa(df)$outliers`以查看您的数据集是否包含异常值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-03T19:18:36.570

可能有帮助 仅供参考

对于名称为股票代码的 xts 对象，我遇到了类似的问题。
对象 y 和 z

> > 姓名(z)

[1] “000100 KS” “000333 C2” “000423 CH” “000651 CH” “000660 KS” “002008 C2” “002415 C2” “002456 C2” [9] “002475 CH”

> "002747 频道"
> 
> > all.equal(names(y),names(z)) TRUE
> > 
> > all.equal(index(y),index(z)) TRUE
> > 
> > 暗淡(y) 489 10
> > 
> > 暗淡(z) 489 10
> > 
> > 昏暗（y[“2019-08”，]）

[1] 31 10

> > 昏暗（z[“2019-08”，]）

`[.xts`(z, "2019-08", ) 中的错误：

'dimnames' [1] 的长度不等于数组范围

但

> > 名称（z）<-make.names（名称（z））
> > 
> > 昏暗（z[“2019-08”，]）

[1] 31 10

不知道为什么 xts[] 选择适用于对象 y 而不是 z。

现在我只需要编写一个快速辅助函数来从新的“语法有效”（但不再是语义有效......）名称中获取代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-24T05:35:33.930

我在使用 data.frame 时遇到了类似的问题，我试图将其转换为 data.table 并给了我同样的问题。我解决了：

```
data <- data %>% as.matrix(.) %>% as.data.table(.) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-20T06:25:13.893

我收到错误是因为我使用了自定义列名，但不小心忘记了一列。在不选择列名的情况下尝试运行它以确保您没有遗漏任何内容可能值得尝试。

# mysql - 从两个表更新余额的 SQL

> ID：12985654
> 
> 赞同：0
> 
> 时间：2012-10-20T05:47:41.663
> 
> 标签：mysql, sql, postgresql

我需要帮助来更新表中的余额列。使用更新命令

customer_master 中的余额列

> customer_master > custcode，余额

它需要根据两个表中的值进行更新

> Bookings > custcode, bookingamount
> 
> 应收账款 > custcode、amountrecd

对于客户代码，余额为 bookingamount - amountrecd

该命令将在 mysql 和 postgresql 中应用。

它可以适用于单个客户，例如（对于 custcode ='A1234XXXXX'），也可以适用于 customer_master 中存在的所有客户。

*我在“更新两张表的余额”上尝试了谷歌，但到目前为止没有运气。*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T05:53:36.207

对于 MySQL，你可以连接多个表，即使它是一个`UPDATE`语句。我使用`LEFT JOIN`是因为有可能在表格`custcode`上还没有记录。`receivables`

```
UPDATE  customer_master a
        LEFT JOIN bookings b
            ON a.custcode = b.custcode
        LEFT JOIN receivables c
            ON a.custcode = c.costcode
SET     a.balance = COALESCE(b.bookingamount, 0) - COALESCE(c.amountrecd, 0) 
-- WHERE a.custcode = 'A1234XXXXX' 
```

*后续问题： custcode 可以在`bookings`和上包含多条记录`receivables`吗？如果是这样，我会更新答案。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:03:23.150

我的看法有点（可能）在顶部皮带和牙套上

```
UPDATE  customer_master a
        LEFT JOIN (select custcode, sum(COALESCE(bookingamount, 0)) AS bookingamount 
                   from bookings group by custcode) b
            ON a.custcode = b.custcode
        LEFT JOIN (select custcode, sum(COALESCE(amountrecd, 0)) AS amountrecd 
                   from receivables group by custcode) c
            ON a.custcode = c.custcode
SET     
         a.balance = COALESCE(b.bookingamount, 0) - COALESCE(c.amountrecd, 0) 
-- WHERE a.custcode = 'A1234XXXXX' 
```

# c# - GridView 是否有 OnRowSelect 事件？

> ID：12985656
> 
> 赞同：0
> 
> 时间：2012-10-20T05:47:47.983
> 
> 标签：c#, asp.net, .net, gridview

我知道这可能是一个愚蠢的问题，但 GridView 在 ASP.NET C# 中是否有像 OnRowUpdating、OnRowDeleting 这样的 OnRowSelect？

```
protected void GridView_OnRowSelect(object sender, GridViewSelectEventArgs e)
{
    loc_id_hf.Value = (((HiddenField)(GridView2.Rows[e.RowIndex].FindControl("loc_id_hf"))
} 
```

当我将上面的代码放入事件中时，我在 e.RowIndex 上收到错误

任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:53:20.870

这是gridview的[**事件列表**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx)`SelectedIndexChanged`，你可能需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:46:22.320

您必须启用`autogenerateselectbutton = true`. [在这里查看更多](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanging.aspx)

```
<asp:GridVew id="Gridview1" OnSelectedIndexChanging="GridView1_SelectedIndexChanging"
   OnSelectedIndexChanged="GridView1_SelectedIndexChanged" autogenerateselectbutton="True">

</asp:GridVew > 
```

事件处理程序

```
 protected void GridView1_SelectedIndexChanging(object sender, GridViewSelectEventArgs e)
 {

       GridViewRow row = GridView1.Rows[e.NewSelectedIndex];

 }

 protected void GridView1_SelectedIndexChanged(object sender, GridViewSelectEventArgs e)
 {

       GridViewRow row = GridView1.SelectedRow;

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:51:10.150

将您的按钮放在模板字段中，并为其分配一个正常的点击事件，如下所示，

```
<asp:GridView ID="gvProducts" runat="server" AutoGenerateColumns="False" 
                EnableModelValidation="True">
                <Columns>
                    <asp:BoundField HeaderText="field 1" />
                    <asp:BoundField HeaderText="field2" />
                    <asp:TemplateField HeaderText="Select">
                        <ItemTemplate>
                            <asp:Button ID="btnSelect" runat="server" onclick="btnSelect_Click" 
                                Text="Select" />
                        </ItemTemplate>
                    </asp:TemplateField>
                </Columns>
            </asp:GridView> 
```

您的点击事件如下所示

```
protected void btnSelect_Click(object sender, EventArgs e)
        {
            Button b = (Button)sender;
            GridViewRow r = (GridViewRow)b.NamingContainer;
            ////// once you have the row in which the event occured, you can do every thing with it
            // like
            int id = Convert.ToInt32(gvProducts.DataKeys[r.RowIndex].Value);
            // or you can find control like
            HiddenField hf = (HiddenField)r.FindControl("myHiddenField")
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T09:27:20.253

否 但它有 SelectedIndexChanged 事件可以达到目的。这是 GridView 支持的事件列表。 [http://msdn.microsoft.com/en-us/library/hf8xwy0t.aspx](http://msdn.microsoft.com/en-us/library/hf8xwy0t.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T15:38:48.593

您必须首先通过简单的插入、更新、删除来查看此 gridview 的事件......这是链接[http://www.dotnetspider.com/resources/40129-grid-view-save-edit-update.aspx](http://www.dotnetspider.com/resources/40129-grid-view-save-edit-update.aspx)

然后查看此链接[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.buttonfield.commandname.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.buttonfield.commandname.aspx)它可能会对您有所帮助。

```
void CustomersGridView_RowCommand(Object sender, GridViewCommandEventArgs e)
  {
    if(e.CommandName=="Select")
    {
      int index = Convert.ToInt32(e.CommandArgument);    
      GridViewRow selectedRow = CustomersGridView.Rows[index];
      TableCell contactName = selectedRow.Cells[1];
      string contact = contactName.Text;  
      Message.Text = "You selected " + contact + ".";
    }
  } 
```

Gridview 看起来像这样

```
<asp:gridview id="CustomersGridView" datasourceid="CustomersSqlDataSource" 
        autogeneratecolumns="false" onrowcommand="CustomersGridView_RowCommand"
        runat="server">

        <columns>

          <asp:buttonfield buttontype="Button" 
            commandname="Select" headertext="Select Customer" text="Select"/>

          <asp:boundfield datafield="CompanyName" headertext="Company Name"/>

          <asp:boundfield datafield="ContactName" headertext="Contact Name"/>

        </columns>

</asp:gridview> 
```

你也可以申请`CommandName="Edit", CommandName="Delete" instead of CommandName="Select"`

# android - GreenDAO如何获得最高记录？

> ID：12985658
> 
> 赞同：8
> 
> 时间：2012-10-20T05:48:33.450
> 
> 标签：android, sqlite, greendao

我想从我的表中获得一些记录，但 GreenDAO 不提供。像这样：

> SELECT TOP 1 * FROM table_name

在 LINQ 中，您可以使用 获得最高记录`Take()`，GreenDAO 有什么解决方案吗？

每个人都可以提供一个建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T08:59:40.293

您可以使用标准 QueryBuilder 指定限制：

```
List<YourEntity> entities = yourDao.queryBuilder().limit(1).list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-16T08:16:09.540

```
 var mcc: SearchDao

 val list: List<Search?> =mcc.queryBuilder().orderDesc(SearchDao.Properties.Time).limit(8).list() 
```

# mysql - （Rails + Devise）将数据插入数据库并填充密码

> ID：12985659
> 
> 赞同：0
> 
> 时间：2012-10-20T05:48:59.260
> 
> 标签：mysql, ruby-on-rails, csv, devise

我环顾四周，找不到任何有关此的信息。

我已经建立了我的用户模型并运行了我的迁移。现在，我必须使用仅包含电子邮件和姓名的 csv 文件中的数据填充数据库中现有的用户表。问题是用户还没有密码。所以我需要为所有用户创建一个临时密码。我正在使用[devise](https://github.com/plataformatec/devise)进行身份验证，因此密码需要用于 Devise 的加密。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:18:00.667

您可以在 Ruby 中解析 CSV 文件，遍历所有记录并使用临时密码创建用户。

您可以使用 ruby​​ 的 CSV 类读取 csv 文件：

```
CSV.open('my_file.csv','r') do |row|
  #do something with the row, e.g. row['first_name']
end 
```

从 CSV 中提取字段后，您可以使用以下内容生成临时密码：

```
o =  [('A'..'Z'), (1 .. 9)].map{|i| i.to_a}.flatten;  
temp_password = (0..8).map{ o[rand(o.length)]  }.join; 
```

这将生成一个包含大写字母和数字 1-9 的密码，长度为 8 个字符（我使用它在我当前的项目中生成邀请码）

所以把它们放在一起，你可以做这样的事情：

```
CSV.open('my_file.csv','r') do |row|
  email = row['email']
  name = row['name']
  #This would be better in a seperate method
  o =  [('A'..'Z'), (1 .. 9)].map{|i| i.to_a}.flatten;  
  temp_password = (0..8).map{ o[rand(o.length)]  }.join;
  User.create(:email => email, :password => temp_password, :password_confirmation => temp_password)
end 
```

希望这会为您指明正确的方向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:55:44.570

您可以通过创建新用户模型来创建新的 Devise 用户（请参阅[https://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface](https://github.com/plataformatec/devise/wiki/How-To:-Manage-users-through-a-CRUD-interface)）

```
user = User.new(:email => 'test@example.com', :password => 'password', :password_confirmation => 'password')
user.save 
```

参考：[https ://stackoverflow.com/a/4660842/445908](https://stackoverflow.com/a/4660842/445908)

# javascript - 使用 epub.js 解析 epub

> ID：12985660
> 
> 赞同：1
> 
> 时间：2012-10-20T05:49:00.680
> 
> 标签：javascript, epub

我正在使用[https://github.com/augustl/js-epub](https://github.com/augustl/js-epub)解析 .epub 文件。但我收到错误为“XML 解析错误：未找到元素”。我在第 3 步之前没有问题，它失败了在后处理步骤中。我正在使用以下代码

```
 $(document).ready(function(){
    $('#something').html('fetching');
    $.ajax({
    url: "alice.epub",
    complete: function(response, status, request) {
    var the_zip = new JSUnzip(response.responseText);
    $('#something').html('finished with ' + status);
    console.log("is it zip?" + the_zip.isZipFile());
    var epub = new JSEpub(response.responseText);
    epub.processInSteps(function (step, extras) {
    var msg = '';
    console.log(step);
    if (step === 1) {
    msg = "Unzipping";

    } else if (step === 2) {

    msg = "Uncompressing " + extras;

    } 
    else if (step === 3) {
    msg = "Reading OPS";
    } 
    else if (step === 4) {
    msg = "Post processing";
    alert(msg);
    } 
    else if (step === 5) {
    msg = "Finishing";
    alert('done!');
    } 
    else {
    msg = "Error!";
    }
    $('#something').html(msg);

    });

    }
    });
  }); 
```

请谁能告诉我上面代码中的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T18:49:42.770

你试过 js-epub 的 validate-function 吗？

```
 var vali = epub.validate(); 
```

如果某些值“未定义”，您的控制台现在应该抛出异常；

顺便说一句..在检查 js-epub.js 代码时 - 第 15 行（inflate）缺少一个“新”标签....也许这可以解决您的问题。

编辑：如果您解决了问题，很高兴分享答案。

# javascript - Javascript动态方法调用

> ID：12985663
> 
> 赞同：2
> 
> 时间：2012-10-20T05:49:34.407
> 
> 标签：javascript, methods, call, listener, notify

我想建立一个观察者/听众系统：

```
var listeners = [];

function MyObj(){
    this.myMethod = function(){
        // react to event
    }
}

var myObj = new MyObj();

function addListener(fn, obj){
    alliancesNotify[alliancesNotify.length] = {fn: fn, obj: obj}
}

addListener(myObj, myObj.myMethod); // Best way of doing it?

function notify(objArr){
    for (var i in objArr){
        objArr[i].obj.fn(); // will this work? 
    }
}

notify(listeners); 
```

我希望您对这两条注释行有想法（如果它实际上会像预期的那样工作）以及是否可能有更直接的方式通过调用对象的方法来通知对象。（例如，我注意到一些实现将函数名作为字符串传递，而不是对函数的引用，而不是这种方式。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:05:59.720

好的，首先有多个问题，让我们一一讨论：

*   `objArr[i].obj.fn();`不会做你所期望的。它将查找并调用 fn 方法，但是您期待`myMethod`从 obj 调用。要解决此问题，您有多种选择。要么使用[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)，要么[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。所以你的代码看起来像`objArr[i].fn.call(objArr[i].obj)`. 这就是像 jQuery、Mootools 或 PrototypeJS 那样优秀的 JS 库是如何做到的。
*   第二个问题，如果回调函数抛出异常并有错误怎么办？在某些浏览器中，循环将停止迭代，因此不会调用进一步的回调（函数）。解决方案可以再次使用多个，要么使用 try catch 块，要么做我最喜欢的方法。使用`setTimeout`这样您的代码将如下所示，由于 JS 是单线程浏览器，因此会将回调函数排队，即使出现错误，其余的也不会受到影响。

```
    函数通知（objArr）{
        for（objArr 中的变量 i）{
            window.setTimeout(function(){ objArr[i].call(objArr[i].obj);}, 0);
        }
    }

```

*   它绝对不是最佳但接近最佳解决方案，因此请查看周围的许多库（Google it）以改进它。我自己为事件管理编写了一个这样的独立 PUB SUB 库，[在这里查看](http://blog.creapptives.com/post/2658433646/puny-standalone-javascript-custom-pubsub-events-library)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:11:44.960

看看这篇文章

[http://jqfaq.com/how-to-make-a-plain-vanilla-java-script-object-start-notifying-changes-to-its-properties/](http://jqfaq.com/how-to-make-a-plain-vanilla-java-script-object-start-notifying-changes-to-its-properties/)

[http://jqfaq.com/how-to-get-notified-within-an-object-when-one-of-that-objects-property-changes/](http://jqfaq.com/how-to-get-notified-within-an-object-when-one-of-that-objects-property-changes/)

在这篇文章中，您可以看到他们如何使用 Object.defineProperty 来通知属性更改。

# javascript - 无法在 Javascript 中控制 appendChild()

> ID：12985664
> 
> 赞同：1
> 
> 时间：2012-10-20T05:49:36.477
> 
> 标签：javascript, append

使用 Javascript 拆分页面时遇到问题。我想将 17 个 p 标签移动到一个 div 标签中。所以我有 34 个这样的标签：

```
<p>1</p> <!-- Each p tag have the value is the number of the p tag --> 
```

然后我有这个 Javascript 代码：

```
 var p = document.getElementsByTagName("p");
  var div = document.createElement("div");
  for(i=0;i<17;i++){
    div.appendChild(p[i]);
  }
  document.getElementsByTagName("body")[0].appendChild(div); 
```

我收到的结果是在 div 标签中，有 17 个 p 标签，但是这些 p 标签的值是奇数，意思是这样的：

```
1

3

5

7

9

11

13

15

17

19

21

23

25

27

29

31

33 
```

这是演示：http: [//jsbin.com/eyivic](http://jsbin.com/eyivic)

同时，我希望 div 标签中的 p 标签看起来像这样：

```
1

2

3

4

5

6

7

8

9

10

11

12

13

14

15

16

17 
```

那么问题是什么？我该如何解决？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T06:04:17.073

当您`appendChild`在 div 上创建时，它会删除`p`数组的元素。这将使这种“唯一几率”的行为发生。假设您有 4 个 p 元素。

```
1, 2, 3, 4 
```

如果您从中创建一个`appendChild`，`p[0]`它将按照您的预期移动您的 p 元素，但现在您的列表是这样的：

```
2, 3, 4 
```

您现在指向`p[1]`，您期望那是元素 2，但它将是元素 3。

要修复它，您始终可以指向`p[0]`它，它会按照您的预期运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T06:05:10.177

您的循环应如下所示：

```
for(i=0;i<p.length;i++){
    var newNode = p[i].cloneNode(true);
    div.appendChild(newNode);
  } 
```

当您执行 appendChild 时，它会从您的数组中删除。克隆将解决您的问题。

@memosdp 指出您实际上想从原始父节点中删除那些 p 元素。在这种情况下，当您的循环完成时，只需清除旧的父节点：

```
// your loop is before this
var node = p[0].parentNode;
while (node.hasChildNodes()) {
    node.removeChild(node.lastChild);
} 
```

# cocoa - 使用 NSSet 过滤 NSArray 时使用 NONE 的问题

> ID：12985666
> 
> 赞同：0
> 
> 时间：2012-10-20T05:49:45.663
> 
> 标签：cocoa, nsarray, nsset

我试图通过排除 NSSet 中的元素来过滤 NSArray。我正在做这样的事情：

```
 NSMutableArray* a = [NSMutableArray arrayWithObjects:@"1", @"2", @"3", nil];
    NSSet* set = [NSSet setWithObjects:@"2", nil];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NONE SELF IN %@", set];
    NSArray* b = [a filteredArrayUsingPredicate:predicate]; 
```

但是，此代码会引发异常：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ALL 或 ANY 运算符的左侧必须是 NSArray 或 NSSet

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T06:10:27.400

您应该在谓词中使用`NOT`而不是：`NONE`

```
[NSPredicate predicateWithFormat:@"NOT SELF IN %@", set] 
```

这是因为谓词应用于`SELF`数组中的每个对象 ( )，即`NSString`。反之，`None`应适用`NSArray`于`NSSet`。

如果你坚持使用`NONE`. 您可以更改`a`为

```
NSMutableArray* a = [NSMutableArray arrayWithObjects:@[@"1"], @[@"2"], @[@"3"], nil]; 
```

这样`SELF`就变成了`NSArray`。

# c# - 使用 HTMLAgilityPack 仅获取 href 的 URL

> ID：12985673
> 
> 赞同：0
> 
> 时间：2012-10-20T05:51:15.617
> 
> 标签：c#, html-agility-pack

这是我要解析的 HTML 源代码：

```
<a style='white-space: nowrap;' href='/AuthorStories-4931/dreamfall.htm'><img class='donoricon' alt='(Current Donor)'  title='(Current Donor)' src='http://static.tthf.me/images/donors/Current%20Donor.gif'/>dreamfall</a> 
```

这是我正在使用的代码：

```
authorLink = doc.DocumentNode.SelectSingleNode("//a[contains(@href, 'AuthorStories')]").OuterHtml; 
```

这会正确抓取链接，但它也会捕获 img。我想抓住的唯一部分是 href 段。关于如何解析那个特定部分的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:49:08.347

*【好几年没碰HtmlAgilityPack了，不过应该大体上是这样的】*

取而代之的是，在返回的节点上`OuterHtml`应该有一个数组，你应该可以从那里得到。`Attributes``SelectSingleNode``href`

# ckeditor - 需要将 Elfinder 文件管理器与 CKEditor 集成

> ID：12985676
> 
> 赞同：3
> 
> 时间：2012-10-20T05:52:10.550
> 
> 标签：ckeditor, integrate

试图在谷歌上找到如何将 elfinder 与 CKeditor 集成，但不起作用。[这里](https://www.google.co.id/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CBwQFjAA&url=https%3A%2F%2Fgithub.com%2FStudio-42%2FelFinder%2Fwiki%2FIntegration-with-CKEditor&ei=WzeCUPytBcLKrAegloHQBQ&usg=AFQjCNGi03_d6ChUMDhOg4qt0UKhyfTtow)有一个说明， 但它不起作用。它能够打开elfinder。但是，当我双击图像时，它不会将 URL 传递给图像文件，而是打开图片查看器。

再试一次，找到这个[链接](http://bxuulgygd9.tal.ki/20110728/integration-with-ckeditor-759177/) ，但它也无济于事。还有人说github上的编码可以用1版，现在elfinder用的是2.0版的rc1。

那么，有没有人可以帮助我与 CKeditor 集成？这将会非常棒。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:42:40.583

在 elfinder.html 中替换此代码：

```
 <!-- elFinder initialization (REQUIRED) -->
    <script type="text/javascript" charset="utf-8">
        $().ready(function() {
            var elf = $('#elfinder').elfinder({
                url : 'php/connector.php'  // connector URL (REQUIRED)
                // lang: 'ru',             // language (OPTIONAL)
            }).elfinder('instance');
        });
    </script> 
```

来自维基的代码：

```
<script type="text/javascript" charset="utf-8">
// Helper function to get parameters from the query string.
function getUrlParam(paramName) {
    var reParam = new RegExp('(?:[\?&]|&amp;)' + paramName + '=([^&]+)', 'i') ;
    var match = window.location.search.match(reParam) ;

    return (match && match.length > 1) ? match[1] : '' ;
}

$().ready(function() {
    var funcNum = getUrlParam('CKEditorFuncNum');

    var elf = $('#elfinder').elfinder({
        url : 'php/connector.php',
        getFileCallback : function(file) {
            window.opener.CKEDITOR.tools.callFunction(funcNum, file);
            window.close();
        },
        resizable: false
    }).elfinder('instance');
});</script> 
```

教程不是那么明显，但工作正常..

# javascript - 将多个 Backbone View $el 合并到一个 jQuery 对象中

> ID：12985677
> 
> 赞同：1
> 
> 时间：2012-10-20T05:52:22.267
> 
> 标签：javascript, jquery, html, dom, backbone.js

我希望它出现在 DOM 中：

```
<body>
  <ul>
    <li>This is 1</li>
    <li>This is 2</li>
    <li>This is 3</li>
    <li>This is 4</li>
  </ul>
</body> 
```

`ul`是**parentView**并且`li`是**subView**。这就是我希望它的工作方式：

1.  **parentView**将以简单的 for() 循环为例进行初始化和创建**子视图。**

2.  我不想在 addSub 中渲染每个**subView****创建**，所以我只返回**subView**的jQuery 对象。**`$el`**

*****   **parentView**将保存这些`$el`并将它们合并到单个 jQuery 对象中，例如`$new`. 我为此使用 jQuery 函数`.add()`。

    *   然后，一旦循环完成，将 渲染`$new`到 DOM。所以一切都必须发生在 DOM 之外。**** 

 ****现在我的代码不起作用。它没有显示任何东西。我做错了什么？

[http://jsfiddle.net/nTTbH/](http://jsfiddle.net/nTTbH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T08:20:53.290

这里有几件事是不正确的。在您的 ParentView 中，您的代码：

```
 for (i=1;i<=4;i++) {
        $new.add(this.addSub(i));
    }

    this.$el.html($new.html()); 
```

`$new.add(this.addSub(i))`由于 .add() 工作方式的性质，未保存。您需要将此行更改为类似`$new = $new.add(this.addSub(i))`; 让它工作。

我建议完全避免使用这种方法，并看看使用 .append 在每次迭代中将你的 li 添加到你的 ul 中。

例如`this.$el.append(this.addSub(i))`或`this.$el.append(this.addSub(i).render().el)`

同样，您对 .add() 的使用会导致您的 .add() `$el.html($new.html())`，但这是不必要的，因为 $new 本身将是您的 4 li 元素，因此您只需调用 $new 本身`this.$el.html($new);`

最后，你需要在你的父视图中设置你的“根”元素，删除`tagName: ul`它应该是`el: ul`因为它需要一些东西来设置你的子视图

这是您在此处工作的代码的更新 jsfiddle：http: [//jsfiddle.net/SQFwg/](http://jsfiddle.net/SQFwg/)

如果您从中拿走任何东西，那就不要使用 .add() 而是使用 .append() ！****

# java - 一旦将两个值相除，就会出现异常

> ID：12985678
> 
> 赞同：0
> 
> 时间：2012-10-20T05:52:25.210
> 
> 标签：java, numberformatexception

我正在从数据库中检索两个值，需要将它们分开，但它在第 1 行和第 2 行给了我空指针异常

```
1    int value1 = Integer.parseInt(rs.getString("value1"));
2    int value2 = Integer.parseInt(rs.getString("value2"));
3    double result = (double)value1/value2;

Error 

 java.lang.NumberFormatException: null
at java.lang.Integer.parseInt(Integer.java:417)
at java.lang.Integer.parseInt(Integer.java:499) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:55:01.990

那是因为，您`null`从数据库中获取了一个无法传递给`Integer.parseInt()`.

如果`res.getString("value1");`, 或`res.getString("value2")`is之一`null`，您将获得异常。

更好的方法是将该转换包装在`try-catch`块周围，并在`catch`块中打印 ; 的值`res.getString("value1")`。检查返回的实际值。

**编辑**： -

当然，您也可以先打印返回的值，然后再将其转换`integer`为是否存在`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:05:43.890

你可以做...

```
double result = 0;

String value1 = rs.getString("value1");
String value2 = rs.getString("value2");
if (value1 != null && value2 != null) {
    try {
        result = (double)(Integer.parseInt(value1) / (double)Integer.parseInt(value2))
    } catch (NumberFormatException exp) {
      // Handle or re-throw exception...
    }
}
return result; 
```

或者，如果列值实际上是数字......

```
double result = 0;

int value1 = rs.getInt("value1");
int value2 = rs.getInt("value2");

if (result2 > 0) {
    result = (double)value1 / (double)value2;
}
return result; 
```

或者，这可能更简单

```
double result = 0;

int value1 = rs.getDouble("value1");
int value2 = rs.getDouble("value2");

if (result2 > 0) {
    result = value1 / value2;
}
return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T05:55:06.050

```
int value1 = Integer.parseInt(rs.getString("value1"));
int value2 = Integer.parseInt(rs.getString("value2")); 
```

这一行必须给出 null 这就是为什么它给出空指针异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T05:55:13.073

您只能解析字符串形式的整数值。例如：

```
 int i = Integer.parseInt("20");
 int j = Integer.parseInt("NaN"); // throws NumberFormatException 
```

此外，您应该检查值`null`以避免`NPE`：

```
int v1=0, v2=0;
String value1 = rs.getString("value1");
if(value1  != null) {
    v1 = Integer.parseInt(value1);
}
String value2 = rs.getString("value2");
if(value1  != null) {
    v2 = Integer.parseInt(value2);
} 
```

# c# - 为什么在覆盖的 Object.Equals 方法中抛出 NullReferenceException？

> ID：12985679
> 
> 赞同：4
> 
> 时间：2012-10-20T05:52:26.073
> 
> 标签：c#, .net, clr

我刚刚在 dotPeek，String.cs 中找到它：

```
[ReliabilityContract(Consistency.WillNotCorruptState, Cer.MayFail)]
[__DynamicallyInvokable]
public override bool Equals(object obj)
{
  if (this == null)
    throw new NullReferenceException();
  string strB = obj as string;
  if (strB == null)
    return false;
  if (object.ReferenceEquals((object) this, obj))
    return true;
  if (this.Length != strB.Length)
    return false;
  else
    return string.EqualsHelper(this, strB);
} 
```

如果 this == null，则在第二行抛出 NullReferenceException。那么如何调用空对象的方法呢？

**MSDN 说：** 请注意，应用程序抛出 ArgumentNullException 异常，而不是这里讨论的 NullReferenceException 异常。

以下 Microsoft 中间语言 (MSIL) 指令引发 NullReferenceException：

```
callvirt
cpblk
cpobj
initblk
ldelem.<type>
ldelema
ldfld
ldflda
ldind.<type>
ldlen
stelem.<type>
stfld
stind.<type>
throw
unbox 
```

如果我明白了，在进入方法体*之前会抛出异常。*正确的？那么需要从方法中抛出 NullReferenceException 吗？是否`__DynamicallyInvokableAttribute`强制方法被称为绕过任何检查？或者是其他东西？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T06:06:45.630

C# 确实使用 callvirt 在输入空对象之前获得 NullReferenceException 的地方。但是由于 BCL 是为过多的语言而设计的，因此它们确实在使用 call 指令的某些中心部分（例如字符串）中防止了空对象。

托管 C++ 是 call 指令最值得注意的用户。

这样做是为了帮助调试（据我所知），但它在整个 BCL 中根本不一致。

# java - 使用 hdmi 同时显示不同布局的 Android 应用

> ID：12985680
> 
> 赞同：4
> 
> 时间：2012-10-20T05:52:30.497
> 
> 标签：java, android, xml, layout, hdmi

我想创建一个应用程序，它将在手机上显示不同的布局，并在与 HDMI 连接的显示器上显示不同的布局。第一个布局将仅显示控件，HDMI 连接显示器上的一些信息和布局将显示照片或视频之类的内容，或者可能是带有用户定义文本的照片。我希望这个应用程序在没有 root 的情况下工作。我知道这是可能的，因为 mxplayer 对我想要的东西很熟悉。

当手机上连接 HDMI 时，它会自动将视频适配到我的电视上，并且控件仅在手机上可见。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:47:20.403

Android SDK 中没有任何内容。一些设备制造商可能会为其特定硬件提供此选项——例如，我似乎记得 HTC 为此提供了一些东西。

# image - 在 OS X 上在整个屏幕上显示图像

> ID：12985682
> 
> 赞同：1
> 
> 时间：2012-10-20T05:52:54.793
> 
> 标签：image, macos, screenshot, osx-mountain-lion

有没有办法在 OS X 的整个屏幕上显示图像？

目标是通过截取屏幕截图并将其覆盖在屏幕上来“冻结”屏幕。请注意，全屏模式不适用于此；新图像必须在没有任何动画的情况下替换旧图像，以使其看起来好像屏幕被冻结了。

# android - 当我将 targetVersion 设置为 4.0 时的 UI 失真

> ID：12985683
> 
> 赞同：0
> 
> 时间：2012-10-20T05:53:07.180
> 
> 标签：android

我已经使用 10 作为 minSdkVersion 实现了应用程序，因此根据链接：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html#target](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#target)。所以 2.3.3 默认会变成 targetSdkVersion。

此应用程序在具有 build 10 和 4.0 版本的设备上运行良好。现在，当我将 minSdkVersion 更改为 14 时，我的 UI 被扭曲了。在这个阶段，我的 minSdkVersion 和 targetSdkVersion 将是 14。

现在，当我将 targetVersion 更改为 10 （这是我之前的版本）并将 minSdkVersion 更改为 14 时，它正在工作。

预期结果：如果我将目标和最低 sdk 版本从 10 升级到 14，它应该可以正常工作。另外请指定在这 2 个版本之间迁移所需的任何其他步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:51:25.023

`targetSdkVersion`如果您`minSdkVersion`是 14 ，则不应将您的设置为 10。**`targetSdkVersion >= minSdkVersion`总是**。

`minSdkVersion`是您支持的**最低版本**。如果您的应用程序可在 2.3.3 及更高版本的所有设备上运行，请将您的设置`minSdkVersion`为 10 并将其保留在那里。

`targetSdkVersion`是您支持的**测试版本**。如果您使用 4.1.2 中的功能，但在您的应用程序中不需要，`targetSdkVersion`则应为 16。

实际上，它应该是这样的：

1.  找到支持最少功能的 API 来运行您的应用程序。这是最低版本。（我发现这通常在 4 到 8 之间。）
2.  然后，找到可以测试和使用功能的最高 API。这是您的目标版本。（这几乎总是最新版本，目前是 16。）

[这些在您链接的文档](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)中得到了非常清楚的解释。

# javascript - Javascript不使用django呈现

> ID：12985684
> 
> 赞同：0
> 
> 时间：2012-10-20T05:53:09.403
> 
> 标签：javascript, django

我在模板中有以下代码，使用 javascript 事件日历：

```
<script type="text/javascript" src="calendar.js"></script>
<script type="text/javascript">
    var myCalendar = new JEC('myCalendar'); 
    myCalendar.showCalendar();
</script> 
```

我正在使用 django 创建网站。当我打开浏览器的 html 文档时，日历会显示，但是当我使用实际站点时，日历不会呈现，即使模板中包含的所有其他内容（此处未显示）都可以正常显示。我在这里缺少什么吗？我是否需要将 myCalendar 对象返回到视图才能正确呈现？我已经搜索了很多解决方案，但我找不到任何东西。一些文件指出我正确的方向也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:36:55.410

问题可能出在第一行。查看如何在 Django中[管理静态内容。](https://docs.djangoproject.com/en/dev/howto/static-files/)第一行应该看起来更像：

```
<script type="text/javascript" src="{{ STATIC_URL }}calendar.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:46:02.263

向用户提供静态内容。您需要遵循所有这些步骤：-

1）检查settings.py static_dir 是指包含您的静态文件的目录 2）静态文件夹具有读取权限 3）从视图代码中您需要传递 content_instance 4）附加 {{STATIC_URL}} 到路径引用js文件

# php - 如何在 drupal 7 中实现 hook_theme？

> ID：12985689
> 
> 赞同：11
> 
> 时间：2012-10-20T05:53:42.687
> 
> 标签：php, drupal, drupal-7, drupal-theming

我创建了一个新的 drupal 7 主题并尝试在 template.php 中实现 hook_theme，如下所示：

```
function mytheme_theme($existing, $type, $theme, $path){
    return array(
        'mytheme_header'=>array(
            'template'=>'header',
            'path'=>$path.'/templates',
            'type'=>'theme',
        ),
    );
} 
```

然后我将 header.tpl.php 放入模板目录并清除所有缓存，并调用主题函数：

```
theme('mytheme_header', $vars); 
```

和 header.tpl.php 喜欢这样：

```
<?php
fb('calling header template');//the function of FirePHP to output debug info
print '<div>Header</div>';
//... 
```

我检查了 Firebug，它得到了“调用标头模板”的信息，这意味着它调用了 header.tpl.php，但它没有打印 html 代码。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-20T10:58:31.537

尝试将`variables`数组添加到`hook_theme`

```
function mytheme_theme($existing, $type, $theme, $path){
    return array(
        'mytheme_header' => array(
            'template' => 'header',
            'path' => $path . '/templates',
            'type' => 'theme',
            'variables' => array(
                'title' => NULL,
                'some_text' => NULL,
            ),
        ),
    );
} 
```

在您的`header.tpl.php`文件中：

```
<h1><?php print $title; ?></h1>
<p><?php print $some_text; ?></p> 
```

然后，像这样打印出来：

```
$vars = array();
$vars['title'] = "This is a title";
$vars['some_text'] = "Some text...";
print theme('mytheme_header', $vars); 
```

# wordpress - 如何在 Wordpress 中创建自定义用户角色

> ID：12985692
> 
> 赞同：14
> 
> 时间：2012-10-20T05:54:15.723
> 
> 标签：wordpress

我必须在 WordPress 中为用户创建审阅者（自定义）角色，如何创建自定义规则？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-20T15:59:11.500

您可以使用[添加角色](http://codex.wordpress.org/Function_Reference/add_role)功能，例如

```
<?php add_role( $role, $display_name, $capabilities ); ?> 
```

例子

```
add_role('basic_contributor', 'Basic Contributor', array(
    'read' => true, // True allows that capability
    'edit_posts' => true,
    'delete_posts' => false, // Use false to explicitly deny
)); 
```

[~~如果您不想编写任何代码，~~](http://www.im-web-gefunden.de/wordpress-plugins/role-manager/)也[请参阅本教程（讨论自定义规则）](http://camwebdesign.com/techniques/wordpress-create-custom-roles-and-capabilities/)和此插件。[](http://www.im-web-gefunden.de/wordpress-plugins/role-manager/)

 ~~* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T12:40:52.380

如果您不想编写大量代码，但想使用插件，那么我强烈推荐 Justin Tadlock 的 Members 插件：[https ://wordpress.org/extend/plugins/members/](https://wordpress.org/extend/plugins/members/)

它应该很容易提供您想要的功能。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T08:44:39.667

最好使用插件，这样您也可以为特定用户添加/编辑功能。有 2 个不错的插件可用

[用户角色编辑器](http://wordpress.org/plugins/user-role-editor)

和

[能力管理器增强](http://wordpress.org/plugins/capability-manager-enhanced)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-09T13:16:12.577

您可以删除 WordPress 默认用户角色并创建自己的角色。

从您的 WordPress 管理面板。导航：

> 外观 > 编辑器 >（选择您的主题）> 主题功能

```
add_role('newbie', __(
 'Newbie'),
 array(
 'read' => true, // Allows user to read
 'create_posts' => true, // Allows user to create new posts
 'edit_posts' => true, // Allows user to edit their own posts
 )
); 
```

[资源](http://www.cloudways.com/blog/add-custom-user-roles-in-wordpress/)~~

# azure-storage-emulator - windows azure storage emulator 进程无法访问文件

> ID：12985696
> 
> 赞同：5
> 
> 时间：2012-10-20T05:54:38.240
> 
> 标签：azure-storage-emulator

当我们开始手动或通过 Visual Studio 启动 Azure Storage Emulator 时，这是我们工作组中的一个常见错误。此外，这个问题并不一致。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T05:54:38.240

Bit-Torrent 占用了模拟器端口 (10,000)。当我们不运行 bit-torrent 时，它曾经可以正常启动。我还没有找到通过在不同端口上运行来解决冲突的方法。当我发现时，我会更新答案。

# wordpress-theming - is_front_page 在 WordPress 上无法正常工作

> ID：12985699
> 
> 赞同：0
> 
> 时间：2012-10-20T05:54:48.130
> 
> 标签：wordpress-theming, wordpress

我正在做一个 wordpress 项目。我的标题和侧边栏中的内容很少，我只想在网站的主页上显示。我有一个自定义的 front-page.php 作为首页模板，我在其中使用自定义 wp_query 列出了两个类别的帖子。

我尝试使用`is_front_page`条件标签放置我的条件内容，但它似乎不起作用，不知道为什么它不起作用？

之前，使用front-page.php 放置一个自定义的首页模板，它工作得很好，但是在我实现了首页模板之后它就停止了工作。

任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:32:46.453

您可能想检查一下您`Settings -> Reading : "Front Page Displays"`的设置是什么？

如果您尝试将条件放在`sidebar.php`or 中，`header.php`它应该可以正常工作。

这可能有助于澄清：[https ://wordpress.org/support/topic/if-is_front_page-not-working#post-1290807](https://wordpress.org/support/topic/if-is_front_page-not-working#post-1290807)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T12:55:43.553

问题在于使用 query_posts。我们改变了那部分，它又开始工作了。

实际上，根据 wp codex，query_posts 重写了原始查询，并导致条件标签中断。

# java - 有人可以查看我的二次方程代码（在java中）吗？

> ID：12985703
> 
> 赞同：1
> 
> 时间：2012-10-20T05:55:08.573
> 
> 标签：java, quadratic

有人可以查看我的二次方程代码吗？root2 总是出错（“root1 的原始类型 double 没有字段 roo​​t2）。我只需要打印出两个根。谢谢。

* * *

```
public class QuadraticEqn {
public static void main(String[] args) {
    System.out.print(quadratic(-7, 4, 3));
}
    public static double quadratic(int a, int b, int c){
        double discriminant = (b*b)-4*a*c;
        double root1 = -1*b + Math.sqrt(discriminant);
        double root2 = -1*b - Math.sqrt(discriminant);
        return (root1, root2);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T06:04:59.263

你仍然需要除以`2a`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T06:00:40.573

Java 不能返回这样的元组，可能最容易返回数组，因为它们是相同的类型。

```
public static double[] quadratic(int a, int b, int c){
        double discriminant = (b*b)-4*a*c;
        double root1 = -1*b + Math.sqrt(discriminant);
        double root2 = -1*b - Math.sqrt(discriminant);
        double[] array = {root1, root2};
        return array;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T06:00:48.880

以这种方式返回两个双精度值是不可能的。尝试返回一个双重值数组。

```
 public class QuadraticEqn {
        public static void main(String[] args) {
            double[] root = quadratic(-7, 4, 3);
            System.out.print(root[0] + " " + root[1]);
        }

        public static double[] quadratic(int a, int b, int c) {
            double discriminant = (b * b) - 4 * a * c;
            double[] root = new double[2];
            root[0] = -1 * b + Math.sqrt(discriminant);
            root[1] = -1 * b - Math.sqrt(discriminant);
            return root;
        }
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-28T04:29:33.173

不知道你想完成什么，我用javascript做了一个类似的程序，代码如下，它真的很简单。顺便说一句，二次方程是 -b±√D/2a ，我不认为你把它完全放进去。这是我写的代码：另外，我认为问题出在你已经返回的部分：(root1,root2) ，将其放入一个数组或只执行 2 个返回命令。即return（root1）return（root2）不确定你是否有2个返回ins一个函数，不是java程序员，对不起，但我试过了：D

```
else if(choice == 2){//quadratic start
     alert("the equation is of the form : ax^2 + bx + c == 0 , only input the coefficients i.e - the value of ax^2 is a, or the value of bx is b, not bx. The value of b for the equation 5x^2 + 7x +3 is 7, not 7x");
     var a = prompt("Put in the value of a");//declaring variables
     var b = prompt("Put in the value of b, if the bx part of the equation doesn't exist, input 0\. Ex for equation 2x^+6==0 , b ==0, since its technically 2x^2 + 0b + 6 == 0");
     var c = prompt("Put in the value of c, if the c part of the equation doesn't exist, input 0\. Ex for equation 2x^+6x==0 , c ==0, since its technically 2x^2 + 6b + 0 == 0");
     var D = ((b*b)-(4*a*c));//computing discriminant
     if(D < 0){
     alert("The quadratic equation doesn't have real roots; the closest value is : " + (-b/2) +" + i/2");
     }
     else{
     root1 = (- b + Math.sqrt(D))/(2*a);
     root2 = (- b - Math.sqrt(D))/(2*a);
     }
     if(D===0){
     console.log("Both roots are equal, their value is " + root1);
     alert("Both roots are equal, their value is " + root1);
     }
     else if ( D > 0){
     console.log("The roots of the equation are: " + root1 + " and " + root2);
     alert("The roots of the equation are: " + root1 + " and " + root2 );
     }
     }//quadratic end 
```

这是完整的程序：

```
<!DOCTYPE html>
<head>
 <script type="text/javascript" src ="code.js"></script>
 <script type="text/javascript">
 var main = function(){//Linear in 2 start
 var choice = prompt("Choose your type of equation : Type 1 for linear in 2 variables, 2 for quadratic in one variable ");
 if(choice ==1){
 alert("The two equations are of the forms a1x + b1y + c1 = 0 and a2x + b2y + c2 = 0 respectively")
 var a1 = prompt("Enter value of a (a1) for equation 1");
 var b1 = prompt("Enter value of b (b1) for equation 1");
 var c1 = prompt("Enter value of c (c1) for equation 1");
 var a2 = prompt("Enter value of a (a2) for equation 2");
 var b2 = prompt("Enter value of b (b2) for equation 2");
 var c2 = prompt("Enter value of c (c2) for equation 2");
 if(a1/a2===b1/b2===c1/c2){
 alert("No solution is possible for the equation, i.e. the lines are parallel")
 }
 else if(a1/a2===b1/b2 && b1/b2!=c1/c2){
 alert("The lines are collinear and the values of x and y are infinite")
 }
 else{
 var ansy = (c2*a1-c1*a2)/(b1*a2-b2*a1);
 var ansx = (c1-b1*ansy/a1);
 alert("x is equal to : " + ansx);
 alert("y is equal to : " + ansy);
 }
 }
 else if(choice == 2){//quadratic start
 alert("the equation is of the form : ax^2 + bx + c == 0 , only input the coefficients i.e - the value of ax^2 is a, or the value of bx is b, not bx. The value of b for the equation 5x^2 + 7x +3 is 7, not 7x");
 var a = prompt("Put in the value of a");//declaring variables
 var b = prompt("Put in the value of b, if the bx part of the equation doesn't exist, input 0\. Ex for equation 2x^+6==0 , b ==0, since its technically 2x^2 + 0b + 6 == 0");
 var c = prompt("Put in the value of c, if the c part of the equation doesn't exist, input 0\. Ex for equation 2x^+6x==0 , c ==0, since its technically 2x^2 + 6b + 0 == 0");
 var D = ((b*b)-(4*a*c));//computing discriminant
 if(D < 0){
 alert("The quadratic equation doesn't have real roots; the closest value is : " + (-b/2) +" + i/2");
 }
 else{
 root1 = (- b + Math.sqrt(D))/(2*a);
 root2 = (- b - Math.sqrt(D))/(2*a);
 }
 if(D===0){
 console.log("Both roots are equal, their value is " + root1);
 alert("Both roots are equal, their value is " + root1);
 }
 else if ( D > 0){
 console.log("The roots of the equation are: " + root1 + " and " + root2);
 alert("The roots of the equation are: " + root1 + " and " + root2 );
 }
 }//quadratic end
}
var again = confirm("Proceed to equation selection menu?");
if(again === true){
 main();
}
 </script>
 <title>Equation Solver</title>
</head>
<body>
</body>
</html> 
```

# python-3.x - 基本 Python 3 问题的语法错误

> ID：12985705
> 
> 赞同：-1
> 
> 时间：2012-10-20T05:55:31.530
> 
> 标签：python-3.x

> **可能重复：**
> [使用 Python 3 打印时出现语法错误](https://stackoverflow.com/questions/826948/syntax-error-on-print-with-python-3)

我知道 Python 应该是解释语言之神……它的简单性，没有冗余，等等等等。但由于我太习惯于 C、C++、Java、Javascript 和 Php，我必须承认这很烦人。这是我的代码：

```
#!/usr/bin/python3.1
def shit(texture, weight):
    if textura is "green":
        texturaTxt = "Shit is green"
    elif textura is "blue":
        texturaTxt = "Shit is blue"
    elif textura is "purple":
        texturaTxt = "Shit is purple"
    else:
        print "Incorrect color"
        break
    if weight < 20:
        pesoTxt = " and weights so few"
    elif weight >= 20 and peso <=50:
        pesoTxt = " and weights mid"
    elif weight > 50:
        pesoTxt = " and weights a damn lot"
    else:
        print "Incorrect weight"
    return texturaTxt + pesoTxt

c = input("Introduce crappy color: ")
e = input("Introduce stupid weight: ")
r = shit(c, w)
print r 
```

我正在尝试学习 Python，而我想要实现的是：

```
...
function shit(texture, weight) {
    string textureTxt = "Shit is ", pesoTxt = " and weights ";
    switch(texture) {
        case "green": textureTxt .= "green as an applee"; break;
        case "blue": textureTxt .= "blue as the sky"; break;
        case "purple": textureTxt .= "purple as Barny"; break;
        default: cout<<"Incorrect texture, try again later" <<endl; exit;
    }
    //etc
}
string color = "";
int weight = 0;
cout<<"Introduce color: ";
cin>>color;
//etc 
cout<<shit(color, weight);
... 
```

但我放弃了，我不能让它工作，它会引发我的各种错误。希望那里有一些 C++ 或 php 或 C 到 python 的转换器。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:30:30.023

Python3 不再支持 print 作为一种特殊形式，其参数跟在 print 关键字后面（如`print x`Python 2.x 中一样）。相反`print`，现在是一个函数，需要一个参数列表，例如 in: `print(x)`。[请参阅http://docs.python.org/release/3.0.1/whatsnew/3.0.html](http://docs.python.org/release/3.0.1/whatsnew/3.0.html)中的“打印是一个函数”

此外，该`break`语句不能出现在循环之外。除C`switch`语句外，`if`不支持break。由于 if 语句没有贯穿逻辑，因此不需要它。为了停止执行函数并返回给调用者，请使用`return`.

代替`is`运算符，使用相等运算符`==`。`is`测试对象是否相同，这是比相等更严格的测试。更多细节可以在[这里](http://docs.python.org/reference/datamodel.html#object.__hash__)找到。

此外，您将重量作为字符串。您可能希望使用函数将字符串转换为整数，以便与其他整数值进行比较`int(weight)`。

还有一些其他的小错误：

*   `e`当您尝试`w`在函数调用中使用未定义的变量名称时，您正在为权重分配用户输入
*   函数中的第一个参数被调用`texture`，但您`textura`在函数体中使用。
*   您正在使用`peso`而不是`weight`在一个实例中

这是一个（不那么冒犯性的）重写，消除了这些错误：

```
def stuff(color, weight):

    color_txt = "Your stuff is "
    if color == "green":
        color_txt += "green as an apple"
    elif color == "blue":
        color_txt += "blue as the sky"
    elif color == "purple":
        color_txt += "purple as an eggplant"
    else:
        print("Invalid color!")
        return

    w = 0
    # converting a string to an integer might
    # throw an exception if the input is invalid
    try:
        w = int(weight)
    except ValueError:
        print("Invalid weight!")
        return

    weight_txt = ""
    if w<20:
        weight_txt = " and weighs so few"
    elif 20 <= w <= 50:
        weight_txt = " and weighs mid"
    elif w > 50:
        weight_txt = " and weighs a lot"
    else:
        print("Invalid weight!")

    return color_txt + weight_txt

c = input("Input color: ")
w = input("Input weight: ")
r = stuff(c, w)
print(r) 
```

# html - 绘制应用 Html5 并发送电子邮件

> ID：12985707
> 
> 赞同：0
> 
> 时间：2012-10-20T05:55:44.097
> 
> 标签：html

我发现了这段很棒的代码： http: [//www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/#demo-simple](http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/#demo-simple)

现在，我想在后台通过电子邮件发送画布。所以应该有一个“发送此画布”按钮并发送到我的电子邮件地址。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:57:16.743

对的，这是可能的。

使用`toDataURL()`画布的方法。例如，请参见[此处](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement#Methods)...要将其作为电子邮件发送，您需要将生成的字符串发送到服务器，该服务器将其发送到您想要的任何地方。

# android - 如何在两个位置之间绘制最短路径

> ID：12985708
> 
> 赞同：1
> 
> 时间：2012-10-20T05:55:56.130
> 
> 标签：android, google-maps

**如何在我的代码中显示最短路径，就像在图片中一样？** ![在此处输入图像描述](../Images/2fa016c6e9e09f6143e393c8a38b2831.png)

我正在使用此代码来查找两点之间的最短距离。

```
Location locationA = new Location("point A");

locationA.setLatitude(lat);
locationA.setLongitude(long);

Location locationB = new Location("point B");

locationB.setLatitude(lat);
locationB.setLongitude(long);

distance = locationA.distanceTo(locationB); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:21:34.403

您计算的距离`Location`本质上是“乌鸦飞”。这是从 A 到 B 在空中旅行所需的距离。在您注意到的图片中，您似乎想要从 A 到 B 的较短*驾驶*距离，在这种情况下，您想要使用道路、州际公路等进行导航。 [这篇](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations)文章是类似的；它解决了获得行车路线的可能性。

# css - 在 RoR 资产预编译问题中处理我的 CSS

> ID：12985714
> 
> 赞同：0
> 
> 时间：2012-10-20T05:56:40.070
> 
> 标签：css, ruby-on-rails

我正在使用 RoR、devise、bootstrap 并且我必须在每次修改我的 css 以查看它们时获取资产：预编译。有解决方法吗？因为我无法通过守护进程从我的命令中分离，所以非常耗时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:32:55.910

删除`public/assets`. 这将导致 sprocket 在开发模式下的每个页面视图上重建您的资产。不要在生产模式下开发。

# objective-c - Objective-C，不允许将 NSString 与 NSArray 中的计算和数字混合？

> ID：12985715
> 
> 赞同：1
> 
> 时间：2012-10-20T05:56:41.043
> 
> 标签：objective-c, nsarray

我有两个数组 winDscr 和 winSize。winDscr 保存描述，而 winSize 应该保存请求的窗口边界的值。见下文。

到目前为止，winDscr 还可以。然而，winSize 在包含“{2560,4*2560/5}”的 2\. 行显示错误（预期表达式）。我以前没有这样做过，根本不允许混合 NSString 和计算吗？我究竟做错了什么？

任何线索都会非常有帮助，蒂亚，罗纳德。

```
NSArray *winDscr = [NSArray arrayWithObjects:
                   @"Auto",
                   @"2560-> 5:4",
                   @"2560->16:10",
                   @"2048-> 4:3",
                   @"1920-> 4:3",
                   @"1920->16:10",
                   @"A2 Portrait",
                   @"A2 Landscape",
                   @"A3 Portrait",
                   @"A3 Landscape",
                   nil];

NSArray *winSize = [NSArray arrayWithObjects:
                   @"Auto",
                   {2560,4*2560/5},
                   {2560,10*1920/16},
                   {2048,3*2048/4},
                   {1920,3*1920/4},
                   {1920,10*1920/16},
                   {[convertMMToPixel:420],[convertMMToPixel:594]},
                   {[convertMMToPixel:594],[convertMMToPixel:420]},
                   {[convertMMToPixel:297],[convertMMToPixel:420]},
                   {[convertMMToPixel:420],[convertMMToPixel:297]},
                   nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:16:11.177

你有两个问题。

首先，`{2560,4*2560/5}`它本身不是一个有效的表达式。您可以通过编写使其成为文字`NSSize`表达式`(NSSize){2560,4*2560/5}`。您也可以编写`NSMakeSize(2560, 4*2560/5)`，它使用库函数。

其次，an`NSArray`只能保存 Objective-C 对象，而 a`NSSize`不是 Objective-C 对象。您可以将包装器包装起来并将包装器存储在数组中`NSSize`：`NSValue`

```
NSArray *winSize = [NSArray arrayWithObjects:
                   @"Auto",
                   [NSValue valueWithSize:(NSSize){2560,4*2560/5}],
                   [NSValue valueWithSize:(NSSize){2560,10*1920/16}],
                   ... 
```

要提取大小：

```
NSValue *wrapper = winSize[2];
NSSize size = [wrapper sizeValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:18:50.327

`{2560,4*2560/5}`是具有两个成员的 C 结构，而不是 Objective-C 对象。NSArrays 只能保存对象。`valueWithCGSize:`在尝试将这些值添加到数组之前，您需要将这些值保存在持有 CGSize ( ) 的 NSValue 中。

例子：

```
...arrayWithObjects:
    @"Auto",
    [NSValue valueWithCGSize:CGSizeMake(2560,4*2560/5)],
    ... 
```

# opencv - 使用 OpenCV 将点从一个图像平面转换到另一个平面

> ID：12985718
> 
> 赞同：1
> 
> 时间：2012-10-20T05:56:50.967
> 
> 标签：opencv

我正在尝试校准相机，以便可以在相机图像上获取任意点并将其转换为另一个 2D 平面（房间的地板），这样我就可以准确地确定物体在地板上的相对位置地板上的其他点。

到目前为止，我已经研究了几种使用 OpenCV 的不同方法，但我不清楚哪种方法是最好的。

1.  计算基本矩阵，关联两个平面上的点。这种方法看起来很简单，但是一旦我有了基本矩阵，我不确定如何对一个点进行转换。
2.  使用单应变换。似乎也有可能以不同的视角关联两个平面上的点
3.  计算透视变换
4.  查找外部相机参数（似乎这种方法可能需要比我可用的更多信息）

这里的正确方法是什么？这似乎是一个很常见的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:01:30.560

使用单应变换，如果您提供 4 个间隔良好的点，则 findHomography 生成的变换将非常适合您的需要。然后，您可以使用 perspectiveTransform 应用转换。

# java - 保留值 Java

> ID：12985722
> 
> 赞同：0
> 
> 时间：2012-10-20T05:57:48.047
> 
> 标签：java, oop

我是 Java 新手，无法保留 main 中的值。我使用蓝色 J 作为我的 IDE。

反正我有两节课。一个 Driver（带有 void []main）和一个名为 Deck 的类。程序第一次运行时，它运行没有问题，并按应有的方式设置卡组中的值。然后它返回主线程（驱动程序）并向用户提供菜单的数字值。他们按下键，我读入它并再次调用 Deck 以显示与以前完全相同的值，但是这次我的值（例如数组）是空的。即使我第一次使用我的设置器来设置值，它们也已初始化但为空。

我从主线程（驱动程序）传递同一个对象（甲板）。有谁知道为什么我第二次运行时值不存在，尽管使用了相同的对象并第一次设置了值？我会发布代码，但它组织得不好，我总结得很好。

这也是我可能不理解的关于保留值的 Java 原则吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T05:00:58.547

我不知道你的问题到底是什么。但是您可以尝试以下方法： 1) 您是否在构造函数中声明并初始化了变量？如果是这样，那么在构造函数之外声明你的变量，以便它们是你的类 Deck 的任何对象的“字段”。

2) 破坏您的代码并检查是否已在 Deck 类的对象中的变量中实际设置了这些值。如果字段显示 null 。那么它们一定没有被设置为这些值。
要设置它们，您可以使用构造函数或创建另一个 setValue() 方法来设置值。因此，您在 main() 中调用此方法并设置值。

但是，是的，如果您可以在问题中添加代码会更好。

# google-chrome-extension - Chrome 扩展程序的 background.html 中的 Google Analytics 跟踪

> ID：12985723
> 
> 赞同：16
> 
> 时间：2012-10-20T05:57:50.543
> 
> 标签：google-chrome-extension, google-analytics

当我意识到我无法直接在内容脚本中跟踪时。我开始使用后台 HTML 跟踪我的数据。通过[Google Analytics 的内容脚本跟踪](https://stackoverflow.com/questions/11372107/content-script-tracking-with-google-analytics/12985606#12985606)

当我设置我的后台脚本时，我发现它不支持内联脚本。所以我把代码放在一个 js 文件中，并使用“src=filename.js”来包含它。通过[chrome 扩展在浏览器操作上插入内容脚本](https://stackoverflow.com/questions/11545743/chrome-extension-insert-content-script-on-browser-action)

但最后有一个问题：我根本无法加载 ga.js，因为它仍然违反规则。这是我得到的：

> 拒绝加载脚本“ [https://ssl.google-analytics.com/ga.js](https://ssl.google-analytics.com/ga.js) ”，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

我的扩展结构：

1.  背景.html
2.  脚本.js
3.  跟踪器.js

* * *

有关此问题的更多信息：

**背景.html：**

```
<html>
<script src="tracker.js"></script>
<body></body>
</html> 
```

**tracker.js：（** *我隐藏了我的 ID）*

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', _gaID]);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script');
  ga.type = 'text/javascript';
  ga.async = true;
  ga.src = 'https://ssl.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s);
})(); 
```

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T07:05:22.257

这看起来不错的样子。你在正确的轨道上。您只需要更新 manifest.json 文件以允许从 google 域下载脚本。

假设您使用 manifest.json 文件和`manifest_version:2`. 您应该将此行添加到清单中

```
"content_security_policy": "script-src 'self' https://ssl.google-analytics.com; object-src 'self'", 
```

更多信息：

[https://developer.chrome.com/docs/extensions/mv2/tut_analytics/](https://developer.chrome.com/docs/extensions/mv2/tut_analytics/)

# php - SQL查询从最后一行增加1？

> ID：12985727
> 
> 赞同：4
> 
> 时间：2012-10-20T05:58:20.233
> 
> 标签：php, sql

因为您不能自动增加两列，所以查询将获取表的最后一行和列的 +1 值以插入新行。

例如我有一个名为`players`

看起来像这样：

```
id    player_id    player_name
 1      15           name1
 2      16           name2
 3      17           name3 
```

我正在尝试制作一个管理面板来从表单创建播放器，“id”列自动递增，但我也需要 player_id 递增，但 id 和 player_id 彼此不同。

与此类似的查询（我做了这个，以便您更好地理解）

```
$sql="select top 1 * from `players`  order by id desc";
$result =mysql_query($sql);
while ($data=mysql_fetch_assoc($result)){
    $playerid=$data['player_id'];
    Insert into `players` (`player_id`,`player_name`) VALUE ('$playerid' + '1', 'name4');

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T06:49:45.833

试试这个代码：

```
 $sql="SELECT player_id FROM `players` ORDER BY id DESC LIMIT 1";
    $result =mysql_query($sql);
    while ($data=mysql_fetch_assoc($result)){
        $playerid=$data['player_id']+1;
       }
mysql_query("Insert into `players` (`player_id`,`player_name`) VALUES ('".$playerid."','name4')"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T06:13:53.213

以下查询将`player_id`在插入时分配下一个可用的。

```
INSERT INTO `players` (`player_id`, `player_name`)
SELECT MAX(`player_id`)+1, 'name4'
FROM `players`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:07:24.607

试试这个方法

```
 $sql="SELECT * FROM `players` ORDER BY id DESC LIMIT 1";
    $result =mysql_query($sql);
    $data=mysql_fetch_assoc($result);
    $playerid=$data['player_id']+1;

mysql_query("Insert into `players` (`player_id`,`player_name`) VALUES ('".$playerid."','name4')"); 
```

# c++ - 在模板类中，如何处理未指定的基类对象数组？

> ID：12985735
> 
> 赞同：1
> 
> 时间：2012-10-20T05:59:14.280
> 
> 标签：c++, templates, polymorphism, containers

作为模板编程的新手，我迷失在我正在尝试构建的结构中。

```
class Base;

template <typename T>
class Foo : public Base {
protected:
    T mValue;
    std::vector<Base> mFooVector;   // the idea is to have Foo<T> elements
                                    // of several T types

public:
    T value() {
        return mValue;
    }

    void SetValueFromVector() {
        mValue = Transform( mFooVector );
        // to give you an idea of what awaits below
    }

    T Transform( std::vector<Base> ) {
        // Question deals with what I want to do here
    }

    /*...*/
}

class Base{
    // here, how to declare a virtual or template 'value()'
    // that could be instantiated or specialized within Foo?
    // Or should I declare a public 'mValue' of some type?
    // (see below)
}; 
```

在`Transform`我想从“mFooVector”的所有元素中调用 value()，这些元素可以排列成各种类型的关联。将有在别处定义的函数来处理所有可能的实际情况。但是仍然存在如何调用`value()`或访问`mValue`声明为类实例的对象的问题`Base`。

我昨天问了一个[问题](https://stackoverflow.com/questions/12967174/template-class-containing-a-stdvector-of-references-to-its-own-instances)，这只是我研究的开始——问题不再是容器，因为我使用了多态性，而是我需要`value()`在它包含的实例上调用函数。

**编辑：如果它可以帮助任何人，这是我最终按类定义的方式。**我接受了@PiotrNycz 的回答，因为它让我非常接近我的目标，但它并没有完全实现我所需要的。

```
class Base {
public:
   virtual void setValue( &int ) =0;
   virtual void setValue( &float ) =0;
   virtual void setValue( &double ) =0;
}

template <typename T>
class Foo : public Base {
protected:
    T mValue;
    std::vector<Base*> mFooVector;
    T Transform( std::vector<Base*> );
public:

    // this is for use from outside the class
    T value() {
       return mValue;
    }

    void SetValueFromVector() {
       mValue = Transform( mFooVector );
    }

    // the three below are only going to be used within 'Transform'
    void setValue( int& i ) { i = mValue; }
    void setValue( float& f ) { f = (float) mValue; }
    void setValue( double& d ) { d = (double) mValue; }
}

// specialization of Transform
template<>
int Foo<int>::Transform( std::vector<Base*> v )
{
    // here I only use setValue functions
    // if for example I know that first v element is 'float'
    float val;
    v[0]->setValue( val );

    return 3*int(val);
}
// and etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:50:47.023

我假设您知道所有可能的值类型，假设它们是`int/float/...`，那么您的基类必须准备好（通过纯虚拟方法）添加到任何值类型：

```
class Base {
public:
  virtual ~Base() {}
  virtual void addTo(int& value) = 0;
  virtual void addTo(long& value) = 0;
  virtual void addTo(float& value) = 0;
  virtual void addTo(double& value) = 0;
  // add as many functions as you need and of types you need in your design
  // these types not necessarily must be simple basic types
};

template <class Type> 
class Foo : public Base {
public:
    T Transform( std::vector<Base> ) {
        T retVal = T();
        // Question deals with what I want to do here
        for (auto it = mFooVector.begin(); it != mFooVector.end(); ++i)
          it->addTo(retVal);
        return retVal;
    }
  // and the base interface implementation 
  // (for other types implementation does not need to be some simple)
  virtual void addTo(int& value) { value += mValue; }
  virtual void addTo(long& value) { value += mValue; }
  virtual void addTo(float& value) { value += mValue; }
  virtual void addTo(double& value) { value += mValue; }

private:
  std::vector<std::shared_ptr<Base>> mFooVector;
  // you can here ^^^^^^^^^^^^^^^^^ use simple Base* pointer but must 
  // then define d-tor, copy c-tor and assignment operator
  T mValue;  
}; 
```

# javascript - ajax成功返回值在其他函数中的使用

> ID：12985737
> 
> 赞同：2
> 
> 时间：2012-10-20T05:59:26.570
> 
> 标签：javascript, jquery, ajax

在文件上传时，我希望 ajax 像这样点击 url：

```
$.ajax(
    { url: '<?php echo base_url();?>apk-reader/ApkInfo.php',
      data: {"apps": "../apps/apk_files/"+file, user_id: "<?php echo $this->session->userdata('user_id'); ?>"},
      type: 'get',
      success: function(output) { alert(output);} 
```

在这里，我想将输出存储在另一个变量中，并在另一个 ajax 加载的 OnComplete 中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:02:28.020

从成功调用其他函数并将结果传递给它， SomeFunction(output);

```
$.ajax({
      url: '<?php echo base_url();?>apk-reader/ApkInfo.php',
      data: {"apps": "../apps/apk_files/"+file, user_id: "<?php echo $this->session->userdata('user_id'); ?>"},
       type: 'get',
      success: function(output) { 
           alert(output);SomeFunction(output)
       }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:02:24.523

在全局范围内声明一个变量并将您的输出存储在该变量中。现在您可以在任何其他 ajax 方法的回调中访问全局变量，

```
var result1;
$.ajax( { url: 'apk-reader/ApkInfo.php', data: {"apps": "../apps/apk_files/"+file, user_id: "session->userdata('user_id'); ?>"}, type: 'get', success: function(output) { alert(output);
result1=output;
}
$.ajax( { url: 'apk-reader2/ApkInfo.php', data: {"apps": "../apps/apk_files/"+file, user_id: "session->userdata('user_id'); ?>"}, type: 'get', success: function(output2) { alert(output2);
alert(result1); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:13:38.553

您可以使用此代码：

```
$.ajax({
      url: 'your URL',
      data: {"your Parameter"},
       type: 'get',
      success: function(data) { 
           AjaxMethode(data)
       }
  });

function AjaxMethode(data){
    if(data.d){
        //someCode
    }
} 
```

# ruby-on-rails - Wysihat jQuery fork 无法将文本添加到 textarea

> ID：12985738
> 
> 赞同：0
> 
> 时间：2012-10-20T05:59:29.053
> 
> 标签：ruby-on-rails, wysihat

我使用[https://github.com/swilliams/jq-wysihat](https://github.com/swilliams/jq-wysihat) jQuery Wysihat fork。我跑去`rake`构建源代码，然后将其复制`dist/jq-wysihat.js`到`editor.css`我的 Rails 库中。它显示了 Wysihat 编辑器，我可以看到它`textarea`是隐藏的。

1.  正确地，每当我向 Wysihat 输入任何内容时，我都应该在隐藏中获得相同的文本`textarea`（使用 Firebug 看到）。这是我在 37signals Basecamp 项目中看到的正确实现。但是，我没有看到`textarea`我在编辑器中输入的任何内容。我做错了什么？

2.  在我的 Rails 应用程序的编辑模式下，如何将现有文本放入 Wysihat 编辑器框中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:19:17.697

改用这个叉子：[https ://github.com/mixonic/jq-wysihat](https://github.com/mixonic/jq-wysihat)

它似乎还有一些错误修复。我在 IE9 中运行它时遇到了一些问题，它似乎也解决了这些问题。

# python - wxPython 导入错误：DLL 加载失败

> ID：12985741
> 
> 赞同：0
> 
> 时间：2012-10-20T06:01:03.743
> 
> 标签：python, wxpython

在 Windows 7 32 位上安装 wxpython 2.8-unicode 和 Python 2.7。

在导入期间，出现以下导入错误：

> 追溯
> 
> ...\python27\site-packages\wx-2.8-msw-unicode\wx_core.py in <模块>()
> 
> 进口核心
> 
> 导入错误：DLL 加载失败：找不到指定的模块。

重新安装 Python 扩展没有帮助。

使用安装程序安装扩展程序后出现错误有点出乎意料。如果有人遇到同样的问题并解决了问题，我很高兴能得到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:28:24.873

[在 Windows XP 上安装 wxPython 后“import wx”失败](https://stackoverflow.com/questions/316325/import-wx-fails-after-installation-of-wxpython-on-windows-xp)有几个建议，例如安装 MSVC 2008 可再发行组件，或重新启动计算机。

编辑：我还发现这个链接很有帮助：[embedding wxPython in VisualStudio 2005 C/C++ failed](https://stackoverflow.com/questions/11207513/embedding-wxpython-in-visualstudio-2005-c-c-fails)

我遇到了同样的问题，我正在尝试找出 MSVC 2008 可再发行组件的正确版本，以及清单的放置位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T15:39:02.430

下面的代码对我有用，试试吧。

```
import wxversion
wxversion.select('3.0')
import wx 
```

# php - 使用下拉列表中的链接加载 iframe

> ID：12985742
> 
> 赞同：1
> 
> 时间：2012-10-20T06:02:01.343
> 
> 标签：php, html, iframe, drop-down-menu

我有基本的工作，我只需要正确的 src 从下拉列表中获取链接。到目前为止的代码：

```
<form name="dropdownMenu" method="post">
<select name="Select1" style="width: 128px">
    <option value="pages/page1.php">Page1</option>
    <option value="pages/page2.php">Page2</option>
</select>
<input name="Button1" type="button" value="GO"
onclick='document.getElementById("content").
src="THIS IS WHAT I CANT MAKE WORK";'> 
```

如果我将 src 更改为“pages/page1.php”，它会很好地加载 iframe，只是似乎无法让它从下拉列表中加载值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:37:12.573

给您的 SELECT 一个 id，然后引用 SELECT 的值

```
<form name="dropdownMenu" method="post">
<select id="Select1" name="Select1" style="width: 128px">
    <option value="pages/page1.php">Page1</option>
    <option value="pages/page2.php">Page2</option>
</select>
<input name="Button1" type="button" value="GO"
onclick='document.getElementById("content").
src=document.getElementById("Select1").value;'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T11:38:17.707

```
 <script type="text/javascript">
 function newSrc() {
  var e = document.getElementById("MySelectMenu");
  var newSrc = e.options[e.selectedIndex].value;
  document.getElementById("MyFrame").src=newSrc;
 }
</script>

<select id="MySelectMenu">
<option value="http://www.example.com">Website</option>
</select>

<button onClick="newSrc();">Load new source</button> 
```

# ios6 - 录音中断 iOS 6 错误

> ID：12985751
> 
> 赞同：8
> 
> 时间：2012-10-20T06:04:19.843
> 
> 标签：ios6, core-audio

Apple 的演示项目 aurioTouch2 演示了我在录制模式下处理音频中断时遇到的相同 iOS-6 问题。

场景非常具体。在录音模式下，拨打电话，然后接听（拒绝通话不会导致错误）。然后，挂断后，应用程序恢复焦点，无法继续录制。

错误消息是：AUIOClient_StartIO failed (2003329396) 此错误代码有助于翻译成单词“what”。

aurioTouch2 项目是 iOS-5 的更新，但不适用于 iOS-6。对我的应用程序来说似乎是一个相当严重的错误，因为该设备是“电话”。

我已经尝试了所有明智的变化，但没有运气。有人遇到同样的问题吗？非常感谢。

**编辑：**这是为我修复它的代码。该修复程序在评论中注明。不完全优雅，但我会在这一点上采取任何措施。

此方法在应用程序返回到活动状态*后*的某个时间点被调用。我让中断结束触发器设置了一个标志，然后当事情再次活跃时，我检查这个标志，然后在这里调用这个方法。

```
-(void) handleEndInterruption {
    // Reset audio session
    UInt32 category = kAudioSessionCategory_PlayAndRecord;
    AudioSessionSetProperty ( kAudioSessionProperty_AudioCategory, sizeof (category), &category );

    // Reactivate the current audio session
    AudioSessionSetActive(YES);

    // Do this, and fail with: AUIOClient_StartIO failed (2003329396)
    [self createAUProcessingGraph];
    [self initializeAndStartProcessingGraph];

    // Do it a second time and it works
    AudioSessionSetActive(NO);
    AudioSessionSetActive(YES);
    [self createAUProcessingGraph];
    [self initializeAndStartProcessingGraph];

    // Restore open al context
    alcMakeContextCurrent([AudioDispatcher sharedInstance].audioContext);

    // 'unpause' my context
    alcProcessContext([AudioDispatcher sharedInstance].audioContext);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:59:44.397

我遇到了同样的问题并找到了解决方案。

使用核心电话框架来检测来电，我通过关闭文件“不优雅地”停止录音，而不接触音频队列。然后，当应用程序恢复时，我将录制显示为暂停状态，然后用户可以恢复录制。与此同时，我重新启动了所有核心音频队列。

如果您使用 ARC ，请注意`callEventHandler`of 。`CTCallCenter`它未正确释放，因此请记住将其设置为`nil`.

# java - 允许在我的 java 网络服务器中浏览目录

> ID：12985752
> 
> 赞同：1
> 
> 时间：2012-10-20T06:04:33.750
> 
> 标签：java, http, directory, webserver

我正在使用 java 开发一个网络服务器，我想从浏览器中列出特定目录下的所有文件。我应该将哪个 http 响应代码发送到浏览器以及如何将文件列表发送到浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T07:51:00.910

您只想发送一个普通的 HTTP 200 代码，并返回一个列出目录中文件的 HTML 页面。如果您从例如 Apache 服务器中看到[类似的列表](http://i.imgur.com/jjxXD.png)，那么它只是生成 HTML 的服务器。HTTP 没有发送目录内容的内置方式。（不像 FTP 或 Gopher。）

您可以生成和返回的页面类型的简短示例：

```
<!DOCTYPE HTML>
<html>
    <head><title>/Users/Bob/myServerRoot/folder1/folder2/</title></head>
    <body>
        <h1>/Users/Bob/myServerRoot/folder1/folder2/</h1>
        <ul>
            <li><a href="..">..</a></li>
            <li><a href="folder2/myfile.txt">myfile.txt</a></li>
        </ul>
    </body>
</html> 
```

# c++ - 重载运算符之谜：返回 *this 还是临时变量？

> ID：12985758
> 
> 赞同：1
> 
> 时间：2012-10-20T06:05:28.437
> 
> 标签：c++

如果我重载 + 运算符，我可以使用它（假设类是 className）

```
 className operator+(className & c) { // version 1
    className T;
    ...
    return T;
} 
```

我也可以使用

```
className operator+(className & c) {   // version 2
    ....
    return *this;
} 
```

这是我的问题：

1.  在版本 2 中，我返回参考还是就这样？为什么？

2.  版本 1 和版本 2，哪个更好？

3.  我们经常写重载=，<<返回引用，使用链=/<<，但是为什么没有引用我们不能使用链=/<<，复制的真正含义是什么？

4.  另一个问题是，我在有效的 c++ 中看到：“尽可能使用 const”和“首选使用传递引用”，这是否意味着我编写类函数声明时尽可能使用 const 和引用？

如果我这样写：

```
template<typename T> 
void Print(const T data[], const int & arraySize)  // i use the const, and &
{ 
   for(inti = 0; i < arraySize; ++i) 
   cout << data[i] << " "; 
   cout << endl; 
} 
```

当我在 main() 函数中编写时，我写道：

```
int iArray[14] = {7,3,32,2,55,34,6,13,29,22,11,9,1,5}; 
int numInts = 14;    // do I need to specify numInts is const?? 
```

打印（iArray，numInts）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:34:15.257

> 在版本 2 中，我返回参考还是就这样？为什么？

没关系，错了。

> 版本 1 和版本 2，哪个更好？

版本 1。第二个修改了`this`对象，所以写`x + y`会 modify `x`，这没有意义。

> 我们经常写重载=，<<通过引用返回，使用链=/<<，但是为什么没有引用我们不能使用链=/<<，复制的真正含义是什么？

没有引用，你只是返回一个副本——一个临时的——所以在这些情况下链接是没有意义的。编写链式`=`调用会将调用应用于不同的对象，而不是`=`被调用的对象。

> 另一个问题是，我在 <> 中看到：“use const as possible”和“prefer use pass by reference”，这是否意味着我编写类函数声明时尽可能使用 const 和引用？

并不真地。在有意义的时候使用它们。例如，你的存在是有意义的`operator +`，`const`因为你不应该修改参数。这也会导致版本 2 的编译器错误（这很好）。

至于通过引用传递 - 它应该是大型对象的首选 - 对于一个`int`或`float`- 如果您没有在内部修改它，则按值传递。

# apache - 很难做mod重写

> ID：12985759
> 
> 赞同：0
> 
> 时间：2012-10-20T06:05:29.830
> 
> 标签：apache

我是 Apache 重写 URL 的初学者。

我在重写 URL 时遇到问题。

我想将 www.test.com/abc/index.php?val=123 重写为 www.test.com/abc/123/index.php

注意：abc 是文件夹

```
RewriteEngine on
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteRule  ^(.*)/([0-9]+)/index.php $1/index.php?val=$2 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:28:24.660

您在 RewriteRule 中的正则表达式没有意义。此外，您不能在 RewriteRule 中引用部分查询字符串，因此您必须另外使用 RewriteCond 来捕获查询参数。

试试这个：

```
RewriteEngine on
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond  %{REQUEST_FILENAME} !-d
RewriteCond  %{QUERY_STRING} val=([0-9]+)
RewriteRule  ^(.+)/index.php $1/%1/index.php [L] 
```

让 apache 本身帮助您调试表达式总是一个好主意：使用日志记录功能：阅读两个命令的文档`RewriteLog`和`RewriteLogLevel`. 他们转储采取的每一步，并允许了解算法内部实际发生的情况。

所需的所有信息都在[精美的文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)中提供。真的值得努力...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:28:40.320

如果您在 htaccess 文件中编写此规则，请添加`RewriteBase`指令

```
RewriteEngine On
RewriteBase / 
```

# java - 是否有基于 TCP 的开源框架用于多客户端管理？

> ID：12985765
> 
> 赞同：0
> 
> 时间：2012-10-20T06:06:19.610
> 
> 标签：java, frameworks, tcp, open-source, tcpclient

是否有基于 TCP 的开源健壮框架可用于通过 TCP 服务器进行多客户端通信和控制？

我的目标是建立一个 TCP 客户端 - 服务器，并且框架必须具有明确定义的协议并且必须是跨平台的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:32:38.690

目前网络上最酷的孩子是[Netty](https://netty.io/)，引用他们自己的话，

> Netty 是一个 NIO 客户端服务器框架，可以快速轻松地开发协议服务器和客户端等网络应用程序。它极大地简化和流线了网络编程，例如 TCP 和 UDP 套接字服务器。

最常见的 Netty 用例与 HTTP(s) 相关，但正如宣传语所说，Netty 的工作水平低于此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:47:32.520

Servlet 规范尽可能地满足您声明的要求。定义明确的协议 = HTTP 和 HTTPS，多平台，多实现，部署*非常*广泛，...

# asp.net-mvc-3 - 从 MVC 返回 Excel 文件作为结果

> ID：12985769
> 
> 赞同：0
> 
> 时间：2012-10-20T06:06:57.743
> 
> 标签：asp.net-mvc-3, excel, model-view-controller, interop

1.  如果我选择使用 Interop，是否需要在服务器端安装 Excel？
2.  是否还有其他不使用 Interop 的原因？
3.  我应该选择`System.Web.UI.WebControls.GridView`服务器端解决方案，填充它并将其写入结果吗？
4.  任何其他保留 MVC 逻辑和功能的智能解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:29:44.397

是的，使用互操作需要在服务器端安装 Excel，在服务器上运行 Excel 是个坏主意。根据微软本身： http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

> Microsoft 目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。

但是，您可以在不使用 Excel 互操作的情况下在服务器端创建 Excel 工作簿。对此的一种解决方案是使用[OpenXML SDK](http://www.microsoft.com/en-us/download/details.aspx?id=5124)（免费），它将以与互操作非常不同的方式创建 Excel 文件。还有一些开源项目和商业解决方案允许您这样做。在 StackOverflow 上搜索“创建 Excel 文件服务器”将为您提供很多选择。

# java - 理解 GroupLayout 的困难

> ID：12985771
> 
> 赞同：4
> 
> 时间：2012-10-20T06:07:12.910
> 
> 标签：java, swing, layout-manager

![在此处输入图像描述](../Images/0425a96c7c5bdcecad67518ab043f3d0.png)

我想做一些看起来像蓝色框架（右侧）的东西，所以我从一个简单的开始，它有 3 个面板（左上角）

我似乎无法弄清楚如何使用`GroupLayout`，以下是我的代码。原来是左下角的那个。谁能告诉我我的理解哪里出了问题`GroupLayout`？谢谢。

```
layout.setHorizontalGroup(layout.createSequentialGroup()
        .addComponent(yellow)
        .addComponent(green)
        .addGroup(layout.createParallelGroup())
            .addComponent(pink)

    );
layout.setVerticalGroup(layout.createSequentialGroup()
        .addGroup(layout.createParallelGroup())
            .addComponent(yellow)
            .addComponent(green)
        .addComponent(pink) 
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:00:24.337

**查看水平布局，您有一个平行**的上部（黄色/绿色）和下部（粉红色）。上半部分显示**一系列**黄色和绿色：

```
layout.setHorizontalGroup(
    layout.createParallelGroup()                    // upper and lower part show parallel layout
        .addGroup(layout.createSequentialGroup()    // <- upper part
            .addComponent(yellow)
            .addComponent(green)
        ).addComponent(pink)                        // <- lower part
); 
```

另一方面，垂直布局是上部（黄色和绿色**平行**，即并排）和下部（粉红色）的**序列。**

 **```
layout.setVerticalGroup(
    layout.createSequentialGroup()                  // upper and lower part sequentially
        .addGroup(layout.createParallelGroup()      // <- upper part
            .addComponent(yellow)
            .addComponent(green)
        ).addComponent(pink)                        // <- lower part
); 
```**

# entity-framework - 实体框架中的属性不能既是键又是外键

> ID：12985774
> 
> 赞同：2
> 
> 时间：2012-10-20T06:07:32.983
> 
> 标签：entity-framework

更新

我发现添加一个单独的键可以使它工作。那么，如果一个属性既不是另一个表的键又不是 ForeignKey 怎么办？

```
One or more validation errors were detected during model generation:

\tSystem.Data.Entity.Edm.EdmAssociationEnd: : Multiplicity is not valid in Role 'TrafficImageQuestionExtraInfo_TrafficImageQuestion_Source' in relationship 'TrafficImageQuestionExtraInfo_TrafficImageQuestion'. Because the Dependent Role refers to the key properties, the upper bound of the multiplicity of the Dependent Role must be '1'.

public class TrafficImageQuestionExtraInfoMap : EntityTypeConfiguration<TrafficImageQuestionExtraInfo>
{
    public TrafficImageQuestionExtraInfoMap()
    {
        this.HasKey(t => new { t.QuestionId, t.TrafficImageGuid });

        this.Property(t => t.TrafficImageGuid).IsRequired();

        this.Property(t => t.QuestionId).IsRequired();
        this.Property(t => t.Key).IsRequired().HasMaxLength(50);
        this.Property(t => t.Value).IsRequired().IsUnicode().HasMaxLength(128);
        HasRequired(t => t.TrafficImageQuestion).WithMany(k => k.Properties).HasForeignKey(t => new { t.QuestionId, t.TrafficImageGuid });//.Map(m => m.MapKey("QuestionId", "TrafficImageGuid")).WillCascadeOnDelete();
    }
} 
```

和

```
public class TrafficImageQuestionMap : EntityTypeConfiguration<TrafficImageQuestion>
{
    public TrafficImageQuestionMap()
    {
        // Primary Key
        this.HasKey(t => new { t.QuestionId, t.TrafficImageGuid });

        // Table & Column Mappings
        this.ToTable("TrafficImageQuestions");
        this.Property(t=>t.QuestionId).IsRequired();

        this.HasRequired(t => t.TrafficImage).
            WithMany(t=>t.TrafficImageQuestions).
            HasForeignKey(t=>t.TrafficImageGuid).WillCascadeOnDelete();
        this.Property(t => t.
            Answer).IsRequired();

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T12:36:15.897

一个键可以同时是一个外键，但不能是一对多的关系。在这个映射...

```
HasKey(t => new { t.QuestionId, t.TrafficImageGuid });
HasRequired(t => t.TrafficImageQuestion)
    .WithMany(k => k.Properties)
    .HasForeignKey(t => new { t.QuestionId, t.TrafficImageGuid }); 
```

...您定义键 ( `t.QuestionId, t.TrafficImageGuid`) 也是外键。但这意味着这个外键在整个表中必须是唯一的（因为主键是唯一的）。不能有两行具有相同的 FK。但这意味着关系的另一端不能有集合，因为集合是由具有相同外键的所有行定义的。由于 FK 是唯一的，因此元素不能*太多。*

我不知道你想要实现什么，但你要么需要定义一个一对一的关系（`WithOptional(k => k.Property)`例如，而不是`WithMany(k => k.Properties)`, where `Property`is a *reference*，而不是一个集合）或者你需要一个不同的外键从（主）键属性。

# java - 如何在 CVS 中跟踪不同的用户？

> ID：12985778
> 
> 赞同：0
> 
> 时间：2012-10-20T06:08:41.987
> 
> 标签：java, version-control, cvs

我正在为我的 java 代码使用 CVS 存储库 - 我需要为我要雇用的三个开发人员将要开发的功能授予访问此代码的权限。我不希望他们提交他们的更改——我只想让这三个人都开发相同的功能而不更改基本代码——我不熟悉 CVS（主要是 SVN）。我是否使用开发人员名称创建文件夹？我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:12:25.330

您可以为每个分支创建一个分支。它将基于 HEAD 版本，它们不会在它们之间共享代码，并且您的主版本（即 HEAD）不会以这种方式修改。

# video-streaming - red5 媒体服务器并保护视频不被嵌入？

> ID：12985782
> 
> 赞同：1
> 
> 时间：2012-10-20T06:09:18.360
> 
> 标签：video-streaming, red5, flash-media-server

我正在尝试以最可能的方式保护我的视频，所以我知道将它们放在 red5 媒体服务器上会使它们流式传输，因此 flv 文件不会被下载到用户缓存中，但我主要担心的是可能保护视频不被嵌入？所以它只会从我指定的域运行？

而且，是否有可能以某种方式加密流媒体视频文件？并在下载时将其加密在我的 Flash 播放器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:17:45.187

为了保护您的流，您可以编辑文件：red5-web.properties（在 $red5/webapps/$your-app/WEB-INF/ 中）

```
webapp.virtualHosts=*,localhost, 127.0.0.1 
```

webapp.virtualHosts 定义了允许连接到 Red5 应用程序的 IP/域。

因此，如果您的应用程序托管在 myserver.com 上，并且您只希望从 myserver.com 加载的 SWF 能够连接到您的流，那么您可以配置 red5-web.properties。

AFAIK：这里的“安全性”是每个 SWF 都会自动向 RTMP 服务器发送一个从中加载它的 IP/域。因此，出于某种动机，您可以使用 Java 或 C++ 构建一个 RTMP 客户端，以模拟来自另一个域的连接。

但是，对于简单的场景，例如保护您的流不被其他网站中的某些 FLV 播放器嵌入，这应该已经有所帮助。

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T12:57:42.740

为防止视频被嵌入，请勿使用可嵌入播放器（即，如果您使用的是商业播放器，请禁用嵌入选项）。如果您不希望他们找到流然后将视频嵌入到他们自己的播放器中，您必须隐藏电影的 URL。有很多方法可以做到这一点。最流行的是使用 php 文件通过 readfile 输出视频。您还可以使用符号链接或一些类似的解决方案。

回复：加密，有一些像 iTunes 使用的 DRM 解决方案，但我认为如果你在这里问这对你来说可能是矫枉过正。

# php - PHP if MySQL column = 1 打印，否则打印其他内容

> ID：12985784
> 
> 赞同：-1
> 
> 时间：2012-10-20T06:09:36.813
> 
> 标签：php, mysql, if-statement

**强文本**我不知道标题是否清楚，

但我想要一个 PHP 脚本来告诉 MySQL 列是否有数据，如果它**确实打印**一行文本，但如果它是**NULL**，则打印其他内容......

有道理？

这就是我所拥有的，我知道这是完全错误的......

```
$link = mysql_connect($DBHOST, $DBUSER, $DBPASSWORD);
mysql_select_db($DBNAME); 
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

$result = mysql_query("SELECT * FROM members");

while($row = mysql_fetch_assoc($result))
{
     if($row['VIP'] = '1')
     {
        echo('VIP');
     }
     else
     {
        echo('Non-VIP');
     }
} 
```

**编辑：：**

这是完整的代码：

```
<?php

$DBTYPE = 'mysql';
$DBHOST = 'host';
$DBUSER = 'username';
$DBPASSWORD = 'password';
$DBNAME = 'database';

$link = mysql_connect($DBHOST, $DBUSER, $DBPASSWORD);
mysql_select_db($DBNAME); 
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$member_id= '5'; // get value of the member, assumed that you have post the data into id. change if it is different into your code

$result = mysql_query("SELECT * FROM members where id=$member_id");

while($row = mysql_fetch_assoc($result))
{
     if($row['VIP'] == '1')
     {
        echo "<img src='../images/VIP.png' />";
     }
     else
     {
        echo 'Non-VIP';
     }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:15:17.537

```
 $result = mysql_query("SELECT * FROM members");

   if(mysql_num_rows($result) > 0) // or you can check for 1 too

    {
    $row = mysql_fetch_assoc($result);
    // your text output here
    //echo VIP or whatever
    }
    else { echo "non-vip"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:14:00.593

使用 == 检查相等性，如下所示：

```
if($row['VIP'] == '1')
{
  echo('VIP');
}
else
{
 echo('Non-VIP');
} 
```

**编辑**

使用下面的代码来获得你想要的结果

```
$link = mysql_connect($DBHOST, $DBUSER, $DBPASSWORD);
mysql_select_db($DBNAME); 
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$member_id=$_POST['id']; // get value of the member, assumed that you have post the data into id. change if it is different into your code

$result = mysql_query("SELECT * FROM members where id=$member_id");

while($row = mysql_fetch_assoc($result))
{
     if($row['VIP'] == '1')
     {
        echo "<img src='../images/VIP.png' />";
     }
     else
     {
        echo 'Non-VIP';
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:32:46.383

如果我理解正确，您想显示用户是`VIP`还是`Regular User`。如果是这样，您需要修改您的`SELECT`以获取用户行，而不是每一行。

```
$id = ...; //logged in user id [ie. $loggedin->id, $_SESSION['id'], etc]

$result = mysql_query("SELECT * FROM members WHERE id = $id");

while($row = mysql_fetch_assoc($result)){

 if($row['VIP'] == '1')
 {
    echo('VIP');
 }
 else
 {
    echo('Non-VIP');
 }
 } 
```

请注意，您不应该使用`mysql`函数编写新代码。你应该学习使用[mysqli 或 PDO](http://php.net/manual/en/mysqlinfo.api.choosing.php)

# google-api - 如何在 Google 自定义搜索引擎中添加要搜索的网站？

> ID：12985786
> 
> 赞同：1
> 
> 时间：2012-10-20T06:09:41.480
> 
> 标签：google-api, google-custom-search

我是 Google 自定义搜索 API 的新手。为了使用这个 API，我知道有必要在[http://www.google.com/cse创建一个谷歌自定义搜索引擎](http://www.google.com/cse)

但是，我真的很困惑为什么我应该在创建自定义搜索引擎时添加要搜索的网站？这是否意味着自定义搜索 API 仅限于定义的特定网站？

我不能使用自定义搜索 API 通过 Google 搜索互联网？

预先感谢您的任何解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:40:18.183

默认情况下，CSE 仅搜索指定的站点。但是，创建 CSE 后，您可以转到控制面板中的站点选项卡并删除所有站点。CSE 然后应该搜索整个互联网。（当然，您可能需要添加一些改进或其他内容，以使您的搜索具有一些价值，以将其与标准的 google 搜索区分开来。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:41:43.170

您输入的网站用于现场搜索，但您可以将设置更改为“万维网”搜索。因此可以使用 cse 在您自己的网站和互联网上搜索项目。突出显示您网站上可能匹配的结果。

# css - Twitter Bootstrap：使用伪类安全吗？

> ID：12985787
> 
> 赞同：1
> 
> 时间：2012-10-20T06:09:50.000
> 
> 标签：css, twitter-bootstrap

作为一种做法（不确定它是否好），但我一直在添加一个`.last`列表，其中我需要选择最后一个项目。我这样做是因为我对`:last-child`跨浏览器的工作方式没有信心。

我需要在 Bootstrap 中担心这个吗？还是我一开始就担心它是错的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:43:19.647

css 中没有 :last 伪类。您可能会想到 :last-child 伪类，它在 IE8 及更高版本以及所有现代版本的 Chrome、Firefox 和 Safari 以及现代移动浏览器中都受支持。

Twitter Bootstrap 是一个起点，只要不关心 IE7 支持，使用 :last-child 之类的伪类是安全的。请务必参考特定的伪类浏览器支持。这是一个不错的列表： http: [//net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)

**编辑：我把第一个孩子和最后一个孩子混淆了，最后一个孩子是 ie9 及以上。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:44:29.393

看看这个 javascript 插件： [http ://selectivizr.com/](http://selectivizr.com/)

# javascript - 用户登录后提交表单

> ID：12985789
> 
> 赞同：0
> 
> 时间：2012-10-20T06:09:59.733
> 
> 标签：javascript, jquery, html, ruby-on-rails

我为投票设计的工作流程是这样的：用户无论是否登录都可以投票。如果用户登录，只需提交表单。如果用户没有登录，则会出现一个模式，要求用户使用 facebook 登录以完成投票。登录后，他之前投票的选项的表单将被提交。

我正在使用 rails 实现，似乎在创建会话后，页面被重定向。即使回到同一页面，我如何提交带有他选择的选项的表单？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:12:30.467

一种方法是记住这个人选择了什么，

1) 在使用 facebook 登录时将值作为 GET 参数发送

2）其他将存储在cookie中并在发布时将其取回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:22:24.797

将投票保存在会话变量中。用户登录后放入隐藏变量。然后只需使用函数提交表单。您可以在 body 标签上添加功能，例如

```
<body onload="fnc()">
<script type="text/javascript">
fnc()
{
document.getElementById("yourformId").submit();
}
</script> 
```

可能还有其他方法。但这首先隐藏了我

# java - 仅用于启动活动的应用程序

> ID：12985792
> 
> 赞同：1
> 
> 时间：2012-10-20T06:10:34.257
> 
> 标签：java, android

我正在尝试添加快捷方式以在 App Drawer（不是主屏幕）上启动录音机

所以应用程序应该是空的，它唯一要做的就是启动 Sound Recorder com.android.soundrecorder/com.android.soundrecorder.SoundRecorder

我怎样才能做到这一点？

我得到了强制停止：

`

```
<uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Recorder"
        android:label="@string/title_activity_recorder" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

`

和java文件

```
`package recorder.audio.dsaif;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;

public class Recorder extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.android.soundrecorder.SoundRecorder");
    startActivity(LaunchIntent);
    setContentView(R.layout.activity_recorder);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_recorder, menu);
    return true;

}
}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:16:27.020

两种方式：

创建您自己的应用程序。从那里启动不同的应用程序非常简单。

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.android.soundrecorder.SoundRecorder");
startActivity(LaunchIntent); 
```

或者

下载塔斯克。它具有一项功能，可让您直接从手机创建应用程序。您可以简单地创建一个 Tasker 配置文件来启动您想要的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T08:38:13.563

我认为您需要添加一个新任务的标志，并调用finish（）并删除setContentView。

如果崩溃是由空指针异常引起的，则可能是包不正确和/或未安装应用程序。

这就是为什么你需要检查意图是给你的还是空的。

顺便说一句，变量名称应该有一个小写字母。

这里的活动代码：

```
@Override
  protected void onCreate(final Bundle savedInstanceState)
    {
    super.onCreate(savedInstanceState);
    final Intent launchIntent=getPackageManager().getLaunchIntentForPackage("com.android.soundrecorder.SoundRecorder");
    if(launchIntent==null)
      {
      Toast.makeText(this,"can't find the app to launch!",Toast.LENGTH_SHORT).show();
      finish();
      return;
      }
    launchIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(launchIntent);
    finish();
    } 
```

在清单文件中，将此属性添加到活动标记以避免显示活动的“正常”样式：

```
android:theme="@android:style/Theme.Dialog" 
```

# .htaccess - 我需要我的 .htaccess 文件来重定向所有 .php 到 .html 除了 index.php

> ID：12985793
> 
> 赞同：2
> 
> 时间：2012-10-20T06:10:55.480
> 
> 标签：.htaccess, mod-rewrite, redirect, rewrite

我需要一个 .htaccess 重写规则来重定向这样的链接：

*   www.mydomain.com/viewpressrelease.php
*   www.mydomain.com/viewpressrelease.php?id=17（或.php 后面的任何文本）
*   www.mydomain.com/employment.php

将 .php 替换为 .html 的同名链接，如下所示：

*   www.mydomain.com/viewpressrelease.html
*   www.mydomain.com/employment.html

但不对 index.php 或以下内容采取行动：

*   www.mydomain.com/administrator/index.php

我有一个很接近但不处理 ?id=17 部分的示例，并且正在将 index.php 转换为 index.html。

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^\s]+)\.php\s 
RewriteRule .* %1.html [R=301,L] 
RewriteRule ^(.*)\.html$ $1.php 
```

我需要什么才能按需要完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:15:30.233

您需要添加一个要排除的条件`index.php`，然后`\s`从检查中删除最后一个`%{THE_REQUEST}`：

```
RewriteCond %{REQUEST_URI} !index\.php
RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^\s]+)\.php
RewriteRule .* %1.html [R=301,L] 
RewriteRule ^(.*)\.html$ $1.php 
```

# sql-server-2008 - 我们如何在 SQL Server 2008 中检索已删除的行？

> ID：12985795
> 
> 赞同：0
> 
> 时间：2012-10-20T06:11:46.113
> 
> 标签：sql-server-2008

我们可以从 SQL Server 2008 的数据库中检索已删除的表行吗？

如果是，请让我知道我们该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:16:22.930

下面的示例是针对 2005 年的，可能需要针对 2008 年进行调整。

一种更简单的方法可能是恢复它，这将基于您的备份

[如何从 SQL Server 表中恢复已删除的行？](https://stackoverflow.com/questions/3540729/how-to-recover-deleted-rows-from-sql-server-table)

[从 Sql Server 数据库中恢复已删除的行](http://social.msdn.microsoft.com/Forums/en-GB/transactsql/thread/86befdbe-9806-4d96-9e9f-ead753d0fc20)

# facebook - 如何使用带有 php 的 facebook SDK 发布音频？

> ID：12985799
> 
> 赞同：0
> 
> 时间：2012-10-20T06:12:15.813
> 
> 标签：facebook

```
require_once("externals/facebook-sdk/src/facebook.php");
 $config = array();
      $config['appId'] = 'XXXXXXXXXXXXXXXXXXXXXXXX';
      $config['secret'] = 'XXXXXXXXXXXXXXXXXXXXXXXXX'; $config['fileUpload'] =true;

      $facebook = new Facebook($config) 
```

; 我可以发布视频

```
$facebook->api('/me/feed', 'post', array(
     'message' => $message,
    'link' => 'http://www.test.org/videos/'.$video['video_id'].'/'.$_POST['title'],
    'type'=>'video',
    'source'=>$video['embed'],
    'picture'=> $pic,
    'name'=> $_POST['title'],
    'caption'=>'this is a test' , 
    'description'=> $_POST['desc']) 
); 
```

我怎样才能对音频做同样的事情？我应该将视频更改为音频并提供该音频的网址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:21:27.983

好。根据日期，facebook 不支持音频文件（据我所知）。因此，您将无法做您想做的事情。您可以做的是，将它们上传到第三方服务器并共享链接。或使用第三方应用，如 Spotify。

希望这可以帮助。

# c# - 我正在获取 MM/dd/yyyy 的 CultureInfo.InvariantCulture 格式。但我想得到 dd/MM/yyyy 格式我做什么

> ID：12985802
> 
> 赞同：-1
> 
> 时间：2012-10-20T06:13:02.277
> 
> 标签：c#, asp.net

> **可能重复：**
> [获取系统日期和拆分日、月和年](https://stackoverflow.com/questions/12986114/get-the-system-date-and-split-day-month-and-year)

获取 MM/dd/yyyy 的 CultureInfo.InvariantCulture 格式。但我想获得 dd/MM/yyyy 格式，我想分割日月年。

这是我的代码：

```
string sDate = string.Empty;
DateTime _date = DateTime.Now;
DateTime dateFormat = Convert.ToDateTime(_date.ToString(CultureInfo.InvariantCulture));
int count = 0;
string format = "dd/MM/yyyy";
sDate = dateFormat.ToString(format);
string[] Words = sDate.Split(new char[] { '/' });
foreach (string Word in Words)
{
    count += 1;
    if (count == 1) { Day = Word; }
    if (count == 2) { Month = Word; }
    if (count == 3) { Year = Word; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:33:42.823

我没有得到，你实际上想从这段代码中实现什么，如果你需要日、月和年，你为什么不去

```
sDate.Day
sDate.Month
sDate.Year 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:52:01.030

是的，不变文化的短日期格式*是* `MM/dd/yyyy`. 如果要使用特定模式进行解析，则应使用`DateTime.ParseExact`：

```
DateTime date = DateTime.ParseExact(text, "dd/MM/yyyy",
                                    CultureInfo.InvariantCulture);
int day = date.Day;
int month = date.Month;
int year = date.Year; 
```

（我不知道你为什么要以你现在的方式分割字符串......你的整个问题都不清楚你想要实现的目标......）

# exception - 如何在 monotouch/ios 中捕获所有崩溃异常？

> ID：12985803
> 
> 赞同：2
> 
> 时间：2012-10-20T06:13:30.207
> 
> 标签：exception, xamarin.ios

我在 main.cs 中包装了日志代码以捕获异常，但是由 monotouch 构建的应用程序通常在 iPad 中崩溃，并且我找不到任何日志。（部分代码包含多线程操作和wcf服务）

如何捕获所有崩溃异常？

```
public class Application
{
    // This is the main entry point of the application.
    static void Main (string[] args)
    {
        // if you want to use a different Application Delegate class from "AppDelegate"
        // you can specify it here.
        try
        {
            UIApplication.Main (args, null, "AppDelegate");
        }
        catch (Exception ex)
        {
            Util.LogException("Main",ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T09:45:39.187

原生崩溃无法转为托管异常（进程状态无效，无法安全继续）。

有两种类型的信息可以帮助您（或帮助他人帮助您）弄清楚发生了什么：

*   崩溃报告。
*   设备日志。

您可以在 Xcode 的 Organizer 中找到崩溃报告，并在 MonoDevelop 的 iOS Device Log pad 中找到设备日志。[这是一个更详细的描述](http://rolfkvinge.blogspot.com.es/2012/04/native-crashes-in-monotouch.html)如何找到每个。

# mysql - 数据库设计建议

> ID：12985804
> 
> 赞同：0
> 
> 时间：2012-10-20T06:13:32.303
> 
> 标签：mysql, database, database-design

我正在设计一个数据库，这是它的外观的上下文：

> 我有一个应用程序。
> 
> 申请将有申请人。
> 
> 申请人（申请）可能有也可能没有共同申请人。
> 
> 申请人有以下信息：人口统计、一般信息、就业信息、参考资料等...
> 
> 如果存在共同申请人，它将具有相同的信息：人口统计、一般信息、就业信息、参考等...

*我提出的设计看起来像这样：*

```
 Table: application [pk: applicaion_id]

 Table: applicant   [pk: applicant_id, fk: applicaiton_id {references: application.applicaion_id} ]

 Table: co_applicant [pk: ( applicant_id {references: applicant.applicant_id},  co_applicants_applicant_id {references: applicant.applicant_id} ) ]

 Table demographic [pk: demographic_id, fk: appicant_id{references: applicant.applicant_id} ]

 Table employment [pk: demographic_id, fk: appicant_id{references: applicant.applicant_id} ] 
```

ETC...

申请人表保存有关申请人的一般信息，类似的共同申请人持有有关共同申请人的一般信息

这是设计的*替代方案，*

```
 Table: application  [pk: applicaion_id]

 Table: applicant    [pk: applicant_id, fk: applicaiton_id {references: application.applicaion_id} ]

 Table: co_applicant [pk: co_applicant_id, fk: applicaiton_id {references: application.applicaion_id} ]

 Table demographic   [pk: demographic_id, fk: appicant_id{references: applicant.applicant_id} ]

 Table employment    [pk: demographic_id, fk: appicant_id{references: applicant.applicant_id} ]

 Table co_applicant_demographic   [pk: demographic_id, fk: appicant_id{references: applicant.applicant_id} ]

 Table co_applicant_employment    [pk: demographic_id, fk: appicant_id{references: applicant.applicant_id} ] 
```

每个 co_applicant 信息的表。

您会建议哪种设计或任何更好的替代方案以及它的优点和缺点都会非常有帮助。

> 编辑：读取查询可能非常繁重，搜索查询也可能很密集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:19:13.030

你在“applicant”和“co_applicant”之间复制了很多东西，尤其是重复的表。疯狂的。

把他们都当作“申请者”，只有一张`applicant`桌子，但桌子上有两个 FK`application`回它 -`applicant_id`和`co_applicant_id`

# android - 如何在 Mono for Android 中使用 RSS 提要 URL 在线工作？

> ID：12985806
> 
> 赞同：1
> 
> 时间：2012-10-20T06:13:40.127
> 
> 标签：android, rss, xmlhttprequest, xamarin.android

我想在我的项目中创建 RSS 提要阅读器，该阅读器在 15 秒内工作并从 RSS url 获取新项目，我该如何从基础到最终做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:48:50.357

```
 XmlTextReader reader = new XmlTextReader ("http://www.mono-project.com/news/index.rss2");
reader.Read ();
Console.WriteLine (reader.NodeType); // It prints "XmlDeclaration"

reader.MoveToContent ();
Console.WriteLine (reader.NodeType); // It prints "Element"
Console.WriteLine (reader.Name); // "rss"
Console.WriteLine (reader.GetAttribute ("version")); // Maybe "0.92"

// proceed content until we reach "item" element
while (!reader.EOF && reader.Name != "item")
    reader.Read ();

reader.Read (); // Move from "item" to "title"
while (reader.NodeType == XmlNodeType.Whitespace)
    reader.Read ();
Console.WriteLine ("Title : " + reader.ReadString ());

reader.Read (); // from "</title>" to whitespace
reader.Read (); // from whitespace to <link>
Console.WriteLine ("Link  : " + reader.ReadString ());

reader.Read (); // from "</link>" to whitespace
reader.Read (); // from whitespace to <pubDate>
Console.WriteLine ("Date  : " + reader.ReadString ());

reader.Read (); // from "</pubDate>" to whitespace
reader.Read (); // from whitespace to <description>
Console.WriteLine ("Description : " + reader.ReadString ()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:25:18.913

```
 using (var client = new System.Net.WebClient())
        {
            var all = client.DownloadString(new Uri("http://www.yoursite.com/rss"));
            var doc = XElement.Parse(all);
            var items = (from el in doc.Descendants("item")
                         select new Models.RssItem
                         {
                             Title = el.Element("title").Value,
                             Description = el.Element("description").Value,
                             Url = el.Element("link").Value,
                         }).ToList();

            var d = new AlertDialog.Builder(this);
            d.SetMessage(items.Count.ToString());
            d.Show();

        } 
```

# python - 如何可靠地定位 Java 的 rt.jar 或等效文件？

> ID：12985814
> 
> 赞同：5
> 
> 时间：2012-10-20T06:15:28.750
> 
> 标签：python, classpath, java

如何可靠地找到包含 Java 引导类（rt.jar 或等效项）的 jar？我正在使用下面的代码，但我发现它`JAVA_HOME`用于指代 JDK，而不是 JRE，如果没有安装 JDK，它将完全失败。

```
def findJRE():
    try:
        home = os.environ['JAVA_HOME']
        path = os.path.join(home, 'jre', 'lib', 'rt.jar')
        if os.path.isfile(path):
            return path

        #For macs
        path = os.path.join(home, 'bundle', 'Classes', 'classes.jar')
        if os.path.isfile(path):
            return path
    except Exception as e:
        pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T09:46:56.313

由于平台之间文件的位置和名称不同，而且似乎没有指向它的环境变量，我想你最好的选择是在文件系统中查找文件：

```
#!/usr/bin/env python
import subprocess
import re

rtjarPaths = subprocess.check_output(["locate", "rt.jar"])
paths = re.findall('^.*/jre/.*$', rtjarPaths, re.M)
print paths

vicent@deckard:~$ python findrt.py 
['/usr/lib/jvm/java-6-openjdk/jre/lib/rt.jar'] 
```

上面的代码在我的 Ubuntu 机器上对我来说很好。它也可以轻松扩展以在 MacOS X 上工作。其他 linux 发行版也可能需要修改代码。

**更新：** 经过一番谷歌搜索后，我[在 oracle 文档](http://docs.oracle.com/javase/6/docs/technotes/tools/findingclasses.html)中发现该`rt.jar`文件位于存储在`sun.boot.class.path`系统属性中的路径中。不幸的是，我不知道如何直接从 Python 或命令行获取此属性，因此我只能提供以下肮脏的替代方法来替代前面的代码。

创建并编译 PropertiesTest.java：

```
public class PropertiesTest {
    public static void main(String[] args)
        throws Exception {
        String value = System.getProperty("sun.boot.class.path");
        System.out.println(value);
    }
} 
```

然后执行以下 Python 脚本：

```
#!/usr/bin/env python
import subprocess
import re

jrePaths = subprocess.check_output(["java", "PropertiesTest"])
rt = re.findall('(?:.*:)?(.*/(?:rt|classes)\.jar):?', jrePaths)
print rt 
```

它应该适用于 Linux 和 MacOS X 平台。在我的 Ubuntu 系统上，它给出了输出

```
['/usr/lib/jvm/java-6-openjdk/jre/lib/rt.jar'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-13T22:47:18.083

我喜欢[文森特更有原则的回答](https://stackoverflow.com/a/12987203/470844)，但这里有一个更简单的技巧：

```
java -verbose 2>/dev/null | sed -ne '1 s/\[Opened \(.*\)\]/\1/p' 
```

打印 的绝对路径`rt.jar`。

在 Linux 和 Windows (Cygwin) 上使用 Sun Java 6 和 8 以及在 OS X 上使用 Sun Java 6 进行了测试（这里`rt.jar`改为`classes.jar`）。

# php - mysqli - 多少太多（非常慢）

> ID：12985817
> 
> 赞同：0
> 
> 时间：2012-10-20T06:15:45.193
> 
> 标签：php, mysql, mysqli

我有一个调查页面-根据您对以前问题的回答显示和隐藏使用 jquery 的其他问题（这些问题因所有输入类型而异）我有一个保存功能，然后是一个保存和提交功能 - 保存和提交时我需要验证所有尚未隐藏的问题都已得到回答 - 在使用输出进行原型设计以测试语法时，我意识到我正在运行的大量 mysqli 查询会减慢页面速度（可能超过 300 个问题或短于10)

下面是一个查询，以找出分配给该调查的问题数量（sid，$surveyid），$qcountup 是我让 while 语句访问 1 到最高问题编号（$qtotal）之间的每个数字的方法我们下到 while 语句，它对从 1 到 $qtotal 的每个数字进行重新操作，而我们运行查询以找出数据库中每个数字是否存在答案（如果没有回答 - 它不会存在。再次，目前如何编码可能意味着 300 多个 mysqli 查询 (LAG)。关于如何压缩或写得更好的任何建议？

```
 $qquery = "SELECT * FROM question WHERE (sid = ".$surveyid.");";
$qresult = mysqli_query($dbc, $qquery);
$qtotal = mysqli_num_rows($qresult);
$qcountup = 1;
while($qcountup <= $qtotal){
$squery = "SELECT * FROM answers WHERE sid='".$SID."' AND question='".$qcountup."';";
$sresult = mysqli_query($dbc, $squery) or die(mysql_error());
if (mysqli_num_rows($sresult) )
{
echo("<br>row existed");
} else {
echo("<br>row doesn't exist");
}     
$qcountup = $qcountup + 1;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:53:45.097

首先，由于您使用的是 mysqli，因此您应该使用准备好的查询，而不是将变量直接插入到查询字符串中。

第一个查询应该是：

```
SELECT COUNT(*) qtotal FROM question WHERE sid = "$surveyid" 
```

如果您只对数字感兴趣，则无需获取所有列。设置为此结果`$qtotal`的`qtotal`列。

对于第二部分，您可以使用 LEFT JOIN 将问题与答案进行匹配，并查看缺少哪些答案：

```
SELECT * FROM questions q LEFT JOIN answers a USING (question, sid)
WHERE q.sid = $SID
ORDER BY q.question 
```

如果缺少答案，则该行中的 a.question 将为 NULL。

我不确定我是否应该在那里使用 $SID 或 $surveyid；您在不同查询中使用的原始代码。

# c# - 我怎样才能只允许一个访问者访问该页面

> ID：12985818
> 
> 赞同：0
> 
> 时间：2012-10-20T06:15:48.967
> 
> 标签：c#, asp.net

我有一个名为“A”Asp.Net 的页面，我想只允许一个用户访问该页面。如果没有人访问该页面，那么任何用户都可以访问该页面而不使用数据库我该怎么做。我正在尝试使用 c# 的页面加载和 javascript 的窗口 onbeforeunload 事件，但没有得到它。

```
<script type="text/javascript" language="JavaScript">
        var hidViewstate;

        window.onload = body_Load;
        window.onbeforeunload = WindowCloseHanlder;

        function body_Load()
        {
            hidViewstate = document.getElementById('<%=hidViewstate.ClientID %>');
        }

        function WindowCloseHanlder()
        {
            hidViewstate.value = parseFloat(hidViewstate.value - 1);
        }

    </script>

<div>
        <asp:Label ID="lblText" runat="server" Text="Label"></asp:Label>
        <asp:HiddenField ID="hidViewstate" runat="server" />
    </div>

protected void Page_Load(object sender, EventArgs e)
    {
        hidViewstate.Value = "1";

        if(Convert.ToInt32(hidViewstate.Value) == 1)
        {
            lblText.Text = "Welcome First User";
        }
        else
        {       
            lblText.Text = "Visiting on this page is not allowed because user is already login.";

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:31:45.877

这与 Web 服务器的运行方式背道而驰。了解导致您尝试此操作的实际问题会很有趣。

在技​​术方面，您可以将全局变量存储在`Application`. 所有请求共享同一个全局对象。

但是，如果您向我们解释了您要解决的真正问题，我想您会发现这不是一个好方法，我相信我们可以提出一个真正的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:01:00.573

您可以使用全局变量，例如静态类的静态变量，

在页面加载时，您可以检查

```
if(clsGlobal.userCount > 1)
{
Response.Redirect("~/anotherPage.aspx") // somewhere you want..
}
else
{
//display your welcome message
} 
```

# ios - SK产品本地化标题始终为英文

> ID：12985823
> 
> 赞同：1
> 
> 时间：2012-10-20T06:16:42.073
> 
> 标签：ios, in-app-purchase, storekit

我的应用中有应用内购买。我正在使用日本商店中的测试帐户测试 Japanase 语言设备。我在应用程序购买标题和描述中都有英文和日文。

无论我做什么，SKProduct 的localizedTitle 和localizedDescription 总是以英文返回。

我究竟做错了什么？

我的 iPad 3 最初是在美国商店设置的，语言为英语，但我退出了我的商店帐户并通过应用程序中的正常流程使用日本测试 iTunes 帐户登录。该设备的语言目前是日语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T21:52:26.640

解决方案是通过“设置”应用程序中的商店菜单项创建新帐户流程。我实际上并没有创建一个帐户，但只需通过几个屏幕就足以将设备设置为日本商店模式。

# android - 在 Android 中以编程方式生成编辑文本

> ID：12985825
> 
> 赞同：16
> 
> 时间：2012-10-20T06:17:11.950
> 
> 标签：android, android-edittext

我正在开发联系人应用程序，它添加了电子邮件地址、电话号码。我必须在代码本身中动态创建编辑文本。我不知道如何以及在哪里实现这个逻辑，建议任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-20T06:32:59.183

您可以像这样创建它：

```
EditText myEditText = new EditText(context); // Pass it an Activity or Context
myEditText.setLayoutParams(new LayoutParams(..., ...)); // Pass two args; must be LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, or an integer pixel value.
myLayout.addView(myEditText); 
```

这可以在 UI 线程的任何地方实现；点击监听器、`onCreate`方法以及介于两者之间的所有内容。

[此问题中](https://stackoverflow.com/questions/4801631/how-to-create-gui-in-android-instead-of-using-xml)有一个更通用的示例，并且[此博客](http://www.brighthub.com/mobile/google-android/articles/48845.aspx)中对这些过程进行了很好的概述。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-20T06:47:47.753

使用以下代码以编程方式添加 Edittext，它将解决您的问题。

```
RelativeLayout mRlayout = (RelativeLayout) findViewById(R.id.mRlayout);
RelativeLayout.LayoutParams mRparams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
EditText myEditText = new EditText(context);
myEditText.setLayoutParams(mRparams);
mRlayout.addView(myEditText); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-03T07:00:59.417

布局

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/TableLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="20dp"
android:gravity="center_horizontal" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Contact Application"
    android:textAppearance="?android:attr/textAppearanceLarge" 
    android:gravity="center_horizontal"/> 
```

代码

```
//container Layout
    TableLayout tbl=(TableLayout)findViewById(R.id.TableLayout1);
    //table row
    TableRow tr = new TableRow(this);
    TableLayout.LayoutParams tableRowParams=
            new TableLayout.LayoutParams
            (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.WRAP_CONTENT);
    //for set margin
    tableRowParams.setMargins(0, 10, 0, 0);
    tr.setLayoutParams(tableRowParams);
    //text view
    TextView tv=new TextView(this);
    tv.setText("Email");
    tv.setGravity(Gravity.CENTER);
    tv.setTextColor(Color.parseColor("#0070C0"));
    tv.setTextSize(26);
    tv.setLayoutParams(new TableRow.LayoutParams(100, TableRow.LayoutParams.WRAP_CONTENT));
    //add textview
    tr.addView(tv);
    //set layout params of edittext
    TableRow.LayoutParams etParams=
            new TableRow.LayoutParams
            (120,30);
    etParams.setMargins(10, 0, 0, 0);

    EditText et=new EditText(this);
    et.setLayoutParams(etParams);
    //set background
    et.setBackgroundResource(R.drawable.bg_grey);
    et.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);
    tr.addView(et);

    tbl.addView(tr, tableRowParams); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-19T11:52:13.393

```
EditText emailEditText = new EditText(this); //you can pass context based on your function.
emailEditText.setHint("Enter Email address:"); //works same as in XML file hint
emailEditText.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);  
yourLayout.addView(emailEditText); 
```

根据您的要求设置您的`Layout`& 。`LayoutParams`

```
setContentView(your layout, your layout params) 
```

除了`numberEditText`将输入类型更改为`TYPE_CLASS_NUMBER`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-25T07:56:04.303

LinearLayout 中的 EditText。

尝试这个。

```
LinearLayout linearLayout = new LinearLayout(getContext());
                                LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
                                linearLayout.setOrientation(LinearLayout.VERTICAL);
                                layoutParams.setMargins(2, 1, 2, 1);
                                linearLayout.setLayoutParams(layoutParams);

EditText editText = new EditText (getContext());
                                    editText .setTextSize(15);
                                    editText .setLayoutParams(layoutParams);
                                    linearLayout.setGravity(Gravity.CENTER);
                                    editText .setText(Html.fromHtml(directiveMessage));
                                    linearLayout.addView(editText ); 
```

# java - 任何人都可以请告诉如何使用异步任务

> ID：12985827
> 
> 赞同：-4
> 
> 时间：2012-10-20T06:17:26.940
> 
> 标签：java, android

谁能告诉我如何登录？我尝试使用用户名`Priyanka`和密码登录，`Priyanka`但不成功。

谁能帮我吗？

```
package org.example.rig_parking;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Typeface;
import android.os.AsyncTask;
import android.os.Bundle;
import android.text.Html;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

 public class Rig_ParkingActivity extends Activity {

String username,password;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Typeface myTypeface = Typeface.createFromAsset(getAssets(), "fonts/semibold.ttf");
        TextView myTextView = (TextView)findViewById(R.id.rig_parkmain);
        myTextView.setTypeface(myTypeface);
        TextView forget_main = (TextView)findViewById(R.id.forget_main);
        forget_main.setTypeface(myTypeface);
        final EditText email_main = (EditText)findViewById(R.id.email_main);
        email_main.setTypeface(myTypeface);
        final EditText password_main = (EditText)findViewById(R.id.password_main);
        password_main.setTypeface(myTypeface);

        Button copy=(Button) findViewById(R.id.copyright);
        copy.setText("(c)Rig Parking 2010-2012,All Rights Reserved");
        copy.setTypeface(myTypeface);

        TextView register=(TextView) findViewById(R.id.register_main);       
     register.setTypeface(myTypeface);

        register.setOnClickListener(new OnClickListener() {         
        public void onClick(View arg0) {

     Intent register=new Intent(getApplicationContext(),Register.class);    
     startActivity(register);               
        }
    });

 /*      forget_main.setOnClickListener(new OnClickListener() {         
        public void onClick(View arg0) {

     Intent register=new Intent(getApplicationContext(),Tab.class); 
     startActivity(register);               
        }
    });
        */
        TextView login=(TextView) findViewById(R.id.login_main);       
        login.setTypeface(myTypeface);
        login.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            username=email_main.getText().toString();
            password=password_main.getText().toString();

            if(username.equals("")&&password.equals(""))
            {
                final AlertDialog alertDialog51;                    
                  alertDialog51 = new AlertDialog.Builder(Rig_ParkingActivity.this).create();
                    alertDialog51.setMessage(Html
                       .fromHtml("<font color='#00beb4'><b> Enter Email and Password</b></font>"));                                                                                                     
                    alertDialog51.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                int which) {                            
                        alertDialog51.dismiss();    
                               }
                         });            
                    alertDialog51.setButton2("Cancel", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        alertDialog51.dismiss();                                                
                       }
                    });                         
                    alertDialog51.show();                           
            }                                   
            else if(username.equals(""))
             {
                final AlertDialog alertDialog51;                    
                  alertDialog51 = new AlertDialog.Builder(Rig_ParkingActivity.this).create();
                    alertDialog51.setMessage(Html
                       .fromHtml("<font color='#00beb4'><b>    Enter Email    </b></font>"));                                                                                                       
                    alertDialog51.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                int which) {                            
                        alertDialog51.dismiss();    
                               }
                         });            
                    alertDialog51.setButton2("Cancel", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        alertDialog51.dismiss();                                                
                       }
                    });                         
                    alertDialog51.show(); 
             }
            else if(password.equals(""))
             {
                final AlertDialog alertDialog51;                    
                  alertDialog51 = new AlertDialog.Builder(Rig_ParkingActivity.this).create();
                    alertDialog51.setMessage(Html
                       .fromHtml("<font color='#00beb4'><b>    Enter  Password   </b></font>"));                                                                                                        
                    alertDialog51.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                int which) {                            
                        alertDialog51.dismiss();    
                               }
                         });            
                    alertDialog51.setButton2("Cancel", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        alertDialog51.dismiss();                                                
                       }
                    });                         
                    alertDialog51.show(); 
             }
            else{
            LoginTask logintsk=new LoginTask();
            logintsk.execute();             
            }

        }
    });

    }
    private class LoginTask extends AsyncTask<Void, Void, Void> { 

        private final ProgressDialog dialog = new ProgressDialog(Rig_ParkingActivity.this);

        @Override
    protected void onPreExecute() { 

            this.dialog.setMessage("Loading ..."); 
            this.dialog.show(); 
        } 

    @Override
    protected Void doInBackground(final Void... unused) { 

      Log.i("Priyanka", "username"+username);
      Log.i("Priyanka", "password"+password);
      String auth=BusinessLogic_login.candidatelogin(username, password); 
      String userid=auth; 
        Log.i("priyanka", "auth"+auth);
        if(auth.equals("0")||(auth.equals("")))
        {
            Rig_ParkingActivity.this.runOnUiThread(new Runnable() {             
                public void run() {                 
                    final AlertDialog alertDialog51;                    
                  alertDialog51 = new AlertDialog.Builder(Rig_ParkingActivity.this).create();
                    alertDialog51.setMessage(Html
                       .fromHtml("<font color='#00beb4'><b>Enter correct Email or Password</b></font>"));                                                                                                       
                    alertDialog51.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                int which) {                            
                        alertDialog51.dismiss();    
                               }
                         });            
                    alertDialog51.setButton2("Cancel", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        alertDialog51.dismiss();                                                
                       }
                    });                         
                    alertDialog51.show();               
                }
            });     
        }
        else {          

        Intent intnt=new Intent(getBaseContext(), Tab.class);
        startActivity(intnt);           

        }
        return null; // don't interact with the ui! 
    } 

    @Override
    protected void onPostExecute(Void result)  
    {  
            if (this.dialog.isShowing()) 
            { 
            this.dialog.dismiss(); 
            }
      } 
  }  
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:40:12.803

```
 private class LoginTask extends AsyncTask<Void, Void, Void> { 

        private final ProgressDialog dialog = new ProgressDialog(Rig_ParkingActivity.this);

        @Override
    protected void onPreExecute() { 

            this.dialog.setMessage("Loading ..."); 
            this.dialog.show(); 
        } 

    @Override
    protected Void doInBackground(final Void... unused) { 

      Log.i("Priyanka", "username"+username);
      Log.i("Priyanka", "password"+password);
      String auth=BusinessLogic_login.candidatelogin(username, password); 
      String userid=auth; 
        Log.i("priyanka", "auth"+auth);
        if(auth.equals("0")||(auth.equals("")))
        {
           flag=true;
            Rig_ParkingActivity.this.runOnUiThread(new Runnable() {             
                public void run() {                 
                    final AlertDialog alertDialog51;                    
                  alertDialog51 = new AlertDialog.Builder(Rig_ParkingActivity.this).create();
                    alertDialog51.setMessage(Html
                       .fromHtml("<font color='#00beb4'><b>Enter correct Email or Password</b></font>"));                                                                                                       
                    alertDialog51.setButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                int which) {                            
                        alertDialog51.dismiss();    
                               }
                         });            
                    alertDialog51.setButton2("Cancel", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int which) {
                                        alertDialog51.dismiss();                                                
                       }
                    });                         
                    alertDialog51.show();               
                }
            });     
        }

        return null; // don't interact with the ui! 
    } 

    @Override
    protected void onPostExecute(Void result)  
    {  
            if(!flag)
          {
           Intent intnt=new Intent(getBaseContext(), Tab.class);
          startActivity(intnt);
          }
            if (this.dialog.isShowing()) 
            { 
            this.dialog.dismiss(); 
            }
      } 
  } 
```

试试这段代码...有一个`boolean`名为**flag**的值并将其设置为 false。我刚刚使用它..你必须初始化它。

`onPostExecute()`将在 UI 线程中运行.. 如果您在`doInBackground()`方法中调用意图，它不会改变`UIThread`并且您看不到更改是我从您的代码中了解到的.. 检查这个

# objective-c - iPhone Xcode ARC 中的内存警告，但 Instrument 未显示任何泄漏

> ID：12985831
> 
> 赞同：-1
> 
> 时间：2012-10-20T06:18:24.713
> 
> 标签：objective-c, didreceivememorywarning

我已经使用 ARC Xcode 4.5 完成了我的应用程序的编码，但它给了我“收到内存警告。”。正因为如此，我没有上传它。

当我用仪器测试它时，它没有显示任何泄漏，但会发出内存不足的警告，并且在 4-5 次警告后应用程序终止。

我对评论中的某些观点有疑问。

```
@interface TemplateViewController : UIViewController 
{   
   NSMutableArray *arrNames;       // is this not need to write?
}

@property (nonatomic, retain) NSMutableArray *arrNames; // is in ARC retain replace by strong ?

@end 
```

或者也许还有其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:27:48.397

当您收到内存警告时，不一定是您的应用程序错误。如果出于任何原因，iphone 觉得它的内存不足，它会将此消息广播给所有正在运行的应用程序。

作为开发者，你有责任释放一些资源，让手机可以正常工作。

即使您在收到警告后没有做任何事情，其他应用程序也可能会释放一些资源，以便您的应用程序即使在收到警告后也能继续存在。在某个时间点，如果 iphone 仍然内存不足，它就必须终止所有正在运行的应用程序。

即使您的应用程序未运行，请检查是否发生同样的情况，如果是这样，罪魁祸首是其他应用程序。

# android - Logcat 随机不记录：Eclipse 4.2.0 和 android-sdk_r20.0.3-macosx

> ID：12985834
> 
> 赞同：0
> 
> 时间：2012-10-20T06:18:56.570
> 
> 标签：android, eclipse

一切都很好，直到我所做的只是更新我的 android 工具。有没有其他人经历`Logcat`过`Eclipse`随机不记录？如果您检查外壳`adb logcat`程序，一切都会正常记录，但无论出于何种原因`Eclipse logcat`，都会随机失败。这不是很可重现，但它经常发生，足以使开发更加困难。

作为测试，我做了：

```
onCreate() {
   Log.i("MyClass", "1");
   /// and kept incrementing the number to 20. 
```

它会在大约 30% 的时间里失败。

还有其他人遇到这种情况吗？我在 OSX 10.8.2 上运行最新的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:36:53.427

你确定你每次都调用这个活动吗？！我的意思是尝试在循环中记录一些东西，看看是否仍然存在问题。如果是，则尝试再次安装 eclipse

# objective-c - MWE 函数错误消息说“使用未声明的标识符”

> ID：12985840
> 
> 赞同：0
> 
> 时间：2012-10-20T00:32:29.693
> 
> 标签：objective-c

我不确定如何使用 Objective C 制作 MWE，所以如果您需要其他任何内容，请告诉我。

我正在尝试浏览有关构建 iPhone 应用程序的教程，但在定义函数时遇到了困难。我不断收到一条错误消息，说“使用未声明的标识符”。但是我相信我已经启动了这个功能。

在视图控制器中，我有：

```
if (scrollAmount > 0) {
    moveViewUp = YES;  
    [scrollTheView:YES];
}
else{ 
    moveViewUp = NO;
} 
```

与它下面的功能

```
- (void)scrollTheView:(BOOL)movedUp {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    CGRect rect = self.view.frame;
    if (movedUp){
        rect.origin.y -= scrollAmount;
    }
    else {
        rect.origin.y += scrollAmount;
    }
    self.view.frame = rect;
    [UIView commitAnimations];

} 
```

我已经在头文件（我已经导入）中启动了该功能。

```
- (void)scrollTheView:(BOOL)movedUp; 
```

# java - 0.0.0-SNAPSHOT 不支持 OpenNLP 模型版本 1.5.0

> ID：12985845
> 
> 赞同：0
> 
> 时间：2012-10-20T06:20:55.213
> 
> 标签：java, nlp, opennlp

我正在尝试使用 OpenNLP 尝试手册中的示例（第一次使用它）。

出于某种原因：

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import java.io.InputStream;

import opennlp.tools.sentdetect.SentenceDetectorME;
import opennlp.tools.sentdetect.SentenceModel;

public class Main {

/**
 * @param args
 */
public static void main(String[] args) {
    //-------------------------------------------------------------Check for input text file.
    if(args == null){
        System.out.print("hello");
    }

    //------------------------------------------------------------------Main algorithm
    else  {
        InputStream modelIn = null;

        SentenceModel model = null;

        try {
            modelIn = new FileInputStream("./src/train/en-sent.bin");
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }

        try {
            model = new SentenceModel(modelIn);
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        finally {
            if (modelIn != null) {
                try {
                    modelIn.close();
                }
                catch (IOException e) {
                }
            }

        }
        SentenceDetectorME sentenceDetector = new SentenceDetectorME(model);

        String sentences[] = sentenceDetector.sentDetect("  First sentence. Second sentence. ");

        System.out.print(sentences[0]);
    }

    }

} 
```

得到一个错误：

```
opennlp.tools.util.InvalidFormatException: Model version 1.5.0 is not supported by this (0.0.0-SNAPSHOT) version of OpenNLP!
at opennlp.tools.util.model.BaseModel.validateArtifactMap(BaseModel.java:235)
at opennlp.tools.sentdetect.SentenceModel.validateArtifactMap(SentenceModel.java:78)
at opennlp.tools.util.model.BaseModel.<init>(BaseModel.java:142)
at opennlp.tools.sentdetect.SentenceModel.<init>(SentenceModel.java:73)
at Main.main(Main.java:34) 
```

我一点也不知道为什么会发生这种情况......它[在这里](http://grokbase.com/t/opennlp/issues/11c1j7rx96/jira-created-opennlp-406-dev-version-0-0-0-snapshot-should-never-fail-model-loading)说 0.0.0-SNAPSHOT 版本的 OpenNLP 永远不会无法加载任何模型。

到目前为止，我无法找到有关此错误的任何其他信息。这可能是我对进口所做的事情？还是我正在使用的模型（我从 OpenNLP 网站下载的 --- 找不到任何其他版本）？无论如何，我不知道出了什么问题......

任何想法或帮助将不胜感激。

附加信息：我在 Ubuntu 12.04 上使用 OpenNLP 1.5.2 孵化和 1.5 模型（项目网站说它应该完全兼容）。而且我不确定这是否有任何意义，但我正在使用 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:06:57.487

一个这样的错误 ( `OPENNLP-406`) 仅*在* `1.5.2-incubating`. 但是您的问题可能是类路径问题。OpenNLP 从`opennlp.version`类路径中某处的文件中获取其版本。您可能没有或只有一个这样的文件，这会使 OpenNLP 感到困惑。

# php - 我们如何使用 jquery 以编程方式按下任何键盘键

> ID：12985847
> 
> 赞同：0
> 
> 时间：2012-10-20T06:21:52.980
> 
> 标签：php, jquery

> **可能重复：**
> [如何使用 JavaScript 捕获屏幕？](https://stackoverflow.com/questions/7618368/how-to-capture-the-screen-using-javascript)

我想在单击保存按钮时拍摄屏幕快照.. 有谁知道我如何使用 jquery 和 php 以编程方式按下键盘的 PrtScn 键 ..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:33:23.320

允许任何网站检索屏幕截图将是一个安全漏洞，因此绝对不允许这样做。但是，即使您可以强制浏览器按 Ctrl+PrtScn，它也是特定于操作系统的，并且您仍然无法在没有用户交互的情况下检索剪贴板的内容。

有一些`<canvas>`库可以帮助模拟您想要的内容，但是没有办法逐个像素地准确检索用户屏幕上打开的内容。

[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

> 此脚本允许您直接在用户浏览器上截取网页或其部分的“屏幕截图”。屏幕截图基于 DOM，因此可能不是 100% 准确到真实表示，因为它不会制作实际的屏幕截图，而是根据页面上可用的信息构建屏幕截图。

# php - 将数组转换为具有所有相同的键

> ID：12985856
> 
> 赞同：0
> 
> 时间：2012-10-20T06:23:15.007
> 
> 标签：php

我需要数组的所有键都相同。我知道他们不能用php，但我正在尝试将一个数组发送到soap。

我的数组看起来像这样。

```
array(     
[0] => Array
    (
        [SKU] => Special Day
        [Description] => Special Day
        [Quantity] => 3
    )

[1] => Array
    (
        [SKU] => The Legend Continues
        [Description] => The Legend Continues
        [Quantity] => 7
    )

[2] => Array
    (
        [SKU] => Blank Inside
        [Description] => Blank Inside
        [Quantity] => 1
    )
) 
```

我需要这个。

```
$auth = array(

'Shipment' => array(
  'Items' => array( 

      'Item'=> Array
       (
        [SKU] => Special Day
        [Description] => Special Day
        [Quantity] => 3
        )

       'Item' => Array
        (
        [SKU] => The Legend Continues
        [Description] => The Legend Continues
        [Quantity] => 7
        )

      'Item' => Array
       (
        [SKU] => Blank Inside
        [Description] => Blank Inside
        [Quantity] => 1
       )
   )
) 
```

我怎样才能把使数组变成我需要的循环？

我现在正在使用它来制作数组。

```
while (wpsc_have_cart_items()) : wpsc_the_cart_item(); 
    $items[] = array(
        'SKU' => wpsc_cart_item_name(),
        'Description' => wpsc_cart_item_name(),
        'Quantity' => wpsc_cart_item_quantity()
    );
endwhile; 
```

# ruby-on-rails - 在此控制器中过滤和排序帖子的最佳方式（Rails）

> ID：12985858
> 
> 赞同：1
> 
> 时间：2012-10-20T06:23:49.560
> 
> 标签：ruby-on-rails

我有一个`Post`带有`draft`柱子的模型。如果用户单击视图中的复选框，则帖子被选中`draft`

**架构.rb：**

```
create_table "posts", :force => true do |t|
    t.string   "title"
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at",                            :null => false
    t.datetime "updated_at",                            :null => false
    t.integer  "comments_count",     :default => 0,     :null => false
    t.string   "image_file_name"
    t.string   "image_content_type"
    t.integer  "image_file_size"
    t.datetime "image_updated_at"
    t.boolean  "published",          :default => false
    t.datetime "published_at"
    t.boolean  "draft",              :default => false
  end 
```

换句话说，它不被视为已发布：

**post.rb:**

```
 def publish_post
    unless self.draft == true
     self.published = true
     self.published_at = Time.now
    end
  end 
```

（我不确定让两列的含义完全相反是否是一种不好的做法，但它使“发布”模型中的回调更清晰。如果我错了，请纠正我）。

现在我想找到一种获取草稿和非草稿（已发布）帖子的方法。现在，我只知道如何按发布日期对它们进行排序。但我不知道如何用`draft == true`or过滤掉帖子`published == false`。

**post_controller.rb：**

```
 def index
    @posts = Posts.order('published_at DESC')
  end 
```

这样做的最佳方法是什么？

（顺便问一下，我应该使用`order`还是`order_by?`有什么区别？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:28:43.783

要仅获取不是草稿的帖子：

```
@posts = Posts.where(:draft => false).order('published_at DESC') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:34:18.967

您也可以使用 ActiveRecord 范围来执行此操作，这为您提供了一种更好的方式来查询所有草稿帖子：

```
class Post < ActiveRecord::Base
   #Create a scope for draft
   scope :draft, where(:draft => true)
end 
```

然后，在您的控制器中 - 您可以找到所有草稿帖子，如下所示：

```
Post.draft 
```

您可以在此处阅读有关范围的更多信息 [http://guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)

# asp.net - 使用 Lumisoft 从 Gmail IMAP 服务器读取邮件时出现异常

> ID：12985859
> 
> 赞同：0
> 
> 时间：2012-10-20T06:24:00.357
> 
> 标签：asp.net, imap, gmail-imap, lumisoft

我开发了从 Gmail IMAP 服务器读取邮件的 Web 应用程序，为此我使用了 Lumisoft.Net。

使用我的帐户一切正常，但使用我客户的帐户会抛出此错误：

```
System.Exception: Read length can't be bigger than source string !
   at LumiSoft.Net.IMAP.Client.IMAP_Client.Fetch(Boolean uid, IMAP_t_SeqSet seqSet, IMAP_t_Fetch_i[] items, EventHandler`1 callback)
   at GetOutput.Page_Load(Object sender, EventArgs e) 
```

我从以下代码中得到了这个异常

```
if (folder.FolderName.Contains("All Mail"))
{    
imap.SelectFolder(folder.FolderName);
    imap.Fetch(
                                    false,
                                    IMAP_t_SeqSet.Parse("1:*"),
                                    new IMAP_t_Fetch_i[]{
                                    new IMAP_t_Fetch_i_Envelope(),
                                    new IMAP_t_Fetch_i_Flags(),
                                    new IMAP_t_Fetch_i_InternalDate(),
                                    new IMAP_t_Fetch_i_Rfc822Size(),
                                    new IMAP_t_Fetch_i_Uid()
                                },
                                    this.m_pImap_Fetch_MessageItems_UntaggedResponseInbox
                                );
} 
```

因此，我遇到了很大的麻烦，所以请任何人都可以帮助我，那真的很棒。请帮我。

谢谢， 安维什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T17:49:48.537

```
m_pImap.SelectFolder(folder);
//m_pImap.Search(false, "UTF-8", "UNSEEN");

// Start fetching.
m_pImap.Fetch(
    false,
    IMAP_t_SeqSet.Parse("1:*"),
    new IMAP_t_Fetch_i[]{
        //new IMAP_Search_Key_Unseen(),
        new IMAP_t_Fetch_i_Envelope(),
        new IMAP_t_Fetch_i_Flags(),
        new IMAP_t_Fetch_i_InternalDate(),
        new IMAP_t_Fetch_i_Rfc822Size(),
        new IMAP_t_Fetch_i_Uid()
    },

    this.m_pImap_Fetch_MessageItems_UntaggedResponse
); 
```

# python - 金字塔的测试用例

> ID：12985860
> 
> 赞同：1
> 
> 时间：2012-10-20T06:24:11.040
> 
> 标签：python, pyramid, testcase

我的看法如下：

```
@view_config(name="clone-site", context=ctx.Site)
def clone_site(context, request):
"""Cloning the current Site.
"""

doc = context.__parent__.get_conn(app=context.appname).SiteDocument.one({'title':context.slug})
doc1 = context.__parent__.get_conn(app=context.appname).SiteDocument()
doc1['title'] = doc['title']+ '1'
doc1['slug'] = str(doc['slug'] + '1')
doc1.save()
for post in context.pages_data().find({'parent':context.__name__}):
    page = ctx.Page(parent=context)
    page1 = page.pages_data().PageDocument()
    page1['parent'] = page.__parent__.__name__=str(doc1['title'])
    page1['title'] = page.title=post['title']
    page1['slug'] = page.__name__=page.slug=str(post['slug'])
    page1['source'] = page.source= str(post['source'])
    page1['data'] = post['data']
    page1.save()

return HTTPFound(location=request.resource_url(context)) 
```

我为上述视图编写了一个测试用例：

```
def test_clone_site(self):
    from piano.views.sites import clone_site
    from piano.resources import contexts as ctx
    from piano.lib import base as b
    request = testing.DummyRequest(path='/sample/dhara')
    context = testing.DummyResource()        
    response = clone_site(context, request)
    self.assertEqual(response.location, 'http://localhost:8080/sample/dhara') 
```

我的资源树如下：

```
class Root(b.ContextBase):
"""The root segment is the entry-point into the context tree.  From the
root it will try to find an application, then the site, then any pages. The
only exception are services (/services) which can only be accessed from the 
the root.
"""
__acl__ = [ (Allow, Everyone, 'view'),
            (Allow, 'group:editors', 'edit') ]

def __init__(self, request):
    self.request = request

def __getitem__(self, key):
    # If /services return the service context
    if key == c.SRVC_NAME:
        return Service(key=key, parent=self)
    #Try and return an app context otherwise
    try:
        return self.app(key=key, parent=self)
    except:
        raise KeyError(key)

class Service(b.ContextBase):

pass
@implementer(i.IApp)
class App(b.ContextBase):

def __getitem__(self, key):
    try:
        return Site.find(key=key, parent=self)
    except:
        raise KeyError(key)

def get_sites(self):
    """Returns a list of sites under the application.
    """
    #@cache_region('hourly', 'site.list')
    def _find_sites(a):
        docs = self.get_conn(a).SiteDocument.find({}, {'title':1, 'slug':1})
        return list(SiteItem(s['title'], '/'.join([a, s['slug']])) for s in docs)
    #Get the list of available sites
    site_list = _find_sites(self.appname)
    return site_list

class Version(b.ContextBase):

def __getitem__(self, key):
    try:
        return self.finder(key, self.__parent__, versioned=True)
    except:
        raise KeyError(key)

def compare(self, source, target):
    """Compares two versions and returns the changes.
    """
    doc_source = self.finder(source, self.__parent__, versioned=True)
    doc_target = self.finder(target, self.__parent__, versioned=True)
    return diff(
        doc_source.data,
        doc_target.data)

def rollback(self, source, target):
    pass

class Page(b.ContextBase):

def __getitem__(self, key):
    try:
        if key == c.V:
            #Return a versioned instance of the page.  It finds the 
            #artifact by assigning its 'finder' function to the context.
            return Version(key=key, parent=self, finder=self.find)
        #Return the head page
        return Page.find(key=key, parent=self)
    except:
        raise KeyError(key)

@classmethod
def find(cls, key, parent, versioned=False):
    """Finds a page by its parent and slug or version.
    """
    #@cache_region('hourly', 'page.find')
    def _find_page(k, p, s, a, v):
        if v:
            return parent.history_data().one({'pageid': parent.id, 'version':int(k)})
        return parent.pages_data().one({'parent': p, 'slug':k})
    #Find the page
    doc = _find_page(key,
                     parent.__name__,
                     parent.sitename,
                     parent.appname,
                     versioned)
    return cls(
        key=key,
        parent=parent,
        id=doc['_id'],
        title=doc['title'],
        data=doc['data'],
        slug=doc['slug'],
        origin=doc['parent'],
        views=doc['views'],
        source=str(doc['source']),
        date_created=doc['created'])

def get_history(self):
    """Finds the history for the page.
    """
    docs = self.history_data().find({'pageid': self.id})
    return list((v['version'], v['archived'])  for v in docs)

def create(self, data):
    """Creates a new page and associates it to a parent.
    """
    doc = self.pages_data().PageDocument()
    doc['title'] = self.title = data['page']['title']
    doc['slug'] = self.slug = self.__name__ = str(h.urlify(self.title))
    doc['source'] = self.source = str(data['page']['source'])
    doc['parent'] = str(self.__parent__.__name__)
    #Try to import custom models and get doc
    try:
        #Explicitly look for a 'models' module with a 'PageModel' class
        mod = __import__('.'.join([self.source, c.MODEL_PATH]), fromlist=[self.source])
        pdoc = getattr(mod, c.MODEL_NAME)
    except ImportError:
        logger.warn("Cannot import '%s.models' module" % self.source)
    except AttributeError:
        logger.warn("Cannot load '%s.models.PageModel' class" % self.source)
    else:
        #Embed a new document
        doc['data'] = pdoc()
    doc.save()
    return self

def update(self, data, archive=True):
    """Update myself with data (and copy to the archives collection)
    """
    doc = self.pages_data().PageDocument.get_from_id(self.id)
    doc['title'] = self.title = data['page']['title']
    doc['slug'] = self.slug = self.__name__ = str(h.urlify(data['page']['slug']))
    doc['data'] = self.data = data['data']
    doc['version'] = doc['version'] + 1
    doc.save(validate=False)
    #Create archived version?
    if archive:
        ver = deepcopy(doc)
        ver['pageid'] = doc['_id']
        ver['archived'] = h.now()
        del(ver['_id'])
        self.history_data().insert(ver, validate=False)
    return self

@implementer(i.ISite)
class Site(Page):

def __getitem__(self, key):
    try:
        return Page.find(key, self)
    except:
        raise KeyError(key)

@classmethod
def find(cls, key, parent):
    """Returns a single site by its slug.
    """
    @cache_region('hourly', 'site.find')
    def _find_site(k, a):
        return parent.get_conn(app=a).SiteDocument.one({'slug':k})
    #Find the site
    doc = _find_site(key, parent.__name__)
    return cls(
        key=key,
        parent=parent,
        id=doc['_id'],
        title=doc['title'],
        slug=doc['slug'],
        views=doc['views'],
        date_created=doc['created'])

def save(self, data, include_default=False):
    """Saves the primary site details and creates a new collection to house 
    the pages in.  It also creates a default (Home) page if needed.
    """
    doc = self.get_conn(app=self.appname).SiteDocument()
    doc['title'] = self.title = data['site']['title']
    doc['slug'] = self.slug = self.__name__ = str(h.urlify(self.title))
    doc.save()
    #Create default (home) page?
    if include_default:
        page = Page(parent=self)
        page.create(dict(page=dict(title=u'Home', source='sample.home')))
    return self

def delete(self):
    """Deletes the site and its associated collection.
    """
    db = self.get_conn(app=self.appname)
    db.SiteDocument.get_from_id(self.id).delete()
    db.drop_collection(self.__name__) 
```

它正在生成以下错误：

```
ERROR: test_clone_site (piano.tests.MapperTests)    
Traceback (most recent call last):
File "D:\Auto\kjq-piano-6830d29\src\piano\tests\__init__.py", line 70, in test_clone_site
response = clone_site(context, request)
File "D:\Auto\kjq-piano-6830d29\src\piano\views\sites.py", line 62, in clone_site
doc=context.__parent__.get_conn(app=context.appname).SiteDocument.one({'title':context.slug})
AttributeError: 'NoneType' object has no attribute 'get_conn' 
```

我想检查 URL 返回对于正确的上下文是否正确。我无法设置正确的上下文。如何在测试用例的 clone_site(context, request) 调用中设置正确的上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:05:36.730

好吧，现在您的测试用例正在`testing.DummyResource()`用作上下文，它具有`__parent__ = None`，因此您会收到您所看到的错误。

要解决此问题，您需要使上下文看起来像您的视图所期望的那样。您可以通过将属性附加到它来做到这一点（您实际上是在模拟上下文）：

```
parent = testing.DummyResource()
parent.get_conn = # some function to get a connection
context.__parent__ = parent
context.app_name = 'some app name' 
```

或者您可以加载真实对象并传入真实上下文。

# java - 如何从 JComboBox 获取文本？

> ID：12985861
> 
> 赞同：1
> 
> 时间：2012-10-20T06:24:22.853
> 
> 标签：java, string, map, arraylist, jcombobox

我从 JComboBox 的选定位置获取文本时遇到问题。我尝试在扩展 Kodowanie.java 的类中使用 getSelectedItem 方法，但我得到空值，我不知道为什么。方法 (getSelectedItem) 在 Kodowanie 类中工作我可以轻松地从 JComboBox 获取文本。

**Kodowanie.java**

```
 public class Kodowanie {

        //Skladowe:
        ArrayList <String> qweqwe; 
        JComboBox inputCode = new JComboBox();  //HERE IS MY INPUT COMBOBOX
        JComboBox outputCode = new JComboBox();
        JTextArea input;
        JTextArea output;

    public void createGUI(){

        JFrame frame = new JFrame("Code");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        input  = new JTextArea(); 
        output = new JTextArea();

        qweqwe = new ArrayList<>();
        napelnijTalbiceCharsetami(qweqwe); //METHOD WHICH ADD ALL CHARSETS TO LIST

        inputCode = new JComboBox(qweqwe.toArray());
        outputCode = new JComboBox(qweqwe.toArray());

        JScrollPane scrollPaneInput = new JScrollPane(input, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        JScrollPane scrollPaneOutput = new JScrollPane(output, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);

        scrollPaneInput.setBorder(BorderFactory.createTitledBorder("Input Path"));
        scrollPaneOutput.setBorder(BorderFactory.createTitledBorder("Output Path"));

        inputCode.setPreferredSize(new Dimension(400,50));
        outputCode.setPreferredSize(new Dimension(400,50));

        scrollPaneInput.setPreferredSize(new Dimension(400, 100));
        scrollPaneOutput.setPreferredSize(new Dimension(400, 100));

        input.addKeyListener(new KeyAdapter() {
             public void keyPressed(KeyEvent evt){  
                    Strumieniowanie tmp;
                    if(evt.getKeyCode() == KeyEvent.VK_ENTER)
                    {
                        try {
                            tmp = new Strumieniowanie(input.getText(), output.getText());
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
        });

        frame.getContentPane().add(scrollPaneInput);
        frame.getContentPane().add(scrollPaneOutput);
        frame.getContentPane().add(inputCode);
        frame.getContentPane().add(outputCode);

        frame.setLayout(new  FlowLayout());
        frame.setPreferredSize(new Dimension(850, 220));
        frame.setVisible(true);
        frame.pack();

    }

    private ArrayList napelnijTalbiceCharsetami(ArrayList tmp){
        Map charSets = Charset.availableCharsets();
        Iterator iterator = charSets.keySet().iterator();
        while (iterator.hasNext()) {
            System.out.println(iterator.next().toString());
            tmp.add(iterator.next().toString());
        }
        return tmp;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Kodowanie l = new Kodowanie();
        l.createGUI();
    }

} 
```

**Strumieniowanie.java**

```
public class Strumieniowanie extends Kodowanie {

    protected boolean pathInputOk = false;
    protected boolean pathOutputOk = false;

public Strumieniowanie(String tmpInpute, String tmpOutput) throws IOException {

    File plikInput = new File(tmpInpute);
    File plikOutput = new File(tmpOutput);

    String inputText;
    inputText =  (String) inputCode.getSelectedItem(); //HERE I TRY TO GET STRING FROM JCOMBOBOX BUT IT IS ALWAYS NULL !
    System.out.println(inputText);

    pathInputOk = plikInput.isFile();
    pathOutputOk = plikOutput.isFile();

    System.out.println(pathInputOk);
    System.out.println(pathOutputOk);

    if (pathInputOk && pathOutputOk) {
        File nowyPlik = new File(tmpInpute);

        FileInputStream fis = new FileInputStream(nowyPlik);

        fis.close();

    }

}

protected boolean isItaPath(File plik) {
    boolean tmp = 

false;
        tmp = plik.isFile();

        return tmp;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T06:32:24.090

`KeyListener`不是要使用的适当事件侦听器，它在组合框更新其状态之前触发，最好使用[`ActionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html).

该`actionPerformed`事件将在组合框更新后触发，这将确保该`getSelectedItem`方法实际返回当前选定的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-21T08:43:09.393

以下方法可用于从`ComboBox`.

```
String s = (String)comboOne.getSelectedItem(); 
```

`comboOne`的变量名在哪里`ComboBox`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T10:42:44.147

作为参考，回答页面的标题：如何获取文本`JComboBox`？

```
((JTextComponent)combo.getEditor().getEditorComponent()).getText() 
```

它“有效”但不返回任何文本......废话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-27T09:11:03.173

您可以使用**KeyListener**但不是直接添加它，而是使用

```
comboBox.getEditor().getEditorComponent().addKeyListener(); 
```

这将确保监听器被添加到 JComboBox 的编辑器中

要从中获取文本，请使用：

```
comboBox.getEditor().getItem(); 
```

这将直接从编辑器中获取文本，您可以在 keyReleased 下方使用它在您键入时从编辑器中获取文本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-14T22:02:07.643

`combobox.getEditor().getItem().toString`为我工作。

您可以添加`documentListener`以监听输入的变化。

# spring - 如何限制每个用户只有一个会话并阻止后续登录尝试？

> ID：12985862
> 
> 赞同：4
> 
> 时间：2012-10-20T06:24:23.947
> 
> 标签：spring, spring-security

并发控制的默认行为是使原始会话过期。但是，我想阻止使用相同凭据登录的第二个用户，并显示消息“用户已登录”。我怎样才能做到这一点？

下面是spring-security.xml的配置：

```
<http auto-config="false" use-expressions="true">
    <intercept-url pattern="/login*" access="permitAll"
        requires-channel="https" />
    <intercept-url pattern="/userHasLoggedIn" access="permitAll"
        requires-channel="https" />
    <intercept-url pattern="/j_spring_security_*" access="permitAll"
        requires-channel="https" />
    <intercept-url pattern="/session*" access="permitAll"
        requires-channel="https" />
    <form-login login-page="/login" authentication-failure-url="/loginFailed" />
    <intercept-url pattern="/**" access="isAuthenticated()"
        requires-channel="https" />
    <session-management invalid-session-url="/sessionExpired" session-authentication-error-url="/loginAlready">
        <concurrency-control error-if-maximum-exceeded="false" expired-url="/userHasLoggedIn" max-sessions="1"/>
    </session-management>
    <logout delete-cookies="JSESSIONID" />
</http> 
```

**（更新）**我最终的春季安全配置：

```
<http auto-config="false" use-expressions="true">
        <intercept-url pattern="/login*" access="permitAll"
            requires-channel="https" />
        <form-login default-target-url="/home" login-page="/login" authentication-failure-url="/loginFailed" />
        <intercept-url pattern="/**" access="isFullyAuthenticated()"
            requires-channel="https" />
        <session-management session-authentication-error-url="/loginFailed">
            <concurrency-control expired-url="/loginFailed" error-if-maximum-exceeded="true" max-sessions="1"/>
        </session-management>
        <logout delete-cookies="JSESSIONID" />
    </http> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T08:40:57.700

解决方案[在文档中](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-concurrent-sessions)：

> 通常您希望阻止第二次登录，在这种情况下您可以使用
> 
> ```
> <http>
>   ...
>   <session-management>
>       <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
>   </session-management>
> </http> 
> ```
> 
> 第二次登录将被拒绝。`authentication-failure-url`通过“拒绝”，我们的意思是如果正在使用基于表单的登录，用户将被发送到。如果通过另一种非交互机制进行第二次身份验证，例如“记住我”，则会向客户端发送“未授权”（402）错误。相反，如果您想使用错误页面，则可以将属性添加`session-authentication-error-url`到 `session-management`元素。

所以基本上设置`error-if-maximum-exceeded`和`"true"`删除`expired-url`属性`<concurrency-control>`。

# android - 如何更改APK图标？

> ID：12985863
> 
> 赞同：6
> 
> 时间：2012-10-20T06:24:51.857
> 
> 标签：android, eclipse, icons, apk

我使用 Eclipse 编写 Android 应用程序。

当我将 apk 文件放入单元格时，APK 图标始终显示为框图标。

如何更改APK图标？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T06:26:55.970

转到清单文件，在应用程序标签中给出应用程序的图标，如下所示

```
android:icon="@drawable/ic_launcher" 
```

这里 ic_launcher 是我的应用程序图标，您可以根据需要提供任何图标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T06:28:40.060

在 Eclipse 的左侧，您可以看到 Project Explorer！打开你的项目在它的最后有一个名为 AndroidManifest.xml 的文件，只需打开它并选择应用程序选项卡，然后选择你的图标，不要忘记将你的应用程序图标 (*.png) 放在 Res >> drawable-hdpi

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T06:29:32.043

在您的清单文件中更改主要活动的启动器图标（启动器活动）更改图标

```
<application android:icon="@drawable/icon"> 
```

默认情况下，它需要 ic_launcher 将其更改为您的图标

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T06:27:17.423

检查 android manifest 文件，检查 android:icon 标签，并将其更改为新图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T06:43:29.643

1.  打开 AndroidManifest.xml
2.  变更申请`android:icon="@drawable/your_logeHere"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T06:30:24.943

将此包含在您的 android 清单文件 android:icon="@drawable/yourdrawable" 中。确保您的可绘制文件夹中有图像。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-20T06:27:40.407

`AndroidMenifest.xml`您可以在 Tag下更改文件中 APK 的图标。`Application`如下所述。

```
<application android:icon="@drawable/Your_App_Logo"> 
```

# ssas - 一个多维数据集是另一个多维数据集的源

> ID：12985867
> 
> 赞同：2
> 
> 时间：2012-10-20T06:25:59.817
> 
> 标签：ssas, business-intelligence, cube

我有一个类似的例子，比如下面的例子，我需要有人在这种情况下提出一个好的做法。

假设您有两个立方体，第一个是时间表立方体，您可以在其中找到员工在特定日期在项目上工作了多少小时。一个员工一天可以做很多项目，很多员工可以做一个项目。一些员工不从事项目，例如支持部门（如会计，ISD，HR ...等）下的员工，他们在那里写下小时*让我们说*“一般”。第二个立方体是 project_funder，它显示了资助者在项目中投入了多少钱。一个项目可以由多个资助者资助，一个资助者可以提供多个项目。

如何从第二个多维数据集获取项目和资助者之间的关系并在第一个多维数据集（时间表多维数据集）中使用它，以找到类似的内容：员工 emp1 在由资助者 1 和资助者 2 资助的项目 proj1 上工作了 8 小时？...我正在使用 SSAS 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T10:25:43.773

它并不以在大型数据集上具有良好的性能而闻名，但您是否阅读过 LOOKUPCUBE

[http://msdn.microsoft.com/en-us/library/ms144720.aspx](http://msdn.microsoft.com/en-us/library/ms144720.aspx)

```
Returns the value of a Multidimensional Expressions (MDX) expression 
evaluated over another specified cube in the same database. 
```

这是一个很好的例子：

```
WITH MEMBER [Measures].[Lookup Internet Order Count] AS    
LOOKUPCUBE("Mined Customers", "([Measures].[Internet Order Count], 
[Customer].[Customer Geography].[Country].&[" + 
[Customer].[Customer Geography].CurrentMember.Name + "])")

SELECT [Customer].[Customer Geography].[Country] ON COLUMNS,    
{
 [Measures].[Internet Sales Amount], 
 [Measures].[Lookup Internet Order Count]
} ON ROWS    
FROM [ADVENTURE WORKS] 
```

取自： http: [//www.bidn.com/blogs/DustinRyan/ssis/814/lookupcube-function-mdx-query-performance-test](http://www.bidn.com/blogs/DustinRyan/ssis/814/lookupcube-function-mdx-query-performance-test)

# c - 为 Project Euler # 23 优化我在 c 中的代码

> ID：12985870
> 
> 赞同：1
> 
> 时间：2012-10-20T06:26:25.630
> 
> 标签：c

我正在解决项目 euler 的[第 23 号问题。](http://projecteuler.net/problem=23)我使用了一个简单的逻辑，我得到了正确的答案，但是运行程序需要很长时间。

**有什么办法可以优化我的代码吗？**

我首先计算所有数字，这些数字是 2 个丰富数字的总和，然后从整个总和中减去它。

```
int factorsum(int);
int main()
{
    int i, j, s = 0, t, m;
    for (i = 24; i <= 28123; i++)   //sum of 2abundant nos start from 24
    {
        for (j = 12; j <= i / 2; j++) {
            t = factorsum(j);
            if (t > j) {
                m = i - j;
                t = factorsum(m);
                if (t > m) {
                    s = s + i;
                    break;
                }
            }
        }

    }
    j = 0;
    for (i = 1; i <= 28123; i++)
        j = j + i;
    printf("\n%d", (j - s));
    return 0;
}

int factorsum(int j)        //checking sum of factors
{
    int k, s = 0;
    for (k = 1; k <= (j / 2); k++) {
        if (j % k == 0) {
            s = s + k;
        }
    }
    return s;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T22:47:32.097

直接的大优化是预先计算除数和。目前，您正在`factorsum(j)`为`j = 12, ...`每个`i`. 如果您计算一次除数和并将它们存储在一个数组中，这将成为快速 ( `O(1)`) 查找而不是`O(j/2)`计算。

仅此一项就将我的盒子上的运行时间从三分半钟减少到一秒。

下一个改进将是使用更好的策略来计算除数和。您可以使用除数成对出现的事实来检查每个数字，而不是检查每个数字`j/2`是否相除（注意完美的平方，您只能将平方根相加一次）。`j``(d, j/d)``√j`

这将其缩短到 0.05 秒。

但是，如果您将总和存储在一个数组中，您可以通过颠倒逻辑做得更好，而不是一次考虑一个数字`n`并找到它的除数，而是考虑一个除数`d`并找到它的所有倍数 ( `k*d`)。这减少了计算从`O(limit^1.5)`（或者`O(limit^2)`如果你除以`j/2`）到的除数总和所需的时间`O(limit * log limit)`。（注意：由于给定了一个绝对限制，复杂性符号在这里并不严格适用，让我们假设您尝试找到不是两个丰富数字之和的数字，直到一个变量`limit`。）

这使它成为0.03秒。

# c - strcat 给出段错误

> ID：12985884
> 
> 赞同：0
> 
> 时间：2012-10-20T06:28:19.560
> 
> 标签：c

为什么会出现以下段错误？

我正在使用标准 c99，带有 unix 的 icc 编译器。我不能让它没有段错误，我很好奇为什么。我对 strcat/strcpy 不太熟悉。

```
char *first = "First";
char *second = "Second";
char *both = (char *)malloc(strlen(first) + strlen(second) + 2);

strcpy(both, first);
strcat(both, " ");
strcat(both, second);

sprintf("%s %s", first, second); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T06:30:30.153

```
sprintf("%s %s", first, second); 
```

的第一个参数`sprintf`是目标缓冲区。您已经给它一个常量字符串作为目标缓冲区。

如果你只是想打印一些东西，你的意思是`printf`？

否则，正确使用将类似于：

```
// declaration of "dest" left as exercise for the reader
//
sprintf(dest, "%s %s", first, second); 
```

虽然，`sprintf`已被 取代`snprintf`，但更好地避免缓冲区溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:33:28.207

sprintf 是“字符串 printf”，它打印到格式化的字符串。

sprintf 期望写入一个字符串目标指针（一个足够长度的可写缓冲区）。您传入的是一个 7 字节长的常量字符串文字。而且您正在尝试写入超过 7 个字节，这导致了段错误。

```
char *first = "First";
char *second = "Second";
char *both = (char *)malloc(strlen(first) + strlen(second) + 2);

strcpy(both, first); // unnecessary
strcat(both, " "); // unnecessary
strcat(both, second); //unnecessary

printf(both,"%s %s\0", first, second); 
```

# css - 是否有可能在同一个元素上有两个背景，一个在彼此之上？

> ID：12985890
> 
> 赞同：0
> 
> 时间：2012-10-20T06:28:48.780
> 
> 标签：css, background-image

有时身体比屏幕小，背景会被裁剪。这就是为什么我想将两个背景放在`<html>`元素中。我知道使用 CSS3 可以有一个元素有两个背景（一个在另一个之后），这样写：

```
background: url('/images/mosaic.gif') no-repeat, url('/images/photo.png') no-repeat; 
```

我的问题是，是否可以将 2 张图像放在一起？重复的马赛克和上面的照片不重复。我试过这样做，但不起作用：

```
background: url('/images/mosaic.gif') repeat, url('/images/photo.png') no-repeat; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:34:34.037

是的，这是可能的，而且正是你写的方式。 [请参阅此处以获取插图。](http://jsfiddle.net/qavPg/2/)

```
<div id='cont'></div>​

#cont { 
    background: url(http://lorempixel.com/400/200/food/1/) center center no-repeat,
        url(http://lorempixel.com/400/200/food/2/) repeat; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:49:54.853

您可以在顶部使用图像并在底部使用颜色，如下所示：

```
background:  URL(images/page_bg.jpg) top left repeat-x #7C8FF7; 
```

# javascript - 按下按钮启动和停止简单的时钟

> ID：12985893
> 
> 赞同：1
> 
> 时间：2012-10-20T06:29:53.183
> 
> 标签：javascript, jquery, html

我有一个简单的网页：

```
<html>
  <body>
    When button has value of "Start Clock" and button is pushed:
      <li>The clock information is shown in the textfield</li>
      <li>The value of the button changes to "Stop Clock"</li>
    When the button has the value "Stop Clock" and button is pushed
      <li>The clock information stops in the textfied</li>
      <li>The button value changes to "Start Clock"</li>

    <input type="text" id="clocktext"/>
    <input type="button" id="clockb" value="Start Clock"/> 

    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="scripts.js"></script>
  </body>
</html> 
```

我还有一个脚本文件：

```
function myclock() { 
    var date = new Date(); // Get the current date/time
    var hour = date.getHours(); // Save hours
    var min = date.getMinutes(); // Save minutes
    var sec = date.getSeconds(); // Save seconds
    formathour = format(hour); // Format hours
    formatmin = format(min); // Format minutes
    formatsec = format(sec); // Format seconds
    timeout = setTimeout("myclock()", 1000); 
}

function format(x) {
    if (x < 10) x = "0" + x;
    return x;
}

$("#clockb").click(function () {
    var c = setInterval(setTheTime(), 1000);
    if (this.value == "Start Clock") {
        $(this).prop('value', 'Stop Clock'); // Set button value to Stop Clock
    } else if (this.value == "Stop Clock") {
        $(this).prop('value', 'Start Clock');
            clearInterval(c);
    }
});

function setTheTime() {
    myclock();
    var curTime = formathour+":"+formatmin+":"+formatsec // Current time formatted
    $("#clocktext").prop('value', curTime);
} 
```

按下按钮时，我无法让时钟不断更新：/

我觉得我已经把这个复杂化了，而且非常烦人。

任何见解都会有所帮助，因为我对 jQuery 和 js 非常陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:43:27.033

你可以用这个。点击跨度

```
<span id="clock" style="background-color:#9CC;float:right" onclick="updateClock();">&nbsp;</span>
<script type="text/javascript">

function updateClock ( )
{
var currentTime = new Date ( );

var currentHours = currentTime.getHours ( );
var currentMinutes = currentTime.getMinutes ( );
var currentSeconds = currentTime.getSeconds ( );

// Pad the minutes and seconds with leading zeros, if required
currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;
currentSeconds = ( currentSeconds < 10 ? "0" : "" ) + currentSeconds;

  // Choose either "AM" or "PM" as appropriate
var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM";

  // Convert the hours component to 12-hour format if needed
currentHours = ( currentHours > 12 ) ? currentHours - 12 : currentHours;

// Convert an hours component of "0" to "12"
//currentHours = ( currentHours == 0 ) ? 12 : currentHours;

// Compose the string for display
var currentTimeString = currentHours + ":" + currentMinutes + ":" + currentSeconds + " "   + timeOfDay;

// Update the time display
document.getElementById("clock").firstChild.nodeValue = currentTimeString;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:43:38.710

我认为你错过了两件事之一：

*   要么你没有在你的 html 文件中包含 jquery lib
*   要么你没有把你的函数放在一个document.ready中。

你应该像这样包装你的两个函数：

```
$(document).ready(function() {
function setTheTime() {
    myclock();
    var curTime = formathour+":"+formatmin+":"+formatsec // Current time formatted
    $("#clocktext").prop('value', curTime);
}

$("#clockb").attr("onclick", "").click(function () {
    var c = setInterval(setTheTime(), 1000);
    if (this.value == "Start Clock") {
        $(this).prop('value', 'Stop Clock'); // Set button value to Stop Clock
    } else if (this.value == "Stop Clock") {
        $(this).prop('value', 'Start Clock');
            clearInterval(c);
    }
}); 
```

你可以在这里看到一个工作代码：http: [//jsfiddle.net/T47ME/](http://jsfiddle.net/T47ME/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:39:03.340

这是工作代码：http: [//jsfiddle.net/hUYZv/1/](http://jsfiddle.net/hUYZv/1/)

您的错误在于 setInterval 的使用不正确。它应该是：

```
var c = setInterval(setTheTime, 1000); 
```

您想提供对该函数的引用，而不是其执行结果（就像您编写的那样`setTheTime()`）；

# mysql - 如何在MySQL中查找按月或周分组的项目总数

> ID：12985894
> 
> 赞同：-1
> 
> 时间：2012-10-20T06:30:06.727
> 
> 标签：mysql, sql

我有以下 db 表，其中显示了错过的作业。

```
CREATE TABLE `missed_homework` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `studentid` int(10) NOT NULL,
  `subjectid` int(10) NOT NULL,
  `assignment_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `teacherid` int(10) NOT NULL,
  `date` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ... ;

INSERT INTO `missed_homework` (`id`, `studentid`, `subjectid`, `assignment_name`, `teacherid`, `date`) VALUES
(1, 29, 5, '5E', 20, '2012-10-18 13:58:40'),
(2, 15, 5, '32B', 20, '2012-10-18 13:59:54'),
(3, 29, 4, 'Q2A', 20, '2012-10-18 17:53:46'),
(4, 29, 11, '6E', 20, '2012-10-02 20:06:39'),
(5, 29, 11, 'C15', 20, '2012-10-16 20:06:30'),
(6, 15, 11, '7A', 20, '2012-09-19 20:08:05'),
(7, 29, 5, '3B', 20, '2012-09-14 20:08:12'),
(8, 29, 13, '6E', 32, '2012-10-18 20:23:46'),
(9, 29, 11, '7E', 18, '2012-10-20 14:35:14')...... 
```

我不确定如何执行以下操作。

1.  我想通过按月分组的 studentid=29 来查找错过的作业总数。
2.  与上述相同，但按周分组。

我尝试了以下操作，但它没有输出我想要的。

```
 $this->db->where('studentid',$id);
    $this->db->from('missed_homework');
    $this->db->group_by('date');
    $query=$this->db->get(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:39:40.243

我习惯于**[`DATE_FORMAT()`](http://davidwalsh.name/format-date-mysql-date_format)**获取月份的名称和每个日期的周数。

以下是您的答案`Question #1`

```
SELECT  studentID, 
        DATE_FORMAT(`date`, '%M') `month`,
        COUNT(studentID) totalMissed
FROM hw_homework
-- WHERE studentID = ''
GROUP BY studentID, DATE_FORMAT(`date`, '%M') 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/9e55e/1)

为了`Question #2`

```
SELECT  studentID, 
        DATE_FORMAT(`date`, '%U') `WeekNo`,
        COUNT(studentID) totalMissed
FROM hw_homework
-- WHERE studentID = ''
GROUP BY studentID, DATE_FORMAT(`date`, '%U') 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/9e55e/2)

# android - 从 Android 设备读取文件

> ID：12985895
> 
> 赞同：1
> 
> 时间：2012-10-20T06:30:08.623
> 
> 标签：android, file-upload

继续我之前的帖子，上传带有我尝试运行[的相对路径的文件](https://stackoverflow.com/questions/12968618/how-to-upload-file-with-relative-path)

```
url = '/mnt/sdcard/download/XYZ.txt';
File dir = Environment.getExternalStorageDirectory();
File f_path = new File(dir, url);
InputStream  fis = null;
fis = new BufferedInputStream(new FileInputStream(f_path)); 
```

但是当我从我的 Android 设备上运行它时会抛出错误。

```
java.io.FileNotFoundException: /mnt/sdcard/mnt/sdcard/download/XYZ.txt (No such file or directory) 
```

f_path 的输出是 '/mnt/sdcard/download/XYZ.txt'

问题出在哪里，如何解决？我可以观察到它正在将 mnt/sdcard 添加到 f_path。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T07:52:27.273

尝试使用该代码。

```
url = '/mnt/sdcard/download/XYZ.txt';
File f_path = new File(url);
InputStream  fis = null;
fis = new BufferedInputStream(new FileInputStream(f_path)); 
```

例外来了，因为 `Environment.getExternalStorageDirectory();`它自己给等于

```
/mnt/sdcard 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:39:04.083

在您的 url 变量上，仅使用相对路径：

`url = "/download/XYZ.txt"`

`/mnt/sdcard`意志来自你的`Environment.getExternalStorageDirectory();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:47:41.017

你必须这样做：

```
 File sdcard = Environment.getExternalStorageDirectory();
 File file = new File(sdcard, "/download/XYZ.txt"); 
```

这将自动获取您的文件..

之后，您可以按如下方式使用它：

```
InputStream  fis = null;
fis = new BufferedInputStream(new FileInputStream(file.getAbsolutePath())); 
```

这将完美地获得您的文件路径！

# java - 如何通过按DELETE键从jTable中删除一个单元格？

> ID：12985911
> 
> 赞同：6
> 
> 时间：2012-10-20T06:32:44.963
> 
> 标签：java, swing, jtable

我有如下代码。我想通过按删除键来删除单元格。我怎样才能做到这一点？而且我还想在该字段中添加删除按钮。

```
private static final long serialVersionUID = -250883760398754970L;
private final LinkedList<Product> list= new LinkedList<Product>();
    private final LinkedList<Boolean> checkList = new LinkedList<Boolean>();
    public void addItem(Product customer) {
    list.add(customer);
    checkList.add(false);
    fireTableDataChanged();

}
@Override
public int getColumnCount() {
        return 6;
}

@Override
public int getRowCount() {
    return list.size();

}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    Object obj = null;

    if(columnIndex==4)
       {
    setTotal(list.get(rowIndex));
    }
             switch (columnIndex){
        case 0: obj= list.get(rowIndex).getCode() ;break;
        case 1: obj=list.get(rowIndex).getDescription(); break;
        case 2: obj=list.get(rowIndex).getQuantity();break;
        case 3: obj=list.get(rowIndex).getPrice();break;            
        case 4: obj=list.get(rowIndex).getTotal();break;
    }
    return obj;
}
    @Override
public Class<?> getColumnClass(int arg0) {

    switch(arg0){
    case 0: case 1: return String.class; 
    case 2: return Integer.class; 
    case 3: case 4: return Double.class;
    }

    return super.getColumnClass(arg0);
}
@Override
public boolean isCellEditable(int arg0, int arg1) {
    boolean isCellEditable = false;
    switch(arg1){
    case 2: case 3: isCellEditable= true;break;
    default: isCellEditable= false;break;
    }
    return isCellEditable;
    //return super.isCellEditable(arg0, arg1);
}

@Override

public void setValueAt(Object arg0, int arg1, int arg2) {
    System.out.println("Value seted" +arg0 + arg1 + arg2);

    switch(arg2){
    case 0: break;
    case 1: break;
    case 2: list.get(arg1).setQuantity((Integer)arg0);             setTotal(list.get(arg1)); break;
    case 3: list.get(arg1).setPrice((Double)arg0); setTotal(list.get(arg1));break;          
    case 4: list.get(arg1).setTotal((Double)arg0);break;

       //case 0: checkList.set(arg1, (Boolean)arg0);break;
       default:break;
    }
    //list.get(arg1).setTotal((Double)arg0);
    fireTableDataChanged();
}

public LinkedList<Product> getList() {
    LinkedList<Product> temp = new LinkedList<Product>();
    int index=-1;
    for(Boolean isSelected:checkList){
        index++;
        if(isSelected){
            temp.add(list.get(index));
        }
    }
    return temp;
}

public void setTotal(Product product){
    Double total = 0.0d;
    total = product.getQuantity ()* product.getPrice();
    product.setTotal(total);

} 
```

这段代码可以吗？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T06:43:04.933

您需要将删除键绑定到表。

查看[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)以获取更多详细信息

```
InputMap inputMap = table.getInputMap(WHEN_FOCUSED);
ActionMap actionMap = table.getActionMap();

inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0), "delete");
actionMap.put("delete", new AbstractAction() {
    public void actionPerformed(ActionEvent evt) {
       // Note, you can use getSelectedRows() and/or getSelectedColumns
       // to get all the rows/columns that have being selected
       // and simply loop through them using the same method as
       // described below.
       // As is, it will only get the lead selection
       int row = table.getSelectedRow();
       int col = table.getSelectedColumn();
       if (row >= 0 && col >= 0) {
           row = table.convertRowIndexToModel(row);
           col = table.convertColumnIndexToModel(col);
           table.getModel().setValueAt(null, row, col);
       }
    }
}); 
```

这只是一个例子。只要您的表模型支持它，您就可以使用相同的想法删除一整行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T19:23:52.840

以下代码适用[`JTable`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)于处于`single selection`模式的 sorted 。感谢[MadProgrammer](https://stackoverflow.com/users/992484/madprogrammer)的键绑定。

```
table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

InputMap inputMap = table.getInputMap(WHEN_FOCUSED);
ActionMap actionMap = table.getActionMap();

String deleteAction = "delete";
inputMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_DELETE, 0),
        deleteAction);
actionMap.put(deleteAction, new AbstractAction()
{
    public void actionPerformed(ActionEvent deleteEvent)
    {
        if (table.getSelectedRow() != -1)
        {
            tableModel.removeRow(table.convertRowIndexToModel(table.getSelectedRow()));
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-04T23:29:30.120

上面示例中的最后一行应该是：

```
table.getModel().setValueAt(null, row, col); 
```

# ruby-on-rails - Rails，重构控制器

> ID：12985918
> 
> 赞同：0
> 
> 时间：2012-10-20T06:33:25.110
> 
> 标签：ruby-on-rails, ruby, refactoring

你能帮我重构和干燥吗？我没有想法。谢谢。

```
if request.xhr?
  render :json => {
    :status => true,
    :location => root_url + "/projects",
    :message => I18n.t("project.destroy")
  }
else
  flash[:notice] = I18n.t("project.destroy")
  redirect_to :action => :index
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T07:52:16.293

你能做的不多，但

```
message = I18n.t('project.destroy')

return render :json => {
         :status => true,
         :location => "#{root_url}/projects",
         :message => message
       } if request.xhr?

flash[:notice] = message
redirect_to :action => :index 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T08:51:15.513

好吧，您可以像这样覆盖 application_controller.rb 中的 redirect_to

```
def redirect_to(options={}, response_status={})
  if request.xhr?
    render :json => { :status => true, :location => options, :message => flash[:notice] }
  else
    super
  end
end 
```

然后继续使用

```
flash[:notice] = I18n.t('project.destroy')
redirect_to projects_path 
```

在您的控制器中。

# java - java中char的算术运算

> ID：12985926
> 
> 赞同：1
> 
> 时间：2012-10-20T06:34:31.650
> 
> 标签：java, compiler-errors

我正在学习Java。

我应该编写一个程序，将所有大写字母转换为小写字母，将所有小写字母转换为大写字母。它在书中说我只需要从大写中减去 32 并在小写中添加 32。

这是我的代码...

```
class Caseconv {
    public static void main(String args[])
        throws java.io.IOException {
            char ch;

            do {
            ch = (char) System.in.read();

            if (ch >= 97 & ch <= 122) ch = ch - 32;
            if (ch >= 65 & ch <= 90) ch = ch + 32;
            System.out.print(ch);
            } while (ch != '\n');
        }
} 
```

但是编译器不想这样做，我得到这个错误。

```
Caseconv.java:13: error: possible loss of precision
            if (ch >= 97 & ch <= 122) ch = ch - 32;
                                              ^
  required: char
  found:    int
Caseconv.java:14: error: possible loss of precision
            if (ch >= 65 & ch <= 90) ch = ch + 32;
                                             ^
  required: char
  found:    int
2 errors 
```

我应该怎么做才能从字符中减去？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T06:38:27.277

您需要添加类型转换以将表达式的结果转换为`char`. 例如。

```
ch = (char)(ch + 32) 
```

笔记：

1.  这是必要的原因是因为`32`它是一个`int`文字，并且 a`char`和 an的加法`int`是使用`int`算术执行的，并给出一个`int`结果。

2.  将 an 分配`int`给`char`可能会导致截断。添加类型转换有效地告诉编译器：*“是的。我知道。没关系。就去做吧。”*

3.  子表达式周围的括号`+`是必要的，因为类型转换的优先级高于`+`. 如果您将它们排除在外，则类型转换没有任何区别，因为它将 a “转换”`char`为 a `char`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T06:37:10.860

类型转换是必需的，试试这个代码：

```
if (ch >= 97 & ch <= 122)
    ch = (char) (ch - 32);
if (ch >= 65 & ch <= 90)
    ch = (char) (ch + 32); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T06:36:31.210

a和 an`arithmetic`之间的结果是 an并且你不能在没有 a 的情况下存储 an - 你告诉编译器`char``int``int``int``char``explicit typecasting``I know what I'm doing, now do it for me`

因此，您需要进行类型转换：-

```
 char ch = 'a';
    if (ch >= 97 & ch <= 122) {
       ch = (char)(ch - 32);
    } 
    System.out.println(ch);  // Prints `A` 
```

但是，您已经`method`在`Character`课堂上，这将为您做到：-

```
char ch = 'a';
ch = Character.toUpperCase(ch);
System.out.println(ch);  // Prints `A` 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T06:36:35.443

尝试

```
ch = (char) (ch + 32); 
```

如果您确定 ch + 32 不会比 char 可以容纳的大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T10:23:25.747

那是因为您试图为 char 分配一个 int 值（Ascii 值）。但是您需要将结果值显式转换为 int 为 char。只需将 int 转换为 char。

```
ch= (char) (ch+32);
ch= (char) (ch-32); 
```

它将在没有任何异常的情况下工作。

# image-processing - 通过在 javacv/opencv 中应用自适应阈值来提高质量？

> ID：12985928
> 
> 赞同：3
> 
> 时间：2012-10-20T06:34:37.003
> 
> 标签：image-processing, javacv, threshold

我试图通过将以下股权应用于输入图像来提高我的图像质量。

```
 CvSize sz = cvSize(img.width(), img.height());
        IplImage gry = cvCreateImage(sz, img.depth(), 1);
        cvCvtColor(img, gry, CV_BGR2GRAY);
        cvAdaptiveThreshold(gry, gry, 255, CV_ADAPTIVE_THRESH_MEAN_C, CV_THRESH_BINARY_INV, 5, 4); 
```

这是我的输入文件

![在此处输入图像描述](../Images/b390d101832e2affaa923fb1bd4e5995.png)

通过应用阈值，我需要将所有线条绘制为白色，将所有其他区域绘制为黑色，但在我的输出中有一些缺失的线条。那么请有人解释一下如何克服这个问题？

这是我应用高于阈值后的输出。

![在此处输入图像描述](../Images/327fa757fc9b00b65e5e28c9a8892f8a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:05:14.613

你应该做腐蚀（opencv中的cvErode（））然后膨胀（cvDilate（））以去除小斑点。希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T16:39:16.963

我希望你已经找到了答案，如果没有的话......在你的阈值之前尝试一些高斯模糊：

```
Mat image = imread("mX5h6.jpg", IMREAD_GRAYSCALE);
GaussianBlur(image, image, Size(3, 3), 0, 0);
adaptiveThreshold(image, image, 255, CV_ADAPTIVE_THRESH_MEAN_C, CV_THRESH_BINARY_INV, 5, 4);
imshow("image", image); 
```

# xcode - 为什么从命令行打开 Xcode 编译失败？

> ID：12985932
> 
> 赞同：2
> 
> 时间：2012-10-20T06:35:56.643
> 
> 标签：xcode

我得到这个构建错误

`i686-apple-darwin11-gcc-4.2.1: /Users/soheil/Library/Developer/Xcode/DerivedData/Get_iPlayer_GUI-fqsfzttzsuikevhdogsnxnjaddjn/Build/Intermediates/PrecompiledHeaders/Get_iPlayer GUI_Prefix-hggnypajoaggzffgvymocdlipqdj/Get_iPlayer GUI_Prefix.pch.dia: No such file or directory`

```
cc1obj：错误：无法识别的命令行选项“-Wno-implicit-atomic-properties”
cc1obj：错误：无法识别的命令行选项“-Wno-receiver-is-weak”
cc1obj：错误：无法识别的命令行选项“-Wno-deprecated-implementations”
cc1obj：错误：无法识别的命令行选项“-Wno-sign-conversion”
cc1obj：错误：无法识别的命令行选项“-fserialize-diagnostics”
命令 /usr/bin/gcc-4.2 失败，退出代码为 1
```

从命令行打开一些xcode项目时

```
open Get_iPlayer\ GUI.xcodeproj/ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T17:03:16.457

我遇到了同样的问题，对我来说，原因是我在 shell 启动文件中将 CC 环境变量设置为“gcc”。如下启动 Xcode 对我有用：

```
unset CC
open fast-dm.xcodeproj 
```

如果我只给出第二个命令，Xcode 中的编译将失败，错误消息与您看到的非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:47:45.800

试试这个：

```
open -a Xcode folder/project.xcode 
```

`-a`代表应用。**在这里，您使用应用程序Xcode**打开项目。

# cakephp - cakephp 保存相关的属于

> ID：12985933
> 
> 赞同：0
> 
> 时间：2012-10-20T06:35:58.290
> 
> 标签：cakephp, save

我在 Employee 和 Schedule 之间有很多关系。在编辑员工时，我设法获取当前的日程安排并填充我的表单。

保存后，我使用：

```
 if ($this->Employee->save($this->request->data)) {
            $this->Employee->Schedule->save($this->request->data, $validate = false);
            ....
        } 
```

员工数据保存良好，但日程记录保持不变。

我实际上将 id 作为数组的一部分提供。在我的控制器上， debug($this->request->data) 显示：

```
array(
'Employee' => array(
    'emp_position' => '1',
    'name' => 'the name',
    'emp_gender' => '1',
    'emp_father' => '',
    'emp_mother' => '',
    'emp_dob' => 'October 13, 1964',
    ...
    ..
),
'Schedule' => array(
    (int) 0 => array(
        'id' => '7',
        'ho_lu2' => '10:00',
        'ho_ma2' => '01:00',
        'ho_mi2' => '00:00',
        'ho_ju2' => '00:00',
        'ho_vi2' => '00:00',    
        'ho_do4' => '00:00'
    )
)
) 
```

.

```
***************** Update ************ 
```

我认为这与我的两张桌子上的外键不同有关

我的员工表：

```
CREATE TABLE IF NOT EXISTS `employees` (
  `id` int(5) DEFAULT NULL,
  `emp_appserial` int(5) unsigned NOT NULL AUTO_INCREMENT,
  ... 
```

（请注意，在 Employee 表上，emp_appserial 是我的 pk autoincr，对于某些记录，employee_id 可以为空）

我的日程表：

```
CREATE TABLE IF NOT EXISTS `schedules` (
  `id` int(5) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL,
  `employee_id` int(5) unsigned NOT NULL,
  ... 
```

由于我使用不同的字段链接了这些表，因此我使用了 foreignKey：

在我的模型上，我链接了：员工模型：

```
 var $hasMany = array(
            'Schedule' => array(
                'foreignKey' => 'employee_id',  //(field on Schedule)
                'dependent' => true
            )
        );

        public $primaryKey = 'emp_appserial' 
```

时间表模型：

```
var $belongsTo = array('Employee',
    'Employee' => array(
        'foreignKey' => 'emp_appserial'    //(field on Employee)
    )
); 
```

我发布的数据现在包括 schedule 的 employee_id 和 Employee 的 emp_appserial

```
array(
'Employee' => array(
    'id' => null,
    'emp_appserial' => '119'
    ...
),
'Schedule' => array(
    (int) 0 => array(
        'id' => '6',
        'name' => 'segundo horario',
        'emp_appserial' => '119',   
        'employee_id' => '119'
    )
)
) 
```

（尝试将 ID 和序列都附加到 Schedule 以试试我的运气 - 不好。）

非常感谢任何帮助。

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:54:21.443

“作为一项规则，当使用 hasOne、hasMany 和 belongsTo 关联时，所有这些都是关于键控的”——CakePHP 手册。

您的 Employee 数组必须传递一个 id 并且 schedule 数组需要有一个 employee_id 以便蛋糕知道链接模型是什么。

# python - 类方法中的函数可以访问方法中的所有局部变量吗？

> ID：12985934
> 
> 赞同：0
> 
> 时间：2012-10-20T06:36:15.643
> 
> 标签：python, function, methods

```
def method(self, *args):
   def function(*args):
      #can this access all method's variables, data, etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:52:51.617

是的，你可以，因为 python 在查找变量时遵循以下查找规则：

**腿**：

```
L:local
E:enclosing
G:global
B:built-in 
```

所以，在你的情况下，它是`E`：

**蟒蛇2.x**：

在 python 2.x 中，你不能在 func 中修改这些变量

```
class A:
    def meth(self):
        foo=1
        bar=2
        def func():
            foo=2     # if you place this statement below the print statement then you'll get
                      # UnboundLocalError: local variable 'foo' referenced before assignment
            print foo,bar
        func()    
        print (foo) #meth's foo is unchanged
a=A()
a.meth() 
```

**输出：**

```
2 2 
1 
```

python 3.x：用于`nonlocal`修改变量：

```
class A:
    def meth(self):
        foo=1
        bar=2
        def func():
            nonlocal foo,bar             
            print (foo,bar)
            foo=2               #changes meth's foo to 2
        func()    
        print (foo)
a=A()
a.meth() 
```

**输出：**

```
1 2
2 
```

# regex - 正则表达式 - 为什么 .* 匹配文件中的所有行？

> ID：12985939
> 
> 赞同：0
> 
> 时间：2012-10-20T06:36:40.587
> 
> 标签：regex

提前为这个问题的看似琐碎道歉。如此看来。字符匹配除行尾字符以外的任何字符，为什么运行*grep .* foo.bar 会*返回文件中的每一行？我会假设它只应该在到达行尾之前返回第一行，不匹配它并且conks out。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:39:50.917

grep 将每一行分别与给定的正则表达式匹配

# ruby-on-rails - form_for , 未定义的方法名

> ID：12985940
> 
> 赞同：1
> 
> 时间：2012-10-20T06:36:47.567
> 
> 标签：ruby-on-rails, ruby, form-for

我想在我的 rails 项目中添加一个评论模型，但在渲染页面中出现错误：

# 错误：

```
Showing /Users/sovanlandy/rails_projects/sample_app/app/views/shared/_comment_form.html.erb where line #4 raised:

undefined method `comment_content' for #<Comment:0x007fd0aa5335b8> 
```

. 以下是相关代码

# 评论.rb

```
class Comment < ActiveRecord::Base
attr_accessible :comment_content

belongs_to :user
belongs_to :micropost

validates :comment_content, presence: true
validates :user_id, presence: true
validates :micropost_id, presence: true  
end 
```

# 微博.rb

```
class Micropost < ActiveRecord::Base
attr_accessible :content
belongs_to :user
has_many :comments, dependent: :destroy
.....
end 
```

# 用户.rb

```
class User < ActiveRecord::Base
 has_many :microposts, dependent: :destroy
has_many :comments
....
end 
```

# 评论控制器.rb

```
class CommentsController < ApplicationController

 def create
@micropost = Micropost.find(params[:micropost_id])
@comment = @micropost.comments.build(params[:comment])
@comment.micropost = @micropost
@comment.user = current_user

if @comment.save
   flash[:success] = "Comment created!"z
   redirect_to current_user
else
  render 'shared/_comment_form'
end
end

end 
```

# _comment_form_html.erb 的一部分

```
<%= form_for([micropost, @comment]) do |f| %>
<%= render 'shared/error_messages', object: f.object %>
 <div class="field">
  <%= f.text_field :comment_content, place_holder: "Comment" %>
 </div>
  <button class="btn" type="submit">
   Create
 </button>
 <% end %> 
```

我从 _micropost.html.erb 类中调用了 patial _comment_form.html.erb

```
 <%= render 'shared/comment_form', micropost: micropost %> 
```

我还将注释作为嵌套资源放入 route.rb

```
 resources :microposts do
    resources :comments
  end 
```

如何解决错误？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T12:40:10.100

您是否为 Comment a run it 创建了相应的迁移？该错误表示它正在尝试访问不存在的方法。这意味着您写错了字段的名称，或者您没有运行将该字段添加到模型的迁移。你能从 schema.rb 复制评论表的部分吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:00:20.780

`micropost.rb`在你的写作中试试这个

```
class Micropost < ActiveRecord::Base
  ...
  has_many :comments, dependent: :destroy
  accepts_nested_attributes_for :comments
  attr_accessible :comments_attributes
  ...
end 
```

在你的`_comment_form.html.erb`

```
<%= form_for @micropost do |f| %>
  <%= f.fields_for :comments do |comment| %>
      ...
      <div class="field>
          <%= comment.text_field :comment_content, place_holder: "Comment" %>
      </div>
      ...
  <% end %>
  <%= f.submit%>
<% end %> 
```

# tinymce - Tiny MCE inlinepopup 不生成其模板

> ID：12985944
> 
> 赞同：1
> 
> 时间：2012-10-20T06:37:19.160
> 
> 标签：tinymce

我真的很想知道微型 MCE。我试图谷歌搜索，但一无所获。问题是关于 inlinepopup 对话框。例如，当您单击图像按钮时，它将打开 oopup 窗口。

问题是，当我直接从文件（不是通过 http）运行它时，弹出窗口有很好的框架，我可以在右上角看到标题和关闭图标。在这个例子中，我直接访问：file://localhost/D:/wamp/www/wysiwyg/tinymce_elfinder/examples/custom_formats.html

但是，使用相同的文件，当我从 htto 访问微型 MCE 时，框架消失了。我通过以下方式访问：。它使弹出标题无法显示，因为它具有白色和关闭图标也不会出现。我可以通过移动鼠标关闭 thedow，直到到达右上角的关闭图标。

为了清楚起见，您可以在此处查看我附加的屏幕截图。 [http://wiliatno.com/tinymce.jpg](http://wiliatno.com/tinymce.jpg)

编号为 1 的图像是当我通过 http 访问时 编号为 2 的图像是通过直接文件路径访问。

禁用 inliepopup 插件不是出路，因为我不想使用可以被弹出窗口阻止程序阻止的常规弹出窗口。

看看这里[http://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php) 并尝试单击图像图标、html 图标或任何会显示内联弹出窗口的东西。当 inlinepopups 显示时，它不会在 /plugin/inlinepopups/ 文件夹中生成 templates.html。因此，您无法在该内联弹出窗口中看到标题和关闭按钮。在右上角，尝试慢慢移动鼠标，直到它变为手形，您可以从那里关闭内联弹出窗口。但是关闭图标没有显示清楚，因为 tinymce 没有正确生成 template.html 的内联弹出窗口。

但是，如果你直接从硬盘打开tinymce，而不是使用http，即使tinymce 发出安全警报，也可以完美地生成内联弹出窗口的templates.html（就像我在第一篇带有屏幕截图的帖子中显示的那样）。

那么，tinymce 有什么问题呢？为什么 tinymce 提供 inlinepopups 插件，但无法在 plugin/inlinepopups 内正确生成 template.html？

请帮我。谢谢。

# javascript - 需要在 set Interval 中使用快速排序逻辑的答案

> ID：12985948
> 
> 赞同：3
> 
> 时间：2012-10-20T06:38:28.510
> 
> 标签：javascript

大家好，我为快速排序程序尝试了这个逻辑。但是我需要将此代码转换为设置间隔模式，并且需要逐步覆盖整个过程。请帮助我将此逻辑改进为 setinterval Program 。我认为目前它处于递归模式。

```
function quicksort(arr)
{
    if (arr.length == 0)
        return [];

    var left = new Array();
    var right = new Array();
    var pivot = arr[0];

    for (var i = 1; i < arr.length; i++) {
        if (arr[i] < pivot) {
           left.push(arr[i]);
        } else {
           right.push(arr[i]);
        }
    }

    return quicksort(left).concat(pivot, quicksort(right));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:05:27.623

您可以先将快速排序转换为非递归格式（迭代快速排序），然后使用 setInterval 替换 for 循环，从而将原始快速排序转换为“setInterval 模式”。

[这是来自Stoimen 博客](http://www.stoimen.com/blog/2010/06/18/friday-algorithms-iterative-quicksort/)的迭代快速排序（我相信您原来的递归快速排序[来自同一来源](http://www.stoimen.com/blog/2010/06/11/friday-algorithms-quicksort-difference-between-php-and-javascript/)）。请注意，我对其进行了轻微修改，以便它使用延续传递样式的回调，而不是`return`：

```
function qsort(arr, ret)
{
    var stack = [arr];
    var sorted = [];

    while (stack.length) {

        var temp = stack.pop(), tl = temp.length;

        if (tl == 1) {
            sorted.push(temp[0]);
            continue;
        }
        var pivot = temp[0];
        var left = [], right = [];

        for (var i = 1; i < tl; i++) {
            if (temp[i] < pivot) {
                left.push(temp[i]);
            } else {
                right.push(temp[i]);
            }
        }

        left.push(pivot);

        if (right.length)
            stack.push(right);
        if (left.length)
            stack.push(left);

    }

    ret(sorted);
} 
```

您可以通过这种方式调用该函数（例如）：

`qsort([3,7,1,4,2,5], function(sortedarray) { console.log(sortedarray); });`

现在要将这个迭代快速排序转换为“setInterval 模式”，您可以将函数中的 for 循环替换为对 setInterval 的调用（类似于[此 Stackoverflow 帖子](https://stackoverflow.com/questions/9323685/can-you-use-setinterval-to-call-functions-asynchronously)）。

这是使用的快速排序的最终版本`setInterval`：

```
function qsort(arr, ret)
{
    var stack = [arr];
    var sorted = [];
    var intervalId = 0;

    intervalId = setInterval(function() {
        if (stack.length) { 
            var temp = stack.pop(), tl = temp.length;

            if (tl == 1) {
                sorted.push(temp[0]);
                return;
            }
            var pivot = temp[0];
            var left = [], right = [];

            for (var i = 1; i < tl; i++) {
                if (temp[i] < pivot) {
                    left.push(temp[i]);
                } else {
                    right.push(temp[i]);
                }
            }

            left.push(pivot);

            if (right.length)
                stack.push(right);
            if (left.length)
                stack.push(left);           
        } 
        else if (sorted.length == arr.length) {
            clearInterval(intervalId);
            ret(sorted);
        }
    }, 0);      
} 
```

这里发生的是原始数组的片段被添加到堆栈中（这是分区步骤），然后单独排序。在每次`setInterval`调用时，您都在对数组的不同部分进行排序（在原始递归快速排序中，每个快速排序调用都在处理数组的不同部分）。`setInterval`请注意，一旦排序后的数组与原始数组大小相同，我们就会停止排序（也就是说，我们告诉停止调用）。那是我们调用`ret`回调的时候。

# image-processing - 在 SIMD 中矢量化直方图的方法？

> ID：12985949
> 
> 赞同：16
> 
> 时间：2012-10-20T06:38:37.343
> 
> 标签：image-processing, arm, histogram, simd, neon

我正在尝试在 Neon 中实现直方图。是否可以矢量化？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T07:29:03.977

不幸的是，直方图几乎不可能矢量化。

但是，您可能可以稍微优化标量代码 - 一个常见的技巧是使用两个直方图，然后在最后将它们组合起来。这允许您重叠加载/增量/存储，从而隐藏一些串行依赖项和相关的延迟。伪代码：

```
init histogram 1 to all 0s
init histogram 2 to all 0s
loop
  get input value 1
  get input value 2
  load count for value 1 from histogram 1
  load count for value 2 from histogram 2
  increment count for histogram 1
  increment count for histogram 2
  store count for value 1 to histogram 1
  store count for value 2 to histogram 2
until done
combine histogram 1 and histogram 2 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-15T10:39:25.777

ermig1979 有一个 Simd 项目，该项目展示了他如何使用与@Paul-R 提到的类似方法以及 SSE2 和 AVX2 变体来完成直方图：

项目：[https ://github.com/ermig1979/Simd](https://github.com/ermig1979/Simd)

基础文件：[https ://github.com/ermig1979/Simd/blob/master/src/Simd/SimdBaseHistogram.cpp](https://github.com/ermig1979/Simd/blob/master/src/Simd/SimdBaseHistogram.cpp)

在这里可以看到一个 AVX2 实现： [https ://github.com/ermig1979/Simd/blob/master/src/Simd/SimdAvx2Histogram.cpp](https://github.com/ermig1979/Simd/blob/master/src/Simd/SimdAvx2Histogram.cpp)

下面可以看到一个标量解决方案，以说明创建多个最后求和的直方图的基本原理：

```
void Histogram(const uint8_t * src, size_t width, size_t height, size_t stride, 
    uint32_t * histogram)
{
    uint32_t histograms[4][HISTOGRAM_SIZE];
    memset(histograms, 0, sizeof(uint32_t)*HISTOGRAM_SIZE*4);
    size_t alignedWidth = Simd::AlignLo(width, 4);
    for(size_t row = 0; row < height; ++row)
    {
        size_t col = 0;
        for(; col < alignedWidth; col += 4)
        {
            ++histograms[0][src[col + 0]];
            ++histograms[1][src[col + 1]];
            ++histograms[2][src[col + 2]];
            ++histograms[3][src[col + 3]];
        }
        for(; col < width; ++col)
            ++histograms[0][src[col + 0]];

        src += stride;
    }

    for(size_t i = 0; i < HISTOGRAM_SIZE; ++i)
        histogram[i] = histograms[0][i] + histograms[1][i] + 
            histograms[2][i] + histograms[3][i];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-11T18:00:27.917

@Paul-R，此链接上有一些论文讨论了如何向量化直方图函数：

[直方图函数的 SIMD 矢量化](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.80.9041&rep=rep1&type=pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-03T17:58:12.450

一些处理直方图的图像处理算法（例如均衡、直方图匹配）可以使用已知的百分位数进行工作——对于近似值，可以有效地将搜索并行化到初始范围（0、25、50、75、100%），消耗 4 个累加器。

输入流中的每一项都必须与所有插槽并行进行比较，从而增加频率。经过一定数量的轮次后（例如，n*255 轮次保证 uint8_t 数据类型没有溢出，然后将这些累加到 uint16_t），每个槽的最小/最大限制基于线性插值重新计算。当然，可以根据新数据对百分位数估计值的改变程度的估计来重新运行序列。

该算法将是评估顺序的变体，可以通过随机采样和多次传递来缓解。

# ruby-on-rails - 如何索引标签组合？

> ID：12985950
> 
> 赞同：0
> 
> 时间：2012-10-20T06:38:53.323
> 
> 标签：ruby-on-rails, database, sqlite

在我的项目中：

*   一个帖子有很多标签。
*   根据标签组合，帖子被放置在适当的类别中。例如，仅带有#politics 标签的帖子将转到“General Politics”部分，带有标签#politics 和#global 的帖子将转到“Global Politics”部分
*   表“类别”存储类别和那些将接受的标签组合。
*   这些标签不是帖子包含的唯一标签。

**我的问题是：**存储和索引标签的最佳（和经济）方法是什么，以便系统也可以轻松获取标签组合。目前，我将标签作为数组存储在“posts”表中的“tags”列中。

该项目基于 RoR 3.2 和 sqlite3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T08:09:47.303

使用`acts_as_taggable_on`gem，您可以使用多个标签轻松查询对象：

```
matching_categories = @post.find_related_tags_for(Category) 
```

结果列表按匹配数量递减排序，可能第一个是您要分配给帖子的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T10:23:11.287

完成此操作的最简单且可能最快的方法是`searchkick`在**Posts**模型上使用，然后在搜索数据中包含一个帖子被标记的标签列表。

1.  下载并安装[弹性搜索](http://www.elasticsearch.org/overview/marvel/download/)。您需要安装 jdk 才能正常工作。
2.  安装[seackick](https://github.com/ankane/searchkick) gem。
3.  将此添加到您的`post`模型中：

    ```
    class Post<<ActiveRecord::Base

     attr_accessible :title , :body         
     has_many :tags
     searchkick

    def search_data
      attributes.merge(tags: self.tags.map(&:name))
    end 
    ```

    假设您有另一个`tag`具有 :name 属性的模型

4.  要对标签组合执行查询，只需执行以下操作：

    ```
    Post.search("tag1,tag2",fields:[:tags]) 
    ```

    These queries are pretty fast, and one may confidently incorporate this logic for purpose of building a navigation structure.

Also see: [Searckick Facets](https://github.com/ankane/searchkick#facets)

# java - 如何使用swing选择文件并将该文件作为字符串传递给方法？

> ID：12985951
> 
> 赞同：0
> 
> 时间：2012-10-20T06:38:59.573
> 
> 标签：java, swing, file

我有一个摇摆代码。我将在其中选择一个文件，并将该文件作为字符串传递给方法。怎么做？请给我一个简单的解决方案。这段代码应该在java中

好的，我得到了答案，只需按照这个答案

[在 Java GUI](https://stackoverflow.com/questions/13667041/reading-a-txt-file-in-a-java) gui/13667222#13667222中读取 txt 文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T06:42:30.583

请阅读有关[文件选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)的信息。它们易于使用和重复使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:54:05.717

这取决于，你想要文件名还是整个路径......

[`File#getName()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getName%28%29)将只返回文件名，没有路径 as[`File#getPath()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getPath%28%29)将返回路径和名称

十秒钟阅读 API 文档会给你答案；）

# ruby - 无法通过 bundler 安装 gems，heroku push 被拒绝

> ID：12985954
> 
> 赞同：2
> 
> 时间：2012-10-20T06:39:11.600
> 
> 标签：ruby, heroku, rubygems, sinatra, bundler

我已经尝试更新捆绑器并安装它，但它仍然失败。我已经浏览了我能找到的关于这个主题的所有内容，但它并没有解决问题。

宝石文件：

```
source 'http://isitup.org/rubygems.org'
gem 'sinatra', '1.3.3'
gem 'thin'
gem 'warden'
gem 'bcrypt-ruby'

group :production do
  gem 'pg'
end

group :development, :test do
  gem 'sqlite3'
end 
```

这就是我运行 git push heroku master 时发生的情况

```
Counting objects: 14, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (11/11), done.
Writing objects: 100% (11/11), 1.11 KiB, done.
Total 11 (delta 7), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rack app detected
-----> Installing dependencies using Bundler version 1.2.1
   Running: bundle install --without development:test --path vendor/bundle --binstubs                            bin/ --deployment
   You are trying to install in deployment mode after changing
   your Gemfile. Run `bundle install` elsewhere and add the
   updated Gemfile.lock to version control.
   You have added to the Gemfile:
   * warden
   * bcrypt-ruby
   * pg
   * sqlite3
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rack app

To git@heroku.com:aqueous-wildwood-3092.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:aqueous-wildwood-3092.git' 
```

谢谢。

编辑：使用时出错`bundle install`

```
 Fetching gem metadata from http://isitup.org/rubygems.org/.
    Error TypeError during request to dependency API
    Fetching full source index from http://isitup.org/rubygems.org/
    Unfortunately, a fatal error has occurred. Please see the Bundler 
    troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
    /usr/lib/ruby/1.9.1/rubygems.rb:540:in `initialize': not in gzip format         (Zlib::GzipFile::Error)
        from /usr/lib/ruby/1.9.1/rubygems.rb:540:in `new'
        from /usr/lib/ruby/1.9.1/rubygems.rb:540:in `gunzip'
        from /usr/lib/ruby/1.9.1/rubygems/remote_fetcher.rb:239:in `fetch_path'
        from /usr/lib/ruby/1.9.1/rubygems/spec_fetcher.rb:265:in `load_specs'
        from /usr/lib/ruby/1.9.1/rubygems/spec_fetcher.rb:231:in `block in list'
        from /usr/lib/ruby/1.9.1/rubygems/spec_fetcher.rb:227:in `each'
        from /usr/lib/ruby/1.9.1/rubygems/spec_fetcher.rb:227:in `list'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/fetcher.rb:216:in `fetch_all_remote_specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/fetcher.rb:89:in `rescue in specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/fetcher.rb:72:in `specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb:234:in `block in remote_specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `each'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb:232:in `remote_specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb:165:in `fetch_specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/source.rb:70:in `specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb:191:in `block (2 levels) in index'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb:188:in `each'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb:188:in `block in index'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/index.rb:9:in `build'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb:184:in `index'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb:178:in `resolve'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb:113:in `specs'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/definition.rb:108:in `resolve_remotely!'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/installer.rb:81:in `run'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/installer.rb:14:in `install'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/cli.rb:230:in `install'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/vendor/thor/task.rb:27:in `run'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/vendor/thor.rb:275:in `dispatch'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/vendor/thor/base.rb:408:in `start'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/bin/bundle:14:in `block in <top (required)>'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
        from /var/lib/gems/1.9.1/gems/bundler-1.2.1/bin/bundle:14:in `<top (required)>'
    from /usr/local/bin/bundle:19:in `load'
    from /usr/local/bin/bundle:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:42:42.430

你试过`bundle install`在push之前做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T07:03:43.410

您对 Gemfile 所做的最新更改不会更新您的 Gemfile.lock。

首先尝试在本地机器上运行捆绑安装，这将更新您的 Gemfile.lock，然后尝试将代码推送到 heroku

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:35:02.947

问题是当前[http://rubygems.org](http://rubygems.org)已关闭。检查[http://status.rubygems.org/](http://status.rubygems.org/)

Bundler 检查那里的依赖关系，如果它无法得到答案，它将随后失败。rubygems 的人正在调查这个问题。

# c# - 在 c# 中使用 cygwin 从 c 源代码编译的 dll，在 socket() 、 fork() 和类似内容上出现错误读写保护内存

> ID：12985955
> 
> 赞同：4
> 
> 时间：2012-10-20T06:39:21.513
> 
> 标签：c#, c, sockets, dll, cygwin

我有一个用 C 编写的源代码，它使用了很多套接字发送者和侦听器调用，然后是几个操作函数。套接字是多播和单播。

很多读写操作都发生在它上面。我使用 cygwin 编译它，生成了一个 exe，它在所有 Windows 变体上都能正常工作。同时，当我从中生成一个 dll 并尝试通过 DLLimport 在 C# 中使用它时，它可以正常工作，直到它到达以下行

```
if((sendFd = socket(AF_INET,SOCK_DGRAM,0)) < 0) 
```

Visual Studio 报错：

```
Attempt to read write protected memory, or other memory is corrupt. 
```

没有所有套接字的东西或 fork() 它可以很好地执行基本操作，例如字符串操作等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:19:53.260

如果我对您的理解正确，那么您正在尝试`[DllImport]`使用 Cygwin 在 .NET 程序集中编译的本机库？

好吧，这是灾难的秘诀：

您正试图在同一应用程序中使用两个不同的 C 运行时库。Cygwin 提供了自己的各种系统功能实现，它不仅仅是相应 Windows API 的包装器。这里有几件事可能出错：

1.  可执行文件包含一些在调用`main()`. 此代码由编译器自动生成并初始化 C 运行时。您可以通过 P/Invoking DLL 绕过该代码。
2.  Cygwin 使用它自己的套接字代码，它需要进行一些低级系统调用来与网卡进行交互——并且由于 Cygwin 使用它自己的实现，它在 Windows 运行时的背后执行此操作。

如果您想在 .NET 应用程序中使用的本机 DLL 中使用套接字，您需要使用 Winsocks 并使用 Microsoft 的编译器对其进行编译，因此它与本机 Windows 库链接。

例如，您可以为此使用 Visual Studio 2012 Express for Desktop。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-02T12:52:33.353

我实现了一个与 cygwin 兼容的 dotnet 加载器。你可以在这里找到它：[https ://github.com/smx-smx/EzDotnet](https://github.com/smx-smx/EzDotnet)

为了能够从 .NET 使用 Cygwin（没有任何崩溃），入口点**必须**是 Cygwin 应用程序，在 cygwin 下编译和链接。

我添加了一个 cygwin 示例，该示例演示了 P/Invoke 的使用以及`read(2)`将`write(2)`C# stdin/stdout 重定向到 cygwin（否则它将不可见）

> ./samples/cli/ezdotnet.exe ./CoreCLR/cygcoreclrhost.dll ./samples/Managed/Cygwin/bin/Debug/net5.0/Cygwin.dll ManagedSample.EntryPoint 条目

# php - PHP MySQL选择查询多个表

> ID：12985959
> 
> 赞同：0
> 
> 时间：2012-10-20T06:39:47.623
> 
> 标签：php, mysql, select, join

这可能吗？如果是这样，我如何构建我的 SELECT 语句以实现这些结果？

我正在从 MySQL 数据库获取各种行的 PHP 文件中创建一个 HTML 表。这是我的查询：

```
 // Define the query:
     $query = "SELECT b.birdID, b.nameGeneral, b.nameSpecific, 
               b.genus, b.species, b.family, b.populationTrend, f.food, h.habitat 
               FROM bird_habitat AS bh 
               JOIN bird_food AS bf ON (bf.birdID_FK = bh.birdID_FK) 
               JOIN food AS f ON (f.foodID = bf.foodID_FK) 
               JOIN habitat AS h ON (h.habitatID = bh.habitatID_FK) 
               JOIN birds AS b ON (b.birdID = bh.birdID_FK AND b.birdID = bf.birdID_FK) 
               ORDER BY b.birdID ASC"; 
```

问题在于bird_habitat 和bird_food 表。每只鸟可以吃 2 种不同的食物，也可以生活在 2 个不同的栖息地。例如，黑鹂可以吃种子和昆虫，生活在沼泽和田野中。当我运行 SELECT 语句时，每只鸟得到 4 个结果，而我只想得到 2 个结果。使用 blackbird 示例，我返回了这些行：

```
**Bird**  **Food**       **Habitat**
    1       Seeds          Marsh
    1       Insects        Marsh
    1       Seeds          Field
    1       Insects        Field 
```

我想要返回的是：

```
**Bird #**  **Food**       **Habitat**
    1         Seeds          Marsh
    1         Insects        Field 
```

所以基本上，我想归还每只鸟可以吃的独特食物和它们可以生活的独特栖息地，而不会重复多余的田野。这可能吗？如果是这样，我如何构建我的 SELECT 语句以实现这些结果？

如果您想查看从上面的 SELECT 查询返回的内容，这是一个指向显示 HTML 表的页面的链接，以便您可以更好地了解我正在尝试做什么：

[http://www.jasonkmccoy.com/AB-Tech/web250/Mod07/McCoy_edit_delete/index.php](http://www.jasonkmccoy.com/AB-Tech/web250/Mod07/McCoy_edit_delete/index.php)

如果您访问该页面，您将看到，那里有鸟类有 2 种食物和 2 个栖息地，我需要删除 2 行以便只返回唯一的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:53:47.660

```
"SELECT b.birdID, b.nameGeneral, b.nameSpecific, 
b.genus, b.species, b.family, b.populationTrend, f.food, h.habitat 
FROM birds  
JOIN bird_food AS bf ON (bf.birdID_FK = bh.birdID_FK) 
JOIN food AS f ON (f.foodID = bf.foodID_FK) 
JOIN habitat AS h ON (h.habitatID = bh.habitatID_FK) 
JOIN bird_habitat AS bh  ON (b.birdID = bh.birdID_FK ) 
group by f.foodID
ORDER BY b.birdID ASC"; 
```

# database - 存储简单空间数据的最佳方式是什么

> ID：12985962
> 
> 赞同：2
> 
> 时间：2012-10-20T06:40:03.667
> 
> 标签：database, spatial

我有一个想法来构建一个简单的游戏。它将有一个 2D 网格的棋盘，玩家可以在网格的节点上放置代币。

基本上我可以像这样存储元组`{x, y, token}`

在渲染显示部分网格的 UI 时，我希望需要空间查询来收集数据。滚动时，我希望有类似的查询。根据玩家的数量，网格可能会变得很大，但实际上我不希望它的增长超出关系数据库可以轻松处理的范围。

我正在研究[Spatial Databases](http://en.wikipedia.org/wiki/Spatial_database)，但我不知道这是否会增加比它解决的问题更多的问题。解决这个问题的方法是什么？我应该使用空间数据库吗？如果是，哪一个最适合这个（简单）问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T09:39:36.163

与传统（一维）索引相比，空间索引为您带来了巨大的好处。像这样的查询

```
x BETWEEN a AND b AND y BETWEEN c AND d 
```

将只能使用索引 for`x`或`y`. 这意味着 DBMS 将能够排除 ab 条带（列）之外的记录，但对于其中的所有记录，它必须通过`y`值进行筛选。（如果你有一个复合索引并不重要`x`，`y`因为 x 可能有无限的基数）。

空间索引可以同时处理两个维度，因此它将排除大部分数据库，它只需要测试与您的区间相交的几个*网格*单元中的单个值。

# jquery - 在 jquery 中插入 css 背景图像

> ID：12985964
> 
> 赞同：1
> 
> 时间：2012-10-20T06:40:14.633
> 
> 标签：jquery, css, html

如何替换`"+"` and`"-"`签名并将其替换为 css `background-image`。这是示例代码[http://jsfiddle.net/9nxAc/](http://jsfiddle.net/9nxAc/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:54:25.227

要使它们成为图像，只需更改变量：

```
 closedSign: '[+]',
    openedSign: '[-]' 
```

至..

```
 closedSign: '<img src="link/to/image.jpg" />',
    openedSign: '<img src="link/to/next/image.png" />' 
```

[jsFiddle](http://jsfiddle.net/9nxAc/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:54:32.463

你可以使用这个方法：

```
ul.topnav span{
    float:right;
    background-image:url('background.png');
    text-indent: -9999px;
} 
```

这样做，标志将不可见。​</p>

# objective-c - 旋转的图像也应该遵循相同的模式，没有空白

> ID：12985966
> 
> 赞同：2
> 
> 时间：2012-10-20T06:40:35.243
> 
> 标签：objective-c, uiimageview, uiimage

我正在使用此代码旋转图像

```
- (CGImageRef)CGImageRotatedByAngle:(CGImageRef)imgRef angle:(CGFloat)angle
{

    CGFloat angleInRadians = angle * (M_PI / 360);

    CGFloat width = CGImageGetWidth(imgRef);

    CGFloat height = CGImageGetHeight(imgRef);

    CGRect imgRect = CGRectMake(0, 0, width, height);

    CGAffineTransform transform = CGAffineTransformMakeRotation(angleInRadians);

    CGRect rotatedRect = CGRectApplyAffineTransform(imgRect, transform);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef bmContext = CGBitmapContextCreate(NULL,
                                                   rotatedRect.size.width,
                                                   rotatedRect.size.height,
                                                   8,
                                                   0,
                                                   colorSpace,
                                                   kCGImageAlphaPremultipliedFirst);

    CGContextSetAllowsAntialiasing(bmContext, YES);

    CGContextSetShouldAntialias(bmContext, YES);

    CGContextSetInterpolationQuality(bmContext, kCGInterpolationHigh);

    CGColorSpaceRelease(colorSpace);

    CGContextTranslateCTM(bmContext,

                          +(rotatedRect.size.width/2),
                          +(rotatedRect.size.height/2));

    CGContextRotateCTM(bmContext, angleInRadians);

    CGContextTranslateCTM(bmContext,
                          -(rotatedRect.size.width/2),
                          -(rotatedRect.size.height/2));

    CGContextDrawImage(bmContext, CGRectMake(0, 0,
                                             rotatedRect.size.width,
                                             rotatedRect.size.height),
                       imgRef);

    CGImageRef rotatedImage = CGBitmapContextCreateImage(bmContext);

    CFRelease(bmContext);
   // [(id)rotatedImage autorelease];

    return rotatedImage;

} 
```

通过这个我有这样的结果图像..![这是我得到](../Images/e3fd8cce27997fbcccc4eaf761d86ad9.png)

那些空白不应该在那里，它应该遵循相同大小的模式，没有周围的空白..旋转的图像....

请帮助..提前谢谢

# uitableview - Prototype Cell 和 UITableView 的问题

> ID：12985969
> 
> 赞同：0
> 
> 时间：2012-10-20T06:41:21.447
> 
> 标签：uitableview

我有两种单元格，一种是标准标题-副标题单元格，另一种是带有两个 UITextField 的自定义单元格。它们有不同的标识符，VIEW 和 EDIT。

在我的代码中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我需要创建两种细胞。在任何时候，我只有一个单元格在编辑，所以我创建一个`NSUInteger`来跟踪正在编辑的单元格。

我的代码如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell;
    if ( rowInEdit == indexPath.row )
    {
        cell = [tableView dequeueReusableCellWithIdentifier:@"EDIT"];
        if ( !cell )
        {
            cell = [[UITableViewCell alloc]init];
        }
        RLSite* site = [[RLSettings settings]siteAtIndex:indexPath.row];
        [[cell textLabel]setText:site.name];
        [[cell detailTextLabel]setText:site.url];
    }
    else
    {
        cell = [tableView dequeueReusableCellWithIdentifier:@"VIEW"];
        if ( !cell )
        {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"VIEW"];
        }
        RLSite* site = [[RLSettings settings]siteAtIndex:indexPath.row];
        [[cell textLabel]setText:site.name];
        [[cell detailTextLabel]setText:site.url];
    }
    return cell;
} 
```

请注意，我的第一部分肯定有缺陷。我不知道如何创建一个带有原型的单元格，以及如何将reuseIdentifier 分配给它。此外，我不知道`UITextField`一旦创建该单元格后如何访问该单元格中的那些。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T07:39:24.423

e. `how to create a cell with prototype`您可以按照这些教程进行操作，因为我也是从这些教程之一中学到的

教程

1.  我提到的[第一个。](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)
2.  [第二个](http://www.techotopia.com/index.php/Using_Xcode_Storyboards_to_Build_Dynamic_TableViews_with_Prototype_Table_View_Cells)

并且要超出添加的文本视图，您需要为它们分配标签值（显然是不同的）。然后使用下面的代码将它们超出您的`tableView:cellForRowAtIndexPath:`方法。

```
UITextField *txtField = (UITextField *)[cell viewWithTag:8]; 
```

在这里`8`用您的标签值替换 :)

# php - 如何在 silex 中安装“子控制器”

> ID：12985975
> 
> 赞同：1
> 
> 时间：2012-10-20T06:42:21.157
> 
> 标签：php, controller, silex

所以我正在做一个 Silex 项目，它是一个支票簿登记簿。这个想法是账户有交易。我正在使用拥有控制器提供程序的方法，因此我正在安装提供程序。我很清楚，我可以为各自的控制器提供者挂载 /accounts 和 /transactions 。然而，由于逻辑上的交易是账户的孩子，我希望实现这种类型的 URL 结构：

`/account/1`= 获取帐户 ID 1 的请求

`/account/1/transaction/100`= 获取交易 ID 100 的请求，包括账户 ID 1 作为参数

提前致谢。

编辑：我没有提到我的控制器设置如下所示：

引导程序.php：

```
$app->mount('/account', new AccountControllerProvider());
$app->mount('/transaction', new TransactionControllerProvider()); 
```

AccountControllerProvider.php：

```
$controllers->put('/', 'Mogaard\Checkbook\Controller\AccountController::createAction')
    ->bind('account_create');
$controllers->get('/{account}', 'Mogaard\Checkbook\Controller\AccountController::displayAction')
    ->convert('account', $accountProvider)
    ->bind('account_display');
$controllers->post('/{account}', 'Mogaard\Checkbook\Controller\AccountController::saveAction')
    ->convert('account', $accountProvider)
    ->bind('account_save');
$controllers->delete('/{account}', 'Mogaard\Checkbook\Controller\AccountController::deleteAction')
    ->convert('account', $accountProvider)
    ->bind('account_delete'); 
```

TransactionControllerProvider.php：

```
$controllers->put('/', 'Mogaard\Checkbook\Controller\TransactionController::createAction')
    ->bind('transaction_create');
$controllers->post('/{transaction}', 'Mogaard\Checkbook\Controller\TransactionController::saveAction')
    ->convert('transaction', $transactionProvider)
    ->bind('transaction_save');
$controllers->delete('/{transaction}', 'Mogaard\Checkbook\Controller\TransactionController::deleteAction')
    ->convert('transaction', $transactionProvider)
    ->bind('transaction_delete'); 
```

我希望为 /account/{account}/transaction/{transaction} 添加一个路由，但我不确定如何使用已安装的控制器提供程序来完成它，并且没有将事务控制器职责混合到帐户控制器提供程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T13:33:03.713

正如 Igorw 所建议的，我将把它作为答案发布（以防万一发帖者没有阅读评论）：

我可能不太习惯silex，但你试过吗

`$app->get('/account/{accId}/transaction/{transId}'...)`?

**编辑：**

跟踪该路线后，您可以[转发](http://silex.sensiolabs.org/doc/usage.html#forwards) `/account/{accId}/transaction/{transId}`到`/transaction/account/$accId/transaction/$transId`. 就像 an 一样，`.htaccess`它将对用户不可见。或者甚至使用 将`.htaccess`这些路线映射到最适合您的路线。

# eclipse - Eclipse 新手 + 如何使用 Ecipe 启动项目？包是什么意思？

> ID：12985982
> 
> 赞同：0
> 
> 时间：2012-10-20T06:43:13.567
> 
> 标签：eclipse, package

我以前没有使用过 Eclipse。我刚刚安装了 Eclipse 和 JDK。我在网上找到了一些文件夹，其中包含一些代码，例如工厂方法（pizzafm）、简单工厂（pizzaas）、抽象工厂（pizzaaf）

```
package headfirst.factory.pizzaaf;

package headfirst.factory.pizzafm;

package headfirst.factory.pizzas; 
```

有人可以解释上面的那些包是什么意思吗？

当我开始使用 Eclipse 工具创建项目时，项目名称是什么？（是headfirst吗？），包名？（工厂？），源文件夹（是我需要将所有 .java 类放入的文件夹吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:00:16.203

`headfirst.factory`是包名，`pizzaaf`是`class`名称。

您的项目名称可以是您喜欢的任何名称，但是当您在该项目中创建一个 java 类时，请`Pizzaaf`在包文本框中输入您需要输入的内容`headfirst.factory`，正如我从您的问题中看到的那样。

![新班级](../Images/713071ace67b54cbcc50675626121163.png)

在图像中看到我选择了我的项目名称，`Abc`所以当我右键单击它并选择`New->Class`它时，这表明`Abc/src`我的源文件`.java`文件将位于此文件夹中。现在我想`Pizzaaf.java`在包中创建文件，`headfirst.factory`所以我`Pizzaaf`在“名称”文本框中写入`headfirst.factory`了“包”文本框。现在，当您单击“完成”时，您`Pizzaaf.java`将处于层次结构中`Abc\src\headfirst\factory\Pizzaaf.java`。

希望你能得到理解。

# c++ - 如何告诉 c++ 9+1 应该是 1 而不是 10？

> ID：12985983
> 
> 赞同：0
> 
> 时间：2012-10-20T06:43:18.170
> 
> 标签：c++, operators, operator-overloading

我有一个由 10 个整数组成的数组，k 是一个循环遍历数组的整数。每当我执行 'k = k+1' 时，都会将 1 添加到 'k' 中（如果 'k' 为 7，则它变为 8）。但是如果“k”达到 9，我不希望“k+1”评估为 10，我希望它变为 1；

我考虑过使用这样的函数：

```
void add_one(int &k){
   if(k == 9){
      k = 1;
   }else{
      k = k+1;
   }
} 
```

每当我想在“k”中添加一个时：

```
add_one(k); 
```

然后我发现了运算符重载，但是很混乱，认为必须有更好的方法。我们是否可以告诉 c++，每当它看到 k = 9 的 k+1 时，它必须返回 1 而不是 10？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T06:44:49.037

您可以使用如下表达式：

```
k = k % 9 + 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T06:50:36.530

您不能更改`+`内置类型的含义。如果您编写自己的类，其实例的行为类似于数字，那么您可以`+`随心所欲。

一种方法是制作一个包装现有类型的瘦类：

```
class mynumber {
  int n;
public:
  mynumber(int n_init) : n(n_init) { }
}; 
```

现在您可以为 编写重载`mynumber`，以及转换运算符等。

关键是重载适用于类（和枚举）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T06:59:59.057

改`if(k == 9)`到`if(k >= 9)` 函数中`void add_one(int k)`。删除`&`in `void add_one(int &k)`。

```
#include <iostream>
using namespace std;

void add_one(int k){
   if(k >= 9){
      k = 1;
   }else{
      k = k+1;
   }
   cout<<" k="<<k<<"  \n";
}

int main(void)
{
  int k ;
  for(k=0;k<20;k++)  
  {
      cout<<"input "<<k<<" ";
      add_one(k);
  }

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

输出：

```
input 0  k=1
input 1  k=2
input 2  k=3
input 3  k=4
input 4  k=5
input 5  k=6
input 6  k=7
input 7  k=8
input 8  k=9
input 9  k=1
input 10  k=1
input 11  k=1
input 12  k=1
input 13  k=1
input 14  k=1
input 15  k=1
input 16  k=1
input 17  k=1
input 18  k=1
input 19  k=1

Press any key to continue 
```

# php - 如何使 xpath 查询动态化？

> ID：12985987
> 
> 赞同：1
> 
> 时间：2012-10-20T06:43:36.510
> 
> 标签：php, xpath

我正在使用 PHP 在 XPATH 中工作。我已经通过硬编码完成了。但我做了很多谷歌搜索以使 xpath 查询动态化。是否有任何解决方案可以使 xpath 查询动态化？

我有以下 xml 代码：

```
<information>
<field name="secondtitle">ABCt</field>
<field name="author">XYZ</field>
<field name="ISBN">9780712617611</field>
<field name="publisher">abc</field>
</information> 
```

另一个文件的数据如下：

```
<information>
<field name="deliveryCosts">1.95</field>
<field name="deliveryTime">3 - 5 Werkdagen</field>
<field name="EAN">9789021142523</field>
<field name="ISBN">9789021142539</field>
<field name="subcategories">abc</field>
<field name="auteur">IJK</field>
<field name="type">xyz</field>
</information> 
```

现在只有属性不同，我试图在单个 php 文件中访问它们。但我所有的查询都是硬编码的，但我想动态访问它们。

以下是我硬编码的php代码：

```
$auth = $xml->xpath("/products/product[$i]/additional/field[@name='auteur']");
$type = $xml->xpath("/products/product[$i]/additional/field[@name='type']");

foreach($auth as $au)
{
foreach($type as $ty)
{
echo $au = mysql_real_escape_string($au);
echo $ty = mysql_real_escape_string($ty);
}} 
```

此代码与我在上面粘贴的第二个 xml 代码一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:12:45.220

您可以有一个“骨架”表达式并创建一个“可执行实例”。我不知道 PHP，但在 C# 中可以这样完成：

```
string XpathExpression 
   = string.Format("/products/product[$i]/additional/field[@name='{0}']",
                    myName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:51:10.497

XPATH 提供了一些运算符，希望您正在使用它们。作为 | 运算符是用于对两个查询进行并集的用户，并且还有一个用于对两个或多个查询进行交集的运算符。

在下面我建议你使用：

```
$auth = $xml->xpath("/products/product[$i]/additional/field[@name='auteur' or @name='author']");
 foreach($auth as $au)
{
foreach($type as $ty)
{
echo $au = mysql_real_escape_string($au);

}} 
```

在作者的情况下它在这里工作，对于产品类型的问题，请遵循我的以下代码。

```
 $type = $xml->xpath("/products/product[$i]/additional/field[@name='type']");
if(!empty($type ))
{
  echo 'the node is available';
}
else
{
  echo 'the node is not available';
} 
```

# jquery - $.isNumeric 不是函数吗？

> ID：12985989
> 
> 赞同：2
> 
> 时间：2012-10-20T06:43:43.110
> 
> 标签：jquery, javascript-events

我包括 jquery 文件，例如，

```
<script type="text/javascript" src="jquery-1.8.0.min.js"></script> 
```

我有这样的代码，

```
if($.isNumeric(now))
{            
  alert("yes");
}
else
{
  alert("no");
} 
```

但是当我运行这个脚本时，会出现一个错误，例如，

```
 $.isNumeric is not a function 
```

我需要做什么？。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T06:57:34.040

将您的代码包装在`$(document).ready(function () { //your code goes here... });`请参阅[jQuery.ready()](http://api.jquery.com/ready/)以获取更多详细信息。

或者，您可以简单地将代码放在`</body>`.

此外，您可能想尝试替换 $`jQuery`并查看您的 javascript 中是否存在任何冲突，例如`jQuery.isNumeric("-10");`

如果确实有冲突，您可以`jQuery.noConflict();`在 jQuery 代码的开头添加这行代码。更多细节请参考[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)。

查看Stackoverflow 上[的这篇文章](https://stackoverflow.com/questions/6109847/jquery-is-not-a-function-error)，这也可能对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:49:24.240

首先，确保 JQuery 脚本已通过 using 加载`document.ready`（或者只是确保您的脚本位于 JQuery 脚本标记之后）。

```
$(document).ready(function() {
    var now = 1;
    alert($.isNumeric(now) ? "yes" : "no");
}); 
```

其次，确保 JQuery 源实际加载正确......也许尝试 JQuery CDN。

```
<script src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js'></script> 
```

# visual-studio-2010 - 在 Visual Studio 2010 中为报表查看器设置页面布局

> ID：12985990
> 
> 赞同：13
> 
> 时间：2012-10-20T06:44:08.883
> 
> 标签：visual-studio-2010, c#-4.0, report-viewer2010

我又遇到了一个小问题。我在 Visual Studio 2010 的 Windows 窗体应用程序中使用了 ReportViewer。我的报告 ID 的宽度约为 7 英寸。当我在打印布局中查看报告时，报告被切过页面，即只有一半的内容在页面上，其余内容超出了右边距和页面边界。然后我必须单击报表查看器顶部菜单中的页面设置来更改页面设置，我只需将左右边距从 1 减少到 0.25。

我不想每次查看和打印报告时都这样做。有没有办法在 C# 中以编程方式更改这些设置或更改默认页面布局？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-25T20:55:18.870

您可以使用以下代码：

```
 System.Drawing.Printing.PageSettings pg=new System.Drawing.Printing.PageSettings();
 pg.Margins.Top = 0;
 pg.Margins.Bottom = 0;
 pg.Margins.Left = 0;
 pg.Margins.Right = 0;
 System.Drawing.Printing.PaperSize size = new PaperSize();
 size.RawKind = (int)PaperKind.A5;
 pg.PaperSize = size;
 reportViewer1.SetPageSettings(pg);
 this.reportViewer1.RefreshReport(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T06:12:03.467

将 pg.LandScape = true 与您现有的一起使用，

```
 pg.Margins.Top = 0;
    pg.Margins.Bottom = 0;
    pg.Margins.Left = 0;
    pg.Margins.Right = 0; 
    pg.LandScape = true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-26T12:35:35.370

```
ReportViewer rpt = new ReportViewer();
rpt.SetPageSettings(new System.Drawing.Printing.PageSettings() { Landscape = true }); 
```

# jquery-ui - jQuery ui modal Dialog阻塞点击事件

> ID：12985992
> 
> 赞同：0
> 
> 时间：2012-10-20T06:44:28.740
> 
> 标签：jquery-ui, dialog, click, blocking

我有一个页面，其中有两个元素，一个输入文本框和一个按钮

现在我在文本框上有一个模糊事件处理程序，它首先显示一个 jquery ui 模式窗口，然后发出一个 ajax 请求，一旦请求完成，我将关闭对话框。另外我在按钮上有一个点击事件处理程序（它也做某事）。

现在，当我在文本框中键入内容并直接单击按钮时，模糊和单击事件处理程序都应该触发，但它只会触发模糊并且由于 jquery ui 模态对话框而导致单击事件被阻止（当我删除对话框时，两个事件被解雇了）

这是示例代码

```
 // the topic/subscription hash
var pubsub_cache = {};

$.publish = function(/* String */topic, /* Array? */args){
    // summary:
    //        Publish some data on a named topic.
    // topic: String
    //        The channel to publish on
    // args: Array?
    //        The data to publish. Each array item is converted into an ordered
    //        arguments on the subscribed functions.
    //
    // example:
    //        Publish stuff on '/some/topic'. Anything subscribed will be called
    //        with a function signature like: function(a,b,c){ ... }
    //
    //    |        $.publish("/some/topic", ["a","b","c"]);
    pubsub_cache[topic] && $.each(pubsub_cache[topic], function(){
        this.apply($, args || []);
    });
};

$.subscribe = function(/* String */topic, /* Function */callback){
    // summary:
    //        Register a callback on a named topic.
    // topic: String
    //        The channel to subscribe to
    // callback: Function
    //        The handler event. Anytime something is $.publish'ed on a
    //        subscribed channel, the callback will be called with the
    //        published array as ordered arguments.
    //
    // returns: Array
    //        A handle which can be used to unsubscribe this particular subscription.
    //    
    // example:
    //    |    $.subscribe("/some/topic", function(a, b, c){ /* handle data */ });
    //
    if(!pubsub_cache[topic]){
        pubsub_cache[topic] = [];
    }
    pubsub_cache[topic].push(callback);
    return [topic, callback]; // Array
};

$.unsubscribe = function(/* Array */handle){
    // summary:
    //        Disconnect a subscribed function for a topic.
    // handle: Array
    //        The return value from a $.subscribe call.
    // example:
    //    |    var handle = $.subscribe("/something", function(){});
    //    |    $.unsubscribe(handle);

    var t = handle[0];
    pubsub_cache[t] && $.each(pubsub_cache[t], function(idx){
        if(this == handle[1]){
            pubsub_cache[t].splice(idx, 1);
        }
    });
};

var $loaderDialog = $('<div>The dummy dialog</div>')
                                .dialog({
                                    autoOpen:false,
                                    modal:true
                                });

            $('.validate').on('change', function(){
                $loaderDialog.dialog('open');
                setTimeout(function(){
                    $.publish('validation-done');

                },3000)
            });

            $.subscribe('validation-done', function(){
                $loaderDialog.dialog('close');
                console.log('validation done');
            });

            $('#btn').on('click', function(){

                    alert('clicked');
            }); 
```

这是相同的 JS 小提琴 - [http://jsfiddle.net/vjunloc/2Lw7S/7/](http://jsfiddle.net/vjunloc/2Lw7S/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:10:44.527

好吧，所以我终于找到了解决这个问题的方法，首先我检查了 jquery 模态对话框小部件的源代码，并且在一个地方他们禁用了所有事件，所以也许这就是罪魁祸首，现在我所做的解决方法是

```
$('.validate').on('change', function(){
            setTimeout(function(){
                   $loaderDialog.dialog('open');
                   setTimeout(function(){
                     $.publish('validation-done');
                 },3000)
            }, 100);

        }); 
```

所以基本上我引入了 100 毫秒的延迟，此时控件将能够到达点击处理程序，因此它将被调用，希望这会有所帮助。

# php - 从源调整大小后接收图像

> ID：12985993
> 
> 赞同：0
> 
> 时间：2012-10-20T06:44:32.607
> 
> 标签：php, sql-server, image, resize

如何通过直接链接从服务器接收尺寸减小的图像文件？解释：实际 url= [http://domain.com/image.jpg](http://domain.com/image.jpg)有 h=200，with=200 我想要这个文件已经从服务器减少到 50 到 50。现在获取文件 url= [http://anotherDomain.com ?file=http://domain.com/image.jpg&h=50&w=50](http://anotherDomain.com?file=http://domain.com/image.jpg&h=50&w=50)